# StackOverflow 问答 13155000-13155999

# java - 使用java的正则表达式

> ID：13155006
> 
> 赞同：1
> 
> 时间：2012-10-31T09:39:42.790
> 
> 标签：java, regex

我有一个字符串如下。

```
 $Alarm:com.Alarm(a  ==  123 || (count  ==  12345 || (time  matches  "24" && pqr =="1"))) 
$Event:com.Event(b  ==  123 || (co  ==  12345 || (time  matches  "204" && pqr =="22"))) 
```

每当我遇到上述字符串时，我都需要生成以下字符串。我的意思是我需要`"from AlarmStream"`为子字符串`$Alarm:com.Alarm(...)`和`"from EventStream"`子字符串附加字符串`$Event:com.Event(...)` ，如下所示。

```
 $Alarm:com.Alarm(a  ==  123 || (count  ==  12345 || (time  matches  "24" && pqr =="1") )) from AlarmStream

$Event:com.Event(b  ==  123 || (co  ==  12345 || (time  matches  "204" && pqr =="22"))) from EventStream 
```

我目前正在使用以下模式在 java 中实现相同的效果。

```
 Pattern alarmPattern = Pattern.compile(".*?\\.Alarm\\(([^\\(]*?|\\([^\\)]*?\\))*\\)");
 Pattern eventPattern = Pattern.compile(".*?\\.Event\\(([^\\(]*?|\\([^\\)]*?\\))*\\)"); 
```

但我没有得到正确的输出。

请为我提供一些指示以实现正确的输出。正则表达式应该只考虑最后一个括号，这里左右括号对的数量不固定。它可能会增加或减少。所以逻辑应该适用于任意数量的左括号和右括号对。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:44:21.497

为什么在这里需要 RegEx。我认为即使是这种类型的 fo 代码也应该适合您：

```
if (str.startsWith("$Alarm:com.Alarm"))
    str = str + " from AlarmStream";
else if (str.startsWith("$Event:com.Event"))
    str = str + " from EventStream"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:55:19.837

与以前的解决方案类似：

```
str += str.startsWith("$Alarm:com.Alarm")?" from AlarmStream":str.startsWith("$Event:com.Event")?" from EventStream":""; 
```

# java - 如何使用java将密码存储在密钥注册表中？

> ID：13155012
> 
> 赞同：-2
> 
> 时间：2012-10-31T09:40:05.060
> 
> 标签：java, security, registry

如何在密钥注册表中保存和检索密码？
如何保护密钥不被编辑和删除？
如果密钥被删除，如何知道授权进入应用程序的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:50:59.500

您可以只使用 Java 代码，但下面的示例使用外部 x86 本机 win32 DLL 和一些 JNI 胶水代码，如下所示：

[http://sourceforge.net/projects/jregistrykey/](http://sourceforge.net/projects/jregistrykey/)

虽然它自 2011 年以来没有更新。

看看下面的第一个答案，看看它可以只使用反射来完成。

[使用 Java 读取/写入 Windows 注册表](https://stackoverflow.com/questions/62289/read-write-to-windows-registry-using-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:46:38.380

你不能直接在Java中。Java 字节码在不受任何 Windows 注册表或其他 Windows 功能影响的受保护环境中运行。您最好在 C/C++ 中实现一个 dll 以读取/写入注册表，然后制作一个 JNI 包装器以直接从您的 java 程序调用 dll 方法。

也许我误解了您的问题：您是在谈论 windowskey 注册表，对吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-25T07:32:06.073

您可以使用我的库，只需导入 .jar 文件并像 .java main 中所示那样使用它。

它可以创建密钥、读取它们并加密它们以进行安全密码存储。它使用 128 位 AES

[https://github.com/stefanvozd/HalRegistry](https://github.com/stefanvozd/HalRegistry)

您还可以获取源代码并根据需要进行修改。

# sql-server - WCF：提供程序未返回 ProviderManifestToken 字符串

> ID：13155014
> 
> 赞同：0
> 
> 时间：2012-10-31T09:40:12.020
> 
> 标签：sql-server, wcf

我刚收到这个错误，我想我会分享它，这样其他人就不会花一个小时试图找出问题所在。我有 SQL Server 2008 Express 和一个运行良好的 WCF 服务。突然间它停止了工作。这是错误消息

> 服务器在处理请求时遇到错误。异常消息是“提供程序没有返回 ProviderManifestToken 字符串。”。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：
> 
> 在 System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection) 在 System.Data.Entity.ModelConfiguration.Utilities.DbConnectionExtensions.GetProviderInfo(DbConnection connection, DbProviderManifest& providerManifest) 在 System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) 在System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) 在 System.Data.Entity.Internal.RetryLazy `2.GetValue(TInput input) at System.Data.Entity.Internal.LazyInternalContext.InitializeContext() at System.Data.Entity.Internal.InternalContext.Initialize() at System.Data.Entity.Internal.LazyInternalContext.get_ObjectContext() at System.Data.Entity.DbContext.System.Data.Entity.Infrastructure.IObjectContextAdapter.get_ObjectContext() at lambda_method(Closure , Object ) at System.Data.Services.Providers.DbContextHelper.GetObjectContext(Object o) at System.Data.Services.Caching.MetadataCache`1.TryLookup(Type serviceType, Object dataContextInstance) 在 System.Data.Services.Providers.BaseServiceProvider.LoadMetadata() 在System.Data.Services.DataService `1.CreateMetadataAndQueryProviders(IDataServiceMetadataProvider& metadataProviderInstance, IDataServiceQueryProvider& queryProviderInstance, BaseServiceProvider& builtInProvider, Object& dataSourceInstance) at System.Data.Services.DataService`1.CreateProvider() 在 System.Data.Services.DataService`1.EnsureProviderAndConfigForRequest() at System.Data.Services.DataService`1.HandleRequest() 在 System.Data.Services.DataService`1.ProcessRequestForMessage(Stream messageBody) 在 SyncInvokeProcessRequestForMessage(Object , Object[] , Object[] ) 在 System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[ ] 在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc& rpc) 的输入，Object[]& 输出) ) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime。ProcessMessage3(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System。 ServiceModel.Dispatcher.MessageRpc.Process（布尔 isOperationContextSet）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:40:12.020

问题是 SQL Server Windows 服务以某种方式停止了。重新启动后，一切再次正常。

# wpf - 屏幕截图作为按钮内容

> ID：13155015
> 
> 赞同：0
> 
> 时间：2012-10-31T09:40:12.397
> 
> 标签：wpf

我想做一些类似于 Microsoft Powerpoint 的事情：我想捕获当前屏幕（或当前窗口中的一个网格），然后将其设置为按钮的内容（如 powerpoint，其中有幻灯片的预览）侧边栏）。

最好的方法是什么？我目前的想法是将其保存为 PNG，然后将其作为图像重新加载到按钮的内容中，但我确信有更好的方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:13:25.020

尝试这个：

```
 <Grid>
        <Viewbox 
            x:Name="Viewer" 
            Stretch="Uniform"
            DataContext="{Binding ElementName=Thumbnail1, Path=Data}">
            <Grid Width="224" Height="168" SnapsToDevicePixels="True" Margin="4,0,4,0">
                <Grid.Background>
                    <VisualBrush Stretch="Uniform" TileMode="None" Visual="{Binding}" AlignmentY="Center"/>
                </Grid.Background>
            </Grid>
        </Viewbox>
    </Grid> 
```

我一开始使用另存为 PNG 方法。然后我找到了上面的方法。ViewBox 的 DataContext 是一个画布。我可以通过这种方式创建屏幕的实时预览，但是我的屏幕是画布对象。

# django - 如何获取所有 Facebook 事件？

> ID：13155024
> 
> 赞同：1
> 
> 时间：2012-10-31T09:40:22.873
> 
> 标签：django, facebook, events

我正在构建一个 django 应用程序，如果有办法从 facebook 获取所有最新/流行事件，我很感兴趣。

我想得到他们的标题、位置、描述等。

编辑：

为了使下面答案中的解决方案成功，我需要访问令牌。无法使用应用程序令牌完成。此外，我不需要搜索事件，而是按受欢迎程度排序检索它们。

因为我现在使用 django facebook，所以我可以让我的用户朋友参加活动（他们正在参与）。还有其他方法可以通过 API 检索它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:24:13.703

[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

寻找标题“搜索”：

```
https://graph.facebook.com/search?q=conference&type=event 
```

你需要一个访问令牌，但我想一个应用程序访问令牌会做：

```
$app_access_token = APPID . '|' . APPSECRET; 
```

只要您不更改应用程序的 id 和密码（很可能永远不会发生），应用程序访问令牌就有效。

编辑：

如果您查看事件的 FQL 表，则没有“人气”字段：

[https://developers.facebook.com/docs/reference/fql/event/](https://developers.facebook.com/docs/reference/fql/event/)

...所以我想您的意思是按“参加人数最多的人”进行排序。但是您写了“来自 facebook 的所有最新/流行事件”，这意味着所有事件，而不仅仅是登录用户和他的朋友的事件。在这种情况下获取事件的唯一方法是我上面提出的解决方案。

如果您想获取用户的事件，FQL 将是正确的方法，我猜：

```
SELECT name,description,location,attending_count from event WHERE eid in (SELECT eid FROM event_member WHERE uid = me()) ORDER BY attending_count DESC 
```

这为您提供了用户的所有事件，按参加人数排序。

# typo3 - 在typo3中注册时显示错误

> ID：13155025
> 
> 赞同：0
> 
> 时间：2012-10-31T09:40:25.377
> 
> 标签：typo3

为了在typo3 网站中提供注册选项，我插入了 sr_feuser_register_3.0.1 扩展名。除了这个扩展，我还安装了静态信息表和 div 2007 扩展。

我通过在打字稿模板中包含 sr_feuser 模板 css 并插入插件来在页面中包含注册表单。但是当我在注册表中注册自己时，它会显示错误：-

“您必须输入两次相同的密码。密码最多包含40个字符。请输入密码！”

密码输入正确，但它一次又一次地显示这个问题&由于这个问题我无法注册。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:24:09.603

我有问题。问题是，当我将注册表单和登录表单放在同一页面时，它开始出现问题。但是，如果我只输入注册表，它就会开始工作。

但我必须将两种形式放在一页中。请告诉我我该怎么做。

# mobile - AdSense - 移动广告未在某些（常见）设备上显示

> ID：13155028
> 
> 赞同：1
> 
> 时间：2012-10-31T09:40:33.913
> 
> 标签：mobile, adsense

几周前我已经为我的移动网站插入了代码，但它几乎没有出现在我的所有测试中。它运行的唯一浏览器是 Android 上的 Chrome（在 Galaxy S2 上测试）。它没有出现在 iPhone 上，在几个不同的设备上测试了 Safari 和 Chrome。

该网站是[http://m.radicalislam.org](http://m.radicalislam.org)

我看过[这篇文章](https://support.google.com/adsense/bin/answer.py?hl=en-GB&answer=75764&topic=2453404&parent=23384&rd=1)，找不到任何适用的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T19:05:22.480

我调试此问题的第一步是在 Adsense 中设置选项以显示纯色的备用广告，例如蓝色或明显的颜色。这将为您提供有关显示来自 Google 的任何内容是否存在问题的线索，或者是否是 Google 为您提供广告的具体问题。

如果蓝色*没有*显示，那可能是一件好事，因为这可能只是意味着您的代码存在问题（可能与您正在进行的所有页面速度冲突？）。

如果*确实*显示，则意味着 Google 没有为您提供广告。原因有很多：[https ://support.google.com/adsense/bin/answer.py?hl=en-GB&answer=75764&topic=2453404&parent=23384&rd=1](https://support.google.com/adsense/bin/answer.py?hl=en-GB&answer=75764&topic=2453404&parent=23384&rd=1)

# javascript - 按下 ctrl jQuery 时停止功能

> ID：13155029
> 
> 赞同：0
> 
> 时间：2012-10-31T09:40:39.030
> 
> 标签：javascript, jquery, mouseenter, ctrl

所以我正在制作一个小游戏，你必须按下`Ctrl`才能阻止 div 随机跳跃。但是我无法让它工作...... jumpRandom 函数工作正常，直到我`randomJump(){return false;};`把`if (event.ctrlKey) {}`. 我应该怎么做才能让它工作？

js：

```
 $(document).ready(function() {

function randomFromTo(from, to){
            return Math.floor(Math.random() * (to - from + 1) + from);
}
$( "#goal" ).bind('mouseenter keypress', function(event) {
    if (event.ctrlKey) {
            randomJump(){return false;};
        }
});
$('#goal').mouseenter(randomJump);

function randomJump(){
            /* get Window position and size
             * -- access method : cPos.top and cPos.left*/
            var cPos = $('#pageWrap').offset();
            var cHeight = $(window).height() - $('header').height() - $('footer').height();
            var cWidth = $(window).width(); 

            // get box padding (assume all padding have same value)
            var pad = parseInt($('#goal').css('padding-top').replace('px', ''));

            // get movable box size
            var bHeight = $('#goal').height();
            var bWidth = $('#goal').width();

            // set maximum position
            maxY = cPos.top + cHeight - bHeight - pad;
            maxX = cPos.left + cWidth - bWidth - pad;

            // set minimum position
            minY = cPos.top + pad;
            minX = cPos.left + pad;

            // set new position         
            newY = randomFromTo(minY, maxY);
            newX = randomFromTo(minX, maxX);

            $('#goal').fadeOut(50, function(){

                $('#goal').fadeIn(700);
            });
            $('#goal').animate({
                    left: newX,
                    top: newY,
                    duration: 500
                });
        }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:56:34.250

尝试这个：

```
$("#goal").bind('mouseenter keypress', function (e) {
    randomJump(e);
});

function randomJump(e) {
    if (!e.ctrlKey) {
        //do normal stuff
    } else {
        //depending on how permanent you need this to be...
        //$("#goal").unbind('mouseenter keypress');
    }
    return !e.ctrlKey;
} 
```

# xcode - 如何从 XCODE 中提取 UI 元素？

> ID：13155032
> 
> 赞同：0
> 
> 时间：2012-10-31T09:40:53.007
> 
> 标签：xcode, image

我希望从 XCODE 获得 UI 构建器（滑块、切换器、按钮等）元素的 PNG（或其他支持 alpha 透明度的图像格式）版本。有谁知道如何做到这一点/包含这些文件的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:47:25.893

我想您正在寻找 PSD 形式的 GUI 工具包...

如果是，请查看这个方便的链接[http://speckyboy.com/2010/04/30/iphone-and-ipad-development-gui-kits-stencils-and-icons/](http://speckyboy.com/2010/04/30/iphone-and-ipad-development-gui-kits-stencils-and-icons/)

作者已链接到网络上可用的各种资源。希望这能回答你的问题。

# c# - 异步方法与 System.Net.Mail.SmtpClient 的同步方法的响应时间大致相同？

> ID：13155033
> 
> 赞同：1
> 
> 时间：2012-10-31T09:40:55.807
> 
> 标签：c#, asp.net, asp.net-mvc, email, asynchronous

当调用特定的 MVC 控制器方法时，我们会发送一封电子邮件。代码如下。在浏览器中对 AJAX 响应时间进行基准测试时，我们看到`client.SendAsync(mail, null)`和`client.Send(mail)`实现都花费了大约相同的时间，即 1.8 秒，而根本不发送邮件。

```
public ActionResult jsonPosted(int? id, SomeDataClass data)
{   
    ...

    // NOTE: remode 'using' statement for Async calls
    // else no email ever sees light
    using (SmtpClient client = new SmtpClient())
    {       
        client.UseDefaultCredentials = false;
        client.Credentials = new NetworkCredential("name@server.com", "password");
        client.Port = 587;
        client.Host = "smtp.server.com";
        client.EnableSsl = true;

        MailMessage mail = new MailMessage();
        mail.From = new MailAddress("admin@server.com");
        mail.To.Add("sales@server.com");
        mail.Subject = "Coming soon: user " + newUser.Email + " registered on list";
        mail.Body = "Email address is : " + newUser.Email + "\n";
        mail.Body += "Date of signup is : " + newUser.SignupTime.ToString();

        try
        {
            // Both take about 1.9 seconds ?!?!
            //client.SendAsync(mail, null);
            client.Send(mail);
        }
        catch (SmtpException e)
        {
            // bad smtp, no mail for you
        }
    }
    ...
    return Json(dataIndependentOfEmail);
} 
```

问题：

1.  为什么这两种方法需要相同的时间？Async 应该立即返回，而 Sync 应该阻塞整个处理时间，对吗？据我了解，异步在工作期间消耗另一个线程并且该线程阻塞。但是，至少第一个线程上的用户应该会看到性能提升。
2.  如何正确使用以异步模式`using`处理类？`SmtpClient``MailMessage`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:50:16.150

有关异步 smtpclient 的 msdn 示例，请参见[此处](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)。
在这个例子中，他们没有使用 dispose （这是一个小猜测），使用将等待异步操作完成。
出于测试目的，请尝试删除 using 语句，我希望 sendAsync 比发送更快。
当然，您没有正确处理 smtpclient 对象，处理处理的一种方法是创建一个新线程，以旧的 skool 方式处理电子邮件。您不会拥有 SendAssync 的清洁度，但至少您确定用户会获得即时反馈 + smtpclient 已正确处理。

编辑：更好的解决方案是使用事件 sendcompleted 并在那里处理 smtpclient。
看[这里](https://stackoverflow.com/questions/7276375/what-are-best-practices-for-using-smtpclient-sendasync-and-dispose-under-net-4)的例子

# javascript - 如何使用px在整个页面上设置div

> ID：13155037
> 
> 赞同：0
> 
> 时间：2012-10-31T09:41:08.187
> 
> 标签：javascript, jquery

我想将我的 div 元素扩展到整个页面，但我不想为页面设置滚动条。我累了`$(window).width`，`$(document).width`但是当我将它设置为我的 css 时，滚动条出现了。我不能添加 CSS ，因为`width: 100%`我的应用程序中的其他东西基于像素宽度而不是百分比，所以不能像这样完成。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:43:02.680

创建一个包含所有内容的#mydiv，然后：

```
#mydiv { position: absolute; bottom: 0; left: 0; top: 0; right: 0; overflow: hidden} 
```

应该做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:00:37.593

好的，我把它弄出来了。我在 CSS 中设置`width: 100; height:100%`，然后通过 JS 获得以像素为单位的尺寸`$('#element').width()`

# javascript - 子视图的主干事件未正确触发

> ID：13155046
> 
> 赞同：3
> 
> 时间：2012-10-31T09:41:36.350
> 
> 标签：javascript, backbone.js, backbone-views, backbone-events

我在 Backbone 中有一个 Gallery，由 GalleryItem 子视图组成。

我现在遇到的问题是子视图上的事件没有正确触发。

这是我的代码`GalleryItemView`：

```
// Gallery View: Displays a Single Image Element
var GalleryItemView = Backbone.View.extend({
  el: '#isotope',

  events: {
    "click .hoverbox": "onHoverBoxClick"
  },

  initialize: function () {
    this.template = Hogan.compile($("#gallery-item-template").html());
  },

  render: function () {
    this.$el.append(this.template.render(this.model.toJSON())); 
    return this;
  },
  onHoverBoxClick: function () {
    console.log("clicked: ", this.model.id);
  }

}); 
```

我希望每个元素`onHoverBoxClick`在单击`.hoverbox`div 时都会触发事件。但它什么也没做。如果我将此添加到视图中：

```
el: "#mydiv" 
```

然后它触发事件，但对于每个 GalleryItemView。（所以对于 8 个子视图，我得到 8 个 console.logs，我也只点击了一个）

我的子视图模板如下所示：

```
<script type="text/x-handlebars-template" id="gallery-item-template">
  <div class="item {{tags}}" style="width: auto;">
    <img class="eveimage" src="{{image_medium_url}}">
    <div class="hoverbox down"><span>{{tags}}</span>    </div>
</div>
</script> 
```

画廊的收藏视图看起来像这样（这是我实例化画廊项目的地方）：

```
// Gallery View: Displays the main image / project gallery
window.views.GalleryView = Backbone.View.extend({
  el: '#isotope_container',
  className: 'no-transition',
  template: _.template($("#gallery-template").html()),

  initialize: function() {
    this.collection = new gallery();
    this.$el.append(this.template);
    this.collection.on('reset', this.render, this);
  },

  render: function(){  
    console.log("ich render nei");
    this.collection.forEach(this.addOne, this);  

  },  
  addOne: function(model){  
    var itemView = new GalleryItemView({model: model});
    var el = itemView.render().el;

    this.$el.append(el);  
  }
}); 
```

任何想法为什么会这样？谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T19:31:02.397

当您在 Backbone 视图上指定`events`哈希时，Backbone 使用 jQuery .delegate 方法来绑定回调，并将视图`el`作为根元素。但是，在您的 GalleryItemView.render 方法中，您实际上并没有渲染到视图的 el；您正在选择一个完全不同的元素。因此，事件实际上是在您的事件哈希范围之外触发​​的。

相反，你需要做这样的事情

```
window.views.GalleryItemView = Backbone.View.extend({
   ...
  render:function () {
    this.$el.append(this.template.render(this.model.toJSON())); 
    return this;
  }, 
  ...
}); 
```

查看您当前的代码，您在 GalleryView 上定义的渲染方法只是附加了一堆空`<div>`标签。您正在选择页面上的现有元素并在 GalleryViewItem.render 方法中附加您的插值模板这一事实实际上是导致您的项目出现的原因。

[[第 2 部分]] 在编辑后的视图中，您提供了一个 ID 选择器作为`el`. `GalleryItemView`正因为如此，加上您使用 渲染每个项目视图的方式`.append()`，您仍然将每个`GalleryItemView`实例附加到同一个元素。由于它们都共享相同的根元素，因此在委托事件时，一个事件将导致`GalleryItemView`调用每个事件的处理程序。

您应该拥有如下内容：

```
GalleryItemView = Backbone.View.extend({
  // remove the ID selector for the el property -- don't need it
  ...
  render:function() {
    this.$el.html(this.template.render(this.model.toJSON()));
    return this;
  }
  ...
});

window.views.GalleryView = Backbone.View.extend({
  ...
  addOne: function(model){  
    var itemView = new GalleryItemView({model: model});
    var el = itemView.render().el;

    // assuming you actually intended to attach all 
    // GalleryItemViews to the #isotope element
    this.$('#isotope').append(el);  
  }
  ...
}); 
```

# maven - 不同目录中的 XSD 和 WSDL

> ID：13155047
> 
> 赞同：8
> 
> 时间：2012-10-31T09:41:38.277
> 
> 标签：maven, wsdl, wsimport, java-ws

在我的工作中使用 jaxws-maven-plugin 进行代码生成。我有两个项目分别是“普通”和“客户”。结构大致如下：

```
app/
  common/
    resource/
      some.xsd
  client/
    resource/
      some.wsdl 
```

如何使用项目“common”中的 xsd 从项目“client”中的 wsdl 生成类？

pom.xml：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jaxws-maven-plugin</artifactId>
            <executions>
                <execution>
                    <goals>
                        <goal>wsimport</goal>
                    </goals>
                    <configuration>
                        <verbose>true</verbose>
                        <bindingFiles>
                            <bindingFile>${project.parent.basedir}/common/resource/some.xsd</bindingFile>
                        </bindingFiles>
                        <wsdlFiles>
                            <wsdlFile>/resource/some.wsdl</wsdlFile>
                        </wsdlFiles>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T10:23:19.210

首先，您应该遵守 Maven 约定，使用`src/main/resources/`目录获取资源。

完成之后，您可以使用[`maven-dependency-plugin:unpack-dependencies`](http://maven.apache.org/plugins/maven-dependency-plugin/examples/unpacking-project-dependencies.html)解压`common`jar 文件来访问`some.xsd`：

```
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.stackoverflow.Q13155047</groupId>
        <artifactId>app</artifactId>
        <version>1.0-SNAPSHOT</version>
    </parent>

    <artifactId>client</artifactId>

    <name>${project.artifactId}-${project.version}</name>

    <properties>
        <schema.location>${project.build.directory}/schemas</schema.location>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.stackoverflow.Q13155047</groupId>
            <artifactId>common</artifactId>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>2.5.1</version>
                <executions>
                    <execution>
                        <id>unpack-dependencies</id>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>unpack-dependencies</goal>
                        </goals>
                        <configuration>
                            <includes>**/*.xsd</includes>
                            <outputDirectory>${schema.location}</outputDirectory>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>jaxws-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>wsimport</goal>
                        </goals>
                        <configuration>
                            <verbose>true</verbose>
                            <bindingDirectory>${schema.location}</bindingDirectory>
                            <bindingFiles>
                                <bindingFile>some.xsd</bindingFile>
                            </bindingFiles>
                            <wsdlDirectory>src/main/resources</wsdlDirectory>
                            <wsdlFiles>
                                <wsdlFile>some.wsdl</wsdlFile>
                            </wsdlFiles>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

The[`jaxws-maven-plugin`](http://jax-ws-commons.java.net/jaxws-maven-plugin/wsimport-mojo.html)绑定到`generate-sources`阶段，因此在同一阶段`maven-dependency-plugin`之前添加`jaxws-maven-plugin`and 确保它在应用`wsimport`目标之前解包所有内容。

确保这是正确的`<bindingDirectory/>`。`<wsdlDirectory/>`

* * *

`*.xsd`如果您在另一个项目中有文件，这就是您应该这样做的方式。**永远不要**使用相对路径访问其他项目。每个项目应该只使用依赖机制访问其他资源。

# mysql - MySQL选择位域，选择前面0的值

> ID：13155049
> 
> 赞同：0
> 
> 时间：2012-10-31T09:41:50.853
> 
> 标签：mysql

我的数据库中的表中有一行包含位，它是位类型，长度为 4 个字符，位（4）。在此字段中，我的所有值都存储如下：

```
0001
0010
0100
1111 
```

我试图选择并获得确切的表示，0 在 1 前面，但没有运气。我试图从位字段中选择值，如下所示：

```
SELECT BIN(field+0) FROM `table` WHERE value=0001;

the result is: 1, how can i obtain 0001; 
```

我需要这个值，因为我想在 PHP 中进行按位运算。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:48:10.337

在 mysql 中使用**LPAD()**

```
SELECT LPAD(field,4,'0') 
FROM `table` WHERE value=0001; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:00:58.820

试试这个：

```
select right(concat(field,'0'),4) from yourtable where bcol='0001' 
```

# c# - 使用 C# 发送消息

> ID：13155050
> 
> 赞同：-3
> 
> 时间：2012-10-31T09:42:02.117
> 
> 标签：c#, asp.net, sms-gateway

我想使用 C# 代码发送短信。
为此，我正在使用“clickatell 短信网关”。
有人能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T09:44:15.133

从他们的网站，[C# Scripts](http://www.clickatell.com/apis-scripts/scripts/c-scripts/)

```
using System.Net;
using System.IO;
WebClient client = new WebClient ();
// Add a user agent header in case the requested URI contains a 
query.
client.Headers.Add ("user-agent", "Mozilla/4.0
 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR
1.0.3705;)");
client.QueryString.Add("user", "xxxx");
client.QueryString.Add("password", "xxxx");
client.QueryString.Add("api_id", "xxxx");
client.QueryString.Add("to", "xxxx");
client.QueryString.Add("text", "This is an example message");
string baseurl ="http://api.clickatell.com/http/sendmsg";
Stream data = client.OpenRead(baseurl);
StreamReader reader = new StreamReader (data);
string s = reader.ReadToEnd ();
data.Close ();
reader.Close ();
return (s); 
```

# c# - 并行 http 请求

> ID：13155052
> 
> 赞同：1
> 
> 时间：2012-10-31T09:42:03.340
> 
> 标签：c#, parallel-processing, httpwebrequest

我有一个应用程序使用 backgroundWorker 向 last.fm 网站发出 API 请求。最初我不知道我需要提出多少请求。响应包含总页数，所以我只会在第一次请求后得到它。这是下面的代码。

```
 private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {            
        int page = 1;
        int totalpages = 1;

        while (page <= totalpages)
        {
            if (backgroundWorker.CancellationPending)
            {
                e.Cancel = true;
                return;
            }

            //Here is the request part
            string Response = RecentTracksRequest(username, from, page);

            if (Response.Contains("lfm status=\"ok"))
            {
                totalpages = Convert.ToInt32(Regex.Match(Response, @"totalPages=.(\d+)").Groups[1].Value);

                MatchCollection match = Regex.Matches(Response, "<track>((.|\n)*?)</track>");
                foreach (Match m in match)
                    ParseTrack(m.Groups[1].Value);
            }
            else
            {
                MessageBox.Show("Error sending the request.", "Error",
                    MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            if (page >= totalpages)
                break;

            if (totalpages == 0)
                break;

            if (page < totalpages)
                page++;
        } 
```

问题是 last.fm API 真的很慢，可能需要 5 秒才能得到响应。对于大量页面，加载将需要很长时间。

我想发出并行请求，一次说 3 个并行请求。可能吗？如果是，我该怎么做？

非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T09:51:57.033

您可以利用[`HttpClient`](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)，假设您有 url 列表：

```
var client = new HttpClient();
var tasks = urls.Select(url => client.GetAsync(url).ContinueWith(t =>
            {
                var response = t.Result;
                response.EnsureSuccessStatusCode();

                //Do something more
            })); 
```

如果您使用异步方法，您可以等待所有任务完成，如下所示：

```
var results = await Task.WhenAll(tasks); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T09:48:40.460

您也可以使用[BeginGetResponse执行异步 Web 请求](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.begingetresponse.aspx)

```
 HttpWebRequest webRequest;
      webRequest.BeginGetResponse(new AsyncCallback(callbackfunc), null);

      void callbackfunc(IAsyncResult response)
      {
         webRequest.EndGetResponse(response);
      } 
```

# java - java中用simplexml反序列化xml

> ID：13155056
> 
> 赞同：4
> 
> 时间：2012-10-31T09:42:08.677
> 
> 标签：java, android, xml-deserialization, simple-framework

我正在尝试使用 SimpleXML 反序列化 xml 字符串，我查看了他们的示例，但我不确定我是否掌握了这个概念。

示例 XML（验证）：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<soap:Body>
<Response xmlns="http://localhost/webservices/">
<Result>
<Item><ID>0</ID><language /><price>168</price></Item>
<Item><ID>1</ID><language /><price>178</price></Item>
<Item><ID>2</ID><language /><price>195</price></Item>
<Item><ID>3</ID><language /><price>169</price></Item>
<Item><ID>4</ID><language /><price>178</price></Item>
<Item><ID>5</ID><language /><price>178</price></Item>
<Item><ID>6</ID><language /><price>149</price></Item>
<Item><ID>7</ID><language /><price>178</price></Item>
<Item><ID>8</ID><language /><price>168</price></Item>
<Item><ID>9</ID><language /><price>179</price></Item>
<Item><ID>10</ID><language /><price>147</price></Item>
<Item><ID>11</ID><language /><price>165</price></Item>
<Item><ID>12</ID><language /><price>192</price></Item>
<Item><ID>13</ID><language /><price>218</price></Item>
<Item><ID>14</ID><language /><price>144</price></Item>
<Item><ID>15</ID><language /><price>141</price></Item>
</Result>
</Response>
</soap:Body></soap:Envelope> 
```

和java代码：

```
 @Root(name="Result",strict=false)
public class ItemList {

    @ElementList(entry="Item")
    private List<Item> _list;

    public List<Book> GetItemList() 
    {
        return _list;
    }

    public void SetItemList(List<Item> value) 
    {
        this._list = value; 
    }
}

@Root(strict=false)
public class Item {
    @Element(name="ID")
    private String _ID;
    @Element(name="price")
    private String _price;

    public String GetPrice()
    {
        return _price;
    }

    public void SetPrice(String value)
    {
        this._price = value;
    }

    public String GetID()
    {
        return _ID;
    }

    public void SetID(String value) 
    {
        this._ID = value;
    }

    public Item(String ID,
                String price) 
    {
        this._ID = ID;
        this._price = price;
    }
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T10:57:58.013

我有一个建议，但它还没有准备好运行（见下文）。但是，也许还有另一个更好的解决方案......

## 类项目

保存您的所有信息。

```
@Root(name="Item")
public class Item
{
    @Element(name="ID", required=true)
    private int id;
    @Element(name="language", required=true)
    private String language;
    @Element(name="price", required=true)
    private int price;

    // ...
} 
```

## 班级成绩

构建周围的一切`Item`。顺便提一句。你不必在这里使用内部类。

```
@Namespace(prefix="soap", reference="http://schemas.xmlsoap.org/soap/envelope/")
@Root(name="Envelope")
public class Result
{
    @Namespace(prefix="soap")
    @Element(name="Body")
    private SoapBody body;

    // ...

    // -----------------------------------------------------------------
    // -- Some inner classes, constructing the elements as in you xml --
    // -----------------------------------------------------------------

    @Namespace(prefix="soap")
    @Root(name="Body")
    static class SoapBody
    {
        @Element(name="Response")
        private Response response;

        // ...
    }

    @Root(name="Response")
    static class Response
    {
        @ElementList(name="Result", required=true)
        private List<Item> result;

        // ...
    }
} 
```

## （示例）如何使用此代码

**写作**

```
File f = ...

Serializer ser = new Persister();
Result r = new Result();
ser.write(r, f); 
```

**阅读**

```
File f = ...

Serializer ser = new Persister();
Result r = ser.read(Result.class, f); 
```

* * *

现在......有一个问题阻止了这个示例运行：`<language />` 这个空元素让 SimpleXML 抛出一个`ValueRequiredException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:52:22.270

```
 @Element( required=false)
    private String language; 
```

将此添加到您的 Item 类中并生成 getter 和 setter。我认为它应该可以工作

# mysql - 加载本地 infile 不允许 perl mysql

> ID：13155057
> 
> 赞同：5
> 
> 时间：2012-10-31T09:42:12.023
> 
> 标签：mysql, perl

谁知道如何在 Ubuntu 上的最新 MySQL 中打开加载本地 infile 设置？我编辑了 `/etc/mysql/my.cnf`文件并添加了

```
local-infile=1 
```

在 Perl 代码中

```
dbConnectString=dbi:mysql:orthomcl:mysqllocalinfile=1 
```

但仍然得到

```
DBD::mysql::st execute failed: The used command is not allowed with this MySQL version... 
```

它由名为 OrthoMCL 的应用程序使用

我尝试配置`my.cnf`文件：

```
sudo vim /etc/mysql/my.cnf

[mysqld]
user            = mysql
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
port            = 3306
basedir         = /usr
datadir         = /var/lib/mysql
tmpdir          = /tmp
lc-messages-dir = /usr/share/mysql
skip-external-locking
local-infile = 1
[mysql]
#no-auto-rehash # faster start of mysql but no tab completition
local-infile = 1 
```

然后重启mysql服务器：

```
sudo service mysql restart
mysql stop/waiting
mysql start/running, process 9563 
```

但后来我仍然得到：

```
DBD::mysql::st execute failed: The used command is not allowed with this MySQL version at ../Apps/orthomclSoftware-v2.0.3/bin/orthomclLoadBlast line 39, <F> line 12.
The used command is not allowed with this MySQL version at ../Apps/orthomclSoftware-v2.0.3/bin/orthomclLoadBlast line 39, <F> line 12.` 
```

第 39 行是：

```
$stmt->execute() or die DBI::errstr; 
```

它执行上面的行：

```
my $sql = "
LOAD DATA
LOCAL INFILE \"$blastFile\"
REPLACE INTO TABLE $sst
FIELDS TERMINATED BY '\\t'
";
my $stmt = $dbh->prepare($sql) or die DBI::errstr; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T22:21:39.543

```
dbConnectString=dbi:mysql:orthomcl:mysql_local_infile=1:localhost:3306 
```

我也在mysql.cnf下加了

```
[client]
      loose-local-infile=1 
```

为我工作

# java - 这种类型的对象是什么意思？

> ID：13155058
> 
> 赞同：0
> 
> 时间：2012-10-31T09:42:11.677
> 
> 标签：java

```
HttpEntity<?> requestEntity = new HttpEntity<Object>(json, headers); 
```

我有几个问题？

1.  这里是什么`?`意思。为什么他们把`<?>`而不是`<Object>`
2.  为什么 HTTPEntity Constructor 以 < `Object`> 作为其类型，而 Class Reference 以 < `?`> 作为其类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:45:30.920

`?`-- 通配符语法

```
HttpEntity<?> requestEntity = new HttpEntity<Object>(json, headers);

`HttpEntity<?>` whose element type matches anything.. 
```

请记住，如果您尝试将 Object 添加到 requestEntity 中，您会收到编译器错误。

```
 requestEntity.add(new Object());//compiler error on this line as it expects `?` not an object 
```

[在此处](http://docs.oracle.com/javase/tutorial/java/generics/)阅读有关泛型的信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:45:39.903

`?`表示**通配符**它是一个通用符号。这意味着未知的HttpEntity。

# c - 我使用限制限定符时出现错误

> ID：13155059
> 
> 赞同：6
> 
> 时间：2012-10-31T09:42:14.917
> 
> 标签：c, pointers, restrict-qualifier

当我编译以下程序时出现错误：

```
gcc tester.c -o tester

tester.c: In function ‘main’:
tester.c:7:17: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘ptr_X’
tester.c:7:17: error: ‘ptr_X’ undeclared (first use in this function)
tester.c:7:17: note: each undeclared identifier is reported only once for each function it appears in
tester.c:10:17: error: expected ‘=’, ‘,’, ‘;’, ‘asm’ or ‘__attribute__’ before ‘ptr_Y’
tester.c:10:17: error: ‘ptr_Y’ undeclared (first use in this function) 
```

* * *

```
#include <stdio.h>

int main() {
  int x = 10;
  int y = 20;

  int *restrict ptr_X;
  ptr_X = &x;

  int *restrict ptr_Y;
  ptr_Y = &y;

  printf("%d\n",*ptr_X);

  printf("%d\n",*ptr_Y);
} 
```

为什么我会收到这些错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:47:34.303

> > 并非所有编译器都符合 C99 标准。比如微软的编译器，根本不支持C99标准。如果您在 x86 平台上使用 MSVC，您将无法访问此关键优化选项。
> > 
> > 使用 GCC 时，请记住通过将 -std=c99 添加到编译标志来启用 C99 标准。在不能用 C99 编译的代码中，使用`__restrict`或`__restrict__`启用关键字作为 GCC 扩展。

从[这里](http://cellperformance.beyond3d.com/articles/2006/05/demystifying-the-restrict-keyword.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:46:52.823

Restrict 是 C99 的一部分，因此您必须通过`-std=c99`为 gcc 指定标志来将其编译为 C99 程序。

```
gcc -std=c99 tester.c -o tester 
```

# asp.net-mvc - viewdata 中的 ASP.NET MVC 通用列表

> ID：13155062
> 
> 赞同：5
> 
> 时间：2012-10-31T09:42:40.487
> 
> 标签：asp.net-mvc, list, generics

我有绑定到视图的通用列表属性。问题是当我在视图中输入一些值后发布数据时，页面会刷新并且它不会保留视图中的值。而且，当我尝试`Html.ValidationMessage`为该特定字段添加时，我得到一个错误

```
 "The value 'System.Collections.Generic.List`1[<name of the class>]' is invalid" 
```

我的代码看起来像这样， **模型**

```
 public List<Chart> Charts 
  { 
     get 
       { 
         return  _repository.GetCharts(Convert.ToInt32(this.Template_Id)); 
      } 
      set{} 
   } 
```

**实际班级**

```
 public class Chart
   {
        public string ChartDisplayText { get; set; }
   } 
```

Chart 类中的属性是我在 View 中输入值的属性 非常感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:10:07.963

要在发布后保留该值，您可以返回数据，例如：`return View(chartList);`

您为 Validation 获得的错误是因为在 MVC 验证中，如果其`Object`属性不应用级联。您需要应用模板或使用脚手架 HTML Helpers：

```
@foreach(Charts item in Model)
{
@Html.EditorFor(x => item.ChartDisplayText)
} 
```

您可以在 asp.net mvc 中检查正确的 Scaffolding / 模板 HTML Helpers

# c# - 使用 xmlreader 读取 xmldocument 中的 xml

> ID：13155075
> 
> 赞同：0
> 
> 时间：2012-10-31T09:43:27.527
> 
> 标签：c#, xml, microsoft-metro, xmldocument, xmlreader

我正在开发 win8 Metro 应用程序，我需要加载 xml 文件以呈现在应用程序上。但是在加载位于文件夹中的 xml 文件后我遇到了一个问题。

我知道我可以使用 xmlreader 读取应用程序本身中的 xml 文件，但我不知道如何在“我的文档”或应用程序之外的任何其他文件夹中加载文件。所以我用谷歌搜索它，我发现我可以使用 await XmlDocument.LoadFromFileAsync(file) 来加载，但我不知道如何让 xmlreader 读取我在 xmldocument 中加载的文件。

或者有一种方法 xmlreader 可以从应用程序中加载 xml 文件？

我试图为 xmlreader 放置文件路径，但它总是响应“找不到文件”，并且该路径从我的开发目录开始，而不是从我设置的路径开始。

谁能帮我 ？

下面是我如何处理xmlreader，所以我希望xmldocument中的文件可以通过这种方式处理：

```
 XmlReader reader = XmlReader.Create(@"Data/question/" + file_name);
            while (reader.Read())
            {
                //                subject.Text += "start-node:\n";
                switch (reader.NodeType)
                {
                    case XmlNodeType.Element:
                        Element = reader.Name;

                        //                        subject.Text += String.Format("Element: {0}\n", reader.Name);
                        if (reader.HasAttributes)
                        {
                            //                            subject.Text += String.Format("Attributes of " + reader.Name + "\n");
                            while (reader.MoveToNextAttribute())
                            {
                                switch (Element)
                                {
                                    case "SUBJECT":
                                        switch (reader.Name)
                                        {
                                            case "TYPE":
                                                type = int.Parse(reader.Value);
                                                if (start_type == 999)
                                                {
                                                    start_type = type;
                                                    Save_para("Start_Type", start_type);
                                                }
                                                last_sn += sn;
                                                sn = 0;
                                                break;
                                            case "QUANTITY":
                                                quantity = int.Parse(reader.Value);
                                                question[type] = new string[quantity + 1][];

                                            .... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T07:28:13.687

我从[这里](https://stackoverflow.com/questions/9025100/from-xmldocument-to-xmlreader-net)找到了一个解决方案，我使用 StringReader 读取我的 xmldocument 并由 xmlreader 加载。

```
 StorageFolder folder = await KnownFolders.DocumentsLibrary.CreateFolderAsync("documents", CreationCollisionOption.OpenIfExists);
            StorageFile file = await folder.GetFileAsync(file_name);
            XmlDocument reade = await XmlDocument.LoadFromFileAsync(file);
            //XmlReader reader = XmlReader.Create(@"Data/question/" + file_name);
            XmlReader reader = XmlReader.Create(new StringReader(reade.GetXml())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:49:13.943

从你的问题的描述我认为你需要做这样的事情才能从设备中选择一个文件

```
 //function to read an XML file form the local device
 private async void SelectXMLButton_Click(object sender, RoutedEventArgs e)
    {
        var filePicker = new Windows.Storage.Pickers.FileOpenPicker();
        //addign a a filter so only XML files will show up.
        filePicker.FileTypeFilter.Add(".xml");

        var selectedXMlFile = await filePicker.PickSingleFileAsync();
        // now your reader should open the file
        XmlReader reader = XmlReader.Create(selectedXMlFile.Path);

    } 
```

请注意我没有测试过这个功能，但它应该可以工作。

更新：//要说...从我的文档中访问文件，您可以这样做：

```
XmlReader reader = XmlReader.Create(@"%UserProfile%\My Documents\file.xml"); 
```

您还必须允许从 Appmanifest 文件中的 Capabilities 选项卡访问 Documents 文件夹。

我想[这会对你](http://code.msdn.microsoft.com/windowsapps/File-access-sample-d723e597/view/Discussions#content)有更多帮助。

# zend-framework - 如何从 Zend 控制器测试调度方法捕获输出？

> ID：13155076
> 
> 赞同：1
> 
> 时间：2012-10-31T09:43:32.840
> 
> 标签：zend-framework, phpunit

在执行控制器测试方法并运行调度方法时，我发现它与输出相呼应，

如何捕获该输出而不是将其打印到命令行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T10:15:43.317

您可以在 PHPUnit 中使用内置支持：http: [//phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.output](http://phpunit.de/manual/current/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.output)

* * *

从提到输出缓冲的旧答案编辑。

# jquery - 动态更改 Jquery TimePicker 主题

> ID：13155077
> 
> 赞同：0
> 
> 时间：2012-10-31T09:43:34.323
> 
> 标签：jquery, asp.net, jquery-ui, jquery-ui-timepicker

我目前在我的页面中使用 jQuery Timepicker。

我想在另一个页面上使用相同的 TimePicker，但我想将主题更改为“smoothness”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:51:37.880

如果它是不同的页面，那么您只需将其他页面上的样式表更改为您的新主题 URL：

```
<link href="NEW THEME URL" type="text/css" rel="stylesheet" /> 
```

# asp.net - Entity Framework 4.1 - 选择多对多关联

> ID：13155078
> 
> 赞同：3
> 
> 时间：2012-10-31T09:43:39.163
> 
> 标签：asp.net, asp.net-mvc-3, entity-framework-4.1

我使用实体框架 4.1 和 MVC 3。我的问题是关于实体框架中的联接表。我创建了三个表

1.  用户 - 用户 ID、用户名
2.  角色 - 角色 ID、角色名称
3.  **UserInRoles - 用户 ID、角色 ID**

我将这些表拉到我的 edmx 文件中，只出现两个表，即用户和角色，两者之间存在多对多关联。

如果我想从 UserInRoles 表中获取用户的角色，方法是什么？

我做了类似的事情

```
var result = (from ar in roles
                          from au in users
                          where au.UserName == username
                          select new {}); 
```

这是行不通的。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:53:59.173

如您所料，实体框架确实将类似的简单查找表组合到父表中，以帮助您。您将无法访问代码中的查找表，但它会完成繁重的工作并允许您浏览此类表。

```
var result = (from ar in roles
    where ar.Users.UserName == username
    select ar); 
```

或者，如果您更喜欢 lambdas（个人偏好）：

`var result = context.roles.Where(x => x.Users.UserName == username);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:10:40.733

当只有一个具有一个共享主键的关系表是其他表的外键时，实体框架会在模型中自动生成多对多关系。

您可以向此表添加另一列以将其添加到您的模型中，也可以为该关系生成另一个唯一键。

在此处阅读有关此内容的更多信息：http: [//learnentityframework.com/LearnEntityFramework/tutorials/many-to-many-relationships-in-the-entity-data-model/](http://learnentityframework.com/LearnEntityFramework/tutorials/many-to-many-relationships-in-the-entity-data-model/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T12:47:17.093

我想它们应该是链接的：

```
var result = 
    from au in users
    where au.UserName == username
    select au.Roles; 
```

不确定默认情况下它是否会给您一个空集合。角色集合可能必须手动获取。（可能是result.Fetch()，不过我不太熟悉。）

（或者您是否希望访问存储在数据库中的实际 UserInRole 项目？）

# c++ - C++ 空间索引库：从磁盘加载/存储主内存 RTree

> ID：13155084
> 
> 赞同：0
> 
> 时间：2012-10-31T09:44:05.663
> 
> 标签：c++, r-tree, libspatialindex

我通过以下方式在空间索引库的帮助下创建了一个主内存 R* 索引（DBStream 实现了 bulkLoading 的接口）

```
// creating a main memory RTree
memStorage = StorageManager::createNewMemoryStorageManager();

size_t capacity = 1024;
bool bWriteThrough = false;
fileInMem = StorageManager
   ::createNewRandomEvictionsBuffer(*memStorage, capacity, bWriteThrough);

DBStream dstream(streets);

tree = RTree::createAndBulkLoadNewRTree(SpatialIndex::RTree::BLM_STR, dstream,
   *fileInMem,
   fillFactor, indexCapacity,
   leafCapacity, dimension, rv, indexIdentifier); 
```

我的数据是只读的，也就是说，我只想构建树一次，保存它，并在每次使用我的程序时从持久存储重新加载。显然，我可以自己保存和加载 memStorage，但是如何从中重新创建 RTree？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:35:42.443

由于无论如何您都在批量加载树，实际上这里几乎没有什么收获。STR 批量加载所做的只是对数据进行排序。这是`O(n log n)`理论上的，但是如果您对数据进行了适当的排序，那么它实际上将适用于`O(n)`大多数排序实现。

因此，最有可能的是，将树序列化为一个文件并返回并不比每次再次批量加载它便宜多少。不过，它确实带走了一些灵活性。

R-Trees 通常用于动态数据恕我直言。当然，它们确实适用于静态数据。但它们的关键优势（与其他结构相反）是树支持插入平衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:02:34.680

经过广泛的研究，我必须得出结论，可以保存 MainMemoryStorage 对象，但无法加载它。可以通过派生类保存对象，该类跟踪所有使用的页面 ID（然后将它们保存到文件中）。加载这些页面是非常有问题的，因为需要直接访问

```
std::vector<Entry*> m_buffer;
std::stack<id_type> m_emptyPages; 
```

来自 MemoryStorageManager.h。这些家伙是私有的，并且 MemoryStorageManager.h 不可用，因为这是一个仅可用于空间库的私有包含。

多么令人沮丧的答案。

# sql-server - 我不在存储过程中查询，因为头名字段有空间

> ID：13155091
> 
> 赞同：0
> 
> 时间：2012-10-31T09:44:28.160
> 
> 标签：sql-server, namespaces, space

在 SQL Server 2008 中，我有一个带有 column 的表`First Name`。但是这个名字有一个空格。我尝试查询此列，但出现错误：

> 列名“First”无效。

如何查询此列？

代码：

```
SELECT em.First Name
FROM Emp em 
```

谢谢你的时间。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:12:22.160

我发现解决了一个问题。

```
SELECT em.[First Name]
FROM Emp em 
```

这是工作！！:D

# asp.net - 如何在 ASP.NET 中像对话框一样打开 aspx 页面

> ID：13155095
> 
> 赞同：1
> 
> 时间：2012-10-31T09:44:47.007
> 
> 标签：asp.net, jquery, modal-dialog

我需要像模态对话框一样打开一个页面。我在网上找到了一个例子，但它不起作用。

在主页中，我有以下代码：

```
 <asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
     <asp:Button Text ="Add New Course"  runat="server" ID="btnAddCourse" OnClientClick="showPanel('dialog');return false;"/>
      <script type="text/javascript">
            function showPanel(panelID) {
                $panel = $('#' + panelID);
                $.ajax({
                    url: "/AddNew.aspx",
                    type: "GET",
                    dataType: "html",
                    async: false,
                    data: { "param": "abcd"
                    },
                    success: function (obj) {
                        // obj will contain the complete contents of the page requested
                        // use jquery to extract just the html inside the body tag
                        $content = $(obj).find('body').html();
                        // then update the dialog contents with this and show it
                        $panel.html($content);
                        $panel.dialog();
                    }
                });
            }
    </script>
<div id="dialog">
</div>
</asp:Content> 
```

当我单击按钮时，我需要打开下面的页面。我收到一个错误，告诉我无法识别元素 $。我不知道元素面板到底是谁。我必须添加一个面板控件，但是在哪里？

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeBehind="AddNew.aspx.cs" Inherits="WebApplicationDialog.AddNew" %>

      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

      <html xmlns="http://www.w3.org/1999/xhtml">
  <head runat="server">
    <title>Add New Course </title>
 </head>
<body>
<form  >
<div id="div1">
<table>
<tr><td colspan="3"> <asp:Label ID="lblCourse" runat="server" Text="Add New Course"></asp:Label></td></tr>
<tr><td colspan="3"> </td></tr>
<tr>
   <td style="width:40%"> <asp:Label ID="lblName" runat="server" Text="Course Name" ></asp:Label></td>
   <td style="width:20%"> </td>
   <td style="width:40%"> 
       <input id="txtName" type="text" />
    </td>
</tr>
<tr>
   <td style="width:40%"> <asp:Label ID="lblDescription" runat="server" Text="Description" ></asp:Label></td>
   <td style="width:20%"> </td>
   <td style="width:40%">
      <input id="txtDescription" type="text" />

   </td>
</tr>
<tr><td colspan="3" style="float:right">
<input value ="Save"   id="btnSave" type="submit"  /> </td></tr>
</table>
</div>

</form>
</body>
</html> 
```

有人可以帮我处理这段代码，让它工作吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:47:50.717

您需要添加 jquery lib 引用。在页面顶部：

```
 <script src="http://code.jquery.com/jquery-1.8.2.min.js"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:47:59.000

考虑在您正在使用的 jQuery 代码上方的页面上添加**jQuery 脚本引用。**

另外，添加参考[jQuery UI](http://jqueryui.com/download/)

**[下载 jQuery](http://jquery.com/download/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:50:46.650

看起来您正在尝试使用 JQuery 将页面内容加载到面板中，但如果我正确阅读了您的代码，您可能没有包含 JQuery 库，您需要在`<head>`您的 html 代码中包含这行代码。您还在使用 JQueryUI 对话框，并且需要引用 JQueryUI 库

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script> 
```

例如

```
<head>
    <title>Page Title</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
<head> 
```

**编辑：**我还注意到您正在使用 JQuery UI 中的对话框，请确保您也参考 JQuery UI 工具包

**编辑：**已将您的代码剥离到 jsFiddle：http: [//jsfiddle.net/EhPk7/1/](http://jsfiddle.net/EhPk7/1/) 这似乎对我有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T09:53:29.863

包括 jQuery。更改这一行 -> $panel = $('#' + panelID); 到 -> $panel = $('#div1'); 看看它是否有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T10:06:00.163

jQueryUI 对话框上有一个名为 modal 的布尔属性/设置，这将创建一个模态类型的对话框。

我自己用这个：

```
d.dialog({  
            autoOpen: true,
            closeOnEscape: false,
            closeText: '',
            modal: true,
            draggable: false,
            resizable: false,
            width: (window.document.width * 0.75),
            dialogClass: 'popup loading',
            title: 'title'),

        }); 
```

当您将此类功能包装在

```
$(document).ready(function() { 

}) 
```

它应该在 DOM 准备好时弹出..

# h2 - H2内存数据库查询很慢

> ID：13155098
> 
> 赞同：2
> 
> 时间：2012-10-31T09:44:53.680
> 
> 标签：h2, spring-jdbc

我正在使用 H2 数据库来提高性能，因此我决定在运行时将数据从 MySQL 加载到 H2 数据库。

场景是我创建了三个表，分别是 book、author、book_author。book_author 是一个多对多表。

表 book、author 和 book_author 的记录分别为 1000、50000 和 50000。

选择查询

```
select book.name 
from book, author , book_author 
where book.id = book_author.book_id 
and book_author.author_id = author.id 
and author.name = 'Charles Dickens' 
```

执行需要 7 分钟。

我使用 spring-jdbc 创建 H2 内存数据库。

```
EmbeddedDatabase database_01 = new EmbeddedDatabaseBuilder().
    setType(EmbeddedDatabaseType.H2).
    addScript("initial_script.sql").
    setName("database_01").build();

JdbcTemplate jdbcTemplate_01 = new JdbcTemplate(database_01); 
```

有人可以建议为什么要花费这么多时间以及优化它的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T17:36:16.217

您是否创建了正确的索引？另请参阅[有关 index 以及它们如何在 H2 中使用的文档](http://h2database.com/html/performance.html#storage_and_indexes)。

# sql - 选择与其他表格重叠的人员

> ID：13155104
> 
> 赞同：0
> 
> 时间：2012-10-31T09:45:18.547
> 
> 标签：sql, sql-server, tsql

我什至不知道如何想出一个好的标题，所以我希望我能以正确的方式描述我的问题:)

所以我有一个人表，它通过表 PersonKeywords 与关键字具有 N:N 关系。

然后我还有一个 Search 表，它还通过 SearchKeywords 表与关键字建立了 N:N 关系。

现在人可以和关键字A和B有关系，搜索记录可以和关键字A和C有关系。

现在我想要我的结果集中的人，因为它至少有一个（在这个“A”中）搜索记录有的关键字。

我也想要有'A'的人，有'C'的人，有'A'和'C'的人，但不是只有B的人。

所以这是两个列表上的匹配，但我不知道从哪里开始创建这样的声明......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:52:35.813

所以你有三个人...

```
declare @persons table (id int identity(1,1), name varchar(10))
insert @persons (name) values ('Babs'),('Ken'),('Neville'),('Sue') 
```

Babs 有 A 和 B，Ken 有 A 和 C，Neville 只有 B，Sue 只有 C

```
declare @personkeywords table (personid int, keyword varchar(5))
insert @personkeywords values (1,'a'),(1,'b'),(2,'a'),(2,'c'),(3,'b'),(4,'c') 
```

搜索是 A 或 C

```
declare @searchkeywords table (searchid int, keyword varchar(5))
insert @searchkeywords values (1,'a'),(1,'c') 
```

所以...

```
select distinct persons.*
from @persons persons
     inner join @personkeywords personkeywords on persons.id = personkeywords.personid
     inner join @searchkeywords searchkeywords on personkeywords.keyword = searchkeywords.keyword
where 
     searchkeywords.searchid = 1 
```

给

```
1     Babs
2     Ken
4     Sue 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:55:11.620

尽管我没有太多信息可以使用，但以下内容至少应该可以帮助您...

```
SELECT s.SearchID, k.Keyword, p.PersonID, p.Name
FROM Search s
INNER JOIN SearchKeywords sk ON s.SearchID = sk.SearchID
INNER JOIN Keywords k ON sk.KeywordID = k.KeywordID
LEFT OUTER JOIN PersonKeywords pk ON k.KeywordID = pk.KeywordID
LEFT OUTER JOIN Person p ON pk.PersonID = p.PersonID
WHERE k.Keyword = 'mykeyword'
GROUP BY s.SearchID, k.Keyword, p.PersonID, p.Name 
```

# openssl - 有什么方法可以刷新 SSL 写缓冲区

> ID：13155111
> 
> 赞同：6
> 
> 时间：2012-10-31T09:45:40.497
> 
> 标签：openssl

我已经使用 OpenSSL API 编写了一个 SSL 客户端来与一个 SSL 服务器进行交互。在 OpenSSL 站点中，我了解到写入一些数据后需要刷新写入缓冲区。我在我的客户端程序中使用 SSL_Write 和 SSL_Read。正如 OpenSSL 网站建议的那样，我尝试使用 BIO_flush(BIO*) 刷新数据，我在这里崩溃了。

我正在使用从[这个站点获得的 SSL 库](https://github.com/guardianproject/openssl-android)

在这里，我不清楚 BIO_flush 是刷新读取缓冲区还是写入缓冲区..:-( 所以我只想知道是否有其他方法可以刷新 SSL 写入缓冲区...？

这是有关我的客户程序的详细信息。

1.  使用 SSL_new 创建 SSL 对象（mSsl）
2.  创建 TCP 套接字并与服务器建立连接
3.  使用 BIO_new_socket(socket_id,BIO_NOCLOSE) 创建 BIO 对象(mBio)
4.  使用 SSL_set_bio(mSsl,mBio,mBio) 将 BIO 对象设置为 SSL 对象；
5.  使用 SSL_set_fd(mSsl,socket_id) 将套接字设置为 SSL 对象；
6.  使用 SSL_Connect(mSsl) 与服务器建立 SSL 连接；

在上述步骤之后，我启动了两个单独的线程进行写入和读取。写入线程使用 SSL_write 将数据写入服务器，读取线程使用 SSL_Read 从服务器读取数据。

在使用 SSL_Write 写入每个数据包后的写入线程中，我调用 BIO_flush(mBio)。

在整个程序中，我只在这个地方直接使用 mBio 对象来进行生物缓冲区刷新。

当我开始发送一些数据包时，程序在 BIO_flush 中崩溃......根据转储说它在 BIO_ctrl 函数中。我没有得到更多的东西。

有没有人使用我上面提供的链接并面临同样的问题..？如果是，请让我知道您是否知道解决方案。

是否有任何线程同步规则可以使用 BIO_flush()...？我的意思是调用 BIO_flush SSL_Read 不应该像那样同时发生......？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-01-03T10:33:17.970

您从哪里得知写入后需要刷新写入缓冲区？

我也在寻找一个刷新功能，但找不到。

我认为它的工作原理是这样的：对 SSL_write 的每次调用都会产生至少一个 SSL 记录并将其发送到套接字，在那里 nagle 算法可能会在内核中将其缓冲片刻并快速将其提交到外部。

所以 SSL_write 中没有缓冲，因此没有刷新！

我宁愿有一个刷新功能并将所有 SSL 记录填充到边缘，但据我所知，这不可用。我现在计划进行自己的缓冲并尽可能多地调用 SSL_write。

BTW: I just wrote a little test program: It sends a buffer with one write and then I ran it again, calling SSL_write for each character. Both times I run tcpdump and in Wireshark I could see that the first run had few large application data records and the second run had many small records. So I think it's confirmed.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-18T14:20:45.663

BIO_flush 用于刷新写入数据。

您的 BIO_flush 和 SSL_read/write 的混合和匹配是有问题的，因为 BIO 结构不知道您的 SSL_read/write 调用。

使用 BIO_read/write 会获得更好的结果。

如果您绝对需要使用 SSL_read/write，则应避免使用 BIO。

我想你会在这个 OpenSSL 文档末尾的例子中走得更远。

[简单的 OpenSSL 客户端示例](https://www.openssl.org/docs/man1.0.2/man3/BIO_s_connect.html)

如果您在尝试该示例时仍然遇到崩溃，则您正在使用的特定库构建可能存在问题。

# c# - 错误：调用线程无法访问此对象，因为不同的线程拥有它

> ID：13155112
> 
> 赞同：0
> 
> 时间：2012-10-31T09:45:46.423
> 
> 标签：c#, .net, wpf

我有一个 Threading.timer 在特殊时间显示气球。

我将此代码用于显示气球

```
 var thread = new Thread(new ThreadStart(DisplayFormThread));

        thread.SetApartmentState(ApartmentState.STA);
        thread.Start();
        thread.Join();

 private void DisplayFormThread()
{
    try
    {
        Show();
    }
    catch (Exception ex)
    {
        //  Log.Write(ex);
    }
} 
```

这是我的表演气球课。

```
 if (!Application.Current.Dispatcher.CheckAccess())
    {
        var action = new Action(() => ShowCustomBalloon(balloon, animation, timeout));
        Application.Current.Dispatcher.Invoke(DispatcherPriority.Normal, action);
        return;
    }

    if (balloon == null) throw new ArgumentNullException("balloon");
    if (timeout.HasValue && timeout < 500)
    {
        string msg = "Invalid timeout of {0} milliseconds. Timeout must be at least 500 ms";
        msg = String.Format(msg, timeout);
        throw new ArgumentOutOfRangeException("timeout", msg);
    }

    Popup popup = new Popup();
    popup.AllowsTransparency = true;
    popup.PopupAnimation = animation;
    popup.Child = balloon;
    popup.Placement = PlacementMode.AbsolutePoint;
    popup.StaysOpen = true;

    Point position = new Point(SystemParameters.WorkArea.Width - ((UserControl)balloon).Width,
             SystemParameters.WorkArea.Height - ((UserControl)balloon).Height);
    popup.HorizontalOffset = position.X - 1;
    popup.VerticalOffset = position.Y - 1;
    //display item
    popup.IsOpen = true; 
```

当我显示气球时出现错误：**调用线程无法访问此对象，因为不同的线程拥有它**

在这段代码中我得到错误：

> popup.Child = 气球；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:55:15.327

您不能直接从另一个线程更新 UI。当您在线程中完成并需要更新 UI 时，您可以使用以下内容：

```
this.Dispatcher.BeginInvoke(System.Windows.Threading.DispatcherPriority.Normal, (System.Threading.ThreadStart)delegate()
{
    // Update UI properties
}); 
```

“this”是一个 UI 元素，例如窗口。您还可以使用：

```
System.Windows.Application.Current.Dispatcher.BeginInvoke(System.Windows.Threading.DispatcherPriority.Normal, (System.Threading.ThreadStart)delegate()
{
    // Update UI properties
}); 
```

而不是引用 UI 组件，即上面示例中的“this”。

# python - 使用 Python 打开直到通过打印机

> ID：13155114
> 
> 赞同：1
> 
> 时间：2012-10-31T09:45:58.877
> 
> 标签：python, epson, network-printers, drawer, twistd

我有 Epson TM-U220B 网络打印机和一个钱箱。我正在开发 Python Web 应用程序，我设法通过我的应用程序配置打印机。我的打印机工作正常，我只想打开直到打印票。我在互联网上找到了一些打开抽屉的代码。

这是代码：

```
def print_(printer_name, file_path):
    preorder = chr(27)+chr(100)+chr(0)    
    cut_paper = chr(29)+chr(86)+chr(66)+chr(0)

    open_till = chr(27)+chr(112)+chr(10)

    the_file = open(file_path, "a")
    the_file.seek(0)
    the_file.write(preorder)
    the_file.seek(0,2)
    the_file.write(cut_paper)
    the_file.write(open_till)
    the_file.close()
    conn.printFile(printer_name, file_path, md5(file_path), {}) 
```

open_till 是不工作的代码，其他一切正常

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-07T09:40:53.817

您可以使用以下代码打开现金抽屉

```
import win32print

def OpenCashDrawer(printerName) :   
       printerHandler = win32print.OpenPrinter(printerName)
       cashDraweOpenCommand = chr(27)+chr(112)+chr(0)+chr(25)+chr(250)
       win32print.StartDocPrinter(printerHandler, 1, ('Cash Drawer Open',None,'RAW')) 
       win32print.WritePrinter( printerHandler, cashDraweOpenCommand)
       win32print.EndDocPrinter(printerHandler)
       win32print.ClosePrinter(printerHandler)

OpenCashDrawer("YourPrinterName") 
```

# sql - 如何根据子表值从父表中跳过 id

> ID：13155123
> 
> 赞同：0
> 
> 时间：2012-10-31T09:46:24.740
> 
> 标签：sql, sql-server, sql-server-2008

我有两张桌子

```
table1  

ides    name

1001    AA
1002    BB
1003    CC

table2      

ides    posi    cwawr

1001    2   xyz
1001    4   lmn
1001    6   abc
1002    2   ijk
1002    4   lmo
1002    6   pqr
1003    2   xyz
1003    4   sfs 
```

在上面的两个表中，我想选择表 1 的所有 ide，其中 posi 不等于 2，cwawr 不等于 xyz。例如 1001 posi 有 2 而 cwawr 有 xyz 所以这个 id 应该被跳过。同样的 1003 也有 posi 值 2 并且 cwawr 有 xyz 所以它也应该被跳过。

所以结果应该是

```
1002 
```

只要。

提前致谢， 埃什维尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T09:51:41.967

经典不存在（更正式地称为“[反半连接](http://blogs.msdn.com/b/craigfr/archive/2006/07/19/671712.aspx)”和[相关](http://en.wikipedia.org/wiki/Join_%28relational_algebra%29#Antijoin_.28.E2.96.B7.29)）

```
SELECT
   *
FROM
   Table1 T1
WHERE
   NOT EXISTS (SELECT *
       FROM
         Table2 T2
       WHERE
         T2.posi = 2 AND T2.cwawr = 'xyz'
         AND
         T2.ides = T1.ides) 
```

# groovy - Groovy 中的深拷贝 Map

> ID：13155127
> 
> 赞同：26
> 
> 时间：2012-10-31T09:46:32.417
> 
> 标签：groovy, deep-copy

如何在 Groovy 中深度复制地图地图？映射键是字符串或整数。这些值是字符串、原始对象或其他映射，以递归方式。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-31T10:03:26.667

一个简单的方法是这样的：

```
// standard deep copy implementation
def deepcopy(orig) {
     bos = new ByteArrayOutputStream()
     oos = new ObjectOutputStream(bos)
     oos.writeObject(orig); oos.flush()
     bin = new ByteArrayInputStream(bos.toByteArray())
     ois = new ObjectInputStream(bin)
     return ois.readObject()
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-04-28T02:01:50.727

为了对类中的每个成员进行深度复制，对于 Class 对象存在 newInstance()。例如，

```
foo = ["foo": 1, "bar": 2]
bar = foo.getClass().newInstance(foo)
foo["foo"] = 3
assert(bar["foo"] == 1)
assert(foo["foo"] == 3) 
```

请参阅[http://groovy-lang.org/gdk.html](http://groovy-lang.org/gdk.html)并导航到 java.lang、Class，最后是 newInstance 方法重载。

**更新**：

我上面的例子最终是一个浅拷贝的例子，但我真正的意思是，一般来说，你几乎总是必须定义你自己可靠的深拷贝逻辑，也许使用 newInstance() 方法，如果 clone( ) 方法是不够的。这里有几种方法可以解决这个问题：

```
import groovy.transform.Canonical
import groovy.transform.AutoClone
import static groovy.transform.AutoCloneStyle.*

// in @AutoClone, generally the semantics are
//  1\. clone() is called if property implements Cloneable else,
//  2\. initialize property with assignment, IOW copy by reference
//
// @AutoClone default is to call super.clone() then clone() on each property.
//
// @AutoClone(style=COPY_CONSTRUCTOR) which will call the copy ctor in a 
//  clone() method. Use if you have final members.
//
// @AutoClone(style=SIMPLE) will call no arg ctor then set the properties
//
// @AutoClone(style=SERIALIZATION) class must implement Serializable or 
//  Externalizable. Fields cannot be final. Immutable classes are cloned.
//  Generally slower.
//
// if you need reliable deep copying, define your own clone() method

def assert_diffs(a, b) {
    assert a == b // equal objects
    assert ! a.is(b) // not the same reference/identity
    assert ! a.s.is(b.s) // String deep copy
    assert ! a.i.is(b.i) // Integer deep copy
    assert ! a.l.is(b.l) // non-identical list member
    assert ! a.l[0].is(b.l[0]) // list element deep copy
    assert ! a.m.is(b.m) // non-identical map member
    assert ! a.m['mu'].is(b.m['mu']) // map element deep copy
}

// deep copy using serialization with @AutoClone 
@Canonical
@AutoClone(style=SERIALIZATION)
class Bar implements Serializable {
   String s
   Integer i
   def l = []
   def m = [:]

   // if you need special serialization/deserialization logic override
   // writeObject() and/or readObject() in class implementing Serializable:
   //
   // private void writeObject(ObjectOutputStream oos) throws IOException {
   //    oos.writeObject(s) 
   //    oos.writeObject(i) 
   //    oos.writeObject(l) 
   //    oos.writeObject(m) 
   // }
   //
   // private void readObject(ObjectInputStream ois) 
   //    throws IOException, ClassNotFoundException {
   //    s = ois.readObject()
   //    i = ois.readObject()
   //    l = ois.readObject()
   //    m = ois.readObject()
   // }
}

// deep copy by using default @AutoClone semantics and overriding 
// clone() method
@Canonical
@AutoClone
class Baz {
   String s
   Integer i
   def l = []
   def m = [:]

   def clone() {
      def cp = super.clone()
      cp.s = s.class.newInstance(s)
      cp.i = i.class.newInstance(i)
      cp.l = cp.l.collect { it.getClass().newInstance(it) }
      cp.m = cp.m.collectEntries { k, v -> 
         [k.getClass().newInstance(k), v.getClass().newInstance(v)] 
      }
      cp
   }
}

// assert differences
def a = new Bar("foo", 10, ['bar', 'baz'], [mu: 1, qux: 2])
def b = a.clone()
assert_diffs(a, b)

a = new Baz("foo", 10, ['bar', 'baz'], [mu: 1, qux: 2])
b = a.clone()
assert_diffs(a, b) 
```

我用于`@Canonical`equals() 方法和元组 ctor。请参阅[groovy 文档第 3.4.2 章，代码生成转换](http://www.groovy-lang.org/single-page-documentation.html)。

进行深度复制的另一种方法是使用 mixins。假设您希望现有类具有深拷贝功能：

```
class LinkedHashMapDeepCopy {
   def deep_copy() {
      collectEntries { k, v -> 
         [k.getClass().newInstance(k), v.getClass().newInstance(v)]
      }
   }
}

class ArrayListDeepCopy {
   def deep_copy() {
      collect { it.getClass().newInstance(it) }
   } 
}

LinkedHashMap.mixin(LinkedHashMapDeepCopy)
ArrayList.mixin(ArrayListDeepCopy)

def foo = [foo: 1, bar: 2]
def bar = foo.deep_copy()
assert foo == bar
assert ! foo.is(bar)
assert ! foo['foo'].is(bar['foo'])

foo = ['foo', 'bar']
bar = foo.deep_copy() 
assert foo == bar
assert ! foo.is(bar)
assert ! foo[0].is(bar[0]) 
```

如果您想要基于某种运行时上下文的深度复制语义，或者类别（再次参见[groovy 文档）：](http://www.groovy-lang.org/single-page-documentation.html)

```
import groovy.lang.Category

@Category(ArrayList)
class ArrayListDeepCopy {
   def clone() {
      collect { it.getClass().newInstance(it) }
   } 
}

use(ArrayListDeepCopy) {
   def foo = ['foo', 'bar']
   def bar = foo.clone() 
   assert foo == bar
   assert ! foo.is(bar)
   assert ! foo[0].is(bar[0]) // deep copying semantics
}

def foo = ['foo', 'bar']
def bar = foo.clone() 
assert foo == bar
assert ! foo.is(bar)
assert foo[0].is(bar[0]) // back to shallow clone 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-10-25T11:21:36.307

对于 Json (LazyMap) 这对我来说很重要

```
copyOfMap = new HashMap<>()
originalMap.each { k, v -> copyOfMap.put(k, v) }
copyOfMap = new JsonSlurper().parseText(JsonOutput.toJson(copyOfMap)) 
```

编辑：简化：Ed Randall

```
copyOfMap = new JsonSlurper().parseText(JsonOutput.toJson(originalMap)) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-07-30T22:35:24.553

我也遇到了这个问题，我刚刚发现：

```
deepCopy = evaluate(original.inspect()) 
```

尽管我在 Groovy 中编码不到 12 个小时，但我想知道使用`evaluate`. 此外，上面不处理反斜杠。这：

```
deepCopy = evaluate(original.inspect().replace('\\','\\\\')) 
```

做。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-31T09:49:20.563

恐怕你必须这样做`clone`。你可以试试Apache Commons Lang [SerializationUtils](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/SerializationUtils.html#clone%28java.io.Serializable%29)

# aem - 通过 CQ5 中的脚本导出用户和用户 acl

> ID：13155130
> 
> 赞同：3
> 
> 时间：2012-10-31T09:46:46.487
> 
> 标签：aem, day-cq

我们想建立一个新的作者环境，并希望将现有作者的所有用户和 acl 导出到新作者。有没有一种简单的方法可以做到这一点？没有可用的 LDAP。

感谢和问候帕特里克

编辑：

找到这个[http://www.wemblog.com/2011/11/how-to-create-package-based-on-xpath-in.html](http://www.wemblog.com/2011/11/how-to-create-package-based-on-xpath-in.html)并且可以导出所有用户并在新系统上重新导入它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:51:22.450

用户和组可以从作者激活到发布 - 您可以尝试将旧作者配置为复制到新作者，然后使用树激活将用户推送到新实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:07:41.950

我的同事 Jason 提醒了我这一点：用户和群组就像其他任何事物一样都是内容。因此，您可以从全部或部分`/home`JCR 节点制作内容包。

# wpf - 如何从固定文档转换为 xls

> ID：13155133
> 
> 赞同：1
> 
> 时间：2012-10-31T09:46:52.323
> 
> 标签：wpf, xls, fixeddocument

如何从固定文档转换为 xls？

有没有办法从固定文档转换为 xls？我正在使用固定文档来打印 xps，但现在我需要“另存为 xls”选项。

我是否必须遍历固定文档中的所有控件才能一次将其转换为 xls 一行？或者，还有更好的方法？我需要保持格式和布局不变。

我不是在寻找第三方控件。

# c# - 当 DataSource 绑定到 EF5 实体集合时过滤 DataGridView 行

> ID：13155140
> 
> 赞同：1
> 
> 时间：2012-10-31T09:47:46.597
> 
> 标签：c#, entity-framework, datagridview, databound

我有一个数据绑定到 BindingList 的 DataGridView

```
private void InitGrid()
{
    Ctx.MyEntitySet.Load();
    dataGridView1.DataSource = Ctx.MyEntitySet.Local.ToBindingList();
    dataGridView1.Columns["Id"].Visible = false;
    dataGridView1.Columns["UnwantedCol1"].Visible = false;
    dataGridView1.Columns["UnwantedCol2"].Visible = false;
    dataGridView1.Columns["UnwantedCol3"].Visible = false;
} 
```

和一个过滤文本框，一个 TextChanged 事件像这样处理

```
private void textBoxFilter_TextChanged(object sender, EventArgs e)
{
    try
    {
        string filter = textBoxFilter.Text.Trim();
        ((DataView)dataGridView1.DataSource).RowFilter = filter;
        textBoxFilter.BackColor = SystemColors.AppWorkspace;
    }
    catch (Exception)
    {
        textBoxFilter.BackColor = Color.Red;
        ToolTip tip = new ToolTip();
        tip.SetToolTip(textBoxFilter, ex.Message);
    }
} 
```

我运行代码，数据正确显示，但是当我尝试`ColumnName like '%sometext%'`在我的过滤器文本框中键入类似的内容时，我收到一个异常，说我无法投射'System.Data.Entity.Internal.ObservableBackedBindingList`1[MyEntity] ' 到 'System.Data.DataView'。

谁能给我指点？

谢谢，F。

**解决：**

添加了通用扩展方法

```
public static class LocalExtensions
{
    public static IEnumerable<T> Filter<T>(this IEnumerable<T> list, Func<T, bool> filterParam)
    {
        return list.Where(filterParam);
    }
} 
```

并像这样修改了 TextChanged 事件处理程序：

```
private void textBoxFilter_TextChanged(object sender, EventArgs e)
{
    try
    {
        string filter = textBoxFilter.Text.Trim();

        dataGridView1.DataSource =
            Ctx.MyEntitySet.Local
            .Filter(x =>
                x.EntityPropertyToSearchIn1.ToUpper().Contains(filter.ToUpper()) ||
                x.EntityPropertyToSearchIn2.ToUpper().Contains(filter.ToUpper())
            ).ToList();

        textBoxFilter.BackColor = SystemColors.AppWorkspace;
    }
    catch (Exception)
    {
        textBoxFilter.BackColor = Color.Red;
        ToolTip tip = new ToolTip();
        tip.SetToolTip(textBoxFilter, ex.Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-29T15:09:34.357

And here is the VB equivalent for the extension method:

```
Imports System.Runtime.CompilerServices

Module LocalExtensions

    <Extension()> _
    Public Function Filter(Of T)(list As IEnumerable(Of T), filterParam As Func(Of T, Boolean)) As IEnumerable(Of T)
        Return list.Where(filterParam)
    End Function

End Module 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:49:19.793

基本上，您不能将[BindingList](http://msdn.microsoft.com/en-us/library/gg696575%28v=vs.103%29.aspx)直接放入 DataGridView。您需要定义一个[BindingSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingsource.aspx)并将 BindingList 分配给此 BindingSource。试试这个看看它是否有效：

```
Ctx.MyEntitySet.Load();
BindingSource yourBS = new BindingSource();
yourBS.DataSource = Ctx.MyEntitySet.Local.ToBindingList();

dataGridView1.DataSource = yourBS;
dataGridView1.Columns["Id"].Visible = false;
dataGridView1.Columns["UnwantedCol1"].Visible = false;
dataGridView1.Columns["UnwantedCol2"].Visible = false;
dataGridView1.Columns["UnwantedCol3"].Visible = false; 
```

我希望它有效。:)

问候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-08T22:25:42.987

You would have to create a new BindingList that is filtered. Easy to do with LINQ. See [Filtering a Binding List](http://social.msdn.microsoft.com/forums/vstudio/en-US/cb7e21ec-4ac9-45ec-824a-e527d194c97c/filtering-a-binding-list)

```
try
{
    string filter = textBoxFilter.Text.Trim();
    dataGridView1.DataSource = new BindingList<YOUR_ENTITY>(Ctx.MyEntitySet.Local.ToBindingList().Where(x => x.EntityPropertyToSearchIn1.ToUpper().Contains(filter)).ToList<YOUR_ENTITY>());
    textBoxFilter.BackColor = SystemColors.AppWorkspace;
} 
```

# ios - 蒙面的可滚动按钮列表

> ID：13155148
> 
> 赞同：1
> 
> 时间：2012-10-31T09:48:07.190
> 
> 标签：ios, cocos2d-iphone

我想实现显示在弹出窗口中的可滚动按钮列表。我需要某种遮罩，但按钮也应该在遮罩内工作。有什么建议怎么做吗？

![蒙面的可滚动列表](../Images/abbb283feafb24c6db0a174ff29819cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:29:40.940

[可以使用CCMask](http://www.cocos2d-iphone.org/forum/topic/15890)类来实现这一点，但这是非常慢的方法，因为每次更新都必须应用掩码。

如果您使用此类，您还将失去按钮检测，因此您将不得不使用触摸检测。您还将进行大量调整以将蒙版和对象准确定位在您想要的位置。

当你完成所有事情时，它不会像你想象的那么好..滚动的感觉不会很好，因为会有屏蔽滞后......

最好用某种“窗口”图像隐藏可滚动项目的隐藏部分

# python - 用于查找首字母缩写词并避免由该模式组成的单词的正则表达式

> ID：13155152
> 
> 赞同：3
> 
> 时间：2012-10-31T09:48:13.523
> 
> 标签：python, regex, beautifulsoup, regex-negation

我正在使用 python 2.7 和[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)。我需要找到诸如*abc*或*abc*之类的首字母缩写词，并避免像*qweabcrty*这样的误报。模式可以在字符串的开头，结尾，可以在前后有空格、引号、双引号、连字符（等等），但不能是字母数字字符。

我来这个正则表达式

```
[^\w]?a\.?b\.?c\.?[^\w]? 
```

没关系

*   美国广播公司
*   美国广播公司
*   废话（美国广播公司）
*   abc-blah
*   废话ABC
*   胡说八道
*   废话-abc-废话

但它也被发现（我不想）：

*   qweabcrty

如果我删除*?* 在两个*[^\w]*之后，它将不再找到案例 1、2、4 和 5，因为它希望在之前和/或之后找到一些东西。

长话短说，我该如何指定： abc 可以在字符串中，**但如果**在它之前和/或之后有一个字符，则它不能是字母数字字符。

python代码如下所示：

```
import re
from bs4 import BeautifulSoup, SoupStrainer

html = """
<html>
 <a>abc</a>
 <a>a.b.c.</a>
 <a>blah (abc)</a>
 <a>abc-blah</a>
 <a>blah-abc</a>
 <a>blah abc blah</a>
 <a>blah-abc-blah</a>
 <a>qweabcrty</a>
</html>"""

links = BeautifulSoup(html, "lxml", parse_only=SoupStrainer(["a"]))

tags = links.find_all("a", text = re.compile("[^\w]?a\.?b\.?c\.?[^\w]?", re.I))
print tags 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:52:48.083

尝试使用单词边界 ( `\b`) 元字符：

```
html = """
<html>
 <a>abc</a>
 <a>a.b.c.</a>
 <a>blah (abc)</a>
 <a>abc-blah</a>
 <a>blah-abc</a>
 <a>blah abc blah</a>
 <a>blah-abc-blah</a>
 <a>qweabcrty</a>
</html>"""

import re
print re.sub(r'\b(abc|a\.\b.\.c)\b', '@@@', html) 
```

印刷

```
<html>
 <a>@@@</a>
 <a>@@@.</a>
 <a>blah (@@@)</a>
 <a>@@@-blah</a>
 <a>blah-@@@</a>
 <a>blah @@@ blah</a>
 <a>blah-@@@-blah</a>
 <a>qweabcrty</a>
</html> 
```

# wpf - 当我使用 Expression Blend Interactivity 程序集中的 EventTrigger 时，如何使“单击”事件与我的 WPF 按钮一起使用？

> ID：13155153
> 
> 赞同：1
> 
> 时间：2012-10-31T09:48:13.007
> 
> 标签：wpf, xaml, command

我正在尝试使用在我的视图模型中定义的命令，以及在 xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" 中定义的 EventTriggers

我已将控件从 Microsoft.Surface.Presentation.Controls.SurfaceSlider 派生控件更改为常规 WPF 按钮。使用 Button，如果我使用 EventName="MouseEnter"，则会触发相同的 ConfirmOrderCommand，但如果我使用 EventName="Click"，则不会发生任何事情。按钮的 XAML 在这里。

```
<Button Name="ConfirmButton"
          IsEnabled="{Binding IsEnabled}"
          Style="{StaticResource  ConfirmButtonStyle}"
          >
    <i:Interaction.Triggers>
      <i:EventTrigger EventName="Click">
        <i:InvokeCommandAction Command="{Binding ConfirmOrderCommand}"/>
      </i:EventTrigger>
    </i:Interaction.Triggers>
  </Button> 
```

我希望用户能够单击按钮来触发命令。我可以让 Click 事件为 Button 工作，还是需要寻找另一个事件？我也未能让 MouseLeftButtonUp 工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:45:00.750

试试 EventName="Button.Click"。无论如何，您只需设置 Button 本身的 Command 属性，然后删除 Interaction.Triggers 部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T15:02:28.263

Button.Click 无法正常工作的实际原因，是在他早上醒来后经过一番痛苦并最终询问某人有关该项目的原因后确定的。

我们的应用程序使用 FrameworkElement Preview 委托窃取了几乎所有的 Button 事件。

```
public static void RegisterEvents(FrameworkElement parent)
{
    parent.PreviewMouseDown += MouseDown;
    parent.PreviewMouseUp += MouseUp;
    // even more of these
} 
```

然后，在 MouseDown 等情况下，代表将使用 System.Window.Input.TouchDevice 到 ReportDown()。一直以来，我只是想我不知道标准 WPF 按钮通常是如何工作的。我想这个故事的寓意是事件不必从子控件开始，然后传播到它们的容器，直到 Handled = true。预览允许容器首先捕获事件。

# vb.net - VB.NET“使用”错误

> ID：13155156
> 
> 赞同：0
> 
> 时间：2012-10-31T09:48:20.123
> 
> 标签：vb.net, using

我想进行速度测试，以了解 Graphics.FromImage() 的成本。

为此，我首先做了一个循环，在其中反复调用 Graphics.FromImage。现在在我的第二次测试中，我只做了一次，但现在我得到了一个错误。

```
 m_Buffer = New Bitmap(Me.ClientSize.Width, Me.ClientSize.Height, System.Drawing.Imaging.PixelFormat.Format32bppPArgb)
    m_g = Graphics.FromImage(m_Buffer)

    For i As Integer = 0 To 1000
        Using m_g
            m_g.FillEllipse(New SolidBrush(Color.Blue), 0, 0, 100, 100)
        End Using
    Next i 
```

在 (i=1) 上，我在 m_g.FilleEllipse 行上收到错误“参数无效”有人知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:52:16.567

我认为这将是因为它`Graphics.FromImage`是一个**静态**调用，并且包装了 using 语句尝试调用 dispose，这意味着下一轮它不能使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:02:48.447

也许你应该这样做

```
....
Using m_g
    For i As Integer = 0 To 1000
        Using blue As New SolidBrush(Color.Blue)
            m_g.FillEllipse(blue, 0, 0, 100, 100)
        End Using
    Next i
End Using
.... 
```

对 Graphics 对象的引用应在循环之后处理，对 SolidBrush 的引用应在循环内处理。

编辑：

使用非常重要。特别是当您处理图形句柄或数据库连接等系统资源时。Using 是 try/finally 子句的替代品，它会在 End Using 处自动处理您声明的对象。这保证了即使在异常情况下，您的系统资源也将被正确处理，而无需等待垃圾收集器通过。
在 1000 个 SolidBrush 对象（和底层系统图形句柄）之上的循环中，将立即被调用，而不会对系统图形内存造成压力。

# c# - Visual Studio 2010 菜单条颜色

> ID：13155164
> 
> 赞同：0
> 
> 时间：2012-10-31T09:48:35.507
> 
> 标签：c#, winforms, visual-studio-2010, menubar

> **可能重复：**
> [如何更改菜单悬停颜色 - WINFORMS](https://stackoverflow.com/questions/9260303/how-to-change-menu-hover-color-winforms)

我正在自定义我的菜单条颜色。我想让它看起来像 Visual Studio 2010 中的那个。

![VS 2010 菜单条](../Images/6662d20f757ec69a56949404647cbb12.png)

是否有引用颜色的现有文档？

**编辑**
我知道如何使用自定义渲染器来更改颜色。我的问题目标是获取所有颜色的列表。我可以使用图像编辑器软件通过颜色选择器工具查找每种颜色的 RGB 值，但我想知道颜色列表是否写在某处：

*   `MenuStripForeColor`
*   `MenuStripGradientBegin`
*   `MenuStripGradientEnd`
*   `MenuItemPressedGradientBegin`
*   `MenuItemPressedGradientMiddle`
*   `MenuItemPressedGradientEnd`
*   `MenuItemSelectedGradientBegin`
*   `MenuItemSelectedGradientEnd`
*   `MenuItemSelected`
*   `MenuBorder`
*   `MenuItemBorder`
*   `ImageMarginGradientBegin`
*   `ImageMarginGradientMiddle`
*   `ImageMarginGradientEnd`
*   `ToolStripDropDownBackground`
*   ... 其他 （？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T09:55:11.480

Visual Studio 使用 WPF。但是，如果您使用`MainMenu`代替`MenuStrip`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:01:53.583

您可以使用自己的渲染器来实现这一点......这里讨论了自定义渲染器：http: [//msdn.microsoft.com/en-us/library/ms229725.aspx](http://msdn.microsoft.com/en-us/library/ms229725.aspx)

# parsing - 使用 TimeZone 重新格式化字符串日期

> ID：13155166
> 
> 赞同：4
> 
> 时间：2012-10-31T09:48:36.520
> 
> 标签：parsing, date, groovy, timezone, format

我对 Groovy 还很陌生（但已经很喜欢它了）。我对编码并不陌生，但到目前为止还没有太多经验。

我在做什么？我正在从 excel 文件中提取某些信息以从中创建 XML (SOAP) 消息以将其转发到 Web 服务。到目前为止一切正常，**除了 Date 转换**。

我将字符串日期保存到 var

```
odate = 'Wed Oct 31 00:00:00 CET 2012' 
```

我需要将此日期重新格式化为类似

> "10/31/2012 10:09:00" (MM/dd/yyyy HH:mm:ss)

我试图解析[另一个问题中提到](https://stackoverflow.com/questions/3817862/groovy-string-to-date)的日期，但我得到的只是一个例外。

```
String odate = 'Wed Oct 31 00:00:00 CET 2012'
def parsedodate = new Date().parse('E MMM dd H:m:s z yyyy', odate)

println parsedodate.format('MM/dd/yyyy h:m:s') 
```

> 抛出异常 31.10.2012 10:18:25 org.codehaus.groovy.runtime.StackTraceUtils sanitize
> 
> 警告：清理堆栈跟踪：
> 
> java.text.ParseException：无法解析的日期：“Wed Oct 31 00:00:00 CET 2012”

* * *

现在经过一些阅读和几轮反复试验，我发现解析方法似乎只能解释德国日期。在手动将字符串日期更改为德语格式（我所在的位置）后，以下工作。

```
String odate = 'Mi Okt 31 00:00:00 2012' //Mi = Wednesday, Okt = October, removed timezone
def parsedodate  = new Date().parse('E MMM dd H:m:s yyyy', odate) // removed the z
println parsedodate .format('MM/dd/yyyy h:m:s') 
```

但是，我需要解析器接受英文日期格式。我该怎么办（错）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:32:25.727

您将需要使用一些 Java 来访问支持区域设置的 SimpleDateFormat 实例。

```
SimpleDateFormat englishDateFormat = new SimpleDateFormat( englishPattern , Locale.ENGLISH);
SimpleDateFormat germanDateFormat = new SimpleDateFormat( germanPattern , Locale.GERMAN);

Date englishDate = englishDateFormat.parse( odate );
Date germanDate = germanDateFormat.parse( odate );

String englishOutput = englishDate .format( englishPattern );
String germanOutput = germanDate .format( germanPattern ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T14:26:42.363

您的问题的完整解决方案将是：

```
import java.text.SimpleDateFormat
odate="Wed Oct 31 00:00:00 CET 2012"

englishPattern="E MMM dd H:m:s z yyyy"

SimpleDateFormat englishDateFormat = new SimpleDateFormat( englishPattern , Locale.ENGLISH);
//SimpleDateFormat germanDateFormat = new SimpleDateFormat( germanPattern , Locale.GERMAN);

Date englishDate = englishDateFormat.parse( odate );
//Date germanDate = germanDateFormat.parse( odate );

String englishOutput = englishDate .format( englishPattern );
//String germanOutput = germanDate .format( germanPattern );

englishDate.format("MM/dd/yyyy hh:mm:ss") 
```

# linux - 如何从多个目录scp多个文件，而不同目录中的不同文件可能具有相同的名称

> ID：13155167
> 
> 赞同：2
> 
> 时间：2012-10-31T09:48:38.673
> 
> 标签：linux, scp

我想scp几个文件从远程到本地，远程中的文件是这样的：
/data/1792348/a.stat
/data/1792348/b.stat
/data/187657/a.stat
/data/187657/b。统计
……

1792348 187657等，中间目录名随机。

我如何 scp 所有以*.stat*结尾的文件从远程到本地？
如果我尝试*scp -P36000 user@host:/data/* /*.stat .*，我只能得到 2 个文件*a.stat b.stat*。

为什么我可以提交这个问题？
我真的不知道如何解决这个问题，也没有从谷歌搜索答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:14:21.163

我会使用`rsync`（它在内部使用 scp；但更复杂，例如它只会传输最小的数据变更集，所以如果你运行它几次，你会得到一个令人印象深刻的加速）

```
rsync -avz /data/ \
   --include "*/" --include "*.stat" --exclude "*" \
   user@host:/path/to/dest/data/ 
```

# c++ - 现有数据的 C++ STL 向量

> ID：13155170
> 
> 赞同：12
> 
> 时间：2012-10-31T09:48:40.360
> 
> 标签：c++, stl, vector

`std::vector`我可以使用我预先存在的数据创建一个而不是分配新内存并复制数据吗？

更清楚地说，如果我有一个内存区域（一个 c 数组或另一个向量的一部分或其他任何东西）并且我想提供对它的类似向量的访问，我可以创建一个向量并告诉它使用这个内存块?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T09:52:05.457

不，但是您可以编写自己的类来执行此操作。由于这将是一个相当普遍的需求，因此如果其他人已经这样做了，我不会感到惊讶。

然而，正常的 C++ 方法是编写模板代码来对迭代器进行操作。您可以为向量的任何部分或 C 数组的任何部分（以及许多其他部分）创建迭代器。所以为迭代器编写模板代码可能是你应该做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T09:50:34.870

由于您可以在创建 时使用自定义分配器`vector`，因此在技术上是可行的。

**但是**，我不会推荐它。我只是创建一个具有固定大小的向量（显然你可以掌握它），然后使用`std::copy`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T10:00:13.453

迭代容器的算法接受一对定义输入范围的迭代器。您可以将该算法与指向大容器中间的迭代器一起使用。

例子：

```
std::vector<int> big_vector(100000);
// initialize it
//...
std::sort(big_vector.begin()+100, big_vector.begin()+200); // sort a subrange

int big_array[100000]; //c-style array
// initialize it
//...
std::sort(std::begin(big_array)+300, std::begin(big_array)+400); // sort a subrange 
```

# c# - 页面结束时运行代码

> ID：13155171
> 
> 赞同：1
> 
> 时间：2012-10-31T09:48:43.427
> 
> 标签：c#, asp.net, sql-server

嘿希望有人可以帮助我解决这个问题...

我有一个学生登录时加载的页面，顶部有一个标签，代表他/她上次登录的时间......这个日期存储在一个表格中

我尝试使用将日期更新为 global.asax 下的今天日期的代码

```
void Application_End(object sender, EventArgs e)
{

} 
```

但似乎我不能在那里使用 SQL 连接

一旦用户通过退出关闭站点，如何将存储在表中的日期更改为 (todays.date)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:51:56.630

`Application_End`这不是合适的地方。当*您的整个应用程序*（而不仅仅是用户会话）关闭时，将调用此方法。

最接近你想要的东西可能是`Session_End`. 但请注意，这仅在用户会话到期后才会触发，通常是在浏览器关闭后 20 分钟左右。

不，不幸的是，您无法*可靠地*检测到用户已经关闭了他的浏览器窗口。如果您想摆弄 JavaScript，有一些解决方法可能在大多数情况下都有效：

*   [我想检测用户何时关闭浏览器窗口？](https://stackoverflow.com/q/1675576/87698)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:50:49.843

`Session_End`改为使用`Application_End`

`Application_End`是特定于应用程序的，对整个应用程序都是通用的，并且会触发一次。

`Session_End`是特定于用户的，它会在每个用户的范围内触发一次..所以正确的方法是使用这种方式..

在此处阅读有关这些事件的更多信息[..](http://www.aspdotnet-suresh.com/2011/05/what-is-use-of-globalasax-file-in.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:07:34.520

根据您的身份验证的工作方式（cookie、基于会话的等），在用户成功登录后立即执行此操作可能会更容易。

如果您需要准确测量最后一次登录，那么这样做是有意义的，因为`Session_End`可能会在他们实际使用完网站后的一段时间内触发。

如果您确实希望使用`Session_End`，您可以始终存储用户在会话中登录的时间，然后在`Session_End`事件触发时更新数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T10:25:11.837

您可以使用[onbeforeunload](http://msdn.microsoft.com/en-us/library/ie/ms536907%28v=vs.85%29.aspx)事件。

例如。

```
 <script type="text/javascript">
        window.onbeforeunload = function () 
        {
            //do something
        }
    </script> 
```

这是带有示例的示例页面：[onbeforeunload 事件示例](http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/refs/onbeforeunload.htm)

# android - 如何处理 IllegalBlockSizeException：在 android 中解密的最后一个块不完整

> ID：13155174
> 
> 赞同：0
> 
> 时间：2012-10-31T09:48:59.213
> 
> 标签：android, exception

我正在使用 AES 进行加密解密并且工作正常。但是对于安全检查，我已经对文件进行了一些更改。现在，当我再次运行时，它会在抛出错误的行上崩溃

```
javax.crypto.IllegalBlockSizeException: last block incomplete in decryption 
```

. 我已经放置了日志和标志，但它没有到达下一行。请建议我如何处理这个异常。我也使用了 try catch 但没有工作。代码片段是“：

```
 DataBaseActivity myDbHelper;
        File myFile1 = new File(filing1);   //Date.txt
        FileInputStream fIn = null;
        String  dateDec= null;
        String[] date = null;
        Boolean flag = null;
        Calendar cal1 = null;
        Calendar cal2 = null;

        try {
            fIn = new FileInputStream(myFile1);
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }

        BufferedReader myReader = new BufferedReader(new InputStreamReader(fIn));

        String aDataRow1 = "";
        String aBuffer1 = "";

        try {
            while ((aDataRow1 = myReader.readLine()) != null) {
                aBuffer1 += aDataRow1;

                myReader.close();
                dateDec = AESencrp.decrypt(aBuffer1); 
                System.out.println("Datedec"+dateDec);
                if(dateDec == ""){
                    flag = false;
                }else {
                    flag = true;
                }
            }
        } catch (IllegalBlockSizeException e) {
            e.printStackTrace();
        }catch (NullPointerException e) {
            e.printStackTrace();
        }

        if(flag == true) {

        try
        {   
                System.out.println("checks1");
                //DataBaseActivity openHelperClass = new DataBaseActivity(this);
                myDbHelper = new DataBaseActivity(this);
              //  myDbHelper = new DataBaseActivity(this);

               System.out.println("checks2");
                try {
                    System.out.println("checks3");
                    myDbHelper.createDataBase();
                    System.out.println("checks4");

            } catch (IOException ioe) {

                throw new Error("Unable to create database");

            } 
```

异常上线`dateDec = AESencrp.decrypt(aBuffer1);`

# c# - NHibernate 将“ON-DELETE”选项设置为 RESTRICT 而不是 CASCADE

> ID：13155176
> 
> 赞同：0
> 
> 时间：2012-10-31T09:49:06.693
> 
> 标签：c#, mysql, nhibernate

我有两个表之间的多对一关系 - Patient 和 Study。当一个病人被删除时，我希望他的所有研究也将被删除。*hbm.xml*文件中的相关行是：

```
<class name="Study" table="Studies">
        <id name="Uid">
            <generator class="guid"/>
        </id>
        <many-to-one name="Patient" class="Patient" column="PatientId" lazy="false" cascade="all"/>
</class> 
```

和：

```
<class name="Patient" table="Patients">
    <id name="Uid">
      <generator class="guid"/>
    </id>
    <property name="PatientId"/>
    <property name="Name" />
</class> 
```

我正在使用*NHibernate 3.3.1*和*MySQL 服务器*。通过设置`cascade=all`，我希望在*MySQL*工作台中看到 FK 选项`On Delete`将设置为`CASCADE`，但它设置为`RESTRICT`。当我手动将其更改为`CASCADE`（通过工作台）时，一切正常。有没有办法将其设置为`CASCADE`自动？我也尝试`on-delete=cascade`在*hbm.xml*文件中进行设置，但没有奏效。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:19:42.593

首先，删除父级时自动删除子级的语法是......

*   `cascade="all-delete-orphan"`（如果您想要全部删除和孤立删除）。NHibernate 会遍历内存中的孩子并删除它们。

或者

*   `on-delete="cascade"` **关键**。子节点的删除将发生在 db 端。

但是，在您的情况下，您尝试在`many-to-one`映射上执行此操作。我不认为这是可能的。AFAIK - 这仅适用于`one-to-many`映射。

要解决这个问题

*   您可以手动添加脚本以在数据库级别添加级联删除（您已经完成了）

或者

*   将关系更改为双向

# c++ - 在 C++ 中使用枚举的 for 循环

> ID：13155178
> 
> 赞同：2
> 
> 时间：2012-10-31T09:49:12.120
> 
> 标签：c++, for-loop, enums, pascal

我在尝试为 C++ 中的每个循环制作时遇到问题。如果我仍然不知道如何实现，我不确定这在 C++ 中是否可行。

我有一个用帕斯卡写的简单问题，当它是星期五 13 或星期六 25 时，它确实找到了一年中的哪一天，无论哪一天。

在帕斯卡我有这样的代码：

```
{First I declare types}
type
    months = (January, February, March, April, May, June, July, August, September, October, November, December);
...
{Then I declare variable for months}
var
    m: mesec;
...
{Then I can declare for loop that will loop over months}
for m:= januar to december do
... 
```

在 python 中也可以使用类似的方式对枚举进行 for each 循环。我的问题是：

有没有办法在 C++ 中对枚举进行 for 甚至 while 循环？

我知道这似乎是一个初学者的问题，但我尝试了几种不同的方法来做到这一点不起作用。不编译。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T09:56:26.277

如果枚举值是连续的，您可以在 C++ 中执行以下操作

```
enum Months
  {
  January,
  February,
  // etc...
  December,
  Last
  };

for (int month = January; month != Last; ++month)
  {
  // do stuff
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T09:58:12.867

不，您不能直接在 C++ 中执行此操作。不过，有一些解决方法。

*   如果 enum 的值增加 1（即具有连续值，默认情况下，如果您没有明确设置它们的值），您可以将它们用作普通`int`s，并将循环变量每个增加 1时间，直到它等于 last`enum`的值。这在[这个 SO question](https://stackoverflow.com/questions/261963/c-iterate-through-an-enum)中有描述。
*   如果值*没有*增加 1（例如`enum E {FIRST = 5, SECOND = 10}`，它变得更加棘手。您可以创建一个包含所有可能值的数组并使用它（这是一个糟糕的解决方案，但它有效）：

    ```
    enum E
    {
        FIVE = 5,
        TEN = 10,
        THREE = 3
    };
    E arr[3] = {FIVE,TEN,THREE};
    E iterator;
    for( int i = 0; i < 3; i++ )
    {
        iterator = arr[i];
        //do something with it
    } 
    ```

# matlab - MATLAB simulink 设置PID参数

> ID：13155181
> 
> 赞同：1
> 
> 时间：2012-10-31T09:49:14.753
> 
> 标签：matlab, simulink

我正在尝试为植物建模： 22.8/(s^2-3270) 。现在我想为此实现一个 PID 控制器。所以我打算遵循齐格勒尼科尔的方法。通过将 Kp 设置为 145，我得到持续振荡的时间周期约为 1s 通过将 Kp 设置为 144，我得到持续振荡的时间周期约为 5s 通过将 Kp 设置为 143.5，我得到持续振荡的时间周期约为对于 Kp 小于 143 的 30 秒，我没有得到任何振荡，但是通过将 Kp 微小地改变到 143.5 以下，时间段似乎显着增加。那么究竟如何设置 Ki 和 Kd 参数呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T19:14:37.963

`MATLAB`具有支持调整`PID`参数的 GUI。转到命令行并输入以下内容：

```
s = tf('s')

P = 22.8/(s^2 - 3270)

pidtool(P, 'pid') 
```

这将打开一个 GUI，根据默认标准（上升时间等）向您显示默认起点。您可以通过单击右侧的“参数”按钮查看默认增益值。然后，您可以更改标准以获取更新的增益值。

请注意，如果您的系统不稳定或传递函数建模不佳，这不一定有帮助。

# javascript - phonegap黑屏ios

> ID：13155185
> 
> 赞同：0
> 
> 时间：2012-10-31T09:49:33.697
> 
> 标签：javascript, ios, xcode, debugging, cordova

我想在 ios（库 2.1）中启动一个 javascript cordova 应用程序。此应用程序在 Android 中运行没有问题。但是如果我想在 ios 中启动相同的功能（我刚刚更改了 cordova javascript 库），我只有一个黑屏。它没有问题的构建。

我已经测试在 Safari 和 Firefox 浏览器中启动该应用程序，但我没有任何 javascript 错误。我已经测试了这些方法

[Phonegap - Xcode 中的 Javascript 调试](https://stackoverflow.com/questions/4827213/phonegap-javascript-debugging-in-xcode)

和这个方法

[http://jaydata.org/blog/debugging-a-phonegap-application](http://jaydata.org/blog/debugging-a-phonegap-application)

还有这个

[http://community.phonegap.com/nitobi/topics/ios_build_does_not_work_native_app_freezes_on_blank_screen_after_splash](http://community.phonegap.com/nitobi/topics/ios_build_does_not_work_native_app_freezes_on_blank_screen_after_splash)

但我没有错误，只是设备上出现黑屏。

我对 ios 的 phonegap 没有太多了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:35:46.327

最后我已经解决了创建新的cordova应用程序的问题。

# objective-c - 使用 RKInMemoryManagedObjectCache 时应用程序在 IOS6 下冻结

> ID：13155198
> 
> 赞同：1
> 
> 时间：2012-10-31T09:50:19.733
> 
> 标签：objective-c, ios6, restkit

我在 IOS5 下开发的应用程序中使用 RestKit，在升级到 IOS6 之前一切正常。现在，当我从服务器获取数据时，我发现应用程序会随机冻结 :( 我已将其范围缩小到仅在使用 RKInMemoryManagedObjectCache 时发生。但如果我禁用 RKInMemoryManagedObjectCache，我会遇到重复记录。

有没有其他人在IOS6下遇到过类似的问题？

编辑：在仪器中，我可以看到它在 RKEntityByAttributeCache 的加载方法中执行 fetchrequest 时经常冻结

# java - org.json.simple 无法解析

> ID：13155200
> 
> 赞同：16
> 
> 时间：2012-10-31T09:50:23.400
> 
> 标签：java, json

我是一个完全的java新手，我有这个问题。我尝试解码 Json，为了做到这一点，我想导入这些包：

```
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;
import org.json.simple.parser.ParseException; 
```

“无法解决导入”......这些包不再可用还是我必须做其他事情才能使它们工作？

提前谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-31T09:51:58.097

可能您的简单 json.jar 文件不在您的类路径中。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-04-05T03:01:50.587

我在我的 Spring Integration 项目中遇到了同样的问题。我在 pom.xml 文件中添加了 JSON 依赖项。这个对我有用。

```
<dependency>
  <groupId>org.json</groupId>
  <artifactId>json</artifactId>
  <version>20090211</version>
</dependency> 
```

可以在此处找到版本列表：[https ://mvnrepository.com/artifact/org.json/json](https://mvnrepository.com/artifact/org.json/json)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-04-17T15:59:54.557

尝试这个

```
<!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple -->
<dependency>
    <groupId>com.googlecode.json-simple</groupId>
    <artifactId>json-simple</artifactId>
    <version>1.1.1</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-31T09:55:27.720

jar 文件丢失。您可以下载 jar 文件并将其作为外部库添加到您的项目中。你可以从这里下载

[http://www.findjar.com/jar/com/googlecode/json-simple/json-simple/1.1/json-simple-1.1.jar.html](http://www.findjar.com/jar/com/googlecode/json-simple/json-simple/1.1/json-simple-1.1.jar.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-17T11:33:21.997

尝试在 build.gradle 依赖项中导入它

```
compile group: 'com.googlecode.json-simple', name: 'json-simple', version: '1.1' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-07T22:29:50.700

对于 vs 代码中的简单控制台程序，这对我有用：从以下位置下载 json-simple 文件： [https ://code.google.com/archive/p/json-simple/downloads](https://code.google.com/archive/p/json-simple/downloads)

解压到项目文件夹中的 lib，然后简单地引用它。

# oauth-2.0 - 跳过用户同意屏幕oauth2

> ID：13155208
> 
> 赞同：7
> 
> 时间：2012-10-31T09:50:45.537
> 
> 标签：oauth-2.0

我在我的应用程序中使用 oauth2。我正在获取谷歌用户个人资料信息。每件事都运行良好。我想知道是否有任何方法可以跳过用户同意屏幕？我想在不显示“允许访问”步骤的情况下获取访问令牌。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T09:59:03.867

不。

这就是 oAuth 的全部意义——只有在用户经过身份验证并授权您的网络应用程序使用他的信息之后，您才会获得一个令牌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-08T06:18:48.820

不，但您可以跳过第二次。

我找到了关于这个问题的很好的解释：
[Why does Google OAuth2 re-ask user for permission when I send them to auth url again](https://stackoverflow.com/questions/10508557/why-does-google-oauth2-re-ask-user-for-permission-when-i-send-them-to-auth-url-a)

# mysql - 加入表格并选择 < x 小时的条目

> ID：13155212
> 
> 赞同：2
> 
> 时间：2012-10-31T09:51:14.153
> 
> 标签：mysql, sql

我有一个 mysql 数据库，其中包含两个如下所示的表：

桌上游戏

```
id    startTime(DateTime)
1     2012-10-30... 
```

餐桌价格

```
gameID  priceTime(DateTime)   price(int)
1       2012-10-30 18:...     899
1       2012-10-28 15:...     699 
```

我正在尝试加入表格并仅在 games.startTime 前 24 小时选择价格。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:52:23.340

这将与游戏开始前 0-24 小时的价格相结合：

```
select  *
from    games g
join    prices p
on      p.gameID = g.id
        and date_sub(g.startTime, interval 24 hour) <= p.priceTime 
        and p.priceTime <= g.starttime 
```

# elasticsearch - 弹性搜索：多个查询和提升

> ID：13155215
> 
> 赞同：1
> 
> 时间：2012-10-31T09:51:32.247
> 
> 标签：elasticsearch

我想进行一个搜索，其中包含许多具有不同提升的搜索，并通过分数返回结果。我尝试如下进行搜索，我认为它工作得很好，直到我意识到只有第一个查询正在运行。

我应该如何改写它以获得所有查询运行的结果，以及按分数排序的结果，如果结果显示多个查询，分数将被加在一起？

```
[{
    "query": {
        "fuzzy": {
            "title": {
                "value": "lord",
                "boost": 20,
                "min_similarity": 0.8
            }
        }
    }
}, {
    "query": {
        "fuzzy": {
            "location": {
                "value": "london",
                "boost": 1000,
                "min_similarity": 0.8
            }
        }
    }
}, {
    "query": {
        "fuzzy": {
            "haircolour": {
                "value": "dark",
                "boost": 500,
                "min_similarity": 0.8
            }
        }
    }
}, {
    "query": {
        "fuzzy": {
            "description": {
                "value": "senior",
                "boost": 100,
                "min_similarity": 0.7
            }
        }
    }
}, {
    "query": {
        "fuzzy": {
            "description": {
                "value": "manager",
                "boost": 100,
                "min_similarity": 0.7
            }
        }
    }
}] 
```

干杯

尼克

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-31T10:21:56.683

为什么不为每个查询创建一个 bool 查询，将主查询作为 must 子句，将其他查询作为 should 子句？

它有帮助吗？

# meteor - 我无法弄清楚 Meteor {{#isolate}} 到底是什么。有没有例子？

> ID：13155220
> 
> 赞同：3
> 
> 时间：2012-10-31T09:51:45.867
> 
> 标签：meteor

我如何使用 {{#isolate}} ？

如果我用一堆模板制作一个页面，例如：

```
{{> page1}}

<template name="template1">reactive source1</template>
<template name="template2">reactive source2</template>
<template name="template3">reactive source3</template>
<template name="template4">reactive source4</template>
<template name="template5">reactive source5</template>

<template name="page1">
    {{> template1}}
    {{> template2}}
    {{> template3}}
    {{> template4}}
    {{> template5}}
</template> 
```

如果每个模板都有更新的内容，它会每次都重新渲染整个页面吗？我该如何阻止这种情况发生？

我应该`isolate`在这种情况下使用吗？

如果我将任何助手绑定到这些模板，例如：

```
Template.template1.rendered = ->
    console.log 'rendered at: ' + new Date().getTime() 
```

它至少会渲染 5 次，因为我有 5 个反应源。如果它们中的每一个都包含一个反应列表，它将被呈现 docs.length 次。

我无法控制单个模板实例。

对不起我的英语。

这是我之前在 GitHub 上发布的一个与此相关的问题：[https ://github.com/meteor/meteor/issues/435](https://github.com/meteor/meteor/issues/435)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T10:25:20.513

```
if each single template has content update it will rerender the whole page ? 
```

不，但它所有的父母的渲染事件都会被触发！实际上，渲染事件像 dom 事件一样传播。并且当特定模板中的响应式数据发生更改时，其内容及其所有子模板将被重新渲染！但不是他的父母！那么“恒定”和“孤立”是做什么的呢？我认为弄清楚它们的最好方法是做一些测试。这是一个简单的测试：html：

```
 <head>
    <title>meteor_test</title>
</head>

<body>
    {{> main}}
</body>

<template name="main">
    This is main template!
    {{> subA}}
    {{> subB}}
</template>

<template name="subA">
    <div>
        ----This is subA! Input is surrounded by "constant"!
        {{#constant}} <input /> {{/constant}}
        Reactive data: {{reactiveData}}
        {{> subA_A}}
    </div>
</template>

<template name="subA_A">
    <div>
        --------This is subA_A!
        <input type="text" />
        Reactive data: {{reactiveData}}
    </div>
</template>

<template name="subB">
    <div>
        ----This is subB! Reactive data is surrounded by "isolate"!
        <input type="text" />
        Reactive data: {{#isolate}} {{reactiveData}} {{/isolate}}
        {{> subB_A}}
    </div>
</template>

<template name="subB_A">
    <div>
        --------This is subB_A!
        <input type="text" />
        Reactive data: {{reactiveData}}
        {{> subB_A_A}}
    </div>
</template>

<template name="subB_A_A">
    <div>
        ------------This is subB_A_A!
        <input type="text" />
        Reactive data: {{reactiveData}}
    </div>
</template> 
```

js：

```
if (Meteor.isClient) {
    Template.main.rendered = function () {
        console.log('main is rendered at %s', new Date());
    };

    Template.subA.helpers({
        reactiveData: function () {
            return Session.get('subA');
        }
    });
    Template.subA.rendered = function () {
        console.log('subA is rendered at %s', new Date());
    };

    Template.subB.helpers({
        reactiveData: function  () {
            return Session.get('subB');
        }
    });
    Template.subB.rendered = function () {
        console.log('subB is rendered at %s', new Date());
    };

    Template.subA_A.helpers({
        reactiveData: function () {
            return Session.get('subA_A');
        }
    });
    Template.subA_A.rendered = function () {
        console.log('subA_A is rendered at %s', new Date());
    };

    Template.subB_A.helpers({
        reactiveData: function () {
            return Session.get('subB_A');
        }
    });
    Template.subB_A.rendered = function () {
        console.log('subB_A is rendered at %s', new Date());
    };

    Template.subB_A_A.helpers({
        reactiveData: function () {
            return Session.get('subB_A_A');
        }
    });
    Template.subB_A_A.rendered = function () {
        console.log('subB_A_A is rendered at %s', new Date());
    };
} 
```

使用 chrome's/firebug 的控制台更改会话数据，看看会发生什么。注意这些输入中输入的文本在reactive改变时是否会被清除（意味着被重新渲染）以及是否触发了渲染事件。

……对不起我的英语也^_^

# jquery - 文本区域宽度自动调整大小

> ID：13155228
> 
> 赞同：1
> 
> 时间：2012-10-31T09:52:05.177
> 
> 标签：jquery, textarea, width, resizable

当我在其中写入时，我想使用最大宽度自动调整文本区域的宽度，就像这段代码对输入所做的那样。 [http://jsbin.com/ahaxe](http://jsbin.com/ahaxe) 有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:01:46.123

你有没有试过这些可能这些可以帮助你

[http://www.jacklmoore.com/autosize](http://www.jacklmoore.com/autosize)

[http://www.technoreply.com/autogrow-textarea-plugin/](http://www.technoreply.com/autogrow-textarea-plugin/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T09:59:11.057

演示：http: [//jsfiddle.net/buM6M/1/](http://jsfiddle.net/buM6M/1/)

html:

```
<textarea id="t1" style='min-width:100px;min-height: 100px'>

</textarea>

 <div id="d1" style='max-width:200px;min-height:20px;display: none'>

</div> 
```

​​​

js代码：

```
 $("#t1").live({
keyup: function(e){

    $("#d1").text($(this).val());
    $(this).css("width", $("#d1").css("width"));
    $(this).css("height", $("#d1").css("height"));
}
});​ 
```

根据您的要求设置 div 和 textarea 的尺寸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T09:59:53.337

使用 jquery 自动增长插件。

下载[autogrowtextarea.js](http://www.technoreply.com/wp-content/uploads/2010/05/jquery.autogrowtextarea.js)并添加到脚本

并在头部添加这个 css：

```
#id_of_textarea
{
height:auto;
width:width_of_textarea_you_want
}

$(function() {
$('#id_of_textarea').autogrow();
}); 
```

为了避免滚动：

```
$('#id_of_textarea').css('overflow', 'hidden').autogrow() 
```

# internet-explorer-9 - 如果我们在完成加载之前关闭窗口，IE9 浏览器会崩溃

> ID：13155229
> 
> 赞同：3
> 
> 时间：2012-10-31T09:52:15.660
> 
> 标签：internet-explorer-9, onbeforeunload, frameset

我这里有一种情况，当我在完成加载之前关闭 IE9 浏览器窗口时，浏览器会关闭并重新打开。这会导致我的 Web 应用程序崩溃。经过对网站的一些研究，我知道这种行为是由于 IE9 中引入的“Hang Resistance”功能。作为一种解决方法，如果我在用户单击窗口关闭按钮时向用户显示信息消息等，则可以避免崩溃。在我的 html 文件中，我使用下面的代码来执行此操作。

```
<script type="text/javascript">
var doneLoading = false;
window.onbeforeunload = confirmExit;
function confirmExit()
{
    if(navigator.appVersion.indexOf("MSIE 9") != -1 && !doneLoading)
    return "Closing this window before the page is fully loaded might cause the browser to crash. ";
}
</script> 
```

'doneLoading' 是一个变量，用于指示窗口是否完成了内容的加载。

在我的应用程序中，我在包含标签的母版页中使用此逻辑。在框架集的“onload”事件中，“doneloading”变量设置为 true。现在我的问题是，上面的 Java 脚本代码并没有总是被执行，我也没有得到浏览器崩溃的 IE 警告消息。请提供一些关于为什么不总是显示此消息的输入。

# iframe - 将浏览器开发人员工具控制台上下文切换到特定 iframe

> ID：13155232
> 
> 赞同：7
> 
> 时间：2012-10-31T09:52:20.920
> 
> 标签：iframe, internet-explorer-8, console, ie-developer-tools

Chrome 有最简单的方法，只需从下拉列表中选择一个框架。Firefox 提供了`cd(frame)`不太实用的功能，但只要您愿意发现哪个框架是哪个框架，它就可以完成这项工作......

### 但是我们如何在 Internet Explorer 开发者工具中做同样的事情呢？

特别是在 IE8 中，如果这在以后的版本中发生了变化......通常的方法当然是编写这些行来访问特定框架的上下文：

```
frames[n].window.somePublicFunction(); 
```

但这似乎很麻烦，尤其是当您嵌套了`iframes`. 找到正确的框架简直是一种痛苦。

### 有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-01T09:39:43.557

如果该框架中已经存在 Javascript，则向该脚本添加一个断点。当 IE 遇到断点时，控制台将在包含设置断点的代码的框架的上下文中运行。

设置断点：

*   加载您的页面
*   打开开发者工具，进入“脚本”
*   找到要添加断点的行并单击行号左侧
*   按“开始调试”（这将重新加载您的页面 - 如果这会导致问题，您可以尝试[如何在 IE 开发人员工具中为加载时运行的代码创建断点？](https://stackoverflow.com/questions/6931366/how-do-you-create-breakpoints-in-ie-developer-tools-for-code-that-runs-while-loa)）
*   练习包含断点的代码
*   当断点被命中时，使用控制台
*   （您可以运行命令`window.location.href`以通过其中加载的页面的 URL 来查看当前窗口/框架上下文是什么。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T18:24:43.033

您可以使用该方法更改 Internet Explorer 11 中 JS 控制台的上下文`console.cd()`。

鉴于此 iframe：

```
<iframe src="http://google.com" frameborder="0" id="someIframeID"></iframe> 
```

您传递一个不带引号的 ID 或框架名称以将上下文切换到该框架。在控制台中执行此命令。

```
console.cd(someIframeID); 
```

要将上下文切换回父级，只需`console.cd();`不带任何参数调用。

参考： http: [//msdn.microsoft.com/en-us/library/ie/dn255006 (v=vs.85).aspx#console_in](http://msdn.microsoft.com/en-us/library/ie/dn255006(v=vs.85).aspx#console_in)

# android-layout - 在 Android 中管理不同的屏幕分辨率和密度

> ID：13155233
> 
> 赞同：1
> 
> 时间：2012-10-31T09:52:22.357
> 
> 标签：android-layout

我开发了一款在大多数设备上都能正常运行的应用程序，但如果在 HTC Sensation 4G（分辨率：540x960，密度：255）中运行此应用程序，布局看起来非常小。

我正在使用**android 限定符**来管理布局。首先，我使用了以下限定符，但没有得到任何结果。

drawable-hdpi、drawable-mdpi、drawable-ldpi 用于 Drawables。布局大，布局中，布局小布局。

现在我正在使用以下限定符，它看起来相当不错，但没有达到最佳水平，

drawable-hdpi、drawable-mdpi、drawable-ldpi 用于 Drawables。layout-hdpi、layout-mdpi、layout-ldpi 用于布局。

有没有人为此设备开发过任何应用程序？如何管理此设备的布局？

# asp.net - ASP.NET 中具有固定列数和水平重复方向的动态表

> ID：13155237
> 
> 赞同：1
> 
> 时间：2012-10-31T09:52:23.853
> 
> 标签：asp.net, html

我想制作一个具有固定列数的表格。DataSource 包含一个字符串列表，我想在一个简单的表格中显示这些字符串，没有边框、标题或任何其他内容，而不仅仅是纯文本。我已经尝试使用带有属性的 DataList `RepeatDirection="Horizontal"`，但我不知道如何定义列以及如何将数据源中的值绑定到每列中，如下所示：

```
Column 1          Column 2          Column 3
A                 B                 C
D                 E                 F 
```

如果有人不知道，我将制作一个简单的表格并从代码隐藏中添加列、行和内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:08:46.433

`DataGrid`或`ListView`控件是您的最佳选择。就个人而言，我更喜欢第二种。[这里](http://basgun.wordpress.com/2007/12/27/listview-control-in-aspnet-35-1/)有一个关于它的使用的例子。

使用这些控件，您只需为每一行定义一个模板并将您的数据绑定到它。您还可以为备用项目定义另一个模板，管理按列排序、分页等。

# hbase - 在 HBase 中使用单行

> ID：13155238
> 
> 赞同：0
> 
> 时间：2012-10-31T09:52:24.493
> 
> 标签：hbase

我正在通过 Java API 使用 HBase 来管理等待由具有多个线程的刮板分析的 URL 和参数列表。该程序还不断向表中添加新行。

我需要从表中连续读取一行并且仅读取一行并以原子方式删除它（两个线程不能同时读取一行），没有选择一行而不是另一行的标准。

目前，我创建了一个 Scanner 并检索了第一个结果：

```
Scan s = new Scan();
ss = t.getScanner(s);
for(Result r:ss){
  String ris=Bytes.toString(r.getRow())+Bytes.toString(r.getValue(Bytes.toBytes("TTL"),Bytes.toBytes("value")));
  //delete the retrieved row
  t.delete(new Delete(r.getRow()));
  ss.close();
  //return at the first iteration, after closing the Scanner
  return ris;
} 
```

但是该程序超慢（即获得一个值需要 10 秒或更长时间），我不知道如何很好地做到这一点。如何在 HBase 中“使用”单行？

编辑：我忘了提到该表有一个单列族

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T23:47:36.690

您可以尝试使用带过滤器的扫描。我认为[PageFilter](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/PageFilter.html)适合您的目的。

# c# - 获取属性的属性，其中属性来自已实现的接口

> ID：13155239
> 
> 赞同：1
> 
> 时间：2012-10-31T09:52:30.997
> 
> 标签：c#, generics, inheritance, attributes

如果我在接口中有许多属性，但在示例中我将只使用一个属性，因为它演示了我想要实现的目标。

```
 interface IFoo
  {
    [Bar()]
    string A { get; set; }
  }
 class Base { }
 class Foo : Base, IFoo
 {
   public string A { get; set; }
 } 
```

所以当我这样做时：

```
Foo f = new Foo();
f.A = "Value";
Attribute b = Attribute.GetCustomAttribute(f.GetType().GetProperty("A"), typeof(Bar)); 
```

我期待能够得到我的`Bar`属性的实例。其中大部分是在泛型类中完成的，我将我的属性用于验证模型，因此我不能隐式转换为接口然后在接口中获取属性的属性，因为我永远不知道接口将是什么类型或者什么类型将实现它。例如，我需要某种方法从我的实例中获取属性`Base`。

```
public void GenericMethod<T>(T instance) where T : Base
{
    //Get my instance of Bar here.
} 
```

我希望我想做的事情很清楚，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:03:59.950

这将为您提供`Bar`应用于以下类型的所有属性的所有自定义属性的列表`instance`：

```
var attibutes = instance.GetType().GetInterfaces()
                    .SelectMany(i => i.GetProperties())
                    .SelectMany(
                        propertyInfo =>
                        propertyInfo.GetCustomAttributes(typeof (BarAttribute), false)
                    ); 
```

那是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:05:30.063

该属性`Foo.A` *没有*任何属性。只有`IFoo.A`属性。您将需要使用：

```
Attribute b = Attribute.GetCustomAttribute(typeof(IFoo).GetProperty("A"), ...); 
```

您唯一可以做的另一件事是通过 显式检查接口表`f.GetType().GetInterfaceMap(typeof(IFoo))`，也许检查`f.GetType().GetInterfaces()`其中具有“A”的每个接口。

类似的东西（这很混乱）：

```
var outerProp = f.GetType().GetProperty("A");
Attribute b = Attribute.GetCustomAttribute(outerProp, typeof(BarAttribute));
if (b == null)
{
    var candidates = (from iType in f.GetType().GetInterfaces()
                      let prop = iType.GetProperty("A")
                      where prop != null
                      let map = f.GetType().GetInterfaceMap(iType)
                      let index = Array.IndexOf(map.TargetMethods, outerProp.GetGetMethod())
                      where index >= 0 && map.InterfaceMethods[index] == prop.GetGetMethod()
                      select prop).Distinct().ToArray();
    if (candidates.Length == 1)
    {
        b = Attribute.GetCustomAttribute(candidates[0], typeof(BarAttribute));
    }
} 
```

这是做什么的：

*   如果原始属性没有属性...
*   它检查类型实现了哪些接口......
*   并查看类属性实现了哪些接口属性...
*   并检查是否有一个...
*   并寻找那个属性

# mysql - MySQL更新语句基于同一张表中其他列的总和

> ID：13155241
> 
> 赞同：2
> 
> 时间：2012-10-31T09:52:38.220
> 
> 标签：mysql, sum, updates, having-clause

我不愿意输入我想出的以下代码：

```
UPDATE a_fees
SET active = 'N'
WHERE EXISTS
(
SELECT fee_id, (
audit_fees + audit_related_fees + tax_fees + other_fees
) AS total_fees
FROM a_fees
WHERE verified = 'N'
GROUP BY fee_id
HAVING total_fees < 5000); 
```

**因为**我运行这个类似的代码（如下）并且我得到了返回的表中的所有结果，这让我认为上面的这段代码将更新表中的所有记录。当我进行子选择时，它只返回我关心的部分。但是，当我添加最外层的选择语句时，它会返回整个表。

```
SELECT fee_id
FROM a_fees
WHERE EXISTS (

SELECT fee_id, (
audit_fees + audit_related_fees + tax_fees + other_fees
) AS total_fees
FROM a_fees
WHERE verified =  'N'
GROUP BY fee_id
HAVING total_fees <5000; 
```

任何关于如何为表中四列之和小于 5,000 美元的记录设置 active='N' 的建议都会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:05:12.823

如果子查询返回至少一行，则认为满足 EXISTS 条件。所以你是对的，第一个 UPDATE 可以更新表的所有记录。

您应该使用 IN 子句而不是 EXISTS，并且也不需要使用 GROUP BY 子句，因为 fee_id 是唯一的：

```
SELECT fee_id
FROM a_fees
WHERE a_fees.fee_id IN (
  SELECT fee_id
  WHERE
    verified='N' AND
    audit_fees + audit_related_fees + tax_fees + other_fees <5000); 
```

或者您应该将条件放在子查询中：

```
SELECT fee_id
FROM a_fees
WHERE EXISTS (
  SELECT fee_id
  FROM a_fees a_fees_1
  WHERE
    verified =  'N'
    AND a_fees_1.fee_id = a_fees.fee_id
    AND audit_fees + audit_related_fees + tax_fees + other_fees <5000); 
```

# macos - 在 MAC OS 中更改 SOMAXCONN 值

> ID：13155243
> 
> 赞同：1
> 
> 时间：2012-10-31T09:52:40.390
> 
> 标签：macos, boost-asio

我在 OSX 中基于 ASIO 库的代码使用的“侦听积压队列”大小等于值 SOMAXCONN。这个宏定义在 SDK 里面的 /usr/include/sys/Socket.h

我认为更改 sdk 文件不是正确的方法。那么，我应该如何将其重新定义为更高的值？

我尝试在我的项目的主文件中重新定义它，但 xcode 发出警告“宏重新定义”并且 ASIO 库代码只使用旧值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:19:55.037

我没有找到其他选择，只能在内部进行更改`/usr/include/sys/Socket.h`

# iphone - 如何为 UIToolbar 上的按钮添加滚动？

> ID：13155244
> 
> 赞同：0
> 
> 时间：2012-10-31T09:52:41.153
> 
> 标签：iphone, ios, ipad, cocoa, uitoolbar

如何为`UIBarButtonItem`按钮添加滚动`UIToolbar`（在工具栏上放置许多按钮）？

```
buttonDone = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(buttonDoneDown)];
NSArray *itemsArray = [NSArray arrayWithObjects:buttonDone, nil];
[toolbar setItems:itemsArray]; 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-04-12T14:59:14.207

对于斯威夫特

假设我想将 7 添加`UIBarButtonItem`到我的`UIToolBar`

首先创建一个scrollView，然后添加toolBar作为子视图

```
// In viewDidLoad

let scrollView = UIScrollView(frame: CGRect(x: 0, y: view.frame.height-44, width: view.frame.width, height: 50))

    let toolBar = UIToolbar(frame: CGRect(x: 0, y: 0, width: 1000, height: scrollView.frame.height))

    let btn1 = UIBarButtonItem()
    let btn2 = UIBarButtonItem()
    let btn3 = UIBarButtonItem()
    let btn4 = UIBarButtonItem()
    let btn5 = UIBarButtonItem()
    let btn6 = UIBarButtonItem()
    let btn7 = UIBarButtonItem()
    toolBar.items = [btn1, btn2, btn3, btn4, btn5, btn6, btn7]

scrollView.addSubview(toolBar)

// The below line is important for scrollView to work
scrollView.contentSize = CGSize(width: 1000, height: 50) 
```

最后添加 scrollView 作为你的 textField inputAccessoryView

```
textField.inputAccessoryView = scrollView 
```

我希望它可以帮助你:]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T12:22:05.723

替换工具栏的superView：

```
buttonDone = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(buttonDoneDown)];
NSArray *itemsArray = [NSArray arrayWithObjects:buttonDone, nil];

UIScrollView *scrollView = [[UIScrollView alloc] init];
scrollView.frame = toolbar.frame;
scrollView.bounds = toolbar.bounds;
scrollView.autoresizingMask = toolbar.autoresizingMask;
scrollView.showsVerticalScrollIndicator = false;
scrollView.showsHorizontalScrollIndicator = false;
//scrollView.bounces = false;
UIView *superView = toolbar.superview;
[toolbar removeFromSuperview];
toolbar.autoresizingMask = UIViewAutoresizingNone;
toolbar.frame = CGRectMake(0, 0, X, toolbar.frame.size.height);
toolbar.bounds = toolbar.frame;
[toolbar setItems:itemsArray];
scrollView.contentSize = toolbar.frame.size;
[scrollView addSubview:toolbar];
[superView addSubview:scrollView]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-29T10:56:26.527

快速版本

```
func addToolBar(textField: UITextView){
    let toolBar = UIToolbar()
    toolBar.barStyle = UIBarStyle.default
    toolBar.isTranslucent = true
    toolBar.tintColor = UIColor(red: 76/255, green: 217/255, blue: 100/255, alpha: 1)
    let bold = UIBarButtonItem(image: #imageLiteral(resourceName: "download 12.01.19.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(boldFunc))
    let italic = UIBarButtonItem(image: #imageLiteral(resourceName: "italic-png-image-54776.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(italicFunc))
    let underlined = UIBarButtonItem(image: #imageLiteral(resourceName: "underlined_font-512.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(underlineFunc))
    let strikeThrough = UIBarButtonItem(image: #imageLiteral(resourceName: "Strikethrough_font_awesome.svg.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(strikeFunc))
    let size = UIBarButtonItem(title: "\(fontSize)", style: UIBarButtonItemStyle.done, target: self, action: #selector(changeSize))
    let textColor = UIBarButtonItem(image: #imageLiteral(resourceName: "text_color1600.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(changetextColor))
    let backgroundColor = UIBarButtonItem(image: #imageLiteral(resourceName: "background color.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(changebackgroundColor))
    let textLeft = UIBarButtonItem(image: #imageLiteral(resourceName: "left-27877_960_720.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(alignLeft))
    let textRight = UIBarButtonItem(image: #imageLiteral(resourceName: "align_right_filled1600.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(alignRight))
    let textCenter = UIBarButtonItem(image: #imageLiteral(resourceName: "center.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(alignCenter))
    let pic = UIBarButtonItem(image: #imageLiteral(resourceName: "add.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(appendPic))
    let bulletpoint = UIBarButtonItem(image: #imageLiteral(resourceName: "bulletpoint.png"), style: UIBarButtonItemStyle.done, target: self, action: #selector(makeBulletpoints))
    toolBar.setItems([bold, italic, underlined, strikeThrough, size, textColor, backgroundColor, textLeft, textRight, textCenter, pic, bulletpoint], animated: false)
    toolBar.isUserInteractionEnabled = true
    toolBar.sizeToFit()
    toolBar.frame = CGRect(x: 0, y: 0, width: 33 * 12, height: toolBar.frame.size.height)
    textField.delegate = self
    //////////try to add a scroll view
    let scrollView = UIScrollView()
    scrollView.frame = toolBar.frame;
    scrollView.bounds = toolBar.bounds;
    scrollView.autoresizingMask = toolBar.autoresizingMask;
    scrollView.showsVerticalScrollIndicator = false;
    scrollView.showsHorizontalScrollIndicator = false;
    scrollView.contentSize = toolBar.frame.size;
    scrollView.addSubview(toolBar)
    textField.inputAccessoryView = scrollView
} 
```

当你计算宽度时

```
toolBar.frame = CGRect(x: 0, y: 0, width: 33 * 12, height: toolBar.frame.size.height) 
```

宽度将取决于您使用的按钮的大小。我有 12 个按钮，按钮上的所有图像都是 25 x 25，并且有一个带有文本的按钮。首先我写了 25 x 12 但它们不适合，我认为自动添加了一些边距，我没有详细说明如何计算按钮的大小，所以我只是尝试直到找到数字对我来说效果很好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-31T09:56:32.423

创建一个 UIScrollView，根据您的要求设置它的 contentSize 将其添加为 UIToolbar 上的子视图。在 UIScrollView 上添加尽可能多的按钮并享受滚动...

# php - 图像验证在 IE 中返回 -1

> ID：13155251
> 
> 赞同：1
> 
> 时间：2012-10-31T09:53:05.313
> 
> 标签：php, javascript, internet-explorer

为了在 IE 中验证图像，我使用此代码

```
var pic = document.getElementById('photo').value;
$('#image').attr('src',pic);
var imgbytes = document.getElementById('image').fileSize; 
```

但是 imgbytes 一直在返回 -1。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:01:04.377

很可能是因为当您查询文件大小时，图像还没有来得及加载。您可以通过切换到具有如下回调的异步模型来验证并解决此问题：

```
var img = document.getElementById('image');

img.onload = function() {
    var imgbytes = img.fileSize;
    alert(imgbytes);
};

img.src = document.getElementById('photo').value; 
```

# pdf - 生成的 PDF/A 尺寸非常大

> ID：13155254
> 
> 赞同：2
> 
> 时间：2012-10-31T09:53:18.657
> 
> 标签：pdf, pdfa, ecrion

我们有生成 PDF 文档的系统（使用 Ecrion 引擎）。我们正在使用 Times 字体。现在需要文档归档，所以我们正在从 PDF 切换到 PDF/A 并将我们的字体从 Times 更改为 Times New Roman（相同的字体）。这就是问题出现的地方——每个 PDF/A 还包括使用的字体（因为 PDF/A 是用于存档的 PDF，所以它与字体一起出现）。问题是每个文档现在都包含“Times New Roman”、“Times New Roman Italic”、“Times New Roman Bold”字体，这会导致文档大小增加 1.5MB 甚至更多，因为每个文档的重量约为 600KB。这听起来不合理。是否有其他一些较小的字体或亲人如何处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T17:47:13.893

据我所知，不需要在 PDF/A 兼容文档中包含完整的字体文件。只需要嵌入实际使用的字形。

即使是整个代码页（255 个字形）与所有可能的代码页（65K 个字形）都可以产生影响。

因此，您可能希望找到一种在 Ecrion 中启用此类行为的方法，或者尝试使用一些其他软件，这些软件可以仅嵌入使用过的字形或可以从现有 PDF/A 中删除未使用的字形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T14:02:46.857

正如 Bobrovsky 所说，您可以对嵌入字体进行子集化，请参阅[http://www.ecrion.com/products/xfrenderingserver/xfultrascalehelp/page_settings.htm](http://www.ecrion.com/products/xfrenderingserver/xfultrascalehelp/page_settings.htm)

相关选项似乎是：`pdf-embed-true-type-fonts=subset`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-30T00:15:04.190

默认情况下，Ecrion 引擎确实会执行字体子集设置。然而，随着 Microsoft 广告更多脚本（其他语言的字符）、提示信息（如何在各种分辨率上绘制字体）、连字信息（例如，字符如何组合成单个字符），字体文件的大小随着 Windows 的每个版本而增长许多字体中的 f 和 i 组合形成 'fi'[连字](https://en.wikipedia.org/wiki/Typographic_ligature)）等等。即使只有一部分字体嵌入在最终的 PDF 中，也可能仍然很大。

一个简单的解决方案是使用没有所有这些信息的“旧”字体。在 C:\Windows\Fonts 中查找字体，例如旧版本 Windows（例如 Windows XP 或 Windows Server 2003）中的 times.ttf，并将其复制到计算机的文件夹中（例如 C:\MyFonts）。然后，将该文件夹安装为 Ecrion 中的[私有字体](https://www.ecrion.com/help/products/xfrenderingserver/xfultrascalehelp4/private_fonts.htm)。

# java - 使用 pico 容器设置多个装饰器

> ID：13155256
> 
> 赞同：1
> 
> 时间：2012-10-31T09:53:28.047
> 
> 标签：java, dependency-injection, adornerdecorator, picocontainer

我一直在使用 java 中的 pico 容器为我设计的 minecraft 插件框架做 DI。

插件具有在接口中定义的事件侦听器方法，每个接口一个方法。

如果一个特定的类在玩家加入和离开服务器时想要事件，它实现了两个特定的接口；在这种情况下 IPlayerLoginEvent 和 IPlayerQuitEvent。

然后我在框架中有一个类，它将每种类型的事件接口作为构造函数注入的参数。

这个容器类被标记为@Listener 以便craftbukkit 服务器软件调用它。

包装类使用特定于框架的类包装craftbukkit 发送的数据，至少在理论上，可以编写与服务器无关的插件。

小例子：

插件 AwesomePlugin 有一个实现 IPlayerLoginEvent 和 IPlayerQuitEvent 的 PlayerHandler 类。然后，框架需要构造每个类“PlayerLogin”和“PlayerQuit”的实例，将 PlayerHandler 作为构造函数参数传入。PlayerLogin 和 PlayerQuit 实例将依次向 CraftBukkit 注册为事件侦听器。

目前使用 pico 实现的方式可以在这里看到：

[https://github.com/Runsafe/Framework/blob/master/src/no/runsafe/framework/event/EventEngine.java#L32](https://github.com/Runsafe/Framework/blob/master/src/no/runsafe/framework/event/EventEngine.java#L32)

该代码确实看起来很糟糕，我无法为这种情况找到更优雅的解决方案，所以我现在恳求您的指导:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T19:10:48.923

好吧，我不太明白你的问题，但我可以解释一些 pico 事件模式。

首先，事件是以容器为中心的，你不会仅仅使用 pico 来连接事情。每个事件消费者都被添加到容器中。每个消费者必须实现至少一种方法来获取事件 obj。您可以有一个带有通用事件类传递的接口，也可以有多个用于不同事件类型的接口。

因此，您在容器中有一个消费者列表（或多个事件类型的多个列表）您可以将消费者列表注入某个事件广播器对象（显然每次创建容器时完成一次，广播器以某种方式从某处接收事件，然后只需遍历列表并调用相关的事件处理程序方法）或只是进行容器自定义生命周期调用（可以随时完成并触发运行时添加的消费者，调用工作由容器自己完成）

有时您甚至可能希望为每个事件创建新的事件容器，添加事件 obj 和所有相关的消费者。

Waffle 框架包含 pico 容器杂耍、事件处理等的最佳示例。

# iphone - NSXMLParser 没有在 iPhone 中添加所有对象？

> ID：13155259
> 
> 赞同：0
> 
> 时间：2012-10-31T09:53:36.243
> 
> 标签：iphone, xcode, xml-parsing, nsxmlparser

当我尝试使用 NSXMLParser 解析 XML 文件时，我无法解析所有元素.. XML 响应如下所示：

```
<AList>
   <Details>
          <AId>1</AId>
          <Date>10/31/2012</Date>
          <Time>11:00 AM</Time>
       <User>
          <Employee>
              <Name>Rosy</Name>
              </Employee>
              <Company>
                  <Customer>
                     <CustName>Williams</CustName>
                     <CustPhone>1232322</CustPhone>
                 </Customer>
             </Company>
       </User>
  </Details>
<Details>
          <AId>2</AId>
          <Date>10/31/2012</Date>
          <Time>11:30 AM</Time>
       <User>
          <Employee>
              <Name>Mary</Name>
              </Employee>
              <Company>
                  <Customer>
                     <CustName>Christopher</CustName>
                     <CustPhone>123233323</CustPhone>
                 </Customer>
             </Company>
       </User>
  </Details>
</AList> 
```

如何获取所有 XML 标记中的所有元素？

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {

if([elementName isEqualToString:@"AList"])
{
    arr=[[NSMutableArray alloc] init];

}
    if([elementName isEqualToString:@"Details"]||[elementName isEqualToString:@"User"])
    {
        drr=[[NSMutableDictionary alloc] init];
    }

srr=[[NSMutableString alloc] init];

} 

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

    [srr appendString:string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

    if([elementName isEqualToString:@"AId"])
    {

        [drr setObject:srr forKey:@"AId"];
        [srr release],srr=nil;
        return;
    }  

    if([elementName isEqualToString:@"Date"])
    {

        [drr setObject:srr forKey:@"Date"];
        [srr release],srr=nil;
       return;    
    }
    if([elementName isEqualToString:@"Time"])
    {

        [drr setObject:srr forKey:@"Time"];
        [srr release],srr=nil;
     return;      
    }
    if([elementName isEqualToString:@"Name"])
    {

        [drr setObject:srr forKey:@"Name"];
        [srr release],srr=nil;
        return;
    }
        if([elementName isEqualToString:@"CustName"])
    {
        [drr setObject:srr forKey:@"CustName"];
        [srr release],srr=nil;

       return;
    }

    if([elementName isEqualToString:@"CustPhone"])
    { 
        [arr addObject:drr]; 

    }    

    if([elementName isEqualToString:@"AList"])
    {

        [drr release];

    }

    [srr release],srr=nil;

} 
```

我不想要 CustPhone...我只能从我编写的代码中获取 CustName。我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:26:49.580

请更改此

```
 if([elementName isEqualToString:@"Details"]||[elementName isEqualToString:@"User"])
    {
        drr=[[NSMutableDictionary alloc] init];
    } 
```

至

```
 if([elementName isEqualToString:@"Details"])
    {
        drr=[[NSMutableDictionary alloc] init];
    } 
```

当找到客户电话元素时，您正在将字典添加到数组中。您正在分配字典两次。当找到“**详细信息**”和“**用户**”标签时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T09:56:41.307

您可以参考链接[http://wiki.cs.unh.edu/wiki/index.php/Parsing_XML_data_with_NSXMLParser](http://wiki.cs.unh.edu/wiki/index.php/Parsing_XML_data_with_NSXMLParser)。希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:02:14.080

您的 < /Alist> TAG 与 <AList> - **'L'**不同。否则 NSXMLParser 可以轻松地在`didFoundCharacters`委托中为您正确解析所有其他标签数据。

这是您在字符串比较中的问题

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {

if([elementName isEqualToString:@"AList"]) // in ur xml it is Alist
{

    [drr release]; 
```

}

# ruby-on-rails - 来自云端的动态内容 - 我可以从 Rails 中放置 API 结果 (JSON) 吗？

> ID：13155260
> 
> 赞同：6
> 
> 时间：2012-10-31T09:53:45.307
> 
> 标签：ruby-on-rails, amazon-web-services, caching, amazon-cloudfront

我看到 CloudFront 支持动态内容。

谁能指导我如何在 Rails 中执行此操作？例如，我有 api.test.com/popular.json，我希望最好从 CloudFront 提供它，但可能每隔几个小时更新一次。

对于静态资产，我已经能够使用 Rails 的asset_host 设置来做到这一点。但是我还没有找到足够的关于动态内容的指南。任何指针都会很有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-09T17:02:31.483

您无需将您的 rails 应用程序与 CloudFront 集成。相反，您可以设置 CloudFront 以缓存您的网站：

1.  转到 AWS 控制台并添加新的 CloudFront 分配
    *   **网络**交付方式
    *   **来源域名**：`myexistingdomain.com`

您可以保留所有默认值。可以设置最小/默认/最大 TTL 选项以强制执行特定的缓存时间，这可能是必要的，具体取决于您的服务器设置。

2.  在`myexistingdomain.com`，您必须设置`Access-Control-Allow-Origin`标头以包含您的 Cloudfront 分配的域名。

您可能已经体验过，CloudFront 上的大多数更新或添加源通常需要大约 20 分钟，因此请耐心等待。

此外，如果您需要在您的 rails 应用程序中使用查询参数、cookie 或特殊标头，则必须将它们包含在您的 CloudFront 分配的缓存设置中。请注意，这会降低分发的效率。

# javascript - 键入时转换为大写，有一些延迟

> ID：13155261
> 
> 赞同：11
> 
> 时间：2012-10-31T09:53:51.883
> 
> 标签：javascript, jquery, css

我在输入时使用以下代码转换为大写。

```
 $(".input_capital").live('keypress', function(e)
      {
        var defaultStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        var checkstr = $(this).val();
        var str1 = '';
        for (i = 0; i < checkstr.length; i++)
        {
            var ch = checkstr.charCodeAt(i);
             if (ch>=97 && ch<=122){
                str1 += defaultStr.charAt(ch-97);
             }else{
                str1 += checkstr.charAt(i);
              }
        }
        $(this).focus();
        $(this).val(str1);
     }); 
```

以及以下代码

```
 $(".input_capital").live('keypress', function(e)
  {
       $(this).val($(this).val().toUpperCase());
  }); 
```

所有这些上面的代码工作正常。但是对于能够在一段时间内查看小写字母的用户。之后只有它转换为大写。

我尝试`text-transform: uppercase`在 css 中使用 ''。但它不适用于带有 Android 操作系统的三星标签。请任何人帮助我通过脚本实现这一目标。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-11-25T13:46:41.327

`Note: This answer is without delay..if you like to avoid Jquery`

尝试

```
<input type="text" style="text-transform: uppercase"> 
```

[演示 - JSFiddle](http://jsfiddle.net/oneofthelions/z45ygobL/)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-10-31T10:11:51.953

你可以试试：

```
$(".input_capital").on('keydown', function(evt) {
  $(this).val(function (_, val) {
    return val + String.fromCharCode(evt.which).toUpperCase();
  });

  return false;
});​ 
```

[http://jsfiddle.net/5gLyX/](http://jsfiddle.net/5gLyX/)

它有一些缺陷，但我认为这个想法很明确，可以在此基础上进行构建。

* * *

**更好的版本**，但请注意`input`IE<9 中不支持的事件。

```
$('.input_capital').on('input', function(evt) {
  $(this).val(function(_, val) {
    return val.toUpperCase();
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<textarea class='input_capital' rows='8'></textarea>
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-31T10:05:24.080

如果您不关心 ie<9 ，请听“输入”事件

```
$(".input_capital").bind("input", function(e){
   this.value = this.value.toUpperCase();
}); 
```

对于 IE<9，请改用“keyup”

演示：http: [//jsfiddle.net/MupXZ/6/](http://jsfiddle.net/MupXZ/6/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T10:27:40.573

如何使用 keyup 而不是 keypress。

```
$(".input_capital").live('keyup', function(e)
  {
       $(this).val($(this).val().toUpperCase());
  }); 
```

因此，一旦松开键，最后一个字母就会改变。

像这样：http: [//jsfiddle.net/mNVXK/](http://jsfiddle.net/mNVXK/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-31T10:01:30.167

为什么你不添加这一行

```
$(this).val($(this).val().toUpperCase()); 
```

以前`$(this).focus();`？并使用`on()`而不是`live()`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-31T10:34:54.253

扩展[@Yoshi的答案](https://stackoverflow.com/a/13155583/887539)

> ### 这个扩展负责：
> 
> **退格：** `8`
> **Tab：** `9`
> **Enter：** `13`
> **箭头键：** `37,38,39,40`

```
$(".input_capital").bind('keydown', function(event) {
    if ( $.inArray( event.keyCode, [8,9,13,37,38,39,40]) === -1 ) {
        $(this).val(function(i, val) {
            return val + String.fromCharCode(event.keyCode).toUpperCase();
        });
        return false;
    }
}); 
```

使用`bind`原因[OP](https://stackoverflow.com/q/13155261/887539)正在使用`jQuery 1.5.1`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-31T09:59:04.113

**尝试：**

```
$(".input_capital").live('keypress', function(e) {
    setInterval("$(this).val($(this).val().toUpperCase())",100);      
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-22T20:28:34.410

对于那些使用更高版本的 jquery 的用户，请使用 on 替换 live。例如。

```
 $(".input_capital").live('keyup', function(e)  {
   $(this).val($(this).val().toUpperCase());
}); 
```

就是现在

```
$(".input_capital").on('keyup', function(e)  {
   $(this).val($(this).val().toUpperCase());
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-29T12:00:48.273

js

```
$('.input_capital').on('blur', function(evt) {
  $(this).val(function (_, val) {
    return val.toUpperCase();
  });
}); 
```

html

```
<input type="text" class="input_capital" style="text-transform: uppercase" /> 
```

按照这个：http: [//jsfiddle.net/5gLyX/389/](http://jsfiddle.net/5gLyX/389/)

# cakephp-2.1 - cakephp 2.2 测试与夹具 droptables 错误选项创建数据库错误完整性违规

> ID：13155262
> 
> 赞同：2
> 
> 时间：2012-10-31T09:53:52.057
> 
> 标签：cakephp-2.1

我正在尝试为使用 2.2 版开发的 cakephp 项目创建测试用例。

我已经使用 auth 组件完成了登录功能。

我已经创建了夹具来从我创建的测试数据库中导入表数据。

我模拟了 auth 组件来测试我的登录功能。

当我传递`invalid`用户名和密码时，我收到了消息

> “无效的用户名或密码。请重试。”

就像我传递`valid`用户名和密码时一样，它会给出相同的消息。在进一步调查我的表也从我的测试数据库中删除。所以我`"dropTable = " false`在这种情况下使用公共变量在运行我的控制器测试用例时得到以下错误：

> “错误：SQLSTATE [23000]：完整性约束违规：1062 键 'PRIMARY' 的重复条目 '1'”

# c# - 无法将图像存储在数据表中

> ID：13155265
> 
> 赞同：-1
> 
> 时间：2012-10-31T09:54:02.357
> 
> 标签：c#, asp.net, image, datatable

嗨，我有 Web 应用程序，我需要将图像存储到 datatble 的一列中，但是这样做时出现错误。这是我为此尝试的代码。

```
DataTable dt = new DataTable();

dt.Columns.Add("Companyaddress", typeof(System.String));
dt.Columns.Add("CompEmail", typeof(System.String));
dt.Columns.Add("CompTelephone", typeof(System.String));
dt.Columns.Add("logoname", typeof(byte[]));
//dt.Columns.Add("logoname", typeof(System.Byte[]));

for (int rowNumber = 0; rowNumber < imageDataSet.Tables[0].Rows.Count; rowNumber++)
{
    imageDataSet.Tables[0].Rows[rowNumber]["logoname"] = GetByteArray("abc.jpg");
    dt.Rows.Add(imageDataSet.Tables[0].Rows[rowNumber][0].ToString(), 
                imageDataSet.Tables[0].Rows[rowNumber][1].ToString(), 
                imageDataSet.Tables[0].Rows[rowNumber][2].ToString(), 
                imageDataSet.Tables[0].Rows[rowNumber][3].ToString());
 } 
```

得到错误

> 值的类型与列类型不匹配无法存储在 logoname 列中。预期类型为 Byte[]。

在这条线上

```
dt.Rows.Add(imageDataSet.Tables[0].Rows[rowNumber][0].ToString(), imageDataSet.Tables[0].Rows[rowNumber][1].ToString(), imageDataSet.Tables[0].Rows[rowNumber][2].ToString(), imageDataSet.Tables[0].Rows[rowNumber][3].ToString()); 
```

这是我调用以获取图像的功能

```
private byte[] GetByteArray(String strFileName)
{
    System.IO.FileStream fs = new System.IO.FileStream(strFileName, System.IO.FileMode.Open);
    // initialise the binary reader from file streamobject
    System.IO.BinaryReader br = new System.IO.BinaryReader(fs);
    // define the byte array of filelength

    byte[] imgbyte = new byte[fs.Length + 1];
    // read the bytes from the binary reader

    imgbyte = br.ReadBytes(Convert.ToInt32((fs.Length)));
    // add the image in bytearray

    br.Close();
    // close the binary reader

    fs.Close();
    // close the file stream
    return imgbyte;
} 
```

该怎么办？需要帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:02:19.647

问题是您添加数据表行的方式。

你应该使用：

```
dt.Rows.Add(imageDataSet.Tables[0].Rows[rowNumber][0].ToString(),
    imageDataSet.Tables[0].Rows[rowNumber][1].ToString(), 
    imageDataSet.Tables[0].Rows[rowNumber][2].ToString(), 
    imageDataSet.Tables[0].Rows[rowNumber][3] as byte[]); 
```

由于您的第 3 列对应于字节数组字段，您可以将其转换为`byte[]`类型。之前您正在使用`.ToString`该方法，而该方法需要一个`byte[]`类型参数。因此例外。

[为清楚起见，您可以使用DataTable.NewRow](http://msdn.microsoft.com/en-us/library/system.data.datatable.newrow.aspx)将循环重写为：

```
for (int rowNumber = 0; rowNumber < imageDataSet.Tables[0].Rows.Count; rowNumber++)
{
    imageDataSet.Tables[0].Rows[rowNumber]["logoname"] = GetByteArray("abc.jpg");
    DataRow dr = dt.NewRow();
    dr["Companyaddress"] = imageDataSet.Tables[0].Rows[rowNumber][0].ToString();
    dr["CompEmail"] = imageDataSet.Tables[0].Rows[rowNumber][1].ToString();
    dr["CompTelephone"] = imageDataSet.Tables[0].Rows[rowNumber][2].ToString();
    dr["logoname"] = imageDataSet.Tables[0].Rows[rowNumber][3] as byte[];
    dt.Rows.Add(dr);
} 
```

# java - 在 maven 项目中将战争部署到 glassfish 服务器后，石英作业没有被触发

> ID：13155267
> 
> 赞同：2
> 
> 时间：2012-10-31T09:54:12.997
> 
> 标签：java, maven, quartz-scheduler, scheduler

那么在`web.xm`li 中添加了侦听器，并且在其 contextInitialized 中我写了：

```
JobDetail jd = new JobDetail("myjob", Scheduler.DEFAULT_GROUP, Myclasstobe triggered.class); CronTrigger tr = new CronTrigger("myCronTrigger", Scheduler.DEFAULT_GROUP, "0 00 12 ? * MON-FRI"); 
scheduler.scheduleJob(jd, tr); 
```

并且在`Myclasstobetriggered`我已经覆盖了我的任务被写入完成的执行方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:15:58.033

GlassFish 支持 EJB 3.1，它具有[`@Schedule`](http://docs.oracle.com/javaee/6/api/javax/ejb/Schedule.html). 因此，如果您在 Java EE 6 容器上部署，我建议使用标准工具。

```
@Singleton
public class TimerService {
    @EJB
    HelloService helloService;

    @Schedule(second="*/1", minute="*",hour="*", persistent=false)
    public void doWork(){
        System.out.println("timer: " + helloService.sayHello());
    }
} 
```

（[抄自亚当比恩](http://www.adam-bien.com/roller/abien/entry/simplest_possible_ejb_3_16)）

另请查看[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)。

# java - 如何从netbeans在码头上部署netbeans .war

> ID：13155268
> 
> 赞同：0
> 
> 时间：2012-10-31T09:54:15.987
> 
> 标签：java, jakarta-ee, netbeans, jetty, jax-rs

我在 netbeans 中创建了一个在 glassfish 上成功测试的 web 服务，它使用 POST 并返回结果如下：

```
@Path("caas")
public class Cribservice {
    @Context
    private UriInfo context;
    public Cribservice() {
        TimeZone theTz = TimeZone.getTimeZone("UTC");
     }
    @POST
    @Path("/post")
    @Consumes(MediaType.TEXT_PLAIN) 
    public void setJson(String p) {
        String x = p;
        System.out.println(x);
        run(x);
    }
    @POST
    @Path("/postid")
    @Consumes(MediaType.TEXT_PLAIN)
    @Produces(MediaType.TEXT_PLAIN)
    public String halloween(String p){
        int sizy;
     return some string;
    }
} 
```

我没有任何 web.xml 但使用 ApplicationConfig.java

```
@javax.ws.rs.ApplicationPath("webresources")
public class ApplicationConfig extends Application {

    public Set<Class<?>> getClasses() {
        return getRestResourceClasses();
    }

    /**
     * Do not modify this method. It is automatically generated by NetBeans REST support.
     */
    private Set<Class<?>> getRestResourceClasses() {
        Set<Class<?>> resources = new java.util.HashSet<Class<?>>();
        resources.add(cribservice.Cribservice.class);
        return resources;
    }

} 
```

> 我试图通过netbeans在localmachine上的码头上部署这个应用程序，但我无法访问我的服务，当我访问localhost：8080 / caas时，我只能看到本地浏览器上的helloworld

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:52:18.663

因此，在使用 netbeans 在码头上部署项目之前。首先确保您拥有所有相关的 jetty-web.xml 和其他必需文件。

为了生成这些文件，为netbeans安装码头插件，从互联网下载码头服务器创建一个新项目，选择码头作为服务器并将其指向码头的位置。然后创建您的项目，在将生成的 .war 粘贴到 /webapps 文件夹后对其进行测试和部署

# android - 如何控制Bundle null 与否？

> ID：13155270
> 
> 赞同：0
> 
> 时间：2012-10-31T09:54:20.997
> 
> 标签：android, android-intent

我的应用程序中有 3 个活动，并且我正在使用捆绑包和不带捆绑包进行活动，并且我正在尝试检查捆绑包是否为空。如果为空，则打开活动，如果不为空，则将值写入edittext。

这是我的代码。

```
Bundle veriAl = getIntent().getExtras();

EditText who_detail = (EditText)findViewById(R.id.who_detail);
String gelen_deger = veriAl.getString("reply_user").toString();

if(gelen_deger.equals(""))
{
   who_detail.setText(veriAl.getString("reply_user"));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T09:57:00.200

尝试这个 ：

```
if(veriAl != null){
String gelen_deger = veriAl.getString("reply_user").toString();
}else{
//you got null from bundle
//open other activity here 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:59:23.727

利用：

```
String gelen_deger="";
if(veriAl != null && veriAl.containsKey("reply_user")) gelen_deger = veriAl.getString("reply_user").toString(); 
```

# asp.net - 使用 stringbuilder 显示 asp 图表控件

> ID：13155276
> 
> 赞同：0
> 
> 时间：2012-10-31T09:54:56.217
> 
> 标签：asp.net

我想在我的网页中创建动态图表。我使用 stringbuilder 但我在页面上看不到图表。你能帮忙怎么做吗？

```
StringBuilder builderchart = new StringBuilder();

builderchart.Append("<table>");
builderchart.Append("<tr>");
builderchart.Append("<td width=412 class=tdchart>");
builderchart.Append("<p>");
builderchart.Append("<asp:Chart ID=Chart1 runat=server><Series><asp:Series Name=Series1></asp:Series></Series><ChartAreas><asp:ChartArea Name=ChartArea1></asp:ChartArea></ChartAreas></asp:Chart>");
builder.Append("</p>");
builderchart.Append("</table>");
Literal2.Text = builderchart.ToString(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:02:27.963

您不能用于`StringBuilder`实例化控件。您可以从以下链接下载一些图表控件示例：http: [//archive.msdn.microsoft.com/mschart](http://archive.msdn.microsoft.com/mschart)

# java - 为什么第二次创建同一个线程时 BufferedReader.ready() 不起作用？

> ID：13155279
> 
> 赞同：3
> 
> 时间：2012-10-31T09:55:06.580
> 
> 标签：java

我有以下三个课程：

第一类：

```
public class System1Class {

public static void main(String args[]) throws IOException {

    while(true)   // Every 5 seconds it will create below two new threads.
    {
      System.out.println("New threads created.");
      Thread sndThreadSys1 = new Thread(new SendThreadSys1(), "SendThreadSys1");
      Thread rcvThreadSys1 = new Thread(new ReceivedThreadSys1(), "ReceivedThreadSys1");

      sndThreadSys1.start();
      rcvThreadSys1.start();

     try {
        Thread.currentThread().sleep(5000);
    } catch (InterruptedException e) {
        e.printStackTrace();
       }

    }
  }
} 
```

第 2 类：

```
public class SendThreadSys1 implements Runnable{

public void run() {

    try {
        Thread.currentThread().sleep(4000);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    String st = "BYE";
    InputStream is = new ByteArrayInputStream(st.getBytes());
    System.setIn(is);
    ReceivedThreadSys1.br = new BufferedReader(new InputStreamReader(System.in)); // refresh the br object

  }

} 
```

第 3 类：

```
public class ReceivedThreadSys1 implements Runnable{

public static BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
public void run() {

    try{
        while(true)
        {
            while(!br.ready()) // waiting for input from console/Std i/p Stream
            {
                try {
                    Thread.sleep(200);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            String s = br.readLine();
            System.out.println("Print :::"+s);
            if(s.equals("BYE"))
            {
                break;  
            }
        }

        System.out.println("I am outside.");
    }
    catch(IOException e)
    {
        e.printStackTrace();
    }   
  }
} 
```

First 类是创建线程的主类，它每 5 秒创建两个新线程。

第一个线程 (SendThreadSys1) 将在第二个线程 (ReceivedThreadSys1) 从其开始时间开始每 4 秒后通过将字符串“BYE”发送到标准 i/p 流来停止第二个线程 (ReceivedThreadSys1)。在前 4 秒内，我可以从控制台输入，并且字符串会打印在控制台中。但是在主类中第二次创建新线程后（即 5 秒后），程序没有检测到来自控制台的任何输入。

第二次未检测到来自控制台的任何输入的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:27:15.657

我尝试了您发布的代码，它似乎可以工作。但是，我确实注意到了一个可能的多线程问题，该问题可能会影响它是否始终在所有系统上工作，因此**可能**是问题所在。

在您的 SendThreadSys1 代码中，您有：

```
ReceivedThreadSys1.br = 
    new BufferedReader(new InputStreamReader(System.in)); 
```

它只是写入将在另一个线程中使用的变量。一个线程完成的写入不会自动用于另一个线程中的读取。我看不到任何明显的东西可以确保引用的对 br 的写入在另一个线程中的 run 方法读取它时可见。

如果您有一个可以重现问题的系统，我建议将 br 设为 ReceivedThreadSys1 的私有，并且仅通过静态同步 get 和 set 方法更新和访问它，即使在 ReceivedThreadSys1 中也是如此。

顺便说一句，它应该只是 Thread.sleep(5000) 等。 Thread.sleep 是一个静态方法，只能休眠调用线程。

# php - 使用 PHP rand() 预测随机数的可能性

> ID：13155281
> 
> 赞同：2
> 
> 时间：2012-10-31T09:55:08.483
> 
> 标签：php, random, security, password-protection

这是一个很长的问题，所以**简而言之**，依赖 PHP 的`rand`函数生成首次密码是否安全？

在我的空闲时间，我只是在想一个逻辑来制作非常困难的自定义密码生成器（只有数字），这是我下一个项目中可能需要的功能。

首先想到的是 PHP 的`rand()`方法。我尝试了一些测试`rand`方法来测试它的随机行为。一般来说，首先想到的是生成多个随机数并对其进行一些操作会使随机数更难猜测。我很惊讶地看到随机数的平均值非常接近使用以下程序的一半：

```
$minAvg=$maxAvg=50;
for($i=1;$i<=1000;$i++){
    //Random average
    $sum=0;
    for($j=0;$j<1000;$j++){
        $sum=$sum+rand(1,100);
    }
    $avg=$sum/1000;
    ///

    if($avg<$minAvg){
        $minAvg=$avg;
    }
    if($avg>$maxAvg){
        $maxAvg=$avg;
    }
    if($i%100==0)
    {
        echo "at i=$i, Min Avg = $minAvg and Max Avg = $maxAvg <br/>";
    }
} 
```

上述代码的一个输出是：

```
at i=100, Min Avg = 47.174 and Max Avg = 53.003
at i=200, Min Avg = 47.174 and Max Avg = 53.003
at i=300, Min Avg = 47.174 and Max Avg = 53.003
at i=400, Min Avg = 47.174 and Max Avg = 53.003
at i=500, Min Avg = 47.174 and Max Avg = 53.192
at i=600, Min Avg = 47.174 and Max Avg = 53.192
at i=700, Min Avg = 47.174 and Max Avg = 53.192
at i=800, Min Avg = 47.174 and Max Avg = 53.192
at i=900, Min Avg = 47.174 and Max Avg = 53.204
at i=1000, Min Avg = 47.174 and Max Avg = 53.204 
```

我在上面的代码至少运行了 50 次，但即使在 1000 次迭代之后，平均值始终保持在 47.xx 到 53.xx 之间（对于 1 和 100 之间的随机数）

虽然这个结果并不能说明很多，因为通常少数数字的平均值必须接近中间，但我没想到随机数会有同样的行为。**我觉得它表明 PHP 的 rand() 使用了一些固定的算法，以给定的模式生成数字。据我了解，这只是平均值保持在中间附近的合理理由。**

到目前为止，我经常使用随机数来生成第一次密码（在第一次登录时被强制更改）。但是，现在我不太担心使用随机数生成涉及金融交易和信用卡号等敏感信息（尽管已加密）的网站的首次密码是否安全。黑客（不是业余的，而是专业的黑客）有没有可能轻易破解这样的密码？最重要的是，是否有任何算法可以检测（或至少估计）下一个随机数。

**编辑** 好吧，使其更明智，用户将离线注册，例如开设银行账户，`printed first time password`并将通过 Post 发送，而不是通过电子邮件发送。所以密码必须保持在 10 个字符以下，这排除了任何加密。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:05:31.933

`rand()`不是加密强度的 RNG，但在这里没关系。

随机密码所需要的只是它应该是不可预测的，以至于随机猜测是不可行的。此属性与密码的长度和允许的字符池的关系远大于与. 的关系`rand()`。

此外，针对暴力破解的最佳防线是*在登录尝试之间引入故意延迟*。如果您这样做并拥有“合理随机”的密码，那么您绝对不会被暴力破解。

最后，在幕后`rand()`使用[线性同余生成器](http://en.wikipedia.org/wiki/Linear_congruential_generator)实现。除非服务器将大部分时间用于生成密码（非常值得怀疑），否则您可以通过切换到 来获得“更好的”随机性`mt_rand()`，这是[Mersenne Twister](http://en.wikipedia.org/wiki/Mersenne_twister)的实现（它仍然不是加密强度）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T09:59:55.177

PHP [uniqid](http://it1.php.net/uniqid)是您正在寻找的。使用示例：

```
$code = uniqid(rand(), true); 
```

请注意，有一个更安全的函数[openssl_random_pseudo_bytes()](http://it1.php.net/manual/en/function.openssl-random-pseudo-bytes.php)但它仅适用于 PHP>5.3

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T15:21:16.490

在 php 中生成安全随机数的一种相对简单的方法是`mcrypt_create_iv`使用`MCRYPT_DEV_URANDOM`as `$source`。即`mcrypt_create_iv(size, MCRYPT_DEV_URANDOM)`。然后将生成的随机字节转换为您需要的任何形式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T10:01:34.397

**在您投票之前阅读问题，然后阅读以下内容作为问题的解决方案，谢谢。**

您正在做的事情比密码可预测性更不安全，例如使用电子邮件发送“第一次”密码。

无论您坚持生成密码，还是使用发送首次自动登录 URL 的替代方法（我会推荐），您仍然需要防止 URL 的密码或密钥的可预测性。

你需要像这样很长的秘密盐（键盘随机很好） `$salt="aslkfhaqoiey19836y9qasdhkasjdhbknmxcbnzmbAkua089610"`：.

然后使用 rand() 为您的 URL 创建首次密码或密钥，但要结合 md5 和很长的盐。由于盐是秘密的，没有人可以预测 md5 会产生什么结果。

`$randomPassword=base64_encode(md5(rand().rand().$salt, true));`

# c# - 重新创建数据库后忽略挂起的迁移

> ID：13155292
> 
> 赞同：2
> 
> 时间：2012-10-31T09:55:46.930
> 
> 标签：c#, .net, entity-framework, ef-code-first, entity-framework-migrations

我们在数据库迁移中使用代码优先 EF 4.3.1。有时我们删除数据库并让 EF 重新创建它，主要用于本地开发目的。

有一个应用挂起迁移的过程，当重新创建数据库时，挂起迁移不是必需的，并且当 EF 尝试应用它们时会引发错误。

我从字符串中检查迁移日期，如果这是在数据库创建日期之前，那么我手动将其添加到 __migrationHistory 表中并且不应用迁移。

这涵盖了大多数情况，除非有人重新创建数据库、从源代码管理更新并检索数据库创建日期之前的未完成迁移。

我还尝试在 dbMigrator.Update(migration) 方法调用周围使用 try catch，但如果一个迁移失败，则不会应用更多迁移，因为它会记住异常。

有没有人找到解决这个问题的方法？

这是我写的方法：

```
private static void ApplyMigration<T, TU>()
where T : DbContext, new()
where TU : DbMigrationsConfiguration, new()
{
    var migrationsAlreadyApplied = new List<string>();
    var dbMigrator = new DbMigrator(new TU());

    var creationMigrationId = dbMigrator.GetDatabaseMigrations().Single(m => m.Contains("InitialCreate"));
    var dbDateCreated = DateTime.ParseExact(creationMigrationId.Substring(0, 12), Constants.MigrationDateFormat, CultureInfo.InvariantCulture);

    dbMigrator.GetPendingMigrations().ToList()
                                    .ForEach(migration =>
                                    {
                                        var migrationDate = DateTime.ParseExact(migration.Substring(0, 12), Constants.MigrationDateFormat, CultureInfo.InvariantCulture);

                                        if (migrationDate > dbDateCreated)
                                            dbMigrator.Update(migration);
                                        else
                                            migrationsAlreadyApplied.Add(migration);
                                    });

    using (var dbContext = new T())
    {
        foreach(var migration in migrationsAlreadyApplied)
            dbContext.Database.ExecuteSqlCommand("insert into __MigrationHistory "
                      + "select '" + migration + "', Model, ProductVersion "
                      + "from __MigrationHistory "
                      + "where MigrationId = '" + migration + "'");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T10:02:56.713

我现在已经解决了这个问题。

在我的 dbContext 初始化程序的种子方法中，我调用了一个手动填充迁移历史记录的方法。然后，您可以使用 ApplyMigrations 方法正常调用迁移。

```
public class UserEntitiesContextInitializer : CreateDatabaseIfNotExists<UserEntitiesContext>
{
    protected override void Seed(UserEntitiesContext context)
    {
        // Update migration history with existing migrations to prevent EF recognising them as pending migrations
        DatabaseAdministration.UpdateMigrationHistory<UserEntitiesContext, UserEntitiesContextConfiguration>();
    }
}

public static void UpdateMigrationHistory<T, TU>()
        where T : DbContext, new()
        where TU : DbMigrationsConfiguration, new()
    {
        using (var dbContext = new T())
        {
            var dbMigrator = new DbMigrator(new TU());

            var creationMigrationId = dbMigrator.GetDatabaseMigrations().Single(m => m.Contains("InitialCreate"));

            foreach (var migration in dbMigrator.GetPendingMigrations())
                dbContext.Database.ExecuteSqlCommand("insert into __MigrationHistory "
                                                        + "select '" + migration + "', Model, ProductVersion "
                                                        + "from __MigrationHistory "
                                                        + "where MigrationId = '" + creationMigrationId + "'");
        }
    }

private static void ApplyMigration<T, TU>()
        where T : DbContext, new()
        where TU : DbMigrationsConfiguration, new()
    {
        var dbMigrator = new DbMigrator(new TU());

        if (dbMigrator.GetPendingMigrations().Any())
            dbMigrator.Update(dbMigrator.GetPendingMigrations().Last());
    } 
```

# calendar - android日历创建错误

> ID：13155293
> 
> 赞同：4
> 
> 时间：2012-10-31T09:55:47.180
> 
> 标签：calendar, android-calendar

我正在尝试使用以下代码在 android 中添加我自己的日历。我也在清单中提供了读写权限。

我的错误是：**“创建日历时出错，名称不能为空：null”**虽然我已经提供了名称...

任何人请帮我解决它，并提供在 android 中创建日历的工作解决方案的链接。

```
 final Uri calUri = Uri.parse("content://com.android.calendar/calendars");

                    android.accounts.Account account;
                    ContentValues vals = new ContentValues();
                    vals.put("_id", 1);

                    vals.put("_sync_account_type", "ACCOUNT_TYPE_LOCAL");
                    vals.put("name","sachin" );
                    vals.put("displayName","my_Cal");
                    vals.put("color", 14417920);
                    vals.put("access_level", 700);
                    vals.put("selected", 1);

                    vals.put("sync_events", 1);
                    vals.put("timezone", "GMT");
                    vals.put("hidden", 0);
                    Uri result=  getContentResolver().insert(calUri, vals);

                    System.out.println(result); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T09:09:17.420

```
public String createCalendar(String AccountName, String CalendarName,String Color) 

{
        try {

            Uri target = Uri.parse("content://com.android.calendar/calendars");
            target = target.buildUpon()
                    .appendQueryParameter("caller_is_syncadapter", "true")
                    .appendQueryParameter("account_name", AccountName)
                    .appendQueryParameter("account_type", "com.google").build();

            // String calUriString = "content://calendar/calendars";
            ContentValues values = new ContentValues();
            values.put("name", AccountName);
            values.put("account_name", AccountName);
            values.put("account_type", "com.google");
            values.put("calendar_displayName", CalendarName);
            values.put("calendar_color", Color);
            values.put("calendar_access_level", "700");

            Uri calendarUri = getContentResolver().insert(target, values);
            Log.v("calendar Uri", calendarUri.toString());
            String newCalID = calendarUri.toString().substring(
                    calendarUri.toString().lastIndexOf("/") + 1,
                    calendarUri.toString().indexOf("?"));
            Log.v("calendar Id", newCalID);
            return newCalID;

        } catch (Exception e) {
            System.out.println(e.toString());
            return null;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T02:00:22.887

你应该尝试这样的事情：

```
vals.put(Calendar.Calendars._SYNC_ACCOUNT_TYPE, "ACCOUNT_TYPE_LOCAL");
vals.put(Calendar.Calendars.NAME,"sachin");
vals.put(Calendar.Calendars.DISPLAY_NAME,"my_Cal");
vals.put(Calendar.Calendars.COLOR, 14417920);
vals.put(Calendar.Calendars.ACCESS_LEVEL, 700);
vals.put(Calendar.Calendars.SELECTED, 1);
vals.put(Calendar.Calendars.SYNC_EVENTS, 1);
vals.put((Calendar.Calendars.TIMEZONE, "GMT");
vals.put(Calendar.Calendars.HIDDEN, 0); 
```

# windows - 使用 flex 播放 Windows 共享中的视频

> ID：13155294
> 
> 赞同：4
> 
> 时间：2012-10-31T09:55:57.127
> 
> 标签：windows, apache-flex, video, share, microsoft-distributed-file-system

我需要从企业网络内的 Windows 共享播放视频文件。使用共享是因为它在其他公司站点上复制，因此每个用户都可以从本地存储中下载视频（我们为此使用 DFS）。

视频需要在我们的门户网站上播放。所以我想用 Flex 来完成这个任务。

问题是：如何从 flex 打开 windows 共享。

如果您可以建议其他解决方案，那也很棒

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:13:47.787

您可能需要使用这样的文件路径：

```
file:///\\myserver\myfolder\myvideofile.avi 
```

如果没有，您可能需要将视频文件流式传输到您的应用程序中，如下所示：

```
private function init() : void {
    file = new File("\\myserver\myfolder\myvideofile.avi");
    fileStream = new FileStream();
    fileStream.addEventListener( Event.COMPLETE, fileComplete );
    fileStream.openAsync( file, FileMode.READ );
}

private function fileComplete( event : Event ):void { 
    fileContents = fileStream.readMultiByte( fileStream.bytesAvailable, ISO_CS ); 
    fileStream.close(); 
} 
```

如果您尝试访问 SWF 沙箱之外的内容，您可能还需要处理“跨域策略文件”。在 FLEX 中加载远程资产可能很棘手（并且是安全配置的噩梦）。

```
<?xml version="1.0"?> 
<!-- http://www.foo.com/crossdomain.xml --> 
<cross-domain-policy> 
    <site-control permitted-cross-domain-policies="by-content-type"/> 
    <allow-access-from domain="www.friendOfFoo.com"/> 
    <allow-access-from domain="*.foo.com"/> 
    <allow-access-from domain="105.216.0.40"/> 
</cross-domain-policy> 
```

[您可能需要在此处](http://help.adobe.com/en_US/Flex/4.0/UsingSDK/WS2db454920e96a9e51e63e3d11c0bf6167e-7fe9.html)阅读 Adob​​e 的跨域策略。

# java - 由 InitialContext.lookup 引起的捕获错误

> ID：13155295
> 
> 赞同：2
> 
> 时间：2012-10-31T09:56:08.083
> 
> 标签：java, error-handling, glassfish, ejb, jndi

我正在开发一个命令行客户端 (Java SE6)，它现在需要与 Glassfish 2.1 服务器通信。建立此连接的代码是

```
try {
    final InitialContext context = new InitialContext();
    final String ejbName = GeneratorCancelledRemote.class.getName();
    generatorCancelled = (GeneratorCancelledRemote) context.lookup(ejbName);
}
catch (Throwable t) {
    System.err.println("--> Could not call server:");
    t.printStackTrace(System.err);
    runWithOutEJB = true;
} 
```

我现在在没有运行服务器的情况下测试它，客户端（从 Eclipse 4.2 运行时）只是用

```
31.10.2012 10:40:09 com.sun.corba.ee.impl.transport.SocketOrChannelConnectionImpl
警告：“IOP00410201：（COMM_FAILURE）连接失败：socketType：IIOP_CLEAR_TEXT；主机名：localhost；端口：3700”
org.omg.CORBA.COMM_FAILURE：vmcid：SUN 次要代码：201 已完成：否
    在 com.sun.corba.ee.impl.logging.ORBUtilSystemException.connectFailure(ORBUtilSystemException.java:2783)
    在 com.sun.corba.ee.impl.logging.ORBUtilSystemException.connectFailure(ORBUtilSystemException.java:2804)
    在 com.sun.corba.ee.impl.transport.SocketOrChannelConnectionImpl.(SocketOrChannelConnectionImpl.java:261)
    在 com.sun.corba.ee.impl.transport.SocketOrChannelConnectionImpl.(SocketOrChannelConnectionImpl.java:274)
    在 com.sun.corba.ee.impl.transport.SocketOrChannelContactInfoImpl.createConnection(SocketOrChannelContactInfoImpl.java:130)
    在 com.sun.corba.ee.impl.protocol.CorbaClientRequestDispatcherImpl.beginRequest(CorbaClientRequestDispatcherImpl.java:192)
    在 com.sun.corba.ee.impl.protocol.CorbaClientDelegateImpl.request(CorbaClientDelegateImpl.java:184)
    在 com.sun.corba.ee.impl.protocol.CorbaClientDelegateImpl.is_a(CorbaClientDelegateImpl.java:328)
    在 org.omg.CORBA.portable.ObjectImpl._is_a(ObjectImpl.java:112)
    在 org.omg.CosNaming.NamingContextHelper.narrow（NamingContextHelper.java:69）
    在 com.sun.enterprise.naming.SerialContext.narrowProvider(SerialContext.java:134)
    在 com.sun.enterprise.naming.SerialContext.getCachedProvider(SerialContext.java:259)
    在 com.sun.enterprise.naming.SerialContext.getRemoteProvider(SerialContext.java:204)
    在 com.sun.enterprise.naming.SerialContext.getProvider(SerialContext.java:159)
    在 com.sun.enterprise.naming.SerialContext.lookup(SerialContext.java:409)
    在 javax.naming.InitialContext.lookup(InitialContext.java:392)
    在 com.werkii.latex.generator.Generator.main(Generator.java:344)
引起：java.lang.RuntimeException：java.net.ConnectException：连接被拒绝：连接
    在 com.sun.enterprise.iiop.IIOPSSLSocketFactory.createSocket(IIOPSSLSocketFactory.java:347)
    在 com.sun.corba.ee.impl.transport.SocketOrChannelConnectionImpl.(SocketOrChannelConnectionImpl.java:244)
    ... 14 更多
引起：java.net.ConnectException：连接被拒绝：连接
    在 sun.nio.ch.Net.connect（本机方法）
    在 sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:532)
    在 com.sun.corba.ee.impl.orbutil.ORBUtility.openSocketChannel(ORBUtility.java:105)
    在 com.sun.enterprise.iiop.IIOPSSLSocketFactory.createSocket(IIOPSSLSocketFactory.java:332)
    ... 15 更多

```

现在可以（虽然我仍在开发中）它会爆炸，但它会反复执行此操作并且`catch`永远不会达到该子句（即使我正在捕捉`Throwable`） - 不会打印消息。

`lookup`那么在我的程序中如何处理连接错误呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T09:59:40.373

由于您正在与 JVM 之外的 EJB 通信，因此您可能希望为初始上下文提供额外的详细信息。对于 Glassfish，请尝试

```
Properties props = new Properties();
props.setProperty(“java.naming.factory.initial”, “com.sun.enterprise.naming.SerialInitContextFactory”);
props.setProperty(“java.naming.factory.url.pkgs”, “com.sun.enterprise.naming”);
props.setProperty(“java.naming.factory.state”, “com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl”);
props.setProperty(“org.omg.CORBA.ORBInitialHost”, “127.0.0.1″);
props.setProperty(“org.omg.CORBA.ORBInitialPort”, “3700″);
InitialContext ctx = new InitialContext (props); 
```

# asp.net-mvc - MVC4 表单身份验证自定义身份转换不起作用

> ID：13155296
> 
> 赞同：4
> 
> 时间：2012-10-31T09:56:13.570
> 
> 标签：asp.net-mvc, asp.net-mvc-4, forms-authentication

[我在 mvc 中实现了 openAuth 表单身份验证，与此页面http://www.strathweb.com/2012/08/adding-openid-authentication-to-your-asp-net-mvc-4-application/](http://www.strathweb.com/2012/08/adding-openid-authentication-to-your-asp-net-mvc-4-application/)几乎相同

但是，当我不对我的动作使用属性时，我无法将其`System.Web.Security.FormsIdentity`转换为。`OpenIdIdentity``[OpenIdAuthorize]`

```
[OpenIdAuthorize]
public ActionResult Index()
{
    return View();
} 
```

如果我添加`[OpenIdAuthorize]`属性然后转换身份，它工作正常。我有一个操作应该适用于匿名用户和登录用户。但是，如果用户已登录，我想获取`OpenIdIdentity`并使用它。

问题是，`AuthorizeCore`如果我不将属性付诸行动，则不会调用 override 。

# opencv - 带有 OpenCV 2.4.2 + Visual Studio 2012 + Windows 7（64 位）异常的人脸检测示例

> ID：13155298
> 
> 赞同：2
> 
> 时间：2012-10-31T09:56:23.437
> 
> 标签：opencv, visual-studio-2012, windows-7-x64, access-violation, face-detection

我正在使用 OpenCV 示例文件夹中的以下代码在视频中进行人脸检测：

```
#include "stdafx.h"
#include "opencv2/objdetect/objdetect.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include <iostream>

using namespace std;
using namespace cv;

/** Function Headers */
void detectAndDisplay( Mat frame );

/** Global variables */
String face_cascade_name = "lbpcascade_frontalface.xml";
String eyes_cascade_name = "haarcascade_eye_tree_eyeglasses.xml";
CascadeClassifier face_cascade;
CascadeClassifier eyes_cascade;
string window_name = "Capture - Face detection";

RNG rng(12345);

/**
 * @function main
 */
int main( int argc, const char** argv )
{
  CvCapture* capture;
  Mat frame;

  //-- 1\. Load the cascade
  if( !face_cascade.load( face_cascade_name ) ){ printf("--(!)Error loading\n"); return -1; };
  if( !eyes_cascade.load( eyes_cascade_name ) ){ printf("--(!)Error loading\n"); return -1; };

  //-- 2\. Read the video stream
  capture = cvCaptureFromCAM(0);
  if( capture )
  {
    while( true )
    {
      frame = cvQueryFrame( capture );

      //-- 3\. Apply the classifier to the frame
      if( !frame.empty() )
       { detectAndDisplay( frame ); }
      else
       { printf(" --(!) No captured frame -- Break!"); break; }

      int c = waitKey(10);
      if( (char)c == 'c' ) { break; } 

    }
  }
  return 0;
}

/**
 * @function detectAndDisplay
 */
void detectAndDisplay( Mat frame )
{
   std::vector<Rect> faces;
   Mat frame_gray;

   cvtColor( frame, frame_gray, CV_BGR2GRAY );
   equalizeHist( frame_gray, frame_gray );

   //-- Detect faces
   face_cascade.detectMultiScale( frame_gray, faces, 1.1, 2, 0, Size(80, 80) );

   for( int i = 0; i < faces.size(); i++ )
    {
      Mat faceROI = frame_gray( faces[i] );
      std::vector<Rect> eyes;

      //-- In each face, detect eyes
      eyes_cascade.detectMultiScale( faceROI, eyes, 1.1, 2, 0 |CV_HAAR_SCALE_IMAGE, Size(30, 30) );
      if( eyes.size() == 2)
      {
         //-- Draw the face
         Point center( faces[i].x + faces[i].width*0.5, faces[i].y + faces[i].height*0.5 );
         ellipse( frame, center, Size( faces[i].width*0.5, faces[i].height*0.5), 0, 0, 360, Scalar( 255, 0, 0 ), 2, 8, 0 );

     for( int j = 0; j < eyes.size(); j++ )
      { //-- Draw the eyes
        Point center( faces[i].x + eyes[j].x + eyes[j].width*0.5, faces[i].y + eyes[j].y + eyes[j].height*0.5 ); 
            int radius = cvRound( (eyes[j].width + eyes[j].height)*0.25 );
            circle( frame, center, radius, Scalar( 255, 0, 255 ), 3, 8, 0 );
          }
       }

    } 
   //-- Show what you got
   imshow( window_name, frame );
} 
```

我的计算机上的 OpenCV 2.4.2 运行良好，因为我尝试了其他简单的示例并且它们运行良好。但是，当我尝试此代码时，它构建得很好。但是，当我运行它时，我收到一个未处理的异常错误：

```
Unhandled exception at 0x000007FEEF848158 (opencv_objdetect242.dll) in OpenCVTest2.exe: 0xC0000005: Access violation reading location 0x0000000000000010. 
```

我尝试逐行进入代码，当我到达该行时会调用异常：

```
if( !eyes_cascade.load( eyes_cascade_name ) ){ printf("--(!)Error loading\n"); return -1; }; 
```

我已将 xml 分类器文件包含在我的 Visual Studio 项目中。

难道我做错了什么？[或者这是在这个问题的一些评论中提到的在](https://stackoverflow.com/q/7053694/1473556)Windows 上使用人脸检测示例的一般问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T08:21:47.883

我想我是通过参考 OpenCV 安装包中提供的一些示例代码来实现的。我已将[代码粘贴在这里](http://pastebin.com/Vw00NgCt)，以供将来偶然发现此问题的任何人使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T17:23:13.570

我通过使用记事本++得到了这个工作。我将所有文件转换为 ANSI，还删除了第一行`<?xml version="1.0"?>`，然后手动重写。

# handlebars.js - 车把模板 - 附加项目

> ID：13155300
> 
> 赞同：3
> 
> 时间：2012-10-31T09:56:25.380
> 
> 标签：handlebars.js

我刚开始玩把手，我正在努力理解如何在页面加载时加载一些项目，然后在 ajax 请求上加载更多项目并使用相同的模板将它们附加到内容中。该页面正确加载了初始数据，但在第二个请求中，所有初始数据都被覆盖了。

容纳所有内容的 div 是#recipes

```
 <a href="#" id="more">Show More</a>
 <div id="recipes">

    <script id="Handlebars-Template" type="text/x-handlebars-template">
        <div id="Content">

          {{#each Recipes}}
            <div class='Box'>

                <h3>{{Name}}</h3>

            </div>
          {{/each}}
        </div>
    </script>
    </div>
    <script type="text/javascript">
    $.ajax({
        url : 'Recipe.php',
        success:function(data){
            var Recipes = JSON.parse(data);
            var Source = document.getElementById("Handlebars-Template").innerHTML;
             var Template = Handlebars.compile(Source);
            var HTML = Template({ Recipes : Recipes });
            document.getElementById('recipes').innerHTML +=HTML;
        }
    });
   </script> 
```

当用户单击“显示更多”时，将运行以下代码

```
 <script>
    $(function(){
        $('#more').click(function(e){
            $.ajax({
        url : 'Recipes2.php',
        success:function(data){
            var Recipes = JSON.parse(data);
            var Source = document.getElementById("Handlebars-Template").textContent;
             var Template = Handlebars.compile(Source);
             var HTML = Template({ Recipes : Recipes });
            $('#recipes').append(HTML);
        }
    })
        });
    });

    </script> 
```

返回的所有数据都是正确的，只是初始数据被覆盖而不是附加到。我觉得这与我的模板设置方式和对模板过程的普遍缺乏了解有关。我偶然发现了“部分”的想法，但不确定这是否是我应该使用的。任何人都可以向我展示应该如何构建这样的东西，或者向我指出一个有用的教程吗？我所看到的一切似乎都集中在替换所有数据上，或者只适用于初始加载。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T20:55:12.977

好的，我想我已经弄清楚了如何做我想做的事，但我不确定这是否是解决这个问题的最佳解决方案，或者我是否正确地做事。

我认为问题在于我的模板位于我试图附加到 ('#recipes') 的 div 中，如果我将 #recipes 移动到它自己的容器中（即模板不在其中），那么它可以工作。我不是 100% 确定引擎盖下发生了什么，但如果我将我的 html 修改为如下结构，则可以。我将把这个问题留给其他人在几天内完全解释这个问题，而不是点击我自己的答案来看看是否有人可以解释为什么会这样。

谢谢

```
<div id="recipes"></div><!--Recipes no longer encloses the template -->
    <script id="Handlebars-Template" type="text/x-handlebars-template">
          {{#each Recipes}}
            <div class='Box'>
                <h3>{{Name}}</h3>

            </div>
          {{/each}}

    </script> 
```

* ***更新看起来问题出在样式上。预期的结果在那里，但是教程中的样式使用的是绝对定位，所以看起来结果没有更新。但是还有其他问题，事实上某些内容不应该存在于模板中，因此由于覆盖最初包含模板的 innerHTML（所以在第二次运行时），一些 javascript 事件没有正确触发模板不再存在）

# sql - FORCE SCAN 可以提高查询的性能吗

> ID：13155310
> 
> 赞同：5
> 
> 时间：2012-10-31T09:56:55.427
> 
> 标签：sql, sql-server

我认为 FORCE SEEK 可以提高 SELECT 查询的性能，但想知道 FORCE SCAN 是否也可以提高查询的性能。

有人可以举例解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:02:18.257

假设您有一个查询将产生 1.000.000 行，但 SQL Server 估计只有 100 行。然后 SQL Server 估计使用表查找的 100 次索引查找比全表扫描更快。但相反，它最终会进行 1.000.000 次索引查找和查找！

在这种情况下，添加`force scan`提示将提高查询的性能。

请注意，这种情况是不寻常的。SQL Server 尝试针对最坏的情况进行优化，并且不会使用搜索，除非非常确定没有太多搜索。这就是为什么`forceseek`更经常使用的原因`forcescan`。

# gwt - PhantomJS page.open() 主体为单页 GWT Web 应用程序执行多次

> ID：13155316
> 
> 赞同：0
> 
> 时间：2012-10-31T09:57:22.087
> 
> 标签：gwt, phantomjs

我们想使用 PhantomJS 测试一个 GWT 单页 Web 应用程序。

1.  我们加载页面
2.  填写登录输入字段
3.  点击登录
4.  在超时内，查询页面上的元素并打印到控制台
5.  10s后退出

问题是第 3 步导致整个主体多次执行，这意味着我们的 page.open() 函数主体中的 console.log 语句会打印多次。

有谁知道问题是什么？我们如何让身体只执行一次？

这是产生这种行为的代码：

```
var page = require('webpage').create();

page.onConsoleMessage = function (msg) {
    console.log(msg);
};

page.open("http://gwt-web-app.com#bookmark", function (status) {

    page.evaluate(function () {
        console.log('start login');
        document.querySelector('input#username').value = 'user';
        document.querySelector('input#password').value = 'pass';
        document.querySelector('button').click();   // causes body to be executed multiple times
        console.log('end login');
    });

    window.setTimeout(function() {
        page.evaluate(function() {
            console.log('start element query');
            // query elements, and print using console.log
            console.log('end element query')
        });
    }, 4000);

    window.setTimeout(function () {
        console.log('exit');
        phantom.exit();
    }, 10000);

}); 
```

输出如下（运行后`phantomjs test_app.js`）：

```
start login
end login
start login
end login
start login
end login
start login
end login
start login
end login
start login
end login
start login
end login
start login
end login
start login
end login
start login
end login
start login
end login
start element query
end element query
start login
end login
start login
end login
start login
end login
start login
end login
start element query
end element query
start login
end login
start element query
end element query
start login
end login
start element query
end element query
start login
end login
start element query
end element query
start login
end login
start element query
end element query
start login
end login
start element query
end element query
start login
end login
start element query
end element query
start login
end login
start element query
end element query
start element query
end element query
start login
end login
start element query
end element query
start login
end login
start element query
end element query
start login
end login
start element query
end element query
start login
end login
start element query
end element query
start login
end login
start element query
end element query
start login
end login
start element query
end element query
start login
end login
start element query
end element query
start login
end login
exit 
```

# ios - 如何在单击相同的 UI 按钮时更改 UIButton 背景图像？

> ID：13155317
> 
> 赞同：0
> 
> 时间：2012-10-31T09:57:30.853
> 
> 标签：ios, objective-c, iphone, uibutton

我正在使用带有 xib backgroundImage 的**UIButton是****check_box_off.png**，同时单击 atmbtn backgroundImage 更改为**check_box_on.png**同时**NSLog**打印**yesString**并再次单击 atmbtn 没有更改 backgroundImage 相同**check_box_on.png**同时 NSLog 打印相同**yesString**仅.. 和再次叮当atmbutton同样只发生..

```
- (IBAction)atmAction:(id)sender{  
    if( [atmbtn backgroundImageForState:UIControlStateNormal] ==
        [UIImage imageNamed:@"check_box_on.png"] ) {
       [atmbtn setImage:[UIImage imageNamed:@"check_box_off.png"] 
               forState:UIControlStateNormal]; 

        noString = @"No"; 
        NSLog(@"atm=%@",noString);
    } else if( [atmbtn backgroundImageForState:UIControlStateNormal] ==
                [UIImage imageNamed:@"check_box_off.png"]) {

        [atmbtn setImage:[UIImage imageNamed:@"check_box_on.png"]
                forState:UIControlStateNormal];

         yesString = @"Yes";
         NSLog(@"atm = %@",yesString);
     }
} 
```

> 输出：
> 
> NSLog 打印：
> 
> 自动取款机=是
> 
> 自动取款机=是
> 
> 自动取款机=是

我该如何解决这个问题？请分享您的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:04:47.843

用这个：

```
[atmbtn setBackgroundImage:[UIImage imageNamed:@"check_box_on.png"] forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:02:50.663

设置一个**BOOL 变量**而不是 if 条件

**.h 文件**

```
BOOL _isClicked; 
```

**.m 文件**

```
-(IBAction)atmAction:(id)sender{  

    if(!isClicked){

       [atmbtn setImage:[UIImage imageNamed:@"check_box_off.png"]
               forState:UIControlStateNormal];   
        _isClicked = YES;      

     } else {

         [atmbtn setImage:[UIImage imageNamed:@"check_box_on.png"]
                 forState:UIControlStateNormal];    
          _isClicked = NO;
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:03:49.323

您正在设置`UIImage`并且正在检查`backgroundImage`.

尝试

```
if([atmbtn imageForState:UIControlStateNormal] ==
   [UIImage imageNamed:@"check_box_on.png"]) 
```

代替

```
if([atmbtn backgroundImageForState:UIControlStateNormal] ==
   [UIImage imageNamed:@"check_box_on.png"]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T10:05:40.010

你可以简单地使用

```
 [atmbtn setBackgroundImage:[UIImage imageNamed:@"check_box_off.png"]
                    forState:UIControlStateNormal];
    [atmbtn setBackgroundImage:[UIImage imageNamed:@"check_box_on.png"]
                    forState:UIControlStateSelected]; 
```

`atmbtn`您的xib中按钮的出口在哪里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T10:06:45.393

嗨尝试`isEqual`方法，而不是`==`因为您正在比较对象而不是值。试试这个：

```
-(IBAction)atmAction:(id)sender{

    if([[atmbtn imageForState:UIControlStateNormal] 
          isEqual:[UIImage imageNamed:@"check_box_on.png"]] ) {

        [atmbtn setImage:[UIImage imageNamed:@"check_box_off.png"]
                forState:UIControlStateNormal];
        noString = @"No";
        NSLog(@"atm = %@",noString);

    } else if( [[atmbtn imageForState:UIControlStateNormal] 
                  isEqual:[UIImage imageNamed:@"check_box_off.png"]] ){

        [atmbtn setImage:[UIImage imageNamed:@"check_box_on.png"]
                forState:UIControlStateNormal];

        yesString = @"Yes";
        NSLog(@"atm = %@",yesString);
    }
} 
```

# data-structures - 水平顺序遍历的实际使用

> ID：13155318
> 
> 赞同：7
> 
> 时间：2012-10-31T09:57:42.127
> 
> 标签：data-structures, binary-tree

有人可以建议我什么时候需要 Level-Order Traversal（解决一些实际/现实生活中的场景）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T10:01:21.493

[层序遍历](http://en.wikipedia.org/wiki/Tree_traversal#Queue-based_level_order_traversal)实际上是一种广度优先搜索，本质上不是递归的。

来自：[http ://en.wikipedia.org/wiki/Breadth-first_search](http://en.wikipedia.org/wiki/Breadth-first_search)

广度优先搜索可用于解决图论中的许多问题，例如：

*   查找一个连接组件中的所有节点
*   复制集合，切尼算法
*   找到两个节点 u 和 - v 之间的最短路径（路径长度由边数测量）
*   测试图的二分性
*   （反向）Cuthill–McKee 网格编号
*   用于计算流网络中最大流量的 Ford-Fulkerson 方法
*   二叉树的序列化/反序列化与排序顺序的序列化，允许以有效的方式重新构建树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-31T21:48:09.167

Google Map Direction 一直在使用 Level Order Traversal (BFS)。

算法重复相同的方法，选择离交叉点最近的节点，最终选择长度最短的路线。

[http://blog.hackerearth.com/breadth-first-search-algorithm-example-working-of-gps-navigation](http://blog.hackerearth.com/breadth-first-search-algorithm-example-working-of-gps-navigation)

# javascript - 如何防止可拖动的 div 在本机 javascript 中与另一个 div 重叠

> ID：13155319
> 
> 赞同：0
> 
> 时间：2012-10-31T09:57:42.110
> 
> 标签：javascript

我想限制可拖动的 div 与另一个 div 重叠。我如何使用本机 javascript 执行此操作？没有 jquery/ui。任何教程/示例？

# c# - 将 C# Razor 转换为 VB.net

> ID：13155321
> 
> 赞同：0
> 
> 时间：2012-10-31T09:57:54.987
> 
> 标签：c#, vb.net, razor

我是 Razor 视图语法的新手，由于大多数示例都在 C# 中，我需要帮助将以下 Razor 语法转换为 vb.net。

```
@helper selected (string c,string culture)
{
    if (c==culture)
    {
        @:checked='checked'
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:11:01.047

来自 ASP.NET：

“Razor 语法基于 C# 编程语言，这是 ASP.NET 网页最常使用的语言。**但是，Razor 语法也支持 Visual Basic 语言**，您看到的所有内容也可以在 Visual Basic 中完成.有关详细信息，请参阅附录 Visual Basic 语言和语法。

以下是 VB.NET 中的一些示例，可以帮助您：

[使用 Razor 语法的 ASP.NET Web 编程简介 (Visual Basic)](http://www.asp.net/web-pages/overview/getting-started/introducing-razor-syntax-%28vb%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:07:18.983

您正在剃刀视图中将 C#.Net 转换为 VB.Net：

```
@helper selected (c As String, culture As String)
    If c = culture Then
        @:checked='checked'
    End If
End helper 
```

我已经很多年没有接触过 VB.Net，但它看起来应该适合你。

# image-processing - 从随机线段集中检测四边形

> ID：13155323
> 
> 赞同：5
> 
> 时间：2012-10-31T09:58:02.060
> 
> 标签：image-processing, opencv, artificial-intelligence, shapes, hough-transform

![在此处输入图像描述](../Images/4a392a727161243fad87ee537188b290.png)

附上的图像是 Opencv 2.4.2 的 Hough 变换的输出

您能否建议我用最好的算法从这些线段中检测出最好的四边形（不总是矩形）形状

即使某些角落会位于图像边界之外，我仍然需要检测它们

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-18T20:37:36.343

没有时间实际尝试这个，我可以想象这样的事情：

1.  遍历所有线并计算斜率。
2.  按斜率对线进行排序
3.  如果两条线具有大致相似的斜率，它们要么是平行的，要么是同一条线，其中有一个间隙（例如左侧几乎垂直的线）。要弄清楚哪个，计算它们将在哪里截取 x 或 y 轴。如果它们在同一点截取，则它们是同一条线，应合并为一条线。如果没有，请将它们放在一组（大致）平行线中。
4.  将每组平行线与其他组进行比较，并计算它们是否相交（可能在屏幕外）。
5.  应用一些依赖于应用程序的标准来选择最好的。

其运行时间很大程度上取决于检测到的线数和平行线组的数量。您可以通过仅考虑具有最小长度的线、使用将线视为平行的阈值等来改进一点。

# java - MongoDB & Java，给结果加一个值

> ID：13155328
> 
> 赞同：2
> 
> 时间：2012-10-31T09:58:21.650
> 
> 标签：java, mongodb

我有如下所示的代码。我查询 MongoDB，结果被序列化并返回。但我想为每个记录/文档添加一个新值，在本例中为“年龄”。所以我想我会遍历结果并用 one.put 添加它们，但返回的 json 中没有显示该值。

我究竟做错了什么？

感谢您的任何帮助或建议！

```
 public String (int id){     
        DBCollection collection = database.getCollection("collection");
        BasicDBObject query = new BasicDBObject();
        query.put("id", id);

        DBCursor cursor = collection.find(query);       
        if (cursor.hasNext()) {
            DBObject one = cursor.next();
            one.put("age", 33);
        }

        String json = JSON.serialize(cursor)

        return json;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:57:02.733

如果您只想将属性**注入**结果而不保存数据库中的更改，我建议您使用以下实现：

```
public String getJSONString(int id) {     
    DBCollection collection = database.getCollection("collection");
    DBObject query = new BasicDBObject("id", id);

    List<DBObject> objects = collection.find(query).toArray();       
    for (DBObject obj : objects) {
        obj.put("age", 33);
    }

    return JSON.serialize(objects)
} 
```

请注意，如果以这种方式实现，所有对象**都必须保存在内存中。**

顺便说一句：您不会在原始帖子中循环光标（`if`而不是`while`）。此外，游标应始终在 finally 块中[关闭。](http://api.mongodb.org/java/2.9.3/com/mongodb/DBCursor.html#close%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T07:36:46.347

这就是我最终通过使用 ArrayList 使其工作的方式：

```
 public String (int id){     
            DBCollection collection = database.getCollection("collection");
            BasicDBObject query = new BasicDBObject();
            query.put("id", id);

            ArrayList<DBObject> al = new ArrayList<DBObject>();     
            while(cursor.hasNext()){
                DBObject one = cursor.next();        
                one.put("age", 33);
                al.add(one);
            }       

            String json = JSON.serialize(al)

            return json;
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:03:53.520

我怀疑游标是否会用新的 put 更新，因为它是针对现有查询的。

**编辑**：为了添加新值，我会推荐两种解决方案。

1.  将 JSON 文档映射到 POJO，然后调用适当的 setter。这是一种更清洁且可扩展的方法。
2.  将值复制到 Map，然后添加最终的 key:value，在本例中为 age:33。

**用于保存更新的 obj**

你不是`save`在调用`collection`.

有关更多信息，请参阅在 Mongo 文档中[保存对象](http://www.mongodb.org/display/DOCS/Java+-+Saving+Objects+Using+DBObject)，尤其是解释更新的最后一部分。

# ruby-on-rails - Rails 2.3.4 中的 find_each 方法中的问题

> ID：13155332
> 
> 赞同：0
> 
> 时间：2012-10-31T09:58:35.410
> 
> 标签：ruby-on-rails, activerecord

这是错误的代码片段。

```
transaction do    
    Person.having_email(some_email).find_each(:conditions => ["people.identifier != ? OR people.identifier IS NULL", identifier]) do |person|
        if person.identifier?
          raise "Person is associated with a different identifier"
        else
          duplicate_entry =  Person.find_by_identifier_and_company_id(identifier, person.company_id)
          person.update_attribute(:identifier, identifier) if duplicate_entry.nil?
        end
    end
end 
```

`having_email`是为 Person 类定义的 named_scope。

我面临的问题是，即使数据库中存在有效记录，找到可能重复条目的表达式似乎总是返回 nil。当我使用 RubyMine 调试器评估相同的表达式时，它会返回正确的对象。

进一步反省，似乎 rails 没有对 duplicate_entry 评估语句触发任何查询（日志中没有这样的查询）。在用`find_each`正常`find(:all, ...).each`呼叫替换呼叫时，事情似乎工作正常（重复条目检索查询也存在于日志中）。

我一直无法弄清楚可能导致这种情况的原因。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T13:57:54.863

> 问题是 find_each 和 find_in_batches 通过设置 with_scope 块来工作。因此，如果您需要在同一模型上进行任何其他查找，则适用范围。

[此问题的根本原因已在此博客文章中](http://davedupre.com/2009/05/20/gotcha-with-find_each-and-find_in_batches/)得到很好的解释以及有效的解决方法

# java - 用 oozie 触发 Pig 作业

> ID：13155333
> 
> 赞同：0
> 
> 时间：2012-10-31T09:58:40.263
> 
> 标签：java, hadoop, mapreduce, apache-pig, oozie

`registerQuery()`我有一个 java 代码，其中使用类的方法嵌入了 pig 语句`PigServer`。现在我准备了一个 jar，我可以将它作为 运行`hadoop jar jarname`，但问题是如何使用`oozie`调度程序触发相同的作业。尽管它是内部的 map reduce 起作用，但我们不能将其称为 map reduce 操作。同样，因为它不是猪动作，我们也不能设置它。是否可以使用 oozie 运行这样的任务？安排此类任务的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:33:34.767

似乎您尝试做的不是 Oozie 支持的功能的一部分。由于您的任务既不是典型的 Java Map Reduce 也不是猪操作，您最好使用操作系统提供的 crontab 功能来安排您的作业或使用 Spring 调度程序。

Hadoop 也有一个 spring 发行版，称为[Spring Data - Apache Hadoop](http://www.springsource.org/spring-data/hadoop)，它提供了内置的调度功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-01T17:44:12.240

Oozie [MapReduce](http://archive.cloudera.com/cdh5/cdh/5/oozie/WorkflowFunctionalSpec.html#a3.2.2_Map-Reduce_Action)操作的目的是运行诸如“hadoop jar ...”之类的作业。

该文档详细介绍了它，并且一些 Hue[教程](http://gethue.tumblr.com/post/60937985689/hadoop-tutorials-ii-2-execute-hive-queries-and)演示了如何运行 Oozie 作业。

# java - 将struts1.38与oracle通信的其他方法是什么

> ID：13155334
> 
> 赞同：0
> 
> 时间：2012-10-31T09:58:42.450
> 
> 标签：java, jdbc, struts-1

任何人都可以解释将struts1.x与数据库oracle通信的替代方法吗

```
public class Myaction extends Action
 {
 public ActionForwards excecute(-,-,-,-)
 {
  //donot write  jdbc code here, where we write this jdbccode
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:59:22.880

这是一个非常简单的例子，只是为了给你一个想法。您可以创建一个 DAO 类并在其中有一个包含所有 jdbc 相关内容的方法，例如获取连接和设置会话。DAO 中的该方法查询数据库，然后您在操作类中处理结果。

你行动课：

```
public class Myaction extends Action
 {
 public ActionForwards excecute(-,-,-,-)
 {
  //donot write  jdbc code here, where we write this jdbccode
   MyDAO dao = new MYDAO();
   Resultset result = dao.getResults();
  }
} 
```

DAO 类

```
public class MyDAO{
        public ResultSet getResults(){
            private Session session = MyUtil.getSession();
            String query = "SELECT * from MY_TABLE";
            PreparedStatement stmt = con.prepareStatement(query);
            Connection con = session.connection();
            ResultSet result = stmt.executeQuery();
            return result; 
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:02:29.413

你会想要使用 DAO 和 DTO 设计模式。你会想阅读这篇[文章](http://java.dzone.com/articles/database-interaction-dao-and)

# ruby-on-rails - 为来自 CDN 的请求绕过 Rack::Cache

> ID：13155335
> 
> 赞同：1
> 
> 时间：2012-10-31T09:58:43.470
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rack, amazon-cloudfront, rack-cache

我有一个 Rails 3.2 应用程序，部署到 heroku。我将缓存与[Rack::Cache](https://github.com/rtomayko/rack-cache/)和 Amazon CloudFront 一起使用。

对于通过 CloudFront 提供的请求（主要是资产），带有 Rack::Cache 的缓存层是多余的，我宁愿不在那里使用它（heroku 上的 memcached 很*昂贵*）

为这些请求跳过 Rack::Cache 的好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T19:03:50.100

这篇博文帮助了我[http://jackchu.com/blog/2011/09/20/rails-asset-pipeline-content-delivery-networks-and-rack-cache/](http://jackchu.com/blog/2011/09/20/rails-asset-pipeline-content-delivery-networks-and-rack-cache/)

我完全关闭了机架缓存：

```
config.middleware.delete Rack::Cache 
```

他还有另一个建议，即仅针对资产将机架缓存替换为机架静态，这仍然为其他请求保留机架缓存。

# eclipse - 一个窗口的eclipse布局

> ID：13155336
> 
> 赞同：2
> 
> 时间：2012-10-31T09:58:45.207
> 
> 标签：eclipse, editor

我用来调试应用程序。调试的时候发现一个窗口中变量的值显示在最下方，如图——

![在此处输入图像描述](../Images/6ab9c7c75841822e677552334c06c7a8.png)

但是，当我显示表达式时，我得到这样的布局 -

![在此处输入图像描述](../Images/320c49174e932ca2d9300ef6f805fbb9.png)

我的问题是，是否可以更改变量窗口的布局以在右侧显示值，因为这对我来说很方便。

谢谢你 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T10:59:07.330

单击右上角的箭头（指向下方的箭头）。然后选择`Layout -> Horizontal`

# html - 在浏览器中放大时使表格单元格可缩放

> ID：13155337
> 
> 赞同：0
> 
> 时间：2012-10-31T09:58:45.317
> 
> 标签：html, css

我正在尝试在字段集中格式化表格，两者都在表单内。这是HTML代码：

```
<!DOCTYPE html>
<html>
<head>
<style>
fieldset{width:90%;}
table {width:100%;border-collapse:collapse;}
table,td {border:1px solid black;}
td.abc {width:40%;}
</style>
</head>
<body>
<form>
    <fieldset>
        <legend>Text Text</legend>
        <table>
        <tr>
            <td> Text </td>
            <td class="abc"> 
                <input size='25' type="text"/>
                <select>
                    <option>Text text text</option>
                    <option> Text </option>
                </select>
            </td>
            <td>
                Text text
            </td>
        </tr>
        <tr>
            <td> Text </td>
            <td class="abc"> 
                <input size='25' type="text"/>
                <select>
                    <option>Text text text</option>
                    <option> Text </option>
                </select>
            </td>
            <td>
                Text text
            </td>
        </tr>
        </table>
    </fieldset>
</form>

</body>
</html> 
```

我的问题是，当我放大浏览器（通过按 ctr 和 + 键）时，如何使文本输入和选择保持在同一行。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:27:58.107

我同意 Sandeep 的观点——我一直在使用表格时遇到问题，而是使用标签和 css 去@HTMLhelpers 进行格式化。我对放大没有任何问题，这是一个适合老年人、视障人士等的好功能。

这是一个联系页面片段，类似于您想要对字段集执行的操作：

```
<fieldset>
    <legend>Contact</legend>

<div class="editor-label">
    *@Html.LabelFor(model => model.FirstName)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.FirstName)
    @Html.ValidationMessageFor(model => model.FirstName)
</div>

<div class="editor-label">
    *@Html.LabelFor(model => model.LastName)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.LastName)
    @Html.ValidationMessageFor(model => model.LastName)
</div>

<div class="editor-label">
    *@Html.LabelFor(model => model.EmailAddress)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.EmailAddress)
    @Html.ValidationMessageFor(model => model.EmailAddress)
</div>
    <input type="submit" value="Submit" /> &nbsp;
    <input type="reset" value="Reset" />

</fieldset> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:19:52.163

忘记表格，使用 DIV。这是解决问题的唯一方法。

# asp.net - 我如何在我的 asmx 中获得关于客户端的 aspx 的 Windows 模式权限

> ID：13155349
> 
> 赞同：1
> 
> 时间：2012-10-31T09:59:08.897
> 
> 标签：asp.net, web-services, iis, iis-7, asmx

我构建了一个 ASP.NET Webapllication，它在我们的 ActiveDirectory 中创建了一个用户，但是如果我将它安装在 IIS7 上，我会收到一个错误，没有在广告中添加用户的权限。现在我想创建一个可以做到这一点的服务，但我有同样的问题。该命令是一个 Powershell 命令，我已经为 ActiveDirectory 安装了模块。

这里有一些关于我的项目的信息：

我的 asmx 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Security;
using System.Management.Automation;
using System.Management.Automation.Runspaces;
using System.Management.Automation.Remoting;
using System.Security;
using System.Security.Cryptography;
using System.IO;

namespace ActiveDirectoryService
{
    /// <summary>
    /// Zusammenfassungsbeschreibung für Service1
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // Um das Aufrufen dieses Webdiensts aus einem Skript mit ASP.NET AJAX zuzulassen, heben Sie die Auskommentierung der folgenden Zeile auf. 
    // [System.Web.Script.Services.ScriptService]
    public class Service1 : System.Web.Services.WebService
    {

        [WebMethod]
        public string HelloWorld()
        {
            return "Hello World";
        }

        [WebMethod]
        public string Connectiontest()
        {
            return "Die Verbindung besteht";
        }

        [WebMethod]
        public string GetUsername()
        {
            return User.Identity.Name;
        }

        [WebMethod]
        public string CreateADUserInNPS(string macAdress)
        {
            string prefix = "test";
            string principlename = macAdress + "@company-test.com";
            string gn = "test";
            string sn = "test";
            string Path = "..."; //The path is correct but I don't want show this

            return AddNewUser(prefix, macAdress, principlename, gn, sn, Path);

        }

        public string AddNewUser(string prefix, string macAdress, string principlename, 
                               string gn, string sn, string path)
        {
            SecureString SECUREADADMINPASSWORD = new SecureString();

            foreach (char x in macAdress)
            {
                SECUREADADMINPASSWORD.AppendChar(x);
            }

            InitialSessionState initial = InitialSessionState.CreateDefault();
            Environment.SetEnvironmentVariable("ADPS_LoadDefaultDrive", "0");
            initial.ImportPSModule(new string[] { "ActiveDirectory" });

            using (Runspace runspace = RunspaceFactory.CreateRunspace(initial))
            {
                runspace.Open();
                using (Pipeline p = runspace.CreatePipeline())
                {
                    Command command = new Command("New-ADUser");
                    command.Parameters.Add("Name", prefix);
                    command.Parameters.Add("sAMAccountName", macAdress);
                    command.Parameters.Add("UserPrincipalName", principlename);
                    command.Parameters.Add("GivenName", gn);
                    command.Parameters.Add("SurName", sn);
                    command.Parameters.Add("displayname", macAdress);
                    command.Parameters.Add("enabled", true);
                    command.Parameters.Add("Path", path);
                    command.Parameters.Add("AllowReversiblePasswordEncryption", true);
                    command.Parameters.Add("PasswordNeverExpires", true);
                    command.Parameters.Add("AccountPassword", SECUREADADMINPASSWORD);
                    p.Commands.Add(command);

                    string pscommand = "New-ADUser " + prefix + " -SamAccountName " + macAdress +
                    " -UserPrincipalName " + macAdress + "@company-test.com -GivenName " + gn + // @company-test.com aus cfg
                    " -SurName " + sn + " -displayname " + macAdress + " -enabled $true -Path " + path +
                    " -AllowReversiblePasswordEncryption $true -PasswordNeverExpires $true -AccountPassword (ConvertTo-Securestring" +
                    " '" + macAdress + "'" + " -asplaintext -Force)";

                    try
                    {
                        p.Invoke();   //I think here comes the Error with not the rights
                        return "erfolg";
                    }
                    catch (Exception ex)
                    {
                        return "Meldung: " + ex.Message;
                    }
                }
            }
        }
    }
} 
```

在我的客户端上它可以工作，但如果我在 IIS7 上安装它就不行。

我的aspx代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using ActiveDirectoryCenter.serv;

namespace ActiveDirectoryCenter
{
    public partial class main : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }

        protected void btnConnectionTest_Click(object sender, EventArgs e)
        {
            serv.Service1 service = new Service1();
            service.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials;
            lblConnection.Text = service.Connectiontest();
        }

        protected void btnGetUsername_Click(object sender, EventArgs e)
        {
            serv.Service1 service = new Service1();
            service.Credentials = System.Net.CredentialCache.DefaultCredentials;
            lblUsername.Text = service.GetUsername();
        }

        protected void btncreateADUser_Click(object sender, EventArgs e)
        {
            serv.Service1 service = new Service1();
            service.Credentials = System.Net.CredentialCache.DefaultCredentials;
            lblstatus.Text = service.CreateADUserInNPS(txtMacAdress.Text);

        }
    }
} 
```

这里的想法

![在此处输入图像描述](../Images/29b7b1a575bfbc28005e4c53e9a0f0dc.png)

我首先在没有服务的情况下完成了它，但现在我想要一个 aspx 站点和一个具有这些方法的服务。我这样配置服务：

![在此处输入图像描述](../Images/e0e8d00136630a5dd0fe799c7b47695f.png) ![在此处输入图像描述](../Images/464e1ced89ddec19ef0bc213772b0797.png)

我知道这是一个困难的问题，但也许我会得到帮助:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T20:41:51.993

只是想从我自己的经验中提供帮助。

```
service.Credentials = System.Net.CredentialCache.DefaultCredentials; 
```

将其注释掉，如果失败，请找出要使用的凭据。

那是在您的网络客户端中。

别的东西：拥有自己的 iis 应用程序池。

1.  你自己
2.  当涉及到应用程序池模式时，您需要确定它应该是经典的 .net 还是集成的。经典 .net 通常用于旧的 .net Web 应用程序，例如来自 asp.net 1.1 或 2.0。

顺便问一下，错误号和消息和描述等是什么？

# iphone - iOS - 更改单元格中的背景视图时滞后的表格视图

> ID：13155351
> 
> 赞同：0
> 
> 时间：2012-10-31T09:59:14.550
> 
> 标签：iphone, ios5, uitableview, uiimageview

我只想说，我一直在寻找这个问题，但没有找到与我的问题类似的东西。我想做的是用图像更改每个单元格的背景。我有三个图像，“顶部、中间和底部”图像。当我放置这个背景时，表格视图在滚动时变得迟钝。我就是这样做的：

```
topImage = [[UIImage imageNamed:@"table_bg_top.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(10, 10, 0, 10)];
middleImage = [[UIImage imageNamed:@"table_bg_middle.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(10, 10, 0, 10)];
bottomImage = [[UIImage imageNamed:@"table_bg_bottom.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(10, 10, 10, 10)]; 
```

这三个图像仅在视图加载时初始化一次。然后我有以下内容：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell;
        switch (indexPath.row) {
            case 1:
                cell = [tableView dequeueReusableCellWithIdentifier:@"TopCell"];
                [(UIImageView *)[cell viewWithTag:1] setImage:topImage];
                ((UILabel *)[cell viewWithTag:2]).text = @"First name";
                ((UILabel *)[cell viewWithTag:3]).text = firstName;
                break;
            case 2:
                cell = [tableView dequeueReusableCellWithIdentifier:@"MiddleCell"];
                [(UIImageView *)[cell viewWithTag:1] setImage:middleImage];
                ((UILabel *)[cell viewWithTag:2]).text = @"Last name";
                ((UILabel *)[cell viewWithTag:3]).text = lastName;
                break;
            case 3:
                cell = [tableView dequeueReusableCellWithIdentifier:@"MiddleCell"];
                [(UIImageView *)[cell viewWithTag:1] setImage:middleImage];
                ((UILabel *)[cell viewWithTag:2]).text = @"Birth";
                ((UILabel *)[cell viewWithTag:3]).text = [formatter stringFromDate:birth];
                break;
            case 4:
                cell = [tableView dequeueReusableCellWithIdentifier:@"MiddleCell"];
                [(UIImageView *)[cell viewWithTag:1] setImage:middleImage];
                ((UILabel *)[cell viewWithTag:2]).text = @"Gender";
                ((UILabel *)[cell viewWithTag:3]).text = gender;
                break;
            case 5:
                cell = [tableView dequeueReusableCellWithIdentifier:@"MiddleCell"];
                [(UIImageView *)[cell viewWithTag:1] setImage:middleImage];
                ((UILabel *)[cell viewWithTag:2]).text = @"Unit";
                ((UILabel *)[cell viewWithTag:3]).text = unit;
                break;
            case 6:
                cell = [tableView dequeueReusableCellWithIdentifier:@"MiddleCell"];
                [(UIImageView *)[cell viewWithTag:1] setImage:middleImage];
                ((UILabel *)[cell viewWithTag:2]).text = @"Height";
                if([unit isEqualToString:@"mt"])
                    ((UILabel *)[cell viewWithTag:3]).text = [NSString stringWithFormat:@"%d cm", (int)(height.floatValue*100)];
                else
                    ((UILabel *)[cell viewWithTag:3]).text = [NSString stringWithFormat:@"%d foot %d inches", (int) round((height.floatValue*100*CM_TO_INCH)) / 12, (int)round((height.floatValue*100*CM_TO_INCH)) % 12];
                break;
            case 7:
                cell = [tableView dequeueReusableCellWithIdentifier:@"BottomCell"];
                [(UIImageView *)[cell viewWithTag:1] setImage:bottomImage];
                ((UILabel *)[cell viewWithTag:2]).text = @"Weight";
                if([unit isEqualToString:@"mt"])
                    ((UILabel *)[cell viewWithTag:3]).text = [NSString stringWithFormat:@"%d kg", weight.integerValue];
                else
                    ((UILabel *)[cell viewWithTag:3]).text = [NSString stringWithFormat:@"%d pounds",(int) round((weight.floatValue*KG_TO_LBS))];
                break;
            default:
                break;
        }

    return cell;
} 
```

我有一个具有三个不同标识符（顶部、中间和底部）的自定义单元格。这导致了滞后：`[(UIImageView *)[cell viewWithTag:1] setImage:image];`. 与单元格`UIImageView`一样大，以获得背景效果。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:18:37.603

我发现了问题。它与：有关`resizableImageWithCapInsets:UIEdgeInsetsMake(10, 10, 0, 10)`，它滞后是因为它多次绘制相同的图像来拉伸它。因此，我必须使这些图像与单元格一样大，以消除滞后。

如果有人找到替代解决方案，请填写我，如果可行，我会接受！

# c# - 单击该按钮会使应用程序崩溃，并出现未处理的异常

> ID：13155352
> 
> 赞同：2
> 
> 时间：2012-10-31T09:59:15.330
> 
> 标签：c#, xamarin.ios

我收到以下错误......

追踪：

在 (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) 在 MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x0004c] 在 /Developer /MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38 在 /Users/ravichandra/Desktop/19-10-2012/F2S/F2S 中的 F2S.UI.Application.Main (string[]) [0x00000]。 UI/Main.cs:21 at (wrapper runtime-invoke) .runtime_invoke_void_object (object,intptr,intptr,intptr)

本机堆栈跟踪：

```
0   navigation                          0x00090dfc mono_handle_native_sigsegv + 284
1   navigation                          0x00005c28 mono_sigsegv_signal_handler + 248
2   libsystem_c.dylib                   0x9ca8259b _sigtramp + 43
3   ???                                 0xffffffff 0x0 + 4294967295
4   UIKit                               0x0223555a -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
5   UIKit                               0x022dab76 -[UIControl sendAction:to:forEvent:] + 66
6   UIKit                               0x022db03f -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 503
7   UIKit                               0x022da2fe -[UIControl touchesEnded:withEvent:] + 549
8   UIKit                               0x0225aa30 -[UIWindow _sendTouchesForEvent:] + 513
9   UIKit                               0x0225ac56 -[UIWindow sendEvent:] + 273
10  UIKit                               0x02241384 -[UIApplication sendEvent:] + 464
11  UIKit                               0x02234aa9 _UIApplicationHandleEvent + 8196
12  GraphicsServices                    0x047f6fa9 PurpleEventCallback + 1274
13  CoreFoundation                      0x0119c1c5 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 53
14  CoreFoundation                      0x01101022 __CFRunLoopDoSource1 + 146
15  CoreFoundation                      0x010ff90a __CFRunLoopRun + 2218
16  CoreFoundation                      0x010fedb4 CFRunLoopRunSpecific + 212
17  CoreFoundation                      0x010feccb CFRunLoopRunInMode + 123
18  GraphicsServices                    0x047f5879 GSEventRunModal + 207
19  GraphicsServices                    0x047f593e GSEventRun + 114
20  UIKit                               0x02232a9b UIApplicationMain + 1175
21  ???                                 0x0d90a384 0x0 + 227582852
22  ???                                 0x0d909180 0x0 + 227578240
23  ???                                 0x0d9089a0 0x0 + 227576224
24  ???                                 0x0d908a2f 0x0 + 227576367
25  navigation                          0x00009fe2 mono_jit_runtime_invoke + 722
26  navigation                          0x0016b87e mono_runtime_invoke + 126
27  navigation                          0x0016fa04 mono_runtime_exec_main + 420
28  navigation                          0x00174df5 mono_runtime_run_main + 725
29  navigation                          0x000671e5 mono_jit_exec + 149
30  navigation                          0x00203e41 main + 2209
31  navigation                          0x00002fe5 start + 53
32  ???                                 0x00000005 0x0 + 5 
```

==================================================== =============== 在执行本机代码时获得了 SIGSEGV。这通常表示单声道运行时或本机库之一中的致命错误。

==================================================== ================

请任何人帮助我

这是我的代码

```
 btnMylocation.Clicked += (sender, e) => 
        {
            imgbg.Hidden=false;
            lbltime.Hidden=false;
            btnup.Hidden=false;
            btndown.Hidden=false;
            imghazard.Hidden=false;
            lblfeets.Hidden=false;

            try
            {
                if(!Reachability.IsHostReachable ("www.google.com"))
                {

                    alertview.NetworkFail ();

                }

                else
                {

                this.mysegments.SelectedSegment = 0;

                mapView.RemoveAnnotations (mapView.Annotations);

                var locationservice = new LocationService ();
                var currentLocation = locationservice.GetCurrentLocation ();
                var visregion = BuildVisibleRegion (currentLocation);

                mapView.SetRegion (visregion, true);
                targetimage.Hidden = true;

                locations = LocationManager.Locations ();

                List<double> distlist=new List<double>();

                foreach(LocationModel d in locations)
                {

                    var dist=distance (currentLocation.Latitude,currentLocation.Longitude,Convert.ToDouble (d.latitude),Convert.ToDouble (d.longitude));
                    distlist.Add (dist);

                }
                if(distlist.Count!=0)
                {

                    distlist.Sort ();
                    double min= distlist[0];

                foreach (LocationModel f in locations)
                {

                    string feets = (min*3280).ToString ();

                    var dist=distance (currentLocation.Latitude,currentLocation.Longitude,Convert.ToDouble (f.latitude),Convert.ToDouble (f.longitude));

                    if(min == dist)
                    {
                        string lat = f.latitude;
                        string lon = f.longitude;
                        NSUserDefaults.StandardUserDefaults.SetString (f.hazardid,"hazardid");  

                        this.View.AddSubview (imgbg);
                        this.View.AddSubview (imghazard);
                        this.View.AddSubview (lblfeets);
                        this.View.AddSubview (btnup);
                        this.View.AddSubview (btndown); 
                        this.View.AddSubview (lbltime);

                    if (f.hazardtype == 1) 
                    {   

                        pins.Clear ();
                        pins.Add (new PoliceAnnotation (new CLLocationCoordinate2D (Convert.ToDouble (lat), Convert.ToDouble (lon)), "Click here to Report",""));
                        mapView.AddAnnotationObject (pins [0]);
                        mapView.AddAnnotation (mapAnnotations [(int)Anotationindex.police]);

                        lblfeets.Text=feets  + " fts";
                        lbltime.Text=f.ReportDate + " Ago";
                        imghazard.Image=UIImage.FromFile ("Images/police-cop-mark.png");

                    } 

                    else if (f.hazardtype == 2) 
                    {

                        duipins.Clear ();
                        duipins.Add (new DuiAnnotation (new CLLocationCoordinate2D (Convert.ToDouble (lat), Convert.ToDouble (lon)), "Click here to Report",""));
                        mapView.AddAnnotationObject (duipins [0]);
                        mapView.AddAnnotation (mapAnnotations [(int)Anotationindex.dui]);

                        lblfeets.Text=feets  + " fts";
                        lbltime.Text=f.ReportDate + " Ago";
                        imghazard.Image=UIImage.FromFile ("Images/dui-stop-mark.png");      

                    }
                    else if(f.hazardtype==3)
                    {

                        campins.Clear ();
                        campins.Add (new SpeedcamAnnotation (new CLLocationCoordinate2D (Convert.ToDouble (lat), Convert.ToDouble (lon)), "",""));
                        mapView.AddAnnotationObject (campins [0]);
                        mapView.AddAnnotation (mapAnnotations [(int)Anotationindex.cam]);

                        lblfeets.Text=feets  + " fts";
                        lbltime.Text=f.ReportDate + " Ago";
                        imghazard.Image=UIImage.FromFile ("Images/speed-camera-mark.png");

                    }

                    }

                    }

                    btnup.TouchUpInside += (sender1, e1) =>
                    {

                    NSUserDefaults.StandardUserDefaults.SetString("1","Status");
                    NSUserDefaults.StandardUserDefaults.Init();
                    Response = LocationManager.ConfirmLocation();

                    if(Response.Status == "1" || Response.Status == "12")
                    {
                        UIAlertView alert1 = new UIAlertView ("Success","",null,"Ok");  
                        alert1.Show ();
                    }
                    else
                    {

                    }

                    };

                    btndown.TouchUpInside += (sender1, e1) => 
                    {

                    NSUserDefaults.StandardUserDefaults.SetString("0","Status");
                    NSUserDefaults.StandardUserDefaults.Init();
                    Response = LocationManager.ConfirmLocation ();

                    if(Response.Status == "1" || Response.Status == "12")
                    {
                        UIAlertView alert1 = new UIAlertView ("Success","",null,"Ok");  
                        alert1.Show ();
                    }
                    else
                    {

                    }

                    };

                   }

                }

               }
            catch(Exception ex)
            {

                if(ex.Message == "Network Fail")

                    alertview.NetworkFail ();

                else

                    alertview.ProcessFailed ();

                }

            }; 
```

第一次单击 btnMylocation 会显示一个带有两个按钮的弹出窗口，然后单击两个按钮工作正常，但是当我尝试再次单击 btnMylocation 时，它会打开弹出窗口，但单击 btnup 和 btndown 两个按钮中的任何一个按钮会使应用程序崩溃...... ......任何想法请......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:02:17.863

Rolf 是对的，有一种方法可以通过不正确地设置事件来使这种崩溃发生。这是 GC 与 MonoTouch 中的 Objective-C 交互的方式。

因此，例如，如果您将其放在`ViewDidLoad`名为 的插座上`myButton`，它将正常工作：

```
myButton.TouchUpInside += (sender, e) =>
{
  //Do something
}; 
```

但如果你这样做：

```
myButton1.TouchUpInside += (sender, e) =>
{
  var myButton2 = new UIButton();
  myButton2.TouchUpInside += (sender, e) =>
  {
    //Do something
  };  
  //Add button2 to the view, etc.
}; 
```

然后`myButton2`可能会在第一次正确单击，但最终在 GC 收集后您会崩溃。发生这种情况是因为 C# 包装器`myButton2`会收集垃圾，但 Objective-C 实例仍会挂起。当Objective-C实例得到点击时，它不能调用C#，因为它已经消失了。

解决它的一种简单方法是使按钮成为类的成员变量：

`private UIButton myButton;`

只要确保不要一遍又一遍地创建它。

# c# - expanderView 项目选择上的触发事件

> ID：13155353
> 
> 赞同：0
> 
> 时间：2012-10-31T09:59:15.580
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-7.1

我的应用程序中有一个扩展视图，当用户从扩展视图中选择一个项目时，我试图触发一个事件，但我终生无法让它工作。

我的 xml 看起来像这样：

```
<!--Custom header template-->
<DataTemplate x:Key="CustomHeaderTemplate">
    <TextBlock Text="" FontSize="28" />            
</DataTemplate>

<!--Custom expander template-->
<DataTemplate x:Key="CustomExpanderTemplate">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Rectangle Width="400" Height="60" Fill="#FFF1F1F1" HorizontalAlignment="Stretch" StrokeThickness="0" Grid.Row="0" Grid.Column="0" />
        <TextBlock Text="{Binding procedureName}" FontSize="30" Foreground="#FF00457C" FontWeight="Normal" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" Margin="10,0,0,0" />

    </Grid>

</DataTemplate>

<!--Custom expander items template-->
<DataTemplate x:Key="ExpanderViewItems" >

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="15" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Image Source="{Binding flagIcon}" Grid.Row="0" Grid.RowSpan="3" Grid.Column="0" />
        <TextBlock FontSize="26" Text="{Binding N}" Foreground="Black" FontWeight="Normal" Grid.Row="0" Grid.Column="1"/>
        <TextBlock FontSize="20" Text="{Binding RNG}" Foreground="Black" FontWeight="Normal" HorizontalAlignment="Right" Grid.Row="0" Grid.Column="2"/>                
        <TextBlock FontSize="26" Text="{Binding ValueAndUnit}" Foreground="Black" FontWeight="Medium" HorizontalAlignment="Right" Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2"/>
        <TextBlock FontSize="18" Text="{Binding COM}" Foreground="Black" FontWeight="Normal" Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="2" TextWrapping="Wrap" />
        <Line StrokeThickness="1" Stroke="#C4C6CC" Stretch="Fill" X1="0" X2="1" Y1="0" Y2="0" VerticalAlignment="Center" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" />
    </Grid>
</DataTemplate>

<!--Listbox Containing ExpanderViews-->
        <ListBox Name="testsList" Grid.Row="3" Grid.Column="0" >
            <ListBox.ItemTemplate>
                <DataTemplate>

                    <!--ExpanderView-->
                    <toolkit:ExpanderView Header="{Binding}"                                                   
                                          HeaderTemplate="{StaticResource CustomHeaderTemplate}"
                                          Expander="{Binding}"
                                          ExpanderTemplate="{StaticResource CustomExpanderTemplate}"
                                          x:Name="expander" 
                                          FontSize="36" 
                                          Foreground="#FF00457C" 
                                          ItemsSource="{Binding testItems}"
                                          ItemTemplate="{StaticResource ExpanderViewItems}" >                          
                    </toolkit:ExpanderView>

                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

所以你有了它，只需要在用户选择扩展器项目时简单地触发一个事件，发现它非常乏味。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:51:49.023

您应该`MouseLeftButtonUp`在 ItemTemplate 的 Item Container 上使用事件处理程序，它是一个 Grid 控件：

```
<!--Custom expander items template-->
<DataTemplate x:Key="ExpanderViewItems" >

    <Grid MouseLeftButtonUp="ItemSelected">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="15" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Image Source="{Binding flagIcon}" Grid.Row="0" Grid.RowSpan="3" Grid.Column="0" />
        <TextBlock FontSize="26" Text="{Binding N}" Foreground="Black" FontWeight="Normal" Grid.Row="0" Grid.Column="1"/>
        <TextBlock FontSize="20" Text="{Binding RNG}" Foreground="Black" FontWeight="Normal" HorizontalAlignment="Right" Grid.Row="0" Grid.Column="2"/>                
        <TextBlock FontSize="26" Text="{Binding ValueAndUnit}" Foreground="Black" FontWeight="Medium" HorizontalAlignment="Right" Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="2"/>
        <TextBlock FontSize="18" Text="{Binding COM}" Foreground="Black" FontWeight="Normal" Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="2" TextWrapping="Wrap" />
        <Line StrokeThickness="1" Stroke="#C4C6CC" Stretch="Fill" X1="0" X2="1" Y1="0" Y2="0" VerticalAlignment="Center" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3" />
    </Grid>
</DataTemplate> 
```

# java - 如何在 Java 中绕过自行实现的 mouseClicked 事件

> ID：13155357
> 
> 赞同：-1
> 
> 时间：2012-10-31T09:59:29.670
> 
> 标签：java, swing, mouseclick-event

我正在做一个大的 Gui 项目。已经完成了很多复杂的事情，我无法更改代码的结构。由于这是一个复杂的项目，很难解释或给出 SSE，但我会尽力而为。

在我们的项目中，有些人已经实现了自己的 Table。表格中的所有单元格都是一个名为 CellPanel 的类，它扩展了`JPanel`类。所以实际上所有的表格单元格都是`JPanels`。这些疯狂的家伙已经实现了他们自己的 mouseClicked 函数，大约 400 行。所以我不是为了每个人的利益把它贴在这里:) 但是这种`mouseClicked`方法只有在右键单击时才有效。所以我有机会做这样的事情：

```
public void mouseClicked(MouseEvent e) {

    DropTable.selectedColorMng(rowInTable);
    if(e.getButton()==MouseEvent.BUTTON1) {
        System.out.println("left click");
    }
    else{ 
        // 400 lines of code here
    }
} 
```

现在我想做的是这些 CellPanel 被设计为包含一个标签和一个图标。它一直是这样使用的。里面没有动态内容。但是现在我们有一个要求，我已经修改了这些 CellPanel 以包含`JList`在`ScrollPane`. 但是这些`JLists`是不可点击的。我想滚动它们进行多项选择，但它们不响应我的左键单击。所以我想我必须填写上面代码的if语句。

但是怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:15:22.477

我不确定我是否完全理解你的问题。我理解，您会`CellPanel`捕获点击事件，以便它们不会`JList`到达`CellPanel`.

如果是这样，您可以简单地将该事件委托`mouseClick`给`CellPanel`必须`JList`有对它的引用，因为它在那里显示。

# mysql - mysql变量中k和m的区别

> ID：13155364
> 
> 赞同：0
> 
> 时间：2012-10-31T10:00:03.833
> 
> 标签：mysql

mysql 变量的值是 6 k 还是 6 m 是什么意思？

前任 ：

我有 Qcache_queries_in_cache = 6 k ；= 6000

但是 6 m = ? 还是6G？

谢谢

# html - 文本区域下的额外填充

> ID：13155365
> 
> 赞同：10
> 
> 时间：2012-10-31T10:00:05.677
> 
> 标签：html, css

我的文本区域下面有额外的填充，但我似乎找不到它的来源。我已将各个代码放在此页面上：

[http://jsfiddle.net/wfuks/](http://jsfiddle.net/wfuks/)

我似乎无法找到它的来源。它有类“字段”：

```
.field { background-color: white; width: 430px; padding: 10px; font-family:arial, sans-serif; border: 1px solid #CCC; border-radius: 2px; -moz-border-radius: 2px; -webkit-border-radius: 2px; } 
```

任何输入（双关语）将不胜感激:)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-31T10:16:05.400

要让跨浏览器在 textarea/input 字段下方没有空格，请使用：

```
textarea,
input,
select {
  margin: 0;
  vertical-align: bottom;
} 
```

（在你的小提琴中测试，有效）

奇怪的是，垂直对齐是这里的关键。

请注意，您不需要 margin:0 因为您已经拥有`*{margin:0}`. 对于 textarea 的更完整的跨浏览器体验，您还可以将`overflow:auto;`其用于 IE 和`resize:none;`支持调整大小的浏览器。

有关它为何如此有效的更多信息： [图像标签下的神秘空白](https://stackoverflow.com/questions/31444891/mystery-white-space-underneath-image-tag/31445364#31445364)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:13:18.780

添加`overflow:auto`到`.field_box`和`float:right`到`textarea`

**[演示](http://jsfiddle.net/wfuks/4/)**

在您的代码中有`float:left`标签，在这种情况下，正确的元素应该具有正确的浮动以填充可用的确切空间。否则你可以删除浮动并通过使用`display:table-row`和来实现这一点`table-cell`

* * *

是的，甚至`vertical-align: bottom`可以工作。

**[演示 2](http://jsfiddle.net/wfuks/7/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:17:29.747

据我了解，您的意思是`div class= 'field_box'`. `0px`在此类中进行填充以删除文本区域下的空间。

如果您指的是文本区域中的填充：make padding= 0px in class`.field`

# ruby - 如何从特定数字制作序列？

> ID：13155367
> 
> 赞同：3
> 
> 时间：2012-10-31T10:00:10.770
> 
> 标签：ruby

如何从平方数的开头制作序列，然后将其添加到上一个结果中？

```
7 => 49, 56, 63, ...

def make_sequence(number)
  lambda { number*number ??? }
end

num = make_sequence(7)
num.call #=> 49
num.call #=> 56
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:10:18.247

按照你最初的想法使用闭包我会写：

```
def make_sequence(n)
  x = n**2 - n
  lambda { x += n }
end

num = make_sequence(7)
p num.call #=> 49
p num.call #=> 56 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T10:05:15.907

使用[枚举器](http://www.ruby-doc.org/core-1.9.3/Enumerator.html)

```
def make_sequence(start)
  pos = start**2
  Enumerator.new do |y|
    loop do
      y.yield(pos)
      pos += start
    end
  end
end

seq = make_sequence(7)
seq.next   #=> 49
seq.next   #=> 56

... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T10:08:52.337

[光纤](http://www.ruby-doc.org/core-1.9.3/Fiber.html)版本：

```
def make_sequence(num)
  inc = num
  num = num*num
  Fiber.new do
    loop do
      Fiber.yield(num)
      num += inc
    end
  end
end

a = make_sequence(7)
p a.resume  #=> 49
p a.resume  #=> 56
p a.resume  #=> 63
... 
```

# android - 在android中滚动列表背景更改

> ID：13155369
> 
> 赞同：1
> 
> 时间：2012-10-31T10:00:18.327
> 
> 标签：android, listview

```
public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder = null;
        int type = getItemViewType(position);

        if (convertView == null) {
            holder = new ViewHolder();
            switch (type) {
            case TYPE_ITEM:
                System.out.println("getView position " + position);

                convertView = mInflater.inflate(R.layout.groupitem, null);

                holder.textView = (TextView) convertView
                        .findViewById(R.id.textitem);
                holder.btn = (Button) convertView
                        .findViewById(R.id.button1);
                holder.btn.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        Toast.makeText(getApplicationContext(),
                                "Clickable button", Toast.LENGTH_LONG)
                                .show();
                        // TODO Auto-generated method stub

                    }
                });

                break;
            case TYPE_SEPARATOR:
                convertView = mInflater.inflate(R.layout.groupheader, null);
                holder.textView = (TextView) convertView
                        .findViewById(R.id.textSeparator);
                break;
            }
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        if(position==1){
            convertView.setBackgroundResource(R.drawable.celltop);
            }
        else if (position>1 && position!=1) {
            convertView.setBackgroundResource(R.drawable.cellcenter);
        }
        holder.textView.setText(mData.get(position));
        return convertView;
    } 
```

开始时它的背景是正确的。但是当我向下滚动列表并再次返回顶部其背景更改时。例如，单元格顶部背景位于顶部，即标题。我只想为项目设置背景

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:45:15.607

更新：不要根据位置设置视图的背景，因为一旦滚动，UI 视图的位置就会改变。尝试为视图设置标签并以标签为条件为视图设置背景。这是您的自定义适配器的`Overrided getView`方法。

```
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
View vi = convertView;
    if (convertView == null)
        vi = inflater.inflate(R.layout.list, null);
TextView description = (TextView) vi.findViewById(R.id.description);
description.setTag(myArrayList.get(position).get("hashmamkey")); 
// Where myArrayList is ArrayList<HashMap<String,String>>

// Now make a condition  
if((HashMap<String,String>) description.getTag().equals("value")){
// Do Your change background for view Work Here
}

} 
```

# xslt - 在多页pdf的流程中附加一个块

> ID：13155370
> 
> 赞同：0
> 
> 时间：2012-10-31T10:00:23.897
> 
> 标签：xslt, xsl-fo, antenna-house

我的场景： - 我正在使用 Antenna house XSL Formatter - 多页 PDF 生成分为所有页面中的两列 **- 我想在正文区域内第一页的第二列中添加一个块（免责声明）。**

它应该看起来与图像描述的方式相同。如果可能，请向我提供解决方案或参考资料。 ![这是第 1 页的布局，我需要在数据流中附加免责声明块](../Images/30e5ce5b5604f2e1730b2288a3f69ad4.png) ![这是其余页面的布局](../Images/6e7c4fcddd10084ebfce8b17a397852f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:23:46.313

我使用了另一种方法，通过我的数据 xml 传递标志来允许数据流中的免责声明。

不过谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:25:25.353

AH Formatter V6.0 能够将浮动内容排列在页面的任意位置，将浮动内容排列成多列布局，浮动的列跨越。因此，AH Formatter V6.0可以在对带有插图的文档进行格式化的同时，满足各种排版需求。

# spring - Spring托管事务中的两个JPA EntityManager？

> ID：13155373
> 
> 赞同：0
> 
> 时间：2012-10-31T10:00:35.883
> 
> 标签：spring, hibernate, jpa, transactions, spring-transactions

我正在使用 Spring 的事务支持和 JPA (Hibernate) 来持久化我的实体。一切正常，但在处理一个请求中的部分更新时我被卡住了：

对于每个用户 (HTTP) 请求，我必须将日志条目写入数据库表，即使“主要”业务实体的更新失败（例如由于验证错误）。所以我的第一个/主要事务得到回滚，但第二个（写日志）应该提交。这似乎可以使用正确的传播级别来编写日志条目：

```
@Repository
@Transactional(propagation = Propagation.REQUIRES_NEW)
public class UserTracker extends ... {

  @PersistenceContext private EntityManager em;

  public void log(...) {
    // create log entity and persist it
    ...
    em.persist(log);
    em.flush();
  }

} 
```

但是，我的问题是，我在第二个事务中注入了与第一个事务中相同的 EntityManager。因此刷新实体管理器（在第二个事务提交时显式或隐式）也将从第一个事务中刷新我的脏业务实体。

我该如何补救？我想为日志记录部分使用第二个、干净和新鲜的 EntityManager，我知道我可以以编程方式打开一个，但是是否有一种更清洁/声明性的“Spring-way”来做到这一点？

**编辑：**

我的问题可能源于这样一个事实，即我的第二个事务嵌套在我的主要业务事务中：

```
|-------------- A --------------X   <- Rollback of main business transaction (A)
                    |--- B ---|     <- Commit of second log transaction (B) 
```

我已经解决了序列化两个事务的问题：

```
|--------- A --------X |--- B ---| 
```

所以现在一切都很好，但只是出于好奇：如果我坚持我的第一种方法而不是按照建议使用 JDBC：我将如何为第二个（嵌套）事务配置实体管理器，以便我得到一个新的新的交易。这可以做到吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-31T14:07:55.993

我不确定您为什么遇到您报告的问题，如果您的日志记录代码和业务逻辑代码具有 REQUIRE_NEW 则它们之间应该没有干扰。我的代码中有一个非常相似的设置。你确定交易是在你认为的地方触发的吗？你使用的是代理交易还是aspectJ交易？

如果您使用代理交易，那么您必须小心通过代理以确保 tx 启动。

您可以做的另一件事是使用 SpringJDBC 模板进行用户日志记录，让 @Repository 使用 EntityManager 和 JDBCTemplate 做一些事情是非常好的，只是不要将它们混合在同一个方法中。

# spring - Mule JMX 代理 - 需要在运行时更新端口值

> ID：13155381
> 
> 赞同：3
> 
> 时间：2012-10-31T10:01:10.633
> 
> 标签：spring, mule

我正在使用一个弹簧属性“端口”，但是当应用程序运行时，这个端口变量的值会动态变化，我想在每次它的值变化时访问这个新的动态值。但是在使用下面的配置时，我在启动时遇到了异常。

```
<custom-agent name="jolokia-agent" class="org.jolokia.mule.JolokiaMuleAgent">
    <spring:property name="port" value="#[app.registry.appConf.port]"</spring:property>
</custom-agent> 
```

appConf 是一个 Spring Bean。

错误片段：

```
10/31/12 15:18:44.244 ERROR [main] DefaultMuleApplication - null
 java.lang.NumberFormatException: For input string: "[app.registry.appConf.port]"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
    at java.lang.Integer.parseInt(Integer.java:449)
    at java.lang.Integer.valueOf(Integer.java:528)
    at java.lang.Integer.decode(Integer.java:958)
    at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:155)
    at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.j    ava:115)
    at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.ja    va:434)
    at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:4    06)
    at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.ja    va:163)
    at org.springframework.beans.BeanWrapperImpl.convertIfNecessary(BeanWrapperImpl.java:470)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:516)
    at org.springframework.beans.BeanWrapperImpl.convertForProperty(BeanWrapperImpl.java:510) 
```

当我将 value 属性更改为 Spring Expression
**value="#{appConf.port}"**
但该值在运行时未更新时，应用程序启动了。

我需要在运行时更改此值。如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:25:14.063

`appConf`只需将POJO注入`jolokia-agent`.

这样你就可以`getPort()`在运行时调用它。

# java - JScrollPane - 相对于鼠标位置缩放

> ID：13155382
> 
> 赞同：10
> 
> 时间：2012-10-31T10:01:12.863
> 
> 标签：java, swing, mouse, zooming, jscrollpane

放大图像时，我需要计算视口的新位置。

UI的构建如下：

*   ImagePanel 绘制图像
*   ImagePanelWrapper 是一个包裹在 imagePanel 周围的 JPanel
*   JScrollPane 包含 ImagePanelWrapper

放大或缩小时，ImagePanel 的缩放系数会发生变化，并且会重新计算 ImagePanel 的首选大小。因此，即使 ImagePanel 保持在同一视口点，此面板上的图像也会移动。

当用户按住 CTRL 并使用鼠标滚轮时，将调用以下方法。给**定点**是 MouseWheelListener 提供的光标位置。借助这些方法中的功能，图像在放大或缩小时已经保持在相同的左上角位置。

问题是我不知道如何相对于鼠标移动，例如 Paint.NET。有任何想法吗？

```
/**
 * 
 */
public void zoomOut(Point point) {
    this.imagePanel.setZoom(this.imagePanel.getZoom() * 0.9f);
    Point pos = this.getViewport().getViewPosition();

    int newX = (int) (pos.x * 0.9f);
    int newY = (int) (pos.y * 0.9f);
    this.getViewport().setViewPosition(new Point(newX, newY));

    this.imagePanel.revalidate();
    this.imagePanel.repaint();
}

/**
 * 
 */
public void zoomIn(Point point) {
    this.imagePanel.setZoom(this.imagePanel.getZoom() * 1.1f);
    Point pos = this.getViewport().getViewPosition();

    int newX = (int) (pos.x * 1.1f);
    int newY = (int) (pos.y * 1.1f);
    this.getViewport().setViewPosition(new Point(newX, newY));

    this.imagePanel.revalidate();
    this.imagePanel.repaint();
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-29T19:26:45.880

如果这些假设是真的：

*   提供的 Point 相对于视口的左上角。
*   视口的尺寸小于底层的 ImagePanel。

然后可以调整视口，使光标在缩放操作之前和之后在图像中的同一点上，如果按以下方式移动：

```
 /**
 * 
 */
public void zoomOut(Point point) {
    this.imagePanel.setZoom(this.imagePanel.getZoom() * 0.9f);
    Point pos = this.getViewport().getViewPosition();

    int newX = (int)(point.x*(0.9f - 1f) + 0.9f*pos.x);
    int newY = (int)(point.y*(0.9f - 1f) + 0.9f*pos.y);
    this.getViewport().setViewPosition(new Point(newX, newY));

    this.imagePanel.revalidate();
    this.imagePanel.repaint();
}

/**
 * 
 */
public void zoomIn(Point point) {
    this.imagePanel.setZoom(this.imagePanel.getZoom() * 1.1f);
    Point pos = this.getViewport().getViewPosition();

    int newX = (int)(point.x*(1.1f - 1f) + 1.1f*pos.x);
    int newY = (int)(point.y*(1.1f - 1f) + 1.1f*pos.y);
    this.getViewport().setViewPosition(new Point(newX, newY));

    this.imagePanel.revalidate();
    this.imagePanel.repaint();
} 
```

为了完整起见，这是数学：

![在此处输入图像描述](../Images/9e9ace26c11b70e59feafc0e55464713.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T10:14:11.433

您应该能够使用`point.x`和获取鼠标指针的位置`point.y`- 请参阅[此处](http://docs.oracle.com/javase/6/docs/api/java/awt/Point.html)`Point`的文档。[根据此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/MouseWheelEvent.html)的文档，和是相对于鼠标下的组件（）。`MouseMotionEvent``point.x``point.y``JScrollPane`

您可以将这些值合并到您的计算中。这有点像你要找的吗？

# sql-server - 如何在 Sql Server 中使用 Group By 和动态 SQL 查询

> ID：13155383
> 
> 赞同：0
> 
> 时间：2012-10-31T10:01:12.523
> 
> 标签：sql-server

我有一个程序可以获取某些信息。我在其中添加了一个获取帐户数量的字段。为此，我使用了“计数”聚合函数。现在既然已经添加了 Count，它也应该有一个按功能分组的功能。我正在尝试将 Group By 添加到其中，但找不到将 Group By 与 Dynamic SQL 一起使用的确切语法。以下是与该过程一起使用的查询：

```
DECLARE @SQL  nvarchar(max),@paramlist nvarchar(max) 
SELECT @SQL = 'SELECT awt.AcctID, MIN(CAST(awt.autoEnter AS SMALLINT)) AS AutoApproved                
FROM dbo.AccountWorkflowTask awt JOIN dbo.WorkflowTask wt ON awt.WorkflowTaskID = wt.WorkflowTaskID                
WHERE (wt.TaskID IN (9, 17) AND ReasonIDExit = 1)'

SELECT @SQL=@SQL+')) '                                    
SELECT @SQL=@SQL+'SELECT a.ApplID, acct.AcctID, acct.dtApplication, ai.FName, ai.MName, ai.LName, ai.SSN, a.Email, ao.CompanyName,'                
SELECT @SQL=@SQL+'ao.DBAName, ao.TaxID, acct.AcctNum, acct.AcctAffinityNum, luA.AffinityNum, luA.AffinityName, t.TaskDesc, awt.dtEnter, 
Count(DMA.AcctNum) As NoOfAccounts   FROM   dbo.Applicant a JOIN dbo.APPLICANTACCOUNT aa ON a.ApplID = aa.ApplID'

JOIN 'TO SOME TABLE'

WHERE 'Some Condition' 
```

现在我想使用 to Group By 子句来获取 NoOfAccounts 的计数。我无法获得它的语法。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:11:03.163

[根据您的评论，如果您使用OVER 子句](http://msdn.microsoft.com/en-us/library/ms189461.aspx)，则不需要 GROUP BY

改用这个

```
Count(DMA.AcctNum) OVER () AS NoOfAccounts 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:42:46.750

我得到了我的问题的答案。我必须在动态 Sql 中使用 Group By，如下所示：

```
SELECT @SQL=@SQL+ ' GROUP BY a.ApplID, acct.AcctID, acct.dtApplication, ai.FName, ai.MName, ai.LName, ai.SSN, a.Email, ao.CompanyName,                
ao.DBAName, ao.TaxID, acct.AcctNum, acct.AcctAffinityNum, luA.AffinityNum, luA.AffinityName, t.TaskDesc,                
awt.dtEnter, q.QueueDesc, w.WorkflowID, w.WorkflowDesc,                
luO.OriginationID, luO.OriginationDesc, aco.dtCheckOut, aco.UserCheckOut, aco.GUIDCheckout, lts.TaskStageDesc,                
acct.dtApplication,cteAge.Age, asa.SOAApplID, w.WorkflowID, luO.OriginationID, awt.userEnter, cteAutoApprove.AutoApproved,          
acctLam.Market, ful.Request, fun.SourceAccountTypeDescription, fun.FundingStatus, acct.BrokerCode,            
  ai.SSN, ao.TAXID, bup.BusPurposeDesc, ao.BusPurposeOther,                             
  note.Note, note.NoteReasonDesc, note.ReasonCode, aa.RelationshipCode, luRel.RelationshipCodeDesc, Addr.Address1, Addr.Address2, 
  Addr.City, Addr.State, Addr.Zip' 
```

# dart - 包“log4dart”依赖于“托管”和“git”两个来源

> ID：13155384
> 
> 赞同：6
> 
> 时间：2012-10-31T10:01:17.187
> 
> 标签：dart, dart-pub, dart-editor

尝试从以下链接查看教程：

[http://blog.dartwatch.com/2012/03/building-client-server-dart-app-part-1.html](http://blog.dartwatch.com/2012/03/building-client-server-dart-app-part-1.html) [http://blog.dartwatch.com/2012/03/building-client-server-dart -app-part-2.html](http://blog.dartwatch.com/2012/03/building-client-server-dart-app-part-2.html)

这是我的**pubspec.yaml**：

```
name:  myapp
description:  A sample application

dependencies:
  log4dart: any
  mongo_dart: 0.0.1
  unittest: { sdk: unittest }
  crimsonhttp:
    git: git://github.com/chrisbu/CrimsonHttp.git 
```

这是错误：

*解决依赖关系...*

*包“log4dart”依赖于“托管”和“git”两个来源。*

我是否将“log4dart”添加到 pubspec（任何）都没有关系。错误总是一样的。无论如何，“log4dart”是从“mongo_dart”安装的。有没有人对该特定错误消息有任何经验？对我来说，这似乎是一个循环依赖问题。

**解决方案** 在 'crimsonhttpd' 解决问题或接受我的[拉取请求](https://github.com/chrisbu/CrimsonHttp/pull/8)之前，请使用我来自 github 的存储库和以下 pubspec 示例：

```
name:  myapp
description:  A sample application

dependencies:
  mongo_dart: 0.0.1
  unittest: { sdk: unittest }
  crimsonhttp:
    git: git://github.com/geekrumper/CrimsonHttp.git
  log4dart: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T20:57:52.393

John 是正确的，解决方法是为 log4dart 指定与 crimson 相同的 git repo。

包由它们的（来源，描述）对标识。对于托管包，描述只是包名称，但对于 Git 包，描述还包括 Git URL。因此，来自不同存储库的 log4dart 的两个 Git 签出也将不兼容。

我已经打开了两个错误来修复您尝试使用的软件包：

*   [https://github.com/Solvr/log4dart/issues/5](https://github.com/Solvr/log4dart/issues/5) -- 更新：已修复！
*   [https://github.com/chrisbu/CrimsonHttp/issues/7](https://github.com/chrisbu/CrimsonHttp/issues/7) -- 更新：已修复！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T13:10:26.427

我不确定为什么这对 pub 来说是一个错误，但似乎 crimsonhttp 引用了 log4dart 的 git 版本。这可能是错误消息的原因。

要解决此问题，您可以在自己的 pubspec 中引用 git: 版本的 log4dart。

# entity-framework - Code First 一对一关系

> ID：13155385
> 
> 赞同：0
> 
> 时间：2012-10-31T10:01:17.517
> 
> 标签：entity-framework, ef-code-first, code-first, one-to-one

我正在编写一个模型，使用 Code First，有两个实体：“Action”和“Permission”。

每个权限都指向一个操作。没有两个权限可以指向同一个操作。一个动作可能在没有被许可指向的情况下存在。

操作不应该知道权限。

我的代码是：

```
public Action
{
  public Guid Id {get; set;}
  public string Name {get; set;}
}

public Permission
{
  public Guid Id {get; set;}
  public string Name {get; set;}

  public Action Action {get; set;}
} 
```

另外，我使用 Fluent API 配置了权限：

```
modelBuilder.Entity<Permission>.HasRequired(p => p.Action).WithOptional()
            .WillCascadeOnDelete(); 
```

* * *

当我尝试删除操作时，我收到以下错误：

> “不允许添加与处于已删除状态的实体的关系”。

我尝试先删除权限，然后删除操作。为此，我需要获取给定操作 ID 的权限，但我收到此错误：

```
var permission = (from p in context.Permissions.Include(p => p.Action)
                  where p.Action.Id == actionId
                  select p).Single(); 
```

> “不支持索引属性”

我究竟做错了什么？有没有更好的方法来模拟这个？

谢谢！尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T20:59:07.507

三个建议，第一个没试过，看看是否有效：

建议 #1 将具有 FK 属性的外键添加到模型中，例如：

```
public Permission
{
  public Guid Id {get; set;}
  public string Name {get; set;}

  [ForeignKey("Action")]
  public int ActionId {get; set;}
  public Action Action {get; set;}
} 
```

然后尝试：

```
var permission = (from p in context.Permissions.Include(p => p.Action)
              where p.ActionId == actionId
              select p).Single(); 
```

建议 #2 可以在这里找到：

[EF 4.1：.WithMany() 和 .WithOptional() 之间的区别？](https://stackoverflow.com/questions/5421707/ef-4-1-difference-between-withmany-and-withoptional)

建议#3

我们有类似的模式，但我们让双方都了解对方。您是否有充分的理由不想在 Action 中包含 Permission 导航属性？您可以执行以下操作：

```
public Action
{
  public Guid Id {get; set;}
  public string Name {get; set;}

  // notice the FK is nullable 
  public int? PermissionId {get; set;}
  public Permission {get; set;}
} 
```

以下是我们构建模型的方式，每个 Document 与 DocumentType 有 1..1 的关系：

```
public class Document 
{ 

#region " Mutually exclusive document type relationships, necessary for setting up shared primary key in db "
public BindingAgreement BindingAgreement { get; set; }
public CeoLetter CeoLetter { get; set; }
public Email Email { get; set; }
....   
#endregion
//other code
}

Public class BindingAgreement 
{
  public Document {get;set;}
  // other code
}

Public class CeoLetter 
{
  public Document {get;set;}
  // other code
}

Public class Email 
{
  public Document {get;set;}
  // other code
} 
```

然后在我的模型构建器中我这样做：

```
 //Binding Agreement
  modelBuilder.Entity<BindingAgreement>().HasRequired(c => c.Document);

  //Ceo Letter
  modelBuilder.Entity<CeoLetter>().HasRequired(c => c.Document);

  //Email
  modelBuilder.Entity<Email>().HasRequired(c => c.Document); 
```

除此之外，我使用整数作为我的主键，但我不明白为什么这是一个因素。

如果您可以拥有无​​权限的操作，我也不确定您是否需要删除级联。如果您不能拥有无 oa 权限的操作，则需要使用 (Has/With)Required fluent map 或通过以允许 CF 解释您的意图的方式显式构建代码来表明这一点。

稍后我将尝试前两个建议，并让您知道我的结果。

# c# - 如何在调试中隐藏 xaml ui 元素

> ID：13155397
> 
> 赞同：7
> 
> 时间：2012-10-31T10:01:53.330
> 
> 标签：c#, wpf, silverlight, xaml

我在 xaml 中创建了一个文本框来监视一个值。这在开发时很有用，但我想在发布编译时隐藏它。我知道我可以通过设置可见性来隐藏 texbox，但我想自动化它。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T10:10:23.960

我不确定您是否可以通过定义条件编译指令直接在 XAML 中执行此操作。但它使用代码隐藏文件工作。

首先为您的 TextBox 命名以在代码隐藏文件中访问它。

```
<TextBox x:Name="debugTextBox" /> 
```

然后将代码添加到您的代码隐藏中（如构造函数）

```
#if DEBUG
  debugTextBox.Visibility = Visibility.Visible;
#else
  debugTextBox.Visibility = Visibility.Hidden; // or Collapsed
#endif 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T12:44:36.210

[这里](http://www.removingalldoubt.com/post.aspx?id=df1ecd61-3c77-49ad-9491-00aa05fab2f1)有一篇很棒的文章，描述了如何使用 XML 命名空间定义来启用功能。一般来说，这是一种非常低摩擦的方法。

# extjs - 带网格的 ExtJS 4 行扩展器

> ID：13155398
> 
> 赞同：3
> 
> 时间：2012-10-31T10:01:57.380
> 
> 标签：extjs, extjs4

如何解决带有子网格的网格行扩展器？以纯文本形式获取价值可以正常工作。

有什么方法可以在 Grid 中创建 Grid 以从 JSON 数据中获取价值？

我想使用 MVC 架构创建这个结构。

```
Ext.define('CSApp.view.ContentGrid',
{
 extend: 'Ext.grid.Panel',
 store: 'Details',
 width: 840,
 height:45,
 initComponent: function()
 {
 this.columns = [
 {header: 'TASK ID', dataIndex: 'taskID', flex:1},
 {header: 'ITEM', dataIndex: 'name', flex:1},
 {header: 'EXISTING VALUE', dataIndex: 'value', flex:1},
 {header: 'NEW VALUE', dataIndex: 'newValue', flex:1}];
 this.callParent(arguments);
 }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T18:26:56.527

我有一个类似的场景：拥有自己的记录数据（地址、电话、帐户余额等）的客户列表，每个客户也有一个包含一组“付费”项目的帐户。换句话说，我需要一个可以行扩展的客户网格，以打开他们自己的“帐户网格”，显示一个项目网格，其中包含有关项目的相关数据、他们支付的金额等。

我精简了一堆不相关的配置和其他代码，但这是我用于“外部”网格的视图示例：

```
Ext.define('MyApp.view.CustomerGrid', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.customergrid',
    requires: [
        'Ext.ux.RowExpander'
    ],
    title: 'Customer Grid',
    plugins: [{
        ptype: 'rowexpander',
        pluginId: 'rowexpander',
        selectRowOnExpand: true,

        // this gives each row a unique identifier based on record's "acct_no"
        rowBodyTpl: [
            '<div id="AccountGridRow-{acct_no}" ></div>'
        ],

        // stick a grid into the rowexpander div whenever it is toggled open
        toggleRow: function(rowIdx) {
            var rowNode = this.view.getNode(rowIdx),
                row = Ext.get(rowNode),
                nextBd = Ext.get(row).down(this.rowBodyTrSelector),
                hiddenCls = this.rowBodyHiddenCls,
                record = this.view.getRecord(rowNode),
                grid = this.getCmp(),
                acctNo = record.get('acct_no'),
                targetId = 'AccountGridRow-' + acctNo;

            if (row.hasCls(this.rowCollapsedCls)) {
                row.removeCls(this.rowCollapsedCls);
                this.recordsExpanded[record.internalId] = true;
                this.view.fireEvent('expandbody', rowNode, record, nextBd.dom);

                if (rowNode.grid) {
                    nextBd.removeCls(hiddenCls);
                    rowNode.grid.doComponentLayout();
                    rowNode.grid.view.refresh();
                } else {

                    // this is the store for the inner grid
                    Ext.create('Ext.data.Store', {
                        model: 'MyApp.model.Account',
                        proxy: {
                            type: 'ajax', 
                            url: 'customers',
                            reader: 'json'
                            extraParams: {
                                account: acctNo
                            }
                        },
                        autoLoad: {
                            callback: function() {

                                // create the inner grid and render it to the row
                                nextBd.removeCls(hiddenCls);
                                var grid = Ext.create('MyApp.view.AccountGrid', { // <-- this is my "inner" grid view
                                        renderTo: targetId,
                                        store: this,
                                        row: row
                                    });

                                rowNode.grid = grid;

                                // I didn't want to listen to events from the inner grid
                                grid.suspendEvents(); 
                            }
                        }
                    });
                }

            } else {
                row.addCls(this.rowCollapsedCls);
                nextBd.addCls(this.rowBodyHiddenCls);
                this.recordsExpanded[record.internalId] = false;
                this.view.fireEvent('collapsebody', rowNode, record, nextBd.dom);
            }
        }
    }],
    columns: [/* a bunch of column configs for the outer grid... */],
    store: Ext.getStore('StudentList') // <-- the outer grid store

}); 
```

基本上我只是重写了将`toggleRow`另一个网格 ( `MyApp.view.AccountGrid`) 粘贴到 rowexpander div 中的函数。

效果很好，应用程序现已完成。

我在缓存对象中有内部“帐户”网格的数据，以便 ajax 在 50 - 100 毫秒内返回。如果您有某种长查询来获取内部网格数据，我会发现这是行不通的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:27:34.850

RowExpander 不允许嵌套网格结构。它所允许的只是在行正文中插入任何 HTML。这意味着您可以在展开的行内创建一个 HTML 表格，但它不是另一个 Ext Grid。

# web-services - Flex：多个模块冲突

> ID：13155400
> 
> 赞同：1
> 
> 时间：2012-10-31T10:02:06.627
> 
> 标签：web-services, apache-flex, module, blazeds

我在一个`Flex`应用程序中有多个模块。它们都具有对远程应用程序的 Web 服务调用。**模块 1**是一个搜索引擎，需要长时间运行 Web 服务调用，在等待期间，我加载了**模块 2**。**模块 2**中应加载的参数无法加载，因为**模块 1**的 Web 服务尚未返回。

所有这些模块都通过`BlazeDS`. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:00:28.097

在模块 2 中等待通过模块 1 加载的数据。

# objective-c - 在包中创建笔尖

> ID：13155401
> 
> 赞同：0
> 
> 时间：2012-10-31T10:02:08.493
> 
> 标签：objective-c, ios, xcode

我是 ios 新手，无法完成非常简单的事情。

```
TableViewController *tableVC = [[TableViewController alloc] initWithNibName:@"TableView" bundle:nil andType:CONTROLLER_TYPE_FIRST];
ViewController *wizard = [[ViewController alloc] initWithNibName:@"WizardView" bundle:nil andtype:first];
UINavigationController *navC = [[UINavigationController alloc] initWithRootViewController:wizard]; 
```

用 tableVC 初始化，可以。但是如果我用向导初始化我会得到

```
'Could not load NIB in bundle: 'NSBundle </Users/Mac/Library/Application Support/iPhone Simulator/6.0/Applications/60750878-E595-4A24-B0B8-F65DA78128C0/kodinisRaktas.app> (loaded)' with name 'WizardView'' 
```

如何处理这个捆绑笔尖以使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:10:11.707

案例：

1.  `ViewController` `doesnot have .xib`.
2.  `ViewController does have .xib but its name is not 'WizardView'`.

解决方案：

情况1：

```
 ViewController *wizard = [[ViewController alloc] init]; 
```

案例二：

```
use correct name of .xib file 
```

# java - 使用spring单击java中的提交按钮后如何转到下一页

> ID：13155403
> 
> 赞同：3
> 
> 时间：2012-10-31T10:02:12.890
> 
> 标签：java, spring, spring-mvc

我只需要在单击提交按钮后重定向到一个页面，而不是直接在地址栏中输入 url。如果直接在地址栏中输入，那么它应该显示主页。

我正在使用 session.getAttribute 来完成上述过程。我在想是否有任何替代方法，因为我需要为每个发布方法都这样做......

下面的方法适用于第一页，我在其中创建了一个会话属性，用于下一页。

```
 @RequestMapping(value = "/payment", method = RequestMethod.POST)
public String submitForPayment(@ModelAttribute("deposit") Deposit deposit, ModelMap model, HttpServletRequest request) throws IOException 
{
            try {
                HttpSession sessionForNextPage = request.getSession(true);
                sessionForNextPage.setAttribute("vNumber",
                        deposit.getValidityNumber());

                    return "redirect:success";

            } catch (NullPointerException exception) {
                return "redirect:payment";
            }
        } 
```

下面的方法适用于使用上面声明的会话的下一页。

```
@RequestMapping(value = "/success", method = RequestMethod.GET)
public String showSuccess(ModelMap model, HttpServletRequest request) 
          {
        try {

            view = "success";
            HttpSession session = request.getSession(false);
            int vNumber = (int) session.getAttribute("vNumber");
            System.out.println(vNumber);
            if (vNumber != 0) {
                request.getSession(false).removeAttribute("vNumber");
                return view;
            }

            else
                return "pay";
        } catch (Exception e) {

            return "redirect:pay";
        }
    } 
```

有没有其他方法可以做到这一点，因为我必须对所有方法都这样做......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:25:02.427

每当我必须进行 post 提交时，我总是使用中间页面来捕获 POST 数据并将数据存储在数据库中并将记录密钥存储在会话中并将其重定向到显示页面，在那里我检查记录 ID（如果存在）然后我从数据库中检索数据并显示它，如果不显示错误消息。

因此，即使有人直接访问您的显示页面（输入 url），它也会显示错误消息，并且在大多数情况下，人们不会看到中间页面 url，但即使他们看到，您也可以为您的 html FORM 和存储使用随机令牌在会话中并在中间页面上验证它。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T07:10:18.217

使用拦截器并在拦截器方法中确定引荐来源网址。为您需要拦截的每个操作或某些操作调用拦截器。

```
public class AppInterceptor extends HandlerInterceptorAdapter{

    //before the actual handler will be executed
    public boolean preHandle(HttpServletRequest request, 
    HttpServletResponse response, Object handler) throws Exception {
        return true;
    }

//after the handler is executed
    public void postHandle(HttpServletRequest request, HttpServletResponse response, 
    Object handler, ModelAndView modelAndView) throws Exception {
        String referrer = request.getHeader("referer");
        // if the referrer string is null, it means the url is invoked by typing into address bad and then you can decide of redirecting user to home page.
    }
} 
```

这将起作用。

# javascript - 如何使用 ExtJs 将表单放入 TabPanel 中？

> ID：13155413
> 
> 赞同：2
> 
> 时间：2012-10-31T10:02:45.590
> 
> 标签：javascript, extjs

我想在 tabPanel 中放置一个表单。我这样做：

形式：

```
var zem = new Ext.FormPanel({
    title: 'Общие сведения',
    bodyStyle:'padding:5px 5px 0',
    items: [{
        xtype:'textfield',
        fieldLabel: 'Местоположение',
        name: 'address',
        anchor:'80%'
    },{
        layout:'column',
        items:[{
            columnWidth:.5,
            layout: 'form',
            items: [{
                xtype:'textfield',
                fieldLabel: 'Кадастровый номер',
                name: 'cadastr',
                anchor:'80%'
            }]
        },{
            columnWidth:.5,
            layout: 'form',
            items: []
        }]
    }]
}); 
```

控制板：

```
var tabs = new Ext.TabPanel({
    xtype:'tabpanel',
    activeTab: 0,
    autoScroll: false,
    layoutOnTabChange: true,
    items: [zem]
}); 
```

我明白了：

![在此处输入图像描述](../Images/375324287d6b4a836b675c0ed5de7438.png)

我得到一个空标签。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T10:39:32.667

不可能将 FormPanel 放在另一个 FormPanel 中的 TabPanel 中。我会像[例子](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/form/dynamic.html)中那样做。

# javascript - 在谷歌地图上模拟路线

> ID：13155418
> 
> 赞同：1
> 
> 时间：2012-10-31T10:02:56.343
> 
> 标签：javascript, google-maps-api-3

当我想在 Google 地图上模拟路线时，我遇到了一些问题。

*   JavaScript`closure`问题。
*   如何`setTimeout`动态更改时间间隔。

我有一个位置数据列表，在 lacation 对象中有不同的有用属性供我在 Google 地图上呈现，例如 Lat、Lng 和 Time 等...

我想每 500 毫秒创建一个 Google 地图标记（* 动态更改间隔）来模拟地图上的路线路径，但每次我得到相同的位置数据。

以下是 JavaScript 代码：

```
function playback(data) {
    data = [{ Time: 2010, Lat: 1.36046, Lng: 103.897018 }, { Time: 2011, Lat: 1.352566, Lng: 103.855768 }, { Time: 2012, Lat: 1.349477, Lng: 103.802553}];

    for (i = 0; i < data.length; i++) {
        setTimeout(function () { printlocation(data[i]); }, i * 500);
    }
}

function printlocation(cur) {
    alert(cur.Time);
} 
```

当代码运行时，它会打印 2012 3 次。

经过研究，可能是因为 JavaScript `closure`，但我不太了解它是如何工作的。我想找到一种模式来解决我的两个问题。先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:15:04.743

**未经测试：**

```
// Global variable
    var dataArray = [{ Time: 2010, Lat: 1.36046, Lng: 103.897018 }, { Time: 2011, Lat: 1.352566, Lng: 103.855768 }, { Time: 2012, Lat: 1.349477, Lng: 103.802553}];

        function playback() {
            for (i = 0; i < dataArray.length; i++) {
                var data = getData(i);
                setTimeout(function () { printlocation(data); }, i * 500);
            }
        }

            function getData(ix) {
                return dataArray[ix];
            } 
```

# c# - 在单个视图上显示两个不同的 ValidationSummary 控件。银光

> ID：13155419
> 
> 赞同：2
> 
> 时间：2012-10-31T10:02:58.620
> 
> 标签：c#, .net, silverlight, xaml, validationsummary

如果我想在我的视图上显示两个不同的 ValidationSummary 控件，我需要做什么？第一个控件是显示常规验证错误的控件，很简单。第二个是 ValidationSummary 控件，它应该包含警告，但不包含错误。

为此，我尝试按照以下步骤操作：

1.  将新属性添加到我的 ViewModel。该属性实现 INotifyDataErrorInfo 接口并继承自 FrameworkElement。
2.  将 ValidationSummarys 的***目标***绑定设置为属性。
3.  向集合调用属性的 ErrorChange 添加新警告时。

但 ValidationSummary 不显示任何警告。甚至不订阅此属性的 ErrorChange 事件。

我做错了什么？

# c - 使用 GCC + ARM 减少递归期间的堆栈使用

> ID：13155421
> 
> 赞同：6
> 
> 时间：2012-10-31T10:03:00.323
> 
> 标签：c, memory, gcc, stack, arm

我有一个用于嵌入式 ARM 处理器的递归下降解析器（在 C + GCC 中，用于 ARM Cortex M3）。

在运行它时，我注意到它使用了大量的堆栈空间（甚至超出您的预期），并且在仔细检查后我发现这种情况正在发生：

```
extern int bar(int *p);

int foo() {
 int z = foo(); // it's an example!

 int n[100];  // stack usage
 return z+bar(n); // calling bar(n) stops n from being optimised out
} 
```

运行**arm-none-eabi-gcc -fomit-frame-pointer -S test.c 的结果**

```
foo:
    str lr, [sp, #-4]!  ; Push link register
    sub sp, sp, #412    ; Reserve space on stack, even if we don't need it now!
    bl  foo             ; Recurse
    str r0, [sp, #404]  ; Store result
    ... 
```

因此，在函数开始时，它将整个堆栈帧压入堆栈。然而，经过几次迭代后，它的堆栈上有很多尚未使用的东西。

理想情况下，我希望 GCC 生成：

```
foo:
    str lr, [sp, #-4]!  ; Push link register
    ; Don't reserve space, because we don't need it
    bl  foo             ; Recurse
    sub sp, sp, #412    ; Reserve space now
    str r0, [sp, #404]  ; Store result
    ... 
```

（这可能不正确，但我希望你明白）

使用下面的代码可以实现一些类似的事情，但它真的很讨厌（如果 GCC 内联 fooworker，它会再次中断！）。肯定有更好的办法？

```
int fooworker(int z) {
 int n[100];  // stack usage
 return z+bar(n); // calling bar(n) stops n from being optimised out
}

int foo() {
 return fooworker(foo());
} 
```

那么有没有办法告诉 GCC 只在基本块的开始处扩大堆栈，或者是否有一个“障碍”语句导致在该点添加额外的推送/弹出操作？我猜 GCC 正在使用一种 ARM 标准调用类型 - 但是有没有办法用另一种调用类型来标记这些函数，这种调用类型对堆栈来说更有效，或者有没有办法重写函数使得堆栈是使用更明智一点？

请不要告诉我不要使用递归，它没有回答问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:58:12.117

```
int *n = alloca(sizeof(*n) * 100); 
```

这很难看，我个人将函数分成两部分，但似乎在我的 gcc 上的 amd64 上的所有优化级别上都有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-22T14:15:17.327

这都容易被优化，但你也可以尝试引入一个新的范围：

```
extern int bar(int *p);

int foo() {
  int z = foo();

  {
    int n[100];
    return z+bar(n);
  }
} 
```

新作用域的引入意味着不`n`应该在之前`foo()`被调用。同样，优化*可能会*破坏所有这一切，就像您自己的解决方案或接受的解决方案一样。

# mysql - Perl 和 MySql 中的 utf8 编码

> ID：13155422
> 
> 赞同：15
> 
> 时间：2012-10-31T10:03:01.620
> 
> 标签：mysql, perl, utf-8

我的数据库（MySql）有一个 utf8_general 排序规则。我正在从数据库访问数据并显示一个网页（用 Perl 开发），它显示了具有不同字符的瑞典字符（ä、å、ö）。我检查了 Mysql 数据库，在那里我可以看到带有 ä,å,ö 字符的数据。访问数据时似乎存在编码问题。连接数据库时，使用以下代码

```
my($dbh) = DBI->connect($config{'dbDriver'},$config{'dbUser'},$config{'dbPass'}) or die "Kunde inte ansluta till $config{'dataSource'}: " . $DBI::errstr;
$dbh->{'mysql_enable_utf8'} = 1;
$dbh->do('set names utf8'); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T10:47:02.910

您需要设置`mysql_enable_utf8`连接：

```
 my($dbh) = DBI->connect(
     'dbi:mysql:test',
     'user',
     'password',
     {
         mysql_enable_utf8 => 1,
     }      
); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-31T11:33:06.497

如果每个 ä/å/ö 在输出中用两个字节表示，那么您也有可能对字符进行双重编码。（鉴于问题已经表明您在做`$dbh->{'mysql_enable_utf8'} = 1;`，我怀疑这是最有可能的情况。）鉴于您在网页上显示此内容，另一种可能性是该页面可能未指定字符集为 UTF- 8`<head>`和浏览器可能会错误地猜测它使用的字符编码。

仔细查看您的 webapp 框架、模板系统等，以确保这些值仅在从数据库检索到它们到达用户浏览器之间被编码一次。如果您正确配置它们，许多框架/模板引擎（例如我通常使用的 Dancer 和 TT 的组合）将自动处理输出编码，这意味着如果在输出之前对其进行显式编码，则数据将被双重编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:30:02.087

您需要在连接中将 Charset 设置为 utf8！

```
charset = utf8 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-10T13:42:30.817

这是完整的规格：

[http://search.cpan.org/~capttofu/DBD-mysql-4.038/lib/DBD/mysql.pm#mysql_enable_utf8](http://search.cpan.org/~capttofu/DBD-mysql-4.038/lib/DBD/mysql.pm#mysql_enable_utf8)

> 此外，打开这个标志告诉 MySQL 传入的数据应该被视为 UTF-8。这只有在作为调用 connect() 的一部分时才会生效。如果在连接后打开标志，则需要发出命令 SET NAMES utf8 才能获得相同的效果。

# php - PHP - MYSQL 存储过程输出参数

> ID：13155424
> 
> 赞同：1
> 
> 时间：2012-10-31T10:03:06.767
> 
> 标签：php, mysql, mysqli

我有一个 mysql 存储过程，它需要 3 个参数 - 2 In 和 1 out 我正在使用 mysqli 从 php 调用这个过程

该过程将返回 1 行，我在调用它时使用以下代码

```
 $result = $mysqli->query("call get_hybrid_auth_session('".$userId."','".$loginSystem."', @hybridAuthSession)");
    $result = $mysqli->query( 'SELECT @hybridAuthSession' );
    $row = $result->fetch_object(); 
```

当我对 $row 属性执行 var_dump 时，我得到以下文本

```
object(stdClass)#16 (1) { ["@hybridAuthSession"]=> string(287) ".a:3:{s:40:"hauth_session.twitter.token.access_token";s:56:"s:48:"23801232-fkv05uitVRobpItrFFUn15I4Ejl0w80pr7GOH0A";";s:47:"hauth_session.twitter.token.access_token_secret";s:51:"s:43:"VKsFaQWnP8n9OcZK3MDCgRHQY0roLTFVXesBuONCYJo";";s:34:"hauth_session.twitter.is_logged_in";s:4:"i:1;";}." } 
```

当我对 $row->{"@hybridAuthSession"} 属性执行 var_dump 时，我得到以下值

```
string(287) ".a:3:{s:40:"hauth_session.twitter.token.access_token";s:56:"s:48:"23801232-fkv05uitVRobpItrFFUn15I4Ejl0w80pr7GOH0A";";s:47:"hauth_session.twitter.token.access_token_secret";s:51:"s:43:"VKsFaQWnP8n9OcZK3MDCgRHQY0roLTFVXesBuONCYJo";";s:34:"hauth_session.twitter.is_logged_in";s:4:"i:1;";}." 
```

有没有办法在开始时不接收字符串（287）值？hybridAuthSession Out 参数在我的存储过程中定义为 Text

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T09:43:42.593

Var dump 在将文本输出到屏幕时添加了附加信息，这是它的预期行为。经过更多测试后，代码按预期工作

# x-cart - 希腊字母编码问题

> ID：13155425
> 
> 赞同：1
> 
> 时间：2012-10-31T10:03:15.580
> 
> 标签：x-cart

我使用的 x-cart 版本是 4.2.3。

我在功能中有希腊字母转换问题。即希腊字符αβΓ 正在转换为αββ“。有什么办法可以避免这些编码。这不是浏览器编码问题，服务器正在将这些希腊字母转换为这些字符。请让我知道是否有任何解决方案可以解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T11:56:53.410

这是数据库支持 utf8 编码的问题。

您可以尝试[此处](http://help.x-cart.com/index.php?title=X-Cart%3aFAQs#How_do_I_set_up_my_X-Cart_to_support_UTF-8.3F)提到的步骤（问题：“如何设置我的 X-Cart 以支持 UTF-8？”）

# android - 绘图不保留在视图上

> ID：13155428
> 
> 赞同：0
> 
> 时间：2012-10-31T10:03:23.363
> 
> 标签：android, graphics, view, paint, pen

我有一个包含我尝试在其上绘制的 CustomImage（扩展视图）的 Activity，我可以看到线条，但在我的 touchUp 上它们消失了。我这样设置油漆：

```
paint = (CustomImage) findViewById(R.id.paint);
mPaint = new Paint();
mPaint.setAntiAlias(true);
mPaint.setDither(true);
mPaint.setColor(0xFF000000);
mPaint.setStyle(Paint.Style.STROKE);
mPaint.setStrokeJoin(Paint.Join.ROUND);
mPaint.setStrokeCap(Paint.Cap.ROUND);
mPaint.setXfermode(null);
mPaint.setAlpha(0xFF);
mPaint.setMaskFilter(null);
mPaint.setStrokeWidth(50);
paint.setPaint(mPaint); 
```

这是我的 CustomImage 类：

```
public class CustomImage extends View {

private Bitmap bitmap;

public Context context;

Paint paint = new Paint();

private Canvas canvas = new Canvas();

private Path mPath = new Path();

private float mX, mY;

private static final float TOUCH_TOLERANCE = 4;

private float screenDensity;

int height, width;

public CustomImage(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init(context);
}

public CustomImage(Context context, AttributeSet attrs) {
    super(context, attrs);
    init(context);
}

public CustomImage(Context context) {
    super(context);
    init(context);
}

private void init(Context context) {
    this.context = context;
}

public void setImg(Context context, Canvas canvas, Bitmap bitmap, int width, int height) {
    this.bitmap = bitmap;
    canvas.drawBitmap(bitmap, 0, 0, null);
}

public void setPaint(Paint paint) {
    this.paint = paint;
}
public void getBitmap(Bitmap bitmap) {
    this.bitmap = bitmap;
}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    canvas.drawBitmap(bitmap, 0, 0, null);
    canvas.drawPath(mPath, paint);

}

private void touch_start(float x, float y) {
    mPath.reset();
    mPath.moveTo(x, y);
    mX = x;
    mY = y;
}

private void touch_move(float x, float y) {
    float dx = Math.abs(x - mX);
    float dy = Math.abs(y - mY);
    if ((dx >= TOUCH_TOLERANCE) || (dy >= TOUCH_TOLERANCE)) {
        mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
        mX = x;
        mY = y;
    }
}

private void touch_up() {
    mPath.lineTo(mX, mY);
    mPath.moveTo(mX, mY);
    canvas.drawPath(mPath, paint);
    mPath.reset();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);

        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();
        invalidate();
        break;
    }
    return true;
}
} 
```

首先，我在视图上设置了背景图像。然后我应该能够画出那幅画。该应用程序绘制了线条，但它们在修饰时消失了。我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:29:30.147

我使位图可变，然后应用 Canvas canvas = new Canvas(bitmap); 我如何使位图可变：

```
 public void setBitmap(Bitmap bitmap, Bitmap.Config targetConfig) throws Exception {
    System.out.println("CustomImage.setBitmap()");
    File file = new File("/mnt/sdcard/sample/temp.txt");
    file.getParentFile().mkdirs();
    randomAccessFile = new RandomAccessFile(file, "rw");
    int bWidth = bitmap.getWidth();
    int bHeight = bitmap.getHeight();
    FileChannel channel = randomAccessFile.getChannel();
    MappedByteBuffer map = channel.map(MapMode.READ_WRITE, 0, bWidth*bHeight*4);
    bitmap.copyPixelsToBuffer(map);
    bitmap.recycle();
    this.bitmap = Bitmap.createBitmap(bWidth, bHeight, targetConfig);
    map.position(0);
    this.bitmap.copyPixelsFromBuffer(map);
    channel.close();
    randomAccessFile.close();
    //        this.bitmap = bitmap;

    // canvas = new Canvas();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T14:01:43.250

您可以使用画布和位图；

```
 mBitmap = Bitmap.createBitmap(mPictureWidth, mPictureHeight,
            Bitmap.Config.ARGB_8888);
    mCanvas = new Canvas(mBitmap);
    mCanvas.save(); 
```

绘制时：

```
@Override
protected void onDraw(Canvas canvas) {
    mCanvas.restore();
    mCanvas.drawPath(path, paint);
    mCanvas.save();
    if (mBitmap != null)
        canvas.drawBitmap(mBitmap, 0, 0, null);
} 
```

先绘制到自己创建的画布上，再绘制到视图的画布上，记录保存在位图中

# javascript - 浏览器何时停止在 javascript 中执行递归函数？

> ID：13155434
> 
> 赞同：4
> 
> 时间：2012-10-31T10:03:54.333
> 
> 标签：javascript

我是 javascript 的初学者。我在javascript中尝试递归函数。

```
<html>
<head>
</head>
<body>
<script type = "text/javascript">
function first(){
    document.write(" first");
    first();
}
first();
</script>
</body>
</html> 
```

浏览器打印“first”有限次。这是为什么？是否有任何特定机制在一定时间后停止“首先”打印？它是特定于浏览器的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:06:59.943

递归函数不是无限的——它们只能继续运行，直到堆栈空间用完。

在这种情况下，“堆栈空间”是程序（即浏览器）为记住函数调用链而分配的内存，因此当您的函数返回时，它知道返回到哪里。

该内存空间是有限的，当它用完时，程序将停止并抛出错误（堆栈溢出错误）。

如果您使用的浏览器具有开发人员工具窗口（即几乎所有主流浏览器），您应该能够看到错误发生时在控制台窗口中显示。

浏览器运行循环的确切次数将根据浏览器以及它分配给堆栈的内存量而有所不同。这不是您可以直接控制的东西——当然不是在浏览器上下文中；在较低级别的编程（例如 C/C++ 程序）中，您将拥有自己定义堆栈大小的工具，但在浏览器中，这些事情是您无法控制的。也就是说，浏览器应该为堆栈分配足够的内存，除非它进入无限循环，否则程序永远不可能碰到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:07:50.820

检查这个问题[JavaScript Infinite Loop?](https://stackoverflow.com/questions/5835126/javascript-infinite-loop) 并使用答案中的代码来实现循环：

```
window.onload = function start() {
slide();
}
function slide() {
var num = 0, style = document.getElementById('container').style;
window.setInterval(function () {
    // increase by num 1, reset to 0 at 4
    num = (num + 1) % 4;

    // -600 * 1 = -600, -600 * 2 = -1200, etc 
    style.marginLeft = (-600 * num) + "px"; 
}, 3000); // repeat forever, polling every 3 seconds
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:09:04.147

递归函数在所有语言中的工作方式都相似。您必须编写返回语句，如果条件为真，则返回某些内容，否则再次调用该函数。这一切都取决于要求，你想如何使用它。这可能是算法。

```
function func_name(){
   if ( condition is true )
      return something
   ...
   ...
   ...
   func_name()
} 
```

# javascript - 让 runat=server 在客户端运行

> ID：13155438
> 
> 赞同：0
> 
> 时间：2012-10-31T10:04:05.233
> 
> 标签：javascript, asp.net, client, runat

第一个问题：我正在创建一个网站，每次我激活一个方法时，我的页面都会重新加载。我所有的方法都在服务器上运行（它们都是 ASP.NET 代码隐藏函数）。但我想让它们在客户端运行，而客户端无法看到，或者至少让它们运行而不每次都刷新页面。这甚至可能吗？

第二个问题：有人说可以通过javaScript，但是是在服务端调用函数，还是简单的把方法转换成在客户端运行给大家看。如果它是第一个，那么我在哪里可以找到完整的指南来实现这一点。并且是推荐的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:08:09.230

你有两个选择：

1.  使用 ajax 调用服务器但没有回发，因此用户不会看到它。该方法仍在服务器中运行。要使用 ajax，您可以`UpdatePanel`使用 jquery ajax 和`ScriptMethod`在客户端中使用简单的方法或更佳的方法，[请参阅此处的示例](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

2.  将您的代码转换为 javascript 代码并在客户端中运行它。您不能仅将所有内容都转换为客户端，例如，如果不访问服务器，您就无法访问服务器中的数据库。

# java-me - 摩托罗拉 Symbol MC3090 发出蜂鸣声

> ID：13155439
> 
> 赞同：2
> 
> 时间：2012-10-31T10:04:06.757
> 
> 标签：java-me, lwuit, symbols, beep, java-wireless-toolkit

我正在使用 JAVA ME 1.4 和 WTK 和 LWUIT，并且希望在 PhoneME 中运行的 Java 应用程序中发出哔声。

我在谷歌上发现了几种方法，但没有一种方法有效。

我的最后一次尝试是使用`Display.getInstance().playBuiltinSound(Display.SOUND_TYPE_ERROR)`但没有成功。

另一个是`AlertType.WARNING.playSound(Display.getDisplay(midlet))`：也不工作

还有这个：[用 J2ME 播放音频](https://stackoverflow.com/questions/473809/playing-audio-with-j2me)；没有成功

有人可以帮助找到一种在 JAVA ME 上播放哔声的通用方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T19:38:26.603

If it was me, I would use the Player object to play an AMR file, or a MIDI file.

AMR is the most widely supported streamed audio format for JavaME. You can convert WAV files to AMR easily using various converters.

Using the Player object is very straight forward. Here is an example for playing a MIDI. First create the Player object:

```
Player myPlayer = Manager.createPlayer(getClass().getResourceAsStream("music.mid"), "audio/midi"); // For AMR use audio/amr 
```

After this you may be able to just call myPlayer.start(), but here's the trouble: Some devices require you to first call realize() and prefetch(), while these exact calls will mess up the playback on other devices. So to get playback working on most possible devices, you just throw in a few try/catch blocks:

```
try {
    myPlayer.realize();
} catch (Exception e) {} // Didn't work? Oh well, never mind.

try {
    myPlayer.prefetch();    
} catch (Exception e) {} // Again, we don't care if it didn't work.

try {
    myPlayer.start();   
} catch (Exception e) {} 
```

Using that approach should give you the a working sound on most possible devices.

Finding a beep sound online to use shouldn't be a problem.

# django - Django：出现条目时增加另一个模型的计数器

> ID：13155440
> 
> 赞同：2
> 
> 时间：2012-10-31T10:04:07.390
> 
> 标签：django, django-models, count

当评论类中出现条目时，我们如何增加计数器？

```
class Status(models.Model):
    status = models.CharField(max_length=140)
    counter = models.IntegerField(default=0)

class Comments(models.Model):
    status = models.ForeignKey(status)
    comment = models.CharField(max_length=140) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:09:38.297

通过使用[信号](https://docs.djangoproject.com/en/dev/topics/signals/)或将其添加到（保存）注释的处理方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:10:22.923

您可以覆盖您的保存方法

```
class Comments(models.Model):
   status = models.ForeignKey(status)
   comment = models.CharField(max_length=140)

   def save(self, *args, **kwargs):
         #get the status 
         #save it

         #Call super save to store your comment
         super(Comments, self).save(*args, **kwargs) 
```

# iphone - 搜索后表格视图单元格图像发生变化

> ID：13155444
> 
> 赞同：0
> 
> 时间：2012-10-31T10:04:22.727
> 
> 标签：iphone, objective-c, xcode, uitableview

我正在处理表格视图单元格，其中包含附件视图上的不同图像和每个单元格左侧的数据（文本）。最初所有单元格都被其相关数据和图像占用。但是当我在 searchdisplaycontroller 上搜索时，图像被分配为新数组。例如；我有表格视图行，其中包含火车、公共汽车、飞机的图像以及相应的文本。但是当我搜索公共汽车时，文本看起来很好，但 imageview 显示不相关的图像（比如火车的图像）。实现上述要求的逻辑可能是什么。我使用以下代码配置单元

```
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath 
{
    btnImage = [[UIButton buttonWithType:UIButtonTypeCustom]retain];
    btnImage.frame = CGRectMake(688, 0, 80, 80);
    [btnImage setBackgroundImage:[arrImages objectAtIndex:indexPath.row] forState:UIControlStateNormal];
    [btnImage addTarget:nil action:@selector(DishImageClicked:) forControlEvents:UIControlEventTouchUpInside];
    [cell addSubview:btnImage];
    btnImage.tag = indexPath.row;
    NSLog(@"image clicked at index :%i",btnImage.tag);

}

// Customize the appearance of table view cells.

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *strCellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:strCellIdentifier];
    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] 
                 initWithStyle:UITableViewCellStyleDefault 
                 reuseIdentifier:strCellIdentifier] autorelease];

        //cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    // assign text for the table view 
    if (tableView == self.searchDisplayController.searchResultsTableView)
    {

        cell.textLabel.text = [arrSearhResults objectAtIndex:indexPath.row];
        cell.textLabel.font = [UIFont boldSystemFontOfSize:14];

        [self configureCell:cell atIndexPath:indexPath];

    }

    else      
    {
        // add image button 
        [self configureCell:cell atIndexPath:indexPath];
        cell.textLabel.text = [self.arrAllItems objectAtIndex:indexPath.row];
        cell.textLabel.font = [UIFont boldSystemFontOfSize:14];
             }
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:12:19.460

这是因为单元格是重复使用的，满足条件时需要清除内容`if (tableView == self.searchDisplayController.searchResultsTableView)`。

如果您可以引用单元格内的图像视图或按钮，只需清除图像。

# python - 如何限制 Python 中复杂行的长度？

> ID：13155445
> 
> 赞同：3
> 
> 时间：2012-10-31T10:04:31.027
> 
> 标签：python, pep8, continuation

我正在根据[PEP8](http://www.python.org/dev/peps/pep-0008/)格式化我的代码，但我有一个小问题；就是这个：

```
print ("DB Updated: " + datetime.datetime.fromtimestamp(int(stats_dict["db_update"])).strftime('%a %b %d %H:%M:%S %Y')) 
```

如何将其分成 72-79 个字符的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:08:41.457

```
timestamp = int(stats_dict["db_update"])
d = datetime.datetime.fromtimestamp(timestamp)
msg = "DB Updated: {}".format(d.strftime('%a %b %d %H:%M:%S %Y'))
print(msg) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T10:14:40.190

```
from datetime import datetime

dt = datetime.fromtimestamp(int(stats_dict["db_update"]))
print("DB Updated: " + dt.strftime('%a %b %d %H:%M:%S %Y')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T12:27:00.637

```
from datetime import datetime

dt = datetime.fromtimestamp(int(stats_dict["db_update"]))
print("DB Updated: {:%a %b %d %H:%M:%S %Y}".format(dt)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T10:36:00.047

我更喜欢：

```
print("DB Updated: " + 
    datetime.datetime.fromtimestamp(
        int(stats_dict["db_update"])
    ).strftime('%a %b %d %H:%M:%S %Y')
) 
```

请注意，只要整个表达式都在大括号中，您就不需要换行符。

在我看来，临时变量~~会~~降低可读性。

OP的更新：我将您的答案修改如下：

```
 print("DB Updated: " +
      datetime.datetime.fromtimestamp(
        int(stats_dict["db_update"])).
        strftime('%a %b %d %H:%M:%S %Y')) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T10:06:47.180

```
print ("DB Updated: " + datetime.datetime.fromtimestamp(\
     int(stats_dict["db_update"]))\
     .strftime('%a %b %d %H:%M:%S %Y')) 
```

# c - linux中共享内存中的多个链接列表

> ID：13155446
> 
> 赞同：4
> 
> 时间：2012-10-31T10:04:39.743
> 
> 标签：c, linux, shared-memory

我使用 C 语言和 Linux 作为平台。我想在多个进程中共享多个结构，这些结构具有链接列表的头部（这些列表也应该共享）和彼此的指针。此数据所需的内存可高达 1Mb。因为我不能在共享内存中使用指针，因为它们对不同的进程无效。

有两种选择：1）要么使用偏移值而不是指针。2) 否则，使用不同的共享内存并使用共享内存 ID（由 shmget 返回）而不是指针。

由于要共享的内存大小很大，哪个选项更好？你能建议另一种选择吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T12:07:54.687

使用偏移值。

代替指针，使用`size_t`从共享内存区域开始的偏移量（以字符为单位）。您需要在访问或操作这些列表的任何地方执行此操作。

编辑添加：

以这种方式使用偏移量可以在大多数架构上编译为非常高效的代码，并且您可以使用[`__sync..()`](http://gcc.gnu.org/onlinedocs/gcc/_005f_005fsync-Builtins.html)内置函数以原子方式访问和修改它们。*请记住对所有*访问使用内置函数，包括读取：否则该值可能在非原子读取期间被原子修改（反之亦然），从而导致数据损坏。

如果您知道共享内存的大小永远不会超过 4GB，那么您可以`uint32_t`改为使用偏移类型，在 64 位架构上为每个“指针”节省四个字节。如果将所有目标对齐到 32 位边界，则可以将其翻两番至 8GB。

使用的一个非常好的副作用`uint32_t`是，您可以在所有 64 位和一些 32 位架构上原子地操作指针对（两个连续的偏移量）*。*假设您还将共享内存中的所有内容也对齐到 32 位边界，并使用每个 32 位单元的偏移量，您可以使用原子方式获取/设置指针对

```
static inline void get_pair(void *const base, const uint32_t offset, uint32_t *const pair)
{
    uint64_t *const ptr = (uint64_t *)(offset + (uint32_t *)base);
    uint64_t        val;

    val = __sync_or_and_fetch(ptr, (uint64_t)0);

    memcpy(pair, &val, sizeof val);
}

static inline void switch_pair(void *const base, const uint32_t offset, const uint32_t *const new, uint32_t *const old)
{
    uint64_t *const ptr = (uint64_t *)(offset + (uint32_t *)base);
    uint64_t        oldval, newval;

    memcpy(newval, &new, sizeof newval);

    do {
        /* Note: this access does not need to be atomic, */
        memcpy(oldval, ptr, sizeof oldval);
        /* because the next one verifies it. */
    } while (!__sync_bool_compare_and_swap(ptr, oldval, newval));

    if (old)
        memcpy(old, &oldval, sizeof oldval);
} 
```

`__sync...()`内置程序至少在 GCC 和 Intel CC 中工作。新的 C11 标准也采用了 C++11 风格[`__atomic..()`](http://gcc.gnu.org/onlinedocs/gcc/_005f_005fatomic-Builtins.html)的内置函数，但在当前编译器中实现这些特性需要一些时间。

如果您编写库代码，或者您希望维护几年的代码，它可能会节省您查找两种内置类型的时间，并为您自己（或任何将要维护它的人）添加注释。内置插件之间的转换），以描述如果它们已经可用，您将使用哪个原子内置插件。

最后，请记住，像这样使用共享内存意味着您必须小心谨慎，就像您有多个线程同时访问内存一样。原子操作会有所帮助，如果您可以原子地操作指针对，您可以对列表进行一些非常聪明的技巧，但您仍然需要非常敏锐地了解极端情况和可能的竞争条件。

# c# - 如何在 VB.NET 中执行逐字字符串文字？

> ID：13155449
> 
> 赞同：61
> 
> 时间：2012-10-31T10:04:46.100
> 
> 标签：c#, vb.net, string, escaping, verbatim-string

您如何在 VB.NET 中执行*逐字字符串文字？*

这是在 C# 中实现的，如下所示：

```
String str = @"c:\folder1\file1.txt"; 
```

这意味着反斜杠按字面意思处理，而不是转义字符。

这是如何在 VB.NET 中实现的？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-31T10:06:27.030

VB.NET 中的所有字符串文字都是逐字字符串文字。简单地写

```
Dim str As String = "c:\folder1\file1.txt" 
```

VB.NET 不支持内联控制字符。所以反斜杠总是按字面解释。

唯一需要转义的字符是双引号，通过加倍来转义，就像在 C# 中一样

```
Dim s As String = """Ahoy!"" cried the captain." ' "Ahoy!" cried the captain. 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-05-12T23:52:49.477

@MarkJ 已经在 @Jon Skeet 的帖子中指出了这一点。

如果您绝对需要通过内联 XML Literal 逐字使用，VB.Net 支持这种~~可憎的特性。~~

考虑缓存字符串！不要每次都评价这个...

```
Imports System.Xml.Linq

Dim cmdText as String = <![CDATA[
SELECT 
Field1, Field2, Field3 
FROM table
WHERE Field1 = 1
]]>.Value 
```

[编辑 2015 年 1 月 5 日]

VB14 / VS2015 支持多行字符串，没有任何恶作剧。

```
Dim cmdText as String = "
SELECT 
Field1, Field2, Field3 
FROM table
WHERE Field1 = 1" 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-31T10:07:37.390

VB 无论如何都不会将`\`其视为转义字符，因此您可以将字符串写为普通文字：

```
Dim str = "c:\folder1\file1.txt" 
```

据我所知，VB 没有任何方法可以实现逐字字符串文字的另一个主要目标，即允许多行——我相信[你必须使用`VbCrLf`它。](http://msdn.microsoft.com/en-us/library/5chcthbw.aspx)（或者`Environment.NewLine`当然 - 这取决于您的要求。有时您需要特定于系统的行分隔符；有时您需要特定协议要求的特定行分隔符等）

编辑：[较新版本的 VB 支持字符串文字中的多行](https://docs.microsoft.com/en-us/dotnet/visual-basic/programming-guide/language-features/strings/string-basics)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-31T10:19:46.620

如有疑问，请查看此比较页面： [http ://www.harding.edu/fmccown/vbnet_csharp_comparison.html](http://www.harding.edu/fmccown/vbnet_csharp_comparison.html)

VB.NET

```
 'No string literal operator     
 Dim filename As String = "c:\temp\x.dat" 
```

C＃

```
// String literal 
string filename = @"c:\temp\x.dat";  
string filename = "c:\\temp\\x.dat"; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-27T18:37:20.323

VB.NET 不将“\”识别为转义字符。但是，也许您可​​以使用进一步的解决方案（考虑到它的工作速度比串联慢，例如）：

```
Dim s As String = Regex.Unescape("c:\\folder1\\file1.txt\nc:\\folder1\\file2.txt\nc:\\folder1\\file3.txt") 
```

在这种情况下，字符串“s”包含三行。符号“\”是保护下一个“\”免受正则表达式方法 Unescape() 的影响，这就是它每次重复两次的原因。

"\n" 是一个类似于 C# 的“换行”特殊字符。您也可以使用“\t”（制表符）等。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-06-24T05:29:37.073

```
Dim sourceText As String =  
    <string>  

    Imports Microsoft.VisualBasic  
    Imports System  
    Imports System.Collections  
    Imports Microsoft.Win32  
    Imports System.Linq  
    Imports System.Text  
    Imports Roslyn.Compilers  
    Imports System.ComponentModel  
    Imports System.Runtime.CompilerServices  
    Imports Roslyn.Compilers.VisualBasic  

    Namespace HelloWorld  
      Module Program  
        Sub Main(args As String())  
          Console.WriteLine("Hello, World!")  
        End Sub  
      End Module  
    End Namespace  
</string> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-18T16:34:17.657

不幸的是，VB XML 文字在 .vbhtml 剃须刀页面中不起作用。希望这会在下一个版本中改变。

# django - 密码重置流程中的 Django 电子邮件：不接受特殊字符

> ID：13155452
> 
> 赞同：1
> 
> 时间：2012-10-31T10:04:50.740
> 
> 标签：django, email, character-encoding

我正在使用 Django 重置密码流程，它向用户发送一封电子邮件，其中包含输入新密码的链接。此电子邮件的模板是 password_reset_email.html。我已将此模板复制到我自己的项目中并对其进行了自定义。但是，我无法使用特殊字符，例如 ø。通常，我使用像这样的实体

```
&oslash; or &#248; 
```

但它们不起作用-它们只是直接显示为书面形式。我没有设置 settings.DEFAULT_CHARSET 所以它应该是 utf-8。在我写的 .py 文件中

```
# coding=UTF-8 
```

函数 PasswordResetForm 执行以下操作：

```
email_template_name='registration/password_reset_email.html'
...
t = loader.get_template(email_template_name)
...

c = {'email': user.email,
      ...        
       }
send_mail("subject line",
            t.render(Context(c)), from_email, [user.email]) 
```

我尝试将模板更改为 .txt 而不是 .py，并使用转义。

编辑：我得到的错误是：'utf8' codec can't decode byte

编辑。我意识到问题在于它根本没有渲染。这不仅仅是一个特殊的字符问题。所以，我将把它作为一个新问题来问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T16:06:38.817

您的问题可能与混合字符串和 unicode 序列有关。要强制表单文件中的所有字符串使用 unicode，请尝试在顶部添加以下导入：

```
from __future__ import unicode_literals 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:46:11.210

问题在于渲染，而不仅仅是特殊字符。我从来没有让 send_mail() 工作，但我正在使用 EmailMultiAlternatives.send()

在这里回答：

[Python/Django：电子邮件模板未呈现。显示 html 标签并且不转换实体](https://stackoverflow.com/questions/13285976/python-django-email-template-is-not-rendered-shows-html-tags-and-doesnt-conve/13286215#13286215)

# ruby-on-rails - “：first”迁移参数不起作用？

> ID：13155453
> 
> 赞同：1
> 
> 时间：2012-10-31T10:04:55.863
> 
> 标签：ruby-on-rails, migration

我想添加一个新列：

```
class AddNameToUsers < ActiveRecord::Migration
  def change
    add_column :users, :name, :string, :first => true
  end
end 
```

`:first`我包含了将列放在所有其他列之前的论点。但似乎没有用：

```
create_table "users", :force => true do |t|
    t.string   "email",                  :default => "", :null => false
    t.string   "encrypted_password",     :default => "", :null => false
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",          :default => 0
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
    t.string   "name"
  end 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:15:23.460

我们无法使用迁移文件来实现这一点。但我们可以做以下事情..

```
 ActiveRecord::ConnectionAdapters::MysqlAdapter.class_eval do
     def add_column_options!(sql, options)
     super
     if options[:after]
     sql << " AFTER #{quote_column_name(options[:after])}"
     elsif options[:first]
     sql << " FIRST"
     end
     end
     end

     So now

     a.add_column :users, :name, :string, :after => "baz"

      will execute

      ALTER TABLE `users` ADD `name` varchar(20)  AFTER `baz`

      and

      a.add_column :users, :name, :string, :first => true

      will execute

      ALTER TABLE `users` ADD `name` varchar(20)  FIRST

      Likewise for change_column. 
```

# css - 将父 ID 添加到大 css 文件

> ID：13155454
> 
> 赞同：2
> 
> 时间：2012-10-31T10:05:00.340
> 
> 标签：css, regex, class, twitter-bootstrap

我想为 Twitter Bootstrap 中的每个 CSS 项目添加一个父 ID。我找到了 RegEx 工具，但还没有找到正确的代码组合。

我必须这样做，因为我只能定位我正在处理的站点内的一个区域。

本质上，我想从这个开始：

```
.offset1{margin-left:100px;}
.row-fluid{width:100%;*zoom:1;} .row-fluid:before, .row-fluid:after{display:table;content:"";line-height:0;} 
```

对此：

```
#parent .offset1{margin-left:100px;}
#parent .row-fluid{width:100%;*zoom:1;} #parent .row-fluid:before {display:table;content:"";line-height:0;} 
```

任何人都可以帮忙吗？

谢谢，罗斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:03:47.320

Bootstrap 是用[LESS](http://lesscss.org/ "较少的")编写的，因此您应该能够为此使用它的嵌套规则：

```
#parent {
    /*everything in the less file */
} 
```

有几个 .less 文件可以做到这一点，但我认为这仍然是一个非常简单的选择。请注意，我自己没有尝试过，但它**应该可以**工作。:)

显然，您必须下载 LESS 源并将其重新编译为 CSS。可以在 GitHub 上找到：[https ://github.com/twitter/bootstrap/](https://github.com/twitter/bootstrap/)

为 Bootstrap 中的每个 CSS 选择器构建一个正则表达式似乎是一项非常艰巨的任务。您可能会导致直到很久以后才会注意到的错误。

# spring - 在 Spring 中继承 LocalValidatorFactoryBean 的替代方法

> ID：13155455
> 
> 赞同：2
> 
> 时间：2012-10-31T10:05:00.967
> 
> 标签：spring, validation

在我们的代码中，我们实现了 org.springframework.validation.beanvalidation.LocalValidatorFactoryBean 的子类，用我们自己的实现覆盖 validate(Object target, Errors errors)，我们在其中运行验证，进行一些额外的处理并注册错误消息。

从3.0升级到3.1，好像不再调用这个方法了。同事调试了spring代码，发现好像是调用了签名为validate(Object target, Errors errors, Object...validationHints)的方法，而直接跳过了旧的validate()。更改为使用带有validationHints 的方法使事情再次起作用。

这个修复感觉有点奇怪，并且容易在未来产生混乱。是否有另一种方式来处理更具前瞻性的验证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T12:49:47.740

在我们的项目中，我们采用了稍微不同的方法。我们也在使用 Spring 3.1，并且我们有两个带有验证和自定义验证注释的 bean。我们的方法可能适用于您的场景，也可能不适用于您的场景，因为在迁移到 Spring 3.1 之前，我不确定您最初使用的方法，但这里有。

当我们需要自定义验证时，我们实现 org.springframework.validation.Validator 类，而不是扩展 LocalValidatorFactoryBean。所以这个实现执行它自己的自定义代码并调用 Spring 的默认验证，它通过一个自动装配到我们的自定义验证器中的 bean 公开。这是验证器代码：

```
@Component("myValidator")
public class MyValidator implements Validator {

@Autowired
private Validator springValidator;

@Override
public boolean supports(Class<?> clazz) {
    return MyObject.class.isAssignableFrom(clazz);
}

@Override
public void validate(Object object, Errors errors) {
    MyObject myObject = (MyObject) object;

    // invoke spring default validator so validation annotations are processed
    springValidator.validate(myObject, errors);

    // custom validation
    .... 
```

我们在 spring xml 文件中声明了以下 bean：

```
<bean id="springValidator"
    class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean"/> 
```

通过上述实现，需要调用验证的类将通过调用 validator.validate(Object object, Errors errors) 来完成。再次，这就是为什么我不确定我们项目中采用的方法是否适用于您的方法，因为我不确定您是否使用相同的 validate(Object, Errors) 方法。

无论如何，希望它有所帮助。

# android - ListView ArrayAdapter 按两个名称过滤

> ID：13155456
> 
> 赞同：0
> 
> 时间：2012-10-31T10:05:01.553
> 
> 标签：android, listview, filter

我已经为 android 做了一个应用程序来列出名字等于例如 John 的联系人。但我需要查看与`name1`OR的联系`name2`，例如`Peter OR John`。

我试过设置过滤器“ `Peter OR John`”、“ `Peter || John`”，但它不起作用。你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:29:17.520

```
 you should be write your custom adapter and filter. 

    public class MyAdapter<T extends BaseEntity> extends ArrayAdapter<T> implements Filterable{

        private MainClass.ObjectFilter filter;
        private final List<T> objects;

        public MyAdapter(List<T> objects){
             enter code here
this.objects = objects;
             getFilter();
        }

        @Override
        public Filter getFilter() {
            if (filter == null){
                MainClass ofc = new MainClass(objects);
                filter  = ofc.getObjectFilter();
            }
            return filter;
        }

        enter code here 
    }

    and custom filter

    public class MainClass<T extends BaseEntity> extends BaseEntity {

        private List<T> allObjectItemsArray; // all contact list
        private List<T> filteredObjectItemsArray; // filtered contact list

        public ObjectFilterMainClass(List<T> objects)
          {
            this.allObjectItemsArray = new ArrayList<T>();
            this.allObjectItemsArray.addAll(objects);
            this.filteredObjectItemsArray = new ArrayList<T>();
            this.filteredObjectItemsArray.addAll(allObjectItemsArray);
        }

        public ObjectFilter getObjectFilter(){
        return new ObjectFilter();
        }

        public class ObjectFilter extends Filter {

        @Override
        public FilterResults performFiltering(CharSequence constraint) {
                // constraint search text -->  Peter OR John
                constraint = constraint.toString().toLowerCase();
            FilterResults result = new FilterResults();
            if (constraint != null && constraint.toString().length() > 0) {
            ArrayList<T> filteredItems = new ArrayList<T>();

            a: for (int i = 0; i < allObjectItemsArray.size(); i++) {
                T m = allObjectItemsArray.get(i);
                        // cast m to your class
                String fistnameAndLastName = ((your object class) m).getFirstName() + ((your object class) m).getLastName();

                if (fistnameAndLastName.toLowerCase().contains(constraint)) {
                    filteredItems.add(m);
                    continue a;
                }

            }
            result.count = filteredItems.size();
            result.values = filteredItems;
            } else {
            synchronized (this) {
                result.values = allObjectItemsArray;
                result.count = allObjectItemsArray.size();
            }
            }
            return result;
        }

          @Override
        public void publishResults(CharSequence constraint, FilterResults results) {

            filteredObjectItemsArray = (ArrayList<T>) results.values;
            adapter.notifyDataSetChanged();
            adapter.clear();
            if (filteredObjectItemsArray != null) {

            for (int i = 0; i < filteredObjectItemsArray.size(); i++)
                adapter.add(filteredObjectItemsArray.get(i));
            }
            adapter.notifyDataSetInvalidated();
        }

        }

    }

    main point is get first and last name and check the constraint text.
    after that if true add filteredItems list.

    String fistnameAndLastName = ((your object class) m).getFirstName() + ((your object class) m).getLastName();

    if (fistnameAndLastName.toLowerCase().contains(constraint)) 
    {
        filteredItems.add(m);
        continue a;

    and use :

    EditText edt = (EditText) this.view.findViewById(R.id.edtTxtName);

            edt.addTextChangedListener(new TextWatcher() {
            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            }

            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                addFilterToList();
            }

            @Override
            public void afterTextChanged(Editable s) {

            }
            }); 

    public void addFilterToList() {

        ListView listView = (ListView) this.view.findViewById(R.id.listView);

        EditText edt = (EditText) this.view.findViewById(R.id.edtTxtName);

        MyAdapter myA = (MyAdapter) //
            (listView.getAdapter());  

        myA.getFilter().filter(edt.getText());

        listView.setAdapter(myA);
        } 
```

# iphone - 在 Iphone 中创建秒表

> ID：13155461
> 
> 赞同：5
> 
> 时间：2012-10-31T10:05:17.423
> 
> 标签：iphone, ios, nstimer

我正在尝试创建一个简单的秒表。我参考了这个网站（[http://www.apptite.be/tutorial_ios_stopwatch.php](http://www.apptite.be/tutorial_ios_stopwatch.php)）来做这个应用程序。当我单击开始按钮时，我得到 -596:-31:-23:-648 并且秒表不运行。

代码如下所示：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController{
    UILabel *lbl;
    NSTimer *stopTimer;
    NSDate *startDate;
}

@property (strong,nonatomic) IBOutlet UILabel *lbl;

-(IBAction)startPressed:(id)sender;
-(IBAction)stopPressed:(id)sender;

-(void)updateTimer;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize lbl;

- (void)viewDidLoad
{
    [super viewDidLoad];
    lbl.text = @"00.00.00.000";
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(IBAction)startPressed:(id)sender{
    if (stopTimer == nil) {
        stopTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                                     target:self
                                                   selector:@selector(updateTimer)
                                                   userInfo:nil
                                                    repeats:YES];
    }
}
-(IBAction)stopPressed:(id)sender{
    [stopTimer invalidate];
    stopTimer = nil;
    //[self updateTimer];

}
-(void)updateTimer{
    NSDate *currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm:ss.SSS"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    NSString *timeString=[dateFormatter stringFromDate:timerDate];
    lbl.text = timeString;
}

@end 
```

需要一些关于解决错误的指导。不确定错误在哪里。感谢任何帮助...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-31T16:32:19.717

解决了错误：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController{
    UILabel *lbl;
    NSTimer *stopTimer;
    NSDate *startDate;
    BOOL running;
}

@property (strong,nonatomic) IBOutlet UILabel *lbl;

-(IBAction)startPressed:(id)sender;
-(IBAction)resetPressed:(id)sender;

-(void)updateTimer;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize lbl;

- (void)viewDidLoad
{
    [super viewDidLoad];
    lbl.text = @"00.00.00.000";
    running = FALSE;
    startDate = [NSDate date];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(IBAction)startPressed:(id)sender{
    if(!running){
        running = TRUE;
        [sender setTitle:@"Stop" forState:UIControlStateNormal];
        if (stopTimer == nil) {
            stopTimer = [NSTimer scheduledTimerWithTimeInterval:1.0/10.0
                                                         target:self
                                                       selector:@selector(updateTimer)
                                                       userInfo:nil
                                                        repeats:YES];
        }
    }else{
        running = FALSE;
        [sender setTitle:@"Start" forState:UIControlStateNormal];
        [stopTimer invalidate];
        stopTimer = nil;
    }

}
-(void)updateTimer{
    NSDate *currentDate = [NSDate date];
    NSTimeInterval timeInterval = [currentDate timeIntervalSinceDate:startDate];
    NSDate *timerDate = [NSDate dateWithTimeIntervalSince1970:timeInterval];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"HH:mm:ss.SSS"];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0.0]];
    NSString *timeString=[dateFormatter stringFromDate:timerDate];
    lbl.text = timeString;
}

-(IBAction)resetPressed:(id)sender{
    [stopTimer invalidate];
    stopTimer = nil;
    startDate = [NSDate date];
    lbl.text = @"00.00.00.000";
    running = FALSE;
}

@end 
```

已经对代码进行了轻微的改动..但它现在可以正常工作了......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-26T14:37:52.833

我创建了一个具有暂停/恢复功能的简单秒表。它使用两个 NSDate 变量来跟踪暂停之间的时间：

```
NSTimeInterval secondsBetween = [pause_date timeIntervalSinceDate:start_date];
start_date = [NSDate dateWithTimeIntervalSinceNow:(-1)*secondsBetween]; 
```

在此处查看示例项目：[https ://github.com/kevinpk/NSStopwatch](https://github.com/kevinpk/NSStopwatch)

# sql - 从非阻塞用户获取帖子

> ID：13155462
> 
> 赞同：2
> 
> 时间：2012-10-31T10:05:22.230
> 
> 标签：sql, ruby-on-rails, postgresql, activerecord

我正在尝试从没有阻止“我”的用户那里获取一些帖子。Se 型号如下：

```
User
  id
  username
  ....

Post
  id
  user_id
  content
  ...

Blockings
  blocker_id
  blocked_id 
```

我需要从**所有**没有阻止我的用户那里获取帖子。

我通过以下方式获取所有帖子：

```
@posts Post.all 
```

但是我如何将它结合在一起。

伪

```
SELECT * FROM posts WHERE "posts.user_id isn't blocking me" 
```

我有一个名为`current_user`返回当前登录用户“我”的助手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:15:54.987

使用 SQL 的一种方法是：

```
select *
  from post
  where user_id not in 
    (select blocker_id 
    from blockings
    where blocked_id = 1); 
```

只需将数字 id 替换为变量即可。

[SQL小提琴](http://sqlfiddle.com/#!2/900c2/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:05:43.990

在您的 Post 类和这样的范围中：

```
scope :not_blocked_from, lambda{|user| where("blocked_id <> ?", user.id)} 
```

你可以获取你想要的那些帖子，如下所示：

```
Post.not_blocked_from(me) 
```

将工作。

# mysql - 了解 EXPLAIN 语句的输出 (MySQL)

> ID：13155463
> 
> 赞同：0
> 
> 时间：2012-10-31T10:05:22.990
> 
> 标签：mysql, sql, database, explain

我有一个查询返回以下说明：

```
id  select_type  table  type         possible_keys                                                                                        key                                                      key_len  ref  rows  Extra                                                                                  
1   SIMPLE       this_  index_merge  CategoryId,Deleted,PublishedOn,_ComputedDeletedValue,_Temporary_Flag,Published,_TestItemSessionGuid  Deleted,_ComputedDeletedValue,_Temporary_Flag,Published  1,1,1,1       6203  Using intersect(Deleted,_ComputedDeletedValue,_Temporary_Flag,Published); Using where 
```

这是否表明查询到处都在使用索引，还是可以通过添加其他索引来改进？基于此：[http](http://dev.mysql.com/doc/refman/5.1/en/explain-output.html) ://dev.mysql.com/doc/refman/5.1/en/explain-output.html ，它提到该`key`列显示实际使用的索引。我对每一列都有一个索引。

有问题的查询如下：

```
SELECT SQL_NO_CACHE count(*) FROM 

article this_ 

WHERE 

(this_._Temporary_Flag = 0 OR this_._Temporary_Flag = NULL) AND 
this_.Published = 1 AND 
(this_.PublishedOn IS NULL OR this_.PublishedOn <= '2012-10-30 18:46:18 ') AND 
(this_.Deleted = 0 OR this_.Deleted = NULL) AND 
(this_._ComputedDeletedValue = 0 OR this_._ComputedDeletedValue = NULL) AND
((this_._TestItemSessionGuid IS NULL OR this_._TestItemSessionGuid = ''))

 AND NOT (this_.CategoryId IS NULL) 
```

表有大约 140,000 条记录。此查询需要 3 秒执行，并返回 135,725 作为结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:47:47.210

解释表明，MySQL 正在使用由 4 个独立索引合并而成的索引，键长度为 1,1,1,1，这意味着所有四列都用于遍历搜索树。

但是，在所有列上设置单独的索引通常不是最有效的方法。特别是在您的情况下，合并四个索引可能需要很多时间。实际执行可能更快，但构建索引可能需要 1-2 秒。

我建议在这些列上建立一个复合索引。这些事情的顺序。获取具有相同条件的那些并将它们按基数顺序排列（更大的基数首先）。最后一列将是范围查询（在您的情况下为 PublishedOn）。

例如：

```
create index my_query_IDX on article (Deleted, _Temporary_Flag, _ComputedDeletedValue, PublishedOn) 
```

我建议的另一件事是将 _Temporary_Flag、Deleted、_ComputedDeletedValue、_Published 等列更改为 NOT NULL DEFAULT '0'。可空列和空值上的索引不如非空列有效，正如我根据 key_length 看到的那样，这些列是 BOOLEANS 或 TINYINT （顺便说一句，它们是相同的）。

# google-chrome - chrome 如何建立正确的字符编码？

> ID：13155467
> 
> 赞同：5
> 
> 时间：2012-10-31T10:05:32.667
> 
> 标签：google-chrome, encoding, character-encoding, webkit, chromium

我最近一直在使用很多字符集，在尝试为随机网页建立正确的字符集时发现了很多问题。charset 可以在 html 文档的 headers 中设置，也可以在`<head>`section 中设置，多次或有时省略声明。尽管存在这些问题，chrome 每次都在设置最佳字符集方面做得很好。

我试过搜索[资源](http://code.google.com/p/chromium/source/search)，但没有找到任何东西，因为我不知道去哪里找。

所以我的问题是我在哪里可以找到算法？

谢谢

* * *

## 更新：

*有问题*的示例：

文档的 HTTP 标头（基于服务器配置）：
`Content-type: text/html; charset=utf-8`
并且文档看起来像：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="Content-type" content="text/html;charset=ISO-8859-1" />
</head>
<body>...</body>
</html> 
```

将使用哪种编码来呈现文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-08-05T22:11:18.070

Chrome 使用[https://github.com/google/compact_enc_det](https://github.com/google/compact_enc_det)

如果您想阅读调用该项目的实际代码，该函数[`DetectTextEncoding`](https://github.com/chromium/chromium/blob/dea8b2608dd5d95e3869febc8b13d425291c19ef/third_party/blink/renderer/platform/text/text_encoding_detector.cc#L50)位于文件中`third_party/blink/renderer/platform/text/text_encoding_detector.cc`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T15:24:51.877

标头字符集将始终覆盖元字符集。

# spring - 如何忽略自定义弹簧租户

> ID：13155472
> 
> 赞同：3
> 
> 时间：2012-10-31T10:05:51.070
> 
> 标签：spring, scope

当我们使用自定义弹簧范围 - “租户”时，我们正在拥有一个产品。它与我们的系统架构密切相关。

在产品上线期间，我们决定放弃这个范围，但我们真的不想破坏向后兼容性。换句话说，我们希望现有的产品实现在没有错误的情况下启动，例如：

> bean初始化失败；嵌套异常是 java.lang.IllegalStateException: No Scope registered for scope 'tenant'

我们也不想更正 spring 配置或任何 java 类（ `@Scope("tenant")`发生的地方）中出现的任何租户定义。

我们在使用自定义加载 bean 定义时设法忽略了范围

```
XmlBeanDefinitionReader 
```

似乎我们缺少过滤任何 bean 创建（任何 BeanDefinition ）并忽略范围的一般概念 - 用 Singleton 替换它。

这是代码

这是覆盖范围的代码：

```
 new ReaderEventListener()
            { `@Override
            public void importProcessed(final ImportDefinition importDefinition)
            {
                //
            }

            @Override
            public void defaultsRegistered(final DefaultsDefinition defaultsDefinition)
            {
                // 
            }

            @Override
            public void componentRegistered(final ComponentDefinition componentDefinition)
            {

                for (final BeanDefinition beanDefinition : componentDefinition.getBeanDefinitions())
                {

                    if ("tenant".equalsIgnoreCase(beanDefinition.getScope()))
                    {
                        beanDefinition.setScope(BeanDefinition.SCOPE_SINGLETON);
                        if (LOG.isDebugEnabled())
                        {
                            LOG.debug("Adjusting bean defintion for " + beanDefinition
                                    + " - ignoring tenant scope - please modify it manually to avoid confussion.");
                        }
                    }
                }

                for (final BeanDefinition beanDefinition : componentDefinition.getInnerBeanDefinitions())
                {

                    if ("tenant".equalsIgnoreCase(beanDefinition.getScope()))
                    {
                        beanDefinition.setScope(BeanDefinition.SCOPE_SINGLETON);
                        if (LOG.isDebugEnabled())
                        {
                            LOG.debug("Adjusting bean defintion for " + beanDefinition
                                    + " - ignoring tenant scope - please modify it manually to avoid confussion.");
                        }
                    }
                }
            }

            @Override
            public void aliasRegistered(final AliasDefinition aliasDefinition)
            {
                //
            }
        }); <code>` 

看起来它在大多数情况下都在工作，除了这样的情况：EXACT REGEX STARTS_WITH ENDS_WITH CONTAINS 看起来它能够更改包装的范围租户

org.springframework.beans.factory.config.ListFactoryBean

但不适用于底层的豆类....

值得一提的是，我们自己一个一个地加载包含 bean 定义的文件。

            回答 #1

赞同：1

时间：2012-10-31T11:09:49.133

您可以注册租户范围并将其实现为单例吗？

```
public class TenantScopeMock implements Scope {
  @Autowired private ApplicationContext appContext;

  public Object get(final String name, final ObjectFactory objectFactory) {
    if (!appContext.containsBean(name))
      ((SingletonBeanRegistry)appContext.getBeanFactory()).registerSingleton(name, objectFactory.getObject());
    return appContext.getBean(name);
  }

  public String getConversationId() {
    return null;
  }

  public void registerDestructionCallback(final String theName, final Runnable callback) {
  }

  public Object resolveContextualObject(String key) {
    return null;
  }

  public Object remove(final String theName) {
    return null;
  }

} 
```

并注册：

```
<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
  <property name="scopes">
    <map>
      <entry key="tenant">
        <bean class="mypackage.TenantScopeMock" />
      </entry>
    </map>
  </property>
</bean> 
```

```

# c# - 静态成员和非静态成员的区别？

> ID：13155474
> 
> 赞同：9
> 
> 时间：2012-10-31T10:06:01.493
> 
> 标签：c#

> **可能重复：**
> [c# 中的静态方法是什么？](https://stackoverflow.com/questions/4124102/whats-a-static-method-in-c)

在从这么多论坛进行研究之后，我发现很难弄清楚静态和非静态（实例）成员的实际概念，我决定在这里提出我的问题：

静态成员和非静态成员有什么区别？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T10:13:48.513

`static`方法可以直接从类中访问，而方法`non-static`（或我喜欢称之为实例方法）必须从实例中访问。这就是为什么需要对实例方法进行实例化，而对于静态方法则不需要。

在 OOP`static variables`中，用于不能由实例变量存储的值。`static methods`无法访问类中的实例方法或变量。当然这是有道理的，因为该静态方法不知道我们试图引用的类的哪个实例。

例如，假设您想计算一个类的实例数？您将如何将其存储在单个实例中？

参考：

1.  [C# 中的静态与非静态方法](http://theburningmonk.com/2010/07/static-vs-non-static-method-in-csharp/)
2.  [静态与非静态方法](https://stackoverflow.com/questions/1184701/static-vs-non-static-method)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-31T10:16:42.157

*   `static`成员是每个类一个，但非静态成员是每个实例一个。

*   `static`成员通过封装它们的类名访问，但非静态成员通过对象引用访问。

*   `static`成员不能在不实例化对象的情况下使用非静态方法，但非静态成员可以`static`直接使用成员。

*   `static constructor`用于初始化静态字段，但对于非静态字段，使用普通实例构造函数。

*   有关性能相关点，请参见[此处](http://msdn.microsoft.com/en-us/library/ms973852.aspx)。

# c++ - C++ STL 向量半常数

> ID：13155475
> 
> 赞同：2
> 
> 时间：2012-10-31T10:06:08.150
> 
> 标签：c++, stl, vector

我想`std::vector`从具有以下属性的方法返回一个：接收者（用户）将能够编辑向量中的元素，但不能更改向量本身（调整大小、删除、添加等）

*   如果我返回 a `std::vector<T>&`，接收者将能够调整它的大小、添加元素等等。
*   如果我返回一个`std::vector<T> const&`（我声明对了吗？），他们将无法更改元素。
*   如果我返回`std::vector<T>`，它将是一个全新的向量，并且对元素的更改不会在原始向量中。

有没有办法做到这一点？也许是引用的 vetor，以 const ( `std::vector<T&> const`) 形式返回？甚至有这样的事情吗？如果有，它可以隐式地将 my 转换`std::vector<T>`为它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T10:10:54.747

由于您似乎能够通过引用返回向量，因此您可以将迭代器返回到该向量的开头和结尾。使用迭代器，用户可以编辑任何向量成员，但如果没有向量本身，则无法添加或删除它们。

您还可以提供一个函数，该函数通过索引提供随机访问，可能是重载的`operator[]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T11:02:38.840

如果您不想要向量的属性，请不要返回向量。设计一个具有您需要的属性的类。如果合适，请使用向量来实现它。矢量是一种工具，本身不是目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:20:05.973

```
// vector of pointers to elements by value
std::vector<T*>
// reference to const vector of pointers to elements
std::vector<T*> const&
// shared pointer of to const vector of pointers to elements
std::shared_ptr<std::vector<T*> const>

// vector of shared pointers to elements by value
std::vector<std::shared_ptr<T> >
// reference to const vector of shared pointers to elements
std::vector<std::shared_ptr<T> > const&
// shared pointer of to const vector of shared pointers to elements
std::shared_ptr<std::vector<std::shared_ptr<T> > const> 
```

# jquery - 以编程方式在现有 html 标记之间插入 html 标记

> ID：13155476
> 
> 赞同：1
> 
> 时间：2012-10-31T10:06:10.467
> 
> 标签：jquery, html

这是我的代码。

```
<table>
    <tbody>
        <tr>
            <td>Some Data</td>
            <td>Some Data</td>
            <td>Some Data</td>
            <td>Some Data</td>
    </tr>           
    </tbody>
</table> 
```

我想`</tr><tr>`在运行时以编程方式在行之间添加：

```
<table>
    <tbody>
        <tr>
            <td>Some Data</td>
            <td>Some Data</td>
    </tr>
    <tr>
            <td>Some Data</td>
            <td>Some Data</td>
    </tr>           
    </tbody>
</table> 
```

我试过`$('tr td').eq(1).after('</tr><tr>');`了，但它反而给了：

```
<table>
    <tbody>
        <tr>
            <td>Some Data</td>
            <td>Some Data</td>
        </tr/>
        <tr/>
            <td>Some Data</td>
            <td>Some Data</td>
        </tr>           
    </tbody>
</table> 
```

那么，我怎样才能实现所需的功能呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:14:06.080

您需要将行分成两部分。您可以使用以下方法执行此操作：

```
​$(function() {
    $('tbody tr').each(function() {  
        var cells = $(this).children('td'),
             row1 = $('<tr />'),
             row2 = $('<tr />');

        row1.append(cells[0]).append(cells[1]);
        row2.append(cells[2]).append(cells[3]);

        $(this).replaceWith(row1.add(row2));
    });​​​​​​​
}); 
```

请在此处查看示例 jsFiddle > [http://jsfiddle.net/ayYa5/](http://jsfiddle.net/ayYa5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:13:22.390

在字符串操作方面，您正在插入`"<tr></tr>"`.

然而，就 DOM 操作而言，您正在创建一个新的 tr 并将原始的两个孩子移动到它。如果使用 DOM 操作工具，则必须遵循 DOM 操作逻辑。

```
$('tr').eq(0).after('<tr></tr>');
$($('tr td').eq(1).nextAll()).appendTo($('tr').eq(1)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:17:43.727

我想出了这个：

```
$('<tr></tr>').appendTo($('tbody'));
$('tbody tr:first-child td:last-child').appendTo($('tbody tr:last-child'));
$('tbody tr:first-child td:last-child').appendTo($('tbody tr:last-child')); 
```

现场演示[在这里](http://jsfiddle.net/PKGtH/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T10:18:05.177

好吧，这在很大程度上取决于您拥有的数据格式，但您可以尝试以下方法：

```
$( "td" ).unwrap( );

var wrap_tds = function( ) {
    var els = $( "tbody" ).children( "td:lt(2)" );
    if (els.length) {
        els.wrap( "tr" );
        wrap_tds( );
    }
};
wrap_tds( ); 
```

# c++ - 渐进式网格生成后的 DirectX9 (D3D)“重新映射”SkinInfo

> ID：13155479
> 
> 赞同：2
> 
> 时间：2012-10-31T10:06:15.827
> 
> 标签：c++, direct3d

我在生成渐进式蒙皮网格上停留了几天，我对优化没有任何问题，但是当顶点数量发生变化时，vertexBuffer 中也有位置，我找不到用新位置更新 SkinInfo 的解决方案，我试过了：

```
D3D::Mesh m;
meshData->pMesh->CloneMesh(D3DXMESH_MANAGED, Declaration, D3D::getDevice(), &m);
LPD3DXBUFFER vRemap=0;
D3D::checkError("Failed to optimise mesh",
    m->Optimize(D3DXMESH_MANAGED | D3DXMESHOPT_VERTEXCACHE | D3DXMESHOPT_ATTRSORT,
        newMeshContainer->pAdjacency,newMeshContainer->pAdjacency,
        0,&vRemap,&m));

if (pSkinInfo) {
    D3D::checkError("Failed to remap skin info",
        pSkinInfo->Remap( m->GetNumVertices(), 
        (DWORD*)vRemap->GetBufferPointer()));
}

D3DXCleanMesh(D3DXCLEAN_SIMPLIFICATION, m, newMeshContainer->pAdjacency, &m, newMeshContainer->pAdjacency, NULL);

D3D::ProgressiveMesh ProgMesh;
D3D::checkError("Failed to generate progressive mesh",
    D3DXGeneratePMesh(m, newMeshContainer->pAdjacency, 0, 0, 0, D3DXMESHSIMP_FACE, &ProgMesh));
ProgMesh->SetNumVertices(ProgMesh->GetMaxVertices());

ProgMesh->CloneMesh(D3DXMESH_MANAGED, 0, D3D::getDevice(), &newMeshContainer->MeshData.pMesh); 
```

有人知道有什么办法吗？我在互联网上没有找到任何关于它的信息，只是有人说这是自动完成的，但它对我不起作用......

对不起，我的英语不好...

# c# - 在 Linux 和 Windows 上与 C# 进行进程间通信

> ID：13155490
> 
> 赞同：5
> 
> 时间：2012-10-31T10:06:45.030
> 
> 标签：c#, linux, windows, mono, ipc

我需要在我的应用程序中引入 IPC，我还需要继续在 GNU/Linux 和 Windows 上进行分发（目前我在 GNU/Linux 上使用单声道，在 Windows 上使用 .NET，两者都支持 GTK+）。通信仅限于同一个盒子。

在两个系统上进行 IPC 的最佳方法是什么？

我读到 DBUS 也可以在带有主流源代码的 Windows 上使用。任何人都有使用它的经验，我的意思是在 Windows 上？

在此先感谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:40:42.457

我对 DBus（在 Linux 上）的体验非常糟糕。

我最终用自定义格式的 tcp 套接字替换了它（但数据非常有限，因此开发自定义格式根本不需要很长时间）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T08:24:53.340

我会简单地使用**Remoting**。

仅仅因为其他选项很糟糕：

*   WCF 在 Mono 中非常有限

*   正如 Rolf 所说，DBus 有它的问题。更不用说它的 C# 故事有点笨拙，即：最好的解决方案是使用托管 Dbus，你可以使用 NDesk.Dbus，但是这个库被重命名为 dbus-sharp；但是 Gnome 世界正在转向使用 GDbus，而且还没有任何约束力。

*   Rolf 提出的 Socket 对我来说太低级了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T10:23:25.140

Mono 具有中等良好的 WCF 支持，适用于与平台无关的 IPC。

# android - Android 布局聊天，如 listview

> ID：13155495
> 
> 赞同：2
> 
> 时间：2012-10-31T10:06:56.090
> 
> 标签：android, layout, android-linearlayout

我正在尝试使用列表视图制作类似聊天的视图，其中消息显示在左右两侧。左消息的标记是

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:gravity="left">

    <TextView
        android:id="@+id/MessageListItemText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:background="@drawable/RoundedCornersBlue"
        android:padding="8dp"
        android:text="realy long realy long realy long realy long realy long realy long realy long realy long "
        android:layout_marginRight="5dp" />
    <TextView
        android:id="@+id/MessageListItemDate"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:textColor="#cbc4b1"
        android:text="23:11"
        android:gravity="center_horizontal|center_vertical" />
 </LinearLayout> 
```

但缺少第二个文本视图（时间戳）。

[http://i.stack.imgur.com/JxDXQ.jpg](http://i.stack.imgur.com/JxDXQ.jpg)

正确的消息具有以下标记

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:gravity="right">
    <TextView
        android:id="@+id/MessageListItemDate"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:textColor="#cbc4b1"
        android:text="12:34"
        android:gravity="center_horizontal|center_vertical" />
    <TextView
        android:id="@+id/MessageListItemText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:text="realy long realy long realy long realy long realy long realy long realy long realy long "
        android:background="@drawable/RoundedCornersBlue"
        android:padding="8dp"
        android:layout_marginLeft="5dp" />
</LinearLayout> 
```

[http://i.stack.imgur.com/1MnyW.jpg](http://i.stack.imgur.com/1MnyW.jpg)

这个看起来也是我想要的。left 和 right 的唯一区别是 LinearLayout 的 android:gravity 和 LinearLayout 中 textview 的顺序。

知道我做错了什么吗？或者我怎样才能实现这种类型的设计

谢谢你，米海

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T16:04:57.777

我最近遇到了完全相同的问题。尽管您前一阵子寻找了答案，但它可能对其他人有用。这是我的处理方式：

这是我的 conversation_item 的 xml 代码，默认情况下，所有内容都位于左侧：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/conversationItemRelativeLayout"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:paddingTop="5dp"
                android:paddingBottom="5dp"
                android:paddingLeft="11dp"
                android:paddingRight="11dp"
                >

    <ImageView
            android:id="@+id/conversationUserImage"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:background="@drawable/my_ears_placeholder_grey_background"
            android:layout_alignBottom="@+id/conversationBubble"
            />

    <TextView
            android:id="@+id/conversationDate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Time Ago"
            android:layout_below="@id/conversationUserImage"
            android:layout_marginTop="5dp"

            />

    <TextView
            android:id="@+id/conversationBubble"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/conversationUserImage"
            android:text="Exemple Text"
            android:background="@drawable/bubbleleft"
            android:gravity="center"
            />

    <ImageView
            android:id="@+id/messagePicture"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/conversationUserImage"
            android:gravity="center"
            />

</RelativeLayout> 
```

然后，我没有复制 xml，而是使用自定义适配器调用的方法在代码中设置布局更改：

```
private View getConversationItem(Message message) {

        View view = LayoutInflater.from(ConversationActivity.this).inflate(R.layout.conversation_item, null);
        ...

        if (message.iAmOwner()) {          
                conversationBubble.setBackground(getResources().getDrawable(R.drawable.bubbleleft));
                messagePicture.setBackground(getResources().getDrawable(R.drawable.bubbleleft));                               
                ImageLoader.getInstance().displayImage(myPictureURL, conversationUserImage, options);
                ...
        }
        else {    
                ImageLoader.getInstance().displayImage(senderPictureURL, conversationUserImage, options);
                conversationBubble.setBackground(getResources().getDrawable(R.drawable.bubbleright));
                messagePicture.setBackground(getResources().getDrawable(R.drawable.bubbleright));

            RelativeLayout.LayoutParams conversationUserImageParams = (RelativeLayout.LayoutParams)       conversationUserImage.getLayoutParams();
            conversationUserImageParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
            conversationUserImage.setLayoutParams(conversationUserImageParams);

            RelativeLayout.LayoutParams conversationDateParams = (RelativeLayout.LayoutParams)conversationDate.getLayoutParams();
            conversationDateParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
            conversationDate.setLayoutParams(conversationDateParams);

            RelativeLayout.LayoutParams conversationBubbleParams = (RelativeLayout.LayoutParams) conversationBubble.getLayoutParams();
            conversationBubbleParams.addRule(RelativeLayout.LEFT_OF,R.id.conversationUserImage);

            RelativeLayout.LayoutParams messagePictureParams = (RelativeLayout.LayoutParams) messagePicture.getLayoutParams();
            messagePictureParams.addRule(RelativeLayout.LEFT_OF,R.id.conversationUserImage);

            messagePictureParams.removeRule(RelativeLayout.RIGHT_OF);
            conversationBubbleParams.removeRule(RelativeLayout.RIGHT_OF);

            conversationBubble.setLayoutParams(conversationBubbleParams);
            messagePicture.setLayoutParams(messagePictureParams);

        }

        return view;
    } 
```

希望这可以帮助。干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:11:13.897

您无需为聊天创建两个不同的 xml。您可以单独实现这一目标。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/txtsenderdt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left|center"
            android:text="07:03"
            android:textColor="@android:color/darker_gray"
            android:textSize="18dp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/txtsender"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="left"
            android:background="@drawable/chat1"
            android:text="realy long realy long realy long realy long realy long realy long realy long realy long realy long realy long realy long realy long realy long realy long realy long realy long"
            android:textSize="18dp" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:14:47.733

因为您使用`LinearLayout`with `orientation="horizontal"`first `TextView`in message left 填充所有可用空间。所以你必须改变`LinearLayout`成`RelativeLayout`这样

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:gravity="left">

    <TextView
        android:id="@+id/MessageListItemDate"
        android:layout_width="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_height="fill_parent"
        android:textColor="#cbc4b1"
        android:text="23:11"
        android:gravity="center_horizontal|center_vertical" />

    <TextView
        android:id="@+id/MessageListItemText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textColor="#000000"
        android:layout_toLeftOf="@id/MessageListItemDate"
        android:background="@drawable/RoundedCornersBlue"
        android:padding="8dp"
        android:text="realy long realy long realy long realy long realy long realy long realy long realy long "
        android:layout_marginRight="5dp" />
</RelativeLayout> 
```

# javascript - 如何从 chrome 扩展弹出窗口打开一个新标签

> ID：13155501
> 
> 赞同：2
> 
> 时间：2012-10-31T10:07:17.060
> 
> 标签：javascript, google-chrome, google-chrome-extension

我是 chrome 扩展的新手。我已经尝试了创建扩展的第一个示例练习。现在我正在尝试从扩展弹出窗口的新选项卡中打开一个 URL。只是我在 popup.html 页面中添加了一个 HTML 锚标记。

```
a href="www.google.com">Click</a> 
```

但它没有打开。它试图在弹出窗口本身中打开带有以下 url 的 URL。

*chrome-extension://ljamgfaclheagbikmcagffcbdbcoodna/www.google.com*

我的 popup.html 有这个代码。

```
<!doctype html>
<html>
  <head>
    <title>Getting Started Extension's Popup</title>
    <style>
    </style>
    <!-- JavaScript and HTML must be in separate files for security. -->
     </head>
  <body>
  <b>Karthick</b>
  <a href="www.google.com">Click</a>
  </body>
</html> 
```

我的 Manifest.json 有以下 JSON

```
{
  "name": "Test Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension for my test",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [
    "tabs"
  ]
} 
```

我没有在 popup.js 中写任何东西我搜索了它是如何做到的。但是他们说我必须使用以下内容。

```
chrome.tabs.getSelected({}, function(tab) {
  chrome.tabs.update(tab.id, {url: 'http://google.com'});
}); 
```

但我不知道正确的方法/在哪里做。请告诉我执行此操作的步骤。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-18T14:31:24.737

这是解决方案，只需将以下代码添加到popup.js：

```
$(function() {
  $('#s').click(function() {
     chrome.tabs.create({url: 'http://www.google.com'});
  });
});

document.addEventListener('DOMContentLoaded'); 
```

并更新您的锚标记，使其看起来像这样：

```
<a id="s" href="www.google.com">Click</a> 
```

因为我们使用的是 jquery 选择器，所以将您的 popup.html 更新为：

```
<!doctype html>
<html>
  <head>
    <style>
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script src="popup.js"></script>
  </head>
  <body>
  <b>Karthick</b>
  <a href="www.google.com">Click</a>
  </body>
</html> 
```

并允许 popup.html 中的 jquery 更新您的清单，使其看起来像：

```
{
  "name": "Test Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The first extension for my test",
  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [
    "tabs"
  ],  //<<--- do not miss this ","
  "content_security_policy": "script-src 'self' https://ajax.googleapis.com; object-src 'self'"
} 
```

如果这不起作用，让我把这个的 crx 发给你。干杯!

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-23T02:02:15.927

[简单的。](https://stackoverflow.com/a/9863145/3345375)把它放在 popup.html 中：

`<a href='google.com' target='_newtab'>Click</a>`

或者把这个放在 JS 文件中：

`window.open('http://google.com','_newtab');`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T10:14:38.747

您可以为该链接添加一个 onclick-listener。

```
var link = document.getElementById("link");
link.addEventListener("click", function(){
  chrome.tabs.getSelected({}, function(tab) {
    chrome.tabs.update(tab.id, {url: 'http://google.com'});
  });
}, false); 
```

但是我会使用该`chrome.tabs.create()`功能。

# ruby-on-rails-3 - 使用 robots.txt 防止搜索蜘蛛访问 Rails 3 嵌套资源

> ID：13155503
> 
> 赞同：0
> 
> 时间：2012-10-31T10:07:33.923
> 
> 标签：ruby-on-rails-3, robots.txt

我试图阻止 Google、Yahoo 等访问我的 /products/ID/purchase 页面，但我不确定该怎么做。

我目前阻止他们通过以下方式登录：

```
User-agent: *
Disallow: /sign_in 
```

我可以执行以下操作吗？

```
User-agent: *
Disallow: /products/*/purchase 
```

或者应该是：

```
User-agent: *
Disallow: /purchase 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T14:37:17.973

我假设您想阻止`/products/ID/purchase`但允许`/products/ID`.

您的最后一个建议只会阻止以“购买”**开头的页面：**

```
User-agent: *
Disallow: /purchase 
```

所以这不是你想要的。

你需要你的第二个建议：

```
User-agent: *
Disallow: /products/*/purchase 
```

这将阻止所有以 开头`/products/`、后跟任何字符、后跟 . 的URL `/purchase`。

注意：它使用通配符`*`。在最初的 robots.txt“规范”中，这并不是一个具有特殊含义的字符。但是，一些搜索引擎扩展了规范并将其用作一种通配符。所以它[应该适用于谷歌](https://developers.google.com/webmasters/control-crawl-index/docs/robots_txt)和可能的其他一些搜索引擎，但你不能打赌它会适用于所有其他爬虫/机器人。

所以你的 robots.txt 可能看起来像：

```
User-agent: *
Disallow: /sign_in
Disallow: /products/*/purchase 
```

另请注意，某些搜索引擎（包括 Google）可能仍会在其搜索结果中列出 URL（没有标题/片段），尽管它在 robots.txt 中被阻止。当他们在允许被抓取的页面上找到指向被阻止页面的链接时，可能就是这种情况。为防止这种情况，您必须查看`noindex`文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:23:17.867

[According to Google](https://developers.google.com/webmasters/control-crawl-index/docs/robots_txt) `Disallow: /products/*/purchase` should work. But [according to robotstxt.org](http://www.robotstxt.org/robotstxt.html) this doesn't work.

# wireshark - Wireshark 不显示请求数据包

> ID：13155506
> 
> 赞同：0
> 
> 时间：2012-10-31T10:07:44.577
> 
> 标签：wireshark, packets

我在 Windows 7 上使用 Wireshark v1.8.3，我正在使用 cmd 发送 ping 以查看 Wireshark 上的数据包。正在显示回复数据包，但未显示请求数据包。我是否有某种需要删除的过滤器？

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:30:51.637

我已经解决了这个问题——我的防火墙阻止了请求数据包。

# php - 在进程开始之前回显

> ID：13155507
> 
> 赞同：0
> 
> 时间：2012-10-31T10:07:47.743
> 
> 标签：php, copy, system, fork

我想（在表单提交之后）在整个 PHP 过程完成之前打印一些 HTML 代码。以下代码仅在 copy() 和 system() 完成后打开窗口：

```
<script language="javascript">
window.open("copyProgress.php?source=<?php echo $_POST['element_100'];?>","","width=400,height=400,resizable=no,toolbar=no,location=no,directories=no,status=no,menubar=no");
</script>

<?php

sleep(3);

//move the file to the net disk
if(copy($tempUploadDir."\\".$_POST['element_100'], $dir.$subfolder."\\".$filename)) { 
    unlink($tempUploadDir."\\".$_POST['element_100']);  
} else {   
    die("problem with uploading file. ".$tempUploadDir."\\".$_POST['element_100']);
}

system("x264.exe $args");

?> 
```

您能否建议如何首先显示（并工作）HTML（JS）代码？

谢谢，马克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:09:45.893

用 . 刷新 PHP 输出缓冲区`ob_flush()`。见[http://php.net/manual/en/function.ob-flush.php](http://php.net/manual/en/function.ob-flush.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:16:43.670

您可以使用重定向到其他页面，例如

```
$redirect = "http://www.example.com/";
header( 'Location: '.$redirect ); 
```

并首先在那里执行javascript，几秒钟后只用php重定向回这个页面。问题是在服务器完成它的工作并将 HTML 发送到客户端之前，javascript 不会被执行。

# windows - 如何在 Windows 中使用 Sphinx 创建 PDF 文档

> ID：13155509
> 
> 赞同：16
> 
> 时间：2012-10-31T10:07:50.497
> 
> 标签：windows, pdf, python-sphinx

我正在使用 Sphinx 在 Windows 中为我的 Python 项目创建文档。我需要生成 PDF 文档。我找到了很多解释如何在 Linux 中执行此操作，但没有很好的解释如何在 Windows 中执行此操作。据我了解，我需要使用 Sphinx 创建 Latex 格式，然后使用 Texworks 将 Latex 转换为 PDF。假设我创建了 Latex 格式的文档并安装了 Texworks，有人可以提供分步说明我该怎么做吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-12T01:24:48.357

安装 MiKTeX (< 200mb)

```
wget -nv -N http://mirrors.ctan.org/systems/win32/miktex/setup/miktex-portable-2.9.4757.exe
7z.exe x -y miktex-portable-2.9.4757.exe -o"miktex" 
```

将 bin 目录添加到您的路径

```
SET Path=%Path%;%CD%\miktex\miktex\bin 
```

运行 Sphinx 的“make.bat”来生成 .tex 文件。

```
SET SPHINXOPTS=-W -E
make.bat latex 
```

调用 MiKTeX 的 pdflatex：

```
cd build/latex
pdflatex.exe YOUR_PROJECT_NAME.tex 
```

生成的 PDF 将在您的 build/latex 目录中

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-22T11:50:35.997

安装*完整的* [tex live](http://www.tug.org/texlive/)发行版，它将安装 Latex、PDF 后端和 texworks。是的，它很多，是的，它会根据您的管道安装并安装一个胖小时。但这将是次演出，现在硬盘很大。

据我所知，***Texworks***只是一个简单的 LaTeX 编辑器，具有一些构建功能和乳胶语法突出显示。仅编译并不需要它（您可以使用记事本）

然后只需将 tex live 二进制目录放在路径中并执行

```
 pdflatex <yourlatexdocument.tex> 
```

在 cmdline 上，至少这是我对我们自己的文档生成工具的乳胶输出所做的

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-08-29T22:25:36.617

如您所见：使用 Sphinx 生成 LaTeX 源代码，然后通过 LaTex 编译器运行它以生成 PDF。

我建议您使用其中一种在线 LaTeX 服务，而不是为安装 LaTeX（这可能令人生畏）和设置编辑器而烦恼。然后，您只需在 ShareLaTeX 或 Overleaf 中创建一个项目，例如（正在合并中），上传 Sphinx build\latex 目录的内容，在线编译，并下载完成的 PDF。

这工作得相当好，但由于输出目标非常不同（HTML 与正式文档），您可能必须摆弄 reST 才能以您喜欢的方式获得东西。

# ruby-on-rails - 以秒为单位添加 DateTime 偏移量

> ID：13155510
> 
> 赞同：2
> 
> 时间：2012-10-31T10:07:58.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个 UTC 日期时间，并想添加一个以秒为单位的偏移量

```
#json parsed - utc offset in seconds - turned into integer
@utc_offset = result["UTCOffsetMillis"].to_i
#json parsed - utc date
start_date_string = result["startDate"].split("-")
start_date = DateTime.new(start_date_string[0].to_i, start_date_string[1].to_i,start_date_string[2].to_i) 
```

如何以秒为单位将此偏移量添加到 start_date？

导轨 3.2.3 红宝石 1.9.2p320

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T11:15:30.447

要以秒为单位添加偏移量，`DateTime`您可以使用：

```
DateTime.new(2012, 10, 31) + 5.seconds
#=> Wed, 31 Oct 2012 00:00:05 +0000 
```

要更改*时区*，我会使用`Time`而不是`DateTime`：

```
Time.new(2012, 10, 31, 0, 0, 0, 3600).localtime
#=> 2014-10-31 00:00:00 +0100 
```

`3600`是与 UTC 的偏移量，以秒为单位。

# ffmpeg - 在我的服务器 Centos 5.8 中使用命令 yum

> ID：13155511
> 
> 赞同：1
> 
> 时间：2012-10-31T10:07:59.480
> 
> 标签：ffmpeg, centos, yum

我想在我的服务器上安装 ffmpeg-php 但是。
我不能在我的服务器 Centos 5.8 中使用命令 yum。
有人可以帮助我吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T08:36:35.043

Can you please provide more info?

You can't use yum because:

*   You don't have privileges to use it
*   You are getting some error... Can you post this error if there is any?

# symfony - SwiftMailer 假脱机传输

> ID：13155517
> 
> 赞同：1
> 
> 时间：2012-10-31T10:08:19.990
> 
> 标签：symfony, swiftmailer, spool

在 symfony 2 中，如果我创建一个新的 swiftmessage 实例，我可以在其中提供传输。

```
$email = \Swift_Message::newInstance( $transport ) 
```

但是如何将传输放入其中以及如何配置？（如线轴路径）

我试过了：

```
$transport = new \Swift_Transport_SpoolTransport(); 
```

> 可捕获的致命错误：传递给 Swift_Transport_SpoolTransport::__construct() 的参数 1 必须是 Swift_Events_EventDispatcher 的实例，没有给出，在第 67 行的 /Users/mitchel/Projecten/Refurls/src/Refurl/FrontendBundle/Controller/MessageController.php 中调用，并且在 /Users/mitchel/Projecten/Refurls/vendor/swiftmailer/lib/classes/Swift/Transport/SpoolTransport.php 第 27 行中定义

所以我认为我没有使用正确的课程。谁能以正确的方式推动我？=)

* * *

下个代码也直接发送

```
$transport = new \Swift_FileSpool( '../app/spool' );
$email = \Swift_Message::newInstance( $transport ) 
```

我发现 Swift_Message 不需要运输。

```
public function __construct($subject = null, $body = null,
    $contentType = null, $charset = null) 
```

提供运输服务会很好。我不想在配置中配置它的原因是，如果我创建 2 个服务和 1 个：

```
<argument type="service" id="swiftmailer.transport.real" /> 
```

这个 transport.real 将忽略 swiftmailer.delivery_address。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:08:33.703

需要`Swift_Transport_SpoolTransport`两个参数（来源：[http](http://apigen.juzna.cz/doc/swiftmailer/swiftmailer/class-Swift_Transport_SpoolTransport.html) ://apigen.juzna.cz/doc/swiftmailer/swiftmailer/class-Swift_Transport_SpoolTransport.html ）：

1.  Swift_Events_EventDispatcher $eventDispatcher
2.  Swift_Spool $spool = null

对于第一个参数，我使用了这个类：

```
new \Swift_Events_SimpleEventDispatcher(); 
```

简单！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:10:50.157

您在文件中进行所有[配置](http://symfony.com/doc/current/reference/configuration/swiftmailer.html)`config.yml`并创建一条消息，而不向工厂方法传递任何内容：

```
$message = Swift_Message::newInstance(); 
```

# android - 有什么方法可以直接为歌曲制作下载链接吗？当我做这样的事情时：它在浏览器中打开网站

> ID：13155521
> 
> 赞同：-1
> 
> 时间：2012-10-31T10:08:34.047
> 
> 标签：android

当我点击下载按钮时，它会转到网站页面。我在[网址](http://picosong.com/cdn/859add1109b307d65e4faa029a9397ee/)上上传我的歌曲。有没有什么方法可以通过单击下载按钮来制作它。请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:18:30.553

这可能对你有帮助

[https://stackoverflow.com/a/3028660/1661067](https://stackoverflow.com/a/3028660/1661067)

看看所有的实现！

# ruby-on-rails - 关于 TypeError 的错误（错误的参数类型模块（预期的类））：app/controllers/player_profiles_controller.rb:1:in ` '

> ID：13155522
> 
> 赞同：2
> 
> 时间：2012-10-31T10:08:40.700
> 
> 标签：ruby-on-rails, ruby

我收到如下所示的错误：

```
TypeError (wrong argument type Module (expected Class)):
app/controllers/player_profiles_controller.rb:1:in `<top (required)>' 
```

什么可能导致上面显示的错误？

我想通过在 SoapUI 中呈现 JSON 来测试结果。

这是错误

```
Started POST "/player_profiles/show" for 192.168.6.246 at 2012-11-02 10:14:15 +0700

TypeError (wrong argument type Module (expected Class)):
  app/controllers/player_profiles_controller.rb:1:in `<top (required)>'

Rendered /home/gunarto/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_trace.e
rb (3.0ms)<br>
  Rendered /home/gunarto/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/_request
_and_response.erb (2.3ms)<br>
  Rendered /home/gunarto/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/diagnost
ics.erb within rescues/layout (19.2ms) 
```

**player_profiles_controller.rb**

```
class PlayerProfilesController < ActionController<br><br>

  def register<br>
    @player_profile = PlayerProfile.find(:first , :conditions => {:PlayerProfile => {:fullname => params[:fullname]}})<br>
    if @player_profile == nil<br>
    @player_profile = PlayerProfile.create(:fullname => params[:fullname], :nickname => params[:nickname], 
                                           :weight => params[:weight], :height => params[:height] , 
                                           :bloodtype => params[:bloodtype], :teamname => params[:teamname], 
                                           :playerno => params[:playerno], :playerphoto => params[:playerphoto])   <br>
    else<br>
    @player_profile = PlayerProfile.find_by_sql("SELECT * FROM PlayerProfile WHERE fullname = '#{params[:fullname]}'")<br>
    end<br>
    render :json => {:result => @player_profile}<br>
  end<br><br>

  def show<br>
    @player_profile = PlayerProfile.find_by_sql("SELECT * FROM PlayerProfile WHERE fullname= ? LIMIT 1 ",params[:fullname])<br>
    render :json => {:result => @player_profile}<br>
  end<br><br>

  def delete<br>
    @player_profile = PlayerProfile.destroy_all(:fullname => params[:fullname])<br>
    render :json => {:result => @player_profile}<br>
  end<br><br>

  def update<br>
    @player_profile = PlayerProfile.update_all(:fullname => params[:fullname], :nickname => params[:nickname],
                                               :weight => params[:weight], :height => params[:height], :bloodtype => params[:bloodtype],
                                               :teamname => params[:teamname], :playerno => params[:playerno] , :playerphoto => params[:playerphoto])<br>
    head :ok , :content_type => 'application/json'<br>
  end<br>
end 
```

**我在配置中的路线**

```
post ':controller/:action' , :format => 'json' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:58:42.493

您可以向我们展示错误消息中提到的代码吗？似乎您将一些错误类型的参数添加到它无法处理的方法中。

# java - 制作无法卸载/删除的Android应用

> ID：13155526
> 
> 赞同：3
> 
> 时间：2012-10-31T10:08:48.047
> 
> 标签：java, android, security

我想为 Android 手机制作一个安全应用程序。基本上，我不希望任何人无需先输入特定密码即可卸载它。

另外，有没有办法防止应用程序被手动停止（比如通过任务管理器关闭）等？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-31T10:11:43.857

无论如何，这听起来更像是类似于恶意软件的行为，而不是常规 Android 应用程序的行为：

对于一个普通的 Android 应用程序，我想让它“可卸载”几乎是不可能实现的——试着考虑一下如果可能的话，Android 应用程序市场现在的状态会是什么样子！

另一方面，如果[特权控制](http://en.wikipedia.org/wiki/Superuser)（root 访问）可用，那么这可能是一种可能性——例如无线运营商如何实施[捆绑软件](http://en.wikipedia.org/wiki/Pre-installed_software)。**但是**，就像我提到的，没有可用于通过发布的应用程序的常规途径。Android 市场要实现你所要求的，你应该很清楚为什么......

# apache - 如何从 http://localhost:8123 中删除端口号以用作 http://localhost？

> ID：13155529
> 
> 赞同：8
> 
> 时间：2012-10-31T10:08:53.147
> 
> 标签：apache, xampp, localhost, hosts

我不得不将我的默认 apache 端口号 80 更改为 8123（只是随机数）

我更改了以下文件..

**httpd.conf**

```
Listen 8123
ServerName localhost:8123 
```

**httpd-vhosts.conf**

```
NameVirtualHost *:8123
<VirtualHost *:8123>
  ServerName localhost
  DocumentRoot "C:/xampp/htdocs"
  DirectoryIndex index.php
</VirtualHost> 
```

**Windows 主机文件**

```
127.0.0.1:8123     localhost
::1:8123           localhost 
```

我正在使用 Windows 7。

进行所有这些更改后，我重新启动了 apache，但我仍然无法访问`http://localhost`……但是`http://localhost:8123`工作正常……有人可以帮我找出我做错了什么吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T10:12:32.733

唯一的方法是改回`80`，或在端口 80 上安装一个监听器（如代理），将所有流量重定向到端口 8123。

当您输入不带端口的服务器名称时，默认使用端口 80。AFAIK，如果不更改浏览器的源代码，就无法更改此行为。

该`hosts`文件不支持您尝试执行的重定向类型。规则只是失败了。

> **编辑：**啊，在某些浏览器中可能会更改默认端口。[这是](http://forums.mozillazine.org/viewtopic.php?f=38&t=281517)MozillaZine for Firefox 中的一篇文章。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T10:16:01.080

您可以使用`proxyPass`和删除它`proxyPassReverse`

```
<VirtualHost *>
    ServerName localhost
    ProxyPass / http://127.0.0.1:8123/ 
    ProxyPassReverse / http://127.0.0.1:8123/ 
</VirtualHost> 
```

# sql-server-2008 - 使用 temp 和 while 循环以及循环内的大量 select 语句优化查询

> ID：13155530
> 
> 赞同：0
> 
> 时间：2012-10-31T10:08:53.490
> 
> 标签：sql-server-2008, indexing, query-optimization

我想提高在临时表中有记录的查询的性能，并且正在使用 while 循环来访问临时表中的每一行并相应地使用它，但是在 while 循环中有很多检查，其中有许多选择语句所以当有很多记录说高于 300-400 时，则需要时间，因为使用 select 语句的表包含数千条记录。

索引会减慢插入 DML 操作，所以这里可以做的所有事情。

# macos - 安装 MMTK 2.7.8 - 分子建模工具包

> ID：13155533
> 
> 赞同：0
> 
> 时间：2012-10-31T10:09:19.477
> 
> 标签：macos, modeling

```
python setup.py install

lipo: can't open input file: /var/tmp//ccZn3E25.out (No such file or directory)
error: command 'gcc-4.2' failed with exit status 1 
```

Mac OS X 雪豹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:30:07.953

为了构建和安装 MMTK 包含的 C 扩展模块，Python 正在寻找构建它的 C 编译器。对于 OS X 10.6 (Snow Leopard)，最不容易出现问题的方法是安装`Xcode 3.2.6`Xcode 3 的最新（也是最后一个）版本。如果您还没有安装程序，可以下载它从[Apple Developer Site](https://developer.apple.com)免费（免费注册后）。确保`UNIX Development`选择安装子包。

如果您安装`Xcode 4`了 OS X 10.6 或其他 C 编译器，则*可以*通过提供带有编译器路径的 CC 环境变量来成功安装扩展模块，例如：

```
export CC=/usr/bin/cc 
```

您可能还需要提供引用编译器路径的其他变量，特别是`LDSHARED`.

# javascript - 如何在可从多个模板访问的主干.js 中添加全局函数？

> ID：13155534
> 
> 赞同：2
> 
> 时间：2012-10-31T10:09:18.507
> 
> 标签：javascript, templates, backbone.js

我创建了两个模板，一个用于表格，另一个用于表单输入。一个模板中的功能不能从另一个模板访问。我想要一个可以从两个模板访问的全局函数。我是骨干世界的新手。那么有什么规定可以做到这一点吗？或者有什么方法可以从另一个模板访问一个模板上的功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T10:47:49.837

有几种方法可以实现这一点。

**1.直接添加到Backbone**

从维护的角度来看，最简单但可能最不理想的方法是将函数添加为`Backbone`对象的属性：

```
Backbone.myFunction = function (...) { ... }; 
```

**2.注册一个模板助手**

第二个选项，根据您选择的模板引擎，您也许可以注册助手。例子：

```
Handlebars.registerHelper("myHelper", function (...) { ... }); 
```

**3.使用依赖注入**

第三种选择，如果您使用类似[require](http://requirejs.org/)的东西，将在一个公共依赖项中定义函数，并将其作为依赖项添加到两个视图。

# mercurial - 在创建多头分支、变基和多次合并后，如何在不创建新头的情况下推送

> ID：13155535
> 
> 赞同：5
> 
> 时间：2012-10-31T10:09:18.967
> 
> 标签：mercurial

*我对共享存储库的本地副本*做了一系列愚蠢的步骤，我正在寻找一种方法来修复它。步骤是：

*   我使用书签来拥有一个开发分支的多个负责人，其他人使用：

    ```
    -o---o---o-----o---   <- dev branch
      \----1----1------   <- another head of the dev branch,
                             where I committed stuff 
    ```

*   一段时间后，我创建了一个新分支，仍然是本地的

    ```
     /---------------x   <- new branch
    -o---o---o-----o---   <- dev branch
      \----1----1------   <- another head of the dev branch,
                             where I committed stuff 
    ```

*   对于一个只包含我的代码的头，我在另一个分支上做了一个变基

    ```
     /-1'--1'--  <- rebase
      /---------------x            <- new branch
    -o---o---o-----o---            <- dev branch
      \----1----1------            <- another head of the dev branch,
                                      where I committed stuff 
    ```

*   然后，我合并了变基，然后，在几次提交之后，我合并了默认值

    ```
     ----------d-\      <-default
                                    \
                       /-1'--1'\     \
      /---------------x--------x--x-x-x-- <- new branch 
    -o---o---o-----o---         
      \----1----1------ 
    ```

现在，我想将我的新分支推送到服务器（`hg push --new-branch -b newBranch`），但我得到了`abort: push creates new remote head`，因为提交`1'`属于开发分支。

什么是正确的做法？我想避免创建这个额外的头。

*更新*：

根据请求，这是以下输出`hg heads`：

```
changeset:   839:f2033d695fcd  <- want to push this
branch:      newBranch
tag:         tip
user:        me
date:        Wed Oct 31 13:05:51 2012 +0100

changeset:   826:7fde19d7f467
branch:      devBranch
user:        my-collegue
date:        Tue Oct 23 14:59:42 2012 +0200

changeset:   820:23853bbf68df  <- the part after rebase that got merged
branch:      devBranch
user:        me
date:        Mon Oct 22 15:36:26 2012 +0200

changeset:   807:899344cfb145  <- obsolete (branch with 1's)
branch:      devBranch
parent:      711:454f29c03fb1
user:        me
date:        Mon Oct 22 15:36:26 2012 +0200

changeset:   712:d5e8a62a7f5f  <- default, needs to stay
parent:      648:2bbcc01aa191
user:        me
date:        Wed Aug 22 16:21:09 2012 +0200 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-31T21:13:36.153

您只能推动您对 mercurial 感兴趣的一个头。对你来说，这意味着：

```
hg push -r f2033d695fcd 
```

如果目标仓库已更新，您需要拉取、合并和重新推送：

```
hg pull
hg up -r <remote head>
hg merge -r f2033d695fcd
hg ci
hg push 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T13:13:34.573

我解决了这个问题，没有将另一个头推到 repo 上，也没有合并`23853bbf68df`到`newBranch`. 这可能不是最干净的方法，但我会将其作为参考。简而言之，我通过接受所有提交并重新应用它们来重建整个分支。

首先，我杀死了`newBranch`'es head `899344cfb145`，在我做的第一个分歧修订中使用了 strip ：

```
hg strip -r 646 
```

然后，我为 中的所有提交生成了电子邮件补丁（无法使用 mq）`newBranch`，因为它是 inception：

```
hg export -g -r 797:808 -r 810 -r 815:822 -r 824:830 -o "%n-%m.patch" 
```

*   `797:808`是在（原始图的提交）`newBranch`的重新基础部分中的补丁。`devBranch``1'`
*   `810`并且`815:822`是`newBranch`. `811:814`属于不同的分支，所以我不得不排除那些。
*   `823`是与 的合并提交`default`，所以我跳过了这个。
*   `824:830`是合并后的所有提交`default`。

现在，我将这些补丁导入到一个新的头上`newBranch`：

```
hg up -r 796
# there are 29 patches, applying till merge
hg import --bypass {01..21}*.patch
hg up tip
hg merge default
hg ci -m 'merging in default'
hg import --bypass {22..28}*.patch 
```

最后，我只是剥离了`newBranch`.

```
hg strip -r 797 
```

这可能不适用于所有情况。在合并期间，我也必须解决一些冲突，但非常温和。希望这可以帮助某人。

# backbone.js - 如何识别 BackboneJS 模型服务器端

> ID：13155536
> 
> 赞同：2
> 
> 时间：2012-10-31T10:09:22.423
> 
> 标签：backbone.js

我只是在了解 BackboneJS，但我仍在努力解决的（许多）事情之一是模型如何同步并与服务器端数据库记录相关联。

例如，我有一个“Dvd”模型，现在我更改“Dvd”模型上的一个属性，例如名称，然后我调用save()，服务器端如何知道要更新哪些数据库记录？Backbone 是否保存数据库行 ID 或其他内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:29:25.923

是的，通常您将设置您的 Backbone 模型，以便它们具有您正在使用的任何对象的数据库行 ID。当其中一个在客户端是全新的并且尚未保存到服务器时，它将具有默认 ID 或没有 ID，这无关紧要，因为如果初始保存事务成功，服务器将分配 ID .

在保存或更新模型项时，Backbone 期望服务器回复一些 JSON，其中包括自发出保存或更新请求以来已更改的任何属性。在对初始保存请求的响应中，服务器会通知客户端新保存的项目的行 ID（您也可以同时发送您可能需要传递给客户端的任何其他信息）。

默认情况下，模型对象的 'id' 属性被假定为其唯一标识符，但如果您对主键使用不同的标识符，主干允许您更改此属性。只需为您的模型提供一个`idAttribute`参数（请参阅 文​​档`Backbone.Model.extend()`）来执行此操作。

同时，可以为您的模型提供`urlRoot`参数或`url`函数来表征应该用于将各种 ajax 请求发送到给定模型的服务器的 url。

# .net - 代码可以基于什么检测他的当前配置（测试/QA/Prod）？

> ID：13155538
> 
> 赞同：0
> 
> 时间：2012-10-31T10:09:25.000
> 
> 标签：.net, vb.net, web-deployment

我希望部署能够对连接字符串、设置等进行防错。App可以在哪个参数上进行测试，以确定它在启动时运行在哪里。System.Environment.MachineName 是个坏主意吗？有没有一种通用的方法可以做到这一点？

我要解决的是 web.config 文件在每次合并期间与源代码合并的事实。所以我不能为每种部署都有一个特殊的 web.config。

我的想法是在原始 web.config 中有 3 个设置。该应用程序将能够检测并找出它运行的位置，并在 3 个应用程序设置、3 个适合当前运行环境的连接字符串中进行挑选......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:17:42.297

我认为这不是一个好主意，你应该首先分开你的环境。p 无法访问 test 和 qa 环境（反之亦然）。结果，您的应用程序将无法工作，将错误的配置文件放在 p 上。这与您检查机器名称和配置设置的结果相同。如果您出于任何原因更改生产机器，则必须重新编译代码，并且需要一个完整的测试周期来检查是否一切正常。这将是昂贵且耗时的。

# c++ - Clang 解析公共枚举类

> ID：13155542
> 
> 赞同：2
> 
> 时间：2012-10-31T10:09:32.177
> 
> 标签：c++, parsing, clang

如何使 clang 能够解析公共枚举类构造？

```
access enum class enumeration-identifier [:underlying-type] { enumerator-list } [var]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:12:55.160

为我工作。

```
$ cat main.cpp
enum class Foo { X, Y };

int main() { }
$ c++ --version
Apple clang version 3.1 (tags/Apple/clang-318.0.58) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.2
Thread model: posix
$ c++ -std=c++11 main.cpp -o main
$ ./main 
```

# html - 隐藏在图像后面的 div 标签

> ID：13155545
> 
> 赞同：1
> 
> 时间：2012-10-31T10:09:41.260
> 
> 标签：html, css

我有一个问题，应该在悬停时显示的 div 标签隐藏在图像后面。这是它的外观：

![在此处输入图像描述](../Images/aa4bdd6f20348b8416a3b49a711f039c.png)

我试图用 jsfiddle 重新制作它：http: [//jsfiddle.net/Gwxyk/21/](http://jsfiddle.net/Gwxyk/21/) 我也在“.image-options”上尝试了相对位置，但结果不正确。另外，我如何将橙色的小盒子浮动到右侧？我试过浮动：对；但它没有回应。

会得到帮助。

一些任意代码，因为stackoverflow要求它（它在jsfiddle中）：

```
.image-options { 
float: right; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:24:15.627

我很难准确地理解你需要发生什么。但是，您是否尝试过使用 z-index 属性？div 和图像都需要相对或绝对定位，然后对要出现在前面的元素应用更高的 z-index。因此，您可以将 z-index: 1 应用于图像并将 z-index: 100 应用于 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:29:24.587

这是你所期待的吗？

添加`top:0`和`.image-options`交换image和inner div的位置。

[**演示**](http://jsfiddle.net/Gwxyk/42/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:56:24.960

给你，我想这会帮助你。

[http://jsfiddle.net/dmP2x/](http://jsfiddle.net/dmP2x/)

你不必用 jQuery 来做这件事，尽可能多地使用 CSS 来整理你的代码。

CSS：

```
 .testclass {
    width: 105px;
    height: 80px;
    overflow: hidden;
    display: inline-block;
    border: 2px solid rgba(140,140,140,1);
}

.image-options {
    width: 10px;
    height: 10px;
    border: 2px solid rgba(255,128,64,1);
    position: absolute;
    top: 10px;
    left: 25px;
    overflow: none;
    display: none;
}
.image {
    background-image: url('http://www.placehold.it/105X80');
    width: 105px;
    height: 80px;
    position: relative;
}
.image:hover .image-options {
    display: block;
} 
```

html:

```
<div class="testclass">
    <div class="image">
        <div class="image-options"></div>
    </div>
</div>​ 
```

# ios - 没有phonegap的iOS项目中的JQuery Mobile

> ID：13155546
> 
> 赞同：0
> 
> 时间：2012-10-31T10:09:41.587
> 
> 标签：ios, jquery-mobile, uiwebview

*在我开始之前，请不要对我大喊大叫，告诉我答案在这里或那里，我所有的研究都被phonegap结果污染了，我不使用它，所以我很难找到答案！*

我目前正在开发一个**原生**iOS 应用程序。它几乎完成了，除了一个部分，它将包含**大量**文本（基本上是一项运动的所有规则，10 个部分，包含 2 到 18 个子部分，每个部分都有很多文本）。我开始实现，使用 UITableViewController 显示主要部分，然后选择一个单元格将我带到另一个 UITableViewController 与所选部分的所有子部分。然后，选择一个子部分，你应该得到它的内容。我开始做的是在单元格中使用另一个带有 TextViews 的 UITableVC，使用节标题来构造文本，但这**真的**不方便，也不好阅读。

所以，我想在 UIWebViews 中使用 html 页面。我正在考虑使用 JQueryMobile，因为我过去曾使用过它，我认为您可以很快得到很好的结果。所以，我有几个问题：

1.  首先，您如何看待本节的结构？（一个 UITableVC 发送到另一个 UITableVC，调出一个 UIWebView）。我怎样才能做一些尽可能可读的事情？这真的是我第一次在应用程序中放入这么多文本，所以我对自己的设计没有我开发更多“标准”东西时的把握。我想做得更好，但我**不**知道如何才能做得更好..

2.  其次，JQuery Mobile 是一个不错的选择吗？这带来了真正的问题：**如何在我的应用程序中包含 JQuery Mobile？**我知道我可以直接从 JQuery 的服务器中包含 .js 和 .css，但是我的应用程序可以离线运行，那么我应该把需要的文件放在哪里？如何将它们包含在 html 文件中？

感谢您的帮助，再次，如果第二个问题已被提出/回答，我很抱歉，但是当您搜索*JQuery Mobile*和*iOS*时，您得到的只是 PhoneGap 问题。

以防万一 ：

> XCode 4.5.1
> 
> iOS 5+
> 
> 故事板
> 
> 弧

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:29:25.850

因为`UIWebView`对象会占用大量内存，所以在原生视图中最好只有一个`UIWebView`对象。不要为每一行添加它`UITableViewController`。

您可以正常编写网页并包含 jQuery Mobile，并在 Mobile Safari 上对其进行测试（通过在 Mac 上启动服务器并在您的 iOS 设备/模拟器中访问它）。测试后，在你的 XCode 项目中添加目录作为蓝色的“文件夹引用”。使用以下代码加载页面`UIWebView`：

```
NSString *baseDirectory = [[NSBundle mainBundle].resourcePath stringByAppendingPathComponent:@"your_directory"];
NSURL *url = [NSURL URLWithString:@"your_index.html" relativeToURL:[NSURL fileURLWithPath:baseDirectory]]
NSURLRequest *request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:3600];
[webView loadRequest:request]; 
```

# ruby-on-rails - 从文件加载 yaml 并加入失败

> ID：13155548
> 
> 赞同：0
> 
> 时间：2012-10-31T10:09:44.327
> 
> 标签：ruby-on-rails, ruby, join, yaml

我尝试将 yaml 文件加载到数组中，但由于“ab c”的未定义方法“join”失败：String

```
# Check certain temporarily emails
# Throw notice not accepted use other email
require 'yaml'
bad_hostnames = YAML::load(File.read("#{Rails.root}/config/bad_hosts.yml"))
if /^(#{bad_hostnames.join("|")})$/.match(host)
  errors.add(:email, "Please not use a disposable mailbox")
end 
```

*所以我在模型之前和顶部*需要 yaml ，我在其中加载 yml 的控制器：

```
require 'yaml' 
```

仍然是相同的结果，在 Rails 控制台中这完美无缺，我错过了什么？上面的代码在我的 user.rb 模型中，在控制台中它可以工作

编辑：bad_hosts.yml 看起来像（缩短）1 提供者该行

```
0-mail.com
10minutemail.com
30minutemail.com
4warding.net 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:31:46.157

您的*`.yml`*文件不是[YAML](http://yaml.org/spec/)文件。

这将使其`.yml`归档。

```
- 0-mail.com
- 10minutemail.com
- 30minutemail.com
- 4warding.net 
```

但是，当您只想逐行加载文件时，请尝试以下操作：

```
lines = IO.readlines("#{Rails.root}/config/bad_hosts.yml")
# note: lines end in "\n" 
```

# blackberry - 如何在我的应用程序打开之前在黑莓中显示一个输入对话框，询问用户名和密码

> ID：13155553
> 
> 赞同：0
> 
> 时间：2012-10-31T10:09:52.657
> 
> 标签：blackberry

我的要求是创建一个需要身份验证才能打开的黑莓应用程序。现在我创建了一个任何人都可以打开的简单黑莓应用程序。但是我需要在它询问用户名和密码的地方放置一个对话框。一旦凭据有效，则仅应加载应用程序。暂时我在点击我的应用程序时需要一个对话框。凭证的验证可以在稍后的时间点完成。

# jquery - 如何选择与类列表匹配的任何输入？

> ID：13155559
> 
> 赞同：-1
> 
> 时间：2012-10-31T10:10:13.903
> 
> 标签：jquery, jquery-selectors

此代码按我的需要工作：

```
$('input[class="plus"], input[class="minus"]').mousedown(function () {       
        //..doing something
    }); 
```

* * *

我想要的是这样的：

```
$('input[class="plus minus"]').mousedown(function () {            
        //..doing something
    }); 
```

或喜欢：

```
$('input[class="plus"][class="minus"]').mousedown(function () {            
        //..doing something
    }); 
```

选择器应该选择任何输入，具有`plus`类或`minus`.

一定有其他语法，但我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:12:44.070

正确的语法是使用逗号分隔选择器，就像您指出的那样，但选择器应该这样写：

```
$('input.plus, input.minus').mousedown(function () {       
    //..doing something
}); 
```

作为最后的选择，您可以使用`.add`：

```
$('input.plus')
    .add($('input.minus'))
    // possibly add more elements here
    .mouseover(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:13:56.913

```
$('input.plus, input.minus').mousedown(function () {       
    //..doing something
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T10:14:17.797

我建议：

```
$('input.plus, input.minus').mousedown(function () {            
    //..doing something
}); 
```

...这样输入上的其他类就不会让你跳过它们。如果您使用属性 equals 选择器（您的`input[class="plus"]`），它只会匹配上**唯一**的类`input`is `"plus"`。所以它会匹配`<input class="plus">`但不匹配`<input class="plus foo">`。通常，您希望在元素上具有其他类的灵活性。

或者，您*可以*这样做：

```
$('input').filter('.plus, .minus').mousedown(...); 
```

...但它的效率可能会降低：首先它会让 jQuery 查找*所有* `input`元素，然后将结果分别过滤到具有这些类的那些。所以我不会推荐它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T10:18:40.540

我会去绑定

```
$onInputMouseDown = function() {
    ....
}

$(".plus").bind("mousedown",$onInputMouseDown);
$(".minus").bind("mousedown",$onInputMouseDown); 
```

# jquery - 由 masonry-plugin 制作的 chrome 废墟布局

> ID：13155565
> 
> 赞同：-2
> 
> 时间：2012-10-31T10:10:33.647
> 
> 标签：jquery, html, css, google-chrome, jquery-masonry

你可以在这里看到它的实际效果：

[http://maenhaut.wordtgetest.be/index.php?a=nl&b=home](http://maenhaut.wordtgetest.be/index.php?a=nl&b=home)

有时没关系，它显示它应该是。![应该是](../Images/a2aa2e0d8c8a6165d4b52e331fbcdde0.png) 但是在刷新（或两次）之后，您会看到它显示的完全错误。![在此处输入图像描述](../Images/fe519a1ad6ad1612eaaa318a5fe616af.png)

在 safari 和 firefox 中，它的工作原理应该是这样。有没有人有修复或线索为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:36:31.247

我在 $(document).ready 函数中调用了砌体函数。所以在一些图像加载之前。我将其更改为 $(window).load，然后它就可以正常工作了。[更多信息在这里](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)。

# python - Satchless 应用程序的问题

> ID：13155567
> 
> 赞同：1
> 
> 时间：2012-10-31T10:10:47.350
> 
> 标签：python, django, django-urls, satchless

我在我的本地服务器中使用**了 Satchless 应用程序。**它安装在 python 路径。[后来我在我的主目录中创建了我的项目并按照本文档](https://bitbucket.org/coocoo/satchless/src/fdf00820b724/doc/intro/installation.rst)中的描述修改了 settings.py 文件

但是，当我运行我的服务器并转到 localserver *localhost:8000*时，它给了我错误**cannot import name cart_app** 我认为它并没有忘记任何应用程序（购物车、产品或我在我的文档中提到的任何东西）。

我的 url.py 文件与我在上面提到的文档中指定的相似。

所以任何使用过satchless应用程序的人都可以告诉我我错在哪里

任何建议将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T23:16:58.863

尝试`runserver --traceback`，有时错误来自其他地方。

# python - 以十六进制字符串重新排序字节顺序（python）

> ID：13155570
> 
> 赞同：10
> 
> 时间：2012-10-31T10:10:52.633
> 
> 标签：python, string, hex, swap, python-2.x

我想在 python 中构建一个小型格式化程序，将嵌入在十六进制字符串行中的数值返回给我。

它是我的格式化程序的核心部分，格式化超过 100 行/秒（每行约 100 个字符）应该相当快。

下面的代码应该给出一个我目前被阻止的例子。

'data_string_in_orig' 显示给定的输入格式。它必须为每个字进行字节交换。需要从 'data_string_in_orig' 到 'data_string_in_swapped' 的交换。最后我需要如图所示的结构访问。预期结果在评论中。

在此先感谢 Wolfgang R

```
#!/usr/bin/python

import binascii
import struct

## 'uint32 double'
data_string_in_orig    = 'b62e000052e366667a66408d'
data_string_in_swapped = '2eb60000e3526666667a8d40'
print data_string_in_orig

packed_data = binascii.unhexlify(data_string_in_swapped)
s = struct.Struct('<Id')
unpacked_data = s.unpack_from(packed_data, 0)  
print 'Unpacked Values:', unpacked_data

## Unpacked Values: (46638, 943.29999999943209)

exit(0) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-31T10:25:32.457

`array.arrays`有一个[字节交换方法](http://docs.python.org/2/library/array.html#array.array.byteswap)：

```
import binascii
import struct
import array
x = binascii.unhexlify('b62e000052e366667a66408d')
y = array.array('h', x)  
y.byteswap()
s = struct.Struct('<Id')
print(s.unpack_from(y))

# (46638, 943.2999999994321) 
```

之所以选择`h`in`array.array('h', x)`是因为它告诉`array.array`我们将数据 in`x`视为一个 2 字节短数组。重要的是每个项目都被视为 2 字节长。`H`，表示 2 字节无符号短，同样有效。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-31T10:43:51.380

这应该完全符合 unutbu 的版本，但对于某些人来说可能更容易遵循......

```
from binascii import unhexlify
from struct import pack, unpack
orig = unhexlify('b62e000052e366667a66408d')
swapped = pack('<6h', *unpack('>6h', orig))
print unpack('<Id', swapped)

# (46638, 943.2999999994321) 
```

基本上，解压 6 个 short-endian，重新打包为 6 个 short-endian。

同样，与 unutbu 的代码相同，您应该使用他的。

**编辑**刚刚意识到我可以为此使用我最喜欢的 Python 习语......也不要这样做：

```
orig = 'b62e000052e366667a66408d'
swap =''.join(sum([(c,d,a,b) for a,b,c,d in zip(*[iter(orig)]*4)], ()))
# '2eb60000e3526666667a8d40' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-20T12:55:09.453

从 'data_string_in_orig' 到 'data_string_in_swapped' 的交换也可以在不使用任何导入的情况下通过推导完成：

```
>>> d = 'b62e000052e366667a66408d'
>>> "".join([m[2:4]+m[0:2] for m in [d[i:i+4] for i in range(0,len(d),4)]])
'2eb60000e3526666667a8d40' 
```

理解适用于在表示 16 位字的十六进制字符串中交换字节顺序。为不同的字长修改它是微不足道的。我们也可以制作一个通用的十六进制数字顺序交换功能：

```
def swap_order(d, wsz=4, gsz=2 ):
    return "".join(["".join([m[i:i+gsz] for i in range(wsz-gsz,-gsz,-gsz)]) for m in [d[i:i+wsz] for i in range(0,len(d),wsz)]]) 
```

输入参数是：

d : 输入的十六进制字符串

wsz：以半字节为单位的字长（例如，对于 16 位字 wsz=4，对于 32 位字 wsz=8）

gsz：保持在一起的半字节数（例如，重新排序字节 gsz=2，重新排序 16 位字 gsz = 4）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-04T13:38:18.733

```
import binascii, tkinter, array
from tkinter import *

infile_read = filedialog.askopenfilename()

with open(infile, 'rb') as infile_:
    infile_read = infile_.read()

x = (infile_read)
y = array.array('l', x)
y.byteswap()
swapped = (binascii.hexlify(y)) 
```

这是一个 32 位无符号短交换，我用与“unutbu”的答案非常相似的代码实现了，只是更容易理解。从技术上讲，交换不需要 binascii。只需要 array.byteswap。

# python - 用 django 过滤

> ID：13155571
> 
> 赞同：2
> 
> 时间：2012-10-31T10:10:53.000
> 
> 标签：python, django, filter

在 django 中如何使用函数`objects.filter`中`val_min` `val_max`的计算结果

但没有记录在数据库中？

可能吗 ？

例子 ：

```
liste= Temperature.objects.filter(val_champ__icontains = val_TT, val_max__lte=val_max, val_min__gte=val_min).order_by('name') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:18:56.767

您可能正在寻找[__range](http://docs.djangoproject.com/en/dev/ref/models/querysets/#range)运算符

# c++ - 基于角色的访问控制 C++ 库或示例

> ID：13155578
> 
> 赞同：6
> 
> 时间：2012-10-31T10:11:35.760
> 
> 标签：c++, rbac

我正在编写一个应用程序，我想根据用户角色限制对某些行为/操作的访问。

我在网上搜索了一个实现这一点的 C++ 库——或者至少是关于如何“自己动手”的指南——但无济于事。有人知道这样的图书馆吗？如果不是，我将不胜感激有关如何最好地实现这样的库/框架的一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:15:35.233

角色可以实现为简单的布尔（或二进制）标志。只需在执行某些操作之前检查用户是否设置了标志。

# zend-framework2 - 在 zend 框架 2 中的子查询中计数

> ID：13155582
> 
> 赞同：0
> 
> 时间：2012-10-31T10:11:49.903
> 
> 标签：zend-framework2

我是 Zf2 的新手，所以请建议我应该如何在 Zend 框架 2 中创建以下 sql？

选择 mt1.*, (select count(mt2.parent_id) from md_type as mt2 where mt2.parent_id = mt1.id)) as cnt from md_type as mt1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T17:12:18.470

你可以试试这个：

```
$sub = new Select('md_type');
$sub->columns(array(new Expression('COUNT(mt2.parent_id) as total')))
    ->where(array(
        new \Zend\Db\Sql\Predicate\Expression('mt2.parent_id = mt1.id')
    ))
;

$subquery = new \Zend\Db\Sql\Expression("({$sub->getSqlString()})");

$select = new \Zend\Db\Sql\Select('mt1');
$select->columns(array('*', 'cnt' => $subquery)); 
```

这将产生：

```
SELECT mt1.*, 
    (SELECT COUNT(mt2.parent_id) as total 
     FROM "md_type" 
     WHERE mt2.parent_id = mt1.id
    ) AS cnt 
FROM mt1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T09:34:17.483

请试试这个

```
$sql = new Sql($this->_adapter);
$mainSelect = $sql->select()->from('mt1');
$subQry = $sql->select()
        ->from('md_type')
        ->columns(array('orderCount' => new \Zend\Db\Sql\Expression('COUNT(md_type.parent_id)')))
        ->where('mt2.parent_id = mt1.id');
$mainSelect->columns(
        array(
            'id', 
            'total' => new \Zend\Db\Sql\Expression('?', array($subQry)),
        )
);

$statement = $sql->prepareStatementForSqlObject($mainSelect);
$comments = $statement->execute();
$resultSet = new ResultSet();
$resultSet->initialize($comments);

return $resultSet->toArray(); 
```

参考：[ZF2 - 子查询](https://stackoverflow.com/questions/15742290/subquery-in-zend-framework2/15743270#15743270)

# c# - 每个项目都应该使用单独的强名称密钥 (.snk) 进行签名吗？

> ID：13155586
> 
> 赞同：15
> 
> 时间：2012-10-31T10:12:03.903
> 
> 标签：c#, visual-studio, signing, strongname

在我的 Visual Studio 解决方案中，我有一个网站和 4-5 个引用的类库项目。其中一些还引用了外部第三方程序集。

我被赋予了为这些项目签署程序集的任务。

我的理解是，签名的目的是不是每个人都可以在不提供公钥和版本详细信息的情况下使用我们的程序集，对吧？

我应该使用一个强名称密钥 (.snk) 来签署这些项目的所有程序集，还是应该使用单独的强名称密钥对每个程序集进行签名？

强名称密钥的密码保护的目的是什么？

你会怎么做？

非常感谢，

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-31T10:20:26.100

> 签名的目的是不是每个人都可以在不提供公钥和版本详细信息的情况下使用我们的程序集，对吗？

不。签名验证*您*，发布者。它可以防止其他人制作您的程序集的“假”版本。

> 我应该使用一个强名称密钥 (.snk) 来签署这些项目的所有程序集，还是应该使用单独的强名称密钥对每个程序集进行签名？

关键是您的签名，因此您的所有项目都使用 1。

> 强名称密钥的密码保护的目的是什么？

整个签名过程取决于您是唯一拥有密钥的人。不涉及证书。部分签名和受保护的密钥可以帮助您限制有权访问密钥的人数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-11T02:41:29.780

强命名程序集的目的是能够区分同一程序集的版本，而不是确定它的创建者。

另一方面，对程序集进行数字签名会标识该程序集的构建者。

两种签名的区别在于第一种不需要使用相同的证书，因为它不会用于识别创建者，只是为了区分同一二进制文件的不同版本。
这样，您将能够在同一进程中加载​​同一程序集的两个版本，从而允许您使用同一类的两个版本而不会发生冲突。

另一个签名称为代码签名，它使用专门设计的证书仅用于代码签名，并将具有通常标识构建者的名称的公共证书与二进制文件捆绑在一起，以及将签名验证到证书颁发机构的证书链，该证书可以在使用 Windows 资源管理器的文件属性中可以看到，第一种情况在 Windows 资源管理器中看不到，它可以使用在 Visual Studio 中创建的自签名证书而没有任何问题。

实际上，数字签名代码适用于所有类型的代码，它不一定是 .NET 程序集，它可以是普通的 Win32 API DLL 或 EXE。

# functional-programming - D 中的容器语义和功能风格

> ID：13155587
> 
> 赞同：3
> 
> 时间：2012-10-31T10:12:14.373
> 
> 标签：functional-programming, pass-by-reference, d, pass-by-value, move-semantics

D 中的容器是否默认具有值或引用语义？如果它们具有引用语义并不会从根本上阻碍 D 中函数式编程风格的使用（与 C++11 的移动语义相比），例如以下（学术）示例：

```
auto Y = reverse(sort(X)); 
```

`X`容器在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:34:39.193

Whether containers have value semantics or reference semantics depends entirely on the container. The only built-in containers are dynamic arrays, static arrays, and associative arrays. Static arrays have strict value semantics, because they sit on the stack. Associative arrays have strict reference semantics. And dynamic arrays mostly have reference semantics. They're elements don't get copied, but they do, so they end up with semantics which are a bit particular. I'd advise reading [this article](http://dlang.org/d-array-article.html) on D arrays for more details.

As for containers which are official but not built-in, the containers in std.container all have reference semantics, and in general, that's how containers should be, because it's highly inefficient to do otherwise. But since anyone can implement their own containers, anyone can create containers which are value types if they want to.

However, like C++, D does not take the route of having algorithms operate on containers, so as far as algorithms go, whether containers have reference or value semantics is pretty much irrelevant. In C++, algorithms operate on iterators, so if you wanted to sort a container, you'd do something like `sort(container.begin(), container.end())`. In D, they operate on ranges, so you'd do `sort(container[])`. In neither language would you actually sort a container directly. Whether containers themselves have value or references semantics is therefore irrelevant to your typical algorithm.

However, D does better at functional programming with algorithms than C++ does, because ranges are better suited for it. Iterators have to be passed around in pairs, which doesn't work very well for chaining functions. Ranges, on the other hand, chain quite well, and Phobos takes advantage of this. It's one of its primary design principles that most of its functions operate on ranges to allow you to do in code what you typically end up doing on the unix command line with pipes, where you have a lot of generic tools/functions which generate output which you can pipe/pass to other tools/functions to operate on, allowing you to chain independent operations to do something specific to your needs rather than relying on someone to have written a program/function which did exactly what you want directly. Walter Bright discussed it recently in [this article](http://www.drdobbs.com/architecture-and-design/component-programming-in-d/240008321).

So, in D, it's easy to do something like:

```
auto stuff = sort(array(take(map!"a % 1000"(rndGen()), 100))); 
```

or if you prefer UFCS (Universal Function Call Syntax):

```
auto stuff = rndGen().map!"a % 1000"().take(100).array().sort(); 
```

In either case, it generates a sorted list of 100 random numbers between 0 and 1000, and the code is in a functional style, which C++ would have a much harder time doing, and libraries which operate on containers rather than iterators or ranges would have an even harder time doing.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T16:06:06.087

## 内置容器

D 中唯一的内置容器是切片（也称为数组/动态数组）和静态数组。后者具有值语义（与 C 和 C++ 不同） - 整个数组在传递时被（浅）复制。

至于切片，它们是具有间接性的值类型，因此您可以说它们同时具有值​​和引用语义。

想象`T[]`成`struct`这样：

```
struct Slice(T)
{
    size_t length;
    T* ptr;
} 
```

where`ptr`是指向切片第一个元素的指针，并且`length`是切片边界内的元素数。您可以访问切片的`.ptr`and`.length`字段，但虽然数据结构与上述相同，但它实际上是内置编译器，因此未在任何地方定义（名称`Slice`仅用于说明目的）。

知道了这一点，您可以看到复制切片（分配给另一个变量，传递给函数等）只是复制一个长度（无间接 - 值语义）和一个指针（具有间接 - 引用语义）。

换句话说，切片是数组的*视图*（位于内存中的任何位置），并且同一个数组可以有多个视图。

## 算法

`sort`并`reverse`从`std.algorithm`就地工作来满足尽可能多的用户。如果用户想要将结果放入切片的 GC 分配副本中并保持原始不变，则可以轻松完成 ( `X.dup`)。如果用户想将结果放在自定义分配的缓冲区中，也可以这样做。最后，如果用户想要就地排序，这是一个选项。无论如何，任何额外的开销都是明确的。

然而，重要的是要注意标准库中的大多数算法不需要变异，而是返回延迟评估的范围结果，这是函数式编程的特征。

## 用户定义的容器

当涉及到用户定义的容器时，它们可以有任何他们想要的语义——在 D 中任何配置都是可能的。

中的容器是具有复制方法的`std.container`引用类型，因此稍微模拟了切片。`.dup`

# php - 如何在 Phalcon 中设置 volt 编译的目录路径？

> ID：13155589
> 
> 赞同：2
> 
> 时间：2012-10-31T10:12:23.193
> 
> 标签：php, phalcon

我有以下代码：

```
 $di->set('view', function() {

    $view = new \Phalcon\Mvc\View();

    $view->setViewsDir('../app/views/');

    $view->registerEngines(array(
        ".phtml" => 'Phalcon\Mvc\View\Engine\Volt'
    ));

    return $view;
}); 
```

但是现在编译的 PHP 存在于 views 目录中。如何为编译目录设置不同的路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T13:25:46.620

您可以按如下方式设置新`compiledPath`选项和其他选项：

假设您的配置中有这些变量：

```
[views]
path      = '/home/user/www/app/views/'

[volt]
path      = '/home/user/www/app/volt/'
extension = '.compiled'
separator = '%%'
stat      = 1 
```

然后，您可以根据手册执行此操作：

```
// Assuming that this is in a class and `_di` is your DI container 
$config = $this->_di->get('config');
$di     = $this->_di;

/**
 * Setup the volt service
 */
$this->_di->set(
    'volt',
    function($view, $di) use($config)
    {
        $volt = new Volt($view, $di);
        $volt->setOptions(
            array(
                'compiledPath'      => $config->app->volt->path,
                'compiledExtension' => $config->app->volt->extension,
                'compiledSeparator' => $config->app->volt->separator,
                'stat'              => (bool) $config->app->volt->stat,
            )
        );
        return $volt;
    }
);

/**
 * Setup the view service
 */
$this->_di->set(
    'view',
    function() use ($config, $di)
    {
        $view = new \Phalcon\Mvc\View();
        $view->setViewsDir(ROOT_PATH . $config->app->path->views);
        $view->registerEngines(array('.volt' => 'volt'));
        return $view;
    }
); 
```

或者您可以按照下面的实现（首选上面的一个）

```
$di->set('view', function() use ($config, $di) {

    $view = new \Phalcon\Mvc\View();

    $view->setViewsDir($config->views->path);

    $volt = new \Phalcon\Mvc\View\Engine\Volt($view, $di);

    $volt->setOptions(
        array(
            'compiledPath'      => $config->volt->path,
            'compiledExtension' => $config->volt->extension,
            'compiledSeparator' => $config->volt->separator,
            'stat'              => (bool) $config->volt->stat,
        )
    );

    /**
     * Register Volt
     */
    $view->registerEngines(array('.volt' => $volt));

    return $view;
}); 
```

确保你的`$config->volt->path`是可写的。您不需要完全遵循上述方法 - 您始终可以用应用程序需要的任何内容替换配置变量。

# iphone - 这是在相机模式而不是视频模式下打开 Tourch 灯的任何方法吗？

> ID：13155598
> 
> 赞同：-2
> 
> 时间：2012-10-31T10:12:57.123
> 
> 标签：iphone, ios

> **可能重复：**
> [在 iPhone 4 上打开手电筒/闪光灯](https://stackoverflow.com/questions/3190034/turn-on-torch-flash-on-iphone-4)

我让相机的应用程序打开它在闪光灯下打开..不在视频模式下打开相机？

那么，如果ios提供了任何方法来在加载方法中打开闪光灯？

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:20:51.630

**在 iPhone上[打开手电筒/闪光灯的](https://stackoverflow.com/questions/3190034/turn-on-torch-flash-on-iphone-4/7964777#7964777)**副本****

 **感谢@progrmr 通知。**

# php - php中的数组分组或按分组计数数组

> ID：13155604
> 
> 赞同：0
> 
> 时间：2012-10-31T10:13:12.933
> 
> 标签：php

我有一个像这样的数组：

```
Array
(
    [0] => Array
        (
            [0] => a
            [1] => a
            [2] => b
            [3] => c
            [4] => b
            [5] => c
            [6] => b
        )
 ) 
```

所以我必须用计数总数来按组制作数组。数组之类的（输出）：

```
 a = 2
    b = 3
    c = 2 
```

如果数组的使用次数是计数的`a`两倍。`a``2`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T10:14:59.433

用这个 ：

```
array_count_values(array) 
```

前任：

```
<?php
$a=array("Cat","Dog","Horse","Dog");
print_r(array_count_values($a));
?> 
```

输出：

```
Array ( [Cat] => 1 [Dog] => 2 [Horse] => 1 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:25:32.243

复制粘贴代码，

```
<?php
$rt=Array(Array('a','a','b','b','c','c'));
$out=array_count_values( $rt[0]);
print_r($out) ;
?> 
```

输出

```
Array
(
 [a] => 2
 [b] => 2
 [c] => 2
) 
```

# r - 返回r数据框中特定行的上下行

> ID：13155609
> 
> 赞同：7
> 
> 时间：2012-10-31T10:13:26.527
> 
> 标签：r

考虑任何数据框

```
 col1   col2    col3   col4
row.name11    A     23      x       y
row.name12    A     29      x       y
row.name13    B     17      x       y
row.name14    A     77      x       y 
```

我有一个要从此数据框返回的行名列表。假设我在列表中有 row.name12 和 row.name13。我可以轻松地从数据框中返回这些行。但我也想返回上面的 4 行和下面的 4 行。这意味着我想从 row.name8 返回到 row.name17。我认为它类似于`grep -A -B`shell。

可能的解决方案 - 有没有办法按行名返回行号？因为如果我有行号，我可以轻松地减去 4 并在行号中添加 4 并返回行。

注意：这里的行名只是示例。行名可以是红色、蓝色、黑色等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-31T10:59:21.473

试试看：

```
extract.with.context <- function(x, rows, after = 0, before = 0) {

  match.idx  <- which(rownames(x) %in% rows)
  span       <- seq(from = -before, to = after)
  extend.idx <- c(outer(match.idx, span, `+`))
  extend.idx <- Filter(function(i) i > 0 & i <= nrow(x), extend.idx)
  extend.idx <- sort(unique(extend.idx))

  return(x[extend.idx, , drop = FALSE])
}

dat <- data.frame(x = 1:26, row.names = letters)
extract.with.context(dat, c("a", "b", "j", "y"), after = 3, before = 1)
#    x
# a  1
# b  2
# c  3
# d  4
# e  5
# i  9
# j 10
# k 11
# l 12
# m 13
# x 24
# y 25
# z 26 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-31T10:17:06.897

也许`which()`和的组合`%in%`可以帮助您：

```
dat[which(rownames(dat) %in% c("row.name13")) + c(-1, 1), ]
#            col1 col2 col3 col4
# row.name12    A   29    x    y
# row.name14    A   77    x    y 
```

在上面，我们试图识别“dat”中的哪些行名是“row.name13”（使用`which()`），并`+ c(-1, 1)`告诉 R 返回之前的行和之后的行。如果您想包含该行，您可以执行类似`+ c(-1:1)`.

要获取行的范围，请将逗号切换为冒号：

```
dat[which(rownames(dat) %in% c("row.name13")) + c(-1:1), ]
#            col1 col2 col3 col4
# row.name12    A   29    x    y
# row.name13    B   17    x    y
# row.name14    A   77    x    y 
```

* * *

### 更新

匹配一个列表有点棘手，但不用考虑太多，这里有一种可能性：

```
myRows <- c("row.name12", "row.name13")
rowRanges <- lapply(which(rownames(dat) %in% myRows), function(x) x + c(-1:1))
# [[1]]
# [1] 1 2 3
# 
# [[2]]
# [1] 2 3 4
#
lapply(rowRanges, function(x) dat[x, ])
# [[1]]
#            col1 col2 col3 col4
# row.name11    A   23    x    y
# row.name12    A   29    x    y
# row.name13    B   17    x    y
# 
# [[2]]
#            col1 col2 col3 col4
# row.name12    A   29    x    y
# row.name13    B   17    x    y
# row.name14    A   77    x    y 
```

这输出 a `list`of `data.frame`s 可能很方便，因为您可能有重复的行（如本例中所示）。

### 更新 2：使用`grep`是否更合适

这是您问题的一种变体，使用`which()`...`%in%`方法解决起来不太方便。

```
set.seed(1)
dat1 <- data.frame(ID = 1:25, V1 = sample(100, 25, replace = TRUE))
rownames(dat1) <- paste("rowname", sample(apply(combn(LETTERS[1:4], 2), 
                                               2, paste, collapse = ""), 
                                         25, replace = TRUE), 
                       sprintf("%02d", 1:25), sep = ".")
head(dat1)
#               ID V1
# rowname.AD.01  1 27
# rowname.AB.02  2 38
# rowname.AD.03  3 58
# rowname.CD.04  4 91
# rowname.AD.05  5 21
# rowname.AD.06  6 90 
```

现在，假设您想用`AB`and标识行`AC`，但您没有数字后缀的列表。

这是一个可以在这种情况下使用的小功能。它从@Spacedman 借了一点，以确保返回的行在数据范围内（根据@flodel 的建议）。

```
getMyRows <- function(data, matches, range) {
  rowMatches = lapply(unlist(lapply(matches, function(x)
    grep(x, rownames(data)))), function(y) y + range)
  rowMatches = lapply(rowMatches, function(x) x[x > 0 & x <= nrow(data)])
  lapply(rowMatches, function(x) data[x, ])
} 
```

您可以按如下方式使用它（但我不会在这里打印结果）。首先，指定数据集，然后是要匹配的模式，然后是范围（在本例中，前三行和后四行）。

```
getMyRows(dat1, c("AB", "AC"), -3:4) 
```

将其应用于前面的匹配`row.name12`and示例`row.name13`，您可以按如下方式使用它：`getMyRows(dat, c(12, 13), -1:1)`.

您还可以修改该函数以使其更通用（例如，指定与列名而不是行名匹配）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-31T11:16:37.120

创建一些示例数据：

```
> dat=data.frame(col1=letters,col2=sample(26),col3=sample(letters))
> dat
   col1 col2 col3
1     a   26    x
2     b   12    i
3     c   15    v
... 
```

设置我们的目标向量（注意我选择了边缘情况和重叠情况），并找到匹配的行：

```
> target=c("a","e","g","s")
> match = which(dat$col1 %in% target) 
```

创建从 -2 到 +2 的匹配序列（根据您的需要进行调整）并合并：

```
> getThese = unique(as.vector(mapply(seq,match-2,match+2)))
> getThese
 [1] -1  0  1  2  3  4  5  6  7  8  9 17 18 19 20 21 
```

修复边缘情况：

```
> getThese = getThese[getThese > 0 & getThese <= nrow(dat)]
> dat[getThese,]
   col1 col2 col3
1     a   26    x
2     b   12    i
3     c   15    v
4     d   22    d
5     e    2    j
6     f    9    l
7     g    1    w
8     h   21    n
9     i   17    p
17    q   18    a
18    r   10    m
19    s   24    o
20    t   13    e
21    u    3    k
> 
```

请记住，我们的目标是 a、e、g 和 s。你现在已经得到了这些加上上面的两行和下面的两行，没有重复。

如果您使用的是行名，只需从中创建“匹配”。我正在使用一个列。

如果这是我的问题，我会使用 testthat 包编写更多测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-18T07:01:03.857

另一种选择是使用`filter`. 万一`stats::filter`被掩盖，例如`dplyr::filter`您必须使用`stats::filter`.

```
dat <- data.frame(x = seq_along(letters), row.names = letters)

i <- rownames(dat) %in% c("a", "b", "j", "y") #Get the matches

nAfter <- 3
nBefore <- 1

fi <- seq(-nBefore, nAfter)
n <- max(abs(x))
fi <- seq(-n, n) %in% fi

dat[head(tail(filter(c(rep(FALSE, n), i, rep(FALSE, n)), fi), -n), -n) > 0,, drop = FALSE]
#   x
#a  1
#b  2
#c  3
#d  4
#e  5
#i  9
#j 10
#k 11
#l 12
#m 13
#x 24
#y 25
#z 26 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T10:19:52.273

我将简单地进行如下操作：

```
dat[(grep("row.name12",row.names(dat))-4):(grep("row.name13",row.names(dat))+4),] 
```

`grep("row.name12",row.names(dat))`给你`"row.name12"`作为名字的行号，所以

```
(grep("row.name12",row.names(dat))-4):(grep("row.name13",row.names(dat))+4) 
```

为您提供一系列行号，范围从 named 行之前的第`"row.name12"`4 行到 named 行之后的第 4 行`"row.name13"`。

# objective-c - 如何消除Objective-C @try @catch 这样的块？

> ID：13155612
> 
> 赞同：4
> 
> 时间：2012-10-31T10:13:49.933
> 
> 标签：objective-c

我是来自 Python 世界的开发人员，习惯于使用异常。我在很多地方发现在这里使用异常并不是那么明智，并在需要时尽力转换为 NSErrors。但后来我遇到了这个：

```
NSMutableArray *results;
for (NSDictionary *dict in dicts)
{
    // Memory management code omitted
    SomeModel *model = [[SomeModel alloc] init];
    model.attr1 = [[dict objectForKey:@"key1"] integerValue];
    model.attr2 = [[dict objectForKey:@"key2"] integerValue];
    model.attr3 = [[dict objectForKey:@"key3"] integerValue];
    model.attr4 = [[dict objectForKey:@"key4"] integerValue];

    [results addObject:model];
} 
```

dict 中的某些对象包含 NSNull，这将导致“无法识别的选择器”异常。在那种情况下，我想完全放弃那个数据。我的第一直觉是将 for 块的全部内容包装到 @try-@catch 块中：

```
NSMutableArray *results;
for (NSDictionary *dict in dicts)
{
    @try
    {
        SomeModel *model = [[SomeModel alloc] init];
        model.attr1 = [[dict objectForKey:@"key1"] integerValue];
        model.attr2 = [[dict objectForKey:@"key2"] integerValue];
        model.attr3 = [[dict objectForKey:@"key3"] integerValue];
        model.attr4 = [[dict objectForKey:@"key4"] integerValue];

        [results addObject:model];
    }
    @catch(NSException *exception)
    {
        // Do something
    }
} 
```

但这是一个好方法吗？如果不对每个变量进行重复检查，我就无法提出解决方案，这真的很难看 IMO。希望有我没有想到的替代方案。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:18:56.550

正确的 Objective-C 方法是：

```
for (NSDictionary *dict in dicts)
{
    if (! [dict isKindOfClass:[NSDictionary class]])
        continue;
    // ...
} 
```

在发送消息之前测试接收者是否可以响应消息是 Objective-C 中的典型模式。

另外，请注意，Objective-C 中的异常始终是程序员错误，不用于正常的执行流程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:03:12.197

许多人使用 NSDictionary 上的一个类别来处理这些情况：

```
- (id)safeObjectForKey:(id)aKey
{
  id obj = [self objectForKey:aKey];
  if ([obj isKindOfClass:[NSNull class]])
  {
    return nil;
  }

  return obj;
} 
```

您仍然需要确保您的 dict 是一个实际的字典实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:52:15.380

最后我决定使用 KVC 来解决这个问题。像这样的东西：

```
- (id)initWithPropertyDictionary:(NSDictionary *)dict
                     lookUpTable:(NSDictionary *)keyToProperty
{
    self = [self init];
    for (NSString *key in dict)
    {
        NSString *propertyName;
        if ([keyToProperty objectForKey:key])
            propertyName = [keyToProperty objectForKey:key];
        else
            propertyName = key;
        if ([[dict objectForKey:key] isKindOfClass:[NSNull class]])
        {
            [self release];
            return nil;
        }
        else
        {
            [self setValue:[dict objectForKey:key] forKey:propertyName];
        }
    }
} 
```

这个解决方案的挫折是我必须将 NSNumber 用于我的属性，但对于 JSON 数据，浮点数和整数之间确实没有区别，所以这很好。

如果你真的想要原始类型，你可以将此方法与将这些 NSNumber 转换为适当类型的自定义设置器结合使用。

有了这个，您需要做的就是在将对象添加到数组之前检查 nil 。除了模型类，到处都干净得多。

感谢 jaydee3 启发我专注于改变模型类。

# facebook - 从 Facebook 获取用户 access_token

> ID：13155619
> 
> 赞同：1
> 
> 时间：2012-10-31T10:14:10.463
> 
> 标签：facebook, facebook-c#-sdk

我正在构建一个应用程序，允许用户从应用程序向他们的 Facebook 发布消息。问题是我不知道如何获取用户 access_token 以获得 publish_stream 权限。

这是我到目前为止所得到的：

```
 var fb = new FacebookClient();
        dynamic result = fb.GetLoginUrl(new
        {
            client_id = AppID,
            client_secret = AppSecret,
            grant_type = "client_credentials",
            scope = "publish_stream",
            state = "http://localhost:17578/Facebook.aspx",
            redirect_uri = "http://localhost:17578/Facebook.aspx"
        }); 
```

这工作正常，它在查询字符串中返回一个“代码”。但是，我不确定如何处理该代码。“旧的” Facebook C# sdk 包含`FacebookOAuthClient`具有该`ExchangeCodeForAccessToken()`方法的类，但我不知道在新 SDK 中这个静态方法的替换是什么。

所以真正的问题是：如何将返回的代码交换为 access_token？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T21:55:03.850

获取代码查询字符串参数后，您必须调用 Facebook Graph API 以获取访问令牌。

[https://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)

```
FacebookClient client = new FacebookClient();
dynamic result = client.Get("oauth/access_token", new { client_id = Settings.Social_Facebook_App_Id, client_secret = Settings.Social_Facebook_Secret_Key, code = Request.QueryString["code"], redirect_uri = Settings.Social_Facebook_Login_Redirect_URI });
if (result.error == null)
{
    Session["AccessToken"] = client.AccessToken = result.access_token;
    dynamic user = client.Get("me", new { fields = "name,username,email" });
    string userName = user.username;

    mu = Membership.GetUser(userName);
    if (mu == null)  // Register
    {
        RegisterModel rm = new RegisterModel();
        rm.Email = user.email;
        rm.UserName = userName;
        return View("Register", rm);
    }
    else
    {
        FormsAuthentication.SetAuthCookie(userName, true);
        return RedirectToAction(MVC.Home.Index());
    }
} 
```

# php - CRON 作业未执行并返回错误

> ID：13155621
> 
> 赞同：0
> 
> 时间：2012-10-31T10:14:13.473
> 
> 标签：php, apache, cron

我有以下在 cron 中运行的代码，

```
<?php
    $_SERVER['DOCUMENT_ROOT'] = dirname(__FILE__);
    $directory = $_SERVER["DOCUMENT_ROOT"]."/cron/";
    $file = "register_warranty_". date("dMY") .".csv";
    $filepath = $directory.$file;

    if(!file_exists($filepath)) 
    {
        $fp = fopen($filepath, "w+");
        fwrite($fp, "Title, Initials, Surname, HomeTel, Mobile, HouseNumber, Address, Address2, Town, Postcode, NewlyBuiltHome, InstallationDate, Houseowner, InstallersName, InstallersEmail, InstallersMobile, InstallersGasSafeNumber, BusinessName, BusinessAddress, BusinessAddress2, BusinessTown, BusinessRegion, BusinessPostcode, BusinessGasSafeNumber, BusinessEmail, SuppliersName, Model, serial, MaintenanceContract, ExpiryDate, Donotwishtobecontactedviapost, Donotwishtobecontactedviatelephone, Donotwishtobecontactedviaemail, Donotwishtobecontactedviasms\n");
        fclose($fp);
    } 
```

?>

在运行 cron 时收到的 Cron 电子邮件中 ​​- 我收到以下错误，

> 第 1 行：？php：没有这样的文件或目录
> 第 3 行：意外标记附近的语法错误$_SERVER['DOCUMENT_ROOT'] = dirname( **FILE** );'`('
> line 3:`

 **我是不是做错了什么，我对 Cron 工作不是最有经验的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:23:00.837

你可以做两件事之一：

1.  从 as 执行您的 PHP 脚本`crontab`：

    `/usr/bin/php -q script.php`

2.  在 PHP 脚本的开头添加[shebang行：](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)

    `#!/usr/bin/php -q`

    并为您的脚本授予执行权限：

    `chmod +x script.php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:16:43.023

我想你忘了在 cronjob 中的文件名之前添加 php 命令。

`php myscript.php`**

# expressionengine - 使用 MSM 和配置引导程序将基于文件的模板同步到数据库时遇到问题

> ID：13155622
> 
> 赞同：2
> 
> 时间：2012-10-31T10:14:14.303
> 
> 标签：expressionengine

当客户宣布他们想要另一个使用 MSM 模块的附加站点时，我已经开始了我的典型 EE 构建（使用引导配置）（le sigh）。

所以添加了 MSM 模块，我注释掉了`$config['site_url']`and`$config['cp_url']`并将它们设置在 index.php 中，而不是使用`$assign_to_config`.

那时我发现了无法识别 MSM 配置文件设置的[错误](http://expressionengine.com/bug_tracker/bug/18262)，这很痛苦，但我可以解决它。但是，我注意到，当我创建辅助站点时，它无法识别我的插件自定义位置，因此我不得不将它添加到 index.php 以及`$assign_to_config['third_party_path'] = "../assets/third_party/";`.

然后我发现当我创建或修改模板文件时，它不会自动同步，所以我每次都需要手动执行，这是一个真正的 PITA。

为什么我的模板不会同步到数据库？这与 MSM 配置错误有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T16:14:35.080

虽然我还没有尝试引导第三方路径，但我肯定能够引导 MSM 站点的模板路径......你使用什么引导方法？

您的网站是否位于子域或子文件夹中？我只有使用子文件夹的经验，所以也许这会有所作为（尽管它不应该）。

您能否更详细地介绍正在发生的事情？您的第一个站点 (site_id = 1) 模板从文件系统编辑中自动同步，但您的第二个站点没有？然而，如果你去 CP > Design > Synchronize Templates，那行得通吗？

当涉及到引导时，MSM 设置的 $assign_to_config 部分绝对是一个弱点......我想知道我们是否需要为 MSM+CP 环境创建一个额外的引导程序，它会查看 cp cookie ($_COOKIE['exp_cp_last_site_id' ])，并以此为基础设置值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:33:06.547

如果您让我们知道您正在使用哪个引导程序，这可能会有所帮助。例如，如果您查看[此引导程序](https://gist.github.com/3862276)，`site_url`并且`cp_url`使用`HTTP_HOST`服务器变量进行设置，那么这根本不会与您的 MSM 安装（和多个域）发生冲突。

也许您可以尝试使用该 boostrap 文件，看看它是否解决了您的模板同步问题？

最后，如果您打算使用 EE 模板管理器，您实际上并不需要将模板存储为文件。相反，如果您想将模板保存为文件，使用 Sublime Text 或其他编辑器编辑它们可能要容易得多，而不是笨重的内置编辑器（这实际上只对小/简单的更改有用）。

# oop - MVC / 观察者和不可变数据结构

> ID：13155626
> 
> 赞同：3
> 
> 时间：2012-10-31T10:14:22.027
> 
> 标签：oop, model-view-controller, design-patterns, functional-programming, immutability

您能否在两种情况下解释 MVC / Observer 技术的类似物：

1.  不可变对象（OOP 风格）
2.  不可变数据（函数式）

例如，让我们考虑以下简单的 GUI 示例（您可以在此处实时试用[http://tinkerbin.com/0XDHRXIl](http://tinkerbin.com/0XDHRXIl)单击“运行”按钮启动它并等待 2 秒以显示文本）

它是用 JavaScript 构建的，因为它很容易玩，而且 MVC / Observer 对它来说非常自然

```
// Model containing the data.
var Post = Backbone.Model.extend({}) 

var PostView = Backbone.View.extend({
  initialize: function() {
    // Registering view rendering method as
    // an observer on the model.
    this.model.on('all', this.render.bind(this))
  },  
  // Every time state of model changes 
  // this method will be called.
  render: function() {
    // Printing value of model.text attriubute. 
    this.$el.html(this.model.get('text'))
    return this
  }
})

// Now, any time the model is updated the view will be also 
// automatically updated.
post.set({text: "hello, it's me"}) 
```

但是我不太明白如何对不可变 OOP 和功能样式做同样的事情，有什么方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:32:10.943

在经典 MVC 和 OOP 技术的情况下，每个对象都有隐式标识符 - 它的引用。观察者依靠这个引用/标识符来分派消息到正确的对象。

在不可变世界中，引用不再标识对象（不同版本的对象可能有多个引用），而在功能世界中根本没有对象。因此，我们需要显式地提供对象身份。

Immutable/Functional 世界中的 Observer 类似物是具有明确提供的对象 ID 的 Pub/Sub。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T11:52:55.157

关于不可变的 OOP 样式，我建议应用以下修改：每次发生状态更改时，您都必须创建一个新的模型状态，而不是“更改模型状态”。我不会在视图中的观察函数中提取状态，而是将不可变状态作为参数传递给观察函数（这里：`render`函数）。

作为观察者设计模式更实用的方法的灵感，您可能想看看反应式函数式编程。[特别是，我会推荐关于Deprecating the Observer Pattern](https://infoscience.epfl.ch/record/148043/files/DeprecatingObserversTR2010.pdf)的颇有争议的论文。

# java - 我们可以在线程进入同步块后更改锁吗？

> ID：13155629
> 
> 赞同：2
> 
> 时间：2012-10-31T10:14:28.670
> 
> 标签：java, multithreading

我问这个问题只是出于好奇，我知道这样做很愚蠢。

```
public void doSomething() 
{
      synchronized(object_A){
        count++;
        average = count/total;
      }
} 
```

现在假设我有 2 个线程同时运行（调用函数 doSomething()），而第一个线程已经进入块，假设在“count++”行，第二个线程被阻塞并等待锁。

现在我尝试做`object_A = new LockObject()`（在另一个线程中）。现在线程 1 和线程 2 会发生什么？

线程 2 会进入块吗？既然已经执行了语句“synchronized(object_A)”，那么换锁是不是太晚了？

线程 1 在同步块中是否会更改锁（假设线程 1 仍在块中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:30:24.563

就像 ignis 说的，但是线程 2 会在线程 1 完成后看到新的引用，因为它必须刷新所有变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:22:28.783

唯一的问题是数据完整性。线程将在不同的锁上同步，并且受锁保护的数据将具有错误的值。锁在实例初始值设定项中作为私有 final 字段或在类的构造函数中创建。

# java - 有没有办法从 android 触摸事件中获取有关父 UI 元素的信息？

> ID：13155632
> 
> 赞同：1
> 
> 时间：2012-10-31T10:14:32.800
> 
> 标签：java, android, android-layout

是否有一个库可以与我的应用程序集成，它可以跟踪我的应用程序中的所有触摸事件，并告诉我哪个 UI 元素被哪个触摸事件触摸。
如果没有，请查看有关触摸事件的 android 文档，它仅提供一个运动事件，该事件提供有关触摸的 x、y 坐标的信息。有没有办法获取触摸事件触摸的父 UI 元素？

# python - 将刚刚安装的包导入现有的 python 会话

> ID：13155633
> 
> 赞同：3
> 
> 时间：2012-10-31T10:14:37.343
> 
> 标签：python, import, easy-install

是否可以让 python 会话知道自会话启动以来已`easy_install`编辑的新库？

我有一个运行了几天的控制台，最后得出了（大）结果。`nltk`我在检查结果时意识到我需要另一个包`import`（问题是，我似乎无法保存未处理的结果（`pickle`并`marshal`给我关于字符串长度的错误），我真的不想重新运行为期一周的过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T17:27:04.617

[您可以尝试使用imp](http://docs.python.org/2/library/imp.html)模块加载新包：

```
from imp import *
file, pathname, description = find_module('nltk')
nltk = load_module('nltk', file, pathname, ('.py', 'U', 1)) 
```

如果 python 找不到新安装的模块，您可能需要为 find_module 指定路径参数：

```
file, pathname, description = find_module('nltk', '/path/to/nltk') 
```

用安装 nltk 的路径替换最后一个参数。

# css - 在 Internet Explorer 9 中使用 SVG 背景图像进行 CSS 2D 转换

> ID：13155639
> 
> 赞同：6
> 
> 时间：2012-10-31T10:14:47.157
> 
> 标签：css, svg, internet-explorer-9, background-image, css-transforms

我只使用一个 SVG 背景图像创建了一个左右导航按钮，并水平翻转它以获得另一个方向。这在所有支持[CSS 2D 转换](http://caniuse.com/#feat=transforms2d)的浏览器中都可以正常工作，除了 Internet Explorer 9。基本上 CSS 看起来像这样：

```
div.nav-left, div.nav-right {
    background-image: url('TriangleArrow-Right.svg');
}

div.nav-left {
        -webkit-transform: scaleX(-1);
            -ms-transform: scaleX(-1);
                transform: scaleX(-1);
} 
```

我创建了一个[jsFiddle ，它在](http://jsfiddle.net/hj7Tg/12/)**Internet Explorer 10**、Firefox、Chrome、Safari 等中看起来像这样：

![在 Chrome 22 中渲染](../Images/278a7e7759a703cb26e73047458ed5a3.png)

但实际上在 IE9 中看起来像这样：

![在 Internet Explorer 9 中呈现](../Images/0db84916f9371174c1674838ddffec42.png)

我添加了一个大于号来说明按钮应该指向的方向。实际上您可以看到，IE9 将转换正确地应用于文本，但对 SVG 背景图像却完全相反。

如果我将 SVG 背景图像更改为 PNG，则在 IE9 中一切正常，但请参阅此[jsFiddle](http://jsfiddle.net/hj7Tg/28/)。

我无法找到有关此的任何信息。这似乎是一个错误，因为 IE9 应该正确支持 CSS 转换和[SVG 作为 CSS 背景](http://caniuse.com/#feat=svg-css)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:41:08.953

我认为您需要使用[IE 的特殊语法](http://msdn.microsoft.com/en-us/library/ms532918%28v=vs.85%29.aspx)：

```
div.nav-left {
    -webkit-transform: scaleX(-1);
    /*-ms-transform: scaleX(-1);*/
    -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
    transform: scaleX(-1);
    left: -50px;
} 
```

[http://jsfiddle.net/g2y86/1/](http://jsfiddle.net/g2y86/1/)

虽然看起来不是很锋利，也许有更好的方法。

**编辑**

对于翻转，试试这个（注意，`-ms-filter`和`filter`行都适用于 IE）：

```
div.nav-left {
    -webkit-transform: scaleX(-1);
    -ms-filter: fliph;
    filter: fliph;
    transform: scaleX(-1);
    left: -50px;
} 
```

[http://jsfiddle.net/2cPYR/](http://jsfiddle.net/2cPYR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:01:58.633

根据我的尝试，`scaleX`-property 确实不适用于 svg 背景图像上的负数。如果您对尝试转换的 div 应用不同颜色的边框，您可以看到，它实际上已正确转换，但背景图像不适应其容器。

如果你只是想解决眼前的问题，你可以使用`-ms-transform: rotate(180deg);`，svg 似乎知道它应该在这里做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-12T22:10:26.697

我曾经`filter: FlipV;`容纳ie9

```
-webkit-transform: rotate(180deg);
-ms-transform: rotate(180deg);
-moz-transform: rotate(180deg);
-o-transform: rotate(180deg);
transform: rotate(180deg);
filter: FlipV; // flip for ie9 
```

# ios4 - 在滚动视图中启用触摸

> ID：13155644
> 
> 赞同：1
> 
> 时间：2012-10-31T10:15:07.853
> 
> 标签：ios4

首先，我将颜色设置为背景，然后将图像添加到滚动视图。现在我可以缩放图像然后滚动。但我的问题是，我想通过移动光标来擦除图像。这样我的背景颜色就可以看到了。在这里，我正在编写代码以擦除触摸移动中的图像。但是滚动视图的触摸不起作用。

有没有其他方法可以通过移动光标来擦除我的图像。请帮我。提前致谢。

祝你今天过得愉快.....

# java - Hibernate - 如何持久化 HashMap

> ID：13155660
> 
> 赞同：0
> 
> 时间：2012-10-31T10:16:11.720
> 
> 标签：java, hibernate, map, hashmap, persist

搜索Stackoverflow，我看到很多人都有我的问题，但是我看其他帖子找不到解决方案。所以：

我正在尝试保留一个 Hibernate 类，但不使用实体对象。相反，我使用的是地图。

这是我的地图：

```
Map<String, Object> record;
record = new HashMap<String, Object>();

...

record.put("key1", "value");
record.put("key2", "value");
record.put("field1", "value");
record.put("field2", "value");
record.put("field3", "value");
record.put("field4", "value");
record.put("field5", "value");
record.put("field6", value);
record.put("field7", value); 
```

这是 hbm.xml

```
<class entity-name="entity_name" dynamic-update="true">
<composite-id name="Key1Key2" class="classname">
    <key-property name="Key1" column="Key1" type="string"/>
    <key-property name="Key2" column="Key2" type="string"/>
</composite-id>
    <property name="field1" column="field1" type="string"/>
    <property name="field2" column="field2" type="string"/>
    <property name="field3" column="field3" type="string"/>
    <property name="field4" column="field4" type="string"/>
    <property name="field5" column="field5" type="string"/>
    <property name="field6" column="field6" type="double"/>
    <property name="field7" column="field7" type="double"/>
</class> 
```

当我尝试保留记录时：

```
super.session.persist("entity_name", record) 
```

返回此错误：

**org.hibernate.id.IdentifierGenerationException：必须在调用 save() 之前手动分配此类的 id**

谁能帮我？预先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:47:08.563

我解决了改变复合ID属性的问题，如下所示：

```
<composite-id class="CompositeId" mapped="true"> 
```

*（**mapped="true"**是解决方案的关键）*

然后在哈希图中分配键属性值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:12:38.367

简短的回答：你的班级需要是 POJO。

长答案：您需要为复合 ID 创建一个单独的类，例如

```
public final class CompositeId implements Serializable {
  private String first;
  private String second;

  // getters, setters, hashCode, equals
} 
```

您的持久对象将是

```
public class YourClass {
  private CompositeId id;
  private Map map;

  public YourClass() {
    this.map = new HashMap();
  }

  public void setId(CompositeId id) {
    this.id = id;
  }

  public CompositeId getId() {
    return id;
  }

  public void setField1(String field1) {
    this.map.put("field1", field1);
  }  

  public String getField1() {
    return map.get("field1");
  }  
  // and so forth
} 
```

最后，您的 .hbm.xml：

```
<class entity-name="entity_name" dynamic-update="true">
<composite-id name="id" class="CompositeId">
    <key-property name="first" column="Key1" type="string"/>
    <key-property name="second" column="Key2" type="string"/>
</composite-id>
    <property name="field1" column="field1" type="string"/>
    <property name="field2" column="field2" type="string"/>
    <property name="field3" column="field3" type="string"/>
    <property name="field4" column="field4" type="string"/>
    <property name="field5" column="field5" type="string"/>
    <property name="field6" column="field6" type="double"/>
    <property name="field7" column="field7" type="double"/>
</class> 
```

# jquery - 页面在刷新/重新加载时移动？

> ID：13155666
> 
> 赞同：2
> 
> 时间：2012-10-31T10:16:44.287
> 
> 标签：jquery, html, css, joomla2.5

简而言之，我正在开发的这个网站 - [http://learning.realsense.co.uk/](http://learning.realsense.co.uk/)将重点转移到重新加载上。

要进行测试，请转到主页，转到页面底部，点击刷新和 Viola，您将被抛到顶部。

在 IE、FF 中测试过

我收到了一些宝贵的反馈，表明它在 Chrome 上运行良好。多谢你们！

关于其他两个为什么会发生这种情况的任何评论？（他们有点优先:)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:23:40.407

这是因为“幻灯片”区域是在页面加载后由 Javascript 生成的，因此会将页面向下推。

解决方案：使用 CSS 设置幻灯片容器的高度。

# cimg - 带有 CImg 的灰度缓冲区

> ID：13155672
> 
> 赞同：1
> 
> 时间：2012-10-31T10:17:21.447
> 
> 标签：cimg

我的目标是创建一个填充 0-255 灰度颜色的无符号字符缓冲区。缓冲区中的每个单元格为 0-255（无 RGB）。我想从灰度图片中提取一个参数（0-255灰度）。CImg 如何做到这一点？

谢谢，何塞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-01T12:24:52.913

您可以在 CImg 中计算输入 sRGB 图像的亮度，如下所示：

```
CImg<unsigned char> luminance = RGB.get_RGBtoYCbCr().channel(0); 
```

`RGB`RGB 图像的名称在哪里。

# c# - 如何查询智能线程池以获取作业的当前状态？

> ID：13155673
> 
> 赞同：0
> 
> 时间：2012-10-31T10:17:20.353
> 
> 标签：c#, threadpool

目前我在我的 .Net 应用程序中使用来自 AMIB 的智能线程池。我已经创建了作业并将它们排在池中以供执行，如下所示：

```
WorkItemCallback wiCallback = new WorkItemCallback(job.QueuedExecution);
IWorkItemResult wiResult = mySmartThreadPool.QueueWorkItem(wiCallback,         (WorkItemPriority)job.Priority); 
```

在任何时候，我如何通过传递 JobId 来查询 ThreadPool 以获取当前状态，即 Queued/Running/Cancelled，即

```
TaskStatus mySmartThreadPool.GetCurrentStatus(string jobId); 
```

或者如何从智能线程池中获取对已经排队的项目的引用？

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:30:40.593

您的任务将由池中的线程运行。池控制线程。

但在下面的链接中，有一个示例可用于检查线程是否已完成

[等待 QueueUserWorkItem 完成](https://stackoverflow.com/questions/6529659/wait-for-queueuserworkitem-to-complete)

# owl - OWL 的开源三重存储

> ID：13155676
> 
> 赞同：2
> 
> 时间：2012-10-31T10:17:31.337
> 
> 标签：owl, triplestore, rdfstore

我是三重商店的新手，我需要一个很好的开源三重商店推荐，我可以在其中存储 OWL 文件。有人对我有一些建议吗？十分感谢！最好的 M

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T15:13:08.617

I think 4Store would be a good choice, which is fast and stable. You can get some information from [project repository](https://github.com/garlik/4store)

[Jena TDB](http://jena.apache.org/documentation/tdb/index.html) and ~~Sesame~~ [RDF4J](http://rdf4j.org/about/) would be another choice. Both are open source. You can refer the comparison between Jena and Sesame [here](https://web.archive.org/web/20160524201836/http://answers.semanticweb.com:80/questions/1638/jena-vs-sesame-is-there-a-serious-complete-up-to-date-unbiased-well-informed-side-by-side-comparison-between-the-two)

Other materials:
More [large triple stores introduction](http://www.w3.org/wiki/LargeTripleStores).
[RDF Store Benchmarking](http://www.w3.org/wiki/RdfStoreBenchmarking)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T21:54:40.337

由于 OWL 文件是 RDF，因此任何 RDF 三元存储都可以存储它们——尽管并非每个三元存储都支持 OWL 推理（但话又说回来，您甚至可能不需要它）。

一些流行的 RDF 存储/查询开源选择是 OpenRDF Sesame、Apache Jena、OpenLink Virtuoso、Redland、4store 和 dotNetRdf。值得指出的是，其中一些（例如 Sesame、Jena、dotNetRdf）是存储中性 API，这意味着可以通过它们访问其他几个（开源和商业）三元存储。

因此，您选择哪个三元存储/API 取决于您在易用性、可扩展性、所需推理支持等方面的要求，以及通常您认为哪个看起来很酷。查看[此页面](https://web.archive.org/web/20150728043541/http://answers.semanticweb.com:80/questions/397/what-are-specific-triplestore-strengths-and-weaknesses)，了解各种产品的一些优势和劣势的概述。

# c# - Azure Web Role 引发的 web.config 中无法识别的元素“autoDiscover”

> ID：13155683
> 
> 赞同：6
> 
> 时间：2012-10-31T10:18:00.777
> 
> 标签：c#, asp.net, asp.net-mvc, azure, azure-caching

我正在尝试在运行在 Web 角色的两个实例上的同位缓存上使用[用于 Windows Azure 缓存的会话状态提供程序。](http://msdn.microsoft.com/en-us/library/windowsazure/gg185668.aspx)我有一个 ASP.NET MVC4 项目。我按照[Microsoft 的指南](https://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)进行了设置，并多次查看，但结果相同。当我发布到 Azure 时，我在每个页面上都得到一个 YSOD。

我浏览了我的 Azure 实例上的日志，发现了可能导致此问题的异常：

```
Event code: 3008 
Event message: A configuration error has occurred. 

...

Exception information: 
    Exception type: DataCacheException 
    Exception message: ErrorCode<ERRCMC0003>:SubStatus<ES0001>:Error in client configuration file.
   at Microsoft.ApplicationServer.Caching.ConfigFile.ThrowException(Int32 errorCode, Exception e)
   at Microsoft.ApplicationServer.Caching.ClientConfigReader.Init(String path)
   at Microsoft.ApplicationServer.Caching.DataCacheFactoryConfiguration..cctor()

Unrecognized element 'autoDiscover'. (E:\sitesroot\0\web.config line 20)
   at System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult)
   at System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSection(String configKey)
   at System.Configuration.ConfigurationManager.GetSection(String sectionName)
   at Microsoft.ApplicationServer.Caching.ClientConfigReader.Init(String path) 
```

我意识到这与我的 web.config 和本节有关：

```
<dataCacheClients> 
  <tracing sinkType="DiagnosticSink" traceLevel="Error" /> 
  <dataCacheClient name="default"> 
    <autoDiscover isEnabled="true"/> 
  </dataCacheClient> 
</dataCacheClients> 
```

但该部分直接取自 Microsoft 指南。我还尝试卸载并重新安装 WindowsAzure.Caching Nuget 包，它将正确的条目添加到 web.config，但它看起来也完全相同。

我在 MSDN 上找到[了这个](http://social.msdn.microsoft.com/Forums/pl-PL/windowsazuredata/thread/9fd2a66d-2c59-4c06-bf6c-96595622bbbc)关于看起来是同一个问题的讨论，但是我启动了一个新的 Azure Web 角色，所以在这种情况下我看不出它应该与 GAC 和 SDK 的旧版本有关，或者我错过了什么？

查看已部署站点的 bin 文件夹，在我的 Azure 实例上，我看到我的`Microsoft.ApplicationServer.Caching.Client.dll`和文件版本`Microsoft.ApplicationServer.Caching.Core.dll`是`1.0.4621.0`. `WindowsAzure.Caching`这与我安装Nuget 包时在我的项目中引用的文件相同。这是要使用的正确文件吗？

经过 15 小时的调试，我们将非常感谢您对此的任何意见。

**更新：**

当我将它发布到一个新的 Web 角色的两个实例时，我实际上已经让[这个项目工作了。](http://code.msdn.microsoft.com/Windows-Azure-Caching-78a49b70)我将开始进行该部署，看看是否能发现任何差异。

**更新 2：**

不同之处在于我的项目使用的是 and 的版本`1.0.4621.0`，`Microsoft.ApplicationServer.Caching.Client.dll`而`Microsoft.ApplicationServer.Caching.Core.dll`微软的项目使用的是`1.0.4655.0`. 所以实际上可能是我使用的是旧版本的 SDK。出于某种原因，我的项目坚持在我发布时上传这些文件，即使我删除了它们，但如果这解决了问题，我会得到一个完整的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:22:30.927

尝试将最新的**Azure SDK**升级到**1.7 SP1**或**1.8**。[Azure SDK 1.8 本周刚刚发布](http://blogs.msdn.com/b/avkashchauhan/archive/2012/10/29/list-of-components-installed-with-windows-azure-sdk-1-8.aspx)。[根据 MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/9fd2a66d-2c59-4c06-bf6c-96595622bbbc)，`autoDiscover`仅**Azure SDK 1.7.1+**支持[基于角色的缓存](http://msdn.microsoft.com/en-us/library/jj131262.aspx)。

**[Azure SDK 1.6](http://www.microsoft.com/en-us/download/details.aspx?id=28045)**（ *2011 年 11 月*）程序集版本：`1.0.4617.0`
**[Azure SDK 1.7](http://www.microsoft.com/en-us/download/details.aspx?id=29988)**（ *2012 年 6 月*）程序集版本：`1.0.4621.0`
**[Azure SDK 1.7.1](http://www.microsoft.com/en-us/download/details.aspx?id=30651)**（ *2012 年 6 月 SP1*）程序集版本：`1.0.4655.0`
**[Azure SDK 1.8](http://www.microsoft.com/en-us/download/details.aspx?id=35448)**（ *2012 年 10 月*）程序集版本：`1.0.4797.0`

# ruby-on-rails - sass/sprockets：生成 2 个样式表，它们仅在几个值上有所不同

> ID：13155684
> 
> 赞同：1
> 
> 时间：2012-10-31T10:18:03.210
> 
> 标签：ruby-on-rails, sass, sprockets

我正在开发一个 Rails 项目，其中有很多用 sass 编写的样式表。现在的布局如下：

我们有一个清单（application.sass），它需要几个其他的 sass 文件：

```
// in application.sass:
/*
 *= require reset
 *= require base
 *= require forms
 ...
 */ 
```

这些其他样式表都包含一个带有一些颜色定义的“部分”，并广泛使用这些：

```
// in _colors.sass:
$foreground: '#F00'
$background: '#0F0'
// ...

// in base.sass:
@import colors.sass
#content
  background-color: $background
// ...

// in forms.sass:
@import colors.sass
form
  color: $foreground
// ... 
```

我现在想生成一个结果样式表的副本，其中包含相同的规则，只是换掉了颜色定义（例如，red_application.sass 是 application.sass 的精确克隆，只是换了 _var.sass 中的所有颜色定义出去）。

我尝试将颜色定义的导入移动到清单文件中，如下所示：

```
// in application.sass:
/*
 *= require _colors.sass
 *= require reset
 *= require base
 *= require forms
 ...
 */

// in red_application.sass:
/*
 *= require _red_colors.sass
 *= require reset
 *= require base
 *= require forms
 ...
 */

// in base.sass:
// no @import
#content
  background-color: $background
// ...

// in forms.sass:
// no @import
form
  color: $foreground
// ... 
```

不幸的是，这不起作用，因为没有@import 语句就无法生成单个样式表（base.sass、forms.sass），因为它们不知道其中使用的变量。

我怎样才能重组我们的样式表来实现我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T12:13:51.173

不要将 sprocket 要求与 scss 导入混合。

要使 sprocket 工作，每个必需的文件都必须是完整的 css（编译后），生成的文件将包含所有 css 文件的内容。

`scss`导入是在编译阶段解决的，所以你不能按照你的意愿去做。

你可以做的是在每个主scss中导入颜色，不要让链轮需要东西：

在`application.sass`：

```
@import _colors
@import reset
@import base
@import forms 
```

在`red_application.sass`：

```
@import _red_colors
@import reset
@import base
@import forms 
```

# c# - 当我使用 Designer 向表单添加新控件时，如何阻止 Visual Studio 更改 WPF 表单中控件的属性？

> ID：13155686
> 
> 赞同：3
> 
> 时间：2012-10-31T10:18:03.833
> 
> 标签：c#, wpf, visual-studio-2010, visual-studio, visual-studio-2005

我正在使用 Visual Studio Ultimate 2010。在 WPF 形式中，我有一个包含许多控件的网格。每当我尝试使用设计器向网格添加新控件时，Visual Studio 都会以某种方式更改所有其他控件的属性，例如 Grid.Row、Grid.Column 属性。因此，我必须手动更改这些属性。如何阻止 Visual Studio 更改 wpf 表单中某些控件的属性？有什么方法可以锁定 WPF 表单中的某些控件，以便它们的属性不会改变。简单的解决方案将不胜感激。谢谢你。

我已经看到了一些与此相关的问题，但没有找到一个好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:47:01.863

设计师很烂。如果您正在做很多事情，请考虑复制和粘贴 xaml。或者，如果你创建了很多很多元素 9 听起来你可能是这样）在一些 for 循环中执行它，如下所示：

```
nameofgrid.Children.Add(listoftextblocks[i]);
Grid.SetColumn(listoftextblocks[i], 0);
Grid.SetRow(listoftextblocks[i], i + 1) 
```

希望有人可以对编辑器提供更多帮助，我发现你必须非常小心用鼠标放置东西的位置，但我希望这些提示会有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T13:18:02.723

如果您在导致现有控件移动的位置添加新控件，则设计器将更改现有控件的附加布局相关属性，因此实际上归结为在添加新事物时要小心。

或者做我们最终做的事情，这几乎完全放弃了设计师。我们构建的大部分内容都是在 XAML 中手工构建的，一旦您熟悉了它，它的体验就会好得多，因为您可以控制各个方面。设计器擅长快速将某些东西组合在一起，但如果您希望它的行为完全符合您的要求，您将不得不在某个时候进入 XAML。

尤其是当您开始编写数据模板时。

# php - 面临一些CSS问题

> ID：13155687
> 
> 赞同：-1
> 
> 时间：2012-10-31T10:18:11.323
> 
> 标签：php, html, css

谁能告诉我下面的代码出了什么问题？

我正在尝试展示 18 个产品，每行 3 个。我是这个 CSS 的新手，不知道出了什么问题，请你从下面的代码中检查一下：

**这是输出：**

```
http://your-guru.com/store/c/clothes/ 
```

**这是显示产品的代码：**

```
<!-- Product List -->
<div class="pl">
  [product.each]
  <div class="t1 col3">
   <ul style="display: block;" class="display thumb_view category_list">
    <li>
     <div class="content_block">
      <a href="[product.url]" title="[product.name]"  class="product_thumb" style="width:190px; height:180px">
       <img src="http://templatic.com/demos/ecommerce/wp-content/themes/eCommerce_child/images/sale.png" alt="" class="sale_img">[product.image direct='1' tag='1' width='190' height='180']
      </a>
      <div class="content">
       <h3>
        <a href="[product.url]" title="View details of [product.name]">[product.name]</a>
       </h3>
       <p class="sale_price">
       <?php if ($product->saleprice > 0 &&  $product->saleprice < $product->price) { ?>
       <div class="prc">
        <small>
         <span style="text-decoration: line-through; color:blue;">[product.currency mode='sign'][product.price]</span>
         &nbsp&nbsp
         <span style="font-weight: bold; color:red;">[product.currency mode='sign'][product.saleprice]</span>
        </small>
       </div>
       <?php } else { ?>
       <div class="prc">
        <small>
         <span style="font-weight: bold; color:blue;">[product.currency mode='sign'][product.price]</span>
        </small>
       </div>    
       <?php } ?>
       </p>
      </div>
     </div>  <!-- content block #end --> 
    </li>
   </ul>
  </div>  <!-- t1 col3 #end --> 
  [/product.each]
  <div class="clearingdiv"></div>
 </div> <!-- /Product List --> 
```

请告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:35:30.653

起初，HTML-MarkUp 有点臃肿，难以维护。其次，你不应该使用 css inline。

您的问题是关于浮动并且您的产品高度不相等。当您为以下选择器`#view .col3`提供 370px 的高度时，您可以看到产品很好地浮动。所以，你必须选择如何设置你的高度。

*   有足够空间的静态高度
*   剥离产品标题
*   通过 javaScript 设置 .col3 的高度
*   ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:33:32.460

...

嗨，现在添加`overflow:hidden`您的`#wrapper`id

像这样

```
#wrapper{
overflow:hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:40:35.177

您的 li 高度不同或 auto 和 float:left

强制解决方案（不推荐）：

```
#content ul.thumb_view li {
  border-bottom: none;
  display: inline-block;
  min-height: 300px;/*you might try to force the height if you want to also*/
} 
```

推荐解决方案：

[砌体插件](http://masonry.desandro.com/)

# c - 虚拟坐标系

> ID：13155690
> 
> 赞同：1
> 
> 时间：2012-10-31T10:18:37.427
> 
> 标签：c, graphics, uvw

我有一些关于光线追踪的问题：

如何根据世界坐标系计算 w,v,u 单位向量？

```
 |----------------------|
    up vector         |                      |
      ^               |                      |
      |               |          .           |
      |               |                      |
      .               |       gaze point     |
                      |                      |
  eye origin          |                      |
                      |----------------------|
                               screen 
```

如何为 (i,j) 生成透视光线？

```
 |----------------------|
    up vector         |                      |
      ^               |                      |
      |               |          .           |
      |               |                      |
      .               |       (i,j)          |
                      |                      |
  eye origin          |                      |
                      |----------------------|
                               screen 
```

# fluent-nhibernate - 使用 propertySetter 设置 Fluent nHibernate PersistenceSpecification

> ID：13155691
> 
> 赞同：1
> 
> 时间：2012-10-31T10:18:37.787
> 
> 标签：fluent-nhibernate

有没有办法使用 Fluent nHibernate 的 PersistenceSpecification 显式设置属性值

考虑以下：

```
Guid expectedId = Guid.NewGuid();

new PersistenceSpecification<MyClass>(session)
    .CheckProperty(c => c.ID, expectedId , //some delegate here?)
    .VerifyTheMappings(); 
```

在 MyClass 的构造函数中，设置了 ID。
但是，我想在我的测试中覆盖它，将其明确设置为`expectedId`

其中一个重载`CheckProperty`有一个 propertySetter 委托，但是我找不到关于它的任何文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:18:14.153

`.CheckProperty()`将使用第二个参数在保存之前设置它并在再次加载后进行比较，因此它已经设置了expectedId。

# c++ - 使用 argv 设置变量

> ID：13155693
> 
> 赞同：1
> 
> 时间：2012-10-31T10:18:53.847
> 
> 标签：c++, argv, argc

这是描述我当前情况的最小工作示例。文件 main.cpp

```
#include <iostream>
void print_from_external_file();

using namespace std;

int main( int argc, char* argv[])
{
    print_from_external_file();

    return 0;
} 
```

包含 print_from_external_file() 的文件

```
#include <iostream>
using namespace std;

namespace
{
    int a;
}

void print_from_external_file()
{
    cout << a << endl;
} 
```

这是我的**目标**：我希望通过像“test.exe 2”这样的命令行来运行这个程序。我想将整数 2 加载到外部文件中的变量*a中。*有没有办法不用 argv[1] 调用 print_from_external_file() 来做到这一点？换句话说，“a”可以自动赋值为“2”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:22:54.760

如果您可以更改定义变量“a”的文件，则将变量放入非匿名命名空间或在同一文件中定义导出的 getter（下面的same1.cpp 或same2.cpp）。否则你将无法按照你想要的方式设置它。

一些1.cpp：

```
namespace {
   int a;
}
void set_a(int a_) { a = a_; } 
```

一些2.cpp：

```
namespace some {
   int a;
} 
```

主.cpp：

```
#include <cstdlib>

namespace some {
  extern int a;
}

int main(int argc, char** argv) {
  assert(argc == 2);

  some::a = atoi(argv[1]);
  // or: set_a(atoi(argv[1]));
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T10:27:22.677

您将必须命名您的命名空间。未命名的命名空间与它们的翻译单元相关联，因此您将无法从另一个单元访问其中的变量。

你的.cpp：

```
#include <iostream>
#include <stdlib.h>
#include "main.h"
void print_from_external_file();

using namespace std;
using ddd::a;

int main( int argc, char* argv[])
{
    a = atoi( argv[1] );
    print_from_external_file();

    return 0;
} 
```

你的.h：

```
#include <iostream>
using namespace std;

namespace ddd
{
    int a;
}
using ddd::a;

void print_from_external_file()
{
    cout << a << endl;
} 
```

或者，您可以摆脱命名空间，并`extern int a`在 .cpp 文件中使用来访问变量：

.cpp

```
#include <iostream>
#include <stdlib.h>
#include "main.h"
void print_from_external_file();

using namespace std;
extern int a;
//the rest goes unchanged 
```

。H：

```
#include <iostream>
using namespace std;

int a;
//the rest goes unchanged 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T10:28:05.937

我认为您正在寻找的是使用**extern**关键字。如果您在 main 中声明`a`为**外部**变量，则应该没问题。

```
#include <iostream>
void print_from_external_file();

using namespace std;

extern int a;

int main( int argc, char* argv[])
{
   //set value of a
   a = atoi(argv[1]); //atoi is deprecated but is easier to use in an example

    print_from_external_file();

    return 0;
} 
```

**编辑**

在第二个文件中，您需要删除命名空间或为其指定名称。我使用以下代码对第二个文件进行了测试，它按预期工作

```
#include <iostream>
using namespace std;

namespace
{
    int a;
}

void print_from_external_file()
{
    cout << a << endl;
} 
```

**编辑 2：使用命名空间的代码**

*文件 1*

```
#include <iostream>
void print_from_external_file();

using namespace std;

namespace TEST
{
    extern int a;
}

int main( int argc, char* argv[])
{
    //set value of a
    TEST::a = atoi(argv[1]); //atoi is deprecated but is easier to use in an example

    print_from_external_file();

    return 0;
} 
```

*文件 2*

```
#include <iostream>
using namespace std;

namespace TEST
{
    int a;
}

void print_from_external_file()
{
    cout << TEST::a << endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T10:24:06.537

是的你可以。

对于你必须使用的整数`std::atoi().`

所以代码变成：

```
int a = std::atoi(argv[1]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-31T10:26:24.740

如果您使用的是窗户，

```
namespace
{
    int nArgs = 0;
    int a = wtoi(CommandLineToArgvW(GetCommandLineW(), &nArgs)[0]);
} 
```

为了简洁起见，我跳过了所有错误检查。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-31T11:39:34.343

标准做法是用来`argv`访问命令行参数。您可能会发现在某些架构上还有其他方法可以做到这一点，但它们不太可能是可移植的，而且这里似乎没有太多理由不采用标准做法。要将值读入 int，您可以使用`strtol`

```
long n = strtol( argv[1], NULL, 0 ); 
```

（请注意，我倾向于使用`strtol`to，`atoi`因为您对输入和错误处理有更多的控制 - 但不多）

您还可以按如下方式使用流：

```
istringstream ss( argv[1] );
long n;
ss >> n; 
```

不过，有两件事让我担心您要尝试做的事情：首先，您想要一个变量值，在运行时设置以封装在函数中。从逻辑上讲，这将使您的代码更难维护，因为您的函数和外部影响（命令行参数）之间存在不可见的依赖关系——因此您的函数的确定性属性将受到损害。实际上，这将使测试您的功能变得更加困难 - 特别是使用自动化单元测试，因为在运行它之前无法以编程方式设置值。

其次，好像为了复合这一点，您正在寻求将`a`变量的范围限制为未命名命名空间内的编译单元。这有两个不良影响。首先，没有测试工具或任何其他代码能够看到这个变量，所以再次从自动化 UT 的角度来看，这非常糟糕。其次，`a`在您的编译单元中有效地成为“全局”。在此编译单元中的函数中，要了解如何以及何时`a`使用将非常棘手，这对于维护您的代码的任何人来说都有些头疼。我假设您没有使用真正会导致问题的多线程。

我很想知道你不想`argv[1]`进入的原因，`print_from_external_file()`但我真的认为这是最好的做法。如果您不觉得可以直接将这个变量作为字符串传递或转换为 int，则可以考虑创建一个命令行参数或可以传入的配置对象：

```
configuration c( argc, argv ); // This contains the hard work of parsing the CL
print_from_external_file( c ); 
```

这隐藏了解析命令行的大部分艰苦工作。更好的是，它允许您为 CL 参数添加真正的含义。假设该`a`变量代表一个目录号，您的`configuration`类的构造函数可以简单地这样做：

```
configuration::configuration( int argc, char* argv[] )
{
    // ...
    catalogNo_ = strtol( argv[1], NULL, 0 ); 
```

然后如果添加了访问器：

```
int configuration::get_catalog_no() const { return catalogNo_; } 
```

`print_from_external_file()`然后在我们正在做的事情中变得更加明显：

```
void print_from_external_file( const configuration& c )
{
    cout << c.get_catalog_no() << endl;
} 
```

# xpath - XPATH 找不到 @click 属性

> ID：13155694
> 
> 赞同：0
> 
> 时间：2012-10-31T10:18:53.847
> 
> 标签：xpath

我正在尝试定位和元素见下文

```
<td nowrap="">
  <a onclick="GetDept(0);return false;" href="#">
    <img width="21" `hspace="0" height="21" 
         align="BOTTOM" border="0" alt="" 
         src="images/cw_dept.gif">
  </a>
 </td>` 
```

我尝试了以下所有 xpath 定位器，但无济于事

```
//*[@*='GetDept(0)']
//*[@onclick='GetDept(0)']
//*[contains(@click,'GetDept')] 
```

//*[包含(.,'GetDept')

以下 xpath 的工作原理是它找到所有匹配项

//*[@点击]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:04:54.933

**使用**：

```
//*[starts-with(@onclick,'GetDept(0);')] 
```

如果选择了多个元素，这意味着需要指定更多上下文：

```
//td/a[starts-with(@onclick,'GetDept(0);')] 
```

甚至：

```
//td/a[@onclick='GetDept(0);return false;')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:44:05.187

最好的方法是： //*[contains(@onclick,'GetDept')]

这是你想要得到的还是节点然后只是寻找结果的父节点。

请让我知道这对你有没有用。

# android - android中的HTML集成

> ID：13155699
> 
> 赞同：0
> 
> 时间：2012-10-31T10:19:02.407
> 
> 标签：android, android-layout

我是安卓新手。我对 android 的一般功能有些怀疑。帮助将不胜感激:)

1.  是否可以将 HTML 设计实现为 android（在 XML 中）中的布局？
2.  是否可以将 JavaScript 集成到 android 中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:23:23.290

是的。可以`HTML, CSS and JAVASCRIPT`使用称为**Webview**的概念在 android 中实现。

一个代码spinet来演示如何使用`WebView`

```
mWebView = (WebView) findViewById(R.id.MyWebview);
mWebView.getSettings().setJavaScriptEnabled(true);
mWebView.getSettings().setBuiltInZoomControls(false);
String url = "http://www.youtube.com";
mWebView.loadUrl(url); 
```

使用“WebView”的演示

```
public class Placement extends Activity {
    WebView mWebView;
    EditText et;
    String reg;
    Button sub;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.placement_layout);
    showResults();
}

@SuppressLint("SetJavaScriptEnabled")
private void showResults() {
    getWindow().setFeatureInt(Window.FEATURE_PROGRESS,
            Window.PROGRESS_VISIBILITY_ON);
    mWebView = (WebView) findViewById(R.id.MyWebview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setBuiltInZoomControls(false);
    String url = "http://dibyaranjan.net76.net/placement.php";
    Log.d("Link", url);
    mWebView.loadUrl(url);
    final Activity MyActivity = this;
    mWebView.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress) {
            MyActivity.setTitle("Loading...");
            MyActivity.setProgress(progress * 100);
            if (progress == 100)
                MyActivity.setTitle(R.string.app_name);
        }
    });
}

protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    finish();
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:25:59.297

您应该将 html 页面保存在原始资源文件夹中，并`loadData()`在 webview 上调用方法来加载它，您需要将[mimetype](http://en.wikipedia.org/wiki/Internet_media_type)和[字符编码](http://en.wikipedia.org/wiki/Character_encoding)传递给它。

这是方法调用的示例

```
webview.loadData(readTextFromResource(R.raw.help), "text/html", "utf-8"); 
```

您可以在以下教程中阅读更多内容：

[http://www.monocube.com/2011/02/08/android-tutorial-html-file-in-webview/](http://www.monocube.com/2011/02/08/android-tutorial-html-file-in-webview/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:25:46.097

您不能在 Android 中硬核集成 HTML/Javascript。但是您可以使用 html/javascript/css 使用 PhoneGap 框架开发 Android 应用程序。

[http://phonegap.com/about](http://phonegap.com/about)

它是跨平台框架，因此您的应用程序可以在许多移动设备上运行。但是所有这些应用程序都是相似的并且不好。考虑一下）

# java - 在 Java 中逐行读取和写入大文件的最快方法

> ID：13155700
> 
> 赞同：21
> 
> 时间：2012-10-31T10:19:02.213
> 
> 标签：java, performance, file-io, bufferedreader

我一直在寻找在内存有限（约 64MB）的 java 中再次读取和写入大文件（0.5 - 1 GB）的最快方法。文件中的每一行代表一条记录，所以我需要逐行获取它们。该文件是一个普通的文本文件。

我尝试了 BufferedReader 和 BufferedWriter 但它似乎不是最好的选择。读写一个 0.5 GB 大小的文件大约需要 35 秒，只读写不处理。我认为这里的瓶颈是写作，因为单独阅读大约需要 10 秒。

我试图读取字节数组，但是在每个读取的数组中搜索行需要更多时间。

请问有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-31T10:52:36.017

我怀疑您真正的问题是您的硬件有限，而您所做的是软件不会有太大的不同。如果你有足够的内存和 CPU，更高级的技巧会有所帮助，但如果你只是在硬盘上等待，因为文件没有被缓存，它不会有太大的不同。

顺便说一句：10 秒内 500 MB 或 50 MB/秒是 HDD 的典型读取速度。

尝试运行以下命令以查看您的系统在什么时候无法有效地缓存文件。

```
public static void main(String... args) throws IOException {
    for (int mb : new int[]{50, 100, 250, 500, 1000, 2000})
        testFileSize(mb);
}

private static void testFileSize(int mb) throws IOException {
    File file = File.createTempFile("test", ".txt");
    file.deleteOnExit();
    char[] chars = new char[1024];
    Arrays.fill(chars, 'A');
    String longLine = new String(chars);
    long start1 = System.nanoTime();
    PrintWriter pw = new PrintWriter(new FileWriter(file));
    for (int i = 0; i < mb * 1024; i++)
        pw.println(longLine);
    pw.close();
    long time1 = System.nanoTime() - start1;
    System.out.printf("Took %.3f seconds to write to a %d MB, file rate: %.1f MB/s%n",
            time1 / 1e9, file.length() >> 20, file.length() * 1000.0 / time1);

    long start2 = System.nanoTime();
    BufferedReader br = new BufferedReader(new FileReader(file));
    for (String line; (line = br.readLine()) != null; ) {
    }
    br.close();
    long time2 = System.nanoTime() - start2;
    System.out.printf("Took %.3f seconds to read to a %d MB file, rate: %.1f MB/s%n",
            time2 / 1e9, file.length() >> 20, file.length() * 1000.0 / time2);
    file.delete();
} 
```

在具有大量内存的 Linux 机器上。

```
Took 0.395 seconds to write to a 50 MB, file rate: 133.0 MB/s
Took 0.375 seconds to read to a 50 MB file, rate: 140.0 MB/s
Took 0.669 seconds to write to a 100 MB, file rate: 156.9 MB/s
Took 0.569 seconds to read to a 100 MB file, rate: 184.6 MB/s
Took 1.585 seconds to write to a 250 MB, file rate: 165.5 MB/s
Took 1.274 seconds to read to a 250 MB file, rate: 206.0 MB/s
Took 2.513 seconds to write to a 500 MB, file rate: 208.8 MB/s
Took 2.332 seconds to read to a 500 MB file, rate: 225.1 MB/s
Took 5.094 seconds to write to a 1000 MB, file rate: 206.0 MB/s
Took 5.041 seconds to read to a 1000 MB file, rate: 208.2 MB/s
Took 11.509 seconds to write to a 2001 MB, file rate: 182.4 MB/s
Took 9.681 seconds to read to a 2001 MB file, rate: 216.8 MB/s 
```

在具有大量内存的 Windows 机器上。

```
Took 0.376 seconds to write to a 50 MB, file rate: 139.7 MB/s
Took 0.401 seconds to read to a 50 MB file, rate: 131.1 MB/s
Took 0.517 seconds to write to a 100 MB, file rate: 203.1 MB/s
Took 0.520 seconds to read to a 100 MB file, rate: 201.9 MB/s
Took 1.344 seconds to write to a 250 MB, file rate: 195.4 MB/s
Took 1.387 seconds to read to a 250 MB file, rate: 189.4 MB/s
Took 2.368 seconds to write to a 500 MB, file rate: 221.8 MB/s
Took 2.454 seconds to read to a 500 MB file, rate: 214.1 MB/s
Took 4.985 seconds to write to a 1001 MB, file rate: 210.7 MB/s
Took 5.132 seconds to read to a 1001 MB file, rate: 204.7 MB/s
Took 10.276 seconds to write to a 2003 MB, file rate: 204.5 MB/s
Took 9.964 seconds to read to a 2003 MB file, rate: 210.9 MB/s 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-31T12:48:10.120

我要尝试的第一件事是增加 BufferedReader 和 BufferedWriter 的缓冲区大小。默认缓冲区大小没有记录，但至少在 Oracle VM 中它们是 8192 个字符，这不会带来太大的性能优势。

如果您只需要制作文件的副本（并且不需要实际访问数据），我会放弃 Reader/Writer 方法并使用字节数组作为缓冲区直接使用 InputStream 和 OutputStream：

```
FileInputStream fis = new FileInputStream("d:/test.txt");
FileOutputStream fos = new FileOutputStream("d:/test2.txt");
byte[] b = new byte[bufferSize];
int r;
while ((r=fis.read(b))>=0) {
    fos.write(b, 0, r);         
}
fis.close();
fos.close(); 
```

或实际使用 NIO：

```
FileChannel in = new RandomAccessFile("d:/test.txt", "r").getChannel();
FileChannel out = new RandomAccessFile("d:/test2.txt", "rw").getChannel();
out.transferFrom(in, 0, Long.MAX_VALUE);
in.close();
out.close(); 
```

然而，在对不同的复制方法进行基准测试时，每次运行基准测试之间的差异（持续时间）要比不同实现之间的差异（持续时间）大得多。I/O 缓存（在操作系统级别和硬盘缓存上）在这里发挥着重要作用，很难说什么更快。在我的硬件上，使用 BufferedReader 和 BufferedWriter 逐行复制一个 1GB 的文本文件在某些​​运行中花费不到 5 秒，而在其他运行中则超过 30 秒。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-16T16:02:24.600

在 Java 7 中，您可以使用 Files.readAllLines() 和 Files.write() 方法。这是示例：

```
List<String> readTextFile(String fileName) throws IOException {
    Path path = Paths.get(fileName);
    return Files.readAllLines(path, StandardCharsets.UTF_8);
}

void writeTextFile(List<String> strLines, String fileName) throws IOException {
    Path path = Paths.get(fileName);
    Files.write(path, strLines, StandardCharsets.UTF_8);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-31T10:23:39.023

我建议查看`java.nio`包中的类。对于套接字，非阻塞 IO 可能更快：

[http://docs.oracle.com/javase/6/docs/api/java/nio/package-summary.html](http://docs.oracle.com/javase/6/docs/api/java/nio/package-summary.html)

这篇文章的基准表明这是真的：

[http://vanillajava.blogspot.com/2010/07/java-nio-is-faster-than-java-io-for.html](http://vanillajava.blogspot.com/2010/07/java-nio-is-faster-than-java-io-for.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-09T13:45:53.310

我写了一篇详尽的文章，介绍了[在 Java 中读取文件](https://funnelgarden.com/java_read_file/)的多种方法，并使用 1KB 到 1GB 的示例文件相互测试它们，我发现以下 3 种方法是读取 1GB 文件的最快方法：

1) java.nio.file.Files.readAllBytes() - 读取一个 1 GB 的测试文件只用了不到 1 秒。

```
import java.io.File;
import java.io.IOException;
import java.nio.file.Files;

public class ReadFile_Files_ReadAllBytes {
  public static void main(String [] pArgs) throws IOException {
    String fileName = "c:\\temp\\sample-10KB.txt";
    File file = new File(fileName);

    byte [] fileBytes = Files.readAllBytes(file.toPath());
    char singleChar;
    for(byte b : fileBytes) {
      singleChar = (char) b;
      System.out.print(singleChar);
    }
  }
} 
```

2) java.nio.file.Files.lines() - 读取一个 1 GB 的测试文件大约需要 3.5 秒。

```
import java.io.File;
import java.io.IOException;
import java.nio.file.Files;
import java.util.stream.Stream;

public class ReadFile_Files_Lines {
  public static void main(String[] pArgs) throws IOException {
    String fileName = "c:\\temp\\sample-10KB.txt";
    File file = new File(fileName);

    try (Stream linesStream = Files.lines(file.toPath())) {
      linesStream.forEach(line -&gt; {
        System.out.println(line);
      });
    }
  }
} 
```

3) java.io.BufferedReader - 读取 1 GB 测试文件大约需要 4.5 秒。

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class ReadFile_BufferedReader_ReadLine {
  public static void main(String [] args) throws IOException {
    String fileName = "c:\\temp\\sample-10KB.txt";
    FileReader fileReader = new FileReader(fileName);

    try (BufferedReader bufferedReader = new BufferedReader(fileReader)) {
      String line;
      while((line = bufferedReader.readLine()) != null) {
        System.out.println(line);
      }
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-24T15:01:51.773

这一切都`OutOfMemoryException`可以通过 Scanner 类迭代器有效地处理。它逐行读取文件，而不是批量读取。

下面的代码解决了这个问题：

```
try(FileInputStream inputStream =new FileInputStream("D:\\File\\test.txt");
  Scanner sc= new Scanner(inputStream, "UTF-8")) {
  while (sc.hasNextLine()) {
    String line = sc.nextLine();
    System.out.println(line);
  }
} catch (IOException e) {
  e.printStackTrace();
} 
```

# android - 运行 fastcv 的 loadJpeg 示例的挑战

> ID：13155701
> 
> 赞同：1
> 
> 时间：2012-10-31T10:19:03.213
> 
> 标签：android, eclipse, image-processing, android-ndk, cygwin

我已成功安装并运行来自[Qulacomm 的 Vuforia](http://www.qualcomm.com/solutions/augmented-reality)的示例。
我一直在尝试解决[高通的 fastCV](https://developer.qualcomm.com/mobile-development/mobile-technologies/computer-vision-fastcv)示例，但是由于以下错误而无法运行示例：

```
 make: *** [all] Error 2
 make: *** [clean] Error 2 
```

清理和构建后，控制台读取；

```
**** Build of configuration Default for project com.qualcomm.loadjpeg.LoadJpeg ****

make all 
Host OS was auto-detected: windows
process_begin: CreateProcess(NULL, /<NDK-PATH>/ndk-build, ...) failed.
make (e=2): The system cannot find the file specified.

make: *** [all] Error 2

**** Build Finished **** 
```

[我已遵循此处](https://developer.qualcomm.com/mobile-development/mobile-technologies/computer-vision-fastcv/compiling-and-running-fastcv-sample-app)推荐的建议以及[此处](https://www.google.com.eg/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CBwQFjAA&url=https://developer.qualcomm.com/mobile-development/mobile-technologies/computer-vision-fastcv/developer-tips-tricks&ei=p82QUNPcC4Si0QXauYFg&usg=AFQjCNEaF3QbQoxlLrFyg2vQ1W034nB3hQ&sig2=oAi6K6c5Iaq1T03fOFd3TQ)指示的所有步骤。

我已确保将 fastcv 文件夹从`<FASTCV-PATH>/inc`目录粘贴到 ndk 路径中的所有平台，`<NDK-PATH>\platforms\<ANDROID-VERSION>\arch-arm\usr\include`如在线经常推荐的那样（据我所知，它仅用于 Android 版本的测试，但我已将其放置在所有可用版本中以防万一。

ndk-build 似乎工作正常顺便说一句，下面是结果`ndk-build`（在`cd`项目目录之后） ![在此处输入图像描述](../Images/bc2d7bfd17118729443e707c234abeb1.png)

我已经在 PATH 环境变量中添加了 ndk 和 make.exe 路径。[此外，我已经按照这里](https://developer.qualcomm.com/forum/qdevnet-forums/computer-vision-fastcv/18122)
的类似问题的建议。

我正在使用在 Windows 7（64 位）上运行的 Eclipse Indigo Service Release 2。项目和 API 文件都在同一个 Eclipse 工作区中，以最大限度地减少错误。

感谢您的时间。

# android - Android 应用程序不使用 mvn 运行

> ID：13155708
> 
> 赞同：0
> 
> 时间：2012-10-31T10:19:28.830
> 
> 标签：android, windows, maven, android-emulator

我成功构建并部署了一个android应用程序，但是当我`mvn android:run -Dandroid:device=emulator`在命令行窗口中执行命令时，android应用程序无法在模拟器中运行。

不知道为什么，谁能帮帮我？

我正在使用 Windows 7，mvn 3.0.4，android 平台 4.0.3。

# c - use getopt to obtain multiple options

> ID：13155712
> 
> 赞同：1
> 
> 时间：2012-10-31T10:19:50.470
> 
> 标签：c, getopt

Here is my problem, I wrote a program `a.exe`, it can take several options, like `"r:e:m:"`. `r:` and `m:` can't appear together, which means they run totally different tasks inside `a.exe`. And `e:` is an optional option, if it shows up, then it should be with `r:`.

How should I implement this logic with `getopt`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:25:09.843

You have to manually check for incompatible options. For example, when you see the `-r` option you set a flag saying "`-r` is found", if you then see the `-m` option you check to see if the "`-r` is found" flag is set, and print an error message telling the user about it.

# c - 为什么在错误名称前添加连字符

> ID：13155714
> 
> 赞同：1
> 
> 时间：2012-10-31T10:19:56.773
> 
> 标签：c

为什么返回标准错误值的函数在错误宏名称前有一个连字符（-）？例如，我正在跟踪引导加载程序的代码，它是每个函数，例如：`return -EINVAL`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:22:30.007

我想这谈论的是 Linux 内核中的函数，这就是我看到这种模式的地方。

这发生在需要返回负数`int`以表示失败并且想要使用宏但宏的值为正的函数中。

因此，希望由于例如而发出失败信号的代码`EINVAL`将执行

```
return -EINVAL; 
```

所以连字符只是一个前缀否定运算符，它将来自宏的正值变成负值。

我猜周围的代码（系统调用机制）然后可以检测到这一点并将实际错误复制到`errno`同时返回`-1`到用户的调用或其他东西。我还没有验证这一点，但作为一种将错误代码的处理/传播与错误代码的生成隔离开来的简单方法是有意义的。

# delphi - 如何在非 .pas 文件上启用区域（代码折叠）？

> ID：13155718
> 
> 赞同：0
> 
> 时间：2012-10-31T10:20:05.383
> 
> 标签：delphi, logging, delphi-xe2

我们的`.log`文件是纯文本文件，有时包含大量的请求/响应转储。

我真的很想用适当的`{$REGION} / {$ENDREGION}`块包围它们，并让它们在像 Delphi 这样功能强大的 IDE 中查看时折叠起来（在我们的开发人员机器上无处不在）。

但是，Delphi 似乎不想将代码折叠应用于任何不是`.pas`.

即使我`.log`将文件与 Pascal Source 格式相关联，我也只是得到语法高亮，没有代码折叠。

有什么秘诀可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:52:31.763

不，那里没有。正如您已经说过的，这仅适用于 .pas 文件。我不知道为什么 Embarcadero 没有为所有文件启用此功能。

但是您可以在 Codegear 上创建一张票，也许它会在下一个版本中处理它。

# spotify - RECENTLY_PLAYED 链接类型 Spotify 应用

> ID：13155721
> 
> 赞同：0
> 
> 时间：2012-10-31T10:20:20.560
> 
> 标签：spotify

在 Spotify Apps API 文档中的 mode.Link 页面上，有一个链接类型列表。我注意到有一个 RECENTLY_PLAYED 链接类型。它在哪里使用？

```
RECENTLY_PLAYED  number  14 A link to recently played. 
```

我注意到这段代码以蛮力的方式：

```
new models.Link("spotify:user:drsounds:recent").type
> 14 
```

这意味着这是 RECENTLY_PLAYED 类型的链接。但是当我在 spotify 客户端（windows 和 linux）的搜索框中输入这个时，我得到了 link not found 错误。而且播放按钮也根本无法识别 i。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:27:42.123

这是一个内部链接，很可能用于表示桌面客户端播放队列部分的“历史”选项卡。`spotify:user:drsounds:recent`不是有效的 URI - 我想您会恢复该类型，因为链接以`:recent`.

它在外部无法使用，例如在 Play Button 和 Apps API 中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-31T21:08:17.323

但我相信这是即将推出的功能的一部分，该功能允许人们查看用户的游戏历史（如果他们选择加入）。

# vbscript - 无法在 vbs 中重新设置数组

> ID：13155724
> 
> 赞同：2
> 
> 时间：2012-10-31T10:20:29.283
> 
> 标签：vbscript

我正在尝试重新调整并保留一个数组，以便它将删除数组中的任何空白行。但我得到一个错误

> 类型不匹配

在 redim 所在的行上。我需要先设置数组的 lbound 和 ubound 吗？

```
option Explicit

Const ForReading = 1
Const ForAppending = 8
Const ForWriting = 2

Dim objFSO, objUsersFile, arrFileLines, a, strDN, objUser, arrMemberOf, regex, group, strData, strObject, objRootDSE, objConnection, ADLogFile
Dim objCommand, WshShell, TriStateTrue, strDNSDomain, objRecordSet, workdir, strUsers, strDateAndTime, strDayOfMonth, strMonth, strYear, strDate, strTime
Dim strOU, strFlag, Args, strfile, objFile, strAddRemoveUser, strAdminsGroup, strUserDN, ADSuccessLogFile, strUser, strGroup, objGroup
Dim strType, strPreventMDriveDelete, strAddRemove, wshNetwork, strDomainName, strPreventWin7Upgrade, strWin7Advert
Dim ADFailedLogFile, strMachine, objComputer, strMachineDN, objMachine, strPackageCode, strAppInstall, strNTName, k
Dim arrFileLine()

Set objFSO = CreateObject("Scripting.FileSystemObject")
set WshShell = WScript.CreateObject ("WScript.Shell")
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set Args = WScript.Arguments

strType = "User"

strAddRemove = "Add"

strOU = "EU"

strAdminsGroup = strOU & "-SYS-MGRT-DESKTOP"

'set date for use in file names
strDayOfMonth = Right("0" & Day(Date()),2)
strMonth = Right("0" & Month(Date()),2)
strYear = Right (Year(Date()),4)
strDate = strDayOfMonth & "-" & strMonth & "-" & strYear
strTime = replace(Time(),":",".")
strDateAndTime = strDate & "-" & strTime

Workdir = "C:\script\admin"
Set ADSuccessLogFile = objFSO.OpenTextFile(workdir & "\Logs\Success" & strDateAndTime & ".txt", ForAppending,True)
Set ADFailedLogFile = objFSO.OpenTextFile(workdir & "\Logs\Failed" & strDateAndTime & ".txt", ForAppending,True)

strDNSDomain = objRootDSE.get("defaultNamingContext") 

strFile = Args.item(0)
If right (strFile,3) = "txt" Then
    Set objFile = objFSO.OpenTextFile(strFile, 1)
    k = 0
        Do Until objFile.AtEndOfStream
            strUser = Trim(objFile.ReadLine)
                If (strUser <> "") Then
                    ReDim Preserve arrFileLines(k)
                    arrFileLines(k) = strUser
                    k = k + 1
                End If
        Loop
    objFile.Close
Else
    ReDim arrFileLines(0)
    arrFileLines(0) = strFile
End If
for each struser in arrfilelines
    wscript.echo struser
next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:50:04.743

在调暗数组时发现问题我需要 arrFileLines() 而不是 arrFileLines

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:48:20.693

1.  arrFileLine <> arrFileLines
2.  `Dim aX()`创建一个没有大小的固定数组；VBScript 甚至不能 *Bound() 它

所以使用`Dim arrFileLines`并再试一次。

# javascript - 无需单击按钮，其单击事件就会执行 javascript

> ID：13155726
> 
> 赞同：6
> 
> 时间：2012-10-31T10:20:47.733
> 
> 标签：javascript, jquery

我有一个包含输入文本和按钮的 HTML 表单。 **HTML**

```
<form id="form1">
   <input type="text" />
   <button onclick='YouClick();'>Click</button>
 </form> 
```

JS函数

```
 function YouClick() {
   alert("You just clicked");
 } 
```

当用户单击按钮时，javascript函数`YouClick`执行。但是，如果我在输入文本字段上按下回车键，那么`YouClick`函数也会执行。我怎样才能阻止这种行为？因此，只有单击按钮才能`YouClick`执行该功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:23:09.390

这应该工作：

```
$(document).ready(function() {
  $('input').keydown(function(event){
    if(event.keyCode == 13) {
      event.preventDefault();
    }
  });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-31T10:29:10.527

您正在提交表单，然后默认`type='submit'`触发按钮，您可以将按钮的类型属性设置为`button`：

```
<button type='button' onclick='YouClick();'>Click</button> 
```

# git - GIT：如何通过批处理命令将工作目录中已经存在的 .git 文件夹的更改提交到该存储库？

> ID：13155730
> 
> 赞同：0
> 
> 时间：2012-10-31T10:20:54.533
> 
> 标签：git, batch-file, commit, working-directory

这是我当前的存储库，并将其作为我的工作目录。

![在此处输入图像描述](../Images/78294951852a48fed6e97c760a107d45.png)

如您所见，有一个 BAT 文件“backup.cmd”，其内容如下所示：

```
"C:\Program Files (x86)\Git\bin\git.exe" add . && "C:\Program Files (x86)\Git\bin\git.exe" commit -am "Periodic Backup %DATE%" 
```

现在，我在 Windows 7 中设置了一个任务调度程序，它允许我每周创建一个备份到这个存储库。但是，在任何这些文件中提交更改时都会出现问题。

问题是，通过运行 BAT 文件，Git 无法提交更改。它无法提交更改的原因是因为“.git”文件夹位于工作目录中。

我尝试使用“.gitignore”和“.git/info/exclude”来忽略/排除“.git”目录，但它仍然无法让我提交更改。我不知道任何其他忽略/排除“.git”目录的方法。

谁可以帮我这个事？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:26:30.563

不是每次都暂存目录 ( `git add .`)，而是使用暂存`git add -A`所有新文件。该`.git`目录的存在表明存储库已经初始化，并且不需要在每次批处理运行期间进行暂存。 `git add -A`阶段所有更改和新文件，这似乎是您想要的，但您可能更喜欢`git add -u`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:16:54.177

感谢@hammar，我现在知道我的问题是什么。

因为任务计划程序在命令提示符没有可用的 GIT 命令的位置运行批处理文件（这意味着它在其默认位置 (C:\Windows\system32) 运行命令），它会输出一条错误消息那个“.git”不存在。

修复方法是将位置更改为实际的 GIT 存储库，然后重新执行批处理命令，这样任务计划程序就知道如何处理它们。

# excel - auto_open / workbook_open 用于其他文件，不是这个

> ID：13155733
> 
> 赞同：1
> 
> 时间：2012-10-31T10:21:04.640
> 
> 标签：excel, excel-2010, vba

我知道当您在其中一个模块中打开包含它的文件时， auto_open / workbook_open （后者 = 一个事件）会运行。

我想在 file1.xlsm 的模块中放一些东西，当在 Excel 中打开任何**其他**文件 (.xls/.xlsx/.xlsm) 时执行。如果 Excel 和 file1.xlsm 已经打开。

是否存在诸如“sub any_other_workbook_open”之类的东西？（只是我幽默地尝试命名它）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:25:59.350

如果另一个工作簿由 file1.xslm 中的过程打开，这非常简单，如果不是，您可以随时检查是否存在使用此代码打开的任何其他工作簿：

```
Dim w as Object
Dim bOther as Boolean

For Each w in Application.Workbooks

   If w.Name<>ThisWorkbook.Name then bOther=True

Next w

If bOther=True then Call [Your Sub] 
```

好吧，这只是一种方式，还有很多其他方式取决于您的目标！

# java - Eclipse 无法识别 com.sun.net.httpserver.HttpServer 包

> ID：13155734
> 
> 赞同：14
> 
> 时间：2012-10-31T10:21:05.583
> 
> 标签：java, eclipse, import, package, httpserver

我有一个家庭作业，用 java 创建一个 http 服务器，一个简单的从头开始。在搜索谷歌和这里...我发现这个链接[“查看最佳响应”](https://stackoverflow.com/questions/1186328/embedded-http-server-in-swing-java-app) 的响应非常好，所以我将这个示例复制/粘贴到 eclipse 中，但它无法识别包

```
import com.sun.net.httpserver.Headers;
import com.sun.net.httpserver.HttpExchange;
import com.sun.net.httpserver.HttpHandler;
import com.sun.net.httpserver.HttpServer; 
```

你能帮帮我，这样我就可以让 eclipse 认出它们了吗？另外，如果要求不高，您是否知道与 HttpServer 示例的其他链接？先感谢您 ！

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-09-20T05:52:33.250

我在使用 Java 8 时遇到了同样的问题。

`com.sun.net.httpserver`不是 API（存在访问限制，Eclipse 将此指示为错误）。

您需要为模式添加访问规则“Accessible” `com/sun/net/httpserver/**`：

![添加访问规则](../Images/74077740d54300fbac56f86160fdb52b.png)

相关问题：[访问限制：由于对所需库的限制而无法访问 ..\jre\lib\rt.jar](https://stackoverflow.com/a/10642163/91497)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-31T10:29:40.340

从 1.6 开始，它应该可以在 JDK 中使用。否则，您可以单独将其添加到您的 buidpath 中。请参考以下链接：

[如何下载 com.sun.net.httpserver 包？](https://stackoverflow.com/questions/4484989/how-to-download-com-sun-net-httpserver-package)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-16T13:16:16.387

我在 Mac OSX 10.8，Eclipse Kepler Service Release 2 上遇到了同样的问题。我发现这取决于您使用的 JVM。将 JVM 从 Apple（默认）更改为 Oracle 解决了该问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T10:26:38.350

无论如何，您使用的是 Java 5.0 吗？不幸的是，该 jar 没有与 Java 5.0 SDK 捆绑在一起，您可能希望从该[位置](http://download.java.net/maven/2/com/sun/net/httpserver/http/20070405/)下载 httpserver jar并将其设置在您的类路径中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-08T12:55:29.057

最简单的解决方案是构建路径配置并从默认 MAC 更改 JRE。只需从您的 java 安装路径中删除提供的并添加一个，例如：

`Library/Java/JavaCirtualMachines/jdk.1.8.0_191.jdk/Contents/Home/bin`

添加新 JRE 时选择标准 VM 而不是 MacOS X VM

# python - 如何防止pycallgraph进入标准库函数？

> ID：13155735
> 
> 赞同：15
> 
> 时间：2012-10-31T10:21:10.393
> 
> 标签：python, profiling

我正在使用命令行中的[pycallgraph](http://pycallgraph.slowchop.com/)来分析和绘制一个相对简单的程序的调用图。但是，即使我不使用 -s 命令行选项，生成的图像也包含标准库（线程、json、套接字）的内部结构。使用 -e 选项排除这些模块无效，使用 -i 会导致空调用图。我也尝试过 cProfile，但它只绘制主线程。

如何使 pycallgraph 仅在我的代码中显示调用？目前乱七八糟的结果是没用的。

*编辑：*我使用的是 0.5.1，可通过 easy_install 获得。运行 pycallgraph ./cursesclient.py 输出![凌乱的调用图](../Images/cd034636efaa91dcc9af50523c71474e.png)：如您所见，pycallgraph 显示模块 json、re、编码、套接字和线程的内部结构。在我的代码中甚至从未直接调用 Re 和编码，而是分别通过 json 和 socket 调用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-14T15:25:06.737

Pycallgraph 提供过滤功能来过滤掉您想从调用图中排除的任何模块、类或函数。应在开始跟踪之前定义以下函数并将其传递给 pycallgraph

例子

```
def filtercalls(call_stack, modul, clas, func, full):
    mod_ignore = ['shutil','scipy.optimize','re','os','sys','json']
    func_ignore = ['CustomFunctionName','pdbcall']
    clas_ignore = ['pdb']
    return modul not in mod_ignore and func not in func_ignore and clas not in clas_ignore 
```

pycallgraph 跟踪开始是

```
pycallgraph.start_trace(filter_func=filtercalls) 
```

这样，您在 filtercalls 中提供的任何模块、类或函数都将被删除。请注意，在标准库中很多时候只提供模块名称是不够的。因此，在 mod_ignore 中包含 numpy 仍将导致包含 numpy.core

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-24T15:29:55.730

pycallgraph 有一个未记录的 stop_trace() 方法，您可以使用它来排除代码段。就像是

```
import pycallgraph
import mycode
import stuff_i_dont_want_to_see

pycallgraph.start_trace()
#Initializations

pycallgraph.stop_trace()
stuff_i_dont_want_to_see()
pycallgraph.start_trace()

mycode.things()
pycallgraph.make_dot_graph('cleaner_graph.png') 
```

这就是你所追求的吗？

[资源](http://www.oreillynet.com/onlamp/blog/2007/02/pycallgraph_010_released.html)

# sql - SQL 与 LINQ 性能

> ID：13155738
> 
> 赞同：23
> 
> 时间：2012-10-31T10:21:22.387
> 
> 标签：sql, performance, linq

我们目前有一个自制的实体框架，它依赖于独立于 DB 的 ORM。

我必须构建一个软件，在数据库中为大约 150 个 excel 模板批量加载元数据（包括单元格位置、单元格类型、格式等信息）。

我可以操作

*   通过 SQL 批处理（速度更快但交互性更少）

*   通过在内存中构建对象，使用 LINQ 查询处理它们以进行各种完整性检查，然后将修改提交到数据库

我知道 SQL 绝对更快，但我会知道......**它快多少？**

详细地说，SQL 查询比 LINQ 查询快多少*（假设所有需要的数据都已由 ORM 加载到内存中）*？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-31T10:55:03.503

TBH 在大多数情况下 linq 或 SQL 并不是问题所在。您的性能将与您插入的数据量、表中当前的数据量以及您维护的索引有关。

其次，您是否需要对数据的多个列进行交叉检查和/或完整性检查。我曾经遇到过添加索引和重建表将插入时间从几分钟缩短到几毫秒的情况，这只是由于碎片错误和缺乏算法。

Linq 是一种为插入和修改逻辑生成 SQL 的有效方法。但是，您总是会得到以下模式：

1.  从数据库中获取数据
2.  使用 Linq 修改数据
3.  提交对数据库的更改。

如果您有任何可以在插入中利用的逻辑，则可以使用集合逻辑在 SQL 中进行更新。例如，更新客户设置 KeyCustomer = 1，其中销售额 > 1000000。SQL Server 将处理这样的命令，比使用 ORM 处理的速度快 1000 倍。然而，正如@gbn 已经正确指出的那样，除非您拥有一支由强大的 SQL 编码员组成的团队，否则维护通常会在短期内胜过任何性能提升。

如果您必须插入大量记录，那么您真的应该通过 SSIS 查看批量加载和/或 ETL。这些 API 将使用更智能的算法并分批执行任何约束检查，而不是每次插入，这将为您带来出色的性能提升。但是管理 SSIS 包比单击应用程序中的按钮要多得多。这些都是您在构建应用程序时需要考虑的设计决策。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:32:47.683

在这里，您可以对各种 ORM 和以下各项进行一些性能比较`SqlDataReader`：[http](http://code.google.com/p/dapper-dot-net/) ://code.google.com/p/dapper-dot-net/ （性能部分）。值得一提的是，编译 LINQ 查询可能会显着提高性能： http: [//www.codeproject.com/Articles/38174/How-to-improve-your-LINQ-query-performance-by-5-X](http://www.codeproject.com/Articles/38174/How-to-improve-your-LINQ-query-performance-by-5-X)

# php - 带有搜索功能的 MySQL 分页，mysql_num_rows 还是 mysql_fetch 行？

> ID：13155739
> 
> 赞同：1
> 
> 时间：2012-10-31T10:21:28.773
> 
> 标签：php, mysql, pagination, search-engine, rows

我正在为这段代码吃一段时间。在我继续之前，我真的不希望代码被重写，只是帮助我找到正确的方向，因为我迷路了^^

所以这是我用来查询列表的代码。$showitemsperlist 可以设置为我的用户，这表明每页应显示许多项目..

```
if (isset($_GET["page"])) 
{ 
$page  = $_GET["page"]; 
} 
else 
{ 
$page=1; 
}; 
$start_from = ($page-1) * $showitemsperlist; 

// THIS SECTION IS THE 'search' section. Items are shown according to user input.
if(isset($_POST['search']))
{
    $search = $_POST['search'];
    $terms = explode(" ", $search);
    $customerlistquery = "
    SELECT * 
    FROM customer
    LEFT JOIN company
    ON customer.compid=company.compid
    WHERE
    ";
    $i = 0;
    foreach ($terms as $each) 
    {
        if ($i++ > 0) 
        $customerlistquery .= ' OR ';

        $customerlistquery .= "concat(custsurname, custforename, custmidname, custpostal, custphone1, custphone2, custfax, custnamecode) LIKE '%$each%' ";
    }
    $customerlistquery .= " ORDER BY $orderby ASC LIMIT $start_from, $showitemsperlist" ;

}
else
// IF NOT SEARCHING, JUST SHOW EVERYTHING.
{
    $customerlistquery = "  
            SELECT *
            FROM customer
            LEFT JOIN company
            ON customer.compid=company.compid
            ORDER BY $orderby
            ASC LIMIT $start_from, $showitemsperlist
            ";
}

// EXECUTE QUERY:
$result=mysql_query($customerlistquery) or die("query fout " . mysql_error() ); 
```

查询正常工作，但在此下面我使用这行代码来计算页面数：

```
$sql = "SELECT COUNT(custid) FROM customer"; 
$rs_result = mysql_query($sql); 
$row = mysql_fetch_row($rs_result); 
$total_records = $row[0]; 
$total_pages = ceil($total_records / $showitemsperlist); 
echo "<p id='pagination'>";
if ($total_pages < 2)
{
    echo "<br/>";
}
else
{
    echo "Page: ";
    for ($i=1; $i<=$total_pages; $i++) 
    { 
        echo "<a href='crm_custlist.php?page=".$i."' id='pagination'>".$i."</a>"; 
    }
}
echo "</p>"; 
```

我在这里看到 1 个问题，即执行“搜索”功能时的 $sql。如果我没有执行“搜索”，我会得到页面链接，当我没有“搜索”时，我也会得到它们，因为它是静态的......不适合“搜索”查询。

所以我试图改变 $rs_result = mysql_query($sql); 到 ...($customerlistquery)，因为它应该计算在那里找到的结果，但这给了我比它应该的更多的页面！

接下来我尝试将 fetch_row 更改为 num_rows，它返回 ASC 限制之间的差异，所以这没有帮助。

所以我需要计算总结果，不能是别的。

我真的不明白：

```
$sql = "SELECT COUNT(custid) FROM customer"; 
$rs_result = mysql_query($sql); 
$row = mysql_fetch_row($rs_result); 
$total_records = $row[0]; 
```

返回 27 个值。SELECT (custid) FROM customer 也返回 27 个值……所以我想通了。我需要以某种方式在 $customerlistquery 中有一个额外的 COUNT(custid) 字段，它返回总金额并且可以用作 $total_records。（至少我认为我想通了。）

最好的选择是 mysql_num_rows 返回找到的总记录，但由于 ASC LIMIT，现在这是不可能的......

我完全被困在这里。欢迎任何帮助！！！

谢谢。

编辑：31-10-2012 - 11:50

好的，我找到了。我需要对 $customerlistquery 使用 SELECT COUNT(*) 并将 ...($sql) 替换为：$rs_result = mysql_query($customerlistquery);。

这将返回我确实需要的值。但是现在我要回显的所有字段都是未定义的索引。

使用下面的这些行来定义索引...使用 SELECT *，而不是 SELECT COUNT(* )：

```
while( $record=mysql_fetch_array($result) ) 
{
$custid=$record['custid'];
$compid=$record['compid'];
$compname=$record['compname'];
$custsurname=$record['custsurname']; 
```

编辑：31-10-2012 - 12:06

现在非常接近！尝试将 COUNT(*) 的新表行添加到我的 $customerlistquery 中...尝试一切 ^^ 很快它将起作用...我希望。

```
SELECT * 
FROM customer
LEFT JOIN company
ON customer.compid=company.compid
WHERE
( SELECT COUNT(*)
  FROM customer ) 
```

不知道我在做什么，需要一点时间在评论变得无关紧要之前通知我的进展..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T11:18:56.807

你为什么不那样调试

```
while( $record=mysql_fetch_array($result) ) {
echo '<pre>";
print_r($record);
echo "</pre>";
} 
```

并查看您的 $record

# asp.net - 额外自定义细分时，404 页面未触发应用程序错误

> ID：13155741
> 
> 赞同：1
> 
> 时间：2012-10-31T10:21:47.660
> 
> 标签：asp.net, asp.net-mvc-3, iis-7

我在本地有一个带有 IIS7 和 IIS express 的 asp.net mvc 3 应用程序，它使用 Application_Error 来记录异常并重定向到自定义错误页面。我的应用程序有不同的区域，只要控制器或操作不匹配，就会调用 application_error，但不是针对该区域。

以下是使用的路由示例：

```
routes.MapRoute(
            "Default",
            "{region}/{controller}/{action}/{id}",
            new { region = "uk", controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
            new { region = new RegionWhitelistConstraint() } // constraint for valid regions
        ); 
```

在这种情况下，Application_Error 将被触发 /uk/NotFoundPage 但不会触发 /foo/Home

这里对区域的约束：

```
public class RegionWhitelistConstraint : IRouteConstraint
{
    public bool Match(System.Web.HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        var whiteList = Region.DefaultWhiteList;
        var currentRegionValue = values[parameterName].ToString();
        return whiteList.Contains(currentRegionValue);
    }
} 
```

我已经看到[这个](https://stackoverflow.com/questions/6990677/application-error-not-fired-for-404-in-mvc-3-when-url-contains-4-or-more-path-se)问题，它建议添加一条捕获所有路由，但除此之外，我想知道是否有一种触发 Application_Error 的方法，因为它是为控制器或操作完成的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T13:53:58.087

您可以在约束类中抛出异常。这将由 Application_Error 处理：

```
public class RegionWhitelistConstraint : IRouteConstraint
{
    public bool Match(System.Web.HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        var whiteList = Region.DefaultWhiteList;
        var currentRegionValue = values[parameterName].ToString();
        var match = whiteList.Contains(currentRegionValue);

        if (!match)
        {
            throw new HttpException(404, "Not Found");
        }

        return match;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T09:57:27.093

我发现了问题所在：当控制器或操作出错时，它们仍然被路由系统与模式匹配：

```
 routes.MapRoute(
            "Default",
            "{region}/{controller}/{action}/{id}",
            new { region = "uk", controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
            new { region = new RegionWhitelistConstraint() } // constraint for valid regions
        ); 
```

但是当该区域不在白名单中时，则不匹配。这使得绕过 application_error。我使用的解决方案是创建一个包罗万象的路线：

```
 routes.MapRoute(
            "NotFound",
            "{*url}",
            new { region = "uk", controller = "Error", action = "NotFound", id = UrlParameter.Optional }
        ); 
```

以及引发 HttpException 的操作：

```
 [HttpGet]
    public ActionResult NotFound()
    {
        throw new HttpException(404, "Page not found");
    } 
```

# javascript - How to add div tag in-between two paragraphs when wrapped inside main div using jquery

> ID：13155749
> 
> 赞同：1
> 
> 时间：2012-10-31T10:22:33.333
> 
> 标签：javascript, jquery, asp.net

I have to show a banner ad for each article somewhere in between the article text, let us say after 2nd or 3rd paragraph.

sample example of article on [jsFiddle](http://jsfiddle.net/Dgysc/)

if you have checked the jdFiddle then you can understand my scenario better, I want to ad the red banner box after second paragraph and i want to do it with jQuery i would appreciate if some one can help me with this.

I can do same in asp.net web form using c# by splitting the text at end of second paragraph & adding the Banner `div`.

I would love to have a solution which is more perfect for this kind of scenario

```
<div class="ArticleContent">
    <p>
        Lorem ipsum dolor sit amet, ut auctor mauris eget erat nonummy, non mauris risus libero voluptates cras, debitis elementum eget etiam. Class nisl, at euismod ligula nulla sodales, tristique nunc, justo pellentesque tempora. Lectus metus penatibus mi donec magna, sapien adipiscing magna sed, integer vitae.</p>

<p>Nam diam malesuada purus, fermentum commodo luctus laoreet quisque, pede eget conubia, conubia dui per sit a eu laoreet, eu massa. Donec in sem at, wisi ante sed non aptent, id facilis lorem ligula nec nullam, vestibulum elementum dolor natoque viverra dolor amet, aliquet eu lectus lectus suspendisse sodales nulla. Lacinia suscipit erat. </p>

<p>Tellus quam lectus pretium in montes tellus, mi nobis felis et tincidunt tempor adipiscing, consectetuer quia non dui odio nam, elit morbi elit laoreet nisl nibh. </p>

<p>Tincidunt lorem porta auctor, lobortis in molestie eu, volutpat a sapien donec vitae id, at enim.</p>
    <div class="ContentBanner"> BANNER WILL SHOW UP HERE</div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:30:04.737

With jQuery you can use below code:

```
$('<div class="ContentBanner"> BANNER WILL SHOW UP HERE</div>').insertAfter('.ArticleContent p:nth-child(3) '); 
```

This should work!!!!

[http://jsfiddle.net/eehtK/](http://jsfiddle.net/eehtK/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T10:30:45.160

```
$(".ContentBanner").insertAfter(".ArticleContent p:eq(1)") 
```

[DEMO](http://jsfiddle.net/Dgysc/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T10:52:01.287

```
$("div.ArticleContent p").each(function(index,item)
    {
        if(index==1 || index==2)
        {
            var divBanner='<div class="ContentBanner"> BANNER WILL SHOW UP HERE</div>';

            $(this).append(divBanner);
       }        
  }); 
```

# sql-server - SQL Server 键值对无异常将 varchar 转换为数字

> ID：13155750
> 
> 赞同：-3
> 
> 时间：2012-10-31T10:22:36.497
> 
> 标签：sql-server, parsing, text-parsing

我正在寻找有关将用户定义的函数组合在一起以将 varchar 转换为数字的提示。诀窍是我追求将字符串的常见文本表示形式转换为数字的方法。此外，如果它不能被解析为数字，我希望它返回 NULL 而不是抛出错误并停止查询。

例子：

*   varchar '10%' 应解析为数字 0.1（不删除 % 符号并除以 100）
*   varchar '$1,00.1234' 应解析为数字 100.1234（删除 $ 符号和 ,）
*   varchar '$1k' 应解析为数字 1000（k 转换为乘以 1000）
*   varchar '$1M' 应解析为数字 1000000（m 转换为乘以 100 万）
*   varchar '$1B' 应解析为数字 1000000000（b 转换为乘以 10 亿）
*   varchar '100 ' 应解析为数字 1000 (LTrim & RTrim)
*   varchar 'Random Text' 应解析为数字 NULL（Null 不会引发错误）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:25:30.040

我建议您使用 CLR 函数来解析这种复杂性。然后修复数据

除了非数字值之外，您还可以混合使用货币、百分比、混合小数/分隔符格式。

# c# - 如果使用 VirtualStackPanel，WPF DataGrid 中的异常

> ID：13155751
> 
> 赞同：5
> 
> 时间：2012-10-31T10:22:37.640
> 
> 标签：c#, wpf, datagrid

我将 C# 与 .Net 4.0 和 WPF DataGrid 一起使用。有时我在程序执行过程中会出现以下异常。如果我更改某些列的值，将引发异常。DataGrid 的虚拟化已激活（但仅对于行，列虚拟化设置为 false）。现在我需要知道它是否是.Net 内部的错误。

```
An unhandled exception occured in GUI. Stack Trace - "System.NullReferenceException:     
Object reference not set to an instance of an object.
at System.Windows.Controls.DataGridCell.OnCoerceIsReadOnly(DependencyObject d, Object    
baseValue)
at System.Windows.DependencyObject.ProcessCoerceValue(DependencyProperty dp,   
PropertyMetadata metadata, EntryIndex& entryIndex, Int32& targetIndex,   
EffectiveValueEntry& newEntry, EffectiveValueEntry& oldEntry, Object& oldValue, Object    
baseValue, Object controlValue, CoerceValueCallback coerceValueCallback, Boolean   
coerceWithDeferredReference, Boolean coerceWithCurrentValue, Boolean 
skipBaseValueChecks)
at System.Windows.DependencyObject.UpdateEffectiveValue(EntryIndex entryIndex,    
DependencyProperty dp, PropertyMetadata metadata, EffectiveValueEntry oldEntry,   
EffectiveValueEntry& newEntry, Boolean coerceWithDeferredReference, Boolean 
coerceWithCurrentValue, OperationType operationType)
at System.Windows.DependencyObject.CoerceValue(DependencyProperty dp)
at System.Windows.Controls.DataGridHelper.TransferProperty(DependencyObject d,  
DependencyProperty p)
at System.Windows.Controls.DataGridCell.PrepareCell(Object item, DataGridRow ownerRow,    
Int32 index)
at System.Windows.Controls.Primitives.DataGridCellsPresenter.PrepareContainerForItemOverride( 
DependencyObject element, Object item)
at System.Windows.Controls.ItemsControl.MS.Internal.Controls.IGeneratorHost.PrepareItemContainer(DependencyObject container, Object item)
at  
System.Windows.Controls.ItemContainerGenerator.System.Windows.Controls.Primitives.IItemContainerGenerator.PrepareItemContainer(DependencyObject container)
at System.Windows.Controls.DataGridCellsPanel.InsertContainer(Int32 childIndex, UIElement container, Boolean isRecycled)
at System.Windows.Controls.DataGridCellsPanel.AddContainerFromGenerator(Int32 childIndex, UIElement child, Boolean newlyRealized)
at System.Windows.Controls.DataGridCellsPanel.GenerateChild(IItemContainerGenerator generator, Size constraint, DataGridColumn column, Int32& childIndex, Size& childSize)
at System.Windows.Controls.DataGridCellsPanel.GenerateChildren(IItemContainerGenerator generator, Int32 startIndex, Int32 endIndex, Size constraint)
at System.Windows.Controls.DataGridCellsPanel.GenerateAndMeasureChildrenForRealizedColumns(Size constraint)
at System.Windows.Controls.DataGridCellsPanel.MeasureOverride(Size constraint)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at MS.Internal.Helper.MeasureElementWithSingleChild(UIElement element, Size constraint)
at System.Windows.Controls.ItemsPresenter.MeasureOverride(Size constraint)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at System.Windows.Controls.Control.MeasureOverride(Size constraint)
at System.Windows.Controls.Primitives.DataGridCellsPresenter.MeasureOverride(Size availableSize)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at System.Windows.Controls.Grid.MeasureCell(Int32 cell, Boolean forceInfinityV)
at System.Windows.Controls.Grid.MeasureCellsGroup(Int32 cellsHead, Size referenceSize, Boolean ignoreDesiredSizeU, Boolean forceInfinityV)
at System.Windows.Controls.Grid.MeasureOverride(Size constraint)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at System.Windows.Controls.Border.MeasureOverride(Size constraint)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at System.Windows.Controls.Control.MeasureOverride(Size constraint)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at System.Windows.Controls.VirtualizingStackPanel.MeasureOverride(Size constraint)
at System.Windows.Controls.Primitives.DataGridRowsPresenter.MeasureOverride(Size constraint)
at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
at System.Windows.UIElement.Measure(Size availableSize)
at System.Windows.ContextLayoutManager.UpdateLayout()
at System.Windows.ContextLayoutManager.UpdateLayoutCallback(Object arg)
at System.Windows.Media.MediaContext.InvokeOnRenderCallback.DoWork()
at System.Windows.Media.MediaContext.FireInvokeOnRenderCallbacks()
at System.Windows.Media.MediaContext.RenderMessageHandlerCore(Object resizedCompositionTarget)
at System.Windows.Media.MediaContext.RenderMessageHandler(Object resizedCompositionTarget)
at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:17:44.290

我有同样的问题，我尝试了下面的代码，它得到了修复。

```
 /// <summary>
  /// -MyExtndDataGrid an extension of datagrid
  /// </summary>
  public class MyExtndDataGrid : DataGrid
  {
    /// <summary>
    /// 
    /// </summary>
    /// <returns></returns>
    protected override AutomationPeer OnCreateAutomationPeer()
    {
      return null;
    }
  }

and in the XAML

 <local:MyExtndDataGrid ...../> 
```

# php - 如何使用 PHP PDO 复制 mysql 中的行

> ID：13155752
> 
> 赞同：0
> 
> 时间：2012-10-31T10:22:44.233
> 
> 标签：php, mysql, pdo

我有以下简化的表结构，值得一提的是，如果有更好的方法来构造这些数据，则可以更改数据模型。

```
document:
id text 
 1    test of document 1 description
id text
 2    test of document 2 description

document_section:
id document_id parent_id 
 1           1
id document_id parent_id
 2           1         1
id document_id parent_id
 3           1         2 
```

现在，如果我想复制 id 为 1 的文档（来自文档表），我只需在文档表中插入一些更新的数据，但是我应该如何复制组成该部分的部分文档（document_section 中的行）。如果我在 document_section 表中使用 id 1 的行并插入与文档部分 (document_id) 中的新行匹配的更新版本，我如何使用 parent_id 列跟踪映射到该行的所有子项？

我将 PHP 与 PDO 一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:37:33.403

*   将旧的 document_section ID 映射到数组中的新 ID 以跟踪更改
*   在新创建的行中，将所有`parents_id`s 替换为其“新”等效项。

# javascript - 向 jQuery 脚本添加不同的超时时间

> ID：13155754
> 
> 赞同：0
> 
> 时间：2012-10-31T10:22:51.153
> 
> 标签：javascript, jquery, timeout, hoverintent

我有一个小问题...

我创建了一个小脚本（用于 jQuery HoverIntent-Plugin）

脚本显示我的子菜单**7 秒**

（**完美运行**）

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function(){
        $(".navi-item").hoverIntent({
            over: showSub,
            timeout: 7000,
            out: hideSub
            });
        });
    function showSub(){ $(this).find('>ul').fadeIn(100); }
    function hideSub(){ $(this).find('>ul').fadeOut(100); }
</script> 
```

现在我创建了另一个脚本（用于 jQuery HoverIntent-Plugin）

如果未设置特定类，则脚本将添加一个类**3 秒**

（**仅当我禁用上面的代码时才有效**）

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function(){
        $(".navi-item").hoverIntent({    
                timeout: 3000,  
                over:function(){
                    if (!$(this).hasClass("active")) {
                        $(this).addClass("active2");
                    }
                },
                out: function(){
                    $(this).removeClass("active2");
                }
            });
        });
</script> 
```

现在我试图结合这两个代码

（**WORKS .. 但只有 1 次超时**）

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function(){
        $(".navi-item").hoverIntent({    
                timeout: 7000,  
                over:function(){
                    if (!$(this).hasClass("active")) {
                        $(this).addClass("active2"); // ADDCLASS
                    }
                    $(this).find('>ul').fadeIn(100); // SUBMENU
                },
                out: function(){
                    $(this).removeClass("active2"); // ADDCLASS
                    $(this).find('>ul').fadeOut(100); // SUBMENU
                }
            });
        });
</script> 
```

有没有办法同时运行脚本 1 和 2？

**或者**

是否可以设置从 hoverintent 到**//ADDCLASS**和**//SUBMENU的不同超时**

问候伯尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:45:37.460

编辑：[Github 链接到我的插件版本，供将来发现此插件的任何人使用。](https://github.com/jfmatt/hover-intent-multiple)它的优化不是特别好，所以不要过度，但它确实有效。

[看起来像这个问题](https://stackoverflow.com/questions/5519076/how-to-bind-multiple-eventhandlers-for-hoverintent)的副本。基本上，答案是“你不能”——hoverintent 的编码方式是，你添加的任何事件处理程序都会覆盖旧的。该线程的回答者在修补悬停意图以添加您正在寻找的功能方面进行了几次尝试，但看起来他还没有管理它。

我将尝试编写插件的新版本；给我几分钟，我会发现这比我想象的更痛苦，或者发布一个 Github 链接。

# javascript - Jquery Url重新加载

> ID：13155760
> 
> 赞同：0
> 
> 时间：2012-10-31T10:23:10.547
> 
> 标签：javascript, jquery, html, css

嗨我有一个html代码如下

```
<ul id="userTabs" class="clearfix">

                <li class="selected"><a href="#profile">Profile Home</a></li>

                <li><a href="#test">test</a></li>

                <li><a href="#test2">test2</a></li>

                <li><a href="#test3">test3</a></li>

                <li><a href="#test4">test4</a></li>

    </ul> 
```

以前我问过有关如何获取 href 值的问题，现在我需要知道如何在重新加载页面时保留在同一个链接中。点击以上链接的JS代码如下

```
$("#userTabs li").click(function(){

      $("#userTabs li").removeClass('selected');
      $(this).addClass('selected');
      var href = $(this).children('a').attr('href');
      href = href.replace("#","")
     //alert(href);
      //alert(href);
      $.ajax({
        url:"<?=$this->baseUrl('user/"+href+"')?>",
        data:{'page':href},
        dataType:"json",
        type:"POST",
        success:function(data){
          //alert('ok');
         //var contentHtml = data;
         $("#user_reviews_list").html('');
         $('#pagesuser').hide();
         $("#user_reviews_list").html(data);
         //alert(contentHtml);
        }
      });

    //alert('ok');
    }); 
```

现在，当我单击链接时`test`，新内容将被当前内容替换，`$("#user_reviews_list")`并且我的 url 更改为`http://localhost/user/john#test`，但是如果我重新加载页面，则内容不再在 #test 中，而是返回到原始主页内容。我如何确保当我重新加载内容时假设是#test 的内容。? 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:33:37.033

尝试这个：

```
$(function(){
    var hash = document.location.hash;
    if(hash != '')
    {
        //load content
        //hack (just example, implement your logic here)
        $('#' + hash).parent().trigger('click');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:36:29.903

恐怕没有简单的答案，因为它被认为是 Ajax 的主要缺点之一（[请参阅此处。](http://www.jscripters.com/ajax-disadvantages-and-advantages/)）重新加载/返回不能正常工作（没有你做很多让它像那样工作）。

关于使浏览器刷新与 ajax 一起工作。只需谷歌它，或看[这里](https://stackoverflow.com/questions/163610/ajax-and-the-browser-back-button)，[这里](https://stackoverflow.com/questions/9381392/how-to-make-ajax-called-pages-to-reload-in-the-browser)或[这里](http://codeutopia.net/blog/2008/07/16/how-to-make-back-forward-and-reload-work-in-ajax-based-apps/)

希望这可以帮助！

# visual-studio-2010 - C# Visual Studio 中的RequiredTargetFramework 不起作用

> ID：13155767
> 
> 赞同：2
> 
> 时间：2012-10-31T10:23:33.973
> 
> 标签：visual-studio-2010, c#-4.0

目前我的 Visual Studios 项目存在 3 个问题。第一个是即使将RequiredTargetFramework设置如下

```
<Reference Include="System.Runtime.Serialization">
  <RequiredTargetFramework>3.0</RequiredTargetFramework>
</Reference> 
```

当我打开我的 Visual Studio 时，System.Runtime.Serialization 仍然试图在 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\v3.5\ 目录中找到 dll，而它应该找到 dll在 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\v3.0。我认为它只考虑这个

```
<TargetFrameworkVersion>v3.5</TargetFrameworkVersion> 
```

来决定它将指向哪个框架。

另一个问题是这个。当我打开我的属性时，目标框架不包括 .NET Framework 3.5。它有 2.0,4,4 客户端配置文件，4.03 和 4.03 客户端配置文件，但没有 3.5。似乎当我删除这条线时

```
<ProjectTypeGuids>{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

然后我可以看到3.5。

最后，我认为这个问题与上述有关。当我运行 nant 时，我收到此错误

1>C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1360,9): 警告MSB3267: 框架程序集的主要参考“System.Runtime.Serialization”不能在当前目标框架内解决。“.NETFramework，版本=v3.5”。要解决此问题，请删除引用“System.Runtime.Serialization”或将您的应用程序重新定位到包含“System.Runtime.Serialization”的框架版本。

发生的事情是我的系统管理员实际上将我的用户名从 hong 更改为 huong 但他/她忘记将我的主目录更改为那个。我已经更改了我的主目录，但似乎问题仍然存在。有人可以帮我解决这个问题。如果没有，我想我将不得不格式化我的电脑。我真的不知道为什么视觉工作室有这么多依赖。

# php - jquery code for replacing words

> ID：13155769
> 
> 赞同：0
> 
> 时间：2012-10-31T10:23:39.080
> 
> 标签：php, javascript, jquery

I met some trouble with my code,

In fact I would like to replace words abreviation by their expressions, but it does not work.

I have done the following code:

```
<script>
    $('#suivi').keyup(function (e) {
        var code = e.which ? e.which : e.keyCode;
        var input = this.value;
        console.log(input);
        <?php
            $rqt = "SELECT * FROM `glossaire` WHERE `id_company` ='".$societe['id']."'";
            $result = mysql_query($rqt);
            while ($data = mysql_fetch_assoc($result)) {
        ?>
                if (input == "<?php echo ($data['libelle']) ; ?>") {
                    this.value = "<?php echo ($data['texte']) ; ?>"
                };
        <?php
            }
        ?>      
   });
</script> 
```

jquery 1.8 is set up on my page.

This script works fine on the following jsfiddle:

[http://jsfiddle.net/3z3sP/1/](http://jsfiddle.net/3z3sP/1/)

But not in my page. However it is the same.

I have no mistakes in the console of javascript.

Any kind of help will be much appreciated.

Kind regards.

SP.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:32:38.670

The jsfiddle works fine for me. I think your code is being executed before the #suivi is found. Try wrapping the script in $(function(){}):

```
<script>

    $(function()
    {

        $('#suivi').keyup(function(e){
        var code = e.which ? e.which : e.keyCode;
        var input = this.value;
        console.log(input);
      <?php $rqt="SELECT * FROM `glossaire` WHERE `id_company` ='".$societe['id']."'";
    $result=mysql_query($rqt);
    while($data=mysql_fetch_assoc($result))
    {?>
        if (input == "<?php echo ($data['libelle']) ; ?>") {
           this.value = "<?php echo ($data['texte']) ; ?>"

        };
     <?php } ?>      
    });

    });

</script> 
```

# c# - 如何从 asp.net 中的子 UserControl 调用父 UserControl 方法？

> ID：13155771
> 
> 赞同：0
> 
> 时间：2012-10-31T10:23:42.153
> 
> 标签：c#, asp.net, user-controls

我必须在子用户控件中使用父用户控件方法的结果。如何在子控件中找到该方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-31T11:01:02.987

用户控件的存在是为了让我们的代码更加可重用，用户控件可以放在任何页面中，有的页面可以有这两个用户控件，有的页面没有，所以不能保证页面有这两个用户控件。在我看来，最好的方法是使用事件。思路是这样的：子用户控件引发一个事件，放置这个用户控件的页面处理这个事件并调用父用户控件的事件，这样你的代码还是可以复用的。

因此，子控件的代码如下

```
public partial class Child : System.Web.UI.UserControl
{
    // here, we declare the event
    public event EventHandler OnChildEventOccurs;

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        // some code ...
        List<string> results = new List<string>();
        results.Add("Item1");
        results.Add("Item2");

        // this code says: when some one is listening this event, raises this and send one List of string as parameters
        if (OnChildEventOccurs != null)
            OnChildEventOccurs(results, null);
    }
} 
```

而页面需要处理这个事件的发生，像这样

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        // the page will listen for when the event occurs in the child
        Child1.OnChildEventOccurs += new EventHandler(Child1_OnChildEventOccurs);
    }

    void Child1_OnChildEventOccurs(object sender, EventArgs e)
    {
        // Here you will be notified when the method occurs in your child control.
        // once you know that the method occurs you can call the method of the parent and pass the parameters received
        Parent1.DoSomethingWhenChildRaisesYourEvent((List<string>)sender);
    }
} 
```

最后是在父控件中执行某些操作的方法。

```
 public void DoSomethingWhenChildRaisesYourEvent(List<string> lstParam)
    {
        foreach (string  item in lstParam)
        {
            // Just show the strings on the screen
            lblResult.Text = lblResult.Text + " " + item;
        }
    } 
```

这样，您的页面充当事件的协调者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:26:43.053

**编辑**

您可以创建这样的方法来获取子控件中的父控件

```
public ofparentcontroltype GetParentControl(Control ctrl)
{
   if(ctrl.Parent is ofparentcontroltype)
    {
     return ((ofparentcontroltype)this.Parent);
    }
  else if  (ctrl.Parent==null)
     return null;

     GetParentControl(ctrl.Parent);
} 
```

调用方法如下

```
ofparentcontroltype parent = GetParentControl(this);
if(parent!=null)
 var data = ((ofparentcontroltype)this.Parent).methodtocall(); 
```

* * *

在用户控件的代码隐藏中做这样的事情

```
if(this.Parent is ofparentcontroltype)
{
 var data = ((ofparentcontroltype)this.Parent).methodtocall();
} 
```

在此处查看示例： [**从子控件访问父控件的方法**](http://www.codeproject.com/Articles/27626/Access-Parent-Control-s-Method-from-a-Child-Contro)

# html - IE7 与 ul 和 li 在 css 表中

> ID：13155780
> 
> 赞同：0
> 
> 时间：2012-10-31T10:24:13.580
> 
> 标签：html, css, html-lists, css-tables

我有一个我制作的 CSS 表，它在除 IE7 之外的所有浏览器上看起来都不错。在 IE7 中，ul 单元格不正确。

链接： [https ://dl.dropbox.com/u/107452929/issue/index.htm](https://dl.dropbox.com/u/107452929/issue/index.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:32:57.543

尝试这个。

```
ul ul{
   *left: 0;
   *margin: 0;
   *padding: 0;
} 
```

如果这不起作用，您可能必须在 ul 中添加负左边距。

添加 * 将仅针对 ie7

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T12:00:29.457

Just add `float: none` and `clear:both` to your class- `likeAndselete`.

This will give you the same look and feel in all the browsers

# php - PHP-如何以算术方式添加字符串和数字值？

> ID：13155783
> 
> 赞同：2
> 
> 时间：2012-10-31T10:24:16.007
> 
> 标签：php

我想知道在一个值为数字而另一个为字符串的情况下，加法运算如何工作例如：

```
echo $j = 1 + "stackoverflow"; 
```

我尝试执行这个表达式，它输出我 1 .. 有人可以解释我为什么不涉及字符串，如果涉及，那么为什么它转换为 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:26:25.753

`stackoverflow`以无数字开头，因此 php 将其设为 0

`1stackoverflow`将是 1，因为它以数字 1 开头

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T10:26:43.613

如果你这样做，PHP 会尝试解析字符串的整数值。在这种情况下`"stackoverflow"`被解析为`0`.

您可以通过使用来亲自查看字符串的整数值`intval()`。

```
intval("stackoverflow"); // = 0
intval("123stackoverflow"); // = 123 
```

玩弄它以适应它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T10:29:37.753

在上述操作中，PHP 将尝试将两个操作数都转换为数字。因此，在这种情况下，“stackoverflow”字符串实际上被转换为数字 - 0。为什么会发生这种情况最好在[本手册页中描述 - 将字符串转换为数字](http://www.php.net/manual/en/language.types.string.php#language.types.string.conversion)。注意

```
$j = 1 + "1stackoverflow" 
```

将产生 2 作为结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T10:28:23.583

因为它尝试将字符串转换为整数，然后将其添加到数字中。`echo $j = 1 + intval("stackoverflow");` 与如果要将字符串连接到数字基本相同，则必须使用连接运算符，即点：`echo $j . "stackoverflow"`

# oracle - 在线创建和访问oracle和db2数据库

> ID：13155788
> 
> 赞同：1
> 
> 时间：2012-10-31T10:24:33.797
> 
> 标签：oracle, db2

我必须创建和访问 oracle 和 db2 数据库。我的本地系统上没有这两个数据库。有人知道有任何网站可以创建和访问这些数据库。我必须使用两个数据库检查我的桌面应用程序，所以请帮助我。我用谷歌搜索了很多，但没有找到任何东西。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:48:08.733

您应该在本地开发您的应用程序，因为它绝对是免费的……</p>

否则看看这个：

[Oracle Application Express](http://apex.oracle.com)

或在亚马逊服务器上： [亚马逊 AWS 免费](http://aws.amazon.com/free/)

# ruby-on-rails-3 - 模块中的载波

> ID：13155789
> 
> 赞同：0
> 
> 时间：2012-10-31T10:24:35.017
> 
> 标签：ruby-on-rails-3, image-processing, carrierwave

这是我在 /app/library/stone.rb 中的模型

```
class Library::Stone < ActiveRecord::Base
   attr_accessible :group, :healing, :life, :logo, :magic, :name, :other, :place,    :structure, :view

   mount_uploader :logo, LogoUploader

   before_save :cap_group

   def cap_group
     self.name = self.name.mb_chars.capitalize.to_s
     self.group = self.name[0]
   end

end 
```

这是上传器 /app/uploaders/logo_uploader.rb

```
class LogoUploader < CarrierWave::Uploader::Base
  storage :file

  def store_dir
     "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  version :thumb do
    process :resize_to_limit => [200, 300]
  end

end 
```

问题是这在控制台中有效，但是当我在浏览器中尝试时，图像没有正确上传。我认为这是因为不知何故

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:52:48.243

尝试查看您的开发日志，并查看它显示的错误。

或者尝试像这样在您的上传器中“模块”RMagick：[https](https://github.com/lccezinha/rails3-twitter-bootstrap/blob/master/app/uploaders/archive_uploader.rb) ://github.com/lccezinha/rails3-twitter-bootstrap/blob/master/app/uploaders/archive_uploader.rb并在您的 Gemfile 中包含

```
gem 'carrierwave'
gem 'rmagick' 
```

并运行捆绑命令

```
bundle install 
```

# oop - DDD：缓存从服务器接收到的聚合对象

> ID：13155793
> 
> 赞同：6
> 
> 时间：2012-10-31T10:24:58.433
> 
> 标签：oop, design-patterns, architecture, domain-driven-design

假设我有一个存储库`(ContactsRepository)`，其方法类似于`getAllContacts(userId)`. 从`(ContactsRepository)`服务器获取所有数据。在第一次调用`getAllContacts(userId)`方法之后，我想缓存这些数据。我的问题是我应该在哪里实现缓存机制，同样`(ContactsRepository)`当我再次调用`getAllContacts(userId)`方法时，存储库会返回我的缓存数据，或者我需要将数据放到另一个地方（可能是存储库）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:40:01.680

您可以使用 Repository 从缓存或数据库中获取数据。如果您的 Repository 类具有更新方法，您也可以有效地使缓存项无效。

因此，您可以在存储库中封装对缓存的访问： [http ://martinfowler.com/eaaCatalog/repository.html](http://martinfowler.com/eaaCatalog/repository.html)

为存储库实现缓存的另一个示例：http: [//ardalis.com/building-a-cachedrepository-via-strategy-pattern](http://ardalis.com/building-a-cachedrepository-via-strategy-pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T17:18:29.263

您可以缓存它，但如果您使用多个存储库（例如在多台机器上）执行域逻辑，请不要忘记[缓存一致性。](http://en.wikipedia.org/wiki/Cache_coherence)

# python - 如何测试django项目

> ID：13155796
> 
> 赞同：5
> 
> 时间：2012-10-31T10:25:08.157
> 
> 标签：python, django

我写了一些测试用例来测试我的 django 项目，当我在 jenkins 中运行它们时，它总是创建一个**默认数据库**，我想用我自己的数据库测试我的项目，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:15:06.953

Django 总是希望有一个**默认**数据库，如DATABASES 设置的[文档中所述。](https://docs.djangoproject.com/en/dev/ref/settings/#databases)

**默认**标签只是您引用数据库的名称，而不是数据库本身的名称。在上面的文档示例中，即使数据库句柄是**default**，数据库本身的名称也是**mydatabase**。

当您进行测试时，通常使用与生产数据库不同的数据库，为此您可以使用数据库的 TEST_NAME 规范。以下 settings.py 显示了生产和单元测试期间使用的数据库的名称。

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': 'mydatabase',
        'TEST_NAME': 'mytestdatabase'
    }
} 
```

以下链接提供了一些有关测试的有用信息。 [https://docs.djangoproject.com/en/dev/topics/testing/](https://docs.djangoproject.com/en/dev/topics/testing/)

# android - WebView，在 ICS 中显示为空白

> ID：13155800
> 
> 赞同：3
> 
> 时间：2012-10-31T10:25:21.060
> 
> 标签：android, android-webview, android-4.0-ice-cream-sandwich

我正在将`HTML`保存在`assets`文件夹中的本地文档加载到`WebView`. 它在 2.3 设备中显示良好，但在 ICS + 设备中显示空白屏幕。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T10:34:21.713

尝试使用此代码

```
webView.getSettings().setPluginsEnabled(true);
webView.getSettings().setAllowFileAccess(true); 
```

据我所知，flash url 在 ICS 中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:41:33.753

这段代码应该可以工作

```
webView.getSettings().setPluginsEnabled(true);
webView.getSettings().setAllowFileAccess(true);
webView.loadUrl(url);
weevils.setJavascriptEnabled(true); 
```

还要检查你的 manifest.xml 中声明的互联网权限并看看这个非常相似的线程： [Android Webview not rendering correct on ICS 4.0 +](https://stackoverflow.com/questions/13154268/android-webview-not-rendering-correctly-on-ics-4-0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:44:33.983

如果上述答案不能解决问题，请尝试添加此代码

```
webView.getSettings().setBuiltInZoomControls(false); 
```

不过，我对此不太确定。

# excel - 如何将图片从工作表传输（剪切和粘贴）到另一个工作表

> ID：13155802
> 
> 赞同：1
> 
> 时间：2012-10-31T10:25:25.670
> 
> 标签：excel, excel-2007, vba

我将图片临时放置并隐藏在 Sheet1 中。我选择这种方法是因为我不希望将图片本地存储在我的驱动器上。

然后，我有一个带有按钮的无模式用户窗体，该按钮应该将图片从 Sheet1 传输到当前的 ActiveSheet。

到目前为止，我有以下代码在关闭工作簿之前隐藏图片：（'On Error' 在那里，因为根据用户的不同，图片不会总是出现在 Sheet1 中）

```
Private Sub Workbook_BeforeClose(Cancel As Boolean)
    Dim tempWs As Variant
    Call HidePic
End Sub

Private Sub HidePic()
    Dim tempWs As Variant
    On Error Resume Next
    For Each tempWs In ThisWorkbook.Worksheets
        tempWs.Pictures.Visible = False
    Next
End Sub 
```

接下来，以下代码有效，但仅适用于 Sheet1（在本例中，图片存储在其中）。当我切换到另一张纸然后点击用户窗体上的按钮时；存储在“A1”中的任何数据都被删除，但没有放置/粘贴图片。

```
Private Sub Pic_Click()
    Dim tempWs As Variant
    On Error Resume Next
    For Each tempWs In ThisWorkbook.Worksheets
        tempWs.Pictures.Visible = True
        tempWs.Pictures.Select
    Next

    Selection.Cut
    ActiveSheet.Range("A1").Activate
    ActiveSheet.Paste
End Sub 
```

附加信息：我只使用“Select/Selection.Cut”而不是更短（更快？）“.Cut”，因为出于某种原因，仅使用 Cut 不会将图片放在“A1”中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:42:36.160

如果你在第一张纸上的图片被称为`Picture 1`你可以试试这个

```
Private Sub Pic_Click()
Dim objPic As Shape
On Error Resume Next
Set objPic = Sheets(1).Shapes("Picture 1")
On Error GoTo 0
If objPic Is Nothing Then Exit Sub
objPic.Copy
ActiveSheet.Range("a1").PasteSpecial
objPic.Delete
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:41:11.770

您正在使用 For Each tempWs In ThisWorkbook.Worksheets 构造遍历所有工作表。这应该工作：

```
Dim TempSht as Worksheet
set tempSht = Thisworkbook.sheets(1)
tempsht.Pictures.Visible = True
tempsht.Pictures.Select 
```

# sql - 查询以内联或逗号分隔的数据获取数据

> ID：13155807
> 
> 赞同：0
> 
> 时间：2012-10-31T10:25:40.087
> 
> 标签：sql, ms-access

> **可能重复：**
> [在 Access 2007 中合并行](https://stackoverflow.com/questions/92698/combine-rows-in-access-2007)

我在 MS Access 数据库中有一个名为“emp_orders”的表

数据如下所示，

```
emp_no  order_no 
1       123
1       156
1       264
2       234
2       354
2       268
2       182 
```

现在我需要一个选择查询来获取如下指定的数据。

```
emp_no  orders
1       123,156,264
2       234,354,268,182 
```

请帮我解决这个问题。

# android - 当我使用操作栏拍摄快照时，错过了位图的底部。安卓

> ID：13155809
> 
> 赞同：0
> 
> 时间：2012-10-31T10:25:51.840
> 
> 标签：android, bitmap, views, android-actionbar, snapshot

我在拍摄屏幕**快照时遇到问题。**位图绘制*除视图底部*之外的所有内容。我附上了一些布局代码以及来自快照调用的代码。

该活动还有一个带有**TabListeners的****操作栏**。所以它在操作栏中有 3 个选项卡和几个按钮（它们显示在快照上。如果我可以在快照中删除它们会很好，因为我根本不需要它们^^U 但它不是重要的事情）。

 ****快照：**

```
 private void snapShot() {
        Log.d("On snapShot","At beggining");
        Bitmap bitmap;
        getWindow().getDecorView().setDrawingCacheEnabled(true);    
        try{
            bitmap = Bitmap.createBitmap(getWindow().getDecorView().getDrawingCache());
        }catch (IllegalStateException e){
            bitmap = null;
        }
        try{    
            Log.d("On snapShot", "inside Try");
            File root = Environment.getExternalStorageDirectory();              
            if (root.canWrite()){
                pic = new File(root,"pic.png");
                FileOutputStream out = new FileOutputStream(pic); 
                bitmap.compress(CompressFormat.PNG, 100, out); 
                out.flush(); 
                out.close();
            }
        }catch(IOException e) { 
            Log.e("BROKEN", "Could not write file " + e.getMessage());
        }
        getWindow().getDecorView().setDrawingCacheEnabled(false);       
     } 
```

**布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout 
        android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:orientation="horizontal" 
  android:layout_weight="20"
  >
  <com.example.daemon.views.CaptionView
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:id = "@+id/legendView"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content">
  </com.example.daemon.views.CaptionView>

        <View 
            android:id="@+id/lineSeparation"
            android:background="#F000"
            android:layout_marginTop="1dp"
            android:layout_height="1dp"
            android:layout_width="match_parent"
         /> 
    </LinearLayout>
    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1">

        <com.example.daemon.views.ChartView
      xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/viewChart"
          android:layout_width="fill_parent"
      android:layout_height="fill_parent">
  </com.example.daemon.views.ChartView>
    </LinearLayout>
</LinearLayout> 
```

添加更多代码，在其中创建操作栏和选项卡。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);    // Set the application works only on Landscape orientation.
    actionBar = getActionBar();                                     // Creates the action bar.
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);                
    Log.i(TAG, "On create");
    String label1 = "one day";              
    Tab tab = actionBar.newTab();           // Creates a tab
    tab.setText(label1);                

    // Links the tab created with an existing Fragment 
    TabListener<Tab1Fragment> tl = new TabListener<Tab1Fragment>(this, label1, Tab1Fragment.class);     
    tab.setTabListener(tl);                 // Makes the tab  respond the touch events.
    actionBar.addTab(tab);                  // Add the tab to the action bar. 
```

当我推送快照时的PNG： ![在此处输入图像描述](../Images/5fd5123587c931e9542c07430658f215.png)

它应该如何出现，来自我的相机的图片： ![在此处输入图像描述](../Images/5d8ab97e2c2e3531c2e6f8e84ce8bed7.png)

问题（我认为）是当创建位图时，它的最大高度为 732（与视图相同）但它开始从顶部捕获视图（包括不在视图上的操作栏）所以它只能绘制前 732 行。关键是，如果我说在操作栏之后开始，则会出现错误，因为“y + height cannot be > bitmap.height”所以......我该怎么办？

十分感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T10:31:47.800

我找到了解决方案。很难找到它，但它很容易。我只是在第一个 LinearLayout （包含所有其他内容的那个）中添加一个 id。然后我可以创建通过 id 查找视图的位图。

在我添加的布局中：`android:id="@+id/mainLayout"` 然后在活动中：

```
int id = R.id.mainLayout;
View view = findViewById(id);                   
view.setDrawingCacheEnabled(true);
Bitmap bitmap = Bitmap.createBitmap(getWindow().findViewById(id).getDrawingCache()); 
```

感谢您的支持，我希望这对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T14:04:03.960

也许设置 BitMap 的大小可能会解决您的问题。

```
DisplayMetrics metrics = context.getResources().getDisplayMetrics();
int width = metrics.widthPixels;
int height = metrics.heightPixels;
bitmap = Bitmap.createBitmap(getWindow().getDecorView().getDrawingCache(), 0, 0, width, height); 
```**

# python - 具有子关系条件的 sqlalchemy 查询

> ID：13155810
> 
> 赞同：0
> 
> 时间：2012-10-31T10:25:55.773
> 
> 标签：python, sql, postgresql, sqlalchemy, flask-sqlalchemy

我在 sqlalchemy 中有以下模型：

```
class Magazine(db.Model):

    id= db.Column(db.Integer, primary_key=True)
    name= db.Column(db.String(50))
    issues= db.relationship('Issue', backref='magazine', lazy='dynamic')

class Issue(db.Model):
    id= db.Column(db.Integer, primary_key=True)
    magazine_id= db.Column(db.Integer, db.ForeignKey('magazine.id'))
    date= db.Column(db.Date) 
```

Magazines 包含杂志的名称，issues 包含每个杂志的问题。这些是周刊，因此该`date`领域`Issue`是发行日。

我正在尝试建立一个查询来选择在特定日期没有问题的所有杂志。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:48:12.833

由于这被标记为`sql`，我认为您可以使用正确的 SQL，而不是 SQLAlchemy 使用的任何东西。无论如何，这应该是关于如何在 SQLAlchemy 中表达相同事物的提示。

```
SELECT *
FROM magazine m
WHERE NOT EXISTS (
  SELECT 1 FROM issue i WHERE i.magazine_id = m.id AND i."date" = $1
); 
```

`$1`是日期参数；在 Python 中，它可能是`%s`或者`?`......无论您的语言的参数占位符是什么。

顺便说一句，`"date"`对于一列来说，这是一个糟糕的名称。它必须在任何地方都用双引号引起来，因为它是一个类型名和一个 SQL 保留字。

# javascript - 砌体 - 当物品的高度发生变化时自动调整

> ID：13155813
> 
> 赞同：5
> 
> 时间：2012-10-31T10:26:12.573
> 
> 标签：javascript, jquery, layout, height, jquery-masonry

我在我的应用程序中使用砖石。一切工作正常，除非项目的高度发生变化（如手风琴）砌体没有调整布局。我能做些什么来修复它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T10:33:25.223

每当调整项目大小时，您需要告诉 masonary 重新布局所有内容：

```
$('.ui-accordion').bind('accordionchange', function(event, ui) {
    $('#container').masonry();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-10T04:42:20.027

```
$grid.on( 'shown.bs.collapse hidden.bs.collapse' , function() {
    $grid.masonry();
}); 
```

# maven-3 - 在 Maven 中拒绝访问

> ID：13155814
> 
> 赞同：3
> 
> 时间：2012-10-31T10:26:13.307
> 
> 标签：maven-3

我对 Maven 有以下问题：

当我表演时`mvn jetty:run`，我得到：

```
Caused by: org.apache.maven.wagon.authorization.AuthorizationException: Access denied to: http://10.254.107.3:8081/artifactory/plugins-snapshot/org/mortbay/jetty/jsp-api/2.1-6.0.1/jsp-api-2.1-6.0.1.pom, ReasonPhrase:Forbidden.
        at org.apache.maven.wagon.shared.http4.AbstractHttpClientWagon.fillInputData(AbstractHttpClientWagon.java:835)
        at org.apache.maven.wagon.StreamWagon.getInputStream(StreamWagon.java:116)
        at org.apache.maven.wagon.StreamWagon.getIfNewer(StreamWagon.java:88)
        at org.apache.maven.wagon.StreamWagon.get(StreamWagon.java:61)
        at org.sonatype.aether.connector.wagon.WagonRepositoryConnector$GetTask.run(WagonRepositoryConnector.java:601) 
```

我们发现我的 MVN 客户端正在使用监视用户进行连接（`clean install`根据日志，它有时也会这样做，但通常这不是阻止程序）。

我在我的`settings.xml`：

```
 <servers>
    <server>
      <id>releases</id>
      <username>monitor</username>
      <password>...</password>
    </server>
    <server>
      <id>snapshots</id>
      <username>monitor</username>
      <password>...</password>
    </server>
  </servers> 
```

所以我认为（但我不是 Maven 大师），这不应该用于`plugins-snapshot`.

AFAIK 我的配置对于团队中的所有人员都是相同的，而我是唯一一个遇到此类问题的人。事实上，我不知道为什么会这样。

我定期切换 Maven 2 和 Maven 3，也许这就是原因。我该怎么做？我使用的是 Windows (Win7)，当我需要切换时，我只需更改`M2_HOME`环境属性以更正 Maven 主页，并将`settings.xml`Maven 2 替换为我的用户主页中的 Maven 3，反之亦然。My `settings.xml`for Maven 2 不包含`<servers>`部分。

任何关于如何跟踪问题所在的想法都值得赞赏。

# ruby-on-rails - 使用 MIME-Types 呈现为 GeoJSON（或选择性地呈现为 WKT/WKB）

> ID：13155815
> 
> 赞同：7
> 
> 时间：2012-10-31T10:26:13.567
> 
> 标签：ruby-on-rails, geojson, wkt

我有 Rails`PostGIS`和`activerecord-postgis-adapter`运行`rgeo-geojson`。

目前，我可以使用默认的“object.json”URL 来获取 WKT/WKB 格式的 JSON 字符串。它看起来像这样：

```
{"description":null,"id":1,"position":"POINT (10.0 47.0)"} 
```

但是现在我想要一个自定义的 MIME-Type，所以我可以调用“object.geojson”来获取 GeoJSON 格式，如下所示：

```
{"description":null,"id":1,"position":{"type":"Point","coordinates": [10.0, 47.0]}} 
```

我发现将 JSON 编码器设置为 GeoJSON 的唯一方法是使用`RGeo::ActiveRecord::GeometryMixin.set_json_generator(:geojson)`和全局设置它`RGeo::ActiveRecord::GeometryMixin.set_json_generator(:wkt)`。**但我只想在本地设置，这可能吗？**

我已经添加`Mime::Type.register "application/json", :geojson, %w( text/x-json application/jsonrequest )`了`mime_types.rb`它并且工作正常：我可以在我的控制器中使用此代码：

```
respond_to do |format|
  format.json { render json: @object }
  format.geojson { render text: "test" }
end 
```

我希望有人能告诉我如何在不将全局 JSON 渲染器设置为`:geojson`. ！？

**编辑：**

我的对象在 Rails 控制台中看起来像这样：

`#<Anchor id: 1, description: nil, position: #<RGeo::Geos::CAPIPointImpl:0x3fc93970aac0 "POINT (10.0 47.0)">>`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T02:09:56.607

您可以将这样的工厂用于特定的`@object`

```
factory = RGeo::GeoJSON::EntityFactory.instance

feature = factory.feature(@object.position, nil, { desc: @object.description}) 
```

并对其进行编码：

```
RGeo::GeoJSON.encode feature 
```

它应该输出如下内容：

```
{
  "type" => "Feature",
  "geometry" => {
    "type" => "Point",
    "coordinates"=>[1.0, 1.0]
  },
  "properties" => {
    "description" => "something"
  }
} 
```

或一组功能：

```
RGeo::GeoJSON.encode factory.feature_collection(features) 
```

给予：

```
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      # the rest of the feature...
    },
    {
      "type": "Feature",
      # another feature...
    }
} 
```

# cordova - 标题栏中的按钮溢出jquerymobile phonegap？

> ID：13155820
> 
> 赞同：2
> 
> 时间：2012-10-31T10:26:33.587
> 
> 标签：cordova, jquery-mobile

我正在使用 jquerymobile 和 phonegap 为 android 创建一个移动应用程序。我在标题上有几个按钮。仍然标题看起来很薄，按钮跳出标题栏。如何使按钮适合标题栏并使标题栏看起来更大？

另外，如何使按钮图标出现在应用程序中？

谢谢。![在此处输入图像描述](../Images/cc00097490ade75ce6aadbd52dc912d6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:58:49.280

你可以尝试这样的事情

```
<button type="button" class="ui-btn-left"
            data-inline="true" data-mini="true" data-theme="b">Button name</button> 
```

在页面的标题部分。我没有在 android 上测试，但在 iPhone 上可以正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:38:54.147

似乎只需添加`overflow: auto;`到标题包装器即可解决问题。

# extjs4.1 - 如何在 extjs 中的 store 中插入值

> ID：13155827
> 
> 赞同：5
> 
> 时间：2012-10-31T10:26:59.620
> 
> 标签：extjs4.1

我正在 extjs 中实施项目。我对 extjs 很陌生。我用两个文本字段问题和选项创建了视图，还创建了两个按钮作为确定和取消。

我的查看代码：

```
Ext.create('Ext.form.Panel', {
    title: 'Question-option',
    width: 300,
    bodyPadding: 10,
    renderTo: Ext.getBody(),        
    items: [{
        xtype: 'textfield',
        name: 'Question',
        fieldLabel: 'Question',
        allowBlank: false  // requires a non-empty value
    }, {
        xtype: 'textfield',
        name: 'Option',
        fieldLabel: 'Option',
        vtype: 'Option'  // requires value to be a valid email address format
    },
    {xtype: 'button', text: 'Ok'}, 
    {xtype: 'button', text: 'Cancel'}
 ]
}); 
```

在确定按钮上单击我想将这些文本字段数据添加到存储中。

那么您能否建议我如何编写 buttonclick 事件以将所有这些文本字段数据添加到存储中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T14:08:37.873

以这家店为例：

```
Ext.define ('model', {
  extend: 'Ext.data.Model' ,
  fields: ['Question', 'Option']
});

var store = Ext.create ('Ext.data.Store', {
  model: 'model'
});

// Handler called on button click event
function handler (button) {
  var form = button.up('form').getForm ();

  // Validate the form
  if (form.isValid ()) {
    var values = form.getFieldValues ();
    store.add ({
      Question: values.Question ,
      Option: values.Option
    });
  }
  else {} // do something else here
} 
```

您获取表单数据，然后将这些数据添加到存储中。

恰兹

# android - GoogleAnalyticsV2 和 Proguard

> ID：13155829
> 
> 赞同：8
> 
> 时间：2012-10-31T10:27:03.647
> 
> 标签：android, google-analytics, proguard

我在我的项目中使用 Google Analytics V2 库。

当我从 Eclipse 导出签名的应用程序包时，我在控制台中得到以下输出：

```
Proguard returned with error code 1\. See console
  Warning: com.google.analytics.tracking.android.FutureApis: can't find referenced method 'boolean setReadable(boolean,boolean)' in class java.io.File
  Warning: com.google.analytics.tracking.android.FutureApis: can't find referenced method 'boolean setWritable(boolean,boolean)' in class java.io.File
        You should check if you need to specify additional program jars.
  Warning: there were 2 unresolved references to program class members.
           Your input classes appear to be inconsistent.
           You may need to recompile them and try again.
           Alternatively, you may have to specify the option 
           '-dontskipnonpubliclibraryclassmembers'.
  java.io.IOException: Please correct the above warnings first.
    at proguard.Initializer.execute(Initializer.java:321)
    at proguard.ProGuard.initialize(ProGuard.java:211)
    at proguard.ProGuard.execute(ProGuard.java:86)
    at proguard.ProGuard.main(ProGuard.java:492) 
```

这是我的 proguard.cfg

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-dontwarn android.support.**
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class com.android.vending.licensing.ILicensingService
-keep public class * extends android.support.v4.app.Fragment
-keep public class * extends android.app.Fragment

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
}

-keepclassmembers class **.R$* {
  public static <fields>;
}

-keep class com.flurry.** { *; }
-dontwarn com.flurry.** 
```

如果我添加`-dontwarn com.google.analytics.tracking.android.FutureApis`到配置，那么我得到

```
 at proguard.ProGuard.main(ProGuard.java:492)
   Proguard returned with error code 1\. See console
         You should check if you need to specify additional program jars.
   Unexpected error while evaluating instruction:
     Class       = [android/support/v4/view/AccessibilityDelegateCompat$AccessibilityDelegateJellyBeanImpl]
     Method      = [newAccessiblityDelegateBridge(Landroid/support/v4/view/AccessibilityDelegateCompat;)Ljava/lang/Object;]
     Instruction = [18] areturn
     Exception   = [java.lang.IllegalArgumentException] (Can't find any super classes of [android/support/v4/view/AccessibilityDelegateCompatIcs$1] (not even immediate super class [android/view/View$AccessibilityDelegate]))
   Unexpected error while performing partial evaluation:
     Class       = [android/support/v4/view/AccessibilityDelegateCompat$AccessibilityDelegateJellyBeanImpl]
     Method      = [newAccessiblityDelegateBridge(Landroid/support/v4/view/AccessibilityDelegateCompat;)Ljava/lang/Object;]
     Exception   = [java.lang.IllegalArgumentException] (Can't find any super classes of [android/support/v4/view/AccessibilityDelegateCompatIcs$1] (not even immediate super class [android/view/View$AccessibilityDelegate]))
   java.lang.IllegalArgumentException: Can't find any super classes of [android/support/v4/view/AccessibilityDelegateCompatIcs$1] (not even immediate super class [android/view/View$AccessibilityDelegate])
    at proguard.evaluation.value.ReferenceValue.generalize(ReferenceValue.java:287)
    at proguard.evaluation.value.IdentifiedReferenceValue.generalize(IdentifiedReferenceValue.java:65)
    at proguard.evaluation.value.ReferenceValue.generalize(ReferenceValue.java:481)
    at proguard.optimize.info.MethodOptimizationInfo.generalizeReturnValue(MethodOptimizationInfo.java:247)
    at proguard.optimize.evaluation.StoringInvocationUnit.generalizeMethodReturnValue(StoringInvocationUnit.java:195)
    at proguard.optimize.evaluation.StoringInvocationUnit.setMethodReturnValue(StoringInvocationUnit.java:126)
    at proguard.evaluation.BasicInvocationUnit.exitMethod(BasicInvocationUnit.java:134)
    at proguard.evaluation.Processor.visitSimpleInstruction(Processor.java:514)
    at proguard.classfile.instruction.SimpleInstruction.accept(SimpleInstruction.java:218)
    at proguard.optimize.evaluation.PartialEvaluator.evaluateSingleInstructionBlock(PartialEvaluator.java:753)
    at proguard.optimize.evaluation.PartialEvaluator.evaluateInstructionBlock(PartialEvaluator.java:587)
    at proguard.optimize.evaluation.PartialEvaluator.evaluateInstructionBlockAndExceptionHandlers(PartialEvaluator.java:560)
    at proguard.optimize.evaluation.PartialEvaluator.visitCodeAttribute0(PartialEvaluator.java:264)
    at proguard.optimize.evaluation.PartialEvaluator.visitCodeAttribute(PartialEvaluator.java:181)
    at proguard.classfile.attribute.CodeAttribute.accept(CodeAttribute.java:101)
    at proguard.classfile.ProgramMethod.attributesAccept(ProgramMethod.java:79)
    at proguard.classfile.attribute.visitor.AllAttributeVisitor.visitProgramMember(AllAttributeVisitor.java:95)
    at proguard.classfile.util.SimplifiedVisitor.visitProgramMethod(SimplifiedVisitor.java:91)
    at proguard.classfile.ProgramMethod.accept(ProgramMethod.java:71)
    at proguard.classfile.ProgramClass.methodsAccept(ProgramClass.java:504)
    at proguard.classfile.visitor.AllMethodVisitor.visitProgramClass(AllMethodVisitor.java:47)
    at proguard.classfile.ProgramClass.accept(ProgramClass.java:346)
    at proguard.classfile.ClassPool.classesAccept(ClassPool.java:116)
    at proguard.optimize.Optimizer.execute(Optimizer.java:372)
    at proguard.ProGuard.optimize(ProGuard.java:306)
    at proguard.ProGuard.execute(ProGuard.java:115)
    at proguard.ProGuard.main(ProGuard.java:492) 
```

有什么提示吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-06T12:03:32.413

我也遇到过这个问题。由于 GA 文档中还没有官方的解决方案，所以我制定了这组规则：

```
-keep class com.google.android.gms.analytics.**
-keep class com.google.analytics.tracking.**
-dontwarn com.google.android.gms.analytics.**
-dontwarn com.google.analytics.tracking.** 
```

这也跳过了混淆，但这对于外部库来说应该不是问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-07T17:33:40.737

最初的警告表明 FutureApis 调用 File#setReadable(boolean,boolean)，它在您为构建指定的目标平台上不存在（显然是 android-8 或更早版本）。ProGuard 可以忽略它，但如果该代码曾经在那些旧平台上执行，那将是一个问题。Google Analytics 的文档指定 android-7 就足够了，所以大概忽略它就可以了。

意外错误表明 V4 支持类 AccessibilityDelegateCompatIcs$1 扩展了 Android 类 View$AccessibilityDelegate，该类在您为构建指定的目标平台（android-13 或更早版本）上不存在。在这种情况下，ProGuard 确实需要该类来正确处理代码。如果类层次结构不完整，输出将是一团糟。

您可以通过在编译发布版本时在 project.properties 中指定更新的构建目标来解决这两个问题。缺少的类和方法将出现在相应的 android.jar 中，因此 ProGuard 将拥有它需要的所有信息。由于这些类只是运行时库类，用于编译/优化/混淆，它们不会影响输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T09:31:29.137

我遇到了同样的问题——在为发布创建 ank 时我能够抑制错误——但是当它落入应用程序时，在那些发誓混淆器的类所在的地方。目前我还没有解决这个问题。有趣的是，在通过 Eclipse 运行应用程序时处于 debage 模式 - 它运行良好。

# html - HTML 默认字体

> ID：13155830
> 
> 赞同：0
> 
> 时间：2012-10-31T10:27:03.847
> 
> 标签：html, css

我有一个网站，我将所有文本的字体设置为“Arial Narrow”。现在我试图在另一台计算机上查看我的网站，但文本的字体是新罗马的。我不知道似乎是什么问题，默认网络字体中不包含“Arial Narrow”字体吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:28:48.873

不，Arial Narrow**不是**免费字体，如果您想在您的网站上使用它，必须购买/获得许可。你可以在[这里](http://www.fonts.com/font/monotype-imaging/arial)购买。

如果您想要免费使用的常见 Web 字体列表，请[在此处查找](http://en.wikipedia.org/wiki/Core_fonts_for_the_Web)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:34:03.133

Arial Narrow 不是网络安全字体。此外，为了可读性，我想说正文不应该是 arial 狭窄的。我会推荐如下组合

16pt+ Arial（适合标题等...） 16px- Tahoma（易于阅读正文 - 并且节省空间） 12px- Vardana（易于阅读非常小的文本）

或者只是`sans-serif`用作正文的字体，由用户选择，并使用与网站风格相匹配的谷歌网络字体。

nb 还值得记住的是，arial 是一种丑陋、粗糙的字体，被设计为 helvetica 的免费版本：[http ://www.ms-studio.com/articles.html](http://www.ms-studio.com/articles.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:28:18.963

没有 arial 是，但 arial narrow 不是字体系列，您将不得不使用 css 更改字母间距和字体粗细，即使那样我也不知道如果不尝试它在 arial 中会是什么样子，但它是一个想法，没有看到我的底部段落

例如：

```
.font{
    font-family: "arial";
    letter-spacing:-1px; /* adjust to necessary */
} 
```

尝试[http://www.dafont.com/](http://www.dafont.com/)或[http://www.fontsquirrel.com/](http://www.fontsquirrel.com/)为您的字体

# mysql - 从/向 phpMyAdmin 导出/导入数据库 - 字符编码问题

> ID：13155833
> 
> 赞同：2
> 
> 时间：2012-10-31T10:27:31.027
> 
> 标签：mysql, character-encoding, import, phpmyadmin, export

我有一个数据库，我想导出并导入到另一台服务器上的另一个数据库，但是在我导入它之后，我遇到了字符编码问题，即在某些情况下，html 中有空格，会出现一个黑色菱形里面有个问号。

几个月前我完成了导出，所以不记得我是通过 phpMyAdmin 导入数据库还是使用 mysqldump！我今天要重新导入它，想知道导出和导入的最佳方式。网站上的 HTML 标头为 utf-8，每个数据库表的排序规则设置为 latin1_swedish_ci，类型为 MyISAM。

我从中导出的 Web 服务器具有以下设置：

MySQL 字符集：UTF-8 Unicode (utf8)

Apache/2.2.12 (Ubuntu) MySQL客户端版本：5.1.37 PHP扩展：mysqli

PhpMyAdmin 版本信息：3.2.2.1deb1

我要导入的 Web 服务器具有以下设置：

MySQL 字符集：UTF-8 Unicode (utf8)

Apache MySQL 客户端版本：5.5.24 PHP 扩展：mysqli

phpMyAdmin 版本信息：3.4.10.1deb1

如果有人可以推荐导出/导入的最佳方法，并在可能的情况下解释字符编码问题背后的原因，我将不胜感激。

谢谢

# asp.net-mvc - 选择值列表项的下拉列表可能吗？

> ID：13155836
> 
> 赞同：0
> 
> 时间：2012-10-31T10:27:44.003
> 
> 标签：asp.net-mvc

我目前正在使用 ASP.NET MVC 4，并且正在尝试在这里做一些特别的事情。

这是我目前用于下拉列表的代码：

```
@Html.DropDownListFor(m => m.SourceList, new SelectList(Model.SourceList, "Id", "Name", new { id = "SourceList" })) 
```

现在这行得通，但我在这里做的事情很愚蠢。在我的后端，我再次查询以从我刚刚选择的 id 中获取整个模型。

我需要的不是所选模型的Id，而是整个模型。有没有办法做到这一点？

我当前的 JQuery 回调：

```
$.ajax({
            url: '@Url.Action("SetLicensesAfterSourceChange", "Permission")',
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json;',
            data: JSON.stringify({ "Id" : selectedStartSourceId, "sourceList" : jsonSourceList }),
            success: function (result) {
                //Do stuff here
            }
        }); 
```

我想能够做什么：

```
$.ajax({
            url: '@Url.Action("SetLicensesAfterSourceChange", "Permission")',
            type: 'POST',
            dataType: 'json',
            contentType: 'application/json;',
            data: "selectedModel" = modelFromDropDownList,
            success: function (result) {
                //Do stuff here
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:54:03.213

这可能有点牵强，但您可以创建整个源对象列表的 Javascript 数组表示，并使用 jQuery 和简单的 html 选择（带有选项的 id 和名称）从数组中检索项目。

```
<script>
var items = [ 
{ 
   name = "een",
   value = "1",
   propertyX = "hallo"
},
{ 
   name = "twee",
   value = "2",
   propertyX = "wereld"
}
];

$("#ddlselect").change(function(e) { 
  e.preventDefault();

  var selectedOptionVal = $(this).val();

  var found = null;
  foreach (item in items)
  {
     if (!found && item.value == selectedOptionVal)
        found = item;
  }

  // use found if set
  if (found)
  {
  }
});

</script>

<select id="ddlselect">
  <option value="">-- kies --</option>
  <option value="1">een</option>
  <option value="2">twee</option>
</select> 
```

# asp.net-mvc-3 - 带有神奇独角兽的 ASP.NET MVC 自定义错误页面

> ID：13155837
> 
> 赞同：5
> 
> 时间：2012-10-31T10:27:52.233
> 
> 标签：asp.net-mvc-3, http-status-code-404, custom-error-pages

[我的问题是关于 Pure.Kromes 对这篇文章的](https://stackoverflow.com/questions/619895/how-can-i-properly-handle-404-in-asp-net-mvc)回答。我尝试使用他的方法实现我的页面的自定义错误消息，但有些问题我无法完全解释。

a) 当我通过输入无效 URL（例如 localhost:3001/NonexistantPage）引发 404 错误时，它默认为我的错误控制器的 ServerError() 操作，即使它应该转到 NotFound()。这是我的错误控制器：

```
    公共类 ErrorController : 控制器
    {
        公共 ActionResult NotFound()
        {
            Response.TrySkipIisCustomErrors = true;
            Response.StatusCode = (int)HttpStatusCode.NotFound;
            var viewModel = new ErrorViewModel()
            {
                ServerException = Server.GetLastError(),
                HTTPStatusCode = Response.StatusCode
            };
            返回视图（视图模型）；
        }

        公共 ActionResult ServerError()
        {
            Response.TrySkipIisCustomErrors = true;
            Response.StatusCode = (int)HttpStatusCode.InternalServerError;

            var viewModel = new ErrorViewModel()
            {
                ServerException = Server.GetLastError(),
                HTTPStatusCode = Response.StatusCode
            };
            返回视图（视图模型）；
        }
    }

```

我在 Global.asax.cs 中的错误路线：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" });

        routes.MapRoute(
            name: "Error - 404",
            url: "NotFound",
            defaults: new { controller = "Error", action = "NotFound" }
            );

        routes.MapRoute(
            name: "Error - 500",
            url: "ServerError",
            defaults: new { controller = "Error", action = "ServerError" }
            ); 
```

还有我的 web.config 设置：

```
<system.web>
    <customErrors mode="On" redirectMode="ResponseRewrite" defaultRedirect="/ServerError">
    <error statusCode="404" redirect="/NotFound" />
</customErrors>
...
</system.web>

<system.webServer>
    <httpErrors errorMode="Custom" existingResponse="Replace">
      <remove statusCode="404" subStatusCode="-1" />
      <error statusCode="404" path="/NotFound" responseMode="ExecuteURL" />
      <remove statusCode="500" subStatusCode="-1" />
      <error statusCode="500" path="/ServerError" responseMode="ExecuteURL" />
</httpErrors>
... 
```

错误视图位于 /Views/Error/ 作为 NotFound.cshtml 和 ServerError.cshtml。

b) 一件有趣的事情是，当发生服务器错误时，它实际上会显示我定义的服务器错误视图，但它也会输出默认错误消息，并指出找不到错误页面。

[这是它的样子：](https://i.stack.imgur.com/pAL12.jpg)

您对我如何解决这两个问题有什么建议吗？我真的很喜欢 Pure.Kromes 实现这些错误消息的方法，但如果有更好的方法来实现这一点，请毫不犹豫地告诉我。

谢谢！

**编辑：** 我可以通过访问 /Error/NotFound 或 Error/ServerError 通过 ErrorController 直接导航到我的视图。

视图本身只包含一些文本，没有标记或任何东西。

正如我所说，它实际上以某种方式工作，而不是我想要的工作方式。web.config 中的重定向似乎存在问题，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:02:02.033

当您有更复杂的路线并且有多个分段时，该设置还有一个问题。

```
http://localhost:2902/dsad/dadasdmasda/ddadad/dadads/ddadad/dadadadad/ 
```

我收到服务器错误->

```
Sorry, an error occurred while processing your request.

Exception: An error occured while trying to Render the custom error view which you provided, for this HttpStatusCode. ViewPath: ~/Views/Error/NotFound.cshtml; Message: The RouteData must contain an item named 'controller' with a non-empty string value.
Source: 
```

我的解决方案是在默认路由之后添加额外的路由

```
 routes.MapRoute(
            "Default Catch all 404",
            "{controller}/{action}/{*catchall}",
            new { controller = "Error", action = "NotFound" }
        ); 
```

希望它可以帮助某人:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:33:13.093

我让它工作。一开始我对这个问题的理解似乎有些错误。

在 web.config 中，我更改了以下内容：

```
<customErrors mode="On" redirectMode="ResponseRewrite" defaultRedirect="~/Views/Error/ServerError.cshtml">
  <error statusCode="404" redirect="~/Views/Error/NotFound.cshtml" />
</customErrors> 
```

... 和 ...

```
<httpErrors errorMode="Custom" existingResponse="Replace">
      <remove statusCode="404" subStatusCode="-1" />
      <error statusCode="404" path="/NotFound" responseMode="ExecuteURL" />
      <remove statusCode="500" subStatusCode="-1" />
      <error statusCode="500" path="/ServerError" responseMode="ExecuteURL" />
    </httpErrors> 
```

这直接重定向到视图。我的理解是我必须重定向到错误控制器，而错误控制器又会重定向到视图，但显然情况并非如此。我要感谢您的评论，因为当我已经准备放弃自定义错误内容并且只是懒惰并显示 YSOD 时，他们让我再次分析了问题。:)

# c# - 字典使用对象作为键。密钥在字典外更新

> ID：13155844
> 
> 赞同：1
> 
> 时间：2012-10-31T10:28:42.350
> 
> 标签：c#

考虑一个简单的类：

```
public class TestClass<Val>
{
    public Val Value{get;set;}
} 
```

创建此类的一个实例并定义一个字典，我们将其用作键。

```
TestClass<int> TestCase = new TestClass<int>();
Dictionary<TestClass<int>, int> D = new Dictionary<TestClass<int>, int>(); 
```

将 0 放入 TestCase 并将条目添加到字典中：

```
TestCase.Value=0
D.Add(TestCase,10) 
```

现在字典看起来像这样： {TestCase -> Value=0:10} 现在这样做：

```
TestCase.Value=1 
```

现在我自动在字典 {TestCase -> Value=1 : 10} 中，而无需将键 'TestCase -> Value=1' 放入字典中。我怎样才能避免它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:31:49.903

基本上，不要使用可变类型作为键......或者如果你这样做，请确保你永远不会改变键。第一个会更好。

一个更大的问题是，如果`TestClass<Val>`有一个自定义`GetHashCode()`/`Equals()`实现，你可以完全破坏字典，因为它可能不再能够找到那个键的值，**即使你给它你开始使用的确切实例**。

理想情况下，您用作密钥的任何内容都应该是不可变的。出于这个原因，`int`并`string`做出很好的选择，但您也可以按照@lazyberezovsky 的示例使您的类型不可变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T10:31:15.800

实际上只有一个 TestClass 实例。您在字典之外创建它，然后将该实例添加到字典中。

如果您对实例进行更改，它会反映在字典中。这是浅拷贝

为避免此问题，请创建实例的深度克隆，然后添加到字典中。在这种情况下，一个中的变化不会反映在另一个中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-31T10:32:04.900

创建不可变`TestCase`类：

```
public class TestClass<Val>
{
    public TestClass(Val value)
    {
       Value = value;
    }

    public Val Value{ get; private set; }
} 
```

# php - 刷新一个用php显示的div

> ID：13155856
> 
> 赞同：0
> 
> 时间：2012-10-31T10:29:26.860
> 
> 标签：php

我想刷新 php 中的页面（正在执行 sql 语句）以 p 每 10 秒刷新一次。我将页面加载到 div 中，例如：

```
<div id="test"> <?php echo showPage() ?></div> 
```

那么我怎样才能刷新这个duv，这将使sql刷新获取数据..

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:33:04.083

用下面的方式写你的脚本

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/
libs/jquery/1.3.0/jquery.min.js"></script>

<script type="text/javascript">
var auto_refresh = setInterval(
    function () {
        $('#test').load('test.php');
    }, 10000); // refresh every 10000 milliseconds
</script>
<body>
<div id="test"> </div>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:33:22.833

您可以在`<meta http-equiv="refresh" content="10"/>`标签中包含一个标签`head`，或者，如果您无权访问该`head`标签，您可以在页面的任何位置插入一个`script`标签，如下所示：

```
<script type="text/javascript">
setTimeout(function() {
    location.reload();
}, 10000);
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T10:36:21.293

```
 <script type="text/javascript"><!--
        $(document).ready(function() {
              setTimeout('$(\'#test\').load(\'abc.php #test >* \' )', 10000)
        });
        //--></script> 
```

# wordpress - 在 wordpress 中，如何使默认存档功能运行？

> ID：13155858
> 
> 赞同：0
> 
> 时间：2012-10-31T10:29:37.563
> 
> 标签：wordpress

我制作了一个名为 category-blog.php 的类别存档页面。但是我现在需要将此页面设置为页面的自定义模板，当简单地浏览到 mydomain.com/blog 时，该页面工作正常，因为我猜在运行此模板之前 wordpress 会进行某种查询。我需要知道的是这个查询是什么，所以我可以在它到达我的模板页面之前运行它？我需要在循环查询结果之前使分页等工作。

希望这是有道理的，很难用言语表达。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:08:14.643

在你的新 template-page.php

```
<?php
$temp = $wp_query;
$wp_query= null;
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$wp_query = new WP_Query('cat=732&showposts=5&paged='.$paged);
while ($wp_query->have_posts()) : $wp_query->the_post();
?>
<?php the_title(); ?> etc...etc..
<?php endwhile; $wp_query = null; $wp_query = $temp; ?>

<?php next_posts_link('&laquo; Older Entries') ?>
<?php previous_posts_link('Newer Entries &raquo;') ?> 
```

在这里查看其他解决方案 [http://wordpress.org/support/topic/adding-pagination-to-a-wp_query-loop](http://wordpress.org/support/topic/adding-pagination-to-a-wp_query-loop)

# java - Why does JDK sourcecode take a `final` copy of `volatile` instances

> ID：13155860
> 
> 赞同：74
> 
> 时间：2012-10-31T10:29:41.990
> 
> 标签：java

I read the JDK's source code about ConcurrentHashMap.

But the following code confused me:

```
public boolean isEmpty() {
    final Segment<K,V>[] segments = this.segments;
    ...
} 
```

My question is:

"this.segments" is declared:

```
final Segment<K,V>[] segments; 
```

So, here, in the beginning of the method, declared a same type reference, point to the same memory.

Why did the author write it like this? Why didn't they use this.segments directly? Is there some reason?

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-10-31T10:31:57.000

This is an idiom typical for lock-free code involving `volatile` variables. At the first line you read the `volatile` once and then work with it. In the meantime another thread can update the `volatile`, but you are only interested in the value you initially read.

Also, even when the member variable in question is not volatile but final, this idiom has to do with CPU caches as reading from a stack location is more cache-friendly than reading from a random heap location. There is also a higher chance that the local var will end up bound to a CPU register.

For this latter case there is actually some controversy, since the JIT compiler will usually take care of those concerns, but Doug Lea is one of the guys who sticks with it on general principle.

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-31T10:52:24.890

I guess it's for performance consideration, so that we only need retrieve field value once.

You can refer to a singleton idiom from effective java by Joshua Bloch

His singleton is here:

```
private volatile FieldType field;
FieldType getField() {
  FieldType result = field;
  if (result == null) { 
    synchronized(this) {
      result = field;
      if (result == null) 
        field = result = computeFieldValue();
    }
  }
  return result;
} 
```

and he wrote:

> This code may appear a bit convoluted. In particular, the need for the local variable result may be unclear. What this variable does is to ensure that field is read only once in the common case where it’s already initialized. **While not strictly necessary, this may improve performance and is more elegant by the standards applied to low-level concurrent programming. On my machine, the method above is about 25 percent faster than the obvious version without a local variable**.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-31T16:41:55.140

It may reduce byte code size - accessing a local variable is shorter in byte code than accessing an instance variable.

Runtime optimization overhead may be reduced too.

But none of these are significant. It's more about code style. If you feel comfortable with instance variables, by all means. Doug Lea probably *feel* more comfortable dealing with local variables.

# mysql - 将标准简化模式 ( * ? ) 转换为 LIKE 模式 ( % _ )

> ID：13155865
> 
> 赞同：3
> 
> 时间：2012-10-31T10:30:03.630
> 
> 标签：mysql, sql-like

我想知道是否有比以下更好的方法：

```
REPLACE(REPLACE(REPLACE(REPLACE(REPLACE('p%a_t*er?', '\\', '\\\\'), '%', '\%'), '_', '\_'), '*', '%'), '?', '_') 
```

将标准搜索模式转换为 LIKE 等价物并`*`在MySQL 中？`?``%``_`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T12:30:54.337

没有更短的方法可以直接在 MySQL 中执行多字符替换。有诸如用户定义函数 (UDF) 之类的替代方法，但我怀疑任何方法是否对您的确切目的有益。

如果可以接受，我的建议是在查询数据库之前执行文本替换。

在 PHP 中，这可以通过以下方式完成：

```
$searchQuery = $_GET['q'];
$searchQuery = str_replace(array('*', '?'), array('%', '_'), $searchQuery);
// perform your query as normal 
```

在 ASP 中，您可以尝试：

```
string searchQuery = Request.QueryString["q"];
searchQuery = searchQuery.Replace("*", "%").Replace("?", "_");
// perform your query as normal 
```

虽然，这两种方法都不是超短的，但它们确实使它更容易阅读，也不会为您的数据库查询增加任何时间。此外，在查询之前进行替换将允许您在清理字符串之前进行替换，因此您不需要`\`像在现有查询中那样替换 - 这样可以节省一次替换！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:37:36.747

而不是`like`你可以像这样使用Mysql的正则[表达式](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)：

```
select * from my_table where col_name regexp 'p%a_t*er?'; 
```

使用正则表达式时，无需进行所有这些替换以使您的字符串`like`友好。

# sd-card - 移植后未检测到 SD 卡

> ID：13155867
> 
> 赞同：2
> 
> 时间：2012-10-31T10:30:06.487
> 
> 标签：sd-card, porting, android-sdcard, android-2.3-gingerbread

我有一个移植版的 Android Gingerbread 2.3.4 在 Technexion 的海啸板上运行。在 Android 版本中，当我插入 sdcard 时，它没有被检测到。

我尝试将设备移植到 Froyo 并在 Froyo 中检测到 sdcard，但在姜饼中未检测到。

请指导移植时插入SD卡时未检测到SD卡的问题可能出在哪里？我有源代码，但无法真正解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T08:51:59.983

问题仍未解决，但幸运的是 Technexion 发布了支持 SD 卡的最新版本的 ICS。

# java - 在 Android Java 中动态改变图像的前景色（保持 alpha 透明度）

> ID：13155869
> 
> 赞同：1
> 
> 时间：2012-10-31T10:30:14.050
> 
> 标签：java, android, image, bitmapimage

我有一个透明背景的红球图像。我想以编程方式将球的颜色更改为许多其他颜色而不影响背景，即背景应保持透明。如何在 Android 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:35:15.910

您可以使用`Bitmap`该类以这种方式修改您的图像，例如使用`setPixel()`方法。您只需要确保颜色仍然将其 alpha 设置为透明。

请参阅[此处](http://developer.android.com/reference/android/graphics/Color.html)`Color`的文档以使用其 RGB 和 Alpha 通道定义颜色（您希望保留每个像素的 Alpha 值，并且只更改 RGB 值）。另请参阅[此处](http://developer.android.com/reference/android/graphics/Bitmap.html)的文档`Bitmap`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:39:35.343

尝试：

```
//Bitmap bmp
//int color 
int[] pixels = new int[bmp.getWidth() * bmp.getHeight()];
bmp.getPixels(pixels, 0, bmp.getWidth(), 0, 0,
            bmp.getWidth(), bmp.getHeight());
for (int i = 0; i < pixels.length; i++) {
pixels[i] &= color;
}
Bitmap newBmp = Bitmap.createBitmap(bmp.getWidth(),
bmp.getHeight(), Config.ARGB_8888);
newBmp.setPixels(pixels, 0, newBmp.getWidth(), 0, 0, newBmp.getWidth(), newBmp.getHeight()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-31T10:36:12.010

您也可以通过使用[Frame Animation](http://developer.android.com/guide/topics/resources/animation-resource.html#Frame)来实现。使用不同颜色的相同球图像的不同图片，并使用帧动画将图像作为帧运行。如果是这样，那么球的颜色看起来是在变化的。

# c# - 如何检查xml节点的值asp.net中是否存在字符串

> ID：13155870
> 
> 赞同：0
> 
> 时间：2012-10-31T10:30:17.420
> 
> 标签：c#, asp.net, .net-3.5

我的 xml 如下所示

```
<Employee>
      <Emp>
        <Name id="1" link="/office1/manager"></Name>
        <Name id="2" link="/office/sweeper"></Name>
        <Name id="3" link="/office2/manager"></Name>
       </Emp>
  </Employee> 
```

我想获取在“链接”中包含字符串“manager”的员工的“id”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:34:05.923

```
var xDoc = XDocument.Parse(xml); //XDocument.Load(filename)
var ids = xDoc.Descendants("Name")
            .Where(n => n.Attribute("link").Value.Contains("/manager"))
            .Select(n => n.Attribute("id").Value)
            .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:36:13.790

**使用 linq 到 xml：**

```
XDocument doc = XDocument.Load("XMLFilePath");
var selectors = from elements in doc.Elements("Employee").Elements("Emp").Elements("Name")
                where elements.Attribute("link").Value.Contains("manager")
                select elements;

string ids = string.Empty;
foreach (var element in selectors)
{
        ids  += element.Attribute("id").Value + ",";
} 
```

此外，对于从字符串加载，您可以使用：

```
XDocument doc = XDocument.Parse(xmlString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T07:52:18.523

```
 //SELECT THE VALUES FROM XML USING C#

            <?xml version="1.0" encoding="iso-8859-1"?>
            <CONFIG>
              <UsersList>
                <SystemName>DOTNET-PC</SystemName>
                <UserName>KARTHIKEYAN</UserName>
                <ImagePath>C:\Users\DEVELOPER\AppData\Roaming\Office Messenger\assets\insta.jpg</ImagePath>
                <PhotoPath>C:\Users\DEVELOPER\AppData\Roaming\Office Messenger\assets\NoPhoto.png</PhotoPath>
                <UserStatus>Available</UserStatus>
                <CustomStatus>Available</CustomStatus>
                <theme>FF8B0000</theme>
              </UsersList>
            </CONFIG>                       //XML DOCUMENT

        //C#

DataSet ds = new DataSet();
try
{
   ds.ReadXml("C:\\config.xml");
}
catch { };

if (ds.Tables.Count > 0)
{
  var results = from myRow in ds.Tables[0].AsEnumerable() where myRow.Field<string>    ("SystemName") == SystemInformation.ComputerName select myRow;//ds.Tables[0] is <CONFIG> tag //in where SystemName=My system name to select the values from xml
  foreach (var cust in results)
  {
    string _myName = cust["UserName"].ToString();
    string _myLogoPath = cust["ImagePath"].ToString();
    string _customStatus = cust["CustomStatus"].ToString();
    string _myPhotoPath = cust["PhotoPath"].ToString();
  }
}

//CREATE XML FROM C#

XDocument xmlDoc = XDocument.Load("C:\\config.xml");
xmlDoc.Root.Add(new XElement("UsersList", new XElement("SystemName", SystemInformation.ComputerName), new XElement("UserName", SystemInformation.ComputerName), new XElement("ImagePath", _filesPath + "\\insta.jpg"), new XElement("PhotoPath", _filesPath + "\\NoPhoto.png"), new XElement("UserStatus", "Available"), new XElement("CustomStatus", "Available"), new XElement("theme", "000000")));
xmlDoc.Save("C:\\config.xml"); 
```

# javascript - 响应表在 DIV 更改/加载后不格式化，直到重新调整

> ID：13155872
> 
> 赞同：1
> 
> 时间：2012-10-31T10:30:37.437
> 
> 标签：javascript, jquery, ajax

**例子**

分页 [http://www.uller.com/dump/ajaxresponseissue/index.html](http://www.uller.com/dump/ajaxresponseissue/index.html)

源代码，如果直接 [访问 http://www.uller.com/dump/ajaxresponseissue/table.html可以正常工作](http://www.uller.com/dump/ajaxresponseissue/table.html)

将表格动态显示到 Div 表格中具有响应式脚本，但是当加载 div 时，脚本将不会运行，直到窗口被重新调整。

试图找到一种在加载 div 时自动触发脚本的方法。

以下是该链接中的代码示例。

**HTML**

```
<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Ajax Response Issuet</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript" language="javascript"></script>
</head>
<body>
    <div id="output"></div>
    <script>
    // Function called by Period select
        $(document).ready(function () {
            $("#output").load("table.html #loadMeOnly");$.getScript('responsibe-tables.js');$.getScript('jquery.js');
        });
    </script>    
</body>
</html> 
```

**调用表js**

```
<div id="loadMeOnly">
<style type="text/css">

table th { font-weight: bold; }
table td, table th { padding: 9px 10px; text-align: left; }

/*  Mobile */
@media only screen and (max-width: 979px) {

    table.responsive { margin-bottom: 0; }

    .pinned { position: absolute; left: 0; top: 0; background: #fff; width: 35%; overflow: hidden; overflow-x: scroll; border-right: 1px solid #ccc; border-left: 1px solid #ccc; }
    .pinned table { border-right: none; border-left: none; width: 100%; }
    .pinned table th, .pinned table td { white-space: nowrap; }
    .pinned td:last-child { border-bottom: 0; }

    div.table-wrapper { position: relative; margin-bottom: 20px; overflow: hidden; border-right: 1px solid #ccc; }
    div.table-wrapper div.scrollable table { margin-left: 35%; }
    div.table-wrapper div.scrollable { overflow: scroll; overflow-y: hidden; }  

    table.responsive td, table.responsive th { position: relative; white-space: nowrap; overflow: hidden; }
    table.responsive th:first-child, table.responsive td:first-child, table.responsive td:first-child, table.responsive.pinned td { display: none; }

}
</style>

<table width='100%' class="responsive">
  <tr>
    <th scope='col'>&nbsp;</th>
    <th colspan='3' scope='col'><center>
        Invited
      </center></th>
    <th colspan='2' scope='col'><center>
        Accepted
      </center></th>
    <th colspan='2' scope='col'><center>
        Confirmed
      </center></th>
    <th colspan='2' scope='col'><center>
        Attended
      </center></th>
    <th scope='col'><center>
        Sold
      </center></th>
  </tr>
  <tr>
    <th scope='col'>Name</th>
    <th scope='col'>P</th>
    <th scope='col'>G</th>
    <th scope='col'>Total</th>
    <th scope='col'>##</th>
    <th scope='col'>%</th>
    <th scope='col'>##</th>
    <th scope='col'>%</th>
    <th scope='col'>##</th>
    <th scope='col'>%</th>
    <th scope='col'>##</th>
  </tr>
  <tr>
    <td> House</td>
    <td onclick='document.location = "?Databuild&Account=28&Type=P";' style='cursor:pointer;'></td>
    <td onclick='document.location = "?Databuild&Account=28&Type=G";' style='cursor:pointer;'>1</td>
    <td onclick='document.location = "?Databuild&Account=28";' style='cursor:pointer;'>1</td>
    <td></td>
    <td>0%</td>
    <td></td>
    <td>0%</td>
    <td></td>
    <td>0%</td>
    <td></td>
  </tr>
  <tr>
    <td>ss ss</td>
    <td onclick='document.location = "?Databuild&Account=68&Type=P";' style='cursor:pointer;'>9</td>
    <td onclick='document.location = "?Databuild&Account=68&Type=G";' style='cursor:pointer;'>32</td>
    <td onclick='document.location = "?Databuild&Account=68";' style='cursor:pointer;'>41</td>
    <td></td>
    <td>0%</td>
    <td></td>
    <td>0%</td>
    <td></td>
    <td>0%</td>
    <td></td>
  </tr>
  <tr>
    <td>xx xx</td>
    <td onclick='document.location = "?Databuild&Account=70&Type=P";' style='cursor:pointer;'></td>
    <td onclick='document.location = "?Databuild&Account=70&Type=G";' style='cursor:pointer;'>28</td>
    <td onclick='document.location = "?Databuild&Account=70";' style='cursor:pointer;'>28</td>
    <td></td>
    <td>0%</td>
    <td></td>
    <td>0%</td>
    <td></td>
    <td>0%</td>
    <td></td>
  </tr>
  <tr>
    <td>vv vv</td>
    <td onclick='document.location = "?Databuild&Account=101&Type=P";' style='cursor:pointer;'>1</td>
    <td onclick='document.location = "?Databuild&Account=101&Type=G";' style='cursor:pointer;'>28</td>
    <td onclick='document.location = "?Databuild&Account=101";' style='cursor:pointer;'>29</td>
    <td></td>
    <td>0%</td>
    <td></td>
    <td>0%</td>
    <td></td>
    <td>0%</td>
    <td></td>
  </tr>
  <tr>
    <td>yy  yy</td>
    <td onclick='document.location = "?Databuild&Account=136&Type=P";' style='cursor:pointer;'>2</td>
    <td onclick='document.location = "?Databuild&Account=136&Type=G";' style='cursor:pointer;'>19</td>
    <td onclick='document.location = "?Databuild&Account=136";' style='cursor:pointer;'>21</td>
    <td></td>
    <td>0%</td>
    <td></td>
    <td>0%</td>
    <td></td>
    <td>0%</td>
    <td></td>
  </tr>
  <tr>
    <td><strong>Total</strong></td>
    <td onclick='document.location = "?Databuild&Account=All&Type=P";' style='cursor:pointer;'>12</td>
    <td onclick='document.location = "?Databuild&Account=All&Type=G";' style='cursor:pointer;'>108</td>
    <td onclick='document.location = "?Databuild&Account=All";' style='cursor:pointer;'>120</td>
    <td>0</td>
    <td>0%</td>
    <td>0</td>
    <td>0%</td>
    <td>0</td>
    <td>0%</td>
    <td>0</td>
  </tr>
</table>
</div> 
```

# objective-c - 在 iOS 的 icarousel 中使用 AsyncImageView 的问题

> ID：13155874
> 
> 赞同：5
> 
> 时间：2012-10-31T10:30:39.993
> 
> 标签：objective-c, ios, xcode, uiimageview, icarousel

我开发了一个使用 Asyncimageview 和 iCarousel 的应用程序。但我的问题是，当我尝试从 url 加载图像时，我的 iCarousel 的每个视图中只加载活动指示器，并且没有加载图像。这是我的代码

```
 - (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(AsyncImageView *)view
 {
if (view == nil
 {
  AsyncImageView * view = [[[AsyncImageView alloc]initWithFrame:CGRectMake(0, 0, 300, 280)] autorelease];
view.image=[UIImage imageNamed:@"infobg.png"];
view.imageURL=[imageURLs objectAtIndex:index];
}
return view;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:44:30.567

**细胞应该被重复使用**

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(AsyncImageView *)view

 {
if (view == nil) {
 view = [[[AsyncImageView alloc]initWithFrame:CGRectMake(0, 0, 300, 280)] autorelease];
}
// dont forget stop previous loading -cancelLoadingURL:target:

 view.image=[UIImage imageNamed:@"infobg.png"];
 view.imageURL=[imageURLs objectAtIndex:index];

 return view;
} 
```

你也应该停止以前开始的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T09:37:05.027

遵循这些步骤可能是由于以下原因，您可能会遇到此问题

-- 检查你的 imageURLs 数组是否有 iCarousel 下的对象不是...如果它为空，您可能会遇到这种问题...。

-- 进行数组分配并添加对象

```
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil 
```

方法，因为如果您在 viewDidLoad 下的数组中添加对象，它将不起作用，因为轮播视图在 viewDidLoad 方法之前先加载。

-- 如果您的数组元素在这些步骤之后仍然存在，请遵循此代码。

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(AsyncImageView *)view
{
view = [[[AsyncImageView alloc]initWithFrame:CGRectMake(0, 0, 300, 280)] autorelease];

view.image=[UIImage imageNamed:@"infobg.png"];
view.imageURL=[imageURLs objectAtIndex:index];

//NSLog(@"%@",imageURLs)//check imageURLs having object

if(view ==nil)
{
    [[AsyncImageLoader sharedLoader]cancelLoadingImagesForTarget:view];
}
return view;

} 
```

它会帮助你..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-20T14:37:40.030

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    User_Id=@"abcd@gmail.com";

    NSString *Post=[NSString stringWithFormat:@"email=%@",User_Id];
    NSData *PostData = [Post dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:NO];
    NSString *PostLengh=[NSString stringWithFormat:@"%d",[Post length]];
    NSURL *Url=[NSURL URLWithString:[NSString stringWithFormat:@"%@fetch_all_user_updates.php",ServerPath]];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:Url     cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
    [request setHTTPMethod:@"POST"];
    [request setValue:PostLengh forHTTPHeaderField:@"Content-Lenght"];
    [request setHTTPBody:PostData];

    NSData *ReturnData =[NSURLConnection sendSynchronousRequest:request returningResponse:Nil error:Nil];
    NSString *Response = [[NSString alloc] initWithData:ReturnData encoding:NSUTF8StringEncoding];
    Response = [Response stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
    NSMutableArray *JSON_Array=[Response JSONValue];

// NSlog(@"%@", JSON_Array);
// textfield.text=[[JSON_Array valueforKey:@"email"]objectAtIndex:0];
// load images from database at local host
/*
NSLog(@"%@",[NSString stringWithFormat:@"%@/Images/%@",serverScriptpath,[[jsonarray valueForKey:@"image"]objectAtIndex:0]]);
NSURL *img_url=[NSURL URLWithString:[NSString stringWithFormat:@"%@/Images/%@",
                                     serverScriptpath,[[jsonarray valueForKey:@"image"]objectAtIndex:0]]];

NSURLRequest *request1=[NSURLRequest requestWithURL:img_url];
[Img_profilepic setImageWithURLRequest:request1 placeholderImage:[UIImage imageNamed:@".png"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {

} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {

}];
*/

    if (JSON_Array>0)
    {
        Array_Image_Name=[JSON_Array valueForKey:@"image_name"];
        [Array_Image_Name retain];
    }
    else
    {
        UIAlertView *Alert=[[UIAlertView alloc]initWithTitle:@"Failure" message:@"Error To Load Image" delegate:Nil cancelButtonTitle:@"OK" otherButtonTitles:Nil, nil];
        [Alert show];
        [Alert release];
    }
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return Array_Image_Name.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell;
    cell=nil;
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    AsyncImageView *Load_Image=[[AsyncImageView alloc]initWithFrame:CGRectMake(20, 10, 280, 100)];
    Load_Image.imageURL=[NSURL URLWithString:[NSString stringWithFormat:@"%@/Images/%@",ServerPath,[Array_Image_Name objectAtIndex:indexPath.row]]];
    Load_Image.showActivityIndicator=YES;
    [cell.contentView addSubview:Load_Image];
    return cell;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T07:56:47.653

```
AsyncImageView *asyncImage = [[AsyncImageView alloc] initWithFrame:CGRectMake(0.0f, 1.0f, 320.0f, 174.0f)];
NSString *imgUrlString = photobig1;
while ([imgUrlString rangeOfString:@" "].location != NSNotFound) {
    imgUrlString = [imgUrlString stringByReplacingOccurrencesOfString:@" " withString:@""];
}
UIImageView *imageview = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"Loading Image.png"]];
[asyncImage addSubview:imageview];
asyncImage.tag = 999;
NSString *webStr = [NSString stringWithFormat:@"%@",imgUrlString];
NSURL *imageUrl = [[NSURL alloc] initWithString:[webStr stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]];
[asyncImage loadImageFromURL:imageUrl];
[asyncImage setBackgroundColor:[UIColor clearColor]];
asyncImage.userInteractionEnabled = NO;

  [scrollView addSubview:asyncImage]; 
```

# git - SVN 和 Github 的 git 分支

> ID：13155875
> 
> 赞同：1
> 
> 时间：2012-10-31T10:30:43.177
> 
> 标签：git, svn, github, git-svn, git-branch

这是我正在做的一个简单的路径：

```
$ cd /newdir
$ git clone git@github.com:... .
$ git branch -m master github
$ git svn clone svn+ssh://... .
$ git branch -m master SVN 
```

然后我有一些脚本可以在推送到 Github 之前执行所需的操作。

我需要 SVN 和 github 分支，因为两个分支上的文件相同但内容不同。在将文件推送到 Github 之前，我添加了一些标题。这两个分支还用于允许 SVN 上的所有文件都不能转到 Github。

所有更新都是从 SVN 分支到 github 分支。偶尔我会在 github 分支上添加一些不在 SVN 上的东西。我永远不会将文件/更新从 github 分支发送到 SVN 分支。

我的问题 1 是每次执行 git svn fetch 时，都会创建一个新的 master 分支。如何告诉 git svn fetch 使用 SVN 本地分支而不是 master 本地分支？

之后：

```
$ git svn fetch 
```

我可以：

```
$ git checkout SVN
$ git merge master
$ git branch -d master 
```

但看起来并不是一种聪明的做法。

然后我有一个问题告诉我的本地 git 本地 github 分支是 Github 的远程/主分支。命令

```
$ git push git@github.com:... 
```

在重命名本地分支机构之前，这很有效，现在没有做我想要的。

所以我的两个问题：

```
1 - Telling git svn to always use local SVN branch when getting updates from SVN server
2 - Telling git that local github branch is remote master branch at github 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T13:51:38.840

您**不能**将合并与基于 SVN 的分支一起使用（阅读`git svn`手册；它在多个地方非常仔细地说明了这一点）。如果您需要合并，请以另一种方式将 SVN 树合并到其他分支中（但永远不要将其他内容合并到 SVN 树中）。

让分支，如果您需要在单独`git svn`的`master`分支中进行开发，请为自己使用另一个分支（例如`master2`）。然后，当您希望将其中的工作提交到主分支时，请执行以下操作：

```
git checkout master2
git rebase master
git checkout master
git merge --ff-only master 
```

当您添加 github 主存储库时，请在单独的分支中执行此操作：

```
git checkout master
git checkout -b githubmaster
git remote add github .....
git pull github master 
```

并且只需始终执行上述操作以拉入 github 特定分支。但是当你需要在做 rebase 后推回 github 流时，你可能会遇到 github 服务器的问题，因此需要`push -f`在分歧后强制更新 github 树。

好吧，从技术上讲，我谎称无法合并到 SVN 树中。但实际上，如果你不这样做，你会省去很多麻烦。现实情况是，这`git svn`并不意味着是一个完全集成的 git 系统。它实际上只是一个比 SVN 本身“更好的 SVN 客户端”。你真的不能使用`git svn`并期望获得 git 本身的全部功能。悲伤，但不幸的是真实的。我知道，因为我已经走上了你的道路，并且正在做你想做的事。结果是你真的不能进行合并并让它们一起很好地发挥作用。SVN 无法处理它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-09T01:23:14.303

首先通过 git clone git@git.corp.xyz.com:corp 克隆 gitHub，然后 git checkout（分支名称）然后 git branch（将显示分支名称）

# jquery - 在主/服务器端 asp.net 页面中调用 jquery 对话框

> ID：13155877
> 
> 赞同：1
> 
> 时间：2012-10-31T10:30:49.077
> 
> 标签：jquery

我正在使用 asp.net 主/页面，我无法从服务器端调用 jquery 对话框。在 head referenzio 中有一个母版页。用于初始化对话框的 Js 文件...准备就绪。在 contentpage 中，我使用 ClientScript.RegisterStartupScript 函数调用对话框打开。错误描述为：cannot call methods on dialog before初始化；试图调用方法“打开”。相同的对话框在客户端正常工作。

# javascript - javascript max call stack exceeded 解释

> ID：13155879
> 
> 赞同：1
> 
> 时间：2012-10-31T10:30:51.290
> 
> 标签：javascript, recursion, multidimensional-array

```
var MultiArray = (function(){

    var MultiArray = function(param){

            var i = param.array.length;
            while(i--){
                param.array[i] = MultiArray({
                array: new Array(dims[0]),
                dims: dims.splice(1,dims.length-1)
                });
            }

        return param.array

    };

    return function(){

        var length = arguments.length - 1;
            array = new Array(arguments[0]),
            dims = [length];

        for(var i = 0; i < length; i++){
            dims[i] = arguments[i+1];
        }   

        MultiArray({
            array: array,
            dims: dims
        });

        return array;
    };

})(); 
```

我正在尝试编写一个函数来创建多维数组，以便`var mdArray = MultiArray(3,3,3);`创建一个 3x3x3 元素的 3D 数组。但是在尝试这种方法时，我得到 Max call stack size exceeded，有没有更好的方法来制作这样的多维数组函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:35:51.730

在你的内部`MultiArray`，你总是有一个`param.array`带有 1 的项目，这会产生无穷无尽的递归。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:05:55.307

```
var MultiArray = (function() {

    var MultiArray = function(param) {

        var myDims, i = param.array.length;
        if(param.dims.length === 0){
            return;
        }
        while(i--) {
            myDims = param.dims.slice(0);
            myDims = myDims.splice(1, myDims.length - 1);
            param.array[i] = new Array(param.dims[0]);
            MultiArray({
                array : param.array[i],
                dims : myDims
            });
        }

    };

    return function() {

        var length = arguments.length - 1, array = new Array(arguments[0]), dims = [length];

        for(var i = 0; i < length; i++) {
            dims[i] = arguments[i + 1];
        }

        MultiArray({
            array : array,
            dims : dims
        });

        return array;
    };
})(); 
```

上面的代码是正确的，原始代码完全错误导致无限递归循环，现在它按预期工作，`var mdArray = MultiArray(2,3,4,5);`创建了一个尺寸为 2x3x4x5 的数组。`dims`当参数中的数组长度为零时，递归函数现在立即返回。

# android - 将一个圆圈分成不同区域的飞镖盘？

> ID：13155883
> 
> 赞同：10
> 
> 时间：2012-10-31T10:30:59.370
> 
> 标签：android, c++, iphone, ios, math

![飞镖盘](../Images/9616356ddda72fc11bcc1587cb54ec47.png)

有人可以指出我如何划分一个圆圈以获得飞镖板的不同区域的正确方向吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T10:33:10.213

您使用的是圆柱坐标系：最好用 (r, theta) 而不是 (x, y) 来表达所有内容。

以下是两者的关系：

```
x = r*cos(theta)
y = r*sin(theta) 
```

如果你这样做很容易。

我看到七个不同的半径和二十个角度部分，所以每个角度部分都必须是 18 度。

围绕 20 的角截面以垂直线为中心。选择一条线`theta = 0`并从那里开始。（两个不错的选择可能是水平的右侧或 20 的中心。）

只有一个警告：请记住，计算机通常会执行三角函数来获取弧度，而不是度数。对于大多数人来说，360 度的圆周是直观的，但计算机更喜欢 2π 弧度。

# javascript - 巴西利亚时区计算错误

> ID：13155884
> 
> 赞同：2
> 
> 时间：2012-10-31T10:31:03.243
> 
> 标签：javascript

```
function(startDate, lastDate){

var midDate = newDate(startDate.getFullYear(),startDate.getMonth(),Math.ceil((lastDate.getDate() + startDate.getDate()) / 2));

var startDateOffset = startDate.getTimezoneOffset();
var lastDateOffset = lastDate.getTimezoneOffset();
var midDateOffset = midDate.getTimezoneOffset();

var finalDate = new Date();
if(startDateOffset == midDateOffset){

  if((lastDate.getDate() - midDate.getDate()) > 1){
    alert("loop");
  finalDate = this.getDaylightChangeDate(midDate, lastDate); 
  }
 } 
```

我的开始日期是 10 月 20 日，结束日期是 22 日，中间日期是 10 月 20 日。这仅发生在 Brasilia 位置，startDateOffset 和 midDateOffset 也是 180 作为输出..这将代码抛出无限循环，因为中间日期始终等于开始日期。请在javascript中建议一些其他方法来计算中间日期

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T14:02:45.417

您的代码没有任何问题。2012-10-20T00:00 和 2012-10-21T23:00 之间的中间日期*是*2012-10-20T23:30。当然，如果输入日期相隔不超过 2 天，您的代码不能指望日期会有所不同。如果您在与开始和结束相同的日期通过，甚至会发生什么？

如果这些日期记录在不同的时区，则应始终使用 UTC 来计算差异。

# time - 如何在 PHP 中获取当前浏览器时区？

> ID：13155886
> 
> 赞同：2
> 
> 时间：2012-10-31T10:31:04.597
> 
> 标签：time, timezone

我正在尝试这段代码

```
<script> 
var rightNow = new Date();
var jan1 = new Date(rightNow.getFullYear(), 0, 1, 0, 0, 0, 0);
var temp = jan1.toGMTString();
//document.hari.maliya.value=temp;
//alert(temp);
document.write(temp);
 <script> 
```

但我想在 php 文件中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:34:47.857

您必须将此值作为 cookie、http 参数或使用 ajax 调用传递给您的 php 脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T06:22:16.750

嗨我解决了这个问题答案：

```
<script> 
$(document).ready(function() {
    var rightNow = new Date();
    //alert(temp);
     document.harimaliya.timezone.value=rightNow;
});
</script> 
```

和html代码是：

```
 <form name="harimaliya" id="harimaliya" action=""  method="post">
        time zone :<input type="text" name="timezone" id="timezone" value='' size="50"/> 
        <input type="submit" value="Test Diffrent time Zone" name="timezonetest" id="timezonetest">
    </form> 
```

PHP代码计算两个时区之间的差异：

```
<?php
    if(isset($_POST['timezonetest']))
      {
    echo "User Time Zone -:"." ".$usertimezone  = "(GMT-12:00)-International Date Line West";
    echo "<br>";
    $usertimezone = substr ($usertimezone, 1,9);
    echo $usertimezone= str_replace(':',"",$usertimezone);
    echo "<br>";
    echo date(strtotime("$usertimezone"));
    echo "<br>";
    echo "System Time Zone -:"." ".$systemtimezone= $_POST['timezone'];
    $systemtimezone = strstr($systemtimezone, 'G');
    echo "<br>";
    echo $systemtimezone = substr ($systemtimezone, 0,8);
    echo "<br>";
    echo date(strtotime("$systemtimezone"));
    echo "<br>";
    echo $diff=date(strtotime("$usertimezone"))-date(strtotime("$systemtimezone"));
    echo "<br>";

    echo $diff=($diff/60)." "."minits";
    echo "<br>";
    echo $diff=($diff/60);
    }
 ?> 
```

# python - 当由 unittest runner 运行时，Paramiko 在身份验证期间挂起

> ID：13155890
> 
> 赞同：2
> 
> 时间：2012-10-31T10:31:21.263
> 
> 标签：python, paramiko

再会。

`paramiko`我对ssh 客户端有一个奇怪的问题。当在类/函数外部调用方法并且代码由 unittest 运行程序运行`Connect paramiko`时，该方法会挂起。`unittest2`

有一段代码，出现问题：

```
import paramiko
import unittest2

ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect('172.18.67.10',
            username='root',
            password='secrete')
_, stdout, _ = ssh.exec_command('date')

class TestTest(unittest2.TestCase):
    def setUp(self):
        pass 
```

如果我`ssh.connect`进入`TestTest`类或`setUpModule`函数，连接将成功。当代码由原始 Python 解释器运行时，一切正常。

当我尝试调试时，我在循环中`paramiko`找出了这个问题。`while True``paramiko/auth_handler.py:AuthHandler.wait_for_response method`

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T10:09:04.987

根据[这个 SO answer](https://stackoverflow.com/a/450895/109807)，这似乎是 paramiko 中与线程相关的错误，可以通过在导入期间不调用 connect() 来避免。

# python - 如何使用 struct.unpack 将 POpen 的输出作为流处理？

> ID：13155893
> 
> 赞同：1
> 
> 时间：2012-10-31T10:31:34.677
> 
> 标签：python, stream

> **可能重复：**
> [subprocess.Popen.stdout - 再次实时读取标准输出！](https://stackoverflow.com/questions/3140189/subprocess-popen-stdout-reading-stdout-in-real-time-again)

我正在处理二进制文件的输出，但我使用临时字符串来表示输出。由于理论上输出可能相当大，我更愿意使用 unpack 或 unpack_from 将输出作为流处理。

代码是这样的：

```
file = '/home/t/FinancialData/GBPUSD/2007/05/01/20070501_01h_ticks.bi5';
command = ('lzma', '-kdc', '-S', 'bi5', file);
p = subprocess.Popen(command, stdout=subprocess.PIPE);
out, err = p.communicate();
for s in (out[x:x+20] for x in range(0, len(out), 20)):
    values = struct.unpack(">3L2f", s)
    with open(csvfilename, 'wb') as csvfile:
        csvwriter = csv.writer(csvfile, delimiter=',',
                               quotechar='|', quoting=csv.QUOTE_MINIMAL)
        csvwriter.writerow(values); 
```

有没有办法重写它，所以它不必将整个输出存储在 out 中，而是将其作为流处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:43:30.710

您可以从`file`对象中读取`p.stdout`：

```
while True:
    s = p.stdout.read(20)
    if not s:
        break
    values = struct.unpack(">3L2f", s)
    ... 
```

请注意，只有在对象上最多有一个管道时，这种方法才是安全的`Popen`；任何更多，该过程可能会阻止等待输入或写入stderr。在这种情况下，您应该使用`poll`,`select`或 threading 来多路复用管道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:56:14.663

您可以`select`围绕对象的`stdout`属性进行 调用`Popen`并轮询，直到该过程完成。例如：

```
from subprocess import Popen, PIPE
from select import select

cmd = ('lzma', '-kdc', '-S', 'bi5', 'path/to/datafile')
p = Popen(cmd, stdout=PIPE)

while p.poll() == None:
    r,w,e = select([p.stdout], [], [])
    if r:
        data = p.stdout.read(512)
        # unpack and append to csv file ... 
```

干杯，

# ios - 如何在CoreData中以一对多关系执行单元格的重新排序

> ID：13155903
> 
> 赞同：0
> 
> 时间：2012-10-31T10:32:17.080
> 
> 标签：ios, ios5, core-data, nsorderedset

我正在学习`coreData`，我是新手，我已经创建了**老板和员工的一对多关系**（即一个老板和许多员工）。所以我展示了所有的老板`firstTableView`，当用户点击单元格时，他可以查看分配给每个老板的员工，也可以将员工添加到任何特定的老板。**现在我想重新排序老板细胞**。那么应该怎么做呢？

根据下面的讨论编辑

```
 - (void)insertNewObject:(NSString *)fileName
{    
    Boss *bossName = [NSEntityDescription insertNewObjectForEntityForName:@"Boss" inManagedObjectContext:self.managedObjectContext];

    [bossName setName:fileName];

    NSManagedObject *lastObject = [self.controller.fetchedObjects lastObject];
    float lastObjectDisplayOrder = [[lastObject valueForKey:@"displayOrder"] floatValue];
    NSLog(@"%f",lastObjectDisplayOrder);
    [bossName setValue:[NSNumber numberWithDouble:lastObjectDisplayOrder + 1.0] forKey:@"displayOrder"];

    // Save the context.
    NSError *error = nil;
    if (![self.managedObjectContext save:&error]) {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T09:37:26.310

**[更新问题的具体答案]**

要么......

```
[self.boss insertObject:newEmployeeObject inEmployeesAtIndex:0]; 
```

如果您选择从模型创建子类，这是一个核心数据生成方法，它是您的 Boss 子类的一部分。或者....

```
NSMutableOrderedSet *employees = [self.boss mutableOrderedSetValueForKey:@"employees"];
[employees insertObject:newEmployee atIndex:0] 
```

我知道这不是那么直观，你不能只制作一个可变副本，你必须从`mutableOrderedSetValueForKey`.

* * *

**[原始通用答案]...**

Core-data 现在能够使用您可以在模型中指定的“有序关系”。如果这样做，对象模型中的关系将由一个新类表示，该类`NSOrderedSet`是 an`NSArray`和 an的混合体`NSSet`。通过重新排序此关系对象中的对象并保存上下文，您将重新排序数据库中的对象并且它们将保持其新顺序。当对象没有自然排序属性时，往往会使用这种有序关系。例如，订单仅代表用户在 UI 中订购列表的偏好。

另一方面，如果您的一个对象上有一个描述集合顺序的属性，那么您可以使用该属性通过指定`Sort Descriptors`. 该属性的值将指定对象在`NSFetchRequest`.

如果您正在使用，则`Ordered Relationships`需要保持该`NSOrderedSet`关系的顺序和`UITableView`同步。如果更改是从 UI 驱动的，那么您可以响应`UITableViewDataSource`委托方法，例如`- (void)moveRowAtIndex:(NSUInteger)sourceIndex toIndex:(NSUInteger)destinationIndex`并使用提供的信息将相应的对象移动到核心数据关系中的新位置，方法是使用来自的代理对象`mutableOrderedSetValueForKey:`或生成的核心数据生成的子类的访问器。

如果对订单的更改是从数据端驱动的，那么您将使用`UITableView`诸如`insertRowsAtIndexPaths:withRowAnimation:`和的方法`moveRowAtIndexPath:toIndexPath:`将其中的行`UITableView`与您在数据中所做的更改同步。

如果你使用`NSFetchRequest`s 你有一个类似的任务。在这种情况下，您通过更新对象上的排序属性以匹配`UITableView`通过`UITableViewDataSource`委托描述的新顺序来响应用户驱动的顺序更改。或者，如果排序更改从数据端开始，您可以`UITableView`通过它的方法更新，以匹配您对数据的排序属性所做的更改。在这种情况下，您将使用`NSFetchResults`as 的结果`NSArray`，您还必须使该对象保持同步，直到您下次运行`NSFetchRequest`. 您可以使用相同的排序描述符对数组进行排序，或者创建一个`NSMutableArray`并使用它的方法来移动数据以匹配表。

最后，如果您正在使用`NSFetchRequest`，您可能想看看`NSFetchedResultsController`它的工作是简化同步排序`NSFetchRequest`和`UITableView`. 文档中有很好的示例代码。在这种情况下，您可能会发现数据的排序会自行处理。例如，假设您的表格按“分配日期”（即员工被分配给老板的日期）排序，那么只需创建具有正确信息的对象就会触发表格中的正确结果。

*请注意，有序关系不适用于 iCloud。但是，在我看来，iCloud 无论如何都不起作用，所以这不是问题。*

# xaml - 在 Windows 8 中创建具有不同控件的中心页面

> ID：13155905
> 
> 赞同：4
> 
> 时间：2012-10-31T10:32:31.020
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime, winrt-xaml

您看到的大多数登陆/中心页面只是一个**GroupedGridView**（例如实际的市场应用程序）

但我想要一个具有不同控件的分组中心页面。

例如，我的第一个控件是一个包含一些类别的 ListView。第二个和第三个控件是 GridViews，其中包含多个项目。

如果所有 3 个控件都是 GridViews，我可以很容易地让它工作，但事实并非如此。

我似乎找不到 ScrollViewer 与 Grid 或 Stackpanel 的有效组合来获得实际的完整水平滚动工作。

关于如何在一个水平页面中创建具有不同控件的登陆/中心页面的任何想法或示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:49:30.727

您可以使用未分组的 GridView，其中每个项目将是使用不同 DataTemplate 显示的不同控件。

或者，您可以欺骗 FlipView 使其表现得像 Windows Phone 的全景控件。[http://dotnetbyexample.blogspot.cz/2012/08/a-winrt-behavior-to-turn-flipview-into.html](http://dotnetbyexample.blogspot.cz/2012/08/a-winrt-behavior-to-turn-flipview-into.html)的详细信息

**编辑**：对于第一个解决方案，您创建一个基类并创建一个列表，其中包含从基类派生的不同对象。然后你使用GridView 的ItemTemplaceSelector 来选择一个合适的DataTemplate。见[http://coding.kulman.sk/using-different-data-templates-with-gridview-in-windows-8-apps/](http://coding.kulman.sk/using-different-data-templates-with-gridview-in-windows-8-apps/)

# jquery - 复杂的嵌套 UL 导航

> ID：13155906
> 
> 赞同：0
> 
> 时间：2012-10-31T10:32:38.200
> 
> 标签：jquery, html, css

我正在尝试将三级 UL 变成一个易于使用的导航系统。

我的想法是拥有第一个 UL，它是 LI 的显示，但隐藏 UL UL 和 UL UL UL，以及它们各自的 LI。

我希望有人能够单击 LI 顶部，然后在该 LI 中显示 UL。

然后的想法是父 UL 与它的 LI 一起隐藏，但不是我刚刚选择的子 UL。

如果随后单击另一个 LI，则显示该 LI 的子 UL 及其各自的 LI。

效果将只是在任何时候显示一个 UL。

我知道这很复杂，我无法理解如何做到这一点 - 我猜是 CSS 和 jQuery 的组合，我尝试了各种方法并搜索了很多东西，因此我求助于这个。

如果有人对我在说什么以及如何实施它有任何想法，那就太好了，因为我什至不知道从哪里开始。

* * *

编辑

我会将 UL 放在固定宽度的 div 内，因此我可以在未使用的 UL 上使用溢出：隐藏和负值来进行“人造隐藏”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:54:12.950

这是我在[JSFiddle](http://jsfiddle.net/S6wSg/)中完成的一个小模型，您只需要采用一些非正统的解决方法来实现这一点。

是的，你需要一些 jQuery 来实现它，我用悬停来做例子，你可以使用你需要的事件，这只是主要的：

```
$('.subdropdown').hover(
    function() { $(this).parent().parent().css({'visibility': 'hidden'});
    $(this).css({'visibility': 'visible'});},
    function() { $(this).parent().parent().css({'visibility': 'visible'});}
);​ 
```

希望这可以帮助。

# eclipse - 自动将 LogCat 保存到 eclipse 中的文件

> ID：13155911
> 
> 赞同：2
> 
> 时间：2012-10-31T10:32:50.327
> 
> 标签：eclipse, logcat

就像在 putty 中您可以配置将 putty 会话保存到日志文件一样，eclipse 中是否有任何选项可以配置为将所有 logcat 消息自动保存到日志文件？我不介意安装一个可以帮助我实现相同目标的插件。

我知道手动选择和保存选项，但这不是我想要的。

# java - 有没有办法从用户访问网站的地方获取国家名称？

> ID：13155912
> 
> 赞同：0
> 
> 时间：2012-10-31T10:32:53.957
> 
> 标签：java

我有一个要求，我需要将用户的国家/地区存储在数据库中。我可以为此保留一个复选框或组合框，但是有什么方法可以在用户无需输入的情况下获取国家信息？有没有办法从用户访问网站的地方获取国家名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:35:52.183

这就是 IP 定位器服务。请参阅示例代码和应用程​​序 @`http://www.geobytes.com/iplocator.htm`虽然源代码是 PHP 的，但您可以尝试用 java 编写它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T10:38:13.383

是的，有一种方法可以做到这一点，但您需要做一些工作。当用户访问您的网站时，您可以使用以下方式获取他/她的 IP 地址：

```
String ip = (request.getHeader("X_FORWARDED_FOR") == null ? request.getRemoteAddr() : request.getHeader("X_FORWARDED_FOR")); 
```

然后你可以把这个IP地址转换成它的二进制形式：

```
long binIp = ipToLong(ip); 
```

功能`ipToLong`是这样的：

```
public long ipToLong(String addr) {
    String[] addrArray = addr.split("\\.");

    return Long.parseLong(addrArray[0]) << 24 +
           Long.parseLong(addrArray[1]) << 16 +
           Long.parseLong(addrArray[2]) << 8 +
           Long.parseLong(addrArray[3]);

} 
```

最后使用IP地址数据库查找这个值属于哪个国家。有几个供应商。我们从[software77](http://software77.net/geo-ip/)获得我们的- 它是免费的 - 并存储在本地数据库中，每月更新一次本地数据库。

几点注意事项：

1.  有时不会设置地址，因此您需要有一些合理的默认值。
2.  有时地址会被欺骗，因此不代表真实的 IP 地址（格式方面），因此您需要进行合理的异常处理。
3.  有时地址会来自保留范围（例如 192.168/16），因此，您需要有一些合理的默认值。

# compilation - 重新编译 Nginx

> ID：13155916
> 
> 赞同：1
> 
> 时间：2012-10-31T10:33:06.063
> 
> 标签：compilation, nginx

我现在在一个实时网站上运行 nginx，但我需要重新编译它以添加一些额外的功能。我使用的命令是。

```
make clean
./configure -- BLA BLA BLA
make
make install 
```

只是为了确认，我不需要停止 nginx，直到我运行' `make install`'对吗？“make”命令花费的时间最长，我只想 100% 确定我不需要尽快停止 Nginx。

所以要确认一下，这实际上意味着只有一两秒钟的停机时间。

```
make clean
./configure -- BLA BLA BLA
make
/etc/init.d/nginx stop
make install
/etc/init.d/nginx start 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:37:06.717

你是对的，make 只是做链接和编译，而 make install 将它安装在系统上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-10T12:31:31.947

您不需要停机。您编译并替换可执行文件。然后你触发 nginx 生成一个新的 master。该过程在这里解释：http: [//nginx.org/en/docs/control.html#upgrade](http://nginx.org/en/docs/control.html#upgrade)

```
New Version - Master - start:
kill -s USR2 `cat /var/run/nginx.pid`

Old Version - Worker - stop:
kill -s WINCH `cat /var/run/nginx.pid.oldbin`
Old Version - Master - stop:
kill -s QUIT `cat /var/run/nginx.pid.oldbin` 
```

如果你想回到旧版本：

```
Old Version - Worker - start:
kill -s HUP `cat /var/run/nginx.pid.oldbin`
New Version - Master - stop:
kill -s QUIT `cat /var/run/nginx.pid` 
```

如果你得到一个文件不能被替换的错误，你的编译选项是错误的。

```
--sbin-path=/usr/sbin/nginx 
```

# ios - 在已存在的应用程序上添加推送通知

> ID：13155920
> 
> 赞同：0
> 
> 时间：2012-10-31T10:33:17.730
> 
> 标签：ios, push-notification, provisioning-profile

我在商店里有一个应用程序的第一个版本。对于这个应用程序的第二个版本，我想启用推送通知。

我看到我必须在供应门户中激活对 appID 的推送，然后重新生成我的应用程序的供应配置文件。

重新生成是否意味着删除第一个并制作另一个？这是否会对验证过程产生影响（第一个版本的配置文件与第二个版本的配置文件不同的问题）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:13:04.183

是的，通过更改应用程序的设置以使用推送，您需要重新生成配置文件，以便创建新的配置文件。这不是问题：如果您的配置文件过期，无论如何您都必须生成一个新配置文件。应用商店提交过程不会根据您之前上传的二进制文件检查配置文件。

# c# - 播放背景音频失败

> ID：13155921
> 
> 赞同：2
> 
> 时间：2012-10-31T10:33:19.057
> 
> 标签：c#, windows-phone-7, silverlight-4.0

我想在 Windows Phone 应用程序中播放背景音频。MSDN 中建议的以下代码不起作用：

```
const string audio = "http://audio.radio24.it/radio24_audio/2012/121028-140-caratteri.mp3";
            AudioTrack canzone = new AudioTrack(new Uri(audio, UriKind.Absolute), "", "", "", new Uri(audio, UriKind.Absolute));
            BackgroundAudioPlayer.Instance.Track = canzone;
            BackgroundAudioPlayer.Instance.Play(); 
```

`The BackgroundAudioPlayer.Instance.PlayState`坚持到未知并且没有声音被再现。我必须使用绝对uri。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:07:04.317

你实现了**AudioPlayerAgent**吗？
尝试阅读本网站[Charles Petzold 的示例中的示例](http://msdn.microsoft.com/zh-tw/magazine/hh781030.aspx)
有关 Windows Phone 7.5 中的后台音频播放器的更多高级信息 检查此网站[Windows Phone COE 的示例](http://blogs.msdn.com/b/wpukcoe/archive/2012/02/09/background-audio-in-windows-phone-7-5-part-1.aspx)
我发现这两个在我实现 BAP 时非常有用

如果您有更多问题，请更新。祝你好运：）

# tapestry - 静态结构、动态行为——这些适用吗？

> ID：13155925
> 
> 赞同：1
> 
> 时间：2012-10-31T10:33:34.223
> 
> 标签：tapestry

我知道有一些这样的问题，但我认为他们没有回答我的问题。

我想允许我的应用程序的管理员用户更改特定页面上的组件及其顺序。所以例如：

页面 A 将包含组件 1、2、3 页面 B 将包含组件 4、3、2

我不是在页面加载之后尝试修改它，而是在之前（例如，可以从数据库中读取页面所需的结构）。

这是否违反了 Tapestry 的静态结构？有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T22:06:05.453

您可以使用 Blocks 和 Delegate 组件来实现这一点。

显然，您将需要研究`get...Block`方法的逻辑，但您应该能够弄清楚一些事情。

在这种情况下，静态结构是指您的标记需要声明所有*可能*呈现的嵌入式组件这一事实。然后，您可以使用逻辑和其他组件来决定按什么顺序呈现什么。

爪哇：

```
public class MyPage
{
    @Inject
    public Block block1;
    @Inject
    public Block block2;
    @Inject
    public Block block3;
    @Inject
    public Block block4;

    public Block getFirstBlock()
    {
        return caseA ? block1 : block4;
    }

    public Block getSecondBlock()
    {
        return caseA ? block2 : block3;
    }

    public Block getThirdBlock()
    {
        return caseA ? block3 : block2;
    }
} 
```

tml：

```
<...>
    <t:block t:id="block1"><t:component1 /></t:block>
    <t:block t:id="block2"><t:component2 /></t:block>
    <t:block t:id="block3"><t:component3 /></t:block>
    <t:block t:id="block4"><t:component4 /></t:block>

    <t:delegate to="firstBlock" />
    <t:delegate to="secondBlock" />
    <t:delegate to="thirdBlock" />
</...> 
```

# ruby - 在 Ruby 中使用 sytem() 时 Ctrl-C 不会退出程序

> ID：13155927
> 
> 赞同：1
> 
> 时间：2012-10-31T10:33:35.453
> 
> 标签：ruby

我有这个程序：

```
5.times do |i|
  puts "Iteration #{i}"
  system("sleep 3")
end 
```

我想在使用 2 次迭代后退出这个程序`Ctrl-C`

如果我点击`Ctrl-C`，会发生这种情况：

```
➜  tmp  ruby system.rb 
Iteration 0
^CIteration 1
^CIteration 2
^CIteration 3
^CIteration 4
^C% 
```

`system()`无论如何，该命令都会运行 5 次。

我该怎么做才能使用 退出执行`Ctrl-C`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:41:19.200

[`Kernel#system`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)在子 shell 中执行给定的命令。这意味着 Ctrl-C 将进入该子shell，而不是您的 ruby​​ 脚本，因此将其困在那里是没有用的。但是，该命令返回一个值，指示它是否成功完成。当命令通过 Ctrl-C 停止时，它不会算作成功完成。所以，检查返回值。

```
5.times do |i|
  puts "Iteration #{i}"
  success = system("sleep 3")
  break unless success
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T10:41:34.227

由于该`system`命令调用的程序获得了中断，因此程序（在本例中为`sleep`）退出。但是 ruby​​ 解释器没有收到中断，它不会退出。

但是如果你检查`system`方法调用的返回值，你可以检测到你正在调用的程序的退出代码的值。因此以下代码有效。

```
5.times do |i|
  puts "Iteration #{i}"
  unless system("sleep 3")
    puts "Got an interupt?"
    exit 0
  end
end 
```

检查[Module: Kernel 中的系统方法参考](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)。

# c# - 在 FlipView 的 RichTextBlock 中格式化文本

> ID：13155933
> 
> 赞同：3
> 
> 时间：2012-10-31T10:33:48.793
> 
> 标签：c#, html, xaml, windows-runtime

我在示例 itemDetailPage 中有 FlipView，并且在字符串中有文本，其中包含 html 标签（粗体、斜体）。我希望这个字符串显示在 FlipView 的richTextBlock 中，但我不知道怎么做。我正在寻找 HTML 和 XAML 之间的转换器，但没有使用 WinRT。我正在研究源代码并寻找答案，我可以将我的 html 字符串转换为 xaml 字符串。看起来像

```
<FlowDocument xml:space=\"preserve\" xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"><Paragraph>Start<Run>i--</Run> something <Run>i++</Run> end of paragraph.</Paragraph><Paragraph>\n\n</Paragraph><Paragraph>Another paragraph <Run>anything</Run>. And ending.</Paragraph><Paragraph>\n\n</Paragraph></FlowDocument> 
```

但是当我绑定到 RichTextBlock 的 Text 属性时，它只是显示为没有格式化的文本。那么如何在 RichTextBlock 中格式化文本呢？我知道可以通过添加文本块来做到这一点，但在 FlipView 中我不知道如何访问richTextBlock。我想使用 RichTextBlock，但不想为 WebView 或某些 WebControl 更改它（我喜欢 RichTextBlock 中的列排序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T20:26:17.587

是的，这个问题一直存在。[Vincent H 在xslt 转换](https://github.com/MacawNL/WinRT-RichTextBlock.Html2Xaml)方面取得了良好的开端。我最近开始使用 Html Agility Pack[扩展它。](http://winrthtml2xaml.codeplex.com/)我的主要动力是处理格式非常糟糕的 Html，我认为我得到了一些至少有用的东西......

# java - 无法从java中的jar加载dll

> ID：13155935
> 
> 赞同：0
> 
> 时间：2012-10-31T10:33:51.820
> 
> 标签：java, dll, jar

我正在集成一个 API，我必须将请求发布给服务提供商。服务提供商提供了一个 .jar 和 .dll 文件以包含在设置中。当我对 .jar 进行反编译时，我看到其中一个文件正在尝试将 dll 加载到静态块中。静态 { System.loadLibrary("dllFile"); }

现在我的问题是，程序在加载 dll 时卡住并突然结束。

我有 Windows 7 64 位系统。因此，我已将我的 dll 文件放在 SysWOW64 中（我也尝试将 dll 放在 System32 中，但这也没有帮助）并且 jar 存在于我的 jre/lib 路径中，但这不起作用任何关于什么的指针这里出错了。

谢谢， 阿克谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T10:50:19.090

使用附加的`-Djava.library.path=<path to your dll>`.

```
java -Djava.library.path=C:\path\to\dll -cp lotsofjars my.package.MainClass 
```

# asp.net - OnSelectionChanged 和 OnDayRender 的基本区别

> ID：13155938
> 
> 赞同：1
> 
> 时间：2012-10-31T10:34:03.583
> 
> 标签：asp.net, calendar

之间的基本区别是`OnSelectionChanged & OnDayRender`什么`<asp:Calendar>`

请尝试回答我的问题，而不是投反对票，因为将来这对像我这样的新程序员很有用。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:36:52.380

[`SelectionChanged`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.selectionchanged.aspx)**是当用户**通过单击日期选择器控件选择一天、一周或一整个月时触发的事件。

[`DayRender`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar.dayrender.aspx)**是当ASP.NET**在服务器端呈现日历的一天时触发的事件。

> 在创建日历控件中的每个日期单元格时引发 DayRender 事件。您可以在创建日期单元格时控制其内容和格式，方法是在 DayRender 事件的事件处理程序中提供代码。

# oracle - 查询 Oracle 物化视图 - 列定义不明确

> ID：13155940
> 
> 赞同：0
> 
> 时间：2012-10-31T10:34:10.227
> 
> 标签：oracle, view, materialized-views

我在 Oracle 中查询视图时遇到问题。

这是视图 (my_cool_view) 定义：

```
SELECT *
  FROM mview1 JOIN
       mview2 USING(col_id) 
```

其中*mview1*和*mview2*是物化视图。我无法访问此物化视图的定义。我试过这个查询：

```
select r.title from my_cool_view r; 
```

并得到***ORA-00918: column ambiguously defined***错误。我的 my_cool_view 中的列子集出现此错误。

如果我运行此查询：

```
select * from my_cool_view; 
```

一切正常。

您在评论中询问 desc my_cool_view ，抱歉我无法提供架构信息，因为它是机密的。我唯一可以说它包含大约 80 列，并且只有一个 (col_id) 不会导致上述错误。

你有什么想法是什么情况以及如何解决它？

提前致谢。

抱歉误导了你，第一个版本的问题太糟糕了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:56:38.267

您可能有 2 个名为 title 的列来自您加入的不同表/视图。如果您选择 *，那么这将起作用，因为重复的标题列将获得不同的别名（如 TITLE1）。当您明确要求标题列之一时，数据库需要知道您想要哪一个，从而引发错误。

只需确保标题列具有不同的别名：

```
 select EMP.TITLE EMP_TITLE, DEPT.TITLE DEPT_TITLE
   FROM   ... 
```

# vhdl - VHDL KITT 扫描仪

> ID：13155942
> 
> 赞同：1
> 
> 时间：2012-10-31T10:34:15.843
> 
> 标签：vhdl, fpga

我尝试在 FPGA LED 上为 KITT 扫描仪编写 VHDL 代码，但我需要更改此代码：

```
 with state select 
            led1 <= '1' when forward1,
                '0' when others;

    with state select
        led2 <= '1' when forward2,
            '0' when others;

    with state select
        led3 <= '1' when forward3, 
            '0' when others;

    with state select
        led4 <= '1' when forward4,
            '0' when others; 
```

到

```
 with state select 
                    led1,led2,led3 <= '1' when forward1,
                        '0' when others;
      with state select
                   led2, led3,led4 <= '1' when forward2,
                    '0' when others;
with state select
                   led3, led4,led5 <= '1' when forward2,
                    '0' when others; 
```

但是当我这样做时，我收到错误 - 预期的“（”或另一个。如何更改此代码以更改乘法输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:25:05.713

你可以这样做：

```
led_select : process(state)
begin
  case state is
    when forward1 =>
     led_states <= "00111";
    when forward2 =>
     led_states <= "01110";
    when forward3 =>
     led_states <= "11100";
    when others =>
     led_states <= (others => '0');
  end case;
end process;

led1 <= led_states(0);
led2 <= led_states(1);
led3 <= led_states(2);
led4 <= led_states(3);
led5 <= led_states(4); 
```

`led_states`声明为的信号在哪里`signal led_states : std_logic_vector(4 downto 0);`

# c++ - DevPartner 的问题

> ID：13155943
> 
> 赞同：0
> 
> 时间：2012-10-31T10:34:18.843
> 
> 标签：c++, visual-c++, devpartner

我已经安装了 DevPartner，我正在使用 Visual Studio 2010。

但是，当我启动“从覆盖分析开始”时，什么也没有发生。

在视频中，他们显示在 Options->DevPartner->Code review 下，应该有一个项目列表。但我没有看到这样的清单。

如果你能帮助我，那就太好了。

非常感谢。

钦坦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T10:49:30.373

覆盖率分析和代码审查是 Devpartner Suite 中的 2 个独立产品。

覆盖分析用于确定在项目运行中执行了哪些代码行。您还可以合并多次运行，以全面了解您已执行了多少代码。覆盖分析适用于本机（C、C++）和托管语言。

当您使用覆盖率分析启动应用程序时，您只会看到一个小工具栏出现，允许您拍摄快照或停止记录覆盖率信息。程序退出后，将收集最终会话并在 Visual Studio 中显示。除非你的执照有问题。另一个问题是在启动 Visual Studio 并打开您的项目时，您可能会看到类似于 Devpartner 启动会话控制服务的错误。

代码审查用作托管 (.Net) 代码的静态分析。它不会运行您的项目，而是分析项目中的代码并确定是否有任何代码违反了您选择运行的规则集。

# jquery - div 没有根据其内容的大小进行扩展

> ID：13155944
> 
> 赞同：-1
> 
> 时间：2012-10-31T10:34:18.873
> 
> 标签：jquery, html

我在父 div 中有一个父 div 和 3 个子 div。父 div 和子 div 的高度都是 100% 子 div 没有根据其内容扩展。子 div 有“溢出：隐藏”，因为我不希望子 div 中有滚动条。我该怎么做才能使子 div 随着其内部内容的大小增加而扩展。

```
$(document).ready(function()
{ 
```

var focusDivId=14, filesCount=5; var tabid = 'stTab-'+(Math.floor(Math.random()*10000)); $('body').append($('')); $tabs.tabs('add','#'+tabid,label); for(i=0;i'+(i+1)+'');

```
 }
              $.ajax({
                    async: false,
                    type:  "GET",
                    url  : "00014.html",
                    dataType: "html",
                    success : function(text){
                    //   alert("addedFirst");
                         $('#div_'+(focusDivId)+'_parent').css({display:'block'});
                         $('#div_'+(focusDivId)+'_parent').append('<div id="div_'+(focusDivId)+'_child" style="overflow:hidden;display:block;height:100%;width:100%;"></div>');
                         $("#div_"+(focusDivId)+"_child").append(text);
                         },
                     error: function(text) {
                         alert ("Inside Error Block: Loc 101");
                         return false;
                        }
            });

            $.ajax({
                    async: false,
                    type:  "GET",
                    url  : "00013.html",
                    dataType: "html",
                    success : function(text){
                           $('#div_'+(focusDivId-1)+'_parent').css({display:'block'});
                         $('#div_'+(focusDivId-1)+'_parent').append('<div id="div_'+(focusDivId-1)+'_child" style="overflow:hidden;height:100%;width:100%;"></div>');
                         $("#div_"+(focusDivId-1)+"_child").append(text);

                         },
                     error: function(text) {
                         alert ("Inside Error Block: Loc 101");
                         return false;
                        }
            });

            $.ajax({
                    async: false,
                    type:  "GET",
                    url  : "00015.html",
                    dataType: "html",
                    success : function(text){
                          $('#div_'+(focusDivId+1)+'_parent').css({display:'block'});
                         $('#div_'+(focusDivId+1)+'_parent').append('<div id="div_'+(focusDivId+1)+'_child" style="overflow:hidden;height:100%;width:100%;"></div>');
                         $("#div_"+(focusDivId+1)+"_child").append(text);
                         },
                     error: function(text) {
                         alert ("Inside Error Block: Loc 101");
                         return false;
                        }
            }); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:25:55.150

如果您设置了 div 的尺寸，`overflow: hidden`则将执行其预期行为并剪切任何位于 div 之外的内容。

`overflow: auto`将显示滚动条

`overflow: visible`是默认值，会导致 div 展开

# php - php检查数组中的重复值

> ID：13155946
> 
> 赞同：1
> 
> 时间：2012-10-31T10:34:19.137
> 
> 标签：php

我有一个关于数组的问题。

我已经制作了一个ID数组。

数组看起来有点像这样。

```
$iIds[0] = 12  
$iIds[1] = 24  
$iIds[2] = 25  
$iIds[3] = 25  
$iIds[4] = 25  
$iIds[5] = 30 
```

现在我需要代码来查看数组中是否有任何值多次。然后，如果该值在数组中出现 3 次，则将该值注入另一个数组。

我尝试使用 array_count_values() ，但它以值作为键返回。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:38:42.510

```
$iIds[0] = 12  
$iIds[1] = 24  
$iIds[2] = 25  
$iIds[3] = 25  
$iIds[4] = 25  
$iIds[5] = 30
$counts = array_count_values($iIds);
$present_3_times = array();
foreach($counts as $v=>$count){
    if($count==3)//Present 3 times
        $present_3_times[] = $v;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T10:48:27.137

1.  计数值
2.  过滤器阵列
3.  将数组翻转回你想要的样子

    $cnt = array_count_values($iIds);

    $filtered = array_filter($cnt, create_function('$x', 'return $x == 3;'));

    $final = array_flip($filtered);

或者

```
array_flip(array_filter( array_count_values($iIds), create_function('$x', 'return $x == 3;'))); 
```

见：[http ://codepad.org/WLaCs5Pe](http://codepad.org/WLaCs5Pe)

**编辑**

如果最终数组中可能有多个值，我建议不要翻转过滤后的数组，只需使用 array_keys，这样它就会变成：

```
$cnt = array_count_values($iIds);

$filtered = array_filter( $cnt, create_function('$x', 'return $x == 3;'));

$final = array_keys($filtered); 
```

见：[http ://codepad.org/ythVcvZM](http://codepad.org/ythVcvZM)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T10:51:50.480

要创建唯一的数组，请使用`array_unique`php 函数，然后要重新排列数组的键，请使用`array_values`php 函数，如下所示。

```
$iIds[0] = 12 ;
$iIds[1] = 24 ; 
$iIds[2] = 25 ;
$iIds[3] = 25 ; 
$iIds[4] = 25 ;
$iIds[5] = 30 ;

$unique_arr = array_unique($iIds);
$unique_array  = array_values($unique_arr);

print_r($unique_array); 
```

**为了获得一个值数组，在数组中作为重复值出现了 3 次**

```
$iIds[0] = 12 ; 
$iIds[1] = 24 ;
$iIds[2] = 25 ;
$iIds[3] = 25 ;
$iIds[4] = 25 ;
$iIds[5] = 30 ;

$arr =  array_count_values($iIds);

$now_arr = array();
foreach($arr AS $val=>$count){
   if($count == 3){
      $now_arr[] = $val; 
   }
 }
 print_r($now_arr); 
```

谢谢

# c - gcc 在系统调用之前优化变量

> ID：13155950
> 
> 赞同：1
> 
> 时间：2012-10-31T10:34:33.650
> 
> 标签：c, compiler-construction, arm

使用 Codesourcery arm-linux-eabi 交叉编译器并且编译器不执行某些代码时遇到问题，因为它认为它没有被使用，特别是对于系统调用。有没有办法解决这个问题？

例如，此代码不会初始化变量。

```
unsigned int temp = 42;
asm volatile("mov R1, %0 :: "r" (temp));
asm volatile("swi 1"); 
```

在这种情况下， temp 永远不会被初始化为值 42。但是，如果我在初始化后添加一个 printk，它会被初始化为正确的值 42。我尝试过

```
unsigned int temp __attribute__ ((used)) = 42; 
```

仍然不起作用，但我收到一条警告消息：

> 'used' 属性被忽略 [-Wattributes]

这是在linux内核代码中。

有小费吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T13:05:41.103

这不是使用内联汇编的正确方法。如所写，这两个语句是分开的，编译器没有理由必须保留两者之间的任何寄存器值。您需要将两个汇编指令放在*同一个*内联汇编块中，并具有适当的输入和输出约束，或者您可以执行以下操作以使编译器更高效：

```
register unsigned int temp __asm__("r1") = 42;
__asm__ volatile("swi 1" : : "r"(temp) : "memory"); 
```

（请注意，我在 clobber 列表中添加了内存；我不确定您正在制作哪个系统调用，但是如果系统调用写入用户空间中的任何对象，则需要在 clobber 列表中列出“内存”。）

# iphone - 剪辑或剪切声音文件

> ID：13155954
> 
> 赞同：0
> 
> 时间：2012-10-31T10:34:48.000
> 
> 标签：iphone, ios5, ios4, ios6

有没有一种方法可以以编程方式剪切目标 c 中的音频文件。扩展名为 mp3、caf、wav 等的文件。谁能帮我找到一个。我已经用谷歌搜索了好几天，但仍然找不到任何合适的解决方案。任何帮助表示赞赏。对不起，我的英语不好。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T11:42:44.363

如果您想剪裁波形，最简单的方法是对每个样本执行剪裁。伪代码：

```
Sample clipSample(Sample sample) {
  if(abs(sample) > clipLimit) {
    return sign(sample) * clipLimit
  } else {
    return sample
  }
} 
```

这是一个简单的削峰器。通常这种削波会产生大量令人不快的失真。如果你想避免这种情况，你应该寻找一个像样的压缩器或一个像样的限制器。

# hibernate - JNDI 类型规范与 Spring 冲突

> ID：13155958
> 
> 赞同：2
> 
> 时间：2012-10-31T10:35:02.777
> 
> 标签：hibernate, jpa, spring-mvc, jndi

我正在尝试为我的应用程序提供 JNDI 数据源以及 spring。如果我不注入任何类，配置工作正常如果我注入我正面临下面提到的问题

**服务器.xml（Tomcat）**

```
<GlobalNamingResources>
   <Resource name="jdbc/purpleDS" auth="Container" type="javax.sql.DataSource"
    driverClassName="oracle.jdbc.OracleDriver" url="jdbc:oracle:thin:@localhost:1521:xe"
    username="test" password="test" maxActive="100" maxIdle="30"
    maxWait="10000" />

</GlobalNamingResources> 
```

**上下文.xml**

```
<Context>
    <!-- Oracle Database configuration -->
    <ResourceLink global="jdbc/purpleDS" name="jdbc/purpleDS" type="javax.sql.DataSource"/>
</Context> 
```

**持久性.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">

    <persistence-unit name="CoreProject" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <non-jta-data-source>jdbc/purpleDS</non-jta-data-source>

            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.format_sql" value="true" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" />
            <property name="hibernate.search.default.directory_provider"
                value="org.hibernate.search.store.impl.FSDirectoryProvider" />

            <property name="hibernate.search.default.indexBase" value="indexes" />

        </properties>

    </persistence-unit>
</persistence> 
```

**web.xml**

```
<resource-ref>
    <description>Oracle DataSource </description>
    <res-ref-name>jdbc/purpleDS</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

**应用程序-Context.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:jee="http://www.springframework.org/schema/jee" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.1.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing 
        infrastructure -->

    <!-- Enables the Spring MVC @Controller programming model -->
    <annotation-driven />
    <tx:annotation-driven />
    <context:component-scan base-package="com.purple.service" />
    <context:component-scan base-package="com.purple.app" />
    <context:component-scan base-package="com.purple.dao" />
    <context:component-scan base-package="com.purple.domain" />

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving 
        up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources 
        in the /WEB-INF/views directory -->
    <beans:bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <beans:property name="prefix" value="/WEB-INF/views/" />
        <beans:property name="suffix" value=".jsp" />
    </beans:bean>

    <jee:jndi-lookup id="purpleDS" jndi-name="jdbc/purpleDS" />
    <beans:bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <beans:property name="dataSource" ref="purpleDS" />
    </beans:bean>
    <beans:bean id="transactionManager"
        class="org.springframework.orm.jpa.JpaTransactionManager">
        <beans:property name="entityManagerFactory" ref="entityManagerFactory" />
    </beans:bean>

</beans:beans> 
```

我面临以下错误

```
ERROR: org.springframework.web.servlet.DispatcherServlet - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'CustProductMapService': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.purple.dao.ICustProductMapDAO com.purple.service.CustProductMapService.custProductMapDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'CustProductMapDAO': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'purpleDS' must be of type [javax.persistence.EntityManagerFactory], but was actually of type [org.apache.tomcat.dbcp.dbcp.BasicDataSource]
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
at javax.servlet.GenericServlet.init(GenericServlet.java:212)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1206)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
at org.apache.catalina.core.StandardService.start(StandardService.java:525)
at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.purple.dao.ICustProductMapDAO com.purple.service.CustProductMapService.custProductMapDAO; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'CustProductMapDAO': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.BeanNotOfRequiredTypeException: Bean named 'purpleDS' must be of type [javax.persistence.EntityManagerFactory], but was actually of type [org.apache.tomcat.dbcp.dbcp.BasicDataSource]
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:506)
at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87)
at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
... 34 more 
```

任何人都可以帮我确定问题还是我错过了什么？

感谢和问候维杰

# javascript - 禁用 Mozilla Firefox 以存储 javascripts

> ID：13155963
> 
> 赞同：2
> 
> 时间：2012-10-31T10:35:26.880
> 
> 标签：javascript, security, firefox, browser-cache

现在，如果您在 Mozilla 中打开查看页面源代码，您将看到一个外部 javascript 链接。如果您单击该链接，浏览器将显示浏览器缓存中的 javascript 函数。但是如果您选择查看>>重新加载，浏览器将请求服务器。

在 IE 和 Chrome 上，您单击查看源代码中的超链接，它将始终向服务器请求。有没有办法在 Mozilla 上获得相同的行为？

**编辑**

我是一名网站管理员，我想知道这将使用 javascript 或任何服务器端代码来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:57:03.007

您没有说如果您是**网站管理员**并且想要禁用脚本缓存，或者您是**网络冲浪者**并且想要禁用您访问的网站的脚本缓存。

## 如果您是网站管理员

如果您是网站管理员，那么您可以使用正确`Cache-Control`的`Expires`HTTP 标头来实现它，例如。通过设置`Cache-Control`为`max-age=0`和`Expires`当前时间。（有关如何控制网站缓存的更多信息，请参阅我[在 github 页面上](https://stackoverflow.com/questions/12556593/determining-a-page-is-outdated-on-github-pages/13106972#13106972)对确定页面已过时的回答。）

请记住，它会给您的服务器带来更多负载，并使您的网站为访问者加载更长的时间，并且[加载时间会影响您的底线](http://blog.kissmetrics.com/loading-time/)。

## 如果您是网络冲浪者

如果您是访问者并且想要重新加载缓存的资源，那么您可以使用[许多 Firefox 附加组件来控制](https://addons.mozilla.org/en-us/firefox/search/?q=cache)网站的缓存，例如： [清除缓存](https://addons.mozilla.org/en-us/firefox/addon/clearcache/)、 缓存[切换](https://addons.mozilla.org/en-us/firefox/addon/cachetoggle/)、 [空缓存按钮](https://addons.mozilla.org/en-us/firefox/addon/empty-cache-button/)等等。

# delphi - TWSDLLookup.Destroy 方法中的 Delphi XE 内存泄漏

> ID：13155964
> 
> 赞同：5
> 
> 时间：2012-10-31T10:35:28.370
> 
> 标签：delphi, memory-leaks, hook

我正在使用德尔福 XE。我在使用 Delphi Soap 时遇到了内存泄漏问题。结果是由于缺少 .Free call in `TWSDLLookup.Destroy`，如[QC 91160中所述](http://qc.embarcadero.com/wc/qcmain.aspx?d=91160)

我遇到的问题是所描述的解决方法，它只是添加`FLookup.Free`到`TWSDLLookup.Destroy`方法中。
我不想更改 Delphi 源，所以我尝试将单元复制到我的项目文件夹，进行更改并重新编译，如Tom's answer 中所述[。](https://stackoverflow.com/questions/1533686/can-i-recompile-the-pas-files-used-by-the-delphi-ide)这种技术的问题在于，它显然只有在您还重新编译所有相关单元时才有效。我尝试仅复制`WSDLLookup.pas`到我的项目目录，但出现 Stackoverflow 错误。我不熟悉 Web 服务/SOAP，所以我不知道如果我使用这种技术我应该复制哪些其他单元。

Rob Kennedy 在同一页上的回答描述了一种涉及代码挂钩的不同技术——但它似乎不适用于对象方法。我已按照他的建议完成并下载了 TNT Unicode 控件的免费代码并找到了相关程序，但我一直无法找到有关如何挂钩对象方法的信息——如果这确实可行的话。如果我能做到这一点，我会挂接`TWSDLLookup.Destroy`并添加`FLookup.Free`呼叫。

任何有关如何解决此问题的想法将不胜感激。我是一个新手程序员，所以我希望我错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T10:49:12.960

您正在尝试做的事情实际上可以正常工作。我自己测试了一下。这是我使用的项目文件：

```
program WSDLLookupTest;

{$APPTYPE CONSOLE}

uses
  WSDLLookup in 'WSDLLookup.pas';

var
  intf: IInterface;

begin
  intf := GetWSDLLookup as IInterface;
end. 
```

我制作了该`WSDLLookup.pas`文件的副本并将其放在与 .dpr 文件相同的目录中。然后，在副本而不是原始文件中，我修改了`TWSDLLookup.Destroy`.

```
destructor TWSDLLookup.Destroy;
begin
  Beep;
  ClearWSDLLookup;
  FLookup.Free;
  inherited;
end; 
```

我添加了`Beep`以向自己证明这段代码确实正在执行。

在您的位置上，我肯定会使用此解决方案，而不是尝试使用代码挂钩。当然，另一个简单的解决方案是升级到更高的 Delphi 版本。

需要注意的一件事是在升级时记得移除修改后的单元。XE2 中修复了泄漏。

# android - phonegap cloud build app (apk) 不适用于 Android 和 Iphone

> ID：13155974
> 
> 赞同：0
> 
> 时间：2012-10-31T10:36:04.767
> 
> 标签：android, cordova

我在本地机器 Android 上创建了一个应用程序，一切正常。地图/图像滑块/价格滑块/启动画面。我已经测试了整个应用程序在模拟器和真正的 android 设备上运行良好。 **但是当我上传 zip Soln & Run Cloud build 和 Install cloud build 时，似乎没有任何效果。**

*   飞溅不来。仅显示着陆页。我无法导航到其他页面 服务器请求不起作用。
*   应用程序纯粹是基于 html 的，其中没有使用任何意图或插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T11:53:26.580

实际上问题出在 Adob​​e 云中。第二天我们使用相同的构建，它开始工作。但是启动画面仍然无法正常工作。我们计划为 android 和 iOS 提供 2 个构建版本。我们将通过安装 SDK 在我们的服务器上进行 Android 构建。我们将在云上进行 IOS 构建。由于云构建 apk 大小>6mb，而本地构建 apk <2mb

# iphone - iOS - 创建没有小时/分钟和忽略夏令时的 NSDate

> ID：13155982
> 
> 赞同：4
> 
> 时间：2012-10-31T10:36:22.570
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我正在尝试从我的`NSDate`对象中删除小时和分钟

```
keyDate = [[array objectAtIndex:i] date];
unsigned int flags = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit;
NSCalendar* calendar = [NSCalendar currentCalendar];

NSDateComponents* components = [calendar components:flags fromDate:keyDate];
keyDate = [[calendar dateFromComponents:components] dateByAddingTimeInterval:[[NSTimeZone localTimeZone]secondsFromGMT]]; 
```

它工作正常，直到 2013 年 4 月，之后我的`NSDate`对象以 -1 小时班次创建。我很确定这是因为夏令时。

如何使我的`NSDate`对象全年为 00:00:00 +0000 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T10:51:51.540

`NSDate`对象本质上存储为 GMT 值。您在这里遇到的问题是您正在使用 currentCalendar（目前可能在 DST 中）和 localTimeZone secondsFromGMT 进行计算，这取决于一年中的时间。

这里最好的解决方案是使用 GMT 的 NSCalendar，而不是基于时区变化，如果（如您所指出的）您希望它们始终为 +0000。

或者，您可以更改为使用`NSTimeZone`'s `secondsFromGMTForDate:`，它考虑了相关日期/时间的 DST。

# pdf - 是否存在使用命令行且没有对话框的虚拟 pdf 打印机？

> ID：13155983
> 
> 赞同：2
> 
> 时间：2012-10-31T10:36:26.130
> 
> 标签：pdf

我正在.NET 中开发一个模块。我需要将一些报告直接打印到虚拟打印机 pdf 上。我需要通过命令行传递所有参数（如文件名），并且需要不显示对话框。我可以使用哪个虚拟 pdf 创建器？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T08:25:09.243

见 PDFCreator，[http ://www.pdfforge.org](http://www.pdfforge.org) [http://sourceforge.net/projects/pdfcreator](http://sourceforge.net/projects/pdfcreator)

> 引用自帮助：使用配置文件 您可以定义多个配置文件。每个配置文件都有一组给定的设置，这些设置定义了输出文件的设置以及对其进行的处理（保存后打印、调用操作等）。要了解有关可用选项的更多信息，请参阅本章的其他部分。

# jquery - jQuery同位素插件水平滚动

> ID：13155985
> 
> 赞同：3
> 
> 时间：2012-10-31T10:36:28.667
> 
> 标签：jquery

[小提琴](http://jsfiddle.net/xKjUv/19/)- 只是希望它根据[文档示例](http://isotope.metafizzy.co/docs/layout-modes.html)水平滚动。我不知道为什么它不起作用。

```
$('#container').isotope({
  masonry: {
    columnWidth: 240
  }
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-31T10:55:51.340

您忘记使用`layoutMode`告诉它使用水平布局的选项。

```
$('#container').isotope({
    layoutMode: 'masonryHorizontal',
    masonryHorizontal: {
        rowHeight: 160
    },
    resizesContainer: false
}); 
```

*注意：文档似乎也缺少这一点，但在所有其他选项中都提到了它，因此您可以推断它*

# sql - 在oracle中查找一个月中的周数

> ID：13155988
> 
> 赞同：1
> 
> 时间：2012-10-31T10:36:30.960
> 
> 标签：sql, oracle, date-arithmetic

我有一张桌子，我已经存储了所有星期一，例如（10 月 1 日、10 月 8 日、10 月 15 日、10 月 22 日、10 月 29 日），我需要找出那个月的星期，就像 10 月 1 日一样，它将是 1、10 月 8 日 2此后.. 9 月计数器应再次从 1 开始。这可以通过sql查询来完成吗，数据库是oracle 10g？

如果本月的第一个星期一即将到来，则该月的第一个星期一应标记为 1，其第二周但需要标记为 1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T10:42:23.860

```
select to_char(your_date,'W') from dual; 
```

会做的。

一个很好的分析表在[这里](http://www.techonthenet.com/oracle/functions/to_char.php)：

这是[一个 SQL Fiddle 来证明它](http://sqlfiddle.com/#!4/80826/4)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-09T16:14:45.730

查询中需要稍作更改，检查 2014 年 6 月 1 日，它显示为第一周 = 2。使用以下查询进行检查。相同情况适用于 2017 年 1 月 1 日

选择 to_date('06/01/2014','mm/dd/yyyy') curr_day, next_day(trunc(to_date('06/01/2014','mm/dd/yyyy'),'mm')-8 , '太阳') prev_week, trunc( (to_date('06/01/2014','mm/dd/yyyy')-next_day(trunc(to_date('06/01/2014','mm/dd/yyyy') ),'mm')-8, 'sun'))/7 )+1 "week" from dual;

**正确的查询应该是：**

*select to_date('06/01/2014','mm/dd/yyyy') curr_day, next_day(trunc(to_date('06/01/2014','mm/dd/yyyy'),'mm')-7, 'sun') prev_week, trunc( (to_date('06/01/2014','mm/dd/yyyy')-next_day(trunc(to_date('06/01/2014','mm/dd/yyyy'),'mm')-7, 'sun'))/7 )+1 "week" from dual;*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T11:37:43.533

来源[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:7482139067917](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:7482139067917)

```
select 
x,
next_day(trunc(x,'mm')-8, 'sun'),
trunc( (x-next_day(trunc(x,'mm')-8, 'sun'))/7 )+1 "week"
from t; 
```

一周从星期一'MON'开始

有你可以检查它[SQL Fiddle](http://sqlfiddle.com/#!4/68b32/87/0)

# jquery - 使用 jquery AJAX 索引 solr

> ID：13155990
> 
> 赞同：3
> 
> 时间：2012-10-31T10:36:33.633
> 
> 标签：jquery, ajax, solr

# 是否可以使用 jquery AJAX 索引（添加/更新）solr？

网上没有例子，我一直在尝试但没有成功。下面是我的代码

```
 try {
            $.ajax({
                type: "POST",
                url: "http://192.168.10.113:8080/solr/update/json?commit=true",
                data: { "add": { "doc": { "id": "222222", "name": "Ruby on Trails"}} },
                contentType: "application/json",
                dataType: 'jsonp',
                crossDomain: true,
                jsonp: 'json.wrf',
                success: function (data) { alert(data); },
                failure: function (errMsg) {
                    alert(errMsg);
                }
            });
        }
        catch (err) {
            alert(err);
        } 
```

我的 tomcat 服务器日志如下所述。[`31/Oct/2012:15:56:24 +0530] "GET /solr/update/json?commit=true&json.wrf=jQuery1820996771614998579_1351662048057&add%5Bdoc%5D%5Bid%5D=222222&add%5Bdoc%5D%5Bname%5D=Ruby+on+Trails&_=1351678643653 HTTP/1.1" 200 159`

虽然它说 200，但该文档并未添加到 solr。我已经等待了足够多的时间并重复了几次该过程，以消除 solr server 的提交策略是这里的罪魁祸首。在 chrome 浏览器中，它说 Uncaught SyntaxError: Unexpected token < 但这太笼统了，无法猜测。这是另一个问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T12:12:41.253

我有同样的问题。[这个网站](http://skipperkongen.dk/2011/01/11/solr-with-jsonp-with-jquery/)帮助了我：

```
$.ajax({
    url: "...",
    dataType: 'jsonp',
    jsonp: 'json.wrf',
    data: {
      q: "tag:" + request.term + "*"
    },
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T11:45:53.810

你需要仔细检查你实际上在做什么。首先，浏览器中未捕获的异常是一个不好的迹象，因为一旦引发它将停止任何 JavaScript 执行。即使您成功地进行了 solr 更新，您也不会看到成功和错误功能。确保在继续之前摆脱它。其次，您正在执行 POST 请求，并且您的日志显示 GET。您确定该日志条目对应于 jQuery 请求吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T05:20:45.620

我也有同样的问题（Solr 4.5.1/JQuery 2.0.3）。我设法通过使用 GET Update API 解决了这个问题。我确认更新通过了我的 SOLR：

```
var id = "012345;
var cat = "foo";
var url = "http://localhost:8983/solr/update/json?commit=true";
var updateQuery = "<add><doc><field name='id'>" + id + "</field><field name='cat' update='set'>" + cat + "</field></doc></add>";

updateQuery = encodeURIComponent(updateQuery);
$.ajax({
    url: "http://localhost:8983/solr/update?commit=true&stream.body=" + updateQuery,
    type: "GET",
    crossDomain: true,
    dataType: 'jsonp',
    jsonp: 'json.wrf',
    success: function() { alert("success"); },
    error: function() { alert("error"); }
}); 
```

但是，即使使用这种方法，在 Chrome 上我仍然会收到以下错误。

' Uncaught SyntaxError: Unexpected token < '

# jsp - 是否有可能 使用其完整路径名的页面？

> ID：13155994
> 
> 赞同：2
> 
> 时间：2012-10-31T10:36:51.677
> 
> 标签：jsp, include

有`<jsp:include page="C:/Documents and Settings/admin/My Documentslibrary/example.jsp"></jsp:include>`可能吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T10:51:22.993

没有。 jsp:include 可以有相对路径或表达式。它不能包含协议名称、端口号或域名。URL 可以是绝对的或相对于当前 JSP 页面的。如果它是绝对的（以 / 开头），则路径名由您的 Web 或应用程序服务器解析。

# java - 预期异常的问题

> ID：13155998
> 
> 赞同：1
> 
> 时间：2012-10-31T10:37:10.047
> 
> 标签：java, testng, powermock

这里报告了一个问题：[http ://code.google.com/p/powermock/issues/detail?id=366](http://code.google.com/p/powermock/issues/detail?id=366)

我检查了检查Testng中条件的类（Invoker），并使用`isAssignableFrom`

**有没有原因，为什么不只是比较类名？** 在这种情况下存在一个问题，因为使用了不同的类加载器，因此该方法返回 false 并且测试在不应该时失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T19:45:22.513

我认为首先要检查的是为什么 PowerMock 使用自己的类加载器第二次加载现有类，这可能会导致其他类型的问题。

# calendar - SQL Server CE 选择 2 个日期之间每年的员工职位数

> ID：13155999
> 
> 赞同：3
> 
> 时间：2012-10-31T10:37:13.977
> 
> 标签：calendar, sql-server-ce, gaps-and-islands

我有一个`Employees`带有列的表`ID, PostID, StartDate, EndDate`。

样本数据

```
ID   PostID  StartDate   EndDate
----------------------------------------
1    1       2005/15/08   null      <---Null is still employed
2    2       2006/02/04  2006/08/06
3    1       2004/03/07  9999/12/31 <--- Can also be still Employed
4    2       2008/04/01   null 
```

正确的结果是

```
Year Post Total
2004 1    1
2005 1    2
2006 1    2
2006 2    1
2007 1    2
2007 2    0
2008 1    2
2008 2    1 
```

注意2007年`EmployeeID = 2 PostID = 2`已经终止（`Endate = 2006/08/06`）

想要返回特定 PostID 的总和

我用了

```
SUM(CASE WHEN PostID=1 THEN 1 ELSE 0 END) HPMP, 
  SUM(CASE WHEN PostID=4 THEN 1 ELSE 0 END) HPN,  
  SUM(CASE WHEN PostID=6 THEN 1 ELSE 0 END) HPMW 
```

获取特定的帖子

问题是我需要在 1990 年到 2012 年之间的每一年进行分组

**重要提示：**我使用的是 SQL Server CE，不能使用脚本或存储过程。

必须是按语句分组的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:44:53.847

首先，您需要一张年份表。一些 DBMS 有办法即时创建这些。假设一个年份表有一个年份列，并且每年有一行，那么以下应该可以工作：

```
Select
  y.Year,
  e.PostID,
  Count(*) As Total
From
  Years y
    Inner Join
  Employees e
    On y.Year >= Year(e.StartDate) And (y.Year <= Year(e.EndDate) Or e.EndDate Is Null)
Group By
  y.Year,
  e.PostID
Order By
  1, 2 
```

您可以添加 where 子句来限制年份范围。例如，其中 y.Year >= Year(GetDate()) - 5 并且 y.Year <= Year(GetDate())

如果您也想包含零：

```
Select
    y.Year,
    p.PostID,
    Count(e.ID) As Total
From
    Years y
        Cross Join
    (Select Distinct PostID From Employees) p
        Left Outer Join
    Employees e
        On 
            y.Year >= Year(e.StartDate) And 
            (y.Year <= Year(e.EndDate) Or e.EndDate Is Null) And
            p.PostID = e.PostID
Group By
    y.Year,
    p.PostID
Order By
    1, 2 
```

如果你有一个 Posts 表，你会使用它而不是 select distinct 位