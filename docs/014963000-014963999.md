# StackOverflow 问答 14963000-14963999

# android - Eclipse - Android可绘制图像资源不刷新

> ID：14963001
> 
> 赞同：3
> 
> 时间：2013-02-19T16:53:26.500
> 
> 标签：android, eclipse, android-resources, eclipse-adt

我在 Windows 7 上为我的 Android 2.2 项目使用 Eclipse (4.2.1 Juno)。我的可绘制文件夹中有几个 PNG 资源，我发现如果我编辑我的 PNG 文件（Paint/Photoshop 等），Eclipse 无法识别文件已更改，并且 ADT 图形布局设计器仍显示旧版本图片。我尝试刷新项目文件夹列表，尝试执行 Project->Clean 但都没有任何影响。我发现让 Eclipse 识别新映像版本的唯一方法是完全退出并重新启动，这很痛苦。

是否有一些设置可以告诉 Eclipse 不要“缓存”图像并始终从磁盘读取最新版本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T17:09:43.900

在 Eclipse 中尝试，`Project -> Clean` 然后选择您的项目。这将删除您的`R.java`文件并生成新文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:56:59.583

这是 Eclipse 的一个常见问题，它无法识别工作区中文件的外部更改。我发现可以稍微解决这个问题的唯一方法（除了疯狂地刷新）是外部工具配置中的刷新设置。也就是说，如果您运行例如 Ant 构建，您可以告诉 eclipse 之后刷新工作区或特定资源。我不知道有任何自动方法可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:05:50.657

您应该在添加图像后尝试保存所有未保存的资源和文件，然后再试一次。尝试通过清理单个工作项目和清理所有项目来清理这两个选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-17T07:56:22.820

我不知道自动设置，但我发现了一个相对简单的手动操作，看起来很有效。我遇到了和你一样的麻烦；现在，对于我来说，以下过程似乎与 Eclipse Juno 4.2.1 一致。

单击“res”文件夹将其选中，然后按 F5 刷新。还要确保您的 PNG 文件时间戳已被触及。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-26T07:46:16.317

缓存在 bin\res 文件夹中的资源。

1.  创建删除包含所有内容的文件夹 bin\res 的脚本。

2.  将此脚本添加为构建器列表中的外部工具。

3.  在构建器列表中设置位置 - 在 CDT 构建器之后。列表中的第二位。如果没有 CDT 生成器 - 首先设置它。

4.  享受。

# matplotlib - matplotlib 3d表面上的连续阴影

> ID：14963004
> 
> 赞同：7
> 
> 时间：2013-02-19T16:53:44.663
> 
> 标签：matplotlib, 3d

在 matplotlib 3D 绘图中，我可以设置确定表面上可见面总数的行/列数

```
s=ax.plot_surface(x,y,z, color='gray', shade=True, rstride=1,cstride=1) 
```

其中 rstride 和 cstride 的数字越小，面就越小。因为我也在这个表面上绘制流线/轨迹，所以我想去掉面的边缘。现在，与

```
s.set_linewidth(0) 
```

并设置较低的 rstride 和 cstride 值我几乎得到了我想要的，即表面上几乎连续变化的颜色，从而提供了良好的 3D 效果。

不幸的是，线条留在那里，就像脸之间的空白处。有没有办法做到这一点？也许我只是缺少一个简单的命令..

编辑：生成表面的代码很长，在这里报告它。我附上了上面写的解决方法的结果快照。![带有白线的表面](../Images/d5271b70791c45c826d5bb38f7d43a2b.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T10:43:36.263

你也试过`antialiased=False`在那里添加吗？

```
surf = ax.plot_surface(X, Y, Z, rstride=1, cstride=1) 
```

![在此处输入图像描述](../Images/54fc3e9723a66025e016f095fa053599.png)

```
surf = ax.plot_surface(X, Y, Z, rstride=1, cstride=1, linewidth=0) 
```

![在此处输入图像描述](../Images/392cb8193cf46b08ac1d5a9015276c39.png)

```
surf = ax.plot_surface(X, Y, Z, rstride=1, cstride=1, linewidth=0, antialiased=False) 
```

![在此处输入图像描述](../Images/3128d7f773238b16b9102723b0003de1.png)

# d3.js - 在 d3.js 中从 GeoJson 绘制地图

> ID：14963005
> 
> 赞同：0
> 
> 时间：2013-02-19T16:53:45.317
> 
> 标签：d3.js, gis

我正在尝试使用 d3.js 和从卡尔加里市的开放数据目录下载的形状文件在 javascript 中绘制地图。城市提供了一个形状文件，我使用它转换成一个 GeoJSON

```
ogr2ogr -f geoJSON output.json CALGIS.ADM_COMMUNITY_DISTRICT.shp 
```

然后我将文件修剪成一个单一的形状，以确保我的工作正常。

```
{
"type": "FeatureCollection",

"features": [

    { "type": "Feature", "properties": { "GEODB_OID": 924.0, "NAME0": "Residential", "OBJECTID": 924.0, "CLASS": "Residential", "CLASS_CODE": 1.0, "COMM_CODE": "NEB", "NAME": "NEW BRIGHTON", "SECTOR": "SOUTHEAST", "SRG": "DEVELOPING", "STRUCTURE": "BUILDING OUT", "GLOBALID": "{086267D0-E600-11DE-8601-0014C258E143}", "GUID": null, "SHAPE_AREA": 2864275.556415310129523, "SHAPE_LEN": 6834.047231250339792 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 2927.794099999591708, 5643887.8214, 0.0 ], [ 2978.190899999812245, 5643875.2194, 0.0 ], [ 3017.59360000025481, 5643861.5459, 0.0 ], [ 3053.779900000430644, 5643845.8617, 0.0 ], [ 3089.161999999545515, 5643826.1559, 0.0 ], [ 3129.111100000329316, 5643798.7318, 0.0 ], [ 3166.111999999731779, 5643767.0104, 0.0 ], [ 3226.018400000408292, 5643707.9734, 0.0 ], [ 3262.138399999588728, 5643679.7766, 0.0 ], [ 3302.66330000013113, 5643652.4609, 0.0 ], [ 3340.545300000347197, 5643633.9568, 0.0 ], [ 3381.070199999958277, 5643617.2149, 0.0 ], [ 3419.833100000396371, 5643605.76, 0.0 ], [ 3464.762900000438094, 5643596.9485, 0.0 ], [ 3557.440000000409782, 5643593.6766, 0.0 ], [ 3743.247600000351667, 5643595.2622, 0.0 ], [ 4549.149299999698997, 5643598.9876, 0.0 ], [ 4557.495199999772012, 5643598.9977, 0.0 ], [ 4558.032899999991059, 5643388.8087, 0.0 ], [ 4556.232300000265241, 5643344.1895, 0.0 ], [ 4557.219800000078976, 5643281.1676, 0.0 ], [ 4568.658999999985099, 5643220.321, 0.0 ], [ 4577.637199999764562, 5643188.2051, 0.0 ], [ 4587.662399999797344, 5643161.1236, 0.0 ], [ 4600.026700000278652, 5643134.0421, 0.0 ], [ 4614.730200000107288, 5643108.298, 0.0 ], [ 4627.428700000047684, 5643088.9062, 0.0 ], [ 4636.785400000400841, 5643077.2044, 0.0 ], [ 4654.315700000151992, 5643055.3688, 0.0 ], [ 4670.024799999780953, 5643037.7422, 0.0 ], [ 4677.24239999987185, 5643028.1856, 0.0 ], [ 4692.314699999988079, 5643007.5858, 0.0 ], [ 4706.75, 5642984.4375, 0.0 ], [ 4721.384600000455976, 5642957.0105, 0.0 ], [ 4728.190799999982119, 5642942.9406, 0.0 ], [ 4733.571000000461936, 5642930.296, 0.0 ], [ 4741.564799999818206, 5642909.5987, 0.0 ], [ 4745.385900000110269, 5642898.9165, 0.0 ], [ 4750.056200000457466, 5642882.7764, 0.0 ], [ 4757.27379999961704, 5642855.5082, 0.0 ], [ 4761.944099999964237, 5642831.0858, 0.0 ], [ 4764.583599999547005, 5642816.8839, 0.0 ], [ 4767.25899999961257, 5642771.221, 0.0 ], [ 4767.212799999862909, 5642753.813, 0.0 ], [ 4767.283999999985099, 5642736.1341, 0.0 ], [ 4767.022300000302494, 5642665.7222, 0.0 ], [ 4766.921799999661744, 5642638.6629, 0.0 ], [ 4766.644999999552965, 5642564.2112, 0.0 ], [ 4764.399000000208616, 5642549.9524, 0.0 ], [ 4763.098699999973178, 5642517.7568, 0.0 ], [ 4759.445700000040233, 5642485.7426, 0.0 ], [ 4753.459599999710917, 5642454.0817, 0.0 ], [ 4745.172600000165403, 5642422.9437, 0.0 ], [ 4734.628999999724329, 5642392.4957, 0.0 ], [ 4721.885400000028312, 5642362.901, 0.0 ], [ 4707.010200000368059, 5642334.3181, 0.0 ], [ 4690.083200000226498, 5642306.9006, 0.0 ], [ 4662.280299999751151, 5642261.2609, 0.0 ], [ 4591.4386, 5642155.4526, 0.0 ], [ 4587.216000000014901, 5642149.4254, 0.0 ], [ 4582.180200000293553, 5642142.5072, 0.0 ], [ 4576.260200000368059, 5642134.7208, 0.0 ], [ 4570.27379999961704, 5642127.1973, 0.0 ], [ 4564.026300000026822, 5642119.6911, 0.0 ], [ 4555.244800000451505, 5642109.6863, 0.0 ], [ 4540.423600000329316, 5642094.0912, 0.0 ], [ 4521.90639999974519, 5642076.5828, 0.0 ], [ 4505.988499999977648, 5642062.9452, 0.0 ], [ 4495.557500000111759, 5642054.8537, 0.0 ], [ 4481.677099999971688, 5642044.7072, 0.0 ], [ 4462.914599999785423, 5642032.251, 0.0 ], [ 4454.125599999912083, 5642026.8774, 0.0 ], [ 4436.629599999636412, 5642016.9938, 0.0 ], [ 4426.443900000303984, 5642011.7128, 0.0 ], [ 4415.223299999721348, 5642006.2772, 0.0 ], [ 4406.224100000225008, 5642002.1967, 0.0 ], [ 4397.961400000378489, 5641998.6618, 0.0 ], [ 4389.166600000113249, 5641995.1156, 0.0 ], [ 4378.450400000438094, 5641991.0886, 0.0 ], [ 4369.899600000120699, 5641988.1007, 0.0 ], [ 4359.190999999642372, 5641984.6342, 0.0 ], [ 4346.230499999597669, 5641980.8381, 0.0 ], [ 4332.145399999804795, 5641977.1961, 0.0 ], [ 4314.272199999541044, 5641973.28, 0.0 ], [ 4294.416500000283122, 5641969.5716, 0.0 ], [ 4271.907200000248849, 5641966.9084, 0.0 ], [ 4251.878700000233948, 5641965.4557, 0.0 ], [ 4234.786999999545515, 5641964.965, 0.0 ], [ 4196.942300000227988, 5641964.8861, 0.0 ], [ 4002.861800000071526, 5641964.5645, 0.0 ], [ 3972.891200000420213, 5641964.5172, 0.0 ], [ 3841.810200000181794, 5641964.3106, 0.0 ], [ 3807.330199999734759, 5641964.2562, 0.0 ], [ 3660.713999999687076, 5641964.025, 0.0 ], [ 3647.798600000329316, 5641963.7829, 0.0 ], [ 3638.501600000075996, 5641963.2293, 0.0 ], [ 3627.036600000225008, 5641962.2457, 0.0 ], [ 3617.656200000084937, 5641961.0928, 0.0 ], [ 3607.657200000248849, 5641959.5778, 0.0 ], [ 3597.110600000247359, 5641957.6351, 0.0 ], [ 3588.339700000360608, 5641955.7766, 0.0 ], [ 3577.879999999888241, 5641953.1515, 0.0 ], [ 3571.110299999825656, 5641951.2793, 0.0 ], [ 3564.783800000324845, 5641949.3857, 0.0 ], [ 3558.644399999640882, 5641947.4041, 0.0 ], [ 3550.486899999901652, 5641944.5771, 0.0 ], [ 3540.044999999925494, 5641940.6467, 0.0 ], [ 3529.676799999549985, 5641936.1998, 0.0 ], [ 3518.299599999561906, 5641930.8311, 0.0 ], [ 3509.474000000394881, 5641926.4049, 0.0 ], [ 3489.843000000342727, 5641915.1433, 0.0 ], [ 3470.775399999693036, 5641902.3484, 0.0 ], [ 3453.804100000299513, 5641889.193, 0.0 ], [ 3439.17960000038147, 5641876.3024, 0.0 ], [ 3426.035000000149012, 5641863.274, 0.0 ], [ 3397.286199999973178, 5641833.1086, 0.0 ], [ 3390.071100000292063, 5641825.5381, 0.0 ], [ 3377.323699999600649, 5641812.1625, 0.0 ], [ 3375.876199999824166, 5641813.5779, 0.0 ], [ 3351.266699999570847, 5641835.3288, 0.0 ], [ 3116.584099999628961, 5642034.1642, 0.0 ], [ 3113.274400000460446, 5642037.411, 0.0 ], [ 3107.191999999806285, 5642043.0764, 0.0 ], [ 3097.167899999767542, 5642052.8479, 0.0 ], [ 3080.6102, 5642070.0978, 0.0 ], [ 3065.090699999593198, 5642087.4722, 0.0 ], [ 3054.615399999544024, 5642099.9023, 0.0 ], [ 3044.664900000207126, 5642112.0562, 0.0 ], [ 3034.105200000107288, 5642126.0083, 0.0 ], [ 3027.029400000348687, 5642135.9554, 0.0 ], [ 3015.540300000458956, 5642152.6979, 0.0 ], [ 3003.560999999754131, 5642170.4954, 0.0 ], [ 2993.930499999783933, 5642185.0394, 0.0 ], [ 2984.89130000025034, 5642200.1754, 0.0 ], [ 2974.038800000213087, 5642220.3783, 0.0 ], [ 2968.171699999831617, 5642232.5815, 0.0 ], [ 2962.849600000306964, 5642244.8424, 0.0 ], [ 2957.70920000039041, 5642257.6546, 0.0 ], [ 2952.978400000371039, 5642270.9303, 0.0 ], [ 2949.268400000408292, 5642282.2314, 0.0 ], [ 2945.973799999803305, 5642293.0548, 0.0 ], [ 2943.189799999818206, 5642303.6028, 0.0 ], [ 2941.162399999797344, 5642312.7351, 0.0 ], [ 2939.726599999703467, 5642319.1378, 0.0 ], [ 2938.206000000238419, 5642329.2002, 0.0 ], [ 2936.854299999773502, 5642338.1634, 0.0 ], [ 2935.807199999690056, 5642347.1374, 0.0 ], [ 2934.383500000461936, 5642426.9538, 0.0 ], [ 2933.103600000031292, 5642495.576, 0.0 ], [ 2931.656700000166893, 5642576.0206, 0.0 ], [ 2931.656700000166893, 5642595.352, 0.0 ], [ 2931.656899999827147, 5642627.5118, 0.0 ], [ 2931.571299999952316, 5642666.984, 0.0 ], [ 2931.658400000073016, 5642675.2527, 0.0 ], [ 2931.575000000186265, 5642696.2072, 0.0 ], [ 2931.488099999725819, 5642734.4552, 0.0 ], [ 2931.402499999850988, 5642768.535, 0.0 ], [ 2931.401999999769032, 5642802.4475, 0.0 ], [ 2931.400899999774992, 5642829.4046, 0.0 ], [ 2931.236399999819696, 5642865.6859, 0.0 ], [ 2931.015800000168383, 5642928.21, 0.0 ], [ 2931.015800000168383, 5642965.0028, 0.0 ], [ 2931.017500000074506, 5643001.0649, 0.0 ], [ 2930.886400000192225, 5643043.3756, 0.0 ], [ 2931.0152000002563, 5643077.3405, 0.0 ], [ 2930.878999999724329, 5643115.9048, 0.0 ], [ 2930.604899999685585, 5643139.8282, 0.0 ], [ 2931.013600000180304, 5643176.6929, 0.0 ], [ 2930.82079999987036, 5643192.4659, 0.0 ], [ 2931.170199999585748, 5643288.041, 0.0 ], [ 2930.92850000038743, 5643307.1494, 0.0 ], [ 2931.049399999901652, 5643329.0395, 0.0 ], [ 2930.808899999596179, 5643345.3237, 0.0 ], [ 2931.051400000229478, 5643363.4409, 0.0 ], [ 2931.171799999661744, 5643384.0848, 0.0 ], [ 2930.93099999986589, 5643404.7221, 0.0 ], [ 2930.93099999986589, 5643421.7746, 0.0 ], [ 2930.932300000451505, 5643444.6002, 0.0 ], [ 2931.41509999986738, 5643467.0487, 0.0 ], [ 2931.899400000460446, 5643490.5762, 0.0 ], [ 2932.503800000064075, 5643512.95, 0.0 ], [ 2933.22829999960959, 5643530.6844, 0.0 ], [ 2934.074500000104308, 5643547.0113, 0.0 ], [ 2934.797799999825656, 5643563.2764, 0.0 ], [ 2935.523199999704957, 5643580.8126, 0.0 ], [ 2936.126000000163913, 5643613.4784, 0.0 ], [ 2936.246899999678135, 5643638.271, 0.0 ], [ 2936.005199999548495, 5643652.421, 0.0 ], [ 2935.643500000238419, 5643675.7237, 0.0 ], [ 2934.556400000117719, 5643701.1971, 0.0 ], [ 2934.193699999712408, 5643714.6214, 0.0 ], [ 2932.745000000111759, 5643742.0091, 0.0 ], [ 2932.140599999576807, 5643758.6988, 0.0 ], [ 2930.814000000245869, 5643786.563, 0.0 ], [ 2930.088700000196695, 5643802.0433, 0.0 ], [ 2929.483300000429153, 5643816.7571, 0.0 ], [ 2928.100499999709427, 5643851.0717, 0.0 ], [ 2927.876600000075996, 5643858.052, 0.0 ], [ 2927.809200000017881, 5643861.4184, 0.0 ], [ 2927.770399999804795, 5643867.8124, 0.0 ], [ 2927.794099999591708, 5643887.8214, 0.0 ] ] ] } }
 ]
} 
```

[我使用 d3.js 和以下改编自http://vallandingham.me/shapefile_to_geojson.html](http://vallandingham.me/shapefile_to_geojson.html)的代码将其绘制到屏幕上

```
var OpenData; (function (OpenData) {
    var CalgaryMap = (function () {
        function CalgaryMap() { }
        CalgaryMap.prototype.render = function () {
            var xy = d3.geo.albersUsa();
            var path = d3.geo.path().projection(xy);
            var vis = d3.select("#map").append("svg:svg").attr("width", 900).attr("height", 900);
            d3.json("data.json", function (json) {
                vis.append("svg:g").attr("class", "tracts").selectAll("path").data(json.features).enter().append("svg:path").attr("d", path).attr("fill-opacity", 0.5).attr("fill", function (d) {
                    return "black";
                }).attr("stroke", "#222");
            });
        };
        return CalgaryMap;
    })();
    OpenData.CalgaryMap = CalgaryMap;     })(OpenData || (OpenData = {})); 
```

然而我得到的是一团乱麻，看起来像

![乱七八糟的](../Images/c3958271687233564b21873c54426a32.png)

我将geojson文件加载到QGIS中以防万一我搞砸了。但它在 QGIS 中看起来还不错。这让我觉得这可能是我使用的投影。我拥有的 geojson 文件似乎没有任何看起来像我从 GPS 知道的坐标。所以我把投影函数改成了恒等函数

```
function (location) {
            var xCoordinate = location[0];
            var yCoordinate = location[1];
            return [
                xCoordinate, //scale here
                yCoordinate
            ];
        }; 
```

哪个产生了

![好不了多少](../Images/89b0042c6fe9f821ecabe628ce828d6b.png)

我需要做什么才能正确投影这个东西？我想这很容易，但我缺乏任何 GIS 知识肯定会妨碍我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:03:54.417

感谢@Superboggly，我将命令更改为 ogr2ogr，它生成了一个更合理的 GeoJSON 文件。我的理解是，在 GIS 领域中使用了许多不同的坐标系。我试图在一个期望不同系统的系统中使用一个系统中格式化的文件。我认为我们可以肯定地说结果是意料之外的。

# xcode - 获取 AFHTTPRequestOperation 的自定义标头

> ID：14963010
> 
> 赞同：0
> 
> 时间：2013-02-19T16:54:20.743
> 
> 标签：xcode, afnetworking

我尝试使用 AFHTTPRequestOperation 获取自定义标头密钥，我尝试使用 allHeaderFields 但没有，这是标头响应

```
HTTP/1.1 302 Moved Temporarily
Server  nginx
Date    Tue, 19 Feb 2013 16:38:29 GMT
Content-Type    text/html
Transfer-Encoding   chunked
Connection  keep-alive
Set-Cookie  AUTH-ID="fjArrnmlyNMU9kfIu38Oc0LS451Y/UaMn0rb5sKj46CxmfJj8y8yr8CfwOewItFY"; HTTPOnly
X-AUTH-TOKEN    mfy+426BNZdq1h92As3oXdZbf2iOI7wV7EOEUMAV3hAqtY7cOnWvA4df7h6RfjeD
Location    /home.php 
```

我像这样使用 AFHTTPRequestOperation

```
AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc]initWithRequest:request];
    [operation  setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
NSDictionary *headerData = [[operation response] allHeaderFields];
        if ([headerData objectForKey:@"X-AUTH-TOKEN"] != nil)
            token = [headerData objectForKey:@"X-AUTH-TOKEN"];

        NSLog(@"headers = %@", headerData);
        NSLog(@"token = %@", token);
        ...
}
failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        ...

}]; 
```

但是 X-AUTH-TOKEN 键没有出现在标题 NSLog 中，我确定标题键存在，因为我使用 Charles 代理进行调试，Charles 向我展示了 X-AUTH-TOKEN 键。也许是302状态码的问题，有人可以帮我吗？谢谢。

[编辑] 当我尝试显示响应的状态码时，它是 200。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T18:09:29.133

使用 AFURLConnectionOperation 的一些调整来解决拦截重定向响应。

# ios - 100% 宽度似乎不适用于 iOS

> ID：14963030
> 
> 赞同：2
> 
> 时间：2013-02-19T16:55:14.393
> 
> 标签：ios, css, width

我已经看过一些关于此的帖子，但它似乎对我`<meta name="viewport" content="width=device-width,initial-scale=1" />`在头部使用的问题没有帮助，但它不能解决页眉和页脚不跨越视口宽度的问题。主要内容区域似乎工作。

参考网站是[brendanfenn.com](http://www.brendanfenn.com)

CSS如下。非常感谢任何见解。

```
#wrapper {
    margin: 0 auto;
    position: relative;
}

#header_container{
    background-image: url(http://www.brendanfenn.com/wp-content/uploads/2013/02/headerBG1.jpg);
    width: 100%;    
}

#header {
    width:964px;
    height:150px;
    margin: 0 auto;
}

#content {
    width:964px;
    background: url(images/border-bg.gif) repeat-y top left;
    z-index: 1;
    margin: 0 auto;

}

#content #left-col {
    width:615px;
    float:left;
    padding: 20px 11px 20px 10px;
    z-index: 1;
}

#content #right-col {
    width:307px;    
    padding:3px;
    float:left;
    z-index: 1;
}

#footer {
    width:100%;
    background: #2a2006;    
    margin: 30px 0 auto;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T21:06:13.047

```
<meta name="viewport" content="width=device-width,initial-scale=0.4"> 
```

（来自链接的文件）是你的问题。这将您的视口设置为 800 像素宽（设备宽度 * 1/0.4）。

'width:100%' 是指视口的 100% 宽度，即 800 像素，所以一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:01:55.873

尝试为你的 body 元素设置宽度和高度值

```
body { width: 100%; min-height: 100% } 
```

另一个可能有助于解决该问题的选项是使用 @media 类型，您可以使用它来指定设备处于横向模式时的 css 值。

```
@media screen and (min-aspect-ratio: 1/1) and (min-width:400px) {
   body { //values here }
} 
```

# mysql - Mysql 子查询语法

> ID：14963031
> 
> 赞同：3
> 
> 时间：2013-02-19T16:55:14.810
> 
> 标签：mysql, sql, syntax, subquery

我想知道为什么像`select * as t`下面这样的语句会出现在 mysql 子查询中。

下面按列删除表中最旧的 3 行`created_time`。

为什么这是正确的

```
DELETE FROM mytable WHERE id = ANY 
( SELECT * FROM ( SELECT id FROM mytable ORDER BY created_time ASC LIMIT 3')as t) 
```

并不是

```
DELETE FROM mytable WHERE id = ANY 
(SELECT id FROM mytable ORDER BY created_time ASC LIMIT 3) 
```

?

对我来说，第二种形式是有意义的。它不起作用，我想了解为什么第一个是必要的。具体来说，什么是`t`，`as t`做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T16:59:26.623

在许多数据库中，`from`子句中的子查询需要有一个明确的别名。`as`是可选的。我通常`as`用于列，而将其用于表：

```
DELETE FROM mytable
    WHERE id = ANY ( SELECT * FROM ( SELECT id FROM mytable ORDER BY created_time ASC LIMIT 3') t) 
```

为什么需要子查询是 MySQL 的变幻莫测。它不允许`delete`or`update`中的表引用出现在子查询子句中。哦，它确实允许在 subquery-within-a-subquery 子句中使用它。因此，解决此限制非常容易。

# perl - 哪些 Perl 技术可以分离部分代码以独立运行？

> ID：14963032
> 
> 赞同：6
> 
> 时间：2013-02-19T16:55:15.607
> 
> 标签：perl, process, fork

我不参与接近 O​​S 的编程技术，但据我所知，当涉及到在 Perl 中并行执行某些事情时，选择的武器是`fork`并且可能构建在它之上的一些有用的模块。文档页面`fork`说：

```
Does a fork(2) system call to create a new process running the same program at the same point. 
```

因此，拥有一个消耗大量内存的大型应用程序并调用`fork`一个小任务意味着将有 2 个大的 perl 进程，而第二个将浪费资源只是为了做一些简单的工作。

所以，问题是：要做什么（或如何使用`fork`，如果它是唯一的方法）以使代码的分离部分独立运行并**仅消耗它需要的资源**？

只是一个非常简单的例子：

```
 use strict;
    use warnings;

    my @big_array = ( 1 .. 2000000 );  # at least 80 MB memory
    sleep 10;  # to have time to inspect easely the memory usage

    fork();
    sleep 10;  # to have time to inspect easely the memory usage 
```

子进程也消耗 80+ MB。

需要明确的是：与这个*分离*的代码进行通信或以某种方式使用它的结果并不重要，只是可以说“*嘿，在后台为我运行这个简单的任务，让我同时继续我的繁重工作......并且不要浪费我的资源！* ”运行繁重的 perl 应用程序时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:17:04.893

您的分叉进程实际上并未使用 80MB 的常驻内存。该内存的很大一部分将被**共享**- 从父进程“借用”，直到父进程或子进程写入它，此时写入时**复制**语义将导致内存实际被复制。

如果你想完全放下那个包袱，`exec`就用你的叉子跑吧。这将用不同的可执行文件替换子 Perl 进程，从而释放内存。如果您不需要向父母传达任何信息，这也是完美的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T17:20:45.623

`fork()`to`exec()`是你的兔子。你`fork()`创建一个新进程（这是一个相当便宜的操作，见下文），然后用更小的东西替换你正在运行`exec()`的大进程。`perl`这看起来像这样：

```
use strict;
use warnings;
use 5.010;

my @ary = (1 .. 10_000_000);

if (my $pid = fork()) {
    # parent
    say "Forked $pid from $$; sleeping";
    sleep 1_000;
} else {
    # child
    exec('perl -e sleep 1_000');
} 
```

（`@ary`只是用来填充原始进程的内存。）

我说`fork()`ing 相对便宜，尽管它确实复制了整个原始过程。这些陈述并不冲突；设计的人`fork`注意到了同样的问题。复制是惰性的，即只复制实际更改的位。

如果您发现您希望进程相互通信，您将开始进入更复杂的 IPC 领域，有关该领域的书籍已经写了很多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T17:09:05.397

没有办法只分叉进程足迹的一个子集，因此通常的解决方法可以归结为：

1.  `fork`在父进程中运行内存密集型代码之前
2.  `system`用or开始一个单独的进程`open HANDLE,'|-',...`。当然，这个新进程不会从其父进程继承任何数据，因此您需要以某种方式将数据传递给该子进程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T13:54:05.033

`fork()`在大多数操作系统上实现的效果非常好。它通常使用一种称为写时复制的技术，这意味着页面最初是共享的，直到一个或其他进程写入它们。无论如何，您的很多进程内存都将是只读映射文件。

仅仅因为一个进程之前使用 80MB`fork()`并不意味着之后两个将使用 160。一开始它只会超过 80MB 的一小部分，直到每个进程开始污染更多页面。

# c# - 如何获取已安装 MSI 程序的 UpgradeCode？

> ID：14963047
> 
> 赞同：0
> 
> 时间：2013-02-19T16:55:43.683
> 
> 标签：c#, visual-studio-2010, windows-installer

我在我的电脑上安装了一个程序。我怎样才能得到`UpgradeCode`这个程序？该程序是在 Visual Studio 2010 中创建的 MSI。 ![在此处输入图像描述](../Images/7e4e41ab938267e7b764329385b7bfe3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:25:30.057

如果您有可用的 MSI，请使用例如 Orca 打开它，然后检查属性表。

编辑： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa370557 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370557(v=vs.85).aspx)

另一种选择是 InstEdit [http://www.instedit.com/](http://www.instedit.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-09T00:45:20.733

如果要检索已安装 MSI 文件的**产品代码**和**升级代码**，可以尝试以下两个答案：

查找产品代码： **[如何查找已安装 MSI 设置的产品 G​​UID？](https://stackoverflow.com/questions/29937568/how-can-i-find-the-product-guid-of-an-installed-msi-setup/29937569#29937569)**（电源外壳）。

查找升级代码： **[如何找到已安装 MSI 文件的升级代码？](https://stackoverflow.com/questions/46637094/how-can-i-find-the-upgrade-code-for-an-installed-msi-file/46637095#46637095)**（VBScript）。

# google-chrome-extension - Chrome 扩展沙箱和消息传递

> ID：14963048
> 
> 赞同：5
> 
> 时间：2013-02-19T16:55:46.843
> 
> 标签：google-chrome-extension, eval, sandbox

我有一个旧的 Chrome 扩展，我想为清单版本 2 更新。我注意到我有一个`eval`无法摆脱的函数调用。我正在尝试了解新的 Chrome 沙盒功能，它可以让我在其中进行`eval`调用。问题是：通过在后台加载沙盒页面，我可以传递一个包含要执行的内容的字符串，然后让它执行脚本，在弹出页面上输出结果吗？

起初我认为这是可能的，但看示例显然要评估的脚本必须已经在沙箱页面中。

谢谢

# delphi - 具有始终相同结果的 SortCompareFunction 会创建 EAccessViolation

> ID：14963053
> 
> 赞同：2
> 
> 时间：2013-02-19T16:55:59.847
> 
> 标签：delphi, delphi-xe2, sortcomparefunction

如果函数总是返回相同的结果（而不是变化的结果，例如 with ），`SortCompareObjects`函数获得 an的确切原因是什么？`EAccessViolation``CompareText`

```
function SortCompareObjects(Item1, Item2: Pointer): Integer;
begin
  Result := 1; // EAccessViolation
  // Result := CompareText(...); // No EAccessViolation
end;

MyObjectList: System.Contnrs.TObjectList;

MyObjectList := System.Contnrs.TObjectList.Create;

for i := 0 to x do
  MyObjectList.Add(AObject);

MyObjectList.Sort(@SortCompareObjects); // EAccesViolation 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T17:29:33.393

比较排序算法在排序函数具有某些属性的假设下访问数组中的元素。具体来说，

*   如果 f(x,y)<0 则 f(y,x)>0
*   如果 f(x,y)=0 则 f(y,x)=0
*   如果 f(x,y)<0 且 f(y,z)<0 则 f(x,z)<0
*   f(x,x)=0

排序算法保证如果您的函数遵守规则，它将对数组进行排序。否则，如果您不遵守规则，所有赌注都将被取消。什么事情都可能发生。如果您遇到运行时错误，请不要感到惊讶。根据我的经验，最常见的是堆栈溢出，但访问冲突也是合理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:20:07.710

> 在排序算法是顺序的假设下...

这是一个非常错误的假设，你不需要做出。首先，除非您使用的是 Delphi 的试用版，否则您可以查看源代码；它是 QucikSort，而不是其他任何东西。第二个问题是，什么是“顺序”排序算法？我从来没有听说过一个！

为了直接回答您的问题，这里是`QuickSort`Delphi 使用的算法的代码片段。`SCompare`是您提供的功能，*始终*返回的功能`1`

```
 while SCompare(SortList^[J], P) > 0 do
    Dec(J); 
```

由于`1`总是大于零，因此该循环永远不会停止*。*它只会在产生访问冲突时停止`SortList^[j]`，而且这迟早会发生。

# java - 播放框架数据库搜索

> ID：14963056
> 
> 赞同：2
> 
> 时间：2013-02-19T16:56:05.537
> 
> 标签：java, playframework-2.0, ebean

我的项目中有一个模型类“Journey”，它有几种删除、创建和列出所有旅程的方法。我正在使用 heroku 和一个 postgresql 数据库。我需要编写一种方法，将所有与指定地址具有相似地址的旅程返回。我知道查询结构通常是这样的，`SELECT address FROM Journey WHERE address ~~ arguement`但我不知道在播放框架中存在哪些函数来执行此操作。

```
*public static void search(String address){
//query
//return matching journey results
}* 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T18:57:01.200

您需要以模型`Finder`为例：

```
package models;

import play.db.ebean.Model;

import javax.persistence.*;

@Entity
public class Journey extends Model {

    @Id
    public Integer id;

    public static Finder<Integer, Journey> find
            = new Model.Finder<>(Integer.class, Journey.class);

    // other fields
    public String address;
    public String country;

} 
```

因此您可以通过以下方式轻松选择记录：

```
List<Journey> allJourneys = Journey.find.all();
List<Journey> searchedJourneys = Journey.find.where().like("address", "%foo%").findList();
Journey firstJourney = Journey.find.byId(123); 
```

在您的基本情况下，您可以将其添加到您的模型中：

```
public static List<Journey> searchByAddress(String address){
    return find.where().like("address", "%"+address+"%").findList();
} 
```

等等。它返回带有关系的整个对象，因此在大数据集中它可能太重了，您可以甚至应该使用 Finder 的链式方法（例如 等）使用更优化的查询`select()`来`fetch()`指出您目前需要的数据。

[Ebean 的 API](http://www.avaje.org/static/javadoc/pub/index.html)中还有其他可能性，无论如何您需要声明哪种方法最适合您。

顺便说一句，值得研究一下现有的示例应用程序，作为`computer's database`熟悉此 ORM 的示例。

**编辑**

对于不区分大小写的搜索，还有其他表达式，即（`ilike`而不是`like`）`istartsWith`、、、、和。他们在开始时没有相同的版本。`iendsWith``ieq``icontains``iexampleLike``i`

[您也可以在 API](http://www.avaje.org/static/javadoc/pub/com/avaje/ebean/ExpressionList.html)中预览它们。

# c++ - 使用队列进行对象切片

> ID：14963057
> 
> 赞同：3
> 
> 时间：2013-02-19T16:56:05.040
> 
> 标签：c++, object-slicing

使用带有 -std=c++0x 的 Eclipse/gcc 在 Ubuntu 上进行开发。

我似乎遇到了对象切片问题，这不属于我在这里看到的其他问题。我有一个非常简单的基类/子类继承模型。基类有一个纯虚函数，显然子类实现了它：

```
class Parent{
public:
    Parent();
    virtual ~Parent();
    virtual void DoStuff() = 0;
};

class Child : public Parent{
public:
    Child();
    virtual ~Child();
    virtual void DoStuff(); //Child can have "grandchildren"
}; 
```

我想要的是有一个队列，我可以在其中存储这些对象以供工作线程处理。我知道我应该存储指针，否则我会保证切片。因此，在执行此操作的类（“处理器”）中，我有：

```
typedef queue<Parent*> MYQUEUE; //#include <queue>
static MYQUEUE myQueue;

//Call this after creating "Child c;" and passing in &c:
void Processor::Enqueue(Parent* p) 
{
    myQueue.push(p);
}

void* Process(void* args) //function that becomes the worker thread
{
    while(true)
    {
        if(!myQueue.empty())
        {
            Parent* p = myQueue.front();
            p->DoStuff();
            myQueue.pop();
         }
    }
    return 0;
} 
```

然后发生的是程序崩溃，说“调用了纯虚拟方法”，就好像继承/多态不能正常工作一样。我知道继承设置正确，因为当我测试时我确认这是有效的：

```
Child c;
Parent* p = &c;
p->DoStuff(); 
```

非常感谢任何指导！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:58:24.093

如果您将对象传递给工作线程，则无法在堆栈上创建它。当工作线程调用它时，父线程可能已经离开了该函数并销毁了该对象。您需要`new`在父线程中动态分配（可能通过）它，并且`delete`在完成后才在工作线程中释放（）它。

另外需要注意的是，如果父进程能够在工作进程运行时将作业排入队列，则您需要锁定队列访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:58:59.323

该错误意味着`p`在调用点指向的对象具有类型`Parent`。它是如何实现的取决于您未显示的代码。

# php - php gd字体大小与photoshop不同

> ID：14963065
> 
> 赞同：1
> 
> 时间：2013-02-19T16:56:28.393
> 
> 标签：php, gd, photoshop

我正在尝试使用 gd 重现一个示例 Photoshop 文件（同样的，除了文本是动态的）。但是我面临一个意想不到的问题。

例如，在 Photoshop 中，我有一个文本“Fallen Angel”，字体 Optima 9.46pt 我正在使用 gd ：

```
imagefttext($image, $fontSize, 0, $x, $y, $color, $fontPath, $text); 
```

$fontPath 是 Optima.ttf（与 php 脚本在同一目录中），$fontSize 是 9.46

我在 Photoshop psd 上有什么：http: [//data.imagup.com/10/1175958620.png](http://data.imagup.com/10/1175958620.png)

我在 php gd 上有什么：http: [//data.imagup.com/12/1175958598.png](http://data.imagup.com/12/1175958598.png)

我不明白其中的区别，gd 和 photoshop 都使用 pt 单位和相同的字体

# arrays - Delphi Week 调度系统的数组存储问题

> ID：14963066
> 
> 赞同：0
> 
> 时间：2013-02-19T16:56:29.057
> 
> 标签：arrays, delphi, date, procedure, schedule

我有一个带有日历的表格。单击日历时，他们将变量设置`CurDateSel`为日历上选择的日期。

我有一个常量数组（周），其中存储了`Monday`[Index 0] 到`Sunday`[Index 6] 的值。

我也有一个`StringGrid`过去一周中的几天跨越网格顶部，从星期日到星期一，但是，我现在已将其更改为将网格的第一列显示为`CurDateSel`日期（`Now`当表格开始）和以下网格列来存储所选日期之后的日期。

例如，如果选择了星期六：

```
Saturday|Sunday|Monday|Tuesday|Wednesday|Thursday|Friday 
```

然后我有一个过程，它遍历存储的预订列表，并将具有相应日期和日期的预订添加到网格中。例如，如果预订是在 23 日星期六下午 2 点进行的，则程序将在 y 轴上转到下午 2 点，然后转到轴上的第 5 列，因为这对应于星期六，在我的数组 WEEK 中。

但是，由于我的列现在根据当天更改，因此存储的预订值不会转到相应的日期，而是转到通常存储日期的列，如果这些列从星期一开始并在星期日结束。

我决定创建一个新数组来存储一周的值，其中一周的开始是当天，一周的结束是当天 + 6 天。我称这个数组`SelDayArray`。

例如，如果是星期六，则此数组将从 开始`Index[0] = Saturday`并以 . 结尾`Index[6] = Friday`。

我试图编写代码来填充第二个数组，但是我似乎无法正确填充它。

```
procedure ReturnUpdatedDay;  
 var  
  i, x, p, CurDayNo: Integer;  
begin  
  i := 0;  
  CurDayNo := ReturnDayCell(FormatDateTime('dddd', CurDateSel));  
  repeat  
    SelDayArray[i] := Week[CurDayNo+i];  
    Inc(i);  
  until (CurDayNo + i) = 7;  
  Dec(i);  
  p := i;  
  for x := 0 to (CurDayNo-p) do  
    begin  
      Inc(i);  
      SelDayArray[i] := Week[x];  
    end;
end; 
```

My `ReturnDayCell`Function`DayNo`根据数组的固定常量数组返回`WEEK`。因此，如果选择星期六作为当前日期，该过程将返回`5`，`CurDayNo`并且`= 5`

因此，我的`ReturnUpdatedDay`程序应该将 my `SelDayArray`to的值设置`TheCurrentDay` `[Index 0]`为`TheCurrentDay+6` `[Index 6]`

这适用于“星期六”这一天。当我将列表打印到备忘录中时，我会收到以下值：周六、周日、周一……周五。

但是，当我在星期六前几天尝试时，我要么收到访问冲突错误，要么列表的最后两天没有存储/打印。当我选择星期日时，我收到访问冲突错误。

请有人帮我看看我做错了什么。对于任何拼写错误或令人困惑的信息，我们深表歉意。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:51:12.213

该`mod`运算符允许您以循环方式*访问*周向量，在第 6 个元素之后回退到 0。

将您的代码更改为：

```
procedure ReturnUpdatedDay;  
 var  
  I, CurDayNo: Integer;  
begin  
  CurDayNo := ReturnDayCell(FormatDateTime('dddd', CurDateSel));  
  for I := 0 to 6 do
    SelDayArray[I] := Week[(CurDayNo + I) mod 7];  
end; 
```

# css - 将 html 5 视频与 css 全屏背景匹配

> ID：14963067
> 
> 赞同：0
> 
> 时间：2013-02-19T16:56:31.827
> 
> 标签：css, html, video

我正在尝试将 html 视频与屏幕居中的 css 全屏背景相匹配。无论屏幕大小，我都希望视频与背景无缝匹配。请帮助所有掌握 css 的人。谢谢！

图片位于：

[视频和背景截图](https://www.dropbox.com/s/oo7wwbjzglukma6/VIDEO-HTML.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:09:21.690

试着看看这个幻想网站中的代码，视频也与地图集成在一起，你在哪里找到视频。

[http://nrk.no/nordlandsbanen/](http://nrk.no/nordlandsbanen/)

干杯

简科伊尔

# c# - DockPanel 中的键盘导航

> ID：14963069
> 
> 赞同：1
> 
> 时间：2013-02-19T16:56:35.773
> 
> 标签：c#, wpf, tabs, keyboard, tabindex

设想：

我有一个 DockPanel (MainDockPanel)。停靠在顶部的是一个 UniformGrid (TopUniformGrid)，里面有一组按钮。停靠在左侧的是另一个 UniformGrid (LeftUniformGrid)，里面有一组按钮。填充 MainDockPanel 的其余部分是一个网格（MainGrid），里面有多个控件。在内容中切换时，我想要的是切换到 TopUniformGrid 中的每个按钮，然后切换到 LeftUniformGrid 中的每个按钮，然后循环回到 TopUniformGrid 中的按钮。当前发生的情况是，当我将 LeftUniformGrid 中的按钮结束并使用选项卡转到下一个控件时，它会转到 MainGrid 中的一个控件。我设置了以下内容：

```
KeyboardNavigation.SetIsTabStop(MainGrid,false);
KeyboardNavigation.SetTabNavigation(MainDockPanel, KeyboardNavigationMode.Cycle);
KeyboardNavigation.SetDirectionalNavigation(MainDockPanel, KeyboardNavigationMode.Cycle);
KeyboardNavigation.SetControlTabNavigation(MainDockPanel, KeyboardNavigationMode.Cycle); 
```

我曾假设将 MainGrid 的 IsTabStop 设置为 false 会导致 LeftUniformGrid 末尾的选项卡跳过 MainGrid 和其中的所有内容。我在这里缺少什么吗？

# sms - 短信长号有多国际化？

> ID：14963076
> 
> 赞同：3
> 
> 时间：2013-02-19T16:56:52.800
> 
> 标签：sms

我工作的组织希望能够在全球范围内发送短信，而且似乎有很多此类服务提供商。但是，我们也希望用户能够在全球范围内选择加入，这更加棘手。

我知道长代码是国际化的，起初我认为我们可以只获得一个长代码并能够在全球范围内接收选择加入的消息。但是，在与 Clickatell 的某个人交谈后，我发现他们销售的范围很广的长代码，覆盖不同国家的不同网络。这意味着我们必须有多个长代码，这既混乱又超出了我们的预算。

所以我认为这已经解决了，直到我在 mNatives 的网站 ( [http://www.mnatives.com/short-long-code.aspx](http://www.mnatives.com/short-long-code.aspx) ) 上阅读了这一段：

> SMS Long code也称为虚拟号码，是专门用于接收来自移动设备的消息的普通手机号码。消息可以从**任何国际移动网络**发送，并使用我们的 Web 界面通过网络接收，或者可以通过使用 SMPP 的应用程序实时下载。与适用于运营商足迹内的本地地理区域的 SMS 短代码不同，SMS 长代码或虚拟号码可以从**世界各地的设备**接收消息。这些通常用于在 SMS 应用程序或用户与移动受众之间建立双向通信通道，从而实现按需提供信息的 SMS 服务提供文本 Unicode 或二进制消息。

这听起来确实像一个数字可以在任何地方工作——这就是他们所说的吗？

我一直在研究高低，努力理解这一切，没有运气。谁能给我一些关于数字工作多长时间的见解？长号码的覆盖范围是否会因您从谁那里购买而有所不同？这种单一的全局长数字的概念是否可能？

我会很感激你的指导。：） 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:16:02.080

*Disclaimer: I do some developer evangelism for Nexmo.*

Long numbers (essentially virtual numbers), vary as to their reach. Checkout this FAQ from Nexmo (an SMS API) about the reach of Nexmo's numbers: [Inbound Reach List](https://nexmo.zendesk.com/entries/20284471-Inbound-Reach-List-Who-can-send-SMS-to-my-Inbound-Nexmo-Number-) (I've reduced the list to those numbers with international reach):

```
Country      International Reach
Australia    Yes - see list
Austria      Yes - see list
Ireland      Yes - see list
Lithuania    Probably
Netherlands  Probably
Norway       Probably
Sweden       Yes - see list
Switzerland  Probably
UK (+447xx)  Yes - see list

```

Each 'see list' will lead to a specific list of carriers/networks that can reach the virtual number.

For the greatest international coverage, you'll likely have to acquire a few different numbers; however, keep in mind that the cost your users pay to send an SMS to the number may vary as well. So you may want to consider more than just the reachability of the number.

As to cost, it varies per virtual number. Prices per number from Nexmo range for less than a buck to around 6 dollars per month (with Nexmo inbound SMS message are free).

# iphone - 应用关闭时创建新地理围栏

> ID：14963077
> 
> 赞同：0
> 
> 时间：2013-02-19T16:56:56.727
> 
> 标签：iphone, ios, objective-c, gps, location

我正在研究我正在尝试开发的使用位置感知和地理围栏的应用程序。我能够按照教程解释如何使用硬编码的经度和纬度设置地理围栏。

两个问题：

首先，有没有办法将新的经度和纬度从服务器“推送”到应用程序，并将它们设置为新的地理围栏区域，即使应用程序关闭（完全关闭而不是在后台）？

其次，当应用程序在后台运行时，有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:35:45.453

> “首先，有没有办法将新的经度和纬度从服务器“推送”到应用程序，并将它们设置为新的地理围栏区域，即使应用程序关闭也是如此”

您的意思是向应用程序推送新的地理围栏：
不，如果应用程序关闭，您将无法这样做。

如果应用程序唤醒，它可以请求服务器是否有任何新的地理围栏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-19T18:23:48.993

我认为您应该能够在后台运行的应用程序中添加新的地理围栏，您只需要触发和事件并使用该调用的东西。例如，您可以使用 AlarmManager（如果设备关闭或重新启动，警报会丢失）

希望这有帮助，赫克托

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-13T10:02:57.083

该应用程序可以通过操作系统的“推送通知”唤醒。然后正如 AlexWien 在他的回答中所说：“如果应用程序唤醒，它可以请求服务器是否有任何新的地理围栏。”。

# javascript - 如何转换 JavaScript 哈希图？

> ID：14963080
> 
> 赞同：3
> 
> 时间：2013-02-19T16:57:07.750
> 
> 标签：javascript, json, map

我正在尝试`<String, Array()>`从 json 对象创建地图。想象一下我得到了这个 json 结构：

```
[
    {
        "userId": "123123",
        "password": "fafafa",
        "age": "21"
    },
    {
        "userId": "321321",
        "password": "nana123",
        "age": "34"
    }
] 
```

我要创建的地图是：

键（字符串），值（数组）

```
{
    "userId": [
        "123123",
        "321321"
    ],
    "password": [
        "fafafa",
        "nana123"
    ],
    "age": [
        "21",
        "34"
    ]
} 
```

是否有可能做到这一点？：/

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T17:02:36.667

[演示](http://jsfiddle.net/Bu7yn/3/)

```
var json = '[{"userId" : "123123", "password": "fafafa", "age": "21"}, {"userId" : "321321", "password" : "nana123", "age" : "34"}]';

var list = JSON.parse(json);
var output = {};

for(var i=0; i<list.length; i++)
{
    for(var key in list[i])
    {
        if(list[i].hasOwnProperty(key))
        {
            if(typeof output[key] == 'undefined')
            {
                output[key] = [];
            }
            output[key].push(list[i][key]);
        }
    }
}

document.write(JSON.stringify(output)); 
```

输出：

> {"userId":["123123","321321"],"密码":["fafafa","nana123"],"age":["21","34"]}

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T17:03:32.577

```
function mergeAttributes(arr) {
  return arr.reduce(function(memo, obj) { // For each object in the input array.
    Object.keys(obj).forEach(function(key) { // For each key in the object.
      if (!(key in memo)) { memo[key] = []; } // Create an array the first time.
      memo[key].push(obj[key]); // Add this property to the reduced object.
    });
    return memo;
  }, {});
}

var json = '[{"userId" : "123123", "password": "fafafa", "age": "21"}, {"userId" : "321321", "password" : "nana123", "age" : "34"}]';

mergeAttributes(JSON.parse(json));
// {
//   "userId": ["123123", "321321"],
//   "password": ["fafafa", "nana123"],
//   "age": ["21", "34"]
// } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-27T04:00:23.083

Javascript 的 JSON.stringify 将帮助您将任何符合 JSON 的对象模型转换为 JSON 字符串。

# javascript - 浏览器中的 Mocha 和 Chai 异步测试

> ID：14963088
> 
> 赞同：-1
> 
> 时间：2013-02-19T16:57:36.950
> 
> 标签：javascript, unit-testing, bdd, mocha.js, chai

我无法使用 mocha 运行异步测试。

这是我的代码

```
describe('Brightcove Wrapper',function(){
    describe("#init()", function() {
        it("Should inject the brightcove javascript", function(done){
            BCL.init(function(){
                //expect(window).to.have.property('brightcove');
                console.log(this) //window object
                done();
                console.log('this shows in the log too')
            });
        });
    });
}) 
```

两个日志都显示，但从不调用 done()。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T16:57:36.950

在我的函数中，我在文档正文中添加了一个字符串，这显然让 mocha 感到不安。我更改了代码以将我的字符串附加到带有 ID 的 div 中，并且测试通过了。

# django - 在 django 中建立 url

> ID：14963092
> 
> 赞同：0
> 
> 时间：2013-02-19T16:57:47.703
> 
> 标签：django, django-templates, django-views

我在 django 中做了一个应用程序，我对语言 python 和框架 django 完全陌生。

我的问题是我无法弄清楚如何获取此网址：

```
project/2/ticket/1 
```

我在`project/2`我的模板中获得了一个链接，该链接链接到`project/2/ticket/1`. 我得到的错误是`NoReverseMatch at /project/1`，我使用的代码是：

**网址.py**

```
urlpatterns = patterns('',

# Project urls below 
 url(r'^project/(?P<project_id>\d+)$', 'project_manager.views.project_list', name='project_list_with_ticket'),
 url(r'^project/(?P<project_id>\d+)/ticket/(?P<ticket_id>\d+)$', 'project_manager.views.ticket_list', name='ticket_list'),

# Uncomment the next line to enable the admin:
 url(r'^admin/', include(admin.site.urls)), 
```

)

**视图.py**

```
def ticket_list(request, ticket_id = None):

if ticket_id:

    tickets = get_list_or_404(Ticket.objects.filter(id = ticket_id))

    return render(request, 'tickets/details.html', {"tickets" : tickets })

else:

    return render(request, 'projects/list.html', {'projects' : projects }) 
```

**我的模板**

```
{% for ticket in tickets %}
    <div class="tickets">
        <a href="{% url ticket_list ticket.id %}">{{ ticket }}</a>
    </div>
{% endfor %} 
```

**编辑——** 它说没有ticket_list，但是有吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:00:54.577

您`ticket_list`使用一个变量调用 URL/View - `ticket.id`- 当它需要两个变量时。

您的模板：

`<a href="{% url ticket_list ticket.id %}">{{ ticket }}</a>`

您正在传递 a `ticket.id`，它还需要 a`project.id`如您在 URL 中看到的那样：

`url(r'^project/(?P<project_id>\d+)/ticket/(?P<ticket_id>\d+)$', 'project_manager.views.ticket_list', name='ticket_list'),`

您需要更改模板以传递您在 URL 中要求的两个变量。您尚未发布如何获取项目 ID，因此我的代码可能无法完全按照发布的方式工作，但您需要这样的内容：

`<a href="{% url ticket_list ticket.project.id ticket.id %}">{{ ticket }}</a>`

传递变量的顺序需要与 URL 中要求它们的方式保持一致。由于您的 URL 要求 a `project_id`，然后是 a `ticket_id`，因此请确保按照上述顺序在模板中传递它们。

# java - Java Western + 阿拉伯语字符串连接问题

> ID：14963095
> 
> 赞同：2
> 
> 时间：2013-02-19T16:57:54.777
> 
> 标签：java, unicode, string-concatenation

我在连接混合西方和阿拉伯字符的文本时遇到了麻烦。

我有一个这样的令牌列表：

```
-LRB-
دریای
مازندران
-RRB-
, 
```

我使用以下过程来连接这些令牌列表：

```
String str = "";
for (String tok : tokens) {
    str += tok + " ";
} 
```

这是我的程序的输出：

```
-LRB- دریای مازندران -RRB- , 
```

可以看出，**阿拉伯语单词**的位置是倒置的。我该如何解决这个问题（也许建议 Java 忽略有关**文本方向**的信息）？

**编辑**

实际上，我的问题似乎是一个错误的问题。现在我有了一个新的。我需要将每个单词包装在这样的字符串`(word *)`中，以便我的输出如下所示：

```
(word1 *)(word2 *)(word3 *)... 
```

我使用的程序如下：

```
String str = "";
for (String tok : tokens) {
    str += "(" + tok + "*)";
} 
```

但是，我得到的结果是这样的：

```
(-LRB- *)(دریای *)(مازندران *)(-RRB- *)(, *) 
```

代替：

```
(-LRB- *)(دریای)(* مازندران *)(-RRB- *)(, *) 
```

** EDIT2 ** 实际上，我发现我的问题**不是**问题。我在一个文件上写了我的字符串，然后用 nano（在控制台中）打开它。它被正确连接。

所以问题是由于 Eclipse 控制台（还有 gedit）——让我们说——**错误地**呈现了字符串。

无论如何，感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:47:39.313

输出是正确的，如果您将此文本呈现给讲阿拉伯语的用户，则不应**覆盖**文本的方向性。阿拉伯语是从右向左书写的。当您将两个阿拉伯字符串连接在一起时，第一个将出现在第二个的右侧。这是由 BiDi 算法控制的，其详细信息在[http://www.unicode.org/reports/tr9/](http://www.unicode.org/reports/tr9/)中进行了介绍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:50:31.847

首先，我建议使用 StringBuilder 而不是原始字符串连接。你会让你的垃圾收集器更快乐。其次，没有看到输入或您的 StringTokenizer 是如何设置的，我冒昧地猜测您似乎在正确标记字符串时遇到了问题。

# google-maps-api-3 - Google 地图中的 fitBounds 错误

> ID：14963097
> 
> 赞同：-1
> 
> 时间：2013-02-19T16:57:56.173
> 
> 标签：google-maps-api-3

我的代码中出现 fitBounds 问题。无论我将 extend.bounds 和 fitBounds 放在 createMarker 函数还是 getData 函数中，我都会不断收到“未定义边界”。现在我已经注释掉了边界语句，但你可以看到我在哪里尝试过它们。

```
google.load('visualization', '1', {'packages':['table']});
    console.log("right after google load")
    var map;
    var markers = [];
    var infoWindow = new google.maps.InfoWindow();
    var bounds = new google.maps.LatLngBounds ();

    var gicons = [];
        gicons[1] = new google.maps.MarkerImage('http://6tango.com/MLH/Map_Icons/flower_blue_shadow.png');
        gicons[2] = new google.maps.MarkerImage('http://6tango.com/MLH/Map_Icons/flower_yellow_shadow.png');
        gicons[3]  = new google.maps.MarkerImage('http://6tango.com/MLH/Map_Icons/flower_green_shadow.png');

    var tinyicon = [];
        tinyicon[1] = 'http://6tango.com/MLH/Map_Icons/flower_blue_small.png';
        tinyicon[2] = 'http://6tango.com/MLH/Map_Icons/flower_yellow_small.png';
        tinyicon[3] = 'http://6tango.com/MLH/Map_Icons/flower_green_small.png';

function initialize(bounds) {
    console.log("initialize function")
        var ca = new google.maps.LatLng(33.75,-117.9);

        map = new google.maps.Map(document.getElementById('map'), {
            center: ca,
            zoom: 10,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: true,

        overviewMapControl: false,  
        overviewMapControlOptions: {
            opened: true
        }
    });

    var sql = encodeURIComponent("SELECT * FROM 1O8mQ6csgl4gapp6uzW-  OjUtRK05eTRiB8oCc5DY");
        var query = new   google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq=' + sql);

    query.send(getData);
}

function getData(response,bounds) {
    console.log("function getData")

    var dt = response.getDataTable();  

        var side_html = '<table >';

        for (var i = 0; i < dt.getNumberOfRows(); i++) {
        var lat = dt.getValue(i,5);
        var lng = dt.getValue(i,6);
        var icontype = dt.getValue(i,0);
    var name = dt.getValue(i,1);
    var a1 = dt.getValue(i,2);
    var a2 = dt.getValue(i,3);
    var address = dt.getValue(i,4);
    var cross = dt.getValue(i,7);
        var map = dt.getValue(i,8);
        var photo = dt.getValue(i,9);
    var t1 = dt.getValue(i,10);
    var t2 = dt.getValue(i,11);
    var t3 = dt.getValue(i,12);
    var t4 = dt.getValue(i,13);
    var t5 = dt.getValue(i,14);
    var t6 = dt.getValue(i,15);
    var handicap = dt.getValue(i,16);

    var pt = new google.maps.LatLng(lat, lng);
    //bounds.extend(pt);
    //map.fitBounds(bounds);

        var html = [

            '<div style="width:500px;height:100%;border:1px solid;background-color:#f0f0f0"><div style="float:left;width:188px;padding:3px"><p><b>',
            name + '</b><br>',
            a1 + '<br>',
            a2 + '</p><p><b>C/S - Directions:</b><br>',
            cross + '</p><p><b>Thomas Guide: </b>',
            map +  '</p><p><img src="http://kk6t.com/images/handicap_mlh.png">',
            handicap + '</p></div>',
            '<div style="float:left;padding:5px 5px 2px 5px;margin:2px 2px 0 0;border:1px solid black;background-color:#ffffff"><img src="',
            photo + '" width="292"></div>',
            '<div style="clear:both;padding:0 5px;height:200px;overflow:auto;background-color:white;margin:5px 2px;border:1px solid black">',
            '<p style="padding-bottom:5px">',
            t1 + '</p><p>' + t2 + '</p><p>' + t3 + '</p><p>' + t4 + '</p><p>' + t5 + '</p><p>' + t6 + '</p>/div></div>'

            ].join('');  

        if (icontype < 1)
           {
       side_html += '<tr><td style="padding:5px 0 5px 10px" bgcolor="#83f859"><span>' + name + '</span></td></tr>';
    }
    else
    {
    side_html += '<tr><td ><img src=' + tinyicon[icontype] + '>&nbsp;&nbsp;<a href="javascript:myclick(' + i + ')">' + name + '</a></td></tr>';
    }

        createMarker(pt, html, name, icontype, bounds);

}
        console.log("finished with markers")

    side_html += '</tbody> \
                        </table>';
                document.getElementById("side_bar").innerHTML = side_html;
}

function createMarker(point,info,name,icontype,bounds) {
    console.log("function createMarker")
    var marker = new google.maps.Marker({
       position: point,
       map: map,
       title: name,
       icon: gicons[icontype]
    });
    //bounds.extend(point);

    markers.push(marker);

    google.maps.event.addListener(marker, 'click', function() {
      infoWindow.close();
      infoWindow.setContent(info);
      infoWindow.open(map,marker); 
    });
  }

   function myclick(num) {
    console.log("function myclick")
    google.maps.event.trigger(markers[num], "click");
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:37:20.283

您的代码有命名错误。

第一的

```
var bounds = new google.maps.LatLngBounds (); 
```

之后

```
bounds.extend(pt);
map.fitBounds(bounds); 
```

然后

```
bounds.extend(point); 
```

我将从 GLOBAL 中删除第一个构造函数并将其放在`getData()`循环之前。`bounds.extend(pt);`之后`createMarker()`没有边界参数。最后`map.fitBounds(bounds);`在循环之后。

```
var bounds = new google.maps.LatLngBounds();
for (var i = 0; i < dt.getNumberOfRows(); i++) {
...
...
var pt = new google.maps.LatLng(lat, lng);
...
...
createMarker(pt, html, name, icontype);//no bounds
bounds.extend(pt);
...
...
 }
 map.fitBounds(bounds); 
```

# jquery - 数据未正确循环通过 Google 地图信息窗口

> ID：14963102
> 
> 赞同：-1
> 
> 时间：2013-02-19T16:58:10.820
> 
> 标签：jquery, json, google-maps, google-maps-api-3

我有一个通过 JSON 提取的数据。它正在正确拉入并将标记定位在它们应该在的位置。我遇到的问题与`google.maps.event.addListener`，所有标记都在信息窗口中显示相同的内容，由于某种原因，它似乎没有正确循环数据。

以下是我所拥有的，关于为什么它不能正常工作的任何想法，谢谢。

```
$.get('http://localhost/map/map/locations', function(result) {
    var locations = $.parseJSON(result);

    // Markers
    var markers = [];

    // Looping through the JSON data
    for (var i = 0, length = locations.length; i < length; i++) {

        var data = locations[i];

        // Creating a marker and putting it on the map
        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(data.lat, data.long),
            map: map,
            title: data.title,
            icon: iconSrc[data.category]
        });
        markers.push(marker);

        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
                infoWindow.setContent("<div class='cont_box' id='" + data.entry_id + "'> <h2>" + data.title + "</h2> <div class='cont'><p><img src='" + data.infoImage + "' alt='' width='100' height='66' style='float:right;'>" + data.windowText + "</p></div><div style='clear:both;'></div><div class='link'><a href='" + data.moreLink + "' target='_blank'>" + data.moreText + "</a></div></div>");
                infoWindow.open(map, marker);
            }
        })(marker, i));

    }// END for loop

}); 
```

**更新**

将数据变量添加到上下文后，它工作正常。

我现在必须根据它们的类别显示和隐藏标记。我认为这可能是一个类似的问题。将这些隐藏和显示功能包含在数据变量中的最佳方法是什么？

职能：

```
 /** Shows all markers of a particular category, and ensures the checkbox is checked **/
    function show(category) {
        for (var i=0; i<locations.length; i++) {
            if (data.category == category) {
                markers[i].setVisible(true);
            }
        }
    }// END function show

    /** Hides all markers of a particular category, and ensures the checkbox is cleared **/
    function hide(category) {
        for (var i=0; i<locations.length; i++) {
            if (data.category == category) {
              markers[i].setVisible(false);
            }
        }
    }// END function hide

    /** Show or hide the categories initially **/
    show("financial_services");
    show("government");
    show("identity_access");
    show("machine_to_machine");
    show("telecommunications");
    show("transport");

    /** Action when checkbox is clicked **/
    $(".checkbox").click(function(){
        var cat = $(this).attr("value");

        // If checked
        if ( $(this).is(":checked") ){
            show(cat);
        }
        else {
            hide(cat);
        }
    }); 
```

这就是它目前与所有东西一起使用的方式，它与 $.get 调用一起，但在其中包含数据 var 的 for 循环之外：

```
 // JSON feed
$.get('http://localhost/map/map/locations', function(result) {
    var locations = $.parseJSON(result);

    // Markers
    var markers = [];

    // Looping through the JSON data
    for (var i = 0, length = locations.length; i < length; i++) {

        var data = locations[i];

        // Creating a marker and putting it on the map
        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(data.lat, data.long),
            map: map,
            title: data.title,
            icon: iconSrc[data.category]
        });
        markers.push(marker);

        google.maps.event.addListener(marker, 'click', (function(marker, i, loc) {
            return function() {
                infoWindow.setContent("<div class='cont_box' id='" + loc.entry_id + "'> <h2>" + loc.title + "</h2> <div class='cont'><p><img src='" + loc.infoImage + "' alt='' width='100' height='66' style='float:right;'>" + loc.windowText + "</p></div><div style='clear:both;'></div><div class='link'><a href='" + loc.moreLink + "' target='_blank'>" + loc.moreText + "</a></div></div>");
                infoWindow.open(map, marker);
            }
        })(marker, i, data));

    }// END for loop

    /** Shows all markers of a particular category, and ensures the checkbox is checked **/
    function show(category) {
        for (var i=0; i<locations.length; i++) {
            if (data.category == category) {
                markers[i].setVisible(true);
            }
        }
    }// END function show

    /** Hides all markers of a particular category, and ensures the checkbox is cleared **/
    function hide(category) {
        for (var i=0; i<locations.length; i++) {
            if (data.category == category) {
              markers[i].setVisible(false);
            }
        }
    }// END function hide

    /** Show or hide the categories initially **/
    show("financial_services");
    show("government");
    show("identity_access");
    show("machine_to_machine");
    show("telecommunications");
    show("transport");

    /** Action when checkbox is clicked **/
    $(".checkbox").click(function(){
        var cat = $(this).attr("value");

        // If checked
        if ( $(this).is(":checked") ){
            show(cat);
        }
        else {
            hide(cat);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:04:47.070

您的 addListener 打开一个新上下文，因此您的数据变量不可用。在上下文中添加数据变量：

```
google.maps.event.addListener(marker, 'click', (function(marker, i, myData) {
    return function() {
       infoWindow.setContent("<div class='cont_box' id='" + myData.entry_id + "'> <h2>");
       infoWindow.open(map, marker);
    }
})(marker, i, data)); 
```

# objective-c - Objective C Singleton - 防止多次分配内存

> ID：14963103
> 
> 赞同：0
> 
> 时间：2013-02-19T16:58:18.323
> 
> 标签：objective-c, singleton

我在我的应用程序中使用一个 sinlgeton 来管理整个应用程序可用的数据，这些数据通过以下方式访问：

```
static MMProductManager *sharedInstance = nil;
+(MMProductManager*)SharedInstance {
    dispatch_once( &resultsToken, ^(void) {
        if ( ! sharedInstance ) {
            sharedInstance = [[MMProductManager alloc] init];
        }
    });
    return sharedInstance;
} 
```

一切都按预期工作。

在Objective C中，似乎没有办法隐藏任何对象的`init`方法，在我的情况下，拥有多个实例`MMProductManager`会导致数据被复制（在最好的情况下）。

我想做的是防止实例化多个实例。其他语言似乎有这个功能；即将某些方法/类标记为私有。我正在考虑实施类似的东西：

```
-(id)init {
    // guard against instantiating a more than one instance
    if ( sharedInstance )
        return sharedInstance;

    if ( (self = [super init]) ) {
        self->_resultsQueue = dispatch_queue_create( kMMResultQLAbel, NULL );
        self->_initialized  = FALSE;

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(handleNotification:)
                                                     name:UIApplicationDidReceiveMemoryWarningNotification
                                                   object:0];

        [self initialize];
    }

    return self;
} 
```

这种方法看起来合理吗？

如果有人分配这个类，然后调用`init`上面描述的，会发生什么？覆盖是否合理`+(id)alloc`？如果是这样，我将如何去做？

我知道公开`SharedInstance`方法的约定是向其他开发人员传递此方法的隐含信息，但如果可能的话，我希望有更多的控制权。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:04:49.197

You don't want to override `- init` (if not for some other reason) - `- init` is **not** the method that creates the instance. You want to override `+ alloc` for this:

```
@implementation SingletonClass

+ (id)alloc
{
    static id instance = nil;
    if (instance == nil) {
        instance = [super alloc];
    }
    return instance;
}

@end 
```

This way you can **actually prevent (almost) completely** creating multiple instances of `SingletonClass`.

(Unless somebody falls back to calling

```
id trickyDifferentInstance = class_createInstance(objc_getClass("SingletonClass"), 0)); 
```

but that's very unlikely.)

# wpf - 当 ScrollBar 变得可见时 WPF Scrollviewer DesiredSize 不会增加

> ID：14963104
> 
> 赞同：0
> 
> 时间：2013-02-19T16:58:18.873
> 
> 标签：wpf, resize, scrollbar, scrollviewer, elementhost

我有一个 WPF `UserControl`（在一个内部`ElementHost`），其中一个`ScrollViewer`包含一个`ItemsControl`. `HorizontalScrollbarVisibility`设置为，因此`Auto`如果不需要滚动，则会`ScrollBar`隐藏 。

我的要求是，如果`ScrollBar`显示/隐藏，`ElementHost`确实会相应地调整它的高度。为了实现这一点，我正在听`SizeChanged`事件，我得到了`DesiredSize`中`ScrollViewer`的`EventHandler`，然后我传递`DesiredSize.Height`给`ElementHost`.

1.  ![可见的](../Images/309b90a1bed69217841d2c192531cd9d.png) 2\. ![隐](../Images/77b653e51d774f4a7dbccd088d05558c.png) 3.![不正确的，重叠的](../Images/b6954e35f98579f99eb7830610083097.png)

一种方法，这是可行的：在`ScrollBar`可见的情况下（情况 1），我放大我的窗口，直到所有项目`ItemsControl`都可见，`ScrollBar`消失，`ElementHost`调整到降低的高度（情况 2）。实际上在隐藏`DesiredSize`的那一刻变小了。`ScrollBar`

但是，另一种方式不起作用：在`ScrollBar`不可见的情况下（情况 2），我减小了窗口大小，直到 a`ScrollBar`是必要的并出现。`DesiredSize`保持不变，并且`ElementHost`不调整（情况3）。

有任何想法吗？

这是 的 xaml `Scrollviewer`，有一些 MVVM 的东西，但不要挂断这个，关键是，为什么出现`DesiredSize`时不增加`ScrollBar`？为什么只是缩水？

```
<ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Hidden" >
    <i:Interaction.Behaviors>
        <beh:HeightChangedBehavior HeightChangedCommand="{Binding HeightChangedCommand}" />
    </i:Interaction.Behaviors>
    <ItemsControl ItemsSource="{Binding TabHeaders}" >
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel IsItemsHost="True" Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate DataType="models:TabHeaderButtonModel">
                <RadioButton Content="{Binding Caption}" IsChecked="{Binding IsChecked, Mode=TwoWay}" GroupName="Tabs" 
                            Command="{Binding SelectionChangedCommand}" CommandParameter="{Binding}"
                            Style="{StaticResource TabHeaderToggleButtonStyle}">
                </RadioButton>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</ScrollViewer> 
```

ScrollViewer 样式（基本上是默认的 WPF）：

```
<Style x:Key="ScrollViewerStyle1" TargetType="{x:Type ScrollViewer}">
    <Setter Property="Template" >
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ScrollViewer}">
                <Grid x:Name="Grid" Background="{TemplateBinding Background}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Rectangle x:Name="Corner" Grid.Column="1" Fill="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" Grid.Row="1"/>
                    <ScrollContentPresenter x:Name="PART_ScrollContentPresenter" CanContentScroll="{TemplateBinding CanContentScroll}" CanHorizontallyScroll="False" CanVerticallyScroll="False" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Grid.Column="0" Margin="{TemplateBinding Padding}" Grid.Row="0"/>
                    <ScrollBar x:Name="PART_VerticalScrollBar" AutomationProperties.AutomationId="VerticalScrollBar" Cursor="Arrow" Grid.Column="1" Maximum="{TemplateBinding ScrollableHeight}" Minimum="0" Grid.Row="0" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" ViewportSize="{TemplateBinding ViewportHeight}"/>
                    <ScrollBar x:Name="PART_HorizontalScrollBar" AutomationProperties.AutomationId="HorizontalScrollBar" Cursor="Arrow" Grid.Column="0" Maximum="{TemplateBinding ScrollableWidth}" Minimum="0" Orientation="Horizontal" Grid.Row="1" Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" Value="{Binding HorizontalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" ViewportSize="{TemplateBinding ViewportWidth}" Style="{DynamicResource ScrollBarStyle1}"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="IsEnabled" Value="false">
            <Setter Property="Foreground" Value="White"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:40:34.417

我必须通过获取 ScrollViewer 的内容所需的高度并添加 ScrollBar 高度（如果可见）来计算所需的高度。

这对我来说仍然有点尴尬，所以如果你有更好的解决方案，我很乐意改变接受的答案。

```
public class HeightChangedBehavior : Behavior<ScrollViewer>
{
    public ICommand HeightChangedCommand { get { return (ICommand)GetValue(HeightChangedCommandProperty); } set { SetValue(HeightChangedCommandProperty, value); } }
    public static readonly DependencyProperty HeightChangedCommandProperty = DependencyProperty.Register("HeightChangedCommand", typeof(ICommand), typeof(HeightChangedBehavior), new PropertyMetadata(null));

    protected override void OnAttached()
    {
        this.AssociatedObject.ScrollChanged += AssociatedObject_ScrollChanged;
        base.OnAttached();
    }

    /// <summary>
    /// Calculates the desired height for the scrollviewer, as the sum of its content
    /// desired height and, if visible, the horizontal scrollbar height.
    /// </summary>
    void AssociatedObject_ScrollChanged(object sender, ScrollChangedEventArgs e)
    {
        ScrollViewer sv = (ScrollViewer)sender;

        // get content height
        double height = ((FrameworkElement)sv.Content).DesiredSize.Height;

        if (sv.ComputedHorizontalScrollBarVisibility == Visibility.Visible)
        {
            // add scrollbar height
            height += (double)sv.FindResource(SystemParameters.HorizontalScrollBarHeightKey); // template of scrollbar should use this key
        }

        int intHeight = (int)Math.Ceiling(height); // whole pixels

        // execute the command
        ICommand cmd = this.HeightChangedCommand;
        if (cmd != null && intHeight != sv.ActualHeight)
            cmd.Execute(intHeight);
    }
} 
```

# linux - Condor 沙盒 R（在 Linux 上）

> ID：14963107
> 
> 赞同：4
> 
> 时间：2013-02-19T16:58:31.993
> 
> 标签：linux, r, condor

我的大学运行一个 condor 计算网格（计算节点运行 Linux），我想用它在 R 中运行模拟。问题是网格上只有一些机器安装了 R。到目前为止，我看到了两个选项，但我不知道如何实现任何一个，所以我希望你能帮助我（请记住，我不是系统管理员，不能做太多更改设置计算节点）：

1) 在与我的 condor 提交文件一起发出的 ClassAds 中进行检查，以要求在具有`/usr/bin/R`.

2) 将 R 及其所有依赖项打包到一个独立的目录中，该目录可以发送到计算节点，并且可以针对该目录运行我的模拟。我已经尝试了几个小时来执行此操作，但是 R 的 Linux 版本（与 OSX 和 Windows 版本不同）似乎针对分布在文件系统中的库运行，我想不出一种实用的方法来收集它们全部放到 R 可以找到它们的位置。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:06:17.777

最终对我有用的是提出的解决方案（1）。在这里，我将讨论我是如何在我的 condor 提交文件和我的 worker shell 脚本中实现 (1) 的。

这是shell脚本。重要的变化是通过以下方式检查 R 是否安装在计算节点上：`if [ -f /usr/bin/R ]`. 如果找到 R，我们沿着返回值 0 结束的路径前进。如果没有找到 R，我们返回 1（这就是行`exit 0`和的含义`exit 1`）。

```
mkdir output
if [ -f /usr/bin/R ]
then
    if $(uname -m |grep '64')
    then
            Rscript code/simulations-x86_64.r $*
    else
            Rscript code/simulations-i386.r $*
    fi

    tar -zcvf output/output-$1-$2.tgz2 output/*.csv
    exit 0
else
    exit 1
fi 
```

现在神鹰提交文件。关键的变化是倒数第二行 ( `on_exit_remove = (ExitBySignal == False) && (ExitCode == 0)`)。它检查来自计算节点的每个作业的返回值——如果返回值不为零（即，如果在计算节点上未找到 R），则将作业放回队列中以重新运行。否则，作业被认为已完成并从队列中删除。

```
universe = vanilla
log = logs/log_$(Cluster)_$(Process).log
error = logs/err_$(Cluster)_$(Process).err
output = logs/out_$(Cluster)_$(Process).out
executable = condor/worker.sh
arguments = $(Cluster) $(Process)
requirements = (Target.OpSys=="LINUX" && regexp("stat", Machine))
should_transfer_files = YES
when_to_transfer_output = ON_EXIT_OR_EVICT
transfer_input_files = code, R-libs, condor, seeds.csv
transfer_output_files = output
notification = Never
on_exit_remove = (ExitBySignal == False) && (ExitCode == 0)
queue 1800 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:49:30.177

哇，好吧，这比我想象的要难。让我们从建议的解决方案（2）开始：

在 hadley 的建议下，我使用[Renv](https://github.com/viking/Renv)将 R 安装到已知的本地目录（也使用[R-build](https://github.com/viking/R-build)构建 R-2.15.2）。不幸的是，这个本地安装仍然依赖于来自诸如`/usr/lib`.

MvG 建议将本地 R 安装从[sage](http://sagemath.org/)中提取出来。这个附带了所有必要系统库的本地副本，并且是一种可能适用于大多数面临我情况的人的方法。但是，我的`R`代码依赖于一些仅与>= 2.15`R`兼容的包。`R`

因此，我从 sage 目录中取出所有库，`lib`并将它们复制到 Renv 的 R-2.15.2 安装中。这本来可行，但我大学的 condor 网格上的某些机器必须具有奇怪的架构，因为大约十分之一的工作返回与尝试使用错误版本的`libc.so`. 在这一点上，我放弃了建议的解决方案（2）并转向建议的解决方案（1）。

# spring-mvc - Spring Security - 覆盖配置文件中的默认配置

> ID：14963108
> 
> 赞同：3
> 
> 时间：2013-02-19T16:58:35.660
> 
> 标签：spring-mvc, spring-security

上下文是 Spring 3.1（我们使用 Spring MVC 和 Spring Security）。

我们正在尝试做的是仅在`admin`配置文件处于活动状态时才可用的管理页面。使用 Spring Security，我们尝试了类似的方法：

```
<security:http use-expressions="true" entry-point-ref="entryPointDenied">
    <security:intercept-url pattern="/admin/**" access="denyAll" />
</security:http>

<beans profile="admin">
    <security:http use-expressions="true">
        <security:intercept-url pattern="/admin/**" access="permitAll" />
        <sec:form-login/>
    </security:http>
</beans> 
```

但这不起作用，因为我们无法覆盖`security:http`定义（我们尝试使用该`http@name`属性）。所以通过上面的配置，我们得到

```
Caused by: java.lang.IllegalArgumentException: A universal match pattern ('/**') is defined  before other patterns in the filter chain, causing them to be ignored. 
```

此外，我们不能使用`profile="!admin"`Spring 3.2 中引入的否定配置文件（ie）特性。

理想情况下，解决方案应该是纯 Spring 配置。

**编辑：**将缺少的 use-expressions="true" 添加到第二个安全性：http

# java - 在我奇怪的 Tomcat 服务器上获取 RESTful Web 服务？

> ID：14963110
> 
> 赞同：0
> 
> 时间：2013-02-19T16:58:37.350
> 
> 标签：java, rest, tomcat

我的 Tomcat 服务器不像其他服务器 100%，我正在尝试遵循本教程：

[http://www.suryasuravarapu.com/2009/02/rest-jersey-configuration-on-tomcat.html](http://www.suryasuravarapu.com/2009/02/rest-jersey-configuration-on-tomcat.html)

到目前为止，我已经下载了：

```
asm-3.3.1.jar
jersey-client-1.17.jar
jersey-core-1.17.jar
jersey-server-1.17.jar 
```

并将它们放在我的 /lib/ 目录中。

我的文件夹结构是这样的：

```
/WEB-INF/classes/rest/com/mkyong/HellowWorldService.class 
```

我将 web.xml 定义为：

```
<display-name>Restful Web Application</display-name>

<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>
                 com.sun.jersey.spi.container.servlet.ServletContainer
            </servlet-class>
    <init-param>
         <param-name>com.sun.jersey.config.property.packages</param-name>
         <param-value>com.mkyong.rest</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/servlets/servlet/rest/*</url-pattern>
</servlet-mapping> 
```

我不确定 URL 模式是否正确？

当我访问时，`myserver.com/servlets/servlet/rest/hello/Eric`我应该让它说 Jersey 说：Eric 但我收到了 HTTP 状态 500 错误：

[http://pastebin.com/iq5NDVw4](http://pastebin.com/iq5NDVw4)

Tomcat日志说：

```
Feb 19, 2013 4:46:21 PM com.sun.jersey.api.core.PackagesResourceConfig init
INFO: Scanning for root resource and provider classes in the packages:
  com.mkyong.rest
Feb 19, 2013 4:46:21 PM com.sun.jersey.server.impl.application.WebApplicationImpl _initiate
INFO: Initiating Jersey application, version 'Jersey: 1.17 01/17/2013 04:27 PM'
Feb 19, 2013 4:46:21 PM com.sun.jersey.server.impl.application.RootResourceUriRules <init>
SEVERE: The ResourceConfig instance does not contain any root resource classes.
Feb 19, 2013 4:46:27 PM com.sun.jersey.api.core.PackagesResourceConfig init 
```

大大收到任何帮助！

编辑：

我在男生页面上找到[了这篇文章。](http://www.mkyong.com/webservices/jax-rs/jersey-the-resourceconfig-instance-does-not-contain-any-root-resource-classes/)但这没有多大意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:21:28.900

对应本教程[http://www.vogella.com/articles/REST/article.html#installation](http://www.vogella.com/articles/REST/article.html#installation) ,

> 此名称源自 web.xml 文件中定义的“显示名称”，并使用 servlet-mapping url-pattern 和类文件中的“hello”@Path 注释进行了扩充。

据此，在您的情况下，`display-name`您用于测试的链接中没有提及您的内容。`web.xml``" "`

编辑：这个 servlet 的基本 URL 是：

```
http://your_domain:port/display-name/url-pattern/path_from_rest_class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:03:18.310

查看tomcat日志。也许您应该将一些 jar 库放在 /WEB-INF/lib 或 /tomcat/lib 目录中。也许一些库在运行时使用。仔细阅读tomcat日志。

# java - WSDL 导致 WSDLToJava 生成失败代码

> ID：14963112
> 
> 赞同：0
> 
> 时间：2013-02-19T16:58:52.573
> 
> 标签：java, jax-ws, cxf

我有以下 wsdl 文件：-

```
<?xml version="1.0" encoding="UTF-8"?>

<definitions xmlns="http://schemas.xmlsoap.org/wsdl/"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://schema.intersec.com/igloo/push/v1.2"
    targetNamespace="http://schema.intersec.com/igloo/push/v1.2">

    <!-- WSDL types -->
    <types>
        <schema targetNamespace="http://schema.intersec.com/igloo/push/v1.2"
            xmlns="http://www.w3.org/2001/XMLSchema">
            <complexType name="push.EventV2">
                <sequence>
                    <element name="cgi" minOccurs="0" type="string" />
                </sequence>
            </complexType>

            <!-- RPC arguments types -->
            <!-- Fails if i have this -->
            <!-- <element name="events.eventV2Req" type="tns:push.EventV2" /> -->
            <!-- Works if i have this -->
            <element name="events.eventV2Req" type="string"/>
        </schema>
    </types>

    <!-- WSDL Messages -->
    <message name="events.eventV2Req">
        <part name="parameters" element="tns:events.eventV2Req" />
    </message>

    <!-- WSDL Ports -->
    <portType name="push.PushPortType">
    <operation name="events.eventV2">
      <input message="tns:events.eventV2Req" />
    </operation>
  </portType>

  <!-- WSDL Bindings -->
  <binding name="push.PushBinding" type="tns:push.PushPortType">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" />
    <operation name="events.eventV2">
      <soap:operation soapAction="" />
      <input>
        <soap:body use="literal" />
      </input>
    </operation>
  </binding>

  <!-- WSDL Services -->
  <service name="push.Push">
    <port name="push.PushEndPoint" binding="tns:push.PushBinding">
      <soap:address location="http://localhost:10700/Igloo/push.Push" />
    </port>
  </service>
</definitions> 
```

这工作使用以下 ant 任务生成（即生成的代码成功（尽管我必须传入正确的 wsdlURL））： -

```
 <java classname="org.apache.cxf.tools.wsdlto.WSDLToJava" fork="true">
        <arg value="-client" />
        <arg value="-server" />
        <arg value="-impl" />
        <arg value="-frontend" />
        <arg value="jaxws21" />
        <arg value="-d" />
        <arg value="src/generated" />
        <arg value="src/wsdl/Dummy.wsdl" />
        <classpath>
            <path refid="cxf.classpath" />
        </classpath>
    </java> 
```

但是，如果我对以下内容进行相应的评论和取消评论

```
 <!-- Fails if i have this -->
        <element name="events.eventV2Req" type="tns:push.EventV2" />
        <!-- Works if i have this -->
        <!-- <element name="events.eventV2Req" type="string"/> --> 
```

当我启动服务器并运行客户端代码时，我得到以下信息： -

```
19-Feb-2013 16:44:06 org.apache.cxf.service.invoker.AbstractInvoker invoke
SEVERE: Invocation without a binding operation.
19-Feb-2013 16:44:06 org.apache.cxf.phase.PhaseInterceptorChain doDefaultLogging
WARNING: Interceptor for {http://schema.intersec.com/igloo/push/v1.2}push.Push has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: No binding operation info while invoking unknown method with params unknown.
    at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:60)
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58)
    at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37)
    at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:106)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
    at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:319)
    at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:287)
    at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:72)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:939)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:875)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:247)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:110)
    at org.eclipse.jetty.server.Server.handle(Server.java:346)
    at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:589)
    at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1065)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:823)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:220)
    at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:411)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:535)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:529)
    at java.lang.Thread.run(Unknown Source) 
```

有人知道 wsdl 或 jaxws 有什么问题吗？

我在用： -

*   java 1.6.0_31-b05
*   CXF 2.4.6
*   码头 7.4.5

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:30:30.133

在客户端代码中，有以下行：-

```
com.intersec.schema.igloo.push.v1.PushEventV2 _eventsEventV2_parameters = null; 
```

如果我将其更改为： -

```
com.intersec.schema.igloo.push.v1.PushEventV2 _eventsEventV2_parameters 
    = new ObjectFactory().createPushEventV2(); 
```

有用。

如果参数为空，我猜它找不到要调用的方法。

我想知道这是jaxws中的错误吗？

# asp.net-mvc - 首先使用 EF DB 将多个表从存储过程绑定到 MVC 模型

> ID：14963117
> 
> 赞同：1
> 
> 时间：2013-02-19T16:59:01.467
> 
> 标签：asp.net-mvc

我的存储过程将返回多个结果集。如何使用 EF db first 方法将它们绑定到我的模型？

我的模特

```
 public class SearchCriteriaResults
    {
        [Key]
        public string RecordID { get; set; }
        public int? SNO { get; set; }
        public int? CountyCode { get; set; }
        public string CountyName { get; set; }
}
public class Locations
    {
        //Locations
        public byte section { get; set; }
        public byte township { get; set; }
        public byte range { get; set; }
} 
```

每个 RecordID 将包含 Locations 中的多条记录。

我的 SP 代码

```
public List<SearchCriteriaResults> GetRecordDetailsbyID(string RecID)
    {
        List<SearchCriteriaResults> strResult = new List<SearchCriteriaResults>();
        try
        {
            strResult = objVCHEntities.ExecuteStoreQuery<SearchCriteriaResults>          ("[GetRecordDetailsbyID] @RecID={0}", RecID).ToList();
        }
        catch (Exception ex)
        {
            throw ex;
        }
        return strResult;
    } 
```

我总是`SearchCriteriaResults`从 SP 绑定到 1 条记录。我的 SP 查询

```
select rd.RecordID,bookType,grantee,grantor from Record rd where rd.RecordID = '12345' 
select section from Location where RecordID = '12345' 
```

在上面的查询中，我也可以使用 join，但是如何绑定到我的模型类？

# c# - 在xml中查找具有特定属性的元素？

> ID：14963119
> 
> 赞同：1
> 
> 时间：2013-02-19T16:59:09.213
> 
> 标签：c#, asp.net, xml, linq

我有以下xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<layout>
  <menu name="Employees" url="Employees.aspx" admin="0">
  </menu>
  <menu name="Projects" url="Projects.aspx" admin="1">
  </menu>
  <menu name="Cases" url="Cases.aspx" admin="1">
  </menu>
  <menu name="CaseView" url="CaseView.aspx" admin="1" hidden="1" parent="Projects">
  </menu>
  <menu name="Management" url="" admin="1">
    <item name="Groups" url="Groups.aspx" admin="1" parent="Management"/>
    <item name="Statuses" url="Statuses.aspx" admin="1"/>
  </menu>
</layout> 
```

在这里，我有 CaseView 和 Groups，它们都具有“父”属性。

目前我这样迭代：

```
IEnumerable<XElement> menus =
            doc.Element("layout").Elements();

            foreach (var menu in menus)
            {
                     string name = menu.Attribute("name").Value;
                string active = "";
                string url = menu.Attribute("url").Value;
                if(activePage == url)
                {
                    active = "class=\"active\"";
                }
                ... 
```

我想要的是：

```
 if(activePage == url || ActiveIsChildOf(name, activePage))
        {
            active = "class=\"active\"";
        } 
```

本质上，此方法需要查找是否存在以 activePage 作为其 url 属性的元素。如果有，看是否有父属性；如果是，请检查父级 == 名称。

有什么方法可以按属性或其他方式查找元素吗？前任：

```
XElement e = doc.GetByAttribute("url",activePage) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:12:15.067

如果 xpath 太神秘，你可以使用 LINQ：

```
IEnumerable<XElement> hits =
        (from el in XMLDoc.root.Elements("item")
         where (string)el.Attribute("url") == activePage
         select el); 
```

或像这样：

```
XElement xml = XElement.Load(file);
XElement xele = xml.Elements("item").FirstOrDefault(e => ((string)e.Attribute("url")) == activePage);
if(null != xele ) 
{
    // do something with it
} 
```

你可能希望它不区分大小写：

```
XElement xml = XElement.Load(file);
XElement xele = xml.Elements("item").FirstOrDefault(e => StringComparer.OrdinalIgnoreCase.Equals((string)e.Attribute("url") , activePage));
if(null != xele ) 
{
    // do something with it
} 
```

如果你想要菜单和项目，使用这个：

```
XElement xml = XElement.Load(file);
XElement xele = xml.Elements().FirstOrDefault(e => StringComparer.OrdinalIgnoreCase.Equals((string)e.Attribute("url") , activePage));
if(null != xele ) 
{
    // do something with it
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:20:36.957

由于您使用的是 Linq to XML，因此您可以使用`Descendants`方法 - 它返回所有子元素，而不仅仅是直接子元素。之后，您可以使用 LINQ 过滤结果。

```
XDocument doc;
string activePage;
var activeMenu = doc.Descendants("menu")
     .FirstOrDefault(o => o.Attribute("url").Value == activePage); 
```

如果您不能保证源 XML 不具有所有菜单元素的此类属性，您可能需要检查是否`o.Attribute("url")`不返回`null`（当属性不存在时会返回）。

您还可以跳过参数 to`Descendants()`检查所有元素 - 在您的示例数据中，这将允许您检查菜单和项目元素。例如：

```
var activeMenu = doc.Descendants()
     .Where(o => o.Name == "menu" || o.Name == "item")
     .FirstOrDefault(o => o.Attribute("url").Value == activePage); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:07:10.537

您可以简单地使用`xPath`. 它是一种查询语言`XML`。

您可以制定如下内容：

```
var xDoc = new XmlDocument();
xDoc.Load("XmlFile.xml");

//Fetch your node here 
XmlNode = xDoc.SelectSingleNode(/layout/menu[@url='activepage'][1]); 
```

它返回一组节点，索引 1 是获取给定集合的第一个节点。

`xDoc.SelectNodes`如果您想要所有匹配的节点，您可以随时使用。

* * *

由于您正在使用`LINQ`，您可以简单地使用或选择包含`System.Xml.XPath`和选择节点。`XPathSelectElement``XPathSelectElements`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T17:15:56.657

您可以使用 XPath 做到这一点：

```
doc.SelectNodes("//*[@url='" + activePage + "']") 
```

它将返回**所有**具有`activePage`as`url`属性的文档项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-24T13:25:55.503

不区分大小写的搜索示例，将 xml 转换为字典：

```
Dim expandos = XDocument.Parse(Request("Xml")).Root.Elements.Select(
    Function(e)
        Dim expando As Object = New ExpandoObject,
            dic = e.Attributes.ToDictionary(Function(a) a.Name.LocalName, Function(a) a.Value,
                StringComparer.InvariantCultureIgnoreCase)
        expando.PedidoId = dic("PedidoId")
        expando.FichaTecnicaModeloId = dic("FichaTecnicaModeloId")
        expando.Comodo = dic("Comodo")
        expando.Cliente = dic("Cliente")
        Return expando
    End Function) 
```

# java - 寻找 Java 的在线异常跟踪器

> ID：14963120
> 
> 赞同：0
> 
> 时间：2013-02-19T16:59:09.360
> 
> 标签：java, exception, logging, log4j, logback

有人知道[tracemycode.net之](http://tracemycode.net)类的东西，但对于Java？

看起来[Jira](http://www.atlassian.com/en/software/jira/whats-new/jira-51)有类似的东西（请参阅捕获反馈），但它不一样。

在 log4j/logback 集成的理想情况下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:02:43.783

为什么您的服务器端代码不打印到登录异常？

例如使用 log4j？这个好像不需要第三方软件，也不知道tracemycode是怎么赚钱的

编辑：

我想我现在明白了，您想要一种方法来读取从本地应用程序创建的异常。好吧，这有点冒险，因为任何网络通信都可能导致异常，从而导致无限递归，但只要您将这些异常排除在报告之外，您就可以了。

这将很容易构建。您需要做的就是生成一些您在异常中调用的帮助程序类，以将日志发送到服务器。

```
public class ExceptionReporter {

public static int sendReport(String aData)
    try {
        byte[] myData = aData.getBytes();
       /* Uploading the data */
       URL myURL = new URL(CONSTANTS.CentralURL);
       HttpURLConnection myConnection = (HttpURLConnection) myURL.openConnection();
       myConnection.setDoOutput(true);
       myConnection.setUseCaches(false);
       myConnection.setDefaultUseCaches(false);
       myConnection.setRequestProperty("Content-type", "application/octet-stream");
       OutputStream myOutputStream = myConnection.getOutputStream();
       myOutputStream.write(myData);
       myOutputStream.flush();
       myOutputStream.close();

       int status = ((HttpURLConnection) myConnection).getResponseCode();       
    } 
     catch (Exception e) {
         LocalLog.log(e.toString());     
    }

} 
```

然后在你所有的服务器代码/应用程序代码中你可以使用

```
try{
     // ...do stuff
}
catch (Exception e){
     ExceptionReporter.sendReport(e.getMessage());
} 
```

然后您的中央服务器可以接收这些 httpconnections，并将发送的数据保存到数据库或其他一些线程安全的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T12:52:51.960

如果需要，您可以使用 TraceMyCode，因为它在帮助部分清楚地记录了发送崩溃日志所需的端点和数据结构。

[http://tracemycode.net/help](http://tracemycode.net/help)

# java - struts 2 if 标签用于比较字符类型

> ID：14963126
> 
> 赞同：2
> 
> 时间：2013-02-19T16:59:23.383
> 
> 标签：java, if-statement, struts2

我无法使用以下代码比较字符类型

```
<s:if test='aCharType == "Y"'>
  This is not working
</s:if> 
```

这是 aCharType 是长度为 1 的字符类型。

我用谷歌搜索了我知道如果标签与字符串类型一起工作的 struts 2 的问题。

如果你有解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:35:02.533

您正在将您的`aCharType`与 String`"Y"`进行比较，将其与 char 进行比较`'Y'`

```
<s:if test="aCharType == 'Y'">
  This is working
</s:if> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-25T07:36:57.390

您的语法是正确的。但是您应该在对象之前提及“#”符号。“#”符号将提及这是对象而不是字符串。如果您不提及它将作为字符串。

你的正确答案是：

```
<s:if test='#aCharType == "Y"'>
      this will work
</s:if> 
```

# javascript - 跨浏览器和打印机友好页面的任何好的 javascript 库？

> ID：14963128
> 
> 赞同：9
> 
> 时间：2013-02-19T16:59:26.073
> 
> 标签：javascript, html, css, printing

我正在做一个网络项目，我们必须提出“一个跨浏览器和打印机友好的解决方案”。

标记足够复杂，但几个小时后，我设法在 Chrome 上仅使用 CSS（使用 media="print" 专用样式表）提出了一些足够漂亮的东西。

然而，在 Firefox (18.0.2) 和 IE9 上对其进行测试后，我意识到这只是开始意识到自己进入了哪里。Firefox 只打印第一页，甚至不正确，它很乱。IE9 打印了这一切，但它看起来很可怕。

在谷歌搜索和 SOing 一段时间后，我很快意识到使用浏览器内置的打印支持打印网页还处于实验状态。整洁的 HTML 页面可能很好，但 90% 的互联网可能不是整洁的 HTML 页面，无论如何，这是另一个争论。

所以，我想知道是否有任何 javascript 库可以“完成这项工作”？

我遇到过这些项目，但我不确定这是否能解决问题：

*   [http://snapshotmedia.co.uk/blog/jspdf](http://snapshotmedia.co.uk/blog/jspdf)
*   [http://code.google.com/p/html5shiv/](http://code.google.com/p/html5shiv/)

提前致谢

# c# - 如何在 asp:HyperLinkField 中使用 C# 变量？

> ID：14963134
> 
> 赞同：0
> 
> 时间：2013-02-19T16:59:44.263
> 
> 标签：c#, asp.net

这就是我所拥有的。页面加载，但超链接不是超链接。我在浏览器中查看页面的源代码，并在 a href 中看到与`DataNavigateUrlFormatString`下面属性中相同的字符串。我尝试了许多不同的方法，并且在执行过程中没有链接或错误。

```
<asp:HyperLinkField DataNavigateUrlFields="LIDCode" 
DataNavigateUrlFormatString='<%# Request.ServerVariables["SCRIPT_NAME"] %>?LC={0:d}&DD=true'>
</asp:HyperLinkField> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:52:24.287

如果 DataNavigateUrlFormatString 给我带来了麻烦，因为我无法在另一个服务器标签的属性中嵌入内联服务器标签（这就是问题所在），我要做的是在后面的代码中设置 DataNavigateUrlFormatString 属性，例如在Page_Load 事件

```
private void Page_Load()
{
    if (!IsPostBack)
    {

       string strUrlFormat = Request.ServerVariables["SCRIPT_NAME"] + "?LC={0:d}&DD=true"
       // get the gridview object and set the DataNavigateUrlFormatString property for the column in question here...  so if you gridview ID = "myGridView" and it is the third column...
       myGridView.Columns[2].DataNavigateUrlFormatString = strUtlFormat;

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T20:26:05.617

改用这样的方法： - 创建公共静态方法 GetLink() - 更新超链接中的代码，使其看起来像这样

```
DataNavigateUrlFormatString='<%# PageName.GetLink() %>' 

public static string GetLink()
{
    //needs to be completed but you see the point
    return HttpContext.Current.Request.ServerVariables["SCRIPT_NAME"];
} 
```

# java - 带参数的单例类

> ID：14963137
> 
> 赞同：8
> 
> 时间：2013-02-19T16:59:57.950
> 
> 标签：java, oop, singleton, design-patterns

我正在开发计算机视觉应用程序，我将需要分类器类。此类在每次运行应用程序时都是不可变的，它会在初始化时从磁盘加载训练数据。我想确保整个程序都可以访问相同的训练数据，并且我想在加载它们后阻止从磁盘重新加载。

我正在考虑的是使用静态类或单例。我不确定如何将数据加载到静态类，因为在编译时不知道数据文件的路径 - 这将是程序参数。所以我在考虑单例模式，但我不知道如何动态初始化它。

我的想法是使用以下内容：

```
class Singleton {
    private static Singleton instance;
    private Singleton() { ... }
    private static SomeDataObject data;

    public static Singleton getInstance() {
        if(instance == null)
            instance = new Singleton();

            return instance;
    }

    public static init(string dataPath){
        if(data == null)
             loadDataFromFile(dataPath)
    }
} 
```

这是**行不通的**，因为我无法控制首先调用哪个方法。

我知道正确的方法是在开始时使用数据创建实例并将其传递给所有需要它的类和方法，但这并不是真正的通用解决方案。我可以在自己的代码中跟踪对分类器的所有调用，但如果我将代码作为 API，这将是一个问题。

总之如何在运行时初始化单例？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T17:04:31.627

我不认为（确切地）你想做的事情会奏效。

以下将起作用：

```
public static void main(String[] args)
{
  Singleton.init("somepath");
  ...
  Singleton.getInstance().doingStuff();
  ...
} 
```

更好的实现可能是：（`NullPointerException`如果您尝试使用它而不`init`先调用它会导致 a）（虽然不再是真正的 Singleton）

```
private static Singleton instance;
private SomeDataObject data;

private Singleton(String path) { loadDataFromFile(path); ... }

public static Singleton getInstance() {
   return instance;
}

public static void init(String dataPath){
   instance = new Singleton(dataPath);
} 
```

然后是：（除了可能的不良编码习惯）

```
class Main
{
  public static void main(String[] args)
  {
    Singleton.currentPath = "somepath";
    ...
  }
}

class Singleton
{
  public static String currentPath = null;
  private static Singleton instance;
  private SomeDataObject data;

  private Singleton(String path) { loadDataFromFile(path); ... }

  public static Singleton getInstance() {
     if(instance == null && currentPath != null)
        instance = new Singleton(currentPath);
     return instance;
  }
} 
```

我想这并不能真正解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-18T14:40:26.173

我使用的东西比当前获胜的解决方案“更”线程安全，几乎没有使用同步。

```
import java.util.function.Supplier;

public class InitOnce {

/**
 * Marked as final to prevent JIT reordering
 */
private final Supplier<String> theArgs;

private InitOnce(Supplier<String> supplier) {
    super();
    this.theArgs = supplier;
}

/**
 * Uses the arguments to do something
 * 
 * @return
 */
public String doSomething() {
    return "Something : " + theArgs.get();
}

/**
 * Initializes all the things
 * 
 * @param someArgs
 */
public static synchronized void init(final Supplier<String> someArgs) {
    class InitOnceFactory implements Supplier<InitOnce> {
        private final InitOnce initOnceInstance = new InitOnce(someArgs);

        @Override
        public InitOnce get() {
            return initOnceInstance;
        }
    }

    if (!InitOnceFactory.class.isInstance(instance)) {
        instance = new InitOnceFactory();
    } else {
        throw new IllegalStateException("Already Initialized");
    }
}

private static Supplier<InitOnce> instance = new InitOnceHolder();

/**
 * Temp Placeholder supplier
 * 
 */
private static final class InitOnceHolder implements Supplier<InitOnce> {
    @Override
    public synchronized InitOnce get() {

        if (InitOnceHolder.class.isInstance(instance))
            throw new IllegalStateException("Not Initialized");

        return instance.get();
    }

}

/**
 * Returns the instance
 * 
 * @return
 */
public static final InitOnce getInstance() {
    return instance.get();
}
} 
```

# mysql - 将用于创建表的 DDL 从 MySQL 转换为 H2

> ID：14963138
> 
> 赞同：3
> 
> 时间：2013-02-19T16:59:58.253
> 
> 标签：mysql, syntax, h2

我正在尝试使用内存中的 H2 数据库设置一些单元/集成测试，整个过程都与 Spring 连接起来。这适用于将 MySQL 用于开发和生产的现有应用程序。

现在，我需要一个 DDL SQL 脚本来在 H2 中创建我的数据库结构。我可以轻松地从 MySQL 导出 DDL 语句。但我不知道语法上的区别是什么——至少我很确定诸如`engine=InnoDB`必须去之类的东西。

还有其他我应该注意的语法差异吗？

是否有可以自动将 de DDL 语句从 MySQL 语法转换为 H2 语法的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:09:16.427

对于最近的一个项目，我对此进行了快速尝试，但这绝对不应该被视为最佳或最干净的解决方案。还应该注意的是，我纯粹将它用于基于单元的集成测试。理想情况下，我会在接下来的几周内将它放在 github 上，以便人们可以添加它，但同时它可能会有所帮助。Java中的解决方案：

```
/**
 * Designed to go through MySQL schema produced from forward engineering tools and normalize slightly to
 * work with H2 for testing. This only works on the SQL constructs themselves and is not able to 
 * detect errors such as constraints with the same name.  
 * 
 * Assumptions
 *      - INDEX is created separately from main SQL body
 *      - Incompatible key words such as order are not used
 *      - Assumes the name of a constraint is not duplicated
 * @author jpgough
 *
 */
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;

public class MySqlToH2 {
    public static String convert(String filePath) throws IOException {
        String[] rawSQL = new String(Files.readAllBytes(Paths.get(filePath))).split("\\n");
        StringBuilder builder = new StringBuilder();

        for(String line : rawSQL) {
            if(line.contains("SET")) {
                continue;
            } else if(line.contains("INDEX")) {
                continue;
            } else if(line.contains("IF NOT EXISTS")) {
                line = line.replaceAll("IF NOT EXISTS", "");
            } else if(line.contains("--")) {
                continue;
            } else if(line.contains("ENGINE")) {
                line = ";";
            }

            line = line.replace("`", "");
            builder.append(line).append("\n");
        }
        return builder.toString();
    }
} 
```

# postgresql - PL/pgSQL 语法错误

> ID：14963144
> 
> 赞同：7
> 
> 时间：2013-02-19T17:00:16.137
> 
> 标签：postgresql, syntax, plpgsql

我有一个非常简单的 PL/pgSQL 脚本：

```
 declare x varchar(100); 
```

当我运行它时，我收到一条消息：

```
 [WARNING  ] declare x varchar(100)
        ERROR:  syntax error at or near "varchar"
        LINE 1: declare x varchar(100)
                          ^ 
```

我真的不明白这有什么问题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-20T06:46:24.760

**您只能**在 PostgreSQL 的函数体内使用过程语句。

```
CREATE OR REPLACE FUNCTION foo()
RETURNS int AS 
$$ -- here start procedural part
   DECLARE x int;
   BEGIN
     x := 10;
     RETURN x;
   END;
$$ -- here finish procedural part
LANGUAGE plpgsql; -- language specification 
```

或在临时功能中（匿名块）

```
DO $$
DECLARE x int;
BEGIN
  x := 10;
  RAISE NOTICE '>>>%<<<', x;
END;
$$; 
```

不可能将过程语句用作 SQL 语句，如 T-SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:38:24.340

使用示例

```
DO $$
Declare
  test varchar;
begin
   test := 'teste';
   if (char_length(test) > 0) then
      RAISE NOTICE '>>>%<<<', test;
   end if;
end;
$$; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-04T10:53:36.237

我已经通过以下代码解决了这个问题：

```
do $$
declare InvestigationTypeId int;
declare var_STDStatusMasterId int;
begin
   InvestigationTypeId := null;
   var_STDStatusMasterId := null;
end;
$$; 
```

# javascript - 在纯js中获取I18N字符串

> ID：14963149
> 
> 赞同：0
> 
> 时间：2013-02-19T17:00:29.587
> 
> 标签：javascript, internationalization, struts, dwr

我在 Struts 框架上使用 Direct Web Remoting 来显示一些 I18N 值。

例如，
>文件名 = Test.js

```
function test()
{
DWRutil.getMyAlert("i18n.test.javascript.alert",function(str){
alert(str);
});
} 
```

在 DWRUtil 的 getMyAlert 方法中，从 applicationresources.properties 返回 I18N 值

**问题：**
是否有任何选项可以将 I18N 值从 applicationresources.properties 直接加载到 Test.js？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:36:10.210

由于 javascript 在客户端浏览器中工作，因此 applicationresources.properties 在服务器中。

如果您使用的是 struts，则可以使用**bean:message**标记来检索 i18n 字符串，如下所示在 javascript 中。

```
var criteriaRequire = "<bean:message key="error.0044" />";
alert(criteriaRequire); 
```

# r - 用于创建和使用 -csv 的 R 循环

> ID：14963150
> 
> 赞同：1
> 
> 时间：2013-02-19T17:00:39.010
> 
> 标签：r, loops, output

我有一个形式的函数输出（来自koRpus）：令牌总数：887 类型总数：393

文本词汇多样性度量 MTLD：142.66 因子数量：6.22 因子大小：0.72 SD 令牌/因子：41.55（所有因子） 38（仅完整因子）

我想创建一个循环来存储 80 个不同文档的这些结果。我尝试了以下方法：

```
for (i in 1:length(infra$tableid)) {
  whypar <- paste(infra$whypar [infra[,1] ==i], collapse=" ")
wpi<- removeWords(whypar, stopwords("english"))

as.data.frame(wpi)
write.csv(data.frame(wpi), file= "wp.csv")

tagged.text <- tokenize("wp.csv", lang="en")

res.mtld <- MTLD(tagged.text)
  write.csv(data.frame(res.mtld),file="output.csv")
} 
```

其中 infra 是：

```
tableid 1, 2, 3, ... 80
whypar "I took part because xxx", "I believe that jshfdjk", "jhsadkjhd" ... (N=350) 
```

* * *

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:50:33.790

首先提取您感兴趣的 MTLD 对象的部分。从您的问题来看，您似乎只对 MTLD 返回的对象的子集感兴趣，即 MTLD 分数、因子数、令牌/因子的 SD 和仅完整因子的 SD。如果您只想要每个文件的这些结果，您只需编写一个漂亮的表作为所有文件的输出：

```
res <- data.frame( ID = numeric() , MTLD=numeric() , Factor_Size=numeric() , SD=numeric() , SD_Complete=numeric() )
for (i in 1:length(infra$tableid)) {
  whypar <- paste(infra$whypar [infra[,1] ==i], collapse=" ")
  wpi<- removeWords(whypar, stopwords("english"))

  wpi <- as.data.frame(wpi)
  write.csv(data.frame(wpi), file= "wp.csv")

  tagged.text <- tokenize("wp.csv", lang="en")

  res.mtld <- MTLD(tagged.text)
  mtld <- res.mtld@MTLD$MTLD
  fac.size <-  res.mtld@param$factor.size
  mtld.sd <- res.mtld@MTLD$lengths$sd
  mtld.sd.compl <- res.mtld@MTLD$lengths$sd.compl
  res <- rbind( res , c( infra$tableid[i] , mtld, fac.size , mtld.sd , mtld.sd.compl ) )
}
  write.csv( res , file="output.csv" ) 
```

我希望这会有所帮助，但请检查这些是您想要返回的结果。

# php - 如何将base64 png图像发送到PHP

> ID：14963159
> 
> 赞同：0
> 
> 时间：2013-02-19T17:00:55.787
> 
> 标签：php, jquery, image, base64, fpdf

我有一个 base64 png 图像。
我想在 FPDF 中使用它

**我这样创建它：**

```
var dataURI = canvas.toDataURL("image/png"); 
```

**并将其发送到 FPDF，如下所示：**

```
$('#send').click(function(e){
    e.preventDefault(); 
    var uri = "create_pdf.php?imgURI="+ dataURI;
    window.open ( uri, "Temp wind" );
}); 
```

在里面`create_pdf.php`我有：

```
require('fpdf.php');

$img = $_GET['imgURI'];
$img = str_replace('data:image/png;base64,', '', $img);
$img = str_replace(' ', '+', $img);
$data = base64_decode($img);

$pdf = new FPDF();
$pdf->AddPage();
$pdf->Image( $data, 0, 0, 200 );

$pdf->Output( "myimage.pdf", 'D' ); 
```

**而不是通常提示保存 PDF 我得到这个错误：**

> 图像文件没有扩展名，也没有指定类型：�PNG IHDRSJ����IDATx......

如何正确发送 base64 编码图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:05:22.393

似乎 pfdf 将保存的 iamge 作为参数，而不是 base64 在[这里尝试答案](https://stackoverflow.com/a/13079040/2039657)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T14:16:05.350

FPDF image() 函数根据应该包含文件路径的 $file 字符串检查文件类型。如果您在可选参数中提供一个类型，例如“png”，您可以克服这部分。

之后，FPDF 将尝试在其 _parsepng 和 _parsejpg 函数中打开 $file，以便您可以轻松地使用数据包装器 [http://www.php.net/manual/en/wrappers.data.php](http://www.php.net/manual/en/wrappers.data.php)

```
$fpdf->Image('data://image/png;base64,'.$image_data,null, null, 0, 0, 'png'); 
```

# c++ - 自动生成的班级成员？

> ID：14963163
> 
> 赞同：2
> 
> 时间：2013-02-19T17:01:00.753
> 
> 标签：c++, class, auto

创建类时，我知道如果您不指定它们，它们会自动生成 3 个构造函数/析构函数。`operator=`也是自动创建的。

`operator==`或任何其他比较运算符是自动生成的吗？是否创建了任何其他成员或成员函数？`this`指针呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:15:40.500

根据我能找到的[最新规范](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3485.pdf)，第 12.1 节指出：

> 12 特殊成员函数 [special] 1 默认构造函数（12.1）、复制构造函数和复制赋值运算符（12.8）、移动构造函数和移动赋值运算符（12.8）和析构函数（12.4）是特殊成员函数。[注意：当程序没有显式声明它们时，实现会为某些类类型隐式声明这些成员函数。如果它们被 odr-used (3.2)，实现将隐式定义它们。... ]

# sql - 选择语句作为列的 SQL 性能

> ID：14963164
> 
> 赞同：4
> 
> 时间：2013-02-19T17:01:09.913
> 
> 标签：sql

我有一个sql查询，

```
SELECT 
  col1, 
  col2, 
  col3, (
    SELECT COUNT(id) 
    FROM B 
    WHERE B.aid = A.id
  ) AS col4 
FROM A 
```

将选择作为列对性能有什么影响？是否会为返回的每一行执行该语句？

我真的只是对这个查询的性能感兴趣。我知道还有其他方法可以完成计数。但在这种情况下，我只是想了解 sql 如何与内联选择一起工作。

抱歉，如果这个问题是骗人的，我已经查看了stackoverflow，但我无法在任何地方找到它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T17:29:37.073

这取决于您的 SQL 实现。

SQL 是声明性的，由优化器根据逻辑规范构建物理计划。SQL Server 可以[去关联这个子查询](http://blogs.msdn.com/b/craigfr/archive/2006/10/04/decorrelating-subqueries.aspx)并变成一个`OUTER JOIN`

```
CREATE TABLE A(id INT PRIMARY KEY, col1 INT, col2 INT, col3 INT)

CREATE TABLE B(aid INT)

CREATE CLUSTERED INDEX ix ON B(aid)

/*Fool optimiser into thinking tables aren't empty*/
update statistics A with rowcount = 1000000, pagecount = 100000

update statistics B with rowcount = 1000000, pagecount = 100000

SELECT col1,
       col2,
       col3,
       (SELECT count( B.aid)
        FROM   B
        WHERE  B.aid = A.id) AS col4
FROM   A 

DROP TABLE A, B 
```

给出计划

![计划](../Images/f1ec72a41ebafbc35275b8eea12d228c.png)

基本上是一样的

```
SELECT col1,
       col2,
       col3,
       Cnt
FROM   (SELECT COUNT(aid) AS Cnt,
               aid
        FROM   B
        GROUP  BY aid) T
       RIGHT OUTER JOIN A
         ON A.id = T.aid 
```

子查询在逻辑上表示为`RIGHT OUTER JOIN`与`MERGE JOIN`物理实现一样。合并连接处理每个输入一次，而不是嵌套循环连接的逐行行为。

# c# - SQL中如何比较父子数据

> ID：14963166
> 
> 赞同：1
> 
> 时间：2013-02-19T17:01:16.793
> 
> 标签：c#, sql, database, sql-server-2008

我有两个 SQL 表，如下所示

```
columns of T1: meterID, parentID, childID  
columns of T2: dataID, meterID, date, amount 
```

表格样本数据；

```
 T1                            T2
-------------              -------------------------
1 | null |  2  *           1 | 1 | 01,01,2013 | 100  *
1 | null |  3  *           2 | 2 | 01,01,2013 | 60   *
2 |   1  |  4              3 | 3 | 01,01,2013 | 40   *
2 |   1  |  5              4 | 4 | 01,01,2013 | 35
3 |   1  |  6              5 | 5 | 01,01,2013 | 25
3 |   1  |  7              6 | 6 | 01,01,2013 | 15
4 |   2  | null            7 | 7 | 01,01,2013 | 25
5 |   2  | null
6 |   3  | null  
7 |   3  | null 
```

我想比较孩子的金额总和是否等于父母的金额。

例如; meter1 是meter2 和meter3 的父级（带* 的行）。我想检查 100 = 60 + 40。
如何使用 SQL 查询来做到这一点。

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:19:08.953

此请求将子级分组并与父级进行比较。

```
SELECT t1.meterID, 
       CASE WHEN t1.amount = o.SumAmount THEN 'IsMatch' ELSE 'IsNotMatch' END
FROM T2 t1 OUTER APPLY (
                        SELECT SUM(t3.amount) AS SumAmount
                        FROM T1 t2 JOIN T2 t3 ON t2.childID = t3.meterID
                        WHERE t1.meterID = t2.meterID
                        GROUP BY t2.meterID
                        ) o 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/4c6d3/1)上的演示[](http://sqlfiddle.com/#!3/4c6d3/1)

 **经过测试：您可以使用不带 GROUP BY 子句的查询

```
SELECT t1.meterID, 
       CASE WHEN t1.amount = o.SumAmount THEN 'IsMatch' ELSE 'IsNotMatch' END
FROM T2 t1 OUTER APPLY (
                        SELECT SUM(t3.amount) AS SumAmount
                        FROM T1 t2 JOIN T2 t3 ON t2.childID = t3.meterID
                        WHERE t1.meterID = t2.meterID
                        ) o 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:05:49.110

您想总结孩子的数量并与父母进行比较。这需要两个`t2`表连接，一个用于父级，一个用于子级。

以下查询假定`t1`没有重复的条目：

```
select t1.parentId, t1.childId,
       parent.amount as parent_amount,
       SUM(child.amount) as child_amount,
       (case when parent.amount = SUM(child.amount) then 'Match'
             else 'NoMatch'
        end)
from t1 left outer join
     t2 parent
     on t1.parentId = t2.meterid left outer join
     t3 child
     on t1.childId = t2.meterId
group by t1.parent_id, t1.childId, parent.amount 
```**

# python - 特定的python if 构造

> ID：14963168
> 
> 赞同：0
> 
> 时间：2013-02-19T17:01:19.117
> 
> 标签：python, conditional-statements

我正在尝试将 Python 实用程序翻译成 Ruby。问题是对python不太了解。

该实用程序的一个片段包括以下`if`条件：

```
if bits&0x10==0x10: 
```

这意味着什么？位是一个变量。它是某种“缩短的”“&&”，意思是如果位非零**且**值为 0x10？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T17:03:44.777

唯一的`&`就是按位和运算。即，`bits`逐位与 0x10 进行比较，如果两者都有该位置的位，`1`则结果`1`为该位置，否则为 0。

基本上，由于 0x10 在二进制中是 10000，因此这是检查第 5 位`bits`是否设置为`1`.

我不太了解红宝石，但我的猜测是，它应该有一个按位和运算符，它可能`&`也是如此。因此，这段特定的代码最终将在 ruby​​ 中完全相同。

编辑：根据[Ruby Operators](http://www.tutorialspoint.com/ruby/ruby_operators.htm)页面。在“Ruby Bitwise Operators”部分下`&`，在 ruby​​ 中也可以用作按位运算符，因此您可以在实用程序的翻译中保持原样，它确实应该可以工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T17:03:10.757

它实际上检查变量位的第 5 位是否已设置

这个怎么运作

*   & 是按位与。

*   0x10 是二进制值 0b10000 的十六进制

*   `bits`所以你对曾经发生过的事情做一些明智的决定`0b10000`

此外，Ruby 支持类似的按位测试结构

```
if (bits&0x10)
    ......
end 
```

请注意 Tim 提到的，您的 Python 构造可以简化为

```
if bits&0x10:
    ....... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:05:14.797

& 是二进制位“与”运算符。

0x10 是十六进制的 10。

您可能想在此处阅读 python 文档

[http://docs.python.org/2/reference/expressions.html](http://docs.python.org/2/reference/expressions.html)

# android - 自定义视图不显示

> ID：14963170
> 
> 赞同：0
> 
> 时间：2013-02-19T17:01:26.550
> 
> 标签：android, android-layout

我有一个从视图扩展的自定义视图类，我想在活动中使用它，但它没有显示任何内容。它运行没有错误，但黑屏没有输出。我的代码如下：

```
public class MoveableMenuLayout extends View {

    public MoveableMenuLayout(Context context, AttributeSet attrs) {

        super(context, attrs);
        LinearLayout ll = new LinearLayout(context);
        ll.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        TextView tv = new TextView(context);
        tv.setText("TES_______________");   
        ll.addView(tv);

        this.invalidate();
        this.requestLayout();
    }

    public MoveableMenuLayout(Context context) {
        super(context);

        LinearLayout ll = new LinearLayout(context);
        ll.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        TextView tv = new TextView(context);
        tv.setText("TES_______________");   
        ll.addView(tv);

        this.invalidate();
        this.requestLayout();

    }
} 
```

**通话活动**

```
public class TestActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        MoveableMenuLayout layout = new MoveableMenuLayout(this);   
        setContentView(layout);
    }
} 
```

我已经通过将它包含在 xml 布局中进行了尝试，但仍然没有输出。我不确定我做错了什么。我不想改变样式我希望它是一个单独的类，我知道我可以使用 xml 布局并使用 setcontentview 直接在 Activity 中设置它，但我不想那样做。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:05:44.673

Why would it- you have no data. You created a linear layout and text view, but they aren't your children. So you have no data to draw (and haven't overridden onDraw anyway).

If you want to create a custom view that holds a set of other views, you need to derive from ViewGroup, not View. You also need to add the top level subview(s) as children, not just hold them as data members. You're probably even better off deriving directly from LienarLayout or RelativeLayout, and inflating your children directly from xml.

```
public class MoveableMenuLayout extends ViewGroup {

public MoveableMenuLayout(Context context, AttributeSet attrs) {

    super(context, attrs);
    LinearLayout ll = new LinearLayout(context);
    ll.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    TextView tv = new TextView(context);
    tv.setText("TES_______________");   
    ll.addView(tv);
    addView(ll);
}

public MoveableMenuLayout(Context context) {
    super(context);

    LinearLayout ll = new LinearLayout(context);
    ll.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
    TextView tv = new TextView(context);
    tv.setText("TES_______________");   
    ll.addView(tv);
    addView(ll);

} 
```

}

Will probably work. You can upgrade that to definitely by deriving from LinearLayout instead. And then you wouldn't need to have an internal layout. Like this:

```
public class MoveableMenuLayout extends LinearLayout {

public MoveableMenuLayout(Context context, AttributeSet attrs) {

    super(context, attrs);
    TextView tv = new TextView(context);
    tv.setText("TES_______________");   
    addView(tv);
}

public MoveableMenuLayout(Context context) {
    super(context);

    TextView tv = new TextView(context);
    tv.setText("TES_______________");   
    addView(tv);

} 
```

}

An even better way is to do it via xml

```
public class MoveableMenuLayout extends LinearLayout {

public MoveableMenuLayout(Context context, AttributeSet attrs) {
    super(context, attrs);
    LayoutInflater inflater = (LayoutInflater)context.getSystemService(
            Context.LAYOUT_INFLATER_SERVICE);
    inflater.inflate( ourlayoutid,  this );
}

public MoveableMenuLayout(Context context) {
    super(context);

    LayoutInflater inflater = (LayoutInflater)context.getSystemService(
            Context.LAYOUT_INFLATER_SERVICE);
    inflater.inflate( ourlayoutid,  this );

} 
```

}

and then put the children you want in an xml file. In this case, the top level tag in the xml file should be a tag, not a layout

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:12:56.373

尝试为 textview 设置布局参数，因为您只是为父线性布局声明布局参数，而不是为子 textview 声明它不会获得高度和宽度。

# actionscript-3 - 在 ActionScript 中的 Object 内创建变量

> ID：14963171
> 
> 赞同：0
> 
> 时间：2013-02-19T17:01:27.193
> 
> 标签：actionscript-3

我正在尝试填充对象的 ArrayColletion，并且我有以下代码：

```
var objeto:Object = new Object;

for ( var index:int=0; index < modeloHojaEnvio.modelo.arrayDatos.length; index++) {
    if ( modeloHojaEnvio.modelo.arrayDatos.getItemAt( producto ).productoID == modeloHojaEnvio.modelo.arrayDatos.getItemAt( index ).productoID  &&
        modeloHojaEnvio.modelo.arrayDatos.getItemAt( producto ).destinoID == modeloHojaEnvio.modelo.arrayDatos.getItemAt( index ).destinoID ) {

        objeto.("lento"+precio)     = modeloHojaEnvio.modelo.arrayDatos.getItemAt( producto ).precio_base80;
        objeto.("rapido"+precio)    = modeloHojaEnvio.modelo.arrayDatos.getItemAt( producto ).precio_base100;

        modeloHojaEnvio.modelo.arrayDatosForDatagrid.addItem( objeto );
    }
} 
```

这是我感到困惑的地方：**objeto.("lento"+precio)**，由于我不知道会生成多少“lento”变量，所以我想将数字链接成这样：**objeto.lento1**，**objeto.lento2**等等......

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:28:31.880

用。。。来代替： `objeto["lento"+precio]`

# c# - C# 函数式编程的一个很好的参考

> ID：14963177
> 
> 赞同：1
> 
> 时间：2013-02-19T17:01:40.423
> 
> 标签：c#, functional-programming, design-patterns

我在网上搜索过（*并评估了网上商店的书籍*），但我对找到的关于该主题的文章不满意。

如果您使用关键字**C#**和**函数**式搜索 Web，您会发现很多*基础知识*或*Linq*文章。

我也不同意这个问题的第一个回答：

[C#中提供的函数式编程特性是否足够丰富？少了什么东西](https://stackoverflow.com/questions/522222/are-the-functional-programming-features-provided-in-c-sharp-rich-enough-whats)

毕竟 F# 建立在 .NET（如 C#）之上，是一种广泛使用且享有盛誉的函数式语言。

**有没有关于可以在 C# 中有利地使用的**良好功能模式的一组好的文章、一本书甚至是这里解释的技术？

如前所述，我正在搜索，也不是介绍性材料，也不是特定技术的指南（例如我使用和喜爱的 Linq）。

我还想知道是否可以将特定技术安全地暴露给可重用的库公共 API（*希望这不会太离题*）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:04:05.383

真实世界的函数式编程：F# 和 C# 中的示例 [平装本] Tomas Petricek（作者），Jon Skeet（作者）

[亚马逊链接](https://rads.stackoverflow.com/amzn/click/com/1933988924)

来自亚马逊书籍描述：

> 真实世界函数式编程是一个独特的教程，它通过 F# 和 C# 语言探索函数式编程模型。清晰呈现的想法和示例向读者展示了函数式编程与其他方法的不同之处。它解释了想法在 F#（一种函数式语言）中的外观，以及它们如何成功地用于解决 C# 中的编程问题。读者基于他们对 .NET 的了解，了解函数式方法在哪里最有意义，以及如何在这些情况下有效地应用它。

# c++ - 为 std::map C++ 使用多个键值

> ID：14963179
> 
> 赞同：1
> 
> 时间：2013-02-19T17:01:50.603
> 
> 标签：c++

您好我正在尝试编写一个从文件中读取数据然后将其保存在内存中的函数。此内存将需要 ax 和 ay 值来识别。它可能不是线性的，不同的 x 和 y 值之间可能会有很大的跳跃，并且值的数量是未知的，这不包括使用多维数组。

我想使用 std::map ，因为它可以满足我的需要，但它不支持多个键值。我还能用什么来存储数据，或者有没有办法合并 X 和 Y 值以便能够在地图容器中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:04:21.327

Make a pair of the `x` and `y` values, and use that as the key:

```
std::map<std::pair<int, int>, whatever> 
```

Note that as it stands, this will treat the `x` values as more significant than the `y` values if you traverse the map in order. If you want the `y` values to be more significant, you'd want to put them first in the pair.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:04:09.537

You should use an `std::pair` as the key to your map:

```
std::map<std::pair<int, int>, value_type> m; 
```

You can insert into the map using:

```
m[std::make_pair(0, 0)] = some_value; 
```

If you don't care about the order of your elements and would like faster retrieval and insertion, try a `std::unordered_map` instead.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T17:09:09.053

尽管您可以按照其他人的建议使用 std::pair ，但我会认真考虑制作一个包含密钥数据成员的简单类。它提高了可读性，并且如果需要，还可以更容易地使用 3rd、4th、... 成员对其进行扩展。

如果你从 std::pair 开始，然后你想添加第三个元素，你可能会想要移动到 std::tuple，但这会导致代码不可读。

只需创建一个关键类，并给它一个体面的构造函数（每个数据成员一个参数）。

# asp.net - 安装 MS Web Deploy 3.0 - 无法启动 WMService

> ID：14963180
> 
> 赞同：3
> 
> 时间：2013-02-19T17:01:56.320
> 
> 标签：asp.net, iis-7, windows-server-2008, webdeploy

我有一个专用服务器，我正在尝试使用以管理员身份运行的 Web 平台安装程序来安装 MS Web Deploy 3。

它无法安装并显示以下消息：

```
We're sorry. The following products have failed to install.
**Web Deploy 3.0 - July 2012**
This product did not install successfully: Service 'Web Management Service' (WMSvc)
failed to start.  
Verify that you have sufficient privileges to start system services. 
```

我曾尝试使用“以管理员身份运行”运行安装程序，但每次都会出现此错误。有谁知道我可以如何验证或解决这个问题？

谢谢！对不起任何noobness！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-06-18T10:40:01.893

我找到了一个可能的答案，因为我不会放弃。转到您的 iis 安装并选择服务器，以便您获得选项，转到管理服务。您可以尝试检查“远程连接”并重新启动，如果这没有帮助，请在 ssl 证书下拉列表中选择您已安装的证书。在此之后，我能够安装 Web 部署软件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T19:12:15.440

有同样的问题。似乎是 Web Deploy v3 的问题。我安装了 Web Deploy v2 没有问题。看起来他们俩可以共存。只需确保将 Web 部署代理服务的路径从 C:\Program Files\IIS\Microsoft Web Deploy V3 更改为 C:\Program Files\IIS\Microsoft Web Deploy V2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-06T06:10:34.090

我还找到了这个问题的可能答案。WebPI 似乎没有将 IIS 管理服务安装为 Web 部署的依赖项。

安装 IIS 管理服务（并重新安装 Web 部署）后，它开始工作。

# javascript - 如何将数组中的最后 4 个字节转换为整数？

> ID：14963182
> 
> 赞同：5
> 
> 时间：2013-02-19T17:01:58.693
> 
> 标签：javascript, integer, bytearray, bitconverter

如果我`Uint8Array`在 JavaScript 中有一个数组，我将如何获取最后四个字节，然后将其转换为 int？使用 C# 我会做这样的事情：

```
int count = BitConverter.ToInt32(array, array.Length - 4); 
```

有没有一种不等价的方式来使用 JavaScript 做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T17:20:34.147

访问底层并使用其字节切片`ArrayBuffer`创建一个新的：`TypedArray`

```
var u8 = new Uint8Array([1,2,3,4,5,6]); // original array
var u32bytes = u8.buffer.slice(-4); // last four bytes as a new `ArrayBuffer`
var uint = new Uint32Array(u32bytes)[0]; 
```

如果`TypedArray`没有覆盖整个缓冲区，你需要有点棘手，但不多：

```
var startbyte = u8.byteOffset + u8.byteLength - Uint32Array.BYTES_PER_ELEMENT;
var u32bytes = u8.buffer.slice(startbyte, startbyte + Uint32Array.BYTES_PER_ELEMENT); 
```

这在两种情况下都有效。

如果您想要的字节适合数据类型的基础缓冲区的对齐边界（例如，您想要基础缓冲区的字节 4-8 的 32 位值），您可以避免复制字节`slice()`并仅提供 byteoffset到视图构造函数，如@Bergi 的回答。

下面是一个经过非常简单测试的函数，它应该得到你想要的任何偏移量的标量值。如果可能，它将避免复制。

```
function InvalidArgument(msg) {
    this.message = msg | null;
}

function scalarValue(buf_or_view, byteOffset, type) {
    var buffer, bufslice, view, sliceLength = type.BYTES_PER_ELEMENT;
    if (buf_or_view instanceof ArrayBuffer) {
        buffer = buf_or_view;
        if (byteOffset < 0) {
            byteOffset = buffer.byteLength - byteOffset;
        }
    } else if (buf_or_view.buffer instanceof ArrayBuffer) {
        view = buf_or_view;
        buffer = view.buffer;
        if (byteOffset < 0) {
            byteOffset = view.byteOffset + view.byteLength + byteOffset;
        } else {
            byteOffset = view.byteOffset + byteOffset;
        }
        return scalarValue(buffer, view.byteOffset + byteOffset, type);
    } else {
        throw new InvalidArgument('buf_or_view must be ArrayBuffer or have a .buffer property');
    }
    // assert buffer instanceof ArrayBuffer
    // assert byteOffset > 0
    // assert byteOffset relative to entire buffer
    try {
        // try in-place first
        // only works if byteOffset % slicelength === 0
        return (new type(buffer, byteOffset, 1))[0]
    } catch (e) {
        // if this doesn't work, we need to copy the bytes (slice them out)
        bufslice = buffer.slice(byteOffset, byteOffset + sliceLength);
        return (new type(bufslice, 0, 1))[0]
    }
} 
```

你会像这样使用它：

```
// positive or negative byte offset
// relative to beginning or end *of a view*
100992003 === scalarValueAs(u8, -4, Uint32Array)
// positive or negative byte offset
// relative to the beginning or end *of a buffer*
100992003 === scalarValue(u8.buffer, -4, Uint32Array) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-19T17:11:20.527

你有一个例子吗？我认为这会做到：

```
var result = ((array[array.length - 1]) | 
              (array[array.length - 2] << 8) | 
              (array[array.length - 3] << 16) | 
              (array[array.length - 4] << 24)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-19T17:12:44.830

有点不雅，但如果你可以根据字节序手动完成。

小端：

```
var count = 0;
// assuming the array has at least four elements
for(var i = array.length - 1; i >= array.length - 4; i--)
{
    count = count << 8 + array[i];
} 
```

大端：

```
var count = 0;
// assuming the array has at least four elements
for(var i = array.length - 4; i <= array.length - 1 ; i++)
{
    count = count << 8 + array[i];
} 
```

这可以扩展到其他数据长度

编辑：感谢大卫指出我的错别字

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-01-23T21:26:38.160

如今，如果您可以使用[IE 11+ / Chrome 49+ / Firefox 50+](http://caniuse.com/#search=dataview)，那么您可以使用[DataView](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/DataView)让您的生活几乎像在 C# 中一样简单：

```
var u8array = new Uint8Array([0xFF, 0xFF, 0xFF, 0xFF]); // -1
var view = new DataView(u8array.buffer)
console.log("result:" + view.getInt32()); 
```

在这里测试它：[https ://jsfiddle.net/3udtek18/1/](https://jsfiddle.net/3udtek18/1/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T17:14:01.897

[在同一个 ArrayBuffer 上创建一个视图](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays/ArrayBufferView)并直接访问 32 位数字应该更有效：[`Uint32Array`](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays/Uint32Array)

```
var uint8array = new Uint8Array([1,2,3,4,5,6,7,8]);
var uint32array = new Uint32Array(
                    uint8array.buffer,
                    uint8array.byteOffset + uint8array.byteLength - 4,
                    1 // 4Bytes long
                  );
return uint32array[0]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-02T04:44:12.003

我很惊讶其他答案不使用本机 Buffer 对象，它在一个简单的本机库中提供了很多这种工具。这个库可能没有被广泛用于 bitpacking/unpacking，因为人们不认为在这里检查，我也花了一段时间才找到它，但它是 nodejs/javascript/ 中 bitpacking/unpacking 的正确工具打字稿。

你可以像这样使用它：

```
// Create a simple array with 5 elements. We'll pop the last 4 and you should expect the end value to be 1 because this is a little-endian array with all zeros other than the 1 in the littlest(?)-endian
const array = [0, 1, 0, 0, 0]

// get the last 4 elements of your array and convert it to a Buffer
const buffer = Buffer.from(array.slice(-4));

// Use the native Buffer type to read the object as an (U) unsigned (LE) little-endian 32 (32 bits) integer
const value = Buffer.readUInt32LE(); 
```

或者，更简洁地说：

```
const value = Buffer.from(array.slice(-4)).readUInt32LE(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-19T17:22:18.363

```
var a = Uint8Array(6)
a.set([1,2,8,0,0,1])

 i1 = a[a.length-4];
 i2 = a[a.length-3];
 i3 = a[a.length-2];
 i4 = a[a.length-1];

console.log(i1<<24 | i2<<16 | i3<<8 | i4); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-31T03:38:46.077

遗憾的是没有内置的方法来做到这一点。我需要读取可变大小的变量，因此根据 Imortenson 的回答，我编写了这个小函数，其中`p`读取位置和`s`要读取的字节数：

```
function readUInt(arr, p, s) {
    var r = 0;
    for (var i = s-1; i >= 0; i--) {
        r |= arr[p + i] << (i * 8);
    } return r >>> 0;
} 

var iable = readUint(arr, arr.length - 4, 4); 
```

# android - 计算参考真北的加速度

> ID：14963190
> 
> 赞同：4
> 
> 时间：2013-02-19T17:02:27.367
> 
> 标签：android, orientation, accelerometer, sensors

对于我的应用程序，我需要计算设备相对于真北的加速度。我的想法是计算设备的磁北方向并将偏角应用于它以获得真正的北方向。然后我想计算设备的加速度并将其参考方向，但我不知道该怎么做。

我会尝试使用`SensorManager.getRotationMatrix()`and获取设备方向`SensorManager.getOrientation()`。然后我得到偏角`GeomagneticField.getDeclination()`并将它应用到方向值的方位角上`SensorManager.getOrientation()`。

但是如何将加速度计值映射到这个方向？甚至可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T19:42:56.897

加速度计传感器返回设备的加速度。这是 3 维空间中的向量。该向量在设备坐标系中返回。你想要的是这个向量在世界坐标中的坐标，简单来说就是

```
R = rotation matrix obtained by calling getRotationMatrix
A_D = accelerator vector return by sensor ( A_D = event.values.clone )
A_W = R * A_D is the same acceleration vector in the world coordinate system.

A_W is an array of dimention 3 
A_W[0] is acceleration due east.
A_W[1] is acceleration due north. 
```

这是一些计算它的代码（假设`gravity`并`magnetic`包含来自各自传感器的输出）：

```
 float[] R = new float[9];
            float[] I = new float[9];
            SensorManager.getRotationMatrix(R, I, gravity, magnetic);
            float [] A_D = values.clone();
            float [] A_W = new float[3];
            A_W[0] = R[0] * A_D[0] + R[1] * A_D[1] + R[2] * A_D[2];
            A_W[1] = R[3] * A_D[0] + R[4] * A_D[1] + R[5] * A_D[2];
            A_W[2] = R[6] * A_D[0] + R[7] * A_D[1] + R[8] * A_D[2]; 
```

# math - 浮点算术四舍五入到最接近

> ID：14963196
> 
> 赞同：2
> 
> 时间：2013-02-19T17:02:43.877
> 
> 标签：math, floating-point

我对浮点运算中的四舍五入感到有些困惑。令 a、b 和 c 为归一化的双精度浮点数。a+b=b+a 是否正确，其中 + 正确舍入到最接近的浮点加法？我最初的猜测是肯定的，这总是正确的，但我不完全理解四舍五入到最近。有人可以举一个例子，当 a+b != b+a 使用浮点加法并四舍五入到最近？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:30:37.277

无论舍入模式如何，正确实现的 IEEE-754 浮点加法都是可交换的（a+b 等于 b+a）。

舍入模式会影响精确的数学结果如何舍入以适合目标格式。由于 a+b 和 b+a 的精确数学结果相同，因此它们的舍入相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T20:11:17.407

如上所述，加法是可交换的，但不是结合的。通过运行以下 (MS Visual Studio) C++ 代码可以看出舍入模式的差异：

```
#include <iostream>
#include <float.h>

#pragma fenv_access(on)

using namespace std;

int main(int argc, char* argv[])
{
    float a = 1.75f, b = 1e-6f;

    cout.setf(ios::fixed,ios::floatfield);
    cout.precision(7);

    cout << "a = " << a << ", b = " << b << endl;

    _controlfp_s(NULL, _RC_DOWN,_MCW_RC);

    cout << "Result of a + b rounded down: " << a+b << endl;
    cout << "Result of a - b rounded down: " << a-b << endl;

    _controlfp_s(NULL, _RC_UP,_MCW_RC);
    cout << "Result of a + b rounded up: " << a+b << endl;
    cout << "Result of a - b rounded up: " << a-b << endl;

    _controlfp_s(NULL, _RC_NEAR,_MCW_RC);
    cout << "Result of a + b rounded to nearest: " << a+b << endl;
    cout << "Result of a - b rounded to nearest: " << a-b << endl;

    return 0;
} 
```

输出：

```
a = 1.7500000, b = 0.0000010
Result of a + b rounded down: 1.7500010
Result of a - b rounded down: 1.7499989
Result of a + b rounded up: 1.7500011
Result of a - b rounded up: 1.7499990
Result of a + b rounded to nearest: 1.7500010
Result of a - b rounded to nearest: 1.7499990 
```

# google-chrome - 使用 Adob e 阅读器而不是 chrome pdf 查看器来显示 pdf

> ID：14963201
> 
> 赞同：2
> 
> 时间：2013-02-19T17:03:10.100
> 
> 标签：google-chrome, pdf, pdftk, adobe-reader

我正在输出一个用 scribus 制作的 pdf，并且在除 chrome 之外的所有浏览器中输出都很好，但是使用 chrome 时，字母会被截断并且比平时低。我发现禁用 chrome pdf 查看器可以在本地解决问题。但是没有禁用它的用户呢？有什么方法可以让 adobe reader 在我的代码中显示它而不是 chrome pdf 查看器？

任何帮助表示赞赏，

谢谢

**编辑：**我不能让用户下载 pdf，因为它在发送之前有点像预览。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:09:44.167

我最终使用 flatten 选项将 pdf 展平，它统一了所有浏览器的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:09:40.593

一种选择是使用 Content-Disposition 标题来强制 PDF 作为附件下载。当用户点击下载的文件时，它将在他们注册的 PDF 查看器中打开，而不是在 Chrome 中。

# jquery - 相同的点击事件两个不同的结果？

> ID：14963203
> 
> 赞同：0
> 
> 时间：2013-02-19T17:03:12.970
> 
> 标签：jquery

我有一个点击事件让我们举个例子：

```
$('p').click( function() {
    $('.xclass').css( { 'background' : 'green' } );
}); 
```

如果我单击 p 标签，上面的代码将更改 div 的背景颜色。

现在我的问题是再次单击我想将颜色更改为黄色的相同 p 标签！！。我怎样才能做到这一点？。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:07:13.827

```
var clicked_once = false;

$('p').click( function() {
    $('.xclass').css( { 'background' : 'green' } );
    if ( clicked_once ) $('.xclass').css('color', 'yellow');
    clicked_once = true;
}); 
```

在第一次单击后更改变量，以知道您之前单击过一次。我更喜欢使用 data() 而不是全局变量，但变量更好地证明了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:06:01.957

Like this?

```
$('p').click( function() {
    var color = $('.xclass').css('background-color');
    if(color=='green')
        $('.xclass').css( { 'background' : 'yellow' } );
    else
        $('.xclass').css( { 'background' : 'green' } );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:11:51.450

试试下面...

小提琴：http: [//jsfiddle.net/RYh7U/95/](http://jsfiddle.net/RYh7U/95/)

**HTML：**

```
<p>Click</p>
<div class="xclass">hiasg sdnhfg sdfg</div> 
```

**CSS：**

```
.green
{
    background:green;
}
.yellow
{
    background:yellow;

} 
```

**查询：**

```
 $('p').click( function() {

    if($('.xclass').hasClass("green"))
    {
      $('.xclass').removeClass("green");
      $('.xclass').addClass("yellow");
    }
    else
    {
        $('.xclass').removeClass("yellow");
        $('.xclass').addClass("green");    
    }
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T17:07:47.043

您可以通过使用类来做到这一点，这可能是一种更好的方法。

```
$('p').click(function(){
    if($(this).hasClass('green')){
        $(this).removeClass('green');
        $(this).addClass('yellow');
    } else {
        $(this).addClass('green');
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T17:13:58.067

这适用于 jsFiddle 检查...

```
$('p').click( function() {
    if($(".xclass").css("background-color") == "rgb(0, 128, 0)")
    {
        $('.xclass').css( { 'background-color' : 'yellow' } );
    }
    else
    {
        $('.xclass').css( { 'background-color' : 'green' } );
    }
}); 
```

# c# - 您将数据存储在 GUI 应用程序的什么位置？

> ID：14963204
> 
> 赞同：1
> 
> 时间：2013-02-19T17:03:16.000
> 
> 标签：c#, model-view-controller, design-patterns

我一直听说您应该分离 GUI/数据/逻辑组件，例如 MVC 模式。所以，我想知道：在 GUI 应用程序中，您实际上将数据存储在哪里？

这是一个示例（使用 C# 术语）：
假设您有一个 GUI，它接受用户输入、进行一些分析并在表格中显示结果。
用户可以在一个窗口中进行多个分析，因此底部有一个 ListView，允许用户选择当前显示的分析（显示所选项目）。

为了显示这一点，分析数据必须存储在某个地方。
我一直在做以下两件事之一：

1.  将所有数据放入单个对象中，并将其存储在 ListViewItem 的“Tag”属性中
2.  扩展“ListViewItem”并添加我需要的任何属性。

但是，这意味着我将数据存储在 ListViewItem 中。是否有更合适的位置来跟踪数据？

我可以将它作为私有成员添加到主表单中，但这似乎是一回事。我唯一能想到的另一件事是创建一些可以在需要时引用的全局类。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:00:29.073

据我了解，您有一些 ListViewItems。每个 ListViewItem 都与您的业务逻辑对象相关联，在选择 ListViewItem 之一后，您希望对此业务对象进行一些操作。在类似的情况下，我通常使数据对象像

```
struct MyDataObject
{
   string Id;//very often data object need to have Identifcator, but not always
   //some fields
} 
```

并添加到典型用户输入的数据对象构造函数中。

之后，我使业务逻辑层包含此数据对象的可用算法。对于简单的项目，这是一个静态类，如

```
static class MyDataObjectOperationService{
    void MakeSomething(MyDataObject myDataObject);
    object GetSomething(MyDataObject myDataObject);
    ...
} 
```

对于大型项目，通常是`interface`. 此外，我通常会制作一个数据层`interface`来获取此数据对象。例如

```
interface IMyDataObjectRepository{
  IList<MyDataObject> GetAll();  
  MyDataObject GetById(string id);
  //CRUD operations if it need
} 
```

之后，我放入数据对象的 ListViewItems id 并在 ListViewItemClick 上获取选择 id，然后使用数据层类通过 Id 获取 DataObject 并使用业务逻辑层类进行一些操作。如果我需要保存 DataObject 更改或创建新的 DataObject，我使用数据层类。

# firefox - Selenium IDE 不再与 Firefox 18 兼容？

> ID：14963206
> 
> 赞同：2
> 
> 时间：2013-02-19T17:03:17.647
> 
> 标签：firefox, selenium, selenium-ide

我在 Firefox 中使用 Selenium IDE 已经有一段时间了，但最近 Firefox 已经“升级”到 V18 - 现在我在菜单系统的任何地方都找不到 IDE。我尝试安装应该显示在工具栏上的 Selenium IDE 按钮，但它的缺失也很明显。

我知道我在这台机器上安装了 selenium，因为我现有的测试工作（导出到 C# 并使用 MSTest），但我不能再方便地使用 IDE 作为记录器创建新的测试，这是一个拖累。

最新的 Firefox 是否破坏了 Selenium IDE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:14:19.343

我在尝试使用 WebDriver 在 Java 中运行 Selenium 测试时遇到了同样的事情，所以我不得不将 Firefox 降级到旧版本。

根据他们的发行说明，我猜 IDE 目前只支持最高版本 17： [http ://code.google.com/p/selenium/wiki/SeIDEReleaseNotes](http://code.google.com/p/selenium/wiki/SeIDEReleaseNotes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T20:19:42.783

我有 Selenium IDE 在 FF 19 中工作！

1.  我没有看到 FF 19 中的 IDE 按钮来启动它，即使它确实已启用（也许它在那里但我没有注意到它）
2.  我下载并安装了 FF 17（到磁盘上的另一个目录），然后我碰巧在 FireFox--> Web Developer --> Selenium IDE 下看到它...
3.  我关闭了 FF 17 并打开了 FF 19 ，它也在那里，不确定它是否一直在那里。

    ```
    To launch it , just do  Ctrl + Alt + S  as this shortcut works in FF 19 too. 
    ```

更新：FF 19.0.2 也在运行。以防万一，我还抓住了：

```
"Download version under development unreleased" http://docs.seleniumhq.org/download/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T12:14:15.620

我注意到当工具栏设置为“图标和文本”或勾选“小图标”框时出现该图标，但选择“仅”并选择“仅”并且“小型图标”时，图标为空白。

这是 Windows 7 上的 firefox 24.0 和 selenium 2.4.0，但我怀疑它发生在大多数人身上。

这是 Selenium 支持数据库中的问题： [http ://code.google.com/p/selenium/issues/detail?id=5712](http://code.google.com/p/selenium/issues/detail?id=5712)

# charts - 如何将事件添加到由 d3.js 创建的饼图的各个部分（弧）？

> ID：14963208
> 
> 赞同：3
> 
> 时间：2013-02-19T17:03:18.913
> 
> 标签：charts, event-handling, d3.js, pie-chart

> 这是创建用于协议分发的饼图的基本代码。在我的 .csv 文件中，我有两列，即协议名称和百分比。我想在各个弧上添加事件。例如，当我只单击包含 TCP 统计信息的弧时，它应该会导致另一个页面。请帮助我该怎么做。我能够为整个饼图添加点击事件。

```
 <!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  font: 10px sans-serif;
}

.arc path {
  stroke: #fff;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var width = 960,
    height = 500,
    radius = Math.min(width, height) / 2;

var color = d3.scale.ordinal()
    .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

var arc = d3.svg.arc()
    .outerRadius(radius - 10)
    .innerRadius(0);

var pie = d3.layout.pie()
    .sort(null)
    .value(function(d) { return d.count; });

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

d3.csv("flow_count.csv", function(error, data) {

  data.forEach(function(d) {
    d.count = +d.count;
  });

  var g = svg.selectAll(".arc")
      .data(pie(data))
    .enter().append("g")
      .attr("class", "arc");

  g.append("path")
      .attr("d", arc)
      .style("fill", function(d) { return color(d.data.proto); });

  g.append("text")
      .attr("transform", function(d) { return "translate(" + arc.centroid(d) + ")"; })
      .attr("dy", ".35em")
      .style("text-anchor", "middle")
      .text(function(d) { return d.data.proto; });
       g.on( "click", function(d,i) {
        window.location.href='index.html';
})

});

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T20:56:47.663

在 "svg.selectAll(".bar") 中，您可以添加一个点击行：

```
svg.selectAll(".bar")
      .data(data)
    .enter().append("rect")
  .attr("class", "bar")
      .attr("x", function(d) { return x(d.letter); })
      .attr("width", x.rangeBand())
      .attr("y", function(d) { return y(d.frequency); })
      .attr("height", function(d) { return height - y(d.frequency); })
      .on("click", function(d) {
          // code you want executed on the click event 
      }); 
```

# php - 来自渲染组件的 404 错误

> ID：14963214
> 
> 赞同：0
> 
> 时间：2013-02-19T17:03:36.743
> 
> 标签：php, symfony, twig

当使用 {% render "Bundle:Controller:Action" %} 返回：

```
throw $this->createNotFoundException('Error - 404'); 
```

它成功地导致页面在开发模式下出错，但在生产模式下，页面呈现除了 {% render %} 部分，现在它只是空白。

我希望整个页面显示 404 页面，就像在父操作中引发异常一样。

有没有人有什么建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:20:24.560

> 它成功地导致页面在开发模式下出错，但在生产模式下，页面呈现除了 {% render %} 部分，现在它只是空白。

这似乎是合法的。你用

```
{% render "Bundle:Controller:Action" %} 
```

只呈现网页的一部分，例如菜单。如果特定的渲染操作抛出 404，它只会影响网站的这一部分，而不是整个页面。

* * *

此外，为什么整个页面明明渲染得很好，却被只影响页面一部分的 404 错误页面挡住了？这不是好的做法。如果错误非常重要，那么您应该在控制器级别的更高实例上触发它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T22:13:05.293

要恢复错误而不是静默失败，您只需在 with 对象之后添加 ignore_errors 选项。

例如

```
{% render 'Bundle:Controller:Action' with { }, { 'ignore_errors' : false } %} 
```

# php - 在函数上使用php指针？

> ID：14963217
> 
> 赞同：2
> 
> 时间：2013-02-19T17:03:39.447
> 
> 标签：php, function, pointers

我正在创建一个网站，并且在代码中的某处我需要查询用户属性（例如：帐户状态），并且在同一行中我有原因，案例是帐户状态为“暂停”。

我试图最小化对数据库的请求，所以我创建了一个函数来验证帐户状态。

```
function getAccountState($userid,$reason){} 
```

我想要做的是，如果帐户状态“暂停”，我会将 $reason 更改为“数据库原因”。

我已经这样做了，但是如果我在函数内部更改 $reason，在函数外部它不会改变。我在谷歌上搜索了“php 指针”，但我认为没有这样的东西。

有没有办法做到这一点？否则，我将发出另一个数据库请求...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:07:21.320

您当然可以通过引用传递变量，但由于您似乎不需要它，我只会从函数中返回它：

```
function getAccountState($userid){
  // your code
  return $reason;
} 
```

并称之为：

```
$reason = getAccountState($userid); 
```

如果你想保持你现在的代码，你可以[通过引用传递变量](http://php.net/manual/en/language.references.pass.php)：

```
function getAccountState($userid,&$reason){}
                                 ^ like so 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:10:00.437

在函数的定义中，您可以看出 $reason 参数是通过引用而不是值传递的。为此，请在变量前使用 &：

```
function getAccountState($userid,& $reason){} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:08:31.803

您可以考虑通过[引用](http://php.net/manual/en/language.references.php)传递它。或者可能只是更改函数以返回正确的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T17:13:03.137

您正在寻找 PHP 术语中的引用，而不是指针。

他们以这种方式工作：

```
function getAccountState($userid, &$reason){  // Notice the &
    $reason = "database locked";  // Use it as a regular variable
}

getAccountState(12345, $reason);  // Here, it is written as a regular variable, but it is a ref.
echo $reason;   // echoes "database locked" 
```

# javascript - 使用 jQuery 更新跨度，基于来自输入字段的简单实时计算

> ID：14963218
> 
> 赞同：0
> 
> 时间：2013-02-19T17:03:43.797
> 
> 标签：javascript, jquery, html, math, live

所以我对一些 jQuery 有一个小问题，我会提供一些帮助。我有两个值，一个来自输入字段，另一个来自静态元素。所以它应该相当简单，我希望它尽可能“实时”。为此，我制作了一个 JSFIDDLE。请检查一下。

[http://jsfiddle.net/pzSxL/2/](http://jsfiddle.net/pzSxL/2/)

```
$('#bet-amount').keyup(function() {
var amount = $("#bet-amount").val();
var odds = 2;

var total = amount * odds;

$("#potential-payout").val(total); 
}); 
```

非常感谢任何帮助，我希望您能看到我想要更新包含 0 作为默认值的跨度。

最好的问候，安德烈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:06:32.143

试试这个：http: [//jsfiddle.net/pzSxL/3/](http://jsfiddle.net/pzSxL/3/)

```
 var total = amount * odds;

 $("#potential-payout").text(total);
       //  ------------^^^^^-----------you had to change this. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:08:00.123

您犯了一个错误，`span.val();`您应该使用 html 或文本 jQuery 方法来更新跨度内的 html，另外，您应该从输入字段中解析值。所以这是你的功能。

```
$('#bet-amount').keyup(function() {
    var amount = parseFloat($("#bet-amount").val());
    var odds = 2;

    var total = amount * odds;

    $("#potential-payout").html(total); // sets the total price input to the quantity * price
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:09:12.183

您不能使用 val 函数来更改内部 html。Html 是正确的功能：

```
$("#potential-payout").html(total); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T17:12:49.830

```
$('#bet-amount').on('keyup', function() {
    var amount = parseFloat( this.value ),
        odds   = 2,
        total  = amount * odds;

    $("#potential-payout").text(total);
}); 
```

[**小提琴**](http://jsfiddle.net/pzSxL/8/)

value返回的结果总是一个字符串，所以要稍微解析一下，设置span的“value”时，其实不是value，而是文本内容，`text()`比较合适。

# c - 解引用指向指针的指针

> ID：14963225
> 
> 赞同：0
> 
> 时间：2013-02-19T17:03:56.870
> 
> 标签：c, pointers, dereference

给出以下代码

```
#include <stdlib.h>
#include <stdio.h>
typedef struct Foo {
  int **bar;
}Foo;

int main(){
  Foo *foo = malloc(sizeof(Foo));
  foo->bar = malloc(sizeof(int**));
  int *tmp = malloc(sizeof(int)*2);
  tmp[0]= 0;
  tmp[1]=1;
  *(foo->bar) = tmp;
  //printf("%d",*(foo->bar)[1]);  <=== This line                                                                                                                                                                                   
  int *tmp2 = *(foo->bar);
  printf("%d ",tmp2[1]);

  return 0;
} 
```

注释掉的行会导致分段错误。

有人可以解释一下实际发生的事情吗？

为什么该行和下一个打印语句不等效？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T17:09:43.877

`> Can some one please explain what is actually happening?`

这是一个[操作优先级](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence)问题：

```
printf("%d",(*(foo->bar))[1]); // <=== This is what you wanted 
```

`foo->bar`请注意额外的括号对之前的尊重进行分组`[1]`，您需要这样做，因为下标 ( ) 运算符比取消引用 ( ) 运算`[]`符具有更高的优先级`*`

`> Why is that line and the next print statement not equivalent?`

因为通过分解您处理操作顺序问题的语句，您使较低优先级的操作首先发生：

```
int *tmp2 = *(foo->bar); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:09:51.570

数组索引运算符`[]`的优先级高于参考`*`运算符。因此，该行的意思是“尊重数组`int *`的索引 1 ”。`foo->bar`但是，当然，您只有一个 1 数组`int *`（索引 0），因此会导致 seg 错误。

# mysql - 查询性能；不知道发生了什么

> ID：14963228
> 
> 赞同：5
> 
> 时间：2013-02-19T17:04:04.823
> 
> 标签：mysql, sql, performance, database-performance

我的查询有问题，需要 17 秒才能执行（350k 行）：

```
SELECT idgps_unit, MAX(dt) 
         FROM gps_unit_location
        GROUP BY 1 
```

解释

```
1   SIMPLE  gps_unit_location   index       fk_gps2 5       422633 
```

玩过之后，我得到了这个需要 1 秒的解决方案：

```
Select idgps_unit, MAX(dt) from (
SELECT idgps_unit,  dt
         FROM gps_unit_location
) d1
Group by 1 
```

解释：

```
1   PRIMARY <derived2>  ALL                 423344  Using temporary; Using filesort
2   DERIVED gps_unit_location   index       gps_unit_location_dt_gpsid  10      422617  Using index 
```

现在我很困惑——为什么查询 #2 很快，而查询 #1 似乎是同一个查询，并且似乎写得更有效。

Index1：DT，Index2：idgps_unit，Index3：idgps_unit+DT

执行时间一致；查询 #1 总是需要 17-19 秒；而#1 <1 秒。

我正在使用 Godaddy VPS Windows Server 2008 Economy

表格示例：

```
id | idgps_unit | dt | location
1 | 1 | 2012-01-01 | 1
2 | 1 | 2012-01-02 | 2
3 | 2 | 2012-01-03 | 3
4 | 2 | 2012-01-04 | 4
5 | 3 | 2012-01-05 | 5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:11:57.987

我会说您的索引设置不正确，您的第二个查询是一种内部查询，如果有意义的话，它会有效地创建自己的内部索引组！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:18:07.530

首先，我假设`gps_unit_location`它真的是一张桌子而不是一个视图。其次，我还假设您已经多次运行这两个查询，所以缓存不是解释。（缓存将是您运行第一个查询，它将表加载到页面缓存中，第二个从内存而不是磁盘读取。）

你有索引`gps_unit_location(idgps_unit)`吗？记录范围很广吗？如果这些问题的答案是“是”，那么可能会发生以下情况。

如果是这样，您可能对索引有一个奇怪的问题。你会认为索引会加速这样的查询。`idgps_id`但是，它的作用是按顺序查找值。如果索引不包含日期，则数据库需要从每个页面中获取数据。如果表不适合内存，那么这通常会导致缓存未命中——即加载页面的时间。

相比之下，如果表很宽并且引擎进行全表扫描，那么它可以压缩表并提取两个感兴趣的字段。它把它们放在一边。如果它们相对于整个表来说很小，那么对它们进行排序可能需要很少的时间。瞧，查询完成得更快。

我的猜测是第二个结构删除了索引的使用。

顺便说一句，您可以通过将索引更改为`gps_unit_location(idgps_unit, dt)`. 通过在索引中包含该字段，查询不必加载数据。

# php - 页面未在带有 APC 的 PHP 5.4.4 上加载 - Apache 2.4.2

> ID：14963231
> 
> 赞同：0
> 
> 时间：2013-02-19T17:04:07.137
> 
> 标签：php, apache, apc

我希望有人可以帮助我解决这个问题，因为我有点碰壁了。情况如下：

我目前正在使用 MediaWiki 建立一个知识库。我正在使用 XAMPP 来聚合我的工具。该网站本身运行良好，并且进展顺利。

我现在正在尝试设置缓存以加快速度。我选择使用 PHP APC，因为它被推荐用于 MediaWiki。麻烦从这里开始。

当前版本是：

PHP：5.4.4 Apache：2.4.2 (apache2handler) SQL：5.5.25a XAMPP：1.8.0 MediaWiki 1.19.1

我目前使用的是 Windows，所以我遇到的第一个问题是为我的 PHP 找到正确的 php_apc.dll 文件。我尝试了许多版本均未成功（日志错误表明找不到 .dll）。我最终能够获得一个似乎可以工作的版本，APC 3.1.14 for PHP 5.4，从[http://dev.freshsite.pl/php-accelerators/apc.html](http://dev.freshsite.pl/php-accelerators/apc.html)下载。它是 TS 版本，因为在我的 PHP 上启用了此选项。

现在，有了这个大概正确的 APC 版本，Apache 现在可以正常启动了。phpinfo() 还显示可用的 APC 扩展。现在的问题是 wiki 上的任何页面都不会加载。具体情况是：

*   未加载 Wiki 上的所有页面 (IP/mediawiki/*)
*   XMAPP 本身的页面似乎确实加载了正确的 (IP/XAMPP/*)。
*   其他实用程序也无法加载（例如 phpMyAdmin）。

在 apache 日志或 php 日志中似乎没有创建任何错误消息。现在，我绝不是这方面的专家。

我已经确认 Windows TMP 和 TEMP 中的环境变量都指向同一个文件夹 (C:\WINNT\TEMP)，我在该文件夹上授予“每个人”完全访问权限。

这是一张图片，显示了我可以看到的 APC 的 phpinfo()：

[http://i.stack.imgur.com/hYHwP.png](http://i.stack.imgur.com/hYHwP.png)

有任何想法吗？

编辑：我忘了提及：实际上有 0kb 大小的文件似乎与在 c:\winnt\temp 下创建的 APC 相关。例如，其中之一称为“.apc.a02684”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:19:16.700

[这在MediaWiki 支持](https://www.mediawiki.org/wiki/Thread%3aProject%3aSupport_desk/Fatal_Error_when_accessing_SpecialPages)台上已经出现过。MediaWiki 显然不能在 Apache 2.4 下运行。

# android - 如果不使用 FQPN 而是使用类的 import 语句，则使用 Maven 处理 AndroidAnnotations 失败

> ID：14963233
> 
> 赞同：0
> 
> 时间：2013-02-19T17:04:19.320
> 
> 标签：android, maven, android-annotations

如果不使用 FQPN 而是使用类的导入语句，则使用 Maven (3.0.3) 处理 AndroidAnnotations 失败：

这失败了：

**请注意在代码中使用导入与 FQPN 的区别，以引用 App 类，在我的例子中是“delta”。**

```
import com.my_project.delta.android.Delta_;

/**
 * Splash screen with logo.
 */
@EActivity(R.layout.act_splash)
public class Splash extends BaseActivity {

    /**
     * Reference to application.
     */
    @App
    protected Delta_ delta; 
```

虽然这很好用：

```
/**
 * Splash screen with logo.
 */
@EActivity(R.layout.act_splash)
public class Splash extends BaseActivity {

    /**
     * Reference to application.
     */
    @App
    protected com.my_project.delta.android.Delta_ delta; 
```

错误如下：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.0:compile (default-compile) on project com.my_project.delta.android: Compilation failure
[ERROR] /Users/user/Projects/My-Project/delta-android/target/generated-sources/annotations/com/my_project/delta/android/activity/Splash_.java:[29,19] cannot find symbol
[ERROR] symbol:   class Delta_
[ERROR] location: class com.my_project.delta.android.activity.Splash_
[ERROR] -> [Help 1] 
```

pom.xml： http: [//pastebin.com/HhxCVYmN](http://pastebin.com/HhxCVYmN)

AndroidAnnotations 中的错误可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:01:29.877

我可以看到您使用的是 3.0-SNAPSHOT 版本。你能告诉我你用哪个提交来编译这个库吗？这可能是最后一个实现的功能的问题。

编辑：刚刚看到您使用生成的类。你可以试试这个：

```
@App
Delta delta; 
```

# android - RFID Reader for Mobile Devices

> ID：14963236
> 
> 赞同：11
> 
> 时间：2013-02-19T17:04:26.523
> 
> 标签：android, iphone, mobile, bluetooth, rfid

I've been asked to develop an app with the core functionality of reading RFID chips in pets and checking those identification numbers against a database through some web service.

I was first directed towards [iCarte](http://www.icarte.ca/), supposed maker of an NFC/RFID Reader accessory for iPhone. I sent them an email that was immediately returned due to them exceeding their mailbox quota, so I suppose they are out of business?

Other solutions come in the form of Bluetooth ready readers, like those from [Serialio](https://serialio.com/). Demos show data being read into iOS's Notes app or some grid app. I haven't developed iPhone apps in a while... is the [Bluetooth API](http://dedegroup.tumblr.com/post/14177518904/bluetooth) available? How about for Android? Could I read from the Bluetooth reader straight into an app?

What other options are there?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T07:43:24.570

在开始任何工作之前，请先熟悉以下内容：

[http://en.wikipedia.org/wiki/ISO_11784_%26_11785](http://en.wikipedia.org/wiki/ISO_11784_%26_11785)

这个：[http ://en.wikipedia.org/wiki/ISO_14223](http://en.wikipedia.org/wiki/ISO_14223)

用于动物的 RFID 协议与 NFC 完全不同。它更像是 UNIQUE 标签 (125kHz) 。无论如何，高于 ISO 标准对您来说都是一个很好的起点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T17:08:37.257

Android 原生支持 NFC，您不需要任何蓝牙适配器或其他任何东西：

[http://developer.android.com/guide/topics/connectivity/nfc/index.html](http://developer.android.com/guide/topics/connectivity/nfc/index.html)

并非所有设备都有它，但主要设备确实有（例如galaxy nexus、nexus 4、galaxy S3、HTC One），而且效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-12T10:06:16.493

无源 RFID 标签主要在三个频率范围内工作：

*   低频 (LF) 125 -134 kHz

*   高频 (HF)13.56 MHz

*   超高频 (UHF) 856 MHz 至 960 MHz

今天的智能手机通常支持 HF RFID

# javascript - JQuery Mobile 全站重定向

> ID：14963242
> 
> 赞同：1
> 
> 时间：2013-02-19T17:04:38.260
> 
> 标签：javascript, jquery-mobile, redirect, mobile

我正在尝试为移动网站做一些非常简单的事情：添加一个完整的网站重定向按钮。我的移动站点存储在 m 目录中，即 root /m，而我的重定向链接转到目录 root/index.php。

实际的按钮是：

```
<a data-role="button" data-theme="a" href="http://www.mysite.com?m=desktop" data-icon="home" data-iconpos="left">
                Full Site
</a> 
```

但是，问题是当按下该链接时，JQuery Mobile 会重新格式化 index.php 页面上的所有内容并添加类似

```
<html class="ui-mobile">. 
```

由于某种原因，我似乎找不到其他人对此有任何问题。任何人都知道如何为某些链接禁用此功能并为其他链接启用它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:34:23.830

将 rel="external" 属性添加到您的按钮中，如下所示：

```
<a data-role="button" data-theme="a" href="http://www.mysite.com?m=desktop" data-icon="home" data-iconpos="left" rel="external">
            Full Site
</a> 
```

这将强制打开新的 url，而不将其加载到当前的 DOM 结构中。

# vb.net - 单击特定子例程时，Visual Basic 2010 崩溃

> ID：14963246
> 
> 赞同：0
> 
> 时间：2013-02-19T17:04:54.217
> 
> 标签：vb.net, vb.net-2010

单击 Visual Basic 2010 中的特定子例程时，应用程序崩溃，仅显示错误消息“Microsoft Visual Basic 2010 [Express] 遇到问题，需要关闭。”

日志中没有任何内容，安全模式也无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:04:54.217

当我遇到这个问题时，我发现这是由于连续超过 400 行。

例如：

```
Dim someString As String
someString = "some text and then a line continuation " & _
             "and then some more text for 400 lines " & _
             ... & _
             "and then finish the string" 
```

为了解决这个问题，我只需要通过在一行上组合多个“行”来使我的代码更草率。

希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:39:07.430

听起来您正在单击解决方案空间中的模块或 .vb 文件。尝试右键单击，然后尽可能“编辑代码”。如果有一个 Interop 对象，也许是一个没有注册 ion Windows 的控件 (.OCX)，那么 VS 将会崩溃——保证！

# javascript - 多个动态添加的 HTML 视频不静音

> ID：14963251
> 
> 赞同：0
> 
> 时间：2013-02-19T17:05:01.457
> 
> 标签：javascript, jquery, html

我通过 jquery append（HTML 字符串）将一堆 html 视频添加到 dom

我希望它们被静音插入。

问题是，现在它们没有被静音，即使我用静音道具注入它们。

当我删除视频标签上的静音属性时，尝试类似的操作会使`$('video').prop("muted",true);`它们静音，但只有在它们全部加载之后。

我是否尝试以另一种方式添加视频，或者为 html 视频找到一个 onLoad 方法并在它们准备好时触发静音功能。

jsfiddle 追加后的样子：http: [//jsfiddle.net/mvsMG/](http://jsfiddle.net/mvsMG/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:55:13.930

尝试`onloadeddata`HTML5 事件处理程序：

```
$(document).ready(function(e) { //do NOT use $(window).load; it will not mute all videos
   // mute all the videos when data is loaded for each
   $('video').on('loadeddata', function(e) {
       //console.log('onloadeddata', e.target);
       $(this).prop('muted', true);
    }); 
}); 
```

这是**[演示小提琴](http://jsfiddle.net/onury/KX2g4/)**。

*注意：我不知道您正在使用哪个浏览器进行测试，但您应该查看HTML5 (和) 属性的[**浏览器支持列表。**](http://www.longtailvideo.com/html5/autoloop/)`muted``loop``autoplay`*

# php - Codeigniter 验证错误

> ID：14963253
> 
> 赞同：2
> 
> 时间：2013-02-19T17:05:11.070
> 
> 标签：php, codeigniter, validation

我有一个在 codeigniter 中开发的网站。我想验证表单并显示一些消息。使用我的代码，如果我的输入“name_it”为空，我看不到任何错误。为什么？这是我的控制器：

```
public function nation_create()
    {
        if($_POST)
        {
            //salvo i dati
            $this->load->library('form_validation');
            $this->form_validation->set_error_delimiters('<p class="error">Errore: ', '</p>');
            $this->form_validation->set_rules('name_it', 'name_it', 'required');
            if ($this->form_validation->run() !== FALSE){
                $this->Nation_model->createNation();
                redirect('backend/nation/nation_list/');
            }
            else{
                $data['errors'] = validation_errors();
                $this->load->view('backend/include/header_view_logged');
                $this->load->view('backend/nation_create_view',$data);  
                $this->load->view('backend/include/footer_view');
            }
        }
        else{
            $this->load->view('backend/include/header_view_logged');
            $this->load->view('backend/nation_create_view');    
            $this->load->view('backend/include/footer_view');
        }
    } 
```

这是我的观点（我已经删减了更多代码以便阅读）

```
<form action='' method='POST'>
   <?php echo validation_errors(); 
   if (isset($errors))
      echo $errors;
   ?>
   <?php echo form_error('name_it'); ?>
   <input type="text" name="name_it" />
   <span id="errorsDiv_name_it"></span>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:50:27.253

试试这个：

改变：

```
if ($_POST) 
```

为了：

```
if ($this-input->post()) 
```

信息：[http ://ellislab.com/codeigniter/user-guide/libraries/input.html](http://ellislab.com/codeigniter/user-guide/libraries/input.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T00:21:36.973

您可以使用`form_validation()->run()`来完成此类任务。它检查是否已发送 POST 以及是否`validation_rules`返回 true。

```
if($this->form_validation()->run() == false)
{
  //load the view
  // other stuff you do while POST is not yet sent or if Input from the user returns false

}else{
  // post has been sent and validiation is TRUE
  // Input is good. . do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T09:39:13.757

问题出在`error`具有属性的类中`display:none`

# windows - windows性能记录器记录具体过程

> ID：14963257
> 
> 赞同：3
> 
> 时间：2013-02-19T17:05:40.977
> 
> 标签：windows, performance, profiling, trace, xperf

使用 Windows 性能记录器，是否可以根据单个进程的跟踪生成 ETL 文件？为系统中的所有进程生成的 ETL 文件会生成以 GB 为单位的 ETL 文件，时间间隔短至几分钟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-03-27T18:20:26.103

我认为不可能记录仅记录一个进程的 ETW 跟踪（至少不能使用 xperf 或 wpr）。如果你的痕迹太大，那么最好的策略是确保系统的其余部分尽可能安静，这样它就不会贡献太多数据。

如果系统的其余部分已经安静，那么迹线可能很大，因为 ETW 迹线往往很大。您可以使用跟踪压缩使它们在磁盘上更小 - 请参阅 UIforETW 了解其工作原理 - [https://randomascii.wordpress.com/2015/09/24/etw-central/](https://randomascii.wordpress.com/2015/09/24/etw-central/)。

如果系统的其余部分还没有安静下来，那么是的，它可能会导致痕迹膨胀。请注意，它也可能会影响性能，因此数据并非无关紧要。

而且，如果您确实需要单进程分析，请考虑使用不同的分析器。Visual Studio 探查器执行每个进程的分析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:55:41.910

ETW（内核事件）跟踪是系统范围的并捕获所有进程。

# c# - One graph take over space when the other is Visibility.Collapsed

> ID：14963263
> 
> 赞同：0
> 
> 时间：2013-02-19T17:05:48.823
> 
> 标签：c#, wpf, xaml, user-interface

This is C# WPF and xaml. I have main window, and I have two graphs that share this window. They are vertically arranged. They both have same width as the main window. However, I want the first graph to fill the entire window (except for some margin on the top of the window) when the second one is collapsed, and I want them to share the height (each with Height = (Height of Window)/2 ) when both are visible.

Here is what I tried in xaml, not successful though:

```
<Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <d3:ChartPlotter  Grid.Row="0" Name ="timeDomainPlotter" >
                </d3:ChartPlotter>
                <d3:ChartPlotter  Grid.Row="1" Name ="freqDomainPlotter" >
                </d3:ChartPlotter>
            </Grid> 
```

The first window does not take over the second window's space when the second one is Visibility.Collapsed. How should I do this? Thanks.

Update: Converter code in pop up window where there are two graphs:

```
 public class VisibilityToHeightConverter : IValueConverter
        {
            public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
            {
                GridLength height = new GridLength();

                var visiblity = (Visibility)value;
                switch (visiblity)
                {
                    case Visibility.Collapsed:
                        height = new GridLength(0, GridUnitType.Auto);
                        break;
                    case Visibility.Visible:
                        height = new GridLength(1, GridUnitType.Star);
                        break;
                    case Visibility.Hidden:
                        height = new GridLength(0, GridUnitType.Auto);
                        break;
                }

                return height;
            }

            public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
            {
                throw new NotImplementedException();
            }
        }
        /// <summary>
        /// Interaction logic for SignalStatsDisplay.xaml
        /// </summary>
        public partial class SignalStatsDisplay : Window
        { 
```

xaml for pop up window:

```
<Window x:Class="FileWatcherCaller.View.SignalStatsDisplay"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d3="http://research.microsoft.com/DynamicDataDisplay/1.0"
   xmlns:local="clr-namespace:FileWatcherCaller.View"
    Title="Real Time Signal Display" Height="409" Width="1200">
    <Window.Resources>
        <local:VisibilityToHeightConverter x:Key="VisToHeightConv"/>
    </Window.Resources>
    <Grid> 
        <StackPanel Orientation="Vertical">
            <StackPanel Orientation="Horizontal">
                <CheckBox Height="16" HorizontalAlignment="Left" Name="pixVal" VerticalAlignment="Top" Width="120" Checked="checkBox1_Checked">Pixel Value</CheckBox>
                <CheckBox Height="16" HorizontalAlignment="Left" Name="roiMean" VerticalAlignment="Top" Width="120">ROI Mean</CheckBox>
                <CheckBox Height="16" HorizontalAlignment="Left" Name="roiStd" VerticalAlignment="Top" Width="120" Checked="roiStd_Checked">ROI Std</CheckBox>
            </StackPanel>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="{Binding ElementName=timeDomainPlotter, Path=Visibility, Converter={StaticResource VisToHeightConv}}" Name="RowOne" />
                    <RowDefinition Height="{Binding ElementName=freqDomainPlotter, Path=Visibility, Converter={StaticResource VisToHeightConv}}" Name="RowTwo" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <d3:ChartPlotter  Grid.Row="0" Name ="timeDomainPlotter" >
                </d3:ChartPlotter>
                <d3:ChartPlotter  Grid.Row="1" Name ="freqDomainPlotter" >
                </d3:ChartPlotter>
            </Grid>
        </StackPanel>
    </Grid>
</Window> 
```

In main window, how the Visibility of two graphs are initialized:

```
public void StartWatch()
        {
            if (_fileWatcher != null)
            {
                _fileWatcher.Dispose();
                _fileWatcher = null;
            }
            if (InitWatcher())
            {
                this._fileWatcher.Start();
                this.ButtonStart.IsEnabled = false;
                this.ButtonStop.IsEnabled = true;
            }

             _signalDisplay = new SignalStatsDisplay();

            if (_signalDisplay.Visibility != Visibility.Visible)
            {
                _signalDisplay.Show();
                _signalDisplay.timeDomainPlotter.Visibility = Visibility.Visible;
                _signalDisplay.freqDomainPlotter.Visibility = Visibility.Collapsed;
            }

        } 
```

For Kevin's sulution, I have the xaml for the pop up window:

```
<Window x:Class="FileWatcherCaller.View.SignalStatsDisplay"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d3="http://research.microsoft.com/DynamicDataDisplay/1.0"
    Title="Real Time Signal Display" Height="409" Width="1200">

    <Grid> 
        <StackPanel Orientation="Vertical">
            <StackPanel Orientation="Horizontal">
                <CheckBox Height="16" HorizontalAlignment="Left" Name="pixVal" VerticalAlignment="Top" Width="120" Checked="checkBox1_Checked">Pixel Value</CheckBox>
                <CheckBox Height="16" HorizontalAlignment="Left" Name="roiMean" VerticalAlignment="Top" Width="120">ROI Mean</CheckBox>
                <CheckBox Height="16" HorizontalAlignment="Left" Name="roiStd" VerticalAlignment="Top" Width="120" Checked="roiStd_Checked">ROI Std</CheckBox>
            </StackPanel>            
            <UniformGrid Columns="1">
                <d3:ChartPlotter Name ="timeDomainPlotter" >
                </d3:ChartPlotter>
                <d3:ChartPlotter Name ="freqDomainPlotter" >
                </d3:ChartPlotter>
            </UniformGrid>          
        </StackPanel>
    </Grid>
</Window> 
```

But still, it is not maximize the top D3 graph as expected. It is still takes only half of the window. Anything I should do in the behind code?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:19:58.837

`UniformGrid`以您正在寻找的方式工作（只要您不希望用户调整两个部分的大小）

```
<UniformGrid Columns="1">
<TextBox Visibility="Collapsed">Hello</TextBox>
<TextBox Visibility="Visible">Goodbye</TextBox>
</UniformGrid> 
```

对于更灵活的东西，我认为您将不得不编写一些代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T21:21:44.350

```
<Window x:Class="FileWatcherCaller.View.SignalStatsDisplay"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d3="http://research.microsoft.com/DynamicDataDisplay/1.0"
    Title="Real Time Signal Display" Height="409" Width="1200">

    <Grid> 
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <StackPanel Orientation="Horizontal" Grid.Row="0">
            <CheckBox Height="16" HorizontalAlignment="Left" Name="pixVal" VerticalAlignment="Top" Width="120" Checked="checkBox1_Checked">Pixel Value</CheckBox>
            <CheckBox Height="16" HorizontalAlignment="Left" Name="roiMean" VerticalAlignment="Top" Width="120">ROI Mean</CheckBox>
            <CheckBox Height="16" HorizontalAlignment="Left" Name="roiStd" VerticalAlignment="Top" Width="120" Checked="roiStd_Checked">ROI Std</CheckBox>
        </StackPanel>            
        <UniformGrid Columns="1" Grid.Row="1">
            <d3:ChartPlotter Name ="timeDomainPlotter" >
            </d3:ChartPlotter>
            <d3:ChartPlotter Name ="freqDomainPlotter" >
            </d3:ChartPlotter>
        </UniformGrid>  
    </Grid>
</Window> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T17:31:43.207

这是一个具有您想要的行为的示例应用程序：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <local:VisibilityToHeightConverter x:Key="VisToHeightConv"/>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="{Binding ElementName=rctTop, Path=Visibility, Converter={StaticResource VisToHeightConv}}" Name="RowOne" />
            <RowDefinition Height="{Binding ElementName=rctBottom, Path=Visibility, Converter={StaticResource VisToHeightConv}}" Name="RowTwo" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <Rectangle Fill="Black" Name="rctTop" Grid.Row="0"/>
        <Rectangle Fill="Red" Name="rctBottom" Grid.Row="1"/>
    </Grid>
</Window> 
```

代码背后：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }
}
public class VisibilityToHeightConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        GridLength height = new GridLength();

        var visiblity = (Visibility)value;
        switch(visiblity)
        {
            case Visibility.Collapsed:
                height = new GridLength(0, GridUnitType.Auto);
                break;
            case Visibility.Visible:
                height = new GridLength(1, GridUnitType.Star);
                break;
            case Visibility.Hidden:
                height = new GridLength(0, GridUnitType.Auto);
                break;
        }

        return height;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

如果此代码的任何部分不熟悉（值转换器、绑定），请告诉我们，我们将提供解释。

# powershell - How do I access a "Group" member after I run PS "Group-Object"

> ID：14963267
> 
> 赞同：1
> 
> 时间：2013-02-19T17:05:53.160
> 
> 标签：powershell, powershell-2.0, exchange-server-2010

I have the sourcedata similar to the following denormalized table

```
DisplayName                  LogRecordCount LogRecordBytes
-----------                  -------------- --------------
Mailbox - Low,                    459          43756
Mailbox - Low,                    1628         185542
Mailbox - Low,                    2575         264474
Mailbox - Low,                     522          48813
Mailbox - Low,                     410         138212
Mailbox - Low,                    1057         200043
Mailbox - Freed                  3866        2170719
Mailbox - Freed                   606         370304
Mailbox - Freed                  4137        1939924
Mailbox - Freed                 3655        1654650 
```

My goal is to write a summary similar to the following

```
DisplayName                  LogRecordCount  
-----------                  -------------- 
Mailbox - Low,                     6651            
Mailbox - Freed                   12264 
```

The following code is very close to getting what I need, but the "DisplayName" isn't appearing. The value of DisplayName is buried in the result of the [`Group-Object`](http://msdn.microsoft.com/en-us/subscriptions/downloads/dd347561.aspx) command.

```
$stats | ? {$_.DigestCategory -eq 'LogBytes'} | group MailboxGuid | %{
    New-Object psobject -Property @{
        MailboxGuid = $_.Name
        LogRecordBytes = ($_.Group | Measure-Object LogRecordBytes -Sum).Sum
        DisplayName   = $_.Group.DisplayName
    }
}| sort-object LogRecordBytes |  ft -a DisplayName, MailboxGuid, LogRecordBytes 
```

**Question**

What is the proper syntax for `DisplayName = $_.Group.DisplayName` to display the display name in the results?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:35:50.350

用以下内容交换您的`DisplayName = ..`线路：

```
DisplayName = $_.Group | Select-Object -ExpandProperty DisplayName -Unique 
```

如果由于某种神奇的原因，组中有不同`DisplayName`的值，你会得到一个类似的数组，`{value1, value2},`但通常它只会返回一个名称:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:59:07.313

Graimer 的答案非常好，但您也可以`DisplayName`从组的第一个元素中提取，假设所有组元素具有相同的值`DisplayName`

```
DisplayName = $_.Group[0].DisplayName 
```

只是想让你知道另一种选择。

# c# - Creating a List c# console application

> ID：14963268
> 
> 赞同：2
> 
> 时间：2013-02-19T17:05:55.217
> 
> 标签：c#

I want to create a List that holds a couple of books with the book title, authors name and year of publication. example: ( AuthorLastName, AuthorFirstName, “The book title”, year.)

I know how to create `List<int>`, for example:

```
class Program
{
    static void Main()
    {
    List<int> list = new List<int>();
    list.Add(10);
    list.Add(20);
    list.Add(25);
    list.Add(99);
    }
} 
```

But the problem is, if I want to create a list of books, I can't simply make a `list<string>` or `list<int>` because I want it to contain strings and int's (as the example above).

So, Can anyone explain how I can make a List of books?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T17:07:55.890

您需要创建一个包含您想要拥有的属性的`class`调用。`Book`然后你可以实例化一个`List<Book>`.

例子：

```
public class Book
{
   public string AuthorFirstName { get; set; }
   public string AuthorLastName { get; set; }
   public string Title { get; set; }
   public int Year { get; set; }
} 
```

然后，使用它：

```
var myBookList = new List<Book>();
myBookList.Add(new Book { 
                         AuthorFirstName = "Some", 
                         AuthorLastName = "Guy", 
                         Title = "Read My Book", 
                         Year = 2013 
                        }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T17:09:16.083

你需要定义你的类：

```
 public class Book 
    {
       public string Author { get; set; }
       public string Title { get; set; }
       public int Year { get; set; }
    } 
```

然后你可以列出它们：

```
var listOfBooks = new List<Book>(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T17:11:27.113

做这样的事情

```
 public class Book
            {
                public string AuthorLastName { get; set; }
                public string AuthorFirstName{ get; set; }
                public string Title{ get; set; }
                public int Year { get; set; }
            }

            List<Book> lstBooks = new List<Book>();
            lstBooks.Add(new Book()
            {
                AuthorLastName = "What",
                AuthorFirstName = "Ever",
                Title = Whatever
                Year = 2012;
            }); 
```

# c++ - GPU for loops：避免扭曲发散和隐式同步线程

> ID：14963276
> 
> 赞同：2
> 
> 时间：2013-02-19T17:06:14.310
> 
> 标签：c++, c, cuda, gpu, gpgpu

我的情况：warp 中的每个线程都在其自己完全独立且不同的数据数组上运行。所有线程循环遍历它们的数据数组。每个线程的循环迭代次数不同。（这会产生成本，我知道）。

在for循环中，每个线程需要计算三个浮点数后保存最大值。*在for循环之后，warp中的线程将通过检查仅由它们在warp*中的“相邻线程”计算的最大值（由奇偶校验确定）来“通信”。

**问题：**

1.  如果我通过乘法避免“最大”操作中的条件，这将避免扭曲发散，对吗？（见下面的示例代码）
2.  (1.) 中提到的额外乘法运算是值得的，对吧？- 即比任何形式的经线发散都要快得多。
3.  导致 warp 发散的相同机制（所有线程的一组指令）可以在 for 循环结束时作为隐式“线程屏障”（对于*warp* ）被利用（与“#pragma omp for" 非 GPU 计算中的语句）。因此，在一个线程检查另一个线程保存的值之前，我不需要在 for 循环之后对*扭曲进行“syncthreads”调用，对吗？*（这是因为“synthreads”仅适用于“整个 GPU”，即 inter-warp 和 inter-MP，对吧？）

示例代码：

```
__shared__ int N_per_data;  // loaded from host
__shared__ float ** data;  //loaded from host
data = new float*[num_threads_in_warp];
for (int j = 0; j < num_threads_in_warp; ++j)
     data[j] = new float[N_per_data[j]];

// the values of jagged matrix "data" are loaded from host.

__shared__  float **max_data = new float*[num_threads_in_warp];
for (int j = 0; j < num_threads_in_warp; ++j)
     max_data[j] = new float[N_per_data[j]];

for (uint j = 0; j <  N_per_data[threadIdx.x]; ++j)
{
   const float a = f(data[threadIdx.x][j]);
   const float b = g(data[threadIdx.x][j]);
   const float c = h(data[threadIdx.x][j]);

  const int cond_a = (a > b)  &&  (a > c);
  const int cond_b = (b > a)  && (b > c);
  const int cond_c = (c > a)  && (c > b);

  // avoid if-statements.  question (1) and (2)
  max_data[threadIdx.x][j] =   conda_a * a  +  cond_b * b  +  cond_c * c; 
}

 // Question (3):
// No "syncthreads"  necessary in next line:

// access data of your mate at some magic positions (assume it exists):
float my_neighbors_max_at_7 = max_data[threadIdx.x + pow(-1,(threadIdx.x % 2) == 1) ][7]; 
```

在 GPU 上实施我的算法之前，我正在研究算法的各个方面，以确保它值得实施。所以请多多包涵。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:24:06.347

1.  是的
2.  我的猜测是否定的 - 取决于您将如何使用 ifs 编写其他版本。
    编译器可能会使用谓词来屏蔽不需要的写入，在这种情况下不会有真正的线程分歧，只是执行了一些但屏蔽了写入指令。
    您应该让编译器发挥作用，并比较两个版本的反编译代码以确定更好的解决方案。
    在您计算最大有符号整数 d = a > b 的特定情况下？a : b 转换为一条 PTX ISA 指令 max.s32 所以真的没有必要让它像你做的那样复杂......只需将最大值计算为一个临时变量并进行一次无条件写入。
3.  是的，但是 synthreads 屏障是块内屏障，而不是块间屏障，当然也不是块间屏障。

# html - Is it OK to have two lines containing I know I am talking unconventional but is it ok to have two lines in an html containing 

> ID：14963277
> 
> 赞同：-1
> 
> 时间：
> 
> 标签：html, keyword, meta

I know I am talking unconventional but is it ok to have two lines in an html containing `<meta name="keyword"` lines? If yes then, are there any side effects of doing that? If no then why?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:18:01.340

如果这样做，您将覆盖第一组关键字。如果您在[http://validator.w3.org/](http://validator.w3.org/)上验证它，这不是错误。

有关更多信息，请参见[http://www.w3.org/TR/html-markup/meta.name.html](http://www.w3.org/TR/html-markup/meta.name.html)。

# ms-access - 简单的访问查询

> ID：14963278
> 
> 赞同：0
> 
> 时间：2013-02-19T17:06:17.537
> 
> 标签：ms-access, vba

我正在尝试在 Access 中创建查询。

例如，假设我有四个字段：数字 1-26、字母 AZ、26 个名称和 26 个城市，因此一条记录可能是：2, B, Jane, New York

我想创建并保存一个新查询：数字字段、字母字段和名称字段。我希望在“A”或“B”上过滤字母字段，并且名称字段具有表达式，因此它始终为 0。

这将成为一个循环，因此它将创建 13 个查询（A/B、C/D 等）。

与 Access 宏构建器相比，在 VBA 中使用此过程似乎会更好，因为我不仅必须循环此过程，而且还有 2 个类似的表（相同的字段名称，不同的值）需要运行它上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T19:37:49.080

您可以使用记录集在 VBA 中运行查询，然后从那里处理数据：

```
Sub YourQueries(ByVal pstrCol1 As String, ByVal pstrCol2 As String, ByVal pstrCol3 As String, ByVal pstrCol4 As String)
Dim rs As Recordset
Dim strSQL As String

' Change types above to match what's actually in the table

strSQL = "SELECT YourColumn1, YourColumn2, YourColumn3, YourColumn4 "
strSQL = strSQL & " WHERE "
strSQL = strSQL & "YourColumn1='" & pstrCol1 & "'"
strSQL = strSQL & " AND YourColumn1='" & pstrCol1 & "'"
strSQL = strSQL & " AND YourColumn1='" & pstrCol1 & "'"
strSQL = strSQL & " AND YourColumn1='" & pstrCol1 & "'"

Set rs = CurrentDb.OpenRecordset(strSQL, dbOpenSnapshot)
While Not rs.EOF
    For i = 0 To 3
     Debug.Print rs.Fields(i) & " is Column" & Format(i)
    Next i
    rs.MoveNext
Wend
rs.Close
Set rs = Nothing
End Sub 
```

# jquery - 如何在 grails 控制器中解析 JSON

> ID：14963279
> 
> 赞同：2
> 
> 时间：2013-02-19T17:06:19.480
> 
> 标签：jquery, grails, groovy

我正在通过 jQuery 提交一个表单，并且我正在发送一个 JSON 对象以及提交。我这样做是这样的：

```
 console.log(jsonObject)
    $.ajax({
        type: "POST",
        url: "/myapp/mycontroller/save",
        data: jsonObject,
        success: '',
        dataType: 'json'
    }); 
```

`console.log`输出如下所示：

```
Object {test: Object, test2: Object}
test: Object
   red: "off"
   green: "off"
   yellow: "off"
test2: Object
   red: "on"
   green: "on"
   yellow: "off" 
```

在我的控制器中保存操作现在我只有

```
def save() {
  println params
} 
```

打印这个：

> [test2[red]:on, test[green]:off, test2[yellow]:on, test2[red]:off, test[green]:off, test[yellow]:off, action:save, controller:mycontroller ]

**问题**

如何`jsonObject`在我的`save()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:29:01.037

您可以像对象一样访问它：

`params.test.red`（这是“关闭”）

# apache - 如何在没有 mod_rewrite 的情况下使用 mod_vhost_alias 获得默认主机工作？

> ID：14963283
> 
> 赞同：0
> 
> 时间：2013-02-19T17:06:43.123
> 
> 标签：apache, mod-vhost-alias

我最近向我的 apache 添加了一个虚拟主机配置，它使用 mod_vhost_alias 将请求路由到类似域的目录。如果目录存在，一切正常。现在我的想法是，当我调用一个路由到我的 apache 的域，但不存在相应的虚拟文档根时，该请求将由默认主机处理。但事实并非如此。有没有不使用 mod_rewrite 的解决方案？

这是我的动态主机配置：

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    ServerAlias *

    UseCanonicalName Off

    LogFormat "%V %h %l %u %t \"%r\" %s %b" vcommon
    CustomLog /var/log/apache2/dhost_access.log vcommon

    VirtualDocumentRoot /var/www/%0
    VirtualScriptAlias /var/www/%0
</VirtualHost> 
```

这是我的默认主机：

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
            AllowOverride None
            Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
            Order allow,deny
            Allow from all
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T12:33:46.940

我*认为*您必须先加载所有〜正常〜虚拟主机，然后再加载 mod_vhost_alias

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T07:25:03.320

您可以尝试在您的 vhost 中添加一个 IF 模块以检查该文件夹是否存在，如果不存在，则重定向到另一个文件夹。尝试这样的事情：

```
<IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^(.*)$ path/to/redirect/to [QSA,L]
</IfModule> 
```

# vb.net - 检测关闭表单的所有方式的最佳方法是什么？

> ID：14963286
> 
> 赞同：1
> 
> 时间：2013-02-19T17:06:54.493
> 
> 标签：vb.net, winforms, formclosing

我有一个表单，我`End`在我的代码中使用了多次关闭。当我这样做时，我想做一个命令来保存设置，`VarsToIni()`它需要一些公共变量并将它们保存在一个 INI 文件中。我试过把它放在主窗口的 F​​ormClosing 中（它始终保持打开状态），这只适用于你按下 X 按钮而不是我的`End`语句关闭时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:23:18.280

添加一个新的 Sub 并将调用替换为`End`对新 Sub 的调用：

```
Sub EndMe()
    VarsToIni()
    Application.Exit() 
End Sub 
```

**编辑：**

正如 Dan 指出的那样，`End()`关闭应用程序是一种不好的方法，`Application.Exit()`是首选。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:01:54.110

考虑使用`Application.Exit()`而不是`End`. `FormClosing`无论如何都可以调用它（并且您可以根据关闭方式来处理它）。

```
Private Sub frmMain_FormClosing(ByVal sender As System.Object, ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles MyBase.FormClosing
    Select Case e.CloseReason
        Case CloseReason.ApplicationExitCall
            ' This is the result of Application.Exit()
            e.Cancel = False
        Case CloseReason.UserClosing
            ' This is the result of clicking the red X
            Select Case MessageBox.Show("Are you sure you wish to exit?", "Confirm", MessageBoxButtons.YesNo, MessageBoxIcon.Question)
                Case DialogResult.Yes
                    e.Cancel = False
                Case DialogResult.No
                    e.Cancel = True
            End Select
        Case Else
            e.Cancel = False
    End Select
    If Not e.Cancel Then
        VarsToIni()
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:13:17.897

尽管如此，我对您的问题感到很困惑：
这将关闭您的所有表格

```
For each x as Form in My.Application.OpenForms  
'You can then put your VarsToIni() here
 x.Close()
Next 
```

注意：将此添加到您的导入中

```
Imports System.Windows.Forms 
```

# ruby-on-rails - 不知道为什么会在这里使用 Proc - 没有得到简单的东西

> ID：14963288
> 
> 赞同：4
> 
> 时间：2013-02-19T17:06:57.493
> 
> 标签：ruby-on-rails, ruby, proc

我了解 proc 的概念，但有时我会看到这样的代码（取自 rails 验证指南[http://guides.rubyonrails.org/active_record_validations_callbacks.html#using-if-and-unless-with-a-proc](http://guides.rubyonrails.org/active_record_validations_callbacks.html#using-if-and-unless-with-a-proc)）：

```
class Order < ActiveRecord::Base
  before_save :normalize_card_number,
    :if => Proc.new { |order| order.paid_with_card? }
end 
```

似乎这可以更简单地写成：

```
class Order < ActiveRecord::Base
  before_save :normalize_card_number, :if => :paid_with_card? 
end 
```

关于在这里使用 Proc 的优势，我没有得到什么？

提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T17:17:33.867

在简单的情况下，它们是等价的，但是 procs 允许更多的多功能性，而不需要简单地定义一个方法来进行验证 if 检查。

想象一下：

```
before_save :nuke, :if => Proc.new { |model| !model.nuked? && model.nukable? && model.region.nukable? } 
```

您始终可以在实例方法中编写该检查并用符号引用它，但是对于特定逻辑仅在 :if 中的情况，将其保留在 proc 中是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:28:02.027

如果方法的接收者是被验证的对象，它们是等价的。这并不是*ActiveModel*验证器的工作方式，但概念是相似的：

调用`to_proc`符号`:sym`为您提供 ->(x){ x.sym } 的功能等价物 - 符号作为消息发送到 proc 的参数。调用`to_proc`proc 只会返回自身，因此您可以将符号或 proc 传递给方法并保证 proc：

```
def return_a_proc(symbol_or_proc)
  symbol_or_proc.to_proc
end 
```

在模型实例不是接收者的情况下，例如验证方法将模型作为参数，或者在 Daniel Evans 的示例中，您需要显式构造 proc 以指定应该使用 proc 的参数做什么。

# ios - 删除 iCloud 数据不会清除 NSUbiquitousKeyValueStore？

> ID：14963289
> 
> 赞同：6
> 
> 时间：2013-02-19T17:06:58.743
> 
> 标签：ios, icloud, nsubiquitouskeyvaluestore

我有一个配置为使用 iCloud 的应用程序。我正在向 NSUbiquitousKeyValueStore 添加一个键/值，我可以在我的所有设备上按预期检索它。但是，如果我从“设置”下删除我的应用程序的 iCloud 数据，我希望我添加到 NSUbiquitousKeyValueStore 的所有 iCloud 数据也会被删除，但事实并非如此。无论我希望 iCloud 同步多长时间，我都能检索到所有数据。

我去了 developer.icloud.com 并看到我的其他 iCloud 数据（我也在 iCloud 上使用 Core Data）被正确删除，但它们不是 NSUbiquitousKeyValueStore 保存其数据的文件夹，我可以告诉它。

有谁知道这是否应该被删除？如果用户无法删除它，这似乎有点像“云内存泄漏”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T17:11:23.200

我就是这样做的：

```
NSUbiquitousKeyValueStore *kvStore = [NSUbiquitousKeyValueStore defaultStore];
NSDictionary *kvd = [kvStore dictionaryRepresentation];
NSArray *arr = [kvd allKeys];
for (int i=0; i < arr.count; i++){
    NSString *key = [arr objectAtIndex:i];
    [kvStore removeObjectForKey:key];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-17T20:18:55.547

这将清除它。*#if DEBUG*是为了防止您意外发送此代码。

**斯威夫特 5.2**

```
#if DEBUG
let allKeys = NSUbiquitousKeyValueStore.default.dictionaryRepresentation.keys
for key in allKeys {
    NSUbiquitousKeyValueStore.default.removeObject(forKey: key)
}
#endif 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-14T19:20:35.083

删除 iCloud“文档和数据”只会删除所有文档和 CORE 数据。它不会删除 NSUbiquitousKeyValueStore 中的任何内容。我的期望是它会删除有关该应用程序的所有内容。

在添加 iCloud 支持之前，我使用 NSUserDefaults 为应用程序存储小块数据。例如，最终用户可以输入他们的姓名和地址，我会将其存储在 NSUserDefaults 中。它不是复杂的数据，我不需要使用核心数据或平面文件来存储它。将其存储在那里非常容易并且可以正常工作。如果我从手机中删除该应用程序，该信息就会消失，这正是我所期望的。当我添加 iCloud 支持时，我将其放入 NSUbiquitousKeyValueStore。但是，即使我删除应用程序，然后删除“文档和数据”，最终用户名和地址仍然存在。

我以为我做错了什么。经过一天大部分时间的研究，我发现 iCloud 键值存储应该用于“离散”数据，并且“iCloud 键值数据存储不是用户会看到的”。

因此，虽然它完全能够存储最终用户实际看到的非复杂用户数据，但这不是预期用途。我做的“错误”是将它用于非预期用途，尽管它适用于该用途。

我不确定为什么 Apple 不会从 iCloud 中删除所有内容。或者至少让用户有能力。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-18T10:52:26.237

删除应用后保留 NSUbiquitousKeyValueStore 是正确的。在删除的那一刻，设备不知道您的其他设备是否仍需要该共享数据。

您可以使用它来存储您希望在设备之间共享的应用内购买状态、用户详细信息等，并在应用被意外删除（或卸载，然后稍后重新安装）时恢复

另一方面，NSUserDefaults 是属于该设备上应用程序本身的数据，因此删除应用程序应该删除数据。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-27T23:28:04.477

这是一个功能而不是错误。如果您为所有用户提供一次性的东西（例如每个人从 50 个免费积分开始），您需要某种方式来确保他们不会删除所有内容然后重新获得 50 个免费积分。

# javascript - 隐藏行时如何重新排序行

> ID：14963291
> 
> 赞同：0
> 
> 时间：2013-02-19T17:07:03.207
> 
> 标签：javascript

我想根据隐藏的字段重新排序，当它被隐藏时我将隐藏字段 zone zone_deleted 设置为 1 以将其标记为已删除。

```
function insertZone() {

    var table = document.getElementById('zoneItems');

    var e = document.getElementById('zone');
    var number = e.options[e.selectedIndex].value;
    var rowcount = document.getElementById('zoneItems').rows.length;

    if(rowcount == 0){
        var x = table.insertRow(-1);

        var head1 = x.insertCell(0);
        head1.innerHTML = "Zone";

        var head2 = x.insertCell(1);
        head2.innerHTML = "Motor Reference Point";

        var head3 = x.insertCell(2);
        head3.innerHTML = " ";

    }

        for (var i=0; i < number; i++)
        {
            var x = table.insertRow(-1);
            var a = x.insertCell(0);
            //a.innerHTML = "<input type='hidden' name='zone_id' value='' /> ";

            num = i+1;

            var b = x.insertCell(1);
            b.innerHTML = "<input type='text' name='zone_description[]' size='18' value=''/><input id='zone"+num+"' type='hidden' name='zone_deleted[]' value='0' />";

            var c = x.insertCell(2);
            c.innerHTML = "<button type='button' class='button lastChild' onclick='removeZone(this)' ><img src='themes/default/images/id-ff-clear.png'></button>";
        }

        //set the row ordering
        count();

}

function removeZone(rows) {

    var _row = rows.parentElement.parentElement;

    _row.cells[1].getElementsByTagName('input')[1].value = '1';

    document.getElementById('zoneItems').rows[_row.rowIndex].style.display = 'none';

    count();

}

function count(){ //sets the row ordering

    var table = document.getElementById("zoneItems");
    var tbody = table.tBodies[0];

    for (var i = 0, row; row = tbody.rows[i]; i++) { //loop through rows

        if(i != 0){//if not the first row

           // var deleted = row.cells[1].getElementsByTagName('input')[1].value;

            for (var j = 0, col; col = row.cells[j]; j++) {//loop through cols

                if(j == 0){//insert into only the first td
                    col.innerHTML = "<span>" +i+ "</span><input type='hidden' name='zone_id' value='' />";
                }

            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:02:17.820

对显示的行号使用与用于索引 DOM 中的行的变量不同的变量。

```
function count() {
    var table = document.getElementById("zoneItems");
    var tbody = table.tBodies[0];
    var rownum = 1;

    for (var i = 1, row; row = tbody.rows[i]; i++) { //loop through rows
        var deleted = row.cells[1].getElementsByTagName('input')[1].value;
        if (deleted != "1") {
            row.cells[0].innerHTML = "<span>" +rownum+ "</span><input type='hidden' name='zone_id' value='' />";
            rownum++;
        }
    }
} 
```

[小提琴](http://jsfiddle.net/barmar/6CJGp/9/)

# maven - 如何将 Maven 依赖项作为 OSGI 包自动部署到 JBoss 中？

> ID：14963293
> 
> 赞同：1
> 
> 时间：2013-02-19T17:07:04.327
> 
> 标签：maven, deployment, osgi, jboss7.x, apache-servicemix

我有一个部署独立 OSGí Apache ServiceMix 应用程序的项目。它有大量的依赖项，它是用 Maven 构建的。现在我想将此应用程序部署到 JBoss AS 中。我发现了一个有趣的 Maven 插件，叫做`jboss-as-maven-plugin`( `org.jboss.as.plugins`) 来部署任何东西。我使用`maven-bundle-plugin`( `org.apache.felix`) 来构建我的包，它工作正常，但是当我部署项目包时，部署失败，因为不满足依赖关系。

如何使用 Maven 目标自动捆绑和部署所有依赖关系树？可能吗？我的项目在 上声明了几十个依赖`pom.xml`项，其中一些是我工作区中的其他项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:17:09.570

目前，我知道的唯一解决方案是 Karaf 功能。您可以[从 pom 依赖项中创建一个功能文件](http://icodebythesea.blogspot.de/2012/03/making-osgi-deployments-easier-with.html)。

我发现 jboss 似乎支持[子系统](https://docs.jboss.org/author/display/AS7/OSGi+subsystem+configuration)。这可能有助于指定运行应用程序所需的包。它似乎不是 OSGi 子系统规范，但对于 jboss 这可能已经有所帮助。对于 OSGi 规范 5，有一个标准化的子系统规范，它可以提供一种跨容器执行此操作的标准方法。

如果 jboss 支持 OBR（OSGi 包存储库），那么您可以限制必须指定的依赖项的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T10:59:43.287

如果您的应用程序不使用 OSGi，您可以考虑将您的应用程序打包为可部署在 JBoss 中的 WAR。

然后您需要使用 web.xml 来引导您的应用程序，例如使用 Spring XML 文件。

这里有一个骆驼示例作为 WAR：http: [//camel.apache.org/servlet-tomcat-example.html](http://camel.apache.org/servlet-tomcat-example.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-22T09:24:38.447

你可以使用 org.apache.sling 插件自动安装你的包

```
 <plugin>
                <groupId>org.apache.sling</groupId>
                <artifactId>maven-sling-plugin</artifactId>
                <executions>
                    <execution>
                        <id>install-bundle</id>
                        <goals>
                            <goal>install</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <slingUrl>http://localhost:8181/system/console/install</slingUrl>
                    <user>karaf</user>
                    <password>karaf</password>
                </configuration>
            </plugin> 
```

您可以从 Adob​​e 网站找到详细的 pom.xml：[https ://docs.adobe.com/docs/en/cq/5-6-1/developing/developmenttools/how-to-build-aem-projects-using-apache -maven.html](https://docs.adobe.com/docs/en/cq/5-6-1/developing/developmenttools/how-to-build-aem-projects-using-apache-maven.html)

或[http://www.cqblueprints.com/tipsandtricks/build-and-deploy-osgi/build-deploy-osgi-1.html](http://www.cqblueprints.com/tipsandtricks/build-and-deploy-osgi/build-deploy-osgi-1.html)

# arduino - 试图避免在我的 Arduino 电路中尝试创建“智能服务员”的 goto 功能

> ID：14963295
> 
> 赞同：0
> 
> 时间：2013-02-19T17:07:10.133
> 
> 标签：arduino, goto

基本上，我正在制作一个涉及创建智能服务员的 Arduino Uno 项目：

1.  将在基本的 Arduino 机箱顶部有一个玻璃支架。传感器将是：
    *   4 个红外传感器，每侧一个
    *   2个线传感器，一左一右
    *   光传感器，一个杯架
2.  它还将具有：
    *   2个伺服电机，左右各一个
    *   1 个 LED 显示杯子状态
3.  它会：
    *   沿着一条黑线移动，这条黑线将贴在 HOP 的地板上
    *   会感应到四面八方的人，当感应到靠近的物体时会停下来
    *   如果它感觉到玻璃已经被抬起，它将无限期地停止
    *   如果没有感应到玻璃移动，将在 15 秒内重新启动，或者在玻璃放下时重新启动
    *   放下玻璃后，LED 会由绿色变为红色
    *   机器人将继续移动，忽略所有障碍物，直到到达加油站
    *   将停在加油站，灌装机将更换玻璃并按下 Arduino 硬重置按钮

我的代码是：

```
#include <Servo.h>
int redLED = 5;
int yellowLED = 6;
int greenLED = 7;
int cup1 = 0;
int picked = 1;
int lineright = 0;
int lineleft = 0;
int sensorright = 0;
int sensorleft = 0;
int sensorfront = 0;
int sensorback = 0;
int sensorpinright = 1;
int sensorpinleft = 2;
int sensorpinfront = 3;
int sensorpinback = 4;
Servo servoright;
Servo servoleft;
void setup ()
{
  servoright.attach (9);
  servoleft.attach (10);
  pinMode (redLED, OUTPUT);
  pinMode (greenLED, OUTPUT);
  pinMode (greenLED, OUTPUT);
}
void loop()
{
   sensorright = digitalRead (sensorpinright);
   sensorleft = digitalRead (sensorpinleft);
   sensorfront = digitalRead (sensorpinfront);
   sensorback = digitalRead (sensorpinback);
   lineleft = analogRead (1);
   lineright = analogRead (2);
   cup1 = analogRead (3);
 if (sensorright < 0 && sensorleft < 0 && sensorfront < 0 && sensorback < 0)
  {
    digitalWrite (led1, GREEN);
    startfresh:
    if (lineleft < 800)
    {
      servoleft.write (180);
      servoright.write (180);
    }
    else
    {
      if (lineright < 800)
      {
        servoright.write (0);
        servoleft.write (0);
      }
      else
      {
        servoright.write (0);
        servoleft.write (180);
      }
    }
  }
  else
  {
    for (int i=0;i<5;i++)
    {
      servoright.write (93);
      servoleft.write (93);
      if (picked < 1)
      {
        while (cup1<500)
        {
          digitalWrite (yellowLED, HIGH);
          picked = 1;
        }
      }
      else
      {
        digitalWrite (yellowLED, LOW);
        digitalWrite (redLED, HIGH);
        goto startfresh;
      }
      delay (2000)
    }
  }
} 
```

我想用我的代码做的是避免最后的`goto`功能。但是，由于只有 2 个功能的限制，我找不到任何方法来重组它。在这种情况下，该`goto`功能似乎很好，但我不确定。有没有简单的方法来重组它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:43:48.873

使 startfresh 作为函数

```
 if (sensorright < 0 && sensorleft < 0 && sensorfront < 0 && sensorback < 0)
  {
    digitalWrite (led1, GREEN);
    startfresh();
  }
  else
  {
    for (int i=0;i<5;i++)
    {
      servoright.write (93);
      servoleft.write (93);
      if (picked < 1)
      {
        while (cup1<500)
        {
          digitalWrite (yellowLED, HIGH);
          picked = 1;
        }
        delay (2000);
      }
      else
      {
        digitalWrite (yellowLED, LOW);
        digitalWrite (redLED, HIGH);
        startfresh();
      }
    }
  }
}

void startfresh() {
  if (lineleft < 800)
  {
    servoleft.write (180);
    servoright.write (180);
  }
  else
  {
    if (lineright < 800)
    {
      servoright.write (0);
      servoleft.write (0);
    }
    else
    {
      servoright.write (0);
      servoleft.write (180);
    }
  }
} 
```

# excel - 尝试将值相加但有多个条目

> ID：14963297
> 
> 赞同：0
> 
> 时间：2013-02-19T17:07:11.657
> 
> 标签：excel, match, multiple-columns, vlookup

我正在尝试查找一列中的值并从另一列中提取数字。当然，我可以使用简单的 V-lookup 或 Match。但是，第一列数据有多个相同的条目。如果我 Vlookup 它只会拉第二列中的第一个数字。

我需要从第二列中提取每个数字并以某种方式将它们加在一起。尽管我有多个条目。如果有一种方法可以合并第一列中的多个条目，同时总结第二列中的数字，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:35:08.727

我会推荐一个数据透视表。要创建一个，请在数据区域中选择一个单元格（第一行中需要有列名。从功能区中选择插入/数据透视表，然后为该位置选择新工作表选项。

![示例数据范围](../Images/a6a9bf208b66046e10a70727a4b9adca.png)

在新工作表的数据透视表列表中，将第一列的名称拖到行标签框，将第二列的名称拖到值框。值框中的名称应变为 <2nd column name> 的总和。

![数据透视表字段列表](../Images/2ff551df330e16ada58e4e651a7953f2.png)

数据透视表现在将显示第 1 列值和第 2 列总和值的排序列表。在示例中，您将看到

![数据透视表](../Images/336ae93e2344ab65175c35980d60c417.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:14:15.843

[SUMIF](http://office.microsoft.com/en-ca/excel-help/sumif-HP005209292.aspx)能满足您的需求吗？

# internet-explorer - IE 版本 <= 8：IE 忽略自定义 css

> ID：14963302
> 
> 赞同：0
> 
> 时间：2013-02-19T17:07:26.213
> 
> 标签：internet-explorer, internet-explorer-8, cross-browser, styles, internet-explorer-9

我在 HTML 标签的样式属性中有一个占位符，如下所示：style="custom_style:cssreplace"。这样做的目的是我可以在运行 JS 代码时将它们替换为真正的 CSS。

这种策略适用于 IE9 和 IE10，但不适用于 IE8 和更早的版本，因为它呈现页面，它只是删除了“奇怪的”自定义样式。

您是否知道 IE8 及更早版本中是否有任何“设置”（Doctype 等），以便它不会忽略这些标签？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T21:02:44.780

使用 HTML5 数据属性`data-style="customer_style: css_replace"`。然后让您的 Javascript 查找此内容并适当地填写样式。

# java - JSNI Marshal Enums 可以作为字符串吗？

> ID：14963306
> 
> 赞同：1
> 
> 时间：2013-02-19T17:07:40.680
> 
> 标签：java, javascript, gwt, marshalling, jsni

我正在尝试使用 GWT 的 JSNI 通过本机代码调用 Java 函数。Java 函数中有一个枚举，我很想知道枚举是否会以我想要的方式编组。我在 Google 或 SO 上找不到任何有用的东西，而且[Google 基本文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)也不是很具体。我相信我会在编译和运行时发现，但我想我不妨问问。

给定这样的大大简化的代码：

```
package my.example.package;
public class Giant {
    public enum GiantWord { FEE, FIE, FO, FUM };
    public void sayGiantWord(GiantWord word) { /* ... */ }

    public native JavaScriptObject toJS() /*-{
        var Giant = function() {
            this.sayGiantWord = function(word) {
                this.@my.example.package::sayGiantWord(Lmy/example/package/Giant$GiantWord;)(word);
            };
        };
        return new Giant();
    }-*/;
} 
```

**编辑**- 根据评论，让我给出 toJS 函数的替代版本，并避免`this`和`this.`

```
 public static native JavaScriptObject toJS(final Giant g) /*-{
        var Giant = function() {
            this.sayGiantWord = function(word) {
                g.@my.example.package::sayGiantWord(Lmy/example/package/Giant$GiantWord;)(word);
            };
        };
        return new Giant();
    }-*/; 
```

`sayGiantWord("FEE")`从 JavaScript 中调用（在适当获取的 var from 上`toJS()`）是否可以正常工作？换句话说，JSNI 编组器会正确地将字符串转换为其匹配的 Java 枚举吗？

我希望调用`sayGiantWord(1)`更容易正确编组，因为 int 可以轻松转换为枚举。

其他注意事项：

*   GWT Eclipse 插件为我提供了访问类成员枚举的语法。至少到目前为止，GWT 正在与我合作。
*   我不想传递数字，如果有必要，我知道我可以使用 Java 类中的转换函数处理字符串，如下所示；我宁愿不这样做。

```
public void sayGiantWordJS(String word) {
    // convert the string to an enum
    // call sayGiantWord
} 
```

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:36:51.823

JSNI 无法处理 Java 枚举，但您可以将枚举字符串传递给 JSNI 层，以及将 JSNI 方法返回的字符串转换回枚举。

您最好单独表示JavaScript 对象，并从Java 类型`Giant`委托给 JSNI 层。`Giant`这样，您可以保持关注点分离并松散地耦合实现和抽象：

```
public class GiantJso extends JavaScriptObject {

    protected GiantJso() {
    }

    public static final native GiantJso create(String wordA, String wordB,
            String wordC) /*-{
        return {
            vocabulary : [ wordA, wordB, wordC ],
            said : ''
        };
    }-*/;

    public final native void sayGiantWord(String word) /*-{
        if (this.vocabulary.indexOf(word) != -1) {
            console.log("i'm a giant, here me roar: ", word, "!");
            this.said = word;
        }
    }-*/;

    public final native JsArrayString vocabulary() /*-{
        return this.vocabulary || null;
    }-*/;

    public final native String said() /*-{
        return this.said;
    }-*/;
} 
```

然后将其包装在 Java 类型中：

```
public class Giant {

    private GiantJso jso;

    public Giant() {
        jso = GiantJso.create(GiantWord.FEE.name(),
                GiantWord.FEE.name(), GiantWord.FEE.name());
    }

    public void sayGiantWord(GiantWord word) {
        jso.sayGiantWord(word.name());
    }

    public GiantWord getSaidWord() {
        return GiantWord.valueOf(jso.said());
    }
} 
```

`vocabulary`并且`said`只是可以分配给 JSO 的附加属性的示例，当然，您可以自由地实现您希望的任何结构。

### 进一步阅读

*   GWT 文档开发指南上的*[JSNI 覆盖类型。](http://code.google.com/webtoolkit/doc/latest/DevGuideCodingBasicsOverlay.html)*

***注意：**如果您想要将 Java 类表示为 JavaScript 结构，请查看[GWT exporter](http://code.google.com/p/gwt-exporter/)。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T15:24:25.483

我根本无法让 Enum 工作。好像不支持。

当我通过 JavaScript 对象传递字符串或数字时，JSNI 没有尝试将输入转换为枚举。它确实将枚举转换为具有“序数”值的特殊对象，但它没有将数字视为序数，也没有尝试查找`valueOf`输入字符串。我考虑向枚举添加一个构造函数，但我所看到的一切都表明这是为了向枚举添加额外的数据字段。

我的回答是我说我宁愿避免的那个。最后，我的代码看起来类似于：

```
package my.example.package;
public class Giant {
    public enum GiantWord { FEE, FIE, FO, FUM };
    public void sayGiantWord(GiantWord word) { /* ... */ }
    public void sayGiantWordJS(String word) {
        sayGiantWord(GiantWord.valueOf(word));
    }

    public static native JavaScriptObject toJS(final Giant g) /*-{
        var Giant = function() {
            this.sayGiantWord = function(word) {
                g.@my.example.package::sayGiantWordJS(Ljava/lang/String;)(word);
            };
        };
        return new Giant();
    }-*/;
} 
```

注意 - 如果您通过 传递无效值`sayGiantWordJS()`，您将得到奇怪的行为，即`valueOf`引发异常，但在调用它时不会这样做。在我的测试中，直到我执行下一个用户界面操作时才看到异常。

# javascript - 试图访问一个 我的 JSP 的标题中有这一行，它正在解析为正确的值。 我想通过 javascript/jquery 访问这个值。我该怎么做呢？ 这是行不通的console.log($lo 问问题 问问题 2013-02-19T17:07:56.380 8635 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我的 JSP 的标题中有这一行，它正在解析为正确的值。 我想通过 javascript/jquery 访问这个值。我该怎么做呢？ 这是行不通的console.log($logicalName); 声明式数据挖掘：频繁项集平铺 对于我的计算机科学研究课程，我必须提出一组约束和分数定义，才能找到用于频繁项集挖掘的平铺。包含数据的矩阵由 1 和 0 组成。 我的任务是提出一组用于平铺的约束（具有固定数量的平铺），以及需要最大化的得分函数。由于我开始制定允许重叠图块的解决方案，因此我试图找到一个得分函数来计算所有图块的总“面积”。请记住，必须针对每个可能的解决方案评估得分函数，因此我不能简单地查看整个矩阵（包含大约 100k 个元素）并查看它是否是图块的一部分。但是，我只考虑了 2 个图块之间的重叠，并得出以下结论： TotalArea = Sum_a_in_Tiles(Area(a)) - Sum_a/b_in_tiles(Overlap(a,b)) 愚蠢的我，我没有考虑3个瓷砖之间可能的重叠。我的问题如下：是否可以为 n 个图块提出一个通用的得分函数，只考虑每个图块的面积和 2 个（或更多）图块之间的每个重叠面积，如果是这样，我将如何编程？ 我可以提供一些代码，但又必须用一种叫做 Comet 的晦涩语言进行编程 :( javascriptjsp 4 2 回答 2 This answer is useful 1 You just need to remove the string symbol from your parameter console.log(logicalName); 于 2013-02-19T22:18:02.720 回答 This answer is useful 1 console.log("${logicalName}"); 和 console.log(logicalName); 两者都会起作用！ 于 2013-02-19T17:12:09.947 回答 Related 2 python - 使用 Python 的分数模块查找具有特定分母的最接近小数的分数 1 apache - htaccess 将第一个目录重写为文件名 1 makefile - MacPorts：在 destroot 阶段违反了端口文件系统层次结构 1 javascript - 如何在滚动时为页面上的多个缩略图集实现 jQuery 图像循环循环？ 2 visual-studio - 如何在 Visual Studio 中将特定参数传递给 mstest 2 android - ImageSpan 中的可绘制选择器不起作用？ 0 internet-explorer - 无法获取属性“keyCode”的值：对象为空或未定义：Internet Explorer 1 c++ - R6025 纯虚函数调用：什么是以及如何解决 1 google-fusion-tables - 从谷歌表单中的1个数据输入操作在融合表中插入多行 1 css - 带有悬停的导航菜单生涩 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14963313
> 
> 赞同：2
> 
> 时间：
> 
> 标签：javascript, jsp

我的 JSP 的标题中有这一行，`<script>var logicalName = "${logicalName}"</script>`它正在解析为正确的值。

我想通过 javascript/jquery 访问这个值。我该怎么做呢？

这是行不通的`console.log($logicalName);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:18:02.720

You just need to remove the string symbol from your parameter

```
console.log(logicalName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:12:09.947

```
console.log("${logicalName}"); 
```

和

```
console.log(logicalName); 
```

两者都会起作用！

# javascript - 如果在节点列表中找不到，则更改默认 jstree 搜索的颜色和错误

> ID：14963317
> 
> 赞同：3
> 
> 时间：2013-02-19T17:08:02.297
> 
> 标签：javascript, jquery, jstree

我正在使用 jstree 插件来搜索节点。它可以工作，当发现默认颜色是非常明亮的蓝色时。您如何将默认颜色更改为其他颜色。

另外，如果没有找到搜索文本，我希望能够向用户显示错误。有什么想法我会怎么做？

```
function myFunction()
{
$(document).ready(function(){

var value=document.getElementById("search_field").value; 

    $("#search_tree").click(function () { 

        $("#tree").jstree("search",value) 
 }); 

 }); 
} 
```

这是我在节点列表中找到文本时返回的函数。

我想用深蓝色突出显示节点，并将窗口移动到该节点（有时，三个可能太大，需要调整浏览器窗口才能看到突出显示的节点）。对这种类型的脚本语言非常陌生，并感谢任何输入。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T20:13:14.383

要更改颜色，您只需编辑主题 CSS 文件的第 45 行：

```
.jstree-default a.jstree-search { color:aqua; } 
```

换成`aqua`你喜欢的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-07T21:01:36.410

还有一个建议——在 jsTree 的 style.css 文件中，有一堆不同的蓝色用于各种不同的东西。我的网页有深色背景，所以颜色看起来不太好。

为了简化颜色更改，我在 style.css 文件的顶部创建了一些变量，如下所示：

```
:root {
    --jstree-hover-color: transparent;
    --jstree-clicked-color: #4a4a4a;
    --jstree-search-color: #E0CD1F;
} 
```

然后我用这些变量替换了 CSS 中硬编码的颜色。这样，如果我不喜欢某种颜色，我可以在一个地方更改它并刷新页面以查看它的外观。

在您的情况下，您可以在此处更改搜索结果的颜色（来自 jsTree v3.x）。我注释掉了现有的颜色值，所以我会知道它最初是什么：

```
.jstree-default .jstree-search {
    font-style: italic;
    /*color: #8b0000;*/
    color: var(--jstree-search-color);
    font-weight: bold; 
```

# ios - 如何在套接字连接关闭之前判断成功写入的内容？

> ID：14963319
> 
> 赞同：0
> 
> 时间：2013-02-19T17:08:03.423
> 
> 标签：ios, cocoa, sockets, nsstream

我正在开发网络服务，并希望能够通过缓存我尝试发送的输出来从断开的连接中恢复，以便在客户端重新连接到服务时重新发送它。我的服务使用 NSOutputStream 包装套接字连接将输出发送到客户端。

有什么方法可以确认哪些数据已成功发送给客户端？TCP 应该知道它到达另一端有多少，但我不知道如何从 NSOutputStream 中获取该信息。

任何人都可以给我指点我如何管理这个吗？谢谢！

编辑：或者，有没有办法在我发送数据之前确定套接字连接是否仍然有效？我使用 USB 作为连接媒体，所以只要两边的软件保持连接，它应该是一个非常可靠的链接。但是在我已经尝试发送数据之前，我没有收到套接字关闭事件。

# regex - vcf 文件的正则表达式帮助

> ID：14963320
> 
> 赞同：0
> 
> 时间：2013-02-19T17:08:03.373
> 
> 标签：regex, vcf-vcard

我在单个 vcf 文件中有联系人

```
BEGIN:VCARD
VERSION:3.0
FN:XYZ
N:XYZ;;;;
TEL;TYPE=CELL:0123456789
END:VCARD 
```

我使用 vcard 拆分器将它们拆分为具有单个联系人的 vcf 文件，以便我可以将它们添加到我的 s60 诺基亚手机上。由于*许多*`FN`联系人的和`N`值相同，因此该名称在联系人列表中重复两次。所以我想写一个正则表达式来**删除**每个. 有人可以给我正则表达式吗？ ***`FN:``VCARD`***

 **** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:14:18.707

您可以使用[Notepad++](http://notepad-plus-plus.org/download/v6.3.html)完成此任务：

1.  转到搜索菜单 Ctrl+F，然后转到“标记”选项卡。检查“书签行”。

2.  检查正则表达式选项

3.  然后只需输入`^FN:`搜索词并单击“全部标记”

    **==> 包含搜索词的所有行都带有书签。**

    `^`是与行首匹配的锚点。

4.  现在转到菜单“搜索 - 书签 - 删除书签行”

    **==> 所有标记的行都消失了。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:22:17.720

什么stema说，或者如果你喜欢很酷的工具：

```
sed -i "s/^FN:.*\n$//" *.vcf 
```***

# php - mysqli_fetch_assoc($result)，指针移动到下一条记录。有没有办法将指针重置为查询结果的开头？

> ID：14963322
> 
> 赞同：2
> 
> 时间：2013-02-19T17:08:12.530
> 
> 标签：php, mysql, mysqli

看看这段代码

假设你在 php 中循环遍历一组 mysql 查询结果

```
while($temp = mysqli_fetch_assoc($result))
{
 echo $temp['id']; // ID Column
} 
```

当您执行 $temp=mysqli_fetch_assoc($result) 时，基本上指针会移动到下一条记录。有没有办法将指针重置为查询的开头？在此循环结束后，mysqli_fetch_assoc($result) 只会返回空行，使其再次无法使用。那么可能的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:08:12.530

所以我今天在工作中遇到了这个问题，我最初找到的唯一解决方案是重新查询，或者使用mysql的临时副本导致变量。两者都没有吸引力。

有一个更简单的解决方案是 mysql_data_seek。

基本语法是 mysqli_data_seek(data,row)

因此，在这种情况下，您只需执行

```
mysqli_data_seek($result,0)
$row=mysqli_fetch_assoc($result);// Will now return the first row. 
```

以类似的方式，您也可以再次循环遍历它。

它与 mysql_data_seek 类似。希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:56:51.303

1.  退出直接从数据库循环中打印数据的事情。学习将您的业务逻辑与演示分开。
2.  给自己一个数据库包装器，从你的代码中去掉所有这些丑陋的 mysqli_fetch_assoc。
3.  将查询结果存储在数组中。
4.  根据需要多次使用此数组。

像这样

```
$data = $db->getAll("SELECT * FROM table");

foreach ($data as $row) // 1st iteration
foreach ($data as $row) // 2nd iteration
foreach ($data as $row) // and so on 
```

# php - Swiftmailer 出错

> ID：14963323
> 
> 赞同：1
> 
> 时间：2013-02-19T17:08:15.727
> 
> 标签：php, email, email-attachments, swiftmailer

我在使用 swiftmailer 时遇到了一些问题。它一直在我身上崩溃，但如果我取出 ->sentTo 它不会出错，但我也无法收到电子邮件。

我对自己做错了什么感到困惑。

```
require_once 'lib/swift_required.php';

// Using smtp
//$transport = Swift_SmtpTransport::newInstance('my_smtp_host.com', 25)

//Using Gmail
$transport = Swift_SmtpTransport::newInstance('smtp.gmail.com', 465, "ssl") 
  ->setUsername('***') // or your gmail username
  ->setPassword('***'); // or your gmail password

// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

// Create a message
$message = Swift_Message::newInstance($subject)
  ->setFrom(array($email => $name))
  ->setTo(array('John.Doe@gmail.com' => 'John Doe'))
   ->setBody($content, 'text/html');

$message->attach(
Swift_Attachment::fromPath($_FILES['userfile']['name'])->setFilename($pic['tmp_name'])
);

// Send the message
$result = $mailer->send($message);

?> 
```

致命错误：

```
Uncaught exception 'Swift_TransportException' with message 'Failed to authenticate on SMTP server with username "...." using 2 possible authenticators' in ../lib/classes/Swift/Transport/Esmtp/AuthHandler.php:184 

Stack trace: 

0 ../lib/classes/Swift/Transport/Esmtp/EsmtpTransport.php(312): Swift_Transport_Esmtp_AuthHandler->afterEhlo(Object(Swift_SmtpTransport)) 

1 ../lib/classes/Swift/Transport/AbstractSmtpTransport.php(120): Swift_Transport_EsmtpTransport->_doHeloCommand() 

2 ../lib/classes/Swift/Mailer.php(80): Swift_Transport_AbstractSmtpTransport->start() 

3 upload.php(73): Swift_Mailer->send(Object(Swift_Message)) 

4 {main} thrown in lib/classes/Swift/Transport/Esmtp/AuthHandler.php on line 184 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:00:05.240

不得不将消息附件更改为：

```
$message->attach(
    Swift_Attachment::fromPath($theDirectory)->setFilename($fileNameForEmail)
    );

    // Send the message
    $result = $mailer->send($message);
}
else{
        echo 'The file you have chosen is invalid. Please go back and try again.';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:01:47.000

这：

> 无法使用 2 个可能的身份验证器在用户名“....”的 SMTP 服务器上进行身份验证

... 正是它所说的意思。Gmail 不接受您的用户名和密码，原因可能是它们错误或您未能提供某些必需的参数。

[根据Stack Overflow 上的其他问题](https://stackoverflow.com/questions/3536836/trying-to-send-mail-using-swift-mailer-gmail-smtp-php)和我自己的测试，主机名、端口和加密是正确的。所以可能的问题包括：

1.  您提供的用户名不正确。
2.  您提供的密码不正确。
3.  如果您启用[了双向身份验证](https://support.google.com/accounts/bin/answer.py?hl=en&answer=180744)，则需要生成应用程序特定密码。[这个视频](http://www.youtube.com/watch?v=zMabEyrtPRg&t=2m13s)解释了如何。

解决此问题后，您可能会遇到以下异常：

> 未捕获的异常“Swift_IoException”，带有消息“无法打开文件以读取 []”

...由此代码触发：

```
Swift_Attachment::fromPath($_FILES['userfile']['name']) 
```

如果您从[`$_FILES`数组](http://www.php.net/manual/en/features.file-upload.post-method.php)中读取错误项目的原因：`fromPath()`需要读取文件系统路径，但`$_FILES['userfile']['name']`包含客户端计算机上文件的原始名称。

# erlang - 将数据从表传输到另一个表并添加其他信息

> ID：14963325
> 
> 赞同：0
> 
> 时间：2013-02-19T17:08:16.247
> 
> 标签：erlang

我有这个记录

```
-record(transaction, {id, transaction_code, operation_code, ip_access). 
```

并使用此代码创建此表的克隆，名为 transaction_backup

```
mnesia:create_table(transaction_backup,[{disc_copies, [node()]},{attributes, record_info(fields, transaction)},
    {record_name, transaction}]). 
```

并使用此代码将数据从**事务**传输到**transaction_backup**

```
mnesia:transaction(fun() ->
  Records = mnesia:select(transaction, [{'_', [], ['$_']}]),
  [ok = mnesia:write(transaction_backup, Record, write) || Record <- Records]
end). 
```

表示表事务是否包含以下值：

```
1   E001  F200  127.0.01
2   E102  F300  127.0.01
3   E105  F402  127.0.01 
```

表 transaction_backup 将包含相同的内容

```
1   E001  F200  127.0.01
2   E102  F300  127.0.01
3   E105  F402  127.0.01 
```

现在我想创建一个表 transaction_backup 但这次表 transaction_backup 有其他名为**idback**的字段将是 transaction_backup 的唯一 id

所以我们应该以另一种方式创建 transaction_backup 而不是这样

```
 mnesia:create_table(transaction_backup,[{disc_copies, [node()]},{attributes, record_info(fields, transaction)},
        {record_name, transaction}]). 
```

并且**idback**的值将使用此代码自动增加

```
idback= next_id(tranasction_backup),

next_id(T) ->
    mnesia:dirty_update_counter(counter, T, 1). 
```

所以当我们将数据从事务传输到事务备份时，我认为应该做这样的事情

```
 mnesia:transaction(fun() ->
      Records = mnesia:select(transaction, [{'_', [], ['$_']}]),

F = fun() ->

                      Idback= next_id(tranasction_backup),

                        Trans = #tranasaction_backup{idback= Idback},
                        mnesia:write(Trans),
                        {ok};

        end,
    {atomic, Val} = mnesia:transaction(F),
    Val.

[ok = mnesia:write(transaction_backup, Record, write) || Record <- Records]
    end). 
```

所以表 transaction_backup 将包含这个值

```
1  1   E001  F200  127.0.01
2  2   E102  F300  127.0.01
3  3   E105  F402  127.0.01 
```

我想知道我们如何创建表 transaction_backup

正如我所说，我尝试使用：

```
 mnesia:create_table(transaction_backup,[{disc_copies, [node()]},{attributes, record_info(fields, transaction)},
        {record_name, transaction}]). 
```

但在我的情况下，表**transaction_backup**比名为**idback的表****事务**具有更多**字段**

 ****所以为了创建表`transaction_backup`，我们应该以另一种方式尝试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:13:11.497

是的，您可以拥有相同的交易记录。您需要使用 idback 创建一条新记录。在写入备份表之前，您需要将所有元素从事务复制到 transaction_backup 记录。或者你可以做

```
 Records = mnesia:select(transaction, [{'_', [], ['$_']}]), 
```

`[ok = mnesia:write(erlang:setelement(1, erlang:insert_element(2, Record, next_id(tranasction_backup)), transaction_backup) || Record <- Records]`

以上仅适用于 R16A 以后。否则你可以做

```
 [ok = mnesia:write(to_backup(Record, next_id(tranasction_backup))) 
|| Record <- Records]. 
```

和 to_backup 看起来像

```
 to_backup(Record, Id) ->
        [_H| List] = tuple_to_list(Record),
        list_to_tuple([transaction_backup, x| List]). 
```****

# java - 如何从 Servlet 响应“包含”的 JSP

> ID：14963326
> 
> 赞同：0
> 
> 时间：2013-02-19T17:08:27.657
> 
> 标签：java, jsp, servlets

我有一个`login.jsp`我为一个网站编写的表格，其中只包含一个用于登录的表格，我可以在不同的地方包含和重复使用它。我首先将它包含在我的`index.jsp`主页中。

我有一个表单提交到的 HTTPServlet，如果用户名/密码无效，则 Servlet 会发回一条消息以显示给用户，否则会将它们转发到他们的主页。

我的问题是，如果他们的详细信息不正确，我想将它们转发回他们所在的同一页面，但显示消息，但转发到登录页面仅在浏览器中显示该表单，在它包含的页面之外有什么办法可以转发回当前页面吗？或者这也许不是解决这个问题的最佳方式？

谢谢阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:15:59.340

我假设您正在使用`<jsp:include>`. 这是您可能会做的事情：

```
<jsp:include page="loginForm.html">
    <jsp:param name="currentPage" value="${whateverTheCurrentPageIs}" />
</jsp:include> 
```

在 loginForm 中包含`currentPage`变量。然后，在您的 servlet 中，您希望重定向/转发到您在该`currentPage`变量中传递的 URL。

# c++ - union 不能包含具有虚函数的对象

> ID：14963327
> 
> 赞同：6
> 
> 时间：2013-02-19T17:08:28.733
> 
> 标签：c++, unions

**代码：**

```
struct A{
    int a;
    virtual void f(){}
};
union B{
    A ob;
}; 
```

**编译时错误：**

```
C:\to\main.cpp|9|error: member 'A B::ob' with constructor not allowed in union|
C:\to\main.cpp|9|error: member 'A B::ob' with copy assignment operator not allowed in union|
||=== Build finished: 2 errors, 0 warnings ===| 
```

**c++03标准：**

> 具有非平凡构造函数 (12.1)、非平凡复制构造函数 (12.8)、非平凡析构函数 (12.4) 或非平凡复制赋值运算符 (13.5.3, 12.8) 的类的对象不能是联合的成员，也不能是此类对象的数组。如果联合包含静态数据成员或引用类型的成员，则程序格式错误。

该标准没有说明具有虚函数的类的对象，并且从错误中，编译器抱怨我没有使用的构造函数和复制赋值运算符。那么这是一个编译器错误吗？我正在使用 gcc 。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T17:10:32.453

该结构的隐式声明的默认构造函数、复制构造函数和复制赋值运算符是重要的，因为它有一个`virtual`函数，所以你已经打破了这些要求。

> 如果构造函数是隐式声明的默认构造函数并且满足以下条件，则构造函数是*微不足道的：*
> 
> *   它的类没有虚函数 (10.3) 和虚基类 (10.1)，并且
> *   [...]
> 
> 如果隐式声明类的复制构造函数`X`并且*如果*
> 
> *   类`X`没有虚函数 (10.3) 和虚基类 (10.1)，并且
> *   [...]
> 
> 如果隐式声明类的复制赋值运算符`X`并且*如果*
> 
> *   类`X`没有虚函数 (10.3) 和虚基类 (10.1)，并且
> *   [...]

C++11 的引用类似（它只包括移动构造函数和赋值运算符），但 C++11 对联合成员没有相同的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:16:28.017

如果可以，请使用 C++11，它不包含此类约束

# django - 哪个型号应该更高？

> ID：14963329
> 
> 赞同：0
> 
> 时间：2013-02-19T17:08:30.950
> 
> 标签：django

哪个型号应该更高？我仍然有一个错误。

```
class Post(models.Model):
    blog = models.ForeignKey(Blog)

class Blog(models.Model):
    post = models.ManyToManyField(Post,blank=True,null=True) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:21:13.563

本质上，您不需要来自 Post -> Blog 的外键。请参阅[文档](https://docs.djangoproject.com/en/dev/topics/db/examples/many_to_many/#many-to-many-relationships)。作为默认行为的一部分，ManyToMany 为您提供相反的方向。

编辑（根据[@Tony Blundell](https://stackoverflow.com/users/391538/tony-blundell)），您可以在定义顺序问题的情况下通过字符串为外键指定模型。但是，在这种情况下（我假设）这不是您想要做的。在您的情况下，废弃 Post 下的 ForeignKey，然后您可以利用 M2M 的反向行为来表示该关系。

另外我会查看[文档](https://docs.djangoproject.com/en/1.4/)，因为它们对 Django 项目非常有用，并且涵盖了所有基础知识。[教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)，如果你还没有学过，它非常有用。

# hadoop - 获取仅包含一个键值的输出文件？

> ID：14963331
> 
> 赞同：0
> 
> 时间：2013-02-19T17:08:34.630
> 
> 标签：hadoop, hadoop-streaming

我有一个使用 Hadoop 的用例，我希望我的输出文件可以按键拆分。目前，我让 reducer 简单地输出迭代器中的每个值。例如，这里有一些 python 流代码：

```
for line in sys.stdin:
    data = line.split("\t")
    print data[1] 
```

此方法适用于小型数据集（大约 4GB）。作业的每个输出文件仅包含一个键的值。

但是，如果我增加数据集的大小（超过 40GB），那么每个文件都包含按排序顺序混合的键。

有没有更简单的方法来解决这个问题？我知道输出将按排序顺序进行，我可以简单地进行顺序扫描并添加到文件中。但似乎这不是必需的，因为 Hadoop 会为您排序和拆分密钥。

问题可能不是最清楚的，所以我会澄清是否有人有任何意见。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:00:37.683

好的，然后创建您的 MapReduce 解决方案的[自定义 jar 实现](http://bigdataspeak.wordpress.com/2012/12/27/emr-streaming-job-using-java-code-for-mapper-and-reducer-creating-custom-jar/)`MultipleTextOutputFormat`，并作为[此处](http://www.infoq.com/articles/HadoopOutputFormat)解释的 OutputFormat 使用。您只需发出文件名（在您的情况下为键）作为减速器中的键，并将整个有效负载作为值，您的数据将写入名为您的键的文件中。

# ios - 使用 requestAccessToEntityType 时出现 BAD ACCESS 错误

> ID：14963335
> 
> 赞同：2
> 
> 时间：2013-02-19T17:08:47.387
> 
> 标签：ios, objective-c

尝试运行此代码时出现 EXEC_BAD_ACCESS 错误，并且用户不允许访问日历。requestAccessToEntityType 是否在单独的线程上运行，如果是这种情况，我如何访问主线程以显示 UIAlertView？

```
EKEventStore *store = [[EKEventStore alloc] init];
if ([store respondsToSelector:@selector(requestAccessToEntityType:completion:)])
{
    [store requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error)
     {
         if ( granted )
         {
             [self readEvents];
         }
         else
         {
             UIAlertView *alert = [[UIAlertView alloc] 
                                      initWithTitle:@"Denied Access To Calendar" 
                                      message:@"Access was denied to the calendar, please go into settings and allow this app access to the calendar!" 
                                      delegate:nil 
                                      cancelButtonTitle:@"Ok" 
                                      otherButtonTitles:nil, 
                                      nil];
             [alert show];
         }
     }];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:13:38.490

根据[requestAccessToEntityType 的文档](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html)

> 当用户点击以授予或拒绝访问时，将在任意队列上调用完成处理程序。

所以，是的，它可能在与 UI 线程不同的线程上。您只能从主 GUI 线程发出警报。

调查`performSelectorOnMainThread`。此处的更多信息：[使用 dispatch_async 或 performSelectorOnMainThread 在主线程上执行 UI 更改？](https://stackoverflow.com/questions/11530050/perform-ui-changes-on-main-thread-using-dispatch-async-or-performselectoronmaint)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:13:40.307

您的应用程序崩溃的原因是您试图处理您的 GUI 元素，即后台线程中的 UIAlertView，您需要在主线程上运行它或尝试使用调度队列

使用调度队列

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);

    dispatch_async(queue, ^{

     //show your UIAlertView here... or any GUI stuff

    }); 
```

或者您可以像这样在主线程上显示 GUI 元素

```
[alertView performSelectorOnMainThread:@selector(show) withObject:nil waitUntilDone:YES]; 
```

您可以在此[链接上了解有关在线程上使用 GUI 元素的更多详细信息](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/AboutThreads/AboutThreads.html#//apple_ref/doc/uid/10000057i-CH6-SW21)

# linux - linux中的多线程文件锁定

> ID：14963350
> 
> 赞同：4
> 
> 时间：2013-02-19T17:09:37.263
> 
> 标签：linux, multithreading, file-locking

我正在开发一个多线程应用程序，其中多个线程可能希望独占访问同一个文件。我正在寻找一种序列化这些操作的方法。我打算使用flock、lockf 或fcntl 锁定。但是，使用这些方法，当第一个线程已经拥有锁时，将允许第二个线程尝试锁定文件，因为这两个线程在同一个进程中。这是根据[flock](http://www.kernel.org/doc/man-pages/online/pages/man2/flock.2.html)和[fnctl](http://www.kernel.org/doc/man-pages/online/pages/man2/fcntl.2.html)的手册页（我猜在linux中lockf是用fnctl实现的）。[这个其他问题](https://stackoverflow.com/questions/9462532/multiple-threads-able-to-get-flock-at-the-same-time)也支持。那么，是否有其他方法可以在 linux 中锁定文件，它在线程级别而不是进程级别工作？

我想出的一些我不喜欢的替代方案是：

1) 使用用 O_CREAT | 打开的锁文件 (xxx.lock) O_EXCL 标志。如果存在争用，此调用将仅在一个线程中成功。这样做的问题是，然后其他线程必须在调用上旋转，直到它们获得锁定，这意味着我必须 _yield() 或 sleep() 这让我认为这不是一个很好的选择。

2）保留所有打开文件的互斥列表。当一个线程想要打开/关闭一个文件时，它必须首先锁定列表。打开文件时，它会搜索列表以查看它是否已打开。这听起来特别低效，因为即使文件尚未拥有，它也需要大量工作。

还有其他方法吗？

**编辑：** 我刚刚在我的系统手册页中发现了这个文本，它不在在线手册页中：

> 如果一个进程使用 open(2) （或类似方法）为同一个文件获取多个描述符，这些描述符将由flock() 独立处理。使用这些文件描述符之一锁定文件的尝试可能会被调用进程已通过另一个描述符放置的锁定拒绝。

我对“可能被拒绝”这个词不满意，我更喜欢“将被拒绝”，但我想是时候测试一下了。

# javascript - Javascript没有在IE中缓存？

> ID：14963352
> 
> 赞同：0
> 
> 时间：2013-02-19T17:09:41.097
> 
> 标签：javascript, internet-explorer

我只在 IE 上遇到过这个问题。从我设法将问题缩小到的范围内，看起来 javascript 只是没有在其中缓存。清除缓存后，所有功能都可以使用，但在那之后，如果我关闭浏览器并将其重新打开到站点，一切都会恢复到无法使用的状态。

这是一个 IE 错误还是我在这里走错了路，就像它不是缓存还是不是我想的那样？

# c# - 动态生成 XML 节点

> ID：14963355
> 
> 赞同：1
> 
> 时间：2013-02-19T17:09:46.323
> 
> 标签：c#, asp.net, .net, xml

我正在调用 API，并且必须在 C# 中使用不同节点中的数据发送 xml 请求。如何动态地制作 xml 并在增量命名中使用节点。

例如

```
<?xml version="1.0" encoding="UTF-8" ?>
<addCustomer>
    <FirstName_1>ABC</FirstName_1>
    <LastName_1>DEF</LastName_1>
    <FirstName_2>GSH</FirstName_2>
    <LastName_2>ADSF</LastName_2>
</addCustomer> 
```

问题是使 xml 节点具有增量名称，如 FirstName_1、FirstName_2、FirstName_3 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:20:01.083

一个客户会有多个名字和多个姓氏吗？如果每个 FirstName 和 LastName 对代表不同的客户，那么您的 xml 应该看起来像......

```
<?xml version="1.0" encoding="UTF-8" ?>
<AddCustomers>
     <Customer>
          <FirstName>ABC</FirstName>
          <LastName>DEF</LastName>
     </Customer>
     <Customer>
          <FirstName>GSH</FirstName>
          <LastName>ASDF</LastName>
     </Customer>
</AddCustomers> 
```

如果您绝对必须按照您在示例中的方式进行操作，那么除了仅使用 string_builder 并在 for 循环中自己创建它同时增加整数以添加到每个末尾之外，我看不到任何方法可以做到这一点名字和姓氏属性。这并不是 xml 应该如何工作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:59:39.490

我知道你的痛苦；不得不处理 3rd 方 API 可能会很痛苦。

而不是使用`StringBuilder`你可以使用`XElement`.

```
public void AddCustomerInfo(string firstName, string lastName, int index, XElement root)
{
    XElement firstNameInfo = new XElement("FirstName_" + index);
    firstNameInfo.Value = firstName;

    XElement lastNameInfo = new XElement("LastName_" + index);
    lastNameInfo.Value = lastName;

    root.Add(firstNameInfo);
    root.Add(lastNameInfo);
} 
```

然后调用函数如下：

```
XElement rootElement = new XElement("addCustomer");
AddCustomerInfo("ABC", "DEF", 1, rootElement); 
```

把那条线放在一个循环中，你就准备好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:46:51.657

我认为最简单的解决方案在这里是最好的：

假设您有一组称为客户的客户对象...

```
StringBuilder xmlForApi = new StringBuilder();
int customerCounter = 1;
foreach(Customer c in Customers)
{
    xmlForApi.AppendFormat("<FirstName_{0}>{1}</FirstName_{0}><LastName_{0}>{2}</LastName_{0}>", customerCounter, c.FirstName, c.LastName)
    customerCounter++;
} 
```

# asynchronous - 如何在子进程中进行连续 DWR 调用

> ID：14963364
> 
> 赞同：0
> 
> 时间：2013-02-19T17:10:04.167
> 
> 标签：asynchronous, sync, dwr

嗨，我想进行嵌套 dwr 调用。

在我的 java 代码中，我有两个功能

```
public String getNetworks() {
   // return some networks. 
}

public String getInternalNetwork(network) {
   // return some networks. 
} 
```

我想进行链式 dwr 调用。

```
myDwr.getNetworks({
  callback: function() {
       var network
      /// parse out answer. 
      myDwr.getInternalNetwork(network, {
      callback:function() {
      });
  }   
}); 
```

我该怎么做才能按顺序进行 dwr 调用，并执行两个函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:19:23.450

我的回答是将网络存储在不同的呼叫中。

```
DWREngine.beginBatch();
myDwr.getNetworks({
   callback: function(networks) {
       network = getMainNetwork(networks);
   }
});
myDwr.getInternalNetwork(network, {
   callback: function() {
   }
});
DWREngine.endBatch(); 
```

# java - Android 应用程序的标准 Git 子模块文件夹结构是什么？

> ID：14963365
> 
> 赞同：1
> 
> 时间：2013-02-19T17:10:07.350
> 
> 标签：java, android, git, git-submodules

我正在开发一个 Android 应用程序，该应用程序将使用我计划作为子模块导入的数十个开源库。我应该把这些子模块放在哪里？

现在我有：

```
/myapp
  /res
  /src
  /libs
  /assets
  ...
  ...
/libs 
```

所有子模块都在库下。我不确定是否有一种“最佳”方式来构建您的子模块文件夹，但我想知道那里的标准是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:50:38.133

> 我不确定是否有一种“最佳”方式来构建您的子模块文件夹，但我想知道那里的标准是什么。

没有我知道的标准。[另一个问题](https://stackoverflow.com/questions/5423468/how-do-i-setup-my-git-repositories-for-android-development-in-eclipse)将所有项目置于同一水平。

唯一的标准是[在 Android 项目中忽略更多文件](https://github.com/github/gitignore/blob/master/Android.gitignore)。

# html - 页脚覆盖内容 HTML

> ID：14963367
> 
> 赞同：0
> 
> 时间：2013-02-19T17:10:15.683
> 
> 标签：html

我试图弄清楚为什么我的`<div>`元素没有扩展到涵盖它包含的所有内容。当我按下 Shift+Ctrl+J 时，我在 Google Chrome 的“元素”视图中看到了这一点。我希望我的“内容” div 的大小可以包含`<p>A</p>`and `<p>B</p>`，但事实并非如此。

PS--我读过一些评论说页脚通常是绝对定位的，但这只是为了显示错误。

**这是简化的页面：**

```
<html>

  <head>
    <style type="text/css">
      #footer{
      background-color: lightblue;
      margin-top: 10px;
      }
    </style>

  </head>

  <body>

    <div id="content" align="center">
      <div style="width:50%;">
        <p align="left">
          Two divs:
          <div style="width:80%; float:left;"><p>A</p></div>
          <div style="width:20%; float:right;"><p>B</p></div>
        </p>
      </div>
    </div>

    <div id="footer" align="center">
      <div style="width:90%;" align="center">
        Here is my footer.
      </div>
    </div>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:19:57.517

添加

```
<div style="clear:both"></div> 
```

后

```
<div style="width:80%; float:left;"><p>A</p></div>
<div style="width:20%; float:right;"><p>B</p></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:16:18.687

将此添加到CSS：

```
#content { overflow: hidden; } 
```

# asp.net - 在 Win8 上的 IE10 中未调用 Facebook 登录回调并且弹出窗口不会关闭

> ID：14963369
> 
> 赞同：0
> 
> 时间：2013-02-19T17:10:21.570
> 
> 标签：asp.net, facebook, facebook-javascript-sdk

对于我的 Facebook 应用程序，Facebook.login 对话框在登录 facebook 并授予权限后不会关闭。我尝试了一个带有间隔和 FB.getLoginStatus 的解决方法，但即使我已授予权限并且该应用程序出现在我的帐户设置中，此响应也只会返回“not_authorized”。

我的页面上有以下标签：

```
<meta http-equiv="X-UA-Compatible" content="IE=9">
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

[元标记似乎不是类似问题中描述的问题](http://facebook.stackoverflow.com/questions/11529942/facebook-login-popup-wont-close-in-ie10-on-windows-8)

```
FB.init({
        appId: 'xxxxxxxxxxxxx', 
        status: false,
        channelUrl: 'My_Channel_File.html'
    }); 
```

频道文件包含与上面相同的脚本标签。我改变了很多其他参数：oauth、xfbml、cookie、状态和摩擦请求（我在其他地方看到过）

这个问题只出现在Win8和IE10上

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:05:49.763

~~我解决了这个问题。您需要异步初始化 FB-jssdk：~~

 ~~```
window.fbAsyncInit = function () {
    FB.init({
        appId: 'xxxxxxxxxxxxxx',
        status: true,
        cookie: true,
        xfbml: true
    });
};

(function (d) {
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) { return; }
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document)); 
```~~ 

~~无论出于何种原因，当您这样做时，FB.login 的对话框都会按预期关闭，一切正常=）~~

**编辑：** 问题是必须在 IE 中更改的安全属性：
Internet-properties -> 安全 -> 必须启用底部“安全模式”上的复选框，然后它也可以使用同步作为异步 FB.init
（我是德国人，所以我不知道英文属性名称）

# google-maps-api-3 - 谷歌地图标记没有被替换

> ID：14963370
> 
> 赞同：0
> 
> 时间：2013-02-19T17:10:24.030
> 
> 标签：google-maps-api-3, onclicklistener, markers

请原谅一个菜鸟。当用户点击地图时，它应该放置一个标记并打开一个信息窗口 - 按照这个例子：[http](http://www.geocodezip.com/v3_example_click2add_infowindow.html) ://www.geocodezip.com/v3_example_click2add_infowindow.html 下面的代码几乎可以正常工作，除了标记不是替换 - 添加一个新的。任何想法都非常非常感激地收到。谢谢你。

```
<script>
    var map = null;
    var markersArray = [];

    function initialize() {
        var latlng = new google.maps.LatLng(0.0000, 0.0000);

        var settings = {
            zoom: 2,
            mapTypeControl:true,
            center: latlng,
            panControl:true,
            zoomControl:true,
            streetViewControl:false,
            overviewMapControl:false,
            rotateControl:true,
            scaleControl: true,
            navigationControl: true,
            navigationControlOptions: {
                style: google.maps.NavigationControlStyle.DEFAULT
            },
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            backgroundColor: 'white'
        };

        map = new google.maps.Map(document.getElementById('map'), settings);

        function placeMarker(location) {
        var marker , i ;
        if ( marker ) {
                marker.setPosition(location);
            } else {
                marker = new google.maps.Marker({
            position: location,
            icon:'http://www.desperatesailors.com/templates/Live/media/mapicons/info.png',
            map: map
            });
            var infowindow = new google.maps.InfoWindow({
                content: 'Latitude: ' + location.lat() +
                    '<br>Longitude: ' + location.lng() +
                    '<br>Only the first four decimal places needed'
            });
            infowindow.open(map,marker);
            }
        }

        google.maps.event.addListener(map, 'click', function(event) {
        placeMarker(event.latLng);
        });
    }

    window.onload = initialize;
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:16:41.663

您的 placeMarker 函数在本地范围内创建一个新的（空）标记变量。

```
function placeMarker(location) {
    var marker , i ;
    if ( marker ) { 
```

它总是会创建一个新的标记。将其更改为：

```
var marker = null;
function placeMarker(location) {
    if ( marker ) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:20:03.623

这是一个范围问题。您总是在 placeMarker 函数中删除标记，因此 if(marker) 将始终为假。将变量声明移出该函数：

```
<script>
    var marker;
    var map = null;
    var markersArray = [];

    function initialize() {
        var latlng = new google.maps.LatLng(0.0000, 0.0000);

        var settings = {
            zoom: 2,
            mapTypeControl:true,
            center: latlng,
            panControl:true,
            zoomControl:true,
            streetViewControl:false,
            overviewMapControl:false,
            rotateControl:true,
            scaleControl: true,
            navigationControl: true,
            navigationControlOptions: {
                style: google.maps.NavigationControlStyle.DEFAULT
            },
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            backgroundColor: 'white'
        };

        map = new google.maps.Map(document.getElementById('map'), settings);

        function placeMarker(location) {
        var i ;
        if ( marker ) {
                marker.setPosition(location);
            } else {
                marker = new google.maps.Marker({
            position: location,
            icon:'http://www.desperatesailors.com/templates/Live/media/mapicons/info.png',
            map: map
            });
            var infowindow = new google.maps.InfoWindow({
                content: 'Latitude: ' + location.lat() +
                    '<br>Longitude: ' + location.lng() +
                    '<br>Only the first four decimal places needed'
            });
            infowindow.open(map,marker);
            }
        }

        google.maps.event.addListener(map, 'click', function(event) {
            placeMarker(event.latLng);
        });
    }

    window.onload = initialize;
</script> 
```

# android - 导入org.andengine.BuildConfig无法解析，无法安装AndEngine

> ID：14963371
> 
> 赞同：1
> 
> 时间：2013-02-19T17:10:30.440
> 
> 标签：android, andengine, adt

我在安装 AndEngine GLS2 时遇到问题，这一行

```
 import org.andengine.BuildConfig; 
```

显示错误“import org.andengine.BuildConfig;” 我读过论坛，但那里写道：对于最后一个 AndEngine GLS2，你需要 ADT 17。但我使用最后一个 ADT 21，但它显示了这个错误你能告诉我如何解决它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:10:23.860

前几天我在更新我的eclipse版本时遇到了这个问题。BuildConfig 应该是自动生成的，您不需要查找或创建该类。重新启动 Eclipse 并选择 Project --> Clean 为我修复了它。如果这仍然不起作用，您可能只需要简单地安装 AndEngine。

# wpf - 如何使用 WPF ListBox 或 ScrollView 显示下 n 个项目？

> ID：14963373
> 
> 赞同：1
> 
> 时间：2013-02-19T17:10:34.743
> 
> 标签：wpf, listbox, wpf-controls, scrollview

我有 10 个项目的列表框。默认情况下启用垂直滚动，我可以看到前 3 个项目。客户希望我添加 2 个按钮“向上”和“向下”，并且在按钮单击列表框上应显示接下来的 3 个项目。

例如，我想通过“向下”单击项目 4、项目 5、项目 6 来显示。

![在此处输入图像描述](../Images/a449181e94d5097214e897f4a3f86fa5.png)

如何使用默认的 WPF 控件列表框和滚动视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:34:31.950

您可以使用`ScrollViewer.ScrollToVerticalOffset`方法（[msdn](http://msdn.microsoft.com/en-us/library/system.windows.controls.scrollviewer.scrolltoverticaloffset.aspx)）。

例子：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="20" />
        <RowDefinition Height="50" />
        <RowDefinition Height="20" />
        <RowDefinition Height="25" />
    </Grid.RowDefinitions>

    <Button x:Name="btnUp" Content="UP" Click="btnUp_Click" />

    <ScrollViewer x:Name="scroll" Grid.Row="1">
        <ListBox x:Name="lbData">
            <ListBoxItem>Item1</ListBoxItem>
            <ListBoxItem>Item2</ListBoxItem>
            <ListBoxItem>Item3</ListBoxItem>
            <ListBoxItem>Item4</ListBoxItem>
            <ListBoxItem>Item5</ListBoxItem>
            <ListBoxItem>Item6</ListBoxItem>
            <ListBoxItem>Item7</ListBoxItem>
            <ListBoxItem>Item8</ListBoxItem>
            <ListBoxItem>Item9</ListBoxItem>
            <ListBoxItem>Item10</ListBoxItem>
        </ListBox>
    </ScrollViewer>

    <Button x:Name="btnDown" Content="Down" Click="btnDown_Click" Grid.Row="2" />

    <StackPanel Grid.Row="3" Orientation="Horizontal">
        <TextBlock Text="Start with:" Margin="2" />
        <ComboBox x:Name="cbIndex" Loaded="cbIndex_Loaded" Margin="2" />
        <Button x:Name="btnGo" Content="GO" Click="btnGo_Click" Margin="2" />
    </StackPanel>
</Grid> 
```

代码隐藏：

```
private void btnUp_Click(object sender, RoutedEventArgs e)
{
    scroll.ScrollToVerticalOffset(scroll.VerticalOffset - 50);
}

private void btnDown_Click(object sender, RoutedEventArgs e)
{
    scroll.ScrollToVerticalOffset(scroll.VerticalOffset + 50);
}

public double GetOffset(int itemIndex)
{
    double result = 0;           
    for (int i = 0; i < itemIndex; i++)
    {
        result += (lbData.Items[i] as ListBoxItem).ActualHeight;
    }

    return result;
}

private void cbIndex_Loaded(object sender, RoutedEventArgs e)
{
    cbIndex.ItemsSource = Enumerable.Range(1, lbData.Items.Count);
}

private void btnGo_Click(object sender, RoutedEventArgs e)
{
    scroll.ScrollToVerticalOffset(GetOffset(cbIndex.SelectedIndex));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T15:54:52.660

水平列表的解决方案：

```
/// <summary>
        /// Show next n items starting from first visible.
        /// </summary>
        public void ShowNext()
        {
            if (this.scrollviewer == null)
            {
                return;
            }

            var rightLimit = this.scrollviewer.HorizontalOffset + this.scrollviewer.ViewportWidth;
            double horizontalOffset = 0;

            foreach (var item in this.Items)
            {
                var container = this.ItemContainerGenerator.ContainerFromItem(item) as FrameworkElement;
                if (container == null)
                {
                    continue;
                }

                if (horizontalOffset + container.ActualWidth >= rightLimit)
                {
                    // We found last item offset
                    break;
                }

                horizontalOffset += container.ActualWidth;
            }

            this.scrollviewer.ScrollToHorizontalOffset(horizontalOffset);
        }

        /// <summary>
        /// Show previous n items starting last visible item.
        /// </summary>
        public void ShowPrevious()
        {
            if (this.scrollviewer == null)
            {
                return;
            }

            double horizontalOffset = 0;
            foreach (var item in this.Items)
            {
                var container = this.ItemContainerGenerator.ContainerFromItem(item) as FrameworkElement;

                if (container == null)
                {
                    continue;
                }

                horizontalOffset += container.ActualWidth;
                if (horizontalOffset >= this.scrollviewer.HorizontalOffset)
                {
                    // We found last item offset
                    break;
                }
            }

            horizontalOffset -= this.scrollviewer.ViewportWidth;
            this.scrollviewer.ScrollToHorizontalOffset(horizontalOffset);
        } 
```

此代码将显示列表框中上次可见的下一个\上一个项目。

# c# - 访问以前编译的方法的 C# 脚本

> ID：14963378
> 
> 赞同：0
> 
> 时间：2013-02-19T17:10:57.697
> 
> 标签：c#, mono

我希望将我目前拥有的脚本解决方案转移到 C#，因为我相信这将解决我目前在不同平台上运行时面临的一些问题。我可以调用脚本中的函数并访问它们的变量，但是，我想做的一件事是从脚本所在的类中调用一个函数。有谁知道我能怎么做这？

这是我目前用于调用和访问脚本中的对象的代码，但我希望能够从脚本中调用“调用”方法，但不能：

```
using System;
using System.CodeDom.Compiler;
using System.Collections.Generic;
using System.Reflection;
using Microsoft.CSharp;

namespace scriptingTest
{
    class MainClass
    {
        public static void Main (string[] args)
        {
            var csc = new CSharpCodeProvider ();

            var res = csc.CompileAssemblyFromSource (
                new CompilerParameters ()
                {
                    GenerateInMemory = true
                },
                @"using System; 
                    public class TestClass
                    { 
                        public int testvar = 5;
                        public string Execute() 
                        { 
                            return ""Executed."";
                        }
                    }"
            );

            if (res.Errors.Count == 0) {
                var type = res.CompiledAssembly.GetType ("TestClass");
                var obj = Activator.CreateInstance (type);
                var output = type.GetMethod ("Execute").Invoke (obj, new object[] { });
                Console.WriteLine (output.ToString ());

                FieldInfo test = type.GetField ("testvar");
                Console.WriteLine (type.GetField ("testvar").GetValue (obj));
            } else {
                foreach (var error in res.Errors)
                    Console.WriteLine(error.ToString());
            }
            Console.ReadLine ();
        }

        static void Called() // This is what I would like to be able to call
        {
            Console.WriteLine("Called from script.");
        }
    }
} 
```

我正在尝试在 Mono 中执行此操作，但是，我认为这不会影响解决方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:37:29.040

你需要改变一些事情。

`MainClass`并且`Called`需要其他程序集可以访问，因此请制作它们`public`。此外，您需要添加对当前程序集的引用才能在脚本代码中访问它。所以基本上你的代码最终看起来像：

`public class MainClass`

`public static void Called()`

```
var csc = new CSharpCodeProvider();
var ca = Assembly.GetExecutingAssembly();
var cp = new CompilerParameters();

cp.GenerateInMemory = true;
cp.ReferencedAssemblies.Add("System.dll");
cp.ReferencedAssemblies.Add("mscorlib.dll");
cp.ReferencedAssemblies.Add(ca.Location);

var res = csc.CompileAssemblyFromSource(
    cp,
    @"using System; 
        public class TestClass
        { 
            public int testvar = 5;
            public string Execute() 
            { 
                scriptingTest.MainClass.Called();
                return ""Executed."";
            }
        }"
); 
```

运行测试的输出如下所示：

从脚本调用。
执行。
5

# linux - 如何将默认 bash/zsh 模式设置为 vi 命令模式而不是 vi 插入模式？

> ID：14963382
> 
> 赞同：7
> 
> 时间：2013-02-19T17:11:07.583
> 
> 标签：linux, bash, shell, zsh

所以在我的 bash/zsh 终端中，我有`set -o vi`. 但后来我需要按 ESC 进入命令模式。我不知道如何使该命令模式成为默认行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T09:07:26.917

您可以使用“xdotool”实现该行为。安装它并将其添加到您的 ~/.bashrc 然后

```
set -o vi
xdotool key Escape 
```

# .net - 在实体框架和 Oracle 客户端之间共享 oracle 事务

> ID：14963384
> 
> 赞同：1
> 
> 时间：2013-02-19T17:11:13.983
> 
> 标签：.net, oracle, entity-framework, ado.net, transactions

我正在使用一个遗留应用程序，该应用程序通过`System.Data.OracleClient`使用`OracleTransaction`如下方式访问 Oracle 数据库：

```
Public Sub ExecuteOracleSql(ByVal sql As String)
        Dim oCmd As New OracleCommand(sql, _dbConnection)
        Try
            oCmd.Transaction = _transaction 'OracleTransaction
            oCmd.ExecuteNonQuery()
        Finally
            oCmd.Dispose()
        End Try
    End Sub 
```

从那以后，我们决定所有新的开发都将通过实体框架进行，但是我们希望加入到遗留代码正在使用的同一事务中。

经过一些研究，我发现了该`ObjectContext.Connection.EnlistTransaction()`方法，但是它接受 a`System.Transaction.Transaction`而不是`OracleTransaction`上面的 a 。

因此是否可以在遗留代码和 EF 之间共享事务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:05:46.627

事实证明，这样做的方法是通过访问您的连接`ObjectContext`并将其转换为`EntityConnection`. 这样做可以让您使用普通的旧 ADO.NET（这正是我所需要的）。

```
 var lines = new BillLines.BillLines(); //This is the object context

    var conn = ((EntityConnection) lines.Connection).StoreConnection;
    conn.Open();

    var cmd = conn.CreateCommand();
    cmd.CommandText = sql;

    using (var reader = cmd.ExecuteReader())
    {
       //Access your data here
    }

    conn.Close(); 
```

# sql - 实体框架和迁移 - 如何在远程服务器上更新我的数据库？

> ID：14963388
> 
> 赞同：5
> 
> 时间：2013-02-19T17:11:21.457
> 
> 标签：sql, asp.net-mvc, entity-framework, entity-framework-4, migration

我为我的实体框架应用程序启用了迁移。现在，我想更新我的远程服务器上的数据库。我运行了这个命令：

```
PM> Update-Database -Script 
```

所以它生成了一个sql脚本。但是，这个脚本包含了我在数据库中实际拥有的所有元数据，而不是所做的更改；所以，当我尝试在我的远程服务器上运行这个 sql 脚本时，它说表已经存在。

我如何生成只包含必要更新的 sql 脚本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T17:17:32.133

您可以为此指定特定的迁移。如果您有一个名为 Foo 的迁移，例如：

```
Update-Database -TargetMigration Foo -Script 
```

它将为 Foo 迁移生成一个迁移脚本。将 Foo 替换为您需要在该服务器上运行的任何迁移。

```
Add-Migration InitialMigration
Add-Migration AddCustomers
Add-Migration AddProjects 
```

假设您的项目中有上述三个迁移，并且您的本地数据库已应用所有这些迁移，但远程数据库只有 InitialMigration。您可以运行以下命令：

```
Update-Database -SourceMigration InitialMigration -TargetMigration AddProjects -Script 
```

这将在远程服务器上应用两个迁移（AddCustomers 和 AddProjects）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T03:25:48.803

如果您可以通过远程桌面访问服务器，则可以执行命令行迁移工具，该工具通常位于 [projectFolder]/packages/EntityFramework.5.0.0/tools/migrate.exe

并这样称呼它：

```
Migrate.exe [StartupProjectName] /StartupDirectory:"[BIN folder path]" /ConnectionStringName:"[Connection String Name]" /StartupConfigurationFile:"[Path to web or app.config]" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-07T15:50:18.183

当您部署应用程序的新版本时，您可以使用 MigrateDatabaseToLatestVersion Initializer 自动应用任何新迁移：

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<MyDbContext, Configuration>()); 
```

# .htaccess - 自定义 404 错误页面正在生成 500 错误

> ID：14963392
> 
> 赞同：0
> 
> 时间：2013-02-19T17:11:40.683
> 
> 标签：.htaccess, http-status-code-404, errordocument, custom-error-handling

出于安全原因，我让所有 php 文件生成 404 错误，然后使用自定义 404 错误页面，如下所示：

```
RewriteCond %{THE_REQUEST} \.php[\ /?].*HTTP/
RewriteRule ^.*$ - [R=404,L]

ErrorDocument 404 /error.html 
```

我去的任何 php 脚本都会返回一个自定义的 404 错误页面，如我所愿，但在下面它说：

> 此外，在尝试使用 ErrorDocument 处理请求时遇到 500 Internal Server Error 错误。

但是当我转到一个实际上不存在的页面时（比如说`http://localhost/Hello/world.html`），我得到了我想要的错误页面。

我很困惑，我做错了什么。另外，我希望能够为我的自定义使用 php 页面`ErrorDocument`，但我不确定这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:36:47.530

您应该尝试重定向匹配：

```
RedirectMatch 404 ".*\.php" 
```

这将传递 Not Found 错误，并抛出适当的`ErrorDocument`.

# html - 滚动时我的身体背景颜色消失了

> ID：14963393
> 
> 赞同：6
> 
> 时间：2013-02-19T17:11:41.517
> 
> 标签：html, css, vertical-scrolling, document-body

我希望有人能帮帮忙。我已将我的 body height 属性设置为 100%，当所有内容同时显示在屏幕上时，这很好。但是，当我需要滚动（最小化窗口时）时，主体颜色会消失，只留下我为 HTML 背景设置的颜色。有人知道解决方案吗？

```
html {
  background-color: #07ade0;
}

body {
  background-color: #7968ae;
  width: 900px;
  margin-left: auto;
  margin-right: auto;
  font: 20px verdana, "sans serif", tahoma;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T17:13:34.253

如果您的 body 设置为`height: 100%`，那么它将是窗口的 100%，这并不理想，因为正如您所提到的，较长页面上的背景会被截断。去掉 height 属性，你应该被设置。

你也可以同时设置`height: 100%`，`html, body`然后在你的`body`. 然后将您的`html`样式移至`body`，并将您的`body`样式移至新容器。

`body`这是首选，因为在元素上设置像素宽度通常不是最佳实践。

**HTML**

```
<body>
  <div id="container">Your well-endowed content goes here.</div>
</body> 
```

**CSS**

```
html, body {
  height: 100%;
}
body {
  background: #07ade0;
}
#container {
  background: #7968ae;
  width: 900px;
  margin-left: auto;
  margin-right: auto;   
  font: 20px verdana, "sans serif", tahoma;
  overflow: hidden;
} 
```

见[**演示**](http://jsfiddle.net/zaknotzak/TVdxK/2/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T17:41:32.437

尝试改变`height`你`min-height`的身体元素。这会使 body 元素 100% 是内容太短而无法填满整个内容，并在内容大于浏览器时增长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-09T10:03:00.550

**当页面上没有内容时，接受的答案并不能解决问题，那么该列将根本不可见。**

最终奏效的解决方案是引入包装器并添加`display: table;`

我的解决方案不仅在有内容时用背景颜色覆盖列，而且在没有内容时也覆盖。

[http://jsfiddle.net/h83gtmbc/6/](http://jsfiddle.net/h83gtmbc/6/)

```
html, body {
    height: 100%;
}
body {
    background: #07ade0;
    padding: 0;
    margin: 0;
}

#wrapper {
height: 100%;  
}

#container {
    background: #7968ae;
    width: 900px;
    margin-left: auto;
    margin-right: auto; 
    font: 20px verdana, "sans serif", tahoma;

    overflow: hidden;
    height: 100%;
    display: table;
}
```

```
<div id="wrapper">
<div id="container">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec aliquam malesuada lectus in ornare. Nam et turpis magna, eget hendrerit nisi. Sed tincidunt felis pulvinar neque hendrerit eu sollicitudin nulla iaculis. Praesent convallis mattis magna, et tempor sapien euismod molestie. Praesent metus nisl, varius in vulputate vel, vestibulum at eros. In hac habitasse platea dictumst. Vivamus vitae turpis lectus. Praesent at tortor sit amet est lacinia porta. Duis sit amet nunc sem. Nam vel sapien a ligula vulputate sollicitudin sed at eros. Nam non urna felis. Ut quis euismod ligula. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nullam felis lectus, vestibulum et fringilla in, elementum ut libero. Integer rutrum nibh a nulla pulvinar nec fermentum justo dapibus.

Integer ut massa ut diam accumsan pulvinar vitae ut metus. Nullam consectetur porttitor nunc, ac malesuada erat rhoncus a. Morbi laoreet vehicula lacinia. Aliquam pellentesque lacus non tellus fringilla at condimentum est condimentum. Sed consequat venenatis dui id egestas. Aliquam suscipit cursus odio non dictum. Mauris ipsum sapien, luctus quis pretium ac, suscipit sit amet neque. Mauris iaculis rutrum dui in lobortis.

Donec sem enim, tempor non cursus at, aliquam pretium ligula. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Duis in suscipit neque. Vivamus ac augue pulvinar augue condimentum iaculis. Quisque vel augue dolor. Mauris sollicitudin porttitor tristique. Duis consectetur volutpat egestas. Donec quis tortor justo, ac accumsan ligula. Morbi sit amet magna diam. Mauris lectus ante, cursus nec bibendum ac, mattis ultricies nulla. Aliquam dui odio, elementum quis faucibus ac, tristique vel felis. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae;

Pellentesque velit velit, dapibus imperdiet ullamcorper in, dapibus sed libero. Cras dapibus, dui in tincidunt feugiat, lacus tellus suscipit urna, nec fermentum ipsum massa eu quam. Sed nisl quam, dictum eget tempus id, ullamcorper quis libero. Suspendisse rutrum pretium tellus ac semper. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Quisque imperdiet dui quis dui euismod aliquet. Etiam sit amet semper dolor. Donec et mattis tellus. Proin ac mi risus. Aenean sit amet nunc scelerisque neque egestas adipiscing non eu diam.

Quisque feugiat scelerisque commodo. Sed tellus nulla, fermentum a rutrum ut, vulputate et turpis. Proin at libero quis metus pellentesque dapibus. Proin nec pretium orci. Pellentesque bibendum mollis lacus vel faucibus. Integer malesuada, dolor quis iaculis laoreet, velit mi mattis turpis, vestibulum lacinia augue felis ac erat. Etiam tristique turpis sit amet nibh adipiscing vel bibendum metus vulputate. Integer mattis nulla metus, vitae viverra nisl.</div>
</div>
```

看到当你删除内容时 - 列仍然伸展全高

# animation - 如何设置 EaselJS 图形和形状的 z-index

> ID：14963398
> 
> 赞同：14
> 
> 时间：2013-02-19T17:11:52.117
> 
> 标签：animation, canvas, vector-graphics, easeljs, createjs

我在画布上有 EaselJS 形状，然后我开始在每个刻度上绘制图形。目前，图形正在形状上绘制。有没有办法定义 z-index 以便在每一帧的图形上绘制形状？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-12-17T21:44:19.283

要`DisplayObject`在插入后将一个放在前面，只需使用以下命令：

```
stage.setChildIndex( displayObject, stage.getNumChildren()-1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T18:59:23.060

Canvas API[没有内置的场景图](http://en.wikipedia.org/wiki/Canvas_element)。一旦绘制了某些东西，它被绘制的事实就被遗忘了，并且没有与画布相关联的对象的引用。这意味着，如果对象发生更改，则可能需要重新绘制整个画布。

因此，如果您需要在 Graphics 对象之上绘制 Shape 对象，只需在绘制 Shapes 之前绘制 Graphics。每次重绘图形时都需要重绘图形。

您还可以将 Shapes 和 Graphics 都放入[Container](http://www.createjs.com/Docs/EaselJS/classes/Container.html)中，并使用 Container 的[索引](http://www.createjs.com/Docs/EaselJS/classes/Container.html#method_setChildIndex)来控制对象的呈现顺序。

* * *

**编辑**：正如[@stot 的回答](https://stackoverflow.com/a/27535372/716118)所指出的，事实证明舞台本身可用于管理子索引。这是因为 Stage 扩展了 Container 类，因此继承了该类的方法。

# java - 在 Java 项目中引用 .dat 文件

> ID：14963399
> 
> 赞同：1
> 
> 时间：2013-02-19T17:11:53.997
> 
> 标签：java, eclipse, path, filereference

我正在努力在 Eclipse 的 java 项目中引用 .dat 文件。我的文件结构如下所示：

![在此处输入图像描述](../Images/47412e89207b83298b55da958661088c.png)

我正在尝试从我的“LookupCountry.java”文件中引用“GeoIPLite.dat”。当我说“引用”时，我实际上是指获取路径的字符串对象，然后将其作为参数发送到位于 jar 中的“引用库”下的类。

我在 LookupCountry.java 中的代码如下：

```
try{
    String dbFile = "../resources/GeoIPLite.dat"

    // TRIED ALL THESE AS WELL:
    //String dbFile = "/../resources/GeoIPLite.dat"
    //String dbFile = "/resources/GeoIPLite.dat"
    //String dbFile = "resources/GeoIPLite.dat"

    //Some more code calling the jar file......

}catch(IOException e){
    //Handles exception
} 
```

所以基本上我得到一个从 jar 中抛出的 IOException ，说 .dat 文件的路径不正确。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:19:42.447

`resource`在文件夹中使用与在文件夹中相同的包结构`src`。将您的资源文件夹添加为 Eclipse 中的源文件夹（参见屏幕截图）。将 .dat 文件放在资源文件夹中，相对于要使用它的类。你应该看到你的资源文件，然后是你编译的类。

在您的代码中，像这样引用资源文件：

```
this.getClass().getResource("foo.txt"); 
```

![在此处输入图像描述](../Images/0be9d81f90d63b61749ad1269ce10fcb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:16:58.110

例如，在 Eclipse 中，当您运行一个类时，您可以将其配置为“当前文件夹”的位置。从菜单中：Run > Run Configuration ... 并选择您正在使用的那个。

然后单击“参数”选项卡并检查工作目录。

![在此处输入图像描述](../Images/fc3c31a5ebd5bc5db26f5eebf1ecf335.png)

您的路径应该相对于那里显示的位置。（在剪辑的图像中，它显示了默认值，即项目本身的基本文件夹。）

`new File("resources/GeoIPLite.dat")`您将像使用默认工作目录一样打开该文件。

# data-mining - 声明式数据挖掘：频繁项集平铺

> ID：14963408
> 
> 赞同：1
> 
> 时间：2013-02-19T17:12:15.283
> 
> 标签：data-mining, declarative, constraint-programming

对于我的计算机科学研究课程，我必须提出一组约束和分数定义，才能找到用于频繁项集挖掘的平铺。包含数据的矩阵由 1 和 0 组成。

我的任务是提出一组用于平铺的约束（具有固定数量的平铺），以及需要最大化的得分函数。由于我开始制定允许重叠图块的解决方案，因此我试图找到一个得分函数来计算所有图块的总“面积”。请记住，必须针对每个可能的解决方案评估得分函数，因此我不能简单地查看整个矩阵（包含大约 100k 个元素）并查看它是否是图块的一部分。但是，我只考虑了 2 个图块之间的重叠，并得出以下结论：

TotalArea = Sum_a_in_Tiles(Area(a)) - Sum_a/b_in_tiles(Overlap(a,b))

愚蠢的我，我没有考虑3个瓷砖之间可能的重叠。我的问题如下：是否可以为 n 个图块提出一个通用的得分函数，只考虑每个图块的面积和 2 个（或更多）图块之间的每个重叠面积，如果是这样，我将如何编程？

我可以提供一些代码，但又必须用一种叫做 Comet 的晦涩语言进行编程 :(

# css - jQuery UI：放入相对定位的容器中

> ID：14963409
> 
> 赞同：1
> 
> 时间：2013-02-19T17:12:18.100
> 
> 标签：css, jquery-ui

我正在使用 jQuery UI 将对象的克隆拖到可放置空间上。但是，我需要可放置空间来拥有该`position: relative`属性，因为可放置空间会滚动，并且我希望放置的元素随之滚动。但是，当我放下克隆时，它会向下并向右跳，而不是停留在我放下它的地方。我将如何与之抗争？

这是一个演示我的问题的小提琴：http: [//jsfiddle.net/nEN7h/42/](http://jsfiddle.net/nEN7h/42/)

编辑：根据我的评论更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T19:38:29.187

试试这个

```
$(".canvas").droppable({
    accept: '.to_drag',
    drop: function(event, ui) {
        var clone = $(ui.helper).clone();
        var parent = $('.canvas.ui-droppable');

        $(this).append(clone);
        var leftAdjust = clone.position().left - parent.offset().left;
        var topAdjust = clone.position().top - parent.offset().top;
        clone.css({left: leftAdjust, top: topAdjust});

    }
}); 
```

基本上这个想法是，当您将 droppable 包含在一个相对的 div 中时。任何包含在 droppable 中的元素都会不必要地添加父元素的偏移位置。所以您只需在 drop 回调函数中删除额外的偏移量。

请密切注意[.offset()](http://api.jquery.com/offset/)和[.position()](http://api.jquery.com/position/)之间的区别.. 这是理解上述代码的关键。

**注意：** 我尝试使用 jsfiddle .. 但是 jsfiddle 在定位方面有点摆弄.. 单独在您的浏览器上尝试它应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:35:51.323

这是一个解决方案，但我不确定，如果是这样，您正在寻找什么。

替换这一行：

```
$(this).append($(ui.helper).clone()); 
```

有了这个：

```
$('<div class="to_drag"></div>').appendTo(this); 
```

如果您不使用 ui.helper 它可以工作。

# jquery - 当 DropDownListFor 项目更改 ASP.Net MVC 时执行脚本

> ID：14963412
> 
> 赞同：0
> 
> 时间：2013-02-19T17:12:31.543
> 
> 标签：jquery, asp.net-mvc, dropdownlistfor

我有一个像这样的 DropDownListFor ：

```
 <div class="drop-down-list">
        <%: Html.DropDownListFor(model => model.StageId, ViewBag.StagesList as SelectList,new { @id="stageOne"})%>
        <%: Html.ValidationMessageFor(model => model.StageId) %>
    </div> 
```

当所选项目更改时，我需要在下面的代码中闪光，填充视图栏并填充另一个DropDownListfor。其实我想在 asp.net mvc 中构建两个级联的 DropDownListFor 。

```
 <script>
    $('#stageOne').change(function () {
        $.ajax({
            url: '/Shop/ChangeStageTwo/',
            data: { item: $("#drop-down-list").sortable('toString') },
            type: 'post',
            traditional: true 
        });

    });
  </script> 
```

但是当用户更改第一个 DropDownListFor 时，什么也没有发生。问题是什么？？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T17:21:05.470

正如 Michael_B 所说，我将代码更改为此，问题解决了：

```
 $(function () {
   $('#stageOne').change(function () {
        $.ajax({
            url: '/Shop/ChangeStageTwo/',
            data: { item: $("#drop-down-list").sortable('toString') },
            type: 'post',
            traditional: true 
        });

    });
 }); 
```

# r - 尝试在 R 中初始化多维向量

> ID：14963414
> 
> 赞同：2
> 
> 时间：2013-02-19T17:12:40.203
> 
> 标签：r, vector, initialization

我正在使用 knn 来估计随机数据，并且我正在从向量中选择不同的 k。每个 knn 返回一个长度为 200 的向量，我有 13 个 k，所以我需要在 for 循环之前初始化一个 13x200 的向量。我想做类似的事情

```
knn_train <- rep(0,1000) 
```

但是对于多维向量。

这是我的代码：

```
library(class)
library(MASS)
#List of k's for use in knn
k <- c(1,4,7,10,13,16,30,45,60,80,100,150,200)
#Generate identity matrix for sigmas 
sigma <- diag(2)
# Class 1
mu_green <- c(-.5,.5)
green_train <- mvrnorm(100, mu_green,sigma)
green_test <-  mvrnorm(100, mu_green,sigma)
#Class 0
mu_red <-c(-.2,.6)
red_train<- mvrnorm(100, mu_red,sigma)
red_test<- mvrnorm(100, mu_red,sigma)
#Bind test and train data
train <- rbind(green_train,red_train)
test <- rbind(green_test,red_test)
cl <- rbind(c(rep(1,100),rep(0,100)))

for(i in 1:length(k))
{
  #Train into train then train into test
  knn_train[i] = knn(train,train,cl,k[i],prob=TRUE)
  knn_test[i] = knn(train,test,cl,k[i],prob=TRUE)
  #First 100 are class 1, second 100 are class 2
  train_err[i]<- 100-sum(table(knn_train[i][1:100]))+sum(table(knn[i][100:200]))
  test_err[i]<- 100-sum(table(knn_test[i][1:100]))+sum(table(knn[i][100:200]))
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:25:38.243

初始化“多维向量”的常用方法是创建一个矩阵对象：

```
 knn_train <- matrix(NA, nrow=1000, ncol=13) 
```

如果要填充值，则：

```
 knn_train[ , i] <- # 13 element vector 
```

# android - 我可以调整 Android Navigation 代码库，以便可以在我的 android 上跟踪多个 gps 设备吗？

> ID：14963420
> 
> 赞同：0
> 
> 时间：2013-02-19T17:13:00.983
> 
> 标签：android, google-maps, gps

我想在 android 导航系统中添加一个功能，这样我就可以在 google 导航地图上同时实时跟踪我朋友的 android 设备和我的设备。

是否有任何可用的谷歌导航 api 或者我应该在源代码级别工作？如果是后者，我在哪里可以得到源代码？

谢谢， 亚绍提亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:27:03.607

我认为 Google 导航中没有类似 API 的东西。

但是您可以做的是在您的应用程序中使用[Maps API](http://developer.android.com/google/play-services/maps.html)，然后显示位置或您的设备和您的朋友。

您需要注意从朋友 GPS 获取数据一直到您的设备……这可能是您大部分工作的地方。

您需要处理的源代码是您自己的应用程序。

# .htaccess - 需要将旧网址重定向到新的友好网址

> ID：14963422
> 
> 赞同：0
> 
> 时间：2013-02-19T17:13:05.710
> 
> 标签：.htaccess, redirect

需要重定向

[http://www.mysite.com/product.php?id_product=216](http://www.mysite.com/product.php?id_product=216)

至

[http://www.mysite.com/category/newProduct.html](http://www.mysite.com/category/newProduct.html)

我尝试在 htacces 中添加一行

```
redirect 301 /product.php?id_product=216 http://www.mysite.com/category/newProduct.html 
```

但不工作。

如果我添加

```
Redirect /product.php http://www.mysite.com/category/newProduct.html 
```

所有链接都喜欢

```
http://www.mysite.com/product.php
http://www.mysite.com/product.php?id_product=216
http://www.mysite.com/product.php?id_product=219 
```

转到主页[http://www.mysite.com/](http://www.mysite.com/)

任何想法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:18:29.653

检查以下内容：

*   确保你的文件被调用`.htaccess`，而不是`htaccess`你上面说的。
*   如果您使用 FTP 将其传输到服务器，请使用 ASCII 而不是二进制传输模式。
*   如果您使用的是 Apache Web 服务器，请确保该`.htaccess`文件位于启用 Apache 目录选项的目录中。`AllowOverride`

# upload - 如何将文件从 FTP 位置上传到 Marklogic

> ID：14963423
> 
> 赞同：0
> 
> 时间：2013-02-19T17:13:07.570
> 
> 标签：upload, ftp, filesystems, marklogic

我需要将文件从 FTP 位置上传到 marklogic。请指导我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T19:03:33.750

MarkLogic 不允许`FTP`从 访问外部位置`XQuery`，就像它允许`HTTP`调用一样。它也不提供`FTP`服务器，就像它提供`WebDAV`服务器一样。

但是，您可以轻松地在中间放置一个中介来访问它`FTP`，并使用其他方式将文档上传到 MarkLogic。后者可以通过`WebDAV`您可以使用管理界面创建的应用服务器、通过`built-in`MarkLogic 6 中的 REST api ( [http://docs.marklogic.com/REST](http://docs.marklogic.com/REST) ) 或通过像 Corona ( [http:// developer.marklogic.com/code/corona](http://developer.marklogic.com/code/corona)）。

如果您用 Java 编写中介，您也可以使用（请参阅[http://docs.marklogic.com/](http://docs.marklogic.com/)`Java API`上的Java API 选项卡）。

！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T06:56:48.900

We have a app that needs documents from a shared folder that we running an etl on to get into marklogic. You can do this a number of ways. If you are able to I'd amount the drive on the marklogic box and then read from there. IF that doesnt work see if you can make those files viewable from an http-get requested. IF that doest work then you might want to make a web services.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T19:35:50.017

我个人会避免`WebDav`，除非你绝对需要它。这是一次性的、批量的还是连续的工作？

如果一次性或批量，那么我建议使用脚本`FTP`将文件存储到本地磁盘，然后使用`mlcp`or`RecordLoader`或`xmlsh`将它们推送到 MarkLogic。

如果这是一项持续的工作，那么定制 Java 应用程序可能是要走的路。确实意识到这`FTP`是一个*非常敏感*的协议..它可能会以多种方式失败并需要特殊的端口开放等。它是在防火墙、NAT 等之前的 80 年代设计的。让 FTP 可靠地工作而不管 MarkLogic 本身就是一门黑魔法。

如果可以使用其他协议`FTP`，那将是理想的。说`scp`或`rsync`或`http`。

# jquery - 使用带有 ajax 的 jQuery 序列化将一些输入字段发布为数组

> ID：14963424
> 
> 赞同：0
> 
> 时间：2013-02-19T17:13:13.450
> 
> 标签：jquery, ajax, serialization

嗨，我有以下 HTML：

```
...
    <td><input type="text" name="code[]" value="" /></td>
    <td>
          <select class="selectProductOrders" name="selectProductOrders[]">
              <option value="default" disabled selected>Select a product</option> 
          </select>
    </td>
    <td><input type="number" pattern="[0-9]*" name="rsp[]" value="" /></td>
    <td><input type="number" pattern="[0-9]*" name="trade[]" value="" /></td>
    <td><input type="number" pattern="[0-9]*" name="discount[]" value="0" /></td>
    <td><input type="number" pattern="[0-9]*" name="qty[]" value="" /></td>
    <td><input type="number" pattern="[0-9]*" name="cost[]" value="" /></td> 
```

...

我正在尝试将数据发布到服务器，但将数组输入字段拆分。我已经尝试了很多，包括 serialise 方法：

```
 var theForm = $('#transferOrder').serialize().replace(/%5B%5D/g, '[]');
        $.mobile.showPageLoadingMsg("a", "Sending Order...", true);
        $.ajax({
            type: "POST",
            url: "xxxxxx",
            data: {code: theForm},
            dataType: "json",
            success: function(result){

                alert(result);                      
            }
        }) 
```

我得到的不是一个数组，而是一个字符串。我只是希望在服务器端有一个可以循环的多维数组。

谢谢

# scala - 书中 Scala 的隐式 setter 和 getter 示例产生编译错误

> ID：14963427
> 
> 赞同：2
> 
> 时间：2013-02-19T17:13:23.310
> 
> 标签：scala

```
class Thermometer{

  var celsius: Float = _

  def fahrenheit = celsius * 9/5 + 32
  def fahrenheit_ = (f: Float) {
    celsius = (f-32)*5/9
  }

  override def toString = fahrenheit + "F/"+ celsius + "C"
} 
```

引用的代码是书中的一个例子`Programming in Scala 2nd edition`。当我尝试编译时，我收到以下错误：

```
scalac Thermometer.scala 
Thermometer.scala:6: error: not found: value f
  def fahrenheit_ = (f: Float) {
                     ^ 
```

scala 是否不再支持隐式定义的 getter 和 setter？代码中有错误吗？或者有没有一种新的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T17:17:14.970

书中的代码实际上在`_`and之间不包含空格字符`=`：

![在此处输入图像描述](../Images/af8c5f8d031f30a97f89517da1dfd5f3.png)

# php - PHP MySQL - 从不同的表中选择带有 where-clause 语句的成员

> ID：14963428
> 
> 赞同：2
> 
> 时间：2013-02-19T17:13:25.880
> 
> 标签：php, mysql, sql, select

我现在大部分时间都在谷歌搜索，但我似乎找不到正确的答案。也许是因为我真的不知道往哪个方向看（加入？存在？）。我有3张桌子：

![说明表设置](../Images/036b807c4393e9f29c8b572a0f485875.png)

* * *

有一个名为“组”和“语言”的表，其中包含实际的组和语言数据，但现在这并不重要。

用户应该能够根据所选组和/或语言生成包含所有成员的列表。用户选择的组/语言保存在两个包含 ID (`$aGroups`和`$aLangs`) 的单独数组中。

我想要/需要的是`SELECT * FROM members WHERE ...`

这就是我卡住的地方。我已经尝试过加入，我已经尝试过`IN()`，我已经尝试过，`EXIST`但似乎没有任何工作正常。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:38:24.517

我认为你只需要一些括号：

```
//assuming you have ids stored in $lang and $group
SELECT * FROM members WHERE (SELECT group_id FROM group_members WHERE member_id=members.id)='$group'
AND (SELECT lang_id FROM language_members WHERE member_id=members.id)='$lang' 
```

诀窍是“members.id”，DB 将为每个成员调用子查询，以确定是否满足 group 和 lang 的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:39:22.950

如果要按语言和组选择成员，可以执行以下操作：

```
$query = "select * from members as m 
left join group_members as gm on gm.member_id = m.id 
left join language_members as lm on lm.member_id = m.id";
if(isset($aGroups)) {
  $query .= " where group_id in (".implode(",", $aGroups).")";
  if(isset($aLangs)) {
    $query .= " and language_id in (".implode(",", $aLangs).")";
  }
} 
elseif(isset($aLangs)) {
  $query .= " where language_id in (".implode(",", $aLangs).")";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:42:00.173

```
Select m.* FROM members m, group_members gm, language_members lm
WHERE
lm.member_id=m.id AND
m.id=gm.member_id AND
<<<< START YOUR OWN WHERE HERE. 
```

# python - 尝试在python中读取文件

> ID：14963429
> 
> 赞同：-6
> 
> 时间：2013-02-19T17:13:30.897
> 
> 标签：python

请任何人都可以帮我阅读python中的.txt文件

这是我的代码

```
flink open(2of12inf.txt, "rU") 
```

但我收到一个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:15:29.120

您忘记了`=`赋值语句和引号：

```
flink = open('2of12inf.txt', "rU") 
```

最好将文件作为上下文管理器（[`with`语句](http://docs.python.org/2/reference/compound_stmts.html#with)）打开，以便它自动关闭：

```
with open('2of12inf.txt', "rU") as flink:
    # do something with the open file object

# flink will be closed automatically. 
```

`flink`是一个[文件对象](http://docs.python.org/2/library/stdtypes.html#file-objects)，所以你可以使用 , 等方法`.read()`来`.readline()`读取它。或者您可以遍历对象（迭代）以每次获取单行：

```
with open('2of12inf.txt', "rU") as flink:
    for line in flink:
        # do something with each line. 
```

我会使用文件的绝对路径而不是相对路径以避免意外：

```
with open('/path/to/directory/with/2of12inf.txt', "rU") as flink: 
```

或者您可以使用该[`os.path`库](http://docs.python.org/2/library/os.path.html)来构造绝对路径：

```
import os.path

filename = os.path.expanduser('~/2of12inf.txt')

with open(filename, "rU") as flink: 
```

例如，打开一个`2of12inf.text`在当前用户主目录中命名的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:18:19.437

您可能应该将文件名括在引号中（并在 flink 和 open 之间添加一个赋值运算符）：

```
flink = open("2of12inf.txt", "rU") 
```

正如 IT Ninja 所说，我也强烈建议使用 with 构造打开文件：

```
with open("2of12inf.txt", "rU") as flink:
    # do stuff... 
```

这将像使用 try-finally 块一样关闭文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:16:13.577

使用以下示例：

```
#!/usr/bin/python
# open file
f = open ("/etc/passwd","r")

#Read whole file into data
data = f.read()

# Print it
print data

# Close the file
f.close() 
```

# android - 无法在 google map api v2 中实例化活动 ComponentInfo

> ID：14963430
> 
> 赞同：1
> 
> 时间：2013-02-19T17:13:32.063
> 
> 标签：android

我正在尝试基于 google map api v2 和 google places 制作一个应用程序，按照教程进行操作，我的应用程序运行良好。现在我添加了一段代码用于使用 places api 并在 log cat 中显示错误

```
 02-19 22:18:24.023: E/AndroidRuntime(21871): FATAL EXCEPTION: main
02-19 22:18:24.023: E/AndroidRuntime(21871): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.abhishekbietcs.locomap/com.abhishekbietcs.locomap.Mapme}: java.lang.NullPointerException
02-19 22:18:24.023: E/AndroidRuntime(21871):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at android.os.Looper.loop(Looper.java:130)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at android.app.ActivityThread.main(ActivityThread.java:3687)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at java.lang.reflect.Method.invokeNative(Native Method)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at java.lang.reflect.Method.invoke(Method.java:507)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at dalvik.system.NativeStart.main(Native Method)
02-19 22:18:24.023: E/AndroidRuntime(21871): Caused by: java.lang.NullPointerException
02-19 22:18:24.023: E/AndroidRuntime(21871):    at com.abhishekbietcs.locomap.Mapme.<init>(Mapme.java:48)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at java.lang.Class.newInstanceImpl(Native Method)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at java.lang.Class.newInstance(Class.java:1409)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
02-19 22:18:24.023: E/AndroidRuntime(21871):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
02-19 22:18:24.023: E/AndroidRuntime(21871):    ... 11 more 
```

meinfest 是

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.abhishekbietcs.locomap"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<permission
    android:name="com.abhishekbietcs.locomap.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.abhishekbietcs.locomap.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.abhishekbietcs.locomap.Mapme"
        android:label="@string/title_activity_mapme" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.abhishekbietcs.locomap.Aboutus"
        android:label="@string/title_activity_mapme"
        android:theme="@android:style/Theme.Dialog" >
        <intent-filter>
            <action android:name="android.intent.action.ABOUT" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.abhishekbietcs.locomap.ViewPrefrence"
        android:label="@string/title_activity_mapme" >
        <intent-filter>
            <action android:name="android.intent.action.VIEWPREFRENCE" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="my key" />
</application> 
```

仪表板活动的 xml 是

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Mapme" >

<fragment
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" /> 
```

这是 oncreate 方法

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d("create","0");
    setContentView(R.layout.activity_mapme);
    SupportMapFragment mapFragment = (SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map);
    Log.d("create","1");
    googleMap = mapFragment.getMap();
    Log.d("create","2");
    googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
    Log.d("create","3");
} 
```

googlemap 变量是为整个活动定义的，我真的不明白出了什么问题，之前这个活动正在运行，现在它是强制关闭，拉我的头发请帮助我。提前谢谢

# php - 提供了未定义的变量和无效的参数

> ID：14963433
> 
> 赞同：0
> 
> 时间：2013-02-19T17:13:34.600
> 
> 标签：php, mysqli

如果我从下拉菜单中选择一个学生，这很奇怪（如果`$_POST['student'] != 0`as 值`0`代表一个`All`选项，而所有其他选项都有自己的数字），我收到一条错误消息：

`Notice: Undefined variable: questions in ... on line 597 Warning: Invalid argument supplied for foreach() in ... on line 597`

我的问题是导致此错误的原因以及如何解决？

下面的代码是我试图尽可能减少的代码，靠近代码片段的底部是错误行的注释：

```
 $selectedstudentanswerqry = "
        SELECT
        sa.StudentId, StudentAlias, StudentForename, StudentSurname
    ...
        FROM Student st
    ...
        ";

        // Initially empty
            $where = array('q.SessionId = ?');
            $parameters = array($_POST["session"]);
            $parameterTypes = 'i';

        //check if POST is empty

        // Check whether a specific student was selected

        $p_student = empty($_POST["student"])?0:$_POST["student"];  // Now if $_POST['student'] is either 0 or empty $p_student will be 0
        switch($p_student){
        case 0:
            //dont' add where filters
            break;
        default:
            $where[] = 'sa.StudentId = ?';
            $parameters[] .= $_POST["student"];
            $parameterTypes .= 'i';
        }

        // Check whether a specific question was selected
        $p_question = empty($_POST["question"])?0:$_POST["question"]; // Same here, if $_POST['question'] is either 0 or empty $p_question will be 0
            switch($p_question){
        case 0:
            //dont' add where filters 
            break;
        default:
            $where[] = 'q.QuestionId = ?';
            $parameters[] .= $_POST["question"];
            $parameterTypes .= 'i';
        }
        // If we added to $where in any of the conditionals, we need a WHERE clause in
        // our query
        if(!empty($where)) {
            $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
            // You only need to call bind_param once
    }

        $selectedstudentanswerqry .= "
          GROUP BY sa.StudentId, q.QuestionId
          ORDER BY StudentAlias, q.SessionId, QuestionNo
        ";

    global $mysqli;
    $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);

    if (count($where) == 1) {
            $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0]);
        }
        else if (count($where) == 2) {
            $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1]);
        }
        else if (count($where) == 3) {
            $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1], $parameters[2]);
        }

    // get result and assign variables (prefix with db)
    $selectedstudentanswerstmt->execute(); 
    $selectedstudentanswerstmt->bind_result($detailsStudentId,$detailsStudentAlias,$detailsStudentForename,$detailsStudentSurname); 

    $selectedstudentanswerstmt->store_result();
    $selectedstudentanswernum = $selectedstudentanswerstmt->num_rows(); 

        $arrStudentId = array();
        $arrStudentAlias = array();
     ...

        while ($selectedstudentanswerstmt->fetch()) {

        //Check if the student data exist.
        if (!isset($questions[$detailsStudentId])) {
            $questions[$detailsStudentId] = array(
                'studentalias' => $detailsStudentAlias,
                'studentforename' => $detailsStudentForename,
                'studentsurname' => $detailsStudentSurname,
                'questions' => array()
            );
        }

        $questions[$detailsStudentId]['questions'][$detailsQuestionId] = array(
            'questionno'=>$detailsQuestionNo,
            'content'=>$detailsQuestionContent,
    .....
        );
    }

    $selectedstudentanswerstmt->close();
    ?>

//LINE 597 ERROR BELOW
    foreach ($questions as $studentId => $studentData) {
        echo '<hr><h3>'.$studentData['studentalias'].' - '.$studentData['studentforename'].' '.$studentData['studentsurname'].'</h3>';

        foreach ($studentData['questions'] as $questionId => $questionData) {
            echo '<h3>'.$questionData['questionno'].': '.$questionData['content'].'</h3>';
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:29:25.077

变量 $questions 本身的初始化可能是问题所在。查看您的代码，看看在哪里`$questions =`调用了类似的东西。可能每次都在未运行的 if 语句中。

如果你打电话：

```
$questions[...] 
```

并且永远不会初始化`$questions`为数组，您也会遇到问题。所以你需要初始化`$questions`：

```
$questions = array(); 
```

在此之后，您将没有问题访问数组的字段。

# qt - 层次结构中的 Qt SIGNAL 和 SLOT，而不是线程（尚未）

> ID：14963436
> 
> 赞同：0
> 
> 时间：2013-02-19T17:13:41.137
> 
> 标签：qt

好的，我是一个初学者，但我在这里遗漏了一些东西。浏览了 Qt 文档/示例以及我可以通过 Google 挖掘的所有内容。所有类似的信息在上下文中都略有不同......

我刚开始使用 Qt SIGNALS 和 SLOTS，我在 gui 示例和课程中都很成功。现在，我想将子类中的 SIGNAL 与兄弟类中的 SLOT 连接起来，并在父主类中定义 Connect。最终，我的目标是在处理 QTcpSocket 的类中接收 iamges，并将数据作为 char* 发出以由另一个类处理（保存或显示）。

现在，我刚刚在控制台应用程序中创建了最基本的排列版本作为学习练习。我有一个发送者类...

发件人.h

```
#ifndef SENDER_H
#define SENDER_H

#include <QObject>

class sender : public QObject
{
    Q_OBJECT

public:
    sender(QObject *parent = 0);
    ~sender();
signals:
    void output(int data);
public slots:
    void test(int data);
private:    
};

#endif // SENDER_H 
```

发件人.cpp

```
#include <iostream>
#include "sender.h"

sender::sender(QObject *parent)
    : QObject(parent)
{
    std::cout << "Created sender" << std::endl;
    int stuff = 47;
    std::cout << "stuff = " << stuff << std::endl;

    connect(this, SIGNAL(output(int)), this, SLOT(test(int)));

    emit output(stuff);
}

void sender::test(int data)
{
    std::cout << "Got to test, data = " << data << std::endl;
}

sender::~sender()
{
    std::cout << "Destroying sender" << std::endl;
} 
```

...和一个接收器类...

接收器.h

```
#ifndef RECEIVER_H
#define RECEIVER_H

#include <QObject>

class receiver : public QObject
{
    Q_OBJECT

public:
    receiver(QObject *parent = 0);
    ~receiver();
public slots:
    void input (int data);
private:
};

#endif // RECEIVER_H 
```

接收器.cpp

```
#include <iostream>
#include "receiver.h"

receiver::receiver(QObject *parent)
    : QObject(parent)
{
    std::cout << "Created receiver" << std::endl;
}

void receiver::input(int data)
{
    std::cout << "Got data as = " << data << std::endl;
}

receiver::~receiver()
{
    std::cout << "Destroying receiver" << std::endl;
} 
```

我的主要看起来像这样......

主文件

```
#include <QtCore/QCoreApplication>
#include <iostream>
#include "sender.h"
#include "receiver.h"

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    receiver myReceiver;
    sender mySender;

    if (QObject::connect(&mySender, SIGNAL(output(int)), 
        &myReceiver, SLOT(input(int))))
    {
        std::cout << "Got here so connect returned true" << std::endl;
    }

    return a.exec();
} 
```

我添加了 cout 输出和 sender::test 函数来尝试找出发生了什么。

对我来说，这可以干净地编译并且运行时没有任何警告或错误，但是 sender::test SLOT 被称为 receiver::input SLOT 却没有。main 中的连接测试返回 true，并且发送方或接收方都不会过早销毁。控制台输出是...

```
Created receiver
Created sender
stuff = 47
Got to test, data = 47
Got here so connect returned true 
```

所以发出了 SIGNAL，SIGNAL 和 SLOT 参数匹配，我在 sender.h 和 receiver.h 中都有 Q_OBJECT 宏，并且都继承自和 #include QObject。

怎么了？？？

PS我正在运行4.8.3，IDE是带有Qt插件的VS2010。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:23:37.937

答案很简单：您在将信号连接到接收器**之前**和将其连接到自身**之后发送信号。**所以你的输出是绝对正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:27:04.797

**仅在**所有内容都已连接后才发出所有内容。这里发送者的实例化发生在发送者和接收者连接之前，这就是发送完成的地方。

# php - Azure Web 角色和 Codeigniter

> ID：14963437
> 
> 赞同：0
> 
> 时间：2013-02-19T17:13:43.683
> 
> 标签：php, web-applications, azure, codeigniter-2

我在 codeigniter 中编写了一个 Web 应用程序，它使用 PHP 5.3。

我看过 azure 中的网络角色，但它让我觉得不够灵活。例如，安装新的 dll 和弄乱服务器等并不是那么容易。

在 azure 上的虚拟机上运行 PHP 还是使用 Web 角色更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:52:35.267

您是否查看过[Windows Azure 网站](https://www.windowsazure.com/en-us/home/scenarios/web-sites/)？您的方案的一些好处：

*   默认安装 PHP 5.3
*   部署快速灵活 [FTP、Git、GitHub、BitBucket]
*   [配置简单](https://www.windowsazure.com/en-us/develop/php/common-tasks/configure-php-web-site/)
*   环境设置可以使用[跨平台命令行工具编写脚本](https://www.windowsazure.com/en-us/downloads)

# javascript - AngularJS 呈现 为文本而不是换行符

> ID：14963444
> 
> 赞同：48
> 
> 时间：2013-02-19T17:14:05.737
> 
> 标签：javascript, angularjs

我确信以前有人问过这个问题，但我找不到答案。

我有一个 AngularJS 脚本，它从数据库中提取然后呈现到内容。一切正常，除了几个地方我试图用它们之间的新行连接一些单词。

```
 **in the script.js**
groupedList[aIndex].CATEGORY = existingCategory+'\n'+thisCategory;
groupedList[aIndex].CATEGORY = existingCategory+'<br>'+thisCategory; 
```

如果我使用上述代码的第一行，我什么也看不到，但重新编写的 html 中没有新行。如果我使用第二行，则`<br>`get 呈现为文本，输出如下所示：

```
Instinct<br>Media 
```

代替

```
Instinct
Media 
```

如果有帮助，我可以发布完整的脚本，但我猜有一些简单的东西我只是没有看到。

**更新** 这是完整的js

```
function qCtrl($scope, $filter, $http, $timeout){

    $scope.getCategories = function(){$http.post('quote.cfc?method=getCategories').success(function(data) { $scope.categories = data; });   }
    $scope.getClassifications = function(){$http.post('quote.cfc?method=getClassifications').success(function(data) {   $scope.classifications = data;  }); }
    $scope.getIndustries = function(){$http.post('quote.cfc?method=getIndustries').success(function(data) { $scope.industries = data;   }); }
    $scope.getKeywords = function(){$http.post('quote.cfc?method=getKeywords').success(function(data) { $scope.keywords = data; }); }
    $scope.getSources = function(){$http.post('quote.cfc?method=getSources').success(function(data) {   $scope.sources = data;  }); }

    $scope.getAllQuotes = function(){$http.post('quote.cfc?method=getAllQuotesJoined').success(function(data) { $scope.allQuotes = data;    }); }

    $scope.initScopes = function (){
        $scope.getCategories();
        $scope.getClassifications();
        $scope.getIndustries();
        $scope.getKeywords();
        $scope.getSources();
        $scope.getAllQuotes();
    }   
    $scope.initScopes();

    // SEARCH QUOTES
    $scope.filteredQuotes = $scope.allQuotes;
    $scope.search = {searchField:''};

    $scope.searchQuote = function(){
        var filter = $filter('filter');
        var searchCrit = $scope.search;
        var newlist = $scope.allQuotes;
        var groupedList = [];
        var idList = [];
        newlist = filter(newlist,{TESTQUOTE:searchCrit.searchField});
        for(i=0;i<10;i++){
            aIndex = idList.contains(newlist[i].TESTIMONIALID);
            if(aIndex >= 0){
                thisKeyword = newlist[i].KEYWORD;
                thisClassification = newlist[i].CLASSIFICATION;
                thisCategory = newlist[i].CATEGORY;
                existingKeyword = groupedList[aIndex].KEYWORD;
                existingClassification = groupedList[aIndex].CLASSIFICATION;
                existingCategory = groupedList[aIndex].CATEGORY;
                if(thisKeyword != '' && existingKeyword.indexOf(thisKeyword) == -1){
                    groupedList[aIndex].KEYWORD = existingKeyword+' - '+thisKeyword;
                } 
                if(thisClassification != '' && existingClassification.indexOf(thisClassification) == -1){
                    groupedList[aIndex].CLASSIFICATION = existingClassification+' \n '+thisClassification;
                } 
                if(thisCategory != '' && existingCategory.indexOf(thisCategory) == -1){
                    groupedList[aIndex].CATEGORY = existingCategory+'<br>'+thisCategory;
                }               
            } else {
                idList.push(newlist[i].TESTIMONIALID);
                groupedList.push(newlist[i]);
            }
        }
        $scope.filteredQuotes = groupedList;
      }
}
Array.prototype.contains = function ( needle ) {
   for (j in this) {
       if (this[j] == needle) return j;
   }
   return -1;
} 
```

这是HTML

```
<div ng-repeat="q in filteredQuotes" class="well clearfix">
                        <h3>{{q.TITLE}}</h3>
                        <div class="row-fluid" style="margin-bottom:5px;">
                            <div class="span3 well-small whBG"><h4>Classification</h4>{{q.CLASSIFICATION}}</div>
                            <div class="span3 well-small whBG pipeHolder"><h4>Categories</h4>{{q.CATEGORY}}</div>
                            <div class="span3 well-small whBG"><h4>Key Words</h4>{{q.KEYWORD}}</div>
                            <div class="span3 well-small whBG"><h4>Additional</h4>Industry = {{q.INDUSTRY}}<br>Source = {{q.SOURCE}}</div>
                        </div>
                        <div class="well whBG">{{q.TESTQUOTE}}</div>
                        <div class="tiny">
                            Source comment : {{q.SOURCECOMMENT}}<br>
                            Additional Comment : {{q.COMMENT}}
                        </div>
                    </div>
                </div> 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2015-04-17T21:21:18.953

您可以使用`\n`来连接单词，然后将此样式应用于容器 div。

```
style="white-space: pre;" 
```

更多信息可以在[https://developer.mozilla.org/en-US/docs/Web/CSS/white-space找到](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space)

```
<p style="white-space: pre;">
    This is normal text.
</p>
<p style="white-space: pre;">
    This 
  text 
  contains 
  new lines.
</p>
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-02-19T17:23:59.607

我可能是错的，因为我从未使用过 Angular，但我相信您可能正在使用`ng-bind`，它只会创建一个 TextNode。

你会想`ng-bind-html`改用。

[http://docs.angularjs.org/api/ngSanitize.directive:ngBindHtml](http://docs.angularjs.org/api/ngSanitize.directive:ngBindHtml)

**更新**：看起来你需要使用`ng-bind-html-unsafe='q.category'`

[http://docs.angularjs.org/api/ng.directive:ngBindHtmlUnsafe](http://docs.angularjs.org/api/ng.directive:ngBindHtmlUnsafe)

这是一个演示：

[http://jsfiddle.net/VFVMv/](http://jsfiddle.net/VFVMv/)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-02-19T19:03:20.647

您需要使用`ng-bind-html-unsafe`... 或者您需要包含 ngSanitize 模块并使用`ng-bind-html`：

**使用 ng-bind-html-unsafe**

如果您信任您正在呈现的 HTML 的源代码，请使用它，它将呈现您放入其中的任何内容的原始输出。

```
<div><h4>Categories</h4><span ng-bind-html-unsafe="q.CATEGORY"></span></div> 
```

* * *

**或使用 ng-bind-html**

如果您不信任 HTML 的来源（即它是用户输入），请使用此选项。它将清理 html 以确保它不包含诸如脚本标签或其他潜在安全风险来源之类的内容。

确保包括以下内容：

```
<script src="http://code.angularjs.org/1.0.4/angular-sanitize.min.js"></script> 
```

然后在您的应用程序模块中引用它：

```
var app = angular.module('myApp', ['ngSanitize']); 
```

然后使用它：

```
<div><h4>Categories</h4><span ng-bind-html="q.CATEGORY"></span></div> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-11T06:57:28.207

为什么这么复杂？

我以这种方式简单地解决了我的问题：

```
 <pre>{{existingCategory+thisCategory}}</pre> 
```

`<br />`如果字符串包含我从 textarea 保存数据时包含的 '\n'，它将自动生成。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-18T05:43:36.470

我这样用过

```
function chatSearchCtrl($scope, $http,$sce) {
 // some more my code

// take this 
data['message'] = $sce.trustAsHtml(data['message']);

$scope.searchresults = data; 
```

在html中我做了

```
<p class="clsPyType clsChatBoxPadding" ng-bind-html="searchresults.message"></p> 
```

就是这样，我得到了我的`<br/>`标签

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-28T12:11:33.377

您还可以使用：

`String.fromCharCode(10);`

与 CSS

```
white-space: pre-line; 
```

这里是工作示例： [https ://jsfiddle.net/Nxja/3xtcqdej/1/](https://jsfiddle.net/Nxja/3xtcqdej/1/)

# ios - GameKit 点对点连接问题。向另一台设备发送邀请需要很长时间

> ID：14963448
> 
> 赞同：1
> 
> 时间：2013-02-19T17:14:08.887
> 
> 标签：ios, objective-c, p2p, gamekit, gkpeerpickercontroller

我在我的应用程序中使用 GameKit 点对点连接，但遇到以下问题：使用时，`GKPeerPickerController`有时需要很长时间才能发送从一台设备连接到另一台设备的邀请。有时设备只是看不到对方。我能做些什么呢？完全不使用`GKPeerPickerController`并呈现自定义界面会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:03:21.457

根据您尝试制作的应用程序类型，让一台设备充当服务器而另一台设备充当客户端可能对您更有利。我从个人经验中注意到，让两个设备都充当对等设备可能需要更长的时间，或者根本无法工作。

服务器/客户端视角的唯一缺点是您的用户必须专门选择其中一个，并且您必须创建自己的用户界面。但是，如果您可以使用它，那么您可能会得到更好的结果。祝你好运！

# c++ - c++11类成员数组大小constexpr前向声明

> ID：14963449
> 
> 赞同：4
> 
> 时间：2013-02-19T17:14:10.347
> 
> 标签：c++, c++11, constexpr, placement-new, opaque-pointers

我想在使用它们之后从我的包含链中排除一些标题。据我所知，c ++ 11中没有排除“header.h”。

伪代码一厢情愿：

```
#include "the_bad_header.h" //long includechain with later unused declarations
class bulky { ... };
constexpr std::size_t bulkysize = sizeof(bulky);
forget everything included and class bulky and remember only bulkysize 
```

我的问题变得明显的例子如下。请不要争辩这不是一个严重的问题。该示例被分解以显示最小的抽象语言使用。我还将描述老式的解决方案及其缺点。

## 旧式解决方案

只是另一个header.h：

```
class bulkywrap
{
public:
    bulkywrap();
protected:
    friend class bulkywrap_pImpl;
    bulkywrap_pImpl *const pImpl; //opaque pointer, private implementation
}; 
```

只是另一个cppunit.cpp：

```
#include "justanotherheader.h"
#include "boost/lotsofheaders.hpp"
//#include more and more headers of highly complex libraries so adding millions of known types and other identifiers, macros, and so on

class bulkywrap_pImpl
{
    //lots of members of types used from the other libraries
};

bulkywrap::bulkywrap()
: pImpl( new bulkywrap_pImpl() )
{} 
```

* * *

## 我目前的解决方案

只是另一个header.h：

```
#include "stdint.h" // this is the only header I like to use, but also unnecessary.
#define UNKNOWNSIZE 12345
class bulkywrap
{
public:
    bulkywrap();
protected:
    friend class bulkywrap_pImpl;
    bulkywrap_pImpl *const pImpl; //opaque pointer, private implementation
    uint8_t pImpl_Placement[UNKNOWNSIZE]; //placement new for pImpl
}; 
```

只是另一个cppunit.cpp：

```
#include "justanotherheader.h"
#include "boost/lotsofheaders.hpp"
//#include more and more headers of highly complex libraries so adding millions of known types and other identifiers, macros, and so on

class bulkywrap_pImpl
{
    //lots of members of types used from the other libraries
};

bulkywrap::bulkywrap()
: pImpl( new(this->pImpl_Placement) bulkywrap_pImpl() ) //using this here is safe
{} 
```

因此，上面的代码正在运行。优点是：隐藏复杂性并且没有运行时动态内存间接。嗯？我的意思是，放置 new 允许将整个对象放在堆栈上，并且所有成员地址在编译时都是已知的。我的尝试是在使用不透明指针的界面设计时获得最佳性能。

如果您认为：“这种性能优势不值得思考。” 那么请留下这个问题。

* * *

## 我预期的解决方案

只是另一个header.h：

```
#include "stdint.h" // this is the only header I like to use, but also unnecessary.

constexpr std::size_t get_bulkywrap_pImpl_Size( void ); //constexpr function forward declaration
extern constexpr std::size_t bulkywrap_pImpl_Size; //constexpr literal forward declaration with external initialization

class bulkywrap
{
public:
    bulkywrap();
protected:
    friend class bulkywrap_pImpl;
    bulkywrap_pImpl *const pImpl; //opaque pointer, private implementation
    uint8_t pImpl_Placement[get_bulkywrap_pImpl_Size()]; //undefined constexpr used
    uint8_t pImpl_Placement[bulkywrap_pImpl_Size]; //alternative to above. undefined constexpr used
}; 
```

只是另一个cppunit.cpp：

```
#include "justanotherheader.h"
#include "boost/lotsofheaders.hpp"
//#include more and more headers of highly complex libraries so adding millions of known types and other identifiers, macros, and so on

class bulkywrap_pImpl
{
    //lots of members of types used from the other libraries
};

constexpr std::size_t get_bulkywrap_pImpl_Size( void )
{
    return sizeof(bulkywrap_pImpl);
}
constexpr std::size_t bulkywrap_pImpl_Size = sizeof(bulkywrap_pImpl);

bulkywrap::bulkywrap()
: pImpl( new(this->pImpl_Placement) bulkywrap_pImpl() ) //using this here is safe
{} 
```

在我当前的解决方案中，我需要验证 sizeof(bulkywrap_pImpl) 并手动调整 UNKNOWNSIZE。我认为目前无法从编译单元获取任何信息给其他人。我知道这通常是有充分理由的，但这限制了 c++11 的可能性。

我想指出：

[jtc1 sc22 wg21 纸 n3337](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)

[jtc1 sc22 wg21 纸 n3308](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3308.pdf)

请帮我查找信息天气以及为什么标准不允许这样做。

但此外，我想找到一种解决方案，如何在编译期间将一些文字常量从一个编译单元导出到另一个编译单元。它只是一个文字，所以所有的语句和表达式都不受它的影响。因此编译不依赖于数组的大小来自哪里。

我的建议为 ISO-jtc1-sc22-wg21 和编译器开发人员带来了一些工作，但我没有看到模板和 constexpr 之间有任何相关差异，因为每个定义都必须出现在同一个翻译单元中。这使得模块化编程和干净的接口变得虚假。

不：我不想使用预处理器宏、动态新函数或虚拟成员函数。重要的是最大的 const 正确性，因为类的大小是 const。

**请帮忙**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T13:24:29.530

您不能同时拥有“编译时”和“来自另一个编译单元”。也不清楚为什么你需要忘记成功解析的标题。解析时间已经消耗。我建议您创建另一个大小为常量的标头，从两个文件中包含它，并将 static_assert 添加到 pimpl 文件中，检查`constant >= sizeof(pimpl)`. 您可以通过编译源文件（包括 pimpl 和doing `cout <<sizeof(pimpl)`. 我还建议您不要为 pimpl 指针浪费时间和空间，并将其替换为成员函数，返回正确转换缓冲区的地址。你也没有显示你在哪里调用 pimpl 的析构函数。实现分配/复制/移动/交换也会很有趣

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-11T15:24:45.737

在 cpp 中使用 static_assert 检查标头中声明的大小 >= impl 类的大小

# c# - System.NullReferenceException：对象引用未设置为对象的实例

> ID：14963456
> 
> 赞同：0
> 
> 时间：2013-02-19T17:14:19.050
> 
> 标签：c#, image, linq-to-sql

在这段代码中，我想使用 linqtosql 将图片保存在数据库中的 picturebox1 中......但是在将图像转换为字节数组时遇到了一些异常

异常是“System.NullReferenceException：对象引用未设置为对象的实例。”

```
private void button1_Click(object sender, EventArgs e)

{
    DataClasses1DataContext dc = new DataClasses1DataContext();
    try
    {
        string signname = textBox1.Text;
        string imageurl = textBox2.Text;
        pictureBox1.ImageLocation = imageurl;
     //   byte[] file_byte = new byte[1000];
       // Image newimage = new Image(pictureBox1.Image);
    ///Error comes here
     byte[] file_byte = ImageToByteArray(pictureBox1.Image);
        System.Data.Linq.Binary file_binary = new                                                           System.Data.Linq.Binary(file_byte);

        Sign_Table obj = new Sign_Table()
        {
            Sign_Name = signname,
            Sign_Image = file_binary,

        };
        dc.Sign_Tables.InsertOnSubmit(obj);

    }
    finally
    {
        dc.SubmitChanges();
    }

}
private byte[] ImageToByteArray(Image imageIn )
{
    using (MemoryStream ms = new MemoryStream())
    {

           // Error comes here
        imageIn.Save(ms, System.Drawing.Imaging.ImageFormat.Gif);
        return ms.ToArray();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:30:51.913

我怀疑问题是您引用它时 pictureBox.Image 为空。您正在设置 pictureBox.ImageLocation 但实际上并未加载图像。在设置pictureBox.ImageLocation 后立即添加对pict​​ureBox.Load() 的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:17:52.023

创建 Memorystream 时，必须与 bytes[] 关联，例如

字节[] buf = 新字节[4096];

那么你可以使用 (MemoryStream ms = new MemoryStream(buf))

所以计算图像大小的上限（以字节为单位），然后将 MemoryStream 与包含那么多字节的数组相关联。

# html5-canvas - drawImage(canvas) chrome 大小限制？

> ID：14963457
> 
> 赞同：2
> 
> 时间：2013-02-19T17:14:27.187
> 
> 标签：html5-canvas

我正在尝试将一个巨大的屏幕外画布（缓冲区）的一小部分绘制到我的画布中，但我在 chrome 上遇到了问题（在 Firefox 和 IE 上效果很好）。

除非我将缓冲区的大小减少约 10%，否则 drawImage 方法不起作用。我的缓冲区是 12000x7500px，除非我将其减小到 10000x6000px，否则它不起作用。

这是一个错误还是我做错了什么？

我现在不提供测试用例，因为它不容易创建，但如果这里的任何人都不熟悉这个问题，我会提供。

```
ctx.drawImage(game.bufferBackground,-eventManager.decalX,-eventManager.decalY,game.canvas.width, game.canvas.height, 0, 0, game.canvas.width, game.canvas.height); 
```

ctx.canvas 是每 530 像素 750 像素。game.bufferBackground 是 12000px 每 7500px

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T18:51:31.727

我自己在 Chrome 中使用 drawImage 时遇到了问题——确保在标签中调整画布的大小，而不是 CSS。当我使用 CSS 调整大小时，只绘制了部分图像，但是当我在实际标签中使用 HEIGHT/WIDTH 调整大小时，它呈现得很好。

例子：

```
<canvas height="400" width="400"> 
```

不是

```
<canvas style="height:400;width:400;"> 
```

# c# - 将没有参数的动作拟合到动作中

> ID：14963465
> 
> 赞同：0
> 
> 时间：2013-02-19T17:15:01.523
> 
> 标签：c#, generics

我有这个方法

```
private void ProcessItem<T>(FileSystemInfo itemInfo, int itemMinAge, Action<T> action, T parameter, string errorMessage, string successMessage = "") 
```

这适合我的 8 个电话中的 7 个，例如

```
ProcessItem<bool>(subDir, dir.MinAge, subDir.Delete, true, string.Format(Messages.NotDeletedFolder, subDir.FullName)); 
```

它需要一个目录，然后如果`dir.MinAge`满足某些条件，则调用`subDir.Delete(true)`该目录并记录一条消息。但是我也有一个调用，其中参数`action`需要不带`<T>`参数，因为我需要传递一个`void`不带任何参数的方法。

有没有办法让这个调用适应这个方法？我不想仅仅因为一次调用而创建另一种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:18:20.587

```
ProcessItem<object>(subDir, dir.MinAge,
    ignored => subDir.NoArgs(),
    /* ignored */ null,
    string.Format(Messages.NotDeletedFolder, subDir.FullName)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:18:46.177

```
ProcessItem<bool>(subDir, dir.MinAge, _ => ParameterlessCall() , true, ... 
```

在lambda`_`表达式中用作参数名称是函数式编程习惯用法，用于永远不需要检查其值的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T17:18:40.660

最简单的方法可能就是使用 lambda 表达式。

```
ProcessItem<bool>( ... (param) => myMethod(), ... ); 
```

在这种情况下，参数`param`将被简单地忽略并`myMethod`正常调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T17:21:49.337

创建一个可选参数并相应地调整实现：

```
private void ProcessItem<T>(FileSystemInfo itemInfo, int itemMinAge, Action<T> action = null, Action action2 = null, T parameter, string errorMessage, string successMessage = "") 
```

# oracle - 为什么这 2 个 oracle 函数的执行方式不同？

> ID：14963468
> 
> 赞同：1
> 
> 时间：2013-02-19T17:15:13.733
> 
> 标签：oracle, oracle11g

我在 Oracle 中编写了一个函数来将 IP 地址转换为整数。似乎很慢。我写了第二个函数来更快地做同样的事情。不幸的是，它最终变慢了，我不知道为什么。

原创功能；

```
FUNCTION GET_IP_INTEGER 
(
  IP_IN IN VARCHAR2  
) RETURN NUMBER AS 
DOT_COUNTER INTEGER;
CURRENT_DOT INTEGER;
LAST_DOT INTEGER := 1;
CURRENT_INTEGER INTEGER := 0;
OUTPUT_INTEGER INTEGER := 0;
BEGIN
  FOR DOT_COUNTER IN 1..3
  LOOP
    CURRENT_DOT := INSTR(IP_IN,'.',LAST_DOT);
    CURRENT_INTEGER := TO_NUMBER(SUBSTR(IP_IN,LAST_DOT,CURRENT_DOT - LAST_DOT));
    LAST_DOT := CURRENT_DOT + 1;
    CASE DOT_COUNTER
      WHEN 1 THEN CURRENT_INTEGER := CURRENT_INTEGER * 16777216;
      WHEN 2 THEN CURRENT_INTEGER := CURRENT_INTEGER * 65536;
      WHEN 3 THEN CURRENT_INTEGER := CURRENT_INTEGER * 256;
    END CASE;
    OUTPUT_INTEGER := OUTPUT_INTEGER + CURRENT_INTEGER;
    CURRENT_INTEGER := 0;
  END LOOP;
  CURRENT_INTEGER := TO_NUMBER(SUBSTR(IP_IN,LAST_DOT));
  OUTPUT_INTEGER := OUTPUT_INTEGER + CURRENT_INTEGER;
  RETURN OUTPUT_INTEGER;
END GET_IP_INTEGER; 
```

它把所有东西都分开并且运行良好。但我认为我可以做得更好，所以我写了这个；

```
FUNCTION GET_IP_INTEGER1 
(
  IP_IN IN VARCHAR2  
) RETURN NUMBER AS 
OCTET_COUNTER INTEGER;
CURRENT_INTEGER INTEGER := 0;
OUTPUT_INTEGER INTEGER := 0;
BEGIN
  FOR OCTET_COUNTER IN 1..4
  LOOP
    CURRENT_INTEGER := TO_NUMBER(REGEXP_SUBSTR(IP_IN,'\w+',1,OCTET_COUNTER));
    CURRENT_INTEGER := POWER(2,24 - ((OCTET_COUNTER-1)*8)) * CURRENT_INTEGER;
    OUTPUT_INTEGER := OUTPUT_INTEGER + CURRENT_INTEGER;
  END LOOP;
  RETURN OUTPUT_INTEGER;
END GET_IP_INTEGER1; 
```

这也有效，但似乎运行得慢得多（大约两倍长）。我会假设幂函数或 regexp_substr 是一头猪。但我希望有更多知识的人可以指出哪个，和/或为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:04:08.797

这是我的小知识：在 oracle 11g 中，您拥有分层 PL/SQL 分析器。这将向您显示您的 pl/sql 花费时间的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:06:18.027

`regexp_substr`会比普通的慢`substr`，而且会有一点开销`power`。最多的时间会在`regexp_substr`虽然。

我很好奇你为什么说它们“慢”。我想你的意思是打了很多电话？因为当我测试它们时，这些例程非常活泼。

此外，这种类型的函数将从本机编译中受益匪浅（这在 11g 中很容易做到，因为 dba 不需要做任何事情来让它工作）。

最后，您可能会发现这稍微快一些（尤其是使用本机编译）。

```
create or replace function get_ip_integer3(ip_in in varchar2) 
return integer 
as
  result integer := 0;
begin
  result := result + 16777216 * substr(ip_in, 1, instr(ip_in, '.') - 1);
  result := result +
            65536 * substr(ip_in, instr(ip_in, '.') + 1,
                           instr(ip_in, '.', 1, 2) - instr(ip_in, '.') - 1);
  result := result +
            256 * substr(ip_in, instr(ip_in, '.', 1, 2) + 1,
                         instr(ip_in, '.', 1, 3) - instr(ip_in, '.', 1, 2) - 1);
  result := result + substr(ip_in, instr(ip_in, '.', 1, 3) + 1);

  return result;
end get_ip_integer3; 
```

# sql - 在 DB2 中查找多行的重复项

> ID：14963472
> 
> 赞同：0
> 
> 时间：2013-02-19T17:15:24.007
> 
> 标签：sql

我有一个表，其中可以有可以跨越多行的重复项。

例如，让 Employee 表与部门。

```
DEPTId 姓名 SALARY

1 汤姆 121

1 马克 21

1 莎莉 34

2 杰伊 342

2 布兰妮 3

3 汤姆 121

3 马克 21

3 莎莉 34

4马克21

4 莎莉 34

5 马克 21

5 莎莉 34

5 汤姆 121

5 布兰妮 3

```

这里当我通过`DeptId`as 3 时，我需要得到`DeptId`1，因为 3 本质上与 1 相同。

5 与 1 不同，因为它有更多行。所有行都匹配，然后它是重复的。

我可以知道如何使用单个查询找到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:21:35.747

您正在尝试比较集合内的两个集合（部门内的员工）。

基于集合的方法是在表上进行自联接，按员工匹配。下一组由两个部门组成。如果两个部门有相同的员工，那么所有员工都会匹配。也就是说，不会有一个部门的员工与另一个部门的员工不匹配的情况。

该`having`子句测试这种情况。

此版本的查询使用驱动程序表将部门与员工匹配。当集合不匹配时，完整的外连接将有一个不匹配的行，它在`having`子句中被选中：

```
select driver.deptid1, driver.deptid2
from (select d1.deptid as deptid1, d2.deptid as deptid2
      from (select distinct deptid from employees) d1 cross join
           (select distinct deptid from employees) d2
     ) driver left outer join
     employees e1
     on e1.deptid = driver.deptid full outer join
     employees e2
     on driver.deptid2 = e2.deptid and e1.name = e2.name and e1.salary = e2.salary
group by driver.deptid1, driver.deptid2
having SUM(case when e1.name is null then 1 else 0 end) = 0 and
       SUM(case when e2.name is null then 1 else 0 end) = 0 
```

# java - 在 Java 中，我需要从字符串中删除 '

> ID：14963475
> 
> 赞同：1
> 
> 时间：2013-02-19T17:15:36.117
> 
> 标签：java, character-encoding

我在 android 中拉一个字符串，它包含`&#039;`在其中。我宁愿不使用全部替换并调用正确的方法来解码这个字符串。有人可以帮忙吗？使用 UTF-8 解码不会对情况进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:26:05.500

```
import org.json.simple.JSONObject;
String s = JSONObject.escape("don't!"); 
```

还处理那些其他讨厌的字符，如反斜杠。

# actionscript-3 - 获取 getpixel32 的意外跟踪。有人能看出为什么吗？

> ID：14963477
> 
> 赞同：2
> 
> 时间：2013-02-19T17:15:43.180
> 
> 标签：actionscript-3, bitmapdata

运行以下代码时，正在跟踪“-2”，我正在努力理解为什么。

```
var bmd:BitmapData = new BitmapData(1,1,true,0xFFFFFFFF);
bmd.setPixel32(0,0, 0x32FF6B45);
trace(0x32FF6B45-bmd.getPixel32(0,0)); 
```

据我所知，它应该跟踪 0。0x32FF6B45 最初分配给坐标 0,0 处的像素。该值应该在 bmd.getPixel32(0,0) 中返回，然后，当它从 0x32FF6B45 中减去时，它应该得到 0。为什么我得到 -2？

编辑：

我已经单独跟踪了这些值，上面跟踪中的操作导致 -2 是有道理的，因为跟踪 0x32FF6B45 会导致 855599941 并跟踪 bmd.getPixel32(0,0) 会导致 855599943。现在的问题是为什么这些价值观有什么不同吗？乳清不是 bmd.getPixel32(0,0) 也追踪到 855599941？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T23:28:02.470

我有同样的问题，我相信它与预乘 alpha 有关，如此[处所述](http://www.quasimondo.com/archives/000665.php)。在我的代码中，我将一个像素设置为 0xa08800ff 并返回 0xa08700ff。如果您需要 0xff 以外的 alpha，那么不幸的是，可能还需要同时将所有像素值存储在单独的数据结构中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T17:43:12.663

这是意料之中的。

> 获取像素

这将返回一个值：#RRGGBB (rgb / red, green, blue)

> 获取像素32

这将返回一个值：#AARRGGBB (argb / alpha, red, green, blue)

例子：

```
trace('test 0x32FF6B45: '+0x32FF6B45);
var bmd:BitmapData = new BitmapData(1,1,true,0xFFFFFFFF);
trace('setting 0,0 to 0x32FF6B45');
bmd.setPixel32(0,0, 0x32FF6B45);
var color:* = bmd.getPixel32(0,0)
trace('0,0: '+color);
trace(color-bmd.getPixel32(0,0)); 
```

结果：

```
test 0x32FF6B45: 855599941
setting 0,0 to 0x32FF6B45
0,0: 855599943
0 
```

据我所知，您使用的颜色超出了 Flash 的范围。我不确定颜色范围，但我知道在以前的经验中，当拍摄具有多种颜色的 Photoshop 元素时，有时对象会因为颜色值超出范围而无法导入。

@Jari 关于透明度也是正确的。

# java - 读取其他进程的**无缓冲**输出流

> ID：14963478
> 
> 赞同：2
> 
> 时间：2013-02-19T17:15:44.107
> 
> 标签：java, process, stream, stdout, unbuffered

我正在为java中的文件转换器编写一个小GUI。文件转换器将其当前进度写入标准输出。看起来像这样：

`Flow_1.wav: 28% complete, ratio=0,447`

我想在进度条中说明这一点，所以我正在阅读流程的标准输出，如下所示：

```
ProcessBuilder builder = new ProcessBuilder("...");
builder.redirectErrorStream(true);
Process proc = builder.start();
InputStream stream = proc.getInputStream();
byte[] b = new byte[32];
int length;
while (true) {
    length = stream.read(b);
    if (length < 0) break;
    // processing data
} 
```

现在的问题是，无论我选择哪种字节数组大小，都会以 4 KB 的块读取流。所以我的代码正在执行，直到`length = stream.read(b);`然后阻塞了很长一段时间。一旦进程生成了 4 KB 的输出数据，我的程序就会获取这个块并在 32 字节切片中处理它。然后再次等待下一个 4 KB。

我试图强制 java 使用较小的缓冲区，如下所示：

```
BufferedInputStream stream = new BufferedInputStream(proc.getInputStream(), 32); 
```

或这个：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(proc.getInputStream()), 32); 
```

但两者都没有改变任何东西。

然后我发现了这个：[Process source](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/lang/ProcessImpl.java.html) (about line 87)

似乎 Process 类的实现方式是将进程的标准输出通过管道传输到文件。那么`proc.getInputStream();`实际上所做的是将流返回到文件。而且这个文件似乎是用 4 KB 缓冲区写入的。

有谁知道这种情况的某种解决方法？我只想立即获得流程的输出。

*编辑*：正如 Ian Roberts 所建议的，我还尝试将转换器的输出通过管道传输到 stderr 流中，因为该流似乎没有包装在`BufferedInputStream`. 仍然是 4k 块。

另一个有趣的事情是：我实际上并没有得到 4096 个字节，而是大约 5 个字节。恐怕它`FileInputStream`本身是本机缓冲的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:37:32.833

查看链接到进程标准*输出*流的代码被包装在 a 中，`BufferedInputStream`但它的标准*错误*仍然没有缓冲。因此，一种可能性可能是不直接执行转换器，而是将转换器的标准输出发送到标准错误的 shell 脚本（或 Windows 等效脚本，如果您在 Windows 上）：

```
ProcessBuilder builder = new ProcessBuilder("/bin/sh", "-c",
  "exec /path/to/converter args 1>&2"); 
```

*不要* `redirectErrorStream`，然后从而`proc.getErrorStream()`不是读取`proc.getInputStream()`。

可能是您的转换器已经在使用 stderr 进行进度报告，在这种情况下您不需要脚本位，只需关闭`redirectErrorStream()`. 如果转换器程序同时写入 stdout 和 stderr，那么您还需要生成第二个线程来使用 stdout（脚本方法通过将所有内容发送到 stderr 来解决这个问题）。

# php - jQuery/PHP 文件上传在加载下一页前超时

> ID：14963479
> 
> 赞同：0
> 
> 时间：2013-02-19T17:15:46.923
> 
> 标签：php, javascript, jquery, image-uploading

所以我正在开发以下图像上传脚本，基于现有的开源脚本。目前可在此处实时查看：http: [//images.oneightynyc.com/](http://images.oneightynyc.com/)

现在，如果您拍摄任何一系列常规尺寸的图像（小于 5mb）并继续上传它们，上传过程就很好了。上传文件，然后将您带到显示这些文件的链接代码的页面。但是，假设您上传了一些大图像，如下所示：

[http://imaging.nikon.com/lineup/dslr/d90/img/sample/pic_005b.jpg](http://imaging.nikon.com/lineup/dslr/d90/img/sample/pic_005b.jpg)

[http://imaging.nikon.com/lineup/dslr/d90/img/sample/pic_003b.jpg](http://imaging.nikon.com/lineup/dslr/d90/img/sample/pic_003b.jpg)

上传是在这个过程中发生的，但是脚本永远不会把你带到上传的页面。我知道上传实际上已经发生的唯一方法是，如果我浏览到图库页面并看到那里列出了文件。

这是处理上传的 uploader.php 文件：

```
<?
//ob_start();
session_start();
$auth_id=$_SESSION['userid'];
if (!$auth_id || empty($auth_id) || $auth_id==""){
$auth_id = 0;
}
require_once("config.php"); 
require_once("limits.php"); 
require_once("ftp.class.php");
require_once("func.php"); 

$link = mysql_connect($db_server, $db_user, $db_password) or die("Could not connect to the database.");

mysql_select_db($db_name) or die("Could not select the database.");

if ($config[Uploads] == 0) {

$msg= "<center><b><br><br><br>Uploads are temporarily disabled by the site admin</center></b>";
}

else if ($config[Uploads] == 1 && !$auth_id) {

$msg= "<center><b><br><br><br>You have to <a href=\"register.php\" title=\"Register\">Register</a> before you will be able to upload photos.</center></b>";
}

$query = "select count(*) as total from ftp where status=1";

$result = mysql_query($query) or die("Query failed.");

while ($row = mysql_fetch_array($result))

{

$total=$row[total];
}

if($total<=0)

    {

    $no_server="1";

    $ftpid=0;

    $url=$server_url."/images/";

    }

else

{

$query = "select * from ftp where status=1 ORDER BY RAND() limit 1";

$result = mysql_query($query) or die("Query failed.");

while ($row = mysql_fetch_array($result)) 

    {

            $no_server="0";

        $ftpid=$row['ftpid'];

        $path=$row['name'];        

        $url=$row['dir'];        

        $host=$row['host'];        

        $user=$row['user'];        

        $pass=$row['ftppass'];        

    }    

 }

// get variables for fields on upload screen                

        $tos = $_POST['tos'];        

        $prv = $_POST['prv'];        

                if($prv!="1")

                $prv=0;

        $uploaderip = $_SERVER['REMOTE_ADDR'];

        $messages="";

        $msg="";

        $newID="";

        $FileName="";

        $FileFile="";

        $FileUrl="";

        $FileUrlLink="";

        $FiletnUrl="";

        // check for blocked ip address

        if ($uploaderip != "") {

                $query = "select ip from blocked where ip = '$uploaderip'";

            $result = mysql_query($query) or die("Query failed.");

                $num_rows = mysql_num_rows($result);

                if ($num_rows > 0) {

                        $msg= "Your IP address (".$uploaderip.") has been blocked from using this service.";

                }

        }

if ($config[AcceptTerms]=="1"){

if ($tos=="") 

                {

                    $msg= "You must check the box stating you agree to our terms.";

                    echo "<script language='javascript'>parent.upload('".$msg."','".$newID."','".$messages."','".$FileName."','".$FileFile."','".$FileUrl."','".$FileUrlLink."','".$FiletnUrl."','".$page_url."','".$server_url."','".$site_name."','".$HotLink."');</script>";

                }

                }

if($msg=="")
{

// check for a file

for($i=0;$i<=14;$i++)

{

        $err="0";

        $thefile = $_FILES['thefile'.$i];        

        if ($thefile['name']!="") 

                {

        // check for valid file extension

$path_parts = pathinfo($thefile['name']);

$file_ext = strtolower($path_parts['extension']);

        if ($err == "0") 

                {

                        // check for valid file type

                        if (!in_array_nocase($file_ext, $valid_file_ext)) 

                                {

                                        $messages.= "|<em>".$thefile['name']."</em> is not in a valid format (".$valid_mime_types_display.")";

                                        $err="1";

                                }                        

                }

 if ($err == "0") {        
   // check for valid image file
$imageinfo = getimagesize($_FILES['thefile0']['tmp_name']);

if(!eregi('image',$imageinfo['mime'])) {

$messages.="|". "Sorry, This is not a valid image file!";
  $err="1";  } }

                if ($err == "0") 

                {        

                     // check for valid file size

                        if ($thefile['size'] > ($max_file_size_b)) 

                                {
                $filesizemb =($thefile['size']/1048576);
                $filesizemb = number_format($filesizemb, 3);

$messages.="Sorry but this image size is ".$filesizemb." MB which is bigger than the max allowed file size of ".$max_file_size_mb." MB.";

                                        $err="1";        

                                }

                }

       // save the file, if no error messages

        if ($err == "0") 

                {

    // replace special chars with  spaces
    $thefile['name'] = eregi_replace("[^a-z0-9.]", " ", $thefile['name']);

    // Replace multiple spaces with one space
    $thefile['name'] = ereg_replace(' +', ' ', $thefile['name']);
    // Replace spaces with underscore
    $thefile['name'] = str_replace(' ', '_', $thefile['name']);
    // Replace hyphens with underscore
    $thefile['name'] = str_replace('-', '_', $thefile['name']);  

    // Replace multiple underscores with one underscore
    $thefile['name'] = ereg_replace('_+', '_', $thefile['name']);

$path_parts = pathinfo($thefile['name']);

// if php < 5.2
              if(!isset($path_parts['filename'])){
                $path_parts['filename'] = substr($path_parts['basename'], 0,strpos($path_parts['basename'],'.'));
              }

$thefile['name'] = strpos($path_parts['filename'], '.');

$thefile['name'] = substr($path_parts['filename'], 0, 22); // limit file name length to 22 chars from the beginning

$thefile['name'] = $thefile['name'] . "." . strtolower($path_parts['extension']);    

    // Generate prefix to add to file name

     $prefix = rand(99,999);

    // Add prefix to file name

    $newFileName = $prefix . $thefile['name'];    

                        // SAVE THE PICTURE

                        $FileName.="|". newImageName($thefile['name']);

                        $FileFile.="|". $server_dir . $newFileName;

                        $newFile = $server_dir . $newFileName;                        

                        $newFileUrl = $url . $newFileName;

                        $FileUrl.="|". $url . $newFileName;

                        $newFileUrlLink = $server_save_directory . $newFileName;

                        $FileUrlLink.="|". $newFileName;

                         if (in_array_nocase($file_ext, $valid_file_ext)) 

                                {

$lx = 3;
if ($file_ext == "jpeg") {
$lx = 4; }

$tnFileName = substr($newFileName, 0, strlen($newFileName) - $lx) . "jpg";
$tnFileName = str_replace('.', '_tn.', $tnFileName);

                                        $tnFile = $server_dir . $tnFileName;

                                        $FiletnUrl.="|". $url . $tnFileName;

                                        $tnFileUrl = $url . $tnFileName;

                                } 

                        else 

                                {

                                        $tnFileName = "";

                                        $tnFile = "";

                                        $tnFileUrl = "";

                                }

                        $filesize = $thefile['size'];

                        $newID = "";

                        if (!@copy($thefile['tmp_name'], $newFile)) 

                                {

                                        $messages.="|". "Please check site settings in admin panel and set proper value for server local path.<br><br>Also please make sure the images folder is chmodded to 0777";

                                } 

                        else 

                                {

                                        // add to database

                                        if($auth_id)        

                                        $uid=$auth_id;

                                        else $uid=0;

                                        //ftpupload($host,$user,$pass,$path."/".$dir."/".$newFileName,$newFileUrl);                                        

                                        //ftpupload

                                        if($no_server=="0")

                                         {

                                        $ftp =& new FTP();

                                        if ($ftp->connect($host)) {

                                            if ($ftp->login($user,$pass)) {

                                                $ftp->chdir($path);

                                                $ftp->put($newFileName,$newFile);

                                            }

                                        }

                        //  unlink($newFile);

                                          }

                                        //ftpupload

                                        $date_add=time();

                                        $query = "INSERT INTO images (prv,ftpid,userid,filename, tn_filename, filepath, ip, filesize,added) VALUES ($prv,$ftpid,$uid,'$newFileName', '$tnFileName', '$url', '$uploaderip', $filesize,$date_add)";

                                        mysql_query($query) or die("Database entry failed.");

                                        $newID.="|". mysql_insert_id();

                                }

                                 if ($file_ext == "jpeg" ||$file_ext == "jpg" || $file_ext == "png" || $file_ext == "gif" || $file_ext == "bmp") 

                                {

                                        if ($file_ext == "jpg") 

                                                {

                                                        $source_id = imagecreatefromjpeg($newFile);

                                                }

                                        if ($file_ext == "jpeg") 

                                                {

                                                        $source_id = imagecreatefromjpeg($newFile);

                                                }                                               

                                        elseif ($file_ext == "png") 

                                                {

                                                        $source_id = imagecreatefrompng($newFile);

                                                } 

                                        elseif ($file_ext == "gif") 

                                                {

                                                        $source_id = imagecreatefromgif($newFile);

                                                }

                                         elseif ($file_ext == "bmp") 

                                                {

                                                        $source_id = ImageCreateFromBMP($newFile);

                                                }

                                        $true_width = imagesx($source_id);

                                        $true_height = imagesy($source_id);

                                }

                }

} 

} 

mysql_close($link);

        // create URL links to display to user

        $showURL1 = false;  // image on hosted page - image only

        $showURL2 = false;  // direct link to file - all

        $showURL3 = false;  // HTML for img - image only

        $showURL4 = false;  // [img][/img] tags - image only

        $showURL5 = false;  // thumbnail pic - image only

        // determine flags

        $showURL2 = true;

        if ($file_ext == "jpg" || $file_ext == "jpeg"|| $file_ext == "gif" || $file_ext == "png" || $file_ext == "bmp") {

                $showURL1 = true;

                $showURL3 = true;

                $showURL4 = true;

        }

        if ($file_ext == "jpg" || $file_ext == "gif" || $file_ext == "png"|| $file_ext == "jpeg" || $file_ext == "bmp") {

                        $showURL5 = true;                        

        }

                    echo "<script language='javascript'>parent.upload('".$msg."','".$newID."','".$messages."','".$FileName."','".$FileFile."','".$FileUrl."','".$FileUrlLink."','".$FiletnUrl."','".$page_url."','".$server_url."','".$site_name."','".$HotLink."');</script>";

}
else
{
    echo "<script language='javascript'>parent.uploaderror('".$msg."');</script>";
    exit;
}

        function newImageName($fname) {

                $timestamp = time();

                $new_image_file_ext = substr($fname, strlen($fname) - 3, strlen($fname));

                if ($new_image_file_ext == "peg") {

                        $ext = ".jpg";

                } else {

                        $ext = "." . $new_image_file_ext;

                }

                $newfilename = randString() . substr($timestamp, strlen(timestamp) - 4, strlen(timestamp)) . $ext;

                return $newfilename;

        }

        function randString() {

                $newstring="";

                while(strlen($newstring) < 3) {

                        $randnum = mt_rand(0,61);

                        if ($randnum < 10) {

                                $newstring .= chr($randnum + 48);

                        } elseif ($randnum < 36) {

                                $newstring .= chr($randnum + 55);

                        } else {

                                $newstring .= chr($randnum + 61);

                        }

                }

                return $newstring;

        }

        function in_array_nocase($item, $array) {

                $item = &strtoupper($item);

                foreach($array as $element) {

                        if ($item == strtoupper($element)) {

                                return true; 

                        }

                }

                return false;

        } 

?> 
```

以及负责生成上传页面的 upload.js 脚本：

```
var cp = new cpaint();
cp.set_transfer_mode('get');
cp.set_response_type('xml');
cp.set_debug(1);

function uploaderror(msg)
{
    alert(msg);
}
function showfile()
{
    var countfld=1;
    countfld=document.getElementById("countfld").value+countfld;
    fld=countfld.length;
    if(fld>14)
    {
    alert("Sorry, i can upload  max 15 files at once.");    
    return false;
    }
    else
    {
        document.getElementById("f"+fld).style.display="block";
        document.getElementById("countfld").value=countfld;
    }

   var file=document.getElementById("f"+fld).value;
   if(file=="")
   {
        msg="Please fill this field.";
        alert(msg);        
        document.getElementById("f"+fld).focus();
        return false;
    }    
}
function showfileux()
{
    var countfld=1;
    countfld=document.getElementById("countfldu").value+countfld;
    fld=countfld.length;
    if(fld>14)
    {
    alert("Sorry, i can upload  max 15 files at once.");    
    return false;
    }
    else
    {
        document.getElementById("u"+fld).style.display="block";
        document.getElementById("countfldu").value=countfld;
    }    
}

function showfileu()
{
    var countfld=1;
    countfld=document.getElementById("countfldu").value+countfld;
    fld=countfld.length;
    fldx=fld-1;
    fldxx=fld.value;
    if(fldxx=="")
{
msg="Email Address cannot be left empty.";
alert(msg);
document.getElementById("u"+fldxx).select();
  document.getElementById("u"+fldxx).focus();
   return false;
}
    if(fld>14)
    {
    alert("Sorry, i can upload  max 15 files at once.");    
    return false;
    }
    else
    {
        document.getElementById("u"+fld).style.display="block";
        document.getElementById("countfldu").value=countfld;
    }    
}

function uploadfile(id)
{
    if(document.getElementById(id).value==1)
    {
    document.getElementById("showurl").style.display="none";
    document.getElementById("showfl").style.display="block";        
    return true;
    }
    if(document.getElementById(id).value==2)
    {
    document.getElementById("showfl").style.display="none";
    document.getElementById("showurl").style.display="block";    
    return true;
    }
    document.getElementById("countfldu").value="0";
    document.getElementById("countfld").value="0";

}

function show_loading()
{
        document.getElementById('loading').style.display = "block";
        document.getElementById('newupload').submit;
        document.getElementById('submit').disabled = true;
       // return true;
}
function show_loading1()
{
        document.getElementById('loading1').style.display = "block";
        document.getElementById('newupload1').submit;
        document.getElementById('submit').disabled = true;
}

function upload(msg,newID,messages,FileName,FileFile,FileUrl,FileUrlLink,FiletnUrl,page_url,server_url,site_name,HotLink)
{
var html='<div id="wrapper"><div style="width:760px;"><center><FONT SIZE="4" COLOR="#00A4B7">Photo Links</FONT></h4><br></center><span class="body"><form name="uploadresults" action="uploademail.php" method="post">';
if(newID)
{    
    html=html+'<input type="hidden" name="idx[]" value="'+newID+'">';
}

if(msg)
    {
        var getmsg = msg.split("|");
        for(i=0;i<getmsg.length;i++)
            {
                if(getmsg[i] && getmsg[i]!="on")
                html=html+'<span style="font-weight: bold; color: red;">'+getmsg[i]+'</span><br>';
            }

    }    
html=html+'<br><center>';    
if(messages)
    {

        var getmessages = messages.split("|");
        for(i=0;i<getmessages.length;i++)
            {
                if(getmessages[i] && getmessages[i]!="on")                
                html=html+'<span style="font-weight: bold; color: red;">'+getmessages[i]+'</span>';
            }
            html=html+'</center>';    
    }    

if(FileName)
    {
        var getFileName = FileName.split("|");
        var getFileFile = FileFile.split("|");
        var getFileUrl = FileUrl.split("|");
        var getFileUrlLink = FileUrlLink.split("|");
        var getFiletnUrl = FiletnUrl.split("|");
        var getHotLink = HotLink.split("|");
                for(i=0;i<getFileName.length;i++)
                        {
                                if(getFileName[i] && getFileName[i]!="on")        {

html=html+'<center><br><a href="view2.php?filename='+getFileUrlLink[i]+'"><img src="'+getFileUrl[i]+'" style="max-width: 550px;"" /></a><br><br>';

html=html+'<strong>Link to add tags and delete the photo <br><div align="center"><textarea name="url1[]" cols="80" rows="1" READONLY onfocus="javascript: this.select()">'+server_url+'/view2.php?filename='+getFileUrlLink[i]+' 
```

让我知道您认为导致此错误的原因，因为这是我需要修复的最后一步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:39:44.610

我在从大型数据库创建 excel 文件时遇到了类似的问题。归结为 PHP 脚本超出了服务器设置的时间限制。有多种方法可以从内置的 PHP 函数中延迟/扩展它，可以使用部分或全部。我个人曾将 AJAX 功能与 AJAX 结合使用，以使其在后台运行，然后重定向该页面。

这是有关如何延迟/扩展它的文档：

[http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

以下是有关如何检查超时的文档：

[http://php.net/manual/en/function.connection-timeout.php](http://php.net/manual/en/function.connection-timeout.php)

如果你最终像我一样走 AJAX 路线，我强烈建议走 jQuery 路线而不是 vanilla JS。

# python - CSV 模块排序输出意外

> ID：14963481
> 
> 赞同：0
> 
> 时间：2013-02-19T17:15:57.157
> 
> 标签：python, sorting, csv

在下面的代码中（用于按降序打印工资，按专业排序），

```
reader = csv.DictReader(open('salaries.csv','rb'))
rows = sorted(reader)
a={}
for i in xrange(len(rows)):
    if rows[i].values()[2]=='Plumbers':
        a[rows[i].values()[1]]=rows[i].values()[0]
t = [i for i in sorted(a, key=lambda key:a[key], reverse=True)]
p=a.values()
p.sort()
p.reverse()
for i in xrange(len(a)):
    print t[i]+","+p[i] 
```

当我在条件语句中输入“管道工”时，管道工工资中的输出结果为：

```
Tokyo,400 
Delhi,300 
London,100 
```

当我将“律师”置于相同的“如果”条件下时，输出为：

```
Tokyo,800
London,700
Delhi,400 
```

CSV 的内容如下：

```
City,Job,Salary
Delhi,Lawyers,400
Delhi,Plumbers,300
London,Lawyers,700
London,Plumbers,100
Tokyo,Lawyers,800
Tokyo,Plumbers,400 
```

当我从程序中删除 --> if rows[i].values()[2]=='Plumbers': <-- 时，它应该打印所有输出，但它只打印这 3 个：

```
Tokyo,400 
Delhi,300 
London,100 
```

虽然输出应该类似于：

```
Tokyo,800
London,700
Delhi,400
Tokyo,400 
Delhi,300 
London,100 
```

问题究竟出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:47:39.243

首先，您的代码按描述工作......按*薪水*降序输出。所以按设计工作？

顺便说一句，您的排序代码似乎过于复杂。您无需将位置/薪水对拆分为两个列表并独立排序。例如：

```
# Plumbers
>>> a
{'Delhi': '300', 'London': '100', 'Tokyo': '400'}
>>> [item for item in reversed(sorted(a.iteritems(),key=operator.itemgetter(1)))]
[('Tokyo', '400'), ('Delhi', '300'), ('London', '100')]

# Lawyers
>>> a
{'Delhi': '400', 'London': '700', 'Tokyo': '800'}
>>> [item for item in reversed(sorted(a.iteritems(),key=operator.itemgetter(1)))]
[('Tokyo', '800'), ('London', '700'), ('Delhi', '400')] 
```

并回答您的最后一个问题，当您删除“if”语句时：您将位置与薪水存储在字典中，并且字典不能有重复的键。它将包含每个位置的最后更新，根据您的输入 csv，是管道工的薪水。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:31:09.790

首先，将所有索引重置为*index - 1*因为当前`rows[i].values()[2]`不能相等`Plumbers`，除非它`DictReader`是基于 1 的索引系统。

其次，`Tokyo`你想要的输出的第一行和`Tokyo`第三行的有什么独特之处？创建字典时，使用与键相同的值将导致覆盖之前与该键关联的任何内容。您需要某种唯一标识符，例如`Location.Profession`密钥。您可以简单地执行以下操作来获取将保留所有信息的密钥：

```
key = "".join([rows[i].values()[0], rows[i].values()[1]], sep=",") 
```

# javascript - 如何在继承的javascript类中声明私有函数

> ID：14963483
> 
> 赞同：0
> 
> 时间：2013-02-19T17:16:10.603
> 
> 标签：javascript

[我真的很喜欢这篇](http://ejohn.org/blog/simple-javascript-inheritance/)文章中描述的 javascript 类继承。例子：

```
var Person = Class.extend({

  init: function(isDancing){
    this.dancing = isDancing;  
  },  
  dance: function(){
    return this.dancing;
  }

}); 
```

在这种情况下，舞蹈是公共功能。我想声明私有函数“walk”。但是如何以及在哪里？我相信这对你们大多数人来说很容易。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:18:33.313

这就是你可以制作私有函数的方法，但是你失去了原型的能力：

```
var Person = Class.extend((function () {
    var dancing;

    // private functions
    function dance () {
        return dancing;
    }

    // public functions
    return {
        init: function(isDancing) {
            dancing = isDancing;  
        }
    }
}())); // <-- immediate invocation 
```

# wcf - 与自定义实体的父/子关联。为什么子实体“列表”在服务器端是空的？

> ID：14963489
> 
> 赞同：1
> 
> 时间：2013-02-19T17:16:31.197
> 
> 标签：wcf, silverlight, associations, ria

这是我的问题：

我有一个`DisplayMap`映射到数据库表的实体。该实体与自定义实体链接`MapBitmap`。

A`MapBitmap`可以有 0 到 N`DisplayMap`并且`DisplayMap`可以有 0 或 1 `MapBitmap`。A`MapBitmap`是一个自定义实体（它不是我的数据库的表，实际上它代表服务器上的一个文件）。

这是代码：

```
[MetadataType(typeof(DisplayMapMetadata))]    
public partial class DisplayMap
{
    ...

    [DataMember]
    public int? MapBitmapId { get; set; }

    [Include]
    [DataMember]
    [Association("DisplayMap", "MapBitmapId", "Id", IsForeignKey = true)]
    public MapBitmap MapBitmap { get; set; }

    ..... 
  }

   [MetadataType(typeof(MapBitmapMetadata))]
   [DataContract]
   public partial class MapBitmap 
    {
    .....

    [Key]
    [DataMember]
    public int Id { get; set; }

    [DataMember]
    private List<DisplayMap> _DisplayMap = new List<DisplayMap>();
    [Include]
    [DataMember]
    [Association("DisplayMap", "Id", "MapBitmapId", IsForeignKey=false)]
    public List<DisplayMap> DisplayMap
    {
        get
        {
            if (this._DisplayMap == null)
            {
                this._DisplayMap = new List<DisplayMap>();
            }

            return this._DisplayMap;
        }
        set { this._DisplayMap = value; }
    }

   ...
   } 
```

当我从 silverlight 客户端插入一个新的`DisplayMap`和一个新的`MapBitmap`时，在“提交”上一切正常：在服务器端，我可以枚举`DisplayMap`一个`MapBitmap`新的`DisplayMap`子实体的列表。

但是，当我创建一个新实体`MapBitmap`然后将其链接到现有`DisplayMap`的，在服务器端的“提交”上，`DisplayMap`新`MapBitmap`实体的列表是空的。我不明白为什么。

奇怪的是，在客户端（silverlight），关系在“SubmitChanges”之前是好的。

有人有想法吗？感谢您的任何回复。

# java - log4j 过滤掉方法

> ID：14963490
> 
> 赞同：3
> 
> 时间：2013-02-19T17:16:41.920
> 
> 标签：java, log4j

我想关闭类方法的日志记录。见下文：

```
package com.mypackage;

public class A {
    public static void aaa() { 
        logger.info("hello"); 
    }

    public static void bbb() { 
        logger.info("hello"); 
    }
} 
```

.

```
# This works and nothing gets logged by A
log4j.category.com.mypackage.A=off 
```

.

```
#this does not work. (I am trying to switch off only the static method)
log4j.category.com.mypackage.A.aaa=off 
```

有人知道我们是否可以根据方法关闭（更改日志级别）吗？

谢谢

注意：我不想更改代码（那是因为代码已经存在，我只想更改现有的 log4j，它只是一个配置文件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:23:15.030

你可以做的是有两个不同的记录器，每个方法一个。

```
private static final Logger logAAA = Logger.getLogger("some.logger.name.for.AAA");
private static final Logger logBBB = Logger.getLogger("some.other.name.for.BBB"); 
```

然后在您的配置中为它们定义不同的日志级别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T10:35:37.730

这实际上可以通过实现一个特定[`Filter`](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/spi/Filter.html)的来检查记录器名称然后调用方法。您的过滤器接收一个[`LoggingEvent`](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/spi/LoggingEvent.html)允许[`LocationInfo`](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/spi/LocationInfo.html)使用类和方法名称检索的。

请注意，这将在堆栈跟踪上使用反射，这可能会非常低效，请谨慎行事。特别是，在检索 之前首先检查**记录器名称**`LocationInfo`，以便仅在必要时执行反射。

只能通过 XML Log4j 配置文件配置过滤器。

快速实施：

过滤器类：

```
public class MethodBasedFilter extends Filter {

    @Override
    public int decide(LoggingEvent event) {
        if (event.getLoggerName().equals(LoggingWithMethodFiltering.class.getCanonicalName())) {
            if (event.getLocationInformation().getMethodName().equals("filteredMethod")) {
                return Filter.DENY;
            }
        }
        return Filter.NEUTRAL;
    }
} 
```

过滤后的类：

```
public class LoggingWithMethodFiltering {
    private static final Logger LOG = Logger.getLogger(LoggingWithMethodFiltering.class);

    public static void unfilteredMethod() {
        LOG.info("I am not filtered");
    }

    public static void filteredMethod() {
        LOG.info("I am filtered and will never appear");
    }

    public static void main(String[] args) {
        unfilteredMethod();
        filteredMethod();
    }
} 
```

`log4j.xml`: _

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration>

    <appender name="Console" class="org.apache.log4j.ConsoleAppender">
        <param name="threshold" value="trace" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%-5p|%-20.20t|%d{HH:mm:ss,SSS}|%20.30c{1} %25.25F:%-4L - %20.20M - %m%n" />
        </layout>
        <filter class="MethodBasedFilter" />
    </appender>

    <root>
        <level value="trace" />
        <appender-ref ref="Console" />
    </root>

</log4j:configuration> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:13:52.803

我不知道这样做的可能性。

不过，您可以将日志配置为包含类和方法名称（请参阅[PatternLayout](http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/PatternLayout.html)）并使用其他工具（如“ `grep`”）对日志文件进行后处理，以包含/排除您想要查看的内容。

由于性能问题，不建议记录类和方法名称，但这可能与您无关。

# vb6 - 如何生成随机数

> ID：14963493
> 
> 赞同：1
> 
> 时间：2013-02-19T17:16:47.400
> 
> 标签：vb6

我是 vb 的新手，我有 3 个文本框，当用户单击表单中的特定按钮时，我想将其设置为随机值：
这是代码：

```
Private Sub cmdjouer_Click(Index As Integer)
  txt1 = Math.Randomize(9)
 txt2 = Math.Randomize(9)
 txt3 = Math.Randomize(9)
End Sub 
```

我收到以下错误 `expected function or variable`

我确定问题与随机函数有关。

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T17:21:38.913

You are confusing VB.NET with VB6\. They are drastically different from each other. In the future, when you look for examples, documentation, and help online, be sure to specify VB6 to ensure that you are dealing with the correct language. They are essentially two completely different languages.

## VB6

In VB6, you need to initially seed the random number generator using the `Randomize` function. Then, to generate a random number, you must use the `Rnd` function, for instance:

```
Private Sub cmdjouer_Click(Index As Integer)
    Randomize()
    txt1.Text = Int((Rnd * 9) + 1)
    txt2.Text = Int((Rnd * 9) + 1)
    txt3.Text = Int((Rnd * 9) + 1)
End Sub 
```

## VB.NET

`Math.Randomize` is a method in the Smart Personal Objects Technology (SPOT) namespace. I doubt that is what you are actually looking for. You probably just want to use the `System.Random` class, like this:

```
Private Sub cmdjouer_Click(sender As Object, e As EventArgs) Handles cmdjouer.Click
    Dim r As New Random()
    txt1.Text = r.Next(9).ToString()
    txt2.Text = r.Next(9).ToString()
    txt3.Text = r.Next(9).ToString()
End Sub 
```

As others have pointed out, you don't want to set your text box reference variable to the number (e.g. `txt1 = ...`). You need to set the `Text` property of the text box.

Also, as was pointed out in the comments below, I called `Randomize` or created the `New Random` object inside the button's `Click` event. I did so to simplify the example, but in actuality, that would be bad practice. In either case, the seeding of the random number generator should, ideally, only happen once, typically when the application starts. By re-seeding the generator each time, it can cause the results to be less random.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:19:34.740

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T17:20:08.630

Try this

```
' Initialize the random-number generator.
Randomize()
' Generate random value between 1 and 6.
Dim value As Integer = CInt(Int((6 * Rnd()) + 1)) txt1.text = cstr(value) 
```

# ios - 用字符串命名选择器

> ID：14963494
> 
> 赞同：1
> 
> 时间：2013-02-19T17:16:47.453
> 
> 标签：ios, objective-c

我以编程方式制作了一个按钮，我正在向按钮添加一个操作，如下所示：

```
[button1 addTarget:self action:@selector(button1) forControlEvents:UIControlEventTouchUpInside]; 
```

但我想用带有格式的字符串命名选择器。我试过这样：

```
[b4 addTarget:self action:@selector([NSString stringWithFormat@"button%i", i]) forControlEvents:UIControlEventTouchUpInside]; 
```

当然这不起作用，但是我可以做一些类似的事情来完成这项工作吗？如果你明白我的问题..

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T17:18:47.860

这将起作用：

```
NSString *selName = [NSString stringWithFormat@"button%i", i];
SEL selector = NSSelectorFromString(selName);

[button1 addTarget:self action:selector forControlEvents:UIControlEventTouchUpInside]; 
```

但我必须问你为什么要这样做。您是否要处理多个按钮？这可以通过所有按钮的单个选择器轻松完成。给每个按钮自己的标签。然后按钮选择器可以检查发件人的标签。

# php - 将用户重定向到与他们提交的 ID 号相关联的页面

> ID：14963495
> 
> 赞同：-1
> 
> 时间：2013-02-19T17:16:52.867
> 
> 标签：php, url, input, hyperlink

我对 PHP 编码场景还很陌生，需要快速开始......

我有一个简单的页面，要求用户输入 ID 号，并希望 PHP 文件能够识别该号码的关联 URL 并将它们带到该页面。我知道如何在 URL 中直接使用表单结果，但我想对用户隐藏其他 URL，以便他们只能访问他们的代码将它们重定向到的内容。

*示例：用户获取代码“A1B2C3”并将其输入给定字段。当他们按下提交时，我希望它去`http://website.tld/subdirectory/`*

如果将每个代码与 URL 相关联的列表可以是单独的文件，那将是一个好处。

我拥有的当前代码片段

```
website.tld/entry.php?ID=
$_GET['ID']
switch($_GET['ID'])
{
    case: 101: $redirect = "/page1"; break;
    case: 202: $redirect = "/page2"; break;
    case: 303: $redirect = "/page3"; break;
}
header("location:".$redirect);
exit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:22:51.727

如果您有能力这样做，那么在这种情况下设置一个简单的数据库似乎非常有益。然后制作一个类似的表格：

```
users
user_id | user_site | attribute1 | attribute2 | ... 
```

其中 user_id 是唯一标识符，而 user_site 是您要将它们重定向到的 URL。然后，您可以通过输入的 ID 查找每个用户并获取该 ID 的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:31:06.273

也许最简单的方法是使用数组和读取文件：

```
$mycodes=Array ("A1B2C3"=>"http://website.tld/subdirectory/"
    ,"GLG"=>"http://www.google.com");

if(!empty($_REQUEST['sitecode'])){
    readfile($mycodes[$_REQUEST['sitecode']]);
} 
```

您可以将数组放在一个单独的文件中并包含它。

# android - 列出从 Google Play 中特别选择的应用程序

> ID：14963501
> 
> 赞同：0
> 
> 时间：2013-02-19T17:17:07.737
> 
> 标签：android, google-play, google-play-services

我只知道一个应用程序解决这个问题的方法

```
String desiredAppId = "com.rovio.angrybirds";
Intent i = new Intent(Intent.ACTION_VIEW,Uri.parse("market://details?id="+desiredAppId));
startActivity(i); 
```

但是如果我想列出所有*（免费 && 选定的开发人员 && 发布日期>2011 && 等）*如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:19:06.370

> 但是，如果我想列出所有（免费 && 选定的开发人员 && 日期>2011 && 等）如何实现呢？

您不能创建任意查询。[该文档](http://developer.android.com/distribute/googleplay/promote/linking.html)概述了有限的选项：单个应用程序、开发人员的所有应用程序或关键字搜索的结果。没有“日期”，也没有“&&”。

# c++ - 有没有办法从 C++ 中的成员指针类型派生对象类型

> ID：14963502
> 
> 赞同：1
> 
> 时间：2013-02-19T17:17:09.500
> 
> 标签：c++, templates, c++11, metaprogramming

是否可以编写一个 C++ 模板`owner_of<...>`，使得给定以下代码：

```
struct X { int y; } 
```

`owner_of<&X::y>::type`是`X`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:32:38.673

你*几乎*可以做到这一点（或者至少到目前为止我找不到更好的解决方案）：

```
#include <string>
#include <type_traits>

using namespace std;

template<typename T>
struct owner_of { };

template<typename T, typename C>
struct owner_of<T (C::*)>
{
    typedef C type;
};

struct X
{
    int x;
};

int main(void)
{
    typedef owner_of<decltype(&X::x)>::type should_be_X;
    static_assert(is_same<should_be_X, X>::value, "Error" );
} 
```

如果您介意使用`decltype`，也许宏可以：

```
#define OWNER_OF(p) owner_of<decltype( p )>::type

int main(void)
{
    typedef OWNER_OF(&X::x) should_be_X;
    static_assert(is_same<should_be_X, X>::value, "Error" );
} 
```

基于的替代解决方案`decltype:`

```
template<typename T, typename C>
auto owner(T (C::*p)) -> typename owner_of<decltype(p)>::type { }

int main(void)
{
    typedef decltype(owner(&X::x)) should_be_X;
    static_assert(is_same<should_be_X, X>::value, "Error" );
} 
```

# c# - 如何从没有父标签的 XElement 中检索 HTML？

> ID：14963503
> 
> 赞同：0
> 
> 时间：2013-02-19T17:17:12.620
> 
> 标签：c#, xml, xelement

我有这样的xml

```
XElement xe = "<root>
    <mynode>
        Text with link <a href=''>Test</a>
    </mynode>
</root>";

public static string GetHtmlFromXElement(this XElement xe)
{
    return xe.ToString();
} 
```

如果我使用

```
string result = xe.Element("mynode").GetHtmlFromXElement(); 
```

我明白了

```
<mynode>Text with link <a href=''>Test</a></mynode> 
```

但是我需要

```
Text with link <a href=''>Test</a> 
```

如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:27:48.033

[这](https://stackoverflow.com/questions/3793/best-way-to-get-innerxml-of-an-xelement)看起来大致是同一个问题，但有一些非常深入的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:31:46.317

尝试

```
string result = xe.Element("mynode").Value; 
```

# c# - Visual Studio 中是否有帮助程序找到特定关键字所需的模块？

> ID：14963504
> 
> 赞同：0
> 
> 时间：2013-02-19T17:17:14.210
> 
> 标签：c#, visual-studio, module, ide, intellisense

Visual Studio 2012 是否具有根据关键字定位所需模块的功能？我发现自己花了相当多的时间寻找正确的模块来引用各种关键字的“使用”语句。例如，今天我必须在网上搜索以了解我需要**System.ComponentModel**才能将**DisplayName**属性（或我猜测的任何其他属性）与类属性一起使用。在 Java/Eclipse 中，IDE 有一个热键，它将尝试为模块定位一个它在当前上下文中标记为未解析的关键字。Visual Studio 2012 中是否有类似的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T17:18:40.723

像[`Resharper`](http://www.jetbrains.com/resharper/)（付费！）这样的工具将使工作变得容易得多。它几乎已成为使用 Visual Studio 进行 C#/VB 开发的事实标准。Resharper 也可以引用程序集*并*添加`using`语句。

话虽如此，在输入类名（在这种情况下）后使用`Ctrl`+ ，它应该建议命名空间。但是为此，必须引用程序集，而且很多时候可能不会。`.``DisplayName`

重申一下，如果可能的话，请使用 Resharper。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:22:57.563

如果您已经引用了适当的*程序集*，如果您将光标放在麻烦的名称中，Visual Studio 将提供帮助。例如，如果您尝试应用该属性：

```
[DisplayName] 
```

...如果您将文本插入符号放入`DisplayName`并按 Ctrl 句点，它应该为您提供添加适当`using`指令的选项。（或单击名称左下角的小栏，应该会出现。）

我不*相信*Visual Studio 为您提供添加程序集引用以查找缺失类型的选项。

# elasticsearch - Elasticsearch 查询流行度的任何方法？

> ID：14963506
> 
> 赞同：1
> 
> 时间：2013-02-19T17:17:16.653
> 
> 标签：elasticsearch, elastica

我是 Elasticsearch 的新手，并提出搜索建议来搜索视频，现在使用以下查询（我正在使用 Elastica 库，所以它只是一个打印的数组）

```
[查询] => 数组
    (
        [query_string] => 数组
            (
                [查询] => Mac OS
                [default_field] => 标题
            )

    )

[字段] => 数组
    (
        [0] => 标题
        [1] => 视频ID
    )

[来自] => 0
[大小] => 5

```

这给了我一些安静的相关结果“Mac OSx”“Mac OS Lion”等。我的问题是，我如何为索引值添加我自己的评分或评级..例如，如果有人搜索“Mac OS Lion”，我可以将其受欢迎程度提高 1，以便下次它应该排在首位 或者有更好的选择吗？

PS 我也是 ElasticSearch 术语的新手，也许是我现在还找不到解决方案的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:36:22.867

ElasticSearch 提供了多种机制来提高文档或术语的分数，例如：

*   [自定义提升因子查询](http://www.elasticsearch.org/guide/reference/query-dsl/custom-boost-factor-query.html)
*   [自定义分数查询](http://www.elasticsearch.org/guide/reference/query-dsl/custom-score-query.html)
*   [提升查询](http://www.elasticsearch.org/guide/reference/query-dsl/boosting-query.html)

一般的想法是，您可以根据一个或多个字段的值来提高文档的分数。在您的情况下，您可能希望拥有一个“受欢迎程度”字段，该字段已更新并用于提升文档的价值。这取决于您如何在内部实现代码。

[本教程展示了如何实现“精选结果”](http://www.fullscale.co/blog/2013/01/24/Implementing_Featured_Results_With_ElasticSearch.html)，这是一个类似的概念。他们使用了[Constant Score 查询](http://www.elasticsearch.org/guide/reference/query-dsl/constant-score-query.html)。

# php - 在 OpenSUSE 12.1 上安装 phpize

> ID：14963507
> 
> 赞同：2
> 
> 时间：2013-02-19T17:17:18.123
> 
> 标签：php, opensuse

我正在尝试在 OpenSUSE 12.1 上安装 phpize。我已经尝试了以下结果。

```
$ sudo zypper install phpize
Loading repository data...
Reading installed packages...
'phpize' not found in package names. Trying capabilities.
No provider of 'phpize' found.
Resolving package dependencies...

Nothing to do.

$ sudo zypper install php5-dev
Your password:
Loading repository data...
Reading installed packages...
Package 'php5-dev' not found.
Resolving package dependencies...

Nothing to do.

$ sudo zypper install phpcli-5.3.2-1rt.i686.rpm
Your password:
Loading repository data...
Reading installed packages...
Resolving package dependencies...

Problem: nothing provides /usr/src/rpm/BUILD/dev/phpcli-5.3.2/sapi/cli/php needed by     phpcli-5.3.2-1rt.i686
 Solution 1: do not install phpcli-5.3.2-1rt.i686
 Solution 2: break phpcli-5.3.2-1rt.i686 by ignoring some of its dependencies

Choose from above solutions by number or cancel [1/2/c] (c): c 
```

彼得，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T18:01:22.197

```
sudo zypper install php5-devel 
```

# c++ - C++ 滥用模板或编译器字符串文字与模板比较的问题

> ID：14963511
> 
> 赞同：0
> 
> 时间：2013-02-19T17:17:30.773
> 
> 标签：c++, string, templates, comparison, literals

当我在阅读《C++ Primer》（第4版）第16.1章时，有一个简单的模板demo：

```
// implement strcmp-like generic compare function
// returns 0 if the values are equal, 1 if v1 is larger, -1 if v1 is smaller
template <typename T>
int compare(const T &v1, const T &v2)
{
    if (v1 < v2) return -1;
    if (v2 < v1) return 1;
        return 0;
} 
```

main函数中的调用：

```
int main ()
{
    // T is int;
    // compiler instantiates int compare(const int&, const int&)
    cout << compare(1, 0) << endl;
    // T is string;
    // compiler instantiates int compare(const string&, const string&)
    string s1 = "hi", s2 = "world";
    cout << compare(s1, s2) << endl;
    return 0;
} 
```

我对这段代码做了几处修改：

```
//----------------------------test.cpp start----------------
#include <iostream>
#include <string>

using namespace std;

template<class T>
int myCompare(const T &v1, const T &v2){
    cout << v1 << " " << ((v1 > v2) ? (">") : ((v1 < v2) ? ("<") : ("="))) << " " << v2 << endl;
    return (v1 > v2) ? (1) : ((v1 < v2) ? (-1) : 0);
};

int main(void) {
    int iRes;
    cout << "String 1 : " << "A"<<endl;
    cout << "String 2 : " << "a"<<endl;
    iRes = myCompare("A", "a");
    cout << "A " << ((iRes == 1) ? (">") : ((iRes == (-1)) ? ("<") : ("="))) << " a" << endl;
    return 0;
};
//----------------------------test.cpp end---------------- 
```

编译运行时出现问题：

在 VS2008 下，它给出：

```
String 1 : A
String 2 : a
A > a
A > a 
```

在 g++ (Debian 4.4.5-8) 4.4.5 下，它给出：

```
String 1 : A
String 2 : a
A < a
A < a 
```

正确答案是`**A<a**`。

但是，当我注释掉以下内容时：

```
cout << "String 1 : " << "A" << endl;
cout << "String 2 : " << "a" << endl; 
```

在 VS2008 下，它给出：

```
String 1 : A
String 2 : a
A < a
A < a 
```

在 g++ (Debian 4.4.5-8) 4.4.5 下，它给出：

```
String 1 : A
String 2 : a
A > a
A > a 
```

编译命令如下：

```
g++ test.cpp -o test -Wall -O0 
```

我想知道为什么会发生这种情况？问题 (A?B:C) 表达式是我用错了吗？看来我的代码是正确的。它困扰了我好几天。任何帮助，将不胜感激。

* * *

结案！

我将 myCompare() 调用替换为以下内容：

```
iRes=myCompare(static_cast<string>("A"), static_cast<string>("a")); 
```

有用。无论我如何改变上下文，它总是给出正确的答案。我应该知道我在比较两个`const char*`，我试一试只是为了确定。

我在这里学到的教训是，这个模板可以实例化为两个函数：

```
int compare(const char* &v1, const char* &v2);     // two pointers
int compare(const string &v1, const string &v2);   // two objects 
```

感谢你们提供的所有帮助。非常感谢！祝你有美好的一天！

* * *

附加信息。

我在 myCompare 函数中添加了一个简单的表达式：

```
cout<<"the type is : "<<typeid(T).name() <<endl; 
```

这给出了关于 T 已被实例化的类型的清晰类型信息。整个代码如下：

```
//----------------------------test.cpp start----------------
#include <iostream>
#include <string>
#include <typeinfo>

using namespace std;

template<class T>
int myCompare(const T &v1, const T &v2){
    cout<<"the type is : "<<typeid(T).name() <<endl;
    cout<<v1<<" "<<((v1>v2)?(">"):((v1<v2)?("<"):("=")))<<" "<<v2<<endl;
    return (v1>v2)?(1):((v1<v2)?(-1):0);
};

int main(void){
    int iRes;
    iRes=myCompare(1234, 3);
    iRes=myCompare("test","poor");
    iRes=myCompare(static_cast<string>("test"),static_cast<string>("poor"));
    iRes=myCompare(21.23,4.0);
    return 0;
};

//----------------------------test.cpp end---------------- 
```

这个程序的结果是：

```
the type is : i
1234 > 3
the type is : A5_c
test > poor
the type is : Ss
test > poor
the type is : d
21.23 > 4 
```

请注意：

```
1, #include <typeinfo> should be included.
2, the second comparison is incorrect, it simply compares the addresses of the constant char array rather than string stored in the constant char array. 
```

希望这能帮助像我这样在模板上苦苦挣扎的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:24:30.183

您当前正在比较指针的值，而不是将`const char *`其视为字符串，这几乎不是您想要的。如果你想比较`const char *`为`std::string`s，你应该专门化你的模板。

```
template<>
int myCompare(const char *const &v1, const char *const &v2){
    return myCompare<std::string>(v1, v2);
}; 
```

或者，`strcmp`在这种情况下打电话，

```
template<>
int myCompare(const char *const &v1, const char *const &v2){
    return strcmp(v1, v2);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:25:24.983

您的代码与原始代码之间的区别在于类型推断为`T`. 在最初，他们将`std::string`对象传递到`compare()`. 您正在传递 type 的字符文字，它`const char[]`会衰减到`const char*`模板参数推导中。

换句话说，您的函数最终会比较文字的地址，而不是它们的内容。

# python - 如何通过结构远程利用本机 Windows ODBC 驱动程序？

> ID：14963518
> 
> 赞同：0
> 
> 时间：2013-02-19T17:17:50.280
> 
> 标签：python, odbc, cygwin, fabric

我可以连接到在 Windows 7 上本地运行我的[pypyodbc](http://code.google.com/p/pypyodbc/)[的 cygwin 兼容分支](https://bitbucket.org/yekibud/pypyodbc)的系统 DSN ，但是当我尝试通过 SSH/fabric 运行相同的脚本时，出现权限错误：

```
[192.168.x.x] out:     conn = pyodbc.connect('DSN=xxx;PWD=xxx')
[192.168.x.x] out:   File "/home/tschmidt/.virtualenvs/dashboard/src/pypyodbc/pypyodbc.py", line 2081, in __init__
[192.168.x.x] out:     self.connect(connectString, autocommit, ansi, timeout, unicode_results, readonly)
[192.168.x.x] out:   File "/home/tschmidt/.virtualenvs/dashboard/src/pypyodbc/pypyodbc.py", line 2129, in connect
[192.168.x.x] out:     validate(ret, SQL_HANDLE_DBC, self.dbc_h)
[192.168.x.x] out:   File "/home/tschmidt/.virtualenvs/dashboard/src/pypyodbc/pypyodbc.py", line 989, in validate
[192.168.x.x] out:     ctrl_err(handle_type, handle, ret)
[192.168.x.x] out:   File "/home/tschmidt/.virtualenvs/dashboard/src/pypyodbc/pypyodbc.py", line 974, in ctrl_err
[192.168.x.x] out:     raise Error(state,err_text)
[192.168.x.x] out: pypyodbc.Error: ('HY000', "[HY000] [Microsoft]
    [ODBC Microsoft   Access Driver] The Microsoft Jet database engine cannot 
    open the file '(unknown)'.  It is already opened exclusively by another user, 
    or you need permission to view its data.") 
```

使用 MDBTools 不是一个选项，因为我需要连接到只有 Windows 驱动程序的其他数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:05:26.503

我可以通过切换到 Windows XP 来解决这个问题。不过，仍然想知道问题的原因是什么。我假设 Windows 7 中的新权限。

# android - 是否有必要同时实现 LoaderCallbacks 和 OnLoadCompleteListener 以获取 ContentProvider 更改的通知？

> ID：14963524
> 
> 赞同：0
> 
> 时间：2013-02-19T17:18:15.287
> 
> 标签：android, android-contentprovider, android-cursorloader

我有一个应用程序正在使用`Loader`s 获取数据库，该数据库也正在由`IntentService`. `Loader`我通过实现从 接收数据，该`LoaderCallbacks`实现工作正常。

我也`ContentResolver#notifyChange(Uri, ContentObserver)`用来触发重新加载。但是，这只在我`Cursor#setNotificationUri(Uri)`事先打电话时才有效。

我在任何文档中都找不到对后一种方法的引用，实际上这似乎可能导致崩溃：另请参阅

[来自 ContentProvider 的 SimpleCursorAdapter 中的 IllegalStateException“尝试重新打开已经关闭的对象”](https://stackoverflow.com/questions/14956608/illegalstateexception-attempt-to-re-open-an-already-closed-object-in-simplecur)

但是，如果没有此调用，`Cursor`则`LoaderCallbacks#onLoadFinished(Loader<Cursor>, Cursor)`只会在初始加载后被点击，而不是在通知之后。我是否*还*需要实现一个`OnLoadCompleteListener`完全一样的事情？

`ContentProvider`查询方法：

```
class MyContentProvider extends ContentProvider {
//...

    @Override
    public Cursor query(Uri uri, String[] projection, String selection,
            String[] selectionArgs, String sortOrder) {
        SQLiteDatabase db = mOpenHelper.getReadableDatabase();
        Cursor query = db.query(getTableName(uri), projection, selection, selectionArgs, null, null, sortOrder);
        query.setNotificationUri(getContext().getContentResolver(), uri);
        return query;
    }

//...
} 
```

典型`LoaderCallbacks`：

```
LoaderCallbacks<Cursor> mCallbacks = new LoaderCallbacks<Cursor>() {

    @Override
    public void onLoaderReset(Loader<Cursor> loader) {
        mArticleAdapter.swapCursor(null);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        if(cursor.isClosed()) {
            Log.d(TAG, "CURSOR RETURNED CLOSED");
            Activity activity = getActivity();
            if(activity!=null) {
                activity.getLoaderManager().restartLoader(mFragmentId, null, mCallbacks);
            }
            return;
        }
        mArticleAdapter.swapCursor(cursor);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {
        triggerArticleFeed();
        CursorLoader cursorLoader = null;

        if(id == mFragmentId) {
            cursorLoader = new CursorLoader(getActivity(),
                                            MyContentProvider.ARTICLES_URI,
                                            null,
                                            ArticlesContentHelper.ARTICLES_WHERE,
                                            ArticlesContentHelper.ARTICLES_WHEREARGS,
                                            null);
        }
        return(cursorLoader);
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:50:09.923

实现这两个监听器是一个非常糟糕的主意：

```
02-19 17:46:25.139: E/AndroidRuntime(24886): FATAL EXCEPTION: main
02-19 17:46:25.139: E/AndroidRuntime(24886): java.lang.IllegalStateException: There is already a listener registered
02-19 17:46:25.139: E/AndroidRuntime(24886):    at android.content.Loader.registerListener(Loader.java:152)
02-19 17:46:25.139: E/AndroidRuntime(24886):    at android.app.LoaderManagerImpl$LoaderInfo.start(LoaderManager.java:273)
02-19 17:46:25.139: E/AndroidRuntime(24886):    at android.app.LoaderManagerImpl.installLoader(LoaderManager.java:523)
02-19 17:46:25.139: E/AndroidRuntime(24886):    at android.app.LoaderManagerImpl.createAndInstallLoader(LoaderManager.java:510)
02-19 17:46:25.139: E/AndroidRuntime(24886):    at android.app.LoaderManagerImpl.initLoader(LoaderManager.java:563) 
```

所以其实这个问题的答案是：

有必要**不**实现两个侦听器。

# ios - 我希望用户按下按钮来选择 NStimer 触发之前的时间

> ID：14963526
> 
> 赞同：0
> 
> 时间：2013-02-19T17:18:19.880
> 
> 标签：ios

我在这里几乎是个菜鸟，甚至写标题也很困难……但是这里有

我试图让我的应用程序执行此操作 1）用户按下按钮 2）按钮将按下转换为 int 值 3）然后将该值传递给 NStimer 并且计时器计数直到达到 int 值（即 30 秒如果 int 值为 30 4) 程序改变屏幕上的图像

我已经让它启动 NStimer 并使用变量按钮更改屏幕，通过手动更改此值，我可以将计时器设置为在不同时间后关闭

我不能做的是在按下按钮更改值后让计时器触发。如果我使用 NSLog，我可以看到值正在变化，但不会影响 NSTimer....任何想法

对不起，如果那有点啰嗦，但这里是代码......任何帮助都会很棒......因为我失去了大部分头发试图用 do while 循环和 if 语句解决这个问题

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
{
    UIImageView *theImage;
    int imageCount;
    int button;
    button = 10;
}

@property (strong, nonatomic) IBOutlet UIImageView *theImage;
@property (strong, nonatomic) IBOutlet UIButton *press;

@end

//
//  ViewController.m
//  use ns timer to display an image
//
//  Created by Clive Dancey on 19/02/2013.
//  Copyright (c) 2013 Clive Dancey. All rights reserved.
//

#import "ViewController.h"

@interface ViewController ()

@property (strong, nonatomic) IBOutlet UILabel *label1;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [NSTimer scheduledTimerWithTimeInterval:button
                                     target:self
                                     selector:@selector(animateFunction)
                                     userInfo:nil
                                     repeats:YES];
}

- (IBAction)press:(id)sender
{
    button = 1;
}

- (void)animateFunction
{
    NSLog(@"Timer heartbeat %i", button);
    NSString *imageName = [NSString stringWithFormat:@"EZDecline.png"];
    [_theImage setImage:[UIImage imageNamed:imageName]];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:35:26.703

好的，我知道了，

1）从 viewDidLoad 中删除它

```
[NSTimer scheduledTimerWithTimeInterval:button
                             target:self
                             selector:@selector(animateFunction)
                             userInfo:nil
                             repeats:YES]; 
```

2) 将此行添加到 .h 文件

```
@property (nonatomic, strong) NSTimer *myTimer; 
```

3）更改按钮按下事件中的代码，（像这样）

```
- (IBAction)press:(id)sender {
button=1;
if(_myTimer) [_myTimer invalidate];
_myTimer = [NSTimer scheduledTimerWithTimeInterval:button
                             target:self
                             selector:@selector(animateFunction)
                             userInfo:nil
                             repeats:YES]; 
```

}

# jquery - 如果该元素正在动画（）ed，jQuery是否会取消该元素上的remove（）？

> ID：14963528
> 
> 赞同：0
> 
> 时间：2013-02-19T17:18:26.960
> 
> 标签：jquery

我这里有这段代码，它应该淡出/胺化到 0 宽度，然后 remove() 一些元素。但由于某种原因， remove() 不起作用。

```
$('#submitUsage').click(function(){
  var bahoooga = $('#inputUsage').val().replace(/\D/g,'');
  var bahoooga = bahoooga + " KWh";
  $(this).parent().parent().children('td:nth-child(2)').html(bahoooga);
  $('#editData td:last-child, #editData th:last-child').animate({
    width: '40px'
  }, 1500);
  $('#inputUsage').animate({
    width: '0px',
    opacity: '0'
  }, 1000);
  $('#cancelUsage, #submitUsage').fadeOut(1000);
  $('#inputUsage, #cancelUsage, #submitUsage').remove();
}); 
```

我在 setTimeout() 函数中有 remove()，这是我想要的，但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:23:32.050

尝试像这样链接那些：

```
$('#inputUsage').animate({
    width: '0px',
    opacity: '0'
}, 1000).promise().done(function(){
  $('#cancelUsage, #submitUsage').fadeOut(1000, function(){
     $('#inputUsage, #cancelUsage, #submitUsage').remove();
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:28:22.157

动画完成后，您应该只删除元素。您不能全部完成并假设它们完全同时完成（即使它们都在 1000 毫秒）。

```
target.fadeOut(300, function(){ $(this).remove();}); 
```

对你来说，它看起来像：

```
$('#inputUsage').animate({
  width: '0px',
  opacity: '0'
  }, 1000).promise().done(function() { $(this).remove(); });

$('#cancelUsage, #submitUsage').fadeOut(1000, function() { $(this).remove(); }); 
```

# android - 无法使进度条工作

> ID：14963529
> 
> 赞同：0
> 
> 时间：2013-02-19T17:18:26.380
> 
> 标签：android, android-activity, progress-bar

嗨，如果我不确定我做错了什么，我有一个挑战。

我有一个从 Web 服务获取数据并将其导入手机本地数据库的应用程序。

我有一堂课叫`ConnectServer`. 这个类有一个名为的公共方法`updatedata`。在活动中使用数据时，我调用该`ConnectServer.updatedata()`方法来“刷新”本地数据库。在活动中，我正在执行以下操作：

```
final ProgressDialog dialog = ProgressDialog.show(this, "",this.getText(R.string.txt_fetch_data), true);

new Thread() {
    public void run() {
    try{
        ConnectServer.updatedata();
    } catch (Exception e) {
        Log.e("tag", e.getMessage());
    }
    // dismiss the progress dialog
    dialog.dismiss();
    }
}.start(); 
```

到目前为止，一切都很好。我想要实现的是，它显示的不是平面对话框，而是一个进度条。

```
public class ConnectServer {
    public static String updatedata(Context _context){
        importData(callServer());
    } 
    private String callServer(){
      // https request to server returns JSON
    }

 private importData(String data){
     // loop thru data and insert / update local sqlite3 database
     //
     // TODO ----> update progress bar on each loop  <----
     //
}} 
```

请帮忙。我一直在花费数小时来弄清楚如何做到这一点

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:30:38.843

请注意，所有 UI 调用都必须在 UI 线程上运行。

例如调用类似`ProgressDialog.show`or `dialog.dismiss()`。为了确保它们在 UI 线程上运行，您可以：

*   调用 UI 处理程序中的那些，例如`onCreate`，`onClick`...等...
*   嵌入那些`runOnUiThread`
*   如果您使用看起来像的单独线程，请使用 ASyncTask 并调用它们`onPostExecute`或`onProgressUpdate`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:15:29.180

我让它工作

```
 dialog=new ProgressDialog(AssetListActivity.this);
    dialog.setTitle(getText(R.string.lbl_connecting));
    dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    dialog.setProgress(0);
    dialog.setMax(0);
    dialog.show();

    final Runnable r = new Runnable(){
    public void run(){
    //update current gui after data is loaded
        updategui();}
    };
    new Thread() {
        public void run() {
        try{
        Looper.prepare();
        ConnectServer.updatedata(dialog);
        } catch (Exception e) {
        Log.e("tag", e.getMessage());
        }
        mHandler.post(r);
        dialog.dismiss();

        }
        }.start(); 
```

在 ConnectServer 类中， callServer() 方法

```
 // vObject.getString("count") is the record count
            final int a = Integer.parseInt(vObject.getString("count"));
            if (dialog != null){
                Runnable task = new Runnable()
                {
                    public void run() 
                    {
                     dialog.setTitle(_context.getText(R.string.lbl_importing));
                     dialog.setMax(a);
                    }
                };
                new Handler(Looper.getMainLooper()).post(task);

            } 
```

# ios - UIImage 存储在 CoreData 到 UIWebView HTML Doc

> ID：14963538
> 
> 赞同：0
> 
> 时间：2013-02-19T17:18:46.987
> 
> 标签：ios, objective-c, core-data, uiwebview, uiimage

我有一个包含 UIImage 作为其属性之一的 CoreData 实体。如果有区别，图像将“存储在外部记录文件中”。

我想在 UIWebView 中显示图像作为 HTML 文档的一部分，但我不知道该怎么做。

我不能只使用 gifdata 并将该数据加载到 UIWebView 中，因为我希望它作为 HTML 字符串的一部分加载，即我也有其他文本和布局。

我想我可以使用占位符文件名并将图像保存到目录中，然后在视图消失后将其删除？

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:56:15.030

从技术上讲，您可以将图像数据编码为 base64 并将其嵌入为`data:`URL，但仅引用图像文件可能是一个更好的主意。

您可能需要考虑将所有图像作为文件存储在磁盘上，然后从 Core Data 数据库中引用这些文件。将图像数据直接存储在数据库中确实会损害性能。

# javascript - Javascript 退出页面事件

> ID：14963542
> 
> 赞同：0
> 
> 时间：2013-02-19T17:18:55.260
> 
> 标签：javascript, html, css

好的，所以我已经弄清楚如何使用 window.onbeforeunload 退出页面并进行确认，但是如何修改出现的框？就像添加 css 和 html 一样，不仅仅是一些显示“您确定要退出此页面吗？”的文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:20:35.697

`onbeforeunload`对于这个事件，你几乎无能为力。

这是为了防止 JavaScript*捕获*用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:50:06.133

不幸的是，您无法修改对话框样式。

您可以尝试根据自己的目的尽可能地对其进行自定义，例如：

```
 window.onbeforeunload = function() {
        return 'You have unsaved changes!';
    } 
```

[阅读MSDN](http://msdn.microsoft.com/en-us/library/ms536907%28VS.85%29.aspx)上有关此主题的文档

# android - 如何在Andengine中拖动场景背景？

> ID：14963544
> 
> 赞同：0
> 
> 时间：2013-02-19T17:19:03.743
> 
> 标签：android, andengine

我最近使用Andengine 来开发一个游戏。一个问题是如何在我的安卓手机中拖动一个大场景背景？有没有人来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:04:40.653

这是来自 AndEngine 的 TouchDragExample：

```
public class TouchDragExample extends SimpleBaseGameActivity {
    // ===========================================================
    // Constants
    // ===========================================================

    private static final int CAMERA_WIDTH = 720;
    private static final int CAMERA_HEIGHT = 480;

    // ===========================================================
    // Fields
    // ===========================================================

    private BitmapTextureAtlas mBitmapTextureAtlas;
    private ITextureRegion mFaceTextureRegion;

    // ===========================================================
    // Constructors
    // ===========================================================

    // ===========================================================
    // Getter & Setter
    // ===========================================================

    // ===========================================================
    // Methods for/from SuperClass/Interfaces
    // ===========================================================

    @Override
    public EngineOptions onCreateEngineOptions() {
        Toast.makeText(this, "Touch & Drag the face!", Toast.LENGTH_LONG).show();

        final Camera camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

        return new EngineOptions(true, ScreenOrientation.LANDSCAPE_FIXED, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), camera);
    }

    @Override
    public void onCreateResources() {
        BitmapTextureAtlasTextureRegionFactory.setAssetBasePath("gfx/");

        this.mBitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 32, 32, TextureOptions.BILINEAR);
        this.mFaceTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "face_box.png", 0, 0);
        this.mBitmapTextureAtlas.load();
    }

    @Override
    public Scene onCreateScene() {
        this.mEngine.registerUpdateHandler(new FPSLogger());

        final Scene scene = new Scene();
        scene.setBackground(new Background(0.09804f, 0.6274f, 0.8784f));

        final float centerX = (CAMERA_WIDTH - this.mFaceTextureRegion.getWidth()) / 2;
        final float centerY = (CAMERA_HEIGHT - this.mFaceTextureRegion.getHeight()) / 2;
        final Sprite face = new Sprite(centerX, centerY, this.mFaceTextureRegion, this.getVertexBufferObjectManager()) {
            @Override
            public boolean onAreaTouched(final TouchEvent pSceneTouchEvent, final float pTouchAreaLocalX, final float pTouchAreaLocalY) {
                this.setPosition(pSceneTouchEvent.getX() - this.getWidth() / 2, pSceneTouchEvent.getY() - this.getHeight() / 2);
                return true;
            }
        };
        face.setScale(4);
        scene.attachChild(face);
        scene.registerTouchArea(face);
        scene.setTouchAreaBindingOnActionDownEnabled(true);

        return scene;
    }

    // ===========================================================
    // Methods
    // ===========================================================

    // ===========================================================
    // Inner and Anonymous Classes
    // ===========================================================
} 
```

您还可以使用路径修饰符移动图像：

```
yourBackgroundSprite.registerEntityModifier(new PathModifier(parameters...)); 
```

或者，您可以使用 setChaseEntity() 设置相机以跟随您想要平移的图像之外的其他实体。

最后，看一下 AndEngine 附带的 AutoParallaxBackgroundExample。这不仅会给你一个移动背景的例子，而且会给你一个背景的多个视差层的例子。

# java - Java - 阶乘基数转换

> ID：14963551
> 
> 赞同：0
> 
> 时间：2013-02-19T17:19:25.540
> 
> 标签：java, loops, for-loop, factorial

我对编程比较陌生，但我正在尝试编写一个程序，将数字从 10 转换为阶乘，以帮助我解决更具挑战性的问题。阶乘基数将一个数表示为阶乘之和；例如，19 (base 10) = 301 (base factorial)，因为 3*3!+0*2!+1*1!=19。[你可以在http://en.wikipedia.org/wiki/Factorial_number_system](http://en.wikipedia.org/wiki/Factorial_number_system)看到比我更好的解释。对于您可以输入的数字，完成此操作的最简单方法是什么？到目前为止，我已经能够简单地打印每个小于 10 的数字的阶乘：

```
for (int base = 1; base < 10; base++){
    int factorial = 1;
    for (int i = 1; i < base; i++){
        factorial = factorial*i;}
    System.out.println(factorial);} 
```

我确信我犯了许多初学者错误；但我非常感谢您为此提供的任何帮助。感谢您抽出宝贵时间，感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:22:55.170

```
for (int base = 1; base < 10; base++);{ 
```

在 for 语句和左大括号之间不应该有分号。编译器正在解释它，就好像你的意思

```
for (...) { /* empty block */ }
{ // new, unrelated block
  ...
} 
```

对于实际实现，您可以查看 Wikipedia 文章：

> 例如，可以将一个数字转换为从右到左生成数字的阶乘表示，方法是重复将该数字除以位值（1、2、3，...），将余数作为数字，然后继续整数商，直到该商变为 0。

所以像（未经测试，伪代码）......

```
int number = 463;
int radix = 1;
String result = ""; // prob use int[] or list in real life?

while (number > 0) {
   int div = number / radix;
   int remainder = number % radix;
   result = remainder + result;
   number = div;
   ++radix;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:25:28.963

试试这个

```
public int convertToFactorial(int x10){
    int length = String.valueOf(x10).length();
        String[] vals = String.valueOf(x10).split("");

        int result = 0;
        for (int base = 1; base < length + 1; base++){
            int factorial = 1;
            for (int i = vals.length - base; i > 0; i--){
                factorial = factorial*i;
            }
            result += Integer.parseInt(vals[base]) * factorial;
        }
        System.out.println(result);
     return result;
} 
```

ps看java代码约定ant语言结构，不应该写；循环防御后。

# c# - 如何查询 MySQL 的 .Net 连接器连接池的当前大小？

> ID：14963556
> 
> 赞同：5
> 
> 时间：2013-02-19T17:19:36.753
> 
> 标签：c#, mysql

是否有一种编程方式来查找由 .Net 连接器/MySql.Data.dll 维护的与数据库的当前打开连接数？

我有兴趣在使用库的同一程序中收集这些信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T17:53:56.567

连接池在客户端执行。要访问它，您需要使用反射来访问 MySqlPoolManager 和 MySqlPool 类，它们都是 MySql.Data 程序集的内部。

从本质上讲，您需要使用反射来访问池。就是这样：

```
Assembly ms = Assembly.LoadFrom("MySql.Data.dll");
Type type = ms.GetType("MySql.Data.MySqlClient.MySqlPoolManager");
MethodInfo mi = type.GetMethod("GetPool", BindingFlags.Static | BindingFlags.Public);
var pool = mi.Invoke(null, new object[] { new MySqlConnectionStringBuilder(connString) }); 
```

你会注意到你必须传入一个`MySqlConnectionStringBuilder`对象。它为每个连接字符串创建一个单独的池，因此请使用您在应用程序中使用的相同连接字符串（它需要完全相同）。

然后，您可以访问私有池字段和属性（同样，使用反射），以获取您需要的信息。特别是，“可用”字段和“NumConnections”属性可能是您感兴趣的。还有“idlePool”（a `Queue<>`）和“inUsePool”（a `List<>`），您也可以访问它们，尤其是计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-15T08:51:21.333

感谢[Petes 对这个问题的回答](https://stackoverflow.com/a/14964172/2716218)和[另一个答案](https://stackoverflow.com/a/37425242/2716218)，我能够构建以下函数：

```
 /// <returns>totalAvailable, inUseCount, idleCount</returns>
    public int[] GetPoolStatsViaReflection(MySqlConnectionStringBuilder connectionStringBuilder)
    {
        var asm = typeof(MySqlConnectionStringBuilder).Assembly;
        var poolManagerType = asm.GetType("MySql.Data.MySqlClient.MySqlPoolManager"); // internal sealed
        var poolType = asm.GetType("MySql.Data.MySqlClient.MySqlPool"); // internal sealed

        var pool = poolManagerType.InvokeMember("GetPool", System.Reflection.BindingFlags.InvokeMethod | System.Reflection.BindingFlags.Static | System.Reflection.BindingFlags.Public, null, null, new object[] { connectionStringBuilder });

        const System.Reflection.BindingFlags nonPublicInstanceField = System.Reflection.BindingFlags.GetField | System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Instance;
        var totalAvailable = (int)poolType.InvokeMember("available", nonPublicInstanceField, null, pool, new object[] { });
        // List<Driver>
        var inUsePool = (System.Collections.ICollection)poolType.InvokeMember("inUsePool", nonPublicInstanceField, null, pool, new object[] { });
        // Queue<Driver>
        var idlePool = (System.Collections.ICollection)poolType.InvokeMember("idlePool", nonPublicInstanceField, null, pool, new object[] { });

        return new[] {totalAvailable, inUsePool.Count, idlePool.Count};
    } 
```

# swfupload - SwfUpload 返回 HTTP 错误 502

> ID：14963566
> 
> 赞同：2
> 
> 时间：2013-02-19T17:20:09.693
> 
> 标签：swfupload

我正在使用 SwfUploader。在几个测试系统上，上传工作正常，第三次，它得到错误 502。是 HTTP 错误 502（来自网关的错误响应）还是 swf 错误？跟踪此问题的任何提示？

这是打开调试标志的输出：

WF DEBUG：ReturnUploadStart()：文件被 startUpload 事件接受并准备好进行标准上传。开始上传到 /php/upload.php 文件 ID：SWFUpload_0_0 SWF 调试：事件：uploadProgress (OPEN)：文件 ID：SWFUpload_0_0 SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：4653056。总计：47326876 SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：6062080。总计：47326876 SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：16744448。总计：47326876 SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：24281088。总计：47326876 SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：33128448。总计：47326876 SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：42532864。总计：47326876 SWF 调试：事件：uploadProgress：文件 ID：SWFUpload_0_0。字节：47326876。总计： **SWF 调试：事件：uploadError：HTTP 错误：文件 ID：SWFUpload_0_0。HTTP 状态：** 502。SWF 调试：事件：uploadComplete ：上传周期完成。错误代码：HTTP 错误，文件名：junk.wmv，消息：502

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T13:51:18.893

它说 HTTP 错误，HTTP 状态：502。所以它必须是服务器端生成的 HTTP 状态错误。

通常此类错误会记录到一些错误日志中，请检查这些错误。或者也许有额外的输出——但这并不容易检查。一种方法是使用像[fiddler](http://www.fiddler2.com/fiddler2/)这样的代理- 使用它你应该会看到 502 响应。

# jquery - 在背景图像完全加载之前不显示

> ID：14963567
> 
> 赞同：2
> 
> 时间：2013-02-19T17:20:15.433
> 
> 标签：jquery, ajax

我正在使用 Ajax 将外部 html 加载到页面中，这个外部图像有一个大的背景图像，我希望在背景图像完全加载之前显示加载 gif，这可能吗？

你可以在这里看到我正在做的事情：

点击播放>>>开始游戏。

您将看到地图加载的背景图像。

我目前的jquery代码如下：

```
$(document).bind('ajaxStart', function(){
          $('#loading-image').show();
     }).bind('ajaxStop', function(){
          $('#loading-image').hide();
        });

    $('body').on('click', '.mch-ajax', function(e){
        e.preventDefault();
        $('#mch-overlay').fadeOut(300);
        $("#loading-image").show();
        $( ".content" ).load("game.html", function() {
                $("#loading-image").hide();
        }); 
    }); 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T17:24:57.777

您可以像这样检测图像的负载，

```
var myBackgroundImage = new Image();
myBackgroundImage.src = "/{Image Path}";      

myBackgroundImage.onload = function () {
  //Now do what ever you need to as the image is loaded
}; 
```

# wpf - GraphSharp 树布局 LeftToRight

> ID：14963568
> 
> 赞同：3
> 
> 时间：2013-02-19T17:20:18.397
> 
> 标签：wpf, graph-sharp, tree-left-right

我尝试使用 CodePlex 的 GraphSharp 创建一棵树。

我查看了示例应用程序并尝试“重新设计”该示例。

问题是，如果我尝试以编程方式设置 LayoutAlgorithmType = "Tree"，我会得到一个 TargetInvocationException ......这很神秘，因为在示例中它可以工作。

我的问题是：如何创建具有树布局和从左到右方向的图形。

提前致谢 ：）

我的代码：

```
public partial class MainWindow : Window
{
    private IBidirectionalGraph<object, IEdge<object>> _graphToVisualize;

    public IBidirectionalGraph<object, IEdge<object>> GraphToVisualize
    {
        get { return _graphToVisualize; }
    }

    public MainWindow()
    {
        CreateGraphToVisualize();

        InitializeComponent();
    }

    private void CreateGraphToVisualize()
    {
        var g = new BidirectionalGraph<object, IEdge<object>>();

        string[] vs = new string[5];
        for (int i = 0; i < 5; i++)
        {
            vs[i] = i.ToString();
            g.AddVertex(vs[i]);
        }

        //add some edges
        g.AddEdge(new Edge<object>(vs[0], vs[1]));
        g.AddEdge(new Edge<object>(vs[0], vs[2]));
        g.AddEdge(new Edge<object>(vs[2], vs[3]));
        g.AddEdge(new Edge<object>(vs[1], vs[4]));
        g.AddEdge(new Edge<object>(vs[3], vs[4]));

        layout.LayoutMode = LayoutMode.Automatic;
        layout.LayoutAlgorithmType = "Tree";

        _graphToVisualize = g;

    }
} 
```

xml:

```
<Window x:Class="Test.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:graphsharp="clr-namespace:GraphSharp.Controls;assembly=GraphSharp.Controls"
        xmlns:GraphSharp_Controls="clr-namespace:GraphSharp.Controls;assembly=GraphSharp.Controls"
        xmlns:graph="clr-namespace:GraphSharp.Controls;assembly=GraphSharp.Controls"
        xmlns:Controls="clr-namespace:WPFExtensions.Controls;assembly=WPFExtensions"

        Title="MainWindow" Height="350" Width="525"
        x:Name="root">

    <Grid>
        <Controls:ZoomControl>
            <graph:GraphLayout x:Name="layout" />
        </Controls:ZoomControl>

    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T08:00:12.357

看了graph# lib的源码后，自己找到了解决办法。

首先，您必须将 LayoutAlgorithm 添加到您的命名空间：

```
xmlns:tree="clr-namespace:GraphSharp.Algorithms.Layout.Simple.Tree;assembly=GraphSharp" 
```

之后，您可以向 GraphLayout 添加额外的 LayoutParameter。就我而言，我只是将树的方向从 TopToBottom 更改为 LeftToRight。

```
<graphsharp:GraphLayout x:Name="graphLayout"
                                Graph="{Binding ElementName=root,Path=GraphToVisualize}"
                                LayoutAlgorithmType="Tree"
                                OverlapRemovalAlgorithmType="FSA"
                                HighlightAlgorithmType="Simple" RenderTransformOrigin="0.5,0.5">
            <graphsharp:GraphLayout.LayoutParameters>
                <tree:SimpleTreeLayoutParameters Direction="LeftToRight"></tree:SimpleTreeLayoutParameters>
            </graphsharp:GraphLayout.LayoutParameters>
        </graphsharp:GraphLayout> 
```

因此，如果您想更改图形的参数，您必须查看（例如在 Visual Studio 的解决方案资源管理器中）算法 .->Layout->Simple->Tree -> SimpleTreeLayoutParameters 在我的情况下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-29T22:01:08.593

在代码中：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void root_Loaded(object sender, RoutedEventArgs e)
    {
        CreateGraphToVisualize();
    }

    private void CreateGraphToVisualize()
    {
        var g = new BidirectionalGraph<object, IEdge<object>>();
        string[] vs = new string[5];
        for (int i = 0; i < 5; i++)
        {
            vs[i] = i.ToString();
            g.AddVertex(vs[i]);
        }

        //add some edges
        g.AddEdge(new Edge<object>(vs[0], vs[1]));
        g.AddEdge(new Edge<object>(vs[0], vs[2]));
        g.AddEdge(new Edge<object>(vs[2], vs[3]));
        g.AddEdge(new Edge<object>(vs[1], vs[4]));
        g.AddEdge(new Edge<object>(vs[3], vs[4]));

        //Simple Tree layout parameter variable
        GraphSharp.Algorithms.Layout.Simple.Tree.SimpleTreeLayoutParameters simpleTreeLayoutParameters = new GraphSharp.Algorithms.Layout.Simple.Tree.SimpleTreeLayoutParameters();
        //Simple Tree layout parameter variable values
        simpleTreeLayoutParameters.Direction = GraphSharp.Algorithms.Layout.LayoutDirection.LeftToRight; //THIS IS WHAT YOU EXPECT
        simpleTreeLayoutParameters.LayerGap = 10.0;
        simpleTreeLayoutParameters.OptimizeWidthAndHeight = false;
        simpleTreeLayoutParameters.SpanningTreeGeneration = GraphSharp.Algorithms.Layout.Simple.Tree.SpanningTreeGeneration.DFS;
        simpleTreeLayoutParameters.VertexGap = 10.0;
        simpleTreeLayoutParameters.WidthPerHeight = 2.0;
        //Set layout
        layout.LayoutAlgorithmType = "Tree";
        layout.LayoutParameters = simpleTreeLayoutParameters;
        layout.LayoutMode = LayoutMode.Automatic;
        layout.Graph = g;
    }
} 
```

# java - 检查有效的 URL，URI 构造

> ID：14963569
> 
> 赞同：2
> 
> 时间：2013-02-19T17:20:21.893
> 
> 标签：java, validation, url, uri

我有一个程序可以从网页中删除链接，然后测试链接是否正常工作或损坏。我遇到的一点问题是确保 URL 确实有效。

有问题的链接只是为了确保从最终用户的角度来看网站正常工作。所以主要是 http、https 和 mailto 协议，我实际上不确定我们是否使用了任何其他协议，比如 ftp，但我希望能够处理所有意外情况。

到目前为止，这是我构建 URI 的代码。在此之前，我已经从其他页面抓取了链接：

```
private boolean isValidURI(String checkUrl){
    boolean validURI = false;
    checkUrl = "this could be a link for some reason.com"; //set to link you want to test
    //Decodes checkUrl - Some links may already be encoded. This sets everything to a default of non-encoded urls.
    try {
        checkUrl = URLDecoder.decode(checkUrl, "UTF-8");
    } catch (UnsupportedEncodingException e1) {
        e1.printStackTrace();
        System.out.println("Error 1: "+checkUrl);
    }
    //Encodes checkUrl, allows URLs with various characters.
    try {
        url = new URL(checkUrl);
    } catch (MalformedURLException e2) {
        e2.printStackTrace();
        System.out.println("Error 2: "+checkUrl);
    }

    try {
        uri = new URI(url.getProtocol(), url.getAuthority(), url.getPath(), url.getQuery(), url.getRef());
        System.out.println(uri);
        validURI = true;
    } catch (URISyntaxException e3) {
        e3.printStackTrace();
        System.out.println("Error 3: "+checkUrl);
    }       

    return validURI;
} 
```

我在这里苦苦挣扎的是，如果我在没有有效协议的情况下放入链接，例如“这是link.com”，我会得到

```
at java.net.URL.<init>(Unknown Source)
at java.net.URL.<init>(Unknown Source)
at java.net.URL.<init>(Unknown Source)
at xboxtools.PingUrl.isValidURI(PingUrl.java:106)
at xboxtools.PingUrl.setLinkStatus(PingUrl.java:47)
at xboxtools.PingUrl.<init>(PingUrl.java:28)
at xboxtools.LocaleTab.runLocaleActionPerformed(LocaleTab.java:179)
at xboxtools.LocaleTab$1$1.run(LocaleTab.java:71)
at java.lang.Thread.run(Unknown Source)
Exception in thread "Thread-2" java.lang.NullPointerException
at xboxtools.PingUrl.isValidURI(PingUrl.java:113)
at xboxtools.PingUrl.setLinkStatus(PingUrl.java:47)
at xboxtools.PingUrl.<init>(PingUrl.java:28)
at xboxtools.LocaleTab.runLocaleActionPerformed(LocaleTab.java:179)
at xboxtools.LocaleTab$1$1.run(LocaleTab.java:71)
at java.lang.Thread.run(Unknown Source) 
```

基本上我想做的是测试我抓取的链接是否是有效链接。如果不是，请将 validURI 设置为 false，然后继续下一个链接。

关于我可以做些什么来改进这一点的建议有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:23:11.750

你得到一个 NPE，因为你捕获了一个异常 (MalformedURLException) *，然后继续执行更多代码，就好像什么都没发生一样*。

您的问题与 url 验证无关，只是简单的调试。当遇到你不理解的情况时，你应该首先尝试使用一个像样的调试器来单步调试你的代码。

# android - 以编程方式为 Android 的 CheckBox 设置样式

> ID：14963571
> 
> 赞同：5
> 
> 时间：2013-02-19T17:20:23.503
> 
> 标签：android, checkbox, styling

我有一个扩展 Activity 并以编程方式添加一些 View 项目的类。

```
CheckBox checkBox = new CheckBox(this, null, android.R.style.Widget_CompoundButton_Star); 
```

我想设置一些样式为 Android SDK 星星的复选框。将其样式设置为 Widget_CompoundButton_Star 后，我看不到任何复选框。尽管直接放入 xml 时，该 SDK 样式显然有效。

我在这里错过了什么吗？谢谢

// 正如普拉尼亚尼所说。使用`android.R.attr.starStyle`代替有效。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-05-13T09:39:03.770

您可以设置样式以使用 ContextThemeWrapper 以编程方式查看。

```
CheckBox mCheckBox = new CheckBox(new ContextThemeWrapper(context, R.style.MyCheckBox)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-28T15:09:13.037

我来到这里是为了寻找 CheckBox 的文本而不是 Drawable 的样式，我通过另一种方式找到了解决方案。但是，嘿！让我分享解决方案给未来的自己。

代替：

```
CheckBox cb = new CheckBox(this, null, R.style.yourstyle); 
```

采用：

```
CheckBox cb = new CheckBox(this);
cb.setTextAppearance(this, R.style.yourstyle); 
```

希望它有助于解决问题的主题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-12T16:15:36.743

这是我的工作解决方案：

```
CheckBox checkBox = new CheckBox(new ContextThemeWrapper(this, R.style.CheckBoxStyle)) 
```

# c - 我可以让 fscanf 不跳过空行吗？

> ID：14963577
> 
> 赞同：3
> 
> 时间：2013-02-19T17:20:36.637
> 
> 标签：c, scanf, file-io

我试图让我的程序从文件中读取输入，但不跳过 fscanf 通常执行的空行。扫描文件的文件和循环是：

```
 inFile = fopen("text.txt", "r");

 for(i = 0; fscanf(inFile, "%s", &input[i]) != EOF; i++){
     printf("%d %s\n", i, input[i]);
 } 
```

输出：

```
0 one
1 two
2 three
3 four
4 five
5 six
6 seven
7 eight
8 nine
9 ten
10 eleven
11 twelve
12 thirteen
13 fourteen
14 fifteen
15 sixteen
16 seventeen
17 eighteen
18 nineteen
19 twenty
20 thirty
21 forty
22 fifty
23 sixty
24 seventy
25 eighty
26 ninety 
```

这不是我想要的。我希望读取的文本代表它所说的数组中的位置。即“九十”在输入[89]中找到。

正在读取的文件是：

```
one
two
three
four
five
six
seven
eight
nine
ten
eleven
twelve
thirteen
fourteen
fifteen
sixteen
seventeen
eighteen
nineteen
twenty

thirty

forty

fifty

sixty

seventy

eighty

ninety 
```

这些词中的每一个都应该代表它正在从哪一行读取。我在 20 多行之间添加了空格，所以我可以使用 i 来表示正在读取的数据的行。简而言之，我正在为文本生成器制作一个数字，它将读取

```
999.99 
```

作为

```
nine hundred ninety-nine and 99/100 
```

tl;博士我不想硬编码数组中包含单词的位置，所以我试图让迭代器完成工作，这需要读取的空行占据它们在数组中的位置。

有什么办法可以让 fscanf 在这里完成工作吗？还是我应该使用其他东西？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:35:08.970

我认为你最好使用[`fgets()`](http://linux.die.net/man/3/fgets). 如有必要，您可以使用`sscanf()`结果字符串来解析它。

编辑 - 像这样的东西：

```
inFile = fopen("text.txt", "r");
size_t i = 0;

while (fgets(input[i], LINE_SIZE, inFile))
{
    printf("%d %s\n", i, input[i]);
    ++i;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:52:17.903

您应该查看`fgets()`它读取所有内容，包括换行符。请记住，这些行不是空白的，它们只是新行。此外，`fgets()`这是一个**比**`fscanf()`.

# doctrine-orm - ZF2 学说共享实体池

> ID：14963580
> 
> 赞同：0
> 
> 时间：2013-02-19T17:20:39.793
> 
> 标签：doctrine-orm, zend-framework2

我已经在我的 ZF2 项目上使用 Doctrine 设置了一个多数据库连接，一个用于从数据库读取，另一个用于写入。

单独使用时一切正常，但是当我尝试在同一个实体上使用两者时，例如：

查找用户：

$user = $this-> **getReaderObjectManager** ()->getRepository('Entity\User')->findOneBy(array('username' =>'xpto'));

然后尝试改变一些东西：

$this-> **getWriterObjectManager** ()->persist($user); $user->setBlabla('bla');

然后尝试冲洗它：

$this-> **getWriterObjectManager** ()->flush();

什么都没有发生。不好。

似乎**readerObjectManager**和**writerObjectManager**有他们独立的“实体池”，所以我不能坚持和改变另一个经理的一个实体。

有没有办法将实体从一个管理器传递给另一个管理器，或者引用它，或者两个管理器共享相同的“实体池”？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:31:20.990

您不能跨多个实体管理器拥有托管实体：这是不受支持的，并且可能导致意外行为。

如果您确实需要将读取与写入分开，请在连接级别使用主/从连接或实现您自己的`Doctrine\DBAL\Connection`对象。

此外，读取通常不是通过 an 处理`ObjectManager`，而是通过 an `ObjectRepository`（您可以在其中实现自定义内存策略以优化读取操作）。

处理此问题的另一种方法是将实体与“读取”分离`ObjectManager`并将它们合并回“写入” `ObjectManager`。

同样，不建议这样做，您应该在连接级别或使用适合您需求的更智能的存储库实现来处理它。

# performance - Azure 表存储分区单个性能

> ID：14963586
> 
> 赞同：7
> 
> 时间：2013-02-19T17:21:00.557
> 
> 标签：performance, azure, azure-storage, azure-table-storage

在[文档](http://www.windowsazure.com/en-us/develop/net/tutorials/multi-tier-web-site/1-overview/)中，它指出 Azure 表存储分区的最低速度为 500 次操作/秒。

**如果我的数据正确分区，每个分区上的并行操作不会相互影响吗？**

例如，如果我必须在分区 A 上进行昂贵的全表扫描（最大为 500 个实体/秒），那么分区 B 上发生的任何操作的性能会受到影响吗？

存储帐户的限制为 5000 次操作/秒。这是否本质上意味着我可以在它们开始影响彼此的性能之前最多使用 10 个分区？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T18:47:42.677

作为一般规则，您希望尽可能避免表扫描。它们是非常昂贵的操作（尤其是如果您有很多分区）。从表压力的角度来看，并不是很多，但它们具有非常高的聚合延迟（如下所述）。也就是说，有时根本无法避免它。

我们更新了存储架构并提出了一系列目标限制。

[http://blogs.msdn.com/b/windowsazure/archive/2012/11/02/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx](http://blogs.msdn.com/b/windowsazure/archive/2012/11/02/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx)

每个存储帐户现在为 20k IOPS/秒。每个分区现在是 2k/sec

分区的交互方式有点微妙，取决于它们的使用方式（并随时间变化）。

Azure 存储有两个阶段 - 一组服务器处理范围，另一组设置实际存储（即 3 个副本）。当表冷时，所有分区都可能由一台服务器提供服务。随着分区承受持续的压力，系统将开始自动将工作负载（即分片）分散到其他服务器。分片是在分区边界上制作的。

对于低/中压力，您可能不会达到分片的阈值或只有最少的次数。访问模式也会产生一些影响（如果您只是追加，分片将无济于事）。所有模式的随机访问将是迄今为止最好的。当系统重新平衡时，您将收到 503 响应几秒钟，然后操作将恢复正常。

如果您进行表扫描，您实际上将多次往返表。当查询到达分区末尾时，将返回响应，其中包含找到的任何数据（如果不满足条件，则没有数据）和继续令牌。然后一次又一次地重新提交查询（并返回 w/token），直到您到达表的底部。这是由 SDK 抽象出来的，但如果您进行直接 REST 调用，您会看到它。

从表性能的角度来看，扫描只会影响它当前正在扫描的分区。

为了加快涉及多个分区的广泛查询，您实际上可以将其分解为多个并行访问（例如，每个分区一个线程），然后在客户端合并。实际上，这取决于您要返回的数据量，表的大小等。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-19T17:43:37.927

您的观察是正确的，每个分区的性能是独立的。但是.. 表存储的性能也（主要是？）受虚拟机带宽的影响。如果您查看[Azure 定价](http://www.windowsazure.com/en-us/pricing/details/#cloud-services)，有一个“I/O 性能”列，超小型和小型机器具有“低”和“中等”I/O。因此，如果一台机器只能以 10MB/s 的速度获取数据，那么表存储的性能在很大程度上是无关紧要的——还要记住，虚拟化存储（作为操作系统的一部分）也会耗尽这个带宽。

5000/秒的存储帐户限制意味着当您开始达到该级别时，某些操作可能会超时。确保为任意数量的存储帐户进行架构设计，就像预先正确完成一样，很容易绕过该性能上限。

如果您认为您可能会将表存储置于负载之下。确保您编写的代码具有足够的诊断功能以找出问题所在，并进行一些瞬态故障处理以允许重试。

# ruby-on-rails-3 - Heroku 在日志中输出过多

> ID：14963592
> 
> 赞同：0
> 
> 时间：2013-02-19T17:21:19.100
> 
> 标签：ruby-on-rails-3, logging, heroku

自从我开始使用自己的 procfile 以来，我在日志中看到无意义的（用于生产环境）数据，例如

```
Feb 19 09:10:09 myapp app/web.1:  Processing by PagesController#launch as */* 
Feb 19 09:10:09 myapp app/web.1:    Rendered devise/sessions/_signin.html.erb (4.4ms) 
Feb 19 09:10:09 myapp app/web.1:    Rendered pages/launch.html.erb within layouts/application (20.0ms) 
Feb 19 09:10:09 myapp app/web.1:    Rendered layouts/_suggest.html.erb (0.7ms) 
```

如何禁用此类渲染日志（属于开发而非生产）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:37:27.193

考虑将其中一个[日志记录加载项添加](https://addons.heroku.com/#logging)到您的应用程序中。这将使分析和处理您的日志变得更加容易。

# c# - 我可以在 Windows Phone 8 上覆盖后台传输服务的大小/功率限制吗

> ID：14963593
> 
> 赞同：0
> 
> 时间：2013-02-19T17:21:19.490
> 
> 标签：c#, windows-phone-8, windows-phone

我有一个应用程序需要能够通过蜂窝连接下载 1GB+ 的文件。

我没有正确阅读文档并使用后台传输服务实施了解决方案。这适用于首选项设置为“无”的大文件，但仅当手机连接到电源时。

有谁知道是否有任何方法可以覆盖此限制，或者知道我如何实施替代方案。如果它仅在应用程序处于前台时才有效，那就必须这样做！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T22:26:21.623

根据当前设计，任何超过 100MB 的文件都需要通过 AC 和 Wifi。不幸的是，没有办法超越这些限制。

# javascript - Node.js：关于在 Node.js 中使用函数 fs.writeFile()

> ID：14963596
> 
> 赞同：0
> 
> 时间：2013-02-19T17:21:26.130
> 
> 标签：javascript, node.js

```
fs.writeFile('message.txt', 'Hello Node', function (err) {
  if (err) throw err;
  console.log('It\'s saved!');
}); 
```

我有一个关于`fs.writeFile()`在 Node 中使用该函数的问题，以及它将字符串打印到文本文件中的事实。

目前，我有一段代码将以下内容打印到控制台中。而不是控制台，我想稍微修改一下代码，以便将其打印到文本文件中。

```
var options = {
  host: 'www.google.com',
  path: '/'
};

http.get(options, function(response) {
  console.log("Status Code: " + response.statusCode);

  for(var item in response.headers) {
    console.log(item + ": " + response.headers[item]);
  } 
```

我想用 替换`console.log`，`fs.writeFile`但是，`Hello Node`输入的部分`fs.writeFile()`是一个字符串。因此，我被困在这一部分。

Node.js 的 fs.writeFile() 的文档在这里：[http ://nodejs.org/api/fs.html](http://nodejs.org/api/fs.html)

如文档中所述，这就是 fs.writeFile 函数的工作原理`fs.writeFile(filename, data, [encoding], [callback])`。我的问题是关于`data`输入的。

我对 Node.js 还很陌生，因此我想得到一些关于此的反馈，并希望通过一些指针自己解决这个问题。

编辑 1：我是否使用 String() 将我的函数转换为字符串？我不认为这是正确的，但它可能是一种可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:04:56.883

这是解决它的代码：

```
http.get(options, function(res) {
  fs.appendFile('log.txt', "Status Code: " + res.statusCode + "\n");

  for(var item in res.headers) {
    fs.appendFile('log.txt', item + ": " + res.headers[item] + "\n");
  }
}).on('error', function(e) {
  console.log("Error: " + e.message);
}); 
```

我用 fs.appendFile

# macos - 如何读取/修改/删除applescript列表中包含的项目/列表

> ID：14963605
> 
> 赞同：0
> 
> 时间：2013-02-19T17:22:04.037
> 
> 标签：macos, csv, applescript

这个问题是我之前的问题[How to transform a CSV into multiple lists (applescript)?](https://stackoverflow.com/questions/14933145/how-to-transform-a-csv-into-several-lists-applescript#comment20962563_14933145)

我有一个大约 4000 行的 csv 文件。我导入它并将每一行变成列表的一个项目，然后我将每一行变成它自己的项目列表。

例如：（我使用的是数字，但我拥有的数据也包含文本，并且大多数条目都超过 1 个字符，有些条目也是空白的）

```
1,2,3,4,5,6
6,5,4,3,2,1
7,8,9,0,7,6
3,4,4,5,3,1 
```

变成

```
{"1,2,3,4,5,6","6,5,4,3,2,1","7,8,9,0,7,6","3,4,4,5,3,1"} 
```

变成

```
{{"1","2","3","4","5","6"}{"6","5","4","3","2","1"}{"7","8","9","0","7","6"}{"3","4","4","5","3","1"}} 
```

现在我想做的是以下几点：

从每个列表中删除某些项目，例如我想从每个列表中删除第二个项目，即“2”、“5”、“8”和“4”

对某些项目运行计算，例如我想将项目 5 乘以 2

此外，我的数据中的一些数字在它们的末尾有 +11 或 + 17，我想知道如何用匹配数量的零替换它，例如，如果我有 5002+6 我想把它变成5002000000

当前代码是：

```
-- Choosing your file
set csvDevices to "testfile.csv"

-- Reading file to memory
set csvDevices to read csvDevices

-- Creating Records (Single Lines)
set csvDevicesRecords to paragraphs of csvDevices

-- Remove Title Line
set csvDevicesRecords to rest of csvDevicesRecords

-- Make each line into a list
set csvDevicesValues to {}
set AppleScript's text item delimiters to ","
repeat with i from 1 to length of csvDevicesRecords
    set end of csvDevicesValues to text items of (item i of csvDevicesRecords)
end repeat
set AppleScript's text item delimiters to "" 
```

我希望以上所有内容都有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:22:24.667

如果您自己编写一个子程序来为您做这些事情，这真的不难。这是你要求的 3 个。您需要添加其他子例程，以便进行其他数学运算（加法、减法和除法）。只需复制 multiplyItemNumberByValue() 子例程并将运算符更改为适当的运算符，它应该无需进一步更改即可工作。

祝你好运。

```
set listOfLists to {{"1", "2+2", "3", "4", "5", "6"}, {"6", "5", "4", "3", "2", "1"}, {"7", "8", "9", "0", "7", "6"}, {"3", "4", "4", "5+3", "3", "1"}}

-- before performing any other operation, expand all zeros
set listOfLists to expandZeros(listOfLists)

-- remove item 2 from every sublist
set listOfLists to removeItemNumber(listOfLists, 2)

-- multiply item 1 of every sublist by 5
set listOfLists to multiplyItemNumberByValue(listOfLists, 1, 5)

(****************** SUBROUTINES ******************)
on multiplyItemNumberByValue(listOfLists, itemNumber, theValue)
    set newList to {}
    repeat with i from 1 to count of listOfLists
        set thisList to item i of listOfLists
        set thisItem to item itemNumber of thisList
        set newValue to (thisItem as number) * theValue
        set item itemNumber of thisList to (newValue as text)
        set end of newList to thisList
    end repeat
    return newList
end multiplyItemNumberByValue

on removeItemNumber(listOfLists, itemNumber)
    set newList to {}
    repeat with i from 1 to count of listOfLists
        set thisList to item i of listOfLists
        if itemNumber is equal to 1 then
            set newSublist to items 2 thru end of thisList
        else if itemNumber is equal to (count of thisList) then
            set newSublist to items 1 thru (itemNumber - 1) of thisList
        else
            set newSublist to items 1 thru (itemNumber - 1) of thisList & items (itemNumber + 1) thru end of thisList
        end if
        set end of newList to newSublist
    end repeat
    return newList
end removeItemNumber

on expandZeros(listOfLists)
    set newList to {}
    repeat with i from 1 to count of listOfLists
        set thisList to item i of listOfLists
        set newSublist to {}
        repeat with j from 1 to count of thisList
            set subItem to item j of thisList
            if subItem contains "+" then
                set x to offset of "+" in subItem
                if x is equal to 0 or x is equal to 1 or x is equal to (count of subItem) then
                    set end of newSublist to subItem -- do nothing
                else
                    set a to text 1 thru (x - 1) of subItem
                    set b to text (x + 1) thru end of subItem
                    repeat (b as number) times
                        set a to a & "0"
                    end repeat
                    set end of newSublist to a
                end if
            else
                set end of newSublist to subItem -- do nothing
            end if
        end repeat
        set end of newList to newSublist
    end repeat
    return newList
end expandZeros 
```

这是其他数学子例程...

```
on divideItemNumberByValue(listOfLists, itemNumber, theValue)
    set newList to {}
    repeat with i from 1 to count of listOfLists
        set thisList to item i of listOfLists
        set thisItem to item itemNumber of thisList
        set newValue to (thisItem as number) / theValue
        set item itemNumber of thisList to (newValue as text)
        set end of newList to thisList
    end repeat
    return newList
end divideItemNumberByValue

on addValueToItemNumber(listOfLists, itemNumber, theValue)
    set newList to {}
    repeat with i from 1 to count of listOfLists
        set thisList to item i of listOfLists
        set thisItem to item itemNumber of thisList
        set newValue to (thisItem as number) + theValue
        set item itemNumber of thisList to (newValue as text)
        set end of newList to thisList
    end repeat
    return newList
end addValueToItemNumber

on subtractValueFromItemNumber(listOfLists, itemNumber, theValue)
    set newList to {}
    repeat with i from 1 to count of listOfLists
        set thisList to item i of listOfLists
        set thisItem to item itemNumber of thisList
        set newValue to (thisItem as number) - theValue
        set item itemNumber of thisList to (newValue as text)
        set end of newList to thisList
    end repeat
    return newList
end subtractValueFromItemNumber 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:46:42.010

[Nigel Garvey 的 CSV 到列表转换器](http://macscripter.net/viewtopic.php?pid=125444#p125444)是我见过的最好的。

你可以这样称呼它：

```
 set filePath to "/Users/You/Desktop/myCsv.csv"
    set csvData to do shell script "cat " & quoted form of filePath
    set csvDevicesLists to csvToList(csvData, {trimming:true})

--> {{"1", "2", "3", "4", "5", "6"}, {"6", "5", "4", "3", "2", "1"}, {"7", "8", "9", "0", "7", "6"}, {"3", "4", "4", "5", "3", "1"}} 
```

您可以像这样填充零：

```
set xxx to {{"1", "2", "3+2", "4", "52+3", "6"}, {"6", "5", "4+5", "3", "2", "1"}}
repeat with i from 1 to count of xxx
    if (item i of xxx as text) contains "+" then
        set temp to {}
        repeat with anItem in item i of xxx
            set end of temp to (do shell script "echo " & quoted form of anItem & " | sed s/+/*10^/ | bc")
        end repeat
        set item i of xxx to temp
    end if
end repeat
return xxx 
```

[ASObjC Runner](http://www.macosxautomation.com/applescript/apps/runner_vanilla.html)还提供了一些用于操作列表的好工具。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-19T19:53:02.160

使用 Ruby 或 Python（或几乎任何其他语言）会更容易：

```
"1,2,3+11,4,5,6
6,5,4,3,2,1+17".split("\n").each { |n|
  n.gsub!(/\+(\d+)/, "0" * $1.to_i)
  c = n.split(",")
  c[4] = c[4].to_i * 5
  c.delete_at(1)
  puts c.join(",")
} 
```

# asp.net - 运行 asp.net 网站

> ID：14963606
> 
> 赞同：0
> 
> 时间：2013-02-19T17:22:10.823
> 
> 标签：asp.net, iis

我有一台运行 IIs 的服务器 2003 dc。在访问我不托管的外部网站时，我想绕过使用我的 IIs 服务器，例如[http://www.haifa.muni.il/haifa/Pages/homepage.aspx](http://www.haifa.muni.il/haifa/Pages/homepage.aspx)。

据了解，当我访问该网站时，每次加载都需要几分钟时间。在另一台运行 server 2008 的服务器上，该服务器是一个不同的域，并且没有 IIs 角色，站点加载速度很快。我无法删除 2003 服务器上的 iis 角色，因为它正在被其他人使用。

任何帮助表示赞赏

似乎外部站点正在使用 IIs，因为如果我更改 IIS asp.net 扩展名以禁止在服务器上。外部站点不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:27:08.107

访问外部站点时不使用 IIS 服务器。IIS 不是代理服务器。问题出在其他地方。

您可以尝试检查 Internet Explorer 开发人员工具中的网络选项卡 - 这将显示占用时间的内容。

# ios - iOS - 图像元数据未显示在 PC 中，在在线解析器中可见

> ID：14963610
> 
> 赞同：4
> 
> 时间：2013-02-19T17:22:21.113
> 
> 标签：ios, image, metadata

我正在尝试将元数据添加到 jpeg 图像，而不是使用 iOS 中的元数据字典规定，而是使用一些将元数据作为标头添加到 jpeg 文件的工具。

一些问题：如果值的长度小于 5 个字符，则 Mac/Windows 中不会显示“Make”和“Artist”。高度参考不会显示在 Mac 中。“用户评论”字段不会出现在 Mac 中，但会出现在 Windows 中。

问题是，如果我签入在线解析器（regex.info/exif.cgi），所有这些值都会显示

问题是，iOS 是否期望 Exif 信息采用某种特定格式？如果是，那是什么？

**编辑：**即使高度和经度值也不正确。Lat 为 0 0' 0"，经度为 x 0' 0"，其中 x 是我设置的小时数。
如果我使用在 iOS 中保存元数据的常用方法，我会为 lat 和 long 传递一个十进制值，但在这个工具中，我会分别传递小时、分钟和秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T06:12:13.947

是的，有特定的格式来存储“制作”、“艺术家”、GPS 信息和用户评论，它们必须是 ASCII 编码并在 HEX 标签内（13B 到 10E）。用户评论可以是 Unicode，但是，没有多少元数据阅读器支持。

[在 EXIF 2.2 规范的第 15 页](http://www.exif.org/Exif2-2.PDF)，元数据属性列表和每个属性的描述都在表格后面。

作为旁注，请确保您使用正确的 EXIF 元数据阅读器，如果产品在读取元数据时遇到任何错误，通常会跳过读取元数据，（例如 windows 照片查看器）

# css - 视口设备宽度，不起作用

> ID：14963612
> 
> 赞同：3
> 
> 时间：2013-02-19T17:22:24.183
> 
> 标签：css, mobile, responsive-design

我设置

> 元名称=“视口”内容=“宽度=设备宽度”

这样当在移动设备上时，网站[http://www.myscholly.com/iphone.php](http://www.myscholly.com/iphone.php)将适应。我还让我的包含 div 宽度=100%。这在使用小视口（即缩小浏览器窗口）的普通网络浏览器中查看时有效，但在我的 iphone 模拟器上不起作用。

我知道问题是 CSS，但我禁用了边距、填充，并且基本上剥离了所有内容，但仍然存在问题。如果您在移动设备上查看该网站，包含元素的宽度不是 100%！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:23:37.077

在您的 style.css 和 html 中，div 'container' 是一个 class = .container，但在 HTML 文件中的 max-width 媒体查询中，您将其定位为 id = #container。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T10:07:14.557

将元标记放在 head 标记内的第一个位置。它可能无法到达您的元标记。

2011 年初，W3C 决定允许字符编码声明在前 1024 个字节内而不是前 512 个字节内，以便浏览器在缓冲页面内容之前有更多的余地。

有关更多信息，请参阅以下链接。

[文件头优化](http://www.htmlgoodies.com/html5/tutorials/html5-document-header-optimization-techniques.html#fbid=7hnmWn_BD_7)

# php - 显示浏览器正则表达式？

> ID：14963613
> 
> 赞同：0
> 
> 时间：2013-02-19T17:22:29.613
> 
> 标签：php, regex

我的系统中包含以下代码：

```
$browser = get_browser(null, true);
#print_r($browser);

foreach ($browser AS $B => $V)
{
echo $B.":". $V."<br>";
} 
```

它返回以下内容：

```
browser_name_regex:�^.*$�
browser_name_pattern:*
browser:Default Browser
version:0
majorver:0
minorver:0
platform:unknown
alpha:
beta:
win16:
win32:
win64:
frames:1
iframes:
tables:1
cookies:
backgroundsounds:
cdf:
vbscript:
javaapplets:
javascript:
activexcontrols:
isbanned:
ismobiledevice:
issyndicationreader:
crawler:
cssversion:0
supportscss:
aol:
aolversion:0 
```

我如何揭示`browser_name_regex`？而且我不认为这揭示了正确的信息。因为`browser`我正在查看的不是我的*默认浏览器* ，而且我很确定我没有使用 chrome 的 0 版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:25:00.483

要[`get_browser()`](http://php.net/manual/function.get-browser.php)正常工作，您必须下载最新的[**browsercap.ini**文件](http://tempdownloads.browserscap.com/stream.php?Full_PHP_BrowscapINI)并**更新**位于`echo ini_get('browscap');`或检查 PHPinfo 页面的本地 browsercap.ini 文件。

# python - Python - 确定一个单词中是否包含问号

> ID：14963614
> 
> 赞同：0
> 
> 时间：2013-02-19T17:22:30.193
> 
> 标签：python, string, contains

有时字符编码会出错，而不是“It's”，你最终会得到“It?s”。使用 Python，任何人都可以建议一个表达式/函数，它可以让我确定包含“？”的字符串的这些实例，但不是在单词的末尾？

“这是它吗？不，没关系”= False

“它？就是这个”=真

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:24:38.800

```
s = "Is This It? Nope, that's fine"

'?' in s[:-1].replace('? ','') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:53:02.013

对我来说，这听起来像是正则表达式的工作：

```
import re
re.match(r'\w+?\?\w+?',"Is This It? Nope, that's fine") ##Returns a 'match object' which evaluates to True
re.match(r'\w+?\?\w+?',"It?s This") ##Returns None which evaluates to False 
```

然后如果你想替换它：

```
re.sub(r'(\w+?)\?(\w+?)',r'\1\2',"It?s This") ##Returns "Its This" 
```

正则表达式：'\w+?\?\w+?'
匹配一个或多个单词字符：'\w+?'
后跟一个实际的问号（转义）：'\?'
后跟一个或多个单词字符：'\w+?'
这样可以确保问号实际上位于单词的中间。

至于替换问号，
在表达式中添加括号，如下所示：'(\w+?)\?(\w+?)'
创建 2 个捕获组，然后您可以在所需的输出中将其作为第 1 组和第 2 组引用像这样： '\1\2'
省略问号。

# spring-mvc - 速度文件夹模板

> ID：14963616
> 
> 赞同：0
> 
> 时间：2013-02-19T17:22:45.940
> 
> 标签：spring-mvc, jakarta-mail, velocity

我正在尝试使用速度框架通过我的 web 应用程序发送电子邮件。我已经以这种方式配置了我的 email-context.xml

```
..............    
<bean id="velocityEngine"
            class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
            <property name="velocityProperties">
                <props>
                    <prop key="resource.loader">file</prop>
                    <prop key="file.resource.loader.class">org.apache.velocity.runtime.resource.loader.FileResourceLoader</prop>
                    <prop key="file.resource.loader.path">/WEB-INF/velocity/</prop>
                </props>
            </property>
        </bean>

        <bean id="mailService" class="--.------.-----.service.MailServiceImpl">
            <property name="mailSender" ref="mailSender" />
            <property name="velocityEngine" ref="velocityEngine" />
        </bean> 
```

然后我像这样编写了我的 mailServiceImpl 类

```
public class MailServiceImpl implements MailService {

    private JavaMailSender mailSender;
    private VelocityEngine velocityEngine;

    public VelocityEngine getVelocityEngine() {
        return velocityEngine;
    }

    public void setVelocityEngine(VelocityEngine velocityEngine) {
        this.velocityEngine = velocityEngine;
    }

    public void setMailSender(JavaMailSender mailSender) {
        this.mailSender = mailSender;
    }

    ........................

    public void sendEmail(final SimpleMailMessage msg, final Map<Object, Object> map) throws MessagingException {
        System.out.println("Sending mail...");
        MimeMessagePreparator preparator = new MimeMessagePreparator() {
            public void prepare(MimeMessage mimeMessage) throws Exception {
                MimeMessageHelper message = new MimeMessageHelper(mimeMessage, true);
                message.setTo(msg.getTo());
                message.setFrom(msg.getFrom());
                message.setSubject(msg.getSubject());

                String body = VelocityEngineUtils.mergeTemplateIntoString(velocityEngine, "invite.vm", map);

                message.setText(body, true);
            }
        };
        mailSender.send(preparator);
    }
........... 
```

当我对上述方法启动测试时，我得到了这个异常

```
........
19 feb 2013 17:13:46 TRACE [main] TransactionAspectSupport - Completing transaction for [it.stasbranger.spidly.service.MailServiceImpl.sendEmail] after exception: org.springframework.mail.MailPreparationException: Could not prepare mail; nested exception is org.apache.velocity.exception.ResourceNotFoundException: Unable to find resource 'invite.vm'
19 feb 2013 17:13:46 TRACE [main] RuleBasedTransactionAttribute - Applying rules to determine whether transaction should rollback on org.springframework.mail.MailPreparationException: Could not prepare mail; nested exception is org.apache.velocity.exception.ResourceNotFoundException: Unable to find resource 'invite.vm'
19 feb 2013 17:13:46 TRACE [main] RuleBasedTransactionAttribute - Winning rollback rule is: null
........... 
```

有什么建议么？

# iphone - 3.5 和 4 英寸表单上的横向/纵向自动布局约束。UIImageview UITextView

> ID：14963623
> 
> 赞同：1
> 
> 时间：2013-02-19T17:23:12.940
> 
> 标签：iphone, xcode, ios6, autolayout

使用 XCode 4.6 并尝试在 iPhone 屏幕上放置单个`UIImageView`和单个`UITextView`，用于 3.5 和 4 英寸外形尺寸，可在横向或纵向之间旋转。

对于 Portrait，我希望 UIImageView 位于屏幕顶部。长宽比固定。大约是屏幕大小的 1/2。下半部分填充了 UITextView。

对于右侧的横向 UIImageView 和左侧的文本。33/66 大小分割。图像比例为 100W/175H

我认为这很容易，但它让我发疯。

有没有人找到一种很好的方法来解决像这样有效的“简单”视图的约束？

任何好的教程或其他人做过类似的事情，想出来并愿意分享？

开始看到 XCode 中“成熟”功能和“绿色”功能之间的差异。自动布局绝对属于后者。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-19T20:58:15.260

我创建了一个名为 ScreenSize Helper 的类。不理想但可以工作并给我像素级控制。

```
-(id)init
{
    self = [super init];

    if (self) {
        if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {

            someRect = CGRectMake(0, 0, 320, 320);

            if ([NSStringFromCGRect([[UIScreen mainScreen]bounds])isEqualToString:@"{{0, 0}, {320, 568}}"]) {
                NSLog(@"iPhone 5");

                iphone5Rect = CGRectMake(0, 0, 320, 568);

            }
            else {
                 NSLog(@"iPhone 4");
                deviceNumber = [NSNumber numberWithInt:4];

               iphone4Rect = CGRectMake(0, 0, 320, 480);
            }
        }
        else {
            //For iPad Sizes
            someRect = CGRectMake(0, 0, 680, 680);

        }
    }
    return self;
} 
```

# java - Java 不释放内存

> ID：14963626
> 
> 赞同：0
> 
> 时间：2013-02-19T17:23:15.613
> 
> 标签：java, file, memory

我有一个守护程序，它读取文件的内容，然后将其压缩并将其写入较小的 .tar.gz 文件。

出于某种原因，Java 继续分配内存，即使在我释放（或我认为我已经）所有使用的内存之后。我的代码/推理有什么问题？

```
FileOutputStream fos    = null;
GZIPOutputStream gzipos = null;
OutputStreamWriter osw  = null;

BufferedWriter bw = null;
while (true) {
    if (f.length() != 0) {
        if (outputfile == null) {
            outputfile = outputfileroot + "_" + outputPart + ".tar.gz";

            fos = new FileOutputStream(outputfile);
            gzipos  = new GZIPOutputStream(fos);
            osw = new OutputStreamWriter(gzipos);
            bw  = new BufferedWriter(osw);
        }
        else if (new File(outputfile).length() > maxLengthOutputFile) {
            bw.flush();
            osw.flush();
            gzipos.flush();
            fos.flush();
            bw.close();
            osw.close();
            gzipos.close();
            fos.close();

            bw  = null;
            osw = null;
            gzipos  = null;
            fos = null;

            System.gc();

            System.out.println("Finished writing " + outputfileroot + "_" + outputPart + ".tar.gz");

            outputfile = outputfileroot + "_" + ++outputPart + ".tar.gz";
            fos     = new FileOutputStream(outputfile);
            gzipos  = new GZIPOutputStream(fos);
            osw     = new OutputStreamWriter(gzipos);
            bw      = new BufferedWriter(osw);
        }

        /**
         * Read the entire file
         */
        BufferedReader br = new BufferedReader(new FileReader(f));
        String line;
        while ((line = br.readLine()) != null) {
            // will send the content to another thread, so I need to read it line by line
            bw.write(line + "\r\n");
        }
        br.close();
        br = null;
        bw.flush();

        /**
         * Empty it
         */
        FileWriter fw = new FileWriter(f);
        fw.write("");
        fw.flush();
        fw.close();
        fw = null;
    }

    Thread.sleep(1000);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T23:18:19.787

你煮过头了。所有这些 null 设置和`gc()`调用实际上并没有帮助，而且您的刷新和关闭次数是您真正需要的数倍。此外，您根本不需要使用 Readers 和 Writers。所有这些都可以简化为：

```
GZIPOutputStream gzipos = null;
while (true)
{
    if (f.length() != 0)
    {
        if (outputfile == null)
        {
            outputfile = outputfileroot + "_" + outputPart + ".tar.gz";
            gzipos = new GZIPOutputStream(new FileOutputStream(outputfile));
        }
        else
        {
            if (new File(outputfile).length() > maxLengthOutputFile)
            {
                gzipos.close();
                System.out.println("Finished writing " + outputfileroot + "_" + outputPart + ".tar.gz");
                outputfile = outputfileroot + "_" + ++outputPart + ".tar.gz";
                gzipos = new GZIPOutputStream(new FileOutputStream(outputfile));
            }
        }

        /**
         * Read the entire file
         */
        InputStream in = new FileInputStream(f);
        byte[] buffer = new byte[8192];
        int count;
        while ((count = in.read(buffer)) > 0)
        {
            gzipos.write(buffer, 0, count);
        }
        in.close();
        gzipos.flush();
        /**
         * Empty it
         */
        f.createNewFile();
    }
    Thread.sleep(1000);
} 
```

我无法理解您的评论“会将内容发送到另一个线程，因此我需要逐行阅读”。这段代码没有线程，也不需要逐行输入。

我也很好奇它如何与生成输入文件的任何东西交互。我认为您应该重命名输入文件，并在您决定复制它后立即创建一个新的空文件，而不是在复制步骤之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:26:36.860

对象不会因为不再被引用而从内存中释放出来。JVM 决定何时运行其“垃圾收集”，从而释放内存。但它通常不会运行垃圾收集，除非它需要。有关更多信息，您可以查看[有关该主题的此页面](http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html)。

您可以调用`System.gc()`以显式调用垃圾收集器（链接中的第 7 点），但它不必运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:27:08.533

`System.gc()`发送垃圾收集请求。运行时决定是执行它还是忽略所述请求。

# c# - 将 Farseer 引擎集成到 XNA 游戏中

> ID：14963628
> 
> 赞同：1
> 
> 时间：2013-02-19T17:23:18.810
> 
> 标签：c#, visual-studio-2010, xna, wrapper, farseer

我使用 C# 和 XNA 4.0 开发了游戏模拟。现在它没有任何物理特性。我想使用 Farseer Engine 为其分配物理属性，但不修改现有游戏代码。那么，有没有办法创建一个 Farseer 的包装类并使用 farseer 对象来调用现有的方法呢？（不修改它们）如果是这样，我该怎么做？注意：我对 C# 和 XNA 都很陌生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:58:57.683

您不想围绕 farseer 创建一个包装器。实例化世界和创建实体的成本是你只想做一次的事情，真的。实体实际上只是在第一个世界步骤之后才添加的事实使情况变得更加复杂。

从理论上讲，您可以单独在 farseer 中使用特定方法，但它的耦合度很高，我认为您会发现这是一场真正的艰苦斗争。

# sql - 如何按 SQL 查询中选择的列的 # 排序

> ID：14963634
> 
> 赞同：1
> 
> 时间：2013-02-19T17:23:39.610
> 
> 标签：sql, sql-server

您好我有以下 SQL 存储过程查询

```
@colindex int

SELECT
   di.folio,
   di.name,
   di.region,
   di.amount
FROM datainfo di
WHERE di.isactive = 1
ORDER BY .....@colindex 'where colindex is the index of the column returned 
```

例子：

如果@colindex = 1，那么我要订购的列是“folio”列。

如果@colindex = 4，那么我要订购的列是“金额”列。

关于如何在 SQL 中处理这个问题的任何线索？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:25:25.740

```
order by case @colindex when 1 then folio when 2 then ... end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:26:28.067

```
@colindex int

SELECT
   di.folio,
   di.name,
   di.region,
   di.amount
FROM datainfo di
WHERE di.isactive = 1
ORDER BY case @colindex  when 1 then di.folio when 4 then di.amount end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T17:25:55.190

不确定这是否会非常快，但您可以添加：

```
ORDER BY CASE @colindex 
             WHEN 1 THEN [MyColumn1]
             WHEN 2 THEN [MyColumn2]
             WHEN 3 THEN [MyColumn3]
             WHEN 4 THEN [MyColumn4]
         END 
```

要添加 asc/desc：

```
ORDER BY CASE @sortorder
    WHEN 'ASC' THEN
        CASE @colindex 
            WHEN 1 THEN [MyColumn1]
            WHEN 2 THEN [MyColumn2]
            WHEN 3 THEN [MyColumn3]
            WHEN 4 THEN [MyColumn4]
         END
    END,
    CASE @sortorder
        WHEN 'DES' THEN
        CASE @colindex 
            WHEN 1 THEN [MyColumn1]
            WHEN 2 THEN [MyColumn2]
            WHEN 3 THEN [MyColumn3]
            WHEN 4 THEN [MyColumn4]
         END
    END DESC 
```

`NULL`解释一下，这两个命令都将适用，但当`@sortorder`变量为“ASC”时，第一个命令将始终不变。

# internet-explorer - 访问会话时，IE 双回发在集成托管管道模式下挂起 IIS 7

> ID：14963635
> 
> 赞同：20
> 
> 时间：2013-02-19T17:23:52.653
> 
> 标签：internet-explorer, iis-7, session-state, integrated-pipeline-mode

这是我的环境：Win 7 上的 IIS7.5、.NET 4、App Pool Integrated

网络配置

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
</configuration> 
```

测试.aspx

```
<%@ Page Language="C#" %>

<!DOCTYPE html>
<script runat="server">
    protected void OnAction(object sender, EventArgs e)
    {
        int count;
        status.Text = (int.TryParse(status.Text, out count) ? count + 1 : 0).ToString();

        Session["test"] = count;
    }
</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>IIS Session Hang Test</title>
    <script>
        var mutiPostback = function () {
            var e = document.getElementById('LinkButton1');
            e.click();
            e.click();
        };
    </script>
</head>
<body>
    <form id="Form1" method="post" runat="server">
        <asp:ScriptManager runat="server" ID="SM">
        </asp:ScriptManager>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="LinkButton1"/>
            </Triggers>
            <ContentTemplate>
                <asp:Label runat="server" ID="status" />
            </ContentTemplate>
        </asp:UpdatePanel>
        <input type="button" id="button1" onclick="mutiPostback();" value="MultiPostback"/>
        <div style="display: none">
            <asp:Button ID="LinkButton1" runat="server" OnClick="OnAction" Text="Click" />
        </div>
    </form>
</body>
</html> 
```

是的，多次回发是故意的，我们注意到这种行为会导致许多请求卡在 RequestAcquireState 中，并最终阻止服务器接受任何新请求。但是，这个问题只能在 IE 下观察到，而在 Chrome 或 FF 上是看不到的。

要进行测试，请连续单击多次回发按钮。这将更新状态编号。然后，您将能够观察到在使用 IE 时该数字停止增加，表明请求卡住的问题。

我能够使用以下 IIS 和 IE 版本产生此问题：

测试的 IIS 版本

1.  安装了 .Net 4.5 的 Windows Server 2008 R2 上的 7.5.7600.16385
2.  安装了 .Net 4.5 的 Windows 7 Pro 上的 7.5.7600.16385

IE版本测试

1.  Windows 7 Pro 上的 9.0.8112.16421
2.  Windows Server 2008 R2 上的 8.0.7600.16385
3.  Windows Server 2003 SP2 上的 6.0.3790.3959

我观察到的异常情况是，当访问本地 IIS 时，Windows Server 2008 R2 上的 8.0.7600.16385 不会导致此阻塞问题。但是，如果我使用浏览器访问远程 IIS，则可以重现该问题。在 IE 9 上，无论 IIS 是在远程还是本地，我都可以重现该问题。

这是工作进程请求列表中挂起请求的屏幕截图。

![卡住的请求](../Images/71412c801bc178c9d25d8b3096d87421.png) 现在我们找到了一些解决这个问题的方法，但在我们的情况下没有一个是可以接受的：

1.  删除/注释掉会话使用情况。
2.  将应用程序池更改为经典模式。

注意：我们还发现，即使我们不直接使用示例中的Session，问题仍然存在。IE：如果我们添加一个 Global.asax.cs 并添加一个空的 Session_Start 事件处理程序，请求仍然会在 RequestAcquireState 中挂起。

有谁知道为什么会发生这种情况，我们如何解决这个似乎只在集成托管管道模式下发生的问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T07:00:52.377

根据您的描述，当它尝试获取您的请求的会话对象时，它看起来像 IIS 死锁。我不会在浏览器中寻找原因，因为这只能是服务器端问题。而且可能是您无能为力的。如果它是一个死锁，那么它是一个多线程的、时间相关的问题。因此，如果不同的浏览器以稍微不同的时间发送请求，你会得到不同的结果。此外，如果您在本地或远程运行浏览器，您会得到稍微不同的时间。清空会话无济于事，因为问题在于会话获取。完全禁用会话确实有帮助，因为根本没有获取会话。将 AppPool 更改为 Classic 会有所帮助，因为它具有不同的会话管理实现，没有死锁。为了检验假设，您可以尝试在客户端的回发之间插入人为延迟。这将产生不同的时序条件，并且应该会影响问题。

我不得不说，这些只是基于您的描述和我对 IIS 的经验的推测。我建议您将 AppPool 更改为 Classic，因为性能下降幅度并不大。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T22:07:19.937

我在我的网站上遇到了类似的问题。在我的例子中，我有一个页面，其中包含许多网格，每个网格都调用 asmx webservice 来检索它们的数据。如果用户在所有 Web 请求完成之前离开该页面，则该用户的会话可能会变得非常慢（加载页面至少需要几分钟），但其他用户的会话不会受到缓慢的影响。对我来说，问题是从我在服务器上安装 .NET 4.5 开始的。

我在这里找到了一个页面：[http](http://forums.asp.net/t/1888889.aspx/1?Question+regarding+a+possible+bug+within+NET+4+5) ://forums.asp.net/t/1888889.aspx/1?Question+regarding+a+possible+bug+within+NET+4+5谈论这是一个已知问题.NET 4.5。如果站点使用集成模式并且浏览器在等待使用 ASP.NET 会话的页面时断开连接，则可以触发该错误。（有关详细信息，请参阅帖子）。

我相信您的双重回发案例可能会导致浏览器放弃其中一个请求，因此这似乎适用。另外，我和其他人注意到，在使用 IE 时似乎更常见该错误（尽管这只是巧合——它不是 IE 错误）

该帖子还描述了一种解决方法（调整 web.config 中的 uploadReadAheadSize 设置），该解决方法为我解决了这个问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-04T20:25:29.753

好消息！安装 .Net 4.5.1 后会话阻塞问题似乎已解决

我已将安装了 .Net 4.5 的 Windows Server 2008 R2 上的测试机 7.5.7600.16385 升级到 4.5.1，问题就消失了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T23:22:42.537

请注意，[如果 IE9 用户在调用正在进行时离开页面，则这与 Stackoverflow 帖子 --> AJAX POST 崩溃的 ManagedPipelineHandler](https://stackoverflow.com/questions/15437524/managedpipelinehandler-for-an-ajax-post-crashes-if-an-ie9-user-navigates-away-fr/15484368#15484368)相同。

这似乎是 ASP.NET 4.5 中的回归。ASP.NET 团队正在开发补丁，但有一个临时解决方法（请参阅上面提到的帖子）。

如果您不能等待公开的广泛更新，您可以联系 Microsoft 客户支持以获取修补程序请求。只需遵循打开支持案例的常规流程即可。例如，在线提交[https://support.microsoft.com/oas/default.aspx?&gprid=548&&st=1&wfxredirect=1&sd=gn](https://support.microsoft.com/oas/default.aspx?&gprid=548&&st=1&wfxredirect=1&sd=gn)或致电支持[http://support.microsoft.com/default.aspx?id=fh ;en-us;offerprophone](http://support.microsoft.com/default.aspx?id=fh;en-us;offerprophone)。您可能需要预先支付最低金额，但您可能会根据客户支持政策获得退款。只需让客户支持专业人员联系 Microsoft dot com 的 netfx45compat，即可快速了解此问题。

感谢 Varun Gupta（.NET 框架兼容性）

# sql-server-2008 - 选择并设置多个变量sql2008

> ID：14963636
> 
> 赞同：1
> 
> 时间：2013-02-19T17:23:53.083
> 
> 标签：sql-server-2008

如何在插入语句之前设置多个值？以下不起作用。

```
declare @foo int
declare @bar int
set (select @foo=foo, @bar=bar from Foobar where id=123);

insert into ...
select @foo, 3, @bar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:27:16.757

用这个 -

```
declare @foo int
declare @bar int
select @foo=foo, @bar=bar from Foobar where id=123;

insert into ...
select @foo, 3, @bar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:27:31.523

您可以使用以下方法分配变量`SELECT`：

```
select @foo=foo, @bar=bar from Foobar where id=123; 
```

或者，只是跳过变量并结合[`SELECT`and`INSERT`](http://msdn.microsoft.com/en-us/library/ms189872%28v=sql.105%29.aspx)：

```
insert into ...
select foo, bar
from Foobar
where id = 123; 
```

# tomcat - IntelliJ 可以在同一个tomcat 实例上调试两个war 文件吗？

> ID：14963637
> 
> 赞同：5
> 
> 时间：2013-02-19T17:23:56.240
> 
> 标签：tomcat, intellij-idea

我有两个 Web 应用程序，每个应用程序都会生成一个 war 文件。有时我需要同时运行和调试它们。我今天完成此操作的方法是在端口 8080 的 tomcat 6 上运行项目 A，在端口 8181 的 tomcat 7 上运行项目 B。

我有 IntelliJ 设置，以便 tomcat 指向目标目录中的爆炸战争文件。这两个项目都使用 Maven（即基于 pom）。**有没有办法从tomcat 7同时运行/调试它们？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T02:26:13.447

在 IDEA选项卡中`Tomcat Run/Debug Configuration`，`Deployment`您可以配置多个工件以部署在同一个 Tomcat 实例上。

如果要将它们部署到不同的 Tomcat，请创建 2 个 Tomcat 运行/调试配置并改为使用它们。您可以同时运行多个配置。

# intuit-partner-platform - 时间活动创建错误-Intuit合作伙伴平台-Quickbooks在线

> ID：14963638
> 
> 赞同：2
> 
> 时间：2013-02-19T17:23:56.963
> 
> 标签：intuit-partner-platform, quickbooks-online

尝试创建时间记录并引发错误：

```
<?xml version="1.0" encoding="utf-8"?>
<TimeActivity xmlns:ns2="http://www.intuit.com/sb/cdm/qbo" xmlns="http://www.intuit.com/sb/cdm/v2">
<TxnDate>2013-02-18-07:00</TxnDate>
<Employee>
    <EmployeeId idDomain="QBO">2</EmployeeId>
</Employee>
<CustomerId>3</CustomerId>
<ItemId>1</ItemId>  
<StartTime>2013-02-18T11:45:00-07:00</StartTime>
<EndTime>2013-02-18T13:15:00-07:00</EndTime>  
<HourlyRate>10.5</HourlyRate>
<BillableStatus>Billable</BillableStatus>
<Hours>10</Hours>
<Description>This is a Description</Description>
</TimeActivity> 
```

其他信息包括： 1\. 有效的 OAuth 签名，适用于其他请求。2\. 内容类型设置为 application/xml 3\. URL [https://qbo.intuit.com/qbo28/resource/time-activity/v2/actual_real_id](https://qbo.intuit.com/qbo28/resource/time-activity/v2/actual_real_id) 4\. Http 方法设置为 POST

返回的错误是无效的 OAuth 签名，这具有误导性，因为相同的 OAuth 标头适用于所有其他请求。

另外，我只是根据您的文档尝试了不同的请求，但结果相同

```
<?xml version="1.0" encoding="utf-8"?>
<TimeActivity xmlns:ns2="http://www.intuit.com/sb/cdm/qbo" xmlns="http://www.intuit.com/sb/cdm/v2">
<TxnDate>2013-02-18-07:00</TxnDate>
<Employee>
    <EmployeeId idDomain="QBO">2</EmployeeId>
</Employee>
<CustomerId>3</CustomerId>
<ItemId>1</ItemId>  
<BillableStatus>NotBillable</BillableStatus>
<Hours>8</Hours>
<Minutes>0</Minutes>
<StartTime>2013-02-18T11:45:00-07:00</StartTime>
<EndTime>2013-02-18T13:15:00-07:00</EndTime>
</TimeActivity> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:10:36.783

浏览器的 REST 客户端在 Oauth 和 POST 方面存在问题，它无法正确生成包含正文内容的签名。

用 API Explorer 试试，它应该可以正常工作。
[http://apiexplorer.developer.intuit.com](http://apiexplorer.developer.intuit.com)

问候，
杰瑞德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:53:57.350

您使用的 URL 看起来不正确。

您正在使用此网址：

> [https://qbo.intuit.com/qbo28/resource/time-activity/v2/](https://qbo.intuit.com/qbo28/resource/time-activity/v2/)

缺少领域 ID。它应该看起来像：

> [https://qbo.intuit.com/qbo28/resource/time-activity/v2/12341234](https://qbo.intuit.com/qbo28/resource/time-activity/v2/) *_*

12341324 是您的领域 ID。我不确定这是您正在使用的 DevKit 中的错误还是只是您的代码中的错误，但这将是开始研究的地方。

# many-to-many - Laravel 4 Eloquent：多对多与加入表的条件

> ID：14963639
> 
> 赞同：2
> 
> 时间：2013-02-19T17:23:57.670
> 
> 标签：many-to-many, laravel, laravel-4, eloquent

我正在尝试为以前与 Codeigniter 一起使用的数据库重写一些逻辑。该设计使得多对多连接的一些条件存储在连接表中，如下所示：

```
Table user
  - user_id
  ...

Table avatars
  - user_id
  - image_id
  - uploaded_timestamp
  - deleted_timestamp

Table images
  - image_id
  ... 
```

在这种情况下，我想通过头像表获取与用户关联的所有图像，按上传时间降序排列，不包括已删除的头像（deleted_timestamp 不为空）。

我发现使用 Eloquent 的 hasMany 不允许连接表上的条件。实现这种影响的最干净的方法是什么，或者我是否需要像以前使用 Codeigniter 的活动记录类一样构建完整的查询？

**注意：**我找到了这个建议使用的[答案](https://stackoverflow.com/a/14346014/2047696)`->hasMany(..)->with('another_column_from_pivot_table')`，但这似乎只适用于 Laravel 3 的 Eloquent 实现。似乎 ->with 现在仅用于 eagar 加载。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T20:27:33.540

*hasMany()*用于一对多关系。多对多期望*belongsToMany()* ——这是与中间（“pivot”）表相关联的语句。

我没有尝试过，但我可以相信 belongsToMany() 不能与 where() 语句一起使用。我知道 hasMany() 与 where() 配合得很好。

您可能需要做的是创建第三个模型类：

（警告：未经测试的代码）

```
class User extends Eloquent {
   public avatars() {
      return $this->hasMany('Avatar')
                  ->where ('deleted_timestamp',0)
                  ->orderBy('uploaded_timestamp','desc');
   }
}

class Avatar extends Eloquent {
  public image() {
    return $this->belongsTo('Image');
  }
}

class Image extends Eloquent {
} 
```

您将访问您的图像...

```
$avatars = User::find($user_id)->avatars();
foreach ($avatars as $avatar) {
   echo '<img src="$avatar->image->url">';
} 
```

# c++ - Visual Studio 可以在重建前提示吗？

> ID：14963640
> 
> 赞同：26
> 
> 时间：2013-02-19T17:23:58.530
> 
> 标签：c++, visual-studio

在重建之前有什么方法可以让 Visual Studio 提示，或者有什么其他方法可以更容易地避免点击“重建”而不是“构建”？

当我右键单击一个项目并在我打算单击“构建”时意外选择“重建”时，我浪费了无数个小时。

这是针对本机 C++ 解决方案的。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-19T17:50:16.103

Visual Studio 2010 允许自定义菜单。您可以从项目上下文菜单中删除“重建”项。或者您可能只想将“重建”命令从“构建”命令中移开，这样您就不太可能意外击中错误的项目。

从 VS 2010 开始，

*   选择工具菜单
*   选择自定义...
*   选择命令选项卡
*   选择“上下文菜单”单选按钮并选择“项目和解决方案上下文菜单|项目”
*   选择“重建”并将其移动或删除。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-19T17:47:12.740

据我所知，无法确认执行项目或解决方案重建。

您最好的选择是移动或删除上下文菜单上的“重建”菜单项。

1.  右键单击VS中的菜单/工具栏区域并选择“自定义...”
2.  单击“命令”选项卡。
3.  选择“上下文菜单”单选按钮。
4.  在下拉列表中找到“项目和解决方案上下文菜单|项目”。
5.  单击上下文菜单表示中的“重建”菜单项并执行所需的操作（删除、向上或向下移动、开始新组等）。

要将菜单重置为默认状态，请单击“全部重置”按钮。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-23T10:26:36.217

添加一个名为“重建”的新子菜单

将真正的重建命令移动（删除然后添加）到这个新菜单。如果您愿意，可以将其重命名为“确定”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-21T03:51:28.457

[您可以为我的Visual Commander](https://vlasovstudio.com/visual-commander/)工具使用以下 C# 扩展：

```
public class E : VisualCommanderExt.IExtension
{
    public void SetSite(EnvDTE80.DTE2 DTE, Microsoft.VisualStudio.Shell.Package package)
    {
        events = DTE.Events;
        commandEvents = events.get_CommandEvents(null, 0);
        commands = DTE.Commands as EnvDTE80.Commands2;
        commandEvents.BeforeExecute += OnBeforeExecute;
    }

    public void Close()
    {
        commandEvents.BeforeExecute -= OnBeforeExecute;
    }

    private void OnBeforeExecute(string Guid, int ID, object CustomIn, object CustomOut, ref bool CancelDefault)
    {
        string name = GetCommandName(Guid, ID);
        if (name.Contains("Rebuild"))
        {
            if (System.Windows.MessageBox.Show("Are you sure you want to Rebuild?", "Confirm", 
                System.Windows.MessageBoxButton.YesNo) != System.Windows.MessageBoxResult.Yes)
            {
                CancelDefault = true;
            }
        }
    }

    private string GetCommandName(string Guid, int ID)
    {
        if (Guid == null)
            return "null";
        try
        {
            return commands.Item(Guid, ID).Name;
        }
        catch (System.Exception)
        {
        }
        return "";
    }

    private EnvDTE.Events events;
    private EnvDTE.CommandEvents commandEvents;
    private EnvDTE80.Commands2 commands;
} 
```

它要求确认所有重建命令，如 Build.RebuildSolution、Build.RebuildSelection 和 Build.ProjectPickerRebuild。

# ruby-on-rails - Capistrano 部署问题（符号链接错误）

> ID：14963643
> 
> 赞同：1
> 
> 时间：2013-02-19T17:24:07.637
> 
> 标签：ruby-on-rails, deployment, capistrano, passenger

当尝试部署到我的登台服务器时，当 Capistrano 尝试创建 database.yml 文件时出现错误。

目前我的 gitIgnore 文件中有 database.yml 文件（我已经尝试过包含它）。

我以前从来没有遇到过这个问题，所以我真的不知道如何调试这个问题。

任何帮助都深表感谢。

**部署日志：**

```
executing `deploy:symlink'
  * executing "rm -f /home/deploy/example.com/current && ln -s /home/deploy/example.com/releases/20130219164028 /home/deploy/example.com/current"
    servers: ["example.com"]
    [example.com] executing command
    command finished in 1893ms
    triggering after callbacks for `deploy:symlink'
  * executing `deploy:copy_database_yml'
  * executing "ln -s /home/deploy/example.com/shared/data/development /home/deploy/example.com/releases/20130219164028/solr/data/live"
    servers: ["example.com"]
    [example.com] executing command
    command finished in 1867ms
  * executing "ln -s /home/deploy/example.com/shared/config/database.yml /home/deploy/example.com/releases/20130219164028/config/database.yml"
    servers: ["example.com"]
    [example.com] executing command
 ** [out :: example.com] ln: creating symbolic link `/home/deploy/example.com/releases/20130219164028/config/database.yml'
 ** [out :: example.com] : File exists
    command finished in 2086ms
*** [deploy:symlink] rolling back
*** no previous release to rollback to, rollback of symlink skipped
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/deploy/example.com/releases/20130219164028; true"
    servers: ["example.com"]
    [example.com] executing command
    command finished in 2640ms
failed: "env PATH=/home/deploy/example.com/bin:$PATH GEM_HOME=/home/deploy/example.com/gems sh -c 'ln -s /home/deploy/example.com/shared/config/database.yml /home/deploy/example.com/releases/20130219164028/config/database.yml'" on example.com 
```

**我的 deploy.rb 文件的内容**

```
set :stages, %w(staging integration live)
set :default_stage, "staging"
require 'capistrano/ext/multistage'
require "bundler/capistrano"

default_run_options[:pty] = true

set :application, "Example"
set :use_sudo, false
set :keep_releases, 5

# If you aren't using Subversion to manage your source code, specify
# your SCM below:
#set :people, 'root'
#set :ssh_options, { :forward_agent => true }

namespace :deploy do
  desc "Restarting mod_rails with restart.txt"
  task :restart, :roles => :app, :except => {:no_release => true} do
    run "touch #{current_path}/tmp/restart.txt"
  end

  [:start, :stop].each do |t|
    desc "#{t} task is a no-op with mod_rails"
    task t, :roles => :app do
      ;
    end
  end

  # Avoid keeping the database.yml configuration in git.
  desc "task to create a symlink for the database files."
  task :copy_database_yml do
    run "ln -s #{shared_path}/data/development #{release_path}/solr/data/live"
    run "ln -s #{shared_path}/config/database.yml #{release_path}/config/database.yml"
    run "rm -rf #{release_path}/public/photos"
    run "ln -s #{shared_path}/public/photos #{release_path}/public/photos"
    run "rm -rf #{release_path}/public/hobby_photos"
    run "ln -s #{shared_path}/public/hobby_photos #{release_path}/public/hobby_photos"
    run "chmod 777 -R #{release_path}"
    #run "cd #{release_path}; bundle exec rake db:migrate RAILS_ENV=staging"
    #    run "cd #{release_path}/ & rake db:migrate RAILS_ENV=staging"
  end

end

after "deploy:symlink", "deploy:copy_database_yml" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T08:48:18.513

看起来你的答案就在眼前。

```
** [out :: example.com] ln: creating symbolic link `/home/deploy/example.com/releases/20130219164028/config/database.yml'
** [out :: example.com] : File exists 
```

修改您的 deploy:copy_database_yml 以首先删除符号链接，或者仅在它不存在时创建它。顺便说一句，这个任务比它的名字暗示的要多得多，这很糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-17T20:36:21.990

创建符号链接时，这似乎是 Capistrano 的问题。

尝试在 deploy.rb 文件中注释角色：

```
#role :app, %w{deploy@yourhost.com}
#role :web, %w{deploy@yourhost.com}
#role :db,  %w{deploy@yourhost.com} 
```

# tree - 在 GXT 树视图中实现分页

> ID：14963645
> 
> 赞同：1
> 
> 时间：2013-02-19T17:24:12.243
> 
> 标签：tree, pagination, treeview, gxt, treegrid

我的应用程序有一个 GXT 树视图（搜索），它填充了 600 多个对象，这些对象有时会导致 IE 中引发 java 脚本错误（脚本无响应）。我该如何解决这个问题？我正在考虑某种分页来将数据一次限制为 100 行。但是是否可以与树视图或树网格一起实现分页？我在任何地方都找不到树视图+分页的示例？任何人都知道如何解决这种情况？

# android - AsyncTask 在 OnPostExecute 中返回 null

> ID：14963650
> 
> 赞同：2
> 
> 时间：2013-02-19T17:24:29.660
> 
> 标签：android, android-asynctask

我正在尝试将文本从位于服务器上的 .txt 获取到字符串 (feed_str) 我的代码：

```
public class getFeedData extends AsyncTask<String, Integer, String>
{

  @Override
  protected String doInBackground(String... params)
  {
    String feed_str = null;
    try
    {
        // Create a URL for the desired page
        URL url = new URL("http://www.this.is/a/server/file.txt");

        // Read all the text returned by the server
        BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));

        while ((feed_str = in.readLine()) != null)
        {
            // str is one line of text; readLine() strips the newline character(s)
        }
        in.close();
    }
    catch (MalformedURLException e)
    {
        System.out.println("AsyncError: " + e);
    }
    catch (IOException e)
    {
        System.out.println("AsyncError: " + e);
    }
    catch (NullPointerException e)
    {
        System.out.println("AsyncError: " + e);
    }
    return feed_str;
  }

  @Override
  protected void onPostExecute(String feed_str)
  {
    super.onPostExecute(feed_str);
    System.out.println("onPostExecute " + feed_str);
  } 
```

使用此代码，logcat 应输出如下内容：`"onPostExecute text from server"`但不是输出`"onPostExecute null"`

任何想法如何解决？

顺便说一句：已经用浏览器检查了 url，并且显示了文本，所以 url 不是问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T17:30:51.257

这个循环直到`feed_str == null`. 因此，它的最后一个值为 null，这就是您返回的值。

```
while ((feed_str = in.readLine()) != null)
{
    // str is one line of text; readLine() strips the newline character(s)
} 
```

如果这是您想要返回的，您还需要保留一个“总”字符串。

```
String entireFeed = "";
while ((feed_str = in.readLine()) != null)
{
    entireFeed += feedStr + "\n";
    // whatever else you're doing
}
...
return entireFeed; 
```

# sql - SSMS 中的视图依赖项不显示哪些关系

> ID：14963652
> 
> 赞同：0
> 
> 时间：2013-02-19T17:24:33.920
> 
> 标签：sql, sql-server

我听说您不能依赖 SSMS 视图依赖项，链接服务器上的对象的依赖项和动态代码依赖项不会显示。现在还有什么被认为是依赖关系并显示出来的吗？什么依赖不是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:58:37.147

我从来没有对这种行为进行过“适当”的调查，但我肯定开始不信任该功能 - 我发现即使是本地依赖项也会过时，我根本无法根据结果做出关键决策（例如，可以我*真的*删除了那个对象）

# performance - 您如何解决所有 Apache 线程被占用和空闲的问题？

> ID：14963655
> 
> 赞同：1
> 
> 时间：2013-02-19T17:24:44.243
> 
> 标签：performance, apache, drupal, drupal-6, apache2

我有一个经常（大约每天一次）关闭的 Drupal 6 站点。托管服务提供商报告说我们站点代码中的某些内容占用了所有 Apache 线程，但使它们保持空闲状态，从而使服务器用尽线程来响应新请求。Apache 的简单重新启动可以释放线程并解决问题，尽管它会在几个小时或一天内再次发生。

我不知道如何解决这个问题，也从来没有遇到过这样做的 PHP 代码。是否可以进行某种 Apache 设置更改以捕获有关可能保持线程被占用但空闲的更多信息？哪些典型的 PHP 例程会导致这种行为？我寻找连接到外部资源的代码，但没有发现任何问题。

任何有关查看内容、捕获更多信息或可能导致此问题的 PHP 代码的提示都是最有用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:38:12.083

使用 Drupal6，您有时可以运行[poormanscron](http://drupal.org/project/poormanscron)模块，甚至可以运行经典的 cron（来自 crontab wget 或其他）。然后，您可以进行一项繁重的 cron 操作，将您的数据库置于繁重的环境中。然后，如果您的数据库响应时间变得非常慢，那么每个 http 请求都会变得非常慢（例如会话在数据库中，并且一个 drupal 页面需要数百个查询）。让所有请求变慢可能会使所有可用的 php 进程处于“占用状态”。

重新启动 apache 所有当前进程都停止。如果您通过 wget 而不是通过 drush 运行 cron，那么检查 cron 任务是一件好事（通过 drush 运行 cron 会使其通过 php-cli 运行，重新启动 apache 不会杀死 cron）。您可以尝试使用像[elysia cron](http://drupal.org/project/elysia_cron)这样的模块来获取有关 cron 任务的更多详细信息，并可能隔离较长的任务（您有关于任务持续时间的报告）。

这种影响（一个请求损坏了数据库，所有请求都变慢了，没有更多可用的进程）也可以通过来自您安装的任何模块的一段错误代码来完成。这将更难检测。

因此，我会确保在 MySQL 上跟踪慢查询（请参阅 my.cnf otinons），然后使用[mysqsla 之](http://hackmysql.com/mysqlsla)类的收费分析这些请求。问题是有时一个查询太大以至于所有查询都变慢了。Se 使用时间的崩溃 te 检测第一个。也可以使用 MySQL 选项来跟踪不使用索引的查询。

使用 drupal 让所有 apache 进程停止在 php 操作上的另一种方法是遇到**锁定**问题。Drupal 使用MySQL[自己的锁实现。](http://api.drupal.org/api/drupal/includes!lock.inc/6)您可能会在这些文件上添加一些**看门狗**（drupal 内部调试消息）调用以尝试检测锁定问题。

然后，您还可以通过 drupal 进行**外部 http 请求调用。**调用 facebook、google 等外部网站、一些小型 url 工具或 drupal.org 模块更新东西（它们总是试图找到所有模块，甚至是你写的那个）。如果远程网站关闭或过滤您的流量，您将遇到问题（但 apache 重启对您没有帮助，所以可能不是这样）。

# macos - PackageMaker Qt4

> ID：14963661
> 
> 赞同：0
> 
> 时间：2013-02-19T17:25:15.240
> 
> 标签：macos, qt, qt4, installation, packagemaker

我在 PackageMaker 中遇到 Qt4 问题。生成安装程序后，我在虚拟机中对其进行了测试，但我遇到了一个问题，QtGui 无法被其他程序识别。好像它不会安装一样。

我尝试使用指向 QtGui 原始的别名，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T21:04:48.927

有关如何在 Max OS XI 上部署 Qt 应用程序的信息，推荐以下资源：[在 Mac OS X 上部署应用程序](http://doc.qt.digia.com/main-snapshot/deployment-mac.html)

# sql - sql结合多个where运算符

> ID：14963663
> 
> 赞同：0
> 
> 时间：2013-02-19T17:25:18.493
> 
> 标签：sql, sql-server-2008

我有一个用 MS-SQL 编写的查询，在插入之前必须检查有关客户端的信息是否已经在表中。如果一个实体已更改，则将插入该行。问题是我可以在 where 子句中组合运算符吗？现在我有一个看起来像这样的查询：

```
select * from @Temp c
where exists (select * from Clients c2
            where (c.ClientId = c2.ClientId and c.ClientFName <> c2.FirstName) 
            or (c.ClientId = c2.ClientId and c.ClientLName <> c2.LastName)
            or (c.ClientId = c2.ClientId and c.ClientAddress <> c2.Address)
            or (c.ClientId = c2.ClientId and c.ClientCity <> c2.City)
            or (c.ClientId = c2.ClientId and c.ClientState <> c2.State)
            or (c.ClientId = c2.ClientId and c.ClientZip <> c2.Zip) 
```

像这样编写查询有什么优点或缺点：

```
select * from @Temp c
where exists (select * from Clients c2
            where (c.ClientId = c2.ClientId 
            and (c.ClientFName <> c2.FirstName 
            or c.ClientLName <> c2.LastName 
            or c.ClientAddress <> c2.Address 
            or c.ClientCity <> c2.City
            or c.ClientState <> c2.State
            or c.ClientZip <> c2.Zip))) 
```

对我来说，这两个查询都有效，但是写这个的最好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:40:09.383

在实践中，如果您查看两个查询的查询计划，您可能会发现优化器将它们简化为相同的东西。如果不是，那么您将选择提供最佳性能的版本（查询计划），但两者是等效的，优化器可能会注意到并利用它。

我注意到，如果任何列允许空值，则该列的比较是不充分的。你需要更多类似的东西：

```
OR c1.ClientAddress <> c2.ClientAddress
OR (c1.ClientAddress IS NULL AND c2.clientAddress IS NOT NULL)
OR (c1.ClientAddress IS NOT NULL AND c2.clientAddress IS NULL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:30:55.350

任何时候你都可以消除冗余，这是一件好事。第二种方式获胜。:)

顺便说一句，让我们回答你没有问的更好的问题，假设它`@temp`是从中加载的，`Clients`这样你就可以找到有问题的记录。你可以这样做：

```
SELECT * FROM Clients
WHERE clientid in (
    SELECT clientid from ( select distinct * from Clients ) t
    GROUP BY clientid HAVING count(*) > 1 ) 
```

（这也消除了比较`null`s的混乱）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T17:31:16.890

我不太确定这里的确切问题是什么。但是，两者看起来都不错——从可读性的角度来看，我更喜欢第二个，但那是偏好。

性能方面，我认为您不会注意到差异。

# mysql - MySQL：如何使用子查询显示在某个日期之后下达的订单。

> ID：14963666
> 
> 赞同：0
> 
> 时间：2013-02-19T17:25:20.617
> 
> 标签：mysql, subquery

我的导师希望我使用子查询来执行以下操作：

“显示在 2006 年 2 月 5 日或之后下订单的任何公司的公司名称。”

到目前为止，我有：

```
选择客户代码
来自订单
WHERE order_date > '2006-02-05';

```

这会产生结果，但不是子查询。如何用子查询显示这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:37:37.743

您有一个查询，它将为您`customer_code`提供某些订单的 's。但是现在您还需要获取所有带有这些的客户的名称`customer_code`。这里有几个小窍门，

1.  如果您只有他们的客户，您将如何获得他们的姓名`customer_code`？把它写成它自己的简单查询，与订单无关。

2.  现在，如果您有多个客户，您如何获得客户的姓名`customer_code`？修改 #1 中的查询以执行此操作。

3.  最后，您已经有查询来获取`customer_code`各种订单的大量 's（来自您的问题），因此请使用该查询而不是`customer_codes`来自 #2 的查询。您的问题中的查询成为子查询。

请注意，您也可以通过使用 JOIN 来实现相同的输出，但您特别询问了子查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:52:25.863

试试这个：

```
SELECT company_name FROM customers
WHERE id IN 
(SELECT customer_code FROM orders
 WHERE order_date > '2006-02-05'); 
```

子查询从订单表中选择 customer_code，其中 order_date 在 2006-02-05 之后。然后用于从客户表中选择公司名称，其中在子查询中找到 id。

还有其他方法：

```
SELECT company_name 
FROM orders, customers
WHERE customer_code = customers.id 
and order_date > '2006-02-05';

SELECT company_name 
FROM customers
JOIN ORDERS
ON customer_code = customers.id 
AND order_date > '2006-02-05'; 

SELECT company_name 
FROM customers
JOIN ORDERS
ON customer_code = customers.id 
WHERE  order_date > '2006-02-05'; 
```

最后查询没有子查询。使用连接的选项可能是最常见的形式。 [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/af4a1/1)

# javascript - Require.js 3rd 方库依赖项

> ID：14963673
> 
> 赞同：1
> 
> 时间：2013-02-19T17:25:39.990
> 
> 标签：javascript, requirejs

将 3rd 方库（JQuery/Underscore/Backbone）定义为模块并将它们用作依赖项有什么好处？

```
require(["jquery", "underscore"], function($, _) {
    // Use $ and _ in here
}); 
```

例如，下划线创建一个全局“_”变量，我可以在上面的函数中轻松使用它，假设下划线包含在该函数之前。

要由 Require 使用，Underscore 需要修改代码以返回值或定义的填充程序。当我可以通过脚本标签包含它时，为什么还要麻烦呢？

我知道它提供了一定程度的间接性，并允许我将其他依赖项映射到这些相同的变量，并将其范围限定为该函数。但是，我认为这对于构成应用程序核心的这些类型的 3rd 方库没有用处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:01:34.817

在使用 Backbone/requireJs 构建了一些应用程序之后，我发现使用 requireJs 构建主干应用程序没有任何缺点，其中主要依赖项是通过旧的学校脚本标签简单加载的。

无论如何，你必须首先加载这个需求，它被你的大多数模块使用，你可能永远不会与另一个框架交换它。因此，无法负担每个模块中的样板代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:32:24.673

您无需**更改**库即可在 AMD 加载程序中使用它。

```
require.config({paths:{underscore:'//some.cdn/path/to/underscore.js'}})

require(["jquery", "underscore"], function($ /*, note that we don't override _ here */) {
    // Use AMD $ and global _ in here
}); 
```

# c - GStreamer：没有这样的文件或目录

> ID：14963675
> 
> 赞同：0
> 
> 时间：2013-02-19T17:25:53.850
> 
> 标签：c, gtk, gstreamer

我正在做一个需要将视频显示到窗口的项目。所以我做了一些研究，发现 GStreamer lib 可能是一个好方法，因为我有一个用 GTK 编写的 GUI。然而，在我的 Mac 上尝试安装和编译 GStream 2 小时后，我仍然得到：

```
error: gts/gts.h: No such file or directory 
```

我所做的是从官方网站安装 Gstreamer SDK for Mac OS。导出路径：

```
export PATH=/Library/Frameworks/GStreamer.framework/Version/0.10/Headers:$PATH 
```

编译：

```
gcc test.c `pkg-config --cflags --libs gtk+-2.0` `pkg-config --cflags --libs gtk-1.0` 
```

但我没有运气！请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:22:44.420

首先：您不能使用 PATH 变量指定 GCC 的包含路径。它的唯一目的是让 shell（或者更具体地说：用于各种风格的[exec()](http://linux.die.net/man/3/exec)）来查找您想要运行的可执行文件。

您可能希望像这样（`gstreamer-0.10`而不是`gst-0.10`）修改您的 gcc 命令行：

```
gcc test.c `pkg-config --cflags --libs gtk+-2.0 gtk-1.0 gstreamer-0.10` 
```

如果这仍然不起作用，请查看 pkgconfig 命令的输出（单独运行）：

```
pkg-config --cflags --libs gtk+-2.0 gtk-1.0 gstreamer-0.10 
```

这应该会为您提供 gcc 标志列表或错误消息，以帮助您解决问题。

# ios - 带有视网膜图像的导航栏

> ID：14963677
> 
> 赞同：1
> 
> 时间：2013-02-19T17:25:54.937
> 
> 标签：ios, xcode

我正在尝试将图像添加到导航栏，我通过 Internet 下载图像。如果我拍摄 320x44 图像，一切正常，但如果我拍摄 640x88 图像，因此视网膜分辨率，导航栏中的图像不会调整大小并且出现超出范围。我使用以下代码设置图像：

```
[[UINavigationBar appearance] setBackgroundImage:im forBarMetrics:UIBarMetricsDefault]; 
```

# android - Robolectric：测试取消对话框没有开始新活动

> ID：14963679
> 
> 赞同：4
> 
> 时间：2013-02-19T17:26:05.537
> 
> 标签：android, unit-testing, robolectric

我正在使用 Robolectric 开始单元测试。我有一个按钮，单击该按钮会向用户弹出一个确认对话框。当用户点击 时`BUTTON_POSITIVE`，一个新的活动被启动，点击 BUTTON_NEGATIVE，没有任何反应，用户停留在当前活动上。

对于 BUTTON_POSITIVE 用例，我能够通过以下方式进行测试：

```
 dialog.getButton(DialogInterface.BUTTON_POSITIVE).performClick();
    assertThat(currentActivity, new StartedMatcher(NextActivity.class)); 
```

对于 BUTTON_NEGATIVE 用例，我不确定要断言什么：

```
 dialog.getButton(DialogInterface.BUTTON_NEGATIVE).performClick();
    //What should I assert next to check I am still in currentActivity? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T06:47:13.623

我会尝试：

```
ShadowActivity shadowActivity = Robolectric.shadowOf( activity );
assertNull( shadowActivity.getNextStartedActivity() ); 
```

# java - TaskQueueSample.java：代码 403

> ID：14963687
> 
> 赞同：2
> 
> 时间：2013-02-19T17:26:39.683
> 
> 标签：java, google-app-engine, pull-queue

我正在尝试使示例正常工作，所以这里是代码：

[示例代码](http://code.google.com/p/google-api-java-client/source/checkout?repo=samples)

安装文档在那里：

[安装文档](http://samples.google-api-java-client.googlecode.com/hg/taskqueue-cmdline-sample/instructions.html)

我在台阶上有一个小问题：

> 单击“API 访问”，然后单击“创建 OAuth 2.0 客户端 ID...”。输入产品名称，然后单击“下一步”。

控制台的 UI 可能已经升级，所以我使用这些数据在控制台中进行身份验证： ![在此处输入图像描述](../Images/857f7d4ce5aa750e4a3de66e5dd7e616.png)

然后我运行程序，它把我带到网页以允许应用程序，然后我在控制台中收到以下错误消息：

```
403 Forbidden
{
  "code" : 403,
  "errors" : [ {
    "message" : "you are not allowed to make this api call"
  } ],
  "message" : "you are not allowed to make this api call"
} 
```

我的 queue.xml ACL 设置了我用来进行身份验证的电子邮件

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T10:57:19.317

为什么不使用 GAE Java SDK 中的本机 TaskQueue-API？您无需设置凭据、连接、...。

[您可以在GAE Docs](https://developers.google.com/appengine/docs/java/taskqueue/overview-pull)上看到一个示例- 这里是 Pull Queue，但您也可以根据需要使用 Push Queue（示例也在 GAE Docs 中）。

您想在 google 应用引擎上启动哪一个示例？在您发布的链接上有许多可用的示例:)。告诉我您是否真的想使用 Google-API 访问任务队列。

# php - PHP：我可以在 _constructor 中传递 $this 吗？

> ID：14963688
> 
> 赞同：0
> 
> 时间：2013-02-19T17:26:43.617
> 
> 标签：php, constructor, this

我想将一个 php 对象在它自己的构造函数中传递给另一个对象，如下所示：

```
class foo {

 $parent_object;

 public function __construct($obj) {
  $this->parent_object = $obj;
  }
 }

class bar {

 public function __construct() {
  $blub = new foo($this);
  }
 } 
```

我问自己的问题是：我可以在 bar 的构造函数中传递 $this，因为对象实际上并没有被创建......所以 $this 已经是对整个对象的有效引用了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T17:28:16.127

你当然可以。请记住，它`$this`始终指向*当前*对象。所以在：

```
$blub = new foo($this); 
```

`$this`指向 的实例`bar`。所以`$obj`在构造函数中`foo`是那个实例`bar`。

`$this`在构造函数的开头可用。现在，如果`bar`立即调用函数，`$obj`则可能是该实例`bar`尚未处于正确状态（即`$blub`尚未分配）。这可能会导致引用问题，解决方案是将引用交换移出构造函数。

# apache - 端口 80 上的 Node.js

> ID：14963691
> 
> 赞同：0
> 
> 时间：2013-02-19T17:26:55.737
> 
> 标签：apache, node.js

我在 Node.js 中有一个在端口 3010 (domain.com:3010) 上运行的应用程序。是否可以让它在端口 80 (domain.com) 上运行？

我有一个带有 CentOS 的 VPS 服务器。我搜索了很多，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:32:21.240

[您可以按照本文](http://thatextramile.be/blog/2012/01/hosting-a-node-js-site-through-apache)所述创建虚拟主机

```
<VirtualHost *:80>
    ServerName node.mydomain.com
    ProxyRequests off
    <Proxy *>
        Order deny,allow
        Allow from all
    </Proxy>
    <Location />
        ProxyPass http://localhost:3010/
        ProxyPassReverse http://localhost:3010/
    </Location>
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-25T08:36:53.357

IMO 最好在 Node.js 前面使用 Nginx 而不是 Apache。配置示例（我的`/etc/nginx/conf.d/default.conf`文件）

```
 upstream my-node-app {
        server 127.0.0.1:3000;
    }

    server {
        listen       80 default_server;
        #server_name  _;
        server_name  www.domain.com domain.com;

        access_log  /var/log/nginx.access.log  main;

        location / {
            #root   /usr/share/nginx/html;
            #index  index.html index.htm;
            proxy_pass http://127.0.0.1:3000/;
        }

        error_page  404              /404.html;
        location = /404.html {
            root   /usr/share/nginx/html;
        }

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   /usr/share/nginx/html;
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:30:58.897

您可以更改应用程序配置中的端口或配置端口以在路由器中根据需要进行响应。

# android - 如何在android中构建3D环境？

> ID：14963698
> 
> 赞同：-2
> 
> 时间：2013-02-19T17:27:25.447
> 
> 标签：android, 3d

我开发了一些简单的安卓应用程序。我想用 3D 环境构建应用程序和游戏。例如[像这样](https://play.google.com/store/apps/details?id=com.nemustech.reginapro)。请告诉我如何开始？我还没有开发任何 3D 东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:32:14.443

可能您需要做的第一件事就是了解[OpenGL](http://www.opengl.org/)并学会在[Android中使用它](http://developer.android.com/reference/android/opengl/package-summary.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:33:15.150

许多人使用[Unity](http://unity3d.com/)。它还具有在其他平台上工作的好处。

# python - 如何修复此错误？TypeError: 'str' 不支持缓冲区接口

> ID：14963699
> 
> 赞同：1
> 
> 时间：2013-02-19T17:27:28.160
> 
> 标签：python, string, runtime-error

```
>>> import struct
>>> s = '\x00\x00\x00\x01\x00\x00\x00\xff\xff\x00\x00'
>>> struct.unpack('11B', s)
Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    struct.unpack('11B', s)
TypeError: 'str' does not support the buffer interface 
```

这有什么问题？请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T17:30:19.280

在 python 3 上，`struct.unpack()`需要一个实现缓冲区协议的对象，例如一个[`bytes`](http://docs.python.org/3/library/stdtypes.html#bytes)值，而不是一个[unicode`str`](http://docs.python.org/3/library/stdtypes.html#text-sequence-type-str)：

```
>>> import struct
>>> s = b'\x00\x00\x00\x01\x00\x00\x00\xff\xff\x00\x00'
>>> struct.unpack('11B', s)
(0, 0, 0, 1, 0, 0, 0, 255, 255, 0, 0) 
```

如果您正在从文件中读取此数据，请以二进制模式而不是文本模式打开文件以获取字节。

# c# - 在 Windows Phone 8 应用程序中的图像上绘制基本形状

> ID：14963705
> 
> 赞同：0
> 
> 时间：2013-02-19T17:27:48.097
> 
> 标签：c#, windows-phone-8

如何根据用户触摸图像的位置在 WP8 应用程序中的图像上绘制基本形状

例子：

用户使用相机拍照，它出现在应用程序中（目前为此使用图像控件），然后用户触摸图像上的一个点，一个固定大小的圆形或矩形出现在那里。我应该能够存储矩形的位置并显示矩形。

# linq - 按 Linq 分组。关键字段计数

> ID：14963708
> 
> 赞同：0
> 
> 时间：2013-02-19T17:27:54.613
> 
> 标签：linq, linq-to-sql

```
select    
  count(di.field1) as myCount,
  di.field2
  from di
group by  di.field2 
```

我试图理解这个概念：

```
 group di.field2 by new { di.field1, di.field2 } into g
       select new
          {
             documentID = g.Key.field2,
             docCount = g.Count(????)
          }); 
```

我如何获得 field1 计数的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:03:40.443

也许是这样的：

```
group di by di.field2 into g
       select new
          {
             documentID = g.Key,
             docCount = g.Select(c => c.field1).Count()
          }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:09:19.267

```
 from p in di
    group p by p.field2 into g 
    select new { field2 = g.Key, field2Count = g.Count() }; 
```

检查这个。，这应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:56:15.483

您是否需要进行分组以获得字段计数？你不能这样做：

```
var count=di.field1.Count; 
```

# php - 阻止 Node 让 PHP 文件被下载

> ID：14963711
> 
> 赞同：2
> 
> 时间：2013-02-19T17:28:03.177
> 
> 标签：php, node.js

我知道 PHP 文件不会在节点服务器中执行，所以它让 PHP 文件被下载。

这是一个巨大的安全风险，不是吗？如何阻止节点让用户下载 php 文件？

# grails - 使用 JQuery Validation UI Plugin 验证自定义约束

> ID：14963719
> 
> 赞同：0
> 
> 时间：2013-02-19T17:28:24.880
> 
> 标签：grails, validation, grails-plugin

我正在为 grails 2.1.0 使用 grails [JQuery Validation UI Plugin](http://grails.org/plugin/jquery-validation-ui)。

根据我的命令对象约束，我几乎有我的表单验证客户端。有一个问题，我的命令对象中有一个自定义约束：

```
startTime(nullable: false, validator: {startTime, deal ->
    if ((!DateUtils.isSameDay(startTime, new Date()) && startTime.before(new Date()))) //Start date is today or future but not before end date
    {
        return "pastDate"
    }
    if (deal.endTime && startTime.after(deal.endTime)) {
        return "before.endTime"
    }
}) 
```

这会导致以下呈现的使用页面标记生成的 jQuery 验证代码：

```
startTime: {
    date: true,
    required: true,
    validator: {
    url: '/appContextRoot/JQueryRemoteValidator/validate',
    type: 'post',
    data: {
        validatableClass: 'myapp.command.tester.testerDealCommand',
        property: 'startTime'
    }
    }
} 
```

custum 使用“validator:”约束逻辑，目前什么都不做。

让这个自定义验证器工作的最佳方法是什么？
1：某种形式的 Ajax 调用？
2：使用Custom Constraits插件，在grails-validation-methods.js中添加js代码？
3：其他方式？

我不确定是否使用选项 2....有什么方法可以扩展插件吗？

我不想在我们的源代码存储库中提交和维护一个单独的插件版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:48:23.223

如果我对插件的理解正确，则无需将您的自定义验证直接添加到`grails-validation-methods.js`

如果你之后加载你的脚本，你可以遵循他的约定：

```
jQuery.validator.addMethod("myCustomValidation", function(value, element, params) {
    //perform your validation here
}, "Custom validation fail."); 
```

# c# - 从 DI 构造函数引用公共实例

> ID：14963720
> 
> 赞同：1
> 
> 时间：2013-02-19T17:28:24.863
> 
> 标签：c#, asp.net-mvc, ninject

使用 Ninject DI，我实现了两个从 MVC 控制器实例化的接口。例如：

```
public class MyController : Controller
{
   private readonly IUnitOfWork _UnitOfWork;
   private readonly IAssetService _AssetService;

   public MyController(IUnitOfWork unitOfWork, IAssetService assetService)
   {
      this._UnitOfWork = unitOfWork;
      this._AssetService = assetService;
   }

   // Controller actions etc. 
} 
```

在我的 Ninject 模块中，我创建了以下绑定：

```
public class DomainModule : NinjectModule
{
   public override void Load()
   {
      Bind<IUnitOfWork>()
         .To<SqlUnitOfWork>()
         .InRequestScope()
         .WithConstructorArgument("connectionString", "MyDb.Database");

      Bind<IAssetService>()
         .To<FileSystemAssetService>()
         .WithConstructorArgument("rootPath", "C:\\DataStore");
   }
} 
```

我现在想将`IUnitOfWork`实例注入到我的`IAssetService` 中，所以我考虑将它作为一个属性`IAssetService`并修改我的控制器，如下所示：

```
public class MyController : Controller
{
   private readonly IUnitOfWork _UnitOfWork;
   private readonly IAssetService _AssetService;

   public MyController(IUnitOfWork unitOfWork, IAssetService assetService)
   {
      this._UnitOfWork = unitOfWork;
      this._AssetService = assetService;

      this._AssetService.UnitOfWork = this._UnitOfWork;
   }

   // Controller actions etc. 
} 
```

但我想知道是否有更好/更清洁的方法使用不同的 DI 技术来执行此操作 - 理想情况下，我想将其添加`IUnitOfWork`到`AssetService`构造函数中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:41:13.490

那为什么不简单地将`IUnitOfWork`注入`AssetService`？

```
public class FileSystemAssetService : IAssetService
{
    private readonly IUnitOfWork unitOfWork;
    private readonly string rootPath;

    public FileSystemAssetService(IUnitOfWork unitOfWork, string rootPath)
    {
        this.unitOfWork = unitOfWork;
        this.rootPath = rootPath;
    }
} 
```

# logback - 设置带有谨慎标志和文件位置的 Logback RollingFileAppender

> ID：14963723
> 
> 赞同：6
> 
> 时间：2013-02-19T17:29:00.363
> 
> 标签：logback

我怎样才能`RollingFileAppender`在 Logback 中创建一个接受 prudent 标志并允许我指定日志文件的位置？

我尝试了以下操作，但据我了解，logback 文档不支持 file 属性。还有另一种设置日志文件位置的方法吗？

```
 <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${MY_LOG_LOCATION_PROP}/logs/mylogfile.log</file>
        <prudent>true</prudent>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <!-- rollover daily -->
            <fileNamePattern>mylogfile-%d{yyyy-MM-dd}.%i.log</fileNamePattern>
        </rollingPolicy>
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T12:08:15.087

如果`file`缺少该属性，则将从 的值推断当前活动的日志文件`fileNamePattern`。因此，该`file`属性不是强制性的。同样重要的是，在谨慎模式下，它**必须**留空。

[以下是fileNamePattern](http://logback.qos.ch/manual/appenders.html#tbrpFileNamePattern)文档中的相关引用：

> 请注意，RollingFileAppender（TimeBasedRollingPolicy 的父级）中的文件属性可以设置或省略。通过设置包含 FileAppender 的文件属性，您可以将活动日志文件的位置和归档日志文件的位置解耦。当前日志将始终针对文件属性指定的文件。因此，当前活动的日志文件的名称不会随着时间而改变。但是，如果您选择省略 file 属性，则活动文件将根据 fileNamePattern 的值为每个周期重新计算。下面的例子应该澄清这一点......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T20:42:01.223

您可以在 fileNamePattern 中包含路径：

```
<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
    <fileNamePattern>/var/log/myapp/mylogfile-%d{yyyy-MM-dd}.log</fileNamePattern>
</rollingPolicy> 
```

# asp.net-mvc - 服务器是否应该能够在当前请求处于休眠状态时执行第二个请求？

> ID：14963727
> 
> 赞同：1
> 
> 时间：2013-02-19T17:29:05.777
> 
> 标签：asp.net-mvc

我正在使用 ASP.NET MVC 和 IIS 7.5 版。

我在控制器中有以下操作。

```
public ActionResult Wait(int time = 10000)
{
    var start = DateTime.Now;

    Thread.Sleep(time);

    var end = DateTime.Now;

    var diff = (end - start);

    return Json(new {
        start = start.ToString("yyyy-MM-dd HH:mm:ss.fff"),
        end = end.ToString("yyyy-MM-dd HH:mm:ss.fff"),
        milliseconds = diff.TotalMilliseconds.ToString("#,###"),
    }, JsonRequestBehavior.AllowGet);
} 
```

如果我访问：/wait?time=10000

然后：/wait?time=10

在第一个请求完成之前，第二个请求甚至不会执行。

这是正常行为，还是每个请求都应该在自己的线程中执行？

将这一点放在上下文中，在我们的应用程序中，不同的调用可能需要从不同的服务器询问数据，我不想在执行几个更简单的请求（仅需要本地数据）之前等待一个复杂的请求完成。

**编辑**

我刚刚意识到我在谈论来自同一个用户的请求（在同一个会话中）。我想我只是昏暗，但也许有人仍然可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:34:45.230

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms178581.aspx)

> 并发请求和会话状态
> 
> 每个会话对 ASP.NET 会话状态的访问是独占的，这意味着如果两个不同的用户发出并发请求，则同时授予对每个单独会话的访问权限。但是，如果对同一个会话发出两个并发请求（通过使用相同的 SessionID 值），则第一个请求将获得对会话信息的独占访问权。第二个请求仅在第一个请求完成后执行。（如果因为第一个请求超过了锁超时，信息上的独占锁被释放，第二个会话也可以获得访问权。）如果@Page指令中的EnableSessionState值设置为ReadOnly，则请求只读会话信息不会导致对会话数据的独占锁定。然而，

# javascript - 如何可靠地确定时区

> ID：14963728
> 
> 赞同：1
> 
> 时间：2013-02-19T17:29:12.800
> 
> 标签：javascript, jsf, timezone

我需要在 JavaScript 中可靠地确定用户的时区。大多数用户群将使用低带宽和旧浏览器，因此我必须保持向后兼容性并将数据传输保持在最低限度。理想情况下，我只想在会话开始时获取用户的时区（我使用 CAS 登录，因此没有登录页面），然后将其发送回服务器，在那里我可以将其存储在数据库中。我查看了 jsTimezoneDetect 库以及各种地理定位 API（通过用户的 IP 检索位置/时区），但每个都有其缺点：

1.  jsTimezoneDetect 不大，但我宁愿不在我的所有页面上包含 5K 额外的 JS 代码（没有单个登录页面！）
2.  地理位置 API（例如 IPInfoDB）引入了对外部服务的依赖，可能会很慢，并且并不总是能保证我的结果

在使用最小带宽和浏览器资源的同时，可靠有效地确定用户时区并将其发送回我的 JSF 应用程序的最简单方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:48:26.587

阅读评论后，我最终得到以下代码：

```
<h:panelGroup layout="block" rendered="#{!applicationBean.timeZoneSet}">
    <h:outputScript name="timezone.js" library="js"></h:outputScript>
    <h:form style="display:none;">
        <p:inputText value="#{applicationBean.currentTimeZone}" widgetVar="wTZ" style="display:none;"></p:inputText>
        <p:remoteCommand autoRun="true" name="setTZ" onstart="var tzone=jstz.determine();wTZ.getJQ().val(tzone.name())" process="@form"></p:remoteCommand>
    </h:form>
</h:panelGroup> 
```

支持豆：

```
public boolean isTimeZoneSet() {
    return getELValue(EL_TIMEZONE_FLAG, Boolean.class);
}

public void setTimeZoneSet(boolean val) {
    setELValue(EL_TIMEZONE_FLAG, val);
}

@Transactional(propagation=Propagation.REQUIRES_NEW)
public void setCurrentTimeZone(String val) {
    User _user = getCurrentUser();
    _user.setTimeZone(val);
    _usersDAO.merge(_user);
    setTimeZoneSet(true);
}

@Transactional(propagation=Propagation.REQUIRES_NEW)
public String getCurrentTimeZone() {
 User _user = getCurrentUser();
     return _user.getTimeZone();
    } 
```

其中 EL_TIMEZONE_FLAG 是会话范围的 EL 表达式。上面的方法确保我在用户上设置了一个时区，每个会话只执行一次，并且每个会话也只加载一次任何额外的 JS 代码

# sql - SQL - 获取给定组的最小，最大日期，日期中断

> ID：14963729
> 
> 赞同：1
> 
> 时间：2013-02-19T17:29:22.613
> 
> 标签：sql, oracle, oracle11g

我正在尝试查找带有中断处理日期的给定值的以下数据的最小和最大处理日期（请注意，周末不处理行，如果它们具有相同的值，我不想将它们分成两个不同的集合)

```
SELECT 1, 'A',to_date('10/01/2012','dd/mm/yyyy'), 10, to_date('11/01/2012','dd/mm/yyyy') FROm DUAL
UNION ALL SELECT 1, 'A',to_date('11/01/2012','dd/mm/yyyy'), 10, to_date('12/01/2012','dd/mm/yyyy') FROm DUAL
UNION ALL SELECT 1, 'A',to_date('12/01/2012','dd/mm/yyyy'), 9, to_date('13/01/2012','dd/mm/yyyy') FROm DUAL
UNION ALL SELECT 1, 'A',to_date('13/01/2012','dd/mm/yyyy'), 9, to_date('14/01/2012','dd/mm/yyyy') FROm DUAL
UNION ALL SELECT 1, 'A',to_date('16/01/2012','dd/mm/yyyy'), 9, to_date('17/01/2012','dd/mm/yyyy') FROm DUAL
UNION ALL SELECT 1, 'A',to_date('17/01/2012','dd/mm/yyyy'), 10, to_date('18/01/2012','dd/mm/yyyy') FROm DUAL
UNION ALL SELECT 1, 'A',to_date('18/01/2012','dd/mm/yyyy'), 10, to_date('19/01/2012','dd/mm/yyyy') FROm DUAL; 
```

我的尝试（我知道这是错误的）

```
SELECT id, cd, value, min(p_dt) min_dt, max(p_dt) max_dt FROM T
group by id, cd, value; 
```

这返回

```
ID  CD  VALUE   MIN_DT                       MAX_DT
----------------------------------------------------------------------------------
1   A   9   January, 12 2012 00:00:00+0000  January, 16 2012 00:00:00+0000
1   A   10  January, 10 2012 00:00:00+0000  January, 18 2012 00:00:00+0000 
```

我想要返回的是

```
ID  CD  VALUE   MIN_DT                       MAX_DT
----------------------------------------------------------------------------------
1   A   9   January, 12 2012 00:00:00+0000  January, 16 2012 00:00:00+0000
1   A   10  January, 10 2012 00:00:00+0000  January, 11 2012 00:00:00+0000
1   A   10  January, 17 2012 00:00:00+0000  January, 18 2012 00:00:00+0000 
```

我尝试了不同的方法来查询这个，但我无法提供有效的查询。

[SQL 小提琴](http://www.sqlfiddle.com/#!4/5f2d2/3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T23:46:11.513

该网站上还有许多其他问题，旨在解决相同的问题。示例在[此处](https://stackoverflow.com/questions/4508175/oracle-sql-query-to-find-end-date-from-max-value-of-a-column/4509216)和[此处](https://stackoverflow.com/questions/4277330/grouping-rows-considering-difference-between-rows/4277680)，这些只是我提供答案的问题。

这个问题有点复杂，因为需要忽略周末。正如我将很快解释的那样，这似乎相对容易解决。

您的问题不包括表中所有列的列名。我假设第一个日期是处理日期，而另一个日期对于这个查询并不重要。这可能是错误的假设。

从问题来看，如果在工作日（周一至周四）第二天有匹配的行，则似乎存在一个组。对于周五，下周一需要有匹配的行。如果是星期五，我会通过添加 3 天来处理此问题，或者在其他情况下添加 3 天。

下面显示了一个示例查询，并且[还提供了一个 SQLFiddle](http://www.sqlfiddle.com/#!4/5f2d2/4)。

希望这可以解决您的问题。

```
with test_data as (
    SELECT 1 as id, 'A' as cd,to_date('10/01/2012','dd/mm/yyyy') as p_date, 10 as value, to_date('11/01/2012','dd/mm/yyyy') as some_other_date FROm DUAL UNION ALL 
    SELECT 1 as id, 'A' as cd,to_date('11/01/2012','dd/mm/yyyy') as p_date, 10 as value, to_date('12/01/2012','dd/mm/yyyy') as some_other_date FROm DUAL UNION ALL 
    SELECT 1 as id, 'A' as cd,to_date('12/01/2012','dd/mm/yyyy') as p_date, 9 as value, to_date('13/01/2012','dd/mm/yyyy') as some_other_date FROm DUAL UNION ALL 
    SELECT 1 as id, 'A' as cd,to_date('13/01/2012','dd/mm/yyyy') as p_date, 9 as value, to_date('14/01/2012','dd/mm/yyyy') as some_other_date FROm DUAL UNION ALL 
    SELECT 1 as id, 'A' as cd,to_date('16/01/2012','dd/mm/yyyy') as p_date, 9 as value, to_date('17/01/2012','dd/mm/yyyy') as some_other_date FROm DUAL UNION ALL 
    SELECT 1 as id, 'A' as cd,to_date('17/01/2012','dd/mm/yyyy') as p_date, 10 as value, to_date('18/01/2012','dd/mm/yyyy') as some_other_date FROm DUAL UNION ALL 
    SELECT 1 as id, 'A' as cd,to_date('18/01/2012','dd/mm/yyyy') as p_date, 10 as value, to_date('19/01/2012','dd/mm/yyyy') as some_other_date FROm DUAL
)
select 
  id,
  cd,
  value,
  block_num,
  min(p_date) as process_start_date,
  max(p_date) as process_end_date
from (
    select
      id,
      cd,
      value,
      p_date,
      sum(is_block_start) over (partition by id, cd, value order by p_date) as block_num
    from (
        select
          id, 
          cd, 
          value,
          p_date,
          -- get end date of previous block       
          case when lag(case when to_char(p_date, 'DY') = 'FRI' then p_date+3 else p_date+1 end) 
            over (partition by id, cd, value order by p_date) = p_date then 0 else 1 end as is_block_start
        from test_data
        -- Make sure that the data definitely doesn't include Sat or Sun because this could just confuse things
        where to_char(p_date, 'DY') not in ('SAT', 'SUN')
    )
)
group by id, cd, value, block_num
order by id, cd, value, block_num 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T21:30:02.417

不确定您想要什么...您没有按日期划分的正确数据。您的日期是唯一的，除非您的意思是您的 i_dt 必须等于 p_dt。即使您按日期而不是值进行分区，您也会像在简单选择中一样获得所有行。在我的示例中，我按值分区。唯一值内可能只有一个最大和一个最小日期。检查输出：

```
SELECT id, cd, i_dt, p_dt, value
 , To_Char(MIN(p_dt) OVER (PARTITION BY value), 'Mon, DD YYYY HH24:MI:SS') min_dt
 , To_Char(MAX(p_dt) OVER (PARTITION BY value), 'Mon, DD YYYY HH24:MI:SS') max_dt
FROM t
/

ID    CD    I_DT           P_DT    VALUE    MIN_DT                 MAX_DT
---------------------------------------------------------------------------------------
1     A    1/14/2012    1/13/2012    9    Jan, 12 2012 00:00:00    Jan, 16 2012 00:00:00
1     A    1/17/2012    1/16/2012    9    Jan, 12 2012 00:00:00    Jan, 16 2012 00:00:00
1     A    1/13/2012    1/12/2012    9    Jan, 12 2012 00:00:00    Jan, 16 2012 00:00:00
1     A    1/19/2012    1/18/2012    10   Jan, 10 2012 00:00:00    Jan, 18 2012 00:00:00
1     A    1/18/2012    1/17/2012    10   Jan, 10 2012 00:00:00    Jan, 18 2012 00:00:00
1     A    1/12/2012    1/11/2012    10   Jan, 10 2012 00:00:00    Jan, 18 2012 00:00:00
1     A    1/11/2012    1/10/2012    10   Jan, 10 2012 00:00:00    Jan, 18 2012 00:00:00 
```

# sql - 如何遍历两个表中的行并根据SQL中的合并结果创建一个新集合

> ID：14963732
> 
> 赞同：0
> 
> 时间：2013-02-19T17:29:29.357
> 
> 标签：sql, sql-server-2008

这是我的障碍。

我有两张桌子。表 A 包含比表 B 更多的行。我必须合并结果，如果表 A 不包含表 B 中的行，那么我将其插入到新集合中。但是，如果表 A 中的一行包含与表 B 具有相同主键的行，则新集合将采用表 B 中的行。

这最好在光标中完成还是有更简单的方法来做到这一点？我问是因为有 2000 万行，虽然我是 sql 新手，但我听说游标很昂贵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:39:07.527

你的措辞有点含糊。您似乎想要 TableB 中的所有内容，然后是 TableA 中 B 中没有匹配主键的行。以下查询解决了这个问题：

```
select *
from tableB union all
select *
from tableA
where tableA.pk not in (select pk from tableB) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:38:41.063

是的，游标很昂贵。

在更高版本的 SQL 中有一个`MERGE`命令可以一次性完成，但是太麻烦了。最好分两部分进行 - 首先：

```
UPDATE A SET
    field1 = B.field1
   ,field2 = B.field2
   , etc
FROM A JOIN B on B.id = A.id 
```

然后：

```
INSERT A SELECT * FROM B --enumerate fields if different
WHERE B.id not in (select id FROM A) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:47:52.257

OUTER JOIN 应该做你需要的，并且比游标更有效。试试这个查询

```
--first get the rows that match between TableA and TableB
INSERT INTO [new set]
SELECT TableB.* --or columns of your choice
FROM TableA LEFT JOIN TableB ON [matching key criteria]
WHERE TableB.[joining column/PK] IS NOT NULL

--then get the rows from TableA that don't have a match
INSERT INTO [new set]
SELECT TableA.* --you didn't say what was inserted if there was no matching row 
FROM TableA LEFT JOIN TableB ON [matching key criteria]
WHERE TableB.[joining column/PK] IS NULL 
```

# javascript - 从下拉菜单中切换 div 视觉

> ID：14963734
> 
> 赞同：0
> 
> 时间：2013-02-19T17:29:33.690
> 
> 标签：javascript, html, drop-down-menu

我正在为工作创建一个通用文本模板工具，我需要一些帮助来获取适当的模板以在更改下拉菜单时显示。

我正在使用 JavaScript，还没有适合我的 JQuery。

模板对象是 div，它们应该通过设置`display: none`除菜单选择的对象之外的所有对象来更改。

问题：模板（div）永远不会改变。

[小提琴](http://jsfiddle.net/x7ATg/)

感谢您的关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:40:06.587

脚本存在多个问题。

问题
1.`caseSelect`指向对象而不是值 ( `var caseSelect = document.getElementById("caseType").value;`)
2\. 在`select`元素中，所有选项都有值`thing1`
3.`break`每个结尾都缺少语句`case`

演示：[小提琴](http://jsfiddle.net/x7ATg/2/)

# logging - Log4Net RollingFileAppender 不刷新低容量日志的 IO 缓冲区

> ID：14963735
> 
> 赞同：19
> 
> 时间：2013-02-19T17:29:36.347
> 
> 标签：logging, io, buffer, log4net, flush

我正在思考[与 HENRI COOK 相同的问题](http://apache-logging.6191.n7.nabble.com/Turning-off-buffered-IO-for-the-RollingFileAppenders-td22224.html)。据我们从简短描述中可以看出，它已被报告为[Apache Jira 上的一个错误。](https://issues.apache.org/jira/browse/LOG4NET-336?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

我的问题本质上是事件仅在应用程序关闭时记录（甚至在事件发生几周后）。当日志记录量非常低时会发生这种情况。我在 Windows Server 2008 R2 上看到了这一点。这可以防止我们捕获和响应生产错误。

现在 appender 不是缓冲的。默认情况下，每次附加消息时，它也会在底层流上调用 Flush()。

我的问题是为什么它不冲洗？[除了以编程方式刷新所有附加程序](https://stackoverflow.com/questions/2045935/is-there-anyway-to-programmably-flush-the-buffer-in-log4net)之外，还有什么补救措施吗？您是否认为[脉冲附加程序](https://issues.apache.org/jira/browse/LOG4NET-83?focusedCommentId=13551218&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13551218)是一种可行的解决方法？

附加程序配置：

```
<appender name="RollingErrorFileAppender" type="log4net.Appender.RollingFileAppender">
  <param name="File" value="D:\LogFiles\zzzz\xxxxxx__ERROR" />
  <param name="AppendToFile" value="true" />
  <param name="DatePattern" value="_yyyyMMddHH&quot;.log&quot;" />
  <param name="RollingStyle" value="Date" />
  <param name="StaticLogFileName" value="false" />
  <filter type="log4net.Filter.LevelRangeFilter">
    <param name="LevelMin" value="ERROR" />
    <param name="LevelMax" value="FATAL" />
  </filter>
  <layout type="log4net.Layout.PatternLayout">
    <param name="ConversionPattern" value="%utcdate{yyyy-MM-dd HH:mm:ss.fff},[%thread],%level,%logger,%m%n"/>
  </layout>
</appender> 
```

更新 2013-06-19

我无法使用任何代码重现该行为。无论我尝试多么糟糕，数据总是会立即写入磁盘。但是，有一个重要的观察结果：如果第一次写入文件大于 1KiB，则修改时间永远不会随着后续写入而更新。它只会在文件关闭时更新。另一方面，如果第一次写入是一个简短的单行，任何后续写入都将更新修改时间。这种行为在 log4net 和手动 IO 操作之间、在 32 位 WinXP 和 64 位 W2k8R2 之间、在 .NET 2.0、3.5 和 .NET 4.0 之间是一致的。这仍然不能解决问题，但至少我现在可以理解奇怪的修改时间模式。

谢谢，罗伯

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-27T18:09:04.987

Since you are only concerned with error level or worse log events, and that traffic is fortunately infrequent, I would suggest configuring your appender to immediately flush.

```
<param name="ImmediateFlush" value="true" /> 
```

This saves you from having to programmatically flush your appender on every log event (which wasn't working anyway from the sound of it). Now, if you wish to open your appender up to more log levels, then of course immediately flushing all events could have greater performance concerns.

**EDIT**

I added the config file and a simple main program I used for testing. Using the following, I do see log events immediately flushed. In regard to your comment, I can also strip out the `ImmediateFlush` line from the xml and see the default `true` value work for flushing. I kept the line in my example for purposes of explicitly stating the desired behavior.

Basic main prog:

```
class Program
{
    static void Main(string[] args)
    {
        ILog log = LogManager.GetLogger(typeof(Program));
        XmlConfigurator.Configure(new FileInfo(@"C:\temp\logTest.config"));

        string msg;
        while ((msg = Console.ReadLine()) != "Done")
        {
            log.Error(msg);
        }

        LogManager.Shutdown();
    }
} 
```

logTest.config referenced by main prog:

```
<log4net>
    <appender name="RollingErrorFileAppender" type="log4net.Appender.RollingFileAppender">
        <param name="File" value="C:\temp\log" />
        <param name="AppendToFile" value="true" />
        <param name="DatePattern" value="_yyyyMMddHH&quot;.log&quot;" />
        <param name="RollingStyle" value="Date" />
        <param name="StaticLogFileName" value="false" />
        <param name="ImmediateFlush" value="true" />
        <filter type="log4net.Filter.LevelRangeFilter">
            <param name="LevelMin" value="ERROR" />
            <param name="LevelMax" value="FATAL" />
        </filter>
        <layout type="log4net.Layout.PatternLayout">
            <param name="ConversionPattern" value="%utcdate{yyyy-MM-dd HH:mm:ss.fff},[%thread],%level,%logger,%m%n"/>
        </layout>
    </appender>
    <root>
        <level value="INFO" />
        <appender-ref ref="RollingErrorFileAppender" />
    </root>
</log4net> 
```

# java - 强制转换为实现类

> ID：14963740
> 
> 赞同：1
> 
> 时间：2013-02-19T17:29:43.410
> 
> 标签：java, class, classcastexception

所以，我在 Java 中工作，试图将 a`java.sql.ResultSet`转换为我自己的类`MyResultSet`

这是代码：MyResultSet.java

```
public class MyResultSet implements java.sql.ResultSet{
     //There are a bunch of Implemented Methods here. None of them have any custom code, They are all unchanged. Just didn't want to put huge code in here.
} 
```

我试图用来转换它的代码

```
ResultSet r = getResultSet();
return (MyResultSet)r; 
```

每当我运行它时，我都会得到一个“ClassCastException”。

有人可以向我解释如何转换为实施类吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T17:39:51.473

你正在尝试做的一个例子：

```
public interface Animal { } // in your case java.sql.ResultSet

public class Dog implements Animal { } // in your case r

public class Cat implements Animal { } // in your case MyResultSet 
```

稍后的

```
Animal a = getAnimal(); // returns a Dog
Cat c = (Cat) a; // ClassCastException - Can't cast a Dog to a Cat. 
```

您正在尝试将 a 强制转换`Dog`为 a `Cat`，但这不起作用，因为 a`Cat`不是 a `Dog`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T17:37:21.877

是的，`getResultSet()`返回一个实现的类`java.sql.ResultSet`，但这并不意味着您可以强制转换为另一个实现它的类。这不是继承的工作方式。

```
 ResultSet
       /       \
MyResultSet  What getResultSet returns 
```

当你有一个给定类型的类时，你只能在继承树中向上或向下转换它，不能向上或向下转换。

选项：

*   如果你知道什么`getResultSet()`返回（我的意思是最低继承级别的类），你可以`MyResultSet`继承它。

*   有一个包装类，它有一个`ResultSet`成员并调用该成员中的适用方法。就像是：

    ```
    class MyResultSet
    {
      private ResultSet resultSet;
      public MyResultSet(ResultSet resultSet1) { resultSet = resultSet1; }
      public doSomething() { resultSet.doSomething(); }
    } 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T17:40:44.967

你不能施放。`getResultSet()`将为您提供 的实现，`java.sql.ResultSet`这显然**不是您**的，但属于 Java 实现。

如果你想使用你的方法，你可以*委托*调用：

```
public class MyResultSet implements ResultSet{
private ResultSet orig;
public MyResultSet(ResultSet orig) {
    this.orig = orig;
}

// do delegations, 1000 methods like this
public String getString(int columnIndex) throws SQLException {
    return orig.getString(columnIndex);
}
// your own methods can come here
} 
```

在 Eclipse 中，您可以生成委托方法的代码，不必一一编写。只需创建私有字段，然后执行*RightClick - Source - Generate Delegate Methods...*

这种技术称为*wrapping*。您将原始对象包装到您的对象中，添加了额外的功能。

现在您可以致电：

```
ResultSet originalresultset = ...;
MyResultSet myresultset = new MyResultSet(originalresultset); 
```

# javascript - 从 gwt 调用 javascript 函数。HTML 窗格

> ID：14963741
> 
> 赞同：0
> 
> 时间：2013-02-19T17:29:43.253
> 
> 标签：javascript, gwt, smartgwt, jsni

我已经看到了很多类似问题的答案，但还没有找到我的问题的答案。有一个html页面。

```
<body>
  <div id="text">some text</div>
  <script>
     function hide()
     {
         document.getElementById("text").style.display = "none";
     }
  </script>
</body> 
```

gwt中的代码

```
HTMLPane panel = new HTMLPane();
panel.setContentsType(ContentsType.PAGE);
panel.setContentsURL("pages/index.html");

public native void someMethod(HTMLPane panel)/*-{
    $doc.hide();
}-*/; 
```

但没有任何效果。试图将函数定义为

```
document hide = function hideF()
{
    document.getElementById("text").style.display = "none";
} 
```

并在不同的位置定义一个函数，但没有任何帮助。请帮忙找出错误，或者说不可能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T23:52:42.960

[问题是，当使用ContentsType.PAGE](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/widgets/HTMLFlow.html#setContentsType%28com.smartgwt.client.types.ContentsType%29)时，HTMLPane 使用 iframe 。
所以，`hide()`是iframe中子窗口的一个功能。
如果你必须使用`ContentsType.PAGE`，下面的作品。

```
HTMLPane panel = new HTMLPane();
panel.setContentsType(ContentsType.PAGE);
panel.setContents("<iframe id='" + "id_internal_panel_1" + "' src='" + "pages/index.html" + "' style='border:none'/>");

// above use of iframe instead of using the one created by HTMLPane, could cause styling and other issues

// following did not work for me
// panel.setContentsURL("pages/index.html");
// panel.getElement().setId("id_internal_panel_1");
// panel.getElement().setPropertyString("name", "id_internal_panel_1");
// panel.getElement().setPropertyString("id", "id_internal_panel_1");

IButton button = new IButton("Hide");
button.addClickHandler(new ClickHandler() {
    public void onClick(ClickEvent clickEvent) {
        someMethod();
    }
});

public native void someMethod()/*-{
    $doc.getElementById("id_internal_panel_1").contentWindow.hide();
    // $wnd.document.getElementById("id_internal_panel_1").contentWindow.hide();

    // can use following with panel.setContentsURL("pages/index.html");, if ContentsType is not set to ContentsType.PAGE
    // $wnd.hide();
}-*/; 
```

[将 ID 设置为 HtmlPane 中的 iframe 在 iframe 中](http://forums.smartclient.com/showthread.php?t=17276)
[调用 javascript 函数](https://stackoverflow.com/questions/1600488/calling-javascript-function-in-iframe)

使用“隐藏/文本”等过于通用的名称可能会导致与其他脚本/对象发生冲突并导致奇怪的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T09:12:41.827

`hide()``window`是调用本机方法中— 替换`$doc`为的成员`$wnd`，即：

```
public native void someMethod(HTMLPane panel)/*-{
    $wnd.hide();
}-*/; 
```

如果您坚持将其附加到`document`，请保持本机方法不变，但更正函数分配：

```
document.hide = function()
{
    document.getElementById("text").style.display = "none";
} 
```

# sql-server - SQL 服务器变量：循环与重复？

> ID：14963742
> 
> 赞同：5
> 
> 时间：2013-02-19T17:29:57.987
> 
> 标签：sql-server, sql-server-2008

为什么我**可以**在循环中声明相同的变量名但**不允许**没有循环？

```
DECLARE @loop INT

SET @loop = 0

WHILE @loop<5
BEGIN
    DECLARE @t INT  -- <-- This is called multiple times
    SET @t = 1
    SET @loop = @loop+1
    SELECT @loop
END 
```

*   这将执行：1,2,3,4,5

而这：

```
 DECLARE @t INT
  SET @t = 1
  DECLARE @t INT
  SET @t = 1 
```

显然会说：

*   *变量名“@t”已被声明。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T17:40:03.610

的放置`DECLARE`无关紧要（除了解析器不允许您在 之前尝试使用它`DECLARE`）

它实际上只声明了一个变量，而不管包含该声明的代码块被执行了多少次。

`DECLARE`本身不是可执行语句。例如

```
IF 1 = 0
BEGIN
DECLARE @I INT
END

SELECT @I 
```

即使从未输入该块也可以正常工作。变量的内存在编译时保留，甚至在[执行上下文中](http://blogs.msdn.com/b/sqlprogrammability/archive/2007/01/09/1-0-structure-of-the-plan-cache-and-types-of-cached-objects.aspx)开始执行查询之前。

看到这一点的一种方法是

```
DBCC FREEPROCCACHE;

GO

SELECT  m2.pages_allocated_count
        --If 2012 use the next line instead
        --,m2.pages_in_bytes/m2.page_size_in_bytes as pages_allocated_count
        ,m2.page_size_in_bytes
FROM   sys.dm_exec_cached_plans cp
       CROSS apply sys.dm_exec_sql_text(cp.plan_handle) t
       JOIN sys.dm_os_memory_objects m1 ON m1.memory_object_address = cp.memory_object_address
       JOIN sys.dm_os_memory_objects m2 ON m1.page_allocator_address = m2.page_allocator_address
WHERE  text LIKE '%this query%'
 AND m2.type = 'MEMOBJ_EXECUTE'

DECLARE @A0 VARCHAR(8000);
DECLARE @A1 VARCHAR(8000);
DECLARE @A2 VARCHAR(8000);
DECLARE @A3 VARCHAR(8000);
DECLARE @A4 VARCHAR(8000);
DECLARE @A5 VARCHAR(8000);
DECLARE @A6 VARCHAR(8000);
DECLARE @A7 VARCHAR(8000);
DECLARE @A8 VARCHAR(8000);
DECLARE @A9 VARCHAR(8000);
DECLARE @A10 VARCHAR(8000);
DECLARE @A11 VARCHAR(8000);
DECLARE @A12 VARCHAR(8000);
DECLARE @A13 VARCHAR(8000);
DECLARE @A14 VARCHAR(8000);
DECLARE @A15 VARCHAR(8000);
DECLARE @A16 VARCHAR(8000);
DECLARE @A17 VARCHAR(8000);
DECLARE @A18 VARCHAR(8000);
DECLARE @A19 VARCHAR(8000);
DECLARE @A20 VARCHAR(8000); 
```

它显示了为当前查询保留的内存，如果您调整声明的变量数量，您将看到保留的内存更改，即使该`DECLARE`块位于批处理末尾。

# magento - Magento ：向特定资源 acl 可访问的编辑产品页面添加一个按钮

> ID：14963743
> 
> 赞同：1
> 
> 时间：2013-02-19T17:29:57.950
> 
> 标签：magento, button, admin, acl, product

我试图覆盖块 Mage_Adminhtml_Block_Catalog_Product_Edit 并以这种方式创建按钮“delete_cache_product”：

```
protected function _prepareLayout()
{
    parent::_prepareLayout();
        $this->_product = $this->getProduct();
        $this->setChild('delete_cache_product',
            $this->getLayout()->createBlock('adminhtml/widget_button')
                ->setData(array(
                'label'     => Mage::helper('catalog')->__('delete cache'),
                'onclick'   => 'confirmSetLocation(\''.Mage::helper('catalog')->__('Are you sure?').'\', \''.$this->getDeleteCacheProductUrl().'\')',
                'title' => Mage::helper('catalog')->__('Delete product cache?')
            ))
        );
    return $this;
} 
```

问题是如何为该按钮关联资源acl，以便只有有权访问此类资源的用户才能看到该按钮？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:38:54.587

然后使用 ACL 创建一个自定义管理模块

```
 if(Mage::getSingleton('admin/session')->isAllowed('admin/custommodulename')){
    $this->setChild('delete_cache_product',
        $this->getLayout()->createBlock('adminhtml/widget_button')
            ->setData(array(
            'label'     => Mage::helper('catalog')->__('delete cache'),
            'onclick'   => 'confirmSetLocation(\''.Mage::helper('catalog')->__('Are you sure?').'\', \''.$this->getDeleteCacheProductUrl().'\')',
            'title' => Mage::helper('catalog')->__('Delete product cache?')
        ))
    );
 } 
```

请参阅[http://alanstorm.com/magento_acl_authentication](http://alanstorm.com/magento_acl_authentication)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T16:53:22.380

我终于找到了解决方案。：我在其中创建了一个权限，`adminhtml.xml`然后直接调用：

```
# File: adminhtml.xml
<config>
    <acl>
        <admin>
            <children>
                <catalog>
                    <children>
                        <products>
                            <children>
                                <deletecacheproduct>
                                    <title>Delete product cache</title>
                                    <sort_order>0</sort_order>
                                </deletecacheproduct>
                            </children>
                        </products>
                    </children>
                </catalog>
            </children>
            </admin>
        </resources>
    </acl>
</config> 
```

* * *

```
# File: Edit.php (block)

if (Mage::getSingleton('admin/session')->isAllowed('catalog/products/deletecacheproduct')) {
    ...
} 
```

# php - 我的 Auth 类中有数据库逻辑可以吗？

> ID：14963744
> 
> 赞同：1
> 
> 时间：2013-02-19T17:29:59.947
> 
> 标签：php, oop

我有大量域对象使用数据映射器来完成所需的数据库工作，因此域对象不知道映射器或数据来自何处以保持高度抽象。现在我的问题是我有一个`Auth`对象，我在应用程序启动的早期就使用了这个对象：

```
$auth = $container->get('auth');
$auth->isAllowed($pageName, $accountType); 
```

目前我在课堂上做我的 SQL 工作并且它有效，但有些东西告诉我我做错了。有没有更好的方法来实现这一目标？

我想有一种方法可以将我的`$auth`对象放入一个`$authDAO`或`$authMapper`对象中以在数据库中查找访问控制列表，但这对我来说没有意义，因为一个`Auth`对象并不是你所说的“域对象” “在我看来绝对不需要数据映射器。

`Auth`我的对象中可以有数据库逻辑吗？还是有更好的方法来处理非域对象的数据库逻辑/工作？

# mysql - Mysql通过ID从另一个表中删除一个表

> ID：14963746
> 
> 赞同：4
> 
> 时间：2013-02-19T17:30:08.977
> 
> 标签：mysql, sql

我有两张桌子：

```
A
id | name 
```

和

```
B
id | name 
```

在 B 表上，我创建查询以选择所有数据，其中 id 位于（...某些值），但是我如何在一个查询中选择此 B - id 并从 A 中删除，其中 A.id = B.id ？

我是 sql 新手……找不到如何在一个查询中组合所有内容……

*我必须在一些类似的查询中从 b 中选择，例如我的 b 查询：select * from B where somefieldinteger in (1,4,9,21,25) 并且 b.id 必须与 a* 进行比较

**更新** 这个抛出错误

```
delete `LINK_LA_TYP` FROM `LINK_LA_TYP` JOIN `LINK_ART` ON `LINK_LA_TYP`.LAT_LA_ID=`LINK_ART`.LA_ID JOIN `ARTICLES` ON `LINK_ART`.LA_ART_ID=`ARTICLES`.ART_ID WHERE (`ARTICLES`.ART_SUP_ID in (10008,10439,11005,10097,10669,11100,80,10912,10683,10675,10194,11196,1166,10730,10248,10870,11200,11059,247,10121,10911,489,10724,496,10093,10205,1318,10953,11199,11047,128,114,194,10865,11058,10345,1286,10667,10064,11077,10622,11205,10917,10344,495,10709,10954,10744,304,10957,10447,10764,10129,10862,10918,10731,11115,10095,10859,10580,1345,10177,10323,144,11182,10132,256,10941,58,10006,10017,10780,10765,10665,11110,10714,10224,750,10267,10179,10725,10774,11063,10868,10103,10676,10057,10649,255,10322,11022,309,10754,11121,10801,10018,11004,10245,146,11056,381,10781,10699,11120,11126,830,10240,11162,10436,10584,10342,10861,11190,10721,11171,10564,10545,94,10087,73,10755,10869,10547,10706,10346,444,426,10059,153,122,10674,64,113,11101,10231,10337,806,11117,10385,251,11188,491,11192,100,10792,10069,10864,11099,10246,10178,10758,10568,10230,10124,10384,10782,10726,384,10670,305,10763,10768,10585,10394,10552,498,10677,1348,168,10814,10582,10382,11093,11173,10381,427,441)) limit 50 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T17:32:55.820

`delete`像这样一起使用`join`：

```
mysql> create table a (id int);
mysql> insert into a values (1), (2), (3), (4);
mysql> create table b (id int);
mysql> insert into b values (2), (3);
mysql> delete a from a join b on a.id=b.id where b.id > 2;
mysql> select * from a;
+------+
| id   |
+------+
|    1 |
|    2 |
|    4 |
+------+ 
```

这可以扩展到任意数量的表，例如：

```
DELETE a 
FROM a 
JOIN b ON a.idA=b.idA 
JOIN c ON b.idB=c.idB; 
```

`a`这将从那些`b`又被引用的记录中删除的所有记录中删除`c`。您也可以像这样添加 WHERE 子句：

```
DELETE a 
FROM a 
JOIN b ON a.idA=b.idA 
JOIN c ON b.idB=c.idB
WHERE a.status='done' AND
      b.status='open' AND
      c.status='open'; 
```

如果要限制要删除的行数，请执行以下操作：

```
DELETE a 
FROM a 
JOIN b ON a.idA=b.idA 
JOIN c ON b.idB=c.idB
LIMIT 500000; 
```

如果要删除前 500000 行，则需要细化哪些行在前，因此需要在行之间建立一些排序。换句话说，您需要按某些标准对行进行排序，然后像这样限制：

```
DELETE a 
FROM a 
JOIN b ON a.idA=b.idA 
JOIN c ON b.idB=c.idB
ORDER BY a.something
LIMIT 500000; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:32:27.890

```
delete from A where exists (select 1 from B where A.id=B.id and B.criteria=true) 
```

如果您省略 ... 并且 B.criteria=true 它将删除 A 中出现在 B 中的所有行；否则你删除任何符合你的标准的东西。

# responsive-design - TYPO3 和自适应图像 - 图像大小调整不起作用

> ID：14963748
> 
> 赞同：0
> 
> 时间：2013-02-19T17:30:16.203
> 
> 标签：responsive-design, typo3, adaptive-design

我尝试使用以下方法制作响应式设计网站：

*   TYPO3
*   基础框架
*   扩展 adx_adaptive_images

和工作非常酷，但`TYPO3`根本不调整图像大小。`foundation framework``adaptive images`

以前我尝试使用[http://adaptive-images.com/](http://adaptive-images.com/)但我遇到了同样的问题。

我使用默认`.htaccess`文件

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:55:50.117

问题是：`img { width: 100%; }`css文件中没有

# knockout.js - 多次调用方法，而不是一次

> ID：14963751
> 
> 赞同：1
> 
> 时间：2013-02-19T17:30:19.150
> 
> 标签：knockout.js

我有一个编辑方法，当单击一行时调用它，以设置编辑信息（焦点调用，选择调用以方便输入）......一切正常，无需调用下一个编辑（当一个人到达最后一个行中的元素，我在可观察数组中搜索下一个元素......如果有，它通过再次调用相同的方法移动到下一个元素）。

问题是，当调用此方法时，它会将请求堆叠在内存中，并将每个连续调用都付诸行动。我知道在 jquery 方法上，您可以调用 unbind 方法来释放对同一方法的先前调用，但不确定对淘汰递归函数执行此操作的最佳方法是什么。

有什么建议么？

这是一个小提琴：[示例](http://jsfiddle.net/GmZjF/3/)

51号线的电话，

```
self.editItem(self.items()[index + 1]); 
```

是递归调用，它将 editItem 调用到列表中的下一个项目......第 26 行有一个警报，当 editItem 方法运行时调用它，显示运行中的差异。如果您单击一行，然后单击任何其他行，它可以正常工作，正确选择等等......但是如果您在右侧的最后一个字段上（当它选择下一个可用项目时）进行标签，它开始堆积。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:46:08.740

您不应该`.live`在这里使用委托方法，因为每次`editItem`调用新的 keydown 回调都会添加到早期回调的堆栈中。

所以只需要改变两点：

```
// change .live('keydown', ...) to .keydown(...) or .bind('keydown', ...)
$('#itemDescriptionEdit').keydown(function (e) {

    // ...

    // and return false at the end of callback to stop event propagation
    return false;
}); 
```

更新小提琴：http: [//jsfiddle.net/ostgals/GmZjF/4/](http://jsfiddle.net/ostgals/GmZjF/4/)

# django - Django 应用程序：安装系统范围与项目范围

> ID：14963755
> 
> 赞同：0
> 
> 时间：2013-02-19T17:30:35.453
> 
> 标签：django

在系统范围内安装 django 应用程序与在项目范围内安装它们的优点/缺点（关于可维护性）是什么？有推荐的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:34:39.353

django 扩展是指[django-extensions](https://github.com/django-extensions/django-extensions)吗？

老实说，我会避开系统范围的安装，它们会立即将您与系统的已安装版本联系起来，如果在系统范围内出现不兼容性，这比使用项目范围的方法要大。此外，它们在部署到远程服务时增加了复杂性，并且不遵守[12 Factor App](http://www.12factor.net/)原则。从长远来看，保持一切自包含、项目代码及其依赖项将使生活更轻松。

我建议使用[virtualenv](http://pypi.python.org/pypi/virtualenv)和[pip](http://pypi.python.org/pypi/pip)来安装您的依赖项，这使它们与相关项目隔离，并大大简化了部署。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:53:59.723

推荐的方法是不要在项目中复制任何可重用的应用程序。它们提供扩展点和设置来自定义。此外，建议对项目使用 virtualenv 并在那里安装任何项目特定的 python 模块。这将保护您免受不同版本的冲突。

# java - 防止在页面加载时将后缀添加到资源中

> ID：14963756
> 
> 赞同：14
> 
> 时间：2013-02-19T17:30:36.837
> 
> 标签：java, jsf, jsf-2, akamai

我有一个 JSF2 应用程序正在运行并且工作没有问题。我在 JSF 中遇到的问题是资源包。所有资源都`.xhtml`附加了后缀。在浏览器中加载时也会`main.css`如此。`main.css.xhtml`我想拥有它，这样它就`.xhtml`不会附加到资源中（不要介意页面本身）。

有没有办法我们**不能**`.xhtml`附加到资源？

理想情况下，我不必更改网站的内部运作。我在下面列出了一些想法，但我不得不说我不是很喜欢这些。希望在某个地方找到解决方案？

我在 Glassfish 3.1.2.2 上使用 Majorra v.2.1.17。

### 当前 Faces Servlet 在 web.xml 中加载（更新）

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/javax.faces.resource/*</url-pattern>
</servlet-mapping> 
```

### 为什么这个问题与其他问题不同

*   [带有 CDN 的 JSF 2 资源？](https://stackoverflow.com/questions/8067904/jsf-2-resources-with-cdn?rq=1). 我不想将我的资源放在 CDN 上，而是让我的资源留在我的服务器上，但被推送到 CDN。
*   [更改资源 URL 的 /javax.faces.resource 前缀](https://stackoverflow.com/questions/7354464/change-javax-faces-resource-prefix-of-resource-urls?rq=1)。我不想更改前缀。我只想更改后缀。我想`<link type="text/css" rel="stylesheet" href="/javax.faces.resource/main03.css.xhtml?ln=styles">`成为：`<link type="text/css" rel="stylesheet" href="/javax.faces.resource/main03.css?ln=styles">` *没*​​有`.xhtml`扩展名。
*   [将 JSF 前缀更改为后缀映射迫使我在 CSS 背景图像上重新应用映射](https://stackoverflow.com/questions/6835499/changing-jsf-prefix-to-suffix-mapping-forces-me-to-reapply-the-mapping-on-css-ba)。因为我没有加载资源的问题。该站点有效，我们只是很难将网页与资源区分开来（因为我们只查看扩展名）。

### 推理

当然你可能会问我为什么需要这个。好吧，我们正在将我们的应用程序转移到由 Akamai CDN 提供服务。

我们在集成站点时遇到的问题是我们试图在边缘服务器上缓存静态内容。这是通过匹配文件扩展名（即：.js、.doc、.png、css 等）来完成的。我们无法匹配`xhtml`，因为这将缓存所有页面以及静态内容。这会导致会话等问题。

### 尝试的解决方案

根据 BalusC 的回答，我已经按照建议实现了资源处理程序。我不会在这里重写代码，因为它在下面的答案中。

但是，加载复合组件时出现错误。我收到这样的错误：

```
WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception
java.lang.NullPointerException
    at com.sun.faces.application.ApplicationImpl.createComponent(ApplicationImpl.java:975)
    at com.sun.faces.facelets.tag.jsf.CompositeComponentTagHandler.createComponent(CompositeComponentTagHandler.java:162)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.createComponent(ComponentTagHandlerDelegateImpl.java:494)
    at com.sun.faces.facelets.tag.jsf.ComponentTagHandlerDelegateImpl.apply(ComponentTagHandlerDelegateImpl.java:169)
... 
```

复合组件已正确加载，因为如果我“取消注册”`ResourceHandler`我们刚刚创建的新组件，它将加载。堆栈跟踪使我相信它试图在 java 类中找到这个组件，而不是在资源中找到它。根据`grepcode`这将在发生错误的最后一行（975）：

```
String packageName = componentResource.getLibraryName();
String className = componentResource.getResourceName();
className = packageName + '.' + className.substring(0, className.lastIndexOf('.')); 
```

这意味着`resourceName`, aka`className`是`null`因为我得到的错误是`java.lang.NullPointerException`. 我似乎无法弄清楚如何/在何处`ResourceHandler`调用复合组件。对解决最后一个问题有帮助吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T11:16:21.467

这可以通过一个自定义来实现，该自定义[`ResourceHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html)返回[`createResource()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html#createResource%28java.lang.String,%20java.lang.String%29)a[`Resource`](http://docs.oracle.com/javaee/6/api/javax/faces/application/Resource.html)反过来返回一个“未映射”的 URL on [`Resource#getRequestPath()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/Resource.html#getRequestPath%28%29)。您只需要将默认的 JSF 资源前缀添加`/javax.faces.resource/*`到映射`<url-pattern>`列表中，`FacesServlet`就可以触发它。

此外，您需要重写[`isResourceRequest()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html#isResourceRequest%28javax.faces.context.FacesContext%29)以检查 URL 是否以 JSF 资源前缀开头，以及[`handleResourceRequest()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html#handleResourceRequest%28javax.faces.context.FacesContext%29)定位和流式传输正确的资源。

总而言之，这应该这样做：

```
public class UnmappedResourceHandler extends ResourceHandlerWrapper {

    private ResourceHandler wrapped;

    public UnmappedResourceHandler(ResourceHandler wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public Resource createResource(final String resourceName, final String libraryName) {
        final Resource resource = super.createResource(resourceName, libraryName);

        if (resource == null) {
            return null;
        }

        return new ResourceWrapper() {

            @Override
            public String getRequestPath() {
                ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
                String mapping = externalContext.getRequestServletPath();

                if (externalContext.getRequestPathInfo() == null) {
                    mapping = mapping.substring(mapping.lastIndexOf('.'));
                }

                String path = super.getRequestPath();

                if (mapping.charAt(0) == '/') {
                    return path.replaceFirst(mapping, "");
                }
                else if (path.contains("?")) {
                    return path.replace(mapping + "?", "?");
                }
                else {
                    return path.substring(0, path.length() - mapping.length());
                }
            }

            @Override // Necessary because this is missing in ResourceWrapper (will be fixed in JSF 2.2).
            public String getResourceName() {
                return resource.getResourceName();
            }

            @Override // Necessary because this is missing in ResourceWrapper (will be fixed in JSF 2.2).
            public String getLibraryName() {
                return resource.getLibraryName();
            }

            @Override // Necessary because this is missing in ResourceWrapper (will be fixed in JSF 2.2).
            public String getContentType() {
                return resource.getContentType();
            }

            @Override
            public Resource getWrapped() {
                return resource;
            }
        };
    }

    @Override
    public boolean isResourceRequest(FacesContext context) {
        return ResourceHandler.RESOURCE_IDENTIFIER.equals(context.getExternalContext().getRequestServletPath());
    }

    @Override
    public void handleResourceRequest(FacesContext context) throws IOException {
        ExternalContext externalContext = context.getExternalContext();
        String resourceName = externalContext.getRequestPathInfo();
        String libraryName = externalContext.getRequestParameterMap().get("ln");
        Resource resource = context.getApplication().getResourceHandler().createResource(resourceName, libraryName);

        if (resource == null) {
            super.handleResourceRequest(context);
            return;
        }

        if (!resource.userAgentNeedsUpdate(context)) {
            externalContext.setResponseStatus(HttpServletResponse.SC_NOT_MODIFIED);
            return;
        }

        externalContext.setResponseContentType(resource.getContentType());

        for (Entry<String, String> header : resource.getResponseHeaders().entrySet()) {
            externalContext.setResponseHeader(header.getKey(), header.getValue());
        }

        ReadableByteChannel input = null;
        WritableByteChannel output = null;

        try {
            input = Channels.newChannel(resource.getInputStream());
            output = Channels.newChannel(externalContext.getResponseOutputStream());

            for (ByteBuffer buffer = ByteBuffer.allocateDirect(10240); input.read(buffer) != -1; buffer.clear()) {
                output.write((ByteBuffer) buffer.flip());
            }
        }
        finally {
            if (output != null) try { output.close(); } catch (IOException ignore) {}
            if (input != null) try { input.close(); } catch (IOException ignore) {}
        }
    }

    @Override
    public ResourceHandler getWrapped() {
        return wrapped;
    }

} 
```

注册如下`faces-config.xml`：

```
<application>
    <resource-handler>com.example.UnmappedResourceHandler</resource-handler>
</application> 
```

扩展`FacesServlet`URL 模式`ResourceHandler.RESOURCE_IDENTIFIER`：

```
<servlet-mapping>
    <servlet-name>facesServlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
    <url-pattern>/javax.faces.resource/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T06:15:31.073

你可以看看[Rewrite](http://ocpsoft.org/rewrite/)。重写允许修改呈现到页面的 URL 并以您想要的任何方式修改它们。您可以执行以下操作将 CDN 添加到您的站点：

```
.addRule(CDN.relocate("{p}foo-{version}.css")
         .where("p").matches(".*")
         .where("version").matches(".*")
         .to("http://mycdn.com/foo-{version}.css")); 
```

我认为使用 Rewrite 实现您的要求应该很容易。

查看[示例配置](http://ocpsoft.org/rewrite/examples/)以了解重写的功能。

# cygwin - Cygwin 1.7 中的 .bashrc

> ID：14963767
> 
> 赞同：19
> 
> 时间：2013-02-19T17:30:55.917
> 
> 标签：cygwin

我在 Windows Server 2012 上运行 Cygwin 1.7.17。我的用户帐户是“管理员”。我应该在哪里放置一个 .bashrc 文件供 Cygwin bash 提取？

我试过“c:\users\Administrator”文件夹，它似乎是 Cygwin 1.7 中的 HOME。也试过 c:\cygwin\home\Administrator 。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-19T18:53:04.400

启动一个 shell 实例并运行命令`echo $HOME`以查看您的主路径设置为什么。这就是您将读取所有用户配置文件的地方。它可能不是您尝试过的路径之一。

一旦你知道它在哪里，只需从文件夹中复制模板`.bash_profile`和文件即可开始。`.bashrc``/etc/skel`

如果您不喜欢当前用作您家的路径，您可以通过编辑来更改它`/etc/passwd`。这是有关此的更多信息...[安全地更改主目录](https://stackoverflow.com/questions/225764/safely-change-home-directory-in-cygwin)

# java - 来自 HashMap 的 JSONObject - 转换为字符串失败

> ID：14963770
> 
> 赞同：0
> 
> 时间：2013-02-19T17:31:01.747
> 
> 标签：java, json, casting, hashmap

我需要`JSONObject`从`HashMap`自定义类`toString`和浮点值中创建一个。我尝试了下面的代码，希望它能正常工作：

```
public class MyClass {
    ...
    public String toString() {
        return "a nice string"
    }
}

HashMap<MyClass,Float> map = new HashMap<MyClass,Float>();
map.put(...);

JSONObject json = new JSONObject(map); 
```

但我得到：

```
java.lang.ClassCastException: MyClass cannot be cast to java.lang.String 
```

创建这个的最佳方法是什么`JSONObject`？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:34:11.467

你需要改变这个：

`HashMap<MyClass,Float> map = new HashMap<MyClass,Float>();`

和

`HashMap<String,Float> map = new HashMap<String,Float>();`

正如您所说的“***自定义类的 toString 和浮点值的 HashMap*** ”

您还没有提到如何将值放入哈希图中。

但是如果你使用`toString`自定义类的方法，那么你应该把它写成：

```
MyClass m = new MyClass();
map.put(m.toString,123.45f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:48:26.977

好像你正在使用[`org.json`](http://www.json.org/java/index.html)图书馆。如果您查看`JSONObject`该类的代码，显然它们没有使用泛型。

```
public JSONObject(Map map) {
    this.map = new HashMap();
    if (map != null) {
        Iterator i = map.entrySet().iterator();
        while (i.hasNext()) {
            Map.Entry e = (Map.Entry)i.next();
            Object value = e.getValue();
            if (value != null) {
                this.map.put(e.getKey(), wrap(value));
            }
        }
    }
} 
```

该映射似乎通过它们用于管理唯一键的映射的外观来处理具有`String`键和值的条目。在评论中，它还指出：`Object``keyPool``String`

> 这由 JSONObject.put(string, object) 使用。

所以假设 JSON 对象的键是`Strings`.

您的`MyClass`类型不能`String`直接向上转换（`String`不是 的超类`MyClass`），这就是构造函数实际上抱怨映射的原因，因为它需要表单的映射（注意and`HashMap<String,Object>`没有问题）。`Float``Object`

要解决此问题，您必须定义一个`HashMap<String,Float>`应该存储对象`String`表示的位置，`MyClass`方法是使用`toString`.

如果您不能使用 a `String`，您可以考虑使用中间结构，将用 a 表示的代码映射`String`到某个`MyClass`对象，这样您就可以保留您的`MyClass`类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:03:12.287

Gamb 和 Abu 的答案都是正确的，并帮助我获得了最终结果。

我这样解决了我的问题：

```
HashMap<MyClass,Float> obj = functionThatReturnsThisStructure();

JSONObject jsonObj = new JSONObject();

for (Entry<MyClass,Float> entry: obj.entrySet()) {
    jsonObj.put(entry.getKey().toString(), entry.getValue());
} 
```

# android - Android Asynctask 处理实时视频帧

> ID：14963773
> 
> 赞同：6
> 
> 时间：2013-02-19T17:31:07.013
> 
> 标签：android, image-processing, android-asynctask

我正在使用 OpenCV 尝试进行一些实时视频处理。由于处理相当繁重，它会显着延迟输出帧，使实时流看起来不连贯。

我想将一些处理卸载到 AsyncTask 中。我已经尝试过了，它实际上使视频更加流畅。但是，它最终会一次启动大量任务，然后它们会慢慢开始返回一些结果。

有什么方法可以减慢速度并等待结果，无论是使用 Synchronize 语句还是其他方法？

在每个相机帧上，我都会开始其中一项任务。DoImgProcessing 进行长处理并返回一个字符串结果。

```
private class LongOperation extends AsyncTask<Mat, Void, String> {

    @Override
    protected String doInBackground(Mat... params) {
        Mat inputFrame = params[0];
        cropToCenter(inputFrame);
        return doImgProcessing(inputFrame);
    }      

    @Override
    protected void onPostExecute(String result) {
        Log.d(TAG, "on post execute: "+result);

    }

    @Override
    protected void onPreExecute() {
        Log.d(TAG, "on pre execute");
    }
}

public Mat onCameraFrame(Mat inputFrame) {
    inputFrame.copyTo(mRgba);//this will be used for the live stream
    LongOperation op = new LongOperation();
    op.execute(inputFrame);
    return mRgba;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:41:00.110

我会做这样的事情：

```
// Example value for a timeout.
private static final long TIMEOUT = 1000L;

private BlockingQueue<Mat> frames = new LinkedBlockingQueue<Mat>();

Thread worker = new Thread() {
    @Override
    public void run() {
        while (running) {
            Mat inputFrame = frames.poll(TIMEOUT, TimeUnit.MILLISECONDS);
            if (inputFrame == null) {
                // timeout. Also, with a try {} catch block poll can be interrupted via Thread.interrupt() so not to wait for the timeout.
                continue;
            }
            cropToCenter(inputFrame);
            String result = doImgProcessing(inputFrame);
        }
    }
};
worker.start();

public Mat onCameraFrame(Mat inputFrame) {
    inputFrame.copyTo(mRgba);//this will be used for the live stream
    frames.put(inputFrame);
    return mRgba;
} 
```

onCameraFrame 将帧放在队列中，工作线程从队列中轮询。

这使框架的接收和处理去中心化。您可以使用 来监控队列的增长`frames.size()`。

这是一个典型的生产者-消费者示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:34:22.593

如果你在每一帧上都这样做，听起来你需要一个线程。AsyncTask 用于当您想在另一个线程上执行一次性活动时。在这里你想重复做。只需创建一个线程，当它完成一帧时，它会向处理程序发送一条消息，以在 UI 线程上运行 post 步骤。它可以在其循环顶部的信号量上等待下一帧准备好。

# sublimetext2 - Sublime Text 2 Windows 中的多个光标

> ID：14963775
> 
> 赞同：84
> 
> 时间：2013-02-19T17:31:13.797
> 
> 标签：sublimetext2, sublimetext

我已经在 Windows 中安装了 Sublime Text 2，我正在尝试使用多光标功能。

首先，我突出显示我正在寻找的选择（三行）。

然后我可以按`CTRL`+`D`选择每个重复出现，或按`ALT`+`F3`选择全部。我的情况有四次重复。

我现在想在三行中间移动光标并添加一些信息，以添加到所有出现的地方。

我一点选区，多选就没了？有什么我做错了，我确定这是错误的，但由于文档太弱，我不知道怎么做？

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2013-09-21T05:09:31.550

完全跳过鼠标通常更容易——或者如果 Sublime 在自动换行时没有搞乱多选，那就更容易了。[这是使用键盘](http://www.sublimetext.com/docs/2/multiple_selection_with_the_keyboard.html)和[鼠标](http://www.sublimetext.com/docs/selection)进行多选的官方文档。由于有点分散，我总结一下：

在 Sublime Text 3 中的快捷方式不同的地方，我做了一个注释。对于 v3，我总是使用最新的开发版本进行测试；如果您使用的是 beta 版本，您的体验可能会有所不同。

如果您在切换选项卡或窗口时丢失了选择（尤其是在 Linux 上），请尝试使用`Ctrl`+`U`来恢复它。

# 老鼠

## 视窗/Linux

建筑模块：

*   正负：
    *   添加到选择：`Ctrl`
    *   从选择中减去：`Alt` *在 v3 的早期版本中，这不适用于线性选择。*
*   选择类型：
    *   线性选择：`Left Click`
    *   块选择：`Middle Click`或`Shift`+`Right Click` *在 Linux 上，默认情况下是中键粘贴。*

结合你认为合适的。例如：

*   添加到选择：`Ctrl`+ `Left Click`（并可选择拖动）
*   从选择中减去：`Alt`+`Left Click` *这在 v3 的早期版本中不起作用。*
*   添加块选择：++ `Ctrl`（并拖动）`Shift``Right Click`
*   减去块选择：++ `Alt`（并拖动）`Shift``Right Click`

## Mac OS X

建筑模块：

*   正负：
    *   添加到选择：`⌘</kbd>`
    *   从选择中减去：（`⇧⌘`仅适用于 v3 中的块选择；可能是错误）
*   选择类型：
    *   线性选择：`Left Click`
    *   块选择：`Middle Click`或`⌥</kbd> + `Left Click``

结合你认为合适的。例如：

*   添加到选择：`⌘</kbd> + `Left Click` (and optionally drag)`
*   从选择中减去：`⇧⌘`+ `Left Click`（和拖动——这种组合在 Sublime Text 3 中不起作用，但据说它在 2 中起作用）
*   添加块选择：`⌥⌘`+ `Left Click`（并拖动）
*   减去块选择：`⌥⇧⌘</kbd> + `Left Click` (and drag)`

# 键盘

## 视窗

*   返回单选模式：`Esc`
*   在所有插入符号处向上/向下扩展选择：`Ctrl`+ `Alt`+ `Up`/`Down`
*   在所有插入符号处向左/向右扩展选择：`Shift`+ `Left`/`Right`
*   向上/向下/向左/向右移动所有插入符号，并清除选择：`Up`///`Down``Left``Right`
*   撤消上一个选择动作：`Ctrl`+`U`
*   将下一次出现的选定文本添加到选择中：`Ctrl`+`D`
*   将所有出现的选定文本添加到选择中：`Alt`+`F3`
*   在所选文本的出现之间旋转（单选）：`Ctrl`+ `F3`（反向：`Ctrl`+ `Shift`+ `F3`）
*   将单个线性选择变为块选择，在每行中所选文本的末尾带有一个插入符号：`Ctrl`+ `Shift`+`L`

## Linux

*   返回单选模式：`Esc`
*   在所有插入符号处向上/向下扩展选择：`Alt`+ `Up`/`Down` *请注意，您可能也可以按住`Ctrl`以获得与 Windows 相同的快捷方式，但 Linux 倾向于使用 Ctrl + Alt 组合作为全局快捷方式。*
*   在所有插入符号处向左/向右扩展选择：`Shift`+ `Left`/`Right`
*   向上/向下/向左/向右移动所有插入符号，并清除选择：`Up`///`Down``Left``Right`
*   撤消上一个选择动作：`Ctrl`+`U`
*   将下一次出现的选定文本添加到选择中：`Ctrl`+`D`
*   将所有出现的选定文本添加到选择中：`Alt`+`F3`
*   在所选文本的出现之间旋转（单选）：`Ctrl`+ `F3`（反向：`Ctrl`+ `Shift`+ `F3`）
*   将单个线性选择变为块选择，在每行中所选文本的末尾带有一个插入符号：`Ctrl`+ `Shift`+`L`

## Mac OS X

*   返回单选模式：`⎋</kbd> (that's the Mac symbol for Escape)`
*   在所有插入符号处向上/向下扩展选择：`⌃⇧⇡</kbd>, `⌃⇧⇣</kbd> (See note)``
*   在所有插入符号处向左/向右扩展选择：`⇧⇠`/`⇧⇢`
*   向上/向下/向左/向右移动所有插入符号并清除选择：`⇠</kbd>, `⇡</kbd>, `⇣</kbd>, `⇢</kbd>````
*   撤消上一个选择动作：`⌘U`
*   将下一次出现的选定文本添加到选择中：`⌘D`
*   将所有出现的选定文本添加到选择中：`⌃⌘G`
*   在所选文本的出现之间旋转（单选）：（`⌥⌘G`反向`⌥⇧⌘G`：）
*   将单个线性选择转换为块选择，在每行中所选文本的末尾有一个插入符号：`⇧⌘L`

### Mac 用户注意事项

在优胜美地和埃尔卡皮坦，`⌃⇧⇡</kbd> and `⌃⇧⇣</kbd> are system keyboard shortcuts by default. If you want them to work in Sublime Text, you will need to change them:``

1.  打开`System Preferences`.
2.  选择`Shortcuts`选项卡。
3.  `Mission Control`在左侧列表框中选择。
4.  更改`Mission Control`和`Application windows`（或禁用它们）的键盘快捷键。我用`⌃⌥⇡</kbd> and `⌃⌥⇣</kbd>. They defaults are `⌃⇡` and `⌃⇣`; adding `⌃</kbd> to those shortcuts triggers the same actions, but slows the animations.```

如果您不熟悉 Mac 的键盘符号：

*   `⎋</kbd> is the escape key`
*   `⌃</kbd> is the control key`
*   `⌥</kbd> is the option key`
*   `⇧</kbd> is the shift key`
*   `⌘</kbd> is the command key`
*   `⇡</kbd> et al are the arrow keys, as depicted`

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-02-20T10:15:16.403

在 Sublime Text 中，选择多个文本区域后，单击被视为退出多选模式的一种方式。用键盘键（箭头，Ctrl+箭头等）移动光标，你会没事的

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-19T19:05:51.000

尝试使用 Ctrl 键单击您想要光标的多个位置。Ctrl-D 用于多个增量查找。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-28T16:20:37.660

我发现使用复古模式非常适合 sublime 多选。

我最常用的键是“w”用于跳转单词，“^”和“$”用于移动到该行的第一个/最后一个字符。像“2dw”（删除光标后的下两个单词）这样的组合使得使用多选非常强大。

这听起来很明显，但确实加快了我的工作流程，尤其是在编辑 HTML 时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-24T21:05:05.493

Mac 用户，让我为您节省时间：

*   `Cmd`+ `a`: 选择你想要光标的行
*   `Cmd`+ `Shift`+ `l`: 创建光标

# firebase - 使用 Firebase 按名称属性获取用户

> ID：14963776
> 
> 赞同：132
> 
> 时间：2013-02-19T17:31:15.927
> 
> 标签：firebase, firebase-realtime-database

我正在尝试创建一个应用程序，我可以在其中获取/设置特定用户帐户中的数据，我被 Firebase 所吸引。

我遇到的问题是，当我的结构如下所示时，我不知道如何定位特定用户数据：

![我的数据结构由下面的文字描述。](../Images/a35b73f1bfe960b129f4b27b122e02df.png)

```
online-b-cards
  - users
    - InnROTBVv6FznK81k3m
       - email: "hello@hello"
       - main:  "Hello world this is a text"
       - name:  "Alex"
       - phone: 12912912 
```

我环顾四周，我真的找不到任何关于如何访问个人数据的信息，更不用说当他们被赋予一些随机哈希作为他们的 ID 时。

我将如何根据他们的姓名获取个人用户信息？如果有更好的方法请告诉我！

* * *

## 回答 #1

> 赞同：158
> 
> 时间：2013-02-19T18:47:01.363

以前，Firebase 要求您生成自己的索引*或*下载某个位置的所有数据，以查找和检索与某些子属性匹配的元素（例如，所有具有 的用户`name === "Alex"`）。

2014 年 10 月，Firebase 通过该方法推出了新的查询功能`orderByChild()`，使您能够快速高效地执行此类查询。请参阅下面的更新答案。

* * *

将数据写入 Firebase 时，您有几个不同的选项可以反映不同的用例。概括地说，Firebase 是一个树形结构的 NoSQL 数据存储，并提供了一些简单的原语来管理数据列表：

1.  *使用唯一的已知密钥*写入Firebase：**

     *```
    ref.child('users').child('123').set({ "first_name": "rob", "age": 28 }) 
    ```* 
**   *使用自动生成的键*附加到列表，该键将按写入时间自动排序：**

     *```
    ref.child('users').push({ "first_name": "rob", "age": 28 }) 
    ```* **   *通过其唯一的已知路径*监听数据的变化：**

     *```
    ref.child('users').child('123').on('value', function(snapshot) { ... }) 
    ```* **   **按键*或*属性值**过滤*或*排序*列表中的数据：*

     ***```
    // Get the last 10 users, ordered by key
    ref.child('users').orderByKey().limitToLast(10).on('child_added', ...)

    // Get all users whose age is >= 25
    ref.child('users').orderByChild('age').startAt(25).on('child_added', ...) 
    ```****** 

 ***添加 后`orderByChild()`，您不再需要为子属性的查询创建自己的索引！例如，要检索名称为“Alex”的所有用户：

```
ref.child('users').orderByChild('name').equalTo('Alex').on('child_added',  ...) 
```

* * *

Firebase 的工程师在这里。将数据写入 Firebase 时，您有几个不同的选项可以反映不同的应用程序用例。由于 Firebase 是一个 NoSQL 数据存储，因此您需要使用唯一键存储数据对象，以便您可以直接访问该项目或在特定位置加载所有数据并遍历每个项目以找到您正在寻找的节点. 有关详细信息，请参阅[编写数据](https://www.firebase.com/docs/writing-data.html "firebase.com/docs/writing-data.html")和[管理列表](https://www.firebase.com/docs/managing-lists.html "https://www.firebase.com/docs/managing-lists.html")。

当您在 Firebase 中写入数据时，您可以`set`使用唯一的、已定义的路径 (ie `a/b/c`) 或`push`将数据写入列表，这将生成唯一的 id (ie `a/b/<unique-id>`) 并允许您按时间排序和查询该列表中的项目. 您在上面看到的唯一 id 是通过调用`push`将项目附加到列表中生成的`online-b-cards/users`。

`push`我建议不要在这里使用，而是使用`set`, 并使用唯一键（例如用户的电子邮件地址）存储每个用户的数据。`online-b-cards/users/<email>`然后，您可以通过 Firebase JS SDK导航到直接访问用户的数据。例如：

```
function escapeEmailAddress(email) {
  if (!email) return false

  // Replace '.' (not allowed in a Firebase key) with ',' (not allowed in an email address)
  email = email.toLowerCase();
  email = email.replace(/\./g, ',');
  return email;
}

var usersRef = new Firebase('https://online-b-cards.firebaseio.com/users');
var myUser = usersRef.child(escapeEmailAddress('hello@hello.com')) 
myUser.set({ email: 'hello@hello.com', name: 'Alex', phone: 12912912 }); 
```

请注意，由于 Firebase 不允许引用中的某些字符（请参阅[创建引用](https://www.firebase.com/docs/creating-references.html)），因此我们在上面的代码中删除`.`并用 a 替换它。`,`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-01-09T13:17:40.357

您可以通过以下代码获取详细信息。

```
FirebaseDatabase database = FirebaseDatabase.getInstance();
DatabaseReference myRef = database.getReference("users");
myRef.orderByChild("name").equalTo("Alex").addListenerForSingleValueEvent(new ValueEventListener() {           
                @Override
                public void onDataChange(DataSnapshot dataSnapshot) {

                    for (DataSnapshot childDataSnapshot : dataSnapshot.getChildren()) {
                        Log.d(TAG, "PARENT: "+ childDataSnapshot.getKey());
                        Log.d(TAG,""+ childDataSnapshot.child("name").getValue()); 
                    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-25T15:15:47.883

我认为最好的方法是根据 Firebase 提供的身份验证对象来定义用户的 ID。当我创建我的用户时，我会：

```
FirebaseRef.child('users').child(id).set(userData); 
```

这个id来自：

```
var ref = new Firebase(FIREBASE);
var auth = $firebaseAuth(ref);
auth.$authWithOAuthPopup("facebook", {scope: permissions}).then(function(authData) {
    var userData = {}; //something that also comes from authData
    Auth.register(authData.uid, userData);
}, function(error) {
    alert(error);
}); 
```

Firebase 身份验证服务将始终确保将其所有提供程序中的唯一 ID 设置为 uid。这样，您将始终拥有 auth.uid，并且可以轻松访问所需的用户来更新它，例如：

```
FirebaseRef.child('users').child(id).child('name').set('Jon Snow'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-27T08:01:11.757

这是对尝试访问自动生成的唯一 ID 时帮助我的帖子的解释。[使用 angularFire 隐式同步在 ng-repeat 中访问 Firebase 唯一 ID](https://stackoverflow.com/questions/19308135/access-firebase-unique-ids-within-ng-repeat-using-angularfire-implicit-sync)

谢谢， bennlich（来源）：

*Firebase 的行为类似于普通的 javascript 对象。也许下面的例子可以让你走上正轨。*

```
<div ng-repeat="(name, user) in users">
    <a href="" ng-href="#/{{name}}">{{user.main}}</a>
</div> 
```

编辑：不是 100% 确定您想要的结果，但这里有更多可能会引发“啊哈”时刻。在 Firebase 仪表板中单击您尝试访问的密钥。从那里你可以使用类似的东西：

```
var ref = new Firebase("https://online-b-cards.firebaseio.com/users/<userId>/name);
    ref.once('value', function(snapshot) {
        $scope.variable= snapshot.val();
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-21T06:02:28.687

这是在 Firebase 中访问自动生成的唯一键的方法： **数据结构**：- OnlineBcards - UniqueKey

```
database.ref().on("value", function(snapshot) {
      // storing the snapshot.val() in a variable for convenience
      var sv = snapshot.val();
      console.log("sv " + sv); //returns [obj obj]

      // Getting an array of each key in the snapshot object
      var svArr = Object.keys(sv);
      console.log("svArr " + svArr); // [key1, key2, ..., keyn]
      // Console.log name of first key
      console.log(svArr[0].name);
}, function(errorObject) {
  console.log("Errors handled: " + errorObject.code);
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-13T15:57:12.820

最简单的方法是停止使用`.push(){}`

将生成该随机密钥的函数。但请改用`.update(){}`您可以指定孩子姓名而不是随机密钥的功能。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-06-27T10:39:08.197

## 检索数据：

在您的数据库中，您使用的是使用 生成的随机 id `push()`，因此如果您想检索数据，请执行以下操作：

***在 Android 应用中使用 Firebase：***

```
DatabaseReference ref=FirebaseDatabase.getInstance().getReference().child("users");
ref.addListenerForSingleValueEvent(new ValueEventListener() {           
            @Override
            public void onDataChange(DataSnapshot dataSnapshot) {

                for (DataSnapshot datas : dataSnapshot.getChildren()) {
                    String name=datas.child("name").getValue().toString();
                }
             }

            @Override
           public void onCancelled(DatabaseError databaseError) {
          }
     }); 
```

***在 Javascript 中使用 Firebase：***

```
 firebase.database().ref().child("users").on('value', function (snapshot) {
   snapshot.forEach(function(childSnapshot) {
    var name=childSnapshot.val().name;
  });
}); 
```

在这里，您有快照（数据的位置），`users`然后您在所有随机 ID 中循环并检索名称。

* * *

## 检索特定用户的数据：

现在，如果您只想检索特定用户的信息，那么您需要添加一个查询：

***在 Android 应用中使用 Firebase：***

```
DatabaseReference ref=FirebaseDatabase.getInstance().getReference().child("users");
Query queries=ref.orderByChild("name").equalTo("Alex");
queries.addListenerForSingleValueEvent(new ValueEventListener() {...} 
```

***将 Firebase 与 Javascript 结合使用***

```
firebase.database().ref().child("users").orderByChild("name").equalTo("Alex").on('value', function (snapshot) {
   snapshot.forEach(function(childSnapshot) {
      var name=childSnapshot.val().name;
   });
}); 
```

使用`orderByChild("name").equalTo("Alex")`就像说它`where name="Alex"`会检索与 Alex 相关的数据。

* * *

## 最好的办法：

最好的办法是使用 Firebase 身份验证，从而为每个用户生成一个唯一 id 并使用它而不是随机 id `push()`，这样您就不必遍历所有用户，因为您拥有该 id 并且可以轻松访问它。

首先，用户需要登录，然后您可以检索唯一 id 并附加一个侦听器以检索该用户的其他数据：

***在 Android 上使用 Firebase：***

```
DatabaseReference ref = FirebaseDatabase.getInstance().getReference("users");
String uid = FirebaseAuthentication.getInstance().getCurrentUser().getUid();

ref.child(uid).addListenerForSingleValueEvent(new ValueEventListener() {
          @Override
         public void onDataChange(DataSnapshot dataSnapshot) { 
           String name=dataSnapshot.child("name").getValue().toString(); 
   }
         @Override
       public void onCancelled(DatabaseError databaseError) {
      }
 }); 
```

***将 Firebase 与 Javascript 一起使用：***

```
 var user = firebase.auth().currentUser;
    var uid=user.uid;

    firebase.database().ref().child("users").child(uid).on('value', function (snapshot) {
     var name=snapshot.val().name;
   }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-31T18:58:23.787

根据经过身份验证的用户向您的数据库添加唯一 ID 的最简单和更好的方法是：

```
private FirebaseAuth auth;

String UId=auth.getCurrentUser().getUid();

FirebaseDatabase database = FirebaseDatabase.getInstance();
DatabaseReference myRef = database.getReference("Users");

User user = new User(name,email,phone,address,dob,bloodgroup);

myRef.child(UId).setValue(user); 
```

UId 将是特定经过身份验证的电子邮件/用户的唯一 ID***

# c# - Orchard CMS 自定义小部件视图

> ID：14963779
> 
> 赞同：0
> 
> 时间：2013-02-19T17:31:21.597
> 
> 标签：c#, asp.net-mvc, razor, orchardcms

我正在为 Orchard CMS 编写模块，我需要在小部件中显示我的内容类型的元素。

**驱动程序/文件WidgetDriver.cs：**

```
public class FilesWidgetPartDriver : ContentPartDriver<FilesWidgetPart>
{
    private readonly IFileService _fileService;

    public FilesWidgetPartDriver(IFileService fileService)
    {
        _fileService = fileService;
    }

    protected override DriverResult Display(FilesWidgetPart part, string displayType, dynamic shapeHelper)
    {
        return ContentShape("Parts_FilesWidget", () => shapeHelper.Parts_FilesWidget(
            Files: _fileService.GetFiles()
        ));
    }
} 
```

**模型/文件Widget.cs**

```
public class FilesWidgetPart : ContentPart
{
} 
```

**视图/部件/FilesWidget.cshtml**

```
@using ModuleName.Models
@using Orchard.ContentManagement
@{
    var files = (IContentQuery<FilePart>)Model.Files;
}
<div>
@foreach (var file in files)
{
    @Html.ActionLink(file.FileName, "GetFile", "FileAdmin");
}
</div> 
```

**迁移.cs**

```
public int UpdateFrom1()
{
    ContentDefinitionManager.AlterTypeDefinition("FilesWidget", type => type
       .WithPart("FilesWidgetPart")
       .WithPart("WidgetPart")
       .WithSetting("Stereotype", "Widget")
    );
    return 2;
}

public int UpdateFrom2()
{
    ContentDefinitionManager.AlterTypeDefinition("FilesWidget", type => type
        .WithPart("CommonPart")
    );
return 3;
} 
```

但是当我将小部件添加到页面时，它是空的。怎么了？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T22:03:29.850

你可能错过了展示位置。

# javascript - 如何使用 nyromodal 将元素浮动到模态容器之外

> ID：14963781
> 
> 赞同：0
> 
> 时间：2013-02-19T17:31:23.987
> 
> 标签：javascript, html, nyromodal

我经常使用漂浮在容器边界之外的元素和图像——它增加了尺寸，有助于间距并增加了一些风格。

在本例中，我使用 NyroModal v2 将 html（包含各种其他元素的 div 标签）加载到模式窗口中。我曾计划一个图像元素（在模态中）将浮动在 nyromodal 边界之外一点，但模态对话框正在裁剪超出模态边界的元素，尽管位置是绝对的或相对的，也不管 z-index 非常高.

寻找建议...谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:09:15.883

好的，使用 chrome 调试器进行更多挖掘：nyromodal 容器在 _reposition 函数中添加了一个计算样式：

```
this.elts.cont.css('overflow', 'auto'); 
```

我将其注释掉并且我的元素浮动到边界之外，但如果您的模态内容需要滚动，这不是一个解决方案 - 它需要适合屏幕，否则您可能会得到不可预测和不满意的结果。

当您关闭模态时，还有另一个函数 (hideCont) 将 nyromodal 容器溢出设置为隐藏：

```
nm.elts.cont.css('overflow', 'hidden').fadeOut(clb); 
```

我将 'hidden' 更改为 '' 并且我有所需的行为。

NyroModal 在 github 上，也许添加此功能（不破坏滚动内容）的 fork 会很有用 - 我没有时间，所以上面是我的解决方案 - 在这种情况下它适用于我，希望可能是一个令人满意的快速 -替别人修。

# entity-framework-5 - 我是否需要将 Entity Framework 从 4.0 升级到 5.0 以改进使用 TPT 架构的 SQL 生成？

> ID：14963782
> 
> 赞同：1
> 
> 时间：2013-02-19T17:31:23.923
> 
> 标签：entity-framework-5, .net-4.5

我有一个使用 EF 4.0/.Net 4.0 的应用程序，并且我使用的是 TPT 模型，当数据量太大时会导致一些性能问题。据我了解，.Net 4.5 应该通过添加对自动编译查询的支持来提高性能。就我而言，在使用 TPT 模型时，我应该如何提高新 SQL 生成器中的应用程序的性能。

我的问题是我找不到任何东西告诉我这是由.Net 4.5 还是 EF 5.0 提供的。

只是为了让您知道，我确实迁移到了 .Net 4.5，但在性能方面看不到任何显着变化。我检查了生成的 SQL 是否有一个缓慢的请求，它与 .Net 4.0 完全相同。我也尝试迁移到 EF 5.0，但看不到任何改进。实际上，由于我没有使用 EntityFramework.dll (v5.0) 中定义的任何类型，因此程序集没有被引用（使用反射器检查），甚至没有在运行时加载。

我应该继续迁移到 EF 5.0 还是与 .Net 4.5 更相关？

问候，尼古拉斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:35:48.670

**实体框架 CTP：TPT 继承查询改进**

[http://thedatafarm.com/blog/data-access/entity-framework-june-2011-ctp-tpt-inheritance-query-improvements/](http://thedatafarm.com/blog/data-access/entity-framework-june-2011-ctp-tpt-inheritance-query-improvements/)

使用 Entity Framework 5 提高性能 EF5 具有更好的查询性能、对枚举和空间数据类型的支持等等

[http://www.devproconnections.com/article/entity-framework/entity-framework-5-143875](http://www.devproconnections.com/article/entity-framework/entity-framework-5-143875)

# javascript - 在 Rails 项目中包含无关 javascript 库的技术注意事项

> ID：14963792
> 
> 赞同：1
> 
> 时间：2013-02-19T17:32:31.863
> 
> 标签：javascript, ruby-on-rails, benchmarking, handlebars.js

我最近将 Handlebars.js 包含在一个 rails 项目中，但一位同事对这个想法犹豫不决。在 Rails 项目中包含额外的 javascript 库时，实际的技术考虑是什么？

添加无关库是否会显着降低站点交付和用户体验？这是工程剧的一个例子吗？

这是测量过的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:11:59.117

添加其他库会使站点交付速度降低数百毫秒。它还需要一些客户端时间来解析和运行其 onload() 类型的功能。从人类的角度来看，习惯使用新库需要一些时间。根据库的复杂程度、实用性和节省时间，这可能是一个可接受的折衷方案。

Handlebars 是一个很棒的模板工具，但您确实需要团队中的每个人都参与其中才能使用它。在没有真正讨论事情的情况下简单地介绍一种全新的做事方式并不是很好。车把是一个足够大的变化，即使不是投票，至少也值得讨论。

如果你只是想把它放在那里看看它是否会在未来工作，或者只是转换一两页，那么你应该在一个单独的分支中这样做，并为团队做一个快速的原型和演示。

根据是否存在有效的商业案例和合法的用途，您和团队可以决定是否转换您的应用程序以使用它。

# php - 在 PHP While 循环中使用 MySQL JOIN 而不是查询

> ID：14963793
> 
> 赞同：0
> 
> 时间：2013-02-19T17:32:36.363
> 
> 标签：php, mysql, loops, optimization, join

我正在尝试从 PHP while 循环中删除 mysql 查询并改用 JOIN。

我有一个查询

```
SELECT *, 
SUM(CASE WHEN posmonth like '2013%' THEN ext ELSE NULL END) AS year2013, 
SUM(CASE WHEN posmonth like '2012%' THEN ext ELSE NULL END) AS year2012, 
SUM(CASE WHEN posmonth like '2011%' THEN ext ELSE NULL END) AS year2011, 
SUM(CASE WHEN posmonth like '2010%' THEN ext ELSE NULL END) AS year2010 
FROM combined c 
LEFT JOIN customermaster cm ON c.alias=cm.customerkey 
WHERE cm.company LIKE 'A%' 
GROUP BY customerkey 
ORDER BY cm.company ASC 
LIMIT 0, 50 
```

然后使用这些结果从另一个表“areamaster”中获取数据：

```
 <?php 
$result = mysqli_query($link, $query);
   while ($r = mysqli_fetch_object($result)) {
    $alias = $r->alias;
    $company = $r->company;
    $a = mysqli_query($link, "SELECT area FROM areamaster WHERE areakey='$alias' LIMIT 1");
    while ($t = mysqli_fetch_object($a)) { $aliasdisplay = $t->area; }
    //Instead of this ^^ USE JOIN IN ORIGINAL QUERY
    ?>
    <tr>
         <td><?php print (substr($company,0,20)); ?></td>
         <td><?php print (strtoupper($r->location)); ?></td>
         <td><?php print $aliasdisplay; ?></td>
         <td>$<?php print number_format($r->$year4V,2,".",","); ?></td>
         <td>$<?php print number_format($r->$year3V,2,".",","); ?></td>
         <td>$<?php print number_format($r->$year2V,2,".",","); ?></td>
         <td>$<?php print number_format($r->$year1V,2,".",","); ?></td>
   </tr>
   <?php
   }
   mysqli_free_result($result);
    ?> 
```

两个mysql表结构：

```
areamaster:
     areakey: Primary
     area: What I want displayed

combined:
     id:primary
     posmonth: for totaling ext by Year
     alias: compare to areamaster.areakey and get "areamaster.area"
     location: 
     ext: being totaled by SUM 
```

如果有人可以帮助编写 JOIN，我将不胜感激。

另外，如果有任何进一步优化此查询的方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:46:18.520

像这样试试

```
SELECT 
    *, 
    SUM(CASE WHEN posmonth like '2013%' THEN ext ELSE NULL END) AS year2013, 
    SUM(CASE WHEN posmonth like '2012%' THEN ext ELSE NULL END) AS year2012, 
    SUM(CASE WHEN posmonth like '2011%' THEN ext ELSE NULL END) AS year2011, 
    SUM(CASE WHEN posmonth like '2010%' THEN ext ELSE NULL END) AS year2010 
FROM combined c 
LEFT JOIN customermaster cm ON c.alias=cm.customerkey 
LEFT JOIN `areamaster` as a ON a.area = c.alias
WHERE cm.company LIKE 'A%' 
GROUP BY customerkey 
ORDER BY cm.company ASC 
LIMIT 0, 50 
```

这是编辑再试一次

# xml - 使用 XML Encryption 加密 JSON 数据

> ID：14963798
> 
> 赞同：1
> 
> 时间：2013-02-19T17:32:56.827
> 
> 标签：xml, json, security, encryption

我开发了一个创建 JSON 对象的应用程序，通过蓝牙将它们发送到其他设备。我已经应用了 AES、3DES 或 Blowfish 等几种加密算法来加密 JSON 对象，但现在我被要求尝试不同的方法，即使用 XML 加密来加密我必须通过网络发送的 JSON 对象。

**问题 1：**在 JSON 对象之上使用 XML 加密是否有意义？

此外，我对 XML 加密进行了很多研究，但他们都只关注**XML 文档**加密，虽然一些消息来源提到可以将 XML 加密应用于非 xml 文档，但没有一个例子说明如何做到这一点.

**问题 2：**是否真的可以使用 XML 加密来加密 JSON 对象？

谁能告诉我有关如何加密 XML 文档以外的任何数据的任何信息？我感谢所有的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T19:39:15.710

在不知道为什么要求您使用 XML 加密的详细信息的情况下，我不得不进行推测，尽管我很好奇为什么有必要考虑到您已经使用出色的算法对数据进行了加密。

您是否以纯文本形式公开敏感信息？如果是这样，请使用您提到的算法对其进行加密。你担心聚合吗？如果是这样，请加密所有内容，包括名称和值。在我能想到的大多数情况下，您不需要在已有的基础上添加 XML 加密。这对我来说听起来有点矫枉过正，但作为一个偏执狂我可以理解:-)

# java - Web 服务发现需要 Java

> ID：14963800
> 
> 赞同：1
> 
> 时间：2013-02-19T17:32:58.360
> 
> 标签：java, web-services, soapui, soap-client

我的任务是开发这样的东西：

我们在 JBoss 上托管了 3 或 4 个 Web 服务，并希望允许用户测试该服务。但是 SOAP UI 对用户来说太技术性了，所以我们需要提供一些更简单的东西，

流程类似于：

*   获取一个 HTML 页面，其中包含一个列出所有可用 Web 服务的下拉列表

*   用户选择 Web 服务后，会为用户提供输入一些数据或选择带有数据的 XML 文件的选项。

*   用户点击调用 Web 服务按钮 ，使用传递给服务的数据作为参数调用 Web 服务，然后将返回的结果与预期结果进行比较，无论是编程方式还是手动方式。

这看起来像是一个相对复杂的开发，只要它并没有真正增加价值，除了迎合那些发现 SOAP UI 在技术上过于复杂的技术不称职的用户。

是否有任何开箱即用的工具至少可以简化其中的一些工作，例如显示可用服务？

任何帮助表示赞赏，

如果没有关于如何实现所需功能的工具建议，欢迎。

PS：Web 服务使用 CXF Java 开发并托管在 JBoss 上，为简单起见，我们可以假设将使用上述技术的最新版本。

# c# - MSBuild：描述要调用的构造函数

> ID：14963801
> 
> 赞同：4
> 
> 时间：2013-02-19T17:32:59.010
> 
> 标签：c#, .net, msbuild, msbuild-task

我正在处理需要实例化类的 MSBuild 任务。该类最初只有一个无参数构造函数，因此所需要的所有 MSBuild 任务就是实例化该类的类型名称。现在我们有一个为特定构造函数运行任务的用例，我不知道如何以通用方式处理它。假设我需要实例化不同风格的`ClassA`：

```
public class ClassA
{
    public ClassA() { }
    public ClassA(int someArgument) { }
    public ClassA(int someArgument, bool someOtherArgument) { }
} 
```

这是原始任务的样子：

```
<DoSomethingTask Assembly="ContainsClassA.dll" Type="ClassA" /> 
```

我的理想任务看起来像这样，所以我可以调用任何具有原始类型作为参数的构造函数：

```
<DoSomethingTask Assembly="ContainsClassA.dll" Type="ClassA">
    <ConstructorArgs>
        <Arg type="int">1</Arg>
        <Arg type="bool">True</Arg>
    </ConstructorArgs>
</DoSomethingTask> 
```

我很不知道要搜索什么来获得这种功能。我可以做一些事情，比如创建一个名为的字符串属性`ConstructorArgs`并使用我想要的任何格式解析它，但我希望存在更清晰的东西。感谢您的任何帮助，您可以提供！

编辑 - 如果有人想知道，我尝试修改的*实际*任务会创建一个基于实例化实体框架 DbContext 的预生成视图。我们有自己的 DbContext 子类和各种构造函数，我们希望能够在视图生成期间调用特定的构造函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:35:07.423

您可以尝试[使用反射并](https://stackoverflow.com/questions/3255697/using-c-sharp-reflection-to-call-a-constructor)为您的 DBContext 子类获取构造函数。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Reflection;
using System.Text;
using Microsoft.Build.Framework;
using Microsoft.Build.Utilities;

namespace TaskClass
{
    // Class to be created
    public class MyDbContext
    {
        public int ConstructorArg1 { get; set; }
        public string ConstructorArg2 { get; set; }

        public MyDbContext() { }

        public MyDbContext(int constructorArg1)
        {
            ConstructorArg1 = constructorArg1;
        }

        public MyDbContext(int constructorArg1, string constructorArg2)
        {
            ConstructorArg1 = constructorArg1;
            ConstructorArg2 = constructorArg2;
        }       
    }

    // MSBuild custom task
    public class DoSomethingTask : Task
    {
        public override bool Execute()
        {
            var taskParameters = new TaskParametersInfo();
            taskParameters.ExtractTaskParametersInfo(this);

            var type = typeof(MyDbContext);
            ConstructorInfo ctor = type.GetConstructor(taskParameters.Types.ToArray());

            if (ctor == null)
            {
                // If the constructor is not found, throw an error
                Log.LogError("There are no constructors defined with these parameters.");
                return false;
            }

            // Create your instance
            var myDbContext = (MyDbContext)ctor.Invoke(taskParameters.Values.ToArray());

            return true;
        }

        public int ConstructorArg1
        {
            get;
            set;
        }

        public string ConstructorArg2
        {
            get; 
            set;
        }

        public string ConstructorArg3
        { 
            get; 
            set; 
        }

        // Class to handle the task's parameters
        internal class TaskParametersInfo
        {
            public List<Type> Types { get; set; }
            public List<object> Values { get; set; }

            public TaskParametersInfo()
            {
                Types = new List<Type>();
                Values = new List<object>();
            }

            public void ExtractTaskParametersInfo(Task task)
            {
                foreach (var property in task.GetType().GetProperties(BindingFlags.Public | BindingFlags.DeclaredOnly | BindingFlags.Instance))
                {
                    var propertyValue = property.GetValue(task, null);
                    if (propertyValue != null)
                    {
                        Types.Add(property.PropertyType);
                        Values.Add(propertyValue);
                    }
                }
            }
        }
    }
} 
```

在您的 msbuild 项目中导入任务：

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<Project ToolsVersion="4.0" defaultTarget="DoSomething" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<UsingTask TaskName="TaskClass.DoSomethingTask" 
        AssemblyFile="TaskClass\TaskClass\bin\Debug\TaskClass.dll"/>
  <Target Name="DoSomething">
    <DoSomethingTask ConstructorArg1="123" ConstructorArg2="Are u talking to me?" />
  </Target>
</Project> 
```

希望这可以帮助。

# asp.net-mvc - 我是否正确使用了视图模型（MVC4）？

> ID：14963802
> 
> 赞同：0
> 
> 时间：2013-02-19T17:33:04.293
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我有一个要在详细信息视图中显示的对象。该对象有一堆视图需要的属性。

该对象还有父母和祖父母，我需要在视图中显示它们。

我的对象 viewModel 是：

```
public class ObjectViewModel
{
    // Used when creating a new object under a parent object
    [HiddenInput(DisplayValue = false)]
    public int? ParentObjectId { get; set; }

    [Required]
    public Object Object { get; set; }

    // Info that only the view needs, which is defined in the Controller based on some logic
    public string ActiveTitle { get; set; }

    // A bre
    public IList<Object> ParentObjects { get; set; } 
} 
```

然后我在我的 Detail 控制器方法中使用它：

```
public ActionResult Detail(int objectId)
{

    // TODO: Make this a service call
    var object = _db.Objects.FirstOrDefault(s => s.ObjectId == objectId);

    if (object == null)
    {
        return View("Error");
    }

    var model = new SetViewModel() { 
         ActiveTitle = object.Name, 
         Object = object, 
         ParentObjectId = object.ParentObject.ObjectId, 
         ParentObjects = _objectService.GetParentObjects(set.ParentObject)
    };

    return View(model);
} 
```

这看起来对吗？或者我应该将所需**字段**从对象模型拉到视图模型中，而不是**对象**本身？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:42:04.573

任何一个选项都可以，并且您通常会在给定的应用程序中混合使用这两种技术。

关键思想是您的视图模型应该包含*视图所需*的内容，以便向用户显示数据。

如果您的视图仅在简单的控件中显示单独的原始字段，例如一系列标签或文本框控件，那么您的视图模型可能应该只指定字段，而不是父对象。

但是，您的视图很可能包含“知道如何”完整显示复杂对象的模板化或自定义控件。在这种情况下，您的视图模型需要包含整个对象。（在实践中，我发现自己在 WPF 中比在 ASP-MVC 中更频繁地执行此操作，但我两者都做过）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:44:17.083

看起来答案将是上下文的。许多使用分层架构的团队可能会采用架构约定，即您的视图不应直接引用 X 之下的层，并且数据访问类可能是此类限制的候选对象。在您的情况下，看起来您将视图的结构直接绑定到数据库模式的结构（假设，因为您使用的是“_db”），这可能被认为是不合理的紧密耦合。

另外，我假设您使用“对象”来表示“任何一般事物”而不是字面意义上的 System.Object，因为您的对象在 lambda 表达式中似乎具有 ObjectId 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:48:29.667

在你的视图模型中有一个对象类型是非常模糊的，如果你不是最初的程序员，你的代码将很难支持。我会将类类型添加到实际模型中或使用泛型来指定类类型，如下所示：

```
public class ObjectViewModel<T>
{
    // Used when creating a new object under a parent object
    [HiddenInput(DisplayValue = false)]
    public int? ParentObjectId { get; set; }

    [Required]
    public T Object { get; set; }

    // Info that only the view needs, which is defined in the Controller based on some logic
    public string ActiveTitle { get; set; }

    // A bre
    public IList<T> ParentObjects { get; set; } 
} 
```

# ubuntu - 绑定/命名错误

> ID：14963807
> 
> 赞同：2
> 
> 时间：2013-02-19T17:33:38.593
> 
> 标签：ubuntu, dns, plesk, named, nameservers

我遇到了一个我无法摆脱的错误。

也许 smbd 可以帮我解决这个问题。我让 Plesk 11 在 Ubuntu 机器上运行。

DNS 已启动并正常工作，但每当我想重新启动它时，都会出现以下错误：

root@mach:~# service bind9 restart

*   停止域名服务... bind9
    警告：密钥文件（/etc/bind/rndc.key）存在，但使用默认配置文件（/etc/bind/rndc.conf）

姓名：Kein Prozess gefunden

姓名：Kein Prozess gefunden

命名：Kein Prozess gefunden [确定]

*   启动域名服务... bind9 [OK]

根@mach:~#

你知道这是怎么回事吗？我已经尝试删除 /etc/bind/rndc.conf，但这会导致 dns 无法启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:00:21.613

您不仅应该删除 rndc.conf，还应该将以下内容添加到 named.conf：

```
include "/etc/bind/rndc.key";
    controls {
    inet 127.0.0.1 port 953
    allow { 127.0.0.1; } keys { "rndc-key"; };
}; 
```

如果您现在重新启动绑定，错误应该会消失。

# mongodb - 在 Mongoid 3.0 中运行时切换数据库

> ID：14963809
> 
> 赞同：3
> 
> 时间：2013-02-19T17:33:45.593
> 
> 标签：mongodb, mongoid

我有一个在 Unicorn 上运行的 Sinatra 应用程序，它的模型使用 Mongoid。我有几个结构相同但内容不同的 Mongo 数据库，我在每个用户登录时为他/她选择正确的数据库。我想知道这是否可以使用 Mongoid 3.0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-23T12:34:32.993

如果要切换数据库，请使用`Mongoid.override_database`，它是线程安全的。

`Mongoid.override_database("client_db_name") # change the database` `Mongoid.override_database(nil) # reset the database`

例子：

```
class ApplicationController < ActionController::Base
  before_filter :switch_database
  after_filter :reset_database

  private

  def switch_database
    client_ref = params[:client_id]
    Mongoid.override_database("my_db_name_#{client_ref}")
  end

  def reset_database
    Mongoid.override_database(nil)
  end
end 
```

文档可以在[这里](http://mongoid.org/en/mongoid/docs/persistence.html#custom)找到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T17:33:45.593

您可以`with`在每个查询之前使用运算符：

```
Model.with(database: method_to_get_the_db_name).create 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-22T07:34:32.003

有[mongoid-dynamic-clients](https://github.com/pavlo/mongoid-dynamic-clients) gem。

我也有我自己的 Mongoid 5 辅助方法，它使用默认连接但不同的数据库名称：

```
 def within_database(name)
    previous_client = Mongoid::Threaded.client_override
    unless Mongoid::Config.clients[name].present?
      Mongoid.clients[name] = Mongoid::Config.clients[:default].dup
      Mongoid.clients[name][:database] = name
      Mongoid::Config.clients[name][:__instance] = Mongoid::Clients::Factory::create(name)
    end

    Mongoid.override_client(name)

    yield Mongoid::Config.clients[name][:__instance]

    Mongoid.override_client(previous_client)
  end 
```

用法：

```
within_database('my_different_database') do |connection|
  puts "Current database: #{connection.database.name}"
  Model.all.length
  # Or you may even drop it by using the connection object
  connection.database.drop
end 
```

# doctrine-orm - 使用列长度进行验证

> ID：14963811
> 
> 赞同：0
> 
> 时间：2013-02-19T17:33:54.600
> 
> 标签：doctrine-orm

```
/**
 * @Column(type="string", length=10)
 */
protected $name; 
```

“长度”的目的究竟是什么？

[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#annref-column](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#annref-column)

在上面的 URL 中，它声明：“长度：由 'string' 类型用于确定其在数据库中的最大长度。Doctrine 不会为您验证字符串值的长度。”

我在我的数据库中定义了长度，那么在 Doctrine 中添加“长度”有什么意义？“长度”与*验证*有关吗？

我唯一能弄清楚的是，它会在尝试将多余的字符插入数据库之前将其切断。当我想要异常或错误时非常烦人。

感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:58:03.800

Doctrine 不对您的实体应用任何类型的验证：它只是应用所需的类型转换加载和保存数据（如果您的对象有问题，则会失败）。

当您使用 Doctrine 的模式工具时，该`length`属性只是在模式生成期间提供帮助。

您最终仍然可以使用 Doctrine 2 ORM 的元数据 API 提取该值，但请考虑为此类任务使用适当的验证库。

# jquery - 如何将剪辑切换效果添加到 jquery 的静态位

> ID：14963813
> 
> 赞同：0
> 
> 时间：2013-02-19T17:33:59.760
> 
> 标签：jquery, toggle, side-effects

我对 jquery 还是很陌生，我一直在尝试将“剪辑”幻灯片打开效果添加到我拥有的静态 jquery 中。

这就是我想要的效果...

[http://www.tutorialspoint.com/cgi-bin/practice.cgi?file=jquery_142](http://www.tutorialspoint.com/cgi-bin/practice.cgi?file=jquery_142)

这是我的代码：

```
<!DOCTYPE html>
<html>
<head>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
  <style type="text/css">
  div { margin: 0px; width: 100%; height: 80px; background: green; position: relative; }
</style>

  <script>
var divs = $('section div'),
    links = $('a');

links.click(function(){
    $(this.hash).toggle().siblings().hide();
});

  </script>

  <style>

  section div { 
    display: none;
    width:100%;
    height: 200px;
    background-color: lime;
}

nav a {
    padding: 10px;
    background-color: red;
    color: white;
    display: inline-block;
}
</style>

</head>
<body style="margin:0px;">

<section>
    <div id="1">
        <a href="#1" style="float:right;">X</a>
        <a href="#2">next &raquo;</a>
    </div>

    <div id="2">
        <a href="#2" style="float:right;">X</a>
        <a href="#1">&laquo; prev</a>
        <a href="#3">next &raquo;</a>
    </div>

    <div id="3">
        <a href="#3" style="float:right;">X</a>
        <a href="#2">&laquo; prev</a>
        <a href="#4">next &raquo;</a>
    </div>

    <div id="4">
        <a href="#4" style="float:right;">X</a>
        <a href="#3">&laquo; prev</a>
        <a href="#1">next &raquo;</a>
    </div>
</section>

<nav>
<a href="#1">one</a>
<a href="#2">two</a>
<a href="#3">three</a>
<a href="#4">four</a>
</nav>

</body>
</html> 
```

你可以在这里看到它的作用：

[http://jsfiddle.net/greggb/8gfEZ/1/](http://jsfiddle.net/greggb/8gfEZ/1/)

对此的任何帮助都会很棒，我已经尝试了很多论坛，但我无法理解如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:46:14.880

我想你是在追求类似[jQuery UI 幻灯片](http://docs.jquery.com/UI/Effects/Slide)效果的东西

# php - magento 创建愿望清单

> ID：14963824
> 
> 赞同：0
> 
> 时间：2013-02-19T17:34:35.910
> 
> 标签：php, magento

我试图查看有多少人创建了愿望清单，以及所有个人愿望清单中有哪些项目（或总共有多少）。我知道如何（按客户）访问个人愿望清单，但想知道是否有办法通过 php 查看/访问“愿望清单”。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:26:37.043

有`Mage_Wishlist_Model_Resource_Wishlist_Collection`，所以要获得愿望清单，只需加载集合：

```
$wishlistCollection = Mage::getResourceModel('wishlist/wishlist_collection'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T19:28:09.767

标准 Magento 只给你 1 个愿望清单，所以我猜你是在问一些模块？

# c#-4.0 - 按顺序枚举 PowerPoint 幻灯片

> ID：14963828
> 
> 赞同：3
> 
> 时间：2013-02-19T17:34:50.860
> 
> 标签：c#-4.0, openxml-sdk, powerpoint-2010

`.pptx`我正在尝试使用 OpenXML SDK 2.0分析现有的 PowerPoint 2010文件。

我想要实现的是

*   按顺序枚举幻灯片（因为它们出现在 PPTX 中）
*   从每张幻灯片中提取所有文本位

我已经开始并且到目前为止 - 我可以枚举`SlideParts`来自`PresentationPart`- 但我似乎无法找到一种方法来使其成为**有序**枚举 - 幻灯片以几乎任意顺序返回......

有什么技巧可以按照 PPTX 文件中定义的顺序获取这些幻灯片吗？

```
using (PresentationDocument doc = PresentationDocument.Open(fileName, false))
{
   // Get the presentation part of the document.
   PresentationPart presentationPart = doc.PresentationPart;

   foreach (var slide in presentationPart.SlideParts)
   {
        ...
   }
} 
```

我希望找到一个`SlideID`或`Sequence`数字之类的东西——我可以在 Linq 表达式中使用的一些项目或属性，比如

```
.OrderBy(s => s.SlideID) 
```

在那个幻灯片集合上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T18:07:38.023

它比我希望的要复杂一些——而且文档有时有点粗略......

基本上，我必须枚举`SlideIdList`并`PresentationPart`做一些 XML-foo 以从它`SlideId`到 OpenXML 演示文稿中的实际幻灯片。

类似于以下内容：

```
using (PresentationDocument doc = PresentationDocument.Open(fileName, false))
{
    // Get the presentation part of the document.
    PresentationPart presentationPart = doc.PresentationPart;

    // get the SlideIdList
    var items = presentationPart.Presentation.SlideIdList;

    // enumerate over that list
    foreach (SlideId item in items)
    {
        // get the "Part" by its "RelationshipId"
        var part = presentationPart.GetPartById(item.RelationshipId);

        // this part is really a "SlidePart" and from there, we can get at the actual "Slide"
        var slide = (part as SlidePart).Slide;

        // do more stuff with your slides here!
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T22:29:01.327

我找到的最接近的是这个片段：

> [ISO/IEC 29500-1 第 1 版]
> 
> sld（演示幻灯片）
> 
> 此元素指定幻灯片列表中的一张幻灯片。幻灯片列表用于指定幻灯片的顺序。
> 
> [示例：考虑以下带有幻灯片排序的自定义节目。

```
<p:custShowLst>
  <p:custShow name="Custom Show 1" id="0">
    <p:sldLst>
      <p:sld r:id="rId4"/>
      <p:sld r:id="rId3"/>
      <p:sld r:id="rId2"/>
      <p:sld r:id="rId5"/>
    </p:sldLst>
  </p:custShow>
</p:custShowLst>In the above example the order specified to present the slides is slide 4, then 3, 2 and finally 5\. end example] 
```

在[该类的](http://msdn.microsoft.com/en-us/library/documentformat.openxml.presentation.slide)[MSDN 文档中`slide`](http://msdn.microsoft.com/en-us/library/documentformat.openxml.presentation.slide)

幻灯片似乎有一个 r:id 的形式`rId##`，其中 ## 是幻灯片的编号。也许这足以让你再次出发？

# java - 从 Android 项目引用到标准 Java 项目时出现 NoClassDefFoundError

> ID：14963835
> 
> 赞同：3
> 
> 时间：2013-02-19T17:35:08.937
> 
> 标签：java, android, eclipse, jar, adt

我目前正在开发一个需要使用一些共享类的android应用程序，这些共享类也用于某些服务器端。所以一方面我在eclipse中有这个标准的java项目，我有一些POJO、推断等等。另一方面，我有一个 android 应用程序项目，其中包含一个应该使用这些 POJO 的活动。

我第一次尝试让android项目知道java项目只是将它作为“必需项目”添加到eclipse内部的构建路径属性中。结果是：

```
java.lang.NoClassDefFoundError: my.package.Pojo 
```

我用谷歌搜索并尝试了很多，但问题仍然存在：

**如何正确设置所有内容，以便我的*ADT v21.1* android 项目仍然知道我的 java 项目，即使在运行时也是如此？**

我已经尝试过的一些事情似乎没有改变任何东西：

*   添加“所需项目”后，我还设置了要在 Eclipse“订购和导出”对话框下导出的依赖项

*   我尝试将 java 项目构建为 jar 文件并将其作为 jar 依赖项添加到 android 项目中

*   我创建了一个 android 库项目作为“胶水”：我将 java 项目添加为库项目的依赖项，并将库项目添加为 android 项目的“android 依赖项”

*   我检查了同一父​​文件夹中文件系统内的所有项目（请阅读，否则底层的 ant 任务可能会遇到一些麻烦）

*   我用谷歌搜索了很长时间

如果有人可以提供帮助，那就太好了。也许我只是想念一些小小的东西？

布鲁迪

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T18:58:19.183

问题是我使用 Java 7 构建了 java 项目，这似乎不受 android 的支持。'Phix' 在他非常有帮助的帖子中指出了这一点（他也很自律）： [https ://stackoverflow.com/a/13304441/1145459](https://stackoverflow.com/a/13304441/1145459)

（Bluddymarri 的回答，我只是把它贴在这里帮助他把它关闭）

# xml - XSD 可以验证一个元素是否包含对另一个元素的所有定义的引用

> ID：14963836
> 
> 赞同：1
> 
> 时间：2013-02-19T17:35:10.313
> 
> 标签：xml, xsd

使用 xsd:key 和 xsd:keyref，我们可以验证一个元素中的值是否在另一个元素中定义。我们在我们的模式中这样做是为了确保使用有效值，但我们还希望能够验证一个元素中指定的所有值是否在另一个元素的子元素中使用，即：

```
<elementList>
   <listEntry>Entry1</listEntry>
   <listEntry>Entry2</listEntry>
   <listEntry>Entry3</listEntry>
</elementList>
<elementOperations>
   <operation name="Entry1">Operation1</operation>
   <operation name="Entry3">Operation3</operation>
</elementOperations> 
```

在此示例中，我们希望出现验证错误，因为没有名称属性指定 Entry2 的元素。使用 XSD Schema 验证这是否可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:11:53.313

如果您不允许在操作名称中出现重复值，这是可能的；在这种情况下，只需添加另一个指向相反方向的键/键引用对（即键现在是操作名称）。

如果可能出现重复，那么您不能单独使用 XSD 1.0 来实现 - Schematron 可以在这里为您提供帮助。或者，如果您在支持 XSD 1.1 的环境中工作，请使用 XSD 1.1 的`xsd:assert`.

# c++ - 在对数组 c 进行排序之前保留索引

> ID：14963840
> 
> 赞同：0
> 
> 时间：2013-02-19T17:35:43.150
> 
> 标签：c++, sorting, search

嗨，我在排序之前将此代码用于我的商店索引，但是当我在此行中编译时: :

```
 [&](size_t a, size_t b){ return values[a] < values[b]; } 
```

，对我说错误：

```
 Multiple markers at this line
- expected primary-expression before 
 '[' token
- expected primary-expression before 
 ']' token
- expected primary-expression before 
 'a'
- expected primary-expression before 
 'b'

 template <typename T>
 std::vector<size_t> ordered(std::vector<T> const& values) {
std::vector<size_t> indices(values.size());
std::iota(indices.begin(), indices.end(), static_cast<size_t>(0));

std::sort(
        indices.begin(), indices.end(),
        [&](size_t a, size_t b){ return values[a] < values[b]; }

);
return indices;
 } 
```

第二个问题，当我有经典的输入一维数组时，我该如何调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:39:53.607

此`[...](...) { ... }`语法是 lambda 表达式，是 C++11 的一个特性。您需要确保您使用的是支持它们的编译器。一些编译器提供了一个开关来启用 C++ 功能（`-std=c++0x`对于 GCC）。

如果要`std::sort`在普通数组上使用，请使用：

```
std::sort(array, array + array_size, comp); 
```

或者，您可以使您的代码不知道您使用的是容器还是数组。`ac`数组或容器在哪里：

```
std::sort(std::begin(ac), std::end(ac), comp); 
```

# javascript - 在 'this' 上调用 jQuery $ 函数

> ID：14963841
> 
> 赞同：0
> 
> 时间：2013-02-19T17:35:44.037
> 
> 标签：javascript, jquery

在下面的代码中，为什么需要用 $ 函数将 'this' 括起来？

```
var x = $('div');
x.click(function(){
    $(this).hide();
}); 
```

'this' 不只是指本身就是一个 jQuery 对象的表达式 x 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T17:37:08.350

的值`this`将是表示单击元素的 DOM 节点。`$(this)`将是一个包装该 DOM 节点的 jQuery 对象，并提供额外的函数，如`.show()`,`.append()`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:37:32.463

否：`this`是未包装的 DOM 元素，如[文档中所述](http://api.jquery.com/bind/)：

> handler 参数采用回调函数，如上所示。在处理程序中，关键字 this 指代处理程序绑定到的 DOM 元素。要使用 jQuery 中的元素，可以将其传递给普通的 $() 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:37:49.367

这引用了 div ...这意味着当您单击它时，您的 div 将隐藏。

这总是指上下文中的内容。

# c# - ASP.NET MVC 3 - 自定义 WebViewPage 无法设置布局属性

> ID：14963843
> 
> 赞同：1
> 
> 时间：2013-02-19T17:35:50.093
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

在开始之前，我确实在[这里](https://stackoverflow.com/questions/7787646/net-mvc-3-programmatically-set-layout)找到了这个类似的问题，但我认为这不是完全相同的问题。

我创建了一个自定义`WebViewPage<T>`并将其设置为我在 web.config 中的视图的基本页面。这工作正常。我在类中添加了如下方法 -

```
public void SetLayout()
{
    if (!string.IsNullOrEmpty(HttpContext.Current.Request.QueryString["abc"]))
    {
        Layout = null;
    }
} 
```

在实际用例中还有更多内容，但这是基本方法。它从视图中调用，如果传递了查询字符串参数，则应该覆盖布局。

```
@{ SetLayout(); } 
```

我遇到的问题是 Layout 没有设置为 null。当我在 Visual Studio 中单步执行代码时，我看到 Layout 设置为`"~/Views/Shared/_Layout.cshtml"`(from `_ViewStart.cshtml`)。然后上面的代码运行，它应该设置为空。检查 Layout 属性 - 在该行运行后立即 - 它仍然设置为完整字符串。在“立即”窗口中，我可以将其覆盖为 null - 这有效 - 但通过代码无效。

我尝试使用 base.Layout 等向类添加额外的布局覆盖。基类显示布局只是一个属性，所以我不确定为什么设置它不会改变它的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:21:52.057

我可能遗漏了一些东西，但是您是否尝试过：

`@{ Layout = SetLayout(); }`

# android - ViewFlipper 与 AdapterViewFlipper

> ID：14963846
> 
> 赞同：12
> 
> 时间：2013-02-19T17:35:53.183
> 
> 标签：android

`ViewFlipper`有人可以解释和之间的实际区别`AdapterViewFlipper`。包括何时使用一个而不是另一个。

我已经`ViewFlipper`在自定义光标适配器中使用了几个月，我开始认为我使用了错误的方法，尽管它有效。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-19T17:38:57.387

使用`ViewFlipper`，您通常会预先声明所有孩子，并且没有回收概念。

使用`AdapterViewFlipper`, 您可以使用`Adapter`, `ListView`,`Spinner`等，因此子项可以即时确定，并且可以回收代表子项的视图。

对于小的静态内容，`ViewFlipper`更简单。此外，`AdapterViewFlipper`已在 API 级别 11 (IIRC) 中添加，因此不适用于 Android 上的旧版本。

# ruby - 红宝石乘客不会启动

> ID：14963851
> 
> 赞同：0
> 
> 时间：2013-02-19T17:36:07.647
> 
> 标签：ruby, passenger

前几天我的任务是升级机器上的 ruby​​ 安装。我从源代码安装（通常是 ./configure、make、make install）并更新了所有 gem。目前，该站点不会加载 Ruby Rack 错误，我不知道如何解决：

```
[ pid=21855 thr=104368260 file=utils.rb:176 time=2013-02-19 11:33:32.952 ]: *** Exception PhusionPassenger::UnknownError in PhusionPassenger::Rack::ApplicationSpawner (undefined method `<<' for nil:NilClass (NoMethodError)) (process 21855, thread #<Thread:0x0000000c711108>):
        from /usr/local/lib/ruby/gems/1.9.1/gems/rack-flash-0.1.2/lib/rack/flash.rb:20:in `run'
        from config.ru:7:in `block in <main>'
        from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.5.2/lib/rack/builder.rb:55:in `instance_eval'
        from /usr/local/lib/ruby/gems/1.9.1/gems/rack-1.5.2/lib/rack/builder.rb:55:in `initialize'
        from config.ru:1:in `new'
        from config.ru:1:in `<main>'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/rack/application_spawner.rb:225:in `eval'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/rack/application_spawner.rb:225:in `load_rack_app'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/rack/application_spawner.rb:157:in `block in initialize_server'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/utils.rb:563:in `report_app_init_status'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/rack/application_spawner.rb:154:in `initialize_server'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server.rb:204:in `start_synchronously'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server.rb:180:in `start'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
        from <internal:prelude>:10:in `synchronize'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
        from /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.19/helper-scripts/passenger-spawn-server:99:in `<main>' 
```

你们中有人见过这种类型的错误吗？关于如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:04:46.090

我发现了我的问题。查看错误时，我注意到跟踪中的第一个模块是`rack-flash`. 原来它的新版本与`sinatra`这个应用程序也在使用的不兼容。我注释掉了 flash 相关的代码并且应用程序运行了。

现在我只需要找出将闪存相关代码移植到的正确方法`sinatra-flash`，我想我可以开始了。

# perl - 如何打破 perl 调试器中的警告？

> ID：14963854
> 
> 赞同：2
> 
> 时间：2013-02-19T17:36:14.927
> 
> 标签：perl, debugging

我有一个有时会发出警告的代码路径。由于这条路径被使用了很多次，我不想在每次通过时都中断。我怎样才能只在它发出警告时才中断？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:53:46.043

您可以使用“信号处理程序”发出警告并设置标志，然后在设置标志时中断。

```
our $warn_flag = 0;
$SIG{__WARN__} = sub { $warn_flag = 1; CORE::warn(@_) };

...

for $i (1 .. 1_000_000_000) {
    do_something_that_might_warn();
    $DB::single ||= $warn_flag;
    $warn_flag = 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:58:42.797

```
use warnings qw(FATAL); 
```

这会将警告转换为词法范围内的错误，这将自动导致调试器中断。

# maven - Maven执行测试不起作用

> ID：14963856
> 
> 赞同：0
> 
> 时间：2013-02-19T17:36:27.050
> 
> 标签：maven, jenkins, testlink

大家好，我实际上是在使用 Jenkins 和 testlink（带有 testLink 插件）来进行测试自动化。

我对 IC 和 testlink 不熟悉，所以我尝试从“TestLink 插件教程”开始。

但是当我运行构建时，我收到以下错误：

```
[工作区] $ C:\maven-3.0.4\bin\mvn.bat -s C:\maven-3.0.4\conf\settings.xml -gs C:\maven-3.0.4\conf\settings.xml清洁测试 -DsuiteXmlFiles=suite.xml                                                                     
    [信息] --------------------------------------------- ----------------------
    [INFO] 搭建Jenkins TestLink插件教程0.3-SNAPSHOT   
    [信息] --------------------------------------------- ----------------------
    [信息]             
    [INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ jenkins-testlink-plugin- 教程 -------------------- --------------------------------------
    [INFO] 删除 C:\Jenkins\jobs\Jenkins TestLink 插件示例\workspace\target
    [信息]       
    [信息] --- docbkx-maven-plugin:2.0.11:generate-pdf (book-output) @ jenkins-testlink-plugin-tutorial ---   
    [INFO] 处理输入文件：book.xml   
    [信息] --------------------------------------------- -------------------------
    [信息] 构建失败   
    [信息] --------------------------------------------- -------------------------
    [INFO] 总时间：23.377s   
    [INFO] 完成时间：2013 年 2 月 19 日星期二 17:43:14 CET  
    [INFO] 最终内存：8M/112M  
    [信息] --------------------------------------------- -------------------------
    [错误] 无法在项目 jenkins-testlink-plugin-tutorial 上执行目标 com.agilejava.docbkx:docbkx-maven-plugin:2.0.11:generate-pdf (book-output)：无法读取源：连接超时：连接 -> [帮助 1]
[错误]   
[错误] 要查看错误的完整堆栈跟踪，请使用 -e 开关重新运行 Maven。  
[错误] 使用 -X 开关重新运行 Maven 以启用完整的调试日志记录。  
[错误]   
[错误] 有关错误和可能的解决方案的更多信息，请阅读以下文章：  
[错误] [帮助 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException

```

我正在使用我在 maven/conf 的 settings.xml 中定义的代理。

我认为maven在生成pdf时无法达到目标测试。

我用谷歌搜索了很多，但没有什么真正有用的，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:45:17.233

好的，谢谢你的第一个建议！我不知道这个命令有什么用 -DsuiteXmlFiles=suite.xml 但没有它就没有变化。使用 -X 我有这个：

```
[DEBUG] -----------------------------------------------------------------------
[DEBUG] Goal:          com.agilejava.docbkx:docbkx-maven-plugin:2.0.11:generate-pdf (book-output)
[DEBUG] Style:         Regular
[DEBUG] Configuration: <?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <artifacts>${plugin.artifacts}</artifacts>
  <draftMode>no</draftMode>
  <foCustomization>src/main/book/stylesheets/style.xsl</foCustomization>
  <fop1Extensions>1</fop1Extensions>
  <generatedSourceDirectory>C:\Jenkins\jobs\Jenkins TestLink Plug-in examples\workspace\target/book/generated/en</generatedSourceDirectory>
  <highlightSource>1</highlightSource>
  <includes default-value="*.xml">book.xml</includes>
  <postProcess>
    <copy todir="C:\Jenkins\jobs\Jenkins TestLink Plug-in examples\workspace/target/book/media">
      <fileset dir="C:\Jenkins\jobs\Jenkins TestLink Plug-in examples\workspace/src/main/book/media/">
        <include name="**/*.css"/>
        <include name="**/*.png"/>
        <include name="**/*.gif"/>
        <include name="**/*.jpg"/>
      </fileset>
    </copy>
  </postProcess>
  <project>${project}</project>
  <sourceDirectory>C:\Jenkins\jobs\Jenkins TestLink Plug-in examples\workspace/src/main/book/en/</sourceDirectory>
  <targetDirectory>C:\Jenkins\jobs\Jenkins TestLink Plug-in examples\workspace\target/book/en/</targetDirectory>
  <targetFileExtension default-value="fo"/>
  <xincludeSupported>true</xincludeSupported>
</configuration> 
```

和这个 ：

```
[DEBUG]   (f) draftMode = no
[DEBUG]   (f) foCustomization = src/main/book/stylesheets/style.xsl
[DEBUG]   (f) fop1Extensions = 1
[DEBUG]   (f) generatedSourceDirectory = C:\Jenkins\jobs\Jenkins TestLink Plug-in examples\workspace\target\book\generated\en
[DEBUG]   (f) highlightSource = 1
[DEBUG]   (f) includes = book.xml
[DEBUG]   (f) postProcess = 
[DEBUG]   (f) project = MavenProject: com.tupilabs:jenkins-testlink-plugin-tutorial:0.3-SNAPSHOT @ C:\Jenkins\jobs\Jenkins TestLink Plug-in examples\workspace\pom.xml
[DEBUG]   (f) sourceDirectory = C:\Jenkins\jobs\Jenkins TestLink Plug-in examples\workspace\src\main\book\en
[DEBUG]   (f) targetDirectory = C:\Jenkins\jobs\Jenkins TestLink Plug-in examples\workspace\target\book\en
[DEBUG]   (f) targetFileExtension = fo
[DEBUG]   (f) xincludeSupported = true
[DEBUG] -- end configuration --
[DEBUG] Catalogs to load: jar:file:/C:/Users/rlyonnet/.m2/repository/net/sf/docbook/docbook-xsl/1.75.2/docbook-xsl-1.75.2-ns-resources.zip!/docbook/catalog.xml
[DEBUG] Using stylesheet: jar:file:/C:/Users/rlyonnet/.m2/repository/net/sf/docbook/docbook-xsl/1.75.2/docbook-xsl-1.75.2-ns-resources.zip!/docbook/fo/docbook.xsl
[DEBUG] SourceFile: C:\Jenkins\jobs\Jenkins TestLink Plug-in examples\workspace\src\main\book\en\book.xml
[DEBUG] TargetFile: C:\Jenkins\jobs\Jenkins TestLink Plug-in examples\workspace\target\book\en\book.fo
[INFO] Processing input file: book.xml
[DEBUG] Advanced XInclude mode entered
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 23.450s
[INFO] Finished at: Wed Feb 20 09:23:37 CET 2013
[INFO] Final Memory: 7M/76M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal com.agilejava.docbkx:docbkx-maven-plugin:2.0.11:generate-pdf (book-output) on project jenkins-testlink-plugin-tutorial: Failed to read source: Connection timed out: connect -> [Help 1] 
```

# javascript - 使用 jquery 确定总文件大小

> ID：14963857
> 
> 赞同：1
> 
> 时间：2013-02-19T17:36:27.630
> 
> 标签：javascript, jquery

当我使用 jquery 选择器将文件定义为变量时，出现此错误： Uncaught TypeError: Array.prototype.map called on null or undefined。如果我使用：

```
var file = document.getElementById('file'); 
```

代替

`var file = $('#file').val();`

然后它可以工作，但我很好奇为什么使用 jquery 选择器不起作用。谢谢

```
$('#file').on('change', function(){

  var file = $('#file').val();
      var sizes = [].map.call(file.files, function(v) {return v.size;});
      var totalSize = sizes.reduce(function(a, b) {return a + b;}, 0);
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:42:45.073

`val`返回所选文件的名称，您应该使用对象`files`的属性`InputElement`。

```
$('#file').on('change', function(){
    var size = 0;
    $.each(this.files, function(i, v){
       size += v.size
    })
 }); 
```

请注意，IE 浏览器不支持`files`属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:43:29.520

jquery 选择器`$("#element")`返回一个 jquery 对象而不是一个实际的 dom 元素。

您可以通过在 chrome 或 firebug 中打开控制台并使用 jquery 选择一个元素来自行测试。

也是`$('file').val()`一个用于返回具有 value 属性的 dom 元素的值的函数。

如果要使用 jquery 进行选择但需要操作 dom 元素而不是 jquery 对象，则需要这样做：

```
var file = $('#file')[0]; 
```

它将从 jquery 对象中检索 dom 节点。

# php - 推送通知服务器问题

> ID：14963858
> 
> 赞同：0
> 
> 时间：2013-02-19T17:36:29.617
> 
> 标签：php, apple-push-notifications

我`Apns`用于发送推送通知，它与我的`dev server`. 这是网址

[http://website-center.co.il/projects/mobileapps/test1.php](http://website-center.co.il/projects/mobileapps/test1.php)

这是应用相同脚本的另一台服务器。

[http://www.amigos-groups.com/mobileapps/test1.php](http://www.amigos-groups.com/mobileapps/test1.php)

为此我收到错误

```
Failed to connect: 111 Connection refused. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:38:55.483

您的证书是否在其他站点上正确设置？贴一些代码。

需要更多信息来帮助您解决问题。请将您有问题的 PHP 代码添加到您的问题中。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T10:43:41.970

用于生产和开发的推送证书是不同的。并且为生产和沙盒制作更困难的设备令牌对于同一设备是不同的。交叉检查这些是否正确，我相信你一定在这方面步履蹒跚。

# java - Apache Httppost 从服务器 Java 检索图像

> ID：14963862
> 
> 赞同：0
> 
> 时间：2013-02-19T17:36:59.863
> 
> 标签：java, apache, http-post

现在我正在使用 Httppost 以 xml 的形式将一些参数发布到服务器。发布后，将下载 geotiff 或 .tif 文件。我已经成功地将文档发布到服务器并成功下载了文件，只需将参数附加到 url，但我似乎无法将两者结合起来。我必须使用 post，因为仅使用 URL 会忽略 geotiff 中的高程数据。

简而言之，我不确定如何同时发布和检索帖子的图像。这是我迄今为止所拥有的......

```
// Get target URL
        String strURL = POST;

        // Get file to be posted
        String strXMLFilename = XML_PATH;
        File input = new File(strXMLFilename);

        // Prepare HTTP post
        HttpPost post = new HttpPost(strURL);

        post.setEntity(new InputStreamEntity(
                new FileInputStream(input), input.length()));

        // Specify content type and encoding
        post.setHeader(
                "Content-type", "text/xml");

        // Get HTTP client
        HttpClient httpclient = new DefaultHttpClient();

        //Locate file to store data in
        FileEntity entity = new FileEntity(newTiffFile, ContentType.create("image/geotiff"));

        post.setEntity(entity);

        // Execute request
        try {
            System.out.println("Connecting to Metoc site...\n");

            HttpResponse result = httpclient.execute(post); 
```

我的印象是实体将包含生成的图像。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:25:03.810

谢谢你们的帮助。该实体是发送到服务器的内容。我也有代码试图从响应中读取它，但它不起作用，因为将实体设置为文件实体会破坏发布请求。通过删除该部分，它工作得很好！

# c# - 如何在.Net 2.0的sectionGroup applicationSettings中按名称获取所有部分

> ID：14963870
> 
> 赞同：13
> 
> 时间：2013-02-19T17:37:20.913
> 
> 标签：c#, configuration, mono, .net-2.0, configurationsection

这是我的想法：

我想要一个小的可执行文件有一个 app.config 文件，其中包含位于 sectionGroup“applicationSettings”（不是“appSettings”，我不需要写入文件）下的多个部分。每个部分都有一个对应于模块的名称，如果设置了该模块，则应该加载该模块。

这是一个例子：

```
 <configuration>
     <configSections>
       <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
         <section name="Executable" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
         <section name="FirstModule" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
       </sectionGroup>
     </configSections>
     <applicationSettings>
       <Executable>
         <setting name="MyFirstSetting" serializeAs="String">
           <value>My awesome feature setting</value>
         </setting>
       </Executable>
       <FirstModule path="path to the modules assembly">
         <setting name="ImportantSettingToTheModule" serializeAs="String">
           <value>Some important string</value>
         </setting>
       </FirstModule>
     </applicationSettings>
   </configuration> 
```

现在，如果我定义 FirstModule 部分，我希望我的应用程序加载它的程序集。如果未定义该部分，则不应加载该模块。这不仅适用于一个模块，而且还适用于尚未定义的模块数量。

所以我基本上需要在运行时找出定义的部分。我该怎么做？

此外，我希望它成为向后兼容 .NET 2.0 的可移植可执行文件（= 它也必须在 Mono 上运行）。

看看 GitHub 上的项目可能会很有趣（目前在[这个提交](https://github.com/textquell/rhenus-spring/commit/937151e91be551808c7fdc9dcd91750f24a0b0a2)）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-19T18:19:05.310

查看[`ConfigurationManager.OpenExeConfiguration`](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k(System.Configuration.ConfigurationManager.OpenExeConfiguration);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5);k(DevLang-csharp)&rd=true)要加载到配置文件中的函数。

然后在[`System.Configuration.Configuration`](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k(System.Configuration.Configuration);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5);k(DevLang-csharp)&rd=true)你回来的课程上，你`ConfigurationManager.OpenExeConfiguration`会想看看`SectionGroups`房产。这将返回 a [`ConfigurationSectionGroupCollection`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationsectiongroupcollection.aspx)，您将在其中找到该`applicationSettings`部分。

在 中将`ConfigurationSectionGroupCollection`有一个`Sections`包含`Executable`和`FirstModule` [`ConfigurationSection`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationsection.aspx)对象的属性。

```
var config = ConfigurationManager.OpenExeConfiguration(pathToExecutable);
var applicationSettingSectionGroup = config.SectionGroups["applicationSettings"];
var executableSection = applicationSettingSectionGroup.Sections["Executable"];
var firstModuleSection = applicationSettingSectionGroup.Sections["FirstModule"]; 
```

您将需要`null`在获取`ConfigurationSectionGroupCollection`对象或`ConfigurationSection`对象后进行检查。如果它们为空，则它们不存在于配置文件中。

您还可以使用[`ConfigurationManager.GetSection`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.getsection.aspx)

```
var executableSection = (ClientSettingsSection)ConfigurationManager
    .GetSection("applicationSettings/Executable");
var firstModuleSection = (ClientSettingsSection)ConfigurationManager
    .GetSection("applicationSettings/FirstModule"); 
```

同样，如果对象是，`null`它们在配置文件中不存在。

要获取所有部分名称和组的列表，您可以执行以下操作：

```
var config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

// use the line below instead if you want to load an app.config for a
//   different application other than the one the code is running in
// var config = ConfigurationManager.OpenExeConfiguration(pathToExecutable);

var names = new List<string>();
foreach (ConfigurationSectionGroup csg in config.SectionGroups)
    names.AddRange(GetNames(csg));

foreach (ConfigurationSection cs in config.Sections)
    names.Add(cs.SectionInformation.SectionName);

private static List<string> GetNames(ConfigurationSectionGroup configSectionGroup)
{
    var names = new List<string>();

    foreach (ConfigurationSectionGroup csg in configSectionGroup.SectionGroups)
        names.AddRange(GetNames(csg));

    foreach(ConfigurationSection cs in configSectionGroup.Sections)
        names.Add(configSectionGroup.SectionGroupName + "/" + cs.SectionInformation.SectionName);

    return names;
} 
```

# javascript - 如何删除javascript中的附加内容？

> ID：14963871
> 
> 赞同：0
> 
> 时间：2013-02-19T17:37:19.693
> 
> 标签：javascript, jquery, html

我目前正在使用 javascript、html 和 css 设计网页。该页面是一个座位预订座位，允许用户选择和取消选择座位。当用户选择座位时，我设法让页面显示座位的 id，但是如果用户取消选择座位，我在尝试从显示中删除 id 时遇到问题。

下面是javascript代码

```
$('.available, .unavailable, .selected').click(function(){
    var ID = $(this).attr('class');
    if (ID == 'n unavailable' || ID == 'p unavailable') {
        alert ('Seat is already booked. Please select another seat.');
    }
    else if (ID == 'n selected' || ID == 'p selected') {
        alert ('You have now unselected this seat.');
        $(this).html('<img src = "free.gif"/>');
        $(this).removeClass('selected').addClass('available');
        y--;
        $("#seats").html("Number of seats selected: " + y);
        $("#list").remove($(this).attr('id'));
    }
    else {
        alert ('You have now reserved this seat. You can unselect it by clicking the seat again.');
        $(this).html('<img src = "selected.gif"/>');
        $(this).removeClass('available').addClass('selected');
        y++;
        $("#seats").html("Number of seats selected: " + y);
        $("#list").append($(this).attr('id') + "</br>");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:43:13.467

考虑将一个实际元素附加到列表中，以便以后查找和删除，而不是纯文本

附加：

```
var appendId = $(this).attr('id') 
$("#list").append("<div id='seat_"+appendId +"'>" + appendId + "</div>"); 
```

删除：

```
$("#seat_"+$(this).attr('id')).remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:46:54.160

首先要注意的是您正在使用`alert()`，这是向用户发布消息的非常糟糕的做法。考虑一种不同的方法（如果你愿意，我可以提示正确的方向。

要注意的第二件事是它`remove()`适用于 jQuery 中的元素。它删除当前选定的结果集或基于当前结果集的新结果集`$('#seats').remove('.reserved')`，将删除具有`reserved`在第一个结果集中找到的类的元素（具有 id 的元素`seats`）。

第三点，要注意的是 jQuery 有一个相当有用的方法叫做[hasClass](http://api.jquery.com/hasClass/)，使用它！

第四也是最后，这是您的代码的改进版本，应该可以工作：

```
$('.available, .unavailable, .selected').click(function(){
    var $this = $(this);

    if ($this.hasClass('unavailable')) {
        alert ('Seat is already booked. Please select another seat.');
        return;
    }

    if ($this.hasClass('selected')) {
        alert ('You have now unselected this seat.');
        $this
            .html('<img src = "free.gif"/>')
            .removeClass('selected')
            .addClass('available')
        ;
        y--;
        $("#seats").html("Number of seats selected: " + y);
        $('#reserved-'+$this.attr('id')).remove();
        return;
    }

    alert ('You have now reserved this seat. You can unselect it by clicking the seat again.');
    $this
        .html('<img src = "selected.gif"/>')
        .removeClass('available')
        .addClass('selected')
    ;
    y++;
    $("#seats").html("Number of seats selected: " + y);
    $("#list").append(
        $('<p/>')
            .attr('id','reserved-'+$this.attr('id'))
            .html($this.attr('id'))
    );
}); 
```

另外我会考虑删除`unavailable`and `available`。没有这两个类且没有`selected`, 的元素将处于“默认”状态，在您的应用程序中没有任何意义。考虑修改为`selected`和`reserved`。Reserved 将已被占用，selected 将是最终用户当前选择的座位，并且没有任何类别的元素将处于默认状态：任何人都可以免费使用。

# c++ - 无法加载平台插件“windows”可用的平台是：windows、minimal

> ID：14963881
> 
> 赞同：2
> 
> 时间：2013-02-19T17:37:42.283
> 
> 标签：c++, qt, qwt

您好我正在尝试从调试文件夹执行我的 .exe 文件。

现在，在您告诉我所有其他相关文章之前，我已经查看了所有其他相关文章，他们的解决方案对我的问题没有帮助。

好的，首先我使用 Qwt 库并尝试创建一组仪表。我有一个仪表工作，现在我需要让它从 .exe 执行。

我尝试在我的目录中添加平台文件夹并添加 windowsd.dll 和 minimumd.dll 但仍然无法正常工作。
请就这让我难过的任何行动方案提出建议。

还有一篇文章说要创建一个 qt.conf 文件并将其放在目录中，但我不知道如何制作一个 .conf 文件。

更新错误读取调试错误！程序：...build-Desktop_Qt_5_0_1_MSVC2010_32bit-Debug\debug\gauge.exe 模块：5.0.1 文件：kernel\qguiapplication.cpp 行：781

无法加载平台插件“windows”。可用平台有： 最小的 Windows

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:02:43.397

在 Windows 上部署 Qt 时，您必须从 Qt 目录的 bin 文件夹中复制一些 dll。

在我的系统上是：

`C:\Qt\4.8.4\bin`

从那里复制所有必需的 dll 后`QtCore4.dll`，`QtGui4.dll`如果您使用任何其他插件（如 phonon 或 jpeg 支持），则需要从插件文件夹中复制这些 dll：

`C:\Qt\4.8.4\plugins`

例如，我在文件夹中创建一个文件夹，调用我的 exe `imageformats`，然后放入`qjpeg4.dll`该文件夹。

就 Qwt 的工作而言，您可能需要执行类似的过程来将这些 dll 公开给您的 exe，并将它们放在与您的 exe 相同的文件夹中。

上面列出的 dll 用于您的 exe 的“发布”版本。如果您正在运行“调试”版本，它将查找`<dll_name>d.dll`.

放入这些路径的原因与 windows 使用的库搜索顺序有关。

[Qt、Phonon 和多媒体编解码器：如何捆绑它们？](https://stackoverflow.com/questions/10428202/qt-phonon-and-multimedia-codecs-how-to-bundle-them/10608437#10608437)

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx)

[http://qt-project.org/doc/qt-4.8/deployment-windows.html#creating-the-application-package](http://qt-project.org/doc/qt-4.8/deployment-windows.html#creating-the-application-package)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-30T15:49:12.393

如果您有多个可执行文件并且\或者您不想手动复制插件，您可以创建一个`qt.conf`包含插件目录路径的文件

```
[Paths]
Plugins = PATH_TO_QT_DIR/plugins 
```

您需要将 qt.conf 文件放在可执行文件所在的位置。
更多信息请访问[http://doc.qt.io/qt-5/qt-conf.html](http://doc.qt.io/qt-5/qt-conf.html)

# macos - 未找到符号：MacOS 命令行工具中的 _objc_retainAutoreleasedReturnValue

> ID：14963882
> 
> 赞同：5
> 
> 时间：2013-02-19T17:37:44.193
> 
> 标签：macos, osx-lion, automatic-ref-counting, llvm-clang

有*[几个](https://stackoverflow.com/questions/11551927/symbol-not-found-objc-retainautoreleasedreturnvalue-running-arc-compiled-code) [问题](https://stackoverflow.com/questions/12735408/symbol-not-found-objc-retainautoreleasedreturnvalue)*的关键字与标题相同，但它们侧重于 Objective-C 的 iOS 端。我的问题是使用 MacOS 命令行工具。

基本上发生的事情是 Foundation (Cocoa) 工具调用了一个 C 函数，该函数最终调用了另一个 Foundation 方法。由于从 C 函数调用 Foundation 方法，这`Symbol not found: _objc_retainAutoreleasedReturnValue`就是在运行时引发“”错误的地方。

代码如下所示：

日志.h

```
@interface Log : NSObject {

}

@end

void RemoveLogFile(NSString * theLogFile); 
```

日志.m

```
#import "Log.h"

@implementation Log

@end

// this is a C-style function
void RemoveLogFile(NSString * theLogFile)
{
    NSString * logFileName;

    NSLog( @"about to allocate a filename" );

// crash can happen in either case below
#if 1
    logFileName = [NSString stringWithFormat: @"%@.log", theLogFile];
#else
    logFileName = [[NSString alloc] initWithFormat: @"%@.log", theLogFile];
#endif

    NSLog( @"done allocating");
} 
```

主文件

```
#import <Foundation/Foundation.h>
#import "Log.h"

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        NSString* outPath = [[NSString alloc] initWithFormat: @"%@/MyLogFile", @"/tmp/"];
        NSLog( @"past out path alloc");
        RemoveLogFile(outPath);
        NSLog( @"done with the test");
    }
    return 0;
} 
```

ARC为64位编译工具[开启（32位版本无法开启](https://stackoverflow.com/questions/7919227/arc-error-fobjc-arc-is-not-supported-with-fragile-abi)），最低支持MacOS版本为10.6。

在 MacOS 10.7 中调用该工具时，它会立即崩溃并显示如下日志：

```
Process:         com.dautermann.Doughnuts [540]
Path:            /Library/PrivilegedHelperTools/com.dautermann.Doughnuts
Identifier:      com.dautermann.Doughnuts
Version:         ??? (1.0)
Code Type:       X86-64 (Native)
Parent Process:  launchd [1]

Date/Time:       2013-02-19 05:02:48.337 -0800
OS Version:      Mac OS X 10.7 (11A390)
Report Version:  8

Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x0000000000000002, 0x0000000000000000

Application Specific Information:
objc[540]: garbage collection is OFF

Dyld Error Message:
  Symbol not found: _objc_retainAutoreleasedReturnValue
  Referenced from: /Library/PrivilegedHelperTools/com.dautermann.Doughnuts
  Expected in: /usr/lib/libobjc.A.dylib

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   dyld                            0x00007fff5fc0106d dyld_fatal_error + 1
1   dyld                            0x00007fff5fc04918 dyld::fastBindLazySymbol(ImageLoader**, unsigned long) + 128
2   libdyld.dylib                   0x00007fff925f0716 dyld_stub_binder_ + 13
3   ???                             0x0000000100004030 0 + 4294983728
4   com.dautermann.Doughnuts    0x0000000100001523 0x100000000 + 5411
5   com.dautermann.Doughnuts    0x0000000100001470 0x100000000 + 5232 
```

我有根据的猜测（在其他人的帮助下）是我可能需要传入一个“ `char *`”，或者我必须在某处将某些东西声明为“ `_unsafe_unretained`”。这似乎是现代 Xcode 4.6 编译器应该为我处理的事情。

有人对我可能做错了什么有任何猜测吗？

# php - Github 服务挂钩：通过 PHP 进行后接收

> ID：14963883
> 
> 赞同：1
> 
> 时间：2013-02-19T17:37:45.663
> 
> 标签：php, git, github, nginx, git-post-receive

我在通过服务挂钩部署时遇到了一些问题，我认为这是权限问题，但我会先说明所有事实。

服务器：Arch Linux 上带有 PHP-FPM 的 Nginx

Nginx 以 http 用户身份运行，并且拥有要由脚本更新的目录的所有权。我还为 HTTP 创建了一个 SSH 密钥并将其安装在 GitHub 上。其他命令似乎可以通过 shell_exec 正常工作，但我无法完成重置或拉动完成，也没有任何输出返回。任何帮助，将不胜感激。谢谢！

挂钩脚本（PHP）：

```
if ( isset($_SERVER["REMOTE_ADDR"]) )    { 
    $requestIP = $_SERVER["REMOTE_ADDR"]; 
} else if ( isset($_SERVER["HTTP_X_FORWARDED_FOR"]) )    { 
    $requestIP = $_SERVER["HTTP_X_FORWARDED_FOR"]; 
} else if ( isset($_SERVER["HTTP_CLIENT_IP"]) )    { 
    $requestIP = $_SERVER["HTTP_CLIENT_IP"]; 
}

// GitHub post-receive IPs
$validIPs = array(
    '207.97.227.253',
    '50.57.128.197',
    '180.171.174.178'.
    '50.57.231.61',
    '54.235.183.49',
    '54.235.183.23',
    '54.235.118.251',
    '54.235.120.57',
    '54.235.120.61',
    '54.235.120.62'
);

if(($payload = $_REQUEST['payload']) && in_array($validIps, $requestIP)) {
    $payload = json_decode($payload);
    $repository = $payload->repository->name;
    $docRoot = '/var/www/'.escapeshellcmd($repository);

    if(is_dir($docRoot)) {
        $command = 'cd '.$docRoot.' && git reset --hard HEAD && git pull';
        $output = shell_exec( $command );
        file_put_contents("hook.log", "$repository: $output\r\n", FILE_APPEND);     
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T19:39:25.267

您应该检查您的命令运行的环境。git 可能不在环境使用的路径中。

如果是这种情况，您可以使用完整路径名运行 git。

# python - 如何读取文件夹中的所有文本文件内容并将这些内容作为行复制到一个 Excel 文件中

> ID：14963885
> 
> 赞同：4
> 
> 时间：2013-02-19T17:37:51.607
> 
> 标签：python, xlwt

我在一个文件夹中有 100 个 txt 文件（名为 pos）。我想复制所有文件内容并将它们作为行粘贴到 Excel 文件中。我从 stackoverflow 中找到了一些代码，但它们不起作用。请帮我。

```
import xlwt
import os
import glob

wbk = xlwt.Workbook()
sheet = wbk.add_sheet('data')
path= 'C:\tweet\pos'
row = 0

for files in os.walk(path):
...     for file in files:
...         if fnmatch(file, '*.txt'):
...             L = open(os.path.join( file), "r").read()
...             sheet.write(row,5,L)
...             row += 1
...             

wbk.save('read_all_txt_in_folders.xls') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:58:11.650

以下程序对我有用。

笔记：

*   被`'\t'`解释为制表符，而不是路径分隔符。尝试使用正斜杠。
*   它是`import fnmatch`/ `fnmatch.fnmatch(pattern, file)`。`glob`不需要。
*   我不得不从字符串中删除尾随的换行符。在我的测试用例中，使用`L[:-1]`就足够了。您可能需要更强大的解决方案。
*   `os.walk()`返回一个元组：`(directory, subdirectories, files)`.
*   我已将调试语句留在评论中，以防它们对您有所帮助。

.

```
import xlwt
import os
import fnmatch

wbk = xlwt.Workbook()
sheet = wbk.add_sheet('data')
row = 0

# sheet.write(1, 1, "Hello")

for (dir, dirs, files) in os.walk('.'):
     # print dir
     for file in files:
         # print " ", file
         if fnmatch.fnmatch(file, '*.txt'):
             L = open(os.path.join(dir, file), "r").read()
             # print "  ", L.__repr__()
             a = sheet.write(row,5,L[:-1])
             # sheet.write(row, 4, "hello")
             # print "   ", a
             row += 1

wbk.save('read_all_txt_in_folders.xls') 
```

# eclipse - .war 文件不会被更新

> ID：14963887
> 
> 赞同：0
> 
> 时间：2013-02-19T17:37:59.007
> 
> 标签：eclipse, gwt, tomcat, ant, war

我有一个旧项目，使用 Eclipse 中的 Google Web Toolkit 构建。创建它时，我执行了以下步骤，以获取 .war 文件

1.  GWT 编译项目
2.  运行以下 Ant 脚本

    ```
    <project name="The" basedir="." default="default">

     <target name="default" depends="buildwar,deploy"></target>

     <target name="buildwar">
        <war basedir="war" destfile="The.war" webxml="war/WEB-INF/web.xml">
            <exclude name="WEB-INF/**" />
            <webinf dir="war/WEB-INF/">
                <include name="**/*.jar" />
            </webinf>
        </war>
     </target>

     <target name="deploy">
        <copy file="The.war" todir="." />
     </target>

    </project> 
    ```

3.  获取 .war 文件

现在，我不得不在我的项目中更改一个端口，所以我在我的代码中更改了它并执行了相同的步骤以获取 .war

但是，当我在 Tomcat 中部署更新后的项目时，它仍然会向旧端口号发出请求（我发现这个阅读 catalina.out）

那么，我该怎么做才能获得一个新的、新鲜的 .war ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:16:11.620

您没有提到它，但是您是否更改了tomcat中的端口？我假设你做到了，但我只想涵盖所有可能性。

# opengl - 为什么OpenGL没有圆或曲线功能？

> ID：14963889
> 
> 赞同：0
> 
> 时间：2013-02-19T17:38:01.873
> 
> 标签：opengl

我需要知道为什么 OpenGL 没有圆形或曲线函数，这与内置函数的矩形和多边形不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T17:41:09.083

因为 GPU 通常没有用于实时渲染的这些形状的硬件加速概念。图形硬件是围绕渲染三角形的管道设计的，三角形是原始图形几何（通过扩展通常可以创建四边形等的微不足道的添加）。任何其他形状（曲线、广义网格等）都由您来创建并变成 GPU*可以*渲染的东西。

因此，“允许”您自己构建例如圆圈可以让您控制几何的复杂程度。当您需要一个“圆圈”时，您不会希望 GL 为您决定要生成多少东西——这将取决于您在做什么、您需要多少细节/平滑度等。

由于不断重新发明轮子 (har) 并不好玩，因此您最终可能会使用许多更高级别的图形库，它们可以轻松地为您创建这些几何图形。但它们在纯 GL 之上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:47:45.587

我认为在计算机图形加速的早期，加速器的马力有点弱，所以任何非线性的东西都被认为是昂贵的。在大多数情况下，曲线恰好是非线性的。

# php - php执行时scp主机密钥验证失败

> ID：14963892
> 
> 赞同：5
> 
> 时间：2013-02-19T17:38:06.980
> 
> 标签：php, linux, scp

我正在尝试使用 scp 来复制文件。我使用 PHP 的命令 shell_exec 来执行这个命令：

```
scp -i/home/raul/nueva_clave -q -v /home/raul/www/CA/app/tmp/ImagenWeb TA-adm@127.0.0.1:/home/TA-adm/images/IMG_3846.JPG 2>&1 
```

服务器地址是 127.0.0.1 因为我还在开发脚本。我稍后会改变它。

我使用 scp 而不是 PHP 的 ssh2_scp_send 因为我不想在我的项目中写入服务器的密码。相反，我想使用公钥。但是当我在 PHP 中执行时，结果如下：

```
Executing: program /usr/bin/ssh host 127.0.0.1, user TA-adm, command scp -v -t -- /home/TA-adm/images/IMG_3846.JPG
OpenSSH_5.9p1 Debian-5ubuntu1, OpenSSL 1.0.1 14 Mar 2012
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: /etc/ssh/ssh_config line 19: Applying options for *
debug1: Connecting to 127.0.0.1 [127.0.0.1] port 22.
debug1: Connection established.
debug1: SELinux support disabled
Could not create directory '/nonexistent/.ssh'.
debug1: identity file /home/raul/nueva_clave type 1
debug1: Checking blacklist file /usr/share/ssh/blacklist.RSA-2048
debug1: Checking blacklist file /etc/ssh/blacklist.RSA-2048
debug1: identity file /home/raul/nueva_clave-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.9p1 Debian-5ubuntu1
debug1: match: OpenSSH_5.9p1 Debian-5ubuntu1 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.9p1 Debian-5ubuntu1
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: sending SSH2_MSG_KEX_ECDH_INIT
debug1: expecting SSH2_MSG_KEX_ECDH_REPLY
debug1: Server host key: ECDSA 2d:71:67:30:89:c0:1a:64:41:b5:07:8f:6d:c5:9f:13
debug1: read_passphrase: can't open /dev/tty: No such device or address
Host key verification failed.
lost connection 
```

如果我在终端中与我的用户一起执行此命令，我没有问题。我想问题是用户nobody正在执行scp。我正在使用 Ubuntu。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-27T09:55:07.867

（由 OP 在问题编辑中回答。移至此处。请参阅[没有答案的问题，但问题已在评论中解决（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 解决了。我使用了以下选项：

```
-o UserKnownHostsFile=/dev/null -o StrictHostKeyChecking=no 
```

> 因此该`scp`命令不会尝试将主机插入到`known_host`用户nobody 的文件文件中（`scp`无法创建文件，因为用户nobody 也没有家`~/.ssh`）。

# backbone.js - 模型的提取不起作用

> ID：14963894
> 
> 赞同：0
> 
> 时间：2013-02-19T17:38:14.893
> 
> 标签：backbone.js

这是我的模型的身体

```
urlRoot: '/users',

parse: function(response) {
   return response.User;
} 
```

这是我`/users/1`在浏览器中输入时返回的内容：

```
{"User":{"id":"1","created":"2013-02-13 09:22:42","modified":"2013-02-13 09:22:42","username":"somesuername","password":"","role":"somerole","token":null,"token_expiration":null}} 
```

所以api有效。当我执行这个：

```
this.model.id = 1;
this.model.fetch({ success: function(user){
                        console.log(user);    
                   }}); // this.model is instance of my model 
```

我进入控制台：

```
d {cid: "c4", attributes: Object, _changing: false, _previousAttributes: Object, changed: Object…}
_changing: false
_pending: false
_previousAttributes: Object
attributes: Object
    __proto__: Object
changed: Object
cid: "c4"
id: Array[1]
__proto__: e 
```

所以结果是模型成功的，没有获取任何数据——我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:40:59.130

`Backbone.Model`将数据存储在`attributes`属性内。从[骨干文档](http://backbonejs.org/#Model-attributes)：

> attributes 属性是包含模型状态的内部散列——通常（但不一定）是表示服务器上模型数据的 JSON 对象的一种形式。它通常是数据库中一行的直接序列化，但也可能是客户端计算状态。
> 
> 请使用 set 来更新属性，而不是直接修改它们。

尝试`attributes`在控制台对象检查器中展开节点，您应该会看到您的数据。

# javascript - Kendo UI 替代 MVC

> ID：14963905
> 
> 赞同：0
> 
> 时间：2013-02-19T17:38:43.627
> 
> 标签：javascript, asp.net-mvc-4, kendo-ui

我已经使用 MVC 4 和 kendo UI 成功开发了一个简单的网格。一切都按预期工作，我没有问题。前几天，我与另一位开发人员交谈，他告诉我我可以完全绕过 MVC，只需使用 Javascript 从 SQL Server（我的数据源）读取并在我的 HTML 页面上调用它。在那里，我可以使用 Kendo UI 助手以我想要的方式显示页面。

我的问题是，这可能吗？如果可能的话，是否可取？我主要只使用数据库，这是我第一次使用 MVC、Kendo 和 HTML 等，所以请多多包涵。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:17:24.283

你的同事是绝对正确的。您可以使用 Kendo UI 的客户端版本并在 HTML/.cshtml/aspx... 文件上编写 jQuery 代码，并使用 Ajax 调用连接到您的 MVC/Web API 控制器或 RESTFul/HTTP 服务。这将像一个魅力。

仅当您精通 Javascript/jQuery 时才建议这样做。这种方法将提供更好的用户体验，您可以轻松构建单页应用程序，这是 Web 应用程序的未来。

如果您看到 Kendo UI 演示，所有示例都是使用 jQuery 在纯 HTML 页面上构建的。

我希望我清楚地回答了您的问题，但如果您需要任何澄清，请随时提问。

# asp.net - 从页面中的静态方法调用母版页控件

> ID：14963906
> 
> 赞同：-2
> 
> 时间：2013-02-19T17:38:49.320
> 
> 标签：asp.net

我有一个文件上传，在文件上传中使用了 onchange 事件，在更改事件中使用了一个调用静态 webmethd 来验证文件内容的 javascript 函数。我如何在这个页面的这个静态函数中调用母版页控件请帮我这个忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:14:58.447

由于静态方法不知道当前的 System.Web.UI.Page，因此您可能无法访问您要查找的属性。如果没有代码示例，很难说出您要做什么。

您可以尝试下面的代码，但它可能不起作用，因为视图状态将无法通过异步 WebMethod 调用获得。每次回发都会传输视图状态，并使用视图状态实例化一个 System.Web.UI.Page 对象。由于您没有进行回发，因此视图状态不可用。您可能必须进行完整的回发。

如果该属性存储在会话状态或应用程序状态中，您可能会没事。尝试

```
Page currentPage = HttpContext.Current.Handler as Page;
currentPage.MasterPage.MyProperty = "foo"; 
```

# java - 将 JLabel 与 BoxLayout 中的 JScrollPane 对齐

> ID：14963909
> 
> 赞同：0
> 
> 时间：2013-02-19T17:38:54.927
> 
> 标签：java, swing, alignment, jscrollpane, boxlayout

我正在尝试将 JLabel 和 JScrollPane（包含 JTextArea）与 JPanel 的左侧对齐。当我将 JTextArea 直接放在面板中时，对齐是正确的。仅当 JTextArea 位于滚动窗格中时，对齐才会不正确。

```
import javax.swing.BoxLayout;
import javax.swing.JDialog;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextArea;

public class Main {

    public static void main(String[] args) {
        JDialog dialog = new JDialog();
        JPanel panel = new JPanel();
        panel.setLayout(new BoxLayout(panel, BoxLayout.PAGE_AXIS));
        panel.add(new JLabel("My Label"));
        // panel.add(new JTextArea(3, 15));
        panel.add(new JScrollPane(new JTextArea(3, 15)));
        dialog.add(panel);
        dialog.pack();
        dialog.setVisible(true);
    }
} 
```

下面的第一张图片带有滚动窗格，第二张图片没有它。如何正确对齐滚动窗格？

![未对齐对话框](../Images/2bfb57a376ac64c23ddde2eb7b7020d1.png) ![对齐对话框](../Images/998568b32455ddd014a7e2cfda3f1116.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:52:37.927

尝试使用`alignmentX`：

```
import java.awt.Component;

import javax.swing.*;

public class Main {

    public static void main(String[] args) {
        JDialog dialog = new JDialog();
        JPanel panel = new JPanel();
        panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));

        JLabel label = new JLabel("My Label");
        label.setAlignmentX(Component.LEFT_ALIGNMENT);
        panel.add(label);

        JScrollPane pane = new JScrollPane(new JTextArea(3, 15));
        pane.setAlignmentX(Component.LEFT_ALIGNMENT);
        panel.add(pane);

        dialog.add(panel);
        dialog.pack();
        dialog.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:54:36.923

代替：

```
panel.add(new JLabel("My Label")); 
```

经过：

```
JPanel labelPan = new JPanel(new FlowLayout(FlowLayout.LEFT);
labelPan.add(new JLabel("My Label"));
panel.add(labelPan); 
```

# email - 为什么在我的 Ubuntu 服务器上运行的 cakePHP 发送的电子邮件中包含这个奇怪的字符？

> ID：14963912
> 
> 赞同：1
> 
> 时间：2013-02-19T17:39:06.133
> 
> 标签：email, cakephp, character-encoding, html-email

我看到一些奇怪的字符出现在从我在 ubuntu 服务器上运行的 CakePHP 应用程序发出的电子邮件中。

人物是——

D 用笔划穿过它 - Đ - 这出现在我包含一个 cakephp 变量
O 和波浪号 - Õ - 而不是撇号
E 和精确 - É - 而不是 ...（3 个点）

知道他们为什么会出现吗？带有波浪号的 O 代替撇号出现，所以我认为它是字符编码问题..

我正在使用 Cake 发送 html 电子邮件。

任何线索表示感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:19:36.327

试试这些

1) 在 config/core.php 中搜索 this `App.encoding`，该行应如下所示`Configure::write('App.encoding', 'UTF-8');`，`UTF-8`如果不是，请将其设置为。

2）在你的布局中，在头部添加这个，

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

3) 将整个项目的编码更改为`UTF-8`在 IDE 中（如果您使用 Zend Studio，只需右键单击项目并选择“属性”，然后选择 UTF-8 编码）。

虽然发送电子邮件与数据库无关（当然，如果您没有从那里获取一些数据进行发送），但您也许可以在配置下的文件中添加`'encoding' => 'utf8'`行，以免在 db.xml 中保存任何编码问题。`database.php``$default`

希望能帮助到你。

# c++ - 使用 QtConcurrentRun 和互斥锁的非常简单的方法有时会导致分段错误

> ID：14963914
> 
> 赞同：0
> 
> 时间：2013-02-19T17:39:08.210
> 
> 标签：c++, qt, thread-safety

我想知道这段代码有什么问题。有时我得到分界错误，有时没有。这是我在一个更大的软件中遇到的一个问题，这个想法是只有一个线程同时执行 MyClass::print 方法。即使使用这个简单的示例，它也会因分段错误而失败。代码有什么问题？我该如何解决这个问题？

谢谢！

```
#include <iostream>
#include <ctime>
#include <QMutex>
#include <QtConcurrentRun>

class MyClass : QThread {
public:
    void print(std::string str) {
        mutex.lock();
        std::cout << "In some thread: " <<  str << "\n";
        mutex.unlock();
    }

private:
    QMutex mutex;

};

int main() {

    MyClass myCl;

    for(int i=0; i < 10; i++) {
        QtConcurrent::run(&myCl, &MyClass::print,std::string("bla"));
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T18:00:58.010

`for`在产生线程的循环之后，您不会加入线程。

因此，`main()`函数可能在所有线程完成之前结束。这将`myCl`超出范围，并且线程将尝试访问已被销毁的对象（特别是其`mutex`变量）。这给了你**未定义的行为**。

如果您在退出之前加入线程（或者只要任何线程仍在运行，就`main()`找到任何其他不退出的方式），事情应该会变得更好。`main()`

# php - PHP用函数制作N个数组副本

> ID：14963915
> 
> 赞同：2
> 
> 时间：2013-02-19T17:39:20.117
> 
> 标签：php, arrays, multidimensional-array

在我的代码中，我需要制作多个虚拟数组的副本。数组很简单，例如`$dummy = array('val'=> 0)`. 我想制作这个数组的 N 个副本，并将它们附加到具有类似结构的现有数组的末尾。显然，这可以通过 for 循环来完成，但为了便于阅读，我想知道是否有任何内置函数会使这变得更加冗长。

这是我使用 for 循环提出的代码：

```
//example data, not real code
$existingArray = array([0] => array('val'=>2),[1] => array('val'=>3) );

$n = 2;
for($i=0;$i<$n;$i++) {
   $dummy = array('val'=>0); //make a new array
   $existingArray[] = $dummy; //add it to the end of $existingArray
} 
```

重申一下，如果存在这样的函数，我想用函数重写它。与此类似的东西（显然这些不是真正的功能）：

```
//make $n copies of the array
$newvals = clone(array('val'=>0), $n);

//tack the new arrays on the end of the existing array
append($newvals, $existingArray) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T17:40:20.113

我想你正在寻找[`array_fill`](http://php.net/manual/en/function.array-fill.php)：

> ```
> array array_fill ( int $start_index , int $num , mixed $value ) 
> ```
> 
> `num`用参数值的条目填充数组`value`，键从`start_index`参数开始。

所以：

```
$newElements = array_fill(0, $n, Array('val' => 0)); 
```

您仍然必须处理对`$newElements`自己的附加`$existingArray`，可能使用[`array_merge`](http://www.php.net/manual/en/function.array-merge.php)：

> ```
> array array_merge ( array $array1 [, array $... ] ) 
> ```
> 
> 将一个或多个数组的元素合并在一起，以便将一个数组的值附加到前一个数组的末尾。它返回结果数组。
> 
> 如果输入数组具有相同的字符串键，则该键的后一个值将覆盖前一个。但是，如果数组包含数字键，则后面的值***不会***覆盖原始值，而是会被追加。
> 
> 带有数字键的输入数组中的值将使用从结果数组中的零开始的递增键重新编号。

所以：

```
$existingArray = array_merge($existingArray, $newElements); 
```

这一切都有效，因为您的顶级数组是数字索引的。

# java - 使用 Java + SAMBA + Win 7 列出非常慢的文件

> ID：14963927
> 
> 赞同：0
> 
> 时间：2013-02-19T17:40:08.447
> 
> 标签：java, performance, networking, samba

我发现`File.listFiles()`从 Win 7 客户端通过 SAMBA 文件夹调用 Java*非常慢*，实际上比从 Mac 客户端慢了近 100 倍。（两个客户端都运行 Java 7）。两个客户端自然都在同一个 1GB LAN 上。一位客户从他的 Win XP 客户端进行了测试，并获得了比他的 Win7 客户端更好的性能。有谁知道如何解决这个问题？

一些测试数据，包括时间： 清单 31 个 SAMBA（“QNAP”NAS 磁盘）上的文件夹：

赢 7：

```
列出\\nas\Public\David\Remote Stocks：0.0s
列出 \\nas\Public\David\Remote Stocks\Animals: 0.093s
列出 \\nas\Public\David\Remote Stocks\Animals\.jalbum: 0.312s
列出 \\nas\Public\David\Remote Stocks\Animals\.jalbum\thumbs: 0.405s
列出 \\nas\Public\David\Remote Stocks\album: 1.248s
列出 \\nas\Public\David\Remote Stocks\album\Animals：1.31 秒
列出 \\nas\Public\David\Remote Stocks\album\Animals\thumbs: 1.388s
列出\\nas\Public\David\Remote Stocks\album\Animals\slides：1.762s
列出 \\nas\Public\David\Remote Stocks\album\Animals\res: 2.542s
列出\\nas\Public\David\Remote Stocks\album\Sports：2.761s
列出 \\nas\Public\David\Remote Stocks\album\Sports\thumbs：2.839s
列出\\nas\Public\David\Remote Stocks\album\Sports\slides：3.229s
列出 \\nas\Public\David\Remote Stocks\album\Sports\res: 3.978s
列出 \\nas\Public\David\Remote Stocks\album\res: 4.196s
列出\\nas\Public\David\Remote Stocks\album\Scenic：4.695s
列出 \\nas\Public\David\Remote Stocks\album\Scenic\thumbs: 4.773s
列出\\nas\Public\David\Remote Stocks\album\Scenic\slides：5.194s
列出 \\nas\Public\David\Remote Stocks\album\Scenic\res: 5.99s
列出 \\nas\Public\David\Remote Stocks\album\People: 6.208s
列出 \\nas\Public\David\Remote Stocks\album\People\thumbs: 6.302s
列出\\nas\Public\David\Remote Stocks\album\People\slides：6.692s
列出 \\nas\Public\David\Remote Stocks\album\People\res: 7.472s
列出 \\nas\Public\David\Remote Stocks\.jalbum: 7.659s
列出\\nas\Public\David\Remote Stocks\Sports：7.768s
列出 \\nas\Public\David\Remote Stocks\Sports\.jalbum：7.909s
列出 \\nas\Public\David\Remote Stocks\Sports\.jalbum\thumbs: 7.987s
列出\\nas\Public\David\Remote Stocks\Scenic：8.486s
列出 \\nas\Public\David\Remote Stocks\Scenic\.jalbum：8.642s
列出\\nas\Public\David\Remote Stocks\Scenic\.jalbum\thumbs：8.72s
列出\\nas\Public\David\Remote Stocks\People：9.282s
列出 \\nas\Public\David\Remote Stocks\People\.jalbum：9.422s

```

Mac 上的相同列表：

```
上市/Volumes/Public/David/Remote Stocks: 0.0s
上市/Volumes/Public/David/Remote Stocks/Animals: 0.013s
上市/Volumes/Public/David/Remote Stocks/Animals/.jalbum：0.018s
上市/Volumes/Public/David/Remote Stocks/Animals/.jalbum/thumbs：0.022s
上市/Volumes/Public/David/Remote Stocks/专辑：0.027s
上市/Volumes/Public/David/Remote Stocks/album/Animals: 0.03s
上市/Volumes/Public/David/Remote Stocks/album/Animals/thumbs: 0.032s
上市/Volumes/Public/David/Remote Stocks/album/Animals/slides: 0.034s
上市/Volumes/Public/David/Remote Stocks/album/Animals/res: 0.038s
上市/Volumes/Public/David/Remote Stocks/album/Sports：0.04s
上市/Volumes/Public/David/Remote Stocks/album/Sports/thumbs: 0.042s
上市/Volumes/Public/David/Remote Stocks/album/Sports/slides：0.046s
上市/Volumes/Public/David/Remote Stocks/album/Sports/res: 0.05s
上市/Volumes/Public/David/Remote Stocks/album/res: 0.052s
上市/Volumes/Public/David/Remote Stocks/专辑/Scenic：0.058s
上市/Volumes/Public/David/Remote Stocks/专辑/Scenic/thumbs: 0.064s
上市/Volumes/Public/David/Remote Stocks/专辑/Scenic/slides：0.068s
上市/Volumes/Public/David/Remote Stocks/album/Scenic/res: 0.074s
上市/Volumes/Public/David/Remote Stocks/专辑/人物：0.08s
上市/Volumes/Public/David/Remote Stocks/album/People/thumbs: 0.082s
上市/Volumes/Public/David/Remote Stocks/专辑/人物/幻灯片：0.085s
上市/Volumes/Public/David/Remote Stocks/album/People/res: 0.089s
上市/Volumes/Public/David/Remote Stocks/.jalbum：0.091s
上市/Volumes/Public/David/Remote Stocks/Sports：0.103s
上市/Volumes/Public/David/Remote Stocks/Sports/.jalbum：0.106s
上市/Volumes/Public/David/Remote Stocks/Sports/.jalbum/thumbs：0.108s
上市/Volumes/Public/David/Remote Stocks/Scenic：0.11s
上市/Volumes/Public/David/Remote Stocks/Scenic/.jalbum：0.122s
上市/Volumes/Public/David/Remote Stocks/Scenic/.jalbum/thumbs：0.124s
上市/Volumes/Public/David/Remote Stocks/People: 0.126s
上市/Volumes/Public/David/Remote Stocks/People/.jalbum：0.133s

```

我终于尝试在 Windows 上执行多线程列表来克服网络滞后效应。它在一定程度上有所帮助，从 9 秒到 3 秒，即快了 3 倍，但仍然比我的 MacBook Pro 客户端测得的 0.133 秒慢得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-23T17:38:41.000

Problem solved by using the [Files.walkFileTree](https://docs.oracle.com/javase/8/docs/api/java/nio/file/Files.html#walkFileTree-java.nio.file.Path-java.util.Set-int-java.nio.file.FileVisitor-) API. With it I'm able to grab all attributes of all files of a folder with one SAMBA network IO call.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:54:37.290

我认为您偶然发现了一个已知的 Windows 问题。

也许这篇文章可以帮助你：[http ://www.sysprobs.com/windows-7-network-slow](http://www.sysprobs.com/windows-7-network-slow)

编辑：

如果您确定您的问题不是由于操作系统在连接到旧 SMB 协议公开的共享时的不良行为，那么它是（并非闻所未闻的）缓慢归因于 JDK 实现。

OpenJDK 和 Oracle Java`java.io.File.listFiles()`委托给`String [] list()`（未公开的）抽象类的方法，该抽象类`java.io.FileSystem`又由`java.io.UnixFileSystem`、`java.io.Win32FileSystem`和以特定于平台的方式实现`java.io.WinNTFileSystem`。

它们的`list()`功能总是`native`，所以我认为速度慢可以归咎于 JRE 附带的 DLL 实现。

我们之前在 Windows XP 中遇到过关于文件浏览的类似问题。很长一段时间以来，它都是 JRE 的一个突出错误。

# c++ - 多态使用向量与多态使用数组之间的区别

> ID：14963928
> 
> 赞同：1
> 
> 时间：2013-02-19T17:40:13.030
> 
> 标签：c++, boost

基于更有效的 C++**条款 3：永远不要多态处理数组**，我们应该避免多态处理数组。

那么为什么我们可以`std::vector`毫无问题地使用来保存指向基类的指针呢？

谢谢

```
#include <iostream>
#include "boost/shared_ptr.hpp"
#include <vector>

class BaseClass {
public:
    virtual void PrintMe() const {
        std::cout << "BaseClass" << std::endl;
    }
    virtual ~BaseClass() {}
};

class SubClass : public BaseClass {
public:
    virtual void PrintMe() const {
        std::cout << "SubClass" << std::endl;
    }
};

int main()
{
    std::vector<boost::shared_ptr<BaseClass> > vecPtrs;
    boost::shared_ptr<BaseClass> shp1(new BaseClass);
    vecPtrs.push_back(shp1);

    boost::shared_ptr<BaseClass> shp2(new SubClass);
    vecPtrs.push_back(shp2);

    for (size_t i = 0; i < vecPtrs.size(); ++i)
    {
        vecPtrs[i]->PrintMe();
    }
}

// Output:

BaseClass
SubClass
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T17:45:10.593

可以使用数组或向量来保存*指向*多态类型的指针。

问题是如果您尝试以多态方式处理*对象*数组。通过指针访问数组使用指针类型来确定数组对象的大小，如果指针类型与对象类型不匹配，这将出现可怕的错误。

```
Base * stuff = new Derived[10]; // No compile error: pointer conversion is allowed
stuff[2].do_something();        // Still no compile error, but weird runtime errors. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:43:24.167

没有什么神奇的`std::vector`。保存指向基类的指针的常规数组将同样工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T18:07:04.110

问题是这样的：

```
struct base {
    int element;
};

struct derived : base {
    int another_element;
};

void f(base *p) {
    std::cout << (void*)&p[1] << '\n';
}

int main() {
    derived array[20];
    std::cout << (void*)&array[1] << '\n';
    f(array);
    return 0;
} 
```

如果你运行这个程序，你会得到数组中索引 1 处元素的两个**不同**地址。

发生这种情况是因为在调用 时`f`，名称`array`衰减为指向其第一个元素的指针。那是 a `derived*`，编译器**将该**指针转换为 a`base*`并将其传递给`f`. 在 内部`f`，指针算术将传入的指针视为`base*`. `p[1]`指向地址为`sizeof(base)`bytes above的对象`p`，即指向`derived`数组中第一个对象的中间。

因此，除了第一个之外，您对数组元素所做的任何事情都会让您胡说八道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T17:46:19.610

它是说你不应该这样做：

```
Base array[N];
array[0] = Derived1();
array[1] = Derived2(); 
```

这些派生对象在放入数组时将被切片。

对于像`std::vector`. 对于 C++ 中的多态行为，您需要使用指针：

```
std::unique_ptr<Base> array[N];
array[0].reset(new Derived1());
array[1].reset(new Derived2()); 
```

# android - 以英寸为单位绘制尺寸

> ID：14963933
> 
> 赞同：1
> 
> 时间：2013-02-19T17:40:20.673
> 
> 标签：android

我想画一个1厘米大的形状，但我只知道如何设置像素大小。

```
canvas.drawRect(0,0,10,10,paint); 
```

是否可以以厘米或英寸为单位设置尺寸？或者也许是为了获得屏幕的dpi？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:43:45.350

您可以在`res/values/dimens.xml`文件中定义所需的大小，例如：

```
<dimen name="your_value">10mm</dimen> 
```

然后你可以在你的活动课上得到这个维度：

`int value = (int) getResources().getDimension(R.dimen.your_value)`.

该值也可以以英寸为单位定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:43:19.050

您可以分别使用 XML 中的“mm”或“in”尺寸值来表示毫米/英寸。

[参考](http://developer.android.com/guide/topics/resources/more-resources.html#Dimension)

# sql - 查找组之间的共同数据

> ID：14963935
> 
> 赞同：3
> 
> 时间：2013-02-19T17:40:25.357
> 
> 标签：sql, sql-server

我有这个数据

```
DeveloperId   Date             remark
--------------------------------------
1             02/01/2013        Google
1             02/02/2013        MSN
1             02/03/2013        Google
1             02/02/2013        MSN
1             02/01/2013        Yahoo
2             02/01/2013        Google
2             02/02/2013        Yahoo
2             02/03/2013        Google
2             02/01/2013        Google 
```

如何动态查找 google 和 Msn 和 yahoo 的共同日期？

我想把这样的查询放在报告中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:55:33.953

```
-- Query for dates that have all types of remarks
SELECT
  Date
FROM
  data
GROUP BY 
  Date
HAVING COUNT(DISTINCT remark) = (
  SELECT COUNT(DISTINCT remark)
  FROM data
); 
```

或者，如果这不是要求...

```
-- Query for dates that have more than one remark.
SELECT
  Date
FROM
  data
GROUP BY 
  Date
HAVING COUNT(DISTINCT remark) > 1; 
```

## [Sql 小提琴](http://sqlfiddle.com/#!6/324e8/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:48:18.463

试试这个：

```
with temp as
(
    SELECT Date, Remark
    From MyTable
    GROUP BY Date, Remark
)
SELECT Date
FROM temp
GROUP BY Date
Having COUNT(*) > 1 
```

在这里工作小提琴：[http ://sqlfiddle.com/#!3/d41d8/9105](http://sqlfiddle.com/#!3/d41d8/9105)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T17:55:53.883

3 种不同言论的共同日期：

```
SELECT t1.DATE
FROM TABLE T1
INNER JOIN TABLE T2
ON t1.DATE = t2.DATE
AND Remark IN ('google', 'yahoo', 'msn')
GROUP BY t1.DATE, t1.REMARK
HAVING COUNT(t1.DATE) = 3; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T17:47:27.480

```
Select Date from data
group by remark, Date 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T17:58:17.140

尝试：

```
select "Date"
from myTable
group by "Date"
where remark in ('Google','MSN','Yahoo')
having count(distinct remark) = 3 
```

# codeigniter - CodeIgniter 制作默认字符集 utf-8 而不是 iso-8859-1

> ID：14963941
> 
> 赞同：0
> 
> 时间：2013-02-19T17:40:56.433
> 
> 标签：codeigniter, codeigniter-2

我的 codeIgniter 应用程序为所有带有 Content 类型标题的 html 页面提供服务：text/html; 字符集=iso-8859-1。我希望它默认提供 utf-8。我检查了配置文件和数据库配置文件。

```
$config['charset'] = 'UTF-8'; 
```

它只是保持编码iso-8859-1 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:59:58.487

如果您使用的是 Apache，请将其添加到 .htaccess

```
AddDefaultCharset UTF-8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:43:12.670

确保您的 HTML 模板没有设置不同的字符集。检查任何具有开头`<html>`和/或`<head>`标签的模板。

**编辑**由于您的模板已正确编码，因此可能值得快速“在文件中查找”搜索 iso-8859-1 并查看它在哪里被覆盖。如果它在核心 CodeIgniter 实例中的任何位置，并且您使用的是最新版本（并且尚未编辑核心），那么它可能是一个错误，您需要将它报告给 CodeIgniter 人员。

但是请记住，它不一定是错误，而是覆盖该错误的不同设置。在跳转到错误报告表单之前，请确保查看找到的任何实例的上下文。

# java - Java中任何对象的编译时类型与运行时类型有什么区别？

> ID：14963943
> 
> 赞同：11
> 
> 时间：2013-02-19T17:40:59.910
> 
> 标签：java, generics, effective-java

Java中任何对象的编译时和运行时类型有什么区别？我正在阅读[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683)书，Joshua Bloch 在 Item 26 中多次提到数组实例的编译时类型和运行时类型，主要是为了描述有时抑制强制转换警告是安全的。

```
// Appropriate suppression of unchecked warning
public E pop() {
 if (size == 0)
   throw new EmptyStackException();
   // push requires elements to be of type E, so cast is correct
   @SuppressWarnings("unchecked") E result = (E) elements[--size];
   elements[size] = null; // Eliminate obsolete reference
   return result;
} 
```

在这里，作者正在谈论这些不同类型`types`的数组上下文。但是通过这个问题，我想了解`compile time types`vs`run time types`对于任何类型的 object 之间的区别。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T17:48:17.060

Java 是一种静态类型语言，因此编译器将尝试确定所有内容的类型并确保所有内容都是类型安全的。不幸的是，静态类型推断本质上是有限的。编译器必须保守，也无法看到运行时信息。因此，即使确实是，也无法证明某些代码是类型安全的。

运行时类型是指运行时变量的实际类型。作为程序员，您希望比编译器更了解这一点，因此当您知道这样做是安全的时，您可以抑制警告。

例如，考虑以下代码（不会编译）

```
public class typetest{
    public static void main(String[] args){
        Object x = args;
        String[] y = x;

        System.out.println(y[0])
    }
} 
```

该变量`x`将始终具有 type `String[]`，但编译器无法弄清楚这一点。因此，在将其分配给`y`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-09-18T15:06:18.883

一个例子

```
Number x;

if (userInput.equals("integer")) {
    x = new Integer(5);
} else {
    x = new Float(3.14);
} 
```

有**两种**相关的类型`x`

*   **名称** 的类型`x`。在示例中，它是`Number`. 这是在*编译时*确定的，永远不会改变，因此它是*静态类型*
*   **值** `x`所指的类型。在示例中，它可以是`Integer`或`Float`，具体取决于某些外部条件。编译器在编译时无法知道类型。它是在运行时确定的（因此是*动态类型*），并且可以多次更改，只要它是静态类型的子类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T21:19:01.810

Java 是静态类型的。这意味着语言中的每个表达式（包括变量）都具有根据语言规则在编译时已知的类型。这称为静态类型（您称之为“编译时类型”）。Java中的类型是原始类型和引用类型。

此外，Java 中的每个对象在运行时都有一个“类”（这里，“类”包括虚构的数组“类”），它在运行时是已知的。对象的类是创建对象的类。

部分混淆来自Java中的每个类（以及接口和数组类型）都有一个对应的引用类型，以及类（或接口或数组类型）的名称。引用类型的值是一个引用，它可以是`null`或指向一个对象。Java 语言的设计使得*引用类型* `X`的引用（如果不是）`null`将始终指向其类是*类*X 或其子类的对象（或对于接口，其类实现*接口*X）。

请注意，运行时类应用*对象*，但对象不是 Java 中的值。另一方面，类型适用于变量和表达式，它们是编译时概念。变量或表达式永远不可能有对象的值，因为没有对象类型；它可以具有指向对象的引用值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T18:15:53.617

我认为“编译时类型”是变量可以在编译时显示的任何类型。这将包括声明的类、任何超类和任何实现的接口。

在运行时，一个给定的对象只有一个最低级别的类；它可以合法地强制转换或分配给该类的变量，也可以分配给它的任何子类或实现的接口的任何变量。*编译器*将（通常，无论如何）允许您将其强制转换为任何内容，但如果您尝试分配不合法的内容，运行时将引发异常。

一旦将对象分配给变量，编译器就会将其视为变量的类型。因此，“编译时”的另一种用途可能是变量类型，只要您知道强制转换在运行时是合法的，您就可以在编译时通过转换为不同的类型来解决这个问题。

如果我只说一种类型，我认为变量的“运行时类型”是变量的实际底层（顶层？）子类；可以将其转换为的最低子类。但我也经常将任何对象视为其任何合法类型的实例。

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-17T15:04:22.037

Java 数组被称为“协变”，这意味着 String[] 是 Object[] 的子类型，并且在编译时检查类型规则。

Java 数组在运行时检查您想要存储到其中的对象（例如 String、Integer、WhatEver）是否与实际创建的数组的类型兼容。

例如：

```
String[] strings = new String[2];
strings[0] = "I am text"; 
Object[] objects = strings;
objects[1] = new Date(); // Compiles, but at runtime you get an ArrayStoreException 
```

# django - M2M 的 Django REST 元数据丢失

> ID：14963947
> 
> 赞同：0
> 
> 时间：2013-02-19T17:41:14.293
> 
> 标签：django, django-rest-framework

在我的 json 输出中，我似乎没有在我的 m2m 字段 attribute_answers 上获得键值对。请参阅下面的代码。如何在 attribute_answers 字段中添加？

**json**

```
{
    "id": 20, 
    "name": "Jake", 
    "active": true, 
    "type": {
        "id": 1, 
        "name": "Human", 
        "active": true, 
        "created": "2013-02-12T13:31:06Z", 
        "modified": null
    }, 
    "user": "jason", 
    "attribute_answers": [
        1, 
        2
    ]
} 
```

**串行器**

```
class ProfileSerializer(serializers.ModelSerializer):
    user = serializers.SlugRelatedField(slug_field='username')
    attribute_answers = serializers.PrimaryKeyRelatedField(many=True)

    class Meta:
        model = Profile
        depth = 2
        fields = ('id', 'name', 'active', 'type', 'user', 'attribute_answers')

    def restore_object(self, attrs, instance=None):
        """
        Create or update a new snippet instance.

        """
        if instance:
            # Update existing instance
            instance.name = attrs.get('name', instance.name)
            instance.active = attrs.get('active', instance.active)
            instance.type = attrs.get('type', instance.type)
            instance.attribute_answers = attrs.get('attribute_answers', instance.attribute_answers)
            return instance

        # Create new instance
        return Profile(**attrs) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T21:37:10.443

如果我正确理解你的问题，你想要一个[嵌套关系](http://django-rest-framework.org/api-guide/relations.html#nested-relationships)。在您的 ProfileSerializer 中，您需要：

```
attribute_answers = AttributeAnswerSerializer(many=True) 
```

这将显示每个关联的 attribute_answer 模型的所有属性，并为您提供如下内容：

```
{
    "id": 20, 
    "name": "Jake", 
    "active": true, 
    "type": {
        "id": 1, 
        "name": "Human", 
        "active": true, 
        "created": "2013-02-12T13:31:06Z", 
        "modified": null
    }, 
    "user": "jason", 
    "attribute_answers": [
        {"id": 1, "foo": "bar"}, 
        {"id": 2, "foo": "bar2"}
    ]
} 
```

# jquery - Knockoutjs 实时示例不适用于 jquery 1.9

> ID：14963948
> 
> 赞同：0
> 
> 时间：2013-02-19T17:41:20.360
> 
> 标签：jquery, knockout.js, knockout-mvc

我想知道为什么本教程使用 jquery 1.5 工作 1.9 它不...

[http://jsfiddle.net/rniemeyer/QSRBR/](http://jsfiddle.net/rniemeyer/QSRBR/)

```
<div class='liveExample'> 

    <div data-bind='simpleGrid: gridViewModel'> </div>

    <button data-bind='click: addItem'>
        Add item
    </button>

    <button data-bind='click: sortByName'>
        Sort by name
    </button>

    <button data-bind='click: jumpToFirstPage, enable: gridViewModel.currentPageIndex'>
        Jump to first page
    </button>

</div> 
```

有任何想法吗。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:46:53.307

[https://github.com/SteveSanderson/knockout/issues/503](https://github.com/SteveSanderson/knockout/issues/503)

[https://github.com/SteveSanderson/knockout/pull/796](https://github.com/SteveSanderson/knockout/pull/796)

看起来 jQuery.clean 已从此版本中删除。淘汰赛使用的是未记录的 API，因此可能会发生这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:48:44.743

根据[这个讨论](https://groups.google.com/forum/?fromgroups=#!topic/knockoutjs/ewUJjC4AnE8)，这个问题应该已经用 Knockout 2.2.1 解决了。尝试更新到最新的稳定版 Knockout。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T17:52:06.053

如果您对 jQuery 1.9 或 2.0 有任何问题，请阅读以下（非常重要！）更改日志：http: [//jquery.com/upgrade-guide/1.9/](http://jquery.com/upgrade-guide/1.9/)。

升级到 1.9 时很容易破坏遗留代码，尤其是在使用未记录的功能时。

# azure - 如何以编程方式知道 Azure 存储表是否已更改？

> ID：14963953
> 
> 赞同：1
> 
> 时间：2013-02-19T17:41:45.380
> 
> 标签：azure, storage

我想知道是否有任何方法可以以编程方式知道 Azure 表存储中的表是否已更改，然后表中发生了什么更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T20:00:25.473

不，不是。您唯一的选择是查看表中的所有记录，并查看记录是否根据 Timestamp 属性更改（[即使官方文档建议您不要阅读 Timestamp 属性](http://msdn.microsoft.com/en-us/library/windowsazure/dd179338.aspx)）。

或者让您的代码在每次添加/更新/删除实体时通过将其写入另一个表（审计表）来进行跟踪。

# flash - Flash 符号到 Actionscript

> ID：14963954
> 
> 赞同：0
> 
> 时间：2013-02-19T17:41:45.213
> 
> 标签：flash, actionscript, flash-builder, flash-cs5

我可以从 adobe flash 中的符号获取操作脚本代码吗？我在 adobe flash 专业阶段应用了各种颜色和渐变。现在我想在 adobe flash builder 中为我的项目使用此代码。有什么建议可以让我在 Flash Builder 中使用它吗？

# google-apps-script - 如何将子菜单项添加到 Google 电子表格菜单

> ID：14963955
> 
> 赞同：0
> 
> 时间：2013-02-19T17:41:46.067
> 
> 标签：google-apps-script

来自本教程： [https ://developers.google.com/apps-script/articles/helpdesk_tutorial](https://developers.google.com/apps-script/articles/helpdesk_tutorial)

以下代码添加了一个菜单项，并在该菜单项下添加了一个子菜单项。这工作正常，我对结果很满意。

```
function onOpen() {
  var subMenus1 = [{name:"Send Status Email", functionName: "emailStatusUpdates"}];
  SpreadsheetApp.getActiveSpreadsheet().addMenu("Help Desk Menu", subMenus1);
}​ 
```

我想添加一个额外的子菜单项，我已经尝试过：

```
function onOpen() {
  var subMenus1 = [{name:"Send Status Email", functionName: "emailStatusUpdates"}];
  var subMenus2 = [{name:"Open GUI", functionName: "fLoadGUI"}];
  SpreadsheetApp.getActiveSpreadsheet().addMenu("Help Desk Menu", subMenus1);
  SpreadsheetApp.getActiveSpreadsheet().addMenu("Help Desk Menu", subMenus2);
}​ 
```

我也试过这个：

```
function onOpen() {
  var subMenus1 = [{name:"Send Status Email", functionName: "emailStatusUpdates"}];
  var subMenus2 = [{name:"Open GUI", functionName: "fLoadGUI"}];
  SpreadsheetApp.getActiveSpreadsheet().addMenu("Help Desk Menu", subMenus1, subMenus2);
} 
```

我上面的两次尝试都失败了。我怀疑我应该使用“additem”方法，但我不确定因此我的问题在这里。我想知道是否有人会足够好，为我指出正确的方向。

托尼干杯​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T18:07:35.767

您只需要添加一次菜单，但其中可以包含多个项目。（用逗号分隔对象）

```
function onOpen() {
  var subMenus = [{name:"Send Status Email", functionName: "emailStatusUpdates"},
                  {name:"Open GUI", functionName: "fLoadGUI"}
                  ];
  SpreadsheetApp.getActiveSpreadsheet().addMenu("Help Desk Menu", subMenus);
} 
```

# search - 具有评分功能的多面搜索引擎

> ID：14963956
> 
> 赞同：0
> 
> 时间：2013-02-19T17:41:55.097
> 
> 标签：search, faceted-search

我正在寻找一种搜索引擎解决方案，其中每个文档都有可以过滤的属性，但不是绝对 - 只评分。

doc1 具有属性 a、b 和 c doc2 具有属性 b 和 c

如果用户只选择属性“a”，它不会完全删除 doc2，它只会给 doc1 评分更高...

有没有可以做类似事情的搜索引擎？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T12:24:44.873

您可以使用[Solr](http://lucene.apache.org/solr/)构建类似的东西。您不会使用内置方面；相反，您会将属性公开为链接（可能以类似方面的方式）并使用它们为该属性添加评分权重，该权重可以作为参数在 Solr 查询中即时发送。

# eclipse - 创建独立于屏幕分辨率的java桌面应用的策略？

> ID：14963962
> 
> 赞同：0
> 
> 时间：2013-02-19T17:42:16.690
> 
> 标签：eclipse, swing, netbeans, javafx, scenebuilder

几个月来，我一直在使用 eclipse 使用 java 进行编程，并且认为自己处于中级水平，并且我最初有 vb.net 背景。

我有一个关于屏幕分辨率（以像素为单位）和用两部分自动缩放我的应用程序的问题

A）当您使用 swing（或 JavaFX）设计桌面应用程序时，您是否实际上计算每个组件的像素宽度和高度，然后通过在启动时检测屏幕分辨率在代码中放大或缩小它？Scene-Builder for JavaFX、Eclipse Windows Builder Gridbag 布局和 GroupLayout 只需单击几下即可完成，而且相对容易。如果它是计算和手动编码的，那么这意味着我将不得不花费大量时间来为每个控件提前计划。

B）对于屏幕分辨率（例如 1024x768）是否有共同的共识来设计“最初”的应用程序（然后根据检测到的屏幕分辨率缩放所有控件）？我的显示器有 1920x1080 分辨率，但我很困惑我应该开始设计我的应用程序的分辨率。1024x768 对我来说似乎是合理的。

非常感谢您的宝贵时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:31:51.200

我已经在 J​​ava Swing 中完成了所有工作，因此这可能不适用于其他 GUI 集。

*   在面板和一个框架内布局所有组件。

*   包装框架。

*   打印出框架的大小。

*   如果框架太大，将一些组件放在滚动窗格中。

*   重复直到框架达到所需的大小。

换句话说，我关心的是 GUI 的功能。我不在乎它有多大，除非它对于显示器来说太大了。

我组装了一个框架为 170 x 152 像素的闹钟。它位于我显示器的右下角。

![闹钟](../Images/0269e457f4d45c61f977afa203c762b7.png)

我把一个框架为 1097 X 522 像素的时钟/日历放在一起。它位于我显示器的右上角。

![时钟/日历](../Images/261bdfb730af120a987968b1b54582c5.png)

我将 Cobol 段落结构显示放在一起，我将框架最大化到显示的大小，主要是为了让段落名称树具有最大的空间量。

![Cobol 段落结构](../Images/bce41021214c61311dfac5f667dd8ae6.png)

# java - 事件调度器作为服务

> ID：14963964
> 
> 赞同：1
> 
> 时间：2013-02-19T17:42:23.153
> 
> 标签：java, android, service, listener, dispatcher

我想为网络通信实现一个事件调度程序。一个活动应该使用这样的函数在这个调度器上注册一个监听器：

```
void addListener(String type, Listener listener) 
```

另一方面，我需要这样一个函数来请求服务器：

```
void request(String type, JSONObject data) 
```

我决定使用服务来保持连接并分派事件，原因有两个：

1.  使其可以从每项活动中访问
2.  使用为 Android 应用程序指定的生命周期

此服务必须对其他应用程序不可见，因此不需要 IPC。我尝试将服务绑定到我的活动并使用**android.os.IBinder**来创建用于通信的**android.os.Messenger 。**（如此处所述：[绑定服务](http://developer.android.com/guide/components/bound-services.html)）但我猜消息传递和响应消息并不真正符合我的要求。将侦听器注册到服务并调用这些侦听器来操作活动视图的最佳方法是什么？可能会让事情变得更加困难：如何为服务使用线程以避免阻塞请求中的 UI？有没有人知道如何做到这一点或一些好的资源来调查？ **谢谢 ：）**

# java - 程序计算一个txt文件中数字的频率并在另一个txt文件中输出结果？

> ID：14963968
> 
> 赞同：0
> 
> 时间：2013-02-19T17:42:31.487
> 
> 标签：java, file-io, count

我正在编写一个程序来计算该数字在 twxt 文件中出现的次数。文本的输入是在运行时给出的。输入存储在文本文件中，现在我必须计算频率并将结果输出到另一个文本文件中。

```
import java.io.File;
import java.util.Formatter;
import java.util.Scanner;
public class StudentPoll
{

private Scanner x;
int[] frequency = new int[5];
int count =0;
 public void openFile(){
    try{
        x = new Scanner(new File("numbers.txt"));
    }
    catch(Exception e){
        System.out.printf("No File found");
    }
    }
  public void readFile(){
    while(x.hasNext()){
       int a= x.nextInt(); 
           if(a==1){
               frequency[0]=0;
            ++frequency[0];
            break;
        }
       else if (a== 2){
                       frequency[1]=0;
                ++frequency[1];
                break;
       }
       else if( a==3){
                frequency[2]=0;
                ++frequency[2];
                break;
       }
       else if (a==4){
                frequency[3]=0;
                ++frequency[3];
                break;
       }
       else if (a== 5){
           frequency[4]=0;
               ++frequency [4];
               break;

       }

       }     

          System.out.printf("%s%10s\n","Rating","Frequency");
          System.out.printf("%s%10s\n","1",++frequency[0]); 
          System.out.printf("%s%10s\n","2",++frequency[1]); 
          System.out.printf("%s%10s\n","3",++frequency[2]); 
          System.out.printf("%s%10s\n","4",++frequency[3]); 
          System.out.printf("%s%10s\n","5",++frequency[4]); 

    }
}

public void closeFile(){
    x.close();
} 
```

我应该得到输出：

```
Rating  Frequency
1         1
2         2
3         1
4         1
5         1 
```

但是频率计数不正确。我不知道我在这里犯了什么错误。

我也不知道如何将此输出写入另一个文件。我需要改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:48:08.520

您需要将数组的初始化从 `nextInt()`循环的一部分中取出。否则，每次找到新数字时，都会将计数重置为零。

改变：

```
public void readFile(){
    while(x.hasNext()){
       int a= x.nextInt(); 
           if(a==1){
               frequency[0]=0;
            ++frequency[0];
            break;
        } 
```

至：

```
public void readFile(){
    while(x.hasNext()){
               frequency[0]=0;
               frequency[1]=0;
               // ... etc etc
       int a= x.nextInt(); 
           if(a==1){
            ++frequency[0];
            break;
        } 
```

`frequency[x]=0`并删除循环中的其余部分。

此外，打印语句中的 ++frequency[x] 调用不应该存在。您不想在每次打印列表时都增加。循环遍历数组也更有意义，而不是每个数组都有一个 printf。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T17:47:45.353

您每次都使用 重置计数`frequency[xxx]=0;`。只需删除所有这些语句，因为数组元素将自动使用默认值初始化，即 0 表示`int`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:52:20.097

```
frequency[0]=0;
++frequency[0]; 
```

每次数字匹配时都会重置频率，并且在打印结果时也会增加频率。

替换`int[] frequency = new int[5]`为 `int[] frequency = [0,0,0,0,0]`和 `System.out.printf("%s%10s\n","1",++frequency[0]);`_ `System.out.printf("%s%10s\n","1",frequency[0]);`

# java - 我想检查网络状态，但它给了我 nullPointerException 为什么？

> ID：14963969
> 
> 赞同：1
> 
> 时间：2013-02-19T17:42:33.697
> 
> 标签：java, android

我收到了`NullPointerException`下面的代码。有谁知道可能是什么原因造成的？

```
public void clickMe(View v) //the view is button
    {   

        ConnectivityManager conMgr = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo networkInfo = conMgr.getActiveNetworkInfo();

        String b;

        if(networkInfo.isConnected())
            b="on";
        else
            b="off";

        Toast.makeText(MainActivity.this, b , Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:44:39.327

根据[`getActiveNetworkInfo()`](https://developer.android.com/reference/android/net/ConnectivityManager.html#getActiveNetworkInfo%28%29)的文档：

> 返回有关当前活动数据网络的详细信息。连接后，此网络是传出连接的默认路由。您应该始终`isConnected()`在启动网络流量之前进行检查。`null`当没有可用的网络时，这可能会返回。

所以你没有任何活动网络，检查它是否`null`是这样的：

```
if(networkInfo != null && networkInfo.isConnected()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:47:37.493

看看[https://developer.android.com/reference/android/net/ConnectivityManager.html#getActiveNetworkInfo()](https://developer.android.com/reference/android/net/ConnectivityManager.html#getActiveNetworkInfo())

> 此方法要求调用者持有权限 ACCESS_NETWORK_STATE。

如果您没有，则需要将此权限添加到您的应用程序中。如果不这样做，您可能得不到任何结果并意外地得到空结果。

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

确保已将其添加到您的清单中。

# regex - 是否有正则表达式可以匹配最多 7 位数字的浮点数？

> ID：14963970
> 
> 赞同：2
> 
> 时间：2013-02-19T17:42:36.537
> 
> 标签：regex

我正在寻找一个正则表达式来匹配最多 7 位数字的浮点数。我不知道如何处理小数点。甚至可以将其与正则表达式匹配吗？小数点左侧必须至少有 1 位，右侧至少有 0-6 位，但总位数必须为 7 或更少。

例子：

好的：

*   1.234567
*   0.1
*   1234567
*   1

坏的：

*   .1234567
*   12345678
*   1.2.34567

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T17:50:00.647

以下应该有效：

```
^(?!.*\..*\.|\d{8})\d[\d.]{,7}$ 
```

示例：[http ://www.rubular.com/r/gglVngm0pH](http://www.rubular.com/r/gglVngm0pH)

解释：

```
^            # beginning of string anchor
(?!          # start negative lookahead (fail if following regex can match)
   .*\..*\.    # two or more '.' characters exist in the string
   |           # OR
   \d{8}       # eight consecutive digits in the string
)            # end negative lookahead
\d           # match a digit
[\d.]{,7}    # match between 0 and 7 characters that are either '.' or a digit
$            # end of string anchor 
```

# slickgrid - 更改数据后无法选择 slickgrid 中的第一行

> ID：14963975
> 
> 赞同：0
> 
> 时间：2013-02-19T17:42:51.017
> 
> 标签：slickgrid

我有一个使用带有行选择模型的数据视图的 slickgrid。我经常为数据视图分配一个完全不同的数组，在这个网格中切换数据。

我使用这个函数来交换网格中的数据集：

```
function setData(dataArray, uniqueIdFieldName) {
    dataView.beginUpdate();
    dataView.setItems(dataArray, uniqueIdFieldName)
    dataView.endUpdate();
    grid.resizeCanvas();
    grid.invalidate();  
} 
```

我第一次使用此功能（将初始数据加载到空网格中）时，一切正常。此后每次都可以正常加载数据，但有一个选择错误。我无法选择网格中的第一行。但是，如果我选择第一行以外的行，错误似乎会自行纠正，然后我可以再次选择第一行。当我再次使用我的函数更改数据时，我再次无法选择第一行。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:49:29.687

我找到了问题和解决方案。问题是 slickgrid 保留了有关活动单元格/行的所有数据，即使您使用 setItems() 完全更改了它的数据。即使不再选择任何单元格，内部变量 activeCell 仍设置为索引值。解决方案是在更改数据之前调用 grid.resetActiveCell()。所以工作代码如下所示：

```
function setData(dataArray, uniqueIdFieldName) {
    grid.resetActiveCell(); //THIS LINE ADDED
    dataView.beginUpdate();
    dataView.setItems(dataArray, uniqueIdFieldName)
    dataView.endUpdate();
    grid.resizeCanvas();
    grid.invalidate();  
} 
```

在我看来，这是 slickGrid 中的一个错误。setItems() 函数应该在更改行之前在内部重置选择变量，因为显然当前选择在重置项目后将是无效的，并且不这样做会使整个选择模型处于错误状态。

# doctype - 文档类型更改

> ID：14963976
> 
> 赞同：0
> 
> 时间：2013-02-19T17:42:50.600
> 
> 标签：doctype

在源代码中，我的文档类型为`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">`

但是在浏览器中，查看源代码（“查看源代码”选项）时，我发现 doctype 为`<!DOCTYPE html>`. 为什么会这样？这有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:02:58.107

这些 DOCTYPE 肯定是不同的，并且在某些浏览器中会触发不同的行为。但是，它不可能即时改变。您绝对确定您对该文档所做的更改会反映在您在网站上看到的内容上吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-17T18:29:50.143

~~`<!DOCTYPE html>`无论您设置什么文档类型，Firefox 和 Chrome 始终显示在检查器和页面源中。~~

* 此浏览器错误已修复。

# ruby-on-rails - 删除迁移后如何修复rails中的数据库？

> ID：14963977
> 
> 赞同：0
> 
> 时间：2013-02-19T17:42:57.147
> 
> 标签：ruby-on-rails, heroku, rails-migrations

好的，这就是发生的事情：

1) 我需要向表中添加一列，但我没有生成迁移，而是手动编写了它。我给它的文件名似乎可以正常工作，但没有时间戳，所以事情变糟了。

2）在搞砸了很长时间之后，我更新了 schema.rb 文件，使它看起来像我想要的那样。然后我重置数据库。那很好，但是...

3）当我去运行迁移时，最后几个已经运行，所以它认为它们是重复的。所以我删除了所有的迁移，因为架构看起来很好，一切都运行良好。

4）但是现在它在我的本地机器上运行良好，但是当我尝试部署到 Heroku 时遇到了真正的问题，这似乎可以访问我的旧迁移并且否认存在明显存在的表。我已经重置了很多次。

那么，有没有什么方法可以让我重新开始使用模式而不进行迁移，让系统忘记曾经有过迁移？或者，如果我创建两个包含所有相关表数据的新迁移怎么办？

编辑：这是我从 heroku 日志中得到的。基本上它可以让我进入登录页面，但是当我尝试登录时会发生这种情况。

2013-02-19 18:27:01 +0000 2013-02-19T18:27:01+00:00 app[web.1]: 2013-02-19T18:27 开始为 89.27.92.12 获取“/home” :01+00:00 app[web.1]: MaterialsController#home 处理为 HTML 2013-02-19T18:27:01+00:00 app[web.1]: Completed 500 Internal Server Error in 26ms 2013-02 -19T18:27:01+00:00 app[web.1]: 2013-02-19T18:27:01+00:00 app[web.1]: ActiveRecord::StatementInvalid (PGError: ERROR: 关系“材料”不存在 2013-02-19T18:27:01+00:00 app[web.1]: LINE 4: WHERE a.attrelid = '"materials"'::regclass 2013-02-19T18:27:01+00 :00 app[web.1]:^ 2013-02-19T18:27:01+00:00 app[web.1]: FROM pg_attribute a LEFT JOIN pg_attrdef d 2013-02-19T18:27:01+00:00 app[web.1]: : SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull 2013-02-19T18:27:01+00:00 app[web.1]: WHERE a.attrelid = '"materials"'::regclass 2013-02-19T18:27:01+00: 00 app[web.1]: AND a.attnum > 0 AND NOT a.attisdropped 2013-02-19T18:27:01+00:00 app[web.1]: ON a.attrelid = d.adrelid AND a. attnum = d.adnum 2013-02-19T18:27:01+00:00 app[web.1]: ): 2013-02-19T18:27:01+00:00 app[web.1]: app/controllers /materials_controller.rb:11:in `get_materials' 2013-02-19T18:27:01+00:00 app[web.1]: ORDER BY a.attnumattnum = d.adnum 2013-02-19T18:27:01+00:00 app[web.1]: ): 2013-02-19T18:27:01+00:00 app[web.1]: app/controllers /materials_controller.rb:11:in `get_materials' 2013-02-19T18:27:01+00:00 app[web.1]: ORDER BY a.attnumattnum = d.adnum 2013-02-19T18:27:01+00:00 app[web.1]: ): 2013-02-19T18:27:01+00:00 app[web.1]: app/controllers /materials_controller.rb:11:in `get_materials' 2013-02-19T18:27:01+00:00 app[web.1]: ORDER BY a.attnum

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T19:48:00.450

这听起来真的很糟糕！

`PGError: ERROR: relation "materials" does not exist`明确指出架构中缺少此表。

您可以通过直接查看数据库来查看当前的迁移状态：`ActiveRecord::Base.connection.execute("SELECT * from schema_migrations").map(&:to_s)`

您还可以转储数据库并在本地查看：[https ://devcenter.heroku.com/articles/heroku-postgres-import-export](https://devcenter.heroku.com/articles/heroku-postgres-import-export)

# javascript - 一个文档中针对不同 DIV 的多种打印样式

> ID：14963978
> 
> 赞同：0
> 
> 时间：2013-02-19T17:43:05.290
> 
> 标签：javascript, jquery, css, printing

我在页面上有一个内容滑块，我想让网站访问者只打印他们单击的幻灯片的内容。我有 7 张幻灯片，其中两张在幻灯片中有一个按钮，上面写着“打印内容”。每个幻灯片内容都包含在它自己的 div 中。

我之前已经成功使用过打印特定样式表，但不确定如何为一个文档设置不同的打印规则。我可以应用某种 JavaScript 或 jQuery 吗？我是两者的新手，但愿意尝试任何事情。

[这是关于 SO 的类似问题，](https://stackoverflow.com/questions/10559777/multiple-print-stylesheets-for-sections-on-one-page)但没有答案；[这个很接近](https://stackoverflow.com/questions/2172084/multiple-print-specific-div)，但我需要维护 CSS 样式。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:47:38.347

为主要元素设置 CSS 规则：

```
@media print {
  div.main-element: display: none; 
```

然后添加另一个规则：

```
 div.main-element.print-me: display: block; 
```

现在您可以为每个内容部分添加一个“打印”按钮，并让处理程序适当地调整类：

```
 $('body').on('click', '.main-element button.print', function() {
   $('.main-element').removeClass('print-me');
   $(this).closest('.main-element').addClass('print-me');
   window.print();
 }); 
```

# php - 将关联数组与php中的简单数组进行比较

> ID：14963983
> 
> 赞同：-1
> 
> 时间：2013-02-19T17:43:18.343
> 
> 标签：php, associative-array

我有一个简单的会话数组，我将页面标题作为字符串推送到其中：

```
$_SESSION['sesArray'][] = $pageTitle; 
```

以及另一个带有页面标题和链接的预定义关联数组：

```
$assoc=array(array('title' => 'page title', 'link' => 'page link')); 
```

会话数组被标题淹没，所以我取出重复项：

```
$array1 = array_unique($_SESSION['sesArray']); 
```

我的问题是：如何将 $assoc 数组与 $array1 进行比较，以检查两者中都存在的页面标题并消除它们，最终得到另一个包含唯一标题和链接的数组？我试过使用：

```
$result= array_diff_key($assoc, $array1 ); 
```

但是确实删除了一些重复的标题，而有些则没有。

有任何想法吗？

预计到达时间数据：

```
$array1= array('Museum', 'Club'); 
$assoc= array(array('title' => 'Museum', 'link' => 'museum.php' ),
              array('title' => 'club', 'link' => 'club.php')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:24:40.980

您并没有真正做差异，因为根据定义，数组数组与标量数组没有任何共同之处。您需要做的是*根据* . 尝试这个：`$assoc``$array1`

```
$array1= array('Museum','Club');
$assoc= array(array('title' => 'Museum', 'link' => 'museum.php' ),
        array('title' => 'club', 'link' => 'club.php'));

$fn = function($arr) use ($array1) {
    return !in_array($arr['title'], $array1);
};
$result =array_filter($assoc, $fn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:05:10.403

啊，臭名昭著的技术面试问题（“比较 2 个数组并找到共同的条目”）。

尝试以下方式：

```
$ass = array_keys($assoc);

foreach($ass as $a)
{
   while (isset($_SESSION['sesArray'][$a]))
   {
     unset($_SESSION['sesArray'][$a]);
   }
} 
```

PHP 关联其元组数组的方式允许您避免此问题的丑陋 O(n^2) 复杂性。

# asp.net - 在 Visual Studio 2005 中关闭 HTML 设计器？

> ID：14963991
> 
> 赞同：1
> 
> 时间：2013-02-19T17:43:45.007
> 
> 标签：asp.net, visual-studio-2005

有没有办法在 Visual Studio 2005 中关闭 HTML 设计器？

我知道你可以告诉它直接进入源代码视图，我已经这样做了。但是，如果我在后面的代码中并且我按下`Shift + F7`进入`.aspx`页面，它会转到设计器而不是源`.aspx`代码。我从不使用设计器，因为它速度慢且不准确。我更喜欢编辑`.aspx`代码并与浏览器并排工作。

那么我可以完全关闭设计器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:47:46.427

```
Go to Tools --> Select Options

Select HTML Designer --> Uncheck HTML designer

Click OK 
```

***完成此操作后重新启动您的 Visual Studio***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T17:47:11.727

选项... 文本编辑器 > HTML/XML > 格式 取消选中 从设计切换到 HTML/XML 视图时应用自动格式

仅在源代码视图中打开 aspx 页面：右键单击某个文件，打开方式...，选择源代码编辑器，单击设置为默认值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T20:21:56.357

尝试更改组合键 Shift-F7 指向的操作。Shift-F7（如果您使用 Visual C# 2005 键盘布局）的默认值是`View.ViewDesigner`. 你可能想要`View.ViewMarkup`.

您可以在工具/自定义下的键盘窗口中重新映射功能键。单击键盘按钮。

# java - 从 json 获取数据并抛出 org.json.JSONException

> ID：14963993
> 
> 赞同：0
> 
> 时间：2013-02-19T17:43:46.633
> 
> 标签：java, php, android, json

将收到以下 json 但通过`http://localhost/getData.php`但抛出异常

```
{"username":"not found","password":null} 
```

我收到的日志

```
02-19 17:31:54.745: E/JSON Parser(5277): Error parsing data org.json.JSONException: End of input at character 0 of 
02-19 17:31:59.185: E/JSON Parse(5277): ERROR 
```

以下代码是抛出异常的方法

```
@Override
    protected String doInBackground(String... url){         

        try{
            String resultText = "";
            EditText edit = (EditText)findViewById(R.id.text_box);
            id = edit.getText().toString();
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("id",id));

            JSONObject json = jsonParser.HttpRequest("http://localhost/getData.php", params);

            resultText = json.getString("username");

        }catch(Exception e){
            e.printStackTrace();
            Log.e("JSON Parse","ERROR");
        }

        return "";
    } 
```

公共类 SimpleJsonParser {

```
public SimpleJsonParser(){

}

public JSONObject HttpRequest(String url, List<NameValuePair> params){
    InputStream input = null;
    JSONObject jObj = null;
    String json = "";
    String line;

    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    paramsString = URLEncodedUtils.format(params,"utf-8");
    url += "?" + paramsString;
    HttpGet httpGet = new HttpGet(url);

    try{

        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();

        if(statusLine.getStatusCode() == HttpStatus.SC_OK){
            HttpEntity entity = response.getEntity();
            input = entity.getContent();
            BufferedReader reader = 
                    new BufferedReader(new InputStreamReader(input));

            while((line = reader.readLine())!=null){
                builder.append(line);
            }
            json = builder.toString();

        } else {
            Log.e("JSON Parser","Failed to download file");
        }
    }catch(ClientProtocolException e){
        e.printStackTrace();
    }catch(IOException e){
        e.printStackTrace();
    }

    try {
        jObj = new JSONObject(json);
        input.close();
    } catch (Exception e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    return jObj;
} 
```

}

我的代码有什么问题吗？我提供的代码是发生异常的地方

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T17:49:20.803

从您提到的内容来看，您似乎是通过模拟器执行此操作的。

模拟器可能无法访问`http://localhost//`。您可以尝试使用环回地址或IP地址进行访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T17:52:36.193

从. *_* _ `HttpEntity`该异常告诉您在字符 0（第一个字符）处没有输入 - 您没有什么可解析的；这是一个空字符串。您的`StringBuilder`.

```
public static void main(String[] args) throws JSONException
{
    String json = "{\"username\":\"not found\",\"password\":null}";
    JSONObject  jObj = new JSONObject(json);
} 
```

不会抛出这样的异常。通常编写一个小测试用例会为您指明正确的方向。

正如其他人所提到的，这可能是因为您使用了错误的 URL 或者您的参数？既然你回来了`200 OK`，你显然是在连接到一个网络服务器并得到一个响应......我会检查一下 PHP 是否按你期望的那样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T13:12:37.520

在 simpleJarsonParser 类中，我替换了以下代码

```
HttpClient httpClient = new DefaultHttpClient(); 
```

到

```
DefaultHttpClient httpClient = new DefaultHttpClient(); 
```

它有效。当然，当我使用 xampp 和 android 模拟器时，我已将 localhost 替换为 10.0.2.2。

# php - php在延迟后显示下一个值

> ID：14963995
> 
> 赞同：-1
> 
> 时间：2013-02-19T17:43:52.077
> 
> 标签：php, arrays, delay, next, timedelay

所以我有一个数组

```
$super = 数组（8,9,10,11,12,20,21）；
```

我想在我的网站上显示一个小时的第一个值

一小时后显示第二个等等。

数组到达末尾“21”后，它会重置并开始显示第一个值

```
回声$超级[0]
```

等待一小时 $super 更改为

```
$超级[1]
```

下一小时

```
$超级[2]
```

等等。

后

```
$super == $super[21]
```

重启

```
$super 到 $super[0]
```

我可以使用 next()、current()、reset() 函数，但我不知道如何延迟循环它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T18:19:38.097

享受服务器端静态版本：

```
$super = array(8,9,10,11,12,20,21); // Array can be extended
$h = date('H') ; //Current hour. Server time

$start_day_element = 0 ; //Offset, from what element days start.

echo $super[($h + $start_day_element)%count($super)] ; 
```

但是当然，必须刷新页面才能看到更新的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:14:37.273

很尴尬

用户 javascript settimeout 使用 ajax 执行 js 函数

```
eg:setTimeout("somefun();", 5000); 
```

其中 5000 是时间延迟

```
function somefun(){
    $("#msgSpan").load("site.com/somepage.php");
} 
```

其中“#msgSpan”是显示数组值的元素的 ID

在 somepage.php 中实现相应的返回数组值的逻辑

您可以使用 php 会话来记录当前数组索引，并为每个下一个请求增加数组索引

# javascript - 查找没有扩展名的图像的 MIME 类型

> ID：14963996
> 
> 赞同：0
> 
> 时间：2013-02-19T17:43:54.363
> 
> 标签：javascript, dropbox

我正在制作一个小的 Dropbox 图像幻灯片。我使用 Dropbox Public 文件夹共享 index.html 文件，该文件在“img”文件夹中查找一堆图像以创建幻灯片。

我用以下方法做到这一点，它很hacky但有效

```
var findFiles = function(slideLimit){
  var limit = slideLimit;
  var img = [];

  for(var i = 1; i < limit; i++){

    var src = "<li class='slide slide-"+i+"'><img src='img/"+i+".png' onerror='imgError(this);''></li>"
    $('.frame ul').append(src);

  }

} 
```

这很好用，但我想提供一个不依赖于用户必须使用 .png 的解决方案。

我希望省略扩展可以在 Dropbox 上工作，但结果不是：

```
 var src = "<li class='slide slide-"+i+"'><img src='img/"+i+"' onerror='imgError(this);''></li>" 
```

我一直在绞尽脑汁，理想情况下我想要

```
if( mimeType = png)
   i + '.png'
else if (mimeType = gif)
   i + '.gif'
etc 
```

有点卡住了解决方案。有人有什么好主意吗？可能需要我采取不同的方向......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:16:43.707

**最好的方法，让用户告诉你扩展名**

```
var findFiles = function(slideLimit, ext){
    var limit = slideLimit,
        img = [],
        lis = [];
    ext = ext || "png";   
    for (var i = 1; i < limit; i++) {
        lis.push("<li class='slide slide-"+i+"'><img src='img/"+i+"."+ext+"' onerror='imgError(this);''></li>");
    }
    $('.frame ul').append(lis.join(""));
} 
```

**ping 服务器以获取文件，缺点是需要时间来继续访问服务器以查看文件是否存在**

```
var findFiles = function(slideLimit){
    var limit = slideLimit,
        img = [],
        lis = [],
        extList = ["png","gif"];

    function testExt () {
        var ext = extList.shift();
        if (ext) {
            var img = new Image();
            img.onload = function () {
                load(ext);
            };
            img.onerror = testExt;
            img.src="img/1." + ext;
        }
    }

    function load (ext){
        for (var i = 1; i < limit; i++) {
            lis.push("<li class='slide slide-"+i+"'><img src='img/"+i+"."+ext+"' onerror='imgError(this);''></li>");
        }
        $('.frame ul').append(lis.join(""));
    }

    testExt(); 
} 
```

[注意两个代码片段都未经测试，在编辑器中写在这里]

# spring-mvc - 使用 Spring MVC 的 URL 映射问题

> ID：14963997
> 
> 赞同：0
> 
> 时间：2013-02-19T17:44:06.090
> 
> 标签：spring-mvc, web.xml, url-mapping

我有一个非常基本的设置，我正在尝试开始工作。

**web.xml**

```
<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/site/*</url-pattern>
</servlet-mapping>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/mvc-dispatcher-servlet.xml</param-value>
</context-param> 
```

**mvc-调度程序-servlet.xml**

```
<context:component-scan base-package="com.blabla.controller" />
<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver"
    p:prefix="/WEB-INF/pages/" p:suffix=".jsp"
    p:viewClass="org.springframework.web.servlet.view.JstlView" /> 
```

**在控制器中**

```
@Controller
@RequestMapping(value = "/site")
public class SearchController {

@RequestMapping(value = "welcome", method = RequestMethod.GET)
public String test() {
       return "test";
    } 
```

这是我遇到的问题：我想在我的 web.xml 中将**/site/***写为 url-pattern，但是当我这样做时，我得到了

警告：在名称为“mvc-dispatcher”的 DispatcherServlet 中未找到带有 URI [/site/welcome] 的 HTTP 请求的映射

当我完整编写**/site/welcome**时，一切正常，但我不想这样做，因为我不想手动将每个页面添加到 web.xml

当我将 **“/ *”**写 为 url-pattern 时，我收到错误消息：

```
 WARNING: No mapping found for HTTP request with URI [/WEB-INF/pages/test.jsp] in DispatcherServlet with name 'mvc-dispatcher' 
```

我想这是有道理的，因为 jsp 的位置包含在模式中。

那么你是怎么做的：如果没有我刚才遇到的问题，你怎么能在你的 url 模式中足够模糊呢？

# android - gson.fromJson() 期间的调用目标异常

> ID：14963999
> 
> 赞同：2
> 
> 时间：2013-02-19T17:44:16.273
> 
> 标签：android, reflection, gson

我正在写一个做很多事情的图书馆。

情况：在我的 android 项目 AAA 中，我包含库 XXX 并派生自抽象类 A（位于库 XXX 中）。

当我尝试调用库 XXX 中的派生类时，GSON 找不到该类（在调试器中我可以看到正确的类 - 之前已提供给工厂）

Gson`InvocationTargetException`在解决过程中停止。如果它是库 XXX 的一部分，则完全相同的类确实可以工作

JSON：

```
 {
      "subtext":"super subtext!!!",
      "myText":"hello 1",
      "id":"ff8081813cf34f79013cf34fba750001",
      "myAAA":false, 
      "version":0
    } 
```

代码：

```
 // code to invoke (in library XXX)
  public static A fromJson(String gsonString,
        Class clazz) {
    A myAbstractClass = null; // A1 is a subclass of A
    try {
        Gson gson = new Gson();
        myAbstractClass = gson.fromJson(gsonString, clazz);
    } catch (Exception e) {

    }
    return myAbstractClass;

} 
```

我该如何解决这个问题？

编辑：堆栈跟踪

```
02-19 17:58:24.442: E/AndroidRuntime(4463): FATAL EXCEPTION: main
02-19 17:58:24.442: E/AndroidRuntime(4463): java.lang.StackOverflowError
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:371)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:355)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:117)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)
02-19 17:58:24.442: E/AndroidRuntime(4463):     at com.google.gson.Gson.getAdapter(Gson.java:353) 
```