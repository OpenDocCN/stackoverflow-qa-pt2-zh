# StackOverflow 问答 14478000-14478999

# jsp - 无法在 jsp 页面的非 stuts 标记中使用 bean:define 变量

> ID：14478000
> 
> 赞同：1
> 
> 时间：2013-01-23T10:57:38.167
> 
> 标签：jsp, jstl, struts-1

我可以在 scriptlet 中使用“acctNum”作为 <%=acctNum %> 并在标记内的语句块中使用，如下面的代码中所述。

```
<logic:greaterEqual name="childArraySize" value="1">
 <bean:define id="acctNum" name="overviewSel" property="accountNumber" type="String"/>
 <logic:equal name="accountNumber" value="<%=acctNum %>">
    <bean:define id="STItemIndex" name="ItemIndex"/>
    <bean:define id="overviewCh" name="overviewSel" type="com.beans.statements.StatementAccount"/>
    <bean:define id="arraySize"  name="childArraySize"/>
    <bean:define id="statementAccountTypeDesc" name="statementAccountTypeDescSel"/>
  </logic:equal>    
</logic:greaterEqual> 
```

但是我无法在代码中的任何地方`</logic:greaterEqual>` 使用它，因为它在脚本中使用它时给我间歇性错误，即在里面`<% --- %>`，我得到' *acctNum 无法解决*'

但如果我在任何 struts 标签中使用它，它就可以工作`<bean:write name="acctNum">`

请让我知道是否有解决此问题的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:08:42.860

我能够解决这个问题。

我发现所有 stuts 标记都可以获取值，但是如果我使用的是 scriptlet/JSTL 标记，我将无法获取值，

为此，我必须做一个解决方法，并`<%pageContext.getAttribute("acctNum") %>`在 scriptlet 和 JSTL 的情况下像这样使用它`<c:out value="pageContext.acctNum">`

# arduino - 如何从 URL 读取字符串到 Arduino（网络服务器），而不仅仅是一个字符？

> ID：14478011
> 
> 赞同：1
> 
> 时间：2013-01-23T10:57:58.327
> 
> 标签：arduino

这是示例代码：

在此代码中，它检测美元符号，然后识别字符，1、2、3 等。如果输入，`http://x.x.x.x/$1`- 意思是，它选择块条件 1。

等等。

我需要更改此代码，以便可以读取字符串并将其存储在变量中。

也许我可以拥有`http://x.x.x.x/$25`或 45 美元或 100 美元等。

```
void connection()
{
    EthernetClient client=server.available();

    if (client)
    {
        boolean currentLineIsBlank=true;

        while (client.connected()) {
            if (client.available()) {
                char c = client.read();

                if (incoming && c==' ')
                {
                    incoming=0;
                }
                if (c=='$')
                {
                    incoming=1;
                }
                //Checks for the URL string $1 or $2 and so on.
                if (incoming==1)
                {
                    if(c=='1')
                    {
                        //Insert something
                    }
                    if(c=='2')
                    {

                    }
                    if(c=='3')
                    {
                        redAll();
                    }
                }
                if(c=='\n')
                {
                    currentLineIsBlank=true;
                }
                else if(c!='\r')
                {
                    currentLineIsBlank=false;
                }
            }
        }
        delay(1);
        client.stop();
    }
} 
```

我应该怎么办？让 Arduino 读取字符串。我应该用这段代码改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:21:49.093

Adafruit 的[SDWebBrowse](https://github.com/adafruit/SDWebBrowse)示例是我发现的最典型的示例。在那里，它将字符构建为字符串以供以后处理。

```
 ...
  if (client.available()) {
      char c = client.read();

      // If it isn't a new line, add the character to the buffer
      if (c != '\n' && c != '\r') {
          clientline[index] = c;
          index++;
          // Are we too big for the buffer? Start tossing out data
          if (index >= BUFSIZ)
              index = BUFSIZ -1;

          // Continue to read more data!
          continue;
      }

      // Got a \n or \r new line, which means the string is done.
      clientline[index] = 0;

      // Print it out for debugging.
      Serial.println(clientline);
  ... 
```

我确实在以太网库本身中读过，两者都有

```
virtual int read(); 
```

和

```
virtual int read(uint8_t *buf, size_t size); 
```

成员函数可用。但是，指针字符串的所有示例都仅显示了[UDP](http://en.wikipedia.org/wiki/User_Datagram_Protocol)的情况，而不是[TCP](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)的情况。我怀疑这可能与 UDP 的无状态有关。

不知道客户端缓冲区中的内容以及读取它的长度的实用性可能是预防性原因，我没有看到任何在 TCP 上使用它的示例。在哪里尝试可能很简单。

实际上，`client.available()`返回接收到的大小，所以应该可以：

```
...
int _available = client.available();
if (_available> 0) {
  client.read(clientline, _available);
... 
```

注意两者都创建一个字符字符串。不要与[String](http://arduino.cc/en/Reference/StringObject)类混淆。

# java - Java：我的 paintComponents() 方法永远不会被调用

> ID：14478013
> 
> 赞同：0
> 
> 时间：2013-01-23T10:58:02.580
> 
> 标签：java, swing, graphics, jpanel, paintcomponent

这是我的代码。我有 4 个类，一个抽象类 (GeoShape)，一个扩展 GeoShape 的 Rectangle 类，一个包含我的 GeoShape 并尝试绘制它们的 GraphicsPanel，以及一个 Launcher 类。

GeoShape.java

```
public abstract class GeoShape
{
    protected Point p;
    protected int width, height;

    public GeoShape(Point p, int width, int height)
    {
        this.p = p;
        this.width = width;
        this.height = height;
    }

    public void drawItself(Graphics g)
    {
        g.setColor(Color.BLACK);
    }

    // Getters and setters...
} 
```

矩形.java

```
public class Rectangle extends GeoShape
{
    public Rectangle(Point p, int width, int height)
    {
        super(p, width, height);    
    }

    @Override
    public void drawItself(Graphics g)
    {
        super.drawItself(g);
        g.drawRect((int)p.getX(), (int)p.getY(), width, height);
    }
} 
```

图形面板.java

```
public class GraphicsPanel extends JPanel
{
    private static final long serialVersionUID = 1L;
    private ArrayList<GeoShape> list;

    public GraphicsPanel() 
    {
        list = new ArrayList<GeoShape>();
    }

    @Override
    public void paintComponents(Graphics g) 
    {
        super.paintComponents(g);
        for(int i = 0 ; i < list.size() ; i++) list.get(i).drawItself(g);
    }

    public void addShapeInList(GeoShape s)
    {
        list.add(s);
    }
} 
```

启动器.java

```
public class Launcher extends JFrame
{
    private static final long serialVersionUID = 1L;
    private GraphicsPanel panel;

    public Launcher()
    {
        panel = new GraphicsPanel();
        panel.addShapeInList(new Rectangle(new Point(3,9),120,20));
        panel.repaint();

        this.setTitle("Test");
        this.setContentPane(panel);
        this.setDefaultCloseOperation(EXIT_ON_CLOSE);
        this.setSize(700, 500);
        this.setVisible(true);
    }

    public static void main(String[] args) 
    {
        new Launcher();
    }
} 
```

框架中没有任何反应......感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:02:35.970

尝试将其替换为`paintComponent`而不是`paintComponents`

```
public void paintComponent(Graphics g) 
{
    super.paintComponent(g);
    for(int i = 0 ; i < list.size() ; i++) list.get(i).drawItself(g);
} 
```

# vb.net - Winform 中的 GDI+ 中出现一般错误

> ID：14478016
> 
> 赞同：0
> 
> 时间：2013-01-23T10:58:09.100
> 
> 标签：vb.net

我在 Windows 应用程序中遇到问题。我想更新一张图片，但它会产生异常：
“ *GDI+ 中发生一般错误*”

这是我的代码：

```
Dim ms As New MemoryStream
PicMeter.Image.Save(ms, PicMeter.Image.RawFormat) 'here exception occurs
Dim arr As Byte() = ms.GetBuffer()
ms.Close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:17:56.200

改变

```
PicMeter.Image.Save(ms, PicMeter.Image.RawFormat) 
```

至

```
PicMeter.Image.Save(ms, ImageFormat.RawFormat) 
```

如果这没有帮助，是否有助于创建新图像并从那里保存？如此处建议：[http ://www.dreamincode.net/forums/topic/49392-pictureboximage-save-error/](http://www.dreamincode.net/forums/topic/49392-pictureboximage-save-error/)

```
Dim ms As New MemoryStream
Dim bitmp As New Bitmap(PicMeter.Image)
bitmp.Save(ms, ImageFormat.RawFormat)
Dim arr As Byte() = ms.GetBuffer()
ms.Close() 
```

# java - 允许重复、维护插入顺序并允许删除和插入的结构

> ID：14478019
> 
> 赞同：0
> 
> 时间：2013-01-23T10:58:20.823
> 
> 标签：java, list, replace, duplicates, insertion

我正在寻找一种允许重复并维护插入顺序的数据结构，以便如果给定的文件输入为：`a + a + b = c`

因此，一旦正确拆分，我将得到：`{a,+,a,+,b,=,c}`

此数据结构还需要允许以正确的顺序删除和插入，例如，如果我将**a**替换为**d**，我应该得到`{d,+,d,+,b,=,c}`.

最后，该结构还必须能够识别哪些项目在某个项目之前或之后。例如，直接在**=**之前的项目是**b**并且直接在之后是**c**。

我知道列表允许重复，并且一些列表保持插入顺序，但我不确定哪个可以让我实现我的目标。

如果您知道可以实现上述所有功能的结构，请提供创建此类结构的语法。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:03:36.523

似乎可以满足您的要求，对于示例用法，请参阅：`ArrayList`http [://www.java2s.com/Code/Java/Collections-Data-Structure/BidirectionalTraversalwithListIterator.htm](http://www.java2s.com/Code/Java/Collections-Data-Structure/BidirectionalTraversalwithListIterator.htm)`ListIterator`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:40:21.923

假设性能足以引起关注，不使用简单的 Java`List`实现之一（因为您想避免在替换期间迭代整个列表以搜索项目），那么您将需要维护两个数据结构，一个用于跟踪令牌的顺序和一个作为用于替换的令牌位置的索引。

所以，类似（我没有通过编译器运行它，所以期待拼写错误）：

```
class TokenList
{
  List<String> tokens;
  Map<String,List<Integer>> tokenIndexes= new HashMap<String,List<Integer>>();

  TokenList(Iterable<String> tokens)
  {
    this.tokens = new ArrayList<String>(tokens);
    for (int i = 0; i < this.tokens.size(); i++)
    {
      String token = this.tokens.get(i);
      List<Integer> indexes = tokenIndexes.get(token);
      if (indexes == null)
      {
        index = new List<Integer>();
        tokenIndexes.put(token, indexes);
      }
      indexes.add(index);
    }
  }

  void replace(String oldToken, String newToken)
  {
    List<Integer> indexes = tokenIndexes.remove(oldToken);
    if (indexes == null)
      throw new IllegalArgumentException("token doesn't exist: " + oldToken);
    for (int index : indexes)
      tokens.set(i, newToken);
    tokenIndexes.put(newToken, indexes);
  }
} 
```

这种结构假设令牌一旦创建就不会改变索引（`tokenIndex`地图需要重新创建，这是一个相对昂贵的操作）。

# ios - 应用程序更新支持 iPhone 5 和白条问题

> ID：14478025
> 
> 赞同：0
> 
> 时间：2013-01-23T10:58:50.037
> 
> 标签：ios, uitabbarcontroller, updates, iphone-5, strip

我有一个必须更新的现有应用程序，我决定在上面支持 iPhone 5。为此，我制作了一个新的启动画面并检查了我所有的 xib 以适应新的尺寸。

随着更新的发布，我想检查一下。但是当我更新我已经安装的应用程序时，我的 iPhone 4 底部有一个大的白色条带： ![已在 iPhone 4 上安装应用程序然后更新](../Images/3687195e1d87fd3022e5b85e6ce4bd0c.png)

对于 iPhone 4 或 5 上新安装的应用程序来说没关系，tabBar 位于屏幕底部。

除了这个白色条带外，该应用程序功能齐全。

tabBarController 在我的 MainWindow.xib 中定义： ![tabBarController 定义](../Images/ce947af6f291e26d7c8b34ce54e6cd2d.png)

有什么我错过的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:11:14.997

您是否在界面构建器中使用自动布局（在文件检查器下）？当我更新我的应用程序以支持 iPhone 5 时，我的应用程序遇到了类似的问题。执行全新安装对我来说是个窍门，但同样地，这对现有用户不起作用。取消选择此选项并使用尺寸检查器对齐对象（和/或）使用自动调整大小调整它们的大小。

# iphone - 如何在iphone中制作具有圆角的自定义UIview？

> ID：14478029
> 
> 赞同：-6
> 
> 时间：2013-01-23T10:58:57.640
> 
> 标签：iphone, ios, objective-c, xcode, uiview

我想制作具有圆角的自定义 UIview。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:05:25.350

为此，您需要导入 Quartz 框架。您还可以为该视图设置边框颜色、阴影颜色、角宽度等。

```
#import <QuartzCore/QuartzCore.h> 
```

并尝试此代码。

```
 [self.YourView.layer setCornerRadius:1.0];
        [self.YourView.layer setBorderColor:[[[UIColor grayColor] colorWithAlphaComponent:0.5] CGColor]];
        [self.YourView.layer setBorderWidth:1.0];
        [self.YourView.layer setShadowColor:[UIColor lightGrayColor].CGColor]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:09:52.407

**添加此框架**

```
#import "QuartzCore/QuartzCore.h" 

UIView *view = [[UIView alloc] initWithFrame:CGRectMake("As You Need")];
    view.backgroundColor = [UIColor whiteColor];
    view.layer.cornerRadius = 15.f; // set as u need
    view.layer.borderColor = [UIColor grayColor].CGColor; // set color as u need
    view.layer.borderWidth = 2.f; // set as u need 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:03:50.210

首先将 QuartzCore 框架添加到您的项目中。

然后将其导入您要设置视图角半径的类中，

```
#import <QuartzCore/QuartzCore.h> 
```

现在在 .h 文件中创建一个 IBOutlet 到 UIView（假设您在 XIB 中添加）

```
 IBOutlet UIView *backViewGroupName; 
```

在您的 .m 文件中，将 sorner 半径设置为您的视图

```
backViewGroupName.layer.cornerRadius=10.0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T11:07:26.507

导入 QuartzCore 框架

```
#import <QuartzCore/QuartzCore.h> 
```

然后这样做

```
View.layer.borderWidth = 3;
View.layer.cornerRadius = 10;
View.layer.masksToBounds = YES; 
```

不要忘记绑定口罩=是的。

# knockout.js - 如何将 Knockout JS attr 绑定值作为变量传递给 ajax post 方法

> ID：14478031
> 
> 赞同：1
> 
> 时间：2013-01-23T10:59:04.910
> 
> 标签：knockout.js

我的页面中有 2 个淘汰视图模型。我想将我的第一个视图模型的值发送到一个 ajax 帖子，该帖子获取数据并根据我从第一个视图模型传递的值将其添加到我的第二个视图模型中。

我想要做的是将订单 ID 作为变量传递给我的第二个 Ajax 帖子，以便我可以获得特定订单号的订单详细信息。

我数据绑定这样的标签：

```
<a data-bind="attr: { href: Url, title: Detail }, text: OrderNumber"></a> 
```

这是第一个 ViewModel 的一部分：

```
 var OrderDS = function (data) {
      var self = this;
      self.OrderNumber = ko.observable(data.OrderNumber);
      self.Url = ko.observable("#");
      self.Detail = ko.observable("Product Details For This Order");
     } 
```

我想将 Observable OrderNumber 作为变量传递给我的辅助 Ajax Post：

```
 $.ajax({
            url: "AccountsReceivible.aspx/GetOrderDetails",
            data: '{}', //How Do I ADD the Selected Value Here???
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "JSON",
            timeout: 10000,
            success: function (Result) {
                var MappedDetail =
              $.map(Result.d,
             function (item) {
                 return new OrderDetailDS(item);
             }
               );
                self.OrderDetail(MappedDetail);

            },
            error: function (xhr, status) {
                alert(status + " - " + xhr.responseText);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:04:47.260

您不必将 JSON 编写为字符串，只需提供一个真实的 JS 对象：

```
data : { orderNumber : self.OrderNumber() } 
```

（假设这`self`是视图模型）

*编辑：*

对于视图模型之间的关联，您将不得不关心自己。在你的情况下：

```
var OrderDetailViewModel = function (OrderDetail) {
    var self = this;
    var orderViewModel = OrderViewmodel; 
```

现在在我的第一个代码片段中`self` 替换为。`orderViewModel`

# visual-studio-2010 - Visual Studio nuget 包管理器可以排除预发布包吗？

> ID：14478033
> 
> 赞同：2
> 
> 时间：2013-01-23T10:59:09.417
> 
> 标签：visual-studio-2010, entity-framework, nuget, t4scaffolding

我正在使用一个包从 Razor 视图调用者 MvcMailer 生成电子邮件。这个包依赖于 T4Scaffolding (>= 1.0.7)。T4Scaffolding 又依赖于 EntityFramework (>= 4.1.10311.0)。

这应该不是问题，因为我的项目中有 Entity Framework 5.0.0 nuget。

出于某种原因，除了我现有的 EF nuget 之外，Entity Framework 6.0.0-alpha1 (Prerelease) 作为 T4 脚手架的依赖项被导入。这搞砸了 EF 迁移命令，因为包管理器控制台对它应该使用哪个版本的 EF 感到困惑。

我不确定问题出在哪里。我如何告诉 T4Scaffolding 它已经具备所需的依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:15:02.240

解决了...

Entity Framework 5.0.0 仅安装在其中一个项目中。当我尝试将 MvcMailer 添加到 Tests 项目（没有 EF 引用）时，nuget 得到了所有依赖项的最新版本，在 EF 的情况下是 Alpha。

所以解决了我的问题，但将预发布包作为依赖项导入似乎仍然是错误的......

# python - 一种用存根替换实际组件的方法

> ID：14478034
> 
> 赞同：1
> 
> 时间：2013-01-23T10:59:16.657
> 
> 标签：python, unit-testing, python-3.x

我在安排代码以使其易于测试时遇到问题。我的代码中有 2 个主要模块：缓存生成器和修改器生成器，两者的复杂程度大致相同。Modifier builder 用于缓存生成器的子对象的方法之一。

我已经拥有完整的测试套件，其中涵盖了修饰符生成器的功能。我想添加涵盖缓存生成器所有功能的测试，但为了显着降低这些测试的复杂性，我需要用一些存根替换修饰符生成器，​​它根据我传递给它的参数返回预定义的“罐头数据”。

我的实际问题在于选择用存根替换真实修饰符生成器的方式，这在代码方面看起来不错，并且仍然便于测试。看看下面的代码：

来自[GitHub](https://github.com/DarkFenX/Eos/tree/f483362bb31282a790787f96bea992ebbffede17/data/cacheGenerator)的代码：

缓存生成器/生成器.py：

```
class CacheGenerator:
    def __init__(self, logger):
        ...
        self._converter = Converter(logger)

    def run(self, dataHandler):
        ...
        data = self._converter.convert(data) 
```

缓存生成器/转换器.py：

```
class Converter:
    ...

    def convert(self, data):
        ...
        self._buildModifiers(data)

    def _buildModifiers(self, data):
        ...
        builder = ModifierBuilder(data['expressions'], self._logger)
        ...
           modifiers, buildStatus = builder.buildEffect(...) 
```

用存根替换修饰剂生成器的方法是什么？我想至少存在以下几个变体：

1.  代码更改：在转换器的**init** () 中实例化修饰符生成器并将其实例分配为对象属性。对于测试 - 创建真正转换器的子类，覆盖**init** ()，我们用存根替换真正的修饰符生成器，​​然后子类化缓存生成器，用类似的方式用子类替换真正的转换器。但是，这种方法需要修改修饰符生成器：我需要从**init** () 方法中拆分数据加载，这是不可取的
2.  与 1) 类似，但将与修饰符生成器一起使用的 Converter()._buildModifiers() 方法的部分移动到单独的方法中，以使它们易于被覆盖
3.  **与 1) 类似，但在清洁器的init** ()中仅指定修饰符生成器类（而不是实例）。这使我们能够保持修饰符生成器原样。
4.  从缓存生成器的最顶部传递修饰符构建器类（以便我们需要替换以进行测试的类可以通过缓存生成器实例化来控制）
5.  是否存在任何其他变体？像一些进口魔法？

1-4 之间的一些变体看起来可以接受，但理想情况下我希望代码尽可能接近（与原始代码），所以我正在研究存根子对象的替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T20:49:04.560

当我需要在测试中模拟/伪造对象时，我使用[Fudge](http://farmdev.com/projects/fudge/)。

在您的情况下，我建议使用[patched_context](http://farmdev.com/projects/fudge/api/fudge.patcher.html#fudge.patcher.patched_context)。有了它，您可以修补对`Converter`方法的调用。

然后你可以这样做：

修补调用`_converter.convert`

测试.py：

```
from cacheGenerator.generator import CacheGenerator
from cacheGenerator.converter import Converter
from fudge import patched_context

import unittest

class Test_cacheGenerator(unittest.testCase):

    def test_run(self):

        def fakeData(convertself, data):
            # Create data to be returned to 
            # data = self._converter.convert(data)
            fakedata = ...
            return fakedata

        # We tell Fudge to patch the call to `Converter.convert`
        # and instead call our defined function 
        cache = cacheGenerator(...)
        with patched_context(Converter, 'convert', fakeData)
            cache.run() 
```

`self._buildModifiers`或者您可以修补对inside的调用`Converter`：

```
def test_run(self):
        cache = cacheGenerator(...)

        def fakeBuildModifiers(convertself, data):
            # set up variables that convert._buildModifiers usually sets up
            convertself.modifiers = ...
            convertself.buildStatus = ...

        # We tell Fudge to patch the call to `Coverter._buildModifiers`
        # and instead call our defined function 
        cache = cacheGenerator(...)
        with patched_context(Converter, '_buildModifiers', fakeBuildModifiers):
            cache.run() 
```

或者，您也可以使用[Fudge fake object](http://farmdev.com/projects/fudge/api/fudge.html#fudge.Fake)。

```
from fuge import Fake

...
    def test_run(self):
        cache = cacheGenerator(...)

        fakeData = ...
        fakeConverter = Fake('Converter').provides('convert').returns(fakeData)

        # Fake our `Converter` so that our any calls to `_converter.convert` are
        # made to `fakeConverter.convert` instead.
        cache._converter = fakeConverter

        cache.run() 
```

在最后一种情况下，由于您要修补整个`_converter`对象，因此如果您要调用任何其他方法，则还需要修补它们。

```
(Fake('Converter'.provides('convert').returns(fakeData)
                 .provides(....).returns()
                 .provides(....).returns()
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:11:40.713

我通常更喜欢 2，因为它使意图清晰，是一个小的变化，它可能对其他重用我的工作的代码有用。

或者，查看[依赖注入](https://stackoverflow.com/questions/156230/python-dependency-injection-framework)或为您构建s的[工厂。](http://code.activestate.com/recipes/576687-maintenance-free-factory-design-pattern/)`ModifierBuilder`

最后，您可以通过导入模块然后为符号分配新值来使用[猴子补丁：](https://stackoverflow.com/questions/3765222/monkey-patch-python-class)

```
import cacheGenerator.converter
cacheGenerator.converter.ModifierBuilder = ... 
```

当然，这会更改每个人的符号（即也适用于所有其他测试），因此您需要保存旧值并在测试后恢复它。

如果你对这个解决方案感到不好/不安，那么你是对的：这是一个绝望的措施。如果您确实无法更改原始代码，请将其用作最后的手段。

# python - Python：一台计算机中的 IDE，另一台计算机中的解释器

> ID：14478041
> 
> 赞同：4
> 
> 时间：2013-01-23T10:59:36.040
> 
> 标签：python, raspberry-pi

我想知道是否可以在一台计算机上安装 Python 解释器并在另一台计算机上将 IDE“链接”到该解释器，即：我想为我的 Raspberry Pi 编写一些脚本，但它是如果使用 X Window 太慢，如果在“命令行”模式下工作（打开 nano、编辑、保存、关闭、尝试、调试等）太乏味。

因此，我的想法是在我的笔记本电脑中安装 IDE，在我的 Raspberry Pi 中安装脚本和链接器。

是否可以？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:02:26.373

PyCharm[支持远程调试](http://www.jetbrains.com/pycharm/webhelp/remote-debugging.html)。

PyDev[还支持远程调试](http://pydev.org/manual_adv_remote_debugger.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:34:32.120

也许 git hooks 会很好地适应？我正在使用它在我的家庭服务器上进行某种持续集成。

# java - JDOM getchildren() 只返回一个元素

> ID：14478042
> 
> 赞同：0
> 
> 时间：2013-01-23T10:59:40.677
> 
> 标签：java, element, jdom

XML:

```
<root>
    <foz>
        ....
        <row>
            <column>PD1</column>
            <column>PD2</column>
            <column>PD3</column>
        </row>
        ...
    </foz>
</root> 
```

爪哇：

```
 FileInputStream fin;  
      fin = new FileInputStream(zip); //zip is a File Object
      ZipInputStream zin = new ZipInputStream(fin);
      ZipEntry ze = null;
      SAXBuilder builder = new SAXBuilder();
        Document document = (Document)builder.build(zin);

        Element rootNode = document.getRootElement();
         List list = rootNode.getChildren("foz");

        for ( int i = 0; i < list.size(); i++ ) {
         Element node = (Element) list.get(i);

         List li = node.getChildren("row");       
         for ( int j = 0; j < li.size(); j++ ){
            Element nodePda = (Element) li.get(j);
            String id = nodePda.getChildTextTrim("column");
            ...
         }
        }
      ... 
```

我不明白为什么这句话“rootNode.getChildren("foz");” 仅返回列表“li”中的一个元素，返回 PD1 但不返回 PD2 和 PD3 值。有谁能够帮我？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:38:33.103

JDOM 似乎在做正确的事情...在您的示例*中*，根节点只有一个子“foz”，因此 rootnode.getChildren("foz") 返回一个元素的列表。

然后，您使用那个 foz Element，并（成功地）获得所有“行”子项。现在，对于每个“行”元素，您调用 getChildText("column") 方法。这将始终找到名为“column”的第一个子元素并返回其文本值，因此，您仅获得值“PD1”。在这里查看它的文档：[getChildText(String)](http://jdom.org/docs/apidocs/org/jdom2/Element.html#getChildText%28java.lang.String%29)反过来在这里引用：[getChild(java.lang.String)](http://jdom.org/docs/apidocs/org/jdom2/Element.html#getChild%28java.lang.String%29 "得到孩子（字符串）")

底线是 JDOM 正在做你要求它做的事情。

你应该做的是：

*   升级到 JDOM 2.x - 这将有助于值的转换，而且它更快、更新更多，并且得到更好的支持。
*   在行元素内使用另一个循环并调用 getChildren("column")，并获取每个“列”子元素的文本。

罗尔夫

# oracle - 是否可以在 DataWindow 查询中使用“WITH”子句？

> ID：14478052
> 
> 赞同：2
> 
> 时间：2013-01-23T11:00:07.287
> 
> 标签：oracle, powerbuilder, datawindow, with-clause

我在 PB10.5 应用程序中有一个 DataWindow，它运行良好，直到我在`WITH`后面的 SQL 查询的顶部添加一个子句。查询画家接受它作为有效的语法，如果我手动检索 DataWindow 画家中的数据，它也可以在那里完美地工作。当运行检索始终返回 -1 的应用程序时，问题就出现了。谁能告诉我为什么会发生这种情况以及我能做些什么来防止它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:37:09.810

您可以在返回之后查看返回的内容`sqlca.sqlerrtext`（假设当前对象事务是默认的`sqlca`，您可能需要对其进行调整）应该有所帮助。`-1``retrieve()`

您还可以在 DW 事件中放置一个断点，`dberror()`以查看这里是否有一些有用的东西以防出错。

# jquery - 如何修复 Firefox 的 div 覆盖？

> ID：14478054
> 
> 赞同：0
> 
> 时间：2013-01-23T11:00:11.687
> 
> 标签：jquery, css

我有[这个jsfiddle](http://jsfiddle.net/TzQ95/1/)，我在桌子上放了一个“光标”div。`left`函数通过操作 CSS 属性、`top`和`width`来移动光标`height`。

在 Chrome 24 和 MSIE 9.0 中，光标完全覆盖了单元格的红色边框，并在单元格之外延伸了一个像素（因此光标在单元格的边界上绘制并泄漏到所有相邻的单元格中，它不会泄漏*到*单元格中）。

在 Firefox 19.0 中，光标向下/向左移动一个像素。

如何修复大多数浏览器的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:28:18.197

```
@-moz-document url-prefix() { 
 #cursor {
     margin-left:-1px !important;
     margin-top:-1px !important;
  }
} 
```

[在你的jsfiddle](http://jsfiddle.net/TzQ95/5/)中测试过

在 Opera 中修复（如果你需要）用户这样的 hack：

```
@media all and (-webkit-min-device-pixel-ratio:10000), not all and (-webkit-min-device-pixel-ratio:0) {
#cursor {
    property:value;
}
} 
```

希望有所帮助

# php - 在 JSON 的响应对象上调用 Ajax

> ID：14478061
> 
> 赞同：3
> 
> 时间：2013-01-23T11:00:31.287
> 
> 标签：php, jquery, json, cakephp

我正在使用来自 json 的 ajax 调用。我从 ajax 调用中调用酒店列表，但现在我必须调用特定酒店的价格。请支持。

酒店列表代码如下：
HTML

`<td style="color: #993300"><strong>Add Services<input name="add-service" id="add-service" type="button" value="+" style="background-color: #993300; color: #FFFFFF;" /></strong></td>`

JQuery 调用 ajax 获取酒店列表：

`$('#cmb_service').bind('change', function(){`

```
 var value = $(this).val();
        var destination = $( "#destination" )
        $.ajax({
                type : 'POST',
                url : '../enquiries/getpricebyajax',
                dataType : 'json',
                data: {
                        service : value,
                        destno : destination.val()
                },
                success : function(data) {
                       $('#waiting').hide(500);
                       $('#divserviceprovider').text('');
                       $('#divserviceprovider').append(data.msg);
                       $('#divserviceprovider').show(500);
                       if (data.error === true)
                            $('#divserviceprovider').show(500);
                },
                error : function(XMLHttpRequest, textStatus, errorThrown) {
                        $('#waiting').hide(500);
                        $('#divserviceprovider').removeClass().addClass('error')
                            .text('There was an error.').show(500);
                        $('#divserviceprovider').show(500);
                }
        });
        return false;
});` 
```

酒店列表响应的 PHP 代码如下：

`function getpricebyajax()`

```
{
            $str="";$substr="";
            if(!empty($_POST['service']))
                {
                    switch ($_POST['service']) {
                        case "3":
                            {
                                $rshotels=$this->Enquiry->query("SELECT id, name FROM hotels where destination_id=".$_POST['destno']);
                                foreach($rshotels as $hotel){
                                        $substr.='<option value="'.$hotel['hotels']['id'].'">'.$hotel['hotels']['name'].'</option>';
                                }
                                $str.= '<select id="cmb_hotel" name="cmb_hotel">'.$substr.'</select>';
                                $str.= '<div id="divhotel_details"></div>';
                            }
                            break;
                        default:
                            break;
                    }
                    $return['error'] = true;
                    $return['msg'] = $str;
                }
            exit(json_encode($return));
    } 
```

`

我直接将html的代码粘贴到div中。它很好地显示了酒店列表。但是选择“divhotel_details”的代码是什么。当我点击 divhotel_details 时，我必须再次调用 ajax 来生成该酒店的价格。

请给我建议。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:03:26.197

您可以在这里查看调用 json 服务的正确方法:) - [https://rvieiraweb.wordpress.com/2013/01/21/sumption-webservice-net-json-using-jquery/](https://rvieiraweb.wordpress.com/2013/01/21/consuming-webservice-net-json-using-jquery/)

编辑：

```
<script>

function AjaxCall(){
  var hotel_val = $("#ddl_hotel").val();

   //do service ajax call passing the hotel val 

   success: function(response) {
     $("#display_info").empty();
     //this 
     $("#display_info").append(response.Yourfields);
     //or LOOP and show in div
   }, 
   error: function(response) {
       $("#display_info").append("No info for this hotel");
   }
}
</script>

<select id="ddl_hotel" onchange="AjaxCall();">
  <option value="hotel1">Hotel 1</option>
  <option value="hotel2">Hotel 2</option>
  <option value="hotel3">Hotel 3</option>
</select>

<div id="display_info"> 
```

# asp.net - 将字符串转换为日期 -> FormatException

> ID：14478062
> 
> 赞同：0
> 
> 时间：2013-01-23T11:00:32.737
> 
> 标签：asp.net, string, datetime

我拼命尝试将以下字符串转换为日期。我对如何做到这一点进行了研究，但未能成功。

所以基本上，我的表单上有两个 Datepicker-Controls。保存表单时，我总是希望从控件#1 中获取日期，但保留控件#2 中的时间。我正在尝试如下：

```
Dim strDatum As String = dtpDatum.Value.ToString() '= 03.01.13 00:00:00
Dim strStart As String = dtpVon.Value.ToString()   '= 23.01.13 10:39:01
Dim sStartDatum = Strings.Left(strDatum, 8) & " " & Strings.Mid(strStart, 10, 9) '= 03.01.13 10:39:01

'here I'm trying to convert my new String to a Date and assign it to my a parameter
.Parameters("@dStartZeit").Value = DateTime.ParseExact(sStartDatum, "DD.MM.YY HH:mm:ss", New Globalization.CultureInfo("en-US")) 
```

执行查询时出现“FormatException”。

我在这里做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:03:50.390

自定义格式字符串区分大小写。尝试：

```
DateTime.ParseExact(sStartDatum, "dd.MM.yy HH:mm:ss", New Globalization.CultureInfo("en-US")` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:05:59.930

格式化字符串需要区分大小写。

```
parameter.Parameters("@dStartZeit").Value = DateTime.ParseExact(sStartDatum, "dd.MM.yy HH:mm:ss", New Globalization.CultureInfo("en-US")) 
```

# powershell - 如何禁用 Windows Powershell 凭据请求？

> ID：14478067
> 
> 赞同：0
> 
> 时间：2013-01-23T11:00:45.460
> 
> 标签：powershell, credentials, interactive

[因此，在我的个人资料中，如果PoshCode](http://poshcode.org)不存在，我会尝试下载它：

```
Function Initialize-PoshCodeScript ([string] $ScriptName, [int] $ScriptId) {
    $ScriptFile = Join-Path $ScriptsFolder "$ScriptName.ps1"
    if (-not (Test-Path $ScriptFile)) {
        "Could not find script $ScriptName, attempting to download"
        try {
            Get-PoshCode -Id $ScriptId -PassThru | Set-Content $ScriptFile
        } catch {
            "Could not download $($ScriptName): $_"
        }
    }
} 
```

一个问题是`Get-WebFile`PoshCode 模块中的 Cmdlet 尝试向用户请求凭据，因为它的一些参数具有[CredentialAttribute](http://msdn.microsoft.com/en-us/library/system.management.automation.credentialattribute%28v=vs.85%29.aspx)，即使它在不提供它们的情况下运行得非常好。显然应该有一些方法可以禁用这个提示，我期待`-NonInteractive`会这样做，但它没有。跑步

```
powershell -NoProfile -NonInteractive -c 'Import-Module PoshCode; Get-PoshCode -Id 2197 -PassThru' 
```

导致外壳锁定并等待对话框被关闭。

# javascript - Javascript 语法：a != b && (c = b)

> ID：14478068
> 
> 赞同：-2
> 
> 时间：2013-01-23T11:00:50.973
> 
> 标签：javascript, syntax

我并不是真正的 JavaScript 专家。我看到了这种语法： `a != b && (c = b);` 有人可以向我解释一下吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:02:22.527

如果`a != b`，分配`b`给`c`，返回`c`如果`c`是真的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:01:45.513

如果`a`不等于`b`，则赋值`b`给`c`。

如果左侧不是，则此处右侧不会评估`true`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T11:17:51.420

在您的示例中，结果将是 if `a != b`then 分配`b`给`c`. `c`不处理是否为真的评估（在此示例中）。

`if`由于运算符短路，此语句的工作方式类似于速记语句。

使用逻辑 AND`&&`时，这意味着如果 AND 的左侧是 AND`false`的右侧，则不会评估。因此，可以滥用逻辑 AND 来形成一种简写`if`语句。对于逻辑 OR，这也反过来发生，如果左侧评估为`true`，则右侧不会被评估（因为它不会改变整体结果）。在 C、JavaScript 和 Java 等语言中，您会发现这个操作符会短路怪癖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T11:08:24.103

如果变量`a`不等于变量`b`，则将变量分配`b`给变量`c`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T11:11:32.693

它应该写成：

```
if (a != b) {
  c = b;
} 
```

该代码使用运算符的短路来`&&`进行流控制（即表达式的第二部分仅在第一部分为真时才计算），然后它使用赋值也是一个表达式的事实，以便能够在表达式，并忽略表达式的值。

# c - 我正在尝试将 C 代码转换为 Mathematica 代码，我做错了什么？

> ID：14478077
> 
> 赞同：0
> 
> 时间：2013-01-23T11:01:16.327
> 
> 标签：c, wolfram-mathematica

我是 Mathematica 的新手，我似乎在 Mathematica 语法中遗漏了一些东西。

我复制了下面的两个代码。

对于此示例，Print[second] 必须返回 120，但它始终为 0。

任何建议表示赞赏。

C：

```
 int row = 4;
    int column = 10;
    int passenger = 5;
    int luggage = 20;
    int arrival = 15;
    int walking = 5;

    int second = 0;
    int waitingtime = 0;
    int _yolcu = 0;

        for (int i = 0; i <row; i++)
        {
          waitingtime = 0;
          if (_yolcu == passenger)
              break;
          for (int j = 0; j < column; j++)
          { 
              if (_yolcu == passenger)
                  break;
              _yolcu++;
              if (i == 0 && j == 0){
                  second = second + luggage;
                  continue;
                      }

              else
                      {
                  waitingtime = 0;
                  waitingtime =second-(j * walking + arrival * (_yolcu - 1));
                  if (waitingtime>= 0)
                  {
                      second = second + walking + luggage;
                  }
                  else        
                      second = second -  waitingtime+luggage;
              }

          }
      } 
```

数学：

```
 row = 4;
        column = 10;
        passenger = 5;
        luggage = 20;
        arrival = 15;
        walking = 5;

        second = 0;
        waitingtime = 0;
        _yolcu = 0;

        For[i = 0, i < row, i++, waitingtime = 0;
         If[_yolcu == passenger, Break[],
          For[j = 0, j < column, j++,
           If[_yolcu == passenger, Break[], _yolcu++;
            If[i == 0 && j == 0, second = second + luggage, 
             waitingtime = second - (j*walking + arrival*(_yolcu - 1));
             If[waitingtime >= 0, second = second + walking + luggage, 
              second = second - waitingtime + luggage]]]]]]

        Print[second] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:12:26.550

这

`_yolcu`

不是有效的 Mathematica 符号名称，因此该表达式`_yolcu = 5`不会导致 Mathematica 将使用值调用的变量`_yolcu`放入`5`上下文符号表中。尝试交互执行语句，然后尝试`_yolcu`再次执行；Mathematica 将（或者更确切地说对我而言）返回`_yolcu`not `5`。

事实上`_yolcu`是一个匹配事物的*模式*`Head` `yolcu`。通常，任何以下划线开头的表达式都是一个模式；下划线在 Mathematica 符号名称中无效。诸如此类的表达式`_yolcu++`不会增加 的值`_yolcu`。我实际上不知道它做了什么，除了在执行语句时产生错误；也许您的代码实际上并没有命中它。

如果您还不了解 Mathematica 模式，我建议您查看文档。

而且，在我写作的时候，您所做的看起来与将 C 代码翻译成 Mathematica 略有不同，看起来更像是您将 C 代码翻译成“C-written-in-Mathematica”。我认为您最好花时间将 C 逆向工程为问题规范，然后编写 Mathematica 解决方案来解决问题。我认为这是您的基本错误，对下划线的混淆只是不熟悉 Mathematica 的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T20:09:50.480

很高兴你让它工作，但参考 HPMark 的最后一段，Mathematica 中迭代循环的性能令人沮丧。要编写好的 Mathemaitca 表达式，您需要考虑以实现相同目的的方式将函数应用于列表。有点像列表是一个展开的 Do 循环，迭代实际上是通过遍历这个列表来实现的。

# php - imag ldap bundle 在登录 symfony2 之前检查 ldap 主机名和密码

> ID：14478078
> 
> 赞同：0
> 
> 时间：2013-01-23T11:01:22.800
> 
> 标签：php, symfony, doctrine, ldap, symfony-forms

我在 symfony2 中使用了 imag Ldap 包进行身份验证。但问题是它在提交登录页面之前检查了 Idap 属性，如 ldap 主机名和密码。我不明白为什么在提交登录表单之前会进行检查。当我提交登录表单（ldap 用户名和密码）时，它必须检查凭据，首先它必须检查 ldap 主机名和密码。但它会在提交登录表单之前进行检查。

如果有人知道有关该问题的解决方案。请帮助我，因为我需要立即解决该问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:20:17.393

您需要在 security.yml 的 access_control 部分添加：

```
security:
  access_control:
    - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY } 
```

它允许在不进行身份验证的情况下获取登录表单...

# google-fusion-tables - 尽管存在几何形状，但填充区域出错

> ID：14478083
> 
> 赞同：0
> 
> 时间：2013-01-23T11:01:37.010
> 
> 标签：google-fusion-tables

尽管我在谷歌融合表（所有世界国家的边界​​）中有一个 kml 区域列表，但在某些缩放级别，一些国家是空的（未填充）。如果我放大，它们会被填满，至少部分填满。如何克服这个错误/错误？

[链接到地图](https://www.google.com/fusiontables/DataSource?docid=1Kf2WQEHNA7iRKa2aiqIo_PD9O14C4PjtKAELf30)

问候，

酶联免疫吸附试验

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:00:00.033

如果地图上有超过 500 个要素，则在一定缩放级别后缩小所有多边形都会在地图上变为点。这是设计使然，无法应用任何解决方法。请参阅[Google 地图文档中的“限制”部分](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)

如果您重新放大并看到部分填充的区域，那是因为地图图块尚未加载到 Google 地图的缓存中。一旦您将此地图放在网页上，这将得到解决。几秒钟后重新加载页面以避免它。请参阅[Fusion Tables 疑难解答](https://developers.google.com/fusiontables/docs/troubleshooting "Fusion Tables 疑难解答")

# javascript - 当用户单击 chrome 扩展中的某个 url 时打开一个新选项卡

> ID：14478087
> 
> 赞同：-3
> 
> 时间：2013-01-23T11:01:44.423
> 
> 标签：javascript

我写了一个 chrome 扩展。当用户单击它而不在 onclick 中使用 target=_blank 时，我希望所有 url 在新选项卡中打开，因为这对我来说很乏味。

任何建议将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:29:03.233

```
$(document).click(function(e) { 
  // Check for button click
   if (e.button == 0) { // left click 
      window.open('http://google.com');
  }
   else if (e.button == 3){//right click
      window.open('http://yahoo.com');
  }
}); 
```

希望这可以帮助你

# twitter-bootstrap - 用于响应式导航的引导分隔符

> ID：14478091
> 
> 赞同：2
> 
> 时间：2013-01-23T11:01:50.310
> 
> 标签：twitter-bootstrap, navigation, responsive-design

我想在响应式导航上添加水平分隔线。这是移动设备上的引导响应视图。

![在此处输入图像描述](../Images/e4dabaae4c56008fdb4cb880def77e74.png)

我想在最后两个菜单项之间添加一个分隔符，即“链接”和“下拉”菜单项。如果我添加以下内容`<li class='divider></li>'`

在它们之间，它不起作用。还有其他引导方法吗？或者我们需要创建自己的类来在响应式网格中实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T05:51:16.773

您将不得不编写如下@media 查询：
[请参阅浏览器中的分隔符-调整浏览器大小以在可折叠导航中使用分隔符检查](http://jsfiddle.net/shail/zqNzk/5/show/)
[JSFiddle](http://jsfiddle.net/shail/zqNzk/6/)

![带分隔线的浏览器截图](../Images/832e5c7660a2d46d526c637845d56d4e.png)

```
 /* Portrait tablet to landscape and desktop */
 @media (min-width: 768px) and (max-width: 979px) {
    .nav-collapse .nav > li.divider {
    *width: 100%;
    height: 1px;
    margin: 9px 1px;
   *margin: -5px 0 5px;
    overflow: hidden;
   background-color: #e5e5e5;
   border-bottom: 1px solid #ffffff;
     }
     }
 @media (min-width: 600px){
   .nav-collapse .nav > li.divider {
    *width: 100%;
    height: 1px;
    margin: 9px 1px;
   *margin: -5px 0 5px;
   overflow: hidden;
   background-color: #e5e5e5;
   border-bottom: 1px solid #ffffff;
  }
  }
 /* Landscape phones and down */
  @media (max-width: 480px) {
   .nav-collapse .nav > li.divider {
   *width: 100%;
   height: 1px;
   margin: 9px 1px;
  *margin: -5px 0 5px;
  overflow: hidden;
  background-color: #e5e5e5;
  border-bottom: 1px solid #ffffff;
  }
  } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-12T12:42:04.997

为什么不呢`<hr>`？`<legend></legend>`

```
<li class = ""></li>
<li class = ""></li>
<div class = "visible-phone">
<legend></legend>
</div>
<li class = ""></li>
<li class = ""></li> 
```

# jquery-plugins - 像滚动条一样流动的幻灯片

> ID：14478092
> 
> 赞同：0
> 
> 时间：2013-01-23T11:01:50.793
> 
> 标签：jquery-plugins, slideshow

我在哪里可以找到一个 slidseshow jquery 插件，以便我可以显示主幻灯片及其两个兄弟姐妹（上一个和下一个）的部分？

我搜索了一个多小时，似乎什么也没做。

[Anyslide](http://css-tricks.com/examples/AnythingSlider/#&panel1-1)似乎很接近它，但我仍然需要找到一种方法来在移动幻灯片时设置列表的左侧样式。

[SmoothScroller](http://www.smoothdivscroll.com/index.html#toc)似乎只处理图像......我们还需要在每个图像下方显示一个标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:12:21.077

使用这个 loopSlider

[http://www.jboss.org/help/projectpageguide/imagestyleguide/loopedslider](http://www.jboss.org/help/projectpageguide/imagestyleguide/loopedslider)

更改一些 css，您将获得所需的结果，请阅读其文档以了解更多要求。

# css - 为什么当在其他地方应用rotate3d 变换时，点击不会在CSS 列列表中的锚点上触发？

> ID：14478097
> 
> 赞同：2
> 
> 时间：2013-01-23T11:02:05.537
> 
> 标签：css, css-transitions, css-transforms

我认为这可能是一个不起眼的谷歌浏览器错误，简而言之，我有一个导航，其中包含一个列表，该列表拆分为带有 CSS 列的列，以及页面上的其他地方，一个使用变换 rotate3D 实现的具有“翻转”效果的元素。

当转换和列的组合在页面上都处于活动状态时，我的导航中的锚点的单击事件不会触发。然而，它们确实经历了所有状态，包括悬停和活动，它们看起来应该点击，但用户并没有被导航走。

没有 JS event.preventDefaulting 他们。

在 DOM 或呈现的样式中，元素彼此不相近。

检查页面证实了上述情况，即使转换后的元素由于其 3D 旋转 + 背面不可见而不可见，检查器投影的轮廓显示该元素仍然远离断开的链接。

取消选中转换或列会使链接再次工作。

无论是柱子还是 3D 变换都不是我可以通过其他技术轻松实现的东西，该网站具有高度响应性，这两者都是其工作方式不可或缺的一部分。

当转换后的元素不显示时，问题不存在，大概是因为在这种情况下忽略了转换。

* * *

请在此处查看我的 jsFiddle：[CSS 变换 rotate3D + 列导致列中不可点击的链接](http://bit.ly/VZOCTT)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:31:16.950

[在执行此](http://codepen.io/remybach/pen/armbd)操作之前，我遇到了类似的问题（CSS 第 37 到 42 行）。在这里找到了适合我的解决方案：[鼠标向上/单击事件在 translateZ 后未触发](https://stackoverflow.com/questions/11764151/mouse-up-click-event-not-firing-after-translatez/13566506#12020643)

# ruby-on-rails-3 - 嵌套属性的 Rails 复选框返回一个数组，而不是哈希 - 获取 HashWIthIndifferentAccessError

> ID：14478099
> 
> 赞同：0
> 
> 时间：2013-01-23T11:02:08.287
> 
> 标签：ruby-on-rails-3, nested-attributes

我有委员会和会议对象。创建会议时，我想同时关联一个或多个委员会。CommitteeMeeting 是 Meeting 的嵌套属性。

[几乎完全按照这里](https://stackoverflow.com/questions/727300/nested-object-w-checkboxes-mass-assignment-even-with-accepts-nested-attribute?rq=1)的解决方案，我得到以下参数：

```
--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess
utf8: ✓
authenticity_token: us1hzugov7DDIpKNobOZJbuk14KsIsoz3uJRZEy2VRc=
meeting: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
  date: '2001-01-03'
  room_id: '1'
  committee_meetings_attributes: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
    '0': !ruby/hash:ActiveSupport::HashWithIndifferentAccess
      committee_id: '1'
    '1': !ruby/hash:ActiveSupport::HashWithIndifferentAccess
      committee_id: '2'
commit: Create meeting
action: create
controller: meetings 
```

Committee_meeting_attributes 被正确嵌套，但在一个数组中，这似乎是导致错误的原因。Rails 期待一个哈希值。我用作参考的解决方案在参数中获取哈希值。

```
 {"user"=>{"password_confirmation"=>"[FILTERED]", 
"roles_attributes"=>{"id"=>"2"}, ... 
```

在[这个问题](https://stackoverflow.com/questions/3765810/why-is-accepts-nested-attributes-for-not-working-for-me-rails-3)中，开发人员在他的参数中遇到了类似的错误，但他的问题是无法在父模型中访问嵌套属性。我确实可以在模型中访问嵌套属性。

这是视图：

```
<% provide(:title, 'Create site') %>
<h1>Create meeting</h1>

<div class="row"> 
  <div class="span6 offset3">

    <%= form_for(@meeting) do |f| %>
    <%= render :partial => 'shared/error_messages', 
                           :locals => {:object => @meeting} %>

      <%= f.label :date %>
      <%= f.text_field :date %>

      <% @rooms.each do |room| %>
        <%= f.radio_button :room_id, room.id %> <%= room.name %><br />
      <% end %>

        <%= f.fields_for :committee_meetings do |builder| %>
          <% committee = Committee.find(builder.object.committee_id) %>
          <li><%= builder.check_box :committee_id, { :checked => false },
                        builder.object.committee_id %>
          <%= builder.label :committee_id, "#{committee.name}" %>
          </li>
        <% end %>

      <%= f.submit "Create meeting", class: "btn btn-large btn-primary" %>
    <% end %>
  </div>
</div> 
```

这是会议控制器：

```
class MeetingsController < ApplicationController
 def create
    @rooms = Room.all
    @committees = Committee.all
    @meeting = Meeting.new(params[:meeting])
    @meeting.creator_id = current_user.id
    @meeting.updater_id = current_user.id

  if @meeting.save
    flash[:success] = "You have succesfully created a meeting on #{@meeting.date}
                       in #{@meeting.room.site.name}, #{@meeting.room.name}!"
    redirect_to root_url 
  else
    render 'new'
  end
end

  def new
    @rooms = Room.all
    @meeting = Meeting.new
    @committees = Committee.all
  end 
```

这是模型：

```
class Meeting < ActiveRecord::Base
attr_accessible :creator_id, :date, :room_id, :updater_id, :committee_meetings_attributes

  has_many :committee_meetings
  accepts_nested_attributes_for :committee_meetings, :allow_destroy => true

  has_many :committees, through: :committee_meetings

  belongs_to :room
  belongs_to :creator,     :class_name => 'User'
  belongs_to :updater,     :class_name => 'User'

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:39:00.237

正如我在评论中所说，我可以向您展示我所做的事情，但它可能太聪明了一半，或者可能有一种更直接的方法来完成它，而我只是不知道。

对我来说，我希望我的所有委员会每次都以相同的顺序显示，所以我首先在我的`new`和控制器中预构建所有可能的关联以及and`edit`的失败案例。`create``update`

我在这里有代码，它将确保所有可能的关联都存在，尊重已保存的关联并每次都以相同的方式对它们进行排序：

[Rails：如何在构建之前添加或插入关联？](https://stackoverflow.com/questions/13599519/rails-how-do-i-prepend-or-insert-an-association-with-build)

然后在我看来，我使用复选框来删除我不想保存的那些。

```
= f.fields_for :committee_meetings do |cm|
  = cm.check_box :_destroy, {:checked => cm.object.persisted?}, 0, 1
  = cm.label :_destroy, cm.object.committee.name
  = cm.hidden_field :committee_id, :value => f.object.committee.id 
```

基本上，我已经颠倒了复选框的极性，所以如果它没有被选中，它就会发送`:_destroy`，或者如果它被选中则什么都不发送。

它对我有用，我相信你可以让它为你工作。恐怕我不能说你的代码为什么会失败，因为我不明白为什么它甚至部分工作。我宁愿只解决您的问题，但也许这种替代方法会有所帮助。

# xml - 以下代码行在 xslt 中的含义是什么

> ID：14478101
> 
> 赞同：0
> 
> 时间：2013-01-23T11:02:17.690
> 
> 标签：xml, xslt

我正在学习 xslt。我试图理解一些 xslt 代码，但没有得到以下代码行的含义：

```
<xsl:variable name="Product" select="document('ProductList.xml')/node()[1]/node()[2]/node()[2]/node()[2]"/> 
```

我可以理解变量将是“$Product”，但我无法理解选择属性的值，即文档函数之后的“/”和节点（）[]。我有 c# 和 java 的编码知识，但我不熟悉这种类型的语法。我想知道这些'/'在选择值中的含义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T11:13:18.907

该`select`属性指示变量的值应由 XPath 表达式确定。

加载名为“ProductList.xml”的`document('ProductList.xml')`文件以对其执行 XPath 选择。

该`/node()[1]/node()[2]/node()[2]/node()[2]`部分表示应选择第一个元素的第二个孩子的第二个孩子的第二个孩子。换句话说，如果 ProductList.xml 看起来像这样：

```
<a>              <!-- /node()[1] -->
  <b>            <!-- /node()[1]/node()[1] -->
    <c />        <!-- /node()[1]/node()[1]/node()[1] -->
    <d />        <!-- /node()[1]/node()[1] -->
  </b>
  <e>            <!-- /node()[1]/node()[2] -->
     <f />       <!-- /node()[1]/node()[2]/node()[1] -->
     <g>         <!-- /node()[1]/node()[2]/node()[2] -->
        <h />    <!-- /node()[1]/node()[2]/node()[2]/node()[1] -->
        <i />    <!-- /node()[1]/node()[2]/node()[2]/node()[2] -->
     </g>
  </e>
</a> 
```

然后 XPath 将选择`<i>`节点，它是 的第二个子节点，它是 的第二个子节点，它是 的第二个子节点，它是`<g>`第`<e>`一个`<a>`（也是唯一的）根元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:17:37.687

向后阅读：-

```
node()[2],       node()[2],       node()[2],       node()[1],      document('ProductList.xml')           
second child of, second child of, second child of, first child of, ProductList.xml document 
```

# javascript - 当我可以在 JavaScript 中直接引用 DOM id 时，为什么还要使用 document.getElementById？

> ID：14478102
> 
> 赞同：17
> 
> 时间：2013-01-23T11:02:19.237
> 
> 标签：javascript, dom, getelementbyid

> **可能重复：**
> [IE/Chrome：这里是 DOM 树元素全局变量吗？](https://stackoverflow.com/questions/3434278/ie-chrome-are-dom-tree-elements-global-variables-here)

我最近发现我可以在 javascript 中使用来自 DOM 的任何对象，并直接引用其 id：

```
<div id="layer">IM A LAYER</div>
<script>
   alert(layer.innerHTML);
</script> 
```

如果这是真的，那么使用 getElementById 方法我会得到什么好处？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-23T11:05:44.437

如果元素不存在，直接访问 DOM 元素会给你一个错误。如果你使用`getElementById`它会返回`NULL`。

您也不能直接访问所有元素，例如，如果它们的名称中有破折号 ( `some-id`)，因为 JS 变量不能包含破折号。但是，您可以使用`window['some-id']`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T11:05:45.637

例如，如果在您的页面中，您在其他地方有另一个先前的脚本

```
<script>
var layer = false; // or any other assignment
</script> 
```

`layer`将是对 的引用`window.layer`，然后`layer.innerHTML`将失败。与`document.getElementById`您一起避免这个棘手的错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:05:40.610

这仅适用于`id`' 包含变量名允许的字母。对于 id 之类的`text-11`，否则`item-key-21`将无法正常工作。

# inno-setup - 如何在 Inno Setup 脚本中使用 {app} 或 {temp} 等占位符？

> ID：14478105
> 
> 赞同：3
> 
> 时间：2013-01-23T11:02:23.697
> 
> 标签：inno-setup

如何从 Inno Setup 脚本代码访问（目录）常量？

我尝试了以下方法但没有成功：

```
function dbExistis() : Boolean;
begin
  Result := FileExists({commonappdata} + '\LR-International\DB_LR.IB');
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T11:04:56.180

使用该[`ExpandConstant`](http://jrsoftware.org/ishelp/topic_isxfunc_expandconstant.htm)函数扩展任何常量值：

```
function dbExistis: Boolean;
begin
  Result := FileExists(ExpandConstant('{commonappdata}\LR-International\DB_LR.IB'));
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T11:05:37.003

使用[`ExpandConstant`功能](http://www.jrsoftware.org/ishelp/index.php?topic=isxfunc_expandconstant)

```
function dbExistis() : Boolean;
  begin
    Result := FileExists(ExpandConstant('{commonappdata}') + '\LR-International\DB_LR.IB');
  end; 
```

# javascript - AngularJS按属性排序

> ID：14478106
> 
> 赞同：94
> 
> 时间：2013-01-23T11:02:24.193
> 
> 标签：javascript, angularjs

我想做的是按属性对一些数据进行排序。这是我认为应该可以工作的示例，但事实并非如此。

HTML部分：

```
<div ng-app='myApp'>
    <div ng-controller="controller">
    <ul>
        <li ng-repeat="(key, value) in testData | orderBy:'value.order'">
            {{value.order}}. {{key}} -> {{value.name}}
        </li>
    </ul>
    </div>
</div> 
```

JS部分：

```
var myApp = angular.module('myApp', []);

myApp.controller('controller', ['$scope', function ($scope) {

    $scope.testData = {
        C: {name:"CData", order: 1},
        B: {name:"BData", order: 2},
        A: {name:"AData", order: 3},
    }

}]); 
```

结果：

> 3.  A -> 数据
> 4.  B -> B数据
> 5.  C -> C数据

...恕我直言，应该是这样的：

> 1.  C -> C数据
> 2.  B -> B数据
> 3.  A -> 数据

我错过了什么吗（这里已经准备好[JSFiddle](http://jsfiddle.net/xZEnK/14/)进行实验了）？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-08-12T12:26:06.250

AngularJS 的 orderBy 过滤器只支持数组——不支持对象。所以你必须编写一个自己的小过滤器，它会为你进行排序。

或者更改您处理的数据格式（如果您对此有影响）。包含对象的数组可按本机 orderBy 过滤器排序。

这是我的 AngularJS **orderObjectBy**过滤器：

```
app.filter('orderObjectBy', function(){
 return function(input, attribute) {
    if (!angular.isObject(input)) return input;

    var array = [];
    for(var objectKey in input) {
        array.push(input[objectKey]);
    }

    array.sort(function(a, b){
        a = parseInt(a[attribute]);
        b = parseInt(b[attribute]);
        return a - b;
    });
    return array;
 }
}); 
```

您认为的用法：

```
<div class="item" ng-repeat="item in items | orderObjectBy:'position'">
    //...
</div> 
```

在此示例中，对象需要一个位置属性，但您可以灵活地使用对象中的任何属性（包含一个整数），只需在视图中定义即可。

示例 JSON：

```
{
    "123": {"name": "Test B", "position": "2"},
    "456": {"name": "Test A", "position": "1"}
} 
```

这是一个向您展示用法的小提琴：http: [//jsfiddle.net/4tkj8/1/](http://jsfiddle.net/4tkj8/1/)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-12-05T11:07:01.113

很简单，就这样吧

```
$scope.props = [{order:"1"},{order:"5"},{order:"2"}]

ng-repeat="prop in props | orderBy:'order'" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-05T17:22:29.557

不要忘记 parseInt() 仅适用于整数值。要对字符串值进行排序，您需要交换它：

```
array.sort(function(a, b){
  a = parseInt(a[attribute]);
  b = parseInt(b[attribute]);
  return a - b;
}); 
```

有了这个：

```
array.sort(function(a, b){
  var alc = a[attribute].toLowerCase(),
      blc = b[attribute].toLowerCase();
  return alc > blc ? 1 : alc < blc ? -1 : 0;
}); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-23T12:02:47.093

正如您在 angular-JS ( [https://github.com/angular/angular.js/blob/master/src/ng/filter/orderBy.js](https://github.com/angular/angular.js/blob/master/src/ng/filter/orderBy.js) ) 的代码中看到的那样，ng-repeat 不适用于对象。这是一个带有 sortFunction 的 hack。

[http://jsfiddle.net/sunnycpp/qaK56/33/](http://jsfiddle.net/sunnycpp/qaK56/33/)

```
<div ng-app='myApp'>
    <div ng-controller="controller">
    <ul>
        <li ng-repeat="test in testData | orderBy:sortMe()">
            Order = {{test.value.order}} -> Key={{test.key}} Name=:{{test.value.name}}
        </li>
    </ul>
    </div>
</div>

myApp.controller('controller', ['$scope', function ($scope) {

    var testData = {
        a:{name:"CData", order: 2},
        b:{name:"AData", order: 3},
        c:{name:"BData", order: 1}
    };
    $scope.testData = _.map(testData, function(vValue, vKey) {
        return { key:vKey, value:vValue };
    }) ;
    $scope.sortMe = function() {
        return function(object) {
            return object.value.order;
        }
    }
}]); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-01-23T11:39:11.113

根据[http://docs.angularjs.org/api/ng.filter:orderBy](http://docs.angularjs.org/api/ng.filter:orderBy)， orderBy 对数组进行排序。在您的情况下，您正在传递一个对象，因此您必须实现自己的排序功能。

或传递一个数组 -

```
$scope.testData = {
    C: {name:"CData", order: 1},
    B: {name:"BData", order: 2},
    A: {name:"AData", order: 3},
} 
```

看看[http://jsfiddle.net/qaK56/](http://jsfiddle.net/qaK56/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-04-17T23:01:29.810

你真的应该改进你的 JSON 结构来解决你的问题：

```
$scope.testData = [
   {name:"CData", order: 1},
   {name:"BData", order: 2},
   {name:"AData", order: 3},
] 
```

然后你可以做

```
<li ng-repeat="test in testData | orderBy:order">...</li> 
```

我认为，问题在于 orderBy 过滤器无法使用 (key, value) 变量，并且无论如何您都不应该将数据存储在密钥中

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-09-24T16:30:48.463

这是我所做的，它有效。
我只是使用了一个字符串化的对象。

```
$scope.thread = [ 
  {
    mostRecent:{text:'hello world',timeStamp:12345678 } 
    allMessages:[]
  }
  {MoreThreads...}
  {etc....}
] 
```

`<div ng-repeat="message in thread | orderBy : '-mostRecent.timeStamp'" >`

如果我想按文本排序，我会做

```
orderBy : 'mostRecent.text' 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-08-18T17:16:27.880

我将添加我的升级版过滤器，它能够支持下一个语法：

```
ng-repeat="(id, item) in $ctrl.modelData | orderObjectBy:'itemProperty.someOrder':'asc' 
```

* * *

```
app.filter('orderObjectBy', function(){

         function byString(o, s) {
            s = s.replace(/\[(\w+)\]/g, '.$1'); // convert indexes to properties
            s = s.replace(/^\./, '');           // strip a leading dot
            var a = s.split('.');
            for (var i = 0, n = a.length; i < n; ++i) {
                var k = a[i];
                if (k in o) {
                    o = o[k];
                } else {
                    return;
                }
            }
            return o;
        }

        return function(input, attribute, direction) {
            if (!angular.isObject(input)) return input;

            var array = [];
            for(var objectKey in input) {
                if (input.hasOwnProperty(objectKey)) {
                    array.push(input[objectKey]);
                }
            }

            array.sort(function(a, b){
                a = parseInt(byString(a, attribute));
                b = parseInt(byString(b, attribute));
                return direction == 'asc' ? a - b : b - a;
            });
            return array;
        }
    }) 
```

感谢 Armin 和 Jason 在此线程中的回答，以及 Alnitak 在[此线程](https://stackoverflow.com/questions/6491463/accessing-nested-javascript-objects-with-string-key)中的回答。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-01-17T00:06:53.347

以下允许**通过 key** OR**按**object 中的 key 对对象进行排序。

在模板中，您可以执行以下操作：

```
 <li ng-repeat="(k,i) in objectList | orderObjectsBy: 'someKey'"> 
```

甚至：

```
 <li ng-repeat="(k,i) in objectList | orderObjectsBy: 'someObj.someKey'"> 
```

过滤器：

```
app.filter('orderObjectsBy', function(){
 return function(input, attribute) {
    if (!angular.isObject(input)) return input;

    // Filter out angular objects.
    var array = [];
    for(var objectKey in input) {
      if (typeof(input[objectKey])  === "object" && objectKey.charAt(0) !== "$")
        array.push(input[objectKey]);
    }

    var attributeChain = attribute.split(".");

    array.sort(function(a, b){

      for (var i=0; i < attributeChain.length; i++) {
        a = (typeof(a) === "object") && a.hasOwnProperty( attributeChain[i]) ? a[attributeChain[i]] : 0;
        b = (typeof(b) === "object") && b.hasOwnProperty( attributeChain[i]) ? b[attributeChain[i]] : 0;
      }

      return parseInt(a) - parseInt(b);
    });

    return array;
 }
}) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-08-07T15:48:01.067

Armin 的回答 + 对对象类型和非角度键的严格检查，例如`$resolve`

```
app.filter('orderObjectBy', function(){
 return function(input, attribute) {
    if (!angular.isObject(input)) return input;

    var array = [];
    for(var objectKey in input) {
      if (typeof(input[objectKey])  === "object" && objectKey.charAt(0) !== "$")
        array.push(input[objectKey]);
    }

    array.sort(function(a, b){
        a = parseInt(a[attribute]);
        b = parseInt(b[attribute]);
        return a - b;
    });

    return array;
 }
}) 
```

# java - 为什么我的形状和图像在我的面板上消失了？

> ID：14478112
> 
> 赞同：1
> 
> 时间：2013-01-23T11:02:43.470
> 
> 标签：java, swing, graphics, paintcomponent, shapes

我已经使用该`paintComponent`方法在面板上绘制形状。但是，每次我最小化框架或调整它的大小时，它们都会消失。不确定要添加到我的代码中的内容。

```
 public class ShapePanel extends JPanel implements ActionListener, MouseListener{

    int a,b,c,d;
    Graphics2D g2D;
    private Rectangle2D rect = new Rectangle2D(a,b,c-a,d-b);

    public ShapePanel(){

    addMouseListener(this);
    setLayout(new GridLayout());
}

    public void paintComponent(Graphics g) {

    g2D = (Graphics2D) g;
    g2D.draw(rect);
    repaint();

}

   //get methods for coordinates: MousePressed, MouseReleased 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T11:05:26.183

不要`repaint()`在方法下调用`paintComponent`。另外，在你的方法中做`super.paintComponent(g)`第一件事。`paintComponent`

更新：您的代码有很多编译错误。但是，请参阅下面的更改列表：

*   `new Rectangle2D(a, b, c, d)`应该是新`Rectangle2D.Float(10, 10, 100, 100);`的，或者无论如何，a、b、c 和 d 应该有一些值，否则它们都为零，所以没有矩形
*   在定义和构造函数中将类命名为相同
*   实施`mouseClicked`，`mouseEntered`和`mouseExited`
*   `g2D.draw()`从类中删除`actionPerformed`并且不保留对的引用`g2D`。

如果您需要，我有完整的代码。

# ajax - 重定向而不是更新 Ajax MVC

> ID：14478118
> 
> 赞同：0
> 
> 时间：2013-01-23T11:02:52.670
> 
> 标签：ajax, asp.net-mvc

这是必须发生更新的 .cshtml 的一部分：

```
<script type="text/javascript" src="~/scripts/jquery.unobtrusive-ajax.js"></script>

@using (Ajax.BeginForm("NewMessage",new AjaxOptions { UpdateTargetId = "messages"}))
{

    @Html.TextBox("Enter Message");
    <input type="submit" />

   <div id="messages">      
   </div>     
} 
```

这是行动：

```
 [HttpPost]
    public ActionResult NewMessage(UserMessage message)
    {
        message.TimePost = DateTime.Now;
        message.Author = "author";
        message.Message = "message";

        return PartialView("NewMessage",message);
    } 
```

为什么我重定向到“NewMessage”操作而不是更新？我应该包括任何其他脚本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:08:36.247

缺少一些脚本...

```
<script src="@Url.Content("~/Assets/Js/jquery.min.js")"></script>
<script src="@Url.Content("~/Assets/Js/jquery.validate.min.js")"></script>
<script src="@Url.Content("~/Assets/Js/jquery.validate.unobtrusive.min.js")"></script>
<script src="@Url.Content("~/Assets/Js/jquery.unobtrusive-ajax.min.js")"></script> 
```

# ios - 禁用拖过 UIWebView / UIScrollView 顶部（“拉动刷新”手势）

> ID：14478120
> 
> 赞同：6
> 
> 时间：2013-01-23T11:03:00.567
> 
> 标签：ios, objective-c, uiwebview, uiscrollview, uikit

我有一个`UIWebView`我希望用户能够向下滚动，然后再次返回，但不能从顶部拉回页面（通常与拉动刷新相关的手势）。我不希望用户在它背后没有任何东西时拉它，当他们这样做时不会发生任何事情。叫我霸道;)

我可以在向上移动并且已经在内容顶部时禁用滚动，而不影响向下滚动，或者如果不在顶部则向后滚动？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-23T11:15:08.573

你应该使用：

```
webView.scrollView.bounces = NO; 
```

UIWebView 符合 UIScrollViewDelegate。您可以像这样实现委托方法：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView{
    //The webview is is scrolling
    int yPosition = [[_webview stringByEvaluatingJavaScriptFromString: @"scrollY"] intValue];

    if([[_webview stringByEvaluatingJavaScriptFromString: @"document.body.offsetHeight"] intValue] - yPosition == _webview.frame.size.height)
    {
        //The user scrolled to the bottom of the webview
        _webview.scrollView.bounces = YES;
    }else if([[_webview stringByEvaluatingJavaScriptFromString: @"document.body.offsetHeight"] intValue] - yPosition > _webview.frame.size.height + 100){
        _webview.scrollView.bounces = NO;
    }

} 
```

我在 Google Drive 上上传了一个 XCode 项目示例： [示例代码](https://docs.google.com/file/d/0B3Etz0C_5qq5YndtQlBrbUhpdFk/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-15T11:35:53.020

使用 StoryBoard，您可以禁用`ScrollView`反弹

[![在此处输入图像描述](../Images/712d8521e6e96ef942b2ddbf0d082893.png)](https://i.stack.imgur.com/uYkZv.png)

# python - 在线运行 ASP 脚本时的安全权限

> ID：14478123
> 
> 赞同：2
> 
> 时间：2013-01-23T11:03:06.650
> 
> 标签：python, windows, iis, dll, asp-classic

我编写了一个 python 类，它通过 ac dll 与第三方销售数据库交互。

我现在计划使用我的 ASP 脚本中的 PythonScript 来使用这个 python 类。这个 ASP 脚本是我网站的一部分。我过去曾使用过一点 PythonScript 作为 VBScript 的替代品。

在安全权利方面，我网站的客户可以使用 python 类吗？我记得有一次，出于安全原因，我不能让客户端安排 Windows 任务。

如何安全地设置安全权限？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T05:30:23.947

Web 应用程序总是让用户在服务器上运行代码，通常从数据中生成一些 HTML。该过程非常锁定，并且不需要服务器上的权限。该代码是否是 ASP 和/或 Python 并不是真正的问题，除了您将使用 C 代码：

*   测试较少
*   容易发生缓冲区溢出

如果您使用的是自定义构建的 COM 对象，此答案也将适用。

除了可能的技术困难（比如获得`PYTHONPATH`正确的）之外，您还必须**查看[信任边界](http://en.wikipedia.org/wiki/Trust_boundary)**。简而言之，您必须对客户端发送给您的数据*进行一些工作，然后才能使其可信。*只有这样，您才能将其发送至您的资产（您的数据）。

什么是工作完全取决于您的应用程序，但它可能会沿着这些路线：

1.  验证用户
2.  验证输入
3.  使用安全的 API 和编码实践

艰苦的工作通常在第 2 阶段。例如，您的调度应用程序可以只调度特定的低影响任务运行一次，而不是盲目地调度用户提交的任务。

您的 Python 脚本应用程序也是如此。但是你也应该考虑第 3 阶段。C 代码没有内置的保护措施，因此很容易受到溢出攻击。

为了更清楚，请在应用程序的高级图表上确定您的信任边界。这是一个尝试：

![假设的信任边界](../Images/7513c38b754ca3f7fd7adc9470e2afe7.png)

应用程序的每个部分都有一个角色，如果没有某种形式的验证，您就无法跨越信任边界。

例如 ：

1.  对用户进行身份验证，最好使用内置机制，以便您从健壮的代码中受益
2.  您的 Python 脚本代码验证输入。[OWASP 输入验证备忘单](https://www.owasp.org/index.php/Input_Validation_Cheat_Sheet)是一个好的开始，尽管[Python ESAPI 库](https://www.owasp.org/index.php/ESAPI_Python_Readme)仍处于测试阶段。同样，这是困难的部分。
3.  （如果可能）检查您的 DLL 代码并用安全的对应程序替换所有字符串操作例程。不过，这可能是一项比您的原始项目更大的任务。

可悲的是，基础设施对您没有帮助。即使这是一个 Intranet 应用程序，并且预先知道用户，它也只会在身份验证阶段提供帮助。

最后，请记住旧式安全措施仍然适用：

*   网络安全（防火墙、反向代理等）
*   只运行您需要的服务
*   应用补丁和监控日志
*   将您的应用程序隔离在具有很少特权的工作进程中（例如 LOCAL SERVICE）
*   使用低权限帐户访问数据库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:28:40.873

我不必在 IIS 上设置 Python，但我在[MSDN上找到](http://support.microsoft.com/kb/276494)

> 验证 .py 文件的应用程序映射是否已设置。为此，请执行以下步骤：
> 
> *   在 ISM 中，在 Internet 信息服务器下，右键单击计算机名称，然后 > 单击属性。
>     *   从主属性下拉列表中，单击 WWW 服务，然后单击编辑。
>     *   单击主目录选项卡，然后单击配置。
>     *   要添加应用程序映射，请单击添加，然后使用以下信息创建新映射（替换计算机上的正确路径）：
>         1.  可执行文件：“C:\Python20\python.exe %s %s”（可执行文件后面的两个“%s”对于基于控制台的脚本解释器是必需的，但对于基于 Internet 服务器 API [ISAPI] 的脚本则不需要口译员）。
>         2.  扩展名：.py
>         3.  脚本引擎：选中。
>         4.  检查文件存在：选中（出于安全考虑）单击确定。

...

> 验证在计算机的访问控制列表 (ACL) 中正确设置了文件和目录权限。对于匿名访问，IUSR_[computername] 和 IWAM_[computername] 用户帐户必须至少具有“读取”权限 (RX)。使用其他类型的密码验证时，所需的权限可能会有所不同。

# google-app-engine - 存储数据 - 实体属性中的大列表

> ID：14478124
> 
> 赞同：0
> 
> 时间：2013-01-23T11:03:09.580
> 
> 标签：google-app-engine, google-cloud-datastore, blobstore, app-engine-ndb

我在我的应用程序中运行一个爬虫后端，每天挖掘一些网站以获取数据。

对于我抓取的每个网站，我都会创建一个实体，存储一个字符串 ID 的大列表。

*   每个实体的近似值约为**2.000 。**
*   每天大约**1000 个实体。**

我现在做的方式是重复的 ndb.StringProperty() 没有索引。

运行 3 天后，它消耗了我 70% 的数据存储存储空间。

下一步可以做什么？将它们存储为压缩的 json？

将它们存储在 blobstore 中并每次读取 blob 等？

还有什么？替代？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T16:01:12.440

压缩和 JSON 对我有用。关闭这个。

# javascript - 通过 JavaScript 解析从 AJAX 请求获得的 JSON 响应

> ID：14478127
> 
> 赞同：16
> 
> 时间：2013-01-23T11:03:13.253
> 
> 标签：javascript, ajax, json

我通过 JavaScript 收到带有 AJAX 请求的 JSON 响应。

这是回应：

```
{"responseCode":400,"errors":false,"submitted":false,"content":"some content","notice":""} 
```

我的目标是获取内容：

```
"some content" 
```

json 变量是我的数据。所以，我尝试过：

```
data.content 
```

但我得到一个空字符串。

关于如何访问字符串的任何想法？

先感谢您。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-23T11:07:34.733

你先解析 json 吗？

```
var data = JSON.parse(json); 
```

比阅读`data.content`

# wpf - WPF中矢量图像按钮的动画填充颜色

> ID：14478129
> 
> 赞同：0
> 
> 时间：2013-01-23T11:03:17.933
> 
> 标签：wpf

我正在使用以下 XAML 创建矢量图像按钮，并使用动画来更改鼠标悬停时的不透明度。这是按钮样式：-

```
<Style x:Key="IconButtonStyle" TargetType="Button">
    <Setter Property="Cursor" Value="Hand"/>
    <Setter Property="IsTabStop" Value="True" />
    <Setter Property="Focusable" Value="True" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border Background="Transparent">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal">
                                <Storyboard>                                       
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ContentPresenter">
                                        <EasingDoubleKeyFrame KeyTime="0" Value="1.0"/>
                                    </DoubleAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="MouseOver">
                                <Storyboard>
                                    <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ContentPresenter">
                                        <EasingDoubleKeyFrame KeyTime="0" Value="0.6"/>
                                    </DoubleAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>

                    <ContentPresenter x:Name="ContentPresenter" 
                                      ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" 
                                      HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                      Margin="{TemplateBinding Padding}" />
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这是它的使用示例：-

```
<Button Width="40" Height="40" Style="{StaticResource IconButtonStyle}">
    <Path Width="30" Height="30" Style="{StaticResource MetroButtonRightStyle}" Fill="Red" />
</Button> 
```

的`Path`样式如下所示：-

```
<Style x:Key="MetroButtonRightStyle" TargetType="{x:Type Path}">
    <Setter Property="Stretch" Value="Fill" />
    <Setter Property="Data" Value="{StaticResource MetroButtonRightGeometry}" />
</Style> 
```

（`MetroButtonRightGeometry`在 Data 属性中指定的资源是一个`<Geometry>`，由于大小，我在这里没有包括在内）。

我想更改情节提要以更改图像的颜色而不是其不透明度，但是我似乎无法从情节提要中访问`Path`'`Fill`属性，或者甚至无法以目前的形式访问 ' 属性。有什么建议么？

**更新**

我通过将视觉状态故事板更改为`ColorAnimationUsingKeyFrames`这样找到了解决方案（注意 TargetProperty！）：-

```
<ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Button.Content).(Path.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="ContentPresenter">
    <EasingColorKeyFrame KeyTime="0" Value="Gold" />
</ColorAnimationUsingKeyFrames> 
```

*并*在我的路径上包括`Fill`这样的：-

```
<Path Width="30" Height="30" Style="{StaticResource MetroButtonRightStyle}" Fill="{StaticResource SomeSolidBrush}" /> 
```

然而，必须包含 Fill 感觉有点 hacky，它基本上被忽略了，只是为了为故事板 TargetProperty 提供一个“钩子”。如果没有它，我会收到错误消息“'Fill' 属性未指向路径'{0}.{1}.{2}' 中的 DependencyObject”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:30:52.863

我想出了这个解决方案，它使用触发器而不是故事板。在`Path`控件模板中使用 也会导致更清晰的按钮标记。我使用 Button 的`Content`属性来指定图标，即应用于`Path`.

它似乎有效，但作为一个相对的 WPF 新手，欢迎对我的解决方案发表评论。

样式：-

```
<Style x:Key="IconButtonStyle" TargetType="Button">
    <Setter Property="Cursor" Value="Hand"/>
    <Setter Property="IsTabStop" Value="True" />
    <Setter Property="Focusable" Value="True" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border Background="Transparent" Padding="{TemplateBinding Padding}">
                    <Path x:Name="buttonPath" Fill="Blue" Style="{TemplateBinding Content}" />
                </Border>

                <ControlTemplate.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Setter TargetName="buttonPath" Property="Fill" Value="Red"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

示例用法：-

```
<Button Width="40" Height="40" Style="{StaticResource IconButtonStyle}" Content="{StaticResource MetroButtonRightStyle}" /> 
```

# gwt - CellList 与 CellTree 的单元格

> ID：14478136
> 
> 赞同：1
> 
> 时间：2013-01-23T11:03:52.257
> 
> 标签：gwt, celllist

我使用 gwt [CellList](http://gwt.googleusercontent.com/samples/Showcase/Showcase.html#!CwCellList)示例来实现基于单元格的列表框。它使用**TextCell**单元格来表示数据，因为**它只是 text**，并且工作得很好。

现在我必须扩展这个列表以**包含“树”类型的元素**（我的意思是你可以点击列表中的某个元素，如果它不是叶子，它会被打开并显示其子元素的信息）。所以我实现了一个基于 CellTree 的小部件。（[细胞树）](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets#celltree)

我的问题是我不知道如何将“树”类型的项目（实际上是 CellTrees）插入到我的 CellList 中。

我能想到的唯一方法是创建一种表示 CellTree 的新型单元格，扩展“AbstractCell”，并将其用作 CellList 项。

我的实现是：

```
private class TreeCell extends AbstractCell<CellTreeListBox> {

    public TreeCell() {}

    @Override
    public void render(Context context, CellTreeListBox value,
        SafeHtmlBuilder sb)
    {
      sb.appendEscaped(value.getElement().getInnerHTML());
    }
} 
```

这一旦包含在 CellList 中，只会显示根节点，但是当我单击它们时，它们不会被打开！所以这种方法既不会保留事件，也不会保留 selectionModel 的功能......

所以我不知道是否有可能实现一个代表整个 CellTree 的单元格，并保留其事件和功能（如果单击，则打开节点并显示其子节点的信息等...）。

我真的很感激有关此的任何信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:17:00.520

您应该**将**您的替换`CellList`为`CellTree`.

或者`CellList`用一些容器面板（`FlowPanel`, `VerticalPanel`）替换你（手动）放置小部件（`Label`s ，或者可能`CellWidget`用 a `TextCell`），然后将你`CellTree`的插入它们之间以显示它。但是，您将失去单元格小部件的其他功能：`SelectionModel`、分页等。

无论如何，放弃你的`CellList`. 您不能在单元格小部件中嵌入小部件。

# javascript - 用于验证字段的正则表达式

> ID：14478137
> 
> 赞同：0
> 
> 时间：2013-01-23T11:04:01.177
> 
> 标签：javascript, regex

我正在使用验证引擎使用正则表达式验证字段。我几乎完成了我的工作，但有一个问题。我无法为以下内容制作正则表达式：

1.  不允许前导和尾随空格。
2.  中间不允许有多个空格（允许单个空格）。

我只想要这些条件的正则表达式，这样我就可以把它放在任何领域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:12:53.180

当每种语言都可以访问某种修剪功能时，坚持某人输入数据时没有前导或尾随空格是非常懒惰的（而且可用性真的很差）。同样使用双空格：只需替换`" "`为`" "`.

如果你真的必须用正则表达式来做，这应该工作：

```
/^\S+(?!.*\s\s).*\S$/ 
```

这确实假设有效字符串至少有两个字符（开头的 \S 和结尾的 \S）。如果您想允许单个字符串，这将起作用：

```
/^(?!\s.*)(?!.*\s\s).*\S$/ 
```

或者，如果您尝试反向操作并匹配无效输入，这将起作用（即，此正则表达式的任何匹配都意味着字符串无效）：

```
/^\s|\s\s|\s$/ 
```

除非有充分的理由不能这样做，否则即使匹配有效输入，最后一个选项也可能是最好的。即是这样的：

```
var isValid = !value.match(/^\s|\s\s|\s$/); // instead of "var isInvalid = value.match(/^\s|\s\s|\s$/);" 
```

这样做更可取的原因是它更容易让人理解，并且您应该始终支持代码的可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:10:40.503

```
var s = "test test  test ";

// Find multiple spaces
if(s.indexOf("  ") !== -1) {
    alert('Multiple spaces found');
}

// Find leading or trailing space
if (s.indexOf(" ", 0) === 0 || s.indexOf(" ", s.length-1) != -1) {
    alert("Leading or trailing space found");
} 
```

请参阅此小提琴示例[http://jsfiddle.net/powtac/b5mHr/2/](http://jsfiddle.net/powtac/b5mHr/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:12:35.430

```
/^(?!\s)(?!.*\s{2})(?!.*\s$)/ 
```

应该这样做，除非您的输入可能包含换行符。如果是这种情况，请使用`[\s\S]`而不是`.`.

**解释：**

```
^           # Start of string
(?!\s)      # Assert that the first character isn't whitespace
(?!.*\s{2}) # Assert that there are no two consecutive whitespace characters
(?!.*\s$)   # Assert that the last character isn't whitespace 
```

# javascript - 有没有办法找到谷歌浏览器“Aw, Snap”页面的根本原因？

> ID：14478138
> 
> 赞同：4
> 
> 时间：2013-01-23T11:04:02.683
> 
> 标签：javascript, google-chrome

我们有一个 Javascript 库，它为我们的主要产品的核心提供动力。在过去的几天里，当我尝试运行这个库时，Google Chrome 一直在抛出蓝色的“Aw，Snap！出了点问题”屏幕。

该库在其他浏览器上运行良好，并且在我同事的所有 Chrome 副本上也运行良好。

我正在寻找的是某种可以为我指明正确方向的 Google Chrome 登录。这样的事情存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-18T11:37:32.013

由于您正在处理 JavaScript，我的猜测是您的 JavaScript VM 达到了可以生成*Aw-snap*网站的最大分配内存。

这可以通过运行*DevTools*并检查*内存*选项卡来轻松检查。如果是这种情况，代码应该在潜在的内存不足崩溃之前自动暂停。

要对此进行调试，您可以运行采样配置文件来记录内存分配。

有关的：

*   [如何确定是什么导致 Chrome 显示“Aw, Snap”对话框](https://superuser.com/q/607563/87805)
*   [当 Chrome 中出现“Aw Snap”屏幕时如何获取更多信息？](https://stackoverflow.com/q/1728483/55075)
*   [Google Chrome 浏览器有内存限制吗？](https://stackoverflow.com/q/29620041/55075)
*   [chrome进程（选项卡）的最大内存使用量以及如何增加它？](https://stackoverflow.com/q/17491022/55075)

# javascript - 我可以检测 Chrome 是否处于 Windows 8（地铁）模式

> ID：14478140
> 
> 赞同：6
> 
> 时间：2013-01-23T11:04:09.610
> 
> 标签：javascript, google-chrome, google-chrome-extension, microsoft-metro, windows-store-apps

有没有办法检测 Google chrome 是在 Windows 8（地铁）模式还是桌面模式下运行？

我正在编写一个 Chrome 扩展程序，我不希望它在 Metro 模式下运行。

# java - 从 Xpath 获取属性

> ID：14478142
> 
> 赞同：2
> 
> 时间：2013-01-23T11:04:19.640
> 
> 标签：java, xml, xpath

我需要一种方法，可以返回指定 xpath 中指定属性的值。因此，例如，如果我们有并且我们想要 xpath 标记内`xpath = /root/foo/body/part[5]/test[3]`的属性值，那么我需要能够调用一个看起来像这样的方法：`id``test[3]`

```
public String getAttributeValue(String xpath, String attribute) {
     String attributeValue = "xpath/attribute".value();
     return attributeValue;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:09:25.790

您可以尝试使用`@`命令

```
//xpath[@attribute] 
```

请注意，您还可以使用`@`

```
//xpath[@attribute='filtervalue'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:30:48.157

弄清楚了...

```
public String retrieveAttributeValue(Document document, String xpath, String attribute) throws IOException, ParserConfigurationException, SAXException, XPathExpressionException {
    XPath xPath = XPathFactory.newInstance().newXPath();
    XPathExpression xPathExpression = xPath.compile(xpath + "/" + attribute);
    String attributeValue = "" + xPathExpression.evaluate(document, XPathConstants.STRING);
    return attributeValue;
} 
```

# ruby-on-rails - Rails：模型中的电子邮件验证

> ID：14478144
> 
> 赞同：3
> 
> 时间：2013-01-23T11:04:23.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我正在导入包含（姓名、出生日期、电子邮件）的 excel 表并使用以下代码验证模型中的电子邮件

```
validates_format_of :email, :with => /^[a-z0-9_\+-]+(\.[a-z0-9_\+-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*\.([a-z]{2,4})$/, :message => "Invalid email ID" 
```

现在我必须向人们展示具有无效电子邮件格式的人。是否可以通过这种方式或任何其他方式进行验证....

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:13:29.153

浏览[http://my.rails-royce.org/2010/07/21/email-validation-in-ruby-on-rails-without-regexp/](http://my.rails-royce.org/2010/07/21/email-validation-in-ruby-on-rails-without-regexp/)它真的对你有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T12:42:08.103

使用这个我得到了电子邮件无效的人名

```
 if @person.save

 else
    @err << {:name => ..............,:error => @person.errors.messages}
 end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T11:09:09.440

我谦虚地建议不要尝试验证电子邮件格式，因为构成有效电子邮件地址的组合和格式数量众多。

但是，如果您希望遵循这条路径，则可以在[此处查看](http://ex-parrot.com/~pdw/Mail-RFC822-Address.html)完整的 RegEx 。

高温高压

# git - 如何在 NetBeans 合并工具中忽略空格

> ID：14478145
> 
> 赞同：5
> 
> 时间：2013-01-23T11:04:26.473
> 
> 标签：git, netbeans, merge, whitespace, ignore

在 git 合并期间解决冲突时，如何忽略 NetBeans 中的前导和尾随空格。

在 Option > Miscellaneous > Diff 下，您可以将 diff 工具设置为忽略前导的尾随空格，但这在 NetBeans 合并工具中不起作用。

git 支持`git merge -Xignore-all-space`. 有没有办法在 NetBeans 中传递这个标志？

[Git 合并和修复带有两个分支的混合空格和制表符](https://stackoverflow.com/questions/5256769/git-merge-and-fixing-mixed-spaces-and-tabs-with-two-branches)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-07T16:05:23.713

[Evan 现在（2018 年，5 年后），如果您考虑其Git 用户指南](https://netbeans.org/kb/73/ide/git.html#branchMerge)，这似乎无法仅通过 NetBeans 实现：

[![https://netbeans.org/images_www/articles/73/ide/git/merge-small.png](../Images/eeeb9f8c02392cbc2214f30e1a6f1b9c.png)](https://i.stack.imgur.com/TXNG7.png)

您不能将任何合并标志传递给 NetBeans，[也不能设置 git config](https://stackoverflow.com/a/6956669/6309)。
这意味着命令行中的常规`git merge -Xignore-all-space`仍然是最安全的道路。

# php - 使用jquery动态地将id添加到html组件

> ID：14478154
> 
> 赞同：2
> 
> 时间：2013-01-23T11:04:47.140
> 
> 标签：php, javascript, jquery, mysql

我正在尝试自动保存页面的内容并将其转储到数据库中。在插入之前，我想删除 HTML 元素的 id，因为它们是自动生成的，以后除了用户编辑它们的编辑页面之外不需要.（**我已经实现了**）但是，我面临的问题是当用户重新编辑页面时，我想再次添加id。（通过我们编写的随机函数）。这就是我使用 PHP 从数据库中获取数据的方式

```
 <?php
    $sqlEdit = "select revisionContent from tbl_revision where revisionId='".$_SESSION['contentId']."'"; //The query to get the record
    $rsEdit = $dbObj->tep_db_query($sqlEdit);                                                                                //The database object to execute the query   
    $resEdit = $dbObj->getRecord($rsEdit);                                                                                       
    $IdLessContent = $resEdit['revisionContent'];                                                                            //Variable with the record
      ?> 
```

现在，我想在 javascript 中使用这个 PHP 变量，所以我这样做了。

```
 <script language="javascript">
    var getSavedContent = '<?php echo json_encode($IdLessContent); ?>';
    var trimmedCont=($.trim(getSavedContent).slice(1));
    //console.log(trimmedCont);
    var lengthCont= trimmedCont.length;
    var trimmedCont=$.trim(trimmedCont.slice(0,lengthCont-1));
            var pageContent=$('<div class="addId">').append(trimmedCont); //Here I tried creating a div dynamically and appending the content to the div.But now I am not able to manipulate or work on this dyamic div and get NULL when I alert saying $('.addId').html();
            $('.addId').children().attr('id', 'test');               //Itried doing this but does not work 
```

我该如何实现？我尝试添加动态 div，但失败了。DOM 有问题吗？我没有在 DOM 中获取动态 div 吗？请发表您的意见并分享想法。
感谢您的时间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:28:48.617

在 JS 控制台中运行它，你就会明白：

```
var some = $('<div class="myadd">');
some.append('<span>hey</span>');

console.log(some.html());
console.log($('.myadd').html());

some.children().attr('id', 'neat');

console.log(some.html());
console.log($('.myadd').html()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:26:26.023

我认为问题在于，您动态创建了 div，但您没有将其附加到您的 document.body 或类似的东西。因此，您的选择器根本找不到 DOM 中的元素。但是即使没有将动态创建的 div 添加到 DOM，也应该可以直接访问它，所以`pageContent.children().attr('id', 'test');`应该可以工作，但这会为 div 的所有子项分配一个 id。您可以使用`var pageContent=$('<div class="addId" id="test">').append(trimmedCont);`或`pageContent.get(0).id = "test"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T11:22:43.977

你为什么不试试`getJson`jquery函数。

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

$(document).ready(function()
{
    $.getJSON('x-request.php', function(data) {
        var items = [];
        $.each(data, function(key, val)
        {
            items.push('<li id="' + key + '">' + val.from + ' -> ' + val.to + '</li>');
        });
        $('<ul/>',
        {
            'class': 'my-new-list',
            html: items.join('')
        }).appendTo('body');
    });

});

</script>
```

并编写查询以获取`json_encode`字符串`x-request.php`

# javascript - 如何使用 cgscenegraph 框架设置中心旋转位置

> ID：14478161
> 
> 赞同：0
> 
> 时间：2013-01-23T11:05:00.953
> 
> 标签：javascript, html, canvas, frameworks, javascript-framework

我想在开始位置设置为中心的节点上进行旋转，但是动画函数占据我节点的左上角.....

我有类似的东西：

```
sceneGraph.animate(circleNode, "rotation.angle", 400, 0, 2, "linear", 0, true); 
```

你可以帮帮我吗 ？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:42:30.517

您可以使用节点的 rotationCenter 属性指定节点的旋转点。

示例：MyNode.rotationCenter = new CGSGPosition (0.5, 0.5);

希望这可以帮到你 ：）

# c - 将套接字绑定到网络接口

> ID：14478167
> 
> 赞同：23
> 
> 时间：2013-01-23T11:05:25.810
> 
> 标签：c, linux, sockets

如何将套接字绑定到特定的网络接口？我尝试`setsockopt`在服务器端使用，但客户端仍然可以通过 eth0 和 lo 接口访问服务。

我可以通过设置特定的 IP 地址来实现这一点 `serv_addr.sin_addr.s_addr`。

但我怀疑我们只能使用`setsockopt`（不提及 IP 地址）绑定到接口。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-23T11:31:07.603

`SO_BINDTODEVICE`您可以通过设置套接字选项绑定到特定接口。

```
struct ifreq ifr;

memset(&ifr, 0, sizeof(ifr));
snprintf(ifr.ifr_name, sizeof(ifr.ifr_name), "eth0");
if (setsockopt(s, SOL_SOCKET, SO_BINDTODEVICE, (void *)&ifr, sizeof(ifr)) < 0) {
    ... error handling ...
} 
```

**警告**：*您必须是 root 并且具有`CAP_NET_RAW`使用此选项的能力。*

第二种方法是您可以使用[getifaddrs()](http://www.linuxhowtos.org/manpages/3/getifaddrs.htm)解析绑定到接口的 IP 地址。

请按照后一个链接获取综合示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:11:13.887

你能做到的唯一方法就是你提到的 -

> 通过使用设置特定的 IP 地址`serv_addr.sin_addr.s_addr`

如果不知道要绑定的地址，您将无法执行此操作。

如果需要，您可以使用`ioctl`s 来确定当前的 IP 地址，尽管这些天可能有更聪明的方法来执行此操作 - 我最近在现代 Linux 发行版中没有做太多事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-04T16:44:48.847

也许有人会觉得它很有用，所以我分享了对我有用的解决方案（Linux、C++）：

```
uint32_t interfaceIndex = if_nametoindex(interfaceName); 
```

其中“interfaceName”是我们要绑定的接口的名称，例如“eth0”（参见：[https](https://linux.die.net/man/3/if_nametoindex) ://linux.die.net/man/3/if_nametoindex ）。现在我们可以通过“sin6_scope_id”在套接字地址结构中指定这个接口（如果我们使用 IPv6）：

```
struct sockaddr_in6 socketAddress;
socketAddress.sin6_scope_id = interfaceIndex; 
```

现在我们可以像往常一样通过“绑定”将套接字绑定到接口。

# python-2.7 - Python中按扩展名对文件进行排序的函数是什么？

> ID：14478170
> 
> 赞同：1
> 
> 时间：2013-01-23T11:05:32.330
> 
> 标签：python-2.7

```
import os
import string
os.chdir('C:\Python27')
x=os.listdir('C:\Python27')

y=[f for f in os.listdir(dirname)
    if os.path.isfile(os.path.join(dirname, f))]

for k in y:
    fileName, fileExtension = os.path.splitext(k)
    print fileName,fileExtension 
```

现在，我想按扩展名对文件进行排序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T11:31:39.267

按名称排序，然后按扩展名：

```
y.sort(key=os.path.splitext) 
```

它产生顺序：

```
a.2
a.3
b.1 
```

仅按扩展名排序：

```
y.sort(key=lambda f: os.path.splitext(f)[1]) 
```

它产生顺序：

```
b.1
a.2
a.3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:09:23.867

使用`key`函数对列表进行排序：

```
y.sort(key=lambda f: os.path.splitext(f)) 
```

# android - android中带有位置侦听器的后台服务

> ID：14478179
> 
> 赞同：77
> 
> 时间：2013-01-23T11:05:45.667
> 
> 标签：android, android-service, android-location

我正在创建一个将在自己的进程中运行的后台服务。如果设备位置已更改，它应该允许我收听。在通知 UI 之前，我应该能够更改移动距离等标准。

我该怎么做？`LocationListener`我对服务和实现有一点了解。网络上的任何教程将不胜感激。

我从堆栈溢出中获得了一个[反向链接](https://stackoverflow.com/questions/12227446/location-listener-in-background-service-android)，但我不太了解它。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-01-23T11:11:25.633

首先，您需要创建一个`Service`. 在那`Service`，创建一个类扩展`LocationListener`。为此，请使用以下代码片段`Service`：

```
public class LocationService extends Service {
public static final String BROADCAST_ACTION = "Hello World";
private static final int TWO_MINUTES = 1000 * 60 * 2;
public LocationManager locationManager;
public MyLocationListener listener;
public Location previousBestLocation = null;

Intent intent;
int counter = 0;

@Override
public void onCreate() {
    super.onCreate();
    intent = new Intent(BROADCAST_ACTION);
}

@Override
public void onStart(Intent intent, int startId) {
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    listener = new MyLocationListener();
    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(this, Manifest.permission.ACCESS_COARSE_LOCATION) != PackageManager.PERMISSION_GRANTED) {
        return;
    }
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 4000, 0, (LocationListener) listener);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 4000, 0, listener);
}

@Override
public IBinder onBind(Intent intent)
{
    return null;
}

protected boolean isBetterLocation(Location location, Location currentBestLocation) {
    if (currentBestLocation == null) {
        // A new location is always better than no location
        return true;
    }

    // Check whether the new location fix is newer or older
    long timeDelta = location.getTime() - currentBestLocation.getTime();
    boolean isSignificantlyNewer = timeDelta > TWO_MINUTES;
    boolean isSignificantlyOlder = timeDelta < -TWO_MINUTES;
    boolean isNewer = timeDelta > 0;

    // If it's been more than two minutes since the current location, use the new location
    // because the user has likely moved
    if (isSignificantlyNewer) {
        return true;
        // If the new location is more than two minutes older, it must be worse
    } else if (isSignificantlyOlder) {
        return false;
    }

    // Check whether the new location fix is more or less accurate
    int accuracyDelta = (int) (location.getAccuracy() - currentBestLocation.getAccuracy());
    boolean isLessAccurate = accuracyDelta > 0;
    boolean isMoreAccurate = accuracyDelta < 0;
    boolean isSignificantlyLessAccurate = accuracyDelta > 200;

    // Check if the old and new location are from the same provider
    boolean isFromSameProvider = isSameProvider(location.getProvider(),
            currentBestLocation.getProvider());

    // Determine location quality using a combination of timeliness and accuracy
    if (isMoreAccurate) {
        return true;
    } else if (isNewer && !isLessAccurate) {
        return true;
    } else if (isNewer && !isSignificantlyLessAccurate && isFromSameProvider) {
        return true;
    }
    return false;
}

/** Checks whether two providers are the same */
private boolean isSameProvider(String provider1, String provider2) {
    if (provider1 == null) {
        return provider2 == null;
    }
    return provider1.equals(provider2);
}

@Override
public void onDestroy() {
    // handler.removeCallbacks(sendUpdatesToUI);     
    super.onDestroy();
    Log.v("STOP_SERVICE", "DONE");
    locationManager.removeUpdates(listener);
}

public static Thread performOnBackgroundThread(final Runnable runnable) {
    final Thread t = new Thread() {
        @Override
        public void run() {
            try {
                runnable.run();
            } finally {

            }
        }
    };
    t.start();
    return t;
}
public class MyLocationListener implements LocationListener
{

    public void onLocationChanged(final Location loc)
    {
        Log.i("*****", "Location changed");
        if(isBetterLocation(loc, previousBestLocation)) {
            loc.getLatitude();
            loc.getLongitude();
            intent.putExtra("Latitude", loc.getLatitude());
            intent.putExtra("Longitude", loc.getLongitude());
            intent.putExtra("Provider", loc.getProvider());
            sendBroadcast(intent);

        }
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }

    public void onProviderDisabled(String provider)
    {
        Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show();
    }

    public void onProviderEnabled(String provider)
    {
        Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT).show();
    }
} 
```

`Service`以您想要的方式在项目中的任何位置添加它！:)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-04T11:43:54.947

我知道我发布这个答案有点晚了，但我觉得值得使用谷歌的保险丝位置提供商服务来获取当前位置。

这个api的主要特点是：

**1.简单的API：**让您选择您的准确度水平以及功耗。

**2.立即可用：**让您的应用程序立即访问最佳、最近的位置。

**3.Power-efficiency：**它选择最有效的方式以更少的功耗获得位置

**4.多功能性：**满足广泛的需求，从需要高度精确定位的前台使用到需要定期位置更新且功耗影响可忽略不计的后台使用。

它在更新位置的同时也很灵活。如果您只在应用程序启动时想要当前位置，那么您可以使用`getLastLocation(GoogleApiClient)`方法。

如果您想不断更新您的位置，那么您可以使用`requestLocationUpdates(GoogleApiClient,LocationRequest, LocationListener)`

你可以在这里找到一个关于保险丝位置的非常好的博客，也可以在[这里](https://developer.android.com/training/location/index.html)[找到](http://javapapers.com/android/android-location-fused-provider/)关于保险丝位置的谷歌文档。

**更新**

根据从 Android O 开始的开发人员文档，他们增加了对后台位置的新限制。

> 如果您的应用程序在后台运行，则位置系统服务每小时只会为您的应用程序计算几次新位置。即使您的应用请求更频繁的位置更新也是如此。但是，如果您的应用在前台运行，与 Android 7.1.1（API 级别 25）相比，位置采样率没有变化。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-06-19T12:00:42.557

Background location service. It will be restarted even after killing the app.

**MainActivity.java**

```
public class MainActivity extends AppCompatActivity {
    AlarmManager alarmManager;
    Button stop;
    PendingIntent pendingIntent;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        if (alarmManager == null) {
            alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
            Intent intent = new Intent(this, AlarmReceive.class);
            pendingIntent = PendingIntent.getBroadcast(this, 0, intent, 0);
            alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 30000,
                    pendingIntent);
        }
    }
} 
```

**BookingTrackingService.java**

```
public class BookingTrackingService extends Service implements LocationListener {

    private static final String TAG = "BookingTrackingService";
    private Context context;
    boolean isGPSEnable = false;
    boolean isNetworkEnable = false;
    double latitude, longitude;
    LocationManager locationManager;
    Location location;
    private Handler mHandler = new Handler();
    private Timer mTimer = null;
    long notify_interval = 30000;

    public double track_lat = 0.0;
    public double track_lng = 0.0;
    public static String str_receiver = "servicetutorial.service.receiver";
    Intent intent;

    @Nullable
    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();

        mTimer = new Timer();
        mTimer.schedule(new TimerTaskToGetLocation(), 5, notify_interval);
        intent = new Intent(str_receiver);
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        this.context = this;

        return START_NOT_STICKY;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Log.e(TAG, "onDestroy <<");
        if (mTimer != null) {
            mTimer.cancel();
        }
    }

    private void trackLocation() {
        Log.e(TAG, "trackLocation");
        String TAG_TRACK_LOCATION = "trackLocation";
        Map<String, String> params = new HashMap<>();
        params.put("latitude", "" + track_lat);
        params.put("longitude", "" + track_lng);

        Log.e(TAG, "param_track_location >> " + params.toString());

        stopSelf();
        mTimer.cancel();

    }

    @Override
    public void onLocationChanged(Location location) {

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {

    }

    @Override
    public void onProviderEnabled(String provider) {

    }

    @Override
    public void onProviderDisabled(String provider) {

    }

    /******************************/

    private void fn_getlocation() {
        locationManager = (LocationManager) getApplicationContext().getSystemService(LOCATION_SERVICE);
        isGPSEnable = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
        isNetworkEnable = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnable && !isNetworkEnable) {
            Log.e(TAG, "CAN'T GET LOCATION");
            stopSelf();
        } else {
            if (isNetworkEnable) {
                location = null;
                locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000, 0, this);
                if (locationManager != null) {
                    location = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {

                        Log.e(TAG, "isNetworkEnable latitude" + location.getLatitude() + "\nlongitude" + location.getLongitude() + "");
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                        track_lat = latitude;
                        track_lng = longitude;
//                        fn_update(location);
                    }
                }
            }

            if (isGPSEnable) {
                location = null;
                locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0, this);
                if (locationManager != null) {
                    location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                    if (location != null) {
                        Log.e(TAG, "isGPSEnable latitude" + location.getLatitude() + "\nlongitude" + location.getLongitude() + "");
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                        track_lat = latitude;
                        track_lng = longitude;
//                        fn_update(location);
                    }
                }
            }

            Log.e(TAG, "START SERVICE");
            trackLocation();

        }
    }

    private class TimerTaskToGetLocation extends TimerTask {
        @Override
        public void run() {

            mHandler.post(new Runnable() {
                @Override
                public void run() {
                    fn_getlocation();
                }
            });

        }
    }

//    private void fn_update(Location location) {
//
//        intent.putExtra("latutide", location.getLatitude() + "");
//        intent.putExtra("longitude", location.getLongitude() + "");
//        sendBroadcast(intent);
//    }
} 
```

**AlarmReceive.java (BroadcastReceiver)**

```
public class AlarmReceive extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.e("Service_call_"  , "You are in AlarmReceive class.");
        Intent background = new Intent(context, BookingTrackingService.class);
//        Intent background = new Intent(context, GoogleService.class);
        Log.e("AlarmReceive ","testing called broadcast called");
        context.startService(background);
    }
} 
```

**AndroidManifest.xml**

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

 <service
            android:name=".ServiceAndBroadcast.BookingTrackingService"
            android:enabled="true" />

        <receiver
            android:name=".ServiceAndBroadcast.AlarmReceive"
            android:exported="false">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-06T08:09:16.947

很容易不需要创建类扩展 LocationListener 1-变量

```
private LocationManager mLocationManager;
private LocationListener mLocationListener;
private static double currentLat =0;
private static double currentLon =0; 
```

2- onStartService()

```
@Override public void onStartService() {
    addListenerLocation();
} 
```

3- 方法 addListenerLocation()

```
 private void addListenerLocation() {
    mLocationManager = (LocationManager)
            getSystemService(Context.LOCATION_SERVICE);
    mLocationListener = new LocationListener() {
        @Override
        public void onLocationChanged(Location location) {
            currentLat = location.getLatitude();
            currentLon = location.getLongitude();

            Toast.makeText(getBaseContext(),currentLat+"-"+currentLon, Toast.LENGTH_SHORT).show();

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
        }

        @Override
        public void onProviderEnabled(String provider) {
            Location lastKnownLocation = mLocationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            if(lastKnownLocation!=null){
                currentLat = lastKnownLocation.getLatitude();
                currentLon = lastKnownLocation.getLongitude();
            }

        }

        @Override
        public void onProviderDisabled(String provider) {
        }
    };
    mLocationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 500, 10, mLocationListener);
} 
```

4- onDestroy()

```
@Override
public void onDestroy() {
    super.onDestroy();
    mLocationManager.removeUpdates(mLocationListener);
} 
```

# json - DataTables json 解析错误

> ID：14478183
> 
> 赞同：1
> 
> 时间：2013-01-23T11:05:50.847
> 
> 标签：json, datatables, parsing-error

这是一个常见问题，我已经研究了谷歌可以提供的所有答案，所以我很抱歉再次问这个问题。

Firebug 将响应显示为

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

{ "aaData" : [ [ "A",
        "0.67",
        "0.66",
        "0.66",
        "0.66",
        "0.78",
        "1.52",
        "0.00",
        "0.00",
        "-15.38",
        "1970-01-01"
      ],
      [ "AA",
        "0.11",
        "0.12",
        "0.12",
        "0.14",
        "0.12",
        "-8.33",
        "0.00",
        "-14.29",
        "16.67",
        "2013-04-08"
      ],
      [ "AACC",
        "0.03",
        "0.04",
        "0.04",
        "0.04",
        "0.10",
        "-25.00",
        "0.00",
        "0.00",
        "-60.00",
        "2013-03-04"
      ],
      [ "AAN",
        "0.50",
        "0.50",
        "0.50",
        "0.50",
        "0.49",
        "0.00",
        "0.00",
        "0.00",
        "2.04",
        "2013-02-04"
      ],
      [ "AAON",
        "0.23",
        "0.23",
        "0.22",
        "0.22",
        "0.20",
        "0.00",
        "4.55",
        "0.00",
        "10.00",
        "2013-03-11"
      ],
      [ "AAP",
        "0.76",
        "0.76",
        "0.76",
        "0.76",
        "0.76",
        "0.00",
        "0.00",
        "0.00",
        "0.00",
        "2013-02-07"
      ],
      [ "AAPL",
        "13.42",
        "13.34",
        "13.30",
        "13.34",
        "15.45",
        "0.60",
        "0.30",
        "-0.30",
        "-13.66",
        "2013-01-    23"
      ]
    ],
  "iTotalDisplayRecords" : "7",
  "iTotalRecords" : "7",
  "sEcho" : 1
} 
```

jsonlint.com 说 json 是有效的，但为什么 apache 将 Doctype 放在响应前面？这是导致错误吗？

Firebug 还将标题报告为：

```
Connection  Keep-Alive
Content-Length  798
Content-Type    application/json
Date    Wed, 23 Jan 2013 09:18:35 GMT
Keep-Alive  timeout=5, max=100
Server  Apache/2.2.22 (Ubuntu)
X-Powered-By    PHP/5.4.6-1ubuntu1.1 
```

我正在使用来自 DataTables 的 server_processing.php 脚本

```
header('Content-Type: application/json');
echo $output; 
```

我的 php 的相关部分是：

```
 $(document).ready(function() {
                $('#example').dataTable( {
                    "bProcessing": true,
                    "bServerSide": true,
                    "sAjaxSource": "server_processing.php",
                    "sPaginationType": "full_numbers"
                } );
            } );
        </script>
    </head>
    <body>
    <div id="dynamic">
    <table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
    <thead>
        <tr>
            <th>Symbol</th>
            <th>Current Estimate</th>
            <th>7 days ago</th>
            <th>30 days ago</th>
            <th>60 days ago</th>
            <th>90 days ago</th>
            <th>% Change Current</th>
            <th>% Change 7</th>
            <th>% Change 30</th>
            <th>% Change 60</th>
            <th>Next Earnings Date</th></th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="10" class="dataTables_empty">Loading data from server</td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <th>Symbol</th>
            <th>Current Estimate</th>
            <th>7 days ago</th>
            <th>30 days ago</th>
            <th>60 days ago</th>
            <th>90 days ago</th>
            <th>% Change Current</th>
            <th>% Change 7</th>
            <th>% Change 30</th>
            <th>% Change 60</th>
        </tr>
    </tfoot>
   </table> 
```

我已经浪费了很多时间来解决这个问题，所以非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T00:24:35.773

我发现了我的问题。我有一个添加文档类型的前置函数。一旦删除，一切都很好。我通过将我的代码移动到另一个没有前置的开发站点找到了它并且它有效。

# php - 一个变量有多个值？

> ID：14478184
> 
> 赞同：1
> 
> 时间：2013-01-23T11:05:51.800
> 
> 标签：php, pdo

我制作了一个脚本来将“活动”添加到“指南”中。当我添加了一个活动时，添加该特定活动的按钮必须消失。

嗯，我做了这个脚本：

```
<?php
//userid
$sql = "SELECT UserID FROM user WHERE Username = '".$_SESSION['Username']."' ";
$stm = $db->prepare($sql);
$result = $stm->execute(array());
while($row = $stm->fetch(PDO::FETCH_ASSOC)) {
$userid = $row['UserID'];
}

//activityid
$sql =  "SELECT activity.*"."FROM user_activity, activity "."WHERE user_activity.ActivityID = activity.ActivityID AND user_activity.UserID = '".$userid."' " ;
$stm = $db->prepare($sql);
$result = $stm->execute(array());
while($row = $stm->fetch(PDO::FETCH_ASSOC)) {
$activityid = $row['ActivityID'];
}

//Shows activities in database staan.
$sql = "SELECT * FROM activity";
$stm = $db->prepare($sql);
$result = $stm->execute(array());   

while($row = $stm->fetch(PDO::FETCH_ASSOC))
{
    echo '<div id="activity'.$row['ActivityID'].'">';
    echo '<img src="data:image/jpeg;base64,' . base64_encode( $row['ActivityIMG'] ) . '" >', '<br>';
    $instantguide = $row['ActivityID'];
    if($activityid == $instantguide) {
    echo 'this activity is not in your guide.';
    } else {
    echo '<input type="button" class="addActivity" onclick="MakeRequest(' . $instantguide . ')" value="Activiteit toevoegen" data-activity="' . $row['ActivityID'] . '">';
    }
    echo '</div>';
}
?> 
```

好吧，这个脚本有两个问题：

1：`$activityid`只能有一个值，所以如果我向我的指南添加一个活动，该活动的按钮就会消失，但是当我向我的指南添加另一个活动时，该活动的按钮会消失，但第一个活动的按钮会重新出现. 那是因为价值的`$activityid`变化。

2：我做了一个 if/else 语句来显示或不显示按钮。在该语句中，您将找到`$activityid`. 但是当指南中没有活动时，我会得到`$activityid`不存在的错误，那是因为当指南中有活动时会生成变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:42:14.213

`$activityId`创建一个关联数组，每个活动 id 一个条目。然后您可以使用`isset`来确定该值是否存在，如果存在则将其设置为 0/1 以决定是否显示该活动按钮。

更多关于数组[的信息。](http://php.net/manual/en/language.types.array.php)

# java - JSF selectonemenu 无法实例化类

> ID：14478186
> 
> 赞同：2
> 
> 时间：2013-01-23T11:05:55.857
> 
> 标签：java, jsf, primefaces

我想在我的 JSF 应用程序中创建一个选择一个菜单对象。每当我尝试填写列表时，我都会得到“无法实例化类”异常。这是我的豆：

```
@ManagedBean(name = "districtController")
@SessionScoped
public class DistrictController implements Serializable {

    private District current;
    private DataModel items = null;
    @EJB
    private TestoBeans.DistrictFacade ejbFacade;
    private PaginationHelper pagination;
    private int selectedItemIndex;

    public DistrictController() {

        Query q = em.createQuery("select d.dName from District d",District.class);
        List<String> values = q.getResultList();

        for(String d:values){
            System.out.println(d);
        }

    }

    @PersistenceContext(unitName = "TestoIBBPU")
    private EntityManager em;
    @Resource
    private javax.transaction.UserTransaction utx;

    public District getSelected() {
        if (current == null) {
            current = new District();
            selectedItemIndex = -1;
        }
        return current;
    }

    private DistrictFacade getFacade() {
        return ejbFacade;
    }

    public PaginationHelper getPagination() {
        if (pagination == null) {
            pagination = new PaginationHelper(10) {
                @Override
                public int getItemsCount() {
                    return getFacade().count();
                }

                @Override
                public DataModel createPageDataModel() {
                    return new ListDataModel(getFacade().findRange(new int[]{getPageFirstItem(), getPageFirstItem() + getPageSize()}));
                }
            };
        }
        return pagination;
    }

    public String prepareList() {
        recreateModel();
        return "List";
    }

    public String prepareView() {
        current = (District) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "View";
    }

    public String prepareCreate() {
        current = new District();
        selectedItemIndex = -1;
        return "Create";
    }

    public String create() {
        try {
            getFacade().create(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("DistrictCreated"));
            return prepareCreate();
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String prepareEdit() {
        current = (District) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        return "Edit";
    }

    public String update() {
        try {
            getFacade().edit(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("DistrictUpdated"));
            return "View";
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
            return null;
        }
    }

    public String destroy() {
        current = (District) getItems().getRowData();
        selectedItemIndex = pagination.getPageFirstItem() + getItems().getRowIndex();
        performDestroy();
        recreatePagination();
        recreateModel();
        return "List";
    }

    public String destroyAndView() {
        performDestroy();
        recreateModel();
        updateCurrentItem();
        if (selectedItemIndex >= 0) {
            return "View";
        } else {
            // all items were removed - go back to list
            recreateModel();
            return "List";
        }
    }

    private void performDestroy() {
        try {
            getFacade().remove(current);
            JsfUtil.addSuccessMessage(ResourceBundle.getBundle("/Bundle").getString("DistrictDeleted"));
        } catch (Exception e) {
            JsfUtil.addErrorMessage(e, ResourceBundle.getBundle("/Bundle").getString("PersistenceErrorOccured"));
        }
    }

    private void updateCurrentItem() {
        int count = getFacade().count();
        if (selectedItemIndex >= count) {
            // selected index cannot be bigger than number of items:
            selectedItemIndex = count - 1;
            // go to previous page if last page disappeared:
            if (pagination.getPageFirstItem() >= count) {
                pagination.previousPage();
            }
        }
        if (selectedItemIndex >= 0) {
            current = getFacade().findRange(new int[]{selectedItemIndex, selectedItemIndex + 1}).get(0);
        }
    }

    public DataModel getItems() {
        if (items == null) {
            items = getPagination().createPageDataModel();
        }
        return items;
    }

    private void recreateModel() {
        items = null;
    }

    private void recreatePagination() {
        pagination = null;
    }

    public String next() {
        getPagination().nextPage();
        recreateModel();
        return "List";
    }

    public String previous() {
        getPagination().previousPage();
        recreateModel();
        return "List";
    }

    public SelectItem[] getItemsAvailableSelectMany() {
        return JsfUtil.getSelectItems(ejbFacade.findAll(), false);
    }

    public SelectItem[] getItemsAvailableSelectOne() {
        return JsfUtil.getSelectItems(ejbFacade.findAll(), true);
    }

    @FacesConverter(forClass = District.class)
    public static class DistrictControllerConverter implements Converter {

        public Object getAsObject(FacesContext facesContext, UIComponent component, String value) {
            if (value == null || value.length() == 0) {
                return null;
            }
            DistrictController controller = (DistrictController) facesContext.getApplication().getELResolver().
                    getValue(facesContext.getELContext(), null, "districtController");
            return controller.ejbFacade.find(getKey(value));
        }

        java.lang.Integer getKey(String value) {
            java.lang.Integer key;
            key = Integer.valueOf(value);
            return key;
        }

        String getStringKey(java.lang.Integer value) {
            StringBuffer sb = new StringBuffer();
            sb.append(value);
            return sb.toString();
        }

        public String getAsString(FacesContext facesContext, UIComponent component, Object object) {
            if (object == null) {
                return null;
            }
            if (object instanceof District) {
                District o = (District) object;
                return getStringKey(o.getId());
            } else {
                throw new IllegalArgumentException("object " + object + " is of type " + object.getClass().getName() + "; expected type: " + District.class.getName());
            }
        }
    }

    private Map<String,String> district = new HashMap<String,String>();

    public Map<String, String> getDistrict() {
        return district;
    }

    public void setDistrict(Map<String, String> district) {
        this.district = district;
    }

    public void persist(Object object) {
        try {
            utx.begin();
            em.persist(object);
            utx.commit();
        } catch (Exception e) {
            Logger.getLogger(getClass().getName()).log(Level.SEVERE, "exception caught", e);
            throw new RuntimeException(e);
        }
    }

} 
```

我怎样才能做到这一点？感谢您的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:23:27.070

您不能在构造函数中使用 entityManager。由于注射尚未发生

而是将此代码移动到带有 @PostConstruct 注释的方法

```
@PostConstruct
public init() {

    Query q = em.createQuery("select d.dName from District d",District.class);
    districtValues = q.getResultList();

    for(String d:districtValues){
        System.out.println(d);
    }
} 
```

在注入 EM 和 EJB 后，将调用方法注解 @PostConstruct。

学习依赖注入时的一个提示是保持示例非常小，并让基本的端到端功能正常工作。

# django - 类似于 postgre bigint[] 的 Django 过滤器

> ID：14478188
> 
> 赞同：0
> 
> 时间：2013-01-23T11:06:05.573
> 
> 标签：django, django-models

我有一列 - > items_ids 这是 postgre bigint[]

所以我可以将 items_ids 设置为 [34L,23L, 45L, 32L] 或 [23L, 43L, 34L, 33L] 等等。

所以我的问题是如何对包含 33L 的所有行使用过滤器。

我用了`Mymodels.objects.filter(item_ids__icontain = 23L)`

但似乎不起作用。

如何更改我的查询。

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:15:14.067

从过滤器中删除 L 并尝试

```
Mymodels.objects.filter(item_ids__icontain = 23) 
```

这应该工作

# playframework - 我应该捕获异常并返回 error() 还是只是从 Play 框架中的控制器中抛出异常

> ID：14478189
> 
> 赞同：4
> 
> 时间：2013-01-23T11:06:09.537
> 
> 标签：playframework

我和我的团队对 Play 来说还比较陌生！框架（1.2.5），我们已经创建了相当多的代码，在我们的控制器中看起来与此类似。

```
public static void list() {
  try {
    List<ActionModel> actions = ActionModel.loadActions();
    render( actions );
  } catch ( Exception ex ) {
    error();
  }
} 
```

异常来自我们的模型层，我们在其中包含一些自定义代码，而不是通常的 Play Framework 模型。我的问题是，可以跳过 try catch 并从控制器方法中抛出异常吗？这实际上是一种更正确的处理方式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T11:38:07.893

您的代码实际上什么都不做，因为 PlayFramework 将做几乎完全相同的事情，即捕获任何未捕获的异常并调用 error() 以输出 500 内部错误。

在我的项目中，我们报告任何意外错误，换句话说，通过向开发人员发送电子邮件来报告异常，基本上是一些如下代码：

```
public class ErrorHelper extends Controller{
    @Catch(Exception.class) 
    public static void handleException(final Exception e) {
        String errorCode = ErrorHelper.generateErrorCode();
        renderArgs.put("errorCode", errorCode);
        new Job() {
            @Override
            public void doJob() throws Exception {
                Mail.reportError(errorCode, e);
            }
        }.now();
    }
} 
```

然后在您的控制器中，您需要`@With(ErrorHelper.class)`.

您还可以`500.html`通过向最终用户显示错误代码并要求他们使用它来呼叫技术支持来自定义您的文件，如果没有例外，应该已经收到一封电子邮件。

# apache-flex - 无法在 flex 中使用许多 PrintDataGrid 进行打印

> ID：14478193
> 
> 赞同：0
> 
> 时间：2013-01-23T11:06:24.690
> 
> 标签：apache-flex, printing

我有一个带有 3 个数据网格的标题窗口，我必须添加打印功能。基本上，我在其 printview 文件中有三个带有动态数据的 PrintDataGrid。问题是我无法以正确的方式打印。它适用于小数据。但是，如果我有任何数据网格出现大数据问题，则该数据网格会出现在下一页上，因为 validNextPage() 仅适用于此。因此打印顺序会损坏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:12:49.963

我认为最可靠的打印方式是从数据网格行中生成 PDF 并从那里开始。一个例子是[here](http://blog.kreatx.com/2011/11/11/flex-printing-print-preview-pdf-generation/)

# php - php安全快速

> ID：14478197
> 
> 赞同：0
> 
> 时间：2013-01-23T11:06:44.807
> 
> 标签：php, security

在接下来的几天里，我必须保护一个网站（我做了）我想我会写到 config.php 文件（在所有 php 页面中调用）

```
while($value = current($_POST)){
    $_POST[key($_POST)]=htmlentities($value);
    next($_POST);
} 
```

在 config.php 中，您认为我会因各种 xxs 和 sql 注入而成为 siscuro 吗？我知道必须以不同的方式验证每个字段，并且数据库最好不要包含 html 实体。

1）除了发布，获取（也许是请求）我应该过滤哪些其他变量？2）这种方法使我免受多次代码注入（xxs，sql注入等..）的影响？

编辑：如果我放 mysql_real_escape_string 而不是 htmlentities 会更好？我想通过数据验证等来确保安全性不完整……但要防止注入：sql和xxs以及其他注入

编辑：当然，如果您使用“ddd”也将提供我删除 php 标签的功能（尽管我确信该网站不会运行）

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:20:22.207

请不要在同一个句子中使用“安全”和“快速”这两个词。它可能不会很好地结束...... :)

正如您已经提到的，不将 HTML 实体存储在数据库中会更“干净”，而是`htmlentities`在显示输出时应用（或者您使用为您处理转义的模板引擎）。

`htmlentities`**对 SQL 注入没有**帮助（想象一下`htmlentities("' OR 1=1 --")`）。你需要类似的东西`mysql_real_escape_string`——`$pdo->quote`尽管准备好的陈述是最好的方法。

但是，这很难（如果不是不可能的话）应用在顶层方法中。最好看看您使用的 SQL 语句，并用准备好的语句替换它们，或者至少转义您在这些查询中使用的任何输入参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:20:36.830

如果是那么简单，每个人都会这样做。没有人会建议使用良好的实践来编写安全代码。这不是要走的路。有时您可能确实需要数据库中的那些值，这些值可能会被您的“包罗万象”代码错误地更改。包罗万象不是安全验证机制的方法。

> 在接下来的几天里，我将不得不保护一个网站

如果您继续尝试以这种方式保护您的网站，那么它最多只能在**接下来的几天内**保持安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T11:55:08.217

虽然在构建站点时执行此类操作通常是个好主意。不同的网站需要不同的安全级别是合乎逻辑的。只有您访问的本地网站可能不需要，而小型“内部网”风格的网站可能只需要基本的安全性。

如果您认为该站点只需要可以在几天内实施的安全级别。然后我会说第一步是返回并确保所有用户输入都通过一个`mysql_real_escape_string()`函数或类似函数运行，具体取决于您的 API（看起来这个函数现在实际上已经被贬值了）。此函数转义特殊字符，以便将其放在 MySQL 查询中是安全的。

其次，在某些情况下，您可以使用诸如`preg_match()`检查字符串是否与预期输入匹配的函数。这意味着您可以检查地址是否与地址格式匹配，并且与姓名和电话号码等相同。这意味着您可以轻松地限制长度和数据类型。

我认为这是保护网站的第一步，这意味着用户不能（微不足道地）将他们喜欢的任何内容保存到您的数据库中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T11:43:13.143

The best approach is to define data-type for each input, not just globally filter all input data as you proposed. for example: Consider these fields: Name: E-Mail: Age: Country: Address: Phone Number: Plain text (textarea): file (file upload):

Now, if you want to secure these fields, you have to deal with each of them individually. 1- Name: define maximum character length and data type (format), usually Name consists of only (A-z and space) and sometimes one single quota ('), or a dot (.) will be there if someone entered a title like Eng. Mr. now, lets check that field, consider

```
<?php
$name = $_POST['name'];
$name_max_length = 30;
$name_min_length = 5;
$name_pattern = "/[a-zA-Z'\.\ ]{$name_min_length, $name_max_length}/";
if(!preg_match($name_pattern, $name)){
 $error[] = "Please enter valid character for name field";
}else{
 //lets now filter it for safe input
 //above check not passes any kind of XSS, but it passes SQL injection
 //we need to clear it from SQL injection 
 $name = htmlentities($name, ENT_QUOTES);
 //ENT_QUOTES: Will convert both double and single quotes.
}
?> 
```

2- Age: it must be integer, you can simply check it with built-in PHP function:

```
<?php
$age = $_POST['age'];
if(!is_int($age)){
$error[] = "Please enter valid number in Age field";
}
?> 
```

3- Plain text: again, use htmlentities($name, ENT_QUOTES) 4- File upload: - Check file extension, you have to create list of white-extensions and then compare uploaded file extension with white list for example:

```
<?php
$extensions = array('png', 'jpeg', 'gif');
if(!in_array($current_file_ext, $extensions)){
 $error[] = "Please select valid file type! (".implode(", ", $extensions);
}
?> 
```

Finally, before entering these data, check $error which an array if such error occured

```
<?php 
if(count($error) > 0){
 //means $error contains errors
 //print error values
}else{
 //start inserting your data into database
}
?> 
```

# javascript - 淘汰赛中的级联主细节和加载记录。js

> ID：14478199
> 
> 赞同：1
> 
> 时间：2013-01-23T11:06:59.913
> 
> 标签：javascript, mvvm, knockout.js, master-detail

我们有以下场景：

```
One select conected to one observable property Countries, and countryId
Another child select conected to StateProvinces and stateProvinceId observable property 
A compute generating the dependency between the first and second property (Countris and StateProvinces).
We click Load and simulate load a entity from the server, and update the selected values: countryId and stateProvinceId. The real coding uses the mapping plugin. 
```

为了更清楚起见，请参阅工作 jsfiddle [http://jsfiddle.net/sPTHm](http://jsfiddle.net/sPTHm)代码，然后单击“加载”。

我们在模拟state/province select的async ajax请求时开始遇到麻烦，在第48行。当这个请求是async时，加载不起作用，只是因为stateProvinceId是在StateProvinces加载之前设置的，并且它将被重置为空。在此处查看带有 StateProvinces 异步请求的模拟：http: [//jsfiddle.net/sPTHm/1/](http://jsfiddle.net/sPTHm/1/)，然后单击“加载”。

我们已经尝试过：节流阀、计算出的 observable 配方、deferEvaluation 和大量搜索。在knockoutjs中，理想的配方是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:39:16.567

我会尝试使用[jQuery 延迟概念链接您的 ajax 请求](http://api.jquery.com/category/deferred-object/)

```
 return $.when(self.dataSource.getRtuUserData(rtuId))
            .then(function (rtuUserData)
            {
                self.RtuUserData = ko.mapping.fromJS(rtuUserData);
                return self.dataSource.getRtuStatus(rtuId);
            })
            .then(function (rtuStatus)
            {
                self.RtuStatus = ko.mapping.fromJS(rtuStatus);
                return self.dataSource.getRtuLocation(rtuId);
            }) 
```

dateSource 对象上的每个方法都包装了一个 ajax 调用：

```
self.getRtuLinks = function (rtuId)
{
    return $.ajax(
    {
        url: urlRoot + '/rtus/' + rtuId + '/links',
        dataType: 'json',
        cache: false,
        type: 'GET'
    });
} 
```

这样，您可以同步加载两组数据，这应该可以解决您的问题。

# python - 将字典的python列表与列顺序的容差进行比较

> ID：14478202
> 
> 赞同：3
> 
> 时间：2013-01-23T11:07:06.383
> 
> 标签：python, list, hash, dictionary

```
 first = [{'a':'aaa','b':'ccc','c':'bbb','d':'ddd'},
             {'a':'bb','b':2,'c':1,'d':3},
             {'a':'cc','b':22,'c':11,'d':33}]

    second = [{'a':'aaa','b':'bbb','c':'ccc','d':'ddd'},
              {'a':'bb','b':1,'c':2,'d':3},
              {'a':'cc','b':11,'c':22,'d':33}] 
```

表 2

```
 |'a'  | 'b' | 'c' |'d'  |
    |'aaa'|'bbb'|'ccc'|'ddd'|
    |'bb' |1    |2    |3    |
    |'cc' |11   |22   |33   | 
```

表格1

```
 |'a'  | 'b' | 'c' |'d'  |
    |'aaa'|'ccc'|'bbb'|'ddd'|
    |'bb' |2    |1    |3    |
    |'cc' |22   |11   |33   | 
```

在上面的表格中，第一行的顺序是相同的。第二行属性是主键。即使它们的顺序发生变化，但下面的值很好，它们是相等的

我有两个表，它们在我的代码中转换为字典列表。表的第一行是字典的关键。我必须比较这两个，即使列顺序从第二行开始发生变化，这两个实体也是相同的。所以在上面的例子中，它们是相同的。

换句话说，字典的键不是表的主键。第二行属性是。如何编写代码来执行这种比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:16:06.380

函数 compare() 根据我理解的相等标准比较第一个和第二个匹配是否相等，如果它们相等则返回 True。

```
first = [{'a':'aaa','b':'ccc','c':'bbb','d':'ddd'},
         {'a':'bb','b':2,'c':1,'d':3},
         {'a':'cc','b':22,'c':11,'d':33}]

second = [{'a':'aaa','b':'bbb','c':'ccc','d':'ddd'},
          {'a':'bb','b':1,'c':2,'d':3},
          {'a':'cc','b':11,'c':22,'d':33}]

def compare(first,second):
    for a,b in zip(first, second):
        vals_a = list(a.values())
        vals_b = list(b.values())

        vals_a.sort()
        vals_b.sort()

        if vals_a != vals_b:
            return False

    return True

print compare(first,second) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:15:54.340

如果唯一值的顺序无关紧要并且可以忽略键：

```
key = lambda d: set(d.values())
eq = all(a == b for a, b in zip(map(key, first), map(key, second))) 
```

似乎您实际上想找出两个表是否具有相同的列，而忽略列顺序：

```
def columns(table):
    values = lambda d: map(d.get, table[0]) # use same order for rows
    return zip(*[values(row) for row in table]) # transpose

def equal_columns(first, second):
    return sorted(columns(first)) == sorted(columns(second)) 
```

# asp.net - Asp.Net 中的下拉列表

> ID：14478215
> 
> 赞同：2
> 
> 时间：2013-01-23T11:07:59.647
> 
> 标签：asp.net, .net, drop-down-menu, visible

我在我的 aspx 页面中放置了两个下拉列表。第二个是可见的假。当我从第一个 DropDownList 中选择某个项目时，我可以看到第二个 DropDownList。但是，我的问题是当我看到第二个 DropDownList 时，它会将我带到页面顶部。所以，每次我需要向下滚动页面以达到下拉列表控件..

我想当我看到第二个 DropDownList 时，我会确保不要转到页面顶部。

帮帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:17:35.460

请记住，添加`MaintainScrollPositionOnPostback="true"`只是成功的一半。如果文件夹中没有适当的浏览器功能文件`App_Browsers`，您的回发将无法正常工作。

这是我在所有项目中使用的 Chrome.browser 文件：

```
<!--
    You can find existing browser definitions at
    <windir>\Microsoft.NET\Framework\<ver>\CONFIG\Browsers
-->
<browsers>
    <browser id="NewBrowser" parentID="Mozilla">
        <identification>
            <userAgent match="Unique User Agent Regular Expression" />
        </identification>

        <capture>
            <userAgent match="NewBrowser (?'version'\d+\.\d+)" />
        </capture>

        <capabilities>
            <capability name="browser" value="My New Browser" />
            <capability name="version" value="${version}" />
          <capability name="supportsMaintainScrollPositionOnPostback" value="true"/>
        </capabilities>
    </browser>

    <browser refID="Mozilla">
        <capabilities>
            <capability name="xml" value="true" />
            <capability name="supportsMaintainScrollPositionOnPostback" value="true"/>
        </capabilities>
    </browser>
  <browser refID="Safari1Plus">
    <capabilities>
      <capability name="supportsMaintainScrollPositionOnPostback" value="true"/>
    </capabilities>
  </browser>
</browsers> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:12:48.307

这是`MaintainScrollPositionOnPostback`您可以按如下方式使用的解决方案

```
 <%@ Page MaintainScrollPositionOnPostback="true" %> 
```

这是一个很好的链接
[MaintainScrollPositionOnPostback 属性不适用于 mozilla](https://stackoverflow.com/questions/9607139/maintainscrollpositiononpostback-property-doesnt-works-with-mozilla)
[http://weblogs.asp.net/hosamkamel/archive/2007/09/07/maintain-scroll-position-after-postbacks-in-asp-net-2 -0.aspx](http://weblogs.asp.net/hosamkamel/archive/2007/09/07/maintain-scroll-position-after-postbacks-in-asp-net-2-0.aspx)

编辑 1：-
**但我建议您使用 java-script 隐藏第二个下拉列表。**
它不会只为显示和隐藏下拉列表而创建到服务器的往返。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:13:22.300

制作`MaintainScrollPositionOnPostback="true"`

# batch-file - 使用模拟的 SQLCMD 批处理作业

> ID：14478218
> 
> 赞同：1
> 
> 时间：2013-01-23T11:08:09.813
> 
> 标签：batch-file, impersonation, sqlcmd

我有一个批处理文件为目录中的每个 sql 文件执行 SQLCMD：

```
for %%G in (*.sql) do sqlcmd /S servername /d databaseName -U user -P password -E -i"%%G" 
```

但是我必须使用模拟，我不想在每个文件中都有这个行。我尝试了 2 种可能的解决方案。

解决方案1：

```
for %%G in (*.sql) do sqlcmd /S servername /d databaseName -U user -P password -E -q "EXECUTE AS LOGIN = 'user2'" -i"%%G" -q "REVERT" 
```

解决方案2：

```
sqlcmd /S servername /d databaseName -U user -P password -E -q "EXECUTE AS LOGIN = 'user2'"
for %%G in (*.sql) do sqlcmd /S servername /d databaseName -U user -P password -E -i"%%G" 
sqlcmd /S servername /d databaseName -U user -P password -E -q "REVERT" 
```

但这两种解决方案都不起作用。在这种情况下该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:45:32.653

从[手册](http://msdn.microsoft.com/en-us/library/ms162773.aspx "sqlcmd 实用程序")：

> **-i** *input_file* [, *input_file2* ...]
> 
> 标识包含一批 SQL 语句或存储过程的文件。[...] **-i 和 -Q/-q 选项是互斥的**。

所以你不能`sqlcmd`以这种方式使用。但是您可以改用该`osql`实用程序，它似乎没有此限制，但是，如果您只是将所有`sqlcmd`条目替换`osql`为任一解决方案中的所有条目，它仍然无法正常工作。

您的第二种方法不起作用，因为 的范围[`EXECUTE AS`](http://msdn.microsoft.com/en-us/library/ms181362.aspx "执行 AS (Transact-SQL)")是当前会话或当前模块，或者直到[`REVERT`](http://msdn.microsoft.com/en-us/library/ms178632.aspx "还原 (Transact-SQL)")执行。由于每次调用`osql`都会启动一个新会话，`EXECUTE AS`因此与脚本分开调用不会对它们产生任何影响。

第一个解决方案不起作用，因为会在脚本之前`osql`执行这两个`-q`命令。`-i`因此，您将有效地更改执行上下文*并将*其恢复到脚本*之前。*

但是，您不需要`REVERT`在每个脚本的执行结束时显式调用。因此，只需采用您的第一个解决方案，替换`sqlcmd`为`osql`，移除`-q "REVERT"`钻头并使用剩余的东西。

# xcode - 删除添加的子视图

> ID：14478220
> 
> 赞同：0
> 
> 时间：2013-01-23T11:08:19.020
> 
> 标签：xcode

我正在尝试删除添加的子视图，但我做不到...我在 UIButton 中添加了子视图

```
//Create the first status image and the indicator view
UIImage *statusImage = [UIImage imageNamed:@"loader_01.png"];
UIImageView *activityImageView = [[UIImageView alloc]
                                  initWithImage:statusImage];

//Add more images which will be used for the animation
activityImageView.animationImages = [NSArray arrayWithObjects:
                                     [UIImage imageNamed:@"loader_01.png"],
                                     [UIImage imageNamed:@"loader_02.png"],
                                     [UIImage imageNamed:@"loader_03.png"],
                                     [UIImage imageNamed:@"loader_04.png"],

                                     nil];

//Set the duration of the animation (play with it
//until it looks nice for you)
activityImageView.animationDuration = 0.3;

//Position the activity image view somewhere in
//the middle of your current view
activityImageView.frame = CGRectMake(
                                     self.view.frame.size.width/2
                                     -statusImage.size.width/2, 
                                     self.view.frame.size.height/2
                                     -statusImage.size.height/2, 
                                     statusImage.size.width, 
                                     statusImage.size.height);

//Start the animation
[activityImageView startAnimating];

//Add your custom activity indicator to your current view
[self.view addSubview:activityImageView]; 
```

现在我想用另一个 IBAction 删除 activityimageView ......但是 Xcode 不知道那个 SubView ......有什么想法吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:22:38.300

把你的

```
UIImageView *activityImageView 
```

在 .h 文件和 IBAction 中编写这样的代码

```
[activityImageView removeFromSuperView]; 
```

# crystal-reports - 将多个记录号传递到 Crystal 报表标题中的表/网格中

> ID：14478221
> 
> 赞同：0
> 
> 时间：2013-01-23T11:08:20.300
> 
> 标签：crystal-reports

我试图以网格/表格的形式在报表标题中表示多个记录号。每条记录将包含一个名为影响的字段，需要在报告标题中将其表示为 3 x 3 网格/表格。每条记录都将适合 X1Y1 或 X1Y2 或 X1Y3 等。或 X3Y3。如果记录适合每个坐标的范围，则表格或网格应显示该区域中的记录编号。不知道如何更具体，或者甚至可能。非常感谢您的帮助。

问候 Bips.za

# jquery - ASP.NET MVC 3 + 序列化显示的集合 我的 ViewModel 包含一些对象（IEnumerable）的集合。集合中的项目按行显示在标签中。当我提交表单时，它会触发提交 jQuery 函数来验证自己。我需要从显示的表中获取值并转换为对象。 看一下这个： // // the table to display my collection content问问题 问问题 2013-01-23T11:08:23.450 920 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我的 ViewModel 包含一些对象（IEnumerable）的集合。集合中的项目按行显示在标签中。当我提交表单时，它会触发提交 jQuery 函数来验证自己。我需要从显示的表中获取值并转换为对象。 看一下这个： // // the table to display my collection contentItems to publish: @{ for (int counter = 0; counter < Model.Publications.Count; ++counter) { } }

|  | Item |
| --- | --- |
| @Html.HiddenFor(m => Model.Publications[counter].ID) @Html.CheckBoxFor(m => Model.Publications[counter].Selected) | @Html.HiddenFor(m => Model.Publications[counter].ItemID) @Html.DisplayTextFor(m => Model.Publications[counter].ItemDescription) |

// // The Publication ViewModel public class PublicationViewModel { public string ID { get; set; } public bool Selected { get; set; } public string ItemID { get; set; } public string ItemDescription { get; set; } } // // The main ViewModel public class MainViewModel { public string ID { get; set; } public string Name { get; set; } public IEnumerable <publicationviewmodel>Publications { get; set; } } 问题是如何使用 jQuery 将该表转换为序列化对象。十分感谢大家！ PHP IMAP 邮箱处理 - MessageNo 上的循环？ 一个快速的问题，但我似乎无法在任何地方找到可靠的答案。我正在使用 PHP IMAP 来处理邮箱中的消息，但我正在使用基于 imap_num_msg 的循环来处理它们。 $imap = imap_open("{imap.test.com:143}INBOX", "test@test.com", "password"); $message_count = imap_num_msg($imap); for ($i = 1; $i <= $message_count; ++$i) { "Processing Code using $i" } imap_expunge($imap); imap_close($imap); 这是正确的处理方式，还是我应该为每条消息获取一组 UID？如果我坚持使用这段代码，当有新消息进来时会发生什么，消息的顺序会改变并影响循环吗？ jqueryasp.net-mvc-3serializationviewmodelasp.net-mvc-viewmodel 4 1 回答 1 This answer is useful 1 将您的代码放入 a和你的 jQuery 脚本： $('form').submit(function() { alert($(this).serialize()); return false; }); 于 2013-01-23T13:29:07.330 回答 Related 0 .net - 从另一个 aspx 调用事件 2 java - “if(new Integer(1) == new Integer(1))”在 Java 中是如何工作的？ 2 php - 如何在 php 中创建三角形图（漏斗图/金字塔图）？ 1 uiwebview - UiwebView 根据内容调整大小 1 c++ - 错误：向量下标超出范围 c++ 1 c# - 如何在 xamarin studio/monodevelop 中为我的项目添加 system.core.dll 引用 1 sockets - BSD套接字设置sockopt选项以避免在下一次发送之前等待确认 1 javascript - 更改画布的背景位置 1 wcf - 在 UserNamePasswordValidator 中获取 WCF 请求参数 5 javascript - 从数组中删除重复元素 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</publicationviewmodel>

> ID：14478223
> 
> 赞同：0
> 
> 时间：
> 
> 标签：jquery, asp.net-mvc-3, serialization, viewmodel, asp.net-mvc-viewmodel

我的 ViewModel 包含一些对象（IEnumerable）的集合。集合中的项目按行显示在标签中。当我提交表单时，它会触发提交 jQuery 函数来验证自己。我需要从显示的表中获取值并转换为对象。

看一下这个：

```
//
// the table to display my collection content
<div id="publications">
    Items to publish:

    <table>
        <thead><tr>
            <td></td>
            <td>Item</td>
        </tr></thead>

        <tbody>
            @{
                for (int counter = 0; counter < Model.Publications.Count; ++counter)
                {
                    <tr>
                        <td>
                            @Html.HiddenFor(m => Model.Publications[counter].ID)
                            @Html.CheckBoxFor(m => Model.Publications[counter].Selected)
                        </td>
                        <td>
                            @Html.HiddenFor(m => Model.Publications[counter].ItemID)
                            @Html.DisplayTextFor(m => Model.Publications[counter].ItemDescription)
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>

//
// The Publication ViewModel
public class PublicationViewModel {
    public string ID { get; set; }
    public bool Selected { get; set; }
    public string ItemID { get; set; }
    public string ItemDescription { get; set; }
}

//
// The main ViewModel
public class MainViewModel {
    public string ID { get; set; }
    public string Name { get; set; }
    public IEnumerable<PublicationViewModel> Publications { get; set; }
} 
```

问题是如何使用 jQuery 将该表转换为序列化对象。十分感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:29:07.330

将您的代码放入 a`<form>`并使用[Jquery serialize](http://api.jquery.com/serialize/)。

```
<form id="publications">
    Items to publish:

    <table>
        <thead><tr>
            <td></td>
            <td>Item</td>
        </tr></thead>
            <tbody>
            @for (int counter = 0; counter < Model.Publications.Count; ++counter)
            {
                <tr>
                    <td>
                        @Html.HiddenFor(m => Model.Publications[counter].ID)
                        @Html.CheckBoxFor(m => Model.Publications[counter].Selected)
                    </td>
                    <td>
                        @Html.HiddenFor(m => Model.Publications[counter].ItemID)
                        @Html.DisplayTextFor(m => Model.Publications[counter].ItemDescription)
                    </td>
                </tr>
            }
        </tbody>
    </table>
</form> 
```

和你的 jQuery 脚本：

```
$('form').submit(function() {
    alert($(this).serialize());
    return false;
}); 
```

# php - PHP IMAP 邮箱处理 - MessageNo 上的循环？

> ID：14478224
> 
> 赞同：1
> 
> 时间：2013-01-23T11:08:23.203
> 
> 标签：php, email, imap

一个快速的问题，但我似乎无法在任何地方找到可靠的答案。我正在使用 PHP IMAP 来处理邮箱中的消息，但我正在使用基于 imap_num_msg 的循环来处理它们。

```
$imap = imap_open("{imap.test.com:143}INBOX", "test@test.com", "password");
$message_count = imap_num_msg($imap);
for ($i = 1; $i <= $message_count; ++$i) 
{ "Processing Code using $i" }
imap_expunge($imap);
imap_close($imap); 
```

这是正确的处理方式，还是我应该为每条消息获取一组 UID？如果我坚持使用这段代码，当有新消息进来时会发生什么，消息的顺序会改变并影响循环吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:40:47.117

我建议也获取 uid，这有助于记录已下载的邮件。正如 ansh 所要求的，还计划在每次用户登录时执行此提取？？？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:09:16.530

该代码将运行良好。除非邮箱状态发生更改，否则一旦创建的 UID 将保持不变。但是，您是否打算每次在客户端下载 bcoz 邮件后无需再次下载时都这样做。

# c - 无法为文件变量赋值

> ID：14478232
> 
> 赞同：0
> 
> 时间：2013-01-23T11:08:37.587
> 
> 标签：c, arrays, gtk

我对 C 很陌生，我试图用函数的结果填充文件范围的数组变量，这是一个简单的代码示例来说明我的意思，有人能指出为什么这不起作用的方向吗？

```
#include <sys/types.h>
#include <dirent.h>
#include <regex.h>
#include <stdio.h>
#include <gtk/gtk.h>
#include <string.h>
#include <unistd.h>
#include <pwd.h>

static gchar *external_names;

void directories(int arraylength, gchar internal_names[][100]){
    int n;
    for (n = 0; n < arraylength; n++)
    {
        strcpy(external_names[n], internal_names[n]);
    }
    for (n = 0; n < arraylength; n++)
    {
        printf("%s internal with %s external\n",internal_names[n], external_names[n]);
    }
}

void main()
{
    gchar anotherarray[10][100];
    directories(10, anotherarray);
} 
```

[编辑] 最新代码

```
#include <sys/types.h>
#include <dirent.h>
#include <regex.h>
#include <stdio.h>
#include <gtk/gtk.h>
#include <string.h>
#include <unistd.h>
#include <pwd.h>

static gchar *external_names[100];

void directories(int arraylength, gchar internal_names[][100]){
    int n = 0;
    //gchar external_names[arraylength][100];
    for (n = 0; n < arraylength; n++)
    {
        printf("%s %i\n","before", n);
        strcpy(external_names[n], internal_names[n]);
        printf("%s %i\n","after", n);
    }
}

void main()
{
    int n;
    gchar anotherarray[10][100];
    for (n = 0; n < 10; n++)
    {
        strcpy(anotherarray[n],"test");
    }
    directories(10, anotherarray);
    for (n = 0; n < 10; n++)
    {
        printf("%s internal with %s external\n",anotherarray[n], external_names[n]);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:13:14.560

```
static gchar *external_names;  //one dimensional array. 
```

**external_names**是一维数组，您试图从二维数组**internal_names**中分配它。

```
strcpy(external_names[n], internal_names[n]); 
```

这就是增加索引时发生的情况。

```
&internal_names[1] =  &internal_names[0] + size_t*100
&external_names[1] =  &external_names[0] + size_t*1 
```

为了解决这个问题，

```
static gchar (*external_names)[100]; 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:13:13.133

这：

```
static gchar *external_names; 
```

只是一个字符指针，它不是一个字符串数组，比如你的`anotherarray`.

当您在`strcpy()`调用中建立索引时，第一个参数是`char`错误的，因为`strcpy()`需要两个指针。

# asp.net-mvc-3 - 这个 SelectList 有什么问题？

> ID：14478234
> 
> 赞同：0
> 
> 时间：2013-01-23T11:08:40.487
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4

我正在尝试为我的 MVC 4 Razor View 创建一个简单的下拉菜单。我有一个服务类，其中包含一个返回以下内容的方法

```
public List<SelectListItem> YesNoList()
{

    List<SelectListItem> items = new List<SelectListItem>();

    items.Add(new SelectListItem { Text = "Select", Value = "" });
    items.Add(new SelectListItem { Text = "Yes", Value = "True" });
    items.Add(new SelectListItem { Text = "No", Value = "False" });

    return items;
} 
```

我在控制器中调用此服务方法

```
[AllowAnonymous]
public ActionResult Register()
{
    RegisterModel model = new RegisterModel();

    model.DisabilityList = new SelectList(_listService.YesNoList(), "Value", "Text", "");

    return View(model);
} 
```

然后将其返回到我的 Razor View

```
<div class="editor-label">
    @Html.LabelFor(model => model.Disability, "Do you have a disability?")
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.Disability, Model.DisabilityList)
</div> 
```

我希望名为“选择”的项目成为我下拉菜单中的选定选项，但默认情况下它总是选择“否”选项。为什么是这样？

我尝试将 SelectListItem 更改为此

```
items.Add(new SelectListItem { Text = "Select", Value = "", Selected = True }); 
```

但它仍然选择“否”作为选定选项。

我知道一个简单的编码，但我无法让它工作。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:23:18.140

你的模型是`Disability`布尔属性`nullable`吗？

因为如果不是，则默认值为`Disability`is`false`和 this：

```
@Html.DropDownListFor(model => model.Disability, Model.DisabilityList) 
```

将选择与 关联的值`false`，即`No`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:22:12.687

这

```
new SelectList(_listService.YesNoList(), "Value", "Text", ""); 
```

应该是这样的

```
new SelectList(_listService.YesNoList(), "Value", "Text", _listService.YesNoList().First()); 
```

# linux - 如何在 Linux 服务器机器中提供 psql 密码

> ID：14478244
> 
> 赞同：3
> 
> 时间：2013-01-23T11:09:10.957
> 
> 标签：linux, postgresql, passwords

我已经使用 psql 加载了一个 *.sql 文件。我在 Linux 服务器上工作。我使用`-w`, 这样它就不会提示输入密码，因为最后我的程序是自动的。但是我在运行它时遇到了这条消息：

```
psql fe_sendauth no password supplied 
```

如何提供密码？正如我所说，我正在服务器端工作并且无权访问安装文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:18:06.830

您是否指定`-w`都没关系 - 如果服务器配置为阻止匿名访问，它会这样做。您必须提供密码，或者服务器可能被配置为信任您的 IP 地址等。

[在Postgresql: Scripting psql execution with password](https://stackoverflow.com/questions/6523019/postgresql-scripting-psql-execution-with-password)中讨论了在没有密码提示的情况下运行 PostgreSQL 脚本的任务。

# c# - 使用 7-zip 读取存档

> ID：14478247
> 
> 赞同：0
> 
> 时间：2013-01-23T11:09:17.910
> 
> 标签：c#, .net, zip, 7zip

我正在尝试找到一种方法来读取压缩文件的内容/文件名，解压缩文件，然后创建一个包含所有解压缩文件列表的文本文件。

其中大部分都不是问题，但事实证明读取和使用存档中的文件比应有的困难。

我目前的代码是...

```
var options = new Options();
            ICommandLineParser parser = new CommandLineParser();

            string strInput = "", strOutput = "", strExtract = "", strPassword = "";

            Console.WriteLine("parsing..");

            if (parser.ParseArguments(args, options))
            {
                Console.WriteLine("checking...");
                if (string.IsNullOrEmpty(options.InputFile))
                {
                    Console.WriteLine("input is empty");
                    Console.WriteLine(options.GetUsage()); 
                }

                strInput = options.InputFile;
                strOutput = options.OutputFile;
                strExtract = options.ExtractFormat;
                strPassword = options.Password;

                ProcessStartInfo p = new ProcessStartInfo();
                p.FileName = "7za.exe";

                Console.WriteLine("x " + "-" + strExtract + " -p" + strPassword + " " + strInput + " -o" + strOutput);
                p.Arguments = "x " + "-" + strExtract + " -p" + strPassword + " " + strInput + " -o" + strOutput;
                p.WindowStyle = ProcessWindowStyle.Hidden;

                Process x = Process.Start(p);
                x.WaitForExit(); 
```

我找到了一些可以提供帮助的资源，但到目前为止都没有。找到的资源：http: [//pastebin.com/eTRE4TPP](http://pastebin.com/eTRE4TPP)（我不明白他们如何使用未声明的变量“l”，但即使将其更改为“p”也不起作用 [。http://www.dotnetperls.com/ 7-zip-examples](http://www.dotnetperls.com/7-zip-examples)（命令 l 看起来可以使用，但我不知道如何获取文件名并存储它们）

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-23T12:44:12.910

是什么特别要求您使用 7Zip？[SharpZipLib](http://www.icsharpcode.net/opensource/sharpziplib/)或许能够满足您的需求。

# c# - 属性“内容”设置不止一次 Button WPF

> ID：14478253
> 
> 赞同：1
> 
> 时间：2013-01-23T11:09:36.400
> 
> 标签：c#, wpf, visual-studio-2012

我已经阅读了其他一些答案，但我不能完全理解为什么我的仍然抛出这个错误：

```
<Grid Grid.Column="2" Width="100" Height="30" HorizontalAlignment="Right">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Button Command="{Binding CloseCommand}" Grid.Column="3" Width="24" Height="24" HorizontalAlignment="Right">
                <Button.Template>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <StackPanel>
                            <Image Source="{Binding LocalisedResource[delete_48.png].Image}" Stretch="Fill" VerticalAlignment="Top" />
                        </StackPanel>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Cursor" Value="Hand" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>
            <Button Command="{Binding ShowConfigCommand}" Grid.Column="0" Width="24" Height="24" HorizontalAlignment="Right">
                <Button.Template>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <StackPanel>
                            <Image Source="{Binding LocalisedResource[software_24.png].Image}" Stretch="Fill" VerticalAlignment="Top" />
                        </StackPanel>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Cursor" Value="Hand" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>
        </Grid> 
```

人们没有收到此错误，因此我将发布其余代码：

```
<Grid>
        <Grid.Background>
            <SolidColorBrush Color="Black" />
        </Grid.Background>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="20" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="20" />
        </Grid.ColumnDefinitions>

        <Grid.RowDefinitions>
            <RowDefinition Height="50" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="20" />
        </Grid.RowDefinitions>

        <TextBlock Text="{Binding LocalisedText[app.title]}" Grid.Column="1" Grid.Row="0" Style="{DynamicResource MainWindowTitleTextStyle}" />

        <Grid Grid.Column="2" Width="100" Height="30" HorizontalAlignment="Right">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Button Command="{Binding }" Grid.Column="3" Width="24" Height="24" HorizontalAlignment="Right">
                <Button.Template>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <StackPanel>
                            <Image Source="{Binding LocalisedResource[delete_48.png].Image}" Stretch="Fill" VerticalAlignment="Top" />
                        </StackPanel>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Cursor" Value="Hand" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>
            <Button Command="{Binding }" Grid.Column="0" Width="24" Height="24" HorizontalAlignment="Right">
                <Button.Template>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <StackPanel>
                            <Image Source="{Binding LocalisedResource[software_24.png].Image}" Stretch="Fill" VerticalAlignment="Top" />
                        </StackPanel>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Cursor" Value="Hand" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>
        </Grid>

        <!-- Popup Box -->
        <ContentPresenter Content="{Binding }" Grid.Column="1" Grid.ColumnSpan="4" Grid.Row="2" Grid.RowSpan="4" VerticalAlignment="Center" HorizontalAlignment="Center" />

        <!-- Connected View Goes Here -->
        <ContentPresenter Content="{Binding }" Grid.Column="1" Grid.Row="1" />

        <!-- Demo View Goes Here -->
        <ContentPresenter Content="{Binding }" Grid.Column="1" Grid.Row="2" />

        <!-- Configuration -->
        <ContentPresenter Content="{Binding }" Grid.ColumnSpan="2" Grid.RowSpan="2" Grid.Row="1" Grid.Column="1" Margin="50" />
    </Grid> 
```

# perl - 无法安装 ClearCase::CtCmd 模块

> ID：14478255
> 
> 赞同：2
> 
> 时间：2013-01-23T11:09:38.817
> 
> 标签：perl, clearcase

安装 ClearCase::CtCmd 时出现以下错误。即使在安装 MinGW 后，我也会收到此错误。

```
c:\temp\CtCmd-1.08>perl Makefile.PL
Set up gcc environment - 3.4.5 (mingw-vista special r3)
Looking for Version     12      Not Found
Cannot find  C:\Perl\site\bin\gcc.exe -> Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 12 at Makefile.PL line 162. 
```

我的 perl 版本是

```
Set up gcc environment - 3.4.5 (mingw-vista special r3)
Summary of my perl5 (revision 5 version 16 subversion 2) configuration:

  Platform:
    osname=MSWin32, osvers=5.2, archname=MSWin32-x86-multi-thread
    uname=''
    config_args='undef'
    hint=recommended, useposix=true, d_sigaction=undef
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=undef, use64bitall=undef, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc='C:\Perl\site\bin\gcc.exe', ccflags ='-DNDEBUG -DWIN32 -D_CONSOLE -DNO_STRICT -DPERL_TEXTMODE_SCRIPTS -DUSE_SITECUSTOMIZE -DPERL_IMPL
ICIT_CONTEXT -DPERL_IMPLICIT_SYS -DUSE_PERLIO -D_USE_32BIT_TIME_T -DHASATTRIBUTE -fno-strict-aliasing -mms-bitfields',
    optimize='-O2',
    cppflags='-DWIN32'
    ccversion='', gccversion='3.4.5 (mingw-vista special r3)', gccosandvers=''
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234
    d_longlong=undef, longlongsize=8, d_longdbl=define, longdblsize=8
    ivtype='long', ivsize=4, nvtype='double', nvsize=8, Off_t='__int64', lseeksize=8
    alignbytes=8, prototype=define 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:27:40.777

根据其[依赖页面，](http://deps.cpantesters.org/?module=ClearCase::CtCmd;perl=latest) [ClearCase 的 Perl 扩展 CtCmd](http://www-01.ibm.com/support/docview.wss?uid=swg21119963)应该使用 Perl 5.16.2（您拥有）运行。

我不会为此在 MinGW 上使用 perl，而是[直接为 Windows 使用 Perl](http://www.perl.org/get.html#win32)。
如果它不起作用，请检查 Rational ClearCase 本身包含的 Perl（[`ccperl`或`ratperl`](https://stackoverflow.com/a/11992799/6309)）。

# java - 在 JTextField 的每次击键上调用数据库中的搜索

> ID：14478256
> 
> 赞同：0
> 
> 时间：2013-01-23T11:09:39.330
> 
> 标签：java, jtextfield

我想向 JTextField 添加一个搜索工具，以便当用户向 JTextField 输入文本时，它会从数据库中检索相关值。这样，如果用户选择该值，它有助于避免重复值。

此外，当我应该输入 ABCD 时，它会从数据库中检索相关的键（ABCD EFG、ABCD SDLFH 等......），用户应该从中选择一个合适的键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T23:46:02.310

听起来您想向 JTextField 对象添加某种形式的自动完成功能。[JTextField AutoComplete](https://stackoverflow.com/questions/8689695/jtextfield-autocomplete)问题也讨论了这一点。有效值的列表不会从数据库中动态检索，尽管您可以查看从那里链接的代码示例，并可能在适当的时候将它们更改为进行查询。

我首先要熟悉[SwingX](http://swingx.java.net/)`AutoCompleteDecorator`库的工作原理（上述问题的答案之一），因为源代码可[在此处](http://java.net/projects/swingx/sources/svn/show/trunk/swingx-autocomplete?rev=4269)获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-02T23:44:58.483

使用 Scott 编写的此代码[示例：将自动完成添加到 JTextField](http://stackabuse.com/example-adding-autocomplete-to-jtextfield/)

# javascript - Jquery 验证显示 2 个 div 而不是 1 个的错误

> ID：14478258
> 
> 赞同：0
> 
> 时间：2013-01-23T11:09:59.970
> 
> 标签：javascript, jquery

我正忙着为这个可重复的字段创建验证，所以如果在输入“姓名”和“姓氏”中没有填写任何内容，则在模糊时，将显示一条错误消息，唯一的问题是该错误显示为两个输入 'Name' 和 'Surname' ，而不是一个。

请记住，底部字段是可复制的，并且验证必须对它们起作用，因此为什么要按原样编写代码。

非常感谢任何帮助。

[提琴手](http://jsfiddle.net/dawidvdh/6QTyd/1/)

和 Javascript：

```
 //Error Messages
var messages = {
    "main_name general": "no main name",
};
var g_counter = 1;
var dependant = ["dependant"];
var group;
var name_input_groups = ["name-group-1"];
var surname_input_groups = ["surname-group-1"];
var input_groups = ["group-1"];

var name_fields=[0];
var name_input = "<input class='name' name='name' data-error='Please enter a Dependant name' type='text' />";
var surname_input = "<input id='surname' class='surname' name='surname' type='text' data-error='Surname error' />";

jQuery(document).ready(function(e) {
    jQuery(name_fields).each(function() {
        jQuery(name_input).appendTo('#name-group-1');
    });
    jQuery(name_fields).each(function() {
        jQuery(surname_input).appendTo('#surname-group-1');
    });

    jQuery('#clone').click(function() {
        clone_dependant();
    });

    function clone_dependant() {
        var oldId = g_counter;
        g_counter++;
        currentdep ='dependant-'+g_counter;
        var $clonedDiv = jQuery('#dependant-1').clone(false).attr('id', currentdep);
        var name_newDiv = 'name-group-'+ g_counter;
        var surname_newDiv = 'surname-group-'+ g_counter;
        // Find div's inside the cloned object and set a new id's
        $clonedDiv.find('#name-group-1').attr('id',"name-group-" + g_counter );
        $clonedDiv.find('#surname-group-1').attr('id',"surname-group-" + g_counter );
        $clonedDiv.find('#dep_num').html(g_counter);
        // Insert the cloned object 
        $clonedDiv.insertAfter("#dependant-" + oldId);
        name_input_groups.push(name_newDiv);
        surname_input_groups.push(surname_newDiv);
    }
///////////////////////////////////////////
//VALIDATION
//////////////////////////////////////////
$('.name').after('<div class="error"></div>');
$('.surname').after('<div class="error"></div>');
$('.error').hide();

////Validate Surname
$(document).on('blur keyup', 'input.surname', function(e) {
    validate_Surname_Input(this);
});

function validate_Surname(surname_values, el){
    var error_message = $(el).find('input').data('error');
    if (surname_values.length > 0) {
        $(el).find('.error').slideUp('slow');
        return true;
    }else {
        $(el).find('.error').html(error_message).slideDown('slow');
        console.log($(el).find('.error'));
        return false;
    }
};

function validate_Surname_Input(el) {
    var $this = $(el);
    var input_groups = $this.parent();
    var isValid = true;
    $.each(input_groups , function(i){
        var inpg = input_groups[i];
        surname_values = $.map($(inpg).children('input'), function(e,i){
            return $(e).val();
        }).join('');
        isValid = isValid &&
            validate_Surname(surname_values, input_groups.parent().parent().parent(), el);
    });
    return isValid;
}
////Validate Surname

////Validate Name
$(document).on('blur keyup', 'input.name', function(e) {
    var values = $(this).val().length;
    validate_Name_Input(this);
});

function validate_Name(name_values, el){
    var error_message = $(el).find('input').data('error');
    if (name_values.length > 0) {
        $(el).find('.error').slideUp('slow');
        return true;
    }else {
        $(el).find('.error').html(error_message).slideDown('slow');
        return false;
    }
};

function validate_Name_Input(el) {
    var $this = $(el);
    var input_groups = $this.parent();
    var isValid = true;
    $.each(input_groups , function(i){
        var inpg = input_groups[i];
        name_values = $.map($(inpg).children('input'), function(e,i){
            return $(e).val();
        }).join('');
        isValid = isValid &&
            validate_Name(name_values, input_groups.parent().parent().parent(), el);
    });
    return isValid;
}
////Validate Name

///////////////////////////////////////////
//VALIDATION
/////////////////////////////////////////
var result = {};
var dependants;
var mainmember;
var dep_counter = 0;
function getValues(){
    jQuery('div[class*="mainmember"]').each(function(k, v){
        mainmember = {};
        mainmember['name'] = $(v).find('.name').val();
        mainmember['surname'] = $(v).find('.surname').val();
        result['mainmember'] = mainmember;
    });

    result['dependants'] = [];
    jQuery('div[class*="dependant"]').each(function(k, v){
        dep_counter++
        dependants = {};
        dependants['name'] = $(v).find('.name').val();
        dependants['surname'] = $(v).find('.surname').val();
        result['dependants'].push(dependants);
    });
};

var isValid = true;

jQuery('#submit').click(function(){
var isValid = true;
    $('input.name').each(function(i, el) {
        isValid = isValid &&
            validate_Name_Input(el);
    });
if (isValid) {
    getValues();
    var jsonData = JSON.stringify(result);
    jQuery.ajax({
        type: "POST",
        url: "mail.php",
        dataType: "json",
        beforeSend: function() {
        },
        data: {parameters: jsonData}
    });
    } else {
        console.log('send fail');
    }
});

}); 
```

和 HTML：

```
<div id="app_wrap">
<!--Main Member-->
    <div class="title">personal information of principal member:</div>
    <div class="mainmember" id="mainmember" >
    <!--Level 1-->
            <div class="block_wrap left border_right">
                <div class="block">surname:<div class="right"><input class="surname" data-error="Please enter a Surname" /></div></div>
        </div>

        <div class="block_wrap right">
                <div class="block">full name:<div class="right"><input class="name" data-error="Please enter a Main member Name" /></div></div>
        </div>

    <!--Level 1-->
    </div>
<!--Main Member-->

<!--Dependant-->
    <div class="dependant-1" id="dependant-1">
    <div class="title">dependant <span id="dep_num">1</span>:</div>
    <div id="dependant">
    <div class="block_wrap left border_right">
            <div class="block">surname:<div id="surname-group-1" class="right"></div></div>
    </div>
    <!--Level 1-->
    <div class="block_wrap right">
            <div class="block">full name:<div id="name-group-1" class="right"></div></div>
    </div>
    <!--Level 1-->
   </div>
   </div>  
<!--Dependant-->
   <button id="clone">Add a Dependant</button>
   <button id="submit">submit</button>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:00:00.280

看到这个：http: [//jsfiddle.net/6QTyd/5/](http://jsfiddle.net/6QTyd/5/)

还要注意这些方面的变化：

```
validate_Surname(surname_values, input_groups.parent().parent()); 
```

和

```
validate_Name(name_values, input_groups.parent().parent()); 
```

# c# - Linq OrderBy 逻辑

> ID：14478262
> 
> 赞同：4
> 
> 时间：2013-01-23T11:10:12.930
> 
> 标签：c#, linq

我试图了解以下 LINQ 查询的自定义排序逻辑：

```
 var random = new Random();
 var cnt = Enumerable.Range(0, 10).OrderBy(i => random.NextDouble()).ToList(); 
```

这种比较的内在逻辑是什么，我如何与 random.NextDouble() 进行比较，使结果列表总是不同的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T11:15:19.390

它相当于：

```
var cnt =
Enumerable.Range(0, 10)
.Select(i => new { i, rand = random.NextDouble() }) //"weave" the random temporary
.OrderBy(x => x.rand) //sort
.Select(x => x.i) //remove it
.ToList(); 
```

随机值在逻辑上成为列表的一部分。

作为实现细节（从 .NET 2.0 到 4.5），`OrderBy`具体化排序键，以便为每个元素精确评估一个。它这样做是为了提高性能和（在你的情况下）为了正确性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T11:15:06.133

这是一个简单的对数组进行洗牌的实现。`random.NextDouble()`每次给你一个随机数，所以输出序列顺序是随机的。

# javascript - 获取调用 swf 的服务器域

> ID：14478265
> 
> 赞同：0
> 
> 时间：2013-01-23T11:10:31.703
> 
> 标签：javascript, jquery, actionscript-3, flash

我将 SWF 托管在一个域上，比如说 www.aaa.com。我将该 swf 嵌入到 www.bbb.com 上的 html 页面中。现在，在 SWF 中，如何获得嵌入 SWF 的域，即在我的示例 www.bbb.com 中？

我可以通过 javascript 执行此操作，然后将域名传递给 as3，但由于某些要求，我想从 SWF 中执行此操作。另外，我不想将我的 SWF 加载到 www.bbb.com 上的另一个 SWF 中。

任何答案...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:10:56.657

你说你在 bbb 域上嵌入了 flash，所以我猜你可以访问 bbb 的服务器页面生成器。

在这种情况下，我只会在 flashVars 中包含域名，例如：`topdomain=<?php echo(urlencode($_SERVER['SERVER_NAME'])); ?>`

然后访问 swf 中的 topdomain 变量。如果它是未定义的，假设它是从其他地方嵌入的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:23:36.693

是的，您可以在任何精灵中执行此操作：

```
//this will work in any pure AS3 class
var sp:Sprite = new Sprite;
trace(sp.loaderInfo.url); 
```

如果您使用的是 Flex，请在将子项添加到舞台/显示列表后执行此操作。

要获取域，您可以使用正则表达式来解析 url，或者只查找“http://”和“/”之间的字符串。

# delphi - 在 Windows 服务中连接映射的驱动器号

> ID：14478266
> 
> 赞同：2
> 
> 时间：2013-01-23T11:10:35.183
> 
> 标签：delphi, windows-services, unc, network-drive, mapped-drive

我正在编写一个调用第三方库中的函数的 Windows 服务（ *Delphi XE2 ）。*`COM`该`COM`库的核心非常古老，需要将驱动器号映射到其数据文件的位置。它绝对不适用于`UNC`路径。在我的服务中，我在服务启动时连接驱动器号以确保它可用。我正在使用`WNetAddConnection2`API 调用，并检查返回值。驱动器已成功连接，除非驱动器号已在使用中 ( `ERROR_ALREADY_ASSIGNED`)，但无论哪种情况，COM 功能都可以正常运行。我遇到的问题源于服务停止时。如果我在服务停止时断开驱动器（`WNetCancelConnection2`) 和服务器上的其他应用程序/服务正在使用驱动器号，然后它们会受到影响并失去连接。但是，如果在服务停止时我没有断开驱动器，则驱动器“丢失”并且无法被其他服务连接。

我确信这与创建驱动器映射的会话/服务如何“拥有”驱动器映射有关，但我不确定正确的解决方案是什么。我目前正在*'Local System'*下启动服务。我知道微软一直建议服务不要使用映射驱动器，但我别无选择。有没有人遇到过这个问题并有任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:33:55.923

> 我目前正在“本地系统”下启动服务

尝试不同的用户帐户。

由于安全原因，Windows 本地系统保持本地 - IOW 禁止网络访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:49:33.700

驱动程序字母是按用户分配的。您的服务的驱动器号分配可能影响其他应用程序/服务的唯一方法是它们是否都在同一用户帐户中运行。应用程序不会在`LocalSystem`帐户中运行，除非它们由正在运行的服务启动`LocalSystem`（但随后它们对用户不可见）。因此，如果您希望将服务的驱动器号分配与您的服务隔离开来，请为您的服务创建一个专用的用户帐户以在其中运行。这还使您能够自定义该用户帐户的权限，使其具有网络访问权限如果实际上不需要，则不需要完整的系统访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T13:14:06.477

尝试：

1.  为连接指定一个用户帐户*；
2.  将此用户传递给 WNetAddConnection2；

[你可以在这里](https://stackoverflow.com/questions/2968426/wnetaddconnection2-from-a-windows-service)找到更多信息。

*在工作组中，此帐户必须在目标计算机上进行镜像+目标[PC 上的安全模型必须使用 GPEdit 设置为“经典”](http://technet.microsoft.com/en-us/library/cc786449%28v=ws.10%29.aspx)

# matlab - 如何打印多个打开的图形，如何简化将数据导入 MATLAB

> ID：14478267
> 
> 赞同：2
> 
> 时间：2013-01-23T11:10:35.243
> 
> 标签：matlab, printing, import, figures

我有两个问题：

1.  我在 MATLAB 中有 12 个打开的数字（已经由另一个函数生成，图 1 到 12），我想将它们全部打印到一个文件中，但也打印到我的打印机上。我该如何为此编写代码？我已经阅读了有关获取数字句柄的信息，但我并没有真正理解它的含义以及之后如何打印它们。

2.  我编写了一个脚本来将许多 Excel 文件中的数据导入 MATLAB。excel 文件被命名，因此唯一的区别在于初始部分，其中包括个人的姓名/代码（信息所在的人）。

我的脚本如下所示：

```
Indi1_Sim_T_SFTW1= xlsread('E:\MATLAB\Indi1_Output_SFTW1_6min_100_020812.xls','Indi1_Sim_T_SFTW12')
Indi1_Sim_V_SFTW1= xlsread('E:\MATLAB\Indi1_Output_SFTW1_6min_100_020812.xls','Indi1_Sim_V_SFTW12')

Indi2_Sim_T_SFTW1= xlsread('E:\MATLAB\Indi2_Output_SFTW1_6min_100_020812.xls','Indi2_Sim_T_SFTW12')
Indi2_Sim_V_SFTW1= xlsread('E:\MATLAB\Indi2_Output_SFTW1_6min_100_020812.xls','Indi2_Sim_V_SFTW12')

Indi3_Sim_T_SFTW1= xlsread('E:\MATLAB\Indi3_Output_SFTW1_6min_100_020812.xls','Indi3_Sim_T_SFTW12')
Indi3_Sim_V_SFTW1= xlsread('E:\MATLAB\Indi3_Output_SFTW1_6min_100_020812.xls','Indi3_Sim_V_SFTW12')

Indi4_Sim_T_SFTW1= xlsread('E:\MATLAB\Indi4_Output_SFTW1_6min_100_020812.xls','Indi4_Sim_T_SFTW12')
Indi4_Sim_V_SFTW1= xlsread('E:\MATLAB\Indi4_Output_SFTW1_6min_100_020812.xls','Indi4_Sim_V_SFTW12') 
```

对于许多其他人来说，这种情况仍在继续。

如您所见，我正在为每个人重复代码。我可以用循环功能简化它吗？

PS：所有导入的数据都是数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:43:26.060

关于子弹编号。1：

> 我在 matlab 中有打开的数字，我想将它们全部打印到文件中，也打印到我的打印机上。

你有[`print`](http://www.mathworks.com/help/matlab/ref/print.html)这个目的的命令。只需指定图形的句柄即可，例如：

```
print(h)                      %// Send figure with handle h to printer
print(h, '-djpeg', filename)  %// Save figure with handle h to a JPEG file 
```

关于子弹编号。2：

> ...我可以用循环功能简化它吗？

是的你可以。你可以这样做：

```
N = 4; %// Number of Excel files
C = cells(2 * N, 1);
for k = 1:2 * N
    filename = sprintf('E:\MATLAB\Indi%d_Output_SFTW1_6min_100_020812.xls', k);
    C{k} = xlsread(filename, sprintf('Indi%d_Sim_T_SFTW12', k));
    C{k + 1} = xlsread(filename, sprintf('Indi%d_Sim_T_SFTW12', k));
end 
```

现在所有数据都存储在单元格数组`C`中。

* * *

### 解释

我打算将输出存储`xlsread`在一个[单元格数组](http://www.mathworks.com/help/matlab/cell-arrays.html)中。您有`N`文件，并且您正在从每个文件的两个工作表中读取数据，因此单元格数组`C`是用单元格初始化的`2 * N`。

`for`循环遍历每个文件，并使用命令和迭代计数器构造文件[`sprintf`](http://www.mathworks.com/help/matlab/ref/sprintf.html)名`k`：

```
filename = sprintf('E:\MATLAB\Indi%d_Output_SFTW1_6min_100_020812.xls', k); 
```

这里的结果存储在变量`filename`中，并传递给`xlsread`命令。工作表名称也使用 构造[`sprintf`](http://www.mathworks.com/help/matlab/ref/sprintf.html)，并直接传递给 ，`xlsread`而无需先存储在变量中。

问：*为什么将文件名存储在变量中而不存储工作表名？*
A：我决定将文件名存储在一个变量中只是因为我不想构造它两次，而工作表名称只构造一次，因此将它们中的每一个存储在一个变量中没有任何意义。

循环后，整个数据存储在元胞数组`C`中。要访问 C 中的第 i 个元素（单元格），请使用花括号 ( `{}`)。例如，要访问第二个单元格，请写入`C{2}`.

问：*为什么是细胞阵列？* 答：在元胞数组中，每个元胞可以包含不同类型和长度的数据，例如 {2, 'hello'} 是一个元胞数组，其中包含两个元胞：一个包含数字 2，另一个包含字符串“hello” . 由于您不能保证`xlsread`返回相同长度的数据，因此不能使用简单的矩阵来存储所有文件的内容。

希望这可以帮助！

# java - 将数据写入 .txt 文件

> ID：14478268
> 
> 赞同：1
> 
> 时间：2013-01-23T11:10:36.197
> 
> 标签：java, swing, java-io

我正在尝试将值（在文本区域中键入）存储到 txt 文件中。以下代码正在创建 program.txt 文件，但未在其上写入数据。我究竟做错了什么？

另外，如果我想将这些值保存在用户指定的 .txt 文件中，该怎么做？

```
b2.addActionListener(new ActionListener() {

        @Override
        public void actionPerformed(ActionEvent arg0) {
            try {

                o = new BufferedWriter(new FileWriter("program.txt"));

                o.write(t1.getText());
                o.write(",");
                o.write(t2.getText());
                o.write(",");
                o.write(t3.getText());
                o.write(",");
                o.write(t4.getText());
                o.write(",");
                o.write(t5.getText());
                o.write(",");
                o.write(t6.getText());
                o.write(",");
                o.write(t7.getText());
                o.write(",");

            }
             catch (IOException e){
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T11:11:31.023

你必须**关闭你的 BufferedWriter**，使用[**BufferedWriter#close()**](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedWriter.html#close%28%29)

```
o.close(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T11:16:24.620

为了方便，也使用[`JTextComponent.write(java.io.Writer)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#write%28java.io.Writer%29).

> 另外，如果我想将这些值保存在用户指定的 .txt 文件中，该怎么做？

`JFileChooser`如[本例](https://stackoverflow.com/a/13899359/418556)所示，为用户提供 a 。

![](../Images/265a5e532b2336105fe93966fcd986f7.png)

从返回的文件中建立[`FileWriter`](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html)（检查后以 结尾`.txt`）。

# rncryptor - 带有 RNCryptManager.m 的“程序接收信号：EXC_BAD_ACCESS”

> ID：14478271
> 
> 赞同：0
> 
> 时间：2013-01-23T11:10:43.013
> 
> 标签：rncryptor

我是这个加密/解密的新手，我收到以下错误

`"PROGRAM RECEIVED SIGNAL: EXC_BAD_ACCESS"` 在 DEcryptdata 的 RNCryptManager.m 中

```
NSData *key = [self AESKeyForPassword:password salt:salt]; 
```

尝试使用 RNCryptmanager.h amd .m 文件加密/解密密码为“密码”的字符串时

```
NSData *en = [RNCryptmanager encryptedDataForData:data1 password:password1 iv:ivv salt:salt1 error:error];
values for iv and salt is a random data
NSData *ivv = [self randomData:32];
NSData *salt1 = [self randomdata:16]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:02:30.007

*请注意，RNCryptManager 已被[RNCryptor](https://github.com/rnapier/RNCryptor)取代，后者具有更多功能并提高了安全性。*

您应该会收到有关此代码的警告，这表明您忽略了警告。您绝不能忽略 ObjC 中的警告。

、`iv`和参数`salt`是`error`按引用传递的。此方法返回它们；它不需要他们。它应该看起来像：

```
NSData *en = [RNCryptmanager encryptedDataForData:data1
                             password:password1 
                             iv:&ivv 
                             salt:&salt1
                             error:&error]; 
```

有关示例，请参见[CPCryptController](https://github.com/iosptl/ios6ptl/blob/master/ch15/CryptPic/CryptPic/CPCryptController.m)。

# hibernate - Hibernate：使用 Session 使瞬态对象持久化

> ID：14478274
> 
> 赞同：1
> 
> 时间：2013-01-23T11:10:53.413
> 
> 标签：hibernate, persistence, transient

[我在http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/objectstate.html)见过

> 使用 Hibernate Session 使对象持久化

但我不知道这是否意味着字面上使用 Session。说明：保存实例时出现以下错误：

```
org.springframework.dao.InvalidDataAccessApiUsageException: object references an unsaved transient instance - save the transient instance before flushing: xxxxxxx.entities.Sujeto.progTtipoSujeto -> xxxx.entities.TipoSujeto; nested exception is org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: xxxxx.entities.Sujeto.progTtipoSujeto -> xxxxx.entities.TipoSujeto
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:651)
    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:92)
    at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:460) 
```

我知道原因是 Sujeto.progTtipoSujeto 是 TipoSujeto 类型，它只是在保存 Sujeto 实例之前被实例化。此外，字段 progTtipoSujeto 与标识符字段联合：

```
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "IDN_TIPO_SUJETO", insertable = false, updatable = false)
private TipoSujeto progTtipoSujeto;
@Column(name = "IDN_TIPO_SUJETO")
private Integer idnTipoSujeto; 
```

我得到的解决方案（它有效）是在保存之前从数据库中获取它：

```
parserSujetoToEntity.parserSujetoToEntity(sujetoDTO, sujetoEntity);
TipoSujeto tipoSujetoEntity = (TipoSujeto) this.findByPrimaryKey(TipoSujeto.class, sujetoDTO.getTipo());
sujetoEntity.setProgTtipoSujeto(tipoSujetoEntity);
this.save(sujetoEntity); 
```

有没有办法使用 Session 做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:25:30.747

由于您尝试使用相同的会话对象，因此可以使用会话的[merge()](http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html/objectstate.html#d0e1308)方法。你可以参考[这个答案](https://stackoverflow.com/questions/4509086/what-is-the-difference-between-persist-and-merge-in-hibernate)

# sql - SELECT SQL 语句在 VB.net 控制台应用程序中未按预期工作

> ID：14478279
> 
> 赞同：1
> 
> 时间：2013-01-23T11:11:18.753
> 
> 标签：sql, vb.net, console-application

我知道有关于此的类似帖子，但我似乎找不到任何有用的东西。

我还是 VB 的新手，这可能很明显让我发疯。

我想做的是运行 SQL SELECT 并将结果通过电子邮件发送给需要它的人。

当我运行它时，我收到一封“ELSE”电子邮件，其中指出没有任何内容处于 HOLD 状态，但是在 SQL Server Management Studio 中运行查询确实会显示结果。

这是我所拥有的：

```
Public Sub Main()
    Dim connection As New SqlConnection(My.Settings.connectionString)
    connection.Open()
    Dim sqlCommand As SqlCommand
    log(" Processing - Searching SQL Database for Held ONLN Jobs ")

 Dim sqlQ1 As String = "Select [JobID] FROM [cemail].[dbo].[JobTb] " +
               "WHERE ApplicationID = 7 AND Status = 10 ORDER BY [JobID]"

    sqlCommand1 = New SqlCommand(sqlQ1, connection)
    Dim result = sqlCommand1.ExecuteScalar()

   Dim sqlQ2 As String = "Select [JobID],[JobNumber],[ApplicationID],[GeneratedDate]," +
                "[ReceivedDate],[CompletedDate],[Status],[ExpectedRecordNumber]," +
                "[ReceivedRecordNumber],[BadRecordNumber] " +
                "FROM [cemail].[dbo].[JobTb] " +
                "WHERE ApplicationID = 7 AND Status = 10"
    sqlCommand2 = New SqlCommand(sqlQ2, connection)
    Dim reader As SqlDataReader = sqlCommand2.ExecuteReader()
    While reader.Read()
        Dim jobID = reader(0)
        Dim jobNumber = reader(1)
        Dim appID = reader(2)
    End While

    If (result > 0) Then

 SendEmail(My.Settings.emailuser1, "Current Held Jobs", "Hello," & jobID & "Kind Ragards" )
    Else

        SendEmail(My.Settings.emailuser1, "No Jobs on Hold", "There are no Jobs Currently on Hold" )

    End If

    connection.Close()

    log("Finished")
End Sub 
```

对此的任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:19:08.550

传递 Select 语句时不应调用[ExecuteNonQuery 。](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery%28v=vs.100%29.aspx)
从MSDN上的评论

> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。......... 对于所有其他类型的语句，返回值为 -1.......

您可以通过这种方式更改语句以简化查询

```
Dim sqlQ As String = "Select count(*) as recFound FROM [cemail].[dbo].[JobTb] " + 
                     "WHERE ApplicationID = 7 AND Status = 10"

sqlCommand = New SqlCommand(sqlQ, connection)
Dim result = sqlCommand.ExecuteScalar() 
```

此外，在上面的代码中，不需要使用事务。

**编辑**看到您的评论，我还将展示使用[SqlDataReader从数据库中读取值的部分](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)

```
Dim sqlQ As String = "Select [JobID],[JobNumber],[ApplicationID],[GeneratedDate]," +
                    "[ReceivedDate],[CompletedDate],[Status],[ExpectedRecordNumber]," + 
                    "[ReceivedRecordNumber],[BadRecordNumber] " + 
                    "FROM [cemail].[dbo].[JobTb] " + 
                    "WHERE ApplicationID = 7 AND Status = 10"

sqlCommand = New SqlCommand(sqlQ, connection)
Dim reader As SqlDataReader = sqlCommand.ExecuteReader()
While reader.Read()
     Dim jobID = reader(0)
     Dim jobNumber = reader(1)
     Dim appID = reader(2)
     ..... 'and so on'
End While 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:20:21.043

我认为问题在于您想要执行查询但正在使用**ExecuteNonQuery()**。尝试使用这样的[SqlDataAdapter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter%28v=vs.71%29.aspx)：

```
Public Function SelectSqlSrvRows(dataSet As DataSet, connection As String, query As String) As DataSet
    Dim conn As New SqlConnection(connection)
    Dim adapter As New SqlDataAdapter()
    adapter.SelectCommand = new SqlCommand(query, conn)
    adapter.Fill(dataset)
    Return dataset
End Function 
```

# xml - 由于自动加载重复的 xsd 文件，Visual Studio 2012 XML 智能感知中断

> ID：14478291
> 
> 赞同：2
> 
> 时间：2013-01-23T11:11:44.403
> 
> 标签：xml, visual-studio-2012, intellisense

**简而言之：我可以阻止 Visual Studio 在其内部智能感知引擎中加载一些 xsd 吗？加载某些 xsd 会破坏智能感知。**

* * *

为了对各种 xml 文档执行输入验证，我使用 xsd。我使用的一些 xsd 文件是标准的，例如 xml.xsd 和各种 xhtml xsd。这些 xsd 文件作为嵌入式资源包含在类库中。

但是，在解决方案中包含这些文件会破坏 Visual Studio 对各种 xml 文件的智能感知，即使在不同的项目中也是如此。似乎正在发生的事情是，*Visual* Studio 自己的 xsd 文件和“自定义”嵌入式 xsd 文件都已加载，可能是因为它们适用于相同的`targetNamespace`. 但是，这会导致很多警告，例如：`The global attribute 'http://www.w3.org/XML/1998/namespace:lang' has already been declared.` xslt 文件特别烦人，但似乎所有匹配多个模式的 xml 文件都会发生这种情况。XHTML 是另一种特别有问题的情况，因为只有一个名称空间（严格的、过渡的......）有多个模式。因此，智能感知停止为打开的 xml 文件工作。此外，VS 的错误列表中充斥着大量虚假警告，隐藏了潜在有用的警告。

我可以使用禁用或删除这些模式，`XML > Schemas...` 但这是一个不可行的解决方案，因为每当我打开不同的 xml 文件时它们都会重新添加。我必须每天可能数百次删除模式。

有没有办法将 Visual Studio 配置为不自动加载嵌入式模式，或者一劳永逸地只加载特定的模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T13:14:25.290

基于缺乏响应，我猜这只是一个错误：智能感知根本无法处理这种情况。

我已经提交了错误报告，如果找到解决方案，我将更新此答案：[http ://connect.microsoft.com/VisualStudio/feedback/details/777572/visual-studio-2012-xml-intellisense-broken-due- to-auto-loading-duplicate-xsd-files](http://connect.microsoft.com/VisualStudio/feedback/details/777572/visual-studio-2012-xml-intellisense-broken-due-to-auto-loading-duplicate-xsd-files)

## 解决方案/解决方法

如果您在本地包含*标准*xsd（几乎可以肯定，因为它们与 Visual Studio 自己`xsd`的冲突），您可能不需要对它们进行太多编辑 - 只需将它们作为资源包含在内。因此，我决定将违规文件重命名`xml.xsd`为`xml.xsd.intellisensehack`. 文件扩展名与资源代码无关（您仍然可以像任何其他流一样打开它），但 Visual Studio 不再自动尝试将该文件用作智能感知模式源。

# javascript - jQuery 以 this > a 为目标，其中 a 不是主题

> ID：14478295
> 
> 赞同：2
> 
> 时间：2013-01-23T11:11:52.147
> 
> 标签：javascript, jquery

我已经编写了一个快速脚本来更改悬停时的颜色，如下所示，但是我需要能够定位`$(this a).blah()`是否有可能做到这一点？

如果有意义的话，使用`'#nav ul li ul li a'`整个目标`ul a`

代码：

```
<script type="text/javascript">
    // stuff for superfish
    $(document).ready(function($) {
      $('#nav ul li ul li').mouseenter(function(){
        $(this).css("background-color", "#4a4a4a");
        $('#nav ul li ul li a').css("color", "#fff");
      }).mouseleave(function(){
        $(this).css("background-color", "#404041");
        $('#nav ul li ul li a').css("color", "#ccc");
      });

    });
  </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:13:07.347

您可以使用[`find`](http://api.jquery.com/find/)：

```
$(this).find("a").css("color", "#fff"); 
```

或[上下文部分](http://api.jquery.com/jQuery/#jQuery1)：

```
$("a", this).css("color", "#fff"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:13:44.667

尝试[查找（）](http://api.jquery.com/find/)

> 获取当前匹配元素集中每个元素的后代，由选择器、jQuery 对象或元素过滤。

```
$(this).find('a').css({color:'#fff'}) 
```

# jquery - jQuery防止触发子事件时触发父事件

> ID：14478301
> 
> 赞同：5
> 
> 时间：2013-01-23T11:12:09.390
> 
> 标签：jquery, element, parent

最近我在使用 jQuery 时遇到了一些问题。假设我有这样的元素：

```
<div id="parent1" class="parent">
    <div id="child1" class="children">
        <a href="" id="child_link1" class="child_link"></a>
    </div>
</div> 
```

我有这样的jQuery函数：

```
$(".parent").click(function(){
    alert("parent is clicked");
});

$(".child_link").click(function(){
    alert("child link is clicked");
}); 
```

如果我单击 child_link，也会触发父级。如何创建如果单击 child_link，则不会触发 parent 的情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T11:14:07.657

您需要停止对子点击事件的传播，如下所示：

```
$(".child_link").click(function(e) {
    e.stopPropagation();
    alert("child link is clicked");
}); 
```

[**示例小提琴**](http://jsfiddle.net/bz2UB/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T11:17:11.777

看到你的事件正在冒泡到它的父级。所以在这里你必须使用`.stopPropagation();`：

```
$(".child_link").click(function(ev){
  ev.stopPropagation(); //<----------------this stops the event to bubble up
  alert("child link is clicked");
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T11:14:39.690

孩子的事件处理程序应该这样写：

```
$(".child_link").click(function( event ){
    event.stopPropagation();
    alert("child link is clicked");
}); 
```

这将停止[事件冒泡](http://api.jquery.com/event.stopPropagation/)，并且不会调用父级的事件处理程序。

# mongodb - 将 mongo 查询的输出重定向到 csv 文件

> ID：14478304
> 
> 赞同：103
> 
> 时间：2013-01-23T11:12:16.860
> 
> 标签：mongodb, mongodb-.net-driver, mongodb-query

我将 MongoDB 2.2.2 用于 32 位 Windows7 机器。我在 .js 文件中有一个复杂的聚合查询。我需要在 shell 上执行这个文件并将输出定向到 CSV 文件。我确保查询返回“平面”json（没有嵌套键），因此它本质上可以转换为整洁的 csv。

我知道`load()`和`eval()`。`eval()`要求我将整个查询粘贴到 shell 中，并且只允许`printjson()`在脚本内部，而我需要 csv。并且，第二种方式：`load()`..它在屏幕上打印输出，并再次以 json 格式打印。

Mongo 有没有办法从 json 到 csv 进行这种转换？（我需要 csv 文件来准备数据图表）。我在想：

1\. mongo 都有一个我现在找不到的内置命令。
2\. Mongo不能帮我做；我最多可以将 json 输出发送到一个文件，然后我需要自己将其转换为 csv。
3\. Mongo 可以将 json 输出发送到一个临时集合，其中的内容可以很容易地`mongoexported`转换为 csv 格式。但我认为只有 map-reduce 查询支持输出集合。是对的吗？我需要它来进行聚合查询。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2013-08-18T18:46:39.133

我知道这个问题很老，但我花了一个小时尝试将复杂的查询导出到 csv，我想分享我的想法。首先，我无法让任何 json 到 csv 转换器工作（尽管[这个](https://github.com/jehiah/json2csv)看起来很有希望）。我最终做的是在我的 mongo 脚本中手动编写 csv 文件。

这是一个简单的版本，但基本上是我所做的：

```
print("name,id,email");
db.User.find().forEach(function(user){
  print(user.name+","+user._id.valueOf()+","+user.email);
}); 
```

我只是将查询通过管道传输到标准输出

```
mongo test export.js > out.csv 
```

`test`我使用的数据库的名称在哪里。

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2015-09-07T03:29:44.607

Mongo 的内置导出工作正常，除非您想要进行任何数据操作，如格式化日期、隐蔽数据类型等。

以下命令作为魅力。

```
 mongoexport -h localhost -d databse -c collection --type=csv 
    --fields erpNum,orderId,time,status 
    -q '{"time":{"$gt":1438275600000}, "status":{"$ne" :"Cancelled"}}' 
    --out report.csv 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-08-01T12:52:16.697

扩展其他答案：

我发现@GEverding 的回答最灵活。它也适用于聚合：

**test_db.js**

```
print("name,email");

db.users.aggregate([
    { $match: {} }
]).forEach(function(user) {
        print(user.name+","+user.email);
    }
}); 
```

执行以下命令导出结果：

```
mongo test_db < ./test_db.js >> ./test_db.csv 
```

不幸的是，它在 CSV 文件中添加了额外的文本，这需要在我们使用它之前处理文件：

```
MongoDB shell version: 3.2.10 
connecting to: test_db 
```

`--quiet`但是我们可以让 mongo shell 停止吐出这些评论，只通过传递标志来打印我们要求的内容

```
mongo --quiet test_db < ./test_db.js >> ./test_db.csv 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-07-17T20:04:35.870

您可以尝试以下方法：

```
print("id,name,startDate")
cursor = db.<collection_name>.find();
while (cursor.hasNext()) {
    jsonObject = cursor.next();
    print(jsonObject._id.valueOf() + "," + jsonObject.name + ",\"" + jsonObject.stateDate.toUTCString() +"\"")

} 
```

将其保存在一个文件中，例如“export.js”。运行以下命令：

```
mongo <host>/<dbname> -u <username> -p <password> export.js > out.csv 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-23T11:38:52.087

看看 [这个](https://stackoverflow.com/questions/8971151/file-write-operations-in-mongo-script)

用于从 mongo shell 输出到文件。不支持从 mongos shell 输出 csv。您必须自己编写 javascript 或使用可用的众多转换器之一。例如，谷歌“将 json 转换为 csv”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-10-28T18:42:24.560

在这里权衡一下我一直在使用的一个很好的解决方案。这类似于上面[Lucky Soni 的解决方案](https://stackoverflow.com/a/45438389/5189714)，因为它支持聚合，但不需要对字段名称进行硬编码。

```
cursor = db.<collection_name>.<my_query_with_aggregation>;

headerPrinted = false;
while (cursor.hasNext()) {
    item = cursor.next();

    if (!headerPrinted) {
        print(Object.keys(item).join(','));
        headerPrinted = true;
    }

    line = Object
        .keys(item)
        .map(function(prop) {
            return '"' + item[prop] + '"';
        })
        .join(',');
    print(line);
} 
```

将其保存为`.js`文件，在这种情况下，我们将调用它`example.js`并使用 mongo 命令行运行它，如下所示：

```
mongo <database_name> example.js --quiet > example.csv 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-26T12:28:15.983

我使用以下技术。它可以很容易地使列名与内容保持同步：

```
var cursor = db.getCollection('Employees.Details').find({})

var header = []
var rows = []

var firstRow = true
cursor.forEach((doc) => 
{
    var cells = []

    if (firstRow) header.push("employee_number")
    cells.push(doc.EmpNum.valueOf())

    if (firstRow) header.push("name")
    cells.push(doc.FullName.valueOf())    

    if (firstRow) header.push("dob")
    cells.push(doc.DateOfBirth.valueOf())   

    row = cells.join(',')
    rows.push(row)    

    firstRow =  false
})

print(header.join(','))
print(rows.join('\n')) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-23T12:34:35.870

在远程服务器中执行脚本时。Mongo 将添加它自己的日志输出，我们可能想从我们的文件中省略它。 `--quiet`选项只会禁用连接相关的日志。不是所有的 mongo 日志。在这种情况下，我们可能需要手动过滤掉不需要的行。基于 Windows 的示例：

```
mongo dbname --username userName --password password --host replicaset/ip:port --quiet printDataToCsv.js | findstr /v "NETWORK" > data.csv 
```

这将通过管道输出脚本并用于`findstr`过滤掉其中包含 NETWORK 字符串的任何行。有关 findstr 的更多信息：[https ://docs.microsoft.com/en-us/windows-server/administration/windows-commands/findstr](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/findstr)

Linux 版本将使用`grep`.

# shell - 使用 sed 替换变音符号

> ID：14478325
> 
> 赞同：2
> 
> 时间：2013-01-23T11:13:19.827
> 
> 标签：shell, sed, special-characters

我尝试了以下方法：

```
sed -e 's/ü/\\"u/g' filename.tex>filename2.tex 
```

但我的终端无法识别元音变音符号，因此将所有 u 替换为 \"u。我知道 tex 有可能解决这个问题的包和其他东西，但我目前对 sed 方式感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:56:41.543

`sed`根本问题是，您的语言环境、终端、shell 和您正在操作的文件之间存在复杂的交互。这是要尝试的事情的列表。

*   如果你幸运的话，你的 shell`sed`和你正在处理的文件对于你试图替换的字符应该表示为什么完全一致。就您而言，您已经尝试过，但失败了。

    ```
    sed 's/ü/\\"u/g' filename.tex 
    ```

*   如果你只是稍微不那么幸运，其他部分都很好，只是你`sed`的现代性不足以理解你试图替换的字符序列。`sed`可以简单地将像您这样的简单脚本传递给`perl`它，这通常在字符编码方面是最新的。

    ```
    perl -pe 's/ü/\\"u/g' filename.tex 
    ```

    如果字符编码是 UTF-8，您可能需要向`-CSD`Perl 传递一个选项，和/或用某种转义符表示您希望替换的字符。您可以说`\xfc`原始十六进制代码（恰好是`ü`Latin-1 和 Latin-9）或`\x{00fc}`Unicode 字符，甚至`\N{LATIN SMALL LETTER U WITH DIAERESIS}`; 但请注意，Unicode 对此字形有多种表示形式（预先组合或分解，规范化与否）。另见[http://perldoc.perl.org/perlunicode.html](http://perldoc.perl.org/perlunicode.html)

    （对于就地编辑，也许您也想添加该`-i`选项。）

*   最后，您可能需要分解并简单地找出要替换的字符代码的原始字节。有问题文件的几行十六进制转储应该会有所帮助。在那之后，Perl 应该能够应付，但是您需要弄清楚如何禁用字符集编码和解码等。例如，如果您发现有问题的序列应该`0xFF 0x03`可以`perl -pe 's/\xff\x03/\\"u/g' filename.tex`工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T12:43:43.867

如果有人需要反过来：

```
sed -i 's/\\"u/ü/g;s/\\"a/ä/g;s/\\"o/ö/g;s/\\"U/Ü/g;s/\\"A/Ä/g;s/\\"O/Ö/g;s/{\\ss}/ß/g' *.tex 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:18:51.467

尝试

```
sed -i 's/\([\ä\ö\ü\Ä\Ü\Ö]\)/\&\1uml\;/g;y/\ä\ö\ü\Ä\Ö\Ü/aouAOU/;s/\ß/\&szlig\;/g' ${FILE} 
```

# sql - 如何在 SQL Server 2008 中的时区之间转换？

> ID：14478332
> 
> 赞同：1
> 
> 时间：2013-01-23T11:13:49.423
> 
> 标签：sql, sql-server-2008, sql-server-2008-r2, timezone

我正在使用 SQL Server 2008 R2，我想知道如何将 CST 时间转换为 IST 时间。我的 dtDate 列中已经有 CST 时间，并且想将其转换为 IST 格式。有人可以帮我得到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-14T22:00:32.583

我假设您的意思是“中央标准时间”和“印度标准时间”，因为“CST”和“IST”可能意味着一些不同的东西。如果这是错误的，只需将您的时区的正确偏移量替换为如下所示：

```
select cast(switchoffset(todatetimeoffset(dtDate, '-06:00'), '+05:30') as datetime) 
```

以下是步骤：

*   [将](http://msdn.microsoft.com/en-us/library/bb630335.aspx)我们的 datetime 转换为[datetimeoffset](http://msdn.microsoft.com/en-us/library/bb630289.aspx)，这是一种时区感知数据类型。
*   [将偏移量切换](http://msdn.microsoft.com/en-us/library/bb677244.aspx)到新时区。
*   投射到日期时间（可选，但这似乎是你想要的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T09:53:59.660

我不认为这是一个完美的答案。我不知道你提到的时区，但这对我没有帮助。

我在英国，在一家美国公司工作，我在东部时区制作报告。我从中提取数据的系统将其所有日期都保存在 UTC 中。我运行报告的服务器托管在纽约，时间是美国东部时间。

我正在报告历史数据，需要将表格上的日期转换为 ET 日期。我一直在减去 GETDATE() 和 GETUTCDATE() 之间的差异，但我意识到我现在在这些日期之间得到了差异，今天。我正在转换的日期是历史日期，长话短说，一年中 8 个月的 ET 和 UTC 之间有 4 小时的差异，另外 4 个月有 5 小时的差异。

如果您要转换夏令时区域的日期，则需要更复杂的解决方案

# ruby-on-rails - Rails：获取动作的控制器名称

> ID：14478337
> 
> 赞同：1
> 
> 时间：2013-01-23T11:14:13.890
> 
> 标签：ruby-on-rails, action

如何获取动作的控制器名称？

例如，如果我有一个名为“show”的动作，有没有办法获取该动作“show”所属的控制器的名称？例如`show.controller_name`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:47:01.333

首先，您需要了解应用程序的**MVC 工作流程**。

其次，您需要知道在此**MVC 工作流程**中，您希望此控制器名称因特定操作而闻名。

第三，然后执行：

在控制器中试试这个：

`self.class.to_s`

这将返回您提出的请求的控制器名称。

您可以在控制器中使用过滤器依次调用它以获取控制器名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:16:24.670

在你的控制器中写

`@controller.controller_name`获取控制器的名称

`@controller.action_name`获取动作的名称

# python - 在函数中更改函数的输出

> ID：14478338
> 
> 赞同：0
> 
> 时间：2013-01-23T11:14:16.617
> 
> 标签：python, numpy

您如何创建一个函数，该函数将返回不同的内容，具体取决于它是单独调用还是在另一个函数中调用？我的例子是在一个函数中：make_wave_snapshot(size,wavelength,phase)，它返回一个二维数组并显示一个灰度图像。另一个函数：make_wave_sequence(size,wavelength,nsteps) 返回一个 3-d 数组和一个灰度图像，该图像会自动循环显示每一步的灰度图像。

```
def make_wave_snapshot(size,wavelength,phase):
    waves_array = np.zeros((size,size),np.float)
        if size%2==0:
            for y in range(size):
                for x in range(size):
                    r = math.hypot((size/2 - x - 0.5),(size/2 - y - 0.5))
                    d = np.sin((2*math.pi*r/wavelength)-phase)/np.sqrt(r)
                    waves_array[y,x] = d
  !!!       # dp.display_2d_array(waves_array) #Shows visual representation
            return waves_array #Displays array showing values
        else:
            return 'Please use integer of size.'

def make_wave_sequence(size,wavelength,nsteps):
    waves_sequence = np.zeros((nsteps,size,size),np.float)
        if nsteps%1==0:
            for z in range(nsteps):
                waves_sequence[z] = make_wave_snapshot(size,wavelength,(2*math.pi*z/nsteps))
  !!!        #  dp.display_3d_array(waves_sequence)
                return waves_sequence #Displays array showing values
            else:
                return 'Please use positive integer for number of steps' 
```

我知道 if **name** = **main**并且我认为这可能是答案，但这只是我被告知对检查函数有好处的东西，我不知道如何将它放入实际函数中。谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T11:33:11.417

> 您如何创建一个函数，该函数将返回不同的内容，具体取决于它是单独调用还是在另一个函数中调用？

**你没有。**您的用例甚至不需要它。

这在理论上可以通过使用检查模块或其他检查堆栈帧的方式来实现，但这将是一个非常糟糕的主意。一个函数应该是可预测的，并且无论在哪里调用它都应该做同样的事情。

另请注意，检查`__name__`对您没有帮助，因为它包含模块名称（或者`__main__`如果脚本是入口点）并且与调用函数的范围没有任何关系。

如果您希望您的函数做两件不同的事情，一种方法是使用默认为 的额外参数`None`，您将其用作标志来指示函数是否应遵循第二条路径：

```
def example(a, b, do_b=None):
    if do_b is None:
        return a
    else:
        return b 
```

在您的情况下（如果我理解正确的话），您不想`make_wave_snapshot`在`make_wave_sequence`. 这与返回值无关，可以通过向函数添加额外参数来解决，如上所述：

```
def make_wave_snapshot(size,wavelength,phase,display=True):
    #your code here
    #...
    if display:
        dp.display_2d_array(waves_array) #Shows visual representation 
```

`False`现在您只需在另一个函数中添加一个额外的内部即可调用它：

```
waves_sequence[z] = make_wave_snapshot(size,wavelength,(2*math.pi*z/nsteps), False) 
```

哦，请*不要*`else`像在循环中那样使用返回值作为错误条件的指示。你不是在这里写 C，python 是一种有异常的文明语言 - 使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:25:43.950

一种肮脏但快速的方法是向函数添加一个参数，您可以在其中根据需要切换其行为 - 鉴于是您在代码中调用该函数，您使用（或不使用）开关取决于你在哪里调用它。不是完美的解决方案，但肯定会起作用并且易于实施。

# asp.net - 不使用会话的 asp.net 会话 cookie

> ID：14478340
> 
> 赞同：0
> 
> 时间：2013-01-23T11:14:19.237
> 
> 标签：asp.net, session, cookies, session-cookies

我对 ASP.NET_SessionId cookie 的使用有点困惑。

在我的应用程序中不使用会话状态时，我认为在每个响应上都设置了 cookie，只是使用了一个新值。在我在我的应用程序中使用会话的那一刻，cookie 的值（会话 ID）将保持不变。

实际上，当我的应用程序中不使用 session 时，cookie 的值仍然相同（表示相同的 sessionid）。

**Q1** : 为什么在应用中不使用 session 时 session-cookie 的值是一样的？

**Q2**：为什么在应用程序中不使用会话时，每个响应都会发送一个会话cookie？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:23:56.173

这取决于您如何关闭 SessionState - [http://support.microsoft.com/kb/306996](http://support.microsoft.com/kb/306996)

# mysql-python - TypeError：python mysql中需要一个整数

> ID：14478342
> 
> 赞同：1
> 
> 时间：2013-01-23T11:14:22.710
> 
> 标签：mysql-python

我想通过python简单地访问mysql的数据库。但是当我运行这段代码时：

```
import MySQLdb
db = MySQLdb.connect(host = "127.0.0.1",
                     port = "3306",
                      user="Bishnu",
                      passwd = "Pulchowk",
                      db = "student")
cursor =db.cursor()
cursor.execute("select * from basic_info")
numrows = int(cursor.rowcount)
for x in range(0,numrows):
    row = cursor.fetchall()
    print row[0],"-->",row[1]
db.cose() 
```

它给出了一个错误：

```
Traceback (most recent call last):
  File "C:\Users\Bishnu\Desktop\database", line 6, in <module>
    db = "student")
  File "C:\Python27\lib\site-packages\MySQLdb\__init__.py", line 81, in Connect
    return Connection(*args, **kwargs)
  File "C:\Python27\lib\site-packages\MySQLdb\connections.py", line 187, in __init__
    super(Connection, self).__init__(*args, **kwargs2)
TypeError: an integer is required 
```

那是什么 TypeError ：需要一个整数

为什么会出现这样的问题？要运行这段代码，我遇到了 3 个问题，但幸运的是这个论坛解决了我的两个问题，我想它也会解决吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-11T13:46:18.600

```
db = MySQLdb.connect(host = "127.0.0.1",
                 port = "3306",
                  user="Bishnu",
                  passwd = "Pulchowk",
                  db = "student") 
```

尝试更换：

```
port = "3306" 
```

和

```
port = 3306 
```

（去掉引号）

# html - 为@Html.EditorFor 设置值？

> ID：14478343
> 
> 赞同：0
> 
> 时间：2013-01-23T11:14:31.370
> 
> 标签：html, asp.net-mvc

嗨，我正在尝试设置 @Html.EditorFor 的值？

这是我的编辑器：

```
@Html.EditorFor(model => model.Customer.CustomerName) 
```

这是我尝试设置它的方式：

```
document.getElementById("CustomerName").value = UserInfo.CustomerName; 
```

我收到错误消息，无法调用未定义的方法 getElementById。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:15:42.027

字段的id大概是这样的：

```
document.getElementById("Customer.CustomerName").value = UserInfo.CustomerName; 
```

查看生成的标记以获取`id`输入字段的真实性。

# android - Android：暂停线程/游戏，显示菜单，恢复游戏/线程？

> ID：14478345
> 
> 赞同：0
> 
> 时间：2013-01-23T11:14:31.967
> 
> 标签：android

我在安卓上做游戏。我需要暂停游戏，显示暂停菜单（无论如何通过新活动或对话框），然后继续游戏。这就是我暂停和恢复我的线程的方式：

```
public void pause() {
            isRunning = false;
            while (true) {
                try {
                    ourThread.join();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                break;
            }
            ourThread = null;
        }

public void resume() {
            isRunning = true;
            ourThread = new Thread(this);
            ourThread.start();
        } 
```

当我进入主屏幕时，这一切都很好，但我对如何显示菜单和操作它感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:23:30.980

您是否考虑过使用弹出菜单？您可以在 pause() 上执行 showPopup() 的操作。然后，您可以单击屏幕上的任意位置以关闭弹出窗口，或者您可以在 onMenuItemClick 中设置简历

那有意义吗？

```
public void showPopup() {
    // Anchor popoup with layout to "center" menu
    RelativeLayout layout = (RelativeLayout) findViewById(R.id.menuLayout);
    PopupMenu popup = new PopupMenu(this, layout);
    popup.setOnMenuItemClickListener(this);
    popup.getMenuInflater().inflate(R.layout.menu, popup.getMenu());
    popup.show();
}

@Override
public void onMenuItemClick(MenuItem item) {
    dosomething();
            resume();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:25:12.447

单击设备上的菜单按钮时调用 pause()。

# java - 创建具有垂直堆叠部分的 Swing GUI

> ID：14478350
> 
> 赞同：2
> 
> 时间：2013-01-23T11:14:41.940
> 
> 标签：java, swing, user-interface, layout

我想在 Swing 中创建一个包含两个垂直部分的 GUI：

```
+-----------------------+
| labels,textfields     |
|   and buttons         |
+-----------------------+
|                       |
| chart display         |
|                       |
|                       |
+-----------------------+ 
```

我希望第一部分占据大约 30% 的垂直空间，第二部分占据大约 70%。如何使用 Java Swing 实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:19:16.877

我建议`GridBagLayout`在您想要控制布局组件大小的情况下使用它，因为它允许在组件上放置权重。

[如何使用 GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T11:29:40.207

另请参阅[`JSplitPane.setDividerLocation(int)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JSplitPane.html#setDividerLocation%28int%29)&[如何使用拆分窗格](http://java.sun.com/docs/books/tutorial/uiswing/components/splitpane.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T11:17:35.133

使用布局管理器，例如`BorderLayout`. 上面的一个去`BorderLayout.NORTH`，大的一个去`BorderLayout.CENTER`。

# angularjs - AngularJS：是否可以使控制器中的特定表单输入字段无效？

> ID：14478355
> 
> 赞同：26
> 
> 时间：2013-01-23T11:15:08.333
> 
> 标签：angularjs

我有一个地址文本输入字段，每当输入地址并单击输入字段旁边的搜索按钮时，我都会对地址进行地理编码并将输入文本替换为地理编码器的结果。我还设置了一个范围变量“addressOk”。

是否可以根据`$scope.addressOk`或我是否必须为此地址地理编码输入编写指令以在需要时使表单无效？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-23T15:59:03.993

我找到了解决方案，将 name 属性添加到`<form>`and `<input>`，然后在控制器中可以执行`$scope.formName.inputName.$setValidity(errorKey, isValid)`.

然后，它可能会显示错误，例如`ng-show="formName.inputName.$error.errorkey"`

根据[http://docs.angularjs.org/api/ng.directive:form](http://docs.angularjs.org/api/ng.directive:form)如果指定了 name 属性，则表单控制器以该名称发布到当前范围。

# php - CodeIgniter 站点如何更改基域？

> ID：14478357
> 
> 赞同：0
> 
> 时间：2013-01-23T11:15:18.033
> 
> 标签：php, codeigniter

我想更改我的 CodeIgniter 网站的域名。我怎样才能做到这一点？

示例 我现在有 example.com，现在我想将其更改为 domain.com。

我已经更改了 config.php 文件

```
$config['base_url'] = 'http://domain.com';
```

编辑 config.php 文件后，只有主页与新域一起使用。但其他 URL 与旧域一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:37:38.010

您需要使用 site_url() 辅助函数才能让 CI 使用基本域。你如何输出链接？你能给我们举个例子吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:52:26.173

您在输出的 html 中设置了基本标记吗？查看页面的头部部分

```
<base href="..." /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:46:17.257

好像您已经在其他页面的链接上定义了绝对路径。如果你关注了 CI 的**url** helper，你就不必做所有这些了。`site_url()`在所有链接上使用功能。

```
 site_url('controller/function/params/params') 
```

[URL 助手 Codeigniter](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html)

# iphone - Aviary SDK 问题

> ID：14478360
> 
> 赞同：1
> 
> 时间：2013-01-23T11:15:28.893
> 
> 标签：iphone, ios, objective-c

我在 ios 项目中使用 Aviary sdk。我添加了文档中提到的所有框架和头文件。现在我在 viewdidload 中调用下面的方法。

```
- (void)displayEditorForImage:(UIImage *)imageToEdit
{
    AFPhotoEditorController *editorController = [[AFPhotoEditorController alloc] initWithImage:imageToEdit];
    [editorController setDelegate:self];
    [self presentViewController:editorController animated:YES completion:nil];
} 
```

但它在日志下面给出警告并且不显示 Aviary 窗口。

```
Warning: Attempt to present <AFSDKViewController: 0x7e1aeb0> on <ViewController: 0x7934af0> whose view is not in the window hierarchy! 
```

我如何在我的项目中集成 aviary sdk

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:27:05.307

如果您在 ViewDidLoad 中显示模态视图控制器，则会发生错误，因为视图仍未加载到寡妇层次结构中。您可以在 viewDidAppear 中调用该方法。

但是，如果每次视图出现时都这样做，`displayEditorForImage`则会调用方法。

# sql-server - 与 SQL 服务器汇总汇总 - 但只有最后一个摘要？

> ID：14478361
> 
> 赞同：23
> 
> 时间：2013-01-23T11:15:40.347
> 
> 标签：sql-server, sql-server-2008, sum, rollup

我有这个查询：

```
DECLARE @t TABLE(NAME NVARCHAR(MAX),datee date,val money)

insert INTO @t SELECT 'a','2012-01-02',100
insert INTO @t SELECT 'a','2012-01-02',100
insert INTO @t SELECT 'a','2012-01-03',100
insert INTO @t SELECT 'a','2012-01-05',100
insert INTO @t SELECT 'b','2012-01-06',200
insert INTO @t SELECT 'b','2012-01-07',200
insert INTO @t SELECT 'd','2012-01-07',400
insert INTO @t SELECT 'e','2012-01-09',500
insert INTO @t SELECT 'f','2012-01-12',600

SELECT  Name,datee,SUM (val) 
from @t GROUP BY NAME ,datee 
```

目前的结果是：

![在此处输入图像描述](../Images/ab22ec8862128690ea519f0d38b01b53.png)

但我需要`sum`在最后添加。所以我尝试了汇总：

```
 SELECT  Name,datee,SUM (val) 
    from @t GROUP BY NAME ,datee  with ROLLUP 
```

![在此处输入图像描述](../Images/c2d9fd40686d234714d53f43665cde54.png)

但我只需要*最后一个*总和行。我不需要*内报告* `sum's`

那么如何才能得到想要的结果呢？

（我不能更改 `group by`子句，因为其他人也需要它，我只想在最后加上/不加总和）。

[sql在线就在这里](https://data.stackexchange.com/stackoverflow/query/edit/93333)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-23T11:27:32.033

有可能`GROUPING SETS`，试试这个：

```
SELECT  Name,datee,SUM (val) 
FROM    @t 
GROUP BY 
        GROUPING SETS((NAME ,datee), ()) 
```

[SQL小提琴](http://www.sqlfiddle.com/#!3/d41d8/7868/0)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-23T12:36:49.827

也可以`ROLLUP()`：

```
SELECT
  Name,
  datee,
  SUM (val) 
FROM @t 
GROUP BY 
  ROLLUP((NAME, datee))
; 
```

`WITH ROLLUP`, 以及`WITH CUBE`, 是非标准的且已弃用。（请参阅手册中的*非 ISO 兼容语法*[`GROUP BY`](http://msdn.microsoft.com/en-us/library/ms177673.aspx)。）

需要注意的`ROLLUP()`是，在 SQL Server 2005 的 90 以下或 SQL Server 2008+ 的 100 以下的兼容性级别不支持，而支持`GROUPING SETS()`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-23T11:19:14.010

如果你只想要最终的总数，你不能只使用 a `UNION ALL`：

```
SELECT  Name,datee,SUM (val) 
from @t 
GROUP BY NAME ,datee 
union all
SELECT  null,null,SUM (val) 
from @t 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/d41d8/7861)

或者您可以使用`WHERE`子句过滤具有`null`值的行：

```
select name, 
  datee, 
  total
from
(
  SELECT  Name,datee,SUM (val) total
  from @t 
  GROUP BY NAME, datee with rollup
) src
where datee is not null
or
(
  name is null 
  and datee is null
) 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/d41d8/7866)

结果是：

```
|   NAME |      DATEE | COLUMN_2 |
----------------------------------
|      a | 2012-01-02 |      200 |
|      a | 2012-01-03 |      100 |
|      a | 2012-01-05 |      100 |
|      b | 2012-01-06 |      200 |
|      b | 2012-01-07 |      200 |
|      d | 2012-01-07 |      400 |
|      e | 2012-01-09 |      500 |
|      f | 2012-01-12 |      600 |
| (null) |     (null) |     2300 | 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-01T07:24:10.190

您可以使用此查询：

```
SELECT  *
FROM    ( SELECT    Name ,
                    datee ,
                    SUM(val) summ
          FROM      @t
          GROUP BY  NAME ,
                    datee
                    WITH ROLLUP
        ) A
WHERE   ( datee IS NOT NULL
          OR ( datee IS NULL
               AND name IS NULL
             )
        ) 
```

# android - Android - 跨设备同步用户偏好

> ID：14478364
> 
> 赞同：2
> 
> 时间：2013-01-23T11:15:46.867
> 
> 标签：android

我正在开发一个应用程序，要求所有偏好都可以在用户设备之间共享（连接到用户的谷歌帐户）。是否有任何适用于 Android 的服务，例如 iOS 中的 iCloud，它可以自动同步手机上一个文件夹中的所有用户数据，或使用 API 的 kay-value 对？因此，每次用户更改设置时，它们都会在所有设备上更新（因此 Backup API 不起作用）Drive API 会部分好，但如果有现有的解决方案，我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:20:00.497

看看以下任何一个链接，它可能会帮助你

[http://support.google.com/android/bin/answer.py?hl=en&answer=168580](http://support.google.com/android/bin/answer.py?hl=en&answer=168580)

[http://ericmiles.wordpress.com/2010/09/22/connecting-the-dots-with-android-syncadapter/](http://ericmiles.wordpress.com/2010/09/22/connecting-the-dots-with-android-syncadapter/)

# c# - 将 ComboBox 与通用列表绑定，以便组合框项的值表示绑定对象

> ID：14478369
> 
> 赞同：0
> 
> 时间：2013-01-23T11:16:01.863
> 
> 标签：c#, wpf

我正在尝试使用 WPF。我正在尝试将用户定义的类`ComboBox`与`List<MyClass>`where绑定。`MyClass`我想设置`SelectedValuePath`ComboBox 的属性，以便 ComboBox 项的值代表`MyClass`.

我尝试将`SelectedValuePath`属性设置为`.`and `this`，但没有运气。有人可以建议我实现它的方法吗？

示例代码：

```
Class MyClass
{
   public int ID {get; set;}
   public string Name {get; set;}
}

List<MyClass> lst = new List<MyClass>();

ComboBox cmb = new ComboBox();
cmb.DataContext = lst;
cmb.DisplayMemberPath = "Name";
// Here I want object of MyClass (which is bound to this item) itself should be assigned as value.
cmb.SelectedValuePath = "????"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:26:11.547

改用`cmb.SelectedItem`它返回一个对象，将其转换为`MyClass`并且根本不设置 SelectedValuePath

# iphone - 从 imageView 添加图像以返回 HTML 字符串的正确方法

> ID：14478371
> 
> 赞同：0
> 
> 时间：2013-01-23T11:16:06.380
> 
> 标签：iphone, html, ios, objective-c

我正在打印我自定义的视图以打印来自 imageView 的一些文本和图像。

以下代码有效，但出现的不是图像，而是一个空白框。

```
 -(NSString *)prepareHTMLText {

    NSMutableString *body = [NSMutableString stringWithString:@"<!DOCTYPE html><html><body>"];

        [body appendString:@"<h2>Ingredients</h2>"];
        [body appendFormat:@"<p>%@ %@</p>", @"text", @"TEStText"];

        [body appendFormat:@"<img src=\"%@\"/>", myImageView.image];

    [body appendString:@"</body></html>"];
    return body;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:27:58.760

您不能直接将这样的图像分配给您的身体。您需要执行以下操作

1.  转换`myImageView.image`为`NSData`
2.  `NSData`以唯一名称存储文档目录中的内容。
3.  将存储在文档目录中的图像路径传递给正文。

就是这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:28:53.670

```
[body appendFormat:@"<img src=\"%@\"/>", myImageView.image]; 
```

您想附加此图像的路径，但在这里您只是附加了图像的描述。（默认情况下，它包含图像类和大小等内容。）。似乎输出字符串将被发送到 webview（或浏览器？）。webview 无法识别和找到带有 . 您需要为 webview 指定正确的路径才能找到图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:32:17.077

希望您在捆绑包中有图像，因此获取图像的文件路径并使用该路径而不是 myImageView.image。希望这会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T11:40:40.263

[从这里下载 Base64.h 和 .m 文件，](http://www.imthi.com/blog/programming/iphone-sdk-base64-encode-decode.php) 将它们拖到你的项目中。在你的 .h 文件中导入 Base64.h 并尝试下面的代码它可以工作

```
-(NSString *)prepareHTMLText {
    NSString *str1 = [Base64 encode:UIImagePNGRepresentation(myImageView.image)];
    NSMutableString *body = [NSMutableString stringWithString:@"<!DOCTYPE html><html><body>"];
    [body appendString:@"<h2>Ingredients</h2>"];
    [body appendFormat:@"<p>%@ %@</p>", @"text", @"TEStText"];
    [body appendFormat:@"<img src=\"data:image/png;base64,%@\" alt=\"\" height=\"100\" width=\"100\"/>",str1];
    [body appendString:@"</body></html>"];
    return body;
} 
```

试试这个

# mysql - 需要将fdb数据文件导入mysql数据库

> ID：14478374
> 
> 赞同：1
> 
> 时间：2013-01-23T11:16:17.743
> 
> 标签：mysql, import, fdb

如何将 .fdb 文件导入 mysql 数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-13T22:19:18.830

我能找到有用的唯一解决方案是使用[Exportizer Pro 5.5.4](http://www.vlsoftware.net/download.html)

它允许将数据导出到数据库、文件、剪贴板或打印机。Exportizer Pro 通过 ADO、BDE 或 Interbase/Firebird 接口与数据库一起工作。它可以打开 ODBC 数据源、DB、DBF、MDB、ACCDB、XLS、XLSM、XLSB、GDB、IB、FDB、HTML、UDL、DBC、TXT、CSV 类型的文件，以及由 ADO 连接字符串指定的数据库。数据可以导出为文本、CSV、XLS、RTF、XML、HTML、DBF、SQL 脚本等文件格式，以及 ADO、BDE 或 Interbase 支持的任何类型的关系数据库。例如，可以执行流行的数据库转换，如 dbf 到 txt、txt 到 xls、dbf 到 csv、txt 到 dbf、Access 到 HTML、Excel 到 Access、Interbase 到 MySQL 等等。

可以一次从文件夹中导出所有或选定的数据库文件或从数据库中导出所有或选定的表。

Exportizer Pro 可以自动检测 BLOB 字段中最知名的图像类型（JPG、PNG、GIF、BMP、ICO）并将它们导出，例如，导出到 HTML。在导出过程中，您可以将 BLOB 图像转换为另一种图像格式。

许多导出选项可确保完全控制输出。可以指定源到目标的字段映射。

导出操作既可以通过程序界面执行，也可以通过带有大量参数的命令行执行。您可以直接从 GUI 轻松生成所需的命令行。

可以将数据复制到剪贴板或打印它们。

有几个实用功能可用于数据操作和书签。

所以你使用安装它然后打开 fdb 文件，然后选择你的表并使用 MYSQL 导出它 ![在此处输入图像描述](../Images/96cab25bb74250f2a15e8ff4b9a04503.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T12:24:28.113

.fdb 是一个火鸟数据库。迁移到 mysql 的最佳方法是两个编写脚本应用程序，它将每个表的每条记录从 firebird 复制到 mysql 中的重复框架中。显然 mysql 和 firebird 是关系数据库的两个实现，它们支持许多 ANSI SQL 标准功能，因此您可以从 firebird db 中选择并插入到 mysql db 中。

假设您了解基本的 sql 和一点 c++，则无需为此投资购买工具，或在开源解决方案上浪费您的时间

它的主干是在您的应用程序中，您需要使用 select 将 firebird 记录加载到内存中，然后在您的 mysql DB 中运行插入。Qt 库包含与这些数据库建立独立连接所需的一切。

# python - python 正则表达式：替换 英石， nd, 等在一个带有单个子的地址中

> ID：14478380
> 
> 赞同：5
> 
> 时间：2013-01-23T11:16:32.463
> 
> 标签：python, regex

我有许多地址，例如“East 19th Street”或“West 141st Street”，我想在一次调用 re.sub 时删除“th”和“st”。

```
re.sub("(\d+)st|(\d+)nd|(\d+)rd|(\d+)th", "g<1>", "East 19th Street") 
```

不起作用，因为它并不总是第一个被抓住的群体

我可以链接潜艇，但它很脏。帮助表示赞赏

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T11:20:53.583

让我们试试这个：

```
re.sub(r"(\d+)(st|nd|rd|th)\b", r"\1", str) 
```

或更好

```
re.sub(r"(?<=\d)(st|nd|rd|th)\b", '', str) 
```

`\b`防止`21strange`被替换之类的东西。

要仅替换语法正确的结构，您还可以尝试：

```
re.sub(r"(?<=1\d)th\b|(?<=1)st\b|(?<=2)nd\b|(?<=3)rd\b|(?<=[04-9])th\b", r'', str) 
```

这将替换`23rd`并保留`44th`无效的内容，例如`23st`完好无损。不知道这是否值得麻烦。

# windows - 具有我可以包装的功能的简单 Windows dll

> ID：14478384
> 
> 赞同：0
> 
> 时间：2013-01-23T11:16:40.013
> 
> 标签：windows, dll

我希望通过包装来自 windows dll 的函数来测试 python 的 ctypes。是否有可以在 windows vista 上使用的 windows dll 进行测试？例如，也许 dll 有一个以字符串形式返回当前时间的函数。

如果没有，我想我将不得不用 C 和 Visual Studio Express 编写自己的 dll。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:23:42.243

最容易包装的是消息框函数：它实际上是 dll 包装的 hello-world。它住在`user32.dll`. 看看[这里](http://www.glbasic.com/forum/index.php?topic=2129.0)

# php - PDO 连接到不同服务器上的 SQLite 服务器

> ID：14478389
> 
> 赞同：1
> 
> 时间：2013-01-23T11:16:46.130
> 
> 标签：php, sqlite, pdo

我有一个非常简单的 SQLite 数据库，我需要从不同的服务器读取/写入。

假设数据库存储在这里：[http](http://www.abc.com/data/data.sqlite) : //www.abc.com/data/data.sqlite 我正在使用 PHP 从[http://www.xyz.com访问它](http://www.xyz.com)

所以我的第一次尝试如下：

```
$dbpath = "http://www.abc.com/data/data.sqlite";
$dbconn = "sqlite:$dbpath";
$db = new PDO($dbconn) 
```

不好，我得到以下信息：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000] [14] unable to open database file'.........PDO->__construct('sqlite:http://w...') #1 {main} thrown 
```

如果尝试将数据库复制到我正在访问的同一台服务器上：

```
$dbpath = "http://www.xyz.com/data/data.sqlite";
$dbconn = "sqlite:$dbpath";
$db = new PDO($dbconn) 
```

我得到同样的信息。只有当我在同一台服务器上给它一个相对路径时：

```
$dbpath = "../data/data.sqlite"; 
```

它确实有效。我知道数据库 URL 和数据库本身是正确的。那么访问跨服务器有限制吗？有人知道解决这个问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:33:10.633

没有像“SQLite 服务器”这样的东西。它仅以文件的形式存在。
但是 HTTP 协议中没有文件，只有 URI。
所以，这是本质上的不兼容。

为了能够进行远程呼叫，您有 3 个选择

1.  开个玩笑：在每次 SELECT 查询之前在本地下载文件并在更新后将其上传回来
2.  建立一些代理脚本，接收查询并返回 json。
3.  给自己一个真正的数据库服务器。
4.  或者只是更改项目架构以消除远程访问的需要。

# objective-c - XIB 和模拟器/iOS 设备中元素的不同位置

> ID：14478390
> 
> 赞同：-1
> 
> 时间：2013-01-23T11:16:49.013
> 
> 标签：objective-c, xib

我在 viewController 的 scrollView 中实现了一个小的 mapView (65x65)。如果我为每个 XIB 设置 mapView 的位置并在模拟器或 iOS 设备上运行它，它不会位于正确的位置：

*   XIB 正确位置
*   iPhone 5 到高
*   iPhone 4（或模拟器）非常高

我可以使用这些代码纠正每种情况的位置，但这不是解决方案：

XIP 中相同位置的代码：

```
CGRect newFrameMapView = CGRectMake(10,171,65,65);
mapView.frame = newFrameMapView; 
```

为 iPhone 5 上的输出更正它的代码：

```
CGRect newFrameMapView = CGRectMake(10,215,65,65);
mapView.frame = newFrameMapView; 
```

为 iPhone 4 上的输出更正它的代码：

```
CGRect newFrameMapView = CGRectMake(10,302,65,65);
mapView.frame = newFrameMapView; 
```

笔记：

*   我在顶部有一个导航控制器。
*   如果我将 mapView 放在 scrollView 之外，什么都不会改变。
*   我不使用自动布局

--- 编辑 --- 23.01.2013 -----------------------------------

我已将“mapView”重命名为“mapView2”，以确保不会更改代码其他部分的位置。

以下是 .h 的重要代码片段

```
#import <MapKit/MapKit.h>

@interface ViewControllerDetail : UIViewController <MKMapViewDelegate> {

    IBOutlet MKMapView *mapView2;

}

@property(nonatomic, retain) IBOutlet MKMapView *mapView2;

@end 
```

还有他们

```
@implementation ViewControllerDetail

@synthesize mapView2; 
```

[...]

```
// Basic Settings Map

[mapView2 setMapType:MKMapTypeStandard];
[mapView2 setZoomEnabled:NO];
[mapView2 setScrollEnabled:NO];
[mapView2 setDelegate:self];

// Map Start

MKCoordinateRegion myStartRegion = { {0.0, 0.0}, {0.0, 0.0} };
myStartRegion.center.latitude = 44.087439;
myStartRegion.center.longitude = 2.139614;
myStartRegion.span.latitudeDelta = 0.003;
myStartRegion.span.longitudeDelta = 0.003;
[mapView2 setRegion:myStartRegion animated:NO];

// Map Point

MKCoordinateRegion myBeispielRegion = { {0.0, 0.0}, {0.0, 0.0} };
myRegion1.center.latitude = 44.087439;
myRegion1.center.longitude = 2.139614;
classAnnotation *annotationRegion1 = [[classAnnotation alloc] init];
annotationRegion1.coordinate = myRegion1.center;
[mapView2 addAnnotation:annotationRegion1]; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T10:03:40.790

我发现了错误：

（不知道这是否正常，我使用的是 Xcode 4.5 版）

如果我在 Xib 中插入 MapView，它会自动设置为 Autosizing left/bottom。我没有注意到，我认为标准的自动调整大小是左/上。

# python - xoauth.py IMAP 令牌在 1 小时后过期

> ID：14478392
> 
> 赞同：1
> 
> 时间：2013-01-23T11:16:54.760
> 
> 标签：python, google-app-engine, oauth, imap, two-legged

我是 Google Apps 管理员，使用 xoauth.py 和 IMAP 下载用户邮件，无需用户密码。但是这个过程在 1 小时后停止。我搜索了很多博客，我知道这个令牌会在 1 小时后过期。谁能告诉我如何将过期时间延长到从不，或者如何刷新这个令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:07:12.070

我假设您在这里使用的是服务帐户、OAuth 2.0 和模拟？看：

[https://developers.google.com/accounts/docs/OAuth2ServiceAccount#expiration](https://developers.google.com/accounts/docs/OAuth2ServiceAccount#expiration)

无法刷新令牌或增加过期时间。您的应用程序应将给定的令牌缓存一小时以用于所有 IMAP 连接。之后，它应该生成另一个 JWT，对其进行签名，并请求另一个访问令牌。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:24:48.023

try: .. catch:.. 逻辑可用于处理此类异常。

由于 Google 已停用 OAuth1.0，因此建议使用 OAuth2.0 而不是 OAUth1。

# java - Java：已编译内容的 Hashmap

> ID：14478397
> 
> 赞同：1
> 
> 时间：2013-01-23T11:17:01.513
> 
> 标签：java, hashmap

我正在寻找在字节码中实现其内容的 HashMap。这类似于我序列化内容然后读入它。但根据我的经验，序列化只适用于将其保存到文件然后读入，我希望这个实现比这更快。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:19:49.733

> 但根据我的经验，序列化仅适用于将其保存到文件然后读入，我希望这个实现比这更快。

序列化适用于*流*。具体来说，[`ObjectOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)可以包装任何[`OutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html). 如果你想执行内存中的序列化，你可以[`ByteArrayOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html)在这里使用。

同样在输入端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:29:10.713

您可以使用 Java 序列化机制将 HashMap 保存为字节数组

```
 Map map = new HashMap();
    map.put(1, 1);
    ByteArrayOutputStream bout = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(bout);
    oos.writeObject(map);
    oos.close();
    byte[] bytes = bout.toByteArray();
    // restore from bytes
    ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(bytes));
    map = (Map) ois.readObject();
    System.out.println(map); 
```

输出

```
{1=1} 
```

并不是 Map 中的键和值都必须是可序列化的，否则它将不起作用

# eclipse - 如何在eclipse中组织webdriver项目？

> ID：14478398
> 
> 赞同：0
> 
> 时间：2013-01-23T11:17:05.100
> 
> 标签：eclipse, webdriver, project-structure

我已经在 Eclipse Juno 中启动了一些 WebDriver 项目，但我对我的结构不满意，我认为这很愚蠢而且根本没有效率。

现在你可以在下面看到我的项目三。TEST_xxx.java 文件是触发测试包中文件的函数。

下面是 TEST_xxx.java 文件中一个函数的示例：

```
public void a_search_product_by_sku(String sku) throws InterruptedException {
    System.out.println("Running Testsuite 3 - Navigation - Testcase 1 - Search product by SKU");
    tests.navigation nav = new tests.navigation(BASE_URL, driver);
    nav.search_product_by_sku(sku);
} 
```

这将调用测试包内导航类中的函数 search_product_by_sku()。这个函数看起来像这样：

```
public void search_product_by_sku(String sku) throws InterruptedException {
    driver.get(url + "/k/k.aspx");
    driver.findElement(By.id("q")).clear();
    driver.findElement(By.id("q")).sendKeys(sku);
    driver.findElement(By.cssSelector("input.submit")).click();
    boolean status = driver.findElement(By.cssSelector("BODY")).getText().matches("^[\\s\\S]*Status:[\\s\\S]*$");
    Assert.assertEquals(true, status);
} 
```

所有这些似乎都很难维护，而且由于我不是一个非常有经验的程序员，我真的没有想法，我希望这里有人可以帮助我。

提前致谢！

![现在在 Eclipse 中的组织三](../Images/3de55f9bd601b5eb299e7d661d6462ee.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:56:59.383

首先，类名应以大写字母开头。

日期应该是日期。

而不是在测试包中有四个类。您可以将 4 个类合并为一个类。

如果它们在同一个包中，那么这些类和测试类会很好。

# jquery - Jquery 工作，但不是？

> ID：14478400
> 
> 赞同：0
> 
> 时间：2013-01-23T11:17:11.510
> 
> 标签：jquery, conflict

我有一个特殊的问题。我试图在某些页面中放置一个 jquery 简单隐藏或简单的任何内容，但它不起作用。我确信 jquery 可以工作。

我试过了：

```
$('.content').hide(); 
```

但是`div`那些`class="content"`仍然可见的。所以我尝试了：

```
jQuery(function($){
    $('.content').hide();
    alert('jQuery works');
}); 
```

在第二个示例中，我收到一条显示我的消息的警报。但是`div`'s with`class="content"`仍然可见。

我该如何处理？

* * *

> 感谢所有回复，当我在 jQuery 之外使用 class="conten" 渲染 div 时，代码可以工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:19:57.093

```
$(document).ready(function () {
    $(".content").hide();
} 
```

此代码将确保仅在加载 jQuery 并且页面准备好时隐藏内容。

其他要检查的事项：

1.  你`content`在页面上有一个类的元素
2.  你实际上是在加载 jQuery
3.  在此代码之前没有其他 JS 错误。根据您使用的浏览器检查 Firebug 或 Web 开发人员控制台。
4.  您没有拥有 $ 所有权的竞争库。如果是这样，您将需要使用其中一种方法来避免代码冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:32:04.470

你在里面调用你的函数`jQuery(document).ready()`吗？你有 jQuery 没有冲突吗？尝试这个：

```
var $ = jQuery.noConflict();
$( 'document' ).ready( function(){
    $('.content').hide();
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T11:21:47.360

使用`jQuery`代替`$`

```
jQuery(function(){
    jQuery('.content').hide();
}); 
```

# mule - 如何使用将定期调用文件上传器的 Quartz 组件安排服务？

> ID：14478401
> 
> 赞同：3
> 
> 时间：2013-01-23T11:17:12.480
> 
> 标签：mule, mule-studio

这是我之前的问题[如何使用 Mule 通过 REST over HTTP 上传多个文件的扩展？](https://stackoverflow.com/questions/14457455/how-to-upload-multiple-files-via-rest-over-http-using-mule/14466425#14466425). 要求规定，每周三上午 10 点必须上传文件。从此以后，我需要一个调度程序来完成此任务。我发现解决方案是带有 Cron Expression 的“Quartz”入站组件。

但是我该怎么做呢？因为我不能有两个“入站端点”。（石英和文件）例如

```
<flow name="fileUploader" doc:name="fileUploader">

    <quartz:inbound-endpoint 
        jobName="myServiceJob" 
        repeatInterval="5000" 
        cronExpression="0 0 10 ? * WED 
        doc:name="Quartz">
        <quartz:event-generator-job/>
   </quartz:inbound-endpoint>

        <file:inbound-endpoint 
            path="C:\input"
            pollingFrequency="5000" moveToDirectory="C:\movehere" doc:name="File"
            responseTimeout="10000"/>

    <object-to-byte-array-transformer doc:name="Object to Byte Array"/>

    <file:outbound-endpoint 
            path="C:\outputfile" 
            responseTimeout="10000" 
            doc:name="File"/>

</flow> 
```

如果我运行我会得到错误

**线程“主”org.mule.module.launcher.DeploymentInitException 中的异常：SAXParseException：cvc-complex-type.2.4.a：发现以元素“文件：入站端点”开头的无效内容。**

那么我需要做的改变是什么？

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T04:05:04.740

试试这个

```
<file:endpoint name="fileConnector" path="C:\input" pollingFrequency="5000" doc:name="File"/>

<flow name="fileUploader" doc:name="fileUploader">

        <quartz:inbound-endpoint 
        jobName="myServiceJob" 
        repeatInterval="5000" 
        cronExpression="0 0 10 ? * WED" 
        doc:name="Quartz">

        <quartz:endpoint-polling-job>
            <quartz:job-endpoint ref="fileConnector"/>
        </quartz:endpoint-polling-job>
       </quartz:inbound-endpoint>

       <file:outbound-endpoint 
        path="C:\outputfile" 
        responseTimeout="10000"        
            outputPattern="#[message.inboundProperties.originalFilename]"       
       doc:name="File"/>
</flow> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:42:35.890

你有两个选择：

一种。将文件入站端点替换为处理文件处理的组件。它将由 Quartz 触发，从文件夹中提取文件并将其传递给出站端点。

湾。不要使用 Quartz 端点并覆盖 org.mule.transport.file.FileMessageReceiver 来实现轮询文件的自定义调度。

第一种选择是更简单的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:47:35.683

如果您找不到所需的确切内容，以下只是一个工作回合。

1-您可以有 2 个流而不是 1 个，一个用于正常入站的正常工作，一个用于石英：入站端点。

2-您可以让您的调度程序将消息放在队列中，并让另一个流程从该队列中提取消息并进行处理。

3-你可以有一个带有quartz:inbound-endpoint的组件，这里建议[http://blogs.mulesoft.org/using-quartz-to-trigger-a-service/](http://blogs.mulesoft.org/using-quartz-to-trigger-a-service/)

希望以上之一有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T11:19:26.020

抱歉，由于太长，无法将其作为评论，所以这里是`<quartz:endpoint-polling-job>` Mule 网站的示例：

```
<service name="testService5">
  <description>
  The endpoint polling Job will try and perform a 'request' on any Mule endpoint. If a result is received it will be handed off to this 'testService5' service for processing. The trigger will fire every 5 minutes starting at 2pm and ending at 2:55pm, every day. during this period the job will check the file directory /N/drop-data/in every 5 minutes to see if any event data is available. The request will timeout after 4 seconds if there are no files in the directory. 
  </description>

  <inbound>
    <quartz:inbound-endpoint name="qEP5" cronExpression="0 0/5 14 * * ?" jobName="job5"
           connector-ref="quartzConnector1">
      <quartz:endpoint-polling-job>
        <quartz:job-endpoint address="file:///N/drop-data/in" timeout="4000"/>
      </quartz:endpoint-polling-job>
    </quartz:inbound-endpoint>
  </inbound>
</service> 
```

希望以上有所帮助

# asp.net - Jquery ajax调用在锚标记中不起作用

> ID：14478402
> 
> 赞同：0
> 
> 时间：2013-01-23T11:17:16.913
> 
> 标签：asp.net, jquery, anchor

我有一个点击下载文件的链接。我在该链接标记的 onclick 事件上编写了一个函数，以便在单击它时执行一些 ajax 操作。

但是当我们单击该链接时，该函数不会被调用。

但是，如果我调试代码或在该 js 函数中放置一个警告框，它就可以正常工作。这将是什么原因？

我的代码：

HTML：

```
<a href="DllLocation.dll" onclick=fntrackdownloads() ></a> 
```

JS：

```
function fntrackdownloads() {
    $.get("default.aspx?RT=1", Responsetrackdownloads);    
} 
```

工作代码：

JS：

```
function fntrackdownloads() {
    $.get("default.aspx?RT=1", Responsetrackdownloads);    
    alert("something");
} 
```

任何帮助将不胜感激。

> 注意：锚标签是从后面的代码动态生成并写入 dom 的。我不知道什么 dll 位置将出现在 href 属性中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:21:49.123

```
$(document).("click", "a.putaclass", function(e) {
     //what to do on the click
     var $a=$(this);
     $.get(pathtoserver,function(d) {
         alert('data received:'+d);

          }) 

     return false;  //or e.preventDefault
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:23:29.620

我认为你错过了`"quotes"`这里：

```
<a href="DllLocation.dll" onclick="fntrackdownloads()"></a>
//--------------------------------^------------------^ 
```

或更多的jQuery方式：

```
$('a[href="DllLocation.dll"]').click(function(){
  fntrackdownloads();
}); 
```

和

```
$('a[href="DllLocation.dll"]').click(fntrackdownloads);
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:26:57.700

这可能是因为默认锚行为会中断您的 AJAX 响应。

试着把`return false`点击调用的函数放在最后，看看会发生什么。

# ruby - 如何让 Aruba 使用不同的 ENV["HOME"]？

> ID：14478406
> 
> 赞同：2
> 
> 时间：2013-01-23T11:17:36.853
> 
> 标签：ruby, cucumber, aruba

从[文档](https://github.com/cucumber/aruba#configuration)：

> 默认情况下，Aruba 将创建一个目录 tmp/aruba，在其中执行文件操作。

但是，我的应用程序用于`ENV["HOME"]`创建和读取文件 ( `~/.foorc`)，因此我需要 Aruba 使用假的`ENV["HOME"]`.

我是否需要将它设置在一些支持文件中，或者有没有办法告诉 Aruba 它的`tmp/aruba`for files in `ENV["HOME"]`？

这是我正在测试的代码的摘录（显然我正在使用 Cucumber/Aruba 进行更高级别的测试，但 ENV["HOME"] 的使用在这里很重要。）：

```
def initialize config_path = ""
  if config_path.empty?
    @config_path = File.join ENV["HOME"], ".todotxt.cfg"
  else
    @config_path = config_path
  end

  if file_exists?
    super @config_path
    validate
  end
end

def file_exists?
  File.exists? @config_path
end

#....
  ask_to_create unless @config.file_exists?
#... 
```

规格：

```
Scenario: todotxt
  Given an empty installation
  When I run `todotxt`
  Then it should pass with:
    """
    Should I create a sample config file? [Y/n]
    """ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T15:30:07.407

查看 Aruba 本身的实现，我可以制作非常相似的东西：

文件*features/support/aruba.rb*，由 cucumber 自动加载并实现`Around`挂钩：

```
# Temporarily enforce an isolated, fake, homedir.
around do |scenario, block|
  @__aruba_original_home = ENV["HOME"]
  ENV["HOME"] = File.expand_path(File.join("tmp", "aruba"))
  block.call
  ENV["HOME"] = @__aruba_original_home
end 
```

从现在开始，目录*tmp/aruba*用作 $HOME。

请注意，在 aruba 中，此临时路径是可配置的，并且上面的代码没有考虑到这一点。当 tmp 路径在别处配置时，它将中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T09:27:53.003

Aruba 为此提供[了一个步骤](http://www.relishapp.com/cucumber/aruba/docs/environment/mock-the-home-variable)：

`Given a mocked home directory`

# html - 设备识别身份验证，如 google / facebook

> ID：14478408
> 
> 赞同：1
> 
> 时间：2013-01-23T11:17:42.357
> 
> 标签：html, ios, facebook, security, web

如何在身份验证时识别用户的设备 - 如果用户从未知设备登录，则可以强制执行第二因素身份验证（例如 SMS）？我已经看到 google 和 facebook 有这个功能，而且他们没有使用简单的 IP 检查——如果我在同一个网络上有两台设备，它仍然可以检测我是否尝试从未知设备登录。

特别是在网站上——据我所知，我们只能获取用户的 IP 以及 HTTP 标头上的其他信息，但是我们如何安全地识别用户的设备呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:11:06.717

您可以使用 cookie - 如果用户没有适当的 cookie，那么需要成功的两因素身份验证？

您还可以考虑将[浏览器指纹识别](https://panopticlick.eff.org)与 IP 地址/地理 ip 信息结合使用，以获得更具启发性的方法，尽管实现起来要复杂得多，而且可能更脆弱。

# jquery - 经典 ASP JQuery AJAX 不维护会话

> ID：14478412
> 
> 赞同：7
> 
> 时间：2013-01-23T11:17:54.240
> 
> 标签：jquery, ajax, session, asp-classic

我正在使用 JQuery 和 AJAX 调用对处​​理服务器内容的经典 ASP 页面构建一个系统。

该系统需要用户登录。我正在使用会话来存储用户名。

问题是会话在默认 20 分钟后超时，并且用户被重定向到登录页面。我假设由于某种原因 AJAX 调用没有维护会话。

这是我做事的方式：

当用户登录时，我发布了一个 AJAX 调用，如下所示：

```
$.ajax({ 
    type: "POST", 
    url: "admin/ajax/signin.asp",
    data: { 
        'username': username,
        'userpassword': userpassword
    },
    cache: false,
    success: function(data, textStatus, jqXHR) {  
        if (jqXHR.getResponseHeader('REQUIRES_AUTH') === '1'){
            $('#failed').show();
        }
        else {
            location.href = "admin/"
        }
    }
}); 
```

signin.asp 根据数据库检查用户详细信息，如果确定，此页面将用户名存储在会话变量中。

```
Session("userid") = Request("username") 
```

用户现在已登录。

在用户使用系统时，每个页面都会检查每个 AJAX 请求的 REQUIRES_AUTH 标头并按如下方式处理注销重定向：

```
/* Check user logged in on every ajax request */
$('body').ajaxComplete(function(event,request,settings){
    if (request.getResponseHeader('REQUIRES_AUTH') === '1'){
        location.href="../signin.html"
    };
}); 
/* End */ 
```

每个使用 AJAX 帖子调用的 ASP 页面都会检查会话，如果它不存在，那么它会设置 REQUIRES_AUTH 标头，如下所示：

```
If (trim(Session("userid")) = "") Then
    'No session so clear variable
    Session.Contents.Remove("userid")
    'Redirect to Login page
    Response.AddHeader "REQUIRES_AUTH", "1"
Else
    Session("userid") = Session("userid")  
End If 
```

我假设使用 Session("userid") = Session("userid") 并且我正在调用在服务器上执行某些操作的 ASP 页面这一事实足以维持会话，但似乎并非如此，所有建议非常感激。我有什么根本错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T02:36:15.047

您可以在 JavaScript 中设置每 15 分钟自动刷新一次，并隐藏倒计时或在您的客户端站点 javascript 中传递唯一令牌

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:12:59.473

不幸的是，经典的 asp 会话没有滑动到期。我可以想出两个建议：

1.  使用 cookie 代替会话来识别用户。也许用户 ID 的哈希值是合适的。
2.  扩展`Session.Timeout`大于 20 分钟的值。

# sencha-touch-2 - 使用 sencha touch 2 在文本字段中显示时间选择器值

> ID：14478418
> 
> 赞同：1
> 
> 时间：2013-01-23T11:18:04.240
> 
> 标签：sencha-touch-2

```
 Ext.define("Datetimepicker.view.Main", {
               extend: 'Ext.form.Panel',
               requires: [
                                'Ext.TitleBar',
                                'Ext.field.DatePicker',
                                 'Ext.Spacer',
                                 'Ext.Picker'
                             ],
               config: {
                            fullscreen:'true',
                            title:'DatatimePicker',
                            items: [
                               {
                                   xtype:'fieldset',
                                        items:[
                                           {
                                              xtype:'datepickerfield',
                                              label:'Birthday',
                                              picker:{
                                                 yearFrom:1980,
                                                  yearTo:2015
                                               },
                                             name:'birthday',
                                             value:new Date()
                                         },
                                          {
                                            xtype:'textfield',
                                             label:'Time',
                                             value:''
                                           //In this textfield i want to display the time picker value
                                            }
                                        }
                                    ]
                                    },
                                 {

items:[
{
xtype:'spacer'
},
{
text: 'setValue',
handler: function() {
var datePickerField = Ext.ComponentQuery.query('datepickerfield')[0];
var randomNumber = function(from, to) {
return Math.floor(Math.random() * (to - from + 1) + from);
};
datePickerField.setValue({
month: randomNumber(0, 11),
day : randomNumber(0, 28),
year : randomNumber(1980, 2015)
});
}
},
{ xtype:'spacer'}
]
}
]
}
}); 
```

通过使用上面的代码，我得到了 datepicker 的值，它成功显示在第一个文本字段中。同样，我想在另一个文本字段中显示 datepicker 的值。任何人都可以帮我做到这一点...提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:18:23.827

您可以通过设置`textfield`每次`picker's`更改值时的值来做到这一点，因此这是一个解决方案：

```
 items: [
            {
                xtype: 'datepickerfield',
                label: 'Birthday',
                name: 'birthday',
                value: new Date(),
                listeners: {
                    change: function(picker, value) {
                        // This function use to prepend 0 to the month which less than October
                        function minTwoDigits(n) {
                            return (n < 10 ? '0' : '') + n;
                        }
                        var date = value.getDate(), // Get date's value
                            month = value.getMonth(); // Get month's value
                        month += 1; // Increase the number of month by 1 since the index started with 0
                        var formatMonth = minTwoDigits(month),
                            year = value.getFullYear(), // Get year's value
                            formatDate = formatMonth.concat("/",date,"/",year); // Concatenate string
                        Ext.ComponentQuery.query('#textfield')[0].setValue(formatDate); // Set the value of the textfield with itemID equal to textfield
                    }
                }
            },
            {
                xtype:'textfield',
                label:'time',
                itemId: 'textfield',
                value:''

            }
        ] 
```

如果您有什么不明白的，请随时提问。希望能帮助到你 ：）

# google-app-engine - 后端日志深度

> ID：14478426
> 
> 赞同：3
> 
> 时间：2013-01-23T11:18:43.927
> 
> 标签：google-app-engine

我在后端有一个长时间运行的进程，并且我看到日志只存储每个请求的最后 1000 个日志记录调用。

虽然这对于前端处理程序可能不是问题，但我发现对于后端处理程序可能会无限期运行非常不方便。

我尝试刷新日志以查看它是否创建了新的日志记录条目，但没有。这似乎很错误，我确信必须有一个简单的解决方案。请帮忙！

感谢stackoverflowians！

更新：[已经有人在appengine google 群里问](https://groups.google.com/forum/?fromgroups=#!searchin/google-appengine/backend%2420log/google-appengine/mjOmWHsg81M/YRj57n4m4oQJ)过这个问题，但是没有答案....

**编辑：**我关心的“深度”不是 RequestLogs 的总数，这很好，而是 RequestLog 中的 AppLogs 的数量（限制为 1000）。

**编辑2：**我做了以下测试来尝试大卫波普的建议：

```
def test_backends(self):
    launched = self.request.get('launched')
    if launched:
        #Do the job, we are running in the backend
        logging.info('There we go!')
        from google.appengine.api.logservice import logservice

        for i in range(1500):
            if i == 500:
                logservice.flush()
                logging.info('flushhhhh')
            logging.info('Call number %s'%i)
    else:
        #Launch the task in the backend
        from google.appengine.api import taskqueue
        tq_params = {'url': self.uri_for('backend.test_backends'),
                     'params': {'launched': True},
                     }
        if not DEBUG:
            tq_params['target'] = 'crawler'
        taskqueue.add(**tq_params) 
```

基本上，这会创建一个记录 1500 行的后端任务，在 500 处刷新。我希望看到两个 RequestLog，第一个包含 500 行，第二个包含 1000 行。

结果如下：

*   **我没有得到文档建议的结果**，手动刷新日志不会创建新的日志条目，我仍然有一个包含 1000 行的 RequestLog。前段时间我已经看过这部分文档，但我得到了同样的结果，所以我以为我不明白文档在说什么。无论如何，当时，我`logservice.flush()`在后端代码中留下了一个电话，但问题并没有解决。
*   我用 appcfg.py 下载了日志，你猜怎么着？...**所有的 AppLogs 都在那里！**我通常在 Web UI 中浏览日志，我不确定是否可以获得舒适的工作流程来以这种方式查看日志......对我来说理想的解决方案是文档中描述的解决方案。
*   我的应用程序**自动刷新设置设置为默认值**，我在某个时候玩过它们，但我发现问题仍然存在，所以我没有设置它们。

我正在使用 python ;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T06:00:49.407

[谷歌文档](https://developers.google.com/appengine/docs/python/backends/overview#Logging)建议冲洗应该完全符合您的要求。如果您的刷新工作正常，您将看到带有“flush”标签的“部分”请求日志以及发起请求的开始时间。

有几件事要检查：

*   您可以发布刷新日志的代码吗？它可能无法正常工作。
*   您是否使用 GAE Web 控制台查看日志？该限制可能只是 Web UI 限制，如果您实际上通过 API 获取日志，那么所有数据都将在那里。（这应该只有在冲洗工作不正常时才会成为问题。）
*   检查您的应用程序的[自动刷新设置](https://developers.google.com/appengine/docs/python/logs/functions#auto_flush)。

如果您使用的是Java，我假设有相应的链接；你没说。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:52:27.427

我认为可能有帮助的是使用如下所示的定时/cron脚本从您的工作站/服务器每隔一小时左右运行一次

```
appcfg.py --oauth2 request_logs appname/ output.log --append 
```

这应该给你一个完整的日志 - 我自己没有测试过

我做了更多阅读，似乎 CRON 已经是 appcfg 的一部分 [https://developers.google.com/appengine/docs/python/tools/uploadinganapp#oauth](https://developers.google.com/appengine/docs/python/tools/uploadinganapp#oauth)

```
appcfg.py [options] cron_info <app-directory>
Displays information about the scheduled task (cron) configuration, including the
expected times of the next few executions. By default, displays the times of the
next 5  runs. You can modify the number of future run times displayed
with the -- num_runs=... option. 
```

根据您的评论，我会尝试。

1）编写你自己的记录器类

2) 使用多个版本

# html - 如何将引导按钮移动到左侧

> ID：14478427
> 
> 赞同：6
> 
> 时间：2013-01-23T11:18:47.377
> 
> 标签：html, css, twitter-bootstrap

这是我的引导代码

```
 <div class="input-append" align="center">
    <input type="text" name="q" class="span2 search-query" placeholder="Snipp or Tag"
    />
    <button type="submit" class="btn">Search</button>
    <button class="btn btn-primary active"><i class="icon-white icon-plus"></i> plus</button>
    <button class="btn btn-primary active"><i class="icon-white icon-bullhorn"></i> Goto</button>
</div> 
```

这是一个[jsfiddle](http://jsfiddle.net/AsYnY/4/) 如何提供顶部填充以及如何在按钮之间留出一些空间并将加号和转到按钮移动到右侧

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T11:21:22.360

为这两个按钮添加另一个 div 并给出`float:right`

而对于他们之间的差距给`margin`

```
button{margin-right:6px} 
```

[**演示更新**](http://jsfiddle.net/AsYnY/7/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T12:24:30.613

如果您想向右浮动，请使用内置类“pull-right”

```
<div class="pull-right">...</div> 
```

并且搜索更多寻找的将是

```
<form class="form-search">
    <div class="input-append" >
    <input type="text" class="span2 search-query input-large" placeholder="search posts,users..">
    <button type="submit" class="btn"><i class="icon-search"></i></button>
    </div> 
```

为了保持距离，您可以使用边距

```
margin:10px 
```

# c# - C#，NHibernate 在 session.QueryOver 中的多个 where 条件

> ID：14478430
> 
> 赞同：1
> 
> 时间：2013-01-23T11:19:02.730
> 
> 标签：c#, linq, where, queryover

我正在使用多个 where 条件，但如果我注释掉它返回的最后 2 个 where 条件，则返回的行数不正确，无法弄清楚如何添加多个`Where`。

```
if (CustomFilter!= null)
       {
       int rowcount = session.QueryOver<clsCountryData>()
         .Select(Projections.Count(Projections.Id()))
         .Where(Restrictions.In("Countries",CustomFilter.SelectedCountriess))
         .Where(Restrictions.Eq("OrderType", CustomFilter.OrderType))
         .Where(Restrictions.Between("OrderTime", CustomFilter.OrderDateFrom , CustomFilter.OrderDateTo))
         .FutureValue<int>().Value;
       } 
```

# ruby - Guard，如何临时跟踪特定文件？

> ID：14478435
> 
> 赞同：7
> 
> 时间：2013-01-23T11:19:12.587
> 
> 标签：ruby, guard

我正在使用[Guard gem](https://github.com/guard/guard)

在开发的某些时候，我只需要跟踪一个特定的文件或几个文件，而不是整个项目。

是否有一些方便的方法来临时跟踪特定文件？

我知道可以通过修改保护文件来完成，但我认为这不是一个很好的解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-07T18:00:20.753

实际上，您可以`focus: true`在`it`语句中使用，例如：

在您的规范文件中。

```
it "needs to focus on this!", focus: true do
  #test written here.
end 
```

然后在 spec/spec_helper 你需要添加配置选项。

```
RSpec.configure do |config| 
  config.treat_symbols_as_metadata_keys_with_true_values = true  
  config.filter_run :focus => true  
  config.run_all_when_everything_filtered = true 
end 
```

然后 Guard 将自动选择集中的测试并只运行它。此外，`config.run_all_when_everything_filtered = true`即使名称听起来具有误导性，当没有过滤任何内容时，也会告诉警卫运行所有测试。

[我发现 Ryan Bate 的 rails casts 对Guard](http://asciicasts.com/episodes/264-guard)和[Spork](http://asciicasts.com/episodes/285-spork)很有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-03T14:48:18.033

也许[团体](https://github.com/guard/guard#group)会为你工作？

```
# In your Guardfile
group :focus do
  guard :ruby do
    watch('file_to_focus_on.rb')
  end
end

# Run it with
guard -g focus 
```

我知道您提到您不想修改 Guardfile，但添加组只需要完成一次，而不是每次您从观看项目切换到集中设置并返回时。

当然，如果您需要关注的文件集发生变化，您需要将 args 更改为`watch`（并且可能添加更多观察者），但我认为您必须在某处指定它们，这似乎是一个好地方任何。

或者，如果您真的不想在 Guardfile 中列出要关注的文件，您可以让*:focus*组从单独的文件或环境变量中读取文件列表，如[上面](https://stackoverflow.com/a/14650674/2004045)David 所建议的那样。Guardfile 只是普通的 ruby​​（可以访问 Guard DSL），因此很容易读取文件或 ENV 变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T12:18:06.323

如果您使用[guard-rspec](https://github.com/guard/guard-rspec)。你可以这样做。

更改您的[Guardfile](https://github.com/guard/guard-rspec#guardfile) rspec 块，使其具有如下内容：

```
guard 'rspec', :cli => ENV['RSPEC_e'].nil? ? "": "-e #{ENV['RSPEC_e']}") do
  # ... regular rspec-rails stuff goes here ...
end 
```

开始守卫。并在之前设置**RSPEC_e**。像这样...

```
RSPEC_e=here guard 
```

然后，每当您更改某些内容时，只会重新运行在其描述中包含文本“here”（由 RSPEC_e 设置）的规范。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T16:25:22.400

您可以永久修改保护文件以检查您选择的环境变量并在存在时采取不同的行为。例如，访问变量 ENV['FILE']。然后，您可以随时添加运行警卫的命令`FILE=foo.rb`。

# google-maps-api-3 - 使用 kml 单击时突出显示多边形

> ID：14478441
> 
> 赞同：0
> 
> 时间：2013-01-23T11:19:29.180
> 
> 标签：google-maps-api-3, kml, polygon

我正在使用 kml 文件在谷歌地图中绘制多边形。我正在为那些正在工作的多边形设置点击事件。现在我希望突出显示单击的多边形。我试过 setOption() 方法，但没有用。是否可以在单击时更改多边形的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T17:50:23.013

如果您使用 KmlLayer（猜测），则无法更改多边形的属性。如果您使用第三方 KML 解析器（如 geoxml3 或 geoxml-v3）将多边形呈现​​为原生 Google Maps API v3 对象，您可以更改它们的属性（但性能是否可接受将取决于您的 KML 的复杂程度）。您还可以动态更改使用 FusionTablesLayer 渲染的图块中的多边形（将您的 KML 导入 Fusion Tabel）。

[在鼠标悬停时使用 geoxml3 渲染的 KML 更改多边形颜色的示例](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=VoterDistricts_address.xml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T04:31:18.653

如果您使用 KmlLayer（猜测），则无法更改多边形的属性。如果您使用第三方 KML 解析器，例如 geoxml3。这是一个链接.. [http://developers.cloudmade.com/projects/web-maps-api/examples/kml-and-geo-rss](http://developers.cloudmade.com/projects/web-maps-api/examples/kml-and-geo-rss)

# java - JAVA 应用程序运行时的连接更改

> ID：14478442
> 
> 赞同：1
> 
> 时间：2013-01-23T11:19:33.307
> 
> 标签：java, jsp, jdbc, connection, connection-pooling

我必须创建一个 JSP，其中有一个在运行时建立 DB 连接的屏幕，这意味着我必须在运行时提供 DB 详细信息（瘦客户端/驱动程序信息等），然后连接并处理下一页，这是一个小scale appln（最多 20 个用户）所以我想 2 知道如何管理连接。

- 在 Session 中存储连接？- 在 HashTable 中，键作为会话 id，值作为连接？-- 或运行时的某个连接池（我认为这不好）.. -- 或创建属性文件并在运行时进行更改并重新加载它..

让我知道这个 wrt 性能和设计的最佳方法。

问候， 阿米特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:05:23.487

您可以在 .properties 文件中设置连接信息（数据库名称、密码、服务器地址等）。喜欢下面。

1）静态方式 **config.properties**（一般在classPath-src\config.properties创建）文件包含

```
driver=com.mysql.jdbc.Driver
database=jdbc:mysql://localhost:3306/dbName
dbuser=root
dbpassword=root 
```

您还可以创建或重置值

或**1) 创建或设置动态属性文件。**

```
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Properties;

public class App 
{
    public static void main( String[] args )
    {
        Properties prop = new Properties();

        try {
            //set the properties value
            prop.setProperty("database", "localhost");
            prop.setProperty("dbuser", "patel");
            prop.setProperty("dbpassword", "password");

            //save properties to project root folder
            prop.store(new FileOutputStream("config.properties"), null);

        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
} 
```

（config.properties）中的输出

```
 dbpassword=password
 database=localhost
 dbuser=patel 
```

**2）现在是时候在运行时阅读它了。**

```
import java.io.FileInputStream;
import java.io.IOException;
import java.util.Properties;

public class App 
{
    public static void main( String[] args )
    {
        Properties prop = new Properties();

        try {
               //load a properties file
            prop.load(new FileInputStream("config.properties"));

               //get the property value and print it out
                System.out.println(prop.getProperty("database"));
            System.out.println(prop.getProperty("dbuser"));
            System.out.println(prop.getProperty("dbpassword"));

        } catch (IOException ex) {
            ex.printStackTrace();
        }

    }
} 
```

输出

```
localhost
patel
password 
```

请在 <% %> 中用 jsp 编写这段代码，这样你就可以在运行时加载任何东西。需要任何帮助 ping 我........ :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:36:20.430

将登录凭证存储在使用会话 id 作为密钥的服务器内存映射中可能更简单，在每次调用时重新打开连接并在服务调用结束时关闭它。虽然打开连接是有代价的，但每个 Web 交互一个应该足够有效。这可以防止连接泄漏。

为防止伪造会话 ID 会成为安全问题，您的 Web 服务器必须确保用户在每次调用时都经过身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:21:28.807

您可以使用连接池

[检查这个](http://www.snaq.net/java/DBPool/)

# android - 为我的 android 应用程序制作自己的自定义动态背景（主题）？

> ID：14478443
> 
> 赞同：2
> 
> 时间：2013-01-23T11:19:35.117
> 
> 标签：android, background, android-theme

在我的 android 应用程序中，有一个主题选项。有 4 张图片可用。选择一张图片后，我想在整个应用程序中将其用作背景。但我不确定如何执行此操作以及程序是什么？我已经尝试了一些东西，但可能这个程序并不完美。我将所选图像存储在 sharedPreference 通知字节中，并且在每个活动中，我将图像设置为背景。但有时某些活动的背景不会改变，有时会导致大图像的内存错误。我可以遵循的最佳程序是什么？我想做的示例图像...

![在此处输入图像描述](../Images/096bcb8e85ca929b175b5159a2744a79.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:48:23.663

检查图像的 onclicklistener 示例代码......!!!!!!

Java类：-

```
public OnClickListener onclickimage = new OnClickListener() {

@Override
public void onClick(View v) {

    switch (v.getId()) {

    case R.id.imageView1:
        rlayout.setBackgroundResource(R.drawable.bg);
        break;
    case R.id.imageView2:
        rlayout.setBackgroundResource(R.drawable.bg_evening);
        break;
    case R.id.imageView3:
        rlayout.setBackgroundResource(R.drawable.bg_morning);
        break;
    case R.id.imageView4:
        rlayout.setBackgroundResource(R.drawable.bg_night);
        break;

    }

}
};

@Override
public boolean onCreateOptionsMenu(Menu menu) {
// Inflate the menu; this adds items to the action bar if it is present.
getMenuInflater().inflate(R.menu.activity_main, menu);
return true;
}

} 
```

和布局代码： -

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/rlayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/imageView1"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/imageView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/imageView2"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/imageView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/imageView3"
    android:src="@drawable/ic_launcher" />

</RelativeLayout> 
```

希望这个答案可以帮助你.....!!!!!!

你可以对你的循环图像做同样的事情......!!!!!!

或者你可以使用以下主题..!!!!

对不起，如果我没有完成你的任何其他要求..!!!

# iphone - 使用 AVPlayer 播放的音频文件的偏移量

> ID：14478444
> 
> 赞同：0
> 
> 时间：2013-01-23T11:19:41.403
> 
> 标签：iphone, ios6, audio-streaming, avplayer

我正在使用 AVPlayer 在 iphone 上播放音频文件。

我想要的是，当我在某个时间停止播放音频并再次开始播放时，音频应该从我停止播放的位置开始。

任何人都知道如何使用 AVPlayer 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:25:55.530

如果您想在不关闭应用程序的情况下同时播放，请使用此代码

AVAudioPlayer *播放器；

[玩家暂停]；

在那之后

[播放器播放]；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:44:22.683

在播放暂停时找出您在曲目中的位置

```
time = CMTimeGetSeconds(self.av_Player.currentTime);
[self.av_Player pause]; 
```

然后再次跳到那个位置

```
newTime = CMTimeMakeWithSeconds(time, 6000);
toleranceVal = CMTimeMakeWithSeconds(0.1, 6000);
[self.av_Player seekToTime:newTime toleranceBefore:toleranceVal toleranceAfter:toleranceVal];
[self.av_Player play]; 
```

# javascript - 如何在字符串数组中找到刺痛的独特部分？

> ID：14478446
> 
> 赞同：0
> 
> 时间：2013-01-23T11:19:46.880
> 
> 标签：javascript, underscore.js

我有一个地址数组：

1.  邮政编码城镇 Some Road 1 号房
2.  邮政编码城镇 Some Road 2 室
3.  公寓 3, Some Buidling, Some Road, Town, 邮编
4.  邮政编码城镇 Some Road 4 号房

或者像这样：

1.  公寓 1, 城镇, 邮政编码
2.  公寓 2, 城镇, 邮政编码
3.  公寓 3, 一些建筑, 城镇, 邮政编码
4.  公寓 4, 城镇, 邮政编码

我不知道字符串的唯一或相同部分有多长。

我希望能够计算出地址的唯一部分并将其显示一次，而其他部分分别保留，因此它看起来像这样：

Some Road, Town, Postcode (或 Town, Postcode for the second example)

1.  单位 1
2.  单位 2
3.  3号楼，一些建筑
4.  4楼

我尝试使用一个对象，然后 _.pluck 和 _.uniq 来测试该项目是否是唯一的，但如果上面的项目 3 与其他项目不相符则失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T17:03:17.190

假设分隔符始终是逗号，这是一个可能的解决方案

1.  将每个数组元素转换为元素数组
2.  为每个地址创建一个具有两个属性 {unique_address:"", changed_info:""} 的模型。unique_address 属性由数组的最后三个元素组成。

.

```
var modelList=[];

_.each(addresses, function(element){
   var addrArr= addresses[element].split("");  //= ["Flat 1", "Some Road", "Town", "Postcode"];
   var len=addrArr.length;
   var uniq=addrArr[len-1]+" "+addrArr[len-2]+" "+addrArr[len-3]; //uniq= "Some Road Town Postcode"
   var chang="";
   for (var i=0;i<(len-3);i+){
         chang=chang+addrArr[i];
         } //which gives chang="Flat 1"
   modelList.push({unique_address:uniq, changing_info:chang});
   }); 
```

现在你有这样的对象列表：

```
modelList=[{unique_address: "Some Road Town Postcode", changing_info: "Flat 1"},
{unique_address: "Some Road Town Postcode", changing_info: "Flat 2"},
{unique_address: "Some Road Town Postcode", changing_info: "Flat 45"}]; 
```

有了这样的列表，您就有多种方法来获得您想要的东西。

我建议使用`_.groupBy(list, iterator)` underscore.js 中内置的内容，如下所示：

```
_.groupBy(modelList, function(element) {
    return element.unique_address;
}); 
```

就这样。

有关使用 groupby 的更多信息，请参阅[如何在 Backbone.js 中使用 groupBy 对集合进行分组？](https://stackoverflow.com/questions/9954597/how-to-use-groupby-in-backbone-js-to-group-collections)

# .net - 正则表达式获取匹配列表

> ID：14478448
> 
> 赞同：2
> 
> 时间：2013-01-23T11:19:53.307
> 
> 标签：.net, regex, pattern-matching

我有这个：

```
string input = @"(+order: top* OR +order: first* OR +order: second* OR +order: third* OR +order: ""fourth top"" OR +order: fifth*)"; 
```

我需要得到一个从上面提取的正则表达式，如下所示：

> “第一，第二，第三，第四，第五”

我做的

```
 public static string GetOrders(string input)
    {
        string pattern = @"order(.*)OR";

        List<string> orders = new List<string>();
        foreach (Match m in Regex.Matches(input, pattern))
            orders.Add(m.Value);

        return string.Join(", ", orders.ToArray());
    } 
```

我的正则表达式模式不完整。我以为我可以提取“+order：”和“OR”之间的所有内容，但它不起作用。它似乎没有迭代元素，我只是得到了整个输入字符串。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:21:41.777

`.*`是贪心的，从第一个匹配`order`到最后一个`OR`。

`@"order(.*?)OR"`可以，但只适用于前四场比赛；第五个后面没有`OR`。

所以更好的正则表达式是

```
@"order:\s*(.*?)\s*(?:OR|\))" 
```

更好（假设规则是“参数不包含空格并以 结尾`*`，或者包含空格并包含在`"`s 中”）：

```
@"(?<=order:\s*)(?:""[^""]*""|[^""*\s]*)" 
```

# android - Android：套接字已关闭

> ID：14478450
> 
> 赞同：0
> 
> 时间：2013-01-23T11:19:55.630
> 
> 标签：android, socketexception

**PC客户端：**

```
public class PCServer
{

/**
 * @param args
 */
static Socket socket = null;
private static String ip = "192.168.42.129";
private static int port = 18181;

public static void main(String[] args)
{
    // TODO Auto-generated method stub
    try
    {
        socket = new Socket(ip, port);
    } catch (UnknownHostException e1)
    {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e1)
    {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    try
    {
        SendMsg(ip, port, "BZT");
        GetMessage getMessage = new GetMessage();
        getMessage.start();
    } catch (UnknownHostException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public static void SendMsg(String ip, int port, String msg) throws UnknownHostException, IOException
{
    try
    {
        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
        writer.write(msg);
        writer.flush();
        writer.close();
        //socket.close();
    } catch (UnknownHostException e)
    {
        e.printStackTrace();
    } catch (IOException e)
    {
        e.printStackTrace();
    }
}

static class GetMessage extends Thread
{
    @Override
    public void run()
    {
        // TODO Auto-generated method stub
        super.run();
        try
        {
            while (true)
            {
                System.out.println("--------------------------------------------------------");
                BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                String str = in.readLine();
                System.out.println(str);
                //client.close();
            }
        } catch (IOException e)
        {
            e.printStackTrace();
        }
    }
  }
} 
```

**安卓服务器：服务**

```
public class SocketService extends Service
{
public static final int SERVERPORT = 18181;
ServerSocket serverSocket;
@Override
public IBinder onBind(Intent arg0)
{
    // TODO Auto-generated method stub
    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId)
{
    // TODO Auto-generated method stub
    try
    {
        serverSocket = new ServerSocket(SERVERPORT);
    }
    catch (IOException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    GetSocketMessage getSocketMessage = new GetSocketMessage();
    getSocketMessage.start();
    return super.onStartCommand(intent, flags, startId);
}

@Override
public void onDestroy()
{
    // TODO Auto-generated method stub
    super.onDestroy();
    try
    {
        this.serverSocket.close();
    } 
    catch (IOException e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

class GetSocketMessage extends Thread
{
    @Override
    public void run()
    {
        // TODO Auto-generated method stub
        super.run();
        try
        {
            Log.i("s", "S: Connecting...");
            while (true)
            {
                Socket client = serverSocket.accept();
                Log.i("s", "S: Receiving...");
                try
                {
                    BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
                    String str = in.readLine();
                    Log.i("s", "S: Received: '" + str + "'");

                    if ("BZT".equals(str))
                    {
                        Intent intent =  new Intent("com.StarHope.ZWGKXT.connected");
                        sendBroadcast(intent);
                        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(client.getOutputStream()));
                        writer.write("OK");
                        writer.flush();
                        writer.close();
                    }
                    if ( Lbjy_usbActivity.content !=null )
                    {
                        Log.i("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "oooooooooooooooooooooooooooooo");
                        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(client.getOutputStream()));
                        writer.write("");
                        writer.flush();
                        writer.close();
                    }
                } 
                catch (Exception e)
                {
                    Log.i("s", "S: Error");
                    e.printStackTrace();
                } 
                finally
                {
                    Log.i("s", "S: Done");
                }
            }
        } 
        catch (Exception e)
        {
            Log.i("s", "S: Error");
            e.printStackTrace();
        }
    }
  }
} 
```

安卓手机服务器可以接收到PCClient“BZT”发送的消息，但是当手机发送“OK”到PC时，总是有一个

```
Exception:java.net.SocketException: Socket is closed. 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:20:04.793

`getOutputStream()`关闭使用或`getInputStream()`关闭套接字获得的任何流。

你在'BZT'之前收到什么东西吗？如果是这样，则在您发送空答案后，套接字将关闭。

您应该只使用一个输出流，并且`flush()`每条消息不关闭。

# javascript - JavaScript 中复杂的 JSON 字符串解析

> ID：14478452
> 
> 赞同：0
> 
> 时间：2013-01-23T11:19:57.500
> 
> 标签：javascript, jquery, json, parsing

这是我的示例 JSON 文件，我试图解析和读取值....

```
C = {{
    "Travel": {
        "ServiceProvider": {
            "Name": "SRS",
            "Rating": "3 stars",
            "Rates": "Nominal",
            "Features": {
                "OnlineBooking": "Yes",
                "SMS_Ticket": "No"
            },
            "UserDetails": {
                "Name": "Jack",
                "Age": "33",
                "Gender": "Male"
            }
        },
        "BusProvider": {
            "Name": "SRS",
            "Rating": "3 stars",
            "Rates": "Nominal",
            "Features": {
                "OnlineBooking": "Yes",
                "SMS_Ticket": "No"
            },
            "UserDetails": {
                "Name": "Jack",
                "Age": "33",
                "Gender": "Male"
            }
        }
    }
} 
```

我对 JS 很陌生，我需要以通用方式访问嵌套元素。

我无法正确提取细节。我在访问嵌套的子元素时遇到了困难。

1.  对我来说，问题是我不会总是知道“键”的名称来访问它们，JSON 将是动态的，因此我需要一个通用机制来访问嵌套的子元素。嵌套可以达到 3 -4 级。

2.  当嵌套很深时，我们使用什么表示法来访问键/值对。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:00:21.370

对于动态访问，您可以使用括号表示法，即`var json = {nonKnown: 1};`现在您可以像这样访问它： var unknowPropertyName = "nonKnown"; var 值 = json[unknownPropertyName];

但是如果你甚至不能动态定义属性的名称，那么你应该使用

```
for(variableName in json){
  if(json.hasOwnProperty(variableName)){
    console.log(variableName);
  }
} 
```

你应该从中得到基本的想法。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:37:11.287

在反序列化您的对象时，您可以这样做

```
var resultJSON = '{"name":"ricardo","age":"23"}';
var result = $.parseJSON(resultJSON);
$.each(result, function(k, v) {
    //display the key 
    alert(k + ' is the key)
} 
```

你可以像这样使用递归的offcourse来做到这一点 -[链接这里](https://rvieiraweb.wordpress.com/2013/01/21/jquery-building-list-with-json-object/) 的方式是一样的，只是适应你的例子

# plone - 如何清理 groupdashboard picklingError

> ID：14478458
> 
> 赞同：1
> 
> 时间：2013-01-23T11:20:11.617
> 
> 标签：plone

在迁移的 Plone 网站（3.3 -> 4.0）上，我无法应用“portlets”步骤。

追溯：

```
2013-01-23 12:15:51 ERROR Zope.SiteErrorLog 1358939751.450.337074106184 http://localhost:8080/plone/portal_quickinstaller/prefs_reinstallProducts
Traceback (innermost last):
  Module ZPublisher.Publish, line 135, in publish
  Module Zope2.App.startup, line 291, in commit
  Module transaction._manager, line 93, in commit
  Module transaction._transaction, line 322, in commit
  Module transaction._transaction, line 416, in _commitResources
  Module ZODB.Connection, line 558, in commit
  Module ZODB.Connection, line 606, in _commit
  Module ZODB.Connection, line 640, in _store_objects
  Module ZODB.serialize, line 422, in serialize
  Module ZODB.serialize, line 431, in _dump
PicklingError: Can't pickle <class 'collective.groupdashboard.interfaces.IGroupDashboardLayer'>: import of module collective.groupdashboard.interfaces failed 
```

我是否需要将此插件添加回我的设置中，还是可以在没有它的情况下删除此实例？有没有办法伪造这个类然后删除它？

我不知道我怎样才能删除那些东西。欢迎任何解决方法！

# c# - CloudQueue.EndAddMessage(IAsyncResult) 实际上做了什么？

> ID：14478462
> 
> 赞同：2
> 
> 时间：2013-01-23T11:20:29.360
> 
> 标签：c#, azure, azure-storage, azure-storage-queues

假设我打电话

```
AsyncCallback callback = new AsyncCallback(QueueMessageAdded);
queue.BeginAddMessage(new CloudQueueMessage(message), callback, null); 
```

`QueueMessageAdded`在哪里

```
private static void QueueMessageAdded(IAsyncResult result)
{
    queue.EndAddMessage(result);
} 
```

**EndAddMessage**做什么？

包括等待所有回调被调用，它和调用同步版本一样慢：

```
Parallel.ForEach(messages, message => queue.AddMessage(message)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:46:13.003

第一种方法使请求异步，因此您的线程在等待响应时不必阻塞。另一方面，第二种方法将使用 N 个线程，每个线程都会阻塞，直到收到对其各自请求的响应。

有关详细信息，请参阅[异步编程模型 (APM)](http://msdn.microsoft.com/en-US/library/ms228963.aspx)。所有 End* 方法都完成了异步操作，这意味着它将阻塞直到操作完成，返回操作的结果（如果有）并进行清理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T21:03:00.773

第一种方法允许您使用*并发*请求！使用第一种方法，单个线程可以发送数百条并发消息，即使单个 POST 请求获得其回复的延迟很高。如果您查看[针对 ASB 的生产代码](https://github.com/MassTransit/MassTransit-AzureServiceBus/blob/master/src/MassTransit.Transports.AzureServiceBus.Receiver/Receiver.fs)，您会看到一些使用 APM/Async 的模式。

# html - 如果其子级具有绝对位置，如何获取父级 div 高度

> ID：14478464
> 
> 赞同：1
> 
> 时间：2013-01-23T11:20:31.067
> 
> 标签：html, css, position, parent, absolute

在我的代码中，我有一个父 div，在其中我有两个子 div。第一个子 div 是`float:left`，第二个 div 有`position:absolute`. 我的问题是我想通过它的孩子来增加父 div 高度自动。

这是CSS：

```
#msgbody{
    margin-top:20px
}
.clr{clear:both}
.leftalign .imgbox{
    float:left;
}
.leftalign  .callout {
    position: absolute;
    left:70px;
    padding:10px;
    background-color: #EEEEEE;
    /* easy rounded corners for modern browsers */
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
}
.leftalign  .callout .notch {
    position: absolute;
    top: 10%;
    left: -10px;
    border-left:0;
    border-bottom: 10px solid transparent;
    border-right: 10px solid #EEEEEE;
    border-top: 10px solid transparent;
    width: 0;
    height: 0;
    /* ie6 height fix */
    font-size: 0;
    line-height: 0;
     /* ie6 transparent fix */
    _border-right-color: pink;
    _border-left-color: pink;
    _filter: chroma(color=pink);
}
.imgbox{
    border:1px solid #afc8c8;
    padding:3px;
    background:#fff;
    margin-right:10px;
}
.circle{
    border-radius:50%;
    -moz-border-radius:50%;
    -webkit-border-radius:50%;
}
.subimgbox, .imgbox{
    display:block;
    width:46px;
    height:46px;
}
.subimgbox{
    overflow:hidden;
    background:#f3f3f3;
} 
```

这是HTML：

```
<ul id="msgbodyli" class="ln">

    <li class="leftalign">
        <div class="imgbox circle">
            <div class="subimgbox circle"></div>
        </div>

        <div class="callout">
            Various browsers end up with jagged edges when you create these arrows.
            The safest angle to get your arrow to render without jaggies is 45%. This can be done by just making all the border-widths the same except for one being zero
            <b class="notch"></b>
        </div>
        <div class="clr"></div>
    </li>

    <li class="leftalign">
        <div class="imgbox circle">
            <div class="subimgbox circle"></div>
        </div>

        <div class="callout">
            Various browsers end up with jagged edges when you create these arrows.

            <b class="notch"></b>
        </div>
        <div class="clr"></div>
    </li>
</ul> 
```

因为父 div 处于“for 循环”中，所以当下一个父 div 出现时，它会与第一个父 div 重叠。看这张图片：

![显示父 div 未正确展开的图像。](../Images/bbff5938ce46a8805180cbd09d1e1255.png)

最重要的是，我不想用 Javascript 或 jQuery 来做。我想只用 CSS 修复它。那可能吗？如果您有任何问题，请告诉我。这是小提琴链接：http: [//jsfiddle.net/sarfarazdesigner99/fpMyV/](http://jsfiddle.net/sarfarazdesigner99/fpMyV/)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:15:15.663

据我所知 - 你不能用 position:absolute 做到这一点。

检查这个[小提琴](http://jsfiddle.net/wrN89/)-

变化是==>

*   ul 和 li 到 Div 的
*   `overflow:hidden;height:auto;`

# xaml - x:TypeArguments 的 Windows 8 应用商店应用程序支持

> ID：14478469
> 
> 赞同：2
> 
> 时间：2013-01-23T11:20:49.920
> 
> 标签：xaml, generics, windows-store-apps

我想知道与此相同的事情： [Silverlight 4 Support for x:TypeArguments](https://stackoverflow.com/questions/4270351/silverlight-4-support-for-xtypearguments) ...但适用于 Windows 8 Store Apps。

如果 x:TypeArguments 不起作用，为什么它可以使用？还是我错过了什么？MainPage.igcs 文件是使用非泛型基类自动生成的，即使 x:TypeArguments 是在 XAML 中定义的 - 所以它当然不会编译。

我可以使用建议的解决方法，即拥有一个指定泛型类型的“typedef”基类，但这对我来说感觉很hacky..

```
// A generic PageBase, containing standard ViewModel-related utilities
internal abstract class PageBase<T> : Windows.UI.Xaml.Controls.Page where T : ViewModelBase
{
    protected abstract T ViewModel { get; }
    ...
}

// The hack...
internal abstract class MainPageTypeDef : PageBase<MainViewModel>
{
    // No code goes here...
}

// The page itself
internal sealed partial class MainPage : MainPageTypeDef
{
}

<views:PageBase
    ...
    x:Class="Namespace.MainView"
    x:TypeArguments="store:MainViewModel"> 
```

任何人都知道是否有办法没有“typedef”类？

非常感谢，乔恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T12:02:05.183

遗憾的是这是不可能的。我从 Microsoft 联系人那里得到了明确的答复：“我可以确认，但 Xaml 中使用的 x:TypeArguments 不是 Windows 应用商店应用程序支持的场景。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:05:58.567

我很确定答案与 Silverlight 相同。WinRT Xaml 在很多方面更接近 Silverlight Xaml，而不是 WPF，而且他们在包含哪些内容和不包含哪些内容方面做出了各种奇怪的决定。

# android - Context.getString 导致“没有这样的静态字段”

> ID：14478472
> 
> 赞同：3
> 
> 时间：2013-01-23T11:20:53.587
> 
> 标签：android

我试图从事件处理程序中的 strings.xml 文件中获取一个字符串，尽管我得到“没有这样的静态字段”。

这是我的代码：

```
mSearchEditText.setOnFocusChangeListener(new View.OnFocusChangeListener() {
        @Override
        public void onFocusChange(View view, boolean hasFocus) {
            Context context = view.getContext();

            if (hasFocus && mSearchEditText.getText().toString().trim() == context.getString(R.string.searchbar_address_label)) {
                mSearchEditText.setText("");
            }
            else if (!hasFocus && mSearchEditText.getText().toString().trim().isEmpty()) {
                mSearchEditText.setText(context.getString(R.string.searchbar_address_label));
            }
        }
    }); 
```

这段代码有什么问题？

谢谢

更新：此代码旨在在 EditText 中显示提示。R.string 似乎在侦听器的函数中不可用。因此，将我的问题视为“是否有一种本地方式可以在 EditText 中显示提示而不是编写我自己的代码？”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:22:20.807

采用`context.getResources().getString(R.string.searchbar_address_label);`

用于`android:hint="your_text"` 在 xml 布局中设置提示使用。或者同样可以使用 edittext.sethint("text"); 以编程方式完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-08T14:38:44.803

在这种情况下，重建项目并从设备上卸载应用程序可能会有所帮助。它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-12T15:29:30.300

您可能在所有项目 XML 中有相同的 id，这是被禁止的。

也可能是您引用了具有相同文件名的 XML 并且没有这样的 id。

# asp.net - 如何在 Razor 中使用 Kendo UI？

> ID：14478474
> 
> 赞同：2
> 
> 时间：2013-01-23T11:20:56.707
> 
> 标签：asp.net, asp.net-mvc, linq, razor, kendo-ui

我已经下载并使用了带有 Kendo UI 网格的 Kendo UI，但我的源代码非常复杂，原因如下：

1.  我已经破解了排序以启用不区分大小写的排序。

2.  在过滤器菜单中显示过滤器菜单、页面大小选择器、过滤器功能菜单和 DatePicker 时，我观察到 UI 错误；我已经用丑陋的黑客解决了这些问题。

3.  在客户端，我在需要时使用参数化帖子刷新了网格。

4.  在服务器端，我创建了一个动态处理网格的排序、过滤、页面大小和分页状态的函数。

然而，我的客户告诉我，我们需要一个“简单”的解决方案，一个网格页面应该在一个小时内完成。我认为这对我目前的方法是不现实的，除非我实现一个通用类来处理网格。这可以使用 Linq 来处理表、字段、过滤器、排序、分页和页面大小。我肯定知道这一点，因为我的代码离成为服务器端的通用网格支持者和客户端的 Kendo UI 网格工厂还差得很远。但是，我的客户明确表示我们不需要实现这个类和原型，因为我们应该能够简单地配置 Kendo UI。他告诉我（之前未指定的细节），我们可以从表中返回*所有*行并在客户端对其进行过滤/排序，因此第 3 点和第 4 点将变得不需要。

我一直在看[这里](http://demos.kendoui.com/web/grid/local-data.html)的例子。我想要与cshtml中的示例类似的东西。但是，在我下载的 Telerik Kendo UI 中，我没有任何服务器端内容，因此 IDE 显示`Html.Kendo().Grid(Model)`不正确。错误如下：

> 错误 10 'System.Web.Mvc.HtmlHelper' 不包含 'Kendo' 的定义，并且找不到接受类型为 'System.Web.Mvc.HtmlHelper' 的第一个参数的扩展方法 'Kendo'（您是否缺少使用指令还是程序集引用？）

我正在使用带有 Linq 的 ASP.NET MVC3。

如何以链接中 cshtml 文件中描述的样式将 Telerik Kendo UI 与 ASP.NET Razor 一起使用？这是免费的吗？如果没有，费用是多少？我应该安装 KendoUI.Mvc.VSPackage.vsix 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T11:59:55.053

为了使用额外的助手，你需要将它们注册到 Razor 视图引擎。这是在`web.config`文件中完成的，或者`@using`在 .cshtml 文件之上使用语句。

这是我的一个例子`web.config`

```
 <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing" />
        <add namespace="Kendo.Mvc.UI"/>
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

就许可而言，这不是免费软件。[您可以在他们的网站](http://www.kendoui.com/purchase.aspx)上查看许可条款和价格。根据他们的许可证，每个使用 Telerik 控件的开发人员都需要拥有许可证。许可证不是公司范围的，也不是项目范围的。

您不需要安装 vsix，但它可以通过自动添加对所需程序集的引用以及将所需条目添加到 web.config 文件来使您的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T20:13:33.610

此外，如果您使用 MVC 5，您可能还想添加对 Kendo UI 的引用。您可以通过转到项目中的引用，右键单击并添加引用来完成此操作。如果未列出，请单击浏览，然后浏览到项目中的 lib 文件夹，然后单击 Kendo.Mvc.dll 然后添加。希望这可以帮助某人。

# c# - BDD测试账户登录MVC C#

> ID：14478481
> 
> 赞同：0
> 
> 时间：2013-01-23T11:21:33.873
> 
> 标签：c#, asp.net-mvc, bdd, specflow

我有一个 MVC 应用程序（Lang.C#）。我正在尝试学习如何将 BDD 测试与 SpecFlow 一起使用。

如果输入了正确的用户名/密码，我正在尝试创建一个“断言”的测试，然后将加载一个页面（或提供身份验证），如果输入了不正确的用户名/密码（不提供身份验证）。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:33:55.300

查看[Selenium WebDriver](http://seleniumhq.org/docs/03_webdriver.jsp) - 您可以使用 C# 绑定来驱动浏览器，并与您的 Web 应用程序交互。

[这是一个很好的例子](http://anoopjshetty.wordpress.com/2012/02/08/creating-test-automation-framework-using-c-selenium-and-nunit/)。

[第二个示例](http://anoopjshetty.wordpress.com/2012/05/20/test-automation-framework-in-page-object-pattern-using-c-selenium-specflow-and-nunit/)，具体演示了一种使用页面对象模式使用 Selenium 编写 SpecFlow 测试的方法。

# c# - 当线程死亡时，包含 JVM 的线程不会杀死 JVM

> ID：14478484
> 
> 赞同：-1
> 
> 时间：2013-01-23T11:21:38.810
> 
> 标签：c#, multithreading, jvm

我用 C# 编写了一个小程序，它将被集成到巡航控制中（编辑：哎呀，按回车太早了），它在它们自己的单独线程中创建了某些（而不是预定义的）JVM。但是，当终止线程时，JVM 仍然存在并且没有被卸载。此功能适用于 .bat 文件，但如果它们调用 JVM，它仍然保持打开状态！

每个线程都是从此类的实例创建并调用 Run()

_Critical 被主进程用于测试原因。

```
class BatThread
{
    private string _args, _fileName;
    private bool _critical;
    public ManualResetEvent Flag;

    public BatThread(string fileName, string args, bool critical)
    {
        _fileName = fileName;
        _args = args;
        _critical = critical;
        Flag = new ManualResetEvent(false);
    }
    public void Run()
    {
        using (Process Proc = new Process())
        {
            Proc.StartInfo.FileName = _fileName;
            Proc.StartInfo.Arguments = _args;
            Proc.StartInfo.RedirectStandardError = false;
            Proc.StartInfo.RedirectStandardInput = false;
            Proc.StartInfo.RedirectStandardOutput = false;
            Proc.StartInfo.UseShellExecute = true;
            Proc.Start();

            while (true)
            {
                if (Proc.WaitForExit(100))
                {
                    break;
                }
                else if (this.Flag.WaitOne(100))
                {
                    Proc.Kill();
                    break;
                }
                Thread.Sleep(5000);
            }
            this.Flag.Set();
        }
    }

    public bool critical { get { return _critical; } }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:30:33.693

它不起作用，因为终止线程不会自动终止您生成的进程（独立）。一般来说，杀死一个线程是不好的做法。您应该发出信号退出线程，以便它可以进行清理（拆除进程），然后干净地返回。

# java - Java java.sql.SQLException：准备语句时的列索引无效

> ID：14478488
> 
> 赞同：20
> 
> 时间：2013-01-23T11:21:46.720
> 
> 标签：java, oracle, jdbc, sqlexception

我下面的代码根据用户输入在数据库中查询一组行。我已经尝试并测试了 SQL Developer 内部的查询，它可以很好地返回正确的行。输入示例是：2013-01-22

但是由于java内部的某种原因，我收到了这个错误：

```
java.sql.SQLException: Invalid column index 
```

控制台表明它在此行触发：

```
preparedStatement.setString(1, to); 
```

完整的连接代码：

```
ResultSet rs = null;
        PreparedStatement preparedStatement = null;
        try {
            String strQuery =
                    "SELECT homes.home_id, homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft,"
                    + " listagg(features.feature_name, '\n') WITHIN GROUP(ORDER BY features.feature_name) features, home_type.type_name"
                    + " FROM homes"
                    + " INNER JOIN bookings ON bookings.home_id <> homes.home_id"
                    + " INNER JOIN home_feature ON homes.home_id = home_feature.home_id"
                    + " INNER JOIN home_type ON home_type.type_code = homes.type_code"
                    + " INNER JOIN features ON home_feature.feature_id = features.feature_id"
                    + " WHERE bookings.booking_end < date '?'"
                    + " OR bookings.booking_start > date '?'"
                    + " GROUP BY homes.home_id, homes.title, homes.description, homes.living_room_count, homes.bedroom_count, homes.bathroom_count, homes.price, homes.sqft, home_type.type_name";

            preparedStatement = conn.prepareStatement(strQuery);//prepare the statement
            preparedStatement.setString(1, to);//insert
            preparedStatement.setString(2, from);//insert
            rs = preparedStatement.executeQuery();//execute query 
```

完整的堆栈跟踪如下所示：

```
SEVERE: java.sql.SQLException: Invalid column index
at oracle.jdbc.driver.OraclePreparedStatement.setStringInternal(OraclePreparedStatement.java:5317)
at oracle.jdbc.driver.OraclePreparedStatement.setString(OraclePreparedStatement.java:5305)
at oracle.jdbc.driver.OraclePreparedStatementWrapper.setString(OraclePreparedStatementWrapper.java:248)
at DB.DatabaseConnector.getPropertiesSearch(DatabaseConnector.java:258)
at DB.SearchServlet.doPost(SearchServlet.java:47)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)

SEVERE:     at oracle.jdbc.driver.OraclePreparedStatement.setStringInternal(OraclePreparedStatement.java:5317)
SEVERE:     at oracle.jdbc.driver.OraclePreparedStatement.setString(OraclePreparedStatement.java:5305)
SEVERE:     at oracle.jdbc.driver.OraclePreparedStatementWrapper.setString(OraclePreparedStatementWrapper.java:248)
SEVERE:     at DB.DatabaseConnector.getPropertiesSearch(DatabaseConnector.java:258)
SEVERE:     at DB.SearchServlet.doPost(SearchServlet.java:47)
SEVERE:     at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)
SEVERE:     at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
SEVERE:     at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
SEVERE:     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
SEVERE:     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
SEVERE:     at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
SEVERE:     at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
SEVERE:     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
SEVERE:     at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
SEVERE:     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
SEVERE:     at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
SEVERE:     at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
SEVERE:     at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
SEVERE:     at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
SEVERE:     at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
SEVERE:     at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
SEVERE:     at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
SEVERE:     at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
SEVERE:     at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
SEVERE:     at java.lang.Thread.run(Thread.java:722) 
```

我不太清楚为什么在查询正常时会抛出错误是 SQL 开发人员。我正在使用甲骨文

编辑：

在同一方法中将结果集读入其中。然后将 home 对象传回：

```
HomeList homes = new HomeList();
homes = new HomeList(rs); 
```

构造函数如下所示：

```
public HomeList(ResultSet rs) {
    this();
    try {
        while (rs.next()) {
               list.add(new Home(rs.getInt(1),   
                                 rs.getString(2),
                                 rs.getString(3),   
                                 rs.getInt(4),
                                 rs.getInt(5),
                                 rs.getInt(6),
                                 rs.getInt(7),
                                 rs.getInt(8),
                                 rs.getString(9),
                                 rs.getString(10)
                                     ));
        }//end while
    } catch (SQLException e) {
        e.printStackTrace();
    }//end try
} 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-23T11:26:49.003

在查询字符串中的任何地方，通配符都应该`?`是`'?'`. 那应该可以解决问题。

**编辑 ：**

要添加它，您需要更改`date '?'`为`to_date(?, 'yyyy-mm-dd')`. 请尝试并告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:34:23.867

正如@TechSpellBound 建议的那样，删除 ? 迹象。然后在连接字符串的每一行末尾添加一个空格字符。否则，整个查询将被发送为（仅使用其中的一部分作为示例）：`.... WHERE bookings.booking_end < date ?OR bookings.booking_start > date ?GROUP BY ....`

The `?` and the `OR` needs to be seperated by a space character. Do it wherever needed in the query string.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:33:54.463

在`date '?'`中， the`'?'`是带有 value 的文字字符串`?`，而不是参数占位符，因此您的查询没有任何参数。The`date`是从（文字）字符串到日期的简写形式。您需要替换`date '?'`为`?`实际有一个参数。

此外，如果您知道它是日期，则使用`setDate(..)`而不是`setString(..)`设置参数。

# .net - XPath - 如果元素的单个实例包含特定文本，则返回 Null

> ID：14478492
> 
> 赞同：1
> 
> 时间：2013-01-23T11:22:00.807
> 
> 标签：.net, xml, xpath, xmlnode, xpath-1.0

在 XML 文档中，例如：

```
<a>
  <b>
    <c>Text1</c>
    ...
  </b>
  <b>
    <c>Text2</c>
    ...
  </b>
  ...
</a> 
```

如果任何元素包含“Text1”的内部文本，则返回 Null 集的单个 XPath 1.0 兼容、本地命名空间（）兼容表达式是什么。

我尝试了许多不同的表达式，但无法获取会返回空集的元素。

例如

```
//*[local-name()='c' and .='Text1']

- or -   

/*[local-name()='a']/*[local-name()='b']/*not(local-name()='c' and .='Text1']) 
```

严格要求是由于 .NET 函数调用 XmlNode.SelectSingleNode 方法（字符串）的特定实现

**最终精确解** *由 Dimitre 提供*

```
/*[not(//*[local-name()='c' and . = 'Text1'])] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:32:12.367

> 如果任何元素包含“Text1”的内部文本，则返回 Null 集的单个 XPath 1.0 兼容、本地命名空间（）兼容表达式是什么。

如果没有这样的元素，您还没有指定应该选择什么`c`，所以下面我在这种情况下选择顶部元素。

**使用**：

```
/*[not(//c[. = 'Text1'])] 
```

`c`如果XML 文档中有一个元素，其字符串值为“Text1”，这将不选择任何内容。

**在使用默认命名空间的情况下，这将被写为**：

```
/*[not(//*[name()='c' and . = 'Text1'])] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select="/*[not(//c[. = 'Text1'])]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<a>
  <b>
    <c>Text1</c>
    ...
  </b>
  <b>
    <c>Text2</c>
    ...
  </b>
  ...
</a> 
```

**XPath 表达式被求值并且这个求值的结果被复制到输出中——在这种情况下没有产生任何东西——正如预期的那样**。

**如果我们将上述 XML 文档更改为**：

```
<a>
  <b>
    <c>Text3</c>
    ...
  </b>
  <b>
    <c>Text2</c>
    ...
  </b>
  ...
</a> 
```

**那么条件是`true()`并且评估的结果是以顶部元素为根的子树**：

```
<a>
    <b>
        <c>Text3</c>
    ...
    </b>
    <b>
        <c>Text2</c>
    ...
    </b>
  ...
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:30:49.137

只是否定你的表达

```
not(//*[local-name()='c' and .='Text1']) 
```

`true`如果没有，它将返回`<c>Text1</c>`，否则，它不会返回任何内容。

# javascript - javascript变量未显示正确的值

> ID：14478493
> 
> 赞同：0
> 
> 时间：2013-01-23T11:22:05.930
> 
> 标签：javascript, ajax

我有这个 ajax 调用函数。

```
function saveData(ip)
{

    $JQ.ajax({

     type: "POST",

     url: "all_actions.php",

     data: 
     {
         page_url:document.URL,
         ip_address:ip 
     },

     success: function(responce)
     {

         if(responce)
         {
             var newtoken;
             newtoken=responce;
             return newtoken;
         }
     }
    });
} 
```

然后我有另一个功能

```
 function getToken()
{
    var ip=myip
    var mytoken;
    mytoken=saveData(ip);
    alert(mytoken);

} 
```

我的令牌在警报中给出未定义。尽管如果我在 savedata 响应中提醒 newtoken 变量，它会在警报框中给出正确的值。为什么如果我返回该 avlue 它没有分配给 mytoken。

是时间延迟问题吗？？

需要你的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:27:18.967

您无法从`asynchronous`通话中返回。

您必须使用`success`函数内部的返回数据。无论您要做什么，都`token`在处理程序中编写该代码`success`。

```
success: function(responce)
 {

     if(responce)
     {
         var newtoken;
         newtoken=responce;

         // Global variable
         sourceid = newtoken;

         return newtoken; // This won't work
     }
 } 
```

还

```
 function getToken()
{
    var ip=myip
    var mytoken;
    mytoken=saveData(ip); // This won't return any data
    alert(mytoken); // This won't give you anything useful

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:48:09.170

嗨朋友这是我一直在寻找的解决方案。

```
 function saveData(ip)
{

    return $JQ.ajax({

     type: "POST",

     url: "all_actions.php",

     data: 
     {
         page_url:document.URL,
         ip_address:ip 
     },
     async: false,

    }).responseText;
}
function getToken()
{
    var ip=myip
    var mytoken;
    mytoken=saveData(ip);
    return mytoken;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:26:01.797

AJAX 中的第一个“A”是“异步”。在 AJAX 请求有机会完成之前，您的警报正在运行。您需要处理您希望对jQuery的`success: function()`or函数中的响应执行的任何操作：`.done()`

```
success: function(responce)
{
    if(responce)
    {
        var newtoken = responce;

        // Work here with newtoken...
    }
 } 
```

# bash - 库存簿管理中的 shell 编程

> ID：14478495
> 
> 赞同：1
> 
> 时间：2013-01-23T11:22:08.953
> 
> 标签：bash, shell

```
function add_new_book
{
  echo "1) add_new_book"

  echo -n "Title :"
    read title
  echo -n "Author :"
    read author
  echo -n "Price :"
    read price
  echo -n "Qty Available  : "
    read available 
  echo -n "Qty Sold : "
    read sold 

  echo $title:$author:$price:$available:$sold >> BookDB.txt
  echo $BookDB "New book title ' $title ' added successfully "
} 
```

我想显示“书已经存在”，以防输入文件中类似名称的书

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:32:44.800

在添加图书之前，请检查它是否存在：

```
 grep "$title" BookDB.txt >/dev/null 2>&1
     rc=$?

     if [[ "$rc" != 0 ]]; then
        echo $title:$author:$price:$available:$sold >> BookDB.txt
        echo $BookDB "New book title ' $title ' added successfully "
     else
        echo "The book $title already exists."
     fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T12:45:07.510

```
function add_new_book
{
  echo "1) add_new_book"
  echo -n "Title :"
    read title
    grep -iqs "^$title:" BookDB.txt && echo "THE BOOK ALREADY EXISTS" && return

  echo -n "Author :"
    read author
  echo -n "Price :"
    read price
  echo -n "Qty Available  : "
    read available 
  echo -n "Qty Sold : "
    read sold 
  echo $title:$author:$price:$available:$sold >> BookDB.txt
  echo $BookDB "New book title ' $title ' added successfully "
} 
```

# vim - Vim 映射/命令不起作用

> ID：14478497
> 
> 赞同：0
> 
> 时间：2013-01-23T11:22:15.143
> 
> 标签：vim

我正在使用 vim 中的拆分窗口，但在导航和调整拆分窗口大小时遇到​​问题。

我已将这些映射添加到我的 .vimrc 文本文件中：

```
nmap <silent> <A-Up> :wincmd k<CR>
nmap <silent> <A-Down> :wincmd j<CR>
nmap <silent> <A-Left> :wincmd h<CR>
nmap <silent> <A-Right> :wincmd l<CR> 
```

但是，按下`<A-Left>`它时仍然不会移动窗口。我也在使用`<C-w> +`，但窗口不调整大小！我也尝试过`<C-w> <`，但它一次调整大小为 1 个像素！有没有更快的方法来调整拆分窗口的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:36:00.003

10 Ctrl-W+ 将窗口大小增加 10 行。要将所有窗口调整为相同大小，您可以使用 CTRL-W = 并将窗口增加到其最大大小，请使用 Ctrl-W _。

要以不同的步骤调整大小，您可以创建以不同方式调整窗口大小的地图。例如，要将窗口大小增加 1.5 倍并将窗口大小减小 0.67，您可以映射：

```
 nnoremap <silent> <Leader>+ :exe "resize " . (winheight(0) * 3/2)<CR>
 nnoremap <silent> <Leader>- :exe "resize " . (winheight(0) * 2/3)<CR> 
```

或者，您可以使用 :resize 命令更改窗口的高度，更改窗口的宽度，使用 :vertical 修饰符。因此，要调整 10 行的大小，请使用：

```
:res +10
:res -10 
```

至于导航试试

```
 nnoremap <C-h> <C-w>h
 nnoremap <C-j> <C-w>j
 nnoremap <C-k> <C-w>k
 nnoremap <C-l> <C-w>l 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:10:26.923

这些`<C-W>`命令按单独的*行*/*列*调整大小（在控制台 Vim 中甚至不可能使用像素），但是您应该在它们之前添加一个数字以一次更改更大的数量。（很多 Vim 命令都采用这样的`[count]`，因为它在帮助中被调用。）

* * *

对于`<A-Up>`映射，它们是否在图形 GVIM 中工作，而不是在控制台中？！映射定义看起来不错（但您应该使用`:nnoremap`）。

由于内部处理键盘输入的方式，某些组合键，如`Ctrl`+ 非字母无法映射，并且无法区分`Ctrl`+ 字母与`Ctrl`+ + 字母。`Shift`（除非您的终端为它发送一个不同的*termcap*代码，而大多数人不会。）在插入或命令行模式下，尝试键入组合键。如果没有任何反应/插入，则不能使用该组合键。这是一个已知的痛点，也是 vim_dev 和 #vim IRC 频道上各种讨论的主题。

一些人（最重要的是 Paul LeoNerd Evans）想要解决这个问题（即使是支持这个的终端中的控制台 Vim），并提出了各种建议，cp。[http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8](http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8)

但是截至今天，还没有补丁或志愿者出现，尽管许多人表示希望在未来的 Vim 8 主要版本中拥有它。

# c# - TFS PendEdit 导致 TF14098：访问被拒绝

> ID：14478498
> 
> 赞同：1
> 
> 时间：2013-01-23T11:22:17.250
> 
> 标签：c#, tfs, tf-cli, vcs-checkout

我喜欢通过 C# 代码检查文件，但我总是收到 TF14098 Acess Denied Exception。TFS 管理员向我保证，我有签出/编辑权限，并且在 VisualStudio 和 tf.exe 中签出文件没有任何问题。

这是我当前的 C# 代码：

```
 const string tfsServer = @"http://MyServer:8080/tfs";
        const string fileName = @"$/MyFile.xaml";
        const string workspaceName = "MyWorkspace";

        using (TfsTeamProjectCollection tfs = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri(tfsServer)))        
        {               
            if (tfs != null)
            {
                WorkspaceInfo workspaceInfo = Workstation.Current.GetLocalWorkspaceInfo(fileName);
                if (null != workspaceInfo)
                {
                    var vcs = tfs.GetService<VersionControlServer>();   
                    Workspace workspace = workspaceInfo.GetWorkspace(tfs);                                  
                    if(workspace == null){

                        workspace = vcs.GetWorkspace(workspaceName, vcs.AuthorizedUser);
                    }                   

                    vcs.NonFatalError +=    VersionControlOnNonFatalError;
                    vcs.Getting += OnGetting;
                    vcs.BeforeCheckinPendingChange += OnBeforeCheckinPendingChange;
                    vcs.NewPendingChange += OnNewPendingChange;

                    if (workspace != null)
                    {
                        workspace.PendEdit(fileName);
                    }                       
                }
            }
        } 
```

结果总是：

> 非致命故障：TF14098：访问被拒绝：用户 Me 需要 $/MyFile.xaml 的 PendChange 权限。

在对此错误进行了大量研究后，我尝试通过 Dos-Box 检查权限，并执行了以下命令行：

```
tf checkout $/MyFile.xaml 
```

它可以毫无问题地签出文件！（如果我在文件抵抗的目录中）

有没有人知道问题可能是什么？我的代码（我用 VisualStudio2012 编写和执行的应用程序）和命令行 tf checkout 有什么区别？

感谢您的提示和提示！帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:50:33.207

您的代码中的问题是，`TfsTeamProjectCollection`不适合您的路径，因为您从未设置集合名称（应该类似于 @"http://MyServer:8080/tfs/DefaultCollection"）。我从来没有使用 API 进行过结帐，但我从这样开始进行了签入：

```
WorkspaceInfo wi = Workstation.Current.GetLocalWorkspaceInfo(Environment.CurrentDirectory);
TfsTeamProjectCollection tfs = new TfsTeamProjectCollection(wi.ServerUri);

VersionControlServer versionControlServer = (VersionControlServer)tfs.GetService(typeof(VersionControlServer));
Workspace workSpace = versionControlServer.GetWorkspace(wi); 
```

如您所见，我使用我的工作区搜索 TeamCollection，而不是将其设置为独立。这样做，您将有权`VersionControlServer`进行结帐。

使用 tf.exe 工具的不同之处在于，您在本地工作区中运行它，因此该工具知道它在 TFS 中链接到哪个项目以及哪个集合。

# javascript - 根据单选按钮选择验证选中的复选框数量

> ID：14478500
> 
> 赞同：1
> 
> 时间：2013-01-23T11:22:23.383
> 
> 标签：javascript, jquery, validation

我正在寻找 JavaScript 验证表单的复选框，但我无法让我的代码抛出错误消息。

如果选择单选按钮，则应选择`3daypass`某个部分中的 3 个复选框，等等。这是我在 onSubmit() 上运行的代码：`#matthewpeckham`

```
function chooseDaysCorrect() {

var totalDaysChecked = 0;
var totalDaysChecked = $('#matthewpeckham').find("[type='checkbox']:checked").length;

if (document.getElementById('3daypass').checked && totalDaysChecked != 3) {
    alert("Please select enough days for your chosen delegate pass from the CONFERENCE PASS section above");
    return false;
}
else if (document.getElementById('2daypass').checked && totalDaysChecked != 2) {
    alert("Please select enough days for your chosen delegate pass from the CONFERENCE PASS section above");
    return false;
}
else if (document.getElementById('1daypass').checked && totalDaysChecked != 1) {
    alert("Please select enough days for your chosen delegate pass from the CONFERENCE PASS section above");
    return false;
}
else {
    return true;
}

} 
```

`("[type='checkbox']:checked").length`计算已选择复选框数量的正确方法是什么？我哪里出错了？

我还尝试了以下在表单提交上运行函数的方法，但这也不起作用：

```
$(document).ready(function() {

$('#classic').submit(function() {

    var totalDaysChecked = 0;
    var totalDaysChecked = $('#matthewpeckham').find("[type='checkbox']:checked").length;

    if (document.getElementById('3daypass').checked && totalDaysChecked != 3) {
        alert("Please select enough days for your chosen delegate pass from the CONFERENCE PASS section above");
        return false;
    }
    else if (document.getElementById('2daypass').checked && totalDaysChecked != 2) {
        alert("Please select enough days for your chosen delegate pass from the CONFERENCE PASS section above");
        return false;
    }
    else if (document.getElementById('1daypass').checked && totalDaysChecked != 1) {
        alert("Please select enough days for your chosen delegate pass from the CONFERENCE PASS section above");
        return false;
    }
    else {
        return true;
    }

});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:41:45.123

我建议使用以下代码，首先像往常一样创建表单，然后在每个复选框中添加一个自定义 data-* 字段，其中包含要查找的所需值：

HTML：

```
<form class="classic" id="classic">
  <input type="checkbox" id="3daypass" data-expected="3" ></input>
  <input type="checkbox" id="2daypass" data-expected="2" ></input>
  <input type="checkbox" id="1daypass" data-expected="1" ></input>
  <input type="submit" value="click"></input>
</form>

$(document).ready(function() { 
```

$("form#classic").submit(function() {

```
 totalDaysChecked = $("[type='checkbox']:checked").length
  $("[type='checkbox']:checked").each(function(index, value) {
        if($(value).attr('data-expected') != totalDaysChecked) {
          alert("Please select enough days for your chosen delegate pass from the CONFERENCE PASS section above");
        } else { 
          return true
        }
  });
return false; 
```

}) })

在这里试试：http: [//jsbin.com/ipazow/1/](http://jsbin.com/ipazow/1/)

# xaml - 如何使用 XAML 在 Windows phone 8 中从一个页面导航到另一个页面？

> ID：14478501
> 
> 赞同：1
> 
> 时间：2013-01-23T11:22:24.580
> 
> 标签：xaml, navigation, windows-phone-8

我正在尝试制作我的第一个 WP8 应用程序，但是我遇到了问题。我尝试使用下面的代码导航到另一个页面，但 VS12 会引发错误。

我究竟做错了什么？

```
private void btnBMIBereken_Click(object sender, RoutedEventArgs e)
        {
            NavigationService.Navigate(new Uri("/BMI_Bereken.xaml", UriKind.Relative));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:20:36.707

伙计们，我发现了问题。

我为我的按钮使用自制按钮样式，我在视觉状态下按下了一些错误的代码。事实上，我试图在名称目标名称的位置设置按钮的背景颜色。请参阅下面的代码以了解我做错了什么。

```
<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="#FF009AD3"> 
```

我知道很愚蠢，但我要感谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:52:43.797

首先清理解决方案，然后再次重建（右键单击项目/解决方案 -> 清理）

然后如果它仍然崩溃，请尝试使用`System.Windows.RoutedEventArgs`e 而不是`RoutedEventArgs e`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T07:44:18.397

尝试这个

```
 private void btnBMIBereken_Click(object sender, RoutedEventArgs e)
    {
        Dispatcher.BeginInvoke(() =>
        {
            this.NavigationService.Navigate(new Uri("/BMI_Bereken.xaml", UriKind.Relative));
        });
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T12:53:42.313

您的代码对于导航是正确的，只需确保页面“BMI_Bereken.xaml”实际存在于项目的根目录中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-24T14:37:29.803

You could do something like this:

```
private void btnLogin_Click(object sender, RoutedEventArgs e)
{
    if (txtDriverId.Text == "D0001" && txtPassword.Password == "open")
    {
        Frame.Navigate(typeof(VehicleCondition));
    }
} 
```

# php - PHP 和 htaccess 安全性

> ID：14478502
> 
> 赞同：2
> 
> 时间：2013-01-23T11:22:29.543
> 
> 标签：php, mysql, .htaccess

我在一个网站上做自由职业者，该网站在我工作之前被黑了 3 次。

我现在正在工作，经过一些更改后，我将上传我使用这些步骤来确保安全。其他一些帮助完整的提示将不胜感激。

我认为服务器有问题，因为某些端口不安全。而且我无法找到并与服务器管理员沟通。

我想从黑客攻击中创建完全安全的网站：

我使用这两个函数来防止 sql 注入。

```
function escape($string) {
    if(get_magic_quotes_gpc()) $string = stripslashes($string);
    return mysql_real_escape_string($string);
} 
```

还有一些时间使用：

```
function remove_spc_chr($str){
        $str=trim($str);

        $arr=array('%','$','/','\\','*','+','=','\'','"','#','@','(',')','^','~','`','&',
                ',',';','\'','?','<','>','!','{','}','[',']');

        $str=str_replace($arr,'',$str);

        $str=strip_tags($str);

        return $str;        
} 
```

我将这段代码用于 htaccess 安全性：

```
RewriteEngine on
Options -Indexes

Options +FollowSymlinks
RewriteRule ^(.*)\.html$ $1.php [nc]

Options +FollowSymlinks
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [OR]
RewriteCond %{QUERY_STRING} http:.*\/.*\/ [OR]
RewriteCond %{QUERY_STRING} ..*\/ [OR]
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
RewriteCond %{QUERY_STRING} [^a-z](declare|char|set|cast|convert|delete|drop|exec|insert|meta|script|select|truncate|update)[^a-z] [NC]
RewriteRule (.*) - [F]

<IfModule mod_rewrite.c>
RewriteCond %{HTTP_USER_AGENT} (google|yahoo|aol|slurp|bing) [OR]
RewriteCond %{HTTP_REFERER} (google|aol|yahoo|search|bing)
RewriteCond %{REQUEST_URI} /$ [OR]
RewriteCond %{REQUEST_FILENAME} (html|htm|php|phps|shtml|xml|xhtml|phtml)$ [NC]
</IfModule>

#Block out any script trying to set a mosConfig value through the URL
RewriteCond %{QUERY_STRING} mosConfig_[a-zA-Z_]{1,21}(=|\%3D) [OR]

#Block out any script trying to base64_encode crap to send via URL
RewriteCond %{QUERY_STRING} base64_encode.*\(.*\) [OR]

#Block out any script that includes a script tag in URL
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]

#Block out any script trying to set a PHP GLOBALS variable via URL
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]

#Block out any script trying to modify a _REQUEST variable via URL
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})

#Send all blocked request to homepage with 403 Forbidden error!
#RewriteRule ^(.*)$ index.html [F,L]

#DirectoryIndex index.html

SetEnv TZ America/California
AddDefaultCharset utf-8
DefaultLanguage en-US
LimitRequestBody 10240000

        <FilesMatch "\.(htaccess|htpasswd|ini|phps|fla|psd|log|sh)$">
         Order Allow,Deny
         Deny from all
        </FilesMatch>

        <ifmodule mod_php4.c>
         #php_value zlib.output_compression 16386
        </ifmodule>

        AddType image/gif                       .gif .GIF
        AddType image/ief                       .ief
        AddType image/jpeg                      .jpeg .jpg .jpe .JPG
        AddType image/tiff                      .tiff .tifAuthName wapadik.net
        IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*

        RewriteCond %{REQUEST_METHOD} (GET) [NC]
        RewriteCond %{QUERY_STRING} ^(.*)(%3D|=|%3A|%09)https(%3A|:)(/|%2F){2}(.*)$ [NC,OR]
        RewriteCond %{QUERY_STRING} ^(.*)(%3D|=|%3A|%09)https%3a(%3A|:)(/|%2F){2}(.*)$ [NC,OR]
        RewriteCond %{QUERY_STRING} ^(.*)(%3D|=|%3A|%09)http(%3A|:)(/|%2F){2}(.*)$ [NC]
        RewriteRule (.*) /huwad/blocker/blocker1.php   [L]

        RewriteCond %{REQUEST_METHOD} (GET|POST) [NC]
        RewriteCond %{QUERY_STRING} ^(.*)(%20SELECT%20|%20INSERT%20|CHAR\(|%20UPDATE%20|%20REPLACE%20)(.*)$ [NC]
        RewriteRule (.*) /huwad/blocker/blocker1.php   [L]

        RewriteCond %{REQUEST_METHOD} (GET|POST) [NC]
        RewriteCond %{QUERY_STRING} ^(.*)(%3C|<)/?script(.*)$ [NC,OR]
        RewriteCond %{QUERY_STRING} ^(.*)(%3D|=)?javascript(%3A|:)(.*)$ [NC,OR]
        RewriteCond %{QUERY_STRING} ^(.*)document\.location\.href(.*)$ [OR]

        RewriteCond %{QUERY_STRING} ^(.*)(%3D|=|%3A|%09)http%3a(%3A|:)(/|%2F){2}(.*)$ [NC,OR]
        RewriteCond %{QUERY_STRING} ^(.*)(%3D|=|%3A|%09)ftp(%3A|:)(/|%2F){2}(.*)$ [NC,OR]
        RewriteCond %{QUERY_STRING} ^(.*)(%3D|=|%3A|%09)ht%20tp(%3A|:)(/|%2F){2}(.*)$ [NC,OR]
        RewriteCond %{QUERY_STRING} ^(.*)(%3D|=|%3A|%09)htt%20p(%3A|:)(/|%2F){2}(.*)$ [NC,OR]
        RewriteCond %{QUERY_STRING} ^(.*)(%3D|=|%3A|%09)http%20(%3A|:)(/|%2F){2}(.*)$ [NC,OR]
        RewriteCond %{QUERY_STRING} ^(.*)(%3D|=|%3A|%09)h%20ttp(%3A|:)(/|%2F){2}(.*)$ [NC,OR]

        RewriteCond %{QUERY_STRING} ^(.*)base64_encode(.*)$ [OR]
        RewriteCond %{QUERY_STRING} ^(.*)GLOBALS(=|[|%[0-9A-Z]{0,2})(.*)$ [OR]
        RewriteCond %{QUERY_STRING} ^(.*)_REQUEST(=|[|%[0-9A-Z]{0,2})(.*)$ [OR]
        RewriteCond %{REQUEST_URI} ^(.*)_vti(.*)$ [OR]
        RewriteCond %{REQUEST_URI} ^(.*)MSOffice(.*)$ [OR]
        RewriteCond %{QUERY_STRING} ^(.*)/etc/passwd(.*)$ [OR]
        RewriteCond %{QUERY_STRING} ^(.*)//(.*)$ [OR]
        RewriteCond %{REQUEST_URI} ^(.*)ShellAdresi.TXT(.*)$ [OR]
        RewriteCond %{REQUEST_URI} ^(.*)\[evil_root\]?(.*)$ [OR]
        RewriteCond %{QUERY_STRING} ^(.*)\.\./\.\./\.\./(.*)$ [OR]
        RewriteCond %{QUERY_STRING} ^(.*)/proc/self/environ(.*)$
        RewriteRule (.*) /huwad/blocker/blocker1.php   [L]

        RewriteCond %{HTTP_USER_AGENT} @nonymouse|ADSARobot|amzn_assoc|Anarchie|ASPSeek|Atomz|^[^?]*addresses\.com|Advanced\ Email\ Extractor|ah-ha|aktuelles|almaden|Art-Online|AspiWeb|ASSORT|ATHENS|attach|attache|autoemailspider|BackWeb|Bandit|BatchFTP|bdfetch|big.brother|BlackWidow|bmclient|Boston\ Project|Bot\ mailto:craftbot@yahoo.com|BravoBrian\ SpiderEngine\ MarcoPolo|Buddy|Bullseye|bumblebee|capture|CherryPicker|ChinaClaw|CICC|clipping|Crescent\ Internet\ ToolPack|cURL|Custo|cyberalert|Deweb|diagem|Digger|Digimarc|DIIbot|DirectUpdate|DISCo|Download\ Accelerator|Download\ Demon|Download\ Wonder|Downloader|Drip|DSurf15a|DTS.Agent|EasyDL|eCatch|echo\ extense|ecollector|efp@gmx\.net|EirGrabber|EmailCollector|Email\ Extractor|EmailSiphon|EmailWolf|Express\ WebPictures|ExtractorPro|EyeNetIE|fastlwspider|FavOrg|Favorites\ Sweeper|Fetch\ API\ Request|FEZhead|FileHound|FlashGet|FlickBot|fluffy|frontpage|GalaxyBot|Generic|Getleft|GetRight|GetSmart|GetWeb!|GetWebPage|gigabaz|Girafabot|Go!Zilla|Go-Ahead-Got-It|GornKer|Grabber|GrabNet|Grafula|Green\ Research|Harvest|hhjhj@yahoo|hloader|HMView|HomePageSearch|HTTP\ agent|HTTPConnect|httpdown|http\ generic|HTTrack|^[^?]*iaea\.org|IBM_Planetwide|^[^?]*\.ideography\.co\.uk|Image\ Stripper|Image\ Sucker|imagefetch|IncyWincy|Indy\ Library|informant|Ingelin|InterGET|Internet\ Ninja|InternetLinkAgent|InternetSeer\.com|Iria|Irvine|iOpus|IPiumBot\ laurion(dot)com|Jakarta|JBH*Agent|JetCar|JustView|Kapere|KWebGet|Lachesis|larbin|LeechFTP|LexiBot|lftp|libwww|likse|Link*Sleuth|LINKS\ ARoMATIZED|LinkWalker|LWP|lwp-trivial|Magnet|Mac\ Finder|Mag-Net|Mass\ Downloader|MemoWeb|MCspider|Microsoft\ URL\ Control|MIDown\ tool|minibot\(NaverRobot\)|Mirror|Missigua\ Locator|Mister\ PiX|MMMtoCrawl\/UrlDispatcherLLL|MSProxy|multithreaddb|nationaldirectory|Navroad|NearSite|NetAnts|NetCarta|netfactual|netcraft|NetMechanic|netprospector|NetResearchServer|NetSpider|Net\ Vampire|NetZIP|NEWT|nicerspro|NPBot|Octopus|Offline\ Explorer|Offline\ Navigator|OpaL|Openfind|OpenTextSiteCrawler|OutWit|PackRat|PageGrabber|Papa\ Foto|pavuk|pcBrowser|PersonaPilot|PingALink|Pockey|Program\ Shareware|psbot|PSurf|puf|Pump|PushSite|QRVA|QuepasaCreep|RealDownload|Reaper|Recorder|ReGet|replacer|RepoMonkey|Robozilla|Rover|RPT-HTTPClient|Rsync|SearchExpress|searchhippo|searchterms\.it|Second\ Street\ Research|Shai|sitecheck|SiteMapper|SiteSnagger|SlySearch|SmartDownload|snagger|SpaceBison|Spegla|SpiderBot|SqWorm|Star\ Downloader|Stripper|Sucker|SuperBot|SuperHTTP|Surfbot|SurfWalker|Szukacz|tAkeOut|tarspider|Teleport\ Pro|Telesoft|Templeton|traffixer|TrueRobot|TuringOS|TurnitinBot|TV33_Mercator|UIowaCrawler|URL_Spider_Pro|UtilMind|Vacuum|vagabondo|vayala|visibilitygap|vobsub|VoidEYE|vspider|w3mir|web\.by\.mail|Web\ Data\ Extractor|Web\ Downloader|Web\ Image\ Collector|Web\ Sucker|WebAuto|webbandit|Webclipping|webcollector|webcollage|WebCopier|webcraft@bea|WebDAV|webdevil|webdownloader|Webdup|WebEmailExtractor|WebFetch|WebGo\ IS|WebHook|Webinator|WebLeacher|WebMiner|WebMirror|webmole|WebReaper|WebSauger|WEBsaver|Website\ eXtractor|Website\ Quester|WebSnake|Webster|WebStripper|websucker|webvac|webwalk|webweasel|WebWhacker|WebZIP|Wget|whizbang|WhosTalking|Widow|WISEbot|WUMPUS|Wweb|WWWOFFLE|Wysigot|Xaldon\ WebSpider|XGET|x-Tractor|Zeus.* [OR]

        RewriteCond %{REQUEST_URI} .*((php|my)?shell|remview.*|phpremoteview.*|sshphp.*|pcom|nstview.*|c99|r57|webadmin.*|phpget.*|phpwriter.*|fileditor.*|locus7.*|storm7.*)\.(p?s?x?htm?l?|txt|aspx?|cfml?|cgi|pl|php[3-9]{0,1}|jsp?|sql|xml) [NC,OR]
        RewriteCond %{REQUEST_METHOD} (GET|POST) [NC]
        RewriteCond %{QUERY_STRING} ^(.*)=/home(.+)?/(.*)/(.*)$ [OR]
        RewriteCond %{QUERY_STRING} ^work_dir=.*$ [OR]
        RewriteCond %{QUERY_STRING} ^command=.*&output.*$ [OR]
        RewriteCond %{QUERY_STRING} ^nts_[a-z0-9_]{0,10}=.*$ [OR]
        RewriteCond %{QUERY_STRING} ^c=(t|setup|codes)$ [OR]
        RewriteCond %{QUERY_STRING} ^act=((about|cmd|selfremove|chbd|trojan|backc|massbrowsersploit|exploits|grablogins|upload.*)|((chmod|f)&f=.*))$ [OR]
        RewriteCond %{QUERY_STRING} ^act=(ls|search|fsbuff|encoder|tools|processes|ftpquickbrute|security|sql|eval|update|feedback|cmd|gofile|mkfile)&d=.*$ [OR]
        RewriteCond %{QUERY_STRING} ^&?c=(l?v?i?&d=|v&fnot=|setup&ref=|l&r=|d&d=|tree&d|t&d=|e&d=|i&d=|codes|md5crack).*$ [OR]
        RewriteCond %{QUERY_STRING} ^(.*)([-_a-z]{1,15})=(ls|cd|cat|rm|mv|vim|chmod|chdir|mkdir|rmdir|pwd|clear|whoami|uname|tar|zip|unzip|tar|gzip|gunzip|grep|more|ln|umask|telnet|ssh|ftp|head|tail|which|mkmode|touch|logname|edit_file|search_text|find_text|php_eval|download_file|ftp_file_down|ftp_file_up|ftp_brute|mail_file|mysql|mysql_dump|db_query)([^a-zA-Z0-9].+)*$ [OR]
        RewriteCond %{QUERY_STRING} ^(.*)(wget|shell_exec|passthru|system|exec|popen|proc_open)(.*)$
        #RewriteRule  (.*)  /huwad/blocker/blocker3.php  [L]

ErrorDocument 400 /index.html
ErrorDocument 403 /index.html
ErrorDocument 404 /index.html
ErrorDocument 405 /index.html
ErrorDocument 408 /index.html
ErrorDocument 500 /index.html
ErrorDocument 502 /index.html
ErrorDocument 504 /index.html

        <Files 403.shtml>
        order allow,deny
        allow from all
        </Files> 
```

[Htaccess 参考](http://coding-talk.com/f16/how-to-block-sql-injection-and-php-shell-uploaders-using-the-htaccess-file-7825/)

我在查询中使用之前检查变量是否正确。

如果有安全步骤对我有帮助吗？

如果有问题或任何漏洞，请回答安全步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:33:41.493

我将首先关注您引用的这个函数：

```
function escape($string) {
    if(get_magic_quotes_gpc()) $string = stripslashes($string);
    return mysql_real_escape_string($string);
} 
```

这里的意图是好的，但存在一些主要问题，主要是由于使用了过时的 PHP 技术。

*   首先，不推荐使用Magic Quotes。最新版本的 PHP (5.4)`get_magic_quotes_gpc()`完全删除了该功能。PHP 5.3 包含它，但会引发弃用警告。

    如果您使用的是 PHP 5.4，则此代码根本不起作用。

    如果您使用的是 PHP 5.3，您应该已经注意到正在生成的错误消息。您可以将 PHP 设置为忽略它们，但这不是一个好主意。您应该确保魔术引号已关闭，并且您可以删除这行代码。

    如果您使用的是 PHP 5.2 或更早版本，则需要升级。5.2 两年来一直不受支持，并且已经知道永远不会修补的**安全问题。**

*   其次，`mysql_xxx()`功能已被弃用。它们被认为是过时且不安全的，将从未来的 PHP 版本中删除。强烈建议不要再使用它们；应该切换到`mysqli_xx()`函数或 PDO 库。

    根据代码的质量（和大小），这可能是一项艰巨的任务，但如果您试图使代码更安全，这一点很重要。

    作为额外的好处，mysqli 和 PDO 扩展都提供了一种名为 Prepared Queries 的 SQL 技术，它允许您构建 SQL 查询而无需手动转义参数。这被认为是当前的最佳实践，可以完全替代使用这些`escape_string`功能。同样，在现有系统中实施这将是相当多的工作，但以安全的名义可能是值得的。

现在，您用来防止 SQL 注入的第二个函数：

```
function remove_spc_chr($str){ ... } 
```

断然，这是行不通的。如果你依赖这个函数来做和这个函数一样的工作`escape()`，它很容易被破解。黑客可以使用多种方法绕过此代码，包括`null`在字符串中包含字符，并且根据您使用的字符编码，有多种方法可以使用非 ASCII 字符来攻击DB也不会在这里被选中。始终对发送到数据库的数据（或准备好的查询，如上所述）使用适当的转义机制。

关于你提供的 htaccess 代码，我可以看到你在这里做什么，试图阻止某些 SQL 和 PHP 关键字。如果脚本本身得到了适当的保护，那么这些都不是必需的。特别是，如果代码中的查询被正确转义/准备，SQL 关键字应该是完全安全的。此外，许多 SQL 关键字是常见的英文单词，因此阻止它们可能会导致人们在您网站的表单中发布合法文本时遇到问题。

您引用的所有内容的另一个问题是它只处理少数相当具体的攻击（据我所知，其中大部分不太可能是已经破坏该站点的攻击）。您还没有处理很多攻击媒介。

我建议采取一些更可靠的保护措施。如果您的服务器没有运行 PHP Suhosin 扩展，那么您应该升级 PHP 版本以包含它。这是 PHP 的通用安全强化扩展。它可以做很多事情来帮助保护 PHP 站点，但对你来说，我想说一个关键特性是能够禁用不安全的 PHP 特性和函数，例如`exec()`和`system()`函数。仅此一项就会对入侵您的网站的能力产生重大影响，而您根本不需要任何代码更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:50:49.973

这里有很多问题。

假设您已将 SQL 注入识别为漏洞（并且您还需要确定这是否是先前攻击中被利用的漏洞，以及调查和消除任何其他漏洞 - 这些漏洞很可能存在）然后......

我接受纠正围绕启用magic_quotes 构建的代码库的配置可能不切实际，但首先修复配置是解决问题的正确方法。此外，magic_quotes 的问题之一是某些扩展通过后门路由启用它们 - 您不一定要依赖 get_magic_quotes_gpc()。但是如果配置没有改变，那么行为将是一致的——所以测量行为并相应地调整你的代码。如果启用了魔术引号，那么理想情况下，您应该设置自己的指示器来指示*当前*是否启用了魔术引号 - 当有人能够正确解决问题时，这将使生活变得更简单。

但是这里的第一个大问题是，您为什么要使用自己的代码来转义数据？您应该这样做的唯一方法是通过 mysql_real_escape_string() 或通过绑定参数。您绝不应该使用 remove_spc_chr() 作为转义数据以拼接到 SQL 字符串中的方法。

这里的第二个 WTF 是您似乎正在尝试使用您的重写 tules 来解决不同类型的攻击 - 这意味着您不知道漏洞是什么。但是您的重写配置仅解决了一些非常具体的攻击。更好的解决方案是使用 mod_security 和/或 fail2ban。

将 index.html 用作通用错误处理程序并不能提供良好的用户体验。

> 我认为服务器有问题，因为某些端口不安全

如果是这种情况，那么您对网络服务器所做的任何事情都不会提高安全性。

> 我无法找到并与服务器管理员沟通

如果是这种情况，那么您几乎无法提高安全性。

# c# - 这是否适合使用事务来查找最后一个共享姓氏的人的序列号？

> ID：14478503
> 
> 赞同：0
> 
> 时间：2013-01-23T11:22:29.800
> 
> 标签：c#, algorithm

我需要生成一个`ApplicantNumber`具有三个姓氏数字的数字，然后是具有该姓氏的人数。这是我的第一次尝试。我认为可序列化事务应该防止任何重复。会吗？

```
public string GenerateApplicantNumber(string surname)
{
    using (new TransactionScope(TransactionScopeOption.RequiresNew, new TransactionOptions {IsolationLevel = IsolationLevel.Serializable}))
    {
        return string.Format("{0}{1}", surname.Substring(0, Math.Min(Regex.Replace(surname, @"\s+", "").Length, 3)),
                                _profileService.ReadApplicantProfiles().Count(p => !p.IsDeleted && p.LastName == surname));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:28:10.863

这在某些情况下会产生冲突。

*   假设您有两个同名“Foo”的申请人。
*   申请人 1 将获得数字“Foo1”，申请人 2 将获得“Foo2”。
*   现在您将申请人 1 的状态设置为已删除。
*   第三个名为“Foo”的申请人进入系统。
*   未删除的申请者数量为2，因此第三个申请者也会得到数字“Foo2”，从而产生冲突。

# css - 图标字体 - icomoon - @font-face 在不同的服务器上不显示

> ID：14478505
> 
> 赞同：0
> 
> 时间：2013-01-23T11:22:32.943
> 
> 标签：css, fonts, icons, font-face, glyph

当我第一次下载这些图标时，它们可以在所有浏览器中使用。然而，现在它的生活和字体生活在不同的服务器上，它在 IE 或 Firefox 中不起作用，但在 Chrome 和 Opera 中很好。有人有什么想法吗？我已经三次检查了代码并确保所有字体都在服务器上。

```
@font-face {
font-family: 'icomoon';
src:url('http://static.mydomain.com/design_media/fonts/icomoon.eot');
src:url('http://static.mydomain.com/design_media/fonts/icomoon.eot?#iefix') format('embedded-opentype'),
    url('http://static.mydomain.com/design_media/fonts/icomoon.svg#icomoon') format('svg'),
    url('http://static.mydomain.com/design_media/fonts/icomoon.woff') format('woff'),
    url('http://static.mydomain.com/design_media/fonts/icomoon.ttf') format('truetype');    
font-weight: normal;
font-style: normal;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T08:53:52.390

JS 文件等字体有一些 XSS 限制。

为避免这些限制，您必须将服务器配置为允许跨域字体文件。

在 Apache 中，您必须安装 Header 模块并将其添加到您的 conf 中：

```
 <FilesMatch "\.(ttf|ttc|otf|eot|woff)$">
       <IfModule mod_headers.c>
       Header set Access-Control-Allow-Origin "*"
       </IfModule>
   </FilesMatch> 
```

编辑：Access-Control-Allow-Origin 之后的“*”参数可能仅限于特定域。

有关详细信息，请参阅[http://www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)。

# c# - 图像高度宽度验证和弹出

> ID：14478508
> 
> 赞同：0
> 
> 时间：2013-01-23T11:22:40.760
> 
> 标签：c#, jquery, asp.net, file-upload

我有一个`.aspx`带有`FileUpload`控件的页面。我想实现将图片上传到网站。但在此之前，我需要使用以下条件检查图像高度和宽度：

*   如果图像高度 > 768 或宽度 > 1024，则显示弹出消息继续...。（是/否）

*   如果图像高度 <768 或宽度 <1024 则显示弹出消息继续...。（是/否）

    所以，到目前为止我已经完成了图像上传代码，但是如何实现呢？任何帮助/建议将不胜感激。

    ```
     <asp:RegularExpressionValidator ID="revUploaderMainPopup" runat="server" ControlToValidate="UploaderMainPopup"
                            ErrorMessage="*" ValidationGroup="MainPopUploadvlg" ToolTip="Only .jpg, .bmp, .png are valid."
                            ForeColor="Red" Display="Dynamic"  ValidationExpression="(.*\.([Jj][Pp][Gg])|.*\.([Bb][Mm][Pp])|.*\.([pP][nN][gG])$)">
           </asp:RegularExpressionValidator> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T05:45:43.467

我是通过以下方式完成的：我采用了两个变量（图像和字符串）一个带有弹出窗口的 div，有拖曳按钮。验证图像后，我`display:block`从服务器设置为 div。
在单击 ye 按钮时，我正在保存它。

```
 <div id="dvPopup" class="popup" runat="server" style="display: none">
    <asp:Panel ID="pnlpopup" runat="server" Style="display: block; position: absolute; width:400px;
        margin: auto" CssClass="modalConfirmation">
        <div style="width: 400px; height: 30px;" class="MessageHeaderError">
            <div class="modalHeader">
                Confirmation
            </div>
        </div>
        <br />
        <div style="color: Black">
            <span runat="server" id="spnMessge" style="font-weight:bold">Picture is smaller than 1024 x 768 and will be stretched.</span>
        </div>
        <div class="small">
        </div>
        <div>
            <div style="display: table-cell; height: 40px; padding-left: 80px; vertical-align: middle;
                width: 80px;">
                <asp:ImageButton ID="btnYes" ImageUrl="~/images/correct.png" runat="server" AlternateText="YES"
                    ToolTip="Yes" OnClick="btnYes_Click" />
            </div>
            <div style="display: table-cell; height: 40px; vertical-align: middle;">
                <asp:ImageButton ID="btnNo" ImageUrl="~/images/delete.png" runat="server" AlternateText="NO"
                    ToolTip="No" Style="margin-left: 100px;" OnClick="btnNo_Click" />
            </div> 
```

在`.cs`文件中：

```
 private bool ValidateImageSize(System.Drawing.Image imgPopup, string strSource)
    {
        //Messure height & width and show popup;
        if ((strSource == "MainPopup") && (imgPopup.Height > 768 || imgPopup.Width > 1024))
        {
            return true;
        }
        else if (strSource == "SmallPopup" && imgPopup.Height > 300 || imgPopup.Width > 400)
        {
            return true;
        }
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:54:40.293

尝试关注

```
 using (System.Drawing.Image image = System.Drawing.Bitmap.FromStream(fs))
        {
            int iWidth = (int)Math.Round((decimal)image.Width);
            int iHeight = (int)Math.Round((decimal)image.Height);
           if(iWidth > 1024 || iHeight > 768)
           {
                // here you can throw your message
           }
        } 
```

问候，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:46:30.173

如果不使用自定义验证器，您将无法做到这一点。它肯定必须是服务器端。客户端代码将需要 Javascript 来显示“是或否”对话框（这可以通过`javascript: confirm('yes?');`对话框来完成。

此外，如果您想让 UI 看起来好像从未发生过上传，并且您在客户端完全验证它（因为部分回发），则需要一些 ajax。

请参阅[获取图像的尺寸，而无需读取整个文件](https://stackoverflow.com/questions/111345/getting-image-dimensions-without-reading-the-entire-file)，这样您就可以将 ajax 请求推迟几毫秒。

祝你好运！

# java - 使用 setImageResource 的相对路径

> ID：14478509
> 
> 赞同：0
> 
> 时间：2013-01-23T11:22:42.443
> 
> 标签：java, android, eclipse

我试图在我的应用程序中显示每次按下按钮时都会更改的图像。应该显示的图像名称在我的对象中。我可以得到图像的名称

```
String nameOfImage = myObhect.get(i).getImageName(); 
```

现在，我想显示当前图像

```
iv.setImageResource(R.drawable.notruf); 
```

使用`setImageResource`，我不知道如何输入我的图像名称， `setImageResource`因为例如

`iv.setImageResource(R.drawable. + aktbild)`是不可能的。

我也尝试过这种方式，`setImageDrawable`但这对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:29:19.823

我在我的应用程序中使用了类似的解决方案：

```
Context mContext = this;  // I supposed you're in Activity
String imgName = fragenkatalog.get(i).getBild();
int resId = mContext.getResources().getIdentifier(imgName,
                        "drawable", mContext.getApplicationInfo().packageName);
if(resId > 0){
    iv.setImageResource(resId);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:31:55.997

**我相信这段代码会帮助你..**

```
String aktbild = fragenkatalog.get(i).getBild();
byte[] decodedString = Base64.decode(aktbild , Base64.DEFAULT);
Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0,
decodedString.length); 
```

**之后，如果您想调整该图像的大小，请使用此代码。**

```
int width=75;
int height=75;
Bitmap resizedbitmap=Bitmap.createScaledBitmap(decodedByte, width, height, true); 
```

**最后将图像设置为 ImageView。**

```
Icon.setImageBitmap(resizedbitmap);` 
```

# html - html5 css3 实现背景图案

> ID：14478512
> 
> 赞同：-2
> 
> 时间：2013-01-23T11:22:48.147
> 
> 标签：html, css, background

我必须为后台网站实现这种模式。谁能帮我实现这个模式？我不知道它必须如何开发。

我已经用这个 css3 代码实现了渐变：

```
background: rgb(152,152,152); /* Old browsers */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzk4OTg5OCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZmZmZmZmIiBzdG9wLW9wYWNpdHk9IjEiLz4KICA8L2xpbmVhckdyYWRpZW50PgogIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9InVybCgjZ3JhZC11Y2dnLWdlbmVyYXRlZCkiIC8+Cjwvc3ZnPg==);
background: -moz-linear-gradient(left,  rgba(152,152,152,1) 0%, rgba(255,255,255,1) 100%, rgba(255,255,255,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(152,152,152,1)), color-stop(100%,rgba(255,255,255,1)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(left,  rgba(152,152,152,1) 0%,rgba(255,255,255,1) 100%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(left,  rgba(152,152,152,1) 0%,rgba(255,255,255,1) 100%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(left,  rgba(152,152,152,1) 0%,rgba(255,255,255,1) 100%,rgba(255,255,255,1) 100%); /* IE10+ */
background: linear-gradient(to right,  rgba(152,152,152,1) 0%,rgba(255,255,255,1) 100%,rgba(255,255,255,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#989898', endColorstr='#ffffff',GradientType=1 ); /* IE6-8 */ 
```

![在此处输入图像描述](../Images/643ba8939bbb8b72c9f4ab1293c828ec.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:36:27.293

正如所评论的，它被用作一些旧浏览器的后备，例如 IE6

```
background: rgb(152,152,152); /* Old browsers */ 
```

包含内联背景图片（使用 base64 编码而不是 url）

```
background: url(data:image/svg+xml;base64,PD94bWw...); 
```

对于 -xx-linear-gradient 行，我们称其为供应商特定属性。

```
background: -moz-linear-gradient(left,  rgba(152,152,152,1) 0%, rgba(255,255,255,1) 100%, rgba(255,255,255,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, right top, color-stop(0%,rgba(152,152,152,1)), color-stop(100%,rgba(255,255,255,1)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(left,  rgba(152,152,152,1) 0%,rgba(255,255,255,1) 100%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(left,  rgba(152,152,152,1) 0%,rgba(255,255,255,1) 100%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(left,  rgba(152,152,152,1) 0%,rgba(255,255,255,1) 100%,rgba(255,255,255,1) 100%); /* IE10+ */
background: linear-gradient(to right,  rgba(152,152,152,1) 0%,rgba(255,255,255,1) 100%,rgba(255,255,255,1) 100%); /* W3C */ 
```

它们不一定是标准的 W3C 规则。存在特定于供应商的道具的目的是允许浏览器供应商添加他们自己的 CSS 道具，以提供比标准建议开发人员更多的功能。

最后一行由支持“过滤器”属性的 IE 使用。

所以简而言之，第一行下面的行只是**做同样的工作**，但它们只是为**不同的浏览器**设计的。它确保应用规则的元素在所有主要浏览器中看起来都相同。

# c# - Windows Phone 反序列化以列出 JSON .NET

> ID：14478514
> 
> 赞同：1
> 
> 时间：2013-01-23T11:22:58.130
> 
> 标签：c#, .net, json, windows-phone-7, deserialization

我在 WP7 上使用 JSON.Net 反序列化字符串时遇到问题。我有这个 JSON 字符串：

[JSON 示例](http://pastebin.com/cr2m5z2E)

我已经从中生成了一个类（[http://json2csharp.com/](http://json2csharp.com/)）。

```
 void GETHotels()
        {
            WebClient c = new WebClient();
            c.DownloadStringAsync(new Uri(@"..."));
            c.DownloadStringCompleted += new DownloadStringCompletedEventHandler(DownloadStringCompleted);
        }

        DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
        {         
            var deserialized = JsonConvert.DeserializeObject<List<Classes.RootObject>>(e.Result);
        } 
```

但是当我尝试反序列化 e.Result 时，我得到了异常：

> 将值“[{"hotId": ... 6390285}]”转换为类型“System.Collections.Generic.List`1[Hotel_cz.Classes.RootObject]”时出错。路径 ''，第 1 行，位置 971。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:42:14.453

这应该工作...

```
var hotels = JsonConvert.DeserializeObject<List<Hotel>>(e.Result); 
```

* * *

```
public class Hotel
{
    public int hotId;
    public string Name;
    public double latitude;
    public double longitude;
} 
```

# iphone - 更多 iCloud 核心数据同步问题

> ID：14478517
> 
> 赞同：59
> 
> 时间：2013-01-23T11:23:17.013
> 
> 标签：iphone, ios, core-data, synchronization, icloud

所以，它终于发生了。对于任何独立的 iPhone 开发者来说，最糟糕的情况发生了。升级我的应用程序后，有几个用户报告完全**丢失数据。**iCloud 核心数据同步不工作。我的用户部分使用这个应用程序来经营他们的业务。这是一个真正的*灾难性失败*。

我唯一更改的与 iCloud 相关的事情是将键值存储添加到 iCloud。核心数据代码保持完全相同，相同的模型版本（无迁移）等。

在我的测试中，一切都很顺利！但令我沮丧的是，用户报告说，当他们打开更新的应用程序时，他们的数据已经不存在了。

这可能是什么原因？

*   *持久存储 URL* （一个普遍存在的URL）不应更改。
*   *合并冲突*也不太可能发生，因为这个问题应该在更新之前出现。
*   ~~也许对新的*无处不在的键值存储*有一些干扰？~~
    （我几乎排除了这一点。）

请在下面找到我的托管对象模型和持久存储的代码。如果您需要其他任何东西来评估问题，请告诉我。

```
- (NSManagedObjectContext *)managedObjectContext {

    if (managedObjectContext_ != nil) {
        return managedObjectContext_;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        managedObjectContext_ = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
        [managedObjectContext_ performBlockAndWait:^{
            [managedObjectContext_ setPersistentStoreCoordinator:coordinator];
            if (useICloud) {
                [managedObjectContext_ setMergePolicy:NSMergeByPropertyObjectTrumpMergePolicy];
                [[NSNotificationCenter defaultCenter] addObserver:self
           selector:@selector(mergeiCloud:)
           name:NSPersistentStoreDidImportUbiquitousContentChangesNotification
           object:coordinator];
            }
        }];
    }
    return managedObjectContext_;
} 
```

和

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {
    if (persistentStoreCoordinator_ != nil) {
        return persistentStoreCoordinator_;
    }

    NSMutableDictionary *options = [NSMutableDictionary dictionary];
    NSURL *storeURL = [[self applicationDocumentsDirectory] 
            URLByAppendingPathComponent:@"SalesCalls.sqlite"];

    [options setObject:[NSNumber numberWithBool:YES] 
                  forKey:NSMigratePersistentStoresAutomaticallyOption];
    [options setObject:[NSNumber numberWithBool:YES] 
                  forKey:NSInferMappingModelAutomaticallyOption];

    if (useICloud) {  // this is an internal flag set to YES
        NSURL *iCloudURL = [[NSFileManager defaultManager] 
                               URLForUbiquityContainerIdentifier:nil];

        if (nil!=iCloudURL) {
            NSString *cloudData = [[iCloudURL path] 
                       stringByAppendingPathComponent:@"data"];
            iCloudURL = [NSURL fileURLWithPath:cloudData];      

            [options setObject:@"at.topofmind.salesplus.store" 
                        forKey:NSPersistentStoreUbiquitousContentNameKey];
            [options setObject:iCloudURL 
                        forKey:NSPersistentStoreUbiquitousContentURLKey];

            NSURL *nosyncDir = [iCloudURL 
                        URLByAppendingPathComponent:@"data.nosync"];
            [[NSFileManager defaultManager] createDirectoryAtURL:nosyncDir 
                        withIntermediateDirectories:YES 
                        attributes:nil error:nil];

            storeURL = [nosyncDir 
                        URLByAppendingPathComponent:@"SalesCalls.sqlite"];
        }
    }

    NSError *error = nil;
    persistentStoreCoordinator_ = [[NSPersistentStoreCoordinator alloc] 
             initWithManagedObjectModel:[self managedObjectModel]];
    if (![persistentStoreCoordinator_ 
                  addPersistentStoreWithType:NSSQLiteStoreType
                  configuration:nil URL:storeURL options:options error:&error]) 
   {
        NSLog(@"Cannot create persistent store coordinator, %@, %@", 
                        error, [error userInfo]);
        abort();
    }    

    return persistentStoreCoordinator_;
} 
```

欢迎评论、意见、猜测等（当然还有解决方案！）。

**更新：**

我的一位客户丢失了所有数据，并且在重新安装和重置所有内容（重新启动设备等）后，他无法再与 iCloud 同步。该符号根本不会显示在“设置”中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:21:08.463

我遇到了类似的情况，用途很少（根据您的描述，我认为您的音量比我大得多，这可能是几种情况的原因）

就我而言，Apple 似乎在没有提前通知的情况下删除了 icloud 中的 20gb 可用空间。我注意到，作为电力数据使用用户的 2 个用户丢失了我的应用程序中的新数据（用于处理历史股票定价），而其他用户我们只需下载相同的数据大小即可。

我跟进了这两个，帮助他们清理东西以在 icloud 中腾出更多空间，瞧，再次下载数据后它工作正常。

# javascript - 注入 html 后，缓存的 jQuery 选择器给出与非缓存选择器不同的结果

> ID：14478520
> 
> 赞同：0
> 
> 时间：2013-01-23T11:23:22.867
> 
> 标签：javascript, jquery, caching, dom, html-injections

# 找到了解决方案！不要费心创建答案

结果我注入了 html 两次——一次是在创建选择器之前，然后，由于一些未完成的重构，*第二*次；从而覆盖 DOM 的相关部分。不过，缓存的选择器仍然引用旧的 DOM 部分，因此不会被垃圾收集。当然，更改旧部分对新部分没有影响，让 jQuery 重新进行选择清楚地表明了这一点。

## 问题

我正在尝试创建一个小部件。运行它的脚本后，小部件找到一个带有特定代码标签（在下面引用为 $rootElem），下载一段 html 代码并将其注入到这个 div 中。完成此操作后，它开始将事件附加到输入元素，构建 ui 元素，如滑块等。

AFAIK，在将 html 注入 DOM 之后，生成的 DOM 应该等同于从那里开始 html。原来 jQuery 不这么认为。具体来说，我*首先*注入 html，然后*开始*查找和缓存选择器结果。

以下代码块应该是等效的（做同样的事情）；将一段 html 更改`<span>awaiting calculation ...</span>`为`<span>1234</span>`. 而且，你瞧，如果我把所有的 html 放到同一个文档中（而不是注入它），他们实际上在做同样的事情。

缓存选择器结果以供以后检索

```
var $result = $rootElem.find( "div.result p:nth-of-type(1) span" );
$.subscribe( "/server/calculateLoan/finished", function ( e, firstPayment ) {
    $result.text( firstPayment ) );
} ); 
```

每次都做选择

```
$.subscribe( "/server/calculateLoan/finished", function ( e, firstPayment ) {
    $rootElem.find( "div.result p:nth-of-type(1) span" ).text( firstPayment ) );
} ); 
```

但是，如果我将小部件的 html 代码移出主文档，并在处理它之前将其注入，则只有非缓存（后者）版本有效。实际上第一个*似乎*也有效。如果我在匿名函数中设置断点，我会看到发生了一件奇怪的事情：

```
>   $result.text()
    <span>awaiting calculation ...</span>
>   $rootElem.find( "div.result p:nth-of-type(1) span" ).text()
    <span>awaiting calculation ...</span>
>   $result.text("1234") //This is not showing in the browser window!
    [<span>1234</span>]
>   $result.text() //This is not showing in the browser window!
    [<span>1234</span>]
>   $($result.selector).text() //What kind of magic is this?!
    <span>awaiting calculation ...</span>
>   $rootElem.find( "div.result p:nth-of-type(1) span" ).text()
    <span>awaiting calculation ...</span> 
```

似乎缓存的 jQuery 选择器指向另一个 DOM 元素（未显示其更改），而不是我搜索相同的元素。这只*发生*在注入 html 时，而不是当小部件的 html 被复制粘贴到页面中时。有人愿意解释发生了什么吗？

这发生在 Chrome 和 Firefox 中。

主页上的 html 位如下所示：

```
 <div id="widget_calculator"><!-- dynamic fetch --> </div> 
```

小部件的 html

```
<h1>Widget calculator</h1>

<div class="user-inputs">...</div>
<div class="result">
    <p><span>awaiting calculation ...</span></p>
</div> 
```

注入html的代码

```
function fetchHtmlTemplate( templateUrl ) {
    // set globals
    $ = jQuery;
    $rootElem = $( "#widget_calculator" );

    $.get( templateUrl, function ( htmlTemplate ) {
        $rootElem.html( htmlTemplate );
        buildWidget();
    } );
} 
```

# pdf - 如何在 PDFsharp 中获取 XGraphics 类

> ID：14478524
> 
> 赞同：4
> 
> 时间：2013-01-23T11:23:39.463
> 
> 标签：pdf, pdfsharp

我正在使用 PDFsharp 生成 pdf，但我无法使用 XGraphics 类。有人可以告诉我如何使用 XGraphics 类，或者我需要在我的应用程序中添加什么 dll 和命名空间。实际上，我必须在我的 dll 的页眉和页脚中画一条线，并且在链接[http://www.pdfsharp.net/wiki/Graphics-sample.ashx#Draw_simple_lines_0](http://www.pdfsharp.net/wiki/Graphics-sample.ashx#Draw_simple_lines_0)上有一个使用 XGraphics 的方法 DrawLine()我找不到的课程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T11:41:23.403

好，我知道了。它包含在命名空间下：

`using PdfSharp.Drawing;`

# xml - XML 中的时间戳值问题

> ID：14478529
> 
> 赞同：0
> 
> 时间：2013-01-23T11:23:52.873
> 
> 标签：xml, timestamp, jmeter

是否有可能更改 XML 中的时间戳，由表中的视图结果生成，同时将文件从毫秒（Unix 格式）写入标准 Windows 日期格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:04:03.913

开箱即用您可以仅为 CSV 输出更改时间戳输出格式（在 csv 中而不是 xml 中保存“在表中查看结果”）。XML 格式目前只支持毫秒。

如果在这种情况下可以接受 CSV 而不是 XML，您可以简单地在 jmeter.properties (%JMETER_HOME%/bin/jmeter.properties) 中设置 1 个属性：

```
# Timestamp format - this only affects CSV output files
# legitimate values: none, ms, or a format suitable for SimpleDateFormat
#jmeter.save.saveservice.timestamp_format=ms
jmeter.save.saveservice.timestamp_format=yyyy/MM/dd HH:mm:ss.SSS 
```

或者，对于非 GUI 模式，提供与命令行选项相同的选项：

```
-Jjmeter.save.saveservice.timestamp_format="yyyy-MM-dd HH:mm:ss" 
```

如果您仍然需要 XML，您可能必须使用任何脚本处理生成的 jtl/xml，以将所有类 unix 时间戳转换为所需格式。
例如，对于 GMT 时间：

```
=(((X)/1000+((365*70+17)*86400))/86400)+2 
```

另请参阅[本文](http://wiki.apache.org/jmeter/LogAnalysis)以获取详细信息和可能的食谱。

# sqlite - blob 类型黑莓的数据类型不匹配

> ID：14478533
> 
> 赞同：0
> 
> 时间：2013-01-23T11:24:08.280
> 
> 标签：sqlite, blackberry, blob

我有一个例外，即这一行中的数据类型不匹配

byte[] _data = (byte[])row.getBlobBytes(1);

在表中我有第 2 列的类型是 BLOB。

```
public static UrlRsc getContentUrl(String name) {
        UrlRsc elementRsc = null;
        try {
            Statement statement = DB
                    .createStatement("SELECT  * FROM table where"
                            + " Name='"
                            + name + "'");
            statement.prepare();
            Cursor cursor = statement.getCursor();
            Row row;

            while (cursor.next()) {
                row = cursor.getRow();

                byte[]_data;
                _data = row.getBlobBytes(1);

            }
            statement.close();
            cursor.close();
        } catch (DatabaseException dbe) {
            System.out.println(dbe.toString());
        } catch (DataTypeException dte) {
            System.out.println(dte.toString());
        }
        return elementRsc;
    } 
```

谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:05:27.787

嗨，我正在使用以下代码将图像保存在我的本地数据库中，并且我成功了。我刚刚发布了我的 3 种方法

注意：当我将图像插入数据库时​​，我在字节数组中更改了该图像，然后只有我可以保存到该表中

1) 表创建 2) 表插入 3) 从表中检索图像

**联系人Image_table创建**

```
public ContactImageTableCreation(){
        try{
        Statement stmt=DATABASE.createStatement("create table if not exists 'ContactImage_table'(ID 'TEXT',image 'blob',NodeId 'TEXT')");
        stmt.prepare();
        stmt.execute();
        stmt.close();
        }catch(Exception e){
          System.out.println(e.getMessage());
        }
    } 
```

**将数据插入 ContactImage_table**

```
public void ContactImageTableInsertion(){
        try{
            Statement st=DATABASE.createStatement("insert into ContactImage_table (ID,Image,NodeId)values(?,?,?)");
            st.prepare();
            st.bind(1, "101");
            st.bind(2, BYTE_ARRY);
            st.bind(3,"103");
            st.execute();
            st.close();
        }catch (Exception e) {
            System.out.println(e.getMessage());
        }
    } 
```

**从 ContactImage_table 检索数据**

```
public ContactImageTableDataRetriving(){
        try{

         Statement st=DATABASE.createStatement("select * from ContactImage_table");
          st.prepare();
          Cursor c=st.getCursor();
          Row r;
          int i=0;
          while(c.next()){
              r=c.getRow();
              i++;

//          ContactImageObject is a wrapper class for data handling 

              contactImageObj=new ContactImageObject();
              contactImageObj.setId(r.getString(0));
              byte[] decoded=r.getBlobBytes(1);
              EncodedImage fullImage = EncodedImage.createEncodedImage(decoded, 0, decoded.length);
              Bitmap b=fullImage.getBitmap();
              contactImageObj.setImage(b);

//            System.out.println("Successfully retrived");
              if(i==0){
//                System.out.println("No Records");
              }
          } 
              st.close();

        }catch (Exception e) {
//          System.out.println(e.getMessage());
        }
    } 
```

只需使用此代码片段交叉检查您的代码，希望您能得到最好的解决

# android - 从收件箱中删除短信时出现奇怪的异常

> ID：14478534
> 
> 赞同：1
> 
> 时间：2013-01-23T11:24:09.340
> 
> 标签：android, sqlite, exception, sms

我正在编写一个项目来从收件箱中删除短信。大多数情况下它工作正常，但有时它会给出奇怪的异常。这是异常的堆栈跟踪：

```
01-23 16:41:20.016: E/AndroidRuntime(7328): FATAL EXCEPTION: main
01-23 16:41:20.016: E/AndroidRuntime(7328): android.database.sqlite.SQLiteException: error code 14: unable to open database file
01-23 16:41:20.016: E/AndroidRuntime(7328):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:190)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:146)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at android.content.ContentProviderProxy.delete(ContentProviderNative.java:503)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at android.content.ContentResolver.delete(ContentResolver.java:723)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at com.velosys.smsManager.Database.DatabaseHandlerRule.DeleteMessagesFromInbox(DatabaseHandlerRule.java:1441)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at com.velosys.smsManager.Database.DatabaseHandlerRule.deleteContactOnBasisOfTime(DatabaseHandlerRule.java:1375)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at com.velosys.smsManager.Activities.SplashActivity$2.run(SplashActivity.java:132)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at android.os.Handler.handleCallback(Handler.java:618)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at android.os.Handler.dispatchMessage(Handler.java:123)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at android.os.Looper.loop(SourceFile:351)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at android.app.ActivityThread.main(ActivityThread.java:3850)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at java.lang.reflect.Method.invokeNative(Native Method)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at java.lang.reflect.Method.invoke(Method.java:538)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:901)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:659)
01-23 16:41:20.016: E/AndroidRuntime(7328):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我从收件箱中删除短信并获得异常的行：

```
l_contentResolver.delete(deleteUri, "address = ?" +" AND "+"date = ?",
                    new String[] {PhoneNumber,String.valueOf(DateandTime)}); 
```

这是 deleteUri：

```
Uri deleteUri = Uri.parse("content://sms"); 
```

这是 l_contentResolver：

```
ContentResolver l_contentResolver = activity.getContentResolver(); 
```

我搜索了很多有关此异常的信息，但没有在我的代码中找出原因。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:53:44.933

我认为这不是您的代码中的问题。如果它仅在极少数情况下发生，则它是管理 SMS 的 ContentProvider 中的错误。

由于 SMS API 不是 Android API 的公共部分，我认为没有关于此问题的某种文档或将其标记为 Android 错误的地方。

也许稍后重试删除该消息。

# symfony - symfony 2 中的 Twig 相等 if..else 给出了两个结果

> ID：14478535
> 
> 赞同：1
> 
> 时间：2013-01-23T11:24:19.690
> 
> 标签：symfony, twig, equality, string-comparison

我将 Symfony2 与 Twig 一起使用，当试图确定应该是 div 的类时，Twig 说**所有 4 个类都处于活动状态**，即使在 if..else 子句中也是如此。重定向只有 1 个值。我检查了语法，我认为它是正确的，所以也许我遗漏了一些东西。

我的代码是正确的还是 Twig 比较有问题（平等或 if..else 子句）？

这是树枝代码：

```
{% if redirect == 'a' %}
    {% block classA 'active' %}
{% elseif redirect == 'b' %}
    {% block classB 'active' %}
{% elseif redirect == 'c' %}
    {% block classC 'active' %}
{% else %}
    {% block classD 'active' %}
{% endif %} 
```

和控制器代码：

```
[...]
$redirect = "a";

return $this->render('FrontendBundle:Default:delete.html.twig', array(
    'id' => $id,
    'redirect' => $redirect,
    'text' => $text)
); 
```

**已编辑。**

**解决方案**

我发现不可能在一个块之外使用 if 子句，因此解决方案继续使用每个类一个块。

我还认为更好的解决方案是使用动态名称块，但我读到这是不可能的。

最后我发现这个以不同的方式解决了我的问题：http: [//peter-hoffmann.com/2012/highlight-active-menu-item-with-twig-and-silex.html](http://peter-hoffmann.com/2012/highlight-active-menu-item-with-twig-and-silex.html)

亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-31T19:38:28.837

尽管这个问题很老，但我想澄清一些事情，因为没有提供真正的答案。

这里的根本问题是`block`在编译时`if`评估，而在运行时评估。这意味着总是定义块，不能有条件地定义块。这也是块不能有动态名称的原因。

使用问题中的模板，这不是问题：

类.html.twig：

```
{% if redirect == 'a' %}
    {% block classA %}active{% endblock %}
{% elseif redirect == 'b' %}
    {% block classB %}active{% endblock %}
{% elseif redirect == 'c' %}
    {% block classC %}active{% endblock %}
{% else %}
    {% block classD %}active{% endblock %}
{% endif %} 
```

如果我们渲染它，我们会得到“活跃”，即预期的输出。虽然定义了每个块，但由于`if`. 这个问题只有在我们有继承的情况下才会被发现。所以假设我们有以下父模板（我假设海报使用了类似的东西）：

父.html.twig：

```
{% block classA %}{% endblock %}
{% block classB %}{% endblock %}
{% block classC %}{% endblock %}
{% block classD %}{% endblock %} 
```

并更改我们的扩展模板以扩展它（还添加了 classE 用于演示目的）：

类.html.twig：

```
{% extends "parent.html.twig" %}

{% if redirect == 'a' %}
    {% block classA %}active{% endblock %}
{% elseif redirect == 'b' %}
    {% block classB %}active{% endblock %}
{% elseif redirect == 'c' %}
    {% block classC %}active{% endblock %}
{% else %}
    {% block classD %}active{% endblock %}
{% endif %}

{% block classE %}undefined{% endblock %} 
```

现在，如果我们渲染 classes.html.twig，我们会得到 'activeactiveactiveactive'。和之前一样，块都是用'active'定义的，但是父模板没有条件渲染，所以它们都显示出来了。块 'classE' 没有被渲染，因为它没有在父模板中定义。

要解决这个问题，需要从本质上交换`if`and`block`语句。

```
{% extends "parent.html.twig" %}

{% block classA %}
    {% if redirect == 'a' %}
        active
    {% endif %}
{% endblock %}
{% block classB %}
    {% if redirect != 'a' and redirect == 'b' %}
        active
    {% endif %}
{% endblock %}
{% block classC %}
    {% if redirect != 'a' and redirect != 'b' and redirect == 'c' %}
        active
    {% endif %}
{% endblock %}
{% block classD %}
    {% if redirect != 'a' and redirect != 'b' and redirect != 'c' %}
        active
    {% endif %}
{% endblock %} 
```

可悲的是，当我们这样做时，我们失去了 if/else 结构，所以我们必须编写更多的条件。为了解决这个问题，我们可以使用变量添加一个中间步骤。

```
{% extends "classes.html.twig" %}

{% if redirect == 'a' %}
    {% set render = 'a' %}
{% elseif redirect == 'b' %}
    {% set render = 'b' %}
{% elseif redirect == 'c' %}
    {% set render = 'c' %}
{% else %}
    {% set render = 'd' %}
{% endif %}

{% block classA %}
    {% if render == 'a' %}
        active
    {% endif %}
{% endblock %}
{% block classB %}
    {% if render == 'b' %}
        active
    {% endif %}
{% endblock %}
{% block classC %}
    {% if render == 'c' %}
        active
    {% endif %}
{% endblock %}
{% block classD %}
    {% if render == 'd' %}
        active
    {% endif %}
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:49:56.963

我不确定你是否对这种行为采取了最有效的方法，但无论如何，你的块不应该这样定义吗？

> {% block classA %}active{% endblock %}

# sql - 找出列的默认值 (Oracle)

> ID：14478541
> 
> 赞同：16
> 
> 时间：2013-01-23T11:24:45.537
> 
> 标签：sql, oracle, select, default

我想知道是否有一种方法可以通过简单的 select 语句找出某些列的默认值。尝试了几件事，例如：

```
SELECT * FROM all_tab_columns WHERE table_name = 'tablename' 
```

但我看不到那里的列的默认值。不，我不想使用 SQL Plus 之类的东西，我需要一个 SELECT，猜有一些表提供该信息？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T12:14:55.060

```
Select TABLE_NAME, COLUMN_NAME, DATA_DEFAULT
from DBA_TAB_COLUMNS
where TABLE_NAME = 'TABLE_NAME'; 
```

替换要查看其默认列数据的 Table_Name。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-23T11:29:44.660

试试下面的查询

```
Select * From USER_TAB_COLUMNS where TABLE_NAME ='Table Name' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-11T14:13:38.050

默认值位于 ALL_TAB_COLUMNS 的 DATA_DEFAULT 列中：

```
SELECT TABLE_NAME, COLUMN_NAME, DATA_DEFAULT 
  FROM ALL_TAB_COLUMNS
 WHERE TABLE_NAME = 'tablename' 
```

[2021-01-26] 编辑：请注意，“tablename”参数必须与真实表名的大小写匹配，因为它出现在 ALL_TAB_COLUMNS 上。更多时候它是大写的，所以可能是有用的使用`UPPER()`函数来确保它。

```
 WHERE TABLE_NAME = UPPER('tablename') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-10T14:18:08.053

上面的例子都没有对我有用，但是这个例子对我有用。关键部分是 table_name 的“上部”。也许特定于我团队的数据库，但如果您遇到困难，这应该可以

```
SELECT a.column_name "Column",
       a.data_default "Default"
FROM   all_tab_columns a
WHERE  a.table_name = Upper('tablename') 
```

# r - 如何阻止 prettyNum 将我的一行数据帧转换为字符向量

> ID：14478542
> 
> 赞同：1
> 
> 时间：2013-01-23T11:24:44.950
> 
> 标签：r, dataframe, implicit-conversion, xtable

我正在`prettyNum`结合使用`xtable`来制作漂亮的 LaTeX 表格。当我在`data.frame`. 但是当我只有一行时，它会失败，因为`prettyNum`将其转换`data.frame`为字符向量。

有没有类似于 " `drop = FALSE`" 的简单方法来保留`data.frame`from `prettyNum`？

```
df <- data.frame(a = 1, b ='a')
prettyDf <- prettyNum(df) 
class(prettyDf)
[1] "character" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T10:24:32.197

您可以使用两个基本选项：在使用 之前将输出转换为单行矩阵`xtable`，或者您可以使用`apply`转换为`prettyNum`.

这是一个最小的例子：

首先，一些样本数据。一排`data.frame`和三排`data.frame`：

```
df <- structure(
  list(V1 = 76491283764.9743, V2 = 29.12345678901, V3 = -7.1234, V4 = -100.1, 
       V5 = 1123), .Names = c("V1", "V2", "V3", "V4", "V5"), 
  row.names = c(NA, -1L), class = "data.frame")
df
#            V1       V2      V3     V4   V5
# 1 76491283765 29.12346 -7.1234 -100.1 1123

df2 <- rbind(df, df*2, df*3)
df2
#             V1       V2       V3     V4   V5
# 1  76491283765 29.12346  -7.1234 -100.1 1123
# 2 152982567530 58.24691 -14.2468 -200.2 2246
# 3 229473851295 87.37037 -21.3702 -300.3 3369 
```

在 3 行上使用`xtable`效果很好，***但与您在问题中所说的不同，它不保留`data.frame`. 它将输出转换为字符矩阵。***：

```
> class(prettyNum(df2, big.mark=","))
[1] "matrix"

> xtable(prettyNum(df2, big.mark=","), align = "rrrrrr")
% latex table generated in R 2.15.3 by xtable 1.7-1 package
% Fri Mar 22 15:46:08 2013
\begin{table}[ht]
\centering
\begin{tabular}{rrrrrr}
  \hline
 & V1 & V2 & V3 & V4 & V5 \\ 
  \hline
1 &  76,491,283,765 &        29.12346 &         -7.1234 &          -100.1 &           1,123 \\ 
  2 & 152,982,567,530 &        58.24691 &        -14.2468 &          -200.2 &           2,246 \\ 
  3 & 229,473,851,295 &        87.37037 &        -21.3702 &          -300.3 &           3,369 \\ 
   \hline
\end{tabular}
\end{table} 
```

在 1 行 data.frame 上尝试相同的操作会给我们一个错误，因为在“美化”你的数字的过程中，data.frame 变成了一个命名的字符向量，正如你已经发现的那样：

```
> xtable(prettyNum(df, big.mark = ","), align = "rrrrrr")
Error in UseMethod("xtable") : 
  no applicable method for 'xtable' applied to an object of class "character" 
```

用于`methods(xtable)`查看已为其`xtable`定义方法的对象类型。要查看特定方法（例如`xtable.data.frame`方法），请使用`xtable:::xtable.data.frame`. 从那里，如果您认为有必要，您可以学习如何编写自己的方法。

但是，在这种情况下，没有必要。只需尝试以下选项之一，注意它们之间的细微差别：

```
xtable(matrix(prettyNum(df, big.mark = ","), nrow = 1), align = "rrrrrr")
xtable(t(apply(df, 1, prettyNum, big.mark = ",")), align = "rrrrrr") 
```

这是一些示例输出：

![在此处输入图像描述](../Images/851e517cd5af031993d21883f7c49388.png)

# c++ - 如何检查两条线的交点？

> ID：14478543
> 
> 赞同：0
> 
> 时间：2013-01-23T11:24:47.430
> 
> 标签：c++, visual-c++, geometry

> **可能重复：**
> [找出两条线是否相交](https://stackoverflow.com/questions/14176776/find-out-if-2-lines-intersect)

如果将 2 行传递给一个函数，它如何推断它们是否相交？每条线都是 2 个对象的形式`CPoint`——所以我总共有 4 个点。以下是我想出的。它计算每条线的斜率和 Y 轴截距，并从中计算交点。然后它检查交点是否在线段上；如果是，则返回 false；如果否，即它们不相交，则返回 true。虽然，它显示了许多问题。有没有更简单、更有效的方法来做到这一点？

**注意：**我不太确定用于斜率和 Y 截距的数据类型。

```
bool CShortestPathFinderDoc::edgeTest(CPoint P,CPoint P2,CPoint E,CPoint E2)
{
 bool status=true;
 double m1,m2;  //slopes
     double b1,b2;     //y-intercepts
 double y,x;     //intersection point

 m1=((double)P.y-P2.y)/((double)P.x-P2.x);   
 m2=((double)E.y - E2.y)/( (double)E.x - E2.x);    

 if(m1 == m2)    //if lines are colinear
    return true;

 b1=P.y-(m1*P.x)                         // Get the..
 b2=E->y - (m2*E.x);            //    Y-intercepts.

 x=(b2-b1)/(m1-m2);
 y=m1*x + b1;         //x,y is the intersection point!!!

 if((x<P2.x && x>P.x))             //if intersection point lies on line!!!!!
  {
    if(P2.y > P.y)
        if(y<P2.y && y>P.y)
            status=false;
            if(P2.y < P.y)
        if(y<P.y && y>P2.y)
                status=false;       
  }

 return status;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:35:40.093

Wolfram 拥有您需要的一切，特别是[Line-Line Distance](http://mathworld.wolfram.com/Line-LineDistance.html)，即线之间的距离。如果线为零（+-epsilon），则它们相交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T13:11:52.120

[线段交点](http://en.wikipedia.org/wiki/Line_segment_intersection)是您要寻找的。也许您可以根据需要调整扫描线算法。

顺便说一句：在上面的代码片段中，为了确定两条二维线是否平行，您只需从输入点定义的向量计算标量积。

# javascript - ng-click 不工作 AngularJS 和 dataTables

> ID：14478544
> 
> 赞同：12
> 
> 时间：2013-01-23T11:24:48.983
> 
> 标签：javascript, jquery, angularjs, datatables

我为 AngularJS 编写了一个 dataTables 指令。它工作正常，除了我试图向行添加一个按钮，通过 ng-click 删除一行。

在我看来，问题的出现是因为表行现在不在范围内。

有人可以帮我解决这个问题。

jsFiddle 示例：http: [//jsfiddle.net/A5Zvh/7/](http://jsfiddle.net/A5Zvh/7/)

我的指令看起来像这样。

```
angular.module('DataTables', [])
.directive('datatable', function() {
    return {
        restrict: 'E',
        transclude: true,
        replace: true,
        require: 'ngModel',
        template: '<table></table>',
        link: function(scope, element, attrs, model) {
            var dataTable = null,
                options;

            var buttons = jQuery.parseJSON(attrs['buttons']) || null;

            options  = {
                    "bJQueryUI": false,
                    "sDom": "<'row-fluid'<'span4'l><'span8 filter' <'pull-right'T> <'pull-right'f>>r>t<'row-fluid'<'span6'i><'span6'p>>",
                    "sPaginationType": "bootstrap",
                    "oTableTools": {
                    }
                };

            if(_.has(attrs, 'datatableOptions')) {
                jQuery.extend(true, options, scope.$eval(attrs['datatableOptions']));
            }

            scope.$watch(attrs.ngModel, function(data) {
                if(data && _.size(data.aaData) > 0 && _.size(data.aoColumns) > 0) {

                    _.extend(options, scope.$eval(attrs.ngModel))
                    dataTable = $(element).dataTable(options);
                    dataTable.fnClearTable();
                    dataTable.fnAddData(data.aaData);
                }
            });
        }
    }
}) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-09-02T16:46:07.310

我正在使用[Angular-datatbles](http://l-lin.github.io/angular-datatables/#/welcome)，我正在尝试动态添加、编辑和删除指向 datatble 行的链接并在 ng-click 上显示模式；

这是我的情况的解决方案；

```
$scope.dtOptions.withOption('fnRowCallback',
     function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
        $compile(nRow)($scope);
     }); 
```

所有数据表绑定代码；

```
$scope.reloadData = function () {
    $scope.dtOptions.reloadData();
};

$scope.dtColumnDefs = [

    DTColumnDefBuilder.newColumnDef(2).renderWith(function (data, type, row) {
        var html = '<a href="" class="txt-color-blue pull-left" ng-click="editModal()"><i class="fa fa-pencil hidden-xs"></i> Edit</a>' +
                   '<a href="" class="txt-color-red padding-top-15" ng-click="removeModal()"><i class="fa fa-times hidden-xs"></i> Remove</a>';
        return html;
    })
];

$scope.dtColumns = [
    DTColumnBuilder.newColumn('name').withTitle('Name'),
    DTColumnBuilder.newColumn('type').withTitle('Type'),
    DTColumnBuilder.newColumn('id').withTitle(''),
];

$scope.dtOptions.withOption('fnRowCallback',
     function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
        $compile(nRow)($scope);
     }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-02T01:32:54.407

我通过遍历每个 td 并调用 $compile 解决了这个问题。使用数据表行回调函数。希望这可以帮助。

```
options.fnCreatedCell =  function (nTd, sData, oData, iRow, iCol) {
    $compile(nTd)($scope);
}

//or row

options.fnCreatedRow = function( nRow, aData, iDataIndex ) {
    $compile(nRow)($scope);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-06T20:11:41.900

控制器中的 delete 函数没有被调用，因为 AngularJS 不知道 DataTables 将这些元素插入到 DOM 中的任何内容，因此这些元素中的 ngClick 指令不会被编译和链接。所以改变：

```
dataTable.fnAddData(data.aaData); 
```

至

```
dataTable.fnAddData(data.aaData);
$compile(element)(scope); 
```

并注入 $compile 服务：

```
.directive('datatable', function () { 
```

至

```
.directive('datatable', function ($compile) { 
```

并且您的删除功能在 jsFiddle 中被破坏了，希望在您的实际项目中不是这种情况！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T19:32:29.780

你可能想看看 Zdam 在[这个 Google Groups 线程上的前几篇帖子](https://groups.google.com/forum/#!topic/angular/vM2DEMK_NMA)上的前几篇文章，尤其是他/她的两个链接的 jsFiddles。我基本上复制了它们，它们在基本水平上工作。我还没有尝试从点击一行开始采取一些行动。

我看到你实现了一个稍微不同的方法，重新创建`<table>`完全重新创建了 HTML 节点。不确定这是否会导致问题。

顺便说一句，在`scope.$watch`调用时，我必须确保第三个参数设置为 true，以便对返回的资源 $ 对象进行值比较（而不是引用比较）。不知道为什么你不需要那个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-18T10:53:04.287

fnCreatedCell 在 aoColumns 或 fnCreatedRow 中提供给 mRender

**1 )fnCreatedCell 是基于列的**

前任 ：

```
tableElement.dataTable({
                "bDestroy": true,
                oLanguage : {
                       sLengthMenu : '_MENU_ records per page'
                },
               aoColumnDefs: [
         {
               bSortable: false,
               aTargets: [ -1,-2,-3 ],
               "fnCreatedCell": function (nTd, sData, oData, iRow, iCol)         
                         {  
                            $compile(nTd)($scope)
                          }
          }
        ], 
```

**2 ) fnCreatedRow 是一个“顶级”回调**

```
tableElement.dataTable({
                "bDestroy": true,
                oLanguage : {
                       sLengthMenu : '_MENU_ records per page'
                },
        aoColumnDefs: [
        {
          bSortable: false,
          aTargets: [ -1,-2,-3 ]
         }
         ],
         "fnCreatedRow": function( nRow, aData, iDataIndex ){
                    compile(nRow)(scope);
            }, 
```

# html - 表格单元格中的输入框应在焦点上展开

> ID：14478549
> 
> 赞同：0
> 
> 时间：2013-01-23T11:25:07.437
> 
> 标签：html, css, html-table, z-index

我有一个表格，其中有许多输入框。我想做的是，当它获得焦点时，宽度会增加，类似于 Google Docs 电子表格编辑器中发生的情况。首先是代码

HTML：

```
<table class="borderbg">
<tr class="thead">
<th class="stylethLeft"><div id="blank"></div></th>
<th class="styleth">blah</th>
<th class="styleth">blah</th>
</tr>
<tr>
<td class="tdstyle_serial_number">1</td>
<td class="td_names" id="alpha"><input type="text"
class="styledinput" /></td>
 <td class="td_twochars" id="alpha"><input type="text"
  class="styledinput" /></td>
  </tr>
  </table> 
```

以及相关的 CSS

```
//Input Box
input.styledinput{
background:#FFF;
 border:0;
 margin:0;
 padding:0 1% 0 1%;
  width:98%;
 height:100%;
 font-size:12px;
  } 
 //Focus
 .styledinput:focus{
  border:2px solid #205081;
   width:250%;
  z-index:15;
   }
  //table class
  .borderbg{
   border:1px solid #989292;
    visibility: visible;
    border-left:none;
    border-top:none;
    border-collapse:collapse;

    padding:0;
    float:left;
    margin-top:0; 
    margin-left:0;
} 
```

此代码在某些地方可以正常工作，但扩展的输入框在收到焦点时不会与下一个单元格重叠，而是在它下方然后重新出现在该单元格的末尾。

注意：没有。列不固定，我认为 Z-index 值有问题。

我想要什么：http: [//imm.io/TOuB](http://imm.io/TOuB)
我得到了什么：http: [//imm.io/TOuf](http://imm.io/TOuf)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:35:09.663

请参阅此处的[**工作示例**](http://jsfiddle.net/akhurshid/w4q9J/)

**CSS：**

```
.search label{
    font-size:0.75em;
    font-weight:bold;
    color:#333;
    text-indent:-9999em;
    display:block;
    float:left;
}

.search input[type="text"]{
    text-indent:1px;
    padding:0 0 0 22px;
    width:0;
    height:22px;
    background:url(http://www.ian-thomas.net/examples/search-icon.png)2px 2px no-repeat, -webkit-linear-gradient(top, rgba(100,100,100,1) 0%, rgba(80,80,80,1) 10%, rgba(22,22,22,1)100%);
    background:url(http://www.ian-thomas.net/examples/search-icon.png)1px 2px no-repeat, -moz-linear-gradient(top, rgba(100,100,100,1) 0%, rgba(80,80,80,1) 10%, rgba(22,22,22,1)100%);
    border:1px solid #333;
    color:#999;
    line-height:20px;
    font-weight:bold;
    -moz-text-shadow:1px 1px 1px rgba(0,0,0,0.05);
    -webkit-text-shadow:1px 1px 1px rgba(0,0,0,0.05);
    text-shadow:1px 1px 1px rgba(0,0,0,0.05);
    -webkit-border-radius:6px;
    -webkit-box-shadow:1px 1px 0 rgba(0,0,0,0.125); 
    -webkit-transition:width 0.5s ease-in-out;
    -moz-border-radius:6px;
    -moz-box-shadow:1px 1px 0 rgba(0,0,0,0.125); 
    -moz-transition:width 0.5s ease-in-out;
    cursor:pointer;
}

.search input[type="text"]:focus{
    width:200px;
    outline:none;
    background:url(http://www.ian-thomas.net/examples/search-icon.png)2px 2px no-repeat, -webkit-linear-gradient(bottom,rgba(100,100,100,1) 0%, rgba(40,40,40,1) 2%, rgba(22,22,22,1)100%);
    background:url(http://www.ian-thomas.net/examples/search-icon.png)1px 2px no-repeat, -moz-linear-gradient(bottom,rgba(100,100,100,1) 0%, rgba(40,40,40,1) 2%, rgba(22,22,22,1)100%);
    -webkit-box-shadow:1px 1px 0 rgba(255,255,255,0.125);
    -moz-box-shadow:1px 1px 0 rgba(255,255,255,0.125);
    cursor:text;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:58:46.473

试试这个

```
 /*Input Box*/

  input.styledinput{
  background:#FFF;
  border:0;
  margin:0;
  padding:0 1% 0 1%;
  width:98%;
 height:100%;
  font-size:12px;
 } 

/*Focus*/

.styledinput:focus{
  border:2px solid #205081;
  width:250%;
  z-index:20;
 position:relative;
 }

/*table class*/

 .borderbg{
   border:1px solid #989292;
  visibility: visible;
  border-left:none;
  border-top:none;
  border-collapse:collapse;
  padding:0;
  float:left;
  margin-top:0; 
  margin-left:0;

}
</style> 
```

# mpi - 在 MPI 中，如何将“共享”数组的一部分传递给所有其他等级？

> ID：14478550
> 
> 赞同：1
> 
> 时间：2013-01-23T11:25:08.763
> 
> 标签：mpi, broadcast

我有一个包含一些数据数组的 MPI 程序。每个等级都需要所有数组来完成它的工作，但只能在数组的一部分上工作。在计算步骤之后，我需要每个等级将其计算的数组部分传达给所有其他等级。

**我如何有效地实现这一目标？**

在伪代码中，我会做这样的事情作为第一种方法：

```
if rank == 0: // only master rank
  initialise_data()
end if

MPI_Bcast(all_data,0) // from master to every rank

compute which part of the data to work on

for ( several steps ): // each rank
  execute_computation(part_of_data)

  for ( each rank ):
    MPI_Bcast(part_of_data, rank_number) // from every rank to every rank
  end for
end for 
```

缺点是广播的数量和等级一样多，即障碍。那么我将如何替换 MPI_Bcasts ？

**编辑：**我可能只是找到了一个提示......我正在寻找的是 MPI_Allgather 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T14:24:50.893

是的，您正在寻找`MPI_Allgather`. 请注意，这`recvcount`不是整个接收缓冲区的长度，而是应该从一个进程接收的数据量。类似地，in`MPI_Allgatherv` `recvcount[i]`是您希望从第 i 个进程接收的数据量。此外，`recvcount`应该等于（不小于）各自的`sendcount`. 我在我的实现（OpenMPI）上对其进行了测试，如果我试图接收更少的发送元素，我会`MPI_ERR_TRUNCATE`出错。

同样在一些罕见的情况下，我使用`MPI_Allreduce`了那个 puprose。例如，如果我们有以下数组：

```
process0: AA0000
process1: 0000BB
process2: 00CC00 
```

然后我们可以通过操作进行 Allreduce`MPI_SUM`并进入`AACCBB`所有进程。显然，同样的技巧可以用 1 代替 0`MPI_PROD`代替`MPI_SUM`.

# java - Google App Engine getCurrentUser() 返回 null

> ID：14478554
> 
> 赞同：1
> 
> 时间：2013-01-23T11:25:33.007
> 
> 标签：java, google-app-engine

我正在开发一个需要访问帐户中所有用户的应用程序。所有操作均使用管理帐户在 Google Apps for Business 帐户上完成。

一般的想法是在没有任何登录屏幕/URL 的情况下从仪表板访问我的应用程序并检索必要的数据（在这种情况下为用户）。那可能吗？

我不知道我是否必须设置 OAuth（我的应用程序部署在 apppot 上并添加到 GApps 帐户）——就像我之前所说的，我只想启动我的应用程序，它应该从当前登录的 GApps 用户那里获取登录凭据。

但是，获取当前用户返回 null。这是我的 servlet，带有获取当前用户的方法：

```
public class ExperimentalServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        UserService userService = UserServiceFactory.getUserService();
        User user = userService.getCurrentUser();
        resp.setContentType("text/plain");
        resp.getWriter().println("User: " + (user == null ? "<null>" : user.getNickname()));
    }

} 
```

appengine-web.xml

```
<?xml version="1.0" encoding="utf-8"?>
<appengine-web-app xmlns="http://appengine.google.com/ns/1.0">
    <application>name-of-my-application</application>
    <threadsafe>true</threadsafe>
    <version>1</version>
</appengine-web-app> 
```

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     version="2.5">

<servlet>
    <servlet-name>experimental</servlet-name>
    <servlet-class>my.app.domain.ExperimentalServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>experimental</servlet-name>
    <url-pattern>/experimental</url-pattern>
</servlet-mapping>

<welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>

</web-app> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T13:23:56.087

如果 getCurrentUser 返回 null，则没有用户登录。

在这种情况下，您可以自己编写代码以重定向到登录页面，也可以将您的应用配置为所有/某些 url 都需要登录。

然后 appengine 将自动将用户重定向到登录屏幕，并在成功登录后返回。

在您的 appengine 应用仪表板中，您可以配置允许哪些用户登录、所有用户或仅允许 Gapps 域中的用户登录。

如果您将其设置为您的 Gapps 域，并且您配置了应用程序中的所有 url 都需要身份验证，那么如果 Gapps 用户进入您的应用程序，他将自动登录，如果他没有登录他的 Gapps 帐户，登录屏幕将显示给用户。

这是如何配置安全网址的链接

[https://developers.google.com/appengine/docs/java/configyaml/appconfig_yaml#Secure_URLs](https://developers.google.com/appengine/docs/java/configyaml/appconfig_yaml#Secure_URLs)

# c# - 可排序格式的 DateTime.ParseExact 引发异常

> ID：14478556
> 
> 赞同：2
> 
> 时间：2013-01-23T11:25:40.187
> 
> 标签：c#, datetime

我需要将当前时间解析为可排序的 dateFormat，如下所述。这个 dateFormat 在应用程序的另一部分工作，我从服务器获取时间字符串，但是当我需要使用当前时间时，它给了我一个例外。请问有人有什么建议吗？

```
string dateFormat = "yyyy-MM-ddTHH:mm:ss.fffzzz";
updateBook.orderFrom = DateTime.ParseExact(DateTime.Now.ToString(), dateFormat, CultureInfo.InvariantCulture); 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:40:45.517

更好的你可以试试

```
var date = DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss.fffzzz") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:30:05.127

尝试

```
updateBook.orderFrom = DateTime.Now; 
```

# windows - 如何移动随机数量的具有相似名称的文件和文件夹？

> ID：14478559
> 
> 赞同：0
> 
> 时间：2013-01-23T11:25:48.953
> 
> 标签：windows, batch-file, vbscript

需要是一个简单的脚本，任何使用 XP/Vista/7 的人都可以运行（没有 PE 或 Powershell）。

我需要同时将随机数量的文件（例如 1-15）以及名称相似的文件夹（位于不同位置）移动到它们自己的文件夹中。30 个文件和 30 个文件夹可供选择：

```
C:\game\store\XMLs -> C:\game\mod\0.1.2\map\data  
map01_aaa.xml  
map02_bbb.xml  
map03_ccc.xml  
...  
map60_zzz.xml

C:\game\store\models -> C:\game\mod\0.1.2\sky\stuff  
01_aaa_map  
02_bbb_map  
03_ccc_map  
...  
60_zzz_map 
```

希望这是有道理的，如果不是，我会去睡觉，明天再试一次。我阅读了十几个与彻底移动随机文件有关的问题（例如[这个](https://stackoverflow.com/a/5552764/2003492)），几个小时的谷歌，阅读 robvanderwoude.com，我不是很有经验。如果有人对做什么、读什么有任何建议，或者可以举一个我可以完成的例子，我将不胜感激。

**编辑：**这是我到目前为止的代码，用jimhark的答案更新：

```
@ECHO OFF & setlocal ENABLEDELAYEDEXPANSION ENABLEEXTENSIONS
SET SrcCount=0
SET SrcMax=15
FOR %%F IN (C:\game\mod\store\XMLs\*.*) DO IF !SrcCount! LSS %SrcMax% (
SET /A SrcCount += 1
ECHO !SrcCount! COPY %F C:\game\mod\0.1.2\map\data\
COPY %%F C:\game\mod\0.1.2\map\data\
SET FNAME=%%~nF
XCOPY /s "C:\game\mod\store\models\!FNAME:~3!"  "C:\game\mod\0.1.2\sky\stuff\!FNAME:~3!\"
) 
```

它不是随机选择文件，即使使用 %RANDOM%%%15，它总是会移动前 8 个文件。移动文件夹的代码也不起作用，它只会移动文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:20:56.760

如果您发布您正在工作的 .bat 代码，这将非常有帮助。如果没有这个，我只能说，根据您链接到的代码，您可能需要添加以下内容：

首先在顶部附近添加：

```
setlocal ENABLEDELAYEDEXPANSION ENABLEEXTENSIONS 
```

然后（我没有重写旧代码，但最后的 2 行应该是你需要的）：

```
FOR %F IN (C:\temp\source\*.*) DO IF !SrcCount! LSS %SrcMax% (
    SET /A SrcCount += 1
    ECHO !SrcCount! COPY %F C:\temp\output
    COPY %F C:\temp\output

    rem ** Here are the new lines **

    SET FNAME=%%~nF
    XCOPY /s "C:\game\store\0.1.2\sky\stuff\!FNAME:~3!"  "C:\game\mod\0.1.2\sky\stuff\!FNAME:~3!\"
) 
```

### 更新 1

```
rem @ECHO OFF
setlocal ENABLEDELAYEDEXPANSION ENABLEEXTENSIONS
SET SrcCount=0
SET SrcMax=15

IF NOT EXIST C:\game\mod\0.1.2\map\data md C:\game\mod\0.1.2\map\data
IF NOT EXIST C:\game\mod\0.1.2\sky\stuff md C:\game\mod\0.1.2\sky\stuff

FOR %%F IN (C:\game\mod\store\XMLs\*.*) DO IF !SrcCount! LSS %SrcMax% (
  SET /A SrcCount += 1
  ECHO !SrcCount! COPY %%F C:\game\mod\0.1.2\map\data\
  COPY %%F C:\game\mod\0.1.2\map\data\
  SET FNAME=%%~nF
  ECHO XCOPY /s "C:\game\mod\store\models\!FNAME:~3!"  "C:\game\mod\0.1.2\sky\stuff\!FNAME:~3!\"
  XCOPY /s "C:\game\mod\store\models\!FNAME:~3!"  "C:\game\mod\0.1.2\sky\stuff\!FNAME:~3!\"
) 
```

这是我之前的文件系统：

```
C:\game>dir /s /b
C:\game\mod
C:\game\mod\store
C:\game\mod\store\models
C:\game\mod\store\XMLs
C:\game\mod\store\models\01_aaa
C:\game\mod\store\models\01_aaa\test.txt
C:\game\mod\store\XMLs\Map01_aaa.xml 
```

这是之后：

```
C:\game>dir /s /b
C:\game\mod
C:\game\mod\0.1.2
C:\game\mod\store
C:\game\mod\0.1.2\map
C:\game\mod\0.1.2\sky
C:\game\mod\0.1.2\map\data
C:\game\mod\0.1.2\map\data\Map01_aaa.xml
C:\game\mod\0.1.2\sky\stuff
C:\game\mod\0.1.2\sky\stuff\01_aaa
C:\game\mod\0.1.2\sky\stuff\01_aaa\test.txt
C:\game\mod\store\models
C:\game\mod\store\XMLs
C:\game\mod\store\models\01_aaa
C:\game\mod\store\models\01_aaa\test.txt
C:\game\mod\store\XMLs\Map01_aaa.xml 
```

这是输出：

```
D:\bat>docopy.bat

D:\bat>rem @ECHO OFF
D:\bat>setlocal ENABLEDELAYEDEXPANSION ENABLEEXTENSIONS
D:\bat>SET SrcCount=0
D:\bat>SET SrcMax=15
D:\bat>IF NOT EXIST C:\game\mod\0.1.2\map\data md C:\game\mod\0.1.2\map\data
D:\bat>IF NOT EXIST C:\game\mod\0.1.2\sky\stuff md C:\game\mod\0.1.2\sky\stuff

D:\bat>FOR %F IN (C:\game\mod\store\XMLs\*.*) DO IF !SrcCount! LSS 15 (
SET /A SrcCount += 1
 ECHO !SrcCount! COPY %F C:\game\mod\0.1.2\map\data\
 COPY %F C:\game\mod\0.1.2\map\data\
 SET FNAME=%~nF
 ECHO XCOPY /s "C:\game\mod\store\models\!FNAME:~3!"  "C:\game\mod\0.1.2\sky\stuff\!FNAME:~3!\"
 XCOPY /s "C:\game\mod\store\models\!FNAME:~3!"  "C:\game\mod\0.1.2\sky\stuff\!FNAME:~3!\"
)

D:\bat>IF !SrcCount! LSS 15 (
SET /A SrcCount += 1
 ECHO !SrcCount! COPY C:\game\mod\store\XMLs\Map01_aaa.xml C:\game\mod\0.1.2\map\data\
 COPY C:\game\mod\store\XMLs\Map01_aaa.xml C:\game\mod\0.1.2\map\data\
 SET FNAME=Map01_aaa
 ECHO XCOPY /s "C:\game\mod\store\models\!FNAME:~3!"  "C:\game\mod\0.1.2\sky\stuff\!FNAME:~3!\"
 XCOPY /s "C:\game\mod\store\models\!FNAME:~3!"  "C:\game\mod\0.1.2\sky\stuff\!FNAME:~3!\"
)

1 COPY C:\game\mod\store\XMLs\Map01_aaa.xml C:\game\mod\0.1.2\map\data\
        1 file(s) copied.
XCOPY /s "C:\game\mod\store\models\01_aaa"  "C:\game\mod\0.1.2\sky\stuff\01_aaa\"
C:\game\mod\store\models\01_aaa\test.txt
1 File(s) copied

D:\bat>c:

C:\game>dir /s /b 
```

该代码正在我的机器上运行。我不知道怎样才能提供更多帮助。

### 更新 2

> !FNAME:~3! 是什么意思？意味着，特别是~3？

这是一个子字符串操作，它删除了前三个字符。

我们从类似`Map01_aaa.xml`%%F 的内容开始：

```
SET FNAME=%%~nF 
```

仅提取文件名`Map01_aaa`. 然后：

```
!FNAME:~3! 
```

删除 的前 3 个字符`01_aaa`，您指出这是所需的目录名称。

```
C:\>set test=abcdef
c:\>echo !test:~3!
def

set /?

May also specify substrings for an expansion.

%PATH:~10,5%

would expand the PATH environment variable, and then use only the 5
characters that begin at the 11th (offset 10) character of the expanded
result. 
```

### 更新 3

> 我不好，文件夹名称实际上是 01_aaa_map 等等。

然后改变：

```
XCOPY /s "C:\game\mod\store\models\!FNAME:~3!"  "C:\game\mod\0.1.2\sky\stuff\!FNAME:~3!\" 
```

至：

```
XCOPY /s "C:\game\mod\store\models\!FNAME:~3!_map"  "C:\game\mod\0.1.2\sky\stuff\!FNAME:~3!_map\" 
```

# liferay - 将 Liferay 5.2 升级到 6.0 清单

> ID：14478562
> 
> 赞同：1
> 
> 时间：2013-01-23T11:26:04.193
> 
> 标签：liferay, upgrade, liferay-6

如上所述，我需要升级 Liferay（5.2->6.0） 到目前为止，正如我的研究（[1](http://docs.liferay.com/portal/6.0/official/liferay-administrator-guide-6.0.pdf "Liferay 管理员指南")、[2](https://stackoverflow.com/questions/9699776/liferay-theme-upgrade-from-5-2-to-6-0 "Liferay 主题从 5.2 升级到 6.0？")、[3](https://stackoverflow.com/questions/9193725/liferay-5-2-3-to-6-0-upgradation-steps-windows-tomcat-mysql "Liferay 5.2.3 到 6.0 升级步骤（Windows + Tomcat + MySql）")）所示，我需要：

1.  备份数据库和插件的文件系统（尤其是`portal*.properties`）。
2.  覆盖依赖jar
3.  部署新的 .war
4.  在属性中将权限算法设置为 5（因为 L-5.2 使用它，但是 L-6.0 使用 6）
5.  开始申请，
    *   查看数据库是否正确更新
    *   查看门户是否正常工作
6.  清理用户特定的权限
7.  在控制面板中将遗留权限算法转换为 6
8.  [迁移自定义主题](http://www.liferay.com/community/wiki/-/wiki/Main/Upgrade+Themes+from+5.2.x+to+6.0.x)。
9.  [将 EXT 升级到 EXT 插件（第 398 页）](http://docs.liferay.com/portal/6.0/official/liferay-administrator-guide-6.0.pdf "Liferay 管理员指南")

这是可以理解的，但我偶然发现了[这个线程（Missing FileEntryForm class）](https://stackoverflow.com/questions/12260262/using-fileentryform-after-upgrading-from-liferay-5-2-3-to-6-0 "从 Liferay 5.2.3 升级到 6.0 后使用 FileEntryForm")。有没有更多类似的变化？

另外，还有什么我想念的吗？

谢谢 ：）

# ruby - 从解析的 CSV 文件中清理电话号码

> ID：14478566
> 
> 赞同：-3
> 
> 时间：2013-01-23T11:26:17.477
> 
> 标签：ruby

我是红宝石新手。我正在尝试从 CSV 文件中解析电话号码，我使用以下代码进行了此操作。它工作正常。

```
require 'csv' 
csv_text = File.read('file.csv')
csv = CSV.parse(csv_text, :headers => true)
csv.each do |row|                                      
    puts "Home Phone: #{row['HomePhone']}"
end 
```

我想要的是通过以下方式清理 HomePhone。

1.  如果电话号码有 10 位数字，那很好，就这样打印出来。
2.  如果电话号码少于 10 位，则将无效号码打印为“0000000000”</li>
3.  如果电话号码有 11 位并且第一位是 1，则打印最后 10 位（删除前 1），否则为“0000000000”</li>

我不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:52:57.070

`length`您可以使用恰当命名的方法获取字符串的长度：

```
string = 'foobar'
string.length # => 6 
```

您可以使用以下命令检查字符串是否以另一个字符串开头`start_with?`：

```
string.start_with?('f') # => true 
```

您可以使用数组索引表示法（方括号）和范围对字符串中的单个字符进行切片。负索引从字符串末尾开始计数。所以要返回除第一个字符之外的所有字符：

```
string[1..-1] # => 'oobar' 
```

所以要做你所要求的，你可以结合这些

```
home_phone = row['HomePhone']
if home_phone.length == 10
  puts home_phone
elsif home_phone.length == 11 && home_phone.start_with?('1')
  puts home_phone[1..-1]
else
  puts '0000000000'
end 
```

请注意，此方法假定您的电话号码已经是数字字符串，您只需要检查它们的长度。如果您想更彻底地检查包含非数字的无效电话号码，例如`123z567890`，您可以考虑使用正则表达式方法：

```
if match = /^1?(?<number>\d{10})$/.match(row['HomePhone'])
  puts match[:number]
else
  puts '0000000000'
end 
```

此正则表达式匹配的组件是：

*   `^`- 字符串的开头
*   `1?`- 一个可选的`1`
*   `(?<number>\d{10})`- 10 位数字（即`\d{10}`）保存在一个名为的组中`number`
*   `$`- 字符串的结尾

Ruby 使用正斜杠来分隔正则表达式，并且该`match`方法返回一个对象，我们可以使用该对象来提取保存的 10 位数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:54:18.703

把它放到你的每个块中：

```
phone_number = row['HomePhone']
if phone_number.length == 10
  puts "Home Phone: #{row['HomePhone']}"
elsif (phone_number.length == 11 and x[0] == "1")
  phone_number.slice!(0)        # remove first character
  puts phone_number
else
  puts "0000000000" 
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:47:03.597

试试下面的代码

```
csv.each do |row|
   phone_number = row['HomePhone'].to_s
   if phone_number.length == 10
     puts "Home Phone: #{phone_number}"
   elsif phone_number.length == 11 && phone_number[0] == "1"
     puts "Home Phone: #{phone_number[1..10]}"
   else
     puts "Home Phone: 0000000000"
   end
end 
```

# c# - 不存储 EDM 关联

> ID：14478571
> 
> 赞同：1
> 
> 时间：2013-01-23T11:26:33.753
> 
> 标签：c#, database, entity-framework, sql-server-ce

只是在玩实体框架。

现在我有一个简单的数据库，包含实体

```
Person (Id, Name)
Profession (Id, Designation) 
```

它与 Id 有关联。

我想用这段代码以编程方式给一个人一个新的职业：

```
using (PersonDataModelContainer dmc = new PersonDataModelContainer())
{
    var pers = new Person() { Id = PersonId };
    dmc.Person.Attach(pers);
    var prof = new Profession() { Id = ProfessionId };
    dmc.Profession.Attach(prof);
    pers.Professions.Add(req);

    var result = dmc.SaveChanges();

    return (result > 0);
}; 
```

我对 EF 很陌生，所以它可能很简单。

效果是：什么也没发生，我在关联表中看不到任何新的关联。

如何从现有实体添加新关联？

有没有关于使用这个概念的好文档？

-edit- 在 bin\debug 文件夹中找到数据库的副本。它也不包含关联。但似乎每次我触发更新时都会写入该文件，如上面的代码所示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:38:53.813

似乎发现了问题：

在连接字符串中我有 |DataPath| 在运行时设置为副本。

在 Main 函数开始时将 DataPath 设置为实际路径，一切似乎都很好

这可以通过 AppDomain.CurrentDomain.SetData("DataDirectory", @"C:\myDB");

其中 C:\myDB 是 sdl 文件所在的路径。

目前我不知道在部署时该怎么做，也许只需注释掉该行就足够了，将部署路径作为数据库路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:28:24.923

这应该有效：

```
using (PersonDataModelContainer dmc = new PersonDataModelContainer())
{
    var pers = new Person() { Id = PersonId };
    var prof = new Profession() { Id = ProfessionId };
    pers.Professions.Add(prof);

    dmc.Persons.Add(pers);
    var result = dmc.SaveChanges();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T14:41:14.967

我猜你应该使用这个[SQL Compact, Identity Columns and Entity Framework](http://enigmadomain.wordpress.com/2010/01/06/sql-compact-identity-columns-and-entity-framework/)

```
 using (var con = new PersonDataModelContainer())
            {
                var pers = new Person() { Id = PersonId };

                int pId = 0;
                if (pers.PersonId > 0)
                {
                    pers = con.Persons.FirstOrDefault(c => c.PersonId == pers.PersonId);
                    pId = pers.pId;
                }
                else
                    pId = con.Users.NextId(c => c.PersonId) + 1;

                if (pers.UserId == 0)
                    con.Persons.AddObject(pers);
                con.SaveChanges();
                pId = Persons.PersonId;

                var prof = new Profession() { Id = ProfessionId, PersonId = pId };

                int profId = 0;
                if (prof.PersonId > 0)
                {
                    prof = con.Professions.FirstOrDefault(c => c.ProfessionId == prof.ProfessionId);
                    profId = prof.PersonId;
                }
                else
                    profId = con.Professions.NextId(c => c.ProfessionId) + 1;

                if (prof.ProfessionId == 0)
                    con.Professions.AddObject(prof);
                con.SaveChanges();
                prof.ProfessionId = profId;
            } 
```

# python - 更改 QLCD 数字的数字颜色

> ID：14478574
> 
> 赞同：8
> 
> 时间：2013-01-23T11:26:35.897
> 
> 标签：python, pyqt4

我想更改`QLCDNumber`Qt Designer 中的背景和数字颜色，我将在我的 Python 程序中使用该设计（GUI）。

有人说，那可以让我在 Qt-Designer 中添加样式表。

```
QLCDNumber{color:rgb(85, 85, 255);background-color:rgb(0, 170, 255);} 
```

对于背景颜色而不是数字颜色是成功的。

我如何尝试获得数字颜色

谢谢

* * *

我不能使用最后两个 setColor（用于浅色边框和深色边框）。我正在使用 pyuic4 工具从 Qt4 Designer 生成 python 代码（用于 GUI）。我将代码添加到我的python代码文件中（以.py而不是.ui结尾）如下

```
self.palette = self.withpalette.palette()
self.palette.setColor(QtGui.Palette.WindowText,QtGui.QColor(85,85,255))
self.palette.setColor(QtGui.Palette.Background,QtGui.QColor(0,170,255))
self.palette.setColor(QtGui.Palette.Light,QtGui.QColor(255,0,0))
self.palette.setColor(QtGui.Palette.Dark,QtGui.QColor(0,255,0))
self.withpalette.setPalette(self.palette) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T22:59:56.390

实际上，它有效。`QLCDNumber`，默认情况下，以“凸起”样式绘制数字。对于小尺寸，这些产生凸起效果的边框将主要覆盖数字，您将看不到正常颜色。如果你把它变大，它会显示：

![QLCD数字](../Images/d3471660df5ea97c8881a834645f676b.png)

如果您不想要这种“提升”效果，可以使用以下命令将其关闭[`setSegmentStyle`](http://doc.qt.digia.com/qt/qlcdnumber.html#segmentStyle-prop)：

```
lcd.setSegmentStyle(QtGui.QLCDNumber.Flat) 
```

![平面QLCD数](../Images/81465a8075dc3ae35b8c49855c8213e8.png)

另一方面，如果你想要“提升”效果但又想控制它，你需要通过[`QPalette`](http://doc.qt.digia.com/qt/qpalette.html). `QPalette.Light`并且`QPalette.Dark`是控制这些边界的两种颜色。

```
# get the palette
palette = lcd.palette()

# foreground color
palette.setColor(palette.WindowText, QtGui.QColor(85, 85, 255))
# background color
palette.setColor(palette.Background, QtGui.QColor(0, 170, 255))
# "light" border
palette.setColor(palette.Light, QtGui.QColor(255, 0, 0))
# "dark" border
palette.setColor(palette.Dark, QtGui.QColor(0, 255, 0))

# set the palette
lcd.setPalette(palette) 
```

![QLCDNumber 自定义 QPalette](../Images/8cb90ee04a9c0f1649799969adb48541.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-09T16:32:32.270

QtLCDNumber 的样式表

```
QLCDNumber{
  background-color: rgb(0, 0, 0);
  border: 2px solid rgb(113, 113, 113);
  border-width: 2px;
  border-radius: 10px;
  color: rgb(255, 255, 255);
} 
```

# jms - Java EE 6 在属性文件中提取 JMS 连接设置

> ID：14478575
> 
> 赞同：2
> 
> 时间：2013-01-23T11:26:41.117
> 
> 标签：jms

我有以下设置可以连接到我的异步基础架构：

```
@Resource(lookup = "java:/JmsXA")
private static ConnectionFactory connectionFactory;

@Resource(lookup = "java:/queue/myQueue")
private Queue notificationQueue; 
```

我想在外部属性文件中提取连接工厂和队列的名称值，以便于配置。所以有这样的东西：

```
@Resource(lookup = "${jms.connectionFactory}")
private static ConnectionFactory connectionFactory;

@Resource(lookup = "${jms.queue}")
private Queue notificationQueue; 
```

不幸的是，我找不到任何合适的机制来在 Java EE 中获得它。

# xml - 如何验证 Vala 中的模式

> ID：14478578
> 
> 赞同：1
> 
> 时间：2013-01-23T11:26:47.610
> 
> 标签：xml, xml-parsing, xsd, vala

我想将 xml 文件解析为 Xml.Doc 对象，并针对 Vala 中的模式文件对其进行验证。Vala 是否提供此功能？我搜索了[http://valadoc.org](http://valadoc.org)，但找不到任何东西。

我希望 Vala 中可以使用以下 C 函数：

1.  xmlSchemaParserCtxtPtr parser_ctxt = xmlSchemaNewDocParserCtxt(schema_doc);
2.  xmlSchemaPtr 模式 = xmlSchemaParse(parser_ctxt);
3.  xmlSchemaValidCtxtPtr valid_ctxt = xmlSchemaNewValidCtxt(schema);

我只能找到第三个，valadoc 中提到的 SchemaValidCtxt，但页面几乎是空白的。这是一个有效的可用类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T00:11:24.920

> 我想将 xml 文件解析为 Xml.Doc 对象，并针对 Vala 中的模式文件对其进行验证。Vala 是否提供此功能？我搜索了[http://valadoc.org](http://valadoc.org)，但找不到任何东西。

如果您在 libxml 中寻找与 C 函数等效的 Vala，您只需搜索[libxml-2.0.vapi](http://git.gnome.org/browse/vala/tree/vapi/libxml-2.0.vapi)并查找 cname。Valadoc.org 目前不允许您搜索 C 符号，尽管 AFAIK 计划了该功能。

> 我希望 Vala 中可以使用以下 C 函数：
> 
> 1.  xmlSchemaParserCtxtPtr parser_ctxt = xmlSchemaNewDocParserCtxt(schema_doc);
> 2.  xmlSchemaPtr 模式 = xmlSchemaParse(parser_ctxt);
> 3.  xmlSchemaValidCtxtPtr valid_ctxt = xmlSchemaNewValidCtxt(schema);

libxml-2.0 Vala 绑定非常不完整，没有人愿意使用它们，因为 C API 非常混乱。通常最终发生的事情是有人出现并需要特定的东西，所以他们添加它并提交补丁。显然，您是第一个需要支持 XML 模式的人。

xmlSchemaNewDocParserCtxt 绑定为[Xml.ParserCtxt.ParserCtxt.create_doc](http://valadoc.org/libxml-2.0/Xml.ParserCtxt.ParserCtxt.create_doc.html)。其他两个函数目前没有绑定，虽然绑定它们不是很困难。向 libxml-2.0 VAPI 添加类似这样的内容（完全未经测试）应该可以解决问题：

```
 [Compact]
    [CCode (cname = "xmlSchema", free_function = "xmlSchemaFree", cheader_filename = "libxml/xmlschemas.h")]
    public class Schema {
        [CCode (cname = "xmlSchemaDump", instance_pos = -1)]
        public void dump (GLib.FileStream output);
    }

    [Compact]
    [CCode (cname = "xmlSchemaParserCtxt", free_function = "xmlSchemaFreeParserCtxt", cheader_filename = "libxml/xmlschemas.h")]
    public class SchemaParserCtxt {
        [CCode (cname = "xmlSchemaNewParserCtxt")]
        public SchemaParserCtxt (string URL);
        [CCode (cname = "xmlSchemaNewDocParserCtxt")]
        public SchemaParserCtxt.from_doc (Xml.Doc doc);
        [CCode (cname = "xmlSchemaNewMemParserCtxt")]
        public SchemaParserCtxt.from_buffer (uint8[] buffer);
        [CCode (cname = "xmlSchemaParse")]
        public Xml.Schema parse ();
    }

    [Compact]
    [CCode (cname = "xmlSchemaValidCtxt", free_function = "xmlSchemaFreeValidCtxt", cheader_filename = "libxml/xmlschemas.h")]
    public class SchemaValidCtxt {
        public SchemaValidCtxt (Xml.Schema schema);
    } 
```

> 我只能找到第三个，valadoc 中提到的 SchemaValidCtxt，但页面几乎是空白的。这是一个有效的可用类吗？

它现在只是一个空壳——没有任何方法是绑定的。幸运的是，添加绑定非常容易。

# html - 行跨度和垂直对齐 CSS 表格中的顶部和中心

> ID：14478580
> 
> 赞同：0
> 
> 时间：2013-01-23T11:26:48.937
> 
> 标签：html, css

我已经对 CSS 表格进行了大量研究，并仅使用 CSS 创建了类似行跨度的效果，虽然我知道这是可能的，但到目前为止我没有发现任何东西可以证明如何实现我正在寻找的东西。我只想知道我的特定配置是否可以单独使用 CSS 而不使用传统表格，或者它是否需要 Javascript 来实现（我希望避免这种情况）。

我想要两列：左列有一行，它跨越表格的整个高度，其内容垂直居中，右列有两行——顶行很短并且垂直对齐到顶部，并且底行会很长，并且内容与中心垂直对齐。左列/行将有大量内容，拉伸最右列并使右列中的第二行居中成为可能。

我还想指出，我不是那些无理地害怕使用传统桌子的人之一，尽管看起来确实如此。不幸的是，我的项目出于其他原因需要 CSS 表。

下面是一个使用表格的示例的链接，展示了我想要实现的目标，以及到目前为止我提出的有缺陷的 CSS 表格。关键方面是右列两行的垂直对齐 - 目前标题通过Javascript与顶部对齐，但我想知道是否有办法使用CSS表格（并且不使用绝对定位，因为我希望标题的高度影响它下面的行）。右列底行内容的高度将是可变的和未确定的。

目标：

[http://jsfiddle.net/VCGAK/4/](http://jsfiddle.net/VCGAK/4/)

这就是我想出的全部：

[http://jsfiddle.net/5mvrg/](http://jsfiddle.net/5mvrg/)

CSS：

```
#thetable {
    display:table;
    width:100%;
}
#tablerow {
    display:table-row;
}
#main-content {
    border:1px solid #000;
    width: 40%;
    left:0;
    position:relative;
    display: table-cell;
    vertical-align:middle;
    padding-right:25px;
    z-index:1000;
    text-align:center;
}
#titlediv {
    border:1px solid #000;
}
#main-sidebar {
    border:1px solid #000;
    width: 60%;
    vertical-align:middle;
    display: table-cell;
    height: 100%;
    position:relative;
    padding-right: 15px;
    margin:0px auto;
    z-index:1000;
} 
```

HTML：

```
<div id="thetable">
    <div id="tablerow">
        <div id="main-content" <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
        </div>
        <div id="main-sidebar">
            <div id="titlediv">Title is currently aligned to top via Javascript</div>Lots o' Details
            <br>
            <hr>Lots o' Details
            <br>
            <hr>Lots o' Details
            <br>
            <hr>
        </div>
    </div> 
```

虽然[这个答案](https://stackoverflow.com/questions/2611083/css-equivalent-of-table-rowspan-with-fluid-height)有助于演示如何实现行跨度，但我无法对其进行定制以使这种类型的垂直对齐工作。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:50:49.850

好的，现在明白了：

HTML 代码：

```
<div id="thetable">
    <div id="tablerow">
        <div id="main-content" <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
            <p>LALALALALA</p>
        </div>
        <div id="main-sidebar">
            <div id="titlediv">Title is currently aligned to top via Javascript</div>
            <div id="contentdiv">
            Lots o' Details
            <br>
            <hr>Lots o' Details
            <br>
            <hr>Lots o' Details
            <br>
            <hr>
            </div>
        </div>
    </div> 
```

代码：

```
body, td, th {
    font-family: Verdana, Geneva, sans-serif;
    font-size: 24px;
}
body {
    background-color:#652739;
    color:#CCC;
}
#thetable {
    width:90%;
    max-width:1180px;
    min-width:750px;
    position:relative;
    margin:0px auto;
}
#thetable, #thetable tr td {
    border:1px solid #000;
}
#leftcell {
    width:40%;
    text-align:center;
}
#titlecell {
    padding-left:50px;
    width:60%;
    vertical-align:top;
    height:200px;
}
#detailscell {
    padding-left:80px;
    width:60%;
    padding-right:15px;
    vertical-align:middle;
    height:300px;
} 
```

我也更新了你[的 jsfiddle](http://jsfiddle.net/5mvrg/2/) ...

希望有所帮助。

# backbone.js - 页面刷新或页面加载时主干 el 未定义

> ID：14478581
> 
> 赞同：0
> 
> 时间：2013-01-23T11:26:52.343
> 
> 标签：backbone.js, backbone-views

为什么在页面刷新或页面加载时 el 未定义？是因为 el 不存在吗？

```
class ListView extends Backbone.View

    className: 'channels-list'
    el: '#main'

    initialize: ->
        console.log @el
        # undefined 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:09:31.850

元素需要是标签名称或已存在于 DOM 中的元素。创建新视图时，将[`_ensureElement`调用该函数](http://backbonejs.org/docs/backbone.html)：

```
// Ensure that the View has a DOM element to render into.
// If `this.el` is a string, pass it through `$()`, take the first
// matching element, and re-assign it to `el`. Otherwise, create
// an element from the `id`, `className` and `tagName` properties.
_ensureElement: function() {
     //...
} 
```

为避免这种情况，请将 script 标签放在元素标签下方或等待文档加载事件，例如使用 jQuery：

```
jQuery ->
    class ListView extends Backbone.View
        className: 'channels-list'
        el: '#main'
        initialize: ->
            console.log @el 
```

或者，正如 Vitaliy 建议的那样，`.el`在`initialize`函数中休息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:08:06.903

确切地。如果你定义`el`它应该在 DOM 结构中可用

如果元素已经存在于 DOM 中，则可以在`initialize`方法内部再次[设置元素：](http://backbonejs.org/#View-setElement)

```
@setElement $('#main') 
```

# loops - 如何在VM中访问循环中的下一个元素

> ID：14478589
> 
> 赞同：0
> 
> 时间：2013-01-23T11:27:08.410
> 
> 标签：loops, for-loop, foreach, velocity

我需要访问下一个元素`foreach`来比较一些值。

在 JSP 中，我添加了一些虚拟元素，并像这样循环；

```
for(int i=0; i<list.size() - 1; i++) {
    MyClass element = list.get(i);
    MyClass nextElement = list.get(i+1);

    if(element.getSomeValue() > nextElement.getSomeValue())
        doSome();
        ... 
```

但据我所知，在 VM 中，我无法通过索引获取元素。如果有某种方法可以访问下一个元素，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:30:59.097

您的 Velocity 模板（.vm 文件）可以访问放置在[Context](http://velocity.apache.org/engine/releases/velocity-1.7/developer-guide.html#The_Context)中的任何 Java 对象。在您的支持 Java 类或 Velocity servlet 中，将您的列表放入上下文中：

```
context.put("list", myList); 
```

然后在您的 Velocity 模板中，您可以引用它，`$list`并且可以通过 using`$list.get(i)`等调用方法。请注意，与 JSP 不同，您不能将纯 Java 代码放入 Velocity 模板中，您必须使用[VTL](http://velocity.apache.org/engine/devel/user-guide.html#Loops)。

# javascript - Javascript原型混淆 - 正确方法

> ID：14478591
> 
> 赞同：2
> 
> 时间：2013-01-23T11:27:13.387
> 
> 标签：javascript, prototype

我正在使用原型创建一个 Javascript“类”。我不明白为什么第一个/第二个块不起作用，而第三个块会起作用。对于第一个/第二个块，我得到：“对象＃没有方法'验证'”。为什么要这样做，并且块 3 是正确的方法吗？

**--编辑** 我已经在 Chrome/FF 中测试过这个

**--Edit2** 如果我调用测试原型： var test = new Test();

并在登录原型中调用测试变量它将起作用....

**区块 1**

```
    功能测试（）{
        this.init();
    }

    Test.prototype.init = function(){
        $(".login").click(this.login);
    };

    Test.prototype.login = 函数（事件）{
        event.preventDefault();

        this.validate();

        console.log("登录");
    };

    Test.prototype.validate = function(){
        console.log("验证");
    };

新测试（）；

```

**第 2 座**

```
    功能测试（）{
        this.init();
    }

    Test.prototype.init = function(){
        $(".login").click(this.login);
    };

    Test.prototype.login = 函数（事件）{
        变种自我=这个；
        event.preventDefault();

        self.validate();

        console.log("登录");
    };

    Test.prototype.validate = function(){
        console.log("验证");
    };

    新测试（）；

```

**区块 3**

```
    功能测试（）{

    if(!(this instanceof LoginController)){
        返回新的登录控制器（）；
    }

        自我=这个；

        this.init();
    }

    Test.prototype.init = function(){
        $(".login").click(this.login);
    };

    Test.prototype.login = 函数（事件）{
        event.preventDefault();

        self.validate();

        console.log("登录");
    };

    Test.prototype.validate = function(){
        console.log("验证");
    };

    新测试（）；

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:44:39.523

```
Test.prototype.init = function(){
  $(".login").click(this.login);
}; 
```

在这里，您将附加`this.login`为事件处理程序。通过这种方式，该函数将由`this`jquery 将其值重新分配给触发事件的元素。

要保留对`this`您实际想要的值的引用，请尝试：

```
Test.prototype.init = function(){
  var self = this;
  $(".login").click(function (evt) {
     return self.login(evt);
  });
}; 
```

或用于实现的浏览器[`bind`](https://developer.mozilla.org/docs/JavaScript/Reference/Global_Objects/Function/bind)：

```
Test.prototype.init = function(){
  $(".login").click(this.login.bind(this));
}; 
```

或[`jQuery.proxy`](http://api.jquery.com/jQuery.proxy/)，其作用与 相同`bind`：

```
Test.prototype.init = function(){
  $(".login").click($.proxy(this.login, this));
}; 
```

演示：http: [//jsbin.com/ilejiw/1/](http://jsbin.com/ilejiw/1/)

* * *

**更新**：不，第三种变体不是正确的方法，因为每个实例`Test`都会覆盖相同的全局`self`变量。所以`self`会指向最后一个实例`Test`（只要它没有被其他东西覆盖）。

# c++ - 如何在 Code::Blocks 的新类中使用字符串？

> ID：14478594
> 
> 赞同：0
> 
> 时间：2013-01-23T11:27:20.773
> 
> 标签：c++, class, codeblocks

我对 Code::Blocks 完全陌生，对我来说似乎很奇怪。我正在尝试在一个名为`myString`的类中定义一个名为的字符串，`myClass`但我无法定义一个类型的变量，`string`也无法`iostream`在我的类中调用。我需要它来使用`cout`and `cin`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:21:28.747

使用字符串的简单示例是...

```
 // ide-Code::Blocks 10.05
 //  test.cpp
#include<iostream>
#include<string>
using namespace std;
class myclass{
    public:
        void assign_String(){
        string myString;
        const char *str2 = "StRiNg assign()";
        cout<<"str2, C string is: "<<str2<<endl;
        myString.assign(str2);
        cout<<"\n Assign String is "<<myString<<"\n";
    }
};
int main()
{
    myclass mc;
    mc.assign_String();
    return 0;
} 
```

有关 std::string 的更多信息，请[在此处参考](http://www.cprogramming.com/tutorial/string.html)

编辑：-查看您的评论后，您可能会遇到链接错误。因此，要解决此问题，您必须创建一个新项目并向其添加文件（类）。无法链接没有 main() 函数的类...我做的例子在[这里](http://pastie.org/5838141)

# jquery - 动态创建按钮的 jQuery 点击绑定：整个 div 对点击做出反应

> ID：14478595
> 
> 赞同：0
> 
> 时间：2013-01-23T11:27:26.857
> 
> 标签：jquery, bind

## 我动态创建一个 DIV：

```
 shareVisual = '<div class="individual-share">' + '<input type="number" value="1" /> X ' + classname.val() + '@' + classcurrency.val() + ' ' + classprice.val() + ' per share ' + '<button type="button" class="remove-share">Remove</button></div>';
        listOfSharesBox.append(shareVisual); 
```

* * *

然后将绑定添加到父 div：

```
$("#list-of-shares").bind('click', '.remove-share', function(e) {
    $(e.target).closest("div").remove();
}) 
```

问题：当单击动态生成的 DIV 的任何部分时，div 会被删除。我只需要在单击按钮时才能使用它。我需要改变什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:28:50.260

使用[on](http://api.jquery.com/on/)， not `bind`，通过选择器进行委托：

```
$("#list-of-shares").on('click', '.remove-share', function(e) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:28:46.720

```
$("#list-of-shares").on('click', '.remove-share', function(e) {
    $(this).closest("div").remove();
}) 
```

# opengl-es - 将 OpenGL 代码从 ES 1.0 更改为 ES 2.0 后的错误

> ID：14478604
> 
> 赞同：1
> 
> 时间：2013-01-23T11:28:01.793
> 
> 标签：opengl-es, opengl-es-2.0, cocos2d-x

我在 cocos2d-x 中将代码从 ES 1.0 更改为 ES 2.0

**ES 1.0 版本中的代码**

```
const float DARK=30.0f;
int n = m_sGridSize.x * m_sGridSize.y;
glEnable(GL_CULL_FACE);
glDisableClientState(GL_COLOR_ARRAY);   
glVertexPointer(3, GL_FLOAT, 0, m_pVertices);
glTexCoordPointer(2, GL_FLOAT, 0, m_pTexCoordinates);
glDrawElements(GL_TRIANGLES, (GLsizei) n*6, GL_UNSIGNED_SHORT, m_pIndices);
glFrontFace(GL_CW);
glDisable(GL_TEXTURE_2D);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);
glColor4ub(255-(m_AnimationProgress*DARK), 255-(m_AnimationProgress*DARK), 255-(m_AnimationProgress*DARK), 255);
glDrawElements(GL_TRIANGLES, (GLsizei) n*6, GL_UNSIGNED_SHORT, m_pIndices);
glColor4f(255, 255, 255, 255);
glFrontFace(GL_CCW);
glDisable(GL_CULL_FACE);
glEnable(GL_TEXTURE_2D);
glEnableClientState(GL_TEXTURE_COORD_ARRAY);
glEnableClientState(GL_COLOR_ARRAY); 
```

**ES 2.0 版本中的代码**

```
const float DARK=30.0f;
m_pShaderProgram->use();
m_pShaderProgram->setUniformForModelViewProjectionMatrix();
int n = m_sGridSize.x * m_sGridSize.y;
glEnable(GL_CULL_FACE);
glDisableVertexAttribArray(kCCVertexAttrib_Color);
glVertexAttribPointer(kCCVertexAttrib_Position, 3, GL_FLOAT, GL_FALSE, 0, m_pVertices);
glVertexAttribPointer(kCCVertexAttrib_TexCoords, 2, GL_FLOAT, GL_FALSE, 0, m_pTexCoordinates);
glDrawElements(GL_TRIANGLES, (GLsizei) n*6, GL_UNSIGNED_SHORT, m_pIndices);
glFrontFace(GL_CW);
glDisable(GL_TEXTURE_2D);
glDisableVertexAttribArray(kCCVertexAttrib_TexCoords);
ccDrawColor4B(255-(m_AnimationProgress*DARK), 255-(m_AnimationProgress*DARK), 255-(m_AnimationProgress*DARK), 255);
glDrawElements(GL_TRIANGLES, (GLsizei) n*6, GL_UNSIGNED_SHORT, m_pIndices);
ccDrawColor4B(255, 255, 255, 255);
glFrontFace(GL_CCW);
glDisable(GL_CULL_FACE);
glEnable(GL_TEXTURE_2D);
glEnableVertexAttribArray(kCCVertexAttrib_TexCoords);
glEnableVertexAttribArray(kCCVertexAttrib_Color); 
```

**结果如下输出（XCode）**

```
Cocos2d: OpenGL error 0x0500 in /cocos2dx/sprite_nodes/CCSprite.cpp draw 616 
```

**我做错了什么？**我认为一切都很好，经过几次测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:06:27.317

在 OpenGL ES 1.1 中，片段的纹理映射（ES 1.1 中没有顶点纹理映射）分别使用`glEnable`和来打开和关闭。`glDisable`

在 OpenGL ES 2.0 中，片段纹理映射仅在将其编码到片段着色器中时才完成，因此无需启用或禁用它。我怀疑 GL_INVALID_ENUM 来自剩余`glEnable(GL_TEXTURE_2D);`和`glDisable(GL_TEXTURE_2D);`. 我猜你不止一次看到这个错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:53:57.833

0x0500 是“非法枚举”错误。[在此处检查错误代码](http://www.opengl.org/wiki/GL_Error_Codes)。

这很可能是指像 GL_CULL_FACE 或 GL_TRIANGLES 这样的枚举。请参阅 DL ES 参考，哪些可能在 2.0 中不可用，或者哪些在某些情况下不能使用。

# c# - 根据比较结果比较两个 IEnumerable 和 delete/insert

> ID：14478605
> 
> 赞同：0
> 
> 时间：2013-01-23T11:28:06.517
> 
> 标签：c#, .net, sql-server, sql-server-2008, ienumerable

我必须比较 UI 中的 IEnumerable 数据和 SQL Server 2008 中的 IEnumerable 数据，并且必须将新元素从 UI 插入/更新到 DB，并根据 UI 数据从 DB 中删除元素。

我在 DB 中有 Distribution_X_ListType 表为：

```
DistributionID ListTypeID EmployeeNumber DepartmentID LocationID
1              2          84528          NULL         NULL 
1              3          NULL           8051         NULL
1              5          NULL           NULL         319 
```

我在项目中有一个界面如下：

```
public interface IDistributionList : IEntity
    {
        string Name { get; set; }
        bool ActiveFlag { get; set; }
        ...........................
        ...........................
        IEnumerable<IDistributionListType> ListTypes { get; set; }        
    } 
```

另一个界面是：

```
public interface IDistributionListType
{
    int? DistributionID { get; set; }
    int ListTypeID { get; set; }
    int EmployeeNumber { get; set; }
    int DepartmentID { get; set; }
    int LocationID { get; set; }
} 
```

在另一个项目中，我有如下保存功能：

```
public int Save(IDistributionList distributionList)
        {
            SqlDataReader reader = null;            
            int rowsaffected = 0;
            try
            {
                sqlcommand = new SqlCommand("spGetDistributionListTypeByID", con);  //spGetDistributionListTypeByID - This SP returns all the members from Distribution_X_ListType table for the given distribution ID
                sqlcommand.CommandType = CommandType.StoredProcedure;
                sqlcommand.Parameters.AddWithValue("@Distribution_ID", distributionList.ID);

                reader = sqlcommand.ExecuteReader();

                while (reader.Read())
                {
                      ????Value Should be stored in an IDistributionListType variable,say IDistributionListTypeFromDB 
                }
                ????IDistributionListType from function parameter(Lets say from UI) should be compared with the above IDistributionListTypeFromDB data.
                ????Insert/Delete should be done in DB by comparing the data.
             }
         } 
```

让 IDistributionListType 的值来自 UI：

```
DistributionID ListTypeID EmployeeNumber DepartmentID LocationID
1              2          84528          NULL         NULL 
1              5          NULL           NULL         64 
```

让来自 DB 的 IDistributionListType 的值：

```
DistributionID ListTypeID EmployeeNumber DepartmentID LocationID
1              2          84528          NULL         NULL 
1              3          NULL           8051         NULL
1              5          NULL           NULL         319 
```

我需要使用 UI 中的数据更新数据库。我还有两个 SP：

```
spInsertUpdateDistributionListType - Insert/Update Distribution_X_ListType table  based on DistributionID and listtypeID
spDeleteDistributionListType - Delete Distribution_X_ListType table based on DistributionID and listtypeID 
```

不知道怎么打码？？？领域（在.net代码中提到）。任何人请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:37:13.603

您应该只使用像[实体框架](http://entityframework.codeplex.com/)这样的 O/R 映射器，它会为您处理这个问题。

# c# - 解析奇数json数组

> ID：14478606
> 
> 赞同：0
> 
> 时间：2013-01-23T11:28:09.543
> 
> 标签：c#, .net, json, serialization

我需要序列化的 json 数据是一个点数组，如下所示：

```
"coordinates":
        [
            [
                [
                    [6.64215,53.36364],
                    [6.64215,53.36364]
                ]
            ]
        ] 
```

但我不知道对象表示应该是什么样子。换句话说，我应该以什么方式构建我的课程？（C# 使用`System.Web.Script.Serialization.JavaScriptSerializer`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:36:26.407

```
var dict = new JavaScriptSerializer()
          .Deserialize<Dictionary<string,List<List<List<List<double>>>>>>(json);

double d01 = dict["coordinates"][0][0][0][0];
double d02 = dict["coordinates"][0][0][0][1]; 
```

:)))

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T21:08:51.827

正确的答案似乎是：

```
public double[][][][] coordinates { get; set; } 
```

谢谢您的帮助！

# html - 使用表格布局时错误的列宽：已修复

> ID：14478610
> 
> 赞同：0
> 
> 时间：2013-01-23T11:28:13.693
> 
> 标签：html, css, html-table

在我的[示例 jsfiddle 中](http://jsfiddle.net/jur4x/rKQrJ/2/)，我有两个 HTML 表。它们基本上是相同的——相同的课程，相同的内容，一切。唯一的区别是行的顺序。

```
<style>
.tbl-lay-fixed {table-layout:fixed}
</style>

<table class="tbl-lay-fixed" border="1" width="100%">
   <tr>
      <td width="5%">xxxx</td>
      <td width="95%">yyyyyyyyyy</td>
   </tr>
   <tr>
      <td colspan="2" width="100%">xxxx</td>
   </tr>
</table>

<table class="tbl-lay-fixed" border="1" width="100%">
   <tr>
      <td colspan="2" width="100%">xxxx</td>
   </tr>
   <tr>
      <td width="5%">xxxx</td>
      <td width="95%">yyyyyyyyyy</td>
   </tr>
</table> 
```

表号 1 显示正确 - 单元格的宽度正确。

表号 2 显示不正确 - 第二行有两列，witdh 分别设置为 5% 和 95%，但显示为 50% 50%。

![表格布局问题：已修复；](../Images/b6140491ce4630e74b85810eb5947eec.png)

哪里有问题？在所有浏览器中都是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:35:50.783

这似乎至少在 Firefox 中有效（将底部 TD colspan 更改为 20）

```
just remove "width="100%" <table class="tbl-lay-fixed" border="1" width="100%"> from the table class 
```

# python - 如何在 Vim 中将文件所有行的缩进级别后验加倍？

> ID：14478615
> 
> 赞同：2
> 
> 时间：2013-01-23T11:28:40.857
> 
> 标签：python, vim

我想将所有现有（！）Python文件中的缩进从2空格更改为4空格移位宽度。任何建议如何在 Vim 中执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T13:04:01.560

请注意，`:set ts=4 sw=4`如果您使用硬制表符（即`noexpandtab`），仅此一项就足够了，但我认为情况并非如此。但是，仍然可以通过临时设置来利用此功能`noet`：

```
:set noet | retab! | set ts=4 sw=4 et | retab 
```

这会将现有空格转换为制表符，更改每个制表符的空格数，并恢复为空格。请注意，这`retab`可能会影响文件中其他地方的空格序列。

也可以手动将每对前导空格替换为两倍：

```
:%s/^\(\(\s\{2}\)\+\)/\1\1/g 
```

不过，这种方法并不通用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T12:12:13.387

这不是解决您的问题的最佳解决方案，但对于一个文件，您可以重新缩进整个文件（如果您配置了缩进规则以符合您的喜好）：

`Shift`+ `V` `Shift`+`G` `=`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:37:26.967

如果您只使用了硬制表符（不与空格混合），请尝试在您的 vimrc 文件中将制表位和 shiftwidth 都更改为 4

还可以尝试查看[http://vim.wikia.com/wiki/Indenting_source_code](http://vim.wikia.com/wiki/Indenting_source_code)以获得更多关于缩进的帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T19:20:19.780

要将缩进级别加倍，可以使用命令

```
:%s/^\s*/&&/ 
```

# c# - 当 UDP 当前正在发送数据包时，您的程序可以通过 TCP 接收信息吗？

> ID：14478622
> 
> 赞同：1
> 
> 时间：2013-01-23T11:28:55.860
> 
> 标签：c#, tcp, udp

现在，我很想知道 - 如果我的程序通过 TCP 连接到服务器并且服务器向我的程序发送消息，但我同时发送 UDP 数据包，TCP 数据包会发送给我吗? 一切都在一个班级！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:30:41.990

**简短的回答 - 是的。** 您可以同时拥有多个连接，全部发送和接收；假设您有多个套接字。

您没有提及您的服务器必须处理的客户端数量，或者您正在处理发送/接收的数据。根据您的实现，可能还需要多个线程（正如 Dariusz Wawer 指出的那样，这不是必需的，但我提到它们是因为可以处理大量客户端的可扩展解决方案可能会使用线程）。

查看这篇关于 TCP 和 UDP 端口的帖子以获取更多信息： [TCP 和 UDP 端口解释](http://www.bleepingcomputer.com/tutorials/tcp-and-udp-ports-explained/)

可以在此处找到一个很好的示例 C# 教程：[C# 教程 - 简单线程 TCP 服务器](http://www.switchonthecode.com/tutorials/csharp-tutorial-simple-threaded-tcp-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:34:01.973

取决于您所说的“同时”是什么意思。通常答案是“是”，您可以有多个 TCP/IP 连接和多个 UDP 套接字，它们都同时发送和接收。

除非你*真的*担心延迟——几微秒就会给你带来麻烦。如果是这种情况，一个连接可能会干扰另一个连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T12:08:38.120

您的问题实际上是所有网络应用程序程序员必须了解和考虑的几个问题的边界。

首先：**从网络接收到的所有数据都存储在操作系统的内部缓冲区**中，等待读取。缓冲区不是无限的，因此如果等待的时间足够长，可能会丢失一些数据。通常写入的数据块是单个数据包，但并非总是如此。您永远无法假设在 TCP/IP 通信中可以读取多少数据。另一方面，在 UDP 中，您必须始终读取单个数据包，否则数据将丢失。您可以使用它`recvfrom`来读取 UDP 数据包，我建议使用它。

其次：**使用阻塞和非阻塞方法是**您的网络应用程序最重要的决策之一。网上有很多关于它的资料：[C-Unix Sockets - Non-blocking read](https://stackoverflow.com/questions/8107271/c-unix-sockets-non-blocking-read)，[blocking read vs non-blocking read的定义是什么？](https://stackoverflow.com/questions/5263143/what-is-the-definition-of-blocking-read-vs-non-blocking-read)或[非阻塞教程](http://www.kegel.com/dkftpbench/nonblocking.html)。

至于线程：**线程永远*不需要*编写多连接处理程序应用程序**。有时它们会简化您的代码，有时它们会使其运行得更快。有一些众所周知的使用线程的编程模式，例如在单独的线程中处理每个单独的连接。通常情况下，特别是对于没有经验的程序员来说，使用线程只会成为奇怪错误和头痛的根源。

我希望我的帖子能回答你的问题，并解决我在另一个答案下面的讨论。

# assembly - 存储数字时是否设置了辅助标志？

> ID：14478623
> 
> 赞同：1
> 
> 时间：2013-01-23T11:29:01.143
> 
> 标签：assembly, x86, flags, x86-16, mov

维基百科说：

`Auxiliary flag is set(AF=1) if there is a carry from low nibble to high nibble or a borrow from a high nibble to low nibble of the low order 8-bit of a 16-bit number.(for example, in BCD addition or subtraction.)`

这是否意味着当我这样做时： `MOV AL, 25F`

因为 25F 是 00100101 并且下半字节不够，所以设置了 AF？

还是仅在加法/减法期间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:32:40.760

[`mov`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/mov.html)不影响任何标志。

[`add`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/add.html)并[`sub`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/sub.html)做 set `AF`，但许多其他指令也是如此，例如[`adc`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/adc.html), [`cmp`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/cmp.html), [`cmpxchg`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/cmpxchg.html), [`dec`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/dec.html), [`inc`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/inc.html), [`sbb`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/sbb.html), [`neg`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/neg.html).

许多其他指令`AF`处于未定义状态，例如[`mul`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/mul.html), [`imul`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/imul.html), [`div`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/div.html), [`idiv`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/idiv.html), [`test`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/test.html), [`and`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/and.html), [`or`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/or.html), [`xor`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/xor.html), [`shr`](http://web.itu.edu.tr/kesgin/mul06/intel/instr/shr.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:49:57.443

您可以轻松地在调试器中尝试而不是猜测。或者您可以查看[参考资料](http://siyobik.info.gf/main/reference/instruction/MOV)，其中清楚地说明：

> 受影响的标志：无。

# ios - NSURL - 设置修改路径

> ID：14478624
> 
> 赞同：0
> 
> 时间：2013-01-23T11:29:06.440
> 
> 标签：ios, nsurl

我需要使用一个`NSURL`对象来访问同一主机上的不同资源。

这是我所做的：

```
#define MY_HOST @"my.server.eu"
NSURL *url = [[NSURL alloc] initWithScheme:@"http" host:MY_HOST path:@"/"]; 
```

现在我需要处理

*   [http://my.server.eu/path1](http://my.server.eu/path1)
*   [http://my.server.eu/path2](http://my.server.eu/path2)
*   [http://my.server.eu/path3](http://my.server.eu/path3)

如何修改`NSURL`对象的路径？
为什么我们不能简单地做`url.path = @"path1"`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:37:12.713

> 如何修改`NSURL`对象的路径？
> 
> 为什么我们不能简单地做`url.path = @"path1"`？

因为`NSURL`是一个不可变的对象，之后你不能改变它的属性。`NSMutableURL`不存在，但在许多人的愿望清单上。

为了实现您所追求的目标，`NSURL`恐怕您将不得不制作 3 个单独的对象。为此，您可以方便数组中的路径：

```
NSString *host = @"http://my.server.eu/";
NSArray *paths = @[@"path1", @"path2", @"path3"];

NSURL *path1 = [NSURL URLWithString:[NSString stringWithFormat:@"%@%@", host, path[0]]];
NSURL *path2 = [NSURL URLWithString:[NSString stringWithFormat:@"%@%@", host, path[1]]];
NSURL *path3 = [NSURL URLWithString:[NSString stringWithFormat:@"%@%@", host, path[2]]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:10:28.747

您应该按照自己的方式创建基本 URL，然后使用`+[NSURL URLWithString:relativeToURL:]`.

# wordpress - 将整个 wordpress 分期付款向下移动一个文件夹

> ID：14478633
> 
> 赞同：0
> 
> 时间：2013-01-23T11:29:33.780
> 
> 标签：wordpress, file-move

我一直在应该上线的同一个地方开发一个 wordpress 网站，只是在 /beta 文件夹中，以防止普通访问者访问它。现在它已经完成了，我需要通过将我在 /beta 文件夹中的整个 wordpress 分期付款移动到域的根目录中来实现它。

我第一次尝试时遇到的问题是所有内容都会自动链接回 /beta 文件夹，例如我的样式表链接到正确的位置但 /beta/ 文件夹包含在链接中，我似乎找不到在哪里改变这个。我已经尝试过 Yoast wordpress 移动教程，但这似乎是为完全不同的域制作的，而且这是在同一个域内。

那么，我将如何更改自动链接？它并不全部在 .htaccess 文件中，仅用于站点内永久链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:31:25.157

Wordpress Codex 对此有一个规范的文档，即[移动 WordPress](http://codex.wordpress.org/Moving_WordPress)。

无论您是从一个域移动到另一个域，还是在同一个域内，都无关紧要。这个过程总是一样的。

# html - iframe 中的 iframe 不会加载

> ID：14478640
> 
> 赞同：2
> 
> 时间：2013-01-23T11:30:07.240
> 
> 标签：html, iframe, web, cross-domain

我在跨域 iframe hack 中遇到了一些麻烦。

我的页面上有一个 iframe“if1”，其中包含另一个 iframe“if2”。

“顶部”页面在域 A 上运行。if1 的页面在域 B 上运行。if2 的页面在域 A 上运行。

我想要做的是：在 if1 中运行身份验证，将结果令牌作为哈希传递给 if2 的 url 并加载 if2。当加载 if1 的页面时，令牌已经通过身份验证，我只是添加了 if2 和已经生成的 url，如下所示：

```
<iframe name="if2" id="if2" src="http://example.com/testing#token=8927348962028" onload="javascript:alert('loaded');" onerror="javascript:alert('unable to load iframe');" ></iframe> 
```

现在， if2 根本不加载，它只是保持白色。我总是收到“无法加载 iframe”的警报。但这仅在 if1 嵌入“顶部”页面时发生。当我在浏览器的另一个选项卡中简单地加载 if1 的内容时，if2 会完美加载。

是否有一些政策可以阻止加载二级 iframe？还是我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T13:45:14.363

我找到了解决我的问题的方法。

如果您使用加载页面 B 的 iframe 加载页面 A 并在其中再次加载页面 A 的 iframe，则您有一个循环，导致页面 A 加载页面 B 等等。

在我的情况下，浏览器停止加载第二个 iframe（再次加载页面 A 的 iframe）。这似乎是防止这种循环的正常行为。

我只是在 if2 的 url 中添加了一个 ?innerframe=true 参数，并在设置该参数时阻止了 if1 加载。这样循环消失了，问题也消失了。

@Rune：感谢您的帮助，fiddle 的链接对解决这个问题非常有帮助。

# php - 如何在 yii 中制作一个简单的 webservice 应用程序？

> ID：14478642
> 
> 赞同：0
> 
> 时间：2013-01-23T11:30:24.793
> 
> 标签：php, yii

我想在 yii 中创建一个 web 服务应用程序。因为我是 yii 的新手，所以有人可以建议我该怎么做。如果我想通过 web 服务在我的应用程序中显示谷歌新闻，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:44:26.733

如果您正在寻找 SOAP Web 服务：

首先将[Web Service Action](http://www.yiiframework.com/doc/api/1.1/CWebServiceAction/)添加到您要提供服务的控制器中：

```
public function actions()
{
    return array(
        'api'=>array(
            'class'=>'CWebServiceAction',
        ),
    );
} 
```

然后你需要在控制器中标记你希望成为服务的函数，使用自定义 PHPDoc `@soap`，并在 PHPDoc 中定义你的服务的所有参数和返回类型，以便 Yii 可以生成正确的[WDSL](http://en.wikipedia.org/wiki/WSDL)：

```
/**
 * @param string the module
 * @return string the version
 * @soap
 */
public function getVersion($module)
{
    //...find the corresponding version
    return $version; // ie: v0.1.3
} 
```

来源：[专题：网络服务](http://www.yiiframework.com/doc/guide/1.1/en/topics.webservice)

如果您正在寻找 REST 服务。然后它涉及更多一点，因为 Yii 没有像 SOAP 那样的内置帮助器，但是[jwerner](http://www.yiiframework.com/user/147/) [写了一个详细的 wiki](http://www.yiiframework.com/wiki/175/how-to-create-a-rest-api)关于如何使用 Yii 创建一个 REST Api

# wpf - TemplateBinding 未传递正确的值

> ID：14478643
> 
> 赞同：0
> 
> 时间：2013-01-23T11:30:29.387
> 
> 标签：wpf, xaml, combobox, styles, templatebinding

在我的 WPF 应用程序中，我重新设计了 ComboBox。问题是我似乎无法正确应用 BorderThickness。我认为我做得对，但我必须遗漏一些东西，因为结果不是我所期望的（它始终保持为 1 的厚度）。

UserControl 中使用的 ComboBox（注意厚度为 3）：

```
<ComboBox DockPanel.Dock="Top" SelectedItem="{Binding CurrentAnalysisKey}" 
          ItemsSource="{Binding AnalysisKeys}" Height="25"
          BorderBrush="{StaticResource ListBoxBorderBrush}"
          BorderThickness="3"
          DisplayMemberPath="ReaffectedName" Margin="0,5" /> 
```

资源文件中定义的 ComboBox 样式：

```
<Style TargetType="{x:Type ComboBox}">
  <Setter Property="Foreground"
          Value="White" />
  <Setter Property="SnapsToDevicePixels"
          Value="true" />
  <Setter Property="BorderBrush"
          Value="{StaticResource BlackBorderBrush}" />
  <Setter Property="BorderThickness"
          Value="2" />
  <Setter Property="Template"
          Value="{DynamicResource ComboBoxTemplate}" />
</Style>

<Style d:IsControlPart="True"
       TargetType="{x:Type ComboBoxItem}">
  <Setter Property="Foreground"
          Value="White" />
  <Setter Property="SnapsToDevicePixels"
          Value="true" />
  <Setter Property="Template">
    <Setter.Value>
      <ControlTemplate TargetType="{x:Type ComboBoxItem}">
        <ControlTemplate.Resources>
          <Storyboard x:Key="HoverOn">

            <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                           Storyboard.TargetName="HoverRectangle"
                                           Storyboard.TargetProperty="(UIElement.Opacity)">
              <SplineDoubleKeyFrame KeyTime="00:00:00.1000000"
                                    Value="1" />
            </DoubleAnimationUsingKeyFrames>

          </Storyboard>
          <Storyboard x:Key="HoverOff">

            <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                           Storyboard.TargetName="HoverRectangle"
                                           Storyboard.TargetProperty="(UIElement.Opacity)">
              <SplineDoubleKeyFrame KeyTime="00:00:00.4000000"
                                    Value="0" />
            </DoubleAnimationUsingKeyFrames>

          </Storyboard>
          <Storyboard x:Key="SelectedOn">

            <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                           Storyboard.TargetName="SelectedRectangle"
                                           Storyboard.TargetProperty="(UIElement.Opacity)">
              <SplineDoubleKeyFrame KeyTime="00:00:00.1000000"
                                    Value="1" />
            </DoubleAnimationUsingKeyFrames>

          </Storyboard>
          <Storyboard x:Key="SelectedOff">

            <DoubleAnimationUsingKeyFrames BeginTime="00:00:00"
                                           Storyboard.TargetName="SelectedRectangle"
                                           Storyboard.TargetProperty="(UIElement.Opacity)">
              <SplineDoubleKeyFrame KeyTime="00:00:00.4000000"
                                    Value="0" />
            </DoubleAnimationUsingKeyFrames>

          </Storyboard>

        </ControlTemplate.Resources>
        <Grid SnapsToDevicePixels="true"
              Margin="1"
              IsHitTestVisible="True">
          <Rectangle x:Name="Background"
                     IsHitTestVisible="True"
                     Opacity="0.25"
                     Fill="{StaticResource NormalBrush}"
                     RadiusX="1"
                     RadiusY="1" />
          <Rectangle x:Name="HoverRectangle"
                     IsHitTestVisible="True"
                     Opacity="0"
                     Fill="{StaticResource NormalBrush}"
                     RadiusX="1"
                     RadiusY="1" />
          <Rectangle x:Name="SelectedRectangle"
                     IsHitTestVisible="False"
                     Opacity="0"
                     Fill="{StaticResource SelectedBackgroundBrush}"
                     RadiusX="1"
                     RadiusY="1" />
          <ContentPresenter Margin="5,2,0,2"
                            x:Name="contentPresenter"
                            VerticalAlignment="Center" />
          <Rectangle x:Name="FocusVisualElement"
                     Visibility="Collapsed"
                     Stroke="{StaticResource HoverShineBrush}"
                     StrokeThickness="1"
                     RadiusX="1"
                     RadiusY="1" />
        </Grid>
        <ControlTemplate.Triggers>
          <Trigger Property="IsHighlighted"
                   Value="true">
            <Trigger.ExitActions>
              <BeginStoryboard Storyboard="{StaticResource SelectedOff}"
                               x:Name="SelectedOff_BeginStoryboard" />
            </Trigger.ExitActions>
            <Trigger.EnterActions>
              <BeginStoryboard Storyboard="{StaticResource SelectedOn}"
                               x:Name="SelectedOn_BeginStoryboard" />
            </Trigger.EnterActions>

          </Trigger>
          <Trigger Property="IsMouseOver"
                   Value="True">
            <Trigger.ExitActions>
              <BeginStoryboard Storyboard="{StaticResource HoverOff}"
                               x:Name="HoverOff_BeginStoryboard" />
            </Trigger.ExitActions>
            <Trigger.EnterActions>
              <BeginStoryboard Storyboard="{StaticResource HoverOn}" />
            </Trigger.EnterActions>
          </Trigger>
          <Trigger Property="IsEnabled"
                   Value="false">
            <Setter Property="Foreground"
                    Value="{DynamicResource DisabledForegroundBrush}" />
          </Trigger>
        </ControlTemplate.Triggers>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style>

<Style x:Key="{x:Static ToolBar.ComboBoxStyleKey}"
       TargetType="{x:Type ComboBox}">
  <Setter Property="FontSize"
          Value="10" />
  <Setter Property="SnapsToDevicePixels"
          Value="true" />
  <Setter Property="Template"
          Value="{DynamicResource ComboBoxTemplate}" />
  <Setter Property="Foreground"
          Value="White" />
</Style> 
```

ComboBox 模板：（ThicknessConverter 用于将接收到的厚度吐出到调试窗口中）

```
<ControlTemplate x:Key="ComboBoxTemplate"
                 TargetType="{x:Type ComboBox}">
  <Grid x:Name="grid">
    <Grid.Resources>
      <converters:ComboBoxThicknessConverter x:Key="thicknessConv" />
    </Grid.Resources>
    <ToggleButton Template="{DynamicResource ComboBoxToggleButton}"
                  BorderThickness="{TemplateBinding BorderThickness}"
                  BorderBrush="{TemplateBinding BorderBrush}"
                  x:Name="ToggleButton"
                  Focusable="false"
                  IsChecked="{Binding Path=IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                  ClickMode="Press" />
    <ContentPresenter HorizontalAlignment="Left"
                      x:Name="ContentSite"
                      Margin="{TemplateBinding BorderThickness, Converter={StaticResource thicknessConv}}"
                      VerticalAlignment="Center"
                      Content="{TemplateBinding SelectedItem}"
                      ContentTemplate="{TemplateBinding ItemTemplate}"
                      ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                      IsHitTestVisible="False" />
    <Popup IsOpen="{TemplateBinding IsDropDownOpen}"
           Placement="Bottom"
           x:Name="Popup"
           Focusable="False"
           AllowsTransparency="True"
           PopupAnimation="Slide">
      <Grid MaxHeight="{TemplateBinding MaxDropDownHeight}"
            MinWidth="{TemplateBinding ActualWidth}"
            x:Name="DropDown"
            SnapsToDevicePixels="True">
        <Border x:Name="DropDownBorder"
                Background="{DynamicResource ControlBackgroundBrush}"
                CornerRadius="3" />
        <ScrollViewer Margin="4,6"
                      Style="{DynamicResource NuclearScrollViewer}"
                      SnapsToDevicePixels="True"
                      HorizontalScrollBarVisibility="Auto"
                      VerticalScrollBarVisibility="Auto"
                      CanContentScroll="True"
                      Foreground="{DynamicResource {x:Static SystemColors.ActiveCaptionTextBrushKey}}">
          <StackPanel IsItemsHost="True"
                      KeyboardNavigation.DirectionalNavigation="Contained" />
        </ScrollViewer>
      </Grid>
    </Popup>
  </Grid>
  <ControlTemplate.Triggers>
    <Trigger Property="HasItems"
             Value="false">
      <Setter Property="MinHeight"
              Value="95"
              TargetName="DropDownBorder" />
    </Trigger>
    <Trigger Property="IsEnabled"
             Value="false">
      <Setter Property="Foreground"
              Value="{DynamicResource DisabledForegroundBrush}" />
      <Setter Property="Opacity"
              TargetName="grid"
              Value="0.5" />
    </Trigger>
    <Trigger Property="IsGrouping"
             Value="true">
      <Setter Property="ScrollViewer.CanContentScroll"
              Value="false" />
    </Trigger>
    <Trigger Property="AllowsTransparency"
             SourceName="Popup"
             Value="true">
      <Setter Property="Margin"
              Value="0,2,0,0"
              TargetName="DropDownBorder" />
    </Trigger>
    <Trigger Property="local:Dragging.IsDragTarget"
             Value="True">
      <Setter Property="BorderBrush"
              Value="{StaticResource DragTargetBorderBrush}"
              TargetName="ToggleButton" />
    </Trigger>
  </ControlTemplate.Triggers>
</ControlTemplate> 
```

组合框切换按钮：

```
<ControlTemplate x:Key="ComboBoxToggleButton"
                 TargetType="{x:Type ToggleButton}">
  <Grid x:Name="grid">
    <Grid.Resources>
      <converters:SpecialThicknessConverter x:Key="cv2" />
    </Grid.Resources>
    <Grid.ColumnDefinitions>
      <ColumnDefinition />
      <ColumnDefinition Width="20" />
    </Grid.ColumnDefinitions>
    <Rectangle Grid.ColumnSpan="2"
               HorizontalAlignment="Stretch"
               x:Name="Rectangle"
               VerticalAlignment="Stretch"
               RadiusX="3"
               RadiusY="3"
               StrokeThickness="{TemplateBinding BorderThickness, Converter={StaticResource cv2}}"
               Fill="{DynamicResource LightBrush}"
               Stroke="{TemplateBinding BorderBrush}" />

    <Border Grid.Column="1"
            Margin="2"
            Background="{DynamicResource BorderBrush}"
            CornerRadius="3"
            x:Name="border" />
    <Border Grid.Column="1"
            Margin="2"
            Background="{DynamicResource HoverBrush}"
            CornerRadius="3"
            x:Name="HoverBorder"
            Opacity="0" />
    <Border Grid.Column="1"
            Margin="2"
            Background="{DynamicResource HoverShineBrush}"
            CornerRadius="3"
            x:Name="HoverShineBorder"
            Opacity="0" />
    <Path Grid.Column="1"
          HorizontalAlignment="Center"
          x:Name="Arrow"
          VerticalAlignment="Center"
          Fill="{x:Null}"
          Data="M0.5,0.5 L3,6.5 5.5,0.5"
          Stroke="{DynamicResource GlyphBrush}"
          Margin="5,0"
          Height="7"
          StrokeThickness="2"
          Stretch="Fill" />
    <Border Grid.Column="1"
            Margin="2"
            Background="{DynamicResource ShineBrush}"
            CornerRadius="3"
            x:Name="ShineBorder" />
  </Grid>
  <ControlTemplate.Triggers>
    <Trigger Property="IsMouseOver"
             Value="true">
      <Trigger.ExitActions>
        <BeginStoryboard Storyboard="{StaticResource HoverOff}"
                         x:Name="HoverOff_BeginStoryboard" />
      </Trigger.ExitActions>
      <Trigger.EnterActions>
        <BeginStoryboard Storyboard="{StaticResource HoverOn}" />
      </Trigger.EnterActions>
    </Trigger>
    <Trigger Property="IsChecked"
             Value="true" />
    <Trigger Property="IsEnabled"
             Value="False">
      <Setter Property="Foreground"
              Value="{DynamicResource DisabledForegroundBrush}" />
      <Setter Property="Stroke"
              TargetName="Arrow"
              Value="{DynamicResource DisabledForegroundBrush}" />
      <Setter Property="Background"
              TargetName="border"
              Value="{DynamicResource DisabledBorderBrush}" />
      <Setter Property="Opacity"
              TargetName="grid"
              Value="0.8" />
    </Trigger>
  </ControlTemplate.Triggers>
</ControlTemplate> 
```

其中一个厚度转换器用于为构成 ComboBox 右侧的按钮的边框和路径留出空间（20 像素）。两者都包括在下面：

```
public class ComboBoxThicknessConverter : IValueConverter
{
    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var oldT = (Thickness)value;
        //Debug.WriteLine("cbx templ thickness = {" + oldT.Left + ", " + oldT.Top + ", " + oldT.Right + ", " + oldT.Bottom + "}");
        return new Thickness(oldT.Left, oldT.Top, oldT.Right + 20, oldT.Bottom);
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
}

public class SpecialThicknessConverter : IValueConverter
{
    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var oldT = (Thickness)value;
        Debug.WriteLine("toggle btn thickness = {" + oldT.Left + ", " + oldT.Top + ", " + oldT.Right + ", " + oldT.Bottom + "}");
        return oldT;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

除非我在 ComboBoxToggleButton 内手动将 StrokeThickness 更改为硬编码值，否则我总是得到相同的厚度：1。

有什么想法我哪里出错了吗？据我了解，我正在将 ComboBox 中的 BorderThickness 沿着层次结构的每一级正确传递到 ComboBoxToggleButton 中的 Rectangle 中。但是，当我查看调试窗口时，我看到了 ComboBox 样式中设置器中使用的值，而不是声明 ComboBox 时使用的值。

提前致谢！

肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T13:59:59.807

TemplateBinding 与普通的 Binding 不同。它经过优化，可以接收特定类型的值并将其直接传递给相同类型的属性。Converters、StringFormat 等其他选项在 TemplateBinding 上不起作用，而且令人讨厌的是不会给出任何错误。如果您需要进行任何转换或尝试通过依赖内置类型转换来连接不同类型的属性，则需要使用普通的 Binding 和 RelativeSource TemplatedParent：

```
{Binding RelativeSource={RelativeSource TemplatedParent}, Path=BorderThickness, Converter={StaticResource cv2}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:31:27.213

`double`最后，问题是 Rectangle.Stroke （Shape.StrokeThickness 是 a ）和 Control.BorderThickness （这是一个 Thickness... 4 doubles）之间的类型差异。

添加了一个转换器并按照接受的答案中的建议使用了 TemplateBinding 并且它有效。

```
StrokeThickness="{Binding BorderThickness, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource rect2DoubleConv}}"

public class RectangleToDoubleConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        var oldT = (Thickness)value;
        return (oldT.Left + oldT.Top + oldT.Right + oldT.Bottom) / 4.0;
    }
    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# c++ - 指针转换是否昂贵？

> ID：14478647
> 
> 赞同：4
> 
> 时间：2013-01-23T11:30:38.380
> 
> 标签：c++, c, pointers

指针转换被认为是昂贵的吗？（例如，转换指针/地址需要多少 CPU 周期），尤其是当您必须非常频繁地执行此操作时，例如（只是显示频率范围的示例，我知道对于这种特殊情况有更好的方法） ：

```
unsigned long long *x;
/* fill data to x*/

for (int i = 0; i < 1000*1000*1000; i++)
{

    A[i]=foo((unsigned char*)x+i);

}; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T11:36:30.630

> （例如，转换指针/地址需要多少 CPU 周期）

在大多数机器代码语言中，只有一种“类型”的指针，因此在它们之间进行转换不需要任何成本。请记住，C++ 类型实际上只存在于编译时。

真正的问题是这种代码会破坏严格的别名规则。您可以在其他地方阅读更多有关此内容的信息，但基本上编译器将通过未定义的行为产生不正确的代码，或者被迫做出保守的假设，从而产生更慢的代码。（请注意，`char*`和朋友在某种程度上不受未定义行为部分的约束）

> 优化器通常必须在存在指针的情况下对变量做出保守的假设。例如，知道变量 x 的值为 5 的常量传播过程将无法在分配给另一个变量（例如，*y = 10）后继续使用此信息，因为 *y 可能是别名x。这可能是在像 y = &x 这样的赋值之后的情况。
> 
> 作为对 *y 赋值的结果，x 的值也会改变，因此将 x 为 5 的信息传播到 *y = 10 之后的语句可能是错误的（如果 *y 确实是 x 的别名）。但是，如果我们有关于指针的信息，常量传播过程可以进行如下查询：x 可以是 *y 的别名吗？然后，如果答案是否定的，则 x = 5 可以安全地传播。受别名影响的另一个优化是代码重新排序。如果编译器确定 x 不是 *y 的别名，则可以在赋值 *y = 10 之前移动使用或更改 x 值的代码，如果这将改进调度或允许执行更多循环优化。
> 
> 为了以可预测的方式启用此类优化，C 编程语言的 ISO 标准（包括其较新的 C99 版本，请参阅第 6.5 节第 7 节）规定，不同类型的指针引用相同的指针是非法的（有一些例外）内存位置。这条规则被称为“严格别名”，有时可以显着提高性能，[1] 但众所周知，它会破坏一些其他有效的代码。一些软件项目故意违反了 C99 标准的这一部分。例如，Python 2.x 这样做是为了实现引用计数，[2] 并且需要对 Python 3 中的基本对象结构进行更改以启用此优化。Linux 内核这样做是因为严格的别名会导致内联代码的优化出现问题。 [3] 在这种情况下，当使用 gcc 编译时，调用选项 -fno-strict-aliasing 以防止可能产生意外代码的不需要的优化。[编辑]

[http://en.wikipedia.org/wiki/Aliasing_(computing)#Conflicts_with_optimization](http://en.wikipedia.org/wiki/Aliasing_(computing)#Conflicts_with_optimization)

[什么是严格的别名规则？](https://stackoverflow.com/questions/98650/what-is-the-strict-aliasing-rule)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T11:59:10.380

在您可能遇到的任何架构上，所有指针类型都具有相同的表示形式，因此表示相同地址的不同指针类型之间的转换没有运行时成本。这适用于 C 中的所有指针转换。

在 C++ 中，一些指针转换是有代价的，而另一些则没有：

*   `reinterpret_cast`and `const_cast`（或等效的 C 样式转换，例如问题中的转换）和转换为或从`void*`将简单地重新解释指针值，而无需任何成本。
*   `static_cast`如果有多个基类，则指针到基类和指针到派生类之间的转换（隐式地，或使用或等效的 C 样式转换）可能需要向指针值添加固定偏移量。
*   `dynamic_cast`将做大量的工作来根据所指向对象的动态类型查找指针值。

从历史上看，一些体系结构（例如 PDP-10）对指针到字节和指针到字有不同的表示。那里的转换可能会有一些运行时成本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T11:37:30.773

```
unsigned long long *x;
/* fill data to x*/

for (int i = 0; i < 1000*1000*1000; i++)
{

    A[i]=foo((unsigned char*)x+i); // bad cast

} 
```

请记住，机器只知道内存地址、数据和代码。其他所有内容（例如类型等）只有编译器（帮助程序员）知道，并且执行所有指针运算，只有编译器知道每种类型的大小......等等。

在运行时，将一种指针类型转换为另一种指针类型不会浪费任何机器周期，因为转换不会在运行时发生。所有指针都被视为 4 字节长（在 32 位机器上），不多也不少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T11:51:36.480

这完全取决于您的底层硬件。

在*大多数*机器架构上，所有指针都是字节指针，字节指针和字节指针之间的转换是空操作。在*某些*架构上，指针转换在某些情况下可能需要额外的操作（例如，有些机器使用基于字的地址，将字指针转换为字节指针或反之亦然需要额外的操作）。

此外，这通常是一种不安全的技术，因为编译器无法对您正在执行的操作执行任何健全性检查，并且您最终可能会覆盖您没有预料到的数据。

# python - Jinja2 块嵌套问题

> ID：14478653
> 
> 赞同：0
> 
> 时间：2013-01-23T11:30:57.067
> 
> 标签：python, flask, jinja2

我在我的项目中使用[jinja2](http://jinja.pocoo.org/docs/)作为模板语言。这是简化的模板结构：

*base.html*：

```
{% block content %}{% endblock %}
{% block sidebar %}{% endblock %} 
```

*内容.html*：

```
{% extend 'base.html' %}

{% block content %}
    <div class="content">
        Content
        {% block sidebar %}
            <div class="sidebar">Sidebar</div>
        {% sidebar %}
    </div>
{% endblock %} 
```

*content.html*渲染的结果：

```
<div class="content">
    Content
    <div class="sidebar">Sidebar</div>
</div>
<div class="sidebar">Sidebar</div> 
```

如您所见，`sidebar`在 render 出现了两次`content.html`。

**问题：**

有没有办法避免出现`sidebar`在里面`content`，离开`{% block sidebar %}`里面`{% block content %}`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:33:29.083

我认为您的 content.html 模板无效-您清楚地将侧边栏相关内容定位在内容块内，因此它总是会出现在那里。此外，您的 base.html 似乎也无效，它应该看起来更像：

```
{% block content %}{% endblock %}
{% block sidebar %}{% endblock %} 
```

# c# - 处理 SkyBiometry API

> ID：14478658
> 
> 赞同：1
> 
> 时间：2013-01-23T11:31:09.147
> 
> 标签：c#, asp.net, asp.net-mvc-3, asp.net-mvc-4

我需要比较 2 张照片的相似度。例如儿子和父亲的照片，并返回他们相似度的百分比。我用于 SkyBiometry.Client.FC。API 返回的结果有问题。在所有识别的情况下，我得到 60%-68% 的相似度（阈值）。最后我尝试比较两张相同的图片并得到 54% 的结果。我很困惑。我做错了什么？这是我的代码：

```
var client = new FCClient("my client id", "my client secret");

            var path = Server.MapPath("~/Content/Upload/1");

            var ids = new List<string> { "my client id" };
            var urls = new List<string>();

            Stream firstPicStream = System.IO.File.OpenRead(Path.Combine(path, "me.jpg"));
            Stream secondPicStream = System.IO.File.OpenRead(Path.Combine(path, "me.jpg"));

            var result1 = client.Faces.EndDetect(client.Faces.BeginDetect(null, new Stream[] { firstPicStream }, Detector.Aggressive, Attributes.Default, null, null));
            var result2 = client.Faces.EndDetect(client.Faces.BeginDetect(null, new Stream[] { secondPicStream }, Detector.Aggressive, Attributes.Default, null, null));

            urls.Add(result1.Photos[0].Url);
            urls.Add(result2.Photos[0].Url);

            var tags1 = result1.Photos[0].Tags;
            var tags2 = result2.Photos[0].Tags;
            var tagsIds = tags1.Select(tag => tag.TagId).ToList();
            tagsIds.AddRange(tags2.Select(tag => tag.TagId));

            var tagSaveResponce = client.Tags.EndSave(client.Tags.BeginSave(tagsIds, "My Namespace", "label", null, null));

            var recognizeResult = client.Faces.EndRecognize(client.Faces.BeginRecognize(ids, urls, null, "My Namespace", Detector.Aggressive, Attributes.Default, null, null)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:12:45.610

您是否在标签/保存后为您保存新标签的用户调用 faces/train ？因为如果您不这样做，您将仅使用旧用户标签执行识别。另请注意，用户 ID 不能有空格，请确保检查 FCResponse.Status 属性以查找可能的错误。

# asp.net - ASP.Net：我如何找到这个错误？

> ID：14478659
> 
> 赞同：0
> 
> 时间：2013-01-23T11:31:09.683
> 
> 标签：asp.net

当我尝试运行 ASP.Net 页面时出现以下错误。只是在开发过程中突然出现，不知道是什么原因。

“发生溢出异常。对于 Int32，值太大或太小。”

调试器中断的行完全没有帮助

```
Dim ApproxDate As TextBox = FormView1.FindControl("CurrentResultDateTextBox") 
```

此行发生错误是因为在 FormView1 上调用 findControl 会导致它进行数据绑定（执行 SQL 查询以返回数据集）。我假设错误位于对象数据源之一或页面上的网格视图之一中，但调试器不会告诉我在哪里。大部分页面数据源都是以声明方式绑定的（在源中的 ASP 标签中指定）

按 F11 跳过异常会显示以下内容：

“13712696100373320501120906 不是 Int32 的有效值。”

此处显示的值是页面使用的主 SQL 表的主键。大约有 10 个数据源使用该字段。同样，没有迹象表明错误发生在哪里。

那么如何调试这样的错误呢？有我可以运行的命令吗？IIS 错误日志？捕获错误的第 3 方软件？我会拿走我能得到的任何东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:20:12.090

设法找到问题。诀窍是首先在 IDE/Debug 设置中禁用“只是我的代码”。然后您可以在调用堆栈上看到系统函数，虽然没有源代码，但您可以单击这些函数将堆栈展开到 Web 控件之一（在本例中为 ListControl.PerformSelect 函数）

如果您在调试窗口中检查自动变量，它将显示错误中涉及的控件。从那里我在 ID 属性上添加了一个监视以查看它是哪个控件，查找了提供它的数据源，并发现了错误。

您还可以将堆栈展开到 ObjectDataSourceView，查看 dataTable 属性，然后调用 GetErrors() 来查看问题。这将返回一个标记错误的数据行数组；属性 RowError 将显示任何给定行的错误消息。

# android - 当我尝试在 TextureRegion 中使用 x,y 偏移时，andengine 出现黑屏

> ID：14478660
> 
> 赞同：1
> 
> 时间：2013-01-23T11:31:13.760
> 
> 标签：android, andengine, textures

我正在使用 GLES2。当我创建我的区域时：

BitmapTextureAtlasTextureRegionFactory.createFromAsset(Atlas3, this, "columna.png",0 ,0);

一切正常。地图集是 128x256，纹理是 100x256 左右，所以我想使用 x 偏移，否则我的碰撞会被 box2d 弄乱。问题是每当我将偏移量更改为 0,0 以外的任何值时都会出现黑屏。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T16:10:39.387

使用 256+(offset) 而不是 256 作为纹理的高度。

* * *

南非

# android - 如何在 aChartEngine 中使文本更大？

> ID：14478662
> 
> 赞同：2
> 
> 时间：2013-01-23T11:31:21.943
> 
> 标签：android, text, charts, achartengine

我在我的应用程序中使用了 aChartEngine，但是我遇到了一个问题，XLabels 的文本不可读，它们的尺寸很短并且与条形混淆。我怎样才能使文本变大并将它们向右移动一点？这是我的 GraphicView 的图像。

![在此处输入图像描述](../Images/832b85ee7142033c256e267965762f74.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:34:03.833

您可以按如下方式设置标签文本大小

```
 mRenderer.setLabelsTextSize(15); // 15 
```

例子在[这里](https://stackoverflow.com/questions/14067642/label-text-size-according-to-the-screen-size-in-a-chart-engine-pie-chart-in-andr)

# mysql - 树结构 - 从两个表中获取最后一级数据

> ID：14478663
> 
> 赞同：0
> 
> 时间：2013-01-23T11:31:23.270
> 
> 标签：mysql, select, tree

我有以下结构中的数据。

```
A
    A1 A2

    B  B1

    C  C1 C2 C3 
```

这些信息转移到名为`group1`和的两个表中`group2`。

`group1`有一级数据和中级数据。

`group2`有最后一级数据和中级数据。

IE

`group1`

```
 group_name    group_id
  A             1
  A1            2
  B             3
  C             4
  C1            5
  C2            6 
```

`group2`

```
 group2_name   parent_id
   A1             1
   A2             2
   B              1  
   B1             3
   C              1
   C1             4
   C2             5
   C3             6 
```

现在我想获得 A 组下的最后一级信息。

我的输出可能是

```
group2_name
A2
B1
C3 
```

我可以使用以下查询获取信息级别 2。

```
select group2.group_name from group2 
inner join
group1 on group1.group_id = group2.parent_id
where group1.group_name = 'A' 
```

怎样才能得到上面的输出？

这是[SQLFIDDLE 演示](http://sqlfiddle.com/#!2/fdad9/1)

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:46:26.347

你可以使用这个：

```
select
  group2.group_name
from
  group2 left join group1
  using(group_name)
where
  group1.group_name is null
  and group2.group_name like 'A%' 
```

它返回表 group2 中不存在于表 group1 中的所有元素。或者（取决于您的数据库的结构）还有这个：

```
select
  concat(left(group_name,1),
    case when max(mid(group_name,2,length(group_name)-1)+0)>0 then
              max(mid(group_name,2,length(group_name)-1)+0)
         else '' end)
from group2
where group2.group_name like 'A%'
group by left(group_name,1) 
```

这里我对字符串的第一个字符进行分组，并获取数值的最大值。

# javascript - html & js - 从客户端本地路径而不是服务器路径加载资源

> ID：14478667
> 
> 赞同：-1
> 
> 时间：2013-01-23T11:31:31.950
> 
> 标签：javascript, html, path, localhost

这是我的问题的场景：我有一个网页通过 jquery dom 注入显示一些图像，如下所示：

```
<!-- this is inside an html page -->
<img id="img1" src="#" />
<img id="img2" src="#" />
<img id="img3" src="#" /> 
```

这是我用来加载图像的脚本示例

```
$("#img1").attr("src", "/img/image1.jpg");
$("#img2").attr("src", "/img/image2.jpg");
$("#img3").attr("src", "/img/image3.jpg"); 
```

所以图像的完整路径是 www.mywebsite.abc/img/someImage.jpg

我需要做的是找到一种方法来切换图像源路径，并强制页面从本地（客户端）路径加载它们，例如 c:\something\img。

服务器和客户端的 img 文件夹结构都是相同的，所以基本上我认为浏览器只需从服务器“切换”到客户端，立即从客户端文件夹而不是服务器文件夹中获取图像他需要他们。

你认为有可能做这样的事情吗？

提前感谢您的任何建议/答案，如果您需要更多说明，请询问。

最好的问候，再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:39:18.983

一般来说，不，你不能那样做。浏览器的安全功能不会让您的页面访问文件系统上的文件。但是，如果您在控制客户端计算机的某些有限范围内使用它，则可以使用命令行开关来禁用该安全性。

例如，您可以启动 Chrome，`--allow-file-access`然后执行

```
$("#img3").attr("src", "file://c/something/img/image3.jpg"); 
```

不过，我不会推荐它，而且显然普通用户不会以这种方式启动 Chrome。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:50:27.960

您不应该在普通网页/应用程序中需要它。如果您想要**节省网络流量**，那么您可以使用适当的缓存标头从服务器提供文件。然后，在第一次请求之后，客户端的浏览器将从缓存（文件系统）中检索文件，甚至不会打扰您的 Web 服务器。

有关 HTTP 缓存的综合教程，请参见[http://www.mnot.net/cache_docs/](http://www.mnot.net/cache_docs/)。

做你建议的事情有点晦涩难懂，浏览器很可能会阻止它。即使他们不知道，您也永远不会知道客户端可能拥有的文件系统。始终以尽可能与客户端无关的方式开发您的网页/应用程序。

在此之后，如果您出于某种原因仍想这样做，那么这里的其他答案可能会为您指明“正确”的方向。

编辑：

还有另一种可能。HTML5 具有离线 Web 应用程序的可能性。基本上，您提供了您希望离线使用的资源的列表（*清单）。*任何支持 HTML5 Offline 的浏览器都会解析此列表并下载和缓存其中列出的文件，即使用户还不需要该特定文件（用户不需要访问网站的每个角落）。在线时，浏览器会自动将这些文件的副本保持在最新状态。

我想这可能是你正在寻找的。

有关更多信息和兼容浏览器列表，请参阅[http://diveintohtml5.info/offline.html](http://diveintohtml5.info/offline.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:38:56.780

我想不出你为什么要这样做，但试试

```
$("#img1").attr("src", "file:///img/image1.jpg"); 
```

或者

```
$("#img1").attr("src", "file://img/image1.jpg"); 
```

它可能会起作用

# css - 如何仅在鼠标悬停时连续显示按钮？

> ID：14478669
> 
> 赞同：2
> 
> 时间：2013-01-23T11:31:40.230
> 
> 标签：css, jsf, user-interface, primefaces, mouseover

我想在最后一列的一行上显示一个关闭按钮（当鼠标悬停在该行上时）我不希望关闭按钮始终可见，而只是在鼠标悬停时显示。

![在此处输入图像描述](../Images/7cf302bbc27b4e9a0f159a08876d1249.png)

如果有人有一个例子，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T11:36:02.530

这是一个非常简单的例子

css

```
table a{
    display: none;
}
table tr:hover a{
    display: inline;
} 
```

和 html

```
<table>
    <tr>
        <td>12</td>
        <td>asdasd</td>
        <td><a href="">Close</a></td>
    </tr>
    <tr>
        <td>12</td>
        <td>asdasd</td>
        <td><a href="">Close</a></td>
    </tr>
    <tr>
        <td>12</td>
        <td>asdasd</td>
        <td><a href="">Close</a></td>
    </tr>
    <tr>
        <td>12</td>
        <td>asdasd</td>
        <td><a href="">Close</a></td>
    </tr>
    <tr>
        <td>12</td>
        <td>asdasd</td>
        <td><a href="">Close</a></td>
    </tr>
    <tr>
        <td>12</td>
        <td>asdasd</td>
        <td><a href="">Close</a></td>
    </tr>
</table> 
```

# php - 谷歌地图第一次没有加载全宽

> ID：14478674
> 
> 赞同：0
> 
> 时间：2013-01-23T11:31:55.390
> 
> 标签：php, javascript, html, google-maps

谷歌地图：

当浏览器通过 URL 打开地图时，地图第一次未加载全宽。刷新后以全宽加载地图。我在许多浏览器中都试过这个。

为什么和解决方案..请谢谢..![在此处输入图像描述](../Images/07304eb75bf63a093df741c293b8f94d.png)

# c++ - 获取已删除文件名的 API

> ID：14478679
> 
> 赞同：1
> 
> 时间：2013-01-23T11:32:11.553
> 
> 标签：c++, c, windows, filesystems

当用户在 Windows 资源管理器上删除文件时，是否有任何机制来获取文件名。在应用层面是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:13:53.860

注册一个`ICopyHook`扩展，检查`ICopyHook::CopyCallback`flag `FO_DELETE`。（尽管有这个名字，钩子也被称为移动和删除）。

# jquery-mobile - 可折叠元素的jquery-mobile格式

> ID：14478683
> 
> 赞同：1
> 
> 时间：2013-01-23T11:32:19.583
> 
> 标签：jquery-mobile

我正在尝试为侧面板制作多级菜单。我正在使用的代码在这个[小提琴](http://jsfiddle.net/sQRDm/2/)中。它有点工作，但可折叠元素的内容格式错误，列表的内容在两边都被剪掉了（在 Firefox 或 Google Chrome 中尝试过）。这样做的正确方法是什么？我不喜欢这个 `data-inset="true"`选项，因为它改变了整个外观。我只是希望它是全宽的，但有正确的填充。另一方面，如果有其他方法可以做到这一点（比如带有无法展开的元素的可折叠集合），我愿意接受建议。

免责声明：我完全是 jqm 和 web 开发的菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:59:27.750

# 解决方案

这是一个工作示例：http: [//jsfiddle.net/Gajotres/m6zVq/](http://jsfiddle.net/Gajotres/m6zVq/)

这个 css 将解决您的问题，并且不会干扰其他列表视图：

```
.ui-collapsible div ul {
    margin: -0.6em 0 !important; //counter top/bottom margins without changing default ones
}

.ui-collapsible div ul .ui-corner-top, .ui-collapsible div ul .ui-corner-bottom {
    border-radius: 0; // remove border radius
} 

.ui-collapsible div ul li.ui-li-divider {
    padding: 0.5em 15px 0.5em 12px !important;
} 
```

**编辑 ：**

这是另一个解决方案：http: [//jsfiddle.net/Gajotres/BfGJY/](http://jsfiddle.net/Gajotres/BfGJY/)

没有CSS。但仍然是一种解决方法。可折叠元素上方有一个列表视图，其下方有一个列表视图。

# 更多信息

如果您想自己学习如何进行这种更改，您应该查看这篇**[文章](http://www.gajotres.net/learn-how-to-customize-jquery-mobile-application/)**，它将教您如何自己进行。

# c# - 包含来自两个视图模型的数据的列表视图

> ID：14478684
> 
> 赞同：0
> 
> 时间：2013-01-23T11:32:23.827
> 
> 标签：c#, wpf, mvvm

我有两个视图模型，每个视图模型中都有一个 observablecollection。这些集合相互关联。例如，假设一个是具有 Id 和 Name 的 ClassA 的集合，另一个是具有 ClassAId 和一些 OtherValue 的 ClassB 的集合是否可以将这些数据绑定到 ListView，以便对于 CollectionA 中的每个项目，OtherValue 是取自 CollectionB

```
 <ListView ItemsSource="{Binding ViewModelA.CollectionClassA}">
       <ListView.View>
          <GridView>                            
            <GridViewColumn DisplayMemberBinding="{Binding Path=ClassA.Name}"/>
            <GridViewColumn DisplayMemberBinding="{Binding Path=ClassB.OtherValue}"/>
          </GridView>
         </ListView.View>
    </ListView> 
```

我希望我对我的问题的解释没有让你很困惑:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:06:10.540

您最好的选择是返回一个在视图模型级别形成的新集合，该集合基于该集合特有的新视图模型（或模型）：

```
public class OtherViewModel
{
    //Expand these if you want to make it INPC
    public int Id { get; private set; }
    public string Name { get; private set; }
    public Foo OtherValue { get; private set; }
}

public class MainViewModel
{
    // Somewhere in MainViewModel, create the collection
    ObservableCollection<OtherViewModel> CreateCollection(ICollection<ClassA> a, ICollection<ClassB> b)
    {
        var mix = a.Join(b, a => a.Id, b => b.Id,
            (a, b) => new OtherViewModel { Id = a.Id, Name = a.Name, OtherValue = b.OtherValue });

        return new ObservableCollection<OtherViewModel>(mix);
    }

    // Expose the collection (possibly INPC if needed)
    public ObservableCollection<OtherViewModel> MixedCollection { get; private set; }
} 
```

XAML：

```
<!-- Assuming the DataContext is MainViewModel -->
<ListView ItemsSource="{Binding MixedCollection}">
  <ListView.View>
    <GridView>                            
      <GridViewColumn DisplayMemberBinding="{Binding Path=Name}"/>
      <GridViewColumn DisplayMemberBinding="{Binding Path=OtherValue}"/>
    </GridView>
  </ListView.View>
</ListView> 
```

* * *

注意事项：

*   您可以选择使用`ObservableCollection<T>`或不使用，这取决于您是否需要此集合是可观察的。
*   您还可以扩展您的视图模型以订阅`ClassA`和`ClassB`集合，以便当它们中的任何一个发生更改时它可以更新您的主集合。

无论哪种方式，这都应该让您对前进的方向有一个很好的了解，并进行一些小的调整以适应您的代码。

# asp.net-mvc - 如何使用 ViewBag 值设置模型属性？

> ID：14478686
> 
> 赞同：-1
> 
> 时间：2013-01-23T11:32:25.973
> 
> 标签：asp.net-mvc, entity-framework-4, asp.net-mvc-4

我想在 ViewBag 中设置值，如下所示

```
 public ActionResult Register(Guid accountId)
 {
            ViewBag.AccountId = accountId;

            return View("Register", "Account");
  } 
```

现在在**注册**视图中，我可以设置，如下所示

```
 @Html.HiddenFor(m => m.AccountId, new { id = "hdaccountid", value = ViewBag.AccountId }) 
```

我想用 ViewBag 值更新模型属性。所以当我想在控制器中更新模型时，模型属性包含正确的值。

我不想使用 ModelView。请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:38:04.273

如果我明白...

`HiddenFor`如果您不将模型传递给查看，则无法使用。

看法

```
@Html.Hidden("accountId",  ViewBag.AccountId )
@Html.Hidden("id",  "hdaccountid" ) 
```

控制器

```
// pass parameter to view
[HttpGet]
public ActionResult Register(Guid accountId)
{
    ViewBag.AccountId = accountId;

    return View();
    //return View("Register", "Account");
}

// post parameter from view
[HttpPost]
public ActionResult Register(Guid accountId, string id)
{
    // Get model from DB and change it
    // model.accountId = accountId;
    ...
} 
```

# mysql - mysql查询在过滤数据时失败？

> ID：14478689
> 
> 赞同：2
> 
> 时间：2013-01-23T11:32:35.973
> 
> 标签：mysql, sql, select

这是我的`user_crime_details`桌子：

![在此处输入图像描述](../Images/84e0d0318a412d628e22139499898f7a.png)

当我尝试这个查询时：

```
SELECT * 
FROM (`user_crime_details`)
WHERE  `group_id` =  '1'
AND  `insert_date` = CURDATE( ) 
OR  `last_update_date` = CURDATE( ) 
ORDER BY  `id` DESC 
```

结果总是这样：

![在此处输入图像描述](../Images/73f78fe73619fea9bbab189080e054de.png)

您可以看到结果是错误的，因为 group_id 不等于 1 也被选中。我的查询有问题吗？请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:33:32.413

您需要通过在`OR`零件上添加括号来对条件进行分组。

```
WHERE  group_id =  1  AND  
       (insert_date = CURDATE() OR  last_update_date = CURDATE()) 
```

这与

```
WHERE  group_id =  1 AND CURDATE() IN (insert_date, last_update_date) 
```

PS：列周围的反引号是*可选*的，因为名称不在 MySQL 中的保留关键字列表中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:36:38.187

结果没有错，因为 or 之后的条件对于每一行都是 TRUE (last_update_date = CURDATE())

我想你想要这个查询？：

```
SELECT * 
FROM (`user_crime_details`)
WHERE
   `group_id` =  '1'
AND 
  (
     `insert_date` = CURDATE( ) 
      OR  `last_update_date` = CURDATE( ) 
  )
ORDER BY  `id` DESC 
```

# javascript - 在javascript中获取asp服务器元素时出错

> ID：14478695
> 
> 赞同：0
> 
> 时间：2013-01-23T11:33:04.747
> 
> 标签：javascript, asp.net, getelementbyid

我在获取`asp server element`数据时遇到问题。
这是我`textbox`的用户代码。
以及我想要获得其价值的脚本。但它不工作。
请帮助我。

提前谢谢。

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<div>
<asp:TextBox ID="txtUserCode" runat="server" Width="78%" Height="35%"></asp:TextBox>
</div>
</asp:Content>

<script type="text/javascript">
$(document).ready(function ()
{
  $("input[type='text']").change(function ()
      {            
          var textBox = document.getElementById('<%= txtUserCode.ClientID %>');
          alert(textBox);

     });
 });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:39:53.087

使用`alert(textBox.value);`代替`alert(textBox)`

# java - 如何在Birt报告中的标签上进行垂直对齐（文本旋转）

> ID：14478702
> 
> 赞同：2
> 
> 时间：2013-01-23T11:33:25.073
> 
> 标签：java, eclipse, birt

如何在 Birt 报告中的标签上进行垂直对齐。我知道图表可以旋转标签。如何在报告中做到这一点。我需要在列标题（即标签）上进行垂直对齐。任何人都可以分享技术

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:13:27.247

您可以在 BIRT Exchange 市场上获得一个插件，该插件将在调色板中创建一个旋转的文本元素，您可以在报表设计中使用它。它是免费下载的。只需将插件放在 plugins 文件夹中，然后重新启动 Eclipse。

[http://www.birt-exchange.com/be/marketplace/app-showcase/?app=22](http://www.birt-exchange.com/be/marketplace/app-showcase/?app=22)

如果上述链接不起作用，您还可以在 Eclipse Labs 上找到该项目： [http ://code.google.com/a/eclipselabs.org/p/birt-controls-lib/](http://code.google.com/a/eclipselabs.org/p/birt-controls-lib/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-29T15:50:21.957

我也想添加它，因为发布了其他解决方案的替代方案。

根据您的输出类型，您还可以使用 CSS。**但请注意，这仅适用于网络查看器！**任何其他格式都会忽略它。您需要做的是在报表中添加一个与此类似的 CSS 代码的外部样式表，然后用 CSS 标记一些动态文本。

```
div.vertical
{
 transform: rotate(-90deg);
 -webkit-transform: rotate(-90deg); /* Safari/Chrome */
 -moz-transform: rotate(-90deg); /* Firefox */
 -o-transform: rotate(-90deg); /* Opera */
 -ms-transform: rotate(-90deg); /* IE 9 */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-29T07:35:10.523

1.  您应该在 microsoft Word 上进行垂直对齐文本。
2.  截取该字段的屏幕截图。
3.  在 Eclipse 上打开报表设计
4.  birt 中的 Report Items 下有一个 image 选项
5.  您可以将该屏幕截图图像插入到要垂直对齐文本的字段中。

# backbone.js - 我在生产模式下的项目似乎处理下划线内联模板

> ID：14478707
> 
> 赞同：0
> 
> 时间：2013-01-23T11:33:33.787
> 
> 标签：backbone.js, underscore.js, production-environment

我有一个单页应用程序，在我的 homepage.php 中有这个内联模板：

```
<script class="layout" type="text/template">
  <header id="top-bar">
    <nav id="user-panel">
      <ul>
        <% if (logged === true) { %>
          <li><a class="logout" href="/logout">Logout</a></li>
          <li><a class="profile" href="/profile">Benvenuto <%= username %></a></li>
        <% } else { %>
          <li><a class="login" href="/login">Login</a></li>
          <li><a class="register" href="/register">Registrati gratis</a></li>
        <% }; %>
      </ul>
    </nav>
  </header>
  <div id="wrapper">
    <section id="mid-bar">
      <a id="logo" href="/"><img src=http://<?php echo $host; ?>/public/img/logo.png></a>
    </section>
    <div id="sub-view"></div>
  </div>
</script> 
```

正如您在我的用户面板导航中看到的那样，我使用 <% 下划线 %> 表示法，但是如果您在[我的网站](http://virtualmix.it/)上检查我的源代码，它似乎是我的网络服务器或我真的不知道的东西......处理这些标签......

我还评论了我的 underscore.js 和我的 js 代码，但问题仍然存在......

对不起我的英语不好，我希望你能理解我的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:59:02.120

您遇到的问题与骨干有关。

错误信息是：**Uncaught TypeError: Cannot call method 'extend' of undefined**

这意味着您正在尝试将方法扩展应用于未定义的对象。

很难理解你想做什么：你应该解释为什么要使用主干，你想拥有什么。

回答你的问题：你应该做一些逆向工程来找出问题所在以及代码的哪一部分给出了问题。这似乎不是 php 问题，而是 jquery 问题，因此请执行以下操作：

1.  将`<script>`代码放在body标签之后
2.  删除所有`<script>`包含
3.  重新加载页面，看看它是否给出错误
4.  一一添加`<script>`包含（以正确的顺序，例如在 jquery 之前不包括主干）并查看哪个是错误的。

# php - .htaccess -- css 被停用

> ID：14478709
> 
> 赞同：0
> 
> 时间：2013-01-23T11:33:37.307
> 
> 标签：php, css, .htaccess

在我编辑了我的 .htaccess 之后。无法再访问 css 文件。怎样才能摆脱这个问题。

如果我禁用我的重写规则，是的，那么它工作正常，但是当我在 url 栏中键入 file.php?id=5&title=hello 时，它不会将我重定向到 file.php?id/title，所以我必须手动输入，当我这样做时，css被删除

**.htaccess 代码：**

```
RewriteEngine On
RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)$ file.php?id=$1&title=$2
RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)/$ file.php?id=$1&title=$2 
```

我也试过这个：

```
 RewriteEngine On
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)$ file.php?id=$1&title=$2
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)/$ file.php?id=$1&title=$2 
```

我也试过这个：

```
 RewriteEngine On
 RewriteCond $1 !^(jpg|jpeg|gif|ico|png|media|txt|xml|css|js)
 RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)$ file.php?id=$1&title=$2
 RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)/$ file.php?id=$1&title=$2 
```

我想隐藏我的 URL，以提高对 SQL 注入的安全性。

**更新**

这是一个工作版本：

网址：`http://localhost/21760`

**.htaccess 文件：**

```
 RewriteEngine On
        RewriteCond %{REQUEST_URI} !-f
        RewriteCond %{REQUEST_URI} !-d
        RewriteRule ^([0-9]+)$ file.php?id=$1&
        RewriteCond %{REQUEST_URI} !-f
        RewriteCond %{REQUEST_URI} !-d
        RewriteRule ^([0-9]+)/$ file.php?id=$1 
```

我使用了它，它就像一个魅力，没有反斜杠。

```
 RewriteEngine On
  RewriteRule ^([a-zA-Z0-9_-]+)-watch-file-([0-9]+).html file.php?title=$1&id=$2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:37:52.617

您可以为您的规则设置条件，因此这些条件将不适用于存在的文件

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

您还可以为目录添加一个

```
RewriteCond %{REQUEST_FILENAME} !-d 
```

然后你的文件可能看起来像

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)$ file.php?id=$1&title=$2
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)/$ file.php?id=$1&title=$2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T12:06:33.950

发布的建议是防止现有文件被 mod_rewrite 重写的正确方法。如果您能够：检查您的 apache 访问和/或错误日志，以查看当您直接在浏览器中调用 CSS URI 时究竟发生了什么，并让我们知道结果如何。

第二个想法：是您无法访问 CSS URI 的问题吗？还是您的 CSS 在调用网页时似乎不起作用的问题？如果是后者，那么您在调用 CSS 文件时也可能会遇到相对 URI 与绝对 URI 的问题，您可以尝试在“RewriteEngine On”行下方添加以下内容：

> RewriteBase /

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:39:45.390

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)$ file.php?id=$1&title=$2
RewriteRule ^([0-9]+)/([a-zA-Z0-9_-]+)/$ file.php?id=$1&title=$2 
```

# javascript - getElementById 然后计算长度

> ID：14478717
> 
> 赞同：3
> 
> 时间：2013-01-23T11:34:02.413
> 
> 标签：javascript, getelementbyid

我假设一个相当简单的问题，但我只是一个初学者，我正在努力为自己解决这个问题，我似乎无法在谷歌上找到答案。

我有一个标题标签，我需要使用 javascript 抓取它，然后计算出它的长度，然后根据结果编辑字体大小。

为什么我的代码不起作用？

```
var titleElement = document.getElementById("myelement");

if(titleElement.length>10){
titleElement.style.fontSize = 16;
} 
```

## 编辑/添加

即使在您建议添加 .innerHTML 之后，我也无法使其正常工作：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body onload="titleLengthShow()">
<h1 id="myelement">dfg adg earsh aaerg eaag erg aergethj5 yetfgg eg d</h1>

<script type="text/javascript">

function titleLengthShow(){
var titleElement = document.getElementById("myelement");

    if(titleElement.innerHTML.length>10){
        titleElement.style.fontSize = 16;
    }

}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:38:16.407

```
var titleElement = document.getElementById("myelement");

if(titleElement.innerHTML.length > 10){
  titleElement.style.fontSize = "16px";
} 
```

应该管用。innerHTML 为您提供包含文本（实际上是 html）。

如果您在标题标签中有格式，它也会计算这些格式标签。相反，您可以使用 .textContent 代替 .innerHTML，尽管这在较旧的 IE 中不起作用。对于较旧的 IE 版本 .innerText 应该可以工作。

```
var length = (titleElement.textContent || titleElement.innerText ||
              title.innerHTML).length; 
```

应该适用于常见的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:37:52.320

您需要检查`titleElement.innerHTML`.

我强烈建议研究 jQuery 来做这些事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T11:40:48.650

改变

```
if(titleElement.length>10){
titleElement.style.fontSize = 16;
} 
```

至

```
if(titleElement.innerHTML.length> 10){
titleElement.style.fontSize = "16px";
} 
```

# regex - AWK：使用正则表达式缩短 if-then-else

> ID：14478722
> 
> 赞同：16
> 
> 时间：2013-01-23T11:34:17.783
> 
> 标签：regex, awk, syntactic-sugar

以下 AWK 格式：

```
/REGEX/ {Action} 
```

`Action`如果当前行匹配将执行`REGEX`。

有没有办法添加一个`else`子句，如果当前行与正则表达式不匹配，将执行该子句，而不显式使用 if-then-else，例如：

```
/REGEX/ {Action-if-matches} {Action-if-does-not-match} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-23T11:36:53.383

没那么短：

```
/REGEX/ {Action-if-matches} 
! /REGEX/ {Action-if-does-not-match} 
```

但是 (g)awk 也支持三元运算符：

```
{ /REGEX/  ? matching=1 : matching = 0 ; if ( matching ==1 ) { matching_action } else { notmatching_action } } 
```

*更新*：

根据伟大的格伦杰克曼的说法，您可以在比赛中分配变量，例如：

```
m = /REGEX/ { matching-action } !m { NOT-matching-action } 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-23T14:30:47.073

还有`next`：

```
/REGEX/ {
    Action
    next # skip to the next line
}
{ will only get here if the current line does *not* match /REGEX/ } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T12:45:15.857

你可以做一个“技巧”。如您所知，AWK 尝试按顺序将输入与每个正则表达式匹配，以执行其块。

如果 $1 为“1”，则此代码执行第二个块，否则执行第三个块：

```
awk '{used = 0} $1 == 1 {print $1" is 1 !!"; used = 1;} used == 0 {print $1" is not 1 !!";}' 
```

如果输入是：

```
1
2 
```

它打印：

```
1 is 1 !!
2 is not 1 !! 
```

# drop-down-menu - 在下拉菜单中添加选项卡

> ID：14478724
> 
> 赞同：2
> 
> 时间：2013-01-23T11:34:21.373
> 
> 标签：drop-down-menu, twitter-bootstrap, tabs

有谁知道在 Bootstrap 下拉菜单中添加选项卡的简单方法？现在的问题是，当我打开下拉菜单并单击任何选项卡时，下拉菜单会关闭。这是任何下拉列表的预期行为。

如何避免关闭下拉菜单，如果单击在该下拉列表内，并且仅在外部单击或按钮单击时关闭它。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:29:41.910

检查“点击”功能上的事件目标，如果目标在下拉列表中，则返回否则过程：

function(event) { if (typeof event !== "undefined" && $("#dropdownid").has(event.target).length > 0) { return; } //做一点事。}

# c# - 封装一个自引用控制台应用方法

> ID：14478725
> 
> 赞同：0
> 
> 时间：2013-01-23T11:34:21.500
> 
> 标签：c#

如果方法`iAmPrivate`是`Private`那么以下如何执行它？如果我尝试运行 PrivateMethod 的 myPrivateMethod 它被封装，为什么不同样适用于`iAmPrivate`？

```
class PrivateMethod {
    private int myPrivateMethod() {
        return 1;
    }
}

static void Main(string[] args) {

    Program myProgram = new Program();

    myProgram.iAmPrivate("private");
    myProgram.iAmPublic("public");

    PrivateMethod pm = new PrivateMethod();
    //Console.WriteLine("this won't run {0}", pm.myPrivateMethod);  //not possible          

    Console.WriteLine("press [enter] to exit");
    Console.ReadLine();
}

public void iAmPublic(string s) {
    Console.WriteLine("I am {0}", s);
}

private void iAmPrivate(string s) {
    Console.WriteLine("I am {0}", s);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:36:01.127

你是`Program.iAmPrivate`从内部呼叫`Program.Main`。根据文档，这是预期的行为，`private`因为两者都是同一类的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:36:02.430

`C#`Main方法中的原因是`Program`类的静态方法。在`Program`类中，您可以访问它的`private`方法，即您实际执行的操作。但是你不能访问*另一个*类`private`的方法。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:38:01.313

因为`iAmPrivate`是在类中定义的`Program`。所有私有成员都可以从定义它们的类型访问，但不能在该类型之外访问。

[http://msdn.microsoft.com/en-us/library/st6sy9xe(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/st6sy9xe(v=vs.110).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T11:39:15.717

根据定义，私有函数只能在定义它的类内部访问。因此，程序可以访问其私有函数，即使在静态函数中也是如此。

当您尝试从类外部访问私有函数时，程序无法执行 PrivateMethod 类中的私有函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T12:45:11.253

[谢谢你的帮助......现在我明白了！]

将课程更改`PrivateMethod`为以下内容有助于我了解发生了什么：

```
class PrivateMethod {
    public int pretendMain() {
        PrivateMethod x = new PrivateMethod();
        return x.myPrivateMethod();
    }
    private int myPrivateMethod() {
        return 1;
    }
}

class Program {
    static void Main(string[] args) {

        Program myProgram = new Program();

        myProgram.iAmPrivate("private");
        myProgram.iAmPublic("public");

        PrivateMethod pm = new PrivateMethod();
        Console.WriteLine("this will now run {0}", pm.pretendMain()); //now possible !
        //Console.WriteLine("this won't run {0}", pm.myPrivateMethod);  //not possible          

        Console.WriteLine("press [enter] to exit");
        Console.ReadLine();
    }

    public void iAmPublic(string s) {
        Console.WriteLine("I am {0}", s);
    }
    private void iAmPrivate(string s) {
        Console.WriteLine("I am {0}", s);
    }
} 
```

我失踪的事实是它`myProgram.iAmPrivate("private");`是从内部运行的，`Main`所以它当然是可以访问的。*

# android - 存档模式下的短信备份

> ID：14478728
> 
> 赞同：-1
> 
> 时间：2013-01-23T11:34:35.237
> 
> 标签：android, sms

我正在“sms.xml”文件中创建收件箱备份，收件箱中有 100 条消息。

现在我的收件箱中有 105 条短信，现在我只想备份同一文件中的 5 条最新消息。就像存档模式一样。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T07:23:44.377

如您所知，sms 表的表结构，它包含带有时间戳值的文本 msg。

因此，您可以查询内容提供程序以获取大于表中已存在的最后一个时间戳的值。

应遵循的步骤，

1.  查询存档的最新时间戳。

2.  通过适当更改`selection`参数来查询内容提供者

通过以下示例[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)你可以在内容提供者中获得选择参数的用法

湿婆

# 更新 1

```
private static final Uri SMS_INBOX = Uri.parse("content://sms/inbox");
String last_archived_date = xxxxxxxxxxxxx;
Cursor c = getContentResolver().query(SMS_INBOX, null, "date >"+last_archived_date, null, null); 
```

有很多方法可以保留监视器 last_archived_date 我更喜欢 SharedPreference [http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

# ruby-on-rails-3 - 如何获取 activeRecord 对象的属性

> ID：14478730
> 
> 赞同：0
> 
> 时间：2013-01-23T11:34:55.293
> 
> 标签：ruby-on-rails-3, rails-activerecord

我有这个模型

```
class Contestcode < ActiveRecord::Base
  attr_accessible :code, :used

  def self.is_valid(code)
    valid = false
    contestcode = Contestcode.where('code = ?', code)
    Rails.logger.debug("My object: #{contestcode.inspect}");
    if (contestcode)
      valid = contestcode.used
    end
    valid
  end
end 
```

当我尝试运行时，`self.is_valid`出现此错误：

```
undefined method `used' for #<ActiveRecord::Relation:0x007ff525fde1a8> 
```

调试语句的输出是：

```
My object: [#<Contestcode id: 1, code: "aaaaa", used: false, created_at: "2013-01-23 10:21:32", updated_at: "2013-01-23 10:21:32">] 
```

如何获得比赛代码的 used 属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:41:52.787

`Contestcode.where`返回竞赛代码的集合。在您的情况下，`code`您正在搜索的是（希望！）唯一的，因此如果找到它，它将是 1 个项目的集合，如果没有，它将是 0 个项目的集合。

您可以在调试语句中看到这一点 - 请注意对象周围的方括号，这表明它在一个数组中（实际上是一个`ActiveRecord::Relation`，它允许您将查询链接在一起，但它的行为主要类似于数组）。

你真正想要的是`Contestcode.where(...).first`，如果找到它，它将从数组中提取 Contestcode，否则返回`nil`。

# javascript - 如何通过javascript清除仅在IE7中的缓存

> ID：14478738
> 
> 赞同：-2
> 
> 时间：2013-01-23T11:35:22.793
> 
> 标签：javascript, jquery, internet-explorer

我只想为IE7清除缓存，而不是在任何其他浏览器中，我该如何清除它。我使用以下脚本删除缓存，但它清除了所有浏览器的缓存，是否有任何解决方案可以通过 javascript 仅清除 IE7 中的缓存？

```
<?phpheader("Cache-Control: no-cache, must-revalidate");?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:03:47.977

虽然您尝试做的不是一个好主意，但您可以在没有 javascript 的情况下做到这一点。您可以使用条件注释和元标记：

```
<!--[if IE 7]>

<meta http-equiv="pragma" content="no-cache" />
<meta http-equiv="Expires" content="-1">

<![endif]--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T05:42:44.140

问题已得到解决。

```
 $.ajaxSetup({ cache: false }); 
```

# multiple-instances - 同时在两个实例中打开 xml 文件

> ID：14478742
> 
> 赞同：0
> 
> 时间：2013-01-23T11:35:32.467
> 
> 标签：multiple-instances

我有一个 xml 文件，我的控制台应用程序使用此文件使用代码块将其转换为 Filestream：

```
FileStream fs = new FileStream(configFile, FileMode.Open) 
```

但是，当两个实例/线程在同一时刻/同时访问上述文件时，它会引发一个异常，即“空引用异常”。有人可以帮助我怎么做，因为我在很长一段时间内都在努力摆脱它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:15:59.473

当我在 FileStream 中转换时使用 FileAccess.Read 时，它解决了我的问题

```
FileStream fs = new FileStream(configFile, FileMode.Open,FileAccess.Read); 
```

# php - PHP 到 MS SQL Server 适配器

> ID：14478743
> 
> 赞同：0
> 
> 时间：2013-01-23T11:35:32.760
> 
> 标签：php, sql-server, zend-framework2

我目前正在使用 Zend Framework (2) 在 PHP(5.3) 上开发应用程序。客户**最近**宣布目标数据库将是 MS SQL Server。

所以..我检查了几个数据库适配器选项：

**PDO_MSSQL**似乎已被弃用。

**SQLSRV** 仅适用于 Windows 服务器？

**PDO_ODBC**似乎是不同操作系统支持的正确选择。

任何建议在 Zend 中使用什么是正确的方法都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:44:20.770

我曾经使用过[http://php.net/manual/en/book.mssql.php](http://php.net/manual/en/book.mssql.php)并围绕它编写了我自己的 Zend Wrapper。这不是最简单的方法，但我想控制 MSSQL 和 MySQL 之间的所有细微差别。

但是以下设置不起作用吗？

```
resources.db.adapter                             = "sqlsrv"
resources.db.host                                = "localhost\SQLEXPRESS"
resources.db.dbname                              = "DatabaseName"
resources.db.isDefaultTableAdapter               = true 
resources.db.driver_options.ReturnDatesAsStrings = true 
```

前段时间看到这样的提议。

顺便说一句，我们正在谈论的是 Zend Framework 1 还是 2？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:19:29.600

将 freetds 与 pdo dblib 一起使用。我有一篇博客文章写了如何使用它（在 ZF1 中）： http: [//featurebug.blogspot.de/2011/04/linux-php-and-zend-framework-and-ms-sql.html](http://featurebug.blogspot.de/2011/04/linux-php-and-zend-framework-and-ms-sql.html)

PS 没有适用于 linux/Mac OS X 的 sqlsrv

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T15:39:14.117

> SQLSRV 仅适用于 Windows 服务器？

当然，PHP 包装库仅适用于 Windows。

> PDO_MSSQL 似乎已被弃用。

你的意思是**PDO_SQLSRV**。你从哪里得到这些信息？[您可以在PDO_SQLSRV](http://php.net/manual/ref.pdo-sqlsrv.php)中找到所需的信息

> PDO_ODBC 似乎是不同操作系统支持的正确选择。

是的，请参阅适用于 Linux 的[PDO_ODBC](http://php.net/manual/ref.pdo-odbc.php)和[ODBC 驱动程序 1.0](http://www.microsoft.com/en-us/download/details.aspx?id=28160)

> 任何建议在 Zend 中使用什么是正确的方法都将不胜感激。

ZF2 从 2.1（alpha/ 或 beta ~ 下周）开始使用这两个驱动程序来支持这一点 阅读[此](https://github.com/zendframework/zf2-documentation/blob/master/docs/languages/en/modules/zend.db.adapter.rst)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T08:27:48.273

蛮力策略.. SQLSRV 没有加载.. 因为它是外部驱动程序，根据 php 版本、VS 版本、SQL 服务器驱动程序有超过 15 种可能的构建..

所以..我全部下载并一一尝试

使用这样的 php 测试页面：

```
echo "is 'sqlsrv' loaded: " . (extension_loaded('sqlsrv')?'yes':'no') ; 
```

最后一个工作之前的最后一个:)

Zend 的属性是`resources.db.adapter = "sqlsrv"`

我也被提示“Microsoft SQL Server 2012 Native Client”

但是..不知道如何在 Linux/Mac 上安装它

# jquery - 将关闭按钮添加到 ajax fancybox

> ID：14478745
> 
> 赞同：1
> 
> 时间：2013-01-23T11:35:37.303
> 
> 标签：jquery, ajax, popup, fancybox, modal-dialog

我正在使用带有 ajax 选项的精美盒子 1.3。我想在弹出窗口中添加关闭按钮，该按钮的作用与弹出角落上的关闭图像相同，因此写在关闭按钮的单击事件上-

```
$.fn.fancybox.close() 
```

试过

```
`jQuery.fn.fancybox.close()` 
```

似乎没有一个工作。我收到 jQuery.fn.fancybox.close() not function 错误消息。这是代码。

```
$('#cancel-filters-btn').click(function(){
            jQuery.fn.fancybox.close();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:21:32.210

尝试委派活动：

```
$(document).on('click', '#cancel-filters-btn', function(){
    $.fancybox.close();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:40:16.877

你可以试试这样

```
$('#cancel-filters-btn').click(function(){
            $.fancybox.close();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T11:39:20.307

请检查这个

```
$('#cancel-filters-btn').click(function(){
           $.fancybox.close();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T11:41:34.483

您试图在没有对象上调用该函数。在你的元素上调用它（通过选择器）：

```
$('#cancel-filters-btn').click(function(){
    $.fancybox.close();
}); 
```

# c# - 在多用户 Windows 应用程序中实现搜索操作

> ID：14478746
> 
> 赞同：0
> 
> 时间：2013-01-23T11:35:37.007
> 
> 标签：c#, winforms, search

谁能给我一种在多用户 Windows 应用程序中实现搜索操作的有效方法？搜索表单应该有一个`DataGridView`控件来向搜索用户显示一些相关的记录。以前我在单用户应用程序中以一种方式进行：

我创建了一个静态属性：

```
static int _SrchRslt;
public static int SrchRslt
{
    get { return _SrchRslt; }
    set { _SrchRslt = value; }
} 
```

我已经将搜索表单的实例创建为 bello

```
SrchFrm srFm = new SrchFrm(this);
srFm.ShowDialog();

if (_SrchRslt > 0)                               
{
    //Retriving the data from database with _SrchRslt value which is comming from srchFrm.ShowDialog() form.
} 
```

该`_SrchRslt`值是从`SrchFrm.ShowDialog();`关闭发送的。对于实现大型多用户应用程序来说，这不是一个好主意。我的申请有 25 个表格。

任何人都可以提出更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:45:26.770

我不确定您的内容是什么，但如果您对多个表单使用相同的搜索字段，`SrchFrm`您可以创建一个。`UserControl`

检查这个[问题](https://stackoverflow.com/questions/557628/how-to-make-a-search-usercontrol-generic-in-net2-0-winforms)

# delphi - Base 10 到 Base 32 的转换

> ID：14478747
> 
> 赞同：1
> 
> 时间：2013-01-23T11:35:38.370
> 
> 标签：delphi, base-conversion

我有一个将 base10 转换为 bas32 的例程，有趣的是，当我使用在线转换工具仔细检查一些数字时，似乎存在问题。以下是一些数字和我的转换结果：

```
9990330227991015 = 8RU4S26R8F7
9990330227991016 = 8RU4S26R8F8
9990330227991017 = 8RU4S26R8F9 
```

但是，所有 3 个号码都使用了几种在线工具（例如[http://www.unitconversion.org/numbers/base-10-to-base-32-conversion.html](http://www.unitconversion.org/numbers/base-10-to-base-32-conversion.html)和[http://www.kaagaard.dk/service/ convert.htm](http://www.kaagaard.dk/service/convert.htm) ) 返回 8RU4S26R8F8。我认为这可能是数字长度，但如果你更高或更低，转换确实会改变。

任何想法为什么应该这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:59:51.620

有趣的是，我刚刚发现了这篇文章，因为我刚刚调查了这个问题，我们在 Delphi 开发的软件的数字完全相同，因为客户在使用我们的转换工具后收到以下信息：-

```
9990330227991015 = 8RU4S26R8F8
9990330227991016 = 8RU4S26R8F8
9990330227991017 = 8RU4S26R8F8 
```

你指的在线工具不正确，原因和我们工具不正确一样，基本不用浮点数，用64位整数处理大数更准确。。

修复程序即将交付给我们的客户...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:18:14.180

似乎普遍的共识是，我查看的在线工具可能使用的是实数而不是 Int64。使用浮点数会产生上述错误结果。

# ios - 泄露对象：ALAsset 和 ALAssetPrivate

> ID：14478748
> 
> 赞同：0
> 
> 时间：2013-01-23T11:35:40.277
> 
> 标签：ios, objective-c, memory-leaks, alasset, assetslibrary

我正在使用 Profile 来查找任何内存泄漏。

我发现了 2 个有趣的漏洞，我无法理解：

```
Leaked Object |  Responsible Library | Responsible Frame

ALAsset         AssetsLibrary         [ALAssetsGroup _enumerateAssetsAtIndexes:options:usingBlock:]_block_invoke_0125

ALAssetPrivate  AssetsLibrary        -[ALAsset initWithManagedAsset:library:] 
```

是我的问题还是 AssetsLibrary？有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:43:41.240

> 是我的问题还是 AssetsLibrary？有什么想法可以解决这个问题吗？

很可能泄漏是由您自己的代码引起的。责任框架显示的事实`ALAsset`仅意味着内存是在该库中分配的。但是，如果您是该内存的所有者，则您应对泄漏负责。

至于如何解决，首先尝试一下Xcode中的静态分析器。这有时会有所帮助。

如果没有，请查看您如何使用 AssetsLibrary 或您用来访问它的任何中间框架。检查所有属性，以及对 alloc/init 或便利构造函数的每次调用。

如果您不知道可能在*哪里*产生泄漏，一个有用的技术是有选择地注释掉代码块（当然，您应该以一种明智的方式这样做，以便应用程序可以运行而不会崩溃）并再次检查 Instruments直到泄漏消失（在这种情况下，您知道是什么原因造成的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-27T10:13:49.410

问题在于资产库本身。它包含内存泄漏。有证据表明，以下代码已经在分析器中显示了泄漏（请注意，我注释掉了将资产添加到可变数组的行）：

```
[assetGroup enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {         
        if(result == nil) {
            *stop = YES;
        } else {
            //[theAssets addObject:result];
        }
}]; 
```

一个可能的解决方法是检查 ALAsset 指针的保留计数，如果保留计数 > 1（如果您自己没有保留它，它应该在块末尾为 1）。

编辑：

我注意到泄漏实际上是一个被 ALAsset 过度保留的 ALAssetPrivate 对象，ALAsset 实例的保留计数是正确的。

编辑：

愚蠢的我，内存泄漏实际上是由我在 ALAsset 上实现的一个类别引起的，其中包括一个自身的 dealloc 方法。这就是泄漏的原因。

# bash - bash 没有抛出这样的文件或目录错误

> ID：14478754
> 
> 赞同：0
> 
> 时间：2013-01-23T11:35:50.187
> 
> 标签：bash, shell

```
 cat some.properties
/server/pdu/secure/enabled=true
/pdu/secure/servers=aninath-lnx:49188
/pdu/unsecure/servers=
/secure/truststore/password=635db14e5350e23142c5c65e3caa50d7
/ui/http/port=8100
/ui/https/port=8443 
```

在执行以下命令时

```
 **. some.properties**
-bash: /server/pdu/secure/enabled=true: No such file or directory
-bash: /pdu/secure/servers=aninath-lnx:49188: No such file or directory
-bash: /pdu/unsecure/servers=: No such file or directory
-bash: /secure/truststore/password=635db14e5350e23142c5c65e3caa50d7: No such file or directory
-bash: /ui/http/port=8100: No such file or directory
-bash: /ui/https/port=8443: No such file or directory 
```

我试图从我使用的 propertyName 中获取 propertyvalue。some.properties source some.properties，我得到了这些错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:38:45.080

只有字母、数字和下划线是构成 Bash 标识符的有效字符，不能使用斜杠。

# .net - Math.Ceiling 上的重载解决方案失败

> ID：14478762
> 
> 赞同：1
> 
> 时间：2013-01-23T11:36:00.383
> 
> 标签：.net, vb.net, sql-server-2008

我有以下错误：

> 重载解析失败，因为在没有缩小转换的情况下无法调用可访问的“*天花板”。*

我的代码是：

```
dgiOpr01Rep.Cells(7).Text = AddPrecZero(Math.Ceiling(dtgCollections.Items(i).Cells(7).Text)) 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:40:37.587

基本上编译器是说它不能在没有更多信息的情况下选择使用哪个重载

尝试先将文本值转换为数字类型，例如：

```
Dim val As Decimal = Decimal.Parse(dtgCollections.Items(i).Cells(7).Text)
dgiOpr01Rep.Cells(7).Text = AddPrecZero(Math.Ceiling(val)) 
```

您需要使用与文本内容匹配的任何数字类型。

# flash - flash 只为舞台中的一个对象设置动画

> ID：14478764
> 
> 赞同：0
> 
> 时间：2013-01-23T11:36:08.667
> 
> 标签：flash, object, animation, animated

如何在我的舞台中为单个对象设置动画而不会干扰其他对象？我希望能够单击对象并为其设置动画。我知道这可以使用影片剪辑符号来完成，但我现在已经在场景 1 中制作了主要动画，除非有办法将其分开，否则我将不得不再次重做所有动画。

我可以只为一个对象隔离动画吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:04:21.490

如果您已经在场景 1 中有主动画并且想要从中分离一个对象，您可以随时右键单击要分离的对象并选择“创建影片剪辑”

如果对象跨越多个帧，您可以复制对象所在的所有帧，转到库（我认为是 F11），然后粘贴所有帧并根据需要进行修改

如果您想稍后将此动画放置到主场景中，只需将对象从库中拖放到主舞台，但不要忘记为其创建一个新图层，正如有人已经建议的那样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:47:51.593

为每个对象使用不同的图层。

# mysql-workbench - 在mysql工作台中查询执行时间

> ID：14478768
> 
> 赞同：4
> 
> 时间：2013-01-23T11:36:29.057
> 
> 标签：mysql-workbench

有谁知道如何在 mysql 工作台中显示查询执行时间？我正在运行 5.2.45 版，我无法在任何地方看到查询运行所花费的时间！多么神秘！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T08:03:56.923

When you run a query the server response is listed in the output pane below the editor/result set grid. There's a selector to switch between different parts, so make sure you select "Action Output". In this grid you see if a query run successfully or failed, when it ran, the query text, the server response and the query times (time to execute the query and time to retrieve data).

As it turns out sometimes the bottom area can "get lost", that is, it no longer shows up despite the toggle in the toolbar is set to show the "Action Output". In that case it is very likely that the splitter which is hosts the action output as well as the editor and right side bar got in a state where it collapsed the lower part. Try moving your mouse slowly below the bottom tab ("Result 2") until it changes to a split cursor. Then drag the splitter up to make the lower part visible. I have also seen (mostly on Mac) that the cursor does not change, but can still drag the splitter.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T07:59:03.827

当您在工作台中执行查询时。显示输出窗格。

在输出窗格中，有列（时间、操作、消息等）。最右边的列是“Duration/Fetch”，其中显示了执行的持续时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-24T06:38:13.967

最多显示为 Requested in time(sec.)

# mysql - Mysql ENUM 不使用索引

> ID：14478770
> 
> 赞同：1
> 
> 时间：2013-01-23T11:36:32.697
> 
> 标签：mysql, enums, indexing

我在 MySQL 中遇到了枚举字段的问题。当我只使用一个值 SELECT * FROM test WHERE t IN ('new') 时，一切都很好，但是如果有多个值 SELECT * FROM test WHERE t IN ('new','deleted') MySQL 没有完全使用索引，因此此查询的性能非常低。有可能用它做点什么吗？

```
CREATE TABLE `test` (
`id` INT(11) NOT NULL AUTO_INCREMENT,
`t` ENUM('new','active','deleted') NOT NULL,
PRIMARY KEY (`id`),
INDEX `t` (`t`)
)
ENGINE=MyISAM;

INSERT INTO test SET t = 'new';
INSERT INTO test SET t = 'new';
INSERT INTO test SET t = 'active';
INSERT INTO test SET t = 'active';
INSERT INTO test SET t = 'deleted';
INSERT INTO test SET t = 'deleted';

EXPLAIN SELECT * FROM test WHERE t IN ('new');
id|select_type|table|type|possible_keys|key|key_len|ref  |rows|Extra
1 |SIMPLE     |test |ref |t            |t  |1      |const|2   |Using index condition

EXPLAIN SELECT * FROM test WHERE t IN ('new','deleted');
id|select_type|table|type|possible_keys|key |key_len|ref |rows|Extra
1 |SIMPLE     |test |ALL |t            |NULL|NULL   |NULL|6    |Using where 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:50:43.510

MySQL 在第二种情况下没有使用索引这一事实并不意味着性能会很差（尽管可能会如此）。索引的差异不是很大，因此查询优化器认为不是扫描索引两次（每个值一次）然后读取每个选定索引的行，扫描表和直接挑出行。

像这样的索引如果要有用，通常需要大量的 TLC *（Tender Loving Care）*。看看[这里](http://dev.mysql.com/doc/innodb/1.1/en/innodb-other-changes-statistics-estimation.html)了解更多。

# bmp - BMP 图像标题

> ID：14478778
> 
> 赞同：2
> 
> 时间：2013-01-23T11:36:51.537
> 
> 标签：bmp

我正在观察 24 位 bmp 图像的标题，它由 54 个字节组成

24位bmp图像如下：-

![](../Images/888124c076ec34f7296b0cae80d2de69.png)

然后我使用 MS Paint 将其转换为单色 bmp 图像，我观察到它的标题由 62 个字节组成

单色bmp图像如下： -

![](../Images/48f8758dce13c1cdc30613cdef6cc27c.png)

我无法理解为什么标题的大小发生了变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-27T19:40:22.887

BMP 文件头由文件头 (12B) 和 DIB 头构建而成。有不同的 DIB 头，每个头都有不同的大小：

*   位图核头 (12B)
*   位图核头2 (64B)
*   BITMAPINFOHEADER (40B) - 在您的第一个文件中
*   BITMAPV2INFOHEADER (52B) - 在你的第二个文件中
*   位图 4 头 (108B)
*   位图 5 头 (124B)

之所以会有不同的header，是因为微软多次扩展了DIB格式。出于兼容性原因，大多数应用程序使用较旧的 DIB 标头来保存文件。

# gwt - GWT 2.5 编译错误

> ID：14478783
> 
> 赞同：3
> 
> 时间：2013-01-23T11:37:03.847
> 
> 标签：gwt

如果客户端代码发生更改，我们可以刷新页面以重新编译它并查看结果。它与 GWT 2.4 配合得很好

从 GWT 2.5 开始存在问题。在页面刷新时`com.google.gwt.user.client.rpc.SerializationException`抛出一个。如果我重新启动 Web 应用程序并刷新页面，一切正常。所以这似乎是 GWT 中的一些错误。

一些细节：

1.  如果有任何更改，例如 css 文件 (!)
2.  这个异常经常被抛出，但并非总是如此，有时它是可以的。
3.  实际异常可能涉及几乎任何类。在此示例中，它是 java.lang.Integer。

> com.google.gwt.user.client.rpc.IncompatibleRemoteServiceException：无法在 com.google.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:221) 处反序列化响应。 gwt.http.client.Request.fireOnResponseReceived(Request.java:287) 在 com.google.gwt.http.client.RequestBuilder$1.onReadyStateChange(RequestBuilder.java:395) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at com.google.gwt.dev.shell.MethodAdaptor .invoke(MethodAdaptor.java:103) 在 com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71) 在 com.google.gwt.dev.shell。OophmSessionHandler.invoke(OophmSessionHandler.java:172) 在 com.google.gwt.dev.shell.BrowserChannelServer.reactToMessagesWhileWaitingForReturn(BrowserChannelServer.java:338) 在 com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java: 219) 在 com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:571) 在 com.google.gwt 的 com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136) .dev.shell.ModuleSpace.invokeNativeObject(ModuleSpace.java:279) 在 com.google.gwt.dev.shell.JavaScriptHost.invokeNativeObject(JavaScriptHost.java:91) 在 com.google.gwt.core.client.impl.Impl .apply(Impl.java) 在 com.google.gwt.core.client.impl.Impl.entry0(Impl.java:242) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect。NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at com.google.gwt.dev.shell.MethodAdaptor.invoke(MethodAdaptor. java:103) 在 com.google.gwt.dev.shell.MethodDispatch.invoke(MethodDispatch.java:71) 在 com.google.gwt.dev.shell.OophmSessionHandler.invoke(OophmSessionHandler.java:172) 在 com.google .gwt.dev.shell.BrowserChannelServer.reactToMessages(BrowserChannelServer.java:293) 在 com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:547) 在 com.google.gwt.dev.shell.BrowserChannelServer .run(BrowserChannelServer.java:364) at java.lang.Thread.run(Unknown Source) 引起：com.google.gwt.user.client.rpc.SerializationException: java.lang.RuntimeException:无法在 com.google.gwt.user.client.rpc.impl.SerializerBase.getTypeHandler(SerializerBase.java:164) 在 com 找到类 com.google.gwt.user.client.rpc.core.java.lang.Integer_FieldSerializer .google.gwt.user.client.rpc.impl.SerializerBase.instantiate(SerializerBase.java:114) 在 com.google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:396) 在 com .google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119) 在 ru.minogin.data.shared.model.BaseEntity_FieldSerializer.deserialize(BaseEntity_FieldSerializer.java:29) 在 ru.minogin.data .shared.model.OrderedEntity_FieldSerializer.deserialize(OrderedEntity_FieldSerializer.java:22) 在 ru.pickbook.shared.model.Format_FieldSerializer。在 com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java: 95) 在 com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java: 119) 在 ru.pickbook.shared.model.Album_FieldSerializer.deserial(Album_FieldSerializer.java:141) 在 com.google.gwt.user.client 的 ru.pickbook.shared.model.Album_FieldSerializer.deserialize(Album_FieldSerializer.java:105) .rpc.impl.SerializerBase.deserialize(SerializerBase.java:95) 在 com.google.gwt.user.client.rpc.impl。ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:398) 在 com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119) 在 ru.pickbook.shared.model.OrderItem_FieldSerializer.deserialize(OrderItem_FieldSerializer. java:48) 在 ru.pickbook.shared.model.OrderItem_FieldSerializer.deserial(OrderItem_FieldSerializer.java:75) 在 com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95) 在 com .google.gwt.user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:398) 在 com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119) 在 com .google.gwt.user.client.rpc.core.java.util。Collection_CustomFieldSerializerBase.deserialize(Collection_CustomFieldSerializerBase.java:34) 在 com.google.gwt.user.client.rpc.core.java.util.HashSet_CustomFieldSerializer.deserialize(HashSet_CustomFieldSerializer.java:34) 在 com.google.gwt.user.client。 rpc.core.java.util.HashSet_FieldSerializer.deserial(HashSet_FieldSerializer.java:19) 在 com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95) 在 com.google.gwt。 user.client.rpc.impl.ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:398) 在 com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119) 在 ru.pickbook.shared。 model.Order_FieldSerializer.deserialize(Order_FieldSerializer.java:152) 在 ru.pickbook.shared.model。Order_FieldSerializer.deserial(Order_FieldSerializer.java:196) 在 com.google.gwt.user.client.rpc.impl.SerializerBase.deserialize(SerializerBase.java:95) 在 com.google.gwt.user.client.rpc.impl。 ClientSerializationStreamReader.deserialize(ClientSerializationStreamReader.java:398) 在 com.google.gwt.user.client.rpc.impl.AbstractSerializationStreamReader.readObject(AbstractSerializationStreamReader.java:119) 在 com.google.gwt.user.client.rpc.impl。 RequestCallbackAdapter$ResponseReader$8.read(RequestCallbackAdapter.java:106) at com.google.gwt.user.client.rpc.impl.RequestCallbackAdapter.onResponseReceived(RequestCallbackAdapter.java:214) ... 28 更多原因：java.lang。 RuntimeException：无法在 com.google.gwt.user.client.rpc 找到类 com.google.gwt.user.client.rpc.core.java.lang.Integer_FieldSerializer。impl.ReflectionHelper.loadClass(ReflectionHelper.java:93) at com.google.gwt.user.client.rpc.impl.SerializerBase.getTypeHandler(SerializerBase.java:160) ... 61 更多原因：java.lang.ClassNotFoundException在 com.google.gwt.dev.shell.CompilingClassLoader$MultiParentClassLoader.findClass(CompilingClassLoader.java:368) 在 com.google.gwt.dev.shell.CompilingClassLoader$MultiParentClassLoader.loadClass(CompilingClassLoader.java:388) 在 java.lang .ClassLoader.loadClass(Unknown Source) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Unknown Source) at com.google.gwt.user.client.rpc.impl.ReflectionHelper.loadClass (ReflectionHelper.java:91) ... 62 更多java:160) ... 61 更多原因：com.google.gwt.dev.shell.CompilingClassLoader$MultiParentClassLoader.findClass(CompilingClassLoader.java:368) com.google.gwt.dev.shell 的 java.lang.ClassNotFoundException .CompilingClassLoader$MultiParentClassLoader.loadClass(CompilingClassLoader.java:388) at java.lang.ClassLoader.loadClass(Unknown Source) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Unknown Source) at com.google.gwt.user.client.rpc.impl.ReflectionHelper.loadClass(ReflectionHelper.java:91) ... 62 更多java:160) ... 61 更多原因：com.google.gwt.dev.shell.CompilingClassLoader$MultiParentClassLoader.findClass(CompilingClassLoader.java:368) com.google.gwt.dev.shell 的 java.lang.ClassNotFoundException .CompilingClassLoader$MultiParentClassLoader.loadClass(CompilingClassLoader.java:388) at java.lang.ClassLoader.loadClass(Unknown Source) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Unknown Source) at com.google.gwt.user.client.rpc.impl.ReflectionHelper.loadClass(ReflectionHelper.java:91) ... 62 更多loadClass(CompilingClassLoader.java:388) at java.lang.ClassLoader.loadClass(Unknown Source) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Unknown Source) at com.google.gwt .user.client.rpc.impl.ReflectionHelper.loadClass(ReflectionHelper.java:91) ... 62 更多loadClass(CompilingClassLoader.java:388) at java.lang.ClassLoader.loadClass(Unknown Source) at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Unknown Source) at com.google.gwt .user.client.rpc.impl.ReflectionHelper.loadClass(ReflectionHelper.java:91) ... 62 更多

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T13:56:29.657

```
-Dgwt.disableGeneratorResultCaching 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:25:03.707

该错误不在 GWT 框架中，而是在浏览器插件中。它不应该在生产模式下发生。

如果可能，切换到 SuperDev 模式，您将摆脱异常。

# c# - Json空数组在MVC中反序列化为null

> ID：14478793
> 
> 赞同：25
> 
> 时间：2013-01-23T11:37:21.450
> 
> 标签：c#, json, asp.net-mvc-3, json.net

我有一个控制器动作，它接收一个整数和一个对象，其中包含各种属性，其中一个是对象的通用列表。当我使用填充列表将 JSON 发布到操作时，所有内容都正确映射，并且我得到一个包含我发布的对象的列表。但是，如果数组为空，则 MVC 操作将属性绑定到空列表而不是空列表。我希望空数组映射到一个空数组而不是 null，因为在这种情况下，空数组意味着集合中没有任何内容，而 null 意味着应该检查数据库以查看以前是否有任何内容保存在集合中，但我不知道需要更改什么才能使其正确映射。我们正在使用 Json.Net 对返回对象进行对象序列化，但我不这么认为

传递的对象：

```
public class ObjectInList
{
    public decimal Value1 { get; set; }
    public decimal Value2 { get; set; }
}

public class Criteria
{
    public decimal? ANullableNumber { get; set; }
    public IList<ObjectInList> ObjectsList { get; set; }
} 
```

Json 请求："{\"id\":137,\"criteria\":{\"ObjectsList\":[]}}"

控制器动作：

```
public ActionResult ProcessCriteria(int id, Criteria criteria)
{
    return Json(_service.ProcessCriteria(id, criteria));
} 
```

正是在控制器操作中，我在标准对象中得到了一个空列表而不是一个空列表。无论我是否为其他属性发送空值，都会发生这种情况。不确定是否归结为对象是 IList 而不是 IEnumerable？（包装服务调用的 Json 方法是我们使用 Json.Net 返回 json 结果以序列化响应的包装器 - null 在接收到的条件对象中，而不是在返回中。）

我猜这是我错过的非常简单的事情，但我无法弄清楚是什么，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-28T01:40:53.070

好的，我面临这个问题将近 5 个小时试图找到解决方案，然后我发现自己正在查看 MVC 源代码。我发现这是 第 173 行**System.Web.Mvc.ValueProviderResult中的 Mvc 源代码的问题：**

```
 else if (valueAsArray != null)
        {
            // case 3: destination type is single element but source is array, so                     extract first element + convert
            if (valueAsArray.Length > 0)
            {
                value = valueAsArray.GetValue(0);
                return ConvertSimpleType(culture, value, destinationType);
            }
            else
            {
                // case 3(a): source is empty array, so can't perform conversion
                return null;
            }
        } 
```

如您所见，如果 source 为空数组，它将返回 null。

所以我必须想办法解决它，然后我才想起过去我们是如何进行反序列化的：这就是你得到你想要的东西的方式：

```
 public ActionResult ProcessCriteria(int id, Criteria criteria)
    {
        var ser = new System.Web.Script.Serialization.JavaScriptSerializer();
        StreamReader reader = new StreamReader(System.Web.HttpContext.Current.Request.InputStream);
        reader.BaseStream.Position = 0;
        criteria = ser.Deserialize<Criteria>(reader.ReadToEnd());

        return Json(_service.ProcessCriteria(id, criteria));
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-18T16:46:01.710

解决此问题的一种方法是将新实例分配为您的默认值，`ObjectsList`如下所示：

```
public class Criteria
{
    public decimal? ANullableNumber { get; set; }
    public IList<ObjectInList> ObjectsList { get; set; } = new List<ObjectInList>();
} 
```

`List`如果 JSON 数组中`null`没有值，这将创建一个空值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-04T14:54:08.197

我有一个适用于框架级别的答案。在我的项目中，我使用的数据比默认值支持的数据要大一些。因此，我创建了自己的 ValueProviderFactory。事实证明，如果数组中没有项目，则提供者会完全跳过该条目。相反，我们只需要告诉它数组中没有项目。这是您需要的代码。

一、global.asax Application_Start：

```
public void Application_Start()
{
    ValueProviderFactories.Factories.Remove(ValueProviderFactories.Factories.OfType<System.Web.Mvc.JsonValueProviderFactory>().FirstOrDefault());
    ValueProviderFactories.Factories.Add(new LargeValueProviderFactory()); 
```

其次，这是您需要的其他课程：

```
using System;
using System.Collections.Generic;
using System.Collections;
using System.Web.Mvc;
using System.IO;
using System.Web.Script.Serialization;
using System.Globalization;

public sealed class LargeValueProviderFactory : System.Web.Mvc.ValueProviderFactory
{    
    public override System.Web.Mvc.IValueProvider GetValueProvider(ControllerContext controllerContext)
    {
        if (controllerContext == null)
        {
            throw new ArgumentNullException("controllerContext");
        }

        object jsonData = GetDeserializedObject(controllerContext);
        if (jsonData == null)
        {
            return null;
        }

        Dictionary<string, object> backingStore = new Dictionary<string, object>(StringComparer.OrdinalIgnoreCase);
        AddToBackingStore(backingStore, String.Empty, jsonData);
        return new DictionaryValueProvider<object>(backingStore, CultureInfo.CurrentCulture);
    }

    private static void AddToBackingStore(Dictionary<string, object> backingStore, string prefix, object value)
    {
        IDictionary<string, object> d = value as IDictionary<string, object>;
        if (d != null)
        {
            foreach (KeyValuePair<string, object> entry in d)
            {
                AddToBackingStore(backingStore, MakePropertyKey(prefix, entry.Key), entry.Value);
            }
            return;
        }

        IList l = value as IList;
        if (l != null)
        {
            for (int i = 0; i < l.Count; i++)
            {
                AddToBackingStore(backingStore, MakeArrayKey(prefix, i), l[i]);
            }
            if (l.Count == 0)
                backingStore[prefix] = value;
            return;
        }

        // primitive
        backingStore[prefix] = value;
    }

    private static object GetDeserializedObject(ControllerContext controllerContext)
    {

        if (!controllerContext.HttpContext.Request.ContentType.StartsWith("application/json", StringComparison.OrdinalIgnoreCase))
        {
            // not JSON request
            return null;
        }

        StreamReader reader = new StreamReader(controllerContext.HttpContext.Request.InputStream);
        string bodyText = reader.ReadToEnd();
        if (String.IsNullOrEmpty(bodyText))
        {
            // no JSON data
            return null;
        }

        JavaScriptSerializer serializer = new JavaScriptSerializer();
        serializer.MaxJsonLength = Int32.MaxValue;
        object jsonData = serializer.DeserializeObject(bodyText);
        return jsonData;
    }

    private static string MakeArrayKey(string prefix, int index)
    {
        return prefix + "[" + index.ToString(CultureInfo.InvariantCulture) + "]";
    }

    private static string MakePropertyKey(string prefix, string propertyName)
    {
        return (String.IsNullOrEmpty(prefix)) ? propertyName : prefix + "." + propertyName;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-30T02:40:36.147

我认为实际问题出在[DefaultModelBinder.cs](https://github.com/ASP-NET-MVC/aspnetwebstack/blob/master/src/System.Web.Mvc/DefaultModelBinder.cs)第 711 行，如果构建的`objectList`内容不包含任何内容，它将返回 null。看看这个：[https ://lostechies.com/jimmybogard/2013/11/07/null-collectionsarrays-from-mvc-model-binding/](https://lostechies.com/jimmybogard/2013/11/07/null-collectionsarrays-from-mvc-model-binding/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T12:51:55.900

这是我作为评论发布的内容：

```
public class Criteria
{
    public decimal? ANullableNumber { get; set; }
    private IList<ObjectInList> _objectsList = new List<ObjectInList>();
    public IList<ObjectInList> ObjectsList 
    { 
        get { return _objectsList; } 
        set { 
            if(value != null) 
                _objectsList = value;
        }
     }
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-11-08T09:46:28.493

这是因为您从未在“Criteria”类中定义可为空的属性值；如果从未定义，它将为空。

例如：

```
 public class Criteria {
    public decimal? ANullableNumber { get; set; }
    public IList<ObjectInList> ObjectsList { get; set; }
  }
  public class Criteria1 {
    private IList<ObjectInList> _ls;
    private decimal? _num;
    public decimal? ANullableNumber {
      get {
        if (_num == null) return 0;
        return _num;
      }
      set {
        _num = value;
      }
    }
    public IList<ObjectInList> ObjectsList {
      get {
        if (_ls == null) _ls = new List<ObjectInList>();
        return _ls;
      }
      set {
        _ls = value;
      }
    }
  }
  public class HomeController : Controller {
    public ActionResult Index() {
      var dd = new Criteria();
      return Json(dd);    //output: {"ANullableNumber":null,"ObjectsList":null}
    }
    public ActionResult Index1() {
      var dd = new Criteria1();
      return Json(dd);    //output: {"ANullableNumber":0,"ObjectsList":[]}
    }
  } 
```

# php - TbDetailView 自定义属性 GetStatusName

> ID：14478812
> 
> 赞同：3
> 
> 时间：2013-01-23T11:38:27.423
> 
> 标签：php, yii, yii-extensions

试图在 上使用我的模型功能`GetStatusName`，`TbDetailView`但它不起作用。它的工作正常`TbGridView`。

型号功能：

```
public function getStatusName()
{
    switch($this->status)
    {
        case self::STATUS_ACTIVE:
            return 'Active';
            break;
        case self::STATUS_DELETED:
            return 'Deleted';
            break;
        default:
            return 'Unknown';
            break;
    }
} 
```

代码：

```
<?php
$this->widget('bootstrap.widgets.TbDetailView',array(
    'type'=>'bordered condensed',
    'data'=>$model,
    'attributes'=>array(
        'name',
        array('name' => 'status', 'type' => 'text', 'value' => '$data->statusName'),
    ),
));
?> 
```

看法：

```
Name    John
Gender  $data->statusName 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:11:07.837

在`CDetailView`,`value`中必须直接指定，不带引号。该值不是 eval'd like in `CGridView`，所以使用：

```
array('name' => 'status', 'type' => 'text', 'value' => $model->statusName) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:45:58.230

```
<?php
$this->widget('bootstrap.widgets.TbDetailView',array(
   'type'=>'bordered condensed',
   'data'=>$model,
   'attributes'=>array(
       'name',
       array('name' => 'status', 'type' => 'text', 'value' => $data->statusName),
   ),
));
?> 
```

或者：

```
<?php
$this->widget('bootstrap.widgets.TbDetailView',array(
   'type'=>'bordered condensed',
   'data'=>$model,
   'attributes'=>array(
       'name',
       array('name' => 'status', 'type' => 'text', 'value' => getStatusName($data->getStatusName)),
   ),
));
?> 
```

评论后编辑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T11:48:00.813

这是一个小例子，我现在发现了如何使用格式化值：

```
 <?php $this -> widget('bootstrap.widgets.TbDetailView', array(
            'data' => $user,
            'type' => 'bordered striped condensed',
            'attributes' => array(
                    'name',
                    array(
                            'name' => 'birthDate',
                            'value' => Yii::app()->dateFormatter->format("dd.MM.yy", strtotime('$data->birthDate')),
                    ),
                    'code',
            ),
    ));
    ?> 
```

# c# - 复制 Treeview 选定项 WPF

> ID：14478813
> 
> 赞同：0
> 
> 时间：2013-01-23T11:38:28.890
> 
> 标签：c#, wpf, treeview

我的 WPF 应用程序中有一个`Treeview`。我需要复制树视图中的元素。

```
private void copyCmdBinding_Executed(object sender, ExecutedRoutedEventArgs e)
{
    // Set text to clip board 
    TreeView tvi = (TreeView)sender;
    Clipboard.SetText(tvi.SelectedValue.ToString());
} 
```

但是这里`tvi.SelectedValue`不会返回我在树视图中选择的文本。如何获取我在`treeview`.

更新：

```
<TreeView Grid.Column="0" Grid.Row="0"  
          HorizontalAlignment="Stretch" Name="treeView1" 
          SelectedItemChanged="treeView1_SelectedItemChanged">
    <TreeView.CommandBindings>
        <CommandBinding Command="ApplicationCommands.Copy" 
                        Executed="copyCmdBinding_Executed" 
                        CanExecute="copyCmdBinding_CanExecute"/>
    </TreeView.CommandBindings>
    //Tree elements
</TreeView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:47:17.820

试试这个：

```
((TreeViewItem)tvi.SelectedItem).Header.ToString()) 
```

一般来说，这段代码可能很有用：

```
((T1)tvi.SelectedItem).P.ToString()) 
// T1: type of property that is binded, 
// P: proper method or property that hold the string content 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:51:29.097

树中的项目可以是任何类型，并返回由的`SelectedValue`指定的属性的值。因此，请确保您已在 Treeview 中设置！`SelectedValuePath``SelectedItem``SelectedValuePath`

# php - 在 fwrite HTML 中创建 PHP 表

> ID：14478815
> 
> 赞同：0
> 
> 时间：2013-01-23T11:38:36.673
> 
> 标签：php, html-table, fwrite

我创建了一个将信息传递给 PHP 文件的 HTML 表单。

我使用 fwrite 创建了一个包含表单变量的 HTML 文件。

为了创建一个表，我有这个：

```
for($i = 0; $i < count($docresult); $i++){
echo "<tr><td>$i. </td><td><a href=\\docs\\\"$docresult[$i]\">$docresult[$i]</a></td><td>$txtresult[$i]</td><tr>";
} 
```

将它放在字符串中的最佳做法是什么？基本上，我希望这个工作：

```
$DataToFwrite = "
    <table border=\"1\">
for($i = 0; $i < count($docresult); $i++){
echo "<tr><td>$i. </td><td><a href=\\docs\\\"$docresult[$i]\">$docresult[$i]</a></td><td>$txtresult[$i]</td><tr>";
}
    </table>";
fwrite($FileHolder, $DataToFwrite); 
```

我不知道该怎么做！我是 PHP 新手，不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:44:09.830

我不确定，试试这个

```
$DataToFwrite = "<table border='1'>";
for($i = 0; $i < count($docresult); $i++){
    $href = "docs\\".$docresult[$i];
    $DataToFwrite .= "<tr><td>$i</td><td><a href='$href'>".$docresult[$i]."</a></td><td>".$txtresult[$i]."</td><tr>";
}
$DataToFwrite .= "</table>";
fwrite($FileHolder, $DataToFwrite); 
```

# c++ - 自定义排序以通过构造函数映射

> ID：14478818
> 
> 赞同：0
> 
> 时间：2013-01-23T11:38:50.677
> 
> 标签：c++, stdmap, std-function

我不知道如何通过`std::map`以下方式将自定义排序行为传递给 a：

```
Constructor(const std::function<bool(const Obj&, const Obj&)>& ac_xNewComparator)
: mNewMap(xNewComparator(/*...???....*/)) {} 
```

我怎样才能将比较器传递给地图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:49:15.697

```
class Test
{
public:

    Test(const std::function<bool (int x, const std::string& str)>& comparator)
        : m_map(comparator)
    {
    }

    std::map<int, std::string, std::function<bool (int x, const std::string& str)> > m_map;

}; 
```

# exception - 在检查 oozie 工作流状态时获取 HadoopAccessorException

> ID：14478821
> 
> 赞同：1
> 
> 时间：2013-01-23T11:39:04.447
> 
> 标签：exception, hadoop, workflow, oozie

```
Workflow Name : map-reduce-wf
App Path      : hdfs://10.226.226.34:8020/user/user/examples/apps/map-reduce/workflow.xml
Status        : KILLED
Run           : 0
User          : user
Group         : users
Created       : 2013-01-23 11:25
Started       : 2013-01-23 11:25
Last Modified : 2013-01-23 11:26
Ended         : 2013-01-23 11:26 
```

行动

```
ID                                                                            Status    Ext ID                 Ext Status Err Code

0000002-130123162445627-oozie-oozi-W@mr-node                                  ERROR     -                      ERROR      HadoopAccessorException 
```

Any1出现了这个错误..请指导我..提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-11T21:07:26.753

如果您使用了错误的 jobTracker 端口，则可能会发生这种情况。默认情况下，oozie 示例使用端口 8021 (MR1)，但如果您使用的是 MR2/YARN，则需要将其更改为 8032。此值在您的 job.properties 文件中设置。

如果您想一次更新所有示例作业，请从您的示例目录运行以下命令：

```
sed -i 's/8021/8032/g' examples/apps/*/*.* 
```

确保使用更新覆盖 HDFS 中的示例文件（您甚至可能希望在 HDFS 中 cat 作业.properties 文件以确认它已被覆盖）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T08:37:36.313

遇到了同样的异常。这与用户权限有关。您用于运行 oozie 的用户，检查其权限。

# android - 结果的开始活动，以横向模式返回

> ID：14478829
> 
> 赞同：0
> 
> 时间：2013-01-23T11:39:25.647
> 
> 标签：android, android-activity, camera, landscape, portrait

我通过以下方式启动相机：

```
Intent camera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(camera, PICTURE_RESULT); 
```

它可以正常工作，没有任何错误。唯一的问题是当我返回时，布局处于**横向**模式，即使我保持纵向。我可以在这里获取图像数据。

片刻后屏幕自动返回纵向模式，但随后数据丢失。

在清单中设置方向不起作用。

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.camera"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.camera.MainActivity"
        android:configChanges="orientation"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

您对如何从相机返回到纵向的主要活动有任何提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:45:10.783

```
<activity
android:name="path.youractivity"
android:configChanges="orientation|screenSize"
android:screenOrientation="landscape"/> 
```

我对您的`Activity`方向感到困惑，所以如果您想使用，`portrait`则将其设置`screenOrientation`为**纵向**并`landscape`设置为**横向**

尝试这种方式来设置固定方向

我已经更新了，我认为这只是因为在活动方向期间屏幕尺寸发生了变化。我认为这受 4.0 影响更大，将其添加`screensize`到方向然后测试它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:50:52.213

试着用这个让你的相机以纵向模式打开

```
camera.putExtra(MediaStore.EXTRA_SCREEN_ORIENTATION, ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

# python - 使用 WTForms 进行表单验证，并在 Flask 中使用表单数据自动填充 SQLAlchemy 模型

> ID：14478830
> 
> 赞同：4
> 
> 时间：2013-01-23T11:39:29.023
> 
> 标签：python, flask, flask-sqlalchemy, flask-wtforms

我有一个表单，我必须验证然后将数据保存在数据库中。我有一个`SQLAlchemy`名为的模型`Campaign`，看起来像这样

```
from flask.ext.sqlalchemy import SQLAlchemy

db = SQLAlchemy()
class Campaign(db.Model):
    __tablename__ = 'campaigns'

    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(50))
    priority = db.Column(db.SmallInteger)
    starts_at = db.Column(db.Date)
    ends_at = db.Column(db.Date)
    .... bla bla bla 
```

现在我有一个`WTForm`这样的验证表格

```
from flask.ext.wtf import Form, TextField, IntegerField, DateField, Required, NumberRange
class CampaignForm(Form):

    def date_validation(form, field):
        #some validation on date

    name = TextField(validators=[Required()])
    priority = IntegerField(validators=[Required(), NumberRange(min=1,max=100)])
    start_date = DateField(validators=[Required(), date_validation])
    end_date = DateField(validators=[Required(), date_validation])
    ... bla bla bla 
```

现在要验证和保存表单数据，我可以这样做是我的`view`

`code in Flask`

```
class CampaignsView(MethodView):
    def post(self):
        """
        For creating a new campaign
        """
        form = CampaignForm(request.form)
        if form.validate():
            campaign = Campaign(form.name.data, form.priority.data, and so on )
            session.add(campaign) 
```

现在上面的代码很愚蠢，因为我必须对视图中的每个字段名称进行硬编码。还有其他方法可以用表单字段填充模型的字段吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T18:46:42.123

您可以像这样使用 .populate_obj 方法：

```
if form.validate_on_submit():
    campaign = Campaign()
    form.populate_obj(campaign) 
```

另请查看有关此的[文档](http://wtforms.simplecodes.com/docs/0.6.1/forms.html#wtforms.form.Form.populate_obj)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T14:13:16.493

sqlalachemy 有 wtforms 扩展：

*   WTForms 文档-> [http://wtforms.simplecodes.com/docs/0.6.1/ext.html#module-wtforms.ext.sqlalchemy](http://wtforms.simplecodes.com/docs/0.6.1/ext.html#module-wtforms.ext.sqlalchemy)

还有一些东西可以帮助你

*   kvesteri/wtforms-alchemy · GitHub -> [https://github.com/kvesteri/wtforms-alchemy](https://github.com/kvesteri/wtforms-alchemy)
*   从模型自动创建 WTForms 表单 | Flask（一个 Python 微框架）-> [http://flask.pocoo.org/snippets/60/](http://flask.pocoo.org/snippets/60/)

来自链接：

```
from flaskext.wtf import Form
from wtforms.ext.appengine.db import model_form
from models import MyModel

MyForm = model_form(MyModel, Form) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-23T19:46:05.930

你也可以这样做：

```
if request.method == 'POST' and form.validate() == True:
    create new user 
```

并将用户发送到所需的页面

# cassandra - 从同一台机器上运行多个 cassandra 节点（一个集群）？

> ID：14478833
> 
> 赞同：8
> 
> 时间：2013-01-23T11:39:41.607
> 
> 标签：cassandra, cluster-computing

如何从我的 Ubuntu 运行 3 个 cassandra 节点（实际上是一个集群）？我不想创建 3 个 VMWare/VirtualBox 实例，而是将每个 cassandra 节点配置为侦听不同的端口。一个 cassandra 安装有可能吗？

我想到的一个解决方案是安装 3 个本地 cassandra 并独立配置每个 cassandra.yaml，但实际上我更希望通过安装的 cassandra 配置文件来实现这一点。

显然，我需要这样的配置仅用于测试目的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T16:18:34.957

在 github 上检查这个 Cassandra 集群管理器[https://github.com/pcmanus/ccm](https://github.com/pcmanus/ccm)

（链接是配置多个 Cassandra 以侦听不同 localhost 接口 127.0.0.1、127.0.0.2、127.0.0.3 的脚本）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-26T21:56:17.567

我想如果你有 3 个程序副本，3 个不同的配置，每个端口都不同，并且你必须从可能的连接套接字中排除这些端口，这是可能的。

*编辑*我不明白反对票。这实际上是最简单的方法，拥有一组二进制文件并为每个节点创建一组 conf 和 yaml 文件，然后为所需的每个本地节点使用一个启动脚本。

示例：7199 上的机器 1、7200 上的机器 2、7201 上的机器 3 等等。为您的本地主机 IP、127.0.0.2、.3、.4 等使用别名

Nodetool ring 将按预期工作，并向您显示一个集群，只有它们都将具有相同的根 IP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T18:43:57.447

我似乎在 JMX 库上存在端口冲突问题？也许是卡姆？以前，这似乎不是通过 yaml 配置的，但也许启动 .sh 脚本可以禁用它，这似乎是启动脚本中构建的 JVM 选项。

还有一个技巧是为服务器实例使用不同的环回地址，以便它们可以与相同的端口共存，但这会遇到堵塞问题。那是来自 Packt cassandra 高性能食谱。

但从 1.2.5 及更高版本开始，大致上，我无法成功地做到这一点。

# c# - 如何将 HTTP_X_FORWARDED_FOR 从 IIS 传递到 aspx 页面

> ID：14478836
> 
> 赞同：0
> 
> 时间：2013-01-23T11:39:52.970
> 
> 标签：c#, amazon-ec2, ip

我的网站在 Amazon ELB 上运行。我需要为我们在网站上做的事情捕获客户的 IP 地址——这并不理想，但我们现在肯定需要这个 IP。

这曾经在专用服务器上工作得很好。但是自从搬到ELB后，我在使用时只得到ELB的内部IP地址作为客户端的IP地址`Request.UserHostAddress`

[从](http://www.powercram.com/2011/10/amazon-elb-iis-capturing-client-ip.html)我添加的一些博客开始`X-Forwarded-For`，即使我的 IIS 日志具有正确的客户端 IP，该 IP 也不会传递给实际的网页。

事实上，标题中没有这样的字段..或标题中接近的任何内容。

检查`Request.Headers.ToString()`给了我我的会话 cookie、其他 cookie、客户端浏览器（正确）和其他类似的东西，但没有任何 IP。事实上，我什至看不到 elb 的静态 ip。

`Request.Headers["HTTP_X_FORWARDED_FOR"]`始终为空，这是可以理解的。

请问如何从 C# 获取真实的客户端 IP？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T12:12:54.323

几天前我做了类似的事情！

我不得不使用`Request.ServerVariables`并寻找`REMOTE_ADDR`找到客户端IP。

像这样的东西：

```
if (Request.ServerVariables["REMOTE_ADDR"] != null)
{
    string userIP = Request.ServerVariables["REMOTE_ADDR"]; 
} 
```

这对我有用..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T10:29:13.033

在我的测试中，客户端 IP 地址在以下两种情况下均由弹性负载均衡器填充。

```
Request.ServerVariables["HTTP_X_FORWARDED_FOR"];

Request.Headers["X-Forwarded-For"]; 
```

请注意，这些变量的格式不一定只是客户端 IP 地址。如果请求被转发多次，则服务器 IP 地址将附加逗号和空格作为分隔符。

See [Amazon's Elastic Load Balancing Developer Guide](http://awsdocs.s3.amazonaws.com/ElasticLoadBalancing/latest/elb-dg.pdf) for further details (search for X-Forwarded-For).

# javascript - Javascript 单元测试 addEventListener 语法

> ID：14478837
> 
> 赞同：0
> 
> 时间：2013-01-23T11:39:59.077
> 
> 标签：javascript, unit-testing, addeventlistener

单元测试的正确语法是什么？

当我在浏览器中打开它时，以下工作。目的是在输入框`ib`更改时读取输入框的内容，并将其解释值写入表格单元格`c5`...

```
var c5 = document.createElement('td');

var ib = document.createElement('input');
// For all browsers except IE before Version 9 -see http://help.dottoro.com/ljeuqqoq.php
if (ib.addEventListener)
    {
    ib.addEventListener('change', Action01InputBox (ib, c5), false);
    }
// For IE before Version 9 -see http://help.dottoro.com/ljeuqqoq.php
    else {
        if (ib.attachEvent){
        ib.addEventListener('change', Action01InputBox (ib, c5), false);
        }
    } 
```

这是事件监听器。当然，它返回一个函数。

注意该函数`EmptyNode(c5)`只是删除目标节点的所有内容并`RealNumberFromInput (ib.value)`通过正则表达式从输入字符串中获取一个实数......

```
function Action01InputBox (ib, c5)
{
    return function ()
    {
        EmptyNode(c5);
        var r = RealNumberFromInput (ib.value);
        c5.appendChild(document.createTextNode(r));
    };
}; 
```

这是单元测试...

```
Action01InputBoxTest = TestCase("Action01InputBoxTest");

Action01InputBoxTest.prototype.test01 = function()
{   
    // Text box
    var r = 0.123;
    var ib = document.createElement('input');
    ib.setAttribute('value', document.createTextNode(r));

    // Target cell
    var c5 = document.createElement('td');
    c5.appendChild(document.createTextNode("Bogus"));

    // Do action
    Action01InputBox(ib, c5);
    assertEquals(c5.textContent, r);    
}; 
```

的应该已经从“Bogus”变成了“0.123”，所以测试失败了`textContent`。`c5`

如果我理解正确，问题是测试调用了事件侦听器的返回值，而不是函数，但我无法从测试中弄清楚如何正确调用函数。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T02:45:06.890

`ActionInputBox`应该是一个包装在一个匿名函数中：

```
ib.addEventListener('change', function(){Action01InputBox (ib, c5)}, false); 
```

# android - 在 android 中将我们的 SDCard 文件夹与 DropBox 同步

> ID：14478841
> 
> 赞同：0
> 
> 时间：2013-01-23T11:40:11.713
> 
> 标签：android, dropbox

我想制作一个负责与 Dropbox 服务器进行 2-Way 同步的 Android 应用程序。为此，我已经使用 Dropbox SDK 从特定文件夹获取数据并将数据发送到特定文件夹。但是此 SDK 不适用于 2 向同步，这表明无论何时在服务器或本地文件夹中进行任何单个更改，它都会在后台自动同步。

请建议我有关此主题的任何解决方案。

提前致谢。

# javascript - 如果您不在 RegExp() 前面使用 new 而不是仅在 RegExp() 之前使用，是否会提高性能？

> ID：14478844
> 
> 赞同：-1
> 
> 时间：2013-01-23T11:40:20.710
> 
> 标签：javascript, regex, performance

我想替换字符串中所有出现的子字符串。
下面两个例子会有什么不同吗？

```
var str='A horse walks into a bar and the bartender asks "Hey, why the long face?".';

str.replace(new RegExp('bar','g'),'restaurant');
// versus
str.replace(RegExp('bar','g'),'restaurant'); 
```

**注意：**
这是一个简化的示例，与上面不同，我*需要*使用 RegExp 而不是文字正则表达式来连接字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:59:55.777

阅读有关该[`RegExp`](http://es5.github.com/#x15.1.4.8)功能的功能的规范：

> **[15.10.3 作为函数调用的 RegExp 构造函数](http://es5.github.com/#x15.10.3)**
> 
> 如果 pattern 是 [[Class]] 内部属性为 "RegExp" 且 flags 未定义的对象 R，则返回 R 不变。*否则调用标准的内置 RegExp 构造函数 (15.10.4.1)*，就好像通过表达式 new RegExp(pattern, flags) 并返回由该构造函数构造的对象。
> 
> **[15.10.4 正则表达式构造函数](http://es5.github.com/#x15.10.4)**
> 
> 当 RegExp 作为新表达式的一部分被调用时，它是一个构造函数：它初始化新创建的对象。
> 
> 如果pattern是一个对象R，其[[Class]]内部属性是“RegExp”并且flags是未定义的，那么令P为用于构造R的模式，令F为用于构造R的标志。如果pattern是一个对象R其 [[Class]] 内部属性为“RegExp”且 flags 未定义，则抛出 TypeError 异常。否则，如果 pattern 未定义，则令 P 为空字符串，否则为 ToString(pattern)，如果 flags 未定义，则令 F 为空字符串，否则为 ToString(flags)。
> 
> [...并从模式构建一个正则表达式]

所以实际上没有区别。没有`new`它可能会更慢，因为它需要检查 的类型`R`，而`new`它可能会更慢，因为有一个额外的 new-expression 而不是简单的函数调用。

我猜即使使用示例的实际性能测量，您也不会注意到差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:53:17.863

虽然我不确定 RegEx 函数的内部结构是否有效，但如果函数调用`this`它将使用全局对象而不是新项目。

性能方面是一样的，但是如果您使用多个正则表达式，它们可能会相互冲突，因为它将替换全局对象上的任何变量。

这两个调用都不是首选方式，而是语法是： `str.replace(/bar/g,'restaurant');`

在示例的情况下，以下内容也将起作用：

```
var myRegex = /bar/g;
str.replace(myRegex,'restaurant'); 
```

# eclipse-plugin - 插件无法加载类 startup.application.Appplication

> ID：14478846
> 
> 赞同：-1
> 
> 时间：2013-01-23T11:40:22.807
> 
> 标签：eclipse-plugin, eclipse-rcp

我正在尝试在 Eclipse Juno 中运行 RCP 应用程序，但出现以下错误！我该如何解决这个问题？

!ENTRY org.eclipse.osgi 4 0 2013-01-23 17:03:46.500 !MESSAGE 应用程序错误 !STACK 1 org.eclipse.core.runtime.CoreException: 插件 org.csstudio.nsls2.product 无法加载类 org.csstudio.startup.application.Application。在 org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:176) 在 org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194) .core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:905) 在 org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243) 在 org.eclipse.core.internal.registry.ConfigurationElementHandle .createExecutableExtension(ConfigurationElementHandle.java:55) 在 org.eclipse。AbstractBundle.loadClass(AbstractBundle.java:1212) at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174) ... 16 更多 发生错误。查看日志文件 C:\ekta\eclipse-rcp-juno-SR1-win32_2\runtime-css-nsls2.product.metadata.log。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:06:25.943

通常，如果嵌入式视图之一或某些东西无法启动，您的应用程序将无法启动。尝试查看您的所有依赖类是否可用，并且在此之前没有抛出任何其他异常。

日志文件 C:\ekta\eclipse-rcp-juno-SR1-win32_2\runtime-css-nsls2.product.metadata.log。可能是开始寻找的好人选。

还可以尝试使用 org.eclipse.osgi 插件中提供的跟踪信息运行（尤其是类加载可能很有趣）

# mysql - 在同一表中插入或更新另一列时触发更新列

> ID：14478856
> 
> 赞同：1
> 
> 时间：2013-01-23T11:40:48.023
> 
> 标签：mysql, sql, triggers

如果同一张表（recycle_center）的字段有任何插入或更新，我想更新表的`image_updated_at`字段。我试过这个::`recycle_center``image_url`

```
CREATE OR REPLACE TRIGGER my_trigger
AFTER INSERT OR UPDATE OF image_url ON recycle_center
BEGIN

    UPDATE recycle_center SET image_updated_at=NOW()
    WHERE old.id=new.id

END 
```

但是，它显示一条错误消息。怎么解决？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:16:37.197

我认为你不需要触发器来解决这个问题。简单地说，对于 image_updated_at 字段，使 type=TIMESTAMP，default=CURRENT_TIMESTAMP 和 Attributes= on update CURRENT_TIMESTAMP。

# c++ - VS2008io.h文件编译错误

> ID：14478859
> 
> 赞同：0
> 
> 时间：2013-01-23T11:40:57.573
> 
> 标签：c++, visual-studio-2008

我正在尝试在 VS2008 中构建一个项目，但出现以下错误：

```
Error   1   error C2143: syntax error : missing ';' before '['
    C:\Program Files\Microsoft Visual Studio 9.0\VC\include\io.h    185 lmlib
.
.
.
Error   7   error C2143: syntax error : missing ';' before 'type'
    C:\Program Files\Microsoft Visual Studio 9.0\VC\include\io.h    192 lmlib 
```

这个项目在 VS2005 中运行良好，但为什么在 VS2008 中无法运行？我正在附加 io.h 文件，请帮助我如何解决这些错误

```
 #if _MSC_VER > 1000
    #pragma once
    #endif

    #ifndef _INC_IO
    #define _INC_IO

    #include <crtdefs.h>

    #ifdef  _MSC_VER
    /*
     * Currently, all MS C compilers for Win32 platforms default to 8 byte
     * alignment.
     */
    #pragma pack(push,_CRT_PACKING)
    #endif  /* _MSC_VER */

    #ifndef _POSIX_

    #ifdef  __cplusplus
    extern "C" {
    #endif

    #ifndef _FSIZE_T_DEFINED
    typedef unsigned long _fsize_t; /* Could be 64 bits for Win32 */
    #define _FSIZE_T_DEFINED
    #endif

    #ifndef _FINDDATA_T_DEFINED

    struct _finddata32_t {
        unsigned    attrib;
        __time32_t  time_create;    /* -1 for FAT file systems */
        __time32_t  time_access;    /* -1 for FAT file systems */
        __time32_t  time_write;
        _fsize_t    size;
        char        name[260];
    };

    struct _finddata32i64_t {
        unsigned    attrib;
        __time32_t  time_create;    /* -1 for FAT file systems */
        __time32_t  time_access;    /* -1 for FAT file systems */
        __time32_t  time_write;
        __int64     size;
        char        name[260];
    };

    struct _finddata64i32_t {
        unsigned    attrib;
        __time64_t  time_create;    /* -1 for FAT file systems */
        __time64_t  time_access;    /* -1 for FAT file systems */
        __time64_t  time_write;
        _fsize_t    size;
        char        name[260];
    };

    struct __finddata64_t {
        unsigned    attrib;
        __time64_t  time_create;    /* -1 for FAT file systems */
        __time64_t  time_access;    /* -1 for FAT file systems */
        __time64_t  time_write;
        __int64     size;
        char        name[260];
    };

    #ifdef _USE_32BIT_TIME_T
    #define _finddata_t     _finddata32_t
    #define _finddatai64_t  _finddata32i64_t

    #define _findfirst      _findfirst32
    #define _findnext       _findnext32
    #define _findfirsti64   _findfirst32i64
    #define _findnexti64     _findnext32i64

    #else
    #define _finddata_t     _finddata64i32_t
    #define _finddatai64_t  __finddata64_t

    #define _findfirst      _findfirst64i32
    #define _findnext       _findnext64i32
    #define _findfirsti64   _findfirst64
    #define _findnexti64    _findnext64

    #endif

    #define _FINDDATA_T_DEFINED
    #endif

    #ifndef _WFINDDATA_T_DEFINED

    struct _wfinddata32_t {
        unsigned    attrib;
        __time32_t  time_create;    /* -1 for FAT file systems */
        __time32_t  time_access;    /* -1 for FAT file systems */
        __time32_t  time_write;
        _fsize_t    size;
        wchar_t     name[260];
    };

    struct _wfinddata32i64_t {
        unsigned    attrib;
        __time32_t  time_create;    /* -1 for FAT file systems */
        __time32_t  time_access;    /* -1 for FAT file systems */
        __time32_t  time_write;
        __int64     size;
        wchar_t     name[260];
    };

    struct _wfinddata64i32_t {
        unsigned    attrib;
        __time64_t  time_create;    /* -1 for FAT file systems */
        __time64_t  time_access;    /* -1 for FAT file systems */
        __time64_t  time_write;
        _fsize_t    size;
        wchar_t     name[260];
    };

    struct _wfinddata64_t {
        unsigned    attrib;
        __time64_t  time_create;    /* -1 for FAT file systems */
        __time64_t  time_access;    /* -1 for FAT file systems */
        __time64_t  time_write;
        __int64     size;
        wchar_t     name[260];
    };

    #ifdef _USE_32BIT_TIME_T
    #define _wfinddata_t    _wfinddata32_t
    #define _wfinddatai64_t _wfinddata32i64_t

    #define _wfindfirst     _wfindfirst32
    #define _wfindnext      _wfindnext32
    #define _wfindfirsti64  _wfindfirst32i64
    #define _wfindnexti64   _wfindnext32i64

    #else                  
    #define _wfinddata_t    _wfinddata64i32_t
    #define _wfinddatai64_t _wfinddata64_t

    #define _wfindfirst     _wfindfirst64i32
    #define _wfindnext      _wfindnext64i32
    #define _wfindfirsti64  _wfindfirst64
    #define _wfindnexti64   _wfindnext64

    #endif

    #define _WFINDDATA_T_DEFINED
    #endif

    /* File attribute constants for _findfirst() */

    #define _A_NORMAL       0x00    /* Normal file - No read/write restrictions */
    #define _A_RDONLY       0x01    /* Read only file */
    #define _A_HIDDEN       0x02    /* Hidden file */
    #define _A_SYSTEM       0x04    /* System file */
    #define _A_SUBDIR       0x10    /* Subdirectory */
    #define _A_ARCH         0x20    /* Archive file */

    /* function prototypes */

    #ifndef _SIZE_T_DEFINED
    #ifdef  _WIN64
    typedef unsigned __int64    size_t;
    #else
    typedef _W64 unsigned int   size_t;
    #endif
    #define _SIZE_T_DEFINED
    #endif
    //from this line onwards i got errors//
    _Check_return_ _CRTIMP int __cdecl _access(_In_z_ const char * _Filename, _In_ int      _AccessMode);
    _Check_return_wat_ _CRTIMP errno_t __cdecl _access_s(_In_z_ const char * _Filename,     _In_ int _AccessMode);
    _Check_return_ _CRTIMP int __cdecl _chmod(_In_z_ const char * _Filename, _In_ int   _Mode);
    /* note that the newly added _chsize_s takes a 64 bit value */
    _Check_return_ _CRTIMP int __cdecl _chsize(_In_ int _FileHandle, _In_ long _Size);
    _Check_return_wat_ _CRTIMP errno_t __cdecl _chsize_s(_In_ int _FileHandle,_In_ __int64   _Size);
    _Check_return_opt_ _CRTIMP int __cdecl _close(_In_ int _FileHandle);
    _Check_return_opt_ _CRTIMP int __cdecl _commit(_In_ int _FileHandle);
    _Check_return_ _CRT_INSECURE_DEPRECATE(_sopen_s) _CRTIMP int __cdecl _creat(_In_z_   const char * _Filename, _In_ int _PermissionMode);
    _Check_return_ _CRTIMP int __cdecl _dup(_In_ int _FileHandle);
    _Check_return_ _CRTIMP int __cdecl _dup2(_In_ int _FileHandleSrc, _In_ int  _FileHandleDst);
    _Check_return_ _CRTIMP int __cdecl _eof(_In_ int _FileHandle);
    _Check_return_ _CRTIMP long __cdecl _filelength(_In_ int _FileHandle);
    _Check_return_ _CRTIMP intptr_t __cdecl _findfirst32(_In_z_ const char * _Filename,   _Out_ struct _finddata32_t * _FindData);
    _Check_return_ _CRTIMP int __cdecl _findnext32(_In_ intptr_t _FindHandle, _Out_ struct   _finddata32_t * _FindData);
    _Check_return_opt_ _CRTIMP int __cdecl _findclose(_In_ intptr_t _FindHandle);
    _Check_return_ _CRTIMP int __cdecl _isatty(_In_ int _FileHandle);
    _CRTIMP int __cdecl _locking(_In_ int _FileHandle, _In_ int _LockMode, _In_ long   _NumOfBytes);
    _Check_return_opt_ _CRTIMP long __cdecl _lseek(_In_ int _FileHandle, _In_ long _Offset, _In_ int _Origin);
    _Check_return_wat_ _CRTIMP errno_t __cdecl _mktemp_s(_Inout_z_cap_(_Size) char * _TemplateName, _In_ size_t _Size);
   __DEFINE_CPP_OVERLOAD_SECURE_FUNC_0_0(errno_t, _mktemp_s, _Deref_prepost_z_ char,  _TemplateName)
    _Check_return_ __DEFINE_CPP_OVERLOAD_STANDARD_FUNC_0_0(char *, __RETURN_POLICY_DST,  _CRTIMP, _mktemp, _Inout_z_, char, _TemplateName)
    _Check_return_ _CRTIMP int __cdecl _pipe(_Inout_cap_c_(2) int * _PtHandles, _In_  unsigned int _PipeSize, _In_ int _TextMode);
    _Check_return_ _CRTIMP int __cdecl _read(_In_ int _FileHandle, _Out_bytecap_(_MaxCharCount) void * _DstBuf, _In_ unsigned int _MaxCharCount);

    #ifndef _CRT_DIRECTORY_DEFINED
    #define _CRT_DIRECTORY_DEFINED
    _Check_return_ _CRTIMP int __cdecl remove(_In_z_ const char * _Filename);
    _Check_return_ _CRTIMP int __cdecl rename(_In_z_ const char * _OldFilename, _In_z_   const char * _NewFilename);
    _Check_return_ _CRTIMP int __cdecl _unlink(_In_z_ const char * _Filename);
    #if !__STDC__
    _Check_return_ _CRT_NONSTDC_DEPRECATE(_unlink) _CRTIMP int __cdecl unlink(_In_z_ const  char * _Filename);
    #endif
    #endif

    _Check_return_ _CRTIMP int __cdecl _setmode(_In_ int _FileHandle, _In_ int _Mode);
    _Check_return_ _CRTIMP long __cdecl _tell(_In_ int _FileHandle);
    _CRT_INSECURE_DEPRECATE(_umask_s) _CRTIMP int __cdecl _umask(_In_ int _Mode);
    _Check_return_wat_ _CRTIMP errno_t __cdecl _umask_s(_In_ int _NewMode, _Out_ int *   _OldMode);
    _CRTIMP int __cdecl _write(_In_ int _FileHandle, _In_bytecount_(_MaxCharCount) const       void * _Buf, _In_ unsigned int _MaxCharCount);

    _Check_return_ _CRTIMP __int64 __cdecl _filelengthi64(_In_ int _FileHandle);
    _Check_return_ _CRTIMP intptr_t __cdecl _findfirst32i64(_In_z_ const char * _Filename,     _Out_ struct _finddata32i64_t * _FindData);
    _Check_return_ _CRTIMP intptr_t __cdecl _findfirst64i32(_In_z_ const char * _Filename,   _Out_ struct _finddata64i32_t * _FindData);
    _Check_return_ _CRTIMP intptr_t __cdecl _findfirst64(_In_z_ const char * _Filename,   _Out_ struct __finddata64_t * _FindData);
    _Check_return_ _CRTIMP int __cdecl _findnext32i64(_In_ intptr_t _FindHandle, _Out_  struct _finddata32i64_t * _FindData);
    _Check_return_ _CRTIMP int __cdecl _findnext64i32(_In_ intptr_t _FindHandle, _Out_   struct _finddata64i32_t * _FindData);
    _Check_return_ _CRTIMP int __cdecl _findnext64(_In_ intptr_t _FindHandle, _Out_ struct  __finddata64_t * _FindData);
    _Check_return_opt_ _CRTIMP __int64 __cdecl _lseeki64(_In_ int _FileHandle, _In_ __int64  _Offset, _In_ int _Origin);
    _Check_return_ _CRTIMP __int64 __cdecl _telli64(_In_ int _FileHandle);

    _Check_return_wat_ _CRTIMP errno_t __cdecl _sopen_s(_Out_ int * _FileHandle, _In_z_  const char * _Filename,_In_ int _OpenFlag, _In_ int _ShareFlag, _In_ int _PermissionMode);

    #if !defined(__cplusplus)
    _Check_return_ _CRT_INSECURE_DEPRECATE(_sopen_s) _CRTIMP int __cdecl _open(_In_z_ const  char * _Filename, _In_ int _OpenFlag, ...);
    _Check_return_ _CRT_INSECURE_DEPRECATE(_sopen_s) _CRTIMP int __cdecl _sopen(_In_z_  const char * _Filename, _In_ int _OpenFlag, int _ShareFlag, ...);
    #else

    /* these function do not validate pmode; use _sopen_s */
    extern "C++" _Check_return_ _CRT_INSECURE_DEPRECATE(_sopen_s) _CRTIMP int __cdecl   _open(_In_z_ const char * _Filename, _In_ int _Openflag, _In_ int _PermissionMode = 0);
    extern "C++" _Check_return_ _CRT_INSECURE_DEPRECATE(_sopen_s) _CRTIMP int __cdecl   _sopen(_In_z_ const char * _Filename, _In_ int _Openflag, _In_ int _ShareFlag, _In_ int   _PermissionMode = 0);

    #endif

    #ifndef _WIO_DEFINED

    /* wide function prototypes, also declared in wchar.h  */

    _Check_return_ _CRTIMP int __cdecl _waccess(_In_z_ const wchar_t * _Filename, _In_ int  _AccessMode);
    _Check_return_wat_ _CRTIMP errno_t __cdecl _waccess_s(_In_z_ const wchar_t * _Filename, _In_ int _AccessMode);
    _Check_return_ _CRTIMP int __cdecl _wchmod(_In_z_ const wchar_t * _Filename, _In_ int _Mode);
    _Check_return_ _CRT_INSECURE_DEPRECATE(_wsopen_s) _CRTIMP int __cdecl _wcreat(_In_z_ const wchar_t * _Filename, _In_ int _PermissionMode);
    _Check_return_ _CRTIMP intptr_t __cdecl _wfindfirst32(_In_z_ const wchar_t * _Filename,  _Out_ struct _wfinddata32_t * _FindData);
    _Check_return_ _CRTIMP int __cdecl _wfindnext32(_In_ intptr_t _FindHandle, _Out_ struct  _wfinddata32_t * _FindData);
    _Check_return_ _CRTIMP int __cdecl _wunlink(_In_z_ const wchar_t * _Filename);
    _Check_return_ _CRTIMP int __cdecl _wrename(_In_z_ const wchar_t * _OldFilename, _In_z_  const wchar_t * _NewFilename);
    _CRTIMP errno_t __cdecl _wmktemp_s(_Inout_z_cap_(_SizeInWords) wchar_t * _TemplateName,  _In_ size_t _SizeInWords);
    __DEFINE_CPP_OVERLOAD_SECURE_FUNC_0_0(errno_t, _wmktemp_s, _Deref_prepost_z_ wchar_t,  _TemplateName)
   __DEFINE_CPP_OVERLOAD_STANDARD_FUNC_0_0(wchar_t *, __RETURN_POLICY_DST, _CRTIMP,  _wmktemp, _Inout_z_, wchar_t, _TemplateName)

    _Check_return_ _CRTIMP intptr_t __cdecl _wfindfirst32i64(_In_z_ const wchar_t *   _Filename, _Out_ struct _wfinddata32i64_t * _FindData);
    _Check_return_ _CRTIMP intptr_t __cdecl _wfindfirst64i32(_In_z_ const wchar_t * _Filename, _Out_ struct _wfinddata64i32_t * _FindData);
    _Check_return_ _CRTIMP intptr_t __cdecl _wfindfirst64(_In_z_ const wchar_t * _Filename,  _Out_ struct _wfinddata64_t * _FindData);
    _Check_return_ _CRTIMP int __cdecl _wfindnext32i64(_In_ intptr_t _FindHandle, _Out_  struct _wfinddata32i64_t * _FindData);
    _Check_return_ _CRTIMP int __cdecl _wfindnext64i32(_In_ intptr_t _FindHandle, _Out_  struct _wfinddata64i32_t * _FindData);
    _Check_return_ _CRTIMP int __cdecl _wfindnext64(_In_ intptr_t _FindHandle, _Out_ struct  _wfinddata64_t * _FindData);

    _Check_return_wat_ _CRTIMP errno_t __cdecl _wsopen_s(_Out_ int * _FileHandle, _In_z_  const wchar_t * _Filename, _In_ int _OpenFlag, _In_ int _ShareFlag, _In_ int _PermissionFlag);

    #if !defined(__cplusplus) || !defined(_M_IX86)

    _Check_return_ _CRT_INSECURE_DEPRECATE(_wsopen_s) _CRTIMP int __cdecl _wopen(_In_z_  const wchar_t * _Filename, _In_ int _OpenFlag, ...);
    _Check_return_ _CRT_INSECURE_DEPRECATE(_wsopen_s) _CRTIMP int __cdecl _wsopen(_In_z_   const wchar_t * _Filename, _In_ int _OpenFlag, int _ShareFlag, ...);

    #else

    /* these function do not validate pmode; use _sopen_s */
    extern "C++" _CRT_INSECURE_DEPRECATE(_wsopen_s) _CRTIMP int __cdecl _wopen(_In_z_ const  wchar_t * _Filename, _In_ int _OpenFlag, _In_ int _PermissionMode = 0);
    extern "C++" _CRT_INSECURE_DEPRECATE(_wsopen_s) _CRTIMP int __cdecl _wsopen(_In_z_  const wchar_t * _Filename, _In_ int _OpenFlag, _In_ int _ShareFlag, int _PermissionMode =  0);

    #endif

    #define _WIO_DEFINED
    #endif

    int  __cdecl __lock_fhandle(_In_ int _Filehandle);
    void __cdecl _unlock_fhandle(_In_ int _Filehandle); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:45:53.997

很难说没有一些代码可以工作，也许你在一个标题中的类声明结束后错过了一个分号，然后当包含 io.h 时它会抱怨它。在黑暗中刺伤对不起。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-23T12:58:50.517

您可能需要下载较新的 Windows SDK，它以前是 Platform SDK。

编辑：详细说明迁移到较新的 vc2008 时存在一些差异。当我从 vc2005 迁移到 vc2008 时，我有一些问题得到了纠正，更新的 sdk 解决了。我并不是说标准头文件中存在错误，只是旧 SDK 与 vc2008 中的头文件不匹配。如果没有看到更多代码，很难说，但你不能从 OP 所说的内容中消除它作为潜在的解决方案。

我还应该为 OP 添加更新到新 SDK 仍将在 vc2005 中正常运行，如果您需要尝试，您可能需要运行“Windows SDK 配置工具”以在 Visual Studio 中设置较新的 SDK这个。

# database - 在 MS Access 中通过 VBA 添加附件

> ID：14478860
> 
> 赞同：1
> 
> 时间：2013-01-23T11:41:02.257
> 
> 标签：database, vba, ms-access

我的一种形式如下

![在此处输入图像描述](../Images/c58bd6e6c7e87da4d9e5b5124dab997e.png)

这是在 MS Access 中制作的表格，允许我的用户添加观察结果。观察可能包括如图所示的附件。我可以单击附件控件并将附件添加到弹出的弹出窗口中。但是，可以预期的是，当我单击如上表所示的添加按钮时，该附件应添加到表格的相应字段中。

此表单上的所有控件均未绑定。

ADD按钮后面写的代码如下：

```
Private Sub cmdAdd_Click()
    Dim db As DAO.Database
    Dim rs As DAO.Recordset

    Set db = CurrentDb
    Set rs = db.OpenRecordset("tblObservation", dbOpenDynaset)

    rs.AddNew

    rs![Artifact] = artifactId
    rs![Observation Text] = txtObservationText.Value

    'rs![Attachments] = ' not able to solve this

    rs.Update
    rs.Close

    Set rs = Nothing
    Set db = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-30T15:45:56.510

您可以使用[Microsoft的以下参考](https://docs.microsoft.com/en-us/office/vba/access/concepts/data-access-objects/work-with-attachments-in-dao)

相关的代码是这样的：

```
'  Instantiate the parent recordset.  
Set rsEmployees = db.OpenRecordset("Employees") 

'… Code to move to desired employee 

' Activate edit mode. 
rsEmployees.Edit 

' Instantiate the child recordset. 
Set rsPictures = rsEmployees.Fields("Pictures").Value  

' Add a new attachment. 
rsPictures.AddNew 
rsPictures.Fields("FileData").LoadFromFile "EmpPhoto39392.jpg" 
rsPictures.Update 

' Update the parent record 
rsEmployees.Update 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-19T09:44:17.633

首先，将附件控件绑定到所需表的附件字段

```
 Private Sub cmdAdd_Click()
           'Me.Dirty = False  'fix Error 3188 is Could not update...
            Dim db As DAO.Database
            Dim rs As DAO.Recordset
            Dim rsFiles As DAO.RecordSet2

            Set db = CurrentDb
            'Create a DAO Recordset from a table in the current database
            Set rs = db.OpenRecordset("tblObservation")

            rs.AddNew
            rs![Artifact] = artifactId
            rs![Observation Text] = txtObservationText.Value        

            Set rsFiles = rs.Fields("Attachments").Value 
            'This is a piece of code to get multiple files
            For i = 0 To AttachmentControl.AttachmentCount-1
                rsFiles.AddNew
                'Attachment control is used as an uploader file 
                rsFiles.Fields("FileData").LoadFromFile  AttachmentControl.FileName(i)
            Next i

            rsFiles.Update 
            rsFiles.Close

            rs.Update
            rs.Close

            Set rs = Nothing
            Set db = Nothing
        End Sub 
```

# ruby - ruby yaml 转储：如何防止别名取消引用？

> ID：14478861
> 
> 赞同：1
> 
> 时间：2013-01-23T11:41:03.013
> 
> 标签：ruby, yaml, alias

> **可能重复：**
> [在不破坏锚点和别名的情况下读写 YAML 文件？](https://stackoverflow.com/questions/11665897/read-and-write-yaml-files-without-destroying-anchors-and-aliases)

我正在使用带有默认 yaml 引擎的 ruby​​ 1.9.3 在应用程序中动态修改 yaml 文件，如下所示：

```
require 'yaml'

langs = YAML.load_file("i18n/de.yml")

langs["key"] = 'val' # change key to new value val

File.open("i18n/de.yml", 'w') do |f|
    YAML.dump(langs,f)
end 
```

这很好用，但是我在 yml 中遇到了别名问题。所以假设`de.yml`是这样的：

```
---
main: &aliasName
  key:
    title: translation
  another_key:
    title: another translation

something:
  <<: *aliasName 
```

像上面那样调用脚本后，这个 get 被翻译成：

```
---
main:
  key: &18803600
    title: translation
  another_key: &18803120
    title: another translation
something:
  key: *18803600
  another_key: *18803120
key: val 
```

如果我现在`main`通过手动编辑文件来添加一些东西，例如`main.third_key`，它不会得到别名，`something`因为别名被显式地转换为仅别名`main.key`和`main.another_key`介于`main`和之间`something`。

所以看起来别名在`YAML.dump`or上被取消引用`YAML.load`。有没有办法像在 yaml 文件中定义的那样保存别名？`de.yml`可能看起来像这样（我不在乎别名是否更改）：

```
---
main: &18803600
  key: 
    title: translation
  another_key:
    title: another translation
something:
  <<: *18803600
key: val 
```

谢谢你的帮助。

# android - Android LibGDX 像素图问题

> ID：14478862
> 
> 赞同：3
> 
> 时间：2013-01-23T11:41:13.157
> 
> 标签：android, libgdx, pixmap

我正在使用 libGDX 为 Android 开发游戏。我实现了“聚光灯效果”来突出教程关卡中的一些场景元素。我确实使用 Pixmap 类来实现这一点。所以我做了这样的事情：

```
public class ComplexSpotlight implements MoveObserver{

// somewhere in class

    public void update(){
        black.setColor(0, 0, 0, 0.7f);
        black.fill();

        black.setColor(0, 0, 0, 0);

        for(Map.Entry<MoveObservable, Vector2> entry : currentObservablePositions.entrySet()){
            Vector2 position = entry.getValue();

            int x = (int)(Gdx.graphics.getWidth()/2+position.x);
            int y = (int)(Gdx.graphics.getHeight()*1.5f-position.y);

            int radius = 50;

            black.fillCircle(x, y, radius);
            System.out.println("at "+x+" "+y);
        }

        overlay.dispose();
        overlay = new Texture(black);
    }

    public Texture getOverlayTexture(){
        return overlay;
    } 
```

快速解释 - 我正在创建一个像素图，用颜色（0,0,0,0.7f）填充它。在此之后，我使用 Pixmap.fillCircle() 方法绘制透明圆圈。然后我正在使用这个像素图创建新的纹理。我使用以下设备测试了此代码：HTC One V(480*800)、Sony XPeria Neo 15i(480*854)、HTC Desire S(480*800)，效果很好；

![在此处输入图像描述](../Images/1bd81fc876e829d645698937d468cb0d.png)

但是今天我发现 HTC One X(1280*720) 和 Gamsung Nexus(1280*720) 有问题 - 我只看到黑屏。

因此，如果有人给我一些关于这个问题的解释，那就太好了。链接，想法 - 任何事情都可能有帮助。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:55:22.983

我不确定，但我在我的应用程序上也遇到了 Pixmap 填充 alpha 的问题。我发现 pixmap 中的 fillCircle 只是没有正确设置 alpha。当我稍微研究一下时，我发现更好的方法是使用 FrameBuffer。

我在以下 [libgdx SpriteBatch 渲染到纹理中找到了详细信息](https://stackoverflow.com/questions/7551669/libgdx-spritebatch-render-to-texture)

我一直在使用的一些代码是

```
public class SplashScreen extends GameScreen {

SpriteBatch batch;
BitmapFont font;

FrameBuffer frmBuff;
TextureRegion frm;
OrthographicCamera frmCam;

int frmSizeX = 256;
int frmSizeY = 256;

public SplashScreen(ReactorApp game) {
    super(game);
    setClearColor(new Color(1,1,1,1));
}

@Override
public void show() {
    // TODO Auto-generated method stub
    super.show();
    batch = new SpriteBatch();
    font = new BitmapFont();

    frmBuff = new FrameBuffer(Format.RGBA8888, frmSizeX, frmSizeY, false);
    frm = new TextureRegion(frmBuff.getColorBufferTexture());
    frmCam= new OrthographicCamera(frmSizeX, frmSizeY);
    frmCam.translate(frmSizeX/2, frmSizeY/2);
}

@Override
public void dispose() {
    // TODO Auto-generated method stub
    super.dispose();
}

public void drawToTexture(){
    frmCam.update();
    ShapeRenderer shape = new ShapeRenderer();
    shape.setProjectionMatrix(frmCam.combined);
    frmBuff.begin();

    Gdx.gl.glClearColor(0, 0, 0, 0);
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    shape.begin(ShapeType.FilledRectangle);
    shape.setColor(Color.BLACK);
    shape.filledRect(0,0,frmSizeX/2, frmSizeY/2);
    shape.end();

    shape.begin(ShapeType.FilledCircle);
    shape.setColor(Color.GREEN);
    shape.filledCircle(MathUtils.random(frmSizeX), MathUtils.random(frmSizeY), 20);
    shape.end();

    frmBuff.end();
}

int pos = 0;

@Override
public void render(float delta) {
    super.render(delta);
    drawToTexture();

    batch.setProjectionMatrix(cam.combined);

    batch.begin();
    batch.draw(frm, pos++, 30,frmSizeX,frmSizeY);
    if(pos>Gdx.graphics.getWidth()-frmSizeX)pos=0;
    font.setColor(Color.RED);
    StringBuilder message = new StringBuilder();
    message.append("Time :"+(int)(delta*1000)+"\n");
    font.drawMultiLine(batch, message.toString(), 10, Gdx.graphics.getHeight());
    batch.end();
}

} 
```

这给出了我一直在玩的想法，但它似乎运作良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:13:18.677

有问题的手机都是相当大的屏幕。你的纹理内存用完了还是类似的东西？（假设您以全分辨率绘图。）您可以尝试渲染到较小的视口，看看是否能解决问题。

既然我知道这个猜测是正确的，我很好奇应用程序（或 Android 的？）日志或 OpenGL 错误状态中是否有任何证据表明这个问题，因为您知道原因是什么。

# vba - 将文档另存为不带 VBA 代码的 .docx

> ID：14478865
> 
> 赞同：5
> 
> 时间：2013-01-23T11:41:25.410
> 
> 标签：vba, ms-word

我用 VBA 代码和用户表单创建了一个模板。我将其保存为 .dotm（启用宏的模板）。

我想打开模板，使用界面在文档中进行更改，然后将文档另存为 .docx 而不引用模板/代码。当我打开 docx 并打开 Visual Basic 编辑器时，我在那里找到了代码。

这是我退出界面的代码

```
Private Sub Sair_Click()
ActiveDocument.Bookmarks("NomeProj").Range.text = Nomeproj.Value
ActiveDocument.TablesOfContents(1).Update
Application.Quit

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:51:33.673

```
ActiveDocument.SaveAs FileName:="Test.docx", FileFormat:= _
wdFormatXMLDocument, LockComments:=False, Password:="",
AddToRecentFiles _
:=True, WritePassword:="", ReadOnlyRecommended:=False,
EmbedTrueTypeFonts _
:=False, SaveNativePictureFormat:=False, SaveFormsData:=False, _
SaveAsAOCELetter:=False

 ActiveDocument.Convert 'Required if not Word 2007 format 
```

编辑：

VBA 代码也被存储。如果你想防止这种情况发生，你能做的最好的就是将你的文本移动到一个新文档中并保存这个文档。
简单的例子，基于书签的存储：

```
Option Explicit

Sub Save_Doc_NoMacros()

Dim ThisDoc         As Word.Document
Dim oDoc            As Word.Document

Set ThisDoc = ActiveDocument

ThisDoc.Bookmarks("Bookmark1").Select
Selection.Copy
Set oDoc = Documents.Add
Selection.Paste

oDoc.SaveAs FileName:="U:/Text.docx", FileFormat:=wdFormatDocument
oDoc.Close

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-21T05:11:33.507

docx 文件*不能*包含任何 VBA 代码。时期。但是，每个 docx 文件都可以访问它所附加的任何模板中的任何代码。默认情况下，当您从模板创建新文档时，该文档会附加到该模板。如果您不希望生成的 docx 文件进一步访问其附加模板中的 VBA，请将其附加到合适的 dotx 模板。假设您有这样的 dotx 模板，您可以通过 Developer|Document Template>Templates>Attach 或通过 AttachedTemplate 方法来实现。

# sql - 为 EntityFramework 将 SQL 查询转换为 LINQ

> ID：14478868
> 
> 赞同：0
> 
> 时间：2013-01-23T11:41:32.597
> 
> 标签：sql, linq, entity-framework, linq-to-entities

我无法将以下查询转换为 EF：

```
SELECT DISTINCT
[CompanyId]
,[CompanyNumber]
,[ReturnsLastMadeUpDate]
FROM [CHX].[dbo].[CompanyDetailsDailyDump]
WHERE [InsertDate] BETWEEN '2012-12-19' and '2013-01-20'
ORDER BY [ReturnsLastMadeUpDate] DESC 
```

主要问题在于 Distinct()。如何选择以上三个特定列进行比较，而不是所有列。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:47:06.253

您只需要在所有其他操作之后应用 Distinct。IE：

```
CompanyDetailsDaily
    .Where(x => x.InsertDate < DateTime.Parse('2013-01-20') && 
            x.InsertDate > DateTime.Parse('2012-12-19'))
    .OrderBy(x => x.ReturnsLastMadeUpDate)
    .Select(x => new{x.CompanyID,x.CompanyNumber,x.ReturnsLastMadeUpDate})
    .Distinct(); 
```

小心包含日期（>/< 符号之一可能需要替换为 =>/<=）

# java - 动态加载 JDBC 驱动

> ID：14478870
> 
> 赞同：13
> 
> 时间：2013-01-23T11:41:33.937
> 
> 标签：java, jdbc, classloader

我正在尝试使用这种代码动态加载 JDBC 驱动程序：

```
 try{
        URL[] url={new URL("file:libs/mysql-connector-java-5.1.21.jar")};
        URLClassLoader loader = new URLClassLoader(url, System.class.getClassLoader());
        loader.loadClass(drivername);
        Enumeration<Driver> drivers = DriverManager.getDrivers();
        while(drivers.hasMoreElements()){
            Driver driver = drivers.nextElement();
            System.out.println("driver:"+driver);
        }
        Class.forName(drivername, true, loader);
        drivers = DriverManager.getDrivers();
        while(drivers.hasMoreElements()){
            Driver driver = drivers.nextElement();
            System.out.println("driver:"+driver);
        }
        Connection connect = DriverManager.getConnection(jdbcurl, user,
                password);

        return connect;
    }
    catch (MalformedURLException e){
        e.printStackTrace();
        return null;
    } 
```

第一个 while 循环显示了类路径的驱动程序：

```
driver:sun.jdbc.odbc.JdbcOdbcDriver@35712651
driver:oracle.jdbc.OracleDriver@58df0438
driver:com.ibm.db2.jcc.DB2Driver@525c7734
driver:SQLServerDriver:1 
```

第二个循环显示相同的驱动程序，但没有 MySQL 驱动程序。

我的问题是为什么？我错过了什么？

我[在 JavaDoc 中`DriverManager`](http://docs.oracle.com/javase/6/docs/api/java/sql/DriverManager.html)读到，如果驱动程序已加载，每个驱动程序都会尝试通过 drivermanager 注册自己。在我的代码中，这应该是`loader.loadClass(drivername);`. 我认为这段代码应该调用静态部分，例如：

```
static {
  try {
      java.sql.DriverManager.registerDriver(new Driver());
  } catch (SQLException E) {
      throw new RuntimeException("Can't register driver!");
  }
} 
```

[类](http://www.docjar.com/html/api/com/mysql/jdbc/Driver.java.html)[的`Driver`](http://www.docjar.com/html/api/com/mysql/jdbc/Driver.java.html)。_

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-23T12:23:22.577

这是 DriverManager 和类加载器的一个已知问题，请参阅：

[http://www.kfu.com/~nsayer/Java/dyn-jdbc.html](http://www.kfu.com/~nsayer/Java/dyn-jdbc.html)

驱动程序定义（基本上是委托）：

```
class DriverShim implements Driver {
    private Driver driver;
    DriverShim(Driver d) { this.driver = d; }
    public boolean acceptsURL(String u) throws SQLException {
        return this.driver.acceptsURL(u);
    }
    public Connection connect(String u, Properties p) throws SQLException {
        return this.driver.connect(u, p);
    }
    // and so on.... 
```

使用示例：

```
URL u = new URL("jar:file:/path/to/pgjdbc2.jar!/");
String classname = "org.postgresql.Driver";
URLClassLoader ucl = new URLClassLoader(new URL[] { u });
Driver d = (Driver)Class.forName(classname, true, ucl).newInstance();
DriverManager.registerDriver(new DriverShim(d));
DriverManager.getConnection("jdbc:postgresql://host/db", "user", "pw"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T11:53:42.420

您不能这样做，因为[`DriverManager`](http://docs.oracle.com/javase/7/docs/api/java/sql/DriverManager.html)不允许您使用调用代码无权访问的驱动程序（即由不同类加载器加载的驱动程序）：

> `getConnection`调用该方法时，`DriverManager`将尝试从初始化时加载的驱动程序和**使用与当前小程序或应用程序相同的类加载器显式**加载的驱动程序中找到合适的驱动程序。

据我所知，唯一可能的解决方法是`Driver`手动实例化而不是使用`DriverManager`（假设它有一个无参数构造函数）：

```
Driver driver = Class.forName(drivername, true, loader).newInstance();
Connection connect = driver.connect(url, props); 
```

虽然我不确定这是一个正确的方法。

# android - 使用 Eclipse 更新 android 应用程序

> ID：14478872
> 
> 赞同：5
> 
> 时间：2013-01-23T11:41:44.123
> 
> 标签：android, eclipse

我正在做我的 android 应用程序的新版本。

我只将 versionCode（在 androidmanifest.xml 中）从 1.0 更改为 1.1。现在它给了我错误-不允许浮点类型（在“versioneCode”处，值为“1.1”）。

另外，如果我重写 1.0，它也不起作用。

很莫名其妙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T11:42:39.583

`versionCode`应该只是数字而不是小数。您可以分配`versionName`显示在 PlayStore 和设备的应用程序详细信息中的小数。

例如，如果您`versionCode`在第一个版本中设置为 1，那么现在应该是 2。

将其设置为`versionCode="2"`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T11:44:20.607

版本代码是整数，即从 1,2....等开始，只有版本名称是小数。

# javascript - 如何用js获取字符串中的整数值

> ID：14478874
> 
> 赞同：1
> 
> 时间：2013-01-23T11:41:56.730
> 
> 标签：javascript, jquery

```
var text = "rating-1-gray-3-blue"; 
```

我想获得价值`13`

我怎样才能做到这一点 。基本上我想得到一个字符串中的所有整数。

我试过了`parseInt`，但是当整数值在字符串的开头时它返回 int

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:43:01.327

您可以使用[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)：

```
var result = +text.replace(/\D/g, "");  // 13 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T11:46:16.920

```
var result=text.replace(/[^0-9]/g, ''); 
```

这将从您的字符串中删除所有非 0-9 值

# ios - NSFileManager removeItemAtPath 在多次调用时删除整个文件夹

> ID：14478877
> 
> 赞同：0
> 
> 时间：2013-01-23T11:41:59.150
> 
> 标签：ios, file, nsfilemanager

我有以下代码应该删除 3 个文件：

```
NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

NSString *pngFilePath = [docDir stringByAppendingPathComponent:currentFileName];
NSLog(@"png %@",pngFilePath);

NSString *thumbFilePath = [docDir stringByAppendingPathComponent:currentThumbFileName];
NSLog(@"thumb %@",thumbFilePath);

NSString *plistFilePath = [docDir stringByAppendingPathComponent:currentPlistName];
NSLog(@"plist %@",plistFilePath);

NSError *error, *error2, *error3;
[[NSFileManager defaultManager] removeItemAtPath:pngFilePath error:&error];
[[NSFileManager defaultManager] removeItemAtPath:thumbFilePath error:&error2];
[[NSFileManager defaultManager] removeItemAtPath:plistFilePath error:&error3]; 
```

但是，它会删除整个 Documents 文件夹。但是如果我注释最后三行中的两行，它只删除一个文件，它只删除那个文件。

更新：这是 NSLog：

```
2013-01-23 13:51:28.715 Amaziograph[16466:c07] png /Users/Hristo/Library/Application Support/iPhone Simulator/5.1/Applications/C9FAA196-7904-4070-A208-A53451A64602/Documents/amaziograph_2013_01_23_13_43_37.png
2013-01-23 13:51:28.716 Amaziograph[16466:c07] thumb /Users/Hristo/Library/Application Support/iPhone Simulator/5.1/Applications/C9FAA196-7904-4070-A208-A53451A64602/Documents/amaziograph_2013_01_23_13_43_37_thumb.png
2013-01-23 13:51:28.716 Amaziograph[16466:c07] plist /Users/Hristo/Library/Application Support/iPhone Simulator/5.1/Applications/C9FAA196-7904-4070-A208-A53451A64602/Documents/amaziograph_2013_01_23_13_43_37.plist 
```

如何删除所有 3 个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T16:13:56.627

原来我调用了上面的代码两次——第一次没有特定的文件名，所以它删除了文件的文件夹。NSLog 说：

```
png /Users/... .../Documents/(null).png 
```

所以 Documents 文件夹被删除了。但是我无法解释为什么一次只删除一个文件会起作用。

# ruby-on-rails - 重写一个方法

> ID：14478878
> 
> 赞同：0
> 
> 时间：2013-01-23T11:42:00.910
> 
> 标签：ruby-on-rails, devise

我有一个使用`devise`.

我想重新编写`devise`.

于是我新建了一个控制器，叫做：UserSessions。

登录后，我想重定向到谷歌。所以我尝试了：

```
class UserSessionsController < Devise::SessionsController
    def new
       super if defined?(super)
       self.resource = build_resource(nil, :unsafe => true)
       clean_up_passwords(resource)

       respond_to do |format|
         format.html { redirect_to("http://www.google.com") }
       end
    end
end 
```

我运行了我的应用程序并登录了一个帐户，但我没有被重定向到谷歌，而是我的网站。

我认为我对新方法的更改没有执行。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:54:12.017

我认为您必须覆盖 create 方法，而不是 new 方法

# jquery - auto close a jquery lightbox window and redirect _parent page?

> ID：14478879
> 
> 赞同：0
> 
> 时间：2013-01-23T11:42:07.587
> 
> 标签：jquery, redirect

I'm trying to get a jquery lightbox window to auto close after a number of seconds and also redirect the parent page is this possible?

I'm new to php and jquery and am trying to find this answer on the net but am having no luck, please would someone point me in the right direction?

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:56:37.403

由于有多个 jquery 灯箱插件，我无法告诉您确切的解决方案是什么。您可能想查看标准的 javascript“setTimeout()”函数，以便在特定的毫秒数后调用特定的函数。此外，您还必须了解如何关闭您正在使用的特定灯箱插件。

至于重定向到父页面，灯箱类型的弹窗的父页面不就是当前页面吗？如果没有：尝试将“父页面 url”存储在某处，以便在关闭灯箱时可以访问它。

祝你好运！

# android - 带有 Android Jelly Bean 的 Nexus 7 上的内存消耗非常高

> ID：14478881
> 
> 赞同：3
> 
> 时间：2013-01-23T11:42:16.993
> 
> 标签：android, android-4.2-jelly-bean

我有一个非常消耗内存的应用程序 - 处理大型位图。我已经使用众所周知的技术调整了应用程序来处理此类位图（请不要在答案中提供教程链接......），以便它可以正常运行，没有任何`OutOfMemoryError`异常，但仅在运行 HC 和 ICS 的设备上，在 Jelly Bean 上相同的应用程序有内存消耗增加了近 80%，这导致糟糕的用户体验，应用程序滞后且缓慢。

我准备了一个简单的测试，只是在Eclipse中使用模板创建了最简单的Android应用；该应用程序只有一个带有背景位图 (1280 x 800) 的活动。在装有 Android 3.1 (Asus A500) 的设备上，它分配：

```
01-23 12:28:02.402: D/dalvikvm(31706): GC_FOR_ALLOC freed 65K, 4% free 6559K/6787K, paused 17ms
01-23 12:28:02.402: I/dalvikvm-heap(31706): Grow heap (frag case) to 10.355MB for 4096016-byte allocation
01-23 12:28:02.432: D/dalvikvm(31706): GC_CONCURRENT freed 1K, 3% free 10558K/10823K, paused 1ms+2ms 
```

在带有 JellyBean 4.2.1 的 Nexus 7 上，它分配：

```
01-23 12:13:49.740: D/dalvikvm(23815): GC_FOR_ALLOC freed 84K, 4% free 7464K/7700K, paused 18ms, total 18ms
01-23 12:13:49.750: I/dalvikvm-heap(23815): Grow heap (frag case) to 11.338MB for 4096016-byte allocation
01-23 12:13:49.770: D/dalvikvm(23815): GC_FOR_ALLOC freed 1K, 3% free 11463K/11704K, paused 23ms, total 23ms
01-23 12:13:49.800: D/dalvikvm(23815): GC_CONCURRENT freed <1K, 3% free 11463K/11704K, paused 2ms+2ms, total 23ms
01-23 12:13:49.900: D/dalvikvm(23815): GC_FOR_ALLOC freed <1K, 3% free 11463K/11704K, paused 12ms, total 13ms
01-23 12:13:49.920: I/dalvikvm-heap(23815): Grow heap (frag case) to 18.259MB for 7259056-byte allocation
01-23 12:13:49.940: D/dalvikvm(23815): GC_FOR_ALLOC freed 0K, 2% free 18552K/18796K, paused 16ms, total 16ms
01-23 12:13:49.960: D/dalvikvm(23815): GC_CONCURRENT freed <1K, 2% free 18552K/18796K, paused 3ms+2ms, total 17ms 
```

**所以我有两个问题：**

1、为什么应用程序在其主活动的背景上只使用一张位图时会消耗这么多内存？

2、为什么带有JellyBean的设备在运行相同的应用程序时内存消耗要高出近80%？

**编辑1：**

所有设备都具有相同的屏幕分辨率：1280 x 800 像素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T07:28:07.507

我遇到了同样的事情 - 不幸的是，我怀疑这是由于最新版本的 android 会尝试尽可能多地使用 3d 加速器 - 他们会复制您的图像并将其传递到 3d 加速器然后使用 when 来渲染用户看到的实际像素。这就是为什么您会看到更高的内存消耗。

至于可以做些什么 - 不幸的是不多。这种更高的内存使用导致整体上更加流畅的 UI（这是项目黄油，在 android 4.1 中出现）。如果您已经查看了各种教程，例如[高效显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)的 google，那么我所能建议的就是尝试在清单的应用程序元素中打开[largeHeap - 这对我有用。](http://developer.android.com/guide/topics/manifest/application-element.html#largeHeap)

此外，根据您的应用程序的工作方式，可能会回收位图。 [这个来自谷歌的 DevBytes 视频](http://www.youtube.com/watch?feature=player_embedded&v=rsQet4nBVi8)解释了如何。

# c# - 将上传的 jpeg 转换为字节数组时，它以 png 形式完成？

> ID：14478893
> 
> 赞同：0
> 
> 时间：2013-01-23T11:42:58.243
> 
> 标签：c#, system.drawing

我正在上传 jpeg 图像并将其作为字节数组存储在数据库中。但是，当我检索图像并选择“另存为”时，图像现在是 PNG，文件大小大 60-70%。这是进行转换的功能。任何人都可以提出为什么会这样吗？

```
private byte[] ResizeImage(UploadedFile file, int maxWidth, int maxHeight)
{
    int canvasWidth = maxWidth;
    int canvasHeight = maxHeight;

    using (Bitmap originalImage = new Bitmap(file.InputStream))
    {
        int originalWidth = originalImage.Width;
        int originalHeight = originalImage.Height;

        Bitmap thumbnail = new Bitmap(canvasWidth, canvasHeight); // create thumbnail canvas

        using (Graphics g = Graphics.FromImage((System.Drawing.Image)thumbnail))
        {
            g.SmoothingMode = SmoothingMode.Default;
            g.InterpolationMode = InterpolationMode.Default;
            g.PixelOffsetMode = PixelOffsetMode.Default;

            //Get the ratio of original image     
            double ratioX = (double)canvasWidth / (double)originalWidth;
            double ratioY = (double)canvasHeight / (double)originalHeight;
            double ratio = ratioX < ratioY ? ratioX : ratioY; // use which ever multiplier is smaller 

            // Calculate new height and width     
            int newHeight = Convert.ToInt32(originalHeight * ratio);
            int newWidth = Convert.ToInt32(originalWidth * ratio);

            // Calculate the X,Y position of the upper-left corner      
            // (one of these will always be zero)     
            int posX = Convert.ToInt32((canvasWidth - (originalWidth * ratio)) / 2);
            int posY = Convert.ToInt32((canvasHeight - (originalHeight * ratio)) / 2);

            //g.Clear(Color.White); // Add white padding

            g.DrawImage(originalImage, posX, posY, newWidth, newHeight);

        }

        /* Display uploaded image preview */
        ImageConverter converter = new ImageConverter();
        byte[] imageData = (byte[])converter.ConvertTo(thumbnail, typeof(byte[])); // Convert thumbnail into byte array and set new binary image

        return imageData;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:58:40.053

我不确定是否`ImageConverter`支持其他格式，所以试试

```
byte[] imageData;
using (MemoryStream stream = new MemoryStream())
{
    thumbnail.Save(stream, ImageFormat.Jpeg);
    imageData = stream.ToArray();
}
return byteArray; 
```

如果您想要更多控制（例如指定压缩级别），请查看[此](http://msdn.microsoft.com/en-us/library/bb882583.aspx)内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:53:26.033

ImageConverter 上的文档似乎有点缺乏，但猜测是它默认将其转换为 PNG，除非另有说明（假设它甚至支持其他格式）。

# java - Java multithreaded asynchronous call with single worker and returned value

> ID：14478895
> 
> 赞同：0
> 
> 时间：2013-01-23T11:43:02.403
> 
> 标签：java, multithreading

I have been fighting for a couple of days with the following tricky problem:

I have a tomcat-based web application that fires request to the query server at arbitrary time. Potentially two or more requests can be fired at the same time.

On the receiving side I have a server that processes these requests and after mulling them over spits the list of results back at Tomcat, that displays the list on the jsp page.

The server has only one static instance of the object that actually churns through the data (being rather expensive to create).

Now that is where I have a bottleneck: on the one hand, the requests from Tomcat should be served synchronously so that the pipeline inside Tomcat could work and display sensible results to the user. On the other hand, if they are served synchronously, the processing method (askQuery()) appears locked for other threads and secondary requests return empty.

I have tried (nearly) every possible thing: running processing in a separate thread, synchronize the method, etc - to no avail as yet. If the processing runs in a separate thread I can not yield the results and return the list synchronously to Tomcat. If I join() the thread, the method appears locked.

Here is the original class to illustrate the idea of what I want to do:

```
 package...
    imports...

    public class DLQueryEngineBrain extends ADLQueryEngine{
        protected static Brain brain;
        protected static boolean isFree = true;
        protected AOwlResultParser orp;
        private QueryThread queryThread;

        public DLQueryEngineBrain(String ontologyURL, ThirdPartyBeanManager tpbm) {
            super(ontologyURL, tpbm);
            try {
                DLQueryEngineBrain.brain = new Brain("http://purl.obolibrary.org/obo/", "http://purl.obolibrary.org/obo/fbbt.owl", 32);
                LOG.debug("BRAIN': " + brain + " this " + this);
                brain.learn(ontologyURL);
            } 
            catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            this.orp = new OwlResultParserClass(this.ontology);
        }

    // This is the method I want to run asynchronously, but I want it to return results //in-line of the calling method, eg. 
    //results = queryEngineBrain.askQuery("sublcass of some X"), and use the results in the //subsequent code...

public synchronized Set<OntBean> askQuery(OntQueryQueue oqq) {
            LOG.debug("Input: " + oqq.toString());
            Set<OntBean> results = new TreeSet<OntBean>();
            QueryThread queryThread = new QueryThread(oqq, (OwlResultParserClass)this.orp);
            queryThread.start();
            while (!queryThread.isFinished){
                try {
                    Thread.sleep(10);
                    LOG.debug("Main Thread sleeps...");
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            LOG.debug("Output: " + queryThread.results.size());
            return queryThread.results;
        }

        class QueryThread extends Thread {
            int number;
            private Set<OntBean> results = new TreeSet<OntBean>();
            private OntQueryQueue oqq;
            private OwlResultParserClass orp;
            boolean isFinished = false;

            //Just save the number to display on the console
            public QueryThread(OntQueryQueue oqq, OwlResultParserClass orp) {
                this.number = DLQueryEngineBrain.numThreads++;
                this.oqq = oqq;
                this.orp = orp;
            }

            public void run () {
                while(!this.isFinished) {
                    LOG.debug("DLQueryEngineBrain.isFree: " + DLQueryEngineBrain.isFree);
                    if (DLQueryEngineBrain.isFree){
                        this.runQuery();
                        this.isFinished = true;
                    }
                    else {
                        LOG.debug("Query thread sleeps while brain is busy...");
                        try {
                            Thread.sleep(getRandInt());
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                }
            }

            public void runQuery() {
                DLQueryEngineBrain.isFree = false;
                List<String> queries = this.oqq.getQueries();
                LOG.debug("BRAIN : " + DLQueryEngineBrain.brain + " this " + this);
                for (String currExpr: queries){
                    LOG.debug("currExpr: " + currExpr);     
                    List<String> subClasses = null;
                    try {
                        subClasses = DLQueryEngineBrain.brain.getSubClasses(currExpr, true);
                    } catch (ClassExpressionException e) {
                        e.printStackTrace();
                    }
                    LOG.debug("Found: " + subClasses.size());
                    //Iterates over the list and print the result.
                    for (String subClass : subClasses) {
                        this.results.add(orp.getOntBeanForId(subClass));
                    }
                }
                DLQueryEngineBrain.isFree = true;
            }

            private int getRandInt(){
                double d = Math.random();
                int i = Math.round((float)d*100); 
                return i;
            }
        }

    } 
```

The problem is the askQuery() still locks up and all subsequent queries return empty results.

Removing the Thread.sleep() from the askQuery() results in it working asynchronously but no results returned whatsoever- the askQuery() code just executes to the end without waiting for the thread to finish.

Any help or advice on what I am doing wrong is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:30:19.153

好的，谢谢你的帮助一百万。我已经想通了。

问题甚至没有出现在推理器中，而是出现在上游视图控制器中 - 方法：

```
public synchronized ModelAndView handleRequest(HttpServletRequest req, HttpServletResponse res) throws Exception { .. }` 
```

的

```
 public class GeneListController implements Controller{ 
```

正在交叉电线并弄乱结果。

解决方案一直让我眼前一亮……

Tomcat 日志显示 SQL 查询的 ID 列表（ID 列表是所考虑的推理器的产品）每次都正确填充，但是生成的 jsp 页面返回空。

添加`synchronized`到上述方法后，一切正常。

呃，好吧...

第 1 课：阅读日志

第 2 课永远不要假设任何事情（即使有人告诉你问题出在线程中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T12:10:54.553

一个可能的原因是您有数据竞争`queryThread.isFinished`：您从主线程读取它并从 QueryThread 线程写入它而没有同步。

使变量 volatile 可以解决该问题：`volatile boolean isFinished = false;`. 我不知道它是否会解决你的问题。

作为旁注：

*   启动线程的想法是并行化作业。在您的情况下，您启动线程然后等待它完成，因此`askQuery`不会从使用线程中获得任何好处
*   一个推论是活性问题：您在整个查询作业期间持有锁，阻止任何其他线程取得进展

# ios - Can a app developed in iOS Enterprise program be distributed in app store with a different iOS Standard Program?

> ID：14478900
> 
> 赞同：0
> 
> 时间：2013-01-23T11:43:20.743
> 
> 标签：ios, app-store

I have a question in the Apple Developer Programs and their distribution.

I have a Enterprise Developer program and have to develop an iOS app, but the distribution to the app store has to be done by a Customer.

My Customer already have a different Standard developer program to distribute to Apps store. Since both the ownership of Developer Programs are different, is it possible to distribute the apps in this way?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T11:01:46.513

答案似乎晚了，但它可能会帮助未来的读者

您开发了一个应用程序并在使用 iOS Enterprise 程序（299 美元）的设备上对其进行了测试。您可以随时将代码发送给可以使用 iOS 开发人员程序（99 美元）对其进行签名的客户并将其上传到 AppStore。这里要理解的核心点是开发应用程序与签名不同。

# ruby-on-rails-3 - 两个具有相同时间戳的延迟作业。

> ID：14478902
> 
> 赞同：0
> 
> 时间：2013-01-23T11:43:29.977
> 
> 标签：ruby-on-rails-3, delayed-job

在 Rails 应用程序中，如果在同一 run_at 时间安排了 2 个或更多**延迟作业**，例如：24/1/2013 12:05:49（完全相同的时间戳）。

那么无论相同的 run_at 时间戳如何，都只会执行其中一个或两者都会执行。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:14:01.723

我希望两者都会运行。如果您有多个工人在运行，他们很可能同时运行。否则，首先创建的将首先运行，然后再运行另一个。

# javascript - script.aculo.us 切换出现在多个 div 上

> ID：14478903
> 
> 赞同：1
> 
> 时间：2013-01-23T11:43:30.297
> 
> 标签：javascript, html, css, toggle, scriptaculous

我的代码有点乱，我希望你们能帮我出一个聪明的主意。

因此，我正在处理一个 html 页面并使用 scriptaculous 使用切换效果使一些 div 出现和淡出。事情是，要让它工作，你当然必须在你的 div 中使用 style="display: none" ，但这会给我的幻灯片带来问题。让我向您展示它的外观：

**- 我的菜单**

```
 <li>
            <ul>
                <li><a href="#" onclick="Effect.toggle('aboutDiv', 'appear'); return false;"></a>
                </li>
                <li><a href="#" onclick="Effect.toggle('missionDiv', 'appear'); return false;"></a>
                </li>
                <li><a href="#" onclick="Effect.toggle('portfolioDiv', 'appear'); return false;"></a>
                </li>
                <li><a href="#" onclick="Effect.toggle('contactDiv', 'appear'); return false;"></a>
                </li>
            </ul>
        </li> 
```

**我的 div**

```
<div id="portfolioDiv" style="display: none">
<a href="#" class="close" onclick="Effect.toggle('portfolioDiv', 'appear'); return false;">&#10006;</a>
    <!-- 630px X 430px -->
    <div id="slideDiv">
        <ul>
            <li>
                <img src="image/img1.jpg" alt="" /></li>
            <li>
                <img src="image/img2.jpg" alt="" /></li>
            <li>
                <img src="image/img1.jpg" alt="" /></li>
            <li>
                <img src="image/img2.jpg" alt="" /></li>
            <li>
                <img src="image/img1.jpg" alt="" /></li>
            <li>
                <img src="image/img2.jpg" alt="" />
            </li>
        </ul>
    </div>
</div> 
```

**- CSS**

```
#portfolioDiv
{
    position: absolute;
    height: 700px;
    width: 430px;
    left: 3%;
    top: 16%;
    border: 1px solid red;
    overflow: hidden;      
}

#slideDiv
{
    position: absolute;
    height: 630px;
    width: 430px;
    top: 70px;
    border: 1px solid black;
    overflow: hidden;
    margin: 0;
    padding: 0px;
} 
```

**- 问题**

*- 我正在使用 Horinaja 幻灯片。*

当我`style="display: none"`在**portfolioDiv**上使用时，幻灯片不起作用。当我`style="display: none"`在我的**slideDiv**上使用它时。我似乎无法理解是什么导致了这个问题。

**- 尝试过的解决方案**

为了尝试解决这个问题，我想分离 2 个 div（**portfolioDiv**和**slideDiv**），然后将它们单独放置，而不是将 slideDiv 放在portfolioDiv 中，但是我需要在我的菜单中使用 Effect.toggle 和 Effect.multiple 和 onclick ，但我无法这样做，因为我基本上不知道该怎么做。

*希望你能以某种方式帮助我，谢谢。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:14:52.937

我解决了它正在使用：

```
<a href="#" onclick="Effect.multiple(['portfolioDiv','slideDiv'],function(el){Effect.toggle(el,'appear');});"> 
```

# sql - SQL 更新多个值

> ID：14478904
> 
> 赞同：0
> 
> 时间：2013-01-23T11:43:33.220
> 
> 标签：sql, sql-server

我正在编写一个查询来更新表（TableA），使用另一个表（TableB）中的值，表B针对TableA中的每一行返回一个以上的值，并且请求是使用TableB中的**最大**返回值进行更新。

我可以通过以下方式实现：

```
UPDATE TableA 
SET Value = (SELECT TOP 1 B.Value FROM dbo.TableB B
                WHERE TableA.Key = B.Key
                ORDER BY B.Value desc) 
```

我不确定这是实现要求的最佳方法，而且我担心上述查询的性能。它是否在表 B 上多次扫描以查找表 A 的每一行的值？

我尝试了一些查询，例如使用

```
update tableA
set Value = TableB.Value
from (Table A left join Table B ... where ...) 
```

我认为第二个可能有更好的性能，但我无法检索到最大的值，因为它不支持 " `order by"`。

加入表 B 两次并比较 B 的值可能会解决问题，但性能可能比第一个查询差。

有任何想法吗？

** 实际情况比示例复杂，例如tableA 和tableB 需要加入“....or....or...or...”，成本会更高。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:50:19.070

使用`INNER JOIN`获得最大值的子查询`tableB`。

```
UPDATE  a
SET     a.Value = b.max_val
FROM    tableA a
        INNER JOIN 
        (
            SELECT  key, MAX(VALUE) max_val
            FROM    tableb
            GROUP   BY  key
        ) b ON a.key = b.key 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:51:45.820

您提供的示例使用相关的查询，因此对于 A 中的每一行，将执行子查询。您可以通过在查询中使用 TableA 两次来避免相关子查询，例如

```
UPDATE TableA 
SELECT TableA.Col1 = t2.Col1, TableA.Col2 = TableB.Col
FROM TableA t2
INNER JOIN TableB ON ... 
```

# java - java中的SSL-没有RSA？

> ID：14478905
> 
> 赞同：1
> 
> 时间：2013-01-23T11:43:34.827
> 
> 标签：java, ssl

```
 KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
    keyStore.load(this.getClass().getResourceAsStream("keystore.jks"), "haslo1".toCharArray());
    TrustManagerFactory trustManagerFactory =
    TrustManagerFactory.getInstance("PKIX", "SunJSSE");
    trustManagerFactory.init(keyStore);
    X509TrustManager x509TrustManager = null;
    for (TrustManager trustManager : trustManagerFactory.getTrustManagers()) {
    if (trustManager instanceof X509TrustManager) {
    x509TrustManager = (X509TrustManager) trustManager;
    break;
    }
    }
        if (x509TrustManager == null) {
            throw new NullPointerException();
        }
        SSLContext sslContext = SSLContext.getInstance("TLS");

      sslContext.init( KeyManagerFactory.getInstance( "RSA" ).getKeyManagers(),
       new TrustManager[]{x509TrustManager}, null); 
```

我有这段代码，但在 sslContext.init 线上我得到以下异常： java.security.NoSuchAlgorithmException: RSA KeyManagerFactory not available

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T12:26:03.530

代替

```
KeyManagerFactory.getInstance("RSA") 
```

和

```
KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm()) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T14:12:26.780

`KeyManagerFactory`算法与`RSA`. [Sun JSSE 提供程序文档](http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#SunJSSEProvider)（或提供程序的文档，如果您使用不同的文档）中记录了可以使用的内容。

这里唯一可用的选项是`SunX509`和`PKIX`。一般来说，最好使用`KeyManagerFactory.getDefaultAlgorithm()`. 您也可以对`TrustManagerFactory`, 而不是硬编码执行此操作`PKIX`。[（此处](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization)列出了 Sun JRE 的默认值。）

# regex - 正则表达式字符串排除

> ID：14478910
> 
> 赞同：0
> 
> 时间：2013-01-23T11:43:51.557
> 
> 标签：regex

我找不到如何在我的正则表达式中排除字符串：

前任 ：

```
<div\s[^>]+> 
```

将在结束前找到一个`<div`和每个字符`>`

现在我想找到`<div...>`then `everything but a </div>`then a `</div>`。就像是 ：

```
 <div\s[^>]+>[^(</div>)]*</div> 
```

问题是`[^abc]`排除 a 或 b 或 c。如何排除“abc”字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T11:46:06.263

这就是[负面的前瞻性断言](http://www.regular-expressions.info/lookaround.html)的用途：

```
<div\s[^>]+>(?:(?!</div>).)*</div> 
```

**解释：**

```
(?:          # Match...
 (?!</div>)  # unless we're right before a </div>
 .           # any character.
)*           # Repeat as needed 
```

您可能希望将斜杠设为可选 ( `(?!</?div>)`)；否则你会被嵌套标签绊倒，比如 in `<div> foo <div> bar </div> baz </div>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T11:46:26.253

使用非贪婪的正则表达式是可能的

```
<div\s[^>]+>(.*?)</div> 
```

# c# - NLog: Creating a program or service log

> ID：14478912
> 
> 赞同：1
> 
> 时间：2013-01-23T11:43:56.997
> 
> 标签：c#, logging, windows-services, nlog

I have been using NLog for a couple of months now, just logging to the Event Log, however that is not at all ideal in any scenario imho.

I am wondering, is it possible to create your own Program or Service log with NLog? It doesn't seem like it according to the list of supported targets over at [http://nlog-project.org/wiki/Targets](http://nlog-project.org/wiki/Targets)

Is anyone able to shed some light on this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T10:12:15.063

您完全可以创建一个应用程序来存储并向您显示其他应用程序的所有日志，但您可能需要扩展 NLog，这就是我为我的工作场所所做的。例如 ：

1.  创建一个通用数据库，该数据库可以存储 NLog 中的所有日志和其他类型的日志（如果需要）。

2.  制作一个自定义布局渲染器，它使用您的日志信息创建一个 XML（我在制作系统时不尝试[XmlEncode LayoutRenderer](https://github.com/nlog/nlog/wiki/Xml-Encode-Layout-Renderer)，我认为现在会很棒）

3.  找到一种通过网络发送 XML 的方法，我使用了 Transactionnal [MSMQ](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472%28v=vs.85%29.aspx)，但 NLog 中只存在非事务性目标，所以我创建了（=复制粘贴原始文件并进行了一些增强）我自己的目标

4.  创建一个接收日志 XML 并将它们插入数据库的服务

5.  最后，创建一个使用数据库的应用程序，向您展示您的环境中发生的事情

如果您有时间，这是一个强有力的解决方案。对于我们的生产环境，它为我们节省了很多倍。但这取决于你到底需要什么

*** 编辑 2013-01-25：***

要在*应用程序和服务日志*树中创建自己的日志：[请参阅这篇](http://setspn.blogspot.fr/2010/09/configuring-custom-event-log-events.html)解释如何创建自己的日志和附带的事件源的帖子

如果他不存在，Nlog 也可以创建一个事件源，但是正如您在[这篇文章](https://stackoverflow.com/questions/1274018/system-security-securityexception-when-writing-to-event-log)中看到的那样，应用程序需要*读取*密钥的权限：

> HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Eventlog\Security

或者您可以简单地以管理员身份运行该应用程序。

一旦你创建了自己的日志和他的事件源，你现在可以正常使用 Nlog，配置如下：

```
<targets>
  <target xsi:type="EventLog" name="event" layout="${message}"
          machineName="." log="myLog" source="myEventSource"/>
</targets>
<rules>
  <logger name="myLogger" writeTo="event"/>
</rules> 
```

希望能帮助到你

# javascript - Javascript dynamic function calls with namespace

> ID：14478914
> 
> 赞同：2
> 
> 时间：2013-01-23T11:44:04.470
> 
> 标签：javascript, function, dynamic, eval

Whereas using `eval` is not a good programming practice. This question is for didactic nature, or to learn a better solution:

See the following example in Javascript:

```
var foo = foo || {};
foo.bar = function(str) { alert(str); };

foo.bar('aaa'); // trigger alert('aaa')
window['foo']['bar']('bbb'); // trigger alert('bbb') 
```

I'm searching for an generic caller to work with `foo.bar('str')`, `foo.nestedObj.bar(params)`, `foo.n2.n[1..99].bar(params)`

Thats because I can't call something like:

```
param = [5,2,0];
call = 'foo.bar';
window[call](param); // not work 
```

But I can call function using eval:

```
param = [5,2,0];
call = 'foo.bar'
eval(call + '(param)'); // works 
```

How can I do this **WITHOUT** `eval`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T11:55:53.817

我之前已经回答过这个问题，但这里又出现了：

```
function genericFunction(path) {

    return [window].concat(path.split('.')).reduce(function(prev, curr) {
        return prev[curr];
    });

}

var param = [5, 2, 0];
var foo = { bar: function(param) { return param.length; } };

genericFunction('foo.bar')(param);

// => 3 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T12:11:52.350

```
callback = "foo.bar";
var p = callback.split('.'),
c = window; // "parent || window" not working in my tests of linked examples
for (var i in p) {
    if (c[p[i]]) {
        c = c[p[i]];
    } 
}
c('aaa'); 
```

这解决了问题。谢谢！

# command-line-interface - 从命令行检查动态加载的 PHP 扩展

> ID：14478921
> 
> 赞同：25
> 
> 时间：2013-01-23T11:44:34.160
> 
> 标签：command-line-interface, php-extension

我正在查看[PHP 手册](http://php.net/manual/en/internals2.ze1.zendapi.php)以了解不同类型的 PHP 扩展（PHP 模块）。有 Zend 模块（主要针对 PHP 大师）、内置模块和外部模块。

有没有办法从命令行判断 PHP 模块是动态加载还是内置到 PHP 二进制文件中？

我的意思是：`php -m`我得到了所有加载的模块，但我想知道哪些是内置的，哪些是外部的。

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2015-04-02T12:26:26.827

只需在命令行上运行此命令：

```
php -m 
```

或此以获取更多信息：

```
php -i 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-03T09:35:57.967

1) 运行

```
php -i 
```

从输出中找到以下参数：

**加载的配置文件**- 这将指定您的 php.ini 文件正在使用的 php.ini 文件的位置。

**扫描此目录以查找其他 .ini 文件**- 如果该目录不为空，则此目录中的某些 .ini 文件将动态加载 php 扩展。

**已解析的其他 .ini 文件**- 从上一个参数中指定的目录加载的 .ini 文件。

如果您使用的是 Linux，您可以：

```
php -i | grep -e "Loaded Configuration File" -e "Scan this dir for additional .ini files" -e "Additional .ini files parsed" 
```

2) 重命名您的 php.ini 文件并使用其他 .ini 文件重命名文件夹。

3) 重复步骤 #1 并验证**加载的配置文件**和**解析的附加 .ini 文件**的值是否均为**(none)**

4) 运行

```
php -m 
```

您现在将看到一个列表，其中仅包含 php 二进制文件的内置扩展。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T11:54:43.257

我不确定这是否可以通过常规 PHP 代码实现，您可以从自己的扩展中进行一些内部 Zend 调用。但是，可能有一种厚颜无耻的猜测方式，通过检查加载的扩展是否有可能看起来可用的动态库......

```
$extdir=ini_get('extension_dir');

$modules=get_loaded_extensions();
foreach($modules as $m){
    $lib=$extdir.'/'.$m.'.so';
    if (file_exists($lib)) {
        print "$m: dynamically loaded\n";
    } else {
        print "$m: statically loaded\n";
    }
} 
```

这不是万无一失的，但对你来说可能就足够了！

# spring - Spring - Injecting resources in per-scoped (perthis - pertarget) aspect

> ID：14478922
> 
> 赞同：4
> 
> 时间：2013-01-23T11:44:36.927
> 
> 标签：spring, spring-mvc, aspectj, spring-aop, aop

In my Spring web application, I'm trying to inject a resource in a perthis-scoped AspectJ aspect. Injection works well using a singleton aspect, but fails using a perthis scoped one. I tried using both `@Autowire` annotation or xml `<property>` tag.

Here is my code.

Aspect (for @Configurable I tried both `autowire=Autowire.BY_TYPE` and `autowire=Autowire.BY_NAME`):

```
@Aspect(
    "perthis(org.mypackage.aop.aspects.TestAspect.participateAroundPointcut())")
@Component
@Scope("prototype")
@Configurable()
public class TestAspect {

    private static final Logger logger = LoggerFactory.getLogger(TestAspect.class);

    @Autowired
    private CommonService commonService;

    @Pointcut("execution(* org.mypackage.TestService.method(..))")
    public void participateAroundPointcut(){}

    @Around("participateAroundPointcut()")
    public void testAround(ProceedingJoinPoint joinPoint) throws Throwable{
        logger.debug("Pre-execution; commonService==null: "+(commonService==null)+";");
        joinPoint.proceed();
        logger.debug("Post-execution");
    }
} 
```

CommonService:

```
@Service
@Scope("request")
public class CommonService {
    private String value = "commonValue";
} 
```

and beans' xml configuration:

```
<context:component-scan base-package="org.mypackage" />
<aop:aspectj-autoproxy proxy-target-class="true"/>
<context:spring-configured />
<bean id="testAspect" class="org.mypackage.aop.aspects.TestAspect" scope="prototype" factory-method="aspectOf"/>    
<bean class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor" /> 
```

And output confirming that commonService is not autowired:

```
DEBUG: org.mypackage.aop.aspects.TestAspect - Pre-execution; commonService==null: true;
DEBUG: org.mypackage.TestService - Executing method
DEBUG: org.mypackage.aop.aspects.TestAspect - Post-execution 
```

Some configuration/annotation may be overloaded (for example i'm using both `@Scope("prototype")` and `scope="prototype"` in xml), because I tried all the possibilities.

However, setting singleton scope and removing perthis (and making CommonService singleton-scoped too) the field is correctly autowired.

Any help would be appreciated.

EDIT:

Removing `scope="prototype"` from TestAspect xml bean definition I get the following exception:

```
java.lang.IllegalArgumentException: Bean with name 'testAspect' is a singleton, but aspect instantiation model is not singleton
at org.springframework.aop.aspectj.annotation.BeanFactoryAspectJAdvisorsBuilder.buildAspectJAdvisors(BeanFactoryAspectJAdvisorsBuilder.java:121)
at org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator.findCandidateAdvisors(AnnotationAwareAspectJAutoProxyCreator.java:86)
at org.springframework.aop.aspectj.autoproxy.AspectJAwareAdvisorAutoProxyCreator.shouldSkip(AspectJAwareAdvisorAutoProxyCreator.java:107)
at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessBeforeInstantiation(AbstractAutoProxyCreator.java:275)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:894)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:866)
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:451) 
```

Although TestAspect class is annotated with `@Scope("protptype")`, the bean is recognized like a singleton, causing the error. It seems that the container doesn't take into account the @Scope annotation, while it works for all other beans. Maybe `@Configurable` isn't detected too, causing the autowiring error?

# redirect - Create a Password Entry Page that redirects to protected page

> ID：14478923
> 
> 赞同：0
> 
> 时间：2013-01-23T11:44:37.943
> 
> 标签：redirect, password-protection

I am in a pickle and need a solution asap.

I am creating an index page that will have a password form. When the user enters the given password it needs to redirect automatically to another page that is protected by that password.

I don't mind how this works, it could be that the index page is that password protected page, but I would like to be able to style my own password field and submit button.

Does anyone know of a quick and simple solution for this that is fairly secure?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T14:23:58.807

对于那些寻求快速解决方案的人，我购买了这款非常理想的产品：

[http://codecanyon.net/item/easy-file-protection-php/674633?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=NxtCode](http://codecanyon.net/item/easy-file-protection-php/674633?sso?WT.ac=search_item&WT.seg_1=search_item&WT.z_author=NxtCode)

感谢 Ian 的评论，非常感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:49:08.667

好吧，最简单的方法是首先在 HTML 中创建一个包含两个字段的提交表单（一个用于用户名，一个用于密码或任何您想要的）

然后，在表单代码中，将表单重定向到密码等的 PHP 脚本，

登录脚本将使用 PHP 会话（谷歌它）来创建一个新的用户会话并跟踪登录的用户等 像这样的登录表单：

```
 <table width="950" border="0">
  <tr>
  <td width="200" valign="top">LOGIN;</br>
   <form action="/actions/sessions.php" method="post">
            User:</br><input type="text" name="user" /></br>
Password:</br> <input type="text" name="password" id="password" /></br>
<input type="submit" />
</form></td>

  </td>
  </tr>
  </table> 
```

这是从开始会话并在 MYSQL 数据库中验证用户的 HTML 表单调用的“SESSIONS.PHP”脚本

```
<?php
// start the session //

session_start(); 
```

# solr - 将 OpenCMS 结构化内容 XML 字段映射到 SOLR 字段

> ID：14478924
> 
> 赞同：3
> 
> 时间：2013-01-23T11:44:38.487
> 
> 标签：solr, opencms

我们正在尝试将 OpenCMS 结构化内容 XML 字段映射到 SOLR 字段，以便使用该字段作为过滤器执行搜索。

XML 字段在 XSD 文件中是这样描述的：

```
<xsd:complexType name="OpenCmsContrato">
    <xsd:sequence>
    [...]
        <xsd:element name="numeroExpediente" type="OpenCmsString" minOccurs="1" maxOccurs="1" />
    [...]
    </xsd:sequence>
    <xsd:attribute name="language" type="OpenCmsLocale" use="required"/>
</xsd:complexType> 
```

这些是元素的搜索设置，在同一个 XSD 文件中定义：

```
<xsd:annotation>
    <xsd:appinfo>
    [...]
        <searchsettings>
            <searchsetting element="numeroExpediente" searchcontent="true">
                <solrfield targetfield="numexp" />
            </searchsetting>
        </searchsettings>
    [...]
    </xsd:appinfo>
</xsd:annotation> 
```

目标 SOLR 字段“numexp”在 SOLR 的 schema.xml 文件中以这种方式定义：

```
<fields>
    <field name="numexp"                 type="string"       indexed="true"  stored="true" />
    [...]
</fields> 
```

这就是我们对 JSP 文件执行 SOLR 查询的方式：

```
CmsSearchManager manager = OpenCms.getSearchManager();
CmsSolrIndex index = manager.getIndexSolr("Solr Online");

String query = "fq=type:contrato";

if (!"".equals(text))
    query += "&fq=numexp:" + text;

CmsSolrResultList listFiles = index.search(cmso, query); 
```

当我们执行此代码时，我们得到 listFiles.size() = 0，但是当我们将过滤字段更改为预定义的 SOLR 字段“内容”时，这样：

```
if (!"".equals(text))
    query += "&fq=content:" + text; 
```

我们得到了预期的结果。

通过我们使用“content” SOLR 字段作为过滤器获得的 CmsSearchResource 对象，我们能够迭代其内部 I_CmsSearchDocument 的字段，得到以下列表作为结果：

```
id
contentblob
path
type
suffix
created
lastmodified
contentdate
relased
expired
res_locales
con_locales
template_prop
default-file_prop
notification-interval_prop
NavPos_prop
enable-notification_prop
locale_prop
NavText_prop
Title_prop
category
ca_excerpt
timestamp
score
link 
```

列表中不存在“numexp”字段。为什么？我们是否缺少任何步骤？我们是否必须配置其他东西才能使映射工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-04T23:47:50.293

几个月前我遇到了同样的问题。我认为这是你的问题

```
<searchsetting element="numeroExpediente" searchcontent="true">
     <solrfield targetfield="numexp" />
</searchsetting> 
```

你必须改变这个

```
<searchsetting element="numeroExpediente" searchcontent="true">
     <solrfield targetfield="numexp" sourcefield="*_s" />
</searchsetting> 
```

您必须设置 solrfield 的类型，查看 SOLR 的 schema.xml 中的不同类型，我为博客元素中的某个类别执行此操作。在 v9.0.1 中工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-04T12:31:19.510

我们遇到了同样的问题。问题是 SOLR 不会自己索引嵌套内容，你必须说是否应该索引该字段。

例如，假设我们有一个事件 XSD，其中包含有关事件和公司的信息：

```
<xsd:complexType name="OpenCmsEvent">
    <xsd:sequence>
        <xsd:element name="EventInformation" type="OpenCmsEventInformation" minOccurs="1" maxOccurs="1" />
        <xsd:element name="EventHost" type="OpenCmsEventHost" minOccurs="0" maxOccurs="1" />
    </xsd:sequence>
    <xsd:attribute name="language" type="OpenCmsLocale" use="required" />
</xsd:complexType> 
```

我们想知道来自 Eventhost 的公司链接

```
<xsd:complexType name="OpenCmsEventHost">
    <xsd:sequence>
        <xsd:element name="company" type="OpenCmsVfsFile" minOccurs="1" maxOccurs="unbounded" />
    </xsd:sequence>
    <xsd:attribute name="language" type="OpenCmsLocale" use="optional" />
</xsd:complexType> 
```

以下映射将为我们提供我们想要的信息

```
<searchsettings>
    <searchsetting element="EventHost/company" searchcontent="true">
            <solrfield targetfield="companyurl"/>
    </searchsetting>
</searchsettings> 
```

在现有资源上执行此操作时，不要忘记重新索引您的太阳能索引！

# erlang - index of item in a list

> ID：14478930
> 
> 赞同：1
> 
> 时间：2013-01-23T11:44:47.167
> 
> 标签：erlang

I have read a file in to a list, the format of the file for example is:

```
 blue
 yellow
 green
 red 
```

and now i want to find the location (index) of item "green" if done correctly the result would be "3" as it is the 3rd item in the list.

maybe I'm not good at searching google but I couldn't find a solution anywhere :/ so the whole idea of this is:

```
if (item.exists(List, "green")) {
    index = indexOf(List, "green")
} 
```

First i must know if it exists before I get the index of it. Also I'm trying to do this without having to make any new functions that I would have to call.

thanks for any help

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T00:03:04.887

一种方法是使用拉链在列表中系上数字：

```
L = [blue, yellow, green, red],
case lists:keyfind(green, 1, lists:zip(L, lists:seq(1, length(L))) of
  false -> not_there;
  {green, Idx} -> {found, Idx}
end,
... 
```

（未测试）

问题是你想要一个索引。我们很少（如果有的话）在 erlang 程序中使用索引。相反，我们可能会将列表表示为一个集合：

```
Set = sets:from_list(L),
case sets:is_element(green, Set) of
   true -> ...;
   false -> ...
end, 
```

# c# - UpdateSourceTrigger 按钮单击转换器

> ID：14478931
> 
> 赞同：0
> 
> 时间：2013-01-23T11:44:47.587
> 
> 标签：c#, wpf, converter

使用以下代码，在更新/更改 DependencyProperties 之一时调用 Convert 方法。

我希望仅在单击按钮时调用转换器。我怎样才能做到这一点？

这是代码：

```
 <Button Content="Create Project">

                <Button.CommandParameter>
                    <MultiBinding Converter="{StaticResource MyConverter}" UpdateSourceTrigger="Explicit"  Mode="TwoWay">
                        <Binding Path="Text" ElementName="txtDesc"/>
                        <Binding Path="Text" ElementName="txtName"/>
                        <Binding Path="SelectedItem" ElementName="ListBox"/>
                        <Binding Path="SelectedItem.Language" ElementName="TreeView"/>
                    </MultiBinding>
                </Button.CommandParameter>

            </Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:28:07.370

我认为会纠正这样的代码：

**xml**

```
 <Button Content="Create Project" Click="Button_Click"/> 
```

**CS**

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {
        string param1 = txtDesc.Text;
        string param2 = txtName.Text;
        object param3 = ListBox.SelectedItem;
        object param4 = TreeView.SelectedItem;

        object convertResult = MyConverterUtils.Convert(param1, param2, param3, param4);
        (sender as Button).CommandParameter = convertResult;
        //or you can execute some method here instead of set CommandParameter
    }

    public class MyConverterUtils 
    {
         //convert method
         //replace Object on your specific types 
         public static Object Convert(string param1, string param2,Object  param3,Object param4)
         {
             Object convertResult=null;

             //convert logic for params and set convertResult
             //for example convertResult = (param1 + param2).Trim();

             return convertResult;
         } 
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T08:31:07.107

使用[MVVM](https://www.google.com/webhp?sourceid=chrome-instant&ion=1&ie=UTF-8#hl=es&tbo=d&sclient=psy-ab&q=wpf%20mvvm%20code%20project)可以非常简单：

1.  [使用RelayCommand](https://www.google.com/webhp?sourceid=chrome-instant&ion=1&ie=UTF-8#hl=es&tbo=d&output=search&sclient=psy-ab&q=wpf%20RelayCommand)`ICommand`在您的 MVVM 中声明 a 。
2.  将 Button 的`Command`属性绑定到声明的命令。
3.  在命令的 Execute 方法中执行您的逻辑。
4.  更新所需的属性。

**视图模型**

```
 public class MyViewModel : INotifyPropertyChanged
    {
        public ICommand UpdateSomething { get; private set; }

        public MyViewModel()
        {
            UpdateSomething = new RelayCommand(MyCommandExecute, true);
        }

        private void MyCommandExecute(object parameter)
        {
            // Your logic here, for example using your converter if
            // you really need it.

            // At the end, update the properties you need
            // For example adding a item to an ObservableCollection.
        }
    } 
```

**XAML**

```
 <Button Content="Create Project" Command="{Binding UpdateSomething}"/> 
```

# c++ - find a range of values in std::list

> ID：14478932
> 
> 赞同：2
> 
> 时间：2013-01-23T11:44:51.957
> 
> 标签：c++, stl

Is there an algorithm to find a range of values ​​in the std::list, could do such action:

```
list<char> text;
text.push_back('a');
text.push_back('b');
text.push_back('c');
text.push_back('d');
text.push_back('e');
text.push_back('f');

list<char> values;
values.push_back('c');
values.push_back('d');
values.push_back('e');

list<char>::iterator it = find(text.begin(), text.end(), values); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T11:50:09.690

你要[搜索](http://en.cppreference.com/w/cpp/algorithm/search)

```
list<char>::iterator it = search(text.begin(), text.end(),
                                 values.begin(), values.end()); 
```

# sql - how to write more than one insert statements in stored procedure with two table parameters

> ID：14478935
> 
> 赞同：0
> 
> 时间：2013-01-23T11:44:59.833
> 
> 标签：sql, stored-procedures, asp-classic

I have two tables

```
Employee---->Id(identity),FN,LN,Address

EmpContact--->Id(identity),Empid(Above table identity value),ContactType,ContactNumber 
```

How to write two tables insert statements in single stored procedure. The second table "EmpContact" needs the resulted Identity ID from insertion in the first table "Employee"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:49:30.517

您需要的是 SCOPE_IDENTITY() 函数，它返回范围内的最后一个 ID

```
insert into Employee(FN,LN, Adress)
values(@var1, @var2, @var3)

declare @EmpID int 
set @EmpID = SCOPE_IDENTITY()

insert into EmpContact(Empid, ContactType, contactNumber)
values(@EmpID, @var4, @var5) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T11:50:23.777

emmm... 答案很简单，只要写一个带有错误处理等的程序就可以了。

```
create procedure dbo.myProc
@param

insert into dbo.Employee(FN,LN,Address)
select @value1, @value2, @value3

insert into dbo.EmpContact(Empid,ContactType,ContactNumber)
select ID,@value4, @value5
from dbo.Employee

go 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T11:51:09.240

假设您的未知字段作为参数传入：

在您的存储过程中...

```
DECLARE @EmployeeID BIGINT --Or whatever datatype you are using

INSERT INTO Employee
    (FN, LN, Address)
VALUES
    (@FN, @LN, @Address)

SET @EmployeeID = SCOPE_IDENTITY()  --This is probably the line you are looking for

INSERT INTO EmpContact
    (Empid, ContractType, ContractNumber)
VALUES
    (@EmployeeID, @ContractType, @ContractNumber) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T11:51:31.580

```
create proc yourproc
(
   -- parameter definitions here
)
as
begin
        insert into Employee
        (FN,LN,Address) 
        values 
        (@FN,@LN,@Address)

declare @EmployeeID int 
set @EmployeeID = SCOPE_IDENTITY()

        insert into EmpContact
        (Empid, ContactType, ContactNumber) 
        values 
        (@EmployeeID, @ContactType, @ContactNumber) 
end 
```

> SCOPE_IDENTITY 和@@IDENTITY 返回在当前会话的任何表中生成的最后一个标识值。但是，SCOPE_IDENTITY 返回仅在当前范围内插入的值；@@IDENTITY 不限于特定范围。

[SCOPE_IDENTITY (Transact-SQL) - MSDN](http://msdn.microsoft.com/en-us/library/ms190315.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-16T22:39:48.013

您可以使用原始插入的东西，但是您可以使用第一个表中插入的标识 ID `SCOPE_IDENTITY()`，它返回为当前会话和当前范围中的任何表生成的最后一个标识值。

# mongodb - Grails 嵌入式查询数组

> ID：14478939
> 
> 赞同：0
> 
> 时间：2013-01-23T11:45:10.110
> 
> 标签：mongodb, grails, embedded-database

我在grails mongodb上有这样的代码

```
//myDomain
class Plugin {
    List<String> projects = []
    //projects has name and description
}

//myController
def query = null
    if (params.q != null)
    {
        def q = '%'+ params.q +'%'
        query = Plugin.where {
            (projects.name =~ q || projects.name ==~ q)
        }
    }
//return null 
```

为什么我无法通过projects.name 找到插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:31:09.930

从属性定义

```
List<String> projects = [] 
```

项目的元素是字符串，这就是你不能查询的原因`projects.name`，这是 GORM 不知道的。

在您的最后一条评论中，项目实例中的值`"projects": { "0": { "description": "123", "name": "cms" }, "1": { "description": "cms", "name": "codebucks" } }`看起来像一个 Map，其中项目编号是键，包含名称和描述的内部映射是值，而不是 List。

为了达到您的目的，您需要修改域类定义以确保模型和数据之间的一致性。

# c# - Windows mobile 6.5 (c#.net cf 3.5) 下载文件卡在 Stream Read 上

> ID：14478941
> 
> 赞同：3
> 
> 时间：2013-01-23T11:45:11.793
> 
> 标签：c#, httpwebrequest, download, httpwebresponse, .net-cf-3.5

我有以下用于下载文件的方法。它工作正常，除非在下载过程中互联网连接断开。在这种情况下，它会卡在接收流的读取（即在 len = receiveStream.Read(buffer, 0, buffer.Length) 中。它不会继续，或者抛出异常，它似乎永远卡在那里。我将超时设置为 10 秒，并将它们赶得更高。我做错了什么，还是错过了什么？

我也尝试过使用异步方法（BeginGetResponse、BeginRead 等），但它们也卡住了。

我已经在 Windows mobile 6 专业模拟器和 Windows 移动设备上对此进行了测试。

```
 private void DownloadFile(string url, string filename)
    {           
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
        request.Timeout = 10000;
        request.ReadWriteTimeout = 10000;

        using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
        {
            using (Stream receiveStream = response.GetResponseStream())
            {
                long size = response.ContentLength;
                using (Stream file = File.OpenWrite(filename))
                {
                    byte[] buffer = new byte[8 * 1024];
                    int len;
                    while ((len = receiveStream.Read(buffer, 0, buffer.Length)) > 0)
                    {
                        file.Write(buffer, 0, len);
                        total += len;
                        UpdateDownloadState(total, size);
                    }

                }
            }
        }
    } 
```

谢谢

# outlook - 在 Outlook 插件中查找 MailType

> ID：14478946
> 
> 赞同：0
> 
> 时间：2013-01-23T11:45:44.733
> 
> 标签：outlook, add-in

我正在使用 c#.net 创建一个 Outlook 插件。当我尝试转发邮件线程时，是否可以将所有邮件线程作为 mailItem 数组对象。我想检查新创建的邮件正文中的值，而不是邮件线程中的值。如果我可以获取邮件线程，我可以为我的新邮件的第一个项目写一个条件。

是否有一个选项来检查新创建的邮件是 forward , Reply 或 ReplyToall

请帮我 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:21:42.877

调用 MailItem.GetConversation（Outlook 2010 及更高版本）- [http://msdn.microsoft.com/en-us/library/office/ff862527.aspx](http://msdn.microsoft.com/en-us/library/office/ff862527.aspx)

# mysql - 在特定日期使用 sql/PHP 计算两个不同行/列中两个数字的平均值、方差和标准差

> ID：14478948
> 
> 赞同：1
> 
> 时间：2013-01-23T11:45:52.547
> 
> 标签：mysql, sql, sqlite, date, variance

我有一个具有以下结构的数据库：

```
rowid       ID                  startTimestamp   endTimestamp   subject
1           00:50:c2:63:10:1a   ...1000          ...1090        entrance
2           00:50:c2:63:10:1a   ...1100          ...1270        entrance
3           00:50:c2:63:10:1a   ...1300          ...1310        door1
4           00:50:c2:63:10:1a   ...1370          ...1400        entrance
.
.
. 
```

使用此 SQL 查询，我可以获得一行和下一行之间的 endTime 和 startTime 之间的平均差异，按主题和 ID 排序，以及它们的最小值、最大值、方差和标准偏差：

```
SELECT ID,AVG(diff) AS average,
   AVG(diff*diff) - AVG(diff)*AVG(diff) AS variance,
   SQRT(AVG(diff*diff) - AVG(diff)*AVG(diff)) AS stdev,
   MIN(diff) AS minTime,
   MAX(diff) AS maxTime

FROM
(SELECT t1.id, t1.endTimestamp,
        min(t2.startTimeStamp) - t1.endTimestamp AS diff
FROM table1 t1
INNER JOIN table1 t2
ON t2.ID = t1.ID AND t2.subject = t1.subject
AND t2.startTimestamp > t1.startTimestamp  -- consider only later startTimestamps
WHERE t1.subject = 'entrance'
GROUP BY t1.id, t1.endTimestamp) AS diffs
GROUP BY ID 
```

这很好用，如果我在同一天只有几行时间差异较小，你可以在这个 sqlfiddle 中看到它：

[http://sqlfiddle.com/#!2/6de73/1](http://sqlfiddle.com/#!2/6de73/1)

但是，当我在另一天获得更多数据时，我得到了错误的值：

[http://sqlfiddle.com/#!2/920b6/1](http://sqlfiddle.com/#!2/920b6/1)

因此，我想计算每一天的平均值、最小值、最大值、方差、标准差。

我知道 MySQL 有 DATE-Functions 但我无法完成...有人可以帮助我吗？还是我必须编写一段可以处理这个问题的 PHP 代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T14:09:51.467

是否像将日期添加到`group by`. 以下是适用于 MySQL 和 SQLite 的语法，基于结束时间的日期并假设结束时间存储为日期时间：

```
SELECT ID, thedate, AVG(diff) AS average,
   AVG(diff*diff) - AVG(diff)*AVG(diff) AS variance,
   SQRT(AVG(diff*diff) - AVG(diff)*AVG(diff)) AS stdev,
   MIN(diff) AS minTime,
   MAX(diff) AS maxTime
FROM (SELECT t1.id, t1.endTimestamp, DATE(endtimestamp) as thedate,
             min(t2.startTimeStamp) - t1.endTimestamp AS diff
      FROM table1 t1 INNER JOIN
           table1 t2
           ON t2.ID = t1.ID AND t2.subject = t1.subject AND
              t2.startTimestamp > t1.startTimestamp  -- consider only later startTimestamps
     WHERE t1.subject = 'entrance'
     GROUP BY t1.id, t1.endTimestamp
    ) AS diffs
GROUP BY ID, thedate 
```

如果存储为时间戳，请参阅 Marty 的评论。

# c++ - 使用 SFML 和 Qt

> ID：14478949
> 
> 赞同：2
> 
> 时间：2013-01-23T11:45:52.297
> 
> 标签：c++, qt, sfml

我在控制台模式下使用 SFML，因为我想制作一个关卡编辑器，而 GUI 需要永远编写代码，我应该将 SFML 与 Qt 合并吗？所以我可以使用 Qt 来制作关卡，然后当我制作实际的游戏引擎（一个单独的项目，只加载在地图编辑器中制作的地图文件）时，我不会再使用 Qt 了吗？

那么我应该使用 Qt 还是仅仅使用一个基本的 Win32 GUI 项目来与 SFML 合并以制作地图编辑器，以及我将如何做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T11:49:11.883

SFML 和 Qt 都具有 opengl 功能，因此这绝对是一种选择。我也推荐它，因为使用 Qt 您可以自定义样式表以使其更适合游戏环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T11:24:41.210

我认为这是制作关卡编辑器或其他游戏工具的绝佳组合。在[我的博客](http://becomingindiedev.blogspot.com.es/2013/10/qt-5-and-sfml-20-integration.html)中，我发布了如何执行 Mac OS 和 SFML 2.0 的集成。[此处](http://becomingindiedev.blogspot.com.es/2013/10/first-experiments-with-qt-and-sfml.html)展示了使用此集成制作 2D 关卡编辑器的一些早期成就。

# php - Facebook Graph API 事件发布时间错误

> ID：14478952
> 
> 赞同：2
> 
> 时间：2013-01-23T11:45:58.247
> 
> 标签：php, facebook-graph-api, timezone, utc, iso8601

我正在通过图形 api 将事件发布到 Facebook 页面，但是当我输入要求的开始和结束时间的 ISO 8601 时间戳时，在 Facebook 上查看事件时出现意外的时间偏移。

```
$post_obj['start_time'] = '2013-01-27T12:00+0100';
$post_obj['end_time']   = '2013-01-27T16:00+0100'; 
```

Facebook 活动页面显示 03:00 - 07:00，即休息 9 小时。

可能出了什么问题？

谢谢，托马斯

编辑：当我使用 -0800 作为时区偏移量时，时间显示正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T11:51:54.573

您需要告诉它您所在的时区，因为大多数国家/地区的时区不同

```
date_default_timezone_set('Asia/Calcutta');
$timestamp = strtotime('2012-06-06T16:20:43+0000');
$local_datetime = date('c',$timestamp); 
echo $local_datetime; 
```

这很好，检查你的时区蚂蚁再试一次

# html - 表单调整大小响应问题文本区域

> ID：14478958
> 
> 赞同：1
> 
> 时间：2013-01-23T11:46:21.617
> 
> 标签：html, css, forms, textarea, responsive-design

我的响应式文本区域有问题。在用户尝试扩展表单之前，它可以正常工作（跨不同的尺寸）（我目前已将其尺寸锁定为高度/最大高度/宽度/最大宽度组合）。有针对这个的解决方法吗？我做错了什么 - 以前没有见过这个问题。

专辑 -
[http://imgur.com/a/9ICnF#0](http://imgur.com/a/9ICnF#0)

网站 -
[http://pxlprfct.co.uk/](http://pxlprfct.co.uk/)

html

```
<textarea name="message" id="message" placeholder="Message"></textarea> 
```

CSS

```
form{
    border: none;
    outline: none;
    text-align: center;
    text-decoration: none;
    font-family: 'Open Sans', sans-serif;
    font-weight: 700;
    color: white;
    text-transform: uppercase;
    background: black;

    /*Android Hack*/
    margin-top: -1px;
    padding-bottom: 2em;
}

    #message
{
    border: none;
    outline: none;
    color: black;

    display: block;
    background: white;
    padding: 1em;
    margin: auto;
    font-size: 1em;
    margin-bottom: 1em;
    font-family: 'Open Sans', sans-serif;

    height: 12em;
    max-height: 12em;

    width: 70%;
    max-width: 70%;

} 
```

很抱歉代码乱七八糟-它们很快就被破解了！:)
提前谢谢！

[http://jsfiddle.net/qfYQN/1/](http://jsfiddle.net/qfYQN/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T12:16:57.930

我想不出一个可靠的解决方案来解决这个问题。

在我看来，您有两个选择：禁用 resize css 属性或使用一些 javascript 在用户调整框大小时将边距重置为自动。

CSS：

```
 resize:none; 
```

jquery：不幸的是，没有用于调整文本框大小的事件侦听器，因此这将是最简单的方法：

```
 $('#message').mouseup(function(){
    $(this).css('margin', 'auto');  
 }); 
```

[http://jsfiddle.net/WLBde/](http://jsfiddle.net/WLBde/)

否则，您可以设置一个间隔，每 X 秒检查一次文本框的宽度，如果不同，则像上面一样重置边距。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-05-23T07:59:27.730

我做了这个工作。我刚刚为文本区域分配了一个消息 id，然后我添加了这个 css

```
#message {

    width:100%;

} 
```

# ios - 方法声明不同于一般声明

> ID：14478961
> 
> 赞同：0
> 
> 时间：2013-01-23T11:46:24.127
> 
> 标签：ios, objective-c, cocoa, variadic-functions

调试时我发现了这种方法。

```
 - (void)sendPublicEvent:(NSInteger)type, ... KNCONTANT_VALUE 
```

方法声明不同于生成方法声明。

我不明白为什么它在键入`,...`KNCONTANT_VALUE` 后加上后缀我想知道为什么方法声明不同，任何人都可以给我建议！@提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:49:42.143

此方法采用可变参数。

看这个例子：

在.h

```
-(void)variableArgument:(NSString *)string, ...; 
```

在.m

```
- (void)variableArgument:(NSString *)string, ... {
  va_list args;
  va_start(args, string);
  NSLogv(string, args);
  va_end(args);
} 
```

并且`KNCONTANT_VALUE`表明这应该是整数值之后的最后一个常量值。

当我们处理字符串时，我们使用：`-(void)variableArgument:(NSString *)string, ... NS_REQUIRES_NIL_TERMINATION;`

# java - 获取文件的总大小（以字节为单位）

> ID：14478968
> 
> 赞同：137
> 
> 时间：2013-01-23T11:46:40.403
> 
> 标签：java, fileinputstream

> **可能重复：**
> [java有效地获取文件大小](https://stackoverflow.com/questions/116574/java-get-file-size-efficiently)

我有一个名为 filename 的文件，它位于`E://file.txt`.

```
FileInputStream fileinputstream = new FileInputStream(filename); 
```

我想要做的是计算这个文件的大小（以字节为单位）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2013-01-23T11:47:58.757

您可以使用以字节为单位返回大小的`length()`方法。`File`

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-01-23T11:48:47.910

您不需要 FileInputStream 来计算文件大小，`new File(path_to_file).length()`就足够了。或者，如果您坚持，请使用`fileinputstream.getChannel().size()`.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-23T11:48:30.557

你可以用[`Files.size(new File(filename).toPath())`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#size%28java.nio.file.Path%29).

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-23T11:49:44.907

```
public static void main(String[] args) {
        try {
            File file = new File("test.txt");
            System.out.println(file.length());
        } catch (Exception e) {
        }
    } 
```

# uri - Jena SDB IRI 验证

> ID：14478969
> 
> 赞同：0
> 
> 时间：2013-01-23T11:47:01.203
> 
> 标签：uri, jena, uriencoding, iri

我有几个奇怪的 IRI 想要插入 Jena SDB，但我收到了一些错误消息：

1.  [http://example.org/text/1234#offset_2311_2317_10-12%](http://example.org/text/1234#offset_2311_2317_10-12%)
    错误消息是：
    代码：片段中的 30/ILLEGAL_PERCENT_ENCODING：主机组件出现百分比，后面没有两个十六进制数字。
2.  [http://example.org/text/5678#offset_365_370_NDZ#2](http://example.org/text/5678#offset_365_370_NDZ#2)
    错误消息是：
    代码：0/ILLEGAL_CHARACTER in FRAGMENT：该字符违反了 URI/IRI 的语法规则。
3.  [http://example.org/text/7890#offset_8872_8878__](http://example.org/text/7890#offset_8872_8878__) “Fren
    错误消息是：
    代码：4/UNWISE_CHARACTER in FRAGMENT：该字符与 URI/IRI 的语法规则不匹配。这些字符在 RDF URI 引用、XML 系统中是允许的标识符和 XML Schema anyURI。

字符串 10-12%, NDZ#2 和 _"Fren 是从纯文本文档中提取的，我必须将其直接附加在 IRI 的后面。所以我的问题是：它们是有效的 IRI 吗？如果不是，考虑到我需要要在 IRI 后面附加纯文本，如何将它们转换为有效的 IRI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T13:46:41.473

1 是错误的，因为它以 % 结尾—— % 用于十六进制编码，所以它必须是 %xx

编码 % -- 使用 %25

2 是错误的，因为它有两个片段。USe %23 是你的意思 # 作为一个字符，而不是作为一个片段

3里面有“。编码。

空间也是一个坏主意。使用 %20。

# apache - 将所有流量重定向到 www https

> ID：14478973
> 
> 赞同：3
> 
> 时间：2013-01-23T11:47:08.480
> 
> 标签：apache, tomcat, redirect, https

我的应用程序在 Ubuntu 上托管的 Apache 上运行，我希望以下重新指导工作：

```
1> http://example.com       -> https://www.example.com
2> http://www.example.com   -> https://www.example.com
3> https://example.com      -> https://www.example.com 
```

我在我的默认 apache 配置文件中使用以下行：

```
RewriteEngine on
RewriteCond %{HTTP_HOST}   !^$
RewriteRule ^/?(.*)         https://www.example.com/$1 [L,R] 
```

这样，前两个重定向工作正常，但第三个没有。第三种可能吗？如果是的话怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:26:12.330

我有一个站点，我希望所有进入虚拟主机的流量都转到端口 443。我为端口 80 重定向设置了虚拟主机定义，如下所示：

```
RewriteEngine on
RewriteCond %{SERVER_PORT} !^443$
RewriteRule ^/?(.*)         https://www.example.com/$1 [L,R] 
```

这会将进入端口 80 的所有流量重定向到 443。

确保您的 ServerName 和 ServerAlias 设置正确。在此示例中，您将有类似的内容：

```
<VirtualHost *:80>
    ServerName www.example.com
    ServerAlias *.example.* example.* example.com

    <IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteCond %{REQUEST_METHOD} ^TRACE
        RewriteRule .* - [F]
        RewriteCond %{REQUEST_METHOD} ^TRACK
        RewriteRule .* - [F]

        #redirect all port 80 traffic to 443
        RewriteCond %{SERVER_PORT} !^443$
        RewriteRule ^/?(.*) https://www.example.com/$1 [L,R]
    </IfModule>

</VirtualHost> 
```

在此之后，您还将设置一个 443 虚拟主机定义（减去端口重写部分）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T16:44:42.663

我知道这已经有一段时间了，但我想你可能正在寻找这样的东西：

```
RewriteCond %{HTTPS_HOST}   !^$
RewriteRule ^/?(.*)         https://www.mysite.com/$1 [L,R] 
```

关键部分`S`是`%{HTTPS_HOST}`

你应该能够把它放在你已经拥有的东西之后。

# java - 我该如何解决这个问题以获得正确的温度结果

> ID：14478977
> 
> 赞同：-2
> 
> 时间：2013-01-23T11:47:24.493
> 
> 标签：java, eclipse

**如果我使用的数字超过 1，它会给我错误的结果**

```
 try {
    double celsius = Double.valueOf (editCelsius.getText().toString());
    double fahrenheit = celsius * 33.8 ;
    double kelvin = celsius * 274.15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T11:49:11.750

实际上，输入 1 时，您的公式甚至都不好……您的公式*非常*错误……这是正确的实现：

```
double celsius = Double.valueOf (editCelsius.getText().toString());
double fahrenheit = celsius * 1.8 + 32 ;
double kelvin = celsius + 273.15; 
```

**忠告：** *永远*运用常识……我想每个人都知道水在 100 摄氏度和 212 华氏度时沸腾，在 0 摄氏度和 32 华氏度时结冰。由此，您应该能够设计出华氏计算公式……至少您可以看出您的公式不好。

推荐阅读：

*   [温度单位的换算](http://en.wikipedia.org/wiki/Conversion_of_units_of_temperature)

# c++ - C++ 编译窗口包含垃圾字符

> ID：14478978
> 
> 赞同：0
> 
> 时间：2013-01-23T11:47:25.487
> 
> 标签：c++, emacs

我正在使用 emacs 编译 c++ 程序。在编译窗口中，我得到垃圾字符。下面给出的例子。

```
#include <iostream>
#include <string>

using namespace std;

int main()   
{   
 error

} 
```

我正在使用 compile 命令在 emacs 中编译它

```
g++  error.cpp 
```

在编译窗口中，我收到以下错误。

```
g++ error.cpp 
error.cpp: In function âint main()â:
error.cpp:10:3: error: âerrorâ was not declared in this scope
error.cpp:12:1: error: expected â;â before â}â token

Compilation exited abnormally with code 1 at Wed Jan 23 17:09:17 
```

您可以注意到窗口中有一些垃圾字符（许多垃圾在粘贴过程中消失了！）。如何避免这种情况？. 如果我在终端中进行编译，我看不到问题。

我在 ubuntu 12.10 中使用 emacs 24.1.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T15:46:32.243

在许多语言环境中，gcc 编译器`â`在它打算发出单引号字符时发出该字符（为什么这样做，我不知道）。

尝试将语言环境设置为默认`C`语言环境。

# iphone - 扩展 NKIssue - NewsStandKit (iOS)

> ID：14478979
> 
> 赞同：0
> 
> 时间：2013-01-23T11:47:28.290
> 
> 标签：iphone, ios, ipad, newsstand-kit

我正在开发一个新的杂志应用程序`NewsStandKit`，我需要扩展`NKIssue`，因为我的问题有更多属性。但我不知道如何做到这一点并将这些新属性存储在`NewsStand`内容库中。我在 Google、StackOverflow 等中搜索了这个问题，但没有找到任何东西。谁能告诉我该怎么做或解决我的问题的其他方法？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T08:32:58.600

您不会将数据直接存储在 NKIssue 对象本身上。NKIssue 有一个 contentURL 属性，该属性对于每个问题都是唯一的，并指向可用于存储内容的可写路径。如何存储它（plist、sqlite db、平面文件）取决于你。

您可以在 NKIssue 上子类化或添加一个类别，以便更轻松地访问您的应用程序特定属性，但仍由您决定它们如何存储在磁盘上。

# r - 我可以列出按日期排序的对象吗？

> ID：14478984
> 
> 赞同：8
> 
> 时间：2013-01-23T11:47:46.297
> 
> 标签：r

这对我来说非常有用。我可以`ls()`按日期（上次修改或类似的东西）对输出进行排序吗？

**背景：**我有一个非常凌乱的工作区，里面装满了各种`data.frames`,`variables`和`plots`. 我需要找到一个`data.frame`，但我不记得我叫它什么了，只记得我最近正在研究它。因此`ls()`按修改日期排序将帮助我弄清楚我所说的。

**澄清一下：**这不是关于使用`history()`. 我经常使用历史记录，并且经常在我认为可能需要时保存它。在这种情况下，历史记录不涵盖所需的时间，所以我找不到`data.frame`using `history()`.

**附加：**除了查找最近创建的既定任务之外`data.frame`，一般来说，能够`ls()`根据日期进行排序将非常有用。我工作了 2 年多的工作空间中有 100 多个对象（搜索 2 年`history`听起来也不好玩）。如果可以将这些对象按时间顺序排序，那么我就会知道哪些是较新的（可能是经过编辑的），哪些是较旧的（可能是原始的）。

我试图通过将单个对象缓慢移动到较小的相关工作区来改进我的工作流程。但是这个过程需要时间，而且基本上没有意义（因为我已经接近数据分析的尾声了）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T14:44:44.910

您可能会尝试使用该`makeActiveBinding`函数自动记录对感兴趣变量的修改。然后，您可以使用日志`ls()`按修改时间对输出进行排序。

需要注意的是，使用这种方法，必须在首次使用变量之前设置跟踪。

```
.change.log <- list()
track <- function(variable) {
    makeActiveBinding(variable,
        function(v) 
            if (! missing(v)) 
            .change.log[[variable]] <<- c(.change.log[[variable]], 
                                           as.list(Sys.time())),
        .GlobalEnv)
}

track('x')
x <- 1
.change.log
x <- 2
.change.log 
```

每次`x`修改时，提供给的匿名函数`makeActiveBinding`都会被调用为`v`等于新值。这个函数在`x`被引用时也会被调用，但在这种情况下没有提供任何东西`v`，因此条件与`missing(v)`--- 我们只想在值更改时更新日志。

* * *

### 编辑

经过进一步考虑，更好的替代方法`makeActiveBinding`是通过函数安装修改记录器`addTaskCallback`。下面的代码创建了一个自动记录器，每次`<-`在顶层使用运算符时，它都会按变量名记录时间戳。

```
# define a log maker function. This returns a new logger function
# bound with a fresh log.
mk.log <- function() {
    log <- list()
    # handler functions have to have these four args, but we only use the first.
    function(expr, value, ok, visible) {
        if (class(expr) == '<-') {
            # convert the assignment call to a list, so the 
            # variable name can be extracted
            call.list <- as.list(expr)
            # extract the name of the variable being affected, and 
            # convert it to character, so we can use it as a list name
            variable <- as.character(call.list[[2]])
            # append a timestamp to the log for this variable
            log[[variable]] <<- c(log[[variable]], list(Sys.time()))
        }
        # callback handlers need to return a bool
        return(TRUE)
    }
}

# assign the handler to .log, and install it.
addTaskCallback(.log <- mk.log(), name='log')

x <- 5
x <- 10
y <- 4

# read the log
environment(.log)$log

# $x
# $x[[1]]
# [1] "2013-01-25 10:24:26.581 EST"
# 
# $x[[2]]
# [1] "2013-01-25 10:24:26.585 EST"
# 
# 
# $y
# $y[[1]]
# [1] "2013-01-25 10:24:26.589 EST" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T14:10:28.767

好吧，通过一点创造性的黑客攻击，您可以为变量编写自己的方法。例如：

```
datedmatrix<-function(data,nrow,ncol,...) {
    output <- matrix(data, nrow=nrow,ncol=ncol,...)
    attr(output,'create') <- date()
    return(output)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T11:59:50.037

不，但您应该使用该`history`函数通过您运行的最新命令找到它的名称。

默认情况下，`history`将显示最后 25 行代码，但您可以通过以下方式请求更多：

```
history(max.show = 100) 
```

您可以显示的行数也有硬性限制。它等于`R_HISTSIZE`默认为 512 的环境变量的值。但正如文档所述：

> 会话期间保留的历史记录行数没有限制 [...]

所以你可以这样做：

```
Sys.setenv("R_HISTSIZE" = 10000)
history(max.show = 10000) 
```

并且您应该能够看到自您开始会话以来的所有历史记录（假设您运行的代码少于 10000 行。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T12:15:19.930

你可以使用`ls.str(mode="list")`.

示例输出：

```
b : 'data.frame':   1 obs. of  1 variable:
 $ test: Factor w/ 1 level "a": 1
c : 'data.frame':   1 obs. of  1 variable:
 $ x: num 1 
```

我不认为创建时间与任何 R 对象一起存储。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-26T11:54:35.360

这是一个想法，我们创建一个日志，所有使用的操作`:=`都将存储在那里：

```
`:=` <- function(e1,e2){
  log <- data.frame(
    var = paste(collapse="\n",deparse(substitute(e1))),
    call=  paste(collapse="\n",deparse(substitute(e2))),
    time = Sys.time()
  )
  if(exists(".log",envir = .GlobalEnv)){
    assign(".log", 
           rbind(get(".log", envir = .GlobalEnv), log), 
           envir = .GlobalEnv)
  } else {
    assign(".log", log, envir = .GlobalEnv)
  }  
  eval.parent(do.call(
    substitute, list(match.call(), list(`:=` = quote(.Primitive("<-"))))))
}

x := 1
x := x+2
x
# [1] 3
.log
#   var  call                time
# 1   x     1 2019-02-26 12:17:24
# 2   x x + 2 2019-02-26 12:17:25 
```

通过一些调整，我们还可以记录`<-`在全局环境中所做的每个分配，但它会减慢 R。

```
`<-` <- function(e1,e2){
  if(identical(parent.frame(), .GlobalEnv)){
    log <- data.frame(
      var = paste(collapse="\n",deparse(substitute(e1))),
      call=  paste(collapse="\n",deparse(substitute(e2))),
      time = Sys.time()
    )
    if(exists(".log",envir = .GlobalEnv)){
      assign(".log", 
             rbind(get(".log", envir = .GlobalEnv), log), 
             envir = .GlobalEnv)
    } else {
      assign(".log", log, envir = .GlobalEnv)
    }    
  } 

  eval.parent(do.call(substitute, list(
    match.call(), list(`<-` = quote(.Primitive("<-"))))))
}

rm(.log)
var <- 1
var <- var +1
var
fun <- function(x) {y <- x+1; y}
var2 <- fun(var)
var
# [1] 2
var2
# [1] 3
.log
#    var                                    call                time
# 1  var                                       1 2019-02-26 12:52:13
# 2  var                                 var + 1 2019-02-26 12:52:13
# 3  fun function(x) {\n    y <- x + 1\n    y\n} 2019-02-26 12:52:14
# 4 var2                                fun(var) 2019-02-26 12:52:14 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T12:06:03.500

这不是一个直接的答案，但我个人使用 RStudio。

Rstudio 有一个选项卡历史记录（主要使用历史 R 命令）和一个非常好的搜索选项。

在这里，我在我的历史中搜索“源”这个词。 ![在此处输入图像描述](../Images/b5f59908d2bce06f5da707477624ab69.png)

要获得更多详细信息，我可以查看这段历史中每一行的上下文。例如这里第一行的细节。 ![在此处输入图像描述](../Images/f9300bb0e7c2df1514313deb5812c5cd.png)

# php - jQuery AJAX 从 localhost 加载 JSONP 但不返回数据

> ID：14478985
> 
> 赞同：0
> 
> 时间：2013-01-23T11:47:46.453
> 
> 标签：php, json, jquery, jsonp

我正在尝试从我的本地主机加载一些 JSONP。我有一个 PHP webapp，如果提供了它，它会返回带有回调的 JSON。返回的 JSON 是 100% 有效的（使用 JSON 验证器检查）。网址如下所示：

```
http://localhost/backstage/public/data/acties?callback=? 
```

现在，当我尝试使用 jQuery AJAX 加载这些数据时，它会提示我“错误”，这意味着加载失败。

```
var url = "http://localhost/backstage/public/data/acties";

$("#debug").click(function() {
    console.log("getting data from " + url);
    $.ajax({
       type:'GET',
       url: url,
       dataType:'jsonp',
       success: function(data){
           alert('loaded');
       },
       error: function(data){
           alert('error');        
       }
    });
}); 
```

**但是，**当我转到网络选项卡时，我看到一个请求：

```
http://localhost/backstage/public/data/acties?callback=jQuery19008035339566413313_1358941083680&_=1358941083681 
```

此文件中的内容是有效的 JSON（我再次使用 JSON Validator 对其进行了验证）。数据似乎并没有出现在我的 JavaScript 数据变量中。

作为参考，这是我的 PHP (Zend 1.12) 代码：

```
public function actiesAction()
    {
        $data = new Application_Model_DbTable_Actie();
        $data = $data->fetchAll();
        $callback = htmlspecialchars($_GET["callback"]);
        $data = Zend_Json::encode($data);

        echo $callback.'('.$data.');';     
    } 
```

这是你去的时候得到的 JSONP

```
http://localhost/backstage/public/data/acties?callback=? 
```

--> [http://pastebin.com/tazcUQAW](http://pastebin.com/tazcUQAW)

请问有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T12:00:56.383

我发现了错误：我的基本布局仍然在响应中包含 HTML 代码。我按照[在 ZEND 中处理 JSONP 调用](https://stackoverflow.com/questions/5381563/handle-jsonp-calls-in-zend)的步骤（第二个答案），现在它可以完美运行了。无论如何感谢您的帮助！

# ms-access - 使用 MS Accees 的 ODBC SQLDescribeParam

> ID：14478990
> 
> 赞同：0
> 
> 时间：2013-01-23T11:48:04.520
> 
> 标签：ms-access, odbc

我正在使用 ODBC 连接到保存在 mdb 文件中的 MS Access 数据库。当前代码在绑定查询参数之前使用 SQLDescribeParam 函数，不幸的是 odbc 驱动程序管理器声明 windows xp sp3 上的**默认 Access 驱动程序**不支持该函数。

```
ODBC_ERROR: IM001:1:0:[Microsoft][ODBC Driver Manager] Driver does not support this function 
```

是否有任何其他驱动程序可以连接到支持 SQLDescribeParam 的 MS Access？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-25T22:44:12.587

为什么还要费心使用查询参数？直接使用表名或查询名即可。

```
strCity = "Edmonton"

strMySQl = "select * from myquery where city = '" & strCity & "'"

or use the table direct

strMySQl = "select * from myTable where city = '" & strCity & "'"

… your code here to open recordset. 
```

上面是一个 TON 少麻烦的一些查询参数，这些参数对您的代码没有任何帮助，对您的维护没有任何帮助，实际上使用带参数的已保存查询甚至不会节省执行和处理速度（实际上我可以引用显示它们运行速度较慢的文件！！！）。

因此，只需在代码中使用查询的名称，并根据需要在代码中附加 sql“where”子句。您节省了大量的编码时间和麻烦，并且如前所述，您无需担心获取查询的参数。只需从查询中删除所有参数，它们很麻烦，只会增加您的 IT 预算，因为您将时间浪费在不需要做的事情上，而且不会给您带来任何实际好处。

# c# - 我可以将 EventHandler 添加到字符串吗？

> ID：14478991
> 
> 赞同：0
> 
> 时间：2013-01-23T11:48:08.660
> 
> 标签：c#, events, event-handling, updates

我只是想知道当变量（如 int 、 string 等）的值发生变化时是否可以“触发”某些东西？

假设我有一个`TextBox tb`显示 的值`String MyString`。所以我想做的是这样的：

```
MyString.ValueChanged += new EventHandler(UpdateTextBox);

public void UpdateTextBox(object sender, EventArgs e)
{
tb.Text = MyString;
} 
```

为了不必在多行中更新文本框。有没有办法做到这一点？谢谢 ！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-23T11:50:16.990

A`string` **永不改变**。它是不可变的（除了在幕后工作的邪恶代码）。如果`MyString`是一个*属性*，那么您当然可以有一个`MyStringChanged`事件，并将*其*连接到事件处理程序。

```
private string myString;
public string MyString {
    get { return myString; }
    set {
       if(myString != value) {
          myString = value;
          var handler = MyStringChanged;
          if(handler!=null) handler(this,EventArgs.Empty);
       }
    }
}
public event EventHandler MyStringChanged; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T11:50:07.227

诸如`int`和之类的值`string`是不可变的。他们无法改变。

# rfid - UHF Rfid 可识别人员并在展台上记录时间

> ID：14478993
> 
> 赞同：0
> 
> 时间：2013-01-23T11:48:08.903
> 
> 标签：rfid

我想在有 4 个展位的贸易展的每扇门上添加一个超高频阅读器（所以它将是 4 个门），这样我就可以记录每个参观者在每个展位上花费的时间。问题是 uhf 标签将放置在访客凭证上，而访客凭证通常会放在访客脖子上。因此，当他进入展台时，我开始记录时间，当他离开时，我结束记录，以便知道时间。哪种天线是最好的天线类型，我应该如何将它放在门上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:39:09.227

我强烈建议您查看 Jamilson 的[Industrial Portals](http://www.industrialportals.com/)目录。那些很棒，你可以得到很多关于如何放置天线的想法。此外，您正在寻找一种美学解决方案。所以 Jamilson 目录有很多好看的门。

如果您正在寻找更便宜（或更快）的解决方案，您可以尝试 Motorola Symbol 的一套[AN200](http://www.barcodediscount.com/catalog/motorola/an200.htm)（一左一右）。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T10:18:27.803

第一的; 由于被动标签，在门口阅读所有标签似乎真的很难。如果您无法读取所有标签并存储此信息，您将无法了解该人的方向。如果你抓不到交易的1，你会检测到人的方向错误。

注意： * 您需要使用圆形天线 - 因为您不知道标签的确切位置。* 更多天线会提高读取率，但也会造成伤害 :( * 将天线与步行路径的方向成一定角度是读取率和标签方向的一个很好的解决方案。

# javascript - jQuery：使用已弃用的 .toggle() 替代品

> ID：14478994
> 
> 赞同：4
> 
> 时间：2013-01-23T11:48:15.217
> 
> 标签：javascript, jquery

我有一些类名为“.mute_btn”的图像，当我点击它们时，我的图像源正在改变：

```
$('.mute_btn').toggle(function () {
        var clicked = false;
        var src = $(this).attr("src");
        src = src.replace(/(.*)\.(png|gif|jpg|jpeg)$/, "$1-over.$2");
        $(this).attr("src", src);
    }, function () {
      var src = $(this).attr("src");
      src = src.replace(/(.*)-over\.(png|gif|jpg|jpeg)$/, "$1.$2");
      $(this).attr("src", src);
    }); 
```

但是我已经看到在 jQuery 1.8 中不推荐使用 toggle()

所以我试图这样做：

```
var clicked = false;
$('.mute_btn').click(function() {
        if (clicked) {

            var src = $(this).attr("src");
            src = src.replace(/(.*)-over\.(png|gif|jpg|jpeg)$/, "$1.$2");
            $(this).attr("src", src);
            clicked = false;
        }
        else {
            var src = $(this).attr("src");
            src = src.replace(/(.*)\.(png|gif|jpg|jpeg)$/, "$1-over.$2");
            $(this).attr("src", src);
            clicked = true;
        }}); 
```

但结果并不完美。有时，图像不会改变状态。

你知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T11:51:56.230

我怀疑问题是您有多个图像，但您试图用一个变量来管理它们的点击状态。尝试针对单个元素存储单击状态，如下所示：

```
$('.mute_btn').click(function() {
    if ($(this).data("clicked")) {
        var src = $(this).attr("src");
        src = src.replace(/(.*)-over\.(png|gif|jpg|jpeg)$/, "$1.$2");
        $(this).attr("src", src);
        $(this).data("clicked",false);
    }
    else {
        var src = $(this).attr("src");
        src = src.replace(/(.*)\.(png|gif|jpg|jpeg)$/, "$1-over.$2");
        $(this).attr("src", src);
        $(this).data("clicked",true);
    }
}); 
```

请注意，您可以缓存您的`$(this)`对象，而不是每次都创建一个新对象，但我没有这样做，以便解决您的问题所需的更改更加明显。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T11:56:02.407

`     **[LIVE DEMO](http://jsbin.com/inutiw/5/edit)**     `

```
$('.mute_btn').click(function () {

      var src = this.src;
      var isClicked = src.indexOf('-over') > -1 ; // true if '-over' is found

      if( isClicked ){
          this.src = src.replace(/(.*)-over\.(png|gif|jpg|jpeg)$/, "$1.$2");    
      }else{
          this.src = src.replace(/(.*)\.(png|gif|jpg|jpeg)$/, "$1-over.$2");
      }

}); 
```

`     **[LIVE DEMO using ternary operator](http://jsbin.com/inutiw/6/edit)**     `

```
$('.mute_btn').click(function () {

      var src = this.src;
      var isClicked = src.indexOf('-over') > -1 ;  
      this.src = isClicked ?
         src.replace(/(.*)-over\.(png|gif|jpg|jpeg)$/, "$1.$2") :
         src.replace(/(.*)\.(png|gif|jpg|jpeg)$/, "$1-over.$2") ;

}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T11:53:22.380

使用 jQuery 提供的 MIGRATE 代码

在这里查看更多信息：[Equivalent of deprecated jQuery Toggle Event](https://stackoverflow.com/questions/14338078/equivalent-of-deprecated-jquery-toggle-event/14478259#14478259)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-22T21:47:29.683

我使用的代码：

```
$('#example').click(function()
    {
    isClicked=$(this).data('clicked');
    if (isClicked) {isClicked=false;} else {isClicked=true;}
    $(this).data('clicked',isClicked);

    if(isClicked)
        {
        ...do stuff...
        }
    else
        {
        ...do stuff...
        }
    }); 
```