# StackOverflow 问答 15394000-15394999

# push-notification - 清除 Worklight 服务器上的推送通知注册

> ID：15394006
> 
> 赞同：1
> 
> 时间：2013-03-13T18:53:39.330
> 
> 标签：push-notification, ibm-mobilefirst

我希望清除部署在 WAS 8.5 上的 Enterprise Edition Worklight Server v5.0.5 上的所有推送通知注册。我们有一个用户，只有两台设备，但 WL 控制台推送通知显示该用户的 6 个注册设备。似乎有些注册已经复制了自己，或者已经损坏。其中一台设备不再接收以前可以工作的推送通知消息。我尝试删除声明事件源的适配器，甚至重新部署应用程序。但是，重新部署适配器时，推送通知注册仍然完好无损。您能否告诉我如何从 WL 服务器中清除这些条目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T10:00:18.193

我相信这样做的唯一方法是清除数据库中表的内容。此实例中的特定表将是：

NOTIFICATION_DEVICE 和 NOTIFICATION_USER

如果您也可以重新部署应用程序，那么在这样做之前还要清除这两个：

NOTIFICATION_APPLICATION 和 NOTIFICATION_MEDIATOR

# c# - a & b 在 .Aggregate( (a,b) => statement w/ a&b) 中代表什么

> ID：15394007
> 
> 赞同：3
> 
> 时间：2013-03-13T18:53:45.880
> 
> 标签：c#, linq

我试图想出最好的表达方式来解决我的确切问题，而无需有人解释 Aggregate 的作用，因为我知道这里和互联网上的其他地方已经对此进行了深入介绍。当调用 Aggregate() 并使用类似的 linq 语句时

```
(a,b) => a+b 
```

什么是a，什么是b？我知道 a 是当前元素，但是 b 是什么？我见过一些例子，其中 b 似乎只是 a 之前的一个元素，而其他例子中 a 似乎是前一个函数的结果，而其他例子看起来 b 是前一个函数的结果。

我已经在 [http://msdn.microsoft.com/en-us/library/bb548744.aspx](http://msdn.microsoft.com/en-us/library/bb548744.aspx) 和这里 [http://www.dotnetperls.com/aggregate浏览了实际 C# 文档页面上的示例](http://www.dotnetperls.com/aggregate)

但我只需要澄清一下 linq 表达式中两个参数之间的区别。如果我缺少一些基本的 Linq 知识来回答这个问题，请随时把我放在我的位置上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T18:59:51.367

看看[http://msdn.microsoft.com/en-us/library/bb548651.aspx上的示例](http://msdn.microsoft.com/en-us/library/bb548651.aspx)

```
 string sentence = "the quick brown fox jumps over the lazy dog";

        // Split the string into individual words. 
        string[] words = sentence.Split(' ');

        // Prepend each word to the beginning of the  
        // new sentence to reverse the word order. 
        string reversed = words.Aggregate((workingSentence, next) =>
                                              next + " " + workingSentence);

        Console.WriteLine(reversed);

        // This code produces the following output: 
        // 
        // dog lazy the over jumps fox brown quick the 
```

在此示例中，传递给的匿名函数`Aggregate`是`(workingSentence, next) => next + " " + workingSentence`. `a`将是`workingSentence`包含聚合结果直到当前元素，并且`b`将是当前元素被添加到聚合中。在第一次调用匿名函数时，`workingSentence = ""`和`next = "the"`. 在下一次通话中，`workingSentence = "the"`和`next = "quick"`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T18:57:15.680

如果您调用的重载采用与该描述匹配的 Func，则您很可能使用此版本：

[可枚举.聚合](http://msdn.microsoft.com/en-us/library/bb548651.aspx)

这意味着这`a`将是您的累加器，并且`b`将是下一个要使用的元素。

```
someEnumerable.Aggregate((a,b) => a & b); 
```

如果您要将其扩展为常规循环，它可能类似于：

```
Sometype a = null;

foreach(var b in someEnumerable)
{
    if(a == null)
    {
        a = b;
    }
    else
    {
        a = a & b;
    }
} 
```

将执行按位与并将结果存储回累加器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T18:58:34.493

`a`不是当前元素 -`b`是。第一次调用 lambda 表达式时，`a`将等于`seed`您提供给的参数`Aggregate`。以后的每一次，它都等于上一次调用 lambda 表达式的结果。

# opencart - OpenCart 类别和产品视图在前端空白

> ID：15394011
> 
> 赞同：0
> 
> 时间：2013-03-13T18:54:10.313
> 
> 标签：opencart

我“继承”了 OpenCart 1.5.2.1 的现有和工作安装。

为了测试目的，我想在我的本地服务器上建立一个开发站点。所以我在本地安装并复制了数据库。

我可以毫无问题地登录后端 - 商店已设置，所有产品和类别也都在那里。

在前端，我可以访问商店的主页，并且类别列表正确显示，包括每个类别的产品数量。

但是，当我尝试查看类别列表或单个产品时，我得到一个空白页面。

我没有收到 PHP 错误 - 我附加了

```
display_errors = 1;
error_reporting = E_ALL;
log_errors = 1; 
```

到购物车根文件夹中的 php.ini。

在 OpenCart 错误日志中，我收到以下错误消息：

```
2013-03-13 18:51:15 - PHP Notice:  Error: Column 'product_id' cannot be null<br />Error No: 1048<br />SELECT DISTINCT *, p [...] AND p2s.store_id = '5' in /path/to/root/system/database/mysql.php on line 49 
```

知道如何解决这个问题吗？

** 更新： **

完整的查询是：

```
SELECT DISTINCT *, pd.name, pd.creator, pd.keyword, pd.circa, pd.year, pd.century, pd.decade, pd.scenelocation, pd.fm_quicksearch AS fm_quicksearch, p.image, m.name AS manufacturer, (SELECT price FROM product_discount pd2 WHERE pd2.product_id = p.product_id AND pd2.customer_group_id = '8' AND pd2.quantity = '1' AND ((pd2.date_start = '0000-00-00' OR pd2.date_start < NOW()) AND (pd2.date_end = '0000-00-00' OR pd2.date_end > NOW())) ORDER BY pd2.priority ASC, pd2.price ASC LIMIT 1) AS discount, (SELECT price FROM product_special ps WHERE ps.product_id = p.product_id AND ps.customer_group_id = '8' AND ((ps.date_start = '0000-00-00' OR ps.date_start < NOW()) AND (ps.date_end = '0000-00-00' OR ps.date_end > NOW())) ORDER BY ps.priority ASC, ps.price ASC LIMIT 1) AS special, (SELECT points FROM product_reward pr WHERE pr.product_id = p.product_id AND customer_group_id = '8') AS reward, (SELECT ss.name FROM stock_status ss WHERE ss.stock_status_id = p.stock_status_id AND ss.language_id = '1') AS stock_status, (SELECT wcd.unit FROM weight_class_description wcd WHERE p.weight_class_id = wcd.weight_class_id AND wcd.language_id = '1') AS weight_class, (SELECT lcd.unit FROM length_class_description lcd WHERE p.length_class_id = lcd.length_class_id AND lcd.language_id = '1') AS length_class, (select (r.sum + p.rat)/(r.tot + p.tot) from (select COALESCE(j.sum,0) as sum , COALESCE(j.tot,0) as tot from (select SUM(rating) as sum , COUNT(rating) as tot, product_id from rating where product_id = '9206' group by product_id) j right join product on product.product_id = j.product_id where product.product_id = '9206') r, (select product_id, COALESCE(rating,0) as rat, count(rating) as tot from product where product_id = '9206' and rating > 0) p ) AS rating, p.sort_order FROM product p LEFT JOIN product_description pd ON (p.product_id = pd.product_id) LEFT JOIN product_to_store p2s ON (p.product_id = p2s.product_id) LEFT JOIN manufacturer m ON (p.manufacturer_id = m.manufacturer_id) WHERE p.product_id = '9206' AND pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW() AND p2s.store_id = '5' 
```

**更新**

我怀疑它与 MySQL 或 PHP 配置有关。因为当我在实时站点上运行相同的查询时，它可以正常工作。

**更新**

该问题与我的本地 MySQL 安装有关。使用在线数据库时一切正常。OpenCart 论坛中的某个人 - [Link to Post](http://forum.opencart.com/viewtopic.php?f=20&t=97562&p=390203#p390203)指出以下内容：

> 此错误源于对特定贡献的插入查询，作者 > 未经测试尝试添加自动递增字段将拒绝的空语句 > 特别是从 mySQL 5.1+ 开始。来自 mySQL 开发人员的这种方法已在 > 多年前被阻止。
> 
> 联系作者通过说明自动递增字段不需要在查询中解决此问题，因为它已经与执行的查询一起自动创建递增值。

可能是沿着这些路线。查询本身不是插入，但很可能与此有关。我会进一步调查此事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:20:20.633

在系统 > 设置 > 服务器选项卡中将“输出压缩级别”设置为 0。然后在 php.ini 文件中 display_errors = 1; error_reporting = E_ALL; 日志错误 = 1;

所以问题出在 'product_id' 上。在页面控制器页面中检查产品 ID（只需回显它）。然后检查模型查询。问题只是产品ID。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-17T15:36:24.640

是的，答案确实与我的本地 MySQL 安装有关。我把它移到另一台服务器上，它工作得很好。谢谢你的反馈！很抱歉没有比这更具体的答案。我只是想用这篇文章结束一个松散的结局。

# android - jsoup 多行 HTML 作为单行返回（无中断返回）

> ID：15394021
> 
> 赞同：1
> 
> 时间：2013-03-13T18:54:51.833
> 
> 标签：android, html, newline, jsoup

我有这个我想抓取的 HTML：

```
 <textarea name="notes" rows="5" cols="60">some notes go here
    and more including a blank line:

    and another new
    line
    etc
    etc
    </textarea> 
```

因为它们在文本区域中，所以没有 brs 或 \n。我可以很容易地得到全文：

```
 Element notes = doc.select("textarea[name=notes]").first();
    String notesStr = notes.text(); 
```

但是当我想在editText中显示结果时，它作为单行返回，如下所示：

```
 some notes go here
    and more including a blank line:

    and another new
    line
    etc
    etc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T12:04:06.103

尝试这个：

```
Element notes = doc.select("textarea[name=notes]").first();
String notesStr = notes.getWholeText(); 
```

getWholeText()：获取此文本节点的（未编码）文本，包括原始文本中存在的任何换行符和空格。

# objective-c - 在 Objective-C 中分离 main 和 class

> ID：15394027
> 
> 赞同：0
> 
> 时间：2013-03-13T18:55:10.530
> 
> 标签：objective-c

我开始学习Objective-C并写课，但我的问题是我的课主要不认识

这是我的主要内容：

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{
    @autoreleasepool
    {
        Fraction *fraction = [[Fraction alloc] init];
    }

    return 0;
} 
```

我的界面：

```
#import <Foundation/Foundation.h>

@interface Fraction : NSObject

-(void) print;
-(void) setNumerator: (int) n;
-(void) setDenominator: (int) n;
-(int) numerator;
-(int) denomerator;
-(double) convertToNum;

@end 
```

执行：

```
#import "Fraction.h"

@implementation Fraction
{
    int numerator;
    int denomerator;
}

-(void) print
{
    NSLog(@"%i/%i", numerator, denomerator);
}

-(void) setNumerator: (int) n
{
    numerator = n;
}

-(void) setDenominator: (int) n
{
    denomerator = n;
}

-(int) numerator
{
    return  numerator;
}

-(int) denomerator
{
    return denomerator;
}

-(double) convertToNum
{
    if (denomerator != 0)
    {
        return (double) numerator / denomerator;
    }
    else
    {
        return NAN;
    }
}

@end 
```

当我写`Fraction *fraction = [[Fraction alloc] init];`我的错误信息是**使用未声明的标识符分数**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:56:54.353

在 main.m 中，您需要添加

```
#import "Fraction.h" 
```

以便编译器知道分数。

# python - 如何从 Protobuf 中删除属性？

> ID：15394028
> 
> 赞同：0
> 
> 时间：2013-03-13T18:55:11.357
> 
> 标签：python, google-app-engine, protocol-buffers

我想从实例化的 entity_pb.EntityProto 中删除一个属性，以这种方式实例化：

```
pb = entity_pb.EntityProto()
prop1 = pb.add_property()
prop1.set_name('prop1')
prop2 = pb.add_property()
prop2.set_name('prop2') 
```

假设我不再需要 prop1。我怎样才能删除它？

这个问题与想要将 protobufs 注入 AppEngine 数据存储区有关，但`__scatter__`不能放入具有该属性的现有 protobufs。如果我尝试放置实体，它会返回此错误：`BadRequestError: cannot store entity with reserved property name '__scatter__'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:46:53.930

您可以操纵 的结果`pb.property_list()`，因此这将起作用：

```
 properties = pb.property_list()
 properties[:] = [e for e in properties if e.name() != '__scatter__'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:19:22.890

查看[protobuf 文档](https://developers.google.com/protocol-buffers/docs/overview)，没有任何关于操作单个 EntityProtos 的内容。entity_pb.py 中的代码也没有显示任何相关的方法，所以我采用了“让我们直接操作对象，即使你不应该这样做”的方法。

```
props = element.property_
for i in range(len(props)):
    if props[i].name() == '__scatter__':
        props.pop(i)
        break 
```

# c# - 查找以 -- 开头并以换行符结尾的字符串

> ID：15394030
> 
> 赞同：0
> 
> 时间：2013-03-13T18:55:24.057
> 
> 标签：c#, regex

我正在使用以下正则表达式在文档中定位以字符 dash dash 开头`--`并以换行符结尾的任何一系列字符`/n`。

```
return @"(^--).*?(?=\r|\n)"; 
```

几乎可以工作，但只有在下一个字符和下一个字符之间有空格时`--`。

```
return @"(?:--\s).*?(?=\r|\n) 
```

几乎可以工作，但只有在下一个字符和下一个字符之间没有空格时才有效`--`。

***无论空格是否跟随，我如何获得回报`--`？***

除了它的能力之外，我对正则表达式一无所知。我在网上找到了这两种示例模式。感谢你的协助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:57:48.383

您需要使用`\s?`来捕获 0 或 1 个空格。

正则表达式中问号的一种用途是表示将匹配前一个字符（或字符组）的 0 个或一个匹配项，但不超过一个。

此外，如果您想自己学习正则表达式，请访问[http://www.regular-expressions.info](http://www.regular-expressions.info)进行学习并[访问 http://www.regexpal.com](http://www.regexpal.com)进行练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T18:57:55.693

假设您正在搜索较大字符串中的子字符串并希望捕获其间的子字符串`--`，`\n`您可以使用如下表达式：

```
--(.*)\r?\n 
```

在 C# 中可以这样引用：

```
@"--(.*)\r?\n" 
```

如果您只想确保字符串以开头`--`和结尾，`\n`您可以使用：

```
(?s)^--.*\n\z 
```

# c# - 转换和使用 Convert.To() 方法之间的区别

> ID：15394032
> 
> 赞同：106
> 
> 时间：2013-03-13T18:55:28.327
> 
> 标签：c#, casting

我有一个`double`对`string`值进行强制转换的函数。

```
string variable = "5.00"; 

double varDouble = (double)variable; 
```

已签入代码更改，并且项目构建时出现错误：`System.InvalidCastException: Specified cast is not valid.`

但是，在执行以下操作后...

```
string variable = "5.00"; 

double varDouble = Convert.ToDouble(variable); 
```

...项目构建没有任何错误。

**铸造和使用方法有什么区别`Convert.To()`？**为什么铸造抛出一个`Exception`并使用`Convert.To()`不？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2013-03-13T20:29:08.327

即使您*可能*以某种方式将它们视为等效，它们的目的也完全不同。让我们首先尝试定义什么是演员表：

> 转换是将一种数据类型的实体更改为另一种数据类型的操作。

它有点通用，并且在某种程度上等同于*转换*，因为转换通常具有与转换相同的语法，所以问题应该是**语言何时允许转换（隐式或显式）以及何时必须使用 (更多）显式转换？**

让我先在它们之间*画*一条简单的线。形式上（即使与语言语法等效）强制转换将更改类型，而转换将/可能更改值（最终与类型*一起*）。演员表也是可逆的，而转换可能不可逆。

这个话题非常广泛，所以让我们尝试通过从游戏中排除自定义演员操作员来缩小范围。

# 隐式强制转换

**在 C# 中，当您不会丢失任何信息时，**强制转换是隐式的（请注意，此检查是**使用类型而不是它们的实际值**执行的）。

## 原始类型

例如：

```
int tinyInteger = 10;
long bigInteger = tinyInteger;

float tinyReal = 10.0f;
double bigReal = tinyReal; 
```

这些强制转换是隐式的，因为在转换期间您不会丢失任何信息（您只需使类型更宽）。反之亦然，不允许隐式转换，因为无论它们的实际值如何（因为它们只能在运行时检查），在转换过程中您可能会丢失一些信息。例如，这段代码不会编译，因为 a`double`可能包含（实际上它确实包含）一个不能用 a 表示的值`float`：

```
// won't compile!
double bigReal = Double.MaxValue;
float tinyReal = bigReal; 
```

## 对象

对于对象（指向的指针），当编译器可以确定源类型是派生类（或它实现）目标类的类型时，强制转换始终是隐式的，例如：

```
string text = "123";
IFormattable formattable = text;

NotSupportedException derivedException = new NotSupportedException();
Exception baseException = derivedException; 
```

在这种情况下，编译器知道实现*并且*是（派生自）所以强制转换是隐式的。不会丢失任何信息，因为对象不会更改它们的类型（这与s 和原始类型不同，因为通过强制转换可以创建**另一种类型的新对象**），改变的是您对它们的*看法*。`string``IFormattable``NotSupportedException``Exception``struct`

 ***# 显式强制转换

当转换不是由编译器隐式完成时，转换是显式的，然后您必须使用转换运算符。通常这意味着：

*   您可能会丢失信息或数据，因此您必须注意这一点。
*   转换可能会失败（因为您无法将一种类型转换为另一种），因此，您必须再次注意自己在做什么。

## 原始类型

在转换期间您可能会丢失一些数据时，原始类型需要显式转换，例如：

```
double precise = Math.Cos(Math.PI * 1.23456) / Math.Sin(1.23456);
float coarse = (float)precise;

float epsilon = (float)Double.Epsilon; 
```

在这两个示例中，即使值在`float`范围内，您也会丢失信息（在这种情况下为精度），因此转换必须是显式的。现在试试这个：

```
float max = (float)Double.MaxValue; 
```

此转换将失败，因此，它必须是显式的，以便您知道它并且您可以进行检查（在示例中，该值是恒定的，但它可能来自某些运行时计算或 I/O）。回到你的例子：

```
// won't compile!
string text = "123";
double value = (double)text; 
```

这不会编译，因为编译器无法将文本转换为数字。文本可以包含任何字符，而不仅仅是数字，这在 C# 中太多了，即使对于显式转换也是如此（但在另一种语言中可能允许）。

## 对象

如果类型不相关，则从指针（到对象）的转换可能会失败，例如此代码将无法编译（因为编译器知道不可能进行转换）：

```
// won't compile!    
string text = (string)AppDomain.Current;
Exception exception = (Exception)"abc"; 
```

此代码将编译，但它可能会在运行时失败（取决于转换对象的有效类型），并带有`InvalidCastException`：

```
object obj = GetNextObjectFromInput();
string text = (string)obj;

obj = GetNextObjectFromInput();
Exception exception = (Exception)obj; 
```

# 转换

所以，最后，如果强制转换是转换，那么为什么我们需要像这样的类`Convert`？忽略来自`Convert`implementation 和`IConvertible`implementations 的细微差异实际上是因为在 C# 中你对编译器说：

> *相信我，这种类型就是那种类型，即使你现在不知道，让我做，你会看到的。*

-或者-

> *别担心，我不在乎这种转换是否会丢失一些东西。*

对于其他任何事情，都需要*更*明确的操作（想想*简单强制转换*的含义，这就是 C++ 为它们引入冗长、冗长和明确的语法的原因）。这可能涉及复杂的操作（对于`string`->`double`转换，需要解析）。`string`例如，转换为 始终是可能的（通过`ToString()`方法），但它可能意味着与您期望的不同，因此它必须比强制转换更明确（**您写得越多，您就越想自己在做什么**）。

这种转换可以在对象内部完成（使用已知的 IL 指令），使用自定义转换运算符（在要转换的类中定义）或更复杂的机制（`TypeConverter`例如 s 或类方法）。您不知道会发生什么，但您知道它可能会失败（这就是为什么 IMO 在可以进行更*可控*的转换时应该使用它）。在您的情况下，转换只会解析`string`以产生`double`：

```
double value = Double.Parse(aStringVariable); 
```

当然这可能会失败，所以如果你这样做，你应该总是捕捉它可能抛出的异常（`FormatException`）。这不在主题范围内，但是当 a`TryParse`可用时，您应该使用它（因为从语义上讲，*它*可能不是数字，而且它甚至更快……失败）。

.NET 中的转换可以来自很多地方，`TypeConverter`使用用户定义的转换运算符、实现和解析方法的隐式/显式转换`IConvertible`（我忘记了什么吗？）。查看 MSDN 以了解有关它们的更多详细信息。

为了完成这个冗长的答案，只需简单介绍一下用户定义的转换运算符。让程序员使用强制转换将一种类型转换为另一种类型只是*糖。*这是一个类（将被强制转换的）中的一个方法，它说“嘿，如果他/她想将这种类型转换为那种类型，那么我可以做到”。例如：

```
float? maybe = 10; // Equals to Nullable<float> maybe = 10;
float sure1 = (float)maybe; // With cast
float sure2 = maybe.Value; // Without cast 
```

在这种情况下，它是明确的，因为它可能会失败，但这是允许实现的（即使有关于此的指南）。想象一下，您编写了一个这样的自定义字符串类：

```
EasyString text = "123"; // Implicit from string
double value = (string)text; // Explicit to double 
```

在您的实现中，您可能决定“让程序员的生活更轻松”并通过强制转换公开这种转换（请记住，这只是少写的捷径）。某些语言甚至可能允许这样做：

```
double value = "123"; 
```

允许隐式转换为任何类型（检查将在运行时完成）。例如，通过适当的选项，可以在 VB.NET 中完成。这只是一种不同的哲学。

# 我能用它们做什么？

所以最后一个问题是你什么时候应该使用一个或另一个。让我们看看何时可以使用显式强制转换：

*   基本类型之间的转换。
*   从`object`任何其他类型的转换（这也可能包括拆箱）。
*   从派生类到基类（或实现的接口）的转换。
*   通过自定义转换运算符从一种类型转换为另一种类型。

只有第一次转换可以完成，`Convert`所以对于其他人你别无选择，你需要使用显式转换。

现在让我们看看什么时候可以使用`Convert`：

*   从任何基本类型到另一种基本类型的转换（有一些限制，请参阅[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/system.convert%28v=vs.90%29.aspx)）。
*   从实现的任何类型`IConvertible`到任何其他（支持的）类型的转换。
*   从/到`byte`数组到/从字符串的转换。

# 结论

`Convert`每次您知道转换可能失败（因为格式、范围或可能不受支持）时，都应使用IMO ，即使可以使用强制转换完成相同的转换（除非有其他可用的东西）。**它明确了谁将阅读您的代码您的意图**是什么，并且它可能会失败（简化调试）。

对于您需要使用演员表的其他一切，别无选择，但如果有另一种更好的方法可用，那么我建议您使用它。在您的示例中，从`string`to的转换`double`通常会失败（尤其是如果文本来自用户），因此您应该尽可能明确地进行转换（此外，您可以对其进行更多控制），例如使用`TryParse`方法。

## 编辑：它们之间有什么区别？

根据更新的问题并保留我之前写的内容（关于*何时*可以使用强制转换与何时可以/必须使用`Convert`），最后要澄清的一点是它们之间是否存在差异（此外还`Convert`使用`IConvertible`和`IFormattable`接口，以便它可以执行操作不允许使用演员表）。

简短的回答是**肯定的，它们的行为不同**。我看到这个`Convert`类就像一个辅助方法类，所以它经常提供一些*好处*或稍微不同的行为。例如：

```
double real = 1.6;
int castedInteger = (int)real; // 1
int convertedInteger = Convert.ToInt32(real); // 2 
```

很不一样，对吧？强制转换会截断（这是我们都期望的），但`Convert`会四舍五入到最接近的整数（如果您不知道，这可能不会发生）。每种转换方法都会引入差异，因此不能应用一般规则，必须逐个查看它们...19 种基本类型可以转换为其他所有类型...列表可能很长，最好参考 MSDN 案例案子！

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-13T19:21:37.057

Casting is a way of telling the compiler, "I know that you think that this variable is a Bar, but I happen to know more than you; the object is actually a Foo, so let me treat it as if it were a Foo from now on." Then, at runtime, if the actual object turned out to really be a Foo then your code works, if it turns out that the object was not a Foo at all, then you get an exception. (Specifically an `System.InvalidCastException`.)

Converting on the other hand is a way of saying, "If you give me an object of type Bar I can create a brand new Foo object that represents what is in that Bar object. I won't change the original object, it won't treat the original object differently, it will *create something new that is just based on some other value*. As to how it will do that, it could be anything. In the case of `Convert.ToDouble` it will end up calling `Double.Parse` which has all sorts of complex logic for determining what types of strings represent what numeric values. You could write your own conversion method that mapped strings to doubles differently (perhaps to support some entirely different convention for displaying numbers, such as roman numerals or whatever). A conversion could do anything, but the idea is that you're not really asking the compiler to do anything for you; you are the one writing the code to determine how to create the new object because the compiler, without your help, has no way of knowing how to map (as an example) a `string` to a `double`.

So, when do you convert, and when do you cast? In both cases we have some variable of a type, let's say A, and we want to have a variable of type B. If our A object really, actually, under the hood, is a B, then we cast. If it's not really a B, then we need to Convert it, and define how the program is supposed to get a B from an A.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-03-05T07:16:47.453

来自[`MSDN`](https://msdn.microsoft.com/en-us/library/ms173105.aspx)：

> 显式转换（强制转换）：显式转换需要强制转换运算符。**当**转换中可能会丢失信息，或者由于其他原因转换可能不成功时，需要进行强制转换。典型示例包括将数值转换为精度较低或范围较小的类型，以及将基类实例转换为派生类。

考虑以下示例：

```
double a = 2548.3;
int b;
b = (int)a; //2548 --> information (.3) lost in the conversion 
```

并且：

> 强制转换是一种明确通知编译器您打算进行转换并且您知道可能会发生数据丢失的方式。

`System.Convert`当您想在**不兼容的**类型之间进行转换时，您可以使用类。*cast*和*convert*之间的**主要区别**是*compile*和*run-time*。类型转换异常出现在**运行时**，即在运行时失败的类型转换将导致抛出一个。 ******`InvalidCastException`******

* * *

*******结论：**在强制转换时，您告诉编译器`a`真正的类型`b`，如果是这样，则项目构建时不会出现任何错误，例如以下示例：

```
double s = 2;
int a = (int) s; 
```

但是在转换中你对编译器说有一种方法可以从`a`type创建一个新对象`b`，请这样做并且项目构建没有任何错误，但正如我所说*，如果类型转换在运行时失败，它将`InvalidCastException`导致被抛出*。

例如，下面的代码永远不会编译，因为编译器检测到无法将 type 的表达式`DateTime`转换为 type `int`：

```
DateTime s = DateTime.Now;
int a = (int)(s); 
```

但是这个编译成功：

```
DateTime s = DateTime.Now;
int a = Convert.ToInt32(s); 
```

但是在运行时你会得到`InvalidCastException`这样的信息：

> 从“DateTime”到“Int32”的无效转换。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-13T19:01:51.000

在您的示例中，您试图将字符串转换为双精度（非整数类型）。

它需要显式转换才能工作。

而且我必须指出，您可以使用`Convert.ToDouble`而不是，`Convert.ToInt64`因为当您转换为 int 时，您可能会丢失双精度值的小数部分。

如果您的变量的值为“5.25”，则 varDouble 将是 5.00（由于转换为 Int64 而损失 0.25）

**回答您关于投射与转换的问题。**

您的演员表（显式演员表）不符合显式演员表的要求。您尝试使用强制转换运算符强制转换的值无效（即非整数）。

访问此[MSDN 页面](http://msdn.microsoft.com/en-us/library/ms173105.aspx)以了解强制转换/转换的规则

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-13T19:14:55.290

Casting does not involve any conversion, i.e. the internal representation of a value is not changed. Example:

```
object o = "Hello"; // o is typed as object and contains a string.
string s = (string)o; // This works only if o really contains a string or null. 
```

You can convert a `double` to `string` like this

```
double d = 5;
string s = d.ToString(); // -> "5"

// Or by specifying a format
string formatted = d.ToString("N2"); // -> "5.00" 
```

You can convert a `string` to a `double` in several ways (here just two of them):

```
string s = "5";
double d = Double.Parse(s); // Throws an exception if s does not contain a valid number 
```

Or the safe way

```
string s = "5";
double d;
if (Double.TryParse(s, out d)) {
    Console.WriteLine("OK. Result = {0}", d);
} else {
    Console.WriteLine("oops!");
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-13T18:58:20.427

该`Convert.Double`方法实际上只是在内部调用该`Double.Parse(string)`方法。

`String`类型和类型都没有`Double`定义两种类型之间的显式/隐式转换，因此转换总是会失败。

该`Double.Parse`方法将查看 中的每个字符，`string`并根据 中字符的值构建一个数值`string`。如果任何字符无效，则该`Parse`方法失败（导致该`Convert.Double`方法也失败）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-03-05T03:36:15.280

`double varDouble = (double)variable` assumes that `variable` is already a double. If `variable` isn't a double (it's a string) then this will fail. `double varDouble = Convert.ToDouble(variable)` does like it says - it *converts.* If it can parse or otherwise extract a double from `variable` then it will.

I second using `Double.Parse` or `Double.TryParse` because it more clearly indicates what's supposed to be happening. You're starting with a string and expecting it to be convertible to a double. If there's any doubt, use `TryParse`.

If `variable` is a method argument, change the type to double. Make the caller responsible for providing the correct type. That way the compiler does the work for you.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-13T19:03:45.317

C# 不允许将字符串转换为这样的双精度值，这就是为什么会出现异常，您需要转换字符串（显示可接受的转换路径的[MSDN 文档）。](http://msdn.microsoft.com/en-us/library/yht2cx7b.aspx)这仅仅是因为字符串不一定包含数字数据，但各种数字类型将包含（除了空值）。A`Convert`将运行一个方法来检查字符串以查看它是否可以转换为数值。如果可以，那么它将返回该值。如果不能，它会抛出异常。

要转换它，您有多种选择。您在问题中使用了该`Convert`方法，`Parse`它与 非常相似`Convert`，但您还应该查看[TryParse](http://msdn.microsoft.com/en-us/library/3s27fasw.aspx)，它允许您执行以下操作：

```
string variable = "5.00"; 

double varDouble;

if (Double.TryParse(variable, out varDouble)) {
    //Code that runs if the conversion succeeded.
} else {
    //Code that runs if the conversion failed.
} 
```

如果您尝试使用非数字字符串，这可以避免可能出现的`Convert`异常`Parse`。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-03-13T19:02:18.903

```
string variable = "5.00";     
double varDouble = (double)variable; 
```

语言根本不允许上述转换。以下是数字类型的显式转换列表：http: [//msdn.microsoft.com/en-us/library/yht2cx7b.aspx](http://msdn.microsoft.com/en-us/library/yht2cx7b.aspx)如您所见，即使不是每种数字类型都可以转换为另一种数字类型

[有关在此处](http://msdn.microsoft.com/en-us/library/ms173105.aspx)投射的更多信息

> 这与 Convert.ToDouble() 有何不同？

转换类型时，数据结构不会改变。好吧，在数值转换的情况下，您可能会丢失一些位或获得一些额外的 0 位。**但是您仍在处理一个数字。**您只是在更改该数字占用的内存量。这对编译器来说足够安全，可以做所有需要的事情。

但是当你试图将字符串转换为数字时，你不能这样做，因为改变变量占用的内存量是不够的。例如，**5.00**作为字符串是“数字”序列：53(5) 46(.) 48(0) 48(0) - 用于 ASCII，但字符串将包含类似的内容。如果编译器只从字符串中获取前 N 个（4 个双精度？不确定）字节 - 该片段将包含完全不同的双精度数。同时 Convert.ToDouble() 运行特殊算法，它将获取字符串的每个符号，找出它代表的数字并为您制作一个双精度数，如果字符串代表一个数字。粗略地说，像 PHP 这样的语言会在后台为您调用 Convert.ToDouble。但是 C# 和静态类型语言一样，不会为您做到这一点。这使您可以确保任何操作都是类型安全的，并且您不会得到意外的结果，例如：

```
double d = (double)"zzzz" 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-01-05T21:03:26.107

最重要的区别是，如果使用**类型转换**并且转换失败（比如我们将一个非常大的 float 值转换为 int ），则不会抛出异常，并且会显示 int 可以容纳的最小值。但是在使用**Convert**的情况下，这种情况会引发异常。********

# ios - 如何设置 NSViewShowAlignmentRects？

> ID：15394033
> 
> 赞同：8
> 
> 时间：2013-03-13T18:55:28.950
> 
> 标签：ios, xcode, autolayout

关于自动布局的[文档](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/dividingResponsibility.html)是指设置显示应用程序中对象`NSViewShowAlignmentRects`周围的对齐矩形。`UIView`我已经尝试为 Xcode 设置它，但它显示的是 Xcode 本身的矩形，而不是在模拟器中运行的应用程序。

```
defaults write com.apple.dt.Xcode NSViewShowAlignmentRects -bool YES 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-12-10T12:55:02.843

使用 Xcode 中的方案编辑器执行此操作：

*   在 Xcode 菜单 Product -> Scheme -> Edit Scheme（或⌘-<）
*   在调试中，参数选项卡，启动时传递的参数，单击加号按钮并输入：

    `-UIViewShowAlignmentRects YES`（对于 iOS 项目）
    或
    `-NSViewShowAlignmentRects YES`（对于 Mac OS 项目）

*   一开始你需要破折号
*   点击确定

跑步时应该有一堆黄色轮廓

![在此处输入图像描述](../Images/684935f030ebf2f2ef04de030465d8b2.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T02:36:10.967

添加此代码：

```
[[NSUserDefaults standardUserDefaults] setBool:YES
                                        forKey:@"UIViewShowAlignmentRects"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

然后重启应用程序使其生效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-08T07:14:23.117

您从应用程序的方案中设置了一个简单的启动参数。这是 iOS 的 UIViewShowAlignmentRects 和 OS X 的 NSViewShowAlignmentRects。将参数值设置为 YES 并确保以破折号作为前缀。

[http://cl.ly/image/3j3T421d0K45](http://cl.ly/image/3j3T421d0K45)

# jquery - 使用 Supersized 和 Zurb Foundation 时如何保留背景幻灯片图像的纵横比

> ID：15394034
> 
> 赞同：0
> 
> 时间：2013-03-13T18:55:29.157
> 
> 标签：jquery, responsive-design, fullscreen, zurb-foundation, supersized

我正在使用两个流行的工具，Zurb Foundation 和 Supersized jquery 网站插件。我以前一起使用过一次。但是，当我将它们一起使用时，Zurb Foundation CSS 会压缩图像纵横比，这会扭曲 Supersized jquery 插件中的图像。当浏览器窗口变窄时，它会执行此操作。

这在我以前的网站上没问题。它不会在我当前的站点中执行。

因此，当窗口或设备很窄时，图像会被挤压。

如果我删除了 Zurb CSS，那么 Supersized 会保持纵横比不变，所以我知道原因与 Zurb Foundation 所做的图像调整大小有关。那么我如何在 Supersized 中仅使用 Zurb CSS 来处理背景图像。

站点演示可以在这里看到：http: [//mwildmandesign.com/IBG/index.html](http://mwildmandesign.com/IBG/index.html)

这是一个稍微调整大小并保持纵横比不变的网站，我需要它在我的网站上查看：[http ://risd.edu](http://risd.edu)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-27T17:02:50.467

原因是 Foundation 为所有图像设置了 max-width 属性。为了解决这个问题，您只需将其添加到样式表中即可删除图像的 max-width 属性

```
#supersized img{
  max-width: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:51:41.720

调整大小时，我在所有浏览器（IE8+、FF、Safari、Chrome）上显示的宽高比都相同，您使用什么浏览器查看？

## CSS 替代品

一个简单的解决全背景大小图像的方法，同时保留你的纵横比，实际上可以通过 CSS3 实现（对于旧浏览器有一个优雅的降级）。它会在保持图像可见的同时缩小图像的大小。

```
body {
  background: url(img.jpg) no-repeat center center fixed;
  -webkit-background-size: cover;
     -moz-background-size: cover;
       -o-background-size: cover;
          background-size: cover;
} 
```

工作于：

1.  野生动物园 3+
2.  铬合金
3.  Opera 10+（Opera 9.5 支持 background-size 但不支持关键字）
4.  Firefox 3.6+（Firefox 4 支持非厂商前缀版本）

[这是来自 css-tricks 的演示](http://css-tricks.com/examples/FullPageBackgroundImage/progressive.php)

# ember.js - 向 ArrayController 添加新对象

> ID：15394036
> 
> 赞同：0
> 
> 时间：2013-03-13T18:55:37.593
> 
> 标签：ember.js

我正在尝试创建一个基本的 CRUD 设置来管理 Ember 中的“用户”对象。我想我有我的模型和路线。我正在努力管理：

A）（所有）用户页面的正确控制器设置。我认为我应该创建一个 ArrayController，但它似乎自动工作正常。我的 Ember 应用程序是否知道制作一组单独的“用户”对象？如果是这样，如何？

B) 从 InputFields 传递数据。如果您在我的[示例](http://jsbin.com/ozilam/7/edit)中单击“添加用户” ，我已经制作了一个表单来创建用户。当您单击“创建”时，我不确定如何获取 textField 值，也不知道一旦获得这些值该如何处理。我将如何更新我的控制器？

同样，这里是我的代码的[jsbin](http://jsbin.com/ozilam/7/edit)。任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:26:32.307

**关于A）：** 我假设您指的是您的应用程序的以下路线。此模型函数返回一个数组。因此 Ember 知道它应该使用 ArrayController 来呈现您的 UsersRoute。

```
App.UsersIndexRoute = Ember.Route.extend({
  model: function() {
    return App.User.find();
  }
}); 
```

**关于B）：**我已经更新了你的代码-> [http://jsbin.com/ozilam/15/edit](http://jsbin.com/ozilam/15/edit)

**我需要更新您的一些名称（控制器和视图）以匹配[Ember 的命名约定](http://emberjs.com/guides/concepts/naming-conventions/)。**

使用 Ember，您不必使用表单并手动读取这些值。相反，当您输入您的路线时，您会创建一个新记录：

```
App.UsersNewRoute = Ember.Route.extend({
  setupController : function(controller){
    controller.set("content", App.User.createRecord({}));
  }
}); 
```

在您的视图中，您将**绑定记录的属性**。**如您所见，我还使用操作助手**更新了您的按钮。

```
<script type="text/x-handlebars" data-template-name="users/new">
        <div class="row">
            <div class="six columns">
                <h3>New User Information</h3>

                    <form>
                        <label>First Name</label>
                        {{view Ember.TextField valueBinding='name_first'}}<br />
                        <label>Last Name</label>
                        {{view Ember.TextField valueBinding='name_last'}}<br />
                        <label>Email Address</label>
                        {{view Ember.TextField valueBinding='email_address'}}<br />
                        <label>SSN</label>
                        {{view Ember.TextField valueBinding='ssn'}}<br />

                        <button {{action create target="view"}} class="button">Create</button>
                        {{#linkTo users}}Cancel{{/linkTo}}
                    </form>

            </div>
        </div>
    </script> 
```

随着表单中的这些更改自动传播到您的控制器，**您只需访问控制器中的对象：**

```
App.UsersNewView = Ember.View.extend({
  didInsertElement: function() {
    this.$('input:first').focus();
  },
  create: function(){
    console.log('view submitted');
    var newUser = this.get("controller.content");
    console.log(newUser.get("name_first"));
    console.log(newUser.get("name_last"));

    // HOW DO I PROCESS THIS FORM

  }
}); 
```

**注意：**当我写这篇文章时，我意识到如果你在控制器而不是视图中处理这个事件可能会更好，因为它是一个数据修改任务。

# cuda - 使用 -G 标志删除运行时错误

> ID：15394045
> 
> 赞同：0
> 
> 时间：2013-03-13T18:55:56.783
> 
> 标签：cuda

[这是cudaMemcpyToSymbol vs cudaMemcpy](https://stackoverflow.com/questions/15391394/cudamemcpytosymbol-vs-cudamemcpy)的后续 Q

我的印象是 -G 标志是用于构建 cudaGDB 的。我也看到了明显的错误。（下面代码中的错误是故意的。Q是关于为什么返回错误没有显示它。）

```
__constant__ float flt[480];   // 1920 bytes
__constant__ int  ints[160];   // 640 bytes

Main() {
 float* pFlts;
 cudaMalloc((void**)&pFlts, 1920+640);

 cudaError_t eerr=cudaMemcpyToSymbol(ints,pFlts,sizeof(ints),sizeof(ints),cudaMemcpyDeviceToDevice);
 printf("ErrVal= %d\n",(int)eerr);
} 
```

当我构建 w/: **nvcc junk.cu -o junk并使用:** **./junk**运行它时，我的结果是： ErrVal= **11**，这是“无效参数”。

当我构建 w/: **nvcc junk.cu -G -o junk并使用:** **./junk**运行它时，我的结果是： ErrVal= **0**，即 cudaSuccess。

我没有很多使用 -G 标志的经验，但这似乎是一种奇怪的行为。为什么 -G 擦除返回错误？

# javascript - 在 javascript 中调用 cfquery 但它什么也没做

> ID：15394049
> 
> 赞同：1
> 
> 时间：2013-03-13T18:56:11.197
> 
> 标签：javascript, coldfusion, cfquery

我正在尝试使用 Coldfusion (cfquery) 创建一个查询来检索几个美元金额，添加它们，然后查看它是否与应用程序中计算的美元金额相匹配。但是，它什么也没做。

我正在尝试在 javascript 中完成所有这些工作。

这是代码。

```
function ValidateFunding(){
   var casenum = document.getElementById('CaseNum').value;
   var cycle = document.getElementById('Cycle').value;
   var year = document.getElementById('FSYear').value;
   var cnty = document.getElementById('selCounty'); 
   var cntyID = cnty.options[cnty.selectedIndex].value;

   <cfquery name="PSP" datasource="QueryTest">
    SELECT g.Fee220 + g.Fee330 + g.Fee456 + g.Fee225 AS GrandTotal
      FROM ProgFees g INNER JOIN County ON g.CountyID = cntyID
     WHERE g.Year = year
       AND g.Cycle = cycle
       AND g.CaseNum = casenum       
   </cfquery>
   if (document.getElementById('totbud').value = PSP.GrandTotal){
    alert('The fee matches.');
    return false;
   }
   else 
  {
    alert('Fees do not match.');
  }
         return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:26:44.133

这是我为测试准备的页面。代码中有注释可以帮助解释发生了什么。两个关键行是`<cfajaxproxy>`标签，`jd.getData();`是我对 CF 的 AJAX 调用。

```
<cfscript>
variables.folders = {"client":["Favorites","Not Used"],"org":["2012","2011"],"public":["New","Old"]};
</cfscript>    
<cfajaxproxy cfc="cfc.jsondata" jsclassname="emaildata" /> 
<!DOCTYPE html>
<html>
    <head>
    <title>DevJSON</title>
    <script src="js/jquery.1.7.2.js" type="text/javascript" language="JavaScript"></script>
    <script src="js/handlebars.js" type="text/javascript" language="JavaScript"></script>
    <link rel="stylesheet" href="css/json.css" type="text/css"/>
    <script type="text/javascript">
        <!--- toScript will output CF vars as js vars --->
    <cfoutput> 
        var #toScript(variables.folders, 'folders')#;
        var #toScript(cgi.http_host & '/data/emaildata.json','jsonPath')#;
    </cfoutput> 
        var jd = new emaildata();
        // setup my js object from cfajaxproxy above

        var buildGrid = function(dataObj){
            var menus;
            var source = $('#grid').html();
            var template = Handlebars.compile(source);
            $("#mainContent").hide(); 
            $("#mainContent").children().remove();
            $("#mainContent").append(template(dataObj));
            $("#mainContent").fadeIn('slow');
        }

        // Error handler for the asynchronous functions. 
        var badJson = function(statusCode, statusMsg){ 
            alert('Status: ' + statusCode + '<br /><br /> ' + statusMsg); 
        }

        // output data 
        var buildmenu = function(){
            $.each(folders, function(fkey,fval) {
                if(this.indexOf() < 1){
                    $('li[data-type="' + fkey + '"] > div').append('<ul class="' + fkey + '"></ul>');
                }
                $.each(fval, function(dkey, dval){
                    $('[class="' + fkey + '"]').append('<li id="' + fkey + '">' + dval + '</li>');
                });
            });
        }            

        $(document).ready(function(){
            buildmenu();
            $('.directory > ul > li').click( function() {
                //set callback, errorhandler and then call the getData function in my CFC
                jd.setCallbackHandler(buildGrid);
                jd.setErrorHandler(badJson);
                jd.getData(this.id);
                $(".directory > ul > li").removeClass("highlight");
                $(this).addClass('highlight');                    
        });
            $("#mainContent").css('display','none');    
            $('li[data-type]').css('cursor','pointer');

        });

    </script>
    <!--- Setup handlebars template --->
    <script id="grid" type="text/x-handlebars-template">
        <div class="gridDetail">
            {{#each DATA}}
                <div class="row">
                    {{#each this}}
                    <span class="cell">
                      {{.}}&nbsp;
                    </span>
                    {{/each}}
                </div>
            {{/each}}
        </div>
    </script>            
</head> 
```

# css - 垂直居中 元素

> ID：15394051
> 
> 赞同：0
> 
> 时间：2013-03-13T18:56:12.647
> 
> 标签：css, html, alignment, html-lists, sidebar

我一直在尝试将侧边栏垂直居中，但是我将其水平居中。我知道 display:table; 但这不是我想做的，因为我将把主要内容区域放在边栏旁边。这是代码和样式：

```
<div class="sidebar">
    <ul>
        <li>Homepage</li>
        <li>blah</li>
        <li>blah</li>
        <li>blah</li>
        <li>blah</li>
        <li>blah</li>
        <li>blah</li>
        <li>blah</li>
    </ul>   
</div> 
```

CSS：

```
div.sidebar{
    background-color:       #DEFFFF;
    width:                  156px;
    height:                 385px;
}

div.sidebar a{
    color:                  black;
    display:                block;
}

div.sidebar ul li{
    margin-left:            -33px;
    list-style-type:        none;
    width:                  140px;
    height:                 25px;
    border-right:           1px solid black;
    border-top:             1px solid black;
    border-left:            1px solid black;
    background-color:       #BCA264;
    font-family:            bold;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:13:07.210

CSS3 解决方案：http: [//jsfiddle.net/RazvanGirmacea/HDyuX/](http://jsfiddle.net/RazvanGirmacea/HDyuX/)

```
display: -webkit-box;
-webkit-box-orient: vertical;
-webkit-box-pack: center;

display: -moz-box;
-moz-box-orient: vertical;
-moz-box-pack: center;

display: box;
box-orient: vertical;
box-pack: center; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:13:33.717

```
<div class="parentPanel">
  <div class="content">
    <img src="http://placehold.it/400x500">
  </div>
  <div class="sidebar">
    <ul>
      <li>Homepage</li>
      <li>blah</li>
      <li>blah</li>
      <li>blah</li>
      <li>blah</li>
      <li>blah</li>
      <li>blah</li>
      <li>blah</li>
    </ul>
  </div>
</div> 
```

并使用以下 CSS

```
.parentPanel {
    border: 1px solid blue;
}
.content {
    border: 1px solid blue;
    display: inline-block;
    vertical-align: middle;
}
.content img {
    display: block;
}
.sidebar {
    border: 1px solid blue;
    display: inline-block;
    vertical-align: middle;
} 
```

您可以根据需要重新调整内容区域的大小，并相应地设置侧栏和链接的样式。

供参考：http: [//jsfiddle.net/audetwebdesign/KUFRK/](http://jsfiddle.net/audetwebdesign/KUFRK/)

**注意**
我假设内容区域比导航栏列表高。

# c# - 如何检查字符串列表是否与短语中的所有单词匹配？

> ID：15394057
> 
> 赞同：1
> 
> 时间：2013-03-13T18:56:36.557
> 
> 标签：c#, string, search-engine

我有一个字符串列表

```
string[] arr = new string[] { "hello world", "how are you", "what is going on" }; 
```

我需要检查我给出的字符串是否使用了其中一个字符串中的每个单词`arr`

所以假设我有

```
string s = "hello are going on"; 
```

这将是一个匹配，因为所有单词`s`都在一个字符串中`arr`

```
string s = "hello world man" 
```

这个不匹配，因为“man”不在任何字符串中`arr`

我知道如何编写一个“更长”的方法来做到这一点，但是我可以编写一个不错的 linq 查询吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:03:25.557

```
string[] arr = new string[] { "hello world", "how are you", "what is going on" };
string s = "hello are going on";
string s2 = "hello world man";
bool bs = s.Split(' ').All(word => arr.Any(sentence => sentence.Contains(word)));
bool bs2 = s2.Split(' ').All(word => arr.Any(sentence => sentence.Contains(word))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T19:02:25.573

```
 string[] arr = new string[] { "hello world", "how are you", "what is going on" };

        HashSet<string> incuded = new HashSet<string>(arr.SelectMany(ss => ss.Split(' ')));

        string s = "hello are going on";
        string s2 = "hello world man";

        bool valid1 = s.Split(' ').All(ss => incuded.Contains(ss));
        bool valid2 = s2.Split(' ').All(ss => incuded.Contains(ss)); 
```

享受！（我将哈希集用于性能，您可以在所有情况下用 arr.SelectMany(ss => ss.Split(' ')).Unique() 替换“包含”（愚蠢的错字）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:13:05.343

我尽量把它单线化：）

```
var arr = new [] { "hello world", "how are you", "what is going on" };

var check = new Func<string, string[], bool>((ss, ar) => 
    ss.Split(' ').All(y => ar.SelectMany(x => 
        x.Split(' ')).Contains(y)));

var isValid1 = check("hello are going on", arr);
var isValid2 = check("hello world man", arr); 
```

# netty - 如何在第二次启动时处理引导启动错误

> ID：15394059
> 
> 赞同：0
> 
> 时间：2013-03-13T18:56:42.540
> 
> 标签：netty, bootstrapping

有人可以帮助我了解两次启动同一个引导服务器时的网络行为。我无法捕捉到任何异常。查看我的代码：

```
bootstrap = new ServerBootstrap();

bootstrap.group(nioEventLoopGroup);
bootstrap.channel(NioServerSocketChannel.class);

bootstrap.option(ChannelOption.TCP_NODELAY, Boolean.valueOf(true));
bootstrap.option(ChannelOption.SO_KEEPALIVE, Boolean.valueOf(true));
bootstrap.option(ChannelOption.SO_REUSEADDR, Boolean.valueOf(true));

bootstrap.childHandler(new ServerSocketBasedInitializer(messageFacade));

allChannels.add(bootstrap.bind(new InetSocketAddress(80)).channel()); 
```

我使用 netty4.0.0.Beta2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:49:11.053

我可能会误解您，但我认为您要做的是检查 bind() 操作返回的 ChannelFuture 以查看它是否成功。

bind() 是一个异步操作，因此可能无法直接完成。如果您想阻止直到它完成广告获取并自动抛出异常，请使用 bind().sync() 。

# css - Firefox滚动条隐藏

> ID：15394065
> 
> 赞同：6
> 
> 时间：2013-03-13T18:57:01.630
> 
> 标签：css, styles

溢出时如何隐藏Firefox滚动条：自动？

> ::-webkit-scrollbar { 显示：无；}

我使用此代码，但这仅适用于 Google Chrome。

有什么帮助吗？谢谢！

**更新**

当我使用

> 溢出：隐藏；

我的页面无法进入页脚。

```
<html>
<head>
<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>

<div id="pageWrapper">
    <header></header><!--end of header-->

    <nav>
        <ul>
            <li><a href="#">Home</a></li>|
            <li><a href="#">Services</a></li>|
            <li><a href="#">Gallery</a></li>|
            <li><a href="#">FAQ</a></li>|
            <li><a href="#">About Us</a></li>|
        </ul>
    </nav><!--end of nav-->

    <aside>

    </aside><!--end of aside-->

    <section>
    </section><!--end of section-->
    <footer>All Right Reserved 2013.</footer><!--end of footer-->
</div><!--end of pageWrapper-->

</body>
</html> 
```

我的 CSS

```
/*----- Reset ----*/
html, body, div, span, object, h1, h2, h3, h4, h5, h6, p,
blockquote, pre, a, address, code, img, small, strong,
dl, dt, dd, ol, ul, li, fieldset, form, label{
margin:0;
padding:0;
border:0;
outline:0;
font-size:100%;
vertical-align:baseline;
background:transparent;
}
body{
line-height:1.5;
font-family: helvetica, arial, sans-serif;
}

body,html{
    height:100%;
    background-color:whitemsoke;
}

ol, ul{
list-style:none;
}

/* ---- END OF RESET --- */
#pageWrapper{
    width:965px;
    height:100%;
    margin:auto;
    box-shadow:1px 1px 17px black;
    overflow:hidden;
}
::-webkit-scrollbar { 
    display:none; 
}
header{
    background-color: #D4E7ED;
    height:200px;
}
nav{
    text-align:center;
    background-color:#003366;
    padding:10px;
}
nav ul li{
    display:inline;
    padding:20px;
}
nav ul li a{
    text-decoration:none;
    color:whitesmoke;
}
nav ul li a:hover{
    text-decoration:underline;
}
aside{
    width:200px;
    background-color:#666666;
    height:100%;
    overflow:hidden;
    float:left;
    margin:0 auto -20px 0;
}
section{
    background-color:#CCCCCC;
    height:100%;
    margin:0 auto -20px 0;
    overflow:hidden;
}
footer{
    background-color:#003366;
    height:20px;
    position:relative;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-28T01:02:30.877

我没有找到任何特定于 Firefox 的内容。我也一直在寻找与`::-webkit-scrollbar { display:none }`.

然而，我确实发现了一个通用的跨浏览器解决方案：

```
<div class="outer">
    <div class="inner">
        Some content...
    </div>
</div>

<style>
.outer {
    overflow: hidden;
}
.inner {
    margin-right: -16px;
    overflow-y: scroll;
    overflow-x: hidden;
}
</style> 
```

滚动条被父 div 隐藏。

这需要您`overflow:hidden`在父 div 中使用，但在其他方面就像一个魅力。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-01-08T19:27:29.250

在**Firefox 64**中，如果你想隐藏滚动，你`overflow:auto`现在可以做到`scrollbar-width: none;`！呜呜呜！[以下是相关文档](https://developer.mozilla.org/en-US/docs/Web/CSS/scrollbar-width)（*浏览器支持显示在页面底部*）。

下面是一个**仅使用 css 的解决方案**，它将在 firefox 中隐藏您的垂直和水平滚动条（*在 v64 和 firefox dev edition v65.0b8 中测试*）。**提示**：*尝试在蓝色 div 上进行垂直和水平滚动*。

```
div {
  overflow: auto;
  height: 200px;
  width: 80%;
  background: linear-gradient(to bottom, cyan, blue);
  white-space: no-wrap;

  /* the line that rules them all */
  scrollbar-width: none;
  /* */
}

span {
  width: 200%;
  height: 50%;
  background: linear-gradient(to left, green, yellow);
  display: inline-block;
  margin: 5rem;
}
```

```
<div><span></span></div>
```

# python - 如何在库中使用冲突命名空间

> ID：15394071
> 
> 赞同：2
> 
> 时间：2013-03-13T18:57:15.070
> 
> 标签：python, packages, python-import

我的包的结构与此类似：

```
top/
├── __init__.py
└── io
    └── __init__.py 
```

现在我在导入标准库时遇到了这个问题`urllib3.filepost`：

```
gonvaled@pegasus ~/top » python
Python 2.7.2 (default, Jan 11 2013, 17:58:01) 
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import urllib3.filepost
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/home/gonvaled/.virtualenvs/python2.7.2-wavilon1/lib/python2.7/site-packages/urllib3/__init__.py", line 16, in <module>
    from .connectionpool import (
  File "/home/gonvaled/.virtualenvs/python2.7.2-wavilon1/lib/python2.7/site-packages/urllib3/connectionpool.py", line 42, in <module>
    from .request import RequestMethods
  File "/home/gonvaled/.virtualenvs/python2.7.2-wavilon1/lib/python2.7/site-packages/urllib3/request.py", line 12, in <module>
    from .filepost import encode_multipart_formdata
  File "/home/gonvaled/.virtualenvs/python2.7.2-wavilon1/lib/python2.7/site-packages/urllib3/filepost.py", line 11, in <module>
    from io import BytesIO
ImportError: cannot import name BytesIO 
```

为什么标准库要查找`top.io`？我怎样才能避免这种情况？我真的很想用`top.io`我的包名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:03:18.420

Python*没有*在`top.io`.

相反，Python 在*当前目录*中查找。当前目录是位置`sys.path`列表中要查找导入的第一个位置。该文件`io.py`位于您的本地目录中。

*永远不要在*你的包中运行你的python解释器（所以确保当前工作目录不在`top`），否则永远不要命名一个与标准库同名的本地模块。

# ios - UIDocumentStateSavingError 存在后如何打开 UIDocument？

> ID：15394076
> 
> 赞同：3
> 
> 时间：2013-03-13T18:57:27.230
> 
> 标签：ios, objective-c, icloud, uidocument, nsmetadataquery

在我基于 iCloud 的应用程序中，我注意到如果在 UIDocument 打开（并且尚未关闭）时发生崩溃，文档的状态有时会变为`UIDocumentStateSavingError`并且它永远不会再次成功打开。

当我`[UIDocument openWithCompletionHandler:]`在此之后运行时，文档永远不会打开，返回`NO`for`success`和 5 （`UIDocumentStateClosed`和`UIDocumentStateSavingError`） for `documentState`。

在 iOS 5 上，我还观察到它`NSMetadataQueryDidUpdateNotification`会不断被调用（每秒），直到文件被删除并重新启动应用程序。这会导致应用程序中出现额外的可用性问题。

还有一件事，在 developer.icloud.com 上，我注意到该文件显示了第二个存在冲突的版本。但是，即使重新启动或重新安装应用程序，在我的任何设备上都没有发现此冲突。

**我该怎么做才能让 UIDocument 正常打开？**

这是我到目前为止所尝试的：

*   使用 .检查`[NSFileVersion unresolvedConflictVersionsOfItemAtURL:]`冲突并删除所有旧版本`[NSFileVersion removeOtherVersionsOfItemAtURL:]`。

*   在调用`[[NSFileManager defaultManager] evictUbiquitousItemAtURL:]`之前调用`[UIDocument openWithCompletionHandler:]`以将文件重新下载到设备。

*   从 developer.icloud.com 下载主要版本和冲突版本，查看其中是否有损坏或部分文件。两个都开得很好。

*   我的头撞在我的桌子上。初步结果不成功。

# java - 用 javascript 中设置的变量填充表单字段

> ID：15394099
> 
> 赞同：0
> 
> 时间：2013-03-13T18:58:44.630
> 
> 标签：java, javascript, playframework-2.0

我的游戏框架项目中有一个表格。用户输入一系列值。我还需要在我的模型中存储另一个值，但我不希望它被显示，它必须被隐藏。另一个复杂之处是我希望这个隐藏值存储在表单提交后确定的变量的值（因为它使用用户输入的值之一来获取变量）。有没有办法做到这一点，还是我必须创建一个单独的模型来处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:06:50.697

> 我不希望它被显示，它必须被隐藏。

选项 1：如果您使用 jQuery，则使用 $.data() 将值绑定到元素，这是最干净的方法

选项 2：将此值作为文本放入`<input type='hidden' disabled='disabled'>`. 不建议

> 另一个复杂之处是我希望这个隐藏值存储在表单提交后确定的变量的值

更新 ajax 请求成功处理程序的值

```
$.ajax({
    url: '#wherever',
    data: $('#yourform').serialize();
    success: function(e) { // update the original value from response here },
    error: function(e) { // something bad occured, handle it!! }
}); 
```

# backbone.js - 骨干模型中是否有可能有两个索引，因为服务器给了我不同 id 的消息

> ID：15394105
> 
> 赞同：0
> 
> 时间：2013-03-13T18:59:10.483
> 
> 标签：backbone.js

在我的汽车站应用场景中，每个汽车站都有两种方式来识别它，它的唯一名称，就像普通的名字和唯一的公众号一样。当客户端与服务器端消息交互时，它将收到两条不同的消息，第一个消息使用总线名称来标识车站，而第二条消息使用唯一的 id 号来标识公交车站。

所以在为公交车站设计模型的时候，一个模型中是否可以有两个索引，所以无论我收到Num 1还是num 2消息，模型都可以立即帮助我找到模型，而不是循环查找站.

向所有人致以最好的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:32:57.980

没有内置的方法可以实现这一点，但是为集合构建二级索引非常简单。假设模型的名称永远不会改变（它不应该改变，因为它是唯一的标识符）：

```
var StationCollection = Backbone.Collection.extend({
  initialize: function() {
    this.on('add',    this._onAdd,    this);
    this.on('remove', this._onRemove, this);
    this.on('reset',  this._onReset,  this);
    this._onReset();
  },

  getByName: function(name) {
    return this._byName[name];
  },

  _onAdd: function(model) {
    this._byName[model.get('name')] = model;
  },

  _onRemove: function(model) {
    delete this._byName[model.get('name')];
  },

  _onReset: function(model) {
    this._byName = {};
    this.each(this._onAdd);
  }
}); 
```

用法：

```
var station = stations.getByName('name_of_station'); 
```

/未经测试的代码示例

# codeblocks - Code::Blocks 未定义的引用

> ID：15394107
> 
> 赞同：1
> 
> 时间：2013-03-13T18:59:27.797
> 
> 标签：codeblocks

我正在编写 OpenGLBook 的第一章，一切正常，直到我添加“添加 GLEW”的代码。

我收到以下错误：

> obj\Debug\main.o||在函数`Initialize':|
> 
> C:\Projects\test\main.c|35|对` *imp* _glewInit@0'的未定义引用|
> 
> C:\Projects\test\main.c|38|对` *imp* _glewGetErrorString@4'的未定义引用|
> 
> ||=== 构建完成：2 个错误，0 个警告（0 分钟，0 秒）===|

我在链接器中设置了这些库：

> libfreeglut.a
> 
> glew32.lib
> 
> OpenGL32.Lib
> 
> freeglut.lib
> 
> Glu32.Lib
> 
> libfreeglut_static.a

它们是按这个顺序排列的。

我该如何解决这个问题，以便我可以继续学习？

# java - 试图在矩阵中找到鞍点时出错

> ID：15394109
> 
> 赞同：3
> 
> 时间：2013-03-13T18:59:30.030
> 
> 标签：java

我编写了一些代码来查找矩阵的鞍点（矩阵中的一个元素，它是其相应行的最大元素，同时是其列的最小值）的位置。但是，有一个错误说：

```
The local variable col may not have been initialized
at SaddlePoint.findSaddle(SaddlePoint.java:41)
at SaddlePoint.main(SaddlePoint.java:52) 
```

我不明白为什么会这样说。任何帮助将不胜感激。下面我给出了我的代码：

```
public class SaddlePoint {

    int arr[][]=new int[4][5];

    public SaddlePoint(int x[][])
    {
        for(int i=0;i<arr.length;i++)
            for(int j=0;j<arr[i].length;j++)
                arr[i][j]=x[i][j];
    }

    public void display(int x[][])
    {
        System.out.println();
        for(int i=0;i<arr.length;i++)
        {for(int j=0;j<arr[i].length;j++)
            System.out.print(arr[i][j]+"\t");
            System.out.println();
        }
    }
    public void findSaddle()
    {
        int row,col,flag;
        for(int i=0;i<arr.length;i++)
        {int max=arr[i][0];col=0;flag=0;
            for(int j=1;j<arr[i].length;j++)
                if(max<arr[i][j])
                {max=arr[i][j];
                    col=j;
                }
            for(int k=0;k<arr.length;k++)
                if(arr[k][col]<max)
                {  flag=1;
                    break;
                }
            if(flag==0)
            {row=i;
                break;
            }
        }
        if(flag==0)
            System.out.println("The Position of the Saddle Point is at Row "+(row+1)+"& Column "+(col+1));
        else
            System.out.println("Not found.");
    }

    public static void main(String args[])
    {
        int array[][]   ={{12,8,37,15,16},{2,12,21,14,13},{15,47,23,20,19},{65,57,43,21,47}};
        SaddlePoint sadl=new SaddlePoint(array);
        sadl.display(array);
        sadl.findSaddle();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:01:46.713

`for`编译器不知道循环是否会有任何迭代

```
for(int i=0;i<arr.length;i++) 
```

如果数组的长度为零，则不会存在。所以有一种可能的情况是`col=0;`永远不会发生并且变量永远不会被初始化。

在循环`col`之前初始化。`for`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:01:51.253

您正在初始化`col`,`row`并`flag`在您的 for 块中。

您对 for 块的终止语句是：

`i<arr.length`

如果不迭代一次，它可能是假的，然后`col`将不会被初始化。

只需在声明它们时初始化它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:06:02.590

根据[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html)：

> 当发生对其值的任何访问时，每个局部变量和每个空白最终字段都必须具有明确分配的值。

因此，如果编译器发现`col`未初始化，并且*发现*它可能在运行时保持未初始化，并且还发现它稍后在方法中被使用，它会将其标记为错误。

# delphi - 从 TOleContainer 中提取位图？

> ID：15394110
> 
> 赞同：3
> 
> 时间：2013-03-13T18:59:30.490
> 
> 标签：delphi, bitmap, containers, extract, ole

`TOleContainer`我正在尝试使用 IDataObject 的 GetData 方法提取位图。

```
 OleContainer1.CreateObject('Paint.Picture', false);
 OleContainer1.OleObjectInterface.QueryInterface(IDataObject, DataObject); 
```

EnumFormatEtc with `DATADIR_GET`on DataObject 返回以下内容：

```
 cfFormat, ptd, dwAspect, lIndex, tymed

 CF_METAFILEPICT, nil, DVASPECT_CONTENT, -1, TYMED_MFPICT
 CF_DIB, nil, DVASPECT_CONTENT, -1, TYMED_HGLOBAL or TYMED_ISTREAM
 CF_BITMAP, nil, DVASPECT_CONTENT, -1, TYMED_HGLOBAL 
```

但是当我这样做时：

```
FormatEtc.cfFormat := CF_BITMAP;
FormatEtc.ptd := nil;
FormatEtc.dwAspect := DVASPECT_CONTENT;
FormatEtc.lIndex := -1;
FormatEtc.tymed := TYMED_HGLOBAL;

OleCheck(DataObject.GetData(FormatEtc, StorageMedium)); 
```

我收到**无效的 FORMATETC 结构**错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:40:51.233

[我通过使用此处](https://stackoverflow.com/questions/2861008/how-to-extract-metafile-from-tolecontainer)找到的代码来执行您尝试执行的相同操作。就我而言，我发现最好执行以下操作，它使用`DrawOleOnBmp()`提供的链接中的 ：

```
oleMain.UpdateObject;
if oleMain.OleObjectInterface = nil then
  raise Exception.Create('OLE Container is empty.');
DrawOleOnBmp(oleMain.OleObjectInterface, imgMain.Bitmap);
imgMain.Bitmap.SaveToFile('Filename.bmp'); 
```

哪里`oleMain`是`TOleContainer`，`imgMain`是`TImage32`。两者都在表格上可见...

为方便起见，这里是链接中的方法，由@MarkElder 编写：

```
{
  DrawOleOnBmp
  ---------------------------------------------------------------------------
  Take a OleObject and draw it to a bitmap canvas.  The bitmap will be sized
  to match the normal size of the OLE Object.
}
procedure DrawOleOnBmp(Ole: IOleObject; Bmp: TBitmap32);
var
  ViewObject2: IViewObject2;
  ViewSize: TPoint;
  AdjustedSize: TPoint;
  DC: HDC;
  R: TRect;
begin
  if Succeeded(Ole.QueryInterface(IViewObject2, ViewObject2)) then
  begin
    ViewObject2.GetExtent(DVASPECT_CONTENT, -1, nil, ViewSize);

    DC := GetDC(0);
    AdjustedSize.X := MulDiv(ViewSize.X, GetDeviceCaps(DC, LOGPIXELSX), 2540);
    AdjustedSize.Y := MulDiv(ViewSize.Y, GetDeviceCaps(DC, LOGPIXELSY), 2540);
    ReleaseDC(0, DC);

    Bmp.Height := AdjustedSize.Y;
    Bmp.Width := AdjustedSize.X;

    Bmp.FillRect(0, 0, Bmp.Width, Bmp.Height, clWhite);

    SetRect(R, 0, 0, Bmp.Width, Bmp.Height);

    OleDraw(Ole, DVASPECT_CONTENT, Bmp.Canvas.Handle, R);
  end
  else
  begin
    raise Exception.Create('Could not get the IViewObject2 interfact on the OleObject');
  end;
end; 
```

# .htaccess - htaccess 删除 URL 中间的任何内容（缩略图到图像 src）

> ID：15394112
> 
> 赞同：2
> 
> 时间：2013-03-13T18:59:33.430
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我想从以下位置转换缩略图和图像源：

```
domain.com/anyA-Z/anyA-Z-0-9/anyA-Z-0-9/directoryX/directoryY/anyA-Z-0-9.jpg 
```

到

```
domain.com/directoryX/directoryY/anyA-Z-0-9.jpg 
```

我写了这条规则：

```
RewriteCond %{REQUEST_URI} ^/directoryX/directoryY/(.*)

RewriteRule ^domain.com/directoryX/directoryY/?$ domain.com/([a-zA-Z0-9|/\_]+)/directoryX/directoryY/$1 [L] 
```

任何建议，为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:00:57.570

域名不是请求 URL 路径的一部分。在 中`RewriteRule`，模式可能只是请求 URL 的一部分，但您必须匹配整个请求 URL 路径

```
RewriteEngine on
RewriteRule ^[a-zA-Z]+/[a-zA-Z0-9-]+/[a-zA-Z0-9-]+/directoryX/directoryY/(.+) /directoryX/directoryY/$1 [L] 
```

# c# - 将元素的多个属性返回到列表。LINQ 转 XML

> ID：15394113
> 
> 赞同：2
> 
> 时间：2013-03-13T18:59:41.963
> 
> 标签：c#, xml, linq, list, lambda

我有一个类似于下面的 xml。

```
<rowset>
<row attribute1="somevalue1" attribute2="somevalue2" attribute3="somevalue3" attribute4="somevalue4"/>
<row attribute1="somevalue1" attribute2="somevalue2" attribute3="somevalue3" attribute4="somevalue4"/>
<row attribute1="somevalue1" attribute2="somevalue2" attribute3="somevalue3" attribute4="somevalue4"/>
<row attribute1="somevalue1" attribute2="somevalue2" attribute3="somevalue3" attribute4="somevalue4"/>
</rowset> 
```

我要做的是返回一个列表，其中每一行都是一个列表项，属性将是子项。我得到的最接近的是以下语句，但我无法让它返回通过计数和查看在调试中可以看到的值。

```
var skillslist = testmultilist.Descendants("row").Select(a => a.Attributes()).ToList(); 
```

任何帮助将非常感激。

这就是我最终做到的方式。

```
var skillslist = testmultilist.Descendants("row").Select(a => a.Attributes().Select(c => c.Value).ToList()).ToList(); 
```

我可以使用“string derp = testmultilist[6][3]”从中提取字符串。这给出了第七行的第四个 somevalue。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:11:16.827

根据您的评论更新

> **“我一直在寻找的是能够做类似于“testmultilist[0][2]”**的事情，它会从第一行返回 somevalue3，尽管我不确定我是否以正确的方式进行。”

再次，您非常接近，除了您选择`IEnumerable<XAttribute>`而不是`List<string>`属性值。

以下是如何做到这一点（评论任何偶然发现的人：

```
 var skillslist = testmultilist.Elements("row")            // Get the Elements
        .Select(e => e.Attributes()                           // Select the attributes per element (returns IEnumerable<XAttribute>)
            .Select(a => a.Value)                             // Working on the attributes, get only the value
            .ToList()                                         // Must be a list here in order to use indexer [] to access items; this creates the innter List<> items
        )                                                     // this completes the selection of each outer "row" item
        .ToList(); 
```

测试应用：

```
using System;
using System.Linq;
using System.Xml.Linq;

namespace XLinqAttributeGetNames
{
    class Program
    {
        static void Main(string[] args)
        {
            XElement testmultilist = XElement.Parse(@"<rowset>
                <row attribute1=""somevalue1"" attribute2=""somevalue2"" attribute3=""somevalue3"" attribute4=""somevalue4""/>
                <row attribute1=""somevalue1"" attribute2=""somevalue2"" attribute3=""somevalue3"" attribute4=""somevalue4""/>
                <row attribute1=""somevalue1"" attribute2=""somevalue2"" attribute3=""somevalue3"" attribute4=""somevalue4""/>
                <row attribute1=""somevalue1"" attribute2=""somevalue2"" attribute3=""somevalue3"" attribute4=""somevalue4""/>
                </rowset>");

            var skillslist = testmultilist.Elements("row")
                .Select(s => s.Attributes()
                    .Select(a => a.Value)
                    .ToList()
                )
                .ToList();

            for (var i = 0; i < skillslist.Count; i++)
            {
                Console.WriteLine("Row " + i);
                for (var j = 0; j < skillslist[i].Count(); j++)
                {
                    Console.WriteLine("Item " + j + ": " + skillslist[i][j]);
                }
                Console.WriteLine();
            }
            Console.ReadKey();

        }
    }
} 
```

# git - 在 git 中，我可以将我对分支的最后 n 次提交与该分支的当前 HEAD 进行比较，不包括其他人的提交吗？

> ID：15394114
> 
> 赞同：1
> 
> 时间：2013-03-13T18:59:46.183
> 
> 标签：git

通常我会在 git 功能分支中工作，让我的一位同事在将其合并到之前审查我的工作`master`，但我必须直接在`master`分支中做一些工作，所以我所有的提交现在都穿插着其他人的提交。我想`diff`在当前`HEAD`的`master`分支和我之前的*n*次提交之间生成一个`master`，以便我的同事可以审查我的工作，就好像它是一个单一的提交或补丁一样。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:27:31.027

没有办法直接做到这一点。我相信最简单的解决方案可能是创建一个临时分支，然后使用`git rebase -i`将要用作 diff 中的原始提交的提交命名为参数。在生成的编辑器中重新排序提交，以便您的提交出现在其他提交之后。您可能还想压缩您的提交。此时，您可以轻松获得更改的单个差异。

# javascript - 影响多个div的jQuery点击功能

> ID：15394115
> 
> 赞同：1
> 
> 时间：2013-03-13T18:59:49.550
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 的单击功能将悬停状态应用于选定的 div，而不区分 JavaScript 中的 div。我目前正在使用：

```
 $(document).ready(function(){
    $(".project").click(function() {
            $("a.expand").removeClass("hovered");
            $("a.expand").addClass("hovered");
            $(".project_full").hide();
            var selected_tab = $(this).find("a").attr("href");
            $(selected_tab).fadeIn();
            return false;
        }); 
```

使用 HTML：

```
<div class="project first project_gizmoscoop">
  <div class="title">
     GizmoScoop!                    
     <div class="date">2012</div>
  </div>
  <a class="expand" title="(Caption)" href="#project_1">GizmoScoop!</a>
</div>
<div class="project project_sc">
  <div class="title">
     Striking Code                  
     <div class="date">2011</div>
  </div>
  <a class="expand" title="(Caption)" href="#project_2">Striking Code</a>
</div> 
```

.hovered 类应用于点击的链接（来自外部 CSS 文件的特定样式）。然而，一切都在被选择。（有关示例，请参见[http://www.codeisdna.com ）。](http://www.codeisdna.com)

我知道我做错了什么（我应该指定个人 ID 或使用 HTML5 数据属性），但我被不必要地卡住了。我现在感觉自己像个完全的新手，我不能做这么简单的事情（尽管我做过更高级的事情）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:02:23.087

您只需要利用 jQuery 的灵活性（和良好的编程习惯）并相应地缩小您的范围。您已经对变量定义进行了类似的操作。例如，仅针对单击`a.expand`的实例中的那些元素：`.project`

```
$(".project").click(function() {
    $(this).find("a.expand").removeClass("hovered");
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:09:27.067

```
$(".expand").click(function() {
        $(this).addClass("hovered");
        ..
    }); 
```

# java - 无法为 Spring Web 服务的元素找到 BeanDefinitionParser

> ID：15394118
> 
> 赞同：6
> 
> 时间：2013-03-13T18:59:53.523
> 
> 标签：java, spring, xsd, spring-ws

我是 Spring Web 服务的新手，我不断收到此错误：

```
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Cannot locate BeanDefinitionParser for element [annotation-driven]
Offending resource: ServletContext resource [/WEB-INF/spring-ws-servlet.xml] 
```

经过一番挖掘，看起来我的模式和 jar 之间的版本很可能不匹配，但我看不到在哪里（我正在为 v3.1 拍摄）。

这是我图书馆中的每个**Spring jar：**

```
M2_REPO\org\springframework\spring-aop\3.1.1.RELEASE\spring-aop-3.1.1.RELEASE.jar
M2_REPO\org\springframework\spring-asm\3.1.1.RELEASE\spring-asm-3.1.1.RELEASE.jar
M2_REPO\org\springframework\spring-beans\3.1.1.RELEASE\spring-beans-3.1.1.RELEASE.jar
M2_REPO\org\springframework\spring-context\3.1.1.RELEASE\spring-context-3.1.1.RELEASE.jar
M2_REPO\org\springframework\spring-context-support\3.1.1.RELEASE\spring-context-support-3.1.1.RELEASE.jar
M2_REPO\org\springframework\spring-core\3.1.1.RELEASE\spring-core-3.1.1.RELEASE.jar
M2_REPO\org\springframework\spring-expression\3.1.1.RELEASE\spring-expression-3.1.1.RELEASE.jar
M2_REPO\org\springframework\spring-jdbc\3.1.1.RELEASE\spring-jdbc-3.1.1.RELEASE.jar
M2_REPO\org\springframework\spring-jms\3.1.1.RELEASE\spring-jms-3.1.1.RELEASE.jar
M2_REPO\org\springframework\spring-oxm\3.1.1.RELEASE\spring-oxm-3.1.1.RELEASE.jar
M2_REPO\org\springframework\ws\spring-oxm\1.5.10\spring-oxm-1.5.10.jar
M2_REPO\org\springframework\ws\spring-oxm-tiger\1.5.10\spring-oxm-tiger-1.5.10.jar
M2_REPO\org\springframework\security\spring-security-acl\3.1.1.RELEASE\spring-security-acl-3.1.1.RELEASE.jar
M2_REPO\org\springframework\security\spring-security-config\3.1.1.RELEASE\spring-security-config-3.1.1.RELEASE.jar
M2_REPO\org\springframework\security\spring-security-core\3.1.1.RELEASE\spring-security-core-3.1.1.RELEASE.jar
M2_REPO\org\springframework\security\spring-security-remoting\3.1.1.RELEASE\spring-security-remoting-3.1.1.RELEASE.jar
M2_REPO\org\springframework\security\spring-security-taglibs\3.1.1.RELEASE\spring-security-taglibs-3.1.1.RELEASE.jar
M2_REPO\org\springframework\security\spring-security-web\3.1.1.RELEASE\spring-security-web-3.1.1.RELEASE.jar
M2_REPO\org\springframework\spring-test\3.1.1.RELEASE\spring-test-3.1.1.RELEASE.jar
M2_REPO\org\springframework\spring-tx\3.1.1.RELEASE\spring-tx-3.1.1.RELEASE.jar
M2_REPO\org\springframework\spring-web\3.1.1.RELEASE\spring-web-3.1.1.RELEASE.jar
M2_REPO\org\springframework\spring-webmvc\3.1.1.RELEASE\spring-webmvc-3.1.1.RELEASE.jar
M2_REPO\org\springframework\ws\spring-ws-core\2.1.2.RELEASE\spring-ws-core-2.1.2.RELEASE.jar
M2_REPO\org\springframework\ws\spring-ws-core-tiger\1.5.10\spring-ws-core-tiger-1.5.10.jar
M2_REPO\org\springframework\ws\spring-xml\1.5.10\spring-xml-1.5.10.jar 
```

**spring-ws-servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:sws="http://www.springframework.org/schema/web-services"
  xsi:schemaLocation="
      http://www.springframework.org/schema/beans
      http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
      http://www.springframework.org/schema/web-services
      http://www.springframework.org/schema/web-services/web-services-2.0.xsd
      http://www.springframework.org/schema/context
      http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:component-scan base-package="my.package"/>

    <sws:annotation-driven />

    <sws:dynamic-wsdl id="MyService"
        portTypeName="MyServiceInterface"
        locationUri="/myService/">
        <sws:xsd location="/WEB-INF/mySchema.xsd" />
    </sws:dynamic-wsdl>

</beans> 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
         xmlns="http://java.sun.com/xml/ns/javaee" 
         xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" 
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
                             http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" 
         version="3.0">

    <display-name>
        My Webservice Created By Archetype for Spring WS
    </display-name>

    <servlet>
        <servlet-name>spring-ws</servlet-name>
        <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>          
        <init-param>
            <param-name>transformWsdlLocations</param-name>
            <param-value>true</param-value>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>spring-ws</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

**applicationContext.xml**我不确定我什至需要这个......

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
              http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
              http://www.springframework.org/schema/context
              http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <context:component-scan base-package="my.package" />

    <context:annotation-config />

</beans> 
```

每当它读取一个元素时，就会在 spring-ws-servlet.xml 中引发错误。就像我说的，我是 Spring Web 服务的新手，我意识到我的设置中可能存在明显的缺陷，非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:50:39.303

解决了。显然，我的一个依赖项是引入了不同版本的 spring-ws，即使它没有列在我引用的库下。我实际上最终不需要整个依赖项，所以我只是删除了它，现在我没有收到任何错误。

# ubuntu - 安装在 2 个不同实例上的同一个 amazon s3fs 存储桶的不同权限？

> ID：15394121
> 
> 赞同：0
> 
> 时间：2013-03-13T19:00:06.817
> 
> 标签：ubuntu, amazon-s3, amazon-ec2, bucket, s3fs

我在 2 个不同的 Ubuntu 服务器实例上安装了相同的 amazon 存储桶，但 ubuntu 用户只能在第一个而不是第二个上写入。在第二个上，它具有读取权限，但没有写入权限。

我正在使用这个命令来挂载它们：

```
 s3fs -o allow_other -o use_cache=/var/www/tempS3Cache/ mys3bucketname ./media/ 
```

-Ubuntu用户属于同一组

-Ubuntu 用户是已挂载文件夹的所有者

-Ubuntu 用户安装运行 s3fs 命令

-/etc/passwd-s3fs 和 /home/ubuntu/.passwd-s3fs 在两台服务器上具有相同的权限

- 在第一个我使用 s3fs-1.62.tar.gz 和第二个 s3fs-1.63.tar.gz 来编译 s3fs，这可能是问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:02:46.670

好的，所以经过一番调查，我发现这是因为版本 1.63 上的 s3fs 错误[https://groups.google.com/forum/?fromgroups=#!topic/s3fs-devel/uksnbrBj6KM](https://groups.google.com/forum/?fromgroups=#!topic/s3fs-devel/uksnbrBj6KM)

使用版本 1.61 或 1.62 解决问题，但如果使用缓存 [https://code.google.com/p/s3fs/issues/detail?id=285&q=bad%20file ，您会得到错误的文件描述](https://code.google.com/p/s3fs/issues/detail?id=285&q=bad%20file)

# iphone - 如何阻止 iOS PinchGesture 选择按钮？

> ID：15394122
> 
> 赞同：1
> 
> 时间：2013-03-13T19:00:11.333
> 
> 标签：iphone, ios, uibutton, uigesturerecognizer

我目前正在为 iPhone 编写一个 iOS 应用程序，该应用程序具有一个特殊功能，可以动态创建流程图。创建的流程图是一个巨大的、可滚动的视图。流程图的每个信息节点都包含自动将视图移动到下一个信息节点的按钮。在任何时间点，用户都可以使用捏合手势缩小当前信息节点并查看完整的流程图。

我的问题是这样的：我注意到如果用户用他们的一根手指点击信息节点中的一个按钮开始这个捏动作，那么这个手势优先并且显示下一个节点而不是从当前缩小的捏手势节点。

我一直在查看 StackOverflow 并尝试了几种方法来解决此问题，但似乎还没有任何效果。我想知道是否有人遇到过类似的问题，他们是否能够克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:15:02.317

使用@Till 的建议并进一步研究我的问题，我做了一些对我有用的事情，我想我会在这里分享它，以防其他人有类似的问题或愿望。

我能够创建可用作半按钮的 UIView。对于这些视图中的每一个，我都使用了 UITapGestureRecognizers 并将它们定位于检查发送者状态是否为 StateEnded 的方法：

```
-(void)handleButtonTap:(UITapGestureRecognizer *)sender
{
  if(sender.state == UIGestureRecognizerStateEnded)
    // Go on and do the code here
} 
```

但是，为了保持原始 iOS 按钮的外观，我更进一步。对于我创建的每个 UIButton，我没有将目标与这些按钮相关联，而是为每个按钮创建了 UIView。这些 UIView 完全空白，背景颜色为“清除”。通过这种方式，我现在可以拥有我的按钮，但仍然可以获得我想要的功能。

我希望这可以帮助其他有类似问题的人。再次感谢@Till 的建议。

# javascript - 将单选按钮值传递给 Javascript

> ID：15394124
> 
> 赞同：0
> 
> 时间：2013-03-13T19:00:19.270
> 
> 标签：javascript, jquery

这是我的 HTML

```
<tr>
    <td class="g">
    Gender
    </td>
    <td class="g_input">
        <input type="radio" name="gender" id="settings_gender" value="Male" checked />&nbsp;&nbsp;Male &nbsp;&nbsp;&nbsp;
    <input type="radio" name="gender" id="settings_gender" value ="Female" />&nbsp;&nbsp;Female
    </td>
</tr> 
```

这是javascript

```
$(document).ready(function () {
    $(".update-basic-info").click(function () {
        var gender = $("#settings_gender").val();

        alert(gender);
    });
}); 
```

输出只显示男性，当我检查女性单选按钮时，它仍然显示男性

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:04:33.367

ID 在您的页面上应该是唯一的。您可以使用类或仅使用名称属性来完成

```
var gender = $('input[name=gender]:checked').val(); 
```

或将 ID 更改为 class

```
<input type="radio" name="gender" class="settings_gender" value="Male" checked />&nbsp;&nbsp;Male &nbsp;&nbsp;&nbsp;
<input type="radio" name="gender" class="settings_gender" value ="Female" />&nbsp;&nbsp;Female

var gender = $(".settings_gender:checked").val(); 
```

工作 jsFiddle：http: [//jsfiddle.net/TvVFM/](http://jsfiddle.net/TvVFM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:24:56.060

```
$('input[name=gender]').click(function(){
     alert($(this).val());
}); 
```

或将两个单选按钮的类设置为“settings_gender”并试试这个

```
$('.settings_gender').click(function(){
     alert($(this).val());
}); 
```

# facebook - 脸书应用编号

> ID：15394127
> 
> 赞同：0
> 
> 时间：2013-03-13T19:00:21.940
> 
> 标签：facebook, api, web

我制作了一个与 facebook 链接的网站应用程序，我决定使用 WAMP 自己托管它。我有一个转发到我的 ip 的域，在 facebook 应用程序设置中，我已将应用程序域和网站 URL 更改为我的新域。我还更改了我的 html 文件中的频道 URL，但是当我使用网站上的任何内容（例如登录）时，它会引发错误：

“API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序错误消息：无效的 redirect_uri：应用程序配置不允许给定的 URL。”

这是因为所有域都在重定向到我的 IP 吗？- 任何建议将不胜感激。（这是一个大学项目）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:05:18.407

如果域正在重定向到您计算机上的 IP，并且它是显示在您的地址栏中的 IP。例如：*127.0.0.1 :8000/app.php*

然后您需要将此 IP 添加为域（而不是仅重定向到您 IP 的 URL）

# c# - EventListeners 没有被通过反射创建的实例调用

> ID：15394129
> 
> 赞同：0
> 
> 时间：2013-03-13T19:00:25.480
> 
> 标签：c#, events, system.reflection

道歉有一个错字...已编辑...

我有一个奇怪的问题，我不确定。

在一段代码中，我有一个称为单例的类，它有一个其他类可以监听的事件，通过执行类似的操作非常简单

```
Client.Instance.MyEvent += new EventHandler<EventArgs>(myHandler); 
```

所以如果我有一个通用类：

```
Class MyTest {
   public MyTest() {
       System.Console.WriteLine("In Constructor Registering Events");
       Client.Instance.MyEvent += new EventHandler<EventArgs>(myHandler);
   }
   private void myHandler(object sender, EventArgs arg) {
      System.Console.WriteLine("Got event!");
   }
} 
```

现在，如果我创建这样的类：

```
MyTest mC = new MyTest ();
Client.Instance.FireEvent(); 
```

我得到了预期的“在构造函数中注册事件”和“得到事件”

但是，如果我通过反射创建类，我不会。

```
Type mType = typeof(MyTest);
object mT = Activator.CreateInstance(mType);
Client.Instance.FireEvent(); 
```

我得到的只是“在构造函数中注册事件”，但我没有收到事件触发消息。这里发生了什么？我在反射调用中做错了什么吗？

谢谢 -

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:03:43.690

我刚刚测试了您的声明，并且使用正确的类型，无论对象是使用反射创建`new`还是通过反射创建，它的工作原理都是一样的。

[可以在此处测试](http://rextester.com/live/BMH36978)以下工作演示

```
public class Program
{
    public static void Main(string[] args)
    {                        
        Client.Instance.MyEvent += delegate { Console.WriteLine("MY EVENT handled from Main"); };

        MyTest mt = new MyTest();

        Type mType = typeof(MyTest);
        object reflectedMT = Activator.CreateInstance(mType);

        Client.Instance.FireEvent();
    }
}

public class Client {
    private Client() {}
    private static Client _inst = new Client();
    public static Client Instance { get { return _inst; } }
    public void FireEvent() { if(MyEvent != null) MyEvent(this, EventArgs.Empty); }
    public event EventHandler<EventArgs> MyEvent;
}

public class MyTest {
   public MyTest() {
      System.Console.WriteLine("In Constructor Registering Events");
      Client.Instance.MyEvent += new EventHandler<EventArgs>(myHandler);
   }
   private void myHandler(object sender, EventArgs arg) {
      System.Console.WriteLine("Got event!");
   }
} 
```

# javascript - 将参数转换为数组

> ID：15394139
> 
> 赞同：0
> 
> 时间：2013-03-13T19:00:59.867
> 
> 标签：javascript, arrays

我有一个函数，我将一个对象和一些参数传递给它。前任：

```
someFunc: function(obj){

     var cra = Array.prototype.call(arguments); 
```

所以，我调用这个函数传递以下参数：

```
someFunc({name: 'frank', age: '56', Location: 'New Heaven'}, 'name, 'age'); 
```

我想让创建的新数组“cra”包含除第一个参数 argument[0] 之外的所有参数，它是一个对象。

for 循环不起作用，我不想在这里使用循环。有什么我想念的吗？

基本上：

```
console.log(cra): 
>>> ['name','age'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:07:04.193

你可以使用

```
function argArray(){
    return Array.prototype.splice.call(arguments, 1);
} 
```

用法：

```
argArray(1,2,3,4); // [2,3,4] 
```

这就像做`[1,2,3,4].splice(1);`，还有你正在投射`arguments`到一个`Array`对象的额外好处。

# php - 修改Genesis Theme评论显示

> ID：15394141
> 
> 赞同：0
> 
> 时间：2013-03-13T19:01:01.933
> 
> 标签：php, wordpress, frameworks, comments

我需要修改评论中显示的链接（用户名），删除或更改。唯一的困难是需要为Genesis Framework完成。在 comments.php 我发现：

```
do_action( 'genesis_before_comments' );
do_action( 'genesis_comments' );
do_action( 'genesis_after_comments' ); 
```

但我不知道如何修改“genesis_comments”的内容。

可能应该这样做：

```
add_action( 'genesis_comments' , 'comments' );
function comments()
{
    //... here is the problem
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-03T03:40:09.950

您可以使用类似于[genesissnippets.com](http://genesissnippets.com/custom-comments-html-output-with-genesis-framework/)上概述的方法。基本上你想删除`genesis_default_list_comments`动作，并用你自己的替换它：

```
remove_action( 'genesis_list_comments', 'genesis_default_list_comments' );
add_action( 'genesis_list_comments', 'my_list_comments' ); 
```

然后在您的`my_list_comments`函数中，调用**您的**评论回调函数。基本上我完全复制了 genesis_default_list_comments 函数，只将回调函数名称更改为我自己的：

```
function my_list_comments() {
    $defaults = array(
        'type'        => 'comment',
        'avatar_size' => 48,
        'format'      => 'html5',
        'callback'    => 'my_comment_callback', // <-- this is the change
    );

    $args = apply_filters( 'genesis_comment_list_args', $defaults );
    wp_list_comments( $args );
} 
```

然后在你的`my_comment_callback`是你改变评论输出的地方。

```
function my_comment_callback( $comment, array $args, $depth ) {

    $GLOBALS['comment'] = $comment; ?>

    <li <?php comment_class(); ?> id="comment-<?php comment_ID(); ?>">

        <?php do_action( 'genesis_before_comment' ); ?>

        <div class="comment-header">
            <div class="comment-author vcard">
                <?php echo get_avatar( $comment, $args['avatar_size'] ); ?>
                    <?php /**** PUT YOUR CHANGES HERE... ****/ ?>
                    <?php printf( __( '<cite class="fn">%s</cite> <span class="says">%s:</span>', 'genesis' ), get_comment_author_link(), apply_filters( 'comment_author_says_text', __( 'says', 'genesis' ) ) ); ?>
            </div>

            <div class="comment-meta commentmetadata">
                <?php /**** OR HERE! ****/ ?>
                    <a href="<?php echo esc_url( get_comment_link( $comment->comment_ID ) ); ?>"><?php printf( __( '%1$s at %2$s', 'genesis' ), get_comment_date(), get_comment_time() ); ?></a>
                <?php edit_comment_link( __( '(Edit)', 'genesis' ), '' ); ?>
            </div>
        </div>

        <div class="comment-content">
            <?php if ( ! $comment->comment_approved ) : ?>
                <p class="alert"><?php echo apply_filters( 'genesis_comment_awaiting_moderation', __( 'Your comment is awaiting moderation.', 'genesis' ) ); ?></p>
            <?php endif; ?>

            <?php comment_text(); ?>
        </div>

        <div class="reply">
            <?php comment_reply_link( array_merge( $args, array( 'depth' => $depth, 'max_depth' => $args['max_depth'] ) ) ); ?>
        </div>

        <?php do_action( 'genesis_after_comment' );

    //* No ending </li> tag because of comment threading

} 
```

# git - 让 git reset 重新暂存已删除的文件

> ID：15394143
> 
> 赞同：1
> 
> 时间：2013-03-13T19:01:05.777
> 
> 标签：git

假设我`fileA`在 commit中删除了`abc123`。然后，当 I 时，显示`git reset`的输出被删除。不再在我的工作目录中，所以我无法重新添加它。`git diff``fileA``fileA`

的默认`git reset`值为`git reset --mixed`。这描述`man git-reset`为：

> 重置索引但不重置工作树（即保留更改的文件但未标记提交）并报告尚未更新的内容。

什么是优雅的解决方案。一种解决方法是签出包含该文件的后续提交，复制该文件，然后签出`abc123`并再次添加它。

**解决方案**：

以下两个解决方案是正确的。一个展示了如果您签出文件被删除的提交，如何恢复文件，并且您只需运行`git checkout fileA`. 另一个展示了如何在当前提交中恢复文件，该提交稍后于`fileA`被删除的提交。您运行`git checkout abc123~ -- file A`（`--`确保 checkout 命令知道我们正在尝试回滚文件而不是更改分支）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:31:00.840

我认为这就是发生的事情：

*   您签出了`abc123`包含`fileA`.
*   你输入了`git rm fileA`.
*   你输入了`git reset`.

现在你会看到这样的东西：

```
# On branch master
# Changes not staged for commit:
#   (use "git add/rm <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#   deleted:    fileA
# 
```

而且你不能用它`git add`回来`fileA`，因为它不再在文件系统上。

要恢复`fileA`，请键入：`git checkout fileA`。

`git reset --hard`如果您在索引或工作树中没有您关心的任何其他更改，您也可以使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:31:05.197

`git reset --hard`将重置索引和工作树，这将恢复已删除的文件。如果您只是想重新添加一个已删除但您知道当前头上存在的文件，您可以这样做：

```
git checkout HEAD -- fileA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T19:36:40.597

您可以从特定版本签出单个文件：

```
git checkout abc123~ -- fileA 
```

由于提交 ID 后面的波浪号 ( )，这将检查`fileA`它在提交之前的提交中存在的版本。这会与工作树一起修改索引，因此就好像文件也被添加了一样。如果不希望这样做，您可以使用从索引中删除文件，同时将其保留在工作副本中。`abc123``~``git rm --cached fileA`

# jakarta-ee - 如何干净地结束 CDI @ConversationScoped

> ID：15394148
> 
> 赞同：4
> 
> 时间：2013-03-13T19:01:24.757
> 
> 标签：jakarta-ee, jsf-2, cdi

我的项目正在使用 JSF2.0 和 CDI。对于一页，我希望我的支持 bean 与页面的生命周期相匹配。@ViewScoped 似乎非常合适，但它不是 CDI 的一部分，然后使我们的解决方案不一致。那么我的下一个选择是 CDI @ConversationScoped。在我看来，标记对话边界的唯一方法是通过 conversation.begin 和 conversation.end 的程序方式（我使用过 Seam 2.x，在那里你可以使用注释来标记对话边界）。我的页面位于具有全局导航的通用布局中，这意味着有“无限”的方式可以离开我的页面。无论用户选择哪种方式，我如何确保对话结束（例如，单击一个完全不在我的支持 bean 控制范围内的全局导航选项）？我希望该解决方案不会将代码传播到其他模块；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:44:14.950

这可以通过自定义来实现`ConfigurableNavigationHandler`。

1.  实现一个 JSF NavigationHandler

    ```
     public class NavigationHandlerTest extends ConfigurableNavigationHandler {

     private NavigationHandlerTest concreteHandler;

     public NavigationHandlerTest(NavigationHandler concreteHandler) {
          this.concreteHandler = concreteHandler;
     }

     @Override
     public void handleNavigation(FacesContext context, String fromAction, String outcome) 
     {
        //here, check where navigation is coming from and based on that, retrieve the CDI bean and kill the conversation
         if(fromAction.equals("someAction"){
         BeanManager theBeanManager = getBeanManager(context);
         Bean bean = theBeanManager.getBeans("yourCDIBean").iterator().next() 
         CreationalContext ctx = theBeanManager.createCreationalContext(bean);
         MyBeanType o = theBeanManager.getReference(bean, bean.getClass(), ctx); //retrieve the bean from the manager by name. You're guaranteed to retrieve only one of the same name;
         o.getConversation.end(); //end the conversation from the bean reference
          }

         //proceed with normal navigation
         concreteHandler.handleNavigation(context, fromAction, outcome);   

     }

     //This method provides access to the cdi bean manager. You need it to be able to 
     //gain access to the cdi bean and from that to the injected conversation instance
     public BeanManager getBeanManager(FacesContext facesContext){
       BeanManager cdiBeanManager = (BeanManager)((ServletContext) facesContext.getExternalContext().getContext()).getAttribute("javax.enterprise.inject.spi.BeanManager"); 
        return cdiBeanManager;
     }

       } 
    ```

2.  *在faces-config.xml*中注册您的自定义导航处理程序

     *```
     <application>
         <navigation-handler>com.foo.bar.NavigationHandlerTest</navigation-handler>
     </application> 
    ```* 

 *这种方法是集中的和微创的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T21:46:50.770

据我所知 - 你不能。在 JSF 中，几乎不可能（很难）确定链接是在当前选项卡还是新选项卡中打开（对于新选项卡，您需要保持对话处于活动状态）。

但好消息 - 闲置 10 分钟后（默认情况下），对话将自动关闭。*

# bash - 在 ls -ltr linux bash 中需要帮助

> ID：15394149
> 
> 赞同：2
> 
> 时间：2013-03-13T19:01:28.330
> 
> 标签：bash, shell

我想列出特定文件夹中的最后 3 个日志并将输出重定向到另一个 tmp.out 文件。

```
ls -ltr /home/oracle/$dbserver/*.log  |  awk '{print $9}' | tail -3   | tee tmp.out 
```

我希望在 tmp 文件中看到的是：

```
a.out
b.out
c.out 
```

我得到的是：

```
/home/oracle/DB1/a.out
/home/oracle/DB1/b.out
/home/oracle/DB1/c.out 
```

我肯定需要在尾巴和发球台之间使用一些东西。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:06:58.373

```
ls -ltr /home/oracle.$dbserver/*.log | tail -3 | awk '{print $NF}' | awk -F/ '{print $NF}' | tee tmp.out 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:13:03.967

到那个`cd`目录然后

```
 cd /home/oracle/$dbserver/ && ls -ltr *.log  |  awk '{print $9}' | tail -3   | tee  $OLDPWD/tmp.out 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T19:16:26.430

该`basename`命令将采用形式的字符串`/foo/bar/baz.txt`并简单地返回`baz.txt`。通过 xargs 调用它，确保使用命令行标志`-n 1`，这样它一次只发送一个文件名到`basename`.

`ls -ltr /home/oracle/$dbserver/*.log | awk '{print $9}' | xargs -n 1 basename | tail -3 | tee tmp.out`

# javascript - 使用 pushState 后浏览器中的后退按钮无法正常工作（在 Chrome 中）

> ID：15394156
> 
> 赞同：28
> 
> 时间：2013-03-13T19:02:03.200
> 
> 标签：javascript, ruby-on-rails-3, google-chrome, back, pushstate

我在 JS 响应中使用这种类型的行

```
if (history && history.pushState){
     history.pushState(null, null, '<%=j home_path %>');
} 
```

但是当我`back`在浏览器中单击时，我看到的是响应的 JS 代码而不是上一页。

有没有办法让后退按钮工作，所以它会重新请求最后一个 url 的页面（在`home_path`pushStated 之前？

**更新**：

我发现[了这个](http://adhockery.blogspot.com/2011/02/javascripts-history-object-pushstate.html)..似乎其他人也有同样的问题.. History.js 也没有解决它

所以要确认那里的一些评论..这只发生在chrome中

**我的想法**

我认为这一切的根源在于popstate请求的pushstate文档类型相同（js响应）。需要做的是对popstate请求html响应..我只是不知道如何

**更多更新：**

看到它提到使用的[http://railscasts.com/episodes/246-ajax-history-state](http://railscasts.com/episodes/246-ajax-history-state)

```
 $(window).bind("popstate", function() {
      $.getScript(location.href);
    }); 
```

这解决了这个问题，但是根据对没有 ajax 缓存的[jQuery $.getScript() 的理解](https://stackoverflow.com/questions/8930017/understanding-jquery-getscript) ，它会添加时间戳.. 这会污染 url.. 将其关闭会使其无法再次以相同的效果工作..

任何人都知道如何解决这个问题？

**更多更新**

[我在整个互联网上跟踪了该问题的踪迹，并以chrome](https://code.google.com/p/chromium/issues/detail?id=94369)中的一个问题结束，该问题指向一个 rails 问题（firefox 工作正常）以及[rails-ujs 中的一个问题，即](https://github.com/rails/jquery-ujs/issues/318)在响应中不包括 Vary Header

示例可以在[这里找到](http://secret-journey-4942.herokuapp.com/movies)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T07:28:35.683

我目前正在玩弄

```
 response.headers['Vary'] = 'Accept' 
```

乍一看，这似乎解决了问题。

如果有人有同样的问题，请检查并告诉我

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-22T22:28:05.813

您需要为 popstate 事件添加一个侦听器

```
window.onpopstate = function(event) {
    //load the page
}; 
```

当按下后退按钮时，url 会更改，然后会触发 popstate 事件。您有责任在 popstate 侦听器中加载与更改的 url 匹配的详细信息。

[一个不错的 popstate 示例](https://developer.mozilla.org/en-US/docs/DOM/window.onpopstate)

某些浏览器会在页面首次加载时触发 popstate 事件，从而导致无限的页面加载循环。这可以通过添加以下检查来避免

```
var loadPage = window.history.state;
window.onpopstate = function(event) {
    if (loadPage) 
        //load the page
}; 
```

然后在调用 pushState 时将 loadPage 设置为 true

```
history.pushState(null, null, '<%=j home_path %>');
loadPage = true; 
```

该技术适用于所有支持 html5 history api 的浏览器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-04T07:48:57.427

它发生在我的 sinatra 和 chrome 上。

解决了它：

```
$.ajaxSetup({ cache: false }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T09:46:01.330

我已经使用本地 HTML 文件在我的浏览器上测试了这段代码，但我得到了一个控制台安全错误：

```
SecurityError: The operation is insecure.
  history.pushState(null, null, '<%=j home_path %>'); 
```

我可以看到操纵浏览器历史记录可能被认为是一种潜在的危险行为，所以我想你应该检查一下这是否也不会发生在你身上。尝试使用 Firebug Javascript 控制台。本地和 http:// HTML 文件之间的行为也可能存在差异。

说了这么多，因为我看到`history`数组的最后一个元素基本上是当前页面，所以如果你想改变前一个，你可以使用两个 pushState() 命令来做到这一点——首先你推送上一个元素你想要，然后你再次推动当前的路径。如果我正确理解了您的问题。

# php - PHP $_Post 一个表单域从 HTML 表单到 PHP 通过 JavaScript

> ID：15394162
> 
> 赞同：0
> 
> 时间：2013-03-13T19:02:23.587
> 
> 标签：php, javascript, html, post

我知道这听起来很疯狂，但这是发生了什么。我有一个拖放文件上传器，它使用 javascript 进行拖放并将文件发送到 php 中的上传脚本以将文件保存到服务器。这一切都很好。这是问题所在。

我在下面添加了一个表单代码

```
<form> 
Customer Name:<input type="text" name="FilesDir" value=""/>
<!--Destination url--><input id="url" input type="hidden" value="upload.php"/>
</form> 
```

设置名称以创建目录，然后使用 javascript 将值传递给 php

```
var createDirectory = document.getElementById('FilesDir');

var formData = new FormData();

formData.append('myfile', file);

formDataDir = new FormData(createDirectory);

xhr.send(formData);

xhr.send(formDataDir); 
```

PHP制作目录如下

```
$Dir = $_POST["FilesDir"];
if (!is_dir($Dir)) {
mkdir($Dir);
} 
```

当我测试它没有看到发布的值时，请参阅下面的错误

```
Notice: Undefined index: FilesDir in C:\wamp\www\php_sandbox\Manual_QR\upload.php on    line 3
Call Stack
#   Time    Memory  Function    Location
1   0.0009  261296  {main}( )   ..\upload.php:0

Warning: mkdir(): Invalid argument in C:\wamp\www\php_sandbox\Manual_QR\upload.php on line 5
Call Stack
#   Time    Memory  Function    Location
1   0.0009  261296  {main}( )   ..\upload.php:0
2   0.0012  262288  mkdir ( )   ..\upload.php:5 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:40:25.377

```
var url= "page to which you want to post";
var data= "page to which you want to post"; //forexample  'var1='+var1+'&var2='+var2

jQuery.ajax({  
      type: "POST", 
      url: url, 
      data: data,
      complete: function(data){  

  }
 }); 
```

并使用 id 的输入元素来识别 javascript 中的值

# javascript - 为什么必须在body标签而不是head中初始化全局变量

> ID：15394164
> 
> 赞同：-1
> 
> 时间：2013-03-13T19:02:25.613
> 
> 标签：javascript, head

在javascript中，初始化全局变量时，

```
<head>
      <script type='text/javascript'>
       var globalvar = 'asdf';
      </script>

</head> 
```

不会初始化全局变量，而

```
 <body>
    <script type='text/javascript'>
       var globalvar = 'asdf';
    </script>
 </body> 
```

将初始化变量。
是否有一个原因？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-13T19:04:50.343

这完全是错误的：您在头部初始化的变量与另一个变量一样全局。

没有区别。

但请确保在分配变量之后使用该变量，而不是之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:17:54.170

更新：可以在[http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-262.pdf](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-262.pdf)找到 javascript 或 ECMAscript 标准 我的回答可能不完全正确，至少不是来自标准的观点。那是因为 AFAIK 标准没有指定 onLoad 事件应该何时发生或在 onLoad 发生时如何设置全局环境。

* * *

您定义的位置没有区别`globalvar`。但是，根据您使用的网络浏览器，您可能必须等待页面加载事件发生，然后才能使用该变量。因此，一般建议是在页面加载事件发生之前不要执行任何访问全局变量的 javascript 代码。要在页面加载时收到通知，您可以使用类似`<BODY onLoad="alert('hello world!')">`. 当文档完成加载时，浏览器会触发 onLoad。

//jk

# javascript - 在我放大到的多边形中显示标记

> ID：15394166
> 
> 赞同：1
> 
> 时间：2013-03-13T19:02:41.810
> 
> 标签：javascript, xml, google-maps-api-3, google-maps-markers, polygons

这是我的[例子。](http://mini.hr/stanonline/test2.php)

我添加了一些代码，当页面加载时，可以只看到多边形，这很好，但是当我用这个函数缩放到多边形时，我得到了所有标记，但我的梦想是只在我放大到的多边形中得到标记，所以我需要用 containsLocation 解决这个问题，但不知道如何。

```
function kmlShowPlacemark(pm) {
    if (geoXmlDoc.placemarks[pm].polygon) {
        map.fitBounds(geoXmlDoc.placemarks[pm].polygon.bounds);
        addMarker(45.374632, 14.425697,'<b>93 Feet East</b><br/>150 Brick Lane, London  E1 6RU&lt;br/&gt;7 Dec 2010 : Jenny &amp; Johnny&lt;br/&gt;');
        addMarker(45.374632, 14.425697,'<b>93 Feet East</b><br/>150 Brick Lane, London  E1 6RU&lt;br/&gt;7 Dec 2010 : Jenny &amp; Johnny&lt;br/&gt;');
        addMarker(45.348674, 14.386749,'<b>Adelphi Theatre</b><br/>The Strand, London  WC2E 7NA&lt;br/&gt;11 Oct 2010 : Love Never Dies');
        addMarker(45.35051, 14.351883,'<b>Adelphi Theatre</b><br/>The Strand, London  WC2E 7NA&lt;br/&gt;11 Oct 2010 : Love Never Dies');
        addMarker(45.319618, 14.501915,'<b>Albany, The</b><br/>240 Gt. Portland Street, London  W1W 5QU');
        addMarker(45.339893, 14.475479,'<b>Aldwych Theatre</b><br/>Aldwych, London  WC2B 4DF&lt;br/&gt;11 Oct 2010 : Dirty Dancing');
        addMarker(45.343513, 14.436684,'<b>Alexandra Palace</b><br/>Wood Green, London  N22&lt;br/&gt;30 Oct 2010 : Lynx All-Nighter');
        addMarker(45.330736, 14.434211,'<b>Stan F.La Guardia 10</b><br/>Najbolji stan na svijetu');
        addMarker(45.385431, 14.357071,'<b>sdas</b><br/>dfsada');
     } 
for (var i=0;i<geoXmlDoc.placemarks.length;i++) {
 var placemark = geoXmlDoc.placemarks[i];
 if (i == pm) {
   if (placemark.polygon) placemark.polygon.setMap(null);
   if (placemark.polyline) placemark.polyline.setMap(map);

 } else {
   if (placemark.polygon) placemark.polygon.setMap(map);
   if (placemark.polyline) placemark.polyline.setMap(null);
   }
}
} 
```

下一个问题部分解决了。当你按下显示所有多边形（Prikaži sve kvartove）时，它被称为函数 showAll，它向你显示所有多边形，但它必须向你显示所有没有标记的多边形。我尝试了两种方法，但它对我不起作用 marker.setVisible(false); 和marker.setMap(null); 然后我加载基本页面 top.location="test2.php"; 如何更好地解决这个问题？

```
function showAll() {
    top.location="test2.php";
    map.fitBounds(geoXmlDoc.bounds); //show all bounds
    map.setZoom(13);
   //marker.setVisible(false);
   //marker.setMap(null); 
   for (var i=0;i<geoXmlDoc.placemarks.length;i++) {
       var placemark = geoXmlDoc.placemarks[i];
       if (placemark.polygon) placemark.polygon.setMap(map);
       if (placemark.polyline) placemark.polyline.setMap(map);
   }
 } 
```

我试图隐藏标记，但我的方式并不好，因为在我的方式之后我看不到任何标记，这是我的做法：

```
function hideMarkers(){
    for(var i=0; i<hmarkers.length; i++){
        hmarkers[i].setVisible(false);
    }
}    
<?
    $query = mysql_query("SELECT * FROM poi_example");
    while ($row = mysql_fetch_array($query)){
    $name=$row['name'];
    $lat=$row['lat'];
    $lon=$row['lon'];
    $desc=$row['desc'];
    echo ("addMarker($lat, $lon,'<b>$name</b><br/>$desc');\n");
    echo 'hideMarkers();'
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:38:34.803

我建议在开始时将所有标记添加到地图中（但隐藏它们），将对它们的引用保存在数组中。然后当单击多边形时，通过数组测试处理[google.maps.geometry.poly.containsLocation](https://developers.google.com/maps/documentation/javascript/reference#poly)是否为真：

```
function kmlShowPlacemark(pm) {
  if (geoXmlDoc.placemarks[pm].polygon) {
    map.fitBounds(geoXmlDoc.placemarks[pm].polygon.bounds);
    for (var i=0;i<gmarkers.length;i++) {
      if (google.maps.geometry.poly.containsLocation(gmarkers[i].getPosition(),geoXmlDoc.placemarks[pm].polygon)) {
         gmarkers[i].setMap(map);
      } else {
         gmarkers[i].setMap(null);
      }
    }
  } 

   for (var i=0;i<geoXmlDoc.placemarks.length;i++) {
     var placemark = geoXmlDoc.placemarks[i];
     if (i == pm) {
       if (placemark.polygon) placemark.polygon.setMap(null);
       if (placemark.polyline) placemark.polyline.setMap(map);

     } else {
       if (placemark.polygon) placemark.polygon.setMap(map);
       if (placemark.polyline) placemark.polyline.setMap(null);
       }
   }
} 
```

（注意：下面的示例没有隐藏要开始的标记，因为我想知道它们在哪里，单击多边形会隐藏多边形外部的所有标记并（再次）显示其中的标记） [工作示例](http://www.geocodezip.com/geoxml3_test/mini_hr_stanonline_test_mouseover_20130313.html)

要在第一次添加标记时隐藏标记，请从 addMarker 函数中删除“map”选项：

```
function addMarker(lat, lng, info) {
    var pt = new google.maps.LatLng(lat, lng);
    bounds.extend(pt);

    var marker = new google.maps.Marker({
        position: pt,
        icon: icon
    });
// rest of the code stays the same. 
```

# javascript - Safari img 元素不会使用 blob URL 将从服务（例如，Dropbox）检索到的图像呈现为 ArrayBuffer

> ID：15394170
> 
> 赞同：5
> 
> 时间：2013-03-13T19:02:50.753
> 
> 标签：javascript, safari, dropbox

Dropbox 等服务可以下载图像，以各种形式返回文件数据，包括 ArrayBuffer。在 Webkit 中，可以创建一个 blob: URL 引用下载的数据，然后将其设置为 img 元素的`src`属性。

示例： http: [//jsfiddle.net/Jan_Miksovsky/yy7Zs/](http://jsfiddle.net/Jan_Miksovsky/yy7Zs/)将图像的数据作为 ArrayBuffer 检索，然后创建 blob: URL 并将其交给 img 元素。此示例适用于 Chrome，但不适用于 Safari 6.0.2。

根据 Can I Use ( [http://caniuse.com/#feat=bloburls](http://caniuse.com/#feat=bloburls) ) 和其他来源，Safari 6.x 支持创建 blob 对象 URL。并且 Safari 确实支持通过前缀全局 webkitURL 使用 createObjectURL。但是，如果将生成的 blob URL 传递给 img 元素的 src，则不会呈现图像。

Safari 中是否有其他方法可以渲染以这种方式检索到的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-02T10:40:00.247

我刚刚回答了这个问题：[HTML5 iPhone dynamic caching of images](https://stackoverflow.com/questions/3476864/html5-iphone-dynamic-caching-of-images/16881465#16881465)

您可以在其中从 ajax 下载图像并将其转换为 base64 字符串。然后你可以使用这个字符串来加载一个 IMG 元素。

我已经在 safary 6.0.4 中进行了测试，并且可以正常工作。（我不确定在 6.0.2 中）。

这是代码：

```
function _arrayBufferToBase64( buffer ) {
    var binary = '';
    var bytes = new Uint8Array( buffer );
    var len = bytes.byteLength;
    for (var i = 0; i < len; i++) {
        binary += String.fromCharCode( bytes[ i ] );
    }
    return window.btoa( binary );
}

var xhr = new XMLHttpRequest();
xhr.open('GET', 'http://jsbin.com/images/favicon.png', true);
xhr.responseType = 'arraybuffer';

xhr.onload = function(e) {
        if (this.status == 200) {
          var string_with_bas64_image = _arrayBufferToBase64(this.response);
          document.getElementById("img").src = "data:image/png;base64," + string_with_bas64_image;
        }
};

xhr.send(); 
```

你可以在这里测试它：

[http://jsbin.com/ivify/1/edit](http://jsbin.com/ivifiy/1/edit)

# c# - XNA 中的旋转和弧度，Enemy Ai 校正

> ID：15394171
> 
> 赞同：0
> 
> 时间：2013-03-13T19:02:52.780
> 
> 标签：c#, xna, rotation, artificial-intelligence

我的暴民 AI 遇到了麻烦

它工作到一定程度，除了它与我想要的相反，这意味着它向错误的方向转动 180 度

```
 Target = playerST.Posistion;
        Vector2 trivial;
        trivial.X = Posistion.X - Target.X;
        trivial.Y = Posistion.Y - Target.Y;
        instant = ((float)Math.Atan2(trivial.Y, trivial.X)) + 3.141592f; 
```

这告诉我我的目标在哪里并计算我需要旋转到的数字

它的弧度加 3.1etc 就像 180 度，因为这样计算它给我的最小值为 -3.141 或最大值为 3.141，但敌人的旋转是在 0 到 6.28 之间完成的，加上 3.141 使瞬间 = 在敌人旋转的范围，而不是在其下方 3.141

无论如何，这是我陷入困境的部分......实际的旋转

```
 // irrelevant
                if (attack == true)
            {

                Vector2 modelVelocityAdd = Vector2.Zero;

                modelVelocityAdd.Y = -(float)Math.Sin(rotation);
                modelVelocityAdd.X = -(float)Math.Cos(rotation);

                modelVelocityAdd *= (0.00002f * speed);
                if ((((rotation) + 0.2f)) < instant && (rotation - 0.2f) > instant)
                {
                    modelVelocity += modelVelocityAdd;
                }
        // not so irrelvant and needs fixing!
                if (instant < rotation )
                    {
                         rotation -= rotationspeed / 2000;
                    }
                else if (rotation < instant)
                    {
                         rotation += rotationspeed / 2000;
                    } 
```

所以我的问题是我如何阻止它向错误的方向旋转 180 度并真正让它面对玩家而不是面对完全相反的

我不能简单地做下面的事情，因为船被困在 5 度和负 5 度之间来回移动

```
 if (instant < rotation )
                    {
                         rotation += rotationspeed / 2000;
                    }
                else if (rotation < instant)
                    {
                         rotation -= rotationspeed / 2000;
                    } 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:15:13.083

代替

```
 if (instant < rotation )
                {
                     rotation += rotationspeed / 2000;
                }
            else if (rotation < instant)
                {
                     rotation -= rotationspeed / 2000;
                } 
```

尝试

```
rotation = Math.Lerp(rotation, instant, 0.1); 
```

0.1 控制旋转“速度”。使用 lerp 使运动更加自然，并且将解决角度在正负之间摆动的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:35:17.307

我想到了，

```
 trivial.X = Posistion.X - Target.X;
    trivial.Y = Posistion.Y - Target.Y; 
```

错了

```
 trivial.X = Target.X -Posistion.X  ;
        trivial.Y = Target.Y - Posistion.Y ; 
```

谢谢你，没有你的帮助，我永远不会注意到：D

# php - 没有 PHP 的 Facebook 服务器端登录

> ID：15394173
> 
> 赞同：0
> 
> 时间：2013-03-13T19:03:07.863
> 
> 标签：php, python, facebook, web

我正在为一些大学工作做一个项目，并试图将 facebook 与他们的服务器端登录功能集成： [https ://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)

唯一的问题是它对 PHP 的解释，我正在使用 python。我查看了使用重定向如何工作的概述，我打算使用 urllib2 对整个过程向 facebook 发出 HTTP 请求。

谁能给我一个从 PHP 到 Python 的翻译，甚至是描述我必须做的伪代码，因为我不知道所有这些 PHP 函数是做什么的，所以我真的不知道如何编写相当于.

谢谢，山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:21:07.023

我已经在 Ruby 中完成了它，但这看起来是一个好的开始。

[http://facebook-python-library.docs-library.appspot.com/facebook-python/examples/oauth.html](http://facebook-python-library.docs-library.appspot.com/facebook-python/examples/oauth.html)

有人问了类似的问题，似乎有有用的链接

[我应该为 facebook OAuth 和 OpenGraph 使用什么 python 库](https://stackoverflow.com/questions/11355857/what-python-library-i-should-use-for-facebook-oauth-and-opengraph)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:25:14.887

我有一个执行此操作的 python 库：

*   [https://github.com/jvanasco/facebook_utils](https://github.com/jvanasco/facebook_utils)

它也在 PyPi 上。

主文件显示了如何将它集成到服务器端和 Pyramid 模板。在 Django、Flask 中做类似的事情。

# java - 从文件中读取 ascii 字符和整数 (java)

> ID：15394174
> 
> 赞同：0
> 
> 时间：2013-03-13T19:03:08.910
> 
> 标签：java, int, ascii

我正在做一个项目，我的代码必须尽可能高效，并且我需要从文件中读取 ascii 字符和整数。问题（我认为）是当我读取字符时，它以 UTF8 读取，因为它只读取了它应该读取的一半。

我尝试使用 DataInputStream 但它不起作用。我还检查了 RandomAccessFile，但它以 UTF8 读取。当我尝试读取两个字节并将它们转换为 char 时，扫描程序会抛出 InputMismatchException。

是不是唯一的选择是手工完成？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:08:05.113

一次读取一个字节。这将是您想要的价值。例如，使用[RandomAccessFile](http://docs.oracle.com/javase/6/docs/api/java/io/RandomAccessFile.html) `read()`方法：

> read() 从此文件中读取一个字节的数据。该字节以 0 到 255 (0x00-0x0ff) 范围内的整数形式返回。如果还没有输入可用，则此方法会阻塞。

例子：

`int asciiValue randomAccessFile.read();`

然后你可以投射`ìnt`到`char`

`char character = (char) asciiValue;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:32:43.520

我发现了问题所在。问题是，当您使用 BufferedWriter 写入 char 和 int 时，它会将所有内容都转换为 char，这使得无法直接从文件中将 int 作为类型读取。我将尝试使用 DataOutputStream 编写，使用直接写入整数和字符的方法。

# c++ - 在 node.js 绑定中实现继承

> ID：15394176
> 
> 赞同：5
> 
> 时间：2013-03-13T19:03:20.733
> 
> 标签：c++, node.js, v8, prototypal-inheritance

我正在围绕 C++ 库编写 Node.js 绑定。我可以识别 C++ 库中的关键对象，我可以将它们作为类公开给 Node.js（即 ObjectWrap 的派生类）。我还可以看到这些对象之间的继承关系。

如何将`ClassA`,`ClassB`公开`ClassC`为 node.js 类（的派生类`ObjectWrap`）并操作它们的原型（在 v8 C++ 代码中），以便`ClassB`和`ClassC`是派生类`ClassA`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:56:14.480

这可以使用`v8::FunctionTemplate`'s`Inherit`方法完成。[这里](https://developers.google.com/v8/embed#inherit)解释了。这是一个工作示例。

C++ 代码：

```
#include <v8.h>
#include <node.h>

using namespace node;
using namespace v8;

class BaseClass : ObjectWrap
{
public:
  static Persistent<FunctionTemplate> s_ct;
  static void Init(v8::Handle<Object> target)
  {
    Local<FunctionTemplate> t = FunctionTemplate::New(New);

    s_ct = Persistent<FunctionTemplate>::New(t);
    s_ct->InstanceTemplate()->SetInternalFieldCount(1);
    s_ct->SetClassName(String::NewSymbol("BaseClass"));

    NODE_SET_PROTOTYPE_METHOD(s_ct, "getName", getName);

    target->Set(String::NewSymbol("BaseClass"), s_ct->GetFunction());
  }

  BaseClass(){}    
  ~BaseClass(){}

  static v8::Handle<Value> New(const Arguments& args)
  {
    HandleScope scope;
    return args.This();
  }

  static v8::Handle<Value> getName(const Arguments& args)
  {
    HandleScope scope;
    return scope.Close(String::New("Base"));
  }
};

Persistent<FunctionTemplate> BaseClass::s_ct;

class DerivedClass : ObjectWrap
{
public:
  static Persistent<FunctionTemplate> s_ct;
  static void Init(v8::Handle<Object> target)
  {
    Local<FunctionTemplate> t = FunctionTemplate::New(New);

    s_ct = Persistent<FunctionTemplate>::New(t);

    // XXX Inherit from BaseClass
    s_ct->Inherit(BaseClass::s_ct); 

    s_ct->InstanceTemplate()->SetInternalFieldCount(1);
    s_ct->SetClassName(String::NewSymbol("DerivedClass"));

    NODE_SET_PROTOTYPE_METHOD(s_ct, "getAge", getAge);

    target->Set(String::NewSymbol("DerivedClass"), s_ct->GetFunction());
  }

  DerivedClass() {}
  ~DerivedClass() {}

  static v8::Handle<Value> New(const Arguments& args) {
    HandleScope scope;
    return args.This();
  }

  static v8::Handle<Value> getAge(const Arguments& args)
  {
    HandleScope scope;
    return scope.Close(Number::New(42));
  }
};

Persistent<FunctionTemplate> DerivedClass::s_ct;

extern "C" {
  static void init (v8::Handle<Object> target)
  {
    BaseClass::Init(target);
    DerivedClass::Init(target);
  }

  NODE_MODULE(mymodule, init);
} 
```

将其置于标准`node-gyp`配置中，您可以使用以下 javascript 对其进行测试

```
var mymodule = require('./build/Release/mymodule');
var baseObject = new mymodule.BaseClass();
var dervObject = new mymodule.DerivedClass();

console.log(baseObject.getName());
console.log(dervObject.getName(), dervObject.getAge()); 
```

# php - 相当复杂的 .htaccess 通过 PHP 重定向

> ID：15394178
> 
> 赞同：0
> 
> 时间：2013-03-13T19:03:23.303
> 
> 标签：php, .htaccess, redirect

我们最近将所有子目录合并到一个数据库中，我想设置一个重定向，以便用户不会在该子目录中遇到 404。

我们有一个名为 /students/ 的子​​目录，其中包含这样的链接

www.domain.com/students/lab.php?assigment=345

现在有了新的 URL，所有的东西都合并了，我们将拥有相同的页面

www.domain.com/students/lab.php?assigment=11562

因为当我让学生看起来什么都不起作用时，我们使用的是 PHP 框架，所以有没有办法通过 . htaccess 并且只有当它有**学生**目录名称时，我才能在其上运行 PHP 脚本？

我已经创建了一长串从旧 URL 到新 URL 的 301 重定向。因此，只要我能捕获传入的 URL，我就可以轻松完成 301。

感谢您花时间阅读本文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:21:24.437

可能，您可以使用文件或外部程序或脚本[`RewriteMap`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)来实现这一点。[`txt`](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#txt)[`prg`](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#prg)

但是，至少有两个警告

*   它只能在主服务器配置或虚拟主机环境中使用。
*   您必须非常小心您的脚本，因为它可能会严重影响服务器的性能。

# .net - 生成的 wsdl 使用 ssl 的机器位置 - 无论主机标头如何

> ID：15394180
> 
> 赞同：0
> 
> 时间：2013-03-13T19:03:26.210
> 
> 标签：.net, wcf

这似乎是一个相当普遍的问题，但我一直在搜寻，到目前为止我还没有找到适合我的解决方案。

我有一个在 IIS 上运行的 WCF Web 服务 (.svc)，它在 http 上运行得很好。我已经为 http 和 https 设置了绑定。http 绑定不使用主机标头，并且可以完美运行。https绑定之前没有，但我添加了它们，它仍然不起作用。

问题在于wsdl 中的soap:address 位置。

来自 http 的 wsdl（正确）：

```
<wsdl:service name="UserService">
<wsdl:port name="BasicHttpBinding_UserServiceSoap" binding="tns:BasicHttpBinding_UserServiceSoap">
<soap:address location="http://xxx.net/test_ryan/webservices/xx/UserService.svc"/>
</wsdl:port>
</wsdl:service> 
```

来自 https 的 wsdl（不正确）：

```
<wsdl:service name="UserService">
<wsdl:port name="BasicHttpBinding_UserServiceSoap" binding="tns:BasicHttpBinding_UserServiceSoap">
<soap:address location="http://colo01/test_ryan/webservices/xx/UserService.svc"/>
</wsdl:port>
</wsdl:service> 
```

我确实拥有 ssl 证书，因此当我在浏览器中访问 xxx.net 时，我不会收到任何警告。

当我尝试在 https 中从 SoapUI 运行服务时，出现 404 错误。完全相同的请求在 http 版本中运行良好。

我已经将主机头添加到 iis7 https 绑定（我试过 www.xxx.net 和只是 xxx.net）。并运行 iisreset。当我验证时

```
cscript.exe /nologo  %systemdrive%\inetpub\adminscripts\adsutil.vbs get /w3svc/1/SecureBindings 
```

我看到“：443：www.xxx.net”

该服务在 web.config 中没有任何“服务”或“绑定”元素的标准 http 上运行。行为看起来像

```
 <behaviors>      
      <serviceBehaviors>
        <behavior name="">
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />   
          <useRequestHeadersForMetadataAddress />       
        </behavior>
      </serviceBehaviors>
    </behaviors> 
```

我尝试了许多绑定/服务的排列，但没有任何运气。包括 security="none" 和 security="TransportWithMessageCredential" 的绑定。我还尝试设置端点地址，这没有任何效果，以及 serviceMetadata.httpsGetUrl，它完全阻止了 svc/wsdl 的加载。

任何建议将不胜感激！谢谢你。

# javascript - 链 jQ 方法

> ID：15394182
> 
> 赞同：2
> 
> 时间：2013-03-13T19:03:34.200
> 
> 标签：javascript, jquery, methods, chaining

如果我正确理解 jQuery 链接，则列表中的第一个方法会执行，并且必须在下一个方法执行之前完成。因此，我有以下

```
$.fn.reportZebraStriper = function(options) { 
    console.log('reportZebraStriper()');
    return true;
}

//onDom ready events
$(document).ready(function(){

    $("#oom_display_options select")
      .on("change", function(event){
          $('#OOM_vs_Logged').loadUrl(//ajax method call in the global site.js file//);})
      .reportZebraStriper();

}) 
```

在初始页面加载时，一切都按预期执行，我的控制台从 $.fn.reportZebraStripper() 获取打印输出。当我在“oom_display_options”下拉菜单中进行更改时，我的问题出现了，ajax 被触发，内容 DIV 被重新加载，但是 reportZebraStripe() 没有触发后记。

我在这里做错了什么？

* * *

编辑 1：其中 loadURL() 方法定义。它实际上只是 jQ 内置 .ajax() 方法的一个包装器；它在执行 ajax 时会显示一些动画等。

```
$.fn.loadUrl = function(url, dataAjax) {
    var target = this;
    target.addBlockLoadingDiv();

    return $.ajax({
        type: "POST",
        url: url,
        data: dataAjax,
        success: function(data) {
            if (data) {
                target.html(data);
            } else {
                target.text("Unable to display requested data, sorry.");
            }
        },
        error: function(err) {
            target.html(err.response);
        }
    });
}; 
```

jQ 的 load() 方法似乎立即调用执行回调方法（除非我做错了）；这很不幸。是我们需要的。

* * *

编辑 2：针对这个 logi 进行了一个 ajax 调用，当 ajax 调用的 'complete:' 被触发时它调用 $().reportZebraStripper() 方法。不是我正在寻找的解决方案，但它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:12:51.380

尝试`$("#oom_display_options")`通过 id 选择时，您不需要向选择器添加任何类型的容器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:19:04.653

jQuery 不会等待前一个方法执行，然后再触发下一个用于 ajax 调用的方法。由于它们是异步的，它将触发 ajax，然后继续执行链中的下一个方法。

如果要在 ajax 调用后触发函数，请使用进行调用的方法的回调。这看起来像`$(selector).load(target_url, callback)`，在`callback`ajax 完成后将替换为您想要触发的行为。

[有关更多信息，请查看.load() jQuery API 文档](http://api.jquery.com/load/)中的回调部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:29:38.453

请试试

```
$.fn.reportZebraStriper = function(options) { 
    console.log('reportZebraStriper()');
    return true;
}

//onDom ready events
$(document).ready(function(){

    $("#oom_display_options select")
      .on("change", function(event){
          $('#OOM_vs_Logged').loadUrl(/*ajax method call in the global site.js file*/).then(reportZebraStriper);
      });
}); 
```

其中 loadUrl 函数如下所示：

```
function loadUrl() {
    return $.ajax({
                      url: // whatever
    });
} 
```

[编辑] 通常我在 jsfiddle 上检查这些，在上面更新

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T19:33:15.780

你可能想做这样的事情：

```
$.fn.reportZebraStriper = function(options) { 
    console.log('reportZebraStriper()');
    return true;
};

//onDom ready events
$(document).ready(function(){

    $("#oom_display_options select").on("change", function(event){
          $('#OOM_vs_Logged').load(
                "http://jsbin.com/ujabuf/1/edit",
                $.fn.reportZebraStriper()
          );
    });

}); 
```

您可以在以下位置看到工作示例：http: [//jsbin.com/ujabuf/1/edit](http://jsbin.com/ujabuf/1/edit)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T21:52:36.763

我认为您可能只需要有关 Javascript 同步和异步的入门知识。

Javascript 执行单线程并在运行时冻结页面。这意味着在您的 Javascript 运行完成之前，您对页面所做的任何更改都不会呈现，并且在现有 Javascript 运行时触发的任何事件都会等到当前运行的 Javascript 完成。事件可能是点击或 AJAX 调用完成。

正如您所指出的，jQuery 在大多数（但不是全部）调用结束时返回自身（这并没有很好的记录）。您用来绑定到 'change' 事件的 .on() 调用返回 jQuery 对象，因此它们是等价的：

```
$("#oom_display_options select").on("change", function(){})
  .reportZebraStriper(); 
```

和

```
var oom = $("#oom_display_options select");
oom.on("change", function(){});
oom.reportZebraStriper(); 
```

所以实际发生的是创建了一个 jquery 对象，该对象指向 #oom_display_options 标记中的所有选择标记。然后 .on() 调用运行，它为所有选择标记分配一个 onchange 事件 - 每次更改都会运行的代码在传递给 .on('change', ...) 调用的函数中。最后，reportZebraStripper() 对 jquery 对象运行，它碰巧没有做任何有趣的事情。

由于您在事件处理程序中没有 .reportZebraStripe() ，因此它不是更改选择框时将运行的代码的一部分。

很难说你对 .loadUrl() 的调用做了什么，因为这不是基本 jquery 的一部分——也许你或你一起工作的人已经扩展了 .load()。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-04T19:45:52.633

原来 JS 承诺对象是我想要的。我等待一个 promise.success 调用，然后运行需要等待 ajax 完成的所需 jQ 逻辑。

# exception - FILTER 操作期间的 PIG (v0.10.0) 异常：java.lang.Integer 无法转换为 java.lang.String

> ID：15394183
> 
> 赞同：2
> 
> 时间：2013-03-13T19:03:36.377
> 
> 标签：exception, hadoop, mapreduce, apache-pig

这是我的（看似微不足道的）PIG 脚本，后面是它生成的异常：

```
raw_logs = LOAD './Apache-WebLog-Samples.d/access_log.txt' USING TextLoader() AS (line:chararray);

logs = FOREACH raw_logs GENERATE FLATTEN (
    REGEX_EXTRACT_ALL(line, '^(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+\\[([\\w:/]+\\s[+\\-]\\d{4})\\]\\s+"(..*)"\\s+(\\S+)\\s+(\\S+)'))
       AS (remoteAddr:    chararray,
           remoteLogname: chararray,
           user:          chararray,
           date_time:     chararray, 
           request:       chararray,
           httpStatus:          int, <- Here's the problem. But goes away when I set to chararray.
           numBytes:            int);

httpGET200 = FILTER logs BY (request MATCHES '^GET\\s.*') AND (httpStatus == 200);

mylimit = LIMIT httpGET200 40;

DUMP mylimit; 
```

猪脚本

```
java.lang.Exception: java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.String
    at org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:404)
Caused by: java.lang.ClassCastException: java.lang.Integer cannot be cast to java.lang.String

[ ... non meaningful error output removed ... ]

2013-03-13 14:04:10,882 [main] INFO  org.apache.pig.tools.pigstats.SimplePigStats - Script Statistics: 

HadoopVersion   PigVersion  UserId  StartedAt   FinishedAt  Features
2.0.0-cdh4.2.0  0.10.0-cdh4.2.0 nmvega  2013-03-13 14:04:05 2013-03-13 14:04:10 FILTER,LIMIT

Failed!    
Failed Jobs:
JobId   Alias   Feature Message Outputs
job_local1982169921_0001    httpGET200,logs,mylimit,raw_logs        Message: Job failed!    

Input(s):
Failed to read data from "file:///home/user/Dropbox/CodeDEV.d/BIG-DATA-SNIPPETS.d/PIG.d/Apache-WebLog-Samples.d/access_log.txt"

Output(s): 
```

异常信息

除了“httpGET200”关系之外，一切都有效。由于对我来说不明显的原因，“httpStatus == 200”子句导致上述异常。当我删除该条款时，问题就消失了。或者，或者，当我更改架构并将“httpStatus”声明为“chararray”类型而不是“int”类型时（如上所述并且适用于 HTTP 状态代码），问题也消失了......（当然，当我这样做时，我必须编辑关系以插入引号，如下所示：httpStatus == '200'）。

我检查了输入数据文件并验证，对于每一行，与“httpStatus”相对应的字段确实总是一个整数（......嗯，一个表示整数的子字符串）。

顺便说一下，这里是 grunt 报告的模式（即预期的）：

```
grunt> describe httpGET200;
httpGET200: {remoteAddr: chararray,remoteLogname: chararray,user: chararray,date_time: chararray,request: chararray,httpStatus: int,numBytes: int} 
```

我想了解这里发生了什么（我的误解或 PIG 限制）。任何人都可以阐明吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T23:15:24.520

在我看来，如果[REGEX_EXTRACT_ALL](http://pig.apache.org/docs/r0.11.0/func.html#regex-extract-all)将输出模式中的字段设置为 int 将导致稍后`ClassCastException`对该字段执行算术运算。可能是因为所有字段都保留下来，并且在返回的元组中被视为 chararray，尽管给定了模式。

作为一种解决方法，您可以将**所有字段**设置为*chararray*，然后执行显式转换 (conv)：

```
logs = FOREACH raw_logs ....
conv = FOREACH logs generate remoteAddr, remoteLogname, user, date_time, 
         request, (int)httpStatus, (int)numBytes; 
```

然后您可以应用您最初使用的过滤器：

```
httpGET200 = FILTER conv BY (request MATCHES '^GET\\s.*') AND (httpStatus == 200); 
```

[您可以在此](https://issues.apache.org/jira/browse/PIG-1965)票证中找到有关类似问题的更多信息：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T15:24:42.273

我在尝试比较 Pig 脚本中 FILTER 语句中的两个整数时遇到了同样的问题。我发现最优雅的解决方案是使用[GenericInvoker](https://pig.apache.org/docs/r0.11.0/api/org/apache/pig/builtin/GenericInvoker.html)。所以对于你的问题，我会使用：

```
--StringToInt would be func that will invoke valueOf method of Integer class for String arg.
DEFINE StringToInt InvokeForInt('java.lang.Integer.valueOf', 'String');

--Now we can use it in our FILTER statement (without need to make projections in order to get right types schema for your tuples)
httpGET200=FILTER logs BY (request MATCHES '^GET\\s.*') AND StringToInt(httpStatus)== 200; 
```

瞧！

# c# - 使用事件处理程序计算的 BMI 计算器

> ID：15394191
> 
> 赞同：-1
> 
> 时间：2013-03-13T19:03:55.827
> 
> 标签：c#, asp.net, event-handling

所以在我的 BMI 计算器上工作时，我似乎无法让计算部分正常工作。我有三个文本框，其中包含完成计算所需的信息，以英尺为单位的高度、以英寸为单位的高度和以磅为单位的重量。

这是我的代码。我的错误似乎是什么？

```
<form id="US" runat="server" visible="true">
   <div style="background-color:#4DB8FF; width:350px; height:300px; margin:auto; text-align:center; font-family:Arial">
        <h4>
            Body Mass Index Calculator 
            <asp:Button id="btnUS" runat="server" text="US" OnClick="btnUS_Click" /> 
            <asp:Button id="btnMetric" runat="server" Text="Metric" OnClick="btnMetric_Click" /> <br />

            <script runat="server">
                void btnUS_Click(object sender, EventArgs e)
                {
                    this.US.Visible = true;
                    this.Metric.Visible = false;
                }

                void btnMetric_Click(object sender, EventArgs e)
                {
                    this.US.Visible = false;
                    this.Metric.Visible = true;
                }

                void calcUS_Click(object sender, EventArgs e)
                {
                    string operand1 = heightus.Text;
                    string operand2 = heightus1.Text;
                    string operand3 = weightus.Text;

                    string bmi = resultus.Text;

                    double number;

                    bool isOperand1Number = Double.TryParse(operand1, out number);
                    bool isOperand2Number = Double.TryParse(operand2, out number);
                    bool isOperand3Number = Double.TryParse(operand3, out number);

                    if (isOperand1Number && isOperand2Number && isOperand3Number)
                    {
                        bmi = (((operand3 / ((operand1 * 12) + operand2) * (operand1 * 12) + operand2))) * 703);
                    }

                    else
                    {
                        Response.Write("Please type a numeric value into each of the text boxes.");
                    }
                }
            </script>
        </h4>

                  <asp:label ID="lbl1" Text="Height:" runat="server" />
                     <asp:TextBox ID="heightus" runat="server" />feet<br />
                     <asp:TextBox ID="heightus1" runat="server" />inch(es)<br />
                  <asp:Label ID="lbl2" Text="Weight:" runat="server" />
                     <asp:TextBox ID="weightus" runat="server" />lbs<br />
                <br />
                     <asp:Button ID="calcUS" Text="Calculate"  OnClick="calcUS_Click" runat="server" />
                     <asp:Button ID="clearUS" runat="server" Text="Clear"/> 
                <br /><br />
                  <asp:Label ID="lbl3" Text="Results:" runat="server" />
                     <asp:TextBox ID="resultus" runat="server" /> <br />

    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:13:17.200

我认为您没有正确初始化 isOperand1Number isOperand2Number 和 isOperand3Number 布尔值。放置一些调试语句并一路输出您的结果，这样您就可以看到失败的地方。

您可能还想将强制转换字符串 bmi,operand1,2,3 键入整数。当您尝试添加它们并在以下位置计算它们时，它们会保持字符串：

```
 bmi = (((operand3 / ((operand1 * 12) + operand2) * (operand1 * 12) + operand2))) * 703); 
```

# android - EditText 没有打开键盘

> ID：15394192
> 
> 赞同：1
> 
> 时间：2013-03-13T19:04:00.390
> 
> 标签：android, android-edittext, android-softkeyboard

我`EditText`的 s`etDetailsNOte`和`etTitleNote`不打开键盘打字。请建议我可以改变什么。我在这里找不到任何错误。

```
popUpAddNote = new PopupWindow(this);
mainLayout = new LinearLayout(this);
etTitleNote = new EditText(this);
etDetailsNOte = new EditText(this);
bAdd = new Button(this);

bAddNewNote.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {
        if (click) {
            popUpAddNote.showAtLocation(mainLayout,Gravity.CENTER, 10, 10);
            popUpAddNote.update(50, 50, 250, 200);
            click = false;
        } else {
            popUpAddNote.dismiss();
            click = true;
        }
    }
});

params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
mainLayout.setOrientation(LinearLayout.VERTICAL);
etTitleNote.setHint("Title");
etTitleNote.setWidth(250);
mainLayout.addView(etTitleNote,params);
etDetailsNOte.setHint("Details");
etDetailsNOte.setInputType(InputType.TYPE_CLASS_TEXT
        | InputType.TYPE_TEXT_VARIATION_PASSWORD);
etDetailsNOte.setWidth(250);
etDetailsNOte.setHeight(150);
mainLayout.addView(etDetailsNOte,params);
bAdd.setText("Add");
bAdd.setWidth(250);
mainLayout.addView(bAdd,params);
popUpAddNote.setContentView(mainLayout);
// setContentView(mainLayout);visible 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:14:51.303

在活动清单中添加以下内容

android:windowSoftInputMode="stateAlwaysVisible"

# jquery - 在这个例子中做图像变亮的最简单方法

> ID：15394193
> 
> 赞同：-2
> 
> 时间：2013-03-13T19:04:12.310
> 
> 标签：jquery, css

这里有一个非常简单的问题。我们有一些静态图像，想让它们更有趣。一件事对`lighten`他们来说是某种类型的覆盖。例如，将鼠标悬停在此处的其中一张图片上： [http](http://www.cnn.com/interactive/2013/02/world/pope-contenders/index.html) ://www.cnn.com/interactive/2013/02/world/pope-contenders/index.html （只是灯光效果）。最好在 jquery 中实现这一目标的最简单策略是什么？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:11:05.623

你只能用 css 来做

```
.myDiv:hover {
    background-image:url(/path/to/transparent.png); /* width 1px, height 1px, the color and opacity you want*/
    background-repeat:repeat;
} 
```

不透明度的问题是它在 ie7 中不起作用（也许还有 ie8）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:13:02.203

你必须把两个div放在一起。

或者，您也可以`<img/>`在容器内放置图片。

```
<div class="img-container">
   <div class="img-overlay"></div>
</div> 
```

这是您需要的 css：（我假设您所有的图像都具有与您发布的链接中相同的高度和宽度。或者您可以设置相对（以 % 为单位）css 属性。）

```
.img-container {
  position: relative;
  width: 100px; /* your images widths */
  height: 200px; /* your images heights */
  background: url('path/to/your/image.png');
}

.img-overlay {
  position: absolute;
  z-index: 5; /* it has just to be one more than the one above */
  width: 100px; /* your images widths */
  height: 200px; /* your images heights */
  display: none;
  background-color: '#333333'; /* your color of choice */
  opacity: 0.8;
} 
```

用 jQuery 来做：

```
$('.img-container').mouseEnter(function() {
    $(this).children('.img-overlay').fadeIn('fast');
}).mouseLeave(function() {
    $(this).children('.img-overlay').fadeOut('fast');    
}); 
```

请记住，您应该为 IE 使用供应商前缀和过滤器，以使其在旧浏览器中工作。确保也为非常旧的 IE 和 Safari 版本停用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T19:13:14.617

这种效果可以通过css本身轻松实现。试试这个css。

```
img
{
opacity:1.0;
}
img:hover
{
opacity:0.4;
} 
```

对于 IE8 及更高版本使用过滤器：`alpha(opacity=x);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T19:16:03.047

当应用于元素本身时，不透明度实际上不会使悬停状态“更轻”。您可以做的是负边距或 z-index 一个白色 div 以覆盖 img。这样，您就可以真正在悬停时获得**白色淡入淡出。**下面应该作为一个修复，即使没有白色背景，也能始终实现“变亮”效果。

看到这个工作[小提琴](http://jsfiddle.net/p5hy2/)

HTML

```
<h3>Just Opacity</h3>
<a href="#" class="one"><img src="http://userserve-ak.last.fm/serve/252/15767501.jpg" /></a>

<h3>With an overlay</h3>
<a href="#" class="two"><img src="http://userserve-ak.last.fm/serve/252/15767501.jpg" /></a>
<a class="three">&nbsp;</a> 
```

CSS

```
body {
    background: #262626;
}
h3 {
    color: white;
}
a:hover.one {
    opacity: .5;
}
.two {

}
a.three {
    width: 252px;
    height: 250px;
    background: #FFF;
    display: block;
    margin: -254px 0 0 0;
    position: relative;  
    opacity: .0;
}
a:hover.three {
    opacity: .7;
} 
```

# android - 检查 Dropbox 上的本地文件和在线文件是否相同

> ID：15394196
> 
> 赞同：2
> 
> 时间：2013-03-13T19:04:20.660
> 
> 标签：android, file, sync, dropbox

我正在将我的应用程序备份到 Dropbox。

是否可以检查本地文件（新文件）是否与服务器上的文件相同？

我的想法是带有文件哈希的第二个文件，但我想知道是否已经有更简单或更常见的方法来做到这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-06T23:02:58.013

如果您使用的是 DropBox Sync API，那么 AFAICT 您可以调用相关文件的 [DBFileStatus cached] 以查看它是否相同，Fergal

# php - 修复 PHP 中的相对链接

> ID：15394198
> 
> 赞同：-1
> 
> 时间：2013-03-13T19:04:22.330
> 
> 标签：php, url-rewriting

我正在解析一个外部文档并将其中的所有链接设为绝对链接。例如：

```
 <link rel="stylesheet" type="text/css" href="/css/style.css" /> 
```

将被替换为：

```
 <link rel="stylesheet" type="text/css" href="http://www.hostsite.com/css/style.css" /> 
```

其中[http://www.hostsite.com](http://www.hostsite.com)是文档的基本 URL。

这是我尝试过但失败的：

```
 $linkfix1 = str_replace('href=\"\/', 'href=\"$url\/', $code); 
```

网站上有几个问题与对单个 URL 字符串进行此替换有关，但我找不到任何适用于文档中嵌入的 URL 的问题。关于如何使所有这些链接成为绝对的，有什么好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:07:29.277

您不需要在使用单引号的字符串中转义双引号。

您也根本不需要转义正斜杠。

你只是想要：

```
str_replace('href="', 'href="http://hostsite.com', $replace_me); 
```

为了安全起见，不要用主机站点替换每个链接：

```
str_replace('href="/css/', 'href="http://hostsite.com/css/', $replace_me); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-09T19:58:50.693

公共服务公告：不要使用正则表达式重写格式化文档的元素。

执行此操作的正确方法是将文档加载为实体（`DOMDocument`或`SimpleXMLElement`）并根据节点和值进行处理。最初的解决方案也没有处理`src`基本相对 URL（例如`/css/style.css`）的标签或解析。

这是一个最合适的解决方案，如果需要可以扩展：

```
# Example URL
$url = "http://www.stackoverflow.com/";

# Get the root and current directory
$pattern = "/(.*\/\/[^\/]+\/)([^?#]*\/)?/";
/*  The pattern has two groups: one for the domain (anything before
    the first two slashes, the slashes, anything until the next slash,
    and the next slash) and one for the current directory (anything
    that isn't an anchor or query string, then the last slash before
    any anchor or query string).  This yields:
    - [0]: http://stackoverflow.com/question/123412341234
    - [1]: http://stackoverflow.com/
    - [2]: question/
    We only need [0] (the entire match) and [1] (just the first group).
*/
$matches = array();
preg_match($pattern, $url, $matches);
$cd = $matches[0];
$root = $matches[1];

# Normalizes the URL on the provided element's attribute
function normalizeAttr($element, $attr){
    global $pattern, $cd, $root;
    $href = $element->getAttribute($attr);
    # If this is an external URL, ignore
    if(preg_match($pattern, $href))
        return;
    # If this is a base-relative URL, prepend the base
    elseif(substr($href, 0, 1) == '/')
        $element->setAttribute($attr, $root . substr($href, 1));
    # If this is a relative URL, prepend the current directory
    elseif(substr($href, 0, strlen($cd)) != $cd)
        $element->setAttribute($attr, $cd . $href);
}

# Load in the data, ignoring HTML5 errors
$page = new DOMDocument();
libxml_use_internal_errors(true);
$page->loadHTMLFile($url);
libxml_use_internal_errors(false);
$page->normalizeDocument();

# Normalize <link href="..."/>
foreach($page->getElementsByTagName('link') as $link)
    normalizeAttr($link, 'href');
# Normalize <a href="...">...</a>
foreach($page->getElementsByTagName('a') as $anchor)
    normalizeAttr($anchor, 'href');
# Normalize <img src="..."/>
foreach($page->getElementsByTagName('img') as $image)
    normalizeAttr($image, 'src');
# Normalize <script src="..."></script>
foreach($page->getElementsByTagName('script') as $script)
    normalizeAttr($script, 'src');

# Render normalized data
print $page->saveHTML(); 
```

# java - 为什么java说我没有初始化变量？

> ID：15394201
> 
> 赞同：2
> 
> 时间：2013-03-13T19:04:28.910
> 
> 标签：java

下面的代码给了我一个指向“return mon;”语句中的“m”的错误。当它在此方法开始时非常清楚地初始化时，它指出“变量 mon 可能尚未初始化”。它必须是超级简单的东西，我只是不明白！谢谢你。

```
public String monthName(int month)
{
    String mon;
    switch (month)
    {
        case 1:
            mon = "January";
            break;
        case 2:
            mon = "February";
            break;
        case 3:
            mon = "March";
            break;
        case 4:
            mon = "April";
            break;
        case 5:
            mon = "May";
            break;
        case 6:
            mon = "June";
            break;
        case 7:
            mon = "July";
            break;
        case 8:
            mon = "August";
            break;
        case 9:
            mon = "September";
            break;
        case 10:
            mon = "October";
            break;
        case 11:
            mon = "November";
            break;
        case 12:
            mon = "December";
            break;
    }
    return mon;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-13T19:05:13.057

谁说它`month`总是 1 到 12 之间的整数？编译器当然不能保证。

要么初始化`mon`为 null，要么`default`在你的`switch`. （此外，您可以直接返回月份名称，而不是将它们设置在临时变量中。）

或者，一个更简单的解决方案可能是

```
String[] monthNames = {"January", "February", ..., "December"};
return monthNames[month - 1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:08:34.287

您应该`mon`在`switch (month)`. 此外，您应该为其分配空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:22:04.033

如果月份数不正确，则返回 null 仅在调用者希望发生这种情况并准备检查 null 时才有用。

如果调用例程不检查 null 返回，那么您应该在默认情况下抛出 RuntimeException。这比允许代码在一段时间后因错误的月份名称导致的空指针异常而失败要好得多！

例如..

```
default:
  throw new RuntimeException("Invalid month number "+ month); 
```

这也将阻止编译器抱怨，因为没有办法在未初始化 mon 的情况下访问 return 语句。

# .net - vb.net 如果速记

> ID：15394203
> 
> 赞同：21
> 
> 时间：2013-03-13T19:04:31.597
> 
> 标签：.net, vb.net

有没有办法使用速记来做这样的事情？

```
If Not txtBookTitle.Text = String.Empty Then
  objBook.DisplayName = txtBookTitle.Text
End If 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-13T19:08:30.040

```
objBook.DisplayName = If(Not (txtBookTitle.Text = String.Empty), txtBookTitle.Text, objBook.DisplayName) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-13T19:13:11.007

if 语句的简写有两个版本。If(expression, true part, false part) 或 If(expression, false part)

```
objBook.DisplayName = If(String.IsNullOrEmpty(txtBookTitle.Text), txtBookTitle.Text) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-13T19:19:47.673

以下代码类似于您的三行代码：

```
objBook.DisplayName = IIF(String.IsNullorEmpty(txtBookTitle.Text),objBook.DisplayName, txtBookTitle.Text) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-13T19:31:18.800

这是最短的版本（81 个字符）：

```
If txtBookTitle.Text <> String.Empty Then objBook.DisplayName = txtBookTitle.Text 
```

我更喜欢它的调试能力。也很容易转换为 C#。

# c# - 调用 savechanges 时实体框架重复

> ID：15394207
> 
> 赞同：6
> 
> 时间：2013-03-13T19:04:35.883
> 
> 标签：c#, entity-framework, ef-code-first

我首先使用 entityframework 5 代码，我有一个这样的模型。

```
class Product {
    public Product() {
        Fabrics = new BindingList<FabricLineItem>();
    }
    ...
    public virtual ICollection<FabricLineItem> Fabrics { get;set; }
}

class FabricLineItem {
    [ForeignKey("Fabric")]
    public int FabricId { get; set; }  
    public virtual Product Product { get;set; }
    public virtual Fabric Fabric { get;set; }  
}

class Fabric {
    ...
} 
```

我的数据库中已经有织物。我创建了一个新的产品对象并将一些 fabriclineitems 添加到集合中。当我尝试保存产品时，它会复制数据库中的结构并在调用后将其引用到新的

```
 DataContext.SaveChanges(); 
```

在调用 savechanges 之前，调试器中的值在调用之后是否正确？知道为什么我会出现这种奇怪的行为吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-13T19:55:31.573

我还遇到了 EF 在要添加到数据库的另一个新对象中引用该项目时无法识别该项目已经存在的问题。

@NeilThompson 给了我上面如何解决这个问题的线索：

您需要将现有实体附加到上下文，以便它知道它已经存在：

例如：

```
context.Fabrics.Attach(product.Fabric); 
context.Products.Add(product);
context.SaveChanges();

return organisation; 
```

我从这里得到这个：

“如果你有一个你知道数据库中已经存在但当前没有被上下文跟踪的实体，那么你可以告诉上下文使用 DbSet 上的 Attach 方法跟踪实体。实体将处于未更改状态上下文。”

[http://blogs.msdn.com/b/adonet/archive/2011/01/29/using-dbcontext-in-ef-feature-ctp5-part-4-add-attach-and-entity-states.aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/29/using-dbcontext-in-ef-feature-ctp5-part-4-add-attach-and-entity-states.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T08:37:22.053

我怀疑上下文不知道 Fabrics 不是新项目 - 所以它添加/插入它们。

如果您将面料附加到 DataContext（作为 Unchanged/NotModified） - 或从数据库中选择它们，那么当调用 SaveChanges() 时，上下文知道现有的 Fabric 对象，然后可以为新的 FabricLineItem 创建导航关系而无需创建一种新面料

EF 比它看起来要“笨”得多——你真的需要告诉它几乎所有的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:37:46.873

根据评论中的其他信息：您需要将 FabricLineItemID（主键）添加到您的 FabricLineItem 类/实体并删除 FabricId（EF 将为您创建一个外键）。当你创建一个新的 FabricLineItem 时，要与一个 Product 关联，从数据库中获取一条 Fabric 记录，然后将其与新创建的 FabricLineItem 关联，然后获取该产品并将其与 FabricLineItem 关联。您无需在 Product 的构造函数中创建新列表，其余的由 EF 完成。

# java - 如何访问球衣组件中的 Mule 消息属性

> ID：15394208
> 
> 赞同：1
> 
> 时间：2013-03-13T19:04:38.503
> 
> 标签：java, jersey, mule

我正在使用 Jersey 模块，谁能告诉我如何从球衣组件中访问 mule 消息属性？

我需要访问存储在消息属性中的对象之一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:19:29.247

我检查了源代码，至少在 3.3.1 中，Mule 似乎没有注入任何 custom `@Context`，这可能包括`MuleEvent`（这个消息及其属性）。

所以我唯一能想到的就是使用**已弃用**的静态访问器来访问飞行中的事件：`org.mule.RequestContext.getEvent()`.

MuleSoft 可能会随时删除它，因此这不是未来的证据。希望当他们放弃它时，他们还将提供可用于 JAX-RS 资源的替代品。

# google-chrome - Chrome堆分析器中对象标题的黄色背景是什么意思？

> ID：15394212
> 
> 赞同：23
> 
> 时间：2013-03-13T19:04:43.277
> 
> 标签：google-chrome, heap-memory, developer-tools, heap-profiling

试图了解 Chrome 开发人员工具中的堆分析器。我在快照中看到了几个可到达的对象，其中一些具有黄色背景，而另一些则没有。这是什么意思？有什么不同？

在这种情况下，颜色图例并不完全有用，因为它本身具有黄色背景 (wtf)。

![堆快照](../Images/f0dea22ecdb8ad23ed356af0d10cf026.png)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-11T18:27:32.373

好的，原来黄色背景意味着拥有它的对象上有一个 JavaScript 句柄，或者可以说可以从 JavaScript 访问，而没有背景（或白色）的对象不能从 JavaScript 访问，但仍然可以访问从图的根。

最有趣的似乎是一个带有红色背景的物体。红色背景意味着拥有它的对象是分离的 DOM 树的一部分。所以它基本上是一个 DOM 元素，它不能从根节点访问，但被其他一些对象引用，而这些对象又可以从 JavaScript 访问（具有黄色背景）。

Addy Osmani[精彩文章的](https://addyosmani.com/blog/taming-the-unicorn-easing-javascript-memory-profiling-in-devtools/)简短引述：

> **问：我注意到堆快照中有一些 DOM 节点，其中一些以红色突出显示，并表示为“分离的 DOM 树”，而另一些则为黄色。这是什么意思？**
> 
> 您会注意到几种不同颜色的节点。红色节点没有从它们那里直接引用 JavaScript，但是因为它们是分离的 DOM 树的一部分，所以它们是活跃的。树中可能有一个从 JavaScript 引用的节点（可能作为闭包或变量），但巧合的是，它阻止了整个 DOM 树被垃圾收集。
> 
> 然而，黄色节点确实直接引用了 JavaScript。在同一个分离的 DOM 树中查找黄色节点以定位 JavaScript 中的引用。应该有一个从 DOM 窗口到元素的属性链（例如*window.foo.bar[2].baz*）。

# c - c中的整数幂

> ID：15394216
> 
> 赞同：2
> 
> 时间：2013-03-13T19:04:54.697
> 
> 标签：c, integer

我一直在研究一些基本的编码，我正在努力找出扫描到整数的正确方法，第一个是我的 x 变量，第二个是 x 被提升到的 n。我尝试 5^5 并使用我当前的代码返回 -287648。

```
#include <stdio.h>
#include <math.h>

void x_to_the_n (void)
{
    int x=0;
    int n =0;
    long int y;
    printf("Enter a integer for X and N\n");
    scanf("%i\n%i\n",&x,&n);
        y=pow(x,y);
        printf("%i \n",y);
}

int main(void)
{
    x_to_the_n ();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T19:06:37.413

我很确定你的意思是：

```
y = pow(x, n);
          ~~ 
```

* * *

你会得到一个“奇怪”的结果，因为`y`它从来没有被初始化为任何东西；你正在提升`x`（一些垃圾）的力量并把垃圾拿出来。

请注意，正如@0A0D 在评论中建议的那样，如果您要使用更多描述性变量，这个问题会更加明显：

```
int base = 0;
int exponent = 0;
long int result;
printf("Enter the base and exponent, on separate lines\n");
scanf("%i\n%i\n", &base, &exponent);
result = pow(base, result);
                   ~~~~~~~ oops! 
```

* * *

此外，正如@icepack 所提到的，因为`y`是 a `long int`，格式应该是`%li`（不是`%i`）：

```
printf("%li\n", y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:08:29.370

您正在使用`y`未初始化为`pow()`函数参数的那个。

这会导致结果溢出。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-12-22T07:20:38.237

如果您需要一个函数来进行整数求幂，您可以尝试这样的事情

```
#include <stdio.h>
unsigned int_pow(int n, unsigned x);
int main(void)
{
    int n, x;    
    printf("Enter an integer (n) followed by the power (x) to raise to: ");
    scanf("%i %i", &n, &x);    
    printf("%i^%i = %i\n", n, x, int_pow(n, x));    
    return 0;
}
unsigned int_pow(int n, unsigned x)
{
    unsigned i, a = n;
    switch (x)
    {
      case 0:
        return 1;
      case 1:
        return n;
      default:
        for (i = 1; i < x; ++i) {
             a *= n;
        }
        break;
    }
    return a;
} 
```

您可能需要添加一些代码来检查传递给函数的错误值。大指数将溢出 unsigned int 数据类型。您可以编写函数以返回 unsigned long 并为形式参数 x 采用 unsigned long 来处理更大的数字，但如果您知道您将处理大量数字，您可能应该使用浮点类型。

如果您知道返回值必须用作整数类型，那么此代码运行良好并保存任何类型转换。希望它有所帮助。

# python - 在没有别名发件人的情况下发送重复的电子邮件

> ID：15394217
> 
> 赞同：1
> 
> 时间：2013-03-13T19:04:58.407
> 
> 标签：python, email, smtp, mailchimp, sendgrid

我需要发送大约 1,000 封电子邮件。这些电子邮件是半个性化的，虽然足够通用，可以继承默认模板。

这在 SendGrid 中很容易做到，只需遍历一个`for`循环并向每个收件人发送一封电子邮件。

但是，当在 SendGrid 中发送某些内容时，它会通知收件人（如果他们查看）该电子邮件不是来自个人邮箱，而是通过程序邮寄的。如果您尝试个性化电子邮件，这看起来很糟糕。

目前，我正在手动发送电子邮件（从模板复制和粘贴，然后更改必要的部分）。有没有办法在**不**泄露电子邮件不是从个人收件箱发送的事实的情况下自动化这个过程（或伪造的方法）？

从 gmail 复制并粘贴：

```
from:        Delivery Notification <delivery@example.net> via sendgrid.me 
to:          recipient@example.net
date:        Thu, Mar 14, 2013 at 9:55 AM
subject:     Some Subject
mailed-by:   sendgrid.info
signed-by:   sendgrid.me 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T04:23:59.383

问题是您的白标设置配置错误。您可以使用 SendGrid 仪表板下的白标签向导或按照文档进行操作：

> [http://sendgrid.com/docs/User_Guide/whitelabel_wizard.html](http://sendgrid.com/docs/User_Guide/whitelabel_wizard.html)

如果您需要帮助，请联系我们的支持团队！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T07:19:03.483

试试[Mandrill API](https://mandrillapp.com/api/docs/)。它由 MailChimp 制作，但更像 SendGrid。

# android - DocumentBuilder 解析来自 DefaultHttpClient 但不是来自更快的 HttpURLConnection 的响应

> ID：15394227
> 
> 赞同：1
> 
> 时间：2013-03-13T19:05:18.467
> 
> 标签：android, xml, httpclient

我有以下类'MainActivity'，它有2个方法downloadPageA和downloadPageB，一旦下载了内容，它们都会通过http连接检索内容，XMLfromString方法尝试将其解析为Document-Object。

**问题：** downloadPageA 按预期工作，但 downloadPageB 在解析时崩溃。

**班级：**

```
package com.example.testhttp;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.StringReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.ProtocolException;
import java.net.URL;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.TransformerFactoryConfigurationError;  

import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.w3c.dom.Document;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException; 

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            new Worker().execute("");
    }
    public static Document XMLfromString(String v) {
            Document doc = null;
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            try {
                    DocumentBuilder db = dbf.newDocumentBuilder();
                    InputSource is = new InputSource();
                    is.setCharacterStream(new StringReader(v));
                    doc = db.parse(is);
            } catch (ParserConfigurationException e) {
                    e.printStackTrace();
            } catch (SAXException e) {
                    e.printStackTrace();
            } catch (IOException e) {
                    e.printStackTrace();
            }
            return doc;
    }

    public static String inputStreamToString(InputStream is) {
            String s = "";
            String line = "";
            BufferedReader rd = null;
            rd = new BufferedReader(new InputStreamReader(is));
            try {
                    while ((line = rd.readLine()) != null) {
                            s += line;
                    }
            } catch (IOException e) {
                    e.printStackTrace();
            }
            return s;
    }
    public static String downloadPageA(String url) {
            HttpClient httpclient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            HttpResponse response = null;
            try {
                    response = httpclient.execute(httpGet);
                    return inputStreamToString(response.getEntity().getContent());
            } catch (ClientProtocolException e) {
            } catch (IOException e) {
            } catch (IllegalStateException e1) {
            } catch (TransformerFactoryConfigurationError e1) {
            }
            return null;
    }
    public static String downloadPageB(String url) {
            HttpURLConnection connection = null;
            URL serverAddress = null;
            try {
                    serverAddress = new URL(url);
                    connection = null;
                    connection = (HttpURLConnection) serverAddress.openConnection();
                    connection.setRequestMethod("GET");
                    connection.setReadTimeout(10000);
                    connection.connect();
                    return inputStreamToString(connection.getInputStream());
            } catch (MalformedURLException e) {
                    e.printStackTrace();
            } catch (ProtocolException e) {
                    e.printStackTrace();
            } catch (IOException e) {
                    e.printStackTrace();
            } finally {
                    connection.disconnect();
                    connection = null;
            }
            return "";
    }
    private class Worker extends AsyncTask<String, Void, String> {
            @Override
            protected String doInBackground(String... str) {
                    @SuppressWarnings("unused")
                    Document domA = XMLfromString(downloadPageA("http://en.wikipedia.com/wiki/Mario"));
                    @SuppressWarnings("unused")
                    Document domB = XMLfromString(downloadPageB("http://en.wikipedia.com/wiki/Mario"));

                    return "";
            }

            @Override
            protected void onPostExecute(String result) {
            }
            @Override
            protected void onPreExecute() {
            }
            @Override
            protected void onProgressUpdate(Void... values) {
            }
    }
    } 
```

**堆栈跟踪：**

```
03-13 19:39:06.352: W/System.err(28733):    org.xml.sax.SAXParseException: Unexpected <! (position:START_DOCUMENT null@1:1 in java.io.StringReader@4166bfd0) 
03-13 19:39:06.352: W/System.err(28733):    at org.apache.harmony.xml.parsers.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:146)
03-13 19:39:06.352: W/System.err(28733):    at com.example.testhttp.MainActivity.XMLfromString(MainActivity.java:64)
03-13 19:39:06.352: W/System.err(28733):    at com.example.testhttp.MainActivity$Worker.doInBackground(MainActivity.java:119)
03-13 19:39:06.352: W/System.err(28733):    at com.example.testhttp.MainActivity$Worker.doInBackground(MainActivity.java:1)
03-13 19:39:06.352: W/System.err(28733):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-13 19:39:06.352: W/System.err(28733):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-13 19:39:06.352: W/System.err(28733):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-13 19:39:06.352: W/System.err(28733):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-13 19:39:06.352: W/System.err(28733):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-13 19:39:06.352: W/System.err(28733):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-13 19:39:06.362: W/System.err(28733):    at java.lang.Thread.run(Thread.java:856) 
```

我想使用 HttpUrlConnection，它更快，并且 android 团队建议使用它而不是 HttpClient。对此错误的解释将非常好！

马里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:02:25.277

我想到了！*downloadPageA*和*downloadPageB*没有得到相同的结果，因为它们使用不同的用户代理字符串！

在*downloadPageB*我用过：

```
connection.setRequestProperty("User-Agent","Apache-HttpClient/UNAVAILABLE (java 1.4)"); 
```

*在方法downloadPageA*中将用户代理设置为 HttpClient 的用户代理。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T10:08:35.587

您应该考虑为您的 REST 请求使用 Android 服务。[RoboSpice](https://github.com/octo-online/robospice)提供：

*   执行请求的 Android 服务，比异步任务好得多（您是否曾尝试在请求期间旋转您的设备？？）
*   缓存
*   如果你使用 SpringAndroid 模块，解析会更容易......

# c# - 使用列表框读取 XML 文档

> ID：15394228
> 
> 赞同：0
> 
> 时间：2013-03-13T19:05:18.810
> 
> 标签：c#, xml, listbox

我有一个名为 sms.xml 的 xml 文档，其中数据存储如下：

```
<sms address="+995555777777" time="Mar 12, 2013 5:08:09 PM" date="1363093689732" type="2" body="blah blah blah? :D" read="1" service_center="" name="name surname" /> 
```

这是一条短信，我有超过 1000 条短信，所以我想按名称或地址（没关系）将它们加载到列表框中，当我单击其中一条时，我想显示所选短信的正文。这是我的代码：

```
XmlDocument xmlDoc = new XmlDocument();

    public void loadXML()
    {
        xmlDoc.Load("sms.xml");

        XmlNodeList smss = xmlDoc.SelectNodes("//sms");

        foreach (XmlNode sms in smss)
        {
            listBox1.Items.Add(sms.Attributes["address"].Value);
        }

    }

    private void button1_Click(object sender, EventArgs e)
    {
        loadXML();
    }

    private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        XmlNode node = xmlDoc.SelectSingleNode(string.Format("sms[@name='{0}']", listBox1.SelectedItem));

        txtName.Text = node.Attributes["body"].Value;

    } 
```

它返回错误：“对象引用未设置为对象的实例。” 在 txtName.text 行上。你能帮我吗？

ps对不起我的英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:26:35.057

这可能是语法问题，请尝试以下操作：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    XmlNode node = xmlDoc.SelectSingleNode(string.Format("//sms[@name='{0}']", listBox1.SelectedItem));
    txtName.Text = node.Attributes["body"].Value;
} 
```

注意前导`//`。

# wxpython - WxPython 加载文本

> ID：15394229
> 
> 赞同：0
> 
> 时间：2013-03-13T19:05:21.170
> 
> 标签：wxpython

所以我想知道是否有人知道如何将文本文件中的文本加载到框架上。我的应用程序加载一个 Drum Notation 和一个与 Notation 匹配的 Drum 声音文件，并将它们一起加载。现在我需要它加载一些文本来解释符号，它应该将文本与图像和声音文件一起加载。

```
def loadImage(self, event):
        self.image_file = self.images.next()
        print(self.image_file)
        image_file = os.path.join(IMAGE_DIR, self.image_file)
        img = wx.Image(image_file, wx.BITMAP_TYPE_ANY)
        width = img.GetWidth()
        height = img.GetHeight()
        self.imageCtrl.SetBitmap(wx.BitmapFromImage(img)) 
```

这是加载图像的代码。您还可以循环浏览每个图像和声音文件。

无论如何，有没有人有办法添加到代码来加载文本？

```
def loadImage(self, event):
self.image_file = self.images.next()
print(self.image_file)
image_file = os.path.join(IMAGE_DIR, self.image_file)
img = wx.Image(image_file, wx.BITMAP_TYPE_ANY)
width = img.GetWidth()
height = img.GetHeight()
self.imageCtrl.SetBitmap(wx.BitmapFromImage(img))

def previousPicture(self, event):
    self.image_file = self.images.prev() 
    print(self.image_file)
    image_file = os.path.join(IMAGE_DIR, self.image_file)
    img = wx.Image(image_file, wx.BITMAP_TYPE_ANY)
    img = img.Scale(680,143)
    self.imageCtrl.SetBitmap(wx.BitmapFromImage(img))

 def onPlaySound (self, event):
    sound_file, ext = os.path.splitext(self.image_file)
    sound_file = os.path.join(SOUND_DIR, sound_file + '.wav')
    print(sound_file)
    sound = wx.Sound(sound_file)
    sound.Play(wx.SOUND_ASYNC)

class DIter:
#"Iterable with next and previous"
 def __init__(self, ItemList):
    #"Creator"
    self.ItemList = ItemList
    self.Index = -1
    self.ListEnd = len(ItemList)

 def next(self):
     # """ Return the next item """
    self.Index += 1
    self.Index %= self.ListEnd # or to avoid wrapping self.Index = min([self.Index,   self.ListEnd-1])
    return self.ItemList[self.Index]

 def prev(self):
      #""" Return the previous item """
    self.Index -= 1
    if self.Index < 0:
        self.Index = self.ListEnd-1 # or to avoid wrapping self.Index = 0
    return self.ItemList[self.Index] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:02:58.080

添加一个 wx.TextCtrl，可能带有 wx.TE_MULTILINE 标志并使用文本更新它。您只需将文本读入一个变量，然后通过其 SetValue() 方法设置 TextCtrl 的值。

wxPython 演示中有示例，可以从 wxPython 网站下载。

这是一个有效的例子：

```
 import glob
import wx

########################################################################
class MainPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)
        self.textFiles = glob.glob(r'C:\Users\mdriscoll\Documents\wx_testing\*.txt')
        self.currentFile = -1
        self.totalFiles = len(self.textFiles)

        mainSizer = wx.BoxSizer(wx.VERTICAL)
        btnSizer = wx.BoxSizer(wx.HORIZONTAL)

        self.txt = wx.TextCtrl(self, style=wx.TE_MULTILINE)
        prevBtn = wx.Button(self, label="Prev")
        prevBtn.Bind(wx.EVT_BUTTON, self.onPrev)
        nextBtn = wx.Button(self, label="Next")
        nextBtn.Bind(wx.EVT_BUTTON, self.onNext)

        btnSizer.Add(prevBtn, 0, wx.ALL|wx.CENTER, 5)
        btnSizer.Add(nextBtn, 0, wx.ALL|wx.CENTER, 5)
        mainSizer.Add(self.txt, 1, wx.ALL|wx.EXPAND, 5)
        mainSizer.Add(btnSizer)

        self.SetSizer(mainSizer)

    #----------------------------------------------------------------------
    def onPrev(self, event):
        """"""
        print self.currentFile
        if self.currentFile != -1:
            if self.currentFile == self.totalFiles:
                # need to subtract one to get the last element in the list
                self.currentFile -= 1
                fpath = self.textFiles[self.currentFile]
            else:
                fpath = self.textFiles[self.currentFile]

            # read file
            with open(fpath) as fh:
                data = fh.read()

            self.txt.SetValue(data)
            self.currentFile -= 1
        else:
            return

    #----------------------------------------------------------------------
    def onNext(self, event):
        """"""
        print self.currentFile
        if self.currentFile == -1:
            self.currentFile += 1

        if self.currentFile != self.totalFiles:
            fpath = self.textFiles[self.currentFile]
            # read file
            with open(fpath) as fh:
                data = fh.read()

            self.txt.SetValue(data)
            self.currentFile += 1
        else:
            return

########################################################################
class MainFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="File reader")
        panel = MainPanel(self)
        self.Show()

if __name__ == "__main__":
    app = wx.App(False)
    frame = MainFrame()
    app.MainLoop() 
```

无论如何，它应该给你一个大致的想法

# ruby-on-rails - 在 Rails Active Model Serializer 中嵌入外键

> ID：15394232
> 
> 赞同：1
> 
> 时间：2013-03-13T19:05:26.100
> 
> 标签：ruby-on-rails, activerecord, active-model-serializers

我知道在嵌入关联时，我们可以执行以下操作

```
has_many :task_observer, embed: :objects

has_many :task_observer, embed: :ids 
```

有没有办法在关联中嵌入除 id 之外的其他字段，例如 contact_id 或 task_name 作为数组而不是主键？请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:03:47.050

如果你会做类似的事情怎么办：

```
attributes :task_observer_contact_ids

def task_observer_contact_ids
  object.task_observers.map(&:contact_id)
end 
```

是你要找的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T09:58:07.863

embed_key 更好

```
has_many :task_observer, embed: :ids, embed_key: :custom_id_field_name 
```

# android - 用于在活动之间切换的动画

> ID：15394233
> 
> 赞同：2
> 
> 时间：2013-03-13T19:05:26.220
> 
> 标签：android, android-animation, android-fragmentactivity

好的，我有一个问题。我用 jfeinstein10 的库实现了一个 SlideMenu。我正在使用 startActivity() 和 Intents 在不同的项目（所有 FragmentActivities）之间切换。对于正常的转换，我使用 overridePendingTransition。几乎所有的活动都是来自 Jake Wharton 的带有 TabPageIndicator 的 ViewPagers。

问题是我正在使用带有动画的自定义布局（Google Now 卡片样式）。一张上滑下一张动画。我扩展了LinearLayout，对于动画，我循环遍历孩子（卡片）并为每个孩子启动动画。这些卡片是添加到自定义 LinearLayout 的 RelativeLayouts。

我的想法是，在启动应用程序后，卡片从按钮向上滑动（像 Google Now 一样），当我切换活动时，当前活动的卡片向下滑动，然后现在空白的活动切换到带有淡入淡出的新活动（通过 overridePendingTransition）新活动中的卡片向上滑动。

我尝试使用 onGlobalLayoutListener 向上滑动的东西，但这在 ViewPager 中表现得很奇怪（第一个选项卡向上滑动，第二个保持原样，第三个也向上滑动）。动画应该只在启动应用程序或在活动之间切换后出现。

对于向下滑动的动画，我完全不知道。我尝试在我的自定义布局中创建一个附加方法并使用 onPause() 启动它 - 根本不起作用。

所以我想问问有没有人有想法？或者这有可能吗？这个问题真的让我发疯：D

**编辑：**

[http://pastebin.com/8mDefv50](http://pastebin.com/8mDefv50)我的 NowLayout

这个 [https://github.com/jfeinstein10/SlidingMenu/blob/master/example/src/com/slidingmenu/example/fragments/ResponsiveUIActivity.java](https://github.com/jfeinstein10/SlidingMenu/blob/master/example/src/com/slidingmenu/example/fragments/ResponsiveUIActivity.java) 基本上是我的基本 ui（与 content_frame 相同的方法并检查 menu_frame）。菜单本身包含一些按钮，它们启动不同的 FragmentActivity。

FragmentActivity 只管理 ViewPager。ViewPager 的 Fragment 中使用了真实的内容和 NowLayout。

所以我的问题是以一种很好的方式访问 MenuFragment 中的动画。主要是获得 NPE，因为切换是在仅包含按钮的 MenuFragment 中完成的。也许我的吸收速度很慢，或者我错过了森林的树木：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T21:10:12.277

您应该在为新活动调用 Intent 之前执行向下滑动的动画 - 而不是在 onPause() 上执行，因为为时已晚。

因此，当您需要从当前 Activity 前进或后退时 - 执行向下滑动动画，在此动画的末尾放置一个侦听器，然后根据需要执行 finish() / startActivity()。

# eclipse - 如何设置多个项目使用的通用 js/css 文件

> ID：15394234
> 
> 赞同：0
> 
> 时间：2013-03-13T19:05:37.523
> 
> 标签：eclipse, war

我不在熟悉的领域，所以如果我说不清楚的地方，请向我提问，或者随意编辑任何需要编辑的内容。

我被安排在一个 GWT 项目上，使用 Eclipse 作为我们的 IDE。我的任务是制作一个 JavaScript / jQuery 用户界面来取代 GWT。这个 UI 也将被其他项目使用。我的 UI 编码得很好，但它仍然会经历变化。同时，它被用于三个不同的项目，其中至少一个是纯 JS。

我们一直在将我所有的文件（我有很多 JS 文件，模块化并使用 require.js，以及 CSS 和图像文件）复制到每个项目中。对于 GWT 项目，我一直将文件复制到 war 文件夹中，而 JS 项目只是将文件复制到其网页的根目录中。这是一种非常糟糕的做事方式——我们没有 UI 文件的主要来源，并且每个项目都在进行单独的更改。我们通过将文件作为单独的项目检入我们的存储库来解决这个问题。

问题是：现在怎么办？

我尝试利用 Eclipse 创建链接和虚拟文件夹的能力。它在 Project Explorer 中看起来很棒，但物理目录中当然没有实际文件。当我尝试作为 Web 应用程序运行时，找不到这些文件。

然后我尝试在 Eclipse 中创建一个指向这些文件的项目，并在我的 require 配置的路径中引用它。但是，这高于应用程序的根目录，因此无法访问这些文件。

我可以让 require.js 一起构建我所有的 js 文件。通过足够的努力，我可以通过直接嵌入它们来消除所有图像。不过，我希望保留我所有的 css 文件 - 我们试图展示的功能之一是我们可以很容易地以这种方式更改 UI 的主题，所以我有很多默认的 jqueryui 主题。当然，它们不会像我的 js 代码那样频繁地更改，因此复制它们可能还不错。

我不认为我在寻找不可能的东西。我知道这归结为知道如何正确设置 Web 项目。是不是有某种方法可以让我将这些文件只保存在一个地方，而让它们被多个 Web 项目使用？

如果重要的话，我知道我们确实为这些项目构建了脚本，但我还没有遇到它们。

感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:20:59.953

好吧，我并不是真的希望获得风滚草徽章（我猜我打字太多了），但现在我得到了它，我会给出我找到的答案：

答案很简单：一个符号链接，并更改代码以查看新链接的目录。在 *nix-land 中，这很容易：`ln -s`. 我不得不为[Windows](http://www.windows7home.net/how-to-create-symbolic-link-in-windows-7/)查找它，但它基本上归结为`mklink /D`. 只需创建此链接然后刷新 Eclipse 即可使文件出现在工作区中。编辑它会改变它的主位置。唯一的问题是记住在签入代码时更新该位置以及它的消耗位置。

在我将那个解决方案发送给我的同事之后，有人建议我们通过源代码控制系统来代替。由于我们目前使用的是 Visual SourceSafe，因此我可以使用该`Share`命令。（我记得在过去的项目中，SVN 也有办法做到这一点）。我没有选择 SourceSafe 解决方案，只是因为我在某处读到共享不会更新新文件或已删除文件。如果添加或删除任何内容，则必须删除共享并重新制作。我宁愿只做一个符号链接。

# java - 在数值数组和 SimpleITK Image 对象之间传输

> ID：15394240
> 
> 赞同：1
> 
> 时间：2013-03-13T19:05:49.607
> 
> 标签：java, wrapper, itk

我正在尝试使用 Java SimpleITK 包装器进行医学图像处理。

在利用 ITK 分割过滤器之前和之后，我需要将图像作为普通数字数组进行一些操作。但是，我找不到将数值数组传输到 SITK Image 对象或将 Image 对象还原回数值数组的有效方法。使用嵌套循环来执行每个像素`setPixelAs`或`getPixelAs`操作会花费过多的时间。

我知道该`getPixelContainer`方法现在已弃用（？）并且应该被`getBufferAs`方法替换，我可以在 Doxygen Image 类列表中看到，但似乎在 Java 包装器（v0.6.1）中被抑制。有没有解决的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:34:42.253

这个问题现在在这里讨论：http: [//itk-users.7.n7.nabble.com/Why-are-getBufferAs-methods-not-available-in-Java-td30969.html](http://itk-users.7.n7.nabble.com/Why-are-getBufferAs-methods-not-available-in-Java-td30969.html)

似乎 Java 还没有这么简单的包装器，而 python 可以使用 SimpleITK.GetArrayFromImage(image_obj)。我在这里看到了 2011 年的一个问题：[https](https://issues.itk.org/jira/browse/SIMPLEITK-40) ://issues.itk.org/jira/browse/SIMPLEITK-40 。

可能值得考虑是否需要用 Java 包装它，或者是否可以用其他方式包装它（C++？）

[另外，请查看此答案](https://stackoverflow.com/a/7521426/607562)中精心整理的各种文档来源。

# bash - 这个 bash 东西的可搜索词是什么：<(command)

> ID：15394246
> 
> 赞同：3
> 
> 时间：2013-03-13T19:05:59.250
> 
> 标签：bash

我感到非常无助，因为我无法用谷歌搜索——谷歌只是忽略了这些字符（即使我把它们放在双引号中）。

当您打开 bash 终端并执行以下操作时，它叫什么：

```
diff <(command) <(cat some_file) 
```

几周前我找到了答案，但现在我不记得也找不到了。

另外，我记得有一些方法可以查看真正发生的事情，例如创建匿名管道或其他东西。我如何从上面的命令看到类似的东西：

```
diff /dev/fd/53 /dev/fd/54 
```

这就是最终发生的事情。几周前我做了这个，但不记得了......

如果有人知道如何强制谷歌搜索`<(command)`并找到特定于那个的结果而不是像你搜索的那样，那么奖励积分`command`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T19:11:39.317

您在示例中提供的语法在我看来类似于[Process Substitution](http://tldp.org/LDP/abs/html/process-sub.html)。这就是您想要的搜索词，尽管我刚刚提供的链接指向高级 bash 脚本指南中有关此主题的条目。

# collections - 使用集合对一对字符串进行排序

> ID：15394247
> 
> 赞同：0
> 
> 时间：2013-03-13T19:05:59.890
> 
> 标签：collections, java

我是java中的新程序员。我想使用集合对一对字符串进行排序。基本上我想对名字进行排序，名字有两部分，名字和姓氏。现在，如果我在列表中取名字并对其进行排序，那么我将如何在对名字进行排序时保留第二个名字的更改索引。请帮忙.........

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:53:46.303

由于您要对名称进行排序，因此创建一个具有两个字段的类*Name*是合乎逻辑的： *firstName*和*lastName*，一个用于初始化这两个字段的构造函数和 getter，以便我们稍后对其进行测试。

```
public class Name {
    private String firstName;
    private String lastName;

    public Name(String firstName, String lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }

    public String getFirstName() {
        return firstName;
    }

    public String getLastName() {
        return lastName;
    }
} 
```

现在，由于您希望能够比较名称，您必须确保*Name*实现*Comparable*接口。实现此接口需要您重写*campareTo()*方法，在该方法中您告诉程序如何比较两个对象。像这样：

```
public class Name implements Comparable<Name> {
    private String firstName;
    private String lastName;

    public Name(String firstName, String lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }

    public String getFirstName() {
        return firstName;
    }

    public String getLastName() {
        return lastName;
    }

    @Override
    public int compareTo(Name otherName) {
        if(this.firstName.compareTo(otherName.firstName) == 0) {
            return this.lastName.compareTo(otherName.lastName);
        }
        else {
            return this.firstName.compareTo(otherName.firstName);
        }
    }
} 
```

*compareTo()*方法中发生了什么：首先我们检查名字是否相等（*compareTo*返回零）。如果是这种情况，我们使用姓氏进行排序。否则，我们使用名字排序。有关字符串的 compareTo 方法的更多信息：[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#compareTo(java.lang.String)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#compareTo(java.lang.String))

现在您可以使用以下测试类对其进行测试：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

    public class Test {
        public static void main(String[] args) {
            Name name = new Name("A", "C");
            Name name1 = new Name("A", "A");
            Name name2 = new Name("Ba", "F");
            Name name3 = new Name("Bb", "A");
            Name name4 = new Name("Ca", "D");
            Name name5 = new Name("Cc", "Z");
            Name name6 = new Name("Cc", "W");

            Name nameArray[] = {name, name1, name2, name3, name4, name5, name6};
            List<Name> names = new ArrayList<Name>(Arrays.asList(nameArray));

            Collections.sort(names);

            for(Name n : names) {
                System.out.println(n.getFirstName() + " " + n.getLastName());
            }
        }
    } 
```

我们制作一个名称列表，并使用*Collections.sort()*方法对其进行排序。

我希望这对你有帮助！如果您有任何问题，请随时与我联系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:14:35.640

两种解决方案：

1- 创建一个具有两个成员的专用对象并实现[Comparable](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口。现在您可以使用[Collections.sort](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List%29)

2-将[Collections.sort](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)与自定义比较器一起使用。

像往常一样，番石榴具有非常好的功能。见[订购](http://code.google.com/p/guava-libraries/wiki/OrderingExplained)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T19:32:52.690

这是您需要的示例，尽管在某些情况下面向对象的解决方案可能会更好。列出数组中的字符串并在比较器中逐一比较它们，直到它们不再相等。数组将维护该对，比较器将处理顺序。

```
 List<String[]> strings;
    Comparator comparator = new Comparator<String[]>(){

        @Override
        public int compare(String[] o1, String[] o2) {
            //if parameters are invalid, throw them out.
            if(o1 == null || o2 == null || o1.length == 0 || o2.length == 0){
                throw new InvalidParameterException();
            }

            //Compare the two arrays of strings, string by string.
            int length = Math.min(o1.length, o2.length);
            for(int i  = 0; i < length; i++){
                int compare = o1[i].compareTo(o2[i]);
                if(compare != 0){
                    return compare;
                }
            }

            //If the two strings are of different lengths but the same until that point, return the longer string as greater.
            if(o1.length > o2.length){
                return 1;
            }  else if(o2.length > o1.length) {
                return -1;    
            }
            return 0;
        }
    };
    Collections.sort(strings, comparator); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T19:21:05.283

Implement the Comparable interface

```
Class Student implements Comparable{
    private String FirstName;
    private String SecondName;
    // getters and setters
    public int compareTo(Student s){
        return this.getFirstName().compareTo(s.getFirstName());
    } 
}
List<Student> list = new ArrayList();

Collections.sort(list); 
```

# algorithm - 图算法查找图是否连接，二分，有循环并且是一棵树

> ID：15394254
> 
> 赞同：9
> 
> 时间：2013-03-13T19:06:30.357
> 
> 标签：algorithm, function, graph

当我尝试使用图表并为其编写一些代码但没有运气时，我遇到了一个问题：/ !!

我想创建一些东西来获取图表的数据并检查它是否是：1-连接的 2-二分的 3-有循环 4-是一棵树

所以我想知道，例如，是否可以将其编写为从 .txt 文件中读取图形数据来执行上述测试？

使用简单的边缘列表格式是正确的方法吗？

如果您能给我一个链接以阅读有关如何执行此任务或启动代码的链接，我们将不胜感激！

感谢：D

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-13T19:49:10.227

> 检查是否是：
> 
> 1.  连接的

对于这个，你尝试从一个点遍历整个图，看看你是否成功。深度优先遍历和广度优先遍历在这里都是可以接受的。该算法会将节点拆分为组件：

*   将所有节点标记为未访问
*   对于每个节点`c`，如果该节点未被访问
    *   创建一个新的空节点集，即当前组件
    *   将 this 节点排入队列以进行遍历
    *   当有任何节点`t`入队 时
        *   从队列中删除该节点
        *   将每个未访问的邻居标记为打开并将其排入队列以进行遍历
        *   将此节点标记为已遍历
        *   将此节点添加到当前组件
    *   关闭当前组件，并将其添加到组件集中

如果只有一个组件，则图是连通的。

如果使用队列，则该算法是广度优先搜索。如果使用堆栈，则该算法是深度优先搜索。任何其他带有 push 和 pop-any 操作的集合都可以。特别感兴趣的是调用堆栈：将“遍历队列”替换为“递归遍历”

对于有向图，有两个相关的概念： 有向图是弱连接的，当且仅当它是连接的，忽略所有边方向。如果每个节点都可以从每个节点到达，则有向图是强连接的。为了测试强连通性，只需检查每个节点是否可以仅使用前向边从第一个节点到达，并且每个节点都可以从第一个节点仅使用后向边到达（第一个节点可以从每个节点到达）。

> 1.  双方

一个图是二分的，如果它是双色的。尝试分配双色，如果失败，则该图不是二分图。这可以合并到前面的算法中：每当您将节点标记为打开时，为其分配一种颜色，与分配给其邻居的颜色相反`t`。当一个邻居`t`已经打开时，检查它的颜色。如果其颜色与 相同`t`，则不存在双色。

> 1.  有循环

这很简单：如果你观察到*任何*已经打开的节点，就会有一个循环。请注意，每个没有环的图都是二分图。

在有向图中，这将检测无向循环的存在。要检测有向循环的存在，请使用以下（拓扑排序）算法：

*   而有一个入度为零的节点
    *   将节点添加到拓扑排序（与检测循环无关）
    *   从图中删除节点
*   如果图中还有节点
    *   该图包含有向循环。该图上不存在拓扑排序
*   别的
    *   该图不包含有向循环（是非循环的）。生成的拓扑排序是有效的。

> 1.  树

无向图是一棵树，当且仅当它是连通的且不包含环。

有向图是一棵有根树，当且仅当它没有无向环并且只有一个入度为零的顶点（只有一个根）。此外，有向图是一棵有根树，如果它是连通的，没有无向环，并且每个出度为零的节点的入度最多为 1（每个接收器都是叶子）。

# drupal - 尝试重置 Drupal 管理主题

> ID：15394259
> 
> 赞同：0
> 
> 时间：2013-03-13T19:06:46.910
> 
> 标签：drupal

我最近获得了对预先配置的 Drupal 网站的访问权限。我注意到加载特定管理面板的一些问题，所以我最终禁用了 Adaptive Theme -AT Admin 主题。我得到了一个 WSOD，并设法重新启用它，但现在我所有的管理页面都返回此错误：

```
Fatal error: Cannot redeclare adaptivetheme_admin_preprocess_page() (previously declared in /nas/webroot/mydomain.com/web/dev/themes/adaptivetheme/at_admin/template.php:6) in /nas/webroot/mydomain.com/web/dev/themes/adaptivetheme/at_admin/template.php on line 47 
```

这是它正在谈论的文件：

```
<?php

/**
 * Override or insert variables into page templates.
 */
function adaptivetheme_admin_preprocess_page(&$vars) {
  // RFC2822 date format
  if ($rfc = date("r" , time())) {
    $vars['datetime_rfc'] = t('@time', array('@time' => $rfc));
  }
  else {
    $rfc = '';
    $vars['datetime_rfc'] = '';
  }
  // ISO 8601 date format
  if ($iso = gmdate('Y-m-d\TH:i:sO')) {
    $vars['datetime_iso'] = $iso;
  }
  else {
    $iso = '';
    $vars['datetime_iso'] = '';
  }

  $vars['content_header_attributes_array']['class'][] = 'branding-elements';
  $vars['content_header_attributes_array']['role'][] = 'banner';
}

/**
 * Alter the search block form.
 */
function adaptivetheme_admin_form_alter(&$form, &$form_state, $form_id) {
  if ($form_id == 'search_block_form') {
    $form['search_block_form']['#title'] = t('Search');
    $form['search_block_form']['#title_display'] = 'invisible';
    $form['search_block_form']['#size'] = 20;
    $form['search_block_form']['#attributes']['placeholder'] = t('Search');
    $form['actions']['submit']['#value'] = t('Go');
  }
}

function adaptivetheme_admin_preprocess_page(&$vars) {
  global $user;
  $vars['datetime_rfc'] = '';
  $vars['datetime_iso'] = '';
  $vars['datetime_rfc'] = date("r" , time()); // RFC2822 date format
  $vars['datetime_iso'] = date("c" , time()); // ISO 8601 date format
} 
```

我对 Drupal 管理非常熟悉。我只是想让管理面板再次工作。我尝试刷新所有缓存，但得到一个不同的错误：

```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 280097 bytes) in /nas/webroot/mydomain.com/web/dev/includes/cache.inc on line 463 
```

我发现如果我通过 SFTP 登录并更改此特定子主题文件夹的名称，我可以进行快速更改。管理员的裸版出现，但在 15 秒左右后返回相同的错误。这让我至少可以重新启用主题，但我不确定为什么它仍然没有加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:35:53.287

`Fatal error: Cannot redeclare adaptivetheme_admin_preprocess_page()`告诉函数adaptivetheme_admin_preprocess_page() 在template.php 中定义了两次。如您所见，它位于第 6 行和第 47 行。因此您需要删除其中一个。或者可能合并代码并只留下一个函数定义。

您可以通过增加 php 内存限制值来解决内存问题。现在看来你有 128MB。尝试将其增加到 512MB，对于 drupal 应该已经足够了。

# javascript - 带有 CSS 属性的 jQuery 切换

> ID：15394262
> 
> 赞同：2
> 
> 时间：2013-03-13T19:06:52.867
> 
> 标签：javascript, jquery, css

我正在尝试在 css 列布局和 id 为“article”的 div 元素的正常布局之间切换，但是 jQuery 不起作用……整个事情就消失了。谁能告诉我如何在切换功能中使用 jQuery 删除 css 属性？我读到您可以删除下面的属性...但它不起作用...谁能告诉我正确的方法吗？

```
function changeview(orientation){
    $('#article').toggle(function(){
       $('#article').css('-webkit-column-width' : '768px', 'height' : '885px');                          
    },function(){                                 
        $('#article').css('-webkit-column-width' : '', 'height' : '');                              
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:11:55.853

`**[LIVE DEMO](http://jsbin.com/ozirij/1/edit)**`

```
function changeview(orientation){ 
    $('#article').click(function(){    
       var has_H = $(this).height() >= 885 ;         
       $(this).css({
          '-webkit-column-width': has_H ? 'auto' : 768,
                        'height': has_H ? 'auto' : 885
       }); 
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:14:18.620

您可以为此使用 addClass 和 removeClass。

```
<style>
    .newCSS {
        -webkit-column-width : 768px;
        height : 885px;
    }
</style> 
```

和 jQuery

```
$('#article').toggleClass("newCSS"); 
```

还做了一个小提琴（简单演示）：http: [//jsfiddle.net/VXmZp/](http://jsfiddle.net/VXmZp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:24:22.737

打败我..总是花太长时间在我的小提琴上： tymeJV 建议的[http://jsfiddle.net/f64Wy/](http://jsfiddle.net/f64Wy/) `toggleClass`更好。

更新 - 相同的例子被精简为只使用`toggleClass`- [http://jsfiddle.net/f64Wy/1/](http://jsfiddle.net/f64Wy/1/)

# git - Git 要求我提交被忽略的文件

> ID：15394266
> 
> 赞同：3
> 
> 时间：2013-03-13T19:06:58.860
> 
> 标签：git

我在分支`feature/branch1`，`git status`列出文件中的两个`.gitignore`文件。当我尝试结帐到`develop`分支时，git 阻止我显示此消息：

```
error: Your local changes to the following files would be overwritten by checkout:
    XXXXXXX.xcworkspace/xcuserdata/XXXX.xcuserdatad/UserInterfaceState.xcuserstate
Please, commit your changes or stash them before you can switch branches.
Aborting 
```

然后我尝试添加这些文件，尽管它们在`.gitignore`文件中列出，所以我收到了这条消息：

```
The following paths are ignored by one of your .gitignore files:
XXXXXXX.xcworkspace
Use -f if you really want to add them.
fatal: no files added 
```

为什么 git 要求我添加这些文件？是不是因为它们在`develop`分支中没有被忽略。处理这种情况的最佳选择是什么？提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:33:16.297

问题是您的本地目录中有这些文件，尽管它们不是由 git 版本控制的。并且 git checkout 正在尝试提取这些版本化的文件。Git 告诉您它正在尝试覆盖文件，但它们没有版本控制，因此您有 2 个选择：

1.  从本地存储库中删除文件并让结帐设置文件。
2.  通过将忽略的文件添加到 git 存储库来对它们进行版本控制。( `git add -f <ignored files>`)

要查看 repo 目录中所有被忽略的文件，请运行：

```
git status --ignored 
```

这将列出所有您忽略的文件，从这里您可以决定是否要在运行之前移动、删除或版本化它们`git checkout <branch>`。

签出此分支后，您可能还需要考虑从您尝试签出的分支传入的忽略文件确实不应该提交到 git 存储库，您可以从存储库中删除文件而不删除它们：

```
git rm --cached <files> 
```

# mysql - 分组时限制记录数

> ID：15394267
> 
> 赞同：0
> 
> 时间：2013-03-13T19:07:03.193
> 
> 标签：mysql

我想获得在特定年份的特定月份销售最多的前十种产品。我做了以下事情：

```
SELECT Year(date1), Month(date1), `ProductID`, sum(`Price`*`Quantity`)"Sales" 
FROM `products`
Group By Year(date1), Month(date1), ProductId
order by Year(date1), Month(date1), Sales Desc; 
```

但是，它给了我所有的产品，我只想要前 10 名的产品。无法理解 10 条记录的限制适用于何处，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:08:32.293

如果您按照需要设置排序，只需添加

```
LIMIT 0,10 
```

对您的查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:14:08.133

在选择查询结束时使用 mysql 内置函数 Limit

```
LIMIT {[offset,] row_count | row_count OFFSET offset}
            ^                    ^
        Starting tuple     Number of tuples 
```

更多阅读请[点击这里](http://dev.mysql.com/doc/refman/5.0/en/select.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:34:58.370

考虑重组 group by 子句、order by、where 子句和 date_format 的使用

```
SELECT date_format(date1) as month, `ProductID`, sum(`Price`*`Quantity`)"Sales" 
FROM `products`
WHERE date1 > '2013-01-01' and date1 < '2013-02-01'
Group By ProductId
order by Sales Desc
Limit 0,10
; 
```

# android - 如何将一个项目用于另一个项目

> ID：15394269
> 
> 赞同：0
> 
> 时间：2013-03-13T19:07:07.843
> 
> 标签：android

我有一个项目，我想将其用于另一个项目，我尝试将其作为库和 jar 文件来执行，但它总是强制关闭它。我认为这样做并使用包中的所有类是可行的，但我不知道该怎么做。提前致谢

* * *

我添加了所有内容，但我不知道如何调用库中的方法我不知道如何从 jar 文件中实例化一个类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T15:07:37.227

问题出在我创建库的方式上，通过一步一步地遵循这个教程，它可以正常工作[http://es.slideshare.net/ajdgeniz/como-hacer-un-archivo-jar-en-eclipse](http://es.slideshare.net/ajdgeniz/como-hacer-un-archivo-jar-en-eclipse)然后做调用从库中导入类并实例化它们，就好像它们来自同一个项目一样，Android 识别新导入的类

谢谢大家

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:10:01.427

仅当您`/res`将该项目文件夹下的所有内容添加到您使用该 jar 文件的其他项目时，才能将项目设为库并将其导出到 jar 文件中。这是因为资源*没有*与 jar 捆绑在一起，并且每当您的库项目进行`R.*.*`引用时，您都会收到错误消息。

# c# - 配置 log4net 记录器以匹配通用类

> ID：15394270
> 
> 赞同：2
> 
> 时间：2013-03-13T19:07:09.700
> 
> 标签：c#, .net, generics, log4net

我想在我的应用程序中配置一个类以在调试级别进行日志记录，因此我正在尝试为该类设置一个特定的记录器。不过，它并没有更改为调试级别，我怀疑这是因为该类是通用的。我找到[了一些](https://stackoverflow.com/q/5738485/4794)泛型类型的配置示例，所以看起来是可能的，但它对我不起作用。

```
<root>
  <level value="INFO" />
  <appender-ref ref="OutputDebugStringAppender"/>
</root>
<logger name="MyCompany.MyGenericClass`1">
  <level value="DEBUG"/>
</logger> 
```

这是我在泛型类中声明我的记录器的方式。

```
public abstract class MyGenericClass<T> : IDisposable where T : class
{
    private static ILog _log = LogManager.GetLogger(typeof(MyGenericClass<T>)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:07:09.700

看起来有[两种获取类名的方法](http://logging.apache.org/log4net/release/faq.html#static-class-name)，其中一种更容易在记录器中配置。

如果您将我的记录器声明更改为：

```
public abstract class MyGenericClass<T> : IDisposable where T : class
{
    private static ILog _log = LogManager.GetLogger(
        System.Reflection.MethodBase.GetCurrentMethod().DeclaringType); 
```

然后我的原始配置将起作用：

```
<root>
  <level value="INFO" />
  <appender-ref ref="OutputDebugStringAppender"/>
</root>
<logger name="MyCompany.MyGenericClass`1">
  <level value="DEBUG"/>
</logger> 
```

听起来``1`那是指类型具有的泛型参数的数量，但我不确定。

如果您使用我原来的记录器声明：

```
public abstract class MyGenericClass<T> : IDisposable where T : class
{
    private static ILog _log = LogManager.GetLogger(typeof(MyGenericClass<T>)); 
```

然后你需要使用这个丑陋的配置：

```
<logger name="MyCompany.MyGenericClass`1[[MyCompany.MyParameterClass, MyLibrary, Version=1.2.0.0, Culture=neutral, PublicKeyToken=65af8642211d1afa]]">
  <level value="DEBUG"/>
</logger> 
```

第二个选项还意味着您需要为泛型类的每个参数类型提供单独的配置条目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-25T14:01:48.143

我知道这有点晚了，但我遇到了同样的问题......

采用

```
LogManager.GetLogger(typeof(MyGenericClass<T>).ToString()) 
```

这将适用于如下所示的 cfg：

```
<logger name="MyCompany.MyGenericClass`1[MyCompany.MyParameterClass]">
  <level value="DEBUG"/>
</logger> 
```

更短且不涉及版本号，从而简化了更新。另请注意，泛型类型定义中只有一组方括号，而不是通过`Type`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-09T10:20:53.960

来自 java（因此非常了解 log4xx 范例），我不明白为什么日志输出应该打印任何通用类信息。对于通用基类的记录器名称，知道哪个派生确切地发出日志输出并不重要。

请注意，使用类名作为记录器名称只是一个约定。您可以使用任意其他字符串作为记录器名称。而且 - 当然 - 也可以使用带有记录器名称的点分隔符来任意自己的记录器层次结构。

所以我写了一个小 LoggerName 实用程序（老实说，我受到[这篇文章的](http://apache-logging.6191.n7.nabble.com/Problem-when-using-generic-classes-td24037.html)启发）：

```
 public static string ClassNameForLogger(Type t)
    {
        if (t.IsGenericTypeDefinition || t.IsGenericType)
        {
            StringBuilder b = new StringBuilder();
            b.Append(t.Namespace).Append('.');

            int offset = t.Name.IndexOf('`');

            if (offset > 0)
            {
                b.Append(t.Name.Substring(0, offset));
            }
            else
            {
                b.Append(t.Name);
            }

            return b.ToString();
        }

        return t.FullName;
    } 
```

并像这样使用它：

```
public abstract class MyGenericClass<T>
{
    private static readonly ILog log = LogManager.GetLogger(LoggerUtil.ClassNameForLogger(typeof(MyGenericClass<T>))); 
```

它将记录器名称提供为

```
<MyNamespace>.MyGenericClass 
```

# hibernate - XML中的Hibernate双列唯一性

> ID：15394275
> 
> 赞同：0
> 
> 时间：2013-03-13T19:07:33.740
> 
> 标签：hibernate

参考这篇[文章](https://stackoverflow.com/q/946512/2166885)...

因此，在接受的答案中，我看到了使用注释创建双列唯一性的方法。有谁知道如何在 XML 文件中执行此操作？

我尝试`unique`在标签中使用该属性`<property\>`，但这使得每个单独的列都是唯一的。我得到的印象是我应该在`<column\>`标签内创建一个标签`<property\>`并将属性设置`unique-key`为某物 - 但是我不知道如何声明唯一键（或在哪里声明它），所以我可以引用*那个东西*。

如果它有帮助，我的类是一个`Connection`有两个`InetAddress`字段（我使用 a`UserType`来转换/从`String`），我希望表有唯一的记录，但*不*阻止我有两个具有相同源地址的记录等。

整天在谷歌上搜索，但我似乎只找到了属性的做事方式。真的很想用 XML 来做，因为我不想将我的模型紧密耦合到休眠（或任何持久性）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:07:44.467

该`properties`元素允许您对属性进行分组并通过添加属性来定义多列唯一约束`unique="true"`。看看[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-properties](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html#mapping-declaration-properties)

# android - 从 sqlite 获取数据，WHERE 子句中的错误

> ID：15394276
> 
> 赞同：1
> 
> 时间：2013-03-13T19:07:37.720
> 
> 标签：android, where-clause, android-sqlite

我不知道我哪里出错了，我是 android 开发新手并尝试使用 SQLITE 数据库编写一些代码：

我有一个名为 cards 的数据库和一个名为 mycards 的表，我的创建语句是：

```
private static final String DATABASE_CREATE =
        "create table mycards(card_id integer primary key autoincrement, "
        + NAME + " text not null, card_type text not null,json_string text not null);"; 
```

我的插入功能如下：

```
 public long insertCard(String name, String type, String json_string) {
    ContentValues initialValues = new ContentValues();
    initialValues.put(NAME, name);
    initialValues.put(TYPE, type);
initialValues.put(JSON, json_string);
    return mDb.insert(DATABASE_TABLE, null, initialValues);
}

//here TYPE is card_type 
```

在 card_type 列中存在三个可能的值 Pcard、Bcard、Ccard。当我想检索数据时，我希望它过滤列 card_type 中的值（字符串）。

因此我的 fetch 函数是：（仅显示一种类型）：

```
 public Cursor fetchallPCards() {

  return mDb.query(DATABASE_TABLE, new String[] {"card_name"},TYPE+"="+"Pcard", null, null, null, null);   

} 
```

但我收到错误：

```
03-14 00:26:21.233: E/SQLiteLog(701): (1) no such column: Pcard 
```

我哪里出错了？据我所知，我认为我是对的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:10:15.310

您需要在查询中为字符串加上引号，请尝试：

```
return mDb.query(DATABASE_TABLE, new String[] { "card_name" }, TYPE + "=" + "'Pcard'", null, null, null, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:23:34.480

Change the `fetchallPCards` method to look like this:

```
public Cursor fetchallPCards() { 

   return mDb.query(DATABASE_TABLE, new String[] {"card_name"},TYPE+"=?", 
                                    new String[] {"Pcard"}, null, null, null);   
} 
```

# asp.net-mvc-4 - 为什么 User.Identity.IsAuthenticated 总是假的？

> ID：15394277
> 
> 赞同：0
> 
> 时间：2013-03-13T19:07:40.617
> 
> 标签：asp.net-mvc-4

我正在纠结这个“愚蠢”的问题。我尝试查看用户是否在我的操作中经过身份验证。我习惯这样做，`HttpContext.User.Identity.IsAuthenticated`但它总是返回错误。我研究了`AuthorizeAttribute`他们使用的代码

```
protected virtual bool AuthorizeCore(HttpContextBase httpContext)
        {
            //removed code...

            IPrincipal user = httpContext.User;
            if (!user.Identity.IsAuthenticated)
            {
                return false;
            }

            //removed code....
        } 
```

所以我的问题和困惑是为什么这在我的行动中不起作用？

我使用 Simplemembership，这是我使用的设置`web.config`

```
<roleManager enabled="true" defaultProvider="SimpleRoleProvider">
              <providers>
                <clear />
                <add name="SimpleRoleProvider" 
                type="WebMatrix.WebData.SimpleRoleProvider, 
                WebMatrix.WebData" />
              </providers>
            </roleManager>
            <membership defaultProvider="SimpleMembershipProvider">
              <providers>
                <clear />
                <add name="SimpleMembershipProvider" 
                type="WebMatrix.WebData.SimpleMembershipProvider, 
                WebMatrix.WebData" />
              </providers>
            </membership> 
```

我在模板 mvc4 中使用默认登录

```
 [HttpPost]
        [AllowAnonymous]
        [ValidateAntiForgeryToken]
        public ActionResult Login(LoginModel model, string returnUrl)
        {
            if (ModelState.IsValid && WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe))
            {                
                return RedirectToLocal(returnUrl);
            }

            // If we got this far, something failed, redisplay form
            ModelState.AddModelError("", "The user name or password provided is incorrect.");
            return View(model);
        } 
```

我在我的授权属性中使用它并且它有效，所以我的问题是有什么区别？

```
protected override bool AuthorizeCore(System.Web.HttpContextBase httpContext)
        {
            //code here....

            if (httpContext.User.Identity.IsAuthenticated)
                return true;

            return true;
        } 
```

这就是我在我的行动中使用的

```
public ActionResult Index()
        {
            //removed code....

            if (HttpContext.User.Identity.IsAuthenticated)
            {
                return View();
            }

            // revmoved code...

            return View();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:01:49.077

我通常`Application_PostAuthenticateRequest`为此使用而不是过滤器。请随意忽略我的`CustomPrincipal`，你不必那样做。只是我的一个项目的快速粘贴。

我没有看到你的代码`FormsAuthentication`很难说为什么`HttpContext.User`设置不正确。请发布您的`FormsAuthentication`代码。

```
 protected void Application_PostAuthenticateRequest(Object sender, EventArgs e)
    {
        HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName];
        if (authCookie != null)
        {
            FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);
            var serializeModel = (CustomPrincipalSerializeModel)
                                 JsonSerializer.DeserializeFromString(authTicket.UserData,
                                                                      typeof (CustomPrincipalSerializeModel));

            var roles = serializeModel.Roles ?? new string[0];
            var newUser = new CustomPrincipal(authTicket.Name, roles)
                {
                    UserId = serializeModel.UserId,
                    UserName = serializeModel.UserName,
                    FirstName = serializeModel.FirstName,
                    LastName = serializeModel.LastName
                };
            HttpContext.Current.User = newUser;

        }
    } 
```

# perl - 安装 Perl 模块

> ID：15394279
> 
> 赞同：-1
> 
> 时间：2013-03-13T19:07:46.257
> 
> 标签：perl, perl-module

我想将代码从 Linux 迁移到 Windows 7。我使用 MinGW 运行 perl。关于这段代码，我需要安装“Clone 0.31”、“Data-Dumper 2.121”、“Hash-Merge 0.11”和“threads 1.71”包。但是，我拥有的这些软件包的版本适用于 Linux。我想知道这些模块是否有可用的 Windows 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:43:54.897

如果您不需要在 Windows 上使用特定的 Perl，我建议您更新到[Strawberry Perl](http://strawberryperl.com/)。它是一个捆绑的 Perl 环境，包括 gcc、常见 Perl 模块所需的 C 库以及常用的数据库驱动程序。它包括一个已配置的 CPAN shell，可从“开始”菜单访问，用于安装模块。

这是在 Windows 上使用 Perl 和安装模块的最简单方法。

否则，您提到的模块*应该*在 Windows 上编译，但没有看到具体的错误消息，我们无法帮助您解决问题。

# c++ - 将 boost::geometry 多边形转换为 STL 对象

> ID：15394280
> 
> 赞同：8
> 
> 时间：2013-03-13T19:07:46.907
> 
> 标签：c++, boost, boost-geometry

如何将 boost::geometry 多边形放入 STL 对象？

我确信这一定很简单，因为我在文档的任何地方都找不到示例。然而，我花了大约 4 个完整的工作日来尝试做这件小事。我是 C++ 新手（长期 R 程序员），但是这些小数据转换的事情让我发疯了。

是的，有一个问题的标题和我的很像：[Getting the coordinates of points from a Boost Geometry polygon](https://stackoverflow.com/questions/7722087/getting-the-coordinates-of-points-from-a-boost-geometry-polygon)

但是代码太复杂了（而且发帖人一直在修改它很多次），以至于我无法对它做出正面或反面，我也无法想象其他 C++ 新手能够做到。

这是一个简单的示例，应该可以转换为其他一些 boost::geometry 数据类型，因此希望任何人都可以遵循它。

```
 #include <iostream>

 #include <boost/geometry.hpp>
 #include <boost/geometry/geometries/polygon.hpp>
 #include <boost/geometry/geometries/adapted/boost_tuple.hpp>

 BOOST_GEOMETRY_REGISTER_BOOST_TUPLE_CS(cs::cartesian)

 //One thing I tried is a function to use with `for_each_point()` so I set that up first.

  template <typename Point>
  void get_coordinates(Point const& p)
  {
  using boost::geometry::get;
  std::cout << get<0>(p) get<1>(p) << std::endl;
  }

  int main()
  {
  typedef boost::tuple<double, double> point;
  typedef boost::geometry::model::polygon<point> polygon;

  polygon poly;
  boost::geometry::read_wkt("polygon((2.0 1.3, 2.4 1.7, 2.8 1.8, 3.4 1.2, 3.7 1.6, 3.4 2.0, 4.1 3.0, 5.3 2.6, 5.4 1.2, 4.9 0.8, 2.9 0.7, 2.0 1.3))", poly);

   polygon hull;
   boost::geometry::convex_hull(poly, hull);

 // Now I know I can `dsv()` and print to the screen like this:

  using boost::geometry::dsv;
  std::cout
    << "hull: " << dsv(hull) << std::endl;

  // And/Or I can use my function with for_each_point()

  boost::geometry::for_each_point(hull, get_coordinates<point>);

return 0;
} 
```

如何将这些坐标放入 STL 容器？我更喜欢两个 std::vector，一个用于 x，一个用于 y，但任何事情都可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T20:43:04.527

多边形已经是 STL 容器格式，boost::geometry::polygon 的外环和内环默认存储一个 std::vector。

您可能想要的（考虑到您的评论）是：

```
 polygon hull;
  boost::geometry::convex_hull(poly, hull);
  boost::geometry::for_each_point(boost::geometry::exterior_ring(hull), get_coordinates<point>); 
```

如果您将 get_coordinates 函数更正为（注意 << 用法），这将起作用：

```
 template <typename Point>
  void get_coordinates(Point const& p)
  {
      using boost::geometry::get;
      std::cout << get<0>(p) << ", " << get<1>(p) << std::endl;
  } 
```

并将您的评论指标更改为 // ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-14T11:08:55.940

For example:

```
boost::geometry::model::polygon<Point> polygon;
polygon.outer().push_back( point ); 
```

So, polygon.outer() is std::vector (external one, as Barend Gehrels said). See here: [boost reference](http://www.boost.org/doc/libs/1%5f55%5f0/libs/geometry/doc/html/geometry/reference/models/model%5fpolygon.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-30T09:35:17.693

您可以将迭代器与 boost 模型一起使用来迭代所有点并将它们添加到您喜欢的任何类型的容器中。

多边形模型稍微复杂一些，因为它们有一个外环，可能还有多个内环。

假设您想要“hull”对象（或任何多边形，包括原始“poly”）外环中的所有点，只需对其进行迭代并将它们逐点添加到标准向量中。

如果您想要 x 的向量和 y 的向量，请使用相同的方法。

```
::std::vector< point > hullPoints;
::std::vector< double > hullXPoints;
::std::vector< double > hullYPoints;

// the auto keyword makes declaring iterators easy
for ( auto hullIterator = hull.outer().begin;
      hullIterator != hull.outer().end();
      ++hullIterator )
{
     // for a vector of point types, just add the points one by one
     hullPoints.push_back( *hullIterator );

     // for vectors of x and y, extract the x/y from the point
     hullXPoints.push_back( get<0>( *hullIterator ) );
     hullYPoints.push_back( get<1>( *hullIterator ) );
} 
```

# opencv - OpenCV cvFindContours - 我如何在图像中找到椭圆轮廓

> ID：15394283
> 
> 赞同：0
> 
> 时间：2013-03-13T19:08:01.030
> 
> 标签：opencv, image-processing, detection, javacv, ellipse

我使用 Javacv 在图片中查找米粒的图像。

![在此处输入图像描述](../Images/61227518a51df889279d49fc172699ca.png)

我已经实现了这段代码：

```
String fileName = "image/rice.jpg";
IplImage image = cvLoadImage(fileName);
IplImage _image = cvCloneImage(image);

image = Guassian.apply(image, 3);
image = Grayscale.apply(image);
image = Threshold.apply(image, CV_THRESH_OTSU);
image = MORPH.apply(image, 7, 3, CV_MOP_ERODE);
image = MORPH.apply(image, 7, 3, CV_MOP_DILATE);
image = Canny.apply(image);

CvSeq cvSeq = new CvSeq();
CvMemStorage storage = CvMemStorage.create();

cvFindContours(image, storage, cvSeq, Loader.sizeof(CvContour.class), CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);
for (int i = 0; i < cvSeq.total(); i++) {
    cvEllipse(cvSeq, CvPoint.ZERO, CvSize.ZERO, i, dp, dp, CvScalar.ONE, i, i, i);
} 
```

在行`cvEllipse(cvSeq, CvPoint.ZERO, CvSize.ZERO, i, dp, dp, CvScalar.ONE, i, i, i);`中，如何设置参数？

# vba - VBA 插入 .csv 不起作用

> ID：15394285
> 
> 赞同：2
> 
> 时间：2013-03-13T19:08:04.143
> 
> 标签：vba, csv, excel

我正在尝试从此 URL 导入 .csv：

[http://www.redfin.com/stingray/do/gis-search?market=socal®ion_id=11203®ion_type=6&excl_ss=true&hoa=&max_listing_approx_size=&max_num_beds=&max_parcel_size=&max_price=300000&max_year_built=&min_listing_approx_size=&min_parcel_size=&min_price=500000&min_price=500000&min. =1&open_house=&pkg=-&rd=&sf=1%2C2%2C3&sold_within_days=&status=1&time_on_market_range=30-&uipt=2&v=8&num_homes=500&sp=t&al=3&render=csv](http://www.redfin.com/stingray/do/gis-search?market=socal&region_id=11203&region_type=6&excl_ss=true&hoa=&max_listing_approx_size=&max_num_beds=&max_parcel_size=&max_price=300000&max_year_built=&min_listing_approx_size=&min_parcel_size=&min_price=50000&min_year_built=&num_baths=1.0&num_beds=1&open_house=&pkg=-&rd=&sf=1%2C2%2C3&sold_within_days=&status=1&time_on_market_range=30-&uipt=2&v=8&num_homes=500&sp=t&al=3&render=csv)

下面的代码在我使用不同的 .csv URL 时有效，例如：http: [//ichart.finance.yahoo.com/table.csv ?s=AAPL&d=2&e=13&f=2013&g=d&a=8&b=7&c=1984&ignore =.csv](http://ichart.finance.yahoo.com/table.csv?s=AAPL&d=2&e=13&f=2013&g=d&a=8&b=7&c=1984&ignore=.csv)

但该代码不适用于较长的 URL。网址是否太长？如果是这样，是否有解决方法？

这是我当前的代码：

```
Sub importCSV()
    Dim URL As String
    URL = "TEXT;http://www.redfin.com/stingray/do/gis-search?market=socal&region_id=11203&region_type=6&excl_ss=true&hoa=&max_listing_approx_size=&max_num_beds=&max_parcel_size=&max_price=300000&max_year_built=&min_listing_approx_size=&min_parcel_size=&min_price=50000&min_year_built=&num_baths=1.0&num_beds=1&open_house=&pkg=-&rd=&sf=1%2C2%2C3&sold_within_days=&status=1&time_on_market_range=30-&uipt=2&v=8&num_homes=500&sp=t&al=3&render=csv"
    Application.DisplayAlerts = False
    With ActiveSheet.QueryTables.Add(Connection:=URL, _
        Destination:=Range("A1"))
        .Name = "test"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlOverwriteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 437
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
        .TextFileConsecutiveDelimiter = False
        .TextFileTabDelimiter = False
        .TextFileSemicolonDelimiter = False
        .TextFileCommaDelimiter = True
        .TextFileSpaceDelimiter = False
        .TextFileColumnDataTypes = Array(1, 1, 1)
        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
    End With
    Application.DisplayAlerts = True
End Sub 
```

马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:26:45.663

尝试这个：

```
With ActiveSheet.QueryTables.Add(Connection:= _
"URL;[your url goes here]", Destination:=Range("$A$1"))
.Name = "home"
.FieldNames = True
.RowNumbers = False
.FillAdjacentFormulas = False
.PreserveFormatting = True
.RefreshOnFileOpen = False
.BackgroundQuery = True
    .RefreshStyle = xlInsertDeleteCells
    .SavePassword = False
    .SaveData = True
    .AdjustColumnWidth = True
    .RefreshPeriod = 0
    .WebSelectionType = xlEntirePage
    .WebFormatting = xlWebFormattingNone
    .WebPreFormattedTextToColumns = True
    .WebConsecutiveDelimitersAsOne = True
    .WebSingleBlockTextImport = False
    .WebDisableDateRecognition = False
    .WebDisableRedirections = False
    .Refresh BackgroundQuery:=False
End With 
```

这适用于 Excel 2010。

# highcharts - Use different markers in the same series of an irregular time highchart

> ID：15394287
> 
> 赞同：1
> 
> 时间：2013-03-13T19:08:05.640
> 
> 标签：highcharts

I am trying to display an irregular time series in highcharts that also has different markers for each point. I can find no example of how this combination of data should be formatted.

Irregular time series point: ***[Date.UTC(1970, 10, 10), 40],***

Different Markers each point: ***{y: 40, marker: {symbol: 'url([http://myurl.com/image.png](http://myurl.com/image.png))' }},***

I have tried to combine these in several ways, but have not come up with the proper way. This is the best I have come up with. It still does not display, but does not completely kill the chart either. Is there a way to combine these? **[Date.UTC(1970, 10, 10), {y: 40, marker: {symbol: 'url([http://myurl.com/image.png](http://myurl.com/image.png))' }}],**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:37:57.990

You're almost there!

You have to separate out the date and the value into `x` and `y`. What you're looking for should be something like this:

```
{
    x: Date.UTC(1970, 10, 18),
    y: 0.7,
    marker: {
        symbol: 'url(http://www.highcharts.com/demo/gfx/sun.png)'
    }
} 
```

Here is a JSFiddle showing the concept: [http://jsfiddle.net/mkremer90/KrcQx/](http://jsfiddle.net/mkremer90/KrcQx/)

# jquery - jQuery点击功能增加不透明度

> ID：15394288
> 
> 赞同：1
> 
> 时间：2013-03-13T19:08:07.420
> 
> 标签：jquery, html, css

我试图让 div “bio-button” 类既打开隐藏文本的 div 又降低其自身的不透明度。然后当文本的 div 关闭时，它会返回到之前的状态

如果你看[这个 fiddle demo](http://jsfiddle.net/MGDTech/cU2DD/)，我想要的效果和你点击图片时的效果是一样的。

但我似乎遇到了调用太多函数的问题，也许。我怎样才能更有效地实现这一目标？

jQuery：

```
$('.bio-button').on('click', function () {
$(this).parent('img').css({opacity:1});
}); 
```

这是我的html：

```
<div id="" class="team-member">
<div class="team-text">
    <p>hello this is Billy's text</p>
    <div class="close"></div>
</div><!-- .team-text -->
<div class="team-photo">
    <img width="437" height="293" src="http://www.mgrear.com/clients/gls/wp-content/uploads/2013/02/billy.jpg" class="" alt="billy" />                          
    <h2>Billy Senecal</h2>
    <p>Producer / Director</p>
</div><!-- .team-photo -->
<div class="bio-button">BIO</div>   
<div class="clear"></div>
</div><!-- #team-member -->
<div id="" class="team-member">
<div class="team-text">
    <p>THis is Mark's text</p>
    <div class="close"></div>
</div><!-- .team-text -->
<div class="team-photo">
    <img width="439" height="293" src="http://www.mgrear.com/clients/gls/wp-content/uploads/2013/02/mark.jpg" class="" alt="mark" />                            
    <h2>Mark Montalto</h2>
    <p>Editor / Producer</p>
</div><!-- .team-photo -->
<div class="bio-button">BIO</div>   
<div class="clear"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:09:32.920

试试这个：

```
$('.bio-button').on('click', function () {
  $(this).prev('.team-photo').children('img').css({opacity:1});
}); 
```

分解它：

单击时`.bio-button`，查看前面具有 类的相邻兄弟`team-photo`，然后获取该`img`元素的子`team-photo`元素，然后对该元素进行指定的 CSS 调整`img`。

在上面的例子中，`$(this)`指的是被点击的元素：`$('.bio-button')`.

# gwt - 带有 TextInputCell 的 GWT CellTable - 值更改需要重绘并且单元格失去焦点

> ID：15394289
> 
> 赞同：3
> 
> 时间：2013-03-13T19:08:09.043
> 
> 标签：gwt

我有一个包含几列的 CellTable，其中两列是 TextInputCells。在更新此单元格中的值时，我进行计算（例如：总计）并设置总行的值。我需要重新绘制 celltable 以立即显示更新的值。我面临的问题是，当用户在第一个文本单元格中输入一个值并按下键盘上的选项卡时，由于重绘了单元格表，因此单元格失去了焦点。

重绘表格时我该怎么做才能不失去焦点？

表结构：

```
ID         Description   Month1               Month2
expenseId1   Travel      10                    15
expenseId2   Food        40                    50
Subtotal                 50                    65
Misc.                    TextInputCell      TextInputCell
Total                    50                    65 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:21:24.683

No need to redraw the table after calculating total. You can just call `dataProvider.refresh()` method on the grid. It will refresh your grid.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T04:59:57.523

你必须调用 [setVisibleRange(](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/cellview/client/AbstractHasData.html#setVisibleRangeAndClearData%28com.google.gwt.view.client.Range,%20boolean%29) )`celltable`

```
 cellTable.setVisibleRangeAndClearData(cellTable.getVisibleRange(),true); 
```

你也可以这样做

`cellTable.setRowData(0, listOfObjs)` `//` `where listOfObjs is your changed data`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-14T13:23:19.057

这是由于渲染周期而发生的。所以没有可能节省焦点。因为每个渲染周期您的视图对象都不再存在。新的 dom 元素取而代之。

# mysql - MySQL 全文搜索和 SOUNDEX

> ID：15394293
> 
> 赞同：6
> 
> 时间：2013-03-13T19:08:20.177
> 
> 标签：mysql, full-text-search, soundex

我正在尝试使用全文搜索和 SOUNDEX 实现名字和姓氏搜索（以防名称拼写错误）。

我试图做类似的事情

```
SELECT * 
    FROM employees 
WHERE 
    MATCH SOUNDEX(first_name, last_name) AGAINST SOUNDEX('John 1969 Ivan') 
```

但这不是有效的语法。

我想要实现的是，当用户键入例如“Jon Ivan”时，列

```
first_name | last_name
----------------------
  John        Ivan 
```

会匹配。

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T20:48:58.430

MySQL 在文本搜索、模糊搜索、拼写错误等方面往往表现不佳。我强烈推荐像[Solr](http://lucene.apache.org/solr/)这样的索引解决方案。Solr 支持四种不同类型的语音搜索：Soundex、RefinedSoundex、Metaphone 和 DoubleMetaphone。它具有地理空间搜索和拼写错误搜索以及蝴蝶/蝴蝶搜索。我想你会对你得到的结果感到非常满意。与 MySQL 相比，它快如闪电

# javascript - 如何在 Cocoa 应用程序中加载/暂停/恢复 youtube 视频？

> ID：15394294
> 
> 赞同：1
> 
> 时间：2013-03-13T19:08:22.660
> 
> 标签：javascript, cocoa-touch, webview, youtube-api, youtube-javascript-api

加载 youtube 视频非常简单。我使用 web 视图；

```
 NSURL*url=[NSURL URLWithString:kVideoLink];
    NSURLRequest*request=[NSURLRequest requestWithURL:url];
    [[self.webview mainFrame] loadRequest:request]; 
```

但是如何暂停/恢复视频？我试过了：

```
 [self.webview stopLoading];
    [self.webview reload]; 
```

或者

```
 [[self.webview mainFrame] stopLoading];
    [[self.webview mainFrame] reload]; 
```

两个都不行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:46:12.873

最后，我调用了javascript来解决这个问题。

有一个像[CallJS](https://developer.apple.com/library/mac/#samplecode/CallJS/Introduction/Intro.html#//apple_ref/doc/uid/DTS10004241)这样的例子 我尝试从[YouTube JavaScript Player API Reference获取 api](https://developers.google.com/youtube/js_api_reference#Requirements)

但有一个更简单的：[来自 jsfiddle](http://jsfiddle.net/4WPmY/6/)

```
<div id="player"></div>
<a href="#" id="pause">Pause</a>
<a href="#" id="resume">Resume</a>... 
```

谢谢。

# c# - c# - 如何从可以处理特定文件扩展名的程序列表中启动一个进程？

> ID：15394295
> 
> 赞同：3
> 
> 时间：2013-03-13T19:08:23.303
> 
> 标签：c#, process, registry

我正在编写一个程序，其中有一个具有各种格式（.png、.jpg、.bmp、.ico...）的图像列表，到目前为止，我已经能够获得与每个格式相关的 shell 命令列表文件，像这样：

```
"\"C:\\Program Files\\Paint.NET\\PaintDotNet.exe\" \"%1\""
"\"C:\\Program Files\\GIMP 2\\bin\\gimp-2.8.exe\" \"%1\""
"C:\\Windows\\System32\\rundll32.exe \"C:\\Program Files (x86)\\Windows Photo Viewer\\PhotoViewer.dll\", ImageView_Fullscreen %1"
"\"C:\\Windows\\system32\\mspaint.exe\" /pt \"%1\" \"%2\" \"%3\" \"%4\""    
"\"C:\\Program Files (x86)\\PDFCreator\\pdfcreator.exe\" -IF\"%1\"" string 
```

我不确定这是否正确，但这就是我到目前为止所拥有的。使用时：

```
Process.Start(completeProgramPath); 
```

该程序永远找不到，除非我使用类似的东西

```
Process.Start("mspaint.exe"); 
```

我希望能够指定操作系统应该使用哪个程序。我究竟做错了什么？是我的程序列表没有指向正确的东西，还是我没有使用 Process.Start(); 正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:11:43.733

如果要为每个图像打开默认程序，则只需提供文件名作为`Process.Start`方法的唯一参数，省略可执行路径，操作系统将在注册表中查找，因此您不必：

```
Process.Start("C:\some\picture.jpg"); 
```

这将打开扩展的默认程序`*.jpg`，并将文件的路径作为参数传递给它。

如果要指定程序，则应使用`Process.Start(string, string)`重载，其中将可执行文件的路径指定为第一个参数，将文件的路径指定为第二个参数。

如果您尝试使用注册表项中的确切值，它将不起作用，因为它们已`"%1"`添加到路径中，并且 rundll32 键具有附加参数。关键是在将它们传递给方法之前，您必须更改从注册表项中获取的字符串`Start`。

**示例：**
`"\"C:\\Program Files\\Paint.NET\\PaintDotNet.exe\" \"%1\""`将需要变为：
`"C:\Program Files\Paint.NET\PaintDotNet.exe"`

# c# - URL 重写，回发事件的 url 更改

> ID：15394306
> 
> 赞同：1
> 
> 时间：2013-03-13T19:08:57.387
> 
> 标签：c#, asp-classic, vbscript

我目前正在开发经典的 asp 应用程序，我们有 URL 重写页面。

在这些页面中，我们有我必须验证的小表格。当我按下提交按钮时，它会验证页面，但会更改页面的 URL。

我想停止更改 URL。

我对 ASP.NET C# 有同样的问题，所以我使用了`Form1.Action = Request.RawUrl;`

我怎样才能对经典的 asp 应用程序做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:08:30.693

相当于`Request.RawUrl`是

```
dim myUrl
myUrl = Request.ServerVariables("URL") 
```

所以

```
<Form action=<%=myUrl%> 'and the rest of the details 
```

但是，`Request.ServerVariables("URL")`不包括`querystring`（如果存在）。

如果需要，则必须手动构建它，执行类似的操作

```
dim myUrl
myUrl = Request.ServerVariables("URL") & "?" & Request.QueryString 
```

（您可能需要添加 if else 语句以使其更清晰）。

# html - 当鼠标悬停在其中一个上时，如何为共享一个类的所有元素添加边框？

> ID：15394310
> 
> 赞同：1
> 
> 时间：2013-03-13T19:09:10.740
> 
> 标签：html, css, class, html-table

是否可以通过仅使用 HTML 和 CSS 将鼠标悬停在一个上来更改所有属于“xyz”类的多个表格单元格的边框（或其他样式元素）？

我有两个动态生成的表。在这个特定的例子中，一个是 5 个单元格宽和 4 个单元格高，另一个表格是 4 x 3。

有：

*   第一个表中属于“xyz”类的 2 个单元格；
*   第二个表中属于“xyz”类的 1 个单元格。

**表格1：**

```
+----+----+----+----+----+
|    |xyz |    |    |    |
+----+----+----+----+----+
|    |    |    |    |    |
+----+----+----+----+----+
|    |    |    |xyz |    |
+----+----+----+----+----+
|    |    |    |    |    |
+----+----+----+----+----+ 
```

**表 2：**

```
+----+----+----+----+
|    |    |    |xyz |
+----+----+----+----+
|    |    |    |    |
+----+----+----+----+
|    |    |    |    |
+----+----+----+----+ 
```

我能做的是：

*   获取所有带有特定边框格式的“xyz”单元格；
*   获取一个“xyz”单元格以更新其悬停样式（ td.xyz:hover {...} ）。

我不能做的是：

*   让所有属于“xyz”的单元格在悬停在一个单元格上时更新其样式。

是否可以仅使用 HTML 和 CSS 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:13:30.250

不，CSS 仅适用于**兄弟**元素或**子**元素。**同一行中的**表格单元格是相邻的兄弟姐妹，但其他行中的其他单元格不是。因此，您需要使用 JavaScript 来完成此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:15:33.823

A jQuery solution would be:

```
$('.cellToHover').hover(function() {
    $('.cellToHover').addClass('hovered');
}, function() {
    $('.cellToHover').removeClass('hovered');
}); 
```

Here is a [Fiddle](http://jsfiddle.net/RU9X8/).

# dart - 用默认值初始化成员的最优雅的方法

> ID：15394313
> 
> 赞同：23
> 
> 时间：2013-03-13T19:09:13.430
> 
> 标签：dart

有没有办法利用初始化列表来*选择性地*初始化构造函数中的可选参数？以下示例在主体中使用**if(?x)**类型逻辑，因为不清楚如何仅在传入时在初始化列表中设置**_x 。**

```
class Point { 
    double _x = 0.0;
    double get x => _x;
    double _y = 0.0;
    double get y => _y;

    Point(
        {
        double x,
        double y
        })
    { 
        if(?x) { _x = x; }
        if(?y) { _y = y; }
    }
} 
```

另一种方法是使用构造函数：

```
Point(
      {
        double x: 0.0,
        double y: 0.0
      }) : _x = x, _y = y
{
} 
```

但是你在重复自己（0.0 多于一个地方），看起来 _x 和 _y 被初始化了两次，一次是针对成员，然后是初始化列表。此外，成员初始化器的一个好处是它可以是函数调用，而默认参数的默认值似乎需要常量。我希望/意识到性能影响很小。只想要一个很好的规范方法，可能用于代码生成。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-13T20:49:02.380

`this`您可以使用前缀在构造函数中初始化变量，例如：

```
class PointA { 
  double _x;
  double get x => _x;
  double _y;
  double get y => _y;

  PointA({double this._x=0.0, double this._y=0.0});
}

class PointB { 
  final double x;
  final double y;

  Point({double this.x=0.0, double this.y=0.0});
}

void main() {
  new PointA(_y:2.0); 
  new PointA(_x:3.0); 
  new PointA(_x:2.0, _y:3.0); 

  new PointB(y:2.0); 
  new PointB(x:3.0); 
  new PointB(x:2.0, y:3.0); 
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-14T23:20:00.260

[Chris Buckett 的回答](https://stackoverflow.com/questions/15394313/most-elegant-way-to-initialize-members-with-default-values/15396166#15396166)非常适合常量。显然有一个三元运算符在成员初始化程序中起作用。因此，如果字段的初始化很昂贵（比如需要函数调用和/或创建对象），这种方法似乎有效：

*   不要费心初始化类中的成员 - 更喜欢构造函数。否则，可能是白费力气。
*   跳过漂亮的*this.member*参数语法。而是使用成员名称并*以此来限定成员。*在作业中。
*   在成员初始化程序中使用*?parm*和三元运算符。这是一个示例，其中假定为成员创建默认值是昂贵的。

```
class Formats {
  static Map<String, dynamic> defaultFormats() {
    print("Expensive call - avoid if possible");
    return {"th": 'default th', "td": 'default td'};
  }

  Map<String, dynamic> leftTbl;
  Map<String, dynamic> rightTbl;

  Formats(
      {Map<String, dynamic>? leftTbl,
      Map<String, dynamic>? rightTbl})
      : leftTbl = leftTbl ?? defaultFormats(),
        rightTbl = rightTbl ?? defaultFormats();

  @override
  String toString() {
    return """
l => $leftTbl,
r => $rightTbl
""";
  }
} 
```

样品用途：

```
print(new Formats());
print(new Formats(leftTbl: {"th":'solid #089', "td":'solid #089' }));
print(new Formats(leftTbl: {"th":'solid #189', "td":'solid #189'},
      rightTbl: {"th":'solid #189', "td":'solid #189'})); 
```

输出：

```
Expensive call - avoid if possible
Expensive call - avoid if possible
l => {th: default th, td: default td},
r => {th: default th, td: default td}

Expensive call - avoid if possible
l => {th: solid #089, td: solid #089},
r => {th: default th, td: default td}

l => {th: solid #189, td: solid #189},
r => {th: solid #189, td: solid #189} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-05-26T09:50:36.797

作为对[user1338952 答案](https://stackoverflow.com/a/15422016/6181476)的修改，您可以执行以下操作：

```
class Formats { 

  static Map<String,dynamic> defaultFormats() {
    print("Expensive call - avoid if possible");
    return { 
      "th" : 'default th',
      "td" : 'default td'
    };
  }

  Map<String,dynamic> leftTbl;
  Map<String,dynamic> rightTbl;

  Formats(
      {
        Map<String,dynamic> leftTbl,
        Map<String,dynamic> rightTbl
      }) : this.leftTbl = leftTbl ?? defaultFormats(),
           this.rightTbl = rightTbl??  defaultFormats()
  { 
  }

  String toString() {
    return """
l => $leftTbl,
r => $rightTbl
""";
  }
} 
```

核心区别在于**if null 运算符**( `??`) 的使用。

在`this.leftTbl = leftTbl ?? defaultFormats()`中，如果`leftTbl`为 null，`defaultFormats()`则简单地将返回的值分配给它。

# sql - 将 SQL Select 语句组合成一个 Select 语句？（简化。）

> ID：15394321
> 
> 赞同：0
> 
> 时间：2013-03-13T19:09:29.383
> 
> 标签：sql, select, count

当谈到 SQL 时，我是个菜鸟，所以如果这很明显，请原谅我。我想找到客户字段的重复项，以及包含它们的完整记录。

**注意：** *我使用的是 MS SQL Server 2005。*

在想出以下内容之前，我尝试将其实现为单个 SQL Select 语句：

```
SELECT ModTab.* from modTab
    WHERE Customer IN (SELECT Customer
            FROM    ModTab
            GROUP BY Customer
            HAVING COUNT(Customer) > 1
        )
    ORDER BY Customer 
```

最初我尝试了十几种不同的变体，例如：

```
SELECT ModTab.*
FROM    ModTab
GROUP BY Customer,<ALL other fields...>
HAVING COUNT(Customer) > 1 
```

有没有类似第二种方法的东西可以完成同样的事情？（加上 Group by 子句对我来说似乎毫无意义？我不清楚为什么需要或使用它。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:13:06.357

尝试这个：

```
select modTab.*
from ModTab
join (
  select Customer, count(*) 
  from Modtab 
  group by Customer
) B on B.Customer = ModTab.Customer
order b Customer 
```

我相信这现在也解释了 group by 的必要性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:22:23.660

If using an RDBMS (such as SQLServer) that supports analytic functions, try:

```
select * from
(select m.*, count(*) over (partition by customer) cnt
 from Modtab m) ilq
where cnt > 1 
```

Otherwise, try:

```
select m.*
from Modtab m
where exists
(select 1
 from Modtab l
 where m.customer = l.customer and m.id <> l.id) 
```

(Replace `id` with the suitable primary key field for Modtab.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:28:36.663

```
WITH    numbered
AS ( SELECT   *, row_number() OVER ( PARTITION BY customer ORDER BY customer  ) AS nr FROM ModTab)
Select * from numbered WHERE   nr >1 
```

# scala - 如何消除与 scaladoc 中方法的链接的歧义？

> ID：15394322
> 
> 赞同：41
> 
> 时间：2013-03-13T19:09:30.947
> 
> 标签：scala, scala-2.10, scaladoc, method-names, disambiguation

我正在用[重载方法](https://en.wikipedia.org/wiki/Function_overloading)记录一个 Scala 类。在 scaladoc 注释中引用它们时如何区分它们？例如，如果我有

```
/**
 * The most important method is [[Doc.foo]].
 */
object Doc {
  def foo[A]: A = throw new UnsupportedOperationException;
  def foo[A,B >: A](x: A): B = x;
} 
```

然后跑`sbt doc`我得到

> Doc.scala:1：警告：链接目标“Doc.foo”不明确。几个（可能重载的）成员适合目标：
> 
> *   `foo[A,B>:A](x:A):B`对象文档中的方法[已选择]
> *   `foo[A]:Nothing`对象文档中的方法

对链接使用`foo[A,B >: A]`etc. 不起作用。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-14T01:55:44.623

以下似乎在 Scala 2.10 中起作用。

```
/**
 * The most important method is [[Doc.foo[A]:A*]].
 */ 
```

这是scaladoc给我的一些提示：

```
[warn] Quick crash course on using Scaladoc links
[warn] ==========================================
[warn] Disambiguating terms and types: Prefix terms with '$' and types with '!' in case both names are in use:
[warn]  - [[scala.collection.immutable.List!.apply class List's apply method]] and
[warn]  - [[scala.collection.immutable.List$.apply object List's apply method]]
[warn] Disambiguating overloaded members: If a term is overloaded, you can indicate the first part of its signature followed by *:
[warn]  - [[[scala.collection.immutable.List$.fill[A](Int)(⇒A):List[A]* Fill with a single parameter]]]
[warn]  - [[[scala.collection.immutable.List$.fill[A](Int,Int)(⇒A):List[List[A]]* Fill with a two parameters]]]
[warn] Notes: 
[warn]  - you can use any number of matching square brackets to avoid interference with the signature
[warn]  - you can use \. to escape dots in prefixes (don't forget to use * at the end to match the signature!)
[warn]  - you can use \# to escape hashes, otherwise they will be considered as delimiters, like dots. 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-12-05T12:46:59.477

我发现非常有用的`IntelliJ`是右键单击要放入 [[ ]] 的方法并选择“复制参考”。

脚步：

1.  你找到了一个你想在其他地方引用的方法。

[![在此处输入图像描述](../Images/fedf9316308863441c6e0a4d3b1f854f.png)](https://i.stack.imgur.com/n2Ysg.png)

2.  您右键单击方法名称并选择“复制参考”。

[![在此处输入图像描述](../Images/485b59ee0538e5a94eab05bae8197a42.png)](https://i.stack.imgur.com/updPv.png)

3.  您将其粘贴到文档中的 [[ ]] 中（并在其旁边写下您选择的标签，例如“apply(String)”）。

[![在此处输入图像描述](../Images/31348bece6becf0f98d25ecb77a41fd3.png)](https://i.stack.imgur.com/BGxyq.png)

4.  瞧。

[![在此处输入图像描述](../Images/a996b56fa47ca98d87a5f0c2a2e6170a.png)](https://i.stack.imgur.com/k2sKq.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-07-22T17:17:49.993

通过研究 scaladoc 的文档，我找到了复杂签名的解决方案（显然是唯一的解决方案）。

*   不要在签名中使用空格
*   使用参数名称
*   对于参数类型和返回类型，在所有点前面加上一个反斜杠`\`
*   使用`*`签名末尾的星号
*   使用完整的签名（因为向您提出了模棱两可的签名）。这一步是可选的，你可以提前停止签名，只要你完成它`*`

**例子：**

```
package org.my.stuff

class ReturnType

object Foo {
  class Bar {
    def lara(s: String): String = ???
    def lara(s: Foo.Bar): ReturnType= ???
  }
}

/** [[org.my.stuff.Foo$.Bar.lara(s:org\.my\.stuff\.Foo\.Bar):org\.my\.stuff\.ReturnType* The link to the right lara method]]
  */
object DocumentFooBarBingComplex {
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-01-21T22:25:34.223

我仍然对让这项工作有多么困难以及 scaladoc 本身缺乏文档感到惊讶。我决定搜索 scala 代码库本身，希望能找到一些有用的例子。我发现的最好的是[https://github.com/scala/scala/blob/2.12.x/​​test/scaladoc/resources/links.scala](https://github.com/scala/scala/blob/2.12.x/test/scaladoc/resources/links.scala)。希望这对遇到此问题的其他人有用。

# c# - 使用 math.net 进行多重回归

> ID：15394328
> 
> 赞同：0
> 
> 时间：2013-03-13T19:09:44.923
> 
> 标签：c#, linear-regression, math.net, mathnet-numerics

您好，我正在尝试使用 math.net 进行多重回归，但我有点困惑。

```
var xdata = new DenseMatrix(
 new double[,]{{1, 36, 66, 45, 32},
             {1, 37, 68, 12, 2},
             {1, 47, 64, 78, 34},
             {1, 32, 53, 56, 32},
             {1, 1, 101, 24, 90}});

        var ydata = new double[] { 15, 20, 25, 55, 95 };

        var X = DenseMatrix.CreateFromColumns(new[] { new DenseVector(xdata.Length, 1), new DenseVector(xdata) });
        var y = new DenseVector(ydata);

        var p = X.QR().Solve(y);
        var a = p[0];
        var b = p[1]; 
```

我想我不懂 Math.Net，对此有任何帮助都会很棒。基本上我有多个 x 和一个 y 并且需要从中获取系数数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:04:07.647

从您准备矩阵的方式（即第一列始终为 1），在我看来，您实际上有 4 个自变量，并且您正在寻找一个简单的回归，其中所有自变量的线性组合作为目标函数：

```
y : (x1, ..., x4) -> p0 + p1*x1 + ... + p4*x4 
```

如果是这种情况，只需删除该行`var X = ...`并重命名`xdata`为`X`，然后所有 5 个参数都将在`p`向量中按预期可用。

鉴于上面的数据，你最终会得到大约：

```
y : (x1, ..., x4) -> 123.2 - 8.9*x1 + 2.8*x2 + 3.7*x3 - 4.4*x4 
```

# android - 添加 SherlockActionBar 后出现 java.lang.OutOfMemoryError

> ID：15394329
> 
> 赞同：0
> 
> 时间：2013-03-13T19:09:53.393
> 
> 标签：android, actionbarsherlock

我添加了 SherlockActionBar（布局自上一个版本以来没有更改），在多个设备上测试了我的应用程序，一切正常，但 ACRA 一直在报告新的和新的类似错误：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{net.aviascanner.aviascanner/net.aviascanner.aviascanner.ui.activities.SearchResultsActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
        at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3371)
        at android.app.ActivityThread.access$700(ActivityThread.java:127)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1162)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4441)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
        at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
        at android.view.LayoutInflater.createView(LayoutInflater.java:606)
        at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
        at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
        at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:255)
        at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119)
        at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
        at net.aviascanner.aviascanner.ui.activities.SearchResultsActivity.onCreate(SearchResultsActivity.java:105)
        at android.app.Activity.performCreate(Activity.java:4465)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
        ... 12 more
Caused by: java.lang.reflect.InvocationTargetException
        at java.lang.reflect.Constructor.constructNative(Native Method)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
        at android.view.LayoutInflater.createView(LayoutInflater.java:586)
        ... 25 more
Caused by: java.lang.OutOfMemoryError
        at android.graphics.Bitmap.nativeCreate(Native Method)
        at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
        at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
        at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
        at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:530)
        at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:505)
        at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:357)
        at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:777)
        at android.content.res.Resources.loadDrawable(Resources.java:1940)
        at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
        at android.view.View.<init>(View.java:2844)
        at android.view.ViewGroup.<init>(ViewGroup.java:418)
        at android.widget.LinearLayout.<init>(LinearLayout.java:178)
        at android.widget.LinearLayout.<init>(LinearLayout.java:174)
        ... 28 more
android.view.InflateException: Binary XML file line #2: Error inflating class <unknown>
        at android.view.LayoutInflater.createView(LayoutInflater.java:606)
        at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
        at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
        at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:255)
        at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119)
        at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
        at net.aviascanner.aviascanner.ui.activities.SearchResultsActivity.onCreate(SearchResultsActivity.java:105)
        at android.app.Activity.performCreate(Activity.java:4465)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
        at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3371)
        at android.app.ActivityThread.access$700(ActivityThread.java:127)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1162)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4441)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
        at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
        at java.lang.reflect.Constructor.constructNative(Native Method)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
        at android.view.LayoutInflater.createView(LayoutInflater.java:586)
        ... 25 more
Caused by: java.lang.OutOfMemoryError
        at android.graphics.Bitmap.nativeCreate(Native Method)
        at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
        at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
        at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
        at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:530)
        at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:505)
        at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:357)
        at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:777)
        at android.content.res.Resources.loadDrawable(Resources.java:1940)
        at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
        at android.view.View.<init>(View.java:2844)
        at android.view.ViewGroup.<init>(ViewGroup.java:418)
        at android.widget.LinearLayout.<init>(LinearLayout.java:178)
        at android.widget.LinearLayout.<init>(LinearLayout.java:174)
        ... 28 more
java.lang.reflect.InvocationTargetException
        at java.lang.reflect.Constructor.constructNative(Native Method)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
        at android.view.LayoutInflater.createView(LayoutInflater.java:586)
        at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
        at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
        at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:255)
        at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119)
        at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
        at net.aviascanner.aviascanner.ui.activities.SearchResultsActivity.onCreate(SearchResultsActivity.java:105)
        at android.app.Activity.performCreate(Activity.java:4465)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
        at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3371)
        at android.app.ActivityThread.access$700(ActivityThread.java:127)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1162)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4441)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
        at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.OutOfMemoryError
        at android.graphics.Bitmap.nativeCreate(Native Method)
        at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
        at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
        at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
        at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:530)
        at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:505)
        at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:357)
        at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:777)
        at android.content.res.Resources.loadDrawable(Resources.java:1940)
        at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
        at android.view.View.<init>(View.java:2844)
        at android.view.ViewGroup.<init>(ViewGroup.java:418)
        at android.widget.LinearLayout.<init>(LinearLayout.java:178)
        at android.widget.LinearLayout.<init>(LinearLayout.java:174)
        ... 28 more
java.lang.OutOfMemoryError
        at android.graphics.Bitmap.nativeCreate(Native Method)
        at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
        at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
        at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
        at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:530)
        at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:505)
        at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:357)
        at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:777)
        at android.content.res.Resources.loadDrawable(Resources.java:1940)
        at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
        at android.view.View.<init>(View.java:2844)
        at android.view.ViewGroup.<init>(ViewGroup.java:418)
        at android.widget.LinearLayout.<init>(LinearLayout.java:178)
        at android.widget.LinearLayout.<init>(LinearLayout.java:174)
        at java.lang.reflect.Constructor.constructNative(Native Method)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
        at android.view.LayoutInflater.createView(LayoutInflater.java:586)
        at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
        at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
        at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
        at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
        at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:255)
        at com.actionbarsherlock.internal.ActionBarSherlockNative.setContentView(ActionBarSherlockNative.java:119)
        at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
        at net.aviascanner.aviascanner.ui.activities.SearchResultsActivity.onCreate(SearchResultsActivity.java:105)
        at android.app.Activity.performCreate(Activity.java:4465)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
        at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3371)
        at android.app.ActivityThread.access$700(ActivityThread.java:127)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1162)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4441)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
        at dalvik.system.NativeStart.main(Native Method) 
```

[我在 SherlockActionBar 问题跟踪器中的问题](https://github.com/JakeWharton/ActionBarSherlock/issues/852)

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:57:21.597

OutofMemory 异常是由于 res 文件夹中可用的可绘制对象而出现的。可绘制对象应在可绘制对象的文件夹中可用，而不是在单个文件夹中，以避免出现内存不足异常。

# c - 函数指针数组的长度

> ID：15394332
> 
> 赞同：1
> 
> 时间：2013-03-13T19:10:03.877
> 
> 标签：c

有没有一种安全的方法来获取函数指针数组的长度？

下面的工作吗？

```
sizeof((uintptr_t)(*fp) / sizeof(uintptr_t)(*fp[0])) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:13:58.130

无论元素类型如何，数组长度的标准习惯用法是：

```
#define countof(a) (sizeof(a) / sizeof(*(a))) 
```

只有当`a`它是一个实际的数组时才有效，即声明为`TYPE a[...]`. 如果`a`是从数组创建的指针`TYPE`，例如通过将数组传递给函数，上述宏将产生不正确的结果。

我怀疑您的代码是这种混乱的结果。它取消引用`fp`，只有当它是指向数组的指针时才是正确`fp`的，如果它是指向数组元素的指针则不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:14:41.797

不是动态分配的数组，也不是通过指向数组的指针（根据定义，它会排除动态分配的数组）。

`sizeof(apointer)`将返回指针的大小而不是它指向的缓冲区的大小。在 C 中没有办法`sizeof`知道指针指向一个数组或只是一个元素（实际上是一个 1 的数组）。

如果这样做`sizeof(*apointer)`，它将返回单个元素（或数组中的第一个元素）的大小，因为在 C 中，sizeof 无法知道指针指向数组还是仅指向单个元素。

# c# - LINQ DataContext 导致麻烦

> ID：15394333
> 
> 赞同：1
> 
> 时间：2013-03-13T19:10:04.737
> 
> 标签：c#, asp.net, linq, linq-to-sql

我有一个全局数据上下文，我会更新每个请求：

```
 protected void Page_Load(object sender, EventArgs e)
    {

        Response.ContentType = "application/json";
        Response.Write(GetResponse());
        Response.End();
    }

    public string GetResponse()
    {
        string fileName = this.Page.Request.PathInfo;
        fileName = fileName.Remove(0, fileName.LastIndexOf("/") + 1);

        DataContext.Renew();
        MethodInfo method = this.GetType().GetMethod(fileName);
        if (method == null)
            throw new InvalidOperationException(
                string.Format("Unknown method {0}.", fileName));
        return (string)method.Invoke(this, new object[0]);
    } 
```

但无论出于何种原因，通常当我收到多个请求（如多个 ajax 调用）时，我会收到如下错误：

```
 at System.ThrowHelper.ThrowArgumentException(ExceptionResource resource)
   at System.Collections.Generic.Dictionary`2.Insert(TKey key, TValue value, Boolean add)
   at System.Data.Linq.DataContext.GetTable(MetaTable metaTable)
   at System.Data.Linq.DataContext.GetTable[TEntity]()
   at LibKezberProjectManager.KezberPMDBDataContext.get_Cases() in c:\Users\jlarouche\Documents\Visual Studio 2012\Projects\KezberProjectManager\LibKezberProjectManager\KezberPMDB.designer.cs:line 204
   at LibKezberProjectManager.Data.Cases.GetAllScheduled() in c:\Users\jlarouche\Documents\Visual Studio 2012\Projects\KezberProjectManager\LibKezberProjectManager\Data.cs:line 113
   at LibKezberProjectManager.Logic.ScheduleManager.GetScheduledCases() in c:\Users\jlarouche\Documents\Visual Studio 2012\Projects\KezberProjectManager\LibKezberProjectManager\Logic.cs:line 1035
   at KezberProjectManager.CalendarServices.GetDates() in c:\Users\jlarouche\Documents\Visual Studio 2012\Projects\KezberProjectManager\KezberProjectManager\CalendarServices.aspx.cs:line 628 
```

我更新了每个请求的上下文，它只用于那个请求。难道我做错了什么？

DataContext.Renew() 调用 db = new KezDBContext();

所有电话都使用这个。

我所有的访问器方法都是静态的这一事实会是一个问题吗？我不会这么认为。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:30:58.980

您没有为您的 DataContext 提供代码，但我认为它被声明为静态字段/属性。这是一个很大的问题，因为 DataContext 不是线程安全的，但 ASP.NET 中的每个并发请求都在单独的线程上提供服务。您需要为每个请求创建一个 DataContext。这可以通过多种方式实现，最简单的（但不一定是最可维护的）可能是通过创建一个派生自 System.Web.UI.Page 的基类来将 DataContext 与 Page 对象相关联，所有页面依次来自该基类衍生的。

# html - 在我的浏览器中仅打开一侧的特定 div

> ID：15394334
> 
> 赞同：0
> 
> 时间：2013-03-13T19:10:05.097
> 
> 标签：html, css, iframe, embed

我有一个相当奇怪的问题：是否有可能在我的浏览器中仅打开网站的特定 div 元素？

我想知道的原因是，因为我只想嵌入这个网站的流元素： [http ://www.azubu.tv/channel/live_small.do?cn_id=2196420951001](http://www.azubu.tv/channel/live_small.do?cn_id=2196420951001)

该页面相当新，因此他们还没有提供共享嵌入代码功能，因此我考虑创建一个显示流的 Iframe，如下所示：

```
<iframe height="433" width="770" frameborder="0" src="http://www.azubu.tv/channel/live_small.do?cn_id=2196420951001"></iframe> 
```

虽然这个 iframe 显示了整个网站，但我只想显示流元素。我检查了侧面的代码，名为“player-wrap”的 div 元素几乎显示了我需要的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:00:44.773

您最好的选择可能是联系他们并请求嵌入功能。这可能不是他们的首要任务，所以如果你必须这样做，一个可能的解决方法可能是这个（[从这里找到的 SO 帖子修改](https://stackoverflow.com/a/5676721/1265817)）。

```
div{
    width: 960px;
    height: 424px;
    overflow: hidden;
}
iframe{
    position: relative;
    top: -300px;
    width:100%;
    height:800px;
}

<div>
    <iframe src="http://www.azubu.tv/channel/live_small.do?cn_id=2196420951001" autoscroll="false"></iframe>
</div> 
```

[http://jsfiddle.net/daCrosby/5PMyu/](http://jsfiddle.net/daCrosby/5PMyu/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-13T19:41:23.473

我认为最好的方法是使用 jQuery 的加载函数来返回 iframe。

例如，您的代码将是这样的，它将返回名为 .palyer_wrap 的视频的包装 div 并将其插入 #target-div。

```
$('#target-div').load('www.azubu.tv/channel/live_small.do?cn_id=2196420951001 .palyer_wrap'); 
```

# grails - Grails 和 Accumulo，在 Accumulo 的 jar 中发现了一个错误

> ID：15394336
> 
> 赞同：0
> 
> 时间：2013-03-13T19:10:14.610
> 
> 标签：grails, groovy

我正在尝试将 Grails 连接到 Accumulo，但我在似乎是 Accumulo-core.jar 的内容中遇到了一个错误。

我在 org.apache.accumulo.core.security.thrift.AuthInfo 上得到一个 java.lang.ClassNotFoundException

挖掘后我发现：

1）如果我自己导入，Grails 找不到。它会引发导入错误。

和

2) ZooKeeperInstance.class 底部的这行代码搞砸了整个项目：

```
 public org.apache.accumulo.core.client.Connector getConnector(org.apache.accumulo.core.security.thrift.AuthInfo auth) 
```

那条路在罐子里，我正盯着它看。我实际上不能在 security.thrift 路径中使用*任何东西。*但我可以使用其余的安全性。很奇怪。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:24:30.697

对于发现此问题的任何人，请使用 Maven 而不是将其放在 lib 目录中。我不确定为什么这是答案，但试一试。

# c++ - c++中的运算符重载问题

> ID：15394338
> 
> 赞同：0
> 
> 时间：2013-03-13T19:10:17.123
> 
> 标签：c++, operators

我的 C++ 程序中调用运算符的顺序似乎有一个奇怪的问题，我创建了一个包含一些运算符的类，这些运算符根据它们的参数抛出异常：

```
class Variant
{
public:
..stuff..
Variant(int data) {..stuff..}
operator int() throw(...)
{
    if(type == 0)
        return value;
    else
        throw 0;
}
Variant operator +(Variant &v) throw(...)
{
    Variant res;
    if(type == 2) {
        res.value = v.value;
        res.svalue = v.svalue;
..stuff..
        else
            throw 0;
        res.type = type;
    }
    return res;
}
Variant operator *(Variant &v) throw(...) {..stuff..}
}
..stuff..
    int res1;
    Variant res, res2;
..stuff..
//          try {
            if(res1 < 0) 
```

问题是，在下一行中，变量 res 上调用 Variant::int() 强制转换运算符并引发异常，并且即使所有操作数都是 Variant，就我所见，Variant::+ 运算符也永远不会被调用)

```
 res = res + Variant(res1) * res2;
            else 
```

而在下一行，正确的 Variant::+operator 被调用，一切都很好

```
 res = res + res2;
//          } catch (...) {
//              error = "Invalid operator";
//              isok = false;
// 
```

我刚刚注意到，只需将乘法放在一个临时变量变量中（如 tempv = Variant(res1) * res2）并分两步进行即可，但我不明白为什么。谁能建议什么会导致编译器尝试自动转换为 int ？我是否缺少操作员或其他什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:13:10.243

```
Variant operator +(Variant &v) 
```

应该

```
Variant operator +(const Variant &v) 
```

你`operator+`没有被调用的原因是因为临时创建的`Variant(res1)`不能绑定到非常量参数`Variant &v`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:16:03.997

“Variant::+ 运算符永远不会被调用” - 因为这是异常工作的方式，在**引发异常后，try{} 块的所有其余部分都被跳过**，控制权转到 catch(...){} 块

# android - 如果从 google play 安装应用程序，pushwoosh 不起作用

> ID：15394341
> 
> 赞同：3
> 
> 时间：2013-03-13T19:10:22.883
> 
> 标签：android, push-notification, google-play

我在我的 android 应用程序中集成了 pushwoosh 功能。我对其进行了测试，从eclipse安装了apk，并且能够接收到通知，一切都很好。但是，在将 apk 上传到 google play 并多次下载后，pushwoosh 控制面板中的订阅者在 24 小时后仍然为 1（与我从 eclipse 安装应用程序时相同）。

[我从官方指南](http://www.pushwoosh.com/programming-push-notification/android-push-notification-sdk-configuration-guide/)复制粘贴代码，并添加了一个小功能来检查是否`com.google.android.gsk`已安装，只是为了让模拟器运行应用程序而不会崩溃，但同样，当直接从我的电脑安装 apk 时，它在真实设备上工作。

有什么设置可以让 pushwoosh 从 googleplay 工作吗？或者也许我错过了一些已知问题？

我不认为问题是由于 pushwoosh 控制面板更新延迟，因为一个订阅者（我）在安装后就被计算在内，现在已经过了 24 小时。

# qt - Qt 4.8 从 ubuntu 编译到 windows

> ID：15394344
> 
> 赞同：0
> 
> 时间：2013-03-13T19:10:32.907
> 
> 标签：qt, mingw, qt-creator, qt4.8

我有一个简单的应用程序，可以在桌面上为 Ubuntu 12.04 编译，但不能在 Windows 上编译。[我安装了来自突触的 MinGW 工具链和来自这里](http://qt-project.org/wiki/MinGW-64-bit)的 QT 64 位包。

我去了工具-->选项-->构建，并手动添加了/usr/bin/i686-w64-mingw32-g++，以及上面链接中的g++.exe（在bin文件夹中）作为MANUAL_1和MANUAL_2。

当我去创建一个自定义目标时，我无法选择手动工具链，它恢复了标准的 GCC x86_64 linux。

我究竟做错了什么？我怀疑 g++.exe 文件是否可以工作，因为它是 Windows 二进制文件，但为什么它不选择系统 mingw 二进制文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T00:02:28.603

您应该检查的几件事

*   你的 gcc 版本号
*   您的 gcc 路径是否添加到环境变量中？

我也发现在 Windows 中编译我的 MINGW Qt 应用程序非常困难，经过对网络的大量研究，我发现 qt4 可以与 gcc 4.4.0 MINGW 一起使用。我从 qt 网站下载了 qtcreator 2.1 并从 qtcreator 目录复制 MINGW 文件夹，将该文件夹复制到我的 Windows 根目录中，然后安装最新的 qt creator 和 qt4 sdk，添加 gcc 的路径，最后 qt creator 编译我的代码。

# ruby-on-rails - 为什么我的 Rails 资源会被预编译两次？

> ID：15394345
> 
> 赞同：16
> 
> 时间：2013-03-13T19:10:33.070
> 
> 标签：ruby-on-rails, asset-pipeline, activeadmin

我注意到我的资产似乎被编译了两次，这大大减慢了我的部署速度，因为这一步是最耗时的部分：

```
~/projects/rewportal(mapwidget ✔) rake assets:precompile
/home/ruy/.rvm/rubies/ruby-1.9.3-p194/bin/ruby /home/ruy/.rvm/gems/ruby-1.9.3-p194@rewportal/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets
AssetSync: using /home/ruy/projects/rewportal/config/initializers/asset_sync.rb
AssetSync: using /home/ruy/projects/rewportal/config/initializers/asset_sync.rb
AssetSync: Syncing.
Using: Directory Search of /home/ruy/projects/rewportal/public/assets
Uploading: assets/application-5170f52c1dd49cb382d5135bee01d75e.js
[...]
Fetching files to flag for delete
Flagging 8 file(s) for deletion
Deleting: assets/active_admin-4ce46d089d4b0080e87c9abcb6fa6c97.css
[...]
AssetSync: Done. 
```

这正常吗？

当我预编译到其他环境（非生产环境）时，我可以两次看到每个资产的详细编译：

```
~/projects/rewportal(mapwidget ✔) rake RAILS_ENV=qa assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/home/ruy/.rvm/rubies/ruby-1.9.3-p194/bin/ruby /home/ruy/.rvm/gems/ruby-1.9.3-p194@rewportal/bin/rake assets:precompile:all RAILS_ENV=qa RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
AssetSync: using /home/ruy/projects/rewportal/config/initializers/asset_sync.rb
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
Compiled gmaps4rails/gmaps4rails.base.js  (141ms)  (pid 8480)
Compiled gmaps4rails/gmaps4rails.googlemaps.js  (148ms)  (pid 8480)
[...]
Compiled active_admin.css  (1299ms)  (pid 8480)
Compiled active_admin/print.css  (113ms)  (pid 8480)
** Invoke assets:precompile:nondigest (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
AssetSync: using /home/ruy/projects/rewportal/config/initializers/asset_sync.rb
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:nondigest
Compiled gmaps4rails/gmaps4rails.base.js  (133ms)  (pid 8480)
Compiled gmaps4rails/gmaps4rails.googlemaps.js  (133ms)  (pid 8480)
[...]
Compiled active_admin.css  (1290ms)  (pid 8480)
Compiled active_admin/print.css  (116ms)  (pid 8480)
AssetSync: Syncing.
Using: Directory Search of /home/ruy/projects/rewportal/public/assets
Uploading: assets/active_admin-d05b61ab8366b74eabc9074d3e60fe82.css.gz
[...]
Fetching files to flag for delete
Flagging 6 file(s) for deletion
Deleting: assets/active_admin-ec90e7d9a9f45f14d1387f58fa1452b4.css
[...]
AssetSync: Done. 
```

我`application.rb`的有以下几点：

```
config.assets.precompile += %w( active_admin/print.css active_admin.css active_admin.js admin.js admin.css html5shiv.js ) 
```

想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-09-08T15:30:01.827

Rails 3 默认编译一次生成指纹资产，一次生成非指纹资产（指纹资产在文件名中有 MD5 哈希）。

您可以使用[turbo-sprockets-rails3 gem](https://github.com/ndbroadbent/turbo-sprockets-rails3)从一个编译中创建两者。

在 Rails 4 中，此功能被提取到[sprockets-rails gem](https://github.com/rails/sprockets-rails)中并且行为发生了变化，因此在 Rails 4 中不会发生双重编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T14:16:17.650

你在用 capistrano 吗？如果是这样，您可以尝试在本地编译您的资产，然后上传到服务器，任务如下

```
namespace :deploy do
  namespace :assets do
    desc "Precompile assets on local machine and upload them to the server."
    task :precompile, roles: :web, except: {no_release: true} do
      run_locally "bundle exec rake assets:precompile"
      find_servers_for_task(current_task).each do |server|
        run_locally "rsync -vr --exclude='.DS_Store' public/assets #{user}@#{server.host}:#{shared_path}/"
      end
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-29T11:45:41.140

我的解决方案（Rails 3）是运行`rake assets:precompile:primary`而不是`rake assets:precompile:all`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-06T20:20:28.247

我覆盖了 deploy.rb 中的 deploy_all 任务以在上传之前进行编译：

```
task :remake_all do
  puts "precompiling assets"
  res = `env rake assets:precompile:all RAILS_ENV=precompile RAILS_GROUPS=assets 2>&1`

  $stderr.puts "assets res is: #{res}"
  if res =~ /aborted|don't|invalid|segmentation|bug/i
    puts "############  Unable to compile assets  #########" 
    exit
  end
end 
```

我遇到了开发环境无法正确编译以及生产环境需要访问防火墙后面的 mysql 服务器的问题，因此创建了一个名为 :precompile 的新环境

# python-sphinx - 在另一个页面中添加对子标题或锚点的交叉引用

> ID：15394347
> 
> 赞同：136
> 
> 时间：2013-03-13T19:10:39.850
> 
> 标签：python-sphinx, restructuredtext, sections, cross-reference

如何将 reST/Sphinx 页面中的交叉引用插入到同一文档集中另一个页面中的子标题或锚点？

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2013-10-23T13:51:13.537

“reST/Sphinx”的表达使问题的范围不清楚。它是关于一般的 reStructuredText*和*Sphinx，还是*仅*关于Sphinx*中使用的*reStructuredText （而不是一般的 reStructuredText）？我将涵盖这两种情况，因为使用 RST 的人可能会在某些时候遇到这两种情况：

# 狮身人面像

除了可用于链接到各种实体（如类（`:class:`））的特定领域指令外，还有通用`:ref:`指令，[在此处](http://www.sphinx-doc.org/en/stable/usage/restructuredtext/roles.html#cross-referencing-arbitrary-locations)记录。他们举了这个例子：

```
 .. _my-reference-label:

    Section to cross-reference
    --------------------------

    This is the text of the section.

    It refers to the section itself, see :ref:`my-reference-label`. 
```

尽管 RST 提供的通用超链接机制在 Sphinx 中确实有效，但文档建议不要在使用 Sphinx 时使用它：

> 建议在标准 reStructuredText 链接到节（如`Section title`_）上使用 ref，因为它适用于文件、节标题更改时以及支持交叉引用的所有构建器。

# RST，一般

将 RST 文件转换为 HTML 的工具不一定有*集合*的概念。例如，如果您依赖 github 将 RST 文件转换为 HTML，或者如果您使用命令行工具（如`rst2html`. 不幸的是，用于获得所需结果的各种方法因您使用的工具而异。例如，如果您使用`rst2html`并且希望文件`A.rst`链接到文件中名为“Section”的部分，`other.rst`并且希望最终的 HTML 在浏览器中工作，那么`A.rst`将包含：

```
`This <other.html#section>`__ is a reference to a section in another
file, which works with ``rst2html``. Unfortunately, it does not work
when the HTML is generated through github. 
```

您必须链接到最终的 HTML 文件，并且您必须知道`id`该部分的内容是什么。如果您想对通过 github 提供的文件执行相同操作：

```
`This <other.rst#section>`__ is a reference to a section in another
file, which works on github. Unfortunately, it does not work when you
use ``rst2html``. 
```

在这里，您也需要知道`id`该部分的内容。但是，您链接到 RST 文件，因为只有在访问 RST 文件时才会创建 HTML。（在撰写此答案时，不允许直接访问 HTML。）

[此处](https://github.com/lddubeau/rst-on-github/tree/7369c0e79d4d4848ab6d126ff51568e478651ee2)提供了一个完整的示例。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2016-10-24T18:44:23.203

**2016 年新的、更好的答案！**

autosection[扩展](http://www.sphinx-doc.org/en/stable/ext/autosectionlabel.html)使您可以轻松地做到这一点。

```
=============
Some Document
=============

Internal Headline
================= 
```

那么，后来……

```
===============
Some Other Doc
===============

A link-  :ref:`Internal Headline` 
```

这个扩展是内置的，所以你只需要编辑`conf.py`

```
extensions = [
    .
    . other
    . extensions
    . already
    . listed
    .
    'sphinx.ext.autosectionlabel',
] 
```

您唯一需要注意的是，现在您不能在整个文档集合中复制内部标题。（值得。）

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-02-23T16:30:55.897

例子：

```
Hey, read the :ref:`Installation:Homebrew` section. 
```

where`Homebrew`是另一个名为`Installation.rst`.

这使用了[autosection 功能](https://www.sphinx-doc.org/en/master/usage/extensions/autosectionlabel.html)，因此需要`config.py`使用以下内容进行编辑：

```
extensions = [
    'sphinx.ext.autosectionlabel'
]
autosectionlabel_prefix_document = True 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-10-13T10:02:54.620

在 Sphinx 3.0.3 中，唯一对我有用的解决方案是`:any:`（请参阅[https://www.sphinx-doc.org/en/1.5/markup/inline.html#cross-referencing-anything](https://www.sphinx-doc.org/en/1.5/markup/inline.html#cross-referencing-anything)）。假设，一个文档有这样一个部分：

```
... _my-section:

My Section
----------

Lorem ipsum blablabla 
```

然后另一个文档可以具有以下片段来创建链接：

```
See :any:`my-section` for the details 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-03T16:05:58.580

添加对我感到困惑的行为的描述。

章节标题必须在其前面使用文件名（此处为概述）引用：

概述.rst：

```
 ************
    API Overview
    ************ 
```

索引.rst：

```
 :ref:`overview:API Overview` 
```

但是，在引用链接时，文件名（此处为常量）不得存在：

常量.rst：

```
 .. _section-constants:

    *******************
    Enums and Constants
    ******************* 
```

api.rst：

```
 :ref:`section-constants` 
```

此外，为此，必须启用扩展“autosectionlabel”：

配置文件：

```
 extensions = [
        ...
        "sphinx.ext.autosectionlabel"
    ] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-09T07:21:05.010

我一直在努力完成这项工作，我发现实际的符号是config.py`:ref:'{dir-path}/Installation:Homebrew'`所在`{dir-path}`的 Installation.rst 的相对路径

# cocoa-touch - 让自定义 UIView 执行 Speak 动作

> ID：15394348
> 
> 赞同：1
> 
> 时间：2013-03-13T19:10:42.317
> 
> 标签：cocoa-touch, ios6, speech

在大多数 Apple 提供的控件中，您可以点击并按住文本，然后获取复制/粘贴菜单，该菜单通常在末尾有“Speak”。

我有一个自定义控件（UIView 后代），我想做同样的事情。

我可以弹出我自己的菜单没问题，虽然我不需要它们，但复制和粘贴是内置的，但是有没有（appstore 合法）方法可以让控件在用户命令上“说话”，给定一个文本块?

我不想在没有用户交互的情况下在代码中触发它。好吧，我愿意，但我怀疑那是不可能的，或者周围会有很多代码/文档来做这件事:)

VoiceOver 不是一个选项，因为该应用程序是针对儿童的，并且画外音的手势变化可能会导致问题。我已经用适当的数据设置了可访问性属性，所以如果它打开，那么它就*可以*工作。

谢谢！

# regex - 带有 XPath 正则表达式的字符串的小写部分

> ID：15394350
> 
> 赞同：1
> 
> 时间：2013-03-13T19:10:46.413
> 
> 标签：regex, xpath, replace, xslt-2.0

在一个节点中，一个字符串可能包含一个或多个由单引号或双引号分隔的子字符串。例如

```
<node>Some text "and Some" More</node> 
```

我要做的是小写没有被引号包围的文本，所以结果应该如下所示：

```
some text "and Some" more 
```

我尝试了两件事：

1.  with `replace`：`replace('Some text "and Some" More', '"([^"]*)"', '*')`这将用 * 替换双引号中的文本。但是我怎么能小写呢？这不会产生预期的结果：`replace('Some text "and Some" More', '"([^"]*)"', lower-case('$1'))`
2.  与`tokenize`：`for $t in tokenize('Some text "and Some" More', '"') return $t`。由于我的节点**不会**以“开头，我知道奇数条目将是用引号括起来的子字符串。但我不知道如何选择和小写只有奇数条目。我试过`position()`但它在每次迭代时返回 1 .

感谢您查看这个。非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:44:18.310

唷。

如果你喜欢它的艰难方式：

`concat(translate(substring-before(//node/text(), '"'),'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz') ,substring(substring-after(//node/text(), '"'), 1, string-length(substring-after(//node/text(), '"')) - string-length(substring-after(substring-after(//node/text(), '"'), '"')) -1) , translate(substring-after(substring-after(//node/text(), '"'), '"'), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'))`

只需`//node/text()`用任何 XPath 替换为您想要的文本。我这样做只是为了好玩，这不是“最干净”（HA！）的解决方案。

您可以通过确保放入的节点是上下文节点来使其更快，或者提供更直接的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:54:51.603

**在 XQuery**中，您可以使用

```
string-join(
  for $x at $i  in tokenize('Some text "and Some" More', '"') return
    if ($i mod 2 = 1) then lower-case($x)
    else $x
  , '"') 
```

但是xpath，只有一个残缺不全的at。

**在 XPath 3**中，您可以使用 ! 简单的地图运算符（有点像 for，除了它设置 . 和 position()）：

```
string-join(
  tokenize('Some text "and Some" More', '"') !
    if (position() mod 2 = 1) then lower-case(.)
    else .
  , '"') 
```

最后在**XPath 2**中，您可以遍历索引并获取每个索引的子字符串：

```
string-join(
  for $i in 1 to count(tokenize('Some text "and Some" More', '"')) return
    if ($i mod 2 = 1) then lower-case(tokenize('Some text "and Some" More', '"')[$i])
    else tokenize('Some text "and Some" More', '"')[$i]
  , '"') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T05:53:41.940

**这是一个单一的 XPath 2.0 表达式，它以所需的方式处理带引号和不带引号的字符串的任何混合 - 以任何顺序**：

```
 string-join(
  (for $str in tokenize(replace(., "(.*?)("".*?"")([^""]*)", "|$1|$2|$3|", "x"),"\|")
     return
      if(not(contains($str, """")))
        then lower-case($str)
        else $str
  ),
  "") 
```

**为了进行全面测试，我在以下 XML 文档上评估上述表达式：**

```
<node>Some "Text""and Some" More "Text" XXX "Even More"</node> 
```

**产生了想要的正确结果**：

```
some "Text""and Some" more "Text" xxx "Even More" 
```

* * *

**XSLT 2.0 验证**：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:sequence select=
  'string-join(
  (for $str in tokenize(replace(., "(.*?)("".*?"")([^""]*)", "|$1|$2|$3|", "x"),"\|")
     return
      if(not(contains($str, """")))
        then lower-case($str)
        else $str
  ),
  "")
  '/>
 </xsl:template>
</xsl:stylesheet> 
```

**当对上述 XML 文档应用此转换时，将评估 XPath 表达式，并将此评估的结果复制到输出**：

```
some "Text""and Some" more "Text" xxx "Even More" 
```

* * *

**最后，一个 XSLT 2.0 解决方案——更容易编写和理解：**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/*">
  <xsl:analyze-string select="." regex='".*?"'>
   <xsl:non-matching-substring>
     <xsl:sequence select="lower-case(.)"/>
   </xsl:non-matching-substring>
   <xsl:matching-substring><xsl:sequence select="."/></xsl:matching-substring>
  </xsl:analyze-string>
 </xsl:template>
</xsl:stylesheet> 
```

# java - @Value 注释类型从 String 转换为 Integer

> ID：15394351
> 
> 赞同：75
> 
> 时间：2013-03-13T19:10:52.813
> 
> 标签：java, spring, casting, annotations, property-placeholder

我正在尝试将值的输出转换为整数：

```
@Value("${api.orders.pingFrequency}")
private Integer pingFrequency; 
```

以上抛出错误

```
org.springframework.beans.TypeMismatchException: 
    Failed to convert value of type 'java.lang.String' to required type 'java.lang.Integer'; 
nested exception is java.lang.NumberFormatException: 
    For input string: "(java.lang.Integer)${api.orders.pingFrequency}" 
```

我也试过`@Value("(java.lang.Integer)${api.orders.pingFrequency}")`

谷歌似乎没有在这个问题上说太多。我想总是处理一个整数，而不是在使用它的任何地方解析这个值。

**解决方法**

我意识到一种解决方法可能是使用 setter 方法为我运行转换，但如果 Spring 可以做到，我宁愿学习一些关于 Spring 的知识。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-13T19:38:10.187

假设您的类路径中有一个属性文件，其中包含

```
api.orders.pingFrequency=4 
```

我试过里面`@Controller`

```
@Controller
public class MyController {     
    @Value("${api.orders.pingFrequency}")
    private Integer pingFrequency;
    ...
} 
```

我的 servlet 上下文包含：

```
<context:property-placeholder location="classpath:myprops.properties" /> 
```

它工作得很好。

因此，要么您的属性不是整数类型，要么您没有正确配置属性占位符，或者您使用了错误的属性键。

我尝试使用无效的属性值运行，`4123;`. 我得到的例外是

```
java.lang.NumberFormatException: For input string: "4123;" 
```

这让我觉得你的财产的价值是

```
api.orders.pingFrequency=(java.lang.Integer)${api.orders.pingFrequency} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-13T19:35:28.540

我在互联网上寻找答案，我发现了以下内容

```
@Value("#{new java.text.SimpleDateFormat('${aDateFormat}').parse('${aDateStr}')}")
Date myDate; 
```

所以在你的情况下你可以试试这个

```
@Value("#{new Integer('${api.orders.pingFrequency}')}")
private Integer pingFrequency; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-12-07T10:37:57.473

如果要将**属性**从属性文件转换为**整数**，我发现有**2 个解决方案：**

给定场景：**customer.properties**包含**customer.id = 100**作为字段，您希望在 spring 配置文件中以**整数**形式访问它。属性**customerId**在 Bean **Customer**中声明为**int类型**

 **解决方案1：

```
<property name="customerId" value="#{T(java.lang.Integer).parseInt('${customer.id}')}" />
```

在上面的行中，属性文件中的**字符串**值被转换为**int**类型。

解决方案2：使用其他扩展名代替**propeties**。例如-如果您的属性文件名为 **customer.properties** ，则将其设为**customer.details**并在配置文件中使用以下代码

```
<property name="customerId"  	value="${customer.id}" />
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-05-19T14:09:19.273

我有完全相同的情况。这是由于 Spring 上下文中没有[PropertySourcesPlaceholderConfigurer](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/support/PropertySourcesPlaceholderConfigurer.html)`@Value`引起的，它根据类内部的注释解析值。

包含一个属性占位符来解决问题，整数不需要使用Spring表达式（如果使用，属性文件不必存在`ignore-resource-not-found="true"`）：

```
<context:property-placeholder location="/path/to/my/app.properties"
    ignore-resource-not-found="true" /> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-03-23T20:33:08.413

如果您使用的是 @Configuation，则在静态 bean 下实例化。如果不是静态的 @Configutation 很早就被实例化，并且负责解析 @Value、@Autowired 等注释的 BeanPostProcessors 无法对其采取行动。参考[这里](https://www.javacodegeeks.com/2013/07/spring-bean-and-propertyplaceholderconfigurer.html)

```
@Bean
public static PropertySourcesPlaceholderConfigurer propertyConfigurer() {
   return new PropertySourcesPlaceholderConfigurer();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-29T12:19:57.577

我用这个解决了同样的问题。请参阅此[Spring MVC：@Value 注释以获取在 *.properties 文件中定义的 int 值](https://stackoverflow.com/questions/27957364/spring-mvc-value-annotation-to-get-int-value-defined-in-properties-file)

```
@Value(#{propertyfileId.propertyName}) 
```

作品

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-03T13:25:37.637

当您有 2 个具有相同文件名的资源时也会出现此问题；在类路径中配置的 2 个不同的 jar 或目录路径中说“configurations.properties”。例如：

您的流程或 Web 应用程序（jar、war 或 ear）中有“configurations.properties”。但是另一个依赖项（jar）在同一路径中具有相同的文件“configurations.properties”。然后我想 Spring 不知道（@_@？）从哪里获取属性，只是发送在 @Value 注释中声明的属性名称。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-18T14:14:49.650

就我而言，问题在于我的 POST 请求被发送到与 GET 相同的 url（使用“?..=..”获取参数），并且该参数与表单参数具有相同的名称。可能 Spring 正在将它们合并到一个数组中并且解析抛出错误。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-30T03:00:45.730

使用@Value 时，应在Class 上添加@PropertySource 注解，或者在spring 的xml 文件中指定properties holder。例如。

```
@Component
@PropertySource("classpath:config.properties")
public class BusinessClass{
   @Value("${user.name}")
   private String name;
   @Value("${user.age}")
   private int age;
   @Value("${user.registed:false}")
   private boolean registed;
} 
```

配置属性

```
user.name=test
user.age=20
user.registed=true 
```

这行得通！

当然，您可以使用占位符 xml 配置来代替注解。春天.xml

```
<context:property-placeholder location="classpath:config.properties"/> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-07-13T08:12:16.040

由于使用**@Value("new Long("myconfig")")**和 cast 可能会在**启动时****抛出错误**，如果**找不到配置**或者不是相同的预期**数字格式**

 ******我们使用了以下方法，并且通过故障安全检查按预期工作。

```
@Configuration()
public class MyConfiguration {

   Long DEFAULT_MAX_IDLE_TIMEOUT = 5l;

   @Value("db.timeoutInString")
   private String timeout;

   public Long getTimout() {
        final Long timoutVal = StringUtil.parseLong(timeout);
        if (null == timoutVal) {
            return DEFAULT_MAX_IDLE_TIMEOUT;
        }
        return timoutVal;
    }
} 
```********

# javascript - String.fromCharCode() 是如何实现的？

> ID：15394355
> 
> 赞同：0
> 
> 时间：2013-03-13T19:11:07.630
> 
> 标签：javascript, string

```
var x = String.fromCharCode(65);

console.log(x);  //returns "A" 
```

它接受一个整数并返回相应的字符（字符串），但该字符的代码与输入完全相同！

这里的引擎盖下会发生什么？它真的只是返回它接受的东西吗？还是有任何额外的逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:12:33.697

看看[@spidermonkey](https://developer.mozilla.org/en-US/docs/SpiderMonkey/Getting_SpiderMonkey_source_code)源代码

fromCharCode 在[jsstr.cpp中定义](https://github.com/havocp/hwf/blob/master/deps/spidermonkey/jsstr.cpp)

它使用 a`unitStringTable`进行映射。该表是通过预处理器指令定义的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:14:38.597

我相信它只是维护一个 ASCII 代码字典并为输入整数 {key} 返回字符 {value}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:18:41.870

`fromCharCode`用于将 Unicode 数字转换为字符。Unicode`65`是字符`A`。所以`String.fromCharCode(65)`返回`A`。

`What happens under the hood here?`

实现可能是`HashMap`键值对，其中 Unicode 值映射到相应的字符，或者它可能是接受和返回`switch`的语句。`Unicode``character`

使用伪代码实现`switch`：

```
function fromCharCode(*args)
{
   return args.map(unicodeToChar).join('')
}

function unicodeTochar(unicode)
{
   switch(unicode)
   {
      //something

      case 65:
        return 'A'
      case 66:
        return 'B'

     //something
   }
} 
```

# javascript - Backbone 0.9.10 中验证错误的解决方法

> ID：15394356
> 
> 赞同：0
> 
> 时间：2013-03-13T19:11:09.827
> 
> 标签：javascript, backbone.js

我正在使用主干 0.9.10。

```
var Person = Backbone.Model.extend({
    defaults: {
        name: "John Doe",
        age: 30
    },
    validate: function (attrs) {
        if (attrs.age < 0) {
            console.log("Age must be positive, idiot!");
        };
    }
}); 
```

如果我在控制台上这样做......

```
var p = new Person;
p.set("age", -20, {validate: true}); 
```

...我的模型无论如何都会更新。我怎样才能防止这种情况？

我知道[有一个问题 open](https://github.com/documentcloud/backbone/issues/2153)，但是有什么解决方法吗？还是我需要等待错误修复？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:38:40.110

问题是您的调用`set`使用属性名称`Age`（大写`A`）而不是`age`.

```
p.set("age", -20, {validate: true}); 
```

此外，当`validate`失败时，您应该返回`undefined`.

```
validate: function (attrs) {
    if (attrs.age < 0) {
        return "Be more positive!";
    }
} 
```

# vtk - 在 VTK 窗口中居中图像

> ID：15394359
> 
> 赞同：1
> 
> 时间：2013-03-13T19:11:17.427
> 
> 标签：vtk

我正在使用 vtkTexturedActor2D 和 vtkImageMapper 来显示 2D 图像。我可以用

```
actor.GetPositionCoordinate().SetCoordinateSystemToNormalizedDisplay();
actor.this.Actor.SetPosition(0.5, 0.9); 
```

将图像放置在窗口的中心，但它不是居中对齐的。图像的一角位于中心。如何将图像居中对齐，以使图像的中心位于窗口的中心？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T18:56:56.180

我有同样的问题。

这似乎解决了它：

```
 float height, width;
  this->d_actor->GetPositionCoordinate()->SetCoordinateSystemToNormalizedViewport();
  this->d_actor->GetPositionCoordinate()->SetViewport(this); // Without this was getting weird results
  height = this->d_actor->GetHeight();
  width = this->d_actor->GetWidth();
  this->d_actor->GetPositionCoordinate()->SetValue(.5 - width/2.0, .5 - height/2.0); 
```

# jquery - Mouseenter 子项在鼠标悬停时闪烁

> ID：15394360
> 
> 赞同：0
> 
> 时间：2013-03-13T19:11:29.937
> 
> 标签：jquery, html

当我将鼠标悬停在滑块上时，我试图显示导航栏。导航栏在其中，您可以在此处看到：

[http://jsfiddle.net/warface/GhY3R/2/](http://jsfiddle.net/warface/GhY3R/2/)

当我的鼠标在导航栏上时如何避免这种故障？

```
$(function(){    
/* Slider nav mouseover thingy*/
    $('#slider').mouseenter(function(e){
        $('.portfolio nav').show();
    });
    $('#slider').mouseleave(function(e){
        $('.portfolio nav').hide();
    });
});

<div class="portfolio">    
    <div id="slider"></div>
    <nav>
        <a class="next" data-slider="slider" rel="next">▶&lt;/a>
        <a class="prev" data-slider="slider" rel="prev">◀</a>
    </nav>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:14:09.430

看到这个：[小提琴](http://jsfiddle.net/GhY3R/3/)

```
$(function(){    
  /* Slider nav mouseover thing*/
  $('#slider,nav').mouseenter(function(e){
     $('.portfolio nav').show();
  });
  $('#slider').mouseleave(function(e){
     $('.portfolio nav').hide();
  });
}); 
```

# .htaccess - htaccess 将主页重定向到子目录保持 url 相同

> ID：15394362
> 
> 赞同：0
> 
> 时间：2013-03-13T19:11:34.447
> 
> 标签：.htaccess, redirect

我试图弄清楚如何让我`.htaccess`将主页 URL 重定向到子目录（domain.com > domain.com/sub/sub），但我仍然希望 URL 显示为 domain.com。

在过去的一个小时里，我环顾四周，尝试了一些我发现的建议，但都没有奏效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:31:11.620

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^$ /sub/sub [L] 
```

# c# - 如何在没有特殊权限的情况下读取性能计数器值？

> ID：15394369
> 
> 赞同：-1
> 
> 时间：2013-03-13T19:12:00.197
> 
> 标签：c#, .net, security, performancecounter, code-access-security

我的 Office 加载项需要能够读取 System.Diagnostics 性能计数器（CPU、内存等），我不能假设用户是管理员组或性能监视器用户组的成员。我注意到有一个 PerformanceCounterPermission 对象。有没有人有我如何使用它来允许普通用户读取性能计数器的示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:35:13.867

您不需要管理员权限来读取或设置性能监视器上的值，只需首先创建它们。

# javascript - 从动态元素更改数字

> ID：15394373
> 
> 赞同：0
> 
> 时间：2013-03-13T19:12:10.207
> 
> 标签：javascript, jquery

我有这个代码发送用户输入的值......信息和数字作为数组发送并推送到另一个数组中，然后我在动态创建的列表元素中显示文本并在跨度元素中显示数字...... .

```
var button = $('#add');
    button.click(function() 
    {
        var filmnamn = $('#name');
        var filmnamnet = filmnamn.val();
        var betyg = $('#star');
        var betyget = betyg.val();
        betyget = Number(betyget);

        if(filmnamnet == 0)
        {
            $('#name').css('background-color', 'red');

        }
        if(betyget == 0)
        {
            $('#star').css('background-color', 'red');

        }
        if(betyget == 0 || filmnamnet == 0)
        {
            alert("Vänligen fyll i fälten korrekt");

        }
        else
        {
            var array = new Array();
            array.unshift(betyget);
            array.unshift(filmnamnet);
            film_array.unshift(array);
            betyg_array.unshift(array);
            updateFilmList();

        }

    });

    var film_list = $("#filmlista");
    var film_array = new Array();

function updateFilmList()
{
        document.getElementById("name").value = '';
        document.getElementById("star").value = 0;
        var filmen = film_array[0][0];
        var grade = film_array[0][1];
        var element = '<li class="lista">' + filmen + '<span class="betyg">'+ grade +'</span></li>';
        film_list.append(element);
        changeNumber();

} 
```

最后我有一个功能，我想将 span 元素中的数字更改为数字显示的星星数量......这工作正常，但仅适用于第一个创建的列表和 span 元素，当我尝试添加更多时listelements 数字不会显示为星号，有人可以告诉我为什么会发生这种情况并指出解决问题的方向吗？

```
function changeNumber(){
    var elements= document.getElementsByClassName("betyg");    
    for (var i=0; i<elements.length; i++) {                     
        var element = elements[i];
        var length = parseInt(element.innerHTML);
        var x=Array(length+1).join("*");
        element.innerHTML=x;
    }
} 
```

# phing - 在 Phing 中迭代文件结构并使用 YUICompressor 进行压缩

> ID：15394376
> 
> 赞同：1
> 
> 时间：2013-03-13T19:12:14.300
> 
> 标签：phing, yui-compressor

我有一个像这样的目录结构：

```
-css
---subdir1
------common.css
---subdir2
------common.css
------custom.css
---subdir3
------common.css
------styles.css 
```

我正在尝试循环 Phing 中的每个目录，然后使用 YUI 压缩器将每个文件缩小为每个目录中的单个散列文件名。结果看起来像这样：

```
-css
---subdir1
------1973a613f7c87b03dbe589e6935a09bd.min.css
---subdir2
------1973a613f7c87b03dbe589e6935a09bd.min.css
---subdir3
------1973a613f7c87b03dbe589e6935a09bd.min.css 
```

因此，我需要知道我所在的每个目录，以便将我的缩小脚本输出到它。

这是我的两个目标：

```
<target name="minify">

    <echo msg="Minifying CSS and JS files with YUI at ${yuicompressor}" />

    <foreach param="filename" absparam="absfilename" target="runyui">

        <fileset dir="${publicdir}/css">
            <include name="*.css" />
            <include name="**/*.css" />
        </fileset>
    </foreach>

</target>

<target name="runyui">

    <filehash file="${abspathtopwd}" hashtype="MD5" propertyname="filehash" />

    <echo msg="java -jar ${yuicompressor} -v --line-break 5000 --type css ${absfilename} >> ${abspathtopwd}/${filehash}.min.css" />

    <exec command="java -jar ${yuicompressor} -v --line-break 5000 --type css ${absfilename} >> ${abspathtopwd}/${filehash}.min.css" />

</target> 
```

在哪里：

*   **yuicompressor**是 yui 压缩器 jar 的路径
*   **publicdir**只是我的应用程序公共目录的绝对路径
*   **abspathtopwd**是我希望用于“当前迭代的目录”的属性

如何在当前的 foreach 迭代中使用 Phing 获取当前工作目录（或 pwd，如果您愿意）？我所能看到的只是文件本身的相对和绝对路径。

注意：我知道这个当前的解决方案会为每个输入文件创建一个新文件，但这就是我打算用**abspathtopwd**解决的问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:28:41.167

对于任何对此问题感兴趣的人，请查看[这篇文章](https://stackoverflow.com/a/4459526/1240134)，这导致我：

```
<foreach param="dir" absparam="absdir" target="minify.directory">

    <fileset dir="${publicdir}/css">
        <type type="dir" />
        <depth max="0" min="0" />
    </fileset>

</foreach> 
```

这允许我在迭代时指定目录约束，从而通过相对和绝对目录名称而不是文件名。

# c++ - 为什么 new double[26] 有 224 个元素？

> ID：15394378
> 
> 赞同：-1
> 
> 时间：2013-03-13T19:12:17.513
> 
> 标签：c++, arrays, pointers

看起来像一个非常愚蠢的问题：这是声明数组指针的方式：

```
double * y = new double[26]; 
```

在这个声明之后，我在程序运行时观察了 y，这是我所看到的：

```
name    value
y[224] 8.691694942331e-310#DEN
y[225] CXX0030: Error: Expression cannot be evaluated 
```

所以我想知道为什么声明为 26 长度的双精度数组有 224 个元素？谢谢。

编辑：但我试过这段代码，它通过了！

```
int nPt = 26;
double * y = new double[nPt];
y[224] = 0; 
```

如果没有 y[224]，它的值怎么可能被赋值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T19:13:31.580

你的数组只有 26 个元素，你已经超出了它的范围。那是*未定义的行为*。该程序不必崩溃，它只是意味着任何事情都可能发生。这是一件坏事，必须避免。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-13T19:21:58.037

当您分配内存时，使用`new double[26]`，系统将为您的应用程序提供一块内存，其空间至少为 26 x sizeof(double)。分配函数确实会将数字 26（或可以以其他方式取回数字 26 的东西）存储在它的元数据内的某个位置，用于内存分配。

但是，调试器无法“弄清楚”元素的数量是 26，它只知道这是指向某些`double`值的指针。当您要求看起来超过 26 岁时，您就处于“未定义行为”领域——任何事情都可能发生并且可能会发生。包括它看起来像您“预期”的那样完美（也就是说，内存是可读的并且包含可以显示为“double”的值。然后，当您到达元素 224 时，调试器无法读取任何内存更长的时间（因为操作系统已将其标记为“不可用”）。那是它停止的时间。它可能是 50000000 [在这种情况下，您可能需要几个小时才能到达这里并提出这个问题......]

对。为简单起见，假设我们有一台具有 100KB RAM 的计算机。处理器分配用于什么目的的内存的方式是一次 4KB 的页面。所以我们有 25 页。其中一些页面是您的“堆”（其中`new`得到它的记忆）。一个内存分配获得了这样一个 4KB 页面的一部分。假设我们的内存恰好位于第 18 - 18 * 4096 = 73728 到 77823 页。第 19 页被标记为“未使用”。我们在这个页面中的分配是 168 字节（前 168 字节用于其他用途） - 所以我们的地址是 73896，现在，我们有 26 * 8 = 208 字节，所以“下一个可用字节”是 73728+376 = 74104这页纸。所以，y[0] 的地址是 73896，我们每个 double 占用 8 个字节。当我们到达 74104（索引 26，在我们分配的内存之外）时，我们仍然在第 18 页，根据处理器/操作系统，它仍然“可用”。在处理器说“你不能去那里”之前，我们必须一直走到 77824。74104 - 77824 = 3720 字节，或 465* sizeof(double)。但是我们正在使用我们被告知不要使用的内存。所以，

我希望这可以很好地解释它。

它是 4KB 的原因是，如果处理器必须跟踪内存的每一个字节，那么它会占用太多内存来跟踪该字节是否可用。4KB 是“我们检测到何时外出足够长的时间”和“它占用了太多容量”之间的一个很好的折衷。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-13T19:13:52.597

> 所以我想知道为什么声明为 26 长度的双精度数组有 224 个元素？

它没有。您的调试器似乎无法确定`y`只有 26 个元素。

> 但是我尝试了这段代码，它通过了！

```
int nPt = 26;
double * y = new double[nPt];
y[224] = 0; 
```

代码具有[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。这并不意味着它必须崩溃。以任何它喜欢的方式失败（或不失败）都是自由的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T22:32:02.123

C/C++ 中不存在数组。事实上，像 t[i] 这样的表达式只是表示我想访问地址 t 之外的第 i 个内存位置的捷径（一种语法糖）。当您分配一个大小为 N (new int[N]) 的内存块时，系统会为您提供一个地址，从该地址可以安全地从返回的地址访问 N 个内存位置（请注意，当我说 N 个内存位置时，它不是 N 个字节，而是 N*sizeof_one_element_in_bytes)。但是 C/C++ 允许您计算从返回的地址派生的任何地址，这取决于您确保不会访问错误的地址。C/C++ 运行时对数组大小一无所知，它无法保护您免受此类错误的影响。C/C++ 指针非常容易出错，您必须非常小心地使用它。这是接近机器和/或高效的代价。

# ruby - 无法使用 ActiveModel::MassAssignmentSecurity

> ID：15394381
> 
> 赞同：1
> 
> 时间：2013-03-13T19:12:25.873
> 
> 标签：ruby, ruby-on-rails-3.2, activemodel

我正在尝试在 ActiveModel 中使用一些功能，但我无法让一切正常工作。我已经包含了我的类文件和我正在运行的测试。

测试失败：'：未定义的方法`attr_accessible

我真的不知道为什么，因为 MassAssignmentSecurity 会引入它并且它实际上正在运行。我也尝试过包含所有 ActiveModel ，但这也不起作用。如果我使用包含或扩展来引入 MassAssignmentSecurity，这似乎并不重要。

如果我在测试中传入一些属性以在初始化中执行“assign_attributes”，那也会失败。我对 Rails 很陌生，所以我希望我只是错过了一些非常简单的东西。

TIA。

使用导轨 3.2.12

* * *

my_class.rb

```
class MyClass
  include ActiveModel::MassAssignmentSecurity
  include ActiveModel::Validations
  include ActiveModel::Conversion
  extend ActiveModel::Naming
  extend ActiveSupport::Callbacks

  attr_accessible :persisted, :creds

  def initialize(attributes = nil, options = {})
    @persisted = false

    assign_attributes(attributes, options) if attributes

   yield self if block_given?
  end
end 
```

* * *

my_class_spec.rb

```
require 'spec_helper'

describe MyClass do
  before do
    @testcase = MyClass.new
  end
  subject { @testcase }

  it_should_behave_like "ActiveModel"

  it { MyClass.should include(ActiveModel::MassAssignmentSecurity) }

  it { should respond_to(:persisted) }
end 
```

* * *

支持/active_model.rb

```
shared_examples_for "ActiveModel" do
  include ActiveModel::Lint::Tests

  # to_s is to support ruby-1.9
  ActiveModel::Lint::Tests.public_instance_methods.map{|m| m.to_s}.grep(/^test/).each do |m|
    example m.gsub('_',' ') do
      send m
    end
   end

  def model
    subject
  end
 end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:14:28.443

哎呀！我昨天真是一团糟。既然我弄清楚了我的问题，不妨回答我自己的问题。

1.  MassAssignmentSecurity 中的 attr_accessible 不像 ActiveRecord 那样工作。它不会创建 getter 和 setter。如果您创建了这些，您仍然必须使用 attr_accessor。

2.  assign_attributes 是有人编写的一个方便函数，用于包裹 mass_assignment_sanitizer，而不是 MassAssignment Security 中的内容。下面是一个示例实现：

```
 def assign_attributes(values, options = {})
  sanitize_for_mass_assignment(values, options[:as]).each do |k, v|
    send("#{k}=", v)
  end
end 
```

# wix - wix pass 选项到 msi 进行维修

> ID：15394382
> 
> 赞同：2
> 
> 时间：2013-03-13T19:12:31.723
> 
> 标签：wix, installation, windows-installer, burn

当我使用 msi 进行修复时，会正确地重新创建一个注册表项。使用 Burn 生成的 exe 时，不会重新创建条目，除非与 reg 条目关联的 exe 也需要比较。

我想知道，当burn 调用msi 时，它是否覆盖了msiexec 的默认/fm 行为。该开关意味着“修复所有必需的计算机特定注册表项”

有什么方法可以确认、拒绝或修改该行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:41:57.310

在 Burn 中计划“修复”操作时，`REINSTALLMODE`是“cmuse”。对于“修改”操作，`REINSTALLMODE`是“cmuso”。所以“m”在这两种情况下都存在。

刻录日志文件应显示“计划行动：*行动*”，这将告诉您它在做什么。如果您正在执行修复操作，并且计算机上没有比您的 MSI 期望的更新版本的可执行文件，那么 Burn`REINSTALLMODE`应该可以工作。如果您正在执行“修复”，请查看生成的 MSI 日志文件以执行相同的刻录，并查看未修复组件的组件状态。这应该可以帮助您追溯组件未修复的原因。

从提供的日志文件中：

```
Command Line: ARPSYSTEMCOMPONENT=1 MSIFASTINSTALL=7 REINSTALLMODE=cmuse
REBOOT=ReallySuppress IGNOREDEPENDENCIES=ALL CURRENTDIRECTORY=C:\temp
CLIENTUILEVEL=3 MSICLIENTUSESEXTERNALUI=1 
```

缺乏`REINSTALL=ALL`表明`EnableFeatureSelection='yes'`。删除该属性（或将其更改为默认的“否”）或您的 BA 需要处理`OnPlanMsiFeature()`回调

# python - django.db.backends.mysql 的 pymysql3 等价物是什么

> ID：15394384
> 
> 赞同：4
> 
> 时间：2013-03-13T19:12:31.830
> 
> 标签：python, django

我正在运行 python33 并且我已经安装了 pymysql3 但是我需要在 Django 设置中指定什么引擎：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'chris_test',                      # Or path to database file if using sqlite3.
        # The following settings are not used with sqlite3:
        'USER': 'some_user',
        'PASSWORD': 'some password',
        'HOST': 'some_host',                      # Empty for localhost through domain sockets or '127.0.0.1' for localhost through TCP.
        'PORT': '3306',                      # Set to empty string for default.
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-18T01:21:10.077

查看[django-mysql-pymysql](https://github.com/clelland/django-mysql-pymysql)了解更多信息。具体来说，

```
'ENGINE': 'mysql_pymysql', 
```

但这对我来说还不够。我不得不使用[这个答案](https://stackoverflow.com/a/21416007/1698426)。如果你有一个`foo`Django 应用程序，那么在你的 `foo/ **init** .py' 中，添加以下内容：

```
import pymysql
pymysql.install_as_MySQLdb() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:25:23.590

Django 已经提供了 MySQL 后端。从 PyMySQL 来看，它似乎是一个通用的 MySQL 客户端。您不能随意使用不同的库来代替现有的 Django 后端；API 将完全不兼容。

有一个项目似乎[提供了一个内部使用 PyMySQL 的 Django 后端](https://github.com/clelland/django-mysql-pymysql)，但作者声明它是*实验性*的，它总共有 5 次提交，并且自 2012 年以来一直没有更新，所以我不建议尝试使用它。

# php - PHP发送电子邮件错误

> ID：15394385
> 
> 赞同：0
> 
> 时间：2013-03-13T19:12:38.387
> 
> 标签：php, email

我正在尝试使用 PHP 代码发送电子邮件，我确定代码是正确的，但我没有收到任何电子邮件。任何人都可以看到此代码的问题：

```
<?php
    $to = 'i7906890@bournemouth.ac.uk';
    $subject = 'Registration Complete';
    $message = 'Thank you for joining us at Arsenic & Vice';
    $header = 'From: admin@arsenicandvice.co.uk';
    if (mail($to, $subject, $message, $header)){
        echo('<p>Sent</p>');
        } else {
        echo('<p>Fail</p>');
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:16:24.777

我已经在我的服务器上测试了你的代码，它工作正常，我收到了电子邮件。

我也运行了它，所以你可以在 i7906890@...

问题出在您的主机上。您的电子邮件服务器 (qmail...) 的队列很长，或者卡住了。请联系您的服务器管理员。

# ios - 将应用程序资源放入 iOS 的文档目录中

> ID：15394386
> 
> 赞同：1
> 
> 时间：2013-03-13T19:12:38.980
> 
> 标签：ios, resources, directory, document

我的应用程序有太多动态应用程序资源，如图像、html+css 和 xml 或 json 文件。可以更新，所以我不能将这些资源放在应用程序包中，一旦在应用程序商店上，它就不会更新，我需要更新它那里...其次，我也不能将这些资源放在服务器上，每次需要时我都可以从服务器请求内容...

所以我的问题是在文档目录中本地存储数据好不好？？？苹果应用审查团队将如何应对？我听说将数据放入文档目录时出现 iCloud 问题，对吗？

那么在设备本地存储iOS应用程序的数据在哪里呢？

在此先感谢....寻找一些好的可靠答案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:31:43.207

此类数据应复制到`~/Library/Application Support`. 有关所有内容的去向以及如何处理的完整详细信息，请参阅[文件系统编程指南。](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:47:12.023

您可能需要考虑将您所指的初始资产驻留在您的应用程序包中。然后，当您更新版本时，将它们保存在您的 Documents 目录（或您想要的任何合法路径）中。

这样做的原因是故障转移，如果出现问题，它允许您恢复。当您动态加载内容时，您必须考虑在下载过程中可能会遇到各种问题，例如损坏的数据甚至尚未下载的依赖项。

FWIW，我为支持动态加载内容的游戏实现了这一点。该捆绑包具有原始资产。有一个临时下载目录。验证数据后，将其移至可使用的区域。在应用程序启动时，第一步是将数据从捆绑包复制到消耗品目录。虽然这看起来可能很浪费并且需要几个步骤，但它运行得非常好，大多数人甚至都不知道这种事情正在发生。

# javascript - 包含 HTML5 的 Javascript document.write() 不适用于 XML 文件

> ID：15394388
> 
> 赞同：0
> 
> 时间：2013-03-13T19:12:47.887
> 
> 标签：javascript, xml, html

我无法让 Javascript 在网站上列出“开始”数字，因为它是空的。

这是我的html正文代码，

```
<script type="text/javascript">
    captionsDoc = loadXMLDoc("captions.xml");
    x=captionsDoc.getElementsByTagName('text');

    for(i=0;i<x.length;i++)
    {
        document.write(x[i].getAttribute('start'));
        document.write("/n");

    }
</script> 
```

那么这是来自 captions.xml 的 xml 代码示例

```
<transcript>
<text start="6.738" dur="2.277">and explain a few interesting points about them.</text>
<text start="9.016" dur="2.722">But first I need to crush your expectations.</text>
<text start="24.716" dur="1.611">So let&#39;s begin.</text>
<text start="26.328" dur="2.535">First we start with the solvent diethyl phthalate.</text></transcript> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:23:27.727

你有

```
document.wite("
") 
```

你应该有

```
document.write("\n"); 
```

然后它在这里具有魅力，加载功能来自：[http ://www.w3schools.com/dom/dom_loadxmldoc.asp](http://www.w3schools.com/dom/dom_loadxmldoc.asp)

像这样：

```
<html>
    <head>
        <title>HTML5 included Javascript....</title>
        <meta name="description" content="Test" charset="utf-8"></meta>
        <script type="text/javascript">
            function loadXMLDoc(dname)
            {
                if (window.XMLHttpRequest)
                {
                xhttp=new XMLHttpRequest();
                }
                else
                {
                xhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
                xhttp.open("GET",dname,false);
                xhttp.send();

                return xhttp.responseXML;
            }

            function init()
            {
                var c = document.getElementById('container');
                captionsDoc = loadXMLDoc("captions.xml");
                x=captionsDoc.getElementsByTagName('text');

                for(i=0;i<x.length;i++)
                {
                    c.innerHTML += x[i].getAttribute('start');
                    c.innerHTML += "\n";
                }
            }

            window.onload = init;
        </script>
    </head>

    <body>
        <div id="container">
        </div>
    </body>
</html> 
```

# java - Update values in bindservice with putExtra

> ID：15394392
> 
> 赞同：2
> 
> 时间：2013-03-13T19:12:56.170
> 
> 标签：java, android

I would like to update values through putExtra from an activity to a service, but the values are always the old one.

Activity:

```
 ArrayList<String> listTODO = LoadSelections();
    Intent i = new Intent();
    i.putStringArrayListExtra("liste", listTODO);
    i.setClassName("de.home.ku1fg", "de.home.ku1fg.RemoteService");
    bindService(i, mConnection, BIND_AUTO_CREATE); 
```

Remoteservice:

```
 public IBinder onBind(Intent intent) {
    listTODO = intent.getStringArrayListExtra("liste");
    return myRemoteServiceStub;
 } 
```

Now, when I update the "liste" in the activity, there will no change in the service. Any idea?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:14:52.377

The intent doesn't work that way. It doesn't pass a reference to the object in the intent, it serializes the object and places it in the intent. So updating one version will not update the other. That's why you can pass an intent to a completely different activity- the values are not being referenced, you're making a copy.

# ruby - 回形针 photo.url 在 Backbone.js 中不起作用

> ID：15394393
> 
> 赞同：0
> 
> 时间：2013-03-13T19:12:58.823
> 
> 标签：ruby, ruby-on-rails-3, backbone.js, paperclip

我试图在 Backbone.js 视图页面中显示图像。

我的 show_view.js.coffee 是

```
Myapp.Views.Checklists ||= {}

class Myapp.Views.Checklists.ShowView extends Backbone.View
 template: JST["backbone/templates/checklists/show"]

render: ->
 @$el.html(@template(@model.toJSON() ))
 return this 
```

我的 show.jst.ejs 文件是

```
<p>
<b>Title:</b>
<%= title %>
</p>

<p>
<img src="<%= how_to_show_photo_url %>" alt="No image">

</p>

<a href="#/index">Back</a> 
```

我正在使用回形针宝石。我尝试在图像标签中使用 <%= photo.url %> 但它不起作用。如何在图像标签中显示照片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:23:14.290

在将它发送到backbone.js 之前，我改变了rails 中的响应。我用文件的原始路径更新了 photo_file_name 属性。我将代码更新为

```
@checklists = Checklist.find(:all)
@checklists.map{|k,v| k.photo_file_name = k.photo.url } 
```

现在我的 Json 响应是

```
{"comments":"Backbone attachment","created_at":"2013-03-12T23:41:40Z","id":16,"photo_content_type":"image/jpeg",
"photo_file_name":"/system/checklists/photos/000/000/016/original/IMG_0011.JPG?1363131700",
"photo_file_size":2714495,"photo_updated_at":"2013-03-12T23:41:40Z","title":"Test Attaachment using backbone","updated_at":"2013-03-12T23:41:40Z"} 
```

我在图像 src 标记中使用了 photo_file_name 属性

欢迎任何更好的解决方案

# actionscript-3 - 如何让外部 SWF 仅在一帧 AS3 上播放？

> ID：15394404
> 
> 赞同：-1
> 
> 时间：2013-03-13T19:13:11.490
> 
> 标签：actionscript-3, flash

我有一个外部 SWF 文件可以很好地加载到我的 Flash 站点。但是，一旦查看了该帧，当我只希望它在第 6 帧上播放时，它会继续在其他帧中运行。任何建议都会很棒。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:43:26.780

你在使用 ViewStack 吗？确保所有内容都专门嵌入到 ViewStack 的右子项中。如果这不是问题，请编辑您的答案（不要只是评论），以便采用您在评论中提到的代码，不仅要显示这一点，还要显示它所属的更大上下文的代码（例如URL 请求）。

# ember.js - Rest Adapter 不会触发 GET 请求来获取相关模型属性

> ID：15394409
> 
> 赞同：2
> 
> 时间：2013-03-13T19:13:27.680
> 
> 标签：ember.js, ember-data

在尝试模拟新闻源的应用程序中，我有以下三个模型。

1.  Feed - {名称：字符串，帖子：hasmany（帖子模型）}
2.  发布 - {文本：字符串，评论：hasmany（评论模型），提要：belongsto（提要模型）}
3.  评论 - {text:string, post:belongsto(Post model)}

所有三个模型都有单独的 Rest API 用于检索有效负载。我需要能够检索数据并将它们显示在单个路由资源下。

[http://emberjs.com/guides/models/the-rest-adapter/](http://emberjs.com/guides/models/the-rest-adapter/)上的 RestAdapter 文档 说

> 可以通过 post.get('comments') 加载帖子的评论。REST 适配器将向 /comments?ids[]=1&ids[]=2&ids[]=3 发送 GET 请求。

下面的代码显示了我如何尝试做同样的事情，但我无法检索 Feed 模型中的所有数据。

```
var Newsfeed = Ember.Application.create();

Newsfeed.Router.map(function(){
    this.route('feed', {path:'/'});
});

Newsfeed.FeedRoute = Ember.Route.extend({
    model: function(){
        var model = Newsfeed.Feed.find(1);
        //model.set('posts', Newsfeed.Post.find()); -- This also did not work.
        //posts.set('comments', Newsfeed.Comment.find());
        return model;
    },
    setupController: function(controller, model){
        controller.set('content', model);
        controller.set('content.posts', model.get('posts'));
        console.log(controller.get('content.posts'));
        this.controllerFor('posts').set('content', model.get('posts'));
    }
});

Newsfeed.PostsView =  Ember.View.extend({

});
Newsfeed.PostsController = Ember.ArrayController.extend({

});

Newsfeed.FeedController = Ember.Controller.extend({

});
Newsfeed.Store = DS.Store.extend({
    revision:12,
    adapter: 'DS.RESTAdapter'
});

Newsfeed.Feed = DS.Model.extend({
    name:DS.attr('string'),
    posts:DS.hasMany('Newsfeed.Post')
});

Newsfeed.Post = DS.Model.extend({
    text : DS.attr('string'),
    comments:DS.hasMany('Newsfeed.Comment'),
    feed:DS.belongsTo('Newsfeed.Feed')
});

Newsfeed.Comment = DS.Model.extend({
    text: DS.attr('string'),
    post:DS.belongsTo('Newsfeed.Post')
}); 
```

我正在使用 jquery.mockjax 来模拟​​ rest api。我的有效载荷是-

```
{ "feed" :{
id:1,
name:"Ember Web App",
posts :[1,2]
}
}
{"posts" : [{
        id:1,
        text:"orem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempo",
        comment_ids:[1],
        feed_id:1
    },{
        id:2,
        text:"orem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempo",
        comments:[2],
        feed_id:1

    }]
 } 
```

关于我可能在这里遗漏的任何指示？

# java-me - 使用 repaint() 作为游戏循环是个好主意吗？

> ID：15394416
> 
> 赞同：0
> 
> 时间：2013-03-13T19:13:47.120
> 
> 标签：java-me, repaint

```
class MyCanvas extends Canvas{
    protected void paint(Graphics g) {
        //Process keyboard
        //Update movement/position
        //Draw
        repaint(); //loop
    } 
} 
```

到目前为止，我使用 Canvas 的`paint()`游戏循环，但我在网上看到一些文章说应该在这里使用另一个线程
现在我想知道是否`paint()`是处理所有数据的好/安全的地方。

那么我可以继续这样做吗？
或者我应该为此制作另一个线程吗？

我不确定每种方法的优缺点，所以我不确定选择哪种方法，但我习惯了重新绘制方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:04:27.360

我不会用`paint()`那种方式，不。 `paint()`应该是为了绘画……绘画。我会将您对用户输入的监控和游戏逻辑处理拆分到该方法之外。

您是否考虑过使用[Canvas 的 GameCanvas 子类](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/lcdui/game/GameCanvas.html)？

它为您提供了一些不错的双缓冲功能。您将创建另一个线程，该线程将调用您的 GameCanvas`run()`方法，在其中检查用户输入，更新游戏逻辑，然后绘制到屏幕外缓冲区，最后触发屏幕缓冲区的重新绘制。

像这样的东西：

```
class MyGameCanvas extends GameCanvas implements Runnable {

    /** start this game! */
    public void start() {
        Thread worker = new Thread(this);
        worker.start();
    }

    /** run the game loop */
    public void run() {
       // Get the Graphics object for the off-screen buffer
       Graphics g = getGraphics();

       while (true) {
          // Check user input and update positions if necessary
          int keyState = getKeyStates();
          if ((keyState & LEFT_PRESSED) != 0) {
             sprite.move(-1, 0);
          }
          else if ((keyState & RIGHT_PRESSED) != 0) {
             sprite.move(1, 0);
          }

          // Clear the background to white
          g.setColor(0xFFFFFF);
          g.fillRect(0,0,getWidth(), getHeight());

          // Draw the Sprite
          sprite.paint(g);

          // Flush the off-screen buffer
          flushGraphics();

          try {
             // TODO: of course, you might want a more intelligent
             //  sleep interval, that reflects the amount of time
             //  remaining (if any) in the cycle ...
             Thread.sleep(10);  //sleep 10 ms
          }
          catch (InterruptedException e) {
             e.printStackTrace();
          }
       }
    }
} 
```

请注意`run()`，为简洁起见，我基本上将所有内容都放在了方法中。我假设您的游戏更复杂，并且需要拆分单独的方法来获取用户输入、更新逻辑，然后调用图形/绘画方法。这些都将从`run()`.

## 用法

在您的 MIDlet 的`startApp()`方法中启动它：

```
 MyGameCanvas gameCanvas = new MyGameCanvas();
  gameCanvas.start();
  exitCommand = new Command("Exit", Command.EXIT, 1);
  gameCanvas.addCommand(exitCommand);
  gameCanvas.setCommandListener(this);
  Display.getDisplay(this).setCurrent(gameCanvas); 
```

## 参考

*   [http://www.codeproject.com/Articles/35833/Programming-2D-Games-in-J2ME](http://www.codeproject.com/Articles/35833/Programming-2D-Games-in-J2ME)
*   [一个显示更好实现的示例](http://j2megame.uw.hu/ch07lev1sec155.html)，如果您**不**使用`GameCanvas`而只使用`Canvas`.
*   [游戏 API 和循环的 PowerPoint 概述](http://ktpng.com/mc/ppt/L10_J2ME_Game_API_01.ppt)，包含代码和一般理论

# css - jQueryUI 'Blind' 效果在动画时引入了页面流中断

> ID：15394421
> 
> 赞同：0
> 
> 时间：2013-03-13T19:13:58.213
> 
> 标签：css, html, jquery-ui, twitter-bootstrap, flow

我有任意数量的链接，每个链接都样式为引导按钮，在具有普通从左到右流的 div 中。

```
<div id="btngrp">
  <a href="#" class="btn" id="btn_1">Troll 1</a>
  <a href="#" class="btn" id="btn_2">Troll 2</a>
  <a href="#" class="btn" id="btn_3">Troll 3</a>
  <a href="#" class="btn" id="btn_4">Troll 4</a>
  <a href="#" class="btn" id="btn_5">Troll 5</a>
</div> 
```

[使用jquery-UI 的盲目效果](http://docs.jquery.com/UI/Effects/Blind)删除第一个按钮！将在动画阶段在流程中引入临时“中断”。

```
$('#btn_1').toggle('blind', { direction: "horizontal" }, 4000) 
```

我怀疑盲效应引入了一些`display`类型不是的包装元素`inline`，但我不知道如何修复它。

这是一个说明问题的 jsFiddle：http: [//jsfiddle.net/ajsyJ/](http://jsfiddle.net/ajsyJ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:39:21.140

是的，你是对的：它添加了一个具有 display: 块的 div，其余按钮是 inline-block。尝试将此添加到您的 CSS 中：

```
#btngrp .ui-effects-wrapper { display: inline-block; } 
```

这是更新的小提琴：http: [//jsfiddle.net/hHLAj/1/](http://jsfiddle.net/hHLAj/1/)

# drools - Drools Planner：Planner 未根据最佳分数提供预期结果

> ID：15394426
> 
> 赞同：0
> 
> 时间：2013-03-13T19:14:14.780
> 
> 标签：drools, drools-planner

我曾尝试在 Drools 的用户论坛上发帖，但没有得到任何回复（我相信他们只是忙），所以我希望在这里吸引更广泛的观众。

我对我得到的结果感到非常困惑，因为他们似乎没有为我提供“最好的分数”。这是一些日志输出：

```
[construction steps] 
2013-03-13 08:00:08,305 [com....] INFO  Phase constructionHeuristic ended: step total (60), time spend (2222), best score (-200hard/-2780soft). 
[local search steps] 
2013-03-13 08:00:21,807 [com....] INFO  Phase localSearch ended: step total (42), time spend (15724), best score (0hard/-2495soft). 
2013-03-13 08:00:21,807 [com....] INFO  Solving ended: time spend (15724), best score (0hard/-2495soft), average calculate count per second (3748). 
```

但是，它给我的结果包含一个损坏的硬约束（即使日志清楚地指出“解决结束：时间花费（15724），最好的分数（0hard/-2495soft）”）-它给了我一个分数的结果- 200hard/-2495soft（貌似是构建阶段的硬分和局部搜索阶段的软分）。这是应该的吗？我是否遗漏了手册中的某些内容（我已阅读，但尚未完全消化）？

这是我的大部分求解器配置（只是可能相关的部分）：

```
<termination>
        <terminationCompositionStyle>OR</terminationCompositionStyle>
        <maximumSecondsSpend>60</maximumSecondsSpend>
        <scoreAttained>0hard/0soft</scoreAttained>
</termination>

<constructionHeuristic>
        <constructionHeuristicType>FIRST_FIT_DECREASING</constructionHeuristicType>
    <constructionHeuristicPickEarlyType>FIRST_LAST_STEP_SCORE_EQUAL_OR_IMPROVING</constructionHeuristicPickEarlyType>  
</constructionHeuristic>

<localSearch>
        <termination>
                <terminationCompositionStyle>OR</terminationCompositionStyle>
                <maximumUnimprovedStepCount>20</maximumUnimprovedStepCount>
                <scoreAttained>0hard/0soft</scoreAttained>
        </termination>
        <unionMoveSelector>
            <changeMoveSelector>
              <entitySelector>
                <entityFilterClass>com.....RequiredTypeEntityFilter</entityFilterClass>
              </entitySelector>
            </changeMoveSelector>
            <swapMoveSelector>
              <entitySelector>
                <entityFilterClass>com.....RequiredTypeEntityFilter</entityFilterClass>
              </entitySelector>
            </swapMoveSelector>
        </unionMoveSelector>
        <acceptor>
              <solutionTabuSize>1000</solutionTabuSize>
              <planningEntityTabuSize>7</planningEntityTabuSize>
        </acceptor>
        <forager>
                <minimalAcceptedSelection>1000</minimalAcceptedSelection>
        </forager>
</localSearch> 
```

提前致谢！

**编辑**：这里有一些可能有用的信息......如上所述，它说我的最佳（硬）分数是 0，但它给我的解决方案包含硬约束违规。我添加了一些代码来打印出约束（使用 DroolsScoreDirector 到达 WorkingMemory 并最终到达 ConstraintOccurrences）......这个打印输出也显示了一个硬约束。

```
ConstraintType: NEGATIVE_HARD, RuleID: endLocationMustMatchStartLocation, Causes:... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T08:57:28.470

很可能，您的 cloneSolution() 方法已损坏（或它调用的 entity.clone() 方法）。仔细检查这些方法。

[在 Drools Planner 6.0 中，您不需要实现该克隆方法。](http://blog.athico.com/2013/02/automatic-solution-cloning-in-planner.html)

# internet-explorer - 远程 Watir-Webdriver IE 表单字段无法识别文本和键

> ID：15394427
> 
> 赞同：2
> 
> 时间：2013-03-13T19:14:15.980
> 
> 标签：internet-explorer, validation, watir-webdriver, selenium-grid, remotewebdriver

我一直在 IE 上使用**Cucumber / Watir-Webdriver**就好了。在我的测试中，我转到表单字段并输入数据并单击保存按钮。所有的动作都很好。

最近，出于性能原因，我决定使用**Selenium Grid 2**在机器上分发测试。它适用于 FF 和 Chrome，但我开始发现 IE 存在问题。

**这是问题所在：**

当我使用 Selenium Grid 2 远程驱动 IE 时，当它发送击键（即 send_keys 或 .set “一些文本字符串”）时，文本正确显示在字段中， **但**字段验证无法识别文本。

保存表单时，我会收到一条错误消息“请输入说明” - 但说明在那里。

**如果我使用 watir-webdriver (and IE) 在本地运行测试，这可以正常工作**，但只有在从 Selenium Grid 驱动测试时才会出现此问题。

**以下是我使用 Grid 设置浏览器的方法：**

```
@browser = Watir::Browser.new(:remote, :url=>"http://[myhost]:4444/wd/hub", :desired_capabilities=> browser_name)
where browser_name is currently set to ie. 
```

**在远程机器上，我设置了节点：**

```
java -jar selenium-server-standalone-[version].jar -role node -hub [path to the above hub, ie http://[myhost]:4444/grid/register] -browser browserName="internet explorer" 
```

测试代码本身非常简单，它登录到我们的内部应用程序，然后单击一个显示表单的按钮。在表单中，它将数据发送到字段并单击保存。

**测试这样做：**

```
Watir::Wait.until { @browser.div(:id=>"after-announcement-container").text_field(:name=>'Description').exists?}
@browser.div(:id=>"after-announcement-container").text_field(:name=>'Description').set "This is a Test"
@browser.div(:id=>'save-announcement-button').click 
```

**当我运行网格测试时：**

1.  将测试发送到机器

2.  远程机器上的 IE 启动

3.  IE 通过应用程序自动化

4.  在表单中，它正确发送文本（“这是一个测试”）

5.  IE点击保存。

此时，表格上写着“**请提供描述**”（那里写着“这是一个测试。”）

**我试过了：**

1.  添加等待时间

2.  使用 :tab 和 :click 之类的 send_keys 在发送文本之前先输入该字段。

3.  我还保持 webdriver 会话打开并手​​动保存（单击保存），但我总是收到错误消息。即使在应用程序周围单击并单击保存 - 它仍然认为该字段为空。但是，一旦我手动键入一个键，它就可以工作。

**网络驱动程序输出：**

Webdriver 确实有一些输出，表明它可以正常发送文本，我可以直观地看到它的形式：

```
11:06:21.296 INFO - Executing: [send keys: 7 org.openqa.selenium.support.events.
EventFiringWebDriver$EventFiringWebElement@f3140943, [This is a Test]] at URL: /
session/135941c9-389d-45fa-9fed-14620a4802ca/element/7/value)
11:06:21.662 INFO - Done: /session/135941c9-389d-45fa-9fed-14620a4802ca/element/
7/value
11:06:23.192 INFO - Executing: org.openqa.selenium.remote.server.handler.Status@
4ead24d9 at URL: /status) 
```

对我来说奇怪的部分是，如果我在本地使用 watir-webdriver，这将有效。我只有在 Grid 发送 webdriver 测试时才会遇到这个问题。

由于这是手动工作的，因此开发人员不会将此视为错误。所以我无法通过更改 JS 来解决这个问题。我希望有一个解决方案可以让它与网格一起工作。

# eclipse - 强制 Eclipse 不扫描目录

> ID：15394429
> 
> 赞同：1
> 
> 时间：2013-03-13T19:14:19.893
> 
> 标签：eclipse, samba

我想完全阻止 Eclipse 尝试扫描项目的目录。那可能吗？

原因有点复杂，是由几个限制因素引起的：

*   我在 Windows 上工作，无法更改（甚至不能双启动）
*   我*可以*使用虚拟机
*   我从事一个本质上基于 Linux 的项目
*   该项目使用 svn（虽然我正在考虑使用 git-svn 访问它）
*   该项目具有在 fat/ntfs 下无效的递归符号链接和文件名
*   我对 Eclipse 在 VirtualBox 虚拟化的 Ubuntu 12.10 下的性能和稳定性并不满意

因此，我尝试在 Windows 下运行 Eclipse，并通过 samba 共享从正在运行的虚拟化 Ubuntu 访问项目和工作区。但是，由于文件名无效，Eclipse 在扫描项目树时会出现数十个错误，并且由于递归符号链接，刷新永远不会完成。在本地删除这两个解决了 Eclipse 问题，并且从那里完美运行。但是，当我使用 svn 时，every`svn update`会恢复一些已删除的文件和符号链接，而 full 会`make`恢复其余已删除的文件和符号链接；Eclipse 再次窒息。

因此，我想强制 Eclipse 不要扫描项目的特定子目录，就好像该目录从一开始就不存在于 Eclipse 中一样。有任何想法吗？

也许玩 samba 以使受影响的目录无法访问（但不更改目录本身的权限）会有所帮助，这可能吗？也就是说，如果`~/project`是共享的，我可以在`~/project/subdir`不更改其文件权限的情况下使其无法访问吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:21:30.253

试试这个：

```
Project Properties -> Resource -> Resource Filters -> Add 
```

然后在`Filter type`选择下`Exclude all`，`Applies to: Folders`输入您要排除的文件夹名称。

# jaxb - JAXB：由 JAXB 生成的类在上下文中无法识别

> ID：15394440
> 
> 赞同：1
> 
> 时间：2013-03-13T19:14:47.367
> 
> 标签：jaxb

我遇到了这个问题。有什么地方可以解决吗？

这是我的文件结构：

包 jaxb_conainer_class; 包加载器类；

Main.java 导入 loader_class 和 jaxb_conainer_class；

在loader_class中，调用JAXBContext context = JAXBContext.newInstance(xxxx.class);

给了我上面的崩溃

线程“主”com.sun.xml.internal.bind.v2.runtime.IllegalAnnotationsException 中的异常：2 次 IllegalAnnotationExceptions 没有 ObjectFactory 与元素 {}default 的 @XmlElementDecl。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:27:03.087

当您从 XML 模式生成类时，您应该`JAXBContext`在生成的包名称上创建。这将确保`ObjectFactory`正确拾取和其他所有内容。

```
JAXBContext jc = JAXBContext.newInstance("com.example.foo"); 
```

如果有多个包，则可以`:`用作分隔符。

```
JAXBContext jc = JAXBContext.newInstance("com.example.foo:org.example.bar"); 
```

或者，您可以`ObjectFactory`在用于引导的类中包含该类`JAXBContext`，但我的建议是使用包名称。

# jquery - 如何自动调整标签大小以适应固定宽度的容器？

> ID：15394441
> 
> 赞同：4
> 
> 时间：2013-03-13T19:14:52.067
> 
> 标签：jquery, css, tabs, responsive-design

如果之前有人问过这个问题，我很抱歉，但是我将如何实现标签（常规的 HTML 无序列表元素），它们使用 CSS 和 JavaScript 调整自身大小以适应固定宽度的容器？

**示例：** *Google Chrome、Firefox、Sublime Text 等 *

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T19:47:04.673

如果您知道您将拥有多少个“标签”，那么您只需将 100 除以该数字，然后将宽度设置为该百分比。即：`width:20%`对于5个元素。

然而...

如果您设置使用 jquery 动态设置元素的宽度，请参阅此处的示例：http: [//jsfiddle.net/eMLTB/3/](http://jsfiddle.net/eMLTB/3/)

```
<div id="wrapper" class="clearfix">
<ul id="nav">
    <li><a href="#">link 1</a></li>
    <li><a href="#">link 2</a></li>
    <li><a href="#">link 3</a></li>
    <li><a href="#">link 4</a></li>
    <li><a href="#">link 5</a></li>
    <li><a href="#">link 6</a></li>
</ul>
</div> 
```

jQuery

```
var n = $("#nav li").length;
var w = (100/n);
$("#nav li").width(w+'%'); 
```

css

```
#wrapper { width: 90%; background:#aaa; }
#nav { margin:0; padding:0;}
#nav li { float: left; list-style:none; margin:0;}
#nav li a { display: block; padding:5px; background: #ddd; margin-right:1px; } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T19:59:33.760

你可以只用 CSS 做到这一点：

```
ul {
    display: table;
    table-layout: fixed;
    width: 100%;
}

li {
    display: table-cell;
} 
```

`table-layout: fixed`是这里最有价值的财产。通常，此属性具有属性`auto`，当应用于表格时，将根据单元格的内容调整单元格的大小。Fixed 将调整单元格的大小，并为每个单元格赋予相等的宽度，总计容器的宽度除以单元格的数量。额外的好处：计算速度更快。

[jsFiddle](http://jsfiddle.net/UkcFU/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-13T19:30:48.143

给列表显示“table-row”，列表项显示“table-cell”，宽度为 1%。

# image - 无法通过附加编号获取图像 - CodeIgniter

> ID：15394446
> 
> 赞同：0
> 
> 时间：2013-03-13T19:14:58.193
> 
> 标签：image, codeigniter, quotes

这是一个愚蠢的问题，但我在转义引号方面真的很糟糕：/。

我正在使用 table 类来生成一个产品表，并且在该表中，每一行都有一个要为该产品显示的图像。这些图像使用它们的 product_id 作为名称并附加“_x”来存储，因为每个产品有多个图像，因此图像名称的示例是 193_1。

这就是我为表生成行的方式：

```
$table_row = array();
    foreach ($r->result() as $p)
    {
      $table_row = NULL;
      $table_row[] = "<img src='http://localhost/CI/photos/$p->product_id\"1\".jpg' height='150' width='150'/>";
      $table_row[] = $p->product_id;
      $table_row[] = $p->title;
      $table_row[] = $p->description;
      $table_row[] = $p->price;
      $table_row[] = $p->stock;

      $this->table->add_row($table_row);
    } 
```

但是即使我已经逃脱了“1”，图像也不会显示。我只想显示第一张图片，因为那是主要图片，所以这就是我硬编码数字的原因。有人可以帮忙吗？我尝试了多种方法，即

```
"<img src='http://localhost/CI/photos/$p->product_id '1' .jpg' height='150' width='150'/>"

"<img src='http://localhost/CodeIgniter/photos/<?php echo $p->product_id; ?>1.jpg' height='150' width='150'/>"; 
```

但是图像仍然没有显示。该表是在我的控制器中生成的，这是一个 PHP 文件，所以我真的不认为我需要使用 php 标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:17:17.800

`"<img src='http://localhost/CodeIgniter/images/" . $product->product_id . "_1.jpg' height='100' width='100'/>";`

# c# - I'd like not exceed 30 insertions in my listview

> ID：15394449
> 
> 赞同：0
> 
> 时间：2013-03-13T19:15:04.310
> 
> 标签：c#, asp.net

I have a problem doing it for a week I'm working on and I would love to find a solution ... it is a web application in asp.net and c # I have a related listeview a database which I am inserting the students .. and I'd like not exceed 30 insertions ... the goal is that if I try to enter the 31th student I must be stopped displaying a warning message

I try Sev code which seems to me that here is the nearest that I put in my page load, but unfortunately its not working

```
if (ListView1.Items.Count>30)
{ 
   ClientScript.RegisterStartupScript(this.GetType(), 
     "myalert", 
     "alert('" + "Dsl .. étudiant !!" + "');", true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:54:22.320

注意：您在问题描述中所说的只是“ *......但不幸的是它不起作用*”，所以我不确定问题是什么。我假设您从未真正在`if`-block 内完成它。

您提到您问题中的代码位于`Page_Load`. 为了安全起见，我会把它放在你的数据绑定事件中`ListView`：

```
ListView1_DataBound(Object sender, EventArgs e)
{
    if (ListView1.Items.Count>30)
    { 
       ClientScript.RegisterStartupScript(this.GetType(), 
         "myalert", 
         "alert('" + "Dsl .. étudiant !!" + "');", true);
    }
} 
```

这样你就知道你`ListView1.Items.Count`是正确的和最新的。

# android - onDraw() not being called

> ID：15394450
> 
> 赞同：2
> 
> 时间：2013-03-13T19:15:05.093
> 
> 标签：android

I am working on fixing someone's Android app. It was originally made for 2.1 and I am trying to get it work to 4.0+. Unfortunately the person who made the app is not around so I am stuck with his code.

The app implements custom sliders, a horizontal and vertical. I got the vertical slider fixed, but I cannot get the horizontal slider to work. It is not calling `onDraw()`: When the view loads, `onDraw()` gets called and I see both of my sliders initialized, then when I move my horizontal slider it moves and calls `onDraw()` once, but never again will it call it, unlike the vertical slider which does call it.

Here is the code:

```
public class PanSeekBar extends RelativeLayout {

    private RelativeLayout layout1;
    public ImageView track;
    public ImageView thumb;

    public boolean initialized = false;
    public int thumbDownPosX = 0;
    public int thumbDownPosY = 0;
    public int thumbLeft = 0;
    public int thumbTop = 0;
    public int thumbRight = 0;
    public int thumbBottom = 0;
    private int max = 100;

    public boolean touched = false;

    public PanSeekBar(Context context) {
        super(context);
        initialize(context);
        // TODO Auto-generated constructor stub
    }// End of PanSeekBar Constructor

    private void initialize(Context context) {
        Log.d("initialize (PanSeekBar)", "initialize");
        setWillNotDraw(false);

        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view1 = inflater.inflate(R.layout.pan_seekbar, this);

        layout1 = (RelativeLayout) view1.findViewById(R.id.ps_layout1);
        track = (ImageView) layout1.findViewById(R.id.ps_track);
        thumb = (ImageView) layout1.findViewById(R.id.ps_thumb);

        thumb.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                initialized = true;

                switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    Log.d("onTouch (PanSeekBar)", "Action Down");
                    thumbDownPosX = (int) event.getX();
                    thumbDownPosY = (int) event.getY();

                    thumbLeft = thumb.getLeft();
                    thumbTop = thumb.getTop();
                    thumbRight = thumb.getRight();
                    thumbBottom = thumb.getBottom();
                    touched = true;
                    break;

                case MotionEvent.ACTION_MOVE:
                    // Log.d("onTouch (PanSeekBar)", "Action Move");
                    int left = (int) (thumb.getLeft() + event.getX() - thumbDownPosX);
                    if (left < 0) {
                        left = 0;
                        Log.d("onTouch (PanSeekBar)", "left < 0: " + left);
                    } else if (left >= track.getWidth() - thumb.getWidth()) {
                        left = track.getWidth() - thumb.getWidth();
                        Log.d("onTouch (PanSeekBar)",
                                "left >= track.getWidth(): " + left);
                    }
                    int top = thumb.getTop();
                    int right = left + thumb.getWidth();
                    int bottom = top + thumb.getHeight();

                    thumbLeft = left;
                    thumbTop = top;
                    thumbRight = right;
                    thumbBottom = bottom;

                    Log.d("onTouch (PanSeekBar)",
                            "Action Move -- thumb layout: " + thumbLeft + ", "
                                    + thumbTop + ", " + thumbRight + ", "
                                    + thumbBottom);

                    layout1.invalidate();
                    // thumb.invalidate();

                    break;

                case MotionEvent.ACTION_UP:
                    Log.d("onTouch (PanSeekBar)", "Action Up");
                    touched = false;
                    break;
                }// End of switch

                return true;
            }// End of onTouch
        });
    }// End of initialize

    @Override
    protected void onDraw(Canvas canvas) {
        Log.d("onDraw (PanSeekBar)", "onDraw");
        super.onDraw(canvas);

        if (initialized) {
            thumb.layout(thumbLeft, thumbTop, thumbRight, thumbBottom);
            Log.d("onDraw (PanSeekBar)", "thumb layout: " + thumbLeft + ", "
                    + thumbTop + ", " + thumbRight + ", " + thumbBottom);
        }
    }// End of onDraw
}// End of PanSeekBar 
```

Here is the code for the vertical slider that does work:

```
public class MySeekBar extends RelativeLayout {

    private RelativeLayout layout1;
    public ImageView track;
    public ImageView thumb;
    private MyToast toast;
    private MyToast toast2;
    private MyToast toast3;
    private int globalMaxValue;
    private int globalProgress;

    private boolean initialized = false;
    public int thumbDownPosX = 0;
    public int thumbDownPosY = 0;
    public int thumbLeft = 0;
    public int thumbTop = 0;
    public int thumbRight = 0;
    public int thumbBottom = 0;

    private int globalSetProgress = 0;
    private int globalConfigType = 1;

    // Margin top in custom_seekbar.xml
    private int marginTop = 20;
    public boolean touched = false;

    public MySeekBar(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        initialize(context);
    }// End of MySeekBar

    public void initialize(Context context) {
        Log.d("initialize (MySeekBar)", "initialize");
        setWillNotDraw(false);

        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view1 = inflater.inflate(R.layout.custom_seekbar, this);

        layout1 = (RelativeLayout) view1.findViewById(R.id.al_cs_layout1);
        track = (ImageView) layout1.findViewById(R.id.cs_track);
        thumb = (ImageView) layout1.findViewById(R.id.cs_thumb);

        // Gets marginTop
        MarginLayoutParams params = (MarginLayoutParams) track
                .getLayoutParams();
        Log.d("initialize (MySeekBar)", "current margintop = " + marginTop);
        marginTop = params.topMargin;
        Log.d("initialize (MySeekBar)", "new margintop = " + marginTop);

        // int marginTopPixelSize = params.topMargin;
        // Log.d("initialize (MySeekBar)","debug = "+marginTopPixelSize);

        // Jared
        // When creating MyToast, setting width causes issues.
        toast = new MyToast(context);
        toast.setText("");
        toast.setBackgroundColor(Color.LTGRAY);
        toast.setTextColor(Color.BLACK);
        toast.setPadding(1, 1, 1, 1);
        toast.setVisibility(View.INVISIBLE);
        toast.setTextSize(10f);
        // toast.setWidth(40);

        toast2 = new MyToast(context);
        toast2.setTextSize(12f);
        toast2.setTextColor(Color.rgb(192, 255, 3));
        // toast2.setWidth(40);
        toast2.setPadding(10, 1, 1, 1);
        // toast2.setBackgroundColor(Color.BLACK);
        toast2.setVisibility(View.INVISIBLE);

        toast3 = new MyToast(context);
        toast3.setText("CH");
        toast3.setTextSize(15f);
        toast3.setTextColor(Color.rgb(192, 255, 3));
        // toast3.setWidth(40);
        toast3.setPadding(1, 1, 1, 1);

        layout1.addView(toast);
        layout1.addView(toast2);
        layout1.addView(toast3);

        thumb.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                initialized = true;

                // 0=down 1=up 2=move
                // Log.d("onTouch (MySeekBar)",
                // Integer.toString(event.getAction()));
                switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    Log.d("onTouch (MySeekBar)", "Action Down");
                    thumbDownPosX = (int) event.getX();
                    thumbDownPosY = (int) event.getY();
                    // Position of thumb touched. Irrelevant to scale
                    // Log.d("onTouch (NewSeekBar)","thumbDownPosX "+thumbDownPosX+" thumbDownPosY "+thumbDownPosY);
                    thumbLeft = thumb.getLeft();
                    thumbTop = thumb.getTop();
                    thumbRight = thumb.getRight();
                    thumbBottom = thumb.getBottom();
                    touched = true;
                    toast2.setVisibility(View.INVISIBLE);
                    toast3.setVisibility(View.INVISIBLE);
                    toast.setVisibility(View.VISIBLE);
                    // Location/size of the thumb button
                    // Log.d("onTouch (NewSeekBar)","thumbLeft "+thumbLeft+" thumbRight "+thumbRight+" thumbTop "+thumbTop+" thumbBottom "+thumbBottom);

                    break;

                case MotionEvent.ACTION_MOVE:
                    // Log.d("onTouch (MySeekBar)", "Action Move");
                    int thumbHeight = thumb.getHeight();
                    int thumbWidth = thumb.getWidth();
                    int trackWidth = track.getWidth();
                    int trackHeight = track.getHeight();
                    // Location/size of the thumb button and track
                    // Log.d("onTouch (NewSeekBar)","thumbHeight "+thumbHeight+" thumbWidth "+thumbWidth+" trackWidth "+trackWidth+" trackHeight "+trackHeight);

                    int top = (int) (thumb.getTop() + event.getY() - thumbDownPosY);
                    Log.d("onTouch (NewSeekBar)", "top " + top);

                    // Top border
                    if (top < marginTop) {
                        top = marginTop;
                        Log.d("onTouch (NewSeekBar)", "top < marginTop " + top);
                    } else if (top >= trackHeight - thumbHeight + marginTop) {
                        top = trackHeight - thumbHeight + marginTop;
                        Log.d("onTouch (NewSeekBar)", "top >= trackHeight "
                                + top);
                    }

                    thumbLeft = thumb.getLeft();
                    ;
                    thumbTop = top;
                    thumbRight = thumbLeft + thumbWidth;
                    thumbBottom = top + thumbHeight;

                    // Log.d("onTouch (MySeekBar)",
                    // "thumbTop: "+thumbTop+" thumbBottom: "+thumbBottom);
                    int value = getProgress();
                    Log.d("onTouch (NewSeekBar)", "getProgress(): " + value);
                    // setdBText(value);

                    // Log.d("onTouch (MySeekBar)", "value: "+value);
                    setProgress(value);
                    // toast.setText(String.valueOf(temp));
                    // toast2.setText(String.valueOf(temp));
                    layout1.invalidate();

                    break;

                case MotionEvent.ACTION_UP:
                    Log.d("onTouch (MySeekBar)", "Action Up");
                    toast.setVisibility(View.INVISIBLE);
                    toast2.setVisibility(View.VISIBLE);
                    toast3.setVisibility(View.VISIBLE);
                    touched = false;
                    break;
                }// End of switch
                return true;
            }// End of onTouch
        });
    }// End of initialize

    @Override
    protected void onDraw(Canvas canvas) {
        Log.d("onDraw (MySeekBar)", "onDraw");
        super.onDraw(canvas);

        if (initialized) {
            thumb.layout(thumbLeft, thumbTop, thumbRight, thumbBottom);
            Log.d("onDraw (MySeekBar)", "thumb layout: " + thumbLeft + ", "
                    + thumbTop + ", " + thumbRight + ", " + thumbBottom);
            int top = thumbTop - marginTop;
            int left = thumbLeft + 4;
            // toast.layout(left, top, left + toast.getWidth(), top +
            // toast.getHeight());

            top = thumbTop + thumb.getHeight() / 2 - toast2.getHeight() / 2 + 1;
            left = thumbLeft;
            toast2.layout(left, top, left + toast2.getWidth(),
                    top + toast2.getHeight());
        }
    }// End of onDraw 
```

The XML:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:id="@+id/test_layout">

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <com.networksound.Mixer3.NewSeekBar
            android:id="@+id/newSeekBar1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </com.networksound.Mixer3.NewSeekBar>

        <com.networksound.Mixer3.NewSeekBar
            android:id="@+id/newSeekBar2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </com.networksound.Mixer3.NewSeekBar>

        <com.networksound.Mixer3.MySeekBar
            android:id="@+id/mySeekBar1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </com.networksound.Mixer3.MySeekBar>

        <com.networksound.Mixer3.MySeekBar
            android:id="@+id/mySeekBar2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </com.networksound.Mixer3.MySeekBar>

    </LinearLayout>

    <LinearLayout 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <com.networksound.Mixer3.PanSeekBar
            android:id="@+id/panSeekBar1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </com.networksound.Mixer3.PanSeekBar>

        <com.networksound.Mixer3.PanSeekBar
            android:id="@+id/panSeekBar2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </com.networksound.Mixer3.PanSeekBar>

    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T20:53:24.297

如果您要扩展 a`ViewGroup`您应该覆盖`dispatchDraw()`而不是`onDraw()`，或者在构造函数中调用`setWillNotDraw(false)`. [这里](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/oLccWfszuUo)有一些讨论。

# java - Moving File to Directory with PHP

> ID：15394453
> 
> 赞同：0
> 
> 时间：2013-03-13T19:15:12.327
> 
> 标签：java, php, file-upload

I have this short, basic code:

```
<?php
    $username = $_POST['User'];
    $file = $_FILES['File'];
    $size = $_FILES['File']['size'];
    $name = $_FILES['File']['name'];
    $temp_name = $file['tmp_name'];
    $user_id = Data::getUserId($username);
    $target_path = "/---/---/profile_pics/" . $name;

    $sql = "INSERT INTO profile_photos (name, size, user_id) 
               VALUES ('{$name}', '{$size}', '{$user_id}');";
    mysqli_query($dbconnection, $sql);

    move_uploaded_file($temp_name, $target_path);
?> 
```

Note, this is TESTING code so I may have not followed best practice.

I get the correct file information into my MySQL database. But I do not get the actual file moved in the directory.

Also, the database IS extracting the correct file size and file name so something is being passed to PHP that is accurate for sure.

* * *

I am passing the file from Java. **Here is supplemental info** on that end (in case anyone knows about that end; but I do not think the problem is here:

```
HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost(url_select);
File file = new File(imagePath);
HttpResponse response = null;
MultipartEntity entity = new MultipartEntity();
ContentBody cbFile = new FileBody(file, "image/jpeg");
StringBody sb;  

try {
    sb = new StringBody(userName);
    entity.addPart("User", sb);
    entity.addPart("File", cbFile);
    post.setEntity(entity);
    response = client.execute(post);            
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:33:55.090

PHP 可能没有写入目标目录的权限。这可以解释为什么 PHP 有关于文件的信息，但不能将它移动到那个位置。

您可以尝试在同一位置向文件（fopen、fwrite 等）写入一些简单的内容，以验证权限设置是否正确。

如果您打开了 PHP 错误日志记录，您还应该在日志中看到关于此的注释。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:41:27.717

它可以仔细检查您的路径小子。这就是我的问题的答案。否则代码是正确的。

# bit-manipulation - (Bitwise Logic) What does AND'ing something with 0x7F accomplish?

> ID：15394454
> 
> 赞同：2
> 
> 时间：2013-03-13T19:15:16.290
> 
> 标签：bit-manipulation, bitwise-and

I'm trying to understand a program that I have disassembled. I'm understanding it so far.

However, I do not understand why the program is AND'ing an integer with 0x7F. It also likes to AND an integer with 0xFF. The program is somewhat of a random number generator.

What does this accomplish?

I think AND'ing with 0xFF takes the lower byte (of a register) and discards the rest?

Specifically in MIPS ASM:

```
## r2 = 0xfd    r3 = 0x10 ##

andi r2,r2,0x00ff       # What? Why?
andi r3,r3,0x007f       # What? Why? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:54:11.127

与 0x7f 进行“与”运算用于删除最高有效位，因为 0x7f 是 0111 1111 并确保该数字为正数。与 0xff 进行“与”运算则相反。

# python - web.py 获取请求头

> ID：15394459
> 
> 赞同：5
> 
> 时间：2013-03-13T19:15:36.057
> 
> 标签：python, web.py

我从 python 和 web.py 开始

我试图用它构建一个 REST api。我知道如何使用 web.py 的基础知识，但我仍然可以找到一种方法来获取请求的 Content-Type 我定义了这个 post 函数：

```
 def POST(self,name):
        ct=web.ctx.env.get('Content-Type')
        return json.dumps({ 'body' : web.data(),'ct':ct } ) 
```

我试图获取正文数据和内容类型位 ct 以 null 结尾

```
curl -H 'Accept: application/json' localhost:8080/test -d '{"a":"b"}' -H "Content-Type: application/json" 
```

输出

```
{"body": "{\"a\":\"b\"}", "ct": null} 
```

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T19:18:05.527

该[`web.ctx.env`](http://webpy.org/cookbook/ctx)结构使您可以访问[WSGI 环境变量](http://www.python.org/dev/peps/pep-0333/#environ-variables)。在 WSGI 应用程序中，内容类型标头命名为`CONTENT_TYPE`：

```
ct = web.ctx.env.get('CONTENT_TYPE') 
```

# jquery - 为jquery中的变量赋值

> ID：15394461
> 
> 赞同：1
> 
> 时间：2013-03-13T19:15:48.073
> 
> 标签：jquery, variables, drop-down-menu, variable-assignment

jquery如何给变量赋值

```
 {var c2;
    $(c2).val("standard_desc");
    alert (c2);
    $('#ANDCriteria2').val(c2); 

    } 
```

我正在尝试设置变量的值，它将是静态的。在下一行中，我尝试使用相同的变量设置下拉列表的选定值。我知道我可以打字

```
$('#ANDCriteria2').val("standard_desc"); 
```

但我有不同的要求，请指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:20:08.547

只需在 JavaScript 中声明变量。

```
 <script>
   var c2;
   c2 = "value";
 </script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-24T18:30:40.443

试试这个方法。。

```
<script src="//code.jquery.com/jquery-1.10.2.js"></script>

<input id="points" type="text" value="">
<input id="var" type="text" value="">

$( "input" )
  .keyup(function() {
    var points= $("#points" ).val();
    $( "#var" ).val( (points));
  })
  .keyup(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-13T19:19:02.650

我不知道你为什么`{`有你的问题..你错过了什么..无论如何为变量赋值非常简单..使用 `=`运算符

```
var c2 = "standard_desc";
 alert(c2);
 $('#ANDCriteria2').val(c2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T19:18:06.603

它只是 JavaScript：

```
var c2 = "value"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T19:38:40.270

```
<script>
function fun()
{
var c2="standard_desc";
    alert (c2);
    $('#ANDCriteria2').val(c2); 

    } 
</script> 
```

# javascript - 隐藏/显示在 Internet Explorer 中不起作用

> ID：15394465
> 
> 赞同：3
> 
> 时间：2013-03-13T19:16:05.697
> 
> 标签：javascript, jquery, html, internet-explorer

## 概述

我正在创建一系列 id 名为“cda2012_#”的 div，其中 # 代表顺序。它们应该出现 8.5 秒，并被序列中的下一个 div 替换。这些 div 将无限循环。下面的脚本在 div 加载后在页面底部执行。

## 所需效果

由 id 标记的特定 div 将在彼此之间按顺序无限循环。（在 FF/Chrome 中工作）

## IE9 中的错误

第一个 div 显示正常，但第二个 div 不会显示，也不会循环回到序列中的第一个 div。

**UDPATE：** IE9 中的问题是序列中的下一个 div 不显示。在 Firefox/Chrome 中，div 将无限循环 8.5 秒。

**更新 2：**根据请求在 div id 和脚本中从 - 切换到 _。仍然没有在 IE9 中按顺序拉下一个 div。

**更新 3：**根据建议更新了隐藏的 divs 元素以具有背景颜色。这对 IE9 中的 div 之间的循环没有影响。

**更新 4：**使用的封装代码： j(function() {...});

* * *

## 解决方案

*   将代码封装在 j(function() {...});
*   将“-”（连字符）切换为“_”（下划线）

## 由于@Beetroot-Beetroot 的输入而修复

* * *

```
<script>
    var divs = j('div[id^="cda2012_"]').hide(),
        i = 0;

    (function cycle() { 
        divs.eq(i).fadeIn(450)
            .delay(8500)
            .fadeOut(450, cycle);

            i = ++i % divs.length;
    })();
</script> 
```

这是一个将出现在 HTML 中的脚本上方的示例 div：

```
<div id="cda2012_1">
    <div id="table-hd">Project Title</div>
    <div id="table-bd">
        <span id="table-q">
            <img align="middle" alt="" src="http://aiawa.org/associations/12413/files/cda2012-hogue.png" />
            <hr id="table-hr" />
            Firm: <a href="http://lmnarchitects.com/" target="_blank">LMN</a><br />
            Photo: <a href="http://lmnarchitects.com/" target="_blank">LMN</a></span><span id="table-v"><br />
            <center>
                <span id="table-h2">Did you know?</span>
            </center><br />
            Students and faculty at Central Washington University can assemble wind turbines or test photovoltaic technologies on the &quot;working roof&quot; of their 92,000GSF LEED Platinum facility. <br />
        </span>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:21:32.053

我相信 fadeIn[Out] - 影响 CSS 不透明度 - 在旧版本的 IE 中不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:30:19.283

不久前我做了类似的事情，代码（来自内存）是这样的：

```
j(function() {
    var projectContainer = j("#.....");//the parent div
    projectContainer.find('.projects').hide();//select by class
    var t_ref, allowCycle = true;
    function cycle() {
        projectContainer.find('.projects:last').hide().prependTo(projectContainer).fadeIn(450);
        if(allowCycle) t_ref = setTimeout(cycle, 8950);
    };
}); 
```

据我所知，IE（版本？）没有问题。

Vars`t_ref`并`allowCycle`允许在必要时停止循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:57:22.317

-------------- 阅读有关如何修复 FadeIN 和 FadeOUT 功能的信息 ---------------

它与 IE 需要进行不透明度和颜色更改的“过滤器”有关。

链接:: [http://www.kevinleary.net/jquery-fadein-fadeout-problems-in-internet-explorer/](http://www.kevinleary.net/jquery-fadein-fadeout-problems-in-internet-explorer/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T19:30:37.570

只是为了快速思考问题所在：

*   你用的是什么版本的IE浏览器？尝试更新。

*   使用来自 google 的最新版本的 JQuery。

*   *可能存在问题“因为浏览器理解 javascript 而不是独立的 jQuery 片段。jQuery 将我们的代码转换为普通的 javascript 代码，以便浏览器可以解释我们在说什么。Javascript 库是快捷方式。如果您要加载库插件在库本身被加载之前，插件将被浏览器视为一堆笨拙的东西。这段代码在加载库之前绝对没有任何意义。*（来源：http: [//css-plus.com/2010/03/6-steps-to-take-if-your-jquery-is-not-working/](http://css-plus.com/2010/03/6-steps-to-take-if-your-jquery-is-not-working/)）

*   希望这会有所帮助，IE 无论如何都是染色浏览器。祝你好运。

# php - PHP根据返回值重复一个函数

> ID：15394471
> 
> 赞同：0
> 
> 时间：2013-03-13T19:16:32.733
> 
> 标签：php

我想知道如何重复一个函数，直到返回某个值。我认为这样的事情会起作用，但事实并非如此。

```
list($db_Total) = getData($db_queryResult); // a random number from a mysqli query result.

function getData($db_Total){
 if($db_Total){
   while($arr = mysqli_fetch_array){
      $db_Total = $arr['prize']; // set db_Total to database query amount
  }
 }
}
if($db_Total>=300){
 echo "is equal or higher than 300";

  while($db_Total >= 300){  // loop until you get a smaller result
   list($db_Total) = getData($db_queryResult);
  }
}elseif($db_Total <= 300){
  echo "is lower than 300";
} 
```

我想最简单的说法是，我想只运行一次函数，如果该函数返回的值高于我不想要的值，我想再次运行该函数，直到它运行......这可能吗?

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:28:58.240

以下是该代码中的一些错误：

*   `$arr = mysqli_fetch_array`应该`$arr = mysqli_fetch_array($db_queryResult)`
*   但是多次调用`mysqli_fetch_array`它不会改变结果，因为你已经运行了一次实际的 SQL
*   还是您的意思是每次`getData`调用函数时只查看多行结果的一行 - 在这种情况下，您不希望该`while`函数内部的循环会消耗数据库结果中的所有行
*   该`getData`函数从不返回任何内容（无`return`语句）
*   该`getData`函数似乎被赋予了一个 DB 结果集，但调用它`$db_Total`并且除了检查它是否为 false-y ( `if($db_Total)`)之外什么也不做
*   `list($foo) = bar()`当`bar()`返回一个包含多个单独项的数组时使用；不知道为什么你认为你在这里需要它
*   `elseif($db_Total <= 300){`应该只是`else`
*   当心无限循环——你绝对保证最终得到一个低于 300 的数字吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:19:22.517

```
while (($db_Total = getData($db_queryResult)) >= 300) {
  echo "is equal or higher than 300";
}
echo "is lower than 300"; 
```

# php - 每次在页面上调用图像时如何刷新图像

> ID：15394474
> 
> 赞同：0
> 
> 时间：2013-03-13T19:16:43.243
> 
> 标签：php, image, caching

默认情况下，加载网页时，每张图片都会加载一次图片。如果您在一个页面上有 5 个相同图像的实例，则该图像被加载一次，然后在所有 5 个地方使用，看似来自第一个图像加载的缓存。

我想要做的是在一个页面上显示 5 次单个图像，并且每次调用图像时都会重新加载它。

这样做的原因是我有一个从数据库调用的图像，每次调用图像时都会加载不同的图片。现在这在重新刷新页面时非常有效，但在同一页面上多次加载图像时却不行。

例如，如果我将以下内容放入网页：

```
<img src='http://bannerpillar.com/u/viraladmin.jpg'> 
```

图像加载完美。如果我重新加载页面，每次重新加载页面时都会显示不同的图片。但是，如果我将图像添加到 2 个不同位置的页面，则会从两个位置显示同一张图片。

我怎样才能使它每次在页面上调用时都会刷新图像？那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:19:19.583

尝试在文件引用的末尾添加一些内容，如下所示：

```
<img src='http://bannerpillar.com/u/viraladmin.jpg?<?=rand(11111,99999)?>'> 
```

浏览器会认为每个图像都是唯一的，并单独加载每个图像，而不是使用缓存中的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:29:26.003

你可以在这里找到关于这个确切问题的教程：http: [//www.marcofolio.net/webdesign/php_random_image_rotation.html](http://www.marcofolio.net/webdesign/php_random_image_rotation.html)

基本上，在 src 中，您调用一个 php 文件。php 文件从图像目录加载文件名。

对于您的情况，您需要编写一些逻辑来抵消数据库返回，所以这也成为一个 mysql 问题？

如果您希望标记调用图像文件，您可以使用 .htaccess rewriterule 重定向

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:52:47.387

随机编号 代代相传可能是一个不错的选择。但如果你连续加载这些图像会更好，即一个接一个的nu可以为此使用循环。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-13T19:19:44.433

将 ?rand= 添加到图像 url。

```
<img src='http://bannerpillar.com/u/viraladmin.jpg?rand=<?php echo rand(100000,999999); ?>'> 
```

# groovy - 使用 groovy 以编程方式启动 mule 流

> ID：15394475
> 
> 赞同：2
> 
> 时间：2013-03-13T19:16:44.183
> 
> 标签：groovy, mule

我需要通过 HTTP 调用手动控制流的执行。

有人告诉我，我可以使用流上的`initialState="stopped"`属性在启动期间禁用流的执行。（[如何在启动后停止 mule 流运行](https://stackoverflow.com/questions/15387745/how-to-stop-a-mule-flow-from-running-after-startup)）

我需要知道如何使用 groovy 脚本开始回流。

使用骡子 3.2.2。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T20:07:14.520

这应该这样做：

```
<scripting:component>
    <scripting:script engine="groovy">
        muleContext.registry.lookupFlowConstruct('targetFlow').start()
    </scripting:script>
</scripting:component> 
```

# sql-server - SQL 服务器如何处理对临时表的更新（关于磁盘访问）

> ID：15394486
> 
> 赞同：0
> 
> 时间：2013-03-13T19:17:43.157
> 
> 标签：sql-server, performance, temp-tables

假设我们有 MS SQL Server 数据库和表 A。然后，我们执行如下操作：

```
select A.a1 
into #temp1
from A 
```

这个[链接](http://support.microsoft.com/kb/305977/en-us)说：“如果内存可用，表变量和临时表都会在内存中创建和处理（数据缓存）。”

假设我们在 #temp1 中有 100 行，它们很容易放入内存中……所以现在整个 #temp1 都在内存中。但是，我们执行以下语句：

```
UPDATE #temp1 SET a1 = a1 + 1 
```

这是否涉及一些 IO 操作？例如，是否将某些内容写入 temp_log （我认为，不是在 RAM 中）？或者，因为我们现在正在进行更新，所以整个#temp1 被移动到了 hdd...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:22:24.957

My understanding is that no log is kept for temp tables, as tempdb is cleared on every restart.

Update: Logging occurs in tempdb, but it is reduced: [http://msdn.microsoft.com/en-ca/library/ms190768.aspx](http://msdn.microsoft.com/en-ca/library/ms190768.aspx);

Perhaps a table-valued variable is suitable instead of a table in tempdb: [http://msdn.microsoft.com/en-us/library/ms175010.aspx](http://msdn.microsoft.com/en-us/library/ms175010.aspx)

# c# - SendInput 在 Windows 8（64 位）中不起作用，但在 Windows 7（32 位）中起作用

> ID：15394487
> 
> 赞同：1
> 
> 时间：2013-03-13T19:17:43.390
> 
> 标签：c#, windows-8, keyboard, sendinput, keystrokes

我编写了程序以将输入发送到游戏和桌面应用程序，而不是从键盘获取输入。结果如下：

Windows 7（32 位）：在游戏和桌面应用程序中完美运行。

Windows 8（64 位）：不能在游戏中工作，但在 notepad.exe 中工作。

那么为什么它不适用于win 8？

这是代码：

```
 [StructLayout(LayoutKind.Sequential)]
    struct MOUSEINPUT
    {
        public int dx;
        public int dy;
        public uint mouseData;
        public uint dwFlags;
        public uint time;
        public IntPtr dwExtraInfo;
    }

    [StructLayout(LayoutKind.Sequential)]
    struct KEYBDINPUT
    {
        public ushort wVk;
        public ushort wScan;
        public uint dwFlags;
        public uint time;
        public IntPtr dwExtraInfo;
    }

    [StructLayout(LayoutKind.Sequential)]
    struct HARDWAREINPUT
    {
        public int uMsg;
        public short wParamL;
        public short wParamH;
    }

    [StructLayout(LayoutKind.Explicit)]
    struct MouseKeybdHardwareInputUnion
    {
        [FieldOffset(0)]
        public MOUSEINPUT mi;

        [FieldOffset(0)]
        public KEYBDINPUT ki;

        [FieldOffset(0)]
        public HARDWAREINPUT hi;
    }

    [StructLayout(LayoutKind.Sequential)]
    struct INPUT
    {
        public uint type;
        public MouseKeybdHardwareInputUnion mkhi;
    }
    enum SendInputFlags
    {
        KEYEVENTF_EXTENDEDKEY = 0x0001,
        KEYEVENTF_KEYUP = 0x0002,
        KEYEVENTF_UNICODE = 0x0004,
        KEYEVENTF_SCANCODE = 0x0008,
    }

    [DllImport("user32.dll")]
    static extern UInt32 SendInput(UInt32 nInputs, [MarshalAs(UnmanagedType.LPArray, SizeConst = 1)] INPUT[] pInputs, Int32 cbSize);
    public static void StrokeKey(ushort codeOfKey)
    {
        INPUT[] InputData = new INPUT[1];
        ushort ScanCode = codeOfKey;
        InputData[0].type = 1;
        InputData[0].mkhi.ki.wScan = (ushort)ScanCode;
        InputData[0].mkhi.ki.dwFlags = (uint)SendInputFlags.KEYEVENTF_SCANCODE;

        if (SendInput(1, InputData, Marshal.SizeOf(InputData[0])) == 0)
        {
            String blad = "SendInput failed with code: " + Marshal.GetLastWin32Error().ToString();
            System.Diagnostics.Debug.WriteLine(blad);
        }
    }

    public static void ReleaseKey(ushort codeOfKey)
    {
        INPUT[] InputData = new INPUT[1];
        ushort ScanCode = codeOfKey;
        InputData[0].type = 1;
        InputData[0].mkhi.ki.wScan = (ushort)ScanCode;
        InputData[0].mkhi.ki.dwFlags = (uint)SendInputFlags.KEYEVENTF_KEYUP | (uint)SendInputFlags.KEYEVENTF_SCANCODE;
        InputData[0].mkhi.ki.time = 0;
        InputData[0].mkhi.ki.dwExtraInfo = IntPtr.Zero;
        SendInput(1, InputData, Marshal.SizeOf(InputData[0]));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T14:33:06.117

最有可能的指针大小在 32 位上是不同的，它的大小在 64 位上是 4，它的大小是 8

# php - 为什么 date_parse 不能识别字符串中的年份

> ID：15394491
> 
> 赞同：0
> 
> 时间：2013-03-13T19:18:00.530
> 
> 标签：php, date-parsing

为什么`date_parse`不识别字符串中的年份？

```
<?php
$string = "Saturday, 23 March, 2013";
print_r(date_parse($string));
?> 
```

结果，

```
Array
(
    [year] => 
    [month] => 3
    [day] => 23
    [hour] => 20
    [minute] => 13
    [second] => 0
    [fraction] => 0
    [warning_count] => 0
    [warnings] => Array
        (
        )

    [error_count] => 0
    [errors] => Array
        (
        )

    [is_localtime] => 
    [relative] => Array
        (
            [year] => 0
            [month] => 0
            [day] => 0
            [hour] => 0
            [minute] => 0
            [second] => 0
            [weekday] => 6
        )

) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:19:45.240

好像格式不对。当您执行以下操作时，它会返回正确的年份。

```
$string = "Saturday, 23 March, 2013";
                             ^ //no comma here, should be just 23 March 2013 
```

在[支持的格式](http://www.php.net/manual/en/datetime.formats.date.php)中，可以看到日期字符串和时间字符串的所有组件都具有相同的分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:35:26.260

你也可以试试 strtotime()。这是一个了不起的功能，可以处理各种各样的输入——甚至是像“3天前”这样的相对输入。

# mysql - MySQL：组合表 1 中的多列并插入表 2 中的 1 列

> ID：15394492
> 
> 赞同：0
> 
> 时间：2013-03-13T19:18:00.903
> 
> 标签：mysql, sql, join, relational-database

我一直在试图解决这个问题，但似乎无法提出一个简单的解决方案。

比如说我有一个表，它在 3 列中具有相似的数据（即跨越 3 列的不同类型的活动），但我希望将这三列插入到单独的表（表 2）中，以便我可以将类似的数据保存在一起并执行一个 JOIN 以将其与表 1 中的相应数据相匹配。

我不是在谈论执行 CONCAT 或 CONCAT_WS，而是将这三列从 Table1 移动到 Table2 中的一列，每个项目都有自己的行。

有没有办法通过查询来做到这一点，而不必手动将每个条目插入 Table2？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:23:04.887

It might be as simple as:

```
insert into table2
(field)
select column1 from table1
union
select column2 from table1
union
select column3 from table1 
```

But, before you do this, decide what you want to do if two columns in table1 have the same value.

# android - 找不到资源，但它在它的位置

> ID：15394499
> 
> 赞同：3
> 
> 时间：2013-03-13T19:18:26.893
> 
> 标签：android

我的报告向我提供了这个错误，但我不明白这怎么可能？

```
 java.lang.RuntimeException: Unable to start activity ComponentInfo{net.aviascanner.aviascanner/net.aviascanner.aviascanner.ui.activities.GetCitiesActivity}: android.view.InflateException: Binary XML file line #11: Error inflating class <unknown>
            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2753)
            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2769)
            at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3905)
            at android.app.ActivityThread.access$2600(ActivityThread.java:129)
            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2121)
            at android.os.Handler.dispatchMessage(Handler.java:99)
            at android.os.Looper.loop(Looper.java:143)
            at android.app.ActivityThread.main(ActivityThread.java:4717)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:521)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
            at dalvik.system.NativeStart.main(Native Method)
    Caused by: android.view.InflateException: Binary XML file line #11: Error inflating class <unknown>
            at android.view.LayoutInflater.createView(LayoutInflater.java:513)
            at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
            at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
            at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:853)
            at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
            at net.aviascanner.aviascanner.ui.activities.GetCitiesActivity.onCreate(GetCitiesActivity.java:115)
            at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2717)
            ... 12 more
    Caused by: java.lang.reflect.InvocationTargetException
            at android.widget.EditText.<init>(EditText.java:51)
            at java.lang.reflect.Constructor.constructNative(Native Method)
            at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
            at android.view.LayoutInflater.createView(LayoutInflater.java:500)
            ... 25 more
    Caused by: android.content.res.Resources$NotFoundException: File res/drawable/selector_edittext.xml from drawable resource ID #0x7f0200c4
            at android.content.res.Resources.loadDrawable(Resources.java:1725)
            at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
            at android.view.View.<init>(View.java:1901)
            at android.widget.TextView.<init>(TextView.java:440)
            at android.widget.EditText.<init>(EditText.java:55)
            ... 29 more
    Caused by: java.lang.NullPointerException
            at android.graphics.drawable.DrawableContainer$DrawableContainerState.addChild(DrawableContainer.java:349)
            at android.graphics.drawable.StateListDrawable$StateListState.addStateSet(StateListDrawable.java:265)
            at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:173)
            at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:796)
            at android.graphics.drawable.Drawable.createFromXml(Drawable.java:737)
            at android.content.res.Resources.loadDrawable(Resources.java:1722)
            ... 33 more
    android.view.InflateException: Binary XML file line #11: Error inflating class <unknown>
            at android.view.LayoutInflater.createView(LayoutInflater.java:513)
            at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
            at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
            at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:853)
            at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
            at net.aviascanner.aviascanner.ui.activities.GetCitiesActivity.onCreate(GetCitiesActivity.java:115)
            at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2717)
            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2769)
            at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3905)
            at android.app.ActivityThread.access$2600(ActivityThread.java:129)
            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2121)
            at android.os.Handler.dispatchMessage(Handler.java:99)
            at android.os.Looper.loop(Looper.java:143)
            at android.app.ActivityThread.main(ActivityThread.java:4717)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:521)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
            at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.reflect.InvocationTargetException
            at android.widget.EditText.<init>(EditText.java:51)
            at java.lang.reflect.Constructor.constructNative(Native Method)
            at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
            at android.view.LayoutInflater.createView(LayoutInflater.java:500)
            ... 25 more
    Caused by: android.content.res.Resources$NotFoundException: File res/drawable/selector_edittext.xml from drawable resource ID #0x7f0200c4
            at android.content.res.Resources.loadDrawable(Resources.java:1725)
            at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
            at android.view.View.<init>(View.java:1901)
            at android.widget.TextView.<init>(TextView.java:440)
            at android.widget.EditText.<init>(EditText.java:55)
            ... 29 more
    Caused by: java.lang.NullPointerException
            at android.graphics.drawable.DrawableContainer$DrawableContainerState.addChild(DrawableContainer.java:349)
            at android.graphics.drawable.StateListDrawable$StateListState.addStateSet(StateListDrawable.java:265)
            at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:173)
            at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:796)
            at android.graphics.drawable.Drawable.createFromXml(Drawable.java:737)
            at android.content.res.Resources.loadDrawable(Resources.java:1722)
            ... 33 more
    java.lang.reflect.InvocationTargetException
            at android.widget.EditText.<init>(EditText.java:51)
            at java.lang.reflect.Constructor.constructNative(Native Method)
            at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
            at android.view.LayoutInflater.createView(LayoutInflater.java:500)
            at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
            at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
            at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:853)
            at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
            at net.aviascanner.aviascanner.ui.activities.GetCitiesActivity.onCreate(GetCitiesActivity.java:115)
            at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2717)
            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2769)
            at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3905)
            at android.app.ActivityThread.access$2600(ActivityThread.java:129)
            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2121)
            at android.os.Handler.dispatchMessage(Handler.java:99)
            at android.os.Looper.loop(Looper.java:143)
            at android.app.ActivityThread.main(ActivityThread.java:4717)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:521)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
            at dalvik.system.NativeStart.main(Native Method)
    Caused by: android.content.res.Resources$NotFoundException: File res/drawable/selector_edittext.xml from drawable resource ID #0x7f0200c4
            at android.content.res.Resources.loadDrawable(Resources.java:1725)
            at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
            at android.view.View.<init>(View.java:1901)
            at android.widget.TextView.<init>(TextView.java:440)
            at android.widget.EditText.<init>(EditText.java:55)
            ... 29 more
    Caused by: java.lang.NullPointerException
            at android.graphics.drawable.DrawableContainer$DrawableContainerState.addChild(DrawableContainer.java:349)
            at android.graphics.drawable.StateListDrawable$StateListState.addStateSet(StateListDrawable.java:265)
            at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:173)
            at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:796)
            at android.graphics.drawable.Drawable.createFromXml(Drawable.java:737)
            at android.content.res.Resources.loadDrawable(Resources.java:1722)
            ... 33 more
    android.content.res.Resources$NotFoundException: File res/drawable/selector_edittext.xml from drawable resource ID #0x7f0200c4
            at android.content.res.Resources.loadDrawable(Resources.java:1725)
            at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
            at android.view.View.<init>(View.java:1901)
            at android.widget.TextView.<init>(TextView.java:440)
            at android.widget.EditText.<init>(EditText.java:55)
            at android.widget.EditText.<init>(EditText.java:51)
            at java.lang.reflect.Constructor.constructNative(Native Method)
            at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
            at android.view.LayoutInflater.createView(LayoutInflater.java:500)
            at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
            at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
            at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:853)
            at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
            at net.aviascanner.aviascanner.ui.activities.GetCitiesActivity.onCreate(GetCitiesActivity.java:115)
            at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2717)
            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2769)
            at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3905)
            at android.app.ActivityThread.access$2600(ActivityThread.java:129)
            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2121)
            at android.os.Handler.dispatchMessage(Handler.java:99)
            at android.os.Looper.loop(Looper.java:143)
            at android.app.ActivityThread.main(ActivityThread.java:4717)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:521)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
            at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.NullPointerException
            at android.graphics.drawable.DrawableContainer$DrawableContainerState.addChild(DrawableContainer.java:349)
            at android.graphics.drawable.StateListDrawable$StateListState.addStateSet(StateListDrawable.java:265)
            at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:173)
            at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:796)
            at android.graphics.drawable.Drawable.createFromXml(Drawable.java:737)
            at android.content.res.Resources.loadDrawable(Resources.java:1722)
            ... 33 more
    java.lang.NullPointerException
            at android.graphics.drawable.DrawableContainer$DrawableContainerState.addChild(DrawableContainer.java:349)
            at android.graphics.drawable.StateListDrawable$StateListState.addStateSet(StateListDrawable.java:265)
            at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:173)
            at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:796)
            at android.graphics.drawable.Drawable.createFromXml(Drawable.java:737)
            at android.content.res.Resources.loadDrawable(Resources.java:1722)
            at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
            at android.view.View.<init>(View.java:1901)
            at android.widget.TextView.<init>(TextView.java:440)
            at android.widget.EditText.<init>(EditText.java:55)
            at android.widget.EditText.<init>(EditText.java:51)
            at java.lang.reflect.Constructor.constructNative(Native Method)
            at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
            at android.view.LayoutInflater.createView(LayoutInflater.java:500)
            at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
            at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
            at android.view.LayoutInflater.rInflate(LayoutInflater.java:621)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
            at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
            at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:853)
            at com.actionbarsherlock.app.SherlockFragmentActivity.setContentView(SherlockFragmentActivity.java:262)
            at net.aviascanner.aviascanner.ui.activities.GetCitiesActivity.onCreate(GetCitiesActivity.java:115)
            at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
            at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2717)
            at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2769)
            at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3905)
            at android.app.ActivityThread.access$2600(ActivityThread.java:129)
            at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2121)
            at android.os.Handler.dispatchMessage(Handler.java:99)
            at android.os.Looper.loop(Looper.java:143)
            at android.app.ActivityThread.main(ActivityThread.java:4717)
            at java.lang.reflect.Method.invokeNative(Native Method)
            at java.lang.reflect.Method.invoke(Method.java:521)
            at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
            at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
            at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:31:51.610

我也在我的应用程序中发现了这个错误。在我的应用程序中，我通过在可绘制对象的所有文件夹中制作可绘制对象的副本来解决我的问题，即drawable-ldpi、drawable-mdpi、drawable-hdpi、drawable-xhdpi。这在我的应用程序中正常工作。如果您没有将可绘制对象保存到所有提供的可绘制文件夹中，希望这将解决您的问题。

# asp.net - 通过 FormsAuthentication 在现有站点中使用 WIF

> ID：15394502
> 
> 赞同：1
> 
> 时间：2013-03-13T19:18:40.557
> 
> 标签：asp.net, forms-authentication, wif

我们请求允许使用 AD FS 进行 SSO。我浏览了所有 SDK 示例，并让 RP 在独立站点中工作，指向我们域中的 AD FS。我可以让声明显示在 default.aspx 页面上。

这是我接下来要做的事情。我希望将 WIF 页面作为子应用程序托管在我们的站点中，让该站点编写表单身份验证票，然后重定向到我们的主站点。我假设因为我从我的主站点继承了 Forms Auth 和 machinekey 设置，所以我在那里没有冲突。这是我所拥有的..

在我的 WIF 站点的 global.asax 中的 Application_PostAuthenticateRequest 事件中。（称为 WSFedAuthGate）可通过[https://fqdn.com/WSFedAuthGate/Default.aspx访问](https://fqdn.com/WSFedAuthGate/Default.aspx)

```
protected void Application_PostAuthenticateRequest(object sender, EventArgs e) {
    System.Web.HttpApplication app = sender as System.Web.HttpApplication;

    if (app.Request.IsAuthenticated && app.User != null && app.User.Identity != null) {
        string name = app.User.Identity.Name;
        FormsAuthentication.SetAuthCookie(name, false);
        // hard code for now..
        app.Response.Redirect("https://fqdn.com/home/asp_main.aspx");
    }

} 
```

表单身份验证票已写入，我被重定向到主站点，但主站点无法识别表单身份验证票..即 request.isAuthenticated 为假..

这是来自主站点的网络配置部分..

```
<authentication mode="Forms">
  <forms loginUrl="/home/asp_main.aspx" name=".myauth" protection="All" timeout="120" enableCrossAppRedirects="true"/>
</authentication> 
```

这是来自 WIF 子应用程序的身份验证..

```
<authentication mode="None" />
<authorization>
  <deny users="?" />
</authorization> 
```

然后

```
<system.webServer>
  <validation validateIntegratedModeConfiguration="false" />
  <modules>
    <remove name="RefreshController" />
    <add name="WSFederationAuthenticationModule" type="Microsoft.IdentityModel.Web.WSFederationAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" preCondition="managedHandler" />
    <add name="SessionAuthenticationModule" type="Microsoft.IdentityModel.Web.SessionAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" preCondition="managedHandler" />
  </modules>
    <defaultDocument>
        <files>
            <add value="Default.aspx" />
        </files>
    </defaultDocument>
</system.webServer> 
```

我在这里遗漏了一些简单的东西，我只知道..但是我已经在网上搜索了一天半了..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:29:06.193

事实证明，这很简单。在根应用程序的配置部分，validationKey 和decryptionKey 属性都应用了IsolateApps 修饰符.. aarrgg..

# javascript - 动态分配事件监听器

> ID：15394505
> 
> 赞同：0
> 
> 时间：2013-03-13T19:18:53.310
> 
> 标签：javascript, events, dynamic, titanium

在我的 Titanium 应用程序中，我有一个包含 6 个相同字段的表单，唯一的区别是它们的标题。我没有重复代码（不好的做法，更多的工作等），而是使用了一个 for 循环来动态创建具有 2 个标签和一个视图的每个字段：

```
//Required info
var startht = 30;
var sz = 40;
var width = '90%';
var labelgrp1 = new Array('Field 1', 'Field 2', 'Field 3', 'Field 4', 'Field 5', 'Field 6');
var viewbg = '#D4D4D4';

//For the first group of labels
for(var i=0; i<labelgrp1.length; i++) {
var view = Titanium.UI.createView({
   borderColor:'#000',
   backgroundColor:viewbg,
   touchEnabled: true,
   width:width, height:40,
   top: startht + i * (sz - 1)
});

var label = Ti.UI.createLabel({
  color: '#303030',
  font: { fontSize:16 },
  shadowColor: '#aaa',
  shadowOffset: {x:1, y:1},
  text: labelgrp1[i],
  left:10,
  width: 'auto', height: 'auto'
});

var symbol = Ti.UI.createLabel({
  color: '#303030',
  font: { fontSize:14 },
  right:10,
  text: '>',
  width: 'auto', height: 'auto'
});

view.add(label);
view.add(symbol);
win.add(view);
} 
```

我尝试将其添加到底部：

```
view.addEventListener('focus',function(e){
    Ti.API.info("Clicked on " + label.text);
}); 
```

但无济于事。有没有办法动态创建事件监听器，或者我需要为每个字段有一个单独的视图对象，以便它可以直接绑定到事件监听器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:24:55.230

焦点和模糊事件不会冒泡，因此在这种情况下，您需要监听每个单独的字段。

您可以使用鼠标事件对其进行破解，但这不是一个很好的解决方案：[http ://www.quirksmode.org/blog/archives/2008/04/delegating_the.html](http://www.quirksmode.org/blog/archives/2008/04/delegating_the.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:40:09.857

[Ti.UI.View](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.View)没有焦点事件。如果您想列出另一个事件，例如`click`，您可以将事件侦听器添加到 for 循环中的每个视图，如下所示：

```
(function(v, msg){
    v.addEventListener('click',function(e){
        Ti.API.info("Clicked on " + msg);
    });
})(view, label.txt); 
```

如果要添加确实有事件的[文本字段](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.TextField-event-focus)`focus`，则可以以相同的方式添加侦听器。

# javascript - 在最新的 safari 中，通过命名函数表达式的闭包访问对象很慢

> ID：15394512
> 
> 赞同：2
> 
> 时间：2013-03-13T19:19:19.170
> 
> 标签：javascript, anonymous-function, safari

在最新的 safari (5.1.7) 和移动 safari 中，通过闭包访问对象时，命名函数和匿名函数之间存在巨大的性能差异。请参阅[http://jsperf.com/nfe-fe/2](http://jsperf.com/nfe-fe/2)

这在早期版本的 safari 中不是问题，但在更高版本中似乎是一个问题。

有什么方法可以提高命名函数表达式的性能？我喜欢命名函数有两个原因 - 易于查看堆栈跟踪并使用 .name 属性获得更好的日志。最新的 safari 中的 bug 严重降低了我们应用程序的性能。

我在下面给出了 jsperf 中使用的测试代码：

准备代码

```
 Benchmark.prototype.setup = function() {

    var FunctionExpressionCreator = function () {

      var i = 0;
      this.a = function () {
        return ++i;
      }

      this.test = function () {
        for (var i = 0; i < 100; ++i) {
          this.a();
        }
      }
    };

    var functionExprObject = new FunctionExpressionCreator();

    var NamedFunctionExpressionCreator = function () {
      var i = 0;
      this.a = function a() {
        return ++i;
      }

      this.test = function test() {
        for (var i = 0; i < 100; ++i) {
          this.a();
        }
      }
    };

    var namedFunctionExprObject = new NamedFunctionExpressionCreator();
  }; 
```

测试1：命名函数ExprObject.test()；

测试2：函数ExprObject.test（）；

在最近的 iOS 和 Safari 5.1.7 上，Test1 的运行速度比 Test2 慢 85%，但两者在早期版本中的运行速度相当。

# arrays - C ++数组正在用循环中的当前值覆盖每个元素

> ID：15394517
> 
> 赞同：0
> 
> 时间：2013-03-13T19:19:33.750
> 
> 标签：arrays, pipe, parent

我对某事感到非常困惑。我有一个循环，它从子进程读回值并将它们插入到 char 数组中（称为 sleepTime）。我得到了正确的值（我在将它们放入我的 char 数组后立即在控制台中显示它们）但是当循环读取下一个值时，数组中的所有内容都会更新为从管道读回的当前值。退出循环后，我再次打印结果，数组的每个元素都是最后读取的值。任何人都可以阐明这一点吗？我很困惑。

```
char* sleepTime[4];
char randNumSend[15];
char randNumRet[15];
for (int i=0; i<nWorkers; i++){ // loop to read back values from child process
    read(pipe2[0],randNumRet,strlen(randNumSend));  // read back data
    sleepTime[i]=randNumRet; // save values as string for execlp command
    cout << "sleepTime" << i+1 << ": " << sleepTime[i]<< endl;
}

close(pipe2[0]);    // close read end of pipe2

for (int i =0; i<nWorkers; i++){
    cout << "sleepTime" << i+1 << ": " << sleepTime[i]<< endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:27:11.603

`char* sleepTime[4];`是一个指针数组。

如果您写信给`sleepTime[i]`您正在写入**未分配**的内存。这是一个错误。

要进行分配，您可以遍历数组并执行以下操作：

```
sleepTime[i] = malloc(sizeof(char) * length_of_string); 
```

然后不要忘记做同样的事情`free(sleepTime[i]);`以避免泄漏。

在 C++ 中使用`std::string`。

用法：

```
std::string foo = "blah blah";

std::string bar;  

bar = "blah blah"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:29:38.303

睡眠时间的值都指向同一个数组。我建议尝试 sleeptime[4][15] 并将 randNumRet 替换为 sleeptime[i] （在读取函数中）

# c# - 转换为 LINQ

> ID：15394518
> 
> 赞同：-8
> 
> 时间：2013-03-13T19:19:39.077
> 
> 标签：c#, linq

我开始在 linq 中重写以下代码，但无济于事。你能帮我解决这个问题吗？

```
 bool bReturn = false;
    string[] divs = strExport.Split(chrDivSep);

   // bReturn = divs.Any(D => D.Split(chrItemSep).Any(C => C.Split(chrCoupleSep)[0].ToUpper() == "TABLE"));
    foreach (string strdiv in divs)
    {
        string[] items = strdiv.Split(chrItemSep);
        foreach (string item in items)
        {
            string[] couple = item.Split(chrCoupleSep);
            switch (couple[0].ToUpper())
            {
                case "TABLE":
                    // There is a non constant field
                    bReturn = true;
                    break;
            }
            if (bReturn)
                break;

        }
        if (bReturn)
            break;
    }

    return bReturn; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:24:23.077

试试这个：

```
return (
    from div in strExport.Split(chrDivSep)
    from item in div.Split(chrItemSep)
    where String.Equals(item.Split(chrCoupleSep)[0], "table", StringComparison.OrdinalIgnoreCase)
).Any(); 
```

# .net - 奇怪的 SQLite 行为 - 有时“数据库被锁定”，但有时没有

> ID：15394519
> 
> 赞同：0
> 
> 时间：2013-03-13T19:19:40.387
> 
> 标签：.net, database, sqlite, system.data.sqlite

我`System.Data.SQLite`长期使用 SQLite（通过 .NET 的 wrapper）作为我的应用程序的数据库，一切正常。最近我开始收到“数据库已锁定”。我的 DAL 的功能很少，每个功能都可以读取和写入，并使用`using`块内新创建的连接。当我运行测试时，错误发生在*第二次*调用其中一个函数时。但是当我逐行调试和移动时，没关系。我的应用程序是单线程的。
有人有想法吗？
非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:48:16.580

您是否同时运行 SQLite 控制台或 SqliteAnalylitics exe？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:55:40.427

好像很多人遇到这个问题都解决不了，我就写一下解决办法。从`System.Data.SQLite`1.0.45.0 版本开始，关闭连接不会自动关闭任何相关`DbCommand`或`DbDataReader`对象。它们必须明确关闭。因此，连接并没有真正关闭，以允许这些对象工作，而只是在所有相关对象被释放后排队等待关闭。看到[这个](http://sqlite.phxsoftware.com/forums/p/909/4164.aspx)。
在以前的版本中，它的行为与预期一样，关闭连接实际上会关闭它！
解决方案：当你完成它们时`DbCommand`，`DbDataReader`明确地处理它们，就像你处理`DbConnection`它自己一样。

# excel - VBA代码将满足条件的行中的选定列复制到另一个工作表

> ID：15394524
> 
> 赞同：1
> 
> 时间：2013-03-13T19:19:49.303
> 
> 标签：excel, copy-paste, vba

我刚开始使用 Excel 的 VBA 代码，如果这看起来很基本，我深表歉意。我想做以下...

检查名为“索引”的工作表的 J 列（J5 到 J500）是否存在值“Y”。这是我的条件。然后我只想将符合条件的任何行的**列 C 复制到 I**到现有工作表和不同位置的单元格，即如果复制索引值 C3 到 I3 我想将它们粘贴到 A5 到 G5我所在的活动表，比如 Sheet2。

如果索引表有更改，我希望自动复制数据，如果可能的话。如果将新数据添加到索引中，它会如何工作？

经过大量搜索后，我发现[了这个](https://stackoverflow.com/questions/12177125/vba-macro-to-copy-row-from-table-if-value-in-table-meets-condition)。从这个问题中，我稍微更改了代码以满足我的要求，这会将满足条件的整行复制到我从中运行宏的工作表中，但我对如何仅选择某些列感到困惑。

```
Sub CopyRowsAcross() 

Dim i As Integer 
Dim ws1 As Worksheet: Set ws1 = ThisWorkbook.Sheets("Index") 
Dim ws2 As Worksheet: Set ws2 = ActiveSheet 

For i = 2 To ws1.Range("B65536").End(xlUp).Row 
If ws1.Cells(i, 2) = "Y" Then ws1.Rows(i).Copy ws2.Rows(ws2.Cells(ws2.Rows.Count, 2).End(xlUp).Row + 1) 
Next i 

End Sub 
```

任何帮助表示赞赏

约翰

编辑：我创建了一个模型，它位于[https://docs.google.com/file/d/0B0RttRif9NI0TGl0N1BZQWZfaFk/edit?usp=sharing](https://docs.google.com/file/d/0B0RttRif9NI0TGl0N1BZQWZfaFk/edit?usp=sharing)

复制时不需要 A 和 B 列 - 要么是 J 列 - 这就是我用来检查条件的内容。

感谢您迄今为止的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:30:40.237

那是借用一些旧代码。在此您正在检查使用的最后一行，如果您知道您只想转到 500，您可以只使用整数：

`Sub try2()`

 ````
 Dim i, Y, x As Long 'you didn't mention what Y was, so it could also be a string.
  Dim ws1 As Worksheet: Set ws1 = ActiveWorkbook.Sheets("Index")
  Dim ws2 As Worksheet: Set ws2 = ActiveWorkbook.Sheets("Sheet2") 'active sheet can get  you into trouble
  Dim Ary1 As Range
  Dim ary2 As Range

   x = 5
   Y = "Y" 'for the sake of argument
         'For i = 2 To ws1.Range("B65536").End(xlUp).Row   This is if you are looking for the last row in MsOf2003 or earlier.  If you know that you are only looking to row 500, then hard code the intiger.
   For i = 2 To 500:
        'If ws1.Cells(i, 2) = "Y" You mentioned you were interested in column J, so we need to change the 2 to 10 (Column B to Column J)
         If ws1.Cells(i, 10) = Y Then
            ws1.Activate
            Set Ary1 = Range(Cells(i, 3), Cells(i, 9))
            ws2.Activate
            Set ary2 = Range(Cells(x, 1), Cells(x, 7)) 'avoid copying all together you don't need it
            ary2.Value = Ary1.Value
            x = x + 1
         End If
   Next i
  End Sub 
````  `我是在手机上而不是在编译器上写的，所以那里可能存在语法错误，这应该被视为伪 VBA 代码。我可以稍后检查您是否可以正常工作。如果您不希望它们被覆盖，则必须注意放置内容的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T02:06:43.223

这是更优雅的解决方案，与我的原始帖子更相似。唯一的区别是 Cells 引用符合正确的工作表。

 `````
Sub try3()
Dim i, x As Long
Dim Y as String
Dim ws1 As Worksheet: Set ws1 = ActiveWorkbook.Sheets("Index")
Dim ws2 As Worksheet: Set ws2 = ActiveWorkbook.Sheets("Sheet2") 'active sheet can get  you into trouble

 x = 5
 Y = "Y"
 For i = 2 To 500:
    If ws1.Cells(i, 10) = Y Then
       Range(ws2.Cells(x, 1), ws2.Cells(x, 7)).Value = Range(ws1.Cells(i, 3), ws1.Cells(i, 9)).Value
      x = x + 1
    End If
 Next i
End Sub 
``````

# ruby-on-rails - Spree - 访问 Order 类

> ID：15394526
> 
> 赞同：0
> 
> 时间：2013-03-13T19:19:54.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, spree

我在扩展 spree 控制器时遇到问题。当我覆盖控制器时，我无法访问 Order 类。我收到以下错误（我使用**spree 1.2.4**）：

```
NameError (uninitialized constant Spree::Admin::OrdersController::Order):
spree_russian_post/app/controllers/admin/orders_controller_decorator.rb:9:in `sample_method'
actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
... 
```

问题出在我的控制器中：

`spree_russian_post/app/controllers/admi /orders_controller_decorator.rb`

这是代码：

```
require 'spree_core'

Spree::Admin::OrdersController.class_eval do

  def sample_method
      @order = Order.find_by_param(params[:id]) #Here I get the error
      ....
  end

end 
```

我应该怎么做才能访问 Order 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T18:53:44.610

您的问题是 Spree 认为您正在寻找常数`Spree::Admin::OrdersController::Order`

将您的查询更改为**`@order = Spree::Order.find(params[:id])`**

Spree 然后会知道您正在寻找与 spree_orders 表关联的 spree 对象

# java - Java - 查找最多连接数的算法

> ID：15394534
> 
> 赞同：4
> 
> 时间：2013-03-13T19:20:14.350
> 
> 标签：java, algorithm

我有一个问题，但似乎找不到其他尝试过类似任务的人。我在 int 数组 grid[][] 中有一个数字网格

```
2 5 1 0 8 0 8
2 1 0 9 7 2 4
3 6 2 3 4 9 7
3 3 3 4 7 8 9
3 3 1 2 3 1 4
9 7 4 1 2 3 4
```

我需要一个简单的算法来查找连接最多的数字的位置，只需向上、向下、向左和向右。所以在上面的例子中，它会在索引 [2][0] 处找到 3。

我知道问题可以通过简单地执行 if 语句和循环后循环来解决，但这会非常重复，但想知道是否有更简单的方法来做到这一点？

任何帮助表示赞赏，这是我正在创建的游戏。谢谢 ：）

编辑：帮助解决这个问题。

```
2 5 1 0 8 0 8
2 1 0 9 7 2 4
3 6 2 3 4 9 7
3 3 3 4 7 8 9
3 3 1 2 3 1 4
9 7 4 1 2 3 4
```

该方法将返回 0,2 作为答案，因为它会发现

```
3
3 3 3
3 3
```

有最相邻的数字

另一个例子，

```
2 5 1 0 8 0 8
2 1 0 9 7 2 4
3 3 3 3 4 6 7
1 0 3 4 7 4 9
3 3 3 2 3 1 6
9 7 4 1 8 4 6
```

完整的发现将是

```
3 3 3 3
    3
3 3 3
```

感谢到目前为止的所有答案，深度优先搜索看起来很有趣，但到目前为止只能找到有关树样式搜索的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:05:44.520

实际上，您想找到所有[连接的组件](http://en.wikipedia.org/wiki/Connectivity_%28graph_theory%29)。BFS 和[DFS](http://en.wikipedia.org/wiki/Depth-first_search)是关于这个的著名算法。对于这个问题，你可以使用[DFS](http://en.wikipedia.org/wiki/Depth-first_search) 。所以你假设每个数字都有一个顶点。这个顶点只通过上下左右连接，它们的数字是相等的。重复DFS 直到所有顶点都将标记。现在在此图中找到它具有最大数量的组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:49:32.817

如果您只想要最大的洪水可填充区域，那么您可以使用标准的[洪水填充算法](http://en.wikipedia.org/wiki/Flood_fill)，计算您填充的节点数，同时用一个指示它们不应再次访问的值填充它们。这将是一个数组，应该是最佳的。`O(n²)``n x n`

如果您想要最长的序列，而不是最大的区域，那么您必须在每个洪水填充区域内搜索最长的哈密顿路径。不幸的是，根据Alon Itai、Christos H. Papadimitriou 和 Jayme Luiz Szwarcfiter的[Hamilton Paths in Grid Graphs (1982)](http://epubs.siam.org/action/showAbstract?page=676&volume=11&issue=4&journalCode=smjcat)，您运气不佳。我找不到非付费版本，但摘要似乎足够清晰。（当然，问题是 NP 完全的这一事实并不意味着它无法解决。也许你的 N 小到足以使它变得实用。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T20:01:43.093

也许像这样的东西可以通过小的调整来工作。我自己没有运行过，但概念应该很清楚。也可以优化，因为可以多次评估相同的空间。

```
public class FindConsecutiveNumbersInGrid {

public static int[][] grid = new int[][]{
    {2, 5, 1, 0, 8, 0, 8},
    {2, 1, 0, 9, 7, 2, 4},
    {3, 3, 3, 3, 4, 6, 7},
    {1, 0, 3, 4, 7, 4, 9},
    {3, 3, 3, 2, 3, 1, 6},
    {9, 7, 4, 1, 8, 4, 6}
};

public static void main(String[] args) {
    int maxFound = 0;
    int[] maxFoundPos = new int[2];
    for (int i = 0; i < grid.length; i++) {
        for (int j = 0; j < grid[0].length; j++) {
            boolean[][] foundGrid = new boolean[grid.length][grid[0].length];
            findConsecutive(i, j, foundGrid);
            int found = getFound(foundGrid);
            if (found > maxFound) {
                maxFound = found;
                maxFoundPos[0] = i;
                maxFoundPos[1] = j;
            }
        }
    }
    System.out.println(maxFoundPos[0] + " " + maxFoundPos[1]);
}

public static void findConsecutive(int i, int j, boolean[][] foundGrid) {
    foundGrid[i][j] = true;
    if (i < grid.length - 1 && grid[i][j] == grid[i+1][j] && !foundGrid[i+1][j]) {
        findConsecutive(i+1, j, foundGrid);
    }
    if (i > 0 && grid[i][j] == grid[i-1][j] && !foundGrid[i-1][j]) {
        findConsecutive(i-1, j, foundGrid);
    }
    if (j < grid[i].length - 1 && grid[i][j] == grid[i][j+1] && !foundGrid[i][j+1]) {
        findConsecutive(i, j+1, foundGrid);
    }
    if (j > 0 && grid[i][j] == grid[i][j-1] && !foundGrid[i][j-1]) {
        findConsecutive(i, j-1, foundGrid);
    }
}

public static int getFound(boolean[][] foundGrid) {
    int found = 0;
    for (boolean[] foundRow : foundGrid) {
        for (boolean foundSpace : foundRow) {
            if (foundSpace) found++;
        }
    }
    return found;
} 
```

}

这将正确打印“2 0”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T19:41:45.040

> 我需要一个简单的算法来找到通过向下和向右连接最多连续数字的位置。

一个简单的算法是遍历行和列，向下和向右寻找最长的序列。

由于您只想要第一次出现，因此您不必向左或向上看。

当您到达小于找到的最长字符串的索引时，您可以中断循环。换句话说，一旦你找到一个 3 个字符的字符串，你就不必遍历最后两列和最后两行。

但是，循环遍历整个矩阵几乎同样快速且容易得多。

在您的示例中，您会发现两个由 3 个三点组成的字符串，一个在 (2,0)，一个在 (3,0)。您只需将第一个答案作为最终答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T19:43:56.687

您可以将其表述为动态规划问题

计算所有 i,j 的升序 path[i][j] = 1 的相邻路径的数量

```
for i=0;i<n 
  for j=0;j<n
     for dirx, diry in [(1,0),(0,1) ... etc ... ]
        if arr[i+dirx][j+diry] = arr[i][j] + 1
           path[i+dirx][j+diry] += path[i][j] 
```

答案将`max(path[i][j])`适用于所有 i,j。

或者递归，如果你喜欢

```
 for i,j<n
       go(i,j)

   def go(i,j)
        if path[i][j]>0 return path[i][j]
        ret = 1;
        for dirx, diry in [(1,0),(0,1) ... etc ... ]

            if arr[i+dirx][j+diry] = arr[i][j] + 1
               ret = max(ret, go(i+dirx,j+diry))

        return ret 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-13T19:53:21.623

首先找到一个未访问过的单元格，然后开始递归。免责声明：这不是 java，它是没有大多数声明和标题的伪 C。无论如何，C 更容易转换为 java... 如果需要，请使用全局或类成员进行计数。

为了让事情变得更容易，用警卫包围你的 N*N 数组。

```
 // with -1 -1 -1 -1 
    //      -1  x  x -1
    //      -1 -1 -1 -1

for (i=N+2;i<(N+2)*(N+1);i++) { // exact starting and ending locations are disclosed
  if (k=array[i]!=-1) {
      j=1;
      flood_fill(array,i,k,&j);
      if (j>max) { max=j; max_number=k; }
  }
}

#define UP -(N+2)
#define DOWN (N+2)
#define LEFT -1
#define RIGHT 1

int flood_fill(int *array, int position, int value_to_compare, int *count)
{
    // for each direction UP,DOWN,RIGHT,LEFT 
    static const int directions[4]={UP,DOWN,RIGHT,LEFT];
    int t;
    for (t=0;t<4;t++)
    if (array[position + directions[t]]==value_to_compare) {
        array[position + directions[t]] = -1;
        *count+=1;
        flood_fill(array, position+directions[t], value_to_compare, count);
    }
} 
```

# c# - C# initial value in constructor OR class variable declaration?

> ID：15394536
> 
> 赞同：0
> 
> 时间：2013-03-13T19:20:24.030
> 
> 标签：c#, class, variables, constructor

initializing the value in constructor or variable declaration? Which one is better (or good practice) and why?

```
class checker 
{   
   public bool exit_code_1 = false; 
} 
```

or

```
class checker
{
  public bool exit_code_1;
  public checker()
  {
     exit_code_1 = false;
  }
} 
```

# javascript - 将 PHP hash_hmac(sha512) 转换为 NodeJS

> ID：15394543
> 
> 赞同：7
> 
> 时间：2013-03-13T19:20:53.660
> 
> 标签：javascript, node.js, hash, hmac

我正在将一个 php 脚本移植到节点，但我对加密知之甚少。

php 脚本使用这个函数：

```
hash_hmac('sha512', text, key); 
```

因此，我需要在 Node js 中实现一个函数，以使用 hmac 方法（SHA512）返回键控哈希。

据我所知，节点通过加密模块（[http://nodejs.org/docs/latest/api/crypto.html#crypto_crypto](http://nodejs.org/docs/latest/api/crypto.html#crypto_crypto)）内置了这个功能——但我不清楚如何重现这个功能。

任何帮助，将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T19:25:00.627

是的，使用加密库。

```
var hash = crypto.createHmac('sha512', key);
hash.update(text);
var hashed_data = hash.digest(); 
```

更多详细信息（例如，控制输出编码的摘要参数`hash.digest`）位于您提供[的链接](http://nodejs.org/docs/latest/api/crypto.html)中。

正如尼克指出的那样，每次要加密新字符串时都需要执行整个过程（即`hash`通过创建新对象`crypto.createHmac`。）

# datetime - Issue with datetime values and printing a spline plot between the data points

> ID：15394548
> 
> 赞同：0
> 
> 时间：2013-03-13T19:21:15.620
> 
> 标签：datetime, highcharts, spline

Anyone able to help with the following problem:

Trying to draw a chart with four data series, two of which are scatter and one is spline. Purpose of the spline is just to draw a line between specific spots on the chart, not joining all of them together. The following is my code so far:

```
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'scatter',
                zoomType: 'xy'
            },
            title: {
                text: ''
            },
            xAxis: {
              type: 'datetime',
              ordinal: false,
              labels: {
                formatter: function() {
                   return Highcharts.dateFormat('%H', this.value);
                }
              }
            },
            yAxis: {
              categories: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
              gridLineWidth: 0,
              step: 1,
              title: '',
              labels: {
                style: {
                  color: '#6D869F',
                  fontSize: '9px',
                }
              },
            },
            tooltip: {
                formatter: function() {
                        return ''+
                        this.x +' cm, '+ this.y +' kg';
                }
            },
            legend: {
                layout: 'vertical',
                align: 'left',
                verticalAlign: 'top',
                x: 100,
                y: 70,
                floating: true,
                backgroundColor: '#FFFFFF',
                borderWidth: 1
            },
            plotOptions: {
                scatter: {
                    marker: {
                        radius: 5,
                        states: {
                            hover: {
                                enabled: true,
                                lineColor: 'rgb(100,100,100)'
                            }
                        }
                    },
                    states: {
                        hover: {
                            marker: {
                                enabled: false
                            }
                        }
                    }
                }
            },
            series: [{
                name: 'sleep time',
                marker: {
                  symbol: 'circle',
                },
                color: '#81c65b',
                data: [[Date.UTC(2012, 1, 1, 22, 15), 0], 
                       [Date.UTC(2012, 1, 1, 20, 30), 3],
                       [Date.UTC(2012, 1, 1, 21, 45), 5],
                       [Date.UTC(2012, 1, 1, 22, 00), 6]]
            }, 
            {
              name: 'wakeup time',
              marker: {
                symbol: 'circle',
                fillColor: '#76a4fb',
              },
              data: [[Date.UTC(2012, 1, 2, 08, 15), 0], 
                     [Date.UTC(2012, 1, 2, 07, 10), 1],
                     [Date.UTC(2012, 1, 2, 09, 20), 2],
                     [Date.UTC(2012, 1, 2, 07, 40), 3],
                     [Date.UTC(2012, 1, 2, 07, 30), 4],
                     [Date.UTC(2012, 1, 2, 08, 20), 5],
                     [Date.UTC(2012, 1, 2, 09, 30), 6]],
           },
           {
              name: 'sleep time over average',
              color: 'rgba(119, 152, 191, .5)',
              marker: {
                symbol: 'square',
                  fillColor: '#000',
              },
              data: [[Date.UTC(2012, 1, 1, 20, 15), 1],
                     [Date.UTC(2012, 1, 1, 23, 40), 2], 
                     [Date.UTC(2012, 1, 1, 21, 20), 4]]
           },
           {
              name: '',
              legend: {
                enabled: false,
              },
              color: '#d62a9c',
              type: 'spline',
              marker: {
                enabled: false,
              },
              data: [[Date.UTC(2012, 1, 1, 22, 15), 0], 
                     [Date.UTC(2012, 1, 2, 08, 15), 0],
                     [Date.UTC(2012, 1, 1, 20, 15), 1], 
                     [Date.UTC(2012, 1, 2, 07, 10), 1],
                     [Date.UTC(2012, 1, 1, 23, 40), 2], 
                     [Date.UTC(2012, 1, 2, 09, 20), 2],
                     [Date.UTC(2012, 1, 1, 20, 30), 3], 
                     [Date.UTC(2012, 1, 2, 07, 40), 3],
                     [Date.UTC(2012, 1, 1, 21, 20), 4], 
                     [Date.UTC(2012, 1, 2, 07, 30), 4],
                     [Date.UTC(2012, 1, 1, 21, 45), 5], 
                     [Date.UTC(2012, 1, 2, 08, 20), 5],
                     [Date.UTC(2012, 1, 1, 22, 00), 6], 
                     [Date.UTC(2012, 1, 2, 09, 30), 6]]
           }]
        });
    });

}); 
```

My problem now is, in the spline series, if I add a null between elements to prevent plotting the line between two points, the whole plot goes mayhem. The idea is to draw lines only so that points which are vertically on the same line get joined, eg. in this case "sleep time" and "wakeup time". For example,

```
data: [
  [Date.UTC(2012, 1, 1, 22, 15), 0], 
  [Date.UTC(2012, 1, 2, 08, 15), 0], null,
  [Date.UTC(2012, 1, 1, 20, 15), 1], 
  [Date.UTC(2012, 1, 2, 07, 10), 1], null,
  [Date.UTC(2012, 1, 1, 23, 40), 2], 
  ... 
```

You may try out the code at this [jsfiddle](http://jsfiddle.net/kWCT5/).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:41:47.840

试试下面的。

```
data: [
    [Date.UTC(2012, 1, 1, 22, 15), 0], 
    [Date.UTC(2012, 1, 2, 08, 15), 0],
    [Date.UTC(2012, 1, 2, 08, 15), null],
    [Date.UTC(2012, 1, 1, 20, 15), 1], 
    [Date.UTC(2012, 1, 2, 07, 10), 1],
    [Date.UTC(2012, 1, 2, 08, 15), null],
    [Date.UTC(2012, 1, 1, 23, 40), 2], 
    [Date.UTC(2012, 1, 2, 09, 20), 2],
    [Date.UTC(2012, 1, 2, 08, 15), null],
    ...
] 
```

如您所见，您必须传递一个数组，其中第一个值必须是任何日期。

[**演示**](http://jsfiddle.net/kWCT5/4/)

# excel - Function to merge excel data referencing a count using VBA

> ID：15394552
> 
> 赞同：0
> 
> 时间：2013-03-13T19:21:31.560
> 
> 标签：excel, vba

I'm trying to write a function that merges multiple rows of text in a column into a single cell based on a pre determined count. My goal is to generate a flexible function to aid in compiling / interperting large quantaties of data. The code I've written returns #NAME? and I cant figure out where the error is. My code is as follows:

```
Function vmrg(countref As Integer, datref As Integer) As String
If IsEmpty(ActiveCell.Offset(0, -countref)) Then % check if cell containing count is blank
vertmerge = "N/A"                                % if blank, state N/A
Else
    Dim datlst(0 To ActiveCell.Offset(0, -countref).Value - 1) As String 
    Dim i As Integer                                                      
    For i = 0 To ActiveCell.Offset(0, -countref).Value - 1  
        datlst(i) = ActiveCell.Offset(i, -datref).Text  %fill array with data
    End
    vertmerge = datlst(0)
    For i = 1 To ActiveCell.Offset(0, -countref).Value - 1  % merge array to a single string
        vertmerge = vertmerge & ", " & datlst(i)
        End
   End
End Function 
```

I have matlab and some C++ experience but this is the first time I've used VBA so my syntax is probably odd in some areas and wrong in others. Ideally I would like to reference the cells where the data and count info are stored, but for now I'm hoping to correct my syntax and set a jumping off point for further development of this function. Any reccomendations are appreciated.

Code Rev_1: I still have an output of #NAME? but I think I've corrected(?) some of the issues

```
Function vertmerge(countref As Range, datref As Integer) As String
If IsEmpty(countref) = True Then
vertmerge = "NA"
Else
Dim datlst(0 To countref.Value - 1) As String
Dim i As Integer
For i = 0 To countref.Value - 1
datlst(i) = countref.Offset(i, datref).Text
Next i
vertmerge = datlst(0)
For i = 1 To countref.Value - 1
vertmerge = vertmerge & ", " & datlst(i)
Next i
End
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:08:06.193

你在这里做一些危险的事情！

首先 - 您从函数内部引用“ActiveCell”；但是您不知道函数运行时哪个单元格将处于活动状态！相反，将目标单元格作为参数传递：

```
=vmrg("B6", 5, 6) 
```

并将您的函数原型更改为

```
Function vmrg(r as Range, countref as Integer, datref as Integer) 
```

现在你可以参考与 r 相关的东西

```
r.Offset(1,2) 
```

等等

接下来-您永远不会将任何内容分配给`vmrg`. 在 VBA 中，函数返回值的方式是 with（在这种情况下）

```
vmrg = 23 
```

您正在将事物分配给一个名为的变量`vertmerge`- 但这不是您的函数的名称。至少添加

```
vmrg = vertmerge 
```

就在回来之前。那可能会做到。如果没有您的电子表格的完整示例，我无法为您提供更多帮助。

# android - intent-filter in manifest file to enable the open button on install

> ID：15394558
> 
> 赞同：1
> 
> 时间：2013-03-13T19:21:39.230
> 
> 标签：android, android-intent, xamarin.android

I am fairly new to Android Development and I have seen examples where this is put into the Manifest.xml file:

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />`
</intent-filter> 
```

I thought this was what I needed so that after my Application Installs the open button would be enabled. However, even though Ihave this in my Manifest the button is stlll disabled.

So, can anyone tell me ehat I am doing wrong?

Thanks for any help.

** UPDATE...

Here is my full Manifest.xml file:

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:versionCode="1" 
            android:versionName="1.1" package="com.MyAppName.app">
    <uses-sdk android:minSdkVersion="8" targetSdkVersion="10" />

    <uses-library android:name="com.google.android.maps" />

    <uses-feature android:glEsVersion="0x00020000" android:required="true" />

    <permission android:name="com.MyAppName.app.permission.MAPS_RECEIVE" android:protectionLevel="signature" />
    <permission android:name="com.MyAppName.app.permission.C2D_MESSAGE" android:protectionLevel="signature" />

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="com.MyAppName.app.permission.C2D_MESSAGE" />
    <uses-permission android:name="com.MyAppName.app.permission.MAPS_RECEIVE" />

    <application android:label="@string/MyAppName" android:theme="@android:style/Theme.NoTitleBar" android:icon="@drawable/Icon">
        <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="MY_KEY" />
    </application>
</manifest> 
```

** UPDATE

Here is the code for the activity:

```
using System;
using Android.App;
using Android.Content;
using Android.OS;

namespace MyApp
{
    [Activity (Label = "MyApp", MainLauncher = true, Theme="@style/Theme.Splash", NoHistory = true)]
    public class SplashActivity : Activity
    {
        protected override void OnCreate (Bundle bundle)
        {
            base.OnCreate (bundle);

            Android.OS.SystemClock.Sleep(2000);

            // Start our real activity
            StartActivity (typeof (Activity1));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:25:17.257

意图过滤器必须如下，在主 Activity 的`<activity>`元素中：

```
 <activity
        android:name=".<your activity name>"
        android:label="My App" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

# php - 使用 DynamoDB 和 PHP 查询照片中的关键字

> ID：15394561
> 
> 赞同：0
> 
> 时间：2013-03-13T19:21:41.983
> 
> 标签：php, amazon-dynamodb

要求：我将照片存储在 S3 中，并希望用户能够查找包含他们在网页上键入的关键字的所有照片。

我的解决方案：我创建了 2 个表： **tblPhotos:** Primary Key=HashKey: PhotoID Fields: PhotoID, S3Loc​​ation

**tblKeywords：** Primary Key=HashKey (HashID) 和 RangeKey (Keyword) 字段：HashID（始终设置为 1）、Keyword（一大串；关键字后跟 PhotoID） S3Loc​​ation

我正在使用以下 php 代码查找所有包含我的关键字的记录：

```
$table_name = 'tblKeywords';
$keywordresponse = $dynamodb->query(array(
    'TableName'    => $table_name,
    'HashKeyValue' => array(AmazonDynamoDB::TYPE_STRING => '1'),
    'RangeKeyCondition' => array(
        'ComparisonOperator' => AmazonDynamoDB::CONDITION_BEGINS_WITH,
        'AttributeValueList' => array(
                 array(AmazonDynamoDB::TYPE_STRING => $_GET['sSearch'])
                                 ),
                         )
                         ));
if ($keywordresponse->isOK())
{
     foreach ($keywordresponse->body->Items as $item)
     {
          $aaData[] = array(
    'Keyword' => (string) $item->Keyword->{AmazonDynamoDB::TYPE_STRING},
        'S3Location' => (string) $item->S3Location->{AmazonDynamoDB::TYPE_STRING}
                       );
     }
     echo json_encode(array('keywordstatus' => 1, 'aaData' => $aaData));
}
else
{
    echo json_encode(array('keywordstatus' => 0));
} 
```

如您所见，我将 sSearch 作为过滤结果的关键字传递。我的问题是，您知道使用 DynamoDB 查询实现这种记录过滤的更好方法吗？我试图避免扫描，因为它的效率非常低，尽管我上面的解决方案在它工作时似乎并不是特别优雅！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T22:28:41.313

如果您的主要目标是能够返回给定关键字的所有照片，我认为以下模式会更有意义：

HashKey = 关键字

RangeKey = 照片ID

其他可能的字段：S3Name（如果它与 PhotoID 不同）

# objective-c - UIScrollView 子视图并不总是可点击的

> ID：15394563
> 
> 赞同：2
> 
> 时间：2013-03-13T19:21:51.190
> 
> 标签：objective-c, uiscrollview, uibutton, touch, addsubview

我正在将子视图添加到`UIScrollView`. 对于这个问题，我正在简化添加的视图：`testView`它包含一个`UIButton`

我的滚动视图运行良好，但**按钮的触摸效果不佳**。

*   我可以点击第一个按钮，但**只能点击（近似的）100 first pixel**。
*   滚动效果很好。
*   我无法单击第一个按钮的末尾
*   我无法点击其他按钮

这是我的代码：

```
__block CGFloat scrollViewContentSize = 0;
__block CGFloat buttonRectOrigineY = 0;

[self.itemsToDisplay enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {

    CGRect frameTest = CGRectMake(0, buttonRectOrigineY/2, 320, 200);
    UIButton *testButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    testButton.frame = frameTest;
    UIView *testView = [[UIView alloc] initWithFrame:frameTest];
    [testView addSubview:testButton];
    [self.articleScrollView addSubview:testView];
    buttonRectOrigineY      += 200;
    scrollViewContentSize   += 200;
}];
[self.articleScrollView setContentSize:CGSizeMake(320, scrollViewContentSize)]; 
```

这是很好理解我的问题的图像： ![带有按钮不可触摸的uiscrollview](../Images/a36d8a3c690eb43d4999cc60fec78d5c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:43:04.413

您可以使用`bringSubviewToFront`来避免该问题

```
CGRect frameTest = CGRectMake(0, buttonRectOrigineY/2, 320, 200);
UIButton *testButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
testButton.frame = frameTest;
UIView *testView = [[UIView alloc] initWithFrame:frameTest];
[testView addSubview:testButton];
[testView bringSubviewToFront:testButton];
[self.articleScrollView addSubview:testView];
[self.articleScrollView bringSubviewToFront:testView]; 
```

如果您再次遇到问题，请在按钮周围应用边框并检查手动可见的按钮区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:58:28.727

我弄错了按钮和视图的框架。如果它可以帮助任何人，这里是一个工作代码。

```
__block CGFloat scrollViewContentSize = 0;
__block CGFloat buttonRectOrigineY = 0;

[self.itemsToDisplay enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {

    CGRect frameTestButton = CGRectMake(0, 0, 300, 150);
    CGRect frameTestView = CGRectMake(10, buttonRectOrigineY, 300, 200);
    UIButton *testButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    testButton.frame = frameTestButton;
    testButton.backgroundColor = [UIColor greenColor];
    UIView *testView = [[UIView alloc] initWithFrame:frameTestView];
    if(idx == 0)
        testView.backgroundColor = [UIColor yellowColor];
    if(idx == 1)
        testView.backgroundColor = [UIColor orangeColor];
    if(idx == 2)
        testView.backgroundColor = [UIColor redColor];
    if(idx == 3)
        testView.backgroundColor = [UIColor magentaColor];
    if(idx == 4)
        testView.backgroundColor = [UIColor purpleColor];
    if(idx <= 4){
        LogDebug(@"idx : %lu", (unsigned long)idx);
        [testView addSubview:testButton];
        [self.articleScrollView addSubview:testView];
        [self.articleScrollView bringSubviewToFront:testView];
        buttonRectOrigineY      += 200;
        scrollViewContentSize   += 200;
    }
}];
[self.articleScrollView setContentSize:CGSizeMake(320, scrollViewContentSize)]; 
```

# asp.net - MS_POSITIONING 不是元素 BODY 和 DIv 的有效属性

> ID：15394570
> 
> 赞同：1
> 
> 时间：2013-03-13T19:22:16.603
> 
> 标签：asp.net, visual-studio-2010, html, coding-style, refactoring

我们的解决方案中有很多遗留的 ASPX 页面。现在我们要修复代码样式（将其引入 HTML5 标准）并通常清理这些 ASPX 页面上的代码。我遇到的问题之一是`ms_positioning`属性。`<body>`它在and`<div>`元素中出现了很多。Visual Studio 2010 显示此警告：

`Validation (XHTML 1.0 Transitional): Attribute 'ms_positioning' is not a valid attribute of element 'div'.`

**问题：**

1.  我应该尝试修复此警告还是应该不理会 `ms_positioning`属性？
2.  是否有另一种方法可以在没有`ms_positioning`属性的情况下实现相同的功能（我同时使用`ms_positioning="GridLayout"`和`ms_positioning="FlowLayout"`值）并符合 HTML5 标准？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T22:16:14.020

似乎 `ms_positioning`在较新版本的 Visual Studio 中不再可用（如[本](http://forums.asp.net/t/924638.aspx/1)链接所示）。

但是，有两种方法可以实现相同的功能：

1.  转到格式菜单，然后选择位置。然后选择**绝对**

或者

1.  转到**工具菜单**，然后选择**选项**。转到**HTML 设计器**，然后是**CSS 样式**，然后使用工具箱检查**将控件的定位更改为绝对，粘贴或拖放**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:42:03.023

我不知道从哪里来`ms_positioning`，但也许你可以尝试在 web.config 中设置一致性模式：

```
<system.web>
    <xhtmlConformance mode="Strict"/>
</system.web> 
```

ASP.net 对这个集合所做的任何事情都应该有效。

# vim - 脱壳时在 Vim 中转义“%”，因此它不会扩展为文件名？

> ID：15394572
> 
> 赞同：9
> 
> 时间：2013-03-13T19:22:23.213
> 
> 标签：vim

假设我有这个 vimscript 作为“/tmp/example.vim”：

```
let g:input = "START; % END"
exec("! clear && echo " . shellescape(g:input)) 
```

如果我打开该文件并运行它`:so %`，输出将是

```
START; /tmp/example.vim END 
```

因为“%”被扩展为缓冲区名称。我希望输出是

```
START; % END 
```

我可以特别使用通用`escape()`方法来转义百分号。这有效：

```
let g:input = "START; % END"
exec("! clear && echo " . escape(shellescape(g:input), "%")) 
```

但这真的是最好的方法吗？我敢肯定还有更多我应该逃脱的角色。为此目的是否有特定的转义功能？还是更好的出击方式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T07:54:03.180

要与`:!`命令一起使用，您需要将可选`{special}`参数传递给`shellescape()`：

> 当`{special}`参数存在并且它是一个非零数字或非空字符串 (|non-zero-arg|) 时，那么特殊项目（如`!`, `%`,`#`和）`<cword>`前面会加上一个反斜杠。这个反斜杠将被 | 再次删除。`:!`| 命令。

```
:exec("! clear && echo " . shellescape(g:input, 1)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T19:42:42.927

您需要正确转义“％”。所以应该是：

```
let g:input = "START; \\% END" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:42:58.563

这似乎做到了：

```
let g:input = "START; % END"
echo system("echo " . shellescape(g:input)) 
```

应该注意的是，我并不真正关心输出。我将`silent`在更大的脚本中使用它。

# javascript - Redirect home page if another page contain div id

> ID：15394576
> 
> 赞同：0
> 
> 时间：2013-03-13T19:22:46.380
> 
> 标签：javascript, jquery, redirect, html

I need to do the following:

When access mysite.com check if another page X contain div id "intro", if so, redirect mysite.com to mysite.com/search. If page x does not contain div id, load mysite.com.

I tried this:

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript">
jQuery(function($){
$('#result').load('Page2.html #intro');
});
</script> 
```

page with div id :

```
<div id="intro" style="display: none">My sample content</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:01:30.920

就是这个 ？

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js">    </script>
 <script type="text/javascript">
 jQuery(function($)
 if ($('#result').load('page2.html #divID').length === 0){
 window.location.href = "redirect.html";
 }
 </script> 
```

# android - Android - 我想为我的应用程序中的多个按钮使用相同的 XML 布局

> ID：15394577
> 
> 赞同：2
> 
> 时间：2013-03-13T19:22:56.497
> 
> 标签：android, android-fragments

我有点困惑我应该做什么。我已经阅读了有关 Fragments 的信息，但我不确定是否应该在这里使用它们。我的 main_layout 文件中有 3 个按钮。我做错了什么（我知道）是我有 3 个不同（但非常相似）的结果 xml 文件和 3 个 activity.java 文件。结果页面是一样的，只是文字不同。没有理由拥有这么多 java 文件等。我知道必须有更好的方法吗？

在我的 main_layout.xml 中，我有 3 个 ImageButtons：

![在此处输入图像描述](../Images/b7aacde307d679cb3809acbeadfdba40.png)

在我的 MainActivity.java 中：

```
ImageButton ib1 = (ImageButton) findViewById(R.id.imageButton1);
ib1.setOnClickListener(this);

ImageButton ib2 = (ImageButton) findViewById(R.id.imageButton2);
ib2.setOnClickListener(this);

ImageButton ib3 = (ImageButton) findViewById(R.id.imageButton3);
ib3.setOnClickListener(this);

public void onClick(View v) {
    if (v.getId() == R.id.imageButton1) {
        startActivity(new Intent(Main.this, OneInfo.class));
    } else if (v.getId() == R.id.imageButton2) {
        startActivity(new Intent(Main.this, TwoInfo.class));
    } else if (v.getId() == R.id.imageButton3) {
        startActivity(new Intent(Main.this, ThreeInfo.class)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:26:53.833

将所有 3 个按钮映射到单个活动。向其添加一个整数额外“模式”，指定使用 3 种模式中的哪一种。在活动中，检查模式并使用 setText 将不同的视图文本设置为适当的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T19:30:35.300

要减少重复代码，您可以在按钮上使用标签：

```
int[] btnIds = { R.id.imageButton1, R.id.imageButton2, R.id.imageButton3 };
Class<?> classes = { OneInfo.class, TwoInfo.class, ThreeInfo.class };
for (int i = 0; i < btnIds.length; ++i) {
    View btn = findViewById(btnIds[i]);
    btn.setOnClickListener(this);
    btn.setTag(classes[i]);
}

public void onClick(View v) {
    Class<?> tag = (Class<?>) v.getTag();
    if (tag != null) { // just in case
        startActivity(new Intent(this, tag));
    }
} 
```

# wpf - Styling a combobox's PART_EditableTextBox

> ID：15394578
> 
> 赞同：1
> 
> 时间：2013-03-13T19:22:59.353
> 
> 标签：wpf, xaml, combobox, styling

I want to add conditionnal formatting (just font color) to the textbox part of a combobox. According to MSDN, it's the "PART_EditableTextBox" element. A quick search on SO got me started but I now face a problem: it overrides the whole template. According to [this SO answer](https://stackoverflow.com/a/12011848/1991423), I can use "BasedOn" to override only specific properties but I've no idea how/where to use it. This is my current template:

```
 <ControlTemplate x:Key="MyComboBoxTextBox" TargetType="ComboBox" <!--Here?--> >
        <TextBox x:Name="PART_EditableTextBox" <!--Maybe Here?-->>
            <TextBox.Style>
                <Style TargetType="TextBox">
                    <Style.Triggers>
                        <Trigger Property="Text" Value="MAL">
                            <Setter Property="Foreground" Value="DarkOrange"></Setter>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </TextBox.Style>
        </TextBox>
    </ControlTemplate> 
```

It works, I can still type in valid values and "MAL" does make the text orange but there's no dropdown anymore. On MSDN, I found the following:

```
<TextBox x:Name="PART_EditableTextBox"
               Style="{x:Null}"
               Template="{StaticResource ComboBoxTextBox}"
               HorizontalAlignment="Left"
               VerticalAlignment="Bottom"
               Margin="3,3,23,3"
               Focusable="True"
               Background="Transparent"
               Visibility="Hidden"
               IsReadOnly="{TemplateBinding IsReadOnly}" /> 
```

I suppose I should base my template on this "ComboBoxTextBox" but I don't know how to reference it. Do I really need to copy the whole template or is there a way to override a specific property?

EDIT: On the same MSDN page comboboxTextBox is defined as

```
<ControlTemplate x:Key="ComboBoxTextBox"
                 TargetType="{x:Type TextBox}">
       <Border x:Name="PART_ContentHost"
          Focusable="False"
          Background="{TemplateBinding Background}" />
</ControlTemplate> 
```

I don't see how overriding this template removes the dropdown list.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:06:06.853

好的，我想在阅读了您的所有代码并在工作中度过了非常漫长的一天后，我感到非常困惑，我完全错过了您的问题的重点....

**我想将条件格式（只是字体颜色）添加到组合框的文本框部分**

好吧，如果这就是您想做的所有事情，那么只需一个简单的样式触发器就很容易了。我可以用这个 xaml 来实现。

```
<ComboBox HorizontalAlignment="Center" VerticalAlignment="Center">
    <ComboBox.Resources>
        <Style TargetType="ComboBox">
            <Style.Triggers>
                <Trigger Property="Text" Value="MAL">
                    <Setter Property="Foreground" Value="DarkOrange" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </ComboBox.Resources>
    <ComboBoxItem>MAL</ComboBoxItem>
    <ComboBoxItem>1</ComboBoxItem>
    <ComboBoxItem>2</ComboBoxItem>
    <ComboBoxItem>3</ComboBoxItem>
</ComboBox> 
```

希望这可以帮助！

# javascript - 加载按需 JavaScript 文件时如何防止竞争条件？

> ID：15394586
> 
> 赞同：2
> 
> 时间：2013-03-13T19:23:47.377
> 
> 标签：javascript

为了加快速度，我的 Web 应用程序使用 jQuery 的 ajax 调用按需加载某些功能的 JavaScript 文件。不过，我遇到了竞争条件问题。例如，文件 B.js 依赖于文件 A.js。我已经配置了一个类似 list=[A.js,B.js] 的列表，我遍历这个列表并异步获取脚本。我怎样才能防止这种竞争状况？

加载 JavaScript 文件的代码类似于：

```
loadJS: function(url) {
    $.ajax({url: url, dataType: 'script', success: function(){}});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:29:40.753

这种依赖管理并不难。无需过多了解如何正确抽象它，如果您有要加载的文件数组，则在您的 ajax 回调（我假设将 js 文件的内容下载到字符串）中将字符串保存在另一个数组中，直到您下载所有文件的内容。一旦所有文件都在内存中，按顺序将它们添加到 dom 中。

你会想要添加一些额外的东西，比如处理失败之类的，但这是如何做到这一点的一般概述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:48:27.123

您可以只添加脚本标签而不是进行 ajax 调用：

```
var scripts = ['a.js', 'b.js'],
    idx;

for(idx in scripts) {
    if(scripts.hasOwnProperty(idx)) {
        document.write(['<script src="', scripts[idx], '"></script>'].join(''));
    }
} 
```

脚本将异步加载，但会按照您添加它们的顺序同步执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:41:45.333

假设您使用以下方法异步加载文件 1 和 2：

```
function load(URI) {
    $.ajax({
        url: URI,
        dataType: "script",
    });
} 
```

并且文件 2 依赖于文件 1，那么文件可以异步加载为：

```
load(url1)
  .then(load(url2)); 
```

如果文件 2 不依赖于文件 1，那么它们可以加载为：

```
$.when(load(url1), load(url2))
    .then(function(e) { // both scripts loaded successfully}); 
```

# apache-camel - 骆驼 Java DSL 选择中的选择

> ID：15394589
> 
> 赞同：12
> 
> 时间：2013-03-13T19:24:00.460
> 
> 标签：apache-camel

我希望有

```
_ from( A )
_ .split()...
_ .choice() //Choice 1 
_   .when( predicate )
_     .process()

_     .choice() // Choice 2 
_       .when( x )
_         .to( X )
_       .otherwise()
_         .to( Y )
_     .end() // to terminate inner choice

_   .endchoice() // tell camel we're back in the outer-choice - gets exception
_   .otherwise() // Choice 1
_     .to( Z )
_ .end() 
```

但我在 endChoice() 上得到运行时异常

```
java.lang.ClassCastException: org.apache.camel.model.SplitDefinition cannot be cast to org.apache.camel.model.ChoiceDefinition 
```

没有它我得到编译时错误

我怀疑 end() 正在结束内部和外部选择，我只希望它结束​​内部选择。

不放入 end() 使其将第二个 else() 视为内部选择的扩展。它不是。

我通过将第二个选择放在子路由中并将“direct:SUB_ROUTE”放入其中找到了解决方法，但如果可以的话，我更愿意使用上面概述的更简单的结构。有没有办法在选择中实现选择，或者这只是 Java DSL 的限制？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T04:28:36.233

> 不放入 end() 使其将第二个 else() 视为内部选择的扩展。它不是。

你确定吗？事实上，我认为从那里删除 end() 应该可以解决您的问题。endchoice() 足以表明内部选择结构的结束。

我确实尝试了一个示例代码，它工作正常..

谢谢！

# mysql - 选择行中具有相同值的行

> ID：15394592
> 
> 赞同：0
> 
> 时间：2013-03-13T19:24:13.280
> 
> 标签：mysql

我有 2 个这样的表：

表格1

```
 ID - 4PP - woonplaats
    1 - 9044 - Beetgum
    2 - 9045 - Beetgummermole    
    3 - 1028 - Amsterdam
    4 - 1029 - Amsterdam
    5 - 1030 - Amsterdam 
```

表 2

```
 ID - 4PP - Regio
    1 - 9044 - 2
    2 - 9045 - 2
    3 - 1028 - 4
    4 - 1029 - 4
    5 - 1030 - 4 
```

我想从表 2 中选择所有 4PP，其中表 1 中的“woonplaats”是 Beetgum，这些表可以通过 4PP 连接。所以查询的结果必须是：9044,9045

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:02:37.723

怎么样：

```
select t2b.Regio from table1 t1 
 join table2 t2a on t1.4pp = t2a.4pp
 join table2 t2b on t2a.Regio = t2b.Regio
 where t1.woonplaats = "Beetgum"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T01:59:48.133

```
select 4PP
from table1 inner join table2 using (4PP)
where table1.woonplaats like '%Beetgum%' 
```

# html - 如何在 Instrument 的 UIAWebView 中自动化测试 HTML5 元素？

> ID：15394600
> 
> 赞同：2
> 
> 时间：2013-03-13T19:24:30.497
> 
> 标签：html, ui-automation, xcode-instruments

我正在尝试自动化移动应用程序的测试，该应用程序是嵌入在本机应用程序框架中的 HTML5。我使用以下代码获取 Instrument 中的元素

```
UIALogger.logStart("Log elements in the landing page");
UIATarget.localTarget().logElementTree();
UIALogger.logPass("done"); 
```

它会将 HTML5 组件显示为 UIAWebView。但是比如HTML中有一个链接，我想点击，只能通过位置知道。有什么方法可以调用来获取 HTML5 中的标签吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:09:23.160

没有这样的方法，你会得到 `target.logElementTree();` 你使用的元素。如果元素是原生元素，您可以将它们与预定义的方法一起使用， `buttons()` 否则 `links()` 您将不得不使用它们仅指定位置（xy 坐标）。混合应用程序始终存在此问题。

# xml - 取消注释 server.xml 中的 SSL 配置，tomcat 使用 xslt

> ID：15394603
> 
> 赞同：0
> 
> 时间：2013-03-13T19:24:43.857
> 
> 标签：xml, xslt

我正在尝试编写 xslt 文件来检查 server.xml 的 SSL 配置。

*   如果 SSL 配置已经存在，请保持原样。
    *   即使注释部分也存在，也不应取消注释（否则将存在两个 SSL 配置），因为 SSL 配置已经可用。
*   如果 SSL 配置部分被注释，请取消注释该部分。
    *   如果注释部分不存在，我们应该自己放置 SSL 配置。

我已经浪费了两天时间来寻找一种方法来设置一个变量，如果没有找到配置，则该变量将被设置，因为我们有多个“构造函数”元素但无法成功设置变量。请告诉我如何实现我所需要的。

server.xml 是；

```
 <?xml version='1.0' encoding='utf-8'?>
<?xml-stylesheet type="text/xsl" href="new2.xsl"?>
<!-- Note:  A "Server" is not itself a "Container", so you may not
     define subcomponents such as "Valves" at this level.
     Documentation at /docs/config/server.html
 -->
<Server port="8005" shutdown="SHUTDOWN">

  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
  <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
  <Listener className="org.apache.catalina.core.JasperListener" />
  <!-- Prevent memory leaks due to use of particular java/javax APIs-->
  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />
  <!-- JMX Support for the Tomcat server. Documentation at /docs/non-existent.html -->
  <Listener className="org.apache.catalina.mbeans.ServerLifecycleListener" />
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />

  <!-- Global JNDI resources
       Documentation at /docs/jndi-resources-howto.html
  -->
  <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
    <Resource name="UserDatabase" auth="Container"
              type="org.apache.catalina.UserDatabase"
              description="User database that can be updated and saved"
              factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
              pathname="conf/tomcat-users.xml" />
  </GlobalNamingResources>

  <!-- A "Service" is a collection of one or more "Connectors" that share
       a single "Container" Note:  A "Service" is not itself a "Container", 
       so you may not define subcomponents such as "Valves" at this level.
       Documentation at /docs/config/service.html
   -->
  <Service name="Catalina">

    <!--The connectors can use a shared executor, you can define one or more named thread pools-->
    <!--
    <Executor name="tomcatThreadPool" namePrefix="catalina-exec-" 
        maxThreads="150" minSpareThreads="4"/>
    -->

    <!-- A "Connector" represents an endpoint by which requests are received
         and responses are returned. Documentation at :
         Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
         Java AJP  Connector: /docs/config/ajp.html
         APR (HTTP/AJP) Connector: /docs/apr.html
         Define a non-SSL HTTP/1.1 Connector on port 8080
    -->

    <Connector port="8080" URIEncoding="UTF-8" protocol="HTTP/1.1" 
               connectionTimeout="20000" 
               redirectPort="8443" />
    <!-- A "Connector" using the shared thread pool-->

    <!--<Connector executor="tomcatThreadPool"
               port="8080" URIEncoding="UTF-8" protocol="HTTP/1.1" 
               connectionTimeout="20000" 
               redirectPort="8443" />-->

    <!-- Define a SSL HTTP/1.1 Connector on port 8443
         This connector uses the JSSE configuration, when using APR, the 
         connector should be using the OpenSSL style configuration
         described in the APR documentation -->

    **<!--<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
               maxThreads="150" scheme="https" secure="true"
               keystoreFile="${user.home}/.keystore" keystorePass="changeit"
               clientAuth="false" sslProtocol="TLS" />-->**

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />

    <!-- An Engine represents the entry point (within Catalina) that processes
         every request.  The Engine implementation for Tomcat stand alone
         analyzes the HTTP headers included with the request, and passes them
         on to the appropriate Host (virtual host).
         Documentation at /docs/config/engine.html -->

    <!-- You should set jvmRoute to support load-balancing via AJP ie :
    <Engine name="Catalina" defaultHost="localhost" jvmRoute="jvm1">         
    --> 
    <Engine name="Catalina" defaultHost="localhost">

      <!--For clustering, please take a look at documentation at:
          /docs/cluster-howto.html  (simple how to)
          /docs/config/cluster.html (reference documentation) -->
      <!--
      <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/>
      -->        

      <!-- The request dumper valve dumps useful debugging information about
           the request and response data received and sent by Tomcat.
           Documentation at: /docs/config/valve.html -->
      <!--
      <Valve className="org.apache.catalina.valves.RequestDumperValve"/>
      -->

      <!-- This Realm uses the UserDatabase configured in the global JNDI
           resources under the key "UserDatabase".  Any edits
           that are performed against this UserDatabase are immediately
           available for use by the Realm.  -->
      <Realm className="org.apache.catalina.realm.UserDatabaseRealm"
             resourceName="UserDatabase"/>

      <!-- Define the default virtual host
           Note: XML Schema validation will not work with Xerces 2.2.
       -->
      <Host name="localhost"  appBase="webapps"
            unpackWARs="true" autoDeploy="true"
            xmlValidation="false" xmlNamespaceAware="false">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"  
               prefix="localhost_access_log." suffix=".txt" pattern="common" resolveHosts="false"/>
        -->

      </Host>
    </Engine>
  </Service>
</Server> 
```

从下面 JLRishe 的答案中编辑的 xslt是**；**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="comment()[not(../Connector[@scheme = 'https']) and
                                 contains(., 'Connector') and
                                 (contains(., 'scheme=https') or
                                  contains(., scheme='https'))]">
    <xsl:value-of select="." disable-output-escaping="yes" />
  </xsl:template>

  <xsl:template match="Service[not(Connector[@scheme = 'https'] or
                                   comment()[contains(., 'Connector') and
                                             (contains(., 'scheme=https') or
                                              contains(., scheme='https'))]
                                  )]">

    <xsl:copy>
    <xsl:apply-templates select="@* | node()"/>

    <!-- Add the missing Connector here -->

    <xsl:element name="Connector">
      <xsl:attribute name="port">8443</xsl:attribute>
      <xsl:attribute name="protocol">HTTP/1.1</xsl:attribute>
      <xsl:attribute name="SSLEnabled">true</xsl:attribute>
      <xsl:attribute name="maxThreads">150</xsl:attribute>
      <xsl:attribute name="scheme">https</xsl:attribute>
      <xsl:attribute name="secure">true</xsl:attribute>
      <xsl:attribute name="keystroreFile">${user.home}/.keystore</xsl:attribute>
      <xsl:attribute name="keystorePass">changeit</xsl:attribute>
      <xsl:attribute name="clientAuth">false</xsl:attribute>
      <xsl:attribute name="sslProtocol">TLS</xsl:attribute>
    </xsl:element>
   </xsl:copy>
  </xsl:template>         
</xsl:stylesheet> 
```

**上面的 xslt 仅适用于所有场景，除了在没有找到新元素时添加新元素，它在`</Service>`结束标记之前添加连接器元素，但`<Service>`在开始标记之前需要它`<Engine>`以及其他连接器元素**

谢谢你。

以下是未找到 SSL 配置时生成的 xml；

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="new2.xsl"?>
<!-- Note:  A "Server" is not itself a "Container", so you may not
     define subcomponents such as "Valves" at this level.
     Documentation at /docs/config/server.html
 -->
<Server port="8005" shutdown="SHUTDOWN">

  <!--APR library loader. Documentation at /docs/apr.html -->
  <Listener className="org.apache.catalina.core.AprLifecycleListener" SSLEngine="on" />
  <!--Initialize Jasper prior to webapps are loaded. Documentation at /docs/jasper-howto.html -->
  <Listener className="org.apache.catalina.core.JasperListener" />
  <!-- Prevent memory leaks due to use of particular java/javax APIs-->
  <Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener" />
  <!-- JMX Support for the Tomcat server. Documentation at /docs/non-existent.html -->
  <Listener className="org.apache.catalina.mbeans.ServerLifecycleListener" />
  <Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener" />

  <!-- Global JNDI resources
       Documentation at /docs/jndi-resources-howto.html
  -->
  <GlobalNamingResources>
    <!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    -->
    <Resource name="UserDatabase" auth="Container" type="org.apache.catalina.UserDatabase" description="User database that can be updated and saved" factory="org.apache.catalina.users.MemoryUserDatabaseFactory" pathname="conf/tomcat-users.xml" />
  </GlobalNamingResources>

  <!-- A "Service" is a collection of one or more "Connectors" that share
       a single "Container" Note:  A "Service" is not itself a "Container",
       so you may not define subcomponents such as "Valves" at this level.
       Documentation at /docs/config/service.html
   -->
  <Service name="Catalina">

    <!--The connectors can use a shared executor, you can define one or more named thread pools-->
    <!--
    <Executor name="tomcatThreadPool" namePrefix="catalina-exec-"
        maxThreads="150" minSpareThreads="4"/>
    -->

    <!-- A "Connector" represents an endpoint by which requests are received
         and responses are returned. Documentation at :
         Java HTTP Connector: /docs/config/http.html (blocking & non-blocking)
         Java AJP  Connector: /docs/config/ajp.html
         APR (HTTP/AJP) Connector: /docs/apr.html
         Define a non-SSL HTTP/1.1 Connector on port 8080
    -->

    <Connector port="8080" URIEncoding="UTF-8" protocol="HTTP/1.1" connectionTimeout="20000" redirectPort="8443" />
    <!-- A "Connector" using the shared thread pool-->

    <!--<Connector executor="tomcatThreadPool"
               port="8080" URIEncoding="UTF-8" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443" />-->

    <!-- Define a SSL HTTP/1.1 Connector on port 8443
         This connector uses the JSSE configuration, when using APR, the
         connector should be using the OpenSSL style configuration
         described in the APR documentation -->

    <!-- Define an AJP 1.3 Connector on port 8009 -->
    <Connector port="8009" protocol="AJP/1.3" redirectPort="8443" />

    <!-- An Engine represents the entry point (within Catalina) that processes
         every request.  The Engine implementation for Tomcat stand alone
         analyzes the HTTP headers included with the request, and passes them
         on to the appropriate Host (virtual host).
         Documentation at /docs/config/engine.html -->

    <!-- You should set jvmRoute to support load-balancing via AJP ie :
    <Engine name="Catalina" defaultHost="localhost" jvmRoute="jvm1">         
    -->
    <Engine name="Catalina" defaultHost="localhost">

      <!--For clustering, please take a look at documentation at:
          /docs/cluster-howto.html  (simple how to)
          /docs/config/cluster.html (reference documentation) -->
      <!--
      <Cluster className="org.apache.catalina.ha.tcp.SimpleTcpCluster"/>
      -->        

      <!-- The request dumper valve dumps useful debugging information about
           the request and response data received and sent by Tomcat.
           Documentation at: /docs/config/valve.html -->
      <!--
      <Valve className="org.apache.catalina.valves.RequestDumperValve"/>
      -->

      <!-- This Realm uses the UserDatabase configured in the global JNDI
           resources under the key "UserDatabase".  Any edits
           that are performed against this UserDatabase are immediately
           available for use by the Realm.  -->
      <Realm className="org.apache.catalina.realm.UserDatabaseRealm" resourceName="UserDatabase" />

      <!-- Define the default virtual host
           Note: XML Schema validation will not work with Xerces 2.2.
       -->
      <Host name="localhost" appBase="webapps" unpackWARs="true" autoDeploy="true" xmlValidation="false" xmlNamespaceAware="false">

        <!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.authenticator.SingleSignOn" />
        -->

        <!-- Access log processes all example.
             Documentation at: /docs/config/valve.html -->
        <!--
        <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"  
               prefix="localhost_access_log." suffix=".txt" pattern="common" resolveHosts="false"/>
        -->

      </Host>
    </Engine>
  <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true" maxThreads="150" scheme="https" secure="true" keystroreFile="${user.home}/.keystore" keystorePass="changeit" clientAuth="false" sslProtocol="TLS" /></Service>
</Server> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:40:39.937

如果还没有匹配的连接器，这应该适用于取消注释寻找的连接器，或者如果它不存在则添加一个新的连接器：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:template match="@* | node()" name="Copy">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="@* | node()" mode="insertConnector">
    <xsl:call-template name="Copy" />
  </xsl:template>

  <xsl:template match="comment()[not(../Connector[@scheme = 'https']) and
                                 contains(., '&lt;Connector') and
                                 (contains(., 'scheme=&quot;https&quot;') or
                                  contains(., &quot;scheme='https'&quot;))]">
    <xsl:value-of select="." disable-output-escaping="yes" />
  </xsl:template>

  <xsl:template match="Service[not(Connector[@scheme = 'https'] or
                                   comment()[contains(., '&lt;Connector') and
                                             (contains(., 'scheme=&quot;https&quot;') or
                                              contains(., &quot;scheme='https'&quot;))]
                                  )]
                      ">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" mode="insertConnector" />
    </xsl:copy>
  </xsl:template>

  <!-- Add the new connector after the last existing Connnector if there is one -->
  <xsl:template match="Connector[last()]" mode="insertConnector">
    <xsl:call-template name="Copy" />

    <xsl:call-template name="AddConnector" />
  </xsl:template>

  <!-- ... or before the first Engine if there is no existing Connector -->
  <xsl:template match="Engine[1][not(preceding-sibling::Connector)]"
                mode="insertConnector">
    <xsl:call-template name="AddConnector" />

    <xsl:call-template name="Copy" />
  </xsl:template>

  <xsl:template name="AddConnector">
    <!-- This is the new connector -->
    <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true" 
               maxThreads="150" scheme="https" secure="true" 
               keystroreFile="${{user.home}}/.keystore" keystorePass="changeit"
               clientAuth="false" sslProtocol="TLS" />
  </xsl:template>
</xsl:stylesheet> 
```

# xml - 不要用 HXT 替换 HTML 实体

> ID：15394608
> 
> 赞同：3
> 
> 时间：2013-03-13T19:24:56.413
> 
> 标签：xml, haskell, hxt

如何使用 HXT 保留 HTML 实体？SystemConfig`withSubstHTMLEntities`似乎没有改变任何东西：

`runX $ xshow $ readString [] "<doc><p> &gt; </p></doc>"`

和

`runX $ xshow $ readString [withSubstHTMLEntities no] "<doc><p> &gt; </p></doc>"`

两者都生产

`["</ source=\"\"<doc><p> &gt; </p></doc>\"\" transfer-URI=\"string:\" transfer-Message=\"OK\" transfer-Status=\"200\"><doc><p> > </p></doc><//>"]`

我完全不知道在哪里看。我几乎尝试了所有其他我可以传递给的选项`readDocument`或`readString`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:04:04.273

您可以使用`writeDocumentToString`来自`Text.XML.HXT.Arrow.WriteDocument`. 签名是：

```
writeDocumentToString :: ArrowXml a => SysConfigList -> a XmlTree String 
```

所以，例如，

```
f :: IO String
f = do
  let arr = readString [] "<doc><p> &lt;tag&gt; </p></doc>" >>> writeDocumentToString []
  results <- runX arr
  return . head $ results 
```

`f`将返回`IO "<doc><p> &lt;tag> </p></doc>"`。（这足以避免`<tag>`被解析为标签）

# c++ - 用 boost 写一个 gz 流

> ID：15394609
> 
> 赞同：0
> 
> 时间：2013-03-13T19:25:00.143
> 
> 标签：c++, boost, gzip

我编写了一个代码来`gz`使用`boost`.

```
class foo() {
  std::ofstream traceOut;
  struct traceRec {
    traceRec(uint64_t c) : cycle(c) {};
    uint64_t cycle;
  };
  void writeTrace(traceRec &rec)
  {
    try {
      boost::iostreams::filtering_istream in;
      in.push(boost::iostreams::gzip_decompressor());
      in.push(traceOut);   // ERROR
      std::cout << rec.cycle << std::endl;
    }
    catch(const boost::iostreams::gzip_error& e) {
      std::cout << e.what() << '\n';
    }
  }
  void init() {
    traceOut.open("log.gz", std::ios_base::in | std::ios_base::binary);
  }
  void bar() {
    traceRec rec (1000);
    writeTrace(rec);
  }
}; 
```

但是我在编译时收到此错误

```
/opt/boost_1_33_1/boost/iostreams/chain.hpp: In member function ‘void boost::iostreams::detail::chain_client<Chain>::push(std::basic_ostream<_CharT2,      _Traits2>&, int, int) [with CharType = char, TraitsType = std::char_traits<char>, Chain = boost::iostreams::chain<boost::iostreams::input, char, 
std::char_traits<char>, std::allocator<char> >]’:
test.cpp:   instantiated from here
/opt/boost_1_33_1/boost/iostreams/chain.hpp:472: error: invalid application of ‘sizeof’ to incomplete type ‘boost::STATIC_ASSERTION_FAILURE<false>’ 
/opt/boost_1_33_1/boost/iostreams/traits.hpp: At global scope:
/opt/boost_1_33_1/boost/iostreams/traits.hpp: In instantiation of ‘boost::iostreams::detail::member_category<mpl_::void_>’:
/opt/boost_1_33_1/boost/mpl/eval_if.hpp:38:   instantiated from ‘boost::mpl::eval_if<boost::iostreams::is_std_io<mpl_::void_>, boost::iostreams::select<boost::iostreams::is_iostream<mpl_::void_>, boost::iostreams::iostream_tag, boost::iostreams::is_istream<mpl_::void_>, boost::iostreams::istream_tag, boost::iostreams::is_ostream<mpl_::void_>, boost::iostreams::ostream_tag, boost::iostreams::is_streambuf<mpl_::void_>, boost::iostreams::streambuf_tag, mpl_::bool_<true>, mpl_::void_, mpl_::bool_<true>, mpl_::void_, mpl_::bool_<true>, mpl_::void_, mpl_::bool_<true>, mpl_::void_, mpl_::bool_<true>, mpl_::void_, mpl_::bool_<true>, mpl_::void_>, boost::iostreams::detail::member_category<mpl_::void_> >’
.... 
```

这意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:36:44.583

请看[这个](http://www.boost.org/doc/libs/1_44_0/libs/iostreams/doc/classes/filtering_stream.html)，push() 方法必须接收流而不是任意对象

**EDIT1（以下评论交流）**

更改类型`traceOut`以`std::ifstream`解决构建问题（至少使用 boost 1.52）

# html - 试图防止图像溢出

> ID：15394612
> 
> 赞同：0
> 
> 时间：2013-03-13T19:25:03.360
> 
> 标签：html, css, overflow

相框包含以 3x4 列显示的图像。
图像溢出相框，我似乎无法阻止它们。
我在相框上使用了“溢出”，但我一直得到相同的结果。

如何防止照片溢出相框？

**样式.css**

```
.screenFrame {
    width: 350px;
    height: 475px;
    background-color: #FDF6C2;
    margin: 0 auto;
    }
    .photoFrame {
    overflow-y: scroll;
    }
    .bookPhoto {
      width: 100px;
      height: 113px;
      margin: 0 5px;
    } 
```

**照片.html**

```
<div class="screenFrame">
   <div id="photoFrame" class="photoFrame">
       <a class="bookInfo" href="#"><img class="bookPhoto" src="mySrc" alt="" /></a>
       etc
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:28:58.377

我不认为你的标记是正确的。

您设置了`overflow-y`on `.photoFrame`，但代码中的图像标签位于`.photoframe`div 之外。

尝试将其更改为：

```
<div class="screenFrame">
   <div id="photoFrame" class="photoFrame">
        <a class="bookInfo" href="#"><img class="bookPhoto" src="mySrc" /></a>
   </div>
</div> 
```

我也`<img>`正确关闭了你的标签。您不使用`</img>`关闭图像标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:18:10.487

据我所知，你永远不会过去，因为你没有为`.photoframe`. 它应该有一个特定的宽度和高度，我猜两者都是 100%。而且您没有指定任何内容`#photoframe`，可能也有一些样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T20:27:17.127

两件事，一，你只是在相框 div 上设置了 overflow-y，所以它会自动在 x 方向上延伸。您还需要处理 x 方向。

此外，如果图像与样式指定的大小不同，设置 img 元素的高度和宽度将缩放/压缩/扭曲您的图像。如果这不是您想要的，请尝试使用 max-height 和 max-width 。

尝试这些样式，看看结果是否更好：

```
.photoFrame {
   overflow:hidden;
   height:  113px;
   width:   120px; 
}
.bookPhoto {
   max-height: 113px;
   max-width: 110px;
   margin: 0 5px;
} 
```

（相框宽度为 120 而不是 110，以说明每边 5px 的边距）
如果您想要大于框架大小的图像的滚动条，请使用溢出：滚动。如果您不希望图像缩放，而不是设置 .bookPhoto 的宽度和高度，请使用剪辑矩形：

```
.bookPhoto {
   clip( 0px, 113px, 110px, 0px);
   margin: 0 5px;
} 
```

# c# - 多绑定一个不更新源属性的文本框

> ID：15394613
> 
> 赞同：1
> 
> 时间：2013-03-13T19:25:10.453
> 
> 标签：c#, .net, wpf, binding, multibinding

我有一个列表框，其中包含“02x06”形式的字符串列表。总是两位数，小写x，两位数，没有空格。这绑定到两个文本框，一个保存行（在本例中为 02），另一个保存列（06）。

这工作得很好。

现在我需要将行文本框绑定到代码中的 Row 属性，并将 col 文本框绑定到代码中的 Col 属性。我正在尝试通过 MultiBinding 做到这一点：

XAML：

```
<Windows.Resources>
     <local:DiePrintConverter x:Key="DiePrintConverter"/>
</Window.Resources>
<ListBox
    Name="lbxUninspectedPrints"
    ItemsSource="{Binding UninspectedPrintList}"
    Margin="5"
    Background="MidnightBlue"/>
<TextBox
    Name="txtCol"
    Style="{StaticResource txtStyle}">
    <TextBox.Text>
        <MultiBinding Converter="{StaticResource DiePrintConverter}">
            <Binding 
                Path="SelectedValue"
                ConverterParameter="1"
                ElementName="lbxUninspectedPrints"
                Mode="OneWay"/>
            <Binding
                Path="Col"
                Mode="OneWayToSource"/>
        </MultiBinding>
    </TextBox.Text>
</TextBox>
<TextBox
    Name="txtRow"
    Style="{StaticResource txtStyle}">
    <TextBox.Text>
        <MultiBinding Converter="{StaticResource DiePrintConverter}">
            <Binding 
                Path="SelectedValue"
                ConverterParameter="0"
                ElementName="lbxUninspectedPrints"
                Mode="OneWay"/>
            <Binding 
                Path="Row"
                Mode="OneWayToSource"/>
        </MultiBinding>
    </TextBox.Text>
</TextBox> 
```

代码背后：

```
lbxUninspectedPrints.DataContext = wtw;
txtRow.DataContext = wtw.DiePrintNav;
txtCol.DataContext = wtw.DiePrintNav; 
```

DiePrintConverter 类：

```
public class DiePrintConverter : IMultiValueConverter
{
    bool row = true;
    public object Convert(object[] value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value[0] == null)
        {
            return "00";
        }

        var values = value[0].ToString().Split(new string[] { "x" }, StringSplitOptions.None);

        int x = 0;
        for (int i = 0; i < values.Count(); i++)
        {
            if (values[i].ToString().Count() == 1)
            {
                values[i] = "0" + values[i];
            }
        }
        if (row)
        {
            row = false;
            return values[0].ToString();
        }
        else
        {
            row = true;
            return values[1].ToString();
        }
        return "00";
    }

    public object[] ConvertBack(object value, Type[] targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

DiePrintNavigation 类：

```
public class DiePrintNavigation
{
#region Fields

    private string row;
    private string col;
    private DiePrint diePrint;
    private DelegateCommand moveUpCommand;
    private DelegateCommand moveDownCommand;
    private DelegateCommand moveLeftCommand;
    private DelegateCommand moveRightCommand;
    private DelegateCommand loadMapCommand;
    private WaferTrackerWindowViewModel wtw;

#endregion

#region Constructor

    public DiePrintNavigation() { }
    public DiePrintNavigation(WaferTrackerWindowViewModel wtw)
    {
        this.wtw = wtw;
    }

#endregion

#region Properties

    public string Row
    {
        set
        {
            row = value;
        }
    }
    public string Col
    {
        set
        {
            col = value;
        }
    }
    public DiePrint DiePrint
    {
        get
        {
            return diePrint;
        }
        set
        {
            diePrint = value;
        }
    }
    public ICommand MoveUpCommand
    {
        get
        {
            if (moveUpCommand == null)
            {
                moveUpCommand = new DelegateCommand(MoveUp);
            }
            return moveUpCommand;
        }
    }
    public ICommand MoveDownCommand
    {
        get
        {
            if (moveDownCommand == null)
            {
                moveDownCommand = new DelegateCommand(MoveDown);
            }
            return moveDownCommand;
        }
    }
    public ICommand MoveLeftCommand
    {
        get
        {
            if (moveLeftCommand == null)
            {
                moveLeftCommand = new DelegateCommand(MoveLeft);
            }
            return moveLeftCommand;
        }
    }
    public ICommand MoveRightCommand
    {
        get
        {
            if (moveRightCommand == null)
            {
                moveRightCommand = new DelegateCommand(MoveRight);
            }
            return moveRightCommand;
        }
    }
    public ICommand LoadMapCommand
    {
        get
        {
            if (loadMapCommand == null)
            {
                loadMapCommand = new DelegateCommand(LoadMap);
            }
            return loadMapCommand;
        }
    }

#endregion

#region Methods

    private void Move()
    {
        DiePrintQueries diePrintQueries = new DiePrintQueries(
            DataLibrary.SingulationOne,
            DataLibrary.MasksInfo);
        diePrint.Name = diePrint.Row.ToString() + "x" + diePrint.Col.ToString();
        try
        {
            diePrint.Mask = diePrintQueries.GetMask(diePrint.Name);
            diePrint.LasersPerDie = diePrintQueries.GetLasersPerDie(diePrint.Mask);
            diePrint.DieTable = diePrintQueries.GetListOfDie(diePrint.Name);
            wtw.WaferMap.DiePrint = diePrint;
            wtw.WaferMap.DrawMap();
        }
        catch (InvalidOperationException)
        {
            MessageBox.Show(
                "Die Print " + diePrint.Name + " does not exist on this wafer.\n" +
                "Please move to a die print that exists.",
                "Non-Existent Die Print", MessageBoxButton.OK, MessageBoxImage.Error);
        }
    }
    public void MoveUp()
    {
        // TODO: Catch all these Move Errors!!!
        try
        {
            diePrint.GetRowAndColumn(diePrint.Name);
            diePrint.Row = diePrint.Row - 1;
            Move();
        }
        catch (NullReferenceException)
        {
        }
    }
    public void MoveDown()
    {
        diePrint.GetRowAndColumn(diePrint.Name);
        diePrint.Row = diePrint.Row + 1;
        Move();
    }
    public void MoveRight()
    {
        diePrint.GetRowAndColumn(diePrint.Name);
        diePrint.Col = diePrint.Col + 1;
        Move();
    }
    public void MoveLeft()
    {
        diePrint.GetRowAndColumn(diePrint.Name);
        diePrint.Col = diePrint.Col - 1;
        Move();
    }
    public void LoadMap()
    {
        if (diePrint == null)
        {
            DiePrintQueries diePrintQueries = new DiePrintQueries(
                DataLibrary.SingulationOne,
                DataLibrary.MasksInfo);
            if (this.row.StartsWith("0"))
            {
                row = row.Remove(0, 1);
            }
            if (this.col.StartsWith("0"))
            {
                col = col.Remove(0, 1);
            }
            diePrint = new DiePrint(this.row + "x" + this.col);
            diePrint.Mask = diePrintQueries.GetMask(diePrint.Name);
            diePrint.DieTable = diePrintQueries.GetListOfDie(diePrint.Name);

            // TODO: dupCode(1)
            // Then map the die print
            wtw.WaferMap = new DiePrintMapViewModel(diePrint);
            wtw.WaferMap.NotifyCanvas += wtw.Update;
            wtw.WaferMap.NotifyBluetape += wtw.Update;
            wtw.WaferMap.NotifyDieprint += wtw.Update;
            wtw.WaferMap.DrawMap();
            wtw.FailureCodeManager.DiePrintMap = (DiePrintMapViewModel) wtw.WaferMap;
        }
        diePrint.Row = Convert.ToInt32(this.row);
        diePrint.Col = Convert.ToInt32(this.col);
        Move();
    }

#endregion
} 
```

wtw 是包含所有这些组件的窗口的视图模型。DiePrintNav 是一个包含 Row 和 Col 的类，只写在 txtRow 和 txtCol 值更改时需要更新的属性。wtw 视图模型对象包含 DiePrintNav 属性并且是文本框的数据上下文。未经检查的打印列表框的数据上下文也是 wtw 对象并绑定到 wtw 的 UninspectedPrintList 属性。

列表框已正确填写。然后我可以单击列表框中的任何内容，它也可以镜像到 txtRow 和 txtCol 框中，因此 IMultiValueConverter 类也可以正常工作。

问题是，每当 txtRow 和 txtCol 框中发生任何变化时，它们各自的属性都不会更新。

到底是怎么回事？？

任何帮助将不胜感激！

谢谢，

凯尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:17:13.213

也许你的类`DiePrintNav`必须实现`INotifyPropertyChanged`接口。可以？这可能是原因。请检查一下。

**编辑**

* * *

我现在明白了，您想从视图中更新模型属性。问题似乎是您需要定义 MultiValueConverter 的 ConvertBack 方法，这样视图将能够在更改时更新所有属性。这里的另一件事是绑定应该是`Mode=TwoWay`，因为即使您不想从模型更新视图，第一次加载模型时，您可能希望视图显示旧模型值，在此如果需要双向绑定。希望这次更新能帮到...

**编辑**

* * *

请查看[MSDN IMultivalueConverter 接口](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)文章，这里解释了`IMultivalueConverter`接口的工作方式，希望对您有所帮助:)

# android - 将二进制库嵌入 Android 应用程序

> ID：15394615
> 
> 赞同：0
> 
> 时间：2013-03-13T19:25:15.823
> 
> 标签：android, shell, sh

我正在编写使用存储在项目资产文件夹中的busybox二进制库的应用程序。在运行时我将这个库复制到`/data/data/com.myapp/`文件夹，我使这个文件可执行，然后尝试执行一些应该从这个二进制库中可用的 util cmds。但我没有得到想要的结果。我使用下一个功能：

```
 private void shellCmd()
    {
        try {
            Process process = null;

            /* I used this to make the file executable */
//          process = Runtime.getRuntime().exec("/system/bin/chmod 777 " 
//                                        + this.getFilesDir().getPath() + "/busybox");
//          process = Runtime.getRuntime().exec("/system/bin/ls -l "
//                    + this.getFilesDir().getPath() + "/busybox");

            /* this exec function doesnt execute(there is no prompt into logcat)*/
            process = Runtime.getRuntime().exec( this.getFilesDir().getPath() + "/busybox ping -4 46.173.103.134");

            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(process.getInputStream()));
            int read;
            char[] buffer = new char[4096];
            StringBuffer output = new StringBuffer();
            while ((read = reader.read(buffer)) > 0) {
                output.append(buffer, 0, read); 
            }
            reader.close();
            Log.w("groupAB",output.toString());
            Log.i("groupAB", "finish");
            process.waitFor();

            return;
        } catch (IOException e) {
            throw new RuntimeException(e);
        } catch (InterruptedException e) {
            throw new RuntimeException(e);
        }
    } 
```

但是，当我尝试使用 adb 执行相同的 cmd 时，`"adb shell /data/data/com.myapp/busybox ping -4 46.173.103.134"`我得到了正确的 ping 结果。我很困惑为什么这不能以编程方式工作。我的错在哪里？

# c++ - C++ 检查指针是否有效？

> ID：15394618
> 
> 赞同：0
> 
> 时间：2013-03-13T19:25:26.133
> 
> 标签：c++, pointers

我在 C++ 中遇到了有效指针的问题。我在不同的线程中使用一个对象，所以我不能只将指针设置为 NULL 并返回。这是我正在尝试的：

```
int main()
{
    char *ptr = new char[1024]; //assume PTR = 0x12345678
    changePtr(ptr);  //after calling this,
                     //ptr is not NULL here.
    return 0;
}

void changePtr(char *ptr)
{
    delete [] ptr; //ptr = 0x12345678
    ptr = NULL; //ptr = NULL
} 
```

如何`ptr`将这两个函数都更改为 NULL？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T19:27:19.517

将 changePtr 的签名更改为：

```
void changePtr(char **ptr)
{
   delete [] *ptr; //ptr = 0x12345678
   *ptr = NULL; //ptr = NULL
} 
```

并使用以下方法调用它：

```
changePtr(&ptr); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T19:29:13.367

在 C++ 中，使用引用参数：

```
void changePtr(char *&ptr) {
    delete [] ptr; //ptr = 0x12345678 
    ptr = NULL; //ptr = NULL 
} 
```

在 C 中，您需要将指针传递给指针，这基本上是相同的东西，但语法不太漂亮。

您无需更改调用代码。但是调用时必须给出一个可修改的变量作为参数，不能给出例如`NULL`or `nullptr`，同样不能给出`&NULL`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-13T19:31:52.187

如果您真的想以如此复杂且容易出错的方式管理内存，请传递对调用者指针的引用，而不是其副本：

```
void changePtr(char *&ptr)
//                   ^ 
```

更好的是使用智能指针；它们的设计使得在删除目标时很难让它们悬空：

```
int main()
{
    std::unique_ptr<char[]> ptr(new char[1024]); //assume PTR = 0x12345678
    changePtr(ptr);  //after calling this,
                     //ptr is empty here.
    return 0;
}

void changePtr(std::unique_ptr<char[]> & ptr)
{
    ptr.reset();
} 
```

虽然如果我想要一个动态数组，我会`new`完全避免使用`std::vector`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-13T23:11:16.180

我已经看到很多关于如何检查指针有效性的问题。这些问题中有很多是关于 Windows 的。可能没有检查 C++ 的通用方法，但对于特定于 Windows 的解决方案，以下似乎适用于我的系统：

```
#include <windows.h>
#include <stdio.h>

int main(int argc, char **argv)
{
    MEMORY_BASIC_INFORMATION lpBuffer;
    int cActualBytes;

    cActualBytes = VirtualQuery(&main, &lpBuffer, sizeof(lpBuffer));        // Can we get info about main?

    if (!cActualBytes)
    {
        printf("Nope, you can't do that \n");
        return 2;
    }

    if (cActualBytes != sizeof(lpBuffer))
    {
        printf("Surprise!  Expected %d bytes, got %d\n", sizeof(lpBuffer), cActualBytes);
    }

    printf("Information for main\n");
    printf("---------------------------\n");
    printf("C reports pointer %p, Virtual Alloc sees it as %p\n",&main,lpBuffer.BaseAddress);

    return 0;
} 
```

# shell - 防止终端提示在 exec() 调用时打印

> ID：15394621
> 
> 赞同：0
> 
> 时间：2013-03-13T19:25:51.293
> 
> 标签：shell, terminal, operating-system, exec, fork

所以，

有许多类似的问题，但没有一个我能够使用。我的代码片段如下：

```
for(int j=0; j<N; j++) {
    pid_t pid = fork();
    if (pid == -1) {
        exit(-1); //err
    } else if (pid == 0) {//kid
        stringstream ss;
        ss<<j;
        execlp("./sub","sub",ss.str().c_str(),NULL);
        exit(0);
    } else {
            /* parent */
    }
} 
```

我在 sub(.cpp) 中的执行代码是：

```
int main( int argc, char **argv )
{

   cout<<argv[i]<<endl;
   exit(0);
} 
```

我的输出是这样的：

```
[terminal prompt '$'] 4
2
3
etc. 
```

有没有办法可以阻止在 exec 调用中显示提示？为什么它只显示在第一个 exec 调用上，而不是每个调用上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:30:26.497

你看到的是你的 shell 的正常提示，因为父进程很快就终止了。它不是 exec 调用的输出。分叉的进程在父进程终止*后打印它们的输出。*

您可以`waitpid()`在父进程中使用“等待”，直到所有分叉进程都终止。

# c++ - 相互递归的 lambda

> ID：15394622
> 
> 赞同：2
> 
> 时间：2013-03-13T19:26:01.593
> 
> 标签：c++, c++11, lambda, boost-asio

这是一个基于[boost asio 示例](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/echo/async_udp_echo_server.cpp)的 boost::asio udp echo 演示。

这个版本使用 C++ lambda 的内容不到 boost 示例大小的一半，但 gcc 告诉我这`received`在`recv_from`.

不得不以更冗长的方式写这个让我很痛苦。一些 C++ 大师可以帮助我定义相互递归的 lambda 表达式吗？

```
class server {
public:
  server(io_service& io_service, short port)
    : socket_(io_service, udp::endpoint(udp::v4(), port)) {
    auto recv_from = [&,received]() {
      socket_.async_receive_from(buffer(data_, max_length), sender_endpoint_,
                                 received);
    };
    auto received = [&,recv_from](const error_code& error, size_t bytes_transferred) {
      if (!error && bytes_transferred > 0) {
        socket_.async_send_to(buffer(data_, bytes_transferred), sender_endpoint_,
                              [&](const error_code&, size_t) {
                                recv_from();
                              });
      } else {
        recv_from(); // loop
      }
    };
    recv_from();
  }

private:
  udp::socket socket_;
  udp::endpoint sender_endpoint_;
  enum { max_length = 1024 };
  char data_[max_length];
}; 
```

编辑，解决方案：我需要添加这个：

```
std::function<void(const error_code&, size_t)> received; 
```

使类型推理引擎更容易（我已经为 Haskell 编程过）

Edit2：存在生命周期问题，因此无法正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:20:19.793

回答我自己的问题：

我的代码实际上存在不少于三个问题。

1.  我一直小心地将and*复制*到相应的闭包中，以便在构造函数超出范围时可以使用它们。不幸的是，闭包与构造函数同时[超出范围。](https://stackoverflow.com/questions/7941562/what-is-the-lifetime-of-a-c-lambda-expression)因此，复制是没有意义的。`received``recv_from``[&, xxx]``xxx`

2.  必须固定至少（？）其中一个 lambda 的类型以取悦类型推理引擎。

3.  但这并不能解决问题#1。为了解决生命周期问题，我应该将闭包对象存储在`server`对象中。

所以我认为这接近我需要做的：

```
class server {
 public:
   server(io_service& io_service, short port)
     : socket_(io_service, udp::endpoint(udp::v4(), port)) {
    recv_from = [&]() {
       socket_.async_receive_from(buffer(data_, max_length), sender_endpoint_,
                                 received);
    };
    received = [&](const error_code& error, size_t bytes_transferred) {
      if (!error && bytes_transferred > 0) {
        socket_.async_send_to(buffer(data_, bytes_transferred), sender_endpoint_,
                              [&](const error_code&, size_t) {
                                recv_from();
                              });
      } else {
        recv_from(); // loop
      }
    };
    recv_from();
  }

private:
  udp::socket socket_;
  udp::endpoint sender_endpoint_;
  std::function<void(const error_code&, size_t)> received;
  std::function<void()> recv_from;
  enum { max_length = 1024 };
  char data_[max_length];
}; 
```

# javascript - JSON 模板未显示

> ID：15394626
> 
> 赞同：0
> 
> 时间：2013-03-13T19:26:18.473
> 
> 标签：javascript, json

我正在尝试使用 JS 创建 JSON 模板，这是我的代码。由于某种原因，它没有显示任何结果。有人可以检查一下是什么问题

```
<html>

  <head>

    <script type="text/javascript"src=""http://jsontemplate.googlecode.com/svn/trunk/javascript/json-template.js"">
    </script>
    <script type="text/javascript">
function write() {
      var t = jsontemplate.Template("{# This is a comment and will be removed from the output.}\n\n{.section products}\n  <h2>Products for Dove</h2>\n\n  <table width=\"100%\">\n  {.repeated section products}\n    <tr><td>{Product Name}</td>\n</tr>\n  {.end}\n  </table>\n{.or}\n  <p><em>(No page content matches)</em></p>\n{.end}\n"); 
```

`var s = t.expand({`

```
 "products": [{
        "Product Name": "dove moisturiser"

    },

    {
        "Product Name": "Deodrant"

    }]
});
document.getElementById("replace").innerHTML = s; 
```

} `</script>` `</head>` `<body onload="write();">` `<h4>This is for test.</h4>` `<div id="replace"></div>` `</body>` `</html>`

# c# - 如何在没有内存分配的情况下将字符串与 char[] 进行比较？

> ID：15394631
> 
> 赞同：2
> 
> 时间：2013-03-13T19:26:39.703
> 
> 标签：c#, .net

在此示例中，我必须将数组转换为字符串才能使用内置的[String.Compare](http://msdn.microsoft.com/en-us/library/system.string.compare.aspx)方法。

```
char[] array = {'a','b','c'};
string s = "abc";

// here is the extra string allocation
var arrayString = new String(array);

var compareResult = String.Compare(s, arrayString); 
```

**有没有一种简单的方法可以将字符串与 char 数组进行比较而无需额外的字符串分配？**

注意：我需要比较语义，我需要“[a] 32 位有符号整数，指示两个比较数之间的词法关系”。

小于零 -> strA 小于 strB。

零 -> strA 等于 strB。

大于零 -> strA 大于 strB。

（我正在循环中进行此比较，并且通过额外的字符串分配（25-100MB，基于我的输入的大小）产生了很多额外的垃圾）_。

我想我最终可能会弄脏自己的手，自己编写代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T19:33:19.960

试试这个

```
int len = Math.Min(array.Length, s.Length);
for (int i = 0; i < len; i++) {
    if (s[i] < array[i]) return -1;
    if (s[i] > array[i]) return +1;
}
return s.Length.Compare(array.Length); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T19:30:23.150

字符串实现`IEnumerable<Char>`，因此您*可以*遍历它们：

```
for(int i = 0; i < s.Length; i++)
{
   // Do comparisons of  s.Chars[i] with array[i] as wanted
} 
```

以上将避免额外的字符串分配（并假设字符串长度将与字符数组长度相同或更大）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T19:32:02.373

使用 SequentialEqual 怎么样？

```
char[] array = {'a', 'b', 'c'};
string s = "abc";
bool result = array.SequentialEqual(s); 
```

如果它们相等，则结果为真，如果它们不同，则结果为假。

我知道它不比较数组和字符串，它只检查它们是否相等。其他人已经对这个问题做出了更好的回答。

好的，这是我基于@FlyingStreudel 和@Olivier Jacot-Descombes 的解决方案的解决方案：

```
private void button1_Click(object sender, EventArgs e)
{
    char[] array = { 'a', 'b', 'c' };
    string s = "abc";
    s.Compare(array);
} 
```

...

```
public static class StringUtils
{
    public static int Compare(this String str, char[] chars)
    {
        if (str == null && chars == null) return 0;
        if (str == null) return -1;
        if (chars == null) return 1;
        int max = Math.Min(str.Length, chars.Length);
        for (int i = 0; i < max; i++)
            if (str[i] < chars[i])
                return -1;
            else if (str[i] > chars[i])
                return 1;
        return str.Length.CompareTo(chars.Length);
    }
} 
```

主要区别在于我不会将每个字符的 i 与 chars.Length 进行比较。

希望这对您的探索有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T19:33:28.040

你可以写一个扩展方法：

```
public static int Compare(this String str, char[] chars)
{
    for (int i = 0; i < str.Length; i++)
        if (i == chars.Length)
            return 1;
        else if (str[i] < chars[i])
            return -1;
        else if (str[i] > chars[i])
            return 1;
    if (chars.Length > str.Length)
        return -1;           
    return 0;
} 
```

# c++ - 使用 C++ 和 VS2008 管理整数时出现错误？

> ID：15394635
> 
> 赞同：-2
> 
> 时间：2013-03-13T19:26:48.593
> 
> 标签：c++, visual-studio-2008-sp1

我正在调试一个 C++ 程序，我发现由于某种原因，在我的 Visual Studio 2008 版本下，某些数字似乎没有正确存储。比如数字-3254535440好像存储为1040431856，这些数字小到可以存储成long long，所以应该没有问题。如果我运行以下代码，则会显示两条错误消息。我在两台不同的机器上试过。任何想法？谢谢！

```
if (-3254535440 == 1040431856)
    printf("ERROR\n");

long long j = -3254535440;
if (j == 1040431856)
    printf("ERROR2\n"); 
```

在 Microsoft Visual Studio 2008 版本 9.0.30729.1 SP 下测试

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:29:58.983

文字仍然`int`是 s。您需要使它们成为更大的类型：

```
long long j = -3254535440LL; 
```

这不适合 32 位类型（它似乎是你`int`的），但是一旦表示为 a `long long`，它就会保持它的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T19:49:18.160

用更高的警告级别编译，你会得到一个警告：

```
#include <stdio.h>

int main()
{
    long long j = -3254535440;
    printf("%lld\n",j);
} 
```

编译器：

```
c:\>cl /nologo /W4 test.cpp
test.cpp
test.cpp(5) : warning C4146: unary minus operator applied to unsigned type, result still unsigned

c:\>test
1040431856 
```

正如其他人所提到的，改为声明一个 long long 文字：

```
#include <stdio.h>

int main()
{
    long long j = -3254535440LL;
    printf("%lld\n",j);
} 
```

结果：

```
c:\>cl /nologo /W4 test.cpp
test.cpp

c:\>test
-3254535440 
```

# android - 获取音频文件的持续时间

> ID：15394640
> 
> 赞同：36
> 
> 时间：2013-03-13T19:26:54.153
> 
> 标签：android, audio, audio-recording, duration

我制作了一个录音机应用程序，我想在列表视图中显示录音的持续时间。我保存这样的录音：

```
MediaRecorder recorder = new MediaRecorder();
recorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
folder = new File(Environment.getExternalStorageDirectory()
            + File.separator + "Audio recordings");
String[] files = folder.list();
    int number = files.length + 1;
    String filename = "AudioSample" + number + ".mp3";
    File output = new File(Environment.getExternalStorageDirectory()
            + File.separator + "Audio recordings" + File.separator
            + filename);
    FileOutputStream writer = new FileOutputStream(output);
    FileDescriptor fd = writer.getFD();
    recorder.setOutputFile(fd);
    try {
        recorder.prepare();
        recorder.start();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        Log.e(LOG_TAG, "prepare() failed");
        e.printStackTrace();
    } 
```

如何获取此文件的持续时间（以秒为单位）？

提前致谢

---编辑我让它工作了，我在 MediaPlayer.setOnPreparedListener() 方法中调用了 MediaPlayer.getduration() 所以它返回 0。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2015-10-02T05:31:01.757

`MediaMetadataRetriever`是一种轻量级且有效的方法。`MediaPlayer`太重了，可能会在高性能环境中出现性能问题，如滚动、分页、列表等。

此外，`Error (100,0)`可能会发生，`MediaPlayer`因为它很重，有时需要一次又一次地重新启动。

```
Uri uri = Uri.parse(pathStr);
MediaMetadataRetriever mmr = new MediaMetadataRetriever();
mmr.setDataSource(AppContext.getAppContext(),uri);
String durationStr = mmr.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION);
int millSecond = Integer.parseInt(durationStr); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2017-02-15T13:02:38.897

最快的方法是通过`MediaMetadataRetriever`。但是，有一个**问题**

> 如果您使用 URI 和上下文来设置数据源，您可能会遇到错误 [https://code.google.com/p/android/issues/detail?id=35794](https://code.google.com/p/android/issues/detail?id=35794)

解决方案是使用文件的绝对路径来检索媒体文件的元数据。

下面是执行此操作的代码片段

```
 private static String getDuration(File file) {
                MediaMetadataRetriever mediaMetadataRetriever = new MediaMetadataRetriever();
                mediaMetadataRetriever.setDataSource(file.getAbsolutePath());
                String durationStr = mediaMetadataRetriever.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION);
                return Utils.formateMilliSeccond(Long.parseLong(durationStr));
            } 
```

现在您可以使用以下任一格式将毫秒转换为人类可读的格式

```
 /**
         * Function to convert milliseconds time to
         * Timer Format
         * Hours:Minutes:Seconds
         */
        public static String formateMilliSeccond(long milliseconds) {
            String finalTimerString = "";
            String secondsString = "";

            // Convert total duration into time
            int hours = (int) (milliseconds / (1000 * 60 * 60));
            int minutes = (int) (milliseconds % (1000 * 60 * 60)) / (1000 * 60);
            int seconds = (int) ((milliseconds % (1000 * 60 * 60)) % (1000 * 60) / 1000);

            // Add hours if there
            if (hours > 0) {
                finalTimerString = hours + ":";
            }

            // Prepending 0 to seconds if it is one digit
            if (seconds < 10) {
                secondsString = "0" + seconds;
            } else {
                secondsString = "" + seconds;
            }

            finalTimerString = finalTimerString + minutes + ":" + secondsString;

    //      return  String.format("%02d Min, %02d Sec",
    //                TimeUnit.MILLISECONDS.toMinutes(milliseconds),
    //                TimeUnit.MILLISECONDS.toSeconds(milliseconds) -
    //                        TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(milliseconds)));

            // return timer string
            return finalTimerString;
        } 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-03-13T19:35:46.940

尝试这个以毫秒为单位获取持续时间：

```
MediaPlayer mp = MediaPlayer.create(yourActivity, Uri.parse(pathofyourrecording));
int duration = mp.getDuration(); 
```

或者以纳秒为单位测量从`recorder.start()`到所经过的时间：`recorder.stop()`

```
long startTime = System.nanoTime();    
// ... do recording ...    
long estimatedTime = System.nanoTime() - startTime; 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-03-13T19:35:01.687

尝试使用

```
long totalDuration = mediaPlayer.getDuration(); // to get total duration in milliseconds

long currentDuration = mediaPlayer.getCurrentPosition(); // to Gets the current playback position in milliseconds 
```

1000 上的除法转换为秒。

希望这对您有所帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-01-21T10:44:51.977

根据 Vijay 的回答，该函数为我们提供了音频/视频文件的持续时间，但不幸的是，存在运行时异常的问题，因此我整理出以下函数正常工作并返回音频或视频文件的确切持续时间。

```
public String getAudioFileLength(String path, boolean stringFormat) {
    StringBuilder stringBuilder = new StringBuilder();
    try {
        Uri uri = Uri.parse(path);
        MediaMetadataRetriever mmr = new MediaMetadataRetriever();
        mmr.setDataSource(HomeActivity.this, uri);
        String duration = mmr.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION);
        int millSecond = Integer.parseInt(duration);
        if (millSecond < 0) return String.valueOf(0); // if some error then we say duration is zero
        if (!stringFormat) return String.valueOf(millSecond);
        int hours, minutes, seconds = millSecond / 1000;
        hours = (seconds / 3600);
        minutes = (seconds / 60) % 60;
        seconds = seconds % 60;
        if (hours > 0 && hours < 10) stringBuilder.append("0").append(hours).append(":");
        else if (hours > 0) stringBuilder.append(hours).append(":");
        if (minutes < 10) stringBuilder.append("0").append(minutes).append(":");
        else stringBuilder.append(minutes).append(":");
        if (seconds < 10) stringBuilder.append("0").append(seconds);
        else stringBuilder.append(seconds);
    }catch (Exception e){
        e.printStackTrace();
    }
    return stringBuilder.toString();
} 
```

:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-06T09:57:48.910

## Kotlin 扩展解决方案

您可以添加它以可靠且安全地获取音频文件的持续时间。如果它不存在或有错误，您将返回 0。

```
myAudioFile.getMediaDuration(context)

/**
 * If file is a Video or Audio file, return the duration of the content in ms
 */
fun File.getMediaDuration(context: Context): Long {
    if (!exists()) return 0
    val retriever = MediaMetadataRetriever()
    return try {
        retriever.setDataSource(context, uri)
        val duration = retriever.extractMetadata(METADATA_KEY_DURATION)
        retriever.release()
        duration.toLongOrNull() ?: 0
    } catch (exception: Exception) {
        0
    }
} 
```

如果您经常使用 String 或 Uri 处理文件，我建议您也添加这些有用的助手

```
fun Uri.asFile(): File = File(toString())

fun String?.asUri(): Uri? {
    try {
        return Uri.parse(this)
    } catch (e: Exception) {
        Sentry.captureException(e)
    }
    return null
}

fun String.asFile() = File(this) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-15T07:45:48.917

如果音频来自 url，只需等待准备好的：

```
mediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
        @Override
        public void onPrepared(MediaPlayer mp) {
             length = mp.getDuration();
        }
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-08T12:58:29.447

你可以使用这个现成的方法，希望这对某人有帮助。

示例 1：`getAudioFileLength(address, true); // if you want in stringFormat` 示例 2：`getAudioFileLength(address, false); // if you want in milliseconds`

```
public String getAudioFileLength(String path, boolean stringFormat) {

            Uri uri = Uri.parse(path);
            MediaMetadataRetriever mmr = new MediaMetadataRetriever();
            mmr.setDataSource(Filter_Journals.this, uri);
            String duration = mmr.extractMetadata(MediaMetadataRetriever.METADATA_KEY_DURATION);
            int millSecond = Integer.parseInt(duration);

            if (millSecond < 0) return String.valueOf(0); // if some error then we say duration is zero

            if (!stringFormat) return String.valueOf(millSecond);

            int hours, minutes, seconds = millSecond / 1000;

            hours = (seconds / 3600);
            minutes = (seconds / 60) % 60;
            seconds = seconds % 60;

            StringBuilder stringBuilder = new StringBuilder();
            if (hours > 0 && hours < 10) stringBuilder.append("0").append(hours).append(":");
            else if (hours > 0) stringBuilder.append(hours).append(":");

            if (minutes < 10) stringBuilder.append("0").append(minutes).append(":");
            else stringBuilder.append(minutes).append(":");

            if (seconds < 10) stringBuilder.append("0").append(seconds);
            else stringBuilder.append(seconds);

            return stringBuilder.toString();
        } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-18T04:07:23.323

对我来说，AudioGraph 类来拯救：

```
public static async Task<double> AudioFileDuration(StorageFile file)
        {
            var result = await AudioGraph.CreateAsync(new AudioGraphSettings(Windows.Media.Render.AudioRenderCategory.Speech));
            if (result.Status == AudioGraphCreationStatus.Success)
            {
                AudioGraph audioGraph = result.Graph;
                var fileInputNodeResult = await audioGraph.CreateFileInputNodeAsync(file);
                return fileInputNodeResult.FileInputNode.Duration.TotalSeconds;
            }
            return -1;
        } 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-08-03T11:06:26.560

你看过[Ringdroid](http://code.google.com/p/ringdroid/)吗？它的重量很轻，集成很简单。它也适用于 VBR 媒体文件。

对于获取持续时间的问题，您可能需要使用 Ringdroid 执行以下操作。

```
public class AudioUtils
{
    public static long getDuration(CheapSoundFile cheapSoundFile)
    {
        if( cheapSoundFile == null)
            return -1;
        int sampleRate = cheapSoundFile.getSampleRate();
        int samplesPerFrame = cheapSoundFile.getSamplesPerFrame();
        int frames = cheapSoundFile.getNumFrames();
        cheapSoundFile = null;
        return 1000 * ( frames * samplesPerFrame) / sampleRate;
    }

    public static long getDuration(String mediaPath)
    {
        if( mediaPath != null && mediaPath.length() > 0)
            try 
            {
                return getDuration(CheapSoundFile.create(mediaPath, null));
            }catch (FileNotFoundException e){} 
            catch (IOException e){}
        return -1;
    }
} 
```

希望有帮助

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-03-13T19:29:40.633

编写文件后，在 MediaPlayer 中将其打开，然后对其调用 getDuration。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2018-04-16T23:45:39.950

很简单。使用`RandomAccessFile`下面是执行此操作的代码片段

```
 public static int getAudioInfo(File file) {
    try {
        byte header[] = new byte[12];
        RandomAccessFile randomAccessFile = new RandomAccessFile(file, "r");
        randomAccessFile.readFully(header, 0, 8);
        randomAccessFile.close();
        return (int) file.length() /1000;
    } catch (Exception e) {
        return 0;
    }
} 
```

当然，您可以根据您的需要更完整

# mysql - MySQL Spatial CONTAINS 显示错误结果

> ID：15394645
> 
> 赞同：5
> 
> 时间：2013-03-13T19:27:07.617
> 
> 标签：mysql, contains, point, spatial

我有一个奇怪的 MySQL 空间搜索行为。

我在 GEOM 字段（葡萄牙边界）中创建了一个多边形，然后我试图在里面找到一个点——发现它没问题。

**下一个尝试是找到一个多边形之外的点，但查询仍然返回 1 个找到的行。**

请帮忙，我做错了什么？为什么它会在多边形外找到一个点？

用于测试的 SQL 代码如下：

```
CREATE TABLE IF NOT EXISTS `test` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `bounds` geometry NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

INSERT INTO `test` (`id`, `bounds`) VALUES (null, GEOMFROMTEXT('POLYGON((-8.876953125 41.8695608269946,-8.7451171875 41.9839942709356,-8.63525390625 42.0656067540572,-8.162841796875 42.1389684045809,-8.0859375 42.0248136078178,-8.23974609375 41.8859210281474,-8.15185546875 41.8204550961403,-7.899169921875 41.918628865183,-7.40478515625 41.8204550961403,-7.174072265625 41.9104534766642,-7.130126953125 42.0003251483162,-6.52587890625 41.951319946797,-6.50390625 41.6811175629065,-6.15234375 41.590796851056,-6.427001953125 41.2695495028426,-6.646728515625 41.2282490151853,-6.85546875 41.0296433871664,-6.8115234375 40.3549167507906,-7.03125 40.2334119071151,-6.866455078125 40.0213046873971,-6.9927978515625 39.687110247163,-7.53936767578125 39.6125651748163,-7.34024047851563 39.4820504550432,-7.22969055175781 39.1871628720445,-6.96533203125 39.0618491342915,-7.064208984375 38.8824811975508,-7.27294921875 38.7198047426424,-7.31689453125 38.3890334067591,-7.0751953125 38.2295504553262,-6.92550659179688 38.223077534953,-6.98799133300781 37.9994092820024,-7.20428466796875 37.9831748335134,-7.5421142578125 37.5707052423312,-7.44873046875 37.1953305828007,-7.91015625 36.985003092856,-8.32763671875 37.1252862849668,-8.63525390625 37.1340453712645,-8.98681640625 37.0025526721596,-8.7945556640625 37.6098799437471,-8.89617919921875 37.9463634508748,-8.800048828125 38.2295504553262,-8.90167236328125 38.5116391414586,-9.2230224609375 38.4320766853821,-9.23675537109375 38.6705005336435,-9.5361328125 38.7112325389523,-9.349365234375 39.364032338048,-8.8330078125 40.1956590933647,-8.822021484375 40.5096228495967,-8.61328125 41.0710691308064,-8.843994140625 41.4303718826528,-8.876953125 41.8695608269946))')); 
```

[http://i.crisp-studio.cz/i/080e83c5bd3f3a27c3ecab9086a3.png](http://i.crisp-studio.cz/i/080e83c5bd3f3a27c3ecab9086a3.png)

里面：

```
SELECT *
FROM `test`
WHERE CONTAINS(`bounds`, geomfromtext('Point(-8.050232 39.882343)')) 
```

外部：

```
SELECT *
FROM `test`
WHERE CONTAINS(`bounds`, geomfromtext('Point(-6.663208 40.05495)')) 
```

[http://i.crisp-studio.cz/i/33b1115ef912647e82fead98abd1.png](http://i.crisp-studio.cz/i/33b1115ef912647e82fead98abd1.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T12:46:27.843

CONTAINS 函数不搜索精确的对象形状。它使用多边形周围的边界矩形。您可以尝试 ST_CONTAINS 函数，该函数可从 MySQL 5.6.1 获得

[测试几何之间空间关系的函数](http://dev.mysql.com/doc/refman/5.6/en/functions-for-testing-spatial-relations-between-geometric-objects.html#functions-that-test-spatial-relationships-between-geometries)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T22:02:49.633

好的，我已经确定 MYSQL 在 GEOMETRY 周围使用了边界框。

> MySQL Spatial 有一些实质性的缺点。从好的方面来说，它确实具有空间类型、功能和索引。它遵循几何表示的 OGC 规范。然而，MySQL 支持的功能数量非常少，因此很难将数据库用于比简单的按边界框存储和检索用例更复杂的事情。此外，因为空间选项是在（非事务）MyISAM 表类型中实现的，所以不可能在事务中使用空间对象。
> 
> [http://workshops.opengeo.org/postgis-spatialdbtips/introduction.html](http://workshops.opengeo.org/postgis-spatialdbtips/introduction.html)

这看起来像一个糟糕的笑话......

打算改用 PostgreSQL。

# objective-c - 在 Windows 下编译第一个 Obj-C 源

> ID：15394646
> 
> 赞同：0
> 
> 时间：2013-03-13T19:27:07.560
> 
> 标签：objective-c, mingw, gnustep

我第一次尝试编译 Windows 7 下的 Obj-C 源代码。我安装了 GNUstep，当我尝试编译一个简单的 hello world 文件时，它告诉我我之前安装了 MinGW 和 CodeBlocks fwiw ...

这是我从 GNUstep shell 得到的错误消息：

![截屏](../Images/b6f64d1d5d31183e125a3d9a44b59d19.png)

编辑：我试图添加这个 GNUmakefile

```
include $(GNUSTEP_MAKEFILES)/common.make

APP_NAME = PanelTest
PanelTest_OBJC_FILES = main.m

include $(GNUSTEP_MAKEFILES)/application.make 
```

但没有任何改变。

编辑 2：请参阅@crashmstr 回复以克服该问题。

现在当我编译它对我说

> 致命错误：Foundation/Foundation.h：没有此类文件或目录编译终止。

我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:44:11.577

`C:\`将您留在 cd 命令中，然后在下一行中添加`g++`以发送到`cd`命令。

注意`>`前面的`g++`而不是`$`，加上它说的事实`sh: cd: C:g++`

在 shell 中，您需要使用 Unix 风格`/`的路径并作为路径分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:32:35.233

你的路径设置正确吗？我在您的屏幕截图中看到的错误消息指的`g++`是未找到。

# php - mod_rewrite 覆盖第二个 RewriteRule

> ID：15394647
> 
> 赞同：0
> 
> 时间：2013-03-13T19:27:07.657
> 
> 标签：php, .htaccess, mod-rewrite

我遇到了一个 mod_rewrite 问题，我的 .htaccess 文件中的第二个规则覆盖了第一个。有问题的 .htaccess 文件如下所示：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /path/appname

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule /api/v1/(.*)$ api/v1/index.php?rquest=$1 [QSA,NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php
</IfModule> 
```

我看到的问题是这样的：

如果我直接访问[http://example.com/path/appname/api/v1/valid/endpoint](http://example.com/path/appname/api/v1/valid/endpoint)第一个 RewriteRule 会正确触发，我会从 API 中获取结果。

但是，假设我访问[http://example.com/path/appname/app](http://example.com/path/appname/app) - 一个已根据第二个 RewriteRule 重写的页面。此页面向 api/v1 页面发出 AJAX 请求。相反，这些请求通过第二个 RewriteRule 定向并发送到我的基本 index.php 页面。

我对这可能是怎么回事感到困惑，因为我的理解是 [L] 标志一旦匹配就会阻止任何进一步的规则运行，因此一旦任何包含“api/v1”的请求都应该捕获并停止检查对于任何进一步的比赛。我需要更改什么才能使其正常工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:02:10.857

您应该排除前一个规则集的段路径，因此不会再次处理它。像这样：

```
# Don't redirect/map when folders or files exist 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Exclude the previous path
RewriteCond %{REQUEST_URI} !api/v1/?   [NC]

# Prevent loops
RewriteCond %{REQUEST_URI} !index\.php [NC]

RewriteRule . index.php                [L]

</IfModule> 
```

用上面的行替换您问题中的最后 4 行。

# objective-c - 约束两个文本字段以保持纵横比

> ID：15394649
> 
> 赞同：0
> 
> 时间：2013-03-13T19:27:10.530
> 
> 标签：objective-c, cocoa, nstextfield

我有两个文本字段：一个用于宽度，一个用于高度。

假设起始值是 1080 x 720。如果用户将 720 更改为 360，我想自动将 1080 更改为 540。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:18:23.543

向您的 nib 添加一个数字格式化程序，并将其配置为将字段限制为整数值，并将您的控制器指定为两个文本字段的委托。

您还需要在显示视图时填写初始值并更新文本字段。此版本基于 NSPopoverDelegate，但您可以对其进行调整。

```
@property (assign) NSUInteger width;
@property (assign) NSUInteger height;

-(void)awakeFromNib {
    self.numberFormatter.minimumFractionDigits = 0;
    self.numberFormatter.maximumFractionDigits = 0;
}

-(void)popoverWillShow:(NSNotification *)notification {
    self.width = ___;
    self.height = ___;
    self.widthField.stringValue = @"";
    self.heightField.stringValue = @"";
}

-(void)controlTextDidChange:(NSNotification *)obj {
    NSTextField *sender = obj.object;
    NSTextView *textView = [obj.userInfo objectForKey:@"NSFieldEditor"];
    NSString *stringValue = textView.string;
    NSNumber *numberValue = [self.numberFormatter numberFromString:stringValue];
    if (!stringValue.length || !numberValue) {
        self.resizeButton.enabled = NO;
    } else {
        NSInteger integerValue =
        [[self.numberFormatter numberFromString:stringValue] integerValue];
        if (self.widthField == sender) {
            self.heightField.integerValue =
            self.height * integerValue / self.width;
        } else if (self.heightField == sender) {
            self.widthField.integerValue =
            self.width * integerValue / self.height;
        }
        self.resizeButton.enabled = YES;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:05:50.857

对于第一个问题，只需计算比率（除以另一个）：1080 是 720 的 1.5 倍，因此如果用户将 720 更改为 360，只需执行 360*1.5 即可获得值（反之亦然 540/1.5 以获得值如果用户更改了 1080，则为 720）。

没有嵌入式选项可以让 NSTextField 只取偶数。

# php - PHP/jQuery：检索新的可排序值

> ID：15394651
> 
> 赞同：1
> 
> 时间：2013-03-13T19:27:18.223
> 
> 标签：php, jquery, variables, echo, jquery-ui-sortable

我知道有很多关于如何从 JQuery 可排序函数中检索新值的指南。但它不像我想要的那样工作。需要在 PHP 变量中添加新值，以便我可以在屏幕上打印它或在按下按钮时更新我的​​ MySQL 数据库。我不想在两个单独的文件中工作。因此我使用了一个 POST 变量。

下面是我到目前为止提出的代码（将其保存到 PHP 文件）：

```
<?php

echo '
<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
<style>
  #sortable { list-style-type: none; margin: 0; padding: 0; width: 100%; }
  #sortable li { margin: 0 3px 3px 3px; padding: 0.4em; padding-left: 1.5em; font-size: 1.4em; height: 18px; }
  #sortable li span { position: absolute; margin-left: -1.3em; }
</style>
<script>
  $(function() {
    $( "#sortable" ).sortable();
    $( "#sortable" ).disableSelection();
  });
</script>
</head>
<body>

<ul id="sortable">';

$array = str_split("ABCDEFGHI", 3);

for($i = 0; $i < count($array); $i++) {
  echo '<li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>' . $array[$i] . '</li>';
}

echo '
</ul><br>

<form action="" method="post">
  <input type="submit" name="submit" value="Show order">
</form>

</body>
</html>';

if(isset($_POST['submit'])) {
  // How to print the new order value?
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:37:44.573

如果您使用隐藏的输入字段作为数组，那么当您提交表单时，您将拥有新排序的值：

为您`<li>`：

```
echo '<li class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>' . $array[$i] . '<input type="hidden" name="pos[]" value="'.$array[$i].'"></li>'; 
```

转储结果：

```
if(isset($_POST['submit'])) {
    foreach($_POST['pos'] as $value){
        echo $value.'<br>';
    }
    echo '<pre>',print_r($_POST['pos']),'</pre>';
} 
```

随着不断的`li`洗牌，`key`for`pos`总是会改变。提交后，他们将按照检索到的方式（从上到下）对自己进行排序。

# android - ClientService 的 Android 异步任务错误

> ID：15394653
> 
> 赞同：1
> 
> 时间：2013-03-13T19:27:24.660
> 
> 标签：android, web-services, android-asynctask

我正在创建一个运行 Windows 服务的简单系统，并带有一个用户表，并且我想通过向该服务发送一些东西来验证某人的登录凭据。我正在尝试发送他们的用户名和密码，但我的异步任务一直出错。我知道你不应该在里面乱用 UI 的东西，而我不是。最初我打电话给那里的另一个活动，但我评论了它。现在 doInBackground 中唯一的事情是如果验证良好，则将布尔值设置为 true。在异步执行后，我从那里读取值，然后将一个包放在一起移动到下一个地方。我只是不知道这里出了什么问题。自从我在 Android 中编程以来已经有一段时间了，所以也许我错过了一些愚蠢的东西。如果有人可以帮助我，我将不胜感激！谢谢你。这也可能是向服务发送信息的问题？

更新：在清单中添加互联网使用情况后，如果我的 doInBackground 中的程序中有 log.d，它会打印出来。如果我没有它，结果值将保持为假。看来我的服务和android应用程序之间的连接存在一些问题...

```
import java.util.ArrayList;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class LoginActivity extends Activity {
    private static final int DATA_FROM_MAIN_ACTIVITY = 1;
    private static final String SERVICEURL = "http://localhost:56638/ClientService.svc";
    private EditText userTextBox, passTextBox;
    private Button loginButton;
    private String uName, pass;
    private Boolean result = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);

        userTextBox = (EditText) findViewById(R.id.userTextBox);
        passTextBox = (EditText) findViewById(R.id.passTextBox);
        loginButton = (Button) findViewById(R.id.loginButton);

        loginButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                uName = userTextBox.getText().toString();
                pass = passTextBox.getText().toString();

                SendLoginMessage task = new SendLoginMessage();
                task.execute(uName, pass);

                if (result.equals(true)) {
                    Intent goToMainScreen = new Intent(getApplicationContext(),
                            MainActivity.class);
                    goToMainScreen.putExtra("username", uName);
                    goToMainScreen.putExtra("password", pass);

                    startActivityForResult(goToMainScreen,
                            DATA_FROM_MAIN_ACTIVITY);
                } else {
                    Toast.makeText(
                            getApplicationContext(),
                            "There was an issue with your username or password.",
                            Toast.LENGTH_LONG).show();
                }

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    private class SendLoginMessage extends AsyncTask<String, String, Void> {
        @Override
        protected void onPreExecute() {
            // Log.d("message almost at server, " + textFromArea, selected,
            // null);
        }

        @Override
        protected Void doInBackground(String... names) {
            ArrayList<NameValuePair> postParams = new ArrayList<NameValuePair>();
            postParams.add(new BasicNameValuePair("username", names[0]));
            postParams.add(new BasicNameValuePair("password", names[1]));

            String response = null;

            try {
                response = HttpClient.executeHttpPost(SERVICEURL, postParams);

                String newResponse = response.toString();
                newResponse = newResponse.replaceAll("\\s+", "");

                // if user was authenticated...
                if (newResponse.equals(true)) {
                    result = true;
                    // creating an intent to take user to next page.
                    // load their DB objects on the
                    // on create in other activity
                    // pass the username/password to next activity
                    // then make a request to the server for their database
                    // objects.
                    // Intent goToMainScreen = new
                    // Intent(getApplicationContext(), MainActivity.class);
                    // goToMainScreen.putExtra("username", names[0]);
                    // goToMainScreen.putExtra("password", names[1]);

                    // startActivityForResult(goToMainScreen,
                    // DATA_FROM_MAIN_ACTIVITY);
                }

            } catch (Exception e) {
                Log.d("ERROR", "exception in background");
            }

            return null;

        }

        @Override
        protected void onPostExecute(Void result) {

            // Toast.makeText(getApplicationContext(),
            // .show();

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:36:21.700

像这样做：

```
 private class SendLoginMessage extends AsyncTask<String, String, Boolean> {
    @Override
    protected Boolean doInBackground(String... names) {
        ArrayList<NameValuePair> postParams = new ArrayList<NameValuePair>();
        postParams.add(new BasicNameValuePair("username", names[0]));
        postParams.add(new BasicNameValuePair("password", names[1]));

        String response = null;

        try {
            response = HttpClient.executeHttpPost(SERVICEURL, postParams);

            String newResponse = response.toString();
            newResponse = newResponse.replaceAll("\\s+", "");

            // if user was authenticated...
            if (newResponse.equals("true")) {
                return true;
            }

        } catch (Exception e) {
            Log.d("ERROR", "exception in background");
        }

        return false;

    }

    @Override
    protected void onPostExecute(Boolean result) {
            if (result) {
                Intent goToMainScreen = new Intent(getApplicationContext(),
                        MainActivity.class);
                goToMainScreen.putExtra("username", uName);
                goToMainScreen.putExtra("password", pass);

                startActivityForResult(goToMainScreen,
                        DATA_FROM_MAIN_ACTIVITY);
            } else {
                Toast.makeText(
                        getApplicationContext(),
                        "There was an issue with your username or password.",
                        Toast.LENGTH_LONG).show();
            }
    }

} 
```

在你`onClick()`刚刚的电话中`execute()`

```
 uName = userTextBox.getText().toString();
 pass = passTextBox.getText().toString();

 SendLoginMessage task = new SendLoginMessage();
 task.execute(uName, pass); 
```

执行完成`onPostExecute()`后将被调用，您`Activity`将根据结果变量开始。

调用后不要检查结果变量，`execute()`因为`execute()`它是异步调用的。当您检查全局结果变量时，您`doInBackground()`可能还没有完成。使用我的方法，您不需要全局变量。请在使用任何组件之前仔细阅读文档。

# php - MySQL 性能同时访问表

> ID：15394654
> 
> 赞同：1
> 
> 时间：2013-03-13T19:27:24.620
> 
> 标签：php, mysql

以下代码是我真实代码的模型。调用 myFunction 时，我的性能受到很大影响。myTable 不超过几百行，但调用 myFunction 会增加约 10 秒的执行时间。尝试访问已经访问该表的循环内的表行是否存在固有问题？

```
<select>
<?php
  $stmt = SQLout ("SELECT ID,Title FROM myTable WHERE LEFT(Title,2) = ? ORDER BY Title DESC",
                   array ('s', $co), array (&$id, &$co_title));
  while ($stmt->fetch()) {
    if (myFunction($id))  // skip this function call and save 10 seconds
      echo '<option value="' . $co_title . '">' . $co_title . '</option>';
  }
  $stmt->close();

function myFunction ($id) {
  $stmt = SQLout ("SELECT Info FROM myTable WHERE ID = ?",
                   array ('i', $id), array (&$info));
  if ($stmt->fetch()) {
    $stmt->close();
    if ($info == $something)
      return true;
  }
  return false;
}
?> 
```

SQLout 基本上是：

```
$sqli_db->prepare($query);
$stmt->bind_param;
$stmt->execute();
$stmt->bind_result;
return $stmt; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:41:22.987

您正在做的事情有时被称为“N+1 查询”问题。您运行第一个（外部）查询 1 次，它返回 N 行。然后，您运行 N 个从属查询，第一个查询返回的每一行一个。因此 N+1 个查询。它会导致很多开销。

如果您可以在 SQL 中应用“某事”条件，这将具有更好的性能：

```
$stmt = SQLout ("SELECT ID,Title FROM myTable 
    WHERE LEFT(Title,2) = ? AND Info = ... ORDER BY Title DESC",
    array ('s', $co), array (&$id, &$co_title)); 
```

通常，在取决于有多少行与外部查询匹配的循环中运行查询并不是一个好主意。如果外部查询匹配 1000000 行怎么办？这意味着循环内的一百万个查询将针对这个单个 PHP 请求访问您的数据库。

即使今天外部查询只匹配 3 行，您以这种方式构建代码的事实意味着从现在起六个月后，在某个不可预测的时间，将会有一些搜索导致巨大的开销，即使您的代码不变。查询的数量是由数据驱动的，而不是代码。

有时有必要做你正在做的事情，例如“某事”条件很复杂，不能用 SQL 表达式表示。但是您应该尝试在所有其他情况下避免这种 N+1 查询模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:41:39.637

因此，如果表中有“几百行”，您可能会调用 myFunction 几百次，具体取决于第一个查询中返回的行数。

检查第一个查询返回的行数，以确保它符合您的期望。

之后，确保您在 myTable.ID 上有一个索引。

之后，我将开始研究系统/服务器级别的问题。在较慢的系统上，比如笔记本电脑硬盘，每秒 10 次查询可能是你所能得到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:49:20.157

尝试这样的事情：

```
 $stmt = SQLout ("SELECT ID,Title, Info FROM myTable WHERE LEFT(Title,2) = ? ORDER BY Title DESC",
                   array ('s', $co), array (&$id, &$co_title, &$info));
  while ($stmt->fetch()) {
    if (myFunction($info))  // skip this function call and save 10 seconds
      echo '<option value="' . $co_title . '">' . $co_title . '</option>';
  }
  $stmt->close();

function myFunction ($info) {
  if ($info == $something)
    return true;
  }
  return false;
} 
```

# c# - 阻止对数据库的访问

> ID：15394655
> 
> 赞同：0
> 
> 时间：2013-03-13T19:27:27.300
> 
> 标签：c#, sql-server-2008, sql-server-2008-r2

我有一个客户端应用程序，它处理给定数据库中的一个巨大的 1 个表，并将一些统计数据插入到另外 10 个表中。为了禁止其他应用程序使用数据库，我将其转换为单用户模式。一切正常，但只有 1 个连接需要很长时间来处理和插入所有数据。如果我在没有“单用户模式”的情况下使用多个线程和多个连接，则时间减少了大约 5 倍。问题是，是否有另一种方法可以阻止其他应用程序访问数据库，但允许同时使用来自我的应用程序的多个连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:03:45.230

使用登录触发器怎么样？使用允许登录的用户名创建一个表。如果用户不在表中，则将其回滚以使他们无法登录。

迈克尔·哈蒙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:34:52.440

您可以在客户端和数据库之间引入一层。

该层可以跟踪客户端并只允许一个访问数据库进行传输。

该层将是唯一允许直接访问数据库的进程。

# sql - 每小时价值总和

> ID：15394667
> 
> 赞同：2
> 
> 时间：2013-03-13T19:28:45.577
> 
> 标签：sql, sum

我有一个具有以下结构和示例数据的表：

```
STORE_ID |  INS_TIME  | TOTAL_AMOUNT
  2         07:46:01    20
  3         19:20:05    100
  4         12:40:21    87
  5         09:05:08    5
  6         11:30:00    12
  6         14:22:07    100 
```

我需要为每个 STORE_ID 获取每小时 TOTAL_AMOUNT 的总和。我尝试了以下查询，但我不知道它是否正确。

```
SELECT STORE_ID, SUM(TOTAL_AMOUNT) , HOUR(INS_TIME) as HOUR FROM VENDAS201302 
WHERE MINUTE(INS_TIME) <=59
GROUP BY HOUR,STORE_ID
ORDER BY INS_TIME; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:44:36.767

不知道你为什么不在这里考虑不同的日子。`Datepart()`您可以在 Sql-Server 中使用如下函数获得每小时总和：

[**演示**](http://sqlfiddle.com/#!3/41dd1/3)

```
SELECT STORE_ID, SUM(TOTAL_AMOUNT) HOURLY_SUM
FROM t1
GROUP BY STORE_ID, datepart(hour,convert(datetime,INS_TIME))
ORDER BY STORE_ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:32:43.110

```
SELECT STORE_ID,  
       HOUR(INS_TIME) as HOUR_OF_TIME,
       SUM(TOTAL_AMOUNT) as AMOUNT_SUM
FROM VENDAS201302 
GROUP BY STORE_ID, HOUR_OF_TIME
ORDER BY INS_TIME; 
```

# c# - 正则表达式查找以 @ 开头并以空格、=、; 结尾的任何字符串 或换行

> ID：15394669
> 
> 赞同：0
> 
> 时间：2013-03-13T19:28:51.187
> 
> 标签：c#, regex

这是我关于正则表达式的最后一个问题，希望在我的余生中。我想在满足上述要求的较大文本块中返回任何字符串。

以, ,或换行符开始`@`和结束。``;``=``\n``

 `我尝试了以下没有运气：

```
return @"(^@).*?(?=\s|;|\=|\r|\n)"; 
```

我的目的是尝试从一个看起来像这样的字符串中提取变量@tmp。（TSQL 语句），以便它可以在富文本框中突出显示。

```
declare @tmp varchar(25);
set @tmp='test';
select * from mytable where mycolumn = @tmp; 
```

我正在扩展现有编辑器的功能，但它缺少突出显示变量的功能。（仅关键字、注释、文字等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:52:12.087

遵循 SQL Server 变量的规则，这个正则表达式应该比上面的更好：

```
@[\w\d_@$]+ 
```

因为有*任意*数量的字符可以终止变量名，而不仅仅是您列出的那些。[因此，根据http://msdn.microsoft.com/en-us/library/aa223962(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa223962(v=sql.80).aspx)，这个表达式将寻找任何有效的东西

编辑：对不起，忘记了那里的“\ d”。毕竟数字也是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:45:08.887

尝试这样的事情：

```
(@.+?)[ |=|;|\n] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T19:30:35.777

这应该可以解决问题`@[^\s=;\n]+(?=[\s=;\n])`

这是与您的测试字符串匹配的模式示例：[http ://regexr.com?3445h](http://regexr.com?3445h)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-13T19:31:30.637

你想要的正则表达式是：

```
new Regex(@"@.*?[ ;=\n]"); 
````

# android - PDF上的“另存为”按钮，在android中

> ID：15394671
> 
> 赞同：1
> 
> 时间：2013-03-13T19:28:54.663
> 
> 标签：android, acrobat

我创建了一个在 Android 中打开 PDF 的小应用程序。PDf 有一个“另存为”按钮，这是我使用 acrobat 中的向导创建的。该按钮可在 PC 上使用，但在我在 Android 中打开 PDF 时未激活。Mailto 按钮工作得很好。我的问题是是否有地方或方法可以在 PDF 本身中为 Saveas 编写一个 android 命令脚本。可以将“提交”按钮更改为发送到外部存储中的文件吗？

谢谢， MAxxDAddy

# ios - 在不使用 CoreAnimation 的情况下为 UIView 设置动画

> ID：15394672
> 
> 赞同：0
> 
> 时间：2013-03-13T19:28:55.847
> 
> 标签：ios, objective-c, uiview, core-animation

我正在尝试在屏幕上移动 UIVIew。我不想使用 CoreAnimation，因为我需要能够实时改变视图的速度。

目前我有以下层次结构：

```
UIView
-- UIView (subview) 
```

我正在对父视图进行子类化并添加更新方法。

```
-(void) update: (float) dt {

    float newX = _subView.transform.tx + dt * dxdt;

    [_subView setTransform: CGAffineTransformMakeTranslation(newX, 0)];
} 
```

每帧都会调用更新方法，我希望这会导致子视图被动画化。

不幸的是它不动。我试过了：

```
[_subView setNeedsDisplay] 
```

但它仍然不起作用。必须有一些我缺少的东西来强制重新绘制视图。

# javascript - 如何在javascript中制作幻灯片

> ID：15394675
> 
> 赞同：-2
> 
> 时间：2013-03-13T19:29:01.327
> 
> 标签：javascript, jquery, slideshow

我试图用这些图像制作幻灯片：每当我尝试这个时，它都会卡在第一张图像上。

```
<div id="slideshow">
    <a href="../images/food/e_chicken_quesa.jpg" target="_blank"><img class="show" src="../images/food/chicken_quesa.jpg" alt="Chicken Quesadilla" title="Chicken Quesadilla"></a>
    <a href="../images/food/e_steak.jpg" target="_blank"><img src="../images/food/steak.jpg" alt="Beef Tenderloin" title="Beef Tenderloin"></a>
    <a href="../images/food/e_pasta_display.jpg" target="_blank"><img src="../images/food/pasta_display.jpg" alt="Pasta Station" title="Pasta Station"></a>
    <a href="../images/food/e_salmon.jpg" target="_blank"><img src="../images/food/salmon.jpg" alt="Salmon Filet" title="Salmon Filet"></a>
    <a href="../images/food/e_panacotta.jpg" target="_blank"><img src="../images/food/panacotta.jpg" alt="Panacotta" title="Panacotta"></a>
    <a href="../images/food/e_beet_salad.jpg" target="_blank"><img src="../images/food/beet_salad.jpg" alt="Beet Salad" title="Beet Salad"></a>
    <a href="../images/food/e_tuna.jpg" target="_blank"><img src="../images/food/tuna.jpg" alt="Seared Tuna" title="Seared Tuna"></a>
    <a href="../images/food/e_foi_gras.jpg" target="_blank"><img src="../images/food/foi_gras.jpg" alt="Foi Gras" title="Foi Gras"></a>
</div> 
```

我不确定代码的哪一部分搞砸了，但就是这样。Javascript：

```
<script type="text/javascript">     
        var hovering = false;
        var slideshow = $("#slideshow");

        slideshow.mouseenter(function() {
            hovering = true;
        }).mouseleave(function() {
            hovering = false;
            slideShow();
        });
        function slideShow() {
            if (!hovering) {
                var currentImg = (slideshow.children("img:visible").length) ? slideshow.children("img:visible") : slideshow.children("img:first");
                var nextImg = (currentImg.next().length) ? currentImg.next() : slideshow.children("img:first");

                currentImg.delay(1000).fadeOut(500, function() {
                    nextImg.fadeIn(500, function() {
                        setTimeout(slideShow, 1000);
                    });
                });
            }
        }
        $(document).ready(function() {
            slideShow();
        });
        </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:31:20.510

使用cycle.js [http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

```
$('#slideshow').cycle(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:38:40.260

Jquery 中有许多精美的轻量级图像幻灯片插件。检查
[http://wowslider.com/rq/jquery-images-slider/](http://wowslider.com/rq/jquery-images-slider/)
[http://www.dreamcss.com/2009/04/create-beautiful-jquery-sliders.html](http://www.dreamcss.com/2009/04/create-beautiful-jquery-sliders.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:32:19.987

```
<html>
<head>

<!-- You can load the jQuery library from the Google Content Network.
Probably better than from your own server. -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

<!-- Load the CloudCarousel JavaScript file -->
<script type="text/JavaScript" src="cloud-carousel.1.0.5.js"></script>

<script>
$(document).ready(function(){

    // This initialises carousels on the container elements specified, in this case, carousel1.
    $("#carousel1").CloudCarousel(      
        {           
            xPos: 128,
            yPos: 32,
            buttonLeft: $("#left-but"),
            buttonRight: $("#right-but"),
            altBox: $("#alt-text"),
            titleBox: $("#title-text")
        }
    );
});

</script>

</head>
    <body>
        <!-- This is the container for the carousel. -->
        <div id = "carousel1" style="width:1000px; height:700px;background:#000;overflow:scroll;">            
            <!-- All images with class of "cloudcarousel" will be turned into carousel items -->
            <!-- You can place links around these images -->
            <img class = "cloudcarousel" src="images/Chrysanthemum.jpg" alt="Flag 1 Description" title="Flag 1 Title" />
            <img class = "cloudcarousel" src="images/Desert.jpg" alt="Flag 2 Description" title="Flag 2 Title" />
            <img class = "cloudcarousel" src="images/Hydrangeas.jpg" alt="Flag 3 Description" title="Flag 3 Title" />
            <img class = "cloudcarousel" src="images/Koala.jpg" alt="Flag 4 Description" title="Flag 4 Title" />
        </div>

        <!-- Define left and right buttons. -->
        <input id="left-but"  type="button" value="Left" />
        <input id="right-but" type="button" value="Right" />

        <!-- Define elements to accept the alt and title text from the images. -->
        <p id="title-text"></p>
        <p id="alt-text"></p>
    </body>
</html> 
```

# php - 从数组/PHP 中获取嵌套/分层 JSON

> ID：15394681
> 
> 赞同：0
> 
> 时间：2013-03-13T19:29:12.180
> 
> 标签：php, arrays, json

我有一个功能：

```
function getROLES() {
    $sql = "
SELECT wur.role_id, wur.user_id, wu.first_name, wu.last_name
FROM user_roles wur LEFT JOIN users wu ON wur.user_id = wu.user_id
WHERE wur.role_id IN (100,101)
    ";
    try {
        $db = getConnection();
        $stmt = $db->query($sql);  
        $roles = $stmt->fetchAll(PDO::FETCH_ASSOC);
        $db = null;
        echo json_encode($roles);
    } catch(PDOException $e) {
        echo '{"error":{"text":'. $e->getMessage() .'}}'; 
    }
} 
```

这个函数的输出是一个数组和 JSON

大批：

```
Array ( 
    [0] => Array 
        ( [role_id] => 100 [user_id] => 1 [first_name] => Al [last_name] => Pacino ) 
    [1] => Array 
        ( [role_id] => 100 [user_id] => 5 [first_name] => Brad [last_name] => Pitt ) 
    [2] => Array 
        ( [role_id] => 101 [user_id] => 12 [first_name] => Pierce [last_name] => Brosnan ) 
    [3] => Array 
        ( [role_id] => 101 [user_id] => 10 [first_name] => Johnny [last_name] => Deep ) 
    [4] => Array 
        ( [role_id] => 101 [user_id] => 11 [first_name] => Tom [last_name] => Hanks ) 
) 1 
```

JSON：

```
[
    {"role_id":100,"user_id":1,"first_name":"Al","last_name":"Pacino"},
    {"role_id":100,"user_id":5,"first_name":"Brad","last_name":"Pitt"},
    {"role_id":101,"user_id":12,"first_name":"Pierce","last_name":"Brosnan"},
    {"role_id":101,"user_id":10,"first_name":"Johnny","last_name":"Deep"},
    {"role_id":101,"user_id":11,"first_name":"Tom","last_name":"Hanks"}
] 
```

问题是：如何识别组中所有用户属于每个role_id。如何转换或更改输出 JSON 上的代码，如下所示：

```
[
    {"role_id":100, "childrens":
        [
            {"user_id":1,"first_name":"Al","last_name":"Pacino"},
            {"user_id":5,"first_name":"Brad","last_name":"Pitt"}
        ],
    {"role_id":101, "childrens":    
        [
            {"user_id":12,"first_name":"Pierce","last_name":"Brosnan"},
            {"user_id":10,"first_name":"Johnny","last_name":"Deep"},
            {"user_id":11,"first_name":"Tom","last_name":"Hanks"}
        ]
] 
```

提前感谢您的帮助。

请注意，我使用的是 Postgresql 9.1.8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:38:18.407

好吧，有些人首先想到的是 jsut 循环遍历数据集并创建所需的结构：

```
$jsonRoles = array();

foreach($roles as $role) {
   $id = $role['role_id'];
   if(!isset($jsonRoles[$id])) {
      $jsonRoles[$id] = array(
          'role_id' => $id,
          'childrens' => array()
      );
   }
   unset($role['role_id']);
   $jsonRoles[$id]['childrens'][] = $role;
}

// then to get a regular array use array values:
echo json_encode(array_values($jsonRoles)); 
```

# ruby - 在 Windows 7 上的 ruby 中运行 Windows 服务

> ID：15394683
> 
> 赞同：0
> 
> 时间：2013-03-13T19:29:25.080
> 
> 标签：ruby, windows-services

我正在使用这个 gem：win32-service (0.7.2 x86-mingw32)

gem 在示例目录中有一个 demo_daemon.rb 和一个 demo_daemon_ctl.rb。我尝试使用 ruby​​ 1.8.7 和 1.9.3 将示例作为服务运行，但出现以下错误。守护进程尝试写入日志文件，但它永远不会到达写入日志文件的位置。即使我在脚本启动时写入日志，也不会写入任何内容。

我的机器是64位的。

关于我可以尝试什么或可能是什么问题的任何想法？

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/win32-service-0.7.2-x86-mingw32/lib/win32/se
rvice.rb:760:in `start': The service did not respond to the start or control req
uest in a timely fashion. (Win32::Service::Error)
        from demo_daemon_ctl.rb:75:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-07T04:51:05.233

我认为您需要使用服务包装器，例如 srvany 。这是[微软的指南](http://support.microsoft.com/kb/137890)。在“应用程序”参数中使用 ruby​​ 和脚本的完整路径。如果在 64 位系统下出现问题，只需将 srvany.exe 放在 windows/system32 和 windows/sysWow64 文件夹中即可。

# javascript - 在 processing.js 示例中更新第二个轨道体的问题

> ID：15394685
> 
> 赞同：0
> 
> 时间：2013-03-13T19:29:30.373
> 
> 标签：javascript, physics, processing, processing.js

我在 gamedev.stackexchange 上获得了一个 processing.js 示例，说明如何让一个对象围绕另一个对象[运行](https://gamedev.stackexchange.com/questions/50635/revolve-flxsprites-around-a-central-flxsprite-in-flash-game-made-with-flixel)。

本质上，在示例中，原点或中心与轨道点的坐标一起建立：

```
// Logic vars
PVector origin;
float orbitRadius = 75.0;
PVector orbitVelocity;
PVector orbitPoint;
float t = 0.0;
float fps = 60.0;
float constDT = 1 / fps; 
```

然后，它们在设置中初始化：

```
void setup() {
    size(400, 400);
    frameRate(fps);

    /*central point */
    origin = new PVector(width / 2.0, height / 2.0);

    /*first point and velocity of orb around center*/
    orbitVelocity = new PVector(0.0, /*-orbitRadius*/orbitRadius);
    orbitPoint = new PVector(origin.x + orbitRadius, origin.y);
} 
```

然后每个时间步更新轨道点的坐标：

```
void update(float dt) {

    /*update orbit of first orb using velocity*/
    PVector accelerationTowardsOrigin = PVector.sub(origin, orbitPoint);
    orbitVelocity.add(PVector.mult(accelerationTowardsOrigin, /*dt*/constDT));
    orbitPoint.add(PVector.mult(orbitVelocity, /*dt*/constDT));

} 
```

（我省略了绘图代码，因为它不相关。）我一直在尝试更新代码以添加额外的轨道椭圆，可以在[这里](http://jsfiddle.net/XhPzL/28/)看到。通过添加这些附加变量，我已经能够成功地沿围绕中心点的轨道添加第二个点

```
/*Logic vars for second point on circle*/
PVector orbitPoint2;
PVector orbitVelocity2;
float circAngle;
float xcoord_along_circle;
float ycoord_along_circle; 
```

并将其添加到设置中：

```
 //Added in setup
    /*second orbiting point for second orb*/
    /*Calculate second point along circle*/
    circAngle = 90.0;
    xcoord_along_circle = orbitRadius * cos(circAngle) + origin.x;
    ycoord_along_circle = orbitRadius * sin(circAngle) + origin.y;

    /*second point and velocity of orb around center*/
    orbitVelocity2 = new PVector(xcoord_along_circle,orbitRadius);
    orbitPoint2 = new PVector(xcoord_along_circle, ycoord_along_circle); 
```

然而，当我更新第二个椭圆每个点的坐标时，它会导致一个延伸的、拉长的轨道：

```
 /*update orbit of second orb using velocity*/
    PVector accelerationTowardsOrigin2 = PVector.sub(origin,orbitPoint2);
    orbitVelocity2.add(PVector.mult(accelerationTowardsOrigin2,/*dt*/constDT));
    orbitPoint2.add(PVector.mult(orbitVelocity2, /*dt*/constDT)); 
```

我相信我做的一切都是正确的，并复制了必要的步骤。我怎样才能纠正这个问题，这样轨道才不会扭曲？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:24:32.263

此时，您正在到处复制代码，而不是通过在一个可以简单构建一百万次的类中捕获轨道体来模块化您的代码。我建议首先将您的代码重写为类似

```
class OrbitalBody {
    float ox, oy, x, y, m, a;
    OrbitalBody(float originX, float originY, float startX, float startY, float mass, float speed) {
      ox = originX;
      oy = originY;
      x = startX;
      y = startY;
      m = mass;
      a = speed / 200;
    }
    void update() {
      float nx = (x-ox) * cos(a) - (y-oy) * sin(a),
            ny = (x-ox) * sin(a) + (y-oy) * cos(a);
      x = nx+ox;
      y = ny+oy;
    }
    void draw() {
      fill(255);
      ellipse(x,y,m,m);
    }
}

ArrayList<OrbitalBody> bodies = new ArrayList<OrbitalBody>();
int mx, my;

void setup() {
    size(420, 420);
    mx = width/2;
    my = height/2;
    bodies.add(new OrbitalBody(mx, my, mx-50, my, 10, 10));
    bodies.add(new OrbitalBody(mx, my, mx-100, my, 20, 3));
    bodies.add(new OrbitalBody(mx, my, mx-120, my, 5, 13));
    bodies.add(new OrbitalBody(mx, my, mx-170, my, 15, 6));
    bodies.add(new OrbitalBody(mx, my, mx-190, my, 10, 9));
    ellipseMode(CENTER);
}

void draw() {
    background(0);
    fill(100,100,0);
    ellipse(mx,my,50,50);
    for(OrbitalBody b: bodies) {
        b.update();
        b.draw();
    }
} 
```

演示者：http: [//jsfiddle.net/XhPzL/34](http://jsfiddle.net/XhPzL/34)

# java - Java和Regex，获取匹配的子字符串

> ID：15394686
> 
> 赞同：0
> 
> 时间：2013-03-13T19:29:31.927
> 
> 标签：java, regex, pattern-matching

我想匹配以下模式：

```
[0-9]*-[0-9]*-[BL] 
```

并将模式应用于此字符串：

```
123-456-L-234 
```

这应该成为

```
123-456-L. 
```

这是我的代码：

```
HelperRegex{
..
final static Pattern KEY = Pattern.compile("\\d*-\\d*-[BL]");

    public static String matchKey(String key) {
        return KEY.matcher(key).toMatchResult().group(0);
    } 
```

六月：

```
@Test
public final void testMatchKey() {
    Assert.assertEquals("453-04430-B", HelperRegex.matchKey("453-04430-B-1"));
} 
```

抛出未找到匹配异常。

我已经用“正则表达式教练”证明了我的正则表达式，它似乎没有损坏，并且匹配所有测试字符串

![在此处输入图像描述](../Images/bd5fae4a9f014655c9d315264b644819.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:47:19.807

别介意所有的复杂性。你只需要一行：

```
String match = input.replaceAll(".*?([0-9]*-[0-9]*-[BL])?.*", "$1"); 
```

如果找不到模式，这将产生一个空白字符串。

如果是我，我会使用这个，甚至没有单独的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:33:56.477

您需要创建要检索的组，`()`并确保您的正则表达式与整个字符串匹配（请注意，组 0 是整个字符串，所以您想要的是组 1）：

```
String key = "453-04430-B-1";
Pattern pattern = Pattern.compile("(\\d*-\\d*-[BL]).*");
Matcher m = pattern.matcher(key);
if (m.matches())
    System.out.println(m.group(1)); //prints 453-04430-B 
```

# linux - neo4j 无法在 linux 节点上启动

> ID：15394696
> 
> 赞同：0
> 
> 时间：2013-03-13T19:29:49.057
> 
> 标签：linux, neo4j

将安装文件带到我的 linux 服务器。但是当我去运行它时，我得到了一些奇怪的错误

```
[user@server neo4j-community-1.9.M04]$ sudo ./bin/neo4j start
./bin/neo4j: line 54: cd: /home/afrieden/neo4j-community-1.9.M04: Permission denied
./bin/neo4j: line 70: bin/utils: No such file or directory
./bin/neo4j: line 65: getconfig: command not found
./bin/neo4j: line 66: getconfig: command not found
./bin/neo4j: line 151: detectos: command not found
./bin/neo4j: line 152: exitonnojava: command not found
./bin/neo4j: line 153: checkstatus: command not found
./bin/neo4j: line 154: checklimits: command not found
./bin/neo4j: line 156: checkjvmcompatibility: command not found
Another server-process is running with [4523], cannot start a new one. Exiting. 
```

这个还是要学很多。任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:41:49.170

看起来你不拥有`/home/afrieden/neo4j-community-1.9.M04`。尝试更改所有权：

```
sudo chown -R afrieden:users /home/afrieden/neo4j-community-1.9.M04 
```

# combobox - GXT 组合框触发器在 IE-8 中未触发

> ID：15394702
> 
> 赞同：0
> 
> 时间：2013-03-13T19:29:58.893
> 
> 标签：combobox, gxt

我遇到了组合框/简单组合框触发字段在 IE-8 中的第一次触发单击时未加载存储数据的问题。需要再次单击以填充下拉列表。Firefox 没有这个问题并且可以按需要工作（在第一次点击时加载数据）。任何人都知道这个问题或如何解决它？

`SimpleComboBox<String> stateComboBox = new SimpleComboBox<String>()` `stateComboBox.setEmptyText("Select"); stateComboBox.setTypeAhead(true); stateComboBox.setId("state"); stateComboBox.setItemId("state"); stateComboBox.setForceSelection(true); stateComboBox.setWidth(65); stateComboBox.setAllowBlank(false); stateComboBox.setTriggerAction(TriggerAction.ALL); stateComboBox.setQueryDelay(0);`

# javascript - JavaScript 音频的未来？

> ID：15394704
> 
> 赞同：5
> 
> 时间：2013-03-13T19:30:01.193
> 
> 标签：javascript, html, audio, html5-audio, web-audio-api

我正在教孩子们如何将音频添加到他们的 JavaScript 游戏和网页中。我知道 HTML5 音频 API，现在正在了解各种浏览器的问题（令人惊讶的是，IE 根本不支持 WAV，等等）。

然而，显然有一个我不知道的新[网络音频标准。](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html)Chrome 完全支持它。Mozilla[声明以下关于 Web Audio](https://wiki.mozilla.org/Web_Audio_API)和 Firefox 的内容：

> Firefox 当前支持不兼容的、Mozilla 特定的音频数据 API，但它被标记为“已弃用”以支持 W3C 标准。工作已开始在 Firefox 中支持新的 Web 音频 API。

caniuse.com 报告以下有关[对 Web Audio API](http://caniuse.com/audio-api)的支持。

我完全不介意强迫孩子们使用谷歌浏览器进行开发，而且听起来在许多其他浏览器中都不起作用。但是，我不想教他们将来不会出现在其他浏览器中的东西。

我还在阅读有关称为 MediaStreaming 的 Web 音频的可能替代方案……我应该教授哪个未来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T20:04:22.107

严格来说，真的没有 HTML5 Audio API。但是 HTML5 确实引入了`<audio/>`元素，这对于简单的用例来说非常有用。

如果您需要高精度计时或执行 DSP 的能力——我会选择 Web Audio API。就 W3C 而言，它仍然是一个草案，但似乎很清楚这是他们前进的方向：[http ://www.w3.org/2011/audio/wiki/PubStatus](http://www.w3.org/2011/audio/wiki/PubStatus)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T00:40:19.037

没有保证网络音频 API 将在所有浏览器中使用，但它可以在 Chrome、Safari 和 Firefox 中使用。Opera 刚刚将其引擎更改为 webkit，这是当前一批支持 Web Audio API 的浏览器所使用的引擎。Internet Explorer 完全悬而未决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T15:58:35.983

我在某处读到微软也在参与网络音频 api 和其他

此外，某些功能（例如捕获音频）仅受金丝雀支持，或者最近发生了变化？标准 chrome 网络浏览器何时支持整个 API？我在使用音频 API 时遇到的另一个问题是，当您必须像 Kevin Ennis 提到的那样对 DSP 进行一些计算时，javascript 会出现问题，并且您的浏览器会崩溃。我试图弄清楚它为什么会崩溃，但我能找到的只是 javascript 不是繁重计算的正确选择。因此，就支持 DSP 的网络音频 API 而言，我不相信。

我认为这仍然需要很多时间，因为您可以创建一个使用网络音频 API 的网站，并且将在许多浏览器中得到支持，并且不会随机崩溃。但目前没有真正的其他选择，所以在未来我猜测越来越多的浏览器将开始支持它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-25T18:42:01.700

如果您只需要播放音频文件，我强烈建议您使用 howler.js。它没有很多功能，但非常可靠，并且在浏览器中运行良好。

Web Audio API 绝对是网络音频的“未来”，但它可能非常复杂，尤其是如果你想教孩子们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-01T17:37:16.973

如果您希望游戏只能在现代浏览器中运行，您可以查看音频库[musquito](https://github.com/VJAI/musquito)。它相对较新，完全基于 Web Audio API。

[musquito](https://github.com/VJAI/musquito)还支持对游戏有很大帮助的音频精灵。

如果您正在为旧版浏览器寻找回退机制，那么 howler.js 是一个不错的选择。

[免责声明：我是musquito的创造者]

# java - 将套接字与 RMI 一起使用

> ID：15394705
> 
> 赞同：0
> 
> 时间：2013-03-13T19:30:04.760
> 
> 标签：java, sockets, rmi

我已经实现了一个 RMI 解决方案，我的客户端程序可以从服务器程序中的数据库池中获取数据源对象。两者都在本地主机上运行（我仍然是新手；））

但后来我查看了 SO 中的一篇文章，其中提到了先包装一个套接字，然后使用 RMI 访问远程访问对象。

[Java RMI 在租约到期后不关闭套接字](https://stackoverflow.com/q/227276/547453)

我还读到 RMI 在内部也使用套接字。

我的问题是，如果我必须在 Socket 实例上创建一个包装器然后使用 RMI，我是否应该自己创建 Sockets（服务器和客户端套接字）然后使用 RMI....如果是...那么该怎么做呢？我已经学会了创建套接字和 RMI，但没有将它们一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:32:04.363

Unless you plan to write and control the protocol for communication between client and server, stick to using an RMI client to interrogate a server and use the RMI server to respond.

Also, a `DataSource` instance is not something you should serialise and distribute to clients. Typically I would expect that when the client makes requests for data, that the server would use the data source to access data on behalf of the client, then marshall the results and send them back to the client.

# android - 带有 ListView 的 Android 视图不会增长

> ID：15394706
> 
> 赞同：0
> 
> 时间：2013-03-13T19:30:06.597
> 
> 标签：android, xamarin.android

我有一个 LinearLayout，我用自定义视图（伪代码）动态填充：

```
<LinearLayout> 
```

自定义视图只是这样的 LinearLayout（伪代码）：

```
<LinearLayout>
  <TextView>
  <ListView width="match_parent" height="match_parent">
</LinearLayout> 
```

当父显示时，它只显示每个自定义视图的 TextView 和 ListView 的第一行。我可以做些什么来使自定义视图扩展以显示 ListView 中的所有项目？

（值得注意的是，我计划让每个自定义视图都像手风琴一样......可扩展/可折叠）

![在此处输入图像描述](../Images/f5436b84809438a05ebf50cfeec94049.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T00:53:02.700

我最终使用了 Android.Animation 命名空间/包，并使用 ValueAnimator 为我正在寻找的展开/折叠行为设置动画：

```
 ValueAnimator animator = null;
    if (expanded) {
        handle.SetImageResource(Android.Resource.Drawable.ArrowDownFloat);
        animator = ValueAnimator.OfObject (new HeightEvaluator (listView), height, 0);
    } else {
        handle.SetImageResource(Android.Resource.Drawable.ArrowUpFloat);
        animator = ValueAnimator.OfObject (new HeightEvaluator (listView), 0, height);
    }

    animator.SetDuration(500);
    animator.SetInterpolator(new AccelerateInterpolator (1));
    animator.Start ();

    expanded = !expanded; 
```

# ruby - Ruby/Tk 窗格窗口“定向”选项不适用于水平值

> ID：15394711
> 
> 赞同：1
> 
> 时间：2013-03-13T19:30:28.250
> 
> 标签：ruby, tk

尝试在 Ruby/Tk 中添加一个窗格窗口，我收到以下错误：

```
C:/Users/user/Ruby193/lib/ruby/1.9.1/tk.rb:3016:in `_invoke': Attempt to change read-only option (RuntimeError) 
```

每当我将 orient 选项添加到我的代码中时，如下所示：

```
p = Tk::Tile::Paned.new(parent) { orient 'horizontal' } 
```

出于某种原因，“orient”似乎是只读的（默认为“vertical”）？我注意到网上有一个 ruby​​/tk 教程，其中有一个 Paned 窗口示例，它避免使用 orient 选项，可能是因为它们遇到了同样的错误？

如果您将以下教程代码粘贴到 .rb 文件中并运行它（无 orient 选项），它可以工作。添加类似于上面的 orient 选项，它会失败。

```
require 'tk'
require 'tkextlib/tile'

$resultsVar = TkVariable.new
root = TkRoot.new
root.title = "Window"

p = Tk::Tile::Paned.new(root)do
  height 110
  place('height' => 100, 'width' => 200, 'x' => 10, 'y' => 10)
  #orient 'horizontal' # <== uncomment this line to see error
end

f1 = TkFrame.new(p) {
  relief 'groove'
  borderwidth 3
  background "red"
  padx 30
  pady 30
  pack('side' => 'left', 'pady' => 100)
}
f2 = TkFrame.new (p){
  relief 'groove'
  borderwidth 3
  background "yellow"
  padx 30
  pady 30
  pack('side' => 'right', 'pady' => 100)
}

p.add f1 #, nil <== had to remove nil option here because this also caused an error
p.add f2 #, nil

Tk.mainloop 
```

有没有其他人能够让“东方”选项起作用？我需要它是水平的，而不是默认的垂直值。我尝试查看 tk.rb 并跟踪错误跟踪，它似乎表明存在“method_missing”问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:08:56.903

我认为问题在于属性“orient”可以设置但不能更改。如果您在创建时传递选项，则可以创建 PanedWindow 'horizo​​ntal'。喜欢

`p = Tk::Tile::Paned.new(root, 'orient' => 'horizontal' )`

忘记'method_missing'调用。是动态创建小部件属性的技巧。

# c# - TryParse 因参数的货币字符串类型而失败

> ID：15394719
> 
> 赞同：6
> 
> 时间：2013-03-13T19:30:40.077
> 
> 标签：c#, winforms

我的表单有一个包含数量数字的文本框。然后在 textchanged 事件中，该数字被放置在带有货币值的标签的文本属性中（例如：4.00 美元）。在我的按钮单击事件中，我试图添加标签中的所有值。使用以下代码时，tryparse 每次都失败

```
int num1;
string text = lbl85x11bwsub.Text;
if (int.TryParse(text, out num1)) 
{
     MessageBox.Show(num1.ToString()); //testing
}
else
{
      MessageBox.Show("it failed");
} 
```

但是如果我使用文本框的 text 属性尝试同样的事情，它就可以工作。

```
int num2;
if (int.TryParse(txt85x11bw.Text, out num2)) 
{
     MessageBox.Show(num2.ToString());
}
else
{
      MessageBox.Show("it failed");
 } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-01-28T18:57:12.957

@Frederik Gheysels give you almost complete answer on your question except one tiny thing. In this case you should use NumberStyles.Currency because your number can be not only not integer, but also contain thousand and decimal separators. While NumberStyles.AllowCurrencySymbol will only care about currency sign. On the other hand NumberStyles.Currency [is a composite number style.](https://msdn.microsoft.com/en-us/library/system.globalization.numberstyles(v=vs.110).aspx) Which can allow almost all the other separators.

So, this expression, probably, will works:

```
Decimal.TryParse(text, 
    NumberStyles.Currency, 
    CultureInfo.CurrentCulture, 
    out result); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-13T19:34:01.453

尝试

```
Decimal.TryParse(text, 
    NumberStyles.Currency, 
    CultureInfo.CurrentCulture, 
    out result); 
```

反而。您要解析的数字是：

*   不是整数
*   包含货币符号

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-03T05:56:28.190

Use `NumberStyles.Currency` instead of `NumberStyles.AllowCurrencySymbol`

See [How to parse string to decimal with currency symbol?](https://stackoverflow.com/questions/13878464/how-to-parse-string-to-decimal-with-currency-symbol)

# java - 多维数组或多维数组列表

> ID：15394722
> 
> 赞同：0
> 
> 时间：2013-03-13T19:30:53.157
> 
> 标签：java

我的代码中有一个问题，我需要将四个双打与其他四个双打进行比较。我尝试为此创建一个四维数组：

```
double[][][][] myArray = new double[][][][] {{{{1.1}, {1.2}, {1.3},{1.4}}}}; 
```

但问题是我不知道数组的大小，我需要能够动态地向它添加元素。我不熟悉数组列表，但我想知道这是否是解决方案？你能有多维数组列表吗？

编辑以更好地解释问题：

我有四个双打的原因是他们存储有关旅程的位置。

```
Double 1 = lattitude of start location. 
Double 2 = longitude of start location.
Double 3 = lattitude of end location. 
Double 4 = longitude of end location. 
```

因此，我有 4 个与旅程相关的双打，我需要能够获取这些值并将它们与其他 4 个双打的集合进行比较，以查看这些位置是否在彼此合理的距离内。我已经解决了问题的那一面。它只是将一组 4 双打与 n 组进行比较是我想要做的。我最终希望能够运行每一个设置，以确定它们是否相似。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:39:54.013

首先，没有理由使用 4 维数组。无意冒犯，但这种代码看起来很难看**！**

要动态地将元素添加到数组中，请改用`ArrayList<Double>`. 这个数据结构没有固定的大小。您可以像这样初始化它：

```
List<Double> dblList = Arrays.asList(1.1, 1.2, 1.3, 1.4); 
```

或者

```
List<Double> dblList = new ArrayList<Double>(new Double[] {1.1, 1.2, 1.3, 1.4}); 
```

## 更新

抱歉，我刚刚意识到您想将多个列表相互比较。但是，这个答案应该能够帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T03:35:47.110

根据我对您问题的理解，我认为多维数组不适合。鉴于您的四个双打，每个都具有重要意义，也许将它们分组到一个类中会更有意义。例如...

```
class JourneyCoords {
 private double latStart;
 private double latEnd;
 private double longStart;
 private double longEnd;
 JourneyCoords(double latStart,double latEnd,double longStart, double longEnd){
  this.latStart = latStart;
  this.latEnd = latEnd;
  this.longStart = longStart;
  this.longEnd = longEnd;
 }
 public Boolean isWithinReasonableDistance(JourneyCoords other){
  // What you define to be within reasonable distance
  return true;
 }
} 
```

然后使用 JourneyCoords 对象的数组或列表，您可以在每个对象之间运行成对比较，如下所示：

```
JourneyCoords[] myJourneyCoords = new JourneyCoords[10];

// Initialization of values
for(int i=0;i<myJourneyCoords.length;i++){
 myJourneyCoords = new JourneyCoords(0.0,0.0,0.0,0.0);
}

// Pairwise comparison
for(int i=0;i<myJourneyCoords.length;i++){
 for(int j=i+1;j<myJourneyCoords.length;j++){
  if(myJourneyCoords[i].isWithinReasonableDistance(myJourneyCoords[j])){
   // These two are within reasonable distance
  }
 }
} 
```

我没有测试代码，但希望你能明白这个概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:40:01.437

要将 4 个双打的集合相互比较，您不需要 4 个维度，只需要 2 个。第一个维度是针对您拥有的多组双打，第二个维度是针对每个 4 个双打。

```
double[][] myArray = new double[2 /*sets*/][4 /*doubles each*/] = {
    {1.1, 1.2, 1.3, 1.4}, {2.1, 2.2, 2.3, 2.4}}; 
```

如果您需要添加到列表中，那么您可能想要`ArrayList<ArrayList<Double>>`添加 4 个双打列表。或者也许一个`ArrayList<double[]>`这样你就可以将 4 个双精度数组添加到一个正在增长的`ArrayList`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T19:42:39.257

如果我理解的话，你想要的是一个包含四个双精度对象的集合。

这可以使用`List`包含一些`List`的来表示`Double`。这样您就可以使用Java 的 api 的内置方法`equals`和`hashcode`方法对您的. 因此，您可以拥有这样的代码：`Collection``List<Double>`

```
List<List<Double>> dblList = new ArrayList<List<Double>>(); 
```

并添加一些四个列表`Double`。这种方法的主要优点是您可以使用接口的方法检查两个子列表的相等`equals`性`List`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T20:13:03.687

我对“set”这个术语有点困惑，因为这意味着双精度值的顺序无关紧要。根据您对问题的更新，我假设订单*确实*很重要。

如果您只想遍历现有值并调用您的方法，那非常简单：

```
List<List<Double>> doubles = new ArrayList<List<Double>>();
doubles.add(Arrays.asList(1.1, 1.2, 1.3, 1.4));
doubles.add(Arrays.asList(2.1, 1.2, 1.3, 1.4));
doubles.add(Arrays.asList(1.1, 1.2, 1.3, 1.4));
doubles.add(Arrays.asList(3.1, 1.2, 1.3, 1.4));

List<Double> newValue = Arrays.asList(1.1, 1.2, 1.3, 1.4);
for (List<Double> vals : doubles) {
    compareJourneys(newValue, vals); //this is your comparison method
} 
```

如果事实证明我误解了您对“set”一词的使用，您可以使用 a`List<Set<Double>>`而不是 a `List<List<Double>>`。

# ruby-on-rails - 自动关联两个模型 ruby on rails

> ID：15394727
> 
> 赞同：0
> 
> 时间：2013-03-13T19:31:03.183
> 
> 标签：ruby-on-rails, ruby, associations

我有 3 个模型：

**学生 - 班级 - Avaliation**

我需要这样，当我将学生与课程相关联时，该学生通常与该特定课程的一个名称相关联。

一个班有很多学生。学生属于多个班级 一个学生有多个 avaliation 一个 Avaliation 属于一个学生和一个班级。

当我打开学生的 url 时，我需要显示在那里，以便我可以对学生进行评分。

我怎样才能做到这一点？

好的，这是我的 routes.rb

```
resources :students do
  resources :classrooms do
    resources :avaliations
  end
end 
```

我可以让*学生/1/classrooms/1/avaliation* 但是在我的*学生/显示*页面中，我尝试这个：

```
<p>
  <b>Name:</b>
  <%= @student.name %>
</p>

<h3>Class</h3>
<% @student.classrooms.each do |classroom| %>
    <%= classroom.name %>
<% end %> 
```

但我得到这个错误：

```
SQLite3::SQLException: no such column: classrooms.graded: SELECT "classrooms".* FROM "classrooms" INNER JOIN "avaliations" ON "classrooms"."id" = "avaliations"."classroom_id" WHERE "avaliations"."student_id" = 1 AND ("classrooms"."graded" = 't') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:37:25.397

未经测试：

```
class Avaliation
  belongs_to :student
  belongs_to :class
end

class Class
  has_many :avaliations
  has_many :students, :through => :avaliations, :conditions => {:graded => true}
end

class Student
  has_many :avaliations
  has_many :classes, :through => :avaliations, :conditions => {:graded => true}
end 
```

顺便说一句：也许你应该为你的“类”模型找到另一个名字。这可能会导致一些混乱；）

更新：上面的代码假设您的数据库结构中至少有以下列：

```
+-------------------------+
|Student (table students) |
|id: integer              |
|....                     |
+-------------------------+

+------------------------------+
|ClassRoom (table class_rooms) |
|id: integer                   |
|name:string                   |
|....                          |
+------------------------------+

+------------------------------+
|Avaliation (table avaliations)|
|student_id:integer            |
|class_room_id:integer         |
|graded:boolean                |
|...                           |
+------------------------------+ 
```

# java - Java 发送 instanceof 作为参数

> ID：15394729
> 
> 赞同：0
> 
> 时间：2013-03-13T19:31:06.810
> 
> 标签：java, parameters, instance, instanceof

这可能是一个愚蠢的问题，但我想知道是否有办法将对象的实例发送到方法？

像这样：

```
 public class TestClass
    {
        public TestClass()
        {
            //Initialize
        }
    }

    public class AnotherClass
    {
        Instance!? mInstance;

        public AnotherClass(Instance!? instance)
        {
            mInstance = instance;
        }

        public boolean isInstanceOfTestClass()
        {
            return mInstance == TestClass;
        }
    }

    public class Main
    {
        public static void main(String[] args)
        {
            AnotherClass a = new AnotherClass(TestClass);

            if(a.isInstanceOfTestClass)
                System.out.println("lala");
        }
    } 
```

（试图使其包装为代码块）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:35:33.687

没有“对象的实例”这样的东西。对象是类的实例——因此“实例”和“对象”指的是同一事物。

您可以使用`instanceof`运算符来测试任意对象是否是特定类的实例：

```
if (a instanceof AnotherClass) {
    // ...
} 
```

还有 class `java.lang.Class`，它表示对象的类。您可以通过调用`getClass()`对象来获取它：

```
Class<?> cls = a.getClass(); 
```

请参阅`java.lang.Class`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:38:30.517

好吧，您可以使用`Class.isAssignableFrom`和构造 Class 的实例，其中 T 是您要测试的类。

但是，如果您对强制键入和制作非类型特定的类感到困扰，我建议您阅读泛型。

# java - Android 中未显示对话框

> ID：15394734
> 
> 赞同：1
> 
> 时间：2013-03-13T19:31:22.770
> 
> 标签：java, android, android-alertdialog

我有一些特定的逻辑，其中需要等待 5 秒才能关闭微调器并显示对话框消息。一切正常，但未显示对话框消息。如果我毫不拖延地做同样的事情，它就会起作用。我的代码是：

```
public static void showMessageNotSentDialog(Activity inActivity)
{
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(inActivity);                       
    alertDialogBuilder.setTitle(R.string.error);         

    alertDialogBuilder.setMessage(R.string.error_sending_message);
    alertDialogBuilder.setCancelable(false);

    alertDialogBuilder.setPositiveButton(R.string.ok,new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int id) {
        }

    });

    AlertDialog alertDialog = alertDialogBuilder.create();      
    alertDialog.show();
}

public static void showDelayedErrorMessage(final Activity inActivity)
{

    Runnable task = new Runnable() {
        public void run() {
            com.test.classes.Spinner.hideSpinner();
            showMessageNotSentDialog(inActivity);

      }
      worker.schedule(task, com.test.classes.Spinner.TEXT_SPINNER_HIDEOUT_SEC, TimeUnit.SECONDS);
} 
```

尝试从 UI 线程显示对话框：

```
public static void showDelayedErrorMessage(final Activity inActivity)
{

    Runnable task = new Runnable() {
        public void run() {
            com.test.classes.Spinner.hideSpinner();

            Runnable messageTask = new Runnable() {
                public void run() {
                    showMessageNotSentDialog(inActivity);
                }
              };
              inActivity.runOnUiThread(messageTask);
        }
      };

      worker.schedule(task, com.test.classes.Spinner.TEXT_SPINNER_HIDEOUT_SEC, TimeUnit.SECONDS);         
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:49:28.043

您应该使用[Handler](http://developer.android.com/reference/android/os/Handler.html)，它可以更新 gui 线程。基本上，您可以延迟在处理程序上发布执行，这是一个示例：

```
Handler guiHandler = new Handler();
Runnable showDialog = new Runnable(){
   public void run(){
     //put here the dialog creation
   }
}

postDelayed (showDialog ,5000); // Post for 5 seconds 
```

注意 Handler 的创建必须在 GUI 线程内，否则将无法工作。请记住，GUI 只能由主线程操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:09:58.167

使用倒数计时器，无需使用线程

```
 new CountDownTimer(5000,5000) {

        @Override
        public void onTick(long arg0) {

        }

        @Override
        public void onFinish() {

        }
    }.start(); 
```

onfinish 在 5 秒后执行

# sql-server - SQL Server Left Join with Order BY

> ID：15394735
> 
> 赞同：1
> 
> 时间：2013-03-13T19:31:23.347
> 
> 标签：sql-server, join, sql-order-by

我有一个 Left Join SQL 查询 (2012)，它报告了 00:00:00 秒的执行时间，底部没有 Order By 子句。添加“Order By”会使查询花费 00:00:24 秒！

这是正常的吗？

很明显，我在这里遗漏了一些相当基本的概念，但我会假设执行了查询，然后对结果进行了排序。显然情况并非如此，请有人指出我正确的方向吗？

其他一些信息：我加入的两个表分别有大约 35,000 行和 22,000 行。我正在选择一个日期范围，左连接发生在两个字符串上。结果集介于 300 - 400 个结果之间。我知道比较字符串会有很大的惩罚，我猜这是问题的一部分。

这是SQL：

```
DECLARE @mystartdate as datetime
SET @mystartdate = CAST(CAST((GETDATE() - 0) AS date) as nvarchar) + ' 06:00:00'

DECLARE @myenddate as datetime
SET @myenddate = CAST(CAST((GETDATE() + 1) AS date) as nvarchar) + ' 05:59:59'

SELECT SUBSTRING(CAST([Event_Time] AS nvarchar),0,9) AS mytime
,[CombinedDateTime]
,[MediaFileName]
,[Duration]
,[High_Definition]

FROM [dbo.schedules]

LEFT JOIN dbo.subtitles
ON REPLACE(SUBSTRING(dbo.subtitles.sub_filename, 1, LEN(dbo.subtitles.sub_filename) -4), '-', '') = REPLACE(dbo.schedules.MediaFileName,'/','')

WHERE [CombinedDateTime] >= @mystartdate AND [CombinedDateTime] <= @myenddate

Order by CombinedDateTime 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:36:51.863

`ORDER BY`关于列/行的结果的顺序。尝试在您订购的所有列上设置索引，然后重试，这应该会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:35:39.737

这是正常的。使用 SQL 和 ORDER BY 算法，许多记录都会对性能造成影响，这一切都取决于处理器和其他环境因素。您可以做的是将两个表设置为一个视图。如果性能提高，请查看是否将数据编译到预定义视图中。

您还可以使用数据转换并将数据以编程方式组合到脚本上的自己的表中，具体取决于您想要提取数据的频率，如果您需要实时数据等。

你有几个选择，但要研究......

# java - 在 BoxLayout 中调整 JButton 的大小

> ID：15394741
> 
> 赞同：3
> 
> 时间：2013-03-13T19:31:40.580
> 
> 标签：java, swing, jbutton, boxlayout

我正在尝试为我的游戏制作一个简单的菜单。我在中心有 4 个按钮，我想让它们大一点并居中。

最后一部分有效，但我似乎无法调用我的任何一个`JButtons`并对其执行`.setSize`/ `.setPreferedSize(new Dimension())`。

```
public class mainMenu extends JFrame {
private JButton start, highscore, help, stoppen;

public mainMenu() {
    super("Master Mind");
    maakComponenten();
    maakLayout();
    toonFrame();
}

private void maakComponenten() {
    start = new JButton("Start");
    start.setBackground(Color.gray);
    highscore = new JButton("Higscores");
    help = new JButton("Help");
    stoppen = new JButton("Stoppen");
}

private void maakLayout() {
    JPanel hoofdmenu = new JPanel();
    hoofdmenu.setLayout(new BoxLayout(hoofdmenu, BoxLayout.Y_AXIS ));
    hoofdmenu.add(start);
    start.setAlignmentX(CENTER_ALIGNMENT);
    hoofdmenu.add(highscore);
    highscore.setAlignmentX(CENTER_ALIGNMENT);
    hoofdmenu.add(help);
    help.setAlignmentX(CENTER_ALIGNMENT);
    hoofdmenu.add(stoppen);
    stoppen.setAlignmentX(CENTER_ALIGNMENT);
    super.add(hoofdmenu);
}

private void toonFrame() {
    setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    setVisible(true);
    setSize(500,500);

}

public static void main(String[] args) {
    new mainMenu();
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:00:47.183

例如，要更改“开始”按钮的大小，

改变 ：

```
 start1 = new JButton("Start"); 
```

到

```
 start1 = new JButton("Start") {
        {
            setSize(150, 75);
            setMaximumSize(getSize());
        }
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:46:07.297

问题是JFrames默认使用BorderLayout，这意味着你的JPanel自然会填满空间。

在添加 JPanel 之前，调用以下代码将 JFrame 的布局更改为 null 并改用 JPanel 的设置。

```
this.setLayout(null);
JPanel hoofdmenu = new JPanel();
hoofdmenu.setBounds(0,0, 400, 100); 
```

或者，您可以设置 JButtons 的最大大小

```
Dimension maxSize = new Dimension(100, 100);
start.setMaximumSize(maxSize);
highscore.setMaximumSize(maxSize);
help.setMaximumSize(maxSize);
stoppen.setMaximumSize(maxSize); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T14:43:35.560

这是前两个之后的另一个示例-我正在制作一个音板程序，这实际上是其中的一个示例-实际上需要JPanel，同意第二个帖子。

```
 JFrame frame = new JFrame();
    JPanel menuPanel = new JPanel();
    JButton Button1 = new JButton("<BUTTON NAME 1>");
    Button1.setSize(80, 30);
    Button1.setLocation(4, 4);
    JButton Button2 = new JButton("<BUTTON NAME 2>");
    Button2.setSize(80, 30);
    Button2.setLocation(90, 4); 
```

啊，还有一件事 - 您在与第二段代码不同的块中创建了按钮。这样做会导致其他块看不到它。您需要在块外声明它们，以便所有块都可以看到它们。

# internet-explorer-8 - 修复了 IE8 错误中的定位伪元素

> ID：15394744
> 
> 赞同：2
> 
> 时间：2013-03-13T19:31:47.747
> 
> 标签：internet-explorer-8, css-position, pseudo-element

# 背景

我有一个标准的三列布局，其中第一列向左浮动，第三列向右浮动。第一列需要全高背景。

*   此布局用于模板，因此三列中的任何一列都可以包含最长的内容。
*   我无法更改标记源顺序，因此`display:table`无法解决。
*   我无法添加任何 DOM 节点。
*   布局以最小和最大宽度为中心，因此我无法将垂直重复的背景图像附加到具有内置背景颜色的页面。
*   它需要在 IE7 中看起来不错，但 IE8+ 需要支持。

# 解决方案

为了实现全高左列，我在`colLeft`. 该伪元素已将固定定位设置为视口底部、100% 高度，并放置在左列的后面。这个解决方案很棒，因为：

*   IE8+ 支持伪元素。
*   伪元素附加到左列，所以如果模板没有左列，背景自然不存在。
*   通过不设置`left`or`right`属性，固定位置的伪元素保留在左列（有利于居中布局）。

这是[CodePen 上的一个示例](http://codepen.io/mattrosno/full/bmFpy)。

（在 IE 中查看 CodePens 时，请确保文档模式遵循浏览器模式）。

# 问题

在 IE8 中，全高左栏背景仅向下延伸到初始视口底部（折叠）。

我用新节点而不是伪元素[创建了另一个测试。](http://codepen.io/mattrosno/full/zclbG)`leftColBg`这在 IE8 中按预期工作，这意味着固定定位应该可以工作。

这是我可以在 IE8 和生成的内容上找到的最佳解释：[为什么伪元素上的过滤渐变在 IE8 中不起作用？](https://stackoverflow.com/questions/10403916/why-does-a-filter-gradient-on-a-pseudo-element-not-work-in-ie8/10669986#10669986)

我认为 IE8 错误地定位了生成的内容，因为它不是包含内容的“对象”。谁能更好地解释这个 IE8 错误？有解决办法吗？

# spring - 在 Spring 托管支持 bean 中使用 JSF2 @ManagedProperty

> ID：15394745
> 
> 赞同：1
> 
> 时间：2013-03-13T19:31:48.300
> 
> 标签：spring, jsf-2

我有一个由 Spring 管理的 JSF 支持 bean，但我希望能够使用 JSF 中的 @ManagedProperty。以下不起作用：

```
@Component
@Scope(Scopes.REQUEST)
public class MyRequestBean {

    @ManagedProperty(value="#{param.bcIndex}")
    private int bcIndex;

    public int getBcIndex() {
        return bcIndex;
    }

    public void setBcIndex(int bcIndex) {
        this.bcIndex = bcIndex;
    }
} 
```

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:16:15.400

其实很简单。我知道三种注射方法：

1.  将 Spring 的`@Value`注解与隐式 El`#{param}`对象一起使用：

    ```
    @Value("#{param.bcIndex}")
    private int bcIndex; 
    ```

2.  `ExternalContext#getRequestParameterMap`在`@PostConstruct`/`preRenderView`监听器中使用：

    ```
    //@PostConstruct
    public void init() {
        bcIndex = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("bcIndex");
    } 
    ```

3.  使用以下方法在您的视图中进行绑定`<f:viewParam>`：

    ```
    <f:metadata>
        <f:viewParam name="index" value="#{myRequestBean.bcIndex}" />
    </f:metadata> 
    ```

# javascript - 如果函数返回相同的输出

> ID：15394750
> 
> 赞同：1
> 
> 时间：2013-03-13T19:32:04.773
> 
> 标签：javascript, html, logic

当用户选择一个答案时，下面的代码应该给出不同的结果；但是，它只是给出相同的结果。为什么按下按钮时会给出相同的结果？

```
1.Is the network problem affecting just your pc? <BR>

<select id="Area">

  <option value="Yes">Yes</option>

  <option value="No">No</option>

  </select>

<br>

<br><p>

2.Can you access the internet? <BR> 

 <select id="Internet">

  <option value="Yes">Yes</option>

  <option value="No">No</option>

  <option value="Yes,but is slow">Yes,but is slow</option>

  <option value="Drop in connection">Drop in connection</option>

</select>

<br>

<br><p>

3.Are you receiving any error message saying remote system could not be found or connection has timed out?<BR>

<select id="Errors">

  <option value="Remote">Remote system could not be found</option>

  <option value="Connection">Connection has timed out</option>

  <option value="No">No error messages </option>

  </select>

<br>

<br><p>

4.Have you changed any software or Hardware before the problem occurred?<BR> 

 <select id="Change">

  <option value="Software">Software</option>

  <option value="Hardware">Hardware</option>

  <option value="Both">Both</option>

  <option value="None">None </option>

</select>

<br>

<br><p>

<button onclick="myFunction()">Detect</button>

<p id="Solution"></p>

<script>

function myFunction()

{

    var AreaElem =  document.getElementById("Area");

    var Area = AreaElem.options[AreaElem.selectedIndex].value;

    var InternetElem =  document.getElementById("Internet");

    var Internet= InternetElem.options[InternetElem.selectedIndex].value;
    var ErrorsElem =  document.getElementById("Errors");

    var Errors= ErrorsElem.options[ErrorsElem.selectedIndex].value;
    var ChangeElem =  document.getElementById("Change");

    var Change= ChangeElem.options[ChangeElem.selectedIndex].value;

   if (Area=="Yes"||Internet=="Yes"||Errors=="No"||Change=="No") {
      x="check your cable is not cut or loose";
} else if (Area=="Yes"||Internet=="Yes"||Errors=="No"||Change=="Both") {
      x="network connections ";
   } else {
      x="other problems....";
   }
   document.getElementById("Solution").innerHTML=x;
}

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:38:52.303

```
 if (Area=="Yes"||Internet=="Yes"||Errors=="No"||Change=="No") {
      x="check your cable is not cut or loose";
} else if (Area=="Yes"||Internet=="Yes"||Errors=="No"||Change=="Both") {
      x="network connections ";
   } else {
      x="other problems....";
   } 
```

问题就在这里！您正在使用“或”运算符`||`您应该使用“和”运算符`&&` 这应该可以解决它

```
 if (Area=="Yes"&&Internet=="Yes"&&Errors=="No"&&Change=="No") {
      x="check your cable is not cut or loose";
} else if (Area=="Yes"&&Internet=="Yes"&&Errors=="No"&&Change=="Both") {
      x="network connections ";
   } else {
      x="other problems....";
   } 
```

# asp.net - ASP.net 文件上传正在保存空文件

> ID：15394751
> 
> 赞同：0
> 
> 时间：2013-03-13T19:32:09.447
> 
> 标签：asp.net, file-upload

我正在使用 Ajax Async File Uploader 抓取图像文件并将其保存到文件夹中：

```
 if( file != null && file.hasFile)
    {
      if( file is the appropriate file type)
      {
        if( the filename is already taken)
        {
          add random numbers on the file name until it's unique
        }

        file.SaveAs( filepath + filename );
      }
    } 
```

这在我的本地计算机上效果很好。但是，当我将程序发布到服务器时，文件将以正确的名称保存在正确的位置，但文件大小为 0。我无法打开文件。

我究竟做错了什么？

这是我的真实代码：

```
 // If cert has a file
    if(cert != null && cert.HasFile)
    {
    // If cert is the appropriate file type
    if((cert.FileName.IndexOf(".jpg", StringComparison.OrdinalIgnoreCase) < 0) &&
    (cert.FileName.IndexOf(".jpeg", StringComparison.OrdinalIgnoreCase) < 0) &&
    (cert.FileName.IndexOf(".tiff", StringComparison.OrdinalIgnoreCase) < 0) &&
    (cert.FileName.IndexOf(".png", StringComparison.OrdinalIgnoreCase) < 0) &&
    (cert.FileName.IndexOf(".gif", StringComparison.OrdinalIgnoreCase) < 0) &&
    (cert.FileName.IndexOf(".pdf", StringComparison.OrdinalIgnoreCase) < 0))
            {
                // Popup warning
                Session["imagePopup"] = "true";
            }
            else
            {
                string filename = cert.FileName;

                // If image already exists randomly add numbers until a unique filename is found
                while( File.Exists(System.Configuration.ConfigurationManager.AppSettings["CertificateSavePath"] + filename))
                {
                    Random r = new Random();

                    filename = filename.Insert(0, r.Next(99).ToString());
                }

                // Save the new file
                try
                {
                    // save the file
                    cert.SaveAs(System.Configuration.ConfigurationManager.AppSettings["CertificateSavePath"] + filename);
                }
                catch(Exception ex)
                {
                    error.Text += ex.Message + "<br />";
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:10:17.630

我修好了它。

我正在运行这样的程序：

我创建了一个带有可编辑行的列表视图。用户可以上传图像并保存图像。当用户单击“更新”时，图像将被保存。

我把它改成这样：

在成功的更新事件中，图像会立即保存。单击“更新”只会刷新页面。

希望这可以帮助某人

# jquery - 如何从 FancyBox 中获取下拉值？

> ID：15394755
> 
> 赞同：2
> 
> 时间：2013-03-13T19:32:25.087
> 
> 标签：jquery, fancybox-2

我一直在研究，现在需要一些输入。有人会向我展示使此代码在警报中显示下拉值的调整吗？它当前显示为“未定义”，而文本框值正确显示。谢谢。

文件 1.ftl

```
<html xmlns="http://www.w3.org/1999/xhtml">
<body>
    <button id="displayFancyboxButton">Display Fancybox</button>
    <#include "file2.ftl">
</body>
</html> 
```

文件 2.ftl

```
<div id="theContents" style="display:none">
    <input id="textboxId" type="text" />
    <select id="dropdownId">
        <option value="Select">Select</option>
        <option value="first">one</option>
        <option value="second">two</option>
        <option value="third">three</option>
    </select>
    <button id="displayButtonId" id="save">Display</button>
</div>

<script type="text/javascript">
    $('#displayFancyboxButton').click(function(){
        $.fancybox.open({
            content: $('#theContents').html()
        });
        return false;
    });
    $("body").on("click","button[id=displayButtonId]",function(){
        var textboxVal = $('.fancybox-inner input[id="textboxId"]').val();
        var dropdownVal = $('.fancybox-inner input[id="dropdownId"]').val();
        alert('textboxVal=' + textboxVal + ", dropdownVal=" + dropdownVal);
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:00:01.527

我将选择器更改为：

```
var dropdownVal = $('#dropdownId').val(); 
```

您所走的路线最终需要像这样：

```
var dropdownVal = $('.fancybox-inner select[id="dropdownId"]').val(); 
```

选择器需要**选择**[id="dropdownId"] 而不是 input[id="dropdownId"] 因为您使用的是选择标签而不是输入标签。

但是，这种方法有点复杂。因为 dropDownId 是页面上的唯一 id，所以您的选择器只需要引用它，而不需要 fancybox-inner 或 select/input。

希望有帮助。

# c - 在文件之间重置柔性扫描仪的正确方法

> ID：15394762
> 
> 赞同：1
> 
> 时间：2013-03-13T19:32:49.080
> 
> 标签：c, lex, flex-lexer

我正在使用 flex 扫描仪扫描一堆文件。我目前遍历文件并调用`yylex()`，但似乎 flex 中的状态没有重置。在下一次调用之前设置一个函数来`<EOF>`重置任何变量是否正确？`BEGIN INITIAL``yylex()`

在测试这个时，似乎这让我进入了一个无限循环，因为我最终回到 INITIAL 文件中没有更多匹配项，所以它永远不会退出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:09:29.540

[flex 手册](http://westes.github.io/flex/manual/Multiple-Input-Buffers.html)中有一个使用`<EOF>`匹配来切换缓冲区的示例；它使用以下代码：

```
<<EOF>> {
             if ( --include_stack_ptr  0 )
                 {
                 yyterminate();
                 }

             else
                 {
                 yy_delete_buffer( YY_CURRENT_BUFFER );
                 yy_switch_to_buffer(
                      include_stack[include_stack_ptr] );
                 }
         } 
```

您会想要添加`BEGIN(INITIAL)`到`else`分支，因为`yy_switch_to_buffer`不会重置开始条件。

# jquery - 上传进度条 – 浏览器兼容性问题

> ID：15394767
> 
> 赞同：0
> 
> 时间：2013-03-13T19:32:59.810
> 
> 标签：jquery, jquery-ui, file-upload, cross-browser, progress-bar

有一些与浏览器兼容性有关的问题。我正在使用 UltraMega Tech 的上传进度条码，如下所示。该代码会生成一个状态栏，用于跟踪用户提交文件的进度。它适用于 IE9 和 Firefox，但 Chrome 并非如此。使用 Chrome，表单会消失，上传栏会出现，但该栏不会移动以跟踪文件上传。但是，文件仍然被上传。有任何想法吗？

```
<style>
  #progress-bar, #upload-frame {display: none;}
</style>

<script>
        (function ($) {
            // We'll use this to cache the progress bar node
            var pbar;

            // This flag determines if the upload has started
            var started = false;

            $(function () {

                // Start progress tracking when the form is submitted
                $('#usp_form').submit(function() {

                    // Hide the form
                    $('#usp_form').hide();

                    // Cache the progress bar
                    pbar = $('#progress-bar');

                    // Show the progress bar, initialize the jQuery UI plugin
                    pbar.show().progressbar();

                    // We know the upload is complete when the frame loads
                    $('#upload-frame').load(function () {

                        // This is to prevent infinite loop in case the upload is too fast
                        started = true;

                    });

                    // Start updating progress after a 1 second delay
                    setTimeout(function () {

                        // We pass the upload identifier to our function
                        updateProgress($('#uid').val());

                    }, 1000);

                });

            });

            function updateProgress(id) {

                var time = new Date().getTime();

                // Make a GET request to the server, Pass our upload identifier as a parameter
                $.get('http://example.com/getprogress.php', { uid: id, t: time }, function (data) {

                    // Get the output as an integer
                    var progress = parseInt(data, 10);

                    if (progress < 100 || !started) {

                        // Determine if upload has started
                        started = progress < 100;

                        // If we aren't done or started, update again
                        updateProgress(id);

                    }
                    else if(progress == 100)
                    {
                        $('#Patience_message').show();
                    }

                    // Update the progress bar percentage, but only if we have started
                    started && pbar.progressbar('value', progress);

                });

            }

        }(jQuery)); 
```

获取进度.php

```
<?php

if (isset($_GET['uid'])) {

// Fetch the upload progress data
$status = uploadprogress_get_info($_GET['uid']);

if ($status) {

// Calculate the current percentage
echo round($status['bytes_uploaded']/$status['bytes_total']*100);

}
else {

    // If there is no data, assume it's done
    echo 100;

}
} 
```

# ruby - Ruby：替换字符串的一部分

> ID：15394783
> 
> 赞同：3
> 
> 时间：2013-03-13T19:34:03.173
> 
> 标签：ruby, regex, string, replace

我有很多遵循某种模式的字符串：

```
string = "Hello, @name. You did @thing." # example 
```

基本上，我的字符串是@word 是动态的描述。我需要在运行时用一个值替换每个值。

```
string = "Hello, #{@name}. You did #{@thing}." # Is not an option! 
```

@word 基本上是一个变量，但我不能使用上面的方法。我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T19:41:06.033

代替进行搜索/替换，您可以使用[`Kernel#sprintf`](http://rubydoc.info/stdlib/core/Kernel%3asprintf)方法或其`%`速记。结合哈希，它可以派上用场：

```
'Hello, %{who}. You did %{what}' % {:who => 'Sal', :what => 'wrong'}
# => "Hello, Sal. You did wrong" 
```

使用 Hash 而不是 Array 的优点是您不必担心排序，并且可以在字符串的多个位置插入相同的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T19:41:55.517

您可以使用可以使用 String 的运算符动态切换的占位符来格式化您的字符串[`%`](http://ruby-doc.org/core-2.0/String.html#method-i-25)。

```
string = "Hello, %s. You did %s"

puts string % ["Tony", "something awesome"]
puts string % ["Ronald", "nothing"]

#=> 'Hello, Tony. You did something awesome'
#=> 'Hello, Ronald. You did nothing' 
```

**可能**的用例：假设您正在编写一个将名称和操作作为参数的脚本。

```
puts "Hello, %s. You did %s" % ARGV 
```

假设 'tony' 和 'nothing' 是前两个参数，你会得到`'Hello, Tony. You did nothing'`.

# visual-studio-2010 - 为仅可用作键盘快捷键的命令添加 Visual Studio 工具栏按钮

> ID：15394784
> 
> 赞同：5
> 
> 时间：2013-03-13T19:34:04.137
> 
> 标签：visual-studio-2010, visual-studio, resharper, resharper-7.1

此问题与此[ReSharper YouTrack 问题](http://youtrack.jetbrains.com/issue/RSRP-336947)有关。

在安装了 ReSharper 7.1.1 的 Visual Studio 2010 中，如果我转到工具 > 选项 > 环境 > 键盘，则会有一个名为 ReSharper_SilentCleanupCode 的命令。

我想将此命令绑定到工具栏按钮。

使用“工具”>“自定义”>“命令”似乎是不可能的，因为此对话框中唯一可用的命令适用于已经具有关联菜单项的操作。我感兴趣的特定 ReSharper 命令（静默代码清理）不会出现在任何菜单中，因此无法使用“GUI”将其分配给工具栏按钮。

有没有其他方法可以将仅键盘命令绑定到工具栏按钮？（ReSharper 的一位程序员认为可以使用“VS 脚本编辑器”，但我没有找到这方面的信息。）

**编辑**

我应该首先提到这一点。虽然 azhrei 的宏解决方案非常适合 Visual Studio 2010，但一旦我升级到 VS 2012，它就会中断，因为不再支持宏。如果有人有一个可以继续在 VS 2012 中工作的解决方案，那将是可取的。（或者也许 VS 2012 工具栏一开始就没有相同的限制？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T02:33:05.160

添加执行命令的宏，然后将宏添加到工具栏。

这是有效的，因为它*使*仅键盘命令出现在“自定义命令”对话框的“宏”菜单中。

***细节***

添加执行此操作的宏：

```
 Sub _ReSharper_SilentCleanupCode()
        DTE.ExecuteCommand("ReSharper_SilentCleanupCode")
    End Sub 
```

将此宏放在*Customize..Commands..AddCommand..Categories..Macros*中出现的模块中，例如*Samples*或*MyMacros.RecordingModule*，而不是*MyMacros.Module1*（使用宏 IDE 时的默认值）。

转到`Tools..Customize..Command`并选择`Toolbar`您想要的。

现在`Add Command...`并选择`Macros`类别。

选择你的`Macros.Samples._ReSharper_SilentCleanupCode`宏。

单击`Modify Selection`并将名称更改为或任何让您认为*ReSharper Silent Code Cleanup*`#-)`的文本不会对您的工具栏来说太长。:-)

 *我在 Visual Studio 2010 和 ReSharper 7.1.2 上试过这个。

***编辑***

Visual Commander 显然也是在 VS2012 上实现这一点的一种方式——更多信息请参见下面的评论。*

# php - 努力在 PHP 脚本的 jquery ajax 成功回调中解码 JSON

> ID：15394786
> 
> 赞同：0
> 
> 时间：2013-03-13T19:34:06.757
> 
> 标签：php, json, jquery

几个小时以来，我一直试图为此寻找答案，但真的很挣扎。

我有一个简单的 jquery Ajax 函数，它将数据发送到 PHP 脚本。然后将数据用于执行 MySQL 查询，并将结果作为数组包含在内。我正在使用将数组发回，`json_encode`但无法弄清楚如何在另一端显示数组。我已经发布了下面的代码。`console.log`正在显示`Object {modules: Array[0]}` 。数组中应该有 3 个条目。

**PHP的**

```
<?php
 include_once('../../dbconnect.php');

$name = $_POST['uploadname'];

$query = "SELECT * FROM marking_assignments WHERE name = '$name'";
$details = $conn->query($query);
$modules = array();

while ($row = $details->fetch_assoc()){
 $modules[] = $row['unit'];
}

$dataarray = array("modules"=>$modules);
 echo json_encode($dataarray);
?> 
```

**jQuery**

```
 var uploadname;

  $("#uploadname").blur(function(){
   uploadname = $(this).val();
   $.ajax({
            url: "uploadnames.php",
            type: "POST",
            data: {uploadname: uploadname},
            dataType: 'json',
            success: function(data){
            console.log(data);
             }
            });

         }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:57:00.190

你应该使用：

```
 var parsedData =  jQuery.parseJSON(data); 
```

接着：

```
 console.log(parsedData) 
```

# xpath - 使用 java 读取带有命名空间的 XML 文件

> ID：15394787
> 
> 赞同：0
> 
> 时间：2013-03-13T19:34:10.793
> 
> 标签：xpath

我想知道如何浏览此 XML 文件以获取一些值（如 VersionXSD、Support、etx...）。没有命名空间我可以做到，但使用命名空间我没有结果。

```
<?xml version="1.0" encoding="UTF-8"?>
<ROOT Id="myRefId"
xsi:schemaLocation="urn:ir:si_my_xsd_07.xsd"
xmlns="urn:ir:se_pelmed" xmlns:nmsps="urn:siram:nmsps"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<Horodatage>2013-03-05T12:00:00</Horodatage>
<VersionXSD>01.01</VersionXSD>
<BASE>
    <nmsps:Numero>NUM-123-456</nmsps:Numero>
    <nmsps:Type>TATA</nmsps:Type>
    <nmsps:Support>PASTIS</nmsps:Support>
    <nmsps:DateLimite>2013-03-04</nmsps:DateLimite>
    <nmsps:Serial>0</nmsps:Serial>
    <nmsps:BASEA>
        <nmsps:NomFamille>Paul</nmsps:NomFamille>
        <nmsps:Prenom>Hilaire</nmsps:Prenom>
        <nmsps:DateNai>1979-10-11</nmsps:DateNai>
        <nmsps:Sexe>Masculin</nmsps:Sexe>
    </nmsps:BASEA>
    <nmsps:BASEC Id="1">
        <nmsps:Validite>2013-03-04</nmsps:Validite>
        <nmsps:Sub>true</nmsps:Sub>
        <nmsps:Stup>true</nmsps:Stup>
    </nmsps:BASEC>
    <nmsps:BASED Id="1">
        <nmsps:Numero R="DD1">numero1</nmsps:Numero>
        <nmsps:Categorie>Categorie1</nmsps:Categorie>
    </nmsps:BASED>
    <nmsps:BASED Id="2">
        <nmsps:Numero R="DD2">numero2</nmsps:Numero>
        <nmsps:Categorie>Categorie2</nmsps:Categorie>
    </nmsps:BASED>
    <nmsps:BASED Id="3">
        <nmsps:Numero R="DD3">numero3</nmsps:Numero>
        <nmsps:Categorie>Categorie3</nmsps:Categorie>
    </nmsps:BASED>
</BASE>
</ROOT> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:01:49.817

您可以使用`local-name()`ie绕过命名空间`//*[local-name()='Support']`

或者按照flup的建议实例化一个，这就是我的做法，它使事情变得更容易。

# ios - UICollectionView 可以水平计数吗？

> ID：15394790
> 
> 赞同：0
> 
> 时间：2013-03-13T19:34:17.240
> 
> 标签：ios, uicollectionview, alignment

我从一个以编程方式实现的 UICollectionView 得到这个：

![在此处输入图像描述](../Images/97716d5ef76a67ddbd751b5c3237cb05.png)

有没有办法（以编程方式）要求它从左到右而不是从上到下计数，以便有两行四行而不是两列？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:42:22.367

如果您使用的是流布局，您可以将`UICollectionViewFlowLayout`'`scrollDirection`属性设置为`UICollectionViewScrollDirectionVertical`：

```
UICollectionViewFlowLayout *layout = collectionView.layout;
layout.scrollDirection = UICollectionViewScrollDirectionVertical; 
```

# android - 如何让 Android Webview 中的文本适合不同的屏幕尺寸？

> ID：15394791
> 
> 赞同：0
> 
> 时间：2013-03-13T19:34:22.193
> 
> 标签：android, android-ui

我有一个包含 webview 的应用程序。当我在手机上运行这个应用程序时，它运行良好。但是，如果我在平板电脑上运行它，它显示的文本会更小一些。我希望如果有人有解决方案，让 webview 中的文本会自动增加或减小它们的大小以适应不同的屏幕。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:05:03.230

您可以使用元数据来控制您的 WebView 内容。这是参考指南，[从 Web 应用程序定位屏幕](http://developer.android.com/guide/webapps/targeting.html)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:57:08.600

使用媒体查询。根据屏幕宽度更改字体大小。例如，

```
@media (max-width: 1280px) {
    html {
        font-size: [font size for tablet]
    }
}
@media (max-width: 720px) {
    html {
        font-size: [font size for large mobile]
    }
}
@media (max-width: 480px) {
    html {
        font-size: [font size for smaller mobile]
    }
} 
```

# iphone - 无法调整 UITextView 的大小

> ID：15394795
> 
> 赞同：0
> 
> 时间：2013-03-13T19:34:45.087
> 
> 标签：iphone, ios, xcode

我有一个名为 profileDescription 的 UITextView，它位于滚动视图中。我想调整此视图的高度，使其扩展以占用所需的空间。我正在使用打开自动布局的故事板。我尝试将其关闭，但它使其他事情变得更糟，所以我现在将其保持打开状态。

我正在尝试使用以下代码，但它没有效果：

```
self.profileDescription.text = @"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.";

[self.profileDescription setScrollEnabled:NO];

CGRect frame = self.profileDescription.frame;
frame.size.height = self.profileDescription.contentSize.height;
self.profileDescription.frame = frame; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T21:23:11.567

`Autolayout`启用该功能后，有一个简单的修复方法。

实现**`viewDidLayoutSubviews`**，它将在视图控制器的视图`layoutSubviews`方法被调用后调用。

**示例代码：**

```
- (void)viewDidLayoutSubviews
{
     self.yourTextField.frame = CGRectMake(361, 226, 400, 100);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:48:49.767

在设置文本之前尝试显式设置 UITextView 的框架，看看是否有任何区别。UITextView 需要知道文本视图的宽度，以便它可以正确确定 contentSize.height 应该是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T20:02:17.880

据我了解，您希望 UITextView 扩展到文本的大小，使其垂直大小与文本一样高。

您需要计算文本的高度并相应地设置垂直大小（注意：我从一个带有 UILabel 而不是 UITextView 的项目中对此进行了调整，并且我还没有测试过这个版本）：

```
CGSize maxLabelSize = CGSizeMake(somewidth, 9999);
CGSize expectedSize = [yourText sizeWithFont:textView.font constrainedToSize:maxLabelSize lineBreakMode:NSLineBreakByWordWrapping];
CGRect newFrame = textView.frame;
newFrame.size.height = expectedSize.height;
textView.frame = newFrame; 
```

# google-app-engine - GAE 实体上的文本搜索

> ID：15394801
> 
> 赞同：1
> 
> 时间：2013-03-13T19:35:15.520
> 
> 标签：google-app-engine, gwt

我在 GAE 实体上实现了文本搜索工具。我将结果显示到带有页面的 cellTable 中。我使用游标进行分页。我遇到的问题是，当我在 2 个或更多列（属性）上搜索时，光标会丢失，因为 OR 语句会发出不同的查询并合并结果。

任何好主意如何克服这个问题？我不想使用 GAE 的 Search API。

# php - 如何在一列上保存多个复选框

> ID：15394802
> 
> 赞同：0
> 
> 时间：2013-03-13T19:35:17.433
> 
> 标签：php

我有这个代码：

```
<table width="100%" border="0" id="SpecialReq1"> 
  <tr>   
    <td width="100px"><input type="checkbox" name="txtSpecialReq" id="txtSpecialReq" value="Non-Smookong" class="checkox">Non-Smookong</td>
    <td width="100px"><input type="checkbox" name="txtSpecialReq" id="txtSpecialReq" value="Smooking-Room" class="checkox">Smooking Room</td>
    <td width="100px"><input type="checkbox" name="txtSpecialReq" id="txtSpecialReq" value="Quiet-Room" class="checkox">Quiet Room</td>
    <td width="100px"><input type="checkbox" name="txtSpecialReq" id="txtSpecialReq" value="Parking" class="checkox">Parking</td>
    <td width="100px"><input type="checkbox" name="txtSpecialReq" id="txtSpecialReq" value="Early-Arrival" class="checkox">Early Arrival</td>
  </tr>
</table> 
```

这段代码检查我需要保存在表上，我的问题是我不能在一条记录上保存多个复选框，所以我需要在数据库表的列上保存多个，我该如何显示它？ ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:38:32.763

`name="txtSpecialReq[]"`将每个复选框上的名称更改为。

然后，一旦您提交表单，这些项目将在数组中为`$_POST[txtSpecialReq]`.

```
// output all items in the array
foreach($_POST['txtSpecialReq'] as $value) {
    echo $value;
} 
```

# ios - 我想做一个if语句，所以如果某些图像在特定坐标上，就会有声音

> ID：15394808
> 
> 赞同：0
> 
> 时间：2013-03-13T19:35:30.913
> 
> 标签：ios, if-statement, ios6, xcode4.5, cgpoint

我知道如何播放声音，但我不知道如何使用“CGPointisEqualtoPoint”方法。我如何使用它或有其他方法？

```
-(void)beloning {
if (//CGPointisEqualtoPoint?!
    )  {
    //play sound
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:55:20.120

[从文档：](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGGeometry/Reference/reference.html)

> 返回两点是否相等。

```
bool CGPointEqualToPoint (
     CGPoint point1,
    CGPoint point2
); 
```

但是你可能会用这个更好：

> CGRectContainsPoint
> 返回一个矩形是否包含一个指定的点。

```
bool CGRectContainsPoint (
     CGRect rect,
     CGPoint point
); 
```

所以现在您可以检查图像的矩形是否包含您关心的坐标点

# sql - 在打印标签中插入空记录

> ID：15394813
> 
> 赞同：0
> 
> 时间：2013-03-13T19:35:41.973
> 
> 标签：sql, sql-server, stored-procedures

我正在尝试创建一个打印我的供应商标签的 SP，供应商名称。我希望用户设置起始位置，在起始位置之前我只是简单地插入一个空值。我希望能够重复使用标签纸。

我有这样的SP代码：

```
Alter PROCEDURE [dbo].[z_sp_APVendorLabel]
    (@VendorGroup bGroup ,
     @StartPosition int)

AS
BEGIN
    SET NOCOUNT ON;
    Create table #data_null
    (Vendor int,
     Name varchar(60)null)

Declare @counter int
SET @counter = 0
WHILE @counter <  @StartPosition
BEGIN
     UPDATE #data_null  SET Vendor='',Name=' '
     SET @counter = @counter + 1

END

Create table #detial
(Vendor int,
 Name varchar (60)null)

 select Vendor, Name into  #data from APVM 
 WHERE VendorGroup= @VendorGroup

select * from #data_null
Union All
select * from #detial

END 
```

这很简单，但是当我测试它时，我没有得到任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T02:44:57.203

您正在创建 table`#data_null`并更新它，但从不插入任何行。如果您`@@rowcount`在每次更新后进行检查，您会发现它为零。

在将该循环更改为`insert`而不是 之前`update`，请考虑设置一个永久表以供选择。在每次调用过程时生成 N 个值的循环实际上并不是对服务器时间或您的时间的最佳利用。;-)

# php - PHP/MYSQL: 小于等于 50 是否显示数百条记录？

> ID：15394814
> 
> 赞同：0
> 
> 时间：2013-03-13T19:35:42.403
> 
> 标签：php, mysql, operators

这是我正在使用的查询：

```
SELECT * FROM inventory WHERE status='live' and price<='50' ORDER BY id DESC; 
```

它显示了 50 美元以下的所有物品。但它也显示了所有超过 100 美元的物品？我猜这个问题与这些价格是三位数有关。另一件要提的是，价格还包括价格后的 0.00。

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:37:21.150

我认为问题在于您有 50 个引号。MySql 可能将其视为字符串。

```
... AND price <= 50 ORDER BY .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:39:09.933

如果价格列数据类型是“CHAR”（字符串），“100”和“49999”都是 <=“50”。将一种或两种数据类型（列和比较）更改为 DECIMAL(10,2) 或另一种数字类型。

# c# - 如何读取块中的文本文件以返回特定行

> ID：15394815
> 
> 赞同：0
> 
> 时间：2013-03-13T19:35:43.183
> 
> 标签：c#, if-statement, datagridview, struct, line

我需要能够逐行读取文本文件并在它以某个文本开头时获取该行的内容，但是它可能并不总是存在，这给了我空返回并影响了我的datagridview。

我想创建一个方法，当它看到第一行（来源：总是在那里）并在其他行中读取时，它将读取块中的数据，如果该行不存在，则将与其关联的变量设置为“”。

例如，文本文件将是

来源：C:\
MRU：1
MRU 时间：12/12/2013

来源：C:\
MRU：2
MRU 时间：13/12/2013

来源：C:\
MRU 时间：12/10/2013
//notice no MRU

如果它包含字符串，这是我用来获取该行的代码：

```
 String line = file.ReadLine();
 if (line.StartsWith("source"))
        {
            richTextBox1.AppendText((line) + Environment.NewLine);        
        }

        if (line.Contains("MRU"))
        {
            richTextBox1.AppendText((line) + Environment.NewLine);
        }

        if (line.Contains("MRU time"))
        {
            richTextBox1.AppendText((line) + Environment.NewLine);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:26:58.913

这是一个控制台应用程序，可以完全满足您的需求。只需更改它以满足您的需求。您的主要问题是您没有空检查。这也包含在较小的功能中，因此它更干净（至少对我而言）

```
 static void Main(string[] args)
    {
        ReadFile();
    }

    private static void ReadFile()
    {
        StreamReader SR = new StreamReader(@"C:\Users\bharrison\Desktop\test.txt");
        Console.WriteLine("Reading file");
        while (!SR.EndOfStream)
        {
           string ReturnedValue = AnalyzeString(SR.ReadLine());
           Console.WriteLine(ReturnedValue);
        }
        Console.ReadLine();
    }

    private static string AnalyzeString(string line)
    {
        string TempLine = line;

        if (TempLine != null && TempLine != "")
        {

            if (TempLine.Contains("source"))
            {
                return TempLine;
            }

            if (TempLine.Contains("MRU"))
            {
                return TempLine;
            }

            if (TempLine.Contains("MRU Time"))
            {
                return TempLine;
            }
        }
        else
        {
            return " ";
        }
        return " ";
    } 
```

# python - 在不改变索引的情况下迭代删除列表项，使用“DELETEME”字符串是一种合理的方法吗？

> ID：15394816
> 
> 赞同：0
> 
> 时间：2013-03-13T19:35:46.013
> 
> 标签：python, list, loops, indexing

我有许多通过读取 CSV 创建的列表，其中每个索引代表一个数据点。所以：

```
# names = ['name1','name2', 'name3', 'name4']
# data1 = ['1', '2', '3', '4']
# data2 = ['a', 'b', 'c', 'd'] 
```

相当于：

> 名称1,1,a

我需要删除某些数据点，最简单的方法似乎是通过索引：

```
del names[1]
del data1[1]
del data2[1]
# names = ['name1', 'name3', 'name4'] 
```

但是，我正在使用索引对列表进行迭代，并且在循环完成之前不想更改它们。我的解决方案是将要删除的项目替换为唯一的字符串，然后再将其删除：

```
names[1] = 'DELETEME'
data1[1] = 'DELETEME'
data2[1] = 'DELETEME'
# names = ['name1','DELETEME', 'name3', 'name4'] 
```

这是一种合理的做法还是我应该做其他事情？

**编辑**哇，感谢所有的回复。我需要一些时间来测试不同的方法。对于那些询问的人，这里有一个额外的代码片段：

```
# read CSV file. create lists
names = ['name1', 'name2', 'name3', 'name4']
data1 = [1, 32.018, 3, 4]
data2 = [5, -22, 6, 7]

# master list of names to look for
master = ['name2', 'name5']

for i,n in enumerate(names):
    # find intersections with master list, get indices
    # ...
    matches = [1] # index of 'names2'

    # iterate through matches
    for m in matches:
         # specify a criterion for deleting/modifying data points
         # example:
        if data1[m] == 32.018 and data2[m] == -22:
            del names[m]
            del data1[m]
            del data2[m]
        # specify additional criteria using additional if statements
        # ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:53:44.137

这是您在迭代时删除条目而不跳过任何条目或使用“已删除令牌”的方式。

```
i = 0
while i < len(names):
    if CONDITION_FOR_DELETION:
        del names[i]
        del data1[i]
        del data2[i]
    else:
        i += 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:14:34.603

您可以保留要删除的索引的备忘录，然后在完成其他工作后以相反的顺序应用它们。

```
delete_memo = []
for i in xrange(len(names)):
    if CONDITION_FOR_DELETION:
        delete_memo.append(i)
delete_memo.reverse()
for i in delete_memo:
    del names[i]
    del data1[i]
    del data2[i] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:42:40.573

这似乎过于复杂，为什么不将键/值散列到 a 中`dict`，然后随时删除键/值对呢？

```
>>> tst = {1:3}
>>> del(tst[1])
>>> tst
{} 
```

你当然必须迭代字典（而不用担心索引），但我通常会发现这更容易

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T19:56:19.997

这不是坏习惯，你这样做的方式，但你可以这样迭代：

```
data = [1, 2, 3, 4, 5]
i = 0
while i < len(data):
    if data[i] == 3:
        del data[i]
    else:
        i += 1 
```

`i`基本上，只有在您不从列表中删除该项目时才增加计数器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T20:14:38.513

根据您的需要，您还可以考虑迭代列表的副本。

如果您发布代码片段的副本，它可能会有所帮助。

# joomla - Joomla 组件“附件”允许输入 html

> ID：15394819
> 
> 赞同：0
> 
> 时间：2013-03-13T19:35:52.420
> 
> 标签：joomla, components, attachment, strip-tags

这个问题可能有点特别。我正在使用这个 Joomla 2.5 扩展来让作者能够将附件添加到文章中：[Joomla 附件](http://extensions.joomla.org/extensions/directory-a-documentation/downloads/3115)

该扩展在后端表单中呈现一个名为“description”的输入字段，以插入所提供文件的文件描述。不幸的是，它没有采用我需要的 HTML 标签。通过保存表单，似乎 strip_tags() 或 preg_replace() 或类似的东西可以清理输入。我梳理了附件扩展的代码，但找不到清理或保存输入的地方。

希望留在 Stackoverflow 的问答规则中：

是否有一个扩展类继承自 Joomla Core 以将表单数据保存到 DB 表（也可以负责清理和验证用户输入）？

谢谢你的任何想法，

托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T23:19:01.580

您应该首先看到该字段是如何定义的：

**1.表格定义**

调查

```
administrator/component/yourcomponent/models/forms/somename.xml 
```

在那里你可以找到一个表单定义，如果是这样，它还会指定字段类型：根据类型，有几个可用的过滤器；例如默认的 textarea 会去除 html，你需要设置

```
filter="raw" 
```

为了启用它。有关字段列表，请参阅[http://docs.joomla.org/Standard_form_field_and_parameter_types](http://docs.joomla.org/Standard_form_field_and_parameter_types)，单击您可以找到可用的格式选项。

**2.型号**

如果模型从 JModelAdmin 或 JModelForm 或其他 JModel* 继承，它将自动处理表单数据到数据库的绑定，查找应该接收表单 $data 的 Save 函数。

**3\. more** 至少还有十几种可能性。如果上述方法没有帮助，请尝试查找表单：可能您只需查看标记即可找到它。获得表格后，请检查以下字段：

*   选项
*   任务
*   看法

这应该可以帮助您找到基于表单调用的 php 代码：

*   如果设置了视图，也许在 ./views/someview/view.html.php 中你可以找到保存逻辑。
*   如果设置了任务，则在 ./controller.php 中查找具有相同名称的函数
*   如果任务包含“.”，则在 ./controllers/ 文件夹中查找控制器。
*   如果 option 不是您的组件的名称，则您的组件正在将数据发送到另一个组件进行保存，并且很可能设置了 return-url

# web-applications - Pub/Sub 如何通知登录订阅者应用程序的用户？

> ID：15394822
> 
> 赞同：0
> 
> 时间：2013-03-13T19:35:59.980
> 
> 标签：web-applications, ejb, soa, publish-subscribe

我在理论上知道 pub/sub 模式，现在我想在实践中实现它。

我有一个 Web 应用程序（订阅者），其中包含一个正在侦听名为“新闻”的频道的服务。此频道由其他应用程序（发布者）的列表填充。

所以，我想知道，如何实时通知登录用户收到的消息。（类似于 twitter “new twitts” 之类的东西）。

我的想法：

在我的消费者服务中，我可以将收到的新闻存储在列表中，例如：

```
@Consumer("myChannel")
public void recNews(New new) {
    allNews.add(new);
} 
```

然后，在我的应用程序中配置一个计时器来读取和重置该列表并将当前状态（lastNews）发送到我的网络控制器：

```
@Timer("1 per minute")
public void lastNews() {
    lastNews.add(allNews);
    allNews = new ArrayList();
} 
```

我对吗？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T05:48:55.690

我不会寻找构建自定义解决方案，而是关注 SignalR（[https://github.com/SignalR/SignalR/wiki](https://github.com/SignalR/SignalR/wiki)）。它为您处理了许多管道和基础架构问题，是 Web 应用程序的理想选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:01:14.797

订阅者在尝试接收之前告诉发布者（频道）它想要接收消息。Channel 不是一些被动的流程，它是一个主动的过程。

使用[Apache 骆驼](http://camel.apache.org/publish-subscribe-channel.html)。

或查看[IP 多播](http://en.wikipedia.org/wiki/IP_multicast)。

# asp.net - HTML 代码是否应该全部小写

> ID：15394823
> 
> 赞同：0
> 
> 时间：2013-03-13T19:36:02.733
> 
> 标签：asp.net, html, visual-studio-2010, coding-style, warnings

**编辑：**

答案是：

1.  `zackzurn`的回答。
2.  `jrummell`在这个问题下的评论。

* * *

当我对 HTML 属性使用大写字母时，Visual Studio 2010 会显示警告。例如，由于 and 中的大写字母，这将导致 2 个`cellPadding`警告`bgColor`：

`<table cellPadding="1" bgColor="whitesmoke" >`

警告：

`Validation (XHTML 1.0 Transitional): This name contains uppercase characters, which is not allowed.`

Google [HTML/CSS 编码标准](http://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml)建议只能使用小写字母。但有人可能会争辩说，大写字母有时会提高属性的可读性。

虽然一般 HTML 代码会显示警告，但在 ASP 元素中使用大写字母时不会出现警告。这不会产生任何警告：

`<asp:label id="lblProvider" CssClass="normalLabel1" Font-Bold="True" Runat="server">Select Provider Name:</asp:label>`.

**问题：**

1.  是否适合使用大写字母来提高 HTML 代码的可读性，还是应该只使用小写字母？
2.  为什么没有为`<asp: ... >`元素显示此警告？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:40:30.733

这是来自 XHTML 规范的页面：http: [//www.w3.org/TR/xhtml1/#h-4.2](http://www.w3.org/TR/xhtml1/#h-4.2)

引用如下：

> XHTML 文档必须为所有 HTML 元素和属性名称使用小写字母。这种差异是必要的，因为 XML 区分大小写，例如 <li> 和 <LI> 是不同的标记。

关于 ASP 标签不会引发错误，据我所知，Visual Studio 使用这些标签来生成兼容的 XHTML，而不是最终显示在 HTML 中的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:38:32.857

简单的回答：

如果您的文档类型是`XHTML 1.0 Transitional`您必须使用小写字符来通过验证器获取它。

如果您决定使用任何 HTML 文档类型，则可以在属性中使用大写字符。

# android - 在 Android NDK 中运行 Unix 二进制文件

> ID：15394825
> 
> 赞同：0
> 
> 时间：2013-03-13T19:36:06.977
> 
> 标签：android, linux, unix, android-ndk

（理论上）可以从 Android NDK 运行任何 Unix 二进制文件吗？我有以下可用的二进制文件：

```
.rpm, Redhat / CentOS 5.8 i386 RPM
.rpm, Redhat / CentOS 5.8 x86_64 RPM
.tar.gz, Solaris Sparc 2.10
.tar.gz, Cygwin
.tar.gz, MinGW 
```

还有一个 .tar.gz 可用，可以从 Unix Source 安装。该应用程序有可用的命令行工具，我希望利用 NDK 加以利用。例如：

```
convert image.jpg image.png 
```

虽然我刚刚开始浏览 NDK 示例和教程，但我想看看我想要实现的目标是否可行。

我不确定上述信息是否足以说明，但如果我可以提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:48:02.620

Android 是它自己的体系结构，因此针对 i386、x86_64、Solaris 等体系结构的文件将无法在那里工作。应该可以使用 NDK 将 Unix 源包转换为可在 Android 设备上运行的二进制文件。但是，这将是多么容易或困难取决于源本身所依赖的其他库或可能的操作系统功能。

# c# - SQL插入语法，数据库不更新

> ID：15394830
> 
> 赞同：0
> 
> 时间：2013-03-13T19:36:23.597
> 
> 标签：c#, sql, database, visual-studio-2010, insert

编辑

我更改了代码，所以我使用：[" + Time1 + "] 而不是参数。这是第一次工作，但是当时间增加 0.5 时，它仍然是错误的。当我尝试 MessageBox.Show("" + Time1 + ""); 时，for 循环正在工作 在 for 循环内。

```
for (double Time = time_began_5; Time < time_finished_5; Time = Time + 0.5)
        {
            string Time1 = Time.ToString("0.00");

            try
            {
                SqlConnection cn = new SqlConnection("Data Source=.\\SqlExpress;Initial Catalog=AllensCroft;Integrated Security=True;MultipleActiveResultSets=True;Application Name=EntityFramework;");

                cn.Open();
                SqlCommand Command = new SqlCommand("INSERT INTO Slots ([Date],[RoomID],[" + Time1 + "]) Values (@date,@room,1)", cn);
                Command.Parameters.AddWithValue("date", date);
                Command.Parameters.AddWithValue("room", rooms_combo.SelectedValue);

                Command.ExecuteNonQuery();

                try
                {
                    cn.Close();
                }
                catch (Exception e)
                {
                    Console.WriteLine(e.ToString());
                }

            }
            catch (Exception e)
            {
                Console.WriteLine(e.ToString());
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:42:53.207

1.  `@`您在第三列（时间）之前 有一个。
2.  添加参数时，您需要添加`@`.
3.  在您的插入语句中，您试图将 true 作为布尔值插入`time`列中。

```
SqlCommand Command = new SqlCommand("INSERT INTO Slots (Date,RoomID,time) " + "Values (@date,@room,@time)", cn);

Command.Parameters.AddWithValue("@date", date);
Command.Parameters.AddWithValue("@room", rooms_combo.SelectedValue);
Command.Parameters.AddWithValue("@time", Time); 
```

**编辑**评论后。尝试这个：

```
SqlCommand Command = new SqlCommand("INSERT INTO Slots (Date,RoomID,[" + Time1 + "]) " + "Values (@date,@room,@time)", cn);

Command.Parameters.AddWithValue("@date", date);
Command.Parameters.AddWithValue("@room", rooms_combo.SelectedValue);
Command.Parameters.AddWithValue("@time", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:38:58.707

您不能在列列表中包含变量，我假设您希望 @Time 出现在值列表中，以了解 true 的位置。

编辑：要将时间作为列名注入，请执行一些 C# 字符串操作：

```
SqlCommand Command = new SqlCommand("INSERT INTO Slots (Date, RoomID, [" + time + "]) Values (@date, @room, 1)", cn); 
```

再次编辑：true 不是 T-SQL 关键字，T-SQL 位列的值为 1 或 0

现在您不想将时间作为参数添加到查询中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:39:58.310

您将变量列为列名 (@time)

**编辑**
在这里：

`INSERT INTO Slots (Date, RoomID,` **--->>>** @time **<<<--- 危险会鲁滨逊，危险**

要修复它，您需要将其更改为表中的列名，或者将其删除。

所以像这样的东西，例如：

`INSERT INTO Slots (Date, RoomID, time)`

# c - 将文本文件读入双向链表

> ID：15394831
> 
> 赞同：0
> 
> 时间：2013-03-13T19:36:25.233
> 
> 标签：c, struct, io, doubly-linked-list

我正在使用双向链表编写联系人管理器，该双向链表由函数使用读取 contactList.txt 的指针进行操作。

```
#include<stdio.h>
#include<conio.h>
#include<string.h>
#include<process.h>
#include<stdlib.h>
#include<dos.h>

//functions
listelement * getFirst(listelement *listpointer,string query[MAX]);
void getLast();
void getEmail();
void getCompany();
void getNumber();
void editCon();
void delCon();
void addCon();
void listAll();
void sortCon();
void Menu (int *choice);

#define MAX 20
//struct to order contactList
struct contact
{
    string firstName[MAX],lastName[MAX],email[MAX],companyName[MAX];
    long phoneNum[MAX];
    struct listelement *link
    struct contact *next;
    struct contact *prev;

}list;

int main()
{
    listelement listmember, *listpointer;
    string query;int iChoice = 0;
    listpointer = NULL;

    Menu (&iChoice);
    int iChoice;

    fflush(stdin);
    scanf_s("%d", &iChoice);
    // user enters one of 9 values
    // options are as follows: get first name,last name,list all contacts,search through contacts,add a new contact,edit/delete or sort contacts.
    switch(iChoice)
    {
        case 1:     
        {
            printf ("Enter contact first name to get details  ");
            scanf ("%d", &query);
            listpointer = getFirst (listpointer, query);
            break;
        }
        case 2:     
        {
            getLast();
            break;
        }
        case 3:     
        {
            listAll();
            break;
        }
        case 4:     
        {
            getEmail();
            break;
        }
        case 5:     
        {
            getCompany();
            break;
        }
        case 6:     
        {
            getNumber();
            break;
        }
        case 7:     
        {
            addCon();
            break;
        }
        case 8:     
        {
            editCon();
            break;
        }
        case 9:     
        {
            delCon();
            break;
        }
        case 10:        
        {
            sortCon();
            break;
        }
        case 11:        // exit
        {
            printf("\n\nProgram exiting!...");
            exit(0);//terminates program
            break;
        }
        default:
        printf ("Invalid menu choice - try again\n");
        break;

    }//end of switch
    return(iChoice);

}//end of main
//menu function to test if invalid input was entered in a menu choice.
void Menu (int *iChoice)
{
    char    local;

    system("cls");
    printf("\n\n\t\\n\n");
    printf("\n\n\t\tWelcome to my Contact Manager\n\n");
    printf("\n\t\t1\. First name");
    printf("\n\t\t2\. Last name");
    printf("\n\t\t3\. List all contacts");
    printf("\n\t\t4\. Search email");
    printf("\n\t\t5\. Search company name");
    printf("\n\t\t6\. Search number");
    printf("\n\t\t7\. Add contact");
    printf("\n\t\t8\. Edit contact");
    printf("\n\t\t9\. Delete contact");
    printf("\n\t\t10\. Sort contacts");
    printf("\n\t\t11\. Exit");
    printf("\n\n\t\tEnter your menu choice: ");

    do
    {
    local = getchar ();
    if ( (isdigit(local) == FALSE) && (local != '\n') )
        {
        printf ("\nYou must enter an integer.\n");
        printf ("");
    }
    } while (isdigit ((unsigned char) local) == FALSE);

    *iChoice = (int) local - '0';
}

//function to get a contact by entering first name
listelement * getFirst (listelement *listpointer, string query)
{
    //variables
    char query[MAX],firstName[MAX];
    FILE *fp, *ft;
    int i,n,ch,l,found;

    system("cls");
    do
    {
    found=0;

    l=strlen(query);
    fp=fopen("ContactList.txt","r");

    system("cls");
    printf("\n\n..::Search result for '%s' \n===================================================\n",query);
    while(fread(&list,sizeof(list),1,fp)==1)
    {
    for(i=0;i<=l;i++)
    firstName[i]=list.firstName[i];
    firstName[l]='\0';
    if(stricmp(firstName,query)==0)
    {
    printf("\n..::First Name\t: %s\n..::Second Name\t: %ld\n..::Email\t: %s\n..::CompanyName\t:  %s\n..::Number\t:  %s\n",list.firstName,list.lastName,list.email,list.companyName.list.phoneNumber);
    found++;
    if (found%4==0)
    {
    printf("..::Press any key to continue...");
    getch();
    }
    }
    }

    if(found==0)
    printf("\n..::No match found!");
    else
    printf("\n..::%d match(s) found!",found);
    fclose(fp);
    printf("\n ..::Try again?\n\n\t[1] Yes\t\t[11] No\n\t");
    scanf("%d",&ch);
    }while(ch==1);

} 
```

有人知道我在代码中哪里出错了吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T19:46:02.193

您的错误是因为：

1）你没有`listelement`在任何地方定义

2）你没有`string`在任何地方定义（它不是 C 中的类型）

3）您需要在使用*之前*`#define MAX`将其向上移动。

 *4）你没有`FALSE`在任何地方定义（它不是 C 中的类型）

5）您也在重新定义元素，因为`getFirst()`您已`query`作为“字符串”传入，然后将新元素定义`query`为 char 数组

6）你得到重新定义错误，因为你有不止一个定义。这有点#5，但还有更多。在你的主要你`iChoice`在这里声明：`string query;int iChoice = 0;` 然后你`int iChoice;`在`your Menu()`调用后再次声明它

7) 请不要`fflush(stdin)`按照 C 标准这样做是未定义的行为*

# c++ - 在 C++ 中，std::something 和 ::std::something 有什么区别？

> ID：15394834
> 
> 赞同：1
> 
> 时间：2013-03-13T19:36:44.047
> 
> 标签：c++, std

在查看 C++ 代码时，有时我会看到使用 of`::std::ostream`而不是简单地`std::ostream`

额外的两个`::`需要什么？

`::std::ostream`来自[https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#teaching-googletest-how-to-print-your-values](https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#teaching-googletest-how-to-print-your-values)的使用示例：

```
::std::ostream& operator<<(::std::ostream& os, const Bar& bar) {
  return os << bar.DebugString();  // whatever needed to print bar to os
} 
```

# c# - 调度程序没有创建新线程

> ID：15394839
> 
> 赞同：0
> 
> 时间：2013-03-13T19:36:49.127
> 
> 标签：c#, wpf, multithreading, frame, dispatcher

首先，对不起我的英语。

我正在制作一个带有框架和页面的 WPF/C# 应用程序。

当我尝试快速更改显示的页面 4 或 5 次时，程序开始冻结，我需要等待。

我被迫使用 Dispatcher 使页面在后台加载，因此它们不会冻结整个应用程序。但还是冻僵了。调度程序似乎没有调用新线程。

我正在使用以下代码：

```
this.Dispatcher.Invoke((Action)(() =>         // BeginInvoke also don't work
{
    Page1 p = new Page1();
    Frame1.NavigationService.RemoveBackEntry();
    Frame1.Content = p;
})); 
```

仍然冻结！有什么帮助吗？

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T19:40:28.530

> 我被迫使用调度程序使页面在后台加载

这不是强制它们加载到后台线程上，而是强制它们加载到调度程序的线程上。

# c# - Foreach 循环 File.Readlines 不显示任何内容

> ID：15394841
> 
> 赞同：0
> 
> 时间：2013-03-13T19:36:50.753
> 
> 标签：c#, foreach, readlines

我有一个 foreach 循环，当我单击按钮时，它应该显示 txt 文件中的行。单击按钮时没有显示任何内容。我究竟做错了什么？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;

namespace WebApplication1
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Main(object sender, EventArgs e)
        {
            foreach (string line in File.ReadLines(@"C:\Users\Matt\Desktop\AirportCodes2.txt"))
            {
                if (line.Contains("Chicago"))
                {
                    Console.WriteLine(line);
                }
            }
        }
    }
} 
```

文本文件以制表符分隔，格式如下：

芝加哥 IL ORD 奥黑尔国际

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T19:39:14.183

既然是网页表单，就挂上页面的Page_Load事件。但我建议通过 ASP.NET 页面生命周期来了解预定义事件。

```
 protected void Page_Load(object sender, EventArgs e)
 {
     foreach (string line in File.ReadLines(@"C:\Users\Matt\Desktop\AirportCodes2.txt"))
     {
         if (line.Contains("Chicago"))
         {
                 Response.Write(line);
         }
     }
} 
```

由于它是 Web 应用程序，请将 txt 文件放在 App_Data 文件夹中，然后使用 Server.MapPath 函数访问它。原因是路径可能与本地计算机以及您最终将其部署到 Web 服务器时不同。

导入`using System.Text;`命名空间

```
 StringBuilder result = new StringBuilder();
 int i = 0;
 foreach (string line in File.ReadLines(Server.MapPath("~/App_Data/AirportCodes2.txt")))
 {
       if (line.Contains("Chicago"))
       { 
           i = i + 1;
           result.Append((string.Format("label{0}:{1}",i,line));
           result.Append("<br/>");
       }
}
lblAirportCodes = result.ToString(); 
```

**在 aspx 中：**

```
<asp:Label runat="server" id="lblAirportCodes"/> 
```

# php - 获取 GROUP_BY 值作为字符串

> ID：15394844
> 
> 赞同：1
> 
> 时间：2013-03-13T19:36:52.743
> 
> 标签：php, mysql, sql, group-by, group-concat

我有一个名为问题的简单表格：

```
id | asker
 1 | Bob
 2 | Marley
 3 | Bob 
```

我想获得一个以逗号分隔的询问者值列表。我使用以下查询：

```
SELECT GROUP_CONCAT(asker) FROM questions 
```

这将导致：

```
Bob,Marley,Bob 
```

我希望它得到这样的结果：

```
'Bob','Marley','Bob' 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T19:38:07.823

原版在 mySQL 中不太适用。

解决 Wrikken 非常有道理的担忧

```
SELECT GROUP_CONCAT(concat('''',asker,'''')) FROM questions 
```

# apache2 - 使用 cPanel 提供的 Apache 2.4 时无法安装 mod_pagespeed

> ID：15394845
> 
> 赞同：-1
> 
> 时间：2013-03-13T19:36:53.030
> 
> 标签：apache2, centos, cpanel, mod-pagespeed

将 Apache 升级到 2.4 后，我无法安装 mod_pagespeed，因为它声称我的版本低于 2.2。

```
# yum install mod-pagespeed-beta --skip-broken
...
Setting up Install Process
Resolving Dependencies
--> Running transaction check
---> Package mod-pagespeed-beta.x86_64 0:1.3.25.3-2556 will be installed
--> Processing Dependency: httpd >= 2.2 for package: mod-pagespeed-beta-1.3.25.3-2556.x86_64

Packages skipped because of dependency problems:
    mod-pagespeed-beta-1.3.25.3-2556.x86_64 from mod-pagespeed 
```

我已经使用`httpd -v`命令检查了我的 apache 版本：

```
Server version: Apache/2.4.4 (Unix) 
```

似乎版本比较脚本不喜欢 Unix 部分。除了降级之外，有没有解决这个问题的方法？

## 更新

服务器环境为 CentOS 6.4, Kernel`2.6.32-358.2.1.el6.x86_64`

我已将 Apache 降级到 2.2.24 版本，但版本格式仍然相同：

```
Server version: Apache/2.2.24 (Unix)
Server built:   Mar 14 2013 09:32:50
Cpanel::Easy::Apache v3.18.6 rev9999 
```

安装程序仍然不喜欢我的 Apache 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:06:40.933

> 似乎版本比较脚本不喜欢 Unix 部分。除了降级之外，有没有解决这个问题的方法？

实际情况并非如此。 *`yum`*抱怨 RPM 依赖项：

```
Processing Dependency: httpd >= 2.2 for package: mod-pagespeed-beta-1.3.25.3-2556.x86_64 
```

出于某种原因，它认为您没有安装现代 Apache 版本。你是如何安装 Apache 2.4 的？如果您使用的是 Redhat Enterprise Linux 或衍生产品（CentOS、Scientific Linux 等），这是一个非常重要的问题，因为RHEL 家族*无法*以任何官方方式使用 2.4。他们附带 2.2。您需要从第三方 RPM 存储库安装 2.4，或者您需要自己编译。

鉴于 RPM 命名非常简单，我敢打赌你自己编译了它。编译软件包并直接安装它（不从已编译的二进制文件创建 RPM 并安装*它*）将*无法*满足 RPM 给出的要求。

即使它*确实*满足了要求，您自己的本机编译的 Apache*也可能*不会从您选择该 mod_pagespeed RPM 的任何地方安全或明智地加载预编译的二进制文件。

如果您自己编译 Apache 2.4，[您将需要自己编译 mod_pagespeed](https://developers.google.com/speed/docs/mod_pagespeed/build_from_source)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-13T20:15:28.817

请尝试以下

```
yum install at

wget https://dl-ssl.google.com/dl/linux/direct/mod-pagespeed-stable_current_x86_64.rpm

rpm -u mod-pagespeed-stable_current_x86_64.rpm 
```

参考：[https ://developers.google.com/speed/docs/mod_pagespeed/download](https://developers.google.com/speed/docs/mod_pagespeed/download)

# java - Java - 可以使用套接字来访问远程对象吗？

> ID：15394846
> 
> 赞同：-2
> 
> 时间：2013-03-13T19:36:53.713
> 
> 标签：java, rmi

我已经学习了创建套接字和 RMI 的基础知识。

问题是套接字可以用来做什么？我在 SO 中看到了这篇关于使用套接字将字符串对象发送到服务器程序的帖子。

[Java：套接字还是 RMI？](https://stackoverflow.com/q/2620687/547453)

那么，在服务器中得到这个String对象后，我可以访问数据库并存储它吗？而当客户端需要访问这个字符串对象时，服务器如何检索它的数据库并将其发送给客户端？这可以**仅**使用套接字来完成吗？

我知道我们可以使用 RMI 做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:40:13.990

好吧，您可以序列化您的 Java 对象，创建一个可以通过套接字连接发送的流，然后读取该流并对其进行反序列化。这+一些实用程序基本上就是 RMI 所做的。但是如果你愿意的话，你可以自己做。

像这样的东西：

```
InputStream is = socket.getInputStream();   
ObjectInputStream ois = new ObjectInputStream(is);   
TestObj obj = (TestObj)ois.readObject();  

class TestObj implements Serializable {  
  //your class
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:46:03.370

套接字提供对网络流的低级访问，几乎所有其他东西都建立在`Socket`实例`ServerSocket`之上。

RMI 使用套接字来实现一个标准协议，供 RMI 服务器和 RMI 客户端进行通信。

基本上使用套接字你可以实现任何基于网络的东西，只要它在 TCP 上运行（或者如果你使用`DatagramSocket`实例，则为 UDP）

在这种情况下，如果您需要额外的性能，您将使用套接字，因为您没有 RMI 协议的开销来减慢通信速度。

在 RMI 中，您将返回一个字符串，并且所有内容都将由 RMI 为您包装，但如果您使用套接字，则使用`ObjectOutputStream`来自服务器的字符串序列化字符串并`ObjectInputStream`在客户端使用反序列化。

# spring - 带有 Spring Security 的 Spring Social - 在 SignInAdapter 之后调用 UserDetailsS ervice

> ID：15394855
> 
> 赞同：2
> 
> 时间：2013-03-13T19:37:13.847
> 
> 标签：spring, spring-mvc, spring-security, spring-social

我首先实现了 Spring Security 并让它与持久令牌方法一起工作。然后我实施了 Spring Social，经过长期的努力，终于能够让它工作。正在我的 UserConnection 表中创建相应的行。

我的问题是，当用户使用 Facebook 登录我的应用程序时，我的 SignInAdapterImp 会被调用。我在这里进行用户身份验证。但是随后，我的 UserDetailsS​​erviceImp 立即被调用，这实际上是在尝试再次对用户进行身份验证。这是我为验证非社交用户而设置的类。

我猜这与我的 Spring Security 设置有关，所以我发布了我的 security.xml 文件。任何和所有的帮助表示赞赏。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans
   xmlns="http://www.springframework.org/schema/security"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:beans="http://www.springframework.org/schema/beans"
   xmlns:sec="http://www.springframework.org/schema/security"
   xsi:schemaLocation="
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.1.xsd
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

<!-- To allow standards-based @Secured annotation -->
<!-- global-method-security secured-annotations="enabled" /-->

<!-- http pattern="/signup" security="none"/>
<http pattern="/singin" security="none"/ -->

<http create-session="stateless" entry-point-ref="restAuthenticationEntryPoint" use-expressions="true">
    <intercept-url pattern="/connect/**" access="ROLE_USER" />
    <!--NOT NEEDED WITH ANNOTATIONS:  intercept-url pattern="/services/schedule/**" access="ROLE_USER, ROLE_ADMIN"/ -->    
    <custom-filter ref="userPassAuthenticationFilter" before="FORM_LOGIN_FILTER"/>
    <custom-filter ref="rememberMeFilter" position="FIRST" />
    <!-- Adds a logout filter to Spring Security filter chain -->
    <logout logout-url="/services/auth/logout" delete-cookies="true" invalidate-session="true" success-handler-ref="restLogoutSuccessHandler"/>
    <remember-me key="rememberMeKey" user-service-ref="customUserDetailsService"/>
</http>

<!--  initialized the AuthenticationEntryPoint bean -->
<beans:bean id="restAuthenticationEntryPoint" class="com.touchvision.pilot.security.RestAuthenticationEntryPoint" />

<!-- the customAuthenticationFilter custom filter definition -->
<beans:bean id="userPassAuthenticationFilter" class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
    <beans:property name="authenticationManager" ref="authenticationManager"/>
    <beans:property name="rememberMeServices" ref="rememberMeServices"/>
    <beans:property name="authenticationSuccessHandler" ref="mySuccessHandler"/>
    <beans:property name="filterProcessesUrl" value="/services/auth/login"/>
    <beans:property name="usernameParameter" value="username"/>
    <beans:property name="passwordParameter" value="password"/>
    <beans:property name="postOnly" value="false"/>
</beans:bean>

<!-- the Remember Me bean definition -->
<beans:bean id="rememberMeServices" class="org.springframework.security.web.authentication.rememberme.PersistentTokenBasedRememberMeServices">
    <beans:property name="key" value="springRocks"/>
    <beans:property name="alwaysRemember" value="true" /> 
    <!-- NOT NEEDED WITH ALWAYSREMEMBER:  beans:property name="parameter" value="persistLogin"/ --> <!-- This is used to change the param from _spring_security_remember_me -->
    <beans:property name="userDetailsService" ref="customUserDetailsService"/>
    <beans:property name="tokenRepository" ref="tokenRepository"/>
</beans:bean>

<!-- the remember-me filter bean -->
<beans:bean id="rememberMeFilter" class="org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter">
    <beans:property name="rememberMeServices" ref="rememberMeServices"/>
    <beans:property name="authenticationManager" ref="authenticationManager" />
</beans:bean>

<!-- the remember-me authentication provider bean definition -->
<beans:bean id="rememberMeAuthenticationProvider" class="org.springframework.security.authentication.RememberMeAuthenticationProvider">
    <beans:property name="key" value="springRocks"/>
</beans:bean>

<!-- Instantiates the bean for the token provider -->
<beans:bean id="tokenRepository" class="org.springframework.security.web.authentication.rememberme.JdbcTokenRepositoryImpl">
    <beans:property name="createTableOnStartup" value="false"/>
    <beans:property name="dataSource" ref="dataSource"/>
</beans:bean>

<!-- Configures a custom authentication success handler that returns HTTP status code 200 -->
<beans:bean id="mySuccessHandler" class="com.touchvision.pilot.security.RestAuthenticationSuccessHandler"/>

<!-- Configures a custom authentication failure handler that returns HTTP status code 401 -->
<beans:bean id="restAuthenticationFailureHandler" class="com.touchvision.pilot.security.RestAuthenticationFailureHandler"/>

<!-- Configures a custom logout success handler that returns HTTP status code 200 -->
 <beans:bean id="restLogoutSuccessHandler" class="com.touchvision.pilot.security.RestLogoutSuccessHandler"/>

<!-- Declare an authentication-manager to use a custom userDetailsService -->
<authentication-manager alias="authenticationManager">
        <authentication-provider user-service-ref="customUserDetailsService">
                <password-encoder ref="passwordEncoder"/>
        </authentication-provider>          
        <authentication-provider ref="rememberMeAuthenticationProvider" />
</authentication-manager>

<!-- Use a Md5 encoder since the user's passwords are stored as Md5 in the database -->
<beans:bean class="org.springframework.security.authentication.encoding.Md5PasswordEncoder" id="passwordEncoder"/>

<!-- A custom service where Spring will retrieve users and their corresponding access levels  -->
<beans:bean id="customUserDetailsService" class="com.touchvision.pilot.security.CustomUserDetailsService"/> 

</beans:beans> 
```

**编辑：** 这是我的 SignInAdapter signIn() 实现：

```
@Override
public String signIn(String localUserId, Connection<?> connection, NativeWebRequest request) {
    logger.info("*************** in SignInAdapterImp signIn() w/ localUserId = " + localUserId +" ****************" );

    User user = userRepo.findById(Integer.parseInt(localUserId));

    // Create a list of grants for this user
    List<GrantedAuthority> authorities = new ArrayList<GrantedAuthority>();
    logger.info("Grant ROLE_USER to this user");
    authorities.add(new GrantedAuthorityImpl("ROLE_USER"));

    Authentication authentication = new UsernamePasswordAuthenticationToken(user.getEmail(), user.getPassword(), authorities);
    SecurityContextHolder.getContext().setAuthentication(authentication);

    // set remember-me cookie
    persistentTokenRememberMeServices.loginSuccess(
        (HttpServletRequest) request.getNativeRequest(),
        (HttpServletResponse) request.getNativeResponse(),
        authentication);

    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T03:01:48.833

原来我在 http 过滤器列表中有一个重复的过滤器。我为记住我的功能定义了 2 个过滤器。这是最终实现的过滤器集：

```
<http entry-point-ref="restAuthenticationEntryPoint" use-expressions="true">
        <!--NOT NEEDED WITH ANNOTATIONS:  intercept-url pattern="/services/schedule/**" access="ROLE_USER, ROLE_ADMIN"/ -->    
        <custom-filter before="FORM_LOGIN_FILTER" ref="userPassAuthenticationFilter" />
        <custom-filter position="REMEMBER_ME_FILTER" ref="rememberMeFilter"  />
        <custom-filter position="LOGOUT_FILTER" ref="logoutFilter" />       
    </http> 
```

# c# - 查看布局未按预期显示

> ID：15394867
> 
> 赞同：0
> 
> 时间：2013-03-13T19:37:57.207
> 
> 标签：c#, android, android-layout, xamarin.android, xamarin

我正处于我要松开它的地步。

问题：我将**GraphInWebView**膨胀到名为 formDialog（其他文件）的布局中 `formDialog.AddView(LayoutInflater.Inflate(Resource.Layout.GraphInWebview, null));`

仅此一项就完美了，但是一旦我尝试将**LineItem**膨胀到**GraphInWebView**的 **@+id/SideWidget**中，后者就永远不会显示。

我检查了源代码 - **LineItem**视图已膨胀，但并未嵌套在 SideWidget 中

我有以下 xml 文件。

**GraphInWebview.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
  <WebView
      android:id="@+id/graphView"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:background="#00FF00"/>
  <LinearLayout
        android:id="@+id/SideWidget"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#0000FF">
  </LinearLayout>
</LinearLayout> 
```

**lineItem.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
       android:orientation="vertical"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent">
  <RelativeLayout
      android:layout_width="fill_parent"
      android:layout_height="wrap_content">
    <ImageView
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:src="@drawable/Icon"
      android:maxHeight="5dp"
      android:maxWidth="5dp"
      android:id="@+id/icon"
      android:layout_alignParentBottom="true"
          android:layout_alignParentLeft="true"/>
    <TextView
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="Appointment: Appointment with Spur Cresta"
      android:id="@+id/appointmentTitle"
      android:minWidth="60dp"
      android:layout_alignParentBottom="true"
      android:layout_toRightOf="@+id/icon"/>
  </RelativeLayout>
  <TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Appointment: Appointment with Spur Cresta"
    android:id="@+id/appointmentText"
    android:minWidth="60dp"/>
</LinearLayout> 
```

**C＃**

```
 //First inflate views to be injected into the default action bar
        formDialog.AddView(LayoutInflater.Inflate(Resource.Layout.googleGraphInWebview, null));

        manageScheduleButton = (Button)FindViewById(Resource.Id.ManageButton);
        locationalServicesButton = (Button)FindViewById(Resource.Id.LocationalServicesButton);
        myProfileButton = (Button)FindViewById(Resource.Id.MyProfileButton);
        myClientsButton = (Button)FindViewById(Resource.Id.MyClientsButton);

        manageScheduleButton.Click += ManageScheduleMenuClick;
        locationalServicesButton.Click += locationalServicesButtonClick;
        myProfileButton.Click += myProfileButtonClick;
        myClientsButton.Click += myClientsButtonClick;

        formDialog.SetMinimumHeight(400);

        WebView graph = FindViewById<WebView>(Resource.Id.graphView);
        LinearLayout sideWidget = FindViewById<LinearLayout>(Resource.Id.SideWidget);
        sideWidget.AddView(LayoutInflater.Inflate(Resource.Layout.LineItem, null));

        graph.Settings.JavaScriptEnabled = true;
        graph.SetWebViewClient(new webView(formDialog));
        graph.LoadUrl("file:///android_asset/graph.html"); 
```

任何人都可以建议解决这个问题的方法吗？

问候

一种

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:30:50.383

我想通了....机器人`layout_weight`是关键...

Given a view where two layouts both request, for example, `fill_parent`, the, for example, wanting them to share the view 40 - 60 you would assign to one `layout_weight=4` and to the other `layout_weight=6`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
  <WebView
      android:id="@+id/graphView"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:background="#00FF00"/>
  <LinearLayout
        android:id="@+id/SideWidget"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#0000FF">
  </LinearLayout>
</LinearLayout> 
```

I post the finished code

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
      <WebView
          android:id="@+id/graphView"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_wight="2"
            android:background="#00FF00"/>
      <LinearLayout
        android:id="@+id/SideWidget"
        android:orientation="vertical"
        android:layout_wight="1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="#0000FF">
  </LinearLayout>
</LinearLayout> 
```

# google-analytics - Google 目标正在跟踪，但标签未显示在 GA 中。如何修复它，以便标签在 GA 中出现

> ID：15394870
> 
> 赞同：0
> 
> 时间：2013-03-13T19:38:05.697
> 
> 标签：google-analytics

我将 GA 事件跟踪附加到网站主页上的一个选项卡上。[http://www.positivepromotions.com/](http://www.positivepromotions.com/)

```
<a onclick="_gaq.push(['_trackEvent', 'weeklySpecial', 'Click', 'weeklySpecialTab']); window.location='http://www.positivepromotions.com/weekly-special/a/315/'"></a> 
```

在 GA 中查看目标结果时，我的结果中出现“/”。我检查了我在 GA 中的设置，并将其设置为与每周特殊标签匹配的标签。

我究竟做错了什么？我希望标签名称显示在我的报告中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:41:20.043

报告为您提供触发事件的页面（在您的情况下始终是主页 /）。我想对您来说最简单的方法是自定义报告：

> 自定义->新建自定义报告->维度“事件标签”->（您喜欢的其他维度）->指标“目标完成X”（将X替换为目标的数字索引）->过滤器“事件类别”设置为“每周特刊”。

我认为标准报告中没有您想要的报告。

# opencl - 需要帮助了解 OpenCL 减少

> ID：15394882
> 
> 赞同：0
> 
> 时间：2013-03-13T19:38:42.810
> 
> 标签：opencl

我一直在阅读以下说明：http: [//developer.amd.com/resources/documentation-articles/articles-whitepapers/opencl-optimization-case-study-simple-reductions/](http://developer.amd.com/resources/documentation-articles/articles-whitepapers/opencl-optimization-case-study-simple-reductions/)

以下内核应该减少一大块数据，其中一部分我根本不明白。

```
while (global_index < length) ....  global_index += get_global_size(0) 
```

我相信从顺序布局的全局存储中读取数据会更聪明。这意味着在 k、k+1、k+2 处读取数据比读取 k+1000、k+2000、k+3000 更快。这不是他们在说 global_index += get_global_size(0) 时所做的吗？

```
__kernel
void reduce(__global float* buffer,
            __local float* scratch,
            __const int length,
            __global float* result) {

  int global_index = get_global_id(0);
  float accumulator = INFINITY;
  // Loop sequentially over chunks of input vector
  while (global_index < length) {
    float element = buffer[global_index];
    accumulator = (accumulator < element) ? accumulator : element;
    global_index += get_global_size(0);
  }

  // Perform parallel reduction
  int local_index = get_local_id(0);
  scratch[local_index] = accumulator;
  barrier(CLK_LOCAL_MEM_FENCE);
  for(int offset = get_local_size(0) / 2;
      offset > 0;
      offset = offset / 2) {
    if (local_index < offset) {
      float other = scratch[local_index + offset];
      float mine = scratch[local_index];
      scratch[local_index] = (mine < other) ? mine : other;
    }
    barrier(CLK_LOCAL_MEM_FENCE);
  }
  if (local_index == 0) {
    result[get_group_id(0)] = scratch[0];
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:40:15.947

工作项 0,1,2,3,... 将首先并行读取缓冲区索引 0,1,2,3,...（这通常是内存访问的最佳情况），然后是 1000,1001,1002 ,1003,... 并行等

请记住，内核代码中的每条指令都将由所有工作项“并行”执行。

# jquery - 使用 jQuery 获取阴影样式

> ID：15394883
> 
> 赞同：0
> 
> 时间：2013-03-13T19:38:43.117
> 
> 标签：jquery, css

我有一个 div将应用[一些 CSS 阴影。](http://www.w3schools.com/cssref/css3_pr_box-shadow.asp)我需要使用 jQuery 获取以下阴影元素：

*   `h-shadow`, `v-shadow`,`blur`和`spread`像素
*   `color` *阴影的*，在一些字符串中，不管怎样
*   `inset`, 如果它被应用在`box-shadow`属性中。

怎么做？是否有一些特定的 CSS 属性，比如`border-top-right-radius`获取右上角的边框半径而不是使用`border-radius`?

* * *

所以，示例代码：

```
<div id="the_div" style="box-shadow:10px 10px 5px 2px #f00 inset;">...</div> 
```

现在一些JavaScript...

```
$(function(){
    $('#the_div').someFunction(); // returns the h-shadow, for example
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:48:59.277

你想要的是这种东西：

[jQuery获取文本阴影变量](https://stackoverflow.com/questions/2683260/jquery-getting-text-shadow-variabile)

基本上，解决方案只是使用一些正则表达式将文本阴影拆分为`color`、`y`、`x`和`blur`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:45:43.303

```
jQuery("#divID").css("color"); 
```

这将获得颜色 - jQuery 将获得您要求的 css 属性：[jQuery CSS](http://api.jquery.com/css/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:47:47.527

```
alert($('.myElementClass').css('box-shadow)); 
```

```
<!DOCTYPE html>
<html>
<head>
<style>
div.xxx {
    position: relative;
    background-color: #abc;
    width: 40px;
    height: 40px;
    float: left;
    margin: 5px;
    box-shadow: 10px 10px 5px #888888;
}
</style>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<p><button id="go">Run »</button></p>
<div class="xxx"></div>
<script>
    $( "#go" ).click(function(){
        alert($('.xxx').css('box-shadow'));
    });
</script>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T19:49:53.663

您需要使用：

```
$("#divID").css("box-shadow"); 
```

然后解析返回的字符串以获得所需的属性。由于字符串可能会有所不同，我不打算写出一个函数。但是你应该可以从这里拿走它。

编辑：因为不同的浏览器行为不同，您可以使用此处的最佳答案检查浏览器[。](https://stackoverflow.com/questions/10257810/javascript-check-browser)

您在之前对另一个答案的评论中链接到的答案也回答了您的问题。可以在[这里找到](https://stackoverflow.com/a/2683393/1544337)

# node.js - 咖啡脚本语法 {var}？

> ID：15394886
> 
> 赞同：0
> 
> 时间：2013-03-13T19:38:51.197
> 
> 标签：node.js, coffeescript

很简单，我在节点中看到了以下使用 coffeescript 的语法，而我从未在浏览器中看到过使用 coffeescript。

```
 {foo} = app.locals.foo 
```

我前往 js2coffee 看看这是做什么的，但它在 js 输出中似乎与

```
 foo = app.locals.foo 
```

那么这里发生了什么？`{}`在这种情况下，语法是什么意思？你为什么要使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T19:50:59.703

来自[精美手册](http://coffeescript.org/#destructuring)：

> **解构赋值**
> 
> 为了更方便地从复杂的数组和对象中提取值，CoffeeScript 实现了 ECMAScript Harmony 提出的解构赋值语法。当您将数组或对象字面量分配给值时，CoffeeScript 会分解并匹配双方，将右侧的值分配给左侧的变量。
> [...]
> 解构赋值可用于任何深度的数组和对象嵌套，以帮助提取深度嵌套的属性。

相关的例子是这个：

```
futurists =
  sculptor: "Umberto Boccioni"
  painter:  "Vladimir Burliuk"
  poet:
    name:   "F.T. Marinetti"
    address: [
      "Via Roma 42R"
      "Bellagio, Italy 22021"
    ]

{poet: {name, address: [street, city]}} = futurists 
```

这是这个的简写：

```
name   = futurists.poet.name
street = futurists.poet.address[0]
city   = futurists.poet.address[1] 
```

[你可以在这里](http://coffeescript.org/#try:futurists%20%3D%0A%20%20sculptor%3A%20%22Umberto%20Boccioni%22%0A%20%20painter%3A%20%20%22Vladimir%20Burliuk%22%0A%20%20poet%3A%0A%20%20%20%20name%3A%20%20%20%22F.T.%20Marinetti%22%0A%20%20%20%20address%3A%20%5B%0A%20%20%20%20%20%20%22Via%20Roma%2042R%22%0A%20%20%20%20%20%20%22Bellagio%2C%20Italy%2022021%22%0A%20%20%20%20%5D%0A%0A%7Bpoet%3A%20%7Bname%2C%20address%3A%20%5Bstreet%2C%20city%5D%7D%7D%20%3D%20futurists%0A%0Aconsole.log(name%2C%20street%2C%20city))看到它的作用。

基本上，解构赋值的对象形式允许您以某种自然的方式解包对象。也许一个更简单的例子会有所帮助：

```
o =
    a: 'b'
    c: 'd'
    e: 'f'

{a, e} = o 
```

这是以下的简写：

```
a = o.a
e = o.e 
```

和另一个[演示](http://coffeescript.org/#try:o%20%3D%0A%20%20%20%20a%3A%20'b'%0A%20%20%20%20c%3A%20'd'%0A%20%20%20%20e%3A%20'f'%0A%0A%7Ba%2C%20e%7D%20%3D%20o%0Aconsole.log(a%2C%20e))。

您可以将解构赋值的左侧视为用于解包右侧的模式。

# c - 通过指针传递参数

> ID：15394890
> 
> 赞同：0
> 
> 时间：2013-03-13T19:38:55.963
> 
> 标签：c

我的问题是，当“parr”打印时，'''''''''''得到零而不是“arrival_time”的内容。请帮忙。

```
void find_closest_flight(int desired_time, int *departure_time, int *arrival_time)
{
.......
    if (arr_time[i]-desired_time<=abs(temp))
    {
        .....
        *arrival_time=arr_time[i];
        ......
    }
    ......

  }
}

void main()
{
int hr=0; int min=0; int num; int arr=0; int depar=0;
    int *parr = &arr;
    int *pdepar = &depar;

......

num= hr * 60 + min;

find_closest_flight(num, parr, pdepar);

printf("%d", parr);
system ("pause");

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:00:18.617

您正在传递一个指向 value 而不是 value 的指针`printf`：

```
printf("%d\n", *parr); 
```

# javascript - 每次“加载”后增加数字的值

> ID：15394892
> 
> 赞同：0
> 
> 时间：2013-03-13T19:39:03.853
> 
> 标签：javascript, jquery

我正在为我的页面构建简单的“延迟加载”。这是我到目前为止所得到的：

```
function scrollBottom() {
    $(window).scroll(function () {
        if ($(window).height() + $(window).scrollTop() == $(document).height()) {
            var count = 1;
            var link = 2;
            var biglink = $('div.nav a').attr('href');
            var biglink = biglink.split('/page/');
                $('div.nav').before('<div class="lazy"></div>');

                $('div.lazy').load(biglink[0] + '/page/' + link + ' div.cnt > * ', function() {
                    link = parseInt(link.value++);
                });
        }
    });
} 
```

（请注意，此代码非常 WIP，因此不需要很多变量等）。

我的问题是，`link`价值总是`2`. 它永远不会变得更高。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:40:28.800

尝试

```
link = parseInt(link.value);
link++; 
```

# matlab - TCP IP 对等连接 Matlab

> ID：15394893
> 
> 赞同：1
> 
> 时间：2013-03-13T19:39:09.467
> 
> 标签：matlab, tcp

我正在运行一个程序，在该程序中，我使用 Instrument control 工具箱在一台机器上建立了与另一台机器的服务器和客户端连接，因此它最终或多或少地充当对等连接。

该代码第一次在 2 台单独的机器上运行时运行良好，但有时它不会在第二次尝试时运行，或者如果我让 Matlab 保持打开状态并稍后尝试运行它，它不会运行。我得到的只是一个程序试图找到服务器，而另一个程序已经打开了服务器连接，但他们从来没有找到对方。

打开连接的代码（客户端代码非常相似）：

```
function connectionServer = openRecieve(client, port)
t = tcpip(client, port, 'NetworkRole', 'Server');
set(t, 'InputBufferSize', 3000000); 
% Open connection to the client.
fopen(t);
fprintf('%s \n','Client Connected');
connectionServer = t;
set(connectionServer,'Timeout',.1);
end 
```

关闭连接的代码：

```
function closeConnection(connection)
%UNTITLED Summary of this function goes here
%   Detailed explanation goes here

fclose(connection); 
delete(connection); 
clear connection;

end 
```

我认为这与超时没有任何关系，因为它们在第一次连接和运行时没有问题。

我还补充说：

```
clc
clear all 
```

到我程序的结尾和开头，有时在第二次或第三次运行时仍然无法连接。

任何想法表示赞赏

# php - 在使用 PHP 的文件搜索中使用扩展的 ascii 代码作为第二个字符串

> ID：15394900
> 
> 赞同：0
> 
> 时间：2013-03-13T19:39:31.903
> 
> 标签：php, string, ascii

第一件事。如果我选择不同的字符串而不是有问题的字符，这可以工作并且仍然可以工作。

以下代码用于查找文件中所需数据块的所有出现。每个块都以“3476 DSR”开头，以“Å”结尾。人物的具体情况如下：

DEC OCT HEX BIN 符号 HTMLNumber HTMLName 描述

197 305 C5 11000101 Å \Å\; \＆戒指\; 上面带环的拉丁文大写字母 A

代码是：

```
$path = 'report';
$file = $_POST['select'];
$filepath = $path . DIRECTORY_SEPARATOR . $file;

$report = file_get_contents($filepath,'r');

$string1 = "3476 DSR";
$string2 = "Å";

preg_match_all("(".preg_quote($string1).".*?".preg_quote($string2).")s",$report,$matches);

echo '<div class="output">';

foreach ($matches[0] as $value) {

echo "<pre>";
echo $value;
echo "</pre>";

}

echo '</div>'; 
```

这工作正常，直到它没有，并且在调查中我发现扩展的 ascii 字符已被替换为看起来像八角形内的问号。换回原来的字符后，我仍然无法让它工作。如果我对 ascii 字符使用不同的字符串，则代码可以正常工作，但显然没有给出正确的数据。

很难找到与此相关的任何内容，我尝试使用上面的不同标识符但没有运气。

有人知道这里可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:14:57.497

问题是您正在使用的编辑器（在我看来是正确的）希望您的文件是 UTF-8。由于不是，它用“缺失字符”占位符替换了您的字符，该占位符具有不同的二进制值，因此您不会在文档中找到它。

由于您知道您希望角色具有的二进制值 (0xC5)，因此您可以使用十六进制转义序列`\xC5`在源文件中表示它，而不必担心期望 Unicode 的编辑器会扼杀它。

# nginx - 使用上游 SSL 的 Nginx 负载平衡

> ID：15394904
> 
> 赞同：15
> 
> 时间：2013-03-13T19:39:48.827
> 
> 标签：nginx, ssl

尝试将 Nginx 设置为 https 服务器的负载均衡器。上游通过配置了 SSL 证书的端口 443 提供服务。如何配置 Nginx，使 SSL 证书配置只在上游服务器上处理，而不在 Nginx 服务器上处理？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T02:44:04.880

您需要使用[上游模块](http://nginx.org/en/docs/http/ngx_http_upstream_module.html)和[反向代理模块](http://nginx.org/en/docs/http/ngx_http_proxy_module.html)。要反向代理到 https 上游，请使用此

```
proxy_pass  https://backend; 
```

其中后端是上游块。

但是，如果我这样做，我会在 nginx 服务器上终止 ssl，并让上游应用程序服务器做他们擅长的事情：提供内容，而不是担心 ssl 加密/解密开销。[使用SSL 模块](http://nginx.org/en/docs/http/ngx_http_ssl_module.html)在 nginx 上设置 ssl 终止也非常简单。[这里](http://wiki.nginx.org/SSL-Offloader)也给出了一个很好的案例研究。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-06T07:49:03.083

根据[https://www.nginx.com/resources/admin-guide/nginx-tcp-ssl-upstreams/](https://www.nginx.com/resources/admin-guide/nginx-tcp-ssl-upstreams/) (1.9.4+)现在看来可能

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-17T17:27:51.230

据我[阅读](http://forum.nginx.org/read.php?2,234641,234641)Nginx 论坛上的相关讨论，这是不可能的，因为 Nginx 无论如何都需要终止上游 SSL 连接。如果你坚持使用 Nginx，你只需要复制 SSL 配置并使证书和密钥对 Nginx 可用。

我链接的讨论得出结论，HAProxy 是 SSL 上游直通的更好工具。这是我发现的有关为此目的配置 HAProxy的[相关帖子。](https://scriptthe.net/2015/02/08/pass-through-ssl-with-haproxy/)因为我的 HAProxy 经验为零，我无法总结它的配置或解决方案的一般可行性，将其留给读者。

# 更新

从 1.9.2 Nginx 开始支持 HAProxy 的[代理协议](http://www.haproxy.org/download/1.5/doc/proxy-protocol.txt)。

# c++ - OpenCV Mat方法“at”在Linux中返回奇怪的字符

> ID：15394907
> 
> 赞同：2
> 
> 时间：2013-03-13T19:39:54.680
> 
> 标签：c++, linux, opencv

我正在寻找一种方法来访问 cv::Mat 对象中灰度像素的值，我能够找到很多答案，我确信它们有效，但对我来说，它们只是不这样做。所以基本上我所拥有的如下：

```
 gray_image = imread("myimage.png", CV_LOAD_IMAGE_GRAYSCALE);

    equalizeHist(gray_image, eq_image);

    // This line prints garbage
    const unsigned char* row = eq_image.ptr<unsigned char>(10);
    cout << row[10] << endl;

    // This line also prints garbage
    cout << eq_image.at<uchar>(10, 10) << endl; 
```

我只想在位置 (10,10) 中查看像素的灰度 [0,255] 值。我很确定这两条线适用于其他人，但不适用于我，也许这是 Linux 的事情。

如何读取灰度整数中的 cv::Mat 像素？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-13T19:47:50.493

该值打印为 ASCII 字符，这取决于实际值可能是不可打印的垃圾。如果您有兴趣将像素值打印为整数，则需要将该值转换为 an`int`以获取另一个[operator<< 重载](http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt)：

```
cout << static_cast<int>(row[10]) << endl; 
```

# spring - 春季自定义验证

> ID：15394909
> 
> 赞同：0
> 
> 时间：2013-03-13T19:40:00.250
> 
> 标签：spring

我正在为我的应用程序学习 Spring，目前我正在使用 Spring Validator 接口进行验证。我想知道是否可以使用我的所有验证规则编写自定义 xml 之类的东西，然后我可以使用 Spring 来读取和验证。

类似的东西

```
<rules>

    <rule> 
           <id="name" name="rule1" mandatory="yes" bean="foo.com.name" />
           <status name="rule1" type="error" />
    </rule>

    <rule> 
           <id="age" name="rule2" mandatory="no" bean="foo.com.age" />
           <status name="rule2" type="warning" />
    </rule>

  </rules> 
```

谁能指出我正确的方向。

我看到了这一点的价值，因为这样我就可以在一个 xml 中进行所有验证，并且可以轻松地组织我的验证。此外，我什至可以重用这个 xml。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:08:07.490

JSR-303 支持 XML 描述符，Spring可以`ValidationFactory`通过.`Validator``LocalValidatorFactoryBean`

你可能会对此感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T10:33:55.780

您是否看过或考虑过使用 OVal 进行验证？[关于椭圆形](http://oval.sourceforge.net/)

我已经将它用于大量 bean，它们都扩展了一个公共基 bean 类，该类实现了一个使用 OVal 验证器的验证方法。每个 bean 都有根据其独特要求注释的字段/方法。效果很好，我喜欢验证在 bean 上清晰可见的事实，而不是隐藏在定制格式或框架中，而且失败的错误消息也很详细。

# web-services - JUnit 测试 Java EE Web 服务端点方法

> ID：15394910
> 
> 赞同：2
> 
> 时间：2013-03-13T19:40:00.293
> 
> 标签：web-services, jakarta-ee, junit

如何使用 JUnit 测试 Java EE Web 服务端点方法？

我在*Eclipse中使用**Spring*和*MyBatis*框架和标准*Maven*目录结构。我知道我可以通过为它创建一个 JUnit 测试用例来简单地测试每个方法。但是，我想知道如何使用**@WebService、@WebMethod、@WebResult 标签**进行测试。

 ***```
@WebService(endpointInterface = "com.ws.BrowserService", name = "BrowserService", targetNamespace = "http://abc.def.com")
public interface BrowserService {

    /**
     * Runs the provided SQL query and returns the result.
     * @param queryText is the SQL query text.
     * @return The query result is returned in the form of List<Object>.
     */
    @WebMethod
    @WebResult(name = "Object")
    public List<Object> runQuery(
            @WebParam(name = "QueryText") String queryText);

} 
```

## 编辑

### 执行

```
@WebService(targetNamespace = "http://abc.def.com", portName = "BrowserPort", serviceName = "BrowserService")
public class BrowserServiceImpl implements BrowserService {

    @Autowired
    private QueryMapper queryMapper;

    public List<Object> runQuery(String queryText) {
        List<Object> queryResult= new ArrayList<Object>();
        queryResult = queryMapper.runQuery(queryText);
        return queryResult;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T15:47:19.340

事实证明，我实际上正在寻找的是*集成测试*。***

# php - 将数据添加到具有条件的特定位置的数组

> ID：15394912
> 
> 赞同：0
> 
> 时间：2013-03-13T19:40:02.093
> 
> 标签：php, arrays, conditional-statements

我已经在网上搜索了几个小时，但找不到合适的解决方案。

这种情况：

我想将一些数据添加到 ID 等于某个 var 的特定数组中。

这是需要添加的数据：

```
$var1 = "some data";
$var2 = "some other data"; 
```

数组的一个例子：

```
array (size=2)
  0 => 
    array (size=9)
      'id' => string '1' (length=1)
      'title' => string 'title' (length=13)
      'description' => string 'Some Description' (length=21)
      'function' => string 'Some function' (length=23)
      'employment' => string 'Some employment' (length=18)
      'region' => string 'Eindhoven' (length=9)
      'region_id' => string '1' (length=1)
      'function_id' => string '1' (length=1)
      'employment_id' => string '3' (length=1)
  1 => 
    array (size=9)
      'id' => string '1' (length=1)
      'title' => string 'title2' (length=13)
      'description' => string 'Some Description2' (length=21)
      'function' => string 'Some function2' (length=23)
      'employment' => string 'Some employment2' (length=18)
      'region' => string 'Eindhoven' (length=9)
      'region_id' => string '1' (length=1)
      'function_id' => string '1' (length=1)
      'employment_id' => string '3' (length=1) 
```

在另一个变量中，我有 id。条件类似于：

```
If ($someid == $array[0][0]['id]) {
// Add 'ImNewData' => $var1;
} 
```

在这个例子中，我使用了 2 个数组，但在最终设计中可能是 200 个。

什么是最体面（快速？）的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:44:06.157

据我所知，听起来您只是想将新数据添加到数组中。

```
foreach ($array as $index => $user) {
    if ($user['id'] == $id) {
        $user[$index]['example_var'] = $someVar;
    }
} 
```

这样做的目的是遍历数组 [0] 中的每个元素，并将该元素索引存储在 $index 中。这允许您将这些值放在原始数组中。$user 值将在 foreach 循环终止后超出范围，因此您必须将其直接添加到原始数组中。

# javascript - Jasmine 不会从资产管道加载 javascript 文件

> ID：15394914
> 
> 赞同：8
> 
> 时间：2013-03-13T19:40:07.190
> 
> 标签：javascript, ruby-on-rails, asset-pipeline, jasmine, assets

我正在开发一个 gem，我已经安装了 Jasmine [https://github.com/pivotal/jasmine-gem/](https://github.com/pivotal/jasmine-gem/)

我需要的所有 JS 文件都在我的清单文件中，位于 app/assets/javascripts/application.js

```
//= require underscore
//= require backbone

//= require_tree .//vendor
//= require_tree .//custom

//= require_tree .//templates
//= require_tree .//models
//= require_tree .//collections
//= require_tree .//views 
```

我的 jasmine.yml 文件引用了以下内容：

```
src_files:
  - 'app/assets/javascripts/application.js' 
```

但是其中指定的文件都没有加载。有谁知道为什么？我正在使用最新的 Jasmine 1.3.2，它应该支持资产管道，因此您不需要使用 jasmine-rails 之类的东西。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-24T04:17:14.123

在您的 jasmine.yml 中，路径应该是“assets/application.js”。如果您仍然遇到问题，请确保您的 jasmine gem 在您的 Gemfile 中的开发组和测试组下，如[https://github.com/pivotal/jasmine-gem](https://github.com/pivotal/jasmine-gem)上的说明中所述：

```
group :development, :test do
  gem 'jasmine'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T17:50:53.767

如果您使用的是 Rails 4，那么版本 1.3.2 中存在错误，它在哪里检查`config.assets.enabled`Rails 4 中不再定义的错误。

以下对我有用。 `gem 'jasmine', "~> 2.0.0.rc4"`

这是谈论这个问题的票。[https://github.com/pivotal/jasmine-gem/pull/177](https://github.com/pivotal/jasmine-gem/pull/177)

# regex - 当给定正则表达式“ab”时，dk.brics.automaton 进入无限循环？

> ID：15394917
> 
> 赞同：0
> 
> 时间：2013-03-13T19:40:13.683
> 
> 标签：regex, lexical-analysis, dfa, automaton

我想知道元字符`dk.brics.automaton`支持什么。

它甚至不支持`.`运营商吗？当我给`a.b`它时，它会进入无限循环，直到`Err: OutOfMemory`.

有没有其他方法可以达到与 相同的目的`.`？

如果您对`dk.brics.automaton`支持哪些运营商有想法，请在此处帮助列出它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:54:42.137

根据语法（[http://www.brics.dk/automaton/doc/dk/brics/automaton/RegExp.html](http://www.brics.dk/automaton/doc/dk/brics/automaton/RegExp.html)），应该可以。也许您的一些代码会有所帮助。

# java - 访问数据库时出现 ClassNotFoundExceptions

> ID：15394921
> 
> 赞同：-1
> 
> 时间：2013-03-13T19:40:18.390
> 
> 标签：java, mysql, classpath

每当我放

```
Class.forName("com.mysql.jdbc.Driver");
String url = "jdbc:mysql://localhost:3306/Movies"; 
```

它给了我一个“ClassNotFoundException”，我尝试将我的类路径更改为 .; 但它不起作用我认为这是我在环境变量中更改的类路径的问题，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:42:44.177

您需要在应用程序的类路径中有 mysql java[连接器](http://dev.mysql.com/downloads/connector/j/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:45:03.700

如果您想尝试捕获异常并获取一些详细信息，请将连接部分放在 try catch 块中。您还需要 com.mysql.jdbc.Driver 类，因此请从您的类中正确引用它。

```
 Class.forName("com.mysql.jdbc.Driver");
  java.sql.Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/Movies?user=<username>&password=<password>") ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:45:39.243

错误消息说明了一切，它找不到类 com.mysql.jdbc.Driver。

首先，您需要从 MySql 下载 jar 文件。它是拉上拉链的，所以你必须把它炸开。

其次，您需要指向构建路径中的 jar 文件。您没有指定要用于构建的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T20:03:14.217

首先要注意：环境变量是 CLASSPATH（全部大写）。

经验法则是（我假设你在 Windows 上）：

*   添加未打包到 Jar 文件中的已编译类时，CLASSPATH 必须包含被视为根目录的路径
*   将 JAR 文件添加到 CLASSPATH 时，将它们添加为常规文件。

将`CLASSPATH`变量设置为`C:\EX1\BAZ;C:\EX2\lib.jar`意味着一个类`com.foo.MyClass`必须位于`C:\EX1\BAZ\com\foo\MyClass.class`或封装在里面`lib.jar`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-13T20:13:46.343

1> 首先，从[http://dev.mysql.com/downloads/connector/j/](http://dev.mysql.com/downloads/connector/j/)下载 Mysql Java Connector 。

2> 解压到所需的文件夹。

3> 右键单击​​ IDE 中的项目文件。

4> Go to Build -> Packages -> Add Jar //This is Netbeans Specific Match the same in your IDE

5> Locate the jar file.

6> Rebuild the project and Deploy.

# javascript - 在wordpress中获取输入字段的实时值

> ID：15394922
> 
> 赞同：0
> 
> 时间：2013-03-13T19:40:23.287
> 
> 标签：javascript, jquery, wordpress

我正在尝试使用函数在wordpress的“编辑帖子”屏幕中的输入框中将变量设置为当前文本

我目前有：

```
jQuery(document).on("change, keyup, click", "#input_box_1, #input_box_2, #input_box_3", functionName);

    function functionName(){
        var myvar = parseFloat(jQuery("#input_box").val());
    var myvar2 = parseFloat(jQuery("#input_box_2").val());
    var myvar3 = parseFloat(jQuery("#input_box_3").val());
      }
    }); 
```

当然只有当你保存草稿TWICE时才有效（当你第一次输入一个值时，输入框的html值在你保存之前不会改变，然后当你再次保存时，它会将变量设置为新值）。

每次用户使用我的方法在输入框中键入任何内容（使用、更改、键入和单击）时，有没有办法将变量设置为更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:52:59.107

肯定有！

我为你创建了这个小提琴：

[http://jsfiddle.net/7HQ4W/](http://jsfiddle.net/7HQ4W/)

```
<p>Original Input Value:
    <br />
    <input type="text" id="origVal">
</p>
<p>Target Input Value:
    <br />
    <input type="text" id="tarVal">
</p>

$('#origVal').keyup(function () {
    $('#tarVal').val($(this).val());
}); 
```

[根据评论更新]

[http://jsfiddle.net/7HQ4W/1/](http://jsfiddle.net/7HQ4W/1/)

我根据您的新代码示例为您调整了它。看起来怎么样？

```
$('#input_box_1, #input_box_2, #input_box_3').keyup(function () {
    var myVar1 = $('#input_box_1').val();
    var myVar2 = $('#input_box_2').val();
    var myVar3 = $('#input_box_3').val();
    $('#display').html("<p>myVar1 = " + myVar1 +
        "<p>myVar2 = " + myVar2 +
        "<p>myVar3 = " + myVar3);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:46:46.127

每次输入失去焦点时，您都​​可以使用 focusout() 来捕获输入。

```
$("#input_box").focusout(function() {
    //Assign the value somewhee
    var myVar = $(this).val();
}); 
```

演示：http: [//jsfiddle.net/8wY7Q/](http://jsfiddle.net/8wY7Q/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:49:41.577

您必须绑定到输入框，以便在用户输入字符时更新变量：
js：

```
$('#input_box').on('keyup', function() {
    var my_value = $(this).val();
    $('#result').html(my_value);
}); 
```

html：

```
<input id="input_box" />
<p id="result"></p> 
```

小提琴：http: [//jsfiddle.net/a8jbF/](http://jsfiddle.net/a8jbF/)

**- 更新 -**

新小提琴：http: [//jsfiddle.net/a8jbF/1/](http://jsfiddle.net/a8jbF/1/)

使用超时以便可以限制更新代码

**-- 更新 2 --**

您上面的代码按原样工作 - 但它会产生很多开销，因为您每次击键都会更改每个变量 - 无论它是否是正在修改的输入 -

如果您打算使用一个功能执行此操作并希望提高性能，我会添加延迟功能（在我的第二把小提琴中），然后稍微修改您的 functionName 以减少（一些）开销：

```
function functionName(){
    // wrap your variable set in a delay
    delay(function(){
        // actions to do after the delay is complete
        var myvar = parseFloat(jQuery("#input_box").val());
        var myvar2 = parseFloat(jQuery("#input_box_2").val());
        var myvar3 = parseFloat(jQuery("#input_box_3").val());
    }, 1000);
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T19:51:25.540

处理事件`blur`或`focusout`在您的 $('#inputBox')

# ios - Xcode 4.6：横向 iPad 应用程序中只有纵向区域处于活动状态

> ID：15394932
> 
> 赞同：2
> 
> 时间：2013-03-13T19:40:53.043
> 
> 标签：ios, xcode, ipad, landscape-portrait, autorotate

我有一个仅横向的 iPad 应用程序，其加载的 ViewControllers 的大小与 1024x768 的主 ViewController 匹配。我注意到，虽然一切都正常显示，但在我加载的视图的最右侧区域中设置的任何控件都无法触摸。一位朋友建议我检查以确保我的所有 XIB 文件在属性检查器中都设置为“横向”方向。果然，我所有的 XIB 都设置为“纵向”。我完成了将所有 XIB 文件（50+）设置为以下设置的繁琐任务：

属性检查器 - **大小：**无 **方向：**横向 **状态栏：**无 **顶栏：**无 **底栏：**无 **模式：**缩放以填充 **用户交互已启用：**已选中 **绘图/不透明：**已选中 **绘图/自动调整大小子视图：已**选中

尺寸检查器 - **显示：**布局矩形 **宽度：** 1024 **高度：** 768

其他一切都设置为默认设置。

我仍然有同样的问题。我错过了什么吗？不确定这是否相关，但我没有使用故事板。

请帮忙。

谢谢

米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:22:36.557

我在使用 webView 时遇到了类似的问题，结果发现我错过了这一行：

```
myView.autoresizingMask = UIViewAutoresizingFlexibleWidth; 
```

# java - 如何为类加载器加载任意选择的 JAR？

> ID：15394933
> 
> 赞同：1
> 
> 时间：2013-03-13T19:40:53.453
> 
> 标签：java

我希望能够加载不同版本的 JAR 文件，代表客户端 API，基于我正在与之交谈的服务器的版本。不幸的是，每个版本的服务器都需要不同的客户端 API。有没有办法创建一个基于指定 CLASSPATH 查找类文件的 ClassLoader？换句话说，我想告诉 ClassLoader 搜索类文件的位置顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:05:09.107

如果我理解正确，您会想要一个基于某些配置在不同位置查看的自定义 ClassLoader。例如，在一种情况下，它可能在 /foo 中查找，另一种在 /bar 中，而在另一种情况下，它可能先在 /foo 中查找，然后在 /bar 中查找。如果这是正确的，实际上并不那么难。查看 URLClassLoader ( [http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html) )。您可以向 ClassLoader 指定哪些 URL（可以是本地目录或文件）和“首先在指定的父类加载器中搜索后，将按照为类和资源指定的顺序搜索 URL”。

关键是父类加载器无法知道您不想搜索的路径，因此您必须手动进行一些类路径配置，而不是让 JVM 来处理它。

# iphone - 为什么 AVAudioPlayer 没有响应？

> ID：15394934
> 
> 赞同：0
> 
> 时间：2013-03-13T19:40:57.093
> 
> 标签：iphone, audio, if-statement, avaudioplayer, audio-streaming

我是 iphone 开发的新手（Xcode 中的第 4 天），我正在尝试实现 AvAudioPlayer 并使用 AwesomeMenu 库控制它。我初始化和播放音频没有问题，但是当我尝试通过很棒的菜单控件暂停或停止音频时，AVAudioPlayer 没有响应。任何帮助是极大的赞赏。

编辑

我能够确定我的方法没有在其中执行条件 if/else 语句。这更莫名其妙。didSelectIndex 正在触发，但内部的 if 语句不是。我是否正确编码了我的条件语句？

我的代码：

```
AVPlayerItem *playerItem = [AVPlayerItem playerItemWithURL:url];
podcastPlayer = [[AVPlayer playerWithPlayerItem:playerItem] retain];
[podcastPlayer play];

//Control for AvAudioPlayer

- (void)AwesomeMenu:(AwesomeMenu *)menu didSelectIndex:(NSInteger)idx{
if (idx==0) {
    if(!podcastPlayer.isPlaying){
        podcastPlayer.play;
    }

}else if(idx==1){
    if(podcastPlayer.isPlaying){
        podcastPlayer.pause;
    }

}else if(idx==2){
    if(podcastPlayer.isPlaying){
        podcastPlayer.stop;
        podcastPlayer.release;

        GSCCAppDelegate *appDelegate = (GSCCAppDelegate *)[[UIApplication sharedApplication] delegate];

        [appDelegate.menu removeFromSuperview];

    }

}else if(idx==3){

}else if(idx==4){

}else if(idx==5){

}

NSLog(@"Select the index : %d",idx);
} 
```

编辑

```
- (void)AwesomeMenu:(AwesomeMenu *)menu didSelectIndex:(NSInteger)idx{
if (idx==0) {

    NSLog(@"Index 0"); //Doesn't work

}else if(idx==1){

    NSLog(@"Index 1"); //Doesn't work

}

}

NSLog(@"Select the index : %d",idx); //<--This Works. 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:46:15.490

声明`AVPlayerItem *playerItem`为 a`property`和`synthesis`它。

不要声明为本地人

# jquery - 使用 .click 时无法使用 .fadeIn 加载外部页面

> ID：15394936
> 
> 赞同：0
> 
> 时间：2013-03-13T19:41:13.027
> 
> 标签：jquery, ajax

////////////////////////

这对我来说真的是一个糟糕的方法。经过多次调整，我得出一个结论，最好一次加载所有外部元素 (html)，并且只在单击时应用淡入效果，而不是同时尝试加载外部页面。下面的方法没有产生平滑的淡入淡出效果，并在加载外部页面时导致延迟。

////////////////////////

我正在通过以下方式加载外部页面：

```
$('a').click(function() {
$('#result').load($(this).attr('href'));

return false;
}); 
```

我正在尝试使用 fadeIn 加载外部页面。

我看过其他答案，但没有一个对我有用。也许我没有正确理解答案或错误地应用它。到目前为止，我最大的努力（经过无数次尝试）是这样，但这首先会在 div #one 中消失，然后只是加载 #load。（我这样做是因为我知道我不能将淡入淡出效果应用于加载 div 本身。）

```
$("a").click(function () {
$("#one:hidden:first").fadeIn("slow");
$('#load').load($(this).attr('href'));

return false;
}); 
```

我对 jQuery 很陌生，这对除了我以外的其他人来说可能是非常简单的事情。

我真的很感激任何帮助。谢谢。

//////////////////这里是标记////////////////

```
<a href="./test.html" class="link">Load Page 1</a>

<div id="one">

<div id="load">load here</div>

</div> 
```

///////////////////////////////////////// ///////////

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:43:23.887

```
<a href="./test.html" class="link">Load Page 1</a>

<div id="one" class="slot">
  <div id="load">load here</div>
</div> 
```

最初隐藏 div

```
.slot{
 display:none;
} 
```

加载外部内容

```
 $(".link").click(function (e) {
     e.preventDefault();      
    var $urlToLoad = $(this).attr('href');  
    $('#load').load($urlToLoad, function(data){
        $("#one").fadeIn('slow');
    });      
}); 
```

[**演示**](http://jsfiddle.net/a2ZfS/)

# c# - ORM 比较 Bulk 和 Batch 操作概述

> ID：15394940
> 
> 赞同：1
> 
> 时间：2013-03-13T19:41:20.727
> 
> 标签：c#, .net, orm, comparison

有很多[关于 ORM](http://ormeter.net/) [和比较矩阵](https://spreadsheets.google.com/pub?key=0AtMUz5Z1OXjudEpWc3pvdWtRZlFrUVM4WVZlOWJFQnc&hl=en&output=html)
的优缺点的文章看起来[*DataObjects.Net*](http://dataobjects.net/) 正在赢得竞争（目前）
测试类别通常是性能、LINQ 支持、缓存、集合支持......
现在我的问题是，如果您必须使用批量操作（日终操作）和批处理支持（数据库作业调度），您将选择哪个 ORMS？

任何实际实验将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T20:45:28.920

我会说 ORM 工具不是为大批量查询而设计的。有些人可以可接受地处理这个问题（例如在某些情况下像 NHibernate），但这取决于。我认为您正在为这项工作寻找错误的工具。

# c# - 将用户输入传递给 ProcessStartInfo.Arguments

> ID：15394942
> 
> 赞同：0
> 
> 时间：2013-03-13T19:41:22.507
> 
> 标签：c#, asp.net

我有一个我认为很简单的问题。

我正在尝试创建一个基本的 Web 表单，它有一个用户输入文本框、一个运行进程的按钮和一个显示进程结果的标签或文本框。

诀窍是，我希望将用户输入用作我的代码中“StartInfo.Arguments”属性的值。

这是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Diagnostics;

namespace MyApp
{
public partial class InputTest : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    public void Button1_Click(object sender, EventArgs e)
    {
        Process MyProcess = null;
        string MyProcessOutput = null;
        string MyProcessInput = null;

        try
        {
            MyProcess = new Process();

            MyProcess.StartInfo.CreateNoWindow = true;
            MyProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;

            MyProcess.StartInfo.FileName = @"C:\Windows\sysWOW64\myapp.exe"; // Command to run
            MyProcess.StartInfo.Arguments = ...  //Where I would like to put user input
            MyProcess.StartInfo.UseShellExecute = false;
            MyProcess.StartInfo.RedirectStandardInput = true;
            MyProcess.StartInfo.RedirectStandardOutput = true;

            MyProcess.Start();

            MyProcessOutput = MyProcess.StandardOutput.ReadToEnd();
        }
        catch (Exception ex)
        {

            MyProcessOutput = "An error occurred:\r\n" + ex.Message;
        }
        finally
        {
            if (MyProcess != null)
                MyProcess.Dispose();
        }

        MyProcessOutput = MyProcessOutput.Replace("\r\n", "<br />\r\n");

        myresultsLabel.Text = MyProcessOutput;
    }
} 
```

}

这里的关键是这一行：

```
 MyProcess.StartInfo.Arguments = ...  //Where I would like to put user input 
```

关于文本框、用户输入或其他方式将数据从用户获取到特定属性的任何想法？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:43:49.113

在页面中创建一个`TextBox`，给它一个名称，如`argumentsTextBox`，并将其编码为：

```
MyProcess.StartInfo.Arguments = argumentsTextBox.Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:45:00.757

I'm not sure what you mean by user input but I'll try to answer from my `C#` experience - user input that is received at runtime:
In my app, I create a process which executes a file. I handle the process's IO, and when input is required, the executing module uses a handler for that.
It's `WPF`, so the executing module knows only an interface which is implemented by my application. When user input is required, a popup will show.

# websphere - Websphere：服务器无法启动时重置配置文件

> ID：15394956
> 
> 赞同：0
> 
> 时间：2013-03-13T19:42:00.833
> 
> 标签：websphere, websphere-8

当我显然用软管冲洗我的 8.5 服务器时，我正在使用 AdminTask 从 6.1 服务器导入配置文件。我看到以下...

> 引起：com.ibm.ws.hamanager.runtime.config.CoreGroupConfig.(CoreGroupConfig.java: com.ibm.ws.hamanager.runtime.config.CoreGroupLiveness.(CoreGroupLiveness.java:70) 的 java.lang.NullPointerException: 117) ... 39 更多

有没有办法可以重置配置文件以让我的 WAS 再次工作？这是否意味着我需要卸载/重新安装？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:58:08.540

杰基，

如果配置文件损坏，则无需重新安装产品。

导入配置文件活动是否成功？导入过程中是否有任何错误？查看日志以了解在导入过程中发生了什么。

您可以创建另一个配置文件并使用它。

如果您在导入之前备份了配置文件，则可以使用备份恢复该配置文件，否则您将别无选择，只能创建另一个配置文件（使用 PCT/PMT）

高温高压

# javascript - 如何使用 javascript 为 Internet Explorer 和 Firefox 浏览器禁用 Ctrl C/V

> ID：15394957
> 
> 赞同：10
> 
> 时间：2013-03-13T19:42:01.463
> 
> 标签：javascript

我正在制作这个 javascript 代码以禁用 Ctlr+c 和 Ctlr+v、prenscreen、ALT+TAB、Ctlr+S 和 PrintScreen 键。

```
<html>
<head>
<script language="javascript">

function Disable_Control_C() {
var keystroke = String.fromCharCode(event.keyCode).toLowerCase();

if (event.ctrlKey && (keystroke == 'c' || keystroke == 'v')) {
alert("let's see");
event.returnValue = false; // disable Ctrl+C
}
}

</script>
</head>
<body onkeydown="javascript:Disable_Control_C()">
Hello World!
</body>
</html> 
```

不幸的是，代码可以在 IE 浏览器上运行，但不能在 Firefox 上运行。有人可以在这里建议吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-13T19:46:00.860

*   我不喜欢浏览器对我这样做，并且
*   它很容易解决，并且
*   从任何定义来看，这都不算“安全”，但是

* * *

使用`element.on(?:`[`copy`](https://developer.mozilla.org/en-US/docs/DOM/element.oncopy)| [`cut`](https://developer.mozilla.org/en-US/docs/DOM/element.oncut)|[`paste`](https://developer.mozilla.org/en-US/docs/DOM/element.onpaste)`)`

```
<body oncopy="return false" oncut="return false" onpaste="return false"> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-13T19:51:29.380

您可以为此使用 jquery。您只需要将`cut`,`copy`和`paste`功能与您的元素绑定。

并添加这个 Jquery 脚本：

```
$(document).ready(function() {
    $('#Selector').bind('copy paste', function(e) {
        e.preventDefault();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-28T09:51:32.740

我正在研究 React 项目。我们也有相同的要求来防止复制/粘贴/右键单击。

在 index.html 标记中使用以下代码`<body/>`。这将防止所有不必要的操作。

```
<body oncopy="return false;" oncut="return false;" onpaste="return false;" oncontextmenu="return false;"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-26T07:39:07.627

```
// Disable Right click
document.addEventListener('contextmenu', event => event.preventDefault());

// Disable key down
document.onkeydown = disableSelectCopy;

// Disable mouse down
document.onmousedown = dMDown;

// Disable click
document.onclick = dOClick;

function dMDown(e) { return false; }

function dOClick() { return true; }

function disableSelectCopy(e) {
    // current pressed key
    var pressedKey = String.fromCharCode(e.keyCode).toLowerCase();
    if ((e.ctrlKey && (pressedKey == "c" || pressedKey == "x" || pressedKey == "v" || pressedKey == "a" || pressedKey == "u")) ||  e.keyCode == 123) {
        return false;
    }
} 
```

# ios - 如何关闭应用内 ios 短信的消息窗口

> ID：15394959
> 
> 赞同：4
> 
> 时间：2013-03-13T19:42:13.520
> 
> 标签：ios, ios6, sms, messageui, mfmessagecomposeview

一旦弹出短信窗口，我就无法再次关闭它。取消按钮不起作用，发送按钮将发送短信但不关闭窗口。

我在这里查看了许多类似的问题，他们都建议要么实现 messageComposeViewController 方法，要么将 messageComposeDelegate 设置为 self，但我已经完成了这两件事，但仍然没有。

谁能告诉我我做错了什么？

.h 文件

```
#import <MessageUI/MFMessageComposeViewController.h>
#import <MessageUI/MessageUI.h>
@interface ViewController : UIViewController<CLLocationManagerDelegate,MFMessageComposeViewControllerDelegate,UINavigationControllerDelegate>{
  CLLocationManager *locationManager;
  MKMapView *mapView_;

} 
```

.m 文件

```
- (IBAction)SendTextTapped:(id)sender{
    MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
    if([MFMessageComposeViewController canSendText])
    {
        controller.body = @"Hello!";
        controller.recipients = [NSArray arrayWithObjects:@"123456", nil];
        controller.messageComposeDelegate = self;
        [self presentViewController:controller animated:YES completion:nil];
    }
}

- (void)messageComposeViewController:(MFMessageComposeViewController*) controller didFinishWithResult:(MessageComposeResult)result error:(NSError*)error;
{
  NSLog(@"Entered messageComposeController");
  switch (result) {
    case MessageComposeResultSent: NSLog(@"SENT"); [self dismissViewControllerAnimated:YES completion:nil]; break;
    case MessageComposeResultFailed: NSLog(@"FAILED"); [self dismissViewControllerAnimated:YES completion:nil]; break;
    case MessageComposeResultCancelled: NSLog(@"CANCELLED"); [self dismissViewControllerAnimated:YES completion:nil]; break;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:54:21.560

删除委托方法上的错误参数。委托方法应该是：

```
- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result {
    // code here
} 
```

不是：

```
- (void)messageComposeViewController:(MFMessageComposeViewController*) controller didFinishWithResult:(MessageComposeResult)result error:(NSError*)error
{
    // code here
} 
```

# wso2 - WSO2 ESB 发送带有客户端证书凭据的中介

> ID：15394968
> 
> 赞同：0
> 
> 时间：2013-03-13T19:43:04.020
> 
> 标签：wso2, wso2esb

我们在 IIS 下有一个 WCF 服务，它由带有客户端证书的传输安全 (SSL) 保护（不是消息 WS-Security，而是由 IIS 本身）。我已将证书添加到 wso2carbon.jks 每当执行发送调解器时，请求都会超时。IIS 日志仅显示错误 500.0。如果在 IIS 配置中我设置为忽略客户端证书，一切正常。编码的 Java Axis2 和 .Net 客户端也可以在 ISS 上打开证书时正常工作。

很可能我错过了通话中的某些内容。这种情况是否需要 WS-policy？我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T05:16:00.023

终于找到了解决办法。

**解决方案** 在 IIS 上启用 SSLAlwaysNegoClientCert。这是一篇好文章：[Make IIS require SSL client certificate during initial handshake](https://stackoverflow.com/questions/2518314/make-iis-require-ssl-client-certificate-during-initial-handshake)

**原因**：默认情况下，如果客户端访问受保护的资源，IIS 将重新协商 SSL。NIO 和 HttpPathThrough 传输不允许重新协商（这是有道理的，因为它是安全漏洞）。所以 IIS 没有得到 Client Hello 并发出错误 500（对 WSO2 的人来说，为什么 TryIt 客户端挂起直到超时呢？）

备注：我们并不总是可以在 IIS 端进行更改，因此如果 WSO2 ESB 中可用的传输在允许重新协商方面更加灵活（也许我错过了配置它的位置......）会更好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T06:14:02.790

在这种情况下，WSO2 ESB 充当客户端。因此，您需要将证书导入到 WSO2 ESB 的 repository/resources/security 文件夹中的 client-truststore.jks。然后您的服务调用应该可以工作。

# java - spring + JPA：在加载时从配置“扩展”实体类

> ID：15394970
> 
> 赞同：1
> 
> 时间：2013-03-13T19:43:04.490
> 
> 标签：java, jpa, entity, javassist

在我的小项目中，我有 3 个实体类。这些类应该由最终用户通过配置“扩展”（例如，基于人类可读的文本，可能是 xml）。对于可扩展，我的意思是向它们添加字段和适当的 JPA 注释（包括 @ManyToOne 之类的东西），因此生成的类就是一个“普通”实体类。

由于使用了hibernate和spring，我已经非常模糊地听说过javassist、cglib、Aspectj。但是，哪一个适合使用？这对春天有用吗？我的意思是当应用程序启动时它必须

1.  从配置创建实体
2.  开始春天上下文
3.  让spring“扫描”它们（packagesToScan）或[使用JPA 2.0以编程方式加载实体类？](https://stackoverflow.com/questions/2838634/programmatically-loading-entity-classes-with-jpa-2-0)

我的进一步问题是，是否已经有某种库/工具包括读取配置文件并从中创建实体？

# javascript - javascript 获取属性类型

> ID：15394971
> 
> 赞同：0
> 
> 时间：2013-03-13T19:43:04.803
> 
> 标签：javascript, object, onclick, getattribute

我尝试获取 onclick 事件的属性，所以我尝试：

```
var onclickevent = btn.getAttribute("onclick");
alert(onclickevent); 
```

这工作正常，但后来我尝试：

```
var onclickevent = btn.getAttribute("onclick");
var subst = onclickevent.substring(2,3); 
```

这失败并出现错误“对象不支持的方法”。所以，我尝试了：

```
var onclickevent = string(btn.getAttribute("onclick"));
var subst = onclickevent.substring(2,3); 
```

当尝试使用以下消息强制转换为字符串时，这再次失败：“Object Expected”

如何将 getAttribute 返回值转换为字符串？

# java - 斐波那契数列 - 递归求和

> ID：15394972
> 
> 赞同：6
> 
> 时间：2013-03-13T19:43:05.880
> 
> 标签：java, math, recursion, fibonacci

好的，我最初编写了一个简单的代码来根据用户输入从系列中返回斐波那契数..

n=5 将产生 3..

```
static int fibonacci(int n) {
        if (n == 1)
            return 0;
        else if (n == 2)
            return 1;
        else
            return (fibonacci(n - 1) + fibonacci(n - 2));
    } 
```

我正在考虑修改代码以返回系列的总和，而不仅仅是从系列中返回值，并且在尝试求和时，我不小心在 return 语句中加了 1，令我惊讶的是，它正确地返回了总和。

对于 n=5，下面的代码将返回 7。

我不确定这是否是计算总和的正确方法......

如果我添加 1，我仍然无法弄清楚该系列的总和是如何工作的。有人可以解释一下吗？

```
static int fibonacci(int n) {
    if (n == 1)
        return 0;
    else if (n == 2)
        return 1;
    else
        return (fibonacci(n - 1) + fibonacci(n - 2)+(1));
} 
```

编辑：

对于斐波那契数列..0,1,1,2,3,5,8,13,21,34,55,89,144....

我尝试了一些随机的 n

n=13

函数返回 376

0+1+1+2+3+5+8+13+21+34+55+89+144 = 376

n=10

函数返回 88

0+1+1+2+3+5+8+13+21+34= 88

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-13T20:13:06.613

您对`fibonacci`程序的修改确实可以计算总和。但是，您使用递归的方式效率低下。解决这个问题的一种方法是使用“动态编程”方法，其中计算的值被缓存，以便它们可以被第二个递归调用重新使用。但是，第 n 个斐波那契数可以从基数向前计算。对此的递归实现将是：

```
public static int fib_r (int a, int b, int n) {
    if (n == 1) return a;
    if (n == 2) return b;
    return fib_r(b, a+b, n-1);
}

public static int fib (int n) {
    return fib_r(0, 1, (n > 0) ? n : 1);
} 
```

总和的相应代码是：

```
public static int sumfib_r (int a, int b, int n) {
    if (n == 1) return a;
    if (n == 2) return b;
    return sumfib_r(b, a+b+1, n-1);
}

public static int sumfib (int n) {
    return sumfib_r(0, 1, (n > 0) ? n : 1);
} 
```

[作为尾调用](http://en.wikipedia.org/wiki/Tail_call)删除的一部分，编译器/解释器通常会将尾递归更改为一个简单的循环。

您询问：

> 如果我添加 1，我仍然无法弄清楚该系列的总和是如何工作的。有人可以解释一下吗？

这个问题实际上是关于理解算法，我认为这是关于 SO 的主题。但是，需要数学来描述该算法为何起作用。所以，这真的是一道数学题。关于斐波那契数之和有一个[众所周知的定理](http://www.proofwiki.org/wiki/Sum_of_Sequence_of_Fibonacci_Numbers)。如果`F[i]`是第 i 个斐波那契数，并且`S[n]`是第一个`n`斐波那契数的和，则上述定理指出：

```
 S[n] = F[n+2] - 1 
```

因此，如果我们根据 的定义考虑`S[n+2]`，

```
S[n+2] = S[n+1] + F[n+2] 
```

然后，替换`S[n] + 1`为`F[n+2]`：

```
S[n+2] = S[n+1] + S[n] + 1 
```

您应该认识到的是您的“添加 1 个修改”`fibonacci`功能。

* * *

下面是一个归纳证明，您的程序计算了我在原始答案中提供的总和。让`F`代表您的`fibonacci`功能，并让`S`代表您的“添加 1 个修改”`fibonacci`功能。

```
F[1] = 0
F[2] = 1
F[i] = F[i-1] + F[i-2] for i > 1

S[1] = 0
S[2] = 1
S[i] = S[i-1] + S[i-2] + 1 for i > 1 
```

然后，您需要一个证明`k > 0`：

```
 k
       .---  
S[k] =  >   F[i]
       `---
       i = 1 
```

请注意，当且仅当：

```
S[1] = F[1]
S[k] = F[k] + S[k-1] for k > 1 
```

证明是相当直接的。基本情况是微不足道的。

```
S[1] = F[1] = 0
S[2] = F[2] + F[1] = 1
S[3] = S[2] + S[1] + 1 = F[3] + F[2] + F[1] = 2 
```

归纳步骤是： 鉴于对于一些`k > 2`，`S[j+1] = F[j+1] + S[j]`对于`0 < j < k+1`，证明等式成立，如果`j = k+1`，即：`S[k+2] = F[k+2] + S[k+1]`。

```
 S[k+2] = S[k+1] + S[k] + 1
=>  S[k+2] = (F[k+1] + S[k]) + (F[k] + S[k-1]) + 1
=>  S[k+2] = (F[k+1] + F[k]) + (S[k] + S[k-1] + 1)
=>  S[k+2] = F[k+2] + S[k+1] 
```

这样就完成了证明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T19:50:41.700

不，不会的。代码的第二个版本*不*计算斐波那契函数的所有值的总和，直到给定值。基本情况也是错误的！

如果要递归计算总和，请将问题分成两部分，如下所示：

```
public static int fib(int n) {
    return n < 2 ? n : fib(n-1) + fib(n-2);
}

public static int sumfib(int n) {
    return n < 0 ? 0 : fib(n) + sumfib(n-1);
} 
```

第一个函数计算斐波那契，第二个函数负责将值相加到给定的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T20:46:51.977

正确的做法是使用累加器。

代码应该看起来像这样（我没有检查它，这只是想法）

```
static int fibonacci(int n, int accumlator) {
    if (n == 1)
        return 0;
    else if (n == 2)
        return 1;
    else
        accumlator = (fibonacci(n - 1, accumlator) + fibonacci(n - 2, accumlator));
        return accumlator;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-13T19:53:09.890

您的代码需要测试`n<1`- 如果您传递 0 或更少的参数，它将永远持续下去......

除此之外 - 如果您致电`fib(5)`，会发生以下情况：

```
...
return(fib(4) + fib(3))

fib(4):
return(fib(3) + fib(2))

fib(3):
return(fib(2) + fib(1))

now fib(2) == 1 by your definition, and fib(1) == 0

so fib(3) == 1

then fib(4) == 1 + 1 = 2

and fib(5) = fib(4) + fib(3) = 2 + 1 = 3

Now if you add the '+1', the following happens:

fib(1) and fib(2) are unchanged
fib(3) = 1 + 0 + 1 = 2
fib(4) = fib(3) + fib(2) + 1 = 4
fib(5) = fib(4) + fib(3) + 1 = 4 + 2 + 1 = 7 
```

您的原始方法很好，但这取决于您如何考虑斐波那契数的“顺序”（您希望第一个数字是什么）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-19T22:27:14.757

递归是计算斐波那契数的一种非常低效的方法。在数字 43 之后，需要 30 多秒才能得到答案。我试图找出计算数字 52 需要多少时间，大约需要 47 分钟。所以时间增长得非常快。

递归代码：

```
private int calculateRecursivelyInt(int fnum)
    {
        if (fnum == 0)
            return 0;
        if (fnum == 1)
            return 1;

        return calculateRecursivelyInt(fnum - 1) + calculateRecursivelyInt(fnum - 2);
    } 
```

循环效率更高

```
 //This method will be able to calculate till the F46 because int can't hold a 
    // bigger number. You can calculate till 92 with a type long and till 93 with
    // unsigned long in C#.

    private int calculateLoopInt(int num)
    {
        int fnum = 0;
        int val1 = 0;
        int val2 = 1;

        for (int i = 0; i < num; i++)
        {
            if (num == 1)
                fnum = 1;
            else if (i > 0)
            {
                fnum = val1 + val2;
                val1 = val2;
                val2 = fnum;
            }
        }
        return fnum;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-05T17:10:59.503

另一种使用递归函数打印斐波那契数列的方法。

```
#include <iostream>

// 0 1 1 2 3 5 8 13...
//

void fibb (int idx, int curr = 0, int next = 0)
{
        std::cout << curr << ", ";
        if(!idx) return;
        if(curr == 0) {
                curr = 1;
                fibb(--idx, curr, next);
                return;
        }
        next += curr;
        fibb(--idx, next, curr);
}

int main()
{
        fibb(10);
} 
```

# ruby-on-rails - Rails 保留两位小数，0 不保存

> ID：15394975
> 
> 赞同：0
> 
> 时间：2013-03-13T19:43:18.763
> 
> 标签：ruby-on-rails

当我在表单中输入 3.50 的价格时，rails 将其作为 3.5 保存到数据库中，但是当我输入任何末尾没有零的东西（如 3.51）时，它会将其保存为 3.51。如果输入 3.50，我需要将 3.50 作为 json 返回。

在我的简单形式中，我使用它作为输入

```
<%= f.input :price, :value => number_to_currency(f.object.price, :precision => 2) %>

Schema

 t.decimal  "price",              :precision => 10, :scale => 2 
```

关于为什么零下降的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:49:15.080

因为 0 不重要。它与轨道无关。在控制台输入`3.50`，它会返回`3.5`. `3.50`只是您号码的字符串表示形式。当它转换为浮点数时，没有任何意义 0。

为什么要3.50才能退？另一种方法是在创建 json 时自己添加它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:49:51.047

只要将数字存储为数字，大多数数据库都会将其保持为最简单的数字。一旦数字变成字符串，就需要确保任何前导或尾随零。

# asp.net - ASP.NET MVC - 我需要呈现部分的操作方法。我该怎么做？

> ID：15394976
> 
> 赞同：2
> 
> 时间：2013-03-13T19:43:22.563
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

在我的 _Layout 视图中，我有`@RenderSection()`方法。现在，我想编写自己的动作方法，它与`@RenderSection()`. 我该怎么做？

**编辑：**也许我会澄清一下。我不知道如何访问控制器内部的特定部分。甚至可能吗？

**编辑：**好的，进一步解释：我正在使用甜甜圈缓存机制。它具有 @Html.Action() 方法的重载，允许它不被缓存。我不希望我的 @RenderSection() 被缓存，所以我需要做一些事情来禁用该特定部分的缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T20:01:06.350

只需创建一个返回局部视图的正常操作，然后使用 @Html.Action() 将其输出到视图，并使用适当的重载来禁用缓存。请记住，可能会产生一些性能影响。

为了提供代码示例，我需要先查看您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T20:20:15.653

也许我错过了一些东西，但是以下有什么问题？

```
@section mySection {
    @Html.Action(...)
} 
```

# svn - '@' SVN 中的符号

> ID：15394979
> 
> 赞同：2
> 
> 时间：2013-03-13T19:43:42.630
> 
> 标签：svn

我尝试更新驱动器上包含“@”符号的目录，但出现错误。

我执行的命令是：

```
svn up C:\@work 
```

我收到了来自 SVN 的以下回复：

```
Skipped @Work. 
```

如果我在根目录中并执行：

```
svn up @work@ 
```

它照常工作，更新目录。

所以我想知道是否有人可以对正在发生的事情有所了解。

# php - 将数组解析为多维数组

> ID：15394980
> 
> 赞同：-1
> 
> 时间：2013-03-13T19:43:46.080
> 
> 标签：php, arrays, multidimensional-array

我在该数组中有以下名为 $userLineArray 的数组，我想按空格解析每个条目。然后我想将它回显到一个名为 $userLineArray2 的新多维数组中

```
 foreach ($userLineArray as $key => $value) {
            $keywords1 = preg_split("/[\s,\t]+/", $value);
            array_replace($userLineArray2, array($key => $keywords1));
        } 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:47:43.510

为什么不只是：

```
foreach ($userLineArray as $key => $value) {
    $keywords1 = preg_split("/[\s,\t]+/", $value);
    $userLineArray2[$key] = $keywords1;
} 
```

[测试代码在这里](http://rextester.com/live/IFF7484)。大概这就是你要找的东西。

# java - 带有 utf-8 字符的 Runtime.exec() 命令

> ID：15394986
> 
> 赞同：0
> 
> 时间：2013-03-13T19:44:06.443
> 
> 标签：java, encoding, runtime

我正在尝试执行包含波兰字符的 Runtime.getRuntime().exec() 命令。命令从第一个波兰字母中删除。我得到的不是波兰字母“？”。

如何设置正确的编码以正确执行此命令？

我正在使用的命令： execCommand("php /home/script/url param1 param2 param3)

execCommand 看起来像：

```
private String execCommand(String command)
{
    String output="";
    try
    {
        Process proc = Runtime.getRuntime().exec(command);
        BufferedReader read = new BufferedReader(new InputStreamReader(proc.getInputStream()));
        try
        {
        proc.waitFor();
        }
        catch(InterruptedException e) 
        {
            output=e.getMessage();
        }
        while(read.ready())
        {
            output=read.readLine();
        }
    }
    catch(IOException e)
    {
        output=e.getMessage();
    }

    return output;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:58:32.633

您可以尝试以下方法：

```
String command = URLEncoder.encode("<your command>", "utf-8"); 
```

然后你可以尝试通过`Runtime.exec`

您还可以检查您的 JDK 是否真正支持：

```
Charset.forName("UTF-8") 
```

如果由于任何原因失败，那么您的 JDK 中可能有错误/未配置

# javascript - 使用 Wikipedia API 获取今天的精选文章？

> ID：15394992
> 
> 赞同：2
> 
> 时间：2013-03-13T19:44:21.390
> 
> 标签：javascript, jquery, html

我最终会尝试获取文章的介绍部分，但首先我只需要弄清楚如何获取文章本身。查看API，我得到了这个链接：

> [http://en.wikipedia.org/w/api.php?action=query&prop=revisions&action=featuredfeed&feed=featured&rvparse=1](http://en.wikipedia.org/w/api.php?action=query&prop=revisions&action=featuredfeed&feed=featured&rvparse=1)

这将我带到精选文章的提要，但 1) 该页面上的链接不起作用，并且 2) 没有更简单的方法来获取今天的精选文章吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T20:10:24.063

这是维基百科每日精选文章的一个非常酷的抓取提要网站：

[http://jeays.net/wikipedia/featured.xml](http://jeays.net/wikipedia/featured.xml)

我根本不熟悉他们的 API，但是这个提要可能是一个很好的来源，可以让您的项目快速进行，同时您自己弄清楚如何抓取提要。（根据您的应用程序的目的，依赖此提要可能不是最好的主意，以防它崩溃。）

现在您只需要解析 XML :)

# uitableview - 一个视图中有两个自定义单元格的两个 TableView

> ID：15394994
> 
> 赞同：0
> 
> 时间：2013-03-13T19:44:27.233
> 
> 标签：uitableview, ios6, xcode4.5, custom-cell

我编写了一些代码来在一个视图中显示两个 tableviews 的数据和两个自定义单元格：

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UIImage *image;

    static NSString *CellIdentifier= @"Cell";
        UITableViewCell *cell= [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if(!cell) {
            cell =[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
     if (tableView==self.eqALineup){
         static NSString *CellIdentifier= @"eqa";
         LineupACell *cell= [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

         if(!cell) {
             cell =[[LineupACell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

             cell.joueur.text=[arrayofJoueura objectAtIndex:indexPath.row];
         }

     }

    else {
        static NSString *CellIdentifier= @"eqb";
        LineupBCell *cell= [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if(!cell) {
            cell =[[LineupBCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
             cell.joueur.text=[arrayofJoueurb objectAtIndex:indexPath.row];
        }
}

    return cell;
} 
```

问题是两个表视图中没有显示数据。谢谢你的帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T23:07:42.007

如果没有真正深入研究您的问题，您是否可以尝试将此代码移到您的检查之外：

移动：

```
 if(!cell) {
        cell =[[LineupBCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
         cell.joueur.text=[arrayofJoueurb objectAtIndex:indexPath.row];
    } 
```

到：

```
 if(!cell) {
        cell =[[LineupBCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];  
    }
    cell.joueur.text=[arrayofJoueurb objectAtIndex:indexPath.row]; 
```

另外-我假设您在子类中定义了“joueur”属性，并且它通过插座与 UILabel 相关联？

这可能是另一个问题：确保您的属性与原型单元格中的标签相关联。

希望有帮助。

# mysql - mysql IN 和其他选项

> ID：15394997
> 
> 赞同：0
> 
> 时间：2013-03-13T19:44:48.973
> 
> 标签：mysql

嗨，我需要帮助我的查询。我想用产品找到 N 行

我的查询是：

```
 Select ...... WHERE
    s.id_prod = 2 AND s.sn IN(100,20) 
    LIMIT 3 
```

但是现在我有 3 种产品，但其中一种还没有。如何产生 3 行？

```
 s.sn IN(100,20 ,*) 
```

什么替换'*'会起作用？如果我有 100 个产品并且只有 2 个有 se (uniqe) 我必须有 3 行结果（sn 100 和 20 以及其他任何第 3 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:50:41.137

```
SELECT ...
FROM ...
WHERE s.id_prod = 2
ORDER BY s.sn IN(100,20) DESC
LIMIT 3 
```

这个想法是，`s.sn IN(100,20)`根据属性是否成立，评估为 1 或 0。按该属性的降序排序将在顶部列出该属性所持有的记录。

# c# - lambda 中使用的外部变量的含义

> ID：15394999
> 
> 赞同：1
> 
> 时间：2013-03-13T19:44:59.083
> 
> 标签：c#, lambda

我试图理解为什么下面的程序会给出它所做的输出。我知道这与参考和价值观有关，但我既不知道术语，也不知道去哪里了解更多信息。

```
 for (int x = 0; x < 2; x++)
        {
            int y = x;
            new Thread(new ThreadStart(() =>
                {
                    Thread.Sleep(100);
                    Console.WriteLine("Thread sees x = {0}, y = {1}", x, y);
                })).Start();
        }
        Thread.Sleep(1000); 
```

输出：

```
Thread sees x = 2, y = 0
Thread sees x = 2, y = 1 
```

非常感谢解释这类事情的参考资料。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T19:56:50.580

注意：这实际上不是完整的故事，我可能弄错了，但这个想法仍然存在。

这是因为**闭包**而发生的。

闭包发生在 for 循环中（过去也发生在 foreach 循环中，但在 C# 5 中发生了变化）。编译的内容是这样的：

```
int x = 0;
while (x < 2)
        {
            int y = x;
            new Thread(new ThreadStart(() =>
                {
                    Thread.Sleep(100);
                    Console.WriteLine("Thread sees x = {0}, y = {1}", x, y);
                })).Start();
            x++;
        }
        Thread.Sleep(1000); 
```

由于`x`存在于 for 循环范围之外，因此 lambda 不包含在内。所以它仍然是`x`. 但是，由于`y`' 的范围在 for 循环之外结束，因此 lambda 必须保留变量，它不能稍后在运行时获取它，因为到那时它就会消失。所以实际上，lambda 在运行时是这样的：

第一个循环运行：

```
() => Thread.Sleep(100); Console.WriteLine("Thread sees x = {0}, y = {1}, x, 0); 
```

第二个循环运行：

```
() => Thread.Sleep(100); Console.WriteLine("Thread sees x = {0}, y = {1}, x, 1); 
```

而当 lambda 实际运行时，`x`已经是`2`，并且由于它没有接受它，所以它读为`2`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T19:47:12.683

这就是[闭包](http://csharpindepth.com/articles/chapter5/closures.aspx)在 C# 4.0 及更早版本中的工作方式。变量 x 在 C# 5.0 中更直观（确实是 foreach，而不是所指出的 for 循环）。

闭包每次迭代都会捕获相同的变量。所以你最终得到了最后一个值。

```
 List<Action> actions = new List<Action>();
        for (int i = 0; i < 10; i++)
        {
            Action anonymousFunction = () => Console.WriteLine(i);                
            actions.Add(anonymousFunction);
        }
        foreach (var action in actions)
        {
            action();//prints out the last value every time
        } 
```

但是，您可以通过复制新值来更改行为。

```
 List<Action> actions = new List<Action>();
        for (int i = 0; i < 10; i++)
        {
            int copyOfOriginalValue = i;
            Action anonymousFunction = () => Console.WriteLine(copyOfOriginalValue);                
            actions.Add(anonymousFunction);
        }
        foreach (var action in actions)
        {
            action();//prints out unique values
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T19:48:25.990

您将匿名方法/ lambda 传递给`ThreadStart`对象的构造函数。编译器创建一个包含该匿名方法的类，并将该方法中的局部变量提升`x`为该`y`编译器创建的类中的类变量。这就是为什么它能够访问这些变量的值。

请参阅此 MSDN 文章： http: [//msdn.microsoft.com/en-us/library/0yw3tz5k (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/0yw3tz5k(v=vs.80).aspx)