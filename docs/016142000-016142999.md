# StackOverflow 问答 16142000-16142999

# facebook-like - 如何将 xmlns 命名空间添加到流星中的标记

> ID：16142005
> 
> 赞同：2
> 
> 时间：2013-04-22T07:53:35.380
> 
> 标签：facebook-like, meteor, addthis

这就是我想要完成的（使用 addthis 集成 Facebook 发送按钮）

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

但是 html 是我无法控制的。Meteor 还禁止向`<head>`以下对象添加属性：

```
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"> 
```

服务于相同目的的解决方法非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T08:10:17.373

在服务器端代码中添加以下行将解决您的第一个问题。

```
WebApp.addHtmlAttributeHook(function (request) { return 'xmlns:fb=http://ogp.me/ns/fb#'; }); 
```

我不知道你的第二个问题...

更新：当然你需要在 Meteor 1.0 中返回一个对象。WebApp.addHtmlAttributeHook(function (request) { return {'xmlns:fb': ' [http://ogp.me/ns/fb#](http://ogp.me/ns/fb#) '; });

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:11:49.530

我不确定如何通过原始源更改它。但是您可以在渲染的回调中使用某些内容来通过以下方式访问它：

```
Template.hello.rendered = function() {
    $('html').attr("xmlns:fb","http://ogp.me/ns/fb#");
    $("head").attr("prefix", "og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#");
} 
```

Meteor 渲染 DOM 后，它使用 JQuery 修改 html 标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-15T23:31:39.187

这对我有用：

```
WebApp.addHtmlAttributeHook(function (request) { return {"ng-app":"helloWorld"}}); 
```

（我希望我可以将此作为对[https://stackoverflow.com/a/16142297/5203563](https://stackoverflow.com/a/16142297/5203563)的评论，但我没有足够的评论点 - 我会支持它）

这似乎也可以在客户端添加它：

```
Meteor.startup(function() {
  $('html').attr('ng-app', 'helloWorld');
}); 
```

# c# - 通过 Outlook 互操作 dll 访问另一个用户的状态

> ID：16142008
> 
> 赞同：1
> 
> 时间：2013-04-22T07:53:44.413
> 
> 标签：c#, outlook

如果我在 Outlook 中打开其他人的日历，我可以查看他们是否有预定的会议时间。它们设置为繁忙、暂定等。
是否可以通过 Outlook 互操作 dll 获取此信息？谷歌搜索解决方案没有任何成功...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T01:12:12.840

最终使用了这段代码；

```
Microsoft.Office.Interop.Outlook.Application outlookApp = new Microsoft.Office.Interop.Outlook.Application();
NameSpace ns = outlookApp.GetNamespace("mapi");
ns.Logon(Missing.Value, Missing.Value, false, true);
AddressEntries addressBook = ns.GetGlobalAddressList().AddressEntries;
AddressEntry testSearch = addressBook["LastName, FirstName"];
Console.WriteLine("FreeBusy: {0}", testSearch.GetFreeBusy(DateTime.Now, 30, true)); 
```

仍然必须将 GetFreeBusy 字符串解析成有用的东西，但据我所知，没有比这更简单的了。不确定是否需要 NameSpace 登录（在另一段代码中使用它），但它不会减慢速度或导致任何问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T16:49:09.507

使用 Recipient.FreeBusy 或 AddressEntry.GetFreeBusy。

# jquery - phonegap 在表单类型文件上上传图像

> ID：16142009
> 
> 赞同：1
> 
> 时间：2013-04-22T07:53:49.113
> 
> 标签：jquery, html, cordova, ajaxform

我正在尝试使用 ajax.form.js 上传图像，因为表单与 phonegap 的文件传输不兼容。

javascript

```
 $('#sign-up-form').ajaxForm({ 
                //target: '#htmlExampleTarget', 

                success: function(data) { 
                    //alert(data);
                    alert('ok');

                } 
            }); 
```

php

```
 $username = $this->input->post('username');

    $config['upload_path'] = './uploads/profile/';
    $config['allowed_types'] = 'gif|jpg|jpeg|png';
    $config['max_size'] = '5024';
    $config['max_width']  = '5024';
    $config['max_height']  = '5024';
    $config['file_name']  = $username; 
```

它在 html 本地浏览器上上传，但出现此错误： XMLHttpRequest cannot load [http://xxxxxxx.com/xxxxxxx](http://xxxxxxx.com/xxxxxxx)。Access-Control-Allow-Origin 不允许 Origin null。

在phonegap上尝试过，但它不起作用，但它成功检查服务器没有上传图像。

非常感谢您提供有关如何执行此操作的建议，请告诉我是否应该使用另一种更好的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:13:50.810

您是否尝试将 Access-Control-Allow-Origin:* 添加到标题？

旧版本的 Phonegap 也有一个 URL 阻止列表。尝试将您的服务器添加到允许的域。

您可以在此处找到将您的域添加到白名单的指南：

[http://docs.phonegap.com/en/2.6.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/2.6.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

# excel - 使用 excel vba 读取自定义 xml 输出

> ID：16142014
> 
> 赞同：1
> 
> 时间：2013-04-22T07:54:02.273
> 
> 标签：excel, xml-parsing, vba

我们的其中一个系统以下列格式向我们提供 XML。

你能帮我如何解析这个 XML 并使用 excel 2010 vba 将它存储到数组中吗？

我想阅读标签中的内容。

提前感谢您的帮助。

```
<report_output>
<xml xmlns:s='uuid:BDC6E3F0-6DA3-11d1-A2A3-'
     xmlns:dt='uuid:C2F41010-65B3-11d1-A29F-'
     xmlns:rs='urn:schemas-microsoft-com:rowset'
     xmlns:z='#RowsetSchema'
     content="Report"
     title="CURVE REPORT"
     resultHeading="DUMPCURVE"
     resultName="CURVE REPORT"
     runat="04/22/13"
     user="xxx"
     database="xxx"
     version="xxx"
     applicationdate="04/22/13"
     >
  <s:Schema id='RowsetSchema'>
    <s:ElementType name='row' content='eltOnly'>
<s:attribute type='GeneratedPK' />      <s:attribute type='Ccy'/>
      <s:attribute type='dmIndex'/>
      <s:attribute type='CurveID'/>
      <s:attribute type='CurveDate'/>
      <s:attribute type='Days'/>
      <s:attribute type='Rate'/>
      <s:extends type='rs:rowbase'/>
    </s:ElementType>
<s:AttributeType name='GeneratedPK' rs:number='1' rs:maybenull='false' 
rs:keycolumn='true' rs:autoincrement='true' rs:writeunknown='true'>
<s:datatype dt:type='int' />
</s:AttributeType>
    <s:AttributeType name='Ccy' rs:number='2' rs:maybenull='true' rs:writeunknown='true'>
      <s:datatype dt:type='string' dt:maxLength='4' origDataType='STRING'/>
    </s:AttributeType>
    <s:AttributeType name='dmIndex' rs:number='3' rs:maybenull='true' rs:writeunknown='true'>
      <s:datatype dt:type='string' dt:maxLength='6' origDataType='STRING'/>
    </s:AttributeType>
    <s:AttributeType name='CurveID' rs:number='4' rs:maybenull='true' rs:writeunknown='true'>
      <s:datatype dt:type='string' dt:maxLength='9' origDataType='STRING'/>
    </s:AttributeType>
    <s:AttributeType name='CurveDate' rs:number='5' rs:maybenull='true' rs:writeunknown='true'>
      <s:datatype dt:type='string' dt:maxLength='10' origDataType='DATE  '/>
    </s:AttributeType>
    <s:AttributeType name='Days' rs:number='6' rs:maybenull='true' rs:writeunknown='true'>
      <s:datatype dt:type='string' dt:maxLength='35' origDataType='STRING'/>
    </s:AttributeType>
    <s:AttributeType name='Rate' rs:number='7' rs:maybenull='true' rs:writeunknown='true'>
      <s:datatype dt:type='number' dt:maxLength='50' origDataType='RATES '/>
    </s:AttributeType>
  </s:Schema>
  <rs:data>
  <z:row
 GeneratedPK='1'
    Ccy='xxx'
    dmIndex='xxx'
    CurveID='xxxx'
    CurveDate='2013-04-23T00:00:00'
    Days='1'
    Rate='0000'
  />
  <z:row
 GeneratedPK='2'
    Ccy='xxx'
    dmIndex='xxxxx'
    CurveID='xxxxx'
    CurveDate='2013-05-24T00:00:00'
    Days='32'
    Rate='00000000'
  />
  <z:row
 GeneratedPK='3'
    Ccy='xxx'
    dmIndex='xxx'
    CurveID='xxxx'
    CurveDate='2013-04-23T00:00:00'
    Days='1'
    Rate='0000'
  />
  <z:row
 GeneratedPK='4'
    Ccy='xxx'
    dmIndex='xxxxx'
    CurveID='xxxxx'
    CurveDate='2013-05-24T00:00:00'
    Days='32'
    Rate='00000000'
  />
<z:row
 GeneratedPK='5'
    Ccy='xxx'
    dmIndex='xxx'
    CurveID='xxxx'
    CurveDate='2013-04-23T00:00:00'
    Days='1'
    Rate='0000'
  />
  <z:row
 GeneratedPK='6'
    Ccy='xxx'
    dmIndex='xxxxx'
    CurveID='xxxxx'
    CurveDate='2013-05-24T00:00:00'
    Days='32'
    Rate='00000000'
  />
</rs:data>
</xml>

</report_output> 
```

到目前为止，在 excel vba 中，我尝试了以下代码，但无法继续

```
Dim xmldoc As New MSXML2.DOMDocument
xmldoc.Load ("C:\DOCUME~1\xyz\LOCALS~1\Temp\zr_aud_bbsw_130422.xml") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T03:29:09.993

感谢 Philip 的帮助，我可以解析我的 XML。以下是我的最终代码，它读取 XML 并为我提取存储在属性下的数据

```
Option Explicit
Public Sub LoadDocument()
Dim xDoc As MSXML.DOMDocument
Set xDoc = New MSXML.DOMDocument
xDoc.validateOnParse = False
If xDoc.Load("C:\LOG\zr_aud_bbsw_130422.xml") Then
   ' The document loaded successfully.
   ' Now do something intersting.
   DisplayNode xDoc.ChildNodes, 0
Else
   ' The document failed to load.
   ' See the previous listing for error information.
End If
End Sub

Public Sub DisplayNode(ByRef Nodes As MSXML.IXMLDOMNodeList, _
   ByVal Indent As Integer)

   Dim xNode As MSXML.IXMLDOMNode
   Dim xAttribute As MSXML.IXMLDOMAttribute
   Indent = Indent + 2

   For Each xNode In Nodes
      If xNode.NodeType = NODE_ELEMENT And Trim(xNode.ParentNode.nodeName) = "rs:data" Then
        For Each xAttribute In xNode.Attributes
            Debug.Print Space$(Indent) & xAttribute.BaseName & _
            ":" & xAttribute.NodeValue
        Next xAttribute

      End If

      If xNode.HasChildNodes Then
         DisplayNode xNode.ChildNodes, Indent
      End If
   Next xNode
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-25T12:31:28.670

不要忘记使用 xpath 语法选择节点的选项

这将返回所有行节点的节点列表

```
 Dim nodelist As MSXML2.IXMLDOMNodeList
   Set nodelist = xDoc.SelectNodes("//rs:data/z:row") 
```

使用 xpath，您可以像这样对一个或多个属性设置条件

```
 Dim nodelist As MSXML2.IXMLDOMNodeList
   Set nodelist = xDoc.SelectNodes("//rs:data/z:row[@CurveDate='2013-04-23T00:00:00']") 
```

[] 括号可以放在 xpath 表达式中的其他和多个节点上，并且可以使用通配符以及对父节点或子节点的前后引用。

在此处阅读有关 xpath 的更多信息[http://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp "w3schools")

# ios - iOS 蓝牙 BLE 连接到设备但显示服务为空

> ID：16142017
> 
> 赞同：2
> 
> 时间：2013-04-22T07:54:14.960
> 
> 标签：ios, service, core-bluetooth

我正在连接蓝牙系统[http://redbearlab.com/blemini/](http://redbearlab.com/blemini/)

从服务中读取一些数据，

如何查看可用于此设备的服务，我已使用[lightblue ios 应用程序](https://itunes.apple.com/us/app/lightblue/id557428110?mt=8&ign-mpt=uo=4)检查我的设备是否有服务。

我可以连接到我的设备并获取名称，

但我的服务数组显示为 null [使用上述应用检查的不是 null]

这是我的代码

```
#import "MainViewController.h"

@interface MainViewController ()

@property (nonatomic, retain)UILabel *deviceName;
@property (nonatomic, retain)UILabel *deviceUUID;
@property (nonatomic, retain)UILabel *deviceConnected;

@end

@implementation MainViewController

- (void)dealloc
{
    [_deviceName release];
    [_deviceUUID release];
    [_deviceConnected release];
    [super dealloc];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self initUI];

    self.view.backgroundColor = [UIColor lightGrayColor];
    NSLog(@"mgmt");

    self.manager = [[CBCentralManager alloc]initWithDelegate:self queue:nil];
}

- (void)centralManagerDidUpdateState:(CBCentralManager *)central {

    NSLog(@"centralManagerDidUpdateState");

    switch (central.state) {
        case CBCentralManagerStatePoweredOn:

            // Scans for any peripheral
            [self.manager scanForPeripheralsWithServices:nil options:nil];

            break;
        default:
            NSLog(@"Central Manager did change state");
            break;
    }
}

// device discovered
- (void)centralManager:(CBCentralManager *)central didDiscoverPeripheral:(CBPeripheral *)peripheral advertisementData:(NSDictionary *)advertisementData RSSI:(NSNumber *)RSSI {

    NSLog (@"Discovered peripheral: %@", [peripheral name]);
    NSLog (@"UUID peripheral: %@", [peripheral UUID]);

    NSLog (@"peripheral services: %@", [peripheral services]);

    self.deviceName.text = [NSString stringWithFormat:@"Device Name: %@", [peripheral name]];
    self.deviceUUID.text = [NSString stringWithFormat:@"Device UUID: %@",[peripheral UUID]];

    [self.manager connectPeripheral:peripheral options:nil];
}

//scan for peripherals
- (int) scanForPeripherals {

    NSLog(@"scanForPeripherals");

    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithBool:NO], CBCentralManagerScanOptionAllowDuplicatesKey, nil];
    [self.manager scanForPeripheralsWithServices:nil options:options];
    return 0;
}

- (void)centralManager:(CBCentralManager *)central didConnectPeripheral:(CBPeripheral *)peripheral {
    NSLog(@"Central Manager didConnectPeripheral");

    self.deviceConnected.text = @"Device Connected: YES";

    NSLog (@"UUID services: %@", [peripheral services]);

    // Clears the data that we may already have
    [self.data setLength:0];
    // Sets the peripheral delegate
    [self.activePeripheral setDelegate:self];
    // Asks the peripheral to discover the service

//test! direct
    CBUUID  *serviceUUID    = [CBUUID UUIDWithString:@"D298E274-3CB0-2C5F-A0B0-A90D97304453"];
    NSArray *serviceArray   = [NSArray arrayWithObjects:serviceUUID, nil];

    [self.activePeripheral discoverServices:serviceArray];

}

- (void)peripheral:(CBPeripheral *)aPeripheral didDiscoverServices:(NSError *)error {

    NSLog(@"didDiscoverServices");

    if (error) {
        NSLog(@"Error discovering service: %@", [error localizedDescription]);
        //[self cleanup];
        return;
    }

}

- (void)peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(NSError *)error {
    NSLog(@"didDiscoverCharacteristicsForService");

    if (error) {
        NSLog(@"Error discovering characteristic: %@", [error localizedDescription]);
        //[self cleanup];
        return;
    }

}

//
- (void)peripheral:(CBPeripheral *)peripheral didUpdateNotificationStateForCharacteristic:(CBCharacteristic *)characteristic error:(NSError *)error {

    NSLog(@"didUpdateNotificationStateForCharacteristic");

    if (error) {
        NSLog(@"Error changing notification state: %@", error.localizedDescription);
    }

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

所以请就为什么我的服务数组为空提供建议？以及如何访问它以“阅读”谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T08:46:14.707

您必须使用在 didDiscoverPeripheral 中获得的外围设备设置您的属性 self.activePeripheral。您的代码正在为 null 的外围设备发现服务，这就是您没有获得服务的原因。

# windows-phone-7 - Windows phone 7.8：无法在后台代理中下载图片

> ID：16142018
> 
> 赞同：0
> 
> 时间：2013-04-22T07:54:19.650
> 
> 标签：windows-phone-7

我在我的 Windows Phone 应用程序中使用后台任务来生成动态磁贴图像。为此，我下载了一张图片，将其保存到隔离存储中，然后设置动态磁贴以使用该图片。（我没有将动态磁贴设置为使用图像 url，因为我也在保存之前对其进行了修改）

我使用在 Windows Phone 8 上运行良好的 WebClient 来下载图片：

```
var wc = new WebClient();                
using (var stream = await wc.OpenReadTaskAsync(imageUri))
{
// Image modifications and saving
} 
```

当我在应用程序的 WP7.8 版本中使用相同的代码时，它不起作用：如果代码是在应用程序运行时启动的，而不是在后台代理中启动，则更新动态磁贴。

当我调试后台代理时，代码只是停在 OpenReadTaskAsync 行上，没有抛出任何异常。

图片不大（小于400 x 400px，70kb），不明白为什么下载不了。

WP7.8 后台代理是否比 WP8 更受限制？你有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:16:14.287

`NotifyComplete()`您应该在后台代理中的调用上放置一个断点。我的猜测是它会在你的结束之前以某种方式被调用`OpenReadTaskAsync`，从而过早地结束代理。

# android - 合并视频空白帧问题

> ID：16142019
> 
> 赞同：2
> 
> 时间：2013-04-22T07:54:22.243
> 
> 标签：android

我想一个接一个地播放视频。

此代码正在运行，但是**在视频结束时，在开始第二个视频之前，我得到了空白帧。**

```
<VideoView 
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:id="@+id/video"
        /> 
```

诠释 i = 0; 列出 videoPathes = new ArrayList(); 私人 VideoView 视频视图；

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        videoview = (VideoView) findViewById(R.id.video);
        videoPathes.add("http://192.168.1.8/User_files/VID_20130422_124555.3gp");

    videoPathes.add("http://192.168.1.8/User_files/VID_20130422_124609.3gp");
            videoview.setVideoPath(videoPathes.get(i));
            videoview.setMediaController(new MediaController(this));
            videoview.start();

            videoview.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

                    public void onCompletion(final MediaPlayer mp) {

                         i = (i + 1) % videoPathes.size();

                         videoview.setVideoPath(videoPathes.get(i));
                         videoview.start();
                            }
            }); 
```

# php - 属性是否默认声明为私有？

> ID：16142022
> 
> 赞同：-1
> 
> 时间：2013-04-22T07:54:42.613
> 
> 标签：php, oop

我有一个属性`$value`，它会根据我是否`private`在变量声明前添加不同的错误消息。

```
Class Node{
        $value = NULL;
        public function __construct($value){
                $this->value = $value;
        }
}

$node = new Node('hello');
echo $node->value; 
```

> PHP 解析错误：语法错误，意外的 T_VARIABLE，在第 4 行的 /home/ubuntu/new.php 中需要 T_FUNCTION

但是，如果我替换`$value = NULL;`为 `private $value = NULL;`我会收到不同的错误消息：

> PHP 致命错误：无法访问第 11 行 /home/ubuntu/new.php 中的私有属性 Node::$value

我认为省略私有一词会自动使财产私有？

**编辑**

我现在明白属性默认情况下是公共的。`$value`在声明没有附加属性的属性时，我怎么会出错`public`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:58:25.213

在 PHP 中默认[可见性](http://php.net/manual/en/language.oop5.visibility.php)是公开的。我猜你认为是私有的，因为它是 Java 和其他 OO 语言的默认值。

//编辑

我的小错误，变量具有强制可见性，关于公共的部分默认是关于方法的。我建议始终指定您需要避免混淆的级别。

var 关键字是 public 的别名（出于兼容性原因，它们保留）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:59:32.487

**您之前**遇到了第一个错误

 **```
echo $node->value; 
```

放置类代码而不调用它，你会得到同样的错误。

您只是在线出现语法错误：

```
 $value = NULL; 
```

用。。。来代替：

```
var $value = NULL; 
```

## 更新

但这是错误的解决方案，只是为了显示您的问题在哪里。**始终**将可变[可见性](http://php.net/manual/en/language.oop5.visibility.php)设置为以下之一：

*   私人的
*   受保护
*   上市**

# c - C语言中的Z3数组不是python

> ID：16142023
> 
> 赞同：1
> 
> 时间：2013-04-22T07:54:47.000
> 
> 标签：c, multidimensional-array, z3

如果您不了解 Z3 求解器，请不要回答。我之前发布了这个问题，一些答案，如如何在 C 中实现数组弹出。有一些人在这个论坛上开发了 Z3 求解器。它是针对他们的。如果你不知道Z3求解器请避免回答这个问题。

我之前已经发布了这个问题并得到了解决方案，就像在 Python 中一样。我们已经在 python 中实现了以下问题。我们正在尝试移植 Z3 求解器以将 Z3 求解器集成到内部工具中，作为我论文的一部分。你能帮我吗用“C”语言而不是 python 显示以下要求的解决方案。

我想使用 C API 使用 z3 求解器定义和创建一个二维数组，如下所示

示例：a[3][3] 如何使用 Z3 求解器 C API 定义它，其中我需要添加约束，例如

二维数组的元素只有 0 或 1。每行的总和等于 1 每列的总和（控制器内存）如果我 <= 100 我要解决的问题是，我有两个数组，其中一个是[sw]={50,25,100,75} 表示每个函数产生的数据（50kb）。b[cont]={100,100,100} 具有内存（kb）容量的控制器。我们正在尝试生成 a[4][3 ] 矩阵显示了对满足上述约束的控制器的功能分配

上述问题的示例输出（这可以是众多配置中的一种）。但它是一个有效的配置

a[sw][续] =

ABC
A 1 0 0 B 1 0 0
C 0 1 0
D 0 0 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:53:04.503

Z3 Python API 在 C API 之上实现。任何用 Python 编写的 Z3 示例都可以转换为 C/C++。然而，Z3 Python API 使用起来更方便，而且 Python 列表推导简化了编码。这是在 C++中编码 Python 示例（ [Z3 求解器中的二维数组）的一种方法。](https://stackoverflow.com/questions/16055165/two-dimensional-array-in-z3-solver)主要区别是：我使用`std::vector`而不是列表，使用 for 循环而不是列表推导。

```
void cpp_vector_example() {
    context c;
    unsigned n = 3;
    std::vector<std::vector<expr> > A;
    // Create a nxn matrix of Z3 integer constants
    for (unsigned i = 0; i < n; i++) {
        A.push_back(std::vector<expr>());
        for (unsigned j = 0; j < n; j++) {
            char name[100];
            sprintf(name, "a_%d_%d", i, j);
            A[i].push_back(c.int_const(name));
        }
    }

    solver s(c);

    // Add constraint: the sum of each row is one
    for (unsigned i = 0; i < n; i++) {
        expr sum(c);
        sum = A[i][0];
        for (unsigned j = 1; j < n; j++) {
            sum = sum + A[i][j];
        }
        s.add(sum == 1);
    }

    // Add constraint: the sum of each column is less than 100
    for (unsigned j = 0; j < n; j++) {
        expr sum(c);
        sum = A[0][j];
        for (unsigned i = 1; i < n; i++) {
            sum = sum + A[i][j];
        }
        s.add(sum <= 100);
    }

    // Add constraint: for each a_i_j in the matrix, 0 <= a_i_j <= 10
    for (unsigned j = 0; j < n; j++) {
        for (unsigned i = 1; i < n; i++) {
            s.add(0 <= A[i][j]);
            s.add(A[i][j] <= 100);
        }
    }

    // Display constraints added to solver s.
    std::cout << s << "\n";

    // Solve constraints
    std::cout << s.check() << "\n";

    // Print solution (aka model)
    model m = s.get_model();
    std::cout << m << "\n";

    // Print result as a matrix
    for (unsigned i = 0; i < n; i++) {
        for (unsigned j = 0; j < n; j++) {
            std::cout << m.eval(A[i][j]) << " ";
        }
        std::cout << "\n";
    }
} 
```

# c - C编程语言帮助我？

> ID：16142024
> 
> 赞同：-8
> 
> 时间：2013-04-22T07:54:47.743
> 
> 标签：c

我必须编写一个程序，打印以下表达式“1-2+3-4+5+.... n.（奇数相加，偶数相减）我写了这个确切的代码：

```
#include <stdio.h>
int main ()
{
    float c,n,i,s;
    c=getch ();
    printf ("\n Please write n:");
    scanf ("%f",&n);
    s=0.f;
    for (i=1;i<=n;i++)
    {
        s+=((2*i-1) -2*i );
    }
    printf("\n Sum =%.2f",s);
    getch ();
 } 
```

当我编译它时，它没有显示错误。当我运行它时，每次我输入一个数字，例如5，我得到的结果是-5，或者如果我输入3，我得到-3。我做错了什么？

编辑：我需要得到这种结果：例如，如果我放 6，我必须做 1-2+3-4+5-6 =-3。如果我放 4，我必须做 1-2+3-4=-2。依此类推！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:57:09.417

你的总结是错误的：

```
s+=((2*i-1) -2*i ); 
```

给`-1`.

你需要：

```
s+=i*(2*(i%2) - 1); 
```

它将给所有偶数的“-”`i`和所有奇数的“+” `i`。

而且由于您只处理整数，`i`应该是`int`，以及您使用的所有其他变量：

```
#include <stdio.h>
int main ()
{
    int s = 0, c= 0, n = 0, i = 1;
    c = getch();
    printf ("\n Please write n:");
    scanf ("%d",&n);
    for (i=1; i<=n; i++)
    {
        s+=i*(2*(i%2) - 1);
    }
    printf("\n Sum =%d",s);
    getch ();
 } 
```

更简单，使用一些简单的数学，你可以得到它：

```
if(n%2 == 0){
    s = -n/2;
}
else{
    s = n - n/2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:57:57.400

你为什么要使用`float`？`int`改为使用

```
#include <stdio.h>
int main ()
{
    int s = 0, c= 0, n = 0, i = 0;
    c=getch ();
    printf ("\n Please write n:");
    scanf ("%d",&n);
    for (i=1;i<=n;i++)
    {
        //s+=((2*i-1) -2*i );
        if( i%2 == 0)
           s -= i;
        else
           s += i; // a little more verbose, but should work        
    }
    printf("\n Sum =%d",s);
    getch ();
 } 
```

使用`float`整数求和和作为循环的索引`for`不是好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:12:25.177

```
#include <stdio.h>
int main ()
{
    float c,n,i,s;
    c=getch ();
    printf ("\n Please write n:");
    scanf ("%f",&n);
    s=0.f;
    //for (i=1;i<=n;i++) //problem is here instead of n you use n/2 it will work
    for (i=1;i<=(n/2);i++)
    {
        s+=((2*i-1) -2*i );
    }
    printf("\n Sum =%.2f",s);
    getch ();
 } 
```

因为您的循环一次执行 2 个术语，所以直到 n 它将计算 n*2 的总和

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T08:08:51.557

首先，您的计算`s+=((2*i-1) -2*i );`看起来适合成对的数字，但您的循环`for (i=1;i<=n;i++)`是单独计算数字而不是成对计算数字。

其次，如果用户输入一个数字，比如`1234.5`循环将永远不会停止（正如其他人所提到的，根本没有理由使用浮点数）。

第三，您根本不需要循环。如果`n`是偶数，那么答案是`-n/2`，如果`n`是奇数，答案是`n-(n-1)/2`。

# google-app-engine - JUnit for GAE：后端服务是否有 LocalTestConfig

> ID：16142025
> 
> 赞同：0
> 
> 时间：2013-04-22T07:54:50.400
> 
> 标签：google-app-engine

我没有找到一种方法来执行称为“LocalBackendServiceTestConfig”的东西......从这个页面查看这个 - [https://developers.google.com/appengine/docs/java/tools/localunittesting/javadoc/com/google /appengine/tools/development/testing/package-tree](https://developers.google.com/appengine/docs/java/tools/localunittesting/javadoc/com/google/appengine/tools/development/testing/package-tree)。好像没有。。。

所以，如果我有像这样在我的 JUnit 中运行的代码片段：

```
TaskOptions taskOptions = TaskOptions.Builder.withUrl(PageConstant.PROCESS_CSV_FILE)
                                .param("blobId", blobId)
                                .param("drive", csvUploadFileModel.getDriveStatus())
                                .param("sites", csvUploadFileModel.getSitesStatus())
                                .header("Host", BackendServiceFactory.getBackendService().getBackendAddress("backend-1"))
                                .method(Method.POST); 
```

它会抛出这个异常：

```
Caused by: java.lang.NullPointerException
    at com.google.appengine.api.backends.BackendServiceImpl.getDevAppServerLocalAddress(BackendServiceImpl.java:70)
    at com.google.appengine.api.backends.BackendServiceImpl.getBackendAddress(BackendServiceImpl.java:43) 
```

知道如何解决这样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T06:23:05.420

不幸的是，谷歌不提供此功能。

我通过创建一个用于测试的模拟来解决这个问题。

```
public class BackendServiceFactory {

public static BackendService getBackendService() {
    return new MockBackendService();
}

public static class MockBackendService implements BackendService {

    /*
     * (non-Javadoc)
     * @see com.google.appengine.api.backends.BackendService#getBackendAddress(java.lang.String)
     */
    @Override
    public String getBackendAddress(String arg0) {
        return "localhost:8080";
    }

    /*
     * (non-Javadoc)
     * @see com. google.appengine.api.backends.BackendService#getBackendAddress(java.lang.String,
     * int)
     */
    @Override
    public String getBackendAddress(String arg0, int arg1) {
        // TODO Auto-generated method stub
        return null;
    }

    /*
     * (non-Javadoc)
     * @see com.google.appengine.api.backends.BackendService#getCurrentBackend()
     */
    @Override
    public String getCurrentBackend() {
        // TODO Auto-generated method stub
        return null;
    }

    /*
     * (non-Javadoc)
     * @see com.google.appengine.api.backends.BackendService#getCurrentInstance()
     */
    @Override
    public int getCurrentInstance() {
        // TODO Auto-generated method stub
        return 0;
    }

}
} 
```

但是，当运行配置了后端的开发服务器时，任务队列不起作用。你应该看看[这个问题](https://code.google.com/p/googleappengine/issues/detail?id=5105)（从 2011 年开始）。

# html - 简单的 HTML Dom Parser - 基于 alt 标签查 找 img

> ID：16142027
> 
> 赞同：0
> 
> 时间：2013-04-22T07:54:55.730
> 
> 标签：html, image, dom, alt

我正在使用简单的 HTML DOM 解析器来尝试获取 alt 属性为 alt="map" 的 img 标签的 href（空格是有意的）。这是我正在使用的代码：

```
$result = $page->find("img[alt= map]",0)->href; 
```

但是，当预期的匹配在 html 中时，它不会选择它。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:11:10.400

[元素](http://www.w3.org/TR/html5/embedded-content-0.html#the-img-element)没有`href`属性。你可能想要.[`img`](http://www.w3.org/TR/html5/embedded-content-0.html#the-img-element)[`src`](http://www.w3.org/TR/html5/embedded-content-0.html#attr-img-src)

# c# - 如何使用 C# 读取 excel 中的单元格？

> ID：16142029
> 
> 赞同：0
> 
> 时间：2013-04-22T07:54:56.150
> 
> 标签：c#, excel, automation, excel-2010, cells

我想用 C# 制作一个 excel 工具。该工具必须打开文件夹中的每个 Excel 文档并在单元格 E1 中查找值。如果单元格包含我搜索的值，它将被删除并保存文档。然后应用程序将转到下一个 excel 文件。

我可以打开文档，但无法在单元格中查找值。

这是我的代码：

```
using Microsoft.Office.Interop.Excel;

//Preparing the required items
Microsoft.Office.Interop.Excel.Application excel = null;
Workbook wb = null;

//Start Excel 
excel = new Microsoft.Office.Interop.Excel.Application();
excel.Visible = false;

try
{
    //Open file
    wb = excel.Workbooks.Open(
        @"C:\Users\....",
        ExcelKonstanten.UpdateLinks.DontUpdate,
        ExcelKonstanten.ReadOnly,
        ExcelKonstanten.Format.Nothing,
        "", //Password
        "", //WriteResPasswort
        ExcelKonstanten.IgnoreReadOnlyRecommended,
        XlPlatform.xlWindows,
        "", //Separator
        ExcelKonstanten.Editable,
        ExcelKonstanten.DontNotifiy,
        ExcelKonstanten.Converter.Default,
        ExcelKonstanten.DontAddToMru,
        ExcelKonstanten.Local,
        ExcelKonstanten.CorruptLoad.NormalLoad);

    //Read sheets
    Sheets sheets = wb.Worksheets;

    //Select a sheet…
    Worksheet ws = (Worksheet)sheets.get_Item("Tabelle1");
    //…or a cell
    Range range = (Range)ws.get_Range("E", "1");
    //Read out the value
    string zellwert = range.Value2.ToString(); // <--- This is where I get the error!
    string zellwert = range.Value2; 
    Console.WriteLine(zellwert);
}
catch (Exception e)
{
    Console.WriteLine(e.Message);
}
finally
{
    wb.Close(false, null, null);
    excel.Quit();
}

Console.WriteLine("Prüfung abgeschlossen..."); 
```

我在这个页面上尝试了同样的事情：

[http://blog.stefan-macke.com/2006/06/28/c-projekt-zugriff-auf-excel-dateien/](http://blog.stefan-macke.com/2006/06/28/c-projekt-zugriff-auf-excel-dateien/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:43:01.857

我觉得你应该再看看你的代码。当您要求一个范围时，您将要读取的 shell 放在哪个范围内。

例如：

```
Range range = ( Range ) ws. get_Range ( "E1" , "E1" ) ; 
```

# java - 如何使用 JavaFX 制作用户界面

> ID：16142032
> 
> 赞同：0
> 
> 时间：2013-04-22T07:55:07.483
> 
> 标签：java, javafx-2, javafx

我想构建用于编辑数据库表的复杂 JavaFX 应用程序。我需要建议如何构建用户界面 - 使用 FXML 进行可视化布局或使用 Java API 并手动制作用户界面？但是有没有一种设计工具可以让我使用 Java API 来构建接口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:55:03.383

To the design some FXML layouts I would take the [Oracles JavaFX Scene Builder 1.1](http://www.oracle.com/technetwork/java/javafx/tools/index.html).

Which option you should take depends on your experience. I've had good experiences with both techniques and prefer the FXML method. Because I worked a lot with JSF and secondly the separation between UI and data management is very good.

# java - 创建一个没有现有类的对象

> ID：16142034
> 
> 赞同：2
> 
> 时间：2013-04-22T07:55:09.787
> 
> 标签：java, class, parsing

我想知道是否可以为不存在的类创建一个“临时”对象（在运行时），并为该对象创建字段。

我正在解析一个文本文件，我需要手动创建数百个（如果不是更多）类来存储（然后写入）该文件中表示的所有数据。

该文件看起来像：

```
person,John,28,USA,Male
person,Rebecca,25,USA,Female 
```

... 之后 ...

```
address,John,...
address,Rebecca,.. 
```

我想做一个方法，当遇到一种新的数据（这里是一个人或地址）时，创建一个不存在的相应类（Person.class 或 Address.class）的对象在我的 src 代码中。

然后，我将围绕 (",") 分割线，并为每个字符串创建一个新字段，为该新对象创建一个新字段并将值放入其中。

编辑 ：

找到了似乎是我需要的[dexmaker](http://code.google.com/p/dexmaker/)，但我能否使用 dexmaker 生成的类使用 JAXB/DOM 或其他类似实现来构建输出 xml？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T08:19:41.507

您可以使用 a`HashMap<String, String>`作为灵活的对象：每个键（字段名）都引用一个字段值。

为每种类型（地址、人员）添加一个 HashMap，并且为了保持类型哈希图的跟踪，请使用`HashMap<String, HashMap<String, String>>`:)

这有点像实际上是关联数组的 javascript 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T08:00:22.750

您可以拥有任何在 Properties 容器中保存 String 键和值的类。不知道为什么有用...

对于 SQL，有 ORM 框架，如果您已链接库并正确配置，它将自动完成您的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:32:20.923

为什么需要临时对象？如果您真的不想在源代码中创建任何类，则可以借助 Collections。使用合适的集合来短期保存数据。

它们是预定义的，无需为此创建任何类。您可以使用 HashMap、HashTable 等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T06:01:55.867

为了存储解析数据，您可以使用 Collections 类实用程序。我也在解析文件，我总是喜欢使用 Map,List。Java 为快速开发提供了这些东西，不会浪费时间。为每个新数据创建一个对象并比较这些对象，以便在 Map 中仅存储不同类型的对象。

# python - 如何在 Python 中的字典中打印列表？

> ID：16142041
> 
> 赞同：1
> 
> 时间：2013-04-22T07:55:35.433
> 
> 标签：python, json

我有以下字符串，我想打印列表对象：

```
{u'categories': [u'Food', u'Grocery']} 
```

我使用了以下 ode 但不起作用：

```
d = {u'categories': [u'Food', u'Grocery']}                        
print "Categories: " + d['categories']                     
print "Categories: " + d['categories[0]'] 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T07:57:06.037

```
>>> d = {u'categories': [u'Food', u'Grocery']}
>>> print "Categories: " + ', '.join(d['categories'])
Categories: Food, Grocery
>>> print "Categories: " + d['categories'][0]
Categories: Food 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T07:57:09.203

如果您想打印类别，然后是每个类别的名称，那么：

```
for category in your_dict['categories']:
    print 'Categories:', category 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:08:49.627

```
for k,v in your_dict.iteritems():
    for item in v:
        print k, ":", item 
```

# xcode - 如何与他人共享 xCode .app 产品

> ID：16142047
> 
> 赞同：2
> 
> 时间：2013-04-22T07:55:52.413
> 
> 标签：xcode

我在 xCode 中构建了一个非常简单的应用程序，并希望与其他人的不运行 xCode 的计算机共享它。这是一个简单的打印到控制台应用程序。我如何在不通过 iTunesconnect 的情况下与他们分享（似乎很浪费）。

有没有办法向他们发送可以安装和运行应用程序的包？向他们发送应用程序本身？从github下载？

我在分享它的方式上很灵活，但不想把 xCode 放在她的 comp 上。

我已经构建它用于存档并签名（我认为）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:09:03.057

转到管理器->存档。您可以“导出开发人员 ID 签名”以保存 .pkg。这将需要您拥有一个证书（私钥）作为“Developer-ID Application”和“Developer-ID Installer”。前往 developer.apple.com 获取该证书。这样，应用程序可以安装在任何允许从 App Store 和 Identified Developers 安装应用程序的 Mac 上。

如果您不签署应用程序，您可以导出为应用程序或安装程序。但是用户必须在设置->安全中启用任何应用程序的安装。

# x264 - 当我使用 x264 时这是正确的吗？

> ID：16142051
> 
> 赞同：0
> 
> 时间：2013-04-22T07:56:22.340
> 
> 标签：x264, libx264

这是使用新的 x264 api 的权利吗，我想得到一个框架，并用 x264 对其进行编码，然后将其保存到 .264 文件中？但我不知道这是对的吗？

```
picIn.img.plane[0] = pInBuffer ;
picIn.img.plane[1] = pInBuffer +m_VideoEncParam.nWidth*m_VideoEncParam.nHeight ;
picIn.img.plane[2] = pInBuffer +m_VideoEncParam.nWidth*m_VideoEncParam.nHeight*5/4 ;

picIn.img.i_stride[0] = m_VideoEncParam.nWidth ;
picIn.img.i_stride[1] = m_VideoEncParam.nWidth /2 ;
picIn.img.i_stride[2] = m_VideoEncParam.nWidth /2 ;

nRet = x264_encoder_encode(
                            m_pX264Handle,
                            &pNal,
                            &nNalCount,
                            &picIn,
                            &picOut);
if (nRet<0)
{
    return -1 ;
}

for (int i = 0 ;i<nNalCount ; i++)
{

    //memcpy(pOut+nLenOut,&pNal[i],pNal[i].i_payload) ;
    x264_nal_encode(m_pX264Handle,pOutBuffer+nLenOut,&pNal[i]);
    nLenOut += pNal[i].i_payload ;
}
int nSize = 0 ;
FILE *pFile = fopen(pchFileName,"w") ;
if (!pFile)
{
    return -1 ;
}
nSize = fwrite(pOutBuffer,1,nLenOut,pFile) ;
fclose(pFile) ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:51:47.283

不，至少在输出时调用 x264_nal_encode 是不对的。当前（不超过 2 年）版本的 libx264 返回已转义的 nals（仅在 nalu_process 回调功能的情况下才需要 x264_nal_encode）。此外，您不需要计算 NAL 大小的总和，因为正 nRet 值已经是这个总和。您可以直接使用 nRet 大小编写 pNal[0].p_payload，因为 API 保证所有输出 NAL 的有效负载在内存中是连续的。

# gawk - Gawk 查找带零的模式引号失败

> ID：16142052
> 
> 赞同：0
> 
> 时间：2013-04-22T07:56:23.113
> 
> 标签：gawk

我正忙着编写一个 AWK 脚本来匹配字符串中的特定模式。这是字符串：

```
~SD0~ 2 (239) B="004662" N=165 U=2 <REJS> R=72 
```

我正在使用以下匹配模式：

```
if (match ($0, /B=\"([0-9]+)\"/) > 0) 
```

只要字符串中有：**B="004662"**但匹配模式在双引号后不以 '0' 开头时匹配模式匹配，则此匹配模式失败，例如：**B="104662"**。似乎组合“0（带零的双引号）不是一个‘好的’组合。

欢迎所有克服此问题的提示和提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:16:29.040

这些方法都适用于我使用`GNU Awk 4.0.1`

```
/B=\"[0-9]+\"/ {
  print "match!"
}

{
  if (match($0, /B=\"([0-9]+)\"/) > 0) {
    print "also match"
  }
  else {
    print "no match"
  }
}

match($0, /B=\"([0-9]+)\"/,a) { print a[1] } 
```

输出：

```
match!
also match
0004662 
```

# c - 从 MPI c 中的命令行参数读取字符串

> ID：16142064
> 
> 赞同：0
> 
> 时间：2013-04-22T07:57:12.270
> 
> 标签：c, command, mpi, command-line-arguments

我必须编写一个 MPI c 程序。尽管我添加了 string.h，但我的编译器无法识别数据类型 string。我想从命令行读取一个字符串并将其传递给下面给出的函数

```
int find_rows(char * file)
{
    int  length=0;
    char buf[BUFSIZ];
    FILE *fp;
    fp=fopen(file, "r");
    while ( !feof(fp))
    {
         // null buffer, read a line
        buf[0] = 0;
        fgets(buf, BUFSIZ, fp);
        // if it's a blank line, ignore
        if(strlen(buf) > 1) 
        {
            ++length;
        }

    }
    fclose(fp); 
#ifdef DEBUG
    printf("lFileLen = %d\n", length);
#endif
return    length;     

} 
```

当我有这个功能时

```
 char file[50] = "m5-B.ij"; 
```

然后打电话

```
nvtxs = find_rows(&file ); 
```

但是当我给出时给我分段错误

```
 nvtxs = find_rows(argv[1] ); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:59:48.237

代替

```
find_rows(&file ); 
```

称呼

```
find_rows(file ); 
```

`file`已经是一个指针。您正在将指针的地址传递给函数。

然后稍后在函数中，`find_rows`您尝试打开无效文件并对其进行操作，这是一个导致*未定义行为*`fp`的空指针 。

 **编辑*

你的电话`nvtxs = find_rows(argv[1] );`是正确的。问题`fp=fopen(file, "r");`可能是无法打开文件，如果文件不存在或找不到文件。*

# java - Hibernate：必须在调用 save() 之前手动分配此类的 id

> ID：16142071
> 
> 赞同：59
> 
> 时间：2013-04-22T07:57:48.060
> 
> 标签：java, hibernate

我在使用 Hibernate 和`oneToMany`映射时遇到了一些问题。

这是我的功能：

```
 Location location = new Location();
        location.setDateTime(new Date());
        location.setLatitude(lat);
        location.setLongitude(lon);

        location = this.locationDao.save(location);

        merchant = new Merchant();
        merchant.setAddress(address);
        merchant.setCity(city);
        merchant.setCountry(country);
        merchant.setLocation(location);
        merchant.setName(name);
        merchant.setOrganization(organization);
        merchant.setPublicId(publicId);
        merchant.setZipCode(zipCode);
        merchant.setApplication(this.applicationDAO.findByPublicId(applicationPublicId));

        merchant = this.merchantDao.save(merchant);

        return merchant; 
```

这是我的两个实体：

**地点**

```
import java.io.Serializable;
import java.util.Date;
import java.util.List;
import javax.persistence.*;
import javax.validation.constraints.NotNull;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;

@Entity
@Table(name = "location")
@XmlRootElement
public class Location implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id", nullable = false)
    private Long id;

    @Basic(optional = false)
    @NotNull
    @Column(name = "latitude", nullable = false)
    private double latitude;

    @Basic(optional = false)
    @NotNull
    @Column(name = "longitude", nullable = false)
    private double longitude;

    @Basic(optional = false)
    @NotNull
    @Column(name = "date_time", nullable = false)
    @Temporal(TemporalType.TIMESTAMP)
    private Date dateTime;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "location")
    private List<Merchant> retailerList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "location")
    private List<MobileUser> userList;

    public Location() {
    }

    public Location(Long id) {
        this.id = id;
    }

    public Location(Long id, double latitude, double longitude, Date dateTime) {
        this.id = id;
        this.latitude = latitude;
        this.longitude = longitude;
        this.dateTime = dateTime;
    }

    public Long getId() {
        return id;
    }
    //getters and setters

    @XmlTransient
    public List<Merchant> getRetailerList() {
        return retailerList;
    }

    public void setRetailerList(List<Merchant> retailerList) {
        this.retailerList = retailerList;
    }

    @XmlTransient
    public List<MobileUser> getUserList() {
        return userList;
    }

    public void setUserList(List<MobileUser> userList) {
        this.userList = userList;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Location)) {
            return false;
        }
        Location other = (Location) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "com.fgsecure.geoloc.entities.Location[ id=" + id + " ]";
    } 
```

**商人**

```
import java.io.Serializable;
import javax.persistence.*;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;
import javax.xml.bind.annotation.XmlRootElement;
import org.codehaus.jackson.annotate.JsonAutoDetect;
import org.codehaus.jackson.annotate.JsonIgnore;

@JsonAutoDetect
@Entity
@Table(name = "retailer")
@XmlRootElement

public class Merchant implements Serializable {

    private static final long serialVersionUID = 1L;
    @JsonIgnore
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id", nullable = false)
    private Long id;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 50)
    @Column(name = "public_id", nullable = false, length = 50)
    private String publicId;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 50)
    @Column(name = "name", nullable = false, length = 50)
    private String name;
    @Size(max = 50)
    @Column(name = "organization", length = 50)
    private String organization;
    @Size(max = 128)
    @Column(name = "address", length = 128)
    private String address;
    @Size(max = 10)
    @Column(name = "zip_code", length = 10)
    private String zipCode;
    @Size(max = 50)
    @Column(name = "city", length = 50)
    private String city;
    @Size(max = 50)
    @Column(name = "country", length = 50)
    private String country;
    @JoinColumn(name = "location_id", referencedColumnName = "id", nullable = false)
    @ManyToOne(optional = false)
    private Location location;
    @JoinColumn(name = "application_id", referencedColumnName = "id", nullable = false)
    @ManyToOne(optional = false)
    private Application application;

    public Merchant() {
    }

    public Merchant(Long id) {
        this.id = id;
    }

    public Merchant(Long id, String publicId, String name) {
        this.id = id;
        this.publicId = publicId;
        this.name = name;
    }

   //getters and setters

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Merchant)) {
            return false;
        }
        Merchant other = (Merchant) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "com.fgsecure.geoloc.entities.Retailer[ id=" + id + " ]";
    }
} 
```

每次我调用我的函数时，我都会得到：

```
org.hibernate.id.IdentifierGenerationException: ids for this class must be manually assigned before calling save(): 
```

对于这一行：

```
location = this.locationDao.save(location); 
```

我不明白为什么。因为在这种情况下，无需手动分配位置 id，因为它是自动生成的。我一定是做错了什么，但 3 天后我没有找到。

我正在使用 PostGreSQL，并且 id 是具有以下序列的自动生成的 ID：

```
nextval('location_id_seq'::regclass)` 
```

**编辑解决：**

好的，谢谢您的回答。

如果将来可以帮助其他人，只需通过以下方式修改 id 的参数：

```
 @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id",unique=true, nullable = false) 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-22T08:00:16.363

您的 id 属性未设置。这可能是因为 DB 字段未设置为自动递增？你用的是什么数据库？MySQL？您的字段设置为自动增量吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-07-05T00:35:46.777

## [在休眠中分配主键](https://youtu.be/74_ynB007uQ)

确保该属性是数据库中的主键和[Auto Incrementable](https://stackoverflow.com/a/787774/5279996)。然后使用 IDENTITY将其映射到带有注释**的数据类中。**`@GeneratedValue`

```
@Entity
@Table(name = "client")
data class Client(
    @Id 
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id") 
    private val id: Int? = null
) 
```

总帐

[资源](https://stackoverflow.com/a/11691472/5279996)

# php - 维基百科文章的字符串比较

> ID：16142072
> 
> 赞同：1
> 
> 时间：2013-04-22T07:57:50.270
> 
> 标签：php, data-mining, wikipedia

我正在检索 Wikipedia 类别的请求

```
http://en.wikipedia.org/w/api.php?format=json&action=query&prop=categories&cllimit=5000&titles=request 
```

我接下来要做的是将每个类别的描述文章与一个字符串进行比较，我已经必须找到哪个是最佳匹配。我想找到一个度量来计算考虑语义含义的 2 个文本之间的相似性，你知道有什么库可以做到这一点或计算字符串之间的向量空间模型距离吗？

例如，请求`http://en.wikipedia.org/w/api.php?format=json&action=query&prop=categories&cllimit=5000&titles=Machine%20learning`返回如下所示的数组。我想将每个类别的每篇文章与一个字符串进行比较，并找到最匹配的文章，在这种情况下将是`http://en.wikipedia.org/wiki/Machine_learning`第七篇文章。

```
[categories] => Array
                                (
                                    [0] => Array
                                        (
                                            [ns] => 14
                                            [title] => Category:All articles needing additional references
                                        )

                                    [1] => Array
                                        (
                                            [ns] => 14
                                            [title] => Category:All articles with unsourced statements
                                        )

                                    [2] => Array
                                        (
                                            [ns] => 14
                                            [title] => Category:Articles needing additional references from February 2013
                                        )

                                    [3] => Array
                                        (
                                            [ns] => 14
                                            [title] => Category:Articles with unsourced statements from March 2013
                                        )

                                    [4] => Array
                                        (
                                            [ns] => 14
                                            [title] => Category:Cybernetics
                                        )

                                    [5] => Array
                                        (
                                            [ns] => 14
                                            [title] => Category:Learning
                                        )

                                    [6] => Array
                                        (
                                            [ns] => 14
                                            [title] => Category:Learning in computer vision
                                        )

                                    [7] => Array
                                        (
                                            [ns] => 14
                                            [title] => Category:Machine learning
                                        )

                                ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:22:50.660

信息检索中比较主题相似度的常用方法是余弦相似度（[http://en.wikipedia.org/wiki/Cosine_similarity](http://en.wikipedia.org/wiki/Cosine_similarity)）。我认为这就是“字符串之间的向量空间模型距离”的意思。

有几个库及其实现（Lucene，Weka，Rapidminer，...）。如果需要，您也可以自己实现它。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:01:56.053

Levenshtein，它比较两个字符串并返回需要进行多少更改才能使它们相同的值。

轻松我最喜欢的命名 php 方法

[http://php.net/manual/en/function.levenshtein.php](http://php.net/manual/en/function.levenshtein.php)

虽然这只是两个简单字符串之间的直接比较，并且限制为 255 个字符，因此如果文本较长，您可能需要将文本切分并分块进行比较。

# django - Django Simple Captcha Can't get ValidationError exception

> ID：16142073
> 
> 赞同：1
> 
> 时间：2013-04-22T07:57:50.480
> 
> 标签：django, django-forms, captcha

如何得到它？

在[本](https://django-simple-captcha.readthedocs.org/en/latest/usage.html)教程中，它说`if the user didn’t provide a valid response to the CAPTCHA challenge, the form will raise a ValidationError:`

**我的表格**

```
class AuthenticationForm(forms.Form):
    username = forms.CharField(label=_("Username"), max_length=30)
    password = forms.CharField(label=_("Password"), widget=forms.PasswordInput)
    captcha = CaptchaField(label=_("Captcha")) 
```

**我的观点**

```
try:
    form = AuthenticationForm(request.POST)
    if form.is_valid():
        pass
except Exception, ex:
    LOG.debug("Captcha Error: %s" % str(ex)) 
```

我无法从表格中得到任何例外。如何实现它？有任何想法吗？

***更新1***

我`subprocess.call(["logger", "-t", "blah", "blahblah"])`在验证码的源代码中添加了一些语句，在 'clean' 函数中，但似乎它甚至没有进入`clean`. 而且它也是唯一引发 ValidationError 的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:04:14.670

您没有调用`is_valid()`表单，除非您这样做，否则不会引发验证错误。

我猜你想要类似的东西：

```
try:
    form = AuthenticationForm(request.POST)
    if form.is_valid():
        #Do something
except Exception, ex:
    #ValidationErrror will be caught here
    LOG.debug("Captcha Error: %s" % str(ex)) 
```

但是你仍然不会得到任何例外。原因：当你调用 时`is_valid`，django 内部使用了一个名为`full_clean`. 如果任何字段引发 ValidationError，则此方法在内部捕获它并更新`errors`表单上命名的属性。因此，您的视图将永远不会`ValidationError`被表单字段提出。

知道是否`ValidationError`引发 a 的方法是访问`errors`表单的属性。

所以，代码是

```
form = AuthenticationForm(request.POST)
if form.is_valid():
    pass
#In case of valid form next line will not be called because form.errors will be an empty dict
if form.errors and 'captcha' in form.errors:
    LOG.debug("Captcha Error:")  
    #also you can access exact error by form.errors['captcha'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:03:44.160

你应该使用`forms.ValidationError`

[看看官方文档](https://docs.djangoproject.com/en/dev/ref/forms/validation/)

# iphone - 将 NSMutableArray 传递给一个视图控制器到另一个

> ID：16142078
> 
> 赞同：-3
> 
> 时间：2013-04-22T07:58:14.723
> 
> 标签：iphone, ios, objective-c, xcode, ios4

我试图在两个视图控制器之间传递一个 NSMutableArray。请让我知道我能为此做些什么

在 PlaylistViewController.h 文件中我有

```
NSMutableArray *SongArray;
@property(nonatomic,retain)NSMutableArray *SongArray; 
```

我希望传递给另一个视图控制器

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T08:03:03.377

您可以通过两种方式分享：

1.  使用属性

**例子**

在**.h**文件中

```
 @interface ABCController : UIViewController
    {
        NSMutableArray *detailArray;
    }
    @property(nonatomic,retain)NSMutableArray *detailArray; 
```

在**.m**文件中

```
 XYZController *xyzVC = [[XYZController alloc] initWithNibName:@"XYZController" bundle:nil];    
    xyzVC.detailArray = self.detailArray;

    [self.navigationController pushViewCsecondView:xyzVC animated:YES];

    **XYZController.h**

    @interface XYZController : UIViewController
    {
        NSMutableArray *detailArray;
    }

@property(nonatomic,retain)NSMutableArray *detailArray; 
```

2.  使用`NSUserDefaults`

**例子**

```
 [[NSUserDefaults standardUserDefaults] setValue:SongArray forKey:@"songArray"];
     [[NSUserDefaults standardUserDefaults] synchronize];

     NSMutableArray *arr = [[NSUserDefaults standardUserDefaults] valueForKey:@"songArray"]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-22T08:03:24.043

```
**FirstViewController.h**

@interface FirstViewController : UIViewController
{
    NSMutableArray *SongArray;
}
@property(nonatomic,retain)NSMutableArray *SongArray;

**FirstViewController.m**

SecondViewController *secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];    
secondView.SongArray = self.SongArray;

[self.navigationController secondView animated:YES];

**SecondViewController.h**

@interface SecondViewController : UIViewController
{
    NSMutableArray *SongArray;
}
@property(nonatomic,retain)NSMutableArray *SongArray; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:09:28.853

假设您想从其他视图控制器传递`NSMutableArray`给.m 然后在视图控制器.m 中执行以下操作`PlaylistViewController``viewcontroller`

```
PlaylistViewController *play=[[PlaylistViewController alloc]initwithnibname:@"PlaylistViewController"];

play.SongArray=arrayofSongsWhichYouWantToPass;

[self.navigationController pushViewController:play animated:YES]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T08:17:53.150

您可以将希望将数组传递给的视图控制器设置为原始视图控制器的代表（在您的情况下为 PlaylistViewController）

```
**OriginViewController.h**

@protocol OriginViewControllerDelegate {
-(void)passMutableArray:(NSMutableArray*)array;
}

@interface OriginViewController : UIViewController

@property(nonatomic,retain)id<OriginViewControllerDelegate> delegate;
@property(nonatomic,retain)NSMutableArray *array;

**OriginViewController.m**

//set DestinationViewController as delegate to OriginViewController(not necessarily in OriginViewController.m
//When you want to pass array just send message to delegate
[self.delegate passMutableArray:array];

**DestinationViewController.h**

@interface DestinationViewController : UIViewController <OriginViewControllerDelegate>
//implement protocol function in your m file

**DestinationViewController.m**

-(void)passMutableArray:(NSMutableArray*)array {
//Do whatever you want with the array
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T08:06:05.563

在 secondViewController 中创建一个 NSMutableArray 属性 secondMutArray。在要传递 mutablearray 的 firstViewController 中，创建第二个 viewcontroller 的实例并将 self.mutableArray 分配给 secondMutArray。像这样

```
SecondViewController *secondViewController=[[SecondViewController alloc]init];
secondViewController.secondMutArray=self.mutableArray 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T08:03:57.323

制作你的财产`NSMutableArray`并合成它。

这在成为你的班级的对象之后。

```
PlaylistViewController *PLVC = [[PlaylistViewController alloc] init];
PLVC.SongArray=yourAry;
[self.navigationController pushViewController:PLVC animated:YES]; 
```

# node.js - 在视图中转义变量？

> ID：16142085
> 
> 赞同：0
> 
> 时间：2013-04-22T07:58:26.517
> 
> 标签：node.js, xss, sql-injection

我想知道如何在我的 Node.js 项目中转义变量。

例如，我的 .jade 视图文件中的 #{name} 似乎容易受到 SQL 注入或 XSS 的攻击。有没有解决这个问题的标准方法？我知道在红宝石中我会做 <%= h name %> 例如......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:20:15.643

```
Actually want #{} for some reason? escape it!

p \#{something}
now we have <p>#{something}</p>

We can also utilize the unescaped variant !{html}, so the following will result in a literal script tag:

- var html = "<script></script>"
| !{html} 
```

来自[https://github.com/visionmedia/jade#readme](https://github.com/visionmedia/jade#readme)

# python - Python：如何从网页中的 csv 数据中过滤列？

> ID：16142086
> 
> 赞同：0
> 
> 时间：2013-04-22T07:58:28.597
> 
> 标签：python, csv, beautifulsoup, urllib

我目前的实现是：

```
import csv
import urllib.request
from bs4 import BeautifulSoup
f=urllib.request.urlopen('<my_url_goes_here>')
soup = BeautifulSoup(f.read())
my_csv = csv.reader(soup.pre.text,delimiter=",")
for row in my_csv:
    print(row) 
```

我想以以下格式打印出我的数据：

```
//datestamp,SvcName,AvgSvcTime,MinSvcTime,MaxSvcTime,SvcVol
2013-03-19 00:00:00,cfmeqdequeue,1,0,10,198
2013-03-19 00:01:00,cfmeqdequeue,1,0,10,198
2013-03-19 00:02:00,cfmeqdequeue,1,0,10,198 
```

但是，实际输出如下所示：

```
['c']
['f']
['m']
['e']
['q']
['d']
['e']
['q']
['u']
['e']
['u']
['e'] 
```

注意：`soup.pre.text`打印以下内容并具有正确的换行符：

```
'\n//datestamp,SvcName,AvgSvcTime,MinSvcTime,MaxSvcTime,SvcVol\n2013-03-19 00:00:00,cfmeqdequeue,1,0,10,198\n2013-03-19 00:01:00,cfmeqdequeue,1,0,10,198\n 
```

因此，当我使用 csv.reader() 或 for 循环时，一定有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T18:12:26.287

你正在传递`csv.reader`一个字符串。[或者足够接近的东西——我不记得是否`.text`给出了一个字符串或 bs4 的类似字符串的对象之一。] 它需要一个类似文件的对象。您可以使用该`StringIO`模块获取一个字符串，使其表现得像一个文件来解决这个问题。例如，您有

```
>>> import csv
>>> s = '\n//datestamp,SvcName,AvgSvcTime,MinSvcTime,MaxSvcTime,SvcVol\n2013-03-19 00:00:00,cfmeqdequeue,1,0,10,198\n2013-03-19 00:01:00,cfmeqdequeue,1,0,10,198\n'
>>> list(csv.reader(s))[:5]
[[], ['/'], ['/'], ['d'], ['a']] 
```

但你可以

```
>>> from StringIO import StringIO
>>> list(csv.reader(StringIO(s)))[:5]
[[], ['//datestamp', 'SvcName', 'AvgSvcTime', 'MinSvcTime', 'MaxSvcTime', 'SvcVol'], ['2013-03-19 00:00:00', 'cfmeqdequeue', '1', '0', '10', '198'], ['2013-03-19 00:01:00', 'cfmeqdequeue', '1', '0', '10', '198']] 
```

请注意，您可能想要调用`.strip()`您的文本以删除无关的空格，特别是如果您想使用`DictReader`这样您就不必记住哪一列是哪一列。

# eclipse - 在 Eclipse 中创建项目后更改 Maven Archetype？

> ID：16142088
> 
> 赞同：9
> 
> 时间：2013-04-22T07:58:42.053
> 
> 标签：eclipse, maven, m2eclipse, maven-archetype

我已经创建了一个 Maven 项目`maven-archetype-quickstart`。

我已经开始编码，现在我想将原型更改为`maven-archetype-webapp`以使其成为动态 Web 项目。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T08:08:56.243

原型仅用于创建项目（即初始化配置、源文件夹等），之后不再使用。因此，如果您想改变您的项目性质，您必须“手动”完成。

似乎在您的情况下，您只需将 pom.xml 中的包类型更改为 war 并在您的 IDE 中进行“Maven 更新项目”，这样 maven 插件就会更新配置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-19T15:16:05.563

我最近在谷歌上搜索并偶然发现了这篇文章。我有一种方法可以使用**Eclipse IDE**`web.xml`为 Web 应用程序生成目录结构。在我分享之前，让我们澄清一下我正在使用的 Eclipse（如果您使用的是任何旧版本，此功能可能不存在）。

 **[![在此处输入图像描述](https://i.stack.imgur.com/OQmn9.jpg)](https://i.stack.imgur.com/OQmn9.jpg)

我假设您创建了OP 发布的`Maven Project`with 。`maven-archetype-quickstart`它基本上是一个`jar`应用程序。我们想将其更改为`web`应用程序。这是过程：

1.  右键单击项目 > 属性 > 项目构面
2.  选择`Convert to faceted form...`
3.  勾选`Dynamic Web Module`和`Java`框。您可能想要选择您需要的版本，确保它们是兼容的。我`3.0`为`Dynamic Web Module`（servlet 规范）和`Java 1.8`.

[![在此处输入图像描述](https://i.stack.imgur.com/2XDfn.png)](https://i.stack.imgur.com/2XDfn.png)

4.  现在单击`Apply and Close`。这会在你的项目中产生很多东西。
5.  现在切换到`Web perspective`如果您还没有进入。您可以通过以下方式进行操作：Window > Perspective > Open Perspective > Other > Web
6.  现在您将能够看到我们在第 4 步中对项目结构所做的更改。它创建了 Web 应用程序所需的目录结构。但仍然`web.xml`没有生成文件。我们接下来会做。
7.  右键单击`Deployment Descriptor : <your project name>`> 生成部署描述符存根。它将生成`web.xml`文件。

[![在此处输入图像描述](https://i.stack.imgur.com/2HESD.png)](https://i.stack.imgur.com/2HESD.png)

8.  最后将包装`pom.xml`从 jar 更改为 war：`<packaging>war</packaging>`
9.  现在你准备好了。由于我正在使用它并且`spring-boot`它需要`webapp`文件夹而不是.`WebContent``src\main``webapp``source folder`

所以基本上，我们必须手动完成这一切。我只是让 Eclipse 在这里做了一点工作。**

# ruby-on-rails - 对于具有 100 万个项目的 ILIKE 请求，4.5 秒是否合理

> ID：16142100
> 
> 赞同：0
> 
> 时间：2013-04-22T07:59:30.353
> 
> 标签：ruby-on-rails, ruby, rails-postgresql, sql-like, pg

Rails：3.2.11 Ruby：1.8.7 数据库：Postgres

我有一个定制的搜索引擎，它使用 ILIKE 在 100 万个条目中进行搜索，如下所示：

```
formatted_query_string = '%this%search%string'
like_variable = "ILIKE"

product_feed_query_line = [
  "name " + like_variable, formatted_query_string, " OR", 
  "description " + like_variable, formatted_query_string, " OR", 
  "category = ", formatted_query_string
    ].join(" ")

@product_feed_products = FeededProduct.where(product_feed_query_line).where(:is_available => true).paginate(:page => params[:page], :per_page => 18) 
```

该数据库具有以下索引`schema.rb`：

```
 add_index "feeded_products", ["name", "description", "category"], :name => "name" 
```

这在数据库中处理大约需要 4.5 秒，这显然很多。但是**根据数据集（1M），它是否长得不合理**？

我知道完全更改为不同的搜索引擎对未来来说是个好主意，但在我花时间学习之前，我需要知道是否有什么我应该做的以加快速度，或者这种类型的请求就是这么慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T14:21:37.990

我知道您说您通过聘请顾问解决了这个问题，但对于后代，我认为可能值得在这里给出答案。

```
SELECT * FROM foo WHERE bar like '%search%' 
```

默认情况下将无法使用索引，因此您有多种选择。

1.  重新评估您的搜索模式。您可以合理地将多少“包含”搜索转换为“开始于”？

2.  如果您的搜索涉及开头和结尾，您可以转换为两个开头搜索（一个在反转值上），并索引反转值。

3.  您也可以使用 pg_trgm 和 GIN 索引，但这些索引不是那么有选择性，并且会产生许多误报，所以当您尽可能地采用其他方法时，这就是您要去的地方。例如“搜索”重叠、trigram-wise、“海胆弧”

# python - 加密——怎么做

> ID：16142113
> 
> 赞同：1
> 
> 时间：2013-04-22T08:00:03.783
> 
> 标签：python, encryption, tkinter

**问题**

我正在用python编写一个应用程序。它处理联系人和有关一个人的其他信息。每次他/她想要执行主要操作时，我都想提示用户输入主密钥。我已经想通了。整个应用程序已准备就绪并且运行良好。但是我将主密钥存储在一个文件中。该文件以纯文本形式易于阅读。我尝试使用此功能的朋友说，如果我不应用强大的加密算法，该软件将毫无用处，因为用户只会信任该应用程序的详细信息很容易被窃取。

**目标**

以只能由我的程序解密（或读取）的形式存储主密钥。

**其他事情**

1.  用户可以选择更改主密钥。
2.  主密钥将仅被读取和解密一次。在程序开始时。然后它将存储在一个变量中，并从此变量中使用。
3.  它是一个 GUI 应用程序。我正在使用 python Tkinter。

**细节**

请注意，数据是使用另一种加密方式存储的，这种加密方式并非不可破解，但足以存储此类信息。

我没有使用任何数据库来存储信息。

唯一要加密的数据是主密钥。它是一个长度为 7 到 80 个字符的字母数字字符串。

**眼镜**

```
1.Python 2.7
2.Tkinter 8.5
3\. Linux Mint 14

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:58:12.560

您不需要，甚至不需要对密码进行复杂的加密——您所描述的是密码，而不是密钥（它只是授予访问权限，它不加密数据）。当前的最佳实践是存储加密和散列的密码。也就是说，当用户创建一个新帐户并输入密码时，您会从密码加上用户名加上一个“盐”构建一个字符串（这只是一个对您网站上的每个人都相同的小字符串——这是为了阻止彩虹桌攻击）。然后你通过一个好的散列算法运行那个字符串——像 SHA1 这样的算法就可以了（即使是 MD5 也足够了，尽管有相反的报告）。你当然不需要像 AES 这样的东西。无论如何，既然你有一个哈希，你将哈希存储在数据库中，而不是密码。如果不这样做，即使是像 AES 这样的强密码也是无用的

下次用户登录时，您也这样做：将他的密码添加到用户名和 salt，对其进行散列，并将散列与存储的内容进行比较。即使在原则上，您也无法知道他的密码是什么，因此即使攻击者获取了您的数据库并知道您的算法和盐，他们也无法找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:08:12.047

1.  用户选择主密钥，您对其进行加密并将加密保存到文件中。
2.  当用户想要进行重大操作时，您会提示他们输入主密钥，然后您对他们输入的内容进行加密。
3.  将#2 与#1 进行比较，如果它们匹配，则让用户继续。否则，你告诉用户迷路。

> 以可破译的形式存储主密钥

没有。如果你能破译它，黑客就能破译它。你想要一台连续工作 100 年的超级计算机无法破译的东西。根据数据的敏感程度，您可能只需要 SHA-1/SHA-2/SHA-3。见这里：[维基百科](http://en.wikipedia.org/wiki/SHA-1)

请注意，如果有人窃取了包含加密的文件的副本，并且当您的应用提示他们输入主密钥时他们输入了其中一种加密，您的应用将对加密进行加密，并且结果将不匹配任何加密文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:09:09.593

[由于您想通过密码保护您的敏感数据，因此最好使用像AES](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard "维基百科：AES")这样的“现成”对称加密算法。这样，您的数据将被高度加密（假设您正确掌握了一些参数），您甚至不需要将密码存储在磁盘上的某个位置。

[PyCrypto](http://www.pycrypto.org/ "PyCrypto 网站")是一个广泛使用的加密工具包，也提供 AES。了解入门的必要细节可能有点麻烦，特别是因为我能找到所有关于“如何使用 PyCrypto 进行 AES？”的示例。都有些不同（例如算法的初始化，填充）。

对于初学者，[这篇博文](http://eli.thegreenplace.net/2010/06/25/aes-encryption-of-files-in-python-with-pycrypto/ "使用 PyCrypto 对 Python 中的文件进行 AES 加密")将为您提供一些解释和代码片段。（注意：那里提供的代码将解密（=实际）数据写入文件，这可能是一个严重的风险。在您了解代码的工作原理之后，您可以修改代码以便将解密的数据存储为字符串和使用您已有的应用程序代码从中读取内容。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T11:43:20.617

正如您在评论中的问题所建议的那样。这是一种与您当前正在构建的模式略有不同的模式。

首先，如果您对某些内容进行加密，请使用公认的和众所周知的工具进行加密。现在的经典是AES。这是原始密码，对 16 字节块执行加密。它只需要一个长度为 128、192 或 256 位的*密钥。*
*实际上，底层密码支持的长度比这更多，但是该算法已经在这 3 种长度上进行了大量测试，因此您可能会坚持使用它们。*

现在，您必须确定**如何**在特定情况下使用密码。**加密方式**的选择非常重要。**加密模式**是使用给定密码的一种特殊方式。最基本的是*ECB*（电子密码本）。它只包括使用给定密钥一个接一个地应用密码块。你应该像避免瘟疫一样避免它！

当你有**加密模式**时，你还没有完成。然后你必须找到我们可以称之为**关键时间表**的东西。也就是说，给定一个唯一密钥，例如密码或密码短语，您必须派生所需的密码密钥以提供给底层密码系统（分组密码 + 加密模式）。

我将从一个基于 AES-128（AES 与 128 位密钥一起使用）的简单模式开始。

## 关键时间表

从密码短语派生密钥的一个好方法是使用散列函数。您只需对密码短语和（可选）附加数据进行哈希处理即可获得实用密钥。这是我基于[HMAC](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)构造的建议：

**输入：** 7 到 80 个字符的密码*K*，指定目标用户的字符串*s* （如伪）和哈希函数*H。*

**输出：**一个加密密钥*K [s]*

您使用以下过程得出*K [s]*

> *K [s]* = *HMAC-H* ( *s* , *K* )

根据*H*的摘要长度，您可能必须将其截断以仅获得 128 位。（众所周知的散列函数通常具有超过 128 位的输出）。例如，您可以使用*H* = SHA-1 或*H* = MD5。

## 密码系统

我不知道您存储的数据可以保存多长时间，但我认为它不会太大。我建议使用*CBC*（密码块链接）模式。这种模式需要著名的 128 位密钥和一个额外的 128 位向量，称为*初始化向量*（简称**IV**）。您绝不能*使用*相同的 (key, IV) 对两次！（规则1]）

现在，这是你可以做的，假设：

*   每个用户有一个数据文件
*   您接受 IO 操作的一点开销

您将以 512 字节为基础（即 32 个 16 字节的块）对数据进行加密。**IV**模式很简单：您首先在 16 字节上编码 0，然后每次添加新的 512 字节块时*递增它。*

一个简单的例子：

用户克苏鲁想和他的朋友保持联系，分享他的邪恶阴谋。他的密码是厄运。

*   他的数据文件将使用*K [Cthulhu]*加密，其中*K* = doom，因此*K [Cthulhu]* = *HMAC-H* (Cthulhu, doom)
*   该文件分为 512 字节的块。数据块编号*i*的**IV是***i*在 16 字节上的常见整数二进制表示。

 **我知道 Cthulhu 可以有很多邪恶的朋友，但我可以合理地假设 16 字节整数不会溢出，因此强制执行规则 [1]。

在这里，你应该有一个基本的密码系统，它还不错，但仍然可以改进：

*   使用带有**MAC**（消息验证码）方案的经过[验证的加密。](http://en.wikipedia.org/wiki/Authenticated_encryption)*请注意，某些执行模式包括此，例如**[CCM](http://en.wikipedia.org/wiki/CCM_mode)*
***   加强**密钥计划**：您选择的哈希函数可能会受到彩虹表攻击。为了使攻击者的事情变得复杂，请在此过程中引入[随机盐](http://en.wikipedia.org/wiki/Salt_%28cryptography%29)。*   更改*“每个用户一个文件”*的模式，因为它仍然会泄漏一些信息，例如“嘿，您将在此处找到的内容与同一用户有关”。**

 **第一个很容易介绍（只需使用**CCM**而不是**CBC**，您就差不多完成了）。然而，最后一点更难解决。您必须做的事情可能类似于在*文件系统*中所做的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-23T04:57:12.547

> 我是否必须编写相应的代码来加密和解密自己？还是有其他方法？

如前所述，hashlib 是一个标准的 python 模块，你的系统也应该带有某种加密程序。在我的系统上，它称为 openssl，您可以指定许多不同的加密算法。

```
#python 3
import subprocess as sp

master_key = b'hello world'
my_subprocess = sp.Popen(['openssl', 'sha1'], stdin=sp.PIPE, stdout=sp.PIPE);

my_subprocess.stdin.write(master_key)
my_subprocess.stdin.close()
print(my_subprocess.stdout.read().rstrip()) 
```****

# sql - 经典 ASP SQL 字符串

> ID：16142114
> 
> 赞同：1
> 
> 时间：2013-04-22T08:00:09.653
> 
> 标签：sql, asp-classic

我需要传递生成的 sql 字符串和查询数据库，并且需要从中获取数据。

```
 dim sql,spack
  spack="test"
  sql="select * from dbo.packageName A where a.custname=" & spack 

  set rs = getRs(sql) 
```

此代码语句返回错误。能否请有人解释一下如何传递像上面的代码段（参数 spack）这样的参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:01:31.753

Varial 应该用单引号括起来

```
 sql="select * from dbo.packageName A where a.custname='" & spack & "'" 
```

# git - 如何归档 git status 输出？

> ID：16142116
> 
> 赞同：0
> 
> 时间：2013-04-22T08:00:19.007
> 
> 标签：git, archive, status

我需要归档`git status`命令显示的一些更改并保留所有路径，以便我可以在本地计算机上复制、取消归档和提交。我知道该`git archive`命令存在，但如何使用它`git status`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:24:41.723

git-archive 旨在归档整个项目，并且仅适用于提交/标签 ID。你想做的是：

```
git diff > patchfile 
```

和

```
patch -p1 < patchfile 
```

在您的本地计算机上。

# r - 创建时间序列对象 yyyy-mm-dd hh:mm

> ID：16142120
> 
> 赞同：1
> 
> 时间：2013-04-22T08:00:28.167
> 
> 标签：r

给定一组热量消耗数据集，我想创建一个时间序列对象，其中年、日和小时位于不同的列中。文件数据如下所示

```
rdays  heat[J] ds.jdate ds.hh ds.dow ds.tod ds.diy ds.wiy
0        1000    12965    2      6       2    182   26
0.0416   1150    12965    3      6       2    182   26 
```

而解释变量是：

```
rdays:  'Running days', No. of days from the start of the data set
(obs 1 = 0, obs 2 = 1/24, ...)

Information on time:

jdate:  Julian date (No. of days since 1Jan1960)
hh:         Time of day (0,...,23)
dow:    Day of week (1=monday, ... , 7=sunday)
tod:    Type of day (1=Working day, 2=Half-Holy (incl. Saturday),
        3=Holy (incl. Sunday))
diy:    Day in year
wiy:    Week in year 
```

开始时间为 01Jul1995 02:00，结束时间为 30Jun1996 23:00

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:15:13.933

```
DF <- read.table(text="rdays  heat[J] ds.jdate ds.hh ds.dow ds.tod ds.diy ds.wiy
0        1000    12965    2      6       2    182   26
0.0416   1150    12965    3      6       2    182   26 ",header=TRUE) 
```

计算自 1960-01-01 以来的秒数，然后`as.POSIXct`与`origin`参数一起使用以获取日期/时间变量。使用日期/时间变量时，永远不要忘记设置时区。

```
DF$time <- as.POSIXct(DF$ds.jdate*24*3600+DF$ds.hh*3600,
                 origin=as.POSIXct("1960-01-01 00:00:00",tz="GMT"),tz="GMT") 
```

为方便起见，创建一个`xts`时间序列。

```
library(xts)
as.xts(DF[,2,drop=FALSE],order.by=DF$time)
#                     heat.J.
# 1995-07-01 02:00:00    1000
# 1995-07-01 03:00:00    1150 
```

`as.ts`如果你想要一个`ts`对象，你可以使用它。

# forms - 如何动态地为中的 commandName 属性赋值 春天的标签

> ID：16142122
> 
> 赞同：0
> 
> 时间：2013-04-22T08:00:36.567
> 
> 标签：forms, spring-mvc, jstl, modelattribute

我想使用以下*JSTL*代码将字符串值动态添加到 commandName 属性。

```
<c:choose>
    <c:when test='${catalogueEntry==null}'>
     add_item
     </c:when>
    <c:otherwise>
     update_item
     </c:otherwise>
</c:choose> 
```

看起来 spring 将整个代码解释为字符串值，而不是分配值“add_item”或“update_item”。我也尝试使用 javascript 代码，但发现它给出的错误与客户端技术相同。谁能告诉我我的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:17:17.560

只需使用[EL 三元运算符](http://docs.oracle.com/javaee/6/tutorial/doc/bnaik.html)。在您的情况下，代码可以写成：

```
<form:form  method="post" commandName="${(catalogueEntry==null) ? 'add_item' : 'update_item'}">
    ...
</form:form> 
```

# rest - 需要从 REST API 发送 PDF、CSV 和 HTML 格式的数据。我应该发送文件还是发送 JSON？

> ID：16142123
> 
> 赞同：0
> 
> 时间：2013-04-22T08:00:40.440
> 
> 标签：rest, spring-mvc, frontend, restful-architecture

我正在使用 Spring MVC 为项目创建**REST Api**。在前端，一些报告需要以 PDF、CSV 和 HTML 格式显示。我应该将 JSON 数据发送到这些报告的前端并使用一些内置插件或手动显示报告吗？或者我应该发送 PDF、CSV 和 HTML 文件以响应 REST Api 调用？我想要最大的灵活性，那么你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:55:04.233

您应该以多种输出格式（pdf、csv、html .. `see ContentNegotiatingViewResolver`in spring）公开输出。

根据要求，客户可以决定调用任何输出并根据需要使用它。在某些用例中，客户端可能会从 rest 中获取原始数据，然后进行转换；在某些情况下，它可能需要休息提供的精炼输出。

# xcode - 在uiimageview中加载png会使应用程序xcode崩溃

> ID：16142126
> 
> 赞同：1
> 
> 时间：2013-04-22T08:00:52.547
> 
> 标签：xcode, uiimageview, uiimage, png

我用 Photoshop 制作了 png 格式的图像。当我尝试在 UIImageView 中的项目中使用并运行该应用程序时，它在启动屏幕后立即崩溃。当我删除 png 时，该应用程序运行良好。为什么会发生..这是png的链接。我想给 uisearchbar 背景上的磨砂玻璃效果。如果此图像不起作用，我该怎么办？

```
imageView.image = [UIImage imageNamed:@"TransparrentSearchBar"]; 
```

[下载 PNG](https://dl.dropboxusercontent.com/u/20824532/TransparrentSearchBar@2x.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:18:44.387

1）如果你的 imageView 是全局的，那么你必须@synthesize Like:(否则有时它会崩溃）

.h 文件

```
 UIImageView *imageView;

   @property(nonatomic,retain) UIImageView *imageView; 
```

.m 文件

```
 @synthesize imageView; 
```

并在 dealloc 方法中释放。

2)imageView.image = [UIImage imageNamed:@"TransparrentSearchBar.png"];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:18:21.523

也许尝试使用 imageNamed:@"TransparrentSearchBar.png"

# html - 我的 HTML5 语义正确吗？

> ID：16142127
> 
> 赞同：-1
> 
> 时间：2013-04-22T08:00:59.160
> 
> 标签：html

我的问题是：

1.  我是否正确使用了 HTML5 页眉、页脚、导航、文章和旁白标签？
2.  我是否过度使用 div 标签？

任何建议将被认真考虑。谢谢。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>
        Simple Blog!
    </title>
    <link rel="stylesheet" type="text/css" href="simple_blog.css" />
</head>
<body>

<!-- Menu navigation -->
<div id="header">
<nav id="centerDiv">
    <ul class="centerUL">
        <li id="blog"><a href="">Blog</a></li>
        <li id="projects"><a href="">Projects</a></li>
        <li id="about"><a href="">About</a></li>
    </ul>
<nav>
</div>

<!-- Main content -->
<div id="column-holder">
<div id="main-content">

<article>
    <header>
        <h1>Main Content!</h1>
        <p>Published date</p>
    </header>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque pharetra aliquam dolor non egestas. Mauris nec urna et tellus sodales pellentesque. Duis consequat porta urna eu sagittis. Nulla rhoncus, eros nec feugiat iaculis, tortor nibh molestie metus, nec fringilla augue lectus non justo. Nullam id tellus magna. Phasellus sit amet mi felis. Donec tempor cursus dignissim.</p>

    <p>Nunc semper enim vitae sem fringilla quis scelerisque tortor mollis. Vivamus ac nibh vitae ipsum adipiscing rutrum sit amet scelerisque dui. Curabitur interdum enim vitae nibh sollicitudin consectetur. Fusce venenatis, diam eu accumsan hendrerit, justo nisi egestas leo, ac vehicula sapien velit et mi. Mauris vehicula metus non lacus sodales feugiat. Praesent felis magna, interdum in consectetur vel, imperdiet vitae libero. Curabitur sed neque non enim eleifend pharetra ac a ante. Phasellus viverra auctor nulla, vitae placerat felis semper at. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi risus felis, vehicula id pharetra sed, fermentum nec ligula. Maecenas pulvinar tristique quam, sed porttitor ligula ullamcorper eget. Aliquam at felis ante, sit amet faucibus nibh. Aliquam metus ante, ultrices quis dapibus non, placerat et mauris. Donec at ligula dolor. Phasellus non orci arcu.</p>

    <p>Mauris ut mi ipsum, eget rutrum nibh. Nulla et arcu in diam tristique ultricies eget non lectus. Praesent sit amet leo nisl, in suscipit metus. Mauris sapien eros, lobortis vel lacinia id, pretium sit amet tortor. Aliquam pretium mollis erat, aliquet fermentum velit placerat dictum. Nullam mattis convallis molestie. Aenean ullamcorper faucibus congue. Sed sem erat, bibendum id pulvinar ac, rhoncus sed velit. In posuere erat sit amet leo volutpat eleifend. Ut a odio sit amet nisl viverra euismod.</p> 
    <footer>
        <p><small>Creative Commons...</small></p>
    </footer>   
</article>  
</div>

<!-- Side article -->
<aside>
    <div id="sidebar">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque pharetra aliquam dolor non egestas. </p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque pharetra aliquam dolor non egestas. </p>    
</aside>

</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:09:08.800

这还不错，但是有一些地方需要改进以使其更具语义性。

```
<div id="header">
<nav id="centerDiv">
    ...
<nav>
</div> 
```

`nav`它本身就是一个块元素。无需将其嵌套在另一个 div 中。我可能会将导航放在全局`header`标签中，因为导航可能是网站导航的一部分。徽标或其他东西也会在那里。

```
<div id="column-holder">
<div id="main-content">

<article>
    ...
</article>  
</div> 
```

使用一个 div 来标记您的“主要”区域通常没问题。不过，您应该给它更简单的 id `main`。更好的是使用[`main`](http://www.w3.org/html/wg/drafts/html/master/grouping-content.html#the-main-element)标签，它还带有必要的语义角色。

除此之外，我认为`column-holder`div 不应该在那里。

```
<footer>
    <p><small>Creative Commons...</small></p>
</footer> 
```

如果你只是嵌套多个类似的东西，这已经表明你做得不好。`footer`可以直接保存文本，所以`<footer>Creative Commons...</footer>`如果它只是一个短文本，你可以这样做。如果您要在那里显示更多内容，则可以添加其他段落。样式不应该通过`small`标签发生（通过css设置整个页脚）。

```
<aside>
    <div id="sidebar">
    <p>...</p>
    <p>...</p>    
</aside> 
```

div 没有关闭。也与上面的标题相同：无需进一步将其嵌套在 div 中。已经可以完成这项`aside`工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:15:20.550

我会建立这样一个计划。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>
        Simple Blog!
    </title>
    <link rel="stylesheet" type="text/css" href="simple_blog.css" />
</head>
<body>

<!-- Menu navigation -->
<header>
 <nav class="centerUL">   
    <ul>
        <li id="blog"><a href="">Blog</a></li>
        <li id="projects"><a href="">Projects</a></li>
        <li id="about"><a href="">About</a></li>
    </ul>
</nav>
</header>

<!-- Main content -->
<section  id="wrapper">
<article >
        <h1>Main Content!</h1>
        <p>Published date</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque pharetra aliquam dolor non egestas. Mauris nec urna et tellus sodales pellentesque. Duis consequat porta urna eu sagittis. Nulla rhoncus, eros nec feugiat iaculis, tortor nibh molestie metus, nec fringilla augue lectus non justo. Nullam id tellus magna. Phasellus sit amet mi felis. Donec tempor cursus dignissim.</p>

    <p>Nunc semper enim vitae sem fringilla quis scelerisque tortor mollis. Vivamus ac nibh vitae ipsum adipiscing rutrum sit amet scelerisque dui. Curabitur interdum enim vitae nibh sollicitudin consectetur. Fusce venenatis, diam eu accumsan hendrerit, justo nisi egestas leo, ac vehicula sapien velit et mi. Mauris vehicula metus non lacus sodales feugiat. Praesent felis magna, interdum in consectetur vel, imperdiet vitae libero. Curabitur sed neque non enim eleifend pharetra ac a ante. Phasellus viverra auctor nulla, vitae placerat felis semper at. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Morbi risus felis, vehicula id pharetra sed, fermentum nec ligula. Maecenas pulvinar tristique quam, sed porttitor ligula ullamcorper eget. Aliquam at felis ante, sit amet faucibus nibh. Aliquam metus ante, ultrices quis dapibus non, placerat et mauris. Donec at ligula dolor. Phasellus non orci arcu.</p>

    <p>Mauris ut mi ipsum, eget rutrum nibh. Nulla et arcu in diam tristique ultricies eget non lectus. Praesent sit amet leo nisl, in suscipit metus. Mauris sapien eros, lobortis vel lacinia id, pretium sit amet tortor. Aliquam pretium mollis erat, aliquet fermentum velit placerat dictum. Nullam mattis convallis molestie. Aenean ullamcorper faucibus congue. Sed sem erat, bibendum id pulvinar ac, rhoncus sed velit. In posuere erat sit amet leo volutpat eleifend. Ut a odio sit amet nisl viverra euismod.</p> 

</article>  
<!-- Side article -->
<aside id="sidebar">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque pharetra aliquam dolor non egestas. </p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque pharetra aliquam dolor non egestas. </p>    
</aside>
</section>
<footer>
    <p><small>Creative Commons...</small></p>
</footer> 

</body>
</html> 
```

# sql - 在 vb.net 中删除表

> ID：16142136
> 
> 赞同：2
> 
> 时间：2013-04-22T08:01:28.753
> 
> 标签：sql, vb.net

我想使用 vb.net 创建一个带有 SQL 查询的表。我使用以下代码：

```
dBaseConnection.Open()
sql = "DROP TABLE TagSubs;" &
      "CREATE TABLE TagSubs (TAGNAME varchar(79), POLLTIME varchar(6), SCALEMODE varchar(8), DEADBAND varchar(15))"
Dim dBaseCommand As New System.Data.OleDb.OleDbCommand(sql, dBaseConnection)
dBaseCommand.ExecuteNonQuery()
dBaseCommand = Nothing
dBaseConnection.Close() 
```

出于某种原因，如果我省略该行：

```
 "DROP TABLE TagSubs;" 
```

应用程序第一次很好地创建了表。但是我第二次执行它时，它告诉我表已经存在并抛出一个错误。这就是为什么我添加了 drop table 部分。

对我来说不幸的是，这给了我一个适用于“DROP TABLE or DROP INDEX”的语法错误

我究竟做错了什么 ？

* * *

编辑1：

我得到的错误信息如下（大致从荷兰语翻译而来）：

```
The instruction DROP TABLE or DROP INDEX contains a syntaxerror 
```

视觉工作室提供的唯一帮助是：

```
Get general help for this exception 
```

Wich根本没有任何帮助！

* * *

编辑2：

在史蒂夫和米奇的评论之后，我将代码更改为：

```
sql = "DROP TABLE IF EXISTS TagSubs"
dBaseCommand = New System.Data.OleDb.OleDbCommand(sql, dBaseConnection)
dBaseCommand.ExecuteNonQuery()
dBaseCommand = Nothing

sql = "CREATE TABLE TagSubs (TAGNAME varchar(79), POLLTIME varchar(6), SCALEMODE varchar(8), DEADBAND varchar(15))"
dBaseCommand = New System.Data.OleDb.OleDbCommand(sql, dBaseConnection)
dBaseCommand.ExecuteNonQuery()
dBaseCommand = Nothing
dBaseConnection.Close() 
```

但是，这给出了错误：

```
"An invalid SQL instruction was found. DELETE,INSERT, PROCEDURE, SELECT or UPDATE was expected" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:48:06.777

假设这些命令在连接在一起的时候还不是很好理解，我会尝试将它们分开执行两个不同的查询，然后用两个不同的运行执行这两个 sql 命令。

仅当表存在时才应执行删除表的命令。在 DBF 中，表通常包含在一个简单的操作系统文件中。所以检查文件是否存在就足够了。

```
dBaseConnection.Open()
Dim dBaseCommand As New System.Data.OleDb.OleDbCommand()
dBaseCommand.Connection = dBaseConnection
if File.Exists(... insert path here .... "\TagSubs.DBF") Then
    sql = "DROP TABLE TagSubs"
    dBaseCommand.CommandText = sql
    dBaseCommand.ExecuteNonQuery()
End If
sql="CREATE TABLE TagSubs (TAGNAME varchar(79), POLLTIME varchar(6), SCALEMODE varchar(8), DEADBAND varchar(15))"
dBaseCommand.CommandText = sql
dBaseCommand.ExecuteNonQuery()
dBaseCommand = Nothing
dBaseConnection.Close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T12:10:56.907

试试这个并把你的程序放下：

```
Dim rsSchema As ADODB.Recordset
rsSchema = New ADODB.Recordset

rsSchema = conn.OpenSchema(ADODB.SchemaEnum.adSchemaColumns, New Object() {Nothing, Nothing, **tablename**, Nothing})
'MsgBox(rsSchema)

If rsSchema.BOF And rsSchema.EOF Then
    MsgBox("Table does not exist")
Else
    MsgBox("Table exists")
End If
rsSchema.Close()
rsSchema = Nothing 
```

像这样的连接：

```
Public Sub modOpen()

    Msg = "Provider=SQLOLEDB.1; Persist Security Info=False;" & Chr(10)
    Msg = Msg & "password=******;Data Source=**KOMPUTERNAME**;Initial Catalog=**DATABASENAME**;User ID=**USERID**"

    Try
        conn = New Adodb.Connection
        conn.ConnectionString = Msg

    Catch ex As Exception
        MsgBox("Error: " & ex.Source & ": " & ex.Message, MsgBoxStyle.OkOnly, "Connection Error!!")

    End Try

End Sub 
```

它适用于 VB.NET2010

# mysql - 计算几列的平均值并按 group_id 分组

> ID：16142137
> 
> 赞同：4
> 
> 时间：2013-04-22T08:01:30.880
> 
> 标签：mysql

我正在尝试从一个表中计算平均值并将其放入一个新表中，该表在 MySQL 中按组名分组。

在第一个表（称为*answers*）中，我有来自许多组的调查答案。答案是数值（INT，1-7），问题被分组为问题组（*文化*、*绩效*等）*。*所有答案都有一个受访者姓名，并且它们都属于具有 *group_id* 的组。我想汇总答案并计算所有问题组的平均值并按 group_id 分组。

例如。我们可以假设*答案*中的数据如下所示：

```
||respondent | group_id | question_1 | question_2 | question_3| question_4 | question_5 | question_6||
||Joe        |1         |4           |3           |5          |4           |2           |2          ||
||Jane       |1         |3           |6           |6          |2           |1           |6          ||
||Jones      |1         |7           |3           |4          |1           |6           |4          ||
||Harry      |2         |2           |2           |3          |7           |5           |3          ||
||Pete       |2         |3           |5           |1          |4           |4           |5          ||
||Frank      |2         |1           |1           |2          |2           |7           |6          ||
||Sam        |3         |6           |7           |4          |6           |2           |2          ||
||Kim        |3         |3           |3           |6          |5           |1           |1          ||
||Todd       |3         |1           |4           |7          |4           |5           |7          || 
```

我现在想将问题 1-3 的平均值放入 average_a 并将问题 4-6 的平均值放入 average_b 到一个不同的表（*results*）中，其中包含所有组并按 group_id 分组

现在表格*答案*看起来像这样：

```
 ||group_id|average_a|average_b||<br>
    ||   1    | null  | null   ||<br>
    ||   2    |  null | null  ||<br>
    ||   3    |  null | null  ||<br> 
```

我想将*结果*表更新为如下所示：

```
||group_id|average_a|average_b||
||   1    |  4,5556 |  3,1111 ||
||   2    |  2,2222 |  4,7778 ||
||   3    |  4,5556 |  3,6667 || 
```

**编辑：**

在原始*答案*表上添加一些详细信息：

```
+------------------------+------------------+------+-----+---------+----------------+<br>
| Field                  | Type             | Null | Key | Default | Extra          |<br>
+------------------------+------------------+------+-----+---------+----------------+<br>
| id                     | int(10) unsigned | NO   | PRI | NULL    | auto_increment |<br>
| Respondent             | varchar(20)      | YES  |     | NULL    |                |<br>
| Email                  | varchar(39)      | YES  |     | NULL    |                |<br>
| Website                | varchar(60)      | YES  |     | NULL    |                |<br>
| Bransch                | varchar(60)      | YES  |     | NULL    |                |<br>
| Koncern                | varchar(60)      | YES  |     | NULL    |                |<br>
| Company                | varchar(60)      | YES  |     | NULL    |                |<br>
| typ_av_enhet           | varchar(60)      | YES  |     | NULL    |                |<br>
| avdelning              | varchar(60)      | YES  |     | NULL    |                |<br>
| typ_av_avdelning       | varchar(30)      | YES  |     | NULL    |                |<br>
| gruppid                | varchar(5)       | YES  |     | NULL    |                |<br>
| survey_no              | varchar(5)       | YES  |     | NULL    |                |<br>
| Grupp                  | varchar(28)      | YES  |     | NULL    |                |<br>
| group_type             | varchar(60)      | YES  |     | NULL    |                |<br>
| Kön                    | varchar(1)       | YES  |     | NULL    |                |<br>
| Ålder                  | varchar(5)       | YES  |     | NULL    |                |<br>
| Samarbetsträning       | varchar(1)       | YES  |     | NULL    |                |<br>
| Samarbetserfarenhet    | varchar(1)       | YES  |     | NULL    |                |<br>
| TaskClarity1           | varchar(1)       | YES  |     | NULL    |                |<br>
| TaskClarity2           | varchar(1)       | YES  |     | NULL    |                |<br>
| TaskClarity3           | varchar(1)       | YES  |     | NULL    |                |<br> 
```

这也是我尝试使用@stefan 的说明的脚本：

```
 <?php
$username = "root";
$password = "root";
$hostname = ":/Applications/MAMP/tmp/mysql/mysql.sock";

//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password) 
 or die("Unable to connect to MySQL");
echo "Connected to MySQL<br>";

//select a database to work with
$selected = mysql_select_db("ca",$dbhandle) 
  or die("Could not select ca");

//delete old table
$delete_sql="Drop Table results";
// Execute query
if (mysql_query($delete_sql))
  {
  echo "Table deleted successfully";
  }
else
  {
  echo "Error deleting table: " . mysql_error();
  }

//create table
$sql="CREATE TABLE results(Group_id INT PRIMARY KEY, TaskClarity FLOAT)";

// Execute query
if (mysql_query($sql))
  {
  echo "Table results created successfully";
  }
else
  {
  echo "Error creating table: " . mysql_error();
  }

//Calculate task clarity
$task_clarity = "
INSERT INTO results (
    Group_id,
    TaskClarity
)
(
   SELECT
     gruppid ,
     AVG((TaskClarity1 + TaskClarity2 + TaskClarity3)/3) as average_task_clarity
   FROM
     answers
   GROUP BY
     gruppid
) ON DUPLICATE KEY UPDATE TaskClarity = VALUES(TaskClarity)"
;
$resource_retrive_task_clarity = mysql_query($task_clarity);    //execute the query
if (! $resource_retrive_task_clarity = mysql_query($task_clarity) ){
    echo "Error reading from table";
    die;
}

if (! mysql_num_rows($resource_retrive_task_clarity ) ){
    echo "No records found in table";
}
else {
echo "funkar";

}

//close the connection
mysql_close($dbhandle);
?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T08:06:52.267

尝试这个：

**编辑**以更新结果表（假设该`group_id`列具有 UQ 或 PK 索引）

```
INSERT INTO results (
    group_id,
    average_a,
    average_b
)
(
   SELECT
     group_id ,
     AVG((question_1 + question_2 + question_3)/3) as za_average_a,
     AVG((question_4 + question_5 + question_6)/3) as za_average_b
   FROM
     answers
   GROUP BY
     group_id
) ON DUPLICATE KEY UPDATE 
     average_a = VALUES(average_a), 
     average_b = VALUES(average_b) 
```

**更新**示例是在[这里](http://sqlfiddle.com/#!2/e55b7/1)制作的，它可以工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T08:10:13.680

您可以执行以下操作：

```
 INSERT INTO new_table(`group_id`,`average_a`,`average_b`)
    SELECT group_id,(AVG(question_1 ) + AVG(question_2 )  + AVG(question_3 ))/3,
    (AVG(question_4 ) + AVG(question_5 )  + AVG(question_6 ))/3  FROM old_table
    GROUP BY group_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:09:57.277

你可以使用这个：

```
SELECT GROUP_ID
,(SUM(question_1)+SUM(question_2)+SUM(question_3))/(3*COUNT(GROUP_ID)) AS Avg1
,(SUM(question_4)+SUM(question_5)+SUM(question_6))/(3*COUNT(GROUP_ID)) AS Avg2
FROM answers
GROUP BY Group_Id; 
```

这里的`/(3*COUNT(GROUP_ID)`3 是列数 (q1,q2,q3)`COUNT(GROUP_ID)`而是每个的行数`GROUP_ID`

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/8fd72/15)

# php - 从会话变量中删除会话值

> ID：16142149
> 
> 赞同：0
> 
> 时间：2013-04-22T08:02:25.917
> 
> 标签：php, javascript, html

我的主页中有 4 个名为 home.php 的链接，可以在单击 a 时添加 a、b、c、d，它会转到这样的表格，下面是 a.php，其中包含到帐户的表格

```
 <?php
session_start();
echo $_SESSION['msgop'];
<form name="form" id="form" method="post" action="webservice.php">
name<input type="text" name="name" id="name" />
password<input type="password" name="password" id="password"/>
<input type="submit" value="submit"/> 
```

提交此表单后，它会从页面 webservice.php 调用一个 webservice，这将返回一个 json，它的值可以为

```
 <?php
 $org=$_GET['name'];
 $loc=$_GET['password'];

 $addmachine=array(
'org_name'=>$name,
'loc_name'=>$password,

 );
 $url='webservice url';
    $data="$addmachine";
    $ch=curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($addmachine));
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: application/json"));
    $response=  curl_exec($ch);
    echo($response);
    curl_close($ch);
    $json_a=json_decode($response)
    echo $json_a[msg];
    $_SESSION['msgop']=$json_a[msg];
    ?>

    <script>
        var msg=<?php echo $json_a[msg];?>
    if(msg!="Successful")
    {
        location.href='a.php';
    }
     ?> 
```

如果 的值`$json_a[msg]`不成功，则表单不应转到 webservice.php 应位于同一页面中，即 a.php 并打印错误消息（我已通过将值存储`$json_a[msg]`到会话中并将其显示在a.php，但是），如果成功，则必须转到 websevice.php 并发布在 a.php 中创建的所有条目，并且在页面 webservice .php 上有指向主页的链接，该链接将返回主页。 php 当我们单击 a 时，它将转到 a.php 但它显示 $json_a[msg] 中的值，如何在尝试再次添加操作符时删除此错误消息。我尝试取消设置会话，但没有运气谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:14:07.780

取消设置会话变量

```
unset($_SESSION['msgop']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:03:54.907

您可以使用清空会话的值

```
$json_a[msg] = ""; 
```

# android - Android 地图显示内存不足错误

> ID：16142150
> 
> 赞同：1
> 
> 时间：2013-04-22T08:02:31.543
> 
> 标签：android, google-maps

我在我的 android 应用程序中使用谷歌地图。我在 xml 文件中创建了一个**地图视图**，它工作正常，但是当我将地图视图放在滚动视图中时**，**它显示**OutOfMemoryError**并崩溃。

这是我的xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bg" >

    <RelativeLayout
        android:id="@+id/main_layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <RelativeLayout
            android:id="@+id/header_layout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/share_header" >

            <Button
                android:id="@+id/back_button"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:background="@drawable/back" />

            <TextView
                android:id="@+id/header_txt"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:textStyle="bold" />

            <Button
                android:id="@+id/post_button"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_centerVertical="true"
                android:background="@drawable/post" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/share_leave_note_layout"
            android:layout_width="wrap_content"
            android:layout_height="150dip"
            android:layout_below="@+id/header_layout"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:layout_marginTop="5dip" >

            <ImageView
                android:id="@+id/sharer_img"
                android:layout_width="40dip"
                android:layout_height="40dip"
                android:background="@drawable/img_box" />

            <RelativeLayout
                android:id="@+id/leave_note_layout"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/sharer_img"
                android:background="@drawable/comment_left_arrow_extra_big" >

                <EditText
                    android:id="@+id/leave_note_edt"
                    android:layout_width="170dip"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="10dip"
                    android:layout_marginRight="15dip"
                    android:layout_marginTop="10dip"
                    android:background="@null"
                    android:hint="@string/laeve_a_note_text" />

                <ImageView
                    android:id="@+id/captured_img"
                    android:layout_width="40dip"
                    android:layout_height="40dip"
                    android:layout_margin="10dip"
                    android:layout_toRightOf="@+id/leave_note_edt"
                    android:background="@drawable/img_box" />
            </RelativeLayout>
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/iamat_and_with_layout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/share_leave_note_layout"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:layout_marginTop="5dip"
            android:gravity="center_vertical" >

            <Button
                android:id="@+id/web_btn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/web" />

            <Button
                android:id="@+id/iam_at_btn"
                android:layout_width="90dip"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/web_btn"
                android:background="@drawable/i_m_at" />

            <Button
                android:id="@+id/contact_logo_btn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/iam_at_btn"
                android:background="@drawable/contact_group" />

            <Button
                android:id="@+id/iam_with_btn"
                android:layout_width="90dip"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/contact_logo_btn"
                android:background="@drawable/i_m_with" />
        </RelativeLayout>

        <FrameLayout
            android:id="@+id/map_contact_layout"
            android:layout_width="150dip"
            android:layout_height="150dip"
            android:layout_below="@+id/iamat_and_with_layout"
            android:layout_marginLeft="10dip"
            android:layout_marginTop="5dip"
            android:background="@drawable/rectangle_img"
            android:gravity="center_vertical" >

            <com.google.android.maps.MapView
                android:id="@+id/mapView"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:apiKey="0_oThqu6ib8WYroWAckbRjYAkaoeMUX-52diovQ"
                android:clickable="true"
                android:enabled="true" />
        </FrameLayout>

        <RelativeLayout
            android:id="@+id/contact_layout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/iamat_and_with_layout"
            android:layout_toRightOf="@+id/map_contact_layout"
            android:gravity="center_vertical" >

            <ImageView
                android:id="@+id/contact_img1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="5dip"
                android:background="@drawable/square" />

            <ImageView
                android:id="@+id/contact_img2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="5dip"
                android:layout_toRightOf="@+id/contact_img1"
                android:background="@drawable/square" />

            <ImageView
                android:id="@+id/contact_img3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/contact_img1"
                android:layout_margin="5dip"
                android:background="@drawable/square" />

            <ImageView
                android:id="@+id/contact_img4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/contact_img2"
                android:layout_margin="5dip"
                android:layout_toRightOf="@+id/contact_img3"
                android:background="@drawable/square" />
        </RelativeLayout>

        <RelativeLayout
            android:id="@+id/fb_twitter_layout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/contact_layout"
            android:layout_marginRight="5dip"
            android:background="@null" >

            <ImageView
                android:id="@+id/fb_fade_icon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="5dip"
                android:background="@drawable/fb_fade" />

            <ImageView
                android:id="@+id/twitter_fade_icon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_margin="5dip"
                android:layout_toRightOf="@+id/fb_fade_icon"
                android:background="@drawable/twitter_fade" />
        </RelativeLayout>
    </RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:08:36.610

尝试这个。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ScrollView android:layout_width="fill_parent" android:layout_height="fill_parent">

        <RelativeLayout android:layout_width="fill_parent" android:layout_height="wrap_content">

            <FrameLayout android:layout_width="wrap_content" android:layout_height="wrap_content">

                <view android:layout_width="100dip" android:layout_height="90dip" class="com.google.android.maps.MapView"
                    android:apiKey="0_oThqu6ib8WYroWAckbRjYAkaoeMUX-52diovQ" android:clickable="true" />

            </FrameLayout>

        </RelativeLayout>
    </ScrollView>
</RelativeLayout> 
```

**PS：**最新的地图版本是[Google Maps Android API v2](https://developers.google.com/maps/documentation/android/)。尝试使用它。这是一个很好的[教程](http://www.vogella.com/articles/AndroidGoogleMaps/article.html)。

# php - 将字符串添加到表单文本的前缀

> ID：16142154
> 
> 赞同：1
> 
> 时间：2013-04-22T08:02:48.280
> 
> 标签：php, javascript, forms

我正在尝试存储网址，我需要前缀为“http://”，所以如果访问者没有输入，我需要添加它，但如果他们输入它，我不想复制它. 这个问题之前应该被问过。也许我没有正确搜索？不管怎样，如果你能回答这个问题，你就是我渴望成为的那种人。

我想在 PHP 中执行此操作，但 JS 也可以。

编辑：这就是我试图添加 JS 但没有工作...

```
 <form name="urlField" onsubmit="window.location.href = document.getElementById('addressfield').value; return false;">
   <input type="text" name="address" id="addressfield" />
 </form> 
```

这是发布数据的接收端的 PHP：

```
<?php
if (isset($_GET['success']) === true && empty($_GET['success']) === true) {
    echo '<img src="images/spacer.gif" border="0" width="270" height="1">Your links have been updated!';
} else {
if (empty($_POST) === false && empty($errors) === true) {   
    $update_data = array(
        'a1_url'    => $_POST['a1_url'],
        'a1_text'   => $_POST['a1_text'],
    );
    update_user($session_user_id, $update_data);
    header('Location: ../edit_mode.php');
    exit();
    } else if (empty($errors) === false) {
        echo output_errors($errors);
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:21:12.207

您可以使用一个简单的正则表达式来检查是否指定了 URL 的协议：

```
if (!preg_match('#^[a-zA-Z]+://#', $url)) {
    //No current protocol - add http
    $url = 'http://' . $url;
} 
```

或在 JS 中：

```
if (!url.match(/^[a-zA-Z]+:\/\//)) {
    url = 'http://' + url;
} 
```

这将允许`ssh://localhost`,`https://www.facebook.com`等`ftp://mydomain.com`。

**正则表达式解释：**

*   `^`- 字符串的开头必须在这里
*   `[a-zA-Z]+`- 从 a 到 z 的字母，大写和小写都重复 1 次或多次
*   `:`- 一个字面`:`人物
*   `\/\/`或`//`- litteral`//`字符，但使用反斜杠在 javascript 中转义。

**更新您的评论**：

```
<script type="text/javascript">
    function submitURLFieldForm() {
        var url = document.getElementById('addressfield').value;
        if (!url.match(/^[a-zA-Z]+:\/\//)) {
            url = 'http://' + url;
        }

        window.location.href = url; 
        return false;
    }
</script>
<form name="urlField" onsubmit="return submitURLFieldForm();"> URL<input type="text" name="address" /></form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:05:46.647

尝试这个：

```
var inputVal = $('#myInput').val();
inputVal = inputVal.substr(0, 8).search(/(http|https)(:\/\/)/,i) === 0
           ? 'http://' + inputVal
           : inputVal; 
```

（增加了对 HTTPS 和不区分大小写的支持）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:06:04.850

最简单的方法（**JavaScript**解决方案）：

```
var visitorTyped = "example.com";
if (visitorTyped.indexOf("http://") === -1) {
   visitorTyped = "http://" + visitorTyped
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T08:07:02.840

由于您要求首选 PHP：

创建一个新变量来保存 url，然后检查它。然后，您可以将此新变量分配给`update_data`数组中的 a1_url 项以存储

```
if (empty($_POST) === false && empty($errors) === true) {   

  $url = $_POST['a1_url'];
  if (strpos($url, 'http://') !== 0) {
    $url = 'http://' . $url
  }

  $update_data = array(
      'a1_url'    => $url,
      'a1_text'   => $_POST['a1_text'],
  );

  // the remainder of your code
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T08:35:06.247

您可以使用原生 PHP 函数：

> $url = (parse_url($url, PHP_URL_SCHEME) == NULL ? 'http://' : NULL )。$网址；

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T08:25:56.257

难道你不应该考虑到至少 https 的可能性，可能还有其他协议吗？

要保留任何协议：

```
if (strpos($input, '://') === false) {
  $input = 'http://' . $input
} 
```

只允许所有协议的一个子集，默认为 http

```
$allowedProtocol = array ( 'http', 'https' );
$urlParts = explode( '://', $input );
if (count($urlParts) === 1) {
    $input = 'http://' . $input
}elseif ( !in_array( $urlParts[0], $allowedProtocol ) ) {
    // error handling
} 
```

# java - 尝试读取 jar 中的文件时出错

> ID：16142155
> 
> 赞同：0
> 
> 时间：2013-04-22T08:02:51.433
> 
> 标签：java, file, file-io, io

我正在尝试读取 xsd 文件以验证架构。

我的架构在位置`x/y/z/test.xsd`

我读这个文件的班级也在`x/y/z/ReadSchema.java`

两者都包装在我的罐子里。

我正在尝试在`ReadSchema.java`下面的名称中读取此文件，`test.xsd`但 url 返回为空？

我在这里做错什么了吗？

```
 private static URL getURLForName(String name) 
  {
      ClassLoader cl = Thread.currentThread().getContextClassLoader();

      URL url = cl.getResource(name);
      return url;
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:05:41.027

您使用的名称是错误的。请记住：

```
getClass().getResource(); 
```

取一个相对于类的名称，而

```
getClass().getClassLoader().getResource(); 
```

采用绝对路径。

编辑：为什么我称它为绝对路径

所以，如果你的文件在 yourjar.jar!x/y/z.txt 并且你的类是 xyKlass

那么你可以去：

```
getClass().getResource("z.txt"); 
```

或者你可以这样做：

```
getClass().getClassLoader().getResource("/x/y/z.txt"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:14:32.580

没有错，但 test.xsd 必须在您的 claspath 中。如果它在 Eclipse 中而不在 jar 中有效，则意味着您的 MANIFEST.MF 不正确。尝试在清单中添加以下行并再次创建 jar：

```
Manifest-Version: 1.0
Class-Path: . 
```

这是我的程序的代码之一：

```
URL config = SnapshotMigrationMain.class.getResource("/config_migration/log4jconfig.properties"); 
```

当然，您必须将文件导出到 jar 或相对于您的 jar 的子目录中。
以我为例：
migration.jar
/config_migration/log4jConfig.properties

# google-bigquery - Bigquery 定价变化？

> ID：16142159
> 
> 赞同：5
> 
> 时间：2013-04-22T08:03:06.543
> 
> 标签：google-bigquery

我们运行 BigQuery 大约 4 个月了，我们对定价有一些有趣的观察和问题：

1.  定价模型非常难以解释，需要对连接、联合等进行解释
2.  如果我在小表上运行连接，我处理的数据将增加每个在 bigquery 引擎中相乘的小表副本？
3.  如果我在查询中重复使用相同的子查询，这是新的数据处理，不管它是相同的子查询吗？这可以以任何方式优化吗？bigquery 不会缓存它的数据吗？
4.  数据处理是否有四舍五入的最小大小？我们的观察认为它是 4MB，这是正确的吗？
5.  在 Google Console 中，地理位置存在问题，它说大多数查询都是从 CA 完成的，这是不正确的，因为我的公司在欧洲并且所有开发都在那里完成。我检查了所有IP地址，没有CA ip。是否可以获得更详细的报告？
6.  关于 5，我们想获取每个查询的历史记录和价格。我们应该怎么做？我们的软件必须这样做吗？
7.  关于3）我在数据处理方面遇到了这个巨大的问题（这就是我问所有问题的原因）。我的整个数据集大约有 150mb 大，但每个查询的 DP 大小是 3 倍？如果 bigquery 读取我的全部数据，它不会达到它在处理的数据上显示的大小。什么时候会重新读取数据并因此发生新的 DP？你怎么计算这个？

谢谢你。

问候， 托米斯拉夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T16:08:15.573

1.  连接、联合等的定价非常简单。无论需要读取什么源数据，都只收取一次费用。例如，如果您进行自联接，您仍然只需为单次读取数据付费。
2.  见#1。无论 bigquery 在内部如何运作，您都应该只收取一次费用。
3.  BigQuery 会尽最大努力缓存数据。如果您重新运行查询，则会检查缓存。如果缓存命中，则不会因重新运行查询而收费。请注意，只有完整的查询结果会被缓存；如果您修改查询或在子查询中使用它，则不会使用缓存。
4.  BigQuery 最多以 1MB 为增量四舍五入，最小为 10MB。
5.  我不知道谷歌控制台中的任何地理位置。您在哪里看到这些信息？
6.  您可以通过 jobs.list api 获取查询历史记录和每个查询处理的数据量。
7.  您能否发送您运行的查询的作业 ID 大于预期。完成的计算是 8 字节 *（读取的整数和浮点列的行数）+ 2 字节 *（读取的字符串列中所有字符串的总长度）。

让我知道这是否回答了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T16:18:54.967

我可以为#5 提供说明。

在 Google API 控制台的 REPORTS 下，有与项目的 API 请求有关的人口统计信息。我怀疑这与 BigQuery 本身的关系不大，而与 Google API 控制台有关。

# ios - Corona SDK：storyboard.gotoScene 效果

> ID：16142160
> 
> 赞同：0
> 
> 时间：2013-04-22T08:03:10.377
> 
> 标签：ios, lua, coronasdk

在我的菜单故事板和名为“搜索”的故事板之间转换时，我正在尝试使用效果 slideLeft。

场景更改有效，但没有应用于过渡的效果。或者..根本没有过渡。新的场景刚刚出现。

我在这里想念什么？

谢谢。

```
local function goToPage(event)
if (event.phase == "ended") then
    changeButtonIndentation()
    local nextSceneName = "pages." .. event.target.name
    if (storyboard.getCurrentSceneName() ~= nextSceneName) then
        print("From page: " .. storyboard.getCurrentSceneName())
        print("To page: " ..nextSceneName)

        local options =
        {
            effect = "slideLeft",
            time = 1000
        }
        storyboard.gotoScene("pages.search", options)
        currentActivePage = event.target.name
        print(event.target.name)
    end
end
changeButtonIndentation()
end 
```

编辑：所以显然这些**选项**有效。如果我增加**选项的****时间**参数，我会注意到**搜索故事板上**的某些按钮在 1 秒内无法点击。但是效果不起作用。

 ***** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T11:16:09.840

一个常见的错误是您忘记将视图元素添加到`self.view`组中。通常，故事板模板`local group = self.view`在`scene:createScene function`. 尝试将您的视图对象插入该组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T23:04:58.443

没有过渡的主要原因是如果您在 enterScene() 函数而不是 createScene() 函数中创建场景。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T21:04:26.083

如果它不是构建错误，请先尝试测试。转到帮助 -> 示例项目并打开 Storyboard 示例。如果您看到转换，则问题出在您的代码中。

所以试试这个简化的代码：

```
local function goToPage(event)
    if (event.phase == "ended") then
        local options =
        {
            effect = "slideLeft",
            time = 1000
        }
        storyboard.gotoScene("pages.search", options)
    end
    return true
end 
```****

# templates - 如何逐一迭代表中的数组数据

> ID：16142161
> 
> 赞同：0
> 
> 时间：2013-04-22T08:03:12.927
> 
> 标签：templates, dynamic, mustache, dynamic-tables

我有一个动态表，我尝试在表中一个一个地迭代一个数组对象。我使用 Mustache 模板来迭代它。

```
<tbody>

    <tr>
       <td>{{ip}}</td>  
       **<td>{{#action-allow}}{{.}}{{/action-allow}}</td>**
        </tr>
</tbody> 
```

![在此处输入图像描述](https://i.stack.imgur.com/O2mKk.png)

它应该是第一行 - 仅拒绝，第二行 - 拒绝，第三行 - 允许等。但我正在聚在一起。我怎样才能一一做出来。我需要完全像下面的图片。如何做到这一点？ ![在此处输入图像描述](https://i.stack.imgur.com/j69J6.png)

得到的模板是 **"action-allow":["Deny","Deny","Allow","Deny","Deny"] "**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:27:23.137

尝试以下。仅将 action-allow 更改为 action。这是现场演示[http://jsfiddle.net/26dAy/2/](http://jsfiddle.net/26dAy/2/)

```
var data= '{"action":["Deny","Deny","Allow","Deny","Deny"]}';
var arr=$.parseJSON(data);
var arr2=arr.action;
 $.each(arr2, function(i, item) {
        alert(arr2[i]);
    }); 
```

# php - 一个与 php 中的 ArrayObject 相关的问题

> ID：16142166
> 
> 赞同：0
> 
> 时间：2013-04-22T08:03:40.453
> 
> 标签：php

```
 <?php
    class ExtendedArrayObject extends ArrayObject {
        private $_array;
        public function __construct()
        {
            if (is_array(func_get_arg(0)))
                $this->_array = func_get_arg(0);
            else
                $this->_array = func_get_args();
            parent::__construct($this->_array);
        }
    }
    $newArray = new ExtendedArrayObject(array(1,2,3,4,5,6));
   ...
    ?> 
```

上面的代码取自一本书。

问题：这条线的用途是什么：`else $this->_array = func_get_args();`？为什么我们需要在这里设置一个`if...else...`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:09:02.857

func_get_args — 返回一个包含函数参数列表的数组。

如果是这样，因为，

因为如果函数中的参数大于 1，它将是一个数组，因此它将执行 if 条件，否则它会检查 else 语句中的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:09:12.723

`func_get_args`包含传递给函数的参数数组。

通过检查它，其中的第一项本身就是一个数组，它表示使用该数组。

如果不是，则使用完整的参数列表。

何时运行的示例`if`：

```
$newArray = new ExtendedArrayObject(array(1,2,3,4,5,6)); 
```

`else`何时运行的示例

```
$newArray = new ExtendedArrayObject(1,2,3,4,5,6); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:09:15.697

条件是用来区分的不同结果`func_get_arg()`。如果这是一个数组，它会得到第一个结果，如果不是（否则）它会得到完整的结果。

`func_get_args()`从用户定义函数的参数列表中获取指定的参数。

# java - JRuby 中的应用程序开发

> ID：16142170
> 
> 赞同：1
> 
> 时间：2013-04-22T08:04:01.287
> 
> 标签：java, ruby, graphics, jruby, desktop-application

我正在尝试在 jruby 中创建一个 Windows 桌面应用程序，但我不知道我在做什么。到目前为止，我已经安装了 jruby 1.7.3 和 JetBrains RubyMine。我创建了一个新项目，然后创建了一个新文件，`window.rb`但我不知道如何构建该程序或如何以正确的方式进行。

有人可以指出我正确的桌面图形应用程序开发的 jruby 教程吗？我试过[这个](http://zetcode.com/gui/jrubyswing/layout/)，但它没有谈论编程设计结构，只是跳到代码中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:30:57.930

Swing UI 库是非常复杂的，因为您需要了解 Java 事件模型和布局等。

我建议您首先阅读这里的一些早期链接：

[http://docs.oracle.com/javase/tutorial/uiswing/](http://docs.oracle.com/javase/tutorial/uiswing/)

另一组潜在的文档是这个

[http://www.javabeginner.com/java-swing/java-swing-tutorial](http://www.javabeginner.com/java-swing/java-swing-tutorial)

最终，谷歌搜索“Java Swing 教程”应该会返回大量信息。

然后，您需要在此之上分层 JRuby，这将增加额外的复杂性。

关于结构，通常 Swing 应用程序鼓励您遵循 MVC 结构。UI 对象实际上是视图和控制器的合并，因为视图（表格或面板）被封装在控制器逻辑（按钮、滚动条等中的事件处理程序）中。

如果我要解决这个问题，我肯定会将您的数据表示分离为一个模型类（您可以使用 ActiveRecord 对象来执行此操作）和一个基于 JDialog 或 JFrame 的 UI 类。

所以文件夹将是：

```
/myapp
/myapp/ui
/myapp/model
/myapp/util 
```

/ui 将包含与 UI 相关的组件，/model 将包含模型，/util 将包含与 UI 或模型共享或不严格相关的任何内容。

# android - 如何在 sherlockActivity 中使用滑动菜单？

> ID：16142180
> 
> 赞同：1
> 
> 时间：2013-04-22T08:05:04.123
> 
> 标签：android, actionbarsherlock, slidingmenu

我想`SlidingMenu`与`SherlockActivity`. 我不知道如何使用它。我能够集成这两个库，即`(SlidingMenu and SherlockActionBar)`。我以以下方式尝试了它。

```
public class MainActivity extends SherlockActivity {

private SlidingMenu slidemenu;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
            createSlidingMenu();
}

public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    // TODO Auto-generated method stub
    menu.add("Search")
    .setIcon(android.R.drawable.ic_search_category_default)
    .setActionView(R.layout.collapsible_edittext)
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS |  MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

    return true;
}

private void createSlidingMenu() {

    slidemenu = new SlidingMenu(this);
    slidemenu.setShadowDrawable(R.drawable.shadow);
    slidemenu.setShadowWidthRes(R.dimen.shadow_width);
    slidemenu.setFadeDegree(0.35f);
    slidemenu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
            slidemenu.attachToActivity(this, SlidingMenu.SLIDING_WINDOW);
    slidemenu.setMenu(R.layout.sliding_view);
    slidemenu.setSlidingEnabled(true);
}
 } 
```

我可以用幻灯片显示菜单，但是该菜单屏幕占据了整个屏幕而不是部分屏幕。另一个问题是我想通过点击屏幕左上角的按钮来显示菜单。如何我可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:03:21.037

我已经使用了这个库[https://github.com/SimonVT/android-menudrawer/](https://github.com/SimonVT/android-menudrawer/)检查该库的示例，我还使用**了 actionbarsherlock**

![在此处输入图像描述](https://i.stack.imgur.com/GhtZI.png)

代码如下...

```
package com.example.slider;

import net.simonvt.menudrawer.MenuDrawer;
import android.os.Build;
import android.os.Bundle;
import android.widget.TextView;

import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;

public class MainActivity extends SherlockActivity {

    private static final String STATE_MENUDRAWER = "net.simonvt.menudrawer.samples.WindowSample.menuDrawer";
    private static final String STATE_ACTIVE_VIEW_ID = "net.simonvt.menudrawer.samples.WindowSample.activeViewId";

    private MenuDrawer mMenuDrawer;
    private TextView mContentTextView;

    private int mActiveViewId;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        if (savedInstanceState != null) {
            mActiveViewId = savedInstanceState.getInt(STATE_ACTIVE_VIEW_ID);
        }

        mMenuDrawer = MenuDrawer.attach(this, MenuDrawer.MENU_DRAG_WINDOW);
        // mMenuDrawer.setContentView(R.layout.activity_windowsample);
        mMenuDrawer.setMenuView(R.layout.menu_scrollview);

        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
            getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getSupportMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    protected void onRestoreInstanceState(Bundle inState) {
        super.onRestoreInstanceState(inState);
        mMenuDrawer.restoreState(inState.getParcelable(STATE_MENUDRAWER));
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putParcelable(STATE_MENUDRAWER, mMenuDrawer.saveState());
        outState.putInt(STATE_ACTIVE_VIEW_ID, mActiveViewId);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            mMenuDrawer.toggleMenu();
            return true;
        }

        return super.onOptionsItemSelected(item);
    }

    @Override
    public void onBackPressed() {
        final int drawerState = mMenuDrawer.getDrawerState();
        if (drawerState == MenuDrawer.STATE_OPEN
                || drawerState == MenuDrawer.STATE_OPENING) {
            mMenuDrawer.closeMenu();
            return;
        }

        super.onBackPressed();
    }

} 
```

* * *

不要在您的活动中伪造 android 清单文件中的设置主题

```
<activity
            android:name="com.example.slider.MainActivity"
            android:theme="@style/Theme.Sherlock.Light"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T11:08:06.957

最后我设法以以下方式实现。我在滑动菜单库中所做的更改是`SlidingActivity`扩展的`Activity`，所以我将其更改为`SherlockActivity`然后以下列方式使用，效果很好。

为此，您需要`SherlockAction-Bar`在`SlidingMenu-library`.

```
public class WhatsUpActivity extends SlidingActivity {

    private SlidingMenu slidingMenu;

    @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.whats_up);

    slidingMenu = getSlidingMenu();
    slidingMenu.setMode(SlidingMenu.LEFT);
    slidingMenu.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
    slidingMenu.setShadowWidthRes(R.dimen.shadow_width);
    slidingMenu.setBehindOffsetRes(R.dimen.slidingmenu_offset);
    slidingMenu.setFadeDegree(0.35f);
    setBehindContentView(R.layout.menu_layout); //Menu view left side.

    setSlidingActionBarEnabled(true);       
    }
} 
```

希望这对将来的某些人有所帮助:)

# c# - 为什么我必须显式调用 GC collect？

> ID：16142182
> 
> 赞同：4
> 
> 时间：2013-04-22T08:05:06.373
> 
> 标签：c#, .net

我创建了一个示例 C# 控制台应用程序，它读取字节数组中的文件数据并将字节数组转换为十六进制字符串。它需要巨大的内存，并且在工作完成后它不会释放内存，我也在使正在使用的变量无效。

这是示例代码：

```
string filename = @"F:\\AVSEQ09.DAT"; //file size is 32 MB
string hexData = null;

byte[] fileDataContent = File.ReadAllBytes(filename);
if (fileDataContent != null)
    hexData = BitConverter.ToString(fileDataContent);
fileDataContent = null;
hexData = null;

//GC.Collect();
Console.ReadKey(); 
```

如果我运行此代码，则需要 433 MB 的私有工作集，如果我取消注释 GC.collect 调用，则内存将降至 6 MB。为什么我必须显式调用 GC.collect，显式调用 GC.collect 是否不好，如何在不调用 GC.collect 的情况下释放内存（至 6 MB）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T08:10:58.453

[垃圾收集是在内存有限的机器上模拟无限内存](http://blogs.msdn.com/b/oldnewthing/archive/2010/08/09/10047586.aspx)，通过回收有效程序无法注意到的内存丢失。

以上是一个非常重要的概念，因为除其他外，它强调了垃圾收集器不必*做*任何事情，只要它可以在您的程序每次请求时提供内存即可。

它可能不是最可控的内存管理系统，但如果您的程序最终处于内存压力的情况下，CLR 通常会自动启动垃圾回收周期以减轻部分压力。当系统似乎没有压力时，收集被推迟，以避免频繁的不必要的暂停。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T08:11:18.987

您不必`GC.Collect`显式调用。

您的代码确实使用了大量内存，但是垃圾收集有一个智能算法来确定它应该何时运行。它在您内存不足或内存使用量突然增加时运行。只要还有额外的内存，垃圾收集器就不会做任何事情。这大大提高了性能。如果 GC 持续运行，您的性能将很糟糕。

`null`在 .NET 中也不需要将变量设置为。运行时将跟踪正在使用的变量，并在必要时将它们标记为收集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T08:10:39.310

您不应`GC`明确使用，而应避免一次读取所有数据。这是您正在执行的相当糟糕的做法...从文件中读取时，您应该使用`using`-statement 并在小缓冲区中读取。

```
using(StreamReader sr = new StreamReader(filename)){
     //while has data
     char[] buffer = new char[64000]; // or whatever you like
     sr.ReadBlock(buffer, 0, buffer.Length);     
     //do your conversion here
} 
```

在[这里](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readblock.aspx)寻找`StreamReader.ReadBlock()`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T08:09:36.213

.NET CLR 自己管理内存，并在必要时调用垃圾收集器。

无论如何，即使您有时间要求严格的代码，您也可以依赖 .NET CLR 在适当的时间调用垃圾收集器。GC 非常高效，并且可以非常快地释放内存。

所以真的没有问题。不要调用GC，你不需要。这是.NET。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T08:46:06.033

.NET 垃圾收集器是分代收集器。从代的角度来看，大对象（85K 或更大）属于第 2 代，因为它们仅在存在第 2 代收集时才被收集，包括所有代，这不像第 0 代收集那样经常发生，因为对象大小，大对象通常是数组（在您的情况下是字节 []）。例如，第 2 代收集可能由以下原因引起：

*   分配超过第 0 代或大对象阈值 大多数 GC 发生是因为托管堆上的分配
*   系统处于低内存情况 当我收到来自操作系统的高内存通知时会发生这种情况。
*   当有人在第 2 代调用 GC.Collect 时调用 System.GC.Collect（通过不向 GC.Collect 传递任何参数或将 GC.MaxGeneration 作为参数传递）

因此，当您的系统需要内存时，它通常会释放字节数组，而无需您通过调用 GC.Collect 来强制它释放它。

看看[这篇文章](http://msdn.microsoft.com/en-us/magazine/cc534993.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-22T08:10:35.110

当您处理如此大的文件和内存结构时，请考虑使用流而不是打开和转换内存中的完整文件。无论如何，您不应该调用 GC collect。

# java - 来自 Java 的 Python GUI

> ID：16142184
> 
> 赞同：8
> 
> 时间：2013-04-22T08:05:16.523
> 
> 标签：java, python, runtime.exec, matplotlib-basemap

我正在开发一个程序，该程序接受用户输入并生成输出作为地图投影图。我发现的最简单的地图投影库是 matplotlib-basemap，它是用 python 编写的，这是一种我不太熟悉的语言（我在 Java 上工作）。我用 Java 编写了用户界面。目前，我正在执行 python 代码并使用调用“.py”文件的运行时和 exec() 命令发送带有数据的命令数组。这将执行命令并将绘图显示为单独的窗口。

我的问题是：是否可以在 Jpanel 上嵌入此底图（与缩放功能交互）？或者在可以嵌入 JPanel 的 python GUI 上？我知道我可以将 matplotlib 生成的图像保存为可以固定在面板上的文件，但是它不会是交互式的，那么缩放功能将不可用。还是使用基于 Java 的工具而不是底图更合适？（我还没有发现任何好的）

----2013年5月22日编辑-----

Jython 不是解决方案，因为 matplotlib 与它不兼容。我同意在 python 中做整个事情是最佳的，但这是我必须使用的。

JACOB Jar：我找不到显示如何在 JPanel 或 JFrame 上嵌入单独的应用程序（底图）的示例代码。

目前我正计划将底图嵌入到 wxpython GUI 中，然后使用套接字在两种语言之间进行通信。

带有服务器 Java 和客户端 Python 的 TCP/IP 套接字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T08:21:28.610

这是如果你对新想法和学习新事物持开放态度。
您想要加入两种语言并不是针对您的特定问题的解决方案，而是替代将所有内容合并到 Python 中的想法。

```
#!/usr/bin/python
import pyglet
from time import time, sleep

class Window(pyglet.window.Window):
    def __init__(self):
        super(Window, self).__init__(vsync = False)
        self.alive = 1

        self.click = None
        self.drag = False

        with open('map.png', 'rb') as fh:
            self.geodata_image = pyglet.image.load('map.png', file=fh)
            self.geo_info = self.geodata_image.width, self.geodata_image.height

    def on_draw(self):
        self.render()

    def on_mouse_press(self, x, y, button, modifiers):
        self.click = x,y

    def on_mouse_drag(self, x, y, dx, dy, buttons, modifiers):
        if self.click:
            self.drag = True
            print 'Drag offset:',(dx,dy)

    def on_mouse_release(self, x, y, button, modifiers):
        if not self.drag and self.click:
            print 'You clicked here', self.click, 'Relese point:',(x,y)
            ## Do work on corindate
        else:
            print 'You draged from', self.click, 'to:',(x,y)
            ## Move or link two points, or w/e you want to do.
        self.click = None
        self.drag = False

    def render(self):
        self.clear()
        ## An alternative to only getting a region if you only want to show a specific part of
        ## the image:
        # subimage = self.geodata_image.get_region(0, 0, self.geo_info[0], self.geo_info[1])
        self.geodata_image.blit(0, 0, 0) # x, y, z from the bottom left corner
        self.flip()

    def on_close(self):
        self.alive = 0

    def run(self):
        while self.alive:
            self.render()

            ## self.dispatch_events() must be in the main loop
            ## or any loop that you want to "render" something
            ## Because it is what lets Pyglet continue with the next frame.
            event = self.dispatch_events()
            sleep(1.0/25) # 25FPS limit

win = Window()
win.run() 
```

所有你需要的是：

*   [Python2](http://www.python.org/download/releases/2.6.6/)（或 3）
*   [Pyglet](http://www.pyglet.org/download.html)

* * *

# 作为 Javav 的子模块运行的 Python 模型

```
import sys
for line in sys.stdin.readline():
    if line == 'plot':
        pass # create image here 
```

例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T13:02:08.803

您当然可以将您的 GUI 嵌入到[Jython](http://www.jython.org/)中，这是 Python 的 Java 实现。不幸的是，它不支持 matplotlib，因为它依赖于本机代码。您可以尝试使用[execnet](http://codespeak.net/execnet/)从 Jython 调用 Python。

# java - Eclipse 高亮匹配变量只工作一次

> ID：16142185
> 
> 赞同：2
> 
> 时间：2013-04-22T08:05:19.230
> 
> 标签：java, eclipse

当我选择一个变量时，日食第一次突出显示。但是当我将选择更改为另一个变量旧亮点时，新亮点不会高亮。

当我切换标记出现时，它第一次再次起作用。

我选择了所有“标记事件”，找不到任何东西。

这真的让我很生气。

# linux - bash：脚本中 rsync 的进度输出

> ID：16142191
> 
> 赞同：3
> 
> 时间：2013-04-22T08:05:58.553
> 
> 标签：linux, bash, while-loop, rsync, progress

此脚本是 linux live-cd 安装程序的一部分。

```
rsync -aq / /TARGET/ exclude-from=exclude.list &>> errors.log 
```

我想向 gui 报告进度。gui (gtkdialog) 响应任何数字 0-100 (echo 1; echo 2; etc...)

在这种情况下，rsync -n（试运行）需要很长时间。

我想跑...

```
filesystem_size=`(get directory size) / exclude=exclude.list`
rsync -aq / /TARGET/ exclude-from=exclude.list &
while [ rsync is running ]; do
    (check size) /TARGET/
    compare to $filesystem_size
    echo $number (based on the difference of sizes)
done 
```

请帮助获取具有多个排除项的目录大小，while loop for while rsync 正在运行，echo number (0-100) 基于两种大小的差异。

回答以上任何一个都是一个很大的帮助，谢谢。

编辑：在 Olivier Dulac 的帮助下添加完成的 RSYNC 进度输出（似乎有足够多的人在寻找这个）我完成了这项工作。

```
size_source=`du -bs --exclude-from=/path/to/exclude.list /source/ | sed "s/[^0-9]*//g"`

size_target=`du -bs /target/ | sed "s/[^0-9]*//g"`

rsync -aq /source/ /target/ --exclude-from=/path/to/exclude.list &

while [[ `jobs | grep "rsync"` ]]; do
  size_target_new=`du -bs /TARGET/ | sed "s/[^0-9]*//g"`
  size_progress=`expr $size_target_new - $size_target`
  expr 100 \* $size_progress / $size_source
  sleep 10
done 
```

这会将 % done 打印到命令行，仅对大传输有用。

如果 rsync 覆盖文件，它将放弃进度（显示的进度比实际完成的少）

exclude.list 在 rsync 和 du 中读取相同，但 du 始终需要完整路径，而 rsync 假定 exclude 在其源中。如果复制 rootfs "/"，它们可以是同一个文件，否则您必须为 du 编写完整路径（只需将 /source/ 添加到文件中每一行的开头。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:16:35.990

确定目标和源的总大小（不包括）：

```
filesystem_size=$(find /SOURCE -ls | fgrep -f exclude.list  -v | awk '{ TOTAL += $6} END { print int ( TOTAL / 1024 ) }')
     # the above considers you only have, in exclude.list, a list of /path/ or /path/to/files 
     # with no spaces on those files or path. If it contains patterns, change "fgrep" with "egrep". 
     # And give us examples of those patterns so we can adjust the egrep.
     # It also consider that "find ... -ls" will print the size in the 6th column.
size_target=$(du -ks /TARGET | awk '{print $1}')
#there are other ways: 
#   if /TARGET is on different filesystem than /SOURCE, 
#   and if reasonnably sure nothing else is writing on the /TARGET filesystem : 
#     you can use "df -k /TARGET | awk '{print $n}' (n= column showing the size in k)
#     to monitor the target progress.
#     But you need to take its size before starting the rsync, 
#     and then compare it with the current size 
```

对于循环：

```
while  jobs | grep 'sync' ; do ... ; done
    #It is probably wise to add in the loop a "sleep 5" or something to avoid doing too many size computations, too often. 
```

尺寸：

```
echo "100 * $size_target / $filesystem_size" | bc 
```

请告诉我这些是否适合你。如果没有，请提供尽可能多的详细信息以帮助确定您的需求。

# c# - 使用事务是智能卡写入的好主意吗？

> ID：16142197
> 
> 赞同：-3
> 
> 时间：2013-04-22T08:06:25.120
> 
> 标签：c#, transactions, smartcard

我们正在使用自定义智能卡，通过 COM（通过 USB）接口读取和写入数据。

每当我们添加或更新记录时，都需要对卡进行一些管理，以确保更新其他信息（主要是指针）。卡上的信息基本上是一个 64k 字节的数组。在单个添加或更新时，数据在字节数组中的不同点被读取和写入。

我想强制执行一种以原子方式进行整个更新的方法。如果我们在写入过程中拔出智能卡，数据很容易损坏，特别是因为本质上它只是一个连续的字节数组，一个字节错位会破坏整个数组的有效性。我想让这种情况发生的机会尽可能小。

我研究过`TransactionScope`，但这似乎主要用于数据库事务。这样的机制对我的问题有用吗，还是我应该寻找其他方法来强制我的软件块以有效的方式读写？

我们使用的智能卡由政府机构提供给我们，因此不会更改。它有一个存储芯片，与您在电话 SIM 卡上看到的相同，许多银行卡也有它（与磁条相反）。该卡是使用 ISO-7816-15 规范设计的。进出卡的接口最初是由另一个程序员设计的，他基本上对我说：我只处理字节输入和字节输出，我不做任何验证。这对我来说似乎很奇怪，因为我认为他有责任不让卡片如此容易损坏。显然它是我的。

我会研究更多的技术规格，尽管这让我走出了我的舒适区，除非我绝对需要，否则我不想弄乱他的代码。也许这张卡有一些比目前使用的更好的方法。

有一个简单的 READ 命令，它只支持一次读取 231 个连续字节。当我问他为什么会这样以及为什么我不能一次获得整个字节数组时，他说这就是所有卡的支持。所以阅读整个文件真的很尴尬。它变得更糟，因为一旦它“满”，它就应该跳到数组的开头。:S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:09:48.540

*如果您有一张真正*的智能卡（与存储卡相反，但我无法从“自定义智能卡”中获得它），将其内存寻址为字节数组是主机应用程序（一切）和智能卡应用程序（几乎没有）。这也使智能卡的事情变得更加困难，因为文件的校验和是一种标准机制，但如果您必须在校验和中集成一个 64kByte 数组，这可能需要相当长的时间。跨越多个语句的事务是不寻常的，但可能的（比较 ISO 7816 第 7 部分，它也在卡片 SQL 的附近，又名 CSQL）；必须在文档中查找您的卡是否支持非 CSQL 序列。

我的建议是：

*   尝试使用更多的卡片功能，在单个卡片命令中尽可能覆盖不同但相互关联的信息。（这也有助于在需要时提供细粒度的访问条件）。

*   检查手册并可能使用其他制造商的卡，支持多报表交易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:11:42.683

您已经表明您正在使用基于文件的智能卡，因为 ISO 7816-15 定义了用于查找文件和对象（例如卡上的密钥）的“目录结构”。智能卡是可以以某种方式编程的处理器卡（直到它们被融合，并且只有当您当然可以访问正确的密钥时）。

基于文件的卡基于 ISO 7816-4，如果您想对智能卡进行任何操作，它应该是您库存的一部分。其中有关于文件应该是什么样子的定义。听起来您正在处理支持循环 EF 的卡，这是一种不太常见的基本文件 (EF) 结构。

在 ISO 7816-4 中也有确定文件大小的方法。通常，此信息是使用 FCI（文件控制信息）信息返回的，该信息由 FID APDU 指令从正确格式化的 SELECT FILE 返回。要将所有数据作为事务读取，只需读取所有信息并在返回指示错误的 ISO 7816-4 状态字或发生传输错误时返回某种异常。

现在写入数据有点问题，因为您需要智能卡的支持才能完成这样的事情。许多卡确实支持这种功能，主要表示为“卡撕裂”支持，因为一旦卡突然从读卡器中取出（！），所有电源都会从处理器中断开。

您可以在一种方法中结合上述两种方法（聚合 APDU 调用）来创建事务。无论如何，在内存中缓冲所有数据应该很容易，我们这里不是在谈论千兆字节的数据。

# java - 在 Spring MVC Web App 中找不到 Json Webservice

> ID：16142200
> 
> 赞同：0
> 
> 时间：2013-04-22T08:06:37.760
> 
> 标签：java, web-services, spring, web-applications, spring-mvc

我有一个 Spring Web 应用程序，这个应用程序有两个方面！一个是 Json Web 服务，另一个是静态视图。当我启动 Web 应用程序并使用 URL 转到视图时，它工作正常。但是当我尝试连接到 Json Web 服务时，服务器返回 404 错误。

这是我的 dispatcher-servlet.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

    <!--  SPECIFIC CONFIGURATIONS -->
    <import resource="springConfigurations/common-config.xml"/>
    <import resource="springConfigurations/mvc-config.xml"/>

    <bean id="exceptionResolver" class="org.springframework.web.servlet.view.json.exception.JsonExceptionResolver">
        <property name="exceptionView">
            <value>jsonView</value>
        </property>
        <property name="errorHandler">
            <list>
                <ref bean="statusError" />
                <ref bean="modelFlagError" />
            </list>
        </property>
        <property name="exceptionHandler">
            <list>
                <ref bean="exceptionMessageExceptionHandler" />
                <ref bean="stackTraceExceptionHandler" />
            </list>
        </property>
    </bean>

    <bean name="exceptionMessageExceptionHandler" class="org.springframework.web.servlet.view.json.exception.ExceptionMessageExceptionHandler" />
    <bean name="stackTraceExceptionHandler" class="org.springframework.web.servlet.view.json.exception.StackTraceExceptionHandler"/>    

    <bean name="statusError" class="org.springframework.web.servlet.view.json.error.HttpStatusError" />
    <bean name="modelFlagError" class="org.springframework.web.servlet.view.json.error.ModelFlagError" />

</beans> 
```

这是 common-config.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.2.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.2.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd">

        <!--  COMMON CONFIGURATIONS -->
        <mvc:annotation-driven/>
        <tx:annotation-driven/> 

        <context:component-scan base-package="com.jkcs.touchpos.application.controller" />

        <bean class="org.springframework.web.servlet.view.XmlViewResolver">
            <property name="location">
                <value>/WEB-INF/views.xml</value>
            </property>
            <property name="order" value="0" />
        </bean>

        <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" p:prefix="/WEB-INF/jsp/" p:suffix=".jsp">
            <property name="order" value="1" />
        </bean>

        <!-- Annotations based Configuration -->
        <context:annotation-config />

        <!-- Components Auto-Detection (Backend) -->
        <context:component-scan base-package="com.jkcs.touchpos" use-default-filters="false" >
            <!-- Types annotated by Spring Managed, Controller and Transactional, or by an annotation that itself is 
            annotated by SpringManaged, Controller, Transactional -->
            <context:include-filter type="annotation" expression="com.jkcs.touchpos.platform.annotations.SpringManaged"/>
            <context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
            <context:include-filter type="annotation" expression="org.springframework.transaction.annotation.Transactional"/>
        </context:component-scan>

        <bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" />

</beans> 
```

Views.xml 文件

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.2.xsd">

    <bean name="jsonView" class="org.springframework.web.servlet.view.json.JsonView"/>

</beans> 
```

服务等级。

```
@Controller
public class TouchPosService {

    @RequestMapping(value = "/service", method = RequestMethod.GET)
    public ModelAndView sampleJsonService(){

        Map<String, String> model = new HashMap<String, String>();
        model.put("Value", "Test Service to provide touchPos Data");

        return new ModelAndView("jasonView", model);
    }

} 
```

我在这里做错了什么！我已经定义了两个具有特定优先级的视图解析器！但有些是怎么不工作的！请在这件事上给予我帮助！

谢谢你。

更新 ：

服务器启动时，控制台会记录以下内容。

```
2013-04-22 13:40:51.384:INFO::Logging to StdErrLog::DEBUG=false via org.eclipse.jetty.util.log.StdErrLog
log4j:WARN No appenders could be found for logger (com.jkcs.touchpos.server.jetty.ServerRunner).
log4j:WARN Please initialize the log4j system properly.
2013-04-22 13:40:51.384:INFO::jetty-7.0.0.v20091005
2013-04-22 13:40:51.947:INFO:/:Initializing Spring FrameworkServlet 'dispatcher'
2013-04-22 13:40:53.509:INFO::Started SelectChannelConnector@0.0.0.0:9157 
```

并且从浏览器中抛出以下 404 ！

![在此处输入图像描述](https://i.stack.imgur.com/hnSCv.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:19:36.607

您将视图映射为 jsonView`<bean name="jsonView" class="org.springframework.web.servlet.view.json.JsonView"/>`但稍后在控制器的 return 方法中，您将返回`ModelAndView("jasonView", model);`

这些都是一样的吗？我可以查看您是否在此处返回了错误的 jsp 文件名称，这会导致 404。

# php - 迭代文件夹以找到 wp-config.php

> ID：16142203
> 
> 赞同：0
> 
> 时间：2013-04-22T08:06:53.617
> 
> 标签：php, directory, constants

我有一个在 Wordpress 范围之外执行的 php 脚本，但是我需要使用在`wp-config.php`. 我想让脚本平台独立。

我的脚本位于子文件夹（一个主题）中，我正在尝试迭代以找到 wp-config。我的主题文件最好可以放在不同的deps（子文件夹）中！

我无法在我的 while 循环中获得运行一圈的语句，我不明白为什么！我正在尝试设置条件，使其在系统根目录中停止，如 (c:)

```
function getWPConfig() {
    $dir = dirname(__FILE__);
    $dir = addslashes($dir);    
    while ($pos = strpos($dir, "\\") !== false) { //&& strpos($dir, (string)DIRECTORY_SEPARATOR) > 1
        $wpConfig = $dir . DIRECTORY_SEPARATOR .'wp-config.php';
        if (file_exists($wpConfig)) {
            echo 'Found wp-config: '. $wpConfig;
            return $wpConfig;
        } else {
            'Could not find: '. $dir . DIRECTORY_SEPARATOR .'wp-config.php';
        }
        $tempDir = explode(DIRECTORY_SEPARATOR, $dir);
        $end = end($tempDir);
        $dir = str_replace($end, '', $tempDir);
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:23:25.327

在@Pekka 的建议之后，我改写了这个函数！:-)

```
function getWPConfig() {
    $dir = dirname(__FILE__);
    $lastDir = __FILE__;
    while (strlen($dir) < strlen($lastDir)) {
        $wpConfig = $dir . DIRECTORY_SEPARATOR .'wp-config.php';
        if (file_exists($wpConfig)) {   
            return $wpConfig;
        }
        $lastDir = $dir;
        $dir = dirname($dir);
    }
    return;
} 
```

# java - Vaadin Table 行内联编辑

> ID：16142212
> 
> 赞同：4
> 
> 时间：2013-04-22T08:07:31.330
> 
> 标签：java, vaadin

我在 vaadin 中创建了一个表格，表格的每一行都有一个编辑按钮。我试过了

```
table.setEditable(true) 
```

但这使得整个表格可编辑。当我单击按钮编辑时，我只希望选定的行是可编辑的，如果可以自定义某些单元格，例如复选框、下拉列表等。有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-31T12:34:13.217

这是一个非常简单的例子：

```
final Table table = new Table();
table.setEditable(true);
table.setTableFieldFactory(new TableFieldFactory() {
    private static final long serialVersionUID = 1L;

    @Override
    public Field<?> createField(Container container, Object itemId, Object propertyId, Component uiContext) {
        if (itemId == table.getData()) {
            return DefaultFieldFactory.get().createField(container, itemId, propertyId, uiContext);
        }
        return null;
    }
});
table.addGeneratedColumn("", new ColumnGenerator() {
    private static final long serialVersionUID = 1L;

    @Override
    public Object generateCell(Table source, final Object itemId, Object columnId) {
        Button button = new Button(itemId == table.getData() ? "Save" : "Edit");
        button.addClickListener(new ClickListener() {
            private static final long serialVersionUID = 1L;

            @Override
            public void buttonClick(ClickEvent event) {
                if (table.getData() == null) {
                    // edit
                    table.setData(itemId);
                    table.refreshRowCache();
                } else if (itemId == table.getData()) {
                    // save
                    table.setData(null);
                    // ...
                    table.refreshRowCache();
                }
            }
        });
        return button;
    }
});
// ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T13:36:04.153

这是 vaadin 的默认行为。要更改默认行为，您可以扩展/重写组件。

Vaadin 提供了一些基本的东西，但针对特定的东西：

1- 搜索 vaadin 插件目录：[https ://vaadin.com/en_GB/directory](https://vaadin.com/en_GB/directory)

2-如果没有结果，恐怕我们必须编写/更改组件代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-10T08:48:07.520

与您的问题类似：我有一个包含两列的表格，但只有**一个**编辑按钮。选择一行并单击“编辑”按钮时，选定的行变为可编辑。这是使表可编辑的代码**以及**如何将更改的值传递到表中并更新已编辑的行：

```
private List<Field> fields = new ArrayList<>();

private final class EditTableClickListener implements ClickListener {

    @Override
    public void buttonClick(ClickEvent event) {
        if (mappingTable.getSelection() != null) {
            // change table menu when in Edit-Mode
            editTableBar();
            makeRowEditable();
        }
    }

    private void makeRowEditable() {
        mappingTable.setTableFieldFactory(new TableFieldFactory() {

            @SuppressWarnings("rawtypes")
            @Override
            public Field<?> createField(Container container, Object itemId, Object propertyId, Component uiContext) {
                if(itemId.equals(mappingTable.getSelection())) {
                    Field field = DefaultFieldFactory.get().createField(container, itemId, propertyId, uiContext);
                    field.setBuffered(true);
                    field.addAttachListener(new AttachListener() {
                        private static final long serialVersionUID = 1L;

                        @Override
                        public void attach(AttachEvent event) {
                            fields.add((Field)event.getConnector());
                        }
                    });

                    field.addDetachListener(new DetachListener() {
                        private static final long serialVersionUID = 1L;

                        @Override
                        public void detach(DetachEvent event) {
                            fields.remove((Field)event.getConnector());
                        }
                    });

                    return field;
                }
                return null;
            }
        });

        mappingTable.setEditable(true);
    }
}

// save when ENTER key is clicked in one of the TextFields
private final class SaveEditedRowShortcutListener extends ShortcutListener {

    private SaveEditedRowShortcutListener(String caption, int keyCode, int[] modifierKeys) {
        super(caption, KeyCode.ENTER, null);
    }

    @Override
    public void handleAction(Object sender, Object target) {
        for(Field field : fields) {
             field.commit();
         }

         String key = fields.get(0).getValue().toString();
         String value = fields.get(1).getValue().toString();

         Object selection = mappingTable.getSelection();
         selection.setKey(key);
         selection.setValue(value);

          mappingTable.setEditable(false);
          mappingTable.updateItem(selection);
          // change table menu back to Default-Mode
          initialTableBar();
    }
} 
```

# php - 意外变量问题

> ID：16142214
> 
> 赞同：-4
> 
> 时间：2013-04-22T08:07:34.073
> 
> 标签：php, mysql

现在我得到的只是我输入的相同值。所以它只是读取第一个 if 语句，就是它并输出相同的价格。

```
$mysqli = new mysqli("localhost", "root", "", "insuredcars");
if ($_POST['formcar'] == '1' || $_POST['formage'] == '18' ||  $_POST['formNCD'] == '0' || $_POST['formPoints'] == '0' )
{
$query = $mysqli->query("SELECT * FROM insurance WHERE insuranceid = '3'");
while($row = mysqli_fetch_assoc($query))
{
    echo "<tr>";
    echo "<td> The price for insurance will be " . $row['insuranceprice'] . "</td>";
    echo "</tr>";
}
echo "</table>";    
}
else if ($_POST['formcar'] == '6' || $_POST['formage'] == '18' ||  $_POST['formNCD'] ==      '0' || $_POST['formPoints'] == '0' )
{
$query = $mysqli->query("SELECT * FROM insurance WHERE insuranceid = '2'");

echo "<tr>";
echo "<td> The price for insurance will be " . $row['insuranceprice'] . "</td>";
echo "</tr>";
echo "</table>";
}
  else if ($_POST['formcar'] == '1' || $_POST['formage'] == '19' ||  $_POST['formNCD'] ==     '0' || $_POST['formPoints'] == '0' )
{
  $query = $mysqli->query("SELECT * FROM insurance WHERE insuranceid = '5'");

echo "<tr>";
echo "<td> The price for insurance will be " . $row['insuranceprice'] . "</td>";
echo "</tr>";
}
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:10:40.313

在 PHP 中，条件没有大括号`{`，并且`}`只会在其后执行**一行**。您需要添加一些大括号。

```
<?php

    $mysqli = new mysqli("localhost", "root", "", "insuredcars");
    if ($_POST['formcar'] == '1' || $_POST['formage'] == '18' ||  $_POST['formNCD'] == '0'   || $_POST['formPoints'] == '0' ) {
        $query = $mysqli->query("SELECT * FROM insurance WHERE insuranceid = '1'");
        while($row = mysqli_fetch_array($query)) {
            echo "<tr>";
            echo "<td> The price for insurance will be " . $row['insuranceprice'] . "</td>";
            echo "</tr>";
        }
        echo "</table>";
    } elseif ($_POST['formcar'] == '6' || $_POST['formage'] == '18' ||  $_POST['formNCD'] == '0' || $_POST['formPoints'] == '0' ) {
        $query = $mysqli->query("SELECT * FROM insurance WHERE insuranceid = '2'");
    }
    echo "<tr>";
    echo "<td> The price for insurance will be " . $row['insuranceprice'] . "</td>";
    echo "</tr>";
    echo "</table>";

?> 
```

我不确定这`<tr>`部分发生了什么，但是是的，这对你来说是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:22:40.373

许多`{`人失踪或处境不利。我试图猜测他们的位置。试试下面更正的语法，看看它是否按预期工作。

```
if ($_POST['formcar'] == '1' || $_POST['formage'] == '18' ||  $_POST['formNCD'] == '0' || $_POST['formPoints'] == '0' )
{
    $query = $mysqli->query("SELECT * FROM insurance WHERE insuranceid = '1'");
    while($row = mysqli_fetch_array($query))
    {
        echo "<tr>";
        echo "<td> The price for insurance will be " . $row['insuranceprice'] . "</td>";
        echo "</tr>";
    }
    echo "</table>";    
}
else if ($_POST['formcar'] == '6' || $_POST['formage'] == '18' ||  $_POST['formNCD'] == '0' || $_POST['formPoints'] == '0' )
{
    $query = $mysqli->query("SELECT * FROM insurance WHERE insuranceid = '2'");

    echo "<tr>";
    echo "<td> The price for insurance will be " . $row['insuranceprice'] . "</td>";
    echo "</tr>";
    echo "</table>";
}
else if ($_POST['formcar'] == '1' || $_POST['formage'] == '19' ||  $_POST['formNCD'] ==     '0' || $_POST['formPoints'] == '0' )
{
    $query = $mysqli->query("SELECT * FROM insurance WHERE insuranceid = '5'");

    echo "<tr>";
    echo "<td> The price for insurance will be " . $row['insuranceprice'] . "</td>";
    echo "</tr>";
}
echo "</table>"; 
```

**笔记：**

除了括号的位置之外，您的代码中还有一些逻辑错误。例如：

*   第一个`if`块应该被执行`if ($_POST['formage'] == '18')`……很好……</li>
*   ......但是你的 else 声明也应该......这没有意义。

我的猜测是你的意思是`&&`代替`||`，但这只是一个猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:10:48.187

你`if`的陈述没有括号......试试这个：

```
if(cond1){

}else if(cond2){

} 
```

# c - 无符号整数运算的错误结果

> ID：16142217
> 
> 赞同：1
> 
> 时间：2013-04-22T08:08:01.403
> 
> 标签：c, unsigned-integer

我对无符号整数变量的算术运算有疑问。

所有变量都定义为 uint32_t。这是算术运算：

```
batt += (uint32_t) ((((charg - discharg) * (time_now - time_old)) / 1000) + 0.5); 
```

操作前的值为：

```
batt = 8999824
charg = 21
discharg = 1500
time_now = 181
time_old = 132 
```

问题是操作后的结果是

```
batt = 13294718 
```

代替

```
batt = 8999752 
```

什么原因？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:10:06.680

结果`charg - discharg`是负数，因此所有表达式都是**负数**，即相当大`unsigned`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T16:50:05.363

你有2个问题。

1.  `charg < discharg`因此为`charg - discharg`. 请参阅下文，了解您最终选择 13294718 的原因。

2.  在 之前做偏置（+ 0.5）`/1000`，否则整数除法将全部准备好扔掉小数部分。

推荐修复 1：确保充电 >= 放电。

或者

建议修复 1：将 charg、discharg、time_now、time_old 和可能的 batt 更改为`int32_t`.

建议修复 2：将舍入更改为`batt += (uint32_t) ((Product / 1000.0) + 0.5);`

或者

建议修复 2：将舍入更改为 `batt += (Product + 500*sign(Product))/1000;`

* * *

明显错误的代码 - 一步一步。

```
uint32_t batt = 8999824;
uint32_t charg = 21;
uint32_t discharg = 1500;
uint32_t time_now = 181;
uint32_t time_old = 132;
// batt += (uint32_t) ((((charg - discharg) * (time_now - time_old)) / 1000) + 0.5);

// The big problem occurs right away.
// Since charg is less than discharg, and unsigned arithmetic "wrap around", 
// you get (21 - 1500) + 2**32 = (21 - 1500) + 4294967296 = 4294965817
uint32_t d1 = charg - discharg;
uint32_t d2 = time_now - time_old; // 49
// The product of d1 and d2 will overflow and the result is mod 4294967296
// (49 * 4294965817) = 210453325033
// 210453325033 mod 4294967296 = 4294894825
uint32_t p1 = d1 * d2;
uint32_t q1 = p1/1000;  // 4294894825/1000 = 4294894.825\.  round to 0 --> 4294894
double s1 = q1 + 0.5;  //  4294894 + 0.5 --> 4294894.5;
uint32_t u1 = (uint32_t) s1; // 4294894.5 round to 0 --> 4294894
batt += u1; // 8999824 + 4294894 --> 13294718 
```

# python - 从文件名中提取日期

> ID：16142218
> 
> 赞同：0
> 
> 时间：2013-04-22T08:08:05.297
> 
> 标签：python, python-2.7

我有以 gtYYMMDD.txt 格式命名的文件，例如 gt130422.txt，我想从该文件名中提取日期，格式为 2013/04/22。

我想明确我的脚本，当我执行它时，它只询问日期：

```
filetoread = "/home/scripts/gt"
raw_input("Enter date, please. For example, 130415: ") + ".txt" 
```

所以我想得到的日期是用户输入的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:12:39.830

```
>>> from datetime import datetime
>>> filetoread = "/home/scripts/gt/"
>>> s = raw_input("Enter date please e.g: 130415: ")
Enter date please e.g: 130415: 130422
>>> date = datetime.strptime(s, '%y%m%d')
>>> print date.strftime("%Y/%m/%d")
2013/04/22
>>> path = filetoread + s + ".txt" 
```

# sql-server-2008 - 如果将 HASHBYTES(MD5) 插入表 Vs 中，则获得不同的值。在 SELECT 语句中应用相同的函数

> ID：16142221
> 
> 赞同：2
> 
> 时间：2013-04-22T08:08:12.343
> 
> 标签：sql-server-2008

我有一个表 TBLxx 列 xxANSI 和 xxMD5 我在下面使用来计算 xxANSI 的校验和 MD5

```
update i
  set [xxMD5] = HASHBYTES ('MD5', [xxANSI])
from TBLxx i 
```

我在 MD5 列中得到的结果是一组特殊字符，例如“#8U3š]PÍÛ'›÷，¤Ä”，而如果我在应用 HASHBYTES 函数时对该列进行选择，我会得到一个值“0x233855339A5D50CD0CDB279BF782A4C4”

```
select top 1 xxANSI, xxMD5, hashbytes('MD5', xxMD5)
from TBLxx

"saco_other_test", "’3è@GÔ¦l
VŒ$t>", "0x169233E8401947D4A66C0D568C24743E" 
```

（xxMD5 列的值中有一个换行符，这是上面换行符的原因）

有谁知道为什么会这样？我怎样才能避免这种情况？我想在我的表格列中使用诸如“0x169233E8401947D4A66C0D568C24743E”之类的值。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:13:56.257

我认为您的问题可能是您将 hashbytes 结果插入`VARCHAR`列。您应该使用`BINARY`type 来存储 hashbytes 结果。

看到不同：

```
select hashbytes('MD5','saco_other_test') 
select cast(hashbytes('MD5','saco_other_test') as varchar(255)) 
```

# php - PHP MySQL表单提交错误

> ID：16142224
> 
> 赞同：-2
> 
> 时间：2013-04-22T08:08:21.907
> 
> 标签：php, mysql, database, database-connectivity

我需要这个简单的 PHP/MySQL 表单提交的帮助。以下是我得到的代码和错误。PHP 脚本一切正常。似乎 Mysql 数据库连接给我带来了问题。

```
 mysql_connect("localhost","root","admin");//database connection
   mysql_select_db("employees");

   //inserting data order
   $order = "INSERT INTO data_employees (name, address)
        VALUES ('$name','$address')";

   //declare in the order variable
   $result = mysql_query($order);   //order executes

   if($result)
   {
      echo("<br>Input data is succeed");

   }   else{
       echo("<br>Input data is fail");
   } 
```

**以下是我收到的错误消息：解析错误：语法错误，意外的“？” 在第 12 行的 C:\xampp\htdocs\Input.php 中**。

填写表单详细信息并提交后，有时我会收到错误消息“警告：mysql_connect()：C:\xampp\htdocs\form_input.php 中的用户 'root'@'localhost' 的访问被拒绝（使用密码：YES）在第 4 行。”

“注意：未定义的变量：C:\xampp\htdocs\form_input.php 第 11 行的名称和地址输入数据失败”。

您的解决方案，帮助表示赞赏。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:13:58.613

你的问题在这里

```
$order = "INSERT INTO data_employees (name, address)
    VALUES ('$name','$address')"; 
```

你还没有定义

```
$name and $address variables. 
```

请定义它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:21:13.363

查看您的 MySQL 错误

> 警告：mysql_connect()：第 4 行 C:\xampp\htdocs\form_input.php 中的用户 'root'@'localhost' 的访问被拒绝（使用密码：YES）

这只是指您访问数据库的用户名/密码组合错误。

还注意到您关于变量的其他错误

> 注意：未定义的变量：第 11 行 C:\xampp\htdocs\form_input.php 中的名称和地址

这是指该变量尚未声明。如果这些是您的表单发布的内容，最好使用 $_POST 超全局变量，而不是让 PHP 配置允许将 POST 数据设置为普通变量（即 $_POST["name"] vs $name）。这为命名变量提供了更大的灵活性，因为您不会在 PHP 代码中的发布值和普通变量之间发生冲突。

对于您提到的解析错误，查看代码的“Input.php”也会很有用。

有用的链接：

[$_POST 上的 PHP 文档](http://php.net/manual/en/reserved.variables.post.php)

[mysql_connect 函数的 PHP 文档](http://au1.php.net/manual/en/function.mysql-connect.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:11:04.527

对于**解析错误**

在两种情况下更改您的 echo 语句如下：

```
echo "<br>Input data is succeed" ; 
```

* * *

注意：未定义的**变量：名称和地址**从消息中非常清楚。

`$name`&`$address`没有在任何地方定义。

可能是您想从请求中获取它。

```
$name = $_REQUEST['name']; //Name of element in the form
$address = $_REQUEST['address']; 
```

* * *

**mysql_connect()：拒绝用户访问**

检查您的连接字符串是否包含正确的`username`& `password`。

* * *

**注意：** [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

# ruby-on-rails - 如何将 Redmine 与 AWS SES 结合使用以进行电子邮件通知？

> ID：16142225
> 
> 赞同：1
> 
> 时间：2013-04-22T08:08:27.633
> 
> 标签：ruby-on-rails, amazon-web-services, redmine

我已经从 Bitnami AWS EC2 实例安装了 Redmine 2.2.2 stable。它工作得很好，但我不知道如何让 Redmine 电子邮件通知使用我的 AWS SES SMTP 发件人。

我的 FQDN (my_fqdn.com) 由 AWS SES 验证为已验证发件人。

我已经配置了我的 Redmine config/configuration.yml 文件，例如：

```
# ==== SMTP server over AWS SES
production:
  email_delivery:
    delivery_method: :smtp
    smtp_settings:
      enable_starttls_auto: true
      address: email-smtp.us-east-1.amazonaws.com
      port: 25
      domain: my_fqdn.com
      authentication: :login
      user_name: smtp_access_key
      password: smtp_secret_key
      openssl_verify_mode: 0 
```

注意：即使我删除也不起作用：openssl_verify_mode：0

但是当我尝试从“电子邮件通知”发送“测试电子邮件”时，出现错误：

```
An error occurred while sending mail (hostname does not match the server certificate) 
```

这里的“服务器证书”是什么意思？

我的 Redmine 实例从不发送任何电子邮件...

是否有必要在我的服务器上安装和配置中继到 AWS SES 的后缀？

任何想法 ？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:49:12.677

实际上，您需要在 config/configuration.yml 文件的底部配置 prod 和 dev 环境：

```
production:
   ...

development:
   ... (same config as prod for me) 
```

并复制粘贴我的配置。

在我的 AWS SES 帐户上，我需要验证我的域。

现在它的工作！:-)

我希望这会对某人有所帮助。

# c - c add_before和add_after函数中的链表

> ID：16142226
> 
> 赞同：0
> 
> 时间：2013-04-22T08:08:32.313
> 
> 标签：c, pointers, linked-list

在创建链接列表以便在元素之后和元素之前添加一些数据时，我使用了以下函数，正如我从教程中学到的：

```
struct node *addafter(struct node *start,int data,int item)
{
    struct node *tmp,*p;
    p=start;
    while(p!=NULL)
    {
        if(p->info==item)
        {
            tmp=(struct node *)malloc(sizeof(struct node));
            tmp->info=data;
            tmp->link=p->link;
            p->link=tmp;
            return start;
        }
        p=p->link;
    }
    printf("Item Not Found:\n");
    return start;
}
struct node *addbefore(struct node *start,int data,int item)
{
    struct node *tmp,*p;
    if(item==start->info)
    {
        tmp=(struct node *)malloc(sizeof(struct node));
        tmp->link=start->link;
        tmp->info=data;
        start->link=tmp;
        return start;
    }
    p=start;
    while(p->link!=NULL)
    {
        while(p->link->info==item)
        {
            tmp=(struct node *)malloc(sizeof(struct node));
            tmp->info=data;
            tmp->link=p->link;
            p->link=tmp;
            return start;
        }
        p=p->link;
    }
        printf("Item Not Found:\n");
    return start;
} 
```

我的疑问是在 addafter 函数中为什么停止条件是 p!=NULL 并且在 addbefore 函数的情况下它的 p->link!=NULL?..请任何人解释一下！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:14:30.217

要将节点添加到单个链接列表，您必须有一个指向该节点的指针，然后添加该节点。

因此，如果要在第 3 个节点之后添加一个节点，则需要一个指向第 3 个节点的指针。如果你想在第三个节点之前添加一个节点，你需要一个指向第二个节点的指针。

所以之前和之后需要的指针是不同的。因此，对于后一种情况，您的当前指针（`p`在您的情况下）需要指向项目匹配的节点，而在前一种情况下，您的当前指针需要指向项目匹配之前的节点。

您还可以通过维护 prev 指针来`addbefore`用 a 重写 case 。`while(p!=NULL)`

```
struct node *addbefore(struct node *start,int data,int item)
{
    struct node *tmp,*p,*prv;
    if(item==start->info)
    {
        tmp=(struct node *)malloc(sizeof(struct node));
        tmp->link=start->link;
        tmp->info=data;
        start->link=tmp;
        return start;
    }
    p = start->link;
    prv = start;

    while(p != NULL)
    {
        if(p->info==item)
        {
            tmp=(struct node *)malloc(sizeof(struct node));
            tmp->info=data;
            tmp->link=p;
            prv->link=tmp;
            return start;
        }
        prv = p;
        p=p->link;

    }
        printf("Item Not Found:\n");
    return start;
} 
```

编写之前的代码的任何一种方式都很好。

# php - 重复 PHP 脚本

> ID：16142228
> 
> 赞同：0
> 
> 时间：2013-04-22T08:08:42.367
> 
> 标签：php, function, repeat

我有一个验证系统供选择记住我的人使用。我从 PHPSESSID 和用户名中创建了一个完整的 cookie。然后将 PHPSESSID 与他们的用户名一起放入数据库，并且每次他们再次登录以验证正确的用户时它都会更改。基本上我希望它每 5 秒运行一次以检查 cookie。原因是这是 iPhone 应用程序的一部分，该应用程序具有多个选项卡，可让您登录其中任何一个。因此，如果您登录其中一个，我希望另一个能够意识到这一点并采取适当的行动。任何帮助都会受到喜爱。谢谢。

```
<?php
$Username = $_COOKIE['Username'];
if (isset($_COOKIE['Username']) && isset($_COOKIE['PHPSESSID'])) {
echo "<p>&nbsp;</p>";
echo "<center>Login Successful. Please wait for redirect.";
echo '<meta http-equiv="Refresh" content="3;URL=http://www.example.com">';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:15:03.963

由于它需要比每分钟更频繁地运行，因此您不能使用 cron 作业，而是可以将其置于永无止境的 while 循环中，并休眠 5 秒。

```
while (true) {
  // your code here
  sleep(5);
} 
```

当然，您需要设置一些东西来监控它以防万一它出现故障，为此，您可以使用[supervisord](http://supervisord.org/)

# php - 如何使用 PHP for Oracle 将 null 值更改为 0 并对其进行简单/求和

> ID：16142236
> 
> 赞同：1
> 
> 时间：2013-04-22T08:09:02.167
> 
> 标签：php, oracle

如何使用 Oracle 的 PHP 函数将 null 值更改为 0 并对其进行简单（求和）？以下是我当前的代码

```
 $conn = ......;
   $strSQL = .....;
   $objParse = oci_parse ($conn, $strSQL);
   oci_execute ($objParse);
   $total_tonnage = 0;
   while($objResult = oci_fetch_array($objParse,OCI_BOTH))
   {
    $total_tonnage += $objResult["TON"];
   }
   echo $total_tonnage; 
```

当我运行上面的代码时，我收到了

> SCREAM：忽略错误抑制

和

> 注意：未定义索引：TON

供您参考，当没有空值时。它运行良好。获得空值/空值时发生该错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:55:38.203

这也可以在数据库中完成-

通常当您需要查询空值作为值时，您可以使用[NVL 函数](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions105.htm)IE：

```
SELECT nvl(TON, 0) , -- other columns here
FROM your_table
-- rest of the 300++ lines 
```

如果您只需要对值求和并且不想更改 300++ 查询，则可以执行以下操作：

```
SELECT sum(TON)
FROM (<your 300++ query>) 
```

如果您需要总和和其他列（您不想“分组”），那么您可以执行以下操作：

```
SELECT t.*, sum(t.TON) over()
FROM (<your 300++ query>) t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:51:31.057

```
 while($objResult = oci_fetch_array($objParse,OCI_BOTH))
   {
    $total_tonnage += array_key_exists('TON', $objResult) ? $objResult["TON"] : 0;
   } 
```

# android - 什么可能导致 getSkuDetails() 返回 null？

> ID：16142239
> 
> 赞同：3
> 
> 时间：2013-04-22T08:09:05.270
> 
> 标签：android, in-app-purchase, in-app-billing

我最近丢失了我的 Android 应用程序的密钥库（在它发布之前），所以我需要在 Play 商店开发者控制台上创建一个新应用程序，更改我的包名称等。

这样做之后，我的应用内计费实现坏了：当我`queryInventoryAsync()`在我的 上使用时`IabHelper`，它似乎认为我的库存中没有任何内容。我确定我只是忘记在我的开发者控制台或类似的东西中更新一些东西，但我不确定是什么。

我检查过的事情：

1.  我想要 SkuDetails 的应用内产品处于活动状态。
2.  我们在查询中要求的 sku 确实存在于 google play 中。
3.  该产品尚未购买。

还可能缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-11T12:53:04.577

大多数情况下都会发生这种情况，因为 Google 改变了开发者 Play 商店的工作方式。

**以前**，我们只需要上传签名的 APK 而不发布它。

**现在**，您必须在 Beta 和 Alpha 部分上传签名的 APK 并将**其发布**，以便用户进行应用内购买。不要忘记将自己添加到测试人员列表并正确设置测试用户列表。

# xslt - Sitecore XSLT 渲染

> ID：16142241
> 
> 赞同：1
> 
> 时间：2013-04-22T08:09:09.947
> 
> 标签：xslt, rendering, sitecore, xslt-1.0

```
<xsl:for-each select="$home/item">

   <sc:text field= "Title"/><br/>

</xsl:for-each> 
```

我在 Home 中有两个模板，“about”和“start”，上面的代码在 Title 字段中显示了这两个数据，我想只显示“about”的 Title 字段，.. 我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:13:39.410

你可以做很多事情。如果它只是您想要显示的“关于”（之后不再显示），您可以定义一个变量。例如，您可以查看标准 Sitecore 渲染的顶部（或查看`$home`变量的定义）。

```
<xsl:variable name="aboutItem" select="/sitecore/content/home/about" /> 
```

然后你可以得到这样的标题：

```
<sc:text field= "Title" select="$aboutItem" /> 
```

`sc:text`如果需要`select`财产或财产，请不要从我的脑海中记住`item`。

**[编辑]**
只是为了让您了解另一种方式，它也是可能的：

```
<xsl:for-each select="$home/item[@id='guid of your about item']">

   <sc:text field= "Title"/><br/>

</xsl:for-each> 
```

# android - 具有自定义 ROM 的 Android 设备 - 是否仍然可以使用此设备进行测试？

> ID：16142243
> 
> 赞同：-2
> 
> 时间：2013-04-22T08:09:13.323
> 
> 标签：android, testing, rom

标题说明了一切。我正在考虑获得一个自定义 ROM，但我想用我的手机来测试 android 应用程序。会不会有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:19:21.953

是的，您仍然可以开发应用程序并在手机中进行测试。您可能会遇到一些错误，这些错误可能只是由于您的自定义 ROM、idk 可能是相机无法正常运行等，等等，但大多数情况下，不，这应该不是问题

# iphone - 可以在模拟器中测试应用内购买吗？

> ID：16142244
> 
> 赞同：-5
> 
> 时间：2013-04-22T08:09:13.393
> 
> 标签：iphone, ios, in-app-purchase

我创建了应用内购买产品应用。当我通过测试用户帐户在模拟器中进行测试时，我得到了 Transaction failed 错误。应用内购买是否允许测试模拟器或仅在设备中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:19:44.353

不，你不能在模拟器中测试它。

您可以提示输入苹果 ID 或密码以购买产品，但其剩余过程不允许进入模拟器，这就是您收到提示交易失败错误的原因。

**您必须使用您的测试 Apple id 或密码在具有相关配置代码符号的设备中对其进行测试。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:29:00.080

您无法在模拟器中进行测试，您必须插入设备并使用它进行测试。

如果您仍然想尝试，控制台会提醒您不能：

```
// WARNING: SKPaymentQueue does not work in the simulator 
```

# entity-framework - 创建模型时无法使用上下文

> ID：16142245
> 
> 赞同：0
> 
> 时间：2013-04-22T08:09:13.523
> 
> 标签：entity-framework, frameworks, entity, dbcontext

我的实体框架使用出现问题，我认为这可能是因为我错误地使用了我的数据库上下文。

我时不时地在我的日志中看到错误消息：“在创建模型时无法使用上下文。”

该错误并不总是发生，并且似乎是在新的应用程序负载上，或者如果我编译我的项目并在编译时刷新浏览器选项卡。

下面的函数是错误的，是从我的母版页调用的。

```
public static class UserFunctions
{
    private static peopleSwimmingContext _db = new peopleSwimming.Models.peopleSwimmingContext();

    public static String GetUserRole(Int32 UserID) {

        String returnedRole = String.Empty;

        var foundUser = _db.Users.Where(w => w.UserId == UserID).FirstOrDefault();
        if (foundUser != null)
        {
            returnedRole = foundUser.Role.Name;
        }
        return returnedRole;
    }
} 
```

任何提示将不胜感激！

哦，这是我的内部堆栈跟踪：

内部堆栈跟踪：

在 System.Data.Entity.Internal.LazyInternalContext.InitializeContext() 在 System.Data.Entity.Internal.InternalContext.Initialize() 在 System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) 在 System.Data.Entity .Internal.Linq.InternalSet `1.Initialize() at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext() 在 System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider() at System.Linq.Queryable.Where[TSource](IQueryable`1 源，表达式`1 谓词）在 peopleSwimming.Logic.UserFunctions.GetUserRole(Int32 UserID) 在 c:\svn\peopleSwim\peopleSwimming\Logic\UserFunctions.cs:line 18 at peopleSwimming._Home.Page_Load(Object sender, EventArgs e ) 在 c:\svn\peopleSwim\peopleSwimming\Home.aspx.cs:line 25 at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) at System.Web.UI.Control.OnLoad(EventArgs e)在 System.Web.UI.Control.LoadRecursive() 在 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:41:14.237

尝试将您的代码包装在`using`初始化和处理数据上下文的语句中，以便它仅在您需要它之前可用到之后。这也将确保它被处理掉。

另外，您不需要该`Where`方法，只需使用`FirstOrDefault`.

```
public static class UserFunctions
{
    public static String GetUserRole(Int32 UserID) 
    {
        using (peopleSwimmingContext _db = new peopleSwimming.Models.peopleSwimmingContext())
        {
            String returnedRole = String.Empty;

            var foundUser = _db.Users.FirstOrDefault(w => w.UserId == UserID);

            if (foundUser != null)
            {
                returnedRole = foundUser.Role.Name;
            }

            return returnedRole;
        }
    }
} 
```

# java - 在 Java 中使用 org.mule.expression.DefaultExpressionManager 类

> ID：16142248
> 
> 赞同：0
> 
> 时间：2013-04-22T08:09:23.130
> 
> 标签：java, mule, mule-studio

我正在尝试在我的 java 类中使用 MEL 函数。我发现我可以使用 org.mule.expression.DefaultExpressionManager 类的评估方法来完成此操作。我试图在我的 onCall 方法中实现它，但它似乎对我不起作用。DefaultExpressionManager 的使用方式有问题吗？

```
public Object onCall(MuleEventContext p_eventContext) throws Exception 
{
        // TODO Auto-generated method stub
        System.out.println("reached inside onCall");
        MuleMessage l_receivedMsg = p_eventContext.getMessage();
        DefaultExpressionManager l_ExpressionManager = new DefaultExpressionManager();
    System.out.println("ServiceName==" +(String) l_ExpressionManager.evaluate("#[context:serviceName]", l_receivedMsg));
        return l_receivedMsg;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:00:10.867

要直接从您的代码中使用 MEL，您需要使用[ExpressionLanguage 接口](http://www.mulesoft.org/docs/site/3.3.1/apidocs/index.html?org/mule/api/el/ExpressionLanguage.html)。

要获取它的实例，请使用：

```
ExpressionLanguage el = p_eventContext.getMuleContext().getExpressionLanguage(); 
```

请注意，所有`evaluate`接受 a 的方法`MuleMessage`都已弃用。如果这对您来说是一个问题，那么您必须将您的组件更改为自定义`MessageProcessor`（即实现[org.mule.api.processor.MessageProcessor](http://www.mulesoft.org/docs/site/3.4.0/apidocs/index.html?org/mule/api/processor/MessageProcessor.html)）。这将使您可以访问`MuleEvent`您可以从中获取`ExpressionLanguage`然后调用非弃用方法的`evaluate`方法。

另请注意，您的问题`#[context:serviceName]` *不是 MEL 表达式*！您可以在此处了解 MEL 语法：http: [//www.mulesoft.org/documentation/display/current/Mule+Expression+Language+MEL](http://www.mulesoft.org/documentation/display/current/Mule+Expression+Language+MEL)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:49:07.647

不要实例化 DefaultExpressionManager，而是执行以下操作：

```
p_eventContext.getMuleContext().getExpressionManager(); 
```

# php - preg_match 不匹配

> ID：16142260
> 
> 赞同：0
> 
> 时间：2013-04-22T08:10:10.950
> 
> 标签：php, curl, preg-match

几天来，我一直在尝试使用 php preg_match 解析该网站[http://www.nzz.ch/aktuell/zuerich/stadt_region/notrufdienst-am-handgelenk-1.18068637](http://www.nzz.ch/aktuell/zuerich/stadt_region/notrufdienst-am-handgelenk-1.18068637)的源代码，但没有成功。curl 的阅读和标题的搜索也很顺利。

在使用 preg_match 搜索描述时出现问题。 `preg_match('/Description" content="(.*)">/i', $content, $description); $ogdescription = substr($description[0], 22, -1);`

这个搜索的结果是：

```
Ein Telefon nützt wenig, wenn es sich im Notfall nicht in greifbarer Nähe befindet. Das haben sich die Gründer der Firma Limmex gedacht und eine Armbanduhr auf den Markt gebracht, die per Knopfdruck zum Mobiltelefon wird." /&gt;<meta name="Publisher" content="Neue Zürcher Zeitung AG, Switzerland"><meta name="email" content="online.redaktion@nzz.ch"><meta name="copyright" content="Copyright &amp;copy; 2013 Neue Zürcher Zeitung AG, Switzerland, http://www.nzz.ch/agb"><meta http-equiv="content-language" content="de"><meta http-equiv="expires" content="-1"><meta name="Author" content="Impressum Neue Zürcher Zeitung, Switzerland, http://www.nzz.ch/impressum"><meta name="distribution" content="global"><meta name="robots" content="index, follow, noarchive, noodp"><meta name="revisit-after" content="1 hour"><meta http-equiv="pragma" content="no-cache"><meta property="fb:app_id" content="138008459595436"><meta property="og:title" content="Zürcher Jungunternehmen: Notrufdienst am Handgelenk - Übersicht Nachrichten - NZZ.ch"><meta property="og:type" content="article"><meta property="og:url" content="http://www.nzz.ch/aktuell/zuerich/stadt_region/notrufdienst-am-handgelenk-1.18068637"><meta property="og:image" content="http://images.nzz.ch/app.php/eos/v2/image/view/145/-/lead/25b76387/1.18068643.1366564054.jpg"><meta property="og:site_name" content="Neue Zürcher Zeitung"><meta name="viewport" content="width=1390"><meta name="application-name" content="NZZ Online"><meta name="msapplication-tooltip" content="Start NZZ Online in Site Mode"><meta name="msapplication-starturl" content="http://www.nzz.ch"><meta name="msapplication-window" content="width=1024;height=760"><meta name="msapplication-navbutton-color" content="#000000"><meta name="msapplication-task" content="name=Nachrichten; action-uri=http://www.nzz.ch/nachrichten; icon-uri=http://www.nzz.ch/version-2.8.1/bundles/website/img/favicon.ico"><meta name="msapplication-task" content="name=Finanzen; action-uri=http://www.nzz.ch/finanzen; icon-uri=http://www.nzz.ch/version-2.8.1/bundles/website/img/favicon.ico"><meta name="msapplication-task" content="name=Magazin; action-uri=http://www.nzz.ch/magazin; icon-uri=http://www.nzz.ch/version-2.8.1/bundles/website/img/favicon.ico"><meta name="msapplication-task" content="name=Marktplätze; action-uri=http://www.nzz.ch/marktplaetze; icon-uri=http://www.nzz.ch/version-2.8.1/bundles/website/img/favicon.ico"><link href="http://www.nzz.ch/version-2.8.1/bundles/website/img/favicon.ico" rel="icon" type="image/x-icon"><link rel="shortcut icon" href="http://www.nzz.ch/version-2.8.1/bundles/website/img/favicon.ico"><link rel="apple-touch-icon" href="http://www.nzz.ch/version-2.8.1/bundles/website/img/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="72x72" href="http://www.nzz.ch/version-2.8.1/bundles/website/img/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="114x114" href="http://www.nzz.ch/version-2.8.1/bundles/website/img/apple-touch-icon-114x114.png"><link rel="publisher" href="https://plus.google.com/118094012157733055567"><link rel="stylesheet" type="text/css" media="screen, projection, handheld, print" href="/bundles/website/css/jquery.fancybox-1.3.4.css"><title>Zürcher Jungunternehmen: Notrufdienst am Handgelenk - Übersicht Nachrichten - NZZ.ch</title><link rel="canonical" href="http://www.nzz.ch/aktuell/zuerich/stadt_region/notrufdienst-am-handgelenk-1.18068637"><link rel="stylesheet" type="text/css" href="/version-2.8.1/css/6927630.css"><link rel="stylesheet" type="text/css" media="print" href="/version-2.8.1/css/5bd0678.css"><meta http-equiv="imagetoolbar" content="false"><link rel="search" href="/search" title="Suche Neue Zürcher Zeitung, Switzerland, http://www.nzz.ch/search"><link rel="author" href="/impressum" title="Impressum Neue Zürcher Zeitung, Switzerland, http://www.nzz.ch/impressum"><link rel="copyright" href="/agb" title="Copyright &amp;copy; 2013 Neue Zürcher Zeitung AG, Switzerland, http://www.nzz.ch/agb"><!--[if lt IE 9]><script type="text/javascript" src="/version-2.8.1/bundles/website/js/html5shiv.js"></script><![endif]--><!-- Maxymiser script start --><!-- Maxymiser script end --> 
```

我做错了什么，它需要所有的源代码？

* * *

下一个问题：

```
preg_match('/escription" content="(.*?)" \/>/i', $content, $description); 
```

$ogdescription = $description[1];

```
<meta name="twitter:description" content="Am 17 .4\. 2013 besch&auml;ftigte sich das &Ouml;1-Gesundheitsmagazin mit Pers&ouml;nlicher Assistenz und dem Recht auf Selbstbestimmung."> 
```

为什么不匹配呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:54:07.510

```
preg_match('/Description" content="(.*)"/i', $content, $description);   
$ogdescription = substr($description[0], 22, -1); 
```

无需匹配 >

或者

```
preg_match('/Description" content="(.*?)" \/>/i', $a, $description); 
print_r($description); // use $description[1]

Array
(
    [0] => Description" content="Ein Telefon nützt wenig, wenn es sich im Notfall nicht in greifbarer Nähe befindet. Das haben sich die Gründer der Firma Limmex gedacht und eine Armbanduhr auf den Markt gebracht, die per Knopfdruck zum Mobiltelefon wird." />
    [1] => Ein Telefon nützt wenig, wenn es sich im Notfall nicht in greifbarer Nähe befindet. Das haben sich die Gründer der Firma Limmex gedacht und eine Armbanduhr auf den Markt gebracht, die per Knopfdruck zum Mobiltelefon wird.
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:15:31.097

```
preg_match('/Description" content="(.*?)" \/>/i', $content, $description); 
```

让您的搜索“非贪婪”注意“？” 添加到您的正则表达式

没有 ? 正则表达式将匹配它找到的最后一个 > 符号。与？比赛结束后，它将停在第一个。

您还需要转义的正斜杠和空格，因为内容是 xHTML。

有了这个正则表达式

```
$description[0] // will contain the full matched tag
$description[1] // will contain just the text from inside the tag 
```

# android - ListView android中的自定义空视图

> ID：16142274
> 
> 赞同：4
> 
> 时间：2013-04-22T08:10:43.070
> 
> 标签：android, listview

如果 ListView 适配器中没有数据，我想显示一个刷新按钮和一个 TextView。我还希望能够将单击侦听器添加到将重新加载列表的按钮。这是我定义当前活动的方式：

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.foods);

    arrList=new ArrayList<FoodsData>();

    listView=(ListView)findViewById(R.id.list_foods);

    this.listView.setEmptyView(findViewById(R.id.emptyView));

    .....
    .....
} 
```

这是我的xml文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:orientation="vertical"
    android:layout_height="match_parent">
<LinearLayout 
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:orientation="vertical"
    android:layout_centerInParent="true"
    android:id="@+id/emptyView">
    <TextView
        android:layout_width="wrap_content"
        android:textColor="@android:color/white"
        android:layout_height="wrap_content"
        android:textSize="20sp"
        android:text="Click Refresh to load data"/>
   <Button 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/btn_retry"
        android:textColor="@android:color/white"
        android:background="@drawable/orange_button_selecter"
        android:layout_gravity="center"
        android:textSize="25sp"
        android:text="@string/retry"/>
</LinearLayout>
<ListView 
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:dividerHeight="2dp"
    android:id="@+id/list_foods"/> 
```

我将在哪里为我的刷新按钮设置点击侦听器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T11:09:44.227

如下更改您的 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:orientation="vertical"
    android:layout_height="fill_parent">
    <FrameLayout 
        android:layout_height="fill_parent"
        android:layout_width="fill_parent"
        android:layout_centerInParent="true"
        android:id="@+id/emptyView">
        <TextView
            android:layout_width="wrap_content"
            android:textColor="@android:color/white"
            android:layout_height="wrap_content"
            android:textSize="20sp"
            android:text="Click Refresh to load data"/>
       <Button 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/btn_retry"
            android:textColor="@android:color/white"
            android:background="@drawable/orange_button_selecter"
            android:layout_gravity="center"
            android:textSize="25sp"
            android:text="@string/retry"/>
    </FrameLayout>
<ListView 
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:dividerHeight="2dp"
    android:id="@+id/list_foods"/>
</RelativeLayout> 
```

把这些行放在java中

```
 View empty = findViewById(R.id.emptyView);
    btn_retry=(Button)empty.findViewById(R.id.btn_retry);
    listView.setEmptyView(empty); 
```

现在你可以在同一个 Activity 中编写 onClickListener() ，因为它属于同一个 xml 布局。

```
btn_retry.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                //Do the refresh thing or verify with Toast.
            }
        }); 
```

在这里，如果列表视图为空，它将显示按钮刷新。否则它将显示填充列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T02:50:09.217

据我所知，无需清除适配器并将 notifyDataSetChanged() 设置为适配器。您已将 List、ArrayList 用于项目或数组。先清空，再重新初始化，将数据传给服装适配器后，清空使用的数组/列表。它会正常工作的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:38:07.830

您需要通过扩展[BaseAdapter以下列方式为列表视图创建自定义适配器](http://developer.android.com/reference/android/widget/BaseAdapter.html)

```
 public class ListViewAdapter extends BaseAdapter {
    LayoutInflater layoutInflater;
    Context mContext;
    ArrayList<String> slist_name;
    ArrayList<String> list_deviceId;

    /** constructor is initializing */

    public ListViewAdapter(Context c, ArrayList<String> name,ArrayList<String> devId) {
        mContext = c;
        layoutInflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        slist_name = name;
        list_deviceId=list_deviceId;

    }

    public int getCount() {

         return slist_name.size();
    }

    public Object getItem(int position) {

        return null;
    }

    public long getItemId(int position) {

        return 0;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        View vi = null;
        convertView = null;
        vi = convertView;

        if (convertView == null) {

            vi = layoutInflater.inflate(R.layout.listview_item, null);

            TextView name_textview = (TextView) vi
                    .findViewById(R.id.textEmp_id);

            name_textview.setText(slist_name.get(position));

            Button btn = (Button) vi
                    .findViewById(R.id.btn_id);
                        btn.setOnClickListener(this);
                        //add relevent code in onclickListner

        }
        return vi;

    }

} 
```

在您的活动中，通过以下方式将自定义适配器添加到 listView：

```
 listView = (ListView) findViewById(R.id.listview_employee_id);
        adapter = new ListViewAdapter(this, listarray, listarrayDev);
        listView.setAdapter(adapter); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T10:26:47.053

首先必须将 Adapter 设置为 ListView，然后如果需要刷新 listView 内容，请使用：adapter.notifyDataSetChanged();

如果您需要删除所有项目，请使用：

```
adapter.clear();
adapter.notifyDataSetChanged(); 
```

例如 ：

```
 String[] items = new String[] { "Item1", "Item2", "Item3", "Item4" };
    final ListView listView = (ListView)findViewById(R.id.listView1);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_single_choice, android.R.id.text1, items);
    listView.setAdapter(adapter);

    Button refreshButton = (Button)findViewById(R.id.button1);
    refreshButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {
           ArrayAdapter<String> adapter = (ArrayAdapter<String>)listview.getAdapter();
           if(adapter!= null)
              {
                  adapter.clear();
                  adapter.notifyDataSetChanged();
                 //here you can write your listView.setEmptyView(findViewById(R.id.emptyView)); code
              }
    }); 
```

# xml - xsl 转换

> ID：16142276
> 
> 赞同：0
> 
> 时间：2013-04-22T08:10:42.953
> 
> 标签：xml, xslt, xpath

我有这个 bxf 文件。我需要对其应用 xsl 转换：

```
<AAA>
<BBB:Name lang="ABC">Some text</BBB:Name>
 </AAA> 
```

这是我的 xsl 转换：

```
 <test>
     <xsl:value-of select="bxf:AAA/bxf:BBB:Name[@lang = 'ABC']"/>                
 </test> 
```

我这样做是否正确。以这种方式完成之后，我的 xsl 没有被正确解析。

**编辑：**

它说：表达式的预期结尾，找到'：'。

**输出**

```
<test>
Some text
</test> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:07:15.813

The part causing the error is this portion of the path:

```
bxf:BBB:Name 
```

That's not a valid node name. Try using this (you will also need to ensure that the `BBB:` namespace prefix is declared in your XSLT):

```
<test>
     <xsl:value-of select="bxf:AAA/BBB:Name[@lang = 'ABC']"/>                
</test> 
```

# c - 用 C 语言在客户端-服务器编程中发送字符串

> ID：16142278
> 
> 赞同：0
> 
> 时间：2013-04-22T08:10:45.073
> 
> 标签：c, sockets

我目前正在做套接字编程。现在，可以在客户端-服务器之间轻松发送和接收字节。现在，我想在客户端服务器之间发送字符串。

我用于相同的代码是（客户端）：

```
 strcpy(recvbuf, sendbuf);
    send(ConnectSocket, recvbuf, strlen(recvbuf), 0);
    printf("\nSending string..."); 
```

（服务器）

```
 iResult = recv(ClientSocket, recvbuf, sizeof(recvbuf) -1, 0);
    recvbuf[iResult]= '\0';
    strcpy(sendbuf2, recvbuf);
    printf("String recieved = %s", sendbuf2); 
```

但是，它没有显示正确的结果。有什么链接可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:33:04.197

首先字符串也是字节。只要您可以轻松地发送/接收字节，就可以以同样的方式发送/接收字符串。

还有一些提示。您应该了解您正在使用的 TCP 或 UDP。使用 UDP，每个 send() 发送一个数据包，recv() 接收一次数据包。但是 tcp 是一个字节流。这意味着 send() 只是将一些字节写入流，并且您无法期望 recv() 在返回之前实际接收到多少字节。您必须设计一种机制来从字节流中解码数据包。说你的情况，你可以使用 '\0' 来分割字符串数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:49:51.260

```
recvbuf[iResult]= '\0'; 
```

可能是非常错误的，因为 iResult 可能是 -1 并且您会在数组开始之前写入，因此您会破坏内存。

除此之外，没有更多细节我无法知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:51:09.240

我认为 recv() 被滥用了。

1.  需要检查recv() 的返回值。如果返回码为负数，则不应继续其余行。
2.  要获得 recv() 的正值，您应该设置标志（最后一个参数）。'0' 表示接收所有长度为“sizeof(recvbuf) -1”的字节。因此，在收到所有 1023 个字节之前，永远不会返回该代码。
3.  确定套接字中有多少字节并读取确切的字节长度。

尝试这个...

```
int length_to_read = 0;

length_to_read = recv(ClientSocket, recvbuf, sizeof(recvbuf) -1, MSG_PEEK);
if( length_to_read < 0 ) {
  // error
  return;
}

iResult = recv(ClientSocket, recvbuf, length_to_read, 0);
if( iResult < 0 ) {
  // error
  return;
} 
```

PS。以上代码是多余的 recv() 系统调用。在一般的 TCP/IP 套接字编程中，您应该知道数据的确切长度。例如，长度和尾随数据的前 4 个字节。为什么不定义 c/s 接口的长度？

步骤 1\. 计算数据大小。步骤 2\. 发送长度和数据。

步骤 1\. 读取 4 个字节的长度。步骤 2\. 读取数据精确长度先前计算的长度。

# ios - 在 UITableViewCell 中添加 UIWebView

> ID：16142279
> 
> 赞同：2
> 
> 时间：2013-04-22T08:10:45.637
> 
> 标签：ios, uitableview, uiwebview

我有一个表格视图，我想做的是在单击单元格时在单元格上添加 webview，并且该特定单元格的高度也应该根据 webview 内容进行调整。欢迎提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:24:00.577

这取决于您拥有 Web 视图的单元格的数量。理想情况下，您必须等待 Web 视图呈现，然后更改 Web 视图和单元格的高度

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    NSString *string = [_webView stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"body\").offsetHeight;"];
    CGFloat height = [string floatValue] + 8;
    CGRect frame = [_webView frame];
    frame.size.height = height;
    [_webView setFrame:frame];

//Store the height in some dictionary and call [self.tableView beginUpdates] and [self.tableView endUpdates]
} 
```

当然，这会对性能造成不好的影响，但对于单个单元格来说这还不错。如果多个单元格具有 web 视图，请使用**Ishank 的**方法。但是，如果您的字符串包含 div 元素，例如`<td>`该方法将返回一个误导性的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:34:02.770

在委托 - `cellForRowatIndex:`，你可以这样做-

```
 NSString *HtmlStr = [NSString stringWithFromat:@"<div style=\"font-family:\"Times New Roman\";font-size:18px;\">%@</div>",@"YOUR_String_DATA"];

[cell.webView loadHTMLString:HtmlStr baseURL:nil]; 
```

使用此查找内容大小（在您的情况下为高度）-

```
CGSize aSize = [@"YOUR_String_DATA" sizeWithFont:@"Times New Roman" minFontSize:18.0f actualFontSize:18.0f forWidth:TableViewCellWidth lineBreakMode:lineBreakMode];

cell.webView.frame = CGRectMake(0,0,aSize.width,aSize.height); 
```

此外，在`heightForRowatIndex:`委托方法中，您必须以某种方式返回高度`aSize.height`

# asp.net - 中继器标记在我的链接中没有数据绑定

> ID：16142280
> 
> 赞同：0
> 
> 时间：2013-04-22T08:10:47.000
> 
> 标签：asp.net, repeater, asp.net-4.5

我试图在网上找到解决方案，但我找不到任何解决方案。但是，如果您知道要搜索什么，它可能很容易找到。

无论如何，我有一个这样的 ASP.NET 中继器：

```
 <asp:Repeater runat="server" ID="ToolRpt" SelectMethod="GetTools" ItemType="BtcDatabase.DbTools">
        <ItemTemplate>
            <div class="toolItem">
                <asp:HyperLink runat="server" NavigateUrl='~/tool/<%#Item.ToolUrl %>'>
                <h2><%# Item.ToolSubject %></h2>
                <%#Item.ToolSnippet %>
                    <br/><br/>
                <span style="text-decoration:underline">» Try the tool</span>
                </asp:HyperLink>
            </div>
        </ItemTemplate>
    </asp:Repeater> 
```

我的超链接导航 url 输出如下：

```
tool/%3C%25#Item.ToolUrl%20%25%3E 
```

当 Item.ToolUrl 是 current-url 时，我希望它是以下内容：

```
tool/current-url 
```

有人知道处理链接时的语法吗？

（对不起，nooby 问题 - 但这很烦人）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:36:05.307

你应该像这样使用 Eval：

```
<asp:HyperLink runat="server" NavigateUrl='<%# "~/tool/"+ Eval("Item.ToolUrl")  %>'>
            <h2><%# Eval("Item.ToolSubject") %></h2>
            <%# Eval("Item.ToolSnippet") %>
                <br/><br/>
            <span style="text-decoration:underline">» Try the tool</span>
            </asp:HyperLink> 
```

# matlab - 在循环期间将数字保存在matlab中

> ID：16142282
> 
> 赞同：2
> 
> 时间：2013-04-22T08:10:55.417
> 
> 标签：matlab, image-processing, matlab-figure

如果可以保存循环期间发生的数字，我很感兴趣。
例如，我创建了一些随机矩阵，

```
 r=rand(8,5)

r =

0.8147    0.9575    0.4218    0.6787    0.2769
0.9058    0.9649    0.9157    0.7577    0.0462
0.1270    0.1576    0.7922    0.7431    0.0971
0.9134    0.9706    0.9595    0.3922    0.8235
0.6324    0.9572    0.6557    0.6555    0.6948
0.0975    0.4854    0.0357    0.1712    0.3171
0.2785    0.8003    0.8491    0.7060    0.9502
0.5469    0.1419    0.9340    0.0318    0.0344 
```

现在如果我使用这条线

```
plot(r(1,:)) 
```

我得到下图

![在此处输入图像描述](https://i.stack.imgur.com/JtzWg.jpg)

我的问题是，如果我使用循环

```
for i=1:8
   plot(r(i,:))
end 
```

它向我显示了一个行图，但它不做循环，所以我可以在 matlab 中逐步显示所有 8 个数字。例如，间隔可能是 10 秒，据我所知，这个函数`movie`也被使用`getframe`，或者我可以在循环中保存数字吗？
另外，我知道 imsave 或类似的东西。我认为最好保存在某个地方，所以如果我可以这样使用

```
imsave(plot(r(i,:)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T08:13:57.263

用于`getframe`捕获当前图形句柄的内容

```
fh = figure
% ...
for ii = 1:8
    figure( fh ); % focus on figure
    plot( r(ii,:) );
    frm = getframe( fh );
    % save as png image
    imwrite( frm.cdata, sprintf( 'current_frame_%02d.png', ii ) );
end 
```

PS
最好[不要`i`在Matlab中用作变量](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:15:37.327

我认为您的问题有多种解决方案：

*   使用该`pause`功能，它可以暂停，以便您可以查看您的身材。
*   以新图形打印每个图像。要实现这一点，只需放入`figure(i)`您的`for`循环中。
*   `print`或使用该功能保存图像。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:16:30.150

如果您的意思是要使用循环显示所有图，可以执行以下操作：

```
for ii=1:8
    figure();
    plot(r(ii,:));
end 
```

# c++ - 将内联汇编代码转换为 C++

> ID：16142284
> 
> 赞同：6
> 
> 时间：2013-04-22T08:11:00.630
> 
> 标签：c++, inline-assembly

我正在做一个 cpp 项目。项目需要迁移到 64 位。它包含一些不能在 x64 上编译的内联汇编代码。这是包含汇编代码的函数：

```
void ExternalFunctionCall::callFunction(ArgType resultType, void* resultBuffer)
{
#if defined(_NT_) || defined(__OS2__)

    // I386

    // just copy the args buffer to the stack (it's already layed out correctly)
    int* begin = m_argsBegin;
    int* ptr = m_argsEnd;
    int arr[1000], i=0;
    while (ptr > begin) {
        int val = *(--ptr);

        __asm push val
    }

    void* functionAddress = m_functionAddress;

    // call the function & handle the return value.  use __stdcall calling convention
    switch (resultType) {
    case voidType:
        __asm {
            call functionAddress
        }
        break;
    case pointerType:
    case int32Type:
        __asm {
            call functionAddress
            mov ebx, resultBuffer
            mov dword ptr [ebx],eax
        }
        break;
    case floatType:
        __asm {
            call functionAddress
            mov ebx, resultBuffer
            fstp dword ptr [ebx]
        }
        break;
    case doubleType:
        __asm {
            call functionAddress
            mov ebx, resultBuffer
            fstp qword ptr [ebx]
        }
        break;
    } 
```

我使用堆栈、数组来迁移这个“asm push val”，但没有用。虽然，它不会引发任何编译错误，但逻辑不起作用。

所以，我想问，我可以在 C++ 中使用什么来代替“__asm push val”。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T11:54:10.473

这个问题一般是无法解决的；那是因为评论

```
// call the function & handle the return value.  use __stdcall calling convention 
```

表示依赖*32 位调用约定*。

在 32 位 x86 中，`stdcall`意味着*所有*参数都以相反的顺序在堆栈上传递（即最后一个参数首先被压入。也就是说，如果`arg[0]`是 at `addr`then `arg[1]`，无论它是什么类型，都是 at `addr + sizeof(arg[0])`）。这就是示例中包含以下代码的原因：

```
// just copy the args buffer to the stack (it's already layed out correctly)
int* begin = m_argsBegin;
int* ptr = m_argsEnd;
int arr[1000], i=0;
while (ptr > begin) {
    int val = *(--ptr);

    __asm push val
} 
```

实际上可以工作 - 因为它根本不关心究竟是什么，参数是什么类型；所有相关的是它们中的每一个都在一个已知的内存位置，并且已知在内存中是连续的。如果你知道参数`N`是 at `addr`，那么你可以知道参数`N+1`是 at `addr + sizeof(arg[N])`。

这就是评论所说的“*它的布局已经正确*” - 不幸的是，这在 64 位模式下是*不正确的。*因此代码不能被“移植”；没有等价于端口。

至少部分基于寄存器的调用约定 - x64（64 位 x86）上的 Win64 的行为不同。对于那些，这取决于被调用函数采用什么类型的参数（在 Windows 中，您可以在通用寄存器中传递四个整数类型参数加上寄存器中的一些浮点类型参数`XMM`）。因此，您需要*更多*地了解您调用的函数的签名（原型），而不仅仅是“它需要`N`参数”，以便能够正确地从像上面这样的“anycall”类型包装器中编组参数。在 64 位模式下，对于您希望通过包装器调用的每个函数，您不仅需要知道总共有多少个 arg，还需要知道有多少在通用 reg 中，有多少在`XMM`reg 中，以及有多少在堆栈上。

“通过指针调用函数并将返回值复制到已知位置”部分是可移植的，可以用纯 C/C++ 表示。但是，如上所述，为此获得*参数*的部分并没有以任何直接的方式在 32 位和我所知道的任何 64 位 x86 调用约定之间*移植*（Win64/x64 和 UN*X约定都不允许预测位置和函数的所有参数的总堆栈内存使用量仅给出参数的数量和类型，但不考虑它们的顺序）。`stdcall``x86_64`

您究竟需要做*什么更多*地取决于上述调用者/用户，而`class ExternalFunctionCall`不是您展示的内联汇编的小样本。尤其有必要知道成员`m_argsBegin`和`m_argsEnd`是如何初始化的以及在哪里初始化的。您能否提供更多关于类的外观（所有成员变量/函数）的详细信息，以及其实际使用的示例？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:13:31.770

您需要解决几件事。（我在另一个问题上查找了您的代码）。据我了解，此代码是一个包装器，用于调用位于指定地址的非常抽象的函数，该函数期望堆栈中有一定数量的数据，并且可以返回基于 ArgType 的不同内容。

如果你想通过普通的 C 来包装它，你必须定义几个函数原型（基于返回值）然后在你的 switch 上使用，但是你必须解决另一个问题，这更棘手。

在 C 中移植这些东西的问题是你不知道你必须预先推入堆栈的参数数量（数据大小），所以你在定义原型时会遇到麻烦。

假设 func(char c) 肯定会推入堆栈 1 个字节（但由于数据对齐，也不总是正确的）.. 在您的情况下，您必须考虑具有与数据大小相等的参数集的解决方案你需要在堆栈上。乍一看，这不是您可以立即做的事情。

UPD。你可以用 func( char [] param ); 但它也有上面回答中解释的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-11T13:27:14.603

我意识到这是一个有点老的问题，但我偶然发现：[xbyak](https://github.com/herumi/xbyak)。

也许你在找什么？

# c# - 将整数列表移动到列表的前面

> ID：16142286
> 
> 赞同：4
> 
> 时间：2013-04-22T08:11:10.923
> 
> 标签：c#, linq, list, sorting

我有一个 Int64 列表（列表 A），需要移动到另一个列表（Int64）（列表 B）的前面。

列表 B 将始终包含列表 A 中的数字。

所以说列表 A 有以下数字：

```
1, 4, 5 
```

列表 B 可能看起来像这样：

```
1, 9, 5, 2, 10, 15, 4 
```

最终结果应如下所示：

```
1, 4, 5, 9, 2, 10, 15 
```

将数字从第一个列表移动到第二个列表前面的最简单方法是什么？

我曾想过从 List B 中删除所有 List A 数字，然后再次将它们添加到前面，但我似乎无法理解编程本身。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T08:16:51.070

哟可以尝试以下：

```
var result = listA.Concat(listB.Except(listA)).ToList();
// Gives: 1, 4, 5, 9, 2, 10, 15, 14 
```

`Except``listA`删除from的所有元素`listB`。`Concat`然后将它们添加到列表的前面。

# java - 添加 DocumentListener 以验证多个 JTextField

> ID：16142290
> 
> 赞同：1
> 
> 时间：2013-04-22T08:11:21.707
> 
> 标签：java, swing, validation, jtextfield, documentlistener

下面给出的代码对一个 JTextField 进行实时验证。在输入一些值以`txt1`启用保存按钮并删除值时，将保存按钮重置为禁用。我使用 Netbeans 作为 IDE。

我的 Swing 应用程序几乎没有 JTextField。我想要做的是，在检查多个 JTextFields 的有效性后启用保存按钮。如果任何文本字段为空，则`btnSave`必须禁用。

有人可以帮助我扩展这个程序来验证多个 JTextFields 吗？

```
public NewJFrame() {
        initComponents();
        btnSave.setEnabled(false);

        txt1.getDocument().addDocumentListener(new DocumentListener() {
              @Override
              public void changedUpdate(DocumentEvent e) {

              }

              @Override
              public void removeUpdate(DocumentEvent e) {
                    validate(e);
              }

              @Override
              public void insertUpdate(DocumentEvent e) {
                    validate(e);
              }

              public void validate(DocumentEvent e) {
                    String currText = "";
                    try {
                          Document doc = (Document) e.getDocument();
                          currText = doc.getText(0, doc.getLength());
                    } catch (BadLocationException e1) {
                          e1.printStackTrace();
                    }
                    if (currText.isEmpty()) {
                          Runnable doRun = new Runnable() {
                                @Override
                                public void run() {
                                      isValidFromTextField1 = false;
                                      validFormatterLimit();

                                }
                          };
                          SwingUtilities.invokeLater(doRun);
                    } else {
                          Runnable doRun = new Runnable() {
                                @Override
                                public void run() {
                                      isValidFromTextField1 = true;
                                      validFormatterLimit();

                                }
                          };
                          SwingUtilities.invokeLater(doRun);
                    }
              }
        });

        txt2.getDocument().addDocumentListener(new DocumentListener() {
              @Override
              public void changedUpdate(DocumentEvent e) {

              }

              @Override
              public void removeUpdate(DocumentEvent e) {
                    validate(e);
              }

              @Override
              public void insertUpdate(DocumentEvent e) {
                    validate(e);
              }

              public void validate(DocumentEvent e) {
                    String currText = "";
                    try {
                          Document doc = (Document) e.getDocument();
                          currText = doc.getText(0, doc.getLength());
                    } catch (BadLocationException e1) {
                          e1.printStackTrace();
                    }
                    if (currText.isEmpty()) {
                          Runnable doRun = new Runnable() {
                                @Override
                                public void run() {
                                      isValidFromTextField2 = false;
                                      validFormatterLimit();

                                }
                          };
                          SwingUtilities.invokeLater(doRun);
                    } else {
                          Runnable doRun = new Runnable() {
                                @Override
                                public void run() {
                                      isValidFromTextField2 = true;
                                      validFormatterLimit();

                                }
                          };
                          SwingUtilities.invokeLater(doRun);
                    }
              }
        });

  }

  public void validFormatterLimit() {

        if (isValidFromTextField1 == true && isValidFromTextField2 == true) {
              btnSave.setEnabled(true);
        } else {
              btnSave.setEnabled(false);
        }

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:23:34.173

*   必须拆分验证

*   每个事件都应该从每个 JComponents 调用

*   带有所需步骤的非常简单的示例

Swing Timer 延迟（3.5 秒）

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.awt.font.TextAttribute;
import java.math.*;
import java.text.*;
import java.util.Map;
import java.util.Vector;
import javax.swing.*;
import javax.swing.JFormattedTextField.AbstractFormatter;
import javax.swing.JFormattedTextField.AbstractFormatterFactory;
import javax.swing.event.*;
import javax.swing.text.InternationalFormatter;

public class FormatterLimit {

    private JFrame frame = new JFrame("AbstractTextField Test");
    private Map attributes = (new Font("Serif", Font.BOLD, 16)).getAttributes();
    private JFormattedTextField textField1 = new JFormattedTextField(new Float(710.01));
    private JFormattedTextField textField2 = new JFormattedTextField(new Float(150.01));
    private Vector<Boolean> comboBoxItems = new Vector<Boolean>();
    private JComboBox box = new JComboBox(comboBoxItems);
    private JButton btn = new JButton("Validations !!!");
    private Boolean isValidFromTextField1 = true;
    private Boolean isValidFromTextField2 = true;
    private Boolean isValidFromBox = true;
    private javax.swing.Timer timer = null;

    public FormatterLimit() {
        attributes.put(TextAttribute.STRIKETHROUGH, TextAttribute.STRIKETHROUGH_ON);
        textField1.setFormatterFactory(new AbstractFormatterFactory() {
            @Override
            public AbstractFormatter getFormatter(JFormattedTextField tf) {
                NumberFormat format = DecimalFormat.getInstance();
                format.setMinimumFractionDigits(2);
                format.setMaximumFractionDigits(2);
                format.setRoundingMode(RoundingMode.HALF_UP);
                InternationalFormatter formatter = new InternationalFormatter(format);
                formatter.setAllowsInvalid(false);
                formatter.setMinimum(0.0);
                formatter.setMaximum(1000.00);
                return formatter;
            }
        });
        textField1.getDocument().addDocumentListener(new DocumentListener() {
            @Override
            public void changedUpdate(DocumentEvent documentEvent) {
                printIt(documentEvent);
            }

            @Override
            public void insertUpdate(DocumentEvent documentEvent) {
                printIt(documentEvent);
            }

            @Override
            public void removeUpdate(DocumentEvent documentEvent) {
                printIt(documentEvent);
            }

            private void printIt(DocumentEvent documentEvent) {
                DocumentEvent.EventType type = documentEvent.getType();
                double t1a1 = (((Number) textField1.getValue()).doubleValue());
                if (t1a1 < 500) {
                    Runnable doRun = new Runnable() {
                        @Override
                        public void run() {
                            isValidFromTextField1 = false;
                            validFormatterLimit();
                            textField1.setFont(new Font(attributes));
                            textField1.setForeground(Color.red);
                        }
                    };
                    SwingUtilities.invokeLater(doRun);
                } else {
                    Runnable doRun = new Runnable() {
                        @Override
                        public void run() {
                            isValidFromTextField1 = true;
                            validFormatterLimit();
                            textField1.setFont(new Font("Serif", Font.BOLD, 16));
                            textField1.setForeground(Color.black);
                        }
                    };
                    SwingUtilities.invokeLater(doRun);
                }
            }
        });
        textField2.setFormatterFactory(new AbstractFormatterFactory() {
            @Override
            public AbstractFormatter getFormatter(JFormattedTextField tf) {
                NumberFormat format = DecimalFormat.getInstance();
                format.setMinimumFractionDigits(2);
                format.setMaximumFractionDigits(2);
                format.setRoundingMode(RoundingMode.HALF_UP);
                InternationalFormatter formatter = new InternationalFormatter(format);
                formatter.setAllowsInvalid(false);
                //formatter.setMinimum(0.0);
                //formatter.setMaximum(1000.00);
                return formatter;
            }
        });
        textField2.getDocument().addDocumentListener(new DocumentListener() {
            @Override
            public void changedUpdate(DocumentEvent documentEvent) {
                printIt(documentEvent);
            }

            @Override
            public void insertUpdate(DocumentEvent documentEvent) {
                printIt(documentEvent);
            }

            @Override
            public void removeUpdate(DocumentEvent documentEvent) {
                printIt(documentEvent);
            }

            private void printIt(DocumentEvent documentEvent) {
                DocumentEvent.EventType type = documentEvent.getType();
                double t1a1 = (((Number) textField2.getValue()).doubleValue());
                if (t1a1 > 1000) {
                    Runnable doRun = new Runnable() {
                        @Override
                        public void run() {
                            isValidFromTextField2 = false;
                            validFormatterLimit();
                            textField2.setFont(new Font(attributes));
                            textField2.setForeground(Color.red);
                        }
                    };
                    SwingUtilities.invokeLater(doRun);
                } else {
                    Runnable doRun = new Runnable() {
                        @Override
                        public void run() {
                            isValidFromTextField2 = true;
                            validFormatterLimit();
                            textField2.setFont(new Font("Serif", Font.BOLD, 16));
                            textField2.setForeground(Color.black);
                        }
                    };
                    SwingUtilities.invokeLater(doRun);
                }
            }
        });
        comboBoxItems.add(Boolean.TRUE);
        comboBoxItems.add(Boolean.FALSE);
        box = new JComboBox(comboBoxItems);
        box.addItemListener(new ItemListener() {
            @Override
            public void itemStateChanged(ItemEvent e) {
                if (e.getStateChange() == ItemEvent.SELECTED) {
                    if (e.getSource() == box) {
                        if (box.getSelectedItem() == (Boolean) true) {
                            isValidFromBox = true;
                            validFormatterLimit();
                        } else {
                            isValidFromBox = false;
                            validFormatterLimit();
                        }
                    }
                }
            }
        });
        frame.setLayout(new GridLayout(5, 0, 5, 5));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(textField1);
        frame.add(textField2);
        frame.add(box, BorderLayout.SOUTH);
        frame.add(new JLabel());
        frame.add(btn);
        frame.setVisible(true);
        frame.pack();
        start();
    }

    private void start() {
        timer = new javax.swing.Timer(3500, updateCol());
        timer.setRepeats(false);
        timer.start();
    }

    public Action updateCol() {
        return new AbstractAction("text load action") {
            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                textField1.setValue(300);
                textField2.setValue(8000);
                if (box.getSelectedItem() == (Boolean) false) {
                    box.setSelectedItem((Boolean) true);
                } else {
                    box.setSelectedItem((Boolean) false);
                }
            }
        };
    }

    public void validFormatterLimit(/*Boolean isValidFromTextField1, 
             * Boolean isValidFromTextField2 , Boolean isValidFromBox*/) {
        if (isValidFromTextField1) {
            if (isValidFromTextField2) {
                if (isValidFromBox) {
                    btn.setEnabled(true);
                } else {
                    btn.setEnabled(false);
                }
            } else {
                btn.setEnabled(false);
            }
        } else {
            btn.setEnabled(false);
        }
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                FormatterLimit comboBoxModel = new FormatterLimit();
            }
        });
    }
} 
```

# fortran - 在 FORTRAN 中定义文件的路径

> ID：16142292
> 
> 赞同：4
> 
> 时间：2013-04-22T08:11:29.783
> 
> 标签：fortran, fortran90, fortran77

在 bash 中，我可以编写如下所示的简单脚本；在我使用环境变量“fileplace”定义文件路径时读取文件夹中文件的内容

```
#!/bin/bash

fileplace="/home/vijay/data1/process-folder1/"

cat $file/file1.dat 
```

我想通过使用变量定义路径，在 FORTRAN 90 中实现与上面相同的效果。我想这样做是因为我的文件夹位置路径很长，并且我想避免在 FORTRAN 90 中对长行使用 & 和 + 符号。

我尝试编写如下简单的 FORTRAN 90 代码进行测试。

```
program test_read
implicit none

open (unit=10, status="old",file="/home/vijay/data1/process-folder1/file1.dat")
read(10,*) junk
write(*,*) junk 

stop
end 
```

如果我想避免在 FORTRAN 代码中使用长路径（/home/vijay/data1/process-folder1/）。有没有可能实现这一目标？如果是，任何人都可以帮助更正此 FORTRAN 代码吗？提前感谢任何帮助。

谢谢

维杰

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T08:27:02.400

Fortran 不是处理字符串的好语言，但这仍然是可能的。

您需要一个变量，您可以在其中存储路径。如果这个路径是一个常量并且在编译时已经知道，你可以简单地写

```
CHARACTER(*), PARAMETER :: fileplace = "/home/vijay/data1/process-folder1/" 
```

然后可以打开文件

```
OPEN(unit=10, status="old",file=fileplace//"file1.dat") 
```

如果要在执行期间更改路径，则必须在`fileplace`要使用时设置适当的长度并进行相应的调整：

```
CHARACTER(100) :: fileplace

WRITE(fileplace,*) "/home/vijay/data1/process-folder1/"
OPEN(unit=10, status="old", file=TRIM(ADJUSTL(fileplace))//"file1.dat") 
```

函数`ADJUSTL()`并将`TRIM()`字符串的内容向左移动以删除任何前导空格，然后剪切所有尾随空格。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-22T08:23:48.103

您可以像这样使用一些 Fortran：

```
fileplace = "/home/vijay/data1/process-folder1/"

open (unit=10, status="old",file=fileplace//"file1.dat") 
```

笔记：

1.  在 Fortran 中，字符串连接由运算符 表示`//`。
2.  您必须声明字符变量`fileplace`，例如

    `character(len=:), allocatable :: fileplace`

应该这样做。

Fortran 2003 引入了标准过程`GET_ENVIRONMENT_VARIABLE`，如果您的编译器实现它，您可能也会感兴趣。

# c# - IIS 中的日志请求时间

> ID：16142294
> 
> 赞同：1
> 
> 时间：2013-04-22T08:11:32.473
> 
> 标签：c#, asp.net, performance, iis, mvc-mini-profiler

我正在处理 ASP.Net 2.0 应用程序的性能问题。

在浏览器中加载一个页面最多需要 20 多秒。

我想知道问题出在哪里，即在浏览器（渲染）或服务器（处理）中。

**有没有办法在 IIS 7.5 中记录每个请求所花费的时间？**

我们是否需要 global.asax 或过滤器中的任何代码来执行此操作？[我从http://miniprofiler.com/](http://miniprofiler.com/)阅读了有关集成 MiniProfiler 的信息

不确定这是否适用于 ASP.Net 2.0 Web 应用程序。

有什么建议或帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:17:14.447

有几种方法可以分析您的代码。我建议你以下方法：

1.  **用于 asp 和 .Net 应用程序的CLR Profiler**（Microsoft 的应用程序，用于查看每个函数所花费的时间、分配内存等......）

    [如何使用 clr profiler](http://msdn.microsoft.com/en-us/library/ff650691.aspx)

    [从微软下载 Clr Profiler](http://download.microsoft.com/download/4/4/2/442d67c7-a1c1-4884-9715-803a7b485b82/clr%20profiler.exe)

2.  **Internet Explorer 调试模式**

    只需使用调试窗口。通过按“Internet Explorer”的“F12”，然后在“网络”中，单击“开始捕获”。您可以看到对函数/脚本的调用以及每次调用的时间。有例外。

# jdbc - 如何使用jdbc消息存储配置activemq而不在使用后删除消息？

> ID：16142295
> 
> 赞同：0
> 
> 时间：2013-04-22T08:11:34.443
> 
> 标签：jdbc, activemq

众所周知，消息发送成功后，消息会被activemq删除。我想永远在数据库中存储消息。如何配置activemq？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:50:59.723

嗯，最明显的方法是读入消息，处理它，然后将它移动到存档队列。

如果您真的想将消息存储在您正在读取的队列中（无论出于何种原因），您可以避免使用 a`QueueBrowser`而不是`receive`.

查看有关该主题的[Oracle JMS 示例](http://docs.oracle.com/cd/E19798-01/821-1841/bncfl/index.html)，它也应该适用于 ActiveMQ/JMS。

顺便提一下，另一种方法是在事务中读取它，然后在完成后回滚事务。不利的一面是，您将尝试一遍又一遍地阅读相同的消息，并且..

# c# - 我想要第二个列表中的项目，其中包含第一个列表中的所有项目

> ID：16142298
> 
> 赞同：3
> 
> 时间：2013-04-22T08:11:49.780
> 
> 标签：c#, c#-4.0

这是我的代码的样子

```
List<Entity> lists = CacheManager.GetAllEntity();
List<long> firstLists = lists .Select <Entity,long>(x=>x.ID).ToList<long>();
List<Entity2> secondLists = CacheManager.GetAllEntity2(); 
```

其中 Entity2 看起来像：

```
public class Entity2
{
    public long ID;     
    public long EntitytID;
} 
```

现在假设 firstsLists 包含`{1,2,3,4}`. 第二个包含

```
ID   EntitytID
1    1 
1    2
1    3
1    4
2    1
2    4
3    1
4    2
5    4 
```

那么我的输出应该给我

```
ID   EntitytID
1    1 
1    2
1    3
1    4 
```

因为项目 id 1 具有所有值`{1,2,3,4}`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:29:31.470

```
var itemsGroupedById = SecondList.GroupBy(item => item.id, item => item).ToList();
var listToReturn = new List<Entity2>();
foreach(var group in itemsGroupedById)
{
    var id = group.Key;
    var entityIdsInThisGroup = group.Select(items => items.EntityId).ToList();
    var intersection = entityIdsInThisGroup.Intersect(FirstList).ToList();
    if(intersection.Count == FirstList.Count)
    {
        listToReturn.Add(group);
    }
}
return listToReturn; 
```

这将执行以下操作 -

1.  按 ID 对第二个列表中的所有项目进行分组。
2.  在每个组中，它将与该组中的实体 ID 列表以及您的第一个组中的实体 ID 列表相交。
3.  如果交集包含您的第一个列表的所有元素，它将将该组添加到您将返回的列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:20:43.943

怎么样：

```
var results = secondLists
    .GroupBy(z => z.ID)
    .Where(z => firstLists.All(z2 => z.Select(z3 => z3.EntitytID).Contains(z2)))
    .SelectMany(z => z); 
```

# ios - 弗兰克设置给出错误，

> ID：16142300
> 
> 赞同：2
> 
> 时间：2013-04-22T08:12:04.797
> 
> 标签：ios, ruby, terminal, gem, cucumber

我正在尝试使用[这](http://blog.thepete.net/blog/2012/06/24/writing-your-first-frank-test/)组指令设置 frank-cucumber。

这样做之后：

`sudo gem install frank-cucumber`

我收到一条错误消息：

`/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems.rb:230:in activate: can't activate i18n (= 0.6.1, runtime) for ["activesupport-3.2.13", "xcodeproj-0.5.5", "frank-cucumber-1.1.8"], already activated i18n-0.6.4 for ["frank-cucumber-1.1.8"] (Gem::LoadError)`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T13:54:06.900

问题在于您的 gem 依赖项；activesupport 3.2.13 需要 i18n 版本 0.6.1，但 frank 已经加载了 i18n 版本 0.6.4。该`gem`命令可能在您安装 frank 时自动安装了 i18n-0.6.4（它看到 frank 需要任何版本的 i18n，所以它安装了最新版本）。

我尝试的第一个快速修复是`sudo gem uninstall i18n --version 0.6.4`. 这应该让您只安装 0.6.1 版，并且 frank 和 activesupport 都应该很高兴。但是，如果您要继续添加更多的 gem，可能会产生更多的依赖冲突，您应该考虑将[Bundler](http://gembundler.com/)集成到您的流程中。

# html - Firefox：无法选择嵌套在“a”标签中的输入字段的文本值

> ID：16142303
> 
> 赞同：0
> 
> 时间：2013-04-22T08:12:23.287
> 
> 标签：html, firefox

我有一个嵌套在“a”标签中的输入字段。可以在以下位置测试波纹管标记：http: [//codepen.io/anon/full/mtFIs](http://codepen.io/anon/full/mtFIs)。它在 Chrome 中按预期工作（输入字段文本是可选的），但在 Firefox 20.0 中没有。任何想法如何使文本可选？

```
<!DOCTYPE html>
<html>
<body>
  <a href="#">
    <input title="test" value="select me" type="text">
  </a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T08:16:49.403

`<a>`元素**可能不**包含`<input>`HTML 中的元素。

改为编写[有效](http://validator.w3.org/)的 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:16:50.803

从技术上讲，您尝试的是错误的，但如果您仍然想要，您可以使用带有或不带有或不带有的`onclick`事件`window.location``window.open``_blank`

[**演示**](http://jsfiddle.net/8yEJj/)

```
<span onclick="window.open('http://www.google.com', '_blank')">
    <input title="test" value="select me" type="text" />
</span> 
```

# css - 在 CSS 中组合 2 个气泡

> ID：16142306
> 
> 赞同：1
> 
> 时间：2013-04-22T08:12:25.593
> 
> 标签：css

我正在努力在 CSS [http://www.oinobareion.at/files/css_bubble.png中设计这个元素](http://www.oinobareion.at/files/css_bubble.png)

打一个泡泡没问题：

```
.bubble_yellow {
    border-radius: 50%;
    width: 100px;
    height: 100px; 
    border-radius: 100px;
    background: #facf35;
    border: solid 16px #fff0cf;
} 
```

但是我怎样才能以某种方式将较小的气泡“包含”到另一个气泡的形状中呢？CSS甚至可以吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:44:27.340

使用 CSS 伪元素`:before`和`:after`. 使用这些，您的标记将保持干净。

![例子](https://i.stack.imgur.com/bQsDT.png)

[演示 JSFiddle](http://jsfiddle.net/j7Chg/)

在这里，我`:after`在最低层对元素进行分层。这是上面的图层`box-shadow`。在底部有这个权利意味着相邻元素之间没有阴影重叠。它绝对定位为与元素本身对齐。

接下来是`:before`伪元素。这也是绝对定位的，并且具有黄色背景以提供黄色边框效果。

最后是元素本身，在演示中是橙色的。

所有层都`border-radius: 100%`必须使它们围绕元素可能的大小。

### 层分解：

![在此处输入图像描述](https://i.stack.imgur.com/6triK.png)

### HTML

```
<div id="blubbles">
    <div class="bubble" id="small"></div>
    <div class="bubble" id="large"></div>
</div> 
```

### CSS

```
#blubbles {
    position: relative;
    z-index: 5;
    width: 300px;
    height: 300px;
    padding: 10px;
}

.bubble {
    position: absolute;
    background: #f60;
    -webkit-border-radius: 100%;
    border-radius: 100%;
}

/* Yellow border */
.bubble:before {
    position: absolute;
    top: -10px;
    right: -10px;
    bottom: -10px;
    left: -10px;
    content: "";
    background: yellow;
    border-radius: 100%;
    z-index: -1;
}

/* Box shadow */
.bubble:after {
    position: absolute;
    top: -10px;
    right: -10px;
    bottom: -10px;
    left: -10px;
    content: "";
    z-index: -2;
    box-shadow: 0 0 20px #000;
    border-radius: 100%;
}

#small {
    width: 80px;
    height: 80px;
}
#large {
    width: 300px;
    height: 300px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T08:41:04.347

这是一个有效的解决方案。它结合了使用`filter: drop-shadow`在形状周围创建阴影和一些绝对定位来隐藏边框。

**HTML**

```
<div class="orbs">
    <div class="big"></div>
    <div class="small"></div>
    <div class="big-overlay"></div>
</div> 
```

**CSS**

```
.orbs
{
    position:relative;
    margin:50px;

    -webkit-filter: drop-shadow(0 0 20px black);
}

.orbs div
{
    border-radius:50%;
    background-color:red;
    border:5px solid orange;
    position:absolute;
}

.big
{
    z-index:1;
    width:400px;
    height:400px;
}

.small
{
    z-index:2;
    width:60px;
    height:60px;
    position:absolute;
    top:20px;
    left:20px;
}

.big-overlay
{
    z-index:3;
    width:400px;
    height:400px;
    top:5px;
    left:5px;
    background-color:red !important;
    border:0 !important;
} 
```

[JSFiddle 示例](http://jsfiddle.net/mBbVg/)。

请注意，`filter:`并非所有浏览器都支持 CSS 属性（目前）（[参考](http://caniuse.com/css-filters)），并且该演示仅适用于`-webkit-`启用的浏览器。

**== 更新 ==**

在查看[Bojangles](https://stackoverflow.com/users/383609/bojangles)的出色答案并将其与我的结合时，您可以仅使用一个 HTML 元素来创建此形状。

**HTML**

```
<div class="shape"></div> 
```

**CSS**

```
.shape
{
    margin:50px;
    width:400px;
    height:400px;
    border-radius:50%;
    z-index:1;

    background-color:red;
    border:5px solid orange;
    position:absolute;

    -webkit-filter: drop-shadow(0 0 20px black);
}

.shape:before
{
    content:'';
    display:block;
    z-index:2;
    width:60px;
    height:60px;
    position:absolute;
    top:20px;
    left:20px;

    border-radius:50%;
    background-color:red;
    border:5px solid orange;
    position:absolute;
}

.shape:after
{
    content:'';
    display:block;
    z-index:3;

    width:400px;
    height:400px;
    border-radius:50%;
    background-color:red !important;
    border:0 !important;
    position:absolute;
} 
```

[JSFiddle 示例](http://jsfiddle.net/wfCpH/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:19:16.593

嗯，我唯一能想到的就是使用 z-index 将较小的气泡放在第一个前面，但它会有整个边框，不像 boz 说的例子，我不认为它是否则可能

# wpf - 样式化 WPF TreeView 以显示按钮行？

> ID：16142307
> 
> 赞同：1
> 
> 时间：2013-04-22T08:12:30.373
> 
> 标签：wpf, treeview

我有一个关于使用 WPF TreeView 控件的问题。我有 n 个层次树节点，并希望在 TreeView 控件中显示它们，但具有某种“不寻常”的可视化效果。假设这些是我的节点：

```
Level1Item1
   Level2Item1
      Level3Item1
      Level3Item2
   Level2Item2
      Level3Item3
      Level3Item4
   Level2Item3
Level1Item2
   Level2Item4
   Level2Item5
   Level2Item6
Level1Item3
   Level2Item7
   Level2Item8
   Level2Item9 
```

现在，我不想像上面那样显示它们，而是将每个级别显示为一行按钮，其中只有所选父节点的子节点可见，例如：

```
[Level1Item1] Level1Item2 Level1Item3
Level2Item1 [Level2Item2] Level2Item3
Level3Item3 Level3Item4 
```

其中方括号中的项目是选定的节点。

标准的 wpf TreeView 控件是否可以通过某种方式设置样式，从而实现这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:33:09.933

WPF`TreeView`控件可以随意设置样式。最好的开始方法是在**Expression Blend**中打开您的项目，然后开始在 TreeView 控件模板中自定义标准项模板。它非常简单，但是您需要了解如何使用表达式混合才能通过适当的工具有效地完成它。

# jquery - 过渡后不会发生 jQuery 移动 pageinit

> ID：16142310
> 
> 赞同：0
> 
> 时间：2013-04-22T08:12:35.477
> 
> 标签：jquery, html, jquery-mobile

第 1 页：

```
<a class="ui-btn-right" data-role="actionsheet">Menu</a>
<div>
   <a data-role="button" href="page2.html" data-transition="slide">Page2</a> 
   <a data-role="button" href="page3.html" data-transition="slide">Page3</a> 
</div> 
```

打开时我需要执行一些脚本`Page2`。

第2页：

```
$(document).bind("pageinit", function () {
  // code
}); 
```

页面滑动，但其中的脚本`Page2`不会执行。

# java - 在 Android 中以编程方式解压缩文件

> ID：16142311
> 
> 赞同：7
> 
> 时间：2013-04-22T08:12:35.350
> 
> 标签：java, android, android-emulator, android-download-manager

我正在下载一个 zip 文件夹并保存在我的 Android 设备中的特定文件夹中。我的应用程序没有访问该文件夹，因为它已压缩。我想从服务器下载后解压缩文件夹并保存在特定文件夹中。

我的代码在这里：

```
public void DownloadDatabase(String DownloadUrl, String fileName) {
    try {
        File root = android.os.Environment.getExternalStorageDirectory();
        File dir = new File(root.getAbsolutePath() + "/timy/databases");
        if(dir.exists() == false){
             dir.mkdirs();  
        }

        URL url = new URL("http://myexample.com/android/timy.zip");
        File file = new File(dir,fileName);

        long startTime = System.currentTimeMillis();
        Log.d("DownloadManager" , "download url:" +url);
        Log.d("DownloadManager" , "download file name:" + fileName);

        URLConnection uconn = url.openConnection();
        uconn.setConnectTimeout(TIMEOUT_SOCKET);

        InputStream is = uconn.getInputStream();

        ZipInputStream zipinstream = new ZipInputStream(new BufferedInputStream(is));
        ZipEntry zipEntry;

        while((zipEntry = zipinstream.getNextEntry()) != null){
            String zipEntryName = zipEntry.getName();
            File file1 = new File(file + zipEntryName);
            if(file1.exists()){

            }else{
                if(zipEntry.isDirectory()){
                    file1.mkdirs();
                }
            }
        }

        BufferedInputStream bufferinstream = new BufferedInputStream(is);

        ByteArrayBuffer baf = new ByteArrayBuffer(5000);
        int current = 0;
        while((current = bufferinstream.read()) != -1){
            baf.append((byte) current);
        }

        FileOutputStream fos = new FileOutputStream( file);
        fos.write(baf.toByteArray());
        fos.flush();
        fos.close();
        Log.d("DownloadManager" , "download ready in" + ((System.currentTimeMillis() - startTime)/1000) + "sec");
    }
    catch(IOException e) {
        Log.d("DownloadManager" , "Error:" + e);
        e.printStackTrace();
    }

} 
```

我的 logcat 显示错误。只是在我的设备中创建了文件夹，并且没有下载解压缩的文件。在不使用 inputZipStream 方法的情况下，我的压缩文件夹正在下载并保存在 sdcard 中。当我想解压缩它时，它没有发生。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-09-10T07:18:16.293

本文介绍如何使用内置 Java API 编写一个实用程序类，用于在压缩的 zip 存档中提取文件和目录。

java.util.zip 包提供了以下用于从 ZIP 存档中提取文件和目录的类：

ZipInputStream：这是可用于读取 zip 文件和提取档案中的文件和目录（条目）的主要类。以下是此类的一些重要用法： - 通过其构造函数 ZipInputStream(FileInputStream) 读取 zip - 通过 getNextEntry() 方法读取文件和目录的条目 - 通过 read(byte) 方法读取当前条目的二进制数据 - 通过以下方式关闭当前条目方法 closeEntry() - 通过方法 close() 关闭 zip 文件

ZipEntry：该类表示 zip 文件中的条目。每个文件或目录都表示为一个 ZipEntry 对象。它的方法 getName() 返回一个字符串，表示文件/目录的路径。路径格式如下：folder_1/subfolder_1/subfolder_2/…/subfolder_n/file.ext

根据 ZipEntry 的路径，我们在解压 zip 文件时重新创建目录结构。

下面的类用于解压缩下载 zip 并提取文件并存储您想要的位置。

```
 public class UnzipUtil
  {
     private String zipFile;
     private String location;

  public UnzipUtil(String zipFile, String location)
  {
     this.zipFile = zipFile;
     this.location = location;

     dirChecker("");
  }

  public void unzip()
 {
   try
 {
      FileInputStream fin = new FileInputStream(zipFile);
      ZipInputStream zin = new ZipInputStream(fin);
      ZipEntry ze = null;
      while ((ze = zin.getNextEntry()) != null)
      {
       Log.v("Decompress", "Unzipping " + ze.getName());

if(ze.isDirectory())
{
 dirChecker(ze.getName());
}
else
{
 FileOutputStream fout = new FileOutputStream(location + ze.getName());     

 byte[] buffer = new byte[8192];
 int len;
 while ((len = zin.read(buffer)) != -1)
 {
  fout.write(buffer, 0, len);
 }
 fout.close();

 zin.closeEntry();

}

    }
      zin.close();
    }
     catch(Exception e)
     {
          Log.e("Decompress", "unzip", e);
     }

  }

   private void dirChecker(String dir)
   {
         File f = new File(location + dir);
         if(!f.isDirectory())
          {
            f.mkdirs();
          }
         }
    } 
```

> MainActivity.类：

```
 public class MainActivity extends Activity
        {
        private ProgressDialog mProgressDialog;

        String Url="http://hasmukh/hb.zip";
        String unzipLocation = Environment.getExternalStorageDirectory() + "/unzipFolder/";
        String StorezipFileLocation =Environment.getExternalStorageDirectory() +                       "/DownloadedZip"; 
       String DirectoryName=Environment.getExternalStorageDirectory() + "/unzipFolder/files/";

       @Override
       protected void onCreate(Bundle savedInstanceState)
       {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

           DownloadZipfile mew = new DownloadZipfile();
            mew.execute(url);

        }

        //-This is method is used for Download Zip file from server and store in Desire location.
        class DownloadZipfile extends AsyncTask<String, String, String>
         {
         String result ="";
          @Override
          protected void onPreExecute()
          {
            super.onPreExecute();
            mProgressDialog = new ProgressDialog(MainActivity.this);
            mProgressDialog.setMessage("Downloading...");
            mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            mProgressDialog.setCancelable(false);
            mProgressDialog.show();
            }

             @Override
             protected String doInBackground(String... aurl)
             {
              int count;

                    try
          {
URL url = new URL(aurl[0]);
URLConnection conexion = url.openConnection();
conexion.connect();
int lenghtOfFile = conexion.getContentLength();
InputStream input = new BufferedInputStream(url.openStream());

OutputStream output = new FileOutputStream(StorezipFileLocation);

byte data[] = new byte[1024];
long total = 0;

while ((count = input.read(data)) != -1)
{
 total += count;
 publishProgress(""+(int)((total*100)/lenghtOfFile));
 output.write(data, 0, count);
}
output.close();
input.close();
result = "true";

         } catch (Exception e) {

         result = "false";
         }
        return null;

       }
        protected void onProgressUpdate(String... progress)
        {
        Log.d("ANDRO_ASYNC",progress[0]);
        mProgressDialog.setProgress(Integer.parseInt(progress[0]));
        }

         @Override
         protected void onPostExecute(String unused)
         {
               mProgressDialog.dismiss();
               if(result.equalsIgnoreCase("true"))
         {
          try
             {
                unzip();
                   } catch (IOException e)
                   {
                 // TODO Auto-generated catch block
              e.printStackTrace();
              }
                 }
                     else
                   {

                   }
                       }
               }
          //This is the method for unzip file which is store your location. And unzip folder will                 store as per your desire location.

             public void unzip() throws IOException 
            {
            mProgressDialog = new ProgressDialog(MainActivity.this);
            mProgressDialog.setMessage("Please Wait...");
            mProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            mProgressDialog.setCancelable(false);
            mProgressDialog.show();
            new UnZipTask().execute(StorezipFileLocation, DirectoryName);
              }

          private class UnZipTask extends AsyncTask<String, Void, Boolean> 
          {
          @SuppressWarnings("rawtypes")
          @Override
          protected Boolean doInBackground(String... params) 
          {
             String filePath = params[0];
             String destinationPath = params[1];

               File archive = new File(filePath);
                try 
                 {
                 ZipFile zipfile = new ZipFile(archive);
                 for (Enumeration e = zipfile.entries(); e.hasMoreElements();) 
                 {
                         ZipEntry entry = (ZipEntry) e.nextElement();
                         unzipEntry(zipfile, entry, destinationPath);
                    }

         UnzipUtil d = new UnzipUtil(StorezipFileLocation, DirectoryName); 
         d.unzip();

            } 
    catch (Exception e) 
         {
           return false;
         }

          return true;
       }

           @Override
           protected void onPostExecute(Boolean result) 
           {
                mProgressDialog.dismiss(); 

             }

            private void unzipEntry(ZipFile zipfile, ZipEntry entry,String outputDir) throws IOException 
         {

                  if (entry.isDirectory()) 
        {
                createDir(new File(outputDir, entry.getName()));
                return;
          }

           File outputFile = new File(outputDir, entry.getName());
           if (!outputFile.getParentFile().exists())
           {
              createDir(outputFile.getParentFile());
           }

           // Log.v("", "Extracting: " + entry);
          BufferedInputStream inputStream = new BufferedInputStream(zipfile.getInputStream(entry));
          BufferedOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(outputFile));

       try 
        {

         }
       finally 
         {
              outputStream.flush();
              outputStream.close();
              inputStream.close();
          }
           }

             private void createDir(File dir) 
             {
                if (dir.exists()) 
              {
                   return;
                  }
                    if (!dir.mkdirs()) 
                      {
                        throw new RuntimeException("Can not create dir " + dir);
               }
               }}
                 }

            Note: Do not forgot to add below  permission in android Manifest.xml file.

          <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" ></uses-permission>
      <uses-permission android:name="android.permission.INTERNET" /> 
```

[阅读更多](http://androidroadies.blogspot.in/2013/09/unzipping-files-with-android.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-12T07:18:36.640

**解压功能**

```
public void unzip(String _zipFile, String _targetLocation) {

    //create target location folder if not exist 
    dirChecker(_targetLocatioan); 

    try { 
        FileInputStream fin = new FileInputStream(_zipFile);
        ZipInputStream zin = new ZipInputStream(fin);
        ZipEntry ze = null;
        while ((ze = zin.getNextEntry()) != null) {

            //create dir if required while unzipping 
            if (ze.isDirectory()) {
                dirChecker(ze.getName());
            } else { 
                FileOutputStream fout = new FileOutputStream(_targetLocation + ze.getName());
                for (int c = zin.read(); c != -1; c = zin.read()) {
                    fout.write(c);
                } 

                zin.closeEntry();
                fout.close();
            } 

        } 
        zin.close();
    } catch (Exception e) {
        System.out.println(e);
    } 
} 
```

**初始化**

```
ZipManager zipManager = new ZipManager();

zipManager.unzip(inputPath + inputFile, outputPath); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-12-01T11:20:46.493

对于 android，有一个第三方库可以免费使用。
该库将自行**下载您的文件**并自动将其**提取**到您想要的任何位置。
你可以在这里查看这个库。
[适用于 Android 的 ExtractionLib](https://github.com/ankitdubey021/ExtractionLib)

# sql-server-2012 - 如何在 SQL Server 2012 FileTable 下对 xml 中的字符进行特殊处理

> ID：16142312
> 
> 赞同：1
> 
> 时间：2013-04-22T08:12:37.813
> 
> 标签：sql-server-2012

我在 SQL Server 2012 中有示例 XML 文件`FileTable`。

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<Company>
         <Comp id="c101">
               <Name>Tony Jaw</Name>  
               <SplChar>$</SplChar>   
               <Place>US</Place>
         </Comp>
</Company> 
```

`FileTable`问题：我们可以通过执行以下查询来搜索“Tony”或“Jaw” 。我们会得到结果。

```
Select * 
From FileTable 
where FREETEXT(file_stream,'Tony') 
```

但是，我无法通过执行以下查询在 xml 文件中搜索特殊字符 ($)

```
Select * 
From FileTable 
where FREETEXT(file_stream,'$') 
```

请任何人解释......

实际上 FILE_STREAM 列包含 SQL Server 中的实际数据`FileTable`。所以我在 File_Stream 列中搜索特殊字符（! 或 @ 或 # 或 $ 或 % 或 ^ ）

修改后的查询：

```
Select * 
From FileTable 
where CONTAINS(file_stream,'"$"') 
```

输出：无结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:41:40.357

您必须分隔特殊字符

```
where file_stream CONTAINS(ColName,'"$"') 
```

请参阅 FTS 团队博客：http: [//blogs.msdn.com/b/sqlfts/archive/2009/12/09/gotchas-on-searching-for-at-tmm-etc.aspx](http://blogs.msdn.com/b/sqlfts/archive/2009/12/09/gotchas-on-searching-for-at-t-m-m-etc.aspx)

# c# - 从基础集合中获取专门的对象集合

> ID：16142313
> 
> 赞同：0
> 
> 时间：2013-04-22T08:12:38.350
> 
> 标签：c#, collections

假设我在 c# 中有一个动物集合，其中包含狗、猫等……我怎样才能获得基础集合中的所有狗项目，这样我就可以对所有狗项目执行其他操作，就好像它们在它们的拥有单独的集合，就好像它们在一个`List<Dog>`（并且对象也在基础集合中更新）？

对于代码答案，假设`List<Animals>`就足够了，因为我想尽可能避免[实现自己的通用集合](http://www.codeproject.com/Articles/21241/Implementing-C-Generic-Collections-using-ICollecti)。

编辑：我刚刚注意到这个问题与[c# 集合继承非常相似](https://stackoverflow.com/questions/8360516/c-sharp-collection-inheritance?rq=1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:29:43.057

关于其他海报，使用 OfType，你可以这样做；

```
List<Dog> dogList = new List<Dog>();

foreach(Animal a in animals.OfType<Dog>())
    {
      //Do stuff with your dogs here, for example;
      dogList.Add(a);
    } 
```

现在你已经把你所有的狗都放在了一个单独的列表中，或者你想对它们做什么。这些狗也将仍然存在于您的基础收藏中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:18:20.990

只需在基类中声明一个基方法，例如

```
public class Base {

    List<Animals> animals = .... 
    ...
    ....

    public IEnumerable<T> GetChildrenOfType<T>()  
        where T : Animals
    {
       return animals.OfType<T>();  // using System.Linq;
    }
} 
```

类似的东西。您应该自然地更改它以适应您的确切需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:18:39.387

```
List<Dog> dogList = new List<Dog>();
foreach(Animal a in animals) { //animals is your animal list
   if(a.GetType() == typeof(Dog)) { //check if the current Animal (a) is a dog
      dogList.Add(a as Dog); //add the dog to the dogList
   }
} 
```

# c# - linq to EF，如何使用“top”方法

> ID：16142315
> 
> 赞同：-1
> 
> 时间：2013-04-22T08:12:44.697
> 
> 标签：c#, sql, linq, entity-framework, linq-to-entities

我想使用 linq to Entities 将`top`记录按降序排列`Value1`。

我知道我可以这样写：

MyCollection.OrderByDescending(item => item.Value1).FirstOrDefault();

但是我该如何使用以下方法`Top`？

System.Data.Objects.ObjectQuery.Top（字符串，参数 System.Data.Objects.ObjectParameter[]）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T08:15:22.563

编辑：这个答案是在问题*专门*关于 LINQ to SQL 时写的。

`System.Data.Objects`据我所知，用于实体框架而不是 LINQ to SQL - 但是要在 LINQ to SQL 甚至 LINQ to Objects 中找到前 N 个值，您通常只需使用`Take`：

```
var query = db.Customers
              .OrderByDescending(c => c.Value1)
              .Take(10); 
```

（我*真的*鼓励你尝试使用比`Value1`虽然更有意义的名字......）

编辑：即使在实体框架中，我通常也会`Take`在 LINQ 查询中使用 - 它是表示前 N 个结果的“LINQ 方式”。如果您真的非常想使用`Top`，[文档](http://msdn.microsoft.com/en-us/library/bb155995.aspx)提供了示例 - 但您应该考虑*为什么*要使用`Top`而不是`Take`. （你没有给我们任何工作的背景。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:15:08.373

请查看 MSDN 以获取示例[http://msdn.microsoft.com/en-GB/library/bb155995.aspx](http://msdn.microsoft.com/en-GB/library/bb155995.aspx)

```
using (AdventureWorksEntities context =
    new AdventureWorksEntities())
{
    string queryString =
        @"SELECT VALUE product FROM AdventureWorksEntities.Products AS product";

    ObjectQuery<Product> productQuery1 =
        new ObjectQuery<Product>(queryString, context, MergeOption.NoTracking);

    ObjectQuery<Product> productQuery2 = productQuery1.Top("2");

    // Iterate through the collection of Product items. 
    foreach (Product result in productQuery2)
        Console.WriteLine("{0}", result.Name);
} 
```

或者，如果您只是`List<T>`考虑使用`Take()`扩展程序。

```
List<string> strs = new List<strs>() { "1", "2", "3", "4" };
var firstTwo = strs.Take(2); 
```

# perl - Perl 中的 GZip 压缩在 Windows 上的 gz-file 中维护文件路径

> ID：16142320
> 
> 赞同：0
> 
> 时间：2013-04-22T08:13:02.270
> 
> 标签：perl, gzip, cpan

我正在尝试通过电子邮件发送一些压缩文件。文件的打包和发送工作正常，但是当我在 Windows 机器上打开 .gz 文件时，存档包含每个文件的文件路径（在我的情况下为 /tmp/feed）。在 Linux 上，文件路径不在 .gz 文件中表示。

这是我打包文件的代码：

```
foreach my $input (glob($par{directory}.'*')) {
        my $output = "$input.gz";
        gzip $input => $output or die "GZIP failed: $GzipError";
} 
```

以前我试过

```
 gzip "<$par{directory}*.*>" => "<*.gz>" or die 'GZIP failed: '.$GzipError; 
```

但它有同样的结果。关于我做错了什么的任何提示？这个问题是否可能与通过电子邮件发送文件有关？

/解决了我使用 chdir($par{directory}) 并给了 gzip *。*作为球体。

## 谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:07:51.433

**IO::Compress::Gzip**中的“**名称**”选项允许您显式设置存储在 gzip 文件中的文件名。

 **像这样的东西会在存储到 gzip 文件之前从文件名中删除所有路径组件

```
foreach my $input (glob($par{directory}.'*')) {
    my $output = "$input.gz";
    my $name = $input ;
    $name =~ s#^.*/##;
    gzip $input => $output, Name => $name or die "GZIP failed: $GzipError";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T15:59:23.137

试试这个。我遇到过同样的问题。它对我有用。

```
my $curr_work_dir = getcwd;
my $file_dir = dirname($input_file);
my $input_filename = basename($input_file);

$output_file=$input_filename.$gzip_extn;

chdir $file_dir;
gzip $input_filename => $output_file or die "\n\nGzip compression failed for $input_file";
chdir $curr_work_dir; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:19:20.870

我假设您使用[http://perldoc.perl.org/IO/Compress/Gzip.html](http://perldoc.perl.org/IO/Compress/Gzip.html) - 根据文档，它还接受文件句柄作为输入。尝试直接使用文件句柄而不是文件。

如果这不起作用，您可以将文件读入标量变量并传递它。该解决方案有一个缺点，即它需要大量内存来存储大文件。

为什么使用文件句柄：根据调用流压缩器（gzip、bzip2、xz、...）的方式，它们要么包含文件名，要么不包含文件名。当您使用没有可用文件名的方法传递数据时，它不会被包含在内。

没有错误检查的测试示例：

```
use IO::Compress::Gzip qw(gzip);

open FILE,">","test";
print FILE "Test";
close FILE;

open $fn,"<","test";
gzip $fn => "testnn.gz";
gzip "test" => "testwn.gz"; 
```**

# c - 图像处理 - 亮度和对比度

> ID：16142323
> 
> 赞同：1
> 
> 时间：2013-04-22T08:13:13.830
> 
> 标签：c, colors, sdl, rgb

我正在尝试调整图像的亮度和对比度。我查看了关于将 RGB 转换为 HSL/HSV 然后调整和转换回来的[wiki 文章，但这会产生非常奇怪的输出。](http://en.wikipedia.org/wiki/HSL_and_HSV)所以现在我正在查看[其他示例](http://thecryptmag.com/Online/56/imgproc_5.html)，它似乎工作正常。唯一的问题是如何同时调整亮度和对比度？

所以说我有 100 100 100 的 RGB，然后我想将亮度调整为两倍，对比度为一半...... 2 和 0.5。我该怎么做呢？根据第二个链接，我会将 100 添加到所有 RGB 值的亮度，然后将这些新的 RGB 值插入到对比度公式中？

有人有想法么？

PS - 这是在 C 中使用 SDL 和原始 RGB 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:50:34.080

我认为您想在诸如 HSV 之类的空间中工作。特别是您对价值 (V) 感兴趣。有关从 RGB 转换为 HSV/HSL 的公式，请参阅此链接，反之亦然。该代码是javascript，但转换为C是基本的。 [http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c](http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c)

要考虑的另一件事是亮度 (Y) 和亮度 (Y') 我通常使用以下公式计算亮度。 [http://en.wikipedia.org/wiki/Luminance_%28relative%29](http://en.wikipedia.org/wiki/Luminance_%28relative%29)

```
Y = 0.2126 R + 0.7152 G + 0.0722 B 
```

我不确定最好使用什么：V、Y 或 Y'。Wiki 说“亮度或价值维度的定义不太明显：根据表示的目的和目标，有几种可能性。” [http://en.wikipedia.org/wiki/HSL_and_HSV#Lightness](http://en.wikipedia.org/wiki/HSL_and_HSV#Lightness)

我一直在使用 Y。Y 和 Y' 之间的差异是由于伽马校正。只要您正确考虑它，我认为您可以使用其中任何一个。但也许你可以简单地使用 V 作为对比度和亮度。

最后，要小心考虑伽马校正。

编辑：让我概述一下我认为该过程将如何进行。

1.  将颜色分量转换为浮点数
2.  如果颜色在 sRGB（非线性）中，则转换为 RGB（线性）
3.  将 RGB 转换为 HSV
4.  缩放值 (V) 以更改亮度。更改饱和度 (S) 以及对比度。
5.  转换回 RGB
6.  如有必要，将 RGB 转换为 sRGB。
7.  将颜色分量转换回范围 [0,255]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T23:40:14.850

不确定这是否回答了您的问题，但您使用的是 8 位彩色图片，通常使用 *n*位颜色的调色板或将 8 位分成 3 个红色、3 个绿色和 2 个蓝色。

假设您正在使用调色板，您可能必须调用[SDL_SetPalette](http://www.libsdl.org/docs/html/sdlsetpalette.html)，因为您的操作会改变颜色。

如果您要拆分为 3/3/2 位，请记住，这意味着红色只有 8 个离散值，绿色只有 8 个离散值，蓝色只有 4 个离散值。在这种情况下，颜色的变化可能看起来很奇怪。

如果只有源是 8 位，我建议在加载后将其转换为 24/32 位。

# python - 多处理包错误

> ID：16142325
> 
> 赞同：2
> 
> 时间：2013-04-22T08:13:33.580
> 
> 标签：python, multiprocessing, pygtk

我正在尝试在 PyGtk 应用程序中使用多处理模块来生成大量报告。该应用程序在**windows**上运行。

以下是代码片段，

```
 p1 = Process(target=self.load_table_1, args=(session))
    p1.start()

   Note: load_table_1 is a select query using SqlAlchemy 
```

但它会引发错误在命令提示符下我可以看到一条错误消息，

laucnher.exe：错误：没有这样的选项：--processing-fork

在日志文件上更清晰的回溯，

```
 File "d:\report_actual\extractors\inputs.py", line 255, in task_function

 File "d:\multiprocessing-2.6.2.1-py2.5-win32.egg\multiprocessing\process.py", line 109, in start

 File "d:\multiprocessing-2.6.2.1-py2.5-win32.egg\multiprocessing\forking.py", line 247, in __init__ 
```

exceptions.IOError：[Errno 22] 无效参数

我认为 multiprocessing 模块在 windows 下实现了 fork 的替代方案。

如果我在这里遗漏任何东西，请告诉我。

# gwt - GWT：某些功能在国际化中停止工作

> ID：16142330
> 
> 赞同：0
> 
> 时间：2013-04-22T08:13:41.460
> 
> 标签：gwt, internationalization

我有一个小型 GWT 应用程序，它具有国际化功能，如果我在默认模式下运行，一切都运行良好，但如果我将某些语言更改为法语等。

一些功能停止工作..没有得到任何错误..但事情没有按预期工作，因为它们是默认语言

我尝试调试应用程序，但它不会在任何断点处停止，而如果我使用默认语言进行调试，它会完美地在断点处停止..

任何想法是什么原因。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:59:26.800

如果有人遇到同样的问题并偶然发现这个问题，请简要总结一下评论：

该问题是由于更改语言时退出开发模式引起的，因为生成的 URL 看起来像`http://127.0.0.1:8888/?locale=fr`而不是`http://127.0.0.1:8888/?gwt.codesvr=127.0.0.1:9997&locale=fr`（注意 gwt.codesvr 参数，这是开发模式的重要组成部分）

# javascript - 如何应用可下载文件的样式

> ID：16142331
> 
> 赞同：0
> 
> 时间：2013-04-22T08:13:46.727
> 
> 标签：javascript, .net, css

我的应用程序中有一个网格和一个按钮。当我们点击按钮时，网格被导出（.xls）。但我的问题是，导出的文件中的数据没有对齐。所以我想应用一些样式，比如对齐：左。如何为该文件应用样式？

提前致谢。

# android - 不幸的是，模拟器显示，myapp 已停止

> ID：16142338
> 
> 赞同：0
> 
> 时间：2013-04-22T08:14:06.247
> 
> 标签：android, android-emulator, android-logcat

当我运行我的应用程序模拟器时，只会说“不幸的是，myapp 已停止”。logcat 抛出错误。我的 logcat 错误

```
04-21 15:24:13.661: I/Process(25846): Sending signal. PID: 25846 SIG: 9
04-21 15:24:34.572: D/AndroidRuntime(25911): Shutting down VM
04-21 15:24:34.572: W/dalvikvm(25911): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-21 15:24:34.592: E/AndroidRuntime(25911): FATAL EXCEPTION: main
04-21 15:24:34.592: E/AndroidRuntime(25911): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.loga/com.example.loga.MainActivity}: java.lang.NullPointerException
04-21 15:24:34.592: E/AndroidRuntime(25911):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-21 15:24:34.592: E/AndroidRuntime(25911):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-21 15:24:34.592: E/AndroidRuntime(25911):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-21 15:24:34.592: E/AndroidRuntime(25911):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-21 15:24:34.592: E/AndroidRuntime(25911):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-21 15:24:34.592: E/AndroidRuntime(25911):    at android.os.Looper.loop(Looper.java:137)
04-21 15:24:34.592: E/AndroidRuntime(25911):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-21 15:24:34.592: E/AndroidRuntime(25911):    at java.lang.reflect.Method.invokeNative(Native Method)
04-21 15:24:34.592: E/AndroidRuntime(25911):    at java.lang.reflect.Method.invoke(Method.java:511)
04-21 15:24:34.592: E/AndroidRuntime(25911):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-21 15:24:34.592: E/AndroidRuntime(25911):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-21 15:24:34.592: E/AndroidRuntime(25911):    at dalvik.system.NativeStart.main(Native Method)
04-21 15:24:34.592: E/AndroidRuntime(25911): Caused by: java.lang.NullPointerException
04-21 15:24:34.592: E/AndroidRuntime(25911):    at com.example.loga.MainActivity.onCreate(MainActivity.java:22)
04-21 15:24:34.592: E/AndroidRuntime(25911):    at android.app.Activity.performCreate(Activity.java:5104)
04-21 15:24:34.592: E/AndroidRuntime(25911):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-21 15:24:34.592: E/AndroidRuntime(25911):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-21 15:24:34.592: E/AndroidRuntime(25911):    ... 11 more
04-21 15:24:37.425: I/Process(25911): Sending signal. PID: 25911 SIG: 9
04-21 15:24:42.581: D/AndroidRuntime(25927): Shutting down VM
04-21 15:24:42.581: W/dalvikvm(25927): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-21 15:24:42.602: E/AndroidRuntime(25927): FATAL EXCEPTION: main
04-21 15:24:42.602: E/AndroidRuntime(25927): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.loga/com.example.loga.MainActivity}: java.lang.NullPointerException
04-21 15:24:42.602: E/AndroidRuntime(25927):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-21 15:24:42.602: E/AndroidRuntime(25927):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-21 15:24:42.602: E/AndroidRuntime(25927):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-21 15:24:42.602: E/AndroidRuntime(25927):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-21 15:24:42.602: E/AndroidRuntime(25927):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-21 15:24:42.602: E/AndroidRuntime(25927):    at android.os.Looper.loop(Looper.java:137)
04-21 15:24:42.602: E/AndroidRuntime(25927):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-21 15:24:42.602: E/AndroidRuntime(25927):    at java.lang.reflect.Method.invokeNative(Native Method)
04-21 15:24:42.602: E/AndroidRuntime(25927):    at java.lang.reflect.Method.invoke(Method.java:511)
04-21 15:24:42.602: E/AndroidRuntime(25927):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-21 15:24:42.602: E/AndroidRuntime(25927):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-21 15:24:42.602: E/AndroidRuntime(25927):    at dalvik.system.NativeStart.main(Native Method)
04-21 15:24:42.602: E/AndroidRuntime(25927): Caused by: java.lang.NullPointerException
04-21 15:24:42.602: E/AndroidRuntime(25927):    at com.example.loga.MainActivity.onCreate(MainActivity.java:22)
04-21 15:24:42.602: E/AndroidRuntime(25927):    at android.app.Activity.performCreate(Activity.java:5104)
04-21 15:24:42.602: E/AndroidRuntime(25927):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-21 15:24:42.602: E/AndroidRuntime(25927):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-21 15:24:42.602: E/AndroidRuntime(25927):    ... 11 more
04-21 15:24:46.051: I/Process(25927): Sending signal. PID: 25927 SIG: 9
04-21 15:28:28.302: E/Trace(26031): error opening trace file: No such file or directory (2)
04-21 15:28:29.192: D/AndroidRuntime(26031): Shutting down VM
04-21 15:28:29.192: W/dalvikvm(26031): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-21 15:28:29.202: E/AndroidRuntime(26031): FATAL EXCEPTION: main
04-21 15:28:29.202: E/AndroidRuntime(26031): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.loga/com.example.loga.MainActivity}: java.lang.NullPointerException
04-21 15:28:29.202: E/AndroidRuntime(26031):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-21 15:28:29.202: E/AndroidRuntime(26031):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-21 15:28:29.202: E/AndroidRuntime(26031):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-21 15:28:29.202: E/AndroidRuntime(26031):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-21 15:28:29.202: E/AndroidRuntime(26031):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-21 15:28:29.202: E/AndroidRuntime(26031):    at android.os.Looper.loop(Looper.java:137)
04-21 15:28:29.202: E/AndroidRuntime(26031):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-21 15:28:29.202: E/AndroidRuntime(26031):    at java.lang.reflect.Method.invokeNative(Native Method)
04-21 15:28:29.202: E/AndroidRuntime(26031):    at java.lang.reflect.Method.invoke(Method.java:511)
04-21 15:28:29.202: E/AndroidRuntime(26031):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-21 15:28:29.202: E/AndroidRuntime(26031):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-21 15:28:29.202: E/AndroidRuntime(26031):    at dalvik.system.NativeStart.main(Native Method)
04-21 15:28:29.202: E/AndroidRuntime(26031): Caused by: java.lang.NullPointerException
04-21 15:28:29.202: E/AndroidRuntime(26031):    at com.example.loga.MainActivity.onCreate(MainActivity.java:22)
04-21 15:28:29.202: E/AndroidRuntime(26031):    at android.app.Activity.performCreate(Activity.java:5104)
04-21 15:28:29.202: E/AndroidRuntime(26031):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-21 15:28:29.202: E/AndroidRuntime(26031):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-21 15:28:29.202: E/AndroidRuntime(26031):    ... 11 more 
```

我不知道实际上哪里出错了，但编码没有错误。我的 .java 文件是

```
package com.example.loga;

import android.os.Bundle;

import android.app.Activity;
import android.app.AlertDialog;

import android.view.Menu;
import android.widget.Button;

import java.util.ArrayList;
import java.util.List;
import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;

import android.app.ProgressDialog;

import android.os.AsyncTask;
import android.util.Log;
import android.view.View;
import android.widget.EditText;

public class Login extends Activity {

     private ProgressDialog pDialog;

     JSONParser jsonParser = new JSONParser();
        EditText inputpw;

        private static String url_logincheck = "http://10.0.2.2/android_connect/logincheck.php";
        // JSON Node names
        private static final String TAG_SUCCESS = "success";

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);
         // Edit Text
        inputpw = (EditText) findViewById(R.id.editText1);

        Button button1 = (Button) findViewById(R.id.button1);
        button1.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View view) {
                // creating new product in background thread
                new check().execute();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.login, menu);
        return true;
    }
    class check extends AsyncTask<String, String,String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(Login.this);
            pDialog.setMessage("Validating....");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Creating product
         * */
        protected String doInBackground(String... args) {
            String pw = inputpw.getText().toString();

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("pw",pw));

            // getting JSON Object
            // Note that create product url accepts POST method
            JSONObject json = jsonParser.makeHttpRequest(url_logincheck,
                    "POST", params);
            // check log cat for response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    AlertDialog alertDialog;
                    alertDialog = new AlertDialog.Builder(Login.this).create();
                    alertDialog.setTitle("password verification..");
                    alertDialog.setMessage("success.!!");
                    alertDialog.show();
                    finish();
                } else {
                    // failed to create product
                }
             }
            catch (Exception e) {
                e.printStackTrace();
            }

            return null;

        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();
        }

    }

} 
```

我的activity_login.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".Login" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="31dp"
        android:text="@string/password"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="136dp"
        android:text="@string/click" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignRight="@+id/textView1"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="36dp"
        android:ems="10"
        android:inputType="textPassword" />

</RelativeLayout> 
```

我的 MainActivity.java 文件是：

```
package com.example.loga;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.content.Context;
import android.content.Intent;
public class MainActivity extends Activity implements View.OnClickListener {
    Button button1,button2,button3,button4;
    final Context context = this;
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         button1 = (Button) findViewById(R.id.button1);
         button2 = (Button) findViewById(R.id.button2);
         button3=  (Button) findViewById(R.id.button3);
         button4=  (Button) findViewById(R.id.button4);
         button1.setOnClickListener((OnClickListener) this);
         button2.setOnClickListener((OnClickListener) this);
         button3.setOnClickListener((OnClickListener) this);
         button4.setOnClickListener((OnClickListener) this);

    }

    public void onClick(View v) {
           switch(v.getId()) {
               case R.id.button1:
               // do stuff
                // TODO Auto-generated method stub

                button1 = (Button) findViewById(R.id.button1);

                button1.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View view) {

                        Intent intent = new Intent(context, MainActivity1.class);
                                       startActivity(intent);   
                    }
                });
               break;
               case R.id.button2:
               // do stuff
                // TODO Auto-generated method stub

                button2= (Button) findViewById(R.id.button2);

                button2.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View view) {

                        Intent intent = new Intent(context, Login.class);
                                       startActivity(intent);   
                    }
                });
               break;
               case R.id.button3:
                   button3= (Button) findViewById(R.id.button3);

                    button3.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View view) {

                            Intent intent = new Intent(context, Recovery.class);
                                           startActivity(intent);   
                        }
                    });
                   break;

               case R.id.button4:

                    button4= (Button) findViewById(R.id.button4);

                    button4.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View view) {
                          finish();
                           System.exit(0);

                        }
                    });
                 }  
       }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

编码有什么问题？帮助我。谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:53:46.540

检查您是否设置了正确的布局

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);  //<<------ HERE 
```

因为我可以看到你`onCreateOptionsMenu`和`onCreate`你设置了两个不同的命名布局，如果它是错误的......

`onCreate`所以设置具有按钮ID的布局`button1`

**编辑**

如果有帮助，请`MainActivity`更改此

```
 @Override
public void onClick(View v) {
           switch(v.getId()) {
               case R.id.button1:
              {

                        Intent intent = new Intent(context, MainActivity1.class);
                                       startActivity(intent);   

            }
               break;
               case R.id.button2:
               {

                        Intent intent = new Intent(context, Login.class);
                                       startActivity(intent);   
                    }

               break;
               case R.id.button3:
                   {

                            Intent intent = new Intent(context, Recovery.class);
                                           startActivity(intent);   
                        }

                   break;

               case R.id.button4:

                   {

                          finish();
                           System.exit(0);

                        }

                 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:50:12.773

在我看来，你的 Layout 有问题，没有命名元素`R.id.button1`，`R.layout.activity_login`所以当你打电话时，`button1.setOnClickListener`你会得到 NulPointerException 。

# java - 双数组加法中的双数组列表

> ID：16142340
> 
> 赞同：0
> 
> 时间：2013-04-22T08:14:22.790
> 
> 标签：java, arraylist, escaping

我定义了一个 ArrayList 如下；

```
static ArrayList<Double[]> aryList1 = new ArrayList<Double[]>(); 
```

我希望将其添加到数组列表中

```
double[] a = new double[]{0.1,0.2};
arylist1.add(a); 
```

但它在

```
arylist1.add(a) 
```

...add 不能应用于双 ArrayList。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T08:16:14.530

尝试用大写 D 表示双倍，例如`Double[] a = new Double[]{0.1,0.2};`

您正在尝试将`double`一个*原始*类型的小写字母添加到您定义为`Double`包装*器*对象的数组列表中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T08:18:02.063

**[Double](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html)**是一个*类*，而**[double](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)**是一个*原始*的。

你有`static ArrayList<Double[]> aryList1 = new ArrayList<Double[]>();`哪个有`Double[]`和没有`double[]`。所以你应该：

```
Double[] a = new Double[]{0.1,0.2}; 
```

或者，您可以将*声明*更改为：

```
static ArrayList<double[]> aryList1 = new ArrayList<double[]>(); 
```

您遇到的另一个错误：

`arylist1.add(a)`应该是`aryList1.add(a)`（Java 区分大小写）。

# cmis - 如何使用 DotCMIS/OpenCMIS 修改 CMIS 文档的属性

> ID：16142353
> 
> 赞同：0
> 
> 时间：2013-04-22T08:15:12.800
> 
> 标签：cmis, opencmis, dotcmis

假设我有一个文档`doc`，我想将其`barcode`元数据更新为`"01234"`.

该文档可能具有现有的其他属性，我不想丢失它们。
如果`doc`已经有`barcode`，它将被覆盖。

如何使用 DotCMIS/OpenCMIS 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:22:52.133

在 CMIS 中，默认情况下更新属性将覆盖现有值，并且默认情况下保留不随 updateProperties 消息一起发送的属性。也就是说，协议语义已经保证了您的两个要求。

代码方面，请查看OpenCMIS的`Updating properties` [代码示例，它适用于您的案例：](http://chemistry.apache.org/java/examples/example-create-update.html)

```
CmisObject cmisobject = ....
Map<String, Object> updateProperties = new HashMap<String, Object>();
updateProperties.put("acme:barcode", "new value"); // single-value property
cmisobject.updateProperties(updateProperties); 
```

对于 DotCMIS，[示例页面](http://chemistry.apache.org/dotnet/getting-started-with-dotcmis.html)提供了另一个有用的片段，这是用于映射您的用例的修改版本：

```
ICmisObject cmisObject = ...

IDictionary<string, object> properties = new Dictionary<string, object>();
properties["acme:barcode"] = "new value";
IObjectId newId = cmisObject.UpdateProperties(properties);

if (newId.Id == cmisObject.Id) 
{
    // the repository updated this object - refresh the object
    cmisObject.Refresh();
}
else
{
    // the repository created a new version - fetch the new version
    cmisObject = session.GetObject(newId);
} 
```

# matlab - 如何在条件下将矩阵乘以MATLAB中的标量值

> ID：16142360
> 
> 赞同：1
> 
> 时间：2013-04-22T08:15:25.997
> 
> 标签：matlab, matrix, conditional-statements, multiplication, scalar

在 matlab 中，我有一个随机数在 0 到 100 之间的矩阵。所有低于 10 的数字都应乘以 2。

testmatrix = [1,2;11,90] 应该变成 [2,4;11,90]

对矩阵执行条件操作很容易，但是如何引用右侧的当前元素呢？

测试矩阵（测试矩阵<10）=???*2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:19:54.650

与左侧完全相同的方式：

```
testmatrix(testmatrix<10) = testmatrix(testmatrix<10)*2 
```

或者正如[Amro](https://stackoverflow.com/users/97160/amro)指出的那样，您可以通过创建可重用的逻辑索引掩码来节省计算量：

```
idx = testmatrix < 10
testmatrix(idx) = testmatrix(idx)*2 
```

第二种方法在条件更复杂或条件重复多次或速度是主要问题的情况下特别有用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T08:19:59.820

你需要的是：

```
testmatrix(testmatrix < 10) = testmatrix(testmatrix < 10)*2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:20:20.383

这个怎么样：

> > A = 兰迪（100,1000,1）；
> > 
> > 条件 = A <= 10;
> > 
> > 测试 = A(cond).*2

# twitter - twitter4j - 推文和状态之间的关系是什么？

> ID：16142364
> 
> 赞同：0
> 
> 时间：2013-04-22T08:15:40.137
> 
> 标签：twitter, twitter4j

这两者之间有什么关系？有没有办法从另一个中推断出一个？

上下文：为什么可以只搜索“推文”而只收听“状态”流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:09:01.643

它们在理论上是一样的。我不确定您在 Twitter4j api 中在哪里看到搜索推文，我只看到状态。

我认为这里的概念是动作是推文，而你推文的对象是状态。

人们已经客观化了推文，因此通常人们会说他们“发了推文”，但实际上他们应该说他们“发了推文”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T06:20:19.493

在 twitter4j *2.25*中有一个“Tweet”类

```
/** A data class representing a Tweet in the search response
Author(s):
Yusuke Yamamoto - yusuke at mac.com **/

public interface Tweet extends Comparable<Tweet>, EntitySupport,
        java.io.Serializable {
    ...
} 
```

而 StatusListener 提供对“状态”类实例的访问

```
public interface StatusListener extends StreamListener {
    void onStatus(Status status);
    ...
} 
```

它们基本相同，但不能互操作。在 twitter4j 3.0.3 中没有“Tweet”类

# ios - 延迟后执行选择器只调用一次

> ID：16142366
> 
> 赞同：4
> 
> 时间：2013-04-22T08:15:51.740
> 
> 标签：ios, objective-c, xcode, viewdidload, performselector

我有一个应用程序，我需要每隔 1 或 2 秒调用一次实例方法。现在如果我放置

```
[self performSelector:@selector(getMatchListWS) withObject:nil afterDelay:1.0]; 
```

在 viewDidLoad: 或 viewWillAppear: 中，方法 getMatchListWS 仅在视图出现或加载时调用一次。但是即使用户在该视图上而视图没有消失或卸载，我也需要连续调用该方法。那么，什么是正确的位置或委托方法，我可以在其中添加 performSelector 方法，以便每秒调用一次，而不必一次又一次地卸载视图。我需要在后台或主线程上做些什么吗？提前致谢！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T08:17:13.060

它会是这样的：

```
[NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(getMatchListWS:) userInfo:nil repeats:YES]; 
```

把它放在你的 中`viewDidLoad`，这样你就不会遇到多个事件被触发的问题。如果您将它放在`viewWillAppear`or上`viewDidAppear`，并且您正在推送或显示 modalViewController，则可能会发生这种情况。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-22T08:27:41.207

Jacky Boy 的回答会让你完成工作。另一种解决方案（如果您热衷于使用`performSelector`方法）是在您的方法定义中添加相同的行，如下所示

```
-(void) getMatchListWS {
//Get Match List here

[self performSelector:@selector(getMatchListWS) withObject:nil afterDelay:1.0];
} 
```

注意：当视图加载时，您仍然应该调用一次该方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T08:27:50.857

您只是在延迟通话。这样做是在延迟 1 秒后调用您的方法。您需要做的是设置计时器以在特定时间间隔后重复调用您的方法。

```
//create an instance of NSTimer class
NSTimer *timer;

//set the timer to perform selector (getMatchListWS:) repeatedly
timer= [NSTimer timerWithTimeInterval:1.0
                                        target:self
                                        selector:@selector(getMatchListWS:)
                                        userInfo:nil
                                        repeats:YES]; 
```

# configuration - 如何配置 TFS 以在机器启动时获取指定分支的最新版本？

> ID：16142370
> 
> 赞同：0
> 
> 时间：2013-04-22T08:15:57.673
> 
> 标签：configuration

每天开始工作之前为团队定义的活动是从 TFS 获取最新代码。然而，它现在是手动的。我们想让它自动化。我们如何配置 TFS 以在机器启动时获取指定文件夹或分支的最新代码？

**根据响应进行编辑：**
为什么需要此配置？
大多数时候，开发人员忘记获取最新代码和丢失的更新。我想通过使其成为自动任务而不是手动来减轻开发人员的负担。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:00:51.620

首先，这听起来像是一个有问题的解决方案。这样做有很多问题：

*   存储库中的错误代码将破坏每个人的本地工作空间
*   如果检查了与本地更改冲突的代码，则开发人员被迫解决它们
*   如果开发人员正在进行重构，则在获取最新版本时，他被迫寻找代码中的旧用法（这不会导致冲突，但会导致编译/运行时错误）

可能还有更多问题，这就是为什么要让开发人员有意识地决定获取最新版本的原因。

您可以考虑其他方法，例如：

*   需要获取最新和构建的签到政策
*   持续集成构建，这将显示是否已签入错误代码
*   门控签入，这将使得无法签入未编译/测试的代码

但。如果您真的想自动获取最新信息，您应该能够设置运行命令行的计划任务：

```
tf get /recursive "WORKSPACEPATH" 
```

# html - 当前 AT 的 ARIA 标志性角色的支持情况如何？

> ID：16142372
> 
> 赞同：1
> 
> 时间：2013-04-22T08:16:08.723
> 
> 标签：html, accessibility, wai-aria

为了使当前 AT 支持 ARIA 里程碑角色，是否仍然必须添加网页上的`role="navigation"`所有元素？`nav`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T01:40:37.690

虽然它在 IE9+ 中得到 JAWS 的良好支持，但在当前版本的 Safari旁白中，该`<nav>`元素*没有获得隐含的地标角色。*它也与 NVDA 和 Firefox 不一致，与 NVDA 和 IE9 完全不存在。`role='navigation'`然而，屏幕阅读器[几乎普遍支持。](http://www.html5accessibility.com/tests/landmarks.html)

就目前而言，如果您希望`<nav>`元素可作为跨用户代理可靠地导航，请**使用`<nav role='navigation'>`**.

# multithreading - Perl 线程共享二维数组

> ID：16142374
> 
> 赞同：1
> 
> 时间：2013-04-22T08:16:21.150
> 
> 标签：multithreading, perl

如何使二维数组共享，所以我可以在线程中更改它，我会看到它在另一个线程中更改？谢谢

```
 our @Cells=(); 
    share(@Cells); 
    for $Row_Of_Cell (0..$Number_Of_Rows-1) { 
            $Cells[$Row_Of_Cell]=&share([]); 
            for $Column_Of_Cell (0..$Number_Of_Columns-1) {
                    $Cells[$Row_Of_Cell][$Column_Of_Cell]=0; 
            } 
    } 
```

那正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:26:27.833

Perl 中没有二维数组这样的东西。数组只能包含标量。这包括引用，因此二维数组使用数组的引用数组来近似。您需要使每个数组共享（使用`share`），而不仅仅是基本数组。

请注意，这种共享通常表示设计不佳（效率低下且容易出错）。如果可能，强烈建议使用工人模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:43:39.903

您还必须使用`share`or共享内部结构`shared_clone`：

```
#!/usr/bin/perl
use warnings;
use strict;

use threads;
use threads::shared;

my @ar2d : shared;
my @second : shared = qw/A B C D/;
@ar2d = ( shared_clone([qw/a b c d/]),
          \@second,
        );

my $thread = sub {
    my $idx = shift;
    while ('c' eq lc $ar2d[$idx][2]) {
        print "In thread1 $ar2d[$idx][2]\n";
        sleep 1;
    }
};

my $thread1 = threads->create($thread, 0);
my $thread2 = threads->create($thread, 1);

for (1 .. 5) {
    sleep 1;
    print "In main $ar2d[0][2] $ar2d[1][2]\n";
}
$ar2d[0][2] = 'x';
$ar2d[1] = shared_clone([qw/A B X D/]);
print "In main $ar2d[0][2] $ar2d[1][2]\n";

$thread1->join;
$thread2->join; 
```

# iphone - 帧中的相对位置

> ID：16142375
> 
> 赞同：0
> 
> 时间：2013-04-22T08:16:24.773
> 
> 标签：iphone

我被要求在类似于滚动视图的对象内的图像上放置一些按钮。

添加这些按钮没有问题，但是当我将图像捏得更小或更大时，按钮相对于图像的位置正在改变。

我怎样才能让它留下来？

有没有办法使用`myButton.frame = CGRectMake(30%,30%,x,y);`或类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:28:43.170

不能`CGRectMake`以百分比指定参数。我相信您的问题的解决方案在于`UIViewAutoResizingMask`财产。将其设置为`UIViewAutoResizingNone`可能会奏效。

```
myButton.autoresizingMask = UIViewAutoresizingNone; 
```

在任何情况下，按钮都不应该将 resizingMask 值设置为任何边距，否则它们将保持边距宽度不变。

**编辑：** 另一种方法是覆盖 layoutSubviews 方法，当你的 imageView/scrollView 调整大小时应该调用它：

```
- (void) layoutSubviews
{
    [super layoutSubviews];

    for (UIView *view in self.subviews) {   // Go through all subviews

        if (view == scrollView) {  // Find the scrollView object you want
           //then find the scrollView's frame size and reposition the button objects

        }
    }
} 
```

# forms - 在没有 WicketForm 的情况下测试输入

> ID：16142383
> 
> 赞同：0
> 
> 时间：2013-04-22T08:16:43.147
> 
> 标签：forms, wicket-1.5, wicket-tester

我有创建输入字段的面板，这些面板包含在另一个创建表单的面板中的表单中。我的问题是我看不到如何对我的面板进行单元测试。

假设我有这个 java ：

```
public class MyPanel extends Panel {
    public MyPanel(String id, IModel model) {
        super(id, model);
        TextField<String> test = new TextField<String>("test");
        test.add(new StringValidator.MaximumLengthValidator(5));
        add(test);
    }

} 
```

和 html ：

```
<?xml version="1.0" encoding="UTF-8" ?>
<html xmlns:wicket>
<head></head>
<body>
    <wicket:panel>
        <p>
            <label wicket:for="test"> <wicket:message key="test" />
            </label> <input type="text" wicket:id="test" />
        </p>
    </wicket:panel>
</body>
</html> 
```

有什么方法可以进行单元测试来测试我的 MaximumLengthValidator 吗？由于面板不包含表单，因此我不能直接使用 FormTester 并且 WicketTester 似乎没有使用 Validator。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:26:42.003

在这种情况下，最好重写`FormComponentPanel`作为泛型类型的子类的类`FormComponent<T>`。这意味着您可以将新组件视为`TextField<String>`.

```
public class MyPanel extends FormComponentPanel<String> 
```

根据我的经验，最好通过`FormTester`包含`Form`. 除非提交表单，否则您不会得到转换后的输入。

为了能够在不提交表单的情况下进行测试，您可以做的是添加一个对 Javascript 'onupdate' 函数做出反应的行为`AjaxFormComponentUpdatingBehavior`，但是您必须从 Javascript 读取输入并自己进行转换。

因此我的建议：

1.  延长`FormComponentPanel`
2.  用于`FormTester`测试您的验证器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-05T13:15:13.380

我遇到了同样的问题，在这里或其他任何地方都没有找到令人满意的答案。这个问题是四年前提出的，但我找到了解决方案并会分享它，即使问的人很早之前已经离开了，它可能仍然可以帮助其他人。我更喜欢有小组件并对其进行测试，表单可以很大很复杂，如果表单在一个文件中，它将反映在测试中。但是如何测试呢？

**诀窍是让步并将您的组件放入一个表单中。**

我制作了一个仅可用于测试的小组件（当前位于我的 src/test/java 文件夹中，但如果我在项目中的更多模块中需要它，我可能会将其移动到另一个模块并依赖于将其与测试范围一起导入）。有了这个小的帮助类，我可以测试我的不同组件，这些组件将在应用程序运行时出现在表单中，并且需要在表单中进行测试。

这是一种解决方法，但我觉得我和框架遇到了一半。

```
public class FormPanel extends Panel {

   private final Component iNeedToBeInAForm;

   public FormPanel(String id, IModel<?> model, Component iNeedToBeInAForm) {
      super(id, model);
      this.iNeedToBeInAForm = iNeedToBeInAForm;
   }

   @Override
   protected void onInitialize() {
      super.onInitialize();
      final Form form = new Form("form", getDefaultModel());
      form.add(iNeedToBeInAForm);
      add(form);
   }
} 
```

与此一起使用的html是：

```
<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:wicket="http://wicket.apache.org">
<body>

<wicket:panel>

    <form wicket:id="form">

    <div  wicket:id="panel" id="panel">

    </div>
    </form>
</wicket:panel>

</body>
</html> 
```

在测试中我这样使用它：

```
panel = new MyPanel("panel", model);
tester.startComponentInPage(new FormPanel("id", model, panel));
final FormTester formTester = tester.newFormTester("id:form");
formTester.setValue("panel:" + MyPanel.id_BETA_BLOCKAD_DOSAGE_START_SELECT, DEFAULT.toString());
tester.executeAjaxEvent("id:form:panel:" + MyPanel.id_BETA_BLOCKAD_DOSAGE_START_SELECT, "onchange");

Result result = tester.isVisible("id:form:panel:" + MyPanel.id_BETA_BLOCKAD_DOSAGE_START_TEXT);
assertThat(result.wasFailed(), is(true)); 
```

# c - 在给出换行符之前，不显示输出

> ID：16142384
> 
> 赞同：0
> 
> 时间：2013-04-22T08:16:46.667
> 
> 标签：c, terminal, output, putchar

我正在尝试用 C 编写一个简单的“打字机”效果，其中文本一次出现一个字母，但有延迟。这是我的功能：

```
#include <stdio.h>
#include <unistd.h>

void typestring(const char *str, useconds_t delay)
{
    while (*str) {
        putchar(*(str++));
        usleep(delay);
    }
} 
```

问题是在显示 a 之前文本实际上并没有出现`\n`。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:18:42.757

输出到`stdout`被缓冲。使用`\n`你是在强制冲洗。如果要更改此设置，则需要更改终端的设置（对于 Linux 看[这里](http://linux.die.net/man/3/termios)）或使用

```
void typestring(const char *str, useconds_t delay)
{
    while (*str) {
        putchar(*(str++));
        fflush(stdout);
        usleep(delay);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T08:18:50.867

您的输出流可能已被缓冲，`'\n'`刷新缓冲区。

尝试`fflush(stdout`后`putchar()`，如

```
while (*str) {
        putchar(*(str++));
        fflush(stdout);
        usleep(delay);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:20:51.220

`\n`隐式强制输出设备刷新缓冲输入。要刷新，您应该明确使用[`fflush`](http://en.cppreference.com/w/c/io/fflush)：

```
 fflush(stdout); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T09:07:37.340

输出流被缓冲，这就是为什么在显示 \n 之前文本实际上不会出现的原因 '\n' 刷新输出流（硬刷新）以手动执行相同的操作，您可以调用此函数 [ **fflush(stdout)** ]。

```
while (*str) {
        putchar(*(str++));
        fflush(stdout);
        usleep(delay);
    } 
```

或者你可以使用

```
while (*str) {
            printf("%c\n",*(str++));
            usleep(delay);
        } 
```

# ios - 如何将解析的 JSON 存储在 .plist 文件中？

> ID：16142393
> 
> 赞同：1
> 
> 时间：2013-04-22T08:17:07.087
> 
> 标签：ios, objective-c, json, plist

我有这样的json文件：

```
 {"fileContent":[{"name":"aaaa","type":"file","ext":"sql","modified":"2013\/04\/11 - 04:29","created":"2013\/04\/11 - 04:29","size":"1460","dirid":"5"},    {"name":"directory02","type":"file","ext":"sql","modified":"2013\/04\/11 -  04:29","created":"2013\/04\/11 - 04:29","size":"1577","dirid":"6"}, {"name":"index2","type":"file","ext":"php","modified":"2013\/04\/11 -  05:06","created":"2013\/04\/11 - 05:06","size":"9932","dirid":"8"}, {"name":"directorffdsgfg","type":"file","ext":"sql","modified":"2013\/04\/11 -    10:00","created":"2013\/04\/11 - 10:00","size":"1577","dirid":"10"}, {"name":"directory02","type":"file","ext":"sql","modified":"2013\/04\/11 -  12:10","created":"2013\/04\/11 - 12:10","size":"1577","dirid":"11"},{"name":"jquery- mousewheel-master","type":"file","ext":"zip","modified":"2013\/04\/11 -  12:10","created":"2013\/04\/11 - 12:10","size":"5213","dirid":"12"},{"name":"perfect-scrollbar-master","type":"file","ext":"zip","modified":"2013\/04\/11 -  12:10","created":"2013\/04\/11 - 12:10","size":"11867","dirid":"13"}, {"name":"E_PDF","type":"file","ext":"png","modified":"2013\/04\/17 -  09:15","created":"2013\/04\/17 - 09:15","size":"7467","dirid":"24"}, {"name":"filefolder_H.PNG","type":"file","ext":"png","modified":"2013\/04\/17 -  09:15","created":"2013\/04\/17 - 09:15","size":"10575","dirid":"25"}],"folderContent": [{"name":"Folder 2","type":"folder","ext":"sql","modified":"2013\/04\/11 -  05:04","created":"2013\/04\/11 - 05:04","size":"1577","dirid":"7"},{"name":"Folder  1","type":"folder","ext":"zip","modified":"2013\/04\/15 - 09:08","created":"2013\/04\/15 -  09:08","size":"11867","dirid":"14"}],"files":9,"folders":2} 
```

并将其`NSDictionary`与名称标题一起存储。（*向下代码显示它*：）

```
NSDictionary *titles = [NSJSONSerialization JSONObjectWithData:Data options:kNilOptions error:nil]; 
```

我从标题中读取 fileContent 值并将它们存储在 NSMutableArray 中，名称为“all”，如下代码：

```
NSArray *fileContent = [titles objectForKey:@"fileContent"];
NSMutableArray *all = [[NSMutableArray alloc]init];
[all addObjectsFromArray:fileContent]; 
```

我想在文件中存储“全部”中的 2 个值（名称和类型），`.plist`但我不知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:05:38.043

尝试

```
NSDictionary *titles = [NSJSONSerialization JSONObjectWithData:Data options:kNilOptions error:nil];

NSArray *fileContent = [titles objectForKey:@"fileContent"];
NSMutableArray *all = [fileContent mutableCopy];

NSMutableArray *folders = [NSMutableArray array];
[all enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
     NSDictionary *folder = (NSDictionary *)obj;

     NSMutableDictionary *dict = [NSMutableDictionary dictionary];
     [dict setObject:folder[@"name"] forKey:@"name"];
     [dict setObject:folder[@"type"] forKey:@"type"];

     [folders addObject:dict];

 }];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = paths[0]; 
NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"Folders.plist"];

[folders writeToFile:filePath atomically:YES]; 
```

# android - Android 应用抛出 java.util.concurrent.RejectedExecutionException: pool=128/128, queue=10/10

> ID：16142398
> 
> 赞同：1
> 
> 时间：2013-04-22T08:17:34.733
> 
> 标签：android, android-asynctask, iostream

我的生产 android 应用程序抛出了这个异常。当我分析 crittercism 时，我注意到我的许多异步任务都没有完成。他们挂在

**ClientSession.java:361**

`responseMessage = (AMessageStrategy) objectInputStream.readObject();`

和

**ClientSession.java:321**

`objectInputStream = new ObjectInputStream(new BufferedInputStream(inputStream));`.

对 SO 做了一些研究，发现[了这个链接](https://stackoverflow.com/questions/5605153/cannot-create-objectinputstream-with-inputstream-for-a-bluetooth-socket-on-the-a)。但没有发现任何将 RejectedExecution 与挂起问题联系起来的 SO 问题。因此这个问题。

```
org.apache.harmony.luni.platform.OSNetworkSystem.read(Native Method)
dalvik.system.BlockGuard$WrappedNetworkSystem.read(BlockGuard.java:273)
org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:461)
org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:85)
org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:65)
java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:140)
java.io.BufferedInputStream.read(BufferedInputStream.java:324)
java.io.DataInputStream.readToBuff(DataInputStream.java:159)
java.io.DataInputStream.readShort(DataInputStream.java:375)
java.io.ObjectInputStream.readStreamHeader(ObjectInputStream.java:2365)
java.io.ObjectInputStream.<init>(ObjectInputStream.java:433)
com.mcruiseon.common.communication.ClientSession$SendQueue.<init>(ClientSession.java:321)

org.apache.harmony.luni.platform.OSNetworkSystem.read(Native Method)    
dalvik.system.BlockGuard$WrappedNetworkSystem.read(BlockGuard.java:273)
org.apache.harmony.luni.net.PlainSocketImpl.read(PlainSocketImpl.java:461)
org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:85)
org.apache.harmony.luni.net.SocketInputStream.read(SocketInputStream.java:65)
java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:140)
java.io.BufferedInputStream.read(BufferedInputStream.java:225)
java.io.FilterInputStream.read(FilterInputStream.java:115)
java.io.ObjectInputStream.checkReadPrimitiveTypes(ObjectInputStream.java:466)
java.io.ObjectInputStream.readNonPrimitiveContent(ObjectInputStream.java:899)
java.io.ObjectInputStream.readObject(ObjectInputStream.java:2262)
java.io.ObjectInputStream.readObject(ObjectInputStream.java:2217)
com.mcruiseon.common.communication.ClientSession$SendQueue.run(ClientSession.java:361) 
```

我有

*   在输出流创建后刷新
*   在输入流之前创建输出流
*   写入后立即刷新

我还是明白了，这是一个随机错误，发生在产品投入生产 2 个月后。任何想法的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T17:13:34.557

如果您正在适配器上进行下载以在每个位置（在列表中）获取一个图像，那么您可能正在循环重复直到 Asynctask 上的 128 个线程。对不起我的英语不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T12:28:52.670

在客户端，我正在创建新的套接字而不关闭旧的套接字。这些插座堆在上面。在大约 128 个套接字 android max 出来并抛出这个异常之后。

我创建了一个超时并关闭了不活动的旧套接字。

# c++ - 如何同时使用 operator+ 和 operator=？

> ID：16142399
> 
> 赞同：0
> 
> 时间：2013-04-22T08:17:39.723
> 
> 标签：c++, operators, redefinition

我班上有 2 个操作员有一点问题。

我的班级被宣布：

```
template <class keyType, class valueType>
class MyMap{

    keyType keys[MAX];
    valueType values[MAX];
    int size;
} 
```

我需要重新定义运算符 []，例如当我调用 : 时`std::cout<<MyMap1["a"];`。

```
keyType& operator[] (keyType key){} 
```

它工作正常。我也用它来做作业，它很好，例如：`MyMap1["a"]="a1";`

代码很完美。但是在我的情况下，`operator[]`我增加了`size`参数，并且仅在我想进行分配时才有用。当我只做一个`std::cout`.

所以也许我应该重新定义`operator=`函数但是当我不能写时：

```
void operator=(valueType value){} 
```

因为左边的成员`MyMap1["a"] = "a1"`是 a`keyType`而不是`MyMap`类型。

我能怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:48:16.067

问题本身不在于输出；这是您在钥匙不存在时所做的事情。我认为您在更进一步之前指定非常重要。有很多可能性：

*   您可以执行该`std::map`操作，并使用默认值插入它。这在许多情况下非常方便，但这确实意味着您不能`[]`在 const 映射上使用。

*   您可以让运算符返回一个指针，如果对象不存在，则返回一个空指针。就个人而言，我不喜欢这个`operator[]`；这意味着您必须编写类似的内容：`ValueType* p = myMap[ key ]; if ( p != NULL ) ...`，这对于`[]`. （另一方面，它确实适用于`find`or`get`函数。）

*   您可以抛出异常（或者甚至使用断言，如果您提供一个`contains`函数，并将其作为 的前提条件 `[]`）。

*   您可以返回预定义的默认值。这与第一个解决方案有点相反；这意味着`operator[]` 永远不会更改地图，并且不需要非常量版本。

*   最后（这似乎是您的目标）：您可以`operator[]`返回一个代理，以便区分`myMap["a"]`用作右值和`myMap["a"] = something`. 我的感觉是这个解决方案不能很好地与 C++ 的工作方式结合，但它被用于其他语言（例如 Python）。

对于最后一个解决方案，您将使用以下内容：

```
class MyMap
{
    class Proxy
    {
        MyMap* myOwner;
        KeyType myKey;
    public:
        Proxy( MyMap* owner, KeyType key )
            : myOwner( owner )
            , myKey( key )
        {
        }

        Proxy const& operator=( ValueType value ) const
        {
            myOwner->insertOrUpdate( myKey, value );
            return *this;
        }

        operator ValueType() const
        {
            if ( !myOwner->contains( myKey ) ) {
                throw UnknownKeyException( myKey );
            }
            return myOwner->get( myKey );
        }
    };

public:
    Proxy operator[]( KeyType key )
    {
        return Proxy( this, key );
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:36:53.970

当你写：

```
auto blah = map[key]; 
```

operator[] 用 a 调用`key`，它返回一个值。

当你写：

```
map[key] = blah; 
```

然后 operator[key] 用 a 调用`key`，它返回一个值，然后 operator= 用`blah`参数调用该值。

这意味着可能很难检测到您实际在哪里读取或写入地图。

但是，通常，在 READ 案例中，案例可能会退回到被`value const& operator[] const`调用，而在写入期间，它会`value& operator[]` **没有 const**标记。因此，您**可能会**尝试通过 const 说明符重载运算符：提供 2 个 operator[]，一个 const，一个非常量，并且仅在后者中增加大小。

这很简单，但**并不总是能正常工作**，因为您有时可能会意外调用“operator[] as read”，但没有编译器可确定的 const 约束。我目前无法确切说明何时、如何以及是否有可能，但我想如果你对 constness 不太小心的话，你可以很容易地做到这一点。

如果你做到了，那么我知道的唯一选择是在非常量模式下为返回值提供一个包装器，并在 const 模式下保持正常：

```
myMap::valueType const & operator[](key...) const
mymap::wrapper<myMap::valueType>& operator[](key...) 
```

您的包装器会记住您的 Map 的 ref& 并会记住 KEY，并且该包装器将提供隐式转换到 valueType，并且它将提供赋值运算符 FROM-valueType-TO-wrappertype。隐式转换为值类型将执行从映射到给定键的读取，并且不会增加计数器，而运算符=（从值类型，到包装类型）将执行对映射的写入。

这肯定会奏效，但这种方法**可能已经过时**了。我不熟悉 c'11 的更改，所以现在可能有一些更好的选项可用 - 例如，移动`&&` 语义可能会在这里改变一些东西，即可能是重载

```
 valueType&& operator[](key) 
```

也有可能----但**我不知道**。我只知道 return-a-transparent-wrapper 方法。

编辑：这是一个很好的（似乎完整的）示例，它支持读取和写入并区分这两者：

[堆栈：如何使用下标运算符中分配的值做一些事情？](https://stackoverflow.com/a/12249696/717732)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:37:13.033

如果要区分读取和写入操作，解决方案是从`operator []`.

有关示例，请参见[https://stackoverflow.com/a/16132858/320726](https://stackoverflow.com/a/16132858/320726)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T08:24:39.903

“但是在我的 operator[] 中，我增加了 size 参数”。

不。检查密钥是否存在，并且`size`仅在插入新密钥时才增加。当您执行 a`std::cout`时，大概您仅在现有的键/值对上执行此操作。

[编辑] 鉴于评论，这是一个替代解决方案。在`operator[]`中，返回一个`MyMap<KeyType, ValueType>::proxy`。这包装了一个`MyMap&`和`Key`。重载`MyMap::proxy::operator=(ValueType)`以分配新值，并递增`size`. 重载`MyMap::proxy::operator ValueType() const`以获取值。`ValueType()`如果密钥不存在则返回。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T08:23:36.720

你`size`只在`key`不存在时增加你的`keys`，对吧？就是`std::map`这样。因此，如果您只是打印地图的内容，您将读取现有键的值，因此`size`不会增加。

# actionscript-3 - flex 移动项目中的全屏模式

> ID：16142400
> 
> 赞同：0
> 
> 时间：2013-04-22T08:17:39.280
> 
> 标签：actionscript-3, apache-flex, flex-mobile

我有一个视频舞台需要添加一个全屏按钮，我添加了这个代码：

```
private function makeFullScreenVideo(e:Event):void
    {
        saveOldestPositionAndSizeOfVideo();
        if(!isFull)
        {
            stage.getChildAt(0).x = 0;
            stage.getChildAt(0).y = 0;
            stage.getChildAt(0).width = stage.fullScreenWidth;
            stage.getChildAt(0).height = stage.fullScreenHeight; 

        }
        else
        {
            if(stage.fullScreenHeight>stage.fullScreenWidth)
            {
                stage.getChildAt(0).x = oldXOfVerticalView;
                stage.getChildAt(0).y = oldYOfVerticalView;
                stage.getChildAt(0).width = oldWidthOfVerticalView;
                stage.getChildAt(0).height = oldHeightOfVerticalView;   
            }
            else
            {
                stage.getChildAt(0).x = oldXOfHorizentalView;
                stage.getChildAt(0).y = oldYOfHorizentalView;
                stage.getChildAt(0).width = oldWidthOfHorizentalView;
                stage.getChildAt(0).height = oldHeightOfHorizentalView;
            } 
        }

        isFull = !isFull;

    }
    private function saveOldestPositionAndSizeOfVideo():void
    {
        if(stage.fullScreenHeight>stage.fullScreenWidth)
        {
            oldWidthOfVerticalView = stage.fullScreenWidth;
            oldHeightOfVerticalView= stage.fullScreenHeight*0.468;
            oldXOfVerticalView= 0;
            oldYOfVerticalView= 0;
        }
        else
        {
            if(oldWidthOfHorizentalView == 0)
            {
                oldWidthOfHorizentalView = stage.getChildAt(0).width;
                oldHeightOfHorizentalView= stage.getChildAt(0).height;
                oldXOfHorizentalView= stage.getChildAt(0).x;
                oldYOfHorizentalView= stage.getChildAt(0).y;    
            }
        }
    } 
```

当我运行它时，这段代码运行良好。问题是当方向改变时，如果改变全屏模式的方向，我在里面写的代码不会这样做`StageOrientationEvent`：

```
private function changeOrientation(evt:StageOrientationEvent):void
    {
        if(isFull)
        {
            stage.getChildAt(0).x = 0;
            stage.getChildAt(0).y = 0;
            stage.getChildAt(0).width = stage.fullScreenWidth;
            stage.getChildAt(0).height = stage.fullScreenHeight;
        }
    } 
```

提示：如果我在桌面上而不是在设计上运行项目，它将工作得很好，并且方向没有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:09:14.657

这是我在内置 StageOrientationEvents 遇到一些困难后为自己的项目编写的一些代码。请注意，这是一个 WIP，所以如果您有任何建议，请告诉我。我创建了两个类，一个是单例，一个是它调度的事件，为了使用它，我获取单例的实例并为事件添加侦听器：

[AccelerometerManager.as]

```
package com.shaunhusain.fingerPainting.managers
{
    import com.shaunhusain.fingerPainting.events.AccBasedOrientationEvent;

    import flash.events.AccelerometerEvent;
    import flash.events.EventDispatcher;
    import flash.sensors.Accelerometer;

    /**
     * Centralizes the handling of accelerometer changes, limits events
     * dispatched to avoid extraneous jiggle/dithering.
     */
    public class AccelerometerManager extends EventDispatcher
    {
        //--------------------------------------------------------------------------------
        //              Constants
        //--------------------------------------------------------------------------------
        public static const LANDSCAPE_LEFT:String = "landscapeLeft";
        public static const LANDSCAPE_RIGHT:String = "landscapeRight";
        public static const PORTRAIT_DEFAULT:String = "portraitDefault";
        public static const PORTRAIT_FLIPPED:String = "portraitFlipped";

        public static const TURNED_RIGHT:String = "turnedRight";
        public static const TURNED_LEFT:String = "turnedLeft";
        public static const FLIPPED:String = "flipped";

        //--------------------------------------------------------------------------------
        //              Variables
        //--------------------------------------------------------------------------------
        private var acc:Accelerometer;
        private var registeredStageListener:Boolean;
        private var previousOrientation:String=PORTRAIT_DEFAULT;
        private var degreeAllowance:Number = 20;
        private var previousAngle:Number=270;

        //--------------------------------------------------------------------------------
        //              Constructor
        //--------------------------------------------------------------------------------
        /**
         * Used to coordinate all the updates to the buttons without having
         * multiple instances of accelerometer objects.  Creates the handle
         * to the Accelerometer.
         * 
         * @param se Blocks creation of new managers instead use static method getInstance
         */
        public function AccelerometerManager(se:SingletonEnforcer)
        {
            acc = new Accelerometer();
        }

        //--------------------------------------------------------------------------------
        //              Singleton
        //--------------------------------------------------------------------------------
        private static var instance:AccelerometerManager;
        public static function getIntance():AccelerometerManager
        {
            if( instance == null ) instance = new AccelerometerManager( new SingletonEnforcer() );
            return instance;
        }

        //--------------------------------------------------------------------------------
        //              Properties
        //--------------------------------------------------------------------------------

        private var _currentlyActive:Boolean;
        /**
         * Allows the manager to be turned on or off from the outside.
         */
        public function set currentlyActive(value:Boolean):void{
            if(_currentlyActive == value)
                return;
            _currentlyActive = value;
            if(_currentlyActive)
                acc.addEventListener(AccelerometerEvent.UPDATE, handleAccelerometerChange);
            else
                acc.removeEventListener(AccelerometerEvent.UPDATE, handleAccelerometerChange);
        }

        private var _currentOrientation:String = AccelerometerManager.PORTRAIT_DEFAULT;
        public function get currentOrientation():String
        {
            return _currentOrientation;
        }

        public function set currentOrientation(value:String):void
        {
            _currentOrientation = value;
        }

        //--------------------------------------------------------------------------------
        //              Handlers
        //--------------------------------------------------------------------------------  
        private function handleAccelerometerChange(event:AccelerometerEvent):void
        {
            if(Math.abs(event.accelerationZ)<.75)
            {
                var angle:Number = Math.atan2(event.accelerationY, event.accelerationX);
                var degrees:Number = angle*180/Math.PI+180;

                if(Math.abs(degrees - previousAngle)<degreeAllowance)
                    return;

                previousAngle = degrees;

                var accEventExtra:AccBasedOrientationEvent = new AccBasedOrientationEvent(event.type,event.bubbles,event.cancelable);
                if(degrees>225&&degrees<315)
                    currentOrientation = PORTRAIT_DEFAULT;
                else if(degrees>45&&degrees<135)
                    currentOrientation = PORTRAIT_FLIPPED;
                else if(degrees>=135&&degrees<=225)
                    currentOrientation = LANDSCAPE_LEFT;
                else if(degrees>=315||degrees<=45)
                    currentOrientation = LANDSCAPE_RIGHT;

                if(currentOrientation == previousOrientation)
                    return;

                accEventExtra.oldOrientation = previousOrientation;
                accEventExtra.newOrientation = currentOrientation;
                accEventExtra.directionOfChange = determineDirectionOfChange(previousOrientation,currentOrientation);

                previousOrientation = currentOrientation;

                dispatchEvent(accEventExtra);
            }
        }
        private function determineDirectionOfChange(oldOrientation:String, newOrientation:String):String
        {
            var turned:String;
            switch(oldOrientation)
            {
                case PORTRAIT_DEFAULT:
                    switch(newOrientation)
                    {
                        case LANDSCAPE_LEFT:
                            turned = TURNED_LEFT;
                            break;
                        case LANDSCAPE_RIGHT:
                            turned = TURNED_RIGHT;
                            break;
                        case PORTRAIT_FLIPPED:
                            turned = FLIPPED;
                            break;
                    }
                break;
                case LANDSCAPE_LEFT:
                    switch(newOrientation)
                    {
                        case PORTRAIT_DEFAULT:
                            turned = TURNED_RIGHT;
                            break;
                        case LANDSCAPE_RIGHT:
                            turned = FLIPPED;
                            break;
                        case PORTRAIT_FLIPPED:
                            turned = TURNED_LEFT;
                            break;
                    }
                    break;
                case LANDSCAPE_RIGHT:
                    switch(newOrientation)
                    {
                        case LANDSCAPE_LEFT:
                            turned = FLIPPED;
                            break;
                        case PORTRAIT_DEFAULT:
                            turned = TURNED_LEFT;
                            break;
                        case PORTRAIT_FLIPPED:
                            turned = TURNED_RIGHT;
                            break;
                    }
                    break;
                case PORTRAIT_FLIPPED:
                    switch(newOrientation)
                    {
                        case LANDSCAPE_LEFT:
                            turned = TURNED_RIGHT;
                            break;
                        case LANDSCAPE_RIGHT:
                            turned = TURNED_LEFT;
                            break;
                        case PORTRAIT_DEFAULT:
                            turned = FLIPPED;
                            break;
                    }
                    break;

            }
            return turned;
        }
    }
}

internal class SingletonEnforcer {public function SingletonEnforcer(){}} 
```

[AccBasedOrientationEvent.as]

```
package com.shaunhusain.fingerPainting.events
{
    import flash.events.Event;

    /**
     * Added a property to store the current linearRotation pre-computed so
     * each handler doesn't have to compute it.
     */
    public class AccBasedOrientationEvent extends Event
    {
        public var oldOrientation:String;
        public var newOrientation:String;
        public var directionOfChange:String;
        public function AccBasedOrientationEvent(type:String, bubbles:Boolean=false, cancelable:Boolean=false, oldOrientation:String=null, newOrientation:String=null, directionOfChange:String=null)
        {
            super(type, bubbles, cancelable);
            this.oldOrientation = oldOrientation;
            this.newOrientation = newOrientation;
            this.directionOfChange = directionOfChange;
        }
    }
} 
```

用法最终应该看起来像这样：

```
 {
                   ...
                   var accManager:AccelerometerManager = AccelerometerManager.getIntance();
                accManager.addEventListener(AccelerometerEvent.UPDATE, handleAccelerometerChange);

                var locRot:Number;
                switch(accManager.currentOrientation)
                {
                    case AccelerometerManager.PORTRAIT_DEFAULT:
                        locRot = 0;
                        break;
                    case AccelerometerManager.PORTRAIT_FLIPPED:
                        locRot = Math.PI;
                        break;
                    case AccelerometerManager.LANDSCAPE_LEFT:
                        locRot = Math.PI/2;
                        break;
                    case AccelerometerManager.LANDSCAPE_RIGHT:
                        locRot = -Math.PI/2;
                        break;
                }

                var ge:GenericActuator = Actuate.tween(this, 1, {rotateAroundCenter:locRot});
                            ...
                        }

private function handleAccelerometerChange(event:AccBasedOrientationEvent):void
        {
            var locRot:Number;
            switch(event.newOrientation)
            {
                case AccelerometerManager.PORTRAIT_DEFAULT:
                    locRot = 0;
                    break;
                case AccelerometerManager.PORTRAIT_FLIPPED:
                    locRot = Math.PI;
                    break;
                case AccelerometerManager.LANDSCAPE_LEFT:
                    locRot = Math.PI/2;
                    break;
                case AccelerometerManager.LANDSCAPE_RIGHT:
                    locRot = -Math.PI/2;
                    break;
            }

            var ge:GenericActuator = Actuate.tween(this, 1, {rotateAroundCenter:locRot});
            //rotateAroundCenter = event.linearRotation;
        } 
```

注意：我在示例中使用 Actuate 库为旋转设置动画，这根本不是必需的，这里的所有其他内容都应该内置或在上面提供。

# java - 使用 Java 解析 PHP 文件以使用 JSON 获取坐标

> ID：16142406
> 
> 赞同：-4
> 
> 时间：2013-04-22T08:18:09.837
> 
> 标签：java, android, json

服务器上托管了一个 PHP 文件，如下所示：

```
[{"address":"12345 State St.","city":"Chicago","state":"IL","zip":"60610","name":"Home","phone":"8155555555","web":"http:\/\/www.websitetitle.org"......] 
```

我需要从这个 .php 文件中获取数据，将其存储在 JSON 数组中（我相信有人告诉过我），然后将数据拉入我的代码中，这样我就可以使用 lat 和 long 来固定在地图上。

我什至不知道从哪里开始，我是 JSON 新手，我希望有人能引导我朝着正确的方向前进。

编辑：使用托管在 url 上的 php 在 Java 中工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:19:33.700

## PHP

您需要做的第一件事是对其进行解码

```
$json_data = '[{"address":"12345 State St.","city":"Chicago","state":"IL","zip":"60610","name":"Home","phone":"8155555555","web":"http:\/\/www.websitetitle.org"......]';
$data = json_decode($json_data, true); 
```

然后你就可以在 PHP 中访问它的内容了

做一个 var_dump 看看你有什么，然后从那里开始

```
var_dump($data); 
```

你可能会得到这样的结果：

```
$lat = $data->lat;
$lng = $data->lng; 
```

## JAVA

如果你想对 java 做同样的事情，你需要为此使用一个库，前往[http://www.json.org/](http://www.json.org/)并从页面底部的 java 部分中选择一个，然后按照他们的指示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:23:47.767

您需要使用 JSONObject 类。

看看这个以前的帖子。[Android - 如何解析 JSONObject 和 JSONArrays](https://stackoverflow.com/questions/6350540/android-how-to-parse-jsonobject-and-jsonarrays)

# php - Php - 来自行集的数据格式

> ID：16142410
> 
> 赞同：0
> 
> 时间：2013-04-22T08:18:38.593
> 
> 标签：php

我从数据库中检索行集，而不是取决于显示格式（仪表、饼图、我正在使用的高图的条形图）我应该管理它。我结束了

```
class Model_StatRealtime implements Model_StatsTypeInterface
{

    protected $_rows;
    protected $_translator;
    public function __construct(Model_Rowset_View $rows) 
    {
        $this->_rows = $rows;
        $this->_translator = Zend_Registry::get('Zend_Translate');
    }

    public function getStatType() 
    { 
        return $this->_rows->getStat()->getRealtimeType();
    }

    public function getStatTitle() 
    { 
        return $this->_rows->getStat()->getTitle();
    }

    public function count() 
    { 
        return $this->_rows->count();
    }

    public function getData() 
    { 
        $data = array(); 
        if(method_exists($this,$this->getStatType() )){
           return $this->{$this->getStatType()}();
        }
        return $data;
    }

    protected function meter()
    {
        $data = array();
        if($this->_rows->count() > 0){
            foreach($this->_rows as $row){
                $data[$this->getStatTitle()][] = (int)$row->value;
            }
        }
        else{
            $data[$this->getStatTitle()][] = 0;
        }
        return $data;
    }

    protected function pie()
    {
        $data = array();
        if($this->_rows->count() > 0){
            foreach($this->_rows as $row){
                if($row->value > 0){
                    $data[$this->getStatTitle()][] = array(ucfirst($this->_translator->translate($row['field'])), round($row['value']));
                }
            }
        }
        else{
            $data[$this->getStatTitle()][] = array(0);
        }
        return $data;
    }

    protected function bar()
    {
        $data = array();
        if($this->_rows->count() > 0){
            foreach($this->_rows as $row){
                if($row->value > 0){
                    $data[$this->getStatTitle()][] = array(
                        'name'=>ucfirst($this->_translator->translate($row['field'])),
                        'data'=>array((int)$row['value'])
                        );
                }
            }
        }
        else{
            $data[$this->getStatTitle()][] = array(0);
        }
        return $data;
    }

} 
```

我想知道是否有更好的方法。

用途是

$model->getData()

# php - 在 php 循环中提示

> ID：16142417
> 
> 赞同：0
> 
> 时间：2013-04-22T08:18:52.373
> 
> 标签：php, loops, prompt

我有一个连接到 web 服务的 php 系统，获取数据并基于该数据生成 txt 文件...... - 当数据结束时，这一切都会自动进行。

问题是：客户想自己输入一些值 - 比如说......每次读取一条 mssql 记录时，他都想为自己的系统更改 id（每次系统运行时都有很多记录）。

所以基本上他需要一个很容易用js创建的提示框。

但是有没有办法在 php 循环中创建任何类型的 brompt 框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T08:23:57.893

当您的循环运行时，该提示将不起作用`PHP`，因此它会破坏它的全部目的。如果您放入一个运行时间的循环，您的提示将`x`背靠背显示时间，`x`并且它不会将数据返回到您的`PHP`循环以更新值。因此这是不可行的。您可以使用`javascript`并将`AJAX`这些值发送回您的 PHP，但不能直接从您的`PHP`循环中执行此操作。

到`JavaScript`开始工作的时候，`PHP`已经走了。您需要从`JavaScript`后面发布该提示答案`PHP`以更新值

**编辑**

我只是为您提供了一个测试代码，以使用您的想法进一步解释它。尝试一下

```
<?php
echo "<script>";

for($i=0;$i<3;$i++)
{
   echo "var a=prompt('Please answer this question');";     
/* You wont be getting back this value in PHP from user just like that. And obviously it will kill the user experience. Try it */
}

echo "</script>";

?> 
```

# php - 关系和扩展实体 symfony2

> ID：16142418
> 
> 赞同：0
> 
> 时间：2013-04-22T08:19:01.007
> 
> 标签：php, symfony, doctrine-orm, doctrine

我想做一个`entityB`扩展一个`entityA`. 中`entityA`，我与多对多的关系`entityC`。是否有可能使其多对一`entityB`？否则，你能给我提供其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:17:48.457

例如，您可以使用**单表继承**。它与 Symfony 无关，它与 Doctrine 相关：

[http://docs.doctrine-project.org/en/2.0.x/reference/inheritance-mapping.html](http://docs.doctrine-project.org/en/2.0.x/reference/inheritance-mapping.html)

# jakarta-ee - 如何通过maven生成Java EE项目结构

> ID：16142423
> 
> 赞同：0
> 
> 时间：2013-04-22T08:19:26.573
> 
> 标签：jakarta-ee, maven, dynamically-generated, archetypes

我是 maven 的新手，但我从事过一个项目，其中有一个中央 pom.xml，其中包括子项目，如 dao、business 和 web（控制器、web）。是否可以生成这种结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:26:55.023

这称为[Maven 原型](http://maven.apache.org/guides/introduction/introduction-to-archetypes.html)。这取决于您需要什么应用程序，Maven 具有 Java Web 应用程序和 Java EE 应用程序的原型。所以你需要运行类似的东西

```
mvn archetype:generate -DgroupId=basePackage -Dversion=1.0 
-DartifactId=projectName -DarchetypeArtifactId=maven-archetype-webapp     
-DinteractiveMode=false 
```

或者您可以[在此处使用](http://forge.jboss.org/docs/using/basic-javaee-app.html)[JBoss Forge](http://forge.jboss.org/)教程。Forge 将允许您通过 CLI 为实体生成 DAO 和 Web 层。

# tsql - 如何从经典 asp 中正确处理阿拉伯表单字段？

> ID：16142430
> 
> 赞同：1
> 
> 时间：2013-04-22T08:19:38.460
> 
> 标签：tsql, asp-classic, arabic

我有 t-sql 标量函数来验证登录，当从管理工作室询问时效果很好：

```
select dbo.getLogin(N'نصير الفتلاوي',N'pass')

returns 1 
```

当从 asp 页面使用表单字段作为参数时，它返回 0 尽管在 sql management studio 中粘贴时构造的 sql 返回 1

如果用户名不使用阿拉伯字母代码，那么它也适用于 asp。

SQL Server 版本是 2008，IIS 是 7.5，在 Windows Server 2003 上运行。它在 IE 10 和 Firefox 中的行为相同。

ASP 页面字符集是使用 meta 指令设置的 utf-8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:37:18.583

当您从 ASP 调用 SQL Server 时，您的参数必须是 nvarchar。不是varchar。

这与将`N`前缀添加到原始 SQL 常量相同

# postgresql - PostgreSQL 布尔转换（0 为假）

> ID：16142438
> 
> 赞同：12
> 
> 时间：2013-04-22T08:19:58.993
> 
> 标签：postgresql, casting

我更喜欢 1/0 而不是 t/f，那么在将布尔值转换为整数时应该使用什么？

```
select coalesce((null::boolean)::int, 0) 
```

或者

```
select case null::boolean when 't' then 1 else 0 end 
```

……别的？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-22T08:28:24.640

无论您做什么，布尔 null 不等于 false，就像数字 null 不等于零一样。

尝试：

```
Cast(col1 as integer) 
```

如果您真的想将 null 视为 false ，那么：

```
case when col1 then 1 else 0 end 
```

虽然这将是一件坏事

# iphone - 从 uitextfield 的开头删除 WhiteSpace

> ID：16142440
> 
> 赞同：6
> 
> 时间：2013-04-22T08:20:03.847
> 
> 标签：iphone, ios5, uitextfield

我想从单词的开头删除空格。即我的第一个字符不应该是空格，并且两个单词之间只有一个空格。我正在尝试很多东西，但无法从开始删除空格。

**我的代码是：**

**控制器.h**

```
int whitespaceCount; 
```

**控制器.m**

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSCharacterSet *whitespace = [NSCharacterSet whitespaceAndNewlineCharacterSet];
    if ([string rangeOfCharacterFromSet:whitespace].location != NSNotFound)
    {
        whitespaceCount++;
        if (whitespaceCount > 1)
        {
            return NO;
        }
    }
    else
    {
        whitespaceCount = 0;
        return YES;
    }
} 
```

从上面的代码中，两个单词之间的一个空格是完美的。请建议我如何删除起始空间。提前致谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-22T08:25:16.413

您可以使用方法：-

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    if (range.location == 0 && [string isEqualToString:@" "]) {
        return NO;
    }
    return YES;
} 
```

或者对于最新的 Swift，您可以使用以下内容：

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {

    if range.location == 0 && (string == " ") {
        return false
    }
    return true
} 
```

使用它你不能在开始时输入 whitescpace。

你也可以这样做：-

```
 NSCharacterSet *whitespace = [NSCharacterSet whitespaceAndNewlineCharacterSet]; 
```

如果要从字符串中删除它，则需要进行以下操作

```
NEW STRING> = [<STRING_CONTAINS WHITESPACE> stringByTrimmingCharactersInSet:whitespace];
 NSLog("String without white space = %@",NEW STRING); 
```

或者，如果您想从文本字段中完全删除空格，请使用以下内容：

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {

    if (string == " ") {
        return false
    }
    return true
} 
```

为了使这种方法有效，请务必标记您的`textfield.delegate = self`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-22T09:08:15.763

当您要使用它时，修剪文本字段内的文本

```
myTextfiled.text = [myTextfiled.text stringByTrimmingCharactersInSet: [NSCharacterSet whitespaceCharacterSet]]; 
```

这将从开头和结尾修剪空白

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:24:03.670

下面的方法完美地删除了文本前后的空格： `string = [string stringByTrimmingCharactersInSet:whitespace];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T08:47:42.047

使用此方法删除空格：

```
+(NSString *)trim:(NSString *) strInput{
    返回 [strInput stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-21T05:56:56.053

最好防止用户在 UITextField 中输入空格作为第一个字符。在这里，我们将阻止用户输入空格作为第一个字符。用户将被允许在字符串之间以及字符串末尾输入空格。

```
func textField(_ textField: UITextField, shouldChangeCharactersIn range: NSRange, replacementString string: String) -> Bool {
//Will prevent user from entering space as first character
let enteredCharString = "\(textField.text ?? "")\(string )"
if enteredCharString .trim().count == 0 {
  return false
}
} 
```

# arrays - 如何使用'awk'动态增加数组？

> ID：16142441
> 
> 赞同：1
> 
> 时间：2013-04-22T08:20:08.457
> 
> 标签：arrays, linux, awk

我有包含 IP 列表的文件：

```
1.1.1.1
2.2.2.2
3.3.3.3
5.5.5.5
1.1.1.1
5.5.5.5 
```

我想创建打印上述 IP 的计数器列表的文件，例如：

```
1.1.1.1: 2
2.2.2.2: 1
3.3.3.3: 1
5.5.5.5: 2 
```

其中 2,1,1,2 是计数器。

我开始编写适用于最终计数 IP 和已知计数但不知道如何继续的脚本

```
 ./ff.sh file_with_IPs.txt 
```

**脚本**

```
#!/bin/sh

file=$1

awk  '
BEGIN {
    for(x=0; x<4; ++x)
        count[x] = 0;

 ip[0] = "1.1.1.1";
 ip[1] = "2.2.2.2";
 ip[2] = "3.3.3.3";
 ip[3] = "5.5.5.5";    
}
{
    if($1==ip[0]){
       count[0] += 1;
     } else if($1==ip[1]){
       count[1] += 1;
     }else if($1==ip[2]){
       count[2] += 1;
     }else if($1==ip[3]){
       count[3] += 1;
     }
}
END {
    for(x=0; x<4; ++x) {
       print ip[x] ": " count[x]
    }
}
' $file > newfile.txt 
```

我不知道文件中存储了多少 IP 以及它们的外观的主要问题。

`ip`因此，每次 awk 捕获新 IP 时，我都需要增加数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:30:25.880

我认为使用 awk 更容易`sort -u`，但是使用 awk 可以做到：

```
awk '{a[$0]++; next}END {for (i in a) print i": "a[i]}' file_with_IPs.txt 
```

输出：

```
1.1.1.1: 2
3.3.3.3: 1
5.5.5.5: 2
2.2.2.2: 1 
```

（在[sudo_O 推荐给我的](https://stackoverflow.com/questions/16103804/newlines-while-saving-variable-to-file-bash/16103878#comment22996188_16103878)[本教程](http://backreference.org/2010/02/10/idiomatic-awk/)的帮助下）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T08:30:12.030

您可以`uniq`用于该任务，例如：

```
sort IPFILE | uniq -c 
```

（注意，这会打印 IP 前面的事件。）

或者使用 awk（如果线路上只有 IP 地址）：

```
awk '{ips[$0]++} END { for (k in ips) { print k, ips[k] } }' IPFILE 
```

（注意，这会打印无序的 IP 地址，但您可以使用 awk 执行此操作、阅读文档、for `asort`、`asorti`或只是`sort`在管道后附加 a。）

# debian - 为什么我不能在 debian 6 上使用 iptables 阻止 IP 地址？

> ID：16142446
> 
> 赞同：0
> 
> 时间：2013-04-22T08:20:34.440
> 
> 标签：debian, firewall, iptables

我相信我已经像这样正确设置了防火墙：

```
#!/bin/sh

IPT="/sbin/iptables"

# Flush old rules, old custom tables
$IPT --flush
$IPT --delete-chain

# Set default policies for all three default chains
$IPT -P INPUT DROP
$IPT -P FORWARD DROP
$IPT -P OUTPUT ACCEPT

# Enable free use of loopback interfaces
$IPT -A INPUT -i lo -j ACCEPT
$IPT -A OUTPUT -o lo -j ACCEPT

# All TCP sessions should begin with SYN
$IPT -A INPUT -p tcp ! --syn -m state --state NEW -s 0.0.0.0/0 -j DROP

# Accept inbound TCP packets
$IPT -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
$IPT -A INPUT -p tcp --dport 22 -m state --state NEW -s 0.0.0.0/0 -j ACCEPT
$IPT -A INPUT -p tcp --dport 80 -m state --state NEW -s 0.0.0.0/0 -j ACCEPT
$IPT -A INPUT -p tcp --dport 81 -m state --state NEW -s 0.0.0.0/0 -j ACCEPT
$IPT -A INPUT -p tcp --dport 8181 -m state --state NEW -s 0.0.0.0/0 -j ACCEPT

# Accept outbound packets
$IPT -I OUTPUT 1 -m state --state RELATED,ESTABLISHED -j ACCEPT
$IPT -A OUTPUT -p udp --dport 53 -m state --state NEW -j ACCEPT 
```

但是当我试图阻止一个 IP 地址访问我的网络服务器时，它不起作用，用户仍然能够访问服务器。

```
iptables -A INPUT -s xx.xxx.xxx.xxx -j DROP 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T12:19:13.243

在所有 INPUT 规则的末尾附加您的过滤规则无效，因为之前端口 80 上的所有 http 流量都将被接受。

第一个数据包将被此规则接受： `INPUT -p tcp --dport 80 -m state --state NEW -s 0.0.0.0/0 -j ACCEPT` 所有后续数据包都将被此规则接受： `INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT`

为了确保过滤来自 xx.xx.xx.xx 的所有数据包，您应该将您的规则放在 INPUT 链中的第一个位置。

为此，`iptables -A INPUT -s xx.xxx.xxx.xxx -j DROP`您可以在其他人之前使用此命令 : `iptables -I INPUT 1 -s xx.xxx.xxx.xxx -j DROP`来插入第一个位置。

# c# - 对列表进行排序并给每个项目一个新的排序索引

> ID：16142450
> 
> 赞同：3
> 
> 时间：2013-04-22T08:20:44.033
> 
> 标签：c#, asp.net-mvc, sorting, razor

可以说我有 3 个菜单项。每个内部都有（例如）5个链接。所以我有这样的事情：

```
//This is just some test-code. normally i''ll get the data from a database
List<NavigationModel> navigation = new List<NavigationModel>();
Random randomInt = new Random();

for (int i = 0; i < 5; i++)
{

    NavigationModel m = new NavigationModel();
    m.MenuName = "Users";
    m.LinkName = "Link (" + i + ")";
    m.ControllerName = "AAA";
    m.ActionName = "Function" + i;
    m.SortingMenu = 5;

    navigation.Add(m);
}

for (int i = 0; i < 5; i++)
{
    NavigationModel m = new NavigationModel();
    m.MenuName = "Help";
    m.LinkName = "Link (" + i + ")";
    m.ControllerName = "BBB";
    m.ActionName = "Function" + i;
    m.SortingMenu = 10;

    navigation.Add(m);
}

for (int i = 0; i < 5; i++)
{
    NavigationModel m = new NavigationModel();
    m.MenuName = "Home";
    m.LinkName = "Link (" + i + ")";
    m.ControllerName = "CCC";
    m.ActionName = "Function" + i;
    m.SortingMenu = 2;

    navigation.Add(m);
}

navigation = navigation.OrderBy(x => x.SortingMenu).ToList(); 
```

如您所见，我将获得 3 个正确排序的菜单项，但我需要从 0 开始排序，然后是 1,2 ...

如何在没有硬编码或数据库更新命令的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:20:52.530

LukeHennerleys 的回答可能具有更高的标准，但我宁愿用简单的`for-loop`. 如果您已经对列表进行了排序，这应该可以解决问题。

```
for (int i = 0; i < navigation.Count; i++)
{
    navigation[i].SortingMenu = i;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T08:29:06.843

用于`Select`调用后带出索引`OrderBy`。你的索引`Select((x, i))`在哪里。`i`

```
public class TestObject
{
  public string A { get; set; }
  public int Index { get; set; }
}
public void Example()
{
  List<TestObject> testObjects = new List<TestObject>();
  testObjects.Add(new TestObject() { A = "B" });
  testObjects.Add(new TestObject() { A = "C" });
  testObjects.Add(new TestObject() { A = "A" });
  var objects = testObjects.OrderBy(x => x.A).Select((x, i) => new TestObject() { A = x.A, Index = i });
} 
```

# android - 使用 LayoutGameActivity 创建一个列表视图

> ID：16142452
> 
> 赞同：0
> 
> 时间：2013-04-22T08:20:44.363
> 
> 标签：android, android-listview, andengine

我扩展了 LayoutGameActivity 以在 andengine 中创建一个列表视图。但是出现错误

> E/AndroidRuntime(8719): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com.example.jumper.game/com.ex.listview.ListViewTestActivity}: java.lang.NullPointerException
> E/AndroidRuntime(8719): 在 android .app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)

我的 activity_main.xml 看起来：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@+id/id_list_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</RelativeLayout> 
```

我的活动看起来像：

```
public class ListViewTestActivity extends LayoutGameActivity {

public Camera camera;
private ResourcesManager resourcesManager;
public final static int CAMERA_WIDTH = 1280;
public final static int CAMERA_HEIGHT = 720;
public ListView aListView;
@Override
public EngineOptions onCreateEngineOptions() {

    camera = new Camera(0, 0, 1280, 720);
    EngineOptions engineOptions = new EngineOptions(true,
            ScreenOrientation.LANDSCAPE_FIXED, new FillResolutionPolicy(),
            this.camera);
    engineOptions.getAudioOptions().setNeedsMusic(true).setNeedsSound(true);
    engineOptions.setWakeLockOptions(WakeLockOptions.SCREEN_ON);
    return engineOptions;

}
@Override
public void onCreateResources(
        OnCreateResourcesCallback pOnCreateResourcesCallback)
        throws Exception {
}
@Override
public void onCreateScene(OnCreateSceneCallback pOnCreateSceneCallback)
        throws Exception {

    this.mEngine.registerUpdateHandler(new FPSLogger());
    final Scene scene = new Scene();

    aListView = (ListView) findViewById(R.id.list_view);
    String[] items = new String[] { "Item 1", "Item 2", "Item 3" };
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, items);
    aListView.setAdapter(adapter);

    pOnCreateSceneCallback.onCreateSceneFinished(scene);
}

@Override
public void onPopulateScene(Scene pScene,
        OnPopulateSceneCallback pOnPopulateSceneCallback) throws Exception {

    pOnPopulateSceneCallback.onPopulateSceneFinished();
}

@Override
protected int getLayoutID() {

    // my xml layout
    return R.layout.activity_main;
}

@Override
protected int getRenderSurfaceViewID() {

    return 0;

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:35:36.717

参见 ANDEngine 的菜单类

查看以下链接：

[http://apachejava.blogspot.com/2012/03/andengine-menu-scrolling-example.html](http://apachejava.blogspot.com/2012/03/andengine-menu-scrolling-example.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:44:20.580

您需要在 xml 中使用 renderSurfaceView

添加到 XML

```
<org.anddev.andengine.opengl.view.RenderSurfaceView 
        android:id="@+id/xmllayoutRenderSurfaceView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_centerInParent="true"
        android:gravity="bottom" 

        /> 
```

并在你的活动课上得到它

```
@Override
    protected int getRenderSurfaceViewID() {
return R.id.xmllayoutRenderSurfaceView;

    } 
```

# windows - Windows alt + tab 导致窗口模式

> ID：16142454
> 
> 赞同：2
> 
> 时间：2013-04-22T08:20:52.807
> 
> 标签：windows, fullscreen, cocos2d-x, marmalade

我正在使用果酱 6.2 和 cocos 2.1 beta3.x.2.1。当我以全屏模式部署 Windows 构建时，alt-tabbing 退出并返回到应用程序会导致应用程序进入窗口模式。是否需要在 app.icf / 其他地方设置命令/设置以确保在`Alt`+之后保持全屏`Tab`？

我在下面找到了可能相关的帖子：

[Alt-tab 全屏](https://stackoverflow.com/questions/14432254/alt-tab-in-full-screen)

谢谢，

线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:11:07.460

你检查了`WinAllowAltEnter`和`WinFullScreen`icf设置。我想这就是你需要的，尤其是`WinFullScreen`.

还要检查描述`WinFullScreen`

```
If this is set, the display will be changed to a mode governed by WinWidth, WinHeight and WindowBpp. The surface will then cover the whole of the screen. If device does not support full screen mode with resolutions specified in WinWidth and WinHeight settings, application will start in windowed mode regardless of the WinFullScreen flag with specified resolution. Default is 0. 
```

所以我猜你可能做的是错误配置 WinWidth/WinHeight 设置。

# node.js - 使用 nginx 的 Websocket 代理不适用于 tomcat。

> ID：16142460
> 
> 赞同：1
> 
> 时间：2013-04-22T08:21:23.440
> 
> 标签：node.js, tomcat, proxy, nginx, websocket

我正在尝试使用 nginx 将 websocket 代理到端口 80。我们有一个运行在端口 8080 上的 tomcat 应用程序和运行在端口 8888 上的节点应用程序。我一直在尝试使用 nginx 将它们代理到端口 80，但由于某种原因，连接没有建立。我在控制台中收到以下错误：

WebSocket 连接到 'ws://chat-local-dev.guestops.com/ws/chat?access_token=bfb83713f8abecb6c3d36d3dc74c31b9&sessionId=undefined' 失败：WebSocket 在连接建立之前关闭。

这是我的nginx配置：

```
 worker_processes  1;
    events {
    worker_connections  1024;
    }
    http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;
    server {
    listen       80;
    server_name  chat-local-dev.guestops.com;
    location / {
        proxy_pass http://localhost:8080;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
     } 
     }
     server {
     listen       80;
     server_name  api-local-dev.guestops.com;
     location / {
     proxy_pass http://localhost:8881;
     proxy_http_version 1.1;
     proxy_set_header Upgrade $http_upgrade;
     proxy_set_header Connection "upgrade";
     proxy_set_header Host $host;
     }
     }
     server {
     listen       80;
     server_name  console-local-dev.guestops.com;
     location / {
     proxy_pass http://localhost:8888;
     proxy_http_version 1.1;
     proxy_set_header Upgrade $http_upgrade;
     proxy_set_header Connection "upgrade";
     proxy_set_header Host $host;
     }
     }
     } 
```

我可以在端口 80 上运行这些站点，但是我无法在客户端和服务器之间运行聊天。

任何帮助将不胜感激，我也可以提供节点文件，但它们是一大堆文件，但如果需要，我可以提供必要的文件。

我希望我足够清楚。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:20:49.403

nginx 在 1.3 版本中添加了 websocket 支持。所以你必须升级到 1.3.x 版本才能使用它。

# php - 将 JSON AJAX 回复传递给 PHP

> ID：16142461
> 
> 赞同：1
> 
> 时间：2013-04-22T08:21:33.457
> 
> 标签：php, ajax, json

我有一个使用 AJAX 连接到查询数据库并返回一些值的 PHP 脚本的脚本。其中的代码如下：

```
<script>
function showUser(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","ajaxphp.php?ID="+str,true);
xmlhttp.send();
}
</script>

<select id="users" name="users" onchange="showUser(this.value)">
<option value="">Select a person:</option>
<!-- PHP populates this dropdown box -->
</select>
<div id="txtHint"><b>Selected user info will be listed here.</b></div> 
```

现在 txtHint div 将返回 ajaxphp.php 脚本打印的任何内容。然而，这不是很灵活。我想要做的是在 ajaxphp.php 中创建一个数组并使用 json_encode() 将结果传回。

我遇到的问题是我不知道如何获取原始脚本来获取结果，以便我可以用它们做有用的事情。现在我可以让它返回一个 JSON 数组，该数组将出现在 txtHint div 中，但我不知道如何让 PHP 实际读取该信息，以便我可以用它做点什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:31:12.650

也许 json_decode() php 方法是您想要的解决方案。

[http://www.php.net/manual/en/function.json-decode.php](http://www.php.net/manual/en/function.json-decode.php)

此方法采用 JSON 编码字符串（例如来自 json_encode 方法）并将其转换为 PHP 变量……因此您可以像使用对象一样使用此变量并简单地访问其属性。

也许这篇其他文章会帮助您：[如何在 PHP 中使用多个对象解码 JSON 字符串？](https://stackoverflow.com/questions/2560096/how-to-decode-a-json-string-with-several-objects-in-php)

希望这可以帮助 ！再见 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:44:30.390

尝试使用 jQuery Ajax ...

```
 $.ajax({
        url : 'ajaxphp.php?ID='+str,                          
        type: 'get',                   
        dataType:'json',                   
    success : function(data) {  
        console.log(data);
    }
   }); 
```

成功函数参数中的数据是您从 php.ini 返回的编码结果。

```
echo json_encode($result); 
```

然后你可以从 javascript 使用类似的东西访问它。

```
data.result1
data.result2
data.result3.... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:26:59.490

使用`$_GET`方法查看用户在 php 中发送给您的内容，请参见此处：

[http://php.net/manual/en/reserved.variables.request.php](http://php.net/manual/en/reserved.variables.request.php)

# ios6 - 使用 GKInvite 列表以编程方式邀请 Game Center

> ID：16142466
> 
> 赞同：6
> 
> 时间：2013-04-22T08:22:13.820
> 
> 标签：ios6, game-center, gamekit, invitation

我在 iOS 6 的 iPhone 游戏中使用 Game Center。我有一个包含 GameCenter 好友列表的表格视图。当我点击一个朋友的名字时，这个朋友在她的手机中收到 anotificatión（游戏中心通知），询问他是否想和我玩游戏。我一直在使用我的自定义视图。我想知道其他用户如何接受或拒绝玩游戏的邀请。我可以让 uialertview 告诉“是”还是“不是”，如果用户说“是”，则使用以下代码与这两个玩家一起创建一个新游戏？

```
GKMatchRequest *request = [[GKMatchRequest alloc] init];
request.minPlayers = 2;
request.maxPlayers = 2;
request.playersToInvite = [NSArray arrayWithObject:playerC_id];
[[GKMatchmaker sharedMatchmaker] addPlayersToMatch:myMatch matchRequest:request completionHandler:nil]; 
```

我不知道这是否可能。我更喜欢另一种解决方案，列出用户为他们的朋友收到的所有 GKInvite 列表。有了这个列表，用户应该能够接受或删除邀请。如果用户接受邀请，游戏将开始。

其他应用如何管理游戏中心邀请玩？他们如何接受或拒绝？游戏何时开始，玩家何时发送游戏邀请或其他玩家何时接受邀请？何时考虑接受 GKInvite？如何获取我拥有的 GKInvite 列表？

这个问题有什么解决办法吗？如何管理游戏中心邀请？

# ant - 文件删除无法通过 ant 脚本进行

> ID：16142472
> 
> 赞同：1
> 
> 时间：2013-04-22T08:22:30.623
> 
> 标签：ant

我编写了一个 Ant 脚本，其中有一些代码块创建一个临时文件并将 ant 过滤器应用于该临时文件并生成新文件。

以下是代码：

```
<copy tofile="${file.report.name}.html" file="${file.report.name}-temp.html">
            <filterchain>
                <tokenfilter>
                    <replaceregex pattern="\[(echo|script|apply|copy)\]" replace="" />
                </tokenfilter>
            </filterchain>
            <filterchain>
                <linecontains negate="true">
                    <contains value="Copying"/>
                </linecontains>
            </filterchain>
        </copy>

        <antcall target="final.cleanup"/> 
```

然后我调用一个目标来删除生成的临时文件。但它给了我一些错误，说脚本无法删除受尊重的文件。

以下代码块用于删除临时文件：

```
<target name="final.cleanup">
        <delete file="reports/report-temp.html"/>
    </target> 
```

什么地方出了错？这个文件是否正在某些过程中使用，这就是为什么它给我错误！

# javascript - 点击不同锚标签时加载新数据

> ID：16142473
> 
> 赞同：1
> 
> 时间：2013-04-22T08:22:32.917
> 
> 标签：javascript, jquery, html

![在此处输入图像描述](https://i.stack.imgur.com/r46H5.png)由于我是这个概念的新手，如果有任何错误，请不要介意。我需要帮助。这里所有的锚标签都是硬编码的，但实际上它们应该是动态创建的。我正在尝试在单击锚标记时显示数据。在这种情况下，要显示的数据是不同的。最初，我们展示的是智能手机和平板电脑等设备。在智能手机的点击上，我们必须显示与智能手机完全相关的操作系统版本，如mac，windows，andriod和blackberry......点击平板电脑也是如此，这4个操作系统版本将与平板电脑相关。再次单击操作系统版本链接，然后基于该操作系统，应显示操作系统的版本。例如：4.0 ics，4.1：jellybean 等，只有在选择智能手机/平板电脑时才应显示此操作系统数据。这是我尝试过的代码......！html:

```
 <table id="layout">
    <tr>
    <td>
    <table id='download'>
    <tr>
    <td>
    <div id='main'>
    <table id='device'>
    <tr>
    <td>
    <a id='mobile_select'> SmartPhone </a>
    <div id="os_data">
    <a >ios</a>
    <a >andriod</a>
    <a >blackberry</a>
    <a >windows</a></div>
    </td>
    </tr>
    <tr>
    <td>
    <a> Tablet</a>
 <div id="os_data">
    <a >ios</a>
    <a >andriod</a>
    <a >blackberry</a>
    <a >windows</a></div>
    </td>
    </tr>
    </table>
    </div>
    </td>
    </tr>
    </table>
    </td>
    </tr>
    </table> 
```

jQuery

```
for (var i = 0; i <= 50; i++) {
         $('#device').append('<a  + i + > ' + i + '</a>');
     }

     addOS();

     function addOS() {
            ii = 0;

            for (i = 0; i <= 500; i++) {
                if ((i % 10) == 0) {
                    ii++;
                }
                $('#device').append('<a + i +  id="oos' + ii + '"> ' + i + '</a>');
            }
        }

     $('#mobile_select').click(function() {
            var selectedDevice = $(this).val();
            var selectFirst = 0;
            addCites();

            $("#device").each(function() {
                if ($(this).attr('id') != selectedDevice) {
                    $(this).remove();
                } else {
                    if (selectFirst < 1) {
                        $(this).attr('id', selectedDevice).attr('selected', 'selected');
                    }
                    selectFirst++;
                }
            });
            $("#device").parent().parent().show();

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:07:56.863

首先，您不应该使用表格进行布局。这是完成任务所需要做的事情。

HTML：

```
<div id="mainCategories">
    <a id="smartPhone" href="">SmartPhones</a>
    <a id="tablet" href="">Tablets</a>
</div>
<div id="subCategories">
</div> 
```

Javascript（使用 jQuery）：

```
$(function() {

    var data = {};
    data["smartPhone"] = ["ios", "android", "windows"];
    data["tablet"] = ["iosTablet", "androidTabled", "windowsTablet"];

    $("#mainCategories a").click(function(){
        var clickedItem = $(this).attr('id');
        var operatingSystems = data[clickedItem];
        $("#subCategories").empty();
        for(ind in operatingSystems){
            var os = operatingSystems[ind];
            var anchor = $("<a>");
            anchor.attr('href','');
            anchor.attr('id', os);
            anchor.text(os);
            $("#subCategories").append(anchor);
        }
        return false;
    });
}); 
```

CSS：

```
a{
    display:block;
} 
```

这是工作小提琴：http: [//jsfiddle.net/t426J/](http://jsfiddle.net/t426J/)

假设您已经以某种方式将有关操作系统的数据加载到 javascript 中。

# netbeans - Mercurial：一次查看更多变更集

> ID：16142479
> 
> 赞同：0
> 
> 时间：2013-04-22T08:22:57.887
> 
> 标签：netbeans, mercurial, tortoisehg

我确实使用 Netbeans 和 TortoiseHG 来管理和查看 Mercurial 变更集，但我的问题是我想查看一系列变更集的差异。

真实案例：Gil 正在他自己的 repo 中开发一个功能，他逐步添加了更多更改。他的变更集是：47（消息：初始测试）、48、49（消息：在 47 中添加的修复错误）、50（消息：功能准备就绪）。

[变更集 46 是由我 (Alex) 制作的，所以我知道代码直到 46 包括在内]

如果我确实审查了每个提交，我可能会花时间在他已经修复的错误上（例如：我在 47 中看到了一个错误，但他在 49 中修复了它）。

我想避免审查每个提交，我希望能够一次审查整个 47-50 范围 - 作为一个单一的更改集。

是否有任何工具、选项、调整来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:49:50.293

TortoiseHg 可以启动两个版本的视觉差异，也可以为它们输出差异文件。

Windows 的说明如下：

1.  单击一个修订
2.  按住 Ctrl 并单击另一个修订
3.  右键单击其中任何一个
4.  **Visual Diff...**将启动您配置的视觉差异工具，**Export Diff...**将创建一个补丁文件供您查看。

这可能适用于 TortoiseHg 支持的其他操作系统，但点击次数可能不同。

这会在我的系统上启动 KDiff3，它会提供一个包含所有已更改文件的树。双击其中一个文件会在另一个窗格中显示更改。

# apache-camel - Apache 产品与 Redhat Fuse 的开发有何不同？

> ID：16142482
> 
> 赞同：2
> 
> 时间：2013-04-22T08:23:25.490
> 
> 标签：apache-camel, fuseesb

我们已经使用 Apache ActiveMQ 和 Camel 产品有一段时间了，但想看看一个好的基础 ESB。我一直在阅读有关 Fuse 的 Redhat 站点，但无法找到关于 Fuse 和 Apache 对编码人员的显着差异的一个很好的总结。

从设计人员/开发人员的角度来看，Fuse 与我们一直使用的 Apache Camel 和 ActiveMQ 之间的显着区别是什么？我得到了可爱的概述资料、FuseIDE 和 ESB 管理工具。但我真的只是想知道代码级别的差异，即它是否引入了更有用的 Camel 端点？是否有其他真正有用的东西库可以让我作为设计师/编码员的生活更轻松？有什么需要注意的陷阱吗？

我只需要一些提示来帮助我进行搜索，而不是大部头。或者更好的是快速链接到涵盖所有这些的文档（永远充满希望：o）！）我有很短的时间来形成一个继续前进的观点，否则机会就会过去。

谢谢你。

SK

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T07:13:31.300

在代码级别有“没有”的区别。这个过程是我们在 Apache 项目上开发，并将代码更改同步到 Red Hat / Fuse git repos。在那里，我们挑选了我们想要进入分支的更改，以保持产品稳定。如果我们的客户需要/等（例如，您可以影响它），也可以对旧分支进行反向移植修复

与 Apache 的社区支持相比，Red Hat 产品的支持时间也更长。您可以在此处找到有保证的生命周期：[https ://access.redhat.com/support/policy/updates/jboss_notes/](https://access.redhat.com/support/policy/updates/jboss_notes/)

Fuse / JBoss Fuse 产品中只有几个额外的 Camel 组件，它是开源项目 Fuse Fabric ( [http://fuse.fusesource.org/fabric/](http://fuse.fusesource.org/fabric/) ) 的一部分，它是 JBoss Fuse 产品的一部分。Fuse Fabric 正在捐赠给 Apache ServiceMix，因此它也可以使该社区受益，从而使 ServiceMix 也可以开箱即用地捆绑 Fabric。Fabric 有一些 Camel 组件，允许将消息发送到任何在集群环境/云环境中自动负载平衡的 Camel 端点。并且还有另外一个Camel组件用于选择master，并且只在master节点上运行路由，如果master死了，那么另一个节点接管。

> 我还认为，这一举动证明了 Fuse 团队拥有并将继续拥有的开源意愿。我们尽可能在开场时做。例如新项目 - hawtio ( [http://hawt.io/](http://hawt.io/) ) 也是完全开源的，ASL 许可证，github 项目，任何人都可以贡献/fork 等。

JBoss Fuse 产品允许在生产中自行修补。因此，如果您需要尽快修补程序，我们可以提供一个 .zip 文件的修补程序，可以使用产品中的内置修补程序工具对其进行修补。这在 Apache 中是不可能的。

一些进一步材料的链接（来自我们的旧网站和 jboss 社区网站）

*   [http://fusesource.com/enterprise-support/support-offerings/](http://fusesource.com/enterprise-support/support-offerings/)
*   [http://fusesource.com/community/apache-committers-and-fuse/](http://fusesource.com/community/apache-committers-and-fuse/)
*   [http://www.jboss.org/products/fuse](http://www.jboss.org/products/fuse)
*   [http://www.davsclaus.com/2013/04/apache-camel-web-dashboard-with-hawtio.html](http://www.davsclaus.com/2013/04/apache-camel-web-dashboard-with-hawtio.html)

披露：我为 Fusesource / Red Hat 工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:54:31.203

Apache ActiveMQ 和 Camel 是开源项目。Redhat fuse 将它们和可能的许多其他组件捆绑到一个包中，因此它可以用作一个 ESB 包。我认为最大的不同是您可以获得的支持。您可以获得对您的组织尚未制作的内容的支持。在我看来，该软件包附带的工具在开发和维护期间确实有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T11:56:49.527

在代码级别上，差异非常小，如果有的话。

您从商业 RedHat 软件包中获得的是支持，这是一个经过测试的软件包和运营优势（您提到的）。

这一切都与编写代码后发生的事情有关 - 当您将您的东西投入生产并且编码器还没有处理事件时。

# magento - 在 magento 中显示来自特定类别的高级搜索产品

> ID：16142484
> 
> 赞同：0
> 
> 时间：2013-04-22T08:23:30.120
> 
> 标签：magento, magento-1.7

我是 magento 的新手。我必须在 magento 中使用高级搜索，但尽管所有产品都需要在其中显示特定类别的产品。简而言之，我只需要显示单个类别的高级搜索产品。我正在使用magento 1.7。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:39:46.657

您可以在 Magento 的高级搜索部分添加“按类别搜索”。Magento wiki 中显示了实现它的分步指南：http: [//www.magentocommerce.com/wiki/5_-_modules_and_development/search_and_advanced_search/how_to_add_search_by_category_to_advanced_search](http://www.magentocommerce.com/wiki/5_-_modules_and_development/search_and_advanced_search/how_to_add_search_by_category_to_advanced_search)

如果您不想显示选择类别的选项，只需在选择下拉列表中不显示任何选项，默认情况下选择您想要的类别。因此，只会显示该类别的所有搜索结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-27T14:27:01.707

在搜索 html 表单中，您可以添加一个名为“cat”的新隐藏输入，其中包含您要搜索的类别的 ID。

```
<form action="<?php echo $catalogSearchHelper->getResultUrl() ?>" method="get">
<input id="search"  type="text"   name="q" value=""     />
<input id="cat"     type="hidden" name="cat" value="ID_OF_YOUR_CAT"  /> 
</form> 
```

# powershell - -Confirm:$false 设置为全局设置

> ID：16142489
> 
> 赞同：6
> 
> 时间：2013-04-22T08:23:45.453
> 
> 标签：powershell

我有一些从 C# 代码部分触发的 powershell 脚本。

它们以非交互方式运行，无法确认任何命令。

在 Powershell 中，我们可以将`ErrorActionPreference`全局设置为`$ErrorActionPreference = "Stop"`

如果存在，是否有相同的方法在每个命令上将确认参数设置为 $false ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:36:43.017

您可以尝试：

```
$ConfirmPreference = "None" 
```

[在这里](http://blogs.msdn.com/b/powershell/archive/2006/12/15/confirmpreference.aspx)阅读

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T14:31:50.657

看看[这里](http://blogs.msdn.com/b/powershell/archive/2006/12/15/confirmpreference.aspx)

您可以设置全局行为

```
$ConfirmPreference = "None" / "Low" / "High" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:41:34.787

您可以检查该命令是否支持 Confirm 并使用 splatting 进行设置：

```
$param = @{}
if((Get-Command Enable-PSRemoting).Parameters.Confirm) {$param.Confirm=$false}

Enable-PSRemoting @param 
```

在 PowerShell 3.0 中，您可以使用 $PSDefaultParameterValues 变量：

```
$PSDefaultParameterValues["*:Confirm"]=$false 
```

# matlab - 将 M 文件添加到 VC6.0

> ID：16142492
> 
> 赞同：0
> 
> 时间：2013-04-22T08:23:55.450
> 
> 标签：matlab, visual-c++

我想在 C++ 中使用 MATLAB 代码。我使用[Matcom](http://www.sai.msu.su/sal/A/2/MATCOM.html)（用于将 M 文件转换为 C++ 的工具）将 M 文件添加到 C++ 当前项目。它编译成功，但运行时出错。

我创建了一个矩阵：

> ```
> bit_in_char = uint16([...
> 0 1 1 2 1 2 2 3 1 2 2 3 2 3 3 4 1 2 2 3 2 3 ...
> 3 4 2 3 3 4 3 4 4 5 1 2 2 3 2 3 3 4 2 3 3 4 ...
> 3 4 4 5 2 3 3 4 3 4 4 5 3 4 4 5 4 5 5 6 1 2 ...
> 2 3 2 3 3 4 2 3 3 4 3 4 4 5 2 3 3 4 3 4 4 5 ...
> 3 4 4 5 4 5 5 6 2 3 3 4 3 4 4 5 3 4 4 5 4 5 ...
> 5 6 3 4 4 5 4 5 5 6 4 5 5 6 5 6 6 7 1 2 2 3 ...
> 2 3 3 4 2 3 3 4 3 4 4 5 2 3 3 4 3 4 4 5 3 4 ...
> 4 5 4 5 5 6 2 3 3 4 3 4 4 5 3 4 4 5 4 5 5 6 ...
> 3 4 4 5 4 5 5 6 4 5 5 6 5 6 6 7 2 3 3 4 3 4 ...
> 4 5 3 4 4 5 4 5 5 6 3 4 4 5 4 5 5 6 4 5 5 6 ...
> 5 6 6 7 3 4 4 5 4 5 5 6 4 5 5 6 5 6 6 7 4 5 ...
> 5 6 5 6 6 7 5 6 6 7 6 7 7 8]); 
> ```

代码在 MATLAB 中运行成功，但在 VC 中出现错误“uint6 is not yet implemented”。MATLAB 和 VC 中的数据结构是否相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:50:42.920

该问题很可能是由 VC6 引起的。那是上个世纪的编译器。升级到仍然受支持的东西，它可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T06:37:45.637

在 MATLAB 2012b 中使用 matlab corder。

# android - android build/envsetup.sh addcompletions() "local T dir f" 是什么意思？

> ID：16142495
> 
> 赞同：1
> 
> 时间：2013-04-22T08:24:01.423
> 
> 标签：android, bash, build

我正在跟踪 Android 构建系统，发现了一些有趣的东西。

“local T dir f”是什么意思？

```
function addcompletions()
{                                                                                                                                             
    local T dir f

    # Keep us from trying to run in something that isn't bash.
    if [ -z "${BASH_VERSION}" ]; then 
        return
    fi   

    # Keep us from trying to run in bash that's too old.
    if [ ${BASH_VERSINFO[0]} -lt 3 ]; then 
        return
    fi   

    dir="sdk/bash_completion"
    if [ -d ${dir} ]; then 
        for f in `/bin/ls ${dir}/[a-z]*.bash 2> /dev/null`; do
            echo "including $f"
            . $f
        done 
    fi   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T09:15:45.270

本地 T 目录 f

在 bash 手册中：

*** 'local' local [OPTION] NAME[=VALUE] ... 对于每个参数，创建一个名为 NAME 的局部变量，并分配 VALUE。OPTION 可以是 'declare' 接受的任何选项。'local' 只能在函数内使用；它使变量 NAME 具有仅限于该函数及其子函数的可见范围。返回状态为零，除非在函数外部使用“local”、提供了无效的 NAME 或 NAME 是只读变量。

和

*** 'declare' 声明 [-aAfFilrtux] [-p] [NAME[=VALUE] ...]

如您所见，没有选项“T”声明。同时，在android的build/envsetup.sh中，“T”是这样使用的：T=$(gettop)，意思是android源码目录的top dir。

所以，我认为这只是一个错误。应该是“local dir f”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:37:43.420

上帝，我认为这只是 3 个变量...

# android - 跟踪Android/iOS下移动应用的数据库工作负载

> ID：16142500
> 
> 赞同：0
> 
> 时间：2013-04-22T08:24:25.497
> 
> 标签：android, ios, database, profiling, workload

我想了解在 Android 下运行的移动应用程序（第三方，即不是我开发的）的数据库工作量（对本地数据库的读/写）。

我的选择包括：

1.  询问应用程序的开发人员：怀疑这种方法是否有效
2.  查找测量典型移动应用程序的数据库工作量的科学论文。那将是完美的，但我还没有找到这样的论文:-(
3.  使用*emulator*、*profiler*和/或*trace-sensemaking*工具（例如检测事务）分析正在运行的应用程序

我需要选项 3 的解决方案，这是一个了解在 Android 下主动运行的移动应用程序的数据库工作负载的工具（iOS 解决方案也可以）

我明白这很难。对于初学者，我不能对正在写入的实际数据库做出任何假设，尽管它很可能是 SQLite。

我了解以下可能是解决方案的一部分：

*   模拟器，例如[http://developer.android.com/tools/help/emulator.html](http://developer.android.com/tools/help/emulator.html)
*   追踪工具
*   追踪意义构建工具

所以，总结一下：**如果你想了解在 Android 下运行的愤怒的小鸟的数据库工作负载。你会怎么做？**

任何信息都是有用的，因为我在这里从头开始:-) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:36:01.107

您可以使用 iOS 中的 Instruments ( [http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html) )实现**第 3点的解决方案。**

# java - 是否可以使用多个 java ObjetOutputStream 对象写入单个 java ObjectInputStream 对象？

> ID：16142506
> 
> 赞同：0
> 
> 时间：2013-04-22T08:24:45.033
> 
> 标签：java, sockets, stream, objectinputstream, objectoutputstream

我有一个标准的客户端/服务器设置。

我想构建的程序很像邮局（这是我的服务器）。多人（使用 ObjectOutputStream 的客户端）将带有附加地址的邮件交给办公室（使用单个 ObjectInputStream 的服务器），然后办公室将邮件发送到它应该去的地方。如果可能的话，我希望`ObjectInputStream`在服务器中有一个阻塞，等待“邮件”从*任何*ObjectOutputStream 进来，然后将“邮件”发送到它应该去的地方。这样我就可以只拥有一个完全专用于接收和发送数据的线程。

我将使用他们的 ObjectOutputStream 为每个人的客户端创建一个线程，但我希望在服务器中也不需要一个匹配的线程来与每个人进行通信。我对这个想法很感兴趣，因为我发现构建大量线程来单独处理连接是多余的，而在我的情况下，单个线程可能只会发送一次数据。

这可行吗？还是傻？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:37:13.323

使用 Java Message Service 的 JMS 队列，是本案例的设计模式。 [http://en.wikipedia.org/wiki/Java_Message_Service](http://en.wikipedia.org/wiki/Java_Message_Service)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:31:21.650

如果您在服务器应用程序中只有一个实例`ObjectInputStream`并且您有许多客户端，则该实例需要由所有线程共享，因此您需要同步对它的访问。

[你可以在这里](http://www.tutorialspoint.com/java/java_thread_synchronization.htm)阅读更多。希望这可以帮助。

**或者**

您可以拥有一个`ObjectInputStream`实例池，并使用像 Round Robin ( [doc](http://en.wikipedia.org/wiki/Round-robin_scheduling) ) 这样的分配算法，例如，您可以为每个 x 订单线程返回相同的实例......这将使服务器应用程序中的流程更加并行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T10:30:31.880

你的问题没有意义。您需要一对单独的`ObjectInputStream`and `ObjectOutputStream` *per`Socket`*。您*还*需要一个*`Thread`*per `Socket,`，除非您准备好忍受轮询 via 的明显限制`InputStream.available()`，这不会阻止您的读取阻塞。如果您使用对象序列化，您已经承诺阻塞 I/O，因此每个 Socket 都有一个线程。

# php - 如何获取另一个网站的元内容

> ID：16142510
> 
> 赞同：-2
> 
> 时间：2013-04-22T08:24:50.820
> 
> 标签：php

嗨，我正在做一个项目。在这个项目中，我需要另一个网站元内容。这是一个例子

这是远程网站元内容

```
<meta content="Kültür Sanat Edebiyat Portalı. Geniş Türkçe şiir ve şair arşivi. Yarışmalar, şiir etkinlikleri, sanat haberleri. Kitaplar ile ilgili geniş ve detaylı tanıtımlar. Resim tiyatro sergi." name="description"> 
```

我试过 php file_get_contents

```
<?php
$homepage = file_get_contents('http://antoloji.com/');
echo $homepage;
?> 
```

但无法找到仅获取元内容（描述部分）的方法谢谢您的建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:27:31.433

PHP 有一个非常有用的函数，[get_meta_tags](http://php.net/manual/en/function.get-meta-tags.php)，它允许您解析网站源的元标记。

```
<?php
// Assuming the above tags are at www.example.com
$tags = get_meta_tags('http://www.example.com/');

// Notice how the keys are all lowercase now, and
// how . was replaced by _ in the key.
echo $tags['author'];       // name
echo $tags['keywords'];     // php documentation
echo $tags['description'];  // a php manual
echo $tags['geo_position']; // 49.33;-86.59
?> 
```

# ios - 哪里可以为移动银行应用程序请求 beta 测试人员（美国）？

> ID：16142512
> 
> 赞同：0
> 
> 时间：2013-04-22T08:24:58.600
> 
> 标签：ios, mobile, banking, beta-testing, onlinebanking

我在一家为 iOS 创建移动银行应用程序的公司工作。我们现在正在美国寻找拥有美国银行账户或美国运通信用卡的beta测试者作为beta测试者；我们知道这是一个敏感话题。我们公司的核心信念是敏感数据仅以加密方式属于用户设备，并且只能在用户设备和银行之间使用。因此，我们强烈反对在用户设备和银行之间使用代理服务器作为代理的想法。我们现在正在寻找我们应用程序的 beta 测试人员。这让我想到了这个问题：我们应该在哪里为我们的移动银行应用程序请求 beta 测试人员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:29:39.550

几个月前我也遇到过类似的情况。解决方案是：银行自己的员工测试了该应用程序。我们也有一些来自银行的测试账户，所以我们可以测试自己（我们的开发人员，加上一个测试人员）。只允许三个帐户进行测试。在这种敏感的环境中，我会坚持参与项目并且实际上可以在真实条件下工作的人（项目经理、产品所有者或项目的股东，来自银行方面）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:56:13.530

1.  如果可能，请先模拟 API，然后先针对模拟的 API 进行测试，而不是使用真实数据。
2.  如果可能，在生产测试之前获取生产环境的副本并对其进行测试。
3.  确保有人测试应用程序的安全性。如果设备上存储了非常敏感的数据，请确保没有人可以从被盗设备中获取信息（越狱攻击、数据被加密、加密密钥/密码不在内存中浮动等、应用程序之间的中间人攻击和服务器，日志中没有敏感数据等）
4.  根据定义，Beta 测试人员应该是真正的用户。你可以在任何地方挑选它们。但是，请确保您在向他们提供申请之前已尽一切可能。特别是，确保用户无法查看/修改其他用户的数据。确保您作为开发者公司看不到他们的数据。确保您可以随时阻止他们访问该应用程序。

# javascript - 如何将表单元素值传递给 onclick 事件？

> ID：16142513
> 
> 赞同：0
> 
> 时间：2013-04-22T08:25:00.617
> 
> 标签：javascript, forms, events, onclick, form-submit

我正在尝试在我的一个页面上编写一个 iPhone 应用程序，我想捕获表单数据，然后使用 onclick 事件将值传递给将打开 SMS 窗口的 JavaScript 函数。

下面的`onclick`事件传递给 JavaScript 函数并完美运行`txt1`。`txt2`

```
<input onclick="window.plugins.smsComposer.showSMSComposer('txt1', txt2');" type="button" value="Send Reboot Command Via SMS" /> 
```

但是，我需要用用户在表单中输入的实际值替换`txt1`和。`txt2`

以下是页面的代码，希望它有助于理解我想要实现的目标。

### 用于捕获表单字段值的 JavaScript 代码：

```
function updateTxt(field,toField){
    var field = document.getElementById(field);
    var toField = document.getElementById(toField);
    toField.innerHTML=field.value;
} 
```

### HTML页面代码：

```
<div data-role="page" id="DevicesConfigurePage" data-add-back-btn="true">
  <div data-role="header" id="myheader" data-position="fixed">
    <h1>Reeboot</h1>
  </div>
<br>              
<input type="text" id="box1" onkeyup="updateTxt('box1','txt1');"><br>
<input type="text" id="box2" onkeyup="updateTxt('box2','txt2');"><br>
<input type="text" id="box3" onkeyup="updateTxt('box3','txt3');"><br>
<input type="text" id="box4" onkeyup="updateTxt('box4','txt4');"><br>

<input onclick="window.plugins.smsComposer.showSMSComposer(id="txt1", id="txt2");" type="button" value="Send Reboot Command Via SMS" /><br />                            <br>
<!-- /content --> 
<p class="copyright">Copyright &copy; TrackingCentral Pty Ltd</p>
</div><!-- /page --> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T08:35:26.300

我看不出您提供的 jQuery 和 HTML 代码之间有任何关系。（在您进一步发布您的帖子之前）。我认为您想在某个特定区域设置特定值。你可以试试这个。

```
$('#toField').html(field.value); 
```

代替

```
toField.innerHTML=field.value; 
```

并解决这个问题：

```
var field = document.getElementById('field');
var toField = document.getElementById('toField'); 
```

# api - 从另一个动作控制器调用 Zend_Rest Action 的最佳方式

> ID：16142515
> 
> 赞同：1
> 
> 时间：2013-04-22T08:25:20.117
> 
> 标签：api, zend-framework, rest, controller, action

我在我的 Zend (1.12) 应用程序中设置了一个与 Rest 一起使用的“Api”模块。所以在那个模块中，控制器扩展了 Zend_Rest_Controller。它工作正常，从终端或 ajax 调用中使用它非常有用。每个控制器都返回 json。

只是一个简单的 Rest Controller 示例：

```
class Api_NewsController extends Zend_Rest_Controller
{
...
    public function postAction()
    {
        $param = $this->getRequest()->getParams();
        $news = new Api_Model_News();
        $insert = $news->insert($param['id']);
        $this->getResponse()->appendBody( json_encode($param) );
    }
.... 
```

在终端的 curl 中使用它

```
curl -v http://example/api/news/123 
```

从 jQuery ajax 使用它

```
$.post("http://example/api/news", { "id": 123 },
    function(data){}, "json"); 
```

但现在的目标是从另一个控制器（从另一个模块）调用那个 Rest **postAction 。**最好的方法是怎样的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:26:23.017

You can use the View Helper "action": [http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.action](http://framework.zend.com/manual/1.12/en/zend.view.helpers.html#zend.view.helpers.initial.action)

Or do it the "proper" API way and use curl?

# c# - 寻找带有订阅的 nservicebus 示例

> ID：16142517
> 
> 赞同：0
> 
> 时间：2013-04-22T08:25:21.410
> 
> 标签：c#, nservicebus

我遵循了以下教程，并且成功地看到控制台更新说明了它的预期，尽管查看实际队列我看不到任何订阅或传递的消息。我猜这个教程（见下面的链接）正在使用与 nservicebus 不同的方法。是否有教程或我可以遵循的使用订阅的内容，以便我可以监视通过队列传输的消息？

[http://docs.particular.net/samples/](http://docs.particular.net/samples/)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:19:03.210

您在队列中看不到消息的原因是该进程立即将消息从队列中拉出。

# java - 带有 ExtJS 的 IIS 服务器前端客户端无法向 Java 后端服务器应用程序请求（Store.load）

> ID：16142518
> 
> 赞同：0
> 
> 时间：2013-04-22T08:25:22.187
> 
> 标签：java, tomcat, iis, extjs, java-ee-6

我有问题，在我的情况下，我使用 ExtJS 作为 Web 客户端前端框架，并且前端部署在 IIS 服务器中，我尝试使用 Ext.data.Store.load() 请求部署在 Apache 中的后端应用程序服务器Tomcat（因为我的后端编程语言是Java），当我执行Ext.data.Store.load（）时没有任何动作，为什么Ext.data.Store.load（）不能在IIS服务器中工作，而它工作得很好当前端部署在 Apache Tomcat 中时，

我必须使用 IIS 服务器配置一些东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:10:57.210

您是否将存储代理配置为调用指定 tomcats host:port/contextpath 的 tomcat 服务？

默认情况下，存储代理将只使用上下文路径。这就是在 tomcat 中部署时相同的代码库按预期工作的原因。

# iphone - 从选项卡式应用程序中的另一个选项卡显示导航控制器内的视图控制器

> ID：16142520
> 
> 赞同：1
> 
> 时间：2013-04-22T08:25:37.020
> 
> 标签：iphone, ios6, uitabcontroller

我有一个选项卡式应用程序，每个选项卡都有一个导航控制器，其中包含表视图。

在一个选项卡的视图中，我想展示另一个选项卡的第一个视图控制器。

我`tabViewController.viewControllers`的每个选项卡都有一系列导航控制器。

我似乎无法在不访问导航控制器的情况下直接呈现视图控制器，我猜你也无法呈现导航控制器。我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:35:22.167

如果我理解正确，您可以访问您的根控制器：`[[tabViewController.viewControllers objectAtIndex:index] objectAtIndex:0]`，但我认为您不能两次显示一个视图。因此，您仍然应该重新创建此视图控制器以将其作为 childViewController 显示在另一个选项卡中，例如

# windows - 在 Delphi 下终止应用程序时线程未终止

> ID：16142522
> 
> 赞同：2
> 
> 时间：2013-04-22T08:25:53.017
> 
> 标签：windows, multithreading, delphi

假设我有一个线程在应用程序终止时仍在运行

（此线程无法终止，因为它等待 Windows api 调用返回，并且可能很长......）

如果应用程序关闭，线程会发生什么？

**它可以引发异常**（我在 Delphi 下）吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T08:50:03.760

我会说一个例外是非常合理的。当您调用`Application.Terminate`这将导致以下事件序列：

1.  来电`PostQuitMessage`。
2.  `Application.Terminated`被设置为`True`。
3.  `Application.Run`返回。
4.  `System.Halt`叫做。
5.  运行退出程序，特别`DoneApplication`是它将拆除`Application`它拥有的所有组件。嗯，最好希望您的线程不会访问`Application`.
6.  `FinalizeUnits`叫做。哦哦。内存管理器已关闭，旁边还有更多。
7.  [`ExitProcess`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682658.aspx)叫做。现在你的线程被杀死了。

您的线程将继续运行，直到调用`ExitProcess`. 如果它执行的任何代码都会受到对`DoneApplication`and的调用的影响`FinalizeUnits`，那么您应该预料到会出现问题。

# asp.net-mvc-3 - 使用 ASP.NET MVC 3 中的 ViewBag 从控制器传递图像并显示在视图中

> ID：16142526
> 
> 赞同：7
> 
> 时间：2013-04-22T08:25:57.707
> 
> 标签：asp.net-mvc-3, viewbag

我想这是非常直接的事情，但我不知道该怎么做。在我的控制器中，我有：

```
 public ViewResult ShowForm()
        {
            ViewBag.Title = Resources.ApplicationTitle;
            ViewBag.LabelStatus = Resources.Status;
            //Logo
            ViewBag.Logo =@"C:\Images\Logo.png";
            return View("ShowForm");
        } 
```

在我看来，我试试这个：

```
<div id="drawForm">
<img src="@ViewBag.Logo" alt="Logo" />    
</div> 
```

但是，当我运行它时，我只会得到“徽标”文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T08:33:18.237

用于`Server.MapPath`获取图像的正确路径。假设您的 images 文件`Content`夹位于通常包含在 MVC 项目中的文件夹内。你可以这样做：

```
public ViewResult ShowForm()
{
    //Logo
    ViewBag.Logo = Server.MapPath("~") + @"Content\Images\Logo.png";
    return View("ShowForm");
} 
```

而且您不必更改视图中的代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T08:46:40.553

尝试这个：

```
ViewBag.Logo = Url.Content("~/Content/Images/Logo.png"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T08:28:54.937

你需要一个 ImageController 来渲染它。

看到这个：

[ASP.NET MVC3：通过控制器加载图像](https://stackoverflow.com/questions/6225485/asp-net-mvc3-image-loading-through-controller)

还有这个： [ASP.NET MVC 控制器可以返回图像吗？](https://stackoverflow.com/questions/186062/can-an-asp-net-mvc-controller-return-an-image)

一旦你有一个控制器，你可以渲染如下：

```
public class ImageController{

public ActionResult ShowImage(string path) 
{

    return File(path);
}

} 
```

在您看来：

```
<img src="@Url.Action("Render","Image", new {id =1  // or path })" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T08:48:26.673

```
public ActionResult ShowForm()
        {
            ViewBag.Title = Resources.ApplicationTitle;
            ViewBag.LabelStatus = Resources.Status;
            //Logo
           byte[] imgbytes =  File.ReadAllBytes(@"C:\Images\Logo.png");
           return File(imgbytes , "image/png");
        }

<div id="drawForm">
<img src="controllerName/ShowForm" alt="Logo" />    
</div> 
```

# delphi - Delphi IdNNTP：根据NZB文件从Usenet下载文件

> ID：16142527
> 
> 赞同：0
> 
> 时间：2013-04-22T08:25:57.223
> 
> 标签：delphi, indy, nntp, usenet

我有一个 NZB 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<nzb xmlns="http://www.newzbin.com/DTD/2003/nzb">
 <head>
   <meta type="title">Your File!</meta>
   <meta type="tag">Example</meta>
 </head>
 <file poster="Joe Bloggs &lt;bloggs@nowhere.example&gt;" 
       date="1071674882" 
       subject="Here's your file! abc-mr2a.r01 (1/2)">
   <groups>
     <group>alt.binaries.newzbin</group>
     <group>alt.binaries.mojo</group>
   </groups>
   <segments>
     <segment bytes="102394" number="1">123456789abcdef@news.newzbin.com</segment>
     <segment bytes="4501" number="2">987654321fedbca@news.newzbin.com</segment>
   </segments>
 </file>
</nzb> 
```

有没有办法使用 Indy IdNNTP 下载和组装这个文件？我将不胜感激任何示例代码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:24:14.783

实际上，这很容易：

```
 Xml := TXmlVerySimple.Create;
  Xml.Text:=recieved_nzb;

  //Each <file> section
  ChildNodes := Xml.Root.ChildNodes;
  for q := 0 to ChildNodes.Count - 1 do
    begin    
      IdNNTP1.SelectGroup(ChildNodes.Items[q].Find('groups').Find('group').Text);
      SegmentNodes:=ChildNodes.Items[q].Find('segments').ChildNodes;

      //Each <segment> (message)
      for w := 0 to SegmentNodes.Count - 1 do
      begin
          idNNTP1.GetArticle(SegmentNodes.Items[w].Text,IdMessage1);
          IdMessage1.SaveToFile('c:\!!!!\'+SegmentNodes.Items[w].Text, false);
          Application.ProcessMessages;
      end;
    end; 
```

# c++ - 运行时如何确定 Visual Studio C++ 中的调试或发布模式

> ID：16142528
> 
> 赞同：5
> 
> 时间：2013-04-22T08:26:10.580
> 
> 标签：c++, debugging, visual-studio-2012, macros, release

我正在做我的学校作业。在调试模式期间，我想打开我的控制台模式，在发布期间关闭控制台。

我按照stackoverflow中的建议尝试了marco，但它不起作用。我正在使用 Visual Studio 2012（空项目 C++）

```
#if DEBUG
 //doing something
#else
 //Release mode doing something
#endif 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T08:38:28.620

`#if DEBUG`仅当您`DEBUG`通过编译器选项定义时才有效。

默认情况下，`DEBUG`未定义，但`_DEBUG`已定义。尝试`#if defined(_DEBUG)`或更改您的编译器选项（通过项目属性/配置属性/C/C++/预处理器/预处理器定义）来定义`DEBUG`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:39:24.963

`#if DEBUG`将在编译时而不是在运行时自行解决。

`NDEBUG`是在发布模式下定义的非常标准的宏。而且我认为 Visual Studio`_DEBUG`在调试模式下定义了宏。

在任何情况下，您都可以在 Visual Studio 中定义自己的宏

转到`Project->Properties->Configuration Properties->C/C++->Preprocessor -> Preprocessor Definitions`那里，您可以在您选择的构建配置中为您的项目添加宏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:04:14.027

从您的评论看来，您遇到的问题似乎是打开并连接了一个控制台窗口`stdout`（与 DEBUG 与 RELEASE 构建几乎没有关系）。

请参阅 MS 支持文章[信息：从 GUI 应用程序调用 CRT 输出例程，以](http://support.microsoft.com/kb/105305/en-us)获取有关如何让 GUI 程序打开控制台并`stdout`指向它的工作示例：

```
#include <stdio.h>
#include <io.h>
#include <fcntl.h>

// ...

int hCrt;
FILE *hf;

AllocConsole();
hCrt = _open_osfhandle(
    (long) GetStdHandle(STD_OUTPUT_HANDLE),
    _O_TEXT
    );
hf = _fdopen( hCrt, "w" );
*stdout = *hf;
int i = setvbuf( stdout, NULL, _IONBF, 0 );
puts("hello world"); 
```

实际上，在进一步的测试中，您更简单的使用技术`freopen("CONOUT$","w",stdout);`也有效。由于某种原因，在我最初的测试中，它似乎不起作用。您可能还需要`setvbuf()`调用以避免缓冲问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-17T20:09:29.460

这是针对 Visual Studio 2019 的：

```
#ifdef _DEBUG
// do something in a debug build
#else
// do something in a release build
#endif 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-14T05:53:25.983

对于 C#，常量 DEBUG 工作正常，只需确保在项目属性中启用它即可。

转到项目属性（通过在解决方案资源管理器中右键单击您的项目），然后选择窗口右侧的构建选项并选中定义调试常量复选框。

然后你可以使用这样的代码。

```
#if DEBUG

// debug mode

#else

//release mode

#endif 
```

# javascript - AngularJS，选择 onChange 或 ngChange

> ID：16142533
> 
> 赞同：11
> 
> 时间：2013-04-22T08:26:29.440
> 
> 标签：javascript, angularjs

我是新`angularjs`用户和角度用户界面。我对标签很感兴趣。

这是我的`html`：

```
<select id="part1" ui-select2 ng-model="params.id" style="width: 200px;">
    <option value="">Provinsi</option>
    <option ng-repeat="v in prov" value="{{v.id}}" title="{{v.text}}"
    ng-selected="v.id == params.id">{{v.text}}</option>
</select>
<select id="part2" ui-select2 ng-model="params2.id" style="width: 200px;" ng-disabled="true">
    <option value="">Kabupaten</option>
    <option ng-repeat="y in kab" value="{{y.id}}" title="{{y.text}}"
    ng-selected="y.id == params.id">{{y.text}}</option>
</select> 
```

这是我的`app.js`：

```
$http.get('json/provinsiData.json').success(function(datax) {
    $scope.prov = datax;
});

//part2 data
$http.get('json/acehData.json').success(function(datay) {
    $scope.kab = datay;
});

$scope.params = {}
$scope.params2 = {} 
```

如您所见`select part2`，已禁用。

如何创建类似于以下条件的事件更改？

```
if selected option of part1 is index 0
then select part2 disabled = false and load json part2 data. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-31T15:47:41.650

angular-js select 支持 ng-change 属性，该属性可以调用范围内定义的任何 javascript 方法。例子：

但是，您最好的选择可能只是评估 ng-disabled= 属性中的 $scope 表达式，例如 ng-disabled="params.id == 'X'"。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-03T04:29:22.277

With Angular, we usually aren't looking for events to trigger changes. Instead, when the model changes, the view should update to reflect those changes.

In this case, the second element should be enabled (not disabled) depending on a value in the model. When the model value connected to the first select menu satisfies some condition, enable the second menu. Yes, technically there's an event, but we don't need to care about it, all that matters are the model's values.

Here's a simplified example of how this might work:

```
<select ng-model="selection.item">
  <option value="">Clothing</option>
  <option ng-repeat="item in clothes">{{ item }}</option>
</select>

<select ng-model="selection.size" ng-disabled="!selection.item">
  <option value="">Size</option>
  <option ng-repeat="size in sizes">{{ size }}</option>
</select> 
```

The second select menu's `ng-disabled` attribute is a simple expression which basically evaluates to *"disable me if `selection.item` does not have a value"*. That could just as easily be a more complex expression or a function.

Here's [a plunkr based on the code above](http://plnkr.co/edit/6I6xCX?p=preview)

# jquery - 如何获取复选框列表当前选定的项目值

> ID：16142535
> 
> 赞同：4
> 
> 时间：2013-04-22T08:26:30.757
> 
> 标签：jquery, checkboxlist

我有一个复选框列表。当我检查了一个项目后，我将获得选定的项目值（不是所有选定的项目值，只有我现在选择的值），我该如何在 jquery 中做到这一点。

这是我的代码：

```
<asp:CheckBoxList ID="CheckBoxList1" runat="server" Enabled="False">
        <asp:listitem value="1"></asp:listitem>
        <asp:listitem value="2"></asp:listitem>
        <asp:listitem value="3"></asp:listitem>
        <asp:listitem value="4"></asp:listitem>
    </asp:CheckBoxList> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T08:34:39.023

您可以为所有复选框注册一个单击事件处理程序，事件处理程序内部`this`将指向单击的复选框

如果 jQuery >= 1.7

```
$('#CheckBoxList1').on('click', ':checkbox', function() {
    if ($(this).is(':checked')) {
        // handle checkbox check
        alert($(this).val());
    } else {
        // checkbox is unchecked
        alert('unchecked')
    }
}); 
```

如果 jQuery < 1.7

```
$('#CheckBoxList1 :checkbox').live('click', function() {
    alert($(this).is(':checked'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:33:48.390

这将显示复选框 onclick 的值：

```
$('input:checkbox').click(function() {
    alert($(this).val());
}); 
```

# asp.net - SQL 更新 ASP.NET

> ID：16142538
> 
> 赞同：1
> 
> 时间：2013-04-22T08:26:35.880
> 
> 标签：asp.net, html, sql, vb.net, formview

我对asp.net 很陌生。我做了这个更新sql语句：

```
Dim dbconn As SqlConnection
    Dim dbcomm As SqlCommand

    dbconn = New SqlConnection(System.Configuration.ConfigurationManager.AppSettings("sqlString"))
    dbconn.Open()

    Dim updateCmd As String = "UPDATE tbl_Project SET ID = @ID," _
     & " Titel = @Titel, CatID = @CatID, Website = @Website," _
     & " Naslag = @Naslag; WHERE ID = @ID;"

    dbcomm = New SqlCommand(updateCmd, _
     dbconn)
    dbcomm.Parameters.Add(New SqlParameter("@ID", SqlDbType.Int))
    dbcomm.Parameters.Add(New SqlParameter("@Titel", _
       SqlDbType.VarChar))
    dbcomm.Parameters.Add(New SqlParameter("@CatID", _
       SqlDbType.Int))
    dbcomm.Parameters.Add(New SqlParameter("@Website", _
       SqlDbType.VarChar))
    dbcomm.Parameters.Add(New SqlParameter("@Naslag", _
       SqlDbType.VarChar))
    dbcomm = New SqlCommand(updateCmd, dbconn)
    dbcomm.ExecuteNonQuery()` 
```

我在 Forview 编辑模式下进行了所有设置。这个想法是，当您搜索记录并单击`details`它时，您将进入可编辑的项目视图。在详细信息页面中，您可以对其进行编辑并更新项目。

***问题***

当我单击更新按钮时，它显示：声明我拥有的变量@ID。而且我不知道我做错了什么。

这是我的表单视图：

```
 <table class="style1">
                <tr>
                    <td class="style2">
                        <asp:Label ID="Label1" runat="server" CssClass="kopje" Text="Categorie"></asp:Label>
                    </td>
                    <td class="style3">
                        <asp:Label ID="Label2" runat="server" CssClass="kopje" Text="Klant">        </asp:Label>
                    </td>
                    <td class="style4">
                        <asp:Label ID="Label3" runat="server" CssClass="kopje        " Text="Website"></asp:Label>
                    </td>
                    <td>
                        <asp:Label ID="Label5" runat="server" CssClass="kopje" Text="Titel">        </asp:Label>
                    </td>
                </tr>
                <tr>
                    <td class="style2">
                        <asp:DropDownList ID="DropDownCat" runat="server" 
                            DataSourceID="SqlDataSourceDrop" DataTextField="Categorie" 
                            DataValueField="Cat_ID" value="0">
                        </asp:DropDownList>
                        <asp:SqlDataSource ID="SqlDataSourceDrop" runat="server" 
                            ConnectionString="<%$ ConnectionStrings:Goed %>" 
                            SelectCommand="SELECT * FROM [tbl_Cat]">
                            <SelectParameters>
                                <asp:QueryStringParameter Name="ID" QueryStringField="ID" Type="Decimal" />
                            </SelectParameters>
                        </asp:SqlDataSource>
                    </td>
                    <td class="style3">
                        <asp:DropDownList ID="DropDownList1" runat="server" 
                            DataSourceID="SqlDataSourceKlant" DataTextField="Bedrijf" 
                            DataValueField="Klant_ID">
                        </asp:DropDownList>
                        <asp:SqlDataSource ID="SqlDataSourceKlant" runat="server" 
                            ConnectionString="<%$ ConnectionStrings:Goed %>" 
                            SelectCommand="SELECT * FROM [tbl_Klant]"></asp:SqlDataSource>
                    </td>
                    <td class="style4">
                        <asp:TextBox ID="TextBoxWebsite" runat="server" Text='<%# Eval("Website") %>'></asp:TextBox>
                    </td>
                    <td>
                        <asp:TextBox ID="TextBoxTitel" runat="server" Text='<%# Eval("Titel") %>'></asp:TextBox>
                    </td>
                </tr>
                <tr>
                    <td class="style2">
                        <asp:Label ID="TextBoxOmschrijving" runat="server" CssClass="kopje" 
                            Text="Omschrijving"></asp:Label>
                    </td>
                    <td class="style3">
                        &nbsp;</td>
                    <td class="style4">
                        &nbsp;</td>
                    <td>
                        &nbsp;</td>
                </tr>
                <tr>
                    <td class="style2">
                        <asp:TextBox ID="TextBoxslag" runat="server" Height="200px" 
                            Text='<%# Eval("Naslag") %>' TextMode="MultiLine" Width="350px"></asp:TextBox>
                    </td>
                    <td class="style3">
                        &nbsp;</td>
                    <td class="style4">
                        &nbsp;</td>
                    <td>
                        &nbsp;</td>
                </tr>
                <tr>
                    <td class="style2">
                        <asp:LinkButton ID="LinkButton1" runat="server" 

CausesValidation="True" 
  CssClass="buttons" Text="Update"
  OnClientClick="Verzend"></asp:LinkButton>
                        </td>
                        <td class="style3">
                            &nbsp;</td>
                        <td class="style4">
                            &nbsp;</td>
                        <td>
                            &nbsp;</td>
                    </tr>
                </table>
            </EditItemTemplate>
</asp:FormView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:28:07.467

相信你需要`AddWithValue`。您需要指定的值`@ID`

```
dbcomm.Parameters.AddWithValue("@ID", "TheValue");
dbcomm.Parameters.AddWithValue("@Titel", "TitelValue"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:41:57.473

你有一个`(;)`不应该在后面的分号

`"@Naslag" in your SQL-command (" Naslag = @Naslag**;** WHERE ID = @ID;")`. 可能足以导致您出现该错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:01:09.267

我在你的代码中发现了一些错误，正确的代码应该是

```
Dim updateCmd As String = "UPDATE tbl_Project SET ID = @ID, Titel = @Titel, CatID = @CatID, Website = @Website, Naslag = @Naslag WHERE ID = @ID"
dbcomm = New SqlCommand(updateCmd, dbconn)
dbcomm.Parameters.AddWithValue("@ID", value)
dbcomm.Parameters.AddWithValue("@Titel", value)
dbcomm.Parameters.AddWithValue("@CatID", value)
.........
.........
// remove this-> dbcomm = New SqlCommand(updateCmd, dbconn)
dbcomm.ExecuteNonQuery() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T08:49:57.913

请在您的代码中进行以下更改

```
 SqlCommand _cmd = _con.CreateCommand();
        _cmd.CommandText = "UPDATE tbl_Project SET ID = @ID," _
         & " Titel = @Titel, CatID = @CatID, Website = @Website," _
         & " Naslag = @Naslag WHERE ID = @ID";
        _cmd.Parameters.Add(new SqlParameter("@ID", '1'));
        _cmd.Parameters.Add(new SqlParameter("@Titel", 'title'));
        _cmd.Parameters.Add(new SqlParameter("@CatID", '1'));
        _cmd.Parameters.Add(new SqlParameter("@Website", 'www.google.com'));
        _cmd.Parameters.Add(new SqlParameter("@Naslag", 'Naslag'));
        if (_cmd.ExecuteNonQuery() > 0)
            return "Record Successfully Updated";
        else
            return "Record not Affected to DataBase"; 
```

# php - 无法在 Internet Explorer 9 ActiveX 过滤上发送发布请求 Jquery $.Post

> ID：16142541
> 
> 赞同：0
> 
> 时间：2013-04-22T08:26:59.727
> 
> 标签：php, jquery

我对 Iexplore 9 ActiveX 过滤有疑问。

我创建了一个通过 jquery $.post 设置会话的应用程序，当我在 Iexplore 9 中打开 ActiveX 过滤时，它会阻止发布请求。

```
$('.sidid').click(function(){
    val = $(this).val();
    if ($(this).is(':checked')) { //when checked
        $.post("session_cetak_po.php", {"sidid":val}, function(results) {
        });
    }else{ //when unchecked
        $.post("session_cetak_po.php", {"sidid":val,"unchecked":"1"}, function(results) {
        });
    }
}); 
```

任何建议如何解决它？

谢谢之前:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:46:18.490

不要打开 ActiveX 过滤。:)

使用 load() 而不是 post()。load() 通过 GET 发送数据

# delphi - 为什么复制功能在 64 位 Delphi XE3 中表现不同？

> ID：16142544
> 
> 赞同：8
> 
> 时间：2013-04-22T08:27:07.850
> 
> 标签：delphi, copy, delphi-xe3

在 Delphi XE3 中，*Copy*函数可用于字符串类型，有或没有第三个参数。例如，

```
s := '1234567890';
Writeln(Copy(s, 2)); 
```

如果为 32 位 EXE 编译，上述打印 234567890。但是，当相同的代码编译为 64 位 EXE 时，它不会打印任何内容。

为什么是这样？在将 32 位应用程序移植到 64 位时，我实际上必须将所有此类代码更改为例如*Copy(s, 2, Length(s) - 1) 。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T08:36:44.997

我无法重现您报告的行为。当我在完全更新的 64 位 XE3 中编译该代码时，该代码产生了预期的输出。

我的结论是：

1.  您尚未完全更新您的 XE3 安装。
2.  您的代码正在使用您的代码`Copy`中包含的不同函数。

感谢@bummi 指出证明第1 项是解释的[QC 报告。](http://qc.embarcadero.com/wc/qcmain.aspx?d=113805)您的解决方案是（显然）应用更新。

# internet-explorer - IE 10 缺少搜索偏好

> ID：16142546
> 
> 赞同：7
> 
> 时间：2013-04-22T08:27:20.507
> 
> 标签：internet-explorer, internet-explorer-10, ie-developer-tools

在我的项目中，我使用 IE10 来修复一些错误。该项目在不同的文件夹中有许多同名的 main.js 文件。如下所示：

```
JS (folder)
  --> folderOne
      -- main.js
  --> folderTwo
      -- main.js
  --> folderThree
      -- main.js 
```

现在，当我需要选择文件夹中的文件`folderThree`时，我单击[`file chooser`](http://msdn.microsoft.com/en-us/library/hh968260%28v=vs.85%29.aspx)显示所有带有名称的 js 文件`main.js`。现在要获取我需要的文件，我需要将鼠标一一悬停在所有文件上，以检查文件的来源目录。这个过程真的很烦人。我认为必须有其他替代方案，或者它可能已被 IE 开发人员忽略。无论如何要解决这个问题？

在 Mozilla firebug 中，用户可以根据文件夹名称搜索文件名，这对用户非常友好（恕我直言）。

PS：以上场景只是示例。实际上，在我的项目中，我有许多具有相同文件名的文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T11:54:17.120

一篇旧帖子指出 FireBug Lite 可与 IE 配合使用，

[`Old Post`](https://stackoverflow.com/questions/13508449/alternatives-to-f12-developer-tools-in-internet-explorer-10-metro)

我认为这将很容易解决问题，就像 IE 一样。[`Console methods`](http://msdn.microsoft.com/en-us/library/ie/hh772183%28v=vs.85%29.aspx)可能有效或无效，但[萤火虫](https://getfirebug.com/firebuglite)肯定会这样做.. :)

它还具有 js 版本，您可以将其包含在`<head>`html 文件中。

有一个技巧可以参考这个[`video`](https://www.youtube.com/watch?v=vLJ2RaNZ22E)，它将代码添加到 IE 10 和 firebug 的快捷方式中

我希望这会做到，

# objective-c - 首先在表格视图的单独部分中显示收藏夹

> ID：16142549
> 
> 赞同：0
> 
> 时间：2013-04-22T08:27:29.637
> 
> 标签：objective-c

我正在制作一个应用程序，用户可以在其中收藏详细视图中的不同项目。

我有一个表格视图，其中显示了所有项目，并且我想在同一个表格视图的单独部分中显示收藏夹。任何想法如何做到这一点？

此时我将所有收藏夹保存在一个名为 favouriteItems 的 NSMutableArray 中。

我想我必须从原始数组中删除最喜欢的对象。但是我可以用两个数组填充 tableview 吗？一个数组，最喜欢的放在第一部分，其余的放在第二部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:49:34.867

你当然可以。您只需要表格视图中的 2 个部分。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 2;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    switch (section) {
        case 0:
            return normalItems.count;
            break;
        case 1:
            return favouriteItems.count;
        default:
            break;
    }
    return 0;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    switch (section) {
        case 0:
            return @"Normal Items";
            break;
        case 1:
            return @"Favorite Items";
        default:
            break;
    }
    return nil;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"MyCell";

    CeldaCell *cell = (CeldaCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[CeldaCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    switch (indexPath.section) {
        case 0:
            cell.textLabel.text = [normalItems objectAtIndex:indexPath.row];
            break;
        case 1:
                        cell.textLabel.text = [favouriteItems objectAtIndex:indexPath.row];
            break;
    }

    return cell;
} 
```

# c++ - C ++如何每10秒检查一次时间？

> ID：16142552
> 
> 赞同：2
> 
> 时间：2013-04-22T08:27:32.237
> 
> 标签：c++, time

我正在写一个检查点。每次运行循环时我都会检查。我认为这会浪费大量的 CPU 时间。我想知道如何每 10 秒检查一次系统时间？

```
time_t start = clock();
while(forever)
{
    if(difftime(clock(),start)/CLOCKS_PER_SEC >=timeLimit)
    {
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T08:32:40.100

非常简短的回答是，如果您是新手程序员，这*非常困难。*

现在有几个可能性：

*   睡十秒钟。这意味着您的程序基本上没有意义。

*   使用`alarm()`和信号处理程序。这很难做到正确，因为您不能在信号处理程序中做任何花哨的事情。

*   使用 a`timerfd`并将时序逻辑集成到您的 I/O 循环中。

*   为定时器设置一个专用线程（然后可以休眠）；这非常困难，因为您需要考虑同步所有共享数据访问。

这里要带回家的一点是，您的问题没有简单的解决方案。您需要将时序逻辑深入集成到您现有的程序流程中。该流程应该是某种“主循环”（例如，像`epoll_wait`or的 I/O 多路复用循环`select`），可能是多线程的，并且该循环应该获取计时器已触发的事实。

那并没那么简单。

* * *

这是一个切线，可能具有指导意义。基本上有两种计算机程序（除了所有其他类型）：

一种是尽可能高效地执行一项特定任务然后完成的程序。例如，这类似于“生成 SSL 密钥对”或“查找文件中与 X 匹配的所有行”。就程序流程而言，这些是易于编写和理解的程序。

另一种是与用户交互的程序。这些程序无限期地停留并响应用户输入。（基本上任何类型的 UI 或游戏，但也包括 Web 服务器。）从控制流的角度来看，这些程序大部分时间都在做......*什么都不*做。他们只是空闲等待用户输入。因此，当您考虑如何对此进行编程时，如何使程序什么都不做？这是“主循环”的核心：它是一个循环，它告诉操作系统让进程保持睡眠状态，*直到*发生有趣的事情，然后处理有趣的事件，然后重新进入睡眠状态。

直到您了解如何什么*都不*做，您才能设计第二种程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T08:32:35.693

如果您需要精度，您可以使用 null 参数调用 select() 但有延迟。这精确到毫秒。

```
struct timeval timeout= {10, 0};
select(1,NULL,NULL,NULL, &timeout); 
```

如果你不这样做，只需使用 sleep()：

```
sleep(10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:36:20.367

最简单的方法（在单线程环境中）是休眠一段时间并反复检查总等待时间是否已过期。

```
int sleepPeriodMs = 500;
time_t start = clock();
while(forever)
{
    while(difftime(clock(),start)/CLOCKS_PER_SEC <timeLimit) // NOTE: Change of logic here!
    {
        sleep(sleepPeriod);
    }
} 
```

请注意，这`sleep()`不是很准确。如果您需要更高精度的计时（即分辨率优于 10 毫秒），您可能需要更深入地挖掘。此外，对于 C++11，还有`<chrono>`提供更多功能的标头。

```
using namespace std::chrono;

int sleepPeriodMs = 500;
time_t start = clock();
while(forever)
{
    auto start = system_clock()::now()
    // do some stuff that takes between [0..10[ seconds
    std::this_thread::sleep_until(start+seconds(10));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T08:34:25.637

您可以在程序中使用事件循环并安排计时器进行回调。[例如](http://doc.dvgu.ru/devel/ev.html#ev_timer__relative_and_optionally_repeating_timeouts)，您可以使用[libev](http://software.schmorp.de/pkg/libev.html)制作事件循环并添加计时器。

```
 ev_timer_init (timer, callback, 0., 5.);
   ev_timer_again (loop, timer);
   ...
   timer->again = 17.;
   ev_timer_again (loop, timer);
   ...
   timer->again = 10.;
   ev_timer_again (loop, timer); 
```

如果您在特定工具包中编写代码，则可以使用其他事件循环，gtk、qt、glib 有自己的事件循环，因此您可以使用它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T08:29:09.157

只需添加一个[sleep](http://linux.die.net/man/3/sleep)调用即可为系统提供 CPU 时间：

```
time_t start = clock();
while(forever)
{
    if(difftime(clock(),start)/CLOCKS_PER_SEC >=timeLimit)
    {
        break;
    }
    sleep(1); // <<< put process to sleep for 1s
} 
```

# android - 当用户按下时关闭微调器的对话框

> ID：16142561
> 
> 赞同：1
> 
> 时间：2013-04-22T08:28:11.000
> 
> 标签：android, dialog, spinner

首先对不起我的英语。我知道这不是很好，但我希望你能理解我。我已经研究了几个小时。我在布局文件中创建了一个微调器，将 spinnerMode 参数设置为“对话框”：

```
<Spinner
        android:id="@+id/spinner2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/llBarra_list"
        android:drawSelectorOnTop = "true"
        android:prompt="@string/spinner_title"
        android:background="@drawable/btn_dropdown_normal" 
        android:spinnerMode="dialog"/> 
```

当用户按下微调器时，一个对话框会根据以下内容填充一个 ArrayList 中定义的一些选项：

```
ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(getActivity().getBaseContext(),android.R.layout.simple_spinner_item, listaHashes);
    dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner2.setAdapter(dataAdapter);

    spinner2.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,int arg2, long arg3) {

            String text = listaHashes.get(arg2);
            lblHash.setText(text);
            ArrayList<String> tweetsEsteHash= new ArrayList<String>();
            tweetsEsteHash.add(text);
            receiveTweets(tweetsEsteHash);
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
        }
    }); 
```

该对话框不会填充父母的宽度和高度，这对我的意图很好。我需要当用户在对话框之外触摸时，对话框会自行消失。我应该使用自定义微调器对话框创建自定义微调器，还是可以使用一些选项来实现这一点？

# java - How does newCachedThreadPool cache thread

> ID：16142567
> 
> 赞同：3
> 
> 时间：2013-04-22T08:28:32.637
> 
> 标签：java, multithreading, executorservice, java.util.concurrent

Per the comment of method `public static ExecutorService newCachedThreadPool()` in `Executor` Class:

```
Threads that have not been used for sixty seconds are terminated and 
removed from the **cache**. 
```

I was wondering where is the cache and how it functions? As I didn't see any possible static `Collection` variable in the `ThreadPoolExecutor` or it's super class.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T11:18:25.300

Technically `Worker` is a `Runnable` containing a reference to a `Thread` and not a `Thread` by itself.

Let us dig deeper into the mechanics of this class.

`Executors.cachedThreadPool` uses this constructor from `ThreadPoolExecutor`

```
new ThreadPoolExecutor(0, Integer.MAX_VALUE,
                                      60L, TimeUnit.SECONDS,
                                      new SynchronousQueue<Runnable>()); 
```

where 60s corresponds to the `keepAliveTime` time.

## **Worker Addition / Task submission**

A `RunnableFuture` is created out of the submitted `Callable` or `Runnable`.
This is passed down to the `execute()` method.

The `execute` method tries to insert the task on to the `workQueue` which in our case is the `SynchronousQueue`. This will fail and return false due to the semantics of `SynchronousQueue`.
(Just hold on to this thought, we will revisit this when we talk about caching aspect)

The call goes on to the `addIfUnderMaximumPoolSize` method within `execute` which will create a `java.util.concurrent.ThreadPoolExecutor.Worker` runnable and creates a Thread and adds the created `Worker` to the `workers` hashSet. (the one others have mentioned in the answers)

and then it calls the `thread.start()` .

The run method of Worker is very important and should be noted.

```
public void run() {
    try {
        Runnable task = firstTask;
        firstTask = null;
        while (task != null || (task = getTask()) != null) {
            runTask(task);
            task = null;
        }
    } finally {
        workerDone(this);
    }
} 
```

**At this point in time you have a submitted a task and a thread is created and running it.**

## **Worker Removal**

In the `run` method if you have noticed there is a while loop. It is an incredibly interesting piece of code.

If the task is not null it will short circuit and not check for the second condition.

Once the task has run using `runTask` and the task reference is set to null, the call comes to the second check condition which takes it into `getTask` method.

Here is the part which decides a worker should be purged or not.

```
workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS); 
```

The workQueue is polled for a minute in this case to check for any new tasks coming on the queue. If not it will return null and checks for whether worker can exit.

Returning null means we will break out of the while and come to the `finally` block.

Here the worker is removed from the HashSet and the referenced Thread is also gone.

## Caching aspect

Coming back to the SynchronousQueue we discussed in Task submission.

In the event I submit a task where `workerQueue.offer` and `workerQueue.poll` is able to work in tandem, i.e. there is a task to process in between those 60s I can re-use the thread.

This can be seen in action if I put a sleep of 59s vs 61s between my each task execution.

*for 59s I can see the thread getting re-used. for 61s I can see a new thread getting created in the pool.*

N.B. The actual timings could vary from machine to machine and my `run()` is just printing out `Thread.currentThread().getName()`

Please let me know in comments if I have missed something or misinterpreted the code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:53:57.930

`Cache` word is only an abstraction. Internally it uses `HashSet` to hold Threads. As per the code:

```
/**
 * Set containing all worker threads in pool. Accessed only when
 * holding mainLock.
 */
private final HashSet<Worker> workers = new HashSet<Worker>(); 
```

And if at all you are interested about the runnables you `submit` or `execute`.

`newCachedThreadPool` uses `SynchronousQueue<Runnable>` to handle them.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:54:23.350

If you go through the code of [ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html), you will see this:

```
 /**
 * Set containing all worker threads in pool. Accessed only when
 * holding mainLock.
 */
private final HashSet<Worker> workers = new HashSet<Worker>(); 
```

and this:

```
/**
 * The queue used for holding tasks and handing off to worker
 * threads.  We do not require that workQueue.poll() returning
 * null necessarily means that workQueue.isEmpty(), so rely
 * solely on isEmpty to see if the queue is empty (which we must
 * do for example when deciding whether to transition from
 * SHUTDOWN to TIDYING).  This accommodates special-purpose
 * queues such as DelayQueues for which poll() is allowed to
 * return null even if it may later return non-null when delays
 * expire.
 */
private final BlockingQueue<Runnable> workQueue; 
```

And this:

```
 try {
          Runnable r = timed ?
               // here keepAliveTime is passed as sixty seconds from
               // Executors#newCachedThreadPool()
               workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS) :
               workQueue.take();
           if (r != null)
                return r;
           timedOut = true;
        } catch (InterruptedException retry) {
            timedOut = false;
        } 
```

I sincere walk through the actual implementation code, keeping these pointers in mind will help you understand more clearly.

# c# - 自定义 TFS Web 应用程序无法在 IIS 上运行

> ID：16142573
> 
> 赞同：3
> 
> 时间：2013-04-22T08:28:54.710
> 
> 标签：c#, iis, tfs

我已经为 TFS 上的用户身份验证创建了一个 Web 应用程序。我使用这段代码

```
var tfs = new TeamFoundationServer(server uri, new NetworkCredential("", ""), new UICredentialsProvider());
tfs.EnsureAuthenticated(); 
```

它应该带来一个新的 Windows 登录窗口。在视觉工作室上工作正常，但当我把它放在 IIS 中时，什么也没有发生。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T08:10:32.350

经过大量研究，我终于直接从微软得到了答案。我发布它是为了帮助下一个尝试同样事情的可怜人。

[http://social.msdn.microsoft.com/Forums/en-US/tfsgeneral/thread/a2e82d36-cfa0-4c45-8710-2cfe30ba1bb9/#b39bc3f6-4740-4cad-8341-fae4b0fbda43](http://social.msdn.microsoft.com/Forums/en-US/tfsgeneral/thread/a2e82d36-cfa0-4c45-8710-2cfe30ba1bb9/#b39bc3f6-4740-4cad-8341-fae4b0fbda43)

# iphone - 如何在 Objective C 中编写循环任务？（例如每 15 分钟增加一次生命）

> ID：16142576
> 
> 赞同：0
> 
> 时间：2013-04-22T08:28:56.297
> 
> 标签：iphone, objective-c, xcode, ios4

我想知道在 iPhone 应用程序中增加资源的最佳做法是什么（无论它是在前台运行还是在后台冻结/运行）我想要完成的壮举基本上是每 15 分钟增加一些硬币，不无论应用程序是在前台还是后台。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:35:24.650

当您的应用程序正在运行时，您可以使用`NSTimer`. 但是，当您的应用程序在后台时，计时器不会触发。

使用 AppDelegate 的`applicationDidEnterBackground`和`applicationWillEnterForeground`方法来检测应用程序何时进入/退出后台状态 - 根据当前时间增加您的硬币计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:34:04.887

您可以通过查找第一次和最后一次启动之间的时间差（根据您的要求）然后根据时间差增加硬币来查找两个日期之间的时间间隔来完成此操作

```
 NSTimeInterval noOfSeconds = [date timeIntervalSinceDate:date2]; 
```

//查找两个日期之间的差异

```
noOfSeconds/900//this will give the number of 15 minutes elapsed 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:34:29.523

这取决于您要执行的操作，但您可能不需要在后台执行此操作。只需存储用户最后一次检查硬币数量的时间戳，并通过一些数学计算，在他下次检查时计算当前硬币。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T08:34:51.083

你可以这样做：

```
NSTimer *timer;
timer= [NSTimer timerWithTimeInterval:15*60 //seconds
                                    target:self
                                    selector:@selector(yourMethod)
                                    userInfo:nil
                                    repeats:YES]; 
```

这是`yourMethod`每 15 分钟调用一次，你可以在那里做你的事情。

除上述外，请参考：

[iphone - NSTimers 在后台](https://stackoverflow.com/questions/8943214/iphone-nstimers-in-background)

# javascript - Javascript中的错误和异常有什么区别？

> ID：16142583
> 
> 赞同：42
> 
> 时间：2013-04-22T08:29:24.250
> 
> 标签：javascript, exception, error-handling

看起来`Error`和`Exception`是一回事：它们都可以用`throw`语句抛出并用`try catch`块捕获。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-22T08:42:43.993

**JavaScript 语法**

错误和异常在 JavaScript 中是语法上的同义词。该语言仅实现`Error`关键字（通过`window.Error`）。您可以定义自定义错误，使用`Error.constructor`, 将`name`和`message`作为参数。

**JavaScript 错误**

还有行号糖可用于跟踪代码中出现的错误。JavaScript 只有`Error`. 无论你听到人们谈论`Exceptions`还是`Errors`在 JavaScript 中他们指的是同一个东西。

浏览器会做出区分：（`ReferenceError`当访问一个名称在堆中不存在的变量时，或者当你打错字时（更多[here](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/ReferenceError)。），`TypeError`也是一个已知的JS错误，更多[here](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/TypeError)。

**JavaScript 异常**

一个已知的 JavaScript`Exception`是`DOM Exception 8`. 当您访问未准备好的对象时会发生这种情况，例如`XMLHttpRequest`尚未完成请求的对象。

**执行**

使用`try catch`or`try catch finally`块时，您将同时处理 JavaScript`Exception`和`Error`. 代码方面的差异没有影响。

在幕后，浏览器使用相同的`window.Error` `constructor`. An`Exception`是带有 a且包含“异常”的`Error`实例。`name``message`

试试：`var myCustomError = new Error("myException", "An exception occurred.");`。“异常”是字符串中的文本。更多关于`Error` [这里](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Error)。

**习俗**

按照惯例， 和 之间是有区别`Error`的`Exception`。An`Error`表示明显违规。A`TypeError`或`ReferenceError`表示您未遵循语言规范。

当您在响应完成之前`Exception`访问响应时会引发An 。是“你违反了法律”的喊声，是“快到了！” 垫在肩上。希望类比有所帮助！`XMLHttpRequest``Error``Exception`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-22T08:41:00.400

根据[讲座](http://www.w3schools.com/js/js_errors.asp)，错误是由 JavaScript 引擎抛出的，异常是由开发人员抛出的。它只是命名约定。

*   JavaScript 抛出错误
*   开发人员抛出异常

在技​​术方面是相同的结构（事物）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:31:50.533

我认为错误是严重的事情，您不应该尝试捕获异常是应该捕获的事情，只要可以处理它。

错误是代码中发生错误或无效的事情。它可能会导致内存错误，这是不应该发生且无法处理的事情。

而当代码中满足某些条件时，异常会抛出一些东西。它可能与真正的错误不对应。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-11T02:28:30.810

```
try {
    throw "throwing string";
} catch (ex) {
    console.log(ex);
} 
```

如果我们运行这段代码，我们将观察到***catch***子句将接收***我们***使用 throw 关键字抛出的任何内容。这意味着如果我们抛出字符串，我们将收到字符串，如果我们抛出对象，我们将收到对象，如果我们抛出数字，我们将收到数字。

***注意：***所以如果我们抛出错误，我们将收到错误。

因此，结论是我们使用***throw 关键字***抛出的任何东西都将被视为异常。如果我们不捕捉（或处理）它，那么我们的 Javascript 代码就会崩溃。

# c# - CRC-16 和 CRC-32 检查

> ID：16142584
> 
> 赞同：1
> 
> 时间：2013-04-22T08:29:26.093
> 
> 标签：c#, crc32, crc16

我需要帮助来验证 CRC-16 值（也需要 CRC-32 值的帮助）。我试图坐下来了解 CRC 是如何工作的，但我画的是一个空白。

我的第一个问题是尝试使用在线计算器将消息“ `BD001325E032091B94C412AC`”计算为**CRC16 = 12AC 时**。文档指出最后两个八位字节是 CRC16 值，所以我`BD001325E032091B94C4`在网站[http://www.lammertbies.nl/comm/info/crc-calculation.html](http://www.lammertbies.nl/comm/info/crc-calculation.html)中输入“”并接收 5A90 作为结果而不是 12AC .

**有谁知道为什么这些值不同以及我在哪里可以找到如何计算 CRC16 和 CRC32 值的代码（我计划稍后学习如何做到这一点，但现在时间不允许）？**

更多消息如下：

```
16000040FFFFFFFF00015FCB  
3C00003144010405E57022C7  
BA00001144010101B970F0ED  
3900010101390401B3049FF1  
09900C800000000000008CF3  
8590000000000000000035F7  
00900259025902590259EBC9  
0200002B00080191014BF5A2  
BB0000BEE0014401B970E51E  
3D000322D0320A2510A263A0  
2C0001440000D60000D65E54 
```

- 编辑 -

我已经包含了更多信息。我引用的文档是 TIA-102.BAAA-A（来自 TIA 标准）。以下是文档中的说明（尽量避免侵犯版权）：

> 数据包中的最后一个块包括几个八位字节的用户信息和/或填充八位字节，然后是一个 4 八位字节的 CRC 奇偶校验。这称为数据包 CRC。
> 
> 数据包 CRC 是一个 4 字节的循环冗余校验码，对包含在中间块中的所有数据八位字节和最后一个块的用户信息八位字节进行编码。具体计算如下。
> 
> 令 k 为要计算分组 CRC 的用户信息和填充比特的总数。将 k 个消息比特视为 k-1 次多项式 M(x) 的系数，将第零个消息八位字节的 MSB 与 x^k-1 相关联，将最后一个消息八位字节的 LSB 与 x^0 相关联。定义生成多项式 GM(x) 和反演多项式 IM(x)。
> 
> GM(x) = x^32 + x^26 + x^23 + x^22 + x^16 + x^12 + x^11 + x^10 + x^8 + x^7 + x^5 + x ^4 + x^2 + x + 1
> 
> IM(x) = x^31 + x^30 + x^29 + ... + x^2 + x +1
> 
> 然后根据以下公式计算数据包 CRC 多项式 FM(x)。
> 
> FM(x) = ( x^32 M(x) mod GM(x) ) + IM(x) 模 2，即在 GF(2) 中
> 
> FM(x) 的系数被放置在 CRC 字段中，CRC 的第 0 个八位字节的 MSB 对应于 x^31，CRC 的第三个八位字节的 LSB 对应于 x^0。

在上面的引用中，我已经`^`展示了权力，因为引用时格式并没有保持不变。我不确定会发生什么，但这有帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T11:18:03.603

我有一个从互联网上找到的 C++ 转换而来的类，它使用 long 来计算 CRC32。它遵守标准，是 PKZIP、WinZip 和以太网使用的一种。要对其进行测试，请使用 Winzip 并压缩文件，然后使用此类计算相同的文件，它应该返回相同的 CRC。它对我有用。

```
public class CRC32
{
    private int[] iTable;

    public CRC32() {
       this.iTable = new int[256];
       Init();
    }

    /**
     * Initialize the iTable aplying the polynomial used by PKZIP, WINZIP and Ethernet.
     */
    private void Init()
    {
       // 0x04C11DB7 is the official polynomial used by PKZip, WinZip and Ethernet.
       int iPolynomial = 0x04C11DB7;

       // 256 values representing ASCII character codes.
       for (int iAscii = 0; iAscii <= 0xFF; iAscii++)
       {
          this.iTable[iAscii] = this.Reflect(iAscii, (byte) 8) << 24;

          for (int i = 0; i <= 7; i++)
          {
             if ((this.iTable[iAscii] & 0x80000000L) == 0) this.iTable[iAscii] = (this.iTable[iAscii] << 1) ^ 0;
             else this.iTable[iAscii] = (this.iTable[iAscii] << 1) ^ iPolynomial;
          }
          this.iTable[iAscii] = this.Reflect(this.iTable[iAscii], (byte) 32);
       }
    }

    /**
     * Reflection is a requirement for the official CRC-32 standard. Note that you can create CRC without it,
     * but it won't conform to the standard.
     *
     * @param iReflect
     *           value to apply the reflection
     * @param iValue
     * @return the calculated value
     */
    private int Reflect(int iReflect, int iValue)
    {
       int iReturned = 0;
       // Swap bit 0 for bit 7, bit 1 For bit 6, etc....
       for (int i = 1; i < (iValue + 1); i++)
       {
          if ((iReflect & 1) != 0)
          {
             iReturned |= (1 << (iValue - i));
          }
          iReflect >>= 1;
       }
       return iReturned;
    }

    /**
     * PartialCRC caculates the CRC32 by looping through each byte in sData
     *
     * @param lCRC
     *           the variable to hold the CRC. It must have been initialize.
     *           <p>
     *           See fullCRC for an example
     *           </p>
     * @param sData
     *           array of byte to calculate the CRC
     * @param iDataLength
     *           the length of the data
     * @return the new caculated CRC
     */
    public long CalculateCRC(long lCRC, byte[] sData, int iDataLength)
    {
       for (int i = 0; i < iDataLength; i++)
       {
          lCRC = (lCRC >> 8) ^ (long) (this.iTable[(int) (lCRC & 0xFF) ^ (int) (sData[i] & 0xff)] & 0xffffffffL);
       }
       return lCRC;
    }

    /**
     * Caculates the CRC32 for the given Data
     *
     * @param sData
     *           the data to calculate the CRC
     * @param iDataLength
     *           then length of the data
     * @return the calculated CRC32
     */
    public long FullCRC(byte[] sData, int iDataLength)
    {
       long lCRC = 0xffffffffL;
       lCRC = this.CalculateCRC(lCRC, sData, iDataLength);
       return (lCRC /*& 0xffffffffL)*/^ 0xffffffffL);
    }

    /**
     * Calculates the CRC32 of a file
     *
     * @param sFileName
     *           The complete file path
     * @param context
     *           The context to open the files.
     * @return the calculated CRC32 or -1 if an error occurs (file not found).
     */
    long FileCRC(String sFileName, Context context)
    {
          long iOutCRC = 0xffffffffL; // Initilaize the CRC.

          int iBytesRead = 0;
          int buffSize = 32 * 1024;
          FileInputStream isFile = null;
          try
          {
             byte[] data = new byte[buffSize]; // buffer de 32Kb
             isFile = context.openFileInput(sFileName);
             try
             {
                while ((iBytesRead = isFile.read(data, 0, buffSize)) > 0)
                {
                   iOutCRC = this.CalculateCRC(iOutCRC, data, iBytesRead);
                }
                return (iOutCRC ^ 0xffffffffL); // Finalize the CRC.
             }
             catch (Exception e)
             {
                // Error reading file
             }
             finally
             {
                isFile.close();
             }
          }
          catch (Exception e)
          {
             // file not found
          }
          return -1l;
       }
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T20:48:53.270

1.  阅读[有关 CRC 的 Ross Williams 教程，](https://www.zlib.net/crc_v3.txt)以更好地了解 CRC、定义特定 CRC 的内容及其实现。

2.  reveng[网站](http://reveng.sourceforge.net/)有一个很好的已知 CRC 目录，以及每个测试字符串的 CRC（九个字节：ASCII/UTF-8 中的“123456789”）。请注意，这里定义了*22 种不同的 16 位 CRC*。

同一站点上的 reveng 软件可用于对多项式、初始化、后处理和位反转进行逆向工程，给出了几个示例，如 16 位 CRC。（因此得名“reveng”。）我运行了你的数据并得到：

```
./reveng -w 16 -s 16000040FFFFFFFF00015FCB 3C00003144010405E57022C7 BA00001144010101B970F0ED 3900010101390401B3049FF1 09900C800000000000008CF3 8590000000000000000035F7 00900259025902590259EBC9 0200002B00080191014BF5A2 BB0000BEE0014401B970E51E 3D000322D0320A2510A263A0 2C0001440000D60000D65E54

width=16  poly=0x1021  init=0xc921  refin=false  refout=false  xorout=0x0000  check=0x2fcf  name=(none) 
```

如“(none)”所示，16 位 CRC 不是 reveng 上列出的 22 个中的任何一个，尽管它与其中几个相似，仅在初始化方面有所不同。

您提供的附加信息适用于 32 位 CRC，即 reveng 目录中的 CRC-32 或 CRC-32/BZIP，具体取决于位是否反转。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T08:55:50.750

CRC 计算有很多参数：多项式、初始值、最终 XOR ......有关详细信息，请参阅[Wikipedia](http://en.wikipedia.org/wiki/Cyclic_redundancy_check#Specification_of_CRC)。您的 CRC 似乎不适合您使用的网站上的那些，但您可以尝试从您的文档中找到正确的参数并使用不同的计算器，例如[这个](http://www.zorc.breitbandkatze.de/crc.html)（虽然我担心它不支持 HEX 输入） .

要记住的一件事是，CRC-16 通常是根据应该进行校验和的数据*加上两个零字节*来计算的，例如，您可能正在寻找一个`CRC16`函数 where `CRC16(BD001325E032091B94C40000) == 12AC`。以这种方式计算校验和，附加校验和的数据的 CRC 将计算为 0，这使得检查更容易，例如`CRC16(BD001325E032091B94C412AC) == 0000`

# android - 安卓谷歌地图v2自定义dilog

> ID：16142585
> 
> 赞同：0
> 
> 时间：2013-04-22T08:29:27.067
> 
> 标签：android, google-maps, dialog, google-maps-markers, google-maps-android-api-2

由于现在我无法获得地图 V1 的 API 密钥，我需要将我的代码迁移到 v2。所以我需要的是当用户点击地图上的一个大头针以显示一个对话框（其中包含点的名称和一个按钮）。如果他点击按钮，我会打开一个显示该地点信息的新活动。我已经使用地图覆盖成功地做到了这一点，我在构造函数中传递了我的自定义数据，并且我拥有了我需要的一切。但是如何使用地图 v2 的标记来完成呢？我找不到有关自定义对话框的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:40:04.000

无法`InfoWindow`使用按钮来实现，因为`Google Map`它会自动将其所有内容呈现到图像中。您唯一可以听到的点击是`InfoWindow`它自己。

这是用于创建`InfoWindow`和分配的代码，`OnInfoWindowClickListener`其中包含将向您解释这些步骤的注释。

```
// Setting a custom info window adapter for the google map
        map.setInfoWindowAdapter(new InfoWindowAdapter() {

            // Use default InfoWindow frame
            @Override
            public View getInfoWindow(Marker args) {
                return null;
            }

            // Defines the contents of the InfoWindow
            @Override
            public View getInfoContents(Marker args) {

                // Getting view from the layout file info_window_layout
                View v = getLayoutInflater().inflate(R.layout.info_window_layout, null);

                // Getting the position from the marker
                clickMarkerLatLng = args.getPosition();

                TextView title = (TextView) v.findViewById(R.id.tvTitle);
                title.setText(args.getTitle());

                //Setting OnInfoWindowClickListener
                map.setOnInfoWindowClickListener(new OnInfoWindowClickListener() {          
                    public void onInfoWindowClick(Marker marker) 
                    {
                        if (SGTasksListAppObj.getInstance().currentUserLocation!=null)
                        {   
                            if (String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLatitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) &&
                                    String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLongitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                            {
                                Toast.makeText(getApplicationContext(), "This your current location, navigation is not needed.",  Toast.LENGTH_SHORT).show();
                            }
                            else
                            {
                                FlurryAgent.onEvent("Start navigation window was clicked from daily map");
                                tasksRepository = SGTasksListAppObj.getInstance().tasksRepository.getTasksRepository();
                                for (Task tmptask : tasksRepository)
                                {
                                    String tempTaskLat = String.valueOf(tmptask.getLatitude());
                                    String tempTaskLng = String.valueOf(tmptask.getLongtitude());

                                    Log.d(TAG, String.valueOf(tmptask.getLatitude())+","+String.valueOf(clickMarkerLatLng.latitude).substring(0, 8));

                                    if (tempTaskLat.contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) && tempTaskLng.contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                                    {  
                                        task = tmptask;
                                        break;
                                    }
                                }
                                Intent intent = new Intent(getApplicationContext() ,RoadDirectionsActivity.class);
                                intent.putExtra(TasksListActivity.KEY_ID, task.getId());
                                startActivity(intent);

                            }
                        }
                        else
                        {
                            Toast.makeText(getApplicationContext(), "Your current location could not be found,\nNavigation is not possible.",  Toast.LENGTH_SHORT).show();
                        }
                    }
                });

                // Returning the view containing InfoWindow contents
                return v;

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:43:14.787

自定义对话框和地图本身是两个完全独立的实体，一个的发展不会影响另一个的发展。

您将使用 OnMarkerClickListener（[此处是文档的链接](https://developers.google.com/maps/documentation/android/marker#marker_click_events)），并且无论何时收到该消息，您都将像以前一样创建自定义对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:46:34.543

您可以使用添加标记

```
Marker marker = mMap.addMarker(new MarkerOptions().position(pos1).title("title").snippet("description")); 
```

如果您点击标记，将打开一个带有“标题”和“描述”的信息窗口，即使您可以通过扩展 InfoWindowAdapter 类来自定义此信息窗口，然后将该 infoWindowAdapter 设置为 GoogleMap obj。有关更多信息，请参阅下面的链接 [Google Map API V2](https://developers.google.com/maps/documentation/android/marker#add_a_marker)

# javascript - Jquery显示变量到html div

> ID：16142586
> 
> 赞同：0
> 
> 时间：2013-04-22T08:29:27.540
> 
> 标签：javascript, jquery, divide

我定义了以下变量：

```
var TuesdaysRatio = myTuesdaysNewLikesTotal / myTuesdaysImpressionsOrganicTotal; 
```

在`console.log(TuesdaysRatio);`Chrome 中有输出：`0.032636762568610575`. 我的脚本中的下一行如下：

```
$('div.ratio-div').html('<p>Tuesdays Likes per Organic Impressions Ratio ' + TuesdaysRatio + '</p>'); 
```

我正在使用 JQuery 将段落中的变量显示到`ratio-div`在脚本标记上方创建的空 div（带有 class ）中。在我的页面上而不是我的页面上，`Tuesdays Likes per Organic Impressions Ratio 0.032636762568610575`我`Tuesdays Likes per Organic Impressions Ratio NaN`无法弄清楚问题出在哪里......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:34:57.687

给它编号.. 使用[Number()](http://www.w3schools.com/jsref/jsref_number.asp) ..`parseInt`并且`parseFloat`可能会改变您的结果，因此请使用`Number()`将对象参数转换为表示对象值的数字的函数。

```
var TuesdaysRatio = Number(myTuesdaysNewLikesTotal / myTuesdaysImpressionsOrganicTotal); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:32:41.740

尝试这个

```
$(document).ready(function(){
     var TuesdaysRatio = parseFloat(parseInt(myTuesdaysNewLikesTotal) / parseInt(myTuesdaysImpressionsOrganicTotal));
     $('div.ratio-div').html('<p>Tuesdays Likes per Organic Impressions Ratio ' + TuesdaysRatio + '</p>');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:33:50.457

尝试首先解析您的值：

```
var TuesdaysRatio = parseInt((myTuesdaysNewLikesTotal / myTuesdaysImpressionsOrganicTotal), 10); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T08:51:25.263

```
$('document').ready(function(){
    var TuesdaysRatio = Number(0.032636762568610575);
    $('div.ratio-div').html('<p>Tuesdays Likes per Organic Impressions Ratio ' + TuesdaysRatio + '</p>');
}); 
```

尝试这个

# git - Git：比cherry-pick合并两个分支更好的方法？

> ID：16142589
> 
> 赞同：2
> 
> 时间：2013-04-22T08:29:37.863
> 
> 标签：git

git 上的新手，我的 git 项目中有两个分支，`master`并且`feature`，两个分支共享 80% 的相同代码，而其他 20% 不同，现在我在 master 上工作，我在 master 上提交，这commit 也应该应用到 f​​eature 分支，如果我使用 merge，会有冲突，因为其他 20% 的代码不同，我必须使用cherry-pick，并且两个分支的提交历史是并行的。这很烦人，因为我必须挑选从 master 到 feature 分支的每个提交。

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:34:04.080

你在这里有一个大问题，因为你的分支已经相差太多了。

为防止这种情况，您需要尽可能使它们保持同步。

对于这样的未来场景，有两种可能的方法，这两种方法都需要从一开始就应用：

1.  经常从 master 合并到 feature
2.  经常将功能变基到主控上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:34:14.533

我很确定您可以通过以下方式查看特定文件：

```
git checkout <branch> <commit-ref> <filepath> 
```

如果您要在分支之间推送的更新包含在特定文件中，那么至少应该让您手动同步。

# jasper-reports - JasperReports JRXML 使用静态数据创建参数/变量

> ID：16142596
> 
> 赞同：1
> 
> 时间：2013-04-22T08:30:16.970
> 
> 标签：jasper-reports

我正在使用 Ireport 并尝试使用我的数据创建报告参数作为哈希图。我不明白我可以在参数的默认表达式中写什么。我写：

```
java.util.Мap.put("field_name","value"). 
```

但它不起作用。没有 HashMap 类型的参数。

我知道如何创建列表 - 一行静态表：

```
java.util.Arrays.asList("Hi", "Hello", "Another Value") 
```

但我不明白如何创建多少行。

# mysql - 允许用户将 html 内容存储到数据库并在 Web 上检索 html 内容需要哪些安全问题

> ID：16142601
> 
> 赞同：1
> 
> 时间：2013-04-22T08:30:57.637
> 
> 标签：mysql, upload, download, code-injection

在我的网站上，注册用户可以编写样式化的文本内容（我正在使用 nicEdit），然后他们可以将它们存储在 mysql 数据库中。我将它们的内容存储在 mysql db 上的文本类型字段中。然后我允许用户检索他们的 html 内容以显示在网站的用户页面上。我的问题是，在将用户 html 内容发送到 mysql 数据库之前，我是否应该使用避免 mysql 注入的技术。当用户在网络上检索 html 内容时，在网站上显示 html 内容之前我应该​​做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:52:11.650

转义 中的特殊字符`unsafe_variable`，或使用参数化查询来防止 MySQL 注入。参数化查询被认为是更好的做法，但在变量中转义字符将需要较少的更改。

您需要使用带有适当 HTML 解析器的 HTML 清理库，以便将 HTML 输出给用户。参见例如[HTML 净化器](http://htmlpurifier.org/)。

`htmlspecialchars`将引用 HTML 中的所有标签，因此用户只会看到纯文本。您可以使用`strip_tags`，但`strip_tags`实际上并不验证 HTML，因此不推荐。

PDO 用法：

```
$unsafe_variable = $_POST["user-input"];
$sth = $mysqli->prepare("INSERT INTO table (column) VALUES (?)");
$sth->bind_param("s", $unsafe_variable);
$sth->execute();
$sth->close(); 
```

mysqli用法：

```
$unsafe_variable = $_POST["user-input"]
$safe_variable = mysql_real_escape_string($unsafe_variable);
mysql_query("INSERT INTO table (column) VALUES ('" . $safe_variable . "')"); 
```

# magento - Magento 定制产品价格根据产品变化

> ID：16142611
> 
> 赞同：1
> 
> 时间：2013-04-22T08:31:29.183
> 
> 标签：magento, custom-attributes

我想更改自定义产品价格我想将每个产品的价格添加到购物车，这里我附上了屏幕截图![在此处输入图像描述](https://i.stack.imgur.com/Wsjxt.png)

在这里，我添加了 8.29 的数量 2 和 23.85 的数量 6 我想在购物车中使用这个价格。

现有功能的工作方式类似于

如果我在选项 2 中添加任何金额：就像我添加了金额 4.19

我们的原价金额是 4.19

那么它将显示 4.19 + 4.19 = 8.28

我不想使用此计算，我想将我的产品价格用于购物车。

这可能吗？如果是，那么如何？

# android - 如何以编程方式从 android 设备获取简体中文？

> ID：16142612
> 
> 赞同：0
> 
> 时间：2013-04-22T08:31:31.687
> 
> 标签：android, localization

我正在对我的应用程序进行本地化，因为我想知道设备的当前语言。我正在获取当前语言，但我不知道如何区分简体中文和繁体中文，因为对于这两种语言，我得到的代码相同，例如“中文”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:44:11.610

利用

```
Locale.getDefault().getDisplayName(); 
```

提供中文简体和繁体

```
中文 (中国)

中文 (台灣) 
```

# c++ - 无法与 libcurl 链接 - 对多个函数的未定义引用

> ID：16142613
> 
> 赞同：0
> 
> 时间：2013-04-22T08:31:39.117
> 
> 标签：c++, gcc, curl, g++

我目前在 Windows 7 x64 上编译 C++ 程序时遇到问题。

它无法以我尝试的所有方式编译：

```
undefined reference to `curl_easy_init'
undefined reference to `curl_easy_setopt'
undefined reference to `curl_easy_setopt'
undefined reference to `curl_easy_perform'
undefined reference to `curl_easy_strerror'
undefined reference to `curl_easy_cleanup' 
```

守则本身：

```
#include <curl/curl.h>

int main(int argc, char** argv)
{
CURL *curl;
CURLcode res;

curl = curl_easy_init();

if(curl)
{
    curl_easy_setopt(curl, CURLOPT_URL, "http://steamcommunity.com");
    curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1L);

    res = curl_easy_perform(curl);

    if(res != CURLE_OK)
    {
        fprintf(stderr, "curl_easy_perform() failed %s\n", curl_easy_strerror(res));
    }

    curl_easy_cleanup(curl);
}
else
{
}
return 0;
} 
```

我正在编译：

```
g++ -DCURL_STATICLIB -g -o curlprogram curlprogram.cpp -LJ:\Projektpath -lcurl 
```

我在 -L 指定的路径中添加了 libcurl.a，并将 libcurl.dll 放入 C:\Windows\System32。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:34:23.083

*.a 不用于 Windows 二进制文件，将 libcurl_imp.lib 放入 -L 路径并使用 -lcurl_imp 。尝试不带 -DCURL_STATICLIB 的链接共享库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:42:51.767

首先转到属性 > 配置属性 > VC++ 目录 > 包含目录。在这里，在解压后的 Libcurl 文件的包含目录中添加 curl 目录（C:\ ... \libcurl-7.19.3-win32-ssl-msvc\include\curl）。

转到 VC++ 目录 > 库目录。添加包含 curllib_static.lib、curllib.dll 和 curllib.lib 的 Debug 目录（C:\Users\Édouard\Documents\Visual Studio 2010\LibCurl\lib\Debug）。

仍在配置属性中，转到链接器 > 输入 > 附加依赖项。在这里，您必须添加 curllib.lib 文件（C:\ ... \lib\Debug\curllib.lib）。最多输入 lib 文件的名称。

下一步包括在项目的 Debug 目录中添加 curllib.dll、libeay32.dll、openldap.dll 和 ssleay32.dll。所有这些都可以在 Libcurl 的根目录中找到。

# c# - 带有 idbparameter 和类似表达式的 ADOTemplate 查询

> ID：16142618
> 
> 赞同：1
> 
> 时间：2013-04-22T08:31:56.230
> 
> 标签：c#, spring.net

我有一个使用 spring.net 和 ADOTemplate 查询数据库的 DAO：

```
var sql = "select id, name, description from item where description like '%@description%'";
var dbParameters = AdoTemplate.CreateDbParameters();
dbParameters.Add("description", DbType.String).Value = query.Description;
return AdoTemplate.QueryWithRowMapperDelegate<Item>(...) 
```

这失败了，因为 sql 字符串在没有 dbparameter 扩展的情况下按字面意思发送到数据库。

我对此的解决方案如下

```
var sql = "select id, name, description from item where description like '%" + query.Description + "%'";
return AdoTemplate.QueryWithRowMapperDelegate<Item>(...) 
```

但我真的很想使用 IDBParameters，因为当前的解决方案为 sql 注入攻击打开了大门。我在文档中找不到有关如何实现此目的的任何内容。

# jakarta-ee - 如何创建一个在 websphere 上运行的 web 应用程序，以及哪个会使用 websphere 提供的数据源？

> ID：16142619
> 
> 赞同：1
> 
> 时间：2013-04-22T08:32:08.170
> 
> 标签：jakarta-ee, websphere, jndi

我在 websphere 上设置了一个 web 应用程序，但是找不到 websphere 提供的数据源的 JNDI 名称。

我是 websphere 的新手，之前没有使用过 JDNI，我发现很难直接在这个应用程序上工作。

如何创建一个可以在 websphere 上运行并使用 websphere 提供的数据源的简单 Web 应用程序。或者有没有我可以尝试的现有演示？

我认为这样的应用程序将帮助我定位问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T07:01:29.077

如果您使用上下文查找，则必须在部署描述符 (web.xml) 中声明一个新的资源引用：

```
<resource-ref>
  <res-ref-name>jdbc/newReference</res-ref-name>
  <res-type>javax.sql.DataSource</res-type>
  <res-auth>Container</res-auth>
  <res-sharing-scope>Shareable</res-sharing-scope>
</resource-ref> 
```

但这还不是全部。您还必须将此新引用绑定到服务器的 JDBC 资源 (ibm-web-bnd.xml)：

```
<resource-ref name="jdbc/newReference" binding-name="jdbc/ressourceOnServer"/> 
```

请注意，此机制与使用 sun-web.xml 文件在 Glassfish 上所做的非常相似，只是绑定略有不同：

```
<resource-ref>
    <res-ref-name>jdbc/newReference</res-ref-name>
    <jndi-name>jdbc/ressourceOnServer</jndi-name>
</resource-ref> 
```

看看这个问题：[如何使用给定的 JNDI 名称连接到 Websphere 数据源？](https://stackoverflow.com/q/7167212/2015707). 如果您需要更多详细信息，我可以举个例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T08:50:21.177

当您在 websphere 中设置数据源时，系统会要求您提供所需的 JNDI 名称。据我所知，它通常类似于“jdbc/appname”。

然后，如果您使用 JPA，您只需将给定的名称放在您的 persistence.xml 文件中：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="appname" transaction-type="RESOURCE_LOCAL">

        <non-jta-data-source>jdbc/appname</non-jta-data-source>

        <!-- CLASS TO PERSIST -->

    </persistence-unit>
</persistence> 
```

我现在注意到我的应用程序中的数据源列为非 jta，尽管我相信 WebSphere 的数据源是 JTA 感知的。你可能想检查一下。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T10:18:40.497

打开您的 Websphere 管理控制台。

单击**资源**>>**数据源**。

您将获得已配置*数据源*的列表。在列表中会有`Default Datasource`. 点击那个。在配置表单中，有一个名为`JNDI name`. 这是 Websphere 提供的默认数据源的 jndi 名称。

您可以使用注解注入在您的 Web 组件中注入 DataSource。

```
@Resource(name = "DefaultDatasource")
DataSource ds; 
```

教程适用于 tomcat，但请参阅 servlet 示例和使用数据源作为注解注入 >> [http://theopentutorials.com/tutorials/java-ee/servlet/servlet-datasource-resource-injection-in-tomcat/](http://theopentutorials.com/tutorials/java-ee/servlet/servlet-datasource-resource-injection-in-tomcat/)

# c# - 这个参数类型约束是什么意思？

> ID：16142620
> 
> 赞同：20
> 
> 时间：2013-04-22T08:32:14.373
> 
> 标签：c#

我正在查看一些代码，但我不明白特定约束在以下类定义中的含义：

```
internal abstract class Entity<T> : Entity
    where T : Entity<T>
{ ... } 
```

我不明白这对参数类型意味着什么`T`。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-22T08:35:35.817

这类似于“[奇怪重复的模板模式](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)”（但不一样）。

它可用于（除其他外）帮助将派生类中方法的参数类型限制为与派生类本身相同的类型。

[这是 Eric Lippert 关于这个主题的一篇有趣的博客文章](http://blogs.msdn.com/b/ericlippert/archive/2011/02/03/curiouser-and-curiouser.aspx)。

它的主要用途是强制派生自`Entity<T>`的类实现一些接受与派生类相同类型的参数的方法。

在下面的代码示例中，我们在`Entity<T>`类中声明了一个`DoSomethingWithTheSameTypeAsMe()`接受类型参数的方法`T`。

由于泛型约束，这将强制任何派生自`Entity<T>`的类实现一个版本，`DoSomethingWithTheSameTypeAsMe()`该版本采用派生类类型的参数。

这使用有限，而且阅读起来非常混乱，所以我同意 Eric Lippert 的观点，他说你应该避免使用这样的代码！

```
using System;

namespace ConsoleApplication1
{
    internal class Program
    {
        private static void Main()
        {
            var test1 = new Derived1();
            var test2 = new Derived2();

            test1.DoSomethingWithTheSameTypeAsMe(test1);
            test2.DoSomethingWithTheSameTypeAsMe(test2);
        }
    }

    public class Entity
    {
        public string Hello()
        {
            return "Hello, World.";
        }
    }

    public abstract class Entity<T>: Entity where T: Entity<T>
    {
        public abstract void DoSomethingWithTheSameTypeAsMe(T item);
    }

    public sealed class Derived1: Entity<Derived1>
    {
        // You are forced to implement DoSomethingWithTheSameTypeAsMe() with a param type "Derived1".
        // (i.e. the parameter is the same type as 'this')

        public override void DoSomethingWithTheSameTypeAsMe(Derived1 item)
        {
            Console.WriteLine("Doing something with a Derived1 item: " + item.Hello());
        }
    }

    public sealed class Derived2: Entity<Derived2>
    {
        public override void DoSomethingWithTheSameTypeAsMe(Derived2 item)
        {
            Console.WriteLine("Doing something with a Derived2 item: " + item.Hello());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-22T08:52:37.530

[尽管我发表了评论，但我还是要坚持下去，因为我还想注意基本类型从中得到了什么。]

很简单：`T`必须继承`Entity<T>`。

它是一种经常使用的自引用泛型，使得基类可以在方法和其他区域中包含派生类**类型**（via ）。`T`它只是避免了您必须强制转换或在派生类型中使用基本引用。它可能非常有用，尽管我很少看到它在我们的代码中使用。

我会注意到，这并不***意味着***基类可以突然访问派生成员。它仍然只能看到由约束定义的最低已知类型（如果存在）。如果不存在约束，`object`则为已知的最低类型。好处是从派生类型的角度来看，以及它为推入基类的代码赋予的清洁度。

在你的情况下，它会看到`Entity<T>`和`Entity`成员。这就是约束的原因。

标准用法类似于：

```
public class Customer : Entity<Customer>
{
}

public abstract class Entity<T> 
    where T : Entity<T>
{
    public T Clone(T entityToClone)
    {
        return default(T); // Clone code here, returns derived type.
    }
}   

// Grants you...
Customer clonedCustomer = currentCustomer.Clone();

// Instead of...
Customer clonedCustomer = (Customer)currentCustomer.Clone();

// Ignore ethical constraints on cloning customers and definitely do not tell your sales team that you can ;-) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T08:36:36.333

它说 T 必须是类型`Entity<T>`或派生自该类型

尽管这看起来很矛盾，但它是有效的，有时也很有用，尽管这种情况很少见，而且通常可以用不同的更容易理解的方式来处理。

在 C++ 术语中，它通常被称为[好奇重复的模板模式](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)

在 C# 中，功能比在 C++ 中使用模式时受到更多限制。这种模式的具体类通常如下所示

```
class MyClass<ItemType> : Entity<MyClass<ItemType>> {
  //...
} 
```

或者干脆

```
class MyClass : Entity<MyClass> {
   //...
} 
```

这可能有用的一个例子是在使用类型的属性时。

假设您正在运行时创建一个小部件列表。该列表包括派生自属性的所有类型，`Entity<T>`并且您根据属性中的元数据填充信息。在`Entity<T>`你可以一劳永逸地处理这个

```
void RegisterWidget(){
  var attributes = typeof(T).GetAttributes();
  //do what ever you need to
} 
```

这当然可以在没有约束的情况下工作，但从功能的角度来看它可能仍然有意义或显示意图，并且在代码的其他部分可能需要它

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T08:36:12.503

它说 that `T`must be or inherit from `Entity<T>`，这就是`T`你要限制的东西。显然`T`不能是，`Entity<T>`因为那是抽象的，所以它必须是继承自它的东西。

# c# - WPF 取消按钮

> ID：16142626
> 
> 赞同：3
> 
> 时间：2013-04-22T08:32:40.553
> 
> 标签：c#, wpf, visual-studio-2010, button

我正在开发 WPF 应用程序。我的一个 Windows 有一个名为“取消”的按钮，其`IsCancel=true`. 当用户单击取消或按键时，我需要显示一个带有是/否的消息框`ESCAPE`。如果用户单击“是”，窗口应继续关闭，但如果用户单击“否”，则不应关闭表单，而是在打开窗口的情况下继续常规操作。我该怎么做？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:43:30.170

这会帮助你

```
void Window_Closing(object sender, CancelEventArgs e)
{
     MessageBoxResult result = MessageBox.Show(
            "msg", 
            "title", 
            MessageBoxButton.YesNo, 
            MessageBoxImage.Warning);
        if (result == MessageBoxResult.No)
        {
            // If user doesn't want to close, cancel closure
            e.Cancel = true;
        }        
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T08:36:33.230

你可以完全处理它`WindowClosing`。

看看[这里](http://msdn.microsoft.com/en-us/library/system.windows.window.closing.aspx)。有一个非常接近你的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:39:51.967

```
 var Ok = MessageBox.Show("Are you want to Close", "WPF Application", MessageBoxButton.YesNo, MessageBoxImage.Information);

            if (Ok == MessageBoxResult.Yes)
            {
                this.Close();
            }
            else
            {

            } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T08:42:51.920

打开一个消息框并读取结果，如下所示：

```
DialogResult result = MessageBox.Show(
    "Text", 
    "Title", 
    MessageBoxButtons.YesNo,
    MessageBoxIcon.Question);

if (result == DialogResult.Yes)
{
    //The user clicked 'Yes'
}
else if (result == DialogResult.No)
{
    //The user clicked 'No'
}
else
{
    //If the user somehow didn't click 'Yes' or 'No'
} 
```

# c# - MvvmCross - 从视图模型调用 Web 服务

> ID：16142629
> 
> 赞同：4
> 
> 时间：2013-04-22T08:32:49.170
> 
> 标签：c#, xamarin.ios, xamarin.android, mvvmcross

我是 MvvmCross 和 Android 开发的新手。我需要在我的视图模型中调用 POST 数据到 JSON Web 服务。然后我需要在我的 UI 中显示 Web 服务的结果。我的视图模型的要点如下所示：

```
public class MyViewModel : MvxViewModel
{
  public override void Start()
  {
    base.Start();
  }

  public event EventHandler<EventArgs> Service_Finished;
  public void CallService()
  {
    string url = GetServiceUrl();

    WebRequest serviceRequest = HttpWebRequest.Create(url);
    serviceRequest.Method = "POST";
    serviceRequest.ContentType = "application/json";
    serviceRequest.BeginGetRequestStream(new AsyncCallback(ServiceBeginGetRequestStreamCallback), serviceRequest);
  }

  private void ServiceBeginGetRequestStreamCallback(IAsyncResult ar)
  {
    string json = GetJson();

    HttpWebRequest myWebRequest = (HttpWebRequest)(ar.AsyncState);
    using (Stream postStream = myWebRequest.EndGetRequestStream(ar))
    {
      byte[] byteArray = Encoding.UTF8.GetBytes(json);
      postStream.Write(byteArray, 0, byteArray.Length);
    }
    myWebRequest.BeginGetResponse(new AsyncCallback(Service_Completed), myWebRequest);
  }

  private void Service_Completed(IAsyncResult result)
  {
    if (Service_Finished != null)
      Service_Finished(this, new EventArgs());
  }
} 
```

在我的视图 (UI) 代码中，我为事件添加了一个事件处理程序`Service_Finished`。我注意到我可以从`CallService`我的视图模型中的 " " 方法成功地抛出事件。但是，如果我尝试`Service_Finished`从部分`ServiceBeginGetRequestStreamCallback`或`Service_Completed`部分中触发，则永远不会在 UI 中触发该事件。

由于视图模型位于可移植类库中，我不知道如何调试它。此时我知道 CallService 已成功调用。但是，我不知道我在哪里进入`ServiceBeginGetRequestStreamCallback`，如果我什至到达`Service_Completed`。

我从我的 Windows Phone 开发经验中知道，我需要检查我是否在 UI 线程上，如果不是，我必须做一些 Deployment.stuff。但是，使用 MvvmCross 方法，我不确定 a) 是否必须这样做，b) 是否可以选择，因为视图模型应该适用于 Android 和 iOS。无论如何，必须有一种方法来 a) 从视图模型调用 Web 服务 b) 将消息发送回视图以便更新 UI。不幸的是，我似乎无法弄清楚。有人（slodge :)）可以告诉我我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T08:41:42.833

通常，我将这种 WebService 调用放在 Model 而不是 ViewModel 中——它使 ViewModel 和 WebService 客户端代码更易于重用。

一些简单的例子如下：

*   twittersearch 示例 - [https://github.com/slodge/MvvmCross/tree/v3/Sample%20-%20TwitterSearch](https://github.com/slodge/MvvmCross/tree/v3/Sample%20-%20TwitterSearch)
*   Dilbert 样本 - [https://github.com/slodge/MvvmCross-Tutorials/tree/master/DailyDilbert](https://github.com/slodge/MvvmCross-Tutorials/tree/master/DailyDilbert)

> 我从我的 Windows Phone 开发经验中知道，我需要检查我是否在 UI 线程上，如果不是，我必须做一些 Deployment.stuff。但是，使用 MvvmCross 方法，我不确定 a) 如果我必须这样做并且

是的，来自 ViewModel->View 的所有通信都应该在 UI 线程上。

> b）如果这甚至是一个选项，因为视图模型应该适用于 Android 和 iOS。

MvvmCross 提供了一个接口，允许您将执行编组到 UI 线程上。在 ViewModel 中，这很容易通过调用`InvokeOnMainThread(() => { /* your code */ })`

在幕后，MvvmCross 也会将所有`RaisePropertyChanged`执行编组到 UI 线程。**注意**- 虽然`ObservableCollection`更新不会自动编组 - 这是因为`ObservableCollection`它是一个存在于 MvvmCross 之外的类。

> 无论如何，必须有一种方法来 a) 从视图模型调用 Web 服务，并且

见样品（上）

> b) 将消息发送回视图，以便更新 UI。

一般来说，您不应该通过事件发送这些类型的消息。

相反，您应该：

*   更新 ViewModel 属性
*   （偶尔）通过 Messenger 发送消息

# google-app-engine - GAE ReferencePropertyResolveError - 删除父实体

> ID：16142630
> 
> 赞同：0
> 
> 时间：2013-04-22T08:32:59.777
> 
> 标签：google-app-engine

**错误**

```
TemplateSyntaxError: Caught ReferencePropertyResolveError while rendering: ReferenceProperty failed to be resolved: [u'Image', 12345678L] 
```

**楷模**

```
#ModelBase class extends from db.Model

class Article(TaggableModel):
   ...
  image = db.ReferenceProperty(Image, collection_name='image_set')
  image_blob = blobstore.BlobReferenceProperty()

class BlobStoreImage(ModelBase):
   ...
  title = db.StringProperty()
  alt = db.TextProperty(default="")
  blobkey = blobstore.BlobReferenceProperty()

class Image(ModelBase):
   ...
  title = db.StringProperty()
  original = db.BlobProperty() 
```

据我了解，有一篇文章指的是不存在`Image`的`id='12345678L'`. 但是，您似乎[无法查询 app engine 中的各个字段](https://stackoverflow.com/questions/6554159/google-app-engine-query-only-for-a-field)。鉴于这种情况，我如何通过删除`Article`与不存在的图像相关联的图像来解决此错误，或者创建具有上述 id 的图像。

我已经尝试过后者，并且服务器返回了 200 代码，但也许我的语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:13:51.723

链接的问题既 a）过时，又 b）与您的问题完全无关。当然，您可以通过 ID 查询单个图像，这根本不是 Nick 所说的（仅供参考，他说您不能进行仅获取单个字段而不是整个记录的查询，这在时间，但实际上您现在可以使用[投影查询](https://developers.google.com/appengine/docs/python/datastore/projectionqueries)）。

使用普通的 db 查询语法，您可以找到具有相关图像 id 的文章，如下所示：

```
from google.appengine.ext import db
image_key = db.Key.from_path(u'Image', 12345678L)
article = Article.all().filter('image', image_key).get() 
```

如果这让您感到困惑，您应该去阅读全面的[数据存储查询文档](https://developers.google.com/appengine/docs/python/datastore/queries)。

# alfresco - Alfresco Labs 3.0 中的信号命令

> ID：16142632
> 
> 赞同：0
> 
> 时间：2013-04-22T08:33:01.533
> 
> 标签：alfresco

我能够通过工作流控制台部署和启动工作流。但是当我尝试执行“ `signal jbpm$2326535-@`”时，它给了我以下错误。

```
"org.alfresco.service.cmr.workflow.WorkflowException: Failed to signal transition 'null' from workflow path 'jbpm$2326535-@' " 
```

谁能告诉这个原因和解决方法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T15:01:08.903

将您的脚本代码放在`<![CDATA[`标签之间

喜欢：

```
<action class="org.alfresco.repo.workflow.jbpm.AlfrescoJavaScript">
<script><![CDATA[
logger.log("Hello World!");
]]></script>
</action> 
```

为了您自己的利益，在 log4j 中添加调试或在 alfresco/extension 文件夹中添加单独的*log4j-dev.properties 。*设置要调试的脚本记录器和其他工作流元素。

发生这种情况的原因是感叹号等特殊字符需要放在 CDATA 标记中。对于其他字符，例如 & 有转义字符，例如`&amp;`

# apache - 从 XWPF 文档 (Apache POI) 获取图像大小

> ID：16142634
> 
> 赞同：4
> 
> 时间：2013-04-22T08:33:03.390
> 
> 标签：apache, parsing, ms-word, apache-poi, docx

有人有使用 Apache poi 解析 docx 文件的经验吗？`CharacterRun`从使用中提取图像时

```
paragraph.getRun().getEmbeddedPictures(); 
```

我无法找到一种方法来获取图片的缩放或/和宽度/高度数据。

有这方面的功能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T14:06:10.940

想通了！

我不确定这是否是官方方式，但是，您可以这样做。

XWPFRun 并没有专门给你任何信息，但是 XWPFPicture 有一个名为 getCTPicture 的方法，它将在 docx 文件中返回图片的 XML 部分，使用你最喜欢的 XML 解析器，你只需要找到这个“/xml-fragment/pic:spPr /a:xfrm/a:ext" (xpath) 在 XML 结构中，该标签将具有 cx 和 cy 属性，这些基本上是 EMU 英制单位中图像的显示宽度和高度。如果你用谷歌搜索，你可以找到 EMUS_PER_INCH = 914400 所以你可以将它转换为英寸（或者稍后将英寸转换为像素，如果我没记错的话应该是每英寸 96 像素）所以做一些计算你可以计算出新的宽度和图片高度。

有点复杂，但就是这样。它有效。

希望对某人有所帮助。

# ruby-on-rails - ActiveRecord 中的条件验证问题

> ID：16142636
> 
> 赞同：0
> 
> 时间：2013-04-22T08:33:04.350
> 
> 标签：ruby-on-rails, ruby, validation, rails-activerecord

我必须有条件地验证我的`User`. 用户注册后，他可以完成其余的个人资料。它分为几部分，例如，有“教育背景”和“专业背景”。这些部分由我必须验证的字段组成（例如存在）。

因此，当然，这些字段不应在注册期间进行验证，而应仅在用户尝试编辑这些字段时进行。一个自然的想法是`context`在表单中发送一个参数，然后执行以下操作：

```
class User < ActiveRecord::Base
  attr_accessor :context

  with_options if: -> { |u| u.context == "educational" } do |s|
    s.validates :university_name, presence: true
    # ...
  end
end 
```

但是，如果我还需要在块内进行条件验证怎么办：

```
class User < ActiveRecord::Base
  attr_accessor :context

  with_options if: -> { |u| u.context == "educational" } do |s|
    s.validates :university_name, presence: true, if: :finished_university?
    # ...
  end
end 
```

这意味着那些 to `:if`s 将发生冲突。我*可以*`:if`将块中的every转换为`:unless`，但这会损害可读性，我真的不希望这样。

这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:59:46.697

如果您需要这么多“if”语句，则您的模型可能存在缺陷。也许您需要从用户中提取新模型，定义新资源和控制器。

编辑：这个宝石可能会有所帮助： [https ://github.com/stevehodgkiss/validation-scopes](https://github.com/stevehodgkiss/validation-scopes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:37:12.537

怎么样

`validates :university_name, presence: true, if: :finished_university? && lambda {|u| u.context == "educational"}`

# c# - 谷歌日历 API v3 EventDateTime

> ID：16142638
> 
> 赞同：1
> 
> 时间：2013-04-22T08:33:05.467
> 
> 标签：c#, .net, google-calendar-api

我正在尝试使用 google api v3 在 google 日历中插入事件，并在插入过程中出错。我使用的是 c#。

错误：

> Google.Apis.Requests.RequestError
> 
> 开始和结束时间无效或不匹配。[400]
> 
> 错误[消息[无效或不匹配的开始和结束时间。]位置[-]原因[无效]域[全局]

我的 EventDateTime 代码在这里。

```
 EventDateTime EventStartDTime = new EventDateTime();
            EventStartDTime.Date = "2013-06-03";
            EventStartDTime.DateTime = "2013-06-03T10:00:00.000+05:00";
            EventStartDTime.TimeZone = "Asia/Karachi";

            EventDateTime EventEndtDTime = new EventDateTime();
            EventEndtDTime.Date = "2013-06-05";
            EventEndtDTime.DateTime = "2013-06-05T10:00:00.000+05:00";
            EventEndtDTime.TimeZone = "Asia/Karachi"; 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-28T09:20:42.480

Google 日历 V3 API 时间戳需要 UTC 格式，因此您可以提及日期时间和时区（可选），因此您应该提供以下格式，它会自动采用当前时区：

```
 DateTime start = DateTime.Now;
            DateTime end = start + TimeSpan.FromMinutes(30);

            var curTZone = TimeZone.CurrentTimeZone;
            var dateStart = new DateTimeOffset(start, curTimeZone.GetUtcOffset(start));
            var dateEnd = new DateTimeOffset(end, curTimeZone.GetUtcOffset(end));
            var startTimeString = dateStart.ToString("o");
            var endTimeString = dateEnd.ToString("o");             

            evnt.Start = new EventDateTime()
            {                    
                DateTime = startTimeString 
            };

            evnt.End = new EventDateTime()
            {
                DateTime = endTimeString
            }; 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T07:47:53.403

[阅读此处](https://developers.google.com/google-apps/calendar/v3/reference/events)的文档后，您提供的偏移量似乎是可选的。从文档：

> 开始日期时间 | 日期时间 | 时间，作为组合的日期时间值（根据 RFC 3339 格式化）。除非在“timeZone”中明确指定时区，否则需要时区偏移量。

尝试删除 DateTime 变量中的偏移量或删除 TimeZone 变量。在我自己使用 Python 的测试中，这对我有用。我的代码示例（字典的相关部分）：

```
{
    'start': {
        'dateTime': '2013-06-05T09:00:00',
        'timeZone': 'Europe/Oslo'
     },
     'end': {
         'dateTime': '2013-09-T15:30:00',
          'timeZone': 'Europe/Oslo'
      },
} 
```

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-11T11:42:23.080

这是最终代码，它现在工作正常：

```
 var credential = GoogleWebAuthorizationBroker.AuthorizeAsync(

       new ClientSecrets
       {
           ClientId = "381422642478-tg5s8crg6j1atn259u0aptnltrhmlc24.apps.googleusercontent.com",
           ClientSecret = "7yxk_DOKRQv7XNB1rTF5FM2j",
       },
       new[] { CalendarService.Scope.Calendar },
       "user",
           CancellationToken.None).Result;

        // Create the service.
        var service = new CalendarService(new BaseClientService.Initializer
        {
            HttpClientInitializer = credential,
            ApplicationName = "Calendar API Sample",
        });
         DateTime start = DateTime.Now;
        DateTime end = start + TimeSpan.FromMinutes(30);

        DateTime initiate = DateTime.Now;
        DateTime ending = start + TimeSpan.FromMinutes(30);
        start = DateTime.SpecifyKind(start, DateTimeKind.Local);
        end = DateTime.SpecifyKind(end, DateTimeKind.Local);
        var myEvent = new Event
        {
            Summary = "Google I/O 2015",
            Location = "800 Howard St., San Francisco, CA 94103",
            Description = "A chance to hear more about Google's developer products.",
            Start = new EventDateTime()
            {
                DateTime = DateTime.Parse("2018-10-12T09:00:00-07:00"),
                TimeZone = "America/Los_Angeles",
            },
            End = new EventDateTime()
            {
                DateTime = DateTime.Parse("2018-10-12T17:00:00-07:00"),
                TimeZone = "America/Los_Angeles",
            },
            Recurrence = new String[] { "RRULE:FREQ=WEEKLY;BYDAY=MO" },
            Attendees = new List<EventAttendee>
            {
            new EventAttendee { Email = "wgcu418@gmail.com"}
            },
        };

    var recurringEvent = service.Events.Insert(myEvent, "primary");
    recurringEvent.SendNotifications = true;
        recurringEvent.Execute(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-12T22:13:33.740

在特定时间更新（而不是创建）事件时，在[darthlukan 的答案](https://stackoverflow.com/a/16708369/3893015)中指定时区对我不起作用。但是，将 DateTimeKind 设置为本地时间就可以了：

```
DateTime start = DateTime.Now;
DateTime end = start + TimeSpan.FromMinutes(30);
start = DateTime.SpecifyKind(start, DateTimeKind.Local);
end = DateTime.SpecifyKind(end, DateTimeKind.Local);

Event newEvent = new Event();
newEvent.Start = new EventDateTime() { DateTime = start };
newEvent.End = new EventDateTime() { DateTime = end }; 
```

# android - 从应用程序调用时，某些 URL 未在外部浏览器中打开

> ID：16142644
> 
> 赞同：0
> 
> 时间：2013-04-22T08:33:42.393
> 
> 标签：android, android-webview, android-browser

当我尝试通过从我的应用程序调用本机浏览器来打开 URL 时，它不会从应用程序加载。它也不会启动浏览器。

我也没有任何例外。我用过`try/Catch`。同样，我也使用了 webView 客户端，但没有遇到任何异常。

```
 WebView webview = new WebView(this);
                   webview.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, 
                           LayoutParams.FILL_PARENT));
                   webview.setBackgroundColor(0);
                   webview.setInitialScale(0);
                   webview.getSettings().setJavaScriptEnabled(true);
                   webview.getSettings().setJavaScriptCanOpenWindowsAutomatically(false);

                   System.out.println("Within in WebView>>>> Before Load URL>>"+url);
                   webview.loadUrl(url);
                   webview.setWebViewClient(new HelloWebViewClient()); 
```

有没有人遇到过类似的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:36:25.390

此行可防止您的链接加载外部浏览器：

```
webview.setWebViewClient(new HelloWebViewClient()); 
```

如果要在浏览器中加载链接，请将其删除。好吧，如果我理解了你的问题。

# ios - 关于续订 iOS 证书

> ID：16142649
> 
> 赞同：-1
> 
> 时间：2013-04-22T08:33:56.503
> 
> 标签：ios, objective-c, certificate

我要更新我的 iOS 证书，对此我有疑问：

*   我是否必须使用更新的证书在 App Store 上重新发布我的应用程序？
*   我是否必须为我测试的应用程序重新创建所有配置文件？
*   我必须重新保存我的设备还是将它们保存在内存中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:38:54.493

> 我是否必须使用更新的证书在 App Store 上重新发布我的应用程序？

不。

> 我是否必须为我测试的应用程序重新创建所有配置文件？

您必须重新创建配置文件才能将新应用程序提交到商店。对于野外的临时测试应用程序，它们将继续运行，直到旧证书的到期日。

> 我必须重新保存我的设备还是将它们保存在内存中？

如果您指的是配置门户中的设备列表（现在称为“证书、标识符和配置文件”），它们将保持原样。

# flash - 指定的文件不正确，请检查您的路径。- 弹性纸

> ID：16142666
> 
> 赞同：0
> 
> 时间：2013-04-22T08:34:37.273
> 
> 标签：flash, flexpaper

我使用以下命令安装了 SWFTools

```
wget http://swftools.org/swftools-0.9.0.tar.gz
tar -zvxf swftools-0.9.0.tar.gz
sudo ./configure
sudo make
sudo make install 
```

`SWFTools`并通过设置安装位置配置为柔性纸`/usr/local/bin`

但是在我卸载 PDF 之后，它给我一个错误

```
"Incorrect file specified, please check your path." I can see pdf.swf files are not getting generated to it's location where it whould be. 
```

是否有`SWFTools`安装问题或任何其他问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:00:46.427

我找到了答案...首先，FlexPaper war 文件在 Linux for Windows 上无法正常工作，它很糟糕...我在 FlexPaper\common\view.jsp 中进行了一些代码修改，删除了以下代码

`else if(!conf.validParams(pdfFilePath, pdfdoc, pages)){`

```
 error += "Error:Incorrect file specified, please check your path.";
 } 
```

# java - 如何使用 java 将 CSV 日历导入我的 Google 日历

> ID：16142680
> 
> 赞同：0
> 
> 时间：2013-04-22T08:35:25.743
> 
> 标签：java, csv, import, google-calendar-api, gdata

我想知道如何使用 java 作为编程语言将 CSV 日历导入我的 Google 日历。

这应该是一种方式，因为 Web 服务提供了此功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:51:19.073

使用您需要的程序：

1.  阅读 CSV 日历文件
2.  对于 CSV 文件中的每个事件，请使用 Google 提供的日历插入 API ( [https://developers.google.com/google-apps/calendar/v3/reference/events/insert](https://developers.google.com/google-apps/calendar/v3/reference/events/insert) )

这是相当高的水平，但它是如何使用程序完成的要点。

# wpf - WPF。模板选择器中控件之间的绑定

> ID：16142683
> 
> 赞同：2
> 
> 时间：2013-04-22T08:35:35.090
> 
> 标签：wpf, data-binding, avalondock

我的 WPF 应用程序中的数据绑定有问题。情况是：

我有两个控件，一个带有树视图，另一个带有列表中所选项目的详细视图。使用以下代码一切正常（绑定）：

```
<avalonDock:LayoutAnchorablePaneGroup DockWidth="230" Orientation="Vertical">     
    <avalonDock:LayoutAnchorablePane Name="CTTreeLayout">
        <avalonDock:LayoutAnchorable Title="CTs">
            <treeControl:TreeViewUControl x:Name="TreeViewCTs">
            </treeControl:TreeViewUControl>
        </avalonDock:LayoutAnchorable>
    </avalonDock:LayoutAnchorablePane>
    <avalonDock:LayoutAnchorablePane Name="CTInfoLayout">
        <avalonDock:LayoutAnchorable Title="Información">
            <infoControl:EntityInfoUControl x:Name="InfoControl" SelectedItem="{Binding ElementName=TreeViewCTs, Path=CTViewModel.SelectedItem}">
            </infoControl:EntityInfoUControl>
        </avalonDock:LayoutAnchorable>
    </avalonDock:LayoutAnchorablePane>
</avalonDock:LayoutAnchorablePaneGroup> 
```

所选项目是详细信息控件上的依赖属性。

现在，我正在使用 Avalondock 更改布局策略（您可以从代码中的 avalonDock 标记中看到）。这意味着使用模板选择器。布局工作正常，但绑定被破坏。这是实际的一段代码，每个控件都在其模板中：

```
<avalonDock:DockingManager.LayoutItemTemplateSelector>
    <layout:PanesTemplateSelector>
        <layout:PanesTemplateSelector.CTToolTemplate>
            <DataTemplate>
                <treeControl:TreeViewUControl x:Name="TreeViewCTs"/>
            </DataTemplate>
        </layout:PanesTemplateSelector.CTToolTemplate>
        <layout:PanesTemplateSelector.CTInfoToolTemplate>
            <DataTemplate>
                <infoControl:EntityInfoUControl x:Name="InfoControl" SelectedItem="{Binding CTViewModel.SelectedItem, ElementName=TreeViewCTs}"/>
            </DataTemplate>
        </layout:PanesTemplateSelector.CTInfoToolTemplate>
    </layout:PanesTemplateSelector>
</avalonDock:DockingManager.LayoutItemTemplateSelector> 
```

我怎样才能更新绑定以再次工作？我试过 FindAncestor 没有成功。

编辑：

终于解决了。正如 Dean Chalk 所说，按照我的策略，我的目标是不可能实现的。经过几次头痛后，我重构了我的数据模型。现在我有一个包含树视图和详细信息视图的视图模型。我遵循 AvalonDock 2.0 MVVM 示例的结构。

[样品在这里](http://avalondock.codeplex.com/releases/view/98689)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:06:49.193

使用`DataTemplate`这样的你将只能绑定到`DataContext`运行时设置的任何内容。您将看不到另一个控件的可见性`SelectedItem`，并且您将无法使用`ElementName`绑定。

这类问题确实没有直接的解决方案，您需要仔细研究您的数据模型。

# perl - git-svn 获取错误“0 [main] ?4828 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3 2 错误 6，处理 io_handle<0x0>”

> ID：16142698
> 
> 赞同：2
> 
> 时间：2013-04-22T08:36:09.553
> 
> 标签：perl, git-svn

当我运行时`git svn fetch`，我收到以下错误消息。我如何解决它？非常感谢。

```
F:\gitsvntest>git svn 获取
      0 [主] ?4828 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
    272 [主要] ?4828 fhandler_base::fork_fixup:/usr/lib/perl5/5.8.8/Term/Cap.pm
 - Win32错误6，句柄io_handle
   4902 [main] ?4828 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
   5005 [主要] ?4828 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
   5079 [主要] ?4828 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
      0 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x67
604000..0x67604014，完成 0，windows pid 4828，Win32 错误 487
      0 [主] ?1672 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
    256 [主要] ?1672 fhandler_base::fork_fixup:/usr/lib/perl5/5.8.8/Term/Cap.pm
 - Win32错误6，句柄io_handle
   4911 [main] ?1672 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
   5015 [主要] ?1672 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
   5078 [主] ?1672 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
5028759 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x67
604000..0x67604014，完成 0，Windows PID 1672，Win32 错误 487
      0 [主] ?4636 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
    200 [main] ?4636 fhandler_base::fork_fixup: /usr/lib/perl5/5.8.8/Term/Cap.pm
 - Win32错误6，句柄io_handle
   4700 [main] ?4636 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
   4761 [主要] ?4636 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
   4816 [主要] ?4636 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
10058702 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x6
7604000..0x67604014，完成 0，Windows PID 4636，Win32 错误 487
      0 [主] ?2372 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
    207 [main] ?2372 fhandler_base::fork_fixup: /usr/lib/perl5/5.8.8/Term/Cap.pm
 - Win32错误6，句柄io_handle
   4974 [main] ?2372 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
   5036 [主要] ?2372 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
   5092 [主要] ?2372 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
15090148 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x6
7604000..0x67604014，完成 0，windows pid 2372，Win32 错误 487
      0 [主] 3928 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
- 4876 [main] ?3928 fhandler_base::fork_fixup: /usr/lib/perl5/5.8.8/Term/Cap.p
m - Win32 错误 6，句柄 io_handle
   1204 [main] ?3928 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
   1506 [主要] 3928 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
   1608 [主要] 3928 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
20135923 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x6
7604000..0x67604014，完成 0，windows pid 3928，Win32 错误 487
      0 [主] 2188 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
    205 [main] ?2188 fhandler_base::fork_fixup: /usr/lib/perl5/5.8.8/Term/Cap.pm
 - Win32错误6，句柄io_handle
   4821 [main] ?2188 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
   4882 [主要] ?2188 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
   4938 [主要] ?2188 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
25169941 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x6
7604000..0x67604014，完成 0，windows pid 2188，Win32 错误 487
      0 [主] 3924 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
    207 [main] ?3924 fhandler_base::fork_fixup: /usr/lib/perl5/5.8.8/Term/Cap.pm
 - Win32错误6，句柄io_handle
   5118 [main] ?3924 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
   5698 [主要] ?3924 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
   5821 [主要] ?3924 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
30219728 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x6
7604000..0x67604014，完成 0，windows pid 3924，Win32 错误 487
      0 [主] ?4480 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
    273 [主要] ?4480 fhandler_base::fork_fixup:/usr/lib/perl5/5.8.8/Term/Cap.pm
 - Win32错误6，句柄io_handle
   6263 [main] ?4480 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
   6597 [主要] ?4480 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
   6682 [主要] ?4480 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
35259447 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x6
7604000..0x67604014，完成 0，Windows PID 4480，Win32 错误 487
      0 [主] 1500 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
    208 [main] ?1500 fhandler_base::fork_fixup: /usr/lib/perl5/5.8.8/Term/Cap.pm
 - Win32错误6，句柄io_handle
   5733 [main] ?1500 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
   5811 [主要] ?1500 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
   5876 [主要] ?1500 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
40306890 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x6
7604000..0x67604014，完成 0，windows pid 1500，Win32 错误 487
      0 [主] ?3356 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
    260 [主] ?3356 fhandler_base::fork_fixup: /usr/lib/perl5/5.8.8/Term/Cap.pm
 - Win32错误6，句柄io_handle
   1361 [main] ?3356 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
   6935 [主要] ?3356 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
   7092 [主要] ?3356 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
45360601 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x6
7604000..0x67604014，完成 0，windows pid 3356，Win32 错误 487
      0 [主] 1284 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
    698 [主要] ?1284 fhandler_base::fork_fixup: /usr/lib/perl5/5.8.8/Term/Cap.pm
 - Win32错误6，句柄io_handle
   6959 [main] ?1284 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
   7059 [主要] ?1284 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
   2267 [主要] ?1284 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
50404771 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x6
7604000..0x67604014，完成 0，windows pid 1284，Win32 错误 487
      0 [主] ?4120 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
    317 [主要] ?4120 fhandler_base::fork_fixup: /usr/lib/perl5/5.8.8/Term/Cap.pm
 - Win32错误6，句柄io_handle
   6634 [main] ?4120 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
   6699 [主要] ?4120 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
   6755 [主要] ?4120 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
55449698 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x6
7604000..0x67604014，完成 0，Windows PID 4120，Win32 错误 487
      0 [主] ?3440 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
    207 [主] ?3440 fhandler_base::fork_fixup: /usr/lib/perl5/5.8.8/Term/Cap.pm
 - Win32错误6，句柄io_handle
    852 [main] ?3440 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
   6945 [主要] ?3440 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
   7040 [主要] ?3440 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
61057400 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x6
7604000..0x67604014，完成 0，windows pid 3440，Win32 错误 487
      0 [主] ?5460 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
    474 [main] ?5460 fhandler_base::fork_fixup: /usr/lib/perl5/5.8.8/Term/Cap.pm
 - Win32错误6，句柄io_handle
   5882 [main] ?5460 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
   7563 [主要] ?5460 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
  12664 [主要] ?5460 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
66108342 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x6
7604000..0x67604014，完成 0，Windows PID 5460，Win32 错误 487
      0 [主] ?3084 fhandler_base::fork_fixup: /libexec/git-core/git-svn - Win3
2 错误6，句柄io_handle
    304 [main] ?3084 fhandler_base::fork_fixup: /usr/lib/perl5/5.8.8/Term/Cap.pm
 - Win32错误6，句柄io_handle
    699 [main] ?3084 fhandler_base::fork_fixup: /dev/pipew - Win32 错误 6，手
le io_handle
    843 [主要] ?3084 fhandler_base::fork_fixup: /f/gitsvntest/.git/bk7BX7R03b -
Win32错误6，句柄io_handle
    929 [主要] 3084 fhandler_base::fork_fixup: /f/gitsvntest/.git/aA7kR4Avx4 -
Win32错误6，句柄io_handle
71155467 [main] perl.exe" 3860 fork_copy：加载的 dll 数据/bss 传递 0 失败，0x6
7604000..0x67604014，完成 0，windows pid 3084，Win32 错误 487
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:55:53.763

Every now and then one hits this problem with Cygwin. The fix is [running `rebaseall`](http://cygwin.wikia.com/wiki/Rebaseall).

> Sometimes, after updating or installing packages, you'll start to get strange errors related to `fork()` or .dll loading. These errors are usually solved by rebasing your packages.
> 
> ## Rebasing
> 
> ### Installing Required Packages
> 
> To rebase, you first need to install two packages:
> 
> *   dash (or ash)
> *   rebase
> 
> ### Stop Running Services
> 
> Now that you have the packages you need, you'll need to make sure no Cygwin-based services are running (including X11, SSH, etc). If you don’t feel up to figuring out how to stop every running Cygwin service, restarting your computer in safe-mode might be an effective hack.
> 
> ### Rebase Everything
> 
> Now that no Cygwin services are running, you can rebase your packages. Open a Windows command prompt (by going to the "Run" menu and entering "cmd"). Once there, type or right-click and paste the following commands. Be patient, this’ll take a minute:
> 
> ```
> \cygwin\bin\dash -c '/usr/bin/rebaseall'
> exit
> exit 
> ```
> 
> As an alternative method you may also try under Windows 7 going to `C:\cygwin\bin`, and via right-click running `dash.exe` as Administrator, and then at the dash command prompt, type the following commands:
> 
> ```
> /usr/bin/rebaseall -v
> exit 
> ```
> 
> Rebasing all your packages will take a few minutes but should resolve the forking errors. Unfortunately, this seems to be machine-specific and can't be done by Cygwin's upstream.

For more, read [Rebaseall on the Cygwin wiki](http://cygwin.wikia.com/wiki/Rebaseall).

# python - 正则表达式：仅在字符出现 1 次时才匹配

> ID：16142704
> 
> 赞同：0
> 
> 时间：2013-04-22T08:36:26.650
> 
> 标签：python, regex

我需要创建一个找到以下模式的正则表达式：

```
= Head: Some text = 
```

我试过这个：

```
^(?:[=]).*(?:[=]) 
```

但它也匹配这个（它不应该匹配）：

```
== Hello Text 2 == 
```

那么我怎么能告诉正则表达式不匹配多次出现`==`

感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:38:21.963

您可以使用否定字符类而不是`.`

```
^=[^=]*=$ 
```

`[^=]*`匹配任何字符，但“=”

`$`匹配字符串的结尾

[在 Regexr 上](http://regexr.com?34k98)查看

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T08:42:21.737

以下是相当可读的：

```
>>> s = '= Head: Some text ='
>>> t = '== Hello Text 2 =='
>>> re.match(r'=[ ](.*?)[ ]=', s).group(1)
'Head: Some text'
>>> re.match(r'=[ ](.*?)[ ]=', t).group(1)
Traceback (most recent call last):
  File "<pyshell#22>", line 1, in <module>
    re.match(r'=[ ](.*?)[ ]=', t).group(1)
AttributeError: 'NoneType' object has no attribute 'group' 
```

# java - Java-Reflection - 在方法之前找到参数和注释

> ID：16142708
> 
> 赞同：3
> 
> 时间：2013-04-22T08:36:38.437
> 
> 标签：java, spring, spring-mvc, reflection

对于给定的包名称，我能够获取类及其方法名称。代码如下：

```
package com.hexgen.reflection;

import java.lang.reflect.Method;
import java.util.Iterator;
import java.util.List;

import org.springframework.web.bind.annotation.RequestMapping;

import com.hexgen.ro.request.CreateRequisitionRO;
import com.hexgen.tools.HexgenClassUtils;

public class HexgenWebAPITest {

    @SuppressWarnings({ "rawtypes", "unchecked", "unused" })
    public static void main(String[] args) {
        HexgenWebAPITest test = new HexgenWebAPITest();
        HexgenClassUtils hexgenClassUtils = new HexgenClassUtils();
        String uri="";
        String[] mappingValues=null;
        HttpClientRequests httpRequest = new HttpClientRequests();
        Class parames = CreateRequisitionRO[].class;

        Class booleanVal;
        booleanVal = Boolean.TYPE;
        Class cls;

        try {
            List classNames = hexgenClassUtils.findMyTypes("com.hexgen.*");
            Iterator<Class> it = classNames.iterator();
            while(it.hasNext())
            {

                Class obj = it.next(); 
                System.out.println("Methods available in : "+obj.getName());
                System.out.println("===================================");
                cls = Class.forName(obj.getName());
                Method[] method = cls.getMethods();
                int i=1;
                for (Method method2 : method) {
                    System.out.println(+i+":"+method2.getName());
                    i++;
                }
                System.out.println("===================================");
            }

        } catch (Exception ex) {
            ex.printStackTrace();
        }

    }

} 
```

以下是我的 util 类：

```
package com.hexgen.tools;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import org.springframework.core.io.Resource;
import org.springframework.core.io.support.PathMatchingResourcePatternResolver;
import org.springframework.core.io.support.ResourcePatternResolver;
import org.springframework.core.type.classreading.CachingMetadataReaderFactory;
import org.springframework.core.type.classreading.MetadataReader;
import org.springframework.core.type.classreading.MetadataReaderFactory;
import org.springframework.stereotype.Controller;
import org.springframework.util.ClassUtils;
import org.springframework.util.SystemPropertyUtils;

public class HexgenClassUtils {
    @SuppressWarnings({ "rawtypes", "unused" })
    public List<Class> findMyTypes(String basePackage) throws IOException, ClassNotFoundException
    {
        ResourcePatternResolver resourcePatternResolver = new PathMatchingResourcePatternResolver();
        MetadataReaderFactory metadataReaderFactory = new CachingMetadataReaderFactory(resourcePatternResolver);

        List<Class> candidates = new ArrayList<Class>();
        String packageSearchPath = ResourcePatternResolver.CLASSPATH_ALL_URL_PREFIX +
                                   resolveBasePackage(basePackage) + "/" + "**/*.class";
        Resource[] resources = resourcePatternResolver.getResources(packageSearchPath);
        for (Resource resource : resources) {
            if (resource.isReadable()) {
                MetadataReader metadataReader = metadataReaderFactory.getMetadataReader(resource);
                if (isCandidate(metadataReader)) {
                    candidates.add(Class.forName(metadataReader.getClassMetadata().getClassName()));
                }
            }
        }
        return candidates;
    }
    public String resolveBasePackage(String basePackage) {
        return ClassUtils.convertClassNameToResourcePath(SystemPropertyUtils.resolvePlaceholders(basePackage));
    }

    @SuppressWarnings({ "rawtypes", "unchecked" })
    public boolean isCandidate(MetadataReader metadataReader) throws ClassNotFoundException
    {
        try {
            Class c = Class.forName(metadataReader.getClassMetadata().getClassName());
            if (!c.isInterface() && c.getAnnotation(Controller.class) != null) {
                return true;
            }
        }
        catch(Throwable e){
        }
        return false;
    }

}

now how can i get the methods arguments and it's type through programmatically in spring ? 
```

举个例子，如果我得到了类和下面的方法，那么应该能够得到`@PreAuthorize,@RequestMapping,@ResponseBody,methodName and arguments it has like in this case it would be RequestBody CreateRequisitionRO[] request, @RequestHeader("validateOnly") boolean validateOnly and their TYPE`

```
@PreAuthorize("isAuthenticated() and hasPermission(#request, 'CREATE_REQUISITION')")
    @RequestMapping(method = RequestMethod.POST, value = "/trade/createrequisition")
    public @ResponseBody
    void createRequisition(@RequestBody CreateRequisitionRO[] request,
            @RequestHeader("validateOnly") boolean validateOnly) {
        logger.debug("Starting createRequisition()...");
        for (int i = 0; i < request.length; i++) {
            CreateRequisitionRO requisitionRequest = request[i];

            // FIXME this has to be removed/moved
            requisitionRequest.setFundManager(requisitionRequest.getUserId());
            // FIXME might have to search using param level as well
            SystemDefault sysDefault = dbFuncs.references.systemDefault
                    .findByCompanyAndDivisionAndPortfolio(
                            userContext.getCompany(),
                            userContext.getDivision(),
                            requisitionRequest.getPortfolio());
            requisitionRequest.setCustodianN(sysDefault.getCustodianN());

            gateKeeper.route(requisitionRequest);
        }
    } 
```

请帮我解决这个问题。

此致

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:19:06.313

```
Class clazz = Demo.class

for(Method method : clazz.getMethods()) {
  for(Annotation annotation : method.getDeclaredAnnotations()) {
     System.out.println(annotation );
  }
} 
```

如果您寻找特定的注释，那么您可以使用

```
RequestMapping requestMapping method.getAnnotation(RequestMapping.class);
System.out.println(requestMapping.values);
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:02:29.373

以下片段获取给定类的每个方法的每个注释的每个参数的属性（名称/类型/值）（`YourType`在示例中）：

```
for (Method m : YourType.class.getDeclaredMethods()) {
    String methodName = m.getName();
    for (Annotation a : m.getDeclaredAnnotations()) {
        String annotationName = a.annotationType().getSimpleName();
        for (Method arg : a.annotationType().getDeclaredMethods()) {
            String argumentName = arg.getName();
            Class<?> argumentType = arg.getReturnType();
            Object argumentValue = arg.invoke(a);
        }
    }
} 
```

# ios - Flex s:TextArea 看不到软键盘

> ID：16142722
> 
> 赞同：0
> 
> 时间：2013-04-22T08:37:40.053
> 
> 标签：ios, apache-flex, actionscript, iphone-softkeyboard

我在 iPad1（IOS 5.1.1）上使用 spark TextArea 作为输入对话框。

我使用以下代码

```
<s:HGroup x="5" y="65" left="5" right="5" width="750" height="50">
    <s:TextArea id="inputTextfield" needsSoftKeyboard="true" click="onTextInputClicked(event)"/>
</s:HGroup> 
```

单击此文本区域时，我还会调用函数 requestSoftKeyboard。奇怪的是requestSoftKeyboard的返回值为true，但是我看不到软键盘。

我需要设置其他东西吗？

# javascript - javascript中带有覆盖点的3d曲面图

> ID：16142723
> 
> 赞同：1
> 
> 时间：2013-04-22T08:37:43.140
> 
> 标签：javascript, charts, plot

我想可视化用 javascript 编写的随机优化算法，因此我希望在 javascript 中绘制带有覆盖散点的 3d 表面。但我找不到任何支持这个的库。有没有？[javascript-surface-plot](https://code.google.com/p/javascript-surface-plot/)几乎是我想要的，但它似乎不*支持*在图表上添加点。我想要[这张](http://www.originlab.com/www/products/images/3d_curve_fitting.600.png)图片中的图表。

# jsf-2 - 为 JSF2 编写自定义状态管理器

> ID：16142726
> 
> 赞同：1
> 
> 时间：2013-04-22T08:37:51.973
> 
> 标签：jsf-2

我的应用程序使用 JSF2.0 编写时出现性能问题（OOM 错误）。我可以看到超过 25 个用户的堆大小急剧增长，最终导致 OOM。作为性能调整计划的一部分，将 VIEW STATE 保存在缓存服务器中。

任何做同样事情的指针都会非常有帮助。作为起点，我重写了 SaveView(..) 方法以将 UIViewRoot 存储在缓存中，并仅通过使用 viewId 来恢复它。它被调用，但问题是，一个一致的 ArrayIndexOut... 来自 ServerStateHelper 的异常（我相信它是默认的服务器端保存方法助手）被调用并抛出此异常。

有人成功尝试过自定义 StateManager 实现吗？请分享。

# jboss - Arquillian 无法在 JBOSS 中部署“大”WAR

> ID：16142727
> 
> 赞同：4
> 
> 时间：2013-04-22T08:37:54.130
> 
> 标签：jboss, war, jboss-arquillian

我正在使用 JBOSS EAP 6.0.1。一切正常。我在我的项目中插入了一些依赖项，现在每个测试的部署都失败了。如果我使用 @deployment 注释来构建我的战争，部署似乎有某种文件大小限制

**问题：** @deployment 方法构建了 war 文件。已部署 arquillian 文件。现在正在部署 WAR 文件。jboss 内容文件夹包含文件“content8205106135070241895tmp”，大小正好为 16368KB。如果我删除一个依赖项并不重要，文件大小保持不变。测试本身从未真正开始/结束。

如果我取消 netbeans 中的测试。我从 jboss 收到以下消息：

```
at       org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:123) [jboss-as-server-7.1.3.Final-redhat-4-JBPAPP-10565.jar:7.1.3.Final-redhat-4]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA-redhat-2.jar:1.0.2.GA-redhat-2]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA-redhat-2.jar:1.0.2.GA-redhat-2]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [rt.jar:1.7.0_15]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [rt.jar:1.7.0_15]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_15]
Caused by: org.jboss.as.server.deployment.DeploymentUnitProcessingException: JBAS018740: Einhõngen des Deployment-Contents fehlgeschlagen
    at org.jboss.as.server.deployment.module.DeploymentRootMountProcessor.deploy(DeploymentRootMountProcessor.java:92) [jboss-as-server-7.1.3.Final-redhat-4-JBPAPP-10565.jar:7.1.3.Final-redhat-4]
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:116) [jboss-as-server-7.1.3.Final-redhat-4-JBPAPP-10565.jar:7.1.3.Final-redhat-4]
    ... 5 more
 Caused by: java.util.zip.ZipException: error in opening zip file
    at java.util.zip.ZipFile.open(Native Method) [rt.jar:1.7.0_15]
    at java.util.zip.ZipFile.<init>(ZipFile.java:214) [rt.jar:1.7.0_15]
    at java.util.zip.ZipFile.<init>(ZipFile.java:144) [rt.jar:1.7.0_15]
    at java.util.zip.ZipFile.<init>(ZipFile.java:158) [rt.jar:1.7.0_15]
    at org.jboss.vfs.VFSUtils.unzip(VFSUtils.java:845)
    at org.jboss.vfs.VFS.mountZipExpanded(VFS.java:536)
    at org.jboss.vfs.VFS.mountZipExpanded(VFS.java:567)
    at org.jboss.as.server.deployment.DeploymentMountProvider$Factory$ServerDeploymentRepositoryImpl.mountDeploymentContent(DeploymentMountProvider.java:97) [jboss-as-server-7.1.3.Final-redhat-4-JBPAPP-10565.jar:7.1.3.Final-redhat-4]
    at org.jboss.as.server.deployment.module.DeploymentRootMountProcessor.deploy(DeploymentRootMountProcessor.java:88) [jboss-as-server-7.1.3.Final-redhat-4-JBPAPP-10565.jar:7.1.3.Final-redhat-4]
    ... 6 more 
```

我已经为异常构建了一个示例项目：

**pom.xml**

http://maven.apache.org/xsd/maven-4.0.0.xsd">4.0.0

```
<groupId>com.test</groupId>
<artifactId>ArquillianExceptionTest</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>war</packaging>

<name>ArquillianExceptionTest</name>

<properties>
    <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>

    <dependency>
        <groupId>org.richfaces.ui</groupId>
        <artifactId>richfaces-components-ui</artifactId>
        <version>4.3.1.Final</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.richfaces.core</groupId>
        <artifactId>richfaces-core-impl</artifactId>
        <version>4.3.1.Final</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.arquillian.junit</groupId>
        <artifactId>arquillian-junit-container</artifactId>
        <version>1.0.3.Final</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.shrinkwrap.resolver</groupId>
        <artifactId>shrinkwrap-resolver-impl-maven</artifactId>
        <version>2.0.0-beta-3</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.shrinkwrap.resolver</groupId>
        <artifactId>shrinkwrap-resolver-api-maven</artifactId>
        <version>2.0.0-beta-3</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxrs</artifactId>
        <version>2.2.1.GA</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxb-provider</artifactId>
        <version>2.2.0.GA</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jettison-provider</artifactId>
        <version>2.2.0.GA</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jackson-provider</artifactId>
        <version>2.2.1.GA</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.xml</groupId>
        <artifactId>jaxb-impl</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.ejb3</groupId>
        <artifactId>jboss-ejb3-ext-api</artifactId>
        <version>2.0.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.6</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.picketbox</groupId>
        <artifactId>jboss-security-spi</artifactId>
        <version>4.0.16.Final</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.picketbox</groupId>
        <artifactId>jbosssx</artifactId>
        <version>4.0.16.Final</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.spec</groupId>
        <artifactId>jboss-javaee-6.0</artifactId>
        <version>3.0.2.Final</version>
        <type>pom</type>
        <scope>test</scope>
        <exclusions>
            <exclusion>
                <groupId>xalan</groupId>
                <artifactId>xalan</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.4</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.mockftpserver</groupId>
        <artifactId>MockFtpServer</artifactId>
        <version>2.4</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.as</groupId>
        <artifactId>jboss-as-arquillian-container-remote</artifactId>
        <version>7.1.3.Final</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.arquillian.extension</groupId>
        <artifactId>arquillian-warp</artifactId>
        <version>1.0.0.Alpha2</version>
        <type>pom</type>
        <scope>test</scope>
        <exclusions>
            <exclusion>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-log4j12</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.7.2</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>com.lowagie</groupId>
        <artifactId>itext</artifactId>
        <version>4.2.0</version>
    </dependency>
    <dependency>
        <groupId>commons-net</groupId>
        <artifactId>commons-net</artifactId>
        <version>3.2</version>
    </dependency>
    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.9.5</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>net.sf.opencsv</groupId>
        <artifactId>opencsv</artifactId>
        <version>2.3</version>
    </dependency>
    <dependency>
        <groupId>fr.opensagres.xdocreport</groupId>
        <artifactId>fr.opensagres.xdocreport.document.odt</artifactId>
        <version>1.0.0</version>
    </dependency>
    <dependency>
        <groupId>fr.opensagres.xdocreport</groupId>
        <artifactId>fr.opensagres.xdocreport.template.velocity</artifactId>
        <version>1.0.0</version>
    </dependency>
    <dependency>
        <groupId>org.apache.cocoon</groupId>
        <artifactId>cocoon-core</artifactId>
        <version>2.2.0</version>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <compilerArguments>
                    <endorseddirs>${endorsed.dir}</endorseddirs>
                </compilerArguments>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
                <failOnMissingWebXml>false</failOnMissingWebXml>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${endorsed.dir}</outputDirectory>
                        <silent>true</silent>
                        <artifactItems>
                            <artifactItem>
                                <groupId>javax</groupId>
                                <artifactId>javaee-endorsed-api</artifactId>
                                <version>6.0</version>
                                <type>jar</type>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

**JUnit 类**

```
import java.io.File;
import java.util.Map;
import org.jboss.arquillian.container.test.api.Deployment;

import org.jboss.arquillian.junit.Arquillian;
import org.jboss.shrinkwrap.api.ArchivePath;
import org.jboss.shrinkwrap.api.Node;
import org.jboss.shrinkwrap.api.ShrinkWrap;
import org.jboss.shrinkwrap.api.spec.WebArchive;
import org.jboss.shrinkwrap.resolver.api.maven.Maven;
import org.junit.After;
import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;
import org.junit.runner.RunWith;

@RunWith(Arquillian.class)
public class NewEmptyJUnitTestDisabled {

public NewEmptyJUnitTestDisabled() {
}

@Deployment
public static WebArchive createDeploymentWar() {
    File[] libs = Maven.resolver().loadPomFromFile("pom.xml").importRuntimeAndTestDependencies().asFile();
    WebArchive war = ShrinkWrap.create(WebArchive.class, "mytest.war")
            .addAsWebInfResource("META-INF/beans.xml", "beans.xml");
    for (File file : libs) {
        war.addAsLibrary(file);
    }
    for (Map.Entry<ArchivePath, Node> entry : war.getContent().entrySet()) {
        if (entry.getValue().toString().contains(".jar")) {
            System.out.println(entry.getValue().toString());
        }
    }
    return war;
}

@BeforeClass
public static void setUpClass() {
}

@AfterClass
public static void tearDownClass() {
}

@Before
public void setUp() {
}

@After
public void tearDown() {
}

@Test
public void emtyTest() throws Exception {
    System.out.println("Nothing here to see");
}
} 
```

我正在使用 arquillian 远程服务器：

```
<?xml version="1.0" encoding="UTF-8"?>
<arquillian xmlns="http://jboss.org/schema/arquillian"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
    http://jboss.org/schema/arquillian
    http://jboss.org/schema/arquillian/arquillian_1_0.xsd">
<!--https://docs.jboss.org/author/display/ARQ/JBoss+AS+7.1%2C+JBoss+EAP+6.0+-+Remote-->
<container qualifier="arquillian-jbossas-remote">
    <configuration>
        <property name="managementAddress">127.0.0.1</property>
        <property name="managementPort ">9999</property>
    </configuration>
</container>
</arquillian> 
```

该项目将构建良好，但 junit 测试用例永远不会完成。部署将停留在 16.8 MB 左右。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T12:58:58.373

你检查过这个错误吗？ [https://bugzilla.redhat.com/show_bug.cgi?id=871413](https://bugzilla.redhat.com/show_bug.cgi?id=871413) 看起来解决方案是使用 EAP6.0.1 Maven 存储库附带的“jboss-javaee-6.0-with-tools”。

# java - 任何人都可以在 tomcat localhost 日志中指出此错误的原因吗？

> ID：16142728
> 
> 赞同：1
> 
> 时间：2013-04-22T08:37:57.290
> 
> 标签：java, tomcat, localhost

```
11-Apr-2013 12:56:04 org.apache.catalina.core.ApplicationContext log
SEVERE: Exception while dispatching incoming RPC call
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(Unknown Source)
    at org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:751)
    at org.apache.coyote.http11.InternalInputBuffer$InputStreamInputBuffer.doRead(InternalInputBuffer.java:781)
    at org.apache.coyote.http11.filters.IdentityInputFilter.doRead(IdentityInputFilter.java:116)
    at org.apache.coyote.http11.InternalInputBuffer.doRead(InternalInputBuffer.java:710)
    at org.apache.coyote.Request.doRead(Request.java:428)
    at org.apache.catalina.connector.InputBuffer.realReadBytes(InputBuffer.java:304)
    at org.apache.tomcat.util.buf.ByteChunk.substract(ByteChunk.java:403)
    at org.apache.catalina.connector.InputBuffer.read(InputBuffer.java:327)
    at org.apache.catalina.connector.CoyoteInputStream.read(CoyoteInputStream.java:193)
    at com.google.gwt.user.server.rpc.RPCServletUtils.readContentAsUtf8(RPCServletUtils.java:152)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.doPost(RemoteServiceServlet.java:76)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.genesyslabs.wfm70.server.filters.RPCRequestCharsetFilter.doFilter(RPCRequestCharsetFilter.java:26)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at com.genesyslabs.wfm70.server.LocaleFilter.doFilter(LocaleFilter.java:50)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:08:00.230

它似乎在说另一端（在本例中为 GWT 客户端）意外关闭了连接。我认为我们不能从堆栈跟踪中推断出更多信息。您需要提供有关技术、系统功能以及发生此故障的情况的更多信息。

（一种可能的解释是用户在错误的时刻关闭了他/她的浏览器......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:08:27.390

你用的是哪个java版本？它看起来像一个 java 7 错误，导致 windows 防火墙出现问题。 [错误 #7077696](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7077696)

# java - 在 Java 中使用相对路径安全吗？

> ID：16142730
> 
> 赞同：1
> 
> 时间：2013-04-22T08:38:02.037
> 
> 标签：java, path, relative-path

我有一个小的 Java 应用程序（JRE 1.5）。用户输入路径：该路径可以是相对路径（例如`./myFolder`或`../myRootFolder`）。

当我从此路径创建文件对象时，我收到此路径：

```
C:\Programs\working_dir\.\myFolder 
```

Java 似乎能够处理这个：sourceDir_file.exists 为这个文件返回“true”。

使用此文件是否安全，还是应该`.\`从路径中删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:41:45.477

最安全的方法是`public URL getResource(String name)`

并且相对路径将比绝对路径更安全

为什么因为存在于 a 上的单个文件`system`可以有许多不同`paths`的引用它

# activemq - 从 ActiveMQ 引发的奇怪异常

> ID：16142731
> 
> 赞同：0
> 
> 时间：2013-04-22T08:38:05.537
> 
> 标签：activemq

我们刚刚在调用发送消息的过程中观察到非常奇怪的异常，堆栈跟踪如下所示：

```
- unable to send message - Implement me. @ root cause @ := javax.jms.JMSException: Implement me.
        ...@ root cause trace := @
javax.jms.JMSException: Implement me.
at org.apache.activemq.util.JMSExceptionSupport.create(JMSExceptionSupport.java:49)
at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1377)
at org.apache.activemq.ActiveMQConnection.syncSendPacket(ActiveMQConnection.java:1305)
at org.apache.activemq.ActiveMQSession.send(ActiveMQSession.java:1795)
at org.apache.activemq.ActiveMQMessageProducer.send(ActiveMQMessageProducer.java:277)
at org.apache.activemq.ActiveMQMessageProducer.send(ActiveMQMessageProducer.java:212)
at org.apache.activemq.ActiveMQMessageProducerSupport.send(ActiveMQMessageProducerSupport.java:300)
at org.apache.activemq.ActiveMQQueueSender.send(ActiveMQQueueSender.java:111)
......
at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.RuntimeException: Implement me.
at org.fusesource.mq.leveldb.LevelDBStore.getLastProducerSequenceId(LevelDBStore.scala:367)
at org.apache.activemq.broker.TransportConnection.getProducerBrokerExchange(TransportConnection.java:1344)
at org.apache.activemq.broker.TransportConnection.processMessage(TransportConnection.java:451)
at org.apache.activemq.command.ActiveMQMessage.visit(ActiveMQMessage.java:681)
at org.apache.activemq.broker.TransportConnection.service(TransportConnection.java:292)
at org.apache.activemq.broker.TransportConnection$1.onCommand(TransportConnection.java:150)
at org.apache.activemq.transport.MutexTransport.onCommand(MutexTransport.java:50)
at org.apache.activemq.transport.WireFormatNegotiator.onCommand(WireFormatNegotiator.java:113)
at org.apache.activemq.transport.AbstractInactivityMonitor.onCommand(AbstractInactivityMonitor.java:229)
at org.apache.activemq.transport.TransportSupport.doConsume(TransportSupport.java:83)
at org.apache.activemq.transport.nio.NIOTransport.serviceRead(NIOTransport.java:138)
at org.apache.activemq.transport.nio.NIOTransport$1.onSelect(NIOTransport.java:69)
at org.apache.activemq.transport.nio.SelectorSelection.onSelect(SelectorSelection.java:94)
at org.apache.activemq.transport.nio.SelectorWorker$1.run(SelectorWorker.java:119)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
... 1 more 
```

而且它不是第一次发生，我的意思是，它会在运行的日子里成功发送消息，但在某些时候，它只是因为这些错误而失败。

有人能告诉我是什么原因造成的吗？或一些提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:14:42.783

它似乎是由于 LevelDB 商店中的一些问题。那家商店是新的，预计会出现问题。您可以通过更改 activemq.xml 来切换到更旧的更强大的 KahaDB 存储。如果您可以提供可重现的测试用例，那么最好的办法是在 ActiveMQ 站点上打开 Jira 问题。

# fpdf - FPDF MultiCell（）文本换行错误

> ID：16142733
> 
> 赞同：1
> 
> 时间：2013-04-22T08:38:10.923
> 
> 标签：fpdf

我正在使用 FPDF 生成 PDF 文件。我正在从 a 中保存一个特定的变量，`<textarea>`然后通过`MultiCell()`.

`<textarea>`输入如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/Yxps6.jpg)

但 PDF 文件输出如下：

![在此处输入图像描述](https://i.stack.imgur.com/8HqI4.jpg)

它输出不包含在输入中的不必要的新行。

我的代码如下所示：

```
$v=mysql_query("select * from postflight where reservno = '$_SESSION[ptrcode]'") or die(mysql_error());
$w=mysql_fetch_array($v);
$z=$w['prem']; //pilot remarks

$pr="PILOT REMARKS\n".$z;
$pdf->MultiCell(189, 8, $pr, 1, 1); 
```

我怎样才能解决这个问题？或者这是 MultiCell() 中文本换行的默认间距？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T07:45:45.557

第二个参数是`height`参数。您可以通过降低此值来减小间距，例如尝试将其设置为`2`or `3`：

```
$pdf->MultiCell(189, 3, $pr, 1, 1); 
```

# eclipse - 构建过程中发生错误。在项目上运行构建器“Java Builder”时出错

> ID：16142737
> 
> 赞同：11
> 
> 时间：2013-04-22T08:38:30.107
> 
> 标签：eclipse

当我在 eclipse juno 中工作并尝试保存 grails 文件时发生此错误

```
Errors occurred during the build.
Errors running builder 'Java Builder' on project 'My_Project_name'.
DONT_CARE 
```

这是什么错误？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-30T03:48:48.917

试试这个，转到项目选项卡，然后是属性，然后单击 Java 构建路径，然后是添加库，然后是 Android 类路径容器，然后选择您的项目，然后点击完成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-09T19:31:47.123

我也遇到了这个问题，最后通过更改构建路径上的库顺序来解决问题。

转到构建路径->配置构建路径->在顶部制作 JRE 系统库->然后 MVN/Gradle 依赖项->然后是 Ur 项目 src/main/test/resources 文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-11T10:59:43.560

> 我添加了这个问题并自己回答，因为我在 Stackoverflow 上找不到答案，这可能对其他人有益
> 
> 答案是：
> 
> 在您的项目“项目”上，右键单击 -> Properties>Builders Remove the missing builder Source [http://www.eclipse.org/forums/index.php/t/28894/](http://www.eclipse.org/forums/index.php/t/28894/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-24T12:05:27.567

我在 Linux 下的 Eclipse 上遇到了同样的问题。当我的笔记本电池没电时，它会关闭并关闭 eclipse 和所有其他正在运行的程序。在我再次启动我的笔记本并启动 Eclipse 后，它显示我的消息“构建期间发生错误”。在我重新启动 Eclipse 后，问题就出自它自身，并且不再显示。也许日食的硬停止是原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-03T12:32:25.260

大多数这些错误是由于没有正确添加外部库。

1.  如果您能够缩小最近添加的库，请删除不需要的库。

2.  否则，在不添加新库的情况下创建新的工作区并开始使用它。

就我而言，龙目岛安装导致了这个问题。一旦它被删除，上面的构建错误问题就不会出现。

看看有没有帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-12T05:59:58.110

windows操作系统这个问题的**正版解决方案是：****通过设置路径变量**

简单的 5 个步骤将是：

*步骤 0：*转到窗口按钮并单击**编辑系统环境**

*第 1 步：*转到高级>>环境变量>>编辑路径

*第 2 步：*将路径值更改为：

```
 **(1):** the jdk installed folder:- C:\Program Files\Java\jdk-12.0.1\bin

   **(2):** copy the location of the path variable which is default i.e.: %SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\Git\cmd   

    **(3):** Merge both of them and paste/update into variable value as:- C:\Program Files\Java\jdk-12.0.1\bin**;**%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\;C:\Program Files\Git\cmd 
```

*第 3*步：通过以下方式打开 cmd：- **ctrl+r**

*第 4 步：*检查您已安装的当前 java 版本是否符合机器：- **java -version**（如果不起作用，请尝试：- **jshell -version**）

*STEP 5* : 获取版本后启动 eclipse IDE 并创建新的 java 项目并将安装的 jdk 的位置设置为：C:\Program Files\Java\jdk-11.0.2

此后，您的 java 应用程序将有效运行。

***为什么会出现这个问题：***当我们安装多个jdk并运行eclipse时，我们的机器以及eclipse ide都需要同步安装的java版本。因此，解决方案是更改系统上的路径变量并设置 ide java 版本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-22T17:00:14.393

我来这里寻找解决方案。我的问题是 src/test/java 在构建路径中被指定为源依赖项，但该文件夹不存在。在我删除依赖项后，NPE 消失了。

猜猜最好检查任何项目中是否缺少构建路径条目并解决它们以消除此错误。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-22T05:53:54.073

当我在以下位置有多个相同版本的 JRE 定义时，我遇到了类似的问题：

项目 -> 首选项 -> Java -> 已安装的 JRE

删除不需要的为我解决了这个问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-15T03:18:26.163

**潜在修复：**

以下文件/目录可能已损坏或与您当前的工作区设置不相关（导入具有不同配置的其他人的项目）：

*   `.classpath`
*   `.project`
*   `.settings/`

**解决方案：**

1.  关闭项目
2.  关闭日食
3.  将上述文件/目录移到项目目录之外（不要删除它们以防万一这不是问题）
4.  打开日食
5.  打开项目

这至少应该生成`.project`and`.class`文件，并且在编译时您应该不再收到错误。我希望这能解决您的问题！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-31T21:39:53.257

我的 .02c 和 @madhuka-dilhan 链接有助于激发灵感，每次我保存任何东西时都会发生这种情况。两个项目导致它非常烦人，我已经使用它大约两个月了 O_o
我收到以下与一两个坏的杰克逊 jar 文件有关的错误（但它们有效！）所以我只是禁用了两个构建器导致错误。不再有构建错误。请注意，不确定这是否会产生不良影响（还）。有的话会更新！

> 构建过程中发生错误。在项目“MSProvisioningMDBComplexOrderHandlerEJB”上运行构建器“JBoss Knowledge Base Builder”时出错。未知标签！pos=3 池数 = 10
> 
> 在项目“MSProvisioningMDBComplexOrderHandlerEJB”上运行构建器“CDI（上下文和依赖注入）构建器”时出错。未知标签！pos=3 池数 = 10

# php - 单选按钮默认选中，但在提交时未选中

> ID：16142738
> 
> 赞同：0
> 
> 时间：2013-04-22T08:38:30.397
> 
> 标签：php, javascript, html

我有一组单选按钮，如下所示。我打算遇到这样一种情况，即在初始加载页面时，选中的默认单选按钮是塑料的。下面的代码只保留了我选择的单选按钮。

```
<div id="material">
<input type="radio"  name="materials" value="glass" style="vertical-align: middle"
  onchange="this.form.submit()"
  <?php if(isset($_POST['materials'])){ if($_POST['materials'] == 'glass') {echo "checked";}} ?>
  />
<label for="material">Glass</label> <br/>

<input type="radio"  name="materials"  style="vertical-align: middle" value="plastic"
  onchange="this.form.submit()"
  <?php if(isset($_POST['materials'])){ if($_POST['materials'] == 'plastic') {echo "checked";}} ?>
/>
<label for="material" >Plastic (Organic)</label>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:43:50.067

从单选按钮中删除`onchange="this.form.submit()"`，并将其添加到页面标题中的脚本标记之间：

```
<script>
window.onload = function() {
    // when the form is submitted
    document.forms[0].onsubmit = function() {
        // get all radio buttons with name = materials
        var radios = document.getElementsByName('materials');
        // for each radio button
        for(i=0; i<radios.length; i++) {
            // uncheck radio buttons
            radios[i].checked = false;
        }
    };
};
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:43:29.043

尝试将 "checked" 更改为 'checked="checked"'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:45:01.803

尝试下面给出的代码，它具有所需的更改

```
<div id="material">
    <input type="radio"  name="materials" value="glass" style="vertical-align: middle"  onchange="this.form.submit()" <?php if(isset($_POST['materials'])){ if($_POST['materials'] == 'glass') {echo "checked";}} ?>/>
     <label for="material">Glass</label> <br/>

    <input type="radio" checked="checked"   name="materials"  style="vertical-align: middle"  value="plastic"  onchange="this.form.submit()"  <?php if(isset($_POST['materials'])){ if($_POST['materials'] == 'plastic') {echo "checked";}} ?>/>
    <label for="material" >Plastic (Organic)</label>
    </div> 
```

更新

```
<form method="post" >
 <div id="material">
 <?php if(isset($_POST['materials'])) {
    if($_POST['materials'] == 'glass'){
    ?>
<input type="radio" checked="checked" name="materials" value="glass" style="vertical-align: middle"  onchange="this.form.submit()" <?php if(isset($_POST['materials'])){ if($_POST['materials'] == 'glass') {echo "checked";}} ?>/>
 <label for="material">Glass</label> <br/>
 <input type="radio"   name="materials"  style="vertical-align: middle"  value="plastic"  onchange="this.form.submit()"  <?php if(isset($_POST['materials'])){ if($_POST['materials'] == 'plastic') {echo "checked";}} ?>/>
<label for="material" >Plastic (Organic)</label>
 <?php } 
 else { ?>
  <input type="radio"  name="materials" value="glass" style="vertical-align: middle"  onchange="this.form.submit()" <?php if(isset($_POST['materials'])){ if($_POST['materials'] == 'glass') {echo "checked";}} ?>/>
  <label for="material">Glass</label> <br/>
 <input type="radio" checked="checked"  name="materials"  style="vertical-align: middle"  value="plastic"  onchange="this.form.submit()"  <?php if(isset($_POST['materials'])){ if($_POST['materials'] == 'plastic') {echo "checked";}} ?>/>
 <label for="material" >Plastic (Organic)</label>
 <?php } 
 } else { ?>
 <input type="radio"  name="materials" value="glass" style="vertical-align: middle"  onchange="this.form.submit()" <?php if(isset($_POST['materials'])){ if($_POST['materials'] == 'glass') {echo "checked";}} ?>/>
 <label for="material">Glass</label> <br/>
<input type="radio" checked="checked"  name="materials"  style="vertical-align: middle"  value="plastic"  onchange="this.form.submit()"  <?php if(isset($_POST['materials'])){ if($_POST['materials'] == 'plastic') {echo "checked";}} ?>/>
<label for="material" >Plastic (Organic)</label>
<?php } ?>
</div>

<input type="submit" name="submit">
</form> 
```

# javascript - 重构 jQuery/JavaScript 代码以显示/隐藏大量模式窗口

> ID：16142739
> 
> 赞同：0
> 
> 时间：2013-04-22T08:38:31.603
> 
> 标签：javascript, jquery

我目前有很多这样的功能：

```
function show_foo() {
   $('.modal').hide(); // hide all modals
   $('#foo').show(); // show the foo modal
}

function show_bar() {
   $('.modal').hide();
   $('#bar').show();
} 
```

问题是我有大约 10 个这样的功能，而且看起来很笨拙。有没有更优雅的方式来做这种事情？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:41:26.330

```
function hideModalAndShow(id) {
   $('.modal').hide();
   $('#' + id).show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:41:16.030

如果所有功能看起来都一样，你可以做这样的事情

```
function toggleModal(classToHide, idToShow) {
   $('.' + classToHide).hide(); // hide all modals
   $('#' + idToSHow).show(); // show the foo modal
} 
```

并称之为： -

```
toggleModal('modal', 'foo'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:41:24.537

您可以用一行替换这些函数，如下所示：

```
$('.modal').hide().filter('#bar').show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T08:44:34.360

将选择器作为参数传递给函数。

```
function show(selector) {
   $('.modal').hide();
   $(selector).show();
}

show('#bar'); 
```

现在您可以交出选择器字符串或 jquery 对象。不建议将其`#`移入函数中，因为这样可重用性较差且更脆弱，但这取决于您的用例。

```
show('bar');

$('#' + selector).show(); 
```

如果类`.modal`可能会发生变化，您可能需要进一步修改函数并将模态的选择器作为第二个（可选）参数。

```
function show(selector,modal) {
   $(modal?modal:'.modal').hide();
   $(selector).show();
} 
```

这样你*可以*交出模态的选择器，但如果没有交出模态的参数，它将采用默认值。

# python - 读取 CSV 获取行数和 CSV 的前两行

> ID：16142740
> 
> 赞同：1
> 
> 时间：2013-04-22T08:38:47.857
> 
> 标签：python

我假设我收到此错误是因为我两次读取相同的 CSV（我不完全理解为什么这是一个问题），但我需要下面的代码来执行以下两件事......

1）给我一个CSV中所有行的**总数。**

2)**只给我前两行**数据，让我显示给用户。

```
file = upload.filepath
#I READ THE FILE
file_read = csv.reader(file)

#GET THE COUNT I.E. 100 ROWS
row_count = sum(1 for row in file_read)

#ADD TO DATA JUST THE FIRST TWO ROWS THAT I WILL USE TO DISPLAY BACK TO THE USER
data = []
for i in range(2):
    data.append(file_read.next()) 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T10:09:47.950

使用`islice`您可以执行以下操作：

```
from itertools import islice
import csv

with open('somefile') as fin:
    csvin = csv.reader(fin)
    firstn = list(islice(csvin, 2))
    rows = len(firstn) + sum(1 for row in csvin) 
```

这使您不必读取文件然后寻找开始，并且将正确返回行数，并且文件将在之后或发生异常时自动关闭。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T10:02:22.323

为什么不颠倒这两种说法呢？您可以阅读前两行使用您的：

```
#ADD TO DATA JUST THE FIRST TWO ROWS THAT I WILL USE TO DISPLAY BACK TO THE USER
data = []
for i in range(2):
    data.append(file_read.next()) 
```

然后对剩余的行进行行计数，并添加 2：

```
#GET THE COUNT I.E. 100 ROWS
row_count = 2 + sum(1 for row in file_read) 
```

但是，如果您有 <2 行，则会给出不正确的结果。更好的解决方案可能是简单地读入整个文件，然后计算结果列表中的行数。

```
import csv

# Open the file upload.filepath, get a pointer in file
# file automatically closed at end of 'with' context
with open(upload.filepath, 'r') as file:

    #I READ THE FILE
    file_read = csv.reader(file)

    data = []
    for row in file_read:
        data.append(row)

    rows = len(data)
    first_two_rows = data[:2] 
```

如果它是一个庞大的文件，并且您担心内存，您可以添加一个计数变量，并且仅在其 <=2 时附加到数据

```
data = []
rows = 0
for row in file_read:
    rows += 1
    if rows<3:
        data.append(row) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:00:37.283

您应该执行以下操作：

```
f = open('test.csv')

reader = csv.reader(f)
row_count = sum(1 for each in reader)

f.seek(0)  #reposition

data = []
for i in range(2):
    data.append(reader.next())

f.close() 
```

# ios - 用 UIBezierPath 异步剪辑 UIImage

> ID：16142743
> 
> 赞同：3
> 
> 时间：2013-04-22T08:39:04.847
> 
> 标签：ios, asynchronous, uiimage, uibezierpath, uigraphicscontext

我想在不使用 QuartzCore 的情况下向 UIImageView 添加圆角以避免 UIScrollView 中的性能问题，所以我这样解决了它：

```
 UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:rect byRoundingCorners:UIRectCornerTopLeft|UIRectCornerTopRight cornerRadii:CGSizeMake(self.cornerRadius, self.cornerRadius)];
    [path addClip];

    UIGraphicsBeginImageContextWithOptions(rect.size, NO, [[UIScreen mainScreen] scale]);

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetBlendMode(UIGraphicsGetCurrentContext( ),kCGBlendModeClear); CGContextSetStrokeColorWithColor(context, [UIColor clearColor].CGColor);
    CGContextAddPath(context,path.CGPath);
    CGContextClip(context);
    CGContextClearRect(context,CGRectMake(0,0,width,height));

    [_image drawInRect:rect];

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

可悲的是，在 drawRect 中调用，这需要一点处理时间，这会在 UIScrollView 中滚动时产生延迟。因此，我尝试在 dispatch_async 的帮助下在单独的线程中处理它。这消除了滞后，一切都按原样顺利进行。但现在我有另一个问题。我在调试器中收到许多无效的上下文消息，因为当线程异步启动图像处理时，GraphicsContext 并不总是存在。有没有办法处理我的图像中的圆角而不会收到无效的上下文消息？请注意，我不想使用 QuarzCore 的cornerRadius 或遮罩功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-12T20:12:48.417

你做的工作比你需要的多。“无效上下文”消息是由在调用`[path addClip]`之前调用引起的`UIGraphicsBeginImageContextWithOptions()`。`UIBezierPath`尝试访问线程的当前图形上下文，但您还没有设置一个。

这是获得相同结果的更简单方法。请注意，您根本不需要使用`CGContext`。

```
UIGraphicsBeginImageContextWithOptions(rect.size, NO, 0.0);

UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:rect byRoundingCorners:UIRectCornerTopLeft|UIRectCornerTopRight cornerRadii:CGSizeMake(self.cornerRadius, self.cornerRadius)];
[path addClip];

[_image drawInRect:rect];

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T20:34:33.147

> 我想在不使用 QuartzCore 的情况下向 UIImageView 添加圆角以避免性能问题

一种方法是圆角*图像*而不是 UIImageView 的角。在这里查看我的答案：

[https://stackoverflow.com/a/8125604/341994](https://stackoverflow.com/a/8125604/341994)

我们从任何 UIImage 开始，并通过绘制到裁剪的上下文中来圆其角。这不需要“处理时间”并且不会导致性能问题。

（**注意：**在表格视图或其他非常快速的滚动或动画情况下，圆角处的透明度可能会导致性能问题。但这是一个更普遍的问题，与如何完成舍入无关；这与我们必须不断地将移动的形状合成到背景上有关。如果背景是纯色并且您事先知道它将是什么，那么制作圆角区域的*不透明*图像会更有效有背景的颜色。）

# c# - Kendo UI MultiSelect 将绑定的值发布到控制器

> ID：16142746
> 
> 赞同：1
> 
> 时间：2013-04-22T08:39:20.543
> 
> 标签：c#, telerik, kendo-ui, kendo-asp.net-mvc

我有多选小部件

```
@(Html.Kendo().MultiSelect()
      .Name("SupportedLanguages")
      .Filter(FilterType.Contains)
      .Placeholder("Select supported languages...")
      .BindTo((System.Collections.IEnumerable)ViewData["supportedLanguages"])) 
```

`supportedLanguages`只是字符串数组

```
return new[] { "pl", "en", "sv" }; 
```

MultiSelect 正确绑定值，我可以从列表中选择语言，但是当我将这些值发布回控制器时，我得到了这样的发布参数

```
SupportedLanguages[]=pl&SupportedLanguages[]=sv&SupportedLanguages[]=en 
```

所以 MVC binder 无法将这些值正确绑定到我的 ViewModel。

ViewModel 只是一个具有一个属性的简单类

```
public List<string> SupportedLanguages { get; set; } 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T07:05:33.997

我不知道这种实施的原因，但这里是解决问题的方法。带有 Ajax 绑定的多选内部网格示例：

```
//Model
public class Model
{
    public Guid Id { get; set; }

    [Required]
    public string Name { get; set; }

    /*MultiSelect for this property*/
    public IEnumerable<ChildModel> Children { get; set; }        
}

//View
@Html.Kendo().Grid<Model>()
  .Name("Grid")
  ...
  .DataSource(cfg => cfg
        .Ajax()
        .PageSize(20)
        .Model(c => c.Id(e => e.Id))
        .Update(c => c.Action("GridUpdate", "MyController").Data("getUpdateData"))
)

//JS
var getUpdateData = function(data) {
    MultiSelectHelpers.serialize(data);
};

var MultiSelectHelpers = {
    serialize: function (data) {
        for (var property in data) {
            if ($.isArray(data[property])) {
                this.serializeArray(property, data[property], data);
            }
        }
    },
    serializeArray: function (prefix, array, result) {
        for (var i = 0; i < array.length; i++) {
            if ($.isPlainObject(array[i])) {
                for (var property in array[i]) {
                    result[prefix + "[" + i + "]." + property] = array[i][property];
                }
            }
            else {
                result[prefix + "[" + i + "]"] = array[i];
            }
        }
    }
} 
```

# objective-c - 如何更改 NSToolBarItem 打印上的图标

> ID：16142747
> 
> 赞同：1
> 
> 时间：2013-04-22T08:39:20.793
> 
> 标签：objective-c, macos

有没有办法改变 NSToolBarItem 打印上的图标？可以通过 InterfaceBuilder 使用此设置器，但如果我更改它 - 它仅在 Interface Builder 中更改，而不在工作项目中更改。我试图从代码中更改它 - 但结果相同。两种情况我都有默认的打印图标。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:01:07.890

如果这无法更改，**您可以创建自己的工具栏项目**，作为打印工作。

为工具栏按钮设置新图像，并给出标签和调色板标签，我使用了我的打印。 ![在此处输入图像描述](https://i.stack.imgur.com/6E15v.png)

现在您需要将打印菜单和工具栏项挂钩到一个方法，我有一个`print`在 AppDelegate 中调用的方法。

![在此处输入图像描述](https://i.stack.imgur.com/7QvNq.png)

# php - 如何在 WooCommerce 中列出每个可下载产品的每个文件名？

> ID：16142748
> 
> 赞同：5
> 
> 时间：2013-04-22T08:39:20.927
> 
> 标签：php, wordpress, woocommerce, woothemes

我正在使用 WooCommerce 插件。在可下载的产品中，如何显示文件名而不是产品名称？现在可下载产品在“我的帐户”页面中如下所示：

```
title-->file1
title-->file2\. 
```

现在我需要将该文件列表显示到文件名中。例如：在“订单”页面中应该是这样的：

```
title-->Installer.zip(filename)
title-->Runner.zip(filename) 
```

如何在可下载产品列表中列出每个文件名？

我正在使用 WooCommerce 2.0.4

```
<?php
/**
 * My Account
 */

global $woocommerce;
?>

<?php $woocommerce->show_messages(); ?>

<p><?php printf( __('Hello, <strong>%s</strong>. From your account dashboard you can view your recent orders, manage your shipping and billing addresses and <a href="%s">change your password</a>.', 'kinetico'), $current_user->display_name, get_permalink(woocommerce_get_page_id('change_password'))); ?></p>

<?php do_action('woocommerce_before_my_account'); ?>

<?php if ($downloads = $woocommerce->customer->get_downloadable_products()) : ?>
<h2><?php _e('Available downloads', 'kinetico'); ?></h2>
<ul class="digital-downloads">

    <?php foreach ($downloads as $download) : ?>

        <li><?php if (is_numeric($download['downloads_remaining'])) : ?><span class="count"><?php echo $download['downloads_remaining'] . _n(' download Remaining', ' downloads remaining', $download['downloads_remaining'], 'kinetico'); ?></span><?php endif; ?> <a href="<?php echo esc_url( $download['download_url'] ); ?>"><?php echo $download['download_name']; ?></a></li>
     <?php echo    $download['download_name']; ?>
    <?php endforeach; ?>

</ul>
<?php endif; ?> 
<?php add_filter( 'woocommerce_available_download_link', 'filter_wc_downloads_so_16142748', 10, 2 );

function filter_wc_downloads_so_16142748( $link, $download )
{
    // Create a WC_Order object and get the file URLs for this product
    $order = new WC_Order( $download['order_id'] );
    $download_file_urls = $order->get_downloadable_file_urls( 
        $download['product_id'], 
        null, 
        $download['download_id'] 
    );

    // Check each download URL and compare with the current URL 
    // $key contains the real file URL and $value is the encoded URL
    foreach( $download_file_urls as $key => $value )
    {
        if( $value == $download['download_url'] )
        {
            $url_parts = explode( '/', parse_url( $key, PHP_URL_PATH ) );
            $file_name = end( $url_parts );
            $link = '<a href="' 
                . esc_url( $download['download_url'] ) 
                . '">' 
                . $download['download_name'] 
                . '</a> <small>( ' 
                . $file_name 
                . ' )</small>';
        }               
    }
    return $link;
}?>
<h2><?php _e('Recent Orders', 'kinetico'); ?></h2>
<?php woocommerce_get_template('myaccount/my-orders.php', array( 'recent_orders' => $recent_orders )); ?>

<h2><?php _e('My Address', 'kinetico'); ?></h2> 
<p><?php _e('The following addresses will be used on the checkout page by default.', 'kinetico'); ?></p>
<?php woocommerce_get_template('myaccount/my-address.php'); ?>

<?php
do_action('woocommerce_after_my_account');
add_filter( 'woocommerce_available_download_link', 'filter_wc_downloads_so_16142748', 10, 2 ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T02:25:50.683

中有一个有用的过滤器[**`templates/myaccount/my-downloads.php`**](http://plugins.svn.wordpress.org/woocommerce/tags/2.0.9/templates/myaccount/my-downloads.php)。

它需要一些扭曲，但可以获得文件名。检查评论：

```
<?php
/**
 * Plugin Name: Add Filenames to WooCommerce Digital Downloads
 * Plugin URI:  http://stackoverflow.com/questions/16142748/
 * Author:      brasofilo
 * Author URI:  http://wordpress.stackexchange.com/users/12615/brasofilo
 */

add_filter( 'woocommerce_available_download_link', 'filter_wc_downloads_so_16142748', 10, 2 );

function filter_wc_downloads_so_16142748( $link, $download )
{
    // Create a WC_Order object and get the file URLs for this product
    $order = new WC_Order( $download['order_id'] );
    $download_file_urls = $order->get_downloadable_file_urls( 
        $download['product_id'], 
        null, 
        $download['download_id'] 
    );

    // Check each download URL and compare with the current URL 
    // $key contains the real file URL and $value is the encoded URL
    foreach( $download_file_urls as $key => $value )
    {
        if( $value == $download['download_url'] )
        {
            $url_parts = explode( '/', parse_url( $key, PHP_URL_PATH ) );
            $file_name = end( $url_parts );
            $link = '<a href="' 
                . esc_url( $download['download_url'] ) 
                . '">' 
                . $download['download_name'] 
                . '</a> <small>( ' 
                . $file_name 
                . ' )</small>';
        }               
    }
    return $link;
} 
```

结果是：

![woocommerce 下载文件名](https://i.stack.imgur.com/ABgi3.png)

* * *

`$download`var 包含以下内容：

```
array ( 
    'download_url' => 'http://example.com/?download_file=657&order=order_5192e53&email=user@email.com&key=49d12', 
    'download_id' => '49d1232377ed1752d5622b63786d089b', 
    'product_id' => '657', 
    'download_name' => 'Product title — File 1', 
    'order_id' => 659, 
    'order_key' => 'order_5192e536baf27', 
    'downloads_remaining' => '', 
) 
```

这似乎是一个不错的功能，我可能会将其添加到我正在工作的站点中。

# c# - itextsharp 多页 pdf 表单

> ID：16142750
> 
> 赞同：1
> 
> 时间：2013-04-22T08:39:27.837
> 
> 标签：c#, itextsharp

我有一个 pdf 模板，我想为数据库中的每条记录生成。我找到了这个，但它只适用于物理文件。如何使这项工作仅在内存中起作用？我尝试使用 memorystream，但我无法使用 PdfReader 阅读此内容

```
 using iTextSharp.text.pdf;
using System;
using System.IO;

public partial class Default2 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        string uniqueidstr = Guid.NewGuid().ToString();

        string file = Server.MapPath("~/Reports/PrimaVisita.pdf");

        string MasterPdfFile = Server.MapPath("./MstrCopyFile" + uniqueidstr + ".pdf").ToString();

        PdfCopyFields copy = new PdfCopyFields(new FileStream(MasterPdfFile, FileMode.CreateNew));

        for (int i = 0; i < 10; i++)
        {
            PdfReader tmpReader = new PdfReader(file);
            string tmpfilepath = Server.MapPath("./tmpFile" + uniqueidstr + i.ToString() + ".pdf").ToString();

            FileStream tmpOutFileStream = new FileStream(tmpfilepath, FileMode.CreateNew);
            PdfStamper tmpOutStamper = new PdfStamper(tmpReader, tmpOutFileStream);
            AcroFields fields = tmpOutStamper.AcroFields;
            fields.SetField("Cognome", "pippo" + i.ToString());
            fields.SetField("Nome", "pluto" + i.ToString());
            fields.SetField("DatiNascita", "paperino" + i.ToString());
            fields.SetField("Residenza", "topolino" + i.ToString());

            tmpOutStamper.Writer.CloseStream = false;
            tmpOutStamper.FormFlattening = true;
            tmpOutStamper.Close();
            tmpOutFileStream.Close();

            PdfReader nwPgReader = new PdfReader(tmpfilepath);

            copy.AddDocument(nwPgReader);
        }

        copy.Close();
    }
} 
```

错误是“找不到 PDF 标头签名”。这是代码

```
protected void Button1_Click(object sender, EventArgs e)
    {
        string uniqueidstr = Guid.NewGuid().ToString();

        string file = Server.MapPath("~/Reports/PrimaVisita.pdf");

        MemoryStream masterStream = new MemoryStream();
        //string MasterPdfFile = Server.MapPath("./MstrCopyFile" + uniqueidstr + ".pdf").ToString();

        PdfCopyFields copy = new PdfCopyFields(masterStream);

        for (int i = 0; i < 10; i++)
        {
            PdfReader tmpReader = new PdfReader(file);
            string tmpfilepath = Server.MapPath("./tmpFile" + uniqueidstr + i.ToString() + ".pdf").ToString();
            MemoryStream tmpStream = new MemoryStream();

            //FileStream tmpOutFileStream = new FileStream(tmpfilepath, FileMode.CreateNew);
            PdfStamper tmpOutStamper = new PdfStamper(tmpReader, tmpStream);
            AcroFields fields = tmpOutStamper.AcroFields;
            fields.SetField("Cognome", "pippo" + i.ToString());
            fields.SetField("Nome", "pluto" + i.ToString());
            fields.SetField("DatiNascita", "paperino" + i.ToString());
            fields.SetField("Residenza", "topolino" + i.ToString());

            tmpOutStamper.Writer.CloseStream = false;
            tmpOutStamper.FormFlattening = true;
            tmpOutStamper.Close();
            //tmpOutFileStream.Close();

            PdfReader nwPgReader = new PdfReader(tmpStream);

            copy.AddDocument(nwPgReader);
        }

        copy.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:23:36.877

我通过将内存流转换为字节数组来解决，现在它可以工作了。

坦克为您的支持

布鲁诺

```
protected void Button1_Click(object sender, EventArgs e)
    {
        string uniqueidstr = Guid.NewGuid().ToString();

        string file = Server.MapPath("~/Reports/PrimaVisita.pdf");

        MemoryStream masterStream = new MemoryStream();

        PdfCopyFields copy = new PdfCopyFields(masterStream);

        for (int i = 0; i < 10; i++)
        {
            PdfReader tmpReader = new PdfReader(file);
            MemoryStream tmpStream = new MemoryStream();
            tmpStream.Position = 0;

            PdfStamper tmpOutStamper = new PdfStamper(tmpReader, tmpStream);
            AcroFields fields = tmpOutStamper.AcroFields;
            fields.SetField("Cognome", "pippo" + i.ToString());
            fields.SetField("Nome", "pluto" + i.ToString());
            fields.SetField("DatiNascita", "paperino" + i.ToString());
            fields.SetField("Residenza", "topolino" + i.ToString());

            tmpOutStamper.Writer.CloseStream = false;
            tmpOutStamper.FormFlattening = true;
            tmpOutStamper.Close();
            byte[] buf = tmpStream.ToArray();

            PdfReader nwPgReader = new PdfReader(buf);

            copy.AddDocument(nwPgReader);
        }

        copy.Close();

} 
```

# internet-explorer - 带有 IE 和 Chrome 的 Java 版本

> ID：16142751
> 
> 赞同：0
> 
> 时间：2013-04-22T08:39:27.863
> 
> 标签：internet-explorer, google-chrome, java

我有以下问题：我安装了两个操作系统（XP 和 W7 32 位），因为我必须安装应用程序，一个适用于 jre-6u23，另一个适用于 jre-7u7，在这两个操作系统上我安装了两个版本的 Java（`jre-6u23`和`jre-7u7`）

我想做的是：

*   强制 IE 使用`jre-6u2`
*   强制 Chrome 使用`jre-7u7`

以下是我尝试过的：

*   更改 UseJava2IExplorer 的值`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\JavaSoft\Java Plug-in`

*   通过**控制面板设置默认 java 版本**

提前谢谢埃米利亚诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T15:47:40.027

在我找到的解决方案下方：

1）我已经安装了**chromeinstall-7u21.exe**

2）将**jre7**文件夹复制到**C** **：**

3)**卸载**jre-7u21

4) 修改**MozillaPlugins\@java.com/JavaPlugin**注册表项，以使 Chrome 使用**C 中的文件夹存储：（**请参阅[如何配置 Chrome 的 Java 插件，使其使用机器中现有的 JDK](https://stackoverflow.com/questions/5962048/how-to-configure-chromes-java-plugin-so-it-uses-an-existing-jdk-in-the-machine)）

无论如何谢谢你的帮助;D

# python - Python：如何在 Python 中通过邮件发送 Html？

> ID：16142754
> 
> 赞同：1
> 
> 时间：2013-04-22T08:39:34.027
> 
> 标签：python, smtp

```
#! /usr/bin/python

import smtplib

from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText

# me == my email address
# you == recipient's email address
me = "my@email.com"
you = "xyz@gmail.com"

# Create message container - the correct MIME type is multipart/alternative.
msg = MIMEMultipart('alternative')
msg['Subject'] = "Link"
msg['From'] = me
msg['To'] = you

# Create the body of the message (a plain-text and an HTML version).
text = "Hi!\nHow are you?\nHere is the link you wanted:\nhttp://www.python.org"
html = """\
<html>
  <head></head>
  <body>
     <a href="http://google.com/">Launch Now</a>
     <br/>
     <br/>
         - Google
         <br/>
         <br/>
         <a href="http://google.com/">Contact</a> Support
 </body>
</html>
"""

# Record the MIME types of both parts - text/plain and text/html.
part1 = MIMEText(text, 'plain')
part2 = MIMEText(html, 'html')

# Attach parts into message container.
# According to RFC 2046, the last part of a multipart message, in this case
# the HTML message, is best and preferred.
msg.attach(part1)
msg.attach(part2)

# Send the message via local SMTP server.
s = smtplib.SMTP('localhost')
# sendmail function takes 3 arguments: sender's address, recipient's address
# and message to send - here it is sent as one string.
s.sendmail(me, you, msg.as_string())
s.quit() 
```

我只收到邮件中的 HTML，而不是我在此处使用此代码的文本[使用 Python 发送 HTML 电子邮件](https://stackoverflow.com/questions/882712/sending-html-email-in-python)

# python - 如何在 Django 模板中匹配字典中的值

> ID：16142762
> 
> 赞同：0
> 
> 时间：2013-04-22T08:40:07.873
> 
> 标签：python, django

我有这样的字典

```
mydict['student'] = {'name':'john', 'age':'36'} 
```

在我的模板中，我有这样的学生名单

```
{{ object.students}} 
```

我正在像这样在表格中显示学生列表

```
<table>
{% for student in object.students %}
<tr><td>{{student.name}}</td>
{% endfor%} 
```

我有复杂的场景，我必须匹配学生姓名和年龄或任何键`mydict`，如果匹配，则显示学生行，否则不

像这样

```
if mydict.student.name == student.name &&  mydict.student.age == student.age 
```

然后显示该行

问题是我可以在 dictoanry 中拥有可变数量的键，所以基本上我正在寻找类似的东西，`filter`或者`whatever`我将`dictionary`and 对象传递给它，它返回给我真或假。就像是

```
if getResult(mydict['student'], student)

def getResut(a,b):
    result_list =[]
    for key in a:
       if b[key] icontains a[key]:
           result_list.append(True)
       else
           return False or result_list.append(False) 
```

它会将 true 或 Flase 的列表作为 list 返回给我。然后我会检查是否所有都是真的然后它会返回真否则它会返回假

我必须在任何一个`template`或`filters`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:12:34.400

# maven - Nexus 和 Maven：访问 Maven 中央仓库？

> ID：16142763
> 
> 赞同：0
> 
> 时间：2013-04-22T08:40:10.483
> 
> 标签：maven, continuous-integration, nexus

我在使用 Nexus 和 Maven 时遇到了一些麻烦。当我尝试使用 Nexus 使用 Maven 构建项目时，Maven 无法找到任何工件。我将此添加到 Maven 设置中：

```
 <mirror>
       <id>nexus</id>
       <url>http://localhost:6060/nexus/content/groups/public</url>
       <mirrorOf>central</mirrorOf>
     </mirror> 
```

将 Maven 与 Nexus 连接起来。Maven 中央存储库也在 Nexus 设置中定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:46:24.840

你可以这样尝试：

```
<mirror>
    <id>nexus-local</id>
    <url>http://localhost:6060/nexus/content/groups/public/</url>
    <mirrorOf>external:*</mirrorOf>
</mirror> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:06:47.320

根据[Nexus](http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html)的文档，您应该配置 settings.xml 文件，如下所示：

最重要的是*mirrorOf*只包含一个星号来将所有请求重定向到配置的 Nexus 实例。

```
<settings>
  <mirrors>
    <mirror>
      <!--This sends everything else to /public -->
      <id>nexus</id>
      <mirrorOf>*</mirrorOf>
      <url>http://localhost:8081/nexus/content/groups/public</url>
    </mirror>
  </mirrors>
  <profiles>
    <profile>
      <id>nexus</id>
      <!--Enable snapshots for the built in central repo to direct -->
      <!--all requests to nexus via the mirror -->
      <repositories>
        <repository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </repository>
      </repositories>
     <pluginRepositories>
        <pluginRepository>
          <id>central</id>
          <url>http://central</url>
          <releases><enabled>true</enabled></releases>
          <snapshots><enabled>true</enabled></snapshots>
        </pluginRepository>
      </pluginRepositories>
    </profile>
  </profiles>
  <activeProfiles>
    <!--make the profile active all the time -->
    <activeProfile>nexus</activeProfile>
  </activeProfiles>
</settings> 
```

# python-3.x - Enthought Canopy 中的 Python 3

> ID：16142764
> 
> 赞同：11
> 
> 时间：2013-04-22T08:40:13.503
> 
> 标签：python-3.x, enthought, canopy

如何在 Canopy Enthought 中使用 Python 3？它在底部有选择 Python 3 的选项，但是当我们使用时这不会改变任何东西：

```
print(sys.version)
2.7.3 | 32-bit | (default, Mar 25 2013, 15:38:39) [MSC v.1500 32 bit (Intel)] 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-18T21:13:30.180

An Enthought engineer answered that at present **it is not possible to use Python 3 in or with Canopy**. They are considering several ways to support it but none of them will arrive in the short term.

**Edit**: [Enthought just announced Python 3 support for Canopy 2.0](http://blog.enthought.com/canopy/new-year-new-enthought-python-products/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-22T13:54:48.817

正如您在[https://www.enthought.com/products/canopy/package-index/上看到的，Canopy 使用的](https://www.enthought.com/products/canopy/package-index/) *大多数（或某些）*软件包仅兼容**python-2.x**，因此在这种情况下，如果您尝试使用Canopy 中的过时模块导致 Canopy 不稳定，**因此最终无法在 python 3.x 环境中工作**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-13T10:32:20.680

Canopy 现在不仅支持 Python 3，还支持在多个 Python 2.7 和 3.x 环境之间切换。

来自知识库文章：“在 Canopy 2.1 中，联网用户（以及 Enthought 部署服务器的所有用户）可以创建、管理和在多个 Python 2.7 和 3.5 环境之间切换，不同的环境包含不同的包集。当你切换到 Canopy 2.1 中的特定 Python 环境，它在整个 Canopy 中使用——在包管理器、编辑器、Python 面板、调试器、数据导入工具、Jupyter Notebook 和 Canopy 命令提示符/终端中。”

[https://support.enthought.com/hc/en-us/articles/115002376586-Canopy-2-1-Managing-and-switching-between-Python-2-7-and-3-5-environments](https://support.enthought.com/hc/en-us/articles/115002376586-Canopy-2-1-Managing-and-switching-between-Python-2-7-and-3-5-environments)

# c# - 在 bucle 中设置/获取类属性不起作用

> ID：16142765
> 
> 赞同：0
> 
> 时间：2013-04-22T08:40:13.390
> 
> 标签：c#

我正在尝试创建一个包含 1000 行由空格分隔的随机数的文件。这只是为了模拟乐透机的号码。我创建了一个类，它将处理 6 个 int 数组中的六个数字的组合。

```
class cTicket
    {
        //Propiedades
        private volatile int[] p_nums;

    //Constructor
    public cTicket()
    {

    }

    //Metodos

    public void setTicket(int[] o_nums)
    {
        p_nums = o_nums;
    }

    public int[] getTicket()
    {
        return p_nums;
    }

} 
```

就像我说的那样，我需要创建一个 1000 行的组合，其中包含一个随机选择的 6 个数字的数组。所以在代码的某个时刻，我得到了这样的东西：

```
 private void button2_Click(object sender, EventArgs e)
    {

        for (int i = 0; i < 1000; i++) // Bucle de 1,000 combinaciones
        {
            objTicket.setTicket(objGenerador.generaNumero());
            //MessageBox.Show(integerArrayString(objTicket.getTicket()));
            write.WriteLine(i + integerArrayString(objTicket.getTicket()));
        }
        write.Close(); // Cierra operacion de escritura del archivo

    } 
```

但这部分根本不起作用。它一遍又一遍地重复相同的6个数字组合。整个过程只改变三倍，我注意到的另一件事是，如果我将输出放在消息框中，它会完美运行。但不是当我尝试将其写入文件时。

我希望有人可以帮助解决我的问题。

谢谢。

嗨，再次感谢，在阅读下面的帖子并获得更多文档后，我找到了问题的根源，这就是我生成随机数的方式，正如你们所说。

公共 int[] generaNumero() {

```
 Random obj = new Random(); 
        int v_idx;
        for (int x = 0; x < 6; x++)
        {
            v_idx = x;
            v_array[x] = obj.Next(1, 38);

            while (v_idx >= 0)
            {
                if (v_array[x] == v_array[v_idx])
                {
                    v_array[x] = obj.Next(1, 38);
                    v_idx = x;
                }
                v_idx--;
            }
        }

        return v_array; 
```

我只是简单地删除了这条线，如果我做了实例“Random obj = new Random();” 从这种方法及其现在的工作完美。

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:44:03.170

您的随机生成函数很可能不会生成真正的随机数。

我想象你每次调用都会创建一个新的随机数（它与种子同时使用），所以你总是得到相同的“随机”数字集合

发布您的 objGenerador.generaNumero() 方法

如何使用 Random 类：[MSDN](http://msdn.microsoft.com/de-de/library/vstudio/system.random.aspx)

检查他们展示的示例，您可以看到两个随机创建的同时产生相同的输出。

```
private static Random _Random = new Random();
public int[] generaNumero() 
{
 int v_idx; 
 for (int x = 0; x < 6; x++) 
 { 
  v_idx = x; 
  v_array[x] = _Random.Next(1, 38); 
  while (v_idx >= 0) 
  { 
   if (v_array[x] == v_array[v_idx]) 
   { 
    v_array[x] = _Random.Next(1, 38); 
    v_idx = x; 
   } 
   v_idx--; 
  } 
 } 
 return v_array; 
} 
```

# android - 在 asynchorinos 任务中使用 .net ksoap webservice 并转到其他屏幕

> ID：16142770
> 
> 赞同：2
> 
> 时间：2013-04-22T08:40:50.597
> 
> 标签：android, web-services, android-asynctask

我是android的新手。我正在尝试通过异步任务中的ksoap使用.net webservise。但是应用程序崩溃了。我不知道问题出在哪里。这是我的代码......请帮助我......

```
public class LoginActivity extends Activity {

    private String METHOD_NAME = "AuthenticateUser"; // our webservice method name
    private String NAMESPACE = "http://tempuri.org/";

    private String SOAP_ACTION = "http://tempuri.org/AuthenticateUser";
//  private String SOAP_ACTION = "http://LocationBasedTaxiServices/UserWebServices.asmx/RegisterUser"; // NAMESPACE + method name
    private static final String URL = "http://192.168.0.45/LocationBasedTaxiServices/UserWebServices.asmx?WSDL"; // you

    //////////////////////getting email amd password from R file////////////////

    private EditText login_email;
    private EditText login_password;    
    private String result;
    private Button loginbtn;
    private TextView registerTextView;
    String user_id;
    String password;
    String authentication;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        loginbtn=(Button)findViewById(R.id.btnLogin);
        login_email=(EditText)findViewById(R.id.l_e);
        login_password=(EditText)findViewById(R.id.l_p);
        loginbtn.setOnClickListener(new View.OnClickListener() {
//       SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

            public void onClick(View v) {
                user_id=login_email.getText().toString();
                password=login_password.getText().toString();
                new asynLogin().execute();
}
            });

              registerTextView =(TextView)findViewById(R.id.link_to_register);
               registerTextView.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    // Switching to Register screen
                    Intent i = new Intent(getApplicationContext(), Register.class);
                    startActivity(i);
                }
            });
}

    private class asynLogin extends AsyncTask<Void, Void, Void> {

        private final ProgressDialog dialog = new ProgressDialog(LoginActivity.this);

        protected void onPreExecute() {
                this.dialog.setMessage("Logging in...");
                this.dialog.show();
        }

        protected Void doInBackground(final Void... unused) {
//          authentication = doLogin(user_id, password);
            authentication = doLogin(user_id,password);
              return null; // don't interact with the ui!
        }

        protected void onPostExecute(Void result) {
            if (this.dialog.isShowing()) {
                this.dialog.dismiss();

            }

            if (authentication.equals(true)) {
            Intent i=new Intent(getApplicationContext(), MainActivity.class);
        startActivity(i);
            finish();
       } else {
            Toast.makeText(getApplicationContext(), "User Name Does Not exist", Toast.LENGTH_LONG).show();
       }
}

         private String doLogin(String user_id, String password) {

        SoapPrimitive resultstring = null;
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("email", user_id);
        request.addProperty("password", password);
        SoapSerializationEnvelope soapenvelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        soapenvelope.dotNet = true;                                                      
        soapenvelope.setOutputSoapObject(request);

        HttpTransportSE httptransport = new HttpTransportSE(URL);
        httptransport.debug = true;

        try {
                httptransport.call(SOAP_ACTION, soapenvelope);
                resultstring = (SoapPrimitive) soapenvelope.getResponse();
                result=resultstring.toString();
                login_email.setText(result);
                Log.i("myLogin", resultstring.toString());
                System.out.println(resultstring);
       } catch (SocketException ex) {
            login_email.setText(ex.getMessage());

            Log.e("Error : " , "Error on soapPrimitiveData() " + ex.getMessage());
            ex.printStackTrace();
        } catch (Exception e) {
            Log.e("Error : " , "Error on soapPrimitiveData() " + e.getMessage());
           e.printStackTrace();
        }
//      return resultstring+"";
        return result;

        }
         }
        } 
```

请帮助我。提前致谢。面对从一个活动到另一个活动的问题，而 web 服务的响应与我想要的完全一样......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T12:12:46.927

您需要`finish()`从`doInBackground()`to移动`onPOstExecute()`并替换它，`IF Condition`否则您的代码工作正常..

```
if (authentication.equalsIgnoreCase("true")) { 
    Intent i = new Intent(LoginActivity.this, MainActivity.class); 
    startActivity(i); 
    finish(); 
} else if (authentication.equalsIgnoreCase("false")) { 
    Toast.makeText(LoginActivity.this, "User Name Does Not exist", Toast.LENGTH_LONG).show(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:46:11.430

您正在调用 onPostExecute，它需要在 UI 线程中。因为您留下了无效的旧活动。

我想建议： - 转到新活动 - 显示加载对话框 - 当异步任务完成时：关闭对话框。

更新：如果您想继续进行该活动，我会稍微更改一下代码：

```
 if (authentication.equals(true)) {
      myActivity.onAuthentificationSuccess(true);
      //Intent i=new Intent(getApplicationContext(), MainActivity.class);
    //startActivity(i);
    //finish();
   } else {
        //Toast.makeText(getApplicationContext(), "User Name Does Not exist", Toast.LENGTH_LONG).show();       
      myActivity.onAuthentificationSuccess(false);
   } 
```

确保您的活动将通过以下方式实现您的界面：

```
void myActivity.onAuthentificationSuccess(boolean authenticated); 
```

方法。在该方法中，您可以调用芬兰语或您需要的任何内容哦，并且作为异步任务构造函数中的活动/接口的实例。

```
private MyInterfaceWithOnAuthentificationMethod callbackObject;
public asynLogin(MyInterfaceWithOnAuthentificationMethod obj){
callbackObject = obj;
} 
```

-重构你的类并给出一个大写的名称，并且接口更短，哈哈

# c - C18 伪变量

> ID：16142772
> 
> 赞同：3
> 
> 时间：2013-04-22T08:40:58.440
> 
> 标签：c, pic, c18

我正在寻找一种使用 C18 编译器在 C 中制作类似 Jalv2 的伪变量的方法。伪变量是类似于变量但实际上是函数的东西。

在 Jalv2 中，可以像这样制作一个伪变量：

```
function the_var'get() return byte is
    -- some code
end function

procedure the_var'set(byte in value) is
    -- some code
end procedure 
```

现在可以读取和写入`the_var`，而实际上执行了这些功能：

```
the_var = 0x40         -- actually executes the_var'set(0x40)
doSomething(the_var)   -- actually executes doSomething(the_var'get) 
```

C有类似的东西吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:46:51.333

不，C 不可能。预处理器甚至不可能。运算符在 C中`=`总是做完全相同的事情，并且没有办法自定义它。

如果你想做这样的事情，你将不得不选择一种不同的语言。例如，像 C++ 一样，它允许您覆盖`operator =`（对于 setter）和`operator int`（对于 getter）。

# android - 如何在适配器类中调用 getIntent()

> ID：16142773
> 
> 赞同：3
> 
> 时间：2013-04-22T08:40:59.513
> 
> 标签：android, listview, android-intent

在 getView() 方法中，我想调用 getIntent()。在不开始新活动的情况下如何实现这一目标。getView 方法是这样的

```
public View getView(final int position, View convertView, ViewGroup parent) {
    PaymentData rowItem = getItem(position);
    LayoutInflater mInflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    if (convertView == null) {
        convertView = mInflater.inflate(
                com.android.paypal.homeactivity.R.layout.list_item, null);
        holder = new ViewHolder();
        holder.radioBtn = (RadioButton) convertView
                .findViewById(com.android.paypal.homeactivity.R.id.rdb_payment_method);
        convertView.setTag(holder);
    } else
        holder = (ViewHolder) convertView.getTag();

    if (position == getCount() - 1 && userSelected == false) {
        holder.radioBtn.setChecked(true);
        mCurrentlyCheckedRB = holder.radioBtn;
    } else {
        holder.radioBtn.setChecked(false);
    }

    holder.radioBtn.setText(rowItem.getRdbText());
    return convertView;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-22T10:07:57.927

Here is the solution of this problem.

```
 Intent intent = ((Activity) context).getIntent();
            intent.putExtra("SELECTED_PAYMENT", mCurrentlyCheckedRB
                    .getText().toString());
            ((Activity) context).setResult(((Activity) context).RESULT_OK,
                    intent);
            ((Activity) context).finish(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T08:43:13.903

```
public class MyAdapter extends ArrayAdapter
{
    private Context context;
    private Intent intent;

    MyAdapter(Context context)
    {
        this.context = context;
    }

    MyAdapter(Context context,Intent intent)
    {
       this(context);
       this.intent = intent; // use this intent
    }

    private View getView()
    {
        // use intent here
    } 
```

在您的活动中使用第二个构造函数创建您的适配器类的对象

```
Intent yourIntent = new Intent(); 
```

或者：

```
Intent yourIntent = getIntent();
MyAdapter adapter = new MyAdapter(context,yourIntent); // here pass intent 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T09:05:47.660

在适配器类中，您传递活动实例并使用 Context 变量捕获它。下面的片段会帮助你，

私有上下文 mcontext；

```
private Intent adapintent;

MyIntentAdapter(Context context){
    this.mcontext = context;
}

MyIntentAdapter(Context context,Intent intent){
   this(context);
   this.adapintent= intent;

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-22T08:49:56.410

public View getView(final int position, View convertView, ViewGroup parent) {

```
PaymentData rowItem = getItem(position);

LayoutInflater mInflater = (LayoutInflater) context
        .getSystemService(Context.getintent().LAYOUT_INFLATER_SERVICE); 
```

{

//你可以包含这个 :context.getintent(); }

# opengl-es - 将 XIB 插入纯 OpenGL 源代码？

> ID：16142784
> 
> 赞同：-1
> 
> 时间：2013-04-22T08:41:26.317
> 
> 标签：opengl-es

我没有掌握 OpenGL ES（设置我自己的渲染管道的整个概念，更不用说编写像素着色器，令人难以置信）。

恐怕我必须实际使用教程代码作为我个人项目的基础。我见过的最好的教程和示例代码来自 Ray Wenderlich。我知道他的教程链接已经在几篇文章中提到过。

*** 所以这是我的问题 *** Ray 的演示/教程是一个“纯”OpenGL。我什至不确定这是否是正确的术语/概念（他还在使用 OpenGL ES 吗？）。无论如何，我需要一种方法来添加一些与 XIB 相关的东西（比如 UIView 和几个输入控件）。我希望这可以通过最小的更改来实现。如何将 UIView 和 UIButton 添加到 Ray 的演示应用程序？（如果可能，我宁愿不使用 GLKView）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:09:12.603

以编程方式构建的呈现 OpenGL ES 内容的视图只是一个 UIView，它使用 CAEAGLLayer 作为其支持层，而不是标准的 CALayer。它在其他方面与普通 UIView 相同，因此您可以像添加任何其他视图一样将其添加到 XIB 中。在 Interface Builder 中添加一个自定义视图，并给它一个与您的 OpenGL ES 托管视图类名称匹配的类名称，您就可以开始了。

您可以将其放置在视图层次结构中您想要的任何位置，它会正常工作。

# c++ - 随机生成数字？

> ID：16142785
> 
> 赞同：-5
> 
> 时间：2013-04-22T08:41:29.720
> 
> 标签：c++, algorithm, random

我正在尝试（作为一个笨拙的菜鸟）使用这个算法来生成随机数

```
/* initialize state to random bits */
static unsigned long state[16];
/* init should also reset this to 0 */
static unsigned int index = 0;
/* return 32 bit random number */
unsigned long WELLRNG512(void)
{
unsigned long a, b, c, d;
a = state[index];
c = state[(index+13)&15];
b = a^c^(a<<16)^(c<<15);
c = state[(index+9)&15];
c ^= (c>>11);
a = state[index] = b^c;
d = a^((a<<5)&0xDA442D20UL);
index = (index + 15)&15;
a = state[index];
state[index] = a^b^d^(a<<2)^(b<<18)^(c<<28);
return state[index];
} 
```

但它似乎不起作用（结果每次为0）。我在这里找到了[什么是好的游戏随机数生成器？](https://stackoverflow.com/questions/1046714/what-is-a-good-random-number-generator-for-a-game)在评论中有一个说“我浪费了一个晚上来理解为什么我的代码不起作用：在 64 位机器上，此代码产生 64 位数字！使用`sizeof(unsigned long) * 8`”。我有一个 64 位系统，但我不明白我必须做什么！我使用stdlib肯定更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:11:21.980

编辑：对问题的原始假设完全错误。你得到全零的原因`state`是没有播种。你需要填充`state`一些“随机”的东西。

此代码有效。请注意，该功能`seed()`在科学上绝对没有被证明是好的 - 事实上，我只是边走边编，试图让尽可能多的“位”在种子中尽可能多地变化。您应该对“播种随机数”进行一些研究。（我也试过用 just 播种`state[i] = i;`，这似乎也很有效，但在前几次迭代中你得到的数字非常相似）。

```
#include <iostream>
#include <cstdint>

/* initialize state to random bits */
static uint32_t state[16];
/* init should also reset this to 0 */
static unsigned int index = 0;
/* return 32 bit random number */
uint32_t WELLRNG512(void)
{
    uint32_t a, b, c, d;
    a = state[index];
    c = state[(index+13)&15];
    b = a^c^(a<<16)^(c<<15);
    c = state[(index+9)&15];
    c ^= (c>>11);
    a = state[index] = b^c;
    d = a^((a<<5)&0xDA442D24UL);

    index = (index + 15)&15;
    a = state[index];
    state[index] = a^b^d^(a<<2)^(b<<18)^(c<<28);
    return state[index];
}

void seed()
{
    for(size_t i = 0; i < sizeof(state)/sizeof(state[0]); i++)
    {
    state[i] = (i << (24 + (i & 5))) ^ (i << 7) ^ (i << 6) ^ (i >> 2);
    }
}    

int main()
{
    using namespace std;
    seed();
    for(int i = 0; i < 50; i++)
    {
    cout << WELLRNG512() << endl;
    }
    return 0;
} 
```

# codeigniter - 电子邮件中缺少日文字符

> ID：16142794
> 
> 赞同：1
> 
> 时间：2013-04-22T08:41:56.357
> 
> 标签：codeigniter, email, utf-8

我正在为我的项目使用 codeignator 框架。发送时电子邮件中缺少一些日语字符。我检查了控制器并且所有字符都存在。我检查了配置、电子邮件字符集，发现它是 utf-8。我还添加了这个“header('Content-Type: text/html;charset=utf-8');” . 同样，从同一项目发送的邮件也没有问题，仅此特定电子邮件存在问题。

公共功能电子邮件（）{

```
 if($this->lan == "en"){

                $site_name      = "xyz.com";
                $fromname           = "xyz.com";
                $subject            = 'sub 【'.$site_name.'】';
                $content            = " Content of email from ".$site_name."<br /><br />";
                }else{

                $site_name          = "japanesename.com";
                $fromname           = "japanesename.com";

                header('Content-Type: text/html;charset=utf-8');

                $subject            = 'japanesesub【'.$site_name.'】';
                $content            = "

                                     jp content".$site_name."<br />";
                }

        $to                 = $email;
                $this->load->library('email');
                $this->email->set_mailtype('html');
                $this->email->from($fromemail,$fromname);
                $this->email->to($to);
                $this->email->subject($subject);
                $this->email->message($content);
                $this->email->send();
                redirect('redirect_url');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T01:29:22.797

您不需要标题，而是需要在启动其他电子邮件代码之前设置字符集配置：

```
// Set mail config variables
$config['charset'] = 'utf-8';
$this->email->initialize($config); 
```

此外，您必须将任何字符串编码为`UTF-8`，即使您希望它们已经是 utf-8 编码。

```
$content = mb_convert_encoding($content, "UTF-8"); 
```

# javascript - JS，JSON：如何获得符合 2 个条件的第 n 个项目？

> ID：16142797
> 
> 赞同：0
> 
> 时间：2013-04-22T08:42:11.697
> 
> 标签：javascript, json

**给定这样的数据**：

```
var people = [ 
{ 'myKey': 'A', 'status': 0, score: 1.5 },
{ 'myKey': 'C', 'status': 1, score: 2.0 },
{ 'myKey': 'D', 'status': 0, score: 0.2 },
{ 'myKey': 'E', 'status': 1, score: 1.0 },
{ 'myKey': 'F', 'status': 0, score: 0.4 },
{ 'myKey': 'G', 'status': 1, score: 3.0 },
]; 
```

**如何获得所有`'status':1`物品**

```
var people2= [ 
{ 'myKey': 'C', 'status': 1, score: 2.0 },
{ 'myKey': 'E', 'status': 1, score: 1.0 },
{ 'myKey': 'G', 'status': 1, score: 3.0 },
]; 
```

* * *

**编辑：** 我的最终目标是`'status':1`按升序获得 n=2 项，例如：

```
var people3= [ 
{ 'myKey': 'E', 'status': 1, score: 1.0 },
{ 'myKey': 'C', 'status': 1, score: 2.0 },
{ 'myKey': 'G', 'status': 1, score: 3.0 },
]; 
```

`var people`我的方法是从所有项目中`'status':1`获取一个函数`people2`（这是我在这里询问的代码），一个 fn`people2`按升序排序（`people3`），然后一个 fn 选择第一个项目`'myKey':`的值。`n=2`所以我得到

```
var people4 = [ 'E', 'C' ]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T08:51:41.747

```
function getMyKeys(top) {    
   var result = people.filter(function (item) {
          return item["status"] === 1; //only status=1
       })
       .sort(function (a, b) {
          return a["score"] - b["score"]; //sort 
       })
       .slice(0, top) //top n
       .map(function (item) {
          return item["myKey"]; //return "myKey" property only, if needed.
       });
   } 
```

[小提琴演示](http://jsfiddle.net/fr8Lv/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:49:25.970

使用新`filter`方法有条件地减少数组中的项目集。一旦减少通过将比较函数传递给项目对项目进行排序`Array.sort()`

```
var people = [ 
{ 'myKey': 'A', 'status': 0, score: 1.5 },
{ 'myKey': 'C', 'status': 1, score: 2.0 },
{ 'myKey': 'D', 'status': 0, score: 0.2 },
{ 'myKey': 'E', 'status': 1, score: 1.0 },
{ 'myKey': 'F', 'status': 0, score: 0.4 },
{ 'myKey': 'G', 'status': 1, score: 3.0 },
];

    var selected = people.filter(function(e){
        return e.status == 1;
    });

    selected.sort(function(a,b){
       if(a.score < b.score){return -1;}
       if(a.score > b.score){ return 1;}
       return 0;
    }); 
```

如果您必须支持较旧的浏览器，您可能需要将该`.filter`方法构建到浏览器中。MDN 上的此[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)包含`.filter`可以添加到浏览器的本机实现。

**工作示例** [http://jsfiddle.net/5zt3A/](http://jsfiddle.net/5zt3A/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:54:26.053

您必须按状态过滤，然后按分数排序，然后仅映射 myKey

```
var people = [ 
{ 'myKey': 'A', 'status': 0, score: 1.5 },
{ 'myKey': 'C', 'status': 1, score: 2.0 },
{ 'myKey': 'D', 'status': 0, score: 0.2 },
{ 'myKey': 'E', 'status': 1, score: 1.0 },
{ 'myKey': 'F', 'status': 0, score: 0.4 },
{ 'myKey': 'G', 'status': 1, score: 3.0 },
];

var result = people.filter(function(i) {
    return i.status == 1;
    })
    .sort(function (a, b) {
        if (a.score == b.score) return 0;
        if (a.score > b.score) return 1;
        return -1;
    }).map(function(i) {
        return i.myKey;
    }); 
```

[http://jsfiddle.net/GrYuK/1/](http://jsfiddle.net/GrYuK/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T09:01:34.830

忍受另一组答案，我准备了一个[链接](http://jsfiddle.net/cLSLZ/)，您可以查看更多详细信息。

```
 (function getPeopleStatus (person){
    for(var ctr = 0; ctr< person.length; ctr++){

    if(person[ctr].status === 1){
        selection.push(person[ctr]);
    }

}
    selection.sort()
  })(people); 
```

# asp.net - 在不使用 AD 的情况下搜索用户

> ID：16142805
> 
> 赞同：0
> 
> 时间：2013-04-22T08:42:30.040
> 
> 标签：asp.net, vb.net, visual-studio-2008

我正在创建一个 Web 应用程序，用户需要使用他们的 AD 凭据登录。在多个页面上，用户可以使用 AD 进行另一个用户查找。搜索机制如下所示。问题是它需要使用有效的凭据来创建新的目录条目。在开发过程中，我硬编码了我的凭据，认为每个用户都可以通过将用户 ID 和密码保存在 Session 变量中来使用他们的凭据。但是，我不确定这种方法是否安全。

我正在考虑的另一种方法是安排一个程序将 AD 记录导入数据库，但我还没有找到方法。即使我找到了，该程序仍然需要使用某些凭据，不是吗？

我在这里需要一些建议。下面是查找函数的脚本。提前致谢。

```
 Dim enTry As DirectoryEntry = New DirectoryEntry(strADSvrIP, user_loginID, user_loginpassword)
        Dim mySearcher As DirectorySearcher = New DirectorySearcher(enTry)

        mySearcher.Filter = "(&(objectCategory=person)(objectClass=user)(|(givenname=" & strKeyword & ")(name=" & strKeyword & ")(sn=" & strKeyword & ")(samAccountName=" & strKeyword & ")))"
        Dim resColl As SearchResultCollection
        Dim resEnt As SearchResult
        Dim list As New List(Of String)

        Try
            resColl = mySearcher.FindAll()

            lblResult.Text = ""

            For Each resEnt In resColl
                If Not resEnt.GetDirectoryEntry.Properties("sn").Value Is Nothing Then
                    lblResult.Text = lblResult.Text & resEnt.GetDirectoryEntry.Properties("samAccountName").Value.ToString() & "-"
                    lblResult.Text = lblResult.Text & resEnt.GetDirectoryEntry.Properties("name").Value.ToString() & "<br>"
                End If
            Next 
```

**编辑（解决方案）：**

我可以通过在 IIS 设置上使用 ASP.NET Impersonate 激活来使用来自活动用户的凭据，并使用以下语法：

```
 Dim enTry As DirectoryEntry = New DirectoryEntry(strADSvrIP, Nothing, Nothing, AuthenticationTypes.None) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:49:48.833

通常，您会将应用程序池配置为在域帐户下运行。然后，此帐户将用于搜索 AD，而无需对用户名和密码进行硬编码。

或者，在用户凭据下搜索 AD：如果您使用的是 Windows 身份验证，则可以调用`HttpContext.Request.LogonUserIdentity.Impersonate()`（或配置应用程序或特定页面以使用自动 ASP.NET 模拟）。

# ruby-on-rails - 在同一个视图中在主干.js 中呈现不同的模板

> ID：16142806
> 
> 赞同：1
> 
> 时间：2013-04-22T08:42:35.690
> 
> 标签：ruby-on-rails, backbone.js, backbone-views

我有一个已经呈现帖子集合的视图：

```
Social.Views.StreamsIndex = Backbone.View.extend({

  template: JST['streams/index'],

  render: function(){
    $(this.el).html(this.template({
        entries: this.collection.toJSON()
    }));
    return this;
  }
}); 
```

现在我必须对一个帖子发表评论，我必须为其渲染一个不同的模板来发表评论：

```
Social.Views.StreamsIndex = Backbone.View.extend({

  template: JST['streams/index'],
  events: {
    'submit .comment_submit': 'comment_create'
  },
  comment_create: function(event) {
    //create comment code 
```

创建后我想做这样的事情，以便它可以呈现评论模板

```
 $("#comment).html(this.template1({
        comment: comment
    }));
  }
}); 
```

是否可以从同一视图呈现两个模板？

编辑：（添加视图）

```
Social.Views.StreamsIndex = Backbone.View.extend({

template: JST['streams/index'],
template1: JST['streams/comment'],

events: {
    'submit .comment_submit': 'comment_create'
},

initialize: function(){
    this.collection.on('reset', this.render, this);
    this.model = new Social.Models.StreamsIndex();
    this.model.bind('comment_createSuccess', this.comment_createSuccess);
},

render: function(){
    $(this.el).html(this.template({
        entries: this.collection.toJSON()
    }));
    return this;
},

comment_create: function(event) {
    event.preventDefault();
    event.stopPropagation();
    post_id = $(event.currentTarget).attr("data-post-id");
    href = $(event.currentTarget).attr('action');
    comment_text = $("#comment_txt_"+post_id).val();
    this.model.create_comment(href, post_id, comment_text); // this sends ajax request and post the comment to server
},

comment_createSuccess: function(data, post_id) {
    this.$("#comment_for_post_"+post_id).append(this.template1({
      comment: data
    }));
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:53:01.287

这里绝对没有问题，因为模板无论如何都不是 Backbone 结构的一部分。我只有一个说法，那就是你应该`this.$`在你的视图中使用（它是 的快捷方式`this.$el.find`，所以你只会找到你的视图的 el 的后代）。

所以...

```
this.$('#comment').append(this.template1({ // changed to append to be used several times
    comment: comment
})); 
```

**编辑：**
关于您的上下文问题：

```
this.model.bind('comment_createSuccess', this.comment_createSuccess); 
```

在这里，您可以使用 的第三个参数`bind`来设置回调的上下文：

```
this.model.bind('comment_createSuccess', this.comment_createSuccess, this); 
```

`this`在您的回调 ( `comment_createSuccess`) 中现在将是您的视图。
我个人宁愿使用[Events#listenTo](http://backbonejs.org/#Events-listenTo)来自动绑定上下文：

```
this.listenTo(this.model, 'comment_createSuccess', this.comment_createSuccess); 
```

# neo4j - 两个 *.jar 文件中的相同插件

> ID：16142807
> 
> 赞同：0
> 
> 时间：2013-04-22T08:42:39.680
> 
> 标签：neo4j

我在两个 *.jar 文件中有相同的插件（例如：`my-plugin-1.0.jar`和`my-plugin-1.1.jar`）。在这种情况下，neo4j 会收到警告或错误吗？

TIA。

关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T06:14:52.083

我在插件中创建了一些脚本，而不是通过掩码检查文件。

# android - 代码中的角半径和可绘制项目

> ID：16142814
> 
> 赞同：4
> 
> 时间：2013-04-22T08:43:09.753
> 
> 标签：android, drawable

我有这个xml；

```
<?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">  
    <item android:drawable="@drawable/back" />
    <item>
        <shape>
            <solid/>
            <stroke android:width="1dip" android:color="#25786" />
            <corners android:radius="10dip"/>
            <padding android:left="0dip" android:top="0dip" 
                     android:right="0dip" android:bottom="0dip" />
        </shape>
    </item> 
</layer-list> 
```

现在我通过代码来做：

```
Drawable[] layers = new Drawable[2];

    ShapeDrawable sd1 = new ShapeDrawable(new RectShape());
    sd1.getPaint().setColor(0xFFFFFFFF);
    sd1.getPaint().setStyle(Style.STROKE);
    sd1.getPaint().setStrokeWidth(1);

    layers[0] = sd1;

    LayerDrawable composite = new LayerDrawable(layers); 
```

但我无法对其进行`<corners android:radius="10dip"/>`编码`<item android:drawable="@drawable/back" />`

怎么做？

**编辑 1**

```
Drawable[] layers = new Drawable[2];

ShapeDrawable sd1 = new ShapeDrawable(new RectShape());
sd1.getPaint().setColor(0xFFFFFFFF);
sd1.getPaint().setStyle(Style.STROKE);
sd1.getPaint().setStrokeWidth(1);
sd1.getPaint().setPathEffect(new CornerPathEffect(10));

layers[1] = sd1;
layers[0] = getResources().getDrawable(R.drawable.pie_chart_back);

LayerDrawable composite = new LayerDrawable(layers); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T08:53:56.367

就像在您的 XML 中一样，您需要三个`Drawable`，而不是一个。一个是[`LayerDrawable`](http://developer.android.com/reference/android/graphics/drawable/LayerDrawable.html)包含其他的。另一个缺失的可能是[`BitmapDrawable`](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html)取决于`@drawable/back`.

您正在寻找的角落效果在[`CornerPathEffect`](http://developer.android.com/reference/android/graphics/CornerPathEffect.html)您`Drawable`的中`Paint`，请参阅[`Paint.setPathEffect`](http://developer.android.com/reference/android/graphics/Paint.html#setPathEffect%28android.graphics.PathEffect%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T12:59:37.450

尝试这个...！

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="#e1e1e1" />

    <stroke
        android:width="2dp"
        android:color="#808080" />

    <corners android:radius="10dp" />

    <padding
        android:bottom="5dp"
        android:left="5dp"
        android:right="5dp"
        android:top="5dp" />

</shape> 
```

# phpexcel - PHPExcel在列上设置默认下拉选项

> ID：16142815
> 
> 赞同：4
> 
> 时间：2013-04-22T08:43:10.373
> 
> 标签：phpexcel

我正在使用 PHPExcel 生成模板 Excel 文档供用户下载，以便他们上传批量数据。

作为其中的一部分，我希望某些字段是下拉列表中的选择。

DataValidation 示例显示如何对单个单元格执行此操作，如下所示：

```
$objValidation = $objPHPExcel->getActiveSheet()->getCell('B5')->getDataValidation();
$objValidation->setType( PHPExcel_Cell_DataValidation::TYPE_LIST );
$objValidation->setErrorStyle( PHPExcel_Cell_DataValidation::STYLE_INFORMATION );
$objValidation->setAllowBlank(false);
$objValidation->setShowInputMessage(true);
$objValidation->setShowErrorMessage(true);
$objValidation->setShowDropDown(true);
$objValidation->setErrorTitle('Input error');
$objValidation->setError('Value is not in list.');
$objValidation->setPromptTitle('Pick from list');
$objValidation->setPrompt('Please pick a value from the drop-down list.');
$objValidation->setFormula1('"Item A,Item B,Item C"');  // Make sure to put the list items between " and "  !!! 
```

这对于单个单元格来说很好，但我希望 B 列中的所有单元格在添加新数据行时都是下拉列表。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-02T10:29:57.033

你可以试试这个代码：你的起始单元格没有 $i=3 你可以改变这个值和 $i<=250 循环区域。

```
for ($i = 3; $i <= 250; $i++)
{
    $objValidation2 = $objPHPExcel->getActiveSheet()->getCell('N' . $i)->getDataValidation();
    $objValidation2->setType(PHPExcel_Cell_DataValidation::TYPE_LIST);
    $objValidation2->setErrorStyle(PHPExcel_Cell_DataValidation::STYLE_INFORMATION);
    $objValidation2->setAllowBlank(false);
    $objValidation2->setShowInputMessage(true);
    $objValidation2->setShowDropDown(true);
    $objValidation2->setPromptTitle('Pick from list');
    $objValidation2->setPrompt('Please pick a value from the drop-down list.');
    $objValidation2->setErrorTitle('Input error');
    $objValidation2->setError('Value is not in list');
    $objValidation2->setFormula1('"male,female"');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T11:46:00.607

我知道这是一个很晚的答复。但是，以防万一。

使用循环（foreach / for）

循环内

```
$i = 2;
foreach(...){
   $objValidation = $objPHPExcel->getActiveSheet()->getCell('B'.$i)->getDataValidation();
   $objValidation->setType( PHPExcel_Cell_DataValidation::TYPE_LIST );
   $objValidation->setErrorStyle( PHPExcel_Cell_DataValidation::STYLE_INFORMATION );
   $objValidation->setAllowBlank(false);
   $objValidation->setShowInputMessage(true);
   $objValidation->setShowErrorMessage(true);
   $objValidation->setShowDropDown(true);
   $objValidation->setErrorTitle('Input error');
   $objValidation->setError('Value is not in list.');
   $objValidation->setPromptTitle('Pick from list');
   $objValidation->setPrompt('Please pick a value from the drop-down list.');
   $objValidation->setFormula1('"Item A,Item B,Item C"');

   $i++;
} 
```

这会做你想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-14T13:44:00.210

来自官方文档：

> 如果您需要对多个单元格进行数据验证，可以克隆规则集：
> 
> ```
> $objPHPExcel->getActiveSheet()->getCell('B8')->setDataValidation(clone
> $objValidation); 
> ```

但是，到 2015 年底，仍然没有“按区域”的方式来设置它。

# asp.net - 如何在 asp.net 2.0 中集成 Pentaho 报告

> ID：16142822
> 
> 赞同：0
> 
> 时间：2013-04-22T08:43:30.890
> 
> 标签：asp.net, pentaho

我需要在 Pentaho 中生成报告，并在 asp.net 页面中显示。如果有人知道使用 ASP.Net 实现 Pentaho，请重播....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:48:27.597

Pentaho 使用运行在 Java 环境中的 Tomcat 运行。

您必须创建一个框架并调用将返回报告的 Web 服务（或者您可以使用 AJAX）。看这个[例子](http://bdietzblog.blogspot.in/2008/12/pentaho-bi-server-using-action.html)

# opc - 激活/停用活动 opc 订阅中的特定 opc 项目而不重新创建它

> ID：16142823
> 
> 赞同：0
> 
> 时间：2013-04-22T08:43:37.530
> 
> 标签：opc

我正在使用 OPC Net API 开发基于 opc 的客户端/服务器应用程序。我的服务器是一个 OPC 客户端，它通过 WCF 服务基础架构向客户端提供流程数据。根据我的客户连接的标签，我想在我的服务器上做出反应并且只订阅那些 opc 项目。

现在我的问题是：是否可以在活动订阅中激活或停用 opc 项目而无需一直重新创建订阅？

另一个问题：这里有没有人有使用该 API 的经验，以及订阅中可以有多少 opc 项目，以便它仍然具有良好的性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:46:11.583

是的，每个项目都有一个活动状态，您应该能够通过 API 更改它。在 IOPCItemMgt 接口中查找 SetActiveState() 方法。

您通常可以毫无问题地在订阅中使用数百甚至数千个项目，但性能可能会因服务器功能而异。

瓶颈通常是 AddItems，这在某些服务器上需要很长时间。您可以尝试在一次 AddItems 调用中添加所有项目，或者如果服务器处理时间过长，您可能需要将调用分成几个更小的一次。

# android - 更新后自动安装安卓应用

> ID：16142827
> 
> 赞同：0
> 
> 时间：2013-04-22T08:43:53.810
> 
> 标签：android, android-permissions

我在互联网上做了一些研究，但我找不到我的问题的明确答案。我的问题是：当应用程序自我更新时（我有一个正常工作的自动更新程序），它在安装过程中不断请求许可。有没有办法避免这种情况。当然，当有人第一次在他的安卓手机上安装我的应用程序时，该应用程序会要求一些权限。但是当应用程序更新时，它不应该请求许可，而只是自动安装和更新。请注意，该应用程序旨在在运行 Android 版本 2.3.3 和 4.0.3 之间的设备上运行。并且该应用程序不会在安卓市场上销售。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:19:14.057

简单的答案是，不，你无法避免这一点。无法保证更新将自动要求与以前版本相同的权限 - 并且始终要求用户确认。

我必须在我的应用程序中处理这个问题（不能通过 Market 获得，只有拥有自己服务器的私人公司才能从中下载更新）。我介绍它的方式是将这些细节写在用户手册中并向客户解释这种方式实际上更好，因为用户会看到正在应用更新。

# python - numpy：使用 1d 和 2d 数组进行切片和矢量化循环

> ID：16142829
> 
> 赞同：2
> 
> 时间：2013-04-22T08:44:02.393
> 
> 标签：python, numpy, multidimensional-array, indexing, slice

我想对以下循环进行矢量化以提高效率：

```
A = np.array([[0., 1., 0., 2.],
              [1., 0., 3., 0.],
              [0., 0., 0., 4.],
              [2., 0., 4., 0.]]) # quadratic, not symmetric Matrix, shape (i, i)
B = np.array([2., 4., 2., 1.]) # vector shape (i)
C = np.zeros(A.shape) # Result Matrix 
# classical Loop:
for i in range(len(B)):
    for j in range(len(B)):
        C[i, j] = A[i, j]*(B[i]-B[j]) 
```

我的第一次尝试，像在 Mathcad 中一样使用矢量化，但不是我想要的：

```
i = np.arange(len(B))
j = np.arange(len(B))
C[i,j] = A[i,j]*(B[i]-B[j]) # this fails to do what I want 
```

我的第二次尝试是最好的方法吗，还是有更简单更自然的“numpy 方法”？

```
idx = np.indices(A.shape)
C[idx] = A[idx]*(B[idx[0]]-B[idx[1]]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:18:59.767

以下是您想要的：

```
A = np.array([[0., 1., 0., 2.],
             [1., 0., 3., 0.],
             [0., 0., 0., 4.],
             [2., 0., 4., 0.]]) # quadratic, not symmetric Matrix, shape (i, i)
B = np.array([2., 4., 2., 1.]) # vector shape (i)

C = A*(B[:,None]-B) 
```

C是

```
array([[ 0., -2.,  0.,  2.],
       [ 2.,  0.,  6.,  0.],
       [ 0., -0.,  0.,  4.],
       [-2., -0., -4.,  0.]]) 
```

一点解释：
`B[:,None]`转换`B`为 shape 的列向量`[4,1]`。`B[:,None]-B`自动将结果广播到一个 4x4 矩阵，您可以简单地乘以`A`

# c++ - Mandelbrot 集不会使用 pthread 加速

> ID：16142836
> 
> 赞同：0
> 
> 时间：2013-04-22T08:44:25.733
> 
> 标签：c++, pthreads, mandelbrot

所以，我正在编写一个程序来使用 pthread 计算 Mandelbrot 集。
这是线程函数：

```
void *partial_compute(void *arg) {
    cout << "enter" << flush;
    Range *range = (Range*)arg;
    Comp z, c;
    for (int i = range->begin; i <= range->end; i++) {
        for (int j = 0; j < y_length; j++) {
            z.set(0.0, 0.0);
            c.set(x_start + (x_end - x_start) * i / x_length, y_start + (y_end - y_start) * j / y_length);
            int k;
            for (k = 0; k < 256; k++) {
                z = z.next(c);
                if (z.length() >= 4.0) {
                    break;
                }
            }
            *(canvas + i * y_length + j) = k;
        }
    }
    pthread_exit(NULL);
} 
```

这`Comp`是一类复数，`z.next`意味着计算下一次 Mandelbrot 迭代。

```
Comp Comp::next(Comp c) {
    Comp n(next_real(c), next_imag(c));
    return n;
}
float Comp::next_real(Comp c) {
    return _real * _real - _imag * _imag + c.real();
}
float Comp::next_imag(Comp c) {
    return 2 * _real * _imag + c.imag();
} 
```

我设置了一对`clock_t`之前`pthread_create`和之后`pthread_join`。
Mandelbrot 集的结果是正确的，但是，尽管我将线程数从 1 增加到 8，但计算时间始终相同。
因为在`"enter"`一秒钟前同时打印出`pthread_join`，我相信线程是并行执行的.
我想问题可能是 中存在线程安全函数`partial_compute`，但我找不到。（我尝试用`float`代替类来表示复数）
我在这里犯了什么错误吗？感谢您的帮助。

**更新：**
抱歉信息不完整。
`z.length()`表示复数 z 的平方。
这就是我拆分任务的方式。`x_length`和`y_length`表示屏幕的宽度和高度。
我将屏幕按宽度分成 n 部分，并将范围发送到线程进行计算。

```
int partial_length = x_length / num_threads;
for (int i = 0; i < num_threads; i++) {
    range[i].begin = i * partial_length;
    range[i].end = range[i].begin + partial_length - 1;
    pthread_create(&threads[i], NULL, partial_compute, (void *)&range[i]);
}
// wait all the threads finished
for (int i = 0; i < num_threads; i++) {
    pthread_join(threads[i], NULL);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:26:47.913

我发现问题是`clock()`......
当`clock()`你使用pthread时不能用来测量经过的时间，
因此我发现`gettimeofday(timeval, NULL)`可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:11:32.000

是的，Pthreads 中存在问题`clock()`。您可以使用`clock_gettime()`with`CLOCK_MONOTONIC`选项，在 Pthreads 中正确测量时间。您还需要为此链接 POSIX 实时扩展 (-lrt)。

这是一个例子：

```
struct timespec begin, end;
double elapsed;

clock_gettime(CLOCK_MONOTONIC, &begin);

// spawn threads to do work here

clock_gettime(CLOCK_MONOTONIC, &end);

elapsed = end.tv_sec - begin.tv_sec;
elapsed += (end.tv_nsec - begin.tv_nsec) / 1000000000.0; 
```

# active-directory - 如何获取特定用户的所有 AD 组

> ID：16142838
> 
> 赞同：1
> 
> 时间：2013-04-22T08:44:29.347
> 
> 标签：active-directory, ldap, jndi

您好，我想知道是否可以使用例如 JNDI API 来获取属于用户的所有 AD 组。谢谢

奥龙佐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:55:12.613

这应该有效。 [用户所属的所有组，包括嵌套组](http://ldapwiki.willeke.com/wiki/Active%20Directory%20User%20Related%20Searches#section-Active+Directory+User+Related+Searches-AllGroupsAUserIsAMemberOfIncludingNestedGroups)

# android - 使用 root 访问权限在 Android 上打开另一个应用程序的 sqlite-database

> ID：16142844
> 
> 赞同：4
> 
> 时间：2013-04-22T08:44:51.660
> 
> 标签：android, sqlite, root

我想打开另一个应用程序的数据库。我知道我必须具有 root 访问权限，但似乎 root 访问权限“仅”用于 shell 命令。

我想在数据库中进行很多选择和一些插入。是否可以以 root 身份打开数据库，并在“普通”应用程序中使用数据库句柄？

提前致谢

比伯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T12:18:02.827

感谢所有答案！我认为唯一的方法是做这样的事情：

```
Process p = Runtime.getRuntime().exec("su sqlite3 -csv test.db \"select * from test\";"); 
```

然后，我必须用 cvs 解析器解析 OutputStream，.... 我希望我能以更简单的方式来做，但我看不到解决方案。

也许我可以在我的应用程序目录中创建指向文件的硬链接，但这非常危险，因为这样一个数据库就有两个“.journal”文件。

感谢帮助

比伯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:04:16.137

如果您通过 shell 命令具有 root 访问权限，您仍然可以访问数据库：

例子 ：

```
mycomp$ adb shell
$ su
# cd com.android.providers.media
# ls
cache
databases
lib
shared_prefs
# cd databases
# ls
external.db
external.db-shm
external.db-wal
internal.db
internal.db-shm
internal.db-wal
# sqlite3 external.db
SQLite version 3.7.11 2012-03-20 11:35:50
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> select count(*) from images;
10
sqlite> 
```

使用的工具是 sqlite3，它是 sqlite 数据库的客户端命令。数据库文件通常位于 /data/data/com.someapp/databases/。

编辑：等等......我正在阅读你的问题。你的意思是你想从你自己的应用程序访问另一个应用程序的数据库？

编辑：如果你想访问另一个数据库，另一个数据库必须是内容提供者。最好的例子是媒体库（上面的图像表是包含设备中图片的表）。代码示例：

```
 // which image properties are we querying
 String[] projection = new String[] { BaseColumns._ID, ImageColumns.BUCKET_DISPLAY_NAME, ImageColumns.DATE_TAKEN, MediaColumns.TITLE, MediaColumns.DATA };

 // Get the base URI for the image table in the Contacts content provider.
 Uri images = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;

 // Make the query.
 Cursor cur = context.managedQuery(images, projection, // Which columns to return
            "", // Which rows to return (all rows)
            null,//selection, // Selection arguments (none)
            ImageColumns.DATE_TAKEN + " DESC"// Ordering
            ); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-09T22:00:25.643

`sharedUsersId`如果这两个应用程序在 Manifest 中具有相同值的标签，则不需要 root 访问权限和 shell ：

```
<manifest
  xmlns:android="http://schemas.android.com/apk/res/android" 
  android:sharedUserId="app.you.want.to.share"
> 
```

在应用程序中，您想要访问`app.you.want.to.share`应用程序的地方必须创建一个上下文：

```
Context sharedContext = createPackageContext ("app.you.want.to.share", Context.CONTEXT_INCLUDE_CODE); 
```

然后您可以在数据库适配器等中使用它：

```
class DBHelper extends SQLiteOpenHelper {

    DBHelper (Context context) {
      super (context, "db", null, 1);
    }

}

DBHelper dbHelper = new DBHelper (sharedContext); 
```

# delphi - 如何在delphi中为PL SQL中的过程传递对象类型参数？

> ID：16142851
> 
> 赞同：0
> 
> 时间：2013-04-22T08:45:38.363
> 
> 标签：delphi, plsql

我在 PL SQL 中的存储过程包括来自自定义对象类型的参数。delphi怎么传参数？delphi怎么定义这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:18:22.673

对象数据类型是一个非常特定于 oracle 的概念，您通常不会在支持多个数据库的库上找到对此的支持，例如 Delphi 的 dbExpress 甚至 dbGo (ADO)。

您没有包含有关您使用的数据访问层的信息，因此我无法具体说明该特定层是否支持 oracle 对象，以及它是如何工作的，因此这是一般建议。

幸运的是，您在 Delphi 中找到了 Oracle 特定的数据访问库，并且可能所有这些库都包含对 Oracle 对象的某种支持。IIRC 我所知道的所有图书馆都不是免费的。

例如，使用[allroundautomations Direct Oracle Access](http://www.allroundautomations.com/)产品，您就拥有了`TOracleObject`用于读取对象并将*对象*写入Oracle 数据库的类。

例如，您可以使用 a 调用存储过程，`TOracleQuery`并将对象传递给调用该`SetComplexVariable`方法的过程，将`TOracleObject`实例作为参数传递。

有关更多信息，请查看[DOA 手册](http://www.allroundautomations.com/download/doamanual.pdf)（搜索`TOracleQuery.SetComplexVariable`方法参考）。

# objective-c - NSWindow - 无边界透明窗口 - 动画窗口高度时闪烁的阴影

> ID：16142852
> 
> 赞同：8
> 
> 时间：2013-04-22T08:45:38.360
> 
> 标签：objective-c, cocoa, nswindow

这是另一个`NSWindow`问题......我有无边框窗口，透明，以这种方式创建......

```
- (id)initWithView:(NSView *)view anchorPoint:(NSPoint)anchorPoint position:(NSPoint)position distance:(CGFloat)distance {
  if ( !view ) {
    return nil;
  }

  NSSize size = view.intrinsicContentSize;
  NSRect contentRect = NSMakeRect( 0, 0, size.width, size.height );

  self = [super initWithContentRect:contentRect
                          styleMask:NSBorderlessWindowMask
                            backing:NSBackingStoreBuffered
                              defer:NO];

  if ( !self ) {
    return nil;
  }

  _windowView = view;
  _anchorPoint = anchorPoint;
  _position = position;
  _distance = distance;

  [self setContentView:_windowView];

  [self setExcludedFromWindowsMenu:YES];
  [self setMovableByWindowBackground:NO];

  [self setOpaque:NO];
  [self setBackgroundColor:[NSColor clearColor]];

  [self setHasShadow:YES];
  [self useOptimizedDrawing:YES];

  [self setReleasedWhenClosed:NO];

  [self setFrame:[self windowRectWithSize:contentRect.size] display:YES];

  [self setAnchorAttribute:NSLayoutAttributeTop forOrientation:NSLayoutConstraintOrientationVertical];
  [self setAnchorAttribute:NSLayoutAttributeCenterX forOrientation:NSLayoutConstraintOrientationHorizontal];

  [[NSNotificationCenter defaultCenter] addObserver:self
                                           selector:@selector(viewFrameDidChange:)
                                               name:NSViewFrameDidChangeNotification
                                             object:nil];

  return self;
} 
```

...并被`viewFrameDidChange:`定义为...

```
- (void)viewFrameDidChange:(NSNotification *)note {
  if ( note.object != self.contentView ) {
    return;
  }

  [self display];
  [self setHasShadow:NO];
  [self setHasShadow:YES];
} 
```

...这是获得适当`NSWindow`阴影的唯一方法。换句话说，每当窗口大小发生变化时，我都必须调用，`display`否则窗口阴影会被削弱 - 它不在整个窗口周围 - 只是窗口的一部分，等等。`setHasShadow:NO``setHasShadow:YES`

在我开始动画高度之前，这确实有效。如果高度是动画的，阴影会正确地重新计算和显示，但整个窗口和阴影会闪烁并且非常难看。

一个想法为什么阴影在闪烁？我尝试将 , 替换`display`为`setHasShadow:NO/YES`，`[self invalidateShadow]`但它根本不起作用，并且阴影以错误的方式显示。

如何在无边框/透明窗口中使用阴影为窗口高度设置动画以避免闪烁？

这是闪烁阴影的视频。[http://d.pr/v/lbkQ](http://d.pr/v/lbkQ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T17:32:49.707

也许最好在动画开始时关闭阴影并在完成后重新打开。不要在动画期间切换此设置。我想我在其他窗户上也看到了这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T20:14:17.883

阴影计算和绘制是一个非常消耗资源的操作。因此，我不建议您在每次帧更改时使阴影无效并重新计算。此外，**NSWindowDelegate**有一个`–windowDidResize:`方法，为什么要使用观察者呢？

1.  如何调整窗口大小？也许添加`NSResizableWindowMask`到窗口的样式掩码可以解决问题？你应该试一试。

2.  另一个建议 - 检查窗口的内容是否与窗口一起正确调整大小。您将窗口设置为透明。但如果窗口内没有内容，则不会显示阴影。您还可以尝试将您的视图作为子视图添加到现有窗口的 contentView 而不是替换它。

我的项目中的设置几乎相同，我可以告诉您在调整窗口大小时正确显示了窗口的阴影。

PS A 建议：不要在对象的初始化方法中依赖'self'。它可能还没有完全准备好使用。以最小值初始化，在您的控制器中创建窗口后调整窗口（例如，您不能确定 setFrame:display 会以正确的大小执行您期望的操作）。您遇到的故障也可能与此有关。

# c# - asp.net 树视图中的 OnSelectedNodeChanged 事件不起作用

> ID：16142855
> 
> 赞同：4
> 
> 时间：2013-04-22T08:46:01.387
> 
> 标签：c#, asp.net, treeview

这是我的代码`.aspx`，

```
 <asp:TreeView ID="TreeView1" runat="server"
 OnSelectedNodeChanged="TreeView1_SelectedNodeChanged"
 ImageSet="Arrows" >
</asp:TreeView>
<asp:TextBox runat="server" ID="selectedNode"></asp:TextBox> 
```

在我的`.cs`档案中，

```
 protected void TreeView1_SelectedNodeChanged(object sender, EventArgs e)
{
    selectedNode.Text = TreeView1.SelectedNode.Value;
} 
```

但是，`OnSelectedNodeChanged`事件不起作用，我想知道为什么。

我动态绑定节点。我使用了这个[链接](https://stackoverflow.com/questions/16139479/how-to-add-root-node-in-tree-view-dynamically-using-asp-net/16139564?noredirect=1#comment23057324_16139564)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:03:29.597

你是对的，它不会起作用，因为在链接中它是写的

```
 root.SelectAction = TreeNodeSelectAction.Expand; 
```

而不是写 //use .Select

```
 root.SelectAction = TreeNodeSelectAction.Select; 
```

它会起作用的。

```
TreeNodeSelectAction.Expand
Toggles the node between expanded and collapsed. Raises the TreeNodeExpanded event or the TreeNodeCollapsed event, as appropriate.

TreeNodeSelectAction.None
Raises no events when a node is selected.

TreeNodeSelectAction.Select 
Raises the SelectedNodeChanged event when a node is selected.

TreeNodeSelectAction.SelectExpand
Raises both the SelectedNodeChanged and TreeNodeExpanded events when a node is selected. Nodes are only expanded, never collapsed. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-05T02:29:05.337

这是一个旧线程，但 OnSelectedNodeChanged 不触发的另一个原因是您是否为给定节点设置了 NavigateURL 值。不过，您可以使用一个技巧。删除 NavigateURL 属性并将节点“Value”属性设置为要链接到的 url，然后在后面代码中触发的 OnSelectedNodeChanged 事件中，从 SelectedNode.Value 属性重定向到 url。

高温高压

戴夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T22:35:05.660

我有类似的问题。当我在动态生成节点时删除节点的 NavigateURL 时，会触发 OnSelectedNodeChanged 事件。

# php - 带有php DOM和xpath的特定评论属性的整个父节点？

> ID：16142864
> 
> 赞同：0
> 
> 时间：2013-04-22T08:46:25.167
> 
> 标签：php, xpath, domdocument

我想用属性（ID或类）输出评论的父节点

如果我有这个 html 代码

```
<div><span><!--test--></span><div class="myclass"><!--test_comment--></div></div> 
```

我想要以下输出

```
<div class="myclass"><!--test_comment--></div> 
```

如果我有这个 html 代码

```
<div><span id="myid" style="color:blue;font-weight:bold"><!--test_comment--></span><div class="myclass"><!--test--></div></div> 
```

我想要以下输出

```
<span id="myid" style="color:blue;font-weight:bold"><!--test_comment--></span> 
```

这是我的带有 xpath 的 php DOM 代码

```
<?php
$html = <<<STR
    <div><span><!--test--></span><div class="myclass"><!--test_comment--></div></div> 
STR;

$dom = new DOMDocument;
$dom->loadHTML($html);

$xpath = new DOMXPath($dom);
$node = $xpath->query('//comment()');

$myComment = $node->item(1)->textContent; // <!--test_comment-->
$myNode = $node->item(1)->parentNode->nodeName; // div

echo $node->item(1)->parentNode->nodeValue; //NOT WORKING

echo "<" . $myNode . ">" . $myComment . "</" . $myNode . ">";

?> 
```

问题是我不知道如何搜索特定的评论（）。想要类似的东西`$xpath->query('//comment() == "test_comment"');`

我的php代码导致

```
<div>test_comment</div> 
```

如何获取 div 中的属性（类或 ID）？节点值不工作。

当我是新手时，也欢迎对我的代码进行任何其他评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:55:07.447

```
<?php
$dom = new DOMDocument;
$dom->loadHTML(data());

$xpath = new DOMXPath($dom);
$node = $xpath->query('//*[comment()]');
foreach( $node as $p ) {
    echo 'output: ', $dom->saveXML($p), "\r\n";
}

function data() {
    return <<< STR
<div><span id="myid" style="color:blue;font-weight:bold"><!--test--></span><p>no comment here</p><div class="myclass"><!--test_comment--></div></div> 
STR;
} 
```

印刷

```
output: <span id="myid" style="color:blue;font-weight:bold"><!--test--></span>
output: <div class="myclass"><!--test_comment--></div> 
```

# c# - 删除名称前字符串中的所有字符

> ID：16142865
> 
> 赞同：0
> 
> 时间：2013-04-22T08:46:32.850
> 
> 标签：c#, string, char

在匹配某个名称之前，如何删除字符串中的所有字符？例如，我有以下字符串：

```
"C:\\Installer\\Installer\\bin\\Debug\\App_Data\\Mono\\etc\\mono\\2.0\\machine.config" 
```

如何删除字符串“ `App_Data`”之前的所有字符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T08:48:21.503

```
var str = @"C:\Installer\Installer\bin\Debug\App_Data\Mono\etc\mono\2.0\machine.config";

var result = str.Substring(str.IndexOf("App_Data"));

Console.WriteLine(result); 
```

印刷：

```
App_Data\Mono\etc\mono\2.0\machine.config 
```

好吧，这样做的一种奇特方式是尝试使用独立于平台的类[Path](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)，它旨在处理文件和目录路径操作。在您的简单情况下，第一个解决方案在许多因素上都更好，并且仅将下一个解决方案作为示例：

```
var result = str.Split(Path.DirectorySeparatorChar)
                .SkipWhile(directory => directory != "App_Data")
                .Aggregate((path, directory) => Path.Combine(path, directory));

Console.WriteLine(result); // will print the same 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:53:54.957

或实现为扩展方法：

```
public static class Extension
{
    public static string TrimBefore(this string me, string expression)
    {
        int index = me.IndexOf(expression);
        if (index < 0)
            return null;
        else
            return me.Substring(index);
    }
} 
```

并像这样使用它：

```
string trimmed = "i want to talk about programming".TrimBefore("talk"); 
```

# javascript - sencha 在按钮的选项卡上显示不同的视图

> ID：16142871
> 
> 赞同：2
> 
> 时间：2013-04-22T08:46:55.903
> 
> 标签：javascript, extjs, sencha-touch, sencha-touch-2

我在 sencha touch 2 中创建了一个索引页面，其中我在容器内创建了一些自定义按钮

```
Ext.define('ov_app.view.Main', {
extend: 'Ext.Container',
requires:[
    'ov_app.view.Eligibelity',
],
xtype: 'main',
css:[{
            "path": "default-theme.css",
    }],
config:{
    scrollable: true,
    items: [
        {           xtype: 'panel',
                    margin:10,
                    items:[
                        {
                            xtype:'button',
                            margin: '0 0 8 0',
                            cls:"main_navigation",
                            style:'background-color:#000',
                            action: 'push-view',
                        },{
                            xtype:'button',
                            margin: '0 0 8 0',
                            cls:"main_navigation",
                        },{
                            xtype:'button',
                            cls:"main_navigation",
                        }
                    ]
           }]
    }
}); 
```

这些按钮看起来像这样

![在此处输入图像描述](https://i.stack.imgur.com/hQKRS.png)

单击橙色按钮时，我想显示一个新视图。

我已经尝试过 ext.Navigation 视图，但这不是我想要的。我是否必须向按钮添加事件侦听器或者我必须做其他事情请建议

我在控制器文件夹 main.js 中创建了一个新控制器

```
Ext.define('ov_app.controller.Main', {
extend: 'Ext.app.Controller',
    config:{
        control: {
            'button[action=push-view]': {
                tap: 'pushViewFunction'
            }
        },
    },

pushViewFunction: function() {
    Ext.Viewport.add({
        xtype: 'Eligibelity' 
    });
}
}); 
```

和我的新视图 Eligibelity.js 代码

```
`
Ext.define('ov_app.view.Eligibelity', {
    xtype : 'Eligibelity',

    config: {
        layout: 'vbox',
        cls: 'big',

        items: [
            {
                xtype: 'title',
                title: 'Twitter Search'
            }
        ]
    }
    }); 
```

` 还有我的 app.js 代码

` Ext.Loader.setPath({ 'Ext': 'touch/src', 'ov_app': 'app' });

```
 Ext.application({
        name: 'ov_app',

        requires: [
        'Ext.MessageBox'
    ],

views: ['Main', 'Eligibelity'],
controllers: ['Main'],

launch: function() {
    // Destroy the #appLoadingIndicator element
    Ext.fly('appLoadingIndicator').destroy();

    // Initialize the main view
    Ext.Viewport.add(Ext.create('ov_app.view.Main'));
},

onUpdated: function() {
    Ext.Msg.confirm(
        "Application Update",
        "This application has just successfully been updated to the latest version.     Reload now?",
        function(buttonId) {
            if (buttonId === 'yes') {
                window.location.reload();
            }
        }
    );
}
}); 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T06:05:59.110

您可以将一个添加`action`到您的按钮以供参考：

```
{
    xtype: 'button',
    action: 'push-view'
} 
```

然后在您的控制器中，您可以在用户点击按钮时推送新视图，如下所示：

```
control: {
   'button[action=push-view]': {
        tap: 'pushViewFunction'
    }
},

pushViewFunction: function() {
     Ext.Viewport.add({
         xtype: 'newView' // This is the xtype of new view you want to push 
     });
} 
```

* * *

**编辑**

你需要把你的`control`内部`config`块：

```
config: {    
    control: {
       'button[action=push-view]': {
            tap: 'pushViewFunction'
        }
    }
},

pushViewFunction: function() {
     Ext.Viewport.add({
         xtype: 'newView' // This is the xtype of new view you want to push 
     });
} 
```

* * *

**编辑2：**

您可以使用`setActiveItem`或`animateActiveItem`：

```
 pushViewFunction: function() {
    Ext.Viewport.animateActiveItem({xtype: 'Eligibelity'}, {type:'slide', direction: 'left'});
} 
```

这是`**[Working Demo](http://www.senchafiddle.com/#lscTr)**`基于您所有发布的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:18:42.137

在按钮上，您必须添加这样的处理程序：

```
{
xtype:'button',
cls:"main_navigation",
handler: function() {
        Ext.create( 'Ext.window.Window', {
           title: 'Works',
           height: 300,
           width: 300,
           html: 'Create whatever view you want.'
        } ).show();
    }
} 
```

您想在单击按钮时创建什么视图？

编辑：添加`show()`以显示窗口。但是你可以在那里做任何动作。

# wsman - 如何创建 CIM 提供程序

> ID：16142872
> 
> 赞同：2
> 
> 时间：2013-04-22T08:46:56.657
> 
> 标签：wsman, openwsman

1.  有为软件更新配置文件实现 CIM 提供程序的教程吗？
2.  我想了解 openwsman.conf 文件中的 vendor_namespaces。
3.  如果我们创建了一个新的配置文件，如何创建模式，它在哪里保存？.. 4 如果我们使用现有的配置文件，需要创建新的模式吗？
4.  请描述为（DSP1025、DSP1033、DSP1034、DSP1039、软件更新）开发新 CIM 项目的步骤。我想为此开发一个新的 CIM 提供程序。它是如何实现的呢？

5.  此配置文件的示例肥皂请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-19T11:16:15.370

我得到了一些有用的链接来实现它。

我曾使用 sblim 开发包来实现新的提供者。在 opensman 配置文件中，我们可以指定供应商名称。

参考样品提供者可用， [http://sblim.cvs.sourceforge.net/viewvc/sblim/](http://sblim.cvs.sourceforge.net/viewvc/sblim/)

请查看示例提供者， [https://github.com/georgooty/GK_SampleProvider](https://github.com/georgooty/GK_SampleProvider)

# javascript - onkeypress 和 charCode 的 Firefox 问题

> ID：16142874
> 
> 赞同：1
> 
> 时间：2013-04-22T08:47:02.350
> 
> 标签：javascript, firefox

我试图限制用户在文本框中只输入数字

```
<input type="text" name="pQ[]" onkeypress=" return checkKeyVal(event)"/>

function checkKeyVal(ev)
{
    if(ev.keyCode)
    {
        if(ev.keyCode<48 || ev.keyCode>57)
        {
            return false;
        }
    }
    else
    { 
        //For Firefox
        if(ev.charCode<48 || ev.charCode>57)
        {
            return false;
        }
    }
} 
```

我发现 keyCode 不能在 firefox 中工作，所以我添加了 charCode。现在的问题是，退格键、删除键和箭头键等其他键似乎在 Firefox 中都不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T09:50:58.643

您构建逻辑的方式是错误的。首先让我们看一下以下字符的 ascii 代码：

后退空间：10

删除：127

现在对于箭头键，这取决于您使用的操作系统和编程语言。本身没有“ASCII码”。操作系统检测到您按下箭头键并触发程序可以捕获的事件。

因此，此类键的信号的正常表如下所示：

```
 Normal Mode            Num lock on
                 Make    Break        Make          Break
Down arrow       E0 50   E0 D0     E0 2A E0 50   E0 D0 E0 AA
Left arrow       E0 4B   E0 CB     E0 2A E0 4B   E0 CB E0 AA
Right arrow      E0 4D   E0 CD     E0 2A E0 4D   E0 CD E0 AA
Up arrow         E0 48   E0 C8     E0 2A E0 48   E0 C8 E0 AA 
```

但是，对于使用 javascript ，通常我们使用：

```
left arrow: 37 
up arrow: 38
right arrow: 39
down arrow: 40 
```

现在这些是浏览器中的 event.keyCode，而不是 ASCII 码。参考：这个[网址。](http://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent)

让我们看看你的逻辑，

```
if(ev.keyCode<48 || ev.keyCode>57)
        {
            return false;
        } 
```

所以，退格（10），左箭头（37），上箭头（38），右箭头（39），下箭头（40）小于48，删除（127）大于57。

因此，一旦按下这些键，它们将返回 false，因此您将永远不会在 UI 中看到它们进行按键操作。所以你需要做的是改变你的条件，这样对于那些按键，你就会得到真实的。

**笔记 ：**

您可能可以使用此代码，我通常将其用于 java 脚本目的：

```
function isNumber(event){
  var charCode = (event.which) ? event.which : event.keyCode;
  if (charCode > 31 && (charCode < 48 || charCode > 57))
   return false;
 return true;
} 
```

我已经在 IE 7、8、MF 和 chrome 中测试了这只小狗。似乎在任何地方都能无缝工作。但是，如果您想为自己明确记录一些按键事件，请在 google 中查找事件代码，然后阻止/取消阻止它。干杯！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:07:10.890

问题是您正在使用`keypress`事件，切换到`keyup`或`keydown`。然后`keyCode`也将开始在 Firefox 中为您工作。看看这篇[Quirksmode 文章](http://www.quirksmode.org/js/keys.html)，了解更多关于带有按键检测的浏览器行为的信息。

```
<input type="text" name="pQ[]" onkeyup="return checkKeyVal(event)"/> 
```

# python - 如何在python中将变量导入不同的文件

> ID：16142875
> 
> 赞同：-1
> 
> 时间：2013-04-22T08:47:03.540
> 
> 标签：python

我是 python 脚本的新手。

我有 3 个文件。

1.  一个.py
2.  b.py
3.  py

在文件中：

*   a.py：使所有变量减速

*   b.py ：我正在导入 a.py 以使用 a.py 中声明的变量，例如`import a`

*   c.py：我需要使用初始化变量。我导入了 a.py 。但我无法使用那些定义的变量。

谁能告诉我如何使用 c.py 中的变量。

a.py：声明

```
Variable_a = ' ' 
```

b.py：

```
import a
Variable_a = "value" 
```

`Variable_a`如何在 c.py中使用上述值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:54:03.450

一个.py

```
x=10 
```

b.py

```
from a import x
print x 
```

***更新..***

一个.py

```
x=10
y=20
z=30 
```

b.py

```
import a
print a.x
print a.y
print a.z 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:05:30.933

一个.py

```
x = 10 
```

b.py

```
import a
x = 110 
```

py

```
import b

import b

x = 3
print "b.a.x",b.a.x
print "b.x  ",b.x
print 'x    ',x 
```

c.py 的输出

```
b.a.x 10
b.x   110
x     3 
```

如您所见，
各种变量的值是不同的。

使用您需要使用的名称。此外，`from .. import ..`如果您愿意，也可以使用该语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T08:51:29.827

如果你想`variable_a`在 c.py 中使用，

```
from b import variable_a
print variable_a 
```

或者，

```
import b
print b.variable_a
#mention the variable as b.variable_a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-18T09:27:01.467

当您导入`a`并想要访问`a`属性时，您应该编写`a.attrName`。如果您想从外部访问`Variable_a`，`b`您`a.attrName`应该替换`import a`为`from a import Variable_a` and in 等等。看这个例子：

一个.py

```
Variable_a = ' ' 
```

b.py

```
from a import Variable_a
Variable_a = "value" 
```

py

```
from b import Variable_a
print Variable_a # Should print 'value' 
```

# android - ICS AOSP 中单个应用程序（电话、联系人）的 UI 修改

> ID：16142877
> 
> 赞同：6
> 
> 时间：2013-04-22T08:47:08.413
> 
> 标签：android, android-source

我已经成功修改了 AOSP 的几个应用程序（启动器、短信、画廊、电子邮件、日历），但我在修改`Phone,Contacts`应用程序时遇到了问题。

我已经通过以下步骤来修改`Launcher,SMS,Gallery,Email,Calendar`应用程序：

1.  我已经下载了 ICS AOSP 并在 eclipse 中导入了单个应用程序。
2.  我已将包名.ie 更改`com.android.launcher2`为`com.test.launcher2`
3.  之后`Step 1`，`Step 2`由于缺少框架类，我在单个应用程序中遇到错误。我通过在我的应用程序中导入那些缺少的类来解决它们。
4.  我已经修改了我的应用程序的 UI。
5.  我已经在模拟器上运行了应用程序。它工作正常。

现在，我在修改联系人、电话应用程序时遇到了问题`Step 3`：

-> 当我在我的应用程序中导入缺少的框架类时`java.*`，`javax.*`控制台会通过以下错误通知我`Ill-advised or mistaken usage of a core class (java.* or javax.*) when not building a core library.`

-> 为了克服这些问题，我尝试包含一些在`Android.mk`文件中指定并在构建下载的 AOSP (ICS) 时生成的 jar 库。但这并没有解决我的问题。

-> 我猜`com.android.phone.common`jar 文件可能会解决这个问题，但我无法解决它，因为我怀疑我从构建中获得的那个文件中缺少类。所以几天以来我一直试图在互联网上找到它，但我不能找不到。所以**如果有人有这个 jar 文件的完整（工作）版本，请分享它**。

**注意：**我的开发机器有 Windows 7。我的短期目标是修改联系人、电话应用程序的 UI 并运行它。

**编辑：** Buildpath 的截图 ![在此处输入图像描述](https://i.stack.imgur.com/AYaAK.png) ![在此处输入图像描述](https://i.stack.imgur.com/jvygF.png)

**编辑**将 TimSort.java 放入默认包后，

![在此处输入图像描述](https://i.stack.imgur.com/CXLIg.png)

我已经在 github 演示中描述了这一步，还说“当我导入 TimSort.java 时，它会尝试访问 Arrays.java 类的一些隐藏方法，所以我需要导入那个类”。这个错误是我创建 java 的原因.util 包以包含 Arrays.java 类。否则我很高兴只导入 TimSort.java.by 顺便`comment`说一下，在屏幕截图中我们可以看到它特别说明了接下来的 2 种方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-26T06:19:55.463

正如我在上一条评论中所说，主要问题是您包含了 java.* 和 javax.*，它们已经存在于 android.jar 中。因此，构建者认为您正在构建核心库，而您却没有。

我只是删除了您项目中的 java.util.* 包。并且没有错误。android.jar 已经包含了很多包，包括 java.xxx 和 javax.xxx。如果确实缺少需要使用的 Java 核心库，请尝试重构。

![Eclipse 快照](https://i.stack.imgur.com/5KyVS.jpg)

我检查了 Android 源，dx 将首先通过调用检查您的源名称：

```
private static void checkClassName(String name) {
    boolean bogus = false;

    if (name.startsWith("java/")) {
        bogus = true;
    } else if (name.startsWith("javax/")) {
        int slashAt = name.indexOf('/', 6);
        if (slashAt == -1) {
            // Top-level javax classes are verboten.
            bogus = true;
        } else {
            String pkg = name.substring(6, slashAt);
            bogus = (Arrays.binarySearch(JAVAX_CORE, pkg) >= 0);
        }
    }

    if (! bogus) {
        return;
    }

    /*
     * The user is probably trying to include an entire desktop
     * core library in a misguided attempt to get their application
     * working. Try to help them understand what's happening.
     */

    DxConsole.err.println("\ntrouble processing \"" + name + "\":\n\n" +
            IN_RE_CORE_CLASSES);
    errors++;
    throw new StopProcessing();
} 
```

这`IN_RE_CORE_CLASSES`是您在控制台中看到的错误字符串。这就解释了为什么它显示该错误。

更新：

添加 TimSort.java 后的屏幕截图。

![添加 TimSort.java 后的截图](https://i.stack.imgur.com/Gxp4e.jpg)

# java - Android AlarmManager 不启动 Activity

> ID：16142878
> 
> 赞同：2
> 
> 时间：2013-04-22T08:47:08.883
> 
> 标签：java, android, service, alarmmanager

我的源代码中内置了 2 个 AlarmManager 实例 - 其中第 2 个实例应该在字符串指定的时间启动 Activity：时间。textview 显示字符串的正确时间： time 但是它似乎从未启动第二个 AlarmManager 的 Activity (KillTimer.java)，我不知道为什么。我确定我忽略了一些简单的事情，但我不确定它可能是什么。

附言

我认为这可能与我实现时间字符串的方式有关——但我真的不确定。

时间字符串应表示可以在以下行中乘以 1000：

时间！=空？1000：0，品脱2）；

但是，源代码永远不会识别它，并且警报永远不会像我添加时间字符串之前那样唤醒活动。

代码片段：（不会使用字符串值启动的警报：时间）

```
 // Start 2nd service using AlarmManager

    Intent intent2 = new Intent(Rules.this, KillTimer.class);
    PendingIntent pintent2 = PendingIntent.getActivity(Rules.this, 0, intent2,
            0);
    AlarmManager alarm2 = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    alarm2.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
            (time != null ? 1000 : 0), pintent2); 
```

完整来源：

```
public class Rules extends Activity {
    private String password;
    private  PendingIntent mPendingIntent;
    String TIMELIMIT = "10";

TextView textSsid, textSpeed, textRssi, Time;
//Notification message ID
private static final int NOTIFY_ME_ID=1337;

private int count=0;
private NotificationManager notifyMgr=null;
    public Handler mHandler = new Handler();
    public long mStartRX = 0;
    public long mStartTX = 0;
    public long txBytes;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.rules);

    String NDEF_PREF = "prefs";
    SharedPreferences prefs = getSharedPreferences(NDEF_PREF, Context.MODE_PRIVATE); 
    String name = prefs.getString("name", ""); 
    String code = prefs.getString("corename", "");

    String time = prefs.getString("time", "");
    String ssid = prefs.getString("restricted", "");
    Time = (TextView) findViewById(R.id.Time);
    Time.setText(time);

   Parse.initialize(this, "7gjqmUcoqu1IZPJSSxXLdE4L8efAugCXA7snLSH6", "5NckF83MUBumQ8L8zL7Akc4p07beMRnmvgCfhZdH");

    ParseUser.enableAutomaticUser();
    ParseACL defaultACL = new ParseACL();

    defaultACL.setPublicReadAccess(true);

    ParseACL.setDefaultACL(defaultACL, true);

textSsid = (TextView) findViewById(R.id.Ssid);
textSpeed = (TextView) findViewById(R.id.Speed);
textRssi = (TextView) findViewById(R.id.Rssi);
Time = (TextView) findViewById(R.id.Time);
Long.toString(mStartTX);
Long.toString(mStartRX);
Long.toString(txBytes);    
ParseAnalytics.trackAppOpened(getIntent());

mStartRX = TrafficStats.getTotalRxBytes();
mStartTX = TrafficStats.getTotalTxBytes();
if (mStartRX == TrafficStats.UNSUPPORTED || mStartTX == TrafficStats.UNSUPPORTED) {
    AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setTitle("Uh Oh!");
    alert.setMessage("Your device does not support traffic stat monitoring.");
    alert.show();
} else {
    mHandler.postDelayed(mRunnable, 1000);
}

}

private final Runnable mRunnable = new Runnable() {
public void run() {
    TextView RX = (TextView)findViewById(R.id.RX);      TextView TX = (TextView)findViewById(R.id.TX);

        long rxBytes = TrafficStats.getTotalRxBytes()- mStartRX;
        RX.setText(Long.toString(rxBytes));
        long txBytes = TrafficStats.getTotalTxBytes()- mStartTX;
        TX.setText(Long.toString(txBytes));
        mHandler.postDelayed(mRunnable, 1000);

        final Chronometer myChronometer = (Chronometer)findViewById(R.id.chronometer);
        myChronometer.start();

        DisplayWifiState();
        this.registerReceiver(this.myWifiReceiver, new IntentFilter(
                ConnectivityManager.CONNECTIVITY_ACTION));

    }

    private void registerReceiver(BroadcastReceiver myWifiReceiver2,
            IntentFilter intentFilter) {
        // TODO Auto-generated method stub

    }

    private BroadcastReceiver myWifiReceiver = new BroadcastReceiver() {

        @Override
        public void onReceive(Context arg0, Intent arg1) {
            // TODO Auto-generated method stub
            NetworkInfo networkInfo = (NetworkInfo) arg1
                    .getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
            if (networkInfo.getType() == ConnectivityManager.TYPE_WIFI) {
                DisplayWifiState();
            }
        }
    };

    public void DisplayWifiState() {

        ConnectivityManager myConnManager = (ConnectivityManager) getSystemService(CONNECTIVITY_SERVICE);
        NetworkInfo myNetworkInfo = myConnManager
                .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        WifiManager myWifiManager = (WifiManager) getSystemService(Context.WIFI_SERVICE);
        WifiInfo myWifiInfo = myWifiManager.getConnectionInfo();

        if (myNetworkInfo.isConnected()) {

            textSsid.setText(myWifiInfo.getSSID());

            textSpeed.setText(String.valueOf(myWifiInfo.getLinkSpeed()) + " "
                    + WifiInfo.LINK_SPEED_UNITS);
            textRssi.setText(String.valueOf(myWifiInfo.getRssi()));
        } else {
            textSsid.setText("---");

            textSpeed.setText("---");
            textRssi.setText("---");
        };

    // Start service using AlarmManager

        Calendar cal = Calendar.getInstance();
        cal.add(Calendar.SECOND, 10);
        Intent intent = new Intent(Rules.this, LMW.class);
        PendingIntent pintent = PendingIntent.getService(Rules.this, 0, intent,
                0);
        AlarmManager alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        alarm.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                7 * 1000, pintent);

        String NDEF_PREF = "prefs";
        SharedPreferences prefs = getSharedPreferences(NDEF_PREF, Context.MODE_PRIVATE); 
        String name = prefs.getString("name", ""); 
        String code = prefs.getString("corename", "");
        String time = prefs.getString("time", "");
        String ssid = prefs.getString("restricted", "");

        //String time = String.valueOf(time);

        // Start 2nd service using AlarmManager

        Intent intent2 = new Intent(Rules.this, KillTimer.class);
        PendingIntent pintent2 = PendingIntent.getActivity(Rules.this, 0, intent2,
                0);
        AlarmManager alarm2 = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
        alarm2.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
                (time != null ? 1000 : 0), pintent2);   

    // click listener for the button to start service
    Button btnStart = (Button) findViewById(R.id.button1);
    btnStart.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            startService(new Intent(getBaseContext(), LMW.class));            
            Intent startMain = new Intent(Intent.ACTION_MAIN);
            startMain.addCategory(Intent.CATEGORY_HOME);
            startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(startMain);

        }        

});

    // click listener for the button to stop service
    Button btnStop = (Button) findViewById(R.id.button2);
    btnStop.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            stopService(new Intent(getBaseContext(), LMW.class));
            Intent startMain = new Intent(Intent.ACTION_MAIN);
            startMain.addCategory(Intent.CATEGORY_HOME);
            startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(startMain);

        }
    });

}};} 
```

杀手计时器

```
public class KillTimer extends Activity {

    @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.killtimer);
      Toast.makeText(getApplicationContext(), "KillWifi Running!", Toast.LENGTH_SHORT).show();
      WifiManager wifiManager = (WifiManager) getApplicationContext().getSystemService(Context.WIFI_SERVICE);
      int networkId = wifiManager.getConnectionInfo().getNetworkId();
      wifiManager.removeNetwork(networkId );
      wifiManager.saveConfiguration();

  }} 
```

广播接收源：

```
import java.util.List;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.net.wifi.ScanResult;
import android.net.wifi.WifiConfiguration;
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class StartKillTimerReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        startActivity(context, KillTimer.class);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:05:19.723

```
PendingIntent.getActivity 
```

应该

```
PendingIntent.getService 
```

不用解释，我想你明白这里的区别，它有点直截了当！

编辑：

如果你想从一个开始`Activity`，`AlarmManager`你应该创建一个`BroadcastReceiver`并使用方法`PendingIntent.getBroadcast`。然后在你的里面`Receiver`你应该打电话`startActivity(context, KillTimer.class);`

实施`Receiver`. 您还需要将 添加`Receiver`到您的`Manifest`中，例如：`<receiver android:name=".StartKillTimerReceiver" />`

```
public class StartKillTimerReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        context.startActivity(context, KillTimer.class);
    }
} 
```

请记住，这`Receiver`只有一项工作要做，那就是启动您的`KillTimer`. 现在，及时创建一个`Receiver`可以做多种事情的人会更好。因此，如果您想开始不同的活动或其他任何活动，您还应该使用`Intent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-02T14:32:26.617

假设您有一个广播接收器不时触发自身..

1.  在启动 Intent 之前，您需要所有适当的标志，如下所示：

    ```
     Intent i = new Intent(Intent.ACTION_MAIN);
     i.setComponent(new ComponentName(this, Ring.class));
     i.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP |
             Intent.FLAG_ACTIVITY_NEW_TASK |
             Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
     startActivity(i); 
    ```

2.  在 Manifest.xml 中声明权限：

    ```
     <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"/> 
    ```

3.请求许可（最好在开始活动中）

3.1 声明请求代码

```
public static int OVERLAY_PERMISSION_REQUEST_CODE = 3249; 
```

3.2 询问/检查权限

```
 new AlertDialog.Builder(this)
                    .setTitle("Display On Top permission")
                    .setMessage("Please grant the \"Display On Top\" permission.")
                    .setPositiveButton("Grant", new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialogInterface, int i) {
                            //Prompt the user once explanation has been shown
                            Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION,
                                    Uri.parse("package:" + getPackageName()));
                            startActivityForResult(intent, OVERLAY_PERMISSION_REQUEST_CODE);
                        }
                    })
                    .create()
                    .show(); 
```

3.3 权限回调

```
 @TargetApi(Build.VERSION_CODES.M)
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == OVERLAY_PERMISSION_REQUEST_CODE) {
        if (!Settings.canDrawOverlays(this)) {
            // You don't have permission
            checkPermission();
        } else {
            // Do as per your logic
        }

    }

} 
```

# android - 无法向 BroadcastReceiver 发送意图

> ID：16142880
> 
> 赞同：0
> 
> 时间：2013-04-22T08:47:13.983
> 
> 标签：android, broadcastreceiver

我的搜索没有让我找到任何解决方案，也许更简单的东西让我的代码无法正常工作。

我的活动 javapage 在 OnCreate 中包含此内容：

```
Intent MyCountryCodeIntent = new Intent(this,OutgoingCallReceiver.class);
MyCountryCode = "01";
MyCountryCodeIntent.putExtra("code",MyCountryCode); 
```

即使我设置`startActivity(MyCountryCodeIntent);`或`sendBroadcast(MyCountryCodeIntent);` 这个应用程序挂起

我的 OutgoingCallReceiver.class 页面在 onReceive 中包含此内容：

```
 Bundle bundle = intent.getExtras();
 if(null == bundle) return;
 String MyCountryCodeIntent=intent.getStringExtra("code"); 
```

也许出了点问题，但我不知道是什么..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:55:11.730

您必须像这样通过 Intent 捕获 Intent

```
Intent getextras=getIntent(); 
```

比你必须获得特定类型的意图，比如如果你从以前的活动中发送了一个字符串，你将不得不像这样捕获字符串类型的意图

```
String s= getextras.getStringExtra(name); 
```

同样地

```
Bundle b = getextras.getBundleExtra(bundle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:55:38.527

`sendBroadcast`方法应该用于调用`BroadcastReceiver`

下面的片段会帮助你。

```
Intent MyCountryCodeIntent = new Intent("com.get.broadcast");
MyCountryCodeIntent.putExtra("code","01");
sendBroadcast(MyCountryCodeIntent); 
```

你应该注册`OutgoingCallReceiver`行动`com.get.broadcast`

```
IntentFilter filter = new IntentFilter();
filter.addAction("com.get.broadcast");
registerReceiver(new OutgoingCallReceiver(),filter); 
```

在 onReceive 中，您将能够使用该值。

您应该阅读以下帖子以获取更多详细信息。

[http://mobisys.in/blog/2012/01/android-sending-receiving-broadcast-messages/](http://mobisys.in/blog/2012/01/android-sending-receiving-broadcast-messages/)

# c# - 强制执行数据库接口中定义的所有方法的测试方法

> ID：16142883
> 
> 赞同：1
> 
> 时间：2013-04-22T08:47:23.220
> 
> 标签：c#, .net, unit-testing, design-patterns, visual-studio-2012

我正在设计一个能够将 DataSource 从 SQL 更改为 Oracle 和 SQLite 的解决方案。

为此，我使用 Unity 框架来实现延迟绑定。

我创建了一个接口并将所有数据库方法签名写入其中。

现在我正在为每个数据源编写单独的类（项目）并实现这个接口。

我现在想要的是创建一个测试项目，它应该确保接口中定义的所有方法都必须在测试项目中采用，这个测试项目有单独的测试数据库

是否有任何框架/模式可用于自动强制创建测试方法。

如果有人提供在方法上编写 [TestMethod] 属性（实现接口时）并将返回类型更改为 Void ，我认为这就足够了。

我真正想要的是实现一个测试项目，该项目应该强制为数据库层接口中定义的所有签名创建测试方法。

我使用 VS 2012 作为开发环境。

如果我没有任何现成的解决方案，我如何使用反射来实现方法来测试项目并在设计时更改其签名。（这是奇怪的要求吗？）

如果需要更多详细信息，请告诉我。

欢迎提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:12:59.320

我不知道这里有任何特定的模式，但我为这种情况做的是：

1.  将接口所在的项目引用到测试项目中
2.  在 CRUDProviderMock.cs 或类似的东西中实现接口
3.  使用模拟类进行测试

我相信我不是唯一这样做的人，因为我看到许多公司都在应用这种做法。

示例项目在这里： [https ://databaselayertesting.codeplex.com/](https://databaselayertesting.codeplex.com/)

示例项目使用[存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)和[NUnit 框架](http://www.nunit.org/)进行测试，其中：

1.  IRepository 是数据库的 CRUD 接口
2.  EntityOne 是示例数据库实体
3.  EntityOneRepositoryMock 是使用列表的模拟 IRepository 实现

您可以使用示例数据库而不是列表来模拟真实的数据库行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-09T22:16:41.507

我确实意识到这个问题很老了，我的解决方案既不针对 VS2012，也不针对 NUnit 早期版本的限制。但是，我发现您的问题与现代环境中的其他问题完全相同。我也偶然发现了这一点，并找到了一个合适的解决方案，我认为可能适合其他人或我未来的自己，来满足您的要求：

> 我现在想要的是创建一个测试项目，它应该确保必须采用接口中定义的所有方法......
> 
> 是否有任何框架/模式可用于自动强制创建测试方法。

通过`TestCaseSource`与适配器模式结合使用，我能够强制接口的任何后续更改都将使程序员也必须更新测试。反对使用反射的好处在于，这会给您带来早期的编译时错误，并且通过运行特定的测试更容易追踪测试错误。

下面的代码非常示意性。我自己的用途是将它与特定数据的模拟结合起来，`testObject`并验证是否总是抛出一些特定的异常。限制是`testObject`共享的设置，因此最适合更简单的场景。

测试代码：

```
[TestFixture()]
public class SpecificDatabaseTest : IDatabase
{
    private SpecificDatabase testObject = new SpecificDatabase();
    private object TestObject = new object();
    private SomeObject TestSomeObject1 = new SomeObject();
    private SomeObject TestSomeObject2 = new SomeObject();

    public IEnumerable<TestCaseData> SomeMethodData
    {
        get
        {
            yield return new TestCaseData(TestObject).Returns(TestObject);    
        }
    }

    public IEnumerable<TestCaseData> SomeOtherMethodData
    {
        get
        {
            yield return new TestCaseData(TestSomeObject1, TestSomeObject2).Returns(TestSomeObject2);
            yield return new TestCaseData(TestSomeObject2, TestSomeObject1).Returns(TestSomeObject1);
        }
    }

    [Test, TestCaseSource(nameof(SomeMethodData))]
    public object SomeMethod(object data)
    {
        return testObject.SomeMethod(data);
    }

    [Test, TestCaseSource(nameof(SomeOtherMethodData))]
    public SomeObject SomeOtherMethod(SomeObject data1, SomeObject data2)
    {
        return testObject.SomeOtherMethod(data1, data2);
    }
} 
```

其他代码：

```
public interface IDatabase
{
    object SomeMethod(object data);

    SomeObject SomeOtherMethod(SomeObject data1, SomeObject data2);
}

public class SpecificDatabase : IDatabase
{
    public object SomeMethod(object data)
    {
        return data;
    }

    public SomeObject SomeOtherMethod(SomeObject data1, SomeObject data2)
    {
        return data2;
    }
}

public class SomeObject { } 
```

# jquery - select2：使用 AJAX 进行多选时的默认选择

> ID：16142884
> 
> 赞同：25
> 
> 时间：2013-04-22T08:47:23.433
> 
> 标签：jquery, jquery-select2

我正在使用很棒的[select2](http://ivaynberg.github.io/select2/)创建多选组合。

我想以编程方式选择默认值（如用户之前所做的选择），但我不知道如何。我读到使用 initSelection 可以解决问题，但是在创建组合时会调用它，我不希望始终执行此默认选择。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-12-18T07:49:29.503

4.x 版中的正确解决方案，例如：

```
$('#element').val(['val1','val2']).trigger('change'); 
```

请参阅：[创建者说明](https://github.com/select2/select2/issues/3655#issuecomment-128704060)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-22T14:22:12.393

I found some solutions, maybe that will help you:

```
$('#el').select2({...}) // init select2

var defaultData = [{id:1, text:'Item1'},{id:2,text:'Item2'},{id:3,text:'Item3'}];

$('#el').data().select2.updateSelection(defaultData); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T08:59:49.357

从文档页面：

" **val** - 获取或设置选择。如果没有指定value参数，则返回当前选择元素的id属性。如果指定了value参数，它将成为当前选择。"

另外，从文档中：

```
$("#e8").select2("val", "CA"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-25T18:07:50.847

[如此处](https://select2.github.io/examples.html#data-ajax)文档中所述，您可以简单地将“选项”添加到您的选择标记中，以预先选择初始默认值。

```
<select class="js-data-example-ajax">
  <option value="3620194" selected="selected">select2/select2</option>
</select> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-09T17:46:59.690

`$('#el').select2().val(['val1','val2']).trigger("change")`

可以解决问题，但由于某些原因，它消除了添加您自己的标签的能力......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-13T11:56:59.787

以下代码工作正常，但`select2`需要刷新

```
$('#el').data().select2.updateSelection(defaultData); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-08T10:40:32.407

扩展@sanj的答案。这似乎在我的项目中为我工作。

**通过 HTML**

HTML

```
<select class="select2" style='width:100%;' multiple>
    <option val=''>Please choose</option>
    <option val="1" selected>One</option>
    <option val="2" selected>Two</option>
    <option val="3">Three</option>
</select> 
```

JS

```
$('.select2').select2(); 
```

结果 [![在此处输入图像描述](https://i.stack.imgur.com/vYpG5.png)](https://i.stack.imgur.com/vYpG5.png)

**通过 Javascript**

HTML

```
<select class="select2" style='width:100%;' multiple>
    <option val=''>Please choose</option>
    <option val="1">One</option>
    <option val="2">Two</option>
    <option val="3">Three</option>
</select> 
```

JS

```
$('.select2').select2();
var defaultData = [{id:1, text:'One'},{id:2,text:'Two'}];
$('.select2').data().select2.updateSelection(defaultData); 
```

结果 [![在此处输入图像描述](https://i.stack.imgur.com/gKC11.png)](https://i.stack.imgur.com/gKC11.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-09T14:36:42.840

```
<select class="form-control" id="selectid" name="selectid"></select>
```

```
$('#selectid').select2({
placeholder: 'Please Search with ID',
ajax: {
url: '/getData.php',
dataType: 'json',
delay: 250,
processResults: function (data) {
    return {
        results: data
    };
},
cache: true
}
});
```

```
var id    = "idvalue";
var text  = "Text String";
if(id !== null && id !== ''){
    var studentSelect = $('#selectid');
    $.ajax({
        type: 'GET',
        url: '/getData.php'
    }).then(function (data) {
        var option = new Option(id, text, true, true);
        studentSelect.append(option).trigger('change');
        studentSelect.trigger({
            type: 'select2:select',
            params: {
                data: data
            }
        });
    });
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-03-30T10:26:18.943

终于想通了！！`<option>`Select2遍历`<select>`.

```
<select class="js-data-example-ajax" style="width:100%">
  <option value="3620194" selected="selected">Put the pre-selected options here</option>
</select> 
```

的内部 html`<option>`被放入 text 键下的 repo 对象中。所以`repo.text`会给innerhtml。也就是说，我们所要做的就是提供init`repo.text`中的`formatSelection`选项。此外，从 servlet（控制器）传递的 json 应该将所需的标签文本放在`text`键下！！仍在研究如何为创建的 li 元素添加属性，以便我可以保存更改后的列表。有任何想法吗？

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-12T18:12:19.317

我遍历了一组值，然后将每个匹配的选项设置为 ("selected",true)

```
values = [2, 5, 3]

for val in values
  $("#selects_id option[value="+val+"]").prop("selected",true).trigger("change") 
```

您还可以处理从 Ajax 调用获得的结果。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-07-14T06:00:01.340

您可以在此处找到解决方案，其中包含使用 JQuery Select2的自动完成、[多选下拉列表。](http://www.encodedna.com/2013/07/multiple-selection-using-select2-jquery.htm)

将数据与 HTML“select”元素绑定，然后由“Select2”函数接管，将其转换为漂亮的多选下拉列表。

使用 AJax 可能会表现良好，并且肯定会在未来几天内尝试。

# c# - updatepanel 中的工具导致完整的回发 asp.net c#

> ID：16142885
> 
> 赞同：0
> 
> 时间：2013-04-22T08:47:30.730
> 
> 标签：c#, asp.net, triggers, postback, html-select

我的在线订单有问题，我已将所有下拉列表和按钮放在更新面板中，但是当我在下拉列表中选择某些内容或按下按钮时，整个页面发回...请帮助我！这是我的代码：` <%----%>            

```
 <strong><asp:ImageButton 
                                ID="btnExcel0" runat="server" AlternateText="Export to Excel" Height="30px" 
                                ImageUrl="/images/excel_icon1.png" onclick="btnExcel_Click" TabIndex="14" />
                            </strong>&nbsp; &nbsp;&nbsp;
                             <input type="image" runat ="server" id ="Image1" src ="/images/images.jpg" onclick="javascript:CallPrint('divPivot1')" title="Print" />

                            <br />
                            <div id= "divPivot1">
                            <asp:GridView ID="OrderGridView" runat="server" AllowPaging="True" 
                                BorderStyle="None" CellPadding="3" DataKeyNames="Article" 
                                EmptyDataText="&quot;No product added...&quot;" Font-Size="Small" HorizontalAlign="Left" 
                                OnPageIndexChanging="OrderGridView_PageIndexChanging" PageSize="20" 
                                TabIndex="15" Width="866px" BackColor="White" BorderColor="#CCCCCC" 
                                BorderWidth="1px">
                                <FooterStyle BackColor="White" ForeColor="#336699" />
                                <HeaderStyle BackColor="#336699" Font-Bold="True" ForeColor="White" />
                                <PagerSettings FirstPageText="First" LastPageText="Last" />
                                <PagerStyle BackColor="White" ForeColor="#336699" HorizontalAlign="Left" />
                                <RowStyle ForeColor="#336699" Font-Size="Small" />
                                <SelectedRowStyle BackColor="#669999" Font-Bold="True" ForeColor="White" />
                                <SortedAscendingCellStyle BackColor="#F1F1F1" />
                                <SortedAscendingHeaderStyle BackColor="#007DBB" />
                                <SortedDescendingCellStyle BackColor="#CAC9C9" />
                                <SortedDescendingHeaderStyle BackColor="#00547E" />
                                <Columns>
                                    <asp:TemplateField HeaderText="Delete" ItemStyle-HorizontalAlign="Center" >
                                    <ItemTemplate>
                                        <asp:CheckBox ID="CheckBox1" runat="server" />
                                    </ItemTemplate>
                                    </asp:TemplateField>
                                     <asp:TemplateField HeaderText="Update Quantity" ItemStyle-HorizontalAlign="Center" ItemStyle-Width="80">
                                    <ItemTemplate>
                                        <asp:TextBox ID="TextBox" runat="server" Width="90" />
                                    </ItemTemplate>
                                    </asp:TemplateField>
                                </Columns>
                            </asp:GridView>
        br />
                                <br />
                               <asp:Label ID="lblsum" runat="server" CssClass="style19" Text="Sum Total"></asp:Label>
                            <br />
                               <asp:Label ID="sum" runat="server" CssClass="style19"></asp:Label>
                            <br />
                            </div>
                            <strong><asp:ImageButton ID="btnDelete" runat="server" Height="28px" 
                                    ImageUrl="/images/bt_Delete.jpg" onclick="btnDelete_Click" 
                                    OnClientClick="return DeleteConfirmation();" TabIndex="13" Width="106px" />
                                </strong>&nbsp;&nbsp;&nbsp; &nbsp;<asp:ImageButton ID="btnUpdate" 
                                    runat="server" Height="28px" ImageUrl="/images/btUpdate.jpg" Width="106px" 
                                    OnClientClick="return UpdateConfirmation();" 
                                    onclick="btnUpdate_Click" />
                            <asp:TextBox ID="username" runat="server" Height="16px" Visible="False" 
                                    Width="128px"></asp:TextBox>
                            <br />

                            <asp:Label ID="Label16" runat="server" Text="Notes:" ForeColor="#336699"></asp:Label>

                            <br />
                            <asp:TextBox ID="TextBox5" runat="server" Height="101px" TabIndex="10" 
                                TextMode="MultiLine" Width="860px"></asp:TextBox>
                            <br />
                            &nbsp;&nbsp;<asp:ImageButton 
                                ID="btnSend" runat="server" ImageUrl="/images/mail2.jpg" 
                                onclick="Button1_Click"  AlternateText="Send your Order"
                                TabIndex="11" Height="75px" Width="90px"/><strong><asp:ImageButton 
                                ID="ImageButton1" runat="server" Height="66px" 
                                ImageUrl="/images/logout.png"  Width="56px" 
                                 onclick="ImageButton1_Click" />
                            </strong>
                            <br />
                            <strong>
                            <asp:Label ID="Label18" runat="server" style="color: #336699" 
                                Text="*Delete Product from List: Check the products which you want to remove from your list and press the delete button."></asp:Label>
                            </strong>
                    </ContentTemplate>
                    <Triggers>
                        <asp:PostBackTrigger ControlID="btnExcel0" />
                        <asp:AsyncPostBackTrigger ControlID="ImageButton1" />
                        <asp:AsyncPostBackTrigger ControlID="code" EventName="SelectedIndexChanged" />
                        <asp:AsyncPostBackTrigger ControlID="type" EventName="SelectedIndexChanged" />
                        <asp:AsyncPostBackTrigger ControlID="p" EventName="SelectedIndexChanged" />
                        <asp:AsyncPostBackTrigger ControlID="dem" EventName="SelectedIndexChanged" />
                        <asp:AsyncPostBackTrigger ControlID="quant" EventName="TextChanged" />
                        <asp:AsyncPostBackTrigger ControlID="btnAdd" />
                        <asp:AsyncPostBackTrigger ControlID="btnDelete" />
                        <asp:AsyncPostBackTrigger ControlID="btnUpdate" />
                        <asp:AsyncPostBackTrigger ControlID="btnSend" />
                    </Triggers>
                </asp:UpdatePanel>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:10:28.957

我看不到您的下拉列表的代码，我曾经遇到过同样的问题。我设置下拉列表 AutoPostBack= True 并在选定的索引中定义一个方法已更改。因此，请确保您没有这样做并上传完整的代码。

# jquery - 标准化代码

> ID：16142887
> 
> 赞同：1
> 
> 时间：2013-04-22T08:47:39.150
> 
> 标签：jquery, button

对于这个问题，我不是一个 jQuery 精明的人。我的项目中有一些动画按钮的代码：

```
$('.slideshow_thumbOutline').on('mouseenter', function(){
    $(this).animate({'border-color':'#000000'}, 150);
  });

  $('.slideshow_thumbOutline').on('mouseleave', function(){
    $(this).animate({'border-color':'#ffffff'}, 150);
  });

  $('.slideshow_thumbOutline').on('click', function(){
    $(this).animate({'background-color':'#000000'}, 150,
      function(){
        $(this).animate({'background-color':'#ffffff'}, 150);
      }
    );
  }); 
```

... mouseenter/mouseleave/click 事件。我有大约7个。

问：为了避免重蹈覆辙，如何规范这个？

谢谢。

佩德罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:57:09.143

您可以将所有事件放在一个`on`函数中：

```
$("body").on({
    mouseenter: function() {
        $(this).animate({'border-color':'#000000'}, 150);
    },
    mouseleave: function() {
        $(this).animate({'border-color':'#ffffff'}, 150);
    },
    click: function() {
        $(this).animate({'background-color':'#000000'}, 150,
            function(){
                $(this).animate({'background-color':'#ffffff'}, 150);
            }
        );
    }
}, ".slideshow_thumbOutline"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:56:03.093

你可以链接你的动画：

```
function mouseLeaveAnimation() {
    $(this).animate({'border-color':'#ffffff'}, 150);
}
function mouseEnterAnimation() {
    $(this).animate({'border-color':'#000000'}, 150);
}
function thumbClicked() {
    $(this).animate({'background-color':'#000000'}, 150,
      function(){
        $(this).animate({'background-color':'#ffffff'}, 150);
      }
    );
}

// now add these behaviours to your HTML elements.
$('slideshow_thumbOutline')
  .on('mouseleave', mouseLeaveAnimation)
  .on('mouseenter', mouseEnterAnimation)
  .on('click', thumbClicked)
; 
```

# java - JRE 1.7.0.21 更新后 Java 查看器不工作

> ID：16142889
> 
> 赞同：1
> 
> 时间：2013-04-22T08:47:44.347
> 
> 标签：java

我正在使用 java 查看器（小程序）在我的 .NET 应用程序中查看图像。

它一直工作到最新的 JRE 更新。每个更新 java 的客户端都抛出以下错误（在所有浏览器中）：

![在此处输入图像描述](https://i.stack.imgur.com/wZeJ2.png)

以下是详细信息：

```
Java Plug-in 10.21.2.11 Using JRE version 1.7.0_21-b11 Java
HotSpot(TM) Client VM User home directory = C:\Documents and
Settings\Administrator
---------------------------------------------------- c:   clear console window f:   finalize objects on finalization queue g:  
garbage collect h:   display this help message l:   dump classloader
list m:   print memory usage o:   trigger logging q:   hide console r:
reload policy configuration s:   dump system and deployment properties
t:   dump thread list v:   dump thread stack x:   clear classloader
cache 0-5: set trace level to <n>
----------------------------------------------------
                Match: beginTraversal Match: digest selected JREDesc: JREDesc[version 1.4+, heap=-1--1, args=-Xmx512m
-Dsun.security.ssl.allowUnsafeRenegotiation=true, href=http://java.sun.com/products/autodl/j2se, sel=false, null, null],
JREInfo: JREInfo for index 0:
    platform is: 1.7
    product is: 1.7.0_21
    location is: http://java.sun.com/products/autodl/j2se
    path is: C:\Program Files\Java\jre7\bin\javaw.exe
    args is: 
    native platform is: Windows, x86 [ x86, 32bit ]
    JavaFX runtime is: JavaFX 2.2.21 found at C:\Program Files\Java\jre7\
    enabled is: true
    registered is: true
    system is: true

                Match: ignoring maxHeap: -1
                Match: ignoring InitHeap: -1
                Match: digesting vmargs: -Xmx512m -Dsun.security.ssl.allowUnsafeRenegotiation=true
                Match: digested vmargs: [JVMParameters: isSecure: false, args: -Xmx512m
-Dsun.security.ssl.allowUnsafeRenegotiation=true]
                Match: selecting maxHeap(2): 536870912
                Match: JVM args after accumulation: [JVMParameters: isSecure: false, args:
-Dsun.security.ssl.allowUnsafeRenegotiation=true]
                Match: digest LaunchDesc: null
                Match: digest properties: []
                Match: JVM args: [JVMParameters: isSecure: false, args: -Dsun.security.ssl.allowUnsafeRenegotiation=true]
                Match: endTraversal ..
                Match: JVM args final: -Xmx512m -Dsun.security.ssl.allowUnsafeRenegotiation=true
                Match: Running JREInfo Version    match: 1.7.0.21 == 1.7.0.21
                Match: Running JVM args match the secure subset: have:<-Xmx512m>  satisfy want:<-Xmx512m
-Dsun.security.ssl.allowUnsafeRenegotiation=true>
                Match: beginTraversal Match: digest selected JREDesc: JREDesc[version 1.4+, heap=-1--1, args=-Xmx512m
-Dsun.security.ssl.allowUnsafeRenegotiation=true, href=http://java.sun.com/products/autodl/j2se, sel=false, null, null],
JREInfo: JREInfo for index 0:
    platform is: 1.7
    product is: 1.7.0_21
    location is: http://java.sun.com/products/autodl/j2se
    path is: C:\Program Files\Java\jre7\bin\javaw.exe
    args is: 
    native platform is: Windows, x86 [ x86, 32bit ]
    JavaFX runtime is: JavaFX 2.2.21 found at C:\Program Files\Java\jre7\
    enabled is: true
    registered is: true
    system is: true

                Match: ignoring maxHeap: -1
                Match: ignoring InitHeap: -1
                Match: digesting vmargs: -Xmx512m -Dsun.security.ssl.allowUnsafeRenegotiation=true
                Match: digested vmargs: [JVMParameters: isSecure: false, args: -Xmx512m
-Dsun.security.ssl.allowUnsafeRenegotiation=true]
                Match: selecting maxHeap(2): 536870912
                Match: JVM args after accumulation: [JVMParameters: isSecure: false, args:
-Dsun.security.ssl.allowUnsafeRenegotiation=true]
                Match: digest LaunchDesc: null
                Match: digest properties: []
                Match: JVM args: [JVMParameters: isSecure: false, args: -Dsun.security.ssl.allowUnsafeRenegotiation=true]
                Match: endTraversal ..
                Match: JVM args final: -Xmx512m -Dsun.security.ssl.allowUnsafeRenegotiation=true
                Match: Running JREInfo Version    match: 1.7.0.21 == 1.7.0.21
                Match: Running JVM args match the secure subset: have:<-Xmx512m>  satisfy want:<-Xmx512m
-Dsun.security.ssl.allowUnsafeRenegotiation=true> 
```

正如 jatin 建议的那样，我检查了初始化文件夹中的静态块，看起来问题出在这里：

```
 static { 
    // This gets rid of exception for not using native acceleration
    System.setProperty("com.sun.media.jai.disableMediaLib", "true");
    System.setProperty("sun.security.ssl.allowUnsafeRenegotiation", "true");
} 
```

我评论了这一行，现在java没有抛出错误，但小程序不起作用（它没有按应有的方式加载图像）......

由于我没有开发此应用程序，因此我将不胜感激有关如何保留此功能并更正新 JRE 1.7 更新 21 后引发的异常的任何提示。

请帮忙！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-26T14:14:52.940

尝试使用来自受信任的证书颁发机构的证书对您的小程序进行签名。[在这里](https://blogs.oracle.com/java/entry/imp_your_applets_and_web)查看更多信息：

> 从 2013 年 4 月的 Java SE 7 Update 21 开始，所有 Java Applet 和 Web Start 应用程序都应使用受信任的证书进行签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T20:05:58.487

转到控制面板，打开 Java 控制面板，转到安全选项卡并将其降低。

完毕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:40:50.667

以下是否属实：

1) 使用 SSL 的 Web 服务器（上面的输出看起来是真的，只是想确认一下） 2) Web 服务器 FQDN 与地址栏中 URL 中的主机名不匹配（即，使用 DNS 别名）

如果 2 为真，那么在地址栏中使用 FQDN 而不是别名时是否有效？

# c# - 使用 MouseOver 在 RichTextBox 内的 SpecificText 中的工具提示

> ID：16142890
> 
> 赞同：0
> 
> 时间：2013-04-22T08:47:44.497
> 
> 标签：c#, winforms, visual-studio-2010

我正在使用代码编辑器，我只是想知道如何在文本中制作工具提示，因为它通常在 c# 中具有鼠标悬停功能的工具上。像这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/8Dq0s.png)

示例场景，

当我在richtextbox 中键入“abc”并将鼠标悬停在它上面时，会出现带有“这是一个字母表”的消息的工具提示。与在富文本框中输入“123”并获得鼠标悬停“这是一个将出现的数字”相同。

反正我能做到吗？没有洪水或使用任何按键？只是鼠标悬停在文本中？非常感谢真的需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:34:12.570

试试这个代码：

```
 private void richTextBox1_MouseHover(object sender, EventArgs e)
        {
            double x;

            if (double.TryParse(richTextBox1.Text, out x))
            {
                toolTip1.Show(this is a number will appear",richTextBox1);

            }
            else
            {
                toolTip1.Show("this is an alphabet",richTextBox1);
            }

        } 
```

# javascript - div 出现在悬停链接后面？- jQuery/js

> ID：16142891
> 
> 赞同：0
> 
> 时间：2013-04-22T08:47:48.533
> 
> 标签：javascript, jquery, css

我已经在这里阅读了 10 多个答案，但我仍然无法使用 jquery 让它工作！我对 javascript/jquery 很陌生，所以我遇到了很多问题。任何帮助，将不胜感激！

我有一个小图像，当我将鼠标悬停在它上面时，我需要一个 100% 高度的框出现在它后面（类似于在 Google Chrome 中打开新标签时的左箭头）。这是我的CSS：

```
#rightarrow {
    background: url("images/rightarrow.png") no-repeat;
    white-space: nowrap;
    top: 45%;
    right: 3%;
    height: 73px;
    width: 25px;
    position: fixed;
    z-index: 6;
}

#rightbox {
    background-color: #ffffff;
    opacity: .5;
    white-space: nowrap;
    top: 0%;
    right: 0%;
    height: 100%;
    width: 8%;
    position: fixed;
    z-index: 5;
    display: none;
} 
```

这是我的 jquery/其他东西的 jsfiddle： [jsfiddle](http://jsfiddle.net/dUbUP/2/)

如果有任何帮助，我将不胜感激！我已经尝试将我的 javascript 链接到外部样式表中，也可以在带有完整代码的标题中，以及主体中的 div 上方，但它不起作用。我很确定我正确地引用了外部 javascript 文件，但我可能只是犯了一些愚蠢的错误。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:15:50.737

首先需要 jquery 脚本并使用此代码

```
$(document).ready(function(){
   //hide the rightbox
   $('#rightbox').hide();
      $("#rightarrow").hover(function () {
      //if mouse enter
      $('#rightbox').show();
   }, function(){
      //if mouse out
      $('#rightbox').hide();
   });
}); 
```

这是CSS

```
 #rightarrow {
background: url("images/rightarrow.png") no-repeat;
white-space: nowrap;
top: 45%;
right: 3%;
height: 73px;
width: 25px;
position: fixed;
z-index: 6;
 }

 #rightbox {
background-color: red;
opacity: 0.5;
white-space: nowrap;
top: 0%;
right: 0;
height: 100%;
width: 8%;
z-index: 5;
display:hidden;
position:absolute;
} 
```

这是html代码

```
<div id="rightbox"></div>
<a href="#" id="rightarrow">Tes</a> 
```

示例：http: [//jsfiddle.net/dUbUP/21/](http://jsfiddle.net/dUbUP/21/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:04:58.893

有几件事：

*   您的 HTML 中没有框。
*   使用`.`或`#`分别按类或身份选择元素，但不能同时按两者。`$('.#rightarrow')`无效。
*   要隐藏您想使用 jQuery 显示的内容，请使用`display: none;`而不是`visibility`.
*   如果您想在 jsFiddle 中使用 jQuery，请将其添加为框架。

[看看这个更新:)](http://jsfiddle.net/dUbUP/16/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T08:51:26.837

您将 JQuery 函数中的元素作为类名引用，例如：

```
$(".rightarrow") 
```

当你应该使用引用作为 id 时，就像你在 css 中所做的那样：

```
$("#rightarrow") 
```

不需要严格使用 id 或 classname，但应该在 css 和 jquery 函数中使用一致的选择器。

- 编辑 -

这里是：

HTML

```
<a href="#" id="rightarrow">test</a>
<div id="rightbox"></div> 
```

JS

```
$(function(){
    $("#rightarrow").hover(function (e) {
        $("#rightbox").show();
    },
         function (e) {
        $("#rightbox").hide();
    });
}); 
```

CSS

```
#rightarrow {
    background: url("images/rightarrow.png") no-repeat;
    white-space: nowrap;
    top: 45%;
    right: 3%;
    height: 73px;
    width: 25px;
    position: fixed;
    z-index: 6;
}

#rightbox {
    background-color: #fff000;
    opacity: .5;
    white-space: nowrap;
    top: 0%;
    right: 0;
    height: 100%;
    width: 8%;
    position: fixed;
    z-index: 5;
    display:none;
} 
```

请注意，JQuery 隐藏/显示功能切换 css 的“显示”属性，而不是“可见性”。所以我不得不将“可见性：隐藏”更改为“显示：无”。请注意，“可见性”属性在页面呈现上会产生更多开销，因此请避免在不需要的地方使用它，并在适用的情况下首选“显示”。

在这里阅读差异：http: [//www.w3schools.com/css/css_display_visibility.asp](http://www.w3schools.com/css/css_display_visibility.asp)

# c++ - 包括 适用于 ViewController.h 但不适用于 appDelegate.h

> ID：16142893
> 
> 赞同：1
> 
> 时间：2013-04-22T08:47:50.780
> 
> 标签：c++, objective-c, xcode, objective-c++

所以我试图将一些 C++ 对象从我的 viewController.h 和 .mm 移动到我的 appDelegate.h 和 .mm。问题是我得到一个预处理器问题，说明例如找不到，字符串也不能。我尝试将文件类型更改为 Objective-C++ 标头，但仍然出现错误，如果我尝试在 viewController.h 中添加#include，则不会出现此类错误。如何在 appDelegate 中导入 c++？

```
//  AppDelegate.h

#import <UIKit/UIKit.h>
#include <iostream> // <-"'iostream' file not found"

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;

@end 
```

和 viewController 的工作案例：

```
//  ViewController.h

#import <UIKit/UIKit.h>
#include <iostream>

@interface ViewController : UIViewController

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:03:37.493

“AppDelegate.h”也包含在“main.m”中。将该文件重命名为“main.mm”应该可以解决问题。

如果公共接口“AppDelegate.h”不需要“iostream”，您也应该考虑将该文件仅包含在实现文件“AppDelegate.mm”中，这也可以解决问题。

# java - Checkstyle 规则来限制根包之间的交互（使用 ImportControl？）

> ID：16142898
> 
> 赞同：2
> 
> 时间：2013-04-22T08:48:10.393
> 
> 标签：java, checkstyle

如何创建 Checkstyle 规则来限制不同根包之间的交互？

我有以下 3 个根包：

*   `models`
*   `views`
*   `controllers`

（它们**不是**类似的东西`com.mycompany.myproject.models`。它们是**根包**。）

我想禁止访问`models`to`views`和 from `views`to `models`（以及其他一些）。

我尝试使用 Checkstyle 的[ImportControl-Checker](http://checkstyle.sourceforge.net/config_imports.html#ImportControl)：

*   尝试 1：使用一个`import-control.xml`. 问题：我只能提供一个 Root-XML-Element ( `<import-control pkg="models">`) 并且它只包含一个包（但我想拥有多个包）。
*   尝试 2：使用多个`import-control.xml`. 问题：如果我在 中导入多个`checkstyle-config.xml`，似乎都不起作用（没有错误，看起来我都没有定义）。我的定义`import-control.xml`：

    ```
    <module name="ImportControl">
      <property name="id" value="ImportControlViews"/>
      <property name="file" value="${basedir}/project/import-control/views.xml"/>
    </module>
    <module name="ImportControl">
      <property name="id" value="ImportControlModels"/>
      <property name="file" value="${basedir}/project/import-control/models.xml"/>
    </module> 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:50:08.260

不幸的是，使用开箱即用的 ImportControl 检查很难实现您想要的。
原因如下：

您已经知道为什么您的选项 1 不起作用：只能有一个根包。

选项 2 是可能的，但很费力。让我深入一点。我使用了以下两个导入控制文件，它们不允许使用`models`from`views`和`views`from `models`：

```
<!DOCTYPE import-control PUBLIC "-//Puppy Crawl//DTD Import Control 1.1//EN"
    "http://www.puppycrawl.com/dtds/import_control_1_1.dtd">
<import-control pkg="views">
    <allow pkg="views" />
    <disallow pkg="models" />
</import-control> 
```

```
<!DOCTYPE import-control PUBLIC "-//Puppy Crawl//DTD Import Control 1.1//EN"
    "http://www.puppycrawl.com/dtds/import_control_1_1.dtd">
<import-control pkg="models">
    <allow pkg="models" />
    <disallow pkg="views" />
</import-control> 
```

在我的测试设置中，这基本上是可行的，但有一个缺点：每个类都会收到一个 Checkstyle 警告，指出*Import control file does not handle this package*。这是因为 ImportControl 检查期望所有包都驻留在公共根目录下（通过查看 Checkstyle 5.6 源代码进行验证）。因此，在`models`包中，您会从为包配置的检查实例中收到警告，`views`反之亦然。
还有一个额外的问题是 ImportControl 检查仅适用于 import 语句，但找不到代码中直接使用的完全限定引用。

所以，你可以做什么？

*   更改您的应用程序，以便您拥有一个共同的根。这是最佳实践，通常也是一个好主意。
*   实现一个自定义检查作为其子类，[`ImportControlCheck`](http://checkstyle.sourceforge.net/apidocs/com/puppycrawl/tools/checkstyle/checks/imports/ImportControlCheck.html)它添加了一个用于启用/禁用*“导入控制文件不处理此包”*消息的选项，否则使用您的选项 2。
*   如果您使用的是 Eclipse，还有第三种解决方案。您可以使用 Checkstyle Eclipse 插件提供的高级配置对话框来将 ImportControl 实例限制在它们各自的文件中。这也将消除*“导入控制文件不处理此包”*消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-01T10:21:24.583

您可以通过混合构建工具配置和 checkstyle 配置来实现这一点。例如，使用 gradle，您可以将源放在单独的源集中，并使用

```
checkStyleModels {
    excludes = ['views/**']
    configFile file('checkstyle-models.xml')
}
checkStyleViews {
    excludes = ['models/**']
    configFile file('checkstyle-views.xml')
} 
```

然后在 checkstyle-models.xml 中禁止视图。两个配置都可以有不同的根目录而没有问题。

# java - Google App Engine 套接字 API

> ID：16142905
> 
> 赞同：0
> 
> 时间：2013-04-22T08:48:34.847
> 
> 标签：java, google-app-engine

对于新的 Sockets API，这意味着什么：

```
Port 25 (SMTP) is blocked; you can still use authenticated SMTP on the submission port 587. 
```

这对于在 GAE 应用程序中*发送*和*接收电子邮件意味着什么？*

**更新：**

在 SO 上搜索，我发现即使 SMTP 端口 25 被阻止，出站套接字仍然有可能与外部 SMTP（非 Google）通信

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:28:53.307

这意味着他们不允许您使用 Sockets API 来发送邮件。至少不在端口 25 上。有用于从 App Engine 发送电子邮件的 api。所以你不必使用 Sockets API。 [https://developers.google.com/appengine/docs/java/mail/overview](https://developers.google.com/appengine/docs/java/mail/overview)

这不是更好地帮助你吗？如果不是，您能否为您的问题提供更多背景信息？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T07:46:59.010

您可以通过两种方式使用 App Engine 发送电子邮件。一种是使用邮件 API（有一些限制），另一种是使用套接字 API。但是，套接字 API 不允许您在端口 25 上发送电子邮件。即使端口 25 是 SMTP 端口，并且如果您想向大多数 SMTP 服务器发送电子邮件，您需要使用该端口，但许多服务器都设置为使用电子邮件客户端的提交端口 (465) 发送电子邮件。这些端口将需要身份验证。它通常是您配置电子邮件客户端使用的端口（例如 Thunderbird），但它可以被任何类型的客户端使用，包括您的应用程序引擎应用程序。因此，如果您有一个 gmail 帐户并且想要使用 smtp 而不是应用引擎邮件 api，您可以通过 gmail smtp 服务器发送您的电子邮件。

# regex - 正则表达式将尾随零添加到金额

> ID：16142909
> 
> 赞同：0
> 
> 时间：2013-04-22T08:48:41.627
> 
> 标签：regex

是否可以使用正则表达式将尾随零添加到值中。下图显示了我想要的。

```
1
1.2
1.23
1.231 
```

预期结果

```
1000
1200
1230
1231 
```

在 Java 中这没有问题，但使用 RegularExpression 我不知道这是否可能。请任何建议。问候德克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:57:16.057

以下可能不是一个优雅的解决方案，但它会起作用；它已经在 Notepad++ 中进行了测试。

1.  替换`^(\d*)\.?(\d*)$`为`($1$2)0000000000`。这会将“最大”数量的零添加到数字中。
2.  替换`^(\d{4}).*$`为`$1`。

对于输入：

```
1
1.2
1.23
1.231 
```

第 1 步产生：

```
10000000000
120000000000
1230000000000
12310000000000 
```

现在，第 2 步产生：

```
1000
1200
1230
1231 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T08:55:51.910

仅使用正则表达式是不可能的，因为您无法生成内容。

但是，您可以使用 获取不同的数字，`(\d)\.(\d?)(\d?)(\d?)`然后在其中显示 a `0`，其中没有数字。

# android - 如何限制在 OnMultiChoiceClickListener 中签入

> ID：16142910
> 
> 赞同：0
> 
> 时间：2013-04-22T08:48:47.960
> 
> 标签：android, dialog

我正在开发一个带有 MultiChoiceItems 对话框的 Android 应用程序。
我想限制选中的数字 10 个选项中的 3 个。
我想知道当我点击第四个复选框时，无法检查 toast alert 是最好的方法。
你能帮我意识到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:09:30.967

每次选中复选框时，您都必须为标志计数添加一个增量，而不是在每次检查时，您都必须检查标志计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:15:40.883

尝试这样的事情：

```
 DialogInterface.OnMultiChoiceClickListener MeasuresDialogListener = new DialogInterface.OnMultiChoiceClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which, boolean isChecked) {

           if(isChecked) 
            {
              selectedMeasures.add(AvailableMeasures[which]);

                    if(selectedMeasures.size() > 3)
                      {
                         //display toast saying that only three items can be checked.
                           selectedMeasures.remove(AvailableMeasures[which]);
                      }
            }
          else
            {
              selectedMeasures.remove(AvailableMeasures[which]);
            } 
         }
       }; 
```

这里 selectedMeasures 是 ArryaList 类型的 ob，可用于存储选定值。

# r - 更改包含 R 中具有许多数据点的绘图的 PDF 的分辨率

> ID：16142914
> 
> 赞同：2
> 
> 时间：2013-04-22T08:49:02.140
> 
> 标签：r, pdf, plot, compression, resolution

我有一个大数据集，我想绘制它。不幸的是，PDF 文件变得非常大，PDF 阅读器需要很长时间才能显示绘图（当您想要滚动时，这可能很烦人）。

```
l = 1e6
x = 1:l
y = x * 2 + runif(l)

pdf("points.pdf")
plot(x, y)
dev.off()

pdf("lines.pdf")
plot(x, y, type="l")
dev.off() 
```

如果我使用线而不是点，那么问题就会减少。这让我想到，创建 PDF 文件时可能会使用压缩或降低的分辨率。此外，当我将绘图添加到 LaTeX 文件时，LaTeX 似乎会降低分辨率。

**我有一个可以用来降低分辨率的参数吗？**.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:54:36.193

我建议考虑一下你选择的情节。我会制作一个 hexbin 图：

```
library(hexbin)
bindata <- hexbin(x,y,xbins=100)
plot(bindata) 
```

这使您可以制作矢量图形并更好地直观地呈现数据中的信息。

![在此处输入图像描述](https://i.stack.imgur.com/PJcMs.png)

PS：包 ggplot2 也可以生成 hexbin 图，可能看起来更好看。

# symfony1 - 如何在 symfony 中将数据绑定到表单

> ID：16142915
> 
> 赞同：1
> 
> 时间：2013-04-22T08:49:05.047
> 
> 标签：symfony1, symfony-1.4

我有一个变量需要在 symfony 中绑定到表单中，如何将操作文件中的数据绑定到表单？

动作文件 $this->unitCost = $this->getUser()->getAttribute('unit_cost'); $value_lists = ($this->unitCost);

```
 foreach($value_lists as $values)
        {
        echo $values['unit_cost'];
        }
    $form = new MyForm(); $form->bind(array('unit_cost' => $values['unit_cost']));
     //print_r($value_lists); 
```

表单 public function configure() {

```
 $cost_range[''] = '-- Please select --';
    for ($i = 0; ($i <= 100); $i++) {
        $cost_range[$i] = $i;
    }

    $this->setWidgets(array(
        'user_id' => new sfWidgetFormDoctrineChoice(array('model' => 'Person', 'add_empty' => '-- Please select --'), array('onchange' => 'filerUnitCostByName()', 'id' => 'user_id')),
        'unit_cost' => new sfWidgetFormSelect(array('choices' => $cost_range), array('id'=>'unit_cost')),
    )); 
```

如何通过从下拉列表中获取数据并放入会话的表单中的数字下拉列表显示绑定值，然后在操作中检索数据。我想在使用小部件创建的表单中创建的下拉列表中设置所选变量。正如您在小部件区域中看到的那样。我想将该值添加为默认值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:01:51.543

对于 POST 请求中的绑定变量，您可以这样做：

```
$form = new MyForm();
$form->bind($request->getParameter($form->getName()), $request->getFiles($form->getName())); 
```

如果你想绑定一个额外的变量，你可以这样做：

```
$form = new MyForm();
$form->bind(array_merge($request->getParameter($form->getName()), array('foo' => $foo)), $request->getFiles($form->getName())); 
```

编辑：没有 POST 变量，你可以这样做：

```
$form = new MyForm();
$form->bind(array('foo' => $foo)); 
```

# python - 从相对路径确定绝对路径

> ID：16142921
> 
> 赞同：3
> 
> 时间：2013-04-22T08:49:32.880
> 
> 标签：python, perl

我想在 perl 脚本中将相对路径转换为绝对路径。我的理解是，`File::Spec->rel2abs`能够优雅地处理它，但在以下情况下，我没有得到预期的结果

```
c:\Temp>cat test.pl
use File::Spec;
print File::Spec->rel2abs($ENV{'VS100COMNTOOLS'} . '../../VC/bin/vsvars32.bat');

c:\Temp>perl test.pl
C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\Tools\..\..\VC\bin\vsvars32.bat 
```

我期待类似的东西

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\vsvars32.bat 
```

为 MSWin32-x86-multi-thread (ActiveState Corp.) 构建的 Perl 版本 v5.6.1

为了让它更清楚，我想实现类似于以下 Python 代码的东西

```
>>> os.path.abspath(os.path.join(os.environ['VS110COMNTOOLS'], r'..\..\VC\bin\vsvars32.bat'))
'C:\\Program Files (x86)\\Microsoft Visual Studio 11.0\\VC\\bin\\vsvars32.bat' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:06:43.720

`File::Spec->rel2abs`在 AS Perl 5.16 上为我工作。如果可能的话，升级你的 Perl 版本可能是个好主意，因为 5.6 大约有 10 年的历史了。

作为替代尝试安装和使用`Path::Class`：

```
use Path::Class;
print file($path)->absolute; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T09:35:33.820

[您也可以使用`Cwd`核心模块](http://perldoc.perl.org/Cwd.html#abs_path-and-friends)执行此操作：

```
use Cwd 'abs_path';
my $abs_path = abs_path($file); 
```

（示例直接取自文档）。

但是，您绝对应该升级您的 Perl。Perl 5.6.1 实际上是在 12 年前发布的。从那时起，无论是在通用语言还是在 Windows 支持方面，都取得了巨大的进步。

# java - 用于布局的 Android xml 选择器

> ID：16142923
> 
> 赞同：7
> 
> 时间：2013-04-22T08:49:37.583
> 
> 标签：java, android, xml

我想知道是否有一个布局选择器，比如drawables。

带有drawable的选择器示例：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- When selected -->
<item android:drawable="@drawable/tab_library_clicked"
      android:state_selected="true" />
<!-- When not selected -->
<item android:drawable="@drawable/tab_library_not_clicked" /> 
```

但是是否有可能有这样的事情（下面的代码对我不起作用，但它应该让您了解我想要完成的工作）：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- When selected -->
<item android:layout="@layout/tab_library_clicked"
      android:state_selected="true" />
<!-- When not selected -->
<item android:layout="@layout/tab_library_not_clicked" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:54:12.420

我可能错了，但我很确定这不存在。

您可以使用 XML 中的选择器做的最“复杂”的操作可能是使用[可绘制图层列表](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)将多个可绘制对象组合到一个状态。

或者，您可以尝试使用 touch_down 和 touch_up 事件以编程方式调用`setVisibility()`布局，但我想性能会很差。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T10:05:15.957

好的，您正在寻找一种将父状态传播到其子视图的方法。这样，每当指示器状态发生变化（选择，未选择）时，图像视图状态就会发生变化。

android 已经有一个 xml 属性。

```
android:duplicateParentState="true" 
```

将此与布局文件中的子视图一起使用，并将其与选择器结合使用。例如：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="#f00" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:duplicateParentState="true"
     />

<ImageView
    android:id="@+id/imageView1"
    android:duplicateParentState="true"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center_horizontal"
    android:src="@drawable/selector" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T10:32:30.737

默认选择器机制仅提供属性的替代方案（例如可绘制使用等），具体取决于视图的状态。它不会取代视图本身。您要求的功能不可用。

视图的选定状态绑定到类中`*_STATE_SET`字段的值之一`View`。视图的组合状态通过 检索[`getDrawableState()`](http://developer.android.com/reference/android/view/View.html#getDrawableState%28%29)。

你可以扩展一个 View 类并利用这些状态来做一些自定义的事情。或者，您可以开发一个自定义布局控制器，它监视视图树中的状态变化并根据 xml 资源替换子视图。

但这种努力并不值得，因为：

1.  视图/布局结构在用户与其交互期间必须保持不变。当用户选择它时，您不应该将按钮更改为复选框，这样替换视图/布局只会使用户体验感到困惑。

2.  您只需要修改用户交互视图的外观，这已经由基于选择器的可绘制对象和颜色提供。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T08:59:12.087

[文档](http://developer.android.com/guide/topics/resources/drawable-resource.html)中没有这样的属性`android:layout`。它应该与.`item``android:drawable`

# asp.net - ScriptResource.axd 和 WebResource.axd 中的语法错误

> ID：16142935
> 
> 赞同：1
> 
> 时间：2013-04-22T08:50:32.290
> 
> 标签：asp.net, iis-7.5, webresource.axd, scriptresource.axd

当使用 Fiddler 跟踪请求时，我看到**HTTP 302 错误**代码`WebResource.axd`和`ScriptResource.axd`.. 这个问题随机发生...

相同的 Web 应用程序在所有其他环境中运行良好。我正在使用 asp.net v3.5 .. IIS 7.5 Windows Server 2008 .. 关于为什么我得到 302 的任何一般信息？..

其他错误是`ASP.NET Ajax Client-side framework failed to load, WebForm_PostBackOptions is undefined, Sys is Undefined`.. 页面中没有链接有效。已经在几篇文章中提出了一些建议，例如重新安装框架，脚本资源处理程序已经到位。任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T05:34:46.603

解决了！！！这帮助我实现了这一目标： [http ://www.rosshawkins.net/archive/2006/10/08/webresource.axd.aspx](http://www.rosshawkins.net/archive/2006/10/08/webresource.axd.aspx)

问题是我错过了 MachineKey 标签。现在它运行良好..希望这可以帮助某人..

# python - Python：在基于 C 的类型 MatchObject 上使用 isinstance

> ID：16142937
> 
> 赞同：3
> 
> 时间：2013-04-22T08:50:35.810
> 
> 标签：python, regex, isinstance

我正在研究一个函数，我想知道一个对象是否是`re.MatchObject`. 我尝试使用`isinstance`，但`re.MatchObject`它是 C 类型，这不起作用。

`hasattr( ... , 'pos')`我仍然可以进行类似或任何其他属性的替代测试`re.MatchObject`，但我不认为它是一个好的解决方案。还有什么办法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T08:57:43.847

您需要使用正确的类型；匹配对象类型不是显式可导入的，但您可以`type()`在现有实例上使用来存储它：

```
import re

MatchObject = type(re.search('', '')) 
```

然后在`isinstance()`测试中使用它：

```
>>> MatchObject = type(re.search('', ''))
>>> isinstance(re.search('', ''), MatchObject)
True 
```

C 定义的 Python 类型并没有阻止使用`isinstance()`其他方式。

# mingw - 如何将库的路径设置为代码块中 exe 文件的相对路径？

> ID：16142941
> 
> 赞同：0
> 
> 时间：2013-04-22T08:50:53.630
> 
> 标签：mingw, codeblocks

这可能是一个非常愚蠢的问题，但我找不到指定 dll 文件路径的方法。我已经将搜索目录设置为相对于项目的根目录，它在代码块中运行良好。

问题是当我双击exe文件时找不到库。我试图设置相对于 exe 文件的路径，但仍然找不到文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T15:33:41.430

Before code::blocks runs/debugs your program, it sets up all the required paths for your app to run. These are defined in your *.cbp file.
If you want to "double click" your exe and expect it to find your dlls, you should do one of the following:-

1.  Have your needed dlls in your exe's CWD.
2.  Have your needed dlls in one of your search path env. vars.
3.  Open a console and -> 'set PATH="**X:\Path\to your dll's\dir**";%PATH% && **myapp.exe**'
4.  Make use of a [manifest file](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375365%28v=vs.85%29.aspx)

You will want to make use of option #1 and maybe #4 if you decide to deploy your app on other machines
[HERE IS A USEFULL MSDN ARTICLE ON THE TOPIC](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx#search_order_for_desktop_applications)

# git - 获取铬不起作用

> ID：16142942
> 
> 赞同：3
> 
> 时间：2013-04-22T08:51:00.950
> 
> 标签：git, chromium

fetch chromium --nosvn=True 指令产生以下错误：

```
`C:\Users\Gunwoo\workspace\chromium>fetch chromium --nosvn=True
Cannot rebase: You have unstaged changes.
Please commit or stash them.
Running: svn ls --non-interactive svn://svn.chromium.org/chrome
Traceback (most recent call last):
  File "E:\depot_tools\\fetch.py", line 253, in <module>
    sys.exit(main())
  File "E:\depot_tools\\fetch.py", line 249, in main
    return run(dryrun, spec, root)
  File "E:\depot_tools\\fetch.py", line 243, in run
    return checkout.init()
  File "E:\depot_tools\\fetch.py", line 108, in init
    self.run_svn('ls', '--non-interactive', svn_spec['svn_url'])
  File "E:\depot_tools\\fetch.py", line 83, in run_svn
    return subprocess.check_call(('svn',) + cmd, **kwargs)
  File "E:\depot_tools\python_bin\lib\subprocess.py", line 457, in check_call
    retcode = call(*popenargs, **kwargs)
  File "E:\depot_tools\python_bin\lib\subprocess.py", line 444, in call
    return Popen(*popenargs, **kwargs).wait()
  File "E:\depot_tools\python_bin\lib\subprocess.py", line 595, in __init__
    errread, errwrite)
  File "E:\depot_tools\python_bin\lib\subprocess.py", line 804, in _execute_child startupinfo)
WindowsError: [Error 2]` 
```

> 我安装了 depot_tools 并将其 PATH 包含到系统环境变量中。

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:30:39.417

我在我的 Windows 机器上遇到了同样的问题，“git status”显示 depot_tools 中的一堆文件已修改。可能您在 depot_tools 中有未暂存的更改。我解决了 git reset --hard HEAD no depot_tools 文件夹。

# c# - 是等待任务等于在ContinueWith中抛出故障任务的异常

> ID：16142945
> 
> 赞同：4
> 
> 时间：2013-04-22T08:51:18.170
> 
> 标签：c#, async-await

以下不是多余的吗？

```
await blob.CopyToBlobAsync(newBlob).
       ContinueWith((t) => { if (t.IsFaulted) throw t.Exception; }); 
```

好像没有ContinueWith调用，会直接抛出异常？

什么时候会使用 continueWith 而不是等待任务？

以下是一样的吗？

```
await myTask.ContinueWith(t => {'do something with the task t'}); 
```

和

```
await myTask;
'do something with the task MyTask' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T11:24:49.033

该行具有与直接执行任务`ContinueWith(t => { if (t.IsFaulted) throw t.Exception; })`不同的语义`await`：`CopyToBlobAsync`

*   它忽略取消结果；即使return by被取消，`Task`return by也会成功完成。这可能是故意行为。`ContinueWith``Task``CopyToBlobAsync`
*   它忽略了成功的结果；from 的任何返回值`CopyToBlobAsync`都会被删除。
*   `AggregateException`它通过直接抛出来包装任何异常`t.Exception`。这几乎可以肯定是错误的行为。

所以这并不是*完全*多余的，而且*可能是*一个错误。

您可以`ContinueWith`在某些情况下使用而不是`await`任务。在我的代码中，我通常只在延续很简单的情况下这样做，我不需要延续中的上下文，并且我不想要`async`状态机的开销。对于大多数情况，您应该更喜欢`await`可能与`ConfigureAwait(false)`.

你的最后一个例子不一样；`ContinueWith`默认情况下将在线程池上执行，而`await`默认情况下将捕获上下文并在该上下文中执行延续。此外，您必须非常小心如何在延续任务中使用该任务：您通常希望将异常和取消传播到延续任务，这并不像最初看起来那么容易。

简而言之，我`await`几乎在所有情况下都推荐。它更容易编写，更容易阅读，并且具有合理的默认行为。

# java - OAuth 2 访问令牌

> ID：16142946
> 
> 赞同：2
> 
> 时间：2013-04-22T08:51:18.420
> 
> 标签：java

尝试从 URL [https://accounts.accesscontrol.windows.net/tokens/OAuth/2读取时出现以下异常](https://accounts.accesscontrol.windows.net/tokens/OAuth/2)

IOException：服务器返回 HTTP 响应代码：400 用于 URL：[https ://accounts.accesscontrol.windows.net/tokens/OAuth/2](https://accounts.accesscontrol.windows.net/tokens/OAuth/2)

你能帮忙吗？

-阿比纳夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T00:24:18.910

如果您在 POST 请求的参数字符串中包含尾随 & 符号 ('&')，您可能会看到此错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T08:08:48.963

如果您收到以下消息

> 请求包含 1 个由 \u0027=\u0027 分隔的令牌，而不是单个键值对

问题可能出在您的 URL 中 - 您应该在 POST**正文**中传递所有参数，但 URL 本身必须是干净的 - 出于安全原因这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-26T07:38:02.940

我遇到了同样的错误，请检查您的 POST 是否为 type `x-www-form-urlencoded`，参数仅在 POST 正文中。`form-data`对我也不起作用。您可以尝试使用 curl：

```
curl -X POST https://YOURURL/token -d grant_type=authorization_code -d redirect_uri=https://example-app.com/redirect -d client_id=YOURID -d client_secret=YOURSECRET -d code_verifier=YOURVERIFIER -d code=YOURCODE 
```

# freeswitch - Freeswitch SIP用户创建问题

> ID：16142947
> 
> 赞同：0
> 
> 时间：2013-04-22T08:51:21.547
> 
> 标签：freeswitch

我正在 Ubuntu Precise Pangoline 服务器上的 freeswitch PBX 上运行一些测试。我使用的 Freeswitch 版本是来自 git repo 的版本。我添加了一个 SIP 用户并从 SIP 电话访问 Freeswitch 我不断收到以下错误消息：

```
2013-04-22 08:34:20.146022 [CONSOLE] switch_core.c:2096
FreeSWITCH Version 1.5.1b+git~20130417T225111Z~54d47599e9 (git 54d4759 2013-04-17 22:51:11Z)

FreeSWITCH Started
Max Sessions [1000]
Session Rate [30]
SQL [Enabled]

freeswitch@moses> 2013-04-22 08:35:20.688573 [WARNING] sofia_reg.c:2621 Can't find user [1100@192.168.125.128] from 192.168.125.1
You must define a domain called '192.168.125.128' in your directory and add a user with the id="1100" attribute
and you must configure your device to use the proper domain in it's authentication credentials. 
```

这些是我创建 SIP 用户所采取的步骤。正如 conf 目录中的 freeswitch.xml 中所述，所有配置设置都应该在 vanilla 文件夹中完成。我去了那里，在目录文件夹中，我通过复制默认值之一创建了用户 xml 文件并更改了设置：

```
root@moses:/usr/local/src/freeswitch/conf/vanilla/directory/default# vim 1100.xml
<include>
  <user id="1100">
    <params>
      <param name="password" value="$${default_password}"/>
      <param name="vm-password" value="1100"/>
    </params>
    <variables>
      <variable name="toll_allow" value="domestic,international,local"/>
      <variable name="accountcode" value="1100"/>
      <variable name="user_context" value="default"/>
      <variable name="effective_caller_id_name" value="Gwen"/>
      <variable name="effective_caller_id_number" value="1100"/>
      <variable name="outbound_caller_id_name" value="$${outbound_caller_name}"/>
      <variable name="outbound_caller_id_number" value="$${outbound_caller_id}"/>
      <variable name="callgroup" value="techsupport"/>
    </variables>
  </user>
</include> 
```

后来我编辑了拨号方案文件夹的 default.xml 文件，并在 Local_Extension 下将 1100 添加到正则表达式中，如下所示：

```
root@moses:/usr/local/src/freeswitch/conf/vanilla/dialplan# vim default.xml
<?xml version="1.0" encoding="utf-8"?>
<!--
    NOTICE:

    This context is usually accessed via authenticated callers on the sip profile on port 5060
    or transfered callers from the public context which arrived via the sip profile on port 5080.

    Authenticated users will use the user_context variable on the user to determine what context
    they can access.  You can also add a user in the directory with the cidr= attribute acl.conf.xml
    will build the domains ACL using this value.
-->
<!-- http://wiki.freeswitch.org/wiki/Dialplan_XML -->
<include>
   ...................
    <extension name="Local_Extension">
      <!--<condition field="destination_number" expression="^(10[01][0-9]|1100)$"> -->
      <condition field="destination_number" expression="^1100$">
        <action application="export" data="dialed_extension=$1"/>
        <!-- bind_meta_app can have these args <key> [a|b|ab] [a|b|o|s] <app> -->
        <action application="bind_meta_app" data="1 b s execute_extension::dx XML features"/>
        <action application="bind_meta_app" data="2 b s record_session::$${recordings_dir}/${caller_id_number}.${strftime(%Y-%m-%d-%H-%M-%S)}.wav"/>
        <action application="bind_meta_app" data="3 b s execute_extension::cf XML features"/>
        <action application="bind_meta_app" data="4 b s execute_extension::att_xfer XML features"/>
        <action application="set" data="ringback=${us-ring}"/>
        <action application="set" data="transfer_ringback=$${hold_music}"/>
        <action application="set" data="call_timeout=30"/>
        <!-- <action application="set" data="sip_exclude_contact=${network_addr}"/> -->
        <action application="set" data="hangup_after_bridge=true"/>
        <!--<action application="set" data="continue_on_fail=NORMAL_TEMPORARY_FAILURE,USER_BUSY,NO_ANSWER,TIMEOUT,NO_ROUTE_DESTINATION"/> -->
        <action application="set" data="continue_on_fail=true"/>
        <action application="hash" data="insert/${domain_name}-call_return/${dialed_extension}/${caller_id_number}"/>
        <action application="hash" data="insert/${domain_name}-last_dial_ext/${dialed_extension}/${uuid}"/>
        <action application="set" data="called_party_callgroup=${user_data(${dialed_extension}@${domain_name} var callgroup)}"/>
        <action application="hash" data="insert/${domain_name}-last_dial_ext/${called_party_callgroup}/${uuid}"/>
        <action application="hash" data="insert/${domain_name}-last_dial_ext/global/${uuid}"/>
        <!--<action application="export" data="nolocal:rtp_secure_media=${user_data(${dialed_extension}@${domain_name} var rtp_secure_media)}"/>-->
        <action application="hash" data="insert/${domain_name}-last_dial/${called_party_callgroup}/${uuid}"/>
        <action application="bridge" data="user/${dialed_extension}@${domain_name}"/>
        <action application="answer"/>
        <action application="sleep" data="1000"/>
        <action application="bridge" data="loopback/app=voicemail:default ${domain_name} ${dialed_extension}"/>
      </condition>
    </extension>

    ............
</include> 
```

到目前为止，我已经尝试了通过在网上的 vars.xml 中设置我的 local_ip_v4 找到的所有解决方案，但它们没有工作。有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-20T19:49:41.880

您的问题是您修改后的正则表达式不再进行捕获。请注意，1100 周围没有括号将其放入变量 $1。

```
<condition field="destination_number" expression="^1100$"> 
```

在条件 XML 块中，您看到的第一个条目是：

```
<action application="export" data="dialed_extension=$1"/> 
```

dialed_extension 变量应该被分配从表达式中捕获的值，但是由于不再有捕获，所以这会失败。

相反，您可以修改原始条件块，即您注释掉的那个，以便它也包括 1100 系列用户：

```
<!--<condition field="destination_number" expression="^(1[01][01][0-9])$"> --> 
```

请记住，您可能需要禁用任何使用 1100 系列的扩展块以避免冲突。

除此之外，如果您无法使用默认用户和默认配置进行调用，则不应尝试创建用户，因为您很可能有其他问题。

# wpf - wpf中带边距的动画

> ID：16142949
> 
> 赞同：2
> 
> 时间：2013-04-22T08:51:26.133
> 
> 标签：wpf, wpf-controls

我正在使用此代码从左侧边距为对象设置动画

```
ThicknessAnimation da = new ThicknessAnimation();
        double width = borderModel.Width;
        if (ConstantValue.HideShowModelPanel == false)
        {

            da.From = new Thickness(0,0,0,6);
            da.To = new Thickness(-width,0,0,6);
            da.Duration = TimeSpan.FromSeconds(0.8);
            ConstantValue.HideShowModelPanel = true;
        }
        else
        {
            da.From =new Thickness(-width,0,0,6);
            da.To = new Thickness(0,0,0,6);
            da.Duration = TimeSpan.FromSeconds(0.2);
            ConstantValue.HideShowModelPanel = false;
        }
        Storyboard.SetTarget(da, borderModel);
        Storyboard.SetTargetProperty(da, new PropertyPath("Margin"));
        story.Children.Add(da);
        story.Begin();
        //borderModel.BeginAnimation(new PropertyPath("Margin"), da); 
```

我不会隐藏和显示对象。请告诉我我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T12:39:54.003

这可能有几个原因。因为您没有粘贴所有代码，所以我无法分析以下可能性：

*   您的故事板未正确创建
*   您的borderModel 放置在面板/内容控件中，其中边距被忽略
*   您没有为您的borderModel指定“宽度”

假设，您将您的borderModel 放入一个网格中，我让您的代码进行了一些小的更改：

```
ThicknessAnimation da = new ThicknessAnimation();
double width = borderModel.ActualWidth;
if (ConstantValue.HideShowModelPanel == false)
{
 da.From = new Thickness(0, 0, 0, 6);
 da.To = new Thickness(-width, 0, 0, 6);
 da.Duration = TimeSpan.FromSeconds(0.8);
 ConstantValue.HideShowModelPanel = true;
}
else
{
 da.From = new Thickness(-width, 0, 0, 6);
 da.To = new Thickness(0, 0, 0, 6);
 da.Duration = TimeSpan.FromSeconds(0.2);
 ConstantValue.HideShowModelPanel = false;
}

borderModel.BeginAnimation(FrameworkElement.MarginProperty, da); 
```

# php - 2 SQL 在 CodeIgniter MCV 环境中搜索一个 id

> ID：16142954
> 
> 赞同：0
> 
> 时间：2013-04-22T08:51:30.530
> 
> 标签：php, mysql, codeigniter

我知道我的问题是我在控制器 $name 和 $year 中调用变量的位置，我不确定如何将该数组格式化为控制器中的变量。

模型：

```
function getId($id)
{
    $this->db->distinct();
    $this->db->select('*');
    $this->db->where('id', $id);
    $result = $this->db->get('HWC');

    return $result->result();
}

function getVariations($name, $year)
{
    $this->db->distinct();
    $this->db->select('*');
    $this->db->where(array('ModelName' => $name, 'Year' => $year));
    $variations = $this->db->get('HWC');

    if(mysql_num_rows($variations) != 0)
    {
        return $variations->result();
    }
    else
    {

    }
} 
```

控制器：

```
$this->load->model('testingsearch');
$data['records'] = $this->testingsearch->getId($id);

$name = $records->ModelName;
$year = $records->Year;

$data['variations'] = $this->testingsearch->getVariations($name, $year); 
```

看法：

```
 foreach($variations as $row){
    echo $row['name'];
    echo $row['color'];
    echo $row['Tampo'];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:12:23.893

```
function getId($id)
{
    $this->db->distinct();
    $this->db->select('*');
    $this->db->where('id', $id);
    $result = $this->db->get('HWC');
    return $result->result();
}

You are returning object with result() but displaying as array

foreach($variations as $row){
    echo $row['name'];
    echo $row['color'];
    echo $row['Tampo'];
} 
```

改成这样

```
return $result->result_array(); 
```

现在视图将正常工作。在控制器中，您在这里犯了错误

```
$data['records'] = $this->testingsearch->getId($id); 
```

将其更改为

```
$records    =   $this->testingsearch->getId($id); 
```

现在这些说明应该可以正常工作但有条件

```
if($records){
    $name = $records->ModelName;
    $year = $records->Year;

    $data['variations'] = $this->testingsearch->getVariations($name, $year);
} 
```

# javascript - 在 if 语句中检查“未定义”时出现“未定义”错误

> ID：16142957
> 
> 赞同：0
> 
> 时间：2013-04-22T08:51:35.837
> 
> 标签：javascript, object

我正在检查一个`Object`（如关联数组）以查看是否有一部分数据可用，但我在检查它是否可用的语句中`undefined`出现错误！`if``undefined`

我有一个`Object`这样的：

```
var data = {
    1: {
        2: {
            3: [
                ["a","b"],
                ["c","d"],
            ],
        }
    }
} 
```

我也尝试过`double-quotes`：`var data = { "1": { "2": { ...`

这些是`if`我已经尝试过的陈述。所有这些都失败了，完全在语句`Firebug`中生成：`TypeError: data[1][2][3] is undefined``if`

```
if (typeof data[1][2][3] == "undefined") {
if (data[1][2][3] === undefined) { 
// when I have double quotes
if (typeof data["1"]["2"]["3"] == "undefined") {
if (data["1"]["2"]["3"] === undefined) { 
```

我在 jsfiddle.net 中检查了它，它工作正常。我尝试了所有我能想象到的东西，但是我仍然不知道为什么它在`if`声明中失败了。

**更新**

看看这个，天哪：

![在此处输入图像描述](https://i.stack.imgur.com/bUC2D.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:17:02.183

如果`variable[1][2][3]`未定义，则脚本无法检查是否`variable[1][2][3][4]`未定义。您应该检查树的整个深度的未定义

```
if(1 in variable)
{
  if(2 in variable[1])
  {
     if(3 in variable[1][2])
     {
       if(typeof variable[1][2][3][4] === 'undefined'){
          // Do something
       }
     }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:24:36.510

If you don't know beforehand whether you have all the hierarchy needed to get to the element you're checking (e.g., you're checking `e.Bubbles[2013][3][4]["layer_1"]`, but `e.Bubbles[2013]` doesn't exist, and you get `TypeError`), consider using error catching like this:

```
try {
    myData = e.Bubbles[2013][3][4]["layer_1"];
} catch (error) {
    myData = undefined;
    console.error("Couldn't get my data", error.name, error.message);
}

if (myData !== undefined) {
    // Do something with the data
} 
```

At a cost of making code much less readable, you could also do something like this:

```
var _ref, _ref1, _ref2;
if ((_ref = e.Bubbles[2013]) != null ? (_ref1 = _ref[3]) != null ? (_ref2 = _ref1[4]) != null ? _ref2["layer_1"] : void 0 : void 0 : void 0) {
  // We know we have e.Bubbles[2013][3][4]["layer_1"] here
} 
```

But I would recommend error catching.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T09:15:38.220

更仔细地查看您的输出：

```
if (typeof e.Bubbles["2013"]["3"]["24"]["layer_1"] === "undefined") {
> TypeError e.Bubbles[2013][3][24] is undefined 
```

即，因为您的测试太深了一级，所以它失败了。该`["24"]`物业不存在，因此您无法到达该`["layer_1"]`物业。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T09:06:47.613

一些评论，也许解决方案介于两者之间：

也许您想使用否定版本

```
if (typeof data[1][2][3] !== "undefined") { 
```

因为您似乎在条件主体中处理该数据，所以您想确保它实际上**是**在您的 if 条件中定义的？Atm，*如果*数据未定义，则执行代码。

您是在代码中完全使用此对象还是仅用于演示目的？因为如果您检查`data[1][2][3]`并且`data[1][2]`已经未定义，尝试访问`data[1][2][3]`将引发错误，因为您正在尝试访问不存在对象的属性。

旁注：如果您有数字索引，使用数组而不是对象可能更合适？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-22T09:11:58.423

不要将它与未定义的比较...

如果您想检查其是否已定义，则只需将其放入 IF 条件中，例如...

```
var data = {
    1: {
        2: {
            3: [
                ["a","b"],
                ["c","d"],
            ],
        }
    }
}

if(data[1][2][3])
{
    alert("defined");
}
else
{
    alert("not defined");
} 
```

# svg - Raphael - 响应式 SVG - 不同浏览器的问题

> ID：16142962
> 
> 赞同：0
> 
> 时间：2013-04-22T08:51:47.970
> 
> 标签：svg, raphael

我正在使用 RaphaelJS + SVG，但响应式版本不正确。

我有一张图片和两个 SVG 的叠加层来覆盖它的一部分（在顶部和底部）。在我的jsfiddle： http: [//jsfiddle.net/karo/kgQqh/3/](http://jsfiddle.net/karo/kgQqh/3/)你可以看到这里的代码JS：

```
var paperBanner1Bottom = Raphael("banner1_bottom", '100%', '100%');  
 paperBanner1Bottom.path("M0,250V30.07c0,0,260.135,133.59,668.494,150.29c408.351,16.701,660.351,16.701,754.47,16.701c94.121,0,296.577,3.74,377.036,41.689V250H0z").attr({fill:"red", "stroke-width":"0"})
paperBanner1Bottom.setViewBox(0, 0, 1800, 250, true);

var paperBanner1Top = Raphael("banner1_top", '100%', '100%');
paperBanner1Top.path("M0,0v34.96c0,0,182.39,95,480.3,88.16c273.58-6.28,597.33-63.84,775.16-89.68c177.84-25.84,320.7-47.12,545.66,19.76c0-25.84,0-53.2,0-53.2H0z").attr({fill:"red", "stroke-width":"0"});
paperBanner1Top.setViewBox(0, 0, 1800, 140, true); 
```

我正在使用 setviewbox 来获得 svgs 响应式的效果。

不同浏览器中的问题：（要查看它在不同浏览器中的外观，请参见图片）我给 div（我将添加 svg 到）绝对位置并将它们放在 top:0 或bottom:0 在他们的位置上

*   Firefox 完美运行！
*   Safari 将 svg 拉伸到周围 div 的 100% 高度
*   Chrome > 无法将 svg 放在顶部或底部，因为它们会延伸到整个 div 并居中。

有没有其他人遇到过这样的问题？你知道怎么解决吗？

谢谢

![其显示方式的图像](https://f.cloud.github.com/assets/2174168/392828/b3746c62-a787-11e2-95d7-d3a5a4f28295.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T11:36:38.453

借助此页面的代码：[http](http://www.brichards.co.uk/blog/webkit-svg-height-bug-workaround) ://www.brichards.co.uk/blog/webkit-svg-height-bug-workaround 我可以解决问题！伊皮三世

在此处查看我的固定 jsfiddle：http: [//jsfiddle.net/karo/kgQqh/16/embedded/result/](http://jsfiddle.net/karo/kgQqh/16/embedded/result/) 可能您可以缩短函数 fixWebkitHightBug 的代码，但我在 jquery 中还不是很好；）

下面的 Javascript/JQuery 代码解决了这个问题。

```
function fixWebkitHeightBug(){ 
/* Resize campus element */ 
var campusW = 282; 
var campusH = 288; 
var curCampusW = $('#campus').width(); 
var newCampusH = heightInRatio(campusH,campusW,curCampusW); 
$('#campus').height(newCampusH); 
function heightInRatio(oH,oW,nW){ return (oH / oW * nW); } 
```

}

```
$(window).resize(function() { fixWebkitHeightBug(); }); 
$(document).ready(function() { fixWebkitHeightBug(); }); 
```

# asp.net - asp:Panel 中的按钮仅在 IE10 中导致异常

> ID：16142968
> 
> 赞同：1
> 
> 时间：2013-04-22T08:52:26.410
> 
> 标签：asp.net, internet-explorer

我有一个`LinkButton`内`asp:Panel`。当我单击确认按钮时，我在 IE10 控制台中看到以下内容：

`SCRIPT7002: XMLHttpRequest: Network Error 0x80700013, Could not complete the operation due to error 80700013.`

和

`SCRIPT5022: Sys.WebForms.PageRequestManagerServerErrorException: An unknown error occurred while processing the request on the server. The status code returned from the server was: 0`

当我查看事件查看器时，我看到：

```
 Exception information: 
    Exception type: ArgumentNullException 
    Exception message: Value cannot be null.
Parameter name: exception
   at System.Web.UI.AsyncPostBackErrorEventArgs..ctor(Exception exception)
   at System.Web.UI.PageRequestManager.OnPageError(Object sender, EventArgs e)
   at System.EventHandler.Invoke(Object sender, EventArgs e)
   at System.Web.UI.Page.HandleError(Exception e)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   at System.Web.UI.Page.ProcessRequest(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)
   at System.Web.UI.Page.ProcessRequest()
   at System.Web.UI.Page.ProcessRequest(HttpContext context)
   at ASP.general_resetpassword_aspx.ProcessRequest(HttpContext context)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

这**仅**在 IE10 中发生。在 IE9、IE8、Chrome 和 Firefox 中，这是可行的，我被重定向以继续应用程序的流程。我在 asp.net 4.0、IIS7.5 和 Windows server 2008 r2 上。

我已经安装了`KB2600088`，所以这不是问题。有人见过这个吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-28T04:50:39.910

当我厌倦了这个问题时，我只是移除了“面板”，一切正常。我还开了一个 Microsoft MSDN 支持的案例，只是为了一笑而过。

# jakarta-ee - 在动态 Web 项目中创建属性文件？

> ID：16142970
> 
> 赞同：0
> 
> 时间：2013-04-22T08:52:31.520
> 
> 标签：jakarta-ee, web-applications, properties

大家好，我正在尝试在我的代码中动态创建一个属性文件

```
package abc.in;

import java.io.*;
import java.util.Properties;

public class DBConnection {
    OutputStream out = null;

    public void SetAllProps() {
        try {

            Properties props = new Properties();

            File f = new File("myApp.properties");
            if (f.exists()) {

                props.load(new FileReader(f));
                // Change your values here
                props.setProperty("ServerAddress", "ThatNewCoolValue");
            } else {

                // Set default values?
                props.setProperty("ServerAddress", "DullDefault");
                props.setProperty("ServerPort", "8080");
                props.setProperty("ThreadCount", "456");

                f.createNewFile();
            }

            out = new FileOutputStream(f);
            props.store(out, "This is an optional header comment string");

            System.out.println(props.get("ServerPort"));

        } catch (Exception e) {
            e.printStackTrace();
        } finally {

            if (out != null) {

                try {

                    out.close();
                } catch (IOException ex) {

                    System.out
                            .println("IOException: Could not close myApp.properties output stream; "
                                    + ex.getMessage());
                    ex.printStackTrace();
                }
            }
        }

    }
} 
```

我在 java 项目中执行此操作，然后它创建一个具有上述名称“myApp.properties”的属性文件，但是当我在动态 Web 项目中执行相同的代码时，它不会创建任何属性文件。我究竟做错了什么。期待您的回答。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:33:46.717

您可以执行 a`f.getAbsolutePath()`来获取您创建的属性文件的绝对路径。

# php - 用户 www-data 无法删除文件

> ID：16142972
> 
> 赞同：0
> 
> 时间：2013-04-22T08:52:34.800
> 
> 标签：php, bash, exec, rm

在 php 中，我执行以下操作：

```
exec('remove_file.sh', $output, $return); 
```

其中 remove_file.sh 是以下脚本：

```
#!/bin/sh
rm -f /tmp/test.pdf 
```

我验证了这个脚本是由 www-data 运行的，并且 test.pdf 由 myuser 拥有，但具有 666 (rw-rw-rw-) 权限。/tmp 归 root 所有，拥有 666 权限。

该脚本返回 1（一般错误）而没有任何输出。

如果我从终端尝试：

```
sudo su www-data -c 'rm -f /tmp/test.pdf' 
```

我得到：

```
cannot remove `/tmp/test.pdf': Operation not permitted 
```

如何从 php 脚本中删除此文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T09:06:18.347

您可能必须确保`www-user`对目录以及文件具有写权限。这取决于文件系统，但大多数操作都需要`rm`它`mv`。

所以`chmod 777 /tmp`应该做的伎俩。

**编辑：**以上可能不是实现所需可用性的安全方式。根据您的设置，完成此操作的更彻底的方法是添加`www-user`到`users`组（假设`myuser`主要组是`users`），然后将`/tmp`目录设置为 rwx 用于用户和组。

```
# usermod -g users www-user
# chmod 770 /tmp 
```

允许每个人在其中读取、写入和执行`/tmp`不适合多用户或不安全的盒子，虽然它可能在安全良好的服务器上正常工作，但您为任何破坏盒子的人提供了很多访问权限。

一个更好的选择是让 php 将文件上传到更本地的目录，而不是使用[$_FILES](http://php.net/manual/en/reserved.variables.files.php)使用 bash 脚本，然后再次使用 PHP 通过[unlink](http://php.net/manual/en/function.unlink.php)删除它们。这样所有文件都属于`www-user`. 请记住，必须在允许上传之前彻底验证文件，以防止通过[c99 和类似恶意软件](http://www.madirish.net/?article=271)进行攻击。

编辑（来自OP）：

虽然安全问题不适用于*我的*情况，但我完全同意之前的编辑。使用 /tmp 是一种懒惰的方法。但真正的问题是我在自己的用户下测试了创建文件，然后从 www-data 继续测试。在 /tmp 的默认权限下，您不能（正确地）删除另一个用户文件，也不能覆盖它。这导致了各种问题，不仅是 rm。

# linux - 在使用 linux 命令“date”时添加一些特定时间

> ID：16142973
> 
> 赞同：26
> 
> 时间：2013-04-22T08:52:35.240
> 
> 标签：linux, date

在linux下，`date`可以帮我打印当前时间。如果要打印当前时间 + 1 小时，我应该给出什么选项？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-22T08:57:12.180

## 在 Linux 上

只需使用`-d`(或`--date`) 对日期进行一些数学运算：

```
date -d '+1 hour' '+%F %T'
#    ^^^^^^^^^^^^ 
```

例如：

```
$ date '+%F %T'
2013-04-22 10:57:24
$ date -d '+1 hour' '+%F %T'
2013-04-22 11:57:24
#           ^ 
```

## 在 Mac 操作系统上

警告，以上仅适用于 Linux，不适用于 Mac OS。

在 Mac OS 上，等效的命令是

```
date -v+1H 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-02-05T18:38:05.100

在 shell 脚本中，如果我们需要添加时间，请使用以下命令和日期格式（将时间放在日期字符串之前）

`date -d"11:15:10 2017-02-05 +2 hours" +"%Y-%m-%d %H:%M:%S"` 这将输出 `2017-02-05 13:15:10`

这不会导致没有 UTC 的正确日期它不起作用

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-20T01:42:52.593

# Linux 和 macOS 在一个命令中

如果您需要编写可在 Linux 服务器和 macOS 工作站上运行的脚本，您可以将第一次`date`调用的错误静音并与另一个调用“或”( `||`)。哪个先来并不重要。

```
date -u -d "+${max_age}Seconds" +"%Y-%m-%dT%H:%M:%SZ" 2>/dev/null || \
date -u -v "+${max_age}S"       +"%Y-%m-%dT%H:%M:%SZ" 
```

例如，此 bash 函数将文件上传到 AWS S3 并设置 a`Expires:`和`Cache-Control:`headers。

```
s3_upload_cache_control(){
  local max_age_seconds="${1}" ;shift         # required
  local bucket_path="${1}"     ;shift         # required
  local filename="${1}"        ;shift         # required
  local remote_filename="/${1:-${filename}}"  # optional
  local fmt="+%Y-%m-%dT%H:%M:%SZ"
  aws s3 cp                                                          \
    "${filename}"                                                    \
    "s3://${bucket_path}${remote_filename}"                          \
    --expires                                                  "$(   \
      date -u -d "+${max_age_seconds}Seconds" $fmt 2>/dev/null  ||   \
      date -u -v "+${max_age_seconds}S"       $fmt               )"  \
    --cache-control max-age=$max_age,public                          \
    --acl public-read
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-03-30T09:02:25.333

对我来说，添加加号`+`只是让它认为我想使用时区。

所以

```
date -d "2021-03-16 00:00:00 +3 minutes" +'%H:%M' 
```

回来`23:01`了，这很奇怪..

但我省略了加号，只是这样做：

```
date -d "2021-03-16 00:00:00 1 hour" +'%H:%M' 
```

然后返回`01:00`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-22T08:57:22.903

根据这个[来源](http://www.cyberciti.biz/tips/linux-unix-get-yesterdays-tomorrows-date.html)，你可以这样做：

> 日期 --date='1 小时'

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T08:56:27.687

`TZ=Asia/Calcutta date`应该工作（显然这会让你在加尔各答的时间）。

这只会更改`TZ`此操作的 TimeZone ( ) 环境变量，它不会将您永久设置为您指定的新时区。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-16T06:56:22.763

我们可以使用下面的代码来获取它，我正在处理一个案例，其中我需要遍历过去 3 个月的日期，我使用下面的代码来遍历相同的

# !/bin/sh

```
for i in {90..1}
  do
   st_dt=$(date +%F' 00:00:00'  -d "-$i days")
   echo $st_dt
   j=$((i-1))
   end_dt=$(date +%F' 00:00:00'  -d "-$j days")
   echo $end_dt
  done 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-26T07:56:10.970

在 Linux shell 脚本中添加 1 小时或 60 分钟。

```
dt=$(date -d '+ 60 minutes'  '+%FT%T.000Z') 
```

# c# - 两个数据库上的事务

> ID：16142977
> 
> 赞同：0
> 
> 时间：2013-04-22T08:52:51.983
> 
> 标签：c#, asp.net, linq

我想知道在这种情况下我该怎么做，如果有人可以帮助我，我将不胜感激！

我将数据库用于注册和角色用户等。我还将另一个数据库用于一个用户的所有数据。我只有一个数据库供所有用户使用，但我为每个用户提供一个数据库来存储他的数据。当我创建用户时，我会在 UserDB 和 UserData 上插入数据。我正在使用会员 api 进行注册。

我想知道如何使用事务来检查所有数据是否正确插入（第一次创建用户时）。

例如：

我注册了一个用户（为我的 UserDB 上的每个表创建一行）。我在他的数据数据库的一个表中为该用户创建了一个包含主要信息的数据库。

如果我可以在 Data DB 上插入，我怎么能回滚事务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T12:52:53.200

正如其他人在评论中指出的那样，您需要使用分布式事务来确保两个数据库事务在单个工作单元下进行（或者即使更新同一个数据库，因为成员资格将使用自己的连接，仍然需要 DTC ）。通过将您对 the`ASP Net Membership API`和其他数据库连接（例如 Linq2SQL 或实体框架）的调用包装在 a 下`System.Transactions.TransactionScope`，您可以确保您的更新是 ACID。

请注意，您需要在应用服务器和两个数据库服务器上运行和配置 MS DTC。

下面是一个例子：

```
using (var ts = new TransactionScope())
{
    // Update Membership user   
    MembershipUser currentUser = Membership.GetUser(someUserId);    
    currentUser.Comment = "HairColor is changing";
    Membership.UpdateUser(currentUser);

    // Update equivalent record in other database (assumed EF Context and Same Primary Key)
    var otherUser = _db.OtherUserTable.Where(ut => ut.UserId == someUserId)
                                      .FirstOrDefault();
    otherUser.HairColor = "Orange";
    _db.SaveChanges();

    // Commit  
    ts.Complete();
} 
```

需要注意的一个警告`TransactionScope`是，默认隔离级别是`Read Serializable`，这在许多情况下可能有点过分——`Read Committed`通常对于大多数情况来说已经足够了。请参阅此处了解更多信息：[为什么 System.Transactions TransactionScope 默认 Isolationlevel Serializable](https://stackoverflow.com/questions/11292763/why-is-system-transactions-transactionscope-default-isolationlevel-serializable)。

# facebook - Facebook 搜索 API 抛出 OAuthException

> ID：16142978
> 
> 赞同：1
> 
> 时间：2013-04-22T08:52:56.407
> 
> 标签：facebook, facebook-graph-api

我使用 facebook 图形搜索来获取有关 url 的信息。所以我使用 url 作为搜索值。

几天以来，出了点问题，我不知道为什么？

大约 30% 的搜索值会抛出此错误：

```
{
   "error": {
      "message": "An unknown error has occurred.",
      "type": "OAuthException",
      "code": 1
   }
} 
```

这里有一个例子：

[https://graph.facebook.com/search?q=poolhall.de&type=page](https://graph.facebook.com/search?q=poolhall.de&type=page) <- 有效！

[https://graph.facebook.com/search?q=pool-hall.de&type=page](https://graph.facebook.com/search?q=pool-hall.de&type=page) <- 错误！

唯一的区别：searchvalue

```
"poolhall.de" <-> "pool-hall.de" 
```

另一个带有错误的 url 搜索“horje.de”

```
"horje.de" -> error, "horje" and "horje.com" etc -> no error! 
```

但是为什么会抛出“OAuthExeption”呢？
API不需要授权！只需复制浏览器地址行中的 postet URL，您就会得到没有身份验证的结果。为什么某些搜索值会引发错误而其他搜索值有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T17:51:36.123

更新：大约一个小时后，看起来 Facebook 已经修复了这个错误！不再出现“OAuthExeption”错误！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:04:47.893

它们仍处于测试阶段，我对此进行了一些测试，这看起来确实像一个错误。所以可能只需要报告这个问题或者等到它变得稳定。

# javascript - AppJS 拖放事件从未触发

> ID：16142980
> 
> 赞同：2
> 
> 时间：2013-04-22T08:53:06.117
> 
> 标签：javascript, node.js, webkit, dom-events, appjs

使用 AppJS ( [http://appjs.org/](http://appjs.org/) )，它基本上为 NodeJS 提供了一个可以使用的 webkit 窗口。我正在尝试利用拖放事件来处理要在我的代码中使用的文件和 URL。

拖放的简短代码可以在这里找到：[https ://github.com/appjs/appjs/wiki/HTML5:-Drag-&-Drop-from-Desktop](https://github.com/appjs/appjs/wiki/HTML5:-Drag-&-Drop-from-Desktop)

我用来创建窗口的代码：

```
var app_window = appjs.createWindow({
  width  : 200,
  height : 200,
  showChrome : true, //display as standard os window with max/min/close buttons
  alpha: false,
  autoResize: true,  //adjust window size automatically according to content.
  resizable: true,   //allow user resize of window
  margin: 0,
  disableSecurity:true, //turn off security restrictions.
  showResizeGrip:false, //show/hide the resize grip.
  name:'Drag and Drop',   //undocumented parameter
  opacity:1,
  fullscreen:false,
  topmost:true
}); 
```

事件处理程序代码：

```
var window_drop = function(event) { // this code never fires.
  event.preventDefault();
  console.log('drop event');
}; 
```

以及我为触发事件而设置的代码：

```
app_window.on('ready', function() {
  app_window.require = require;
  app_window.process = process;
  app_window.module = module;
  app_window.console = console;

  app_window.frame.show();
  app_window.frame.center();

  app_window.addEventListener("drop", window_drop);
}); 
```

规格：我在 Mac OSX Lion 上运行 NodeJS 32 位（AppJS 要求）。
我知道 AppJS 还处于起步阶段，但这应该可以。

**可能是什么问题呢？为什么该事件从未触发？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T16:57:12.967

我不完全确定您的方法为什么不起作用，但请尝试我使用的方法（并且有效）：-

在您的主 html 中，在其中添加脚本标记，然后将您的 drop 事件附加到 app-ready 事件中，如下所示：

```
addEventListener('app-ready', function(e){
    window.addEventListener("drop", window_drop);
    window.dispatchEvent(new Event('app-done'));
}); 
```

# r - 使用 tapply/dapply 等进行 t.tests

> ID：16142981
> 
> 赞同：0
> 
> 时间：2013-04-22T08:53:10.617
> 
> 标签：r

我有一个来自 interlab 研究的数据框，如下[http://pastebin.com/AD57AYD1](http://pastebin.com/AD57AYD1)

本质上lab=Laboratory，mat=material，fab=strength，thick=thickness

我想要 t.test 数据来比较每种材料的每个实验室。

即，对于 mat=v，我想运行一个 t.test 来比较实验室 B 和实验室 S。

对于材料 c、n 和 l 也是如此。

由于我无法弄清楚如何有效地做到这一点，我使用 intaraction 函数创建了一个列（我知道必须有更简单的方法！）然后为我感兴趣的每个组合运行 t.tests。

```
# create a new column with lab/mat factors combined
interlab$allfacts<-interaction(interlab$lab,interlab$mat)

tv<-with(interlab, t.test(fab[allfacts == "S.v"],
        fab[allfacts == "B.v"],var.equal=FALSE))
tv

tl<-with(interlab, t.test(fab[allfacts == "S.l"],
        fab[allfacts == "B.l"],var.equal=FALSE))
tl

... etc etc 
```

我确信我应该能够使用其中一个 plyr 函数，也许是这样的：

```
tapply(interlab$fab, list(interlab$lab,interlab$mat), t.test) 
```

但这行不通。

非常感谢任何帮助。皮特

编辑：除了下面的评论之外，我还查看了 pairwise.t.test 在这方面的功能，但它进行了太多的比较（即，它对实验室 B 腈与实验室 S 乙烯基进行了 t 检验——即无关紧要。我这样称呼它：

```
pairwise.t.test(interlab$fab,interaction(interlab$mat,interlab$lab),paired=FALSE, pool.sd=FALSE) 
```

它给了我

```
> pairwise.t.test(interlab$fab,interaction(interlab$mat,interlab$lab),paired=FALSE, pool.sd=FALSE)

Pairwise comparisons using t tests with non-pooled SD 

    data:  interlab$fab and interaction(interlab$mat, interlab$lab) 

    c.B     l.B     n.B     v.B     c.S     l.S     n.S    
    l.B 0.54484 -       -       -       -       -       -      
    n.B 3.8e-07 1.9e-06 -       -       -       -       -      
    v.B 0.93881 0.22393 3.6e-07 -       -       -       -      
    c.S 0.00576 0.93881 1.2e-05 0.00026 -       -       -      
    l.S 0.00067 0.48601 2.5e-05 4.6e-05 0.89883 -       -      
    n.S 4.3e-12 2.2e-10 0.92366 5.4e-12 6.7e-10 7.7e-10 -      
    v.S 0.93881 0.93881 1.9e-06 0.31885 0.01217 0.00169 1.3e-10

    P value adjustment method: holm 
```

我理解进行多重比较和必须调整显着性标准的问题。我只是无法得到成对的调用来只做我感兴趣的测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:28:24.647

有一个使用包 plyr 的解决方案

```
FUN <- function(x) {
 mat <- matrix(numeric(), 1, 2)
 colnames(mat) <- tail(colnames(x),2)
 for (i in 1:ncol(mat)) {
    mat[1,i] <- t.test(x[,"thick"]~x[,"lab"])$p.value
    mat[1,i] <- t.test(x[,"fab"] ~ x[,"lab"])$p.value
  }
  mat  
}
# if you are only interested by fab :
 FUN <- function(x) {
   t.test(x[,"fab"] ~ x[,"lab"])$p.value  
  }

ddply(tab, .(mat), FUN) 
```

高温高压

# php - 使用 jQuery 翻译 ioncube 编码文件中的文本

> ID：16142982
> 
> 赞同：0
> 
> 时间：2013-04-22T08:53:10.583
> 
> 标签：php, jquery, translate, encryption, ioncube

我有一个我想彻底翻译的 Ioncube php 脚本。

我努力完成第一部分：翻译模板文件。但是，仍然有很多文本卡在 Ioncube 编码的 php 文件中。

听说有一天可以，用jQuery修改网站上的输出

有人可以向我解释如何使用 jQuery 翻译文本论文 ioncube 加密文件输出或... ...请建议任何其他方式来做到这一点。我需要这对相关网站的访问者来说是透明的。

请注意，我不想解码加密文件。我只想用其他内容更改页面上显示的文本。

预先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T07:34:52.500

这是代码：

< iframe name="framename" height="500" scrolling="auto" src="about:blank" style="width:80%;border:1px solid #fff;">

这会输出一个谷歌身份验证器页面。

我需要修改 iframe 中内容的输出。

可能的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:06:41.583

我会想象用 jQuery 做到这一点的唯一方法是在页面加载后进行 DOM 操作。

例如，如果 Ioncube 文本位于 id 为“footer”的 div 中

```
$(function() {
    $('#footer').load('http://somedomain.tld/translated/footer.php');
}); 
```

有关更多信息，请参阅[http://api.jquery.com/load/](http://api.jquery.com/load/)文档

# visual-studio-2010 - 在 OpenGL 项目中写入控制台

> ID：16142985
> 
> 赞同：-2
> 
> 时间：2013-04-22T08:53:16.413
> 
> 标签：visual-studio-2010, opengl

我在 Visual Studio 2010 win32 控制台应用程序中制作了一个太阳能系统项目。
我现在想在控制台中写一些关于行星的信息。

在该`main`方法中，我有鼠标功能，在绘制每个行星之前，我已经使用了该`glLoadName`功能。目前我在任何地方点击它都说我没有选择任何内容。

所有代码：

```
#include "SolarSystem.h"

#include "windows.h"
#include <stdio.h>
#include <stdlib.h>
#include<iostream>
using namespace std;
#include <gl/glut.h>
#include <GL/glu.h>
#include <gl/GL.h>
#include <math.h>

// Valori lumina
GLfloat  whiteLight[] = { 0.2f, 0.2f, 0.2f, 1.0f };
GLfloat  sourceLight[] = { 0.8f, 0.8f, 0.8f, 1.0f };
GLfloat  lightPos[] = { 0.0f, 0.0f, 0.0f, 1.0f };

//verificare pt incarcare texturi doar o data
bool texturesCreated = false;

//texturi
GLuint sunTexture;
GLuint mercuryTexture;
GLuint venusTexture;
GLuint earthTexture;
GLuint moonTexture;
GLuint marsTexture;
GLuint jupiterTexture;
GLuint saturnTexture;
GLuint uranusTexture;
GLuint neptuneTexture;
GLuint plutoTexture;
GLuint starsTexture;

//pozitia si rotatia soarelui
GLfloat fSunX = 0.0f;
GLfloat fSunY = 0.0f;
GLfloat fSunZ = -300.0f;
GLfloat fCamX = 0.0f;
GLfloat fCamY = 0.0f;
GLfloat fCamZ = 0.0f;
GLfloat fSunRotX = 0.0f;
GLfloat fSunRotY = 0.0f;
GLfloat fSunRotZ = 0.0f;

//definitii functii
void keyDown(unsigned char, int, int);
unsigned char *LoadBmp(char *fn, int *wi, int *hi);
void GenerateTextures(char *, int);
void InitialiseTextures(void);

void gl_init(int w, int h);
void gl_select(int x, int y);
void mouseClick();
void mousedw(int x, int y, int but);
void list_hits(GLint hits, GLuint *names);

//definitii pt click
#define Sun 1
#define Mercur 2
#define Venus 3
#define Terra 4
#define Moon 5
#define Marte 6
#define Jupiter 7
#define Saturn 8
#define Uranus 9
#define Pluto 10
#define Neptun 11
#define MAXSELECT 100
#define BUFSIZE 512

#define SW 450
#define SH 450

GLuint selectBuf[BUFSIZE];
GLuint buf_selectie[MAXSELECT];
GLint windH;
GLint viewport [4];

// Scena
void RenderScene(void)
{
    //picking initializare stiva
    glInitNames();

    GLUquadricObj* pObj;
    // Unghiul de revolutie al planetelor
    static float fMoonRot = 0.0f;
    static float fEarthRot = 0.0f;
    static float fMercuryRot = 0.0f;
    static float fVenusRot = 0.0f;
    static float fMarsRot = 0.0f;
    static float fJupiterRot = 0.0f;
    static float fSaturnRot = 0.0f;
    static float fUranusRot = 0.0f;
    static float fNeptuneRot = 0.0f;
    static float fPlutoRot = 0.0f;

    // 
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    //Salvarea matricii cu stari 
    glMatrixMode(GL_MODELVIEW);
    glPushMatrix();

    // translatarea scenei in functie de soare
    glTranslatef(fSunX, fSunY, fSunZ);  

    // Soare
    glDisable(GL_LIGHTING);

    pObj = gluNewQuadric(); //creare obiecte cuadrice pt pObj
    gluQuadricTexture(pObj,GL_TRUE);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, sunTexture); //setare textura soare

    //Rotatia soarelui in jurul axei sale
    glRotatef(fSunRotX, 1.0f, 0.0f, 0.0f); //rotatie soare in jurul axei x
    glRotatef(fSunRotY, 0.0f, 1.0f, 0.0f); //rotatie soare in jurul axei y
    glRotatef(fSunRotZ, 0.0f, 0.0f, 1.0f); //rotatie soare in jurul axei z
    glLoadName(Sun);
    gluSphere(pObj, 33.0f, 30, 17); //draw sphere for the sun
    glDisable(GL_TEXTURE_2D);

    gluDeleteQuadric(pObj); //eliberare obiect pObj

    glEnable(GL_LIGHTING);

    // mutarea luminii la pozitia soareui
    glLightfv(GL_LIGHT0,GL_POSITION,lightPos);

#pragma region skybox

    // memorare matrice currenta
    glPushMatrix();

    glPushAttrib(GL_ENABLE_BIT);
    glEnable(GL_TEXTURE_2D);

    glColor4f(1,1,1,1);
    GLfloat val = 450.0f;

    // Render the front quad
    glBindTexture(GL_TEXTURE_2D, starsTexture);
    glBegin(GL_QUADS); 
    glTexCoord2f(0, 0); glVertex3f(val, -val, val);
    glTexCoord2f(1, 0); glVertex3f(-val, -val, val);
    glTexCoord2f(1, 1); glVertex3f(-val, val, val);
    glTexCoord2f(0, 1); glVertex3f(val, val, val);
    glEnd();

    // Render the left quad
    glBindTexture(GL_TEXTURE_2D, starsTexture);
    glBegin(GL_QUADS);
    glTexCoord2f(0, 0); glVertex3f(val, -val, -val);
    glTexCoord2f(1, 0); glVertex3f(val, -val, val);
    glTexCoord2f(1, 1); glVertex3f(val, val, val);
    glTexCoord2f(0, 1); glVertex3f(val, val, -val);
    glEnd();

    // Render the back quad
    glBindTexture(GL_TEXTURE_2D, starsTexture);
    glBegin(GL_QUADS);
    glTexCoord2f(0, 0); glVertex3f(-val, -val, -val);
    glTexCoord2f(1, 0); glVertex3f(val, -val, -val);
    glTexCoord2f(1, 1); glVertex3f(val, val, -val);
    glTexCoord2f(0, 1); glVertex3f(-val, val, -val);

    glEnd();

    // Render the right quad
    glBindTexture(GL_TEXTURE_2D, starsTexture);
    glBegin(GL_QUADS);
    glTexCoord2f(0, 0); glVertex3f(-val, val, -val);
    glTexCoord2f(1, 0); glVertex3f(-val, val, val);
    glTexCoord2f(1, 1); glVertex3f(-val, -val, val);
    glTexCoord2f(0, 1); glVertex3f(-val, -val, -val);
    glEnd();

    // Render the top quad
    glBindTexture(GL_TEXTURE_2D, starsTexture);
    glBegin(GL_QUADS);
    glTexCoord2f(0, 0); glVertex3f(val, val, -val);
    glTexCoord2f(1, 0); glVertex3f(val, val, val);
    glTexCoord2f(1, 1); glVertex3f(-val, val, val);
    glTexCoord2f(0, 1); glVertex3f(-val, val, -val);
    glEnd();

    // Render the bottom quad
    glBindTexture(GL_TEXTURE_2D, starsTexture);
    glBegin(GL_QUADS);
    glTexCoord2f(0, 0); glVertex3f(-val, -val, -val);
    glTexCoord2f(1, 0); glVertex3f(-val, -val, val);
    glTexCoord2f(1, 1); glVertex3f(val, -val, val);
    glTexCoord2f(0, 1); glVertex3f(val, -val, -val);
    glEnd();

    // Resetare matrice
    glPopAttrib();
    glPopMatrix();

#pragma endregion

#pragma region mercury 

    //Mercur
    glPushMatrix(); //salvare matrice

    pObj = gluNewQuadric();
    gluQuadricTexture(pObj,GL_TRUE);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, mercuryTexture); //setare textura mercur

    //coord de rotatie pt mercur
    glRotatef(fMercuryRot, 0.0f, 2.0f, 0.3f);

    //desenare Mercur
    glTranslatef(45.0f,-15.0f,0.0f); //mutare mercur la distanta de soare
    glRotatef(270.0f, 1.0f, 0.0f, 0.0f); //rotire
    glRotatef(fMercuryRot * 3, 0.0f, 0.0f, 1.0f); //rotatie in jurul axei sale
    glLoadName(Mercur);
    gluSphere(pObj, 8.0f, 30, 17); //desenare sfera
    glDisable(GL_TEXTURE_2D);

    gluDeleteQuadric(pObj);

    //viteza de rotatie
    fMercuryRot += 20.0f;
    //resetare rotatie
    if(fMercuryRot >= 360.0f)
        fMercuryRot = 0.0f;

    glPopMatrix(); //resetare matrice

#pragma endregion

#pragma region venus
    //Venus
    glPushMatrix(); //salvare matrice

    pObj = gluNewQuadric();
    gluQuadricTexture(pObj,GL_TRUE);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, venusTexture); //setare textura venus

    //coord de rotire pt venus
    glRotatef(fVenusRot, 0.0f, 1.0f, 0.0f);

    //Desenare Venus
    glTranslatef(65.0f,0.0f,0.0f); //mutare venus la distanta de soare
    glRotatef(270.0f, 1.0f, 0.0f, 0.0f); //rotire
    glRotatef(fVenusRot * 3, 0.0f, 0.0f, 1.0f); //rotatie in jurul axei sale
    glLoadName(Venus);
    gluSphere(pObj, 14.0f, 30, 17); //desenare sfera pt venus
    glDisable(GL_TEXTURE_2D);

    gluDeleteQuadric(pObj); 

    //viteza rotire
    fVenusRot += 10.0f;
    //resetare rotire
    if(fVenusRot >= 360.0f)
        fVenusRot = 0.0f;

    glPopMatrix();

#pragma endregion

#pragma region marte
    //Marte
    glPushMatrix();

    pObj = gluNewQuadric();
    gluQuadricTexture(pObj,GL_TRUE);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, marsTexture); //setare textura marte

    //coord de rotire pt marte
    glRotatef(fMarsRot, 0.0f, 1.0f, 0.3f);

    //desenare marte
    glTranslatef(130.0f,0.0f,0.0f); //pozitionare marte la distanta de soare
    glRotatef(270.0f, 1.0f, 0.0f, 0.0f); //rotatie 
    glRotatef(fMarsRot * 3, 0.0f, 0.0f, 1.0f); //rotatie in jurul axei sale
    glLoadName(Marte);
    gluSphere(pObj, 7.0f, 30, 17); //desenare sfera
    glDisable(GL_TEXTURE_2D);

    gluDeleteQuadric(pObj);

    //viteza rotatie
    fMarsRot += 4.0f;
    //resetare rotatie
    if(fMarsRot >= 360.0f)
        fMarsRot = 0.0f;

    glPopMatrix();

#pragma endregion

#pragma region jupiter
    //Jupiter
    glPushMatrix(); 

    pObj = gluNewQuadric();
    gluQuadricTexture(pObj,GL_TRUE);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, jupiterTexture); //setare textura jupiter

    //coord de rotire pt jupiter
    glRotatef(fJupiterRot, 0.0f, 1.0f, -0.3f);

    //Desenare Jupiter
    glTranslatef(200.0f,0.0f,0.0f); //pozitionare jupiter la distanta de soare
    glRotatef(270.0f, 1.0f, 0.0f, 0.0f); //rotatie 
    glRotatef(fJupiterRot * 3, 0.0f, 0.0f, 1.0f); //rotatie in jurul axei sale
    glLoadName(Jupiter);
    gluSphere(pObj, 22.0f, 30, 17); //desenare sfera
    glDisable(GL_TEXTURE_2D);

    gluDeleteQuadric(pObj); 

    //setare viteza de rotatie 
    fJupiterRot += 2.0f;
    //resetare rotatie
    if(fJupiterRot >= 360.0f)
        fJupiterRot = 0.0f;

    glPopMatrix();

#pragma endregion

#pragma region saturn
    //Saturn
    glPushMatrix(); 

    pObj = gluNewQuadric();
    gluQuadricTexture(pObj,GL_TRUE);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, saturnTexture); //setare textura Saturn

    //Coord de rotire pt Saturn
    glRotatef(fSaturnRot, 0.0f, 0.8f, -0.2f);

    //Desenare Saturn
    glTranslatef(245.0f,0.0f,0.0f); //setare pozitie Saturn la distanta de soare
    glRotatef(270.0f, 1.0f, 0.0f, 0.0f); //Rotatie
    glRotatef(fSaturnRot * 3, 0.0f, 0.0f, 1.0f); //rotatie in jurul axei sale
    glLoadName(Saturn);
    gluSphere(pObj, 20.0f, 30, 17); //desenare sfera
    glDisable(GL_TEXTURE_2D);

    gluDeleteQuadric(pObj); 

    //viteza rotatie
    fSaturnRot += 1.5f;
    //resetare rotatie
    if(fSaturnRot >= 360.0f)
        fSaturnRot = 0.0f;

    glPopMatrix();

#pragma endregion

#pragma region uranus
    //Uranus
    glPushMatrix();

    pObj = gluNewQuadric();
    gluQuadricTexture(pObj,GL_TRUE);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, uranusTexture); //setare textura pt Uranus

    //coord de rotire pt Uranus
    glRotatef(fUranusRot, 0.0f, 0.8f, 0.2f);

    //Desenare Uranus
    glTranslatef(285.0f,0.0f,0.0f); //pozitionare Uranus la distanta de soare
    glRotatef(270.0f, 1.0f, 0.0f, 0.0f); //rotatie 
    glRotatef(fUranusRot * 3, 0.0f, 0.0f, 1.0f); //rotatie in jurul axei sale
    glLoadName(Uranus);
    gluSphere(pObj, 10.0f, 30, 17); //desenare sfera
    glDisable(GL_TEXTURE_2D);

    gluDeleteQuadric(pObj); 

    //viteza de rotatie
    fUranusRot += 1.0f;
    //resetare rotatie
    if(fUranusRot >= 360.0f)
        fUranusRot = 0.0f;

    glPopMatrix();

#pragma endregion

#pragma region neptun
    //Neptun
    glPushMatrix();

    pObj = gluNewQuadric();
    gluQuadricTexture(pObj,GL_TRUE);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, neptuneTexture); //setare textura pt neptun

    //coord de rotatie pt neptun
    glRotatef(fNeptuneRot, 0.0f, 0.8f, 0.2f);

    //Desenare Neptune
    glTranslatef(315.0f,0.0f,0.0f); //setare pozitie la distanta de soare
    glRotatef(270.0f, 1.0f, 0.0f, 0.0f); //rotire 
    glRotatef(fNeptuneRot * 3, 0.0f, 0.0f, 1.0f); //rotatie in jurul axei sale
    glLoadName(Neptun);
    gluSphere(pObj, 12.0f, 30, 17); //desenare sfera pt neptun
    glDisable(GL_TEXTURE_2D);

    gluDeleteQuadric(pObj); 

    //viteza de rotatie
    fNeptuneRot += 0.6f;
    //resetare rotatie
    if(fNeptuneRot >= 360.0f)
        fNeptuneRot = 0.0f;

    glPopMatrix();

#pragma endregion

#pragma region pluto
    //Pluto
    glPushMatrix(); 

    pObj = gluNewQuadric();
    gluQuadricTexture(pObj,GL_TRUE);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, plutoTexture); //setare textura pt pluto

    //coord de rotatie pt Pluto
    glRotatef(fPlutoRot, 0.0f, 0.8f, 0.2f);

    //Desenare Pluto
    glTranslatef(350.0f,0.0f,0.0f); //setare la distanta de soare
    glRotatef(270.0f, 1.0f, 0.0f, 0.0f); //rotatie 
    glRotatef(fPlutoRot * 3, 0.0f, 0.0f, 1.0f); //rotatie in jurul axei sale
    glLoadName(Pluto);
    gluSphere(pObj, 12.0f, 30, 17); //desenare sfera
    glDisable(GL_TEXTURE_2D);

    gluDeleteQuadric(pObj); 

    //viteza de rotatie
    fPlutoRot += 0.2f;
    //
    if(fPlutoRot >= 360.0f)
        fPlutoRot = 0.0f;

    glPopMatrix();

#pragma endregion

#pragma region Terra
    //Pamant
    glPushMatrix();

    pObj = gluNewQuadric();
    gluQuadricTexture(pObj,GL_TRUE);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, earthTexture);//setare textura

    // coord de rotire pt pamant
    glRotatef(fEarthRot, 0.0f, 1.0f, 0.0f); //rotatie in jurul soarelui

    // Desenare Terra
    glTranslatef(100.0f,0.0f,0.0f); //setare distanta de soare
    glRotatef(270.0f, 1.0f, 0.0f, 0.0f); //rotire
    glRotatef(fEarthRot * 3, 0.0f, 0.0f, 1.0f); //rotire in jurul axei sale
    glLoadName(Terra);
    gluSphere(pObj, 16.0f, 30, 17); //desenare sfera
    glDisable(GL_TEXTURE_2D);

    gluDeleteQuadric(pObj); 

#pragma region earthMoon
    // Desenare Luna
    pObj = gluNewQuadric();
    gluQuadricTexture(pObj,GL_TRUE);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, moonTexture); //setare textura Luna
    glRotatef(fMoonRot,0.0f, 0.0f, 1.0f); //rotire luna in jurul pamantului
    glTranslatef(25.0f, 0.0f, 0.0f); //distanta fata de pamant
    glRotatef(270.0f, 1.0f, 0.0f, 0.0f); //rotire
    glRotatef(fMoonRot * 3, 0.0f, 0.0f, 1.0f); //rotire in jurul axei sale

    //viteza de rotatie
    fMoonRot+= 15.0f;
    //
    if(fMoonRot >= 360.0f)
        fMoonRot = 0.0f;
    glLoadName(Moon);
    gluSphere(pObj, 4.0f, 30, 17); //desenare sfera pt luna
    glDisable(GL_TEXTURE_2D);

    gluDeleteQuadric(pObj);

    glPopMatrix();  
#pragma endregion

    //viteza de rotire a pamantului
    fEarthRot += 5.0f;
    //
    if(fEarthRot >= 360.0f)
        fEarthRot = 0.0f;

    glPopMatrix();  // 

#pragma endregion

    // Show  image
    glutSwapBuffers();

}

void SetupRC()
{
    //valoare si coord lumina
    glEnable(GL_DEPTH_TEST);    // 
    glFrontFace(GL_CCW);        // invers acelor de ceasornic (pt sfere)
    glEnable(GL_CULL_FACE);     //

    // on lumina
    glEnable(GL_LIGHTING);

    // setare lumina
    glLightModelfv(GL_LIGHT_MODEL_AMBIENT,whiteLight);

    glLightfv(GL_LIGHT0,GL_AMBIENT_AND_DIFFUSE,sourceLight);
    glLightfv(GL_LIGHT0,GL_POSITION,lightPos);
    glEnable(GL_LIGHT0);

    //
    glEnable(GL_COLOR_MATERIAL);

    // 
    glColorMaterial(GL_FRONT, GL_AMBIENT_AND_DIFFUSE);

    // setare background negru
    glClearColor(0.0f, 0.0f, 0.0f, 1.0f );
}

void TimerFunc(int value)
{
    glutPostRedisplay();
    glutTimerFunc(100, TimerFunc, 1);
}

//posibilitate de minimizare si maximizare de catre user
void ChangeSize(int w, int h)
{
    GLfloat fAspect;

    // 
    if(h == 0)
        h = 1;

    // setare vedere in functie de marimea ferestrei
    glViewport(0, 0, w, h);

    // aspect in functie de marimea ferestrei
    fAspect = (GLfloat)w/(GLfloat)h;

    //  setare coord pt ferestra
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    // modul de vizionare
    gluPerspective(45.0f, fAspect, 1.0, 1600.0);

    // 
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
}

//void gl_init(int w, int h)
//{
//  glClearColor(0.0f, 0.0f, 0.0f, 1.0f );
//  glViewport(0, 0, w, h);
//
//  glMatrixMode(GL_PROJECTION);
//  glLoadIdentity();
//
//  gluPerspective(60.0, 1.0, 0.0001, 1000.0);
//
//  glMatrixMode(GL_MODELVIEW);
//}

void reshape(int w, int h)
{
    glViewport (0, 0, (GLsizei) w, (GLsizei) h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective (60.0, (GLfloat) w/(GLfloat) h, 0.0001, 1000.0);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
}

void list_hits(GLint hits, GLuint *names)
{

    printf("%d hits:\n", hits);

    switch(hits)
    {

    case Mercur:
        cout<<"Ati selectat Planeta Mercur"<<endl;
        break;
    case Sun:
        cout<<"Ati selectat Soarele"<<endl;
        break;
    case Saturn:
        cout<<"Ati selectat Planeta Saturn"<<endl;
        break;
    case Neptun:
        cout<<"Ati selectat Planeta Neptun"<<endl;
        break;
    case Uranus:
        cout<<"Ati selectat Planeta Uranus"<<endl;
        break;
    case Jupiter:
        cout<<"Ati selectat Planeta Jupiter"<<endl;
        break;
    case Marte:
        cout<<"Ati selectat Planeta Marte"<<endl;
        break;
    case Venus:
        cout<<"Ati selectat Planeta Venus"<<endl;
        break;
    case Pluto:
        cout<<"Ati selectat Planeta Pluto"<<endl;
        break;
    case Terra:
        cout<<"Ati selectat Planeta Pamant"<<endl;
        break;
    case Moon:
        cout<<"Ati selectat Luna"<<endl;
        break;
    default:
        cout<<"Nu ati selectat nimic"<<endl;
        break;

    }

}

//void gl_select(int x, int y)
//{
//  GLuint buff[64] = {0};
//  GLint hits, view[4];
//  
//  /*
//  This choose the buffer where store the values for the selection data
//  */
//  glSelectBuffer(64, buff);
//
//  /*
//  This retrieve info about the viewport
//  */
//  glGetIntegerv(GL_VIEWPORT, view);
//
//  /*
//  Switching in selecton mode
//  */
//  glRenderMode(GL_SELECT);
//
//  /*
//  Clearing the name's stack
//  This stack contains all the info about the objects
//  */
//  glInitNames();
//
//  /*
//  Now fill the stack with one element (or glLoadName will generate an error)
//  */
//  glLoadName(0);
//
//  /*
//  Now modify the vieving volume, restricting selection area around the cursor
//  */
//  glMatrixMode(GL_PROJECTION);
//  glPushMatrix();
//  glLoadIdentity();
//
//  /*
//  restrict the draw to an area around the cursor
//  */
//  gluPickMatrix(x, y, 0.2, 0.2, view);
//  gluPerspective(60, 0.5, 0.0001, 1000.0);
//
//  /*
//  Draw the objects onto the screen
//  */
//  glMatrixMode(GL_MODELVIEW);
//
//  /*
//  draw only the names in the stack, and fill the array
//  */
//  glutSwapBuffers();
//  RenderScene();
//
//  /*
//  Do you remeber? We do pushMatrix in PROJECTION mode
//  */
//  glMatrixMode(GL_PROJECTION);
//  glPopMatrix();
//
//  /*
//  get number of objects drawed in that area
//  and return to render mode
//  */
//  hits = glRenderMode(GL_RENDER);
//
//  /*
//  Print a list of the objects
//  */
//  list_hits(hits, buff);
//
//  /*
//  uncomment this to show the whole buffer
//  * /
//  gl_selall(hits, buff);
//  */
//
//  glMatrixMode(GL_MODELVIEW);
//}

void mouse(int button, int state, int x, int y) 
{
    GLuint buff[64] = {0};
    GLint hits,view[4];
    GLint viewport[4];
    GLdouble mvmatrix[16], projmatrix[16];
    GLint realy;  /*  OpenGL y coordinate position  */
    GLdouble wx, wy, wz;  /*  returned world x, y, z coords  */

    switch (button) {
    case GLUT_LEFT_BUTTON:
        if (state == GLUT_DOWN) {
            glGetIntegerv (GL_VIEWPORT, viewport);
            glGetDoublev (GL_MODELVIEW_MATRIX, mvmatrix);
            glGetDoublev (GL_PROJECTION_MATRIX, projmatrix);
            /*  note viewport[3] is height of window in pixels  */
            realy = viewport[3] - (GLint) y - 1;
            //printf ("Coordinates at cursor are (%4d, %4d)\n", x, realy);

            hits = glRenderMode(GL_RENDER);
            gluUnProject ((GLdouble) x, (GLdouble) realy, 0.0, 
                mvmatrix, projmatrix, viewport, &wx, &wy, &wz); 
            //printf ("World coords at z=0.0 are (%f, %f, %f)\n", 
            //  wx, wy, wz);
            gluUnProject ((GLdouble) x, (GLdouble) realy, 1.0, 
                mvmatrix, projmatrix, viewport, &wx, &wy, &wz); 
            glSelectBuffer(64, buff);
            list_hits(hits, buff);
            //printf ("World coords at z=1.0 are (%f, %f, %f)\n", 
            //  wx, wy, wz);

        }
        break;
    default:
        break;

    }
}
int main(int argc, char* argv[])
{
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
    ///glutInitWindowSize(1000, 600);
    glutInitWindowSize(SW, SH);
    glutInitWindowPosition(0, 0);
    glutCreateWindow("Solar System"); //numele ferestrei
    glutReshapeFunc(ChangeSize);
    glutDisplayFunc(RenderScene);
    glutKeyboardFunc(keyDown); //pt taste
    //INREGISTRARIILE FUNCTIILOR PT MOUSE
    //glutMouseFunc(mouseClick);
    //  glutMouseFunc(mouse);
    glutMouseFunc(mouse);
    //gl_init(SW, SH);

    glutTimerFunc(250, TimerFunc, 1);
    SetupRC();
    //verificare textura
    if (texturesCreated == false)
    {
        InitialiseTextures();
        texturesCreated = true; //
    }
    glutMainLoop();

    return 0;
}

//controale
void keyDown(unsigned char key, int x, int y) 
{
    //Moves the camera to the right
    if (key == 'A' || key == 'a')
    {
        fSunX += 3.0f;
        fCamX += -3.0f;
    }
    //Moves the camera to the left
    if (key == 'D' || key == 'd')
    {
        fSunX += -3.0f;
        fCamX += 3.0f;
    }
    //Moves the camera up
    if (key == 'W' || key == 'w')
    {
        fSunY += -3.0f;
        fCamY += 3.0f;
    }
    //Moves the camera down
    if (key == 'S' || key == 's')
    {
        fSunY += 3.0f;
        fCamY += -3.0f;
    }
    //Zooms the camera out
    if (key == 'X' || key == 'x')
    {
        fSunZ += -3.0f;
        fCamZ += 3.0f;
    }
    //Zooms the camera in
    if (key == 'Z' || key == 'z')
    {
        fSunZ += 3.0f;
        fCamZ += -3.0f;
    }
    //Rotates the camera along the positive X axis
    if (key == 'J' || key == 'j')
    {
        fSunRotY += 3.0f;
    }
    //Rotates the camera along the negative X axis
    if (key == 'L' || key == 'l')
    {
        fSunRotY += -3.0f;
    }
    //Rotates the camera along the negative Y axis
    if (key == 'I' || key == 'i')
    {
        fSunRotX += 3.0f;
    }
    //Rotates the camera along the positive Y axis
    if (key == 'K' || key == 'k')
    {
        fSunRotX += -3.0f;
    }
    //Rotates the camera along the positive Z axis
    if (key == 'M' || key == 'm')
    {
        fSunRotZ += -3.0f;
    }
    //Rotates the camera along the positive Z axis
    if (key == 'N' || key == 'n')
    {
        fSunRotZ += 3.0f;
    }

}

unsigned char *LoadBmp(char *fn, int *wi, int *hi)
{
    BITMAPFILEHEADER bmfh;
    BITMAPINFOHEADER bmih;
    WORD bits;
    FILE *t24;
    unsigned char *lpBitmapBits;
    long imagesize,nc;

    // citire bitmap
    t24=fopen((char *)fn,"rb");
    if(t24 == NULL){printf("Could not open input file\n"); exit(0);}
    fread((char *)&bmfh,sizeof(BITMAPFILEHEADER),1,t24);
    fread((char *)&bmih,sizeof(BITMAPINFOHEADER),1,t24);
    if(bmih.biClrUsed != 0)nc=bmih.biClrUsed;
    else{
        bits = bmih.biBitCount;
        switch (bits){
        case 1:    nc=2;   break;
        case 4:    nc=16;  break;
        case 8:    nc=256; break;
        default:   nc=0;   break;
        }
    }
    if(nc > 0){printf("Cannot handle paletted image\n"); exit(0);}
    imagesize=bmfh.bfSize-bmfh.bfOffBits;
    if((lpBitmapBits=(unsigned char *)malloc(imagesize)) == NULL){ fclose(t24); exit (0); }
    fread((char *)lpBitmapBits,imagesize,1,t24);
    fclose(t24);
    *wi=bmih.biWidth; *hi=bmih.biHeight;
    return lpBitmapBits;
}

void InitialiseTextures()
{
    //load texturi
    GenerateTextures("earth.bmp", 1);
    GenerateTextures("sun.bmp", 2);
    GenerateTextures("mercur.bmp", 3);
    GenerateTextures("venus.bmp", 4);
    GenerateTextures("moon.bmp", 5);
    GenerateTextures("marte.bmp", 6);
    GenerateTextures("jupiter.bmp", 7);
    GenerateTextures("saturn.bmp", 8);
    GenerateTextures("uranus.bmp", 9);
    GenerateTextures("neptun.bmp", 10);
    GenerateTextures("pluto.bmp", 11);
    GenerateTextures("stars.bmp", 12);
}

//
void GenerateTextures(char *name, int i)
{
    unsigned char *pix;
    int w,h;
    glEnable(GL_TEXTURE_2D);
    //asigane pt texturi
    pix=LoadBmp(name,&w,&h);    
    if (i == 1) //gets & sets textura pt pamant
    {
        glGenTextures(1, &earthTexture);
        glBindTexture(GL_TEXTURE_2D, earthTexture);
    }
    if (i == 2) //gets & sets textura pt soare
    {
        glGenTextures(1, &sunTexture);
        glBindTexture(GL_TEXTURE_2D, sunTexture);
    }
    if (i == 3) //gets & sets textura pt mercur
    {
        glGenTextures(1, &mercuryTexture);
        glBindTexture(GL_TEXTURE_2D, mercuryTexture);
    }
    if (i == 4) //gets & sets textura pt venus
    {
        glGenTextures(1, &venusTexture);
        glBindTexture(GL_TEXTURE_2D, venusTexture);
    }
    if (i == 5) //gets & sets textura pt luna
    {
        glGenTextures(1, &moonTexture);
        glBindTexture(GL_TEXTURE_2D, moonTexture);
    }
    if (i == 6) //gets & sets textura pt marte
    {
        glGenTextures(1, &marsTexture);
        glBindTexture(GL_TEXTURE_2D, marsTexture);
    }
    if (i == 7) //gets & sets textura pt jupiter
    {
        glGenTextures(1, &jupiterTexture);
        glBindTexture(GL_TEXTURE_2D, jupiterTexture);
    }
    if (i == 8) //gets & sets textura pt saturn
    {
        glGenTextures(1, &saturnTexture);
        glBindTexture(GL_TEXTURE_2D, saturnTexture);
    }
    if (i == 9) //gets & setstextura pt uranus
    {
        glGenTextures(1, &uranusTexture);
        glBindTexture(GL_TEXTURE_2D, uranusTexture);
    }
    if (i == 10) //gets & sets textura pt neptun
    {
        glGenTextures(1, &neptuneTexture);
        glBindTexture(GL_TEXTURE_2D, neptuneTexture);
    }
    if (i == 11) //gets & sets textura pt pluto
    {
        glGenTextures(1, &plutoTexture);
        glBindTexture(GL_TEXTURE_2D, plutoTexture);
    }
    if (i == 12) //gets & sets textura pt stele
    {
        glGenTextures(1, &starsTexture);
        glBindTexture(GL_TEXTURE_2D, starsTexture);
    }
    glTexImage2D(   GL_TEXTURE_2D, 0, GL_RGB, w, h,
        0, GL_BGR_EXT, GL_UNSIGNED_BYTE, pix);
    glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    free(pix); //eliberare pix
    glDisable(GL_TEXTURE_2D);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:05:51.363

如果这是您拥有的所有代码，那么您没有正确选择。您有`glRenderMode(GL_RENDER)`，但要使用选择模式，您需要调用`glRenderMode(GL_SELECT)`并渲染要在选择模式中选择的对象。看看这个[OpenGL selection 的描述](http://www.glprogramming.com/red/chapter13.html)。

顺便说一句，这确实是旧的做事方式；它有效，但您可能会研究更好、更现代的方法。

# html - 换行后Div没有垂直对齐

> ID：16142986
> 
> 赞同：1
> 
> 时间：2013-04-22T08:53:16.710
> 
> 标签：html, css

我正在使用phonegap制作一个应用程序，在这个应用程序中有一个议程女巫具有以下格式：http: [//jsfiddle.net/QwVmv/](http://jsfiddle.net/QwVmv/)

它看起来不错，但我遇到的唯一问题是屏幕宽度太小时位置无法正确排列。您可以通过缩小 jsfiddle 的结果屏幕来重现这一点。

**编辑 1** 对不起，我忘了告诉我想如何显示它。我希望换行符后的文本与上面的其余文本垂直对齐。

我使用的代码：HTML：

```
<div class='wrapper' data-id="+contents[i].id+">
    <div class='datefill'></div>
    <div class='date'>
        <span class='day'>22</span>
        <span class='month'>April</span>
        <span class='year'>2013</span>
    </div>
    <div class='agendaheader' id='agenda1'>
        <div class = 'title'>Open House</div>
        <div class = 'time'>00:00 tot 23 April 2013 - 19:00</div>
        <div class='venue'>a location with a long name!</div>
    </div>
    <div style='clear: both;'></div>
    <div class = 'description' id='description1'>A long discription witch is initially hidden.</div>
</div> 
```

CSS：

```
.date {
  position: absolute;
  width: 70px;
  font-family: Georgia, serif;
  color: #999;
  margin: 0 auto;
}

.day, .month, .year {
  position: absolute;
}

.day { 
  font-size: 30px;
  top: 15px;
}

.month { 
  top: 0;
  left: 0;  
  font-size: 18px;
}

.year { 
  top: 19px;
  right: 0;
  font-size: 20px;
  rotation: -90deg !important;
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);  
}

.datefill{
    width:65px;
    height:50px;
    float:left;
}

.wrapper{
    -webkit-tap-highlight-color: rgba(0,0,0,0);
}

.description{
     height: 0;
     max-height: 9999px;
     overflow: hidden;
     -webkit-transition: height 0.4s ease-in-out;
     -moz-transition: height 0.4s ease-in-out;
     -ms-transition: height 0.4s ease-in-out;
     -o-transition: height 0.4s ease-in-out;
     transition: height 0.4s ease-in-out;
}

html{
    padding:0;
    margin:0;
    width:100%;
}

body{
    padding:0;
    margin:0;
    width:100%;
    background-color: #1C1C1C;
    background-size: 50px;
    background-image: url("../img/bg.png");
    outline: 0;
}

.wrapper{
    padding:5px;
    background-color: #1A1A1A;
    -moz-border-radius: 20px;
    -webkit-border-radius: 20px;
    color:#FFFFFF;
    border-radius: 20px;
    border-style:solid;
    border-color:#FA840E;
    border-width:2px;
    margin-top:40px;
    margin-bottom:30px;
    margin-right:7%;
    margin-left:7%;     
    box-shadow:
        0 0 0 2px hsl(0, 0%, 0%),
        0 0 0 4px hsl(30, 96%, 52%);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T08:56:47.657

解决此问题的一种方法是添加

```
.agendaheader {
    margin-left: 65px;
} 
```

问题是由于`.datefill`是浮动元素引起的，因此其他内联元素自然会环绕它。

**编辑：或者，您可以通过使用** ~~而不是~~~~简化标记和 CSS 来消除对*clearing*的需要。`display:inline-block``float` *`<div>`*~~

 *您当前使用的标记`float`是一种很好的方法，可以让其他元素自然调整大小，而不是在宽度较小时跳到下一行，这会发生在`inline-block`.*

# perl - Perl：如何检查拨号接口是打开还是关闭？

> ID：16142989
> 
> 赞同：0
> 
> 时间：2013-04-22T08:53:28.930
> 
> 标签：perl, networking, interface, dial-up

如何独立于操作系统使用 Perl 检查指定的本地拨号接口是打开还是关闭？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-30T16:25:16.520

只需使用类似的东西

$结果1= `ifconfig -a`; # (或 ipconfig /all in windows),

然后对结果执行正则表达式匹配以查找该特定接口名称及其状态（或是否存在 IP 地址）。

在 linux 中，接口名称应该是 ppp0 。

首先使用该接口 up/down/absent 测试 ifconfig/ipconfig 输出，以确保您考虑所有情况。

# sql - 错误，仅在其中一个数据库中运行一个查询

> ID：16142990
> 
> 赞同：0
> 
> 时间：2013-04-22T08:53:34.440
> 
> 标签：sql, sql-server

我有一个查询可以在除一个之外的所有数据库中使用。并且它没有运行的数据库给出了以下错误。

```
[Error] Script lines: 1-7 --------------------------
 Incorrect syntax near '('. 

 More exceptions ... Incorrect syntax near ','. 
```

下面是查询

```
SELECT onecolumn, secondcolumn FROM one_table WHERE {someConditions}
AND someColumn NOT IN (select value from otherDB.dbo.functionName((select someList
from otherDB..otherDBTable where {someConditions}),',')) 
```

知道它为什么会发生……这真的很令人沮丧。

谢谢

斋

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T08:55:53.550

您在 SELECT 部分有一个逗号对多个逗号，它应该是这样的：

```
SELECT onecolumn, secondcolumn FROM one_table WHERE {someConditions}
AND someColumn NOT IN (select value from otherDB..dbo.funcitonName((select someList
from otherDB..otherDBTable where {someConditions}),',')) 
```

# java - 在支持 bean 中执行方法时代码跳转到未知类

> ID：16142991
> 
> 赞同：0
> 
> 时间：2013-04-22T08:53:40.730
> 
> 标签：java, jsf-2, richfaces, myfaces

我有一个问题，我在支持 bean 中调用了一个方法，该方法应该更新一个列表，之后在我的 xhtml 页面上重新呈现丰富的：datagrid 以反映更改。通过调试我可以确认该方法被成功调用但是它在对列表进行一次迭代后跳出该方法并转到另一个类（不是我的类之一）。它永远不会返回到该方法，并且数据网格也永远不会重新呈现。

下面是相关的html和java代码。HTML：

```
<table width="650px">
    <tbody>
        <tr>
            <td width="325px" align="left"><h:outputText style="white-space: pre; font-weight: normal; font-family: Tahoma; font-size: 11px">Name :</h:outputText>
                <h:inputText id="searchName" size="25" value="#{myBean.searchName}"></h:inputText></td>
            <td width="325px" align="left"><h:outputText style="white-space: pre; font-weight: normal; font-family: Tahoma; font-size: 11px">Surname :</h:outputText>
                <h:inputText id="searchSurname" size="25" value="#{myBean.searchSurname}"></h:inputText></td>
        </tr>
        <tr>
            <td width="325px" align="left"><h:outputText style="white-space: pre; font-weight: normal; font-family: Tahoma; font-size: 11px">ID :</h:outputText>
                <h:inputText id="searchId" size="25" value="#{myBean.searchId}"></h:inputText></td>
            <td width="325px" align="left"><h:outputText style="white-space: pre; font-weight: normal; font-family: Tahoma; font-size: 11px">Status :</h:outputText>
                <h:inputText id="searchStatus" size="25" value="#{myBean.searchStatus}"></h:inputText></td>
        </tr>
        <tr>
            <td align="right"><a4j:commandButton action="#{myBean.searchRecords}" value="Search" render="dataList"></a4j:commandButton></td>
        </tr>
    </tbody>
</table> 
```

爪哇：

```
public void searchRecords(){
    if(dataList == null){
        dataList = searchList;
    }

    searchList = Collections.<ListObj>emptyList();

    for (ListObj obj : dataList) {
        if((obj.getName().contains(searchName)) | (obj.getSurname().contains(searchSurname)) | (obj.getIdNumber().contains(searchId)) | (obj.getStatus().equalsIgnoreCase(searchStatus))){
            searchList.add(obj);
        }
    }
} 
```

代码跳转到 searchList.add(obj) 上的未知类。我使用的是 Apache MyFaces JSF 2.1、RichFace 4.3 和 Java 1.6。我认为这可能与 JSF 生命周期有关，因为我对生命周期的理解严重缺乏，但出于同样的原因，我可能错了。不过，我正在阅读 BalusC 关于生命周期的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:00:55.060

您的根源是您试图将元素添加到空列表中。方法返回定义到 class`Collections.emptyList();`中的特殊内部类的实例。此特殊列表无法修改。尝试向其中添加元素不会修改其内容。`EmptyList``Collections`

所以，换行`searchList = Collections.<ListObj>emptyList();`再试`searchList = Collections.new ArrayList<ListObj>();`一次。

# javascript - 使用 jqgrid 上的 footerdata 获取总和

> ID：16142993
> 
> 赞同：3
> 
> 时间：2013-04-22T08:53:43.737
> 
> 标签：javascript, jqgrid, footer

我有一个列名 Total。
而且我还在使用
jqgrid 的页脚值。

示例这是列

总计
100
-98
-76
98
76

如何
使用页脚数据获取行的总和。

这是我的代码。
注意：如果我使用'sum'，它会给我'NaN'
值。

```
var parseTotal= grid.jqGrid('getCol', 'Total', false, 'sum');
grid.jqGrid('footerData', 'set', { Total: parseTotal}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-23T06:23:57.353

您应该发布更完整的代码来重现问题。我尝试了一些选项：输入数据作为字符串，数据作为整数，使用`formatter: "integer"`，不使用格式化程序等等。

我发现没有产生所描述结果的无列定义的输入数据。看[演示](http://www.ok-soft-gmbh.com/jqGrid/SimpleLocalGridWithTotalSum1.htm)

![在此处输入图像描述](https://i.stack.imgur.com/Ig1U6.png)

哪个有效，并与您的非工作演示进行比较。我希望你能在你的代码中找到错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T04:24:29.070

我假设您将上面的代码放在 gridComplete 函数中，如下所示：

```
 gridComplete: function(){
            var parseTotal=  $(this).jqGrid('getCol', 'Total', false, 'sum');
             $(this).jqGrid('footerData', 'set', { Total: parseTotal});
          } 
```

现在，当列中的一个单元格包含空值（空白）时，会出现返回 NaN 的问题。因此，要将空格转换为值 0，`number`请在 colmodel 的列中使用格式化程序`total`：

IE;

```
colModel:[
  ...............
    {name:"Total",index:"Total", formatter: 'number'},
   ......
], 
```

还要确保列索引拼写正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T18:09:46.287

无论如何都不是 jqGrid 专家，但在“getCol”方法中引用的列不应该是您想要求和的列——“数量”——而不是你想要将总和放入的列——'全部的'？Nan来自试图对尚未定义的列求和。

# iphone - 由于“未知错误”导致应用程序崩溃

> ID：16142994
> 
> 赞同：-2
> 
> 时间：2013-04-22T08:53:43.303
> 
> 标签：iphone, ios, objective-c, xcode, exc-bad-access

我的应用程序崩溃，控制台中没有任何日志写入。它给了我“EXC_BAD_ACCESS”并停止。错误的图像如下：

![在此处输入图像描述](https://i.stack.imgur.com/kZ7eb.png)

**我没有得到任何帮助来解决这个问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:21:20.197

在您的可执行文件上设置环境变量（NSZombieEnabled = YES），然后正常运行/调试您的应用程序是一件简单的事情。如果您向僵尸发送消息，您的应用程序将崩溃/中断调试器并 NSLog 为您发送消息。

有关更多信息，请查看此[CocoaDev](http://www.cocoadev.com/index.pl?NSZombieEnabled)。

并检查[这个](http://www.markj.net/iphone-memory-debug-nszombie/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T09:03:29.380

因为这主要是由于当我们在某个地方尝试访问对象时，如果我们在项目中`deallocated`启用它会显示。[所以请解决这个问题](http://developer.apple.com/library/ios/#recipes/instruments_help-memory-allocations-help/Eliminating_Messages_To_Deallocated_Objects/06_Eliminating_Messages_To_Deallocated_Objects.html)。并且您可以运行专用的. 按下以配置应用程序并选择（使用 Simulatoe）。如果你得到一个，你可以显示整个内存历史记录（每个）对于你项目中的每个对象`NSZombie``Messages Sent To Deallocated Objects``Zombies instrument``Command+I``Zombies instrument``zombie``retain/release`