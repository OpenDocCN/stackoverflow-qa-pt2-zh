# StackOverflow 问答 13649000-13649999

# iphone - 后台位置管理器是否必须在 appDelegate 中？iOS

> ID：13649002
> 
> 赞同：0
> 
> 时间：2012-11-30T16:20:31.593
> 
> 标签：iphone, ios, background

嗨，我想弄清楚 locationManager 是否必须在 appDelegate 中才能在后台调用，或者 appDelegate 是否必须是 locationManager 委托才能使后台更新工作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:35:44.470

不，您的应用程序中的任何类都可以成为位置管理器委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:08:10.930

它不一定要在 AppDelegate 中，但最好是在可以从 AppDelegate 访问的单例中，以便在后台访问。

# java - 匹配内部标签正则表达式

> ID：13649004
> 
> 赞同：0
> 
> 时间：2012-11-30T16:20:41.040
> 
> 标签：java, regex

从我在 http 响应中收到的以下字符串：

```
<res>
    <resultCode>100</resultCode>
    <resultText>OK</resultText>
    <sessionId>60698PLA1354274623024</sessionId>
    <sessionState>OPEN</sessionState>
</res> 
```

我正在尝试使用 java 提取 sessionState（以及稍后的 sessionId）

我试过以下正则表达式：

```
"object containing http response".matches("\<sessionState\>.*\</sessionState\>") 
```

但我从来没有得到匹配。我认为问题在于我在多行中得到 http 响应（我尝试添加 \n\s 但没有运气）。

任何帮助表示赞赏，谢谢。

这是我使用推荐的正则表达式得到的输出：

```
DEBUG [1] ReplaceTags STEP for text: '"{=var.code}".matches("\\<sessionState  \\>.*\\</sessionState\\>")' is: '"<res>\r\n   <resultCode>100</resultCode>\r\n    <resultText>OK</resultText>\r\n <sessionId>60698PLA1354274623024</sessionId>\r\n    <sessionState>OPEN</sessionState>\r\n</res>'

DEBUG Executing code: "<res>\r\n    <resultCode>100</resultCode>\r\n    <resultText>OK</resultText>\r\n <sessionId>60698PLA1354274623024</sessionId>\r\n    <sessionState>OPEN</sessionState>\r\n</res>".matches("\\<sessionState\\>.*\\</sessionState\\>")

DEBUG Compiling code:
public class EvalFunction105qhjmhjn3 {
public String eval() {
    return "" + "<res>\r\n  <resultCode>100</resultCode>\r\n        <resultText>OK</resultText>\r\n <sessionId>60698PLA1354274623024</sessionId>\r\n    <sessionState>OPEN</sessionState>\r\n</res>".matches("\\<sessionState\\>.*\\</sessionState\\>");
}
}

DEBUG Eval execution returned result: 'false' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:25:17.943

我认为您实际上并不需要首先逃脱`<>`，我读过的任何文档都没有说您需要。 [这里有一些文档](http://www.omicentral.com/cheatsheets/JavaRegularExpressionsCheatSheet.pdf)

此外，该`String.matches`方法仅返回一个布尔值，说明您的正则表达式是否包含在字符串中。

您可能想要使用[在此网页上](http://www.vogella.com/articles/JavaRegularExpressions/article.html)描述的匹配器和模式类。

这是来自所述页面的相关代码示例。

```
package de.vogella.regex.test;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class RegexTestPatternMatcher {
  public static final String EXAMPLE_TEST = "This is my small example string which I'm going to use for pattern matching.";

  public static void main(String[] args) {
    Pattern pattern = Pattern.compile("\\w+");
    // In case you would like to ignore case sensitivity you could use this
    // statement
    // Pattern pattern = Pattern.compile("\\s+", Pattern.CASE_INSENSITIVE);
    Matcher matcher = pattern.matcher(EXAMPLE_TEST);
    // Check all occurance
    while (matcher.find()) {
      System.out.print("Start index: " + matcher.start());
      System.out.print(" End index: " + matcher.end() + " ");
      System.out.println(matcher.group());
    }
    // Now create a new pattern and matcher to replace whitespace with tabs
    Pattern replace = Pattern.compile("\\s+");
    Matcher matcher2 = replace.matcher(EXAMPLE_TEST);
    System.out.println(matcher2.replaceAll("\t"));
  }
} 
```

而且，如果我不提醒你正则表达式不能真正解析 xml，每个人都可能会跳到我身上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:26:38.783

我认为你只需要使用这个正则表达式（不要转义尖括号）：

```
<sessionState>(.*)</sessionState> 
```

然后使用捕获组 1 获取值。

此外，如果您不希望值中有任何左尖括号，我更喜欢这个正则表达式：

```
<sessionState>([^<]*)</sessionState> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:51:22.897

尝试：

```
"HTTP response object".matches("[\\s\\S]*<sessionState>.*</sessionState>[\\s\\S]*"); 
```

我已经删除了你有的不必要的转义，并允许前面和后面的字符。

编辑：考虑换行符

# django - 在 Django 中，如何在任何验证发生之前计算或更新某些模型字段？

> ID：13649006
> 
> 赞同：3
> 
> 时间：2012-11-30T16:20:46.557
> 
> 标签：django

所以我是Django的新手......

首先是关于我们现在如何做事的一些背景。我们有一个自定义的 php 系统，但我正在 django 中构建一个改进的库存管理系统，仅使用管理界面。我们存储零件编号，并且我们不存储重复件至关重要。有时可以使用连字符、句点、空格等来输入零件编号。无论输入哪种格式，我们都需要确保不添加重复的零件。使用我们现有的非 django 系统，我们使用正则表达式从字符串中删除任何不是 a-zA-Z0-9 的内容。实际输入的零件号被保留，清理后的编号也被保留到数据库中。然后，当有人添加新零件甚至搜索零件时，零件号的这种清理版本有助于避免这种歧义。我们对制造商名称做同样的事情。

我在 django 中模拟这一点的方法是将 part_number_clean 字段与 part_number 字段一起添加到模型中。然后我覆盖了 save 方法来计算干净的零件号，就像这样（制造商也是如此）：

```
def save(self, *args, **kwargs):
    self.manufacturer_clean = re.sub(r'[^a-zA-Z0-9]', '', self.manufacturer).lower()
    self.part_number_clean = re.sub(r'[^a-zA-Z0-9]', '', self.part_number).lower()
    super(CatalogProduct, self).save(*args, **kwargs) 
```

问题是，我需要在零件号和制造商的组合上独一无二：

```
class Meta:
    unique_together     = ('part_number_clean ', 'manufacturer_clean ') 
```

当我尝试保存重复记录时，我遇到了数据库完整性违规。因此，django 似乎在调用 save 函数之前评估了唯一字段（这是有道理的）。我只需要知道在任何验证之前我应该​​如何或使用哪种方法来计算这些字段。

此外，我有兴趣在 unique_together 组合中添加第三个字段，该字段可能会填写也可能不会填写。如果它没有被填充，它将只有一个空的默认值。我希望这不会引起任何问题。

如果当用户从制造商和零件号字段中选择出来并且两者都不为空时，一些 js 会查看该产品是否已经存在，并为用户提供单击按钮并被快速离开的选项，这也将是很棒的到那条记录，在他们浪费时间填写其余数据却发现它已经存在之前。我猜这超出了管理界面的范围，没有严重的黑客攻击。有没有办法以某种方式将它与管理界面集成？到目前为止，它对我来说非常有用......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T00:23:27.607

我想到了。我正在为其他好奇的人发布答案。这实际上在模型中实现起来非常简单。需要做的就是实现（覆盖？）模型的 clean() 方法。在方法中，我计算并设置了我的特殊字段，然后一定要调用 self.validate_unique() 。奇迹般有效！无需引发任何异常，表单将在顶部完美显示错误。在 save 方法中这样做是行不通的，因为此时您的代码或 django 无法抛出异常。这是代码：

```
class CatalogProduct(models.Model):
    manufacturer        = models.CharField(max_length=100)
    manufacturer_clean  = models.CharField('Manufacturer',max_length=100,blank=True,editable=False)
    part_number         = models.CharField(max_length=100)
    part_number_clean   = models.CharField('Part number',max_length=100,blank=True,editable=False)

    def clean(self):
        # Calculate manufacturer_clean and part_number_clean
        self.manufacturer_clean = re.sub(r'[^a-zA-Z0-9]', '', self.manufacturer).lower()
        self.part_number_clean = re.sub(r'[^a-zA-Z0-9]', '', self.part_number).lower()
        self.validate_unique() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:32:17.333

该模型仅负责描述数据以及如何在 Python 和数据库环境之间表示数据。正是因为这种原子角色，模型才不关心验证以及您刚刚进入并引入的内容。

你需要一个模型表格。它可以清除制造商和零件编号，并确保满足唯一性约束作为验证过程的一部分。

# jquery - document.ready 和 asp.net 页面方法

> ID：13649007
> 
> 赞同：4
> 
> 时间：2012-11-30T16:20:50.930
> 
> 标签：jquery, .net, ajax, kendo-ui

我目前在一个项目上使用 kendo UI 和 ASP.NET 4.0（非 mvc），在我的项目中，每个页面都会有一个网格，该网格通过对特定页面的页面方法的 ajax 调用填充。

问题是，除了为每个页面创建一个单独的 js 文件之外，我想不出一种不调用 document.ready 上的所有网格填充函数的方法。有没有一种方法可以让我拥有 1 个页面，但能够区分正在加载哪个页面并在 1 个文件中调用正确的网格填充页面方法，这样就不会成为维护的噩梦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:15:12.453

所有的网格看起来都一样吗？我的意思是，相同的列数，相同的标题，相同的......只是更改数据？如果是这样，我确实建议使用单个页面、单个网格并*使用*[`DataSource`](http://docs.kendoui.com/api/framework/datasource).

你需要的是实现一个[`transport.read`](http://docs.kendoui.com/api/framework/datasource#transportread-objectstringfunction)函数，[`transport.read.data`](http://docs.kendoui.com/api/framework/datasource#transportreaddata-objectstringfunction)它允许你调用一个或多个`servlets`来处理请求并发送不同的数据来检索一个或另一个网格的数据。

# visual-studio-2012 - 编码的 UI 测试生成器无法启动，因为文件 '' 是只读的

> ID：13649009
> 
> 赞同：1
> 
> 时间：2012-11-30T16:20:59.950
> 
> 标签：visual-studio-2012, coded-ui-tests, ui-testing

我在我的项目中创建了一个**新的 UIMap 。**在出现此错误的前一天，我能够使用它。现在，当我右键单击 VS (Visual Studio) 中的**新 UIMap**并单击“使用编码的 UI 测试生成器编辑”选项时 - 会弹出上述错误。

我尝试以管理员身份启动 VS，编辑项目文件夹中的 .uitest 文件（即使您知道自己在做什么也是不好的做法）并保存它（它允许我这样做），但仍然不允许我使用新的**UIMap**。

此外，**原来的 UIMap**仍然有效。如果有人想知道，我会为 UIMap 使用不同的名称。

我正在使用VS2012。

任何想法，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:10:06.363

我找到了问题和**解决方案**，但不是原因。UIMaps **.cs**和**.Designer.cs**文件的属性设置为只读。请让我知道是否有人确实找出了导致这种情况的原因以及如何防止这种情况在未来发生。

我的解决方案：

1.  右键单击项目文件夹中的 UIMaps **.cs**和**.Designer.cs**文件
2.  点击属性
3.  取消勾选只读复选框

瞧！

谢谢大家。

# node.js - 使用 mongodb 将值添加到数组的开头？

> ID：13649010
> 
> 赞同：0
> 
> 时间：2012-11-30T16:21:03.693
> 
> 标签：node.js, mongodb

我将如何在 mongo 中以原子方式将值添加到数组的开头？

感谢您的任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:27:18.930

你不能按照[这张票](https://jira.mongodb.org/browse/SERVER-2362)直接做。

您现在唯一的选择是获取数组，将元素放在开头并再次将其放入 mongo。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-11-30T16:24:40.900

```
someArray.unshift(someValue); 
```

例如

```
> x = [1,2,3]
[1, 2, 3]
> x.unshift(0)
4
> x
[0, 1, 2, 3] 
```

# vb.net - 在 VB.NET 中隐藏开始菜单和开始按钮

> ID：13649012
> 
> 赞同：3
> 
> 时间：2012-11-30T16:21:09.940
> 
> 标签：vb.net, vb.net-2010

我正在设置我的控制台全屏，但我也想使用 Visual Studio 2010 在 VB.NET 中隐藏任务栏和开始按钮

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:50:25.970

隐藏任务栏的一种方法是结束资源管理器进程。

```
For Each p As Process In Process.GetProcesses
    If p.ProcessName = "explore" Then
       p.Kill()
    End If
Next 
```

完成后，您必须重新启动资源管理器进程。

```
Process.Start("explorer") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-26T10:10:25.270

我结束了使用 Sam 解决方案，但我做了另一种方式，因为使用 Process.Kill 并没有阻止 explorer.exe 自动重启。

不得不以这种方式使用taskkill：

```
System.Diagnostics.Process.Start("taskkill.exe", " /f /im explorer.exe") 
```

然后，当您关闭应用程序时，再次调用 explorer.exe：

```
System.Diagnostics.Process.Start("C:\Windows\explorer.exe") 
```

我不得不使用完整路径，因为调用“explorer.exe”并没有恢复任务栏。

# java - Java 导入语句中的错误“无法解析导入 javax.validation.constraints.NotNull”

> ID：13649015
> 
> 赞同：28
> 
> 时间：2012-11-30T16:21:17.617
> 
> 标签：java, spring, spring-mvc, spring-roo

我是 Java 和 Spring 框架的新手。在开发 Spring roo 项目后，我在类中发现了以下错误：

```
The import javax.validation.constraints.NotNull cannot be resolved

NotNull cannot be resolved to a type 
```

我正在使用 STS 3.1.0.RELEASE

有人可以指导我在做什么以及如何纠正它。

提前致谢

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2020-10-06T07:40:53.287

我有同样的问题。我发现最新版本的 Spring Boot 需要单独的依赖项进行验证。我尝试在 pom.xml 文件中添加以下依赖项并且它有效。

```
<dependency> 
    <groupId>org.springframework.boot</groupId> 
    <artifactId>spring-boot-starter-validation</artifactId> 
</dependency> 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-11-30T16:35:06.917

必须将包含此类的 jar 添加到项目的构建路径中：http: [//mvnrepository.com/artifact/javax.validation/validation-api/1.0.0.GA](http://mvnrepository.com/artifact/javax.validation/validation-api/1.0.0.GA)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-12-15T09:45:54.700

对于 JDK-9，不支持旧版本的“javax.validation”。所以我们应该添加最新版本。

我们将通过以下方式知道任何 jar 的最新版本

```
C:\Users\username\.m2\repository\javax\validation\validation-api 
```

上面的文件夹应该有jar的所有版本，然后您可以通过以下方式在pom.xml文件中添加最新版本作为依赖项

就我而言，“2.0.0.final”是最新版本。

```
<dependency>
    <groupId>javax.validation</groupId>
    <artifactId>validation-api</artifactId>
    <version>2.0.0.Final</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2021-05-05T23:26:29.487

从 Spring boot 2.3 版本开始，您必须在 pom.xml 中添加此依赖项

```
<dependency>
  <groupId>org.springframework.boot</groupId>
  <artifactId>spring-boot-starter-validation</artifactId>
</dependency> 
```

web starters 不再包含验证，因此您必须手动添加它

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2021-02-14T13:44:10.283

我正在使用 JDK JAVA 8，但我仍然遇到类似的问题。只需在我的 pom.xml 中添加以下示例，错误就消失了

```
<dependency>
    <groupId>javax.validation</groupId>
    <artifactId>validation-api</artifactId>
    <version>2.0.1.Final</version>
</dependency> 
```

以下文章帮助我找到了解决方案：“ [https://www.baeldung.com/javax-validation](https://www.baeldung.com/javax-validation) ”

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-14T11:41:38.460

除了复制和粘贴 .jar en `<root-project>/lib`，您还必须将它们添加到**Project Structure > Libraries > Classes**

总帐

[休眠验证器](https://hibernate.org/validator/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-12-03T01:45:06.487

之前，Gradle 默认包含此依赖项。我不知道会发生什么。您必须手动添加此依赖项： implementation 'jakarta.validation:jakarta.validation-api:2.0.2'

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-30T18:36:03.273

我遇到了同样的错误，我只是从以下位置下载了 API：https://mvnrepository.com/artifact/javax.validation/validation-api/1.0.0.GA：https://mvnrepository.com/artifact/javax.validation/ com.springsource.javax.validation/1.0.0.GA

它开始工作-))))))))

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-27T07:41:38.173

**Intellij 解决方案：** 粘贴下面的代码后，您需要（完全）关闭 Intellij，然后再次打开。

粘贴以下内容：

```
 <dependency>
         <groupId>javax.validation</groupId>
         <artifactId>validation-api</artifactId>
         <version>1.0.0.GA</version>
    </dependency> 
```

# r - 将时间序列数据拆分为时间间隔（比如一小时），然后绘制计数

> ID：13649019
> 
> 赞同：18
> 
> 时间：2012-11-30T16:21:30.503
> 
> 标签：r, datetime, ggplot2

我只有一个包含一列时间序列的数据文件：

```
'2012-02-01 17:42:44'
'2012-02-01 17:42:44'
'2012-02-01 17:42:44' 
```

...我想将数据拆分，以便我在小时数的顶部进行计数。说：

```
'2012-02-01 17:00:00'  20   
'2012-02-01 18:00:00'  30 
```

“20”和“30”表示该期间的时间序列条目数。我希望能够绘制时间与“计数”的关系。我怎么能用 R 做到这一点？

这是我当前的折线图。

```
library(ggplot2)

req <- read.table("times1.dat")
summary(req)

da <- req$V2
db <- req$V1

time <- as.POSIXct(db)

png('time_data_errs.png', width=800, height=600)
gg <- qplot(time, da) + geom_line()

print(gg)
dev.off() 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-30T17:30:56.800

听起来您想用它`cut`来计算一个小时内出现了多少个值。

如果您可以提供一些示例数据，通常会很有帮助。这里有一些：

```
set.seed(1) # So you can get the same numbers as I do
MyDates <- ISOdatetime(2012, 1, 1, 0, 0, 0, tz = "GMT") + sample(1:27000, 500)
head(MyDates)
# [1] "2012-01-01 01:59:29 GMT" "2012-01-01 02:47:27 GMT" "2012-01-01 04:17:46 GMT"
# [4] "2012-01-01 06:48:39 GMT" "2012-01-01 01:30:45 GMT" "2012-01-01 06:44:13 GMT" 
```

您可以使用`table`and `cut`（带有参数`breaks="hour"`（`?cut.Date`更多信息请参阅））来查找每小时的频率。

```
MyDatesTable <- table(cut(MyDates, breaks="hour"))
MyDatesTable
# 
# 2012-01-01 00:00:00 2012-01-01 01:00:00 2012-01-01 02:00:00 2012-01-01 03:00:00 
#                  59                  73                  74                  83 
# 2012-01-01 04:00:00 2012-01-01 05:00:00 2012-01-01 06:00:00 2012-01-01 07:00:00 
#                  52                  62                  64                  33 
# Or a data.frame if you prefer
data.frame(MyDatesTable)
#                  Var1 Freq
# 1 2012-01-01 00:00:00   59
# 2 2012-01-01 01:00:00   73
# 3 2012-01-01 02:00:00   74
# 4 2012-01-01 03:00:00   83
# 5 2012-01-01 04:00:00   52
# 6 2012-01-01 05:00:00   62
# 7 2012-01-01 06:00:00   64
# 8 2012-01-01 07:00:00   33 
```

最后，这是`MyDatesTable`对象的线图：

```
plot(MyDatesTable, type="l", xlab="Time", ylab="Freq") 
```

![在此处输入图像描述](../Images/7925f871114e242567a7ff8e961a6d11.png)

* * *

`cut`可以处理一系列时间间隔。例如，如果您想每 30 分钟制表一次，您可以轻松地调整`breaks`参数来处理：

```
data.frame(table(cut(MyDates, breaks = "30 mins")))
#                   Var1 Freq
# 1  2012-01-01 00:00:00   22
# 2  2012-01-01 00:30:00   37
# 3  2012-01-01 01:00:00   38
# 4  2012-01-01 01:30:00   35
# 5  2012-01-01 02:00:00   32
# 6  2012-01-01 02:30:00   42
# 7  2012-01-01 03:00:00   39
# 8  2012-01-01 03:30:00   44
# 9  2012-01-01 04:00:00   25
# 10 2012-01-01 04:30:00   27
# 11 2012-01-01 05:00:00   33
# 12 2012-01-01 05:30:00   29
# 13 2012-01-01 06:00:00   29
# 14 2012-01-01 06:30:00   35
# 15 2012-01-01 07:00:00   33 
```

* * *

### 更新

由于您尝试使用 绘图`ggplot2`，因此这是一种方法（不确定它是否是最好的，因为我通常在需要时使用基本 R 的图形）。

创建一个`data.frame`表（如上所示）并添加一个虚拟“组”变量并绘制如下：

```
MyDatesDF <- data.frame(MyDatesTable, grp = 1)
ggplot(MyDatesDF, aes(Var1, Freq)) + geom_line(aes(group = grp)) 
```

![在此处输入图像描述](../Images/8ee6ee5b2e0cb2b757c771900b2e4107.png)

# visual-studio-2010 - 如何在安装时将加密值写入注册表

> ID：13649022
> 
> 赞同：0
> 
> 时间：2012-11-30T16:21:39.963
> 
> 标签：visual-studio-2010, windows-installer

在安装期间，我想创建一个包含安装日期的加密字符串并将其写入注册表项。

我知道如何在代码中创建加密字符串，所以我不需要加密部分的帮助，我只是不知道如何让安装程序：

*   获取今天的日期作为字符串
*   调用我的加密方法（来自 dll）
*   如果值不存在，则将结果写入注册表项（不覆盖）

请问我该怎么做？

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T12:40:48.997

如果您使用的工具会暴露更多底层 Windows 安装程序（例如 WiX 或 InstallShield），您将编写一个简单的自定义操作来获取时间、对其进行加密并设置属性。然后，您将使用注册表中的该属性让安装程序在安装期间将其写出，在回滚期间将其删除并在卸载期间将其删除。

但是，您正在使用的项目类型（并从 VS2012 FWIW 中删除）不支持在即时执行上下文中创作自定义操作，因此自定义操作无法设置注册表表使用的属性。

这意味着您必须自己编写回滚、安装和卸载自定义操作，并自己写入注册表值。

我还要提到 InstallUtil 自定义操作有很多缺点。我会在 C++ 中执行此操作，或者我会使用 WiX DTF 编写一个 C# 自定义操作，该操作显示为安装程序的 C++ DLL。

# wif - 在服务器/应用程序之间共享 IClaimsPrincipal/FedAuth Cookie ID1006

> ID：13649026
> 
> 赞同：5
> 
> 时间：2012-11-30T16:21:54.367
> 
> 标签：wif, federated-identity, ws-federation

我有一个 ASP.NET 应用程序，它使用 Azure ACS（以及间接的 ADFS）进行身份验证——一切正常。现在我被要求将 SessionToken 传递给另一个后端服务，在那里可以对其进行验证并提取声明。[长篇大论，不是我的选择]

我在解密方面很适合，我确定我缺少一些基本的东西。

为了设置阶段，解密时的错误是：

```
ID1006: The format of the data is incorrect. The encryption key length is negative: '-724221793'. The cookie may have been truncated. 
```

ASP.NET 网站使用 RSA 包装器 ala：

```
 void WSFederationAuthenticationModule_OnServiceConfigurationCreated(object sender, ServiceConfigurationCreatedEventArgs e)
        {
            string thumbprint = "BDE74A3EB573297C7EE79EB980B0727D73987B0D";

            X509Certificate2 certificate = GetCertificate(thumbprint);

            List<CookieTransform> sessionTransforms = new List<CookieTransform>(new CookieTransform[] 
            { 
                new DeflateCookieTransform(), 
                new RsaEncryptionCookieTransform(certificate), 
                new RsaSignatureCookieTransform(certificate) 
            });

            SessionSecurityTokenHandler sessionHandler = new SessionSecurityTokenHandler(sessionTransforms.AsReadOnly());
            e.ServiceConfiguration.SecurityTokenHandlers.AddOrReplace(sessionHandler);
        } 
```

（指纹与 FedUtil 在 web.config 中添加的值相同。

我用以下方式编写令牌：

```
 if (Microsoft.IdentityModel.Web.FederatedAuthentication.SessionAuthenticationModule.TryReadSessionTokenFromCookie(out token))
    {
        Microsoft.IdentityModel.Tokens.SessionSecurityTokenHandler th = new Microsoft.IdentityModel.Tokens.SessionSecurityTokenHandler();
        byte[] results = th.WriteToken(token);
    ... 
```

这给了我：

```
 <?xml version="1.0" encoding="utf-8"?>
    <SecurityContextToken p1:Id="_53382b9e-8c4b-490e-bfd5-de2e8c0f25fe-94C8D2D9079647B013081356972DE275" 
                      xmlns:p1="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" 
                      xmlns="http://docs.oasis-open.org/ws-sx/ws-secureconversation/200512">
    <Identifier>urn:uuid:54bd1bd7-1110-462b-847e-7f49c1043b32</Identifier>
    <Instance>urn:uuid:0462b7d7-717e-4ce2-b942-b0d6a968355b</Instance>
    <Cookie xmlns="http://schemas.microsoft.com/ws/2006/05/security">AQAAANCMnd blah blah 1048 bytes total
    </Cookie>
    </SecurityContextToken> 
```

并且，在另一个盒子上使用相同的证书（并且将令牌作为文件读入仅用于测试），我有：

```
 public static void Attempt2(FileStream fileIn, X509Certificate2 certificate, out SecurityToken theToken)
        {
            List<CookieTransform> sessionTransforms = new List<CookieTransform>(new CookieTransform[] 
            { 
                new DeflateCookieTransform(),
                new RsaSignatureCookieTransform(certificate), 
                new RsaEncryptionCookieTransform(certificate) 
            });

            SessionSecurityTokenHandler sessionHandler = new SessionSecurityTokenHandler(sessionTransforms.AsReadOnly());

            // setup
            SecurityTokenResolver resolver;
            {
                var token = new X509SecurityToken(certificate);

                var tokens = new List<SecurityToken>() { token };

                resolver = SecurityTokenResolver.CreateDefaultSecurityTokenResolver(tokens.AsReadOnly(), false);
            }

            sessionHandler.Configuration = new SecurityTokenHandlerConfiguration();
            sessionHandler.Configuration.IssuerTokenResolver = resolver;

            using (var reader = XmlReader.Create(fileIn))
            {
                theToken = sessionHandler.ReadToken(reader);
            }

        } 
```

然后 ReadToken 抛出 FormatException

```
ID1006: The format of the data is incorrect. The encryption key length is negative: '-724221793'. The cookie may have been truncated. 
```

在这一点上，我无法判断我的整体方法是否存在缺陷，或者我是否只是错过了解决所有这些问题的众所周知的“一条线”。

哦，我在网站上使用 VS2010 SP1 (.NET 4.0)，我在解码端尝试了 VS2010SP1 .NET 4.0 和 VS2012 .NET 4.5。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T01:57:34.357

您的后端服务的应用程序池帐户是否具有对证书的读取权限？如果没有为后端服务授予您的应用程序池帐户对证书的读取权限。因此，我过去在加密/解密方面遇到了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-29T18:58:08.663

这可能会有所帮助，这会将您的 FedAuth cookie 转换为可读的 XML 字符串，例如：

```
 <?xml version="1.0" encoding="utf-8"?>
    <SecurityContextToken p1:Id="_548a372e-1111-4df8-b610-1f9f618a5687-953155F0C35B4862A5BCE4D5D0C5ADF0" xmlns:p1="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns="http://docs.oasis-open.org/ws-sx/ws-secureconversation/200512">
        <Identifier>urn:uuid:c9f9b733-1111-4b01-8af3-23c8af3e19a6</Identifier>
        <Instance>urn:uuid:ee955207-1111-4498-afa3-4b184e97d0be</Instance>
        <Cookie xmlns="http://schemas.microsoft.com/ws/2006/05/security">long_string==</Cookie>
    </SecurityContextToken> 
```

代码：

```
 private string FedAuthToXmlString(string fedAuthCombinedString)
    {
        // fedAuthCombinedString is from FedAuth + FedAuth1 cookies: just combine the strings

        byte[] authBytes = Convert.FromBase64String(fedAuthCombinedString);
        string decodedString = Encoding.UTF8.GetString(authBytes);

        var store = new X509Store(StoreName.My, StoreLocation.CurrentUser);
        store.Open(OpenFlags.ReadOnly);
        var thumbprint = "CERT_THUMBPRINT";  // from config

        var cert = store.Certificates.Find(X509FindType.FindByThumbprint, thumbprint, false)[0];

        var sessionTransforms = new List<System.IdentityModel.CookieTransform>(new System.IdentityModel.CookieTransform[]
        {
            new System.IdentityModel.DeflateCookieTransform(),
            new System.IdentityModel.RsaSignatureCookieTransform(cert),
            new System.IdentityModel.RsaEncryptionCookieTransform(cert)
        });

        SessionSecurityTokenHandler sessionHandler = new SessionSecurityTokenHandler(sessionTransforms.AsReadOnly());

        SecurityTokenResolver resolver;
        {
            var token = new X509SecurityToken(cert);
            var tokens = new List<SecurityToken>() { token };
            resolver = SecurityTokenResolver.CreateDefaultSecurityTokenResolver(tokens.AsReadOnly(), false);
        }

        sessionHandler.Configuration = new SecurityTokenHandlerConfiguration();
        sessionHandler.Configuration.IssuerTokenResolver = resolver;

        var i = 0; // clear out invalid leading xml
        while ((int)decodedString[i] != 60 && i < decodedString.Length - 1) i++; // while the first character is not <

        store.Close();

        return decodedString.Substring(i);
    } 
```

# c# - 覆盖作家问题

> ID：13649027
> 
> 赞同：0
> 
> 时间：2012-11-30T16:21:55.427
> 
> 标签：c#, list, streamwriter

我正在将一个列表写入文件，该列表从我输入的文本中从表单应用程序获取数据。这有效，但每次我启动表单时它都会覆盖文件，而不是保存它并添加新数据。我如何添加“AppendAllLines”或“WriteAllLines”作为解决方案？

```
 public List<String> listDeliveries()
    {
        List<String> listDeliveries = new List<string>();           
        using (StreamWriter writer = new StreamWriter("Database.txt"))
        {
            foreach (Delivery del in deliveries)
            {
                String delAsString = del.summary();                   

                listDeliveries.Add(delAsString);

                writer.WriteLine(delAsString);                   
            }

        }
        return listDeliveries;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:25:38.530

```
var listDeliveries = deliveries.Select(d=>d.summary()).ToList();
File.AppendAllLines("Database.txt", listDeliveries);
return listDeliveries; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:25:09.940

> 我如何添加“AppendAllLines”或“WriteAllLines”作为解决方案？

好吧，看起来你只是想要：

```
List<String> listDeliveries = deliveries.Select(x => x.summary()).ToList();
File.AppendAllLines("Database.txt", listDeliveries);
return listDeliveries; 
```

（是的，您*可以*创建`StreamWriter`with`true`作为第二个参数，但`AppendAllLines`更简单......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T16:26:24.000

您可以使用`ToList`来创建列表并`File.AppendAllLines`从列表中追加行：

```
List<string> listDeliveries = deliveries.Select(d => d.summary())
                                        .ToList();
File.AppendAllLines("Database.txt", listDeliveries); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T16:25:01.713

您可以使用

```
using (StreamWriter writer = new StreamWriter("Database.txt", true)) 
```

追加而不是覆盖

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T16:25:19.860

使用允许您指定是否追加的重载构造函数。默认是`false`

```
StreamWriter writer = new StreamWriter("Database.txt", true) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-30T16:26:19.083

创建 StreamWriter 时，传入一个布尔值，告诉它将数据附加到文件而不是覆盖。

```
 using (StreamWriter writer = new StreamWriter("Database.txt", true)) 
```

# java - 从休眠查询返回地图

> ID：13649040
> 
> 赞同：0
> 
> 时间：2012-11-30T16:22:31.453
> 
> 标签：java, hashmap

在下面关于传递办公室代码列表的查询中，我得到了 countryID 的列表。现在，我需要一个 Map，其中的键是 countryID，它的值是办公室代码列表。你能帮我么。

示例：如果我们的办公室为**abc，def**属于国家**123**，**xyz**属于**789**，我需要一个类似 **(123, List(abc,def).... (789,List(xyz)))的地图**

```
public List getData(List officeCode) {

    try {
        StringBuffer queryString = new StringBuffer("select distinct 
        (abc.countryID)  from com.#####.TABLE table");
        queryString.append(" where table.officeCode in (:oCode)");
        return SessionFactory.getCurrentSession()
        .createQuery(queryString.toString())
        .setParameterList("oCode",officeCode )
        .list();
    }
    catch (Exception e)

    {
        e.printStackTrace();
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:32:07.927

执行以下查询：

```
select distinct abc.countryID, abc.officeCode from SomeEntity abc where abc.officeCode in (:codes) 
```

此查询将返回一个`List<Object[]>`，每个对象数组包含一个 countryID 作为第一个元素，一个 office 代码作为第二个元素。

然后遍历列表，并填充您的地图。

注意：使用 StringBuffer 连接 String 文字会适得其反，而且可读性较差。你最好简单地做：

```
String queryString = "select distinct (abc.countryID)  from com.#####.TABLE table"
                     + " where table.officeCode in (:oCode)"; 
```

# java - 如何处理和捕获 SocketException？

> ID：13649042
> 
> 赞同：0
> 
> 时间：2012-11-30T16:22:37.770
> 
> 标签：java, jakarta-ee

对于 Java EE 应用程序，我不时在日志中收到 SocketException。造成这种情况的原因之一是浏览器突然被终止。

我怎样才能捕捉到这些错误？因为它们不会出现在我可以用 try-catch 包围的特定方法中。

```
Caused by: ClientAbortException:  java.net.SocketException: Connection reset by peer: socket write error
    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:346)
    at org.apache.catalina.connector.OutputBuffer.flush(OutputBuffer.java:306)
    at org.apache.catalina.connector.Response.flushBuffer(Response.java:572)
    at org.apache.catalina.connector.ResponseFacade.flushBuffer(ResponseFacade.java:307)
    at org.apache.openejb.server.httpd.ServletResponseAdapter.flushBuffer(ServletResponseAdapter.java:205)
    at org.apache.cxf.transport.http.AbstractHTTPDestination$WrappedOutputStream.close(AbstractHTTPDestination.java:726)
    at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)
    at org.apache.cxf.transport.http.AbstractHTTPDestination$BackChannelConduit.close(AbstractHTTPDestination.java:655)
    at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)
    ... 24 more
Caused by: java.net.SocketException: Connection reset by peer: socket write error
    at java.net.SocketOutputStream.socketWrite0(Native Method)
    at java.net.SocketOutputStream.socketWrite(Unknown Source)
    at java.net.SocketOutputStream.write(Unknown Source)
    at org.apache.coyote.http11.InternalOutputBuffer.realWriteBytes(InternalOutputBuffer.java:215)
    at org.apache.tomcat.util.buf.ByteChunk.flushBuffer(ByteChunk.java:462)
    at org.apache.coyote.http11.InternalOutputBuffer.flush(InternalOutputBuffer.java:119)
    at org.apache.coyote.http11.AbstractHttp11Processor.action(AbstractHttp11Processor.java:790)
    at org.apache.coyote.Response.action(Response.java:174)
    at org.apache.catalina.connector.OutputBuffer.doFlush(OutputBuffer.java:341)
    ... 32 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:30:10.187

这是内部 tomcat 日志记录。您需要更改 tomcat 的配置，甚至修改源代码。Tomcat 有大量的日志记录文档。

# dns - Amazon S3 CNAME 设置 - s3.mydomain.com/myBucket1/myKey 可能吗？

> ID：13649043
> 
> 赞同：0
> 
> 时间：2012-11-30T16:22:42.430
> 
> 标签：dns, amazon-s3, amazon, alias, cname

我们每个客户端都有 1 个存储桶来托管数据，因此我希望使用 CNAME 记录将**s3.amazonaws.com**别名为**docs.mydomain.com 。**

由于**s3.amazonaws.com/myBucket1/myKey1**是有效路径，我希望**docs.mydomain.com/myBucket1/myKey1**可以工作，但它最终会寻找一个名为*docs.mydomain.com的存储桶*

有什么方法可以完成我想做的事情（但也许不是 CNAME）？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:40:16.623

请参阅此 stackoverflow 答案：[Amazon S3 上的静态托管 - DNS 配置](https://stackoverflow.com/a/8357318/808532)

这些说明将让您为每个客户创建一个名为“docs.mydomain.com”的存储桶，然后告诉您如何使用 CNAME 记录将这些请求重定向到文件真正所在的 S3 存储桶。

不幸的是，如果您的存储桶已经存在其中的内容，则无法重命名 S3 存储桶，因此您需要创建具有正确名称的新存储桶并将数据复制到其中。

如果您只想处理“doc”子域，则可以忽略他处理裸域的步骤。

# git - 如何合并 github 存储库？

> ID：13649048
> 
> 赞同：1
> 
> 时间：2012-11-30T16:22:54.943
> 
> 标签：git, github

有这个 jQuery 插件[jQuery 插件](http://arshaw.com/fullcalendar/).. 有些人在他们自己的 github fork 这个插件中做了一些修改。

我想要一个合并了这两个代码的版本：

*   [https://github.com/elhigu/fullcalendar](https://github.com/elhigu/fullcalendar)
*   [https://github.com/AbleTech/fullcalendar](https://github.com/AbleTech/fullcalendar)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:25:39.173

由于原始存储库也在 github 上，因此过程有点像这样。在您更喜欢的目录中，执行以下操作：

```
git clone https://github.com/arshaw/fullcalendar.git fullcalendar 
```

然后将另外两个存储库添加为遥控器：

```
git remote add elhigu https://github.com/elhigu/fullcalendar.git
git remote add AlbeTech https://github.com/AbleTech/fullcalendar 
```

然后将他们的更改拉到您的本地副本：

```
git pull elhigu master
git pull AlbeTech master 
```

这应该可以满足您的需求，但请注意您可能会遇到冲突。

# aptana - Aptana 中的自定义碎石未自动激活

> ID：13649052
> 
> 赞同：4
> 
> 时间：2012-11-30T16:23:03.150
> 
> 标签：aptana

我是 Aptana 的新手，所以我可能会遗漏一些明显的东西。我创建的那个包中的问题在加载 Aptana 时没有被激活。我必须更新 rubble.rb 文件的日期才能正常工作。

```
touch ~/Documents/Aptana Rubles/ioncubeEncode.ruble 
```

在我这样做之后，在 Aptana 会话的其余部分中，一切都很顺利。

我不认为这是相关的，但这里是捆绑代码，它工作得很好（当它工作时）：

```
require 'ruble'
#Ruble::Logger.log_level = :trace

bundle do |bundle|
  bundle.author = "Sasha"
  bundle.copyright = "None"
  bundle.display_name = "Ioncube Encode"
  bundle.description = "Encode just saved php file form base_local to base folder"
end

command "Ioncube Encode" do |cmd|
  cmd.input = :document
  cmd.output = :output_to_console
  cmd.trigger = :execution_listener , "org.eclipse.ui.file.save"
  cmd.invoke do |ctx|
    source_path = ENV['TM_FILEPATH']
    ext = File.extname(source_path)
    if ext == '.php'
        if ( source_path =~ /base_local/)
                destination_path = source_path.sub('/base_local/','/base/')
                #CONSOLE.puts "Ioncube Encoding: " + source_path + " to " + destination_path
                exec="/usr/local/ioncube/ioncube_encoder5 -v --optimize more --without-loader-check " + source_path + " -o " +destination_path + " 2>&1"
                IO.popen(exec, 'r+') do |io|
                        io.close_write
                        CONSOLE.puts  io.read
                end
        end
    end
  end
end 
```

这可能看起来没什么大不了的，但它困扰着我 - 很多。

# ruby-on-rails - 工厂女孩的问题 - 持久数据（Rails）

> ID：13649054
> 
> 赞同：1
> 
> 时间：2012-11-30T16:23:10.950
> 
> 标签：ruby-on-rails, integration-testing, factory-bot

我最近开始在我的应用程序中使用 FactoryGirl 而不是 Fixtures。下面是我写的一个规范，用于测试使用 factorygirl 保存的数据是否出现在单独的页面中

```
describe "Tasks" do
  describe "GET /Ajax add", :focus do
    it "checks ajax js", :js => true do
      task = FactoryGirl.create(:task, :name => "writing test task")
      visit "/list"
    end
  end
end 
```

在页面中，`/list`我编写了代码来检索`tasks`表中的所有数据`(Task model)`。

当我通过启动服务器运行页面时，我可以看到输出，但是在运行测试时，它总是显示空白页面。

这是因为FactoryGirl在使用后会删除所有数据吗？或者，即使我在测试中访问多个页面，我应该怎么做才能持久化数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:31:54.403

1) 你在使用类似 DatabaseCleaner 的东西吗？看看你的 test_helper 看看你是否正在做任何事情来清理数据库

2）检查任务的返回值，看看它实际上是成功创建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T09:10:52.437

我有类似的问题，使用 Fabricator（FactoryGirl 替代品）不会持续到我的 Capybara 会话。plataformatec 的人为此写了一个解决方案。[http://blog.plataformatec.com.br/2011/12/three-tips-to-improve-the-performance-of-your-test-suite/](http://blog.plataformatec.com.br/2011/12/three-tips-to-improve-the-performance-of-your-test-suite/)

# c++ - 手动选择右值或左值类型的重载函数

> ID：13649061
> 
> 赞同：1
> 
> 时间：2012-11-30T16:23:39.703
> 
> 标签：c++, templates, c++11, rvalue-reference

我有重载的方法：

```
 template<typename AnyType>
    void AnyFunc(AnyType &t);

    template<typename AnyType>
    void AnyFunc(AnyType &&t); 
```

我有一个调用者，它持有一个指针并想使用其中一个函数：

```
 MyType* ptr=new MyType();
    AnyFunc(*ptr); 
```

最后一行遇到编译错误：AnyFunc 的模糊重载

如何选择我需要的功能？简单的情况是使用：

```
 AnyFunc(std::move(*ptr)); 
```

其中选择了`void AnyFunc(AnyType &&t);`但这不是我想要的。我需要 `void AnyFunc(AnyType &t);`方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T16:36:04.530

只要你有`T&& v`（`T`模板参数在哪里），你就有了一个所谓的[通用引用](http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Scott-Meyers-Universal-References-in-Cpp11)。它不仅绑定到右值，*还*绑定到左值。这是一个*贪婪*的模板。它会拿走它所能得到的任何东西，而不会回报任何东西。

涉及贪婪模板时重载是一个*坏*主意，除非您确切知道自己在做什么。

使用通用引用，通常不需要特殊情况的左值与右值。只会`std::forward<T>(v)`传播参数和值类别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:09:14.000

无需修复。您的代码符合 C++11。这些案例的标准说，非通用引用模板“更专业”，它将优先。

所以你的电话应该选择第一个模板。如果您删除第一个模板，它将采用第二个模板。它类似于这个

```
// "universal" with respect to const qualification
template<typename T>
void f(T &);

template<typename T>
void f(const T&); 
```

现在这将调用第二个模板实例，因为虽然两个实例都具有`const int&`参数类型，但第二个实例与更专业的函数模板相关联。

```
const int a = 0;
f(a); 
```

你的情况也一样。请注意，它是“完整的”，因为它适用于 const 和左值/右值的所有组合

*   *常量左值*。两者都有`const U&`as 参数，但`T&`一个更专业，因此*采用偏序*。
*   *非常量 lvalue*，你的情况。一个`T&`有`U&`as 参数，`T&&`一个也有`U&`as 参数，但`T&`一个更专业，所以*采用偏序*。
*   *常量右值*。`T&`一个`const U&`作为参数，一个`T&&`作为`const U&&`参数。右值引用优先用于绑定右值而不是左值引用。因此，`T&&`仅*通过重载解决方案采用*这一方案。
*   *非常量右值*。一个`T&`有`U&`作为参数。非常量左值引用不能绑定到右值。因此，只有*重载决议才能*选择`T&&`具有类型的那个。 `U&&`

# python - 无需等待答案即可触发功能（Python）

> ID：13649062
> 
> 赞同：8
> 
> 时间：2012-11-30T16:23:40.200
> 
> 标签：python, asynchronous, tornado, pycurl

我有一个链接流进来，我想不时检查它们`rss`。但是当我启动我的`get_rss()`功能时，它会阻塞并且流停止。这是不必要的，我只想一劳永逸地忘记该`get_rss()`功能（它将其结果存储在其他地方。）

我的代码是这样的：

```
self.ff.get_rss(url)    # not async
print 'im back!'

(...)

def get_rss(url):
    page = urllib2.urlopen(url)     # not async
    soup = BeautifulSoup(page) 
```

我在想，如果我可以触发并忘记第一次调用，那么我什至可以使用 urllib2 而不必担心它不是异步的。任何帮助深表感谢！

编辑：尝试 gevent，但像这样没有任何反应：

```
print 'go'
g = Greenlet.spawn(self.ff.do_url, url)
print g
print 'back'

# output: 
go
<Greenlet at 0x7f760c0750f0: <bound method FeedFinder.do_url of <rss.FeedFinder object at 0x2415450>>(u'http://nyti.ms/SuVBCl')>
back 
```

Greenlet 似乎已注册，但该功能`self.ff.do_url(url)`似乎根本没有运行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-06-28T19:29:38.513

Fire and forget using the multiprocessing module:

```
def fire_and_forget(arg_one):
    # do stuff
    ...

def main_function():
    p = Process(target=fire_and_forget, args=(arg_one,))
    # you have to set daemon true to not have to wait for the process to join
    p.daemon = True
    p.start()
    return "doing stuff in the background" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-08T14:59:02.263

1.  here is sample code for thread based method invocation additionally desired *threading.stack_size* can be added to boost the performance.

```
import threading
import requests

#The stack size set by threading.stack_size is the amount of memory to allocate for the call stack in threads.
threading.stack_size(524288)

def alpha_gun(url, json, headers):
    #r=requests.post(url, data=json, headers=headers)
    r=requests.get(url)
    print(r.text)

def trigger(url, json, headers):
    threading.Thread(target=alpha_gun, args=(url, json, headers)).start()

url = "https://raw.githubusercontent.com/jyotiprakash-work/Live_Video_steaming/master/README.md"
payload="{}"
headers = {
  'Content-Type': 'application/json'
}

for _ in range(10):
    print(i)
    #for condition 
    if i==5:
        trigger(url=url, json =payload, headers=headers)
        print('invoked') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:27:26.500

You want to use the [threading](http://docs.python.org/2/library/threading.html?highlight=threading#threading) module or the [multiprocessing](http://docs.python.org/2/library/multiprocessing.html) module and save the result either in [database](http://docs.python.org/2/library/sqlite3.html?highlight=sqlite#sqlite3), a file or a [queue](http://docs.python.org/2/library/queue.html?highlight=queue#Queue).

You also can use [gevent](http://www.gevent.org/).

# iphone - 是否可以创建一个应用程序来自动回复带有短信的电话，并自动回复收到的短信和电子邮件？

> ID：13649063
> 
> 赞同：1
> 
> 时间：2012-11-30T16:23:42.180
> 
> 标签：iphone, ios

我无法在网上找到有关该主题的任何信息，所以我认为这是不可能的，但是有没有办法创建一个应用程序，当打开时，它会通过将所有来电发送到语音邮件并回复来回复一条短信？我知道您可以在 iOS6 中设置带有消息的回复，但我们希望在收到呼叫时自动发送消息，目前用户仍然需要在来电时按下按钮才能发送消息。我们还希望使用文本响应任何传入的 SMS/消息。以及通过电子邮件自动回复任何传入的电子邮件。如果有人可以将我链接到苹果网站或说你不能这样做的地方？谢谢你的帮助。

编辑 - 有没有办法获取有关这些项目通知的信息？我在想如果您不能直接处理呼叫本身，那么您可以在定时循环中检查是否有未接来电或任何相关信息？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:25:05.143

除非你想开发和申请越狱手机，否则苹果应用商店是不允许的。

# wpf - 在 WPF TextBlock 中自定义文本修剪

> ID：13649065
> 
> 赞同：1
> 
> 时间：2012-11-30T16:23:43.980
> 
> 标签：wpf, trim, textblock

我的 WPF 视图中有一个 TextBlock 元素，它数据绑定到视图模型中的字符串属性。现在，此属性中的文本可以变得更长一些，因此应将其修剪为单行显示。布局不应更改，因此必须避免使用多行。此外，不应更改数据绑定源并保持单个字符串。要显示的文本类似于以下示例：

*   XY 的一些对象
*   ABC的另一个对象
*   3 个模糊对象（XY、ABC、DEF）
*   20 个很棒的物体（XY #1、#2、ABC #2、#3、DEF、GHI 以及，一些，更多）

简单的解决方案是这样的：

```
<TextBlock Text="{Binding PageTitle}" TextTrimming="CharacterEllipsis"/> 
```

这适用于前两个示例文本，但在最后两个示例中，我希望右括号保持可见。所以我目前得到的是：

*   20 个很棒的对象（XY #1、#2、ABC #2、#3、DEF...

但我寻求的是：

*   20 个很棒的对象（XY #1、#2、ABC #2、#3、DEF... **）**

WPF中是否有一种简单的方法可以做到这一点？基本上，省略号字符串现在总是三个点（从视觉上看，也可能是 Unicode 字符），它需要是可变的，并且包括源字符串中包含的任何结束标点符号。

如有必要，我可以为此编写一个自定义控件，但也需要有关实现修剪的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-22T16:23:12.170

简单的方法：使用 a `DockPanel`，在其中放两个`TextBlock`s，第一个显示带有省略号修剪的字符串，第二个显示右括号，停靠在右侧：

```
<DockPanel>
    <TextBlock Text=")" DockPanel.Dock="Right" />
    <TextBlock Text="{Binding PageTitle}" TextTrimming="CharacterEllipsis" />
</DockPanel> 
```

如果您想自己进行修剪，可以查看我在这篇文章中的回答：[Ellipsis at start of string in WPF ListView](https://stackoverflow.com/questions/612774/ellipsis-at-start-of-string-in-wpf-listview)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:36:11.537

我没有适合您的实现，但由于您使用的是绑定，我会考虑使用转换器而不是自定义控件。您可以访问转换方法的参数中所需的所有内容，以计算要显示多少字符串并完全控制它的显示方式，而无需修改视图模型中的数据。

# liferay-6 - liferay-6.1 - 实现自己的服务

> ID：13649067
> 
> 赞同：9
> 
> 时间：2012-11-30T16:23:55.820
> 
> 标签：liferay-6

嘿，我已经和学生一起创建了自己的 service.xml。现在我想为学生添加我自己的 searchByName 方法。你能解释一下在 StudentLocalServiceImpl 中写什么吗？

```
 public class StudentLocalServiceImpl extends StudentLocalServiceBaseImpl {
/*
 * NOTE FOR DEVELOPERS:
  *
 */

public List<Student> getAll() throws SystemException {
    return studentPersistence.findAll();
}

public Student getStudentByName(String name) {
    return studentPersistence.
} 
```

// 我创建了一个方法 getAll。
我需要另一个人的帮助。
提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T18:48:35.963

`service.xml`您将首先在您定义的实体中将其声明为“查找器”元素。

例如

```
<finder name="Name" return-type="Student">
    <finder-column name="name" />
</finder> 
```

如果想要 a作为返回类型，如果 name 不是唯一的，`return-type`也可能是这样。`Collection``List<Student>`

```
<finder name="Name" return-type="Collection">
    <finder-column name="name" />
</finder> 
```

您还可以为该列声明一个比较运算符：

```
<finder name="NotName" return-type="Collection">
    <finder-column name="name" comparator="!=" />
</finder> 
```

`unique="true"`查找器实际上也可以通过指定查找器上的属性来声明要在此关系上生成的唯一索引（将应用于 DB 表） ：

```
<finder name="Name" return-type="Student" unique="true">
    <finder-column name="name" />
</finder> 
```

有了这个定义并在重新运行之后`ant build-service`，`studentPersistence`将包含使用在 xml 元素中找到的查找器名称并附加前缀的新方法：countBy、findBy、fetchBy、removeBy 等。

最后，您的服务方法只需要包含以下内容（基于上述内容）：

```
public Student getStudentByName(String name) throws SystemException {
    return studentPersistence.findByName(name);
} 
```

高温高压

# c++ - typedef - 原始类型到原始类型

> ID：13649071
> 
> 赞同：1
> 
> 时间：2012-11-30T16:23:59.750
> 
> 标签：c++, visual-studio-2012, typedef, language-lawyer, gcc4

将原始类型的typedef转换为另一种原始类型是否有效？

```
typedef int long; 
```

在 VS 2012 上，发出警告但编译正常。

> 警告 C4091：“typedef”：当没有声明变量时，“long”左侧被忽略

但是在 gcc-4.3.4 上，它失败了。

> 错误：声明没有声明任何东西。

哪个编译器符合标准？

PS：我不会在生产代码中写这样的东西。只是想出了想法和检查。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T16:28:28.207

> 它是有效的 C++

编号 C++11，第 7.1.3.6 节：

> 在给定的范围内，不应使用 typedef 说明符来重新定义在该范围内声明的任何类型的名称以引用不同的类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T16:27:59.267

他们都在说同样的事情，但有人将其报告为错误。请注意，VS 警告显示“typedef 已被忽略”。问题是`int long`and`long int`是同义词，所以你基本上是在创建一个未命名`typedef`的`long`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T17:12:36.483

两者都按照标准的要求做。该 typedef 无效，两个编译器都会发出诊断信息。

# php - PHP脚本在后台运行

> ID：13649073
> 
> 赞同：0
> 
> 时间：2012-11-30T16:24:11.357
> 
> 标签：php, abort

假设我有一个使用 ignore_user_abort 和 set_time_limit 值为 0 的脚本，除了将结果写入文件或数据库之外，是否可以使用 php 检查该进程/任务何时完成？

目前我只是写入一个文件并使用一个脚本来查看它是否已经结束，这可以工作，但如果出现问题，脚本可能已经结束，但在文件中它可能看起来好像仍在运行。

我使用这种格式：

```
script|timestamp_start|timestamp_end\n 
```

例如

```
script|10000000|0 - script runs
script|10000000|1000000001 - script ended 
```

# webview - 在 android webview 中仅显示来自 rss 提要的文本

> ID：13649076
> 
> 赞同：0
> 
> 时间：2012-11-30T16:24:17.253
> 
> 标签：webview

我的代码显示了来自 yahoo 的 rss 提要，但它显示了完整的页面，如下所示：

![http://s12.postimage.org/5uxi7zo99/dbt.png](../Images/2cea400999529b4a68eec2774d1ddf97.png)

我只需要包含新闻的白盒子。蓝色的雅虎部分应该被删除。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:35:01.357

相当老的帖子，但您必须从 RSS 提要解析 XML。查找 SAXparser，您可能会找到解析 RSS 提要的示例

# qml - 为什么我的 QML 属性在绑定到 Slider.value 属性时没有更新？

> ID：13649082
> 
> 赞同：2
> 
> 时间：2012-11-30T16:24:38.643
> 
> 标签：qml, blackberry-10, blackberry-cascades

我有一个 QML 文档，其中包含`int property`、 a`Slider`和 a `Button`。我希望`x`始终具有与`Slider.value`. 这是我的 QML：

```
Page {
    property int x: 1

    content: Container {
        Slider {
            fromValue: 1
            toValue: 500
            value: x
            onValueChanged: {
                console.log("Slider value is: "+value);
                console.log("x value: "+x);  
            }
        }
        Button {
            text: "Increment x"
            onClicked: {
                x=x+10;
            }
        }
    }
} 
```

当我按下按钮时，滑块值会更新`x`并更新。但是当我移动滑块时， 的值`x`不会更新。为什么`x`当我移动滑块时值没有变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T15:08:30.597

因为你`x`没有绑定到`Slider.value`. 当你绑定`Slider.value`到 时`x`，如果`x`改变，`Slider.value`也会改变但是如果`Slider.value`改变（当你滑动它时），`x`值不会改变。

要解决此问题，您可以使用[别名](http://doc.qt.digia.com/qt/propertybinding.html#property-aliases)类型

```
property alias x: slider.value // assume the Slider has a id of "slider" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:36:48.650

试试这个：

```
Page {
property int x: **sliderID.value**

content: Container {
    Slider {
        **id: sliderID**
        fromValue: 1
        toValue: 500
        value: x
        onValueChanged: {
            console.log("Slider value is: "+value);
            console.log("x value: "+x);  
        }
    }
    Button {
        text: "Increment x"
        onClicked: {
            x=x+10;
        }
    }
} 
```

}

我建立了双向绑定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-02T13:20:38.213

使用 onImmediateValueChanged 信号而不是 onValueChanged

```
...
onImmediateValueChanged: {
    console.log("Slider value is: "+value);
    console.log("x value: "+x);  
}
... 
```

# ruby - 对外界隐藏 ruby 的构造函数，但在实例方法中使用它

> ID：13649084
> 
> 赞同：0
> 
> 时间：2012-11-30T16:24:40.220
> 
> 标签：ruby, constructor, instantiation

我需要创建一个类来防止外部代码直接实例化它。所有实例都是通过调用几个类方法获得的，还有一些实例方法会生成新实例并返回它们。

```
class SomeClass
  class << self
    private :new, :allocate
  end

  def initialize(hash)
    @hash = hash
  end

  # A class method that returns a new instance
  def self.empty
    new({})   # works fine!
  end

  # Another class method that returns a new instance
  def self.double(a, b)
    new({a => b})   # works fine!
  end

  # An instance method that will generate new instances
  def combine_with(a, b)
    # Here's the problem!
    # Note: it doesn't work with self.class.new either
    SomeClass.new(@hash.merge({a => b}))
  end
end 
```

所以我将`new`方法定义为私有的。这适用于类方法，在它们内部我仍然可以在内部调用 new。但我不能`new`从实例方法中调用。我尝试将其定义`new`为受保护，但这也无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:06:09.687

你试过用`send`吗？

```
SomeClass.send :new, @hash.merge({a => b}) 
```

# css - 媒体查询不是运算符

> ID：13649094
> 
> 赞同：2
> 
> 时间：2012-11-30T16:25:09.420
> 
> 标签：css, media-queries

吉日

我一直在试图弄清楚制作一个媒体查询，它可以为高达 660px 的屏幕提供高分辨率图像，但不能提供正好为 321px 的屏幕。

目的是为台式机/笔记本电脑等提供服务，而我的桌面应用程序具有 321px 视口一个普通的低分辨率图像，而 660 以下的任何东西（不包括 321px 视口）都可以获得高分辨率图像。

它使用这两个查询工作，但 320px 视口请求两个图像。我可能会很懒惰并保持原样，因为它可以实现我想要的显示方式，但它正在消耗不必要的带宽：

```
@media all and (min-width:661px){  //serves high res image to iphones etc (good), but also my 321px desktop app viewport (bad) 
```

其次是...

```
@media all and (min-width: 661px), all and (width:321px) {  //serves low res image to desktops (good) and my 321px desktop app viewport (good) 
```

我一直在第一个查询中使用 not 运算符，但还没有破解它，例如

```
all and (min-width:661px) and not (width:321px) 
```

……但是不行。

那么我如何改变第一个查询说......

允许所有低于 660 像素，但忽略任何 321 像素？

谢谢你看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:42:07.440

以下是一些媒体查询。最后一个是你要找的。介于 320px 和 322px 之间的任何内容都会将您的身体背景显示为黑色。就像说只显示 321 像素。希望这可以帮助！

```
@media only screen and (max-width: 660px) { body {background:red;} }

@media only screen and (min-width : 320px) and (max-width : 322px) {body{background:#000;}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:38:28.277

没关系 - 我想我没有使用 not 就破解了它 - 这里是......

```
@media all and (min-width: 322px) and (max-width: 660px), (max-width: 320px) {  //hi res image for all screens 660px and below, excluding those exactly 321px 
```

...其次是...

```
@media all and (min-width: 661px), all and (width:321px) { //low res image for all screens above 660px, plus those exactly 321px 
```

似乎正在按我的意愿工作。

# mysql - 使用 UNION 对子查询进行 INNER JOIN

> ID：13649096
> 
> 赞同：1
> 
> 时间：2012-11-30T16:25:12.400
> 
> 标签：mysql, sql

我有一个 SQL 查询来更新照片的旋转偏移量。查询应将值加 1，除非值为 3，在这种情况下，应将其设置回 0（如，4 批 90 度旋转与完全不旋转相同）。

我不确定下面的内容是否是最有效的方法，我会很感激提供更简单的解决方案的建议，这些解决方案不需要我像我一样列出映射。

但是，**我的问题是**，为什么会出现 MySQL 语法错误？当我自己使用 SELECT 子查询时，它会按预期返回结果。

```
UPDATE `photos` p SET p.rotational_offset=map.new_value INNER JOIN (
SELECT 0 AS rotational_offset, 3 AS new_value
UNION SELECT 1 , 0
UNION SELECT 2 , 1
UNION SELECT 3 , 2
) map ON p.rotational_offset=map.rotational_offset WHERE p.photo_id="22"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:27:32.823

首先，一个更简单的解决方案是使用[`MOD`](http://dev.mysql.com/doc/refman/5.6/en/arithmetic-functions.html#operator_mod)运算符 (%)：

```
UPDATE photos
SET rotational_offset = (rotational_offset + 1) % 4
WHERE photo_id = '22' 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/3118e/1)

* * *

现在要实际回答您的问题...您会收到错误消息，因为您没有使用正确的语法进行多表[更新](http://dev.mysql.com/doc/refman/5.6/en/update.html)。表引用首先出现，在`SET`子句之前。正确的语法如下：

```
UPDATE [LOW_PRIORITY] [IGNORE]
table_references
SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...
[WHERE where_condition] 
```

您的语句不起作用，因为您将内部联接放在`SET`子句之后。修正后的版本如下：

```
UPDATE photos AS p
INNER JOIN
(
    SELECT 0 AS rotational_offset, 3 AS new_value
    UNION ALL SELECT 1 , 0
    UNION ALL SELECT 2 , 1
    UNION ALL SELECT 3 , 2
) AS map
ON p.rotational_offset = map.rotational_offset 
SET p.rotational_offset=map.new_value
WHERE photo_id = '22' 
```

# java - 变量可能尚未初始化（抽象类）

> ID：13649112
> 
> 赞同：3
> 
> 时间：2012-11-30T16:26:03.180
> 
> 标签：java, compiler-errors

我刚刚接触 Java 语言，所以我通常会遇到一些平庸的错误。以下应该是其中之一。Es1.java:93: error: variable f may not have been initialized 在查看代码之前要知道的事情 - 我正在使用一些自定义类：ConsoleInputManager 和 ConsoleOutputManager 的工作原理与 Scanner 和 System.out 基本相同；图是一个抽象类；圆形、方形和矩形扩展图

```
import prog.io.*;
//ConsoleInputManager, ConsoleOutputManager
import prog.utili.*;
//Figure, Circle, Squade, Rectangle
class Es1{
public static void main(String[] args){

//Variables
ConsoleInputManager in = new ConsoleInputManager();
ConsoleOutputManager out = new ConsoleOutputManager();
int com1,com2,com3;
com1 = com2 = com3 = 0;
double r,s,l,w;
r = s = l = w = 0.0;
Figure f;

do{
    //Menu
    out.println("1\. Insert a new figure");
    out.println("2\. Calculate the area of the current figure");
    out.println("3\. Examine the current figure");
    out.println("4\. Exit the program\n");

    //Input
    com1 = in.readInt("Command: ");

    //New figure
    if (com1 == 1){
        do{
            out.println("1\. Circle");
            out.println("2\. Square");
            out.println("3\. Rectangle");
            out.println("4\. Back to main menu\n");
            com2 = in.readInt("Command: ");
            //Circle
            if (com2 == 1){
                s = l = w = 0.0;
                do{
                    r = in.readDouble("Radius: ");
                } while (r <= 0);
            }
            else
            //Square
            if (com2 == 2){
                r = l = w = 0.0;
                do{
                    s = in.readDouble("Side: ");
                } while (s <= 0);
            }
            else
            //Rectangle
            if (com2 == 3){
                r = s = 0.0;
                do{
                    l = in.readDouble("Length: ");
                } while (l <= 0);
                do{
                    w = in.readDouble("Width: ");
                } while (w <= 0);
            }
        } while (com2 != 4);
    }
    else

    //Area
    if (com1 == 2){
        if (r != 0.0){
            f = new Circle(r);
            out.println("Area = " + f.getArea());
        }
        else
        if (l != 0.0){
            f = new Square(s);
            out.println("Area = " + f.getArea());
        }
        else
        if ( b != 0.0){
            f = new Rectangle(l,w);
            out.println("Area = " + f.getArea());
        }
        else
            out.println("It hasn't been inserted any figure");
    }
    else

    //Examination
    if (com1 == 3){
        do{
            out.println("1\. Examine the current figure");
            out.println("2\. Back to main menu");
            com3 = in.readInt("Command: ");
            if (com3 == 1){
                if (f instanceof Circle)
                    out.println("Circle");
                else
                if (f instanceof Square)
                    out.println("Square");
                else
                if (f instanceof Rectangle)
                    out.println("Rectangle");
                else
                    out.println("It hasn't been inserted any figure");
            }   
        } while (com3 != 2);
    }

} while (com1 != 4);
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T16:27:04.930

```
Figure f; 
```

上面的语句是内部`main`方法。有可能不满足 if/else 条件，从而使 f 未分配。

将其更改为如下所示：

```
Figure f=null; 
```

所有局部变量都需要在使用之前分配一些值。

除此之外，请确保在对 f 执行任何操作之前执行 null 检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:29:50.810

`Figure f;`

这未初始化。

# web-services - jaxws 多个 Web 服务 单个 wsdl

> ID：13649115
> 
> 赞同：2
> 
> 时间：2012-11-30T16:26:16.460
> 
> 标签：web-services, wsdl, jax-ws

我已经创建了 Java 对象并添加了必要的 @WebService 注释等，我可以在它们单独的 url 上查看每个对象的 wsdls。

我希望将这两个服务组合成一个 wsdl 文件。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:55:51.160

由于您是这些服务的创建者，因此最简单的方法是合并 Web 服务，您将获得一个 wsdl。只需将所有方法放在一项服务中即可。

但是，如果您只是好奇并普遍询问，手动合并 wsdls 并非易事。您需要注意命名空间、自定义复杂类型和元素以及方法/操作名称。据说有一些工具可以自动执行此操作，您可以尝试[一下](http://code.google.com/p/wsdl-merger-maven-plugin/)。

# c++ - Qt OpengL - 3D 固定场景的旋转

> ID：13649122
> 
> 赞同：1
> 
> 时间：2012-11-30T16:26:30.957
> 
> 标签：c++, qt, opengl

我正在使用 OpenGL 渲染处理 Qt/GPU/OpenCL 代码。它执行了一个 3D 场景的动画，我在动画的同时成功地用鼠标旋转了这个 3D 场景。但是当我暂停动画时，旋转不起作用，即当 3D 场景“固定”时。

这是使用鼠标旋转的两个功能：

```
void GLWidget::mousePressEvent(QMouseEvent *event)
 {
     lastPos = event->pos();
 }

 void GLWidget::mouseMoveEvent(QMouseEvent *event)
 {
     float dx = (event->y() - lastPos.y()) / 10.0f;
     float dy = (event->x() - lastPos.x()) / 10.0f;
     float dz = 0.0f;
     float angle = sqrtf((event->x() - lastPos.x()) + (event->y() - lastPos.y()));

     if (event->buttons() & Qt::LeftButton) {
        angle = sqrtf(dx*dx + dy*dy);
        glRotatef(0.1*angle, dx, dy, dz);
       }
 } 
```

当动画处于“暂停”状态时，我希望能够旋转固定场景，当我按下“重新启动”按钮时，我希望动画通过场景旋转完成的最后修改图像重新启动。

所以，这应该是，在做“暂停”之前，就像最后一个动画的快照，然后旋转的可能性，最后，从最后一个 3D 旋转场景重新开始动画。

这是我的主要显示函数“ `processCurrent()`”，由 QTimer 调用，其中`"draw()"`包含 OpenGL 函数，并在我暂停时`animation`设置为：`false`

```
 void GLWidget::processCurrent()
{

 if (Galaxy->isFirstLaunch)
    {
    draw();
    printStats();
    //Calling kernel for calculatig subsequent positions
    Galaxy->runCLKernels();
    Galaxy->isFirstLaunch = false;
    glFlush();
    swapBuffers();
    }

 if (animation)
    {
    clWaitForEvents(1, &Galaxy->glEvent);
    draw();
    printStats();
    //Calling kernel for calculatig subsequent positions
    Galaxy->runCLKernels();
    glFlush();
    swapBuffers();
   }

} 
```

你能解释一下为什么这种旋转不适用于固定场景吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:43:59.813

你仍然需要绘制场景，如果`draw()`只有绘制操作而没有动画操作并且`runCLKernels`动画应该可以工作：

```
if(animation)
{
    //same as before...
}
else
{
    // I don't know whether or not you would still call WaitForEvents...
    draw();
    printStats();
    // Do NOT calculate subsequent positions, just use what was calculated last time.
    glFlush();
    swapBuffers();
} 
```

# django - django模板：如何包含变量

> ID：13649125
> 
> 赞同：1
> 
> 时间：2012-11-30T16:26:43.760
> 
> 标签：django, templates

我想在 for 循环中创建一系列变量，例如 name0、name1、...。我该怎么做？谢谢。

```
 {% for i in '1234567890' %}
        {% if name{{forloop.counter0}} %}
        ...
        {% endif %}
        ...
        {{name{{forloop.counter0}}}}
        ...
    {% endfor %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:32:23.777

很简单

```
{{ name }}{{ forloop.counter0 }} 
```

对于 if，您应该使用“with”语句：

```
{% with name|add:forloop.counter0 as if_test %}
{% if if_test %}
... <!-- do whatever you need to do here --> 
```

所有这些都必须在你的 for 循环中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T22:50:39.900

如您所见，Django 模板语言努力阻止您做您想做的事情，鼓励您在视图代码中而不是模板中进行数据处理。对于您的示例，在您的视图代码中，您可以尝试执行以下操作：

```
context['names'] = [name for name in names[:10]] 
```

...而不是为每个名称创建单独的变量。

然后在您的模板中：

```
{% for name in names %}
    {% if name %}
    ...
    {% endif %}
    ...
    {{name}}
    ...
{% endfor %} 
```

据我所知，这与您的代码具有相同的效果，但是您将在视图中而不是模板中聚合名称。如果我错误地阅读了您的代码意图，请提供更多上下文，但您似乎没有做任何*需要*模板逻辑的事情。

# python - 将子列表传递给函数的有效方法

> ID：13649128
> 
> 赞同：1
> 
> 时间：2012-11-30T16:26:56.950
> 
> 标签：python, performance, list

我正在尝试解析包含一系列序列化结构的一长串二进制数据。我能够以整数列表的形式获取内存中的数据（我们称之为主列表）。

为了解析主列表中包含的不同字段，我正在创建一些函数和类。我的问题是将主列表的子范围传递给这些函数和类的最有效方法是什么。

我是 Python 新手，如果我说错了什么，请原谅我。

*   如果我这样做：`parse_foo(main_list[n:N])`我想将创建一个新列表。如果我没记错的话，这种方法效率很低。顺便说一句，我不会随时修改主列表。
*   我想我可以使用迭代器（`iterator.next()`）。但问题是我无法随机访问元素。

评论和建议总是非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:30:48.127

您可以设置函数，以便它们获取主列表以及开始和结束索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:31:46.960

为了评估效率，您应该利用`dis`和`cProfile`模块。

来自[`cProfile`文档](http://docs.python.org/2/library/profile.html#cProfile.run)

```
python -m cProfile myscript.py 
```

来自[`dis`文档](http://docs.python.org/2/library/dis.html?highlight=dis#module-dis)

```
>>> dis.dis(myfunc)
  2           0 LOAD_GLOBAL              0 (len)
              3 LOAD_FAST                0 (alist)
              6 CALL_FUNCTION            1
              9 RETURN_VALUE 
```

# phpmailer - 身体已被更改 DKIM 验证失败

> ID：13649129
> 
> 赞同：3
> 
> 时间：2012-11-30T16:26:59.517
> 
> 标签：phpmailer, dkim

我正在使用 PHPMailer 发送邮件，并喜欢在邮件中附加 DKIM 签名。[在我应用这个补丁](http://sourceforge.net/p/phpmailer/bugs/403/)之前我遇到了问题。现在我可以向 isnotspam.com 发送成功签名的消息。

我已成功签署正文中少于 1500 个字符的消息。如果增加字符数（即使是简单的a）签名失败。

我已经正确设置了 TXT 域记录。

我想这是因为电子邮件的正文原因，如果我使用[此服务](http://www.appmaildev.com/en/dkim/)，我总是会收到“错误的正文哈希”错误。

电子邮件标题中的签名如下所示：

```
DKIM-Signature: v=1; a=rsa-sha1; q=dns/txt; l=641; s=mymail;
    t=1354285494; c=relaxed/simple;
    h=From:To:Subject;
    d=revaxarts.com;
    z=From:=20"WP=203.4"=20<info@rvaxarts.com>
    |To:=test@rvaxarts.com
    |Subject:=20DKIM=20Test;
    bh=Sx1Rj3c65v2Hk0fmg2j5XNIDi14=;
    b=n4OGAwl3i[...]AOkfUglp6iiYZ6B2M3ZKlGW5gDfE= 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T21:44:51.400

我在这里遇到了与 Perl 脚本和错误的正文哈希相同的问题。

我用于`\n`换行符（例如标题行的结尾）。但是你必须使用`\r\n`. 这为我解决了！

**编辑：** 感谢 ArtemGr 对以下信息的评论和 url（从[http://permalink.gmane.org/gmane.mail.postfix.user/223780](http://permalink.gmane.org/gmane.mail.postfix.user/223780)复制以防止链接失效）：

损坏的一个可能原因是发送应用程序生成的电子邮件在某些方面与 RFC 5322 或 RFC 5321 不兼容。

*   超过 990 的行。

    Postfix SMTP 客户端将行长度保持在 1000 字节的 SMTP 协议限制以下，包括 . 由于此更改发生在签名之后，因此肯定会破坏 DKIM 签名。

    为避免长行损坏问题，请以带引号的可打印或 base64 编码发送邮件，行长最多为 80 个字符。

*   格式错误的行尾。

    SMTP 需要行结尾，并且不允许在任何其他上下文中使用或字符。

    Postfix sendmail 命令需要 UNIX 样式的`<LF>`[line-feed] 行结尾。它还将接受以`<CR><LF>`[carriage-return line-feed] 结尾的行，但您不能在同一条消息中使用混合行尾样式。

等等。如果您想确保 DKIM 签名能够继续存在，您需要发送符合 RFC 5322 或 RFC 5321 协议规范的电子邮件；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-16T09:56:00.983

我的案例是 unicode 撇号和连字符字符。用 ascii 替换它们后，DKIM 验证通过。

# ruby - 将 validates_with 与 ruby 和 mongoid 一起使用

> ID：13649132
> 
> 赞同：0
> 
> 时间：2012-11-30T16:27:02.207
> 
> 标签：ruby, validation, activerecord, exception-handling, mongoid

我是 ruby​​ 和 mongoid 的新手。我需要使用 validates_with 下面是我的代码

```
class ValidatorClass < ActiveModel::Validator

  def validate(record)

    if record.name == ""

        record.errors.add(:name, "An error occurred")

    end

  end
end

class Person
  include Mongoid::Document
  include Mongoid::Timestamps::Created
  include Mongoid::Timestamps::Updated
  include Mongoid::Versioning
  include ActiveModel::Validations

  field :id, type: Integer
  field :name, type: String
  field :age, type: Integer

   validates_with ValidatorClass, :on => :create

end 
```

但是当我使用以下代码创建模型时：

```
Person.create(id: 5, name: "", age: 50) 
```

我没有得到抛出的错误。我没有使用 Rails。我只使用 ruby​​ 和 mongodb。有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:51:51.427

您不必在课堂上包含 ActiveModel::Validations

尝试更改您的验证类以使用以下代码：

```
class ValidatorClass < ActiveModel::Validator
  def validate(record)
    if record.name.blank?
      record.errors.add(:name, "An error occurred")
    end
  end
end 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:56:27.133

请试试这个：

```
class ValidatorClass < ActiveModel::Validator

  def validate(record)

        if !record.name.present?
            record.errors.add(:name, "An error occurred")
        end 

  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:34:19.693

从文档中，您可以尝试在 Person 类中添加这一行：

```
include ActiveModel::Validations 
```

[http://api.rubyonrails.org/classes/ActiveModel/Validator.html](http://api.rubyonrails.org/classes/ActiveModel/Validator.html)

# sql - 如何在子查询中引用临时表？

> ID：13649134
> 
> 赞同：3
> 
> 时间：2012-11-30T16:27:06.677
> 
> 标签：sql, sql-server, sql-server-2008-r2, sql-update

我在存储过程中有一个本地表变量，包含几列；我需要根据该行的第 1 列的值使用子查询的结果更新每行的第 2 列。

就像是：

```
UPDATE @mytable
SET column2 = (SELECT ... FROM ... WHERE something = @mytable.column1) 
```

但这似乎不起作用，我收到一个关于 @mytable 未定义的错误。

此查询的正确语法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T16:29:10.910

您是否尝试过使用别名？

```
UPDATE temp 
SET temp.column2 = (SELECT ... FROM ... WHERE something = temp.column1) 
FROM @mytable temp 
```

# javascript - 当图表类型为 highstocks 中的“线”时，如何在工具提示中显示开盘价、收盘价、最高价和最低价？

> ID：13649136
> 
> 赞同：1
> 
> 时间：2012-11-30T16:27:06.827
> 
> 标签：javascript, jquery, charts, highcharts, highstock

我想显示一个符号的开盘价、收盘价、最高价和最低价，但似乎 highstock 仅在图表类型为 ohlc 或烛台但不对齐时才显示该值。我对这个问题的解决方法是生成两个具有相同数据的图表，线（使其可见）和 ohlc（使其不可见），并从第二种类型中提取开、关、高和低并将其显示在工具提示中。我确定这不是正确的方法。有没有人有任何解决方案。

我的工具提示格式化程序

```
 formatter: function() {

                var s=' ';
                $.each(this.points, function(i, series) {

                   //when the series is of type 'line', series.point.open is undefined but works great on 'ohlc' type
 n=new Date(series.point.x);

 s += 'Open: <span style="font-weight:bold">' +series.point.open + '</span> Close: <span style="font-weight:bold">' +series.point.close + '</span> High: <span style="font-weight:bold">'+ series.point.high + '</span> Low: <span style="font-weight:bold">' + series.point.low + '</span>';

                });
                return s;

            } 
```

[http://jsfiddle.net/7G9Cj/4/](http://jsfiddle.net/7G9Cj/4/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T19:04:34.890

解决了。如果有人需要，这是解决方案。

```
formatter: function() {
  var s = ' ';

  $.each(this.points, function(i, series) {
      for (i = 0; i < dataLength; i++) {
        if (ohlc[i][0] == series.point.x) //ohlc holds my main data
        {
          s += 'Open: <span style="font-weight:bold">' + ohlc[i][1] 
            + '</span> Close: <span style="font-weight:bold">' + ohlc[i][4] 
            + '</span> High: <span style="font-weight:bold">' + ohlc[i][2] 
            + '</span> Low: <span style="font-weight:bold">' + ohlc[i][3] 
            + '</span>';
          break;
        }
      }
    }
  });

  return s;
} 
```

# wordpress - 我如何在wordpress中带来登录表单

> ID：13649138
> 
> 赞同：2
> 
> 时间：2012-11-30T16:27:22.260
> 
> 标签：wordpress

我已经尝试过[这里的代码](http://codex.wordpress.org/Function_Reference/wp_login_form)

我什至试过这段代码

```
 <?php wp_login_form(); ?> 
```

但是如果用户输入错误的用户名或密码，他们会被重定向到 wp_login.php

是否有任何登录表单可以在页面本身中执行数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:30:40.997

+1 明确的问题

您好，您可以使用此表格

```
 < ?php
 /*
Template Name: Custom WordPress Login
      */
  global $user_ID;

    if (!$user_ID) {

     if($_POST){
    //We shall SQL escape all inputs
      $username = $wpdb->escape($_REQUEST['username']);
     $password = $wpdb->escape($_REQUEST['password']);
    $remember = $wpdb->escape($_REQUEST['rememberme']);

    if($remember) $remember = "true";
       else $remember = "false";
  $login_data = array();
 $login_data['user_login'] = $username;
   $login_data['user_password'] = $password;
   $login_data['remember'] = $remember;
     $user_verify = wp_signon( $login_data, true ); 

    if ( is_wp_error($user_verify) ) 
     {
      echo "<span class="error">Invalid username or password. Please try again!</span>";
     exit();
   } else 
   {    
   echo "<script type="text/javascript">window.location='". get_bloginfo('url') ."'</script>";
   exit();
  }
} else { 

  get_header();

  ?>
      <div id="container">
      <div id="content">

     <!--?php the_title(); ?-->

     <div id="result"></div> <!-- To hold validation results -->
     <form id="wp_login_form" action="" method="post">

     <label>Username</label><br>
     <input type="text" name="username" class="text" value=""><br>
        <label>Password</label><br>
       <input type="password" name="password" class="text" value=""> <br>
    <label>
    <input name="rememberme" type="checkbox" value="forever">Remember me</label>
         <br><br>
     <input type="submit" id="submitbtn" name="submit" value="Login">

      </form>

       <script type="text/javascript">                          
       $("#submitbtn").click(function() {

          $('#result').html('<img src="<?php bloginfo('template_url'); ?>/images/loader.gif"               class="loader" />').fadeIn();
     var input_data = $('#wp_login_form').serialize();
     $.ajax({
     type: "POST",
      url:  "<?php echo "http://" . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?>",
     data: input_data,
      success: function(msg){
     $('.loader').remove();
    $('<div>').html(msg).appendTo('div#result').hide().fadeIn('slow');
    }
      });
      return false;

      });
    </script>

     </div>
      </div>
     <!--?php

    get_footer();
}
     }
    else {
echo "<script type='text/javascript'-->window.location='". get_bloginfo('url') ."'";
     }
      ?> 
```

# vim - 使 gvim markdown highlight 忽略内部标记

> ID：13649141
> 
> 赞同：7
> 
> 时间：2012-11-30T16:27:31.753
> 
> 标签：vim, escaping, markdown

我最近升级到 gvim 7.3，很高兴发现 markdown 突出显示。我还注意到它将“内部” `_`（下划线）视为标记。例如：

> *我希望 gvim 在这里显示重点*
> 
> 但不是_这里

gvim 实际上将我示例中的最后一行显示为 'but not_ *here* '。看起来 SO 的降价解释更接近我想要的。

我并不是说 gvim 是“错误的”，因为我不知道正确的降价实现是什么。但是，有没有办法配置它，如果标记被非空白包围，它们应该被视为普通文本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T17:09:11.847

运行时文件（特别是如果您使用 vim.org 上的旧版 Vim 7.3.000 / 046 安装程序）不会经常更新。大多数插件作者在其他地方发布了更新的版本，它们只是偶尔被 Vim 采纳。

在[Tim Pope 的存储库](https://github.com/tpope/vim-markdown)`~/.vim`中，您会发现没有显示问题的较新版本（您可以将其安装到您的目录中）；相反，它甚至将单个下划线字符突出显示为错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T16:54:29.123

我找到了一个解决方案，它适用于我迄今为止测试过的东西。

将`%vim%/syntax/markdown.vim`文件复制到`%/.vim/syntax/markdown.vim`并将第 63 行更改为：

```
syn region markdownItalic start="\s_\S\@=" end="\S\@<=_\|_\S\@=" keepend contains=markdownLineStart 
```

重新启动 vim，它应该匹配`*this*`and `_this_`but `not_this`。

编辑：更改信息，感谢@ZyX

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-16T02:02:17.537

在 Markdown 文件中记录代码时，我遇到了这些问题。

我使用的解决方案是将有问题的部分放在一个有四个空格的代码块中，或者放在一个带有反引号 (`) 的代码跨度中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-29T02:28:19.573

尝试使用 Github 风味降价：[https ://github.com/jtratner/vim-flavored-markdown](https://github.com/jtratner/vim-flavored-markdown)

# c# - 逆波兰表示法：计算指数

> ID：13649147
> 
> 赞同：0
> 
> 时间：2012-11-30T16:27:54.133
> 
> 标签：c#, postfix-notation

我目前正在使用反向波兰表示法。我能够执行除指数数学之外的所有操作。我知道 C# sharps 执行指数数学运算，`Math.Pow`但在我的代码中使用它会给我一个错误`'System.Collections.Generic.Stack<T>.Push(T)' is a 'method', which is not valid in the given context`。`if else`您可以在最后一条语句中找到具体问题。知道如何正确纠正或创建执行指数数学的方法吗？

**代码**

```
private string inputValue = "";

private void RPNCalc(string rpnValue)
{
Stack<int> stackCreated = new Stack<int>();
stackCreated.Clear();
string[] inputArray = rpnValue.Split();
int end = inputArray.Length - 1;
int numInput;
int i = 0;

do
{
    if ("=+-*/%^".IndexOf(inputArray[i]) == -1)
    {
        try
        {
            numInput = Convert.ToInt32(inputArray[i]);
            stackCreated.Push(numInput);
        }
        catch
        {
            MessageBox.Show("Please check the input");
        }
    }

        else if (inputArray[i]== "+")
        {
            try
            {
                int store1 = stackCreated.Pop();
                int store2 = stackCreated.Pop();
                stackCreated.Push(store2 + store1);
            }
            catch
            {
            }
        }

        else if (inputArray[i]== "-")
        {
            try
            {
                int store1 = stackCreated.Pop();
                int store2 = stackCreated.Pop();
                stackCreated.Push(store2 - store1);
            }
            catch
            {
            }
        }

        else if (inputArray[i]== "%")
        {
            try
            {
                int store1 = stackCreated.Pop();
                int store2 = stackCreated.Pop();
                stackCreated.Push(store2 % store1);
            }
            catch
            {
            }
        }

        else if (inputArray[i]== "*")
        {
            try
            {
                int store1 = stackCreated.Pop();
                int store2 = stackCreated.Pop();
                stackCreated.Push(store2 * store1);
            }
            catch
            {
            }
        }

        else if (inputArray[i]== "/")
        {
            try
            {
                int store1 = stackCreated.Pop();
                int store2 = stackCreated.Pop();
                stackCreated.Push(store2 / store1);
            }
            catch
            {
            }
        }

        else if (inputArray[i] == "^")
        {
            try
            {
                int store1 = stackCreated.Pop();
                int store2 = stackCreated.Pop();
                stackCreated.Push.Math.Pow(store1, store2);
            }
            catch
            {
            }
        }

}
while(i++ < end && inputArray[i]!= "=" && stackCreated.Count != 0);
string result = inputValue + " " + stackCreated.Pop().ToString() + Environment.NewLine;
TxtOutputBox.AppendText(result);
TxtInputBox.Clear();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:30:12.097

应该：

```
stackCreated.Push((int)Math.Pow(store1, store2)); 
```

这将执行幂运算，然后将结果压入堆栈。

就像这样做：

```
int tmp = (int)Math.Pow(store1, store2);
stackCreated.Push(tmp); 
```

另请注意，它`Math.Pow`适用于`double`s。您的 ints ( `store1`and `store2`) 将自动转换为 a `double`，但您需要告诉编译器将结果转换回 a `int`。

# .htaccess - 多个类别的唯一永久链接

> ID：13649151
> 
> 赞同：0
> 
> 时间：2012-11-30T16:28:04.507
> 
> 标签：.htaccess, url, wordpress

即使帖子包含在多个类别中，如何制作独特的永久链接？

```
Custom Structure /%category%/%postname% 
```

同一篇文章的多个永久链接会影响 Facebook 的点赞数

眼下好像是这样的，怎么可以只为一个呢？ ![在此处输入图像描述](../Images/9ec19a23f5bde499660770b725fdb50d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T16:23:34.207

您可以使用“SEO 插件”的帮助，只需搜索 wordpress 插件即可。

最近我正在使用 Yoast SEO 插件，[http: //wordpress.org/extend/plugins/wordpress-seo/](http://wordpress.org/extend/plugins/wordpress-seo/)

使用类别自定义永久链接。

# ruby-on-rails - 导轨控制器中的双重渲染错误

> ID：13649156
> 
> 赞同：0
> 
> 时间：2012-11-30T16:28:15.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我总是在浏览器中调用控制器时得到如下所示的 doublerenderError。请告诉我为什么..我只渲染一次..我从来没有重定向或类似的东西：/

这是我的控制器

```
class BezirkController < ApplicationController
caches_page :index
  def index
        Bezirk.find_each do |bezirk|
                render :json => bezirk
        end
  end
end 
```

这是错误消息：

```
actionpack (3.2.8) lib/action_controller/metal/rendering.rb:15:in `render'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/usr/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
activesupport (3.2.8) lib/active_support/core_ext/benchmark.rb:5:in `ms'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:39:in `render'
app/controllers/bezirk_controller.rb:5:in `block in index'
activerecord (3.2.8) lib/active_record/relation/batches.rb:21:in `block (2 levels) in find_each'
activerecord (3.2.8) lib/active_record/relation/batches.rb:21:in `each'
activerecord (3.2.8) lib/active_record/relation/batches.rb:21:in `block in find_each'
activerecord (3.2.8) lib/active_record/relation/batches.rb:72:in `find_in_batches'
activerecord (3.2.8) lib/active_record/relation/batches.rb:20:in `find_each'
activerecord (3.2.8) lib/active_record/querying.rb:8:in `find_each'
app/controllers/bezirk_controller.rb:4:in `index'
actionpack (3.2.8) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.8) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.8) lib/active_support/callbacks.rb:414:in `_run__149640372__process_action__195728711__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.8) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
activerecord (3.2.8) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.8) lib/active_record/connection_adapters/abstract/connection_pool.rb:473:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__312425612__call__1069087096__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
rack-cache (1.2) lib/rack/cache/context.rb:207:in `validate'
rack-cache (1.2) lib/rack/cache/context.rb:181:in `lookup'
rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
railties (3.2.8) lib/rails/engine.rb:479:in `call'
railties (3.2.8) lib/rails/application.rb:223:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/usr/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/usr/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/usr/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:48:29.490

你在一个 each 循环中，它在循环中调用 Render each pass。

要么做：

```
def index
  render :json => Bezirk.all
end 
```

或者

```
def index
  Bezirk.find_each do |bezirk|
    ...  #build up a hash to render
  end
  render :json => your_built_hash
end 
```

------- 已编辑 ---

```
def index
  bezirks = []
  Bezirk.find_each do |bezirk|
    bezirks << bezirk.attributes
  end
  render :json => {:bezirks => bezirks}
end 
```

# jquery - 了解 jsperf.com 基准测试

> ID：13649158
> 
> 赞同：0
> 
> 时间：2012-11-30T16:28:20.837
> 
> 标签：jquery, arrays

我试图理解这个基准测试：

[http://jsperf.com/for-vs-jq-inarray](http://jsperf.com/for-vs-jq-inarray)

该测试表明，在 iPad 上，jQuery 选项运行得更快。我在 iPad 上运行它，结果证明了这一点。但为什么？！

这是jQuery inArray：

```
inArray: function( elem, arr, i ) { var len;

    if ( arr ) {
        if ( core_indexOf ) {
            return core_indexOf.call( arr, elem, i );
        }

        len = arr.length;
        i = i ? i < 0 ? Math.max( 0, len + i ) : i : 0;

        for ( ; i < len; i++ ) {
            // Skip accessing in sparse arrays
            if ( i in arr && arr[ i ] === elem ) {
                return i;
            }
        }
    }

    return -1;
} 
```

它本质上与原生 javascript 示例相同，只是这次添加了 jQuery 膨胀。iPad怎么可能跑得这么快？

我缩小并优化了 2 个原生样本并重新运行了测试，但变化可以忽略不计。

在这种情况下，为什么 jQuery 比 iPad 上的原生 javascript 更快？

# java - 为什么我的 int 为 0？

> ID：13649164
> 
> 赞同：1
> 
> 时间：2012-11-30T16:28:44.587
> 
> 标签：java, math

> **可能重复：**
> [为什么 int exp1 = 14/20*100; 在java中等于'0'？](https://stackoverflow.com/questions/10335837/why-does-int-exp1-14-20100-equals-0-in-java)

我正在使用这个：

`int newWidth = Math.round(297 * (40 / 414));`

在代码中，数字实际上是变量，但它们是它们所持有的，当我运行代码时`newWidth`返回为 0，我期待 28 或 29。我看不出这里有什么问题......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T16:30:14.010

`40 / 414`立即四舍五入，`0`因为它仅适用于整数。您必须将其中一个操作数转换为`double`/`float`或`double`立即使用：

```
int newWidth = (int)Math.round(297 * (40.0 / 414)); 
```

或者：

```
int newWidth = (int)Math.round(297 * ((double)40 / 414)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-30T16:30:11.050

因为`40/414`等于`0`, 所以`297*0 = 0`和`Math.round(0) = 0`

改用双打。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T16:31:55.147

`int newWidth = (int)Math.round(297 * (40**d** / 414));`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T16:29:52.950

改成`int newWidth = (int)Math.round(297 * (40.0 / 414));`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-30T16:31:11.293

Java 中的 int 不使用小数位...因此您应该为此使用双精度数。它给你一个 0 因为在 () 40/ 414 = 0 里面。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-30T16:32:17.927

问题从 40/414 开始：这是整数除法，它返回一个 int。在这种情况下：0。

要修复它，请将其中一个整数转换为双精度或浮点数，例如 ((float) 40 / 414)。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-30T16:29:57.067

结果`40/414`为零。这是整数除法的结果。将分子或分母更改为浮点值以获得所需的结果

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-30T16:42:55.543

要把我的 2 美分投入...如前所述，问题在于整数除法。强制此除法将结果视为双精度的另一种方法：

```
int newWidth = Math.round(297 * (40.0 / 414)); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-30T16:48:54.383

40/414 舍入为 0。

你可能想要的是

```
int newWidth = (297 * 40) / 414; 
```

# asp.net - 如何在数据库中存储大量数据

> ID：13649174
> 
> 赞同：-1
> 
> 时间：2012-11-30T16:29:08.360
> 
> 标签：asp.net, sql-server, asp.net-mvc, database

我有一个简单的基本问题。假设我有一个大型网站，如 facebook、gmail 等。这个网站每天可能会保存数百 GB 的信息。我的问题是这些网站如何将这些大量信息保存在他们的数据库中（因为数据库容量）。只有一个数据库吗？这个网站只有一台服务器吗？如果有另一个服务器和数据库，它们如何相互通信？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:32:27.673

他们显然没有使用一台计算机...

如此大型站点背后的系统非常复杂，并且分布在多个数据中心。见 - [http://royal.pingdom.com/2010/06/18/the-software-behind-facebook/](http://royal.pingdom.com/2010/06/18/the-software-behind-facebook/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:37:54.177

查看此站点以获取有关这些站点（和此站点）所采用的各种架构的信息：http: [//highscalability.com/all-time-favorites/](http://highscalability.com/all-time-favorites/)

这些站点中的大多数都采用了一种称为 NoSQL 的策略——即它们不使用传统的 RDBM 数据库，而是创建了自己的具有持久化能力的对象关系框架。这种策略在大规模上运行良好，因为它消除了许多会严重影响传统 DB 方法性能的约束。然而，这通常是以降低可靠性为代价的，这通常被认为对于这些站点的场景是可以接受的。

附言。如果您的问题是普遍的兴趣，那么不用担心。如果您正在尝试构建一个高度可扩展的应用程序，请稍等片刻——您是要为世界上很大一部分人口提供服务，还是要为可能有几千名用户编写一个站点。如果是后者，则不需要 Facebook 样式缩放；将您的精力和资源投入到其他地方。如果是前者，那么从小处着手，改进您的系统，随着用户群的增长带来投资和专业知识。

# virtualbox - vm 和主机在同一子网上：VBox 自动：kvm 怎么样？

> ID：13649175
> 
> 赞同：0
> 
> 时间：2012-11-30T16:29:09.640
> 
> 标签：virtualbox, kvm

在 192.168.1.1 上使用 VirtualBox，我会自动获得像 192.168.1.2 ... 这样的虚拟机。

kvm/virt-manager 在 192.168.122.0 子网上生成 vm，路由在 122.0 和 1.0 之间。

AFAICT，如果我正确配置网桥，我的 kvm 可以在 ..1.1 子网上拥有地址。

我还没有找到一个资源，上面写着“在与主机相同的子网上提供 kvm 实例的最低配置是：”

他们可能会这么说，但我不熟悉的术语。

有什么建议么？

谢谢，肯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:55:22.110

最低配置是一个已配置的网桥，如下所示： [https ://wiki.ubuntu.com/KvmWithBridge](https://wiki.ubuntu.com/KvmWithBridge)

进行这些更改后，您应该有一个带有 IP 地址的 br0 接口，而 eth0（或任何您的设置）不应该有一个 IP 地址。然后在创建新 VM 时使用共享设备进行网络连接并指定 br0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T14:10:31.953

要么是版本更改，要么我之前忽略了它：'macvtap' 选项提供了我正在寻找的东西。

谢谢，肯特

# c# - 如何连接两个表，并使用 Linq 检索项目集合

> ID：13649178
> 
> 赞同：0
> 
> 时间：2012-11-30T16:29:20.367
> 
> 标签：c#, sql, linq

我有两个表：baswareCatalog.FlowCurrent 和 baswareCatalog.Doc。它们都包含属性 DocId。Doc 表还具有 LastExpireDate 和 Status 属性。FlowCurrent-table 还具有 RecipientName 属性。我想检索 Doc 的集合，其中项目的 DocId 在两个表中是相同的。

此外，此条件必须为真：flowCurrent.RecipientName.Contains(userFullName)

我尝试了以下方法，但我不知道它是否正确。

```
var docitemIQueryable = from flowCurrent in baswareCatalog.FlowCurrent join 
                        document in baswareCatalog.Docs on 
                        flowCurrent.DocId equals document.DocId 
                        where flowCurrent.RecipientName.Contains(userFullName) 
                        select new
                        {
                          Items = baswareCatalog
                                  .Docs
                                  .Where(b => b.DocId == flowCurrent.DocId)
                        }; 
```

返回值为

```
'interface System.Linq.IQueryable<out T>'.
T is 'a' 
Anonymous Types: 'a is new {IQueryable<Doc> Items }' 
```

如何检索可以迭代的 Doc 集合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:37:55.500

如果不了解您的表结构，您的查询看起来还不错。在“选择”点，您将两个表连接起来并受 where 子句的限制。

在 select new 中，您可以将要包含的原始表中的任何属性分配给新对象。

```
select new
{
    DocId = flowCurrent.DocId,
    LastExpireDate = document.LastExpireDate,
    //etc
} 
```

如果您只想获取文档项目，您可以这样做

```
var docitemIQueryable = from flowCurrent in baswareCatalog.FlowCurrent join 
                    document in baswareCatalog.Docs on 
                    flowCurrent.DocId equals document.DocId 
                    where flowCurrent.RecipientName.Contains(userFullName) 
                    select document; 
```

然后你将有一个可查询的文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:40:12.043

两件事情：

1.  `System.Linq.IQueryable`是一个可以迭代的集合。你可以把它放在一个`foreach`循环中，或者用它做任何你想做的事情。或者，`.ToList()`如果您想立即实现它，您可以使用它。
2.  您正在做不需要在查询中做的额外工作。您正在 and 之间进行连接`FlowCurrent`，`Docs`但随后您正在获取结果并`Docs`再次返回。你不需要这样做。

假设你关心的只是 中的东西`Docs`，试试这个：

```
var docitemIQueryable = from flowCurrent in baswareCatalog.FlowCurrent 
                        join document in baswareCatalog.Docs on 
                            flowCurrent.DocId equals document.DocId 
                        where flowCurrent.RecipientName.Contains(userFullName) 
                        select document; 
```

这将为您提供包含所有字段的行集合`Docs`。如果你还需要一些东西，`FlowCurrent`那么你需要做更多这样的事情：

```
var docitemIQueryable = from flowCurrent in baswareCatalog.FlowCurrent 
                        join document in baswareCatalog.Docs on 
                            flowCurrent.DocId equals document.DocId 
                        where flowCurrent.RecipientName.Contains(userFullName) 
                        select new {
                            document.DocId, flowCurrent.blahblah, ...
                        }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:41:46.587

结果是 items 属性中的一系列对象，因此您需要嵌套循环或 SelectMany

```
foreach(var item in docitemIQueryable.SelectMany( x=> x.Items)){
   //do something
} 
```

但是，您的内部选择似乎只返回一个元素，在这种情况下，您可以跳过匿名类型对象并简单地选择如下

```
select document; 
```

并将循环简化为

```
foreach(var item in docitemIQueryable){
   //do something
} 
```

# c# - WPF树视图，如何更改缩进

> ID：13649183
> 
> 赞同：9
> 
> 时间：2012-11-30T16:29:33.573
> 
> 标签：c#, wpf, treeview, .net-4.5

我的 Treeview 基本上有“文件夹”节点，以及不包含其他项目的项目下一级。

因此不需要展开/折叠图标的空间（在第 2 层）。我可以放弃这个图标空间，从而减少缩进吗？项目（在示例“机场”中）应向左移动一些像素。

![示例树视图](../Images/abba06a60e220743462ed749cfc65662.png)

重要提示：基本上是在寻找代码解决方案 (C#)，而不是 XAML 版本。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T16:33:44.227

您真正想要做的是编辑 HierarchicalDataTemplate 并更改其行为方式。下面的页面有一个很好的编辑[层次数据模板](https://web.archive.org/web/20200107231925/http://blogs.microsoft.co.il/davids/2009/06/04/hierarchicaldatatemplate-and-treeview/)的高级视图。

我还发现[这个](https://web.archive.org/web/20160314052139/http://blogs.msdn.com/b/mikehillberg/archive/2009/10/30/treeview-and-hierarchicaldatatemplate-step-by-step.aspx)开始时非常好。虽然这两个页面都没有具体说明要做什么，但您实际上是在更改项目演示器中的布局属性。

# 编辑

哎呀，我错了。不是 HierarchicalDataTemplate，而是 TreeViewItem 模板。

请参阅下面的示例。如果您知道不会有任何第三级节点，这只是最简单的方法。

请特别注意名为 ItemsHost 的 ItemsPresenter 元素。它的边距为 -12,0,0,0。这意味着它的左边距是负数，因此会在左侧溢出包含它的网格列。因此，所有的子节点都会向左拉一点。如果将来有第三级节点，它们也会被拉到左边。如果您不希望这样，那么您将不得不为不同级别的节点提供不同的模板。但这超出了这个答案的范围。

```
<Style x:Key="TreeViewItemStyle1" TargetType="{x:Type TreeViewItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type TreeViewItem}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition MinWidth="19" Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <ToggleButton x:Name="Expander" ClickMode="Press" IsChecked="{Binding IsExpanded, RelativeSource={RelativeSource TemplatedParent}}" Style="{StaticResource ExpandCollapseToggleStyle}"/>
                    <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Grid.Column="1" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="true">
                        <ContentPresenter x:Name="PART_Header" ContentSource="Header" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                    </Border>
                    <ItemsPresenter x:Name="ItemsHost" Grid.ColumnSpan="2" Grid.Column="1" Grid.Row="1" Margin="-12,0,0,0"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsExpanded" Value="false">
                        <Setter Property="Visibility" TargetName="ItemsHost" Value="Collapsed"/>
                    </Trigger>
                    <Trigger Property="HasItems" Value="false">
                        <Setter Property="Visibility" TargetName="Expander" Value="Hidden"/>
                    </Trigger>
                    <Trigger Property="IsSelected" Value="true">
                        <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
                    </Trigger>
                    <MultiTrigger>
                        <MultiTrigger.Conditions>
                            <Condition Property="IsSelected" Value="true"/>
                            <Condition Property="IsSelectionActive" Value="false"/>
                        </MultiTrigger.Conditions>
                        <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                    </MultiTrigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="VirtualizingStackPanel.IsVirtualizing" Value="true">
            <Setter Property="ItemsPanel">
                <Setter.Value>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel/>
                    </ItemsPanelTemplate>
                </Setter.Value>
            </Setter>
        </Trigger>
    </Style.Triggers>
</Style> 
```

# ruby-on-rails - 如何：使用 Rails 的静态公司网站

> ID：13649184
> 
> 赞同：1
> 
> 时间：2012-11-30T16:29:33.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3, wordpress, content-management-system, static-pages

我脑子里有一个非常愚蠢的问题。

我已经使用 Wordpress 创建网站很长时间了，但我不想再使用它了。现在我正在寻找一点不同的方法。否则，我对 Ruby on Rails 还是很陌生。我读过一些书，我对这件事没有那么自信。所以这里是交易：

我的朋友让我为他的公司创建一个简单的网站。他只想要包含这些页面的超级简单的静态网站：

1.  家
2.  产品
3.  接触

每个页面都将包含简单的信息，无需实现联系表格和其他基本功能。我也想在 Heroku 上部署这个应用程序，因为他没有很多钱，我们正在寻找免费托管。此外，我认为在这件事上最好的方法是某种 CMS，它可以帮助他编辑网站。

最终解决方案概述：

1.  带有简单 CMS 的静态网页
2.  使用 twitter bootstrap 进行基本布局
3.  在 Heroku 上部署

我感谢在这件事上的每一个贡献。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:47:06.840

您所说的一切都表明您应该坚持使用 WordPress。它完全有能力呈现一个非博客静态网站（使用页面而不是帖子），并且有一些优秀的主题可用。多年来，WP 确实成为了一个也适合写博客的 CMS。还有其他工具，例如 Drupal，可能是合适的。

我为一些非常非技术人员建立了一个几乎完全相同的目标的 WP 站点；通过一些培训，他们最终学会了如何管理网站、上传图片、添加内容、授予他人权限以及做很多其他非常酷的事情。自 2007 年以来，我一直在使用 Rails，但对于这种情况，它不是正确的解决方案。

Rails 是一个非常（非常！）复杂的 Web 开发环境，用于构建复杂且可扩展的动态网站。强大的功能带来了比 WordPress 高几个数量级的复杂性。即使你使用`refinerycms`你仍然需要做很多复杂的设置，并且需要知道很多东西。即使您使用 Heroku 并遵循 RailsCast （如用于炼油厂cms 的 RailsCast），毫无疑问，您会遇到一些您真正需要了解更多信息的墙……Rails 以这种方式引人入胜——看起来很简单。

如果你用这个作为学习 Rails 的理由，并且愿意投入一些时间，那么就去吧。但如果你想要一个简单的解决方案，那不是办法。学习 Rails 就像学习驾驶飞机，但更难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:47:02.207

对于带有导轨的静态页面，您可以使用[高压](https://github.com/thoughtbot/high_voltage)gem。[你可以在这篇博](http://robots.thoughtbot.com/post/11744619917/danger-danger-high-voltage-use-rails-3-1-for-static)文中找到这个 gem 的详细用法。创建页面后，您可以像在 heroku 中一样轻松地部署您的应用程序，就像普通的 rails 应用程序一样。

# php - 如何使用 PHPDoc 对 Callable 的参数进行类型提示？

> ID：13649197
> 
> 赞同：30
> 
> 时间：2012-11-30T16:30:10.543
> 
> 标签：php, phpstorm, phpdoc

我有一个接受回调作为参数的方法。我想在 PHPDoc 中为**类方法**提供一个签名，该签名概述了要传递给该方法的**回调函数**的参数，以便我的 IDE (PHPStorm) 可以为传递给我的方法的函数生成有效的类型提示，或者至少查看代码的人可以确定他们打算提供的回调的签名。

例如：

```
class Foo {
  public $items = [];
  /**
  * @param Callable(
  *   @param ArrayObject $items The list of items that bar() will return
  * ) $baz A callback to receive the items
  **/
  public function bar(Callable $baz) {
    $items = new ArrayObject($this->items);
    $baz($items);
  }
} 
```

该方法`bar`有一个参数 ，`$baz`它是一个回调函数。任何作为参数传递给的函数都`bar()`必须接受一个`ArrayObject`作为其唯一参数。

理想情况下，应该可以为 包含多个参数`Callable`，就像任何其他方法一样。

当我编写以下代码时：

```
$foo = new Foo();
$foo->bar(function( 
```

...然后我应该收到一个参数列表，该列表正确提示`ArrayObject`此函数调用的接受参数的类型 ()。

这样的事情可能吗？PHPStorm 或其他 IDE 是否支持它？即使没有 IDE 支持，是否有推荐/标准的记录方式？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-03-16T08:09:14.407

**PHP 7+：**

将可调用接口与匿名类结合使用就可以解决问题。它不是很方便，并且会导致类消费者的代码过于复杂，但目前它是静态代码分析方面的最佳解决方案。

```
/**
 * Interface MyCallableInterface
 */
interface MyCallableInterface{
    /**
     * @param Bar $bar
     *
     * @return Bar
     */
    public function __invoke(Bar $bar): Bar;
}

/**
 * Class Bar
 */
class Bar{
    /**
     * @var mixed
     */
    public $data = null;
}

/**
 * Class Foo
 */
class Foo{
    /**
     * @var Bar
     */
    private $bar = null;

    /**
     * @param MyCallableInterface $fn
     *
     * @return Foo
     */
    public function fooBar(MyCallableInterface $fn): Foo{
        $this->bar = $fn(new Bar);
        return $this;
    }
}

/**
 * Usage
 */
(new Foo)->fooBar(new class implements MyCallableInterface{
    public function __invoke(Bar $bar): Bar{
        $bar->data = [1, 2, 3];
        return $bar;
    }
}); 
```

如果您使用的是 PhpStorm，它甚至会`__invoke`在匿名类中自动生成 -Method 的签名和正文。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-08T15:51:07.543

我通过`static function`在类中使用`callable`. 该函数有自己的文档块，我只是在需要使用 PHPDoc`@see`标记调用的方法中引用它。

```
class Foo
{
    /**
     * Description of the "bar" callable. Used by {@see baz()}.
     *
     * @param int $index A 1-based integer.
     * @param string $name A non-empty string.
     * @return bool
     * @see baz()
     * @throws \Exception This is a prototype; not meant to be called directly.
     */
    public static barCallable($index, $name)
    {
        throw new \Exception("barCallable prototype called");
    }

    /**
     * Description of the baz() method, using a {@see barCallable()}.
     *
     * @param callable $bar A non-null {@see barCallable()}.
     * @see barCallable()
     */
    public function baz(callable $bar)
    {
        // ...
        call_user_func($bar, 1, true);
        // ...
    }
} 
```

这在 PhpStorm 10 中运行良好。*快速文档*允许轻松地从方法文档导航到原型文档。

我让我的原型函数抛出一个异常，以明确它不应该被调用。我可以使用 a `protected`or`private`范围，但是 PHPDoc 不会总是选择 doc-block 来生成文档。

不幸的是，PhpStorm 无法跟踪回调的使用情况。使用需要回调的方法时，它也不提供*参数信息*，但至少正式记录了回调。

这种方法还有一个额外的好处，那就是在运行时根据原型的[反射来验证回调定义。](http://php.net/manual/en/class.reflectionmethod.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T01:42:58.023

目前在 PhpStorm 中是不可能的。我什至想不出通过其他方式做相对相同的其他解决方案。

# ajax - Ajax 函数仅适用于 MVC 3 中的索引页面

> ID：13649202
> 
> 赞同：0
> 
> 时间：2012-11-30T16:30:18.373
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, jquery

我正在开发一个用 ASP.Net MVC 3 构建的项目。

在索引页面中，我显示了数据并允许用户使用 jeditable（也使用 ajax 函数）和删除函数进行内联编辑。

在创建页面中，显然它允许用户输入新数据，但现在我需要添加一个功能，如果数据库中已经存在数据，则允许从创建页面本身删除。

![在此处输入图像描述](../Images/b34c189417055412551786b9aa579a84.png) 如果扩展的文本框模糊上的数据已经存在（在我的情况下，如果扩展不可用），则显示确认框。

我为此功能使用了 ajax 功能，但没有工作，在花了几个小时之后，我能够找出导致问题的原因。

ajax 功能仅在索引页面上工作，而不是在其他页面上。我将创建页面重命名为索引并将原始索引重命名为其他内容，这次它工作得很好，但是 ajax 停止在原始索引页面上工作，该页面被重命名为其他内容。在 url 中，如果我将索引页面加载为“ [http://localhost:1234/Controller/Index](http://localhost:1234/Controller/Index) ”，页面加载正常，但 ajax 函数不起作用。

以一种简单的方式：Ajax 函数适用于

*   本地主机：1234/控制器

Ajax 函数不起作用

*   本地主机：1234/控制器/创建
*   本地主机：1234/控制器/ViewPage1
*   本地主机：1234/控制器/索引

如果有人可以解释为什么它的行为如此，那么有解决方案会很好，如果可以修复，还有什么替代解决方案。

谢谢

Javascript代码

```
$('#Extension').blur(function () {

$.post("CheckPeople/checkDelete",
    {
        Extension: this.value
    },
    function (data) {
        alert(data);
    });
}); 
```

控制器：VB代码

```
 //GET: /People/

        Function Index() As ViewResult
            ViewBag.CurrentPage = "People"
            Return View(db.Peoples.ToList())
        End Function

        //GET: /People/Create

        Function Create() As ViewResult
            Return View()
        End Function

        //POST: /People/Create

        <HttpPost()>
        Function Create(ByVal people As People) As ActionResult
            If ModelState.IsValid Then
                db.Peoples.Add(people)
                db.SaveChanges()
                Return RedirectToAction("Index")
            End If

            Return View(people)
        End Function

        Public Function checkDelete(ByVal Extension As String) As JsonResult                
             Dim result As String = "I got you "
             Return Json(result, JsonRequestBehavior.AllowGet)
        End Function 
```

感谢您的评论，我添加了代码，它直截了当。

如果我将 Create.vbhtml 重命名为 Index.vbhtml 并评论了原始索引路由并重命名帖子并将创建路由到索引，则 ajax 工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:10:54.557

我认为这是一个相对的网址问题。

尝试`/`在 ajax 请求 url 前面添加一个，比如

```
$.post("/CheckPeople/checkDelete",
    {
        Extension: this.value
    },
    function (data) {
        alert(data);
    });
}); 
```

希望这可以帮助。

# javascript - 更改文本框值问题的动态下拉菜单？

> ID：13649203
> 
> 赞同：1
> 
> 时间：2012-11-30T16:30:21.560
> 
> 标签：javascript, jquery, html

好吧，我会尽量问清楚。

我正在创建一个下拉菜单，该菜单将在选择选项时显示：

*   Shipping Total 动态更新用户体验
*   动态更改文本框中的 'value="CHANGETHISINFORMATION"' 值

这是我的代码所在的位置：

```
// Pre populated array of data
var myData = new Array();
        myData[''] = '';
        myData['Light Oak 6" x 6" Set|65.05|0606'] = '$50.00';

var setTotal = new Array();
        setTotal[''] = '';
        setTotal['Light Oak 6" x 6" Set|65.05|0606'] = '15.00';

document.setSelect.selector.onchange = updateText;

function updateText() {
    var obj_sel = document.setSelect.selector;
    var shipTot = document.setSelect.shippingTotal.value;
    var totTot = document.setSelect.setTotal.value;
        shipTot = myData[obj_sel.value];
        totTot = ("item-AI SWDO|" + (myData[obj_sel.value] + setTotal[obj_sel.value]) + "|SoftWoods - Dark Oak|NA|0");
}​ 
```

HTML：

```
<h1>Dark Oak</h1>
<br>
<form action="/qs3/cart.php" method="get" onSubmit="return doOptionCheck(this);" id="setSelect" name="setSelect">
    <select id="selector" name="OPTION|1|AI SWDO">
        <option value="" selected>Choose your set size</option>
        <option value='Light Oak 6" x 6" Set|65.05|0606'>
            6' x 6' Set - $65.05
        </option>
    </select>
    <br><br>
    Shipping Estimate: <input type="text" value="" id="shippingTotal" name="shippingTotal" disabled>
    <br><br>
    QTY: <input type="text" name="item-AI SWDO|CHANGETHISINFORMATION|SoftWoods - Dark Oak|NA|0" id="setTotal" size="3" value="1">
    <input type="submit" name="add_to_cart2" value="Add to Cart!">
</form>​​​​​​​​​​​​ 
```

现在这辆推车至少可以说是过时的。Perl 与其他脚本引擎一起使用。因此，在我们将网站升级到更好的购物车之前，我必须及时付款。

我最初能够*使运输箱的价值发生物理变化，只是在我尝试玩弄“数量：”盒子上的内部价值之后，才让事情停止工作。

编辑：修正了我的最后一句话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:57:51.770

你不能为此使用数据表吗？[http://www.datatables.net/](http://www.datatables.net/)如果我理解正确，您想要一些元素来更新总价/运费？

不确定为什么要更改元素名称字段...

# python - 我将如何进行自动名称生成

> ID：13649206
> 
> 赞同：-2
> 
> 时间：2012-11-30T16:30:25.040
> 
> 标签：python, combinations, combinatorics

对于我的项目，我需要浏览一个文件，并且我发现的每辆车都必须使用 3 个字母和 2 个数字来命名。例如：ABC01。我将如何编写一个函数来自动生成这样的名称，例如它以 AAA01 开始并一直到 AAA99，然后它会转到 AAB01 等等，直到我用完汽车来命名。我的问题只是我如何让一个函数产生这些名称，我可以创建 if 语句来检查是否还有任何汽车要命名。万分感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:42:04.607

[`itertools.product()`](http://docs.python.org/2/library/itertools.html#itertools.product)对此有好处：

```
from itertools import product
import string

pools = [string.ascii_uppercase]*3 + [string.digits]*2
names = (''.join(c) for c in product(*pools) if c[-2:] != ('0', '0'))
# next(names) will give you the next unused name 
```

例如：

```
>>> next(names)
'AAA01'
>>> next(names)
'AAA02'
>>> next(names)
'AAA03' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:42:44.183

使用`itertools.product`...

```
from string import ascii_uppercase
from itertools import product

def my_key_generator():
    letters = product(ascii_uppercase, repeat=3)
    letters_nums = product(letters, range(1, 100))
    for letters, nums in letters_nums:
        yield '{}{:02}'.format(''.join(letters), nums) 
```

然后检查：

```
from itertools import islice
keys = my_key_generator()
print list(islice(keys, 101))
# ['AAA01', 'AAA02', 'AAA03' [...snip...] 'AAA98', 'AAA99', 'AAB01', 'AAB02'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:47:40.077

对于 Python 3.3+

```
import string
from itertools import product

L = string.letters[26:]
I = map(str, range(10))
names = map("".join, itertools.product(L, L, L, I, I)) 
```

用法：

```
>>> for n in names:
>>>     print n 
```

或者

```
>>> from itertools import islice
>>> print(list(islice(names, 0, 10)))
['AAA00', 'AAA01', 'AAA02', 'AAA03', 'AAA04', 'AAA05', 'AAA06', 'AAA07', 'AAA08', 'AAA09'] 
```

对于 Python 2.7+，您应该使用`itertools.imap`而不是`map`.

# python - 在 OpenERP 报表中添加多个对象

> ID：13649207
> 
> 赞同：3
> 
> 时间：2012-11-30T16:30:35.510
> 
> 标签：python, report, openerp, erp, rml

如何将多个对象传递给报告引擎？

我正在尝试创建一个自定义发票报告，我需要在其中附加来自其他应用程序的数据以显示在发票上。我可以使用 Web 服务将数据输入 OpenERP 服务器，但如何将其传递给报告引擎？也许

```
set_context or (self.localcontext.update()) 
```

方法在这里很有用，因为它允许我将自定义变量传递给报告，但是如何传递整个对象。

我从其他应用程序导入的内容本质上是一个巨大的表，其中可能包含与当前合作伙伴相关的 100 条记录，我不需要将其保存在 OpenERP 数据库中，只需在生成发票时显示即可。

编辑：

测试我在解析器中的对象

```
class test_invoice(report_sxw.rml_parse):
def __init__(self, cr, uid, name, context):
    super(test_invoice, self).__init__(cr, uid, name, context=context)
    self.localcontext.update({
        'time': time,
        'test_var': 'Worked!',
        'get_list': self._get_list,
    })

def _get_list(self):
    result = []
    ress = {'first': '1',
        'second': '2',
        }
    result.append(ress)
    return result 
```

并在 rml 文件中

```
...start of rml file
     <section>
        <para>
            [[ repeatIn(get_list(), 'g')]]
            [[ g.first ]]
        </para>
    </section>

  </story>
</document> 
```

但这会引发错误“强制转换为 Unicode：需要字符串或缓冲区，找到元组”。我们如何在 rml 中显示自定义列表？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:44:11.150

你可以传递整个对象，只要 OpenERP（好吧，你运行 OpenERP 的 python）知道那个对象。否则，您必须以某种方式“代理”该对象。使用 SQLAlchemy 从外部数据库获取数据可能是少数解决方案。你可以处理这样的事情：

```
[...somewhere into your parser...]
self.localcontext.update({'external_rows': session.query(MyObject).filter_by(foo='baz')}) 
```

或者如果您正在管理 CSV 数据：

```
self.localcontext.updarte({'external_rows': self._get_myrows_from_csv()}) 
```

例如，其中`_get_myrows_from_csv`返回一个字典列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-23T05:15:15.813

除了在 RML 文件中使用结果（字典）之外，您所做的一切都是正确的。尝试

```
[[ g['first'] ]] 
```

代替

```
[[ g.first ]] 
```

问题是您试图将字典值作为对象属性访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-01T12:31:01.070

在 RML 文件中：

```
<story>
    <section>
        <para>[[ repeatIn(products(), 'p') ]]</para>
        <blockTable colWidths="100.0,100.0" >
            <tr>
                <td>
                    <para>[[p.name]]</para>
                </td>

                <td>
                    <para>[[p.list_price]]</para>
                </td>
            </tr>
        </blockTable >
    </section>
</story> 
```

在报告解析器中：

```
class myreport(report_sxw.rml_parse):
    def __init__(self, cr, uid, name, context):
        super(myreport, self).__init__(cr, uid, name, context=context)

        self.cr = cr
        self.uid = uid
        self.context = context

        self.localcontext.update({
            'products': self._get_products
            })

    def _get_products(self, ids=[85, 81, 89]):
        return [p for p in self.pool.get('product.product').browse(self.cr, self.uid, ids, self.context)] 
```

我希望它会有用。

# java - 我想阅读序列化程序（新的 Persister）

> ID：13649213
> 
> 赞同：1
> 
> 时间：2012-11-30T16:31:09.707
> 
> 标签：java, android, xml

我想解析一个 XML，并且我有一个带有一些属性的类。但它没有 XML 的所有标签，我是否需要所有 XML 标签的所有属性？它适用于其他更简单的 XML。我可以只读取一些标签吗？@Root 是如何工作的？和@Element？谢谢

```
String ipString = null;
root  ip_externa = null;
InputStream is = ucon.getInputStream(); 
Serializer serializer = new Persister();
ip_externa = serializer.read(root.class, is );
ip_String = ip_externa.web; 
```

另一类：

```
import org.simpleframework.xml.Element;
import org.simpleframework.xml.Root;
@Root
public class root {
  @Element
  public String origen;
  @Element
  public String productor;
} 
```

我的第一个例外是，因为在另一个程序中它是一个标签。org.simpleframework.xml.core.ElementException：元素 'utc' 在第 1 行的类 com.example.weather.root 中没有匹配项

如果我添加旧标签... org.simpleframework.xml.core.ValueRequiredException: Unable to meet @org.simpleframework.xml.Element(data=false, name=, required=true, type=void) on field '第 1 行的 com.example.weather.root 类的版权“公共 java.lang.String com.example.weather.root.copyright”

# vba - 从 0:00 减去时的 Dateadd 错误

> ID：13649220
> 
> 赞同：0
> 
> 时间：2012-11-30T16:31:29.623
> 
> 标签：vba, datetime, excel, dateadd

我正在尝试将带有 GMT 小时的列转换为用户指定的时区。

当 VBA 尝试从 01:00 减去 18000 秒 (GMT-5) 时出现错误。

```
Selected_GMT = -18000
CellValue = "1/0/00 01:00"

New_Time = DateAdd("s", Selected_GMT,CellValue) 
```

发生此错误是因为 VBA 无法确定 00:00 之前的小时数吗？我已经计算出 Selected_GMT 的秒数，如何使用它来确定 New_Time？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:44:58.007

正如 ooo 在上面的评论中指出的那样，1/0/00 是无效的日期代码。但是，即使这是您的问题中的拼写错误，日期使用 2 位数年份代码这一事实也引出了“哪一年 00？”这个问题。如果您已经知道这一点，我们深表歉意，但下面我从我在其他地方写的东西中摘录了 Excel 日期如何工作的概述。相关部分是“Excel中的第零天和之前”；如果“00”实际上表示单元格中的* *19* * 00（如果您刚刚将“01:00”作为单元格条目打孔），那么您将遇到从中减去的问题。在这种情况下，也许显式输入日期和时间（也许使用当前日期），但使用格式隐藏日期组件）：

> Excel 使用“日期序列”系统，其中您在计算中使用的任何日期都表示为正整数值。该整数值是从任意开始日期计算的。将整数添加到特定的序列日期会使您在日历中一次向前移动一天，而减去整数会使您向后移动……只要您不超过序列号系统的开始日期并最终结束带有负值。时间表示为一天的分数；早上 6 点 0.25，中午 0.5，下午 6 点 0.75，依此类推。
> 
> **Excel 日期**
> 
> 在 Excel for Windows 的情况下，开始日期是 1900 年 1 月 1 日。也就是说，如果您在 Excel 的单元格中输入值 1 并将其格式化为日期，您将看到该值是 1900 年 1 月 1 日。2 将是 1900 年 1 月 2 日，3 是 1 月 3 日，以此类推。367 表示 1901 年 1 月 1 日，因为 Excel 将 1900 年视为具有 366 天的闰年。换句话说，每过去一整天，序列日期就会增加 1。
> 
> 请务必记住，上述内容仅与 Excel 相关，与 Access、SQL Server 或其他数据库产品（或 Visual Basic，就此而言）无关。例如，在 Access 中，有效日期的范围是 100 年 1 月 1 日到 9999 年 12 月 31 日，这与可以存储在具有 Date 数据类型的 VB 或 VBA 变量中的范围相同。
> 
> **Excel 和 Macintosh**
> 
> Macintosh 系统使用 1904 年 1 月 1 日的开始日期，巧妙地绕过了 1900 年闰年问题。但是，这确实意味着在 Excel for Windows 中创建的工作簿中的序列日期值与在 Excel for Mac 中创建的工作簿中的序列日期值之间存在 4 年的差异。幸运的是，在工具 -> 选项-> 计算（在 2007 年之前的 Excel 版本上）下，您会找到一个名为 1904 日期系统的工作簿选项。如果选中此项，Excel 就知道工作簿来自 Macintosh，并将相应地调整其日期计算。
> 
> **卓越时报**
> 
> 如引言中所述，时间计算为一天的一小部分。例如，1.5 代表 1900 年 1 月 2 日中午。1.75 代表 1900 年 1 月 2 日下午 6 点。

（剪掉一点关于 1900 年闰年的错误）

> 从 1900 年 3 月 1 日起，Excel 的日期是正确的，但是如果您使用格式 dddd、mmmm dd、yyyy 格式化数字 1，您将得到 1900 年 1 月 1 日星期日的结果。1900 年 1 月 1 日是星期一，而不是星期日。这个星期错误一直持续到 3 月 1 日，这是 Excel 日历中第一个真正正确的日期。
> 
> **Excel 中的第 0 天及之前**
> 
> 如果您使用值零并以日期格式显示它，您将得到 1900 年 1 月 0 日星期六的无意义日期。如果您尝试将负值格式化为日期，您将得到一个充满井号的单元格。同样，如果您尝试使用 Excel 函数（如 DateValue）获取日期序列号，则只能对 1900 年 1 月 1 日或之后的日期执行此操作。尝试指定更早的日期将导致错误。
> 
> 1904 (Macintosh) 系统从零开始。（1904 年 1 月 1 日的值为 0，而不是 1。Excel 的在线帮助将 Mac 系统描述为从 1 月 2 日开始，但这可能比向用户解释为什么序列日期值 0 在 Mac 上有效但在 Excel 上无效.) 负数不会产生错误，但该数将被视为绝对数。也就是说，1 和 -1 都将被视为 1904 年 1 月 2 日。

# java - 二进制和文本结构（数据包）的高效解码

> ID：13649233
> 
> 赞同：7
> 
> 时间：2012-11-30T16:32:25.847
> 
> 标签：java, decode, network-protocols

**背景**

有一个著名的工具叫做[Wireshark](http://www.wireshark.org/)。我已经使用它很多年了。这很棒，但性能是问题。常见的使用场景包括几个数据准备步骤，以便提取数据子集以供稍后分析。如果没有这一步，过滤需要几分钟的时间（有很大的痕迹，Wireshark 几乎无法使用）。

![在此处输入图像描述](../Images/e9176c800029c571ec8b3d56f13242b6.png)

实际的想法是创建一个更好的解决方案，快速、并行和高效，用作数据聚合器/存储。

**要求**

实际要求是使用现代硬件提供的所有电源。我应该说有不同类型的优化空间，我希望我在上层做得很好，但技术是现在的主要问题。根据当前的设计，有几种数据包解码器（解析器）：

*   *交互式解码器*：解码逻辑可以在运行时轻松更改。这种方法对协议开发人员非常有用——解码速度不是那么关键，但灵活性和快速结果更重要
*   *嵌入式解码器*：可以用作库。这种类型应该具有良好的性能并且足够灵活以使用所有可用的 CPU 和内核
*   *解码器即服务*：可以通过干净的 API 访问。这种类型应该提供最好的品种性能和效率

**结果**

我目前的解决方案是基于 JVM 的解码器。实际的想法是重用代码，消除移植等，但仍然有很好的效率。

*   *交互式解码器*：在 Groovy 上实现
*   *可嵌入解码器*：在 Java 上实现
*   *解码器即服务*：Tomcat + 优化 + 嵌入到 servlet 中的解码器（二进制输入，XML 输出）

**需要解决的问题**

*   Groovy 提供了强大的功能和一切，但在这种特殊情况下很幸运
*   将协议解码为树形结构是一条死胡同——太多的资源被浪费了
*   内存消耗有点难以控制。我做了一些优化，但仍然对分析结果不满意
*   各种花里胡哨的 Tomcat 仍然会引入很多开销（主要是连接处理）

我在任何地方都使用 JVM 做得对吗？您是否看到任何其他好的和优雅的方式来实现最初的目标：获得易于编写、高度可扩展和高效的协议解码器？

结果的协议、格式等不固定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T13:52:33.810

我发现了几个可能的改进：

**交互式解码器**

[通过使用AST Transformations](http://groovy.codehaus.org/Compile-time+Metaprogramming+-+AST+Transformations)扩展 Groovy 语法，可以极大地提高 Groovy 的表达能力 。因此，可以简化解码器创作，但仍能提供良好的性能。AST（代表抽象语法树）是一种编译时技术。

> 当 Groovy 编译器编译 Groovy 脚本和类时，在过程中的某个时刻，源代码最终会以具体语法树的形式在内存中表示，然后转换为抽象语法树。AST 转换的目的是让开发人员能够在编译过程中修改 AST，然后再将其转换为将由 JVM 运行的字节码。

我不想重新发明轮子，引入另一种语言来定义/描述协议结构（拥有[ASN.1](http://en.wikipedia.org/wiki/Abstract_Syntax_Notation_One)就足够了）。这个想法是为了简化解码器的开发，以提供一些快速的原型技术。基本上，要引入某种 DSL。

[进一步阅读](http://www.google.com.ua/search?q=groovy%20DSL&ie=UTF-8)

**嵌入式解码器**

Java 会引入一些额外的开销。有几个库可以解决这个问题：

*   [高压PC](http://labs.carrotsearch.com/hppc.html)
*   [特罗夫](http://trove.starlight-systems.com/)
*   [Javolution](http://javolution.org/)
*   [公地原语](http://commons.apache.org/primitives/)

![在此处输入图像描述](../Images/9ea80ac8a5e9d0fd58c90793144ac7f6.png)

坦率地说，我没有看到除 Java 之外的任何其他选项。

**解码器即服务**

这一层不需要Java。最后我有一个不错的选择，但价格相当高。[Gwan](http://gwan.ch/)看起来真的很好。

![在此处输入图像描述](../Images/779f0339a9726aaa28937b3678102fcd.png)

将需要一些额外的移植，但这绝对是值得的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T02:39:07.620

这个问题似乎与许多高性能 I/O 实现问题有相同的特点，那就是内存副本的数量决定了性能。异步 I/O 的分散-聚集接口模式遵循这一原则。使用 scatter-gather，内存块就地操作。只要协议解码器将块流而不是字节流作为输入，您就可以消除大量移动内存以保留字节流抽象的性能开销。字节流对于节省工程时间来说是一个非常好的抽象，但对于高性能 I/O 来说不是那么好。

在一个相关的问题中，我会提防 JVM 只是因为 basic type `String`。我不能说我熟悉`String`JVM 中的实现方式，但我确实认为没有办法在不进行内存复制的情况下从块列表中生成字符串。另一方面，一种可以与 JVM`String`兼容互操作的原生字符串可能是一种区分差异的方式。

* * *

这个问题的另一个似乎相关的方面是形式语言。本着不复制内存块的精神，您也不希望一遍又一遍地扫描同一块内存。由于您想要进行运行时更改，这意味着您可能不想使用预编译状态机，而是使用递归下降解析器，它可以在每个下降级别分派给适当的协议解释器。当外层没有指定内层的类型时，会涉及一些复杂性。当您甚至不知道内部内容的长度时，这些并发症会更糟，因为那时您依靠内部内容的良好格式来防止失控。然而，值得关注的是了解单个块将被扫描多少次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-24T12:24:44.483

网络流量正在增长（[一些分析](http://techcrunch.com/2013/07/03/mobile-data-use-to-grow-300-globally-by-2017-led-by-video-web-traffic-says-strategy-analytics/)），因此需要每秒处理越来越多的数据。

实现这一点的唯一方法是使用更多的 CPU 功率，但 CPU 频率是稳定的。只有核心数量在增长。看起来唯一的方法是更有效地使用可用内核并更好地扩展。

![在此处输入图像描述](../Images/84578a8efc5c205cbdac193353880053.png)

# javascript - 我可以使用 javascript 检测在 HTML 中播放的任何类型的视频，然后使用函数暂停所有媒体吗？

> ID：13649237
> 
> 赞同：1
> 
> 时间：2012-11-30T16:32:40.810
> 
> 标签：javascript, dom, video, iframe

我正在帮助构建的应用程序使用来自 youtube 和 5min.com 等网站的 iframe 中嵌入的视频。有没有办法可以在 HTML 的头部编写一个 javascript 函数来检测任何类型的视频，然后在调用该函数时使用 pause() 来停止播放视频？现在我拥有的功能是这样的：

```
function stopPlaying() {
  document.getElementByTagName("iframe").pause(); 
} 
```

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:06:48.513

如果您使用的是 iFrame，则不可能。但是，如果视频在您的页面中，那么您可以做到。检查是否可以访问视频，在页面中运行以下代码，如果返回0，则无法访问视频：

```
alert("number of <video> in this page: " + document.getElementsByTagName('video').length); 
```

# php - Mysql/PHP - 账户图表 - 父账户中的汇总

> ID：13649239
> 
> 赞同：2
> 
> 时间：2012-11-30T16:32:47.843
> 
> 标签：php, mysql, relationship, hierarchical-data

我在尝试解决这个问题时遇到了一些麻烦。我有一个账户图表，我想总结一下钱栏。我的表“类别”有一个自动关系：

```
category_table
- id
- parent_id
- category 
```

** 我不知道账户图表有多深。它可以有 1,2,3,4,5...多个级别。

这是一个例子：

**我想要的是：**

```
Category Name           |$
-------------------------------
Category 1              |160.00
    Category 1.1        |130.00
        some expense    | 50.00
        some expense    | 80.00
    Category 1.2        | 30.00
        some expense    | 10.00
        some expense    | 20.00
-------------------------------
Category 2              |160.00
    Category 2.1        |150.00
        some expense    |100.00
        some expense    |150.00
    Category 2.1        | 70.00
        some expense    | 50.00
        some expense    | 20.00
------------------------------- 
```

**我有的：**

```
Category Name           |$
-------------------------------
Category 1              |  0.00
    Category 1.1        |  0.00
        some expense    | 50.00
        some expense    | 80.00
    Category 1.2        |  0.00
        some expense    | 10.00
        some expense    | 20.00
-------------------------------
Category 2              |  0.00
    Category 2.1        |  0.00
        some expense    |100.00
        some expense    |150.00
    Category 2.1        |  0.00
        some expense    | 50.00
        some expense    | 20.00
------------------------------- 
```

我已经在php中尝试过这个递归函数，但它不起作用=/

```
function display_children($parent) {
    $sql = "SELECT c.id, c.category,
                   (SELECT COUNT(*) FROM category c1 WHERE c1.parent_id = c.id) As Total,
                   (SELECT SUM(p.value) FROM payables p WHERE p.category_id = c.id) As TotalToPay
            FROM category c
            WHERE c.parent_id = {$parent}
            ORDER BY c.category";
    $result = mysql_query($sql);
    $ret = "<ul>";
    $totalcategory = 0;
    while ($row = mysql_fetch_assoc($result)) {
        if ($row['Total'] > 0) {
            $totalcategory = $totalcategory + (empty($row['TotalToPay']) ? 0 : $row['TotalToPay']);
            $ret .= "<li><a href='#" . $row['id'] . "'>" . $row['category'] . " - " . $totalcategory . "</a>";
            $ret .= display_children($row['id']);
            $ret .= "</li>";
        } elseif ($row['Total']==0) {
            $totalcategory = ($totalcategory + empty($row['TotalToPay']) ? 0 : $row['TotalToPay']);
            $ret .= "<li><a href='" . $row['id'] . "'>" . $row['category'] . " - " . $totalcategory . "</a></li>";
        } else;
    }
    $ret .= "</ul>";
    return $ret;
}
echo display_children(0); 
```

它向我展示了：

```
Category 1 - 0
    Category 1.1 - 0
    Category 1.2 - 0
        expense 1 - 25.90
        expense 2 - 0
        expense 3 - 3.80
Category 2 - 0
    Category 2.1 - 0
    Category 2.2 - 0
    Category 2.3 - 0
Category 3 - 0
    Category 3.1 - 52.00 
```

...任何想法？...谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:43:21.907

如果你有一个像 3 这样的最大深度，你可以用一个这样的查询来做到这一点：

```
SELECT c1.dollar + c2.dollar2 + c3.dollar AS dollar_sum
FROM category_table c1
LEFT JOIN category_table c2 ON c1.id = c2.parent_id
LEFT JOIN category_table c3 ON c2.id = c3.parent_id 
```

如果您不知道层次结构的最大深度，您确实可以像这样在 php 中使用 recusive 函数

```
function getSum($parent = null) {

    if ($parent === null) {

        $rows = // SELECT id, dollar FROM category_table WHERE parent_id IS NULL;

    } else {

        $rows = // SELECT id, dollar FROM category_table WHERE parent_id = $parent;
    }

    foreach ($rows as &$row) {

        $children = getSum($row->id);
        foreach ($children as $child) {

            $row->dollar += $child->dollar;
        }
    }

    return $rows;
} 
```

# ruby-on-rails - Rails routes.draw 如何在幕后工作？

> ID：13649240
> 
> 赞同：4
> 
> 时间：2012-11-30T16:32:51.407
> 
> 标签：ruby-on-rails, ruby, routing

我正在研究以下代码：

```
Helloworld::Application.routes.draw do
  match 'products/:id/purchase' => 'catalog#purchase'

  resources :products do
    member do
      get 'short'
      post 'toggle'
    end

    collection do
      get 'sold'
    end
  end
end 
```

有人可以解释一下，如何将 URL 映射到幕后的控制器？

我理解的方式：

1.  来自 Rack 的请求对象进来；
2.  `draw`评估其代码块；
3.  `match`, `resources`and etc 定义在与 相同的范围内`draw`，因此这些函数一个接一个地执行，试图匹配 Request. 如果其中之一发生，它会调用正确的控制器操作。

这个对吗？

谢谢！

# ruby - 在 rbenv 中从以前版本的 Ruby 复制 gem

> ID：13649241
> 
> 赞同：20
> 
> 时间：2012-11-30T16:32:56.947
> 
> 标签：ruby, rbenv

我用 rbenv 安装了 Ruby 1.9.3-p286。现在，在安装了更新的版本（p327）之后，很明显，它对以前版本安装的 GEM 一无所知。

是否可以将 Gems 从那个版本复制到较新的版本，这样就不需要再次下载它们了？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-30T16:44:35.653

您可以复制`gems/`和`bin/`文件夹，但这会导致问题。中的文件`bin/`具有硬编码路径。

我建议重新安装它们，就像这样简单：

```
$ rbenv local 1.9.3-p286
$ gem list | cut -d" " -f1 > my-gems
$ rbenv local 1.9.3-p327
$ gem install $(cat my-gems) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T00:34:16.537

我一直在专门从升级和重新安装而不下载的角度来看待这个问题。这不是微不足道的，我建议您对 gem 进行一些清理，以最大限度地减少需要完成的处理/安装量（例如，我安装了五个版本的 ZenTest；在执行此操作之前我做了“gem cleanup ZenTest”）。不过要小心“gem cleanup”，因为它会删除除 LAST 版本之外的所有版本：如果您需要支持旧版本的 Rails，请手动清理不需要的版本。

我将此脚本称为“migrate-gems.sh”：

```
#! /bin/bash

if [ ${#} -ne 2 ]; then
  echo >&2 Usage: $(basename ${0}) old-version new-version
  exit 1
fi

home_path=$(cd ~; pwd -P)
old_version=${1}
new_version=${2}

rbenv shell ${old_version}

declare -a old_gem_paths old_gems
old_gem_paths=($(gem env gempath | sed -e 's/:/ /'))

rbenv shell ${new_version}

for ogp in "${old_gem_paths[@]}"; do
  case "${ogp}" in
    ${home_path}/.gem/ruby*|*/.gem/ruby*)
      # Skip ~/.gem/ruby.
      continue
      ;;
  esac

  for old_gem in $(ls -1 ${ogp}/cache/*.gem); do
    gem install --local --ignore-dependencies ${ogp}/cache/${old_gem}
  done
done 
```

完成这项工作的三个部分：

1.  `gem env gempath`包含安装 gem 的路径（`:`-separated）。因为 gem 在 ~/.gem/ruby 中共享，所以我跳过了这个。
2.  `gem install`接受`--local`，这会强制没有网络连接。
3.  `gem install`接受`--ignore-dependencies`，它禁用依赖检查。

今天我有一个相当大的宝石列表要移动，我不想从 ruby​​gems.org 下载（另外，我需要旧版本），所以我很快就完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T16:12:16.753

为了后代，我写了[rbenv-copy-gems.sh](https://gist.github.com/purp/0f96a9689ad0cf92fc24ee5bd90f0b47)来帮助我做到这一点。它不符合这个问题的标准（它是从 Internet 安装的，而不是本地安装的），但是当我通过 rbenv install 升级或安装新版本的 Ruby 时，它对我很有用。

当前版本粘贴在下面以供参考，但我会在改进时保持最新的要点。

```
#!/bin/bash
# copy is a misnomer; it's actually LIST + INSTALL
# --from 2.2.1 [--to other-version-else-whatever-is-currently-set]
#
# TODO: install only most-recent version that's installed in FROM
# TODO: use gem names only from FROM, install latest available version (might be more recent than in FROM)
# TODO: pass arguments to gem command (e.g. --no-document)

CURRENT_VERSION=`rbenv version | cut -d' ' -f1`
GEM_LIST_ARGS="--local"

while [[ $# -gt 0 ]]; do
  option="$1"

  case $option in
    --from)
    FROM="$2"
    shift
    ;;
    --to)
    TO="$2"
    shift
    ;;
  esac
  shift # past argument or value
done

if [ -z "${FROM}" ]; then
  FROM="${CURRENT_VERSION}"
fi

if [ -z "${TO}" ]; then
  TO="${CURRENT_VERSION}"
fi

echo ">>> Install gems from v${FROM} to v${TO}"

# Get gems and versions, reformat to GEMNAME:version[,version[...]]
gems=(`RBENV_VERSION=${FROM} gem list ${GEM_LIST_ARGS} | sed -e 's/[\(\)]//g' -e 's/, /,/g' -e 's/ /:/'`)

for geminfo in "${gems[@]}"; do
  gem=`echo $geminfo | cut -d: -f1`
  versions=(`echo $geminfo | sed -e 's/^.*://' -e 's/,/ /g'`)
  for version in "${versions[@]}"; do
    installed=`RBENV_VERSION=${TO} gem query -i $gem -v $version`
    if [ "${installed}" == "false" ]; then
      echo ">>> Installing ${gem} ${version}:"
      RBENV_VERSION=${TO} gem install $gem -v $version
    else
      echo ">>> ${gem} ${version} already installed"
    fi
    echo ""
  done
done 
```

# multithreading - C++.net 委托不起作用 - 编译器错误

> ID：13649245
> 
> 赞同：1
> 
> 时间：2012-11-30T16:33:13.917
> 
> 标签：multithreading, visual-c++, delegates, invoke

对，我从同一个类的静态函数创建了一个新线程。

在同一个类中，我尝试调用一个委托来更新 GUI。我得到一个编译器错误说：

**无效的委托初始化程序 - 除了函数之外还需要一个对象。** 在 &MainUi::AddListItem 方法。

```
delegate void AddListItem(void);
    public: void AddListItemMethod(String^ myString)
    {
        ListView1->Items->Add(myString);
    }

private: static void SecondThread()
{  
AddListItem^ del = gcnew AddListItem(&MainUI::AddListItemMethod);
del->Invoke("test");
} 
```

我不知道为什么它不起作用。我也试过这个，但仍然失败。请问有什么帮助吗？

```
Invoke(gcnew AddListItem(MainUI::&AddListItemMethod), "test"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:53:10.727

您必须使`Listview1`静态工作，或者您应该创建类的实例/对象`MainUI`来访问该类的非静态方法。

谢谢你，快乐编码。

# django - 在将项目 URLconf 考虑在内的模板中生成 URL

> ID：13649249
> 
> 赞同：2
> 
> 时间：2012-11-30T16:33:26.300
> 
> 标签：django, django-templates

我正在[学习 Django 1.4 教程](https://docs.djangoproject.com/en/1.4/intro/tutorial04/)，我注意到在视图层中，URL 是手工组装的：

```
<form action="/polls/{{ poll.id }}/vote/" method="post"> 
```

等等。

但是，在控制器端，URL 是动态生成的：

```
return HttpResponseRedirect(reverse('polls.views.results', args=(p.id,))) 
```

对此似乎有些不一致。由于 URL 的前缀（`/polls`在这种情况下）是在项目的 URLconf 而不是应用程序的 URLconf 中确定的，因此在模板中硬编码这个值似乎是不明智的。

是否有帮助程序或其他方式在 Django 模板中生成 URL，以便将 URLconf 考虑在内？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:51:55.137

是的，您可以使用内置[`url`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#url)-tag 来避免硬编码路径。

例如：

```
{% url 'myapp:view-name' %} 
```

# delphi - 如何引用在运行时确定名称的控件？

> ID：13649250
> 
> 赞同：12
> 
> 时间：2012-11-30T16:33:26.727
> 
> 标签：delphi

作为一种自学练习，我制作了一个表格，其中包含 2x3 矩形中的六个面板，我希望它们一个接一个地在可见和不可见之间切换。我试图通过使用某种 for 循环来做到这一点。我当然可以写类似的东西：

```
Panel1.Visible := true;
Panel1.Visible := false;
Panel2.Visible := true;
Panel2.Visible := false;
Panel3.Visible := true;
etc. etc. 
```

但这需要大量的输入，并且当我决定希望它在每一步之间等待 100 毫秒时效率非常低。例如，我必须编辑所有六个步骤以等待。这六个步骤是可行的，但也许下次我想做一百次！因此，我认为还必须有一种方法可以为此使用 for 循环，其中变量从 1 到 6 不等，并在对象标识符中使用。所以它会是这样的：

```
for variable := 1 to 6 do begin
Panel + variable.Visible := true;
Panel + variable.Visible := false;
end; 
```

现在，这显然行不通，但我希望这里有人可以告诉我这是否真的可行，如果可以，如何。也许我可以使用字符串作为标识符？我的解释可能很糟糕，因为我不知道所有的技术术语，但我希望代码能解释一些东西。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-30T16:39:48.590

您可以循环访问面板的所有者`Components`数组。

```
var
  i: Integer;
  TmpPanel: TPanel;
begin
  { This example loops through all of the components on the form, and toggles the
    Visible property of each panel to the value that is opposite of what it has (IOW,
    if it's True it's switched to False, if it's False it's switched to True). }
  for i := 0 to ComponentCount - 1 do                  
    if Components[i] is TPanel then                    
    begin
      TmpPanel := TPanel(Components[i]);
      TmpPanel.Visible := not TmpPanel.Visible;     // Toggles between true and false
    end;
end; 
```

`FindComponent`如果您想要一个非常特定类型的组件名称，您也可以使用该方法。例如，如果您有 6 个面板，它们的名称是`Panel1`、`Panel2`等：

```
var
  i: Integer;
  TmpPanel: TPanel;
begin
  for i := 1 to 6 do
  begin
    TmpPanel := FindComponent('Panel' + IntToStr(i)) as TPanel;
    if TmpPanel <> nil then      // We found it
      TmpPanel.Visible := not TmpPanel.Visible;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-30T16:54:56.443

在这种情况下，您希望在运行时而不是在设计时动态创建控件。试图应对 6 个不同的变量将是一个痛苦的世界。当您需要网格为 3x4 而不是 2x3 时，您会更加后悔这个决定。

所以，从一个完全空白的表格开始。并在代码中添加一个二维面板数组：

```
private
  FPanels: array of array of TPanel; 
```

然后，在表单的构造函数或`OnCreate`事件处理程序中，您可以通过调用如下函数来初始化数组：

```
procedure TMyForm.InitialisePanels(RowCount, ColCount: Integer);
var
  Row, Col: Integer;
  aLeft, aTop, aWidth, aHeight: Integer;
  Panel: TPanel;
begin
  SetLength(FPanels, RowCount, ColCount);
  aTop := 0;
  for Row := 0 to RowCount-1 do begin
    aLeft := 0;
    aHeight := (ClientHeight-aTop) div (RowCount-Row);
    for Col := 0 to ColCount-1 do begin
      Panel := TPanel.Create(Self);
      FPanels[Row, Col] := Panel;
      Panel.Parent := Self;
      aWidth := (ClientWidth-aLeft) div (ColCount-Col);
      Panel.SetBounds(aLeft, aTop, aWidth, aHeight);
      inc(aLeft, aWidth);
    end;
    inc(aTop, aHeight);
  end;
end; 
```

现在您可以使用笛卡尔坐标而不是平面一维数组来引用您的面板。当然，如果需要，您也可以轻松地声明一个平面一维数组。

关键思想是，当您在结构化布局中创建大量控件时，最好放弃设计器并使用代码（循环和数组）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-30T16:43:50.163

使用`FindComponent`方法`TComponent`：

```
 for variable := 1 to 6 do begin
    pnl := FindComponent('Panel' + IntToStr(variable));
    if pnl is TPanel then
    begin
      TPanel(pnl).Visible := true;
      TPanel(pnl).Visible := false;
    end;
  end; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-17T22:08:21.807

正如其他人所回答的那样， FindComponent 是要走的路。

但是如果你只是想修改组件的通用属性，例如可见、位置等，则不需要与类型进行比较。

这将同样有效：

```
 for i := 1 to 16 do
  begin
    (FindComponent( 'P' + inttostr(i) ) as TControl).Visible := false;
  end; 
```

（注意：这是针对 Delphi 6/ 7，现代版本可能以其他方式执行此操作）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-07T09:23:22.760

**其实我的回答**

如果您使用命名约定来命名您的组件，例如

```
 "Mycomponent" + inttostr(global_int) 
```

你可以用它很容易地找到它：

```
function getMyComponent(id:integer) : TComponent;
begin
result := {Owner.}FindConponent('MyComponent'+inttostr(id));
end; 
```

`(sender as TComponent).name`您还可以通过使用知道哪些其他组件与他相关来使您生成的组件相互交互。

* * *

**示例**

以下是您可以使用它执行的操作的示例：

想象一个页面控件，其中选项卡是您想要多次使用的界面（例如，用 1 tab = 1 col 描述文件中的列，并且您想要动态添加选项卡）。

对于我们的示例，我们正在命名按钮并以这种方式编辑：

```
Button : "C_(column_number)_btn"
Edit   : "C_(column_number)_edi" 
```

实际上，您可以使用 buttonclick 直接引用编辑，在运行时通过调用 findcomponent 链接：

```
procedure TForm1.ColBtnClick(Sender:TObject);
var nr : string; Edit : TEdit; 
begin
// Name of the TButton.  C(col)_btn
nr := (Sender as TButton).Name;

// Name of the TEdit  C_(column)_edi
nr := copy(nr,1,length(nr)-3)+'edi';

// Get the edit component.
edit := (Form1.Findcomponent(nr) as TEdit);

//play with it
Edit.Enabled := Not Edit.Enabled ;
showmessage(Edit.Text);
Edit.hint := 'this hint have been set by clicking on the button';

//...

end; 
```

当然，您将此过程链接到每个生成的按钮。

如果有人想练习它，您可能想知道如何生成选项卡和组件，在这里：

```
procedure Form1.addCol(idcol:integer, owner : TComponent); // Form1 is a great owner imo
var
pan : TPanel;    // Will be align client with the new tabsheet
c: TComponent;   //used to create components on the pannel
tab : TTabSheet; 
begin
try
  pan  := TPanel.create(owner);
  pan.name := format('Panel_%d',[idcol]);
  pan.caption := '';

  // dynamically create that button
  c := TButton.create(Owner);
  with c as TButton do
  begin
    Name := format('C%d_btn',[idcol]);
    Parent := pan;
    //Top  := foo;
    //Left := bar;
    caption := 'press me';
    OnClick := Form1.ColBtnClick;      // <<<<<<< link procedure to event
  end;

  //create a Tedit the same way

  c := TEdit.create(Owner);
  with c as TEdit do
    Name := format('C%d_edi',[idcol]);
    Parent := pan;
    // other properties

  //  create the tabsheet and put the panel in
finally
  tab := TTabSheet.Create(Parent);
  tab.caption := 'Column %d';
  tab.PageControl := Pagecontrol1;

  pan.Parent := tab;
  pan.Align := alClient;
end;  
end; 
```

生成名称来获取组件实际上是拥有干净代码的一种非常好的方法。

滚动父子组件以找到您想要的组件实际上效率低下，并且如果有很多组件（在我的示例中，如果有 3、10 或未知数量的 TEdit 循环子（兄弟）组件将很难看） .

也许这个例子是无用的，但它可能会帮助某人，总有一天。

# jquery - 根据其他字段验证字段的格式

> ID：13649251
> 
> 赞同：0
> 
> 时间：2012-11-30T16:33:35.490
> 
> 标签：jquery, validation

如果上面的选项字段是下面的州 DE jsfiddle 代码，想检查驾驶执照是否正好是 6 个数字

## [http://jsfiddle.net/THKez/1/](http://jsfiddle.net/THKez/1/)

```
<form name="clientdetails_form" id="clientdetails_form" method="POST" action="xxxx.php">  

<p>
<label for="state">State</label>
<select type="text" name="state" >
<option value="NY">NY</option>
<option value="DE">DE</option></select>
</p>

<p>
<label for="LicenseN"><em>*</em>License #</label>
<input id="ClientLicensenNum"  name="ClientLicensenNum" type="text" value="" >
</p>    

    <input type="submit" value="submit"  >    

</form> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:48:24.280

在下拉更改时，如果状态为 DE 且长度为 6，则执行某些操作。[小提琴](http://jsfiddle.net/djUAY/)

```
$(document).ready(function() {
    $('select').change(function() {
        var state = $(this).val();
        var license = $('#ClientLicensenNum').val();
        if (state == "DE" && license.length == 6) {
            console.log('Do something');
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:33:56.330

创建一个自定义方法来处理 6 个字符的 DE 许可证：

```
jQuery.validator.addMethod("DELicense", function(value, element) {
    if (this.optional(element)) {
        return true;
    }

    if ($('select[name="state"] option:selected').val() == 'DE') {
        return $(element).val().match(/^\d{6}$/);
    } else {
        return true;
    }
}, "DE Licenses must be 6 numbers"); 
```

当您调用 validate 时，指定当您的选择设置为 DE 时必须使用此自定义类型：

```
$("#clientdetails_form").validate({
    rules: {
        ClientLicensenNum: {
            DELicense: true,
            required: true
        }
    }
});​ 
```

在此处查看实际操作：http: [//jsfiddle.net/ryleyb/THKez/3/](http://jsfiddle.net/ryleyb/THKez/3/)

**编辑**使它更复杂一点 - 结果自定义规则不能使用[所需](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-expression)`dependency-expressions`的方式。

# java - Java：线程被限制在 CPU 的 25%

> ID：13649256
> 
> 赞同：1
> 
> 时间：2012-11-30T16:33:50.910
> 
> 标签：java, multithreading

当我使用线程或主线程时，我注意到它们被限制为每个线程的 CPU 的 25%。

有没有办法告诉线程使用更多 CPU ？因为我觉得这样有点限制。

多谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T16:35:12.617

你可能有一台四核机器。一个线程不能在多个内核上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:50:52.537

```
public class Mainn {

    public static void main(String[] args) {
        int noOfProcessors = Runtime.getRuntime().availableProcessors();
        System.out.println(noOfProcessors);
        for (int i = 0; i< noOfProcessors ; i++){
            new Thread(new Runnable() {

                @Override
                public void run() {
                    for(;;){
                    }
                }
            }).start();
        }
    }
} 
```

这将使用大量的 CPU 测试它。

*线程或进程只会使用所需的计算能力。除非您创建需要更多计算的代码，否则您不能告诉它需要更多的计算能力*

**JAVA 中的一个线程一次可以在单核上运行。所以我所做的就是为每个核心创建一个线程。**

# java - RFC 2388 多部分 POST 的服务器实现与 RFC 2047 冲突？

> ID：13649258
> 
> 赞同：8
> 
> 时间：2012-11-30T16:34:06.427
> 
> 标签：java, http, webserver, mime, non-ascii-characters

我正在尝试在 HTTP 服务器上实现 RFC 2388 以支持多部分 POST。

我正在专门查看内容处置的“名称”参数的规范。

根据 RFC 2388 的第 3 节，它指出：

> 最初在非 ASCII 字符集中的字段名称可以使用 RFC 2047 中描述的标准方法在“名称”参数的值内编码。

我“听说”目前没有 UA 在表单控件名称上支持 RFC2047。他们只会以原始编码发送文本。（即，如果表单控件的名称是使用 UTF-8 的日语，它将发送带有 UTF-8 日语文本的多部分 POST 请求）

然而，为了“忠实”，这总有一天会得到解决。我更喜欢坚持 RFC。

不过，问题来自 RFC 2047 本身。根据第 5(3) 条规定：

> *   “编码字”不得出现在“地址规范”的任何部分。
> *   “编码字”不得出现在“引用字符串”中。
> *   'encoded-word' 不得在 Received 头字段中使用。
> *   'encoded-word' 不得用于 MIME Con​​tent-Type 或 Content-Disposition 字段的参数中，或任何结构化字段正文中，“comment”或“phrase”除外。

冲突在第 4 个要点。鉴于“名称”参数是“内容处置”字段的一部分。我发现自己迷失了规范希望我们实现者做什么。

无论什么在“现实”中有效/无效。我想问是否有人也认为这是一个冲突。

我发现自己也在问为什么 RFC 2388 仍然将 RFC 2047 称为“名称”参数，但仅在几段之后将 RFC 2231 称为“文件名”参数的编码规范。鉴于 RFC 2047 不能用于“参数值”，这就是显然创建 RFC 2231 的原因。RFC 2388 是否也没有更新，以便“名称”参数使用 RFC 2231。

底线是，我应该，还是不应该为了实现 RFC 2388 的功能而完全执行 RFC 2047？我是否也应该为“文件名”参数烦恼 RFC 2231？有人知道任何 UA 当前是否使用 RFC 2231 来上传非 ascii 文件名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T06:03:24.530

我真的不认为这是冲突。请注意，RFC 2047

> **描述...允许在RFC 822 消息头**的各个部分中对非 ASCII 文本进行编码的技术，其方式不太可能混淆现有的消息处理软件。

RFC 2388 并没有尝试导入 RFC 2047 的所有假设/上下文，只是编码方法。因为这里编码的“部分”实际上是顶级“multipart/form-data”部分的子级，所以我认为尝试将有关邮件标头的 RFC 2047 规则应用于这些部分是没有意义的。

# javascript - 使 HTML 在 iframe 中可见

> ID：13649261
> 
> 赞同：4
> 
> 时间：2012-11-30T16:34:16.137
> 
> 标签：javascript, html

我正在制作自己的所见即所得。我有两个按钮：“可视化”和“显示源”。

我有一个包含大量 HTML 代码的 iframe（富文本编辑器）。第一次加载时，它会直观地显示所有元素。按下 Show Source 后，将显示 innerHTML 文本（可视化 html 的）。但是，当按下“可视化”按钮时，如何使 HTML 文本再次可视化？

`content.document.body.innerText`保存需要可视化的 HTML。（内容 = iframe 的 id）

```
$('#Visualize').click(function()
{
   // Make HTML visible
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T16:38:43.227

使用您已经拥有的 html 代码并在 div 中显示预览，对吗？只需使用[html](http://api.jquery.com/html/)功能。

```
$('#Visualize').click(function(){
   $('#myShowDiv').html(content.document.body.innerText);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:02:58.300

如果您使用的是 iframe，并且该 iframe 仅用于保存正在编辑的实际页面源，那么您将需要父框架上的变量来保存实际源。我建议将其分开，然后使用以下命令执行切换：

```
var actualSource = content.document.body.innerHTML;
// just something to initialize it
// You should probably keep it in a global object instead of as a var

$('#Visualize').click(function()
{
   actualSource = content.document.body.innerText;
   content.document.body.innerHTML = "";
   content.document.body.innerHTML= actualSource;
}); 
```

我想你有捕获源的方法，但我想你想捕获当时的实际源。我不确定你在用实际的编辑块做什么（它是一个可编辑的 div 吗？它是一个文本区域吗？），但为了执行显示，它应该只是切换 innerHTML 的问题和 innerText 之间的两个设置。真正的收获将是监控受此更改影响的实际控制。

# android - 从android中的活动将值传递给webview

> ID：13649266
> 
> 赞同：0
> 
> 时间：2012-11-30T16:34:34.023
> 
> 标签：android, android-layout, android-intent

我有一项活动可以根据用户输入产生一些结果。

我的 xml 页面就像一个文本视图、按钮和 web 视图。

当用户输入某个日期并单击按钮时，然后生成一个值。同样在加载页面时，Web 视图会从资产文件夹加载本地 html 页面，并显示一些默认值。

我需要的是当新值通过按钮单击产生尊重时，我还需要更改 html 页面值。

如何将值传递给 Web 视图。pblm 是我不想在加载时将值传递给我需要在某个中间阶段传递值，因为默认它已经显示一个值。

怎么做。如果有人可以提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:56:19.560

我对你的问题有点怀疑。抱歉，您实际上想要实现什么？根据您的值，您是否想在 webview 中加载单独的 html 文件，或者您想更改默认情况下已经加载到 webview 中的网页中的任何值。可能是这个链接对你有用[http://android-er.blogspot.in/2011/10/call-javascript-inside-webview-from.html](http://android-er.blogspot.in/2011/10/call-javascript-inside-webview-from.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:51:32.113

您可以根据用户的事件使用整数和布尔值进行验证，并从断言加载本地 html 文件，例如

```
webview.loadUrl("file:///android_asset/aboutcertified.html"); 
```

# asp.net - ASP Net Gridview 报错 两个具有相同id的组件无法添加到应用程序中

> ID：13649268
> 
> 赞同：0
> 
> 时间：2012-11-30T16:34:39.063
> 
> 标签：asp.net

我有一个通过联合多个表构建的网格视图。每个表都有一个称为 Pkey 的主键。我的问题是gridview在显示数据时遇到相同的Pkey编号时出错。

```
Here is the query
SELECT Pkey, Status, EffectiveDate, 'Budget Element' as RequestType, DescribeRequest
FROM tblBudgetElement
union
SELECT Pkey, Status, EffectiveDate, 'Expense Element' as RequestType, DescribeRequest
FROM tblExpenseElement
union
SELECT Pkey, Status, EffectiveDate, 'Expense Hl' as RequestType, DescribeRequest
FROM tblExpenseHLevel 
```

我尝试过使用简单的绑定字段。并尝试在后面的代码中创建一个超链接字段。

这是网格视图

```
 <asp:BoundField DataField="Pkey" HeaderText="Pkey">
                    <HeaderStyle HorizontalAlign="Left" />
                    <ItemStyle HorizontalAlign="Left" />
                </asp:BoundField>

                <asp:BoundField DataField="RequestType" HeaderText="Request Type">
                    <HeaderStyle HorizontalAlign="Left" />
                    <ItemStyle HorizontalAlign="Left" />
                </asp:BoundField>

                <asp:BoundField DataField="Status" HeaderText="Status">
                    <HeaderStyle HorizontalAlign="Left" />
                    <ItemStyle HorizontalAlign="Left" />
                </asp:BoundField>

                <asp:BoundField DataField="EffectiveDate" HeaderText="Effective Date"  DataFormatString = "{0:d}" >
                    <HeaderStyle HorizontalAlign="center" />
                    <ItemStyle HorizontalAlign="center" />
                </asp:BoundField>

                <asp:BoundField DataField="DescribeRequest" HeaderText="Describe Request">
                    <HeaderStyle HorizontalAlign="Left" />
                    <ItemStyle HorizontalAlign="Left" />
                </asp:BoundField>

                <asp:TemplateField>
                    <HeaderStyle VerticalAlign="Top" BorderWidth="0"/>
                    <ItemStyle BorderWidth="0"/>
                    <ItemTemplate>
                <asp:Image runat="server" BorderStyle="None" ID="Image1" ImageUrl="~/Images/MagnifyingClass.gif" />

                        <cc1:PopupControlExtender ID="PopupControlExtender1" runat="server" 
                           PopupControlID="Panel1" 
                           TargetControlID="Image1" 
                           DynamicContextKey='<%# Eval("Pkey") %>' 
                           DynamicControlID="Panel1" 
                           DynamicServiceMethod="GetRequest" Position="right"> 
                        </cc1:PopupControlExtender> 
                        <asp:Panel ID="Panel1" runat="server"></asp:Panel>                
                    </ItemTemplate>
                    <ItemStyle HorizontalAlign="Center" />
                </asp:TemplateField>

            </Columns>
            <PagerStyle BackColor="#999999" ForeColor="Black" HorizontalAlign="Center" />
            <SelectedRowStyle BackColor="#000099" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="Silver" Font-Bold="True" ForeColor="Black" />
            <AlternatingRowStyle BackColor="#CCCCCC" />
        </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:27:38.297

我认为问题不在于 GridView 定义，而在于您的 SQL 查询。在不了解数据库结构的情况下，看起来每个表都有自己的 PKey 值，因此您当然会遇到重复值。我敢打赌（尽管您没有显示 GridView 代码的那部分）您已将“PKey”定义为 GridView 的 DataKeyValue。

再次在不知道数据库结构的情况下，我猜测查询可能会以不同的方式编写（或稍微修改数据库）以检索您需要的行，每个行都有一个唯一的键。

# python - 在 Python 中保存一个 txt 文件，一些改进我的代码的技巧

> ID：13649273
> 
> 赞同：0
> 
> 时间：2012-11-30T16:34:48.353
> 
> 标签：python, performance, coding-style

首先，很抱歉这个简单的问题。我知道这些问题非常基础。我需要在 Python 2.7 中保存一个包含多行的 txt 文件。我需要提出一些建议来改进我的基本代码。

这是一个基本的例子

```
file_out = open("..//example//test.text", "w")

for p in range(10):
    ID = str(p)
    A = p*10
    B = p+10
    C = p-10
    D = p+p
    E = p*2
    file_out.write("s% %s %s %s s% s%" % (ID,A,B,C,D,E)+ "\n")
file_out.close() 
```

我的问题是：

*   我有这个错误信息，但我没有找到解决方法

    ```
    Traceback (most recent call last):
    File "<interactive input>", line 1, in <module>
      ValueError: incomplete format 
    ```

*   我要保存的元素（例如：ID、A、B、C、D、E）有几个（30 个元素），我使用了一长串 s%。是否有一种优雅的方式和紧凑的代码来编写这一行？

*   我还想保存一个头（例如：ID、A、B、C、D、E）。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:36:45.810

> ValueError：格式不完整

您将一半的`%s`格式写为`s%`. 百分号先出现。

> 我要保存的元素（例如：ID、A、B、C、D、E）有几个（30 个元素），我使用了一长串 s%。是否有一种优雅的方式和紧凑的代码来编写这一行？

```
' '.join(str(x) for x in [p, p*10, p+10, p-10, p+p, p*2]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:37:13.990

`%`首先，*然后*是说明符。

```
%s 
```

还：

```
print >>file_out, ' '.join(...) 
```

另外，[`csv`](http://docs.python.org/2/library/csv.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T16:38:34.533

你有错字

```
file_out.write("%s %s %s %s %s %s" % (ID,A,B,C,D,E)+ "\n") 
```

或者

```
 file_out.write("%s %s %s %s %s %s\n" % (ID,A,B,C,D,E)) 
```

或者

```
file_out.write(" ".join(["%s" %i for i in [A, B, C, D, E]])) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T16:43:07.537

您有一些语法错误。检查您的格式字符串。

```
file_out = open("..//example//test.text", "w")

for p in range(10):
    ID = str(p)
    A = p*10
    B = p+10
    C = p-10
    D = p+p
    E = p*2
    file_out.write("%s %s %s %s %s %s" % (ID,A,B,C,D,E) + "\n")
file_out.close() 
```

# c# - 回发到不同的网址

> ID：13649277
> 
> 赞同：0
> 
> 时间：2012-11-30T16:35:09.630
> 
> 标签：c#, asp.net, url-rewriting, postback

我有以下 URL：“http:/server/Search/term/5”，其中 term 是搜索的术语，5 是页面

在那个页面上，我有过滤结果的过滤器。

我的问题是我只有不到 5 页的结果，我最终在空白页上。我想将网址“重定向”或“编辑”到“http:/server/Search/term”

我使用 AutoPostBack 为 true 的 CheckBoxList。

我还尝试使用 Button 并将 PostBackUrl 设置为我的 url，但我丢失了所有选中的过滤器。

我正在使用 IRouteHandler。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:46:39.923

我终于将页面参数放在查询字符串中。

然后，带有 PostBackUrl 的 Button 就像一个魅力。

谢谢基思！

# android - Android ToggleButton - 在启用时执行某些操作而不锁定 UI 线程

> ID：13649283
> 
> 赞同：0
> 
> 时间：2012-11-30T16:35:40.240
> 
> 标签：android, android-asynctask, togglebutton

我想要做的是运行一个方法，该方法将在 ToggleButton 处于打开状态时从我的资产中播放随机声音。然后在 ToggleButton 关闭时停止这样做。问题是，按照目前的构造，我的代码锁定了 UI 线程。我以为我正确使用了 AsyncTask，但显然不是。

您能否建议解决此问题或更好的方法来完成我想要的？

```
 public void onToggleClicked(View view) {
    // Is the toggle on?
    boolean on = ((ToggleButton) view).isChecked();

    while (on) {

        AssetManager assetMgr = this.getAssets();
        try {
            String[] filename = assetMgr.list("sounds");
            Random r = new Random();
            String fn = filename[r.nextInt(filename.length)];
            if (MyService.mp.isPlaying()) {

            }
            else {

                new PlayShuffleMode().execute(fn);

        }

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

这是 AsyncTask 方法：

```
private class PlayShuffleMode extends AsyncTask<String, Void, Void> {

    @Override
    protected Void doInBackground(String... fn) {

        mService.playfav(fn[0]);
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:45:11.417

问题是你的`while`循环。`while`循环将在主线程上连续循环，直到您切换按钮，但由于循环`while`在主线程上，您的 UI 将被锁定。所以你必须想办法把`while`循环移到你的 AsyncTask 中。

一个建议：与其将 AsyncTask 放在 while 循环中，为什​​么不做相反的事情并在 AsycTask 中使用 while 循环呢？就像是...

```
private playShuffle;

public void onToggleClicked(View view) {
  ToggleButton tb = ((ToggleButton) view);
  tb.setChecked(!tb.isChecked()); // Toggle the state.

  if(tb.isChecked()) {
    playShuffle = new PlayShuffleMode();
    playShuffle.execute();
  }
  else {
    playShuffle.cancel();
  }
} 
```

# sql - 存储过程返回一个字符串？

> ID：13649284
> 
> 赞同：9
> 
> 时间：2012-11-30T16:35:40.600
> 
> 标签：sql, sql-server-2008, stored-procedures, return, varchar

> **可能重复：**
> [将 nvarchar 值“Internet Explorer 3 original”转换为数据类型 int 时转换失败](https://stackoverflow.com/questions/13571263/conversion-failed-when-converting-the-nvarchar-value-internet-explorer-3-origin)

所以我创建了以下简单的存储过程：

```
CREATE PROCEDURE test
AS
BEGIN
    RETURN 'works!'
END
GO 
```

然后我想通过触发以下语句来执行它：

```
EXEC test 
```

为什么我总是收到以下错误？

**转换 varchar 值“有效！”时转换失败 为数据类型 int。**

哦，顺便说一句，（何时）有必要在存储过程的末尾使用 GO 语句吗？我想它在这里不起作用，因为当我返回我的@out 字符串时它会跳出过程。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-30T16:38:57.717

使用[RETURN](http://msdn.microsoft.com/en-us/library/ms174998%28v=sql.100%29.aspx)只允许您返回 INTEGER 代码

您要么需要选择值

```
 CREATE PROCEDURE test
   AS
   BEGIN
       SELECT 'works!'
   END 
```

或者，如果您想分配给调用者中的变量，请使用 OUTPUT 参数

```
CREATE PROCEDURE test
    @outputVal VARCHAR(20) OUTPUT
AS
BEGIN
    SET @outputVal = 'works!'
END

DECLARE @val VARCHAR(20)
EXECUTE test @val OUTPUT 
```

# c++ - 如何在 Mac OS/Linux 上构建和安装 google-url 作为共享库

> ID：13649285
> 
> 赞同：2
> 
> 时间：2012-11-30T16:35:40.900
> 
> 标签：c++, google-chrome, build, shared-libraries

我想在我的项目中使用[google-url](http://code.google.com/p/google-url/)作为 Linux\Mac OS 上的共享库，但无法找出正确的构建方法......

**问题：**您建议从官方来源从头开始构建它的方式是什么？
要求 - 能够与官方 repo 保持同步并使用标准（make）工具。

* * *

据我所见，目前构建它的方法很少：

*   在**官方 repo**本身中仅包含 Visual Studio 2005 构建文件

*   它在**Chromium**中使用，因此[有 .gyp 可用](http://src.chromium.org/svn/trunk/src/build/temp_gyp/googleurl.gyp)，但看起来它与 Chromium 构建结构紧密集成，因此没有简单的方法为独立库构建生成 Makefile。
    虽然它在“ *TODO(mark): Upstream this file to googleurl.* ”里面有一条评论。
    所以在列表中这被认为是可能的。

*   Googleurl 也以[.gyp形式与](http://page-speed.googlecode.com/svn/lib/trunk/src/build/temp_gyp/googleurl.gyp)**PageSpeed 项目**集成（认为与上述不同），因此它以某种方式构建在那里

*   python的第三方**绑定**可用并且还包含一些[构建指令](http://code.google.com/p/python-google-url/wiki/HowToBuildGoogleUrlWithLinux)，但是这次使用 SCons 和 AFAIK，它是一种过时的系统。

看起来我不是唯一一个遇到这个问题的人，所以我发现其他人都只是使用自动工具实现了自己的构建文件：

*   [https://github.com/artemg/Googleurl-separate-library](https://github.com/artemg/Googleurl-separate-library)
*   [https://github.com/commoncrawl/commoncrawl-crawler/blob/master/src/native/src/libGoogleURL/googleurl/README.google](https://github.com/commoncrawl/commoncrawl-crawler/blob/master/src/native/src/libGoogleURL/googleurl/README.google)

它可以工作，但文件系统布局与官方 repo 中的不同/它们有本地修改，因此没有简单的方法来下游更改并保持同步。

最诱人的方法是使用 GYP 为官方 repo 生成平台特定的构建文件一次：make/xcode/visual studio，然后根据需要保存并稍后使用它们..但我不知道如何处理这个和从哪里开始。

# asp.net - Ntegrity Siteminder 和 ASP.NET 执行管道/页面生命周期

> ID：13649291
> 
> 赞同：1
> 
> 时间：2012-11-30T16:36:04.390
> 
> 标签：asp.net, page-lifecycle, siteminder

我在集成 SiteMinder 和 ASP.NET 时遇到问题。

传入请求的观察行为是：

1.  Global.asax:Application_AuthenticateRequest 运行
2.  SiteMinder WebAgent 运行

我的客户站点管理员支持团队的理解是，预期的行为绝对应该是：

1.  SiteMinder WebAgent 运行
2.  Global.asax:Application_AuthenticateRequest 运行

siteminder webagent 处理程序肯定被配置为 web.config 中的第一个句柄。

所以......我的问题是：

1.  任何人都可以确认/否认预期的行为（最好带有文档链接）
2.  任何人都可以指出有关如何跟踪 Web 处理程序执行的资源（理想情况下，我想 100% 确定哪些/如何/何时各个 http 模块参与了请求）

在处理 SiteMinder 方面的任何一般性建议也将不胜感激:)

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:50:37.853

对于第一个问题，请确保 SiteMinder ISAPI 过滤器是 IIS 中第一个处理请求的。
[http://support.ca.com/cadocs/0/CA%20SiteMinder%20r12%20SP3-ENU/Bookshelf_Files/HTML/idocs/index.htm?toc.htm?834391.html](http://support.ca.com/cadocs/0/CA%20SiteMinder%20r12%20SP3-ENU/Bookshelf_Files/HTML/idocs/index.htm?toc.htm?834391.html)

您还需要确保 web.config 条目的顺序也正确。 [https://serverfault.com/questions/213379/iis-7-5-siteminder-is-not-protecting-asp-net-mvc-requests/245221#245221](https://serverfault.com/questions/213379/iis-7-5-siteminder-is-not-protecting-asp-net-mvc-requests/245221#245221)

# asp.net - .NET 2 和 4 之间的 URI 差异

> ID：13649297
> 
> 赞同：1
> 
> 时间：2012-11-30T16:36:37.543
> 
> 标签：asp.net, .net-4.0, .net-2.0, uri

我正在生成`URI`如下（此代码已简化和伪造）：

```
Uri baseUri = "http://localhost/MyApp/Account/Login";
Uri fullUri = GetFullUri(baseUri, user); 
```

GetFullUri 看起来像这样（这是在 .NET 2 程序集中）：

```
public Uri GetFullUri(Uri baseUri, User user)
{
    string token = GetTokenFromUser(user); //Implementation not important.

    //Create a new URI based on the base URI, adding a query string.
    return new Uri(baseUri, string.Format("?Token={0}", token));
} 
```

`GetFullUri`从 .NET 4 程序集调用，结果是正确的，`fullUri`如下所示：

```
http://localhost/MyApp/Account/Login?Token=ABC123 
```

然后我从 .NET 2 程序集中调用了相同的确切代码，结果不正确，`fullUri`如下所示：

```
http://localhost/MyApp/Account/?Token=ABC123 
```

请注意 .NET 2 结果是如何缺少第 4 段也是最后一段“登录”？这有什么关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:51:13.297

看起来像是 .NET 4.0 中修复的错误。尝试使用[`UriBuilder`](http://msdn.microsoft.com/en-us/library/system.uribuilder.aspx)，它适用于以下两种情况：

```
public Uri GetFullUri(Uri baseUri, User user)
{
   string token = GetTokenFromUser(user); //Implementation not important.

   var builder = new UriBuilder(baseUri);
   builder.Query = string.Format("Token={0}", token);
   return builder.Uri;
} 
```

# javascript - 覆盖内置于 3rd 方控件的 javascript (infragistics UltraWebGrid)

> ID：13649298
> 
> 赞同：1
> 
> 时间：2012-11-30T16:36:37.840
> 
> 标签：javascript, overriding, infragistics

我使用的`UltraWebGrid`是 Infragistics 的旧版本，需要替换一些内置的 javascript。编译后的 js 看起来像是在一个对象类型中添加了一堆函数作为各种 api。格式如下：

```
var igtbl_ptsBand = ["functionname1",function(){...},"functionname2",function(){...},... 
```

等等。我将如何覆盖它？

基本上，该控件以与较新的浏览器不兼容的方式将 html 添加到页面，并且执行此操作的 javascript 代码只需要稍作调整。我找到了代码...我只需要更改它。

代码可以在[这里找到](https://stackoverflow.com/questions/13648655/how-to-force-a-tbody-element-into-an-empty-table-for-non-ie-browsers)

我添加了一个答案来转储代码示例等等。我不会选择这个答案

[类似的问题](https://stackoverflow.com/questions/4081687/overriding-third-party-js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:38:40.403

我不建议这样做。您应该始终尝试*与*第三方库合作，而不是*反对*它。话虽如此，这应该有效：

```
igtbl_ptsBand[igtbl_ptsBand.indexOf("functionYouWantToOverwrite") + 1] = function () {
    // your new stuff...
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:54:59.020

你提到的数组似乎是一个函数表：

```
var igtbl_ptsBand = ["func1", function() { }, "func2", function() { } ] 
```

我建议使用链接而不是仅仅覆盖。通过链接，您可以注入自己的代码，但仍然调用原始函数。假设您要替换“func2”和链。你可以这样做：

```
var origFunc, findex, ix;
if (igtbl_ptsBand.indexOf) {
    // indexOf is supported, use it
    findex = igtbl_ptsBand.indexOf("func2") + 1;
} else {
    // Crippled browser such as IE, no indexOf, use loop
    findex = -1;
    for (ix = 0;  ix < igtbl_ptsBand.length;  ix += 2) {
        if (igtbl_ptsBand[ix] === "func2") {
            findex = ix + 1;
            break;
        }
    }
}
if (findex >= 0) {
    // Found it, chain
    origFunc = igtbl_ptsBand[findex];
    igtbl_ptsBand[findex] = function() {
         // Your new pre-code here
         // Call original func (chain)
         origFunc();
         // Your new post-code here
    };
} 
```

当然，origFunc 可能有参数，您可能希望使用 JavaScript call() 函数将“this 指针”设置为特定的东西，例如：

```
origFunc.call(customThis, arg1, arg2...); 
```

如果参数在数组中，则可以使用 apply() 而不是 call()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:43:51.587

好的，这就是我正在做的事情。我会用我的进展来更新这个。

这解决了我的问题。事实证明，我必须将函数数组应用于父“行”的所有子对象。为此，我在“修复行”函数中添加了代码。我将其拆分是因为我正在跨其他浏览器 JS 错误运行，我正在此 js 文件中修复该错误。

这是我添加到我的 .net 页面的 js 文件，如下所示...

```
 </form>
    <script type="text/javascript" src="../../scripts/BrowserCompat.js"></script>
</body>
</html> 
```

.

```
Brows_FixUltraWebGrid();

function Brows_FixUltraWebGrid() {
    FixRows();
}

function FixRows() {

    FixGridRows_render();
    for (var i = 0; i < igtbl_ptsRows.length; i += 2)
        igtbl_Rows.prototype[igtbl_ptsRows[i]] = igtbl_ptsRows[i + 1];

}

function FixGridRows_render() {

    var origFunc, findex, ix;
    if (igtbl_ptsRows.indexOf) {
        // indexOf is supported, use it
        findex = igtbl_ptsRows.indexOf("render") + 1;
    } else {
        // Crippled browser such as IE, no indexOf, use loop
        findex = -1;
        for (ix = 0; ix < igtbl_ptsRows.length; ix += 2) {
            if (igtbl_ptsRows[ix] === "render") {
                findex = ix + 1;
                break;
            }
        }
    }
    if (findex >= 0) {
        // Found it, chain
        origFunc = igtbl_ptsRows[findex];
        igtbl_ptsRows[findex] = function() {
            // Your new pre-code here
            // Call original func (chain)
            //origFunc();
            // Your new post-code here
            var strTransform = this.applyXslToNode(this.Node);
            if (strTransform) {
                var anId = (this.AddNewRow ? this.AddNewRow.Id : null);

                //new logic to include tbody if it is not there
                var tadd1 = '';
                var tadd2 = '';
                if (!(/\<tbody\>/.test(strTransform))) {
                    tadd1 = '<tbody>';
                    tadd2 = '</tbody>';
                }
                this.Grid._innerObj.innerHTML =
                    "<table style=\"table-layout:fixed;\">" + tadd1 + strTransform + tadd2 + "</table>";

                //old line
                //this.Grid._innerObj.innerHTML = "<table style=\"table-layout:fixed;\">" + strTransform + "</table>";

                var tbl = this.Element.parentNode;
                igtbl_replaceChild(tbl, this.Grid._innerObj.firstChild.firstChild, this.Element);
                igtbl_fixDOEXml();
                var _b = this.Band;
                var headerDiv = igtbl_getElementById(this.Grid.Id + "_hdiv");
                var footerDiv = igtbl_getElementById(this.Grid.Id + "_fdiv");
                if (this.AddNewRow) {
                    if (_b.Index > 0 || _b.AddNewRowView == 1 && !headerDiv || _b.AddNewRowView == 2 && !footerDiv) {
                        var anr = this.AddNewRow.Element;
                        anr.parentNode.removeChild(anr);
                        if (_b.AddNewRowView == 1 && tbl.tBodies[0].rows.length > 0)
                            tbl.tBodies[0].insertBefore(anr, tbl.tBodies[0].rows[0]);
                        else
                            tbl.tBodies[0].appendChild(anr);
                    }
                    this.AddNewRow.Element = igtbl_getElementById(anId);
                    this.AddNewRow.Element.Object = this.AddNewRow;
                }
                this.Element = tbl.tBodies[0];
                this.Element.Object = this;
                this._setupFilterRow();
                for (var i = 0; i < this.Band.Columns.length; i++) {
                    var column = this.Band.Columns[i];
                    if (column.Selected && column.hasCells()) {
                        var col = this.getColumn(i);
                        if (col)
                            igtbl_selColRI(this.Grid.Id, col, this.Band.Index, i);
                    }
                }
                if (this.ParentRow) {
                    this.ParentRow.ChildRowsCount = this.length;
                    this.ParentRow.VisChildRowsCount = this.length;
                }
            }
            console.log('overridden row render function executed');
        };
    }
} 
```

# bash - 在 bash 中重用字符串

> ID：13649299
> 
> 赞同：2
> 
> 时间：2012-11-30T16:36:39.023
> 
> 标签：bash, printf

我有一个全局变量

```
RT="\e[m"
TITLE="${FG}%s${RT}" 
```

并且有两个功能

```
function one
{
   local FG="\e[33m"
   printf "$TITLE" "One"
}

function two
{
   local FG="\e[32m"
   printf "$TITLE" "Two"
} 
```

但颜色不改变，如何重用`$TITLE`变量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:49:34.577

简短的回答：你不能，bash 没有指针的等价物。该变量`$TITLE`是通过赋值字符的 rhs 的扩展来赋值的，因此在扩展时未定义`$TITLE`值`%s\e[m`since ，因此扩展为空字符串。`$FG`作为一种解决方法，您可以改为：

```
rt=$'\e[m'
title="%s%s$rt"

one() {
    local fg=$'\e[33m'
    printf "$title" "$fg" "One"
}

two() {
    local fg=$'\e[32m'
    printf "$title" "$fg" "Two"
} 
```

使用`eval`并不是一个好的选择，`eval`邪恶也是如此！

我还从您的脚本中修改了一些内容：

*   Used lower case variable names (as using upper case variable names is considered bad practice in bash),
*   Use `$'...'` to have the correct colors (instead of the strings `"\e[m"`, ...),
*   Used the proper way to define functions in bash (without the keyword `function`).

**Edit.** From your comment, I see you're really troubled with having to type `"$fg"` each time. So here's another possibility: instead of defining a variable `$title`, define a function `title` that echos the formating string and use it like so:

```
rt=$'\e[m'

title() {
   echo "$fg%s$rt"
}

one() {
    local fg=$'\e[33m'
    printf "$(title)" "One"
}

two() {
    local fg=$'\e[32m'
    printf "$(title)" "Two"
} 
```

Each time you call the function title, it echoes the formating string you need, hence `$(title)` will expand to that formating string. Each time you call the function `title`, the string `"$fg%s$rt"` is expanded, with whatever values the variables `$fg` and `$rt` have at this expansion time.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:42:17.227

TITLE 被扩展为包括`${FG}`您键入它的位置，而不是您使用它的时间。一种解决方案是：

```
TITLE='${FG}%s${RT}' 
```

然后

```
eval printf "$TITLE" "One" 
```

# sql-server - ASP VBSCRIPT MS SQL SERVER 连接

> ID：13649306
> 
> 赞同：0
> 
> 时间：2012-11-30T16:37:05.317
> 
> 标签：sql-server, asp-classic

如何修复数据库连接？我正在将网站从一台服务器移动到另一台服务器。

这是我在 Connections 文件中得到的：

```
<%
' FileName="Connection_odbc_conn_dsn.htm"
' Type="ADO" 
' DesigntimeType="ADO"
' HTTP="true"
' Catalog=""
' Schema=""
Dim MM_**_STRING
MM_**_STRING = "Driver={SQL Server};Server=localhost;Database=mssql0_***_1;Uid=mssql0_***_1;Pwd=********;"
%> 
```

这是asp文件：

```
<%@LANGUAGE="VBSCRIPT" CODEPAGE="1252"%>
<!--#include virtual="/Connections/**.asp" -->
<%
' *** Validate request to log in to this site.
MM_LoginAction = Request.ServerVariables("URL")
If Request.QueryString <> "" Then MM_LoginAction = MM_LoginAction + "?" + Server.HTMLEncode(Request.QueryString)
MM_valUsername = CStr(Request.Form("userName"))
If MM_valUsername <> "" Then
    Dim MM_fldUserAuthorization
    Dim MM_redirectLoginSuccess
    Dim MM_redirectLoginFailed
    Dim MM_loginSQL
    Dim MM_rsUser
    Dim MM_rsUser_cmd

    MM_fldUserAuthorization = "userAccess"
    MM_redirectLoginSuccess = "/welcome.asp"
    MM_redirectLoginFailed = "/index.asp?error=Incorrect+Login,+Please+try+again"

    MM_loginSQL = "SELECT userName, userPassword, userFirstName"
    If MM_fldUserAuthorization <> "" Then MM_loginSQL = MM_loginSQL & "," & MM_fldUserAuthorization
    MM_loginSQL = MM_loginSQL & " FROM users WHERE userName = ? AND userPassword = ?"
    Set MM_rsUser_cmd = Server.CreateObject ("ADODB.Command")
    MM_rsUser_cmd.ActiveConnection = MM_**_STRING
    MM_rsUser_cmd.CommandText = MM_loginSQL 
```

我在第 24 行出现错误“80004005”。出了什么问题？是不是数据库连接有问题？

# c# - 查询从不返回结果 - “枚举未产生结果”

> ID：13649307
> 
> 赞同：2
> 
> 时间：2012-11-30T16:37:06.373
> 
> 标签：c#, xml, linq

如何`case`使用来自一个或多个 xml 文件的两条信息填充对象列表？

我尝试过的每种方法都产生了零结果，并且检查变量给出了***"Enumeration yielded no results"***。在下面的代码示例中，我已经包含（注释掉）我尝试用来实现此结果的各种方法。

如果已经有答案，请指出我的方向。我也将不胜感激任何随附的解释。

以下是代码片段：

```
private void gatherInfo(ref List<Case> Cases)
{
    List<string> XMLFileNames = new List<string>();

    foreach (string caseID in txtbxCases.Lines)
    {
        Cases.Add(new Case(caseID));
    }

    XMLFileNames.AddRange(Directory.EnumerateFiles(txtbxXMLDirectory.Text, "*", SearchOption.AllDirectories).Select(Path.GetFileName));

    string currentFileName = "";

    for (int i = XMLFileNames.Count - 1; i >= 0; i--)
    {
        currentFileName = XMLFileNames[i];
        if (currentFileName.Substring(currentFileName.Length - 4, 4) != ".xml")
        {
            XMLFileNames.RemoveAt(i);
        }
    }

    // Start of Area that doesn't work correctly
    for (int i = XMLFileNames.Count - 1; i>=0; i--)
    {
        currentFileName = XMLFileNames[i];
        //XElement currentDoc = XElement.Load(txtbxXMLDirectory.Text + "\\" + currentFileName);
        XDocument currentDoc = XDocument.Load(txtbxXMLDirectory.Text + "\\" + currentFileName);
        XElement currentDocElements = XElement.Parse(currentDoc.ToString());

        for (int i2 = Cases.Count - 1; i2>=0; i2--)
        {
            string currentCaseID = Cases[i].GetCaseID();

            IEnumerable<XElement> currentCase =
                from el in currentDocElements.Descendants("Document");
                where (string)el.Element("CaseNumber") == currentCaseID
                select el;
            ///////////////////////////////////////////////////////////
            //var currentCase =
            //    from el in currentDocElements.Descendants("IndexFields")
            //    where (string)el.Element("CaseNumber") == currentCaseID
            //    select el;
            ///////////////////////////////////////////////////////////
            //var currentCase = currentDocElements.Descendants("IndexFields")
            //    .where(x => x.Element("IndexField").Value == currentCaseID);
            ///////////////////////////////////////////////////////////

            foreach (XElement el in currentCase)
            {
                Cases[i].AddFile(el.Element("SRCFilename").Value, el.Element("XMLFilename").Value);
            }
        }
    }

    //foreach (string filename in XMLFileNames)
    //{
    //    XElement currentDoc = XElement.Load(txtbxXMLDirectory.Text + "\\" + filename);
    //
    //    foreach (var caseID in Cases)
    //    {
    //        IEnumerable<XElement> currentCase = 
    //            from el in currentDoc.ElementsAfterSelf("IndexFields")//.Elements("IndexFields")
    //            //where (string)el.Element("CaseNumber") == caseID.GetCaseID()
    //            select el;
    //
    //        foreach (XElement el in currentCase)
    //        {
    //            caseID.AddFile(el.Element("SRCFilename").Value, el.Element("XMLFilename").Value);
    //        }
    //    }
    //}
} 
```

下面是一个示例 XML 文件，其中包含*生产*XML 文件所具有的所有嵌套。

```
 <ImportSession>
 <Batches>
 <Batch BatchClassName="CaseFolder_XML">
 <Documents>
 <Document FormTypeName="Doc XML Form Type">
 <IndexFields>
 <IndexField Name="CaseNumber" Value="1"/>
 <IndexField Name="XMLFilename" Value="aaa.xml"/>
 <IndexField Name="SRCFilename" Value="aaa.pdf"/>
 </IndexFields>
 <Pages>
 <Page ImportFileName="c:\aaa.pdf"/>
 </Pages>
 </Document>
 <Document FormTypeName="Doc XML Form Type">
 <IndexFields>
 <IndexField Name="CaseNumber" Value="2"/>
 <IndexField Name="XMLFilename" Value="aaa.xml"/>
 <IndexField Name="SRCFilename" Value="aab.pdf"/>
 </IndexFields>
 <Pages>
 <Page ImportFileName="c:\aab.pdf"/>
 </Pages>
 </Document>
 <Document FormTypeName="Doc XML Form Type">
 <IndexFields>
 <IndexField Name="CaseNumber" Value="3"/>
 <IndexField Name="XMLFilename" Value="aaa.xml"/>
 <IndexField Name="SRCFilename" Value="aac.pdf"/>
 </IndexFields>
 <Pages>
 <Page ImportFileName="c:\aac.pdf"/>
 </Pages>
 </Document>
 <Document FormTypeName="Doc XML Form Type">
 <IndexFields>
 <IndexField Name="CaseNumber" Value="4"/>
 <IndexField Name="XMLFilename" Value="aaa.xml"/>
 <IndexField Name="SRCFilename" Value="aad.pdf"/>
 </IndexFields>
 <Pages>
 <Page ImportFileName="c:\aad.pdf"/>
 </Pages>
 </Document>
 <Document FormTypeName="Doc XML Form Type">
 <IndexFields>
 <IndexField Name="CaseNumber" Value="1"/>
 <IndexField Name="XMLFilename" Value="aaa.xml"/>
 <IndexField Name="SRCFilename" Value="aae.pdf"/>
 </IndexFields>
 <Pages>
 <Page ImportFileName="c:\aae.pdf"/>
 </Pages>
 </Document>
 <Document FormTypeName="Doc XML Form Type">
 <IndexFields>
 <IndexField Name="CaseNumber" Value="1"/>
 <IndexField Name="XMLFilename" Value="aaf.xml"/>
 <IndexField Name="SRCFilename" Value="aab.pdf"/>
 </IndexFields>
 <Pages>
 <Page ImportFileName="c:\aaf.pdf"/>
 </Pages>
 </Document>
 </Documents>
 </Batch>
 </Batches>
 </ImportSession> 
```

以下情况在生产中是正确的：

*   要检查的多个 xml 文件
*   一个案例可能会在一个 xml 文件中出现多次
*   可以将相同的文件添加到多个案例中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:40:03.053

也许你应该阅读`Cases[i2]`而不是`Cases[i]`？

```
for (int i2 = Cases.Count - 1; i2>=0; i2--)
{     // ^ counter for iterating over "Cases"

    string currentCaseID = Cases[i2].GetCaseID();
                              // ^ use correct counter here

    IEnumerable<XElement> currentCase =
        from el in currentDocElements.Descendants("Document");
        where (string)el.Element("CaseNumber") == currentCaseID
        select el;

    foreach (XElement el in currentCase)
    {
        Cases[i2].AddFile(el.Element("SRCFilename").Value, el.Element("XMLFilename").Value);
           // ^ and here
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:46:15.863

```
var xDoc = XDocument.Load("a.xml");
var allDocs = xDoc.Descendants("Document")
                .Select(doc=>new{
                    FormTypeName = doc.Attribute("FormTypeName").Value,
                    IndexFields = doc.Descendants("IndexField")
                                    .ToDictionary(x=>x.Attribute("Name").Value,
                                                  x=>x.Attribute("Value").Value)
                })
                .ToList(); 
```

您还可以使用 XPath

```
string xpath = "//Document[IndexFields/IndexField[@Name='CaseNumber' and @Value='3']]";
var docElement = xDoc.XPathSelectElement(xpath); 
```

# php - 通过 Kohana Controller 执行 Cron 作业

> ID：13649313
> 
> 赞同：1
> 
> 时间：2012-11-30T16:37:40.820
> 
> 标签：php, cron, kohana, command-line-interface

这就是我的控制器的样子

```
<?php defined('SYSPATH') or die('No direct script access.');

class Controller_Cron extends Controller {

    public function before() {

        if(!Kohana::$is_cli) ;
    }

    public function action_index() {
        $myFile = "C:\cron.txt";
        $fh = fopen($myFile, 'w') or die("can't open file");
        fwrite($fh, "\n");
        $stringData = date('Y-m-d H:i:s');
        fwrite($fh, $stringData);
        fclose($fh);
    }
}

?> 
```

我使用这个通过命令行运行脚本

```
php "C:\Program Files (x86)\EasyPHP\www\myweb\index.php" --uri=cron/index 
```

其中*cron*是控制器，*index*是一个函数。

***现在我需要的是每 x 分钟运行一次脚本***

当我通过浏览器运行脚本时，只是修改了*C:\cron.txt*。我把这个放在心上

```
public function before() {

        if(!Kohana::$is_cli) ;
    } 
```

是为了避免通过浏览器进行任何访问？那么，1.如何拒绝来自浏览器的访问？2\. 如何让代码每 x 分钟运行一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T09:01:20.733

要检查脚本是否从命令行访问，请使用`php_sapi_name() == 'cli'`使用它来检测您的脚本是从 cli 还是浏览器访问。详情见[这里](http://php.net/manual/en/function.php-sapi-name.php)。

要使代码每 X 分钟运行一次，请创建一个新的任务调度程序来运行包含命令行的 .bat 文件。确保使用完整路径调用 php 可执行文件，例如`C:\apache\php.exe "C:\Program Files (x86)\EasyPHP\www\myweb\index.php" --uri=cron/index`

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T10:15:29.107

因为它是 Windows，所以它实际上不是“cron”。你有两个选择：

*   设置`action_index`为执行无限循环，然后检查所需的间隔，并`usleep`节省一段时间以节省 CPU 周期，如 100，因此它不会占用您所有的处理能力
*   每次都使用 Windows 调度程序运行您的脚本。

您的代码`before()`应该是

```
function before(){
  if (!Kohana::$is_cli) { throw new HTTP_Exception_403; // Denied };
} 
```

确保您正确处理异常。或者您可以在 403 异常时将屏幕设为空白。您只能传递`--uri="cron"`给 PHP 命令行，因为该`index`部分始终是默认操作（在`Route::set`引导程序中的默认值中）

您必须在您的`index.php`：

```
 $request = Request::factory();

 try
 {
      $response = $request->execute();
 }
 catch (HTTP_Exception $exc)
 {
    $response = Request::factory('your/error')->execute();
    // or $response = Response::factory()->status(403)->body('<h1>403 Forbidden</h1>');
 }

 echo
   $response     
   ->send_headers()
   ->body(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T19:30:21.887

使用这两个链接来获得你需要的东西。[Kohana 3 中的 Cron 作业](http://www.coderelic.com/2011/10/creating-cron-jobs-in-kohana-3-x-is-a-piece-of-cake/)

一个可以帮助[kohana-cron](https://github.com/cbandy/kohana-cron) [Kohana Minion的模块](https://github.com/kohana/minion)

# python - 是否可以在没有 () 的情况下调用 python 类属性

> ID：13649316
> 
> 赞同：0
> 
> 时间：2012-11-30T16:37:49.417
> 
> 标签：python, class, function, attributes

我想做一些有点奇怪的事情。我希望能够访问可以作为非函数或函数访问的类属性：

```
class foo(object):
    def __init__(self):
        self.x = 99
    def x(self, *args, **kwargs ):
        print "x was called, args=%r, kwargs=%r" % (args, kwargs)
        return( self.x )  # return something useful here...

f = foo()
    print f.x  # prints "x was called", 99
    print f.x() # prints "x was called", 99 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:41:40.663

不知道*为什么*要这样做，但这是使用[`property`装饰器](http://docs.python.org/2/library/functions.html#property)的一种方法：

```
class Foo(object):
    @property
    def x(self):
        print "x was called"
        return lambda: None 
```

但这*完全*是荒谬的。它将实现您的示例尝试做的事情，但是当您访问`Foo().x`一个 lambda 函数时，它会返回，否则它是无用的。

如果您对返回自定义类的实例感到满意，那么您还可以为该自定义类提供一个`__call__()`简单地返回`self`以赋予`.x()`更多意义的方法：

```
class XReturnValue(object):
    def __call__(self):
        return self

class Foo(object):
    @property
    def x(self):
        print "x was called"
        return XReturnValue() 
```

哪里`XReturnValue`可以充实更多，以对`Foo.x`.

然而，在 Python 中，可调用对象（例如函数和方法）本身就是对象。您可以操作它们，向它们添加属性，将它们分配给不同的变量以供以后使用等。要获得它们的结果，您可以调用它们，但是如果您不调用它们，则可以检索该引用以在其他地方重用。你不应该试图规避这一点。

换句话说，要么坚持`.x`成为属性、a`property`或方法，但不要试图同时成为全部。

# three.js - 跨域资源共享策略拒绝跨域图像加载的解决方法

> ID：13649319
> 
> 赞同：1
> 
> 时间：2012-11-30T16:37:52.893
> 
> 标签：three.js

尝试从 API 加载图像以用作纹理；遇到`Cross-origin image load denied by Cross-Origin Resource Sharing policy`。

有人有这个工作吗？

jsFiddle：http: [//jsfiddle.net/calvintennant/AQA97/2/](http://jsfiddle.net/calvintennant/AQA97/2/)

可能相关的问题：[https ://github.com/mrdoob/three.js/issues/687](https://github.com/mrdoob/three.js/issues/687)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:11:43.183

您需要在托管图像的地方启用 CORS 支持。Google Cloud Storage 和 Amazon S3 都支持这一点。

# javascript - Adobe LiveCycle 打印到信封

> ID：13649323
> 
> 赞同：0
> 
> 时间：2012-11-30T16:38:00.913
> 
> 标签：javascript, pdf, adobe, livecycle

我使用 Adob​​e LiveCycle 8.2 创建了一个 PDF 表单。表单捕获数据，在验证数据（客户姓名、地址、帐号等）后，用户打印它，然后邮寄给客户，打印详细报告没问题，我遇到的问题是我试图找出一个打印报告后，还需要打印一个信封以及在表格中输入的信息。任何人都知道如何处理/解决这个问题？Adobe LC 拥有 JavaScript 和 FormCal 来扩展 LiveCycle 限制

流程：
用户将信息输入 PDF。
用户打印 PDF。
用户将客户名称和地址复制到 word doc 以打印信封。
打印的 PDF 和信封邮寄给客户。
问题：
如何将客户名称和地址从PDF直接打印到信封，而无需仅仅打印信封。我想用PDF打印报告和信封，可以吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T16:23:42.240

使用 LiveCycle 表单中的数据处理打印信封的最佳方法是在原始表单中添加单独的信封页。然后添加一个单独的打印按钮，该按钮将仅打印此信封页。以下是有关如何使用 LiveCycle Designer 完成此操作的一些基本步骤：

1) 在原始表单文档中创建一个新的母版页。此母版页应与您要打印的信封具有相同的尺寸。

2) 为使用信封母版页模板的表单文档创建一个新页面。在此页面中，添加您希望打印到信封上的表单字段（姓名、地址、城市、州、ZIP 等），并将它们放置在适合您的信封布局的位置。

3) 将信封字段值绑定到原始表单上的相关字段值。

4) 将信封页面上的存在值设置为“隐藏”

5) 在原始表单页面中添加一个名为“打印信封”的新按钮

6) 将 JavaScript 添加到执行以下功能的“打印信封”按钮：

*   将原始表单页面的存在设置为“隐藏”
*   将信封页面存在设置为“可见”
*   打印文件

7) 为每个原始表单页面添加一个“postPrint”事件，将页面存在属性设置为“可见”。为您的信封页面添加一个“postPrint”事件，将该页面设置为“隐藏”。

# jquery - 如何使用 jQuery 选择一个类并以数字方式添加单独的类

> ID：13649324
> 
> 赞同：1
> 
> 时间：2012-11-30T16:37:59.807
> 
> 标签：jquery

我正在尝试使用 jQuery（有点困难，因为我是一个完整的新手）在页面上选择类并根据它们的顺序添加不同的类。

例子：

```
<article class="news-story">
</article>
<article class="news-story">
</article>
<article class="news-story">
</article>
<article class="news-story">
</article> 
```

我希望 jQuery 获取所有“新闻故事”分类元素并将“customclass1”添加到第一个元素，将“customclass2”添加到第二个元素，将“customclass3”添加到第三个元素，将“customclass4”添加到第四个元素。

任何人都可以帮我解决这个问题吗？

如果你这样做了，我保证一旦我的 PC 复苏，我就会把 jQuery 和 PHP 塞进我的脑袋里。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:39:33.490

您可以使用[`addClass()`](http://api.jquery.com/addClass/)方法的参数：

```
$(".news-story").addClass(function(i) {
    return "customclass" + (i + 1);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:56:38.503

你可以这样做：

```
$('.news-story').each( function(idx,element){
  var cont = idx+1
  $(element).removeClass('news-story');
  $(element).addClass('customClass'+ cont );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:41:28.710

```
var elems = document.getElementsByClassName('news-story');
for (var i=0; i<elems.length; i++) {
    elems[i].className = elems[i].className + ' customclass'+(i+1);
} 
```

[**小提琴**](http://jsfiddle.net/bbwYx/3/)

# javascript - 可以忽略一组路由，或者使用 AngularJS 将它们传递给服务器？

> ID：13649325
> 
> 赞同：3
> 
> 时间：2012-11-30T16:38:03.663
> 
> 标签：javascript, coffeescript, angularjs

我想知道是否可以让 AngularJS 忽略一组路由值，或者定义一组应该发送到服务器而不是在客户端处理的路由值？

我问是因为我正在尝试设置不同的登录提供程序，这些登录提供程序由服务器 (node.js) 通过导航到 /auth/{provider} 来处理。如果我在那里导航，AngularJS 会尝试跳入并处理该路线，但我希望服务器处理它。

我确实知道我可以将我的标签作为目标“_self”（target="_self"），但我实际上想使用 $location.url 处理来自 CoffeeScript 的重定向。

编辑：似乎我也可以通过使用window.location.pathname来解决角度问题。我仍然不喜欢这个解决方案。无论如何，我可以使用 AngularJS 提供的 $location （或使用 Angular 提供的任何东西？）来做到这一点。

这可能吗？提前谢谢了！！

# ruby-on-rails - Heroku PG 命令的“找不到资源”

> ID：13649326
> 
> 赞同：0
> 
> 时间：2012-11-30T16:38:10.213
> 
> 标签：ruby-on-rails, heroku, resources, pg

我有一个免费的 Heroku 帐户，我正在使用：

*   导轨 3.2.8
*   Heroku heroku-toolbelt/2.33.2
*   PG

但是，每次我输入 Heroku PG 命令时，都会收到以下消息：

```
Resource not found! 
```

除了凭证命令：

```
➜  heroku pg:credentials HEROKU_POSTGRESQL_MYDB
   Connection info string:
   "dbname=blahblahblah" 
```

否则，所有其他命令都会失败：

```
➜  heroku pg:info HEROKU_POSTGRESQL_MYDB       
   !    Resource not found

➜  heroku pg:reset HEROKU_POSTGRESQL_MYDB    
   WARNING: Destructive Action
   This command will affect the app: myapp
   To proceed, type "myapp" or re-run this command with --confirm myapp

   > myapp
   Resetting HEROKU_POSTGRESQL_MYDB_URL (DATABASE_URL)... failed
   !    Resource not found
➜ 
```

有任何想法吗 ？如果您需要更多信息，请告诉我:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T11:13:00.607

以前，heroku gem 版本（2.26.6）存在一些[问题，并且未找到此资源，但在最新版本中已修复。](https://github.com/heroku/heroku/issues/368)

您使用的当前版本没有问题。

您的 heroku 密钥将无效（[尝试设置 heroku 登台站点 - “找不到资源”](https://stackoverflow.com/questions/5937725/trying-to-set-up-a-heroku-staging-site-resource-not-found)）。

如果正确，则需要降级 heroku gem 并检查它。

请关注此[线程](https://stackoverflow.com/questions/4820549/how-to-empty-db-in-heroku)。

它将帮助您解决上述问题。

# api - Desire2Learn 效价 API 注销

> ID：13649327
> 
> 赞同：6
> 
> 时间：2012-11-30T16:38:18.683
> 
> 标签：api, logout, desire2learn

我正在尝试实现一种从使用 Valence API 的应用程序中实际注销的方法。我显然可以清除我的会话，但是有没有办法通过 API 来实际注销 Desire2Learn 站点？我浏览了文档并没有看到任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T21:19:17.453

不，目前没有明确注销或登录的途径。但是，您可以使用 Valence 身份验证过程为新用户生成凭据。在这种情况下，您需要做的是使用浏览器与没有与 LMS 开放会话的用户进行交互：只要 LMS 认为执行用户身份验证部分的浏览器具有开放会话，它将传回该用户的用户凭据*，*而不是要求用户重新进行身份验证。

通常，与 LMS 的非活动会话会在短时间内过期，然后如果您的应用启动身份验证过程，LMS 将强制用户重新进行身份验证。

# c# - 个人证书存储的物理路径

> ID：13649329
> 
> 赞同：0
> 
> 时间：2012-11-30T16:38:21.243
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

这似乎是一个不常见的话题，因为我找不到任何参考。

数字证书存储在商店中。

正如你在这里看到的......

[如何以编程方式删除受信任的根证书颁发机构中的证书？](https://stackoverflow.com/questions/652206/how-do-i-programmatically-remove-a-certificate-in-trusted-root-certification-aut)

个人数字证书存储在哪里？商店名称是我的，我们可以在这里看到：

[http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storename.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.storename.aspx)

但是我需要找到文件本身的位置来以编程方式操作证书。

**编辑**

我也试图以这种方式打印我的证书名称和路径，但我什么也没打印：

```
X509Store store = new X509Store(StoreName.My, StoreLocation.CurrentUser);
X509Certificate2Collection storecollection = 
      (X509Certificate2Collection)store.Certificates;

Console.WriteLine("Store name: {0}", store.Name);
Console.WriteLine("Store location: {0}", store.Location);
foreach (X509Certificate2 x509 in storecollection)
{
  Console.WriteLine("certificate name: {0}",x509.Subject);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:12:22.743

据我所知，没有个人证书的物理文件。

关于第二个问题：您缺少`Open`像`store.Open(OpenFlags.ReadWrite);`. 请参阅 MSDN [X509Store](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509store.aspx)上的完整示例。

# python - 当 .close() 失败时，Python 3 中的文件描述符会发生什么？

> ID：13649330
> 
> 赞同：5
> 
> 时间：2012-11-30T16:38:21.740
> 
> 标签：python, io, python-3.x, resource-leak

以下 Python 3 代码在我运行时表现出一些奇怪的行为（至少对我而言）`strace`：

```
import os
import sys

if len(sys.argv) != 2:
    print('Usage: ecpy <filename>')
sys.exit(1)
try:
    print('my PID: %d' % os.getpid())
    with open(sys.argv[1], 'w') as fp:
        try:
            fp.write('Hello Stack Overflow!')
        except IOError as e:
            print('### before close')
            print(str(e))
            sys.stdout.flush()
except IOError as e:
    print('### after close')
    print(str(e))
    sys.stdout.flush()

print('### after exception block')
sys.stdout.flush() 
```

由于 I/O 是缓冲的，如果您使用 运行此代码`/dev/full`，它不会失败，直到在块`fp`末尾关闭。`with`这并不奇怪。在 Python 2.7.3rc2（在我的系统上）中，代码在实际关闭对应于的文件描述符后运行异常处理程序`fp`：

```
write(3, "Hello Stack Overflow!", 21)   = -1 ENOSPC (No space left on device)
close(3)                                = 0
munmap(0x7f9de3f78000, 4096)            = 0
write(1, "### after close\n", 16)       = 16
write(1, "[Errno 28] No space left on devi"..., 35) = 35
write(1, "### after exception block\n", 26) = 26 
```

但是，在 Python 3.2.3（在我的系统上）中，异常块运行后文件描述符仍然打开：

```
write(3, "Hello Stack Overflow!", 21)   = -1 ENOSPC (No space left on device)
write(1, "### after close\n", 16)       = 16
write(1, "[Errno 28] No space left on devi"..., 35) = 35
write(1, "### after exception block\n", 26) = 26
...
write(3, "Hello Stack Overflow!", 21)   = -1 ENOSPC (No space left on device)
write(3, "Hello Stack Overflow!", 21)   = -1 ENOSPC (No space left on device)
close(3)                                = 0 
```

解释器尝试再写入文件几次，然后静默失败。Python 什么时候真正调用`close()`？什么在调用它？这种行为似乎泄漏了文件描述符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:31:39.650

我冒昧地向 bugs.python.org 提交了一个问题，让我们拭目以待，看看它是否会成功。

[http://bugs.python.org/issue16597](http://bugs.python.org/issue16597)

编辑：看起来这是一个错误，很好！

# asp.net - 为什么 CustomValidator 在文本框的 onblur 上触发

> ID：13649332
> 
> 赞同：2
> 
> 时间：2012-11-30T16:38:29.150
> 
> 标签：asp.net, client-side-validation

我正在构建一个 CustomValidator 来处理我自己的应用程序在时间字段（“09:00”、“15:35”、...）上的逻辑，但我偶然发现了一种我在网上找不到任何解释的行为。

我现在的重点是在客户端执行的验证逻辑。

问题是，正如标题中所说，*当且仅当我在 Validator 中使用我正在验证的文本框的 ID 设置 ControlToValidate 属性时*，一旦焦点离开文本框，验证就会被触发；它甚至在 onblur 事件之前触发，这对我来说绝对是有害的，因为我正在使用 onblur 事件来标准化时间格式（例如“9:00”->“09:00”、“11.45”->“11: 45"），因此，验证逻辑可能会收到不正确的值。另一方面，如果 ControlToValidate 属性保持空白，则 ClientValidationFunction 仅在提交/回发时触发。

我找到的唯一相关答案是这个[https://stackoverflow.com/a/8649697/450684](https://stackoverflow.com/a/8649697/450684)，但对我来说，这根本没有意义。为什么 ControlToValidate 的存在表明我希望在 onblur 之前执行客户端验证？我不要！有没有办法抑制这种行为？

这是一个示例页面：

```
<asp:TextBox runat="server" AutoPostBack="false" ID="txtBox1" onblur="FormatText(this);" />
<asp:CustomValidator runat="server" ID="CV1" ControlToValidate="txtBox1" ClientValidationFunction="Test1" />
<asp:CustomValidator runat="server" ID="CV2" ClientValidationFunction="Test2" />
<asp:Button ID="btn1" Text="postback" runat="server" OnClick="btn1_Click" />
<asp:Label ID="lbl1" runat="server" />
<script type="text/javascript">
    function FormatText(txtBox1)
    {
        alert('FormatText');
    }
    function Test1(val, args)
    {
        alert('Test1');

    }
    function Test2(val, args)
    {
        alert('Test2');
    }</script> 
```

我想要的是 Test1 和 Test2 都只在 btn1 的点击时执行；相反，在 txtBox1 的 onblur 事件中，我得到 Test1 和 FormatText 按此顺序执行

ASP.NET 的客户端验证对我来说写和学习真的很有趣，不要让它毁了一切 :-)

谢谢

PS：.NET 框架的版本是 4.0。另外，服务器端语言是 C#，如果重要的话

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T23:01:21.100

我认为发生了什么是这样的：

ASP.NET 客户端验证的标准行为是在退出字段时进行验证。这是一个观察结果，而不是对已发布标准的引用（尽管可能有一个。）开箱即用的验证器都以这种方式运行。所有这些都需要指定一个特定的字段来验证。

自定义验证器允许您验证单个控件（通过使用 ControlToValidate 指定它），或允许您验证控件组合，在这种情况下，您将 ControlToValidate 设置为空字符串。除非事情发生了变化，否则您必须*指定*它；如果省略该属性，则不会发生验证。

所以......如果您指定一个要验证的控件，自定义验证器的行为就像所有其他验证器一样，并对退出该字段的用户做出反应。如果您不指定要验证的控件，则它不知道您对哪些控件感兴趣，并且不会这样做。

您可以通过编写一个真正的自定义验证器来解决这个问题：从 BaseValidator 继承。这实际上可以很有趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T11:39:41.300

如何管理控件的验证事件。您可以根据需要从验证器中删除 ControlToValidate 属性，并在文本框事件上为您的文本框绑定验证。您也可以在验证之前或之后添加一些功能逻辑。按钮单击事件验证保持不变，无需更改。

```
function BindValidation(){$('#txtBox1').on('blur keyup change',function(){ValidatorValidate($('#CV1').get(0));});}
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(BindValidation);

//validation function  example for CV1 validator
function Test1(val, args)
{                  

    args.IsValid=$('#txtBox1').val().length>0&&$('#txtBox1').val().match(/^\s+$/g)==null;
} 
```

# javascript - 自动设置我从后面的代码添加的文本框的高度

> ID：13649335
> 
> 赞同：1
> 
> 时间：2012-11-30T16:38:40.930
> 
> 标签：javascript, asp.net

我想用下面的代码自动设置多文本、文本框的高度但不起作用

```
//behind Code

TextBox txt = new TextBox();
txt.TextMode = TextBoxMode.MultiLine;
txt.Text = ...
txt.ID = ...
txt.ReadOnly = true;

Page.ClientScript.RegisterStartupScript(this.GetType(), "changeSHeight", "changeSHeight('" + txt.ClientID + "');", true);

//javascript
<script type="text/javascript">
         function changeSHeight(f) 
         {
             var e = document.getElementById(f);
             e.style.height = e.scrollHeight + "px";
         }
    </script> 
```

我检查`changeSHeight`它是否被正确调用

当我想显示`scrollHeight`时`alert`不显示任何内容，问题是因为我从后面的代码中添加了文本框，这一行：`var e = document.getElementById(f);`找不到它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:48:15.607

```
$(document).ready(function(){
$("#idofdiv").bind("resize", function() {
   if($('#idofdiv').height() > 200){ $('#idofdiv').css('height','auto'); }
});

}); 
```

这可能对你有帮助这是 jquery 代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:21:17.350

您是否尝试使用高度：自动；属性如果 css 它将自动更改 div 的高度..

# java - 验证 URI (URL/URN) 存在的适当方法？

> ID：13649338
> 
> 赞同：1
> 
> 时间：2012-11-30T16:38:52.817
> 
> 标签：java, user-interface, networking, thread-safety, uri

这是交易，我有一个`JTextField`，`KeyListener`所以每当我按下（释放/键入）一个键时，它都会调用一个方法（`validateButton()`），它检查文本是否`JTextFile`是一个有效的 URL（在标题中说它可能是 URL 或 URN，但是，到目前为止，我对识别 URL 更感兴趣，但如果您在回答中同时考虑它们，我将不胜感激）事情是每次按键时，我的代码都会尝试建立与服务器的连接，所以我的 GUI 停止工作，直到连接结束，所以我想，我要使用一个线程来连接，但我想每当按下一个键（释放/键入）时“杀死/终止”当前线程（正在检查 URL（如果有的话）的线程），为了节省带宽，我知道我可以通过按下一个按钮来做到这一点，（这将节省更多的带宽）在编辑结束时，如果它是有效的继续，如果它不是那么做其他事情，但这不是我想要做的；问题是不建议杀死线程，

提前致谢

**PD：**我正在使用下一个代码来检查 url 的存在：

```
 URL u = new URL (tfURI.getText());
        HttpURLConnection huc =  ( HttpURLConnection )  u.openConnection (); 
        huc.setRequestMethod ("HEAD");  
        huc.connect () ; 
        code = huc.getResponseCode() ; 
```

如果代码不同于 404 或任何其他错误代码，我将启用我的按钮，否则我将禁用它。

# javascript - 如何找出 IndexedDB 中可用的数据库？

> ID：13649340
> 
> 赞同：2
> 
> 时间：2012-11-30T16:38:54.990
> 
> 标签：javascript, html, local-storage, indexeddb

我正在编写一个跨浏览器 javascript“数据库资源管理器”，它可以让我查看本地存储机制。这应该是一个非常方便的开发工具。（是的，我知道每个浏览器都有自己的开发工具，但我想创建一个适用于所有浏览器的工具）

那么问题是：如何获取已在 IndexedDB 中创建的数据库列表？一旦我得到那个列表，我怎样才能在不改变版本的情况下打开它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T20:18:21.757

不幸的是，答案很简单：这是不可能的。出于隐私原因，这是不可能的，这是一件好事。制作数据库浏览器的最佳方法是让开发人员传递数据库名称。我自己编写了一个 indexeddbviewer，我让开发人员在数据属性中传递数据库名称。[一篇博文](http://www.kristofdegrave.be/2012/11/indexeddbviewer-take-look-inside-your.html)向您展示了如何使用它，并且查看器在[codeplex](http://linq2indexeddb.codeplex.com/releases)上可用。最后，我也有它的[演示](http://users.telenet.be/kristofdegrave/Viewer/)。

# c++ - OpenCV Datamatrix 代码查找器

> ID：13649342
> 
> 赞同：1
> 
> 时间：2012-11-30T16:38:57.220
> 
> 标签：c++, ios, opencv, zxing

有没有人写过或听说过用 OpenCV 编写的数据矩阵代码解码器？

我用过[ZXing](http://code.google.com/p/zxing/)自带的解码器，但说实话，它很糟糕。它需要是一个完全清晰的图像，使用整个图像，而**不是一个角度**。后者对我来说是最大的缺点。有许多应用程序可以读取图像并从模糊、*倾斜甚至仅 40% 的*图像等问题中恢复。

如果有人知道另一个更好的 SDK，请告诉我。我用过很多次opencv，看起来写一个datamatrix解码器并不难，我只是很惊讶代码不在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T19:05:51.063

它实际上是嵌入的。此外，如果您说“不会太难”，并且考虑到您正在寻找它并没有找到它，那么您自己贡献一下如何？ [https://code.ros.org/trac/opencv/browser/trunk/opencv/modules/objdetect/src/datamatrix.cpp](https://code.ros.org/trac/opencv/browser/trunk/opencv/modules/objdetect/src/datamatrix.cpp)

# c# - C# - 编写嵌套状态流程图

> ID：13649345
> 
> 赞同：2
> 
> 时间：2012-11-30T16:39:13.913
> 
> 标签：c#, uml, state, state-machine, state-diagram

我有以下状态图。我知道如何制作一个在非嵌套状态之间转换的简单状态机；但是，我不知道如何在嵌套状态之间转换。有人能解释一下如何在适当的高层次上做到这一点（即，你不需要为我编写代码——除非你感觉特别慷慨：P）。

**我要建模的内容 [根据建议修改]**

![状态图：我正在尝试实现的内容](../Images/150a3ba22ba19349143d6424fd8753ab.png)

**我知道如何实现（下面的代码）**

![状态图：我知道如何实现](../Images/2bf50be8e2426c06846292e62596d686.png)

```
public class MyState : State // State enumeration
{
    public static MyState A = new MyState("State A");
    public static MyState B = new MyState("State B");
    public static MyState C = new MyState("State C");
    public static MyState D = new MyState("State D");
    public static MyState E = new MyState("State E");
    public static MyState F = new MyState("State F");
    public static MyState NEUT = new MyState("Neutral");
    public static MyState P = new MyState("P");
    protected MyState(string name) : base(name) { }
}

public class MyEvent : Event // Event enumeration
{
    public static MyEvent X_POS = new MyEvent("X+");
    public static MyEvent X_NEG = new MyEvent("X-");
    public static MyEvent Y_POS = new MyEvent("Y+");
    public static MyEvent Y_NEG = new MyEvent("Y-");

    protected MyEvent(string name) : base(name) { }
}

// State Machine implementation
public class MyStateMachine : StateMachine<MyState, MyEvent>
{
    public MyStateMachine() : base(MyState.P) // MyState.P = initial state
    { // Set up the transition table
        // P
        this.addTransition(MYState.P, MyState.NEUT, MyEvent.Y_NEG);

        // NEUTRAL
        this.addTransition(MyState.NEUT, MyState.P, MyEvent.Y_POS);
        this.addTransition(MyState.NEUT, MyState.A, MyEvent.Y_NEG);
        this.addTransition(MyState.NEUT, MyState.B, MyEvent.Y_POS);
        this.addTransition(MyState.NEUT, MyState.C, MyEvent.Y_NEG);
        this.addTransition(MyState.NEUT, MyState.D, MyEvent.Y_POS);
        this.addTransition(MyState.NEUT, MyState.E, MyEvent.Y_NEG);
        this.addTransition(MyState.NEUT, MyState.F, MyEvent.Y_POS);

        // A
        this.addTransition(MyState.A, MyState.NEUT, MyEvent.Y_POS);

        // B
        this.addTransition(MyState.B, MyState.NEUT, MyEvent.Y_NEG);

        // C
        this.addTransition(MyState.C, MyState.NEUT, MyEvent.Y_POS);

        // D
        this.addTransition(MyState.D, MyState.NEUT, MyEvent.Y_NEG);

        // E
        this.addTransition(MyState.E, MyState.NEUT, MyEvent.Y_POS);

        // F
        this.addTransition(MyState.F, MyState.NEUT, MyEvent.Y_NEG);
    }

    public void move(MyEvent eevent)
    {
        try
        {
            this.moveNext(eevent);
        }
        catch (Exception e) { }
    }
} 
```

**编辑**：我认为问题的症结在于当转换取决于原始超状态中的当前子状态时，如何说明/实现从给定超状态的子状态到不同超状态的子状态的转换。使用我的示例，如果当前状态是超状态“中性”内的“P”，我如何说明/实现我的状态机以显示事件 Y+ 将完全从中性超状态过渡到“非中性”超状态，并**具体进入“P”子状态**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:44:39.170

您可能希望实际为通过 X 移动的 P、AB、CD 和 EF 创建状态机。每个状态都将配置有子状态机。“主”状态机将通过 X 转换通过 P、AB、CD 和 EF 移动，而子状态机将通过 Y 转换在中性非中性方向上移动。如果我需要更详细地说明这一点，请告诉我。

# c# - 使用 Android 作为客户端和 C# 作为服务器的 TCP/IP 通信

> ID：13649346
> 
> 赞同：2
> 
> 时间：2012-11-30T16:39:23.383
> 
> 标签：c#, android, sockets

我想将一些陀螺仪读数从我的 android 设备发送到 PC 程序 (C#)。我决定通过套接字编程来做到这一点。Android 手机充当客户端，运行在计算机上的程序充当服务器。这是我现在发送“hello”的android代码：

```
try
{
    socket = new Socket("192.168.1.3", 1071);
PrintWriter pw=new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())));
pw.println("Hello");
    socket.close();
}
catch (UnknownHostException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
    }
catch (IOException e) {
     // TODO Auto-generated catch block
     e.printStackTrace();
    } 
```

现在 c# 服务器代码如下所示：

```
 listener = new TcpListener(1071);
        listener.Start();
        Socket soc;
        while (true)
        {
             soc= listener.AcceptSocket();
            Console.WriteLine("Connection accepted from " + soc.RemoteEndPoint);

            byte[] b = new byte[10000];
            int k = soc.Receive(b);
            Console.WriteLine(k);
            char cc = ' ';
            string test = null;
            Console.WriteLine("Recieved...");

            for (int i = 0; i < k - 1; i++)
            {
                Console.Write(Convert.ToChar(b[i]));
                cc = Convert.ToChar(b[i]);
                test += cc.ToString();
            }
        }
        soc.Close();
    } 
```

问题是连接已建立，但我无法在服务器上接收任何内容。k 的值每次都为零。但是连接成功。

```
Output:
Connection accepted from 192.168.1.6:36742
0
Recieved...
Connection accepted from 192.168.1.6:57013
0
Recieved... 
```

等等。

谁能告诉我可能是什么问题，我很确定不存在诸如 UTF-8 之类的编码问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:43:47.347

看起来[您在关闭 PrintWriter](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html#flush%28%29)之前错过了刷新它。

# objective-c - 格式化 Sting 不是 [[self navigationController] setToolbarHidden:YES] 上的字符串文字；

> ID：13649352
> 
> 赞同：-4
> 
> 时间：2012-11-30T16:39:51.643
> 
> 标签：objective-c, ios

有人可以告诉我为什么我收到“格式字符串不是字符串文字（可能不安全）”警告

```
[[self navigationController] setToolbarHidden:YES]; 
```

这让我快疯了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:58:49.060

该警告似乎根本与代码无关。尝试清理、构建或分析项目；任何会再次导致错误检查的东西。这可能是来自不同行的旧错误。

# bash - 如何使用 ssh 连接执行 bash

> ID：13649356
> 
> 赞同：0
> 
> 时间：2012-11-30T16:40:14.393
> 
> 标签：bash, unix, ssh

我正在尝试编写一个 bash 脚本来自动在网络中的客户端计算机中执行操作。但是在代码之后

```
ssh -i ~/.ssh/key root@machine 
```

bash 程序刚刚停止 我可以做些什么来将命令发送到远程机器？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:42:28.573

就像您直接调用 bash 一样。

```
ssh ... somescriptontheserver.sh

ssh ... ls -lR /

ssh ... << EOF
ls -lR /
EOF 
```

# matlab - 在 Matlab 中以 +30dB 播放声音

> ID：13649359
> 
> 赞同：0
> 
> 时间：2012-11-30T16:40:29.757
> 
> 标签：matlab, audio

据我所知，当我使用命令将 wav 文件加载到 matlab 时：

`song = wavread('file.wav');`

数组歌曲包含值从 -1 到 1 的元素。此文件（和硬件）准备以 80dB 播放。我需要增加 +30dB 才能达到 110dB。我通过乘以 sqrt(10) 得到 +10dB，所以为了得到 +30dB，我这样做：

`song = song*10*sqrt(10);`这与

`song = song*sqrt(10)*sqrt(10)*sqrt(10);`

现在数组歌曲的值比 -1 到 1 大得多，我听到失真的声音。是因为这个值大于 <-1,1> 还是因为我的扬声器/耳机的质量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:56:20.063

失真是因为您的值超过 +/-1。浮点值转换为 ADC 计数，即 +/-32768（对于 16 位 ADC）或 +/-8388608（对于右对齐 24 位 ADC）或 +/-2147483648（对于左对齐合理的 24 位 ADC）。对于 16 位 ADC，这通常通过类似`adcSample = (short int)(32768.0*floatSample);`C 中的操作来完成。如果`floatSample`> +1 或 < -1，这将导致 short int 转换中的回绕，这就是您听到的失真。强制转换是必要的，因为 ADC 需要 16 位数字样本。

您需要调整放大器/扬声器设置以获得所需的声级。

相反，您可以创建文件的副本，将其*降低*30 dB，调整您的放大器/扬声器以 80 dB 播放新文件，然后以相同的放大器/扬声器设置播放原始文件。这将使原始文件以 110 dB 播放。

正如 Paul R 在他的评论中指出的那样，我在这里猜测您在指代完整信号链产生的实际模拟声级时使用`dB`的是简写形式。`dB SPL`

# jquery - jQuery .live() 和 .on()：我做错了什么？

> ID：13649361
> 
> 赞同：2
> 
> 时间：2012-11-30T16:40:37.530
> 
> 标签：jquery

我正在尝试将单击事件绑定到 jQuery (v1.8.18) 中的某些元素。我有两个与我的选择器匹配的元素，在我进行绑定时存在，但还有第三个元素最终会匹配我的选择器，但直到我注册后的某个时间点才会被标记事件。

当我只是使用：

```
$('.collapsible h2 > .ui-icon').bind('click', toggleCollapsibleList); 
```

...然后它正确地绑定到提前存在的两个，但显然不绑定到第三个。当我使用：

```
$('.collapsible h2 > .ui-icon').live('click', toggleCollapsibleList); 
```

...然后他们都没有被束缚。当我使用时：

```
$('.collapsible h2 > .ui-icon').on('click', toggleCollapsibleList); 
```

...然后它的行为与 .bind() 相同。我已通过开发人员工具确认所有三个元素都存在于 DOM 中，并在页面完成加载后匹配选择器。有谁知道我可能做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:47:38.167

jQuery[`.on()`](http://api.jquery.com/on/)是在**1.7**中引入的，因此不推荐使用`.live()`. 如果您`.on()`希望它的行为类似于[`.live()`](http://api.jquery.com/live/).

您实际上想要使用类似的`.on()`东西：

```
$(document).on('click', '.collapsible h2 > .ui-icon', toggleCollapsibleList); 
```

以下内容取自 jQuery[`.live()`文档](http://api.jquery.com/live/)：

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:06:59.267

```
// These will attach an event handler for all elements which match the 
// current selector NOW
$('.collapsible h2 > .ui-icon').bind('click', toggleCollapsibleList);
// is equivalent to
$('.collapsible h2 > .ui-icon').on('click', toggleCollapsibleList);

// These will attach an event handler for all elements which match the 
// current selector NOW AND IN THE FUTURE

// not recommended
$('.collapsible h2 > .ui-icon').live('click', toggleCollapsibleList); 
// is equivalent to
// recommended
$(document).on('click', '.collapsible h2 > .ui-icon', toggleCollapsibleList); 
```

# mysql - BASH脚本不读取输入mysql密码

> ID：13649364
> 
> 赞同：1
> 
> 时间：2012-11-30T16:40:58.810
> 
> 标签：mysql, bash, passwords

> **可能重复：**
> [如何从 shell 脚本执行 Mysql 命令？](https://stackoverflow.com/questions/8055694/how-to-execute-mysql-command-from-a-shell-script)

我正在尝试`.sql`使用 bash 脚本执行文件。但我在连接到 MySQL 时遇到问题。这是我到目前为止所拥有的：

```
#! /bin/sh
PWD="thepassword"
mysql -p -u theuser < Randomsqlfile.sql
echo $PWD 
```

提示输入密码时，没有填写任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:44:28.510

做这个：

```
mysql -utheuser -pthepassword <Randomsqlfile.sql 
```

# javascript - 生成带有用于切换隐藏/显示的独特按钮的 Div

> ID：13649365
> 
> 赞同：0
> 
> 时间：2012-11-30T16:41:01.727
> 
> 标签：javascript, html, button, toggle

我正在制作一个通讯录，每个新条目都会生成一个包含所有信息的 Div。我已经为每个生成的 div 提供了唯一的 ID，并为使用 Div 生成的每个按钮提供了唯一的 ID，但是我无法将按钮与 div 关联并允许它执行功能（例如切换可见性）分）。

非常感谢您提供的任何帮助，因为我很快就会因沮丧而秃顶。

## 更新了包含建议的代码

## 生成 DIV 和 Button 的代码：

```
 Contact.prototype.generateDiv = function(){

      divid = divid + 1;
      buttonid = buttonid + 1;
     var control = [];
     control[0] = divid;
     control[1] = buttonid;
     myControls.push(control);

var childDiv =
            "<div style='border-style:double;border-width:6px;background-color: #2f4f4f;margin-left:auto;max-width: 700px;margin-right: auto;text-shadow:-1px -1px 1mm #000,1px -1px 1mm #000,-1px 1px 1mm #000,1px 1px 1mm #000;'>" +
            this.firstName + " " + this.surname + "<button class='btnForDiv' style='color: black;' id='" + buttonid + "'" + "> Button </button>" +
            "<div  id='" +  divid  + "' " +  "style='margin-right: auto;margin-left :40px;width: 300px;border-right-style: double;border-right-width:3px;'>" +
            "<br>" + "Surname: "  +  this.surname + "<BR>" + "First Name:" + this.firstName + "<br>" +
            "Date Of Birth: " +  this.days + "/" +  this.months + "/" + this.years + "/" + "<br>" + "Telephone Number: " + this.phone +
            "<br>" + "Address: " + this.address + " " + this.post + "<br>" + "Email Address: " + this.email + "<br>" + "Group: " + this.group +
            "<br>" + "Days Until Birthday: " + this.daysUntil + "<BR>" +  "</div>" +  "</div>"

        return childDiv  ; 
```

}

## 整个代码

```
var surnameField,firstNameField,birthdayField, phoneField, addressField, postField, emailField, groupField ;  //Declaring variables for the fields

var Contact = function(surname,firstName,date, phone , address , post, email, group){
    this.surname = surname ;
    this.firstName = firstName ;
    this.birthdayDate = new Date (date) ;
    this.phone = phone;
    this.address= address;
    this.email = email;
    this.post = post;
    this.group = group;
    this.selected = false ;

}

var contacts = [];
divid = 0;
buttonid = 1000;
myControls = [];

var getDate = function() {

    for (var i= 0, j=contacts.length;i<j;i++){
        var y = contacts[i].birthdayDate.getFullYear();
        var m = contacts[i].birthdayDate.getMonth();
       var d = contacts[i].birthdayDate.getDate();
        contacts[i].days = d;
        contacts[i].months = m + 1;
        contacts[i].years = y ;
        var today = new Date() ;
        var ty = today.getFullYear();
        contacts[i].bdThisYear = new Date(ty,m,d, 0 , 0 , 0);

    }
}

var daysUntilBirthday = function(){
    for (var i= 0, j=contacts.length;i<j;i++){
        var today = new Date() ;
            contacts[i].daysUntil = Math.round((contacts[i].bdThisYear - today ) /1000/60/60/24+1);
            if (contacts[i].daysUntil <= 0){
            contacts[i].daysUntil =  contacts[i].daysUntil + 365 ;
        }
    }
}

Contact.prototype.generateDiv = function(){

          divid = divid + 1;
          buttonid = buttonid + 1;
         var control = [];
         control[0] = divid;
         control[1] = buttonid;
         myControls.push(control);

    var childDiv =
                "<div style='border-style:double;border-width:6px;background-color: #2f4f4f;margin-left:auto;max-width: 700px;margin-right: auto;text-shadow:-1px -1px 1mm #000,1px -1px 1mm #000,-1px 1px 1mm #000,1px 1px 1mm #000;'>" +
                this.firstName + " " + this.surname + "<button class='btnForDiv' style='color: black;' id='" + buttonid + "'" + "> Button </button>" +
                "<div  id='" +  divid  + "' " +  "style='margin-right: auto;margin-left :40px;width: 300px;border-right-style: double;border-right-width:3px;'>" +
                "<br>" + "Surname: "  +  this.surname + "<BR>" + "First Name:" + this.firstName + "<br>" +
                "Date Of Birth: " +  this.days + "/" +  this.months + "/" + this.years + "/" + "<br>" + "Telephone Number: " + this.phone +
                "<br>" + "Address: " + this.address + " " + this.post + "<br>" + "Email Address: " + this.email + "<br>" + "Group: " + this.group +
                "<br>" + "Days Until Birthday: " + this.daysUntil + "<BR>" +  "</div>" +  "</div>"

            return childDiv  ;

}

var addContact = function(surnameField,firstNameField,birthdayField, phoneField, addressField, postField, emailField, groupField ){
        if(surnameField.value){
            a = new Contact(surnameField.value, firstNameField.value,birthdayField.value, phoneField.value, addressField.value, postField.value, emailField.value, groupField.value);
            contacts.push(a);
        }else{ alert("Please complete all fields")}

}

var clearUI = function(){
    var white = "#fff";
    surnameField.value = "";
    surnameField.style.backgroundColor = white;
    firstNameField.value = "";
    firstNameField.style.backgroundColor = white;
    birthdayField.value="";
    birthdayField.style.backgroundColor = white;
    phoneField.value = "";
    phoneField.style.backgroundcolor = white;
    addressField.value = "";
    addressField.style.backgroundcolor = white;
    postField.value = "";
    postField.style.backgroundcolor = white;
    emailField.value = "";
    emailField.style.backgroundcolor = white;
    groupField.value="";
    groupField.style.backgroundcolor = white;
}

var updateList = function(){
    divid = 0;
    buttonid = 1000;
    myControls = []
    var tableDiv = document.getElementById("parentDiv"),
        cDiv = "<BR>" +  "<div align='center'> Click a contact to expand</div>" ;

    for (var i= 0, j=contacts.length;i<j;i++){
        var cntct = contacts[i];
        cDiv += cntct.generateDiv();
    }

    tableDiv.innerHTML = cDiv;
    getDate();
    daysUntilBirthday();
    saveContacts();
}

var add = function(){
;
    addContact(surnameField,firstNameField,birthdayField, phoneField, addressField, postField, emailField, groupField);
    clearUI();
    daysUntilBirthday();
    getDate();
    updateList();
};

var saveContacts = function(){
    var cntcts = JSON.stringify(contacts);
    if (cntcts !==""){
        localStorage.contacts = cntcts;
    }else{
        alert("Could not save contacts");
    }
}

var loadContacts = function(){
    var cntcts = "";
    if(localStorage.contacts !== undefined){
        cntcts = localStorage.contacts;
        contacts = JSON.parse(cntcts);
        var proto = new Contact();
        for (var i=0; i<contacts.length; i++){
            var cntct = contacts[i]
            cntct.__proto__ = proto;
            cntct.birthdayDate = new Date(cntct.birthdayDate);
        }
    }
}

var clearContacts = function(){
    contacts = [];
    updateList();

}

//var periodUpdate = function(){
//    setInterval(updateList, 10000);
//}

window.onload = function(){
    loadContacts();
    updateList();
    surnameField = document.getElementById("surname");
    firstNameField = document.getElementById("firstName")
    birthdayField = document.getElementById("birthday");
    phoneField = document.getElementById("phone");
    addressField = document.getElementById("address");
    postField = document.getElementById("post");
    emailField = document.getElementById("email");
    groupField = document.getElementById("group");
    addButton = document.getElementById("addButton");
    addButton.onclick = add;
    delButton = document.getElementById("delButton");
    delButton.onclick = clearContacts;
    clearUI();
   // periodUpdate();
} 
```

## 的HTML

```
<!DOCTYPE html>
<html>
<head>

    <script type="text/javascript" src="contacts.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
    <script type="text/javascript" src="jquery-1.8.3.min.js">
    $(document).ready(function(){

        (".btnForDiv").on("click", function(){

    // get the ID of the button
    var id = $(this).prop("id");
    var divid;
    // now find the div Id related to this button
    for (var i = 0, len = myControls.length; i < len; i++){
    if (myControls[i][1] == id){
    divid = myControls[i][0];
    break;
    }
    }

    // you now have the div,so toggle it.
    $("#" + divid).toggle();

    });
    });
    </script>

    <div><title>Contacts Book</title></div>

</head>

<body>
<div class="information">
<heading><h1>Contacts Book</h1></heading>
</div>
<p><div class="information">Enter the contacts details below and click Add or select to view an existing contact.</div></p>
<hr>

<div class="entrydiv">
<table class="entryforms">
    <br>
    <tr>
        <td>Surname</td><td><input type="text" class="inputboxes"  id="surname" /></td>
    </tr>
    <tr>
        <td>First Name</td><td><input type="text" class="inputboxes"  id="firstName" /></td>
    </tr>
    <tr>
        <td>Birthday</td><td><input type="date" class="inputboxes" id="birthday" /></td>
    </tr>
    <tr>
        <td>Phone Number</td><td><input type="text" class="inputboxes" id="phone"></textarea></td>
    </tr>
    <tr>
        <td>Email Address</td><td><input type="text" class="inputboxes"  id="email" /></td>
    </tr>
    <tr>
        <td>Address</td><td><input type="text" class="inputboxes" id="address"/></td>
    </tr>
    <tr>
        <td>Postcode</td><td><input type="text" class="inputboxes"  id="post"  /></td>
    </tr>
    <tr>
        <td>Group</td><td><select class="inputboxes"  id="group"/>
        <option value="Business">Business</option>
        <option value="Educational">Educational</option>
        <option value="Friend">Friend</option>
    </td>
    </tr>
</table>

<br>
<button id="addButton">Add Contact</button>
<button id="delButton">Delete Contacts</button>
</div>
<hr>
<div class="tablediv">
<h2 class="information" align="center">Contacts</h2>
<div  id="parentDiv"></div>
</div>
</body>
</html> 
```

## 解决方案

首先非常感谢达伦的建议，结果证明是正确的（稍作改动）

我犯的第一个错误是插入 jquery，我有

```
<script src="jquery-1.8.3.min.js">
   //code
</script> 
```

当我需要

```
<script src="jquery-1.8.3.min.js"></script>
   <script>
     //code
   </script> 
```

所以这个很小的错误让我暂时退缩了。

其次，我使用了：

```
 $(document).on('click','.btnForDiv',function(){ 
```

为我的 btnForDiv 类按钮调用 Onclick 事件，其余的都是 Darren :)

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:21:16.100

你可以在这里做一些事情。

一个想法是将您生成的 ID`div`和`button`ID 存储在一个数组中。然后，您可以在此数组中搜索给定`button`ID 以找到其对应的`div`.

例如（未测试...）

```
 // outside your generatedDiv method
     var myControls = new Array();

     // then inside your generatedDiv method
     var control = new Array();
     control[0] = divId;
     control[1] = buttonId;
     myControls.push(control); 
```

当您单击时，您`button`可以获取其 ID，然后搜索`myControls`数组并查找相应的`div`

您可以在 jQuery 中执行一个函数来处理所有`click`生成的按钮。

再次（未测试） - 给你所有的按钮一个类，例如`btnForDiv`

```
 $(document).ready(function(){

           $(".btnForDiv").click(function(){

              // get the ID of the button
              var id = $(this).prop("id");
              var divId;
              // now find the div Id related to this button
              for (var i = 0, len = myControls.length; i < len; i++){
                if (myControls[i][1] == id){
                   divId = myControls[i][0];
                   break;
                }
              }

              // you now have the div,so toggle it.
              $("#" + divId).toggle();

           });
     }); 
```

我不是 100% 确定你的问题是什么，尽管在黑暗中刺伤帮助..

**更新**

因为您`div`的 's 是动态生成并添加到 DOM 中的，所以您可能必须使用`on`而不是`click`- 这会将`click`事件绑定到动态元素。

所以试试这个：

```
$(".btnForDiv").on("click", function(){

      // get the id.... etc...

}); 
```

另外，请确保您确实将类添加`btnForDiv`到动态生成的按钮中

```
this.firstName + " " + this.surname + "<button style='color: black;' id='" + buttonid +  "b'" + " class='btnForDiv'> Button </button>" + 
```

# java - 为什么这些 html 列表会合并到这个页面中？

> ID：13649374
> 
> 赞同：1
> 
> 时间：2012-11-30T16:41:59.010
> 
> 标签：java, javascript, html, css, jsoup

[`http://www.unc.edu/academics/`](http://www.unc.edu/academics/)

我尝试`ul`使用 Jsoup 从上面的页面中获取所有呈现的 html 列表。

这是我的代码：

```
Document doc = Jsoup.connect("http://www.unc.edu/academics/").get();
Elements lists = doc.select("ul");
for (Element list: lists) {
    Elements li = list.select("li a");
    if (li.size() > 0) {
        ArrayList<String> anchors = new ArrayList<String>();
        for (Element e : li) {
            anchors.add(e.text());
        }
        System.out.println(anchors);
    }
 } 
```

以下是输出：

```
[Calendar, Libraries, Maps, Departments, MyUNC]
[About UNC, Academics, Research, Public Service, Health Care, UNC Global, Arts, Athletics]
[Academic Departments, Continuing Education, Distance Education, Provost, Services and Resources]
[Academic Calendar, Courses, Libraries, Registrar, Sakai]
[College of Arts & Sciences, Dentistry, Education, Eshelman School of Pharmacy, Friday Center for Continuing Education, General College, Gillings School of Global Public Health, Graduate School, Kenan-Flagler Business School, Government, Information & Library Science, Journalism & Mass Communication, Law, Medicine, Nursing, Social Work, Summer School]
[Departments A-Z, Departments by Interest Area]
[American Indian Studies, APPLES Service-Learning, Applied Sciences & Engineering, Archaeology, Bioinformatics & Computational Biology Training, Biological & Biomedical Sciences, Burch Fellows, Business (Undergraduate), Carolina Entrepreneurial Initiative, Christianity & Culture, Cinema, Cognitive Science, Comparative Literature, Communication Studies, Creative Writing, Cultural Studies, Developmental Biology Training, Ethnicity, Culture & Health Outcomes, Environment & Ecology, European Studies, First Year Seminars, Folklore, Genetics & Molecular Biology, Global Studies, Honors, Humanities & Human Values, Institute for Environment, Jewish Studies, Johnston Center for Undergraduate Excellence, Languages Across Curriculum, Latin American Studies, Latina/o Studies, Management & Society, Mathematical Decision Sciences, Mathematical Sciences, Medieval & Early Modern Studies, Middle East/Muslim Civilizations, Molecular Biology & Biotechnology, Molecular/Cellular Biophysics, Morehead-Cain Scholarship, Neurobiology, Peace, War & Defense, Philosophy, Politics & Economics, Program on Health Outcomes, Public Administration, Public Health Leadership, Russian/East European Studies, Robertson Scholars, Sexuality Studies, Social & Economic Justice, SPIRE Postdoctoral Program, Stone Center, Study Abroad, SURE, Toxicology, Transatlantic Master’s Program, Undergraduate Curricula, World View, Writing for Screen & Stage]
[Alert Carolina, Contact, Departments, Directory, Employment, FAQs, ITS, Privacy Policy, Accessibility, RSS Feeds] 
```

您可能会注意到下图中显示的三个列表正在合并为一个，即输出中的第五个列表。

![在此处输入图像描述](../Images/de4a3de592b0efc625629497002cead3.png)

正如您在页面源代码中看到的那样，这三个列表确实是由三个`ul`标签呈现的。它可能与页面中嵌入的 Javascript 或 CSS 有关吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:04:49.670

源代码确实提供了一份清单。

```
<ul class="col3">
<li><a href="http://artsandsci.unc.edu/">College of Arts &amp; Sciences</a></li>
<li><a href="http://www.dentistry.unc.edu/">Dentistry</a></li>
<li><a href="http://soe.unc.edu/">Education</a></li>
<li><a href="http://www.pharmacy.unc.edu/">Eshelman School of Pharmacy</a></li>
<li><a href="http://www.fridaycenter.unc.edu/">Friday Center for Continuing Education</a></li>
<li><a href="http://advising.unc.edu/">General College</a></li>
<li><a href="http://www.sph.unc.edu/">Gillings School of Global Public Health</a></li>
<li><a href="http://gradschool.unc.edu/">Graduate School</a></li>
<li><a href="http://www.kenan-flagler.unc.edu/">Kenan-Flagler Business School</a></li>
<li><a href="http://www.sog.unc.edu/">Government</a></li>
<li><a href="http://sils.unc.edu/">Information &amp; Library Science</a></li>
<li><a href="http://www.jomc.unc.edu/">Journalism &amp; Mass Communication</a></li>
<li><a href="http://www.law.unc.edu/">Law</a></li>
<li><a href="http://www.med.unc.edu/">Medicine</a></li>
<li><a href="http://nursing.unc.edu/">Nursing</a></li>
<li><a href="http://ssw.unc.edu/">Social Work</a></li>
<li><a href="http://summer.unc.edu/">Summer School</a></li>
</ul> 
```

但是 javascript 把它分成了三个独立`<ul>`的 s。

```
jQuery(document).ready(function($) {
    $('div.accordion > ul').makeacolumnlists({
        cols: 3,
        colWidth: '33%',
        equalHeight: false,
        startN: 1
    });
    $('div.accordion > div > ul').accordion({
        autoHeight: false,
        header:'> li > h4',
        collapsible: true,
        active: false
    });
    $('ul.col2').makeacolumnlists({
        cols: 2,
        colWidth: 0,
        equalHeight: false,
        startN: 1
    });
    $('ul.col3').makeacolumnlists({
        cols: 3,
        colWidth: 0,
        equalHeight: false,
        startN: 1
    });
}); 
```

成功了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:58:11.373

嗯....它们不是三个列表，而是一个列表。这是实际的页面代码。如您所见，它只有 1 个`<ul>`标签。它使用 CSS 使其显示为 3 列 ( `class="col3"`)

我假设如果 Chrome 给你的信息不正确，那可能是 Javascript 把你弄乱了。

```
<ul class="col3">
<li><a href="http://artsandsci.unc.edu/">College of Arts &amp; Sciences</a></li>
<li><a href="http://www.dentistry.unc.edu/">Dentistry</a></li>
<li><a href="http://soe.unc.edu/">Education</a></li>
<li><a href="http://www.pharmacy.unc.edu/">Eshelman School of Pharmacy</a></li>
<li><a href="http://www.fridaycenter.unc.edu/">Friday Center for Continuing Education</a></li>
<li><a href="http://advising.unc.edu/">General College</a></li>
<li><a href="http://www.sph.unc.edu/">Gillings School of Global Public Health</a></li>
<li><a href="http://gradschool.unc.edu/">Graduate School</a></li>
<li><a href="http://www.kenan-flagler.unc.edu/">Kenan-Flagler Business School</a></li>
<li><a href="http://www.sog.unc.edu/">Government</a></li>
<li><a href="http://sils.unc.edu/">Information &amp; Library Science</a></li>
<li><a href="http://www.jomc.unc.edu/">Journalism &amp; Mass Communication</a></li>
<li><a href="http://www.law.unc.edu/">Law</a></li>
<li><a href="http://www.med.unc.edu/">Medicine</a></li>
<li><a href="http://nursing.unc.edu/">Nursing</a></li>
<li><a href="http://ssw.unc.edu/">Social Work</a></li>
<li><a href="http://summer.unc.edu/">Summer School</a></li>
</ul> 
```

# java - Swing计时器的浮点值？

> ID：13649375
> 
> 赞同：0
> 
> 时间：2012-11-30T16:42:03.447
> 
> 标签：java, swing, graphics, timer

考虑以下 Swing 计时器：

```
timer = new Timer (ballSpeed, tc); 
```

`ballSpeed`最初是 10.`tc`是一个 Action Listener 类，它增加屏幕上绘制的对象的 x 值。这个变量`ballSpeed`有点用词不当，因为值越低，对象移动得越快。

现在我希望对象的运动看起来尽可能平滑。因此，我只会在 ActionListener 中将 x 值一一递增。也就是说，对象只能逐个像素地移动。我使用`x++`而不是`x+=10`. 因此我不会以这种方式修改球的速度。

现在，由于 的第一个参数`Timer`只接受一个整数，所以它不能让我对对象的速度有很大的控制。我只能使用 10、9、8 等。对象移动得太快或太慢。

总而言之，毫秒精度是不够的。

有没有解决的办法？或者有没有更好的方法来实现屏幕上的对象移动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:27:23.290

A`javax.swing.Timer`没有足够的准确度或精度来生成您想要实现的平滑图形。此外，摇摆计时器会[受到摇摆事件队列中其他任何东西的影响](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)：

> 其次，它的自动线程共享意味着您不必采取特殊步骤来避免产生过多线程。相反，您的计时器使用与使光标闪烁、工具提示出现等相同的线程。

如果您不想使用某些媒体框架或使用描述对象运动的 API（而不是实际移动对象），则应使用摇摆计时器作为安排下一次计算的一种方式，但要确定自通过查看上次计算[`System.nanoTime()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#nanoTime%28%29)期间 now 和 nanoTime之间的差异来进行最后一次计算。

使用这种方法，您将在动力不足的机器上获得更多锯齿状但更正确的动画。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T17:53:30.757

好的，所以如果你真的想用纳秒，在这个答案的最后是一种使用 ScheduledThreadPool 的方法。但这只是纯粹的疯狂，这可能会导致大量问题，结果令人失望。我真的不会走那条路。

使用 50Hz（即每秒刷新 50 次），您应该能够获得不错的结果。问题是我宁愿放弃每个像素只能移动像素并将球速与移动增加联系起来的假设。

这是一个示例（只需拖动滑块即可查看结果）：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.net.MalformedURLException;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class TestAnimation2 {

    private static final int NB_OF_IMAGES_PER_SECOND = 50;
    private static final int WIDTH = 800;
    private static final int HEIGHT = 600;

    private static final int MIN = 0;
    private static final int MAX = 100;

    private double speed = convert(50);

    private double dx;
    private double dy;

    private double x = WIDTH / 2;
    private double y = HEIGHT / 2;

    private JFrame frame;
    private CirclePanel circle;
    private Runnable job;

    private long lastMove = System.currentTimeMillis();

    protected void initUI() throws MalformedURLException {
        frame = new JFrame(TestAnimation2.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(null);
        circle = new CirclePanel();
        circle.setSize(20, 20);
        frame.add(circle);
        frame.setSize(WIDTH, HEIGHT);
        dx = speed;
        dy = speed;
        final JSlider slider = new JSlider(MIN, MAX);
        slider.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent e) {
                speed = convert(slider.getValue());
                if (dx > 0) {
                    dx = speed;
                } else {
                    dx = -speed;
                }
                if (dy > 0) {
                    dy = speed;
                } else {
                    dy = -speed;
                }

            }
        });
        slider.setValue(50);
        slider.setLocation(0, 0);
        slider.setSize(slider.getPreferredSize());
        frame.add(slider);
        frame.setVisible(true);
        Timer t = new Timer(1000 / NB_OF_IMAGES_PER_SECOND, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                move();
            }
        });
        t.start();
    }

    protected double convert(double sliderValue) {
        return sliderValue + 1;
    }

    protected void move() {
                x += dx;
                y += dy;
                if (x + circle.getWidth() > frame.getContentPane().getWidth()) {
                    x = frame.getContentPane().getWidth() - circle.getWidth();
                    dx = -speed;
                } else if (x < 0) {
                    x = 0;
                    dx = speed;
                }
                if (y + circle.getHeight() > frame.getContentPane().getHeight()) {
                    y = frame.getContentPane().getHeight() - circle.getHeight();
                    dy = -speed;
                } else if (y < 0) {
                    y = 0;
                    dy = speed;
                }
                circle.setLocation((int) x, (int) y);
                circle.repaint();
    }

    public static class CirclePanel extends JPanel {

        public CirclePanel() {
            super();
            setOpaque(false);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(Color.RED);
            g.fillOval(0, 0, getWidth(), getHeight());
        }
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    new TestAnimation2().initUI();
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

这是一个使用计划线程池的示例（非常危险且令人失望）

```
import java.awt.Color;
import java.awt.Graphics;
import java.net.MalformedURLException;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JSlider;
import javax.swing.SwingUtilities;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class TestAnimation2 {
    private static final int WIDTH = 800;
    private static final int HEIGHT = 600;
    private static final int SLOWEST_RATE = 10000000;
    private static final int FASTEST_RATE = 1000;
    private static final int RANGE = SLOWEST_RATE - FASTEST_RATE;

    private static final int MIN = 0;
    private static final int MAX = 100;

    private double dx;
    private double dy;

    private double x = WIDTH / 2;
    private double y = HEIGHT / 2;

    private volatile long delay = convert(50);
    private JFrame frame;
    private CirclePanel circle;
    private Runnable job;

    private long lastMove = System.currentTimeMillis();

    protected void initUI() throws MalformedURLException {
        frame = new JFrame(TestAnimation2.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLayout(null);
        circle = new CirclePanel();
        circle.setSize(20, 20);
        frame.add(circle);
        frame.setSize(WIDTH, HEIGHT);
        dx = 1;
        dy = 1;
        final ScheduledExecutorService sheduledThreadPool = Executors.newScheduledThreadPool(1);
        final JSlider slider = new JSlider(MIN, MAX);
        slider.addChangeListener(new ChangeListener() {

            @Override
            public void stateChanged(ChangeEvent e) {
                delay = convert(slider.getValue());
            }
        });
        slider.setValue(50);
        slider.setLocation(0, 0);
        slider.setSize(slider.getPreferredSize());
        frame.add(slider);
        frame.setVisible(true);
        job = new Runnable() {

            @Override
            public void run() {
                move();
                sheduledThreadPool.schedule(job, delay, TimeUnit.NANOSECONDS);
            }
        };
        sheduledThreadPool.schedule(job, delay, TimeUnit.NANOSECONDS);
    }

    protected long convert(float sliderValue) {
        return (long) (SLOWEST_RATE - sliderValue / (MAX - MIN) * RANGE);
    }

    protected void move() {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                System.err.println("Ellapsed " + (System.currentTimeMillis() - lastMove) + " delay is " + (double) delay / 1000000 + " ms");
                x += dx;
                y += dy;
                if (x + circle.getWidth() > frame.getContentPane().getWidth()) {
                    x = frame.getContentPane().getWidth() - circle.getWidth();
                    dx = -1;
                } else if (x < 0) {
                    x = 0;
                    dx = 1;
                }
                if (y + circle.getHeight() > frame.getContentPane().getHeight()) {
                    y = frame.getContentPane().getHeight() - circle.getHeight();
                    dy = -1;
                } else if (y < 0) {
                    y = 0;
                    dy = 1;
                }
                circle.setLocation((int) x, (int) y);
                frame.repaint();
                lastMove = System.currentTimeMillis();
            }
        });
    }

    public static class CirclePanel extends JPanel {

        public CirclePanel() {
            super();
            setOpaque(false);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            g.setColor(Color.RED);
            g.fillOval(0, 0, getWidth(), getHeight());
        }
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                try {
                    new TestAnimation2().initUI();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    }
} 
```

# date - 访问：按月/年分组，然后如何正确显示日期

> ID：13649378
> 
> 赞同：1
> 
> 时间：2012-11-30T16:42:13.143
> 
> 标签：date, ms-access, group-by

我有一个查询，我想按月和年分组，因此：

```
GROUP BY ... Month(Deductions.USDate), Year(Deductions.USDate) ... 
```

但是由于 GROUP BY，我需要在主选择查询中使用这些东西，因此：

```
SELECT Month(Deductions.USDate)&"/"&Year(Deductions.USDate) 
```

这给了我 8/2012、11/2011 等。这很好，但它是一个字符串，而不是日期，所以我无法正确查询它。

我试过做类似下面的事情，但我得到了一个类型不匹配。怎么了？

```
CDATE("1/"&Month(Deductions.USDate)&"/"&Year(Deductions.USDate) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:10:30.040

我想你正在寻找这个：

```
DateSerial(Year(Deductions.USDate), Month(Deductions.USDate), 1) 
```

这将返回给定年份和月份的日期，并且日期始终设置为 1。

# jquery - 使用 html 或 jquery 的登录表单方法

> ID：13649380
> 
> 赞同：1
> 
> 时间：2012-11-30T16:42:16.700
> 
> 标签：jquery, html, ajax

我一直使用纯 HTML 版本登录，但希望从现在开始使用 jQuery 版本。一个比一个有什么优点或缺点吗？请安全角度。

注意：我将验证变量后端，所以现在不用担心。

谢谢

**纯 HTML**

```
<form name="login" method="post" action="login.php">
    Username: <input type="text" id="username" name="username" /><br />
    Password: <input type="password" id="password" name="password" /><br />
    <input type="submit" id="submit" name="submit" value="Login" />

    <input type="hidden" id="hash" name="hash" value="dynamic has goes here" />
    <input type="hidden" id="trap" name="trap" value="allways empty" />
</form> 
```

**jQuery 风格**

```
$(document).ready(function()
{
    $("#login").submit(function(event)
    {
        event.preventDefault();

        var username = $('#username').val();
        var password = $('#password').val();
        var hash = $('#hash').val();
        var trap = $('#trap').val();

        $.ajax({
            type        : 'POST',
            url         : 'login.php',
            data        : {username:username, password:password, hash:hash, trap:trap},
            dataType    : 'json',
            cache       : false,
            success     : function(response)
            {
                window.location = response.redirect;
            },  
            error       : function(response)
            {
                //Process
            }
        });

        return false;
    });
});

<form name="login" method="post">
    Username: <input type="text" id="username" name="username" /><br />
    Password: <input type="password" id="password" name="password" /><br />
    <button type="submit">Login</button>

    <input type="hidden" id="hash" name="hash" value="dynamic has goes here" />
    <input type="hidden" id="trap" name="trap" value="allways empty" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:10:32.987

从安全的角度来看，如果您单击“发布”表单的提交按钮，您的浏览器将对服务器执行发布请求。如果您使用 jQuery，则 post 请求将完全相同。

我唯一的建议是使用 https。

# android - 如何从 Android Web App 发起呼叫

> ID：13649386
> 
> 赞同：1
> 
> 时间：2012-11-30T16:42:35.027
> 
> 标签：android, web

我正在为安卓手机开发一个网络应用程序，我很好奇是否可以从网络界面向用户发起呼叫。所以基本上，我想在网页上点击某人的电话号码时给某人打电话。

在三星 GT-I9103 上进行测试时，我注意到它具有以下功能：在网页上，当用户点击一个号码时，会显示用于拨打电话的屏幕。所以，有一种方法可以做我想做的事。但是，索尼爱立信不存在这个功能，这让我相信这真的取决于制造商。我对吗？

另外，我检查了 phonegap 文档（[http://docs.phonegap.com/en/2.2.0/index.html](http://docs.phonegap.com/en/2.2.0/index.html)），但找不到我需要的。

那么，有可能做到这一点吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T21:34:40.870

是的，从我读过的内容来看，它通过 JavaScript 有点功能。参考：

```
 http://developer.android.com/guide/webapps/webview.html 
```

部分：**将 JavaScript 代码绑定到 Android 代码**

# javascript - CSS3 图像旋转和重新定位以适应 div

> ID：13649387
> 
> 赞同：3
> 
> 时间：2012-11-30T16:42:37.847
> 
> 标签：javascript, jquery, html, css, rotation

我将从 JS Fiddle 开始：

[http://jsfiddle.net/zy2xy/4/](http://jsfiddle.net/zy2xy/4/)

```
<div id="page" style="position: relative; background: #ccc; width: 500px; height: 600px;">
    <div id="container" style="top: 50px; left: 100px; width: 200px; height: 200px; position: absolute; background: #fff;"> 
        <img src="http://lorempixel.com/200/100/">
    </div>
</div>​​​​​​​​​ 
```

我有一整页 div `#page`，在里面另一个 div`#container`绝对反对`#page`。

我想要实现的是在其中旋转图像`90deg`，`180deg`或者`270deg`始终将该图像移动到`#container`.

我尝试了一点，`transform-origin`但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:54:05.083

设置`position:absolute`为图像

然后计算角度。如果是 90 或 270，则为图像设置 left 和 top 属性。

**代码**

```
$('a').click(function(e) {
    e.preventDefault();
    var angle = $(this).attr("id");
    console.log("angle");
    var $container = $('#container');
    var left = 0;
    var top = 0;
    if(+angle === 90 || +angle === 270){
        top = 50;
        left = -50;
    }
    $("#my_image").css({
      transform: 'rotate('+angle+'deg)',
      '-moz-transform': 'rotate('+angle+'deg)',
      '-webkit-transform': 'rotate('+angle+'deg)',
        'top' : top + 'px',
        'left' : left + 'px'
    });
}).click();​  // Fire click on DOM ready 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/zy2xy/5/)**

# java - 用 Java 中的 Scanner 读取文本文件 - 令牌的返回字符

> ID：13649392
> 
> 赞同：0
> 
> 时间：2012-11-30T16:42:59.373
> 
> 标签：java, file-io, io, text-files

我正在尝试在一个简单的 Java 程序中使用[java.util.Scanner读取下面的文本文件。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)

```
0001;GUAJARA-MIRIM;RO
0002;ALTO ALEGRE DOS PARECIS;RO
0003;PORTO VELHO;RO 
```

我使用下面的代码阅读了文本文件：

```
scanner = new Scanner(filerader).useDelimiter("\\;|\\n");
while (scanner.hasNext()) {
    int id= scanner.nextInt();
    String name = scanner.next();
    String code = scanner.next();

    System.out.printf(".%s.%s.%d.\n", name, code, id);
} 
```

结果是：

```
.GUAJARA-MIRIM.RO.1
.
.ALTO ALEGRE DOS PARECIS.RO.2
.
.PORTO VELHO.RO.3
. 
```

但是每行的第三个标记的结果在末尾有一个不方便的 '\r' 字符（ANSI 代码 13）。我不知道为什么（我在格式化字符串上使用了 '.' 字符来明确 '\r' 的位置）。

所以，

1.  为什么在第三个标记的末尾有一个 '\r' ？
2.  如何绕过它。

使用类似的解决方法非常简单`code.substring(0, 2)`，但我想了解为什么那里有一个 '\r' 字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:45:05.187

您正在使用 Windows 文件，该文件`\r\n`用作行分隔符（又名回车换行）。Unix 仅使用`\n`（换行）。

要解决此问题，请添加`\r`到您的扫描仪分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:45:59.307

在某些文件系统（特别是 Windows）中，`\r\n`使用**换行符**。您`\n`仅使用分隔符，因此`\r`请不要使用。还要添加`\r`分隔符。

为了使您的代码更加健壮，请使用`System.lineSeparator()`获取换行符并相应地使用分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:54:00.323

已经给出了发生这种情况的原因，避免这种情况的其他方法是使用`scanner.nextLine()`然后拆分；.

# android - 增强现实 - opengl 或画布

> ID：13649397
> 
> 赞同：0
> 
> 时间：2012-11-30T16:43:10.180
> 
> 标签：opengl, canvas, android, augmented-reality

我正在创建一个增强现实应用程序，我想在相机表面绘制 POIS。我想问一下[opengl](/questions/tagged/opengl "显示标记为“opengl”的问题")和[canvas](/questions/tagged/canvas "显示标记为“画布”的问题")中的一个是否适合增强现实应用程序，这两种方法都有哪些好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:49:22.397

使用**andengine的****增强现实**插件jar[从这里下载](https://github.com/nicolasgramlich/AndEngine)

# javascript - 成功回调前修改 JSONP 结果

> ID：13649399
> 
> 赞同：2
> 
> 时间：2012-11-30T16:43:20.993
> 
> 标签：javascript, jquery, jsonp, jquery-deferred

我想从外部服务加载一些 JSON 数据。然而，它提供

```
{ foo: ..., bar: ..., useful: {...} } 
```

而我真正关心的是“有用”的部分。我只需要将那部分传递给`success`回调。

我正在尝试使用`Deferred`一次从多个数据源加载——像[这样](https://stackoverflow.com/questions/4869609/how-can-jquery-deferred-be-used#4874732)。我想检索数据，“按摩”结果，并将上面示例中的“有用”部分实际传递给`then`回调。我的理解是，当你传递一个`Deferred`to`when()`时，数据直接进入传递给的回调`then()`，所以我需要在它到达之前挂钩到该进程。

我试过`dataFilter`了，但对于 JSONP 这是[不可能的](http://forum.jquery.com/topic/1-5-ajax-datafilter-not-working)。有没有其他方法可以拦截这些结果？我可以在`then()`回调中添加一些检查，以处理与“新鲜”结果不同的缓存数据，但这`Deferred`首先失去了魔力。

为了澄清，这不起作用：

```
$.when($.ajax({
  url: "host/service",
  dataType: "jsonp",
  dataFilter: function(data, type){
    return data.useful; // throws, data === undefined
  }
})).then(function(usefulStuff){ ... }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:45:56.550

您可以调用`.pipe()`来处理数据并创建一个新的 Deferred：

```
$.getJSON(...).pipe(function(results) {
    return ...;
}) 
```

# python - 为什么“模块”对象不可调用？

> ID：13649403
> 
> 赞同：1
> 
> 时间：2012-11-30T16:43:38.743
> 
> 标签：python, object, module, callable

> **可能重复：**
> [TypeError：“模块”对象不可调用](https://stackoverflow.com/questions/4534438/typeerror-module-object-is-not-callable)

这是我第一次尝试 Python，只是想在沉寂 10 年之后重新获得基本的编程知识，对我来说，Python 是一种新语言。基本思想是一个小型的battly引擎，它决定了更好的打击。接下来是错误代码。

```
self.__power = self.__att*random(2,4)/dier.__defn 
```

由于我的 python 知识非常基础，我很害怕说正确的话，所以我会把我的代码放在下面（47 行），你会注意到它真的很透明，所以我不怀疑这会带来任何问题。错误行是 16。尽管出现了新错误，但我尝试将 att 变量重命名为 atta 以及一些重新定位，我解决了它们，最后它总是在同一行出现相同的错误。

```
class Character:
def __init__(self,name="", att=0,defn=0,lvl=0,leven=0,exp=0, power=0):
        self.__att = att
        self.__defn = defn
        self.__lvl = lvl
        self.__leven = leven
        self.__name = name
        self.__xp = exp
        self.__power = power

    def batl(self):
        import random
        while self.__lvl <= 3:
            dier = Character("Anaconda",1,1,50,1,0,0)
            print "You encountered an " + dier.__name + " and fight it."
            **self.__power = self.__att*random(2,4)/dier.__defn**
            dier.__power = (dier.__att*random(1,4))/self.__defn
            if self.power > dier.power:
                growth = dier.__lvl*dier.__atta
                groei()
            else:
                dmg = dier.lvl*dier.att
                leven = leven-dmg
            if leven < 0:
                print "Alas, you're done for."
                exit()
            else:
                print "You took " + dmg + "damage and have " + leven + "life left."

    def groei(self):
        if (growth+exp) > 100:
            lvl += 1
            exp = growth-100
            print "You won and gained " + str(growth) + " and grew from level " + str(lvl-1) + " to level " + str(lvl) + "."
        else:
            exp = growth + exp
            print "You won and gained " + str(growth) + "." 
```

定义主（）：

```
hero = Character("Nevery",2,1,2,100,0,0)
hero.batl() 
```

如果**名称**== '**主要**': main()

正如你所看到的，我得到了我的角色类，我在其中定义了battle() 方法和groei() 方法，非常基本。谁能指出我错过了什么，已经看了几个小时。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:45:41.140

[`random`](http://docs.python.org/2/library/random.html)是模块，而不是功能。你需要打电话[`random.random`](http://docs.python.org/2/library/random.html#random.random)。你也可以`from random import random`，但在这种情况下我会选择第一个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:45:53.503

使用`random.random()`而不是`random`？

# c - C 代码不起作用

> ID：13649407
> 
> 赞同：0
> 
> 时间：2012-11-30T16:43:51.030
> 
> 标签：c

```
/*
 * main.c
 *
 *  Created on: Nov 30, 2012
 *      Author: mfb
 *
 *      Example input:
 *      5 5 2 2 0 0
 *  y0  . . . . .
 *  y1  a a a a .
 *  y2  . . . a .
 *  y3  . a a a .
 *  y4  . . . . .
 *
 *  x>  0 1 2 3 4
 *      I don't know why when I enter these to the program it comes to 4,4 and stops.
 */

#include <stdio.h>
int spx, spy, fx, fy, xsize, ysize;

char *inmap, *check;

int input(void) {
    scanf(" %d %d %d %d %d %d", &xsize, &ysize, &fx, &fy, &spx, &spy);
    inmap = (char *) malloc(xsize * ysize * sizeof(char));
    check = (char *) malloc(xsize * ysize * sizeof(char));

    int y;
    for (y = 0; y < xsize * ysize; y++)
        *(check + y) = 0;

    char o;
    for (y = 0; y < ysize * xsize; y++) {
        scanf(" %c", &o);
        if (o == '.')
            *(inmap + y) = 1;
        else
            *(inmap + y) = 0;
    }
    return 0;
}

int itaw(char *map, int fpx, int fpy) {
    if (*(check + fpy * xsize + fpx) == 1)
        return 0;
    else
        *(check + fpy * xsize + fpx) = 1;

    if (fpx >= xsize || fpy >= ysize || fpx < 0 || fpy < 0)
        return 0;

    if (*(map + fpy * xsize + fpx) == 0 || *(map + spy * xsize + spx) == 0)
        return 0;

    printf("(%d,%d)\n", fpx, fpy);
    if (fpx == spx && fpy == spy)
        return 1;

    return (itaw(map, fpx - 1, fpy) || itaw(map, fpx, fpy - 1)
            || itaw(map, fpx + 1, fpy) || itaw(map, fpx, fpy + 1));
}

int main(void) {
    input();
    int result = itaw(inmap, fx, fy);
    printf("%d\n", result);
    return 0;
} 
```

上面是一个在两点之间找到路的程序。'。' 表示方式，所有其他字符表示墙壁。它大部分都有效，但是当我输入上面写的内容时，它返回 0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T17:08:35.597

问题是您在访问变量之前没有进行边界检查。在访问之前，您必须确保它们大于 0 且小于 max `check`。我认为这是正确的版本：

```
int itaw(char *map, int fpx, int fpy) {
    if (fpx >= xsize || fpy >= ysize || fpx < 0 || fpy < 0)
        return 0;
    if (*(check + fpy * xsize + fpx) == 1)
        return 0;
    else
        *(check + fpy * xsize + fpx) = 1; 
```

# php - 将 Codeigniter 2 与 phpspec2 集成

> ID：13649408
> 
> 赞同：1
> 
> 时间：2012-11-30T16:43:55.380
> 
> 标签：php, codeigniter, xampp, bdd, phpspec

我想将 phpspec2 与 CodeIgniter 2 集成。我已经使用 composer 成功安装了 phpspec，如[phpspec website](http://phpspec.net)中所述。现在我想将它集成到我的 CodeIgniter 2 安装中。我找到了[AniDear](http://blog.anidear.com/2012/11/using-phpspec-with-codeigniter.html)关于这个主题的一篇文章，并按照描述做了所有事情。但是，当我运行时`bin/phpspec`出现错误：

```
PHP Warning: require(core/Common.php): failed to open stream: No such file or directory 
in  C:\xampp\htdocs\eljotengine\spec\ci_bootstrap.php on line 37

Warning: require(core/Common.php): failed to open stream: No such file or directory in C:\xampp\htdocs\eljotengine\spec\ci_bootstrap.php on line 37 
```

等等。我的文件结构如下所示：

```
eljotengine
|-application
|-sytem
|- ... other CI
|-spec
| |- ci_bootstrap.php 
```

我在 Windows 7 上使用 xampp。我的`ci_bootstrap.php`文件看起来像上面提到的 AniDear 文章中的那个。

我试图更改`ci_bootstrap.php`文件中的路径（这似乎是问题所在）但它并没有太大变化。

任何想法如何使这项工作？

问候:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:44:23.090

我也遇到了 PHPSpec2 的问题。因为我只用 PHPSpec（不是 PHPSpec2）尝试过，我建议你安装 PHPSpec。只需将文件 composer.json 更改`"phpspec/phpspec2": "*"`为`"phpspec/phpspec": "*"`，然后`composer update`再次运行。

通过在项目路径上使用命令运行此 phpspec，`vendor\bin\phpspec.php.bat spec`而“spec”是包含规范文件的文件夹。

而且由于您是从项目目录运行 phpspec，我建议更改 ci_bootstrap.php 中的内容，如下所示

```
define('BASEPATH',realpath('system/').'/'); //set absolute path to CI system/
define('APPPATH', 'application/'); //set relative path to CI application
set_include_path(
    get_include_path().PATH_SEPARATOR.
    realpath(APPPATH).PATH_SEPARATOR.
    realpath(BASEPATH).PATH_SEPARATOR.
    'spec');  //adding 'spec' in path, for easily do require 'ci_bootstrap.php' from inside spec files

require BASEPATH.'core/Common.php';
require APPPATH.'config/constants.php';
require BASEPATH.'core/Controller.php'; 
```

# python - 从 web2py 外部导入 gluon.html 的问题

> ID：13649411
> 
> 赞同：0
> 
> 时间：2012-11-30T16:44:02.223
> 
> 标签：python, web2py

我想尝试`web2py`在`web2py`. 通过这种方式，我可以在命令行上测试组件，并生成简单的 html 文件，我可以在将它们与完整的`web2py`应用程序堆栈集成之前对其进行分析。这加快了我的开发周期，因为我可以专注于微调组件的 HTML 而无需担心任何其他问题（重新部署、数据库等）。快速简单：准备一个带有`gluon.html`helpers 的 web2py 组件，看看生成的 HTML 是否好看，*然后*在`web2py`.

测试基本上是成功的。我只需要：

```
from   gluon.html                import A, TABLE, DIV, SPAN, THEAD, TR, TH, TBODY, URL, H1

def T(txt):
    return txt

def my_simple_component(title):
    return H1(T(title))

def test():
    print my_simple_component('Hello') 
```

这会产生预期的输出：

```
$ python test_web2py_components.py
<h1>Hello</h1> 
```

（我不关心`T`我的测试。对于`URL`我想使用的任何测试，我只传递一个假的应用程序/控制器/函数。）

我发现的唯一问题是我需要一个符号链接才能`web2py`进行`gluon.html`导入，即使 gluon 在 PYTHONPATH 上也是如此。

```
ln -s /install_dir/web2py/gluon/ . 
```

**有没有办法在没有额外链接的情况下导入胶子组件？**

考虑到在测试阶段我的组件在 web2py 应用程序树之外。

这是我得到的错误：

```
Traceback (most recent call last):
  File "lib_test1.py", line 4, in <module>
    from   gluon.html                import A, TABLE, DIV, SPAN, THEAD, TR, TH, TBODY, URL
  File "/install_dir/web2py/gluon/__init__.py", line 15, in <module>
    from globals import current
  File "/install_dir/web2py/gluon/globals.py", line 24, in <module>
    from serializers import json, custom_json
  File "/install_dir/web2py/gluon/serializers.py", line 11, in <module>
    from languages import lazyT
  File "/install_dir/web2py/gluon/languages.py", line 264, in <module>
    PLURAL_RULES = read_possible_plurals()
  File "/install_dir/web2py/gluon/languages.py", line 250, in read_possible_plurals
    for pname in os.listdir(pdir):
OSError: [Errno 2] No such file or directory: '/current_dir/gluon/contrib/rules' 
```

（不要考虑`install_dir`和`current_dir`：他们已经为这个问题引入了）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T15:17:00.193

您不必建立链接。

如果您希望导入找到“gluon”，则应位于 PYTHONPATH 的文件夹是其父文件夹：sys.path.insert(0,'/install_dir/web2py')。

这有效，（这里的 zip 包含胶子文件夹）：

```
>>> import sys
>>> sys.path.insert(0, 'C:\web2py\library.zip')
>>> from gluon.html import H1
>>> print H1("Hello")
<h1>Hello</h1> 
```

# haskell - 自定义 Prelude 模块——坏主意？

> ID：13649415
> 
> 赞同：7
> 
> 时间：2012-11-30T16:44:19.720
> 
> 标签：haskell

我刚刚意识到我可以定义自己的 Prelude 模块并仔细控制它的导出。这被认为是不好的做法吗？

优点：

*   无需在大型项目中重复导入“通用”模块。

*   无需写“导入前奏隐藏（catch）”。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T17:32:54.247

一般来说，这是一个坏主意，因为您最终会使用自己的惯用语编写代码，而其他人不容易维护。

要与他人交流，您需要一种共享的符号语言。The`Prelude`是我们的核心语言，所以如果你重新定义它，可能会感到困惑。

此规则的例外是在开发嵌入式领域特定语言时。在那里，制作自定义 Prelude 完全是一个好主意，这也是为什么可以重新定义 Prelude（和内置语法）的原因。

无论如何都有自己的附加模块，但不要覆盖 Prelude。

# php - jQuery-File-Upload 插件重置为 2.1GB

> ID：13649417
> 
> 赞同：1
> 
> 时间：2012-11-30T16:44:19.577
> 
> 标签：php, jquery, jquery-plugins, file-upload

我正在尝试使用**[jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)**插件为大文件实现简单的分块文件上传。我将 GitHub-repo 克隆到一个文件夹中，并将我的更改`main.js`为以下内容：

```
$('#fileupload').fileupload({
    maxChunkSize: 10000000,
    add: function (e, data) {
        var that = this;
        $.getJSON('server/php/', {file: data.files[0].name}, function (file) {
            data.uploadedBytes = file && file.size;
            $.blueimp.fileupload.prototype.options.add.call(that, e, data);
        });
    }
}); 
```

如文档中所述。这适用于最大 2GB 的文件（我可以在控制台和服务器上看到分块），但是当我尝试上传大于 2.1GB 的文件时，会发生以下情况：最后一个数据块将正确附加到现有文件`myUpload.file`，然后脚本将开始编写一个新文件`myUpload.file (1)`，从头开始，客户端和服务器端都不会抛出任何错误。当第二个文件达到 2.1GB 的大小时，也会发生同样的情况。文件的进度计数器将被重置，而整体进度计数器将溢出并告诉我我完成了 142%（和计数）。

我在服务器端运行 PHP 5.3.5。

我已经尝试摆弄 , 的设置`max_post_size`，就像插件的**[常见问题解答](https://github.com/blueimp/jQuery-File-Upload/wiki/Frequently-Asked-Questions)**和关于 SO 的**[这个问题](https://stackoverflow.com/questions/13574542/4gb-http-file-uploads-using-jquery-file-upload-apache-and-php)**`upload_max_file_size`中描述的那样，但没有任何成功。我还在 GitHub 上发现**[了这个](https://github.com/blueimp/jQuery-File-Upload/issues/1787)**听起来很相似的问题，但它在没有任何实际输入的情况下就关闭了。`memory_limit`

除了摆弄`php.ini`设置之外，我对此一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:48:43.557

检查服务器操作系统和文件系统是否支持大文件。非常旧的 32 位系统存在 2GB 及以上的问题。另外我怀疑 32 位框架可能将内部计数器定义为 32 位有符号整数。

这只是计算机基础知识的简单猜测，但值得一试

编辑：这就是您正在寻找的[使用 jQuery-File-Upload、Apache 和 PHP 上传的 4GB HTTP 文件](https://stackoverflow.com/questions/13574542/4gb-http-file-uploads-using-jquery-file-upload-apache-and-php?rq=1)

# php - php fopen fread 图片

> ID：13649418
> 
> 赞同：0
> 
> 时间：2012-11-30T16:44:20.610
> 
> 标签：php

我正在尝试将`tcp`图像从我的 linux php ec2 实例转移到另一台服务器。
当我回显内容时`fopen`，`fread`我可以看到图像已处理但只处理了一半
请问有人知道是什么原因造成的，谢谢。

```
$imageURL = 'http://ec2-**-***-**-**.compute-1.amazonaws.com/New_Era_For_NASA_2.jpg';
$ch = curl_init($imageURL);
curl_setopt($ch, CURLOPT_NOBODY, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$data = curl_exec($ch);
//echo $data;
curl_close($ch);
if ($data === false) {
        die('cURL failed');
}
if ( preg_match('/Content-length: (\d+)/', $data, $matches) || preg_match('/Content-Length: (\d+)/', $data, $matches) ) {
        $size = (int)$matches[1];
}   

$fileHandle = fopen($imageURL, 'rb'); //r or rb
$fileData = fread( $fileHandle, $size );
//echo $fileData;
fclose( $fileHandle );
$data = $fileData;

header('Content-type: image/jpeg'); 
echo $data; 
```

![在此处输入图像描述](../Images/bd15cf5f0b1a45025dca56e578893c8e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:08:56.590

为什么要取两次？卷曲可以一步完成这项工作。IE

```
$imageURL = 'http://upload.wikimedia.org/wikipedia/commons/thumb/e/ec/Tibia_insulaechorab_transparent.png/320px-Tibia_insulaechorab_transparent.png';
$ch = curl_init($imageURL);    

curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);

$data = curl_exec($ch);
curl_close($ch);

if ($data === false) {
        die('cURL failed');
}

header('Content-Type: image/png');
header('Content-Length: ' . curl_getinfo( $ch, CURLINFO_CONTENT_LENGTH_DOWNLOAD ) );
echo $data; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:06:07.430

```
$imageURL = 'http://ec2-**-***-**-**.compute-1.amazonaws.com/New_Era_For_NASA_2.jpg';
$ch = curl_init($imageURL);
curl_setopt($ch, CURLOPT_NOBODY, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
$data = curl_exec($ch);
echo $data;
curl_close($ch); 
```

就够了

```
file_get_content( $imageURL ); 
```

可以工作到 0，但要注意 memory_limit，fread 可能是一个更好的选择。

# jquery - 整数显示为 NaN

> ID：13649427
> 
> 赞同：0
> 
> 时间：2012-11-30T16:45:11.770
> 
> 标签：jquery

我将从发布我的 javascript 开始。

```
 $(document).on('click','.remove-single-inbox-message', function(e){
    e.preventDefault();
    var messageid = $(this).data('messageid');
    var messages = $("#number-messages").html();
    var messages = parseInt(messages, 10);
    messages--;
    $.ajax({
        type: 'POST',
        url: '?a=profile_message_delete',
        data: {
            "messageid" : messageid
        },
        success: function(){
            $('.table-row'+messageid).hide();
            if(messages == 0){
                $("#insert-message-indicator").html("");
            } else {
                $("#insert-message-indicator").html("<strong><small>"+messages+"</small></strong>&nbsp;<i class='icon-envelope icon-white' rel='tooltip' title='New messages available'></i>");
        }
        }
    });
}); 
```

第一次递减工作正常，并显示新数字，但后面的数字显示 NaN。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T16:45:58.673

**可能性 1：**

您在发布时混合了 id，`"#number-messages"`应该是`"#insert-message-indicator"`.

代替

```
var messages = $("#number-messages").html(); 
```

和

```
var messages = $("#number-messages").text(); 
```

您添加的`"<strong><small>"`html 无法解析为整数。

**可能性 2：**

这样做时，`$("#insert-message-indicator").html("<...`您正在擦除带有 id 的元素，`#number-messages`因此`$("#number-messages").html()`在第二次迭代时不会返回任何可用的内容。

**警告 ：**

```
var messages = $("#number-messages").html();
var messages = parseInt(messages, 10); 
```

是一样的

```
var messages = $("#number-messages").html();
messages = parseInt(messages, 10); 
```

你可能应该有类似的东西

```
var messages_text = $("#number-messages").html();
var messages = parseInt(messages_text, 10); 
```

因为您当前的代码令人困惑。

# tidesdk - TideSDK 和原生代码？

> ID：13649433
> 
> 赞同：1
> 
> 时间：2012-11-30T16:45:44.090
> 
> 标签：tidesdk

我刚刚发现了 TideSDK，它似乎是一个非常棒的工具，但我有一个要求：我需要使用一些本机代码（例如用于管理 USB 设备），因此我需要在本机代码和 Web 应用程序之间进行通信，用 TideSDK 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T00:39:15.267

是的，可以在 TideSDK 中使用本机代码。我们的 SDK 是模块化的，我们一直在结构上重新组织代码，以便更容易地做你想做的事情。在模块化级别上，您通常会与对多个平台的支持进行竞争。

一个模块应该扩展到您支持的所有平台。我们希望有文档来帮助开发人员（熟悉原生代码）更好地理解 SDK。这应该包括一些模块样板来帮助您入门。在这一点上，我们还没有准备这个更详细的文档。尽管在 TideSDK 中付出了巨大的努力，但我们还有很多事情要做，有时进展似乎很缓慢。

TideSDK 是一个庞大而复杂的 SDK，但不要让这吓到你。它是可扩展的，我们将很快通过模块开发指南来阐明这一点。在 IRC 上与您讨论更多关于此的内容会很酷，因此请随时访问。也许您所说的功能是通用的，即。为每个人扩展 API。

有可能与 TideSDK 的核心开发人员在模块上合作，并为这个伟大的开源项目做出贡献。其他可能性还包括赞助模块开发，如果这是您对项目更立即需要的东西。希望这可以帮助。

# ruby-on-rails - 使用 JRuby 的 Rails 控制台问题：无提示符、无制表符补全、箭头键损坏等

> ID：13649437
> 
> 赞同：10
> 
> 时间：2012-11-30T16:45:56.667
> 
> 标签：ruby-on-rails, jruby, rails-console

我在 JRuby 下的 Rails 控制台遇到了各种问题，包括

*   无提示符
*   `Tab`完成不工作（文字标签被插入）
*   向上/向下箭头不浏览历史记录（`^[[A`或`^[[B`分别插入）
*   左/右箭头不移动光标（`^[[D`或`^[[C`分别插入）
*   `Home`/`End`键不将光标移动到行的开头/结尾（分别代替`1~`或`4~`插入）；`Ctrl`+ `a`/ `Ctrl`+`e`虽然工作
*   `Ctrl`+`c`杀死控制台而不是杀死我正在输入的行
*   `Ctrl`+`d`在我点击之前没有任何效果`Enter`（然后执行我在`Ctrl`+`d`和`Enter`我的 Unix shell 之间输入的任何内容）。

我从 rvm 安装了我的 JRuby 解释器，如下所示：

```
rvm install jruby-1.6.8 --1.9 
```

我的 Rails 项目是使用 Bundler（不是 rvm gemsets）管理的，所以我使用`bundle exec rails c`. 有趣的是，除了/键和+需要一个新的提示行之前，raw`irb`和`bundle exec irb`上面的大多数问题都没有。`Home``End``Ctrl``c``Enter`

我可以用准系统 Rails 复制这个问题`Gemfile`：

```
source 'https://rubygems.org'
gem 'rails', '3.2.6'
gem 'sqlite3' 
```

我的外壳是`zsh`，在 Ubuntu 12.04 64 位上。`$JAVA_HOME`是`/usr/lib/jvm/java-7-openjdk-amd64`，但是当我安装这个解释器时它可能仍然是 java-6，如果这很重要的话。

**更新：一些修复**

缺少提示字符显然是由Rails 控制台`IRB.conf[:PROMPT_MODE]`设置为引起的。`:NULL`对于常规`irb`，我的设置为`:RVM`（显然 rvm 在 中执行此操作`~/.rvm/scripts/irb.rb`；我通过注释掉脚本排除了 rvm 导致此问题的可能性）。提供一个`:PROMPT_MODE`值来`~/.irbrc`解决这个问题。我想也许一个类似的问题是通过更改and导致`Ctrl`+ `c`/ `Ctrl`+问题，但它们都设置为默认值。`d``:IGNORE_SIGINT``:IGNORE_EOF`

`:USE_READLINE`通过设置为 true，可以修复 Tab 补全和箭头键。

这是我目前`~/.irbrc`似乎可以解决上述问题的电流：

```
require 'irb/completion'

IRB.conf[:PROMPT_MODE]  = :SIMPLE
IRB.conf[:USE_READLINE] = true
IRB.conf[:AUTO_INDENT]  = true 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-04T22:47:55.883

使用以下命令运行控制台为我解决了这些问题：

```
jruby -Xlaunch.inproc=true -S rails c 
```

如果您不喜欢每次都运行该命令，则可以设置一个环境变量：

```
set JRUBY_OPTS=-Xlaunch.inproc=true 
```

或者

```
export JRUBY_OPTS=-Xlaunch.inproc=true 
```

然后

```
rails c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-21T20:26:08.513

我在 Windows 上遇到了这个问题，解决方法是在命令提示符设置中增加“缓冲区数”。命令提示符 -> 属性 -> 选项 -> 缓冲区数 默认为 4，我改为 8 并且一切正常（但我认为 5 可以）

# c# - 如何使用 LINQ 在 C# 中解析 XML 文件？

> ID：13649440
> 
> 赞同：0
> 
> 时间：2012-11-30T16:46:01.230
> 
> 标签：c#, asp.net, xml, asp.net-mvc, linq

我有这个 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<NewSounds>
    <Artists>
      <Artist>Avril Lavigne</Artist>
      <Artist>Bob Marley</Artist>
      <Artist>Coldplay</Artist>
    </Artists>

  <Genres>
    <Genre>Rock</Genre>    
    <Genre>Jazz</Genre>
    <Genre>Metal</Genre>
  </Genres>
</NewSounds> 
```

如何在 LINQ 中解析这个简单的 XML 文件？我对LINQ知之甚少，这就是我所拥有的：

```
var artists = xml.Descendants("Artists")
                    .Elements("Artist")
                    .Select(a => new Artist {
                        Name = a.Element("Artist").Value
                    }).ToArray(); 
```

问题是，它会在零件上引发`System.NullReferenceException: Object reference not set to an instance of an object.`错误`.Select`（可能是因为它找不到值？）。

我想遍历 XML 并获取`<Artist>`and`<Genre>`标记内的相关部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T16:47:42.197

`a`在您的`Select()`回调中是`<Artist>`元素。 `a.Element("Artist")`不是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:48:48.517

将元素转换为字符串，而不是访问`Value`属性。在这种情况下，如果元素为空，您将不会得到异常：

```
var artists = xml.Descendants("Artists")
                    .Elements("Artist")
                    .Select(a => new Artist {
                        Name = (string)a.Element("Artist")
                    }).ToArray(); 
```

# r - 如何将确切的 index() 分配给 xts 对象

> ID：13649443
> 
> 赞同：1
> 
> 时间：2012-11-30T16:46:20.747
> 
> 标签：r, xts, posixct

我想设置 xts 对象的特定日期，但它会将日期转移一天。

```
aapl <- as.xts(read.zoo(textConnection("

    2007-04-26, 98.84
    2007-04-27, 99.92
    2007-04-30, 99.80
    2007-05-01, 99.47
    2007-05-02, 100.39"), sep=","))

  idx_aapl <- index(aapl)

  idx_aapl

  xts:::index.xts(aapl)  # makes no difference

  idx_aapl <- idx_aapl + 1

  idx_aapl 
```

如何分配显示的具体日期？我已经阅读了有关 posixct 的一些内容，但我不知道如何将其分配给索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T01:24:57.973

您需要指定时区。例如

```
aapl <- as.xts(read.zoo(textConnection("
    2007-04-26, 98.84
    2007-04-27, 99.92
    2007-04-30, 99.80
    2007-05-01, 99.47
    2007-05-02, 100.39"), sep=",", tz="UTC")) 
```

这是因为日期戳是 POSIXct，这意味着它们也有时间组件。

解决它的另一种方法是应用全球时区。例如，将其放在现有脚本的顶部，也可以很好地加载数据：

```
Sys.setenv(TZ = "UTC")
library(xts)
... 
```

# joomla - 如何在实时的 Joomla 2.5 站点中测试新添加的功能

> ID：13649444
> 
> 赞同：0
> 
> 时间：2012-11-30T16:46:26.083
> 
> 标签：joomla, joomla2.5, jumi

我在 Joomla! 上开发一个动态站点，大部分编码都是在 Juni 模块和组件中完成的。

我有一些动态功能，**我想在我已经发布的网站上对其进行测试**，我担心如果出现任何问题，请将其附加到已发布的网站上。

我想问一下Joomla 有没有插件模块！这使我可以在已发布的站点上测试我的动态功能，以及是否有任何扩展可以将我的站点恢复到以前的状态（例如我的站点的版本控制系统...）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:09:08.793

哪里有你可以做的快速清单：

*   最简单的方法是[安装 Joomla！在您自己的计算机](http://docs.joomla.org/Use_Joomla!_on_your_own_computer)上，您可以毫无顾虑地测试所有内容

*   要使您的网站像“版本化”或进行完整备份，最常用和最受信任的解决方案是[AkeebaBackup](https://www.akeebabackup.com/)。

*   我的建议是**不要在没有备份的情况下直接使用实时网站**，特别是如果你正在“测试”东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T11:48:44.410

实际上，我认为首先在与实时站点完全相同的服务器环境中的副本上进行测试更有意义。

如何进行现场测试始终是一件困难的事情，迟早你必须这样做，但你希望尽可能多地完成测试而不做它。根据功能的呈现方式，您可以使用 acl 来防止将其呈现给普通用户。

# c# - 现有的 .net Web 应用程序需要更改身份验证

> ID：13649445
> 
> 赞同：1
> 
> 时间：2012-11-30T16:46:40.603
> 
> 标签：c#, .net, security, login

我继承了现有的 .net Web 应用程序。它是一个外部网站，供外部用户和内部用户使用。要登录/验证内部用户，它使用 LDAP 验证。外部用户转到不同的数据库。

我的 IT 部门想要改变内部用户的登录方式。他们不想让外部服务器能够使用 LDAP 访问 AD。从外部服务器访问 AD 是否有更安全的方法？还是根本不推荐？

另外，登录的设计是否有缺陷？内部和外部用户是否应该以相同的方式登录？登录用户的最佳实践是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T21:24:38.967

您可以为此使用 ADFS（Active Directory 联合服务）。

这将要求您在网络内安装 ADFS 服务器（以便它可以联系 AD）。

ADFS 服务器包含一个基于 Web 的 STS（安全令牌服务），以允许网页使用 AD 帐户登录。

基本上简而言之，它将按以下方式工作：

1.  您的用户导航到外部 Web 应用程序
2.  Web 应用程序会将用户重定向到 ADFS STS 服务器。
3.  ADFS STS 服务器将验证您的凭据（通过使用集成安全性或基于 Web 的登录框）
4.  如果 ADFS STS 服务器对凭据感到满意，它将使用登录令牌作为额外信息将用户重定向回外部 Web 应用程序。此令牌包含有关用户的信息（可以配置）。它由 ADFS 服务器签名（以确保信息是真实的），并且可以选择加密。
5.  外部 Web 应用程序提取令牌并测试签名。如果一切正确，Web 应用程序将授予用户应具有的权限。

有关在 ASP.NET 应用程序中进行设置的信息，您可以参考以下网址：http: [//blogs.msdn.com/b/alextch/archive/2011/06/27/building-a-test-claims-意识到-asp-net-application-and-integrating-it-with-adfs-2-0-security-token-service-sts.aspx](http://blogs.msdn.com/b/alextch/archive/2011/06/27/building-a-test-claims-aware-asp-net-application-and-integrating-it-with-adfs-2-0-security-token-service-sts.aspx)

# c# - Jenkins 构建中的“AssemblyInfo”MSBuild 任务失败

> ID：13649446
> 
> 赞同：3
> 
> 时间：2012-11-30T16:46:42.553
> 
> 标签：c#, msbuild, jenkins

我在 Jenkins 上遇到了这个构建错误。我将不胜感激任何帮助寻找解决方案，甚至有人指出我正确的方向。

这是我得到的错误：

> “D:\Jenkins\jobs*REDACTED*\workspace\CAPS.msbuild”（默认目标）（1）->（编译目标）-> 错误 MSB4018：“AssemblyInfo”任务意外失败。System.ArgumentException：版本参数名称：指定的字符串在 Microsoft.Build.BackEnd 的 Microsoft.Build.Extras.AssemblyInfo.Execute() 中的 Microsoft.Build.Extras.Version.ParseVersion(String version) 不是有效的版本号。 TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute() 在 Microsoft.Build.BackEnd.TaskBuilder.d__20.MoveNext()

我已经验证了 AssemblyInfo.cs 文件看起来都不错（据我所知），并且解决方案的 msbuild 文件似乎没有任何问题。

我已经用谷歌搜索了我能想到的错误的所有推导。

任何意见，将不胜感激。

**评论回复：**

从 AssemblyInfo.cs 文件中：

```
[assembly: AssemblyVersion("2.0.*")] 
```

从 msbuild 文件中：

```
<PropertyGroup>
    <ProjectName>CAPS</ProjectName>
    <Configuration Condition=" '$(Configuration)' == '' ">Release</Configuration>
    <VersionLabel Condition=" '$(VersionLabel)' == '' ">0.0</VersionLabel>
    <AssemblyVersion>2.0.$(VersionLabel)</AssemblyVersion>
</PropertyGroup> 
```

这也可能是相关的：

```
<Target Name="Compile">
        <ItemGroup>
            <UpdateFiles Include="**\AssemblyInfo.cs" Exclude="**\.svn\**" />
        </ItemGroup>
        <AssemblyInfo AssemblyInfoFiles="@(UpdateFiles)" AssemblyVersion="$(AssemblyVersion)" AssemblyFileVersion="$(AssemblyVersion)"/>

        <MSBuild Projects="$(ProjectName).sln" Properties="Configuration=$(Configuration);RunCodeAnalysis=true" />
</Target> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:28:05.727

我的猜测是您对 VersionLabel 变量的使用没有解析，它正在尝试将文字 2.0.$(VersionLabel) 写入 AssemblyInfo 文件。

附带说明：您将 AssemblyVersion 和 AssemblyFileVersion 设置为相同的数字，在强命名情况下，您将无法热交换 Dll。通常 AssemblyVersion 将是“2.0”，而您的 AssemblyFileVersion 将是“2.0.13345.02”或任何您的编号方案。这样，一个在 2 周内构建的 dll 将具有 '2.0' 并说 '2.0.13352.01' 可以被换入并且仍然可以工作。

如果您每次都发布整个包，这可能并不重要，但您没有正确使用这些字段。

从另一个问题看到这个[答案](https://stackoverflow.com/questions/64602/what-are-differences-between-assemblyversion-assemblyfileversion-and-assemblyin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T07:51:35.800

这是任务中的一个错误，如果您将程序集信息中的 [assembly: AssemblyVersion("2.0.*")] 更改为版本号 [assembly: AssemblyVersion("2.0.0.0")] 它将起作用。

# machine-learning - 在 3 层 MLP 中，为什么隐藏权重的输入应该是随机的？

> ID：13649449
> 
> 赞同：0
> 
> 时间：2012-11-30T16:46:49.983
> 
> 标签：machine-learning, neural-network

例如，对于 3-1-1 层，如果权重初始化相同，则 MLP 可能无法很好地学习。但是为什么会这样呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:59:46.143

您的问题标题中似乎有错字。我猜你的意思是为什么隐藏层的*权重应该是随机的。*对于您指出的示例网络（3-1-1），这无关紧要，因为您在隐藏层中只有一个单元。但是，如果您在全连接网络的隐藏层中有多个单元（例如，3-2-1），您应该随机化权重，因为否则，隐藏层的所有权重都将*相同*地更新。这不是您想要的，因为每个隐藏层单元都会产生相同的超平面，这与该层中只有一个单元没有什么不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:25:57.857

如果隐藏层中只有一个神经元，那没关系。但是，想象一个在隐藏层中有两个神经元的网络。如果它们的输入具有相同的权重，那么两个神经元将始终具有完全相同的激活，那么拥有第二个神经元就没有额外的信息。在反向传播步骤中，这些权重会发生相同的变化。因此，在每次迭代中，那些隐藏的神经元都具有相同的激活。

# css - 从父元素覆盖/删除背景图像

> ID：13649450
> 
> 赞同：4
> 
> 时间：2012-11-30T16:46:58.533
> 
> 标签：css, overriding, background-image

设想

html

```
<div id='fractal'>
  <div class='centerdotline'>
    <span>Some text</span>
  </div>
</div> 
```

css

```
#fractal {
 background-image:url('fractal.jpg');
 background-repeat: repeat;
}
.centerdotline {
 background-image:url('dotline.png'); /* with alpha channel */
 background-repeat: repeat-x;
 background-position: center;
}
.centerdotline span {
 padding: 0 20px;

 /*
 override centerdotline background-image
 */
} 
```

我想删除`centerdotline`div ( parent ) background-image 但不是`fractal`div background-image。
我无法在这个元素中设置背景图像（就像一块 fractal.jpg），因为我不知道元素相对于`fractal`div的确切位置

感谢帮助

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T14:42:36.327

## 也许这种解决方法

不知道具体的参数是什么，以下解决方案可能对您有用，也可能没用。但是，我提供它，以防它对您的情况有用。

[这是小提琴的例子](http://jsfiddle.net/2aeVs/12/)。HTML 就像您拥有的一样。我删除了你说没有必要`line-height`的那个。`span`如果您这样做，则需要在下面相应地调整伪元素`height`。该高度应大致匹配`line-height`，通常约为`1.1`or `1.2`，但如果设置为 ，则`500px`需要`height`为伪元素。

**CSS**

```
#fractal {
    background-image:url('http://marcomolina.com.br/lab/fractal.jpg');
    background-repeat: repeat;
    width:500px;
    height:500px;  
}
.centerdotline {
    position: relative; /* using this to place the dots */
    text-align:center;
}

/* your span can also be set to display: inline-block and have top padding or margin */
.centerdotline span {
    padding: 0 20px;

 /*
 Did not remove, but skipped centerdotline background image by not putting the background there to keep the background of fractal div behind the text
 */
}

/* put the dots in pseudo-elements and position off .centerdotline edges */

.centerdotline span:before,
.centerdotline span:after {
    content: '';
    position: absolute;
    height: 1.2em; /* this might vary slightly by font chosen */
    width: 40%; /* this will vary by text size */
    background-image:url('http://marcomolina.com.br/lab/dotline.png'); /* with alpha channel */
    background-repeat: repeat-x;
    background-position: center;
}

.centerdotline span:before {
    left: 0;
}

.centerdotline span:after{
    right: 0;
} 
```

# javascript - 为什么使用 twitter bootstrap 的多个模式会出现错误太多递归？

> ID：13649459
> 
> 赞同：61
> 
> 时间：2012-11-30T16:47:41.520
> 
> 标签：javascript, jquery, twitter-bootstrap

我尝试在另一个模态中使用模态。但是，我遇到了一个类似于`too much recursion`Firefox 的错误。

我使用了最新的 jQuery 和 Twitter 引导程序，但仍然有这个问题。

这是显示错误的[plunker](http://plnkr.co/edit/aC74s8)

您可以在控制台中找到错误`Uncaught RangeError: Maximum call stack size exceeded`或`too much recursion`

有谁知道如何修理它？谢谢

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-04-06T21:20:50.917

您可以应用 maxisam 答案的第一个解决方案，而无需修改引导文件（如果您不能或不想）。

只需在包含引导文件后的某处写下这一行。

```
$.fn.modal.Constructor.prototype.enforceFocus = function () {}; 
```

**注意：**这仅在 Bootstrap 2 中进行了测试，而不是在 Bootstrap 3 中进行了测试。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-11-30T16:52:54.403

好的，这似乎是一个已经发现的问题。

（显然我应该使用关键字“未捕获的 RangeError：超出最大调用堆栈大小”而不是“递归过多”:()

以下是解决方案。

**1.修改modal.js**

在这篇文章中，[https://github.com/twbs/bootstrap/pull/5022](https://github.com/twbs/bootstrap/pull/5022)

@onassar 提出解决方案

> 跟进：对于使用 bootstrap-modal v2.2.0 的任何人，在 enforceFocus 方法中，注释掉 that.$element.focus() 似乎可以解决问题。
> 
> 这样做的结果是模态不被关注（pfft，我自己可以做到这一点：P），因此，多个模态不会相互挑战焦点（导致无限循环，并且范围错误/递归循环）。
> 
> 希望有帮助:)

我试过了，它有效。（[笨蛋](http://plnkr.co/edit/DFLSei)）

**2.使用[另一个插件](https://github.com/jschr/bootstrap-modal)来解决这个** [Demo](http://jschr.github.com/bootstrap-modal/)

看起来它工作得很好。

**3.等待官方解决。**

在他们的[路线图](https://github.com/twitter/bootstrap/wiki/Roadmap)中，他们确实想在某个时候重写这个模态插件。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-10-04T20:28:50.743

不幸的是，SmartLove 的回答不够；如果您要使用 no-op `$.fn.modal.Constructor.prototype.enforceFocus`，则应在模式关闭时将其重置；以下直接来自我们的代码，我对投入生产*没有疑虑：*

```
// Since confModal is essentially a nested modal it's enforceFocus method
// must be no-op'd or the following error results 
// "Uncaught RangeError: Maximum call stack size exceeded"
// But then when the nested modal is hidden we reset modal.enforceFocus
var enforceModalFocusFn = $.fn.modal.Constructor.prototype.enforceFocus;

$.fn.modal.Constructor.prototype.enforceFocus = function() {};

$confModal.on('hidden', function() {
    $.fn.modal.Constructor.prototype.enforceFocus = enforceModalFocusFn;
});

$confModal.modal({ backdrop : false }); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-24T11:29:25.930

**4\. 或者您可以在显示新模态时执行以下操作：**

1.  隐藏当前处于活动状态的任何模态
2.  显示新的模态
3.  当您关闭新模态时，显示以前隐藏的模态

    ```
    var showModal = function ($dialog) {
        var $currentModals = $('.modal.in');
        if ($currentModals.length > 0) { // if we have active modals
            $currentModals.one('hidden', function () { 
                // when they've finished hiding
                $dialog.modal('show');
                $dialog.one('hidden', function () {
                    // when we close the dialog
                    $currentModals.modal('show');

                });
            }).modal('hide');
        } else { // otherwise just simply show the modal
            $dialog.modal('show');
        }
    }; 
    ```

注意：我`$.one`以前只应用一次监听器而不关心`bind`/ `unbind`( `on`/ `off`)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-01-16T11:47:31.477

对于 Bootstrap 4，替换 : `$.fn.modal.Constructor.prototype.**enforceFocus**` By `$.fn.modal.Constructor.prototype.**_enforceFocus**`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-03-20T13:59:00.523

试试下面的css。它对我有用。

```
span.select2-container {
    z-index:10050;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-06-19T19:16:23.033

@Dexygen 答案的 Bootstrap 5 版本：

```
const enforceModalFocusFn = bootstrap.Modal.prototype._enforceFocus ;    
const onMyModalHidden = function(){
   bootstrap.Modal.prototype._enforceFocus = enforceModalFocusFn;
}

//let modalElem = ...;
modalElem.addEventListener('hidden.bs.modal', onMyModalHidden);
bootstrap.Modal.prototype._enforceFocus = function () {}; 
```

重要提示：您必须在显示模式之前覆盖该功能。这意味着即在“show.bs.modal”上。如果您稍后初始化覆盖，即在“shown.bs.modal”上它不会工作，因为原始函数已经通过。

同样适用于 offcanvas（这是我需要的），只需将 .Modal 更改为 .Offcanvas 并将 _enforceFocus 更改为 _enforceFocusOnElement

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-26T20:32:11.257

我使用堆栈解决了这个问题。

```
var openmodals = [];
$(function(){
  var ts = new Date().getTime();
  $("div.modal").each(function( d ) {
    ts++;
    $( this ).data( "uid", ts );
  });

  // after closing > 1 level modals we want to reopen the previous level modal
  $('div.modal').on('show', function ( d ) {
    openmodals.push({ 'id' : $( this ).data( "uid" ), 'el' : this });
    if( openmodals.length > 1 ){
        $( openmodals[ openmodals.length - 2 ].el ).modal('hide');
    }
  });
  $('div.modal').on('hide', function ( d ) {
    if( openmodals.length > 1 ){
        if( openmodals[ openmodals.length - 1 ].id == $( this ).data( "uid" ) ){
            openmodals.pop(); // pop current modal 
            $( openmodals.pop().el ).modal('show'); // pop previous modal and show, will be pushed on show 
        }
    } else if( openmodals.length > 0 ){
        openmodals.pop(); // last modal closing, empty the stack
    } 
  });
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-15T17:01:47.380

可以省略：`tabindex="-1"`，在modal的顶部，可以通过方式打开modal：`$('#modal').show();`并关闭：`$('#modal').hide();`

注意：需要[JQuery](https://code.jquery.com/)才能工作。

# asp.net - web.config 中的 ASP.NET HttpOnly cookie 不起作用

> ID：13649460
> 
> 赞同：6
> 
> 时间：2012-11-30T16:47:43.017
> 
> 标签：asp.net, cookies, httponly, cookie-httponly

从我在线阅读的所有内容来看，像这样的 web.config 应该在 ASP.NET 2.0 中启用 HttpOnly cookie。但是，这是行不通的。

```
<configuration>
<system.web>
    <httpCookies httpOnlyCookies="true" />
</system.web>
...
</configuration> 
```

还有什么我想念的吗？我看过很多关于这个主题的帖子，但是 cookie 不会显示为 HttpOnly（或者安全，如果我将 requireSSL="true" 添加到标签）。

我正在使用 IIS 7.0。

**编辑：**

我试图在根级别的 web.config 中设置它以覆盖所有 cookie。我正在查看 ASP 页面上 Firebug 中的 cookie，并且应该有绿色文本的 'HttpOnly' 部分显示 'HttpOnly' 对于其中一些是空的。

例子：

![在此处输入图像描述](../Images/a9675a5ac154cb7db83aeb9f154b66b8.png)

# c# - web.config 在备用命名空间中进行转换

> ID：13649461
> 
> 赞同：4
> 
> 时间：2012-11-30T16:47:43.907
> 
> 标签：c#, asp.net, visual-studio-2010, web-config, xdt-transform

我有一个 web 配置（被截断以显示重要的位），如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <configSections>
        <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog"/>
        <section name="nhs-configuration" type="NHibernate.Search.Cfg.ConfigurationSectionHandler, NHibernate.Search" requirePermission="false" />
    </configSections>
    <nhs-configuration xmlns="urn:nhs-configuration-1.0">
        <search-factory>
            <property name="hibernate.search.default.directory_provider">NHibernate.Search.Store.FSDirectoryProvider, NHibernate.Search</property>
            <property name="hibernate.search.default.indexBase">C:\files\FTIndex</property>
            <property name="hibernate.search.default.indexing_strategy">event</property>
        </search-factory>
    </nhs-configuration>
    <nlog
        xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        internalLogFile="c:\temp\nlogInternal.log"
        internalLogLevel="Info"
        internalLogToConsole="true">
        <targets>
            <target
                xsi:type="Database"
                name="db"
                keepConnection="false"
                useTransactions="true"
                connectionStringName="MyConnString"
                dbProvider="Npgsql"
                commandText="insert into logs (timestamp, thread, severity, source, message, exception, username) values (now(), :thread, :severity, :source, :message, :exception, :username);">
                <parameter name="thread" layout="${threadid}" />
                <parameter name="severity" layout="${uppercase:${level}}" />
                <parameter name="source" layout="${logger}" />
                <parameter name="message" layout="${message}" />
                <parameter name="exception" layout="${exception:format=type,message,method:maxInnerExceptionLevel=10}" />
                <parameter name="username" layout="${aspnet-user-identity}" />
            </target>
            <target xsi:type="Debugger" name="outputWindow" layout="${uppercase:${level}} ${aspnet-user-identity} ${message} ${exception:format=type,message,method:maxInnerExceptionLevel=10}"/>
        </targets>
        <rules>
            <logger name="*" minlevel="Trace" writeTo="outputWindow" />
            <logger name="*" minlevel="Debug" writeTo="db" />
        </rules>
    </nlog>
</configuration> 
```

我的转换文件如下所示：

```
<?xml version="1.0"?>
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
    <nhs-configuration>
        <search-factory>
            <property name="hibernate.search.default.indexBase" xdt:Locator="Match(name)" xdt:Transform="Replace">/var/ftindex</property>
        </search-factory>
    </nhs-configuration>
    <nlog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        internalLogFile="/var/log/nlogInternal.log"
        internalLogLevel="Warn"
        internalLogToConsole="false"
        xdt:Transform="SetAttributes(internalLogFile,internalLogLevel,internalLogToConsole)">
        <targets>
            <target
                name="db"
                keepConnection="true"
                useTransactions="false"
                xdt:Locator="Match(name)"
                xdt:Transform="SetAttributes(keepConnection,useTransactions)"
                >
                <parameter name="thread" layout="${threadid}" />
                <parameter name="severity" layout="${uppercase:${level}}" />
                <parameter name="source" layout="${logger}" />
                <parameter name="message" layout="${message}" />
                <parameter name="exception" layout="${exception:format=type,message,method:maxInnerExceptionLevel=10}" />
                <parameter name="username" layout="${aspnet-user-identity}" />
            </target>
            <target name="outputWindow" xdt:Locator="Match(name)" xdt:Transform="Remove" />
        </targets>
        <rules>
            <logger name="*" minlevel="Debug" writeTo="db" />
            <logger writeTo="outputWindow" xdt:Locator="Match(writeTo)" xdt:Transform="Remove" />
        </rules>
    </nlog>
</configuration> 
```

现在，除了这两个部分之外，我的 web.config 文件的所有部分在发布时都会正确转换。我的预感是这与某种 xml 命名空间冲突有关，但我猜它可能完全是另外一回事。

为什么这些部分不会转换？它们被完全忽略并最终在已发布的 web.config 中完全不变。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T20:04:34.290

事实证明，答案非常简单：只需从两个节点中删除默认命名空间声明即可。

以这种方式，您在 xml 节点上失去了漂亮的 Intellisense，但它可以正确转换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-05T16:11:52.200

实际上，您可以在主 Web.Config 中保留 Intellisense，并明确命名转换文件以匹配：

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform" xmlns:nlog="http://www.nlog-project.org/schemas/NLog.xsd">
  <nlog:nlog xdt:Transform="Replace">
    //Body omitted for brevity
  </nlog:nlog>
</configuration> 
```

见：[这篇文章](http://www.jayway.com/2011/11/14/web-config-transformations-and-xml-namespaces/)

# java - 连接 Lua 和 Java 的另一种方法

> ID：13649462
> 
> 赞同：1
> 
> 时间：2012-11-30T16:47:45.707
> 
> 标签：java, lua, connect, luajava

我已经搜索了好几个小时了：我有一个 lua 脚本，其中包含我想添加到 java 程序中的变量。除了使用 luajava （我尝试设置但没有运气）之外，还有其他方法，或者像写入文本文件而不是使用 java 从它读取的东西？

我想要的是：运行一个lua线程和一个java线程并从lua线程读取数据并在java线程中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:46:04.097

连接 Lua 和 Java 的另一种方法是[jnlua](https://code.google.com/p/jnlua/)。

与[LuaJava 相比](http://www.keplerproject.org/luajava/)，它有[几个优点](https://code.google.com/p/jnlua/wiki/InterfacingWithJavaFromLua)- 它处理 Java 数组，为和派生提供专门的`__ipairs`和`__pairs`元方法，使用，使用和对象实现时。`List``Map``__tostring``toString()``__eq``equals()``__lt``Comparable`

请注意，jnlua 1.0 需要 Lua 5.2，如果您只有 Lua 5.1，则必须使用 jnlua 0.9。

# c# - 从批处理文件生成 T4 类

> ID：13649463
> 
> 赞同：0
> 
> 时间：2012-11-30T16:47:47.120
> 
> 标签：c#, visual-studio, batch-file, t4

我正在使用 T4 映射为我的 MVC4 项目生成一些 c# 类。我通过右键单击 Visual Studio 中的 T4 文件并选择“运行自定义工具”来生成类。这会生成类。

我想自动化这个所以想使用批处理文件生成类。是否可以这样做，如果可以，如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:13:24.597

[如http://msdn.microsoft.com/en-us/library/ee847423.aspx](http://msdn.microsoft.com/en-us/library/ee847423.aspx)中所述，将转换集成到您的构建中可能会为您提供更好的服务。

# javascript - 将 javascript 对象树转换为可打印的字符串以供查看？

> ID：13649464
> 
> 赞同：0
> 
> 时间：2012-11-30T16:47:51.603
> 
> 标签：javascript, html

我已经创建了很多次，但我想看看其他人是否有更好的算法来将 JavaScript 对象转换为格式化字符串以显示给用户。这不是为了同步（否则，只需使用 JSON.stringify()），这是为了以用户易于阅读和导航的格式显示。

主要编辑：

让我更具体一点：我想将 JavaScript 对象转换为 HTML 元素，以提供可导航的树结构。考虑 JSON 表示法中的以下对象：

```
var bob = { 
    id: 1, 
    name: "bob", 
    orders: [{id:1, name:"ord1"}, {id:2, name:"ord2"}], 
    otherObj: { 
      id: "anotherObj", 
      grandchild: { id: "anotherObj" }
    }
}; 
```

我想将上面的内容转换为 HTML DOM 对象，这些对象将形成一个树结构，以显示“bob”的所有子项的方式显示对象树，数组和对象折叠起来，并提供钻取的能力 -在这些子对象上向下（展开）。

我不想对输出格式过于具体，因为我会接受任何创造性的输出对象树的方式。我只是更喜欢它是可扩展和可折叠的，以用于向下钻取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:10:32.613

如果你搜索“json tree view”，你会发现很多这样的实现。

例如：

*   [dijit 树](http://dojotoolkit.org/reference-guide/1.8/dijit/Tree.html)，dojo 工具包的一部分
*   这个[在线工具](http://jsontree.com/)
*   等等

# css - 将 scss 转换为 css

> ID：13649471
> 
> 赞同：65
> 
> 时间：2012-11-30T16:48:26.700
> 
> 标签：css, sass

有谁知道如何将此代码转换为标准 css？它在他们的编辑器中不起作用。

[http://codepen.io/andymcfee/pen/eyahr](http://codepen.io/andymcfee/pen/eyahr)

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-11-30T16:52:12.113

如果您在 CodePen 中单击标题`CSS (SCSS)`（不要使用齿轮更改预处理器），它将切换到已编译的 CSS 视图。

![Codepen 编译预览截图](../Images/894b450ab7f700b12b2d1d64b589c857.png)

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2012-11-30T16:50:47.943

在终端中，在系统表所在的文件夹中运行此命令：

```
sass --watch style.scss:style.css 
```

资源：

[http://sass-lang.com/](http://sass-lang.com/)

当它注意到`.scss`文件中的更改时，它会更新您的`.css`

这仅在您`.scss`在本地计算机上时有效。尝试将代码复制到文件并在本地运行。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-04-12T01:31:21.550

**这是一个在线/离线解决方案，非常容易转换。** [SCSS 到 CSS 转换器](https://sass2css.herokuapp.com/)

[![在此处输入图像描述](../Images/b964e55414a013441e5b69e40216a7f4.png)](https://sass2css.herokuapp.com/)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-08-01T10:39:50.813

首先，如果你的机器上没有 Ruby，你必须安装它。

1.打开一个终端窗口。2.运行命令 which ruby​​.

如果您看到诸如 的路径`/usr/bin/ruby`，则表示已安装 Ruby。如果您没有看到任何响应或收到错误消息，则表示未安装 Ruby。要验证您是否拥有当前版本的 Ruby，请运行命令`ruby -v`。

如果您的机器上没有安装 ruby​​，那么

```
sudo apt-get install ruby2.0
sudo apt-get install ruby2.0-dev
sudo update-alternatives --install /usr/bin/gem gem /usr/bin/gem2.0 1 
```

然后通过运行此命令安装 Sass gem

```
sudo gem install sass --no-user-install 
```

然后复制或添加任何 .sass 文件并转到该文件路径，然后

```
sass --watch style.scss:style.css 
```

当它注意到 .scss 文件发生变化时，它会更新您的 .css

这仅在您的 .scss 位于本地计算机上时有效。尝试将代码复制到文件并在本地运行。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-09-25T14:09:40.793

您可以使用`sass /sassFile.scss /cssFile.css`

> 注意：在使用`sass`命令之前，必须先安装 ruby​​，然后再安装 sass。
> 
> 为了安装 sass，在终端中安装 ruby`gem install sass`​​ 类型*之后*
> 
> 提示：sass 编译`SCSS`文件

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-15T15:43:43.863

**使用以下命令安装 Ruby-sass**
sudo apt-get -y update
sudo apt-get -y install ruby
​​-full sudo apt install ruby​​-sass
gem install bundler

**示例**
sass SCSS_FILE_PATH:CSS_FILE_PATH;

例如 sass mda/at-md-black.scss:css/at-md-black.css；

# r - 为组合的 ggplots 添加一个公共图例

> ID：13649473
> 
> 赞同：169
> 
> 时间：2012-11-30T16:48:32.400
> 
> 标签：r, ggplot2, legend, gridextra

我有两个 ggplots 水平对齐`grid.arrange`。我浏览了很多论坛帖子，但我尝试的一切似乎都是现在更新并命名为别的命令。

我的数据看起来像这样；

```
# Data plot 1                                   
        axis1     axis2   
group1 -0.212201  0.358867
group2 -0.279756 -0.126194
group3  0.186860 -0.203273
group4  0.417117 -0.002592
group1 -0.212201  0.358867
group2 -0.279756 -0.126194
group3  0.186860 -0.203273
group4  0.186860 -0.203273

# Data plot 2   
        axis1     axis2
group1  0.211826 -0.306214
group2 -0.072626  0.104988
group3 -0.072626  0.104988
group4 -0.072626  0.104988
group1  0.211826 -0.306214
group2 -0.072626  0.104988
group3 -0.072626  0.104988
group4 -0.072626  0.104988

#And I run this:
library(ggplot2)
library(gridExtra)

groups=c('group1','group2','group3','group4','group1','group2','group3','group4')

x1=data1[,1]
y1=data1[,2]

x2=data2[,1]
y2=data2[,2]

p1=ggplot(data1, aes(x=x1, y=y1,colour=groups)) + geom_point(position=position_jitter(w=0.04,h=0.02),size=1.8)

p2=ggplot(data2, aes(x=x2, y=y2,colour=groups)) + geom_point(position=position_jitter(w=0.04,h=0.02),size=1.8)

#Combine plots
p3=grid.arrange(
p1 + theme(legend.position="none"), p2+ theme(legend.position="none"), nrow=1, widths = unit(c(10.,10), "cm"), heights = unit(rep(8, 1), "cm"))) 
```

如何从这些图中提取图例并将其添加到组合图的底部/中心？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2017-10-27T16:36:34.700

您也可以使用[ggpubr](http://www.sthda.com/english/rpkgs/ggpubr/reference/ggarrange.html)包中的[ggarrange](http://www.sthda.com/english/rpkgs/ggpubr/index.html)并设置“common.legend = TRUE”：

```
library(ggpubr)

dsamp <- diamonds[sample(nrow(diamonds), 1000), ]
p1 <- qplot(carat, price, data = dsamp, colour = clarity)
p2 <- qplot(cut, price, data = dsamp, colour = clarity)
p3 <- qplot(color, price, data = dsamp, colour = clarity)
p4 <- qplot(depth, price, data = dsamp, colour = clarity) 

ggarrange(p1, p2, p3, p4, ncol=2, nrow=2, common.legend = TRUE, legend="bottom") 
```

[![在此处输入图像描述](../Images/cf521e90487dcaab73901fcdbe5eb33f.png)](https://i.stack.imgur.com/tWIwF.png)

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2012-11-30T18:20:10.630

### 2021 年 3 月更新

这个答案仍有一些价值，但主要是历史价值。多年来，自此发布以来，通过软件包提供了更好的解决方案。您应该考虑下面发布的较新答案。

### 2015 年 2 月更新

请参阅[下面的史蒂文回答](https://stackoverflow.com/a/28594060/1492421)

* * *

```
df1 <- read.table(text="group   x     y   
group1 -0.212201  0.358867
group2 -0.279756 -0.126194
group3  0.186860 -0.203273
group4  0.417117 -0.002592
group1 -0.212201  0.358867
group2 -0.279756 -0.126194
group3  0.186860 -0.203273
group4  0.186860 -0.203273",header=TRUE)

df2 <- read.table(text="group   x     y   
group1  0.211826 -0.306214
group2 -0.072626  0.104988
group3 -0.072626  0.104988
group4 -0.072626  0.104988
group1  0.211826 -0.306214
group2 -0.072626  0.104988
group3 -0.072626  0.104988
group4 -0.072626  0.104988",header=TRUE)

library(ggplot2)
library(gridExtra)

p1 <- ggplot(df1, aes(x=x, y=y,colour=group)) + geom_point(position=position_jitter(w=0.04,h=0.02),size=1.8) + theme(legend.position="bottom")

p2 <- ggplot(df2, aes(x=x, y=y,colour=group)) + geom_point(position=position_jitter(w=0.04,h=0.02),size=1.8)

#extract legend
#https://github.com/hadley/ggplot2/wiki/Share-a-legend-between-two-ggplot2-graphs
g_legend<-function(a.gplot){
  tmp <- ggplot_gtable(ggplot_build(a.gplot))
  leg <- which(sapply(tmp$grobs, function(x) x$name) == "guide-box")
  legend <- tmp$grobs[[leg]]
  return(legend)}

mylegend<-g_legend(p1)

p3 <- grid.arrange(arrangeGrob(p1 + theme(legend.position="none"),
                         p2 + theme(legend.position="none"),
                         nrow=1),
             mylegend, nrow=2,heights=c(10, 1)) 
```

这是结果图： ![2 个具有共同传说的地块](../Images/5d1642f7c43a1ad71822f13558636452.png)

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2015-02-18T21:15:27.153

罗兰的答案需要更新。见：[https ://github.com/hadley/ggplot2/wiki/Share-a-legend-between-two-ggplot2-graphs](https://github.com/hadley/ggplot2/wiki/Share-a-legend-between-two-ggplot2-graphs)

此方法已针对 ggplot2 v1.0.0 进行了更新。

```
library(ggplot2)
library(gridExtra)
library(grid)

grid_arrange_shared_legend <- function(...) {
    plots <- list(...)
    g <- ggplotGrob(plots[[1]] + theme(legend.position="bottom"))$grobs
    legend <- g[[which(sapply(g, function(x) x$name) == "guide-box")]]
    lheight <- sum(legend$height)
    grid.arrange(
        do.call(arrangeGrob, lapply(plots, function(x)
            x + theme(legend.position="none"))),
        legend,
        ncol = 1,
        heights = unit.c(unit(1, "npc") - lheight, lheight))
}

dsamp <- diamonds[sample(nrow(diamonds), 1000), ]
p1 <- qplot(carat, price, data=dsamp, colour=clarity)
p2 <- qplot(cut, price, data=dsamp, colour=clarity)
p3 <- qplot(color, price, data=dsamp, colour=clarity)
p4 <- qplot(depth, price, data=dsamp, colour=clarity)
grid_arrange_shared_legend(p1, p2, p3, p4) 
```

注意缺少`ggplot_gtable`和`ggplot_build`。`ggplotGrob`改为使用。这个例子比上面的解决方案更复杂一些，但它仍然为我解决了这个问题。

* * *

## 回答 #4

> 赞同：64
> 
> 时间：2019-12-13T14:32:53.533

一个新的、有吸引力的解决方案是使用`patchwork`. 语法非常简单：

```
library(ggplot2)
library(patchwork)

p1 <- ggplot(df1, aes(x = x, y = y, colour = group)) + 
  geom_point(position = position_jitter(w = 0.04, h = 0.02), size = 1.8)
p2 <- ggplot(df2, aes(x = x, y = y, colour = group)) + 
  geom_point(position = position_jitter(w = 0.04, h = 0.02), size = 1.8)

combined <- p1 + p2 & theme(legend.position = "bottom")
combined + plot_layout(guides = "collect") 
```

![](../Images/bdc94f2316787fba81123691b4a22eb0.png)

^(由[reprex 包](https://reprex.tidyverse.org)（v0.2.1）于 2019 年 12 月 13 日创建)

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2017-06-26T18:07:48.743

我建议使用cowplot。从他们的[R 小插图](https://cran.r-project.org/web/packages/cowplot/vignettes/shared_legends.html)：

```
# load cowplot
library(cowplot)

# down-sampled diamonds data set
dsamp <- diamonds[sample(nrow(diamonds), 1000), ]

# Make three plots.
# We set left and right margins to 0 to remove unnecessary spacing in the
# final plot arrangement.
p1 <- qplot(carat, price, data=dsamp, colour=clarity) +
   theme(plot.margin = unit(c(6,0,6,0), "pt"))
p2 <- qplot(depth, price, data=dsamp, colour=clarity) +
   theme(plot.margin = unit(c(6,0,6,0), "pt")) + ylab("")
p3 <- qplot(color, price, data=dsamp, colour=clarity) +
   theme(plot.margin = unit(c(6,0,6,0), "pt")) + ylab("")

# arrange the three plots in a single row
prow <- plot_grid( p1 + theme(legend.position="none"),
           p2 + theme(legend.position="none"),
           p3 + theme(legend.position="none"),
           align = 'vh',
           labels = c("A", "B", "C"),
           hjust = -1,
           nrow = 1
           )

# extract the legend from one of the plots
# (clearly the whole thing only makes sense if all plots
# have the same legend, so we can arbitrarily pick one.)
legend_b <- get_legend(p1 + theme(legend.position="bottom"))

# add the legend underneath the row we made earlier. Give it 10% of the height
# of one plot (via rel_heights).
p <- plot_grid( prow, legend_b, ncol = 1, rel_heights = c(1, .2))
p 
```

[![底部带有图例的组合图](../Images/6bf76b27ecfc91e56c4afcb57b049149.png)](https://i.stack.imgur.com/Kndq3.png)

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-07-17T11:25:50.693

@Giuseppe，您可能需要考虑这一点，以便灵活规范地块排列（从[此处](https://github.com/hadley/ggplot2/wiki/Share-a-legend-between-two-ggplot2-graphs)修改）：

```
library(ggplot2)
library(gridExtra)
library(grid)

grid_arrange_shared_legend <- function(..., nrow = 1, ncol = length(list(...)), position = c("bottom", "right")) {

  plots <- list(...)
  position <- match.arg(position)
  g <- ggplotGrob(plots[[1]] + theme(legend.position = position))$grobs
  legend <- g[[which(sapply(g, function(x) x$name) == "guide-box")]]
  lheight <- sum(legend$height)
  lwidth <- sum(legend$width)
  gl <- lapply(plots, function(x) x + theme(legend.position = "none"))
  gl <- c(gl, nrow = nrow, ncol = ncol)

  combined <- switch(position,
                     "bottom" = arrangeGrob(do.call(arrangeGrob, gl),
                                            legend,
                                            ncol = 1,
                                            heights = unit.c(unit(1, "npc") - lheight, lheight)),
                     "right" = arrangeGrob(do.call(arrangeGrob, gl),
                                           legend,
                                           ncol = 2,
                                           widths = unit.c(unit(1, "npc") - lwidth, lwidth)))
  grid.newpage()
  grid.draw(combined)

} 
```

额外的参数`nrow`和`ncol`控制排列图的布局：

```
dsamp <- diamonds[sample(nrow(diamonds), 1000), ]
p1 <- qplot(carat, price, data = dsamp, colour = clarity)
p2 <- qplot(cut, price, data = dsamp, colour = clarity)
p3 <- qplot(color, price, data = dsamp, colour = clarity)
p4 <- qplot(depth, price, data = dsamp, colour = clarity)
grid_arrange_shared_legend(p1, p2, p3, p4, nrow = 1, ncol = 4)
grid_arrange_shared_legend(p1, p2, p3, p4, nrow = 2, ncol = 2) 
```

[![在此处输入图像描述](../Images/e9d9b3be28f6e4fb2ed0f6f7147b686f.png)](https://i.stack.imgur.com/ZAO6S.png) [![在此处输入图像描述](../Images/734a498c91db83953ab5f6698ae63d2e.png)](https://i.stack.imgur.com/U9Rso.png)

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2017-12-15T20:07:21.230

如果您在两个图中绘制相同的变量，最简单的方法是将数据框合并为一个，然后使用 facet_wrap。

对于您的示例：

```
big_df <- rbind(df1,df2)

big_df <- data.frame(big_df,Df = rep(c("df1","df2"),
times=c(nrow(df1),nrow(df2))))

ggplot(big_df,aes(x=x, y=y,colour=group)) 
+ geom_point(position=position_jitter(w=0.04,h=0.02),size=1.8) 
+ facet_wrap(~Df) 
```

[![情节 1](../Images/6f2d2d9f48b70b27a7646374d964efd9.png)](https://i.stack.imgur.com/jZLvx.png)

另一个使用钻石数据集的例子。这表明，如果您的绘图之间只有一个共同变量，您甚至可以使其工作。

```
diamonds_reshaped <- data.frame(price = diamonds$price,
independent.variable = c(diamonds$carat,diamonds$cut,diamonds$color,diamonds$depth),
Clarity = rep(diamonds$clarity,times=4),
Variable.name = rep(c("Carat","Cut","Color","Depth"),each=nrow(diamonds)))

ggplot(diamonds_reshaped,aes(independent.variable,price,colour=Clarity)) + 
geom_point(size=2) + facet_wrap(~Variable.name,scales="free_x") + 
xlab("") 
```

[![情节 2](../Images/3d120df7f2e0ce8ad5b195bd01d56626.png)](https://i.stack.imgur.com/WH7Dt.png)

第二个示例唯一棘手的是，当您将所有内容组合到一个数据框中时，因子变量会被强制转换为数字。因此，理想情况下，您将主要在所有感兴趣的变量都是同一类型时执行此操作。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-01-16T11:41:05.607

@吉塞佩：

我对 Grobs 等一无所知，但我为两个图拼凑了一个解决方案，应该可以扩展到任意数字，但它不是一个性感的函数：

```
plots <- list(p1, p2)
g <- ggplotGrob(plots[[1]] + theme(legend.position="bottom"))$grobs
legend <- g[[which(sapply(g, function(x) x$name) == "guide-box")]]
lheight <- sum(legend$height)
tmp <- arrangeGrob(p1 + theme(legend.position = "none"), p2 + theme(legend.position = "none"), layout_matrix = matrix(c(1, 2), nrow = 1))
grid.arrange(tmp, legend, ncol = 1, heights = unit.c(unit(1, "npc") - lheight, lheight)) 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-07-21T14:26:54.023

如果两个图的图例相同，则可以使用一个简单的解决方案`grid.arrange`（假设您希望图例与两个图垂直或水平对齐）。只需保留最底部或最右侧图的图例，同时省略另一个图例。但是，仅向一个绘图添加图例会改变一个绘图相对于另一个绘图的大小。为避免这种情况，请使用`heights`命令手动调整并保持它们相同的大小。您甚至可以`grid.arrange`用来制作通用轴标题。请注意，这将需要`library(grid)`除了`library(gridExtra)`. 对于垂直图：

```
y_title <- expression(paste(italic("E. coli"), " (CFU/100mL)"))

grid.arrange(arrangeGrob(p1, theme(legend.position="none"), ncol=1), 
   arrangeGrob(p2, theme(legend.position="bottom"), ncol=1), 
   heights=c(1,1.2), left=textGrob(y_title, rot=90, gp=gpar(fontsize=20))) 
```

这是我正在从事的项目的类似图表的结果： [![在此处输入图像描述](../Images/9523ec18de8438781f1177f376b0292d.png)](https://i.stack.imgur.com/sCHpZ.png)

# php - 使用 PHP 将多个 MYSQL 查询合并为一个

> ID：13649474
> 
> 赞同：0
> 
> 时间：2012-11-30T16:48:36.137
> 
> 标签：php, mysql

我知道这个主题之前已经介绍过，并且我已经阅读了大约十几个 stackoverflow 提供的链接。没有一个符合我的需要。

我有 4 个使用 PHP 查询类似数据的 mysql 查询，我想将其降低到一个查询，并可能将结果放入我可以访问的数组中。这是我当前的代码。

```
 $id = $row[post_id];
    $resulttwo = mysql_query("SELECT meta_value FROM wp_postmeta WHERE `post_id` = $id AND `meta_key` = 'length' ");
    $temptwo = mysql_fetch_array($resulttwo);       
    $length[$id] = $temptwo[0];

    $id = $row[post_id];
    $resultthree = mysql_query("SELECT meta_value FROM wp_postmeta WHERE `post_id` = $id AND `meta_key` = 'location_city' ");
    $tempthree = mysql_fetch_array($resultthree);
    $trailcity[$id] = $tempthree[0];

    $id = $row[post_id];
    $resultfour = mysql_query("SELECT meta_value FROM wp_postmeta WHERE `post_id` = $id AND `meta_key` = 'location_state' ");
    $tempfour = mysql_fetch_array($resultfour);
    $trailstate[$id] = $tempfour[0];

    $id = $row[post_id];
    unset($tempfour);
    $resultfour = mysql_query("SELECT meta_value FROM wp_postmeta WHERE `post_id` = $id AND `meta_key` = 'difficulty' ");
    $tempfour = mysql_fetch_array($resultfour);
    $difficulty[$id] = $tempfour[0].' difficulty';` 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T16:51:17.637

这应该有效：

```
$id = $row[post_id];
$result = mysql_query("SELECT meta_key, meta_value FROM wp_postmeta WHERE `post_id` = $id AND `meta_key` IN ('length', 'location_city', 'location_state', 'difficulty')");
$temp = mysql_fetch_assoc($result); 
```

数组`$temp`将包含`meta_key`你`meta_value`应该能够像这样调用的`$temp[length]`。您可以检查整个阵列`print_r($temp);`

您还应该停止使用`mysql_`函数编写新代码，因为它们已[被弃用](http://www.deprecatedphp.com/mysql)并使用`mysqli_`or`PDO`代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:59:29.390

这应该足够了，因为您只关心每个查询中的第一行。

```
SELECT meta_value FROM wp_postmeta WHERE post_id = $id AND meta_key IN ("length", "location_city", "location_state", "difficulty") LIMIT 4; 
```

妈的太晚了！：/

# c++ - 内联汇编器直接 double 到 long long 转换

> ID：13649475
> 
> 赞同：0
> 
> 时间：2012-11-30T16:48:39.093
> 
> 标签：c++, visual-studio-2005, x86, inline-assembly

由于优化原因，我考虑直接（使用内联汇编程序）调用函数“fldl”和“fist”。可悲的是，我不知道如何运行它，因为我不是汇编程序中的神。

我没有比这更进一步：

```
double* input;         
long long output;

__asm fldl input;      
__asm fist output; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:43:05.917

最简单的可能是：

```
double input;
long long output;

__asm fld input
__asm fisttp output 
```

这会进行“正常”的 double 到 long long 的转换，截断为零，就像 C 强制转换一样。但是，非常旧的（Pentium4 之前的）CPU 不支持`fistpp`，因此在此类机器上您需要`fistp`改用它，它使用当前的舍入模式（通常四舍五入到最接近的值）。因此，如果您想例如向 -infinity 舍入，您需要保存当前的舍入模式，将其设置为您想要的，执行`fistp`并恢复舍入模式：

```
double input;
long long output;
unsigned short oldcw, cw;

__asm fld input
__asm fstcw oldcw
cw = (oldcw & ~0xc00) | 0x400; // round towards -infinity
__asm fldcw cw
__asm fistp output
__asm fldcw oldcw 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:53:30.167

`__asm fld input`实际上会尝试读取您的*指针*值，就好像它是浮点值一样。*如果要读取指针指向*的浮点值，则必须经过两步过程：将地址读入寄存器，然后使用寄存器中的地址读取数据。在 32 位平台上，它将类似于

```
__asm {
  mov eax, input
  fld qword ptr [eax]
  fistp output
} 
```

我刚刚在VS2005中尝试过，它可以工作。（请注意，正如其他人在评论中所说，`fist`不支持存储到 64-bit `long long`，但`fistp`确实支持。但您可能仍然需要`fistp`，即弹出存储。）

# sorting - 用 vim 按行对行进行排序

> ID：13649480
> 
> 赞同：3
> 
> 时间：2012-11-30T16:48:55.030
> 
> 标签：sorting, vim, lines

我可以根据行的一部分而不是完整的行对 vim 中的行进行排序吗？例如

```
My Name is Deus Deceit 
```

我想根据名称开始的列 + 6 列进行排序，例如按第 19-25 列排序，vim 只会检查这些字符进行排序。如果没有插件就可以完成，那就太好了。泰

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T17:12:32.113

退房`:help :sort`。该命令采用`{pattern}`跳过匹配文本的选项（即在匹配后进行排序。

例如，按第 19+ 列排序（参见`:help /\%c`和相关的正则表达式原子）：

```
:sort /.*\%19c/ 
```

# javascript - 在模态中动态加载图像

> ID：13649481
> 
> 赞同：0
> 
> 时间：2012-11-30T16:49:04.073
> 
> 标签：javascript, jquery, image

下面是我的代码。我正在尝试以模式加载图片。图片存在于页面上，我能够获得来源。有没有办法像我在这里尝试做的那样，在点击时将图像简单地加载到模态中？我可以单击图像并警告源；但是当我尝试将源代码插入函数时；没发生什么事。

我正在使用 ZEND，但我认为这与当前的情况无关，因此我没有使用 ZEND 标记来标记问题。

**谁能解释我需要做什么才能在点击时将我的图像加载到 MODAL 中？**

```
<?php
    $this->headLink()->appendStylesheet($this->baseUrl('css/default/index/designbox.css'));
    $this->jQuery()->onLoadCapturestart();
?>
<!-- Modal Done Here -->
$('.boxDES').click(function() {
    pic1 = document.getElementById(this.id).getAttribute('src');
    alert(pic1);

    $(pic1).dialog(
        {
            modal:      true,
            draggable:  false,
            title:      'Designs',
            height:     'auto',
            width:      'auto',
            open:       function(){
                            jQuery('.ui-widget-overlay').bind('click',function(){
                                jQuery(pic).dialog('close');
                            })
                        }
        }
    );
});
<?php $this->jQuery()->onLoadCaptureEnd(); ?>
<div id="designGroup">

    <div id="title">
        <?php echo strtoupper($this->object->GetType()); ?>
    </div>

    <div id="boxText">
        <?php echo $this->object->GetDescription(); ?>
    </div>

    <?php $links = $this->object->GetLinks(); ?>
    <div id="pictureBox">
        <ul id="grid">
            <li>
                <a href="#">
                    <img id="<?php echo $links[0];?>" class="boxDES" src="<?php echo '/images/design/thumbs/' . $links[0]; ?>"></a>
            </li>
            <li>
                <a href="#">
                    <img id="<?php echo $links[1];?>" class="boxDES" src="<?php echo '/images/design/thumbs/' . $links[1]; ?>"></a>
            </li>
            <li>
                <a href="#">
                    <img id="<?php echo $links[2];?>" class="boxDES" src="<?php echo '/images/design/thumbs/' . $links[2]; ?>"></a>
            </li>
            <li>
                <a href="#">
                    <img id="<?php echo $links[3];?>" class="boxDES" src="<?php echo '/images/design/thumbs/' . $links[3]; ?>"></a>
            </li>
        </ul>
    </div>
    <div style="clear: both;"> </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:09:04.170

```
 This is how to build a variable that holds my IMG.

var catIMG = $('<img/>', {
                                "class" :"inline",
                                src:pic1
                        }); 
```

以下是现在已修复且完整的 JSCRIPT -

```
$('.boxDES').click(function() {
    pic1 = document.getElementById(this.id).getAttribute('src');
    var catIMG = $('<img/>', {
                        "class" :"inline",
                        src:pic1
                });

    $(catIMG).dialog(
        {
            modal:      true,
            draggable:  false,
            title:      'Designs',
            height:     'auto',
            width:      'auto',
            open:       function(){
                            jQuery('.ui-widget-overlay').bind('click',function(){
                                jQuery(pic).dialog('close');
                            })
                        }
        }
    );
}); 
```

我可以在这里找到这些信息[https://stackoverflow.com/a/10788966/1583066](https://stackoverflow.com/a/10788966/1583066)

# redirect - 重定向jsf问题

> ID：13649483
> 
> 赞同：0
> 
> 时间：2012-11-30T16:49:10.950
> 
> 标签：redirect, jsf-2

我从*a.xhtml*重定向到*b.xhtml时遇到问题*

在**localhost:8080/proyect/a.xhtml?idempresa=2&idcontrato=15**我有这个初始化：

```
@PostConstruct
public void init() {
    HttpServletRequest request=(HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
    setIdempresa(Integer.parseInt(request.getParameter("idempresa")));
    setIdcontrato(Integer.parseInt(request.getParameter("idcontrato")));
    ...... } 
```

在我看来，重定向按钮如下

```
<p:commandButton  action="b.xhtml?faces-redirect=true" ajax="false" ... /> 
```

但是当我点击命令按钮重定向它总是重新加载 a.xhtml，没有参数作为**localhost:8080/proyect/a.xhtml**所以它产生

> java.lang.NumberFormatException: null at java.lang.Integer.parseInt(Integer.java:454) at java.lang.Integer.parseInt(Integer.java:527) at beans.MBcompletadoInter.init(MBcompletadoInter.java:83) ......

**MBcompletadoInter 是我的支持 bean 的名称，a.xhtml 使用它**

欢迎任何建议（Y）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:54:12.653

b.xhtml？*faces-redirect=true*仅适用于 ajax **enabled**。您确定不想使用*b.jsf*而不是*b.xhtml*吗？可以在web.xml中算出来。

尝试在*idempresa*和*idcontrato*上使用调试输出。它打印什么？

# vim - vi 探索子目录和文件

> ID：13649487
> 
> 赞同：1
> 
> 时间：2012-11-30T16:49:30.210
> 
> 标签：vim

在 vim 中使用 :ex 或 :sex 时，如何显示树中的所有文件和子目录？目前使用 explore 功能时，只显示当前目录的内容。

例如，我想要：

```
/
   /controllers
      posts.php
   /models
      posts_model.php
   /public_html
      js/
         lightbox.js
   /views
      homepage.php 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:17:05.960

实际上，netrw 确实有一个树列表模式。您可以按`i`在其不同模式之间切换。

或者您可以将其设置为永久默认为树列表：

```
let g:netrw_liststyle=3 
```

请注意，这在大型目录中可能非常慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:15:33.833

Vim 附带的*netrw插件默认只显示当前目录本身的内容。*如果您想要文件资源管理器（带有可扩展文件夹等）之类的东西，您需要重新配置（cp. Dan Fitch 的回答），或者切换到一个专门的、更强大的插件。[NERDtree](http://www.vim.org/scripts/script.php?script_id=1658)是一种流行的树。

# opencv - 在 ubuntu 服务器版上安装 gstreamer 和 opencv 的程序是什么

> ID：13649491
> 
> 赞同：0
> 
> 时间：2012-11-30T16:49:50.680
> 
> 标签：opencv, ubuntu-12.04, gstreamer

我正在尝试将 opencv 、 gstreamer 安装到 ubuntu 服务器上，但由于 ubuntu 服务器版与桌面版有很大不同，因此有很多库没有安装在服务器版的新副本上，所以我面临着各种依赖问题。

有谁知道这个的系统和分步指南？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T10:07:46.880

apt-get install 还将拉取所需的依赖项。

# java - 如何将字符串数组中的文本格式化为 android 的数学格式？

> ID：13649492
> 
> 赞同：0
> 
> 时间：2012-11-30T16:49:54.517
> 
> 标签：java, android, arrays, eclipse, math

我有一个应用程序可以帮助人们使用微积分，我想让它看起来像实际的数学代码，而不是看起来像 x^2+(x^1/2)-4 的方程。项目中的代码如下。我已经研究过这个主题，但没有看到明确的解决方案。谢谢！

```
public class Limits extends Activity implements
    OnClickListener {
private static final int SWIPE_MIN_DISTANCE = 120;
private static final int SWIPE_MAX_OFF_PATH = 250;
private static final int SWIPE_THRESHOLD_VELOCITY = 200;
private GestureDetector gestureDetector;

View.OnTouchListener gestureListener;

String facts[] = {

//limits
"Find the limit as x approaches 0 of x^3+4x^2+6x+7",
"Find the limit as x approaches infinity of x/x^2",
"Find the limit as x approaches 3 of (x+3)^2/(x+6)",
"Find the limit as x approaches infinity of x^3/x",
"Find the limit as x approaches 3 of (x^2-6x+9)/(x-3)",
"Find the limit as x approaches 7 of 49x^2/7x",
"Find the limit as x approaches infinity of (2x^2-5x+3)/(x^2-7x+7)",
"Find the limit as x approaches 2 of (x − 2/x^2 − 19x + 34)",
"Find the limit as x approaches 6 of ((|x-6|)/(x-6))", 
```

};

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:22:19.077

尝试使用 HTML：

```
Html.fromHtml("X<sup>2</sup>") 
```

# c# - VBoxManage.exe 使用什么 API？

> ID：13649493
> 
> 赞同：0
> 
> 时间：2012-11-30T16:49:56.890
> 
> 标签：c#, java, api, virtualbox

`VBoxManage.exe`是一个 Oracle VirtualBox 配套实用程序，它允许通过命令行控制 VM。它可以执行许多操作，包括启动/停止和屏幕捕获。

我有兴趣，它使用哪个 API？

如果没有这个繁重的命令行实用程序，我如何捕获 VM 屏幕或在那里发送键盘或鼠标命令？哪种语言更好？是否可以使用 Java 访问此 API？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T18:08:24.970

使用开源项目的优势之一应该是您可以通过查看源代码来回答此类问题。

VBoxManage 位于[/src/VBox/Frontends/VBoxManage](https://www.virtualbox.org/browser/vbox/trunk/src/VBox/Frontends/VBoxManage)下的源存储库中。您要查找的代码处于`VBoxManageControlVM.cpp`以下条件`if (!strcmp(a->argv[1], "screenshotpng"))`：

```
ComPtr<IDisplay> pDisplay;
CHECK_ERROR_BREAK(console, COMGETTER(Display)(pDisplay.asOutParam()));

ULONG width, height, bpp;
CHECK_ERROR_BREAK(pDisplay, 
        GetScreenResolution(displayIdx, &width, &height, &bpp));

com::SafeArray<BYTE> saScreenshot;
CHECK_ERROR_BREAK(pDisplay, TakeScreenShotPNGToArray(displayIdx, 
        width, height, ComSafeArrayAsOutParam(saScreenshot)));

RTFILE pngFile = NIL_RTFILE;
vrc = RTFileOpen(&pngFile, a->argv[2], RTFILE_O_OPEN_CREATE | RTFILE_O_WRITE |
    RTFILE_O_TRUNCATE | RTFILE_O_DENY_ALL);

if (RT_FAILURE(vrc))
{
    RTMsgError("Failed to create file '%s'. rc=%Rrc", a->argv[2], vrc);
    rc = E_FAIL;
    break;
}
vrc = RTFileWrite(pngFile, saScreenshot.raw(), saScreenshot.size(), NULL);
if (RT_FAILURE(vrc))
{
    RTMsgError("Failed to write screenshot to file '%s'. rc=%Rrc",
        a->argv[2], vrc);
    rc = E_FAIL;
}
RTFileClose(pngFile); 
```

因此它是通过 COM API 完成的，您可以查看：

[是否可以从 Java 调用 COM API？](https://stackoverflow.com/questions/138028/is-it-possible-to-call-a-com-api-from-java)

谷歌搜索`TakeScreenShotPNGToArray`找到显示界面：

[https://www.virtualbox.org/sdkref/interface_i_display.html](https://www.virtualbox.org/sdkref/interface_i_display.html)

从那里你可以找到所有其他东西的列表，比如鼠标和键盘：

[https://www.virtualbox.org/sdkref/annotated.html](https://www.virtualbox.org/sdkref/annotated.html)

# sql - SQL Server Management Studio 2008 - 为什么我的左连接不提供空记录？

> ID：13649494
> 
> 赞同：2
> 
> 时间：2012-11-30T16:49:57.733
> 
> 标签：sql, sql-server-2008

我正在尝试从两个表、一个主表和一个事务表中提取记录。

我的`Master`表包含我所有的帐户 ID。我的`transaction`表有这些帐户运行的任何交易，包含 3 列：`activity date`、`income`和`charge type`。

在`transaction`表格中，其中一些账户可能根本不会出现，因为它们在给定的日期范围内没有执行交易。但是，当我查询它们时，我仍然需要这些帐户出现在我的结果列表中。

所以我的数据看起来像这样：

```
 Master Table:                         Transaction Table:

    | AccountID  |              | AccountID | ChargeType | ActivityDate| Income |
    --------------              -------------------------------------------------
    |      1     |              |     2     |    2000    |  8/31/2012  | $99.00 |
    |      2     |              |     3     |    2000    |  7/31/2012  | $79.00 |
    |      3     |              |     5     |    2000    |  9/30/2012  | $79.00 |
    |      4     |
    |      5     | 
```

我的查询目前看起来像：

```
select
    a.AccountID,
    b.ChargeType,
    b.ActivityDate,
    b.Income
From
    MasterTable as A
left join
    TransactionTable as B on a.AccountID = b.AccountID
where
    a.AccountID in ('1','2','3','4','5')
    and
    b.ActivityDate between '5/1/2012' and '11/30/2012' 
```

据我了解，此查询应列出我选择的所有 5 个帐户，并显示`NULL`未在`TransactionTable`.

我期望的结果：

```
 | AccountID | ChargeType | ActivityDate| Income |
        -------------------------------------------------
        |     1     |    NULL    |     NULL    |  NULL  |
        |     2     |    2000    |  8/31/2012  | $99.00 |
        |     3     |    2000    |  7/31/2012  | $79.00 |
        |     4     |    NULL    |     NULL    |  NULL  | 
        |     5     |    2000    |  9/30/2012  | $79.00 | 
```

我收到的结果不正确：

```
 | AccountID | ChargeType | ActivityDate| Income |
         -------------------------------------------------
         |     2     |    2000    |  8/31/2012  | $99.00 |
         |     3     |    2000    |  7/31/2012  | $79.00 |
         |     5     |    2000    |  9/30/2012  | $79.00 | 
```

我想我在这里误解了一些基本的东西。任何帮助是极大的赞赏！

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T16:53:29.617

原因是您在`where`子句中引用了“b”表，因此过滤掉了 NULL 值。

将条件移至`on`子句：

```
From
    MasterTable A left join
    TransactionTable B
    on a.AccountID=b.AccountID and
       a.AccountID in ('1','2','3','4','5') and
       b.ActivityDate between '5/1/2012' and '11/30/2012' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:55:10.513

将条款的最后一个过滤器更改`WHERE`为；[SQL 小提琴示例](http://sqlfiddle.com/#!3/e46be/5)

```
DECLARE @d1 DATETIME, @d2 DATETIME
SELECT @d1 = '5/1/2012', @d2 = '11/30/2012'

SELECT ...
WHERE a.AccountID in (1,2,3,4,5) AND
ISNULL(b.ActivityDate, @d1) BETWEEN @d1 and @d2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T17:01:10.450

我会使用以下内容：

```
(b.ActivityDate is NULL or b.ActivityDate between '5/1/2012' and '11/30/2012' ) 
```

使原来的查询变成

```
 select
       a.AccountID,
       b.ChargeType,
       b.ActivityDate,
       b.Income
 From
       MasterTable as A
       left join
       TransactionTable as B on a.AccountID=b.AccountID
 where
       a.AccountID in ('1','2','3','4','5')
       and
       (b.ActivityDate is NULL or b.ActivityDate between '5/1/2012' and '11/30/2012' ) 
```

但下面的答案可能更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T07:50:52.797

您可以简单地使用以下代码：

```
SELECT
    A.AccountID,
    B.ChargeType,
    B.ActivityDate,
    B.Income
From MasterTable AS A
LEFT JOIN  TransactionTable AS B 
ON A.AccountID = B.AccountID 
```

如果您 `B.ActivityDate BETWEEN '5/1/2012' AND '11/30/2012'`在代码中使用条件，则它不会产生您期望的结果。因为对于`AccountID = 1`，`ActivityDate`是`NULL`。所以，记录与 `AccountID = 1`不会满足你之间的条件。

# spring - 如何在 Spring MVC 中生成 REST 控制器以删除重复项

> ID：13649497
> 
> 赞同：0
> 
> 时间：2012-11-30T16:50:07.153
> 
> 标签：spring, model-view-controller, annotations, code-duplication

我有一个设计问题，我一生都无法弄清楚。好的代码没有重复。我已经生成了我的 DAO，所以所有基本的 crud 操作都被继承了我正在尝试对带有注释控制器的 Spring MVC 做同样的事情。

我找到了这个问题，但没有答案：[How to Remove Duplication from Spring 3 MVC Standard and Ajax Request Controllers and Views](https://stackoverflow.com/questions/5621945/how-to-remove-duplication-from-spring-3-mvc-standard-and-ajax-request-controller)

如果我有类似以下示例的内容，假设我重构为使用 AbstractBaseService 和 BaseModel（我这样做但没有代码），我如何将注释信息放入 GenericAbstractBaseController 或 BaseController 接口之类的东西中？我已经尝试过（这里没有代码），但问题是注释不是继承的，也不能在运行时添加。

我看到 javassist 可用于字节码修改，因此我实际上可以在编译后添加注释以保持代码干净，但这似乎过于复杂。

我给导师发了一条说明，他建议使用带有命名约定的 AOP 来编织建议或反射以识别继承类中的注释，但我不确定如何将这些信息实际提供给 spring，因为我实际上无法添加注释在运行时。我想我在这里遗漏了一些关键的关键，有人会来来去去——他只给我发回了几行。

这是代码 - 我如何删除重复的 crud 逻辑。

```
@Controller
@RequestMapping("/users")
public class UserController {

@Autowired
UserService userService;

@RequestMapping(value="/", method = RequestMethod.GET)
public @ResponseBody  List<User> doGetIndex(ModelMap model) {
    return userService.listPage(0, 10);
}

@RequestMapping(value="/{name}", method = RequestMethod.GET)
public @ResponseBody User doGet(@PathVariable String name, ModelMap model) {
    return userService.getByUsername(name);
}

//post

//put

//delete 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:27:17.030

我不太明白“注释不是继承”是什么意思，但据我所知，以下方法应该有效：

```
public class AbstractController<T> {
    @RequestMapping(value="", method = RequestMethod.GET)
    public @ResponseBody  List<User> doGetIndex(ModelMap model) { ... }

    @RequestMapping(value="{name}", method = RequestMethod.GET)
    public @ResponseBody T doGet(@PathVariable String name, ModelMap model) { ... }
}

@Controller
@RequestMapping("/users")
public class UserController extends AbstractController<User> { ... } 
```

# wpf - WPF基于treeview点击加载网格子

> ID：13649500
> 
> 赞同：0
> 
> 时间：2012-11-30T16:50:17.587
> 
> 标签：wpf, treeview

我正在开发一个 WPF C# 应用程序，其中有一个树视图控件，如果用户单击树中的一个节点，则特定于节点的详细信息“表单”会出现在表单中其他位置的命名网格中。如果您单击树中的其他节点，显示的详细信息表单会检查内容是否已保存、是否被关闭，并且会在其位置出现一个新的详细信息表单。

我需要的是一些开始的建议。我仍然可以将表单实现为独立的 xaml，然后在我小时候将表单放入的网格中放入一些“容器”吗？或者只是以某种方式将表单添加为网格子项。如何以编程方式在网格中加载我想要的表单并与之通信？

感谢您的帮助！科里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:09:51.660

使用事件聚合器设计模式，请参阅此处了解详细信息：

[http://martinfowler.com/eaaDev/EventAggregator.html](http://martinfowler.com/eaaDev/EventAggregator.html)

然后，您可以使用其他代码通过事件聚合器侦听节点更改点击并相应地响应。这将使您的代码解耦并使其更具可测试性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:25:45.190

假设您使用的是 mvvm？如果不阅读它 - 会更容易。

然后你有你的表单，上面有树视图，绑定到视图模型上的 itemsource。通常，像树视图这样的项目控件上会有一个 selecteditem 属性。将其绑定到视图模型上的属性，该属性属于树视图中包含的对象类型。例如，将其称为 CurrentSelectedItem。

您的详细信息“表单”可以是控件或您想要在同一表单上的任何内容。现在取决于你的对象有多完整——你至少有两个选择。如果树视图中的对象已经包含您需要的所有数据，那么只需将详细信息绑定到 CurrentSelectedItem。

显然它必须实现 INotifyPropertyChanged 来告诉绑定系统更新值。

如果对象没有足够的信息，那么在 CurrentSelectedItem 的设置器上，您可以触发一个方法来加载完整的对象，然后将详细信息绑定到该完整的对象。

Alternativley 是另一种流行的方法，您可以将详细信息表单作为订阅消息的自包含控件，当它使用树视图对象的键接收消息时，它会加载所需的信息。

# c# - c# "as" vs "()" 转换

> ID：13649501
> 
> 赞同：2
> 
> 时间：2012-11-30T16:50:23.887
> 
> 标签：c#, ms-office

为什么在这种情况下兼容的引用类型之间的转换会编译（Excel 2010，.Net 4.5）

```
using Excel = Microsoft.Office.Interop.Excel;
Excel.Application excelApplication = null;
excelApplication = new Excel.Application();

Excel.Worksheet worksheet = workbook.Worksheets[1] as Excel.Worksheet; 
```

在下面的情况下它不会，尽管我看到了这样的例子：

```
Excel.Worksheet worksheet = (Excel.Worksheet)workbook.Worksheets[1]; 
```

在这种情况下，我收到以下编译错误：

```
> CSC : error CS0518: Predefined type 'Microsoft.CSharp.RuntimeBinder.Binder' is not 
defined or imported

> error CS1969: One or more types required to compile a dynamic expression cannot be 
found. Are you missing a reference? 
```

最好的，

**编辑**：感谢下面的两位回答者，以下解释听起来很合理：

> **如果不将 Microsoft.CSharp 包含在 .Net 版本 >= 4.0 的项目的项目参考中，则无法支持动态语言运行时 (DLR) 和 C# 之间的互操作**，即不可能进行动态转换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:53:55.103

(T) 如果 x 不能转换为 T，x 将抛出 InvalidCastException 异常，而在这种情况下 x as T 将返回 null。当没有类型转换问题时，两者是等价的。

(T) x 比 x 作为 T 的操作更简单、更快。有关性能结果，请查看： http: [//www.codeproject.com/Articles/8052/Type-casting-impact-over-execution-performance-in ＃_评分](http://www.codeproject.com/Articles/8052/Type-casting-impact-over-execution-performance-in#_rating)

一些附加信息：

强制转换显式调用从一种类型到另一种类型的转换运算符。如果未定义此类转换运算符，则转换将失败。您可以编写自定义转换运算符来在用户定义的类型之间进行转换。有关定义转换运算符的详细信息，请参阅显式（C# 参考）和隐式（C# 参考）。

来源： http: [//msdn.microsoft.com/en-us/library/ms173105 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms173105(v=vs.80).aspx)

更新：鉴于您提供的错误消息，该应用程序似乎针对 ASP.NET 3.5。我的猜测是转到项目属性并将目标框架设置为 4.0 将解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T16:52:44.440

`as`实际返回的是什么？如果它正在返回`null`，那是因为它无法转换为`Excel.Worksheet`. 投射的工作方式不同，如果你不能投射，就会出错。这可能就是这里发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-15T07:41:42.890

As - 如果强制转换在运行时失败，将返回 null。所以这是安全的。

() - 如果在运行时强制转换失败，将抛出异常

As 只能应用于引用类型或可为空的类型。

因为强制转换比显式强制转换更快。希望这可以帮助！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-15T07:57:07.840

有明确的案例，*演员*或`as`按顺序排列，但有时它们看起来好像可以互换。在那些情况下，当两者都可以使用时，我会停下来考虑一下可读性：

> 默认情况下，尽可能使用*类型转换。*`as`当您想要明确表示由于**面向对象**推理、利用继承或接口而转换引用时，请保留这些情况。

# jquery - jQuery防止droppable接受多个项目

> ID：13649506
> 
> 赞同：0
> 
> 时间：2012-11-30T16:50:49.817
> 
> 标签：jquery, drag-and-drop, draggable, droppable

我有以下代码：

**可放置区域**

```
$( "#droppable1" ).droppable({
        drop: function( event, ui ) {
            $( this )
                .addClass( "ui-state-highlight" )
                .find( "p" )
                .html( "Dropped!" );
        }
    });

$( "#droppable1" ).on( "dropout", function( event, ui ) {
                 $( "#droppable1" )
                .removeClass("ui-state-highlight").find( "p" )
                .html( "Drop Here" );
   }); 
```

**可拖动项目**

```
$( "#draggable1" ).draggable({ 
     snap: ".ui-widget-header", 
     snapMode: "inner", 
     axis: "y", 
     containment: "#containment-wrapper", 
     scroll: false 
}); 
```

一切正常，但我无法理解或弄清楚`droppable`如果一个项目已经`dropped`进入它，我如何防止一个空间接受多次下降。

1.  我将如何修改代码以防止`#droppable1`接受多个`drop`？
2.  是否可以使用该`.return`选项，以便如果有人试图放下一个额外的项目，它只会恢复到原来的位置？

**编辑：**

```
$(".drop-zone").droppable({
drop: function(event, ui) { 
    $(this).droppable('option', 'accept', ui.draggable);
},
out: function(event, ui){
    $(this).droppable('option', 'accept', '.drag-item');
    }   
}); 
```

});

以上来自下面列出的线程，但我正在努力用我的代码实现。

**新代码**

```
$( "#droppable1" ).droppable({
        drop: function( event, ui ) {
            $(this).droppable('option', 'accept', ui.draggable);
        },
        out: function(event, ui){
            $(this).droppable('option', 'accept', '.drag-item');
        }   

    }); 
```

好的，所以我现在有上面的代码，但实际上，我不认为这是我需要的。有什么方法可以阻止可拖动项目实际上被拖放和/或捕捉到填充的可拖放空间？

一如既往地感谢，

H。

# python - 在不获取焦点的情况下打开一个 pyglet 窗口

> ID：13649513
> 
> 赞同：5
> 
> 时间：2012-11-30T16:51:14.797
> 
> 标签：python, windows, graphics, subprocess, pyglet

我的 python 应用程序启动了一个创建 pyglet 窗口的子进程。当 pyglet 窗口打开时，它位于所有其他窗口的前面，并获得键盘焦点。**我希望我的 pyglet 窗口在后台打开，而不是集中注意力。这可能吗？**

我正在使用的代码的精简版本：

```
import pyglet

pyglet.window.Window()
pyglet.app.run() 
```

我正在使用 Windows 7，以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:07:49.917

我认为这可能比您的应用程序更像是一个窗口/窗口管理器问题 - 像这样的[http://pcsupport.about.com/od/windowsxp/ht/stealingfocus02.htm](http://pcsupport.about.com/od/windowsxp/ht/stealingfocus02.htm)有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T14:50:29.000

*反转焦点是特定于操作系统的：*

**pyglet**不提供操作系统特定的窗口控制。因此，很可能您将不得不使用临时技巧来获得快速和肮脏的解决方案，或者尝试使用 pywin32 之类的扩展来处理它，使用 Windows API 和/或 COM 来列出任务栏应用程序堆栈以逆转焦点窃取。您还可以尝试先创建自己的窗口（容器 - 您可以操作） - 以便将其上下文委托给 pyglet。

*延迟窃取焦点*

另一方面，如果根据您的程序逻辑，您只想延迟应用程序的实际显示，您可以使用可见性：

```
import pyglet

w = pyglet.window.Window()
w.set_visible(False)
pyglet.app.run() 
```

因此，如果您不想使用窗口上下文委托，您可以执行以下操作：

1.  在不显示窗口的情况下启动您的应用程序
2.  通过获取当前活动窗口的句柄/id 找到当前活动窗口的焦点
3.  显示你的窗口
4.  将焦点返回到上一个窗口

以上假设使用 Windows API。我认为 MSDN 有关于焦点更改的示例。如果您知道当前窗口（主应用程序）的 PI​​D，这应该简化第 2 步。

# java - 上下文路径与 webapp-runner 中的 Spring UrlTag 冲突？

> ID：13649515
> 
> 赞同：1
> 
> 时间：2012-11-30T16:51:18.443
> 
> 标签：java, spring, heroku

我们将 Java/Spring 应用程序部署到 Heroku 中，使用出色`webapp-runner`的 Tomcat-lite servlet 容器。在从 7.0.27.1 升级到 7.0.31.1 时，设置默认上下文路径“/”的行为似乎会导致`<spring:url>`标签出现问题。具体来说，使用“/”的默认上下文路径，标签之类的`<spring:url value="/foo/bar"/>`最终呈现为`//foo/bar`. 例如，我在 OS X 上测试的所有浏览器（Chrome、Safari、Firefox）似乎都没有特别优雅地处理这些，并尝试加载`http://foo/bar`，导致各种混乱。

我可以想到两种解决方法：

*   指定`--context-path ""`参数`webapp-runner`- 这似乎是“最好的”，因为它对应于 7.0.27.1 行为
*   将标签写为`<spring:url context="" .../>`- 不确定可能会有什么额外后果，考虑如何`SpringUrl`使用前导斜杠来确定`UrlType`.

这些都合理吗？如果没有，我应该考虑其他一些解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:06:00.403

webapp-runner-7.0.34.1 已将默认值更改`--context-path`回`""`. 如果您升级，它应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-26T08:08:59.287

我有类似的**双斜杠问题 //**从 webapp-runner 7.0.34.0 升级到**webapp-runner 7.0.34.1 为我解决了这个问题**。

我曾尝试过`<spring:url>`和`${pageContext.request.contextPath}`。升级 webapp-runner 解决了这两种情况下的问题。

更多详情：[http ://bit.ly/1zuL1T1](http://bit.ly/1zuL1T1)

# apache - 子文件夹中的 htaccess mod_rewrite URL

> ID：13649516
> 
> 赞同：2
> 
> 时间：2012-11-30T16:51:21.377
> 
> 标签：apache, .htaccess, mod-rewrite

我的问题在 StackOverflow 上似乎没有答案，所以这里是：

我想使用根文件夹中的**htaccess文件重写以下 URL。**

要重写的 URL 是这样的：

```
http://www.domain.com/subfolder/item/12345 
```

对此：

```
http://www.domain.com/subfolder/item.php?id=12345 
```

但是我似乎没有做任何工作。如果 item.php URL 位于根文件夹中，我可以使用以下方法成功重写它：

```
RewriteRule ^item/(.*)$ item.php?id=$1 [NC,L] 
```

...但如果 item.php 文件位于子文件夹中，则不会！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:42:51.837

您可以在子文件夹中使用以下 .htaccess：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /subfolder

RewriteRule ^item/(.*)$ item.php?id=$1 [NC,L,QSA] 
```

您重写的 URL 将变为：`http://domain.com/subfolder/item/123`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:52:50.027

这是发送此 URL 的示例（在浏览器地址栏中输入的 URL）：

> [http://www.domain.com/subfolder/item/12345](http://www.domain.com/subfolder/item/12345) （可以是任何数字）**到**这个重写的 URL：
> 
> [http://www.domain.com/subfolder/item.php?id=12345](http://www.domain.com/subfolder/item.php?id=12345)

```
RewriteEngine on
RewriteRule ^subfolder/item/([0-9]+)/?$ subfolder/item.php?id=$1 [L] 
```

这些指令只有在有一个**子文件夹**目录并且在该目录中实际上有一个文件**item.php 时才会起作用**

# mysql - MySQL：如何加快这个查询（包括子查询）？

> ID：13649520
> 
> 赞同：0
> 
> 时间：2012-11-30T16:51:34.813
> 
> 标签：mysql, subquery, database-performance

我的论坛的索引页面如下所示：

```
| Forum   | Topics | Answers |
 ----------------------------
| Forum A | 123    | 45678   | 
| Forum B | 345    | 23128   |
| Forum C | 567    |  2328   | 
```

这是我到目前为止有效的 SQL 代码，但我认为必须有更好的解决方案：

```
SELECT f.`id`, f.`name`, f.`description`, f.`type`, 

      (SELECT COUNT(`id`) 
         FROM threads 
        WHERE `forum_id` = f.`id`) AS num_threads, 

      (SELECT COUNT(p.`id`) 
         FROM threads t, posts p 
        WHERE p.thread_id = t.id 
          AND t.forum_id = f.id) AS num_posts 

  FROM `forums` f ORDER BY `position` 
```

你会如何加快这个查询？子查询的任何替代方案？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:57:52.467

像这样，将基本选择与带有 group by 子句的几个子查询连接起来（因此它们每个执行一次，而不是每行执行一次）

```
 SELECT f.id, f.name, f.description, f.type, tc.RowCnt, ta.RowCnt
  FROM `forums` f 
  INNER JOIN (SELECT forum_id, COUNT(id) AS RowCnt FROM threads GROUP BY forum_id) tc
  INNER JOIN (SELECT forum_id, COUNT(p.id) AS RowCnt FROM threads t INNER JOIN posts p ON p.thread_id = t.id GROUP BY forum_id) ta
  ORDER BY position 
```

您可以通过在主选择而不是子选择中进行计数来改善这一点（但现在是星期五晚些时候，我很累！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T16:55:08.117

了解[SQL 连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)和`GROUP BY`：

```
SELECT   f.id, f.name, f.description, f.type, 
         COUNT(DISTINCT t.id) AS num_threads,
         COUNT(*) AS num_posts
FROM     forums f
    JOIN threads t ON  t.forum_id = f.id
    JOIN posts   p ON p.thread_id = t.id
GROUP BY f.id
ORDER BY f.position 
```

此外，请确保您具有以下索引：

*   `(id)`上`forums`
*   `(id, forum_id)`上`threads`
*   `(thread_id)`上`posts`

[（如果您创建了外键约束](http://dev.mysql.com/doc/en/innodb-foreign-key-constraints.html)，MySQL 将要求您拥有这些索引）。

# c# - 如何使用 Lambda 语法删除重复项？

> ID：13649521
> 
> 赞同：0
> 
> 时间：2012-11-30T16:51:44.067
> 
> 标签：c#, linq

> **可能重复：**
> [使用 linq 删除列表中的重复项](https://stackoverflow.com/questions/1606679/remove-duplicates-in-the-list-using-linq)

我正在尝试从`IQueryable`集合中删除重复项。我在想我需要做某种嵌套选择，但我不太确定。我在 linqpad 中创建了一个脚本，其中包含展开和折叠的重复项目的原始列表。

我想要做的是从我的项目中选择`listWithDuplicates`不在`dupesAsList`. `listWithDuplicates`如果发现重复，我还想保留具有最高 id 的记录...

想知道是否有人可以帮助或告诉我删除重复项的最佳方法？

```
void Main()
{
    var listWithDuplicates = new List<Tuple<int,string>>();
    listWithDuplicates.Add(new Tuple<int,string>(1,"Dog"));
    listWithDuplicates.Add(new Tuple<int,string>(2,"Cat"));
    listWithDuplicates.Add(new Tuple<int,string>(3,"Dog"));
    listWithDuplicates.Add(new Tuple<int,string>(4,"Chicken"));
    listWithDuplicates.Add(new Tuple<int,string>(5,"Dog"));
    listWithDuplicates.Add(new Tuple<int,string>(6,"Dog"));
    listWithDuplicates.Add(new Tuple<int,string>(7,"Chicken"));

    var dupesAsList = listWithDuplicates.GroupBy(s => s.Item2).SelectMany(grp => grp.Skip(1));

    var dupesGrouped = listWithDuplicates.GroupBy(s => s.Item2).Where(x => x.Count() > 1).Select(x => x.Key);

    dupesAsList.Dump();

    dupesGrouped.Dump();
} 
```

注意：我需要使用 lambda 表达式而不是查询语法来执行此操作！

# haskell - GHC 是否尽可能删除多态间接？

> ID：13649526
> 
> 赞同：7
> 
> 时间：2012-11-30T16:52:00.100
> 
> 标签：haskell, polymorphism, ghc

```
showInt :: Int -> String
showInt x = show x 
```

上面的代码`show`是通过`Int`字典调用还是直接调用`Show Int`实例上声明的函数？

我的意思是，GHC 是否会尽可能从生成的代码中删除多态间接？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T17:12:29.310

是的。这是使用 GHC 7.4.2 生成的核心：

```
Foo.showInt :: GHC.Types.Int -> GHC.Base.String
[... attributes omitted ...]
Foo.showInt = GHC.Show.$fShowInt_$cshow 
```

如您所见，它只是对`GHC.Show.$fShowInt_$cshow`.

与如果我们删除类型签名以便使用推断的类型`Show a => a -> String`来代替会发生什么进行比较：

```
Foo.showInt
  :: forall a_aop. GHC.Show.Show a_aop => a_aop -> GHC.Base.String
[... attributes omitted ...]
Foo.showInt =
  \ (@ a_aot) ($dShow_aou :: GHC.Show.Show a_aot) (x_a9Z :: a_aot) ->
    GHC.Show.show @ a_aot $dShow_aou x_a9Z 
```

在这里，它接受一个字典参数`$dShow_aou`，并`GHC.Show.show`在将结果函数应用于参数之前，使用访问器函数从该字典中查找适当的函数`x_a9Z`。

在第一种情况下，至少在概念上，由于具体类型是已知的，GHC 会插入对适当实例字典的直接引用，而不是将其作为参数。然后，可以内联访问器，它基本上只是一个记录标签，并且您可以直接引用相应的函数。

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-11-30T17:12:22.963

GHC 不这样做。考虑一个新创建的可读性类型：

```
type Vector = (Float, Float) 
```

如果 GHC 会从以下函数中删除多态性：

```
(!+!) :: Vector -> Vector -> Vector
(x1, y1) !+! (x2, y2) = (x1 + x2, y1 + y2) 
```

类型将变为：

```
(!+!) :: (Float, Float) -> (Float, Float) -> (Float, Float) 
```

而该功能是专门针对 Vector 的。

# .htaccess - 在 RewriteRule 之后保持良好的 url

> ID：13649529
> 
> 赞同：0
> 
> 时间：2012-11-30T16:52:21.330
> 
> 标签：.htaccess, url-rewriting, rewrite

我有 2 个目标：

-> 向谷歌询问它是永久重定向

-> 重定向完成后保留原始 url

使用此代码，重定向 url 是*/index.php?com=location&lID=$1*而不是*location/([0-9]+)*

```
RewriteEngine on
RewriteRule  location/([0-9]+).* /index.php?com=location&lID=$1 [R=301,L] 
```

但是当我删除 R=301 标志（我只保留 L 标志）时，重定向 url 是好的，但我认为谷歌不会欣赏

# python - 如何对字典进行排序

> ID：13649530
> 
> 赞同：1
> 
> 时间：2012-11-30T16:52:23.440
> 
> 标签：python, dictionary

如何对字典的元素进行排序：

```
with open('directory file txt','r') as f:
     for line in f:
              keys = line.strip().split('.')
              value = keys[-1]
              for key in reversed(keys[1:-1]):
                     value = {key: value}
              result[keys[0]]=value 
```

现在如果打印键我有这个：

```
['a','b','c','d','1']
['a','f','e','d','3']
['f','b','c','d','2']
['a','b','c','d','0'] 
```

我可以按最后一个元素对每个元素进行排序并将其保存到文件中吗？所以我的输出将是：

```
a.b.c.d.0
a.b.c.d.1
f.b.c.d.2
a.f.e.d.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:55:30.533

你不需要字典。您可以将其中的行作为列表读取：

```
with open('directory file txt','r') as f:
    lines = f.readlines() 
```

然后通过指定排序键直接对列表进行排序：

```
lines.sort(key = lambda s: int(s.rsplit('.', 1)[1])) 
```

# ruby-on-rails - 如何在 Rails ActiveRecord 中正确分配 has_many/belongs_to 关系？

> ID：13649540
> 
> 赞同：8
> 
> 时间：2012-11-30T16:52:59.557
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个带有文章和作者模型的 Rails 应用程序。如果我有作者和帖子，并且想表明作者应该是文章的所有者，或者文章属于作者，那么这样做的最佳做法是什么？尤其是：

如果我设置它会有所不同吗

```
my_article.author_id = author_one.id 
```

或者如果我这样做

```
author_one << my_article 
```

使用的关联是

*   作者 has_many 文章
*   文章属于_to 作者

而且，顺便说一句，如果出现类似的问题，最好的查找方法是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T16:56:04.650

以下3个没有区别：

```
my_article.author_id = author_one.id
my_article.save
# same as
my_article.author = author_one
my_article.save
# same as
author_one.articles << my_article 
```

要设置特定帖子的所有者，最常见和可读的方法是：

```
post.author = author
post.save 
```

或更短**的版本**：

```
post.update_attributes(author_id: author.id) # call an implicit save 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T17:03:04.943

*我假设你的意思`author_one.articles << my_article`不仅仅是`author_one << my_article`*

两者之间的一个区别是

```
author_one.articles << my_article 
```

将立即将更改保存到数据库。即，`my_article`如果之前没有保存，它将创建记录，或者它将更新现有记录以具有`author_id`=`author_one.id`

然而

```
my_article.author = author_one 
```

或者

```
my_article.author_id = author_one.id 
```

直到你做一个`my_article.save`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T16:57:11.607

最好的方法是使用：

```
has_and_belongs_to_many 
```

因为，作者可能写了很多文章，而文章可以有很多作者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T17:13:53.300

恕我直言，正确的做法是在您的 Article 类上创建一个实例方法，如下所示：

```
class Author < ActiveRecord::Base
  ...
  def add_an_article(article)
    unless self.articles.include?(article)
      self.articles << article
    end
  end

end 
```

这将为您的模型提供更好的语义并封装关联操作的逻辑......

这样，您的班级也将符合告诉-不问原则： http: [//pragprog.com/articles/tell-dont-ask](http://pragprog.com/articles/tell-dont-ask)。

不幸的是，大多数 Rails 社区都忽略了良好的 OO 原则，而更喜欢最简单但不正确的做事方式！

# sql - PostgreSQL 自动递增的默认值

> ID：13649543
> 
> 赞同：0
> 
> 时间：2012-11-30T16:53:11.990
> 
> 标签：sql, database, postgresql, pgadmin

> **可能重复：**
> [每个 INSERT 的表 ID 的增量值](https://stackoverflow.com/questions/13635812/increment-value-of-a-table-id-for-each-insert)

我需要在一张桌子上设置默认值，

结构：

```
column1    |     column2     |   column3
-----------+-----------------+-------------
10001      |      chair      |     23
10002      |      lamp       |     10 
```

如果我在哪里

INSERT INTO column2 和 column3 值（花瓶，30），column1 将自动递增值 10003，并且每次都使用 +1 值。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:23:31.780

您需要： 1) 创建一个序列。详情[在这里](http://www.postgresql.org/docs/current/static/sql-createsequence.html)

```
CREATE SEQUENCE seq_name -- sequence name
START 10003 -- value for the next row 
```

2) 设置`nextval('seq_name')`为列的默认值`column1`。详情[在这里](http://www.postgresql.org/docs/current/static/sql-altertable.html)。

```
ALTER TABLE table_name
ALTER COLUMN column1
SET DEFAULT nextval('seq_name'); 
```

带有示例的UPD [SQLFiddle 。](http://sqlfiddle.com/#!12/b0ab8/1)

# c# - Windows下如何在Mono上构建protobuf-csharp-port

> ID：13649545
> 
> 赞同：2
> 
> 时间：2012-11-30T16:53:15.180
> 
> 标签：c#, windows, mono, protocol-buffers

我已经阅读了使用under system构建[protobuf-csharp-port的说明。](http://code.google.com/p/protobuf-csharp-port/)我仍然无法让它工作，最终我会打开一个线程来问为什么，但这不是这篇文章的问题。`Mono``Linux/Unix`

我正在使用`Windows`开发，并且我已经使用`VS2010`. 事实是我需要从内部使用生成的 C# 类`Unity3D`，这需要使用 Mono。

我的机器上安装了**Mono 2.8**。

问题是：

是否可以`protobuf-csharp-port`在 Windows 中使用`MonoDevelop`？我试图简单地导入 VS2010 解决方案并使用 Mono 编译它，但它不起作用。

我该怎么做？

编辑

在尝试使用 MonoDevelop 简单地编译 VS 解决方案时，我遇到了几个错误。第一个在以下行中`FieldMappingAttribute.cs`：

```
 public MappedType MappedType { get; private set; } 
```

错误如下：

> FieldMappingAttribute.cs(40,40)：错误 CS0501：“Google.ProtocolBuffers.Descriptors.FieldMappingAttribute.MappedType.get”必须声明一个主体，因为它没有标记为抽象或外部 (CS0501) (ProtocolBuffers)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T16:57:50.390

您不需要自己构建主要的 protobuf-csharp-port 项目......或者如果您这样做，您应该能够很少这样做。

您*不需要*重建 protobuf-csharp-port 只是为了构建生成的 C# 类。只需添加对 Google.ProtocolBuffers.dll 的引用，就可以了。

也就是说，我有一段时间没有在 Mono 上测试它了。它不会做任何*非常*棘手的事情，但您绝对应该彻底测试。

# ios - 使 QLPreviewController “缓存”无效

> ID：13649555
> 
> 赞同：4
> 
> 时间：2012-11-30T16:53:53.923
> 
> 标签：ios, uikit, qlpreviewcontroller

QLPreviewController 似乎根据本地文件的 URL 缓存文件内容。在我的应用程序中，文件内容可以远程更新，并会导致下载新内容。

如果我在 QLPreviewController 中查看文件，远程更新它，然后重新预览它，该文件不会显示为已更新。

该文件肯定在磁盘上更新，其他控件显示正确的更新文件。

我现在使用的解决方法是在预览文件时将文件移动到唯一的文件名（使用时间戳），这当然不会在 QLPreviewController 的缓存中。但是，这还有其他影响，例如，如果应用程序被杀死或崩溃（上帝保佑），我将不知道“在哪里”可以找到下载的文件。

我正在寻找侵入性较小的黑客，或使 QLPreviewController 刷新其缓存的解决方案。API 似乎没有暴露任何东西，所以如果它没有我上面介绍的那么严重，请不要害怕提交 hack（不包括将文件复制/移动到有保证的唯一 URL，我已经利用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T06:32:00.213

您应该在下载完成后使用 refreshCurrentPreviewItem

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T15:02:01.437

我自己也遇到了这个问题。每次我重新加载与当前查看的项目同名的项目时，我都通过重新创建 QLPreviewController 解决了这个问题。创建一个新的 QLPreviewController 会清除缓存。

我知道这是一个老问题，但有人可能有同样的问题，并发现这个答案很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T08:06:56.580

这是iOS中最丑陋的错误。iOS 5 及更高版本中的缓存管理。我认为这也是导致 iCloud 出现故障、Share-at-Home 崩溃等问题的原因。糟糕的缓存管理和最糟糕的同步系统。

好吧，我对此的解决方案是将下载文件存储在一个文件夹中，并使用当前日期来命名该文件夹。它等效于@Rogier 的解决方案，但这始终有效。您将获得文件夹的名称，例如，带有 [[NSDate 日期] 描述]。不是保存替换旧文件的文件，而是删除以前的文件，删除以前的文件夹并将新文件保存在新文件夹中。它对我来说很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T22:14:40.150

我有同样的问题。打开本地生成的 CSV 文件。

我将 _previewController* 设置为控制器的 @property。然后我做了什么：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.previewController = [[QLPreviewController alloc] init];
    _previewController.delegate=self;
    _previewController.dataSource=self;
}

- (void)previewCSV
{
    [_previewController reloadData]; // this triggers a reload
    [self presentModalViewController:_previewController animated:YES];
} 
```

在想到的其他解决方案中（**未经**测试）。

根据您的 URL，您可以在 URL 中添加类似**http://url?time=123456**的内容。像这样您更改 URL 但没有副作用。您可以在每个请求上更改的时间（或任何其他参数）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-30T08:13:30.857

只需从 tmp 目录中删除所有文件，如下所示：

```
- (void)clearCache
{
    NSString *tempPath = NSTemporaryDirectory();
    NSArray *dirContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:tempPath error:nil];

    NSFileManager *fileManager = [NSFileManager defaultManager];

    for (int i = 0; i < [dirContents count]; i++) {
        NSLog(@"Directory Count: %i", [dirContents count]);
        NSString *contentsOnly = [NSString stringWithFormat:@"%@%@", tempPath, [dirContents objectAtIndex:i]];
        [fileManager removeItemAtPath:contentsOnly error:nil];
    }
} 
```

# r - rpy2 importr 因 xts 和 quantmod 而失败

> ID：13649562
> 
> 赞同：3
> 
> 时间：2012-11-30T16:54:13.453
> 
> 标签：r, conflict, xts, rpy2, quantmod

我是 rpy2 的新手，在使用 importr 导入 R 包“xts”和“quantmod”时遇到问题

代码是：

```
from rpy2.robjects.packages import importr
xts = importr('xts')
quantmod = importr('quantmod') 
```

错误是：

```
LibraryError: Conflict when converting R symbol in the package "xts" to a Python symbol (.subset.xts -> _subset_xts while there is already _subset_xts)

LibraryError: Conflict when converting R symbol in the package "quantmod" to a Python symbol (skeleton.TA -> skeleton_TA while there is already skeleton_TA) 
```

对于许多其他软件包，例如“stats”、“graphics”、“zoo”、“ggplot2”，我没有遇到这个问题

版本：

*   蟒蛇版本2.7.3
*   R 版本 2.15.2
*   rpy2版本'2.3.0beta1'

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T18:38:53.380

Rpy2`importr()`正在尝试转换任何“。” 在 R 对象名称中为“_”以便与 Python 一起使用。

但是，只要有两个带有“。”的 R 对象名称。或“_”（这两个字符都对 R 中的名称有效） rpy2 报告错误。这里 R 包“xts”定义了两个对象`.subset_xts`和`.subset.xts`. 解决方法是手动指定如何转换名称：

```
from rpy2.robjects.packages import import
xts = importr("xts", robject_translations = {".subset.xts": "_subset_xts2", 
                                             "to.period": "to_period2"}) 
```

rpy2 文档中提供了有关[导入 R 包](http://rpy.sourceforge.net/rpy2/doc-dev/html/robjects_rpackages.html?highlight=importr#importing-r-packages)的更多信息。

# wcf - 尝试调用 WCF 服务时出现“无法识别的消息版本”异常

> ID：13649563
> 
> 赞同：0
> 
> 时间：2012-11-30T16:54:18.457
> 
> 标签：wcf, c#-4.0

我有一个 WCF 服务，该服务在本地工作，并且以前在单独的服务器上工作（在微小更改之前）。它现在抛出“无法识别的消息版本”CommunicationException。这可能是什么原因造成的？

在故障排除中，我发现它在服务器上的 WCF“魔术”中某处发生，然后才解析为使用为其定义的自定义绑定。

服务器本身最近对其进行了一些修改以添加 SSL 和更改主机名，所以我想知道在 IIS (7.5) 查找服务和我的代码被调用之间是否发生了特定于服务器的事情。

我的服务继承自一个基类，该基类包含一个简单的 Ping 方法，一旦联系就返回成功。这适用于所有其他内部服务器部署，但即使调用此方法现在也会给出无法识别的消息版本。

调用代码只是使用 VS 生成的服务引用来创建一个实例然后调用它：

```
 var MyService = new MyNamespace.MyServiceClient();
        var result = MyService.Ping(); 
```

**更新** 堆栈跟踪（不存在 InnerException）让我想知道它是否与 SOAP 相关：

```
Server stack trace: 
   at System.ServiceModel.Channels.ReceivedMessage.ReadStartEnvelope(XmlDictionaryReader reader)
   at System.ServiceModel.Channels.BufferedMessage..ctor(IBufferedMessageData messageData, RecycledMessageState recycledMessageState, Boolean[] understoodHeaders, Boolean understoodHeadersModified)
   at System.ServiceModel.Channels.TextMessageEncoderFactory.TextMessageEncoder.ReadMessage(ArraySegment`1 buffer, BufferManager bufferManager, String contentType)
   at System.ServiceModel.Channels.MessageEncoder.ReadMessage(Stream stream, BufferManager bufferManager, Int32 maxBufferSize, String contentType)
   at System.ServiceModel.Channels.HttpInput.ReadChunkedBufferedMessage(Stream inputStream)
   at System.ServiceModel.Channels.HttpInput.ParseIncomingMessage(Exception& requestException)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at Lenderprise.WebServiceHost.Test.LLSSTitleSearch.ITitleSearch.Ping()
   at Lenderprise.WebServiceHost.Test.LLSSTitleSearch.TitleSearchClient.Ping() in D:\LLN\DEV\LenderPrise\WebServices\TitleSearchWebServiceHost.Test\Service References\LLSSTitleSearch\Reference.cs:line 138
   at Lenderprise.MainWindow.RunAsLibraryButton_Click(Object sender, RoutedEventArgs e) in D:\LLN\DEV\LenderPrise\WebServices\TitleSearchWebServiceHost.Test\MainWindow.xaml.cs:line 91 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:53:55.543

这里有一个非常小众的案例：我们有一个负载均衡器 (F5)，它也管理 SSL 证书。进来的请求看起来被正确地转发到服务器，但也被重定向回自身。我不是足够了解所有细节的网络工程师，但它是 F5 配置而不是 WCF。

# python - 用于传输列表的最佳 python 客户端/服务器解决方案

> ID：13649565
> 
> 赞同：-1
> 
> 时间：2012-11-30T16:54:28.513
> 
> 标签：python, sockets, python-2.7, client-server

我正在研究客户端/服务器模型，用于传输从客户端站点上的更改文件中读取的一些数据（监视文件更改的窗口 tkinter 客户端）并将其传输到服务器以处理数据（将数据拆分为列表并制作一些东西）。在您看来，最好的解决方案是什么。必须具备的条件之一是它需要安全，所以我想包括一些带有自写证书的 ssl 加密并将其包含到客户端中。我应该在python中使用纯套接字编程还是像gevent或twisted这样的东西？客户端仅在监视的文件发生更改时连接，grep 数据，连接到服务器，传输并断开连接。每小时可能发生 10 次或一天发生 10 次，这不是真正可计算的。

对类似问题的任何建议和经验开放。

谢谢戴夫

**更新**仅供参考：永远只有 1 个服务器和 1 个客户端！

***更新2***：是否也可以包含一种ssl方式，只有拥有证书一部分的客户端才能连接到这个特定的服务器，以防止其他人连接到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:56:43.433

我只会使用 JSON over HTTP(s)，让事情变得简单。看起来您不需要太多原始性能，并且所有 JSON 和 HTTP 库都已包含在 stdlib 中。

无需运行 Apache 或其他任何东西，您只需在 Python 中运行一个小型 Web 服务器：

[http://docs.python.org/2/library/wsgiref.html#module-wsgiref.simple_server](http://docs.python.org/2/library/wsgiref.html#module-wsgiref.simple_server)

您可以将客户端证书与 SSL 一起使用，但没有多少人这样做，因此可能不容易设置。相反，您可以选择一个足够大的随机字符串作为客户端必须包含在请求中的“密码”。如果你想得到所有的幻想，你可以使用 TOTP 一次性密码。

# audio - MPlayer 音频通道（左/右）切换

> ID：13649566
> 
> 赞同：1
> 
> 时间：2012-11-30T16:54:37.430
> 
> 标签：audio, media-player, audio-streaming, mplayer

我正在尝试制作一个应用程序，使用 mplayer 从属模式的媒体播放器。关于在 mplayer-slave 模式下播放视频时即时切换 VCD 卡拉 OK 频道（左右）的任何线索？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T11:09:48.117

[解决了]

切换音轨

剩下`echo "af pan=2:1:1:0:0" > slave_fifo_file`

正确的`echo "af pan=2:0:0:1:1" > slave_fifo_file`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-29T15:08:16.693

我也很难找到这个解决方案，最后发现

```
af_add pan=2:1:1:0:0

af_add pan=2:0:0:1:1 
```

正在为 VCD 卡拉 OK 频道从左到右更改音频频道。我希望这将帮助您开发您的卡拉 OK 软件。

我使用 mplayer 和 VB.NET 开发了基本的音乐播放器。如果你有兴趣请告诉我。

# css - CSS隐藏表格列以进行打印

> ID：13649569
> 
> 赞同：7
> 
> 时间：2012-11-30T16:54:49.753
> 
> 标签：css, html-table

我有表格数据，最后一列包含针对该数据的操作的链接。我希望当有人打印页面时最后一列不可见。

我尝试了以下方法，它在屏幕上工作（看不到最后一列，其余列均匀分布以填充该空间）。

```
@media print {
  table td:last-child {display:none}
} 
```

但它不适用于打印：我没有看到该列，但它所在的位置有空白。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-08T21:30:41.893

这对我有用：

```
 @media print {
       table td:last-child {display:none}
       table th:last-child {display:none}
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-12T16:00:28.770

有一个更通用的解决方案可以应用于许多不同的元素。创建一个 print.css 文件：

```
.noprint {
display: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-04T12:19:30.967

[![表屏幕截图](../Images/df008a3ddf0501cf76a4c0a7099bd5ed.png)](https://i.stack.imgur.com/tsSfl.jpg)

**打印按钮代码**

```
function PrintData()
{
        var divToPrint1 = document.getElementById("editable");
        var divToPrint = divToPrint1;
        divToPrint.border = 1;
        divToPrint.cellSpacing = 0;
        divToPrint.cellPadding = 2;
        divToPrint.style.borderCollapse = 'collapse';

       newWin = window.open();
       newWin.document.write(getHeader());
       newWin.document.write("<h3 align='center'>Master Designation List </h3>");
      $('tr').children().eq(3).hide();
      $('table tr').find('td:eq(3)').hide();
      newWin.document.write(divToPrint.outerHTML);
      newWin.print();
      $('tr').children().eq(3).show();
      $('table tr').find('td:eq(3)').show();
      newWin.close();
} 
```

# c# - asp.net c# - 字段初始值设定项无法引用非静态字段、方法或属性

> ID：13649570
> 
> 赞同：1
> 
> 时间：2012-11-30T16:54:52.157
> 
> 标签：c#, asp.net

我的课堂上有以下代码：

```
 public string StrLog {get; set;} 
```

然后在同一个类中，我有以下代码：

```
 private string imgData = StrLog; 
```

我收到以下错误消息：

```
 A field initializer cannot reference the non-static field, method or property 
```

它有一个问题：

```
 private string imgData = StrLog; 
```

但不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:57:32.933

基本上，您不能通过使用任何其他类级别值来初始化类级别变量（除非该值是静态的） - 这是您的错误试图告诉您的。

您最好的选择是在构造函数中分配值：

```
private string imgData = null;

public MyClass()
{
   imgData = "some value";
} 
```

在您的情况下，为它分配值是没有意义的，`StrLog`因为`StrLog`一开始就没有值。因此，您也可以将其分配给它`null`，或者在其他地方分配一个实际值形式（例如我的示例）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:00:41.870

不允许使用非静态成员来初始化成员变量。

您需要首先通过在构造函数中设置它来初始化它。

例如：

`imgData = null;`

我强烈鼓励你在构造函数中分配*一些东西*（一些东西可能是空的）。这只是*很好的形式。*在下面的示例中，您将了解它为何如此重要。如果先执行 get 并且未设置值怎么办？它至少应该包含一个空值。

话虽如此，如果您希望将 imgData 的值填充为面向公众的属性的值，则需要执行以下操作：

```
public string StrLog
{
   get { return imgData; }
   set { imgData = value; }
} 
```

这会将 StrLog 的值传递给 imgData，您无需进行任何工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-30T17:07:25.910

使 imgData 成为您的财产，与 Strlog 相同。然后分配 . 它会起作用的。

# php - PHP显示已使用的用户名和空字段错误

> ID：13649573
> 
> 赞同：0
> 
> 时间：2012-11-30T16:55:04.433
> 
> 标签：php, mysql, validation, registration, forum

我希望 PHP 确保用户名尚未使用，并检查该字段是否为空。对不起，当谈到 php 时，我是一个大菜鸟。这是我的代码：

```
// Check for an Username:
    $dup = mysql_query("SELECT user_username FROM users WHERE user_username='".$_POST['user_username']."'");
        if(mysql_num_rows($dup) >0){
            $errors[] = 'Username already used.';
        }
        else{
            $un = mysqli_real_escape_string($dbc, trim($_POST['user_username']));
            echo '<b>Congrats, You are now Registered.</b>';
        }
        else {
            $errors[] = 'You forgot to enter your Username.';
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:01:37.107

您有两个`else`不能使用的语句。此外，您需要转义您的`$_POST`数据。最后，随着时间的流逝，您应该远离 mysql_* 函数。使用 mysqli 或 PDO。

```
<?php
$sql = sprintf("SELECT user_username FROM users WHERE user_username='%s'",
        mysql_real_escape_string($_POST['user_username']));
$dup = mysql_query($sql);
if(empty($_POST['user_username'])){
    $errors[] = 'You forgot to enter your Username.';
}elseif(mysql_num_rows($dup) >0){
    $errors[] = 'Username already used.';
}else{
    $un = mysqli_real_escape_string($dbc, trim($_POST['user_username']));
    echo '<b>Congrats, You are now Registered.</b>';
}?> 
```

在我看来，另一种更简单的流程是 try/catch 语句。这样，如果用户名为空，您就不必进行不必要的数据库调用：

```
<?php
try{
    if(empty($_POST['user_username'])){
        throw new Exception('You forgot to enter your Username.');
    }

    $sql = sprintf("SELECT user_username FROM users WHERE user_username='%s'",
        mysql_real_escape_string($_POST['user_username']));
    $dup = mysql_query($sql);

    if(mysql_num_rows($dup) >0){
        throw new Exception('Username already used.');
    }

    echo '<b>Congrats, You are now Registered.</b>';

}catch(Exception $e){
    echo $e->getMessage();
}?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:09:07.120

在执行任何 SQL 查询之前，您应该先检查输入是否存在。

```
if (!empty($_POST['user_username']) && isset($_POST['user_username'])) {
  $dup = mysql_query("SELECT user_username FROM users WHERE user_username='".$_POST['user_username']."'");
  if(mysql_num_rows($dup) >0){
    $errors[] = 'Username already used.';
  }
  else {
    echo 'Username is available.';
  }
}
else {
  $errors[] = 'Username is empty';
} 
```

正如其他人评论的那样，不推荐使用 mysql_* 函数，您还需要考虑如何清理输入。

# java - 如何在 Primefaces 数据表中表示嵌套数据？

> ID：13649578
> 
> 赞同：8
> 
> 时间：2012-11-30T16:55:23.107
> 
> 标签：java, jsf, jsf-2, datatable, primefaces

这是我的模型：

**用户.java**

```
public class User {
   //...

   public List<User> getFriends() {
      // ...
   }
} 
```

我想建立一个这样的用户朋友表：

**用户.jsf**

```
+------------+------------+
| 用户 | 朋友 |
+------------+------------+
| | 爱丽丝 |
| +------------+        
| 亚当 | 鲍勃 |
| +------------+
| | 皮特 |
+------------+------------+
| | |
……

```

由于用户众多，不可能一次性转储用户表。

在这种情况下，数据表组件是理想的，因为它具有内置的分页支持。它也很理想，因为可以对列进行排序......

不幸的是，我无法通过 Primefaces 示例找到更改用户列中的行跨度的方法。

我怎样才能建立这个数据表？

其他一些有类似问题的OP：

*   [Primefaces/JSF 嵌套数据表](https://stackoverflow.com/questions/11610409/primefaces-jsf-nested-data-table)
*   [如何在同一行中包含包含 Primefaces 的子表的数据表？我的怎么了？](https://stackoverflow.com/questions/9982944/how-to-do-a-datatable-containing-a-subtable-with-primefaces-in-the-same-row-wha?rq=1)
*   [具有行跨度的 Primefaces 数据表](https://stackoverflow.com/questions/13139490/primefaces-datatable-with-rowspan)
*   ...添加你的？

**编辑**
这是[我想出的最终解决方案](https://stackoverflow.com/a/41747423/363573)。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T22:41:54.433

**只需在列中使用另一个数据表:)**

```
<h:column>
    <h:dataTable var="friend" value="#{user.friends}">
        <h:column>
            <h:outputText value="#{friend.name}"/>
        </h:column>
    </h:dataTable>
</h:column> 
```

**这就是它在我的本地主机上的样子**

![在此处输入图像描述](../Images/f0f64d92cffcaea5202cf95d6716fdbb.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-16T19:20:27.050

另一种选择是`ui:repeat`在列内使用来获取集合的所有值。

例子：

```
<p:dataTable var="user" value="#{userGroupBacking.users}" id="userTable">

    <p:column headerText="User">
        <h:outputText value="#{user.name}" />
    </p:column>

    <p:column headerText="Groups">
        <ui:repeat var="group" value="#{user.groups}">
            <h:outputText value="#{group.name}" /><br />
        </ui:repeat>
... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T17:31:45.927

Primefaces[可扩展行](http://primefaces.org/showcase/ui/datatableExpandableRows.jsf)应该可以满足您的需求，只是您需要使用子行组件来发挥创意。您可以使用素面[数据列表组件](http://primefaces.org/showcase/ui/dataListUnordered.jsf)作为子行组件。它看起来像：

```
 <p:row expansion>
    <p:datalist value ="#{yourTableRowVar.friendslist} Var="friend">
    #{friend.firstName}
    </p:datalist>
   </p:row expansion> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-26T11:57:02.847

对我来说有两个解决方案：

1-如果我想逐个用户浏览并检索朋友列表，在这种情况下，我更喜欢**dataList**。

```
<p:dataTable value="#{users.list}" var="u">

    <p:column headerText="USER">#{u.name}</p:column>    
    <p:column headerText="FRIENDS">
        <p:dataList value="#{u.friends}" var="f">
            #{f.name}
        </p:dataTable>
    </p:column>

</p:dataTable> 
```

2- 在我可以**直接处理朋友列表**（listFreinds [userName,friend]）或者当我使用**JPQL 查询**的情况下：

```
<p:dataTable value="#{users.listFreinds}" var="u" sortBy="#{u.userName}">

    <p:column headerText="USER" groupRow="true">#{u.userName}</p:column>    
    <p:column headerText="FRIENDS">#{u.friend}</p:column>

</p:dataTable> 
```

第二种情况，是自 v6.0.11 以来使用**Primefaces Row Grouping的新原生解决方案**

[https://www.primefaces.org/showcase/ui/data/datatable/rowGroup.xhtml](https://www.primefaces.org/showcase/ui/data/datatable/rowGroup.xhtml)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-19T16:54:51.237

根据@Kerem 的回答，这是我想出的解决方案：

为了使嵌套数据表像自己的主数据表行一样，我已经覆盖了 CSS 类`.ui-dt-c`。检查标签以获取详细信息`h:head`。`style`

```
<?xml version="1.0" encoding="UTF-8"?>
<html
    xmlns="http://www.w3c.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <title>USERS and their friends</title>
    <style>
       .ui-dt-c {
          padding: 0px !important;
       }
    </style>
</h:head>
<h:body>
<h:form id="form">
<p:dataTable
    value="#{users.list}"
    var="u">

    <p:columnGroup type="header">
        <p:row>
            <p:column headerText="USER" />
            <p:column headerText="FRIENDS" />
        </p:row>
    </p:columnGroup>

    <p:column>#{u.name}</p:column>
    <p:column>
        <p:dataTable
            value="#{u.friends}"
            var="f">
            <p:column>#{f.name}</p:column>
        </p:dataTable>
    </p:column>
</p:dataTable>
</h:form> 
```

# jquery - jQuery Slider 子弹导航

> ID：13649582
> 
> 赞同：2
> 
> 时间：2012-11-30T16:55:34.340
> 
> 标签：jquery, html, css, slider

我在 jQuery、CSS 和 HTML 中创建了一个滑块。

它使用箭头和项目符号进行导航以及自动播放系统。

我遇到的问题是：我希望滑块更改用户单击相应项目符号时显示的幻灯片（即项目符号 1 幻灯片 1 等）但是当用户单击项目符号时，没有任何反应。

我曾尝试使用警报来确定代码失败的位置，但似乎`$('.bullet').click(function(){})`在单击时甚至没有调用`<span class="bullet">`。

该错误似乎是因为项目符号是自动生成的。我不明白为什么。

这是每个人的小提琴：http: [//jsfiddle.net/TczNn/7/](http://jsfiddle.net/TczNn/7/)

这是代码：

```
<!-- BEGIN CONTENT -->
        <div id="content">

            <!-- BEGIN CONTENT TOP SLIDESHOW -->
            <div id="top-slide">
                <div class="wrapper">

                <!-- BEGIN CONTENT TOP SLIDESHOW SLIDES -->
                    <div id="slide0" class="slide">
                        <h2>Your Site... Defined</h2>
                        <h4>With D&amp;D there is no inbetween, we will never compromise your requirements.</h4>
                    </div>  

                    <div id="slide1" class="slide">
                        <h2>Your Site... Defined 2</h2>
                        <h4>With D&amp;D there is no inbetween, we will never compromise your requirements.</h4>
                    </div>                     

                    <div id="slide2" class="slide">
                        <h2>Your Site... Defined 3</h2>
                        <h4>With D&amp;D there is no inbetween, we will never compromise your requirements.</h4>
                    </div>                     
                <!-- END CONTENT TOP SLIDESHOW SLIDES -->

                </div>

                <div id="numSlides">3</div>

                <div class="arrows">
                    <span class="arrow left"></span>
                    <span class="arrow right"></span>
                </div>
                <div id="select">
                    <div class="wrapper">
                        <div class="bullets">
                        </div>
                        <div class="clear"></div>
                    </div>
                </div>          
            </div>
            <!-- END CONTENT TOP SLIDESHOW -->
    </div> 
```

CSS：

```
/*====================================================
    D&D Creative Solutions
    ----------------------------------------------
        Explore D&D Creative - v1.0
        Date: 30/11/2012
        Stylesheet By: David Passmore
        StandAlone
    ----------------------------------------------
© D&D Creative Solutions - All Rights Reserved
====================================================*/

/*============================================
    ENABLE FONTS
============================================*/

@import url(http://fonts.googleapis.com/css?family=PT+Sans:400,700);

body {
    font-family:"PT Sans";
    font-size:13px;
}

/*============================================
    LINKS
============================================*/
a {
    text-decoration:none;
    color:#CCCCCC;
    -moz-transition: color 150ms ease-out;
    -webkit-transition: color 150ms ease-out;
}

/*============================================
    LAYOUT
============================================*/
html, body {
    width:100%;
    height:100%;
    margin:0;
    padding:0;
}

.wrapper {
    width:1000px;
    margin:0 auto;
}

#header .wrapper, #footer .wrapper {
    width:1100px;
}

.clear {
    clear:both !important;
    float:none !important;
}

/*============================================
    HEADER
============================================*/
#header {
    position:fixed;
    height:55px;
    line-height:55px;
    background-color:#3D3B37;
    color:#FFFFFF;
    width:100%;
    top:0;
    z-index:9999;
}

#header .wrapper ul {
    list-style:none;
    margin:0;
    padding:0;
}

#header .wrapper ul > li {
    float:left;
    margin:0 8px;
}

#header .wrapper div.main-nav {
    float:right;
    text-transform:uppercase;
    font-size:12px;
}

#header .wrapper div.top-logo {
    float:left;
    text-transform:uppercase;
    font-size:16px;
    width:126px;
    height:55px;
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/common/header/logo-new.png) center no-repeat;
}

/*
#header .wrapper div.main-nav ul li.separator {
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/common/header/header-nav-sep.png) center no-repeat;
    width: 5px;
    height: 55px;
}
*/

#header .wrapper div.main-nav ul li.separator {
    line-height:53px;
}

#header .wrapper div.main-nav ul li {
    color:#CCCCCC;
}

#header .wrapper div.main-nav ul li a:hover {
    color:#FFFFFF;
}

#header .wrapper div.main-nav ul li.active {
    color:#FFFFFF;
}

/*============================================
    CONTENT
============================================*/
#content {
    min-height:100%;
    margin-top:55px;
    padding-top:10px;
}

/*============================================
    FOOTER
============================================*/
#footer {
    background-color:#3D3B37;
    color:#CCCCCC;
    height:30px;
    line-height:30px;
    font-size:10px;
    text-transform:uppercase;
}

#footer .wrapper > div {
    float:left;
    margin-left:50px;
}

#footer .wrapper div.links ul li a:hover {
    color:#FFFFFF;
}

#footer .wrapper div.social {
    float:right;
    margin-left:0;
}

#footer .wrapper div > ul {
    list-style:none;
    margin:0;
    padding:0;
}

#footer .wrapper div ul > li {
    float:left;
    margin:0 8px;
}

#footer .wrapper div.links ul li.separator {
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/common/footer/footer-nav-sep.png) top no-repeat;
    width: 5px;
    height: 17px;
    margin-top: 5px;
}

/*============================================
    HOME.PHP
============================================*/
#home #content #top-slide {
    background-color:#3D3B37;
    height:300px;
    position:relative;
    color:#FFFFFF;
}

#home #content #top-slide .slide {
    position:absolute;
    opacity: 0;
    left:-1000px;
}

#home #content #top-slide .wrapper {
    position:relative;
}

#home #content #top-slide #numSlides{
    visibility: hidden;
}

#home #content #top-slide h2, #home #content #top-slide h4 {
    position:absolute;
    margin:0;
}

#home #content #top-slide h2 {
    margin:60px 0 0 0;
    font-size:36px;
    text-shadow: 0 1px 1px #1F1E1C;
}

#home #content #top-slide h4 {
    margin:150px 0 0 0;
    text-shadow: 0 1px 1px #1F1E1C;
}

#home #content #top-slide .arrows {
    width:1100px;
    margin:0 auto;
    height:300px;
    position:absolute;
    top:0;
    left:0;
    right:0;
}

#home #content #top-slide .arrows span.arrow {
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/home/arrows.png) no-repeat;
    display:block;
    height:36px;
    width:25px;
    position:absolute;
    top:40%;
}

#home #content #top-slide .arrows span.arrow.left {
    background-position:left;
    left:0;
}

#home #content #top-slide .arrows span.arrow.right {
    background-position:right;
    right:0;
}

#home #content #top-slide #select {
    height:48px;
    width:100%;
    position:absolute;
    bottom:0;
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/home/bg-slie-select.png) repeat;
    display:none;
    line-height:48px;
}

#home #content #top-slide #select span.bullet {
    height:48px;
    width:25px;
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/home/bullets.png) no-repeat right;
    line-height:48px;
    display:block;
    float:left;
    cursor:pointer;
}

#home #content #top-slide #select span.bullet:hover {
    background-position:center;
}

#home #content #top-slide #select span.bullet.selected {
    background-position:left;
}

#home #content #twitter-main {
    background-color:#cccccc;
    height:200px;
    margin:10px 0;
    padding-top:30px;
    text-align:center;
}

#home #content #twitter-main i.icon-twitter {
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/common/social/twitter.png) no-repeat center;
    width:37px;
    height:37px;
    margin:0px auto 20px auto;
    display:block;
}

#home #content #twitter-main span.divider {
    border-top:1px solid #535353;
    height:0;
    width:100px;
    display:block;
    margin:0 auto;
}

#home #content #twitter-main h2.feed {
    margin:40px 0;
}

#home #content #twitter-main p.info {
    font-size:10px;
    color:#666666;
}

#home #content #services {
    height:500px;
    margin:0 0 10px 0;
    background:#DDDDDD;
    padding-top:20px;
}

#home #content #services .wrapper > h2{
    margin-top:0px;
    font-size:24px;
}

#home #content #services .cols .col {
    margin:0 50px;
    float:left;
    width:233px;
    text-align:center;
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/home/services-c-c.png) no-repeat top;
    height:260px;
    padding-top:170px;
}

#home #content #services .cols #ac.col {
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/home/services-c-ac.png) no-repeat top;
}

#home #content #services .cols #sup.col {
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/home/services-c-support.png) no-repeat top;
}

#home #content #services .cols #qu.col {
    background:url(http://new.dpwebdev.co.uk/business-sites/explore-d-and-d/media/img/home/services-c-qu.png) no-repeat top;
}

#home #content #services .cols .col span.divider {
    border-top:1px solid #3D3B37;
    height:0;
    width:100px;
    display:block;
    margin:0 auto;
}
/*============================================
    STAFF.PHP
============================================*/
#staff #content #top-content {
    background-color:#3D3B37;
    height:300px;
    margin-top:-10px;
    position:relative;
    padding-top:20px;
    color:#FFFFFF;
    text-align:center;
}

#staff #content #top-content h1 {
    font-size:36px;
}

#staff #content #top-content span.divider {
    border-top:2px solid #FFFFFF;
    height:0;
    width:400px;
    display:block;
    margin:0 auto;
}

/*============================================
    STAFF.PHP
============================================*/

#contact #content #top-content {
    background-color:#3D3B37;
    height:300px;
    margin-top:-10px;
    position:relative;
    padding-top:20px;
    color:#FFFFFF;
    text-align:center;
}

#contact #content #top-content h1 {
    font-size:36px;
}

#contact #content #top-content span.divider {
    border-top:2px solid #FFFFFF;
    height:0;
    width:400px;
    display:block;
    margin:0 auto;
} 
```

​ JS：

```
$(document).ready(function() {

    //HOME.PHP
    $('#home #top-slide').bind("mouseenter", function(){
      $('#select').stop(true).fadeIn(600);
    });

    $('#home #top-slide').bind("mouseleave", function(){
      $('#select').stop(true).fadeOut(600);
    });

    //HOME.PHP - SLIDER

    function mainSlider() {
        var numsliders;
        var currentSlider = 0;
        var interval;
        var slideWidth;

        $('#slider0').css('opacity', 1);
        $(document).ready(function() {
            numsliders = parseInt($('#numSlides').html());
            generateBullets();
            $('#slide0').css('left', '0px');
            $('#slide0').css('height', '300px');
            $('#slide0').css('width', '1000px');
            $('#slide0').css('top', '0px');
            $('#slide0').css('opacity', '1');
            $('#slide0').addClass("showing");
            slideWidth = $('#slide0').width();
        });

        function nextSlider() {
            specificSlider((currentSlider + 1) % numsliders);
        }

        interval = window.setInterval(nextSlider, 7000);

        //arrow, bullet and autoplay functions

        function previousSlider() {
            if (currentSlider !== 0) {
                specificSlider((currentSlider - 1));
            }
        }

        function generateBullets() {
            var $bullet = $('#select .bullets');

            for (var i = 0; i < numsliders; i++) {
                $bullet.append('<span class="bullet" id="' + i + '"></span>');
            }

            $('.bullets #0').addClass("selected");
        }

        //call arrow functions
        $('span.arrow.left').click(function() {
            previousSlider();
        });

        $('span.arrow.right').click(function() {
            nextSlider();
        });

        //call bullet functions
        $('.bullet').click(function() {

            var $id = $(this).attr("id");

            specificSlider($id);
        });

        function specificSlider(sliderNumber) {
            window.clearInterval(interval);

            // move the next slider on deck
            $('#slider' + sliderNumber).css('left', $('#top-slide').css('width'));
            $('#slider' + sliderNumber).css('top', '0px');
            $('#slider' + sliderNumber).css('height', '300px');
            $('#slider' + sliderNumber).css('width', '1000px');

            // move old slide off, 
            $('#slide' + currentSlider).animate({
                left: '-1020px',
                top: '0px',
                height: '300px',
                width: '1000px',
                opacity: 0
            }, 900, null);
            $('#slide' + currentSlider).removeClass("showing");
            $('.bullets #' + currentSlider).removeClass("selected");

            // new slide on
            $('#slide' + sliderNumber).animate({
                left: '0px',
                height: '300px',
                width: '1000px',
                top: '0px',
                opacity: 1
            }, 900, null);
            $('#slide' + sliderNumber).addClass("showing");
            $('.bullets #' + sliderNumber).addClass("selected");

            currentSlider = sliderNumber;

            interval = window.setInterval(nextSlider, 7000);
        }
    }

    //initalise slider 
    mainSlider();

});​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:59:56.817

您正在使用项目符号类动态创建**跨度**..因此正常的单击事件将不起作用..您需要**将该事件委托**给静态父级..

```
$('.bullet').click(function() { 
```

应该是

```
$('body').on('click','.bullet' ,function() { 
```

# java - 不可变类/对象、私有构造函数、工厂方法

> ID：13649584
> 
> 赞同：10
> 
> 时间：2012-11-30T16:55:42.680
> 
> 标签：java, singleton, immutability

已经阅读了如何通过以下步骤使类不可变

1.  不要提供“setter”方法——修改字段或字段引用的对象的方法。
2.  将所有字段设为最终字段和私有字段。
3.  **不允许子类覆盖方法。最简单的方法是将类声明为 final。更复杂的方法是使构造函数私有并在工厂方法中构造实例。**
4.  如果实例字段包含对可变对象的引用，则不允许更改这些对象
    ：不要提供修改可变对象的方法。
    湾。不要共享对可变对象的引用。永远不要存储对传递给构造函数的外部可变对象的引用；如有必要，创建副本并存储对副本的引用。同样，在必要时创建内部可变对象的副本以避免在方法中返回原始对象。

我不确定我是否清楚地了解私有构造函数和工厂方法在不变性上下文中的效用。如果我将课程定为最终课程，则基本上是关闭任何其他扩展它的课程的所有路径。所说的更复杂的方法如何

我已经看到了单例模式中的私有构造函数、工厂方法，这是有道理的。但是当我们谈论对象不变性时，当我们提到私有构造函数和静态工厂方法时，我们是否也在限制对象构造/实例化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:14:14.457

首先，不可变类通常不应该被覆盖有几个原因，你可以在[这里](https://stackoverflow.com/questions/146311/immutable-class-should-be-final)找到它们。

也就是说，将构造函数设为私有只是防止类被覆盖的一种方法。为什么？因为在子类中，每个构造函数（隐式）调用`super()`，基类的默认构造函数。但是，如果您将此构造函数设为私有，子类将无法调用它，因此无法覆盖基类。当您想要控制特定类的实例总数时，这种方法非常适合，例如在单例的情况下。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-27T12:10:38.283

仔细阅读以下几点后

**不允许子类覆盖方法。最简单的方法是声明类 final。更复杂的方法是使构造函数私有并在工厂方法中构造实例。**

我认为这里的重点不是

使类最终和私有构造函数。

重点是

**你要么让你的类成为最终的，要么有一个私有的构造函数。**

希望能帮助到你！！

[资源](https://docs.oracle.com/javase/tutorial/essential/concurrency/imstrat.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T17:46:20.193

我认为这里的大问题是未来的重构。假设在以后的版本中，您发现如果您可以将 MyClass 的一些新特例拆分为子类 MySpecialClass，这会使事情变得更简单。

如果 MyClass 是具有公共构造函数的可变类，您可以这样做并告诉新功能的用户创建一个新的 MySpecialClass。现有用途不受影响。

如果 MyClass 有私有构造函数和工厂方法，就没有问题。您声明 MySpecialClass 嵌套在 MyClass 中，也使用私有构造函数。添加和/或修改工厂方法以选择要创建的方法，但要确保现有调用继续兼容地工作。

如果 MyClass 是不可变的、最终的，但有一个公共构造函数，你会怎么做？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T17:08:44.793

嗯你是对的。将构造函数设为私有没有任何意义。通过这样做，我们限制了实例的创建，这不是不变性的理想场景。

在 sun 站点中提到的示例中，没有将构造函数设为私有 [http://docs.oracle.com/javase/tutorial/essential/concurrency/syncrgb.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncrgb.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T17:36:13.980

**不变性**- 对并发非常有帮助，因为它避免了在线程环境中可能创建的各种***不变量。***

**FACTORY METHODS** - 只是一个命名约定，因为它们更**冗长**的阅读和易于理解的自定义名称。例如：`copyOf()`方法比创建复制构造函数更有意义。正如**Joshua Bloch**在 Effective Java 中所说

**PRIVATE CONSTRUCTORS** - 它们在像 Singleton 这样的模式中有自己的用途，但也有自己的局限性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-30T17:50:32.290

我自己在**Effective Java** Item 15 中的一些发现，粘贴了相同的相关语句

“回想一下，为了保证不可变性，一个类不能允许自己被子类化。通常这是通过将类设为 final 来完成的，但还有另一种更灵活的方法可以做到这一点。将不可变类设为 final 的替代方法是让它的所有构造函数都是私有的或包私有的，并添加公共静态工厂来代替公共构造函数（第 1 项）。

虽然这种方法并不常用，但它通常是最好的选择。它是最灵活的，因为**它允许使用多个包私有实现类。**对于位于其包外的客户而言，不可变类实际上是最终类，因为无法扩展来自另一个包且缺少公共或受保护构造函数的类。**除了允许多个实现类的灵活性之外，这种方法还可以通过改进静态工厂的对象缓存能力在后续版本中调整类的性能。**

"

然后讨论静态工厂与构造函数的优势

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-30T17:08:55.360

那是因为使用私有构造函数我们不能创建它的子类，因此限制了任何其他扩展它的类的所有路径。它很复杂，因为它有自己的局限性/复杂性，比如单例模式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-31T18:46:59.363

私有构造函数背后的想法是，您希望隐藏类数据的不可变实现，同时允许构造具有相同内部类型的不同数据的新实例。

例如

```
public class Temperature
{
    private readonly double temperatureInCelsius;

    public Temperature(string temperatureInCelsius)
    {
         this.temperatureInCelsius = System.Convert.ToDouble(temperatureInCelsius);
    }
    private Temperature(double temperatureInCelsius)
    {
         this.temperatureInCelsius = temperatureInCelsius;
    }

    public Temperature AddCelsius(string temperatureToAddInCelsius)
    {
         return new Temperature(System.Convert.ToDouble(temperatureToAddInCelsius) + temperatureInCelsius);
    }
    public void PrintCelsius(Display display)
    {
        display.Print(temperatureInCelsius);
    }
    public void PrintFarenheit(Display display)
    // ... etc
} 
```

忽略示例的半愚蠢，如果您的要求是可以从表示温度的字符串构造类。它实际存储温度的方式可能会发生变化，并且是一个实现细节。可以将此类更改为使用浮点数、字符串、双精度数、整数等。此方法保持不变性，同时允许实现灵活性。显然，当您包装更复杂的对象（如集合、字典等）时，这会变得更加强大。

# android - 操作栏和片段？

> ID：13649585
> 
> 赞同：1
> 
> 时间：2012-11-30T16:55:45.867
> 
> 标签：android, android-fragments, android-actionbar

我有一个操作栏，左侧有一个按钮，中间有一个徽标，右侧有另一个按钮。但是，每当我启动新的意图或活动时，整个操作栏都会“刷新”。

我知道我需要使用 Fragments。但是，我该如何实施呢？我看到很多例子都是带有标签的片段。但我只是希望我的操作栏在我从一项活动转移到另一项活动时保持固定。我根本没有任何标签。

你能给我举例说明我该如何实施它吗？如果我有活动 A 和 B。这是否意味着我应该有 2 个片段？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:21:34.833

如果您希望所有活动只有一个操作栏，您将创建一个`FragmentActivity`类，您将在其中显示片段。只有这`FragmentActivity`会有一个操作栏。

您可以在其（FragmentActivity's）主体中添加、删除、替换 Fragments 并在需要时更改它，就像这样

```
 FragmentManager fmu = getSupportFragmentManager();
  FragmentTransaction transaction = fmu.beginTransaction();
  transaction.replace(R.id.realViewSwitcher_body, English.newInstance()).commit(); 
```

这是我用片段替换它的`realViewSwitcher_body`初始视图（它的方法返回片段实例）`FragmentActivity``English.newInstance()`

这是整个场景，您使用选项卡或查看页面等，根据我的知识和经验，您不能将意图用于只有一个操作栏的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:17:51.267

基本上，`Fragment`可以放入布局或`FrameLayout`. 您需要做的就是创建一个 Fragment 实例，然后像往常一样使用`FragmentTransaction`您从中获取的实例。`FragmentActivity`

# java - 如何限制 JComboBox 中的可编辑文本？

> ID：13649587
> 
> 赞同：2
> 
> 时间：2012-11-30T16:55:52.107
> 
> 标签：java, jcombobox

我的 jcombobox 中已经有了这个：

```
myjcombobox.getEditor().getEditorComponent().addKeyListener(new KeyAdapter() {
        @Override
        public void keyTyped(KeyEvent e) {
            char c = e.getKeyChar();
            if (!(Character.isDigit(c)
                    || (c == KeyEvent.VK_BACK_SPACE)
                    || (c == KeyEvent.VK_DELETE))) {
                getToolkit().beep();
                e.consume();
            }
        }
    }); 
```

此代码可防止在 jcombobox 中写入除数字之外的任何字符。只有数字。但由于我的 jcombobox 是可编辑的，用户可以写几个数字，这就是问题所在，我想设置最大长度为 4 位但不知道我该怎么做......

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:05:10.687

将您自己`Document`的组件设置为（假设它是 a `JTextField`）：

```
.setModel(new PlainDocument(){

    public void insertString(int offset, String text, AttributeSet attr){
        if(getLength() + text.length() > 4){
            Toolkit.getToolkit.beep();
            return;
        }

        for(char c : text.toCharArray(){
            if(!Character.isDigit(c){
                || (c != KeyEvent.VK_BACK_SPACE)
                || (c != KeyEvent.VK_DELETE)){

                Toolkit.getToolkit.beep();
                return;
            } 

        }
        super.insertString(offset,text,attr);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:13:31.163

假设你的 JCombobox 是最终的，你可以试试这个：

```
myjcombobox.getEditor().getEditorComponent().addKeyListener(new KeyAdapter() {

            @Override
            public void keyTyped(KeyEvent e) {
                char c = e.getKeyChar();
                if (myjcombobox.getEditor().getItem().toString().length() < 4) {
                    if (!(Character.isDigit(c) || (c == KeyEvent.VK_BACK_SPACE) || (c == KeyEvent.VK_DELETE))) {
                        f.getToolkit().beep();
                        e.consume();
                    }
                } else { 
                    e.consume();
                }
            }
        }); 
```

# mysql - 导入转储文件而不会中断服务

> ID：13649594
> 
> 赞同：1
> 
> 时间：2012-11-30T16:56:20.923
> 
> 标签：mysql, mysqldump, database-backups

我为实时 mySQL 数据库同步开发了一种自定义机制，与内置的 mySQL 主/从*复制*相比，它随着时间的推移提供更高的可靠性（数据完整性） 。

同步机制以周期性循环运行，每 5 秒触发一次，由以下阶段组成：

1.  主*数据库*被命令通过`mysqldump`
2.  转储文件被传输到远程服务器，拥有从*数据库*。此传输利用了`rsync`delta 算法和数据压缩
3.  远程服务器等待接收确认以继续
4.  远程服务器将接收到的转储文件导入从属mySQL数据库
5.  远程服务器确认本地服务器同步周期已完成

为了防止主从之间的任何不一致，转储文件将删除整个从数据库调用`mysqldump`。`--add-drop-database`

由于从机在不中断 mySQL 守护进程的情况下导入转储文件，我担心如果在 mySQL`drop database`从转储文件读取指令之后的时间窗口内，以及在 mySQL 完成所有表的重新创建之前，mySQL 客户端试图访问尚未重新创建的表的数据库可能会导致他的请求失败。

可能会发生这种情况，或者在游戏过程中，任何试图访问数据库的最终客户端都被安静地暂停，直到它的请求可以被执行？最终，可以应用哪些解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:25:07.057

为了避免从可能试图连接到特定数据库的任何客户端下拉出地毯，最好的方法可能是每次刷新时不要`DROP`和数据库。`CREATE`

一种可能被证明更可靠的方法是一次将数据加载到备用表中，然后进行批量切换。例如：

```
CREATE TABLE __users (...);
INSERT INTO __users (...) VALUES (...), ...;

CREATE TABLE __things (...);
INSERT INTO __things (...) VALUES (...), ...;

RENAME users to _users, __users to users, things to _things, __things to things;
DROP table _users;
DROP table _things; 
```

如果您将所有内容正确排列，则批量重命名操作将自动执行。

您要么必须更改原始 SQL 转储本身中的名称，要么转储为更容易解析的格式，例如`SELECT INTO ... OUTFILE`稍后使用`LOAD DATA INFILE`.

请注意，此方法将不处理`VIEW`或`TRIGGER`对象等。它只适用于普通的旧表。在重新加载过程中，您还需要有足够的可用空间来创建整个数据库的两个副本。

# php - php会话中的2在IE中变为0？

> ID：13649597
> 
> 赞同：1
> 
> 时间：2012-11-30T16:56:37.020
> 
> 标签：php, internet-explorer, session

好吧，我有一个最奇怪的问题。（警告：前面的文字墙）

我正在跟踪我的变量`$_SESSION`，该变量设置为不同的数字，具体取决于用户通过 AJAX 单击的选项卡。为方便起见，我还在目标站点上设置了该变量以确保它已设置（对于没有启用 JS 或类似问题的人）。

每个浏览器都可以正常工作。现在我正在使用 IE 进行测试，一旦您在目标站点上单击另一个链接以找到带有 value 的选项卡`2`，该值就会自行重置为`0`. 每个其他选项卡（可能的值是`0`, `1`，`2`当然，`3`因为`4`有五个选项卡）工作正常。

如果我注释掉目标站点中的便利分配（每个目标站点都有那个顺便说一句）选项卡`2`也会突然起作用。尽管调试这表明目标站点将值设置`int(2)`为`int(2)`... 所以没有发生真正的变化（但是，删除这个不变的变化可以修复它）。

现在的问题是：
&@#$ Internet Explorer 做了什么来搞砸一个完美的 php 会话？

我已经多次检查了我的整个项目并调试了其中的大部分以找到导致此问题的原因，但一无所获。只有三行设置了值。

1.  会话对象是第一次创建并获取值`0`。
    我已经检查过了，它真的只在会话创建时被调用。（我已经用回声包围了这条线，如果它被调用，它应该在某处可见，但它从来没有）

2.  AJAX 调用集的接收方法是它从中读取的值`$_GET`。
    这有效并且可以在以下`window.location.href="..."`重定向到目标站点时继续存在。

3.  在目标站点上，以确保为未启用 JavaScript 的人设置了该值。
    这似乎是它变得毛茸茸的地方，尽管调试并没有显示出任何错误的行为。

我还检查了是否由于某种原因序列化无法序列化，但是在单击选项卡并更改页面后`2`检查会话文件`/var/lib/php5`显示完全健康且设置正确。`2`

在调试会话初始化时（无论是`session_start()`在序列化对象完成唤醒例程之后还是之后），我发现该值`0`位于以下站点请求中（显然是在单击选项卡并被重定向到目标站点之后）。所以我认为php derping反序列化会是一个问题。所以我创建了另一个用于测试的属性，将 a 存储`2`在其中并让它加载几次，它总是加载为`2`. 此外，我测试过的任何其他浏览器（即 Firefox 和 Chrome）在选项卡 2 上都没有任何问题......所以 php 做愚蠢的事情也被破坏了。

我想到的另一个想法是 IE 有趣的隐私东西，喜欢忘记像这样的 cookie 和笑话，所以我通过所有页面和 AJAX 请求跟踪会话 ID。
它从未改变。因此，获取具有默认值的新会话对象也`0`被破坏了。此外，任何其他选项卡都适用于 IE。

最后我检查了做所有 AJAX 事情的 javascript 东西。所有三个选项卡都运行完全相同的代码，因此没有真正的原因导致它失败，`2`但我还是这样做了。
正如我所预料的那样，那里也没有任何问题。所有呼叫都正常进行，并从服务器获得正确的响应以继续工作。

现在我不知道还有什么需要检查或调试。我什至不明白 IE 是如何在请求之间操作存储在服务器上文件中的服务器端变量的。
我知道这一定与 IE 有关，因为如果这是我的服务器端编程中的一个错误，我也会在其他浏览器中看到效果，对吧？

有没有人知道我还能做些什么来揭穿这个？？？

* * *

当然，这里是我正在使用的所有软件和东西的规格：

Internet Explorer 9.0.8112.16421 在 Windows 7 32 位上作为 VirtualBox 来宾（存在错误）
Internet Explorer 9.0.8112.16421 在 Windows 7 64 位上在真机上（存在错误）
Firefox 16.0.2 在 Fedora 17 x64 上在真机上（错误**不**存在）
Firefox 16.0.1 on Windows 7 64bit on a real machine (bug **not** present)
Chrome ? （大约 2 周前安装）在真机上的 Windows 7 64 位上（**不**存在错误）
Opera Mobile 12.10.ADR-1211271253 在真机上的 Android 2.3.3 上（**不**存在错误）

服务器是运行内核 2.6.32-5-amd64 的 Debian 6 上带有 PHP 5.3.3-7 的 Apache 2.2.16

* * *

**2012 年 12 月 3 日更新：**

显然它与嵌入在目标页面中的 Flash 视频有关。将它放在其他选项卡之一的目标页面中，我也能够重现其他选项卡的问题。

它似乎也只在加载视频时发生；音频文件不会触发错误。

不过这有点奇怪，因为所涉及的 javascript 代码除了添加一个嵌入之外什么都不做。有问题的播放器是*Nonverblaster*，它是免费的，到目前为止没有造成任何麻烦。

显然它也利用了[http://code.google.com/p/swfobject/](http://code.google.com/p/swfobject/)。

卸载 Flash 播放器后，该错误也消失了，因此它肯定与此视频播放器有关。我还不确定它是如何做到的，因为加载 .swf 和 .flv 文件与 php 会话无关，但它似乎以某种方式做到了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:51:16.293

似乎当 IE 向服务器请求 .swf 时，它不会发送会话 cookie。然后，这会导致服务器重新生成 cookie。

一些相关的讨论——

*   [http://ellislab.com/forums/viewthread/77044/](http://ellislab.com/forums/viewthread/77044/)：虽然这与Flash上​​传器有关，但问题本质上是相同的。
*   [http://snipplr.com/view/15180/](http://snipplr.com/view/15180/)：为 asp.net 提供了一个解决方案，它可能提供指向 php 补救措施的指针。
*   <iframe> 中的 Flash 应用程序在 IE和Flash 播放器[中不发送 cookie](https://stackoverflow.com/questions/10208365/flash-app-within-iframe-does-not-send-cookie-in-ie)[和浏览器会话 cookie 发送问题](https://stackoverflow.com/questions/6669223/flash-player-and-browser-session-cookie-sending-issue)也讨论了该问题

大多数消息来源倾向于同意一个解决方案是让服务器识别与加载 Flash 内容相关的请求，并将其包含在原始会话中。或者至少防止创建新会话。

# powershell - 如何连接csv中的两个字段

> ID：13649599
> 
> 赞同：1
> 
> 时间：2012-11-30T16:56:39.000
> 
> 标签：powershell

我正在尝试从服务器中删除文件。我有一个 csv，其中包含一个字段中的路径和另一个字段中的文件名。我想将这两个字段连接在一起，以便我只删除指定的文件（否则它只会删除路径中的所有内容）。这是我需要引用的两个字段名称的非工作代码：

```
Import-Csv C:\CSVs\TestDelete.csv | Foreach-Object {
    Remove-Item -LiteralPath  $_.Path + $_.Name -WhatIf 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:41:55.977

这假设您的“路径”数据有一个尾随“\”：

```
Import-Csv C:\CSVs\TestDelete.csv | Foreach-Object{
Remove-Item -LiteralPath ($_.Path + $_.Name) -WhatIf 
} 
```

# gnuplot - 在同一图中显示单个条形图和堆叠条形图

> ID：13649600
> 
> 赞同：2
> 
> 时间：2012-11-30T16:56:41.980
> 
> 标签：gnuplot

我有一个这样的数据文件：

```
"Execution"  500
"Overhead 1" 200
"Overhead 2" 75 
```

我正在尝试绘制此数据的直方图，将*执行*时间显示为单个条形图，但*开销 1*和*开销 2*显示为单个堆叠条形图。

这是我到目前为止所拥有的：

```
set terminal postscript eps 24
set output "wq_time_profile.eps"
set size 0.95,0.95
set boxwidth 1.0 relative    
set style fill solid 0.5 noborder   
set style data histogram 
set style histogram cluster gap 1  
set ylabel "Time (mins)"                                                                      
plot "wq_time_profile.dat" u 1 notitle, "" u 2 notitle, "" u 3 notitle 
```

我不太清楚如何将第 2 行和第 3 行显示为堆叠条形图，同时将第 1 行显示为同一图中的独立条形图。这在gnuplot中可能吗？我正在使用 gnuplot v4.2。谢谢！

编辑：修改了标题和问题，以澄清该图需要在同一个图中包含一个独立的条形图和一个堆叠的条形图

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T18:51:35.753

这似乎有效：

```
set style fill solid 0.5 noborder
set style histogram columnstacked
set style data histogram
set ylabel "Time (mins)"
plot "test.dat" u 2 notitle with histogram 
```

如果您想要一个带有颜色标签的键：

```
set style histogram columnstacked
set style data histogram
set style fill solid 0.5 noborder
set ylabel "Time (mins)"
plot "test.dat" u 2:key(1) with histogram 
```

* * *

在阅读您的编辑并玩了一下之后，这仍然是可能的，但我需要修改您的数据文件。（我希望没关系）：

```
"Execution"  500

"foo" NaN
"Overhead 1" 200
"Overhead 2" 75 
```

现在绘图脚本：

```
set style histogram columnstacked
set style data histogram
set style fill solid 0.5 noborder
set ylabel "Time (mins)"
plot for [i=0:1] "test.dat" index i u ($2):key(1) with histogram 
```

这里有很多微妙之处。这对空白记录是一种为 gnuplot 在绘图时创建单独的“索引”的方法。第一个条本身就在数据集中。这是问题所在，Gnuplot 会将索引 0 中的第一条记录与索引 1 中的第一条记录匹配，并用相同的颜色绘制它们。太丑了 所以我们需要在 index=1 数据集中插入一条假记录，它不会做任何图，但会占用一种颜色。这就是该`"foo" NaN`生产线的设计目的。我还需要修改`plot`线以绘制两个索引。并且使用规范需要从 更改为`2:key(1)`，`($2):key(1)`因为两种表单处理缺失数据的方式略有不同。

# php - 当点击发生在 iframe 内时，如何触发外部页面加载？

> ID：13649609
> 
> 赞同：1
> 
> 时间：2012-11-30T16:57:15.240
> 
> 标签：php, jquery, iframe, window, fancybox

我有一个网站需要从fancybox 窗口上的iframe 内的外部页面登录，但我想在用户按下登录按钮后立即在登录的网站内容中重新加载承载iframe 的主页，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:16:01.137

在你的 iframe 里面：

```
<script>
    window.parent.location = "page_to_load.php";
</script> 
```

# javascript - 在触发之前检测事件的存在 - JavaScript

> ID：13649610
> 
> 赞同：0
> 
> 时间：2012-11-30T16:57:17.990
> 
> 标签：javascript, events, javascript-events

我正在尝试在元素后面触发事件。它工作得很好，有一个障碍：如果事件未绑定到目标元素，它会引发错误。

我有一个覆盖整个页面的元素。发生时`event`，元素会消失，javascript 会`event`在其后面的元素上模拟它。相关代码：

```
e.target.parentNode.removeChild(e.target);  
var ghost = document.elementFromPoint(e.pageX, e.pageY);
ghost.dispatchEvent(e.type); 
```

效果很好，除了如果`ghost`没有那个特定的事件绑定，它会抛出一个丑陋的`UNSPECIFIED_EVENT_TYPE_ERR: DOM Events Exception 0`

如果事件被绑定，有没有办法检测幽灵？请不要图书馆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:04:30.870

[`.dispatchEvent`](http://www.w3.org/TR/DOM-Level-3-Events/#events-EventTarget-dispatchEvent)接受一个 Event 对象，而不是一个字符串。

见[http://jsfiddle.net/xEmcy/1/](http://jsfiddle.net/xEmcy/1/)

```
document.querySelector("div").addEventListener("click", function(e) {
    var evt = document.createEvent('Event');
    evt.initEvent(e.type, true, true);
    document.querySelector("span").dispatchEvent(evt);
}, false);

document.querySelector("span").addEventListener("click", function(e){
   alert("via trigger"); 
});​ 
```

还测试了如果跨度上没有事件侦听器，它不会抛出。

# python - 递归python文件复制程序的问题

> ID：13649611
> 
> 赞同：3
> 
> 时间：2012-11-30T16:57:22.747
> 
> 标签：python, search, recursion, operating-system

我最近开始学习 python 并且遇到了一些麻烦。有问题的函数尝试从给定目录开始，在我的例子中，'/home/jesse/ostest'，搜索所有子目录，并将所有'.txt'文件复制到'/home/jesse/COPIES '。当我运行该程序时，会复制一些文件，但它会陷入无限循环。我希望它在更改为“/home/jesse”（search() 的第 10 行）时中断。也许我不太了解递归，但感谢您的帮助。

这是一个测试目录，其中包含用于测试程序的子目录。

```
[jesse@jesse ostest]$ tree
.
├── readme.txt
├── README_WxPython.txt
├── rect.txt
├── RELEASE_NOTES.txt
├── scrap.txt
├── sndarray.txt
├── sprite.txt
├── surface.txt
├── surfarray.txt
├── test_oo.txt
├── tests.txt
├── this
│   ├── gme_notes.txt
│   ├── gme_readme.txt
│   ├── h1.txt
│   ├── h2.txt
│   ├── how_to_build.txt
│   ├── howto_release_pygame.txt
│   ├── image.txt
│   ├── IMPORTANT_MOVED.txt
│   ├── index.txt
│   ├── install.txt
│   ├── is
│   │   ├── a
│   │   │   ├── color.txt
│   │   │   ├── common.txt
│   │   │   ├── cursors.txt
│   │   │   ├── dec.txt
│   │   │   ├── defs.txt
│   │   │   └── display.txt
│   │   ├── event.txt
│   │   ├── examples.txt
│   │   ├── filepaths.txt
│   │   ├── font.txt
│   │   ├── freetype.txt
│   │   ├── gfxdraw.txt
│   │   ├── gme_design.txt
│   │   └── path
│   │       ├── api.txt
│   │       ├── auth.txt
│   │       ├── camera.txt
│   │       ├── cdrom.txt
│   │       ├── cert_override.txt
│   │       ├── changes_for_symbian.txt
│   │       └── CHANGES.txt
│   └── joystick.txt
├── time.txt
├── TODO.txt
└── transform.txt

4 directories, 45 files 
```

这是代码：

```
def copyAll():
    print('This function attempts to search through /home/jesse/ostest and copy all .txt files.')
    input('Press <enter> to begin..')
    new = '/home/jesse/COPIES'
    os.mkdir(new)
    done = []
    search('/home/jesse/ostest', new, done)
    print(os.getcwd())
    print(os.listdir())

def search(arg, new, done):
    os.chdir(arg)
    print(os.getcwd())
    for var in os.listdir():
        if os.path.isdir(var) and var not in done:
            search(var, new, done)
        elif var[-4:] == '.txt' and var not in done:
            shutil.copy2(var, '/home/jesse/COPIES')
            print('COPIED', var, '\t\tto', new)
        elif os.getcwd() == '/home/jesse':
            break
        else:
            done += os.getcwd()
            os.chdir('..')
            search(os.getcwd(), new, done) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:59:24.427

首先看一下 os.walk()：

[http://docs.python.org/2/library/os.html#os.walk](http://docs.python.org/2/library/os.html#os.walk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T01:11:47.610

我已经让它工作了。

新代码：

```
def copyAll():
    print('Copy all files from a heirarchy.')
    tar = input('Enter a directory to start from: ')
    new = '/home/jesse/COPIES'
    os.mkdir(new)
    for root, dirs, files, in os.walk(tar):
        for file in files:
            if file[-4:] == '.txt':
                shutil.copy2(root+'/'+file, new)
                print('COPIED', file, '\t\tto', new) 
```

我输入 '/' 作为 tar 并复制了 650 多个文件，然后出现错误！现在只需要修复错误。

# ios - 如何在 Xcode 故事板中定位警告？

> ID：13649614
> 
> 赞同：6
> 
> 时间：2012-11-30T16:57:31.153
> 
> 标签：ios, xcode

有没有一种快速的方法可以将编译器警告映射到情节提要中的违规组件？

例如，我有一个警告说明，`Highlight tint color unsupported by this button type...`但我不知道如何映射回以识别情节提要中的相关按钮？一旦确定，修复很简单 - 是否有一种快速的方法可以从警告开始定位按钮，而不必检查我的（相当广泛的）故事板中的每个自定义按钮？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T14:26:45.227

通常，如果您有与 Interface Builder 相关的警告，通过单击该警告 [Issue Navigator](http://developer.apple.com/library/ios/#recipes/xcode_help-issue_navigator/articles/viewing_issues_in_the_issue_navigator.html)，Xcode 应该将您带到 Interface Builder 并为您选择有问题的元素。如果这没有发生（坦率地说，每当 Xcode 停止正常运行时），请尝试退出并重新启动 Xcode，如果没有这样做，请重新启动计算机。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-14T20:02:16.930

如果有人面临类似的问题（加上自动首选最大布局宽度等附加问题），请查看此链接。

**[http://www.somegeekintn.com/blog/2014/10/tracking-down-storyboard-warnings/](http://www.somegeekintn.com/blog/2014/10/tracking-down-storyboard-warnings/)**

# jquery - Themeroller 主题没有呈现我在下载时添加的任何属性

> ID：13649615
> 
> 赞同：1
> 
> 时间：2012-11-30T16:57:32.480
> 
> 标签：jquery, themes, themeroller, jquery-ui-theme

我是否缺少隐藏的“保存更改”按钮？即使 zip 文件中包含的示例 html 页面在打开时也不会显示添加的属性。我真的很喜欢 Themeroller 的易用性（即拖放），但如果我能真正使用我用它创建的东西，我会更喜欢它。

# python - Multiprocessing in python blocked

> ID：13649625
> 
> 赞同：5
> 
> 时间：2012-11-30T16:58:19.520
> 
> 标签：python, queue, multiprocessing

I'm using multiprocessing in my project. I have a worker function which put in a queue the results. Everything works fine. But as size of x increases (in my case x is an array) something gone wrong. Here is a simplified version of my code:

```
def do_work(queue, x):
    result = heavy_computation_function(x)
    queue.put(result)   # PROBLEM HERE

def parallel_something():
    queue = Queue()
    procs = [Process(target=do_work, args=i) for i in xrange(20)]
    for p in procs: p.start()
    for p in procs: p.join()

    results = []
    while not queue.empty():
        results.append(queue.get)

    return results 
```

I see in the system monitor the python processes working, but then something happen and all processes are running but doing nothing. This is what I get when typing ctrl-D.

```
 pid, sts = os.waitpid(self.pid, flag)
KeyboardInterrupt 
```

I do some tests. And the problem looks like to be in putting results in the queue in fact if I don't put the results everything works but then there would be no purpose.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-15T20:26:46.143

You are most probably generating a deadlock.

From the [programming guidelines](https://docs.python.org/2/library/multiprocessing.html#multiprocessing-programming):

*This means that whenever you use a queue you need to make sure that all items which have been put on the queue will eventually be removed before the process is joined. Otherwise you cannot be sure that processes which have put items on the queue will terminate. Remember also that non-daemonic processes will be joined automatically.*

A possible fix is also proposed in the page. Keep in mind that if processes aren't joined, it doesn't mean they are "occupying" resources in any sense. This means that you could get the queued data out after the processes have completed their operation (perhaps using [locks](https://docs.python.org/2/library/multiprocessing.html#multiprocessing.Lock)) and only later join the processes.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T20:07:37.317

Well, it looks like it is some bug in the Queue module of python. In fact using..

```
from multiprocessing import Manager

queue = Manager().Queue() 
```

..everything works but I still don't know why..:)

# javascript - 将 ruby 代码与 js.coffee 脚本混合

> ID：13649629
> 
> 赞同：3
> 
> 时间：2012-11-30T16:58:25.930
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, coffeescript

我的视图上有 ajax 链接，我想在它们被发送到实际操作之前检查密码，因为我使用的是设计控制器，所以我仅限于使用特定的密码检查。以下是我希望用于验证的咖啡脚本。

> .<%= link_to "CANCEL PAYMENT", { :action => "some_action", :info => n.id },class: "css_class",:remote => true %>

我正在使用上面的链接

我正在寻找以下类型的代码。

```
$("a.css_class").live "click", ->
      password_variable = prompt("Enter password", "password")
      if |ruby-code|current_user.valid_password?(password_variable)|ruby-code|
        true
      else
        alert "You entered wrong password"
        false 
```

ruby 代码将如何与咖啡脚本组合一起使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:37:32.287

如果它是您的静态资产的代码，那么很明显您将无法将一些服务器端动态放入其中。它将被转换为纯 JavaScript 片段并放入您的应用程序`public`文件夹中。

如果您的视图名为 *.coffee，那么您已经完成了所有准备工作。以这种方式命名的视图将使用 ERb 引擎（通过）自动进行预处理`<%= ... %>`：

在**视图**/some/thing.coffee 中：

```
alert "Server's time is <%= Time.now %>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T03:55:07.677

我也有同样的疑问。

背景：

我正在为我的公司编写 ERP。它使用西班牙语、英语和日语的消息。

我正在使用coffeescript、haml、scss、NO ERB

因此，多语言消息在我的所有视图中都可以正常工作，但是，我添加了一个 .js 库，用于用带有下拉列表的漂亮组合框替换浏览器丑陋的下拉框，它使用哈希来保存本地语言中的消息。

所以我所做的是：

*`_form.html.haml`*

```
:coffeescript
  menssages_for_select2 [
    "#{I18n.t('select.formatNoMatches')}"
    "#{I18n.t('select.formatInputTooShort')}"
    "#{I18n.t('select.formatInputTooLong')}"
    "#{I18n.t('select.formatSelectionTooBig')}"
    "#{I18n.t('select.formatLoadMore')}"
    "#{I18n.t('select.formatSearching')}"
  ] 
```

我在视图中执行此操作，因此我可以访问 I18n 库。如果我尝试访问 .js.coffee 中的 I18n 库，它会失败

现在，在

*`mycode.js.coffee`*

```
@mensajes_select2 = (txt) ->
  $.extend $.fn.select2.defaults,
    formatNoMatches: ->
      txt[0]
    formatInputTooShort: (input, min) ->
      txt[1]
    formatInputTooLong: (input, max) ->
      txt[2]
    formatSelectionTooBig: (limit) ->
      txt[3]
    formatLoadMore: (pageNumber) ->
      txt[4]
    formatSearching: ->
      txt[6] 
```

# c# - c# Rijndael cipher 文件加密和解密

> ID：13649632
> 
> 赞同：1
> 
> 时间：2012-11-30T16:58:34.310
> 
> 标签：c#, visual-studio-2010, encryption, rijndael

我可以使用以下代码加密位于我桌面上的文本文件。

```
 private void btnEncrypt_Click(object sender, EventArgs e)
    {
        //EncryptFile(); 
        try
        {
            OpenFileDialog dialog = new OpenFileDialog();
            dialog.Filter = "All Files (*.*)|";
            dialog.InitialDirectory = @"Desktop";
            dialog.Title = "Please select a file to encrypt.";

            dialog.ShowDialog();

            inputFile = dialog.FileName;

            outputFile = inputFile;

            string password = @"myKey123"; // Your Key Here
            UnicodeEncoding UE = new UnicodeEncoding();
            byte[] key = UE.GetBytes(password);

            string cryptFile = outputFile;
            FileStream fsCrypt = new FileStream(cryptFile, FileMode.Create);

            RijndaelManaged RMCrypto = new RijndaelManaged();

            CryptoStream cs = new CryptoStream(fsCrypt,
                RMCrypto.CreateEncryptor(key, key),
                CryptoStreamMode.Write);

            FileStream fsIn = new FileStream(inputFile, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);

            int data;
            while ((data = fsIn.ReadByte()) != -1)
                cs.WriteByte((byte)data);

            fsIn.Close();
            cs.Close();
            fsCrypt.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        } 
```

这很好用，但是当我尝试解密相同的文本文件时，什么也没有发生，不会抛出错误消息让我知道发生了什么，我使用以下代码进行解密

```
private void btnDecrypt_Click(object sender, EventArgs e)
    {
        try
        {
            OpenFileDialog dialog = new OpenFileDialog();
            dialog.Filter = "All Files (*.*)|";
            dialog.InitialDirectory = @"Desktop";
            dialog.Title = "Please select a file to decrypt.";

            dialog.ShowDialog();

            inputFile = dialog.FileName; // "C:\\Users\\daniel\\Desktop\\text.txt";
            outputFile = inputFile;

                string password = @"myKey123"; // Your Key Here

                UnicodeEncoding UE = new UnicodeEncoding();
                byte[] key = UE.GetBytes(password);

                FileStream fsCrypt = new FileStream(inputFile, FileMode.Open);

                RijndaelManaged RMCrypto = new RijndaelManaged();

                CryptoStream cs = new CryptoStream(fsCrypt,
                    RMCrypto.CreateDecryptor(key, key),
                    CryptoStreamMode.Read);

                FileStream fsOut = new FileStream(outputFile, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);

                int data;
                while ((data = cs.ReadByte()) != -1)
                    fsOut.WriteByte((byte)data);

                fsOut.Close();
                cs.Close();
                fsCrypt.Close();

            }
        catch(Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

        }
    } 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:09:25.753

`fsOut`作为只读流打开。试试这个。

```
 FileStream fsOut = new FileStream(
       outputFile, 
       FileMode.Open, 
       FileAccess.Write, 
       FileShare.ReadWrite); 
```

*注意*：我也会写入临时文件并在完成后复制原始文件，但我没有充分的*理由*。

# forms - history.pushstate 和 HTTP POST 表单重新发布

> ID：13649633
> 
> 赞同：6
> 
> 时间：2012-11-30T16:58:36.320
> 
> 标签：forms, http-post, page-refresh, pushstate, html5-history

我目前在 HTTP 发布表单和历史推送状态方面遇到了一点问题。

当我的用户提交 POST 表单，`example.com/page-1`然后单击此页面中的链接时，他们会被重定向到`example.com/page-2`history.pushstate。JS 脚本只是更改当前 url，将旧的推送到历史记录，然后显示新的内容。这对我来说非常好。

问题：一旦用户开机`example.com/page-2`并*手动刷新页面*（ctrl+r或刷新按钮），Chromes会提示用户再次提交表单；但是表格实际上已经`example.com/page-1`存在，没有理由在这个“新”页面中再次询问它。

有没有办法在popstate更改时清除javascript中所有先前提交的数据，以防止浏览器重新发布提示？还是我在历史状态中遗漏了什么？还是浏览器目前还没有很好地实现它？

我只用 chrome 测试了它，因为我没有用其他浏览器实现 pushstate。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:33:51.680

也许尝试替换状态？看到[这个](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)。

> `replaceState()`方法_
> 
> history.replaceState() 的操作与 history.pushState() 完全相同，只是 replaceState() 修改当前历史条目而不是创建新条目。
> 
> 当您想要更新当前历史条目的状态对象或 URL 以响应某些用户操作时，replaceState() 特别有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-19T03:44:54.987

我有一个相同的问题 - 我正在使用带有[BackboneJS](http://backbonejs.org/)的 History API 。

我想到的解决方案是有一个中间页面，登录后表单重定向到这个中间页面。这个中间页面的目的是在目标页面之前添加一个非POST页面，这样浏览器就不会提示重新提交表单（并且 Chrome 不会添加多余的条目）。

对于您的示例，在服务器中提交 POST 表单后`example.com/page-1`，应将用户重定向到`example.com/page-1a`

`example.com/page-1a`可以验证用户凭据是否存在，然后重定向到`example.com/page-2`. 我相信这会解决你的问题。

对于重定向机制，我可以想到 3 个选项：

1.  服务器端重定向
2.  JavaScript ( `location.href="page-2"`)
3.  HTML 标头 ( `<meta http-equiv="refresh" content="0; URL='http://example.com/page-2'" />`)

就我个人而言，我尝试过选项 1 和 2 - 它们对我来说效果很好。希望这可以帮助！

# jasper-reports - 如何在子报告中声明和使用 jasper 参数而不在我的主报告中声明它？

> ID：13649640
> 
> 赞同：0
> 
> 时间：2012-11-30T16:59:17.813
> 
> 标签：jasper-reports

我想为子报告（页脚）使用参数。

是否有一种简单的方法来声明参数并仅在子报告中使用它？

我已经有一个可行的解决方案，但我必须：

*   在主报告中声明我的参数
*   将我在主报告中的参数声明为子报告参数
*   在子报告中声明我的参数以最终能够使用它

我直接处理 xml 文件，没有 iReport。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:42:45.533

基本上，我们做不到。这不可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-21T13:09:44.297

由于参数可以是任何可以想象的类，因此您始终可以将参数包装在其他类中。例如，在 Java 中，您可以使用 `Map`. 这样，您只需为子报表声明一个参数，并通过包装类的适当 getter 访问映射中的每个子报表参数。

作为泛型的示例`HashMap`：像这样声明

```
<parameter name="subreportParameters" class="java.util.HashMap" isForPrompting="false"/> 
```

并像这样使用

```
<![CDATA[$P{subreportParameters}.get("YOUR_PARAMETER_KEY") ]]> 
```

只有一个参数的缺点是降低了子报告的可读性。对于像页脚这样的小型子报表，这可能是一个可以接受的折衷方案。

# php - 如何在同一页面上的选项卡内进行页面跳转

> ID：13649641
> 
> 赞同：0
> 
> 时间：2012-11-30T16:59:19.537
> 
> 标签：php, javascript, html, css

我正在尝试插入需要在同一页面上打开新部分/标签的页面跳转

就像这里显示的

[http://www.ebay.com/itm/Sony-CDX-GT540UI-CD-MP3-Car-Audio-Receiver-Front-USB-Input-iPod-controls-/390406795334?pt=Car_Audio_In_Dash_Receivers&vxp=mtr&hash=item5ae60ef046](http://www.ebay.com/itm/Sony-CDX-GT540UI-CD-MP3-Car-Audio-Receiver-Front-USB-Input-iPod-controls-/390406795334?pt=Car_Audio_In_Dash_Receivers&vxp=mtr&hash=item5ae60ef046)

你有运输、付款、退货政策等。我试图放一个链接，上面写着

单击此处查看产品图片正上方的保修详细信息，正下方标明提供 1 年保修。我可以在单击链接时打开选项卡，也可以让页面跳到该部分但不打开另一个选项卡。

这是我正在使用的代码

```
<a href="nogo" onclick="return show('tab3')">Click Here To View Warranty Details</a> 
```

但这不会使页面跳转到退货政策，它只会打开退货政策选项卡而不进行跳转。我错过了什么或者我应该怎么做？我已经更换并跳转页面，但它没有发生。非常感谢您的所有帮助，我真的很感激。

下面是我正在使用它的文本文件的代码的链接，再次感谢！

[https://www.dropbox.com/s/7cikzfk5u31vvec/Page%20Jump.txt](https://www.dropbox.com/s/7cikzfk5u31vvec/Page%20Jump.txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:43:38.960

首先在要链接页面的位置创建一个带有名称的 id。

```
<span class="headline" id="History">History</span> 
```

然后在您要创建页面下行链接的地方使用以下代码。

```
<a href="#History">History</a> 
```

现在，当您单击“历史记录”时，页面将跳转到您创建 id 的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:18:18.627

尝试

```
<a onclick="location.href='#policies'; return show('tab3');" href="nogo">Click Here To View Warranty Details</a> 
```

# php - 从特定行在文件 (YML) 中插入行

> ID：13649645
> 
> 赞同：1
> 
> 时间：2012-11-30T16:59:34.823
> 
> 标签：php, yaml

我想使用 PHP 但从文件中的特定行将行插入到文件中。

我的文件 acme.yml 有一行`shortcuts:`。我想在它之前插入一些行。

```
#newlines here
shortcuts: 
```

我在 PHP 手册中看到了这些函数`file_get_contents`，`file_put_contents`但我不知道这是否是最好的方法。

```
<?php
    $file = 'acme.yml';
    $newlines = array($line1, $line2, $line3);

    $current = file_get_contents($file);

    #TODO:

    file_put_contents($file, $current);
?> 
```

也许在 yml 文件中有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:28:27.517

```
<?php

$file = 'acme.yml';
$newlines = array($line1, $line2, $line3);

$current = file_get_contents($file);

$current = str_replace("shortcuts:\n", implode("\n", $newlines) . "\nshortcuts:\n", $current);

file_put_contents($file, $current);

?> 
```

试试这个。

# algorithm - Akinator 游戏背后的算法是什么样的？

> ID：13649646
> 
> 赞同：24
> 
> 时间：2012-11-30T16:59:38.303
> 
> 标签：algorithm, statistics, machine-learning, artificial-intelligence

[Akinator 应用程序](https://itunes.apple.com/en/app/akinator-the-genie/id484090401?mt=8)通过问几个问题就能猜出一个角色，这总是让我感到惊讶。所以我想知道什么样的算法或方法让它做到这一点？有没有这类算法的名称，我在哪里可以阅读更多关于它们的信息？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-30T17:05:53.717

是的，这类算法有一个名字——在[机器学习](http://en.wikipedia.org/wiki/Machine_learning)领域叫做**[分类算法](http://en.wikipedia.org/wiki/Statistical_classification)**。[决策树](http://en.wikipedia.org/wiki/Decision_tree_learning)是分类算法的一个例子。

在这个分类问题中，算法的特征就是问题的答案。

决定下一个应该问哪个问题可以通过多种方式完成 - 例如，通过尝试最大化下一个问题的预测（或平均）[熵](http://en.wikipedia.org/wiki/Information_entropy)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T21:46:44.470

这个游戏有时被称为*20 Questions*。关于它有一些关于SO的问题，例如：

*   [20 道题 AI 算法是如何工作的？](https://stackoverflow.com/questions/887533/how-do-20-questions-ai-algorithms-work)
*   [设计一个二十个问题的算法](https://stackoverflow.com/questions/4915799/designing-a-twenty-questions-algorithm?lq=1)
*   [akinator 使用数据库运行？](https://stackoverflow.com/q/11031143/108915)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-04-05T00:18:39.573

算法的主要特点：

*   自学
*   错误放纵
*   下一题智能系统选择

Akinator 博弈算法模型被称为“基于模糊逻辑的专家系统”。

这不是决策树，因为决策树没有容错性。

我前段时间在 C# 上写过一篇，你可以通过链接找到它：[https ://github.com/ukushu/AkinatorEngine](https://github.com/ukushu/AkinatorEngine)

您可以在 wiki 上阅读的其他信息：

[https://en.wikipedia.org/wiki/Expert_system](https://en.wikipedia.org/wiki/Expert_system)

[https://ru.wikipedia.org/wiki/Экспертная_система](https://ru.wikipedia.org/wiki/%D0%AD%D0%BA%D1%81%D0%BF%D0%B5%D1%80%D1%82%D0%BD%D0%B0%D1%8F_%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%B0)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-24T18:49:34.787

我不知道 Akinator 到底使用什么算法，但在这里我已经开源了一个实现相同效果的算法：[https ://github.com/srogatch/ProbQA](https://github.com/srogatch/ProbQA)

基本上我们使用`N(Questions)`乘以`N(Answer Options)`时间的立方体`N(Targets)`，请参阅[https://github.com/srogatch/ProbQA/blob/master/ProbQA/PqaCore/CpuEngine.decl.h](https://github.com/srogatch/ProbQA/blob/master/ProbQA/PqaCore/CpuEngine.decl.h)。

我们通过应用具有独立性假设的贝叶斯公式来训练立方体，请参阅[https://github.com/srogatch/ProbQA/blob/master/ProbQA/PqaCore/CEEvalQsSubtaskConsider.cpp](https://github.com/srogatch/ProbQA/blob/master/ProbQA/PqaCore/CEEvalQsSubtaskConsider.cpp)

由于代码针对 AVX2 和多线程进行了高度优化，因此可能难以阅读。阅读相同的 CUDA 代码可能更容易：[https ://github.com/srogatch/ProbQA/blob/master/ProbQA/PqaCore/CudaEngineGpu.cu](https://github.com/srogatch/ProbQA/blob/master/ProbQA/PqaCore/CudaEngineGpu.cu)

该算法的应用程序也可用作[推荐游戏的网站](http://probqa.com/)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-10T09:53:06.820

我认为这就像一个专家系统，具有 B-Tree 结构。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-10T00:31:32.617

我有一个小项目来建立一个“找到你的品味”的动态测验，我想与你分享：

* * *

```
const quizData =
{
  "title": "Quiz about Foo", "questions": [

    { "text": "Tea or Coffee ?", "answers": [["Coffee","coffee"], ["Tea","tea"]] },
    { "text": "What type of coffee do you like ?", "parentanswer": "coffee", "answers": [["Arabic","arabic_coffee"], ["Turkish","turkish-coffee"], ["Espresso","espresso-coffee"], ["Black","black-coffee"]] },
       { "text": "What type of tea do you like ?", "parentanswer": "tea", "answers": [["Green","green-tea"], ["Red","red-tea"], ["Earl","earl-tea"]] },
       { "text": "Do you like it stronge ?", "parentanswer": "black-coffee", "answers": [["Yes","stronge-coffee"], ["No","notstronge-coffee"]] },
       { "text": "Do you like it light ?", "parentanswer": "stronge-coffee", "answers": [["Yes","light-coffee"], ["No","notlight-coffee"]] },
  ],
  "products":[
  { "name": "Japanese Green Tea" , "characteristic": "tea,green-tea"},
  {"name":"Organic Sencha Green Tea" , "characteristic": "tea,green-tea"},
  {"name":"Yogi Tea" , "characteristic": "tea,green-tea"},

  {"name":"South African Rooibos" , "characteristic": "tea,red-tea"},
  {"name":"Lipton" , "characteristic": "tea,red-tea"}, 

  {"name":"Alrifai" , "characteristic": "coffee,arabic-coffee"},
  {"name":"Baja"  , "characteristic": "coffee,arabic-coffee"},

  {"name":"Tim Hortons"  , "characteristic": "coffee,black-coffee,stronge-coffee"},
  {"name":"Starbucks"  , "characteristic": "coffee,black-coffee,light-coffee"},
  {"name":"Espresso Craft Blend"  , "characteristic": "coffee,  espresso-coffee"},

  {"name":"Baja"  , "characteristic": "coffee,  turkish-coffee"},

  ]
};

Vue.component('question', {
  template: `
<div v-if="question" class=" m-2" >
    <h3 class="text-primary">Find your taste</h3> <br/> 

  <h4>Question {{ questionNumber }} :</h4><br/>
  <h3 class="text-primary">{{ question.text }} </h3> <br/> 

    <div @change="submitAnswer" class=" btn-group-toggle"  >

    <label class="btn btn-outline-primary m-2" v-for="(mcanswer,index) in question.answers" >
     <input :value="mcanswer" type="radio" name="currentQuestion" :id="'answer'+index" v-model="answer"  > {{mcanswer[0]}}
    </label> 

    </div>  

</div>
`,
  data() {
    return {
      answer: ''
    }
  },
  props: ['question', 'question-number'],
  methods: {
    submitAnswer: function (e) {
      app.handleAnswer(this);
    }
  },
});

const app = new Vue({
  el: '#quiz',
  data() {
    return {
      resultsStage: false,
      title: '',
      questions: [],
      products:[],
      currentQuestion: 0,
      answers: [],
      correct: 0,
      result: '',
      counter: 0
    }
  },
  created() {
    this.title = quizData.title;
    this.questions = quizData.questions;
    this.products = quizData.products;
  },
  methods: {
    handleAnswer(e) { 
      this.answers[this.currentQuestion] = e.answer[0];

      var i ;
      for(i=0; this.currentQuestion < this.questions.length; i++)
      { 
        //find child question for selected answer
        if(typeof(this.questions[i].parentanswer)!='undefined')
        {
          if(e.answer[1] === this.questions[i].parentanswer)
          {
            this.result +=  e.answer[1] + ',';
            this.currentQuestion=i;
            this.counter++;
            break;
          }
        }
        //no child for this question => end of quiz
        if(i+1 == this.questions.length)
        {
          this.result +=  e.answer[1];
          this.handleResults();
          this.resultsStage = true;
          break;
        }
      } 

    },
    handleResults() {
     // window.location.href = "http://hadict.com"+this.result + "/?sl=ar";
      var i ;
 var hasResult=false;
 for(i=0; i < this.products.length; i++)
 { 
   if( this.products[i].characteristic==this.result)
   {   
    this.result = this.products[i].name; 
    hasResult=true;
    break;
   } 

 }
 if(!hasResult)
 {
  this.result="no result";  
 }

    }
  }
})
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.17/vue.js"></script>
<div id="quiz">
    <div v-if="!resultsStage">
      <question :question="questions[currentQuestion]" :question-number="counter+1"></question>
    </div>

    <div v-if="resultsStage">
      <div
        style="justify-content: space-between;display: flex;flex-direction: column;align-items: center;margin: 10px;">
        <h3 class="text-primary">Done</h3>
        <h3 class="text-primary">Your best drink is : </h3>  
        <h3 class="text-primary">{{result}}</h3>
      </div>
    </div>
  </div>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-09T13:40:04.197

Akinator 使用更多的二叉树。所以，根节点是第一个问题。这是内在和内在的。很可能，Akinator 还会获取您所在的位置并链接问题。我开发了自己的 Akinator，名为 Ankusha。我使用了模式匹配算法。说 Ankusha 的工作方式非常复杂。您可以从此 github 链接获取源代码。 [Ankusha-The Mind Reader](https://github.com/AnuragSimha/Ankusha-TheMindReader) Ankusha 在五个问题内完成了猜想。他向你证实了他猜到的电影。如果您单击“否”，则会询问接下来的五个问题。此迭代持续到 21 个问题。它是一个 Python 3.7 程序，需要强制安装 PIL 和 pygame 模块。请尝试一下。

**注意：确保在继续安装应用程序之前阅读文件 README.md。所有许可证均在 GNU GPLv3（GNU 通用公共许可证版本 3.0）下完成。**

# zend-framework2 - 在 zf2 查询中选择联合

> ID：13649648
> 
> 赞同：2
> 
> 时间：2012-11-30T16:59:43.057
> 
> 标签：zend-framework2

我正在将我的 web 应用程序从 zf1 移动到 zf2 并且在我遇到的 sql 查询问题中，我不知道如何进行联合。

我曾经能够使

```
$select->union($select1, $select2, $select3) 
```

但是 Zend\Db\Sql\Select 不再有`union()`方法了。

还有一种方法可以在使用 zf2 的查询中进行联合吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-24T10:41:35.257

我使用这个[https://github.com/zendframework/zf2/pull/3962](https://github.com/zendframework/zf2/pull/3962)。（两个选择查询的联合）。

只是为了完成这个答案，我用它来组合/联合 3 个选择：

`$Sql = new Sql ( $adapter );`

 ````
 $select1 = $Sql->select();
    $select1->from(...);
    $select2 = $Sql->select();
    $select2->from(...);
    //union of two first selects
    $select1->combine ( $select2 );
    //create the third select

    $select3 = $Sql->select();
    $select3->from(...);

    //Final select

    $select = $Sql->select();
    $select->from(array('sel1and2' => $select1));
    $select->combine ( $select3 );
    $select->order($order); 
````  `小心订购，不要与 combine 一起使用！见[ZF2 联合 + 分页](https://stackoverflow.com/questions/18961207/zf2-union-pagination)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-19T22:53:45.313

作为那些希望轻松使用 >1 UNION 的人的替代方案，ZF2 有一个专用的类[Zend\Db\Sql\Combine](https://github.com/zendframework/zend-db/blob/master/src/Sql/Combine.php)：

```
new Combine(
    [
        $select1,
        $select2,
        $select3,
        ...
    ]
) 
```

或者 `(new Combine)->union($select);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:58:26.687

这是由 UNION 组合的四个 SELECT 的“大量解决方法”示例：

```
$sm = $this->getServiceLocator();
$adapter = $sm->get('Zend\Db\Adapter\Adapter');

$columns = array(
    'date', 'business_unit', 'project', 'cost_center',
    'some_value1' => new Expression('SUM(IF(recruitment = \'internal\',1,0))'),
    'some_value2' => new Expression('SUM(IF(recruitment = \'external\',1,0))'),
    'some_value3' => new Expression('SUM(total_employees)'),
    'some_value4' => new Expression('SUM(IF(recruitment = \'internal\',total_time,0))'),
    'some_value5' => new Expression('SUM(IF(recruitment = \'external\',total_time,0))'),
    'some_value6' => new Expression('SUM(total_time)')
);

$sql = new Sql($adapter);

$abstractSelect = $sql->select();
$abstractSelect->from('summary')
    ->columns($columns)
    ->where->equalTo('date', '2013-01-25')
    ->where->equalTo('business_unit', 'foo')
    ->where->equalTo('project', 'bar');

$select1 = clone($abstractSelect);

$select2 = clone($abstractSelect);
$select2->where->equalTo('attendant', '1');

$select3 = clone($abstractSelect);
$select3->where->equalTo('attendant', '0')
    ->where->equalTo('recruitment', 'internal');

$select4 = clone($abstractSelect);
$select4->where->equalTo('attendant', '0')
    ->where->equalTo('disbursal', '0');

$selects = array(
    $select1->getSqlString(),
    $select2->getSqlString(),
    $select3->getSqlString(),
    $select4->getSqlString()
);      

$union = implode(" UNION ", $selects);

$statement = $adapter->createStatement(str_replace('"', '`', $union));
$results = $statement->execute(); 
```

这不会赢得任何代价，但也许有人可以改进这一点。

最后两行很重要。您可以解析任何您喜欢的 UNION 查询。`

# ios - 检测推文的写作方向

> ID：13649653
> 
> 赞同：0
> 
> 时间：2012-11-30T17:00:10.777
> 
> 标签：ios, utf-8, twitter, text-alignment

使用 Mac 版 Twitter 应用程序时，应用程序“知道”应该显示英文文本 LTR 和阿拉伯文本 RTL。现在，我正在尝试在我的应用程序中提取和显示推文，但我不确定如何正确对齐文本。我获取的一些文本是阿拉伯语，有些是英语。我获取的文本根本不包含有关写作方向的信息。

我意识到`\u202b`UTF-8 字符用于使文本对齐 RTL，但我的 twitter API 响应中缺少它。我检查了所有参数，似乎对这个问题没有帮助。我什至在他们的开发者论坛上发帖，但完全没有反应。

供您参考，我正在开发一个 iOS 应用程序并在`UITextView`.

# linq - 当类与第二个类多次相关时，如何在查询中将 LINQ 表达式用作类的静态成员

> ID：13649655
> 
> 赞同：0
> 
> 时间：2012-11-30T17:00:14.573
> 
> 标签：linq, entity-framework, asp.net-mvc-4

这与我之前的问题有关：[Coalesce fields in a .net MVC 4 model without getting "Only initializers, entity members, and entity navigation properties are supported" from LINQ](https://stackoverflow.com/questions/13637834/coalesce-fields-in-a-net-mvc-4-model-without-getting-only-initializers-entity)

将静态 LINQ 表达式添加到我的模型后，我可以在直接从该模型类的可枚举中进行选择时在方法样式的 LINQ 语句中使用该表达式（如上述问题的选定答案和下面的示例）。现在我必须尝试从相关模型中使用该表达式，并且再次超出了我对 LINQ 和 EF 的了解。

涉及的简化模型有：

```
//The model class for Items for sale in the system
public class Item
{
    [Key, Column(Order = 0)]
    public String CompanyId { get; set; }

    [Key, Column(Order = 1)]
    public String ItemId { get; set; }

    public Int32 CategoryId { get; set; }

    [ForeignKey("CategoryId")]
    public virtual GlobalCategory GlobalCategory { get; set; }

    [ForeignKey("CompanyId, CategoryId")]
    public virtual CompanyCategory CompanyCategory { get; set; }

    //LINQ Expression to coalesce a company specific category alias
    //with the default global category when no alias exists
    public static Expression<Func<Item, String>> linqCategoryName
    {
        get
        {
            return i => (i.CompanyCategory.CategoryAlias == null || 
                         i.CompanyCategory.CategoryAlias == "") ?
                         i.GlobalCategory.CategoryName :
                         i.CompanyCategory.CategoryAlias;
        }
    }
} 
```

和

```
//The model class for Item Relationships, used to relate two items 
//(a "Parent Item" and "Related Item") such as one is a supply for to the other
public class ItemRelationship
{
    [Key]
    public Int32 RelationshipId { get; set; }

    public Int32 RelationshipTypeId { get; set; }

    [ForeignKey("RelationshipTypeId")]
    public virtual RelationshipType RelationshipType { get; set; }

    public String CompanyId{ get; set; }

    public String ItemId{ get; set; }

    [ForeignKey("CompanyId, ItemId")]
    public virtual Item ParentItem { get; set; }

    public String RelatedCompanyId{ get; set; }

    public String RelatedItemId{ get; set; }

    [ForeignKey("RelatedCompanyId, RelatedItemId")]
    public virtual Item RelatedItem { get; set; }
} 
```

Item 类的 LINQ Expression 成员可以成功地与这种 LINQ 语句一起使用：

```
var categories = usscodb.Items.Where(i => i.CompanyId = siteCompanyId)
                               .OrderBy(Item.linqCategoryName)
                               .Select(Item.linqCategoryName)
                               .Distinct(); 
```

但是，我不确定如何在以下情况下使用静态 Item.linqCategoryName：

```
var categories = db.ItemRelationships
                .Where(ir => ir.RelationshipType.RelationshipTypeName == "Supply"
                    && ir.ParentItem.Active
                    && ir.RelatedItem.Active
                    && ir.ParentItem.CompanyId == siteCompanyId
                    && ir.RelatedItem.CompanyId == siteCompanyId)

                //the linqCategoryName member is not available for use this way
                .Select(ir.ParentItem.linqCategoryName)
                .Distinct(); 
```

我想我在这里很近。我已经尝试使用父项的键将项目关系显式加入到项目，然后尝试使用静态 LINQ 表达式，但我认为由于项目关系中存在两个项目，LINQ 无法确定我想要的。我不确定如何明确告诉 LINQ 我想从哪个 Item 使用静态方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:38:03.233

试试这个：

```
.Select(ir => ir.ParentItem)
.Select(Item.linqCategoryName) 
```

# python - 如何使用 python 的 fileConfig 进行日志记录并配置日志文件文件名

> ID：13649664
> 
> 赞同：52
> 
> 时间：2012-11-30T17:00:53.893
> 
> 标签：python, file, logging, console

我有一个用于记录到控制台的日志记录配置文件和一个具有不同格式和级别的文件。在我的 python 脚本中，我可以加载这个配置，基本上控制台和文件输出都可以。

我在配置文件中设置了文件名，如下所示。

是否可以在 python 脚本本身中设置该文件名？

**蟒蛇代码：**

```
# set up logging
logging.config.fileConfig(loginipath)
logger = logging.getLogger('sLogger')

# log something
logger.debug('debug message')
logger.info('info message')
logger.warn('warn message')
logger.error('error message')
logger.critical('critical message') 
```

**日志记录配置文件：**

```
[loggers]
keys=root,sLogger

[handlers]
keys=consoleHandler,fileHandler

[formatters]
keys=fileFormatter,consoleFormatter

[logger_root]
level=DEBUG
handlers=consoleHandler

[logger_sLogger]
level=DEBUG
handlers=consoleHandler,fileHandler
qualname=sLogger
propagate=0

[handler_consoleHandler]
class=StreamHandler
level=WARNING
formatter=consoleFormatter
args=(sys.stdout,)

[handler_fileHandler]
class=FileHandler
level=DEBUG
formatter=fileFormatter
args=('logfile.log',)

[formatter_fileFormatter]
format=%(asctime)s - %(name)s - %(levelname)s - %(message)s
datefmt=

[formatter_consoleFormatter]
format=%(levelname)s - %(message)s
datefmt= 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-11-27T13:11:38.597

像这样更改您的`handler_fileHandler`部分：

```
[handler_fileHandler]
class=FileHandler
level=DEBUG
formatter=fileFormatter
args=('%(logfilename)s',) 
```

然后`defaults`在 fileConfig 调用中添加一个参数

```
logging.config.fileConfig(loginipath, defaults={'logfilename': '/var/log/mylog.log'}) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-03-31T16:04:41.197

两个处理程序都为我工作：

(1)

```
logging.config.fileConfig( 'logging.ini' , disable_existing_loggers=False)

[handler_myhandler1]
class=FileHandler
level=DEBUG
formatter=form01
args=('python.log', 'w') 
```

(2)

```
logging.config.fileConfig( 'logging.ini' , disable_existing_loggers=False, defaults={ 'logfilename' : getSomeName() } )

[handler_myhandler2]
class=FileHandler
level=DEBUG
formatter=form01
args=('%(logfilename)s','w') 
```

在阅读[https://docs.python.org/2/library/logging.config.html上的示例后](https://docs.python.org/2/library/logging.config.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T12:30:21.080

尝试在设置文件名`logging.config.dictConfig()`之后调用。`fileConfig()`

# sql - 多条 SQL 记录会比多条字段需要更多内存吗？

> ID：13649666
> 
> 赞同：0
> 
> 时间：2012-11-30T17:01:08.247
> 
> 标签：sql, sql-server-2008-r2, normalization, forms

**情况：**用于 HTML 表单提交的 SQL 数据存储。

**场景1：** 1个表格，每个表格字段为一个表格字段（表格）。

![在此处输入图像描述](../Images/99236f62663231d192fa3cef4c0fcf9e.png)

**场景 2：** 2 个表 - 第一个具有 id 和时间戳 (form_submission) 的表。第二个表，id，fk to form_submission，field_title，field_value（form_field）。仅当 HTML 字段**具有值**时才插入数据。

![在此处输入图像描述](../Images/06327b638491ad45a70d57e009a059d4.png)

**哪个需要更多内存？**

在场景 1 中...每次提交只有 1 条记录，但每条记录将有多个空值。

在场景 2... form_field 表中的 5+ 条记录以及从 form_submission 表中提交的时间。

*旁注：*我们每年只收到一万份表单提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:12:27.507

假设大多数用户填写了大部分字段，那么是的，更规范化的表单将占用更多空间/内存（特别是因为时间戳 - 我真的希望它是`DATETIME`/ `DATETIME2`，这是一个糟糕的名字，不管）。

就个人而言，对于 HTML 提交表单（没有“子”数据），我可能会为表单制作一个表格；EAV 表可能更难查询。非必需列可以简单地默认为空。但是，如果您正在构建更复杂的系统（例如客户管理），则需要以不同的方式拆分事物。

# java - 按回车键提交表单

> ID：13649669
> 
> 赞同：3
> 
> 时间：2012-11-30T17:01:15.670
> 
> 标签：java, jakarta-ee, wicket, wicket-1.5

我想按回车键提交表单。Wicket 允许这样做，直到任何按钮都连接到表单并且可见。wicket framwork 中是否有任何方法可以通过简单地按下回车键来提交表单？

进入作品：

```
Form<?> searchForm = new Form<Void>("searchForm");
add(searchForm);
searchForm.add(button); 
```

输入不起作用：

```
Form<?> searchForm = new Form<Void>("searchForm");
add(searchForm);
searchForm.add(button);
button.setVisible(false); 
```

在这两种情况下，按钮都是一个简单的 AjaxButton。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T13:42:49.243

使用以下命令在 HTML 中隐藏您的按钮：
`style="visibility:hidden;"`

然后在 Java 代码中执行此操作：
`searchForm.setDefaultButton(button);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T09:33:57.673

如果您没有按钮（使按钮不可见意味着它不会在标记中呈现），那么在文本字段上按 enter 将无法提交表单。要么让它可见（显然），要么使用一些 javascript 在输入时执行提交。

使用 JQuery 的示例：

```
$(submitOnEnter);
function submitOnEnter () {
    $("body").on("keydown", "mytextfield-selector", function(event){
        if (event.keyCode == 13) {
            event.preventDefault();
            $("myform-selector").submit();
        }
    });
} 
```

# php - POST isset 但不回显

> ID：13649672
> 
> 赞同：2
> 
> 时间：2012-11-30T17:01:23.557
> 
> 标签：php, javascript, forms, post, if-statement

我有一个发布到页面的表单，并且从`POST`数据中获取值时遇到了一个奇怪的问题。如您所见，我可以在运行条件之前检查是否`image_id`,`vote`和`fb_id_form`都已设置。

javascript 警报运行，所以我知道三个变量已设置。但我得到的是令人困惑的。我得到第一个显示“工作”的警报窗口。然后我得到两个空白警报窗口。当我试图提醒他们时，如何`fb_id_form`“设置”（通过条件）但没有价值？

```
if(isset($_POST['image_id']) && isset($_POST['vote']) && isset($_POST['fb_id_form'])){
    $image_id = $mysqli->real_escape_string($_POST['image_id']);
    $vote = $mysqli->real_escape_string($_POST['vote']);
    $fb_id_form = $mysqli->real_escape_string($_POST['fb_id_form']);
    echo "<script>alert('worked');</script>";
    echo "<script>alert('".$fb_id_form."');</script>";
    echo "<script>alert('".$_POST['fb_id_form']."');</script>";
} 
```

这是表单数据（在同一页面上）：

```
echo "<form method=\"post\" action=\"\">
<input type=\"hidden\" name=\"image_id\" value=\"".$id."\" />
<input type=\"hidden\" name=\"vote\" value=\"1\" />
<input type=\"hidden\" name=\"fb_id_form\" value\"".$fb_id."\" />
<input type=\"submit\" name=\"submitvote\" value=\"Vote\" />
</form>"; 
```

这就是问题所在。我已经在表格之前回显了 $fb_id RIGHT 的警报，它给了我正确的值。当我提交它时，我认为该值会丢失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:11:33.587

因为`isset`如果`$_POST['fb_id_form']`包含一个空字符串，它仍然是真的。你想用`empty()`

[isset vs 空链接](http://itslennysfault.com/php-isset-vs-empty)

> empty 与 isset 有很大不同。首先，最明显的是它的工作方式与isset相反，但它的作用远不止于此。Empty 将为所有内容返回 true isset 将为 PLUS 返回 false 它也将为空字符串、空数组、字符串“0”、数字 0 或 false 返回 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T17:09:41.320

变量在分配时被设置（`isset()`为真）而不是 NULL。这意味着包含空字符串 ("") 的变量实际上是已设置的*。*请参阅[文档](http://php.net/isset)。

要检查变量是否为空，请使用[`empty()`](http://php.net/empty)或检查`$mystr === ""`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T17:16:25.840

您会得到这些结果，因为`isset()`即使变量中存储的唯一内容是空字符串，也会返回 true。您的结果可能没有被存储。这可能是由于您的表单可能具有恢复页面的操作，该操作清空了字段，使您的变量带有空字符串？我们必须查看您的 html 代码才能给出更全面的答案...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T17:19:01.543

[从手册](http://php.net/manual/en/function.isset.php)：

> isset — 确定变量是否已设置且不为 NULL

没有它说如果变量是`""`,等它将返回 false 的地方。在您的示例中`0`，通过发布此数据`false`很容易绕过您的*健全性检查：*

```
image_id=&vote=&fb_id_form= 
```

您需要额外的数据验证，您可以为此使用[PHP 过滤器函数](http://www.php.net/manual/en/ref.filter.php)。检查是否`$_POST`包含三个参数的示例代码，它们是整数：

```
$params = filter_input_array(INPUT_POST, array(
'image_id'   => array('filter' => FILTER_VALIDATE_INT, 'options' => array('default' => NULL)),
'vote'       => array('filter' => FILTER_VALIDATE_INT, 'options' => array('default' => NULL)),
'fb_id_form' => array('filter' => FILTER_VALIDATE_INT, 'options' => array('default' => NULL))
)); 
```

因此，例如有人将此数据发布到您的页面：

```
image_id=&vote=hello+world&fb_id_form=12345 
```

然后上面的代码会返回：

```
array(3) {
  ["image_id"]=>
  NULL
  ["vote"]=>
  NULL
  ["fb_id_form"]=>
  int(12345)
} 
```

PS：`mysqli->real_escape_string`不验证您的数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T17:15:48.157

我认为这与分离前后的单引号有关。

`echo "<script>alert(".$fb_id_form.");</script>";`

`echo "<script>alert(".$_POST['fb_id_form'].");</script>";`

# php - 通过 PHP 脚本加入 mysql 表以进行回显并缓存所有内容

> ID：13649674
> 
> 赞同：0
> 
> 时间：2012-11-30T17:01:34.580
> 
> 标签：php, mysql, caching

数据库 X 包含 2 个表。消息表。

```
Message table:
Message_id     User_id     Posted_date            Message
1              141         2012-05-05 05:21:21    Hello
2              441         2012-05-05 05:25:21    How are you?
3              12          2012-05-07 05:25:21    How's it going? 
```

和用户表

```
User table
User id        User name
12             Arthur
141            Boris
441            Andrew 
```

我正在使用 PHP 脚本从我网站上的消息表中提取和回显数据。这应该显示最后 X 条消息。但是，如您所见，消息表不包含应随消息显示的用户名。我知道我必须使用某种连接命令，但不确定如何正确格式化它以便 php 脚本回显以下内容：

```
User name | Date
Message 
```

我不确定如何格式化此查询请求。如果有人可以使用我上面提供的数据给我一个例子，我将不胜感激。

现在，最后，我需要在 15 分钟内只刷新一次信息，所以如果很多人查看它，它不会对服务器造成不必要的压力。PHP 有哪些可用的缓存选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:05:38.503

```
SELECT M.Message, M.Posted_date, U.User_name FROM Message as M INNER JOIN USER
as U ON M.User_id=U.User_id ORDER BY M.Posted_date DESC LIMIT 10 
```

希望有帮助。

编辑。

对于此类查询，缓存似乎有点矫枉过正，但仍然是一个非常广泛的话题。

编辑。

根据评论见上文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:15:56.190

您可以使用它`LEFT JOIN`来执行此操作。

```
SELECT M.Message, M.Posted_date, U.User_name FROM Message as M LEFT JOIN USER
as U ON M.User_id=U.User_id 
```

# c# - 按结果对集合进行排序

> ID：13649676
> 
> 赞同：2
> 
> 时间：2012-11-30T17:01:46.997
> 
> 标签：c#, sorting, collections

我编写了一个扩展方法来尝试计算出现在描述中的字符串中的单词。这是功能（例如，搜索“软”我想看到微软，所以称它为关键字可能不正确，但我想提前沟通。关键字只是当时唯一想到的东西） ：

```
public static int KeywordCount(this string str, string Phrase)
{
    string[] elements = Phrase.ToUpper().Split(' ');
    int count = 0;
    foreach (string element in elements)
    {
        if (str.ToUpper().Contains(element))
            count++;
    }
    return count;
} 
```

我试图然后通过一个项目列表并仅包括至少有一些命中的项目，但还根据命中数对其进行排序（如果所有关键字都在描述中，它需要位于顶部并且等等。

到目前为止，我所拥有的是：

```
 selection.AddRange(all.Where(c => c.Description.KeywordCount(query) > 0)); 
```

然后如何根据 KeywordCount 的返回值进行排序？我也有一种感觉，我要去的方向将导致对所有项目进行 KeywordCount 搜索 1 次，对于计数 > 0 的项目进行 1 次额外搜索，所以如果有办法同时进行比较和排序，我想知道怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:08:22.040

先进行选择以获取值和计数，然后按计数过滤，然后按计数排序，然后仅选择值。

```
selection.AddRange(
    all.Select(c=>new {Val = c, Count = c.Description.KeywordCount(query))
       .Where(t => t.Count > 0))
       .OrderBy(t => t.Count)
       .Select(t => c.Val); 
```

这样，每个项目都会调用一次 KeywordCount。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:04:47.017

Linq orderBy 会起作用吗？

```
List<someType> sorted = all.OrderBy(c => c.Description.KeywordCount(query)).ToList() 
```

# asp.net-mvc - 构建后单元测试

> ID：13649677
> 
> 赞同：1
> 
> 时间：2012-11-30T17:01:51.543
> 
> 标签：asp.net-mvc, visual-studio-2012, post-build-event

我想使用 MVC 默认测试在 Visual Studio 2012 的构建后事件中运行单元测试。

是否有配置设置或实现此目的的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:56:10.520

大多数单元测试框架都支持命令行模式。假设您在项目中获得了二进制文件，您可能很容易将其连接起来。

也就是说，您可能正在寻找[该产品](http://ox.no/software/continuoustesting)。

# magento - Magento缓存错误的读取权限？

> ID：13649679
> 
> 赞同：1
> 
> 时间：2012-11-30T17:02:10.187
> 
> 标签：magento, caching, enterprise

Magento 对 var/cache 目录的读取似乎有问题。我已禁用整页缓存以进行测试。

当我在加载页面之前执行 bash 命令`chmod -R 777`var/cache/` 时，它的加载速度快了约 3 秒（在 Profiler 中达到 'mage::dispatch::routers_match' 之前所需的时间从约 4 秒减少到约1秒）。

这种加速会持续一段时间，但随后会丢失，直到`chmod`再次调用。

我猜这与以某种方式写入权限有关？奇怪的是，缓存内容由执行 magento 的进程（网络用户）拥有。

有没有人有任何线索可能是什么问题或可以改变什么来防止这种情况？

（Magento 版本：1.12.0.2）

**更新**

似乎并非所有缓存文件都是为同一个用户创建的，而是为两个不同的用户创建的。将不得不检查这是怎么可能的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:21:34.913

我找到了解决方案。我从与 Web 用户不同的用户内部调用了我的 cron 作业，因此通过 cron 作业功能创建的所有缓存都是为不同的用户创建的。现在问题解决了，我用 wget 从 url 调用缓存。谢谢。

# git - 没有拉取请求的 Github

> ID：13649680
> 
> 赞同：1
> 
> 时间：2012-11-30T17:02:13.277
> 
> 标签：git, github, merge, fork

我有以下情况：

*   托管在 github 上的软件。
*   4 个开发者，每个人在 github 上都有自己的 fork。
*   每个开发人员都使用自己的分支中的分支来创建和开发。

鉴于我们使用分支进行开发，我们希望将我们的分支（在我们的 fork 中）合并到上游 repo。如何在不使用拉取请求的情况下合并到 github？是否可以从我自己的分叉合并到上游？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:23:58.540

`git push upstream master`

替换`upstream`为您命名为 github 远程的任何内容，以及`master`您想要推送到的 github 上的分支。

如果您当前没有远程指向共享存储库，则可能需要执行 `git remote add upstream {url}`

**编辑以回应评论**

如果要合并分支，请先在本地存储库中执行此操作：

```
git checkout master
git merge feature-branch
git push upstream master 
```

# python - 序列解包是原子的吗？

> ID：13649684
> 
> 赞同：7
> 
> 时间：2012-11-30T17:02:19.333
> 
> 标签：python, variable-assignment, atomic

序列解包是原子的吗？例如：

```
(a, b) = (c, d) 
```

我的印象不是。

编辑：我的意思是多线程上下文中的原子性，即整个语句是否是不可分割的，就像以前的原子一样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T17:04:04.023

这是一个操作；在应用左侧赋值之前计算右侧表达式：

```
>>> a, b = 10, 20
>>> a, b
(10, 20)
>>> b, a = a, b
>>> a, b
(20, 10)
>>> a, b = a*b, a/b
>>> a, b
(200, 2) 
```

或者，如果您在谈论多线程环境，那么分配*不是*原子的；解释器使用单个操作码评估元组赋值，但使用单独的操作码将结果存储到每个受影响的变量中：

```
>>> def t(self): a,b=20,20
... 
>>> dis.dis(t)
  1           0 LOAD_CONST               2 ((20, 20))
              3 UNPACK_SEQUENCE          2
              6 STORE_FAST               1 (a)
              9 STORE_FAST               2 (b)
             12 LOAD_CONST               0 (None)
             15 RETURN_VALUE 
```

然而，*正常*的赋值总是至少有两个操作码（一个用于右手表达式，一个用于存储结果），所以在 python*中，一般的*赋值不是原子的。序列解包也不例外。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-30T17:26:01.663

在多线程环境中绝对不是原子的，使用以下脚本进行测试：

```
import threading

a, b = 10, 10
finished = False
def thr():
    global finished
    while True:
        # if sequence unpacking and assignment is atomic then (a, b) will always
        # be either (10, 10) or (20, 20).  Could also just check for a != b
        if (a, b) in [(10, 20), (20, 10)]:
            print('Not atomic')
            finished = True
            break

t = threading.Thread(target=thr)
t.start()

while True:
    for i in range(1000000):
        a, b = 20, 20
        a, b = 10, 10
    if finished:
        t.join()
        break 
```

使用 CPython 2.6、2.7 和 3.2 进行测试。在每个版本上，该脚本都打印了“非原子”并在一秒钟内退出。

# c++ - C ++ - 分发与开发不同的标头

> ID：13649687
> 
> 赞同：3
> 
> 时间：2012-11-30T17:02:25.557
> 
> 标签：c++, header

我很好奇在 C++ 中这样做：

假设我有一个小型库，可以分发给我的用户。我为我的客户提供他们需要的二进制文件和相关的头文件。例如，假设在开发中使用了以下标头：

```
#include <string>

ClassA 
{
    public:
        bool setString(const std::string & str);

    private:
        std::string str;
}; 
```

现在我的问题。对于部署，我给我的客户一个“减少”的标题有什么根本错误吗？例如，我是否可以剥离私人部分并简单地给他们这个：

```
#include <string>

ClassA 
{
    public:
        bool setString(const std::string & str);
}; 
```

我的直觉说“是的，这是可能的，但是有问题”，这就是我在这里问这个问题的原因。如果这是可能的并且安全的话，它看起来是隐藏私有变量的好方法，因此在某些情况下甚至可以避免前向声明。

我知道这些符号仍然存在于二进制文件本身中，这只是源代码级别的可见性。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T17:08:59.310

以这种方式修改类声明会导致代码不兼容。

编译器需要类声明来确定该类的实例占用了多少空间以及成员变量在该空间中的位置。

如果您在一个标头中遗漏成员（甚至是私有成员），则使用此标头编译的代码将采用不同的类布局。它将为类的实例分配更少的空间，并假设成员变量位于不正确的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T17:26:28.407

Qt（一组跨平台 C++ 库）使用私有头文件和“d”指针隐藏实现细节的技术。我认为长时间维护具有二进制兼容性的库但能够在必要时更改实现是非常巧妙的。

[http://zchydem.enume.net/2010/01/19/qt-howto-private-classes-and-d-pointers/](http://zchydem.enume.net/2010/01/19/qt-howto-private-classes-and-d-pointers/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T17:26:46.093

除了在他的回答中所说的之外，我还要补充一点，如果你有理由做这样的事情，那么为什么不简单地将 ClassA 设为一个“接口”类型的类，它只有纯虚函数。

然后，您的内部代码将具有从 ClassA 派生的 ClassB 并实现所有这些纯虚函数。*您仅*分发 ClassA 的标头。显然用户不能在栈上声明ClassA对象，因为ClassA是一个纯虚类，不能直接在栈或堆上创建ClassB对象，因为他对ClassB一无所知。

公共头文件（分发给用户）：

```
class A 
{
public:
   virtual ~A()
   { // necessary - don't remove.
   }

   virtual somefunc() = 0;
   virtual someotherfunc(int a, int b) = 0;
   virtual bool setString(const std::string & str) = 0;
};

// This function creates an instance of object B. You must
// call delete on the returned pointer when you're done with it!
A *CreateObjectB(); 
```

私有头文件：

```
class B : public class A
{
private:
    ...

public:
   B();
   virtual ~B();

   virtual somefunc();
   virtual someotherfunc(int a, int b);
   virtual bool setString(const std::string & str);
}; 
```

私人源文件：

```
classB::B()
{

}

classB::~B()
{

}

classB::somefunc()
{
    ...
}

classB::someotherfunc(int a, int b)
{
    ...
}

classB::setString(const std::string & str)
{
    ...
}

A *CreateObjectB()
{
    return new B();
} 
```

# mysql - MySQL Locking table from Stored FUNCTION

> ID：13649690
> 
> 赞同：0
> 
> 时间：2012-11-30T17:02:40.733
> 
> 标签：mysql

我在 MySQL 数据库中有一个函数，可以确定移动设备的一些同步参数。该函数确定用户与数据库同步的最后日期/时间。在同步操作期间，我两次调用此服务器端函数。一旦我第二次调用它 - 整个 Sync_Records 表被锁定。我无法从任何地方的任何其他连接写入它（请注意，第一次调用后，表未锁定）。我将函数更改为过程 - 一切都很好 - 第二次调用后没有锁定。整个同步操作（包括对函数/过程的调用）都在一个事务中。这是一个 InnoDb 表。

该函数/过程只执行两个选择语句。他们将结果存储在局部变量中，然后返回日期时间变量。我不明白为什么桌子被锁定了。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:42:21.480

它在[存储程序限制](http://dev.mysql.com/doc/refman/5.5/en/stored-program-restrictions.html)部分中指定

> 存储函数在执行前获取表锁，以避免由于语句执行顺序和出现在日志中的时间不匹配而导致二进制日志不一致。当使用基于语句的二进制日志时，会记录调用函数的语句，而不是函数内执行的语句。...
> 
> 相反，存储过程不获取表级锁。在存储过程中执行的所有语句都写入二进制日志，即使是基于语句的二进制日志

# javascript - 在javascript中将参数关闭函数添加到字符串

> ID：13649693
> 
> 赞同：0
> 
> 时间：2012-11-30T17:02:56.957
> 
> 标签：javascript, jquery, function, arguments

我想将函数的参数添加到字符串中（我不确定这是否正确）

```
function changeChart(form, chart, bar) {

            //chart 2 (left)
            $(form).change(function (){

                console.log(form);

                $(form + "option:selected").each(function(){
                //rest of the function 
```

我希望将表单添加到 Jquery 中的选择中。

这是正确的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:04:57.783

如果`form`是字符串，则需要确保 . 之前有一个空格`"option:selected"`。

```
$(form + " option:selected").each(function(){ 
```

* * *

如果`form`是一个元素，将其传递给 jQuery 函数，然后使用`find`：

```
$(form).find("option:selected").each(function(){ 
```

或使用上下文参数*（尽管 IMO 代码不太清楚）*：

```
$("option:selected", form).each(function(){ 
```

* * *

虽然，由于您在处理程序中，您可以只使用`this`来引用表单元素。

```
$(this).find("option:selected").each(function(){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:05:30.503

如果 form 是对应于**ID的字符串**

那么应该是

```
$('#' + form)

$('#' + form + " option:selected") 
```

如果它是一个类，将**#**替换为**.**

# winapi - CreateProcess C++ 不创建任何进程

> ID：13649697
> 
> 赞同：0
> 
> 时间：2012-11-30T17:03:34.540
> 
> 标签：winapi, createprocess

我是 C++ 的新手并尝试使用调试 API，但我什至无法开始。因为我无法通过 CreateProcess api 运行任何 exe。它不会给出任何编译错误，但会返回 false。你有什么建议吗？

```
LPCWSTR appName = LPCWSTR("C:\\TEST.EXE");
LPSTARTUPINFO sInfo = LPSTARTUPINFO();
LPPROCESS_INFORMATION pInfo = LPPROCESS_INFORMATION();

if (CreateProcess(appName,NULL,NULL,NULL,FALSE,CREATE_SUSPENDED,NULL,NULL,sInfo,pInfo))
{
    printf("done!");
}
else
{
    printf("error!");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:09:07.527

`sInfo`并且`pInfo`没有指向有效的内存（并且错误代码`87`表示*参数不正确。*）。改成：

```
STARTUPINFO sInfo = { sizeof(sInfo };
TCHAR desktop[] = TEXT("winsta0\\default");
sInfo.lpDesktop = desktop;
PROCESS_INFORMATION pInfo; 
```

并将对象的地址传递给`CreateProcess()`（即`&sInfo, &pInfo`）。

# delphi - 使用 Indy IMAP 和 Delphi XE2 附加电子邮件缺少发件人、主题和收件人

> ID：13649698
> 
> 赞同：2
> 
> 时间：2012-11-30T17:03:36.477
> 
> 标签：delphi, delphi-xe2, imap, indy

使用 Delphi 6，我使用以下行将电子邮件附加到使用 IMAP 发送的文件夹中：

```
if IMAPClient.Connected then begin
  IMAPClient.AppendMsg(EMAIL_SENT_FOLDER, TheMessage, TheMessage.Headers, [mfSeen]);
end; 
```

如果电子邮件有 PDF 之类的附件，则只会保存正文文本，这没关系。发件人，收件人和主题也如预期的那样正常。

使用 Delphi XE2 中的同一行代码，附带的 Indy 10 以及带有 PDF 等附件的电子邮件在已发送文件夹中为我提供了一封电子邮件，其中没有主题、没有发件人、没有收件人，并且电子邮件正文是 base64编码乱码。

> 这是一条 MIME 格式的多部分消息
> 
> --IstrI1aZj8jaD7S1JQXJK8dreduqQL=_Kv Content-Type: text/plain Content-Transfer-Encoding:quoted-printable Content-Disposition: inline
> 
> 测试带有附件的电子邮件正文
> 
> --IstrI1aZj8jaD7S1JQXJK8dreduqQL=_Kv 内容类型：应用程序/pdf；name="87122F343A2A49E48B22BD24376524FC.pdf" 内容传输编码：base64 内容处置：附件；文件名="87122F343A2A49E48B22BD24376524FC.pdf"
> 
> JVBERi0xLjQNCiXi48/TDQoxMSAwIG9iag0KPDwNCi9UeXBlL0Fubm90L0JvcmRlciBbXS9IL0kv - base 64 的东西被移除 -

编辑 - 实际上，我附加到已发送文件夹的任何电子邮件都没有主题、发件人或收件人。如果没有附件，身体基本没问题，但身体后两行有一个错误的时期。

> 电子邮件正文测试
> 
> .

真正的问题是使用 IMAP 附加到已发送文件夹的任何电子邮件中都缺少发件人、主题或收件人。

在我看来，我需要对较新的 Indy 组件做一些不同的事情，但我似乎无法弄清楚我到底需要做什么。

任何建议表示赞赏。

干杯! TJ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:18:30.803

将“TheMessage.Headers”更改为“TheMessage.LastGeneratedHeaders”。

主题和收件人将在那里。您的附件仍将使用 Base64。我不知道解决办法。

# coldfusion - CFLOCK 放在哪里？

> ID：13649701
> 
> 赞同：0
> 
> 时间：2012-11-30T17:03:59.873
> 
> 标签：coldfusion, locking, coldfusion-7

去哪儿`<cflock>`？它应该位于 Application.cfm 文件中，还是可以放置在任意 .cfm 文件中？

```
<CFLOCK SCOPE="Session" TYPE="Exclusive" 
    TIMEOUT="30" THROWONTIMEOUT="Yes"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:32:56.203

它可以放在任何文件中。

但是，不要不加思索地到处使用它——过多的锁定可能与没有足够的锁定一样糟糕。

特别要注意不要造成死锁（通过放置可能最终都等待另一个完成的竞争锁，这意味着它们都无法处理）。

这里有有用的信息（包括一些很好的链接）：[How to make a shared resource thread-safe when using dependency injection?](https://stackoverflow.com/questions/13190209/how-to-make-a-shared-resource-thread-safe-when-using-dependency-injection/13195325#13195325)

您还可以查看标记为[冷融合](/questions/tagged/coldfusion "显示标记为“coldfusion”的问题")和[锁定](/questions/tagged/locking "显示标记为“锁定”的问题")的问题，以获得更有趣的阅读：[https ://stackoverflow.com/questions/tagged/coldfusion+locking](https://stackoverflow.com/questions/tagged/coldfusion+locking)

# java - Java中BigDecimal的平方根

> ID：13649703
> 
> 赞同：64
> 
> 时间：2012-11-30T17:04:09.953
> 
> 标签：java, bigdecimal, square-root

`BigDecimal`我们可以只使用 Java API 而不是定制的 100 行算法来计算 Java 中 a 的平方根吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-06-25T20:01:16.113

我用过这个，效果很好。 [这是该算法如何在高层次上工作的示例。](http://en.wikipedia.org/wiki/Newton's_method#Examples)

编辑：我很想知道下面定义的准确度。[这是来自官方来源](http://apod.nasa.gov/htmltest/gifcity/sqrt2.1mil)的 sqrt(2) ：

```
(first 200 digits) 1.41421356237309504880168872420969807856967187537694807317667973799073247846210703885038753432764157273501384623091229702492483605585073721264412149709993583141322266592750559275579995050115278206057147 
```

这里使用的是我在下面概述的方法，`SQRT_DIG`等于 150：

```
(first 200 digits) 1.41421356237309504880168872420969807856967187537694807317667973799073247846210703885038753432764157273501384623091229702492483605585073721264412149709993583141322266592750559275579995050115278206086685 
```

第一个偏差发生在**195 位精度**之后。如果您需要如此高的精度，请自行承担风险。

更改`SQRT_DIG`为 1000 会产生**1570 位精度**。

```
private static final BigDecimal SQRT_DIG = new BigDecimal(150);
private static final BigDecimal SQRT_PRE = new BigDecimal(10).pow(SQRT_DIG.intValue());

/**
 * Private utility method used to compute the square root of a BigDecimal.
 * 
 * @author Luciano Culacciatti 
 * @url http://www.codeproject.com/Tips/257031/Implementing-SqrtRoot-in-BigDecimal
 */
private static BigDecimal sqrtNewtonRaphson  (BigDecimal c, BigDecimal xn, BigDecimal precision){
    BigDecimal fx = xn.pow(2).add(c.negate());
    BigDecimal fpx = xn.multiply(new BigDecimal(2));
    BigDecimal xn1 = fx.divide(fpx,2*SQRT_DIG.intValue(),RoundingMode.HALF_DOWN);
    xn1 = xn.add(xn1.negate());
    BigDecimal currentSquare = xn1.pow(2);
    BigDecimal currentPrecision = currentSquare.subtract(c);
    currentPrecision = currentPrecision.abs();
    if (currentPrecision.compareTo(precision) <= -1){
        return xn1;
    }
    return sqrtNewtonRaphson(c, xn1, precision);
}

/**
 * Uses Newton Raphson to compute the square root of a BigDecimal.
 * 
 * @author Luciano Culacciatti 
 * @url http://www.codeproject.com/Tips/257031/Implementing-SqrtRoot-in-BigDecimal
 */
public static BigDecimal bigSqrt(BigDecimal c){
    return sqrtNewtonRaphson(c,new BigDecimal(1),new BigDecimal(1).divide(SQRT_PRE));
} 
```

请务必查看 barwnikk 的答案。它更简洁，似乎提供了良好或更好的精度。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-11-02T14:38:45.380

```
public static BigDecimal sqrt(BigDecimal A, final int SCALE) {
    BigDecimal x0 = new BigDecimal("0");
    BigDecimal x1 = new BigDecimal(Math.sqrt(A.doubleValue()));
    while (!x0.equals(x1)) {
        x0 = x1;
        x1 = A.divide(x0, SCALE, ROUND_HALF_UP);
        x1 = x1.add(x0);
        x1 = x1.divide(TWO, SCALE, ROUND_HALF_UP);

    }
    return x1;
} 
```

这项工作完美！超过 65536 位数字非常快！

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-06-25T23:53:28.233

从 Java 9 开始，您可以！见[`BigDecimal.sqrt()`](https://docs.oracle.com/javase/9/docs/api/java/math/BigDecimal.html#sqrt-java.math.MathContext-)。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-05-31T14:15:22.667

通过使用 Karp 的技巧，这可以在没有循环的情况下仅在两行中实现，精度为 32 位：

```
public static BigDecimal sqrt(BigDecimal value) {
    BigDecimal x = new BigDecimal(Math.sqrt(value.doubleValue()));
    return x.add(new BigDecimal(value.subtract(x.multiply(x)).doubleValue() / (x.doubleValue() * 2.0)));
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-08-19T20:05:52.497

如果您只需要找到[整数平方根](http://en.wikipedia.org/wiki/Integer_square_root)- 这是可以使用的两种方法。

**[牛顿法](http://en.wikipedia.org/wiki/Newton%27s_method#Square_root_of_a_number)**- 即使对于 1000 位 BigInteger 也非常快：

```
public static BigInteger sqrtN(BigInteger in) {
    final BigInteger TWO = BigInteger.valueOf(2);
    int c;

    // Significantly speed-up algorithm by proper select of initial approximation
    // As square root has 2 times less digits as original value
    // we can start with 2^(length of N1 / 2)
    BigInteger n0 = TWO.pow(in.bitLength() / 2);
    // Value of approximate value on previous step
    BigInteger np = in;

    do {
        // next approximation step: n0 = (n0 + in/n0) / 2
        n0 = n0.add(in.divide(n0)).divide(TWO);

        // compare current approximation with previous step
        c = np.compareTo(n0);

        // save value as previous approximation
        np = n0;

        // finish when previous step is equal to current
    }  while (c != 0);

    return n0;
} 
```

**[二分法](http://en.wikipedia.org/wiki/Bisection_method)**- 比牛顿法慢 50 倍 - 仅用于教育目的：

```
 public static BigInteger sqrtD(final BigInteger in) {
    final BigInteger TWO = BigInteger.valueOf(2);
    BigInteger n0, n1, m, m2, l;
    int c;

    // Init segment
    n0 = BigInteger.ZERO;
    n1 = in;

    do {
        // length of segment
        l = n1.subtract(n0);

        // middle of segment
        m = l.divide(TWO).add(n0);

        // compare m^2 with in
        c = m.pow(2).compareTo(in);

        if (c == 0) {
            // exact value is found
            break;
        }  else if (c > 0) {
            // m^2 is bigger than in - choose left half of segment
            n1 = m;
        } else {
            // m^2 is smaller than in - choose right half of segment
            n0 = m;
        }

        // finish if length of segment is 1, i.e. approximate value is found
    }  while (l.compareTo(BigInteger.ONE) > 0);

    return m;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-12T02:59:47.990

java api中没有任何东西，所以如果double不够准确（如果没有，为什么要使用BigDecimal？）那么你需要类似下面的代码。）

```
import java.math.BigDecimal;

public class BigDSqrt {
  public static BigDecimal sqrt(BigDecimal n, int s) {
    BigDecimal TWO = BigDecimal.valueOf(2);

    // Obtain the first approximation
    BigDecimal x = n
        .divide(BigDecimal.valueOf(3), s, BigDecimal.ROUND_DOWN);
    BigDecimal lastX = BigDecimal.valueOf(0);

    // Proceed through 50 iterations
    for (int i = 0; i < 50; i++) {
      x = n.add(x.multiply(x)).divide(x.multiply(TWO), s,
          BigDecimal.ROUND_DOWN);
      if (x.compareTo(lastX) == 0)
        break;
      lastX = x;
    }
    return x;
  }
} 
```

来源：[http ://www.java2s.com/Code/Java/Language-Basics/DemonstrationofhighprecisionarithmeticwiththeBigDoubleclass.htm](http://web.archive.org/web/20080319103147/http://www.java2s.com/Code/Java/Language-Basics/DemonstrationofhighprecisionarithmeticwiththeBigDoubleclass.htm)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-14T21:14:15.203

正如之前所说：如果您不介意答案的精度，但只想在第 15 个仍然有效的数字之后生成随机数字，那么您为什么要使用 BigDecimal 呢？

这是应该使用浮点 BigDecimals 实现技巧的方法的代码：

```
 import java.math.BigDecimal;
    import java.math.BigInteger;
    import java.math.MathContext;

public BigDecimal bigSqrt(BigDecimal d, MathContext mc) {
    // 1\. Make sure argument is non-negative and treat Argument 0
    int sign = d.signum();
    if(sign == -1)
      throw new ArithmeticException("Invalid (negative) argument of sqrt: "+d);
    else if(sign == 0)
      return BigDecimal.ZERO;
    // 2\. Scaling:
    // factorize d = scaledD * scaleFactorD 
    //             = scaledD * (sqrtApproxD * sqrtApproxD)
    // such that scalefactorD is easy to take the square root
    // you use scale and bitlength for this, and if odd add or subtract a one
    BigInteger bigI=d.unscaledValue();
    int bigS=d.scale();
    int bigL = bigI.bitLength();
    BigInteger scaleFactorI;
    BigInteger sqrtApproxI;
    if ((bigL%2==0)){
       scaleFactorI=BigInteger.ONE.shiftLeft(bigL);
       sqrtApproxI=BigInteger.ONE.shiftLeft(bigL/2);           
    }else{
       scaleFactorI=BigInteger.ONE.shiftLeft(bigL-1);
       sqrtApproxI=BigInteger.ONE.shiftLeft((bigL-1)/2 );          
    }
    BigDecimal scaleFactorD;
    BigDecimal sqrtApproxD;
    if ((bigS%2==0)){
        scaleFactorD=new BigDecimal(scaleFactorI,bigS);
        sqrtApproxD=new BigDecimal(sqrtApproxI,bigS/2);
    }else{
        scaleFactorD=new BigDecimal(scaleFactorI,bigS+1);
        sqrtApproxD=new BigDecimal(sqrtApproxI,(bigS+1)/2);         
    }
    BigDecimal scaledD=d.divide(scaleFactorD);

    // 3\. This is the core algorithm:
    //    Newton-Ralpson for scaledD : In case of f(x)=sqrt(x),
    //    Heron's Method or Babylonian Method are other names for the same thing.
    //    Since this is scaled we can be sure that scaledD.doubleValue() works 
    //    for the start value of the iteration without overflow or underflow
    System.out.println("ScaledD="+scaledD);
    double dbl = scaledD.doubleValue();
    double sqrtDbl = Math.sqrt(dbl);
    BigDecimal a = new BigDecimal(sqrtDbl, mc);

    BigDecimal HALF=BigDecimal.ONE.divide(BigDecimal.ONE.add(BigDecimal.ONE));
    BigDecimal h = new BigDecimal("0", mc);
    // when to stop iterating? You start with ~15 digits of precision, and Newton-Ralphson is quadratic
    // in approximation speed, so in roundabout doubles the number of valid digits with each step.
    // This fmay be safer than testing a BigDecifmal against zero.
    int prec = mc.getPrecision();
    int start = 15;
    do {
        h = scaledD.divide(a, mc);
        a = a.add(h).multiply(HALF);
        start *= 2;
    } while (start <= prec);        
    // 3\. Return rescaled answer. sqrt(d)= sqrt(scaledD)*sqrtApproxD :          
    return (a.multiply(sqrtApproxD));
} 
```

作为一个测试，尝试重复数次平方而不是重复平方根，看看你离开始的地方有多近。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-12T01:16:32.237

如果要计算位数超过双精度数的数字的平方根（大比例的 BigDecimal）：

维基百科有一篇计算平方根的文章：[http ://en.wikipedia.org/wiki/Methods_of_computing_square_roots#Babylonian_method](http://en.wikipedia.org/wiki/Methods_of_computing_square_roots#Babylonian_method)

这是我的实现：

```
public static BigDecimal sqrt(BigDecimal in, int scale){
    BigDecimal sqrt = new BigDecimal(1);
    sqrt.setScale(scale + 3, RoundingMode.FLOOR);
    BigDecimal store = new BigDecimal(in.toString());
    boolean first = true;
    do{
        if (!first){
            store = new BigDecimal(sqrt.toString());
        }
        else first = false;
        store.setScale(scale + 3, RoundingMode.FLOOR);
        sqrt = in.divide(store, scale + 3, RoundingMode.FLOOR).add(store).divide(
                BigDecimal.valueOf(2), scale + 3, RoundingMode.FLOOR);
    }while (!store.equals(sqrt));
    return sqrt.setScale(scale, RoundingMode.FLOOR);
} 
```

`setScale(scale + 3, RoundingMode.Floor)`因为过度计算会提供更高的准确性。`RoundingMode.Floor`截断数字，进行`RoundingMode.HALF_UP`正常舍入。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-01-21T15:34:49.397

这是非常准确和快速的解决方案，它基于我的[BigIntSqRoot 解决方案](https://stackoverflow.com/a/28121186/1129332)和下一个观察：**A^2B 的平方根 - 是 A 乘以 B 的根**。使用这种方法，我可以轻松计算 2 的平方根的前 1000 位。

```
1.4142135623730950488016887242096980785696718753769480731766797379907324784621070388503875343276415727350138462309122970249248360558507372126441214970999358314132226659275055927557999505011527820605714701095599716059702745345968620147285174186408891986095523292304843087143214508397626036279952514079896872533965463318088296406206152583523950547457502877599617298355752203375318570113543746034084988471603868999706990048150305440277903164542478230684929369186215805784631115966687130130156185689872372352885092648612494977154218334204285686060146824720771435854874155657069677653720226485447015858801620758474922657226002085584466521458398893944370926591800311388246468157082630100594858704003186480342194897278290641045072636881313739855256117322040245091227700226941127573627280495738108967504018369868368450725799364729060762996941380475654823728997180326802474420629269124859052181004459842150591120249441341728531478105803603371077309182869314710171111683916581726889419758716582152128229518488472 
```

所以这里是源代码

```
public class BigIntSqRoot {
    private static final int PRECISION = 10000;
    private static BigInteger multiplier = BigInteger.valueOf(10).pow(PRECISION * 2);
    private static BigDecimal root = BigDecimal.valueOf(10).pow(PRECISION);
    private static BigInteger two = BigInteger.valueOf(2L);

    public static BigDecimal bigDecimalSqRootFloor(BigInteger x)
            throws IllegalArgumentException {
        BigInteger result = bigIntSqRootFloor(x.multiply(multiplier));
        //noinspection BigDecimalMethodWithoutRoundingCalled
        return new BigDecimal(result).divide(root);
    }

    public static BigInteger bigIntSqRootFloor(BigInteger x)
            throws IllegalArgumentException {
        if (checkTrivial(x)) {
            return x;
        }
        if (x.bitLength() < 64) { // Can be cast to long
            double sqrt = Math.sqrt(x.longValue());
            return BigInteger.valueOf(Math.round(sqrt));
        }
        // starting with y = x / 2 avoids magnitude issues with x squared
        BigInteger y = x.divide(two);
        BigInteger value = x.divide(y);
        while (y.compareTo(value) > 0) {
            y = value.add(y).divide(two);
            value = x.divide(y);
        }
        return y;
    }

    public static BigInteger bigIntSqRootCeil(BigInteger x)
            throws IllegalArgumentException {
        BigInteger y = bigIntSqRootFloor(x);
        if (x.compareTo(y.multiply(y)) == 0) {
            return y;
        }
        return y.add(BigInteger.ONE);
    }

    private static boolean checkTrivial(BigInteger x) {
        if (x == null) {
            throw new NullPointerException("x can't be null");
        }
        if (x.compareTo(BigInteger.ZERO) < 0) {
            throw new IllegalArgumentException("Negative argument.");
        }

        return x.equals(BigInteger.ZERO) || x.equals(BigInteger.ONE);
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-04-13T16:52:07.773

我想出了一个算法，它不仅取平方根，而且取每个 BigDecimal 的整数以下的每个根。它的最大优势在于它不执行搜索算法，因此运行时间为 0,1ms - 1ms，速度非常快。

但是你得到的速度和多功能性，它缺乏准确性，它平均 5 个正确的数字，第五个数字的偏差为 3。（用一百万个随机数和根进行测试），虽然测试运行的根非常高，所以如果你将根保持在 10 以下，你可以期待更高的准确性。

结果只有 64 位精度，其余数字为零，因此如果您需要非常高的精度，请不要使用此函数。

它可以处理非常大的数字，非常大的根，而不是非常小的数字。

```
public static BigDecimal nrt(BigDecimal bd,int root) {
//if number is smaller then double_max_value it's faster to use the usual math 
//library
    if(bd.compareTo(BigDecimal.valueOf(Double.MAX_VALUE)) < 0) 
        return new BigDecimal( Math.pow(bd.doubleValue(), 1D / (double)root ));

    BigDecimal in = bd;
    int digits = bd.precision() - bd.scale() -1; //take digits to get the numbers power of ten
    in = in.scaleByPowerOfTen (- (digits - digits%root) ); //scale down to the lowest number with it's power of ten mod root is the same as initial number

    if(in.compareTo(BigDecimal.valueOf( Double.MAX_VALUE) ) > 0) { //if down scaled value is bigger then double_max_value, we find the answer by splitting the roots into factors and calculate them seperately and find the final result by multiplying the subresults
        int highestDenominator = highestDenominator(root);
        if(highestDenominator != 1) {
            return nrt( nrt(bd, root / highestDenominator),highestDenominator); // for example turns 1^(1/25) 1^(1/5)^1(1/5)
        }
        //hitting this point makes the runtime about 5-10 times higher,
        //but the alternative is crashing
        else return nrt(bd,root+1) //+1 to make the root even so it can be broken further down into factors
                    .add(nrt(bd,root-1),MathContext.DECIMAL128) //add the -1 root and take the average to deal with the inaccuracy created by this
                    .divide(BigDecimal.valueOf(2),MathContext.DECIMAL128); 
    } 
    double downScaledResult = Math.pow(in.doubleValue(), 1D /root); //do the calculation on the downscaled value
    BigDecimal BDResult =new BigDecimal(downScaledResult) // scale back up by the downscaled value divided by root
            .scaleByPowerOfTen( (digits - digits % root) / root );
    return BDResult;
}
private static int highestDenominator(int n) {
    for(int i = n-1; i>1;i--) {
        if(n % i == 0) {
            return i;
        }
    }
    return 1;
} 
```

它通过使用一个数学属性来工作，该属性基本上说，当你做平方根时，你可以将 x^0.5 更改为 (x/100)^0,5 * 10，因此将底数除以 100 取幂并乘以 10。

将其推广为 x^(1/n) = (x / 10^n) ^ (1/n) * 10。

因此，对于立方根，您需要将底除以 10^3，对于四根，您需要除以 10^4，依此类推。

该算法使用该函数将输入缩小到数学库可以处理的范围，然后根据输入的缩小程度再次将其放大。

它还处理了一些输入无法足够缩小的边缘情况，正是这些边缘情况增加了很多准确性问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-07-11T06:45:20.537

```
public static BigDecimal sqrt( final BigDecimal value )
{
    BigDecimal guess = value.multiply( DECIMAL_HALF ); 
    BigDecimal previousGuess;

    do
    {
        previousGuess = guess;
        guess = sqrtGuess( guess, value );
   } while ( guess.subtract( previousGuess ).abs().compareTo( EPSILON ) == 1 );

    return guess;
}

private static BigDecimal sqrtGuess( final BigDecimal guess,
                                     final BigDecimal value )
{
    return guess.subtract( guess.multiply( guess ).subtract( value ).divide( DECIMAL_TWO.multiply( guess ), SCALE, RoundingMode.HALF_UP ) );
}

private static BigDecimal epsilon()
{
    final StringBuilder builder = new StringBuilder( "0." );

    for ( int i = 0; i < SCALE - 1; ++i )
    {
        builder.append( "0" );
    }

    builder.append( "1" );

    return new BigDecimal( builder.toString() );
}

private static final int SCALE = 1024;
private static final BigDecimal EPSILON = epsilon();
public static final BigDecimal DECIMAL_HALF = new BigDecimal( "0.5" );
public static final BigDecimal DECIMAL_TWO = new BigDecimal( "2" ); 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2012-11-30T17:07:42.767

```
BigDecimal.valueOf(Math.sqrt(myBigDecimal.doubleValue())); 
```

# c# - 如何在 xaml 中指定枚举

> ID：13649705
> 
> 赞同：0
> 
> 时间：2012-11-30T17:04:14.023
> 
> 标签：c#, wpf, xaml, combobox, enums

我的 WPF 应用程序有一个扩展，我在回答 StackOverflow 上的一个问题时找到了该扩展，它为`ComboBox`枚举创建了选择。我不记得我是从哪个帖子得到的，但因为这不是问题，所以无关紧要。

我在我的 WPF 应用程序中为我们产品的后端使用了一个 DLL。在这个 DLL 中有一个枚举，我希望用户从使用 a`ComboBox`和上述扩展名中进行选择。我在 XAML 中定义了正确的 xmlns。

问题是我的枚举是另一个类的子类。也就是说，它的定义如下：

```
public class MyClass {

    . . .

    public enum MyEnum { . . . }

    . . .
} 
```

我认为 XAML`ComboBox`应该是这样的：

```
<ComboBox ItemsSource="{Binding Source={cs:Enumeration {x:Type ns:MyClass.MyEnum}}}" 
          . . . /> 
```

当我键入“MyClass”时，当我键入句点以将父类名称与子类型名称分开时，Intellisense 只是再次提供上层类名称。如果我只是在句点之后键入子类名称，编译器会给我一个错误：“Type MyClass.MyEnum not found”。

如何正确指定我的枚举名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:16:19.650

我决定对此进行抨击，并使用与加载`ComboBox`从数据库中提取的选项相同的机制。那是：

1.  我`ObservableCollection`在我的视图模型类中创建了一个包含选项的
2.  `ObservableCollection`我在视图模型类的构造函数中填充了一个名为`ItemChoice`. 声明如下：

    公共 ObservableCollection<ItemChoice<MyClass.MyEnum>> EnumChoices { get; 放;

3.  `ComboBox's ItemsSource`我将属性绑定到`EnumChoices`XAML 中的集合。

4.  在视图模型的构造函数中，我实例化`EnumChocies`集合并用新对象加载它，`ItemChoice`枚举中的每个选择一个。

这一切都有效。我现在可以继续处理代码的其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:14:08.870

尝试使用：

```
{x:Type ns:MyClass+MyEnum} 
```

[http://neilmosafi.blogspot.co.uk/2007/08/dec-06-wpfxaml-xtype-and-nested-classes.html](http://neilmosafi.blogspot.co.uk/2007/08/dec-06-wpfxaml-xtype-and-nested-classes.html)

# javascript - 当我使用 jQuery.ajax 获取脚本时抛出语法错误

> ID：13649709
> 
> 赞同：1
> 
> 时间：2012-11-30T17:04:25.767
> 
> 标签：javascript, jquery, ajax, syntax-error, impactjs

我有以下代码：

```
$.ajax({
    beforeSend: function () {
        console.log("fetching script");
    },
    url: "../../../scripts/review-level-" + ig.game.currentLevel.toString() + ".js",
    dataType: "script",
    type: "GET",
    success: function (script) {
        console.log(reviewFunc());
    },
    error: function (jqXHR, textStatus, errorThrown) {
        console.log(errorThrown);
    }
}); 
```

我正在尝试使用 jQuery.ajax 获取脚本，我也尝试过速记函数`$.getScript()`，并且我在参数中得到`SyntaxError`了a ，即使在 chrome 开发人员工具的网络选项卡下它显示脚本为成功获取状态码为 200。这是我正在获取的脚本：`errorThrown``error`

```
function reviewFunc() {
    var overlay = ig.game.spawnEntity("EntityInfooverlay", 0, 0, {
        msg: {
            status: true,
            message: "Question #1:",
            counterOut: 0
        }
    });
    console.log("reviewFunc Finished");
    return overlay;
} 
```

我在那里看不到任何语法错误，所以我有点难过。如果有人在任何帮助之前看到我没有或遇到过的任何东西，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:14:10.930

使用一些原始 javascript 可能更容易调试：

```
loadScript("../../../scripts/review-level-" + ig.game.currentLevel.toString() 
    + ".js", function() { reviewFunc(); });

function loadScript(src, callback)
{
    var s, r;
    r = false;
    s = document.createElement('script');
    s.type = 'text/javascript';
    s.src = src;
    s.onload = s.onreadystatechange = function() {
        if ( !r && (!this.readyState || this.readyState == 'complete') )
        {
            r = true;
            callback();
        }
    };
    document.body.appendChild(s);
} 
```

* * *

**编辑**

[在这里](https://stackoverflow.com/questions/11444427/javascript-uncaught-syntaxerror-unexpected-token)找到了解决方案。

# c++ - 连接 valarray

> ID：13649712
> 
> 赞同：1
> 
> 时间：2012-11-30T17:04:33.227
> 
> 标签：c++, concatenation, valarray

我有一些数据存储在`std::vector<std::vector<double>`. 我用它`std::valarray`从我的`std::vector<std::vector<double>`.

```
std:valarray<double> corpX(corps_tmp[i].data(), corps_tmp[i].size()); 
```

有了这个新的，`std:valarray<double>`我创建了一个`std::vector`corpX，所以我获得了一个`std::vector<std:valarray<double>>`. 现在我还需要将每个的前两个值存储`std::valarray`在另一个中`std::valarray`：

```
std:valarray<double> position_corps = \\ Concatenation of all the std::valarrays corpsX 
```

我怎样才能以简单的方式做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:32:25.137

```
// assume: std::vector<std::valarray<double>> corpsX;
std::valarray<double> position_corps(corpsX.size());
for (std::size_t i = 0; i < corpsX.size(); ++i) {
    position_corps[std::slice(2 * i, 2, 1)] = corpsX[i][std::slice(0, 2, 1)];
} 
```

# javascript - 无法显示 jquery GET 的 JSON 结果

> ID：13649713
> 
> 赞同：0
> 
> 时间：2012-11-30T17:04:33.013
> 
> 标签：javascript, jquery, json

我是 Javascript、JQuery 和 JSON 的新手，所以我可能会犯很多不同的错误，但我一直发现最好的学习方法就是直接进入。

我正在使用 elophant.com 网站上提供的 API 进行一个小型宠物项目，主要用于练习。它用于跟踪流行的英雄联盟游戏的统计数据。但是，我似乎无法让任何 jquery 正常工作。这是我尝试访问的资源的 API：http: [//elophant.com/developers/docs/status](http://elophant.com/developers/docs/status)。

他们的示例请求是：“GET [http://elophant.com/api/v1/status?key=](http://elophant.com/api/v1/status?key=) <key>” <key> 字段是他们在您注册到站点后提供给您的密钥。它以 JSON 格式返回信息。

到目前为止，这是我正在尝试做的事情：

```
<body>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>

    <script>
    $.get("http://elophant.com/api/v1/status?key=MY_KEY_HERE", {callback : "?" }, "jsonp",  function(data) {
    $('#summary').text(data.result);
    });
    </script>
</body> 
```

**编辑：**我删除了 JSONP 并将其替换为纯 JSON，我收到此控制台错误：

```
XMLHttpRequest cannot load http://elophant.com/api/v1/status?key=MY_KEY_HERE&callback=%3F. Origin null is not allowed by Access-Control-Allow-Origin. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:08:40.020

至少，您的参数顺序似乎是错误的。dataType 必须在回调函数之后，如下所示：

```
$.get("http://elophant.com/api/v1/status?key=MY_KEY_HERE", {callback : "?" },  function(data) {
    $('#summary').text(data.result);
}, "jsonp"); 
```

我在该 API 文档中也没有看到任何表明它支持在 JSONP 回调函数中包装 JSON 的内容。你确定这是可用的吗？

您可以通过验证您获得的响应是​​ JSON 包装在一个函数中来测试这一点。这可能看起来像这样：

```
callback({key: "value", anotherKey: "another value"}) 
```

# data-mining - Cluto 稀疏矩阵聚类

> ID：13649714
> 
> 赞同：0
> 
> 时间：2012-11-30T17:04:38.377
> 
> 标签：data-mining, cluster-analysis, cluto

我下载了 cluto，我想发送一个包含稀疏数据作为输入的文本文件，并希望获得集群数据的输出。例如：

```
4   3   9
1 0.4   2 0.4
1 0.4   2 0.4
2 1.2   3 1.2
1 0.4   2 0.4   3 0.4 
```

是我的输入，我想得到输出

```
column  cluster
1       1
2       1
3       2
4       1 
```

我找不到那条路。如何使用 cluto vcluster.exe 来实现这个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T21:22:00.247

“vcluster”有一个选项来指定名为“-clustfile”的集群分配文件。统计信息会显示到标准io，聚类结果会写入文件。

在文件中，会有单行数字，代表特定行的集群 id。在您的情况下，该文件将如下所示：

```
1
1
2
1 
```

# android - 无法从 MediaStore 中删除

> ID：13649716
> 
> 赞同：2
> 
> 时间：2012-11-30T17:04:46.117
> 
> 标签：android

我正在尝试用 MP3 文件替换用户的铃声。铃声文件按需生成，内容变化；但是，我需要保证文件名及其标题（出现在铃声列表中）保持不变。

我可以毫无问题地更换一次铃声，当我第二次尝试添加铃声时，困难就开始了，因为 ContentResolver.insert() 返回 NullPointerException; 根据我的测试，发生这种情况是因为已经在数据或标题列中注册了一个具有相同值的文件（如果确实如此，我仍然无法弄清楚是什么导致了问题）。

所以我试图从 MediaStore 中删除条目，但没有多大成功，因为 delete() 返回 0 并且条目保留在 MediaStore 中。我尝试了两件事：

**尝试 #1 不会删除该条目**

```
getContentResolver().delete(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,"TITLE='TestRing'",null); 
```

**尝试 #2 也不会删除该条目**

```
final String[] ringColumns = { MediaStore.MediaColumns.DATA, MediaStore.MediaColumns.TITLE,MediaStore.MediaColumns._ID };
final String ringOrderBy = MediaStore.Audio.Media._ID+" DESC";
final String ringWhere = MediaStore.Images.Media.TITLE+"=?";
final String[] ringArguments = { "TestRing" };

Cursor ringCursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, ringColumns, ringWhere, ringArguments, ringOrderBy);

if(ringCursor.getCount()>1)
{
    while(ringCursor.moveToNext())
    {
        int id = ringCursor.getInt(ringCursor.getColumnIndex(MediaStore.Audio.Media._ID));            
        String title = ringCursor.getString(ringCursor.getColumnIndex(MediaStore.Audio.Media.TITLE));            

        if(title.equals("TestRing"))
        {                
            ContentResolver cr = getContentResolver();
            retVal += cr.delete(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, MediaStore.Audio.Media._ID + "="+id, null );
            break;
        }
    }               
} 
```

这是我用来在媒体商店中创建条目的代码，如果不存在条目，则可以正常工作：

```
File fOut = new File("/mnt/sdcard/media/audio/ringtones/newRingtone.mp3");
if(fOut.exists())
    fOut.delete();

ContentValues content = new ContentValues();
content.put(MediaStore.Audio.Media.IS_RINGTONE, true);
content.put(MediaStore.MediaColumns.DATA,fOut.getAbsolutePath());
content.put(MediaStore.MediaColumns.TITLE, "TestRing");       
content.put(MediaStore.MediaColumns.MIME_TYPE, "audio/*");

Uri uri = MediaStore.Audio.Media.getContentUriForPath(fOut.getAbsolutePath()); 
Uri newUri = getContentResolver().insert(uri, content); //insert returns null on the 2nd insertion 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-29T09:41:10.233

已解决，此代码删除了以前具有相同标题的条目：

```
getContentResolver().delete(MediaStore.Audio.Media.INTERNAL_CONTENT_URI,"TITLE='MyTitle'", null); 
```

# c - 通过管道写入和读取子进程不起作用

> ID：13649719
> 
> 赞同：1
> 
> 时间：2012-11-30T17:04:49.923
> 
> 标签：c, unix, exec, posix, pipe

作为 Unix 编程的一个练习，我编写了一个程序，它创建两个管道，分叉一个孩子，然后通过管道向孩子发送和接收一些文本。如果在子进程中我使用函数中的代码读取和写入数据，它就可以工作`filter`。但是，如果孩子试图将管道重定向到其标准输入和标准输出（使用`dup2`）并执行（使用`execlp`）`tr`实用程序，那么它不起作用，它会卡在某个地方。此代码在`filter2`函数中。问题是，为什么？这是代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <ctype.h>

void err_sys(const char* x) { perror(x); exit(1); } 

void upper(char *s) { while((*s = toupper(*s))) ++s; }

void filter(int input, int output)
{   
    char buff[1024];
    bzero(buff, sizeof(buff));
    size_t n = read(input, buff, sizeof(buff));

    printf("process %ld: got '%s'\n", (long) getpid(), buff);

    upper(buff);
    write(output, buff, strlen(buff));
}   

void filter2(int input, int output)
{   
    if (dup2(input, 0) != 0) err_sys("dup2(input, 0)");
    if (dup2(output, 1) != 1) err_sys("dup2(output, 1)");
    execlp("/usr/bin/tr", "tr", "[a-z]", "[A-Z]" , (char*)0);
}   

int main(int argc, char** argv) 
{   
    int pipe1[2];
    int pipe2[2];
    if (pipe(pipe1) < 0) err_sys("pipe1");
    if (pipe(pipe2) < 0) err_sys("pipe2");

    pid_t pid;
    if ((pid = fork()) < 0) err_sys("fork");
    else if (pid > 0)
    {   
        close(pipe1[0]);
        close(pipe2[1]);
        char* s = "Hello there, can you please uppercase this and send it back to me? Thank you!";
        write(pipe1[1], s, strlen(s));

        char buff[1024];
        bzero(buff, sizeof(buff));
        size_t n = read(pipe2[0], buff, sizeof(buff));
        pid_t mypid = getpid();
        printf("process %ld: got '%s'\n", (long) mypid, buff);
    } else
    {   // Child.
        close(pipe1[1]);
        close(pipe2[0]);

        filter(pipe1[0], pipe2[1]); 
        //filter2(pipe1[0], pipe2[1]);  // FIXME: This doesn't work
    }   
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:15:13.093

您在 main 中的父进程需要一个小改动：

```
/* Was: */
char* s = "Hello there, can you please uppercase this and send it back to me? Thank you!";
write(pipe1[1], s, strlen(s));
/* add: */
close(pipe1[1]); 
```

其他人提到过缓冲，但这并不是真正的缓冲问题。这是关于进程间通信的。

管道被称为“管道”而不是“传送带”是有原因的。与传送带不同，管道不保留包装边界。管道只是一个字节流；`write`将一堆字节转储到流中，但没有标记它已经这样做的事实。因此，您的代码可能完全相同：

```
 write(pipe1[1], s, strlen(s)/2);
    write(pipe1[1], s + strlen(s)/2,
                    strlen(s+strlen(s)/2)); 
```

或 s 的任何其他组合`write`。接收端将只读取方便数量的字节（即方便它），并处理它们。它可能会做这样的事情：

```
 read(stdin, buffer, BUFSIZ); 
```

在读取 BUFSIZ 字节或到达 EOF 之前，它不会返回。由于您无法进入阅读过程的系统调用并追溯更改阅读的长度，因此您可以让阅读过程实际完成其工作的唯一方法是安排它获得 EOF 指示，并且您可以这样做就是关闭管道。因此我上面的解决方案。

这并不总是很方便，因为它不可能将两个连续的请求放入一个流中。在两个进程之间建立通信会涉及很多开销（特别是如果服务器进程需要重新启动）。如果您想“管道”请求（以便在每个请求结束时发送响应），您需要设计一个明确指示“包边界”的通信协议；请求之间的划分。换句话说，您需要使用管道实现自己的传送带。

一个通信协议需要两端的支持；你不能只从客户端实现它。因此，您将无法`tr`理解任意协议；它只是做它做的事情（当它觉得有足够的字节来打扰发送时，读取 EOF 并写入翻译的字节）。所以如果你想玩弄这个想法，你需要编写客户端和服务器进程。

可用的最简单的包协议可能是 Daniel Bernstein 的[netstrings](http://cr.yp.to/proto/netstrings.txt)。该链接包含实际代码，非常简单，但基本思想是这样的：发送字符串的方法是将其长度作为十进制数发送，后跟冒号 (:)，后跟长度中承诺的字节数。编写者在发送之前需要知道要发送多少字节；读者需要读到':'（djb`scanf`就是这样做的，这表明了 ':' 的一个经常被低估的特性`scanf`）；一旦它知道请求中有多少字节，它就可以阻止读取该字节数。这是一个在双方都可以实现的简单协议，因此它是一个简单的实践练习。

HTTP 使用类似但更复杂的协议（并且，与所有不必要的复杂协议一样，结果是由于误解而导致互操作性错误很常见），但本质上是相同的：发送方需要指示消息的长度（或消息的正文，在 HTTP 的情况下）是，它与`Content-Length:`标头一起使用。但是，由于在发送所有字节之前知道要发送多少字节并不总是很方便，因此 HTTP 允许“分块”编码（用不同的标头表示）；在这种情况下，每个块都包含一个长度（以十六进制表示），然后`\r\n`是正文，然后是`\r\n`，然后是......好吧，您可以阅读 RFC 以了解混乱的细节。这里的问题包括一些客户端发送只是`\n`而不是`\r\n`并且如何处理尾随有点模棱两可`\r\n`。正如 djb 所指出的，Netstrings 会简单得多。

除非您想使用完整的 HTTP 客户端/服务器库，否则实现进程间通信的更实用的替代方案是 Google 的开源[protobuf](http://code.google.com/p/protobuf/)包。[ASN.1](http://www.itu.int/ITU-T/asn1/introduction/index.htm)是一个较早且在我看来技术上更优越的解决方案，不幸的是它没有一套方便的开源工具（但不要立即进入那个站点；它很大）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:55:19.117

`tr`因为它使用缓冲输入而阻塞读取。

如果您不想写更多内容，只需在完成写入时（以及在阅读之前）关闭管道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T17:43:06.633

这里最可能的问题是默认情况下[`stdin`](http://www.kernel.org/doc/man-pages/online/pages/man3/stdio.3.html)和[`stdout`](http://www.kernel.org/doc/man-pages/online/pages/man3/stdio.3.html)流都是*行缓冲*`tr`的，因此该过程正在工作，只是没有将其输入/不刷新流到管道中。尝试向子进程发送更多输入，您会看到它响应，但是...

*   小心字符串零终止符 - 现在您正在打印从管道读取的字节，该管道可能不是正确的 C-syle 零终止字符串，
*   检查所有系统调用的返回值，例如[`write(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/write.2.html)，
*   *避免竞争条件*- 当前您的父子和子都阻塞等待输入，您可能希望切换到非阻塞模式并[`select(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)用于 IO 多路复用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T17:26:31.410

`write(pipe1[1], s, strlen(s));`不写 NUL 字符，但这对于`while((*s = toupper(*s))) ++s;`

# android - 对 Eclipse 工作区感到困惑

> ID：13649723
> 
> 赞同：0
> 
> 时间：2012-11-30T17:05:14.073
> 
> 标签：android, eclipse, project, workspace

我想在 Eclipse 中创建我的 Android 项目的副本，这样我就可以在不触及原始项目的情况下修改副本。所以我开始创建一个新的工作区。我以为我在新工作区工作，因为工作区的路径显示在 Eclipse 菜单栏的顶部，但我看到：

1）我的新工作区目录中没有项目文件，所以我复制了一个包含所有项目文件的文件夹，包括我今天早上用今天日期更改的文件

2）当我通过此[建议](https://stackoverflow.com/questions/7285306/setting-up-google-api-java-client-developing-environment/7370807#7370807)添加新的 .jar 文件时，在执行建议的第 5 步时，我看到列出了旧的 jar 文件工作区，而不是我的新工作区目录路径。

所以这是我的问题：1）我需要一个新的工作区来避免覆盖我的旧项目代码吗？2）我是否需要导入我今天早上接触的项目，以便 Eclipse 识别它的新位置？3）它还在旧工作区中使用旧的jar文件吗？我解释正确了吗？

我是否应该按照以下步骤清理[此处](https://stackoverflow.com/questions/5493038/move-android-eclipse-project-into-workspace/5576835#5576835)列出的内容：

> 创建一个新的 android 项目，选择“从现有源创建项目”，确保源目录确实在您的工作区之外（您将不得不忍受一秒钟）。这应该 a) 在源目录中创建必要的 .project/.classpath 文件（现在仍然在您的工作区之外）并且 b) 使项目显示在 Eclipse 的列表中。
> 
> 右键单击 Package Explorer 中的项目并选择 Delete，确保在出现删除磁盘上文件的选项时未选中它。
> 
> 现在像导入任何其他项目一样导入项目（您现在可以这样做，因为 .project/.classpath 文件是在上面的步骤 1 中创建的）。导入“将项目复制到工作区”时应该有一个选项，所以勾选该选项。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:12:51.870

工作区只是 ProjectSets 和配置集，因此您可以根据您正在做的事情拥有完全不同的 GUI 设计。我的所有公司项目都有一个工作区，我的所有客户项目也有一个工作区。工作区保持独立并且可以有不同的配置。

对于您想要做的事情，最好的办法是在资源管理器中，创建整个项目文件夹的副本，并将其重命名为其他名称 (Project1)-(Project2)。

然后回到eclipse，文件->导入->现有项目

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:12:17.910

如上所述，只需复制项目。为此： - 在您的新工作区中：

```
go to File --> New --> Project... --> Android Project from Existing Code --> 
```

浏览您的原始项目，确保选中“**将项目复制到工作区**”框，然后单击完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T17:07:16.630

Eclipse 中的工作区可能包含也可能不包含代码。通常，实际项目会被导入工作区。因此，您可以拥有多个都指向相同代码的工作区。您可以右键单击文件并查看资源选项卡以查看文件的实际位置。

最好的方法是复制代码本身，并为其创建一个单独的工作区。

# c# - Url.Action 不适用于非标准 MVC 路由

> ID：13649726
> 
> 赞同：2
> 
> 时间：2012-11-30T17:05:24.570
> 
> 标签：c#, asp.net-mvc, c#-4.0

我无法使 @Url.Action 与具有非标准路线结构的区域一起工作。

例如，如果我在仪表板区域中注册此路线：

```
 context.MapRoute(
            "Dashboard_default",
            "Dashboard/{controller}/{action}/{id}",
            new { controller = "View", action = "Display", id = UrlParameter.Optional }
        ); 
```

然后在我的布局视图中我调用：

```
 @Url.Action("Select", "View", new { area = "Dashboard" }) 
```

我得到一个正确的网址：/Dashboard/View/Select

但是，如果我更改路线以包含可选的辅助 ID，如下所示：

```
 context.MapRoute(
            "Dashboard_default",
            "Dashboard/{controller}/{action}/{id}/{secondaryid}",
            new { controller = "View", action = "Display", id = UrlParameter.Optional, secondaryid = UrlParameter.Optional }
        ); 
```

然后对 @Url.Action(...) 的相同调用不会返回任何 url。如果我用真实值指定那些可选参数，如下所示：

```
 @Url.Action("Select", "View", new { area = "Dashboard", id = 1, secondaryid = 2 }) 
```

我确实得到了上帝的返回值：/Dashboard/View/Select/1/2

问题是，对于我在该领域的某些操作，不需要 id 或辅助 id，我希望在没有它们的情况下生成 url。如果我将它们设置为 (int?)null 它仍然不起作用。

难道我做错了什么？如果我没有在 routeValues 参数中指定它们，Url.Action(...) 不应该返回没有 id 和 secondaryid 令牌的 URL 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:47:22.827

拥有多个可选参数会对您的路线造成一些奇怪的影响。基本上，如果有一组可选参数，路由引擎不能（有麻烦）匹配一个或没有可选参数。有关更多信息，请查看[有关同一问题的这篇博文](http://blogs.msdn.com/b/simonince/archive/2011/02/02/asp-net-mvc-3-optional-parameter-routing-issue.aspx)。

由于您并不总是需要 id 或辅助 id，因此只需制作几条路线来处理这些情况。

```
context.MapRoute(
            "Dashboard_IdAndSecondaryId",
            "Dashboard/{controller}/{action}/{id}/{secondaryid}",
            new { controller = "View", action = "Display"}
        );
context.MapRoute(
            "Dashboard_default_WithSecondaryId",
            "Dashboard/{controller}/{action}/{secondaryid}",
            new { controller = "View", action = "Display"}
        );

context.MapRoute(
            "Dashboard_default",
            "Dashboard/{controller}/{action}/{id}/",
            new { controller = "View", action = "Display", id = UrlParameter.Optional}
        ); 
```

现在，当您只发送一个 Id、一个 secondaryId 或两者时，您将拥有匹配的路由。我们可以删除前两个路由中的可选参数声明，因为为了匹配该路由，您必须发送所需的参数。在不发送所需参数的情况下，您只希望匹配最后一条路由。

最后一个路由是您的默认路由，当在操作链接中仅发送 Id 或 none 时。我相信这个顺序也有效，记住你希望你的路线从最具体到最不具体，因为它们是按顺序处理的。

# ant - 在 Ant 中，如何测试属性是否以给定值结尾？

> ID：13649729
> 
> 赞同：2
> 
> 时间：2012-11-30T17:05:33.447
> 
> 标签：ant, ant-contrib

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T04:13:00.363

您可以测试 ${destdir} 是否像这样以“spring-beans”结尾（假设您有 ant-contrib，并且使用的是 Ant 1.7 或更高版本）。

```
<property name="destdir" value="something\spring-beans" />
<condition property="destDirHasBeans">
  <matches pattern=".*spring-beans$" string="${destdir}" /> 
</condition>
<if>
  <equals arg1="destDirHasBeans" arg2="true" />
  <then>
      $destdir ends with spring-beans ...
  </then>
  <else> ...
  </else>
</if> 
```

正则表达式模式`".*spring-beans$"`中的“$”是匹配字符串末尾的锚点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T17:35:36.677

作为[Matteo](https://stackoverflow.com/a/13649958/368630)，Ant-Contrib 包含很多好东西，我大量使用它。

但是，在这种情况下可以简单地使用`<basename>`任务：

```
<basename property="basedir.name" file="${destdir}"/>
<condition property="ends.with.spring-beans">
   <equals arg1="spring-beans" arg2="${basedir.name}"/>
<condition> 
```

该属性`${ends.with.spring-beans}`将包含`true`if`${destdir}`以`string-beans`和`false`其他方式结尾。您可以在任务的`if`or`unless`参数中使用它`<target>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:18:34.783

您可以使用[Ant-Contrib的](http://ant-contrib.sourceforge.net)[EndWith](http://ant-contrib.sourceforge.net/tasks/tasks/more_conditions.html)条件

```
<endswith string="${destdir}" with="spring-beans"/> 
```

例如

```
<if>
    <endswith string="${destdir}" with="spring-beans"/>
    <then>
        <!-- do something -->
    </then>
</if> 
```

**编辑**

`<endswith>`是必须安装和启用的 Ant-Contrib 包的一部分

```
<taskdef resource="net/sf/antcontrib/antlib.xml"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-28T12:29:54.817

JavaScript 的强大功能可用于 ANT 中的字符串操作：

```
<script language="javascript"> <![CDATA[

        // getting the value for property sshexec.outputproperty1
        str = project.getProperty("sshexec.outputproperty1");

        // get the tail , after the separator ":"
       str = str.substring(str.indexOf(":")+1,str.length() ).trim();

        // store the result in a new property
        project.setProperty("res",str);

    ]]> </script>
<echo message="Responce ${res}" /> 
```

# c# - 如何在xml中正确编码&？

> ID：13649731
> 
> 赞同：0
> 
> 时间：2012-11-30T17:05:34.480
> 
> 标签：c#, xml, xml-parsing

我通过网络请求一个 XML 文档。`Xdocument.Load(stream)`引发异常，因为 XML 包含，`&`因此期望.`;``&amp;`

我确实将流读取为字符串并替换`&`为`&amp;`，但这破坏了所有其他正确编码的特殊字符，例如`&oslash;`.

有没有一种简单的方法可以在解析为之前对字符串中所有不允许的字符进行编码`XDocument`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:12:21.120

在 xml 中尝试 CDATA 部分

CDATA 部分只能用在可以有文本节点的地方。

```
<foo><![CDATA[Here is some data including < , > or & etc) ]]></foo> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:13:12.263

不鼓励这种方法！！原因在于你的问题！

（将 &`&amp;`依次替换`&gt;`为`&amp;gt;`）

除了使用正则表达式之外，更好的建议是修改生成此类未编码 XML 的源代码。
我遇到了（.NET）代码，它使用“字符串连接”来生成 XML！（而应该使用 XML-DOM）
如果您有权修改源代码，那么最好继续这样做.. 因为编码这种半编码的 XML 并不能完美地保证！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:17:23.177

@espvar，

这是一个输入 XML：

```
<root><child>nospecialchars</child><specialchild>data&data</specialchild><specialchild2>You.. & I in this beautiful world</specialchild2>data&amp;</root> 
```

主要功能：

```
 string EncodedXML = encodeWithCDATA(XMLInput); //Calling our Custom function

        XmlDocument xdDoc = new XmlDocument();

        xdDoc.LoadXml(EncodedXML); //passed 
```

函数 encodeWithCDATA()：

```
 private string encodeWithCDATA(string stringXML)
    {
        if (stringXML.IndexOf('&') != -1)
        {

            int indexofClosingtag = stringXML.Substring(0, stringXML.IndexOf('&')).LastIndexOf('>');
            int indexofNextOpeningtag = stringXML.Substring(indexofClosingtag).IndexOf('<');

            string CDATAsection = string.Concat("<![CDATA[", stringXML.Substring(indexofClosingtag, indexofNextOpeningtag), "]]>");

            string encodedLeftPart = string.Concat(stringXML.Substring(0, indexofClosingtag+1), CDATAsection);
            string UncodedRightPart = stringXML.Substring(indexofClosingtag+indexofNextOpeningtag);
            return (string.Concat(encodedLeftPart, encodeWithCDATA(UncodedRightPart)));
        }
        else
        {
            return (stringXML);
        }
    } 
```

编码的 XML（即 xdDoc.OuterXml）：

```
<root>
  <child>nospecialchars</child>
  <specialchild>
    <![CDATA[>data&data]]>
  </specialchild>
  <specialchild2>
    <![CDATA[>You.. & I in this beautiful world]]>
  </specialchild2>
  <![CDATA[>data&amp;]]>
</root> 
```

我所使用的只是子字符串、IndexOf、stringConcat 和递归函数调用。如果您不理解代码的任何部分，请告诉我。

我提供的示例 XML 也拥有父节点中的数据，这是一种 HTML 属性 .. 例如：如果标签`<div>this is <b>bold</b> text</div>..` 外部有特殊字符，我的代码会负责编码数据，即 &..`<b>`

请注意，我只对“&”进行了编码，并且..数据不能包含像“<”或“>”或单引号或双引号这样的字符。

# asp.net-mvc - 页面刷新后下拉列表值返回---select---

> ID：13649739
> 
> 赞同：2
> 
> 时间：2012-11-30T17:06:13.630
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, html.dropdownlistfor, html-select

所以在我的应用程序中，用户将从下拉列表中选择一个名称，单击“查看”，相应的值将显示在页面上。

然后使用超链接按升序对列表进行排序。为此，页面会刷新并显示列表的新顺序。

下拉列表的值返回到其原始值“选择”，而不是保留所选人员的姓名。

我的模型：

```
public class HolidayList
    {
        public List<Holiday> HList4DD { get; set; }
        public List<Person> PList4DD { get; set; }

        public int currentPersonID { get; set; }
        public IEnumerable<SelectListItem> Categories { get; set; }

        public HolidayList()
        {
            HList4DD = new List<Holiday>();
            PList4DD = new List<Person>();
            }
        }
    } 
```

* * *

我的控制器：

```
 [HttpPost]
        public ViewResult Index(int HolidayDate)
        {
            var holidays = db.Holidays.Include("Person");

            HolidayList model = new HolidayList();

            model.currentPersonID = HolidayDate;
            model.PList4DD = db.People.ToList();           
            model.Categories = holidays.Select(x => new SelectListItem
                                            {
                                                Value = x.Id.ToString(),
                                                Text = x.Person.Name
                                            }
                                          );

            int data = HolidayDate;

            model.HList4DD = db.Holidays.Where(h => h.PersonId == HolidayDate).ToList();      

            return View(model);

        }

        [HttpGet]
        public ViewResult Index(string sortOrder, int? currentPersonID)
        {
            var holidays = db.Holidays.Include("Person");

            HolidayList model = new HolidayList();

            //not null
            if (currentPersonID.HasValue)
            {
                model.currentPersonID = currentPersonID.Value;

            }
            else
            {
                model.currentPersonID = 0;
            }

            model.PList4DD = db.People.ToList();

            ViewBag.NameSortParm = String.IsNullOrEmpty(sortOrder) ? "date" : "";
            var dates = from d in db.Holidays
                        where d.PersonId == currentPersonID.Value
                        select d;

            switch (sortOrder)
            {
                case "date":
                    dates = dates.OrderBy(p => p.HolidayDate);
                    break;
            }

            model.HList4DD = dates.ToList();

            return View(model);
        } 
```

* * *

我的观点

我在这里尝试了许多不同的尝试，以下代码有效，但存在下拉列表问题

```
@Html.DropDownListFor(model => model.HList4DD.First().HolidayDate,
                                new SelectList(Model.PList4DD, "Id", "Name"),
                               // Model.currentPersonID
                                "---Select---"
                                )  *@ 
```

* * *

我解决这个问题的尝试是：

```
 @Html.DropDownList("HolidayDate", Model.Categories, "---Select---")

 @Html.DropDownListFor("HolidayDate", x => x.HolidayDate, Model.Categories) 
```

* * *

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:41:06.540

您将 DropDownFor 绑定到错误的属性。基本上你想要做的是在你的模型中，创建一个新的属性来绑定下拉列表中选择的值。

```
public int SelectedDate {get;set;} 
```

然后在您的代码前面，您想使用 dropdownFor 像这样绑定属性

```
@Html.DropDownListFor(model => model.SelectedDate ,
   new SelectList(Model.PList4DD, "Id", "Name"),
   // Model.currentPersonID
   "---Select---"
) 
```

不是这个。

```
 @Html.DropDownListFor(model => model.HList4DD.First().HolidayDate ,
   new SelectList(Model.PList4DD, "Id", "Name"),
   // Model.currentPersonID
   "---Select---"
) 
```

最后，在您想要进行排序的操作中，您需要将 SelectedDate 传递给操作。然后在返回之前，将其分配给模型。整个事情会像魔术一样工作。

# c# - 实体框架反射调用表的where方法，mvc c#

> ID：13649740
> 
> 赞同：0
> 
> 时间：2012-11-30T17:06:17.470
> 
> 标签：c#, asp.net-mvc, reflection, where, invoke

尝试对表进行反射调用并调用 where 方法。在 MVC (2) 中使用，

实体框架中的数据。可以对当前试图获取数据的两个表进行硬编码。

如何调用 where 方法的麻烦。

并且很惊讶我还没有找到答案？因此，如果已经回答，并且 iv 没有搜索到正确的内容，我相信你会告诉我的。

有以下

```
string search_table

PropertyInfo prop = database.GetType().GetProperty(search_table);
object table = prop.GetValue(WRG,null);
var methods = table.GetType().GetMethods();

var where_method = table.GetType().GetMethod("Where");
var result_data = where_method.Invoke(table, new object[]{"table", "table.-FIELD-NAME.Contains(search_string)"}); 
```

如果不使用反射，那么我会用 var result_data = database.-TABEL-.Where(t => t.-FIELD.Contains(search_string)); 调用 where 方法

所以已经尝试将该信息复制到调用中，没有。

调用要求的地方：（object obj，object []参数）

谢谢有人指出我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:54:59.993

`Where`是一个[扩展方法](http://msdn.microsoft.com/en-gb/library/vstudio/bb383977.aspx)，通常定义在[`System.Linq.Queryable`](http://msdn.microsoft.com/en-us/library/system.linq.queryable.aspx)或[`System.Linq.Enumerable`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.aspx)类中，取决于对象是否实现[`IQueryable`](http://msdn.microsoft.com/en-us/library/system.linq.iqueryable.aspx)。

该`Enumerable`版本需要一个`Func<T, bool>`参数。该`Queryable`版本需要一个`Expression<Func<T, bool>>`参数。两个版本都不接受参数的字符串表示形式。如果您需要将参数作为字符串传递，则需要查看[LINQ Dynamic Query library](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)。

# javascript - JavaScript OOP 模型公式

> ID：13649742
> 
> 赞同：0
> 
> 时间：2012-11-30T17:06:33.383
> 
> 标签：javascript, oop, model-view-controller

致力于为我自己的一个项目创建一个简单的 MVC 框架。我没有使用公开的，而是决定创建一个，因为我的需求非常不寻常。

我已经为控制器和视图设置了结构，但是，我在创建模型结构时遇到了一些问题。

这就是我的模型结构：

```
model.models = function(args){

    init: function(){

        this.on_init();
    },

    on_init: args.on_init || noop,
    data: args.data || {},

}; 
```

因此，我将其称为我想要创建的所有模型的基本公式。比如我想创建员工、通知等一些模型，以此为基本蓝图，然后做一些基本的调整。

我打电话：

```
model.employees = new model.models({

    on_init: function(){
        //something specific
    },

    data: {
        //defaults
    }

}); 
```

到目前为止，我们都很好，但这**就是我遇到麻烦的地方。**现在，当我想创建最终结果模型时，我无法从对象创建新对象。它必须是一个函数。

我唯一能想到的是为第二种方法创建一个返回函数，但这本身就会带来一些问题。我已经对其他 MVC 代码进行了一些研究，但我无法理解它。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T19:03:17.563

做了很多摆弄，想出了这个：

```
var blueprint = function(args){

return {

    data: args.data,
    on_init: args.on_init,
    create: function(args){

        this.on_init();

        return {

            data: this.data,

            whatever: function(){
                console.log(args);
            }
        };
    }

};

};

var notifs = new blueprint({

on_init: function(){
    console.log('init');
},

data: {
    test: 'test'
}

});

var res = notifs.create('test');

console.log(blueprint);
console.log(notifs);
console.log(res); 
```

它带有一个可以工作的 main 函数，notifs 函数可以为每个单独的对象类型定制，然后调用 create 方法将创建 end 方法。

繁荣！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:01:34.653

这是你想要的吗 ？

```
model.models = function(args){
    var noop = function(){};

    var o = {};
    var init = args.on_init || noop;
    var data = args.data || {};

    init();
    //handle other initialization
    //o.a = xx;
    //o.b = xx;
    //o.c = data.xxx;
    //....

    return o;
} 
```

那么就可以使用新的了，而且不会出现语法错误

# php - 显示点数

> ID：13649744
> 
> 赞同：0
> 
> 时间：2012-11-30T17:06:53.787
> 
> 标签：php, wordpress

我在 Wordpress 中创建了一个名为 wp_points 的表，其中包含以下字段：

`point_ID (INT)`示例：1
`point_user_ID (INT)`示例：1
`point_accumulated (INT)`

我需要显示点数有任何ID。我有这段代码，但没有显示任何内容：

```
<?php 
global $wpdb; 

$milink = $wpdb->get_row("SELECT * FROM $wpdb->points WHERE point_user_ID = 1");
echo $milink->point_accumulated; 
?> 
```

我究竟做错了什么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:11:07.637

您需要调用该表：

```
$milink = $wpdb->get_row("SELECT * FROM `wp_points` WHERE point_user_ID = 1"); 
```

如果您想找到 point_user_id 等于特定数字的点的总和，那么您可以使用 SUM()，尽管我不知道您将积分保存在哪一列，所以在示例中我将使用`points`：

```
$milink = $wpdb->get_row("SELECT SUM(points) as points_accumulated FROM `wp_points` WHERE point_user_ID = 1");
echo $milink->points_accumulated; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T17:11:09.537

```
<?php 
global $wpdb; 

$milink = $wpdb->get_row("SELECT * FROM {$wpdb->points} WHERE point_user_ID = 1");
echo $milink->point_accumulated; 

?> 
```

# java - Jackson CSV Writer 抛出 ArrayIndexOutOfBoundsException

> ID：13649747
> 
> 赞同：1
> 
> 时间：2012-11-30T17:07:00.700
> 
> 标签：java, json, csv, jackson

我有一个奇怪的错误，有时会发生有时不会。

将以下版本的 Jackson 1.9.9 与 Jackson CSV Data Formatter 1.9.4 (jackson-dataformat-csv) 使用相同的数据，我得到以下错误。

```
java.lang.ArrayIndexOutOfBoundsException 
at java.lang.System.arraycopy(Native Method) 
at org.codehaus.jackson.util.TextBuffer.append(TextBuffer.java:458) 
at org.codehaus.jackson.io.SegmentedStringWriter.write(SegmentedStringWriter.java:69) 
at com.fasterxml.jackson.dataformat.csv.impl.CsvWriter._flushBuffer(CsvWriter.java:514) 
at com.fasterxml.jackson.dataformat.csv.impl.CsvWriter.endRow(CsvWriter.java:252) 
at com.fasterxml.jackson.dataformat.csv.CsvGenerator.finishRow(CsvGenerator.java:579) 
at com.fasterxml.jackson.dataformat.csv.CsvGenerator.close(CsvGenerator.java:277) 
at org.codehaus.jackson.map.ObjectMapper._configAndWriteValue(ObjectMapper.java:2584) 
at org.codehaus.jackson.map.ObjectMapper.writeValueAsString(ObjectMapper.java:2097) 
```

我还在某些列上得到双逗号。我的猜测是它是 CsvGenerator 中的一个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:23:37.200

这听起来像一个错误。但需要注意的一点是 1.9.x 版本并没有真正被开发出来，所以如果可能的话，你会想要使用 Jackson 2.x 的版本（最新的是 2.1.1）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T07:26:10.413

您可以通过将 pojo 的属性名称限制为小于 20 来避免 ArrayIndexOutOfBound 异常。如果您在代码中使用任何 Decimal Formatter，您可能会遇到异常。1.9.4 有问题，2.0 肯定是更好的版本

# ios - 在“无关”类中设置委托

> ID：13649749
> 
> 赞同：0
> 
> 时间：2012-11-30T17:07:14.293
> 
> 标签：ios, delegation

我无法使用协议从另一个类获取一些数据。我看不到如何在一个不与需要数据的 MVC 隔离的类中设置委托。我在 MVC 中创建协议并在包含我需要的数据的任意类中实现方法。但是如果没有对委托者 MVC 的引用，我看不到如何引用委托者 MVC 来设置委托，就像使用 segue.destinationViewController 时一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:49:17.997

像这样的东西？

```
@implementation MyViewController {
// keep a pointer to the data supplier class as long as this object exists
// so that it will continue to exist and send me delegate callbacks
SomeDataClass *myInstanceOfSomeDataClass; // instance variable to point to my data supplier
}

// ...

- (void)updateMyView {
    if (myInstanceOfSomeDataClass == NULL) // I haven't created an instance yet
        myInstanceOfSomeDataClass = [[SomeDataClass alloc] init];
    SomeType *results;
    if (instantResultsAreAvailable)
        results = [myInstanceOfSomeDataClass getResults];
    if (resultsAreOnlyAvailableFromDelegateCallback)
        myInstanceOfSomeDataClass.delegate = self;
}

- (void) delegateCallbackMethod {
//...
}
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:52:25.317

如果 MyViewController 可以创建 SomeDataClass 的实例，那么您可以在那里设置委托。如果控制器之间没有连接，那么您可以使用 NSNotification 代替。这是连接实例的一种完全匿名的方式——您发送一个通知，任何注册该通知的类都可以得到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:21:07.423

你想将数据从一个视图控制器传递到另一个类？只需通过[View Controllers 之间的 Passing Data](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)

# xml - 如何使用 PowerShell 提取 Epub 元数据 (XML)？

> ID：13649751
> 
> 赞同：2
> 
> 时间：2012-11-30T17:07:15.590
> 
> 标签：xml, powershell, epub

我对 PowerShell 并不陌生，但我对 XML 解析很感兴趣。基本上我想从 OPF 文件中提取标题、创建者和发布者信息，该文件只是一个 xml 文件。下面的书是来自 Google 的 epub v3 示例集合的 Moby Dick。

```
<?xml version="1.0" encoding="UTF-8"?>
<package xmlns="http://www.idpf.org/2007/opf" version="3.0" xml:lang="en" unique-identifier="pub-  id" prefix="cc: http://creativecommons.org/ns#">
    <metadata xmlns:dc="http://purl.org/dc/elements/1.1/">
        <dc:title id="title">Moby-Dick</dc:title>
        <meta refines="#title" property="title-type">main</meta>
        <dc:creator id="creator">Herman Melville</dc:creator>
        <meta refines="#creator" property="file-as">MELVILLE, HERMAN</meta>
        <meta refines="#creator" property="role" scheme="marc:relators">aut</meta>
        <dc:identifier id="pub-id">code.google.com.epub-samples.moby-dick-basic</dc:identifier>
        <dc:language>en-US</dc:language>
        <meta property="dcterms:modified">2012-01-18T12:47:00Z</meta>
        <dc:publisher>Harper &amp; Brothers, Publishers</dc:publisher>
        <dc:contributor id="contrib1">Dave Cramer</dc:contributor>
        <meta refines="#contrib1" property="role" scheme="marc:relators">mrk</meta>
        <dc:rights>This work is shared with the public using the Attribution-ShareAlike 3.0 Unported (CC BY-SA 3.0) license.</dc:rights>        
        <link rel="cc:license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
        <meta property="cc:attributionURL">http://code.google.com/p/epub-samples/</meta>
    </metadata>
</package> 
```

我试过了：

```
[xml]$opf = gc path/to/package.opf
$opf.package.metdata 
```

我只能用这个而不是文本来获取标签和属性信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:23:54.287

您需要像这样使用 #text 属性来获取一些值：

```
[xml] $opf = gc .\moby.opf

$title = $opf.package.metadata.title.'#text'
$creator = $opf.package.metadata.creator.'#text'
$publisher = $opf.package.metadata.publisher

Write-Host "$title written by $creator and published by $publisher" 
```

# entity-framework - Entity Framework 5 使用两个 POCO 之间的多重关系

> ID：13649756
> 
> 赞同：1
> 
> 时间：2012-11-30T17:07:49.240
> 
> 标签：entity-framework, code-first, poco, entity-framework-5

我在两个 POCO 对象上应用多个关系（或可能是外键）时遇到问题。我有第一个关系多对多工作，当创建数据库时，它会创建关系所需的三个表（项目、用户和项目用户）。

到目前为止的代码：

```
public class Project
{
    public int ProjectId { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public DateTime? StartDate { get; set; }
    public DateTime? CompletionDate { get; set; }
    public bool Deleted { get; set; }

    public ICollection<User> Users { get; set; }
}

public class User
{
    public User()
    {
        Name = new Name();
    }

    public int UserId { get; set; }
    public string LoginId { get; set; }
    public string Password { get; set; }
    public Name Name { get; set; }

    public ICollection<Project> ManagedProjects { get; set; }
}

public class ProjectConfiguration : EntityTypeConfiguration<Project>
{
    public ProjectConfiguration()
    {
        HasMany(x => x.Users)
            .WithMany(x => x.ManagedProjects);
    }
}

public UserConfiguration()
{
    HasMany(x => x.ManagedProjects)
        .WithMany(x => x.Users);
} 
```

现在我想添加一个可选的 Project.ManagingUser -> User 的一对一关系。但是，我似乎无法弄清楚如何在配置中指出这一点。

我认为需要的代码：

```
public class Project
{
    public int ProjectId { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public DateTime? StartDate { get; set; }
    public DateTime? CompletionDate { get; set; }
    public bool Deleted { get; set; }

    public int? ManagingUserId { get; set; }
    public User ManagingUser { get; set; }

    public ICollection<User> Users { get; set; }
} 
```

我不认为用户对象需要改变。

这显示了我对映射新关系的最后一次尝试：

```
public ProjectConfiguration()
{
    HasMany(p => p.Users)
        .WithMany(u => u.Projects);

    this.HasOptional(p => p.ManagingUser)
        .WithOptionalDependent()
        .Map(m=>m.MapKey("ManagingUserId"))
        .WillCascadeOnDelete(false);
} 
```

创建数据库时发生了什么，我现在只有两个表（项目和用户）。看起来它只是试图建立一对一的关系。

有人可以告诉我我错过了什么吗？

Richard 我没有更改 UserConfiguration，下面是 DbContext：

```
public class MyDbContext : DbContext
{
    public MyDbContext() : base(Properties.Settings.Default.ConnectionString)
    {
    }

    public DbSet<User> Users { get; set; }
    public DbSet<Project> Projects { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:23:28.627

您可能想要`WithMany`而不是`WithOptionalDependent`- 这是一对多的关系，而不是一对一的关系。

```
HasOptional(p => p.ManagingUser)
   .WithMany()
   .HasForeignKey(m => m.ManagingUserId)
   .WillCascadeOnDelete(false); 
```

**编辑**
我认为你错过`OnModelCreating`了课堂上的覆盖`DbContext`：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
   base.OnModelCreating(modelBuilder);
   modelBuilder.Configurations.Add(new ProjectConfiguration());
   modelBuilder.Configurations.Add(new UserConfiguration());
} 
```

# jsf-2 - 如何从链接/非面孔请求调用 JSF 支持 bean 方法

> ID：13649757
> 
> 赞同：3
> 
> 时间：2012-11-30T17:07:57.080
> 
> 标签：jsf-2

用例是直接从超链接（非面孔请求）调用 JSF 2.x 支持 Bean 上的方法。做这个的最好方式是什么？

我想做这样的事情：

链接：

```
http://localhost/show.xhtml?id=30&backingbeanname=loaddata&method=load 
```

支持豆：

```
@Named (value = "loaddata")
public class DataLoader {

     public void load(int id){ ... }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T17:45:18.667

[`<f:viewParam>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/viewParam.html)在目标视图中用于将 GET 参数设置为 bean 属性并用于调用[`<f:event type="preRenderView">`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/event.html)对它们的操作。

在`show.xhtml`：

```
<f:metadata>
    <f:viewParam name="id" value="#{bean.id}" required="true" />
    <f:event type="preRenderView" listener="#{bean.load}" />
</f:metadata>
<h:message for="id" /> 
```

在托管 bean 中：

```
private Integer id;
private Data data;

public void load() {
    data = service.find(id);
} 
```

请注意，在上面的示例中，URL`http://localhost/show.xhtml?id=30`就足够了。您始终可以将更多参数设置为 bean 属性，并拥有一个代表所有内容的“上帝”bean，但这毕竟可能很笨拙。

另请注意，您可以将 a 附加[`Converter`](http://docs.oracle.com/javaee/6/api/javax/faces/convert/Converter.html)到`<f:viewParam>`（就像您在 中所做的那样`<h:inputText>`）。这种`load()`方法很可能完全是多余的。

```
<f:metadata>
    <f:viewParam name="id" value="#{bean.data}" 
        converter="dataConverter" converterMessage="Bad request. Unknown data."
        required="true" requiredMessage="Bad request. Please use a link from within the system." />
</f:metadata>
<h:message for="id" /> 
```

### 也可以看看：

*   [JSF 2 中的通信 - 处理 GET 请求参数](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)
*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for/6377957#6377957)

# c# - 需要 DataGridView C# 帮助

> ID：13649762
> 
> 赞同：0
> 
> 时间：2012-11-30T17:08:28.090
> 
> 标签：c#, datagridview, oledb, cell

所以我有一个 DGV 通过 OleDB 连接到我的 Visual C#，其中包含我的信息，我需要在单击单元格时从单元格中获取文本。我知道我不能从 DGV 中获取它，我需要从 de OleDB DataSet 中获取它。但是我如何告诉程序我需要从哪个 DGV 单元中获取文本？DataSet Codeline 会是怎样的呢？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:33:59.843

试试这个来获取单元格值，

```
private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
{
    if (dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value != null)
    {
       MessageBox.Show(dataGridView1.Rows[e.RowIndex].Cells[e.ColumnIndex].Value.ToString());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:53:31.410

我会考虑使用以下事件处理程序。每次编辑 DataGridView 时它都会触发，因此如果您单击任何单元格，它将触发。下面是从当前选定单元格中获取数据的基本示例。玩一玩吧。

```
 private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
        {
           var result =  dataGridView1.CurrentCell.Value;
        } 
```

希望这可以帮助。

# visual-studio-2010 - 在 Windows 8 Pro 上编程 win32

> ID：13649767
> 
> 赞同：0
> 
> 时间：2012-11-30T17:08:37.713
> 
> 标签：visual-studio-2010, windows-8

如果我安装 Visual C++ 2010 而不是 Visual c++ 2012，我能否在 Windows 8 Pro 上仅针对 win32 c++ 应用程序进行编程？我是否需要对项目进行任何更改才能像在 Vista 上一样编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:14:42.477

是的你可以。无需更改编译过程。

# php - 处理 SOAP 响应

> ID：13649770
> 
> 赞同：5
> 
> 时间：2012-11-30T17:08:47.350
> 
> 标签：php, soap

我正在尝试处理来自 First Data 的全球网关的 SOAP 响应。我以前使用过 SoapClient，但没有 wsdl——而且公司说他们不提供。

我已经尝试了各种其他方法，例如 SimpleXMLElement 基于此处和 PHP 手册中的示例，但我无法工作。我怀疑命名空间是我的问题的一部分。任何人都可以提出一种方法或指出一个类似的例子 - 我的谷歌努力迄今为止没有结果。

使用 PHP 5。

部分 SOAP 响应（去除了它之前的所有 HTML 标头内容）如下所示：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">

<SOAP-ENV:Header/>

<SOAP-ENV:Body>

<fdggwsapi:FDGGWSApiOrderResponse xmlns:fdggwsapi="http://secure.linkpt.net/fdggwsapi/schemas_us/fdggwsapi">

<fdggwsapi:CommercialServiceProvider/>

<fdggwsapi:TransactionTime>Thu Nov 29 17:03:18 2012</fdggwsapi:TransactionTime>

<fdggwsapi:TransactionID/>

<fdggwsapi:ProcessorReferenceNumber/>

<fdggwsapi:ProcessorResponseMessage/>

<fdggwsapi:ErrorMessage>SGS-005005: Duplicate transaction.</fdggwsapi:ErrorMessage>

<fdggwsapi:OrderId>A-e833606a-5197-45d6-b990-81e52df41274</fdggwsapi:OrderId>
...

<snip> 
```

我还需要能够确定是否发出 SOAP 错误信号。XML 看起来像这样：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Header/>
<SOAP-ENV:Body>
<SOAP-ENV:FaultX>
<faultcode>SOAP-ENV:Client</faultcode>
<faultstring xml:lang="en">MerchantException</faultstring>
<detail>
cvc-pattern-valid: Value '9999185.00' is not facet-valid with respect to pattern '([1-9]([0-9]{0,3}))?[0-9](\.[0-9]{1,2})?' for type '#AnonType_ChargeTotalAmount'.
cvc-type.3.1.3: The value '9999185.00' of element 'v1:ChargeTotal' is not valid.
</detail>
</SOAP-ENV:FaultX>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

使用代码先生的回答，我已经能够从非故障响应中检索数据。但我需要确定我正在处理的数据包类型并从这两种类型中提取数据。如果他们只提供一个wsdl，那就容易多了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T17:46:02.210

您可以使用 SimpleXML 解析您的响应，这是一个示例。请注意，我将命名空间 URL 传递给以`children()`访问元素。

```
$obj = simplexml_load_string($xml);

$response = $obj->children('http://schemas.xmlsoap.org/soap/envelope/')->Body->children('http://secure.linkpt.net/fdggwsapi/schemas_us/fdggwsapi')->FDGGWSApiOrderResponse;

echo $response->TransactionTime . "\n";
echo $response->ErrorMessage; 
```

**输出**

> 2012 年 11 月 29 日星期四 17:03:18
> SGS-005005：重复交易。

**[键盘演示](http://codepad.org/cxFViIPF)**

编辑：SoapFault 响应可以解析如下。它输出故障字符串和详细信息，或“未找到故障”：

```
if($obj->children('http://schemas.xmlsoap.org/soap/envelope/')->Body->children('http://schemas.xmlsoap.org/soap/envelope/') && isset($obj->children('http://schemas.xmlsoap.org/soap/envelope/')->Body->children('http://schemas.xmlsoap.org/soap/envelope/')->children()->faultcode))
{
    $fault = $obj->children('http://schemas.xmlsoap.org/soap/envelope/')->Body->children('http://schemas.xmlsoap.org/soap/envelope/')->children();

    // soap fault
    echo $fault->faultstring;
    echo $fault->detail;
}
else
{
    echo 'No fault found, do normal parsing...';
} 
```

# java - SWT - 将我的所有图像存储在一个位置的图像资源

> ID：13649771
> 
> 赞同：0
> 
> 时间：2012-11-30T17:08:51.677
> 
> 标签：java, image, swt, imageicon

我的 src 目录中有一个名为 images 的包。我在我的项目中使用了很多图像。我在我唯一的 Swing 类中使用一种方法来获取图标。

```
 public Icon getIcon(String name) {
    Icon icon = null;
    URL url = null;
    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
    try {
       url = classLoader.getResource(name);
       icon = new ImageIcon(url);
    } 
    catch (Exception e) {
       System.out.println("Couldn't find " + getClass().getName() + "/" + name);
       e.printStackTrace();
    }
 return icon;
} 
```

获取图标

```
getIcon("/images/pdfClose.png"); 
```

这对图标很有用，但在我的 SWT 类中，我使用图像。

SWT 中有没有办法复制 getIcon() 方法正在做的事情？是否可以重写获取图像的方法？

```
public ImageIcon getImage(String name) {
   ImageIcon image = null;
   URL url = null;
   ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
   try {
     url = classLoader.getResource(name);
     image = new ImageIcon(url);
   } 
   catch (Exception e) {
      System.out.println("Couldn't find " + getClass().getName() + "/" + name);
      e.printStackTrace();
   }
 return image;
} 
```

我知道它会抛出错误 **This instance method cannot override the static method from Dialog**

但是有解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:39:14.137

我真的不明白，你在哪里挣扎。这是我加载图像的方法：

```
public static Image loadImage(String path, boolean inJar)
{
    Image newImage = null;

    try
    {
        if(inJar)
        {
            newImage = new Image(null, YOUR_MAIN_CLASS.class.getClassLoader().getResourceAsStream(path));
        }
        else
        {
            newImage = new Image(null, path);
        }
    }
    catch(SWTException ex)
    {
        System.out.println("Couldn't find " + path);
        e.printStackTrace();
    }

    return newImage;
} 
```

请注意，我不会将图像保存在该`src`文件夹中，因为该文件夹用于存放源文件。我`img`在项目的根目录中有一个文件夹，并通过以下方式访问图像：

```
Image image = Images.loadImage("img/myImage.png", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:50:47.330

Windows builder 中有一个 Utils 类，您可能希望查看它以将资源保存在一个地方并确保您处理它们。

[http://dev.eclipse.org/svnroot/tools/org.eclipse.windowbuilder/trunk/org.eclipse.wb.rcp/resources/1.4/org/eclipse/wb/swt/SWTResourceManager.java](http://dev.eclipse.org/svnroot/tools/org.eclipse.windowbuilder/trunk/org.eclipse.wb.rcp/resources/1.4/org/eclipse/wb/swt/SWTResourceManager.java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-10T23:37:53.130

从图像文件的 URL 获取 SWT 图像我们不需要首先获取 ImageIcon，下面的示例代码我们可以从 URL 中获取 SWT 图像，

```
Image imgSWT=null;  // Image class is the SWT Image class
ImageDescriptor imgDesc=null;
java.net.URL imgURL = YourClassName.class.getResource("path/image_filename");

if (imgURL != null) {
    imgDesc = ImageDescriptor.createFromURL(imgURL);
    imgSWT = imgDesc.createImage();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-12T06:54:10.187

在您的项目下创建一个名为“res”的新文件夹。将所有图像放在此文件夹下。

```
File file = new File("res/yourImage.Extension");
Image image = new Image(Display.getDefault(), file.getPath()); 
```

# html - 标题为动态时，中间 div 内容不会溢出

> ID：13649779
> 
> 赞同：1
> 
> 时间：2012-11-30T17:09:20.583
> 
> 标签：html, css

我有 3 个垂直对齐的 div（页眉、内容、页脚）

```
<div id="container">
   <div id="header"> </div>
   <div id="content"> </div>
   <div id="footer"> </div>
</div> 
```

像这样：

![在此处输入图像描述](../Images/279b4b06346b52a34f0c3ee9ed2adf75.png)

就像在这个例子中一样：http: [//jsfiddle.net/jS6pa/2/](http://jsfiddle.net/jS6pa/2/)

（此处的示例：http: [//peterned.home.xs4all.nl/examples/csslayout1.html](http://peterned.home.xs4all.nl/examples/csslayout1.html)）

正如您在 jsfiddle 示例中所见，我无法完成所有要求。当我调整窗口大小时，页脚 div 不会折叠内容。如果我做了一些 tweeks 我可以实现这一点，但是溢出：滚动不工作并且滚动条不显示

这是我尝试解决此问题的另一种方法（没有成功：S）：http: [//jsfiddle.net/rv4XS/31/](http://jsfiddle.net/rv4XS/31/)

我不知道一种或另一种方法是解决这个问题的最佳方法。只需检查第一个或第二个 jsfiddle 看看哪个是最好的

如何在标题具有动态内容的情况下实现全高内容，同时在内容溢出时显示滚动条？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:17:13.183

好的，我终于使用javascript实现了这一点。

这个想法很简单。无论如何，必须设置标题的高度。

为此我不知道为什么（可能是因为在 ajax 中调用了这个 div）但是 jquery .height() 方法对我不起作用，但使用 clientHeight 方法对我很有效。

```
var header = document.getElementById('headerDiv');

if(header)
{
    $('contentDiv').css('top', header.clientHeight);
} 
```

# actionscript-3 - AS3 TweenLITE 是否有最小 tweenTime 限制？

> ID：13649783
> 
> 赞同：0
> 
> 时间：2012-11-30T17:09:28.120
> 
> 标签：actionscript-3, flash, actionscript, gsap

我正在制作的游戏中使用 tweenLite

问题是它似乎有一个最低速度，是这样吗？

我得到它的最快速度是 0.01 秒，如果我将时间设置得更低，它只会以与 0.01 相同的速度显示补间

我尝试了非常低的值并且没有运气（例如 0.0000001）

帮助？

最好的，

阿尔瓦罗

* * *

我现在看到了，限制是帧率，tween lite 不能比 FPS 快，我将帧率设置得更高，tween 跑得更快。

想解释一下为什么这么短的补间，事情是这样的。

我正在制作一个小游戏，并且正在对角色行走循环进行编程。

我的角色由身体部位，腿手臂脚等组成，

所以我的walk函数有4个阶段（Rleg.rotation = 22，Rleg.rotation = 0，Rleg.rotation = -22，Rleg.rotation=0）

但是这 4 个阶段中的每一个都被分为 10 个补间，你可能会问为什么？？？？？？

好吧，根据角色面向的位置，腿部旋转可以是：

1）当角色走到一边时的正常旋转，
2）当角色走向相机时进行 scaleY 变换，例如 scaleY 中从 -45 度到 45 度的补间将是 scaleY = 的补间。 5 到 scaleY = .5 它不会做任何事情！！！，这就是为什么我将阶段划分为 10 个补间。这样做 scaleY 会像这样： .5 - .6 - .7 - .8 - .9 - 1 - .9 -.8 -.7 -.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:20:57.213

.01 = 1/100 秒。你的帧率是多少？在大多数情况下，说 1/30 秒。所以在这种情况下，如果显示器不能显示差异，即使有补间也是无关紧要的。由于补间应该跨越超过一帧 - 在 1/100 秒甚至 1/30 秒内不能有迭代或步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:13:24.647

只要它是非负数，任何值都应该有效。值如此之低，我很惊讶你真的能分辨出过去 0.001 时间的巨大差异。有关更多证据，请参见此处：

[http://forums.greensock.com/topic/1630-minimum-time-solved/](http://forums.greensock.com/topic/1630-minimum-time-solved/)

# sql-server-2008 - SQL Server 比较 AM 和 PM

> ID：13649785
> 
> 赞同：0
> 
> 时间：2012-11-30T17:09:35.840
> 
> 标签：sql-server-2008

我正在尝试比较`datetime`

表格1

```
ID  door    datetime
1   door1   2011-12-12 23:02
2   door1   2011-11-11 20:52 
3   door2   2011-12-13 19:17 
```

表2

```
ID  door    datetime
1   door2   2011-12-12 02:02
2   door3   2011-11-11 01:52 
3   door4   2011-12-13 20:17 
4   door2   2012-12-09 11:10
5   door2   2012-12-11 23:54 
```

我想通过比较和来更新/覆盖`table2`的行`table1``id``datetime`

最终结果

表2

```
ID  door    datetime
1   door1   2011-12-12 23:02
2   door1   2011-11-11 20:52 
3   door2   2011-12-13 19:17 
4   door2   2012-12-09 11:10
5   door2   2012-12-11 23:54 
```

在此先感谢您的帮助

# android - 尝试为 ActionBar 上的选项卡着色

> ID：13649786
> 
> 赞同：0
> 
> 时间：2012-11-30T17:09:39.897
> 
> 标签：android, android-actionbar

我正在向我正在编写的测试应用程序添加一个操作栏，并且我在整个 stackoverflow 中都看到了关于此的问题，但对我没有任何帮助。根据本指南：

[http://android-developers.blogspot.com/2011/04/customizing-action-bar.html](http://android-developers.blogspot.com/2011/04/customizing-action-bar.html)

我正在尝试更改我在操作栏上使用的选项卡的选择颜色。默认为淡蓝色。就像我做的测试一样：

```
<style name="CustomTab" parent="android:style/Widget.Holo.Light.ActionBar.TabView">
    <item name="android:background">#000000</item>
</style> 
```

这给了我一个完全纯黑色的标签，而不是选择器部分。有人可以帮助更好地指导我吗？我似乎无法在任何地方找到一个好的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:17:26.610

首先，您必须定义一个选择器 xml 文件，然后在此处编写此代码并用此替换您的代码

```
item name="android:background">@drawable/yourfilename</item> 
```

和选择器 xml

```
<?xml version="1.0" encoding="utf-8"?>
<selector
    xmlns:android="http://schemas.android.com/apk/res/android"
>
    <item
        android:state_pressed="true"
        android:drawable="@drawable/picture_selected" />
    <item
        android:state_focused="true"
        android:drawable="@drawable/picture_selected" />
    <item
        android:drawable="@drawable/picture_unselected" />
</selector> 
```

# c++ - 模板模板功能及参数推导

> ID：13649789
> 
> 赞同：5
> 
> 时间：2012-11-30T17:09:43.437
> 
> 标签：c++, templates, c++11, rvalue-reference, template-templates

我遇到了模板模板和参数推导的问题。这是代码：

```
template<typename U, template<typename> class T>
void test(T<U>&& t)
{
  ...
} 
```

我希望这可以接受左值和右值，但仅适用于右值。折叠规则“T& && = T&”不适用于这种情况？

当然，我也可以声明左值引用函数，但会降低代码的可读性。

如果你问我为什么需要这个是使用 static_assert 来检查*T*是否是一个特定的类。如果有更简单的方法，我很乐意更改我的代码，但我想知道模板模板是否可以以这种方式使用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:13:19.450

可以推断为引用类型的不同`typename T`，`template<typename> class T`只能推断为类模板，因此`T<U>`始终推断为对象类型。

您可以编写模板化的函数，`T`然后将模板类型解压缩到`static_assert`：

```
template<typename T> struct is_particular_class: std::false_type {};
template<typename U> struct is_particular_class<ParticularClass<U>>: std::true_type {};

template<typename T> void test(T &&) {
  static_assert(is_particular_class<std::remove_reference<T>::type>::value, "!");
} 
```

# winforms - 防止 Web 浏览器控件 WinForms 中的脚本错误

> ID：13649791
> 
> 赞同：2
> 
> 时间：2012-11-30T17:10:00.677
> 
> 标签：winforms, internet-explorer

我编写了一个 WinForms 应用程序来打开一个 webbrowser 控件，我们使用它来填写一个表单，以编程方式从数据库提交培训课程事件（它并不完美，但它节省了很多时间 - 不，有关公司不支持 XML 提要）。但是，系统刚刚开始生成脚本错误，这会阻止它工作。

我试过设置：

```
WebBrowser1.ScriptErrorsSuppressed = True 
```

但这只是部分成功。好消息是我没有收到任何脚本错误，但坏消息是我无法登录该站点。

有没有人有任何建议？据我所知，webbrowser 控件使用 IE，所以我不能让它使用另一个浏览器。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T17:30:00.587

根据文档[http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.scripterrorssuppressed.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.scripterrorssuppressed.aspx)如果您抑制错误，您也会抑制对话框。这意味着用于登录的警报框/身份验证也将被禁止。

以下是文档中指出的内容：

> **当 ScriptErrorsSuppressed 设置为 true 时，WebBrowser 控件隐藏其所有源自基础 ActiveX 控件的对话框，而不仅仅是脚本错误。**有时您可能需要在显示对话框（例如用于浏览器安全设置和用户登录的对话框）时抑制脚本错误。在这种情况下，将 ScriptErrorsSuppressed 设置为 false 并在 HtmlWindow.Error 事件的处理程序中禁止脚本错误。

如文档所述，您可以处理 HtmlWindow.Error 事件以允许对话框，但仅抑制脚本错误。（虽然，我一直有这个实际工作正常的问题。）

# apache - 看起来我可以在 mod_proxy 和 mod_cluster 中做更多的事情？

> ID：13649792
> 
> 赞同：0
> 
> 时间：2012-11-30T17:10:02.380
> 
> 标签：apache, tomcat, mod-proxy

看起来我可以在 mod_proxy 和 mod_cluster 中做更多的事情？

附件是它们的屏幕截图，但如果您使用 mod_proxy，我可以从管理员那里更改负载因子、LB 集、路由等，而我在 mod_cluster 中看不到这一点。这是真的？

mod_proxy 屏幕： ![在此处输入图像描述](../Images/a9b47484d713876d6aade1f5afe1d8b5.png)

mod_cluster 屏幕：

![在此处输入图像描述](../Images/c49b7028faf4a99ed0bca130a32c421f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:08:13.590

这是 Scientific Linux 6.2 版的一个问题，我必须通过执行以下命令告诉它停止阻塞端口

设置强制 0

然后就可以了。我现在开始工作了

# c# - 绑定实例已关联到监听 URI 错误

> ID：13649793
> 
> 赞同：0
> 
> 时间：2012-11-30T17:10:11.443
> 
> 标签：c#, wcf, file-upload

我有一个运行良好的 WCF 服务，我最近尝试添加代码以包含上传文件片段，从那时起我一直收到以下错误：绑定实例已关联到侦听 URI 'http://xxx /DSLDService/DSLDService.svc'。如果两个端点想要共享同一个 ListenUri，它们也必须共享同一个绑定对象实例。两个冲突的端点要么在 AddServiceEndpoint() 调用中指定，要么在配置文件中指定，要么在 AddServiceEndpoint() 和 config 的组合中指定。

我不确定出了什么问题，如果我从我的配置文件中删除了我为服务的 FileUpload 部分包含的条目，那么该站点可以工作，但上传的部分不会。以下是我的服务和客户端配置，有人可以查看它们并让我知道他们是否看到了什么：

客户端 Web.config：

```
 <system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IRequestType" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="20000000"
      maxReceivedMessageSize="20000000" useDefaultWebProxy="true" />
    <binding name="BasicHttpBinding_IRecipientType" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="20000000"
      maxReceivedMessageSize="20000000" useDefaultWebProxy="true" />
    <binding name="BasicHttpBinding_ICase" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="20000000"
      maxReceivedMessageSize="20000000" useDefaultWebProxy="true" />
    <binding name="BasicHttpBinding_IHoliday" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="20000000"
      maxReceivedMessageSize="20000000" useDefaultWebProxy="true" />
    <binding name="BasicHttpBinding_IManagerType" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="20000000"
      maxReceivedMessageSize="20000000" useDefaultWebProxy="true" />
    <binding name="BasicHttpBinding_IDonor" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="20000000"
      maxReceivedMessageSize="20000000" useDefaultWebProxy="true" />
    <binding name="BasicHttpBinding_IUser" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="20000000"
      maxReceivedMessageSize="20000000" useDefaultWebProxy="true" />
    <binding name="BasicHttpBinding_ICaseStatus" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="20000000"
      maxReceivedMessageSize="20000000" useDefaultWebProxy="true" />
    <binding name="BasicHttpBinding_ICaseDonor" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="20000000"
      maxReceivedMessageSize="20000000" useDefaultWebProxy="true" />
    <binding name="BasicHttpBinding_IAbsence" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="20000000"
      maxReceivedMessageSize="20000000" useDefaultWebProxy="true" />
    <binding name="BasicHttpBinding_IAgency" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      allowCookies="false" bypassProxyOnLocal="false" maxBufferPoolSize="20000000"
      maxReceivedMessageSize="20000000" useDefaultWebProxy="true" />
    <binding name="BasicHttpBinding_IDocument" closeTimeout="04:01:00"
      openTimeout="04:01:00" receiveTimeout="04:01:00" sendTimeout="04:01:00"
      maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
      transferMode="Streamed">
      <readerQuotas maxDepth="128" maxStringContentLength="2147483647"
      maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
    </binding>
  </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://xxx/DSLDService/DSLDService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IRequestType"
    contract="DSLDServiceReference.IRequestType" name="" />
  <endpoint address="http://xxx/DSLDService/DSLDService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IRecipientType"
    contract="DSLDServiceReference.IRecipientType" name="" />
  <endpoint address="http://xxx/DSLDService/DSLDService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICase"
    contract="DSLDServiceReference.ICase" name="" />
  <endpoint address="http://xxx/DSLDService/DSLDService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IHoliday"
    contract="DSLDServiceReference.IHoliday" name="" />
  <endpoint address="http://xxx/DSLDService/DSLDService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IManagerType"
    contract="DSLDServiceReference.IManagerType" name="" />
  <endpoint address="http://xxx/DSLDService/DSLDService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IDonor"
    contract="DSLDServiceReference.IDonor" name="" />
  <endpoint address="http://xxx/DSLDService/DSLDService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IUser"
    contract="DSLDServiceReference.IUser" name="" />
  <endpoint address="http://xxx/DSLDService/DSLDService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICaseStatus"
    contract="DSLDServiceReference.ICaseStatus" name="" />
  <endpoint address="http://xxx/DSLDService/DSLDService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICaseDonor"
    contract="DSLDServiceReference.ICaseDonor" name="" />
  <endpoint address="http://xxx/DSLDService/DSLDService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IAbsence"
    contract="DSLDServiceReference.IAbsence" name="" />
  <endpoint address="http://xxx/DSLDService/DSLDService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IAgency"
    contract="DSLDServiceReference.IAgency" name="" />
  <endpoint address="http://xxx/DSLDService/DSLDService.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IDocument"
    contract="DSLDServiceReference.IDocument" name="" />
</client> 
```

wcf 服务 web.config 看起来像：

```
<bindings>
  <basicHttpBinding>
    <!-- set to 2GB files (Maximum allowed per MSDN Documentation) -->
    <binding name="TransferService"
    maxReceivedMessageSize="2147483647"
    maxBufferSize="2147483647" transferMode="Streamed">
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
      maxArrayLength="2147483647" maxBytesPerRead="2147483647"
      maxNameTableCharCount="2147483647" />
    </binding>
  </basicHttpBinding>      
</bindings>
<services>
  <service name="DSLDService.DSLDService">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration=""
      contract="DSLDService.IRequestType" />
    <endpoint binding="basicHttpBinding" bindingConfiguration=""
      contract="DSLDService.IRecipientType" />
    <endpoint binding="basicHttpBinding" bindingConfiguration=""
      contract="DSLDService.ICase" />
    <endpoint binding="basicHttpBinding" bindingConfiguration=""
      contract="DSLDService.IHoliday" />
    <endpoint binding="basicHttpBinding" bindingConfiguration=""
      contract="DSLDService.IManagerType" />
    <endpoint binding="basicHttpBinding" bindingConfiguration=""
      contract="DSLDService.IDonor" />
    <endpoint binding="basicHttpBinding" bindingConfiguration=""
      contract="DSLDService.IUser" />
    <endpoint binding="basicHttpBinding" bindingConfiguration=""
      contract="DSLDService.ICaseStatus" />
    <endpoint binding="basicHttpBinding" bindingConfiguration=""
      contract="DSLDService.ICaseDonor" />
    <endpoint binding="basicHttpBinding" bindingConfiguration=""
      contract="DSLDService.IAbsence" />
    <endpoint binding="basicHttpBinding" bindingConfiguration=""
      contract="DSLDService.IAgency" />
    <endpoint binding="basicHttpBinding" bindingConfiguration="TransferService" 
      contract="DSLDService.IDocument" />
  </service>
</services> 
```

问题似乎与 IDocument 类条目有关，其他工作正常。所有都是 BasicHTTPBinding 所以我想我可以把它们留在同一个服务中，不知道为什么它告诉我一个绑定已经关联。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:47:28.650

为什么需要所有这些端点和绑定。我认为应该有 1 个端点和 1 个绑定。我以前从未见过这种配置。

# reverse-proxy - 多个reqirep haproxy

> ID：13649798
> 
> 赞同：2
> 
> 时间：2012-11-30T17:10:25.873
> 
> 标签：reverse-proxy, haproxy

我安装了 haproxy 1.4，我需要在 haproxy.conf 中配置一个反向代理，将 URL 从 重写`www.somedomain.com`为`www.otherdomain.com/bla/ble`。我正在编写的配置在这里：

```
acl                     cpol_acl hdr_dom(host) -i www.somedomain.com
use_backend             cpol_srv if cpol_acl

backend cpol_srv
    balance                 leastconn
    mode                    http
    option                  httplog
    stick                   on src
    stick-table             type ip size 10240k expire 60m
    reqirep                 ^([^\ :]*)\ /(.*)       \1\ /bla/ble\2
    reqirep                 ^Host:\ www.somedomain.com Host:\ www.otherdomain.com
    server                  cpol_srv www.otherdomain.com check port 80 
```

这是可行的，但浏览器中的 URL 会重写`www.otherdomain.com/bla/ble`，这不是我想要的。如果我删除线

```
reqirep                 ^([^\ :]*)\ /(.*)       \1\ /bla/ble\2 
```

我只能转发到主机`www.otherdomain.com`，但浏览器中的 URL 保留为`www.somedomain.com`.

有没有办法在不重写浏览器 URL 的情况下进行这种类型的反向代理？

PS：我会做这种 Apache 风格（可行），但机器没有任何 NAT 到外面的世界，只能与 haproxy 通信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T09:12:59.693

好吧，过了一会儿，我想出了必须做的事情。

仅更改请求是不够的，还必须将响应更改回原始请求主机。它还制作了一个 acl 以防止目录 url 部分“/bla/ble”的重复。坚持上面的例子，应该这样做：

```
 acl                     cpol_acl hdr_dom(host) -i www.somedomain.com
    use_backend             cpol_srv if cpol_acl

backend cpol_srv
    balance                 leastconn
    mode                    http
    option                  httplog
    stick                   on src
    stick-table             type ip size 10240k expire 60m
    **acl                     no_redir url_beg   /bla/ble/**

    reqirep                 ^Host:\ www.somedomain.com Host:\ www.otherdomain.com
    reqirep                 ^([^\ :]*)\ /(.*)       \1\ /bla/ble\2   **if !no_redir**

    **rspirep                 ^([^\ :]*)\ (.*)www.otherdomain.com/bla/ble/(.*)    \1\ \2www.somedomain.com/\3**

    server                  cpol_srv www.otherdomain.com check port 80 
```

# java - 使用新的标题窗格扩展 Accordion

> ID：13649800
> 
> 赞同：1
> 
> 时间：2012-11-30T17:10:28.740
> 
> 标签：java, accordion, javafx-2

我想用新的 TitledPane 集合重新填充 Accordion，但我发现在 Accordion 中扩展节点时出现问题。

我猜这是JavaFX库的问题。因为它也发生[在 Oracle 的 Accordion 和 TitledPane 手册中提供的示例中](http://docs.oracle.com/javafx/2/ui_controls/accordion-titledpane.htm#)。我采用原始示例 22-5，并将其更改为：

```
public void start(Stage stage) {
    stage.setTitle("TitledPane");
    Scene scene = new Scene(new Group(), 800, 250);
    scene.setFill(Color.GHOSTWHITE);

    final Label label = new Label("Initial");

    // --- Accordion
    final Accordion accordion = new Accordion ();                
    for (int i = 0; i < imageNames.length; i++) {
        images[i] = new 
            Image(getClass().getResourceAsStream(imageNames[i] + ".jpg"));
        pics[i] = new ImageView(images[i]);
        tps[i] = new TitledPane(imageNames[i],pics[i]); 
    }   
    accordion.getPanes().addAll(tps);        
    accordion.expandedPaneProperty().addListener(new 
        ChangeListener<TitledPane>() {
            public void changed(ObservableValue<? extends TitledPane> ov,
                TitledPane old_val, TitledPane new_val) {
                    if (new_val != null) {
                        label.setText("expanded: " +accordion.getExpandedPane().getText());
                    }
          }
    });

    HBox hbox = new HBox(10);
    Button buttonClear = new Button("Clear and refill");
    buttonClear.setOnAction(new EventHandler<ActionEvent>() {            
        @Override
        public void handle(ActionEvent arg0) {
            for (int i = 0; i < imageNames.length; i++) {                    
                tps[i] = new TitledPane(imageNames[i]+" refill",pics[i]); 
            }
            accordion.getPanes().clear();
            accordion.getPanes().addAll(tps);
            accordion.getPanes().get(0).setExpanded(true);
        }
    });
    hbox.setPadding(new Insets(20, 0, 0, 20));
    hbox.getChildren().setAll(label, accordion, buttonClear);

    Group root = (Group)scene.getRoot();
    root.getChildren().add(hbox);
    stage.setScene(scene);
    stage.show();
} 
```

当我更改展开的 TitledPane 时，标签将采用其值。我还添加了一个按钮，清除 Accordion 中的所有 TitledPane，创建一个新的并将第一个 TitledPane 设置为 Expanded。

因此，当我按下按钮时，手风琴将被重新填充，标签显示 First TitledPane 它已扩展，但最后一个似乎已被选中，但没有图像。这会在我们第二次按下此按钮时发生，或者如果我们之前选择了 TitledPane 之一。

而这件事正是我想做的。清除所有 TitledPane 并用新的 TitledPane 重新填充它，它给出了同样奇怪的结果。

我怎样才能清理所有的 TitledPane，创建一个新的并将第一个 TitledPane 设置为扩展，而没有我之前解释过的这种副作用？

谢谢阅读！

# c# - 首先使用 EF 代码将小数位指定为属性

> ID：13649803
> 
> 赞同：3
> 
> 时间：2012-11-30T17:10:39.553
> 
> 标签：c#, entity-framework, ef-code-first

我使用 Entity Framework Code First 来查询我的 SQL Server 数据库。我还使用代码迁移来保持最新状态。

当我使用小数类型时，基础列的创建精度/比例为 18,2。对于一个特定的列（汇率），我想将其增加到 18,6。

我想向我的类添加一个属性，该属性将指示 EF 使用指定的小数精度，如下例所示：

```
public class Transaction
{
    [Key]
    public int ID { get; set; }

    ...

    [DisplayName("Exchange Rate")]
    [DecimalPrecision(18, 6)]
    public decimal? ExchangeRate { get; set; }

} 
```

我**不想**做的是[按照这个问题](https://stackoverflow.com/questions/3504660/entity-framework-code-first-decimal-precision-and-scale)`OnModelCreating`的建议更新函数

在[这里，](http://geekswithblogs.net/danemorgridge/archive/2010/12/20/ef4-code-first-control-unicode-and-decimal-precision-scale-with.aspx)我找到了一个潜在的解决方案，但后来我发现代码无法编译，因为它基于随后被删除的预发布功能。

[这里](http://dotnetspeak.com/2011/03/custom-conventions-in-entity-framework-code-first-v-4-1)提出了一个替代方案，但这看起来很复杂，也许在我涉足之前，我想我可能会问是否存在替代方案？EF 发展如此之快，以至于很难跟上发展的步伐，也许我错过了一些东西。

# visual-studio-2010 - 合并回主干时 TFS 未能通过门控签入

> ID：13649805
> 
> 赞同：0
> 
> 时间：2012-11-30T17:10:43.910
> 
> 标签：visual-studio-2010, tfs, msbuild

在以下场景中遇到 TFS 和 TFS CI 问题（我已经简化了它，尽管它本质上是相同的问题）：

1.  我有一个主干（一个 VS 解决方案中的一组 csprojs）
2.  我有一个分支（取自主干）——在这个分支中我创建了一个新文件，比如“MyRepository.cs”
3.  我将我的分支合并回主干 - 一切似乎都很好......（在待处理的更改中，文件被标记为“合并，分支”）
4.  我将合并的待处理更改签入到主干
5.  这将启动 TFS 中的门控签入
6.  这失败了，我从 TFS CI 收到一条消息：

“CSC：找不到源文件 'Repositories\MyRepository.cs'”

“TF270015：‘MSBuild.exe’返回了意外的退出代码。预期为‘0’；实际为‘1’。”

当我签入 MyRepository.cs 文件时，我显然签入了包含 MyRepository.cs 的程序集的 csproj 文件。这个 csproj 具有包含新 cs 文件的行，即：

```
<Compile Include="Repositories\MyRepository.cs" /> 
```

所以问题是我不明白为什么 TFS 抱怨 .cs 文件不存在，即使我正在检查它并且它包含在 csproj 文件中。

我怀疑我从分支合并到主干这一事实导致了问题，但我不知道为什么。我对 TFS CI 比较陌生，所以任何关于现在看哪里的指针都会有很大帮助。

**更新**- 此后发现 TFS CI 使用的源文件的工作目录没有将 MyRepository.cs 文件拉入其中，也没有拉入 .csproj 文件的最新（签入集）版本（看起来像它的旧主干版本仍然）。这似乎很奇怪，因为错误消息（上图）暗示它获取了 .csproj 但没有获取 MyRepository.cs 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:40:07.247

事实证明，这是因为 TFS 构建代理使用的帐户没有检索分支的权限（或任何其他权限）。所以我更新的文件和从分支合并到主干的新文件没有出现在主干构建中。有点烦人的是，TFS 没有明确地抱怨这个，而是直接使用旧的主干文件（或者如果它确实抱怨我在日志中找不到它）。

摘要：授予分支上的构建代理帐户权限解决了该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:18:35.087

好吧，错误表明 csproj 文件中确实包含您的更改，因为编译器正在寻找该文件。但是，它也表明实际的 cs 文件不是签入的一部分，或者它被签入到与 csproj 文件所期望的位置不同的位置。另一种可能的解决方案（如果您已经验证了其他两个）是您的构建工作区不知何故没有包含 Repositories 文件夹的映射。

# java - ArrayList OutOfBounds - Java (Android) 编程

> ID：13649806
> 
> 赞同：0
> 
> 时间：2012-11-30T17:10:58.230
> 
> 标签：java, android, arraylist, indexoutofboundsexception

LogCat 输出的错误指向 QuestionView.java 的第 37 行，我将在下面的代码中对其进行注释。下面我有 4 个类的 4 个片段。我也有来自 LogCat 的输出。

主菜单.java

```
public class MainMenu extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mainmenumain);

    Button button1 = (Button)findViewById(R.id.startBtn);
    Button button2 = (Button)findViewById(R.id.categoriesBtn);
    Button button3 = (Button)findViewById(R.id.highscoresBtn);
    Button button4 = (Button)findViewById(R.id.aboutBtn);

    button1.setOnClickListener(new OnClickListener() {   
        public void onClick(View arg0) {
            Intent intent1 = new Intent(MainMenu.this, QuestionView.class);
            startActivity(intent1);  
        }
    });
//more code... 
```

问题.java

```
public class Question {
String a1;
String a2;
String a3;
String a4;
int correctAnswer;
String query;

public Question() {
}

public Question(String a1, String a2, String a3, String a4, int correctAnswer, String query) {
    this.a1 = a1;
    this.a2 = a2;
    this.a3 = a3;
    this.a4 = a4;
    this.correctAnswer = correctAnswer;
    this.query = query;        
}

public String getA1() { return a1; }
public String getA2() { return a2; }
public String getA3() { return a3; }
public String getA4() { return a4; }
public String getQuery() { return query; }
public int getCorrectAnswer() { return correctAnswer; }
  } 
```

测验.java

```
public class Quiz {
ArrayList<Question> qList = new ArrayList<Question>();
public static ArrayList<Question> tenQs = new ArrayList<Question>(10);

public Quiz() {
    qList.add(new Question("A", "B", "C", "D", 3, "Question 1?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 2?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 3?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 4?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 5?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 6?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 7?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 8?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 9?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 10?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 11?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 12?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 13?"));
    qList.add(new Question("A", "B", "C", "D", 3, "Question 14?"));
}

public void getRandom10() {
    for(int i = 0; i < 10; i++) {
        Question x = qList.get((int) Math.floor((qList.size()+1)*Math.random()));
        if(tenQs.contains(x) == true) {
            i--;
        } else {
            tenQs.add(x);
        }
    }
}

public ArrayList<Question> getTenQs() { 
    return tenQs;
}
  } 
```

QuestionView.java

```
public class QuestionView extends Activity {

Quiz quiz = new Quiz();
ArrayList<Question> queries = quiz.getTenQs();

int correctAnswers = 0;
int wrongAnswers = 0;

int answer = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.questionviewmain);

    TextView question = (TextView)findViewById(R.id.question);

    Button answer1 = (Button)findViewById(R.id.answer1);
    Button answer2 = (Button)findViewById(R.id.answer2);
    Button answer3 = (Button)findViewById(R.id.answer3);
    Button answer4 = (Button)findViewById(R.id.answer4);

    for(int i = 0; i < 10; i++) {
        question.setText(queries.get(i).getQuery());  //Error points to here.
        answer1.setText(queries.get(i).getA1());
        answer2.setText(queries.get(i).getA2());
        answer3.setText(queries.get(i).getA3());
        answer4.setText(queries.get(i).getA4());

        answer = queries.get(i).getCorrectAnswer();

        answer1.setOnClickListener(new OnClickListener() {
            public void onClick(View arg0) {
                if(answer == 0) {
                    correctAnswers++;
                } else {
                    wrongAnswers++;
                }
            }
        });
//more code... 
```

日志猫

```
11-12 00:08:40.983: E/AndroidRuntime(4338): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.QuestionView}: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
11-12 00:08:40.983: E/AndroidRuntime(4338):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at android.os.Looper.loop(Looper.java:137)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at java.lang.reflect.Method.invokeNative(Native Method)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at java.lang.reflect.Method.invoke(Method.java:511)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at dalvik.system.NativeStart.main(Native Method)
11-12 00:08:40.983: E/AndroidRuntime(4338): Caused by: java.lang.IndexOutOfBoundsException: Invalid index 0, size is 0
11-12 00:08:40.983: E/AndroidRuntime(4338):     at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:251)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at java.util.ArrayList.get(ArrayList.java:304)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at com.example.test.QuestionView.onCreate(QuestionView.java:37)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at android.app.Activity.performCreate(Activity.java:5008)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-12 00:08:40.983: E/AndroidRuntime(4338):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 
```

任何帮助或输入表示赞赏！先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:15:02.587

将您的 for 循环条件更改为：

```
for(int i = 0; i < queries.size() ; i++) 
```

并确保`queries`在使用之前初始化 ArrayList

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:14:26.360

您不会调用您的`getRandom10()`方法来初始化列表。

编辑
你还使用了糟糕的设计类`Quiz`：

1.  `tenQs`是`static`您用 list 中的数据填充的`non-static`列表`qList`。

2.  也`tenQs`可以`public`通过 class: 直接访问它`Quiz.tenQs`。我想制作它`private`并在内部`non-static`调用`getRandom10`conturtor 以确保正确初始化您的`Quiz`.

3.  将您的随机索引设为：

代码：

```
Random r = new Random();
for(int i = 0; i < 10; i++) {
    Question x = qList.get(r.nextInt(qList.size()));
    tenQs.add(x);
} 
```

我明白了。如果您使用内部`for`条件`< tenQs.size()`，这`for`将不会执行，因为实际大小为`tenQs`is`0`但容量为`10`。因此，您必须在测验中创建具有问题数量的常数并在此`for`循环中使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:15:11.800

qList.size()+1 = 11 所以 random 会给出 0 到 10 之间的任何数字...所以如果数字是从 0 到 9 很好，但是 10 会导致您的程序失败...。

# javascript - 访问未知的 Json 结构

> ID：13649807
> 
> 赞同：-2
> 
> 时间：2012-11-30T17:11:01.410
> 
> 标签：javascript, jquery, jsonp

我需要使用以下结构访问 javascript 中的 json 对象：

```
jsonp1354291250080({
    "query":{"count":"1","created":"2012","lang":"en"},
    "results":["this is a test"]
}); 
```

我从在线服务接收这个对象，我无法控制它的结构并且使用`data.query`不起作用。

请如果有人知道如何访问它。

更新：我正在使用 James Padolsey [https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/](https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax/)的 jquery.xdomainajax.js 并使用 jQuery 的 $.get() 函数来做跨域请求

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:27:39.453

您使用的是[JSONP](http://json-p.org/)服务，因为您位于不同的域中。您最好的选择是让[jQuery 的 $.getJSON](http://api.jquery.com/jQuery.getJSON/)为您处理它。

> 如果 URL 包含字符串“callback=?” （或类似的，由服务器端 API 定义），请求被视为 JSONP。[有关详细信息，请参阅$.ajax()](http://api.jquery.com/jQuery.ajax/)中对 jsonp 数据类型的讨论。

该页面上的 JSONP 示例：

```
<!DOCTYPE html>
<html>
<head>
  <style>img{ height: 100px; float: left; }</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <div id="images">

  </div>
<script>
  $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",
    {
      tags: "mount rainier",
      tagmode: "any",
      format: "json"
    },
    function(data) {
        $.each(data.items, function(i,item){
        $("<img/>").attr("src", item.media.m).appendTo("#images");
        if ( i == 3 ) return false;
    });
  });
</script>

</body>
</html> 
```

# java - 最好用分析工具查看线程转储：

> ID：13649808
> 
> 赞同：-1
> 
> 时间：2012-11-30T17:11:04.527
> 
> 标签：java, thread-dump

最好用分析工具查看线程转储：

```
 http://www.cubrid.org/blog/dev-platform/how-to-analyze-java-thread-dumps/
 http://java.net/projects/tda 
```

单个线程转储有时难以评估实际发生的情况。在可能的情况下，应生成间隔 15 秒的多个 (5) 线程转储部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:12:28.233

我发现这两个链接提供了有关[转储](https://www.youtube.com/watch?v=yxtsPoe-beY)的良好信息。

# java - Swing - MaskFormatter - 从文本字段的右侧输入数字

> ID：13649810
> 
> 赞同：5
> 
> 时间：2012-11-30T17:11:07.530
> 
> 标签：java, swing, jformattedtextfield

我是 Swing Java 开发的新手。有人可以帮我解决这个问题。

我有一个带有 maskformatter 的 jformattedtextfield。它工作得很好。但我唯一想知道的是，我们是否可以这样做以从右侧输入数字。下面的代码可以很好地从左到右输入数字。

感谢您的时间。

这是我的java代码：

```
public class MaskFormattedTextExample extends JFrame {

    private static final long serialVersionUID = -1212313123;

    JFormattedTextField timeField;

    public MaskFormattedTextExample() {
        initComponents();
    }

    private void initComponents() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(new Dimension(200, 200));
        getContentPane().setLayout(new FlowLayout(FlowLayout.LEFT));

        MaskFormatter mask = null;
        try {
            mask = new MaskFormatter("##:##:##");
            mask.setPlaceholderCharacter('_');
        } catch (ParseException e) {
            e.printStackTrace();
        }

        timeField = new JFormattedTextField(mask);
        timeField.setHorizontalAlignment(JTextField.RIGHT);
        timeField.setCaretPosition(JTextField.RIGHT);

        getContentPane().add(timeField);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                new MaskFormattedTextExample().setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:16:51.040

你可以使用：

```
timeField.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT); 
```

# android - Android：这些菜单是什么以及如何构建它们？

> ID：13649813
> 
> 赞同：-1
> 
> 时间：2012-11-30T17:11:11.427
> 
> 标签：android, menu

我在 BBC 新闻应用程序上看到了这个菜单。我想知道是否有人可以帮助我构建这样的菜单。

在布局的顶部，有一个类似于所附图像的菜单。我怎样才能建立这样的东西？

这些是按钮。当我将手指放在它们上时，背景颜色会发生变化并且会变暗。

![](../Images/00c0fa0bef72b27166aaf52fff41ed86.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:16:30.823

ActionBar 或[ActionBarSherlock](http://actionbarsherlock.com/)

# c# - 如何在 linq where 子句中使用函数的返回值？

> ID：13649814
> 
> 赞同：2
> 
> 时间：2012-11-30T17:11:18.883
> 
> 标签：c#, linq

我正在尝试针对 EF 实体类型（人）创建一般搜索查询。通常，搜索采用一个字符串，将其用逗号分隔，然后搜索其各种属性包含所有关键字的人。

我有一个名为 getProperties(Person p) 的函数，它接受一个实体（被实体类型覆盖），并返回一个由分隔符连接在一起的各种相关属性的字符串......例如：

```
John~Doe~Team A~Full Time 
```

如果用户搜索“Team A, Full”，则应返回与上述展平实体相对应的人员……但是，如果输入“John，Smith”，则不应返回。

我认为以下看起来是正确的，但它只是不起作用......

```
public IEnumerable<Person> SearchPeople(string searchString)
{
    if (searchString == null || string.IsNullOrEmpty(searchString.Trim()))
        return base._objectSet.ToList();

    string[] SearchWords = searchString.Split(',').Select(s => s.Trim()).ToArray();

    return (from    person 
            in      base._objectSet 
            let     t = (getProperties(person)) 
            where   SearchWords.All(word => t.Contains(word)) 
            select  person).ToList();
} 
```

getProperties 函数是：

```
public static string getProperties(Person p)
{
    string[] values = { p.Surname, p.GivenName, p.Team, p.Status };
    return values.Aggregate((x, y) => String.IsNullOrEmpty(y) ? x : string.Concat(x, "~", y));
} 
```

有谁知道我哪里出错了？

**编辑**

没有引发异常，但是当我单步执行代码时，当我到达 linq 时，它会进入托管查询的 unitofwork 的 dispose 方法。很奇怪。

如果我将其更改为搜索硬编码字符串，它将按预期工作：

```
var test = (from    person 
            in      base._objectSet 
            where   SearchWords.All(word => "John~Doe~Team A~Full Time".Contains(word))
            select person).ToList(); 
```

好吧，它的工作原理是它与我期望的查询匹配，但由于它是静态的，它返回每个人的记录（很像 where(true) =P）

**编辑第二个**

更奇怪的是，如果我将结果存储到一个 var 中，然后在返回时返回带有断点的 var，执行永远不会到达断点......这个 linq 就像一个黑洞......我可以进入它，但是它永远不会让我回到我的 SearchPeople 方法......它只是处理上下文并忘记它。

**编辑第三**

如果我不立即调用 ToString() 并查看调试器中的 linq 表达式，它会显示“Linq to Entities 无法识别方法 getProperties(Person)”在没有 linq 窒息的情况下使用我的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:20:46.380

你要返回一个列表？尝试返回类型为 List 或更改`.ToList()`为`AsEnumerable()`

```
public List<Person> SearchPeople(string searchString)
{
    if (searchString == null || string.IsNullOrEmpty(searchString.Trim()))
        return base._objectSet.ToList();

    string[] SearchWords = searchString.Split(',').Select(s => s.Trim()).ToArray();

    return (from    person 
            in      base._objectSet 
            let     t = (getProperties(person)) 
            where   SearchWords.All(word => t.Contains(word)) 
            select  person).ToList();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:29:15.070

好吧，在发现 linq 2 entites 不喜欢方法后（因为不知道如何将其转换为 sql），我重写了我的 linq 是一种非常乏味但功能正常的方式：

```
var people = from    p
             in      base._objectSet
             where   SearchWords.All(p.GivenName.Contains(word) || p.Surname.Contains(word) || p.(???).Contains(word) || etc.)
                    select p; 
```

烦人，但你去。

# ruby-on-rails - 导轨 gem 安装 pg

> ID：13649815
> 
> 赞同：2
> 
> 时间：2012-11-30T17:11:22.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, postgis

我想将 gem pg 安装到我的 windows 7 机器上：

```
gem install pg 
```

但它每次都失败并出现以下错误：

```
Fetching: pg-0.14.1-x86-mingw32.gem (100%)
Successfully installed pg-0.14.1-x86-mingw32
1 gem installed
Installing ri documentation for pg-0.14.1-x86-mingw32...
Enclosing class/module 'rb_mPG' for class Connection not known
Enclosing class/module "rb_cPGconn" for alias close finish not known
Enclosing class/module "rb_cPGconn" for alias query exec not known
Enclosing class/module "rb_cPGconn" for alias escape escape_string not known
Enclosing class/module "rb_cPGconn" for alias nonblocking? isnonblocking not kno
wn
Enclosing class/module "rb_cPGconn" for alias client_encoding= set_client_encodi
ng not known
Enclosing class/module "rb_cPGconn" for alias notifies_wait wait_for_notify not
known
Enclosing class/module "rb_cPGconn" for alias async_query async_exec not known
Enclosing class/module "rb_cPGconn" for alias locreat lo_creat not known
Enclosing class/module "rb_cPGconn" for alias locreate lo_create not known
Enclosing class/module "rb_cPGconn" for alias loimport lo_import not known
Enclosing class/module "rb_cPGconn" for alias loexport lo_export not known
Enclosing class/module "rb_cPGconn" for alias loopen lo_open not known
Enclosing class/module "rb_cPGconn" for alias lowrite lo_write not known
Enclosing class/module "rb_cPGconn" for alias loread lo_read not known
Enclosing class/module "rb_cPGconn" for alias lolseek lo_lseek not known
Enclosing class/module "rb_cPGconn" for alias lo_seek lo_lseek not known
Enclosing class/module "rb_cPGconn" for alias loseek lo_lseek not known
Enclosing class/module "rb_cPGconn" for alias lotell lo_tell not known
Enclosing class/module "rb_cPGconn" for alias lotruncate lo_truncate not known
Enclosing class/module "rb_cPGconn" for alias loclose lo_close not known
Enclosing class/module "rb_cPGconn" for alias lounlink lo_unlink not known
Installing RDoc documentation for pg-0.14.1-x86-mingw32...
Enclosing class/module 'rb_mPG' for class Connection not known
Enclosing class/module "rb_cPGconn" for alias close finish not known
Enclosing class/module "rb_cPGconn" for alias query exec not known
Enclosing class/module "rb_cPGconn" for alias escape escape_string not known
Enclosing class/module "rb_cPGconn" for alias nonblocking? isnonblocking not kno
wn
Enclosing class/module "rb_cPGconn" for alias client_encoding= set_client_encodi
ng not known
Enclosing class/module "rb_cPGconn" for alias notifies_wait wait_for_notify not
known
Enclosing class/module "rb_cPGconn" for alias async_query async_exec not known
Enclosing class/module "rb_cPGconn" for alias locreat lo_creat not known
Enclosing class/module "rb_cPGconn" for alias locreate lo_create not known
Enclosing class/module "rb_cPGconn" for alias loimport lo_import not known
Enclosing class/module "rb_cPGconn" for alias loexport lo_export not known
Enclosing class/module "rb_cPGconn" for alias loopen lo_open not known
Enclosing class/module "rb_cPGconn" for alias lowrite lo_write not known
Enclosing class/module "rb_cPGconn" for alias loread lo_read not known
Enclosing class/module "rb_cPGconn" for alias lolseek lo_lseek not known
Enclosing class/module "rb_cPGconn" for alias lo_seek lo_lseek not known
Enclosing class/module "rb_cPGconn" for alias loseek lo_lseek not known
Enclosing class/module "rb_cPGconn" for alias lotell lo_tell not known
Enclosing class/module "rb_cPGconn" for alias lotruncate lo_truncate not known
Enclosing class/module "rb_cPGconn" for alias loclose lo_close not known
Enclosing class/module "rb_cPGconn" for alias lounlink lo_unlink not known 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T17:24:44.287

安装文档失败。该文档容易出错，您可能永远也不会阅读它。安装需要时间和空间，但失败会留下工作的 gem，所以你在这里没问题。

试试这个跳过文档安装：

```
gem install --no-rdoc --no-ri pg 
```

对其他 gem 安装使用相同的模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T17:19:59.330

在我看来，gem 已实际安装。是后来的文件导致它爆炸。如果你做'gem list'，你能看到它正在安装吗？如果是这样，您应该可以正常使用它...

它说：

```
Successfully installed pg-0.14.1-x86-mingw32
1 gem installed 
```

# scala - 字符串连接中的类型不匹配

> ID：13649817
> 
> 赞同：0
> 
> 时间：2012-11-30T17:11:27.540
> 
> 标签：scala, concatenation, type-mismatch, gatling

我对 Scala 真的很陌生，我什至无法连接字符串。这是我的代码：

```
object RandomData {

private[this] val bag = new scala.util.Random

def apply(sensorId: String, stamp: Long, size: Int): String = {
  var cpt: Int = 0
  var data: String = "test"
  repeat(10) {
    data += "_test"
  }
  return data
}
} 
```

我得到了错误：

```
type mismatch;
 found   : Unit
 required: com.excilys.ebi.gatling.core.structure.ChainBuilder 
```

我究竟做错了什么 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:35:00.417

`repeat`由 Gatling 提供，用于重复 Gatling 任务，例如查询网站。如果您查看[文档](https://github.com/excilys/gatling/wiki/Structure-Elements#wiki-repeat)（我无法找到指向 API 文档的链接`repeat`），您会看到 repeat 需要一个*chain*，这就是您的错误消息显示“required: com.excilys.ebi”的原因.gatling.core.structure.ChainBuilder”。但是，您所做的只是附加到一个字符串——它不会返回 type 的值`ChainBuilder`。

此外，附加到字符串不是任何应该通过 Gatling 完成的。在我看来，您好像将 Gatling's`repeat`与 Scala [`for`loop](http://tutorials.jenkov.com/scala/for.html)混淆了。如果您只想追加10 次，`"_test"`请`data`使用 Scala 的循环之一 ( `for`, `while`) 或使用例如`foldLeft`. 这里有两个例子：

```
/* Imperative style loop */
for(i <- 1 to 10) {
  data += "_test"
}

/* Functional style with lazy streams */
data += Stream.continually("_test").take(10).mkString("") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:33:49.840

你的问题是块

```
{
  data += "_test"
} 
```

评估为`Unit`，而该`repeat`方法似乎希望它评估为 a `ChainBuilder`。

查看该`repeat`方法的文档。我找不到它，但假设它看起来像这样可能是合理的

```
def repeat(numTimes: Int)(thunk: => ChainBuilder): Unit 
```

我不确定该`repeat`方法是否有什么特别之处，但是根据您的使用情况，您可以只使用此块而不是`repeat(10){...}`

```
for(i <- 1 to 10) data += "_test" 
```

另外，作为旁注，您不需要`return`关键字 with scala。你可以说`data`，而不是`return data`。

# rewrite - 使用 Helicon Tech ISAPI 重写的带有 Win Server2k 的奇怪情况 .htaccess 文件

> ID：13649819
> 
> 赞同：0
> 
> 时间：2012-11-30T17:11:27.083
> 
> 标签：rewrite, isapi, isapi-rewrite, isapi-redirect, helicontech

我遇到了旧的 .htaccess 文件不接受不区分大小写的 URL 的问题。

我需要所有 URL 不区分大小写，但我必须继续手动重写所有内容，这在实践中看起来非常糟糕。

目前，我必须为每个我想取消大小写的 URL 执行此操作：

```
RewriteRule ^Page/(.*) /page/$1 [NC] 
```

在此之前，唯一可以解析的 URL 是：

```
http://www.domain.com/Page 
```

现在，任何情况下的异常都有效（域后）：

```
http://www.domain.com/Page
                     /page
                     /pAgE
                     ...etc 
```

在我使用没有 Helicon Tech ISAPI Rewrite 模块的服务器上，这不是问题，但我在他们的文档中没有看到任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:06:02.477

尝试重新安装 ISAPI_Rewrite。这是不对的。NC-flag 一直在工作。

# github - Travis-CI 检测到错误的触发器？Github 发送错误的钩子？

> ID：13649820
> 
> 赞同：0
> 
> 时间：2012-11-30T17:11:32.220
> 
> 标签：github, travis-ci

# Travis-CI 检测到错误的触发器？

Travis 检测到错误的提交作为触发器？Github 发送错误的钩子？我的工作流程中的错误在哪里？

## 我的工作流程

```
$ git fetch origin
$ git checkout -b feature-foo origin/master
 (edit, delete, commit…)
$ git push origin feature-foo:feature-foo

 (sometimes time passed)
$ git fetch origin
$ git checkout -b feature-bar origin/master
 (edit, delete, commit…)
$ git push origin feature-bar:feature-bar
# Then problem happens! 
```

我只推了*feature-bar*，但 travis 检测到*主*提交。Travis 构建历史隐藏了这个提交，所以它只显示 #1 和 #3。

我有两个问题：

*   错误检测*为主*提交，有时会失败
*   错误检测花费实际构建时间

我的回购：

*   回购：[https ://github.com/sanemat/tsurapoyo](https://github.com/sanemat/tsurapoyo)
*   特拉维斯：[https ://travis-ci.org/sanemat/tsurapoyo](https://travis-ci.org/sanemat/tsurapoyo)

Travis 构建历史 [https://travis-ci.org/sanemat/tsurapoyo/builds](https://travis-ci.org/sanemat/tsurapoyo/builds) 仅显示 #1 和 #3

#1

*   分支：add-travis #=> 有效
*   [http://github.com/sanemat/tsurapoyo/commit/74066d865a7ad564555d36696887490c46218a31](http://github.com/sanemat/tsurapoyo/commit/74066d865a7ad564555d36696887490c46218a31)
*   [https://travis-ci.org/sanemat/tsurapoyo/builds/3301289](https://travis-ci.org/sanemat/tsurapoyo/builds/3301289)
*   提交信息：添加 .travis.yml

#2

*   分支：master #=> 无效！！这不是*大师*
*   [http://github.com/sanemat/tsurapoyo/commit/68e4731259f1c9a89cae41e251f696f5ceb5c0c8](http://github.com/sanemat/tsurapoyo/commit/68e4731259f1c9a89cae41e251f696f5ceb5c0c8)
*   [https://travis-ci.org/sanemat/tsurapoyo/builds/3301291](https://travis-ci.org/sanemat/tsurapoyo/builds/3301291)
*   提交信息：添加 .travis.yml

#3

*   分支：master #=> 有效
*   [http://github.com/sanemat/tsurapoyo/commit/b3ab009ddc382ad5adce19f6f86d15803a5b8cb3](http://github.com/sanemat/tsurapoyo/commit/b3ab009ddc382ad5adce19f6f86d15803a5b8cb3)
*   [https://travis-ci.org/sanemat/tsurapoyo/builds/3301317](https://travis-ci.org/sanemat/tsurapoyo/builds/3301317)
*   提交消息：从 sanemat/add-travis 合并拉取请求 #1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:42:59.983

#2 中显示的分支是发送拉取请求的分支。对于源自拉取请求的构建和作为正常分支推送结果的构建，我们在 Travis 上展示了略有不同的细节。

对于分支推送，我们显示被推送到的分支，对于拉取请求，我们显示发送拉取请求的分支。

拉取请求也没有显示在构建选项卡中，它在 Travis 的存储库中有自己的选项卡：[https ://travis-ci.org/sanemat/tsurapoyo/pull_requests](https://travis-ci.org/sanemat/tsurapoyo/pull_requests)

# java - 列表由空记录填充 - junit 测试失败

> ID：13649823
> 
> 赞同：0
> 
> 时间：2012-11-30T17:11:37.047
> 
> 标签：java

我用这个把头撞在墙上已经有一段时间了——

我有一个方法来创建另一个类的对象列表：

```
 public List <PayrollRecord> processPayroll() {
    List<PayrollRecord> payroll = new ArrayList<PayrollRecord>();
    for (Employee employee : staff) {
        PayrollRecord payRec = new PayrollRecord(employee.getName(), employee.calculatePay());
        payroll.add(payRec);
    }
    return payroll;
} 
```

staff 是一个 Employee 类对象的列表，可以通过这个方法添加到列表中：

```
 public void addEmployee(Employee employee) {
    staff.add(employee);
} 
```

Employee 也是由其他几个类实现的接口——Manager、SalesAssociate 和 StoreEmployee。（你能告诉我我正在尝试完成一项任务吗？也许你们中有些人很熟悉）。

PayrollRecord 类如下所示：

```
 package my.package.ext;

public class PayrollRecord {

    private String employeeName;
    private double currentPay;

    public PayrollRecord(String employeeName, double currentPay) {

    }

    public double getCurrentPay() {

        return this.currentPay;
        }

        public String getEmployeeName() {
            return this.employeeName;
        }

    } 
```

所以在一个测试类中，我应该能够为员工信息创建一些变量，将一些员工添加到员工，然后运行 ​​processPayroll 方法并对其进行一些断言。我的测试类目前看起来像这样（并且需要更多的断言。在我弄清楚这个基本问题之前，我不会费心添加这些断言）：

```
 @Test
public void testPayroll() {
    List<PayrollRecord> list = store.processPayroll();
    assertEquals(managerTestPay, list.get(0).getCurrentPay(), 0);
} 
```

根据我在测试班其他地方添加的员工数量，应该有五个。我可以设置 list.get 越界并验证确实有 5 个。但是问题是所有 5 条记录都是 null 和 0.0。我应该为每个员工记录命名并支付费用。然而，断言错误又回来了，向我展示了我的预期，但实际值为 0.0（或者当我尝试 list.get(0).getName() 时为 null）。

预先感谢您的帮助和智慧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:14:09.697

而你设置的成员如何？

```
private String employeeName;
private double currentPay;

public PayrollRecord(String employeeName, double currentPay) {

} 
```

在您的构造函数中，您需要分配给成员，例如

```
this.employeeName = employeeName; 
```

仅使用参数调用构造函数是不够的。需要使用参数来填充类的成员（直接或通过某些操作）。

这里一个有用的技术是将成员变量设置为`final`. 这表示：

1.  您不能在初始化后更改它们的值
2.  您必须立即或在构造函数中初始化值

你可能认为这是一个限制。然而很多时候你会发现你只设置了一次这个信息（我怀疑你的任务名称和薪水将保持不变）。如果您需要更改其中一项，则可以轻松删除`final`资格。

```
private final String employeeName;
private final double currentPay;

public PayrollRecord(String employeeName, double currentPay) {
   this.employeeName = employeeName;
   // etc...
} 
```

确保成员不变意味着类实例是*不可变*的。这通常是一件好事。很容易推理和调试不可变类，并且它们是隐式线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:16:53.997

**您没有将构造函数参数分配给类变量。**将您的构造函数更新为：

```
 public PayrollRecord(String employeeName, double currentPay) {
        this.employeeName = employeeName;
        this.currentPay = currentPay;
     } 
```

# themes - 窗口管理器主题和 X11

> ID：13649824
> 
> 赞同：1
> 
> 时间：2012-11-30T17:11:39.353
> 
> 标签：themes, x11, xlib

在某些 WM 中，可以选择影响窗口显示方式的主题，例如按钮背景的颜色。

如果我使用裸 Xlib 调用绘制一个窗口，我应该怎么做才能符合这些受主题影响的设置？即我应该为每个可能的 WM 编写特定的代码吗？一般是怎么解决的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:34:18.267

有几种主题类型，它们有时会一起播放，但不应混淆。

*   窗口管理器/边框主题描述每个窗口的装饰，而不是内容
*   **UI 工具包主题/小部件主题描述了如何在窗口中绘制按钮、文本字段等**
*   图标主题描述了使用哪些图标，涵盖应用程序图标以及文件图标、操作图标、工具栏图标等。
*   颜色主题定义了要在其他主题的框架内使用的调色板
*   指针主题定义了一组鼠标指针图标

一些桌面环境将所有这些主题捆绑在“桌面”主题中，或者至少提供一个前端来选择所有这些主题。然而，这些主题独立于桌面环境，也相互独立。可以使用配置文件来设置它们。

如果您希望您的应用程序符合用户的偏好，首先您应该坚持 Icon 主题。Pointer 主题由 X 服务器负责，只要您只使用常用的鼠标图标并且不要将自己的图标上传到 X 服务器。

第二个明显的事情是颜色主题，但不幸的是，没有颜色主题的标准，Gtk+ 和 Qt 框架都以独立的方式提供了这个功能（桌面主题配置器理解和操作两者以提供一致性）。您可以做一些魔术来确定用户更喜欢 Gtk+ 颜色还是 Qt 颜色（例如，正在运行 Gnome 或 KDE），然后从那里提取颜色。

然而，最困难的事情是提供与用户选择的 UI 工具包主题相符的 UI 元素的外观和感觉。首先，您必须再次在 Gtk+ 和 Qt 之间做出选择（也存在其他可主题化的工具包，但通常不是由用户或像 Enlightenment 这样的小众玩家提供主题）。然后您将不得不重新实现相同的功能。有趣的是，许多主题在 Gtk+ 中都带有自己的主题引擎，并且可以让主题引擎为您完成工作。这种方法已经被多方采纳。例子：

*   Java Swing 支持通过实现 Gtk+ 主题 API 并让 Gtk+ 主题引擎完成工作来模拟 Gtk+ 应用程序，但存在一些不一致的情况。
*   Firefox 和其他使用 XUL 的 Mozilla 应用程序也这样做，但总是存在令人讨厌的差异，从默认字体大小开始。
*   Qt 本身有一个兼容的 Gtk+ 主题，基本上是一样的；这个很好用。

我的建议是不要重新发明轮子，而是使用 Qt（或 Gtk+，如果您愿意）来处理超出基本绘图操作的 GUI 元素。请注意，根据我的经验，即使是原始绘图，使用 Qt 通常也比使用 Xlib 做得更好。用户获得了她期望的外观和感觉（*不仅仅是*外观），界面丰富而稳定，并且您可以节省大量时间来编写所有这些内容。

# math - 位于 3D 三角形上的线段的出射角和点

> ID：13649826
> 
> 赞同：0
> 
> 时间：2012-11-30T17:11:51.997
> 
> 标签：math, 3d, geometry

知道一个 3D 三角形的顶点，以及属于该三角形的点 E 在水平面上的投影的 x、y 坐标。还给出了角度 alpha，表示相对于位于三角形同一平面上的线段的边 AB 的角度。我想了解 3 件事：

*   对于给定的 alpha，F 在哪一侧
*   “出口”侧与段 EF 形成的角度是多少（始终以顺时针方式考虑以下顶点）
*   EF 的长度
*   如果 BC 是出口侧，则段 BF 的长度（再次顺时针）

不过这是……我想看看它的表现如何。谢谢你。

[网格 http://www.keplero.com/upps/mesh.jpg](http://www.keplero.com/upps/mesh.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:58:24.237

1.  找到点 E。画一条垂直于水平面的线，穿过 E 的投影。E点是该线与三角形所在平面的交点。（如果三角形的平面垂直于水平面，则您没有足够的信息来找到 E。）
2.  对点 A、B、C、E 执行变换，使它们位于水平面上。仅使用旋转和平移，以便保留角度和距离。通过这一步，问题可以只在两个维度上解决，这简化了事情。
3.  画一条从 E 向外延伸的射线，它与 AB 的夹角为 α。
4.  对于 AB、BC、CA 中的每一个，确定从 E 延伸的射线是否与它相交。点 F 是射线与其相交的任何线段的交点。（如果光线穿过三角形的顶点而不是边，那么您可能无法得到有意义的答案，涉及“出口”侧的问题。）
5.  使用 F 的位置，确定每个要点的答案。
6.  可选地，执行步骤 2 中完成的变换的逆操作，以获得 F 的真实位置。

# ios6 - HTML5 小部件 .play() 方法不起作用

> ID：13649828
> 
> 赞同：1
> 
> 时间：2012-11-30T17:12:15.297
> 
> 标签：ios6, soundcloud, ipod-touch

SC.Widget('id_of_widget').play(); 似乎不适用于 iOS（pod touch 中的 v6）。我一直试图让它在我自己的网站上工作，（http://www.fromabrokenheart.com/119）但不能。在我在 Windows 上尝试过的其他浏览器中一切都很好。

然后我尝试了 html 小部件游乐场 (http://w.soundcloud.com/player/api_playground.html)，但它也不适用于我的 ipod touch。控制台上方的播放按钮不起作用。

在操场上的控制台中，我不断收到 "loadedProgress": null.... 错误... 见附件截图... 我看不到完整的错误...

有什么想法吗？

缺口

# c++ - 设备唯一 ID（硬件序列号与卷序列号）Windows

> ID：13649832
> 
> 赞同：2
> 
> 时间：2012-11-30T17:12:19.777
> 
> 标签：c++, windows, winapi, deviceiocontrol

我一直在搞乱 Windows API（我被告知要远离 WMI，因为它不可靠），试图为我的 HD 和连接的 USB 设备获取设备序列号。但似乎大部分功能旨在访问卷序列号，而不是实际制造商的设备唯一序列号。这些批量序列似乎是根据驱动器格式化的最后日期和时间计算的。

好吧，这不适用于我要开发的应用程序 - 如果设备已格式化并将相同的信息复制到该设备，那么当他们启动我的应用程序时，它需要能够处理内部信息（通过序列号）作为属于该设备，如果我使用卷序列号将丢失。

我查看了[http://www.winsim.com/diskid32/](http://www.winsim.com/diskid32/)的代码，但这似乎只是返回了卷序列号。编辑：实际上，这个值与卷序列不同，如下面的输出所示：

> ```
> Vol Name is Hellblazer
> Vol Serial is 3358611714
> Max Filelength is 255 chars
> Filesystem is NTFS
> 
> 202020202020202020205a204339464a38305345
> Z9CJF08ES 
> ```

第一位代码中的序列号（使用 GetVolumeInformation）是您在命令提示符下键入“vol”时获得的驱动器十六进制值的十进制版本 - 所以这是卷序列号。下面的数字是从`DeviceIoControl(hwDrive, IOCTL_STORAGE_QUERY_PROPERTY...`. 它与*diskid32*的程序员为我的驱动器获取的 ID 相同，但与下面的实际序列号不同。令人困惑。

对于 USB 驱动器：使用`PSP_DEVICE_INTERFACE_DETAIL_DATA`结构，我可以访问 GUID 设备枚举，对于我的 USB 驱动器，它看起来像这样：

> \?\usbstor#disk&ven_toshiba&prod_mk5059gsxp&rev_gn00#203216187542_ *_* &0#{53f563 07-b6bf-11d0-94f2-00a0c91efb8b}

*该设备信息的这一*部分是序列号，据说：

> 203216187542_ *_*

此外，我加载了 diskpart.exe（一个 cmd 行分区程序）并查看了我的系统 HDD 和外部 USB 驱动器的驱动器详细信息，它们都不匹配我上面得到的任何值：

> 东芝 MK5055GSXF ATA 设备磁盘 ID：00005B9E
> 
> 东芝 MK5059GSXP USB 设备磁盘 ID：51260D08

这里会发生什么？在哪里以及如何访问实际设备的实际制造序列号？

任何帮助将不胜感激！

# shell - Shell脚本：计算txt中每一行的副本

> ID：13649842
> 
> 赞同：2
> 
> 时间：2012-11-30T17:12:40.990
> 
> 标签：shell, unix, compare, line

我想计算一个txt文件中每一行的副本，我已经尝试了很多东西直到知道，但没有一个效果很好。在我的例子中，文本的每一行只有一个单词。

这是我最后一次尝试

```
echo -n 'enter file for edit: '
read file
for line in $file ; do
echo  'grep -w $line $file'
done; <$file 
```

例如：

输入文件

```
a
a
a
c
c 
```

输出文件

```
a 3
c 2 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:18:44.133

```
$ sort < $file | uniq -c | awk '{print $2 " " $1}' 
```

# php - Wordpress：将自定义 ID 添加到 wp_nav_menu 中的最终 li

> ID：13649844
> 
> 赞同：3
> 
> 时间：2012-11-30T17:12:47.987
> 
> 标签：php, wordpress, navigation

我在我的主题中使用了三个主要导航，我试图在所有主要导航中放置一个带有自定义 ID 的菜单的最终链接。

这就是我想要的：

```
<nav id="menu" role="navigation" class="menu-primary">
  <ul id="nav" class="menu">
    <li id="menu-item-418" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-418"><a href="#">About</a></li>
    <li id="menu-item-474" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-474"><a href="#">Work</a></li>
    <li id="menu-item-463" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-463"><a href="#">Blog</a></li>
    <li id="menu-item-416" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-416"><a href="#">Contact</a></li>
    <li id="back" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-491"><href="#header">back</a></li>
  </ul>
</nav> 
```

如您所见，最后的 li 的 ID 为“back”。知道如何在不使用 js 的情况下完成此任务吗？我可以看到如何更改课程，但不能更改 ID。我这样做是为了 CSS 目的。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:33:21.423

`id`您可以最后插入/注入另一个作为自定义菜单项，而不是更改，`menu item/li`如下所示

```
add_filter( 'wp_nav_menu_items', 'your_custom_menu_item');
function your_custom_menu_item ($items)
{
    $items .= '<li id="back" class="what-ever"><a href="#">Back</a></li>';
    return $items;
} 
```

只需将代码片段粘贴到您的，它就会在您的菜单中`functions.php`添加一个自定义。`menu item`希望这可以帮助。

还有另一种方法来改变`menu`使用自定义`walker`，[这里是一个很好的例子](https://wordpress.stackexchange.com/questions/14037/menu-items-description-custom-walker-for-wp-nav-menu)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:45:56.387

如果您正在使用`wp_nav_menu`，那么最好的方法是使用 Wordpress 提供的类。我认为没有办法将特定的 ID 添加到菜单项中。

除非你用 jQuery 来做这...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T20:03:25.943

您将需要使用 JS/jQuery 来执行此操作。WordPress 菜单是动态编写的，您不能只进入主题文件并编辑 li。

如果您的菜单不在同一页面上，那么您可以使用 ID 和第一个示例。您需要将每个菜单的 #nav 更改为 UL 的 ID，并重复该行 3 次，每个菜单一次。

```
$(document).ready(function() {
   $('#nav li').last().attr('id', 'back');
}); 
```

如果您的菜单在同一页面上，则需要使用如下所示的类。您需要将每个菜单的 #nav 更改为 UL 的 ID，并重复该行 3 次，每个菜单一次。那是除非所有菜单在 UL 上都有一个类，在这种情况下你可以只使用`$('#classNameHere li').last().addClass('back');`.

```
$(document).ready(function() {
   $('#nav li').last().addClass('back');
}); 
```

# bash - bash 将具有相同第一列的列相加

> ID：13649845
> 
> 赞同：5
> 
> 时间：2012-11-30T17:12:48.687
> 
> 标签：bash, unix, uniq

我有一个文件，该文件在第一列中有名称，在第二列中有计数。它按名称排序。

```
 dan 3355
    dan 667
    dan 889
    frank 8
    frank 99
    frank 90
    ian 9 
```

我想组合所有相同的名称并输出每个名称的总数：

```
 dan 4911
    frank 197
    ian 9 
```

我知道我可以使用 uniq 来获取相同行的总数，但是如何保留数据中的计数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T17:15:47.997

您可以使用 awk 的关联数组：

```
 awk '{arr[$1]+=$2;} END {for (i in arr) print i, arr[i]}' filename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T23:55:56.763

使用 awk 的关联内存并不能保证名称会以与输入相同的顺序出现在输出中（并且对于大型数据集可能内存效率低下）。

改用以下内容

```
awk '(NR==1){oldname=$1;s=$2;next};
     (oldname == $1){s=s+$2;next};
     {print oldname, s;oldname=$1s=$2;next}
     END{print oldname,s}' 
```

# html - jplayer 在 Visual Studio 2010 中工作，但不在浏览器中

> ID：13649847
> 
> 赞同：0
> 
> 时间：2012-11-30T17:12:54.470
> 
> 标签：html, jplayer

我在 HTML5 中使用 jplayer 播放音频。当我在 Visual Studio 2010 中测试并在浏览器中查看（来自 VS2010）时，音频有效。但是，如果我不在 VS2010 中并双击 .htm 文件以在浏览器中查看，则音频无法正常工作。我正在使用 IE9。这是我的代码：

html5:

```
<script type="text/jscript" src="jQuery.jPlayer.2.2.0/jquery.jplayer.min.js"></script>
   <!-- <script type="text/jscript" src="http://www.jplayer.org/2.2.0/js/jquery.jplayer.min.js"></script> --> 
```

查询：

```
$(document).ready(function () {
                $("#jpId").jPlayer({
                ready: function () {
                    $(this).jPlayer("setMedia", {
                        mp3: "/HolidayCard/179_short_all-the-family-together_0033.MP3"
                    }).jPlayer("play");
                },
                //swfPath: "http://www.jplayer.org/latest/js/Jplayer.swf",
                swfPath: "http://www.jplayer.org/2.2.0/js",
                solution: "html,flash",
                supplied: "mp3",
                wmode: "window"

            });

        }); 
```

HTML5 div 标签：

```
<div id="jpId" ></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:20:57.183

这很可能是由于没有文件的绝对路径造成的。如果您在 Visual Studio 中查看它，它很可能知道文件的相对路径，这就是您可以通过 VS 查看它的原因。尝试将完整路径添加到您的 .htm 文件中，看看是否有帮助。您还可以使用 Chrome 开发工具、Firebug 或 IE 开发工具来查看您的 .htm 文件引发的错误，以帮助您解决问题。一般来说，根据经验，您的大部分测试应该通过浏览器完成，而不是 VS 浏览器。此外，如果这是一个用于实时网站的网页，我建议也在 3 种主要浏览器（IE、Chrome 和 Firefox）中对其进行测试，以确保跨浏览器兼容性。

# html - 从嵌入内容中删除不需要的边距/填充

> ID：13649848
> 
> 赞同：3
> 
> 时间：2012-11-30T17:13:02.867
> 
> 标签：html, css, margin, padding, soundcloud

我在图像下方的页面上嵌入了一个 SoundCloud 小部件。

图像底部和小部件顶部之间有一个小空间。我已经使用 Web Inspector 来追踪这个差距的来源，但我找不到它。我想删除这个空间。

代码很简单：

```
<img src="http://upload.wikimedia.org/wikipedia/commons/8/85/Image-New_Delhi_Lotus.jpg">
<iframe width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F66379982?"></iframe> 
```

查看实际代码：http: [//jsfiddle.net/LAn3A/](http://jsfiddle.net/LAn3A/)

我什至无法判断这个差距是由于边框、填充还是边距。我确信它来自 SoundCloud 小部件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:51:30.463

当您尝试将内联元素靠近块级元素时，可能会发生这种情况。诸如 line-height 之类的文本属性会妨碍您。通过将图像设置为块级元素来修复它：

```
img { display: block;} 
```

# ruby - 反引号运算符

> ID：13649857
> 
> 赞同：1
> 
> 时间：2012-11-30T17:13:23.113
> 
> 标签：ruby

下面的代码取自 RubyTapas 截屏视频，将 Cowsays 消息打印到终端。该类有两个方法，`say`还有一个接受 url 作为参数的反引号方法。如果没有反引号方法，它就无法工作，但我不明白反引号方法何时/如何用于打印出 cowsays 消息，因为从不调用反引号方法。看来（对我而言）您只需要调用该`say`方法，就像这样`Cowsays.new.say "Hello, StackOverflow"`。你能解释一下这段代码是如何调用反引号方法的吗？

```
 ______________________
< Hello, StackOverflow >
 ----------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     || 
```

**代码**

```
require 'net/http'
require 'cgi'

class Cowsays
  def `(url)
    URI.parse(url)
  end

  def say(message)
    message = CGI.escape(message)
    Net::HTTP.get_print(`http://www.cowsays.com/cowsay?message=#{message}`)
  end
end

Cowsays.new.say "Hello, StackOverflow" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:00:24.187

这里显示的技巧是，您可以覆盖反引号运算符。

所以，而不是写：

```
Net::HTTP.get_print(URI.parse("http://www.cowsays.com/cowsay?message=#{message}")) 
```

您可以覆盖反引号并使用

```
Net::HTTP.get_print(`http://www.cowsays.com/cowsay?message=#{message}`) 
```

反而。

正如截屏视频和此处的评论中已经提到的那样 - 这只是一个技巧，不建议实际使用它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:30:51.543

这应该是常规引号`'`，而不是反引号。Backtick 用于执行 shell 命令并返回结果。

例如，要获取文件列表：

```
files = `ls` 
```

这显然被传递给反引号方法，`Kernel`如果需要，您可以在其中覆盖。我以前从未见过这样做，并且在生产应用程序中这样做似乎是一个非常糟糕的主意。

# javascript - 在javascript中触发事件之前检查文本输入

> ID：13649861
> 
> 赞同：0
> 
> 时间：2012-11-30T17:13:30.777
> 
> 标签：javascript, javascript-events

基本上，我正在尝试创建一个基于文本的冒险游戏。我设法弄清楚如何通过简单的 onclick 按钮在 html 的 textarea 中进行文本输出，但现在我正在尝试做一些新的事情。我在做同样的事情时遇到了麻烦，但输入文本时用户可以在框中写任何内容，然后单击按钮。现在，我正试图让这个程序在它做某事之前检查用户输入与一些标志（在这种情况下，我将我的标志设置为'pizza'）。不幸的是，我的代码根本不起作用。我想我不完全理解输入是如何在 javascript 的函数中传递的。

javascript部分

```
function record(test) {
            var input = document.getElementById('filename');
            fileName = input.value;
            if (fileName == "pizza") {
            var obj=document.getElementById(test);
            obj.value="is this showing up in the textarea???"; 
            }
                        else {obj.value="wrong password!"; }

        } 
```

html部分。

```
<input name="filename" id="filename" type="text">

<a id="record_button" onclick="record('textarea1');" href="javascript:void(0);" title="Record">Perform Action</a>

<textarea wrap="virtual" cols="73" rows="10" id="textarea1"></textarea> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:23:59.693

问题是这个带有你的 else 语句的块，`obj`没有被声明。因为您已经`obj`在上面的 if 语句中定义了它，所以它是该范围独有的。只需`obj`在 if 块上方定义即可。

--

```
function record(test) {
    var input = document.getElementById('filename');
    fileName = input.value;
    var obj=document.getElementById(test);
    if (fileName == "pizza") { 
        obj.value="is this showing up in the textarea???"; 
    }
    else {
        obj.value="wrong password!";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:23:34.820

使用 JS 添加事件监听器：

```
document.getElementById('record_button').onclick=function(){
    record('textarea1');
} 
```

此外，您的功能存在一些问题。这里有更正：

```
function record(test) {
    var input = document.getElementById('filename');
    fileName = input.value;
    var obj = document.getElementById(test);
    if (fileName == "pizza") {
        obj.value = "is this showing up in the textarea???";
    }
    else {
        obj.value = "wrong password!";
    }

} 
```

1.  您`document.getElementByID`在第二行使用，这是不正确的大写
2.  您只是`obj`有条件地定义，所以 else 子句总是抛出异常。

这是一个演示：http: [//jsfiddle.net/uQpp7/1/](http://jsfiddle.net/uQpp7/1/)

# java - 为舍入模式扩展jstl格式标签库

> ID：13649864
> 
> 赞同：0
> 
> 时间：2012-11-30T17:13:54.037
> 
> 标签：java, web-applications, glassfish, jstl

我需要解决应用程序范围内的问题（gf 3x，jdk1.6）。java中默认的舍入模式是half_even。所以web app中使用的jstl和decimalformat应该改成使用half_up。不幸的是，不支持设置舍入模式。我可以为每个引用的类定义一个新方法，或者我可以编写自己的自定义标签库。

你会推荐哪一个？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T18:10:02.413

不幸的是，我找不到一个全局系统属性可以让我改变它。这可以在应用程序级别完成，以定义十进制格式，这是每个线程并通过编写过滤器并注入请求来相应地使用。我没有尝试过这种方法，因为我不喜欢这个想法。

相反，我为需要在 HALF_UP 中进行舍入的每个属性创建了一个单独的方法。我工作的应用程序使用 jsp 代码以及 jstl。对于 jsp，设置十进制格式的舍入模式很容易。但是，对于 JSTL，没有这样的方法，对于 JSTL，我创建了一个进行舍入的方法。

# facebook - FB.Canvas.setAutoGrow(true); 不收缩窗口 iframe，如何设置 AutoShrink 使其双向工作

> ID：13649865
> 
> 赞同：0
> 
> 时间：2012-11-30T17:14:04.553
> 
> 标签：facebook, facebook-javascript-sdk

这是我一直在使用 facebook 页面标签时遇到的一个非常烦人的问题。

我使用`FB.Canvas.setAutoGrow(true);`自动将 iframe 调整为内容的大小，效果很好，但只有一种方式。当页面从 jQuery 动画和 ajax 对象增长时效果很好。

但`FB.Canvas.setAutoGrow(true);`似乎只有在它增长时才有效，而不是当我导航到我的页面 iframe 中比上一页短的页面时。

我在底部出现一个大的白色块，这是我上一页的高度。

当页面变小时，如何缩小 facebook iframe？任何帮助都会非常感谢。

这就是我目前使用自动增长的方式......

```
window.fbAsyncInit = function() {

    FB.init({
        appId      : '<?php global $app_id; echo $app_id; ?>', // App ID
        channelUrl : '<?php global $channel_url; echo $channel_url; ?>',
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
    });

    FB.Canvas.setAutoGrow(true);

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-29T00:07:48.027

这会有所帮助

```
window.fbAsyncInit = function() {
  FB.init({"appId": "624452304314106", "status": true, "cookie": true, "xfbml": true});
  //FB.Canvas.setAutoGrow();
  //FB.Canvas.scrollTo(0,0); 
    FB.Canvas.setSize({height:600});
    setTimeout("FB.Canvas.setAutoGrow()",500);
}; 
```

参考： http: [//www.twistermc.com/36764/shrink-facebook-tabs/](http://www.twistermc.com/36764/shrink-facebook-tabs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:19:25.773

使用 FB.Canvas.scrollTo 滚动到顶部。

```
FB.Canvas.scrollTo(0,0); 
```

[https://developers.facebook.com/docs/reference/javascript/FB.Canvas.scrollTo/](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.scrollTo/)

# html - 我可以制作一个svg图像按钮吗？

> ID：13649872
> 
> 赞同：21
> 
> 时间：2012-11-30T17:14:16.873
> 
> 标签：html, post, button, svg

单击 svg 图像时，有什么方法可以发出 POST 请求吗？

到目前为止，我最好的尝试如下：

```
<form action="/test-button" method="POST">
   <input name="Submit" type="submit" value="Submit" /> 
   <svg  >
     <rect width="100" height="100" >
   </svg> 
</form> 
```

这是一个黑色矩形，旁边有一个提交按钮。

我想让人们在几张图片之间进行选择，所以这可能是一个不错的解决方案，但是有没有办法制作一张图片，当点击它时会触发一个 POST？

不使用javascript的额外积分。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-30T17:29:14.737

警告：这有点骇人听闻，但据我所知，它是 100% 合法的，并且不需要 javascript。

由于`label`元素也可以用来控制它的关联输入，你可以尝试这样的事情：

```
<form action="/test-button" method="POST">
  <label>
   <input type="submit" name="image" value="one">
   <svg><rect width="100" height="100"></rect></svg> 
  </label>
  <label>
   <input type="submit" name="image" value="two">
   <svg><rect width="100" height="100"></rect></svg> 
  </label>
</form>
 ​ 
```

然后用 CSS 隐藏提交按钮。您可以在标签中添加任何您想要的内容。

当您单击标签中的任何内容时，它将触发其中的提交按钮并提交表单，该按钮`value`位于 POST 数组中。

还有一个`<input type="image">`, 但这是出于完全不同的目的（跟踪单击位置的坐标）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-07-11T16:19:26.973

这似乎是该`<button>`元素的一个很好的用例。

```
<form action="/test-button" method="POST">
   <button>
      <svg>
         <rect width="100" height="100" >
      </svg>
   </button>
</form> 
```

单击按钮元素执行与 完全相同的工作`input[type="submit"]`，因此您可以完全替换输入。如果你走这条路，你也可以考虑在按钮内放置一个文本标签和/或`title`在 svg 内放置一个用于可访问性目的的文本标签。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T17:17:57.240

没有 JS 是完全不可能的，但是你可以用 JS 来做。附上一个`onclick()`，只需使用：`document.getElementById('formID').submit();`。

HTML：

```
<form action="/test-button" method="POST" id="submittingForm">
   <input name="Submit" type="submit" value="Submit" /> 
   <svg onclick="submitForm();">
     <rect width="100" height="100" >
   </svg> 
</form> 
```

和 JS（在您的`<head></head>`标签内）：

```
<script type="text/javascript">
    function submitForm()
    {
        document.getElementById("submittingForm").submit();
    }
</script> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-30T17:36:47.207

这，也许：

```
<form action="/test-button" method="POST">
    <input type="image" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIi8+PC9zdmc+">
</form> 
```

jsfiddle：http: [//jsfiddle.net/Xawuv/](http://jsfiddle.net/Xawuv/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-07-12T21:40:20.183

这是一个简单的按钮，盒子里有一个闪电。

```
 <svg x="167" y="8" cursor="pointer" width="30" height="30"   visibility="visible" >
                <g id="Flash">
                    <g fill="#FFCC00"  stroke="#D57300" stroke-width="2" >
                        <path stroke-linecap="round" d="m 10.311873 9.0776039 9.400261 -7.988867 -0.05562 6.2501137 -2.224914 0.093987 -0.05562 5.5452134 11.402682 -0.04699 -18.522406 16.024725 0.05562 -6.015145 2.169291 -0.09398 -0.05562 -5.874165 -11.51392928 0.04699 z"/>
                    </g>
                </g>    
                <rect width="30" height="30"  opacity="0"  fill="transparent"    fill="url(#Flash)" id="Flash_Button"  onclick="Flash(evt);" />     
    </svg> 
```

这是您单击时的功能脚本

```
function Flash(){
// post whatever you want inside here

} 
```

当您创建一个按钮并在其中有线条时的问题，当您将 onclick 放入父元素时，您不会单击所有 svg 元素，而是单独单击并单击所有子元素。因此，您需要在 svg 内创建一个具有父元素宽度和高度的矩形并将其隐藏，然后将其放在那里 onclick！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-05T03:37:02.227

有些答案忘记隐藏输入。这应该完美地工作：

复制粘贴就行了。

```
<label class="cursor: pointer;">
    <input type="submit" name="mysubmit" value="val1" style="display: none;">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" 
fill="currentColor" class="bi bi-arrow-down-up" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M11.5 15a.5.5 0 0 0 
         .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 
         4a.5.5 0 1 0 .708.708L11 2.707V14.5a.5.5 0 0 0 .5.5zm-7-14a.5.5 0 0 1 
         .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4- 
         4a.5.5 0 0 1 .708-.708L4 1 
         3.293V1.5a.5.5 0 0 1 .5-.5z"/>
    </svg>
</label> 
```

# java - Java，Slick，不应该移动的对象正在移动？

> ID：13649874
> 
> 赞同：0
> 
> 时间：2012-11-30T17:14:16.703
> 
> 标签：java, oop, slick2d

在我制作的游戏中，我需要 NPC/小怪。我创建了一个名为农民（我的第一个暴民）的课程。在游戏运行的主类中，我拥有所有信息，以及从 Peasant 调用一个名为 mob1 的对象，我需要制作它，以便如果玩家在暴徒的 300 像素内，它开始向它。我试过这样做，但到目前为止，即使玩家在 2000 像素之外，暴徒也会开始移动？？？

这是我的农民课

```
package Entitys.NPCs;

public class Peasant {

    public Peasant(float InitX, float InitY, int MobID){
        MobX = InitX;
        MobY = InitY;
    }
    //This class shall be used as an object creator. This will randomly move a graphic around, near to a player
    private float MobX;
    private float MobY;
    private int AmountMoved = 0;
    private boolean MoveRight = true;
    private boolean MoveLeft;
    public boolean PlayerDetected = false;
    long timer;
    //Used to find the mobs X
    public float getX(){
        return MobX;
    }

    //Used to find the mobs Y
    public float getY(){
        return MobY;
    }

    //Used to set the mobs X
    public void setX(float X){
        MobX = X;
    }   

    //Used to set the mobs Y
    public void setY(float Y){
        MobY = Y;
    }

    //Used to simply move the mob on its X co-ords
    public void moveX(int delta){
        MobX += delta*0.1f;
    }

    //Used to simply move the mob on its Y co-ords
    public void moveY(int delta){
        MobY += delta*0.1f;
    }

    public void autoEveryThing(int delta, float playerX, float playerY) {
        // If the player has not been spotted the NPC/Mob will move left and
        // right by 100 Pixels.
        if(MobX-300<playerX){
            PlayerDetected=true;
        }

        if(PlayerDetected=true){
            if(MobX>playerX){
                MobX-=delta*0.12;
            }
        }

    }

} 
```

这是主要课程：

```
 package Worlds.World1;

import org.lwjgl.input.Mouse;
import org.newdawn.slick.Animation;
import org.newdawn.slick.Color;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.Image;
import org.newdawn.slick.Input;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.state.BasicGameState;
import org.newdawn.slick.state.StateBasedGame;

import Entitys.NPCs.*;

import Main.SimpleMob;

public class World1A extends BasicGameState{
    String mousePosition;
    Image world;
    Animation player, playerLeft, playerRight;
    int[] duration = {200,200};
    float playerX;
    float playerY;
    float WorldX;
    float WorldY;
    float PlayerVisibleScreenX;
    float PlayerVisibleScreenY;
    String MovementDirection;
    Peasant mob1;
    public World1A(int state){
    }

    public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{
        Image [] WalkingLeft = {new Image("res/Sprites/buckysLeft.png"),new Image("res/Sprites/buckysLeft.png")};
        Image [] WalkingRight = {new Image("res/Sprites/buckysRight.png"),new Image("res/Sprites/buckysRight.png")};

        playerLeft = new Animation(WalkingLeft, duration, false);
        playerRight = new Animation(WalkingRight, duration, false);
        player = playerRight;
        WorldX = 0;
        WorldY = 0;
        world= new Image("res/WorldImages/WorldBackGround.png");
        mousePosition="null";
        MovementDirection = "Not Moved Yet";
        mob1= new Peasant(2000, 200, 1);
        if(WorldX<=0){
            playerX = Math.abs(WorldX);
        }else{
            playerX=0-WorldX;
        }
    }

    public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{
        player.draw(450, 300);
        if(WorldX>0){
            world.draw(0, 0);
            g.fillOval(0+mob1.getX(), 0+mob1.getY(), 50, 50);
            g.fillRect(0, 0+340, 500, 10);
            player.draw(-WorldX + 450, 300);
        }else{
            world.draw(WorldX, WorldY);
            g.fillOval(WorldX+mob1.getX(), WorldY+mob1.getY(), 50, 50);
            g.fillRect(WorldX, WorldY+340, 500, 10);
            g.fillOval(WorldX+mob1.getX(), WorldY+mob1.getY(), 50, 50);
            player.draw(450, 300);
        }
        g.setColor(Color.white);

        //All this is co-ords ect, it is for developement help
        g.drawString(String.valueOf(mob1.getX()), 50, 200);
        g.drawString("World X: "+ String.valueOf(WorldX), 50, 225);
        g.drawString("Player X: "+ String.valueOf(playerX), 50, 250);
        g.drawString("Player Detetcted?: "+ String.valueOf(mob1.PlayerDetected), 50, 265);
    }

    public void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException{
        if(WorldX<=0){
            playerX = Math.abs(WorldX);
        }else{
            playerX=0-WorldX;
        }
        mob1.autoEveryThing(delta, playerX, playerY);
        int posX = Mouse.getX();
        int posY = Mouse.getY();
        mousePosition = "X: " + posX + "\nY: " + posY;

        Input input = gc.getInput();
        if(input.isKeyDown(Input.KEY_LEFT)){
            WorldX += delta * 0.1f;
            MovementDirection = "Left";
            player = playerLeft;
        }else if(input.isKeyDown(Input.KEY_RIGHT)){
            WorldX -= delta * 0.1f;
            MovementDirection = "Right";
            player = playerRight;
        }else{
            MovementDirection = "Not Moving";
        }
    }

    //DO NOT CHANGE
    public int getID(){
        return 2;
    }

} 
```

Peasant 类中的 autoEveryThing 方法应该使得 if(mobX-300

但是当我第一次运行它时它开始向玩家移动？即使 (2000-300<0) 为假，它仍将 PlayerDetected 布尔值设置为真？？？为什么会这样？谢谢

编辑：在尝试通过 thi 并修复它之后，我发现了一些奇怪的东西，即使我取出可以将 PlayerDetected 更改为 true 的整个位，暴徒仍会向玩家移动。这意味着 PlayerDetected 在某个地方变得真实，但我不知道在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:47:23.347

```
 if(PlayerDetected=true){ 
```

错了，你应该使用 ==

```
 if(PlayerDetected==true){ 
```

甚至更好

```
boolean isPlayerDetected;

if (isPlayerDetected) 
```

进一步考虑

```
 double dx = mobX - playerX;
 double dy = mobY - playerY;
 double distance = Math.sqrt(dx*dx + dy*dy);
 if (distance < 300) {
     // is within distacne threshold
 } 
```

# functional-programming - 如何理解“让的主体”？

> ID：13649876
> 
> 赞同：4
> 
> 时间：2012-11-30T17:14:19.810
> 
> 标签：functional-programming, ocaml

我正在学习[Jason Hickey 的 Objective Caml 简介](http://www.cs.caltech.edu/courses/cs134/cs134b/book.pdf)。只是有一个关于表达的问题。

* * *

所以它说：

`Definitions using let can also be nested using the in form.`

`let identifier = expression1 in expression2` `The expression expression2 is called the body of the let. The variable named identifier is defined as the value of expression1 within the body. The identifier is defined only in the body expression2 and not expression1.`

`A let with a body is an expression; the value of a let expression is the value of the body.`

```
let x = 1 in
    let y = 2 in
        x + y;;

let z =
    let x = 1 in
        let y = 2 in
            x + y;; 
```

`val z : int = 3`

* * *

好的。我对上述说法不太了解。

### 第一的

`The variable named identifier is defined as the value of expression1 within the body. The identifier is defined only in the body expression2 and not expression1.`

这是什么意思？`identifier`也是如此`the value of expression1`，但只是在体内`expression2`？这是否意味着`identifier`仅在 中有效`expression2`但具有 的值`expression1`？那么定义是否`identifier`有意义，因为它只存在于`expression2`?

### 第二

让我们看看这个例子：

```
let x = 1 in
    let y = 2 in
        x + y;; 
```

所以我不明白这个`let`声明的意义。`x = 1`当然，给身体的意义`let y=2 in x+y;;`何在？

### 第三

让 z = 让 x = 1 在让 y = 2 在 x + y 中；；

那么如何理清这句话的逻辑呢？

如果采用这种定义形式：`let identifier = expression1 in expression2`

`expression1`上面的`let`陈述是什么？是`let x = 1`吗？

* * *

**谁能告诉我`nesting let`某种`Java`方式的逻辑？或更容易理解的方式？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:26:10.887

> 这是什么意思？那么identifier就是expression1的值，但只在body expression2中？是不是说identifier只在expression2中有效，却有expression1的值？

是的。当我这样做时`let x = 42 in x+x`，则在表达式中`x`具有值，但在表达式之外没有任何值。因此，如果您在解释器中输入这样的内容：`42``x+x``x``let`

```
let x = 42 in x+x;;
x*2;; 
```

的结果`x+x`会是`84`，但结果`x*2`会是错误的，因为`x`没有在该范围内定义。

> 那么定义标识符是否有意义，因为它只在表达式2中？

当然，为什么不呢？我的意思是在这个被定义为单个数字的特定示例中`x`，它可能没有那么大的意义，但在现实世界的场景中，它可能是一个更大的表达式，并且不必多次重复它成为一个很大的优势.

也`expression1`可能有你只想执行一次的副作用（例如，如果你想将用户输入分配给一个变量）。

> 所以我不明白这个 let 声明的意义。x = 1 当然，在 x+y;; 中给出 let y=2 的主体有什么意义？

你的意思是：为什么不直接写`1+2`？同样，在现实世界的场景中，您将拥有更复杂的表达式，并且您不想将它们全部放在一行上。也给值命名通常会增加可读性（尽管在这个例子中不是真的）。

> 让 z = 让 x = 1 在让 y = 2 在 x + y 中；；
> 
> 上面 let 语句中的表达式 1 是什么？是否让 x = 1？

这`let z = ...`是一个`let`声明，即它在`z`全局范围内定义名称并且没有正文。所以第一个右边的整个表达式`=`是 的值`z`。对于`let x = ... in ...`位，`1`是`expression1`并且`let y = 2 in x+y`是`expression2`。和 for`y` `2`是`expression1`并且`x+y`是`expression2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:22:49.187

> 这是什么意思？那么identifier就是expression1的值，但只在body expression2中？这是否意味着标识符只在表达式2中有效但具有表达式1的值？那么定义标识符是否有意义，因为它只在表达式2中？

是的，这就是它的意思，但更简单地说，它意味着您不能“以其自身的价值”使用标识符。将表达式 1 的值绑定到标识符后，您可以在表达式 2 中使用标识符而不是整个表达式 1。

一般来说，使用绑定有两个原因；1 是为了防止对给定表达式进行多次评估，2 是为了清楚起见：为相对复杂的表达式的值赋予人类可读的名称通常很有用。

在 Java 中，一个 let 绑定大致对应于一个局部变量。

# javascript - e.preventDefault - e 未定义

> ID：13649880
> 
> 赞同：1
> 
> 时间：2012-11-30T17:14:38.977
> 
> 标签：javascript, jquery

所以我有这个 JS，当我运行代码时，我得到“e is not defined”——我错过了什么？

```
$('ul.result-filters > li a').click(toggleFilters());

function toggleFilters(e) {
   e.preventDefault();
   //do more stuff
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-30T17:15:12.780

用这个 ：

```
$('ul.result-filters > li a').click(toggleFilters); 
```

您传递的是结果，`toggleFilters()`而不是传递函数本身。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T17:15:39.003

```
$('ul.result-filters > li a').on('click', toggleFilters);

function toggleFilters(e) {
   e.preventDefault();
   //do more stuff
} 
```

在函数后添加括号时，它会立即执行并将结果传回。要仅引用该函数并在单击时调用它，请删除括号。

这也将使事件可用于`toggleFilters`函数！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T17:17:07.017

总能做到`e = e || window.event`确保你有活动。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T17:15:32.057

您正在调用函数而不是传递处理程序名称来单击。从 toggleFilters() 中删除括号

改变

```
$('ul.result-filters > li a').click(toggleFilters()); 
```

至

```
$('ul.result-filters > li a').click(toggleFilters); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T17:21:53.653

您需要使用函数名称而不是函数调用 toggleFilters()。

```
$('ul.result-filters > li a').on('click', toggleFilters);

function toggleFilters(e) {
 e.preventDefault();
//do more stuff
} 
```

谢谢

# mysql - 优化where语句MYSQL

> ID：13649881
> 
> 赞同：3
> 
> 时间：2012-11-30T17:14:40.823
> 
> 标签：mysql, sql, optimization, where

我正在编写这个复杂的查询来返回一个大数据集，大约有 100,000 条记录。查询运行良好，直到我将此 OR 语句添加到 WHERE 子句：

> AND（responses.StrategyFk = strategy.Id 或responses.StrategyFk 为空）

现在我明白了，将 or 语句放在那里会增加很多开销。

没有那个声明，只是：

> AND 响应.StrategyFk = strategy.Id

查询在 15 秒内运行，但不返回任何没有 fk 链接策略的记录。

虽然我也想要这些记录。有没有更简单的方法可以使用简单的 where 语句来查找这两个记录？我不能只为空记录添加另一个 AND 语句，因为这会破坏前面的语句。有点不确定从这里去哪里。

这是我查询的下半部分。

```
FROM 
responses, subtestinstances, students, schools, items,
strategies, subtests

WHERE
subtestinstances.Id = responses.SubtestInstanceFk
AND subtestinstances.StudentFk = students.Id
AND students.SchoolFk = schools.Id
AND responses.ItemFk = items.Id
AND (responses.StrategyFk = strategies.Id Or responses.StrategyFk IS Null)
AND subtests.Id = subtestinstances.SubtestFk 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:20:34.477

尝试使用显式`JOIN`s：

```
...
FROM   responses a
       INNER JOIN subtestinstances b
               ON b.id = a.subtestinstancefk
       INNER JOIN students c
               ON c.id = b.studentfk
       INNER JOIN schools d
               ON d.id = c.schoolfk
       INNER JOIN items e
               ON e.id = a.itemfk
       INNER JOIN subtests f
               ON f.id = b.subtestfk
       LEFT JOIN strategies g
              ON g.id = a.strategyfk 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T17:21:44.117

尝试：

```
SELECT ... FROM 
responses
JOIN subtestinstances ON subtestinstances.Id = responses.SubtestInstanceFk
JOIN students ON subtestinstances.StudentFk = students.Id
JOIN schools ON students.SchoolFk = schools.Id
JOIN items ON responses.ItemFk = items.Id
JOIN subtests ON subtests.Id = subtestinstances.SubtestFk
LEFT JOIN strategies ON responses.StrategyFk = strategies.Id 
```

而已。不需要 OR 条件，因为这就是 LEFT JOIN 在这种情况下所做的。任何地方的response.StrategyFk IS NULL 都会导致与`strategies`表不匹配，并且会为此返回一行。

有关连接的简单说明，请参见此链接：http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

之后，如果您仍然遇到性能问题，那么您可以开始查看`EXPLAIN SELECT ... ;`输出并查找可能需要添加的索引。[使用 Explain 优化查询 -- MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)

# c# - Fancybox 有时会重定向当前页面而不是在 iframe 中加载

> ID：13649883
> 
> 赞同：1
> 
> 时间：2012-11-30T17:14:45.950
> 
> 标签：c#, asp.net, fancybox, fancybox-2

我有一个用于搜索功能的花式框，我已经使用了一段时间。最近我更新到fancybox 2.0。自从我升级后，每隔一段时间，我的一个幻想框就会加载到当前窗口而不是 iframe 中。这是适用的代码：

```
<a href="../rets/search.aspx" class="mlsSearch">Search</a> 
```

和fancybox js

```
$("a.mlsSearch").fancybox({
    'hideOnContentClick': false,
    'padding': 0,
    'type': 'iframe',
    'scrolling': 'auto',
    'centerOnScroll': false
}); 
```

关于可能导致此问题的任何想法？我似乎无法弄清楚为什么这个坏了，而其余的，使用类似的代码，工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T11:05:09.633

我遇到了类似的问题，原因是如果您在 iFrame 模式下使用 Fancybox 并想要强制这样的内容：

```
<span onclick="$.fancybox({content:'Hello',type:'iframe'});">Iframe</span> 
```

...那么内容值必须是加载到 iFrame 中的有效 URL。您可能无法为 iFrame 指定 HTML 代码。相反，将搜索 URL“Hello”。

这工作正常：

```
<span onclick="$.fancybox({content:'Hello'});">Iframe</span> 
```

# python - 使用 pygame 播放音乐但没有声音

> ID：13649884
> 
> 赞同：11
> 
> 时间：2012-11-30T17:14:46.580
> 
> 标签：python, macos, pygame

```
import pygame
pygame.mixer.init()
pygame.mixer.music.load("only one.mp3")
pygame.mixer.music.play(0)
while pygame.mixer.music.get_busy():
    pygame.time.Clock().tick(10) 
```

当我运行代码时，没有声音，程序在一秒钟内结束。最初我没有 while 循环，直到我看到类似问题的答案中的建议。该程序在我朋友的windows系统上确实进入了while循环，但在我的mac上没有，即使在我朋友的windows系统上也没有任何声音。有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-30T22:01:16.230

在 Ubuntu 10.04 和 Pygame 1.9.1 上运行良好。

你可以尝试一些事情：

*   初始化整个pygame`pygame.init()`
*   i_4_got 的建议（创建展示）`pygame.display.set_mode((200,100))`
*   在播放 get_busy 之间暂停（打勾）
*   循环内的轮询事件`pygame.event.get()`

例子：

```
import pygame
pygame.init()
pygame.display.set_mode((200,100))
pygame.mixer.music.load("only one.mp3")
pygame.mixer.music.play(0)

clock = pygame.time.Clock()
clock.tick(10)
while pygame.mixer.music.get_busy():
    pygame.event.poll()
    clock.tick(10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-24T18:57:38.263

```
import winsound
winsound.PlaySound(filename [as string with path if necessary], flag [integer z.B. 1 for asynchronous] ) 
```

这适用于**Windows 8 和 Python 2.7.6**和***.wav**文件

如果您键入`winsound.`并查找自动填充列表，您可以检查不同的标志。
标志相似`SND_FILENAME`或相似。
如果您将它们输入到编辑器中，例如：您会从上面的命令`*winsound.SND_FILENAME` 中获得要应用的整数`PLaySound`

玩得开心

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-11T14:45:52.863

# Pygame声音不起作用修复

## 信息

> **尝试重新安装 pygame 或升级它** 我有通过以下命令 **`1.9.1`**升级到的版本**`1.9.3`**

```
pip install pygame --upgrade 
```

笔记：

* * *

> 如果您使用 easy_install 安装它，则它不起作用。不确定，但是当我尝试使用 easy_install 时它不起作用

* * *

该代码与您的代码相同，但我只是将其替换为我的音乐文件以进行检查。
您可以在图像中看到它：

[在这张图片中](https://i.stack.imgur.com/Q5qXb.png)

***.wav 文件似乎运行良好***

> 我用***.mp3***文件检查了它，发现它不起作用。您可以将 .mp3 转换为 .wav：[转换器](http://media.io)
> 
> 或使用[PyMedia](https://pypi.python.org/pypi/PyMedia)
> 如果您不想使用任何网站进行转换。
> 您也可以使用 pydub 进行转换。

你可以从这里下载 pydub

> [关联](http://pydub.com)

或者在命令行中输入这个命令：

```
pip install pydub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-02T22:27:54.960

您必须将其添加到末尾，以使 pygame 满意：

```
while True:
    for event in pygame.event.get():
            if event.type==QUIT:
                pygame.quit()
                sys.exit() 
```

另外，导入系统。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-19T17:58:37.493

通常，Pygame 不会播放 mp3 文件。您可以测试看看 .wav 和 .ogg 文件是否会首先播放，以确保您的代码是正确的（根据您粘贴的内容，它似乎是正确的）。我建议将您的 mp3 声音转换为 Pygame 的 ogg。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-01T14:28:17.997

如果你将mp3更改为ogg格式会更容易，试试这个..它很简单

```
from pygame import *
pygame.init()
pygame.mixer.music.load("only one.ogg")
pygame.mixer.music.play(-1)
pygame.mixer.music.set_volume(0.3) 
```

如果有效，请投票回答，如果无效，请告诉我出了什么问题

# android - Android ScrollView XML 布局大小奇怪

> ID：13649885
> 
> 赞同：0
> 
> 时间：2012-11-30T17:14:47.117
> 
> 标签：android, layout, scrollview

我的想法有点难以置信......在下面的 XML 中，我希望我的 LinearLayout/TextView 与我的 ScrollView 大小相同。正如您从我包含的图片中看到的那样，情况并非如此。

这里发生了什么？为什么我的 LinearLayout 与 ScrollView 的大小不同？

```
<ScrollView
    android:id="@+id/scrollView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#008B8B" >

    <LinearLayout
        android:id="@+id/contentLayout"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="#DC143C" >

        <TextView
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:text="hello" />
    </LinearLayout>

</ScrollView> 
```

![在此处输入图像描述](../Images/c227fb4b65350318df0b76c11a37579e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:22:37.683

采用

`android:fillViewport="true"`

在你的`ScrollView`

# android - 升级到 4.1.1 后，android 后退按钮不起作用

> ID：13649886
> 
> 赞同：1
> 
> 时间：2012-11-30T17:14:48.030
> 
> 标签：android, back-button, mapactivity

我有一个安卓应用程序。使用案例如下

1.  From`activity A`可以导航到`activity B`via`startActivity()`并且`activity A`仍在“堆栈”上（A 未完成）。

2.  Activity B 是 google 的子类`MapActivity`

3.  在按下 BACK 按钮时，导航应该是从 B 到 A。

上述用例在我升级到 Android 4.1.1 之前工作正常（从 2.3.3 到 4.0.x 工作正常）。

在我目前的 4.1.1(Samsung S3) 上，“BACK”按钮通常不起作用。当我按下 BACK 按钮时，按钮亮起但没有执行任何操作。

我什至重写了该`OnPressBack()`方法并将 Toast 消息作为标志放置。但看起来`OnPressBack()`通常不会触发。有时它会起作用，但大多数时候它不起作用（转到上一个活动 A）。

而且我还发现返回按钮问题只发生在“MapActivity”的子类中。

任何线索都会有所帮助。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-02-20T23:04:47.390

如果您使用新的导航组件，您需要确保包含您的 navController 的活动覆盖 onSupportNavigateUp() 函数：

```
override fun onSupportNavigateUp() = findNavController(R.id.nav_host_fragment).navigateUp() 
```

# javascript - 使用 .each() 两次

> ID：13649887
> 
> 赞同：1
> 
> 时间：2012-11-30T17:14:54.140
> 
> 标签：javascript, jquery

我使用这个脚本来创建一个随机数序列，使用数组的值，并将这些数字应用到两个 div 列表中

```
var shuffle = function(v) {
    for (var j, x, i = v.length; i; j = parseInt(Math.random() * i), x = v[--i], v[i] = v[j], v[j] = x);
    return v;
};

var randorder = shuffle([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]);
var index = 0;

$('.Questions').each(function() {
    $(this).addClass('question' + (randorder[index++]));
});

$('.answers').each(function() {
    $(this).addClass('answer' + (randorder[index++]));
}); 
```

问题是脚本正在返回类答案结果“answerundefined”。

请记住，两组必须具有相同的顺序，以匹配问题和答案。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:16:12.207

很难说，因为我不知道你有多少`.Questions`，`.answers`但是当你看到 时`undefined`，这意味着你超出了`randorder`数组的范围。因此，您至少需要在循环之间将 index 设置回零：

```
var index = 0;

$('.Questions').each(function() {
    $(this).addClass('question' + (randorder[index++]));
});
index = 0;
$('.answers').each(function() {
    $(this).addClass('answer' + (randorder[index++]));
}); 
```

您需要将 index 设置回 0 的原因是，当您完成循环时`.Questions`， index 的值为 20。因此，当您循环时`.answers`，索引已从 20 变为 39。您想要 0-19，所以你需要重置它。

此外，您可能想检查您是否仍在界限内：

```
var randcount = randorder.length;
$('.Questions').each(function() {
    if (randcount > index) {
        $(this).addClass('question' + (randorder[index++]));
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:37:43.587

将整个事情从头开始并循环通过`randorder`（一次）会更容易并且自然地容错。

```
var randorder = shuffle([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]);
var $questions = $('.Questions');
var $answers = $('.answers');

$.each(randorder, function(i, r) {
    $questions.eq(i).addClass('question' + r);
    $answers.eq(i).addClass('answer' + r);
}); 
```

当然，您仍然需要确保原始`[1, ... 20]`数组是正确的长度来打乱所有问题，因此最好根据问题/答案集合的长度自动生成数组。

您可以使用 的修改版本来做到这一点`shuffle()`，其中整数序列在被洗牌之前生成（毫无疑问存在更好的算法）。

```
var shuffle = function(n) {
    var v = [];
    for(var i=0; i<n; i++) {
        v.push(i);
    }
    for (var j, x, i = v.length; i; j = parseInt(Math.random() * i), x = v[--i], v[i] = v[j], v[j] = x);
    return v;
};

var $questions = $('.Questions'),
    $answers = $('.answers'),
    randorder = shuffle(Math.min($questions.length, $answers.length));//in case questions and answers are different lengths we choose the lower length.

$.each(randorder, function(i, r) {
    $questions.eq(i).addClass('question' + r);
    $answers.eq(i).addClass('answer' + r);
}); 
```

注意：`shuffle()`返回一个从 0 到 n 的打乱的整数数组，而不是 1 到 n，这可能是原始问题的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T18:07:43.393

```
var index = 0;

// Runs 20 times, index starts at = 0
$('.Questions').each(function() {
    $(this).addClass('question' + (randorder[index++]));
});

// Run 20 times, index starts at 20
// index = 0 << You need this.
$('.answers').each(function() {
    // randorder[index++] << index = 20, doesn't exist in your array, hence undefined
    $(this).addClass('answer' + (randorder[index++]));
}); 
```

我试图展示的是您使用的是相同的索引，但从未将其重置为 0，因此您不断地从 0 计数到 20 的迭代。正确的解决方案是在第二个之前添加 index = 0 。每个（..）;

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T17:18:24.650

索引用于问题，增量后您可能会得到未定义的答案 $.each。检查索引值。

谢谢

# android - Android 编程：HTTP GET 请求不起作用

> ID：13649888
> 
> 赞同：0
> 
> 时间：2012-11-30T17:14:54.630
> 
> 标签：android, post, https, get, request

我需要从我自己的服务器中提取一个 GET 请求，以便从网络中提取，然后使用 TextView 显示在屏幕上。

我已经设置了一个 GET 请求。

```
public class GetMethodEx {

public String getInternetData() throws Exception{
        BufferedReader in = null;
        String data = null;
        try
        {
            HttpClient client = new DefaultHttpClient();
            URI website = new URI("http://www.mybringback.com");
            HttpGet request = new HttpGet();
            request.setURI(website);
            HttpResponse response = client.execute(request);
            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String l = "";
            String nl = System.getProperty("line.separator");
            while ((l = in.readLine()) !=null){
                sb.append(l + nl);
            }
            in.close();
            data = sb.toString();
            return data;        
        } finally{
            if (in != null){
                try{
                    in.close();
                    return data;
                }catch (Exception e){
                    e.printStackTrace();
                }
            }
        }
} 
```

}

我已经在我的主线程上设置了提取信息并将其显示在文本视图中。

```
public class Home extends Activity {

    TextView httpStuff;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.httpexample);
        httpStuff = (TextView) findViewById(R.id.tvhttp);
        GetMethodEx test = new GetMethodEx();
        String returned;
        try {
            returned = test.getInternetData();
            httpStuff.setText(returned);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

但是，Textview 似乎没有改变？

有人能帮助我吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:32:02.943

安卓操作系统 > = 3.0

不允许`NetworkRequest`在主 UI 线程上。

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)调用 webrequest。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:32:19.713

如果您想从 Ui Thread 进行任何网络操作，请使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)更改您的代码：

```
public class Home extends Activity {

    TextView httpStuff;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.httpexample);
        httpStuff = (TextView) findViewById(R.id.tvhttp);
       new LongOperation().execute("");
    }
private class LongOperation extends AsyncTask<String, Void, String> {

      @Override
      protected String doInBackground(String... params) {
        GetMethodEx test = new GetMethodEx();
        String returned;
        try {
            returned = test.getInternetData();

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
            return returned;
      }      

      @Override
      protected void onPostExecute(String result) {    
        // Update Ui here    
         httpStuff.setText(result);       
      }

} 
```

}

# eclipse - Maven 没有找到 scala 测试

> ID：13649893
> 
> 赞同：11
> 
> 时间：2012-11-30T17:15:16.470
> 
> 标签：eclipse, scala, maven

我有一个 scala 测试类，但是当我尝试使用 Maven 目标“测试”运行时，测试没有运行。我收到 Maven 消息“没有要运行的测试”。即使测试位于 scala 测试类中。我需要添加额外的配置吗？

这是我的包设置：

![在此处输入图像描述](../Images/5d845f6f891cc7d81c4446f07c7c8996.png)

这是针对 pom 文件运行时 Maven“测试”目标的输出：

> [INFO] 正在扫描项目... [INFO]
> [信息] --------------------------------------------- ------------------------- [INFO] 构建 scala.maven.test 0.0.1-SNAPSHOT [INFO] -------- -------------------------------------------------- -------------- [INFO] [INFO] --- maven-resources-plugin:2.4.3:resources (default-resources) @ scala.maven.test --- [警告] 使用平台编码（实际上是 Cp1252）复制过滤后的资源，即构建依赖于平台！[INFO] 复制 0 资源 [INFO] [INFO] --- maven-scala-plugin:2.9.1:add-source (scala-compile-first)@scala.maven.test --- [INFO] 添加源目录: C:\workspaces\29112012\scala.maven.test\src\main\scala [INFO] 添加测试源目录：C:\workspaces\29112012\scala.maven.test\src\test\scala [INFO] [INFO ] --- maven-scala-plugin:2.9.1:compile (scala-compile-first) @ scala.maven.test --- [错误] C:
> 
> -------------------------------------------------- ----- 测试 -------------------------------------------- ------------ 没有要运行的测试。
> 
> 结果 ：
> 
> 测试运行：0，失败：0，错误：0，跳过：0
> 
> [信息] --------------------------------------------- ------------------------- [信息] 构建成功 [信息] ----------------- -------------------------------------------------- ----- [INFO] 总时间：11.354s [INFO] 完成时间：11 月 30 日星期五 16:57:05 GMT
> 
> ## 2012 [INFO] 最终内存：7M/17M [INFO]

这是我的 pom.xml ：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>scala.maven.test</groupId>
  <artifactId>scala.maven.test</artifactId>
  <version>0.0.1-SNAPSHOT</version>

    <build>
        <pluginManagement>
            <plugins>
                <plugin>
                    <groupId>org.scala-tools</groupId>
                    <artifactId>maven-scala-plugin</artifactId>
                    <version>2.9.1</version>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>2.0.2</version>
                </plugin>
                <!--This plugin's configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself.-->
                <plugin>
                    <groupId>org.eclipse.m2e</groupId>
                    <artifactId>lifecycle-mapping</artifactId>
                    <version>1.0.0</version>
                    <configuration>
                        <lifecycleMappingMetadata>
                            <pluginExecutions>
                                <pluginExecution>
                                    <pluginExecutionFilter>
                                        <groupId>
                                            org.scala-tools
                                        </groupId>
                                        <artifactId>
                                            maven-scala-plugin
                                        </artifactId>
                                        <versionRange>
                                            [2.9.1,)
                                        </versionRange>
                                        <goals>
                                            <goal>add-source</goal>
                                            <goal>compile</goal>
                                            <goal>testCompile</goal>
                                        </goals>
                                    </pluginExecutionFilter>
                                    <action>
                                        <ignore></ignore>
                                    </action>
                                </pluginExecution>
                            </pluginExecutions>
                        </lifecycleMappingMetadata>
                    </configuration>
                </plugin>
            </plugins>
        </pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.scala-tools</groupId>
                <artifactId>maven-scala-plugin</artifactId>
                <executions>
                    <execution>
                        <id>scala-compile-first</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>add-source</goal>
                            <goal>compile</goal>
                        </goals>
                    </execution>                                    
                    <execution>
                        <id>scala-test-compile</id>
                        <phase>process-test-resources</phase>
                        <goals>
                            <goal>testCompile</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

<dependencies>
  <dependency>
    <groupId>org.scalatest</groupId>
    <artifactId>scalatest_2.9.0-1</artifactId>
    <version>2.0.M5</version>
</dependency>
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.11</version>
</dependency>
</dependencies>

</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-01-19T11:49:46.207

尽管这是一个很晚的回复，但我写了它希望有人可以从中受益，以防他们的 scala 单元测试没有被发现。主要和沉默的罪魁祸首之一是测试类的绝对路径。如果路径上任何目录的名称中有空格，scalatest 不会选择它。重命名此类目录以成功运行单元测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T17:56:39.790

你的测试类名称是什么？Maven 可能非常挑剔，默认情况下我认为它要求类名以“Test”结尾。

请参阅我的上一篇文章： [Maven 不会运行测试](https://stackoverflow.com/questions/11072484/maven-wont-run-tests/11072557#11072557)

# ruby-on-rails - Ruby on Rails fullcalendar-rails

> ID：13649894
> 
> 赞同：0
> 
> 时间：2012-11-30T17:15:18.183
> 
> 标签：ruby-on-rails, fullcalendar

我正在尝试使用 bokmann/fullcalendar-rails。它是使用 arshaw/fullcalendar 的宝石。

我的 iMac 上有带有 Sqlite 的示例应用程序。当我将代码放入自己的应用程序时，日历显示正常，但我看不到任何事件。

问题： 1) Postgres 应该和 Sqlite 一样工作还是我需要做一些调整？2) 只要​​我有所有必填字段，是否可以在事件表中添加一些额外的字段？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T14:15:17.227

我发现了问题。第一个来自示例代码，它适用于 Sqlite，但不适用于 Postgres。第二行有效。

```
 scope :between, lambda {|start_time, end_time|
{:conditions => ["? < starts_at < ?", Event.format_date(start_time), Event.format_date(end_time)] }

scope :between, lambda {|start_time, end_time|
{:conditions => ["? < starts_at and starts_at < ?", Event.format_date(start_time), Event.format_date(end_time)] } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:31:03.413

postgres 应该与 Sqlite 一样工作 - 只要您通过 Rails 框架完成所有操作，您就不必对应用程序进行任何更改。

示例应用程序是否在种子文件中附带一些示例事件，您需要将这些事件导入新应用程序？您是否真的在新应用程序中有任何您应该看到的事件？如果有疑问，请加载 Rails 控制台并查看表格中的内容：

```
rails console
Event.all # or whatever your model is called. 
```

...看看会发生什么。

# c - 优化下三角矩阵转置

> ID：13649897
> 
> 赞同：0
> 
> 时间：2012-11-30T17:15:32.303
> 
> 标签：c, optimization

我必须优化以下函数，使其运行得更快：注意（这是一个较低的三角形转置）

```
void trans(int ** source, int** destination)
{
    for (int i = 0 ; i < sizee ; i ++) 
    { 
        for (int j = i +1 ; j < sizee ; j ++) 
        {
            destination[i][j]= source[j][i];
        } 
    }
} 
```

我知道对源的访问没有空间局部性，因为它是由列访问的，但我不明白我将如何实现这一点。任何帮助表示赞赏。谢谢。

编辑：我尝试平铺，虽然运行时间有所改善，但优化的转置产生了错误的结果：

```
#define b 2
for (int ii = 0 ; ii < sizee ; ii += b) { 
    for (int jj = ii +1 ; jj < sizee ; jj +=b) {
        for(int i = ii; i < std::min(ii+b-1, sizee); i++)
        {
            for(int j = jj; j < std::min(jj+b-1, sizee); j++)
            {
        destination[i][j]= source[j][i];
            }
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:19:25.847

进行缓存友好转置算法的一种方法是平铺数据：

```
- for each square tile
    - load a square tile from source into a temporary buffer
    - transpose tile in-place
    - write out transpose tile to its correct location in dest 
```

选择切片大小，使其舒适地放入缓存中。

为了进一步优化，您可以使用就地平铺转置例程 - 您可以对例如 8x8 或 16x16 就地转置进行大量微优化。

* * *

*注意：此答案是为问题的原始版本提供的，当时要求部分转置并不明显。我将答案留在这里，因为它在下面有一些有用的评论。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:47:05.077

您可以从反转循环开始。放在`j`外面和`i`里面。原因如下：以下位置在内存中彼此相邻：

```
source[j][0];
source[j][1];
source[j][2];
source[j][3]; 
```

但这些位置不是：

```
source[0][i];
source[1][i];
source[2][i];
source[3][i]; 
```

CPU 完成对寄存器的读`source[j][0]`入的那一刻，您的 L1 高速缓存中就有了整个高速缓存行的数据。通过让您的读取在地址空间上线性进行而不是分散读取来利用这一点。

您也可以[展开您的循环](http://en.wikipedia.org/wiki/Loop_unwinding)。当您可以在没有分支的情况下执行大量指令时，CPU 会喜欢它。

```
 for (int j = i +1 ; j < sizee ; j += 8) 
    {
        destination[i][j]= source[j][i];
        destination[i][j+1]= source[j+1][i];
        destination[i][j+2]= source[j+2][i];
        destination[i][j+3]= source[j+3][i];
        destination[i][j+4]= source[j+4][i];
        destination[i][j+5]= source[j+5][i];
        destination[i][j+6]= source[j+6][i];
        destination[i][j+7]= source[j+7][i];
    } 
```

如果您的 CPU 具有预取指令，那么您可以在完成当前内存块之前要求它开始加载下一行数据。

# javascript - Webgl 向量数组

> ID：13649901
> 
> 赞同：5
> 
> 时间：2012-11-30T17:15:44.570
> 
> 标签：javascript, vector, webgl

我正在尝试使用 JavaScript 和 Webgl 制作三角形的立方体。立方体将使用使用数组的面边缘顶点结构，但是当我使用数组时，屏幕上没有任何内容。这就是我声明数组的方式。

```
function Vector(x,y,z){
this.x = x; 
this.y = y;
this.z = z;
}

var V = new Array;
V[0] = new Vector(0.0,  1.0,  0.0);
V[1] = new Vector(-1.0, -1.0,  0.0);
V[2] = new Vector(1.0, -1.0,  0.0);

function initBuffers() {
    triangleVertexPositionBuffer = gl.createBuffer();
    gl.bindBuffer(gl.ARRAY_BUFFER, triangleVertexPositionBuffer);
    var vertices = [
        V[0],
        V[1],
        V[2]
    ];
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
    triangleVertexPositionBuffer.itemSize = 1;
    triangleVertexPositionBuffer.numItems = 3; 
```

如果有人可以提供帮助，我不确定为什么它不会绘制到屏幕上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:44:44.007

问题是以下行：

```
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW); 
```

`new Float32Array(vertices)`正在回归`[NaN, NaN, NaN]`。这是因为`Float32Array`构造函数需要一个`Number`s 数组而不是一个`Vector`s 数组。

您需要传递s`new Float32Array()`的单个一维数组`Number`

如果要修复它，则必须编写一个函数将`Vector`s 数组转换为`Float32Array`. 像这样的东西：

```
function vectorsToFloatArray(vertices) {
    var numbers = [];

    for(var i = 0; i < vertices.length; i++) {
        numbers.push(vertices[i].x);
        numbers.push(vertices[i].y);
        numbers.push(vertices[i].z);
    }

    return new Float32Array(numbers);
} 
```

并记得更新`gl.bufferData()`和项目大小：

```
 gl.bufferData(gl.ARRAY_BUFFER, vectorsToFloatArray(vertices), gl.STATIC_DRAW);
    triangleVertexPositionBuffer.itemSize = 3; 
```

# c++ - 多行原始字符串文字作为预处理器宏参数

> ID：13649910
> 
> 赞同：9
> 
> 时间：2012-11-30T17:16:01.317
> 
> 标签：c++, c++11

多行原始字符串文字可以作为预处理器宏的参数吗？

```
#define IDENTITY(x) x

int main()
{
    IDENTITY(R"(
    )");
} 
```

此代码不能在 g++4.7.2 和 VC++11 (Nov.CTP) 中编译。
它是编译器（词法分析器）错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:26:12.300

多行宏调用是合法的 - 因为您使用的是应该编译的原始字符串文字

有一个已知的 GCC 错误：

[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52852](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=52852)

如果您一直在使用常规（非原始）字符串，那将是非法的。

这应该已经编译：

```
printf(R"HELLO
    WORLD\n"); 
```

但不是这个：

```
printf("HELLO
    WORLD\n"); 
```

这应该编码为

```
printf("HELLO\nWORLD\n"); 
```

如果在 HELLO 和 WORLD 之间有新的线路，或者作为

```
printf("HELLO "
    "WORLD\n"); 
```

如果不打算插入新行。

你想在你的文字中换行吗？如果是这样，那么你不能使用

```
 IDENTITY("(\n)"); 
```

C 编译器文档位于

```
http://gcc.gnu.org/onlinedocs/cpp.pdf 
```

在第 3.3 节（宏参数）中指出

```
"The invocation of the macro need not be 
restricted to a single logical line—it can cross 
as many lines in the source file as you wish." 
```

# mysql - MySQL 排序规则问题

> ID：13649919
> 
> 赞同：1
> 
> 时间：2012-11-30T17:16:34.233
> 
> 标签：mysql, database, character-encoding

在我的公司，数据库中的表创建得很差。每个表都有不同的排序规则和字符集。

当然，这非常糟糕，但它会使查询失去很多性能，直到服务器崩溃（它甚至不是一个很好的数据库......）。

我想知道是否有任何好的 MySQL 工具、命令或程序来转换表排序规则和字符集。

仅仅执行alter table 并执行convert 就是制动特殊字符。这是正常的还是我做错了什么？

**编辑：** 例如：我有一个带有 uft8 整理的表格财务和一个带有拉丁瑞典语的表格费用。每个表有 1000 到 5000 行。以下查询大约需要 15 秒才能执行：

```
select ex.* from expense ex
   inner join finance fin on fin.ex_id = ex.id 
```

当它们具有相同的排序规则时，使用更大的表执行更复杂的查询会运行得更快。

**编辑2：** 数据库中的另一个错误：行ID都是varchar（15），而不是int。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:59:46.587

我知道继承那些认为“整理”是某种疾病的人创建的遗留模式的乐趣。

最好的选择是使用良好的 ole' mysqldump 将表及其数据导出到 SQL 转储文件。然后手动修改转储文件中的create语句来设置字符集和排序规则。我是“utf8”的忠实粉丝。如果转储文件很大，请使用命令行工具`sed`来有效地编辑文件，而无需在编辑器中打开它。

然后删除现有表重新导入修改后的转储。

根据我的经验，您这样做的任何其他方式都可能是掷骰子。

这可能是将它们全部转换为相同的存储引擎或将您的 MySQL 服务器升级到 5.5 的好时机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T18:13:02.513

我不建议使用“工具”来解决这个问题。

**在您做任何事情之前转储您的数据库以进行备份，以防万一您搞砸了；）**

您可以通过两种方式简化字符集和排序规则

**方法 1：移动数据**

*   创建一个全新的数据库，在所有表中配置正确的字符集和排序规则

*   用 INSERT SELECT 语句填充新表，例如

    插入到`newdatabase`. `table`选择 * 从`olddatabase`。`table`

MySQL 会自动将您的数据转换为正确的字符集

**方法2：改变你的表**

如果更改现有表的字符集，所有现有内容也将被转换

例如

旧桌子

```
CREATE TABLE `myWrongCharsetTable` (
  `name` varchar(255) COLLATE latin1_german1_ci NOT NULL DEFAULT ''
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COLLATE=latin1_german1_ci; 
```

放一些数据做demo

```
INSERT INTO `myWrongCharsetTable` (`name`) VALUES ( 'I am a latino string' );
INSERT INTO `myWrongCharsetTable` (`name`) VALUES ( 'Mein Name ist Müller' );
INSERT INTO `myWrongCharsetTable` (`name`) VALUES ( 'Mein Name ist Möller' );

SELECT * FROM myWrongCharsetTable INTO outfile '/tmp/mylatinotable.csv'; 
```

在 UTF-8 控制台上，我这样做

```
# cat /tmp/mylatinotable.csv
I am a latino string
Mein Name ist M▒ller
Mein Name ist M▒ller 
```

对，奇怪的字符集..这是在 utf-8 控制台上显示的 latin 1

```
# cat /tmp/mylatinotable.csv | iconv -f latin1 -t utf-8
I am a latino string
Mein Name ist Müller
Mein Name ist Möller 
```

是的，一切都好

**那么我现在该如何解决这个问题？**

```
ALTER TABLE myWrongCharsetTable
    MODIFY name varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL DEFAULT '', 
    DEFAULT CHARSET = utf8 COLLATE utf8_unicode_ci; 
```

就是这样 ：）

再次写入outfile

```
mysql> SELECT * FROM myWrongCharsetTable INTO outfile '/tmp/latinoutf8.csv';
Query OK, 3 rows affected (0.01 sec)

mysql> exit
Bye
dbmaster-001 ~ # cat /tmp/latinoutf8.csv

I am a latino string
Mein Name ist Müller
Mein Name ist Möller 
```

工作，一切都很好，我们很高兴

编辑：

其实还有一种方法

**方法 3：转储、修改和重新加载数据**

如果您擅长 sed 和 awk，您可以自动执行此操作，或手动编辑文件

```
# dump the structure, possibly routines and triggers
mysqldump -h yourhost -p -u youruser --no-data --triggers --skip-comments --routines yourdatabase > database_structure_routines.sql

# dump the data
mysqldump -h yourhost -p -u youruser --no-create-info --skip-triggers --skip-routines yourdatabase > database_data.sql 
```

现在`database_structure_routines.sql`在您选择的编辑器中打开并根据需要修改表格

我建议在您的转储文件中删除所有评论，例如 /*!40101 SET character_set_client = utf8 */ 因为这可能会覆盖表默认值

完成后，创建一个新的数据库和结构

```
mysql > CREATE DATABASE `newDatabase` DEFAULT CHARSET utf8 COLLATE utf8_unicode_ci;
mysql > use `newDatabase`
mysql > ./database_structure_routines.sql; 
```

不要忘记重新检查您的表格

```
mysql > SHOW CREATE TABLE `table`; 
```

如果没关系，您可以重新导入数据，字符集转换将自动完成

```
mysql -h yourhost -p -u youruser newDatabase < database_data.sql 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:59:16.930

您可以尝试使用 CONVERT 或 CAST 来更改字符集 - 创建一个新列并使用 CAST 用新的更正字符集填充新列。
[http://dev.mysql.com/doc/refman/5.0/en/charset-convert.html](http://dev.mysql.com/doc/refman/5.0/en/charset-convert.html)

# bash - ls 的内容出现在输出中间

> ID：13649920
> 
> 赞同：2
> 
> 时间：2012-11-30T17:16:37.847
> 
> 标签：bash

在 echo $() 中包装 bash 脚本调用时，我遇到了一个非常奇怪的情况。这很奇怪，我不知道要呈现什么代码，所以我将描述一般情况。我有一个脚本，我们称之为“run.sh”，它有一些输出。这通常格式化得很好，带有空格和换行符。

我正在尝试将此输出与我之前运行一次时得到的值进行比较。为此，代码通过检查这两个值是否相同，将“新”值与旧值进行比较，即：

```
expression=$(./runProcess.sh "$process");
expected=$(cat UnitTests/expect-process-$process);
if [ "$expression" == "$expected" ]; then 
```

显然，要获得“旧”值以与我需要`$(./runProcess.sh)`手动计算的未来测试进行比较。当我这样做时，我会得到一个空白明显更少的输出版本。然而它显然是错误的，因为它的内容`ls`出现在它的中间。我的意思是我得到以下类型的运行这两个命令的输出：

```
./runProcess.sh g,g:

R2With2Gluons =

    + ncol*i_*pi_^2*A*g^2 * (
       - 17/24*d_(mu1,mu2)*d_(m1,m2)*p1.p1
       - 31/8*d_(mu1,mu2)*d_(m1,m2)*p1.p2
       - 17/24*d_(mu1,mu2)*d_(m1,m2)*p2.p2
       + 7/12*d_(m1,m2)*p1(mu1)*p1(mu2)
       + 1/24*d_(m1,m2)*p1(mu1)*p2(mu2)
       + 89/24*d_(m1,m2)*p1(mu2)*p2(mu1)
       + 7/12*d_(m1,m2)*p2(mu1)*p2(mu2)
       );

 0.01 sec out of 0.01 sec

echo $(./runProcess.sh g,g):
R2With3Gluons = + coeff(m1,m2,m3)*ncol*pi_^2*A*g^3 Auto Diagrams UnitTests colourCalc.frm form.set functions.frm output.frm process.frm process.mid qgraf2form.frm qgrafProcessor.py runProcess.sh runProcesses.sh test vertices.frm ( + 35/24*d_(mu1,mu2)*p1(mu3) - 35/24*d_(mu1,mu2)*p2(mu3) - 35/24*d_(mu1,mu3)*p1(mu2) + 35/24*d_(mu1,mu3)*p3(mu2) + 35/24*d_(mu2,mu3)*p2(mu1) - 35/24*d_(mu2,mu3)*p3(mu1) ); 0.40 sec out of 0.40 sec 
```

这是ls：

```
ls:
Auto              form.set          process.mid       runProcesses.sh
Diagrams          functions.frm     qgraf2form.frm    test
UnitTests         output.frm        qgrafProcessor.py vertices.frm
colourCalc.frm    process.frm       runProcess.sh 
```

如有必要，我可以提供确切的例子，但我希望这足以说明问题。为什么这可能会发生？我在 OS X Mountain Lion 上使用 bash。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:28:37.903

使用更多报价！！！

尝试：

```
echo "$(./run.sh)" 
```

反而。（是的，带引号）。

尝试：

```
old=$(./run.sh)
echo "$old" 
```

您将获得正确的输出（带`$old`引号）。现在，关于您的测试，按照 sampson-chen 的建议使用：

```
[[ "$old" == "$(./run.sh)" ]] 
```

（分配变量时不需要引用变量或命令替换`old`，但是，作为一般规则，您可以**每次**都使用引号）。（（请参阅 Gordon Davisson 对这篇文章的出色评论，我实际上已经投了赞成票，其中有一些关于 glob 和引用变量的警告`[[ ... ]]`））。

**编辑。**当您编辑帖子时，我发现您使用的是低效的`cat`. 代替：

```
expected=$(cat UnitTests/expect-process-$process) 
```

请用

```
expected=$(< "UnitTests/expect-process-$process") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:21:43.350

没有你的确切脚本很难说，但对于初学者来说，你的比较：

```
old == $(./run.sh); 
```

应该：

```
if [[ "$old" == "$(./run.sh)" ]]; then 
```

# full-text-search - 银条过滤器搜索

> ID：13649929
> 
> 赞同：0
> 
> 时间：2012-11-30T17:16:51.407
> 
> 标签：full-text-search, silverstripe

我的 silverstripe 站点中有一个新闻部分，我想使用 Silverstripe 的 FulltextSeach 功能：

```
FulltextSearchable::enable(); 
```

到目前为止效果很好。但我希望我的结果中只有 NewsPages。有没有办法过滤搜索，以便您只获得 certin pageType 作为结果？

在此先感谢，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:22:13.647

这是未经测试的代码，但我刚刚查看了**sapphire/search/FulltextSearchable.php的源代码**

在 mysite/_config.php 你可以添加：

```
FulltextSearchable::enable(array()); 
```

这应该删除默认搜索的类 SiteTree（所有页面）和 File

然后你可以在 mysite/_config.php 中添加一个对象扩展：

```
Object::add_extension('NewsPage', "FulltextSearchable('Title,MenuTitle,Content,MetaTitle,MetaDescription,MetaKeywords')"); 
```

以下是 FulltextSearchable.php 文件中的注释

```
/**
 * Enable the default configuration of MySQL full-text searching on the given data classes.
 * It can be used to limit the searched classes, but not to add your own classes.
 * For this purpose, please use {@link Object::add_extension()} directly:
 * <code>
 * Object::add_extension('MyObject', "FulltextSearchable('MySearchableField,'MyOtherField')");
 * </code>
 * 
 * Caution: This is a wrapper method that should only be used in _config.php,
 * and only be called once in your code.
 * 
 * @param Array $searchableClasses The extension will be applied to all DataObject subclasses
 *  listed here. Default: {@link SiteTree} and {@link File}.
 */ 
```

# android - Phonegap + Eclipse + Cordova -- 没有 config.xml

> ID：13649930
> 
> 赞同：5
> 
> 时间：2012-11-30T17:16:52.313
> 
> 标签：android, cordova

我刚刚在 Eclipse 中创建了一个 Android 项目，其中包含预期的所有 phonegap 和 cordova 文件。但是，我没有这样的目录，因此也没有 config.xml。根据 Apache Cordova 文档，它应该位于：app/res/xml/config.xml。

我的文件夹结构如下，对于 /res 目录：

```
/res/drawable-hdpi
/res/drawable-ldpi
/res/drawable-mdpi
/res/drawable-mdpi
/res/layout
- /res/layout/main.xml
/res/values
- /res/layout/strings.xml 
```

我做错了什么或者我错过了什么步骤？我希望我已经提供了足够的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:11:33.717

只需手动创建 /res/xml/ 文件夹。然后使用文本编辑器创建 config.xml 并将其用作模板：[https ://github.com/phonegap/phonegap/blob/master/lib/android/xml/config.xml](https://github.com/phonegap/phonegap/blob/master/lib/android/xml/config.xml)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-28T14:52:11.740

每当我们创建一个 cordova 项目时，它`config.xml`都会自动创建。我们需要检查排除列表中是否有任何文件夹。

转到`Build path`-> `Resources`-> 检查排除的资源。

从项目中删除它们并构建项目。您将`config.xml`能够`www`在`Project/Package Explorer`.

# android - 检查上传到服务器的金额数据

> ID：13649935
> 
> 赞同：1
> 
> 时间：2012-11-30T17:17:01.643
> 
> 标签：android, android-asynctask, android-progressbar

如何检查每次上传到服务器的数据量，这是我在 AsyncTask 中调用的代码

```
public  String conxDatosInPost(String Direccion, ArrayList<NameValuePair> Parametros) throws Exception {
  BufferedReader in = null;
  try {
    HttpClient client = ClienteHttp();
    HttpPost request = new HttpPost(Direccion);
    UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(Parametros);
    request.setEntity(formEntity);
    HttpResponse response = client.execute(request);
    //long logitud = response.getEntity().getContentLength();
    in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
    StringBuffer sb = new StringBuffer("");
    String line = "";
    String NL = System.getProperty("line.separator");
    while ((line = in.readLine()) != null) {
     sb.append(line + NL);
    } 
    in.close();
    String result = sb.toString();
    Log.d("El resultado de cnxposin es :-----------  ",  result +"fn");
    return result;
  } finally {
    if (in != null) {
     try {
      in.close();
     } catch (IOException e) {
      e.printStackTrace();
     }
    }
  }
} 
```

这是我的课程**CLienteHttp();**

```
private  HttpClient ClienteHttp() {
  if (mHttpCliente == null) {
     public static final int HTTP_TIMEOUT = 30 * 1000; // milliseconds
    mHttpCliente = new DefaultHttpClient();
    final HttpParams params = mHttpCliente.getParams();
    HttpConnectionParams.setConnectionTimeout(params, HTTP_TIMEOUT);
    HttpConnectionParams.setSoTimeout(params, HTTP_TIMEOUT);
    ConnManagerParams.setTimeout(params, HTTP_TIMEOUT);
  }
  return mHttpCliente;
} 
```

这是我的类 asyncTask

```
public class NuevoPostImagen extends AsyncTask<String, Integer, String>{
  @Override
  protected String doInBackground(String... params) {
    objAcceso = new AccesoBd();
    String jsRes="";
    SharedPreferences userDetails = getParent().getSharedPreferences("MisPreferencias", MODE_PRIVATE);
    ArrayList<NameValuePair> ParametrosDeEnvio = new ArrayList<NameValuePair>();
    ParametrosDeEnvio.add(new BasicNameValuePair("from",Integer.toString(userDetails.getInt("Id",0))));
    ParametrosDeEnvio.add(new BasicNameValuePair("idrecurso",Integer.toString(idEvento)));
    ParametrosDeEnvio.add(new BasicNameValuePair("texto","nada"));
    ParametrosDeEnvio.add(new BasicNameValuePair("titulo",txtFTitulo.getText().toString()));
    ParametrosDeEnvio.add(new BasicNameValuePair("imageFile",sImagenBsase64));
    try{
      //here 
      String jes=objAcceso.conxDatosInPost(params[0],ParametrosDeEnvio);
      jsRes = "ok";
    } catch (Exception e) {
      // TODO: handle exception
      e.printStackTrace();
    }finally{return jsRes;}
  }
  @Override
  public void onProgressUpdate(Integer... args){
    Pro.setProgress(args[0]);
  }
  @Override
  protected void onPostExecute( String result) {
    Pro.dismiss();
    if (result.toString().equals("ok")){
      LlenarEvento();
      dOpciones.dismiss();
      dHacerFoto.dismiss();
    }
  }
  @Override
  protected void onPreExecute() {
    Pro = ProgressDialog.show(getParent(), "", "Enviando",true,true);
    Pro.setCancelable(false);
  }
} 
```

我可以用现有代码更新我的进度条吗？

一旦cliente.execute（httppost）。

我想知道如何放置一个侦听器或其他东西来检查上传的字节数每秒或每次上传它们时更新？我需要根据上传的数量更新我的进度条。

请问，我可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:33:10.030

您可以为此使用异步任务。你必须超越 3 种方法。

`doinbackground() onpreexecute() onpostexecute() onProgressUpdate` 我认为这将帮助您了解如何去做。[如何在android中实现文件上传进度条](https://stackoverflow.com/questions/6924447/how-to-implement-file-upload-progress-bar-in-android)

# ruby-on-rails - 使用 best_in_place gem 如何为选择标签指定 nil 值？

> ID：13649938
> 
> 赞同：1
> 
> 时间：2012-11-30T17:17:06.137
> 
> 标签：ruby-on-rails, ruby-on-rails-3, best-in-place

[这个问题](https://stackoverflow.com/questions/5589652/rails-3-best-in-place-editing)的答案为我提供了一个很好的路线图，说明如何使用关联集合中的数据生成选择标签。

这很好用，一切都很好。

我现在遇到的问题是，如何处理空集合？

使用常规`:type => :input`，我可以指定`:nil => "Some nil message here"`。

但这似乎不适用于集合，更糟糕的是，当集合中没有任何内容时，它似乎正在显示一些整数（即`1`和`2`）。我假设这些是集合中先前显示的对象的 ID，但出于明显的原因，这没有多大意义。

关于如何使用此宝石处理空集合的任何想法？

谢谢。

**编辑1：**

一种替代方法是将我原来`best_in_place`的辅助标签放在一个`if`声明中，用于当集合不为零时。但是，当它为空白时，用户如何编辑它？也许没有办法处理这个问题，因为这将涉及在集合中创建一个新记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:29:27.197

我对选择标签中的空选项使用“解决方法”，它可以帮助您：

```
:type => :select, :collection => @my_colletion || [[I18n.t('common.none'), -1]] 
```

当`@my_colletion`为 nil 时，它显示一个名为 'None' 且 id = -1 的选项（这在后端处理起来还不错）。

这部分代码假设`@my_collection`是一个数组数组，如`[ [key, value], [key, value], ... ]`OR nil。

虽然，如果您希望您的`MyModel.all`收藏符合 best_in_place 的条件，您可以使用以下内容：

```
@my_collection = MyModel.all.map{ |object| [object.name, object.value] } 
# => this returns an array like [ [key, value], [key, value], ... ]
# => returns an empty array (NOT nil) if there is no entry in the DB 
```

**关于 -1 id：** 将 -1 id 用作“none”很容易，因为您不需要显式处理值 nil（测试等）。使用 -1 id，您可以使用以下内容：

```
MyModel.where(id: params[:id]).first # => Returns the first object that has the params[:id]
# if params[:id] is -1, it will return nil and not raise an error. 
```

我希望它有帮助:)

# asp.net - 如何将 Kentico 实例复制到本地计算机？

> ID：13649939
> 
> 赞同：3
> 
> 时间：2012-11-30T17:17:11.543
> 
> 标签：asp.net, kentico

我刚刚开始了一个新职位，取代了一位突然离开从事基于 Kentico CMS 的项目的开发人员。我对 ASP 和 Kentico 完全不熟悉，所以这里的答案需要为一个完全的初学者量身定做。我熟悉其他语言（PHP、Ruby、SQL 等），但不知道从哪里开始。

所以，我想要做的是将我们的生产站点（db 和所有）中的所有内容复制到我的本地机器上，这样我就可以更轻松地在它上面进行开发。我已经将 db 导出到一个 SQL 文件中，并将我们 Kentico Instance 文件夹中的所有文件复制到 github，并将其克隆到我的本地计算机上。我认为由于 Kentico 已经“设置”，因此在他们的文档中进行安装过程并不是解决此问题的方法。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-02T19:45:33.590

大卫，基本上有一些“部分”可以在本地运行 Kentico。正如您所提到的，由于 Kentico 已经设置好，您应该可以更轻松地进行操作。

1.  一个包含必要 Kentico 表的数据库（听起来你已经有了这个）
2.  代码库（您复制到 github 的所有代码文件）
3.  您想在其上运行 Kentico 的任何域的有效许可证。该网站是否已经面向公众？您知道您拥有哪些许可证，或者您可以登录您复制所有内容的站点上的 CMS Desk 吗？
4.  为您的本地网站设置 IIS。如果您对此不确定，我可以进一步解释，但基本上您需要添加一个新站点，将其指向您站点的根代码文件夹，并将域设置为您拥有 Kentico 许可证密钥的域。您还需要将应用程序池设置更改为“集成”模式（很可能）并设置适当的 .NET 版本（如果它是 Kentico 的最新版本，则需要 .NET 4.0）
5.  接下来，您需要编辑主机文件以添加域并将其指向您的本地主机 IP 地址。所以添加一行“127.0.0.1 dev.yourdomain.com”或等效的行。
6.  编辑 web.config 文件，以便您的代码可以连接到数据库。您需要相应地编辑连接字符串以指向您机器上的数据库。

完成这些步骤后，您的网站应该像以前一样开始运行。我没有详细介绍所有这些部分，所以请告诉我您遇到的问题，以便我进一步澄清。有关当前情况的更多信息也将有所帮助。

我还要注意一点：如果您需要客户端能够查看您的工作，那么将原始数据库留在 Web 服务器上并（如果可能）远程连接到它很可能会更高效、更容易从您的本地计算机。由于您所做的几乎任何更改都会导致 Kentico 中的数据库更改，因此我发现使用分布式代码库开发 1 个数据库要容易得多。否则，您可能需要不断地用您的更改覆盖其他数据库，这可能很烦人。如果您将数据库留在服务器上并且只是远程连接，您可以只 ftp（或使用 git）将文件推送到您在本地编辑的服务器。

# knockout.js - 在 Knockoutjs 中有条件地绑定一个函数

> ID：13649943
> 
> 赞同：0
> 
> 时间：2012-11-30T17:17:22.520
> 
> 标签：knockout.js

```
<div data-bind="foreach: passengers">                       
<a href="#" data-bind='style: { color: isOwner  ? "orange" : "darkgreen" }, 
text: person_username, click: function() { $root.removePassenger($data, $parent); } '> 
```

假设我有一个这样的模板。仅当 isOwner 为 true 时才应绑定 click 函数。有没有简单/容易的方法来做到这一点？我猜我可以打破完整的 jquery 模板并完成一些工作，但我想知道一个更优雅的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T17:29:07.383

您所要求的——仅在设置某些属性时处理单击事件——是应用程序逻辑。应用程序逻辑不属于视图。它属于视图模型。

当然，您*可以*执行以下操作：

```
click: function() { if ($data.isOwner) $root.removePassenger($data, $parent); } 
```

但是，再一次，这将逻辑放在您的视图中，从关注点分离和调试的角度来看，这是不受欢迎的，它会使您的 HTML 变得丑陋。

我建议这样做：

```
<div data-bind="foreach: passengers">                       
   <a href="#" data-bind='style: { color: isOwner  ? "orange" : "darkgreen" }, 
      text: person_username, click: function() { $root.removePassengerIfApplicable($data, $parent);"</a>
</div> 
```

还有你的 JavaScript：

```
function removePassengerIfApplicable(passenger, parent) {
    if (passenger.isOwner) {
        removePassenger(passenger, parent);
    }
} 
```

***更新***

从您的帖子中不清楚如果 isOwner = false 您不想显示链接。这里有一些更新的代码给你：

```
<div data-bind="foreach: passengers">  
   <div data-bind="if: isOwner">                     
      <a href="#" style="color: orange" 
      text: person_username, click: function() { $root.removePassenger($data, $parent); }"</a>
   </div>
   <div data-bind="if !isOwner()">
      <span style="color: darkgreen" data-bind="text: person_username"></span>
   </div>
</div> 
```

上面的代码如果是 isOwner 则显示一个链接，如果不是，则显示一个纯文本跨度。

# java - 集合优于 ArrayList

> ID：13649945
> 
> 赞同：1
> 
> 时间：2012-11-30T17:17:26.557
> 
> 标签：java, collections

> **可能重复：**
> [使用 Collection 接口创建 ArrayList 对象的多态性有什么好处？](https://stackoverflow.com/questions/3356113/what-is-the-benefit-of-polymorphism-using-collection-interface-to-create-arrayli)

将 Arraylist 定义为 `Collection<User> parameterGroupList = new ArrayList<User>()`over有什么好处`ArrayList<User> parameterGroupList = new ArrayList<User>();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:19:05.270

`parameterGroupList`如果是静态类型`Collection<User>`，用户`parameterGroupList`将只使用 中可用的操作`Collection<User>`，避免使用特定于 的操作`ArrayList`。因此，它使您可以更轻松地替换`ArrayList`到其他集合`LinkedList`，例如将来。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T17:21:38.330

简单地说就是使用**运行时多态的优势。**

您要问的是 Java 101 问题。

# python - 如何访问模板中的请求数据

> ID：13649951
> 
> 赞同：2
> 
> 时间：2012-11-30T17:18:13.120
> 
> 标签：python, python-3.x, bottle

我将瓶子用于玩具应用。这是我第一次接触这个框架。

我很好奇如何从模板内部访问我添加到请求对象的一些键。

做一个天真`{{request.key}}`的会引发一个未定义的异常`request`，所以我猜测该对象没有传递给每个模板上下文。

这是我将在每个视图中访问的信息，所以我认为这是正确的方法，但我并没有确定瓶子的做法。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:36:01.490

您只需将请求添加到模板渲染功能

```
return template('hello_template', name=name, request=request) 
```

渲染模板函数将关键字参数作为模板内的局部变量传递。没有任何内容会传递给您的模板上下文。

# windows - 将大字节流缓冲区发送到另一个进程

> ID：13649955
> 
> 赞同：0
> 
> 时间：2012-11-30T17:18:28.027
> 
> 标签：windows, service, rpc

假设两个进程都作为 Windows 服务运行，那么将字节流从一个 Windows 进程发送到另一个进程的最佳方法是什么？数据由图像缓冲区组成。每个服务都在同一子网上的单独服务器上运行。

接收缓冲区的第二个服务是否应该是 Web 服务（而不是 Windows 服务），即使它永远不会在网站上（仅在内部）被调用？

RPC 是两个 Windows 服务之间通信数据的最佳方法吗？将传递大量数据，性能是关键。

开发语言为 C# 4.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T19:12:25.907

我建议使用套接字。RPC 对套接字的开销很小，除非发送结构化数据，否则不值得付出努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:16:25.630

如果性能是关键，则使用共享内存段。在 MSDN 上`CreateFileMapping`查找。[您可以从http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366551(v=vs.85).aspx)`MapViewOfFile`上的“创建命名共享内存”开始

# javascript - 创建相同脚本的多个实例

> ID：13649960
> 
> 赞同：0
> 
> 时间：2012-11-30T17:18:35.247
> 
> 标签：javascript, jquery

我目前正在构建一个使用 Windows 通过 ajax 加载新内容的网站。允许这些窗口包含与使用相同 javascript 的另一个窗口中相同的页面。目前，我为新窗口分配了一个唯一的 ID，然后将其存储以供以后使用。

加载代码后，该窗口中的所有 id 都会通过向它们添加 unique_id 来进行转换。即“box”变成“box_win1”。然后我通过将这个 id 分配给一个变量将它发送到 javascript，以便它可以在 document.ready 函数中使用。

窗口的伪代码如下：

```
 document.ready{
var temp_id=id+1;
        $("#mybox" + temp_id).val("abc")
    //run some startup stuff
    } 
```

我只是想知道有没有更好的方法来做到这一点。我发现如果我同时打开许多新窗口，temp_id 会发生冲突并转到错误的窗口。

我想知道如何创建代码的实例，但我不确定如何。但是我不能使用全局函数，因为这可能会导致命名冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:26:45.673

把它放到一个函数中

```
function callMe (){

    var temp_id=id+1;
        $("#mybox" + temp_id).val("abc")
    //run some startup stuff

} 
```

你可以在任何地方使用 callMe()

# cakephp - CakePHP Set::extract 在条件中带有特殊字符

> ID：13649963
> 
> 赞同：2
> 
> 时间：2012-11-30T17:18:51.797
> 
> 标签：cakephp, escaping, set, extract

我有一个这样的数组

```
Array
(
[0] => Array
    (
        [Unit] => Array
            (
                [Unit] => ST109347005
                [SplitCnt] => 0
                [UWin] => 
                [Unit>Part] => MOLDTOOLREPAIR
                [Unit>UK1] => MOLDSHELF1
                [Unit>UK2] => 28149813MH001
                [Unit>UK3] => MOLDTOOL
            )

    )
... 
```

并想像这样提取存储在“单元”（例如：ST109347005）中的序列数组

```
$newarray = Set::extract($data,'/Unit[Unit>UK1=MOLDSHELF1][Unit>UK3=MOLDTOOL]/Unit'); 
```

这不起作用，因为 > 是保留字符。我不确定允许它工作的语法是什么。我想它会是这样的（这是行不通的）

```
$newarray = Set::extract($data,'/Unit[Unit\>UK1=MOLDSHELF1][Unit\>UK3=MOLDTOOL]/Unit'); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:38:55.933

最后归结为`Set::matches`，它将`Unit>UK1=MOLDSHELF1`作为条件接收，并使用正则表达式对其进行评估。不支持转义字符，因此`match`将 视为`>`运算符，因此它将失败。

You'll need to rename the keys, at least temporarily for extraction, however when you're already iterating over all the entries you could easily compare the keys manually and skip the renaming and the extraction via `Set::extract`. Ideally you should rename the keys permanently.

# python - 使用 NTLM 获取 AttributeError 的 Python 机械化：HTTPResponse 实例没有属性“__iter__”

> ID：13649964
> 
> 赞同：2
> 
> 时间：2012-11-30T17:19:00.413
> 
> 标签：python, mechanize, ntlm

我正在尝试使用 python-ntlm 和 mechanize 访问通过 NTLM 身份验证保护的站点，但出现此错误。

```
File "build/bdist.macosx-10.6-universal/egg/mechanize/_mechanize.py", line 203, in open
File "build/bdist.macosx-10.6-universal/egg/mechanize/_mechanize.py", line 249, in _mech_open
File "build/bdist.macosx-10.6-universal/egg/mechanize/_mechanize.py", line 304, in _set_response
File "build/bdist.macosx-10.6-universal/egg/mechanize/_response.py", line 521, in upgrade_response
File "build/bdist.macosx-10.6-universal/egg/mechanize/_response.py", line 338, in __init__
File "build/bdist.macosx-10.6-universal/egg/mechanize/_response.py", line 353, in _set_fp
AttributeError: HTTPResponse instance has no attribute '__iter__' 
```

当我使用 urllib2 库时，我能够得到正确的响应。但是由于某种原因，当我尝试使用 mechanize 访问它时它失败了。

这是我的代码。

```
import urllib2
from ntlm import HTTPNtlmAuthHandler

user = '<myusername>'
password = "<mypass>"
url = "https://somesite.com"

passman = urllib2.HTTPPasswordMgrWithDefaultRealm()
passman.add_password(None, url, user, password)
# create the NTLM authentication handler
auth_NTLM = HTTPNtlmAuthHandler.HTTPNtlmAuthHandler(passman)

import mechanize
browser = mechanize.Browser()
handlersToKeep = []

for handler in browser.handlers:
    if not isinstance(handler,
    (mechanize._http.HTTPRobotRulesProcessor)):
        handlersToKeep.append(handler)

browser.handlers = handlersToKeep
browser.add_handler(auth_NTLM)

response = browser.open(url)
print(response.read()) 
```

有谁知道发生了什么？我在这里做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T10:26:58.547

我修补了 mechanize 来解决这个问题：

```
--- _response.py.old    2013-02-06 11:14:33.208385467 +0100
+++ _response.py    2013-02-06 11:21:41.884081708 +0100
@@ -350,8 +350,13 @@
             self.fileno = self.fp.fileno
         else:
             self.fileno = lambda: None
-        self.__iter__ = self.fp.__iter__
-        self.next = self.fp.next
+
+        if hasattr(self.fp, "__iter__"):
+            self.__iter__ = self.fp.__iter__
+            self.next = self.fp.next
+        else:
+            self.__iter__ = lambda self: self
+            self.next = lambda self: self.fp.readline()

     def __repr__(self):
         return '<%s at %s whose fp = %r>' % ( 
```

# node.js - 如何在 Node.js 中设置最大 http 客户端连接数

> ID：13649972
> 
> 赞同：9
> 
> 时间：2012-11-30T17:19:48.080
> 
> 标签：node.js, http

我需要增加我正在编写的模块可用的出站 http 套接字的数量。我知道可以使用以下方法**在全球范围内**执行此操作：

```
// increase max sockets
http.globalAgent.maxSockets = 1000; 
```

在不影响其他模块的情况下创作模块的 maxSocket 限制的最佳模式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:15:56.807

您最好的选择是将代理对象传递给您正在发出的每个 http 和 https 请求，并根据您的喜好配置 maxSockets。这对其他模块没有影响。请参阅[http://nodejs.org/docs/latest/api/http.html#http_http_request_options_callback](http://nodejs.org/docs/latest/api/http.html#http_http_request_options_callback)。

如果您自己使用框架，而不是直接依赖 http 模块，这可能会很困难并且需要一些补丁。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T02:30:15.883

鉴于该设置决定了每个主机有多少并发连接可用，因此无法专门为各个模块设置此设置。但是，您应该做的是确保您没有减少用户已经指定的并发连接数。例如，如果有人将他们的 maxSockets 设置为 5000，而您在模块中将其设置为 1000，则可能会发生不好的事情。我会推荐类似以下的东西

```
var max = 1000;
if(http.globalAgent.maxSockets < max) {
    http.globalAgent.maxSockets = max;
} 
```

# javascript - 选择逗号前的文本字符串，设置为大写

> ID：13649974
> 
> 赞同：3
> 
> 时间：2012-11-30T17:19:55.290
> 
> 标签：javascript, html, arrays, string

[JS 小提琴示例](http://jsfiddle.net/D6eFQ/5/)

好的——我有一个全名字段（姓氏，名字）。返回的数据不是姓氏和名字，而是全名。然后最后打印，先打印。我只想选择姓氏（逗号之前的所有内容），并将其设置为大写。

在我的示例中，我可能正在混合使用 jQuery 和 javascript，我并不肯定——仍然是新手。但是，我在示例中所做的是：

```
function splitLastName(){
var splitNameArray = $('[data-dojo-attach-point|="physcianNameNode"]').split(",");
var lastName = splitNameArray[0];
var firstName = splitNameArray[1];
lastName.wrap('<span class="isUppercase" />');
}​ 
```

基本上，我正在设置该字段的一个变量——我已经测试过它可以准确地抓取我想要它抓取的元素。我将字符串变成一个数组，由逗号字段分割。然后将数组的两部分设置为自己的变量。最后，尝试将 lastName 字符串包装在添加 'isUppercase' 类的跨度中。我知道我做错了什么，这是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T17:29:24.693

```
function splitLastName(){
    $('[data-dojo-attach-point|="physcianNameNode"]').html(function(i, v) {
        var names = v.split(',');
        return '<span class="isUppercase">'  +names[0] + '</span>,' + names[1];
    });
} 
```

[**小提琴**](http://jsfiddle.net/D6eFQ/12/)

[`.html()`文档](http://api.jquery.com/html/#html2)

* * *

`innerHTML`以上是为元素设置新的快速解决方案。如果你想使用正确的 DOM 操作，它就像：

```
function splitLastName() {
    $('[data-dojo-attach-point|="physcianNameNode"]').each(function() {
        var names = $(this).text().split(',');
        $(this).empty().append($('<span>', {
            'class': 'isUppercase',
            text: names[0]
        }), ',' + names[1]);
    });
} 
```

[**小提琴**](http://jsfiddle.net/D6eFQ/14/)

请注意，我正在使用`.each()`，因此无论`$('[data-dojo-attach-point|="physcianNameNode"]')`匹配多个元素还是仅匹配一个元素，上面的代码都将起作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T17:31:56.423

问题是您正在尝试拆分 JQuery 对象。

我已经更新了你的例子：[见这里](http://jsfiddle.net/D6eFQ/13/)

```
function splitLastName(){
    var element = $('[data-dojo-attach-point|="physcianNameNode"]');//find the element
    var html = element.html();//get the contents of the DIV element

    var splitNameArray = html.split(",");//Split the value with comma
    var lastName = splitNameArray[0];//store the last name
    var firstName = splitNameArray[1];//store the first name

    var newHtml = '<span class="isUppercase">' + lastName + '</span>, ' + firstName;//create the new html using the parsed values
    element.html(newHtml);//assign the new html to the original DIV element (overwriting the old)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T17:32:32.710

此行出现问题：

```
var splitNameArray = $('[data-dojo-attach-point|="physcianNameNode"]').split(","); 
```

符号：

```
$('< some name >') 
```

是一个选择元素的 jQuery 选择器。如果您在浏览器的控制台中输入此内容（将 < some name > 替换为您的选择器），您会看到它返回的是一个对象而不是字符串。因此，您的代码正在尝试拆分对象。我不知道字符串的位置（div、span、输入框等），但您需要拉出字符串来进行拆分。如果您的字符串是 div 或 span 中的文本，请使用：

```
var splitNameArray = ($('[data-dojo-attach-point|="physcianNameNode"]').text()).split(","); 
```

因为这将抓取该选择器中包含的字符串，然后对其执行拆分。同样，如果它在输入中，您将需要使用正确的处理程序来获取值：

```
var splitNameArray = ($('[data-dojo-attach-point|="physcianNameNode"]').val()).split(","); 
```

这将从输入中提取值，然后执行拆分。如果您的字符串在 html 中，那么您也可以使用以下符号来获取它：

```
var splitNameArray = ($('[data-dojo-attach-point|="physcianNameNode"]').html()).split(","); 
```

这将拉取 html 并执行相应的拆分操作。

希望这可以帮助。

# java - Java 多维数组 - 如何从微调器中读取值

> ID：13649977
> 
> 赞同：0
> 
> 时间：2012-11-30T17:20:02.903
> 
> 标签：java, android, android-layout, android-spinner

您好，我有 2 个下拉菜单。第一个下拉菜单 [Spin​​ner1] 有 4 个值，第二个 [Spin​​ner2] 有 5 个值。

现在，当用户从第一个下拉列表中选择值并从第二个下拉列表中选择另一个值时，会在屏幕的一部分中显示一个带有 webview 文本的片段。

这是我的代码

```
import android.R.string;
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.webkit.WebView;
import android.widget.AdapterView;

public class WebViewerFragment extends Fragment {

    private WebView mWebView;
    // a two dimensional array representing the data to put in the WebView

String SurgEqui="<html><body><h2>Equipment</h2><ul><li><p>IV catheter :Be certain that IV is in place and flushing easily</p></li></body><html>";

     String[][] mData      = new String[4][5]; 

    /*   String [][]mData={{Surg,Surg,Surg,Surg,Surg},{Surg,Surg,Surg,Surg,Surg}
{Surg,Surg,Surg,Surg,Surg}{Surg,Surg,Surg,Surg,Surg}{Surg,Surg,Surg,Surg,Surg}}

  */

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View mainView = (View) inflater.inflate(R.layout.frag_layout, container, false);
        mWebView = (WebView) mainView.findViewById(R.id.webView1); 
        return mainView;
    }

    public void updateWebView(int firstSelection, int secondSelection) {
         if (firstSelection == AdapterView.INVALID_POSITION || secondSelection == AdapterView.INVALID_POSITION) {
              return;  
         } else {
              if (mWebView != null) {
                   mWebView.loadData(mData[firstSelection][secondSelection], "text/html", null);
              }
         }

    }

} 
```

现在这两个下拉列表有 20 个 html 字符串组合。我如何使用这个数组来存储和检索值。如何将 20 个 HTML 字符串插入到数组中，以便我可以使用 mWebView.loadData(mData[firstSelection][secondSelection] , "文本/html", null); 读取要在 webview 中显示的值的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T04:01:11.227

最好只使用2个数组吗？甚至只有 1 个包含 20 个条目的数组？如果你必须使用你的方法，你到底遇到了什么问题？您评论的内容几乎是正确的：

```
String [][] mData= {
        {Surg,
            Surg,
            Surg,
            Surg,
            Surg},
        {Surg,
            Surg,
            Surg,
            Surg,
            Surg}, //<-- need comma between brackets
        {Surg,
            Surg,
            Surg,
            Surg,
            Surg}, 
        {Surg,
            Surg,
            Surg,
            Surg,
            Surg},
        {Surg,
            Surg,
            Surg,
            Surg,
            Surg}
        }; // <-- don't forget the semicolon 
```

# r - eval(parse(...)) 的具体危险是什么？

> ID：13649979
> 
> 赞同：70
> 
> 时间：2012-11-30T17:20:06.147
> 
> 标签：r, parsing, eval

关于如何避免使用有几个问题`eval(parse(...))`

*   [r-evalparse-经常是次优的](https://stackoverflow.com/questions/11025031/r-evalparse-is-often-suboptimal)
*   [避免臭名昭著的evalparse构造](https://stackoverflow.com/questions/13647046/avoiding-the-infamous-evalparse-construct)

这引发了以下问题：

*   为什么具体应该`eval(parse())`避免？
*   最重要的是，有什么危险？
    *   如果代码没有在生产中使用，会有什么危险吗？（我在想，任何返回意外结果的危险。显然，如果你不小心你正在解析的内容，你会遇到问题。但这比马虎更危险`get()`吗？）

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-30T18:26:21.753

大多数反对的理由*并不是*`eval(parse(...))`因为安全问题，毕竟，没有声称 R 是公开给 Internet 的安全接口，而是因为这样的代码通常在做可以使用不那么晦涩的方法来完成的事情，即更快且更易于人类解析的方法。R 语言应该是高级语言，因此行家（我不认为自己属于该组）的偏好是查看既紧凑又富有表现力的代码。

 *所以危险在于这`eval(parse(..))`是一种绕过知识匮乏的后门方法，而提高这一障碍的希望是人们将改善他们对 R 语言的使用。大门仍然敞开，但希望能够更有表现力地使用其他功能。[Carl Witthoft 今天早些时候提出的问题](https://stackoverflow.com/questions/13647046/avoiding-the-infamous-evalparse-construct)说明了不知道该`get`函数是否可用，[他所链接的问题](https://stackoverflow.com/questions/11025031/r-evalparse-is-often-suboptimal)`[[`暴露了对该函数的行为方式缺乏了解（以及如何`$`比 更受限制`[[`）。在这两种情况下，`eval(parse(..))`都可以构建一个解决方案，但它比替代方案更笨拙且不够清晰。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-12-01T15:05:34.527

只有当您开始对另一个用户传递给您的字符串调用 eval 时，才会真正出现安全问题。如果您正在创建一个在后台运行 R 的应用程序，这是一件大事，但是对于您正在编写自己运行的代码的数据分析，那么您不必担心`eval`对安全性的影响。

不过还有其他一些问题`eval(parse(`。

首先，使用 eval-parse 的代码通常比未解析的代码更难调试，这是有问题的，因为调试软件的难度是最初编写软件的[两倍。](https://en.wikiquote.org/wiki/Brian_Kernighan)

这是一个有错误的函数。

```
std <- function()
{
  mean(1to10)
} 
```

愚蠢的我，我忘记了冒号运算符并错误地创建了我的向量。如果我尝试获取这个函数，那么 R 会注意到问题并抛出一个错误，指出我的错误。

这是 eval-parse 版本。

```
ep <- function()
{
  eval(parse(text = "mean(1to10)"))
} 
```

这*将*来源，因为错误在有效字符串内。只是稍后，当我们开始运行代码时，才会抛出错误。因此，通过使用 eval-parse，我们失去了源时间错误检查能力。

我还认为该函数的第二个版本更难阅读。

eval-parse 的另一个问题是它比直接执行的代码慢得多。比较

```
system.time(for(i in seq_len(1e4)) mean(1:10))
   user  system elapsed 
   0.08    0.00    0.07 
```

和

```
system.time(for(i in seq_len(1e4)) eval(parse(text = "mean(1:10)")))
   user  system elapsed 
   1.54    0.14    1.69 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-12-02T10:44:41.930

通常有比使用代码字符串更好的“计算语言”的方法；以我的经验，evalparse 繁重的代码需要大量的安全措施来保证合理的输出。

通常可以通过直接将 R 代码作为语言对象来解决相同的任务；[Hadley Wickham 在这里](https://github.com/hadley/devtools/wiki/Computing-on-the-language)有一个关于 R 元编程的有用指南：

gtools 库中的 defmacro() 函数是我最喜欢的 evalparse 构造的替代品（不是半途而废的 R 双关语）

```
require(gtools)

# both action_to_take & predicate will be subbed with code

F <- defmacro(predicate, action_to_take, expr = 
    if(predicate) action_to_take)

F(1 != 1, action_to_take = print('arithmetic doesnt work!'))

F(pi > 3, action_to_take = return('good!'))
[1] 'good!'

# the raw code for F
print(F)

function (predicate = stop("predicate not supplied"), action_to_take = stop("action_to_take not supplied")) 
{
    tmp <- substitute(if (predicate) action_to_take)
    eval(tmp, parent.frame())
}
<environment: 0x05ad5d3c> 
```

这种方法的好处是可以保证您获得语法上合法的 R 代码。更多关于这个有用的功能可以在[这里](http://www.r-project.org/doc/Rnews/Rnews_2001-3.pdf)找到：

希望有帮助！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-30T17:43:33.673

> 在某些编程语言中，`eval()`是一个函数，它像计算表达式一样评估字符串并返回结果；在其他情况下，它执行多行代码，就好像它们已被包含，而不是包含 eval 的行。eval 的输入不一定是字符串；在支持句法抽象的语言（如 Lisp）中，eval 的输入将由抽象句法形式组成。 [http://en.wikipedia.org/wiki/Eval](http://en.wikipedia.org/wiki/Eval)

如果 eval 使用不当，可以利用各种漏洞。

> 攻击者可以提供带有字符串“session.update(authenticated=True)”作为数据的程序，这将更新会话字典以将经过身份验证的密钥设置为 True。为了解决这个问题，所有将与 eval 一起使用的数据都必须转义，或者必须在不访问潜在有害功能的情况下运行。 [http://en.wikipedia.org/wiki/Eval](http://en.wikipedia.org/wiki/Eval)

换句话说，最大的危险`eval()`是代码注入到您的应用程序中的可能性。根据使用的目的，`eval()`在某些语言中使用 也可能导致性能问题。

特别是在 R 中，这可能是因为您可以使用`get()`代替`eval(parse())`并且您的结果将是相同的，而无需求助于`eval()`*

# sql-server - SQL Server 2008 R2：截断权限

> ID：13649980
> 
> 赞同：2
> 
> 时间：2012-11-30T17:20:10.890
> 
> 标签：sql-server, permissions, sql-server-2008-r2, truncate

`truncate`可以在用户级别（针对特定数据库/服务器）限制 SQL 命令吗？

我团队的一个成员截断了一个生产表，认为他在他的开发数据库中，我想防止这种情况再次发生（没有完全锁定他的权限）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:40:34.187

您可以尝试将 tinyint 字段（默认为 0）添加到要保护的表中，并添加指向专用单记录表的外键约束。那应该保护你的桌子。

也就是说，你可能应该摆脱这个人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:26:40.150

据我记得撤销`ALTER`对表的权限应该可以解决问题（在 2005 到 2012 的所有版本中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:37:55.430

一个人需要对表进行 DDL 权限才能执行 TRUNCATE，因为它是未记录的操作。即使一个人有数据写入器（或插入/更新/删除），但缺少 ALTER 或 DDL_ADMIN，他们也无法截断表。

# php - APNS：发送后如何获得错误响应？

> ID：13649982
> 
> 赞同：2
> 
> 时间：2012-11-30T17:20:20.137
> 
> 标签：php, push-notification, apple-push-notifications, push

我想用 PHP 发送推送通知。

所以我设置了一些代码来发送它们。它实际上运行良好，但现在我必须进行一些错误处理。

例如，如果我向 Apple 发布无效令牌，然后发送一些有效令牌，Apple 不会将消息推送到有效令牌的设备。

因此，每次发送有效负载以获取响应后，我都会检查流，如果有任何问题，我会告诉我。

```
$test = fwrite($this->fp, $payload);

if ($test != strlen($payload)) {
    echo 'NOT ALL BYTES WRITTEN'; //This is just for debug
}

usleep(1000000); //Wait for Apple to respond.

$error_hex = fread($this->fp, 6);
if ($error_hex !== false && strlen($error_hex) == 6) {
    $error = unpack('Ccommand/Cstatus_code/Nidentifier', $error_hex);

    print_r($error);
} else {
    echo 'NO HEX ERROR';
} 
```

这总是输出“NO HEX ERROR”，因此 Apple 没有响应错误。

为什么这不起作用？流阻塞被禁用。

```
stream_set_blocking($this->fp, 0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-20T03:05:14.800

无效token，不代表“NO EXIST TOKEN”，表示token在沙箱环境中，你发送沙箱token进行生产，导致Invalid Token

# deployment - 从 SVN 部署文件的最佳实践

> ID：13649989
> 
> 赞同：3
> 
> 时间：2012-11-30T17:20:41.223
> 
> 标签：deployment

我已经阅读了这篇文章（链接： http: [//guides.beanstalkapp.com/version-control/branching-best-practices.html](http://guides.beanstalkapp.com/version-control/branching-best-practices.html)），它提供了一些关于部署错误修复和功能请求的良好“最佳实践”建议，并且倾向于同意那里写的所有内容。但是我有一个似乎无法解决的主要问题：

如何仅部署经过全面测试的功能，而不部署当前正在测试的文件？

示例：错误 #1 影响 file1.php。错误修复编码在错误分支中，由开发人员在本地进行测试，然后合并回开发分支。dev 分支部署到测试环境。

功能 #1 也会影响 file1.php。它被编码、合并并部署到测试。

我需要将错误修复（以及其他 100 个可能存在类似冲突的修复）部署到 Staging。我还不想部署新功能，因为还没有进行文档、培训等。

如何仅部署错误修复？我将如何部署某些错误修复和某些功能请求，但不是全部？

我考虑过跟踪每个文件更改并将其链接到错误票，从错误票中编译文件列表，并手动选择每个文件。但这似乎很容易出错，而且工作量超过了应有的工作量。

我错过了什么？如何仅部署我想要部署的错误修复和功能集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:39:37.210

据我了解，通常的方法是：

1.  **对于每个部署的版本（比如1.1** ） ，您都有一个标签/分支（在 SVN 中相同）。
2.  **如果出现严重错误，您可以在 ( 1.1** )的分支中修复错误，如您所说
3.  该错误被合并到 ( **1.1** ) 创建 ( **1.1.1** ) 并且也合并到**dev**。( **1.1.1** ) 去**测试**而不是**开发**。

同时

1.  功能转到**Dev**。
2.  当您想要发布功能时，您可以为该功能创建一个分支（例如**1.2**），该分支将用于**测试**，然后是其余的。

笔记：

*   错误修复有时可以在**Dev**中完成并向后*移植*到分支。

# mediawiki - 最近更改中的最新注册

> ID：13649999
> 
> 赞同：-1
> 
> 时间：2012-11-30T17:21:10.980
> 
> 标签：mediawiki

我不想在 MediaWiki 最近的更改中显示最新的用户注册。有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:26:45.553

您可以隐藏注册用户的操作并仅查看匿名编辑，或限制到某些命名空间。重点是什么？