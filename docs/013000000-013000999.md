# StackOverflow 问答 13000000-13000999

# jquery - 将 div 更改为固定并返回灯箱

> ID：13000000
> 
> 赞同：0
> 
> 时间：2012-10-21T16:55:34.927
> 
> 标签：jquery, css

我有一个 html 文件

```
<html>
<body>
<div #main> <a click to open lightbox> <img> <more images> </a> </div>
</body>
</html> 
```

当灯箱打开时，这变成

```
 <html>
    <body>
    <div id="main"> <a click to open lightbox> <img> <more images> </a> </div>
    <div id="pic_holder">...Popup div content </div>
    <div id="overlay"></div>
    </body>
    </html> 
```

我希望#main 成为 noscroll。我读到了溢出：隐藏和位置：静态；等我的 css `.noscroll{}`。

问题是，如果我在#main 上为 noscroll 使用 overflow:hidden，body 仍然会滚动。如果我在#main 上使用 position:static，在弹出窗口关闭后，#body 会滚动到顶部。这个想法是为了获得类似 pinterest 的行为，我正在使用 prettyphoto。

感谢任何提示。[与将位置更改为固定时防止 div 滚动回顶部](https://stackoverflow.com/questions/5492824/preventing-div-scrolling-back-to-top-when-changing-position-to-fixed?rq=1)有些相关，但它没有谈论添加灯箱。这就是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:06:34.020

我需要代码以获得更好的答案，这里有一些提示

1.  您是否尝试将您的身体设置为“溢出：隐藏”？

2.  滚动取决于您悬停的元素，您是否尝试将#main 大小设置为窗口大小？

称呼

[更新]

在我在这里看到你的网站后，我认为你应该做一些改变。

1.  制作“pp_overlay”的“pp_pic_holder”子级。
2.  将您的“pp_pic_holder”放在css中，不固定，使用“margin：0 auto;”
3.  在 Jquery 中，使用窗口上的“调整大小”功能将“pp_overlay”的宽度/高度设置为窗口一。它应该看起来像这样。

    ```
    function overlayResize(){
       var WW=$(window).width();
       var WH=$(window).height();
       $(".overlay").height(WH).width(WW);
    }

    $(window).resize(function(){
        overlayResize();
    })

    overlayResize(); 
    ```

这里做了一些jsFiddle：

[http://jsfiddle.net/kirkas/PSjTD/](http://jsfiddle.net/kirkas/PSjTD/)

[更新]如果你想在叠加层中滚动，别忘了添加：

```
 overflow:auto; 
```

到您的叠加层。

[http://jsfiddle.net/kirkas/PSjTD/](http://jsfiddle.net/kirkas/PSjTD/)

[更新]

当您单击所选图片时，此功能会停止隐藏。

[http://jsfiddle.net/kirkas/PSjTD/](http://jsfiddle.net/kirkas/PSjTD/)

# apache - 将 CakePHP 部署到子文件夹

> ID：13000006
> 
> 赞同：1
> 
> 时间：2012-10-21T16:56:23.090
> 
> 标签：apache, .htaccess, cakephp, cakephp-2.0, shared-hosting

我已经创建了一个 CakePHP 2 应用程序，现在我正在尝试将它部署到生产 Web 服务器。

我的应用使用默认文件夹结构（app/lib/plugins/vendors），默认 htaccess，默认路由，没什么特别的。

我一直在本地开发，就好像应用程序位于站点的根文件夹中一样（例如[http://mycakeapp.localhost/](http://mycakeapp.localhost/)将我带到站点）。但我正在部署到一个不会出现这种情况的站点（共享主机）（例如[http://www.somedomain.com/mycakeapp](http://www.somedomain.com/mycakeapp)）。

它不起作用（我真的没想到会这样），所以我认为我必须调整一个或多个 htaccess 文件。[我尝试按照本文中的建议](http://mamun.info/2010/09/08/cakephp-in-a-subdirectory/)修改根 .htaccess ，但这只是部分起作用（例如，指向 CSS 的链接不起作用）：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule  ^mycakeapp$  mycakeapp/app/webroot/  [L]
RewriteRule  ^mycakeapp/(.*)$  mycakeapp/app/webroot/$1  [L]
</IfModule> 
```

那么我应该对所有的 htaccess 文件做些什么来使这个 CakePHP 站点在子文件夹中工作呢？

## 更新：

该站点的根目录中有一个 .htaccess 文件，我已将其内容粘贴在下面。里面有什么东西在搞砸吗？

```
RewriteEngine on
Options +FollowSymLinks
RewriteCond %{HTTP_HOST} ^somedomain\.com$ [NC]
RewriteRule ^(.*)$ http://www.somedomain.com/$1 [R=301,L]
RewriteCond %{SERVER_PORT} !^443$
RewriteRule ^secure/$ https://www.somedomain.com/secure [R=301,L]
RewriteRule ^about\.html$ /contact.php [R=301,L]
RewriteRule ^contact\.html$ /contact.php [R=301,L]
RewriteRule ^download\.html$ /signup.php [R=301,L]
RewriteRule ^index\.html$ /index.php [R=301,L]
RewriteRule ^privacy\.html$ /policies.php [R=301,L]
RewriteRule ^website\.html$ /business-websites.php [R=301,L]
RewriteRule ^return\.html$ /policies.php [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T22:16:52.613

这篇文章有点老了，但在我第一次将 CakePHP 应用程序部署到子文件夹时发现它。以下 .htaccess 行可以修改根文件夹（for）：

```
RewriteBase /subdir/ 
```

有时 Apache 在 httpd.conf 或虚拟主机配置文件中需要额外的权限或选项，如下所示：

```
 <Directory />
            Options FollowSymLinks
            AllowOverride All
    </Directory>
    <Directory /var/www/html/site_folder>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride All
            Order allow,deny
            allow from all
            AddOutputFilterByType DEFLATE text/html text/plain text/xml
    </Directory> 
```

# postgresql - 什么是与 postgres 兼容、开源且基于 php 或 python 的好 cms？

> ID：13000007
> 
> 赞同：5
> 
> 时间：2012-10-21T16:56:27.633
> 
> 标签：postgresql, content-management-system, python-2.7

*   php或python
*   使用并连接到我们现有的 postgres 数据库
*   开源/或非常低的许可费用
*   cms的共同特征，带有管理工具来帮助管理/管理社区

    在非常基本的网站上拥有庞大的会员群，会员向我们提供联系信息和有关其专业特征的信息。即将扩展以建立新的社区网站（将我们的会员群迁移到），用户将能够在其中互相发信息、发帖到论坛、博客、分享私人小组讨论，并且会员将收到邀请以赚取他们的专业知识的报酬. 个人资料页面、职位发布和视频聊天将是加分项。

    已经有一个精通网络应用程序的管理员团队来帮助管理它，但我们的开发人员资源有限（3-4 名程序员）并且希望节省开发时间，而不是从头开始构建我们的新网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T00:01:35.410

对于仍然对 Python 和支持 PostgreSQL 感兴趣的人：Django-cms 和 Plone

[内容管理系统列表](http://en.wikipedia.org/wiki/List_of_content_management_systems)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T01:20:35.473

你试过Drupal吗？Drupal 支持 PostgreSQL 并且是用 PHP 编写的并且是开源的。

# c++ - 转换图像和旋转的程序

> ID：13000008
> 
> 赞同：3
> 
> 时间：2012-10-21T16:56:46.373
> 
> 标签：c++, opencv, rotation, grayscale

我一直在尝试使用opencv在c ++中制作这个程序，将图像转换为灰度并在之后旋转图像，但是我得到的输出是各种各样的混乱。

我一直在寻找解决方案并到处寻求帮助，但我一直无法找出我到底做错了什么，所以如果你们中的任何一个可以帮助我，那就太好了

代码： http: [//pastebin.com/FSJKyaeU](http://pastebin.com/FSJKyaeU)

另外，这是我得到的输出图片 [http://i.imgur.com/qpYm1.jpg](http://i.imgur.com/qpYm1.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:54:28.110

请更换：

```
Mat imRotate(im.cols * 2, im.rows * 2, im.type()); 
```

使用这个：

```
 int size = static_cast<int>(sqrt(im.cols * im.cols/4 + im.rows * im.rows/4) * 2) + 1;
  Mat imRotate(size, size , im.type()); 
```

然后更新 FuncRotate。我认为你需要做这样的事情：

```
 void FuncRotate(Mat im, Mat imRotate, int q, int x, int y, int rows, int columns) 
    {
      double radians = (q * 3.1415)/180; // or try use M_PI instead of 3.1415
      double cosr = cos(radians);
      double sinr = sin(radians);

      for(int i=0; i<columns; i++) //columns of the original image
      {
         for(int j=0; j<rows; j++) //rows of the original image
         {
            int NewXPixel = imRotate.cols/2 + ((i-x) * cosr) - ((j-y) * sinr);
            int NewYPixel = imRotate.rows/2 + ((i-x) * sinr) + ((j-y) * cosr);
            if(NewXPixel < 0 || NewYPixel < 0 || NewXPixel >= imRotate.cols || NewYPixel >= imRotate.rows)
    continue;
  imRotate.at<unsigned char>(NewYPixel,NewXPixel) = im.at<unsigned char>(j,i);
         }
      }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:53:35.397

我认为至少这条线有问题：

```
imRotate.at<unsigned char>(i,j) = im.at<unsigned char>(NewXPixel,NewYPixel); 
```

...因为`i`并且`j`应该循环遍历原始图像，对吗？

也许你的意思是：

```
imRotate.at<unsigned char>(NewXPixel,NewYPixel) = im.at<unsigned char>(i,j); 
```

此外，`x`和`y`不用于`FuncRotate`.

此外，我相信你应该初始化`imRotate`为零。

# python - OpenCL 矩阵乘法 - 得到错误的答案

> ID：13000010
> 
> 赞同：5
> 
> 时间：2012-10-21T16:57:19.783
> 
> 标签：python, opencl, pyopencl

这是一个让我发疯的简单 OpenCL 矩阵乘法内核：

顺便说一句，我正在使用 pyopencl。

```
__kernel void matrixMul(  __global int* C,
                          __global int* A,
                          __global int* B,
                          int wA, int wB){

                int row = get_global_id(1); //2D Threas ID x
                int col = get_global_id(0); //2D Threas ID y

                //Perform dot-product accumulated into value
                int value = 0;
                for ( int k = 0; k < wA; k++ ){
                    value += A[row*wA + k] * B[k*wB+col];
                }
                C[row*wA+col] = value; //Write to the device memory
            } 
```

哪里（输入）

```
A = [72 45
     75 61]
B = [26 53 
     46 76]
wA = wB = 2 
```

我得到的输出：

有时我会得到：

```
C = [3942 0
     0 5472] 
```

否则我得到：

```
C = [3942 7236
     3312 5472] 
```

但输出应该是：

```
C = [3942 7236
     4756 8611] 
```

我不知道我在这里犯了什么错误。我一整天都没有运气。

请在这件事上给予我帮助

这是完整的python代码：

```
import pyopencl as cl
import numpy as np
import os

ORDER = 2
LEN = ORDER*ORDER
ctx = cl.create_some_context()

commandQueue = cl.CommandQueue( ctx )

A = np.array((72, 45, 75, 61), dtype = np.int32)
B = np.array((26, 53, 46, 76), dtype = np.int32)
C = np.empty_like(A)

in_buf1 = cl.Buffer( ctx, cl.mem_flags.READ_ONLY | cl.mem_flags.COPY_HOST_PTR,
                 hostbuf = A )
in_buf2 = cl.Buffer( ctx, cl.mem_flags.READ_ONLY | cl.mem_flags.COPY_HOST_PTR,
                 hostbuf = B )
out_buf = cl.Buffer( ctx, cl.mem_flags.WRITE_ONLY, C.nbytes )

kernelSrc1 = """__kernel void
            matrixMul(  /*const int Mdim,
                        const int Ndim,
                        const int Pdim,*/
                        __global int* C,
                        __global int* A,
                        __global int* B,
                        int wA, int wB)
           {
                int row = get_global_id(1); //2D Threas ID x
                int col = get_global_id(0); //2D Threas ID y                

                //Perform dot-product accumulated into value
                int value = 0;
                for ( int k = 0; k < wA; k++ ){
                    value += A[row*wA + k] * B[k*wB+col];
                }
                C[row*wA+col] = value; //Write to the device memory
            }"""

program1 = cl.Program(ctx, kernelSrc1 ).build()
event1 = program1.matrixMul( commandQueue, (LEN, ), None,
                     out_buf, in_buf1, in_buf2, np.int32(ORDER), np.int32(ORDER));
event1.wait()

cl.enqueue_copy(commandQueue, C, out_buf)
print C 
```

我正在使用 Python 2.7.x、pyopencl 2012.1、AMD APP SDK

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T19:02:34.257

您错误地设置了*全局大小*参数。由于您在内核中使用了全局大小的两个维度，因此您需要将*全局大小*设置为 (ORDER,ORDER)。当你改变它时，你会得到：

```
[3942 7236
 4756 8611] 
```

# python - Python中mbox模块中mbox消息的属性

> ID：13000016
> 
> 赞同：0
> 
> 时间：2012-10-21T16:57:39.883
> 
> 标签：python, email, mbox

我碰运气用 python 管理我的邮箱。

我的示例代码是

```
for eachmail in mailbox.mbox(mboxfile):
    print eachmail['From'] 
```

我通过打印整个内容来获得关注。

```
Delivered-To
Subject
To
Content-Type
MIME-Version
Message-Id 
```

是否有完整的文档显示我可以从 mbox 消息实例获得的所有属性？Python 文档没有指定任何这些[http://docs.python.org/library/mailbox.html#mailbox.mbox](http://docs.python.org/library/mailbox.html#mailbox.mbox)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:02:57.583

这完全取决于消息中的标头。其中大多数是可选的。检查[RFC 2076](http://www.ietf.org/rfc/rfc2076.txt)以获得常见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:04:22.467

这些是电子邮件标题。具体的标题会有很大的不同*，*你不能真正指望它们中的*任何*一个存在（即使是你希望存在的，比如`To`, 或`Subject`）......但是维基百科有一个很好的常见标题列表及其含义：[http：// en.wikipedia.org/wiki/Email#Header_fields](http://en.wikipedia.org/wiki/Email#Header_fields)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-20T12:00:34.377

使用你的变量

```
mm=mailbox.mbox(mboxfile)
message=mm[0]
message.keys() 
```

您现在可以使用 mm['Subject'] 或 mm['Message-ID'] 访问

# arrays - 为actionscript3中的对象数组分配唯一标识符

> ID：13000019
> 
> 赞同：2
> 
> 时间：2012-10-21T16:58:23.473
> 
> 标签：arrays, actionscript-3, object, identifier

在这里，我有一个 actionscript3 代码，我在其中创建了一个对象数组。基本上在数组中是同一对象的多个实例。我想创建一个事件监听器，它调用一个函数 f0 将对象旋转 90 度。我的问题是我找不到为数组中的每个对象分配唯一标识符的方法，所以当我单击一个对象时，我希望它旋转，但只有数组的第一个元素旋转。我还想使我的旋转居中，这样对象就不会在 (0,0) 中旋转。

```
package
{
import flash.display.Graphics;
import flash.display.Sprite;
import flash.events.Event;
import flash.events.MouseEvent;
import flash.geom.ColorTransform;
import flash.geom.Matrix;
import flash.geom.Point;
import flash.geom.ColorTransform;

public class Main extends Sprite
{
    var array = new Array();
    var i:int;

    public function Main():void
    {
        if (stage) init();
        else addEventListener(Event.ADDED_TO_STAGE, init);
    }

private function init(e:Event = null):void
    {

        for (var i:int = 0; i < 10; i++)
        {
            var asd:Sprite = new Sprite();
            asd.graphics.beginFill(0x0000ff);
            asd.graphics.drawRect(0, 0, 60, 60);
            array.push(asd);
            addChild(array[i]);
            array[i].x = 60 * i ;
            array[i].y = 60 * i ;
            array[i].addEventListener(MouseEvent.CLICK, f0);
            if (i % 2 == 0) {
            asd.graphics.lineTo(asd.x + 60, asd.y + 60);
            }
            removeEventListener(Event.ADDED_TO_STAGE, init);
        }
    }
private function f0(e:Event):void
    {
        array[i].rotation += 90;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:26:39.737

event.target 指向添加了事件处理程序的对象，您可以使用它来旋转正确的精灵。

```
private function init(e:Event = null):void 
{
    for (var i:int = 0; i < 10; i++) 
    {
       createObject(i);
    }
}

private function createObject(index:int):void
{
    var asd:Sprite = new Sprite(); 
    asd.graphics.beginFill(0x0000ff); 
    asd.graphics.drawRect(0, 0, 60, 60); 
    array.push(asd); 
    addChild(asd); 
    array[index].x = 60 * index ;
    array[index].y = 60 * index ;
    array[index].addEventListener(MouseEvent.CLICK, f0);
    if (index % 2 == 0) { 
       asd.graphics.lineTo(asd.x + 60, asd.y + 60);
    }

}

private function f0(e:Event):void
{
    e.target.rotation += 90; 
} 
```

要围绕其中心旋转对象，您可以执行以下操作：

```
private function rotateAroundCenter (ob:DisplayObject, angleDegrees:Number):void
{
    var matrix:Matrix = ob.transform.matrix; 

    var rect:Rectangle = ob.getBounds(this.parent); 

    matrix.translate(- (rect.left + (rect.width/2)), - (rect.top + (rect.height/2))); 

    matrix.rotate((angleDegrees/180)*Math.PI); 

    matrix.translate(rect.left + (rect.width / 2), rect.top + (rect.height / 2));

    ob.transform.matrix = matrix;
} 
```

这会将对象中心转换为 (0,0) 旋转它，然后将对象转换回其原始位置。只有当对象有父对象并且它的宽度高度不为零时，它才会起作用。

# javascript - javascript中的别名函数

> ID：13000020
> 
> 赞同：21
> 
> 时间：2012-10-21T16:58:24.087
> 
> 标签：javascript

> **可能重复：**
> [如果 Javascript 具有一流的功能，为什么这不起作用？](https://stackoverflow.com/questions/8773579/if-javascript-has-first-class-functions-why-doesnt-this-work)

当我尝试为`document.getElementById`如下创建别名函数时：

```
f = document.getElementById; 
```

但是，当我尝试打电话时：

```
var e_fullname = f(“fullname”); 
```

出现错误： `Could not convert JavaScript argument`

以下是可以的：

```
var e_fullname = f.call(document, “funname”); 
```

你能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-21T17:10:16.110

调用函数有四种方式：

1.  函数调用：`f(p1, p2)`
2.  方法调用：`obj.f(p1, p2)`
3.  应用或调用调用：`f.apply(obj, [p1, p2])`,`f.call(obj, p1, p2)`
4.  构造函数调用：`new f(p1, p2)`

在所有这些情况下，`f`它只是对函数对象（具有`[[Call]]`内部属性的对象）的引用（指针）。在所有这些情况下，它的行为不同的是函数的调用方式，这很重要。

所以，`f`只是对对象的引用，和`getElementById`之间没有区别；该函数不会保留对引用它的对象的引用。`document.getElementById``someOtherHTMLElement.getElementById`

如果要绑定某个*“所有者”*对象，请使用以下`bind`方法：

```
var f = document.getElementById.bind(document); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-21T17:04:29.300

`getElementById`是文档上的一种方法。要调用它，解释器需要具有函数体本身、调用它的对象（在您的情况下为文档）和参数。

当你这样做时`f = document.getElementById`，你正在复制函数体，而不是要调用它的对象。

当你这样做时：

```
f.call(document, “funname”); 
```

您提供了调用它的对象和参数。

如果您希望能够直接调用 f，则需要以某种方式获取存储在其中的“文档”对象。最简单的是：

```
var f = function(name){return document.getElementById(name)} 
```

这将创建一个闭包，它为您保留文档的价值。

你也可以使用 bind() 来做同样的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T17:02:04.150

你可以使用[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

> 创建一个新函数，在调用该函数时，将其 this 关键字设置为提供的值，并在调用新函数时提供的任何参数之前具有给定的参数序列。

```
var f = document.getElementById.bind(document); 
```

它是在 ES5 中引入的，因此请注意尚不支持此版本 ECMAScript 的浏览器！

作为替代方案，您可以使用[`proxy`](http://api.jquery.com/jQuery.proxy/)jQuery 的方法，在版本中添加`1.4`

```
var f = ​$.proxy(document.getElementById, document); 
```

或者您可以将 delcare`f`作为其自身的功能（这是一个更详细的解决方案）。

```
var f = function() { return document.getElementById(arguments); } 
```

# mysql - 将表传输到外部数据库服务器

> ID：13000022
> 
> 赞同：0
> 
> 时间：2012-10-21T16:58:36.610
> 
> 标签：mysql

我有将近 37 MB 的表数据要导出到共享环境中的实时数据库服务器。

我可以通过 phpmyadmin 访问外部数据库。转移这张桌子的最佳方式是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:03:02.377

1.  在远程数据库上使用 mysqldump 命令提取所需数据库的 SQL 语句。

2.  将提取的文件复制到本地系统

3.  执行将在本地系统中创建数据库的 sql 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:03:21.897

互联网上有许多可用的工具。我用来将数据从一台服务器传输到另一台的是**[Navicat Premium](http://www.navicat.com/en/products/navicat_premium/premium_overview.html)**。它能够将数据库从一台服务器复制到另一台服务器，甚至`MySQL`从`SQL Server`.

或者干脆使用**[mysqldbcopy](http://dev.mysql.com/doc/workbench/en/mysqldbcopy.html)**

此实用程序将源服务器上的数据库复制到目标服务器上的数据库。如果源服务器和目标服务器不同，则数据库名称可以相同或不同。如果源服务器和目标服务器相同，则数据库名称必须不同。

该实用程序在命令行上接受一个或多个数据库对。要命名数据库对，请使用**db_name:new_db_name**语法明确指定源名称和目标名称。如果源数据库名称和目标数据库名称相同，则**db_name**可以用作**db_name:db_name**的简写。

# html - 不使用 JavaScript 嵌入 Flash (SWF)

> ID：13000032
> 
> 赞同：0
> 
> 时间：2012-10-21T17:00:34.330
> 
> 标签：html, flash, embed

如何在**不使用 JavaScript 库**的情况下将 Flash SWF 文件嵌入 HTML 页面？

Flash 影片是一种广告，它将在没有任何可用的 JavaScript 库（如 SWFObject）的网站上运行。我唯一的能力是使用`document.write`. 我不希望添加任何外部脚本标签（或`write`它们）。

浏览器要求基本上是“所有浏览器”：

*   IE6+
*   FF2+
*   铬，Safari（WebKit）
*   Opera 的最新版本（不需要 100%）

我不关心验证。唯一的目标是让它可靠地工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:03:18.903

使用`<object> <object/>`& 该`OBJECT`标签由 Internet Explorer 在 Windows`EMBED`上使用，由 Netscape Navigator（Macintosh 和 Windows）和 Internet Explorer（Macintosh）标签使用，如下所示：

```
<object type="application/x-shockwave-flash" data="myclip.swf"> 
    <param name="movie" value="myclip.swf" />
    <param name="quality" value="high" />
    <!-- Sandwich the embed tag inside the object tag -->
    <embed src="myclip.swf" quality="high" />
</object> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:04:44.353

```
<object width="400" height="400" data="helloworld.swf"></object> 
```

这适用于所有浏览器，但我建议您避免使用`<embed>`标签，因为 Firefox 不支持它。`<object>`您可以从下面的链接了解有关标签的更多信息。

[http://www.w3schools.com/tags/tag_object.asp](http://www.w3schools.com/tags/tag_object.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:09:16.230

我认为它与`<iframe>`.

```
<iframe src="myclip.swf" width="300" height="200" border="0" /> 
```

[http://jsfiddle.net/ZZ5Pk/](http://jsfiddle.net/ZZ5Pk/)（警告：响亮的 SWF）

# java - 如何在 Java 中解码 logonHours 属性

> ID：13000038
> 
> 赞同：3
> 
> 时间：2012-10-21T17:01:08.910
> 
> 标签：java, active-directory

我正在尝试从 Active Directory 中解码 logonHours 属性，以便它正确显示在我的 Java 应用程序中。当我查看属性编辑器时，它看起来像这样：

```
logonHours 03 00 00 00 F0 FF 1F F0 FF 1F F0 FF 1F F0 FF 1F F0 FF 1F 00 FF 
```

这正好是 21 个字节长，这是我所期望的（每天编码为 3 个字节，每天总共 24 位）。这是为了匹配我所拥有的 loginHours 下的显示。但是，我的编码如下（每​​天的位串）

```
Sun:     00000000 (00) 00000000 (00) 00000000 (00)
Mon-Fri: 00001111 (0F) 11111111 (FF) 11111000 (F8)
Sat:     00000000 (00) 11111111 (FF) 11000000 (C0) 
```

这让我认为 logonHours 属性和显示之间发生了一些编码。我查看了 Perl 代码和 VBScript - 在 Java 中转换其中任何一个都是直接转换，这与现实不符。

有没有人有 Java、C#.NET 或其他伪代码来正确解码 logonHours 属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:18:23.727

当我在举手寻求帮助后十分钟后弄清楚这些事情时，我讨厌它。关键在此页面中：[Active Directory Permitted Logon Times with C# .Net 3.5 using System.DirectoryServices.AccountManagement](http://anlai.wordpress.com/2010/09/07/active-directory-permitted-logon-times-with-c-net-3-5-using-system-directoryservices-accountmanagement/) - 特别是位的顺序以及数组以非 1 问题开始的事实。这是我想出的Java代码：

```
private String[] decodeLogonHours(Attribute attr)
{
    byte[] raw = attr.getValueByteArray();
    String[] days = new String[] { "Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat" };
    ArrayList<String> ret = new ArrayList<String>();

    for (int day = 0 ; day < days.length ; day++) {
        byte[] vBits;
        if (day == 6) {
            vBits = new byte[] { raw[19], raw[20], raw[0] };
        } else {
            vBits = new byte[] { raw[day*3+1], raw[day*3+2], raw[day*3+3] };
        }

        StringBuffer sb = new StringBuffer();
        sb.append(String.format("%s:", days[day]));
        for (int b = 0 ; b < 3 ; b++) {
            sb.append(" ");
            sb.append(decodeLogonBits(vBits[b]));
        }
        ret.add(sb.toString());
    }

    String[] r = new String[ret.size()];
    ret.toArray(r);
    return r;
}

private String decodeLogonBits(byte b) {
    StringBuffer sb = new StringBuffer();
    sb.append((b & 0x01) > 0 ? "1" : "0");
    sb.append((b & 0x02) > 0 ? "1" : "0");
    sb.append((b & 0x04) > 0 ? "1" : "0");
    sb.append((b & 0x08) > 0 ? "1" : "0");
    sb.append((b & 0x10) > 0 ? "1" : "0");
    sb.append((b & 0x20) > 0 ? "1" : "0");
    sb.append((b & 0x40) > 0 ? "1" : "0");
    sb.append((b & 0x80) > 0 ? "1" : "0");
    return sb.toString();
} 
```

# android - System.currentTimeMillis() 返回 0（零）

> ID：13000040
> 
> 赞同：1
> 
> 时间：2012-10-21T17:01:15.220
> 
> 标签：android, time, milliseconds, time-measurement

我目前正在尝试为Android制作一个小游戏。
我尝试测量游戏的两个动作之间的时间，但是当我在调用该`currentTimeMillis()`方法后尝试调用该方法时，开始时间保持为 0 `gameThread.run()`（gameThread 是可运行的）。当我在`run()`通话之前放置它时，它会提供正确的价值。

类游戏视图：

```
@Override
public void surfaceCreated(SurfaceHolder holder)
{
    // at this point the surface is created and we start the gameloop
    gameThread.setRunning(true);
    gameThread.run();
    begin=System.currentTimeMillis();
}

/**
 * This is the game update method. It iterates through all the objects and
 * calls their update method
 */
public void update()
{
    for (GuiElement element : guiElements)
    {
        element.update();
    }
    count++;
    if (ball.getPosY() >= Statics.DISPLAY_HEIGTH - ball.getRadius())
    {
        Log.d(TAG, "Displayhoehe : " + Statics.DISPLAY_HEIGTH);
        Log.d(TAG, "DisplayfactorHeight : " + Statics.DISPLAY_FACTOR_HEIGHT);
        Log.d(TAG, "speedvalue : " + ball.getSpeedY());
        Log.d(TAG, "ballradius : " + ball.getRadius());
        Log.d(TAG, "am boden mit " + count + " schritten");
        gameThread.setRunning(false);
        end = System.currentTimeMillis();
        Log.d(TAG, "begin, end " + begin + " " + end);
        Log.d(TAG, "time " + (end - begin));
    }
} 
```

类 GameThread（实现可运行）

```
public void run()
{
    Canvas canvas;
    Log.d(TAG, "Starting game loop");

    long beginTime; // the time when the cycle begun
    long timeDiff; // the time it took for the cycle to execute
    int sleepTime; // ms to sleep (<0 if we're behind)
    int framesSkipped; // number of frames being skipped

    while (running)
    {
        canvas = null;
        // try locking the canvas for exclusive pixel editing in the surface
        try
        {
            canvas = surfaceHolder.lockCanvas();

            synchronized (surfaceHolder)
            {
                beginTime = System.currentTimeMillis();
                framesSkipped = 0; // resetting the frames skipped
                // update game state
                gameView.update();
                // draw state to the screen
                gameView.draw(canvas);
                // calculate how long did the cycle take
                timeDiff = System.currentTimeMillis() - beginTime;
                // calculate sleep time
                sleepTime = (int) (FRAME_PERIOD - timeDiff);

                if (sleepTime > 0)
                {
                    // if sleepTime > 0 we're OK
                    try
                    {
                        // send the thread to sleep for a short period very
                        // (useful for battery saving)
                        Thread.sleep(sleepTime);
                    }
                    catch (InterruptedException e)
                    {
                    }
                }

                while (sleepTime < 0 && framesSkipped < MAX_FRAME_SKIPS)
                {
                    // we need to catch up (skip some draw() calls)
                    this.gameView.update(); // update without rendering
                    sleepTime += FRAME_PERIOD; // add frame period to check
                                                // if we catched up
                    framesSkipped++;
                }
            }
        }
        finally
        {
            // in case of an exception the surface is not left in an inconsistent state
            if (canvas != null)
            {
                surfaceHolder.unlockCanvasAndPost(canvas);
            }
        }
    }
} 
```

**编辑：**我试图在起点记录 currentMillis() 的返回值，似乎该方法**在 run() 方法完成后被**调用。它不应该同步运行吗？

```
@Override
public void surfaceCreated(SurfaceHolder holder)
{
    // at this point the surface is created and we start the gameloop
    gameThread.setRunning(true);
    gameThread.run();
    begin=System.currentTimeMillis();
    Log.d(TAG, "currentMillis at beginning " + System.currentTimeMillis());
} 
```

日志：

```
10-21 19:43:17.480: D/GameView(19767): Displayhoehe : 480
10-21 19:43:17.480: D/GameView(19767): DisplayfactorHeight : 1.0
10-21 19:43:17.480: D/GameView(19767): speedvalue : 1.6666666666666667
10-21 19:43:17.480: D/GameView(19767): ballradius : 20
10-21 19:43:17.480: D/GameView(19767): am boden mit 133 schritten
10-21 19:43:17.480: D/GameView(19767): begin, end 0 1350841397483
10-21 19:43:17.480: D/GameView(19767): time 1350841397483
10-21 19:43:17.480: D/GameView(19767): currentMillis at beginning 1350841397484 
```

**解决方案：**我错误地启动了 Runnable。这是启动 Runnable 的正确方法：

```
gameThread.setRunning(true);
Thread t = new Thread(gameThread);
t.start();
begin=System.currentTimeMillis(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:07:07.793

那是因为你`run()`直接调用方法而不是调用线程的`start()`方法。

# php - twitter API 1.1：无法使用 curl 和 php 添加“计数”参数

> ID：13000042
> 
> 赞同：0
> 
> 时间：2012-10-21T17:01:36.437
> 
> 标签：php, json, api, curl, twitter

我正在连接到新的 twitter API 以获取我的个人资料的公开推文列表。我基本上使用以下代码，我在这里找到了：[Simplest PHP example for retrieving user_timeline with Twitter API version 1.1](https://stackoverflow.com/questions/12916539/simplest-php-example-retrieving-user-timeline-with-twitter-api-version-1-1)

我收到了最后 20 条推文，我尝试了许多不同的方法将“count”参数添加到 curl 调用中，但似乎没有返回更多结果。

我尝试为 $postfields 赋值：

```
$postfields = array(
        'count' => 100,
        'include_rts' => 1
    );

//url-ify the data for the POST
foreach($postfields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string, '&'); 
```

给出一个简单的字符串值：

```
§postfields = 'count=100'; 
```

并将 $url 值更改为：

```
$url = "https://api.twitter.com/1.1/statuses/home_timeline.json?count=100"; 
```

还有其他建议吗？

谢谢你的帮助！！

这是完整的代码供参考：

```
function buildBaseString($baseURI, $method, $params) {
    $r = array();
ksort($params);
foreach($params as $key=>$value){
    $r[] = "$key=" . rawurlencode($value);
}
return $method."&" . rawurlencode($baseURI) . '&' . rawurlencode(implode('&', $r));
}

function buildAuthorizationHeader($oauth) {
$r = 'Authorization: OAuth ';
$values = array();
foreach($oauth as $key=>$value)
    $values[] = "$key=\"" . rawurlencode($value) . "\"";
$r .= implode(', ', $values);
return $r;
}

$url = "https://api.twitter.com/1.1/statuses/user_timeline.json";
$oauth_access_token = "YOURVALUE";
$oauth_access_token_secret = "YOURVALUE";
$consumer_key = "YOURVALUE";
$consumer_secret = "YOURVALUE";

$oauth = array( 'oauth_consumer_key' => $consumer_key,
            'oauth_nonce' => time(),
            'oauth_signature_method' => 'HMAC-SHA1',
            'oauth_token' => $oauth_access_token,
            'oauth_timestamp' => time(),
            'oauth_version' => '1.0');

$base_info = buildBaseString($url, 'GET', $oauth);
$composite_key = rawurlencode($consumer_secret) . '&' .     rawurlencode($oauth_access_token_secret);
$oauth_signature = base64_encode(hash_hmac('sha1', $base_info, $composite_key, true));
$oauth['oauth_signature'] = $oauth_signature;

$header = array(buildAuthorizationHeader($oauth), 'Expect:');
$options = array( CURLOPT_HTTPHEADER => $header,
              //CURLOPT_POSTFIELDS => $postfields,
              CURLOPT_HEADER => false,
              CURLOPT_URL => $url,
              CURLOPT_RETURNTRANSFER => true,
              CURLOPT_SSL_VERIFYPEER => false);

$feed = curl_init();
curl_setopt_array($feed, $options);
$json = curl_exec($feed);
curl_close($feed);
$twitter_data = json_decode($json); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-19T01:52:21.550

```
$items = '15';
$screen_name = 'YOUR SCREEN NAME';
/* the $oauth */
$oauth = array(
        'screen_name' => $screen_name,
        'count' => $items,
        'oauth_consumer_key' => $consumer_key,
        'oauth_nonce' => time(),
        'oauth_signature_method' => 'HMAC-SHA1',
        'oauth_token' => $oauth_access_token,
        'oauth_timestamp' => time(),
        'oauth_version' => '1.0'
);

$base_info = buildBaseString($url, 'GET', $oauth);
$composite_key = rawurlencode($consumer_secret) . '&' .     rawurlencode($oauth_access_token_secret);
$oauth_signature = base64_encode(hash_hmac('sha1', $base_info, $composite_key, true));
$oauth['oauth_signature'] = $oauth_signature;

$header = array(buildAuthorizationHeader($oauth), 'Expect:');
$options = array(
        CURLOPT_HTTPHEADER => $header,
        //CURLOPT_POSTFIELDS => $postfields,
        CURLOPT_HEADER => false,
        CURLOPT_URL => $url . '?screen_name='.$screen_name.'&count='.$items,
        CURLOPT_RETURNTRANSFER => true, CURLOPT_SSL_VERIFYPEER => false
); 
```

# ruby-on-rails - Rails 路线错误

> ID：13000043
> 
> 赞同：0
> 
> 时间：2012-10-21T17:01:42.380
> 
> 标签：ruby-on-rails, railstutorial.org

我正在关注 Michael Hartl 的[Ruby on Rails 教程第 2 版](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)，并已到达本书的登录/注销部分。

到目前为止，我可以创建一个新用户（或者在我的情况下为房东）并使用新凭据登录。我遇到的问题是退出时。我单击“退出”并收到一条路线错误消息：

> 没有路线匹配 [GET] "/signout"

以下是代码片段。任何帮助将不胜感激！

rake 路由输出

```
landlords GET    /landlords(.:format)           landlords#index
               POST   /landlords(.:format)           landlords#create
  new_landlord GET    /landlords/new(.:format)       landlords#new
 edit_landlord GET    /landlords/:id/edit(.:format)  landlords#edit
      landlord GET    /landlords/:id(.:format)       landlords#show
               PUT    /landlords/:id(.:format)       landlords#update
               DELETE /landlords/:id(.:format)       landlords#destroy
    properties GET    /properties(.:format)          properties#index
               POST   /properties(.:format)          properties#create
  new_property GET    /properties/new(.:format)      properties#new
 edit_property GET    /properties/:id/edit(.:format) properties#edit
      property GET    /properties/:id(.:format)      properties#show
               PUT    /properties/:id(.:format)      properties#update
               DELETE /properties/:id(.:format)      properties#destroy
      sessions POST   /sessions(.:format)            sessions#create
   new_session GET    /sessions/new(.:format)        sessions#new
       session DELETE /sessions/:id(.:format)        sessions#destroy
          root        /                              content_pages#home
content_pages_home GET    /content_pages/home(.:format)  content_pages#home
          help        /help(.:format)                content_pages#help
     questions        /questions(.:format)           content_pages#questions
        signup        /signup(.:format)              landlords#new
        signin        /signin(.:format)              sessions#new
       signout DELETE /signout(.:format)             sessions#destroy 
```

路由.rb 文件

```
 resources :landlords
  resources :properties
  resources :sessions, only: [:new, :create, :destroy]

  root :to => 'content_pages#home'

  get "content_pages/home"

  match '/help', to: 'content_pages#help'
  match '/questions', to: 'content_pages#questions'
  match '/signup', to: 'landlords#new'
  match '/signin', to: 'sessions#new'
  match '/signout', to: 'sessions#destroy', via: :delete 
```

退出链接

```
<%= link_to "Signout", signout_path, method: "delete" %> 
```

会话控制器

```
def destroy
  sign_out
  redirect_to root_path
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T17:16:57.580

以下代码中的`via:`选项将请求限制为删除方法：

```
match '/signout', to: 'sessions#destroy', via: :delete 
```

您需要制作一个适用于“get”方法的

查看[Rails 路由指南](http://guides.rubyonrails.org/routing.html)

# c - 删除换行符的功能没有效果？

> ID：13000047
> 
> 赞同：3
> 
> 时间：2012-10-21T17:02:00.403
> 
> 标签：c

我编写了一个函数来包装 GNU getline() 并删除尾随的换行符，但由于某种原因它没有效果。难道我做错了什么？

```
ssize_t readline(char **lineptr, FILE *stream)
{
  size_t len = 0;  // Size of the buffer, ignored.

  ssize_t chars = getline(lineptr, &len, stream);

  if((*lineptr)[chars] == '\n') {
    (*lineptr)[chars] = '\0';
    --chars;
  }

  return chars;
} 
```

它编译和链接没有问题，但换行符不会被空终止符替换。我已经验证 if() 语句正在运行。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-21T17:05:44.887

`getline`返回读取的字符数。所以你必须使用`chars-1`而不是`char`.

```
if ((*lineptr)[chars - 1] == '\n') 
  {
      (*lineptr)[chars - 1] = '\0';
      --chars;
  } 
```

> **男人getline (3)**
> 
> 成功时，`getline()`返回`getdelim()`读取的字符数，包括 > 分隔符，但不包括终止空字节。该值可用于处理读取的行中嵌入的空字节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T17:05:31.240

您要检查并替换最后一个字符，而不是**后面**的那个。

```
if ((*lineptr)[chars - 1] == '\n') {
    (*lineptr)[chars - 1] = '\0';
} 
```

（`getline()`返回读取的字符数，就像`strlen()`返回字符串的长度一样，**不包括**终止的 0 字符。）

# python - XMPP SSL 握手失败

> ID：13000051
> 
> 赞同：5
> 
> 时间：2012-10-21T17:02:28.177
> 
> 标签：python, xmpp

我很难与 XMPP (Prosody) 建立联系。但是，如果我使用 PSI，它可以正常工作并请求您的建议。

这是我的 python 的代码片段：

```
client = xmpp.Client(host)
client.connect(server=(host,port))
client.auth(username, passwd,resource='', sasl=1)
client.sendInitPresence() 
```

在调试模式下：

```
DEBUG: dispatcher  warn  Registering protocol "error" as <class 'xmpp.protocol.Protocol'>(http://etherx.jabber.org/streams)
DEBUG: socket      sent  <?xml version='1.0'?><stream:stream xmlns="jabber:client" to="localhost" version="1.0" xmlns:stream="http://etherx.jabber.org/streams" >
DEBUG: socket      error Socket error while receiving data
                         Traceback (most recent call last):
                            File "/usr/local/lib/python2.7/dist-packages/xmpp/transports.py", line 161, in receive
                            try: received = self._recv(BUFLEN)
                            error: [Errno 104] Connection reset by peer
DEBUG: client      stop  Disconnect detected
DEBUG: socket      error Socket operation failed
                         Traceback (most recent call last):
                            File "/usr/local/lib/python2.7/dist-packages/xmpp/transports.py", line 161, in receive
                            try: received = self._recv(BUFLEN)
                            error: [Errno 104] Connection reset by peer
DEBUG: socket      error Socket error while receiving data
DEBUG: client      stop  Disconnect detected

**Prosody logs :** 
Oct 20 23:46:39 c2s94ba718      info    Client connected
Oct 20 23:46:39 c2s94ba718      info    Client disconnected: ssl handshake failed
Oct 20 23:46:39 c2s94ba718      info    Destroying session for (unknown) ((unknown)@(unknown))
Oct 20 23:48:57 c2s96052a0      info    Client connected
Oct 20 23:48:57 c2s96052a0      info    Client disconnected: ssl handshake failed
Oct 20 23:48:57 c2s96052a0      info    Destroying session for (unknown) ((unknown)@(unknown)) 
```

对此的任何建议将不胜感激。目的是连接到 XMPP 服务器并通过 python 加入 MUC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-30T17:35:47.940

我看到您使用的是 Python 2.7，请确保您已更新到最新版本 (2.7.11)，因为最近有一些 SSL 更改可能会破坏大量代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T13:40:28.810

当我没有在服务器端提供证书链时，我在 Pidgin（libpurple 2.10.11）中遇到了这个错误。

我通过在服务器上的证书末尾添加 CA 捆绑包（即*中间证书）解决了这个问题：*

```
cat /path/to/ica.crt >> /path/to/prosody.crt 
```

另请参阅[https://prosody.im/doc/certificates#certificate_chains](https://prosody.im/doc/certificates#certificate_chains)了解更多信息

# jquery - jQuery Toggle and hide 或 show hide 有没有比这更好的方法（包括 jsfiddle）

> ID：13000054
> 
> 赞同：2
> 
> 时间：2012-10-21T17:02:31.953
> 
> 标签：jquery

在我正在开发的应用程序中，它主要使用 jQuery 切换来打开和关闭 div。我知道使用 show 和 hide 可以达到同样的效果。我在这个[jsfiddle](http://jsfiddle.net/peter/Srun8/)中有一个例子。任何一种方法都比另一种更好吗？还是有另一种更有效和更合规的方法来打开和关闭 div，只允许一次打开一个？谢谢

如果重要的话，我也会将我的应用程序转移到使用 Twitter Bootstrap

```
<div id="wrapper"> Toggle Method
<div id="action-buttons">
    <a class="button" onclick="$('#boxone').toggle();$('#boxtwo').hide();return false;"><span>One</span></a>
    <a class="button" onclick="$('#boxtwo').toggle();$('#boxone').hide();return false;"><span>Two</span></a>
</div>
<div id="boxone" style="display:none;">Box One</div>
<div id="boxtwo" style="display:none;">Box Two</div>
</div>
<div id="wrapper"> Show Hide Method
<div id="action-buttons">
    <a class="button" onclick="$('#showboxone').show();$('#showboxtwo').hide();return false;"><span>One</span></a>
    <a class="button" onclick="$('#showboxtwo').show();$('#showboxone').hide();return false;"><span>Two</span></a>
</div>
<div id="showboxone" style="display:none;">Box One</div>
<div id="showboxtwo" style="display:none;">Box Two</div>
</div> 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:16:13.293

## *[jsFiddle 演示](http://jsfiddle.net/Srun8/2/)*

*“...允许一次打开一个”*

HTML：

```
<div class="wrapper"> Super method
    <div class="action-buttons">
        <a href="#"><span>One</span></a>
        <a href="#"><span>Two</span></a>
    </div>
    <div class="box">Box One</div>
    <div class="box">Box Two</div>
</div>

<div class="wrapper"> Super method
    <div class="action-buttons">
        <a href="#"><span>One</span></a>
        <a href="#"><span>Two</span></a>
    </div>
    <div class="box">Box One</div>
    <div class="box">Box Two</div>
</div> 
```

CSS：

```
.box{
    display:none;
} 
```

查询：

```
$('.action-buttons').on('click','a',function(e){   
    e.preventDefault();
    var $allbox = $(this).closest('.wrapper').find('.box'),
        $box = $allbox.eq( $(this).index() ),        
        doIt= ($box.is(':visible')) ? $box.slideUp() : ($allbox.slideUp()) ($box.slideDown());   
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:20:06.643

我建议从 HTML 部分中删除样式和操作。

并且不要试图优化它：这些基本的 jQuery 操作没有性能问题，唯一重要的是代码的可读性：确保您的 HTML、CSS 和 Javascript 是显而易见的。不要试图制作太聪明的 javascript ：如果你不能立即看到它的作用，就会存在可维护性问题的风险。并依赖 id、类和特定属性，而不是在您更改页面时无法跟上的 order 属性。

这是我如何改变你的小提琴：http: [//jsfiddle.net/PRVm8/](http://jsfiddle.net/PRVm8/)

HTML：

```
<div id="wrapper"> Toggle Method
<div id="action-buttons">
    <span class="button1"  target=boxone>One</span>
    <span class="button1"  target=boxtwo>Two</span>
</div>
<div id="boxone" class=box1>Box One</div>
<div id="boxtwo" class=box1>Box Two</div>
</div>

<div id="wrapper"> Show Hide Method
<div id="action-buttons">
    <a class="button2"  target=boxone><span>One</span></a>
    <a class="button2" target=boxtwo><span>Two</span></a>
</div>
<div id="showboxone" class=box2>Box One</div>
<div id="showboxtwo" class=box2>Box Two</div>
</div>
​ 
```

Javascript：

```
$('.button1[target="boxone"]').click(function(){
    $('#boxtwo').hide();
    $('#boxone').toggle();
});
$('.button1[target="boxtwo"]').click(function(){
    $('#boxone').hide();
    $('#boxtwo').toggle();
});
$('.button2').click(function(){
    $('.box2').hide();
    $('#show'+$(this).attr('target')).show();
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:19:55.067

我不知道 jQuery 中有更好的方法，但另一种方法是使用：

*   [jQuery UI 手风琴](http://jqueryui.com/accordion/)
    或
*   [jQuery UI 选项卡](http://jqueryui.com/tabs/)。

# java - If 条件下的空指针异常

> ID：13000055
> 
> 赞同：1
> 
> 时间：2012-10-21T17:02:35.663
> 
> 标签：java, nullpointerexception

```
 Product p = dao.checkProduct(pnumber);
     ExpensiveProduct ep = dao.checkexpensiveProduct(pnumber);
     if ((p.getNumber() == null)&&(ep.getNumber()==null) ){ // java.lang.NullPointerException 
     //do something

     }else{
    //do something

      } 
```

为什么这个声明给出了 `java.lang.NullPointerException` 我有没有其他方法来检查这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:04:18.463

此代码可以抛出 NPE 的唯一重要可能性是`pnumber`在`Integer`哪里`checkProduct()`或`checkexpensiveProduct()`期望`int`（或类似）。

其他微不足道的原因是`dao`或`p`正在`null`（易于检查）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T17:04:33.057

试试这样：

```
if ((p != null) && (p.getNumber() == null) && (ep != null) && (ep.getNumber()==null) ){ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T17:04:08.213

`NullPointerException`s (NPE) 当你调用一个方法或访问一个`null`对象的属性时发生。

要检查`null`s，您可以在尝试使用变量之前打印变量的值，或者使用调试器单步执行程序并检查当您到达发生异常的行时变量的值是什么。

编辑：
关于你的评论

> 我需要检查 p.getNumber() 和 ep.getNumber() 都返回 null 并在该语句上获取 ture

您现有的代码

```
if ((p.getNumber() == null)&&(ep.getNumber()==null) ) 
```

已经在这样做了。由于您在那条线上获得了 NPE，因此`p`它本身 is`null`或`ep`is`null`或两者兼而有之。您应该检查您的`checkProduct()`和`checkexpensiveProduct()`方法，在哪里设置`p`和`ep`设置，以查看它们是否正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T17:06:00.710

检查你的 p 变量和 ep 变量。其中一个是 null。检查为什么

```
 dao.checkProduct(pnumber) 
```

或者

`dao.checkexpensiveProduct(pnumber);`正在返回 null

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T17:04:53.107

什么线是给的`NullPointerException`？确保它`p`或`ep`不为空。

# c++ - C ++：如何通过其构造函数的参数初始化类内矩阵的维度？

> ID：13000066
> 
> 赞同：3
> 
> 时间：2012-10-21T17:03:16.077
> 
> 标签：c++, class, parameters, constructor, matrix

我需要一些非常简单的帮助，而 C++ 使这非常困难。我创建了一个 lattice 类，目的是初始化和处理矩阵。有以下私人成员：

```
private unsigned dim;
private double matrix [dim][dim]; 
```

我想通过一个参数在类的构造函数中初始化变量dim，但是编译器不断返回错误。我尝试将 dim 设为 public 和 static 并在主程序中对其进行初始化，但仍然存在问题。我怎么能创建这个简单的类？

此外，我还在类中实现了一些方法来更新矩阵的值。在主程序中初始化类的一个对象，然后使用它的“更新”方法，矩阵的值是否只存储一次？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:15:59.223

（至少）有三种方法可以创建这样的类：

*   与`template`

    ```
    template<size_t dim>
    class Matrix
    {
       private:
         double matrix[dim][dim];
    } 
    ```

*   使用内置类型，例如`std::vector`（例如`valarray`也可以）

    ```
    #include <vector>
    class Matrix
    {
       private:
         size_t dim;
         std::vector<std::vector<double> > matrix;
       public:
         Matrix(size_t dim_) : dim(dim_), matrix()
         {
           matrix.resize(dim);
           for ( size_t i = 0; i < dim; ++i )
              matrix[i].resize(dim);
         }
    } 
    ```

*   使用普通数组（我不建议这样做！）

    ```
    class Matrix
    {
       private:
         size_t dim;
         double** matrix;
       public:
         Matrix(size_t dim_) : dim(dim_), matrix()
         {
           matrix = new double*[dim];
           for ( size_t i = 0; i < dim; ++i )
              matrix[i] = new double[dim];
         }
         ~Matrix() // you need a destructor!
         {
           for ( size_t i = 0; i < dim; ++i )
              delete [] matrix[i];
           delete [] matrix;
         }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:14:48.177

使用模板：

```
template<int dim>
class Lattice{
    double matrix[dim][dim];
} 
```

并在构造函数中初始化 dim：

```
Lattice<10> sampleLattice; 
```

然后`dim = 10`;

您可能会使用指针或向量的向量，但我会使用模板，因为它不太容易混淆和方便。

顺便说一句，您将不得不使用`private:`and `public:`（带冒号）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:14:46.987

我猜你的“问题”是编译器抱怨使用非常量大小的数组初始化。

你应该这样做：

```
class MyClass {
public:
    MyClass(unsigned pdim);
private:
    MyClass();
    const unsigned dim;
    const double matrix [dim][dim];
};

MyClass::MyClass(unsigned pdim) : dim(pdim) {
    // Other things
} 
```

您可以在类中包含 const 成员，但需要使用`:`语法对其进行初始化。

# php - 优化 Doctrine 2 实体关系加载

> ID：13000069
> 
> 赞同：0
> 
> 时间：2012-10-21T17:03:22.473
> 
> 标签：php, doctrine-orm, lazy-loading

我有专辑、内容、文件和评论实体，其中评论和文件是内容的关系，而内容与专辑相关。

我想从单个内容实体中检索所有关系（文件和评论实体）（而不是为任何其他内容加载它们）。对数据库的查询不应超过 2 个。

使用单个查询检索关系并填充实体对象的好方法是什么？

例如

```
$album = $em->createQuery('SELECT a,c FROM Album JOIN a.contents c WHERE a.id = :id')->getOneOrNullResult();

foreach ($album->getContents() as $content) {
    if ($content->getId() == $id) {
         // Load all (relevant) relations for this content in a single query with joins
         $em->MAGIC($content);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T08:20:48.733

我找到了解决方案。通过定义内容，使其当时只能是单个专辑的成员 - 我可以按内容加入专辑，如下所示：

```
$dql = 'SELECT a,c,cc,cf,ac FROM Content c JOIN c.album a JOIN a.content ac JOIN c.comments cc JOIN c.file cf WHERE c.id = :id' 
```

然后 Doctrine 2 魔术确保返回的内容也引用`$album->contents`属性中的相同对象。

最终结果是单个查询。

# wamp - 我无法使用 Aptana Studio 3 启动 PHP 文件

> ID：13000073
> 
> 赞同：0
> 
> 时间：2012-10-21T17:03:48.603
> 
> 标签：wamp, aptana3

我最近下载了 Aptana Studio 3 并将其安装在我的计算机上。我还通过在窗口 > 首选项 > 网络服务器中导航来配置 aptana 中的网络服务器，然后单击新按钮并选择“外部网络服务器”。然后填写所有字段，

*   名称：WampServer
*   基本 URL://localhost
*   C:\wamp\www
*   启动命令：NET START wampapache
*   停止命令：NET STOP wampapache

之后，当我要通过单击 Aptana Studio 上方的绿色按钮来测试我的 php 时，选择“运行 firefox-Internal Server”...firefox 打开但它显示空白页...

这是 URL 中显示的内容

```
http://127.0.0.1:8020/TestAptana/Hello.php 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:58:14.907

如果您的代码正确，请尝试此操作。我使用 XAMMP 作为我的服务器，所以我不确定这是否适用于 WAMMP。

转到运行配置选择 Web 浏览器，然后选择要使用的浏览器。然后在**服务器**下的主选项卡中找到**“使用基本 URL”**并单击它。输入`http://localhost/`并确保选中**“追加项目名称”**。

如果您使用的是 php，请确保您的索引页面的名称是 index.html 或 index.php 并尝试运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-02T22:11:13.423

我也有这个问题，但是您需要做的另一件事是设置 PHP.exe 的路径。

通过转到 Preferences/Aptana Studio/Editors/PHP/PHP Interpreter 来执行此操作。在 php.exe 中添加并填空（浏览）。

# objective-c - 有没有更好的方法从表视图加载视图控制器？

> ID：13000076
> 
> 赞同：0
> 
> 时间：2012-10-21T17:03:56.077
> 
> 标签：objective-c, ios

这可能是一个非常基本的问题，但我还没有找到答案。我有一个 UITableView 作为我的应用程序的菜单。表格视图上的每一行，当被选中时，都会打开一个不同的 UIViewController 子类。

目前，我的代码的工作方式与 Apple 的 UICatlog 示例中使用的方式相同。在主视图控制器（表格视图）中，每个菜单项都在一个数组（menuList）中的字典中进行描述。每个字典都包含该屏幕的 UIViewController 子类的实例和有关菜单项的其他数据。当用户选择一行时，didSelectRow atIndexPath 启动并调用适当的视图控制器，存储在 menuList 数组的 indexPath.row 的字典中。

在表视图首次加载时分配和初始化每个视图控制器似乎非常浪费。

我的问题是：有没有比 UICatalog 中展示的更好的方法来分配/初始化我的视图控制器子类，只有当关联的行被点击时？（我知道我可以在 didSelectRow 中使用复杂的 if..else 结构，但这会导致 didSelectRow 方法非常长并破坏封装。我想知道是否有更简洁的方法来执行此操作，分配和初始化适当的基于视图控制器字典中的数据）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:45:59.303

user1349768 尝试使用 Storyboard，但此功能仅适用于 iOs 4 及更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:02:51.237

只是一个建议......将对每个视图控制器的一些引用放入 NSArray 中，然后在该行被点击时启动并继续它们（并且只需从 objectAtIndex 获取引用:)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T19:06:41.013

虽然我找不到更好的方法来做到这一点，但每个分配的 View Controller 的内存签名只有 288 字节。由于苹果建议的解决方案比使用 switch case 语句更优雅和可扩展，所以我保持原样。

# jmeter - 在非GUI模式下编写jmeter脚本

> ID：13000087
> 
> 赞同：1
> 
> 时间：2012-10-21T17:04:41.850
> 
> 标签：jmeter

对于我的项目，我需要以非交互模式从命令行编写 jmeter 测试计划并将结果保存到文件中，然后将其导出到 mysql 数据库。

知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:46:44.407

您通常不会在非 gui 模式下编写脚本。

您以非 gui 模式运行它们。

将它们保存为 CSV 并在使用手动编写的代码或某些加载工具 oracle 或其他数据库建议的数据库中进行负载测试后注入数据。

# linq - 仅当使用 lambda 列不为空时，linq 中的 orderby

> ID：13000095
> 
> 赞同：-1
> 
> 时间：2012-10-21T17:05:43.237
> 
> 标签：linq

请让我知道只有当特定列不`null`使用 lambda 表达式时，我才能在 linq 中使用 orderby：

```
var list=  // result returned from sql stored proc 

list.orderby(s=>s.empid!=null).select(p=>p) //something like this 
```

是否可以在列表中包含执行 orderby 的条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:55:46.503

```
var list = _context.Products
                       .Where(p => p.EmpId != null)
                       .OrderBy(p => p.EmpId)
                       .Select(p => p) 
```

# c# - 在 C# (WinRT) 中将自定义类放入 ApplicationDataContainer

> ID：13000097
> 
> 赞同：2
> 
> 时间：2012-10-21T17:05:44.350
> 
> 标签：c#, windows-8, windows-runtime, local-storage

我有一个 Windows 8 应用程序。这个应用程序有几个自定义的类。我需要将这些实例的实例存储到独立存储中。据我了解，隔离存储已被 ApplicationDataContainer 取代。目前，我正在尝试以下方法：

```
public class MyClass
{
  private HttpClient service = new HttpClient();

  public string FirstName { get; set; }

  public DateTime? BirthDate { get; set; }

  public int Gender { get; set; }

  public async Task Save()
  {
    // Do stuff...
  }
}

...

MyClass myInstance = new MyInstance();
// do stuff...

try {
  ApplicationDataContainer storage = ApplicationData.Current.LocalSettings;
  if (storage != null)
  {
    if (storage.Values.ContainsKey("MyKey"))
      storage.Values["MyKey"] = myInstance;
    else
      storage.Values.Add("MyKey", myInstance);
  }
} catch (Exception ex)
{
  MessageDialog dialog = new MessageDialog("Unable to save to isolated storage");
  dialog.ShowAsync();
} 
```

我错过了什么。为什么总是抛出异常。例外不是很具有描述性。它只是一个通用的 System.Exception 并且该消息也无济于事。有人可以帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T18:00:31.500

我从上面的代码中得到的异常似乎很清楚：

> 不支持这种类型的数据。

使用Windows[运行时访问应用数据](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx#App_settings)

> 应用设置支持[Windows 运行时数据类型](http://msdn.microsoft.com/en-us/library/windows/apps/br205768.aspx)。
> 
> 请注意，没有二进制类型。如果您需要存储二进制数据，请使用应用程序文件。

您可以使用[ApplicationDataCompositeValue](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdatacompositevalue.aspx)类对必须以原子方式处理的设置进行分组（但它们仍需要支持运行时数据类型）。[应用程序数据示例](http://code.msdn.microsoft.com/windowsapps/ApplicationData-sample-fb043eb2)的场景 4涵盖了这一点。

但是，在您的特定情况下，您可能需要考虑序列化到文件并使用[应用程序文件存储](http://msdn.microsoft.com/en-us/library/windows/apps/hh464917.aspx#App_files)与设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T14:29:50.237

我已经为这个场景实现了我的[ModelStorage](http://www.nuget.org/packages/ModelStorage)框架。

# c++ - C++ for 循环条件

> ID：13000098
> 
> 赞同：0
> 
> 时间：2012-10-21T17:05:47.087
> 
> 标签：c++

我想知道为什么即使 result.bad_matches.size()=0 也会运行这个循环

```
for (int i = 1; i <= result.badmatches.size() - 1; i++)
{
    ...
} 
```

另外，有没有其他方法可以在`badmatches`不使用`if`条件的情况下阻止它在大小为 0 时运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:10:08.917

这取决于`size()`返回的类型。它可能是一个标准容器，因此将是一个无符号类型，并且这些类型会在溢出时环绕。这意味着减一的结果将是该类型的最大值。

要么使用不需要从大小中减去的比较（`<`, `!=`），要么只使用迭代器或 for-auto 循环。在任何情况下，您至少应该使用与嵌套`size_type`容器相同的类型进行迭代，而不是`int`.

```
for(auto& x : result.badmatches) {
 // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:08:05.437

用于 `while(result.badmatches.size())`不执行它。

`result.badmatches.size()-1`这将被转换为 -1。如果它是无符号整数，则 -1 被解释为 0xFFFFFFFF（在 32 位机器上）。这将使循环运行 2^32 或 2^64 次。为避免这种情况，`while()`请像以前一样使用如果您确定`result.badmatches.size()`将返回 0。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T17:12:03.580

size 必须返回一个无符号的，因此 0-1 被升级为无符号，左值也是如此。因此对于 4 字节的 int 大小，-1 将在 unsigned int 中表示为 2^32 -1。

如果您不想要这种行为，那么只需像这样进行转换：**static_cast <signed int >** (result.badmatches.size());

PS：过去 4 年我没有接触过 C++。原谅小错误。

正确的方法是：

```
for (int i=0;i< result.badmatches.size() ;++i)
{

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T17:46:46.743

如果您特别不希望在集合的大小为零时进入此循环，那么您可以检查是否`! badmatches.empty()`假设 badmatches 是一个 STL 容器。但是，如果您的代码结构略有不同，您可能无需这样做就可以克服这个问题：

```
for (size_t i=0; i < result.badmatches.size(); i++)
{
} 
```

我已经将返回的类型更改`int`为`size_t`相同的类型`size()`（无符号整数），将初始值更改为 0 并进行比较，以便它退出`i >= result.badmatches.size()`通常情况下，我会说这是呈现索引的最清晰的方式方法，因为它匹配集合的自然索引，如果您在循环中需要 1、2、3 ... 而不是 0、1、2，那么您可以在其中解决这个问题。

如果您仍然遇到问题，请提出两个问题：

1.  您的循环中是否有任何东西可能会改变 的值`result.badmatches.size()`？
2.  您的代码是否是多线程的，`result.badmatches.size()`可能会因另一个线程上的操作而改变？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T17:52:22.980

在理解了@Prototype Stark @Aga 解释的问题之后，我找到了一个更简单的解决方案，使用它我可以将初始索引保持为 1 。

```
for(int i=1;i+1<=result.badmatches.size();i++) 
```

谢谢大家的帮助，现在清楚多了。

# javascript - Javascript函数定义

> ID：13000099
> 
> 赞同：5
> 
> 时间：2012-10-21T17:05:51.077
> 
> 标签：javascript

> **可能重复：**
> [var fn = function() {…} 和 var fn = function foo() {…} 有什么不同吗？](https://stackoverflow.com/questions/6474425/do-var-fn-function-and-var-fn-function-foo-ever-differ)

从这里

[JavaScript中的函数表达式与声明有什么区别？](https://stackoverflow.com/questions/1013385/what-is-the-difference-between-a-function-expression-vs-declaration-in-javascrip)

我了解声明函数和将它们声明为变量之间存在差异。

但尚不清楚以下之间是否有任何区别：

```
var func_name = function(param, param1){...}; 
```

和：

```
var func_name = function func_name(param, param1){...}; 
```

它们完全一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:19:11.627

在 JavaScript 中有两种声明函数的方法。

### 函数声明

函数声明是*语句*，因此它们以 function 关键字开头，您必须为函数命名。

这些也在代码执行开始之前被解析，所以下面的代码**不会**抛出错误：

```
foo(); // "foo" exists because it was created at parse time
function foo() {
} 
```

### 函数表达式

函数表达式——顾名思义——*表达式*。表达式中的函数被视为任何其他值（例如数字、字符串等），它们的命名完全是可选的。

表达式中的函数是在*运行时*创建的，所以下面的代码**会** 抛出一个期望：

```
foo(); // "foo" does not exist yes because it will not be created until the line below is executed
var foo = function() {
} 
```

### 函数名称

函数名称主要有两个好处。

1.  调用函数声明
2.  从函数内部访问函数对象

如前所述，在表达式的情况下，名称可以省略；因此，创建一个所谓的*匿名函数*

因此，在您的示例中，您有*两个*函数表达式，其中一个是*匿名*函数，另一个不是。

另见：[http ://bonsaiden.github.com/JavaScript-Garden/#function.general](http://bonsaiden.github.com/JavaScript-Garden/#function.general)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:19:13.913

答案是不”。

您始终可以在函数内部通过其名称调用该函数。

```
var func_name = function other_0func_name(param, param1){
..... ;
other_func_name()}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:17:34.477

我很确定这只是为了使调试更容易。

[似乎命名函数可以带来更愉快的调试体验。在调试应用程序时，具有描述性项目的调用堆栈会产生巨大的影响。](http://kangax.github.com/nfe/#named-expr)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T17:27:51.010

```
var func_name = function(param, param1){...}; 
```

将创建一个匿名函数并分配给变量“func_name”

```
var func_name = function func_name(param, param1){...}; 
```

将创建一个名为“func_name”的函数，然后将该函数分配给变量“func_name”

如果您在控制台中测试这两行，您将看到

```
var func_name = function(param, param1){};
console.log(func_name) 
```

会给

```
function (param, param1){} 
```

然而

```
var func_name = function func_name(param, param1){};
console.log(func_name) 
```

会给

```
function func_name(param, param1){} 
```

使用方面没有区别，因此出于您的目的，它们是相同的。希望这可以清除它。

# winforms - 在 VisualStudio2012 的项目属性窗口中使用 TabPages

> ID：13000105
> 
> 赞同：1
> 
> 时间：2012-10-21T17:07:05.200
> 
> 标签：winforms, visual-studio-2012, tabpage

如何在我自己的 windows 窗体项目中使用 Visual Studio 2012 项目属性窗口中的 Tab 控件？（下图）

![在此处输入图像描述](../Images/3e3bcb49cb823c77c7dacee2cc80f79f.png)

# oop - 多态期间内存会发生什么？

> ID：13000107
> 
> 赞同：2
> 
> 时间：2012-10-21T17:07:08.290
> 
> 标签：oop, memory, language-agnostic

我一直想知道，当你将一个对象指针转换为它的基类时，内存到底发生了什么？我假设存储子类中所有成员函数和变量的内存仍然存在，现在只是“禁区”。这是正确的吗？如果是这样，抽象/虚拟函数如何工作？在这种情况下，如何从基类指针调用子类实现？

另外，它是否因语言而异？显然 C++ 使用堆栈和堆，而 Java 只会使用堆。这是否意味着多态关系的内存处理方式不同？

以及诸如私有、受保护甚至虚拟继承之类的东西是如何与此相关的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T17:11:51.293

您要问的是实现细节。
广义上讲，通常的方法是将指向函数指针表的指针存储为对象的一部分（函数不是实际对象内存占用的一部分）并取决于该表的具体对象（ C++ 中的[vtable](http://en.wikipedia.org/wiki/Virtual_method_table)，一些类似的结构在`Java`我想象中）指向实际运行时对象的方法，因此您使用指向基类的指针这一事实不会影响您实际调用派生类覆盖的方法

> 以及诸如私有，​​受保护甚至虚拟继承之类的事情如何与此相关

这与您的问题无关。修饰符（公共/私有/受保护）是*静态*时间构造。即*编译器*根据修饰符强制使用。底层内存在这里无关。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T17:12:34.510

通常，内存根本不会发生任何事情。强制转换只会影响程序中使用它的任何其他人如何使用指针。

查看此链接以获取有关如何实施的更多信息： [http ://en.wikipedia.org/wiki/Virtual_method_table](http://en.wikipedia.org/wiki/Virtual_method_table)

# python - 简单正则表达式，替代开始，替代结束

> ID：13000109
> 
> 赞同：2
> 
> 时间：2012-10-21T17:07:59.850
> 
> 标签：python, regex, scrapy

我有一个小问题，我整天都在努力解决。我认为这很简单，但我无法弄清楚答案。我使用用 Python 编写的*scrapy*。我需要从一些 div 内容中解析生产者名称。

**div的方案是：**

```
<div id=info>...
<html tag, can be p,strong,span,etc>
     Producer(sometimes as Supplier): some code
</end tag>...
</div> 
```

**我使用下一个代码：**

```
l.add_xpath('producer_name', "//div[@class='info']", re=u'Producer:\s*(.*)\s?</p>') 
```

一切正常，直到我找到写“供应商”而不是“生产者”或不同结束标签的页面。

所以我尝试了类似的东西：

```
l.add_xpath('producer_name', "//div[@class='info']", re=u'[Supplier|Producer]:\s*(.*)\s?[</p>|<br>|</span>|</strong>]') 
```

上面的代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:34:10.290

我相信您的正则表达式中需要括号，而不是方括号，即：

```
l.add_xpath('producer_name', "//div[@class='info']", re=u'(Supplier|Producer):\s*(.*)\s?(</p>|<br>|</span>|</strong>)') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:28:07.953

所以，我发现了我的问题。我决定这样做：

```
sudo apt-get install python-django

from django.utils.html import strip_tags

producer_name_in = MapCompose(strip_tags,remove_entities)

desc = hxs.select("//div[@class='desc']").extract()[0]
    producer_name = re.search(u'(Producer|Supplier):(.*?)(<br>|</p>|</span>)', desc)
    if producer_name:
        l.add_value('producer_name', producer_name.group(2)) 
```

# javascript - 平滑的水平滚动绑定到鼠标滚轮

> ID：13000111
> 
> 赞同：10
> 
> 时间：2012-10-21T17:08:19.930
> 
> 标签：javascript, jquery, scroll, mousewheel

这是一个使用鼠标滚轮进行水平滚动的工作示例，但滚动不顺畅。平滑是指像 Firefox 或 Opera 中的普通垂直滚动。

```
$(function() {
    $("html, body").mousewheel(function(event, delta) {
        this.scrollLeft -= (delta * 30);
        event.preventDefault();
    });
}); 
```

（[http://brandonaaron.net/code/mousewheel/docs](http://brandonaaron.net/code/mousewheel/docs)）

我做了一个现场演示来演示这一点。 [http://jsfiddle.net/Dw4Aj/](http://jsfiddle.net/Dw4Aj/)

我希望这个滚动像垂直滚动一样工作，同时具有鼠标滚轮和平滑度。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T04:57:03.820

平滑滚动是浏览器特有的功能。

如果您想要对所有人都有效的东西，那么您需要站在自己这边。jQuery 有多种平滑滚动的实现。

实际上，您甚至可能需要所谓的动态滚动。如果是这样，请尝试[jquery.kinetic](http://the-taylors.org/jquery.kinetic/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T04:53:54.393

第一个我认为是记住最后一个滚动事件时间戳，使用缓动功能，以获得良好的结果[http://jsfiddle.net/oceog/Dw4Aj/13/](http://jsfiddle.net/oceog/Dw4Aj/13/)

```
$(function() {

    $("html, body").mousewheel(function(event, delta) {
        var mult = 1;
        var $this = $(this);
        if (event.timeStamp - $this.data('oldtimeStamp') < 1000) {
            //calculate easing here
            mult = 1000 / (event.timeStamp - $this.data('oldtimeStamp'));
        }
        $this.data('oldtimeStamp', event.timeStamp);
        this.scrollLeft -= (delta) * mult;
        event.preventDefault();
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T05:32:33.957

尝试将您的函数与 .animate() 结合使用

```
$(function() {
    $("html, body").mousewheel(function(event, delta) {
        var scroll_distance = delta * 30
        this.animate(function(){
           left: "-=" + scroll_distance + "px",
        });
        event.preventDefault();
    });
}); 
```

我只是自己做了这个并且它有效。我在我创建的 Web 应用程序上创建了一个 instagram 提要，而我使用的其他插件经常被破坏：

```
$('#add_instagram').on('mousewheel', function(e,d){
    var delta = d*10;
    $('#move_this').animate({
        top: "-=" + delta + "px"
    },3);
    e.preventDefault();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T07:12:03.833

我找到了其他不错的解决方案-使用包装器，因此您可以将绝对滚动到与垂直滚动相同的位置，如果您只需要滚动，没有文本选择或其他（可能可以解决，但我累了）

```
$(function() {

    var scroll = $('.scrollme');
    var h = scroll.parent().height();
    var w = scroll.parent().width();
    var t = scroll.offset().top;
    var l = scroll.offset().left;
    var vertscroll_wrap = $("<div>").height(h).width(10000).css('position', 'absolute').css('top', t).css('left', l).css('z-index', 10000).css('opacity', 0.5).css('overflow-y', 'scroll');
    var vertscroll = $('<div>').height(10000).css('width', '100%').css('opacity', 0.5);
    vertscroll_wrap.append(vertscroll);
    $('body').append(vertscroll_wrap);
    vertscroll_wrap.height('100%');
    vertscroll_wrap.scroll(function() {
        $(scroll).parent().scrollLeft($(this).scrollTop());
    });

});​ 
```

[http://jsfiddle.net/oceog/Dw4Aj/16/](http://jsfiddle.net/oceog/Dw4Aj/16/)

我制作了另一个示例，现在没有全屏包装，并且可以选择 [http://jsfiddle.net/oceog/DcyWD/](http://jsfiddle.net/oceog/DcyWD/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-10T03:39:01.113

我只是把这个留在这里。

[http://jsfiddle.net/Dw4Aj/19/](http://jsfiddle.net/Dw4Aj/19/)

```
jQuery(document).ready(function($) {
$("html, body").mousewheel(function(e, delta) { 
    $('html, body').stop().animate({scrollLeft: '-='+(150*delta)+'px' }, 200, 'easeOutQuint');
    e.preventDefault();
});

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-07T07:58:50.673

只需更改此：

```
this.scrollLeft -= (delta * 30); 
```

对此：

```
this.scrollLeft -= (delta * 1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-02T22:32:26.727

您可以尝试通过简单地使用 scrollBy 来利用浏览器内置的滚动行为：

```
const target = document.getElementsByClassName('whatever')[0];
target.addEventListener('wheel', event => {
    event.preventDefault();
    target.scrollBy({
    left: event.deltaY*0.5,    
    behavior: 'smooth'
}); 
```

})

在浏览器完成平滑滚动之前滚动更多内容有点草率（因为平滑滚动需要一些时间才能完成“动画”），但在某些情况下它可以完成这项工作。

`scroll-behavior: smooth`您也可以通过设置 css 属性，然后`target.scrollLeft = ...`在元素上显式设置来实现相同的目的。这两种方法本质上都使用了浏览器的内置滚动实现（可能除了 Safari 和 IE10，因为它们迄今为止根本不支持这种流畅的行为）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-24T16:05:37.810

当重新滚动到上一个滚动的末尾时，我修复了卡住的问题。

纯js。

```
const el = document.getElementsByClassName('whatever')[0];
let sumDelta = 0
let startLeft = 0
let targetLeft = 0
el.addEventListener('wheel', (e) => {
    if (el.scrollLeft === targetLeft) sumDelta = 0
    if (sumDelta === 0) startLeft = el.scrollLeft
    sumDelta -= e.deltaY
    const maxScrollLeft = el.scrollWidth - el.clientWidth;
    const left = Math.min(maxScrollLeft, Math.max(0, startLeft - sumDelta));
    targetLeft = left
    el.scrollTo({left, behavior: "smooth"})
    e.preventDefault();
}) 
```

# wordpress - 哪个 CMS 会更好用？

> ID：13000116
> 
> 赞同：0
> 
> 时间：2012-10-21T17:08:57.980
> 
> 标签：wordpress, content-management-system

我想创建一个网站，我想在其中放置有关 python 的课程。我在考虑 DLE 或 Wordpess。你会推荐我这些，或者你可以建议其他的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:12:09.710

这是一个相当大的问题，实际上取决于您在最终站点上的目标是什么。

对我来说，我几乎将 Wordpress 用于我建立的所有网站。它非常灵活，特别是由于大量插件可以将功能扩展到您需要的任何内容。

# objective-c - isEqualToString 无法正常工作

> ID：13000117
> 
> 赞同：0
> 
> 时间：2012-10-21T17:08:59.673
> 
> 标签：objective-c, ios, cocoa-touch, calendar

我正在制作一个创建新日历然后使用该日历添加事件等的应用程序。我可以很好地创建日历，但我正在尝试运行检查以查看日历是否存在，等等，不要每次都创建第二个同名的。换句话说，只创建一次新日历。

我正在设置一个 int 变量并运行一个循环来检查设备上每个日历的 title 属性，但是 int 变量永远不会改变，即使我正在搜索的日历名称的字符串匹配。

这是我的“检查日历”代码：

```
-(void)checkForCalendar {

    EKEventStore *eventStore = [[EKEventStore alloc] init];
    NSArray *calendarArray = [eventStore calendarsForEntityType:EKEntityTypeEvent];
    //NSLog(@"%@", calendarArray);

    for (int x = 0; x < [calendarArray count]; x++) {

        EKCalendar *cal = [calendarArray objectAtIndex:x];
        NSString *title = [cal title];
        if ([title isEqualToString:@"AFTP"] ) {
            calendarExists = 1;
        }else{
            calendarExists = 0;
        }
    }

[self createCalendar];

} 
```

这是我为“创建”日历部分所拥有的：（效果很好，我总是得到一个“0”而不是 1 表示`calendarExists`int。）

```
-(void)createCalendar {

    NSLog(@"%d",calendarExists);
    if (calendarExists == 0) {
        EKEventStore* eventStore = [[EKEventStore alloc] init];

        NSString* calendarName = @"AFTP";
        EKCalendar* calendar;

        // Get the calendar source
        EKSource* localSource;
        for (EKSource* source in eventStore.sources) {
            if (source.sourceType == EKSourceTypeCalDAV)
            {
                localSource = source;
                break;
            }
        }

        if (!localSource)
            return;

        calendar = [EKCalendar calendarForEntityType:EKEntityTypeEvent eventStore:eventStore];
        calendar.source = localSource;
        calendar.title = calendarName;

        [eventStore saveCalendar:calendar commit:YES error:nil];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:44:26.300

我认为在您的代码的这一部分中：

```
 if ([title isEqualToString:@"AFTP"] ) {
        calendarExists = 1;
    }else{
        calendarExists = 0;
    } 
```

将变量设置为 1 后需要中断，否则下一轮循环将再次将其设置回 0：

```
 if ([title isEqualToString:@"AFTP"] ) {
        calendarExists = 1;
        break;
    } 
```

# c - c 随机数准时

> ID：13000119
> 
> 赞同：0
> 
> 时间：2012-10-21T17:09:27.317
> 
> 标签：c, random

为什么这个程序只生成0.1-0.2的数字。它需要从 0-1 生成数字。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main (int argc, char *argv[])
{
    /*declare pseudo-random number */
    float random;
    srand(time(NULL));

    random = (float) rand() / (float) RAND_MAX;
    printf("The random number is %f\n", random);

    return 0;
} 
```

我在 Mac 上使用 gcc 进行编译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T17:16:19.347

代码对我来说似乎很好。尝试生成多个数字，然后查看：

```
for(i=1; i<100; i++){
  random = (float) rand() / (float) RAND_MAX;
  printf("%f\n", random);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:32:19.833

```
 int random_seed;
    void __cdecl srand(int data){
       random_seed = data;
    }

    int __cdecl rand (
            void
            )
    {
            return( ((random_seed = random_seed * 214013L
                + 2531011L) >> 16) & 0x7fff );
    } 
```

这是 srand() 和 rand() 在 windows CRT 上的实现。我不确定我是否会因此被 MS 起诉。

显然，您可能必须多次调用 rand() 才能获得介于 0 和 1 之间的正确值。无论 time() 返回什么 [因为它只会设置为 random_seed]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:31:44.413

上面的代码对我来说很好（ubuntu中的gcc），即我的输出从0.1变化到1。尝试运行程序三四次然后查看输出

# python - 提取组

> ID：13000121
> 
> 赞同：1
> 
> 时间：2012-10-21T17:09:35.900
> 
> 标签：python, python-3.x, social-networking

使用 Python 3.2 我希望解决以下问题。我的数据由数百行（表示一个项目）和 21 列组成。其中第一列是唯一的项目 ID，其他 20 列是领导该项目的一组人或个人。person_1 总是被填满，如果 person_3 中有名字，则表示 3 个人一起工作。如果 person_18 中有名字，则表示有 18 个人一起工作。

我有一个按以下方式设置的 excel 电子表格：

```
 unique ID person_1      person _2      person_3     person_4   ...  person_20
    12       Tom           Sally          Mike
    16       Joe           Mike
    5        Joe           Sally
    1       Sally          Mike           Tom
    6       Sally          Tom            Mike
    2       Jared          Joe            Mike        John      ...     Carl 
```

我想做几件事：

1）创建一个列，它将给我一个唯一的“组名”，使用唯一的 ID 1 作为我的示例，Sally/Mike/Tom。所以它将是由'/'分隔的名称。

2）从我的例子中，我如何对待 Sally/Mike/Tom 和 Sally/Tom/Mike 一样。意思是，我想要另一列按字母顺序排列组名（无论实际排列如何），仍然用“/”分隔。

3）这个问题类似于（2）。但是，我希望 person_1 中列出的人很重要。意思是 Joe/Tom/Mike 与 Tom/Joe/Mike 不同，但与 Joe/Mike/Tom 没有区别。因此，将有另一列将 person_1 保留在组名的开头，但如果适用（即，如果项目中有超过 1 个人），则按字母顺序将 person_2 到 person_20。

感谢您的帮助和建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:01:27.297

上一个答案给出了明确的方法说明，但也许您被困在字符串处理或 csv 处理上。两者都在以下代码中进行了演示。相关的字符串方法是`sorted`和`join`。 `'/'.join`告诉`join`用作`/`连接项之间的分隔符。和语句中的列表之间的`+`运算符连接列表。A是一个迭代器，每行传递一个列表，a将列表转换为行并将其写出。您将需要在文件打开等中添加错误测试。用于测试此代码的数据文件显示在代码之后。`tname``writerow``csv.reader``csv.writer`

```
import csv
fi = open('xgroup.csv')
fo = open('xgroup3.csv', 'w')
w = csv.writer(fo)
r = csv.reader(fi)
li = 0
print "Opened reader and writer"
for row in r:
    gname = '/'.join(row[1:])
    sname = '/'.join(sorted(row[1:]))
    tname = '/'.join([row[1]]+sorted(row[2:]))
    w.writerow([row[0], gname, sname, tname]+row[1:])
    li += 1
fi.close()
fo.close()
print "Closed reader and writer after",li,"lines" 
```

文件`xgroup.csv`如下所示。

```
unique-ID,person_1,person,_2,person_3,person_4,...,person_20
12,Tom,Sally,Mike
16,Joe,Mike
5,Joe,Sally
1,Sally,Mike,Tom
6,Sally,Tom,Mike
2,Jared,Joe,Mike,John,...,Carl 
```

如上所述读取数据后，程序将打印`Opened reader and writer`并`Closed reader and writer after 7 lines`在文件中生成输出，`xgroup3.csv`如下所示。

```
unique-ID,person_1/person/_2/person_3/person_4/.../person_20,.../_2/person/person_1/person_20/person_3/person_4,person_1/.../_2/person/person_20/person_3/person_4,person_1,person,_2,person_3,person_4,...,person_20
12,Tom/Sally/Mike,Mike/Sally/Tom,Tom/Mike/Sally,Tom,Sally,Mike
16,Joe/Mike,Joe/Mike,Joe/Mike,Joe,Mike
5,Joe/Sally,Joe/Sally,Joe/Sally,Joe,Sally
1,Sally/Mike/Tom,Mike/Sally/Tom,Sally/Mike/Tom,Sally,Mike,Tom
6,Sally/Tom/Mike,Mike/Sally/Tom,Sally/Mike/Tom,Sally,Tom,Mike
2,Jared/Joe/Mike/John/.../Carl,.../Carl/Jared/Joe/John/Mike,Jared/.../Carl/Joe/John/Mike,Jared,Joe,Mike,John,...,Carl 
```

注意，给定一条数据线

```
5,Joe,Sally,,,,, 
```

代替

```
5,Joe,Sally 
```

上面的程序产生

```
5,Joe/Sally/////,/////Joe/Sally,Joe//////Sally,Joe,Sally,,,,, 
```

代替

```
5,Joe/Sally,Joe/Sally,Joe/Sally,Joe,Sally 
```

如果这是一个问题，请过滤掉空条目。例如， if
`row=['5', 'Joe', 'Sally', '', '', '', '', '']`, then `'/'.join(row[1:])`产生
`'Joe/Sally/////'`, while
`'/'.join(filter(lambda x: x, row[1:]))`和
`'/'.join(x for x in row[1:] if x)`and
`'/'.join(filter(len, row[1:]))`产生
`'Joe/Sally'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:50:04.443

您可以执行以下操作：

1.  `.csv`将文件从 Excel导出到文件
2.  `csv`使用 python 的模块打开该输入文件，使用`csv.reader`
3.  打开另一个文件（输出）以写入它使用`csv.writer`
4.  遍历阅读器中的每一行，进行处理，然后使用编写器进行编写
5.  在 Excel 中导入输出文件

# sql - 不是时 Oracle 缺少括号

> ID：13000124
> 
> 赞同：1
> 
> 时间：2012-10-21T17:09:47.650
> 
> 标签：sql, exists, oracle9i

```
SELECT company_name
FROM empl_company s
WHERE NOT EXISTS 
(
    (SELECT city
     FROM empl_company
     WHERE company_name = 'Small Bank Corporation'
     )
     EXCEPT
    (SELECT city
     FROM empl_company k
     WHERE k.company_name = s.company_name
     ) 
); 
```

我变成了一个错误 ORA-00907：缺少右括号，谁能告诉我有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T17:18:55.197

运算符在 Oracle中`EXCEPT`调用；[`MINUS`](http://www.orafaq.com/wiki/Minus)

```
select company_name
from empl_company s
where not exists (
  select city
  from empl_company
  where company_name = 'Small Bank Corporation'
  MINUS
  select city
  from empl_company k
  where k.company_name = s.company_name
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:53:52.260

从不存在的emp1_company s中选择company_name（从emp1_company中选择城市，其中company_name ='Small Bank Corporation'和城市（从empl_company k中选择城市k.company_name = s.company_name））；

# python - Openpyxl - 对象没有属性'load_workbook'

> ID：13000128
> 
> 赞同：8
> 
> 时间：2012-10-21T17:10:51.937
> 
> 标签：python, openpyxl

我正在尝试使用 openpyxl 加载现有工作簿。但是当我尝试运行[此代码](http://packages.python.org/openpyxl/usage.html#read-an-existing-workbook)时- 我收到以下错误：

```
AttributeError: 'module' object has no attribute 'load_workbook' 
```

`import openpyxl`工作正常，我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-19T07:03:29.213

这些示例适用于更高版本的`openpyxl`. 在 1.1.4 中 main`__init__.py`没有提供快捷方式`load_workbook`的形式

```
from openpyxl.reader.excel import load_workbook 
```

所以你必须这样做而不是：

```
from openpyxl import load_workbook 
```

示例中显示的内容。

# java - Sip INVITE 错误并发送 BYE 消息

> ID：13000129
> 
> 赞同：0
> 
> 时间：2012-10-21T17:11:18.330
> 
> 标签：java, sip, sip-server

你好，我有两个问题，

1-) 当我发送 sip INVITE 消息并收到大于 2xx 的错误时，如果我发送 BYE 消息，这样做是否合理？服务器会回复 BYE 消息吗？

2-) 将为所有 2xx 状态码发送 ACK，并且不会为大于 2xx 的状态码发送 ACK。正确的 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:04:09.290

1) 如果 UAC 接收到`INVITE`响应代码 >= 300 的响应，则没有对话，因此 UAC 或 UAS 都无法发送`BYE`。

2)`ACK`必须将所有最终响应（200 或更多）发送到`INVITE`。对于 >= 300 的响应代码，则事务层处理发送 ACK。对于 2xx 响应，由事务用户 (TU) 层负责。

您将问题标记为`java`- 这与您的问题相关吗？例如，如果您使用 JAIN-SIP API，那么您的应用程序（TU）将不会发送`ACK`问题 2，因为堆栈会自动执行此操作。

# twig - Twig 基于 isxmlhttprequest 扩展

> ID：13000130
> 
> 赞同：3
> 
> 时间：2012-10-21T17:11:30.270
> 
> 标签：twig, silex

我将 Twig 与 Silex 一起使用，并且在 if 语句中扩展时遇到了一些问题。基本上页面正在扩展，即使请求不是由 AJAX 完成的。

```
{% if app.request.isXmlHttpRequest == false %}
 {% extends 'layout.html.twig' %}
{% endif %} 
```

然而，这有效。该按钮仅在请求基于 AJAX 时显示。

```
{% if app.request.isXmlHttpRequest %}
 <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
{% endif %} 
```

还可能值得一提的是，我的代码包含在 {% block content %} 标记中。

有没有人有这个问题的经验？（仅当 isXmlHttpRequest 为 false 时才能扩展）

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T08:02:31.553

试试这个：

```
{% extends app.request.isxmlhttprequest ? "" : "layout.html.twig" %} 
```

在coutains 后面`extends`是一个标记，其解析方式不能围绕它放置任何条件，结果将是你得到的：你的模板总是被扩展的。

我不确定它如何处理空字符串，您可能需要创建一个没有内容但要覆盖的块的“layout-ajax.html.twig”文件。

# xamarin.ios - MonoTouch：在设备上运行时出现 NameResolutionError

> ID：13000131
> 
> 赞同：2
> 
> 时间：2012-10-21T17:11:38.393
> 
> 标签：xamarin.ios, linq-to-xml

尝试在设备上调试我的应用程序时遇到一个奇怪的问题。

```
var url = "http://maps.googleapis.com/maps/api/geocode/xml?sensor=true&address=";
url += pin.Element("address").Value;
var address = XDocument.Load(url); 
```

最后一行给了我这个错误：

```
System.Net.WebException: Error: NameResolutionFailure
at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x00065] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/HttpWebRequest.cs:854
at System.Net.HttpWebRequest.GetResponse () [0x0000e] in /Developer/MonoTouch/Source/mono/mcs/class/System/System.Net/HttpWebRequest.cs:860
... 
```

但这仅在实际设备上。如果我在模拟器中运行它，它会完美运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T17:22:21.630

A `NameResolutionFailure` means a DNS error, likely because the device does not have internet access, no DNS configured or at least a different configuration (e.g. Wifi, 3G) from the one your Mac (running the simulator) is using.

Can you access the internet from your device ? (e.g. airplane mode)

If so can you try to access, on your device from Safari, the `http://maps.googleapis.com` site to see if the DNS servers, configured on your device, can find the host.

# php - 如何检查许多控制器方法正在使用的对象是否存在 DRY 和 Laravel 样式？

> ID：13000134
> 
> 赞同：4
> 
> 时间：2012-10-21T17:11:43.330
> 
> 标签：php, dry, laravel

在 Laravel 控制器中，我有几个方法都从获取数据库记录开始，然后在检查是否找到数据后继续渲染视图，或者在没有数据的情况下转到 404 页面。

这是一个例子：

```
<?php

function get_show_user($id)
{
    $user = static::get_user($user_id);
    if (!$user) {
        return Response::error('404', static::$some_common_error404_message);
    }
    return View::make('users.show_readonly_user_data')->with('user', $user);
}

function get_edit_user($id)
{
    $user = static::get_user($user_id);
    if (!$user) {
        return Response::error('404', static::$some_common_error404_message);
    }

    return View::make('users.display_edit_user_form')->with('user', $user);
} 
```

我`if (!$user)`在这些方法中重复整个声明，即使它们都做同样的事情。

我宁愿做这样的事情：

```
function get_show_user($id)
{
    $user = Users::find($id);
    static::go404_if_null($user);
    return View::make('users.show_readonly_user_data')->with('user', $user);
}

function get_edit_user($id)
{
    $user = Users::find($id);
    static::go404_if_null($user);
    return View::make('users.display_edit_user_form')->with('user', $user);
} 
```

实现这种 DRY 功能的最佳方式是什么？

显然，一个简单`return Response::error('404')`的方法在常见的存在检查器方法中不起作用，因为它只会从该方法返回。

似乎 an`Event::fire('404')`也不理想，因为它不会终止触发它的方法。

也许这里需要使用异常，但我不确定这一点，或者应该如何在 Laravel 中完成。我应该在哪里捕获控制器的 404 异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:05:27.270

我认为解决此问题的最佳方法是控制器上的前置过滤器。

```
public static $require_user = array(
    'edit_user',
    'show_user',
);

public function before()
{
    $route = Request::route();
    if ( in_array( $route->controller_action, static::$require_user ) )
    {
        $this->user = User::find( $route->parameters[0] );
        if ( is_null($this->user) ) return Response::error('404');
    }
} 
```

在构造控制器之后但在调用方法之前调用过滤器之前。如果 before 过滤器返回 null 以外的任何内容，则不会调用该方法并因此停止执行。

在这里，我们获取当前正在执行的路由，因此我们可以检查将针对我们的数组 $require_user 调用哪个方法。这让我们可以使用不需要用户 ID 的方法，例如登录。

然后我们检索用户实例，从传递给方法的内容中获取 id。您可能应该在此处添加更多错误处理。

最后，我们检查返回的用户是否为空，即未找到。如果是这种情况，我们会返回 404 响应，停止执行该方法。

我希望这有帮助！

# objective-c - Objective-C 自变量检查

> ID：13000136
> 
> 赞同：0
> 
> 时间：2012-10-21T17:12:02.613
> 
> 标签：objective-c, initialization

我正在阅读 Cocoa Design Patterns 书籍。在书中，分配`self`变量后，检查是否`self`如下`nil`所示

```
if( nil != self){
// code
} 
```

我还看到了另一种检查自我的方法

```
if( self ){ 
// code 
} 
```

使用这两种技术有什么好处，还是只是偏好问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:05:10.827

### 他们是一样的

`if`块的内容

```
if (expression) {
    // contents...
} 
```

仅在`expression`评估为非零值的情况下执行。

这意味着以下`if`块中的代码

```
//the first if block
if (self) {
    // contents....
} 
```

将在`self`非零时执行。

同时，*这个* `if`块的内容

```
// the second if block
if (self != nil) {
    // contents...
} 
```

每当`self != nil`非零时执行。

运算符在两个比较数（在本例中为和）相同的情况下返回`!=`，在两个比较数不相同的情况下返回。所以第二个块中的代码将在与 不同时执行。`0``self``nil``1``if``self``nil`

但是d在. `nil`_ 因此，第二个块中的代码将在与 不同时执行。这与第一个块中的代码执行的时间完全相同：无论何时非零。`#define``0``<objc/objc.h>``if``self``0``if``self`

### 结果

由于这两种方法导致执行完全相同的代码，因此没有技术上的理由偏爱其中一种。在这种情况下，最重要的风格考虑是初始化器的**一致性**。决定你喜欢哪种风格并在任何地方使用它。

# c# - 如何在 Silverlight 中最好地创建游戏地图

> ID：13000143
> 
> 赞同：0
> 
> 时间：2012-10-21T17:12:47.137
> 
> 标签：c#, silverlight

我正在寻找一些关于如何创建游戏的 2d 布局（步行路径）的想法。瓷砖将是 32x32 像素以及在瓷砖上移动的角色。

目前想到了两种方法，还没有尝试过。

游戏将显示在大约 400x300 或 512x356 大小的窗口中。不会比游戏地图本身可能大于 1000x1000 的窗口大多少。所以大多数时候只有一部分地图是可见的。

因此，就我所想到的而言，这是我的 2 个选项。

**[1]：**在开始时创建整个地图（这可能会增加加载时间，但会更容易移动地图），包括每个对象、玩家、敌人等。

**[2]：**仅创建看到的地图及其周围的 1 个图块（不可见），因此我可以使用故事板使该图可见，并删除超出范围的行/列并再次创建列。

这意味着，如果我有一个 5x5 瓷砖的房间，我加载 7x7 瓷砖。如果我向右移动，我会将所有瓷砖向左移动，并将玩家保持在屏幕中间。然后我删除最左边的一组瓷砖并在右侧创建一组新的瓷砖，希望在故事板完成移动之前完成。

在第二种方法中，我必须考虑的是大于 32x32 的对象。我怎样才能对这些做出最好的反应.. 但是，这是我以后想解决的问题.. 现在我更喜欢了解人们的意见和可能的更好方法。

如果这个问题不适合stackoverflow，我会道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:20:21.550

Just be careful with the "load" word. Loading, means taking the data from the disk/drive and putting it memory. For that, you should load all the current world/map at once, before the game start. Trust me, you don't want to get yourself in dynamic loading stuff while the map is running.

But you only need to load the definition of your map, you don't need to create the instance of the object at that point. So you can create the instance from the map definition as the player walks... but are you really that constraint in memory? I can understand that for a game like Minecraft or Terraria where the map contains virtually millions of tiles... But for 32x32, you can consider making them all when you load the definition.

Of course, whatever the solution, you should only draw/compute/collide/update the tiles that are visible on screen.

# jquery - JQuery 表操作问题

> ID：13000146
> 
> 赞同：1
> 
> 时间：2012-10-21T17:13:05.590
> 
> 标签：jquery, html-table

我有一个表格，显示来自 last.fm API 的某个位置（在本例中为马德里）的事件。我可以使用 AJAX 获取数据，但问题是表格填充很尴尬，因为标题放在表格底部。

这是我的jQuery：

```
$.fn.getEvents = function(location) {
    var onComplete = function() {
      //$('#eventtbl').jExpand();
      $('#evttbldiv').fadeIn(250);
    };

    var $this = $(this);

    var container = $this.html();

    this.each(function() {
       $.getJSON(
        settings.PHP_REQUEST_URL,
        {
          method    : "geo.getEvents",
          api_key   : settings.LASTFM_APIKEY,
          location  : location,
          distance  : settings.MAX_DISTANCE,
          format    : "json"
        },
        function(data) {
          $.each(data.events.event, function(i, item){
            event     = item.title;
            headliner = item.artists.headliner;
            venue     = item.venue.name;
            date      = item.startDate;

            if(i != 0) $('.headers', $this).remove();
            $this.append(container);

            var $current = $this.children(':eq('+i+')');

            $current.find('[class=lfm_event]').append(event);
            $current.find('[class=lfm_headliner]').append(headliner);
            $current.find('[class=lfm_venue]').append(venue);
            $current.find('[class=lfm_date]').append(date);

            if(i == (settings.MAX_TRACKS - 1)){
              onComplete.call(this);
          }
          });
        }
      );
  });
}; 
```

这是我的表格 HTML：

```
<div id="evttbldiv">
      <table id="eventtbl">
          <tr class="headers">
            <th>Evento</th>
            <th>Artista principal</th>
            <th>Local</th>
            <th>Data</th>
            <th></th>
          </tr>
        <tr class="rowdata">
          <td class="lfm_event"></td>
          <td class="lfm_headliner"></td>
          <td class="lfm_venue"></td>
          <td class="lfm_date"></td>
          <td><div class="arrow"></div></td>
        </tr>
        <tr class="rowinfo">
            <td colspan="5">
              hello
            </td>
        </tr>
      </table>
    </div> 
```

这是我调用该方法的方式：

```
 $('#eventtbl').getEvents('madrid'); 
```

[您可以在此处](http://phpdev.dei.isep.ipp.pt/i101524/lastfm-widget/index.html)查看该页面。

我想要发生的是将标题放在顶部，当我使用 抓取数据时`$this = $(this)`，它也会抓取标题。有没有办法保持标题完好无损，只在标题之后注入表格的每一行？使用我当前的代码，我正在获取整个表格，然后如果它不是第一行，则删除标题，这似乎非常低效，最终会弄乱我的表格，如您所见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:28:31.020

您可以使用 .after() 函数：

```
$(header).after(the_html); 
```

希望有帮助

编辑：

你可以使用：

```
$("#yourtable tr:last-child").append(the_html); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:28:40.427

最好用一个`thead`和设置你的桌子`tbody`

```
<div id="evttbldiv">
    <table id="eventtbl">
        <thead>
            <tr>
                <th>Evento</th>
                <th>Artista principal</th>
                <th>Local</th>
                <th>Data</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr class="rowdata">
                <td class="lfm_event"></td>
                <td class="lfm_headliner"></td>
                <td class="lfm_venue"></td>
                <td class="lfm_date"></td>
                <td><div class="arrow"></div></td>
            </tr>
            <tr class="rowinfo">
                <td colspan="5">
                    hello
                </td>
            </tr>
        </tbody>
    </table>
</div> 
```

然后你必须从行数据中分离出标题数据。

```
$('table')
    .find('thead').html(header).end()
    .find('tbody').html(container); 
```

# iphone - 编辑更改在 IOS5 中有效，但在 IOS6 中无效。文本字段：应该更改字符范围：

> ID：13000147
> 
> 赞同：1
> 
> 时间：2012-10-21T17:13:09.367
> 
> 标签：iphone, ios, ipad, ios6, xcode4.5

我有一个在编辑更改时运行计算并更新标签的文本字段。使用 textField 为货币格式化文本字段： shouldChangeCharactersInRange：

标签也被格式化为货币。

在 IOS 5 中，标签会随着数字输入到文本字段中而更新。

在 IOS 6 中，除非在不同的文本字段中输入值，否则标签不会更新。

IOS 6 或 Xcode 4.5 中是否有任何更改以使 Editing Changed 或 textField: shouldChangeCharactersInRange: 工作方式不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:03:31.690

是的，我只是注意到了同样的事情——请注意，只有当 shouldChangeCharactersInRange 返回“NO”时，editingChanged 才会被调用——即便如此我怀疑这是一个错误，应该报告给 Apple。EditingChanged 事件只是 UITexField 从 UIControl 继承的事件，我不明白为什么 Apple 应该阻止它工作，即使 shouldChangeCharactersInRange 返回“NO”，文本字段应该知道是否进行了更改。

我正在做的是将我的代码从 editorChanged 事件直接移动到 shouldChangeCharactersInRange 方法中。意思是，在我返回“NO”的地方，我嵌入了我想在 editorChanged 事件中调用的代码。应该适用于大多数情况。希望这可以帮助。

# ssas - SSAS 2012 计算的成员百分比

> ID：13000150
> 
> 赞同：2
> 
> 时间：2012-10-21T17:13:33.103
> 
> 标签：ssas, mdx

作为 SSAS 新手，我想知道是否可以创建一个计算成员，该成员引用单个行的值以及聚合值以创建百分比？

例如，如果我有一个带有 ValueA 的事实表，我想创建一个基本执行的计算成员：

**[Measures].[ValueA]** *（对于我分割数据的每一行）* **/[Measures].[ValueA]** *（总计）*

此外，我想将总数保留为在多维数据集浏览器中过滤的任何内容的总和。我确信这一定是可能的，但我显然错过了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T12:00:40.293

您可以使用[轴](http://msdn.microsoft.com/en-us/library/ms145531.aspx)功能。她就是一个例子：

```
WITH MEMBER [Measures].[Percentage] AS
     [Measures].[ValueA] / (Axis(1).CurrenMember.Parent, [Measures].[ValueA])
SELECT {[Measures].[ValueA], [Measures].[Percentage]} ON 0,
'what you want' ON 1
FROM your cube 
```

（您可能需要在计算的成员表达式中添加检查）

# javascript - 是否可以从 HTML 代码生成 DOM 代码？

> ID：13000151
> 
> 赞同：2
> 
> 时间：2012-10-21T17:13:38.503
> 
> 标签：javascript, dom

我需要使用 DOM 动态创建元素。我知道如何使用`document.createElement`,`appendChild`方法来做到这一点，但这通常是一个漫长的过程。

假设我想在我的 HTML 页面中添加这个：

```
<div id="my_account" style="visibility:hidden">
  <input id="my_account_close" type="submit" value="Close" onclick="closeMyAccount();">
  <span id="my_account_username">Blabla</span>
  <input id="my_account_username_modify" type="submit" value="Change Name" onclick="modifyUserName();">
  <span id="my_account_email">a@asqs.com</span>
</div> 
```

我是否必须一个一个地创建每个元素并设置所有属性，然后使用`appendChild`方法？是否有一个“魔术”函数可以获取返回父元素的html代码，所以我只需要在最后添加它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:15:01.190

不，您可以只获取整个字符串并将其作为 innerHTML 添加到父 div。

它将成为下一行代码中 dom 的一部分......

```
someParent.innerHTML = myHTMLString;
var d = document.getElementById('my_account');//this will return the first object in your code 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:17:23.953

您可以使用 innerHTML 函数：

```
document.getElementById(element_id).innerHTML="<p>someHtml</p>"; 
```

请注意 JS 不支持多行字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:17:50.663

是的，有一个名为 jQuery 的“神奇”库：http: [//api.jquery.com/append/](http://api.jquery.com/append/)

```
$("div").append("<div class='aaa'>Example</div>"); 
```

# mysql - vb.net 如何创建一个变量来计算作为插入和更新进入的条目

> ID：13000153
> 
> 赞同：2
> 
> 时间：2012-10-21T17:13:45.400
> 
> 标签：mysql, vb.net

我有一个mysql数据库和一个gridview。现在我想计算我的插入和更新。有人建议设置一个变量来表示每个元素，例如 nUpdates 和 nInserts，但我不确定如何做到这一点？这是我正在使用的代码

```
For i = 0 To DataGridView1.RowCount - 1 
Using dbSQL_cmd As New MySqlCommand() 
    student_id = DataGridView1.Item(i, 0).Value.ToString 
    name = DataGridView1.Item(i, 1).Value.ToString 
    age = DataGridView1.Item(i, 2).Value.ToString 
    adress = DataGridView1.Item(i, 3).Value.ToString.ToLower 
    dbSQL_query = "INSERT INTO student  VALUES  (?id, ?name, ?age, ?adress) " + 
           " on duplicate key update name=(name=?name, age=?age, adress=?adress)"
    With dbSQL_cmd
        .Parameters.AddWithValue("?id", student_id)
        .Parameters.AddWithValue("?name", name)
        .Parameters.AddWithValue("?age", age)
        .Parameters.AddWithValue("?adress", adress)
        ' .Parameters.AddWithValue("?status", ?????)
        .CommandText = dbSQL_query 
        .Connection = SQLConnection 
        .CommandType = CommandType.Text 
    End With 
    dbSQL_cmd.ExecuteNonQuery() 
End Using 
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T21:23:39.247

首先，检查插入/更新循环前后表中的行数。它们之间的区别在于您插入的行数。

您知道网格视图中有多少项目。从您的代码中，每个都是插入或更新，因此从项目数中减去您所做的插入数（从第一步开始），这就是您更新的行数。

# java - 衡量网站的性能

> ID：13000157
> 
> 赞同：0
> 
> 时间：2012-10-21T17:14:13.913
> 
> 标签：java, spring, struts2, ibatis

我一直在研究一个基于 web 的项目，该项目由 struts2、spring2.6 和带有 servlets 的 ibatis 等技术组成，现在的问题是这个项目的结果是一个网站意味着点击起始 url 它的开始但是网站页面太慢意味着从一个jsp切换到另一个需要很长时间，现在我想测量性能并想对其进行优化，以便它可以快一点，请告知哪些工具可以帮助我实现这一点..！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:21:34.817

One tool you could use for benchmarking is [Apache Benchmark](http://httpd.apache.org/docs/2.2/programs/ab.html). Else you may just open the network overview in Chrome (CMD + alt + j for OS X) and see how fast each request is. With the Chrome network viewer you may see how fast pages load, images and so on. This is however client-side based and can't check individual jsp files.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:19:43.307

您可以使用[jmeter](http://jmeter.apache.org)进行性能或负载测试。

在 java 中，您可以尝试分析。像 Eclipse 这样的 IDE 应该有一些选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:44:04.463

[JAMon](http://jamonapi.sourceforge.net/)和[JavaMelody](http://code.google.com/p/javamelody/)是我在这种情况下的首选工具。

# ios - iOS 6 地图教程？

> ID：13000158
> 
> 赞同：-1
> 
> 时间：2012-10-21T17:14:26.507
> 
> 标签：ios, map, ios6, mkmapview, mkpinannotationview

我似乎找不到一个像样的教程来在我的 iOS 6 应用程序中使用地图。我得到了添加 MapView 的部分，但我想在自定义位置添加图钉。我希望我的图钉在左侧有标题、副标题和图片。我不确定我是否需要一个定制别针。我还希望有一个详细信息披露指标可以转到另一个页面。应该是那么复杂，但我不知道从哪里开始。请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T07:15:15.957

你去...一个非常好的iOS6教程与新的MapKit。帮了我很多。享受...

[http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial](http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial)

# zend-framework - 是否可以使用 zend_mail 发送多个电子邮件附件？

> ID：13000160
> 
> 赞同：1
> 
> 时间：2012-10-21T17:14:28.673
> 
> 标签：zend-framework, sendmail, zend-mail

我发现了几个使用 zend_mail 发送单个电子邮件附件的示例。但我不知道如何发送多个附件。如果可能的话，有人可以分享如何做到这一点。我在服务器上安装了 sendmail。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:21:35.237

是的，它可以发送多个附件`Zend_Mail_Message`。

根据您用于创建附件的方法，只需为`$mail->createAttachment()`每个附件调用一次，或者将所有附件创建为`Zend_Mime_Part`对象并`$mail->addAttachment($part)`为每个附件调用一次。

有关示例，请参阅[Zend 邮件附件](http://framework.zend.com/manual/1.12/en/zend.mail.attachments.html)。只需为您要附加的每个文件重复该示例一次。

# php - MySQL - 通过 PHP 中的 ID 从列中获取值

> ID：13000172
> 
> 赞同：3
> 
> 时间：2012-10-21T17:15:26.537
> 
> 标签：php, mysql

我有一个具有以下结构的数据库：

```
id  msg
1  'Hello'
2  'Bye' 
```

我需要为“id”获取“msg”值。

这是我的尝试：

```
$text = mysql_query("SELECT msg FROM text WHERE text (id) ='$msg_num'"); 
```

但它不起作用:(你有建议吗？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T17:18:01.763

消除`text`

```
$result = mysql_query("SELECT msg FROM text WHERE id ='$msg_num'");
while ($row = mysql_fetch_array($result)) 
{
    $text = $row['msg'];  
} 
```

您的代码易受攻击`SQL Injection`请阅读下面的文章，

[如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T17:17:18.643

改变

```
mysql_query("SELECT msg FROM text WHERE text (id) ='$msg_num'"); 
```

到

```
mysql_query("SELECT msg FROM text WHERE id ='$msg_num'"); 
```

这种类型的查询可能是[MySQL 注入](https://stackoverflow.com/questions/134099/are-pdo-prepared-statements-sufficient-to-prevent-sql-injection)攻击的原因。使用准备好的语句来停止一阶注入非常好。

1) mysqli

2）PDO

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T17:17:33.223

```
select id from text where id = '$msg_num' 
```

此查询的不同之处在于它选择了列。没有名为“msg”的列，这就是值。

编辑：对不起，读错了表格（横向）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T17:17:44.823

语法错误。

```
$text = mysql_query("SELECT msg FROM text WHERE text (id) ='$msg_num'"); 
```

应该：

```
$text = mysql_query("SELECT msg FROM text WHERE id='$msg_num'"); 
```

你可以用它`mysql_error()`来诊断这样的事情。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-21T17:17:54.850

```
$text = mysql_query("SELECT msg FROM text WHERE id ='$msg_num'") or die(mysql_error()); 
```

# php - PHP 正则表达式修复被黑的 Wordpress 网站

> ID：13000177
> 
> 赞同：2
> 
> 时间：2012-10-21T17:15:58.107
> 
> 标签：php, regex, wordpress, sed

我有一个客户安装了多个 Wordpress，但他没有及时更新。结果，他被黑了。虽然我试图找出黑客是如何进入的，并永久解决问题，但我正在尝试创建一个脚本来快速、自动地修复它们。

我找到了这个脚本，它可以满足我的要求：[http ://designpx.com/tutorials/wordpress-security/](http://designpx.com/tutorials/wordpress-security/)

它会自动`<?php eval(base64_decode("aWY..."); ?>`从每个 php 文件中删除 ，但它用于执行此操作的正则表达式，`<?php get_header(); ?>`如果它遵循恶意代码，也会删除。

所以，我想要改变它，所以它只删除恶意代码，而不是第一行 php 代码。这是执行替换的脚本部分：

```
find $dir -name "*.php" -type f \  
|xargs sed -i 's#<?php /\*\*/ eval(base64_decode("aWY.*?>##g' 2>&1 
```

我必须改变什么，所以它停在第一个`?>`，而不是第二个？

**注意**：我知道这是一个快速的临时修复，但它会一直持续到客户决定要修复哪些站点，以及删除哪些站点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T17:19:44.170

1.  备份数据库和主题。
2.  删除 WordPress。
3.  删除任何可疑文件。
4.  安装*最新的*WordPress。
5.  **保持新的 WordPress 文件写保护**
6.  拍打所谓的“管理员”不及时更新。
7.  利润。

不需要一些疯狂的脚本之类的。除非文件被感染，否则对 PHP 的黑客攻击无法发挥作用。删除它解决了这个问题。

是的，即使您在同一台服务器上安装了多个 wordpress，也可以这样做（为什么？！）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T18:24:09.447

除了建议重新安装的评论外，手头的正则表达式问题可能是贪婪。`.*?`占位符应该匹配最少的字符，但在`sed`行长等方面可能有一些限制。（不确定。）

但是为了进一步限制它，你可以`[^>]*`在它的位置使用：

```
 's#<?php /\*\*/ eval(base64_decode("aWY[^>]*?>##g' 
```

这将确保它不会越过收盘`?>`。`base64`无论如何不可能包含这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T17:36:06.840

备份所有内容并使用防病毒软件对其进行扫描。在您的服务器中删除除 wp-config.php 之外的所有 wp 文件，然后转到 wordpress.org 下载最新版本。提取到您的计算机并上传。

检查您的备份主题文件是否受到感染。

# python - 在 Python 中使用 BeautifulSoup 库

> ID：13000180
> 
> 赞同：2
> 
> 时间：2012-10-21T17:16:18.083
> 
> 标签：python, beautifulsoup

我正在学习使用 Python 和 Beautiful Soup 库创建地图的教程。

我已经下载了美丽的汤，文件夹名为“beautifulsoup4-4.1.3”。此文件夹的内容在附件中。

在教程中，我得到了以下代码，用于导入我的数据和漂亮的汤：

```
import csv
from BeautifulSoup import BeautifulSoup 
```

问题是美汤文件夹中没有名为“美汤”的文件。我还附上了我在终端中收到的错误消息。

当没有该名称的文件时，我应该如何导入美丽的汤？我尝试简单地将文件夹名称更改为“美丽的汤”。我没想到它会起作用，我是对的——它没有。

欢迎对如何进行的任何建议？

![在此处输入图像描述](../Images/b4ecb784b14439daafd035547e72abf0.png)

![美丽的汤目录](../Images/ee093a9b27a35f6ea1502e92ed2b68b9.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T17:25:43.213

您安装了 BeautifulSoup 库版本 4，该库已重命名：

```
from bs4 import BeautifulSoup 
```

如果您想要旧名称和匹配 API，则需要安装 BeautifulSoup 3：

```
easy_install BeautifulSoup 
```

请注意，由于您的教程正在使用`from BeautifulSoup import BeautifulSoup`它可能无法完全与 BeautifulSoup 版本 4 的更新 API 一起使用。如果遇到问题，请查看 BeautifulSoup 文档的[移植到 BS4](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#porting-code-to-bs4)部分，以将 BS 3 代码“翻译”为 4 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T17:26:17.563

要使用 BeautifulSoup 4，您需要：

```
from bs4 import BeautifulSoup 
```

在我看来，您正在阅读错误的手册。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T17:27:30.533

将文件夹移动到`bs4`与脚本相同的目录中，或者通过`easy_install`或安装模块`pip`。然后你可以像这样导入它：

```
from bs4 import BeautifulSoup 
```

# ruby-on-rails - Rails 中的会话到底是什么？从编码的角度来看，它与控制器、模型和视图有什么关系？

> ID：13000181
> 
> 赞同：2
> 
> 时间：2012-10-21T17:16:17.277
> 
> 标签：ruby-on-rails, ruby

您能否提供一个简单的示例，因为我是 Rails 的菜鸟。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:30:34.750

会话是服务器和客户端之间的对话；该对话由一个或多个请求和响应组成。

Rails 为每个会话存储一组变量，以便您可以在请求之间保持每个用户的状态。要访问控制器中的会话，请使用方法`session`. 它的行为类似于哈希，只是它在请求之间自动持久化。如果您在一个请求期间在会话中存储了一些东西：

```
session[:foo] = 'foo' 
```

然后你可以在以后的请求中取回它：

```
@foo = session[:foo] 
```

会话存储最常（但不限于）用于身份验证。如果您使用的是 devise 之类的身份验证 gem，它会使用会话存储来跟踪谁已登录。

Rails（和其他 Web 服务器）中的会话存储实现为键/值存储，由键索引，通常为给定会话随机生成。服务器将该密钥存储在提供给客户端的 cookie 中；客户端的浏览器会在每个请求中返回该 cookie。服务器从 cookie 中检索该密钥并使用它来检索会话状态。Rails 会为您处理所有这些，因此您通常不必担心。

会话存储由控制器管理。视图和模型无法在没有技巧的情况下访问它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T17:43:05.437

会话是一种方法，您可以跨多个请求在前端保存使用操作或数据，然后将它们传递到后端。您将在控制器的后端获取数据，然后在那里使用它。这是一个很好的解释[http://guides.rubyonrails.org/security.html#sessions](http://guides.rubyonrails.org/security.html#sessions)

例如，假设您有一个论坛，用户可以在该论坛上对页面发表评论，但他们只能在登录后发表评论。因此，如果他们未登录或未注册，则当他们点击帖子时，他们将拥有登录。通常在 Rails 中，你会让他们登录或注册，它会将他们重定向到另一个页面，甚至是当前页面。问题是他们丢失了他们键入的所有数据，因此您希望能够保存该数据并将其放回 hte 页面或按照他们的要求将其保存在数据库中。例如，您的 html 中有以下内容

```
<%= reply_form.text_area :body %>
  ...
<% end %> 
```

然后在您的控制器中，您将拥有

```
if session[:text_area]
  params["comment"] = session[:text_area]
  .... 
```

这样您就可以按预期将会话传递给参数，控制器将获取评论并为您创建一个新的评论对象。

另一个很好的例子是购物车。如果您没有启用会话，您将无法在在线网站上购物。原因是您在购物车中放了一些东西，然后您浏览更多内容或转到页面购买该商品。每次您点击一个新页面时，它都会向服务器发送一个新请求并向您发送新数据，如果您没有在会话中保存要购买的物品，那么没有其他方法可以查看上次保存的内容请求，以便您丢失购物车数据。

# forms - 具有自定义表单类型的 Doctrine 实体

> ID：13000190
> 
> 赞同：1
> 
> 时间：2012-10-21T17:17:12.340
> 
> 标签：forms, symfony, doctrine-orm, entity

我一直在关注文档中关于创建自定义表单类型的文档： [http ://symfony.com/doc/master/cookbook/form/create_custom_field_type.html#using-the-field-type](http://symfony.com/doc/master/cookbook/form/create_custom_field_type.html#using-the-field-type)

有了给定示例中的 GenderType，我想“拉皮条”我的实体，我正在使用新的 FormType。

```
class Person {

    const GENDER_MALE = "m";
    const GENDER_FEMALE = "f";

    private $gender;

    ....
    /* generated getter/setter  */

    .....

    public function getGenderAsText() 
    {
          return $this->getGender() == self::GENDER_MALE?"male":"female";
    }

} 
```

我的问题，也许有人有好的建议......如何将 GenderType 的优雅与我的模型相结合，选择像魅力一样的形式，以便在模板等中轻松使用......？

**更新**

Alex 指出，如何使用自写的性别树枝扩展来显示特定字段。

当您特别调用字段 {{ item.gender|gender }} 上的扩展时，这就像一个魅力

我有一堆对象，对公共字段使用继承-但是每个类都有一堆唯一的数据。我编写了一些逻辑来提取所有属性，将它们交给模板，然后 TwigExtension 处理渲染：

```
public function dynamicContractFilter($value)
{
    // handle DateTime
    if ($value instanceof \DateTime) {
        return $value->format('d.m.Y');
    }
    ....
    } elseif (is_bool($value)) {
        return $value ? 'yes' : 'no';
    } else {
        return $value;  // plain string
    }

} 
```

我无法确定它是简单的字符串/整数还是“GenderTypedField”..

我想这是 PHP 本身的某种限制，因为它是无类型的..*视线*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:16:30.950

最好的方法是编写一个性别树枝扩展。

这样你就可以在任何地方显示，`m`而`Male`不仅仅是在实体中。它还提供了数据和显示代码之间的清晰分离。`f``Female``Person`

像这样：

```
namespace Acme\DemoBundle\Twig;

class GenderExtension extends \Twig_Extension
{
    const
        MALE   = 'Male',
        FEMALE = 'Female';

    public function getFilters()
    {
        return array(
            'gender' => new \Twig_Filter_Method($this, 'gender'),
        );
    }

    public function gender($token)
    {
        if ('m' === $token)
            return self::MALE;

        if ('f' === $token)
            return self::FEMALE;

        throw new \InvalidArgumentException('Invalid argument, expecting either "m" or "f".');
    }

    public function getName()
    {
        return 'acme_gender_extension';
    }
} 
```

然后你会在你的模板中：

```
{{ person.gender | gender }} 
```

# php - 在 SQLite 3 php 中存储 html 值

> ID：13000192
> 
> 赞同：-1
> 
> 时间：2012-10-21T17:17:21.193
> 
> 标签：php, database, sqlite

我有一个 php 脚本，可以解析 html 页面内容链接和视图，但我需要知道如何将这些内容存储在 sqlite3 数据库中，有什么建议吗？

```
include_once('simple_html_dom.php'); //PHP Simple HTML DOM Parser library  
$html = file_get_html('www.website.com');  

// Find all article blocks
foreach($html->find('div.postbody') as $article) {
 $item['details'] = $article->find('div.content', 0)->innertext;
 $articles[] = $item;
}
print_r($articles); 

try {

$db = new SQLite3('db/mysqlitedb.db');
$db->exec// what type of table should i create
$db->exec// how tell db to store html content from $articles
$result = $db->query('SELECT bar FROM gg');
var_dump($result->fetchArray());

    /* Close connections to Database */
    $db = NULL;
}

catch( PDOException $e ) 
{

    /* Print Error-Messages */
    echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:48:03.467

通常，您将只创建一个表来存储所有片段，而不是每个片段一个表。因此，您在该表中需要的最少字段是用于标识片段和片段本身的内容。根据您的要求，您可能需要添加额外的字段，例如插入片段的日期时间、插入者的用户 ID 等。

该片段将存储为`TEXT`（可以包含文本信息的大型对象数据类型），为简单起见，我将使用`INTEGER`字段作为标识符。根据您想要检索片段的方式，您还可以使用短字符串，例如`VARCHAR`

```
CREATE TABLE fragments(
    identifier INTEGER,  -- a unique identifier
    fragment TEXT        -- the fragment
); 
```

接下来，在您包含在问题中的代码行集合中，您使用的是包装在 PDO 异常中的本机 SQLite 驱动程序。这是否会正常工作是非常值得怀疑的。我建议你坚持 PDO 和准备好的陈述。甚至不要考虑使用拼凑在一起的文字 INSERT 语句，尤其是在插入 html 片段的这种情况下。或者在任何其他情况下，preparedstatements 是针对 sql 注入攻击和相关恶作剧的唯一防水和防弹防御。

```
// open the db.  as this is relatively costly it's typically done outside any loops 
// in the rest of the code
$dbh=new PDO('sqlite:./db/mysqlitedb.db') or die("failed to connect to db");

// let's assume $item contains the fragment and $identifier 
// was initialized with some key value in the mean time
try{
   $stmt = $dbh->prepare("INSERT INTO fragments (identifier, fragment) VALUES (?, ?)");
   $stmt->bindParam(1, $identifier);
   $stmt->bindParam(2, $item);
   $stmt->execute();
} catch(PDOException $e) {
   echo $e->getMessage();
} 
```

这就是基本设置。想不出这些片段的唯一数字键？没问题，将标识符的类型更改`VARCHAR`为表定义中的。

# c++ - 方法无法解决

> ID：13000196
> 
> 赞同：1
> 
> 时间：2012-10-21T17:17:39.110
> 
> 标签：c++, oop, methods

在我的头文件中：

```
Esame();
Esame(string);
Esame(string, Voto); 
```

这是一个 C++ 测试器类：

```
//OK
Esame esame("Algoritmi e strutture dati", 30);
esame.stampaEsame();

//OK
Esame esame2("Metodi Avanzati di Programmazione");
esame2.setVoto(26);
esame2.stampaEsame();

//ERROR 
Esame esame3();
esame3.setVoto(26); //Method could not be resolved
esame3.stampaEsame(); //Method could not be resolved 
```

代码根本无法编译。如果在上面的代码中使用相同的类创建了对象，为什么找不到方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:21:38.833

`esame3()` does'nt call a default constructor. In your case the compiler is thinking that you have declared a **method**

It should be

`Esame esame3;`

**OR**

`Esame esame3=Esame();`

Using `new` to create an object would create an object that would be allocated dynamically..

In that case your class would have to be a `pointer` like this

`Esame *esame3=new Esame;`

You would have to use `->` instead of `.` to access member method or variables..

```
esame3->method1();
esame3->varable1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:18:52.440

`Esame esame3();`是一个函数声明。`esame3`在这种情况下不命名对象。它声明了一个被调用的函数，该函数`esame3`不带参数并返回一个类型为 的对象`Esame`。

这被称为[最令人头疼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)。

要使用默认构造函数创建对象，请使用`Esame esame3;`（无括号）：

```
Esame esame3;
esame3.setVoto(26); 
esame3.stampaEsame(); 
```

# ios - iOS 故事板

> ID：13000200
> 
> 赞同：1
> 
> 时间：2012-10-21T17:17:53.653
> 
> 标签：ios, storyboard, uistoryboard

我有一个适用于 iPad 并使用情节提要的 iOS 单视图应用程序。

*   我有由 xcode (vc1) 创建的默认视图控制器。我在其视图上放置了一个按钮。

*   然后我将一个新的视图控制器（screen2VC）拖到情节提要上。

*   我还创建了一个新的视图控制器子类（vc2SubClass）

*   我通过身份检查器将 screen2VC 关联到这个子类。

*   在 screen2VC 的视图中，我有一个标签。我将标签控制拖到 vc2SubClass 上以创建一个插座。

*   我在 vc1 的按钮和 vc2 的按钮之间创建了一个 segue。

*   在 performSegue 覆盖中，我有以下代码：

```
if ([segue.identifier isEqualToString:@"segue1"])
{
    screen2VC* vc = [segue destinationViewController];
    vc.label1.text = @"screen 2";
} 
```

当我运行代码并按下按钮时，segue 工作并在两个视图之间转换就好了，但 screen2VC 的标签从未设置为“屏幕 2”。作为测试，我将`label1.text = @"screen 2";`代码放入 vc2SubClass，但这并没有什么不同。似乎 screen2VC 和 vc2SubClass 之间仍然没有关联，即使前者是后者的子类并且标签指向 UILabel 出口。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:26:23.307

When you're in `performSegue:` of vc1, vc2's view hierarchy has not yet been set up. The normal way of doing this is to have a property in vc2 that temporarily is given the string during `performSegue:`. This property is then used to update the label in vc2's `viewWillAppear:`.

(When you say *"As a test, i placed the 'label1.text = @"screen 2";' code in vc2SubClass but that makes no difference"* I'm not sure what's going on there. What method was that code put into?)

# android - 如何在 ArrayAdapter 的列表开头添加对象？

> ID：13000217
> 
> 赞同：25
> 
> 时间：2012-10-21T17:19:31.613
> 
> 标签：android, android-arrayadapter

ArrayAdapter 具有`add(T object)`在列表末尾添加对象的方法。有没有办法在列表的开头添加对象？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-21T17:22:22.900

您可以使用该[`.insert(T object, int index)`](http://developer.android.com/reference/android/widget/ArrayAdapter.html#insert(T,%20int))方法，将`0`其用作索引：

```
yourAdapter.insert(object, 0); 
```

# javascript - CSS/Jquery 选择框 - 选择的选项不能左对齐？

> ID：13000222
> 
> 赞同：0
> 
> 时间：2012-10-21T17:19:57.133
> 
> 标签：javascript, jquery, css, drop-down-menu, jquery-selectbox

我一直在疯狂地试图让选定的选项像所有下拉选项一样左对齐。

我插入了“文本对齐：左；” 在每个 CSS 选项中，但无济于事。

我已经决定 javascript 代码必须对所选选项的对齐做一些事情，但我对 javascript 的熟练程度不足以找到可能导致这种情况的原因。

代码位于[http://jsfiddle.net/X97cN/](http://jsfiddle.net/X97cN/)

CSS：

```
.ww-selectbox-div { margin-bottom:20px;margin-top:20px;}
.ww-selectbox a{ text-decoration:none;  font-family:Arial;  font-size:13px;  font-weight:bold;}
.ww-selectbox .ww-select-area a span.center{ background-color:#fff; padding:5px 40px 5px 30px;  border:1px solid #aaa;  border-radius:5px;  box-shadow:0 2px 3px #333;  color:#444}
.ww-selectbox .ww-select-area a:hover span.center, .ww-selectbox .ww-select-areaactive a span.center{background-color:#eee;  background-image:-moz-linear-gradient(center top,#FFF,#eee 5px,#eee 5px,#eee);  background-image:-webkit-gradient(linear,left top,left bottom,from(#FFF),color-stop(0.2,#eee),color-stop(0.5,#eee),to(#eee));  color:#777;  box-shadow:0 2px 3px #555}
.ww-selectbox .ww-select-areaactive a span.center{ border-radius:5px 5px 0 0}
.ww-selectbox .ww-select-area a span.arrow{ border-left:1px solid #AAA;  height:8px;  margin:5px 0 0 -23px;  padding:2px 0 2px 5px;  position:absolute;  width:8px;  background:url("../images/navigation/arrow_bottom.png") no-repeat scroll 5px 2px transparent;  z-index:99}
.ww-selectbox .ww-select-areaactive a span.arrow{background:url("../images/navigation/arrow_top.png") no-repeat scroll 5px 2px transparent}
.ww-selectbox .ww-select-options{ background-color:#FFFBD9;  position:absolute;   border:1px solid #aaa;  border-top:none;  margin-top:4px;  border-radius:0 0 5px 5px;  box-shadow:0 2px 3px #555;  z-index:100}
.ww-selectbox .ww-select-options ul{margin:0; padding:0}
.ww-selectbox .ww-select-options ul li { list-style:none; }
.ww-selectbox .ww-select-options ul li.option a{ color:#777;  text-align:left;  display:block;  padding:5px 15px;  border-bottom:dashed 1px #aaa}
.ww-selectbox .ww-select-options ul li.option a:hover{ background-color:#FFF8BA}
.ww-selectbox .ww-select-options ul li.option a.last{border:none; border-radius:0 0 5px 5px} 
```

Javascript：（抱歉，在[http://jsfiddle.net/X97cN/](http://jsfiddle.net/X97cN/)上可以更好地看到格式）

```
(function(a){var m=function(b,h){var d=a(document.createElement("div")).addClass("ww-selectbox").insertBefore(b);d.append('<div class="ww-select-area"><a href="javascript:void(0);"><span class="center">'+b.find(":selected").text()+'</span><span class="arrow arrowdown"></span></a></div>');var f=a('<div class="ww-select-options" style="display:none;"></div>').appendTo(d),c=a("<ul />").appendTo(f),e="",i="",g=b.find("option");g.each(function(b,j){j=a(j);e=j.val()?j.val():j.text();i=b+1==g.length?'class="last"':
"";c.append('<li class="option"><a href="javascript:void(0);" value="'+e+'" '+i+">"+j.text()+"</a></li>")});h.height>0&&c.height(h.height).css({"overflow-x":"hidden","overflow-y":"auto"});b.hide();return d},n=function(b,h,d){var f=a(b).find(".ww-select-area"),c=f.find("a"),e=c.find(".center"),i=a(b).find(".ww-select-options"),g=i.find("a"),l=function(a){c.width("").width(c.width());if(a.width>0&&c.width()>a.width){c.width("");var b=e.html().split("");e.html("");for(var d=0;c.width()+8<a.width&&d<
b.length;)e.html(e.html()+b[d]),c.width("").width(c.width()),d++;e.html(e.html()+"...");c.width(a.width)}a=g.first().outerWidth()-g.first().width()+(i.outerWidth()-i.width());g.width(c.outerWidth()-a)};c.click(function(){f.hasClass("ww-select-areaactive")?k(f,i):i.slideDown("fast",function(){g.removeClass("last");g.filter(":visible").last().addClass("last");f.addClass("ww-select-areaactive")})});g.click(function(){e.html(a(this).html());g.show().removeClass("last");a(this).hide();k(f,i);h.find("option[value='"+
a(this).attr("value")+"']").attr("selected","selected");h.change();l(d)});a(b).mouseenter(function(){a(this).addClass("ww-select-active")}).mouseleave(function(){a(this).removeClass("ww-select-active")});g.filter(function(){return a(this).html()==h.find(":selected").text()}).hide();l(d)},k=function(a,h){h.slideUp("fast",function(){a.removeClass("ww-select-areaactive")})};a.fn.wwselect=function(b){a(this).each(function(h,d){var f={width:0,height:0},c=a(d);b&&a.extend(f,b);var e=m(c,f);n(e,c,f)});a("body").click(function(){a(".ww-selectbox").each(function(b,
d){a(d).hasClass("ww-select-active")||k(a(d).find(".ww-select-area"),a(d).find(".ww-select-options"))})})}})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:23:19.723

那这个呢 ？

```
.ww-selectbox .ww-select-area a span.center { 
 padding:5px 40px 5px 12px;
 /* ... */
} 
```

在这里小提琴：http: [//jsfiddle.net/X97cN/1/](http://jsfiddle.net/X97cN/1/)

# bash - Renaming symbolic links in a shell scripts

> ID：13000228
> 
> 赞同：0
> 
> 时间：2012-10-21T17:20:29.153
> 
> 标签：bash, symlink

Lets say I have 3 symbolic links (pointing to different deployment version files).

```
A -> K
B -> L
C -> M 
```

When I do a new deploy (called H), I would like the end result to look like:

```
A -> H
B -> K
C -> L 
```

The only information that I have are the names of A, B, and C, and the name of H. The names of K, L, M are unknown me but could be found by following the symbolic links.

How would I make a script in bash shell that does that for me?

(Note: A, B, C are the symbolic links created using `ln -s`)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:34:53.030

我不明白为什么您需要知道旧文件名..除非您需要删除它。我写得很快，它似乎工作正常。它不需要旧的发布文件名。

```
!/bin/bash
remove_old()
    {
            rm -f "$1"
    }
make_new()
    {
            ln -s "$1" "$2"
    }

if [ $# -ne 3 ]; then
    {
        echo "Nope, you need to provide..."
        echo "(1) link/file name to be removed."
        echo "(2) link/file name to be created"
        echo "(3) the actual file location for #2"      
    }   
    elif [ ! -f "${3}" ]; then
    {
        echo "Sorry, your target ${3} doesn’t exist or is not accessible"
    }
    elif [ -f ${2} ]; then
    {
        echo "Sorry, the new file already exists...want me to remove it?"
        read remove
        if [ "$remove" = "Y" ]||[ "$remove" = "y"]; then
            {
                rm -f "$2"
                remove_old $1
                make_new    $3 $2   
            }
            else
            {
                exit
            }
        fi               
    }
    else
    {
        remove_old $1
        make_new $3 $2
    }
    fi 
```

这是调试后的输出......

```
bash -xv autolinker.sh my_link my_new_link test_2/test_file 
#!/bin/bash
remove_old()
    {
            rm -f "$1"
    }
make_new()
    {
            ln -s "$1" "$2"
    }

if [ $# -ne 3 ]; then
    {
        echo "Nope, you need to provide..."
        echo "(1) link/file name to be removed."
        echo "(2) link/file name to be created"
        echo "(3) the actual file location for #2"      
    }   
    elif [ ! -f "${3}" ]; then
    {
        echo "Sorry, your target ${3} doesn’t exist or is not accessible"
    }
    elif [ -f ${2} ]; then
    {
        echo "Sorry, the new file already exists...want me to remove it?"
        read remove
        if [ "$remove" = "Y" ]||[ "$remove" = "y"]; then
            {
                rm -f "$2"
                remove_old $1
                make_new    $3 $2   
            }
            else
            {
                exit
            }
        fi               
    }
    else
    {
        remove_old $1
        make_new $3 $2
    }
    fi
+ '[' 3 -ne 3 ']'
+ '[' '!' -f test_2/test_file ']'
+ '[' -f my_new_link ']'
+ echo 'Sorry, the new file already exists...want me to remove it?'
Sorry, the new file already exists...want me to remove it?
+ read remove
Y
+ '[' Y = Y ']'
+ rm -f my_new_link
+ remove_old my_link
+ rm -f my_link
+ make_new test_2/test_file my_new_link
+ ln -s test_2/test_file my_new_link 
```

# c# - Exception of type 'System.OutOfMemoryException' was thrown while uploading Blob

> ID：13000230
> 
> 赞同：3
> 
> 时间：2012-10-21T17:21:18.943
> 
> 标签：c#, memory, azure

Im trying to compress a large 8gb file and upload the compressed file into Blob. The Compressed File Size comes to around 800MB. Now when i try to upload into Azure, I get exception' System.OutOfMemoryException" Im Compressing atleast 3-4 Files while are of size 3Gb, 4GB, 8GB in parallel and Keep the uploading into BLOB.

Here is the code for Compressing

```
 public string UploadFile(string fileID, string fileName, string choice,Stream CompressedFileStream)
    {
       byte[] data = new byte[CompressedFileStream.Length];
        CompressedFileStream.Read(data, 0, data.Length);
        long fileSize = CompressedFileStream.Length;
        inputStream.Dispose();   

   }

        blob.ServiceClient.WriteBlockSizeInBytes = 4 * 1024 * 1024;
        blob.ServiceClient.ParallelOperationThreadCount = 5; 
        //this will break blobs up automatically after this size
        blob.ServiceClient.SingleBlobUploadThresholdInBytes = 12582912;
        startTime = DateTime.Now;
                    using (MemoryStream ms = new MemoryStream(data))
                    {
                        ms.Position = 0;
                        blob.UploadFromStream(ms);
                    } 
```

Im runnning on 64 bit windows 2k8 server and 4GB ram. Is it RAM Issue or Any Address Space Issue. Please help me on this issue

-Mahender

-Mahender

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T17:27:02.803

您很少像这样将大文件加载到内存中。您通常*应该*做的是循环使用较小的缓冲区（8k、16k 等），并将其*作为流*上传。取决于完整的场景是什么，也许只是：

```
blob.UploadFromStream(compressedStream); 
```

如果您需要进行预处理工作（并且您不能按原样传递流），则使用临时文件（再次，通过较小的缓冲区进行压缩/解压缩），然后将文件交给 -流到上传 API。

溪流的**全部意义**在于它是软管而不是水桶。您**不应该**尝试一次将所有内容都保存在内存中。

有对象大小和数组大小限制阻止您拥有 8GB 字节数组。当有**要求时**，加载巨大的对象有一些邪恶的方法，但是：在这种情况下，这将是完全不合适的。很简单——你只需要正确使用流 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:29:25.937

可能有 2 个问题，因为您的帖子并不清楚。

**1）如果**您的代码**不是**针对体系结构编写的，这可能是 .NET Framework 问题`64bit`。在这种情况下，您的`CLR`进程有 3GB（非常近似）的内存限制。

2）您的代码是“本机”64 位应用程序：因此您分配了太多内存。可能的解决方案：

a）减少数据传输到内存块中（如果这在您的情况下是可能的）

b）使用流并且不加载所有数据（如果可能的话）

**编辑**

此外，正如 Marc 注意到的那样：数组 in `CLR`(independent from the architecture) 还有另一个内存限制，在您的情况下也可能超过。

希望这可以帮助。

# mysql - 从另一个表中选择一列的值并显式提供其他值

> ID：13000234
> 
> 赞同：1
> 
> 时间：2012-10-21T17:21:51.920
> 
> 标签：mysql, sql, select, phpmyadmin, insert-into

我有 2 张桌子：

```
cities(city_id|Serial, city_name|Text, state_id|Integer)
states(state_id|Serial, state_name|Text) 
```

我想在“PortBlair”中插入一行`cities`，`city_name`并`state_id`从`states`where中获取对应的行`state_name="Andaman"`。

**我的查询**：

```
INSERT INTO cities (city_name,state_id) 
VALUES ('PortBlair',select state_id from states where state_name='Andaman') 
```

**MySQL 中的错误**：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'select state_id from states where state_name='Andaman')' at line 1 
```

**问题1**：这个说法有什么问题？我错过了一些引号/反引号/撇号吗？

**问题**2：如果插入语句的顺序相同，我是否应该依赖`Serial`数据类型，它总是会生成相同的 Id？我的意思是，我应该把`state_id`自己写成：

```
INSERT INTO cities (city_name,state_id) VALUES ('PortBlair',1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:24:31.933

您需要用括号括起来选择语句，因为您正在获得价值，

```
INSERT INTO cities (city_name,state_id) 
VALUES ('PortBlair', (select state_id from states where state_name='Andaman')) 
```

但更好地使用`INSERT INTO...SELECT`语句

```
INSERT INTO cities (city_name,state_id) 
SELECT 'PortBlair' as city_name, state_id
FROM states 
WHERE state_name = 'Andaman' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:24:54.017

Q1：

```
INSERT INTO cities (city_name,state_id) 
select 'PortBlair' as city, state_id 
from states where state_name='Andaman' 
```

Q2：

Yes, you can write state_id your self:

```
INSERT INTO cities (city_name,state_id) VALUES ('PortBlair',1) 
```

# sql-server - SQL Import and Export Wizard to SQL Azure DB failing

> ID：13000235
> 
> 赞同：1
> 
> 时间：2012-10-21T17:22:03.883
> 
> 标签：sql-server, ssis, azure-sql-database

I'm trying to move data and schema from a hosted SQL Server 2008 instance to a SQL Azure DB and I'm using the SQL Import and Export Wizard in SQL Management Studio.

It almost works, but I get an error:

`Tables without a clustered index are not supported in this version of SQL Server. Please create a clustered index and try again.`

This makes no sense, as I have clustered indexes on all my tables. I did see this Q&A on SO but if I switched to **.Net Framework Data Provider for SqlServer** I get a different error:

`Cannot get the supported data types from the`, which is the very problem that A is supposed to solve.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:32:12.453

我建议使用其他一些工具，例如 SqlAzureMW ( [http://sqlazuremw.codeplex.com/](http://sqlazuremw.codeplex.com/) ) 或 RedGate 的工具，因为 Sql Management Studio 中的导入和导出向导几乎没用:-(

另外，看看这里的一些建议：

[如何将 sql azure 架构复制到另一个 sql azure 数据库](https://stackoverflow.com/questions/12921254/how-to-copy-sql-azure-schema-to-another-sql-azure-database)

# php - Callback functions in php and exceptions

> ID：13000242
> 
> 赞同：5
> 
> 时间：2012-10-21T17:22:51.190
> 
> 标签：php, callback

Currently I'm reading [php's manual about callback functions](http://php.net/manual/en/language.types.callable.php) and found interesting note:

> Callbacks registered with functions such as call_user_func() and call_user_func_array() will not be called **if there is an uncaught exception thrown in a previous callback**.

It's obvious that script run will be interrupted in case of uncaught exception. So, why did authors of php manual additionally write that about call_user_func? Or I misunderstood the statement?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:32:54.903

在我看来，这比文档的一部分更像是一个提醒。所有未捕获的异常在 php 中都是致命的，除非他们在谈论 call_user_func() 无聊，即使您设置了**处理程序**（使用 set_exception_handler）而不是 catch，这听起来像是律师会做的事情。

# git - Redmine + Gitolite - 存储库权限等问题

> ID：13000247
> 
> 赞同：9
> 
> 时间：2012-10-21T17:23:53.893
> 
> 标签：git, redmine, gitolite

我在与 gitolite 存储库相同的服务器上安装了 Redmine。

为了将我的存储库链接到我的 Redmine 实例，我使用以下命令在本地克隆了存储库：

```
git clone --bare --local /home/git/repositories/my-repo.git 
```

正如我在服务器上成功克隆了 repo 一样，我可以按预期浏览 Redmine 上的 repo。

问题是，一旦我这样做了，我就不能再向本地机器上的远程仓库推送任何东西了。

当我尝试

```
git push 
```

我收到以下错误：

```
Counting objects: 15, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (7/7), done.
Writing objects: 100% (8/8), 695 bytes, done.
Total 8 (delta 6), reused 0 (delta 0)
fatal: loose object 455f30c5243ec5b5cc698b1e51bdfb23ee6c1b22 (stored in     ./objects/45/5f30c5243ec5b5cc698b1e51bdfb23ee6c1b22) is corrupt
error: unpack failed: unpack-objects abnormal exit
To git@dev.my-host.org:my-repo.git
 ! [remote rejected] master -> master (n/a (unpacker error))
error: failed to push some refs to 'git@my-host.org:my-repo.git' 
```

有什么想法吗？

编辑#1

gitolite 日志显示以下内容：

```
2012-10-22.10:59:59     13121   ssh     ARGV=drgomesp   SOC=git-receive-pack 'my-repo.git'   FROM=187.65.248.7
2012-10-22.11:00:00     13121           access(my-repo, drgomesp, W, 'any'),-> refs/.*
2012-10-22.11:00:00     13121           trigger,Writable,access_1,ACCESS_1,my-repo,drgomesp,W,any,refs/.*
2012-10-22.11:00:00     13121   pre_git my-repo      drgomesp        W       any     -> refs/.*
2012-10-22.11:00:00     13121           system,git,shell,-c,git-receive-pack '/home/git/repositories/my-repo.git'
2012-10-22.11:00:00     13121   END 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-26T12:18:07.990

通过遵循一些简单的步骤，我设法让它将原始存储库指向 Redmine，因为它们都位于同一台机器上：

1.  使用 gitolite 存储库的原始存储库在 Redmine 上添加存储库。路径将类似于`/home/git/repositories/my-repo.git`.

2.  最初，Redmine 没有读取存储库的任何权限，因此我们通过运行将 Redmine 用户（通常为`www-data`或`apache`）添加到`git`组中来解决问题`usermod -a -G git www-data`（请注意您的服务器配置，因为这可能会有所不同，根据关于你如何配置 gitolite。

3.  `UMASK`将文件的属性`.gitolite.rc`从默认值更改`0077`为`0022`，相当于`755 (rwxr-xr-x)`目录和`644 (rw-r--r--)`文件。

4.  对于现有的存储库，您可能需要运行`chmod -R g+rX`

如果您仍然遇到 Redmine 的权限问题，它`404`会在存储库选项卡上打开 a 而不是 repo，您​​可能必须运行 a `chmod -R g+rX`on whole `/home/git/repositories`，以确保 Redmine 用户可以一直阅读 repos。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:45:27.897

如果 a`git repack remote/origin/master`不能解决问题，请检查您的 umask ( `umask 0002`) 以避免任何写入权限问题，如“ [git: can't push (unpacker error)](https://stackoverflow.com/questions/4025708/git-cant-push-unpacker-error) ”中所述。

除此之外，“ [Unpacker error Git-push from bare repo to staging server](https://stackoverflow.com/questions/8031325/unpacker-error-git-pushing-from-bare-repo-to-staging-server) ”总结了所有其他要检查的点。

# jquery - jQuery Isotope/Masonry Cornerstamp in center of page

> ID：13000248
> 
> 赞同：2
> 
> 时间：2012-10-21T17:24:24.320
> 
> 标签：jquery, jquery-masonry, jquery-isotope

JQuery Masonry and Isotope allow you to have a Cornerstamp that is static while the rest of the page is dynamic.

[http://isotope.metafizzy.co/custom-layout-modes/masonry-corner-stamp.html](http://isotope.metafizzy.co/custom-layout-modes/masonry-corner-stamp.html)

However, I'd like the static area to be a block on the center of the page (not a straight column, just a block in the middle of the page, which to the bottom and side are dynamic).

Does anyone know if this is possible or whether I should be looking for other jquery plugins instead?

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:26:41.357

根据我的砌体经验，只能在侧面有角印。

# windows - 适用于 Windows 的 GIT。所有文件的图标上都有一个问号

> ID：13000250
> 
> 赞同：5
> 
> 时间：2012-10-21T17:24:30.767
> 
> 标签：windows, git, repository

我最近在我的**Windows 7笔记本电脑上安装了****Git** ，但我并不知道自己在做什么。我现在遇到的问题是，我 PC 上的所有文件都带有问号图标，就好像它们需要提交到存储库一样。

 **我怎样才能撤消我所做的一切，以便文件不再有问号图标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T17:28:26.987

我不使用 shell 扩展名，所以我可能错了，但我猜问号表示文件未跟踪。因此，它不是存储库的一部分，Git 通常对它们一无所知。

因此，您没有做任何事情，这正是它们带有问号的原因：它们在那里，但不是存储库的一部分。您可以添加它们并提交文件，问号可能已经消失（用复选标记或其他东西代替），但这当然取决于您实际想要对它们做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-19T14:10:05.077

我有同样的问题。所以我试图找到git存储库的根。

我在 C:\Users\UserName 找到了文件夹 .git。

你只需要删除或重命名它。问号消失了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-07T02:54:51.427

如果您拥有的 git 设置与 git repo 不匹配，也会发生这种情况。例如。如果我在一个文件夹中创建了一个本地 git 存储库，并且我从一个子文件夹中的一个远程 git 存储库克隆了一个 git 存储库，那么根据 git，这是不匹配的。

解决方案是不要混合不同的回购。

删除 .git 是一个选项，但这仅意味着您删除了错误 repo 的指针，在这种情况下，我的本地 repo 指针。最好将不同的 git repos 分开。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-13T01:21:14.007

这是因为您有一些存储库正在跟踪您的所有文件，而这些带有问号的文件表示这些文件未被跟踪。

1.  删除 C:\Users\User.Name 中的 .git 隐藏文件夹。
2.  从此路径中删除 IconCache 文件 C:\Users\User.Name\AppData\Local。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-03T09:08:58.223

这是因为您已将文件夹（可能是 C: 驱动器）设置在 git 项目上，您可以尝试使用`git reset --hard # removes staged and working directory changes` 这将取消跟踪所有新文件（带引号的文件）您应该右键单击您的根文件夹项目并选择“gitbash here”来执行这个命令。要知道 git 存储库的位置，您可以`*.git`在主驱动器中搜索它，一旦找到它，您就会找到存储库的位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-14T05:21:57.233

文件夹上出现的蓝色问号表示本地驱动器上的文件与服务器上的任何文件都不匹配。

这些可能是不需要跟踪的项目文件或临时文件。它们也可以是用户正在创建但尚未添加到存储库中的新文件。在执行对 Git 服务器的拉取之前，不需要提交或恢复这些文件。

![在此处输入图像描述](../Images/51c1d5c2b06485d1457b8425d9c443e8.png)**

# dreamweaver - 在 Windows 7 中的 Dreamweaver 中缩进代码

> ID：13000254
> 
> 赞同：0
> 
> 时间：2012-10-21T17:24:48.610
> 
> 标签：dreamweaver

我在 Windows 7 上使用 Dreamweaver 6。如何自动缩进选定的代码行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:00:44.103

啊我找到了解决方案：选择你想要的行，然后在代码窗口左侧的工具栏上点击**Format Source Code**，然后**Apply Source Formatting to Selection**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-15T15:44:39.323

你可以配置你喜欢的缩进格式..在同一个地方你有“代码格式配置”，它使它看起来像你想要的那样。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-15T20:04:43.727

突出显示代码的选择。击中`<Tab>`缩进或 `<Shift><Tab>`突出

# android - Android Draw Frame from bitmaps around view

> ID：13000256
> 
> 赞同：0
> 
> 时间：2012-10-21T17:25:02.620
> 
> 标签：android, image, border

Newbie alert here!

I am trying to learn the best way to draw a custom border around an image (e.g. a picture frame) that is comprised of 8 bitmaps- 4 corners + 4 sides that are actually slices that need to be repeated depending on the view size. I understand the best way will be to use a FrameView but I'm not sure about the drawing part, for example how to do the repeating for the images along the sides? Can this be done in XML or do I need to handle OnDraw()? Or should I look at using a 9 patch?

There must be an example somewhere.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:34:01.713

我认为使用 xml 是更好的方法。试试这样..

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >

    <solid android:color="#EFF2FB" />

    <corners
        android:bottomLeftRadius="10dp"
        android:bottomRightRadius="10dp"
        android:topLeftRadius="10dp"
        android:topRightRadius="10dp" />

    <stroke
        android:width="0.5dp"
        android:color="@color/ashColor" />

</shape> 
```

这可能会帮助你......

# c# - 从 T-SQL 返回 NULL 日期时间值到 C# DataTable ==> DataRow 而不是空字符串

> ID：13000257
> 
> 赞同：2
> 
> 时间：2012-10-21T17:25:22.967
> 
> 标签：c#, .net, tsql, datetime, string

此值 (row[10]) 来自 DataRow 对象，来自 T-SQL 中的 SQL 结果集。我相信它有一个类型“对象”。在我的数据库中，这个特定记录的字段的值为 NULL，但它在我的结果集中返回一个空字符串，而不是空值。我想解决根本问题并让我的结果集返回 NULL 而不是空字符串，但如果这不可能，那么让这段代码更高效就可以了——意思是第一个片段，因为它适用于所有 3案例。

***这在 row[10].ToString() 等于空字符串、null 或 DateTime 格式时有效，但我想缩短它。这是我现在的解决方法。***

```
 string temp0 = row[10].ToString();
        DateTime? temp = null;
        if (temp0 == "")
        {
            temp0 = null;
        }
        if (temp0 != null)
        {
            temp = DateTime.Parse(temp0);
        }

        d.date_migrate_prod = temp == null ? null : temp; 
```

***这适用于空日期时间值，即实际的日期时间值，但不适用于 row[10] 等于空字符串时。***

```
 DateTime? temp = DateTime.Parse(row[10].ToString());
        d.date_migrate_prod = temp == null ? null : temp; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-05T07:01:45.953

正确的方法是：

```
 DateTime? temp = null; //this is fine
 var indexOfYourColumn = reader.GetOrdinal("columnName");//not necessary but makes iterating faster
 while (reader.Read())
 {
       temp = reader[indexOfYourColumn] != DBNull.Value ? (DateTime?) null : DateTime.Parse(reader[indexOfYourColumn].ToString())
 } 
```

为什么？您不能对空值执行 .ToString() 。然后你需要投喜欢。所以可以为空的日期时间到可以为空的日期时间。

这是很久以前问的。但接受的答案是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:07:37.887

对所述问题的回答。

```
string temp0 = row[10].ToString();
DateTime?;
if (string.IsNullOrEmpty(temp0)) 
{
    temp = null;
}
else
{
    temp = DateTime.Parse(temp0);
} 
```

可以使用 DateTimeTryParse。
可以传递一个空值，但它会解析为 1/1/0001

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T19:23:23.800

以下应该作为快捷方式：

```
DateTime? temp = String.IsNullOrEmpty(row[10].ToString())? null : DateTime.Parse(temp0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T14:31:55.423

尝试：

```
DateTime? localvariable 
      = row[10] == Convert.DBNull ? null : Convert.ToDateTime(row[10].ToString()) 
```

# php - 在 php 中从 RDF 中提取数据？

> ID：13000258
> 
> 赞同：1
> 
> 时间：2012-10-21T17:25:25.740
> 
> 标签：php, mysql, rdf

我有点失落。我想提取 rdf 文件的特定部分来构建 sql 表。

这是 rdf 文件的开头：

```
<?xml version="1.0" encoding="UTF-8"?>
<rdf:RDF xml:base="http://rdf.insee.fr/geo/2011/"
    xmlns:geo="http://rdf.insee.fr/geo/"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#">

    <rdf:Description rdf:about="http://rdf.insee.fr/geo/2011/cantons-31-2011.rdf">
        <dc:title xml:lang="fr">Cantons et communes du département de la Haute-Garonne (31)</dc:title>
        <dc:date>2011-02-21</dc:date>
        <dc:publisher>INSEE</dc:publisher>
        <dc:format>XML-RDF</dc:format>
    </rdf:Description>

    <geo:Canton rdf:about="CAN_3101">
        <geo:code_canton>3101</geo:code_canton>
        <geo:nom xml:lang="fr">Aspet</geo:nom>
        <geo:chef-lieu rdf:resource="COM_31020"/>
        <geo:subdivision>
            <geo:Commune rdf:about="COM_31011">
                <geo:code_commune>31011</geo:code_commune>
                <geo:nom xml:lang="fr">Arbas</geo:nom>
                <geo:voisin rdf:resource="COM_31011" />
                <geo:voisin rdf:resource="COM_31140" />
                <geo:voisin rdf:resource="COM_31191" />
                <geo:voisin rdf:resource="COM_31236" />
                <geo:voisin rdf:resource="COM_31357" />
            </geo:Commune>
        </geo:subdivision> 
```

我想用它的 geo:nom xml:lang="fr" 提取每个 geo:code_canton 以将它们放在 s 表中。然后提取 geo:code_commune 和 geo:nom xml:lang="fr" 将它们放在另一个带有 geo:code_canton 的表中

我需要他们参考每个州和该州的每个城市。

任何帮助或提示？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:57:13.743

[与www.aelius.com/njh/easyrdf/](http://www.aelius.com/njh/easyrdf/)一起消失了

# php - HTMLPurifier causes pointer being freed not allocated and segmentation fault

> ID：13000261
> 
> 赞同：0
> 
> 时间：2012-10-21T17:25:37.207
> 
> 标签：php, apache, xampp, htmlpurifier

I'm using HTMLPurifier on an PHP site I'm developing and testing locally with XAMPP on Mac. The app is built using Doctrine2 + Codeigniter.

I am running HTMLPurifier on about 4 text fields on save of a model. Sometimes I receive a No Data Received error message when doing this. Checking the apache logs I see this message:

```
*** set a breakpoint in malloc_error_break to debug
httpd(60406) malloc: *** error for object 0x2af7070: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
httpd(60412) malloc: *** error for object 0x2ae0004: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
httpd(60412) malloc: *** error for object 0x2af7070: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
[Sun Oct 21 13:13:18 2012] [notice] child pid 60414 exit signal Segmentation fault (11) 
```

If I turn off HTMLPurifier, no error messages are traced.

Here is the code I'm using:

```
// ContentMedia model
public function purifyHTMLText(){

    $CI =& get_instance();

    $this->imageCredits = $CI->applibrary->doPurify($this->imageCredits);
    $this->contentCopy = $CI->applibrary->doPurify($this->contentCopy);
    $this->extraCredits = $CI->applibrary->doPurify($this->extraCredits);
    $this->authors = $CI->applibrary->doPurify($this->authors);

}

// AppLibrary
public function getHTMLPurifier(){

    if(!isset($htmlPurifier)){

        $CI =& get_instance();
        $CI->load->library('HTMLPurifier');
        $config = \HTMLPurifier_Config::createDefault();
        $config->set('HTML.Allowed', 'a[href],br,b,strong,em');
            $config->set('HTML.DefinitionID', 'mydef');
            $config->set('HTML.DefinitionRev', 1);
            $config->set('Cache.DefinitionImpl', 'Serializer');
            $def = $config->maybeGetRawDefinition('HTML');
        $this->htmlPurifier = new \HTMLPurifier($config);

    }

}

public function doPurify($text){
            $this->getHTMLPurifier();
    return $this->htmlPurifier->purify($text);
} 
```

# facebook - wordpress on facebook tabs

> ID：13000262
> 
> 赞同：-1
> 
> 时间：2012-10-21T17:25:40.333
> 
> 标签：facebook, wordpress, https

I wish to use my existing WordPress application on Facebook tabs.

currently my WordPress site is running over HTTP without HTTPS support. im using a shared hosting server for that.

How can i use the same WordPress installation to serve the same content with a different format over HTTPS for Facebook tabs ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:29:46.350

有可用的 facebook 应用程序使您能够在 facebook 选项卡页面中使用 iframe。您只需将站点的 url 添加到其选项中。您只需要确保您的网站布局宽度为 520 像素且居中。

# javascript - How to change HTML background color in Javascript - IE9 issue

> ID：13000266
> 
> 赞同：1
> 
> 时间：2012-10-21T17:26:20.287
> 
> 标签：javascript, html, colors, background, internet-explorer-9

I've got problem with dynamically background changing in whole HTML document. Here is piece of code:

```
function changeHTMLBackground() {

  var html = document.getElementsByTagName('html')[0];
  html.style.background = "#ff00ff";    
} 
```

Problem appears only in IE9\. In Chrome, FF, Opera works fine. I know there is one solution to change "body" instead of "html", but it isn't solution for me, I need to change style for HTML tag.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:42:40.563

我不确定问题是什么，但这里有一些可能的解决方案。1）也许选择器不工作。尝试使用

```
document.html.style.backgroundColor = "#977689"; 
```

2）也许IE9无论如何都存在html bg颜色问题。CSS代码有效吗？

3）尝试添加一个类和 id 到 html 标签，并选择元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:32:02.143

使用该`backgroundColor`属性并将其应用于文档正文：

```
function changeHTMLBackground() {
    document.body.style.backgroundColor = "#ff00ff";
} 
```

[**Fiddle**](http://jsfiddle.net/ult_combo/kTUyz/) - 适用于所有浏览器，包括 IE9

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:32:04.547

像这样：

```
<script type="text/javascript">
  $('document').ready(function(){
    $("#textfield").focus(function () {
      $('.class').css(' background-color','#ff00ff');
    });
  });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T18:22:02.433

很确定 IE 不支持将 CSS 应用于 html 标记本身，我也不确定这是标准所期望的。作为一个简单的测试，请尝试：

```
<!doctype html><html style="background: green"><body>Testing</body></html> 
```

# storyboard - 清除场景会导致全局显示对象从内存中删除

> ID：13000271
> 
> 赞同：1
> 
> 时间：2012-10-21T17:26:41.907
> 
> 标签：storyboard, global-variables, coronasdk

我有一个问题，当我调用storyboard.purgeScene() 时，我的全局显示对象似乎被删除了。当我说“全局”时，我实际上将它们存储在用户定义的故事板表中，以避免使用实际的全局变量：

我的图像数据库存储在外部文件 toy_database.lua 中：

```
local storyboard = require "storyboard";

    storyboard.globalVars.toys = {
            ball1 = {
                    src = 'img/stock-vector-soccer-ball-trimmed.png',
            }
    } 
```

main.lua:

```
local storyboard = require "storyboard";

storyboard.globalVars = {};

require "toy_database_toybox"; 
```

我在 main.lua 中加载了一些图像：

```
storyboard.globalVars.toys["ball1"].imgPtr = display.newImageRect(storyboard.globalVars.toys["ball1"].src, w, h); 
```

然后我转到另一个场景：

```
storyboard.gotoScene("mainFloorScene"); 
```

一切都很好，显示对象是可访问的。我清除那个场景并转到另一个场景：

```
storyboard.gotoScene( "openBoxScene" )
[in didExitScene()]: storyboard.purgeScene( "mainFloorScene" ) 
```

这里一切都很好。最后我回到第一个场景，在途中清除当前场景：

```
storyboard.gotoScene( "mainFloorScene", "fade", 400 );
[in didExitScene()]: storyboard.purgeScene( "openBoxScene" ) 
```

回到第一个场景，图像对象已被移除。如果我注释掉这一行：

```
storyboard.purgeScene( "openBoxScene" ) 
```

它工作正常，所以我有一个解决方法，但我想解释这种行为。我预计场景清除只会删除该场景本地的显示对象。

这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T20:09:42.650

我使用完全相同的方法来存储我的数据。我也使用了 purgeScene 但我的数据没有被删除。我现在不想测试这个。我建议您在较旧的版本上尝试此操作。

# java - 在 Java 中使用 ActionListener

> ID：13000277
> 
> 赞同：1
> 
> 时间：2012-10-21T17:27:32.383
> 
> 标签：java, applet

我有两个类：一个绘制小程序，一个添加 actionListeners。似乎小程序没有正确添加 actionListeners，因为我的小程序中的任何功能都不起作用。以下是我的代码片段：

这属于小程序类（StackApplet）：

actListen 是 Listener 类的新实例。

```
public void init() {        
    try { 
        SwingUtilities.invokeAndWait(
            new Runnable() {
                @Override
                public void run() {
                    actListen.invokePush();
                    actListen.invokePop();
                }
            });
    } catch (Exception e) {

    } 
```

这属于监听器类：

```
public void invokePush() {
    pushListener = new ActionListener() {
        public void actionPerformed(ActionEvent act) {
            int currentSize = (int)myStack.size();
            try {
                if (currentSize == ceiling) {
                    StackApplet.pushField.setEnabled(false);
                    StackApplet.pushField.setForeground(Color.RED);
                    StackApplet.pushField.setText("Error: The stack is already full");                      
                } else if (currentSize == ceiling - 1) {                        
                    StackApplet.pushField.setForeground(Color.YELLOW);
                    StackApplet.pushField.setText("Warning: The stack is almost full"); 
                } else if (currentSize == 0) {
                    StackApplet.pushField.setText("weenie");
                }
            } catch (Exception e) {

            }
        }
    };
    StackApplet.pushBtn.addActionListener(pushListener);
} 
```

似乎 Applet 没有正确调用 ActionListeners

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:43:27.020

我建议您传递引用并在这些引用上调用公共方法，例如：

```
public void init() {        
    try { 
        SwingUtilities.invokeAndWait(
            new Runnable() {
                @Override
                public void run() {
                    ActListen actListenInstance = new ActListen(StackApplet.this);
                    actListenInstance.invokePush();
                    actListenInstance.invokePop();
                }
            });
    } catch (Exception e) {
      e.printStackTrace();
    }
} 
```

然后在 ActListen 的构造函数中接受 StackApplet 引用，然后使用该实例调用 StackApplet 的非静态方法。

就像是，

```
public void invokePush() {
    pushListener = new ActionListener() {
        public void actionPerformed(ActionEvent act) {
            int currentSize = (int)myStack.size();
            try {
                if (currentSize == ceiling) {
                    stackAppletInstance.ceilingReached();
                } else if (currentSize == ceiling - 1) {                        
                    stackAppletInstance.ceilingAlmostReached();
                } else if (currentSize == 0) {
                    stackAppletInstance.stackEmpty();
                }
            } catch (Exception e) {
                e.printStackTrace();  // ***** never leave this blank!
            }
        }
    };
    stackAppletInstance.addPushListener(pushListener);
} 
```

您将要努力避免使用静态的任何东西，除非在某些情况下。

# java - 如何根据缓冲区的目录编写扩展为 Java 包声明的 YASnippet？

> ID：13000278
> 
> 赞同：1
> 
> 时间：2012-10-21T17:27:35.177
> 
> 标签：java, emacs, yasnippet

定义 Java 类的文件可以通过声明它们属于特定包来组织成包，例如

```
package foo.bar; 
```

它声明有问题的文件属于 package 的子`bar`包`foo`。然后将文件存储在具有与包的层次结构相对应的层次结构的目录中。此外，包层次结构的根通常是某个目录`src`。是否可以编写一个扩展为包声明的 YASnippet，以便从当前文件的路径中获取包名？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T17:27:35.177

您可以使用嵌入式 Emacs Lisp 编写[一个片段](https://github.com/Sleft/yasnippet-java-mode/blob/master/pa)，该片段获取缓冲区的路径并将其转换为包名称，方法是将目录 src 视为包层次结构中的根：

```
# -*- mode: snippet -*-
#name : package
#key : pa
# --
package ${1:`(mapconcat 'identity (cdr (member "src" (split-string default-directory "/" t))) ".")`};$0 
```

这将识别多级包层次结构，即，如果您正在编辑的文件的缓冲区路径是 /home/nn/src/foo/bar/Baz.java，则片段将扩展为

```
package foo.bar; 
```

请注意，这需要您使用 src 作为存储包层次结构的根目录。如果缓冲区的路径中有名为 src 的目录，则片段将扩展为

```
package ; 
```

要让代码片段将某个其他目录识别为包层次结构中的根目录，只需替换`"src"`为所需的目录名称即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T08:38:48.963

这是我尝试 Java 时的设置：

```
# -*- mode: snippet -*-
# name: package
# key: pa
# --
`(insert (concat "package " (java-package-name (buffer-file-name)) ";\n"))` 
```

上面的函数定义为：

```
(defun java-package-name (file)
  "Generates package name for FILE, based on path."
  (let* ((f (file-name-directory file))
         (rem
          (car
           (sort
            (delq nil
                  (mapcar
                   (lambda(x)
                     (and (string-match (expand-file-name x) f)
                          (substring f (match-end 0))))
                   (parse-colon-path (getenv "CLASSPATH"))))
            (lambda (a b) (< (length a) (length b)))))))
    (cond
     ((null rem)
      "Not on CLASSPATH.")
     ((= 0 (length rem))
      "At root of CLASSPATH")
     (t
      (mapconcat
       #'downcase
       (delete "" (split-string rem "[\\\\/]"))
       "."))))) 
```

它会检查您是否`CLASSPATH`正在寻找最短的包名称。

# excel - 根据第一个组合框的项目选择选择第二个组合框项目

> ID：13000284
> 
> 赞同：0
> 
> 时间：2012-10-21T17:28:05.950
> 
> 标签：excel, vba

我正在尝试根据 cbo_moduleCode 中的选择更新**组合**框**cbo_moduleName**。现在，用户必须选择组合框才能进行选择，但我希望在循环期间找到的第一个值能够“即时”自动填充。关于如何实现这一目标的任何想法？到目前为止，这是我的代码：

 **```
Private Sub cbo_moduleCode_Change()

    Dim lLoop As Long
    ' Clear the comboboxes we are about to update
    Me.cbo_moduleName.Clear

    ' Loop through the worksheet and test each row
    For lLoop = 1 To Sheets("lookupModule").Range("A" & Sheets("lookupModule").Rows.Count).End(xlUp).Row
        ' If the row's column A matches the combobox then add the corresponding values to other combos
        If Sheets("lookupModule").Range("A" & lLoop).Value = Me.cbo_moduleCode.Value Then
            Me.cbo_moduleName.AddItem Sheets("lookupModule").Range("B" & lLoop).Value
        End If
    Next lLoop

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:11:40.543

`cbo_moduleName`当用户选择更改时，选择第一项`cbo_moduleCode`，这里是代码

```
If Me.cbo_moduleName.ListCount > 0 Then
   Me.cbo_moduleName.ListIndex = -1
End If 
```**

# mysql - IF 语句中的 MySQL SELECT WHERE

> ID：13000287
> 
> 赞同：2
> 
> 时间：2012-10-21T17:28:40.670
> 
> 标签：mysql, select, if-statement, case, subquery

我有一个存储用户组的“group_names”表。每个组都有一个管理员，可以是单个用户，也可以由另一个组管理。这目前由 group_names.mgr_type 确定。INT 值为 1 表示它是个人用户，值为 2 表示它是管理它的组。

例如，“一般用户”组可以由“IT 部门”组或“John Doe”管理。users 和 group_names 表上的唯一 ID 字段是“user_id”和“group_id”。

我想从 PHP 中取出逻辑并将其放入 SQL 查询中，但我在这里遇到了问题。鉴于表格布局，我不确定这是否可能，或者我是否无法遵循文档中提供的简单说明。

```
SELECT gn.group_id, gn.group_name, ... gn.mgr_id, CONCAT(usr.user_firstname,' ',usr.user_lastname) AS created_name, usr.user_id,
CASE gn.mgr_type
    WHEN '1' THEN CONCAT(usr.user_firstname,' ',usr.user_lastname) WHERE usr.user_id=gn.mgr_id LIMIT 1
    WHEN '2' THEN gn.group_name WHERE gn.group_id=gn.mgr_id LIMIT 1
END AS mgr_name
FROM group_names gn 
LEFT JOIN users usr 
ON gn.created_by=usr.user_id 
ORDER BY group_name ASC; 
```

我尝试了 IF 和 CASE 的不同变体，带括号和不带括号，但不断收到“无效语法”错误。

```
...for the right syntax to use near 'WHERE usr.user_id=gn.mgr_id LIMIT 1) WHEN '2' THEN (gn.group_name WHERE gn' at line 3 
```

我什至可以从同一个表中选择不同的行（根据 mgr_id=group_id 从不同的行中选择 group_name），还是应该添加另一个表？关于更简单/更有效的方法的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:38:58.477

我认为你应该尝试这样的事情（尝试在另一个表实例的连接条件中移动位置）：

```
 SELECT gn.group_id, gn.group_name, ... gn.mgr_id,
        CONCAT(usr.user_firstname,' ',usr.user_lastname) AS created_name, 
        usr.user_id,
       CASE gn.mgr_type
         WHEN '1' THEN CONCAT(usr1.user_firstname,' ',usr1.user_lastname)
         WHEN '2' THEN gn1.group_name
      END AS mgr_name
 FROM group_names gn 
 LEFT JOIN users usr 
 ON gn.created_by=usr.user_id
 RIGHT OUTER JOIN users usr1
 ON usr1.user_id=gn.mgr_id LIMIT 1
 OUTER JOIN group_names gn1
 ON usr.user_id=gn1.mgr_id LIMIT 1
 ORDER BY group_name ASC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:43:18.253

你有没有试过这个，因为你已经加入了这些表

```
CASE gn.mgr_type
    WHEN '1' THEN CONCAT(mgr_usr .user_firstname,' ',mgr_usr .user_lastname)
    WHEN '2' THEN mgr_grp.group_name
END AS mgr_name 
```

你实际上还需要 2 个左连接才能工作

```
LEFT JOIN users mgr_usr 
   ON gn.mgr_id = mgr_usr.user_id 
LEFT JOIN group_names mgr_grp
   ON gn.mgr_id = mgr_grp.group_id 
```

如果是用户，则左连接到用户表以获取经理名称；如果是组，则连接到 group_names 表以检索组名

您可以进一步限制 JOIN

```
LEFT JOIN users mgr_usr 
   ON gn.mgr_id = mgr_usr.user_id AND gn.mgr_type = 1
LEFT JOIN group_names mgr_grp
   ON gn.mgr_id = mgr_grp.group_id AND gn.mgr_type = 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:43:48.553

试试这个：

```
SELECT ...
CASE WHEN gn.mgr_type = '1' 
    THEN CONCAT(usr.user_firstname,' ',usr.user_lastname) WHERE usr.user_id=gn.mgr_id LIMIT 1
    ELSE gn.group_name WHERE gn.group_id=gn.mgr_id LIMIT 1
    END AS mgr_name
FROM group_names gn... 
```

# php - 用php变量创建mysql表不起作用

> ID：13000289
> 
> 赞同：-2
> 
> 时间：2012-10-21T17:28:49.067
> 
> 标签：php, mysql

我对 php 很陌生..这可能是一个愚蠢的错误...但我不知道发生了什么。我正在尝试使用 php 在我的数据库中创建一个表。我想在用户名之后命名表。我正在使用变量`$tableusername`。这是我的代码

```
$sql="SELECT * FROM userdata WHERE username='$username'";
$result=mysql_query($sql);

while ($row = mysql_fetch_assoc($result))
        {
            $tableusername = $row["username"];
        }

$create = "CREATE TABLE `".$tableusername."` ('
    . ' `ID` INT NOT NULL AUTO_INCREMENT PRIMARY KEY, '
    . ' `please` VARCHAR(50) NOT NULL, '
    . ' `make` VARCHAR(50) NOT NULL, '
    . ' `this` VARCHAR(50) NOT NULL, '
    . ' `work` VARCHAR(50) NOT NULL'
    . ' )'
    . ' ENGINE = myisam;";

mysql_query($create)

?>

<html>
<head>
</head>
<body>
You have successfully signed up. <?php echo $tableusername ?>
</body>
</html> 
```

所以- 这会创建一个名为 的表`$tableusername`。变量不会结转。但是 -当我`echo $tableusername`- 变量结转。我对此很陌生 - 所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:30:35.860

你有无效的字符串连接，使用`double quotes`而不是`single quotes`.

```
$create = "CREATE TABLE `".$tableusername."` ("
    . " `ID` INT NOT NULL AUTO_INCREMENT PRIMARY KEY, "
    . " `please` VARCHAR(50) NOT NULL, "
    . " `make` VARCHAR(50) NOT NULL, "
    . " `this` VARCHAR(50) NOT NULL, "
    . " `work` VARCHAR(50) NOT NULL' "
    . " )"
    . " ENGINE = myisam;"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:41:37.220

在你的 SQL 查询之后添加这个 - （它确实有助于并加快纠错时间）

```
or die("A MySQL error has occurred.<br />Error: (" . mysql_errno() . ") " . mysql_error()); 
```

**在您的实例中**呼应此：****

 **发生 MySQL 错误。错误：（1064）您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '' 附近使用的正确语法。' `ID`INT NOT NULL AUTO_INCREMENT PRIMARY KEY, ' . 第 1 行的“ `please`VARCH”

然后，这向我表明错误与**"** & **'**有关。

* * *

将代码更改为包含单引号并执行后，现在没有回显。

```
 <?php
    $tableusername = "philip";
    $create = "CREATE TABLE `".$tableusername."` ("
        . " `ID` INT NOT NULL AUTO_INCREMENT PRIMARY KEY, "
        . " `please` VARCHAR(50) NOT NULL, "
        . " `make` VARCHAR(50) NOT NULL, "
        . " `this` VARCHAR(50) NOT NULL, "
        . " `work` VARCHAR(50) NOT NULL"
        . " )"
        . " ENGINE = myisam;";

    mysql_query($create)or die("A MySQL error has occurred.<br />Error: (" . mysql_errno() . ") " . mysql_error());

    ?> 
```

* * *

注意：使用 PHP 中嵌入的 SQL 时，请参考[MySQLi扩展。](http://php.net/manual/en/book.mysqli.php)mysql_* 处于弃用过程中。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-13T03:14:39.570

// 创建带变量的 MySql 表

```
$tableName = "tb-"."$userEmail";
$tName="Beta";  
$createTable = "CREATE TABLE ".$tName." ( UserName varchar(30), UserPassword varchar(30) )" ; 
```

上述语法有效。将此示例应用于您的代码。请检查您的连接中的一些错误

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T17:34:40.067

使用[heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)：

```
$create = <<<SQL
CREATE TABLE `$tableusername` (
    `ID` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `please` VARCHAR(50) NOT NULL,
    `make` VARCHAR(50) NOT NULL,
    `this` VARCHAR(50) NOT NULL,
    `work` VARCHAR(50) NOT NULL
)
ENGINE = myisam;
SQL; 
```

值得注意的是，您可以在 heredoc 中使用字符串插值，但您应该真正倾向于参数化查询。**

# c++ - 生成的 Protobuf 代码使应用程序崩溃

> ID：13000290
> 
> 赞同：3
> 
> 时间：2012-10-21T17:28:50.000
> 
> 标签：c++, qt, mingw, protocol-buffers

我正在尝试使用 Google 的 Protocol Buffers 为应用程序实现保存文件。

**准备**

创建了一个简单的测试 .proto 文件来测试功能：

```
message LessonFile {  
  optional string creator = 1;  
} 
```

创建的 .pb.cc 和 .pb.h 包含在项目中。Lib 和包含目录在项目的属性中指定。

**问题**
将新生成的代码包含在项目运行时导致应用程序崩溃。

通过调试崩溃状态，它指向了这个函数：

```
UnknownFieldSet::UnknownFieldSet()
    : fields_(NULL) {} ---------here--------- 
```

上面的框架点在：

```
LessonFile::LessonFile()
    : ::google::protobuf::Message() { ---------here---------
    SharedCtor();
} 
```

调用堆栈：

```
google::protobuf::UnknownFieldSet::UnknownFieldSet (this=0x770e3cc3)
LessonFile (this=0xba64b30) protobuf_AddDesc_LessonFile_2eproto ()
StaticDescriptorInitializer_LessonFile_2eproto (this=0x4bc108)
__static_initialization_and_destruction_0 (__initialize_p=1, __priority=65535) global constructors keyed to _Z38protobuf_AssignDesc_LessonFile_2eprotov ()
__do_global_ctors ()
__mingw_CRTStartup () WinMainCRTStartup () 
```

**附加信息**
环境：Netbeans；视窗7-64；Qt-4.8.1 + mingw，protobuf-2.4.1。
Protobuf 编译过程也存在问题：*make check*总是失败并显示以下消息：

> 在来自 ./include/gtest/gtest-param-test.h:159:0、来自 ./include/gtest/gtest.h:59、来自 src/gtest.cc:34: ./include/gtest/ 的文件中internal/gtest-param-util-generated.h：在 ::operator testing::internal::ParamGenerator() 的实例化中 const [with T = bool; T1 = 布尔值；T2 = bool]>: ./include/gtest/gtest-param-test.h:1186:28:
> 此处需要 ./include/gtest/internal/gtest-param-util-generated.h:80:26: 错误：未在此范围内声明，并且在实例化点通过依赖于参数的查找未找到任何声明 [ -fpermissive] 在 ./include/gtest/gtest.h:59:0 包含的文件中，来自 src/gtest.cc:34: ./include/gtest/gtest-param-test.h:288:58：注意： testing::internal::ParamGenerator testing::ValuesIn(const Container&)> 在这里声明，稍后在翻译单元中

尽管*库*和*protoc.exe*已成功编译并且*make install*创建了包含目录和 lib*.a/lib*.dll.a 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T03:44:55.943

评论转换为答案，供未来的观众使用：

1.  下载 MingW + MSYS 包然后安装它。
2.  将MingW的安装文件夹中的“msys”文件夹复制到“C:\msys”，删除“C:\msys”中的“mingw”文件夹。
3.  将“C:\msys\etc\fstab”编辑为“C:/QtSDK/mingw /mingw”
4.  将 protobuf 源复制到“C:\msys\home\”
5.  打开msys shell，cd到“/home//protobuf”
6.  [http://eschew.wordpress.com/2009/09/20/building-protobuf-with-mingw-gcc-4-4-0/](http://eschew.wordpress.com/2009/09/20/building-protobuf-with-mingw-gcc-4-4-0/) - 项目#2
7.  运行“./configure --disable-shared”
8.  运行“制作”
9.  手动将生成的库文件复制到 qt 库目录（头文件以及 - 维护目录结构）

# javascript - 有什么方法可以使用 Express3.x 将模板呈现为变量？

> ID：13000292
> 
> 赞同：1
> 
> 时间：2012-10-21T17:28:59.627
> 
> 标签：javascript, node.js, express, template-engine, hogan.js

在 express3.x 中，api 谈论 app.render('view', data, callback); 它应该和 res.render 做同样的事情，但是使用渲染数据的回调，而不是作为响应发送它。有没有办法在路由文件中使用 app.render。这是不可能的，因为在任何地方都没有 app 变量，但 app.js 可能还有其他简单的方法来渲染模板并将其存储为变量。我需要它来发送 html 电子邮件。我在我的应用程序中使用 hogan.js 模板。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:48:19.877

您可以在需要时以应用程序通过的方式编写路由和模块

```
module.exports = function (app) {
  return {
    'index': function(req, res, next) {
      // app is avail here 
    }
  }
} 
```

并相应地要求它并在 app.js 中传递 app 变量

```
var app = module.exports = express.createServer();
var validate = require('./routes/validate')(app); 
```

这可能不是标准方式，尤其是路由文件的编写方式可能会很尴尬。但它使应用程序可用。到您的路线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:49:38.580

另一种方法是直接调用模板引擎。例如，如果您将[Hogan.js](http://twitter.github.com/hogan.js/)与[consolidate](https://github.com/visionmedia/consolidate.js/)一起使用，您可以这样做：

```
var hogan = require('consolidate').hogan;

hogan(path_to_template or string, rendering_values, function(err, result) {
  console.log(result);
}); 
```

我发现这比使用 app.render 更好，因为它更直接。

# objective-c - Objective-C 数据结构的近似运行时比较

> ID：13000296
> 
> 赞同：3
> 
> 时间：2012-10-21T17:29:53.117
> 
> 标签：objective-c, algorithm, data-structures, runtime, big-o

想象一下，你有一堆 NSArray。这些数组都包含包裹在 NSValues 中的 CGPoints。所有元素都不是唯一的。所以某些元素可以出现在多个数组中。**将这些数组组合成一个数组以使结果数组只包含唯一元素的最快方法是什么？**

目前我正在这样做：

1.  使用将每个数组插入 NSSet`setByAddingObjectsFromArray`
2.  用集合的内容填充结果数组

另一种选择是：

1.  遍历每个数组一次并将每个值插入到 NSDictionary 中（如果它不在其中）
2.  遍历字典的键一次并将每个键插入结果数组

传统的运行时分析表明，第一个选项应该随`O(n log n)`n 是所有初始数组中元素的数量（遍历所有元素并将每个元素插入到二叉搜索树或类似的日志时间）进行缩放。对于第二种方法，运行时间是`O(n)`因为查找和插入哈希表是在摊销的常数时间内运行的。然而，在阅读了一些有关 Apple 数据结构的信息后，假设它们的行为类似于传统数据结构似乎是愚蠢的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:34:35.490

由于这两种方法都介于`O(n)`和 之间，`O(n log n)`并且您的 n 可能足够小以至于`log n`有界且很小，因此常数因素可能会决定其中哪种方法最快。

在这一点上，实际上用看起来像您的用例的数据进行基准测试是最好的做法。

我相信，但不确定，NSSet 也是用哈希实现的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:44:02.910

实际上...我认为时间几乎相同，但是，在 NSDictionary 的情况下，您将获得一些内存开销，因为在这种情况下，您需要将键复制到该 NSDictionary。它们都以相同`NSDictionary`的`NSSet`方式工作：

1.  `hash`检查唯一性
2.  如果两个项目具有相同的缓存，`isEqual`则被调用

您已经提到，方法没有太大区别。

# openjpa - OpenJPA、Tomcat 7、Eclipse 和 maven - 增强不起作用

> ID：13000301
> 
> 赞同：0
> 
> 时间：2012-10-21T17:30:11.637
> 
> 标签：openjpa, openjpa-maven-plugin

所以我决定试一试OpenJPA，但到目前为止我还没有运气。我尽我所能：[http](http://struberg.wordpress.com/2012/01/08/jpa-enhancement-done-right/) **://struberg.wordpress.com/2012/01/08/jpa-enhancement-done-right/org.apache.openjpa.persistence.ArgumentException：类型“com.MyClass”没有得到增强。**是问题所在。

我试图按照这些步骤来解决它，因为我对 ANT 很不熟悉。

*   **添加maven插件**

    ```
     <plugin>
            <groupId>org.apache.openjpa</groupId>
            <artifactId>openjpa-maven-plugin</artifactId>
            <version>2.2.0</version>
            <configuration>
                <includes>com/myproject/core/domain/*.class</includes>
                <addDefaultConstructor>true</addDefaultConstructor>
                <enforcePropertyRestrictions>true</enforcePropertyRestrictions>

                <!-- Pass additional properties to the Plugin here -->
                <toolProperties>
                    <property>
                        <name>directory</name>
                        <value>otherdirectoryvalue</value>
                    </property>
                </toolProperties>

            </configuration>
            <executions>
                <execution>
                    <id>enhancer</id>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>enhance</goal>
                    </goals>
                </execution>
            </executions>

            <dependencies>
                <dependency>
                    <groupId>org.apache.openjpa</groupId>
                    <artifactId>openjpa</artifactId>
                    <version>2.2.0</version>
                </dependency>
            </dependencies>

        </plugin> 
    ```

    *   所以现在当我尝试清理项目然后服务器，然后使用 maven 和**mvn clean process-classes** 它然后成功地增强了我指定的类。

    *   启动服务器并尝试一个与hibernate一起使用的简单持久化，它给了我：

openjpa-2.2.0-r422266:1244990 致命用户错误> org.apache.openjpa.persistence.ArgumentException：类型“com.myproject.core.domain.MyClass”尚未增强。FailedObject: com.myproject.core.domain.MyClass@aecda16 [java.lang.String] at org.apache.openjpa.meta.ClassMetaData.resolveMeta(ClassMetaData.java:1823) at org.apache.openjpa.meta.ClassMetaData。 resolve(ClassMetaData.java:1797) at org.apache.openjpa.meta.MetaDataRepository.processBuffer(MetaDataRepository.java:822) at org.apache.openjpa.meta.MetaDataRepository.resolveMeta(MetaDataRepository.java:719) at org.apache .openjpa.meta.MetaDataRepository.resolve(MetaDataRepository.java:643) 在 org.apache.openjpa.meta.MetaDataRepository.getMetaDataInternal(MetaDataRepository.java:411) 在 org.apache.openjpa.meta.MetaDataRepository。

```
 <persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <persistence-unit name="myproj_pu"
        transaction-type="RESOURCE_LOCAL">
        <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
        <!-- MySQL -->
        <properties>
            <property name="openjpa.ConnectionURL" value="jdbc:mysql://localhost:3306/myproject" />
            <property name="openjpa.ConnectionDriverName" value="com.mysql.jdbc.Driver" />
            <property name="openjpa.ConnectionUserName" value="root" />
            <property name="openjpa.ConnectionPassword" value="1111" />
            <property name="openjpa.Log" value="DefaultLevel=WARN, Tool=INFO" />
        </properties>
    </persistence-unit>
</persistence> 
```

坦率地说，即使我让它发挥作用，我也不真正理解合理的工作流程应该是什么样子。也许使用其他策略或其他东西？

希望得到一些指示和提示，当然可以帮助解决问题。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:35:16.147

我认为您唯一错过的就是在您的 persistence.xml 的“persistence-unit”元素中添加以下行：

```
<class>com.MyClass</class> 
```

增强器在persistence.xml 中查找这些类定义，因此它知道要增强哪些类。

# asp.net-mvc-3 - 如何从一个域到另一个域进行身份验证？

> ID：13000309
> 
> 赞同：-1
> 
> 时间：2012-10-21T17:31:15.077
> 
> 标签：asp.net-mvc-3

我必须网站，一个主题是主站点，另一个是我的公司服务用户必须在第一个网站上注册，并且可以在另一个网站上使用我的服务。

另一个网站首先是一个子域。

```
now i have a question, how can i move user 
log in authentication after user log in, in first site to second site?

 what is the best and secure way? 
```

我在第一个站点中使用表单身份验证来验证我的用户并在第一个站点的数据库中验证用户。我的第一个站点位于 mvc3 razor 和 .net4.0 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:39:46.173

您是否尝试过将身份验证 cookie 上的域设置为没有 www 等的 TLD？

例如，mysite.com 而不是 www.mysite.com。我相信这意味着它对所有子域也是可见的，因此 admin.mysite.com 将看到来自 mysite.com 的 cookie。

如果您使用加密的 cookie，您需要确保每个应用程序都具有相同的机器密钥才能解密它。

[这是一篇描述它的帖子](http://forums.asp.net/t/1533660.aspx/1)

硅

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T13:01:34.967

对于那种类型的架构，您希望使用[联合令牌服务](http://msdn.microsoft.com/en-us/magazine/dd347547.aspx)。对于 .NET 4.0，您可以使用[Windows Identity Foundation (WIF)](http://msdn.microsoft.com/en-us/evalcenter/dd440951.aspx)创建这种类型的安全性。WIF 内置于 .NET 4.5 中并已得到改进。如果可以的话，我会转向 .NET 4.5。

# c - 在哪里定义/声明内核中的结构也可以在外部使用？

> ID：13000310
> 
> 赞同：0
> 
> 时间：2012-10-21T17:31:18.990
> 
> 标签：c, include, linux-kernel

我正在 linux 内核中创建一个新的系统调用。它将引用我正在创建的新结构，因此 kernel/*.c 文件和用户程序都需要#include 一个文件才能访问该结构类型。

我在哪里可以声明我的结构？我尝试将声明放入`include/linux/syscalls.h`，但我看不到如何从内核外部 #include （如果我尝试编译程序以使用它，我会收到错误消息）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:43:06.883

看看[http://www.tldp.org/HOWTO/html_single/Implement-Sys-Call-Linux-2.6-i386/](http://www.tldp.org/HOWTO/html_single/Implement-Sys-Call-Linux-2.6-i386/) 这是针对 2.6 内核的，但是 3.0 在这方面没有太大变化（如果有的话）看待。

请注意，它建议内核和非内核使用单独的标头。

一个简单的谷歌搜索“linux add syscall”很容易找到这个信息。

# codeigniter - 未找到 MY_Controller 类

> ID：13000312
> 
> 赞同：0
> 
> 时间：2012-10-21T17:31:30.953
> 
> 标签：codeigniter, codeigniter-2

我要解决的主要问题是当有人想要访问管理面板时检查用户会话。我创建了 MY_Controller 类并将其放在库中。

```
class MY_Controller extends CI_Session {

public $logged_in = FALSE;

public function  __construct() {
    parent::__construct();
    $this->is_logged_in();
}

public function is_logged_in()
{
    $logged = $this->userdata('user_id');
    $this->logged_in = ($logged) ? TRUE : FALSE;
}

function sessdestroy() {

    $this->session->sess_destroy();

}

} 
```

这是我的登录页面。我创建了一个重定向到管理面板（仪表板）的按钮，只是为了测试会话检查是否有效。

```
class Login extends CI_Controller {

function __construct() {

    parent::__construct();

}

public function index() {

    $this->load->view('view_login');

    if(isset($_POST['redirect'])) {

    redirect('admin');

    }
}

} 
```

这是我检查用户会话是否存在的管理控制器。

```
class Admin extends MY_Controller {

function construct() {

    parent::__construct();

}

function index() {

    if($this->is_logged_in()) {

    $this->dodadi_destinacija();

    }

    else redirect('login');

}

} 
```

但我得到了这个错误。

```
Fatal error: Class 'MY_Controller' not found in C:\wamp\www\UserPanel\application\controllers\admin.php on line 3 
```

你能告诉我你对给定问题的编码解决方案的想法吗:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T18:07:38.767

1.  您需要扩展`CI_Controller`类而不是`CI_Session`
2.  您应该放在文件夹`MY_Controller`下而不是`application/core/``application/library`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T18:07:32.380

Codeigniter 引入了一个名为`core`不需要加载的库的新文件夹。原始的 CI_Controller 类就是其中之一，所以如果你想让 automagick 拾取你的`MY_Controller.php`文件，你也应该把它放在下面`application/core`。

如有疑问，请检查目录下扩展类的原始版本`system`并将其镜像到`application`.

`CI_Controller`（同样在您的第一个代码示例中，我认为您的意思是不扩展`CI_Session`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-07T04:17:36.880

我在学习 CodeIgniter 时在一个项目中遇到了这个错误。我的解决方案是以您的项目为例，`require_once('MY_Controller');`在我的新控制器顶部。

这样我就不必将我的文件移动到核心，我可以将它保存在我的控制器目录中。

# c - 如何访问 256 位 ps 向量的组件

> ID：13000316
> 
> 赞同：5
> 
> 时间：2012-10-21T17:31:41.503
> 
> 标签：c, sse, intrinsics, avx

如何高效访问 256 位向量的元素？例如，我计算了点积

```
c = _mm256_dp_ps(a, b, 0xff); 
```

那么如何访问c中的值呢？我需要同时获得高位和低位，我是否正确理解我首先需要像这样提取 128 位部分：

```
r0 = _mm256_extractf128_ps(c,0);
r1 = _mm256_extractf128_ps(c,1); 
```

然后才提取浮点数：

```
_MM_EXTRACT_FLOAT(fr0, r0, 0);
_MM_EXTRACT_FLOAT(fr1, r1, 0);

return fr0 + fr1; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T08:59:47.930

好吧，您可以只存储到内存中，然后使用标量：

```
float v[8];
*(__m256)(v) = _mm256_dp_ps(a, b, 0xff);
float result = v[0] + v[4]; 
```

您还可以将 256 位寄存器的上半部分交换到下半部分并添加，如下所示：

```
__m256 c = _mm256_dp_ps(a, b, 0xff);
__m256 d = _mm256_permute2f128_ps(c, c, 1);
__m256 result = _mm256_add_ps(c, d); 
```

可能比任何一种选择都快得多的是一次做 4x 8 宽的点积并将它们一起减少。草图：

```
d0 = _mm256_dp_ps(a[0], b[0], 0xff);
d1 = _mm256_dp_ps(a[1], b[1], 0xff);
d2 = _mm256_dp_ps(a[2], b[2], 0xff);
d3 = _mm256_dp_ps(a[3], b[3], 0xff);

d01 = _mm256_permute_ps(d0, d1, ...);
d23 = _mm256_permute_ps(d2, d3, ...);
d0123 = _mm256_permute_ps(d01, d23, ...);

d0123upper = _mm256_permute2f128_ps(d0123, d0123, 1);
d = _mm256_add_ps(d0123upper, d0123); // lower 128 bits contain the results of 4 8-wide dot products 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T09:36:06.150

没有有效的方法来做到这一点。dp_ps 操作本身很慢，后续提取也很慢。除非可以批量处理更多数据，否则使用 SSE4 指令计算点积并使用 128 位比使用 256 位更快。

# null - 检查plpgsql中是否存在变量的最佳实践？

> ID：13000320
> 
> 赞同：0
> 
> 时间：2012-10-21T17:32:07.053
> 
> 标签：null, plpgsql, postgresql-9.1, exists

例如，我有一个存储过程来从 csv 文件导入数据并将读取的数据写入 SQL 表。我有一个定义如下的表：

```
CREATE TABLE person (id int, name text, age int, married boolean); 
```

首先我检查记录是否已经存在，如果存在我更新，如果不存在 - 插入。每个记录字段可能有不同的类型，因此 SQL 命令的结果被分配给一个标量变量列表：

```
SELECT name, age, married INTO v_name, v_age, v_married [..] 
```

假设每一列都被声明为可选（允许为 NULL）。那么检查哪个变量（v_name，v_age，v_married）不是NULL并且可以处理的最好方法是什么？

我找到了很多解决方案：

*   如果没有找到
*   当 NO_DATA_FOUND 那么
*   如果 v_age 不为空，那么 [...]

当我必须检查多个列（col）时，我现在正在使用我上面提到的最后一种方式或动态解决方案：

```
list_of_columns := ARRAY['name','age','married'];
FOREACH x IN ARRAY list_of_columns LOOP
   EXECUTE 'SELECT ' || x
       || ' FROM person
            WHERE id = ' || quote_literal(v_id)
            INTO y;

   IF  x = 'name' AND (y != v_name OR y IS NULL) THEN
     UPDATE person
     SET    name = v_name
     WHERE  id = v_id;

   ELSIF x = 'age' AND (y != v_age OR y IS NULL) THEN
     UPDATE person
     SET    age = v_age
     WHERE  id = v_id;

   ELSIF x = 'married' AND (y != v_married OR y IS NULL) THEN
     UPDATE person
     SET    married= v_married
     WHERE  id = v_id;
   END IF;
END LOOP; 
```

我正在寻找考虑到最佳实践和性能的最佳解决方案。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T23:52:52.653

我认为，您可以*从根本上*改进整个过程：

```
BEGIN;

CREATE TEMP TABLE tmp_p ON COMMIT DROP AS
SELECT * FROM person LIMIT 0;

COPY tmp_p FROM '/absolute/path/to/file' FORMAT csv;

UPDATE person p
SET    name    = t.name
      ,age     = t.age
      ,married = t.person
FROM   tmp_p t
WHERE  p.id = t.id
AND   (p.name    IS DISTINCT FROM t.name OR
       p.age     IS DISTINCT FROM t.age  OR
       p.married IS DISTINCT FROM t.married);

INSERT INTO person p(id, name, age, married, ...)
SELECT id, name, age, married, ...
FROM   tmp_p t
WHERE  NOT EXISTS (SELECT 1 FROM person x WHERE x.id = t.id);

COMMIT; -- drops temp table because of ON COMMIT DROP 
```

### 解释

*   `COPY`将您的 CSV 文件复制到具有匹配布局的临时表中。我复制了目标表的布局`CREATE TABLE AS ... LIMIT 0`，您可能需要适应...

*   `UPDATE`现有的行。`WHERE`避免使用子句中的最后 3 行进行空更新（什么都不会改变） 。
    ~~如果您想在 UPDATE 中跳过 NULL 值（真的吗？），请使用`COALESCE(t.name, p.name)`. 在 的情况下，这会退回到现有值`NULL`。~~（可能有用，但这实际上不在您的代码中。）

*   `INSERT`不存在的行。为此使用`NOT EXISTS`半连接。

*   All in one transaction so you don't end up with a half-baked result in the case of a problem along the way. The temp table is dropped at the end of the transaction because I created it that way.

# delphi - TIdHttp.Post - 无法获得 utf-8 编码

> ID：13000321
> 
> 赞同：6
> 
> 时间：2012-10-21T17:32:10.230
> 
> 标签：delphi, delphi-xe2, indy

如何强制 TIdHttp.post 方法返回以 utf-8 编码的网页？我试过`http.Request.ContentEncoding := 'UTF-8'`了，但它不起作用。这是我的代码：

```
procedure TeUpdateNews.Check;
var url: string;
    Http: TIdHttp;
    SS: TStringStream;
    param: TStringList;
    SWIDESTRING: WideString;
begin
  http := TIDHttp.Create(nil);
  http.HandleRedirects := true;
  http.ReadTimeout := 5000;
  http.Request.ContentEncoding := 'UTF-8';

  param := TStringList.create;
  param.Clear;

  url := CONST_SOME_WWW;

  try
    SS := TStringStream.Create;
    try
      SWIDESTRING := http.Post(url, param);

       // it's not getting utf-8!
       ShowMessage(SWIDESTRING); 
    finally
      SS.Free;
      param.free;
    end;
  finally
    Http.Free;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T12:03:56.130

好的，我发现我做错了什么。如果有人会搜索：

您需要在构造函数中设置 TStringStream 编码，所以它应该是这样的：

```
try
  // this is it :-)
  SS := TStringStream.Create('', TEncoding.UTF8);
  try
    // using overloaded post method this time
    // it writes return in the ss stream
    http.Post(url, param, ss);

     // now it's getting utf-8, baby!
     ShowMessage(ss.DataString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T10:33:17.900

```
var

  ds: TIdMultipartFormDataStream;

begin

  ds := TIdMultipartFormDataStream.Create;

  try

    ds.AddFormField('test', UTF8Encode('äöüß'), 'utf-8').ContentTransfer := '8bit';

    try

      ShowMessage(HTTP.Post('http://mysite.net/test.php', ds));

    except

    end;

  finally

    FreeAndNil(ds);

  end;

end; 
```

# 2d - calayer 对象上的自定义绘制的东西看起来相当像素化

> ID：13000326
> 
> 赞同：3
> 
> 时间：2012-10-21T17:32:46.130
> 
> 标签：2d, calayer, pixel

我的 drawInContext 方法看起来像这样：

```
- (void)drawInContext:(CGContextRef)context {
CGRect circleRect = CGRectInset(self.bounds, 1, 1);

UIColor * __autoreleasing borderColor = [UIColor whiteColor];
UIColor * __autoreleasing backgroundColor = [UIColor colorWithWhite:0 alpha: 0.75];

CGContextSetFillColorWithColor(context, backgroundColor.CGColor );
CGContextSetStrokeColorWithColor(context, borderColor.CGColor );
CGContextSetLineWidth(context, 2.0f);

CGContextFillEllipseInRect(context, circleRect);
CGContextStrokeEllipseInRect(context, circleRect);

CGFloat radius = MIN(CGRectGetMidX(circleRect), CGRectGetMidY(circleRect));
CGPoint center = CGPointMake(radius, CGRectGetMidY(circleRect));
CGFloat startAngle = -M_PI / 2;
CGFloat endAngle = self.progress * 2 * M_PI + startAngle;
CGContextSetFillColorWithColor(context, borderColor.CGColor );
CGContextMoveToPoint(context, center.x, center.y);
CGContextAddArc(context, center.x, center.y, radius, startAngle, endAngle, 0);
CGContextClosePath(context);
CGContextFillPath(context);

[super drawInContext:context];
} 
```

但在我的 iPhone Retina 显示屏上，它看起来非常像素化，如屏幕截图所示。我怎么修这个？

![在此处输入图像描述](../Images/a75e800e967638bd24a4d866121719e2.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T20:45:55.177

好的，我找到了解决方案。要绘制精美的缩放图像，需要执行以下操作：

```
pie_layer.contentsScale = [UIScreen mainScreen].scale; 
```

另请参阅这篇文章：[CGContext 文本绘图在 iPhone 4 上无法放大](https://stackoverflow.com/questions/3126293/cgcontext-text-drawing-doesnt-scale-up-on-iphone-4)

# scala - 为什么 return 语句后没有死代码警告？

> ID：13000329
> 
> 赞同：5
> 
> 时间：2012-10-21T17:33:14.247
> 
> 标签：scala, return

谁能解释为什么下面的方法在编译时没有任何错误消息？我期待一个死代码警告或类似的东西。它有编译的原因吗？

```
def somethingAfterReturn(): Int = {
   println("That is ok..");
   return 1
   println("WTF is going on here?");
   3
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T17:42:48.230

首先，试试这个：

```
$ scala -e 'def somethingAfterReturn(): Int = { println("That is ok.."); return 1; println("WTF is going on here?"); 3 }' 
```

没有错误，对吧？

然后，试试这个：

```
$ scala -Ywarn-dead-code -e 'def somethingAfterReturn(): Int = { println("That is ok.."); return 1; println("WTF is going on here?"); 3 }' 
```

默认情况下，Scala 会忽略[无法访问的代码](http://en.wikipedia.org/wiki/Unreachable_code)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:35:04.497

编译器允许这样做，因为它在语法上是有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:36:21.457

编译器看到返回后的代码永远不会被执行，所以他忽略了它......所以我认为

# redis - phpredis中的MULTI/EXEC命令是一次发送命令吗？

> ID：13000330
> 
> 赞同：0
> 
> 时间：2012-10-21T17:33:24.950
> 
> 标签：redis, exec

PHP 的 Redis 客户端驱动程序 PhpRedis 将 MULTI/EXEC 内部的多个命令多次或仅一次传输到 Redis 服务器？

谢谢

PhpRedis：[https ://github.com/nicolasff/phpredis](https://github.com/nicolasff/phpredis)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:49:41.120

根据源代码，PhpRedis 显然将 MULTI/EXEC 块作为多个命令发送（涉及多个网络数据包）。然而，管道作为单个命令块发送。

# scala - Scala中更高种类/类型的益智游戏

> ID：13000332
> 
> 赞同：2
> 
> 时间：2012-10-21T17:33:52.767
> 
> 标签：scala, existential-type, higher-kinded-types

当我遇到这个问题时，我正在尝试使用更高的种类和类型边界。我的用例是我希望能够使用 Request 的任何子类型或 Request 类型本身来参数化 GenericAction 实例。Action trait 使用默认类型的 Request 扩展 GenericAction trait（在这种情况下，只会生成 Request 的匿名实例）。

```
trait Request[+A]

trait GenericAction[A, R[_] <: Request[_]]

trait Action[A] extends GenericAction[A, Request]

trait ActionBuilderBase[R[_] <: Request[_], G[_] <: GenericAction[_,R]] 
```

ActionBuilderBase 具有与子特征 ActionBuilder 和 ActionBuilder2 共享的实用方法。ActionBuilder 生成默认的 Action[A] 和 Request[A] 实例。

```
trait ActionBuilder extends ActionBuilderBase[Request,Action] 
```

到目前为止一切都很好，但是当我尝试创建另一个扩展 ActionBuilderBase 具有 R 和 GenericAction 子类型的特征时（在这种情况下将创建 GenericAction 的匿名实例），它无法编译。我猜原因是在第一个 ActionBuilder 的情况下，请求类型已经被“填充”（因为 Action[A] 已经有一个请求类型 == Request），这与下面的示例不同。为了让这个例子起作用，我需要“填写”什么？

```
//Fails with "GenericAction takes two type parameters, expected: one" - what should the type annotation for GenericAction look like?
trait ActionBuilder2[R[_] <: Request[_]] extends ActionBuilderBase[R,GenericAction] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T17:50:59.957

在这种情况下，能够编写如下内容会很好：

```
trait ActionBuilder2[R[_] <: Request[_]] extends
  ActionBuilderBase[R, GenericAction[_, R]] 
```

表示您要部分申请`GenericAction`。不幸的是，这不是有效的 Scala 语法（尽管 Erik Osheim 有[一个编译器插件](https://github.com/non/kind-projector)可以让您编写非常相似的东西）。

但是，您可以使用“类型 lambda 技巧”：

```
trait ActionBuilder2[R[_] <: Request[_]] extends
  ActionBuilderBase[R, ({ type L[A] = GenericAction[A, R] })#L] 
```

有关其工作原理的详细说明，请参阅[此答案。](https://stackoverflow.com/a/8736360/334519)

# interface - 你怎么称呼一个接口的实例？

> ID：13000335
> 
> 赞同：0
> 
> 时间：2012-10-21T17:34:01.067
> 
> 标签：interface

可枚举的 x=new classA();

我知道你不能实例化一个接口。但是可以将 x 称为 Ienumerable 的实例吗？如果不是，什么是解决 x 的简单方法，同时仍然传达它是 Ienumerable 类型的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:36:23.430

是的 - 将 x 称为 Ienumerable 的实例是完全正确的。

您也可以说“x 实现 Ienumerable”或“x 支持 Ienumerable”

# jquery - 使用 jQuery getScript 加载一个加载另一个脚本的脚本

> ID：13000340
> 
> 赞同：0
> 
> 时间：2012-10-21T17:34:10.280
> 
> 标签：jquery

我有以下 jQuery 函数：

```
<script>
$(document).ready(function(){
$.getScript("http://my.cdn.ext/adsense.js");
});
</script> 
```

在 adsense.js 中，有：

```
<script type="text/javascript"><!--
google_ad_client = "pub-xxxxxxxxxxxxx";
google_ad_slot = "xxxxxxxx";
google_ad_width = 250;
google_ad_height = 250;
//-->
</script>
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

该脚本在萤火虫上给了我以下错误；

```
SyntaxError: missing ; before statement 
<script src="http://pagead2.googlesyndication.com/pagead/show_ads.js 
```

由于它是一个 js 文件，我尝试删除标签，但没有得到任何响应。这有什么办法？

# sql - varchar 不时

> ID：13000345
> 
> 赞同：0
> 
> 时间：2012-10-21T17:34:35.143
> 
> 标签：sql, oracle

大家好，

如何将列 time_code 值“201834”转换为 oracle sql 中的时间？在网上查找并使用 to_date、cast、convert 玩弄它并没有找到太多帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:07:52.733

我猜你有 HourMinuteSecond 格式并且你想将它转换为 DATE 类型。to_date 可以解决问题。

```
select to_date(time_code, 'HH24MISS') from table; 
```

您可以将其作为 DATE 存储在数据库中。（不要担心 DATE 部分 - 使用当前日期，只需确保在显示时将其丢弃）

# c++ - 在 C 中使用 C++ 结构

> ID：13000347
> 
> 赞同：5
> 
> 时间：2012-10-21T17:34:42.190
> 
> 标签：c++, c, struct

我有一个`C++`内部方法的结构：

```
struct S
{
   int a;
   int b;

   void foo(void)
   {
       ... 
   };
} 
```

我有一个用户程序，用`C`. 是否可以获得指向`S`-struct 的指针并访问成员`a`和`b`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T17:42:01.930

您可以从 C 程序访问用 C++ 编写的成员，`struct`前提是您确保删除了对 struct 语法的 C++ 添加：

```
// header
struct S {
  int a, b;

#ifdef __cplusplus
  void foo(); 
#endif
};

// c-file:
#include "header.h"

void something(struct S* s)
{
  printf("%d, %d", s->a, s->b);
} 
```

C++ 中结构和类的内存布局与 C 语言的 C 部分兼容。一旦您将 vtable（通过添加虚函数）添加到您的结构中，它将不再兼容，您必须使用其他一些技术。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T17:44:13.407

如果这些方法不是虚拟的，那么就可以了。您甚至可以使用 __cplusplus 宏获得 C/C++ 的通用头文件：

```
struct S
{
   int a;
   int b;

#ifdef __cplusplus
   void foo(void)
   {
       ... 
   }
#endif /* end section for C++ only */
}; 
```

请记住，这个结构在 C 中的名称`struct S`不仅仅是`S`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T17:42:10.863

如果您的程序是用 C 编写的，您如何获得 S？我的猜测是，最准确的描述是您的程序是用 C 和 C++ 混合编写的，并且您希望在 C 部分访问 C++ 结构的某些成员。

解决方案 1：修改您的 C 部分，使其位于 C 和 C++ 的公共子集中，将结果编译为 C++，现在您可以逐渐使用您想要的任何 C++ 功能。这就是过去许多项目所做的。最近最广为人知的是 GCC。

解决方案 2：为 S 提供一个 extern "C" 接口并在您的 C 部分中使用它。

```
#ifdef __cplusplus
extern "C" {
#endif
    struct S;
    int getA(S*);
    int getB(S*);
#ifdef __cplusplus
}
#endif 
```

提供 getA 和 getB 实现的部分必须编译为 C++，但可以从 C 中调用。

# algorithm - 为集合 A 中的所有点查找集合 B 中的最近邻的算法

> ID：13000349
> 
> 赞同：8
> 
> 时间：2012-10-21T17:34:57.563
> 
> 标签：algorithm, nearest-neighbor

假设我们有两组点 A、B，我们想为集合 A 中的每个点找到它在集合 B 中的最近邻居。

有很多很好的算法可以找到一个点的最近邻。有什么方法可以使用我们为 a_1 获得的信息，以更有效地搜索 a_2 或集合中其他点的最近邻居？

我在想这样的事情：使用三角不等式来获取B中每个点与新点a_2之间可能距离的间隔，并对间隔的最大值和最小值进行排序，然后我只能搜索B中落入的点第一个间隔。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T18:08:03.540

1.  求集合 B 的点的[Voronoi 图。](http://en.wikipedia.org/wiki/Voronoi_diagram)
2.  在集合 A 的点和集合 B 的 Voronoi 图上应用[扫描线算法](http://en.wikipedia.org/wiki/Sweep_line_algorithm)。无论扫描线覆盖集合 A 中的某个点，查看该点位于 Voronoi 图的哪些边缘之间。这允许确定该点属于 Voronoi 图的哪个面。这给出了集合 B 的最近点。

第 2 步的详细信息：将当前与扫描线相交的 Voronoi 图的所有边保留在某个有序容器中。当扫描线覆盖 Voronoi 图的某个顶点时，从/到容器删除/添加与该顶点相关的边。要查看某个点位于哪些边缘之间，请在容器中获取该点的后继/前继边缘。

时间复杂度为 O((M+N) log M)。N = |A|，M = |B|。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:50:21.653

您可能会受益于阅读本特利的“编写高效程序”，其中他处理了旅行推销员程序的案例研究。他认识到的一项节省是，两点之间的差异涉及取平方根，这很昂贵。取平方根给你实际距离，不取平方根给你一个数字，可以用来与其他相对值进行比较。

我强烈推荐阅读这本书。它会把你的大脑放在正确的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-30T09:04:25.760

蛮力解决方案可能是使用集合 B 的最近点的树状图。然后将集合 A 的每个点与树状图进行比较。您还可以使用 delaunay 三角剖分创建树状图。

# eclipse - 日食xml问题

> ID：13000350
> 
> 赞同：0
> 
> 时间：2012-10-21T17:35:00.697
> 
> 标签：eclipse

大家好，我正在使用 Eclipse 来开发一个 android 应用程序。当我构建它的布局时，当我尝试将第二个 textField 拖放到屏幕上时，我收到了这个错误{

## 错误

```
Sun Oct 21 20:32:14 EEST 2012
row2.xml: java.util.LinkedHashMap.eldest()Ljava/util/Map$Entry;

java.lang.NoSuchMethodError: java.util.LinkedHashMap.eldest()Ljava/util/Map$Entry;
    at android.util.LruCache.trimToSize(LruCache.java:206)
    at android.util.LruCache.evictAll(LruCache.java:306) {......} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:18:04.490

尝试将此添加到您的 TextView

```
android:inputType="textNoSuggestions" 
```

希望有所帮助..！

# java - 使用 Hibernate 映射具有可变数量变量的类

> ID：13000358
> 
> 赞同：0
> 
> 时间：2012-10-21T17:35:46.187
> 
> 标签：java, hibernate

我想使用 Hibernate 将类映射到数据库。该类包含来自不同传感器的值。重要的是可以在运行时更改类（添加了新传感器......）。变量的变化估计是非常罕见的。在这种情况下我可以使用 Hibernate 吗？

我考虑过使用带有代表列标题和传感器名称的字符串键的哈希图。映射的值将是当前的 Double 传感器值。

示例表可能如下所示：

```
Table Station1
-----------------------------------------------------
+ Timestamp           + Sensor1 + Sensor2 + Sensor3 +
-----------------------------------------------------
+ 2012-10-10 12:12:12 + 12.1212 + 23.2323 + 34.3434 +
+ 2012-10-10 12:12:13 + 12.1213 + 23.2323 + 54.3434 +
----------------------------------------------------- 
```

如果有人可以给我反馈，如果可能的话，我会很高兴，也许还有一些方向让我进一步搜索。

# python - 为什么要使用 sendrecv？

> ID：13000360
> 
> 赞同：2
> 
> 时间：2012-10-21T17:35:48.917
> 
> 标签：python, mpi

我正在尝试用 mpi4py 教自己 MPI 消息传递接口。我注意到 MPI 有一个名为“sendrecv”的函数。但是，它没有在 mpi4py 文档中列出： [http ://documen.tician.de/boostmpi/reference.html](http://documen.tician.de/boostmpi/reference.html)

我可以简单地用 say 模拟 sendrecv 函数吗

```
 communicator.send(0xdeadbeef, dest=1, tag=0)
  data = communicator.recv(source=1, tag=0) 
```

除了模拟一个接收然后发送之外，“sendrecv”还能做什么？我在哪里可以找到讨论它的 mpi4py 文档？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T17:43:43.023

[`MPI_Sendrecv`](http://www.netlib.org/utk/papers/mpi-book/node45.html#SECTION00360000000000000000)是一个便利功能。它发送一条消息并接收一条消息，并保证不会出现由于每个进程等待另一个消息发送而导致的死锁。

# scala - Scala - 删除空间

> ID：13000361
> 
> 赞同：2
> 
> 时间：2012-10-21T17:36:00.033
> 
> 标签：scala

我有一个看起来像这样的字符串

```
svchost.exe                   4464 Services                   0        47.656 K 
```

*请注意，有很多空格，并且每种情况下空格的数量都不同*

我想提取名称`svchost.exe`和 pid `4464`。我可以做到这一点，但只能用命令式的方式。我很难以一种实用的方式来解决这个问题。

可以用正则表达式解决这个问题，但我想看看你如何用函数式编程做这样的事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T18:06:14.837

[`String.split()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split(java.lang.String))利用接受正则表达式的事实：

```
s.split(" +")  //Array(svchost.exe, 4464, Services, 0, 47.656, K) 
```

无需后过滤。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T17:41:45.290

十分简单：

```
val s = "svchost.exe                   4464 Services                   0        47.656 K"
s.split(" ").filterNot(str => str == "")
// Array[java.lang.String] = Array(svchost.exe, 4464, Services, 0, 47.656, K) 
```

**更新**

或`s.split(" +")`依赖于正则表达式美的使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T18:21:56.117

这实际上不是一个好方法，但是：

```
(s,s.drop(1)+" ").zipped.filter(_!=' ' || _!=' ')._1.split(' ') 
```

如果它不是字符串，那将是一种使用方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T06:06:25.493

我不完全确定这是否回答了您的问题；它可能不是，因为它使用正则表达式，但又一次，其他一些答案也是如此，这至少使用模式匹配。

使用正则表达式：

```
val str = "svchost.exe                   4464 Services                   0        47.656 K"
val Process = """^([^\s]*)[\s]*([^\s]*).*$""".r
val Process(name, pid) = str 
```

在 REPL 中输入这个，你会得到：

```
name: String = svchost.exe
pid: String = 4464 
```

通过使用`\s`，您还可以覆盖其他类型的空白，这可能与上述情况相关。（制表符？）

# android - android列表视图 - 行颜色

> ID：13000368
> 
> 赞同：0
> 
> 时间：2012-10-21T17:36:34.833
> 
> 标签：android

我正在尝试开发一个简单的 android 应用程序。它有两个用于输入搜索条件的文本框。提交页面的提交按钮。在下一页（新意图）中，我显示搜索结果。

现在我想在列表视图中搜索结果。视图的 xml 代码如下所示。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:padding="5dp">

 <ImageView
    android:id="@+id/image"
    android:layout_width="50px"
    android:layout_height="50px"
    android:layout_marginLeft="5px"
    android:layout_marginRight="20px"
    android:layout_marginTop="5px">
</ImageView>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:padding="5dp" 
android:orientation="vertical">

<TextView
    android:id="@+id/label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="15px" >
</TextView>
<TextView
    android:id="@+id/addr"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@+id/label"
    android:textSize="15px" >
</TextView> 
```

在 XXXArrayAdapter 类的 getView 方法中，我设置了如下背景颜色。

```
 private int[] colors = new int[] { 0x30FF0000, 0x300000FF };
 int colorPos = position % colors.length;
 rowView.setBackgroundColor(colors[colorPos]); 
```

但是，我没有看到背景颜色填充整行。请看下面的截图。忽略红色框，我故意隐藏搜索结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:38:15.637

您的布局的根 LinearLayout 宽度设置为包裹内容。将其设置为 match_parent 使其充满整个屏幕

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:padding="5dp"> 
```

# eclipse - Selenium 脚本是在现有的网页屏幕中识别和运行

> ID：13000369
> 
> 赞同：1
> 
> 时间：2012-10-21T17:36:36.303
> 
> 标签：eclipse, selenium, selenium-webdriver, testng

是否可以让 Selenium 在已经打开的窗口上运行？我认为，这在 Selenium IDE 中是可能的。但我正在工作的应用程序只能在 IE 中运行。那么我可以编写 Selenium 脚本在已经打开的 IE 窗口上运行吗？例如，谷歌已经在 IE 中打开，我的脚本应该只在那个屏幕中搜索吗？请指教。我是 selenium 的新手，我自己学习在我正在工作的项目中实施。

谢谢， 阿卜杜勒·哈米德

# uiwebview - 通过自动调整大小或自动布局使 UIWebview 更大

> ID：13000373
> 
> 赞同：0
> 
> 时间：2012-10-21T17:37:08.243
> 
> 标签：uiwebview, resize, autoresize, iphone-5, autolayout

我在一个视图中有 3 个对象 - 顶部的标签 - 中间的 uiwebview - 底部的按钮。我正在尝试使用自动调整大小（旧方式）或自动布局（新方式），但无法成功。

我想获得标签和按钮以粘贴在顶部/底部（保持相同的大小）-并且-希望 uiwebview 相应地变大。因此，在 iPhone 4 上，它是该屏幕的最大高度 - 在 iphone 5 上也是如此。

在这种情况下是否可以作为开始，还是我必须像使用通用应用程序一样添加另一个笔尖？

感谢您开始执行此操作的任何帮助

干杯吉比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:23:04.847

固定标签以保持其高度和“到 Superview 的顶部空间”。固定按钮以保持其高度和“到 Superview 的底部空间”。然后将 Web 视图的大小调整到您想要的位置并将其固定以保持其“顶部空间到 Superview”和“底部空间到 Superview”。

应该这样做！

# time - 我收到 Call-time pass-by-reference has been deprecated 错误

> ID：13000374
> 
> 赞同：1
> 
> 时间：2012-10-21T17:37:14.107
> 
> 标签：time, reference, call, deprecated

我在这一行收到上述错误：

```
$size = getimagesize ($photo,&$info);
if(isset ($info["APP13"])) 
```

我该如何纠正？

# c# - .NET C# Windows 服务错误“错误 5”

> ID：13000376
> 
> 赞同：0
> 
> 时间：2012-10-21T17:37:22.957
> 
> 标签：c#, .net, windows, windows-services

非常简单，制作了这个 Windows 服务：http: [//msdn.microsoft.com/en-us/library/zt39148a.aspx](http://msdn.microsoft.com/en-us/library/zt39148a.aspx)

安装它，控制台显示没有问题，导航到*计算机管理，服务和应用程序，服务*找到我的服务，右键单击 - 开始，这个坏男孩出现了。

![错误框](../Images/bcddfb883979f562e69178372f10c941.png)

我尝试将其构建为发布和调试，将文件移动到新文件夹，甚至在这里查看不同的答案： [系统错误 5 启动 .NET 服务时访问被拒绝](https://stackoverflow.com/questions/574411/system-error-5-access-is-denied-when-starting-a-net-service)

[Windows 服务：错误 5：拒绝访问](https://stackoverflow.com/questions/3615367/windows-service-error-5-access-denied)

而且没有运气。这一直让我发疯。请帮助 *穆哈斯·格拉西亚斯*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:10:02.260

.Net 服务的概念没有任何问题，因此您的环境中有一些东西阻止了它的工作。很难从远处调试。

验证：

1.  您拥有管理员权限
2.  “计算机管理”的默认[自动提升规则](http://lab.technet.microsoft.com/en-us/magazine/dd822916)仍然适用（如有疑问，请右键单击并选择“以管理员身份运行”
3.  本地服务帐户有权访问二进制文件。您可以获得文本版本（易于粘贴到 SO 问题中）`cacls path-to-your-service.exe`

# php - 如何执行一个js函数使用另一个函数的元素，它带来了ajax页面

> ID：13000378
> 
> 赞同：2
> 
> 时间：2012-10-21T17:37:24.750
> 
> 标签：php, javascript, css, ajax, function

在我的“index.php”页面中，我从用户那里获取某物并使用“ajax.php”在 div 中给出响应。ajax 页面返回一个有序列表，分为称为页面的 div。加载 ajax 后，我需要执行一个函数来设置页面的一些 css 属性。当我将它附加到按钮的 onClick 事件时，该功能已准备就绪并且可以正常工作。但我想在加载 ajax 页面后自动执行它。我试过：

1.  onload 事件也在页面顶部和页面底部的 index.php 和 ajax.php 中--> 它不起作用
2.  function in function showAjax(){...setCSS();}--> 加载整个 ajax 页面后我无法运行它
3.  回调函数-->它不能正常工作
4.  onClick 事件 onClick="showAjax(); setCSS();"--> 它不起作用

我不使用 jQuery。我检查了类似的问题解决方法，但它们不起作用。我很感激有人能把我从这个麻烦中解救出来。谢谢

添加的代码：

```
var xmlHttp;

function loadXMLDoc(url,cfunc) {
    if (window.XMLHttpRequest) {
        xmlHttp=new XMLHttpRequest();
    } 
    else {
        xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
    } 
    xmlHttp.onreadystatechange=cfunc; 
    xmlHttp.open("GET",url,true); 
    xmlHttp.send();
}

function showAjax(x) { 
    loadXMLDoc("ajax.php?obj="+x,function() {
       if (xmlHttp.readyState==4 && xmlHttp.status==200) {
          document.getElementById("sonuclar").innerHTML=xmlHttp.responseText;
       }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:42:49.313

我解决了这个问题。“if (xmlHttp.readyState==4 && xmlHttp.status==200)”这个语句已经在控制 ajax 是否完全加载。所以我将我的 setCSS 函数作为回调添加到 showAjax 函数中

`function showAjax(x, func) {

```
loadXMLDoc("ajax.php?obj="+x,function() {

   if (xmlHttp.readyState==4 && xmlHttp.status==200) {

      document.getElementById("sonuclar").innerHTML=xmlHttp.responseText;

      func();

   }

}); 
```

}

onclick=showAjax(this.value, setCSS);'

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-21T17:55:16.210

好吧，如果您使用自己的 ajax 风格，那么请查看我创建的这个站点： [CV Online](http://www.katarzyna-wojcik.ssl2.pl/k-cv/)，并检查我的 httpreq.js，函数 OnStateChange。这在 ajax 请求完成时调用，无论成功与否。让我知道这个脚本是否有帮助。

# jquery - 在模态/对话框中键入时 Jquery Mobile 慢速 IPAD 键盘

> ID：13000380
> 
> 赞同：1
> 
> 时间：2012-10-21T17:37:30.677
> 
> 标签：jquery, mobile

在我们正在构建的应用程序中，我注意到在 iPad 上我注意到当我们触发一个包含文本输入字段的对话框时，IPAD 上的键盘严重滞后。有没有人使用 JQUERY mobile 和带有对话框/弹出窗口的键盘遇到这个问题。我正在使用当前为 2.1 的最新 JQM。如果您有推荐的解决方案？

谢谢。

# tinymce - 图片 URL 没有在 TinyMCE 中插入图片？

> ID：13000384
> 
> 赞同：1
> 
> 时间：2012-10-21T17:38:09.453
> 
> 标签：tinymce, wysiwyg

我正在使用 tinymce ，效果很好。现在，我想在 Tinymce 编辑器附带的文本区域中插入图像（例如：-http://danny.oz.au/travel/mongolia/p/56255254-flower.jpg）。为此，我单击了插入图像图标，小弹出窗口打开，我将上面的花 url 粘贴到图像 URL 文本框中。但它不会在预览部分和 tinymce 文本区域中插入图像。我正在使用 [url]http://www.tinymce.com/tryit/full.php.[/url] 中给出的相同演示代码。[/url] 这个链接工作正常（也在预览和父 tinymce 编辑器中显示图像）。我不确定我在这里缺少什么？我需要一些额外的文件来使图像 url 工作吗？

# php - jQuery AJAX 调用上的 POST 数组为空

> ID：13000386
> 
> 赞同：2
> 
> 时间：2012-10-21T17:38:17.590
> 
> 标签：php, jquery, post

我犹豫要问，因为关于这个主题还有很多其他帖子（例如[一篇](https://stackoverflow.com/questions/1650516/jquery-ajax-method-post-but-post-empty)和[两篇](https://stackoverflow.com/questions/271043/jquery-post-empty-array)），但这些帖子中的解决方案似乎都不适用于我。

我正在尝试将 JSON 编码的对象从页面传递到 PHP 控制器，然后返回一些信息。

如果我在 Firebug 中观看，我可以在“发布”选项卡下看到正在发送的对象，但是当我打印出 $_GET、$_POST 和 $_REQUEST 数组时，我看不到任何关于 json 对象的信息。$_GET 数组至少显示了我的“update-player”查询字符串，但是 POST 是空的，REQUEST 只显示了我拥有的一些本地 cookie。

这是我的 jQuery 代码。如您所见，我目前正在对 JSON 进行硬编码，其目的是让 jQuery 方法更新本地对象。

```
function sendPlayerUpdate(row, col) {
    var playerinfo = [
        {
          "id": 1,
          "row": row,
          "col": col
        }
      ];

        alert(playerinfo[0].id); //debugging

    $.ajax({
        type: 'POST',
        url:"controller.php?a=update-player",
        //data: $.toJSON(playerinfo[0],
        data: { json: JSON.stringify(playerinfo) },
        contentType: "application/json",
        success: function (){

        },
        dataType: 'json'
      });
 }; 
```

我处理请求的相应 PHP 代码：

```
// update player information from AJAX POST
case "update-player":
  if (isset($_POST['json'])) echo "json received\n\n";
  else echo "json not received\n\n";
  echo "GET VARIABLES\n";
  print_r($_GET);
  echo "\n\nPOST VARIABLES\n";
  print_r($_POST);
  echo "\n\nREQUEST VARIABLES\n";
  print_r($_REQUEST); 
```

而且，我在 Firebug 中看到的：

![萤火虫输出](../Images/f688007903b69734c45c97b7a7a48a6e.png) 没有收到json

```
GET VARIABLES
Array
(
    [a] => update-player
)

POST VARIABLES
Array
(
)

REQUEST VARIABLES
Array
(
    [a] => update-player
    (local cookies)
) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T17:51:05.857

在 PHP 中尝试如下（当请求是应用程序/json 时，您不会将数据放入 $_POST）

```
var_dump(json_decode(file_get_contents("php://input"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:46:47.397

试试这个可能对你有用

```
 $.ajax({
type: 'POST',
url:"controller.php?a=update-player",
data: data_json=JSON.stringify(playerinfo),
success: function (data){
},
}); 
```

# regex - 正则表达式实现两个目标：替换和删除

> ID：13000389
> 
> 赞同：0
> 
> 时间：2012-10-21T17:38:25.933
> 
> 标签：regex, perl

我无法为这个问题设置一个更好的标题，但我的问题是：

给定一行形式：

```
int a,b,var1,var2; 
```

我需要将其转换为表格的一行

```
s(a);s(b);s(var1);s(var2); 
```

到目前为止，我有这个：

```
s/\b(\w)[,;]/s\(\1\);/g 
```

但它只会将其转换为

```
int s(a);s(b);s(var1);s(var2); 
```

我不需要看到这个`int`部分。这可以只使用一个正则表达式来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T17:57:36.913

您可以使用正则表达式的非捕获部分并将其设为可选，如下例所示：

```
$_ = "int a,b,var1,var2;";

s/(?:^\w+\s+)?([^;,]+)[;,]/s(\1);/g;

print $_ 
```

^(输出)

```
s(a);s(b);s(var1);s(var2); 
```

# java - 是否可以使用 Java PreparedStatement 和 MySQL 存储例程进行 SQL 注入

> ID：13000390
> 
> 赞同：0
> 
> 时间：2012-10-21T17:38:28.317
> 
> 标签：java, mysql, stored-procedures, prepared-statement

爪哇：

```
PreparedStatement stmt = myConnection.prepareStatement("CALL myStoredRoutine(?, ?, ?)");
stmt.setString(1, a);
stmt.setString(2, b);
stmt.setString(3, c);
stmt.executeQuery(); 
```

* * *

如果我存储的例程在 MySQL 中，未过滤的字符串是否可以将某些内容注入我的代码中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T17:50:04.807

不，因为`PreparedStatement`是为了防止`SQL Injection`.

我看到您正在调用存储过程，因此更好地使用`CallableStatement`.

```
String SQL = "{CALL myStoredRoutine(?, ?, ?)}";
CallableStatement cstmt = myConnection.prepareCall(SQL); 
```

*   **准备好的声明**

PreparedStatement 的实例包含已编译的 SQL 语句。这就是使声明“准备好”的原因

因为 PreparedStatement 对象是预编译的，所以它们的执行速度可以比 Statement 对象快。

准备好的语句用于执行sql查询

*   **可调用语句**

CallableStatement 对象提供了一种以标准方式为所有 RDBMS 调用存储过程的方法。存储过程存储在数据库中；对存储过程的调用是 CallableStatement 对象包含的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T17:40:25.080

不，这是不可能的。字符串**由**准备好的语句过滤。实际上，这是他们的观点之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:41:42.470

不，参数绑定的目的是参数被解析为参数。这对性能也有好处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T17:42:08.830

当您使用参数化查询时，如果需要，参数会被解析并使用转义字符进行转换，因此不可能。这是使用参数化查询/准备语句的优势。

# bash - 如何在whiptail中显示信息框？

> ID：13000391
> 
> 赞同：7
> 
> 时间：2012-10-21T17:38:34.917
> 
> 标签：bash

为什么这段代码在 Bash 中不起作用？

```
whiptail --infobox "My Text" 0 0 
```

手册指出：

```
whiptail --infobox text height width 
```

那么有什么问题呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T00:54:52.320

由于一个错误，`--infobox`whiptail 中的选项在（即 gnome 终端）中不起作用`xterm`。但是，它确实可以在常规控制台上运行。

这似乎是一个长期存在的错误，在[报告](https://bugzilla.redhat.com/show_bug.cgi?id=91596)时已被视为不可重现。

最近，它再次在[Launchpad](https://bugs.launchpad.net/ubuntu/+source/newt/+bug/604212)中被报道。

如果你需要一个工作`--infobox`，`xterm`你可以使用`dialog`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-30T06:20:52.110

绝对看起来像一个错误。

我认为它必须保存屏幕，显示框，然后再次清除屏幕（如“less <filename>”） - 如果通过“cat -v”之类的管道输出，您可以看到输出。

我认为 vt220 与 xterm 非常相似，因此解决方法是：

```
TERM=vt220 whiptail --infobox "My Text" 0 0 
```

# ios - 队列分析

> ID：13000392
> 
> 赞同：0
> 
> 时间：2012-10-21T17:38:37.043
> 
> 标签：ios, google-analytics

我整个周末都在试图弄清楚是否有一个分析工具可以支持我的应用程序对活跃客户/客户保留的智能群组分析的需求，但令人沮丧的是我没有找到任何东西。我不敢相信我是唯一一个试图监控此类数据的人，所以我认为我没有抓住重点，因此愿意就我的工作重点提出建议......

我需要在我的应用中跟踪活跃用户的数量。我将**活跃**用户定义为在过去 90 天内使用过它（即使只是为了查看数据）的人。如果用户超过 90 天未访问该应用程序，则他们将变为非**活动状态**，并且可以再保持 90 天不活动状态。在 90 天结束时，它们会**处于休眠状态**，我认为他们已决定不使用我的应用程序或找到替代方案。但是，如果在任何时候返回，则“时钟”会被重置，它们会再次激活。

所以总结一下：
活跃用户 - 任何经常使用我的应用程序的人。
非活跃用户 - 在过去 90 到 180 天内未访问/查看/使用该应用程序的人。
休眠用户 - 超过 180 天未访问/查看/使用我的应用程序的人。

是否有人对我如何通过编写自己的自定义代码或最好使用 Flurry 或 Google Analytics 等分析工具包来实现这一点有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:38:00.887

[我一直在AppSDKs.com](http://www.appsdks.com/)上为应用程序开发人员汇总各种解决方案列表，其中包括[分析](http://www.appsdks.com/?category_id=1)类别。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T14:22:51.007

如果您的用户表中有一个字段显示他们上次登录的时间，那么它应该很简单，可以使用 SQL 查询该数据以获取您想要的报告。根据您对同类群组的定义，这似乎是获取所需数据的最佳方式。

通过 Web 分析平台获取这些数据的问题在于，这些平台通常会跟踪网站上发生的事情，而您的定义是针对不会触发状态更改的事情。

[Mixpanel](https://mixpanel.com/)和[Kissmetrics](http://www.kissmetrics.com/)都支持某种同类群组分析。即使它不完全符合您的定义，它也可能足够接近或可以模拟您的用例。

Google Analytics 不提供开箱即用的同期群分析，您可以尝试使用自定义变量进行模拟，但我认为这可能比其他选项复杂一些。

# jquery - 滚动到某个点后停止动画

> ID：13000401
> 
> 赞同：4
> 
> 时间：2012-10-21T17:39:42.690
> 
> 标签：jquery, animation, scroll, scrolltop

我目前有它用于在您向下滚动屏幕时移动的图像（使用 jQuery 完成），但我希望它们在某个点停止。

这是我目前拥有的代码。

```
$(document).ready(function() {
        var $bagSix = $("#six");
        var $bagEight = $("#eight");
        var $bagTen = $("#ten");
        var $bagTwelve = $("#twelve");

        $(window).scroll(function(){            
                $bagSix
                .stop()
                .animate({"marginTop": ($(window).scrollTop() + 30) + "px"}, "slow" );

        });

                $(window).scroll(function(){            
                $bagEight
                .stop()
                .animate({"marginTop": ($(window).scrollTop() + 30) + "px"}, "slow" );          
        });

                $(window).scroll(function(){            
                $bagTen
                .stop()
                .animate({"marginTop": ($(window).scrollTop() + 30) + "px"}, "slow" );          
        });

                $(window).scroll(function(){            
                $bagTwelve
                .stop()
                .animate({"marginTop": ($(window).scrollTop() + 30) + "px"}, "slow" );          
        });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:43:19.200

如果您只想停在特定点，您可以执行以下操作：

```
var new_top = Math.min($(window).scrollTop() + 30, 500);
$bagSix
.stop()
.animate({"marginTop": new_top + "px"}, "slow" ); 
```

这将计算新的目标位置，并确保它永远不会超过页面顶部的 500 像素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T17:51:56.833

**[jsBin 演示](http://jsbin.com/axenoj/1/edit)**

```
$(document).ready(function() {

    var $bags = $("#six, #eight, #ten, #tweleve");

    $(window).scroll(function(){
        var winScrT = $(window).scrollTop();
        if(winScrT < 789 ){           // or what you prefer         
            $bags.stop().animate({marginTop: winScrT+30 }, "slow" );
        }
    });

}); 
```

为什么不只为你所有的包使用一个类，比如：

```
var $bags = $(".bag"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:47:17.740

首先，使用以下命令总结调用：

```
$("#image1, #image2, etc.") 
```

然后编辑你的函数：

```
$(window).scroll(function(){            

$images.stop().animate({
        "marginTop": Math.min($(window).scrollTop() + 30, <stopping point>) + "px"}, "slow" );   
 }); 
```

希望有帮助

# iphone - 仅在发布配置时应用程序崩溃

> ID：13000403
> 
> 赞同：1
> 
> 时间：2012-10-21T17:39:50.580
> 
> 标签：iphone, ios, xcode, build, release

在过去的一段时间里，我遇到了一些绝对令人困惑的崩溃。它们只会出现在我正在构建的应用程序的发布配置中，而且它们也很难重现。对谷歌的严格搜索也没有找到很多（如果有的话）答案。

这是一个相关的崩溃日志，用于我试图修复的一次崩溃，但实际上无法修复。崩溃发生在我关闭模态视图控制器并且该模态视图控制器内的视图释放后。作为参考，我正在使用 Core Data，并且还在已关闭的模态视图控制器内部创建了一些对象，这些对象没有插入任何托管对象上下文（也许就是这样？）。

![崩溃日志 1](../Images/e4ec32e26142823ca9d19e8b4e6eb44e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:49:55.420

只是更新这个。

我有一些 try-catch 逻辑导致 ARC 过度释放 NSString。我通过使用 Instruments 中的 Zombies 工具发现了这一点。当我更新了这个逻辑并删除了原来的 try-catch 逻辑时，问题就解决了。

# android - 在 Android 中的后台计时器上运行活动

> ID：13000406
> 
> 赞同：0
> 
> 时间：2012-10-21T17:40:26.410
> 
> 标签：android, multithreading

我正在使用 Google Maps API 构建一个应用程序。我需要及时在我的活动中运行一个活动/类/方法，例如在后台每 1 分钟运行一次，而不影响主要活动。我该如何实施？我应该在我的活动中在哪里实施这个？

我是 android 编程和 Java 的新手。所以，我对这样做没有好主意。如果可能的话，有人会为我提供一些好的编码示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:57:27.563

**-**使用`Service`，这是一个`Activity` **没有 UI 的**。它将帮助您定期实施您的方法。

**-** `Service`可以有**界**也可以**无界**地`Activity`启动它，因此您可以以适合您需要的方式使用它。

**-**我**不会**推荐 Thread 在这里（无论是 using`Thread class`还是 using `AsyncTask`），因为一旦`Application` **关闭**，它`Thread` **也会终止**，但是如果您使用**Un-Bounded** `Service`，那么即使您的应用程序是，您的**服务也会在后台继续运行**关闭。

**请参阅本教程：**

[http://www.vogella.com/articles/AndroidServices/article.html](http://www.vogella.com/articles/AndroidServices/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:44:28.373

试试下面的链接 -

[http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

或者

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

它可能会帮助你。

# actionscript-3 - AS3 未定义属性 stageVideos

> ID：13000407
> 
> 赞同：1
> 
> 时间：2012-10-21T17:40:34.603
> 
> 标签：actionscript-3, starling-framework

我有一个针对 iOS 和 Android 的 AS3 Mobile AIR 项目。出于某种原因，当我尝试访问 stageVideos 即 stage.stageVideos[0]...舞台上没有可用的 stageVideos 属性？很奇怪，因为我以前做过。我的应用程序正在使用 Starling 和 Features UI 框架，而我的课程正在扩展 Screen。我对这两个框架都很陌生，但一直是老手。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:26:16.867

应该是硬件问题。当 StageVideo 在特定设备上不可用时，stage.stageVideos 属性为空，因此请确保您应该像这样进行检查。

```
var stageVideo:StageVideo;

if ( stage.stageVideos.length >= 1 ) {
    stageVideo = stage.stageVideos[0];
} 
```

或在舞台上注册 StageVideoAvailabilityEvent

```
stage.addEventListener(StageVideoAvailabilityEvent.STAGE_VIDEO_AVAILABILITY, stageVideoChange);

private function stageVideoChange(e:StageVideoAvailabilityEvent):void
{
    if(e.availability == AVAILABLE)
    {
         // (stage.stageVideos.length >= 1) is TRUE so we can use stageVideo[0]
    }
    else
    {
         // StageVideo become unavailable for example after going from fullscreen 
         // back to wmode=normal, wmode=opaque, or wmode=transparent
    }
} 
```

当然，第二种方法更容易接受，因为每次 StageVideo 可用或否定时都会通知您。请注意，如果在 StageVideoAvailabilityEvent 上注册侦听器时舞台视频可用，则立即调用侦听器函数 (stageVideoChange)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T21:21:08.680

事实证明，Starling 在实际 Flash 显示舞台的 TOP 上的 Stage3D 上运行。所以为了做到这一点，你需要先隐藏 Starling Stage3D：

```
Starling.current.stage3D.visible = false 
```

然后您可以访问并显示...等 stageVideos 并添加到 flash 显示阶段：

```
_stageVideo = Starling.current.nativeStage.stageVideos[0]; 
```

所以基本上，原生 Flash 显示阶段位于 Starling.current.nativeStage 属性上，但是，除非您首先隐藏 Starling.current.stage3D FIRST，否则无法显示。

感谢您的回复！希望这可以帮助其他有同样问题的人。

# c# - 如何遍历一个结构

> ID：13000408
> 
> 赞同：-3
> 
> 时间：2012-10-21T17:40:39.013
> 
> 标签：c#

我有以下结构： -

```
public struct Cordination
{
    public int A;
    public int B;

    public Cordination(int a, int b)
    {
        A = a;
        B = b;
    }
} 
```

然后我需要计算任意两个地方之间的距离，所以我需要遍历结构并减去每个地方的 x 轴和 y 轴以获得结构中任意两个地方之间的距离，然后返回最短距离；但我不确定我该怎么做：-

```
public float distanceInMeter(Cordination[] cordination)
{
    for (i //codes goes here...)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:52:31.727

这是您问题的答案。您需要固定一个坐标并计算到所有其他坐标的距离，但尽量不要重复计算。因此`i`将固定一个坐标并`j`遍历所有其他坐标。请注意，这`j`是从`i + 1`确保您不重复计算开始的。

```
public struct Cordination
{
    public int A;
    public int B;

    public Cordination(int a, int b)
    {
        A = a;
        B = b;
    }
}

public float distanceInMeter(Cordination[] cordination)
{
    float minDistance = float.MaxValue;
    for (int i = 0; i < cordination.Length - 1; i++)
    {
        for (int j = i + 1; j < cordination.Length; j++)
        {
            float dist = (float)Math.Sqrt(
                Math.Pow(cordination[i].A - cordination[j].A, 2.0) +
                Math.Pow(cordination[i].B - cordination[j].B, 2.0));
            if (dist < minDistance)
                minDistance = dist;
        }
    }
    return minDistance;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T17:51:21.550

好的，您应该生成一个列表

```
 List<Cordination> TestList = new List<Cordination>(); 
```

接下来，您将元素放入列表中

```
 TestList.Add(new Cordination(5,6); 
```

现在您可以通过列表使用 foreach 循环或 for 循环

```
 foreach (Cordination i in TestList)
    {
       Console.WriteLine(i.A);
    } 
```

如果您对此有更多疑问：http: [//msdn.microsoft.com/en-us/library/6sh2ey19.aspx](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)

# objective-c - 在两个视图上显示来自点击计数器的文本

> ID：13000409
> 
> 赞同：0
> 
> 时间：2012-10-21T17:40:39.367
> 
> 标签：objective-c, ios, xcode4.5

所以我有我的应用程序，我有一个带有点击计数器和显示标签的视图。我希望它在主视图上显示文本（现在可以），但也在第二个视图上。

那么我怎么能在另一个视图上显示文本。如果需要更多详细信息，请发送电子邮件。

为 TAP 计数器重现的步骤 .h 文件：

```
@interface Level1 : UIViewController {

int counter;

IBOutlet UILabel *count;

}

-(IBAction)plus;

@property (assign) int counter;

@end 
```

.m 文件：

```
@synthesize counter;

- (void) viewDidLoad {

counter=1;

count.text = @"0";

[super viewDidLoad];
}

-(IBAction)plus {

counter=counter + 1;

count.text = [NSString stringWithFormat:@"%i",counter];
}

@end 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:11:03.350

您可以使用您的计数器值创建模型，该值将在两个视图之间共享。

模型通常使用单例模式创建。在这种情况下，可以这样做：

你的 .h 文件：

```
@interface CounterModel
@property (assign) NSInteger counter;// atomic
+ (id)sharedInstance;
- (void)increment;
@end 
```

你的 .m 文件：

```
@implementation CounterModel
@synthesize counter;

- (id)init
{
    if (self = [super init])
    {
    }
    return self;
}

+ (id)sharedInstance
{
    static CounterModel *instance = nil;
    if (instance == nil)
    {
        instance = [[CounterModel alloc] init];
    }
    return instance;
}

- (void)increment
{
    counter++;
}

@end 
```

然后，您可以从一个视图控制器调用：

```
[[CounterModel sharedInstance] increment]; 
```

从第二个开始，您可以通过调用来读取这个更新的值：

```
[[CounterModel sharedInstance] counter]; 
```

要实现您想要的，您可以在 viewWillAppear 方法中设置从模型的计数器值读取的 UILabel 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:17:25.053

在这里，您可以使用委托将数据传递给另一个视图。当您可能通过第一个视图加载第二个视图时，您可以将第一个视图设置为数据源。

[http://www.youtube.com/watch?v=e5l0QOyxZvI](http://www.youtube.com/watch?v=e5l0QOyxZvI)

您还可以使用通知中心将消息发送到另一个视图。

# java - 使用 BufferedReader 在 java 中读取终端命令的输出

> ID：13000412
> 
> 赞同：3
> 
> 时间：2012-10-21T17:41:35.153
> 
> 标签：java, terminal, ifconfig, output

Java 的 Noobie 刚刚开始，将不胜感激。所以我的代码是这样的，由于某种原因，我无法让输出工作..我已经坐了好几个小时了..

```
package askisi1;

import java.net.*;
import java.util.*;
import java.lang.*;
import java.io.*;

public class Main{

public static void main(String[] args){

    try{

        String command = "ifconfig eth1 | grep -oP '[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}'";
        Process child = Runtime.getRuntime().exec(command);

        System.out.println("So far so good");
        BufferedReader r = new BufferedReader(new InputStreamReader(child.getInputStream()));
        String s;
        while ((s = r.readLine()) != null) {
        System.out.println(s);
        }
        r.close();
        System.out.println("Continue..");
    }
    catch (IOException e) {
        e.printStackTrace();
    }
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:00:51.680

`Runtime.exec()`需要一些附加信息来执行 Unix 命令。

所以，假设我的以太网卡是`lo0`：

```
String[] command = {
                    "/bin/sh",
                    "-c",
                    "ifconfig lo0 | grep -oP '[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}'"
            }; 
Process child = Runtime.getRuntime().exec(command);
// following here your remaining unchanged code 
```

这打印：

```
So far so good
127.0.0.1
Continue.. 
```

# javascript - 在 Javascript 中验证电子邮件地址，并与非 ASCII 字符兼容

> ID：13000413
> 
> 赞同：3
> 
> 时间：2012-10-21T17:41:36.407
> 
> 标签：javascript, regex, internationalization, email-validation, non-ascii-characters

有许多正则表达式可用于验证电子邮件地址，但其中大多数与非 ASCII 字符不兼容。一旦电子邮件地址包含非 ASCII 字符，如“Rδοκιμή@παράδειγμα.δοκιμή”或“管理员@中国互联网络信息中心。中国”，他们就无法正确识别。如何构造一个用于验证电子邮件地址并与非 ASCII 字符兼容的正则表达式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T18:24:05.627

根据[这个来源](http://www.regular-expressions.info/unicode.html)，不通过其 RegExp 类提供任何 Unicode 支持的 JavaScript 确实支持 \uFFFF 以匹配单个 Unicode 代码点作为其字符串语法的一部分。
因此，为了定义 Unicode 字符的匹配，应该创建一组 \uXXXX 符号。[此处](http://xregexp.com/plugins/)列出的插件可以创建 Unicode 正则表达式，并可用于在使用[XRegExp](http://xregexp.com/) JavaScript 库时定义 Unicode 正则表达式。

这是测试有效 ASCII 电子邮件地址的函数：

```
/**
 * Checks if string contains valid email address as described
 * in RFC 2822: http://tools.ietf.org/html/rfc2822#section-3.4.1
 * This function omits the syntax using double quotes and square brackets
 * @return {Boolean}    True, if test succeeded.
 */
String.prototype.checkEmail = function()
{
    var reEmail = /^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/;
    return reEmail.test(this);
}

// Usage example
alert( "some_valid_email@somewhere.com".checkEmail() ); // true
alert( "invalid_email.com".checkEmail() ); // false 
```

为了使其适用于 Unicode 字符串，可以包含 XRegExp 库并`\\p{L}`使用`a-z`. 这是完整的代码：

```
<!DOCTYPE html>
<html>
<head>
    <script src="xregexp-all-min.js"></script>
    <script>
        /**
         * Checks if string contains valid email address as described
         * in RFC 2822: http://tools.ietf.org/html/rfc2822#section-3.4.1
         * This function omits the syntax using double quotes and square brackets
         * @return {Boolean}    True, if test succeeded.
         */
        String.prototype.checkEmailX = function()
        {
            var reEmail = XRegExp("^[\\p{L}0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[\\p{L}0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[\\p{L}0-9](?:[\\p{L}0-9-]*[\\p{L}0-9])?\.)+[\\p{L}0-9](?:[\\p{L}0-9-]*[\\p{L}0-9])?$");
            return reEmail.test(this);
        }

        alert( "true = " + "Rδοκιμή@παράδειγμα.δοκιμή".checkEmailX() ); // true
        alert( "true = " +"管理员@中国互联网络信息中心.中国".checkEmailX() ); // true
        alert( "true = " +"test@test.am".checkEmailX() ); // true
        alert( "false = " +"test_test.am".checkEmailX() ); // false
        alert( "true = " +"test@ράδ.am".checkEmailX() ); // true
    </script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T20:07:16.367

我不得不写一些关于如何使用正则表达式验证电子邮件地址的文章。不幸的是，结果是**无法以这种方式验证电子邮件地址**。

你当然想知道为什么。

1.  查看[Wikipedia 文章中的有效电子邮件地址示例](http://en.wikipedia.org/wiki/Email_address#Examples)。编写能够满足所有这些标准的正则表达式几乎是不可能的。
2.  当然，您已经了解原生顶级域。这就是你提问的原因。但是，您可能没有意识到，除了“标准”国家顶级域名之外，我们这里可能还有*任何*名称。它是一个移动的目标，所以...
3.  没有所有域注册机构都遵循的特定政策。我发现，例如，日本注册表允许使用[表意句号](http://en.wikipedia.org/wiki/Full_stop#Asian_period)（全角和半角）作为标签分隔符。我不知道它是如何工作的，但这是他们允许的。此外，事实证明，日本和中国的注册机构在最大标签长度方面存在差异。我看不出如何使用正则表达式对其进行验证。

那么我们如何验证电子邮件呢？一种想法是简单地询问给定域的 MTA 是否存在（这在前端无法完成，即使用客户端 JavaScript）。不幸的是，它带来了 DOS 攻击的风险，所以这不是最好的主意。当然，您不会知道该地址在给定服务器上是否有效。为此，您需要连接到服务器并发出 VRFY 命令，但由于垃圾邮件发送者，大多数服务器会回复“550 No such user”。

如果验证的目的仅仅是为了避免用户的错误，您可能需要添加额外的字段并让用户重新输入电子邮件（这也不是最好的主意）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-21T18:27:42.597

请不要把事情复杂化。

花点时间想想你为什么需要它。很可能是因为您想向用户发送电子邮件，对吧？所以我提倡最简单的电子邮件验证正则表达式：

```
/@/ 
```

完毕。它将验证所有有效的电子邮件地址。它还会错误地验证许多看起来像一个但实际上并不有效的东西，但大多数错误要么没有填写表单字段，要么混淆了字段并在其他字段中输入了错误的内容。

此外，您还会注意到电子邮件地址是否无效，因为您的邮件被退回。并且地址的*存在*是任何正则表达式都无法为您做的事情。

# android - Android - 如何在完成活动之前显示 AlertDialog？

> ID：13000418
> 
> 赞同：2
> 
> 时间：2012-10-21T17:41:46.117
> 
> 标签：android

我正在尝试实现此代码

```
 if(someCondition){
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("message")
        .setPositiveButton("Yes", this)
        .setNegativeButton("No", this);
        builder.show();
    }
    finish(); 
```

问题是活动在显示对话框之前调用完成（），因此它引发以下异常

```
MyActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40704090 that was originally added here 
```

如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:43:53.890

```
if(someCondition){
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("message")
    .setPositiveButton("Yes", this)
    .setNegativeButton("No", this);
    builder.show();
} else {
    finish(); 
} 
```

并在按钮的处理程序中单击再次完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T17:47:40.460

关闭对话框时使用[OnDismissListener](http://developer.android.com/reference/android/content/DialogInterface.OnDismissListener.html)调用。`finish()`这样用户可以响应 Dialog 并且 Activity 仍然可以关闭。

* * *

```
if(someCondition) {
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setMessage("message");
        .setPositiveButton("Yes", this)
        .setNegativeButton("No", this);

    AlertDialog dialog = builder.create();
    dialog.setOnDismissListener(new OnDismissListener() {
        @Override
        public void onDismiss(DialogInterface dialog) {
            finish();
        }
    });
    dialog.show();
}
else {
    finish();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T17:47:16.327

您收到以下错误：

```
MyActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@40704090 that was originally added here 
```

因为在活动完成之前必须解雇建造者。所以我想你将不得不重新设计你希望你的活动如何完成。也许您希望它在单击“否”按钮时完成？

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T17:57:01.907

我不确定问题到底是什么，但您遇到的错误是因为您在显示对话框时完成了活动。我经常做的是调用我的活动`dialog.dismiss()`的`onPause`或`onStop`方法。

这段代码怎么样？：

在你的活动中的一些地方；

```
private AlertDialog dialog; 
```

onPause 或 onStop 方法，

```
@Override
public void onPause() {
    super.onPause();
    if(dialog != null){
        dialog.dismiss();
    }
} 
```

建立对话，

```
 if(someCondition){
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("message")
        .setPositiveButton("Yes", new OnClickListener(){
            public void onClick(DialogInterface arg0, int arg1) {
                //do stuff
                 //finish?
            }
        });
        .setNegativeButton("No", new OnClickListener(){
            public void onClick(DialogInterface arg0, int arg1) {
                //do stuff
                //finish?
            }
        });
        dialog = builder.show();
    } 
```

# python - 用 Pandas 重塑长格式多值数据框

> ID：13000427
> 
> 赞同：2
> 
> 时间：2012-10-21T17:42:17.597
> 
> 标签：python, pivot, pandas, reshape

我想转：

```
DateTime                     ColumnName        Min      Avg      Max                                                                                      
2012-10-14 11:29:23.810000   Percent_Used       24       24       24
2012-10-14 11:29:23.810000   Current_Count  254503   254503   254503
2012-10-14 11:29:23.810000   Max           1048576  1048576  1048576
2012-10-14 11:34:23.813000   Percent_Used       24       24       24
2012-10-14 11:34:23.813000   Current_Count  254116   254116   254116
2012-10-14 11:34:23.813000   Max           1048576  1048576  1048576 
```

进入 DateTimes 唯一的数据框（索引）并且列是：

DataTime, Percent_Used_Min, Percent_Used_Avg, Percent_Used_Max, Current_Count_Min, Current_Count_Avg, Current_Count_Max, Max_Min, Max_Avg, Max_Max

基本上，我想在不涉及分层索引或堆叠数据帧的情况下模仿 R 的熔化/铸造。我似乎无法准确地使用 stack/unstack、melt 或 pivot/pivot_table 进行上述操作——有没有好的方法来做到这一点？

作为一个例子，在 R 中它会是这样的：

```
dynamic_melt = melt(dynamic, id = c("DateTime", "ColumnName"))
recast = data.frame(cast(dynamic_melt, DateTime ~ ...)) 
```

上述数据将是可变的（即 ColumnName 的值并不总是相同的，它们可能或多或少，并且名称不同）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T00:42:23.627

有一个`melt`在`pandas.core.reshape`：

```
In [52]: melted = reshape.melt(df, id_vars=['DateTime', 'ColumnName'])

In [53]: melted.set_index(['DateTime', 'ColumnName', 'variable']).value.unstack([1, 2])
Out[53]: 
ColumnName                  Percent_Used  Current_Count      Max  Percent_Used  Current_Count      Max  Percent_Used  Current_Count      Max
variable                             Min            Min      Min           Avg            Avg      Avg           Max            Max      Max
DateTime                                                                                                                                    
2012-10-14 11:29:23.810000            24         254503  1048576            24         254503  1048576            24         254503  1048576
2012-10-14 11:34:23.813000            24         254116  1048576            24         254116  1048576            24         254116  1048576 
```

这些列最终成为 MultiIndex，但如果这对您来说是一个交易破坏者，只需连接名称并使其成为常规索引。

# c - { 之前的预期表达式 in case...switch

> ID：13000428
> 
> 赞同：0
> 
> 时间：2012-10-21T17:42:28.537
> 
> 标签：c, switch-statement

所以我有以下内容：

```
//at file scope
GLfloat point_colour[3] = {1.0, 0.5, 0.0};
...

void menu_colour(int index){
  switch(index){
    case RED: point_colour = {1.0, 0.0, 0.0}; break;
    case GREEN: point_colour = {0.0, 1.0, 0.0}; break;
    case BLUE: point_colour = {0.0, 0.0, 1.0}; break;
    case ORANGE: point_colour = {1.0, 0.5, 0.0}; break;
    case PURPLE: point_colour = {1.0, 0.0, 0.8}; break;
    default: point_colour = {1.0, 0.0, 0.0};
  }
} 
```

但我得到`error: expected expression before '{' token`每个案例行。

我正在尝试为数组分配一个新的值`point_colour`数组 - 有帮助吗？我怀疑我的做法完全错误......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T17:43:27.407

您不能在 C 中执行此操作：

```
point_colour = {1.0, 0.0, 0.0}; 
```

您只能`= {1.0, 0.5, 0.0}`在对象初始化时执行。数组是 C 中的二等公民，您不能分配给数组。

您可以做的是分别为数组的每个元素分配一个值。

如果`point_colour`是指针，您可以使用复合文字：

```
GLfloat *point_colour;

point_colour = (GLfloat []) {1.0, 0.5, 0.0}; 
```

# knockout.js - 按属性获取输入

> ID：13000440
> 
> 赞同：1
> 
> 时间：2012-10-21T17:43:40.950
> 
> 标签：knockout.js

是否可以获得属性的相关输入？将模型添加到数组后，我需要关注输入：

```
var newItem = new ChildModel();
this.childItems.push(newItem);
// and then something like this:
newItem.observableProperty.focusInput(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:44:59.920

你可以看看`hasfocus`绑定。如果您愿意为您添加一个`selected`属性，您`ChildModel`可以执行以下操作：http: [//jsfiddle.net/jearles/sZnbU/](http://jsfiddle.net/jearles/sZnbU/)

当我将一个项目推入可观察数组时，我将其`selected`属性设置为`true`. 这使它成为焦点。每行还有一个`Select`按钮让您选择它。

当我添加一个新项目时，我会记录这些项目，以便您可以看到`selected`属性的变化。最后，如果您单击输入文本框，使其获得焦点，然后单击`Log`，您将看不到“选定”项目。

--

```
<span>
    New Item: <input data-bind="value:newItem" />
    <button data-bind="click: addItem">Add</button>
    <button data-bind="click: logItems">Log</button>
</span>
<div data-bind="foreach: items">
    <p>
        <input data-bind="value: text, hasfocus: selected" />
        <button data-bind="click: selectItem">Select</button>
    </p>
</div>​ 
```

--

```
var ChildItem = function(text) {
    var self = this;
    self.text = ko.observable(text);
    self.selected = ko.observable(true);
    self.selectItem = function() {
        self.selected(true);
    }
};

var ViewModel = function() {
    var self = this;
    self.items = ko.observableArray();
    self.newItem = ko.observable('');
    self.addItem = function() {
        if (self.newItem().length > 0) {
           self.items.push(new ChildItem(self.newItem()));
           self.newItem('');
           self.logItems();
        }
    };
    self.logItems = function() {
        console.log(ko.toJSON(self.items));
    }
}

ko.applyBindings(new ViewModel()); 
```

​ ​</p>

# java - Java 使用另一个线程检查线程的状态

> ID：13000446
> 
> 赞同：0
> 
> 时间：2012-10-21T17:44:10.660
> 
> 标签：java, multithreading

我有一个程序，其中一堆线程执行某些任务。我想知道所有这些线程什么时候完成，以便我可以用它们的结果做一些其他的事情。我不想使用像`Thread.join`. 我更喜欢的是另一个线程检查所有这些线程，当它看到它们完成时，它会执行一些特殊任务。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T17:49:46.927

我会使用 ExecutorService 之类的

```
List<Future> futures = new ArrayList<Future>();
for(int i = 0; i < N_TASKS; i++)
    futures.add(executorService.submit(new Task(i));

// wait for all tasks to complete.
for(Future future : futures) future.get(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T17:51:33.187

实际上阻​​塞更容易实现，更可靠并且不会引入任何额外的开销/延迟。如果您不想使用`join()`，请考虑[`CountDownLatch`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)，它允许您等待一组线程。

另一种更令人愉快的方法是[`ExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)使用轻量级[`ExecutorCompletionService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html).

这两种方法都可以以非阻塞方式使用，例如只偷看而不是阻塞并等待结果。但是为了不浪费 CPU 周期，有一个单独的后台线程阻塞并等待结果，并在所有工作线程完成后立即发送一些事件。

或者让每个工作线程在完成后发送一个事件。一旦接收到的事件数量达到启动的工人数量，接收这些事件的对象将知道处理已完成。使用[`ListenableFuture`](http://guava-libraries.googlecode.com/svn/trunk/javadoc/com/google/common/util/concurrent/ListenableFuture.html)from Guava，您甚至可以避免额外的*看门狗*线程。

# python - Python IOError 中的错误：[Errno 2] 没有这样的文件或目录：'data.csv'

> ID：13000455
> 
> 赞同：13
> 
> 时间：2012-10-21T17:45:47.380
> 
> 标签：python, errno

在 Python 中，我有一个脚本，我正在尝试使用 python`open("data.csv")`命令打开 Python 脚本目录中的 CSV 文件。

那里有一个文件叫`data.csv`.

python脚本指示错误：

```
Error in Python IOError: [Errno 2] No such file or directory: 'data.csv' 
```

这个错误是什么意思，我该如何解决？

这是脚本中重现错误的最少代码：

```
open("data.csv") 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-21T17:49:18.677

尝试提供 csv 文件的完整路径

```
open('/users/gcameron/Desktop/map/data.csv') 
```

python 进程正在运行它的目录中寻找文件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-21T17:49:40.170

[open](http://docs.python.org/library/functions.html#open)在当前工作目录中查找，在您的情况下是`~`，因为您是从`~`目录中调用脚本。

您可以通过以下任一方式解决问题

*   `cd``data.csv`到执行脚本之前包含的目录，或者

*   通过`data.csv`在脚本中使用完整路径，或

*   通过调用[os.chdir(...)](http://docs.python.org/library/os.html#os.chdir)从脚本中更改当前工作目录。请注意，所有使用当前工作目录的后续命令（例如`open`和`os.listdir`）都可能受此影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T17:51:03.523

它正在当前目录中查找文件。

首先，进入那个目录

```
cd /users/gcameron/Desktop/map 
```

然后尝试运行它

```
python colorize_svg.py 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T17:49:34.473

您需要提供 data.csv 的绝对路径，或者在与 data.csv 相同的目录中运行脚本。

# html - Firefox 和 Chrome 似乎渲染 box-shadow 的方式完全不同

> ID：13000456
> 
> 赞同：13
> 
> 时间：2012-10-21T17:45:53.257
> 
> 标签：html, css, cross-browser

我在 Chrome 和 Firefox 中测试了一个盒子阴影效果，我很惊讶地发现这两种浏览器之间的渲染存在巨大差异。值得注意的是，Firefox 的渲染*要*暗得多。下面是两张参考图：

![铬合金](../Images/5c3552bd753600d381815169b97764c5.png) ![火狐](../Images/22017ee9051152bc58a480e1e8924333.png)

第一个图像在 Chrome 22 中渲染，后者在 Firefox 16 中渲染，两者都在 Mac OS 10.8.2 下运行。我不知道为什么这两个图像的渲染如此不同。这是盒子阴影本身，两种浏览器都一样：

```
box-shadow: 0px 1px 3px rgba(0,0,0,0.3), inset 0px 4px 2px -2px rgba(255,255,255,0.7), inset 0px -3px 1px -2px rgba(0,0,0,0.3), inset 0px -20px 200px -100px rgba(0,0,0,0.5); 
```

对于现场演示，您可以[在此处查看](http://codepen.io/imjake9/pen/hbfFq)。将鼠标悬停在框上以获得效果。

有什么办法可以解决渲染中的这种巨大差异吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-13T13:18:28.557

您可以为 Firefox 创建一个媒体选择器，它将使用不同的样式。你将不得不玩弄它。例如，我减少了模糊、散布并提高了最后一个插入框阴影的不透明度。所以**.box:hover**的 CSS应该看起来像这样：

```
.box:hover {
  box-shadow(0px 1px 3px rgba(0,0,0,0.3), inset 0px 4px 2px -2px rgba(255,255,255,0.7), inset 0px -3px 1px -2px rgba(0,0,0,0.3), inset 0px -20px 200px -100px rgba(0,0,0,0.5));
}

@-moz-document url-prefix() {
.box:hover {
  box-shadow(0px 1px 3px rgba(0,0,0,0.3), inset 0px 4px 2px -2px rgba(255,255,255,0.7), inset 0px -3px 1px -2px rgba(0,0,0,0.3), inset 0px -20px 130px -120px rgba(0,0,0,0.9));
}
} 
```

有关更多媒体选择器和其他浏览器技巧，您可以访问[BrowserHacks.com](http://browserhacks.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-08T02:53:48.180

这是 Chrome 中长期存在的错误，已针对 Chrome 73（将于 2019 年 3 月推出）修复。

[https://www.chromestatus.com/feature/6569666117894144](https://www.chromestatus.com/feature/6569666117894144)

> 从历史上看，Blink 的模糊半径解释与 CSS 和 Canvas2D 规范不一致：Blink 阴影覆盖了大约一半的预期区域（参见链接的错误）。随着这一变化，高斯模糊 sigma 现在按照规范要求计算为 1/2 模糊半径。Blink 的影子实现现在可以匹配 FireFox 和 Safari。

注意：这个错误比从 WebKit 分叉 Blink 更早。Safari 曾经有一个不同的图形引擎。

[https://bugs.chromium.org/p/chromium/issues/detail?id=179006](https://bugs.chromium.org/p/chromium/issues/detail?id=179006)

> 因此，通过这种变化保持外观的确切公式是
> R' = 2 * (0.288675 * R + 0.5)

```
R' (new)     R (previously)
Chrome 73+   Chrome 72 and below
1.5px        1px
2px          2px
3px          3px
3px          4px
4px          5px
4.5px        6px

R' ≈ 0.7 * R       for R = 7px ... 12px
R' ≈ 0.6 * R       for R = 22px ... ∞ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-21T19:09:41.357

那是因为 Chrome 和 Firefox 使用不同的 html 渲染器。我认为这种剧烈的差异是由拉加颜色引起的，请尝试淡化阴影。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-11T08:02:47.753

可能重置css会有所帮助：

[http://codepen.io/anon/pen/IteyC](http://codepen.io/anon/pen/IteyC)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-19T07:27:10.813

您正在使用多个框阴影，因此请尝试执行此操作（也从框阴影中删除 alpha 我在下面为您完成了此操作）

```
box-shadow: 0px 1px 3px rgba(0,0,0), 
            inset 0px 4px 2px -2px rgba(255,255,255), 
            inset 0px -3px 1px -2px rgba(0,0,0), 
            inset 0px -20px 200px -100px rgba(0,0,0);

-moz-box-shadow: 0px 1px 3px rgba(0,0,0), 
                 inset 0px 4px 2px -2px rgba(255,255,255), 
                 inset 0px -3px 1px -2px rgba(0,0,0), 
                 inset 0px -20px 200px -100px rgba(0,0,0);

-ms-box-shadow: 0px 1px 3px rgba(0,0,0), 
                inset 0px 4px 2px -2px rgba(255,255,255), 
                inset 0px -3px 1px -2px rgba(0,0,0), 
                inset 0px -20px 200px -100px rgba(0,0,0);

-webki-box-shadow: 0px 1px 3px rgba(0,0,0), 
                   inset 0px 4px 2px -2px rgba(255,255,255), 
                   inset 0px -3px 1px -2px rgba(0,0,0), 
                   inset 0px -20px 200px -100px rgba(0,0,0); 
```

如果仍然有问题，你有任何小提琴或链接，所以我可以正确检查

# objective-c - 从子类访问 Objective-C 中的类别方法

> ID：13000460
> 
> 赞同：0
> 
> 时间：2012-10-21T17:46:25.493
> 
> 标签：objective-c, subclass, categories, superclass

我正在创建一个框架，我想将私有方法添加到类别内的超类中，这样它们就不会被公开。

例如，假设我有一个**公共**类定义为：

```
@interface Animal : NSObject

- (void)makeNoise;

@end 
```

还有一个**公共**子类，例如：

```
@interface Dog : Animal

- (void)makeNoise;

@end 
```

现在我想添加与所有对象相关的**私有**方法，`Animal`因此我创建了一个类别，例如：

```
@interface Animal(PrivateMethods) 

- (void)privateSing;

@end 
```

问题来了。是不是不能从子类访问超类`PrivateMethods`类别？

如果我运行以下代码，则会出现`unrecognized selector sent to instace`错误：

```
#import "Animal+PrivateMethods.h"
@implementation Dog

- (void)description {
    // unrecognized selector sent to instace
    [self privateSing];
}

@end 
```

# gemstone - GemStone 未启动，显示“没有剩余空间”

> ID：13000464
> 
> 赞同：0
> 
> 时间：2012-10-21T17:47:09.613
> 
> 标签：gemstone, maglev

我正在尝试为 MagLev 启动 GemStone。这是我在日志中得到的错误：

> GemStone 无法创建缓存所需的信号量数组。
> 
> 原因：GemStone 无法检索与信号量键 -704540831 关联的 IPC 标识符。semget() error = errno=28,ENOSPC, 设备上没有剩余空间（或者，在 fcntl() 中，没有更多的记录锁）。

完整的日志在[gist](https://gist.github.com/3927739)中可用。

真的没有空间吗？我有 7 GB 可用空间。我的情况还有其他问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:20:03.410

我从 git master 获取了 Maglev 并运行了更新脚本。现在它工作正常。

我不知道问题背后的确切原因，但可能是以下原因之一：

*   我使用过 ruby​​-build 和 rbenv。现在我在 rbenv 之外手动安装。
*   我有错误的内核设置（例如 shmmax）。最近我为 Postgres 调整了这些。
*   这是 Maglev 本身的一个问题，它已在较新的版本中得到修复。

# android - supports-screens and image still the same

> ID：13000472
> 
> 赞同：0
> 
> 时间：2012-10-21T17:48:02.397
> 
> 标签：android, android-manifest

I'm using android 2.3.3\.
I've created two devices: normal screen `HVGA` and large screen with `WVGA854`.
I've added images to `drawable-mdpi` with size 58x58px and another images to `drawable-hdpi` with size 144x144px.
I've also added some text to `AndroidManifest.xml`:

```
<supports-screens
    android:largeScreens="true"
    android:normalScreens="true"
    android:resizeable="true"
    android:smallScreens="false"
    android:xlargeScreens="false" 
    android:anyDensity="true">
</supports-screens> 
```

I assume, two of them (devices) will show me two different sizes of images. But somehow both show the same images from `mdpi`.
I know it because images in hdpi should be rotated clockwise.

I've read this links but I'm still confused. Help.

**Links:** [Tutorial: Multiple Screen Support](http://web.archive.org/web/20100916182949/http://wonton-games.blogspot.com/2010/07/tutorial-multiple-screen-support.html)
[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)

Am I right if I say that this app will be available only for normal and larger sreen devices?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:25:31.493

You must use the "Abstracted LCD Density" Hardware property in the emulator settings. It goes from 120dpi (ldpi) to 312dpi (xhdpi).

# c# - 如何在 C# 中使用 ZedGraph 制作动态曲线？

> ID：13000490
> 
> 赞同：0
> 
> 时间：2012-10-21T17:50:26.213
> 
> 标签：c#, dynamic, zedgraph, curve

我需要在[ZedGraph](http://sourceforge.net/projects/zedgraph/)中创建一个动态图，其中新曲线上的每个点都是前一条曲线上点的函数。给出整体效果，整个曲线在轴上移动/演变。

我有一个循环，在其中我使用我的函数根据电流计算下一条曲线，并将它们存储在二维数组中。因此，对于每个时间步，我的数组中都按顺序排列了所有 Y 轴值。

我不确定如何进行实际绘图，我是否需要`pairpointlist`为每条曲线/时间步声明一个新的？

我是[ZedGraph](http://sourceforge.net/projects/zedgraph/)的新手，我无法在互联网上找到任何类似的问题。我有点卡住了。

任何帮助表示赞赏，干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T16:52:33.540

Zedgraph 有一个用于动态或实时数据绘图的内置选项[RollingPointPairList](http://goorman.free.fr/ZedGraph/zedgraph.org/wiki/index3061.html?title=Display_Dynamic_or_Real-Time_Data)

您只需在计时器滴答事件中更改列表数据，还可以控制滚动数据的速度。

# numpy - 获取NumPy中差异最小的数组元素的位置

> ID：13000492
> 
> 赞同：1
> 
> 时间：2012-10-21T17:50:52.820
> 
> 标签：numpy

我试图实现一个逻辑，我试图从数组的每个其他元素中减去数组的每个元素，然后找到结果的最小差异。

例如：a=[10,7,3,6]

所以我从数组的每个其他元素中减去 10 开始（结果将是 3,7,4）然后移动到下一个元素 7 然后从数组的其余元素中减去它（结果将为 4,1)，取下一个元素，即 3，然后用剩余的元素 6 减去它（结果：-3）。注意：我需要为我的实际问题获取结果的绝对值。现在你可以看到，这个减法过程的结果的最小差异是 1。

到目前为止，我已经设法编写了一个代码。但是，我还需要找到最小差异结果值为 1 的数字索引（即本例中的索引 7 和 6）

如果有任何函数可以在 NumPy 中实现这一点，有人会怎么做？我尝试使用 argwhere() 没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T22:26:52.467

You might want to consider a different algorithm for finding the closest pair. Your current algorithm compares every pair of values, when you really only need to compare each value to the next biggest value. You can do that by doing something like: 1) sort your array `a` 2) Compare neighbors in `a` to find the smallest difference. This might help you get started.

```
import numpy as np
a = np.array([10, 7, 3, 6])

index = np.argsort(a)
a_sorted = a[index]
diff = a_sorted[1:] - a_sorted[:-1] 
```

Also to find where a == 6 you can do this (but you probably shouldn't need this):

```
where_a_is_6 = np.where(a == 6)[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:32:48.240

这是一个不使用 NumPy 的有点密集的单行代码：

```
>>> from itertools import combinations
>>> a = [10, 7, 3, 6]
>>> closest_pair = min((abs(x-y), (i, j)) for (i,x), (j, y) in combinations(enumerate(a), 2))[1]
>>> closest_pair
(1, 3) 
```

这是它的工作原理...

`combinations`用于创建所有对：

```
>>> list(combinations(a, 2))
[(10, 7), (10, 3), (10, 6), (7, 3), (7, 6), (3, 6)] 
```

我们需要元素的索引，因此修改为：

```
>>> list(combinations(enumerate(a), 2))
[((0, 10), (1, 7)),
 ((0, 10), (2, 3)),
 ((0, 10), (3, 6)),
 ((1, 7), (2, 3)),
 ((1, 7), (3, 6)),
 ((2, 3), (3, 6))] 
```

列表推导作用于这个结果并形成一个新的绝对差异列表和相应的索引对：

```
>>> [(abs(x - y), (i, j)) for (i,x), (j, y) in combinations(enumerate(a), 2)]
[(3, (0, 1)), (7, (0, 2)), (4, (0, 3)), (4, (1, 2)), (1, (1, 3)), (3, (2, 3))] 
```

取最小值给出元组，其第一个值为最小绝对距离，第二个值为索引的元组：

```
>>> min((abs(x - y), (i, j)) for (i,x), (j, y) in combinations(enumerate(a), 2))
(1, (1, 3)) 
```

最后，只从该结果中提取索引：

```
>>> min((abs(x - y), (i, j)) for (i,x), (j, y) in combinations(enumerate(a), 2))[1]
(1, 3) 
```

# ruby-on-rails - 来自 Wordpress 的 Rails SSO

> ID：13000496
> 
> 赞同：0
> 
> 时间：2012-10-21T17:51:16.520
> 
> 标签：ruby-on-rails, wordpress, single-sign-on

我想将我的 wordpress 中的 SSO 提供给 Rails 应用程序（使用设计）。这个想法是在 wordpress 上添加一个到 rails 应用程序的链接，如果用户已经在 wordpress 上登录，他们将自动登录。实现这一目标的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:49:18.243

由于 1.2 版支持 Omniauth，请[在此处](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)`Devise`查看他们的 Wiki 条目以获取使用 Fb 作为策略提供者的教程。我想 Wordpress 集成应该是相似的，但我没有尝试过集成 Wordpress，并且看到在 Omniauth Wiki 中没有 Wordpress 策略的条目，但可能这个 gem 可以提供帮助。[http://rubygems.org/gems/omniauth-wordpress](http://rubygems.org/gems/omniauth-wordpress)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T14:00:22.540

查看[此 gem](https://github.com/jwickard/omniauth-wordpress-oauth2-plugin)还有一篇关于配置 wordpress 提供程序和 rails 应用程序的文章[http://www.objectpartners.com/2014/02/18/single-sign-on-with-rails-wordpress-and-oauth2/](http://www.objectpartners.com/2014/02/18/single-sign-on-with-rails-wordpress-and-oauth2/)

# c - 如何增加程序的输入大小

> ID：13000501
> 
> 赞同：1
> 
> 时间：2012-10-21T17:51:42.960
> 
> 标签：c

这个程序需要两个输入。第一个数组大小（n）和选择ex：-如果n为100，则我的程序生成100个随机数并使用合并排序和快速排序对它们进行排序。

现在，如果您输入choice==2，则显示两种排序算法所花费的时间

我的程序可以工作到输入大小 10^8，但我希望它可以工作到 10"10。如果我输入输入大小 10^9，它会给出分段错误。分配大量内存时存在问题。如果输入大小，malloc 返回 null超过 10^9

谁能告诉我如何提高程序的输入大小............

```
#include<stdio.h>
#include<stdlib.h>
#include<time.h>

long long merge(int *A,long long i,long long mid,long long j)                   

{   

int *C;
C=(int *)malloc(sizeof(int)*(j-i+1));                           
long long  r,start,k;
r=0;
start=i;
k=mid+1;
while((i<=mid)&&(k<=j))
{
    if(A[i]>A[k])
    {
        C[r]=A[k];
        r++;k++;
    }
    else
    {
        C[r]=A[i];
        r++;i++;
    }
}
while(i<=mid)
{
    C[r]=A[i];
    r++;i++;
}
while(k<=j)
{
    C[r]=A[k];
    r++;k++;
}
for(i=0;i<r;i++,start++)
    A[start]=C[i];
free(C);
  }
   long long partition(int *A,long long i,long long j)                           
   {

long long mid;
mid=(i+j)/2;                                    
if(i<j)
{
    partition(A,i,mid);                         
    partition(A,mid+1,j);
    merge(A,i,mid,j);                       
}
    }

    long long find_position(int A[],long long i,long long j)                        

    {

long long pivot,temp,end;
end=j;
pivot=i;
while(i<j)
{
    while(A[i]<=A[pivot]&&i<end)
        i++;
    while(A[j]>A[pivot])
        j--;
    if(i<j)
    {
        temp=A[i];
        A[i]=A[j];
        A[j]=temp;
    }
}
temp=A[pivot];
A[pivot]=A[j];
A[j]=temp;
return j;
  } 
  long long quicksort(int A[],long long  i,long long  j)                                
  {
long long position;
if(j>i)
{
    position = find_position(A,i,j);
    quicksort(A,i,position-1);
    quicksort(A,position+1,j);
  }
    }
   int main()
  {
clock_t start,end,quick_sort,merge_sort;
long long input_size,i;
int choice,x;
srand(time(NULL));
printf("Enter input Size\n");
scanf("%lld",&input_size);
int *A,*B;
printf("input your choice\n");
scanf("%d",&choice);
A=(int *)malloc(input_size*sizeof(int));
B=(int *)malloc(input_size*sizeof(int));
if(A==NULL||B==NULL)
{
    printf("sorry that much memory can't be allocated\n");
    return 0;
}
for(i=0;i<input_size;i++)
{
    x=rand();
    A[i]=x;
    B[i]=x;
}
if(choice==1)
{
    printf("Array entered by user\n");
    for(i=0;i<input_size;i++)
        printf("%d  ",A[i]);
}
start=clock();
partition(A,0,input_size-1);
end=clock();
merge_sort=end-start;
if(choice==2)
    printf("\n time taked by merge sort is %6.6f",((double)(merge_sort)/CLOCKS_PER_SEC));
if(choice==1)
{
    printf("\nmerge sorted array\n");
    for(i=0;i<input_size;i++)
        printf("%d  ",A[i]);
}
start=clock();
quicksort(B,0,input_size-1);
end=clock();
quick_sort=end-start;
if(choice==2)
    printf("\n time taked by quick sort is %6.6f",((double)(quick_sort)/CLOCKS_PER_SEC));
if(choice==1)
{
    printf("\nquick sorted array\n");
    for(i=0;i<input_size;i++)
        printf("%d  ",B[i]);
}
printf("\n");
return 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:00:49.177

malloc 的最大可分配大小为 2GB（需要 size_t）。因此你的程序崩溃了。我假设您使用的是 32 位机器。

请参阅下面的链接以了解更多信息并测试您是否可以实际分配那么多内存。

[malloc 在 C 中可以有多大](https://stackoverflow.com/questions/3463207/how-big-can-a-malloc-be-in-c)

为了解决这个问题，您需要使用二进制文件编写自己的虚拟内存管理器和内存分配器，并编写自己的`free()`例程`malloc()`。

请参阅此处的示例（这仅适用于 iPhone）：[创建您自己的 VMM](http://insanelyi.com/topic/10039-how-to-create-your-own-virtual-memory-on-any-iphone-ipod-touch-over-80-mb-of-ram/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:13:03.010

您需要考虑到地址范围可以是 32 位或 64 位，其中一些是堆栈、其他变量、内务管理等所必需的。此外，许多（全部？）操作系统具有软限制和硬限制以防止进程浸泡占用所有物理和交换内存。

无论如何，你为什么要这样做？

# iphone - Facebook apprequests 通知不会显示在 Facebook iPhone 应用程序中

> ID：13000504
> 
> 赞同：1
> 
> 时间：2012-10-21T17:52:01.280
> 
> 标签：iphone, objective-c, ios, facebook, facebook-graph-api

我正在使用 Facebook SDK 从我的应用程序发送应用程序请求：

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"Check out this awesome app.",  @"message",
                               userId, @"to",
                               nil];

[self.facebook dialog:@"apprequests" andParams:params andDelegate:self]; 
```

当接收用户在浏览器上的 Facebook 页面上时，这很有效。问题是用户在 Facebook iPhone 应用程序中没有收到通知。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:18:59.340

检查您的 Facebook 应用仪表板设置，原生 iOS 应用部分：

*   Facebook 登录：应启用
*   Bundle ID：应该与您的 iOS 应用程序中的 ID 匹配
*   iPhone App Store ID：如果您在 iTunes 上没有 iPhone 应用程序，则可以为 0
*   iPad App Store ID：如果您在 iTunes 上没有 iPad 应用程序，则可以为 0

# r - 即时构建转换语句

> ID：13000506
> 
> 赞同：3
> 
> 时间：2012-10-21T17:52:13.493
> 
> 标签：r

我有一个包含多个（数字）列的数据框，并且想要创建一个新的数据框，其列是原始数据的行列。

```
> df <- data.frame(cbind(id=LETTERS[1:10],  
wheat=c(123,234,345,456,678,987,876,654,432,321),barley=c(135,975,246,864,357,753,468,642,579,531)))
> df
   id wheat barley
1   A   123    135
2   B   234    975
3   C   345    246
4   D   456    864
5   E   678    357
6   F   987    753
7   G   876    468
8   H   654    642
9   I   432    579
10  J   321    531
> rankeddf <- transform(df, wheat=rank(wheat), barley=rank(barley))
> rankeddf
   id wheat barley
1   A     1      1
2   B     2     10
3   C     4      2
4   D     6      9
5   E     8      3
6   F    10      8
7   G     9      4
8   H     7      7
9   I     5      6
10  J     3      5 
```

问题是，列的数量和名称各不相同。我有一个指定它们的向量：

```
cols <- c("wheat", "barley") 
```

如何`transform`即时构建语句？或者甚至循环遍历`cols`向量，`transform`在每次迭代中应用一次语句？我猜答案将与`eval`or有关`evalq`，但我还没有完全理解它们。例如，

```
> rankeddf2 <- df
> for (col in cols) {rankeddf2 <- transform(rankeddf2, evalq(paste(col,"=rank(",col,")",sep="")))}
> rankeddf2
   id wheat barley
1   A   123    135
2   B   234    975
3   C   345    246
4   D   456    864
5   E   678    357
6   F   987    753
7   G   876    468
8   H   654    642
9   I   432    579
10  J   321    531 
```

不成功。

或者，还有另一种方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T17:57:47.093

您可以使用`lapply`and来做到这一点`rank()`：

```
as.data.frame(lapply(df[, cols], rank))
   wheat barley
1      1      1
2      2     10
3      4      2
4      6      9
5      8      3
6     10      8
7      9      4
8      7      7
9      5      6
10     3      5 
```

* * *

好的，所以在这个过程中你丢失了第一列，但这很容易加回来：

```
data.frame(id=df[[1]], lapply(df[, cols], rank))
   id wheat barley
1   A     1      1
2   B     2     10
3   C     4      2
4   D     6      9
5   E     8      3
6   F    10      8
7   G     9      4
8   H     7      7
9   I     5      6
10  J     3      5 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T18:50:28.630

我喜欢`transform()`将相关的`with()`和`within()`作为语法糖，它们在顶级交互中很有用，但通常通过子集和替换`'['()`，`'[<-'()`等更容易用于这样的工作：

```
> df2 <- df ## copy
> df2[, cols] <- apply(df[, cols], 2, rank)
> df2
   id wheat barley
1   A     1      1
2   B     2     10
3   C     4      2
4   D     6      9
5   E     8      3
6   F    10      8
7   G     9      4
8   H     7      7
9   I     5      6
10  J     3      5 
```

`'['()`并且`'[<-'()`已经做了你想做的事情，所以你试图强制`transform()`做一些已经通过子集和替换功能更容易实现的事情。

# c# - 为什么 System.Diagnostics.Debug.WriteLine 在 Visual Studio 2010 C# 中不起作用？

> ID：13000507
> 
> 赞同：35
> 
> 时间：2012-10-21T17:52:19.627
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, visual-studio, debugging

我的代码中有以下行：

```
System.Diagnostics.Debug.WriteLine("Title:" + title + "title[top]: " + title[top] + "title[sub]: " + title[sub]); 
```

当我调试时，我看到它转到这一行，但是当我查看 Visual Studio 2010 中的输出窗口时，即使它显示为“调试”并且我使用“调试 > 运行”运行，我也看不到任何东西。为什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-21T18:04:15.220

检查以下项目 -

1.  `DEBUG`调试时选择模式
2.  `Debug`在输出窗口中选择了选项 - ![在此处输入图像描述](../Images/d0e6b5157aaaa60927c92df975c6f27a.png)
3.  查看断点是否命中代码中的 Debug.WriteLine
4.  `Debug.AutoFlush = true`在代码开头插入
5.  尝试检查解决方案的平台是否设置为任何 CPU 而不是 x86（或 x64）。
6.  转到项目属性 - > Web - 在调试器部分，检查 ASP.NET 选项

[第 5 点](https://stackoverflow.com/a/6285021/158207)的参考（阅读评论，它对那个人有用）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-11-26T17:01:05.293

对我来说，这解决了问题：

```
System.Diagnostics.Trace.WriteLine("whatever"); 
```

（使用`Trace`代替`Debug`）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-21T18:05:46.173

在您的 app.config 文件中，确保您的跟踪侦听器中没有`<clear/>`元素。

您将有效地清除跟踪侦听器列表，包括用于 Debug 语句的默认跟踪侦听器。

这是您的 app.config 文件中的内容：

```
<system.diagnostics>
    <trace>
      <listeners>
          <!-- This next line is the troublemaker. If it is there delete it-->
          <clear/>
      </listeners>
    </trace>
  </system.diagnostics> 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-10-11T20:26:11.163

对我来说，我需要这样做来解决问题：

```
1\. Open the project's property page
2\. Under Build tab, check "Define DEBUG constant" and "Define Trace constant" 
```

瞧！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-04-12T21:07:59.100

我有同样的问题。使用 Trace.WriteLine 并检查“定义调试常量”对我不起作用。

我注意到输出消息是在立即窗口中找到的，而不是在输出窗口中。

然后我取消选中工具中的“将所有输出窗口文本重定向到立即窗口”选项并解决了我的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-06T14:09:59.260

使用“System.Diagnostics.Debug.WriteLine”我在即时窗口中输出：-O

# asp.net-mvc - 即使请求是发布请求，为什么在 ASP.NET MVC 中调用没有属性的函数？

> ID：13000510
> 
> 赞同：0
> 
> 时间：2012-10-21T17:52:40.947
> 
> 标签：asp.net-mvc

我正在关注本教程：

[http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/examineing-the-edit-methods-and-edit-view](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/examining-the-edit-methods-and-edit-view)

它描述了当用户单击按钮然后调用没有属性的函数时的情况。

但是当添加一个带有 HttpPost 属性的函数时，调用的是这个函数而不是没有该属性的函数。

该按钮启动 Html.BeginForm() 创建一个发布请求。那么为什么没有该属性的函数会被调用呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:34:37.000

提交按钮将**始终**发起`HttpPost`请求。

另一方面，一个超链接（`a`标签），指向一个动作**总是**一个`HttpGet`.

**编辑：我意识到您的困惑，请参见下文以演示@RickAndMSFT 想说的内容：**

鉴于我们有以下操作方法：

```
[HttpGet]
public ActionResult SearchIndex()
{
} 
```

**此操作将仅接受`HttpGet`请求**

**注意：**如果我们去掉该`HttpGet`属性，它将接受**ALL Request Types**。

因此，如果您有：

```
public ActionResult SearchIndex()
{
} 
```

**不需要 post 方法，因为上面的方法已经接受了 post 请求。**之所以如此，是因为相关页面实际上并没有修改/保存/创建任何内容，它只是列出数据。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T06:44:53.810

感谢您阅读我的教程。您可能想阅读[MVC 4 版本](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/intro-to-aspnet-mvc-4)。正如@mattytommo 所写，提交会导致POST。在本教程的后面部分，您将使用 BeginForm 重载路由以提交到 GET 方法。ASP.NET MVC 模式使用与 POST 或 GET 相同的方法名称。获取请求转到 HTTPGET 方法（默认，不需要 [HttpGet] 属性）并提交转到 [HttpPost] 方法。查看所有的编辑/创建方法——通常是相同的方法名称。由于不能在属性上重载 C#，所以当参数相同时，我们使用另一个属性来更改方法名称（见教程末尾）。

# android - 没有通过foursquare herenow api调用获取人员的详细信息

> ID：13000514
> 
> 赞同：0
> 
> 时间：2012-10-21T17:53:17.053
> 
> 标签：android, geolocation, foursquare

在进行foursquare herenow API 调用之前，我首先检查了那个地点，我什至传递了纬度/语言参数，但由于某种原因，我只得到了ppl 的计数，而不是他们的详细信息。

问题的可能原因是什么？我正在印度尝试这个......这个问题可能是特定于国家的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:36:28.847

您的入住可能已被标记为非法入住。这可能是由于在短时间内进行了多次签入导致的，这在开发中测试签入时很常见。尝试等待几分钟，然后再次签入。

# java - java execturorService - 提交任务并捕获异常

> ID：13000518
> 
> 赞同：1
> 
> 时间：2012-10-21T17:54:03.090
> 
> 标签：java, runnable, executorservice, callable

我正在尝试向 Java 中的 ExecutorService 提交任务。它要么接受允许抛出异常的 Callable，要么接受 Runnable。我的用例很愚蠢：我想安排一个抛出异常的任务，但它是一个无效方法。结果，我不能使用 Callable 或 Runnable，因为方法定义与我的用例不匹配。我还想让我的异常从提交后收到的 Future 传播。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T17:58:25.190

您可以使用`Callable<Void>`. 显然你不能实例化一个 Void 对象，而只是 return `null`。

从`Future<Void>`，您仍然可以调用`get`，丢弃`null`返回值。它会将任何异常重新抛出为`ExecutionException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T18:13:44.573

您可以使用`Callable<Void>`（或实际上任何其他类参数）并始终 return `null`，在这种情况下`Future.get`将*包装并重新抛出*任务抛出的任何异常，或者使用`Callable<Throwable>`并让您的任务主体成为

```
try {
  // do stuff
} catch(Throwable t) {
  return t;
}
return null; 
```

在这种情况下`Future.get`将*返回*异常。在这两种情况下，一个成功的任务都会`null`从它的`Future.get`.

# javascript - 未收到推送消息

> ID：13000521
> 
> 赞同：4
> 
> 时间：2012-10-21T17:54:05.943
> 
> 标签：javascript, ruby-on-rails-3, pusher

我遵循了一些关于使用 Pusher 向我的 Rails 应用程序发送实时消息的教程（看起来都非常相似）。

我正在尝试什么：

```
// Javascript on my clientside receiving html page
$(function(){
  var pusher = new Pusher('xxxx-mykey-xxxx');
  var myChannel = pusher.subscribe('survey-channel');

  myChannel.bind('data-changed', function(data){ 
           alert(data);
      });
  // Some useful debug msgs
  pusher.connection.bind('connecting', function() {
      alert('Connecting to Pusher...');
    });
    pusher.connection.bind('connected', function() {
      alert('Connected to Pusher!');
    });
    pusher.connection.bind('failed', function() {
      alert('Connection to Pusher failed :(');
    });
    myChannel.bind('subscription_error', function(status) {
      alert('Pusher subscription_error');
    });
}); 
```

我在我的 Rails 应用程序的控制器方法中调用它：

```
Pusher['survey-channel'].trigger('data-changed', "Busy creating new Call") 
render :text => "Pusher sent" 
```

调用该方法时什么都不会发生，只是它呈现“Pusher sent”。

在我的 chrome 开发人员工具的控制台中，我得到以下信息：

```
(x) Uncaught TypeError: Cannot call method 'bind' of undefined calls:31
(3) WebSocket is closed before the connection is established. :3000:1 
```

我会错过什么？请帮忙！

* * *

## 编辑#1

我将这段代码添加到客户端：

```
Pusher.log = function(message) {
  if (window.console && window.console.log) window.console.log(message);
}; 
```

并将以下内容记录到控制台：

```
Pusher : Connecting : ws://ws.pusherapp.com:80/app/e5d0f1ae2cab03dc3aa9?client=js&version=1.8.6 calls:44    
Pusher : Event recd (event,data) : pusher:connection_established : {"socket_id":"14299.674628"} calls:44    
Pusher : Event sent (channel,event,data) :  : pusher:subscribe : {"channel":"survey-channel"} calls:44 
```

* * *

## 编辑#2

每当我发送“消息”时，即使我使用*Event Creator*发送它，它也不会出现在 Pusher *Debug Console*中。但真正奇怪的是，在*Stats*页面上，它指示*Message Rate*和*Connections*大于零，例如 2 个连接等。

 **** * *

## 编辑#3

我已经测试了 Pusher 的测试页面。(http://test.pusher.com/1.12) 连接完美，但“打个招呼”功能无济于事。这让我想到这可能是我的浏览器设置。

我目前在 Win7 PC 上运行最新版本的 Chrome。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T05:08:47.423

确定问题所在的步骤：

## 宝石测井

[当您启用日志记录](https://github.com/pusher/pusher-gem#logging)时，gem 会提供哪些信息？可能是您的凭据不正确。

*虽然没有强制执行，但建议您将 JSON 发送到 Pusher。因此，如果您`trigger`按如下方式更新调用，gem 会将对象转换为 JSON：*

```
Pusher['survey-channel'].trigger('data-changed', { :text => "Busy creating new Call" } ) 
```

## 从 JavaScript 客户端（浏览器）连接到 Pusher

[Pusher 连接常见问题解答](http://pusher.tenderapp.com/kb/troubleshooting/i-cannot-connect-to-pusher)提供有关连接到 Pusher 时可能遇到的问题和常见解决方案的信息。

## Pusher 调试控制台

[Pusher 调试控制台](http://pusher.com/docs/debugging#pusher_debug_console)为您提供有关在 Pusher 中的应用程序中发生的情况的信息。在这种情况下，它会通知您消息是否到达 Pusher。您可以通过查看您的应用程序来做到这一点。

如果它到达 Pusher，那么下一步就是了解为什么事件没有到达您的客户。

*我在代码上看不到任何其他错误，但调试控制台可能会提供更多信息，我将能够从那里更新我的答案。*

## 关于您的问题的一些附加信息：

看起来您正在尝试在此处绑定到 Pusher 事件：

```
myChannel.bind('subscription_error', function(status) {
  alert('Pusher subscription_error');
}); 
```

但这不会做任何事情有几个原因：

1.  该频道是公共频道，因此不会发生订阅错误
2.  事件名称不正确。如果它是私有或在线通道并且它使用[用户身份验证](http://pusher.com/docs/authenticating_users)机制，那么您可以绑定到 http://pusher.com/docs/client_api_guide/client_events#subscription_error 事件 - 请注意*pusher:*前缀。

> (x) 未捕获的类型错误：无法调用未定义调用的方法“绑定”：31

此错误意味着您正在调用`bind`的变量是`undefined`. 这是一般的脚本错误。

> (3) WebSocket 在连接建立之前关闭。:3000:1

这意味着连接出现问题。Pusher JavaScript 库将处理此问题并尝试为您重新连接。不幸的是，并不总是可以捕捉到这样的错误，Chrome 会将它们记录到 JavaScript 控制台。这给人的印象是某些东西已经永久损坏，而实际上并非如此。

> 我已经测试了 Pusher 的测试页面。(http://test.pusher.com/1.12) 连接完美，但“打个招呼”功能无济于事。这让我想到这可能是我的浏览器设置。
> 
> 我目前在 Win7 PC 上运行最新版本的 Chrome。

如果您尝试[http://test.pusher.com/1.12?ssl=true](http://test.pusher.com/1.12?ssl=true)您可能会收到“你好”消息。您很可能安装了干扰 WebSocket 连接的防病毒软件。通过 SSL (WSS) 连接意味着防病毒软件无法篡改连接数据。***

# android - Android 在 rtsp 请求中发送什么 User-Agent 字符串？

> ID：13000524
> 
> 赞同：0
> 
> 时间：2012-10-21T17:54:12.887
> 
> 标签：android, rtsp

User-Agent 字符串是否在不同设备上有所不同，还是在所有地方都相同？ClientID、CompanyID 等字符串是否相同？

这是我通过 http 从模拟器获得的信息：

```
User-Agent: stagefright/1.2 (Linux;Android 4.1.1) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-21T18:43:30.107

这个网站似乎有很好的报道：

[http://www.gtrifonov.com/2011/04/15/google-android-user-agent-strings-2/](http://www.gtrifonov.com/2011/04/15/google-android-user-agent-strings-2/)

# java - 测量 Java 的执行时间不起作用

> ID：13000527
> 
> 赞同：0
> 
> 时间：2012-10-21T17:54:33.537
> 
> 标签：java

我正在寻找测量java中具体方法的执行时间。更准确地说，我实现了 System.nanoTime() 方法而不是 System.currentTimeMillis()：

```
long startTime = System.nanoTime(); 
ServerRequestState state = (ServerRequestState) search.getGoalState();
long endTime = System.nanoTime();               
long elapsedTime = (endTime - startTime) / 1000000; // time in ms 
```

但这对我不起作用，方法在 30 到 40 秒后运行，但变量 elapsedTime 的结果显示只有 4 毫秒，在某些情况下为 1 毫秒。

任何想法为什么这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T17:56:42.813

1 毫秒 == 1,000,000 纳秒。

我会推荐使用 Guava 的[秒表](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Stopwatch.html)来做你正在做的事情。

# eclipse - maven 站点插件找不到我的 javadoc

> ID：13000528
> 
> 赞同：1
> 
> 时间：2012-10-21T17:55:04.783
> 
> 标签：eclipse, maven, javadoc

这个错误让我在日食靛蓝中发疯

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-site-plugin:3.0:site (default-site) on project Cdss-camel: Error during page generation: Error rendering Maven report: Unable to find javadoc command: The environment variable JAVA_HOME is not correctly set. -> [Help 1] 
```

我的 JAVA_HOME 设置为 /Library/Java/Home 它应该在的位置（到 java 主目录的符号链接）；我也有一个指向该位置的类路径变量 JAVA_HOME。从 zsh 运行站点插件可以工作，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T08:23:50.280

首先检查您的 JAVA_HOME，这似乎是错误的，此外将 maven-site-plugin 的版本更新为 3.1 而不是 3.0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-02T23:58:54.243

我遇到了同样的问题。并尝试了一切将 JAVA_HOME 添加到 .bash_profile 和 /etc/launchd.conf 我希望这两种方法可以帮助你，但至少它对我没有帮助。

我只是在 pom 中添加一个属性作为

（键：javadocExecutable，值：“${java.home}/../bin/javadoc”）

感谢马尔辛。

[http://mgorski.net/2013/dev/fail-to-execute-javadoc-plugin-on-mac-osx-java_home-issue](http://mgorski.net/2013/dev/fail-to-execute-javadoc-plugin-on-mac-osx-java_home-issue)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-05T14:58:59.880

上面建议的解决方案的问题可以通过确保 Eclipse 项目引用 JDK 而不是 JRE 来解决。然后该属性将能够找到 javadoc 可执行文件。

# ruby-on-rails - Heroku 缺少模板错误 RoR

> ID：13000533
> 
> 赞同：0
> 
> 时间：2012-10-21T17:55:22.503
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

一天多来，我一直试图让这个应用程序正确部署到 Heroku，并解决了一个又一个错误，我被困在这个错误上。

我收到了`We're Sorry something went wrong`500 错误，并且我有以下日志：

```
 2012-10-21T17:40:32+00:00 app[web.1]: [2012-10-21 17:40:32] INFO  WEBrick 1.3.1
 2012-10-21T17:40:32+00:00 app[web.1]: [2012-10-21 17:40:32] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
 2012-10-21T17:40:32+00:00 app[web.1]: [2012-10-21 17:40:32] INFO  WEBrick::HTTPServer#start: pid=2 port=18894
 2012-10-21T17:40:33+00:00 heroku[web.1]: State changed from starting to up
 2012-10-21T17:41:55+00:00 heroku[web.1]: State changed from up to starting
 2012-10-21T17:41:57+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 44537`
 2012-10-21T17:41:58+00:00 heroku[web.1]: Stopping all processes with SIGTERM
 2012-10-21T17:41:58+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server.rb:90:in `select'
 2012-10-21T17:41:58+00:00 app[web.1]: [2012-10-21 17:41:58] ERROR SignalException: SIGTERM
 2012-10-21T17:41:59+00:00 app[web.1]: => Booting WEBrick
 2012-10-21T17:41:59+00:00 app[web.1]: => Rails 3.2.0 application starting in production on http://0.0.0.0:18894
 2012-10-21T17:41:59+00:00 app[web.1]: => Call with -d to detach
 2012-10-21T17:41:59+00:00 app[web.1]: => Ctrl-C to shutdown server
 2012-10-21T17:41:59+00:00 app[web.1]:
 2012-10-21T17:41:59+00:00 app[web.1]:
 2012-10-21T17:41:59+00:00 app[web.1]: Started GET "/" for 86.9.116.69 at 2012-10-21 17:41:59 +0000
 2012-10-21T17:42:00+00:00 app[web.1]:
 2012-10-21T17:42:00+00:00 app[web.1]: ActionView::MissingTemplate (Missing template /404 with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in:
 2012-10-21T17:42:00+00:00 app[web.1]:   * "/app/app/views"
 2012-10-21T17:42:00+00:00 app[web.1]:   * "/app/vendor/bundle/ruby/1.9.1/gems/rails_admin-0.1.2/app/views"
 2012-10-21T17:42:00+00:00 app[web.1]:   * "/app/vendor/bundle/ruby/1.9.1/gems/kaminari-0.14.1/app/views"
 2012-10-21T17:42:00+00:00 app[web.1]:   * "/app/vendor/bundle/ruby/1.9.1/gems/devise-2.1.2/app/views"
 2012-10-21T17:42:00+00:00 app[web.1]: ):
 2012-10-21T17:42:00+00:00 app[web.1]:   app/controllers/application_controller.rb:10:in `render_404'
 2012-10-21T17:42:00+00:00 app[web.1]:
 2012-10-21T17:42:00+00:00 app[web.1]:
 2012-10-21T17:42:00+00:00 app[web.1]: cache: [GET /] miss
 2012-10-21T17:42:00+00:00 heroku[router]: GET secure-ocean-9819.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=340ms status=500 bytes=643 
```

一切都在 Localhost 上完美运行，所以我很困惑为什么它似乎在 Heroku 上苦苦挣扎。

人们可以提供的任何帮助真的将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:30:39.193

您在应用程序控制器中有方法/操作 - render_404，它有处理 404 问题的代码

```
 2012-10-21T17:42:00+00:00 app[web.1]:   app/controllers/application_controller.rb:10:in `render_404' 
```

您可以尝试在生产模式下在本地运行应用程序吗？在生产模式下，应用程序首先加载所有类并抛出异常（如果有）。

如果你只是想运行测试，你可以注释掉那个动作。

# c# - 函数获取旧变量 (HtmlAgilityPack)

> ID：13000534
> 
> 赞同：0
> 
> 时间：2012-10-21T17:55:25.423
> 
> 标签：c#, .net, html, html-agility-pack

好吧，当我尝试使用具有很少功能的 foreach 从 HTML 获取文本时。每次迭代的文本总是相同的，但是当我添加断点并检查应该在 foreach 变量中的文本时，它已经改变了。这是代码：

```
foreach (HtmlNode nodes in listingNode.ChildNodes)
                {
                    i++;
                    int row = dataGridView1.Rows.Add();
                    dataGridView1.Rows[row].Cells[0].Value = i; // ktory z kolei?
                    HtmlAttributeCollection imageNode = nodes.SelectSingleNode("//div[@class='bmlistt']").Attributes; // image
                    string node = imageNode[1].Value; // link for that image
                    // add adding image to row
                    dataGridView1.Rows[row].Cells[1].Value = null; // image
                    //HtmlNode artistspan = artistNode.SelectSingleNode("//span[@class='artist']");
                    dataGridView1.Rows[row].Cells[2].Value = nodes.SelectSingleNode("//div[@class='maintext']").SelectSingleNode("//span[@class='artist']").InnerHtml; //returns always same text
                    dataGridView1.Rows[row].Cells[3].Value = null; // title
                    dataGridView1.Rows[row].Cells[4].Value = null; // difficulties
                    //dataGridView1.Rows[row].Cells[5].Value = null; // Checkbox
                    if (i == 10)
                    {
                        i++; // breakpoint
                    }
} 
```

断点的本地人（10次迭代后）

[https://dl.dropbox.com/u/21125662/compilation/_01055.jpg](https://dl.dropbox.com/u/21125662/compilation/_01055.jpg)

橙色线显示出了什么问题。（查看代码，然后查看屏幕截图）（节点应始终与节点相同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:54:16.637

XPath 一开始可能有点棘手，当您想从子节点中进行选择时，您必须添加一个 '.' （点）或您的 XPath 将始终从顶部节点中选择。

所以...

```
nodes.SelectSingleNode("//div[@class='bmlistt']").Attributes 
```

变成……

```
nodes.SelectSingleNode(".//div[@class='bmlistt']").Attributes 
```

# mysql - 无法在本地开发网站:-(

> ID：13000540
> 
> 赞同：1
> 
> 时间：2012-10-21T17:56:06.793
> 
> 标签：mysql, apache, phpmyadmin, dreamweaver, wampserver

我想开发一个站点以在**具有 MySQL DB 的 Apache 服务器上工作；使用 phpmyadmin**。

我的机器上安装了 IIS7 - 我试图通过 Windows 7 的各种添加/删除程序来删除它（这显然是成功的）；但事实证明：没有骰子。

我已经安装了 WAMP。由于 IIS 占用 80 端口，我已将监听配置更改为端口 8080 的配置。这可行。

但是，由于之前安装了 MySQL，WAMP 上的 phpmyadmin 无法运行；所以我删除了它的安装。

phpmyadmin 随后抛出了一个不同的错误

> 2002 - 由于目标机器主动拒绝，无法建立连接

我非常期待，因为 MySQL 可能已在机器上完全卸载。

我重新安装了 WAMP，希望这能解决问题。不幸的是，情况似乎并非如此。这让我感到惊讶，因为我认为它与 WAMP 捆绑在一起。

MySQL 日志：

```
 121021 18:30:54 [Note] Plugin 'FEDERATED' is disabled.
121021 18:30:54 InnoDB: The InnoDB memory heap is disabled
121021 18:30:54 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121021 18:30:54 InnoDB: Compressed tables use zlib 1.2.3
121021 18:30:54 InnoDB: Initializing buffer pool, size = 128.0M
121021 18:30:54 InnoDB: Completed initialization of buffer pool
121021 18:30:54 InnoDB: highest supported file format is Barracuda.
121021 18:30:54  InnoDB: Waiting for the background threads to start
121021 18:30:55 InnoDB: 1.1.8 started; log sequence number 1595675
121021 18:30:55 [Note] Server hostname (bind-address): '(null)'; port: 3306
121021 18:30:55 [Note]   - '(null)' resolves to '::';
121021 18:30:55 [Note]   - '(null)' resolves to '0.0.0.0';
121021 18:30:55 [Note] Server socket created on IP: '0.0.0.0'.
121021 18:30:56 [Note] Event Scheduler: Loaded 0 events
121021 18:30:56 [Note] wampmysqld: ready for connections.
Version: '5.5.24-log'  socket: ''  port: 3306  MySQL Community Server (GPL) 
```

由于没有本地开发环境，我将准备好使用远程服务器。但是，诸如 Dreamweaver 之类的程序似乎会立即拒绝此选项，因为它们没有被建立为“测试服务器”。When the remote server is selected as a testing server, connections throw a 404 error.

这让我不得不手动编写所有代码，包括数据库操作，并通过 ftp 中继到远程服务器。我将不胜感激任何改进此设置的建议。

PS远程服务器块通过端口3306连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:18:05.727

由于 Wamp 没有预料到的现有信息，MySQL 最初无法与 Wamp 一起使用（它会自动尝试使用一些默认组合登录 phpmyadmin，例如用户名 = root 和密码 = no）。

完全重新安装 MySQL 并忽略 Wamp，似乎可以解决问题。

# jquery - 带有json数组的jqplot折线图-未加载图表

> ID：13000541
> 
> 赞同：0
> 
> 时间：2012-10-21T17:56:07.800
> 
> 标签：jquery, json, spring, jsp, jqplot

我的 Spring Controller 类看起来像这样

```
@SuppressWarnings("rawtypes")
    @RequestMapping(value = "/cityGridView", method = RequestMethod.GET)
    public @ResponseBody
    List showLineChart(Map<String, Object> map,
            HttpServletRequest request, HttpServletResponse response) {
        List<Object> rows = new ArrayList<Object>();
        List<MapTable> list = contactService.fin();
        for (MapTable table : list) {
            List<Object> dataRow = new ArrayList<Object>(1);
            dataRow.add(table.getSRDate());
            dataRow.add(table.getNumberOfSR());
            rows.add(dataRow);
        }
        return rows;
    } 
```

在我的jsp中，我处理这样的响应。（这里似乎有问题？？）

```
<div id="chart1" style="width: 800px;height: 500px" ></div>
    <script type="text/javascript">
    $(document).ready(function(){
          var ajaxDataRenderer = function(url, plot, options) {
            var ret = null;
            $.ajax({
              async: false,
              url: url,
              dataType:"json",
              success: function(data) {
                ret = data;
              }
            });
            return ret;         
          };

    var jsonurl = 'cityGridView.html';

    var today = new Date(); 

    var plot1 = $.jqplot('chart1', jsonurl, {
          title:'Data Point Highlighting',
          dataRenderer: ajaxDataRenderer,
          dataRendererOptions: {
              unusedOptionalUrl: jsonurl
              },
          axes:{
            xaxis:{
                label: "SR_DATES",
                'numberTicks' : 7,
                min: '2012-10-01',
                max: '2012-10-07',
                renderer:$.jqplot.DateAxisRenderer,
                rendererOptions:{tickRenderer:$.jqplot.CanvasAxisTickRenderer},
                tickInterval:'1 day', 
                tickOptions:{
                    formatString:'%Y-%#m-%#d'
                    }
            },
            yaxis:{
                label: "SR COUNT",
                tickOptions:{
                    formatString:'%d'
                    },
                min:10,
                max:30
            }
          },
          highlighter: {
            show: true,
            sizeAdjust: 7.5
          },
          cursor: {
            show: true
          }
      });
    });

    </script> 
```

*   我的 JSON 是这样的

    [["2012-10-01",15.0],["2012-10-02",20.0],["2012-10-03",25.0],["2012-10-04",18.0],[ "2012-10-05",22.0],["2012-10-06",24.0]]

这里显示了我的 MapTable 类

```
public class MapTable {

    private Date SRDate;
    private int numberOfSR;

    public Date getSRDate() {
        return SRDate;
    }

    public void setSRDate(Date sRDate) {
        SRDate = sRDate;
    }

    public int getNumberOfSR() {
        return numberOfSR;
    }

    public void setNumberOfSR(int numberOfSR) {
        this.numberOfSR = numberOfSR;
    }
} 
```

联系服务.fin(); 调用服务类的方法，最后在 DAO 类中调用它。数据也正确地像上面提到的数组一样。这是我的 DAO 类

```
public List<MapTable> fin(){
        @SuppressWarnings("unchecked")
        List<MapTable> dashboardBeanList = jdbcTemplate
                    .query("select trunc(ASSIGNED_datetime) as SR_DATE, count(*) as COUNT " +
                            "from sbl_service_request_v " +
                            "where SR_TYPE ='Complaint' " +
                            "and DATE_COMMITED  is not null " +
                            "and ASSIGNED_DIVISION  in ('CSO','IT_IVR') " +
                            "and trunc(ASSIGNED_datetime) >= sysdate -30 " +
                            "group by  trunc(ASSIGNED_datetime) " +
                            "order by trunc(ASSIGNED_datetime)",
                                            new Object[] {},
                                new RowMapper() {
                                      public MapTable mapRow(ResultSet rs, int rowNum)
                                                  throws SQLException {
                                          MapTable dashboardBean=new MapTable();
                                          dashboardBean.setSRDate(rs.getDate("SR_DATE"));
                                          dashboardBean.setNumberOfSR(rs.getInt("COUNT"));
                                          return dashboardBean;
                                      }
                                });
        return dashboardBeanList;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T23:59:44.687

您的预期与实际 JSON 数据在几个方面有所不同，并且您没有说明哪些差异很重要。但我将`"rows":`首先解决这个问题，因为它代表 JSON 结构差异（而不是数据值差异）。

您的实际 JSON 输出包含该`"rows":`属性，因为您`Grid`从控制器返回了一个对象 - 该对象有一个名为`rows`填充列表列表的字段。如果您只是希望您的 JSON 包含列表列表，请从您的控制器返回它：`return rows`。

你的日期格式也不同，所以我会先看看你的 getter 方法`MapTable .getSRDate()`——你的问题中没有足够的信息/代码来直接解决这个问题。

# android - 如何使用 facebook api 获取签入给定场所的人员列表

> ID：13000543
> 
> 赞同：-1
> 
> 时间：2012-10-21T17:56:23.497
> 
> 标签：android, facebook, geolocation

是否可以使用 facebook 获取到给定地点的人员列表？（类似于我如何使用 Foursquare“herenow”api 调用。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:34:28.633

这个 Graph API 调用在 Facebook 总部获得（朋友的）签到：

```
https://graph.facebook.com/166793820034304/checkins?fields=from 
```

使用 Graph Explorer (https://developers.facebook.com/tools/explorer) 进行尝试。

（当然，如果您还不知道，请使用搜索 API 来获取该地点的 ID）

# ruby-on-rails - Ruby 中的这个递归循环有什么问题？

> ID：13000549
> 
> 赞同：0
> 
> 时间：2012-10-21T17:56:56.710
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, recursion

好的，所以我有这个循环

```
def page_children(page)
  content_tag :li do
    link_to page.url, "/#{page.url_path}/#{page.url}"
    if page.children.any?
      content_tag :ul do
        page_children(page)
      end
    end
  end
end 
```

我不断得到`stack level too deep`

我将这个[gem](https://github.com/mceachen/closure_tree)用于我的树结构，我的模型和 haml 如下

```
class Page < ActiveRecord::Base  
  acts_as_tree :order => 'sort_order'
  belongs_to :parent, :class_name => "Page" 
  scope :parent_nav, lambda{ |navigation| where(:parent_id => nil, :is_home => 0, :nav => navigation).order("sort_order") }
end 
```

我的haml如下

```
%ul
 - Page.parent_nav("Attend").each do |page|
 = page_children(page) 
```

基本上我想要每个页面都有一个 li，如果页面有孩子，那么我想要另一个 ul，所有孩子都有一个 li ......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T18:03:30.017

`page_children`当你递归调用它时，你并没有改变你给出的参数。可能类似于以下内容（未经测试）：

```
def page_children(page)
  content_tag :li do
    link_to page.url, "/#{page.url_path}/#{page.url}"
    page.children.each do |child|
      content_tag :ul do
        page_children(child)
      end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:39:10.697

我会写（未经测试）：

```
def render_pages(pages)
  return "" if pages.empty?
  content_tag(:ul) do
    pages.map do |page| 
      content_tag(:li) do
        link = link_to(page.url, helper_to_generate_the_page_path(page))
        link + render_pages(page.children)
      end
    end.join.html_safe
  end
end

= render_pages(Page.parent_nav("Attend")) 
```

# javascript - 在该类的另一个方法中执行函数类的方法

> ID：13000556
> 
> 赞同：1
> 
> 时间：2012-10-21T17:57:40.377
> 
> 标签：javascript, prototype

我有这两种方法：

```
Cluster.prototype.initiate_xhr_request = function(url, callback) {
    var self = this,
        request = (Modernizr.test_xmlhttprequest) ? new ActiveXObject('Microsoft.XMLHTTP') : new XMLHttpRequest();
    request.onreadystatechange = function() {
        if(request.readyState === 4) {
            switch(request.status) {
                case 200:
                    callback.apply(request,[ request.statusText ]);
                    break;
                case 400:
                    callback.apply(request,[ request.statusText ]);
                    break;
                default:
                    break;
            };
        } else 
            console.log('An error occured during the XHR request');
        }
    };
    request.open("HEAD", url, false);
    request.send();
};

Cluster.prototype.operations = {
    '&&': function(array){ 
        return array.reduce(function(previousValue, currentValue, index, array){
             return previousValue && currentValue;
         })
     },
    '||' : function(array){
        return array.reduce(function(previousValue, currentValue, index, array){
            return this.initiate_xhr_request(previousValue) || currentValue;
        })}
}; 
```

**编辑：**调用方法如下：

```
Cluster.prototype.calculate = function(operation, array){
    return this.operations[operation](array);
};

/* call the calculate function */

this.calculate('&&', some_array); 
```

显然，这条线`this.initiate_xhr_request(previousValue)`行不通。我一直试图找到一个很好的解决方案来做我想做的事情，但我找不到一个（：有没有办法做到这一点并保持我的结构不变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:20:20.653

您可以使用`.call`或`.apply`手动设置`this`您正在调用的方法的值。

这里我将`this`值设置`this.operations[operation]`为当前词法环境中的值。*（使用`.apply`而不是`.call`会做同样的事情，但会将你`array`的成员作为单独的参数传递，你似乎不想要。）*

```
Cluster.prototype.calculate = function(operation, array){
    return this.operations[operation].call(this, array);
}; 
```

* * *

现在在这些方法中，`this`值将是您所期望的，除了您需要确保该`this`值保留在`.reduce()`该方法的 then 回调中`"||"`。

做到这一点的经典方法是保留对外部词法环境的变量引用，即回调中该变量的引用：

```
Cluster.prototype.operations = {
    '&&' : ...,
    '||' : function(array){
        var self = this;
        return array.reduce(function(previousValue, currentValue, index, array){
            return self.initiate_xhr_request(previousValue) || currentValue;
        })}
}; 
```

但更现代的方法是使用手动绑定值`Function.prototype.bind`创建一个新函数：`this`

```
Cluster.prototype.operations = {
    '&&' : ...,
    '||' : function(array){
        return array.reduce(function(previousValue, currentValue, index, array){
            return this.initiate_xhr_request(previousValue) || currentValue;
        }.bind(this))}
}; 
```

# javascript - 使用 express-expose 和 Handlebars.js 给了我 Unexpected Token &

> ID：13000557
> 
> 赞同：1
> 
> 时间：2012-10-21T17:57:41.627
> 
> 标签：javascript, express, handlebars.js, mustache

我正在使用 express-expose 将变量传递给客户端，以便我可以使用它们，但是正在传递的变量被格式化为“

例如我有。

在我的 server.js 中

```
res.expose('var some = "variable";');
res.render("home"); 
```

然后在我的模板中我有

```
<script type="text/javascript">
{{javascript}}
</script> 
```

但它给了我一个错误，chrome开发工具说

```
var some = &quot;variable&quot;;
Uncaught SyntaxError: Unexpected token & 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:08:31.613

我得到了它！不得不使用三重存储 {{{javascript}}} 而不是双重存储。

# c++ - 传递数组指针并在函数内部使用

> ID：13000558
> 
> 赞同：1
> 
> 时间：2012-10-21T17:57:42.440
> 
> 标签：c++, arrays, c++11

我想知道如何将指针传递给函数中的数组，并且在函数内部我仍然想将它用作指针。

```
process(Shape **sp);

int main(){
  Shape* objShape[5];
  process(objShape);
}

process(Shape **sp) {
  sp[0]=&objRec; // No Errors
  cout<<sp[0]->computeArea(); // WORKS
} 
```

但是当我将 COMPUTEAREA() 方法转移到另一个函数时它不起作用

```
getArea(Shape **sp){
  cout<<sp[0]->computeArea(); // I get a segmentation fault error;
} 
```

objRec 是 Shape 类的子类。而且我需要使用动态绑定来评估计算区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T17:59:44.223

很简单，像这样

```
sp[0]=objRec; 
```

你让自己对所有的指针感到困惑。您有一个指向对象数组的指针。但是您的代码编写得好像您有一个指向对象指针数组的指针，这根本不是一回事。

在您的第二段代码中，您确实有一个指针数组，这就是您的第二段代码编译的原因。

正如克里斯指出的那样，您还需要丢失`const`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T18:07:15.563

```
process(Shape const *sp){
    sp[0]=&objRec;
} 
```

你用过`const`。所以它没有用。尝试删除`const`. 您不能修改`const`类型的值。

此外，您正在分配 objRect 的地址。试试这个：

```
process(Shape const *sp){
    sp[0]=objRec;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T18:07:27.247

`const`从您的签名中删除：

```
process(Shape *sp) 
```

如果 objRec 是类型，`Shape`则不要从中获取指针：

```
process(Shape *sp){

  sp[0]=objRec; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T18:05:58.127

您没有在采用**objRec 类型**`=`时重载运算符`shape class`

 **```
objRecTYPE& operator=(objRecTYPE& s)
{
    // your code

    return *this;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T18:07:08.500

您正在尝试将 sp[0] 的值分配给 objRec 的地址。尝试省略地址运算符。**

# android - DalvikVM 上的 CLI 在 JNI 库上失败

> ID：13000561
> 
> 赞同：8
> 
> 时间：2012-10-21T17:58:17.740
> 
> 标签：android, android-ndk, java-native-interface, dalvik

我需要在 Android 上运行 java 应用程序的命令行版本（是的，我知道这不是微不足道的）。

我正在尝试使用 Dalvikvm 启动它，它实际上启动了，但后来我的代码失败了，因为它开始使用 android.util.log 并抛出此异常。

```
java.lang.UnsatisfiedLinkError: println_native
    at android.util.Log.println_native(Native Method)
    at android.util.Log.i(Log.java:159)
    at org.slf4j.impl.AndroidLogger.info(AndroidLogger.java:151)
    at org.gihon.client.TunnelingClient.<init>(TunnelingClient.java:62)
    at org.gihon.client.CLI.main(CLI.java:95)
    at dalvik.system.NativeStart.main(Native Method) 
```

我尝试设置环境变量，设置了 LD_LIBRARY_PATH 和 BOOTCLASSPATH 变量。我什至尝试使用 LD_PRELOAD 预加载 liblog，但没有解决这个问题。dalvikvm 设置环境的方式似乎有问题/不同。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-21T19:45:19.583

好问题！我不得不挖掘一下才能弄清楚这一点。

libandroid_runtime.so 中有大量 JNI 方法，默认情况下不会绑定，当您使用 dalvikvm 命令时。不幸的是，你不能只做一个 System.loadLibrary("android_runtime")，因为这实际上并没有绑定所有的本地方法。

然而，经过一番挖掘，发现有一个内部的、非公开的、不保证存在的类，名为 com.android.internal.util.WithFramework，其目的是加载 libandroid_runtime.so 并绑定其所有 JNI 方法。

要使用它，只需`com.android.internal.util.WithFramework`在 dalvikvm 命令的类名前面加上，如下所示：

```
dalvikvm -cp /some/path/classes.dex com.android.internal.util.WithFramework my.example.cls "This is an argument" 
```

（注意：这仅适用于 M 之前的设备，因为[在 M 中删除](https://android-review.googlesource.com/#/c/157981/)了 WithFramework 类- 感谢@JaredRummler 的提醒）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-10T15:20:34.900

对于 android M，我发现这种方法可行。
创建一个 helloworld.sh 脚本来伴随您的 jar\zip 文件：

```
#!/system/bin/sh
# Copied by example from am command
base=/system
export CLASSPATH=/path/to/your/jar/HelloWorld.jar
exec app_process $base/bin HelloWorldMainClass "$@" 
```

[app_process](https://android.googlesource.com/platform/frameworks/base/+/android-6.0.1_r3/cmds/app_process/app_main.cpp)似乎在加载所有 java 类和共享库的情况下启动您的 java 代码，因此您可以使用 android.util.log.Log 等 SDK 类和其他 adb shell 命令中使用的“秘密”本机类，例如 ActivityManagerNative，并且不存在于 SDK 中。

顺便说一句，对于我创建的 java shell 命令，我不得不对上述类使用反射，因为在我看来，如果不克隆和构建整个 AOSP 就无法正确编译...
如果有人知道更简单的方法例如在没有反射的Java代码中使用ActivityManagerNative，我会很感激帮助。

# git - 如何从多个提交中推送多个分支？

> ID：13000563
> 
> 赞同：60
> 
> 时间：2012-10-21T17:58:33.157
> 
> 标签：git, github

我在发布 Windows 应用程序`git`之前从未使用过`GitHub`，所以我从未在命令行中使用过它。

所以这是我的情况：
我在 上做了一些提交`master`，然后切换了分支并在那里做了一些提交。所有这些都无需推送到 GitHub。然后，当我单击`sync`Windows 应用程序（我假设确实如此`git push`）时，令我惊讶的是，我所有的提交都被推送到了我的新分支——甚至是我在`master`.

由于这是 Windows 应用程序的行为，我想我必须使用命令行。将提交推送到远程正确分支
的正确命令是什么？`git push`

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-01-26T20:13:57.547

要推送所有分支（refs/heads 下的 refs），请使用以下命令（其中 origin 是您的遥控器）：

```
git push origin --all 
```

* * *

您还可以在配置中设置[`push.default`](https://git-scm.com/docs/git-config.html)为`matching`默认情况下在两端推送所有具有相同名称的分支。例如：

```
git config --global push.default matching 
```

从 Git 2.0 开始，默认设置是`simple`最安全的选项。

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2016-09-29T08:39:13.040

如果你想推送几个特定的​​分支（例如 branch1 和 branch2），你可以使用：

```
git push origin branch1 branch2 
```

在 Git >= 2.4 中，此操作可以原子方式完成（即，如果它无法推送指定的任何分支，则不会推送任何内容）：

```
git push --atomic origin branch1 branch2 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-21T18:03:28.437

`git push origin`默认情况下，将从所有跟踪分支推送到远程。

`git push origin my-new-branch`只会推送你的新分支。

我不相信有任何简单或可能的意外操作会将提交从两个不同的分支推送到同一个分支并在远程进行合并。

我猜想新分支的历史记录中包含来自 master 的提交。要查看这是否属实，请在`git log my-new-branch`本地运行并查看这些提交是否在您的历史记录中。

如果是这样，当您“切换分支”时，您可能会在新提交完成*后*从 master分支，因此新分支包含历史中的所有提交，而不仅仅是该分支独有的提交。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-17T09:42:26.117

迟到的答案，但我将分享对我有用的解决方案。

最后我的`/foo/.git/config`文件看起来像：

```
[core]
    ...

[remote "dev"]
    url = http://dev.foobar.com/foo.git
    fetch = +refs/heads/*:refs/remotes/dev/*
[remote "pro"]
    url = http://pro.foobar.com/foo.git
    fetch = +refs/heads/*:refs/remotes/pro/*

[remote "all"]
    url = http://dev.foobar.com/foo.git
    url = http://pro.foobar.com/foo.git

[http]
    postBuffer = 524288000 
```

和指挥；

```
git push all --all 
```

致谢：**[同时推送到多个 Git 存储库](http://web.archive.org/web/20130915212058/http://www.jeetworks.org/node/22)**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-18T17:44:21.257

你可以做一个

```
 git branch | grep "<pattern>" | xargs git push 
```

用正则表达式替换`<pattern>`以匹配您的分支名称，就是这样。

`--set-upstream origin`如果这是您对该分支的第一次提交，您可以添加

# php - 从 2 个表格中进行排名

> ID：13000566
> 
> 赞同：2
> 
> 时间：2012-10-21T17:58:37.920
> 
> 标签：php, mysql, sql

我有 2 张桌子：

```
tb_a                  tb_2
==================    ===================
|id| data1 |rank |    |id| data2 | rank | 
==================    ===================
|1 | data1 |  1  |    | 1|  dataa|  1   | 
|2 | data2 |  2  |    | 2|  datab|  2   | 
etc.. 
```

数据将根据排名进行排序。结果必须是：

```
data1
dataa
data2
datab 
```

编码 ：

```
$query1= mysql_query("SELECT * FROM tb_a ORDER BY rank ASC");
while ($row1 = mysql_fetch_array($query1)) {
    $data = $row1['data1'];
    echo '<h2 class="title" > '.$data.'  </h2>';
}

$query2= mysql_query("SELECT * FROM tb_b ORDER BY rank ASC");
while ($row2 = mysql_fetch_array($query2)) {
    $data = $row2['data2'];
     echo '<h2 class="title" > '.$data.'  </h2>';
} 
```

结果 ：

```
data1
data2
dataa
datab 
```

如何对它们进行排序取决于排名？谢谢你 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T18:01:03.683

您可以`UNION`在查询中使用一次请求数据库。

```
SELECT *
FROM
(
    SELECT id, data1 as `data`, rank
    FROM tb_a
    UNION ALL
    SELECT id, data2 as `data`, rank
    FROM tb_2
) x
ORDER BY x.rank ASC 
```

# c# - 如何检查文件是否打开/写入C#

> ID：13000567
> 
> 赞同：0
> 
> 时间：2012-10-21T17:58:38.177
> 
> 标签：c#

我有下面的代码，它使用计时器为我移动文件（每 10 分钟移动 200 个文件或我保存在我的设置表单上的文件）。

问题是文件在打开和写入时会被移动，我知道我必须在我的程序中“打开”它并检查异常但我不知道我应该把它放在我的代码中的哪个位置？

```
try
{
            string origDir = @"" + Properties.Settings.Default.MoveFrom;
            string destDir = @"" + Properties.Settings.Default.MoveTo;
            string oldDir = @"" + Properties.Settings.Default.MoveToOld;

            int filesPerMove = Properties.Settings.Default.FilesPerMove;
            int i = 0;

            DateTime dateMove= DateTime.Now;

            DirectoryInfo dirInfo = new DirectoryInfo(origDir);
            FileInfo[] files = dirInfo.GetFiles("*.txt");

            foreach (string file in Directory.GetFiles(origDir))
                if (new FileInfo(file).Length > 0)
                {
                    if (i < filesPerMove)
                    {
                            ListViewItem lviSuccess = new ListViewItem(origFile.Name);
                            lviSuccess.SubItems.Add(origFile.LastWriteTime.ToString());
                            lviSuccess.SubItems.Add(dateMove.ToString());
                            lviSuccess.SubItems.Add(origFile.Length.ToString());
                            lviSuccess.SubItems.Add(origDir.ToString());
                            lviSuccess.SubItems.Add(destDir.ToString());
                            lvFileMoves.Items.Add(lviSuccess);
                            lviSuccess.UseItemStyleForSubItems = true;
                            lviSuccess.ForeColor = Color.Green;

                            FileInfo destFile = new FileInfo(file.Replace(origDir, destDir));
                            FileInfo destFile1 = new FileInfo(file.Replace(origDir, oldDir));
                            System.IO.File.Copy(origFile.FullName, destFile1.FullName, true);
                            System.IO.File.Copy(origFile.FullName, destFile.FullName, true);
                            File.Delete(origFile.FullName);                        
                            i++;
                        }
                    }
}
catch (System.IO.IOException ex)
{ 
            ListViewItem lvi = new ListViewItem(ex.Message);
            lvFileMoves.Items.Add(lvi);
            lvi.UseItemStyleForSubItems = true;
            lvi.ForeColor = Color.Red;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:05:28.833

投票是邪恶的。

您*真正想要的是在发生更改时得到*通知。*

[ReadDirectoryChangesW](http://msdn.microsoft.com/library/default.asp?url=/library/en-us/fileio/filesio_97av.asp)是执行此操作的一种方法。

这是一个很好的链接，展示了如何使用它（从 C++ 转换为 C#/Interop 应该很简单）：

*   [http://www.codeproject.com/Articles/950/CDirectoryChangeWatcher-ReadDirectoryChangesW-all](http://www.codeproject.com/Articles/950/CDirectoryChangeWatcher-ReadDirectoryChangesW-all)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:51:37.977

现在我有以下内容，但即使对于我没有在记事本中打开的文件，它也会为每个文件引发异常。

```
 FileStream outStream = null;
 try
                    {
                        outStream = File.OpenWrite(origFile.ToString());

                            FileInfo destFile = new FileInfo(file.Replace(origDir, destDir));

                            FileInfo destFile1 = new FileInfo(file.Replace(origDir, oldDir));
                            System.IO.File.Copy(origFile.FullName, destFile1.FullName, true);
                            System.IO.File.Copy(origFile.FullName, destFile.FullName, true);
                            File.Delete(origFile.FullName);
                            lblSenast.Text = string.Format("Senaste flytt gjordes {0}",     dateMove.ToString());
                    }
                    catch (IOException exx)
                    {
                        ListViewItem lvi = new ListViewItem(exx.Message);
                        lvFileMoves.Items.Add(lvi);
                        lvi.UseItemStyleForSubItems = true;
                        lvi.ForeColor = Color.Gray;
                    }
                    finally
                    {
                        outStream.Close();
                        outStream.Dispose();
                    } 
```

该进程无法访问文件“Bla bla bla”，因为它正被另一个进程使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T18:04:33.037

您应该将异常处理放置在文件处理附近：

```
try
{
    FileInfo destFile = new FileInfo(file.Replace(origDir, destDir));
    FileInfo destFile1 = new FileInfo(file.Replace(origDir, oldDir));
    System.IO.File.Copy(origFile.FullName, destFile1.FullName, true);
    System.IO.File.Copy(origFile.FullName, destFile.FullName, true);
    File.Delete(origFile.FullName);                        
    i++;
}
catch(System.IO.IOException ex)
{ 
    ListViewItem lvi = new ListViewItem(ex.Message);
    lvFileMoves.Items.Add(lvi);
    lvi.UseItemStyleForSubItems = true;
    lvi.ForeColor = Color.Red;
} 
```

这样，当一个文件失败时，您可以继续使用以下文件。

# ruby-on-rails - 使用 RSpec 和 Factory Girl 测试 before_save

> ID：13000569
> 
> 赞同：1
> 
> 时间：2012-10-21T17:59:23.023
> 
> 标签：ruby-on-rails, rspec, factory-bot

我正在使用 before_save 调用来更新属于特定主控的所有记录。两者都有一个名为 item_id 的字段：

```
class Master < ActiveRecord::Base
  has_many :records
  before_save :update_records
  def update_records
    self.records.find_each do |r|
      r.item_id = self.item_id
      r.save
    end
  end
end

class Record < ActiveRecord::Base
end 
```

这按预期工作（暂时搁置这样做是否是个好主意）。但是我无法获得通过的 RSpec 测试。这是我尝试过的：

```
describe Master do
  describe 'before_save' do
    it 'updates records belonging to it' do
      master = FactoryGirl.create(:master, item_id: 1)
      record = FactoryGirl.create(:record, master_id: master.id, item_id: 1)
      master.item_id = 2
      master.save
      record.item_id.should == 2
    end
  end
end 
```

原因很有趣。该模型在 Record 模型的第二个实例上工作，该实例已成功保存，但未返回到规范中：

```
"MASTER - CREATED IN SPEC"
#<Master:0x007fd0ed55ec20> {
    :id => 26,
    :item_id => 1,
}
"RECORD - CREATED IN SPEC"
#<Record:0x007fd0ea157e40> {
    :id => 16,
    :item_id => 1,
    :master_id => 26,
}
"RECORD - AFTER SAVE IN MODEL"
#<Record:0x007fd0ed2f9a70> {
    :id => 16,
    :item_id => 2,
    :master_id => 26,
}
"MASTER - UPDATED IN SPEC"
#<Master:0x007fd0ed55ec20> {
    :id => 26,
    :item_id => 2,
}
"RECORD - FINAL IN SPEC"
#<Record:0x007fd0ea157e40> {
    :id => 16,
    :item_id => 1,
    :master_id => 26,
} 
```

你知道吗：

*   为什么会这样？
*   我怎样才能让这个规范通过？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T18:06:23.397

看起来您的记录只是向您显示旧数据，需要刷新。尝试：

```
record.reload.item_id.should == 2 
```

# css - @font-face 不适用于 Mobile Safari

> ID：13000570
> 
> 赞同：1
> 
> 时间：2012-10-21T17:59:29.777
> 
> 标签：css, mobile-safari, font-face

我使用 jQuery Mobile 框架创建了移动网络应用程序。我还在 .css 文件中添加了一些外部阿拉伯字体。当我在 Chrome、Firefox 等桌面浏览器中测试网页时，它运行良好。但是当我在 iPod touch 上的 Mobile Safari 中测试网页时，它无法正常工作，它仍然显示默认字体...

我的 CSS 是：

```
@font-face {
    font-family: 'Amiri-Bold';
    src: url('amiri-bold.eot');
    src: url('amiri-bold.eot?#iefix') format('embedded-opentype'),
         url('famiri-bold.woff') format('woff'),
         url('amiri-bold.ttf') format('truetype'),
         url('amiri-bold.svg#amiri-bold') format('svg');
    font-weight: normal;
    font-style: normal;
}

h1 {
    font-size:16px;
    font-family:Amiri-Bold;
} 
```

我的 HTML 是：

```
<h1>يبييبي يب يب يبب</h1> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-15T08:37:29.990

iOS 似乎不支持复杂脚本的*OpenType字体：* [https](https://bugs.webkit.org/show_bug.cgi?id=92586) ://bugs.webkit.org/show_bug.cgi?id= 92586 ，而 Amiri 是*OpenType*字体。Apple 提供的阿拉伯字体是*AAT*字体，这可能就是它们运行良好的原因。

另请参阅此相关讨论：[https ://discussions.apple.com/thread/5281738](https://discussions.apple.com/thread/5281738)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:19:08.377

我在[http://www.amirifont.org/](http://www.amirifont.org/)上看到他在 html 中使用了“lang”属性：

```
<div lang="ar">
    <p>some arabic text</p>
</div>

<div lang="en">
    <p>english text</p>
</div> 
```

*[更新]*

**1\. unicode-bidi 可能有一些东西需要检查**

“unicodeBidi 属性与 direction 属性一起使用，以设置或返回是否应覆盖文本以支持同一文档中的多种语言。”

```
/*I've have not tested this one */
arabic-text {
    direction: ltr;
    unicode-bidi: embed;
} 
```

[http://reference.sitepoint.com/css/unicode-bidi](http://reference.sitepoint.com/css/unicode-bidi)

[http://www.quackit.com/css/properties/css_unicode-bidi.cfm](http://www.quackit.com/css/properties/css_unicode-bidi.cfm)

[http://www.w3schools.com/jsref/prop_style_unicodebidi.asp](http://www.w3schools.com/jsref/prop_style_unicodebidi.asp)

**2\. 字符集可能有一些需要检查的地方，**看看这个关于现代阿拉伯文字的讨论（有些人在某些情况下使用 utf16）

[对于主要包含阿拉伯文本的网页，我应该使用什么字符编码？utf-8 可以吗？](https://stackoverflow.com/questions/2996475/what-character-encoding-should-i-use-for-a-web-page-containing-mostly-arabic-tex)

[UTF-8 对所有常用语言都足够了吗？](https://stackoverflow.com/questions/2438896/is-utf-8-enough-for-all-common-languages)

**3.尝试使用google字体，看看是不是访问问题**

[http://www.google.com/webfonts/earlyaccess](http://www.google.com/webfonts/earlyaccess)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T14:34:13.213

您想在移动 safari 上使用 SVG。这个周末我正在做这件事。

# mysql - 在 talnet 软件腻子中创建表的正确语法是什么

> ID：13000572
> 
> 赞同：0
> 
> 时间：2012-10-21T18:00:05.557
> 
> 标签：mysql

现在，由于我的第一个问题已经结束，因为我问的方式是：在 telnet 软件 puTTy 中创建表的正确语法是什么：这是我放在光标 mySql> 创建表用户（列名数据类型，列名数据类型， ) ; 现在我们把分号放在这里：解释？我通过那个stackoverflow是提出问题的地方：现在我不明白提出问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T19:15:07.387

首先，当你到达`mysql>`你应该使用这个命令，然后开始制作表格：

```
use username_db; 
```

这将更新您的整个数据库，然后您可以开始查询。

并且您可以`;`在每个查询之后插入并用 and 分隔每列，`,`如果您`int`用作数据类型，则无需指定任何大小`int`。如果你使用`varchar`，你应该指定它的大小。查询假设如下：

```
create table tablename (columnname datatype, columnname datatype); 
```

如果你制作表格用户，那么它可以是

```
create table Users (id int, data varchar(10), answer varchar(10)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T18:04:08.460

Yes 可以将分号 ( `;`) 放在最后，但删除`,`右大括号 ( ) 之前的最后一个逗号 ( `)`)；

```
 create table Users ( column name datatype, column name datatype) ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T21:23:56.857

是的，您可以在数据类型的末尾删除 (,)，并且可以在每个查询结束后插入分号 (;)。这是创建表的语法；

```
create table Users(column_name INT,column_name varchar(15)); 
If the datatype is INT you don`t need to create the size of the INT .Suppose if the 
datatatype is String you have to create the size of the string(like varchar(15)).
Let me know,If you need any more information. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T00:26:06.540

```
create table tablename (columnname datatype(size),columnname datatype(size)); 
```

# ruby - Ruby-1.9.3-p286：无法在 OS X 上使用 RVM 安装

> ID：13000573
> 
> 赞同：3
> 
> 时间：2012-10-21T18:00:20.137
> 
> 标签：ruby, makefile, rvm

TI 正在尝试使用 RVM 在我的系统上更新 Ruby。
我目前使用 Ruby-1.9.3-p194，一切正常。

这是我使用的命令：

```
$ rvm install 1.9.3-p286 
```

这是输出：

```
ruby-1.9.3-p286 - #configure
ruby-1.9.3-p286 - #download
ruby-1.9.3-p286 - #extract
ruby-1.9.3-p286 - #validate
Libraries missing for ruby-1.9.3-p286: /opt/sm/pkg/versions/libffi/3.0.10/lib/libffi.5.dylib. Refer to your system manual for installing libraries
Mounting remote ruby failed, trying to compile.
Installing Ruby from source to: /Users/Tom/.rvm/rubies/ruby-1.9.3-p286, this may take a while depending on your cpu(s)...
ruby-1.9.3-p286 - #downloading ruby-1.9.3-p286, this may take a while depending on your connection...
ruby-1.9.3-p286 - #extracting ruby-1.9.3-p286 to /Users/Tom/.rvm/src/ruby-1.9.3-p286
ruby-1.9.3-p286 - #extracted to /Users/Tom/.rvm/src/ruby-1.9.3-p286
ruby-1.9.3-p286 - #configuring
ruby-1.9.3-p286 - #compiling
ruby-1.9.3-p286 - #installing 
Error running 'make install', please read /Users/Tom/.rvm/log/ruby-1.9.3-p286/install.log
There has been an error while running make install. Halting the installation. 
```

缺少库的第一个警告很烦人。不过，我可以处理从源代码编译它......只要它有效。

这是日志：

```
$ cat /Users/Tom/.rvm/log/ruby-1.9.3-p286/install.log
[2012-10-21 19:41:13] make install
./miniruby -I./lib -I. -I.ext/common  ./tool/rbinstall.rb --make="make" --dest-dir="" --extout=".ext" --mflags="" --make-flags="" --data-mode=0644 --prog-mode=0755 --installed-list .installed.list --mantype="doc"
installing binary commands:   /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/bin
installing base libraries:    /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib
installing arch files:        /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-darwin12.2.0
installing pkgconfig data:    /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib/pkgconfig
installing command scripts:   /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/bin
installing library scripts:   /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1
installing common headers:    /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/include/ruby-1.9.1
installing manpages:          /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/share/man/man1
installing extension objects: /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/x86_64-darwin12.2.0
installing extension objects: /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1/x86_64-darwin12.2.0
installing extension objects: /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/vendor_ruby/1.9.1/x86_64-darwin12.2.0
installing extension headers: /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/include/ruby-1.9.1/x86_64-darwin12.2.0
installing extension scripts: /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1
installing extension scripts: /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/site_ruby/1.9.1
installing extension scripts: /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/vendor_ruby/1.9.1
installing extension headers: /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/include/ruby-1.9.1/ruby
installing default gems:      /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/gems/1.9.1 (cache, doc, gems, specifications)
/Users/Tom/.rvm/src/ruby-1.9.3-p286/lib/fileutils.rb:244:in `mkdir': File exists - /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/gems/1.9.1 (Errno::EEXIST)
    from /Users/Tom/.rvm/src/ruby-1.9.3-p286/lib/fileutils.rb:244:in `fu_mkdir'
    from /Users/Tom/.rvm/src/ruby-1.9.3-p286/lib/fileutils.rb:221:in `block (2 levels) in mkdir_p'
    from /Users/Tom/.rvm/src/ruby-1.9.3-p286/lib/fileutils.rb:219:in `reverse_each'
    from /Users/Tom/.rvm/src/ruby-1.9.3-p286/lib/fileutils.rb:219:in `block in mkdir_p'
    from /Users/Tom/.rvm/src/ruby-1.9.3-p286/lib/fileutils.rb:205:in `each'
    from /Users/Tom/.rvm/src/ruby-1.9.3-p286/lib/fileutils.rb:205:in `mkdir_p'
    from ./tool/rbinstall.rb:183:in `makedirs'
    from ./tool/rbinstall.rb:284:in `prepare'
    from ./tool/rbinstall.rb:539:in `block in <main>'
    from ./tool/rbinstall.rb:597:in `call'
    from ./tool/rbinstall.rb:597:in `block (2 levels) in <main>'
    from ./tool/rbinstall.rb:594:in `each'
    from ./tool/rbinstall.rb:594:in `block in <main>'
    from ./tool/rbinstall.rb:590:in `each'
    from ./tool/rbinstall.rb:590:in `<main>'
make: *** [do-install-nodoc] Error 1 
```

我相信它说它试图写入的文件已经存在：

```
File exists - /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/gems/1.9.1 (Errno::EEXIST) 
```

我检查了一下，这个文件似乎是一个不存在目录中文件的符号链接：

```
$ ls -GFhl /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/gems/1.9.1
lrwxr-xr-x  1 Tom  staff    39B 17 Ott 13:29 /Users/Tom/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/gems/1.9.1@ -> /Users/mpapis/.rvm/gems/ruby-1.9.3-p286 
```

...它说`/Users/mpapis/`，谁是创作 RVM 的人之一。会不会是他整理安装脚本时的遗留物？

这里的这些日本人似乎能够安装它：http: [//qiita.com/items/34e0ff2c369899169f90](http://qiita.com/items/34e0ff2c369899169f90) ...仍然，我迷路了。

有人可以帮忙吗？有没有办法强制覆盖该文件？

干杯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T18:19:39.120

此问题已修复[https://github.com/wayneeseguin/rvm/issues/1244](https://github.com/wayneeseguin/rvm/issues/1244)尚不可用`stable`，请使用`head`：

```
rvm get head
rvm reinstall 1.9.3 
```

# compiler-construction - Flex 编译错误

> ID：13000575
> 
> 赞同：0
> 
> 时间：2012-10-21T18:00:34.620
> 
> 标签：compiler-construction, compiler-errors, lex, flex-lexer

我试图描述玩具语言的语法。以下是 的内容`tokens.lex`：

```
/* Simple scanner for a toy language */

%{
/* need this for the call to atof() below */
#include <string.h>
#include <math.h>
%}

IDENTIFIER [a-z][a-z0-9]*
DIGIT      [0-9]

%%
{DIGIT}+ {
  printf("int: %s (%d)\n", yytext, atoi(yytext));
  yylval.string = new std::string(yytext, yyleng);
} /* define int type */

{DIGIT}+"."{DIGIT}+ {
  printf("float: %s (%d)\n", yytext, atof(yytext));
  yylval.string = new std::string(yytext, yyleng);
} /* define float type */

b[\'\"]{IDENTIFIER}[\'\"] {
  printf("bstream: %s\n", yytext);
  yylval.string = new std::string(yytext, yyleng);
} /* define bstream type */

u[\'\"]{IDENTIFIER}[\'\"] {
  printf("ustream: %s\n", yytext);
  yylval.string = new std::string(yytext, yyleng);
} /* define ustream type */

if|then|begin|end|procedure|function {
  printf( "A keyword: %s\n", yytext );
}

{IDENTIFIER}      printf( "identifier: %s\n", yytext );

"+"|"-"|"*"|"/"   printf( "operator: %s\n", yytext );

"{"[^}\n]*"}"     /* Remove one-line comments */

[ \t\n]+          /* Remove whitespace */

.                 printf( "Unrecognized character: %s\n", yytext );

%%
int argc;
char **argv;
int main(argc, argv);
  {
  if ( argc > 0 )
    yyin = fopen( argv[0], "r" );
  else
    yyin = stdin;
  yylex();
  } 
```

然后我尝试编译它：

`lex tokens.lex && g++ -lfl lex.yy.c`

编译器返回几个错误：

```
tokens.lex:51:20: error: expression list treated as compound expression in initializer [-fpermissive]
tokens.lex:51:20: error: invalid conversion from ‘char**’ to ‘int’ [-fpermissive]
tokens.lex:52:3: error: expected unqualified-id before ‘{’ token 
```

这里有什么问题？我在 C/C++ 方面不是很强，所以我不知道这里发生了什么。请问你能帮帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:03:50.347

main函数的正确写法是：

```
int main(int argc, char** argv)
{
  if (argc > 1)
    yyin = fopen(argv[1], "r");
  else
    yyin = stdin;
  return yylex();
} 
```

1.  参数的类型应该放在参数名称之前
2.  argv 数组的元素 [0] 是程序名称本身。真正的论点从 [1] 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T04:24:05.053

如另一个答案中所述，您的 main() 参数声明不正确的“C”语法，但无论如何这都是错误的。您的词法分析器必须*返回*标记，而不仅仅是打印它们。lex/flex 的 main() 函数必须调用 yylex() 直到它返回零或 -1 或任何 EOS 指示。这就是 lex 库中的那个。

# c# - 如何在 Windows 8 中访问日历

> ID：13000576
> 
> 赞同：2
> 
> 时间：2012-10-21T18:00:37.953
> 
> 标签：c#, windows-8

我制作了一个 Windows 8 应用程序。如何访问标准 Windows 8 日历？这可能吗？如果没有，如何使某事像 Windows 8 日历在其中添加事件？我需要将事件添加到日历。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:11:55.163

有一个实时连接 API。看看[这里](http://msdn.microsoft.com/en-us/library/live/hh826523.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:22:21.260

在 UI 方面（相对于 API 访问，正如 Christopher 所述）。Microsoft 没有提供标准的日历控件。

您可以创建自己的产品或查看第三方产品，包括

1.  [Telerik](http://www.telerik.com/products/windows-8/summary.aspx?utm_expid=39875251-14&utm_referrer=http://www.telerik.com/developer-productivity-tools/whats-new.aspx)似乎有一个日期和时间选择器，但目前没有日历。他们的[KendoUI (HTML5)](http://www.kendoui.com/web.aspx)确实有一个日历，理论上你可以在 HTML5/JS Windows 8 应用程序中使用它（但我没有尝试过）。
2.  [ComponentOne](http://our.componentone.com/2012/08/15/windows-8-xaml-controls-are-here/)确实具有用于 Windows 应用商店应用程序的日历控件
3.  [Infragistics](http://www.infragistics.com/products/technology-previews/windows8/)还具有可在各种场景中使用的控件（HTML5 / ARM）

# bash - bash 脚本给出了 mv 错误......可能很容易修复

> ID：13000582
> 
> 赞同：0
> 
> 时间：2012-10-21T18:01:50.890
> 
> 标签：bash, variables, hyperlink, awk

编辑：最后调用的 fixnames.sh 可能会产生错误（特别是第 2 行）：

```
 #/bin/bash
    for x in *\'*;
    do
    y=$(echo "$x"| sed y/\'\,/__/)
    mv "$x" "$y"
    done 
```

问题行是最后的 mv 命令

```
 mv $OUTDIR/$OLD $OUTDIR/$NEW 
```

它会出现以下错误：

```
 mv '*\* [something about unable to stat this] 
```

这个脚本是我从[http://www.mythtv.org/wiki/Removing_Commercials](http://www.mythtv.org/wiki/Removing_Commercials)和其他一些地方发布的脚本定制的。mv 的目标是，iirc，清理 tmp 目录（删除我笨拙地用来重命名文件的符号链接）。我有点不清楚该 mv 行和之前的 2 行中发生了什么，这显然导致脚本无法干净地完成。感谢您的任何意见。

```
 #!/bin/sh
    VIDEODIR=$1
    FILENAME=$2
    CHANID=$3
    STARTTIME=$4
    # MythTV Install Prefix
    INSTALLPREFIX="/usr/bin"
    USRLOCALPREFIX="/usr/local/bin"
    HOMEDIR="/home/xxx"
    OUTDIR="/home/xxx/trans-out"
    TMPDIR="/home/xxx/trans-out/tmp"

    if [ ! -d $TMPDIR ]; then mkdir $TMPDIR; fi
    rm -f $TMPDIR/*

    # Sanity checking, to make sure everything is in order.
    if [ -z "$VIDEODIR" -o -z "$FILENAME" -o -z "$CHANID" -o -z "$STARTTIME" ]; then
            echo "Usage: $0 <VideoDirectory> <FileName> <CHANID> <STARTTIME>"
            exit 5
    fi
    if [ ! -f "$VIDEODIR/$FILENAME" ]; then
            echo "File does not exist: $VIDEODIR/$FILENAME"
            exit 6
    fi
    # The meat of the script. Flag commercials, copy the flagged commercials to
    # the cutlist, and transcode the video to remove the commercials from the
    # file.

    $INSTALLPREFIX/mythtranscode --chanid $CHANID --starttime $STARTTIME --mpeg2 --honorcutlist --showprogress -o $OUTDIR/$FILENAME.tmp
    ERROR=$?
    if [ $ERROR -ne 0 ]; then
            echo "Transcoding failed for ${FILENAME} with error $ERROR"
            exit $ERROR
    fi

    # use mythlink script to extract program information from database and make link in tmp subfolder for renaming of transcoded version.
    $USRLOCALPREFIX/mythlink.pl --link $TMPDIR --chanid $CHANID --starttime $STARTTIME --underscores --separator _ --format %T_%oY%om%od_%S

    # remove the map file since we are transcoding
    rm -f $OUTDIR/$FILENAME.tmp.map

    # set variables for newfilename-link and oldfilename-transcoded file and then to rename transcoded with link name
    NEW=$(ls $TMPDIR)
    OLD=$(ls $OUTDIR | grep -i "mpg.tmp" | awk '{ print $1; }')
    mv $OUTDIR/$OLD $OUTDIR/$NEW

    # remove commas and apostraphies
    cd $OUTDIR && $USRLOCALPREFIX/fixnames.sh 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T18:18:39.837

这整个脚本真的应该重构。像这样的构造`NEW=$(ls $TMPDIR)`非常非常糟糕。有关详细信息，请参阅[ParsingLS](http://mywiki.wooledge.org/ParsingLs)。

只是看看你剧本中令人反感的部分......

```
# set variables for newfilename-link and oldfilename-transcoded file and then to rename transcoded with link name
NEW=$(ls $TMPDIR)
OLD=$(ls $OUTDIR | grep -i "mpg.tmp" | awk '{ print $1; }')
mv $OUTDIR/$OLD $OUTDIR/$NEW 
```

我在元代码中对此的阅读是：

*   将 $TMPDIR 中所有内容的文件名存储到变量 $NEW
*   将 $OUTDIR 中文件子集的某些部分存储到变量 $OLD
*   将所有（损坏的）文件名...移动到 $TMPDIR？

这对我来说没有多大意义。你*真的*`" mpg.tmp"`有以（带空格）结尾的文件吗？以及具有匹配前位的附加文件，但没有`" mpg.tmp"`？

如果你可以用示例文件名描述你想要做什么，那么重写这三行代码应该很容易，这样它们就可以工作了。

要获得更多智慧，请尝试以下操作：

```
NEW=$(ls $TMPDIR)
OLD=$(ls $OUTDIR | awk '/mpg\.tmp/{ print $1; }')
echo "mv $OUTDIR/$OLD $OUTDIR/$NEW" >> /tmp/mytherror.log
mv $OUTDIR/$OLD $OUTDIR/$NEW 
```

看看出现了什么`/tmp/mytherror.log`。

请注意，我**并不是**在提倡您使用`var=$(ls ...)`构造。那些应该被删除。他们很危险。但让我们先了解实际发生的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:45:16.430

总是引用你的变量，除非你有一个很好的、具体的理由不去理解这些影响。mv $OLD $NEW 是与 mv "$OLD" "$NEW" 非常不同的命令，可能不是您想要的。所以，引用你的变量，重新运行你的脚本，如果它仍然有问题就回来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T01:01:35.960

这是什么

```
NEW=$(ls $TMPDIR)
OLD=$(ls $OUTDIR | grep -i "mpg.tmp" | awk '{ print $1; }')
mv $OUTDIR/$OLD $OUTDIR/$NEW 
```

告诉我的是您的“.mpg.tmp”文件驻留在 中`/home/xxx/trans-out`，并且您正试图将它们（可能也重命名为“.mpg”？）移动到`/home/xxx/trans-out/tmp`（覆盖具有相同名称的“.mpg”文件？）。

至于为什么它不起作用，假设`NEW`并且`OLD`确实包含您想要的文件列表：

*   `NEW`包含“new1”、“new2”、“new3”
*   `OLD`包含“old1”、“old2”、“old3”

然后该声明`mv $OUTDIR/$OLD $OUTDIR/$NEW`将扩展为

```
mv $OUTDIR/new1 new2 new3 old1 $OUTDIR/old2 old3 
```

这意味着：将 5 个文件（“$OUTDIR/new1”、“new2”、“new3”、“old1”、“$OUTDIR/old2”）移动到目录“old3”。

* * *

我怀疑会起作用的是用这个替换那3行

```
for tmpfile in "$OUTDIR"/*.mpg.tmp; do
    mv "$tmpfile" "$TMPDIR/${tmpfile%.tmp}"
done 
```

（我认为这`awk`是从扩展名中删除“.tmp”）

# xml - 如何基于具有一对多关系的 XML 数据源制作报表？

> ID：13000583
> 
> 赞同：3
> 
> 时间：2012-10-21T18:01:50.417
> 
> 标签：xml, xpath, jasper-reports

我需要使用*iReport*从具有一对多关系的*XML 数据源编写报告。*

我的主表是一个用户列表，该表中的每一行都映射到角色表中的许多行。当我以 XML 文档的形式获取信息时，它具有以下结构：

```
<results>
  <user>
    <name>John Smith</name>
    <id>12345</id>
    <roles>
      <role>
        <name>Reports on Self</name>
        <id>50</id>
      </role>
      <role>
        <name>Reports on Others</name>
        <id>51</id>
      </role>
    </roles>
  </user>
  <user>
    <name>Jane Doe</name>
    <id>54321</id>
    <roles>
      <role>
        <name>Reports on Any</name>
        <id>53</id>
      </role>
      <role>
        <name>Changes to Any</name>
        <id>63</id>
      </role>
    </roles>
  </user>
</results> 
```

我需要的是这样显示结果。我找到了有关如何对子查询执行类似操作的信息，但我没有直接连接到数据库。我需要从 XML 文档中运行报告。

```
List of Users:
12345       John Smith
            Roles:
               Reports on Self
               Reports on Others

54321       Jane Doe
            Roles:
               Reports on Any
               Changes to Any 
```

如果您对如何完成此操作有任何想法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T23:51:57.487

不幸的是，您将无法仅使用 XPath 完成您的要求，因为它仅对查询 XML 中的元素有用。但是对于像 XSLT 这样的东西，这是可能的。

使用上面的文件，下面的 XSLT...

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format">
<xsl:output method="text"/>
<xsl:template match="/">
    <xsl:text>List of Users:
    </xsl:text>
    <xsl:apply-templates/>
</xsl:template>
<xsl:template match="user">
    <xsl:value-of select="id"/>
    <xsl:text>       </xsl:text>
    <xsl:value-of select="name"/>
    <xsl:text>
    </xsl:text>
    <xsl:apply-templates select="roles"/>
</xsl:template>
<xsl:template match="roles">
    <xsl:text>            Roles:
    </xsl:text>
    <xsl:apply-templates/>
</xsl:template>
<xsl:template match="role">
    <xsl:text>               </xsl:text>
    <xsl:value-of select="name"/>
    <xsl:text>
    </xsl:text>
</xsl:template>
</xsl:stylesheet> 
```

...你得到以下输出：

```
List of Users:
    12345       John Smith
                Roles:
                   Reports on Self
                   Reports on Others
    54321       Jane Doe
                Roles:
                   Reports on Any
                   Changes to Any 
```

# java - 使用 java 从 Web 浏览器的活动选项卡中获取 URL

> ID：13000586
> 
> 赞同：1
> 
> 时间：2012-10-21T18:02:42.273
> 
> 标签：java, google-chrome

我正在尝试编写 Java 代码以通过 getter 和侦听器从 Chrome 的活动选项卡获取 URL，但我的 getter 始终输出“about:blank”并且我的侦听器永远不会被触发。

对于 getter，我使用的是 org.eclipse.swt.browser.Browser 中的 getURL 方法。

对于监听器，我正在创建一个扩展 org.eclipse.swt.browser.LocationAdapter 接口的监听器类。

我是在正确的道路上，还是在不同的类库中的 chrome 浏览器数据？

# c# - 在 Windows 8 Metro App 中拖放图像

> ID：13000587
> 
> 赞同：2
> 
> 时间：2012-10-21T18:02:47.907
> 
> 标签：c#, wpf, xaml, windows-8

有没有办法在 Windows 8 Metro 应用程序中拖放图像。我正在使用 C# 和 XAML。以下是我需要的...

![在此处输入图像描述](../Images/e4281cb802d203fafd5f865485446be5.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T23:36:27.560

我在这里找到了一个很好的解决方案：http: [//xatazch.blogspot.pt/2012/08/drag-and-drop-item-using.html](http://xatazch.blogspot.pt/2012/08/drag-and-drop-item-using.html)

使用 TranslateTransform，我们可以获得可拖动项目的平滑和“实时”移动。

```
void MainPage_Loaded(object sender, RoutedEventArgs e)
{
     image1.ManipulationDelta += DragableItem_ManipulationDelta;
     image1.RenderTransform = new TranslateTransform();
}

private void DragableItem_ManipulationDelta(object sender, ManipulationDeltaRoutedEventArgs e)
{
     Image dragableItem = sender as Image;
     TranslateTransform translateTransform = dragableItem.RenderTransform as TranslateTransform;

     translateTransform.X += e.Delta.Translation.X;
     translateTransform.Y += e.Delta.Translation.Y;
} 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T18:47:28.423

当然有。你必须自己控制它，但这很容易。您需要使用一些像这样的指针事件：

XAML：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}"   PointerMoved="GridPointerMoved">
    <Image x:Name="image1" HorizontalAlignment="Left" Height="100" VerticalAlignment="Top" Width="100" Source="Assets/imageFile.png"  PointerPressed="ImagePointerPressed" PointerReleased="ImagePointerReleased"/>
</Grid> 
```

然后在您的 CS 文件中：

```
Point positionWithinImage;
private void ImagePointerPressed(object sender, PointerRoutedEventArgs e)
{
    Debug.WriteLine("Pressed");
    holding = true;

    positionWithinImage = e.GetCurrentPoint(sender as Image).Position;
}

private void ImagePointerReleased(object sender, PointerRoutedEventArgs e)
{
    Debug.WriteLine("Released");
    holding = false;
}

bool holding = false;

private void GridPointerMoved(object sender, PointerRoutedEventArgs e)
{
    if (holding)
    {
        var pos = e.GetCurrentPoint(image1.Parent as Grid).Position;
        image1.Margin = new Thickness(pos.X - this.positionWithinImage.X, pos.Y - this.positionWithinImage.Y, 0, 0);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T20:04:56.647

我尝试了您的解决方案，但并没有真正导致图像的“完美”移动。

或者，您可以尝试使用操作事件：

XAML：

```
<Image x:Name="imgSanta" Width="250" Source="Assets/santa.png" ManipulationMode="All" ManipulationStarted="imgSanta_ManipulationStarted_1" ManipulationDelta="imgSanta_ManipulationDelta_1"></Image> 
```

C＃

```
private void imgSanta_ManipulationStarted_1(object sender, ManipulationStartedRoutedEventArgs e)
        {
            txtFeedback.Text = "Manipulation started";
        }

        private void imgSanta_ManipulationDelta_1(object sender, ManipulationDeltaRoutedEventArgs e)
        {                
            var newTop = imgSanta.Margin.Top + e.Delta.Translation.Y;
            var newLeft = imgSanta.Margin.Left + e.Delta.Translation.X;
            imgSanta.Margin = new Thickness(newLeft, newTop, 0, 0);
        } 
```

即使这样，我也不是 100% 满意，但我确实认为它有更好的结果。让我知道你对此有何看法。（虽然这是一篇较旧的帖子，但值得一提）

编辑：我注意到只有当我的图像位于 StackPanel 中时，1:1 运动才有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T14:05:32.397

joaquims 方法是更快的方法......看看这个演示应用程序：[http ://code.msdn.microsoft.com/windowsapps/Drag-and-Drop-a-picture-in-26580dc0](http://code.msdn.microsoft.com/windowsapps/Drag-and-Drop-a-picture-in-26580dc0)

# memory - 如何在单步汇编中将两个值添加到内存中

> ID：13000589
> 
> 赞同：0
> 
> 时间：2012-10-21T18:02:56.570
> 
> 标签：memory, assembly

我想在内存中添加两个值。我必须将 AJ 的字母存储在 100 到 110 的内存位置，并且我必须一步存储两个字母，例如 AH=A Al=B 并增加 Bx +2。帮助:) 这是我的代码，我认为它运行得不好。我在鸸鹋 8086 工作。

```
 MOV AX, data
MOV DS, AX

MOV Ah,40h 

Mov Al,41h

MOV BX, 0100h

AGAIN:  
MOV [BX], Ax
inc Ah

Inc Al

add Bx,2

cmp Ah, Al

JNE AGAIN 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:03:52.193

80x86 是“小端”，这意味着 AL 中的值将存储在最低地址，而 AH 中的值将存储在最高地址。这意味着您的代码将执行“BADCFEHGJI”。

如果 AL 和 AH 开始不同；并且你在循环内增加它们，那么它们在循环结束时将永远不会有相同的值，你的程序将永远运行（或者直到它崩溃，以先到者为准）。

而不是分别递增 AL 和 AH；你可以做`add ax,0x0101`。这行得通（并且可能会比这对增量快两倍），因为您不希望它们中的任何一个溢出。同样的想法也适用于`mov al,40h`and `mov ah,41h`，它可能是一个单一的`mov ax,4140h`（并且可能应该是`mov ax,('B'<< 8) | 'A'`为了更容易理解）。

最后，有一个非常古老的优化称为“循环展开”。这个想法是通过在循环内部做更多的事情来减少循环的开销。在您的情况下，因为循环非常小（并且一切都是不变的），所以很容易“完全展开”并且根本没有任何循环。例如：

```
 mov ax, data
    mov ds, ax
    mov word [0x0100], ('B'<< 8) | 'A'
    mov word [0x0102], ('D'<< 8) | 'C'
    mov word [0x0104], ('F'<< 8) | 'E'
    mov word [0x0106], ('H'<< 8) | 'G'
    mov word [0x0108], ('J'<< 8) | 'I'
    ret 
```

# jquery-mobile - JQM：如何在内部第二页上的“data-rel ='back'”按钮后检测第一页重新加载？

> ID：13000590
> 
> 赞同：2
> 
> 时间：2012-10-21T18:03:02.050
> 
> 标签：jquery-mobile

我正在编写一个 jQuery 移动应用程序。

在我的主页（“第一”）页面中，我使用自定义链接（<a href="...">）链接了一个内部（“第二”）页面。

在我的第一页中，我需要检测用户点击第二页上的“data-rel='back'”按钮（并且第一页将再次显示）。我确实尝试过

```
 $(document).bind('pageinit') 
```

和

```
 $(document).bind('pageshow') 
```

没有成功。请注意，使用

```
 rel="external" 
```

$(document).bind('pageinit') 确实会触发，但这不是我想要的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:32:37.830

尝试使用`$.mobile.urlHistory`（[如何修改 jQuery 移动历史返回按钮行为](https://stackoverflow.com/questions/10262629/how-to-modify-jquery-mobile-history-back-button-behavior)）。它具有`activeIndex`which 是您在历史堆栈中的当前索引，并且`previousIndex`, 当然是您以前的索引。

因此，要通过单击“返回”按钮来检测用户是否来自您的第二页，您可以：

检查它们来自的页面的哈希值：

```
var previous = $.mobile.urlHistory.previousIndex;
var origin = $.mobile.urlHistory.stack[previous].hash; //you may need to do some regex here
if ( origin === "second" ) 
```

或一般来说：

```
// user clicked on 'back' button
if ( $.mobile.urlHistory.activeIndex < $.mobile.urlHistory.previousIndex) 
```

# vb.net - 我的加密器不起作用？

> ID：13000591
> 
> 赞同：0
> 
> 时间：2012-10-21T18:03:12.647
> 
> 标签：vb.net, visual-studio, cryptography, 32bit-64bit, exe

我最近在 VB.NET 2010 Express Edition 中构建了一个 Crypter，我打开了 .exe GUI，并选择了一个可执行文件进行加密，它被加密了。我打开了 Crypted File 并收到一条错误消息：

“此文件的版本与您运行的 Windows 版本不兼容。请检查您计算机的系统信息，看看您是否需要 x86（32 位）或 x64（64 位）版本的程序。”

有什么方法可以将我的代码转换为 64 位？如果您需要查看我的代码，请在下面的评论中说明。谢谢大家，感谢所有帮助！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:42:15.353

您可以做的是在加密文件后将加密文件的类型重命名为其他名称。例如，“ *whatever.exe* ”可以重命名为“ *whatever.exe.encryptedfile* ”。如果您随后将文件类型“ *encryptedfile* ”与您的应用程序相关联，则每当有人尝试打开该类型的文件时，它将自动启动。

# matlab - 在 X 上按下鼠标按钮时关闭图形窗口

> ID：13000592
> 
> 赞同：0
> 
> 时间：2012-10-21T18:03:21.743
> 
> 标签：matlab, user-interface, mouseevent, mouse

我有一个运行几分钟的 GUI。在这个 GUI 中，我有使用以下线条连续显示的图像 -

```
 axes('Position',[.3 .25 .3 .5]);
     image(imcell{1,2}); 
```

问题是，即使我使用鼠标通过按左上边缘的 X 来关闭窗口，也会打开一个新窗口，显示这些图像直到结束。

那么如何在不打开新窗口的情况下使 GUI 无法工作（关闭它）。

我猜它类似于“windowbuttonpressfcn”或“buttonpressfcn”，但是-

1.  我不认为按下 x 被认为是按下，因为它在窗外..
2.  我尝试使用 get(hobject,'currentpoint') 但它不起作用，我认为这不是方法..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:58:17.753

调用`axes`会弹出一个新窗口，因此如果您继续在代码中打开新数字，则关闭它将无济于事。您必须检查窗口/图形是否已关闭并在这种情况下跳过绘图，例如

```
% create the figure somewhere in the code
h=figure(1);  

% ... 

% your image processing loop
while(do_work)
    if ishandle(h)
       axes('Position',[.3 .25 .3 .5]);
       image(imcell{1,2});
    end
end 
```

如果您现在关闭图形窗口，`ishandle(h)`将返回 0 并且不会显示绘图。

当图形关闭时，将`DeleteFcn`触发事件。如果您想在关闭图形时执行自定义工作，您应该将事件处理程序连接到您的图形句柄：

```
set(h, 'DeleteFcn', @my_close_function) 
```

在您的关闭函数中，您可以进行清理工作，包括停止程序中正在进行的任何进程。

# php - 处理上传的不同尺寸的图片

> ID：13000595
> 
> 赞同：0
> 
> 时间：2012-10-21T18:03:37.663
> 
> 标签：php, gd

我希望能够允许用户上传图片。使用 GD 库，我将为画廊创建/存储三个不同尺寸的图像并显示产品。问题是为上传不同尺寸图像的人缩放尺寸。例如，一张 4000 x 3000 的图像将缩放到我想要的 240 x 180，但是我注意到有些用户的图片尺寸不同，无法缩放到此，例如 3008 x 2000 和 3837 x 2551。

有人可以指导我处理这些不同图像尺寸的最佳方法，以便它们可以缩放到通用尺寸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:13:32.747

您必须设置最终尺寸，例如：300x300 像素

然后你将这两个因素除以原始尺寸，例如

```
factor1=300/4000 <- Width
factor2=300/3000 <- Heigth 
```

现在您按较小的因子缩放图像。您现在应该有一个高度或宽度为 300 像素的图像。现在你切割所有大于最终尺寸的东西。完成的！

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:18:48.333

我认为您正在寻找这样的功能：

```
function resizePreservingAspectRatio($img, $targetWidth, $targetHeight)
{
    $srcWidth = imagesx($img);
    $srcHeight = imagesy($img);

    // Determine new width / height preserving aspect ratio
    $srcRatio = $srcWidth / $srcHeight;
    $targetRatio = $targetWidth / $targetHeight;
    if (($srcWidth <= $targetWidth) && ($srcHeight <= $targetHeight))
    {
        $imgTargetWidth = $srcWidth;
        $imgTargetHeight = $srcHeight;
    }
    else if ($targetRatio > $srcRatio)
    {
        $imgTargetWidth = (int) ($targetHeight * $srcRatio);
        $imgTargetHeight = $targetHeight;
    }
    else
    {
        $imgTargetWidth = $targetWidth;
        $imgTargetHeight = (int) ($targetWidth / $srcRatio);
    }

    // Creating new image with desired size
    $targetImg = imagecreatetruecolor($targetWidth, $targetHeight);

    // Add transparency if your reduced image does not fit with the new size
    $targetTransparent = imagecolorallocate($targetImg, 255, 0, 255);
    imagefill($targetImg, 0, 0, $targetTransparent);
    imagecolortransparent($targetImg, $targetTransparent);

    // Copies image, centered to the new one (if it does not fit to it)
    imagecopyresampled(
       $targetImg, $img, ($targetWidth - $imgTargetWidth) / 2, // centered
       ($targetHeight - $imgTargetHeight) / 2, // centered
       0, 0, $imgTargetWidth, $imgTargetHeight, $srcWidth, $srcHeight
    );

    return $targetImg;
} 
```

用法示例：

```
$gd = imagecreatefromjpeg("images/image5.jpg");
$resized = resizePreservingAspectRatio($gd, 100, 100);
header("Content-type: image/png");
imagepng($resized); 
```

这个变换这样的图像：

![在此处输入图像描述](../Images/21152100621c0f79e06cfa61a1e1b33f.png)

到那个：

![在此处输入图像描述](../Images/46c939a7574c5460f7b1c6192a053abd.png)

# r - R中的多重插补：小鼠与mi包

> ID：13000602
> 
> 赞同：4
> 
> 时间：2012-10-21T18:04:17.390
> 
> 标签：r

这两个包用于多重插补的优缺点是什么？

这是我提出这个问题的动机：`mi`到目前为止我已经使用了这个包，但我无法收敛。我的数据集大约是 10,231x28。四个变量有 18-20% 的缺失值，一个有 14%，其余的在 5% 左右（或更低）。即使在服务器上运行 18 小时后也没有收敛。现在我想知道是否`mice`可能会更好。

# android - ACRA 可以用于图书馆项目吗？

> ID：13000611
> 
> 赞同：8
> 
> 时间：2012-10-21T18:05:41.657
> 
> 标签：android, init, illegalstateexception, acra

ACRA 本身因一个奇怪的问题而崩溃：

`IllegalStateException: Cannot access ErrorReporter before ACRA#init`

我有一个运行良好的 ACRA 4.3.0 应用程序。我将整个应用程序更改为一个库，所以我可以做一些小的变体。我创建了一个新项目，除了清单和指向这个新库的链接之外，它完全是空白的。对于尝试此操作的任何其他人，您必须在 AcraApplication.java 中删除“resToastText = R.string.crash_toast_text”行并在 Acra.init(this); 下方添加新行

`ACRA.getConfig().setResToastText(R.string.crash_toast_text);`

该项目构建良好，在调试中我已经确认 ACRA.init(this); 在我的主程序代码之前和错误发生之前运行。在主程序中，我们设置了一些自定义数据：

`ACRA.getErrorReporter().putCustomData("Orientation", "L");`

它会导致崩溃（或者更准确地说，ACRA 本身会导致错误）并且不会生成 ACRA 报告。

任何想法接下来要尝试什么或指向哪里看？可能是 ACRA 与库不兼容，如果是这种情况，我可以将其拉出来以不同的方式处理，但这有点违背了库的目的。

* * *

解决方案：不要添加下面的行，而是`Acra.init(this);`在 init 行之前添加这三行：

```
ACRAConfiguration config = ACRA.getNewDefaultConfig(this); 
config.setResToastText(R.string.crash_toast_text);
ACRA.setConfig(config);

ACRA.init(this); 
```

请注意，这只适用于 v4.3.0 及更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T19:26:34.893

我有同样的问题，它是由 proguard 混淆引起的。

解决方案是将以下自定义添加到 proguard.cfg 文件（取自 ACRA wiki page [here](https://github.com/ACRA/acra/wiki/Proguard)）：

请注意， ACRA.init() 应保留在开头：

```
@Override
  public void onCreate() {
    ACRA.init(this);
    ACRA.getErrorReporter().setReportSender(new MySender());

    super.onCreate();
  } 
```

proguard.cfg：

```
#ACRA specifics
# we need line numbers in our stack traces otherwise they are pretty useless
-renamesourcefileattribute SourceFile
-keepattributes SourceFile,LineNumberTable

# ACRA needs "annotations" so add this... 
-keepattributes *Annotation*

# keep this class so that logging will show 'ACRA' and not a obfuscated name like 'a'.
# Note: if you are removing log messages elsewhere in this file then this isn't necessary
-keep class org.acra.ACRA {
    *;
}

# keep this around for some enums that ACRA needs
-keep class org.acra.ReportingInteractionMode {
    *;
}

-keepnames class org.acra.sender.HttpSender$** {
    *;
}

-keepnames class org.acra.ReportField {
    *;
}

# keep this otherwise it is removed by ProGuard
-keep public class org.acra.ErrorReporter
{
    public void addCustomData(java.lang.String,java.lang.String);
    public void putCustomData(java.lang.String,java.lang.String);
    public void removeCustomData(java.lang.String);
}

# keep this otherwise it is removed by ProGuard
-keep public class org.acra.ErrorReporter
{
    public void handleSilentException(java.lang.Throwable);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-28T06:00:12.180

确保您已在清单文件中添加

```
<application
    android:name="com.test.MyApp" 
```

并且您有执行以下操作的应用程序类

```
import org.acra.ACRA;
import org.acra.ReportField;
import org.acra.ReportingInteractionMode;
import org.acra.annotation.ReportsCrashes;

import android.app.Application;

@ReportsCrashes(formKey = "", mailTo = "your_email_address", customReportContent = {
            ReportField.APP_VERSION_CODE, ReportField.APP_VERSION_NAME,
            ReportField.ANDROID_VERSION, ReportField.PHONE_MODEL,
            ReportField.CUSTOM_DATA, ReportField.STACK_TRACE, ReportField.LOGCAT }, mode = ReportingInteractionMode.TOAST, resToastText = R.string.crash_toast_text)
    public class MyApp extends Application
    {
        @Override
        public void onCreate()
        {
            super.onCreate();
            ACRA.init(this);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-17T07:29:53.147

**在我的情况下，我错过了@ReportCrashes 配置......希望这会奏效**

```
@ReportsCrashes(
    formUri = "uploadurl",
    reportType = HttpSender.Type.JSON,
    httpMethod = HttpSender.Method.POST,
    formUriBasicAuthLogin = "llenigingeneyederrownlys",
    formUriBasicAuthPassword = "1a35b13f9f54271d23a9aed988451182e5b97211",
    formKey = "", // This is required for backward compatibility but not used
    customReportContent = {
            ReportField.APP_VERSION_CODE,
            ReportField.APP_VERSION_NAME,
            ReportField.ANDROID_VERSION,
            ReportField.PACKAGE_NAME,
            ReportField.REPORT_ID,
            ReportField.BUILD,
            ReportField.STACK_TRACE
    },
    mode = ReportingInteractionMode.TOAST,
    resToastText =R.string.msg

) 
```

# mysql - 带有 IF 语句的 MySQL VIEW

> ID：13000615
> 
> 赞同：4
> 
> 时间：2012-10-21T18:06:10.060
> 
> 标签：mysql, view, if-statement

我在 mMySQL 中有两个表：

```
 - news (news_id, news_titel, news_file_id)
 - files (file_id, file_path, file_name) 
```

我想用这些列创建 MySQL VIEW：

```
- news_view (news_id, news_title, news_file_id, news_file_path) 
```

但是，如果`news_file_id > 0`那时，我得到文件（`file_path + file_name`）的路径，否则`news_file_path`应该是`0`

我该怎么做这个视图？

编辑

但是如果我想再添加两个表怎么办：

```
categories (category_id, category_name)
users(user_id, user_name) 
```

和表`news`改为

```
news (news_id, news_title, news_file_id, news_author_id, news_category_id) 
```

`news_author_id`和 view 应该只显示带有指定,的帖子`news_category_id`，但`news_file_path`就像在原始问题中一样？

谢谢，保罗。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-21T18:12:20.463

试试下面：

```
 CREATE VIEW news_view  
   as (SELECT news_id, news_titel, news_file_id, 
       IF(news_file_id > 0, CONCAT(file_path, file_name), 0)
           AS news_file_path
       FROM news a LEFT JOIN files b
            ON a.news_file_id= b.file_id
         JOIN categories cat
            ON a.news_category_id = cat.category_id
         JOIN users u
            ON a.news_author_id = u.user_id
      ); 
```

根据需要添加`where`条件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-21T18:11:43.843

试试这个，你可以`CASE`根据你的情况使用，

```
CREATE VIEW myView
AS
SELECT  a.news_id, a.news_title,
        a.news_file_id,
        CASE 
            WHEN news_file_id = 0 THEN 0
            ELSE CONCAT(file_path, file_name)
        END news_file_path
FROM    news a
        LEFT JOIN files b
            ON a.news_file_id = b.file_id 
```

# android - Android单例库项目

> ID：13000622
> 
> 赞同：0
> 
> 时间：2012-10-21T18:07:05.597
> 
> 标签：android, android-library

我有一个图书馆项目。该库项目由多个 android 应用程序共享。我将该库项目设为单例（将向所有应用程序提供相同的实例）。这也意味着一旦库项目被实例化，它就应该在内存中。我怎样才能做到这一点？

除了评论链接，代码片段，教程和博客也受到高度赞赏。还让我知道此类用例的良好做法是什么。

注意：当然，“实例化库项目”是指其中的一个/某个类。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:14:18.020

这有点容易。

它应该看起来像这样

```
public static class MyLib
{
     static
     { 
          System.loadLibrary("libMyLib");
     }

public native void methodA();
public native int setterA(int set);

//etc
} 
```

并将其用作静态库。如果你想要一个单例，只需将单例模式添加到其中并将 loadLibrary 调用移动到私有 ctor。

想想你是否真的想实例化这个类或者只是静态地调用它的方法。如果您不需要实例，这与静态块将为您“实例化”它一样好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:20:06.523

我不认为这是可能的，因为每个 android 应用程序都在它自己的虚拟机中运行，

[http://developer.android.com/guide/components/fundamentals.html](http://developer.android.com/guide/components/fundamentals.html)

> 每个进程都有自己的虚拟机 (VM)，因此应用程序的代码与其他应用程序隔离运行。

但我可能错了

罗尔夫

# .htaccess - 在 Magento 中压缩合并的 JS 和 CSS 文件

> ID：13000630
> 
> 赞同：1
> 
> 时间：2012-10-21T18:07:43.167
> 
> 标签：.htaccess, magento

我的 Magento 商店位于 www.collectorsheritage.com。虽然 html 和其他文件正在被 gzip 压缩，但是 MERGED CSS AND JS 文件在发送到浏览器之前没有被 gzip 压缩。由于 html 文件被 gzip 压缩，我猜 gzip 在服务器上启用并且对于域是正确的。S 合并的 css 和 js 文件没有被压缩的问题是什么。

# c# - MDI 子捕获鼠标输入以移动父 MDI 容器

> ID：13000632
> 
> 赞同：1
> 
> 时间：2012-10-21T18:07:54.490
> 
> 标签：c#, winforms, mdi

我有一个适合 1280x800 的 MDI 父容器（表单样式：无）。子表单正好适合，比如在子边缘和父边缘之间可能有 1 或 2 个像素的填充。意味着看起来无缝。

我知道如何使单独的表单可拖动（无论您单击并按住表单的位置）但是是否可以让孩子指示 MDI 父级在屏幕上移动的位置？原因是父项上没有用户可以单击的内容。我们不能将对象添加到父对象（如菜单），因为它会与我们的设计相冲突。

对这个有什么建议吗？目标是用户可以单击并拖动孩子的任何地方，它会移动整个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:48:12.283

试试这个：

```
public partial class Form1 : Form { 
  private const int WM_NCLBUTTONDOWN = 0xA1;
  private const int HT_CAPTION = 0x2;

  [DllImportAttribute("user32.dll")]
  private static extern int SendMessage(IntPtr hWnd, int Msg, int wParam, int lParam);
  [DllImportAttribute("user32.dll")]
  private static extern bool ReleaseCapture();

  public Form1() {
    InitializeComponent();
    Form f = new Form();
    f.MouseDown += ChildForm_MouseDown;
    f.MdiParent = this;
    f.Show();
  }

  void ChildForm_MouseDown(object sender, MouseEventArgs e) {
    if (e.Button == MouseButtons.Left) {
      ReleaseCapture();
      SendMessage(this.Handle, WM_NCLBUTTONDOWN, HT_CAPTION, 0);
    }
  }
} 
```

MDI 父窗体正在监听子窗体的 mousedown 事件，当用户单击子窗体时，它的行为就像用户单击主窗体的标题栏一样。

# haskell - Haskell中非常大的字符串trie

> ID：13000635
> 
> 赞同：6
> 
> 时间：2012-10-21T18:08:04.973
> 
> 标签：haskell, ghc, trie

我需要将几百万个短（长度 < 16）字符串从文件中加载到 Haskell 中的字符串树中，然后执行许多非常快速的查找。在 Haskell 中如何做到这一点的最佳方法是什么？将不胜感激任何策略（包）。

*注意*：一定是trie，因为我需要trie的搜索逻辑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T18:18:16.723

[字节串特里](http://hackage.haskell.org/packages/archive/bytestring-trie/0.1.4/doc/html/Data-Trie.html#t%3aKeyString)。我认为它对于大多数目的来说已经足够快了。

# java - 如何将 Android ImageButton 的位图更改为存储在 R.Layout 中的另一个位图

> ID：13000639
> 
> 赞同：0
> 
> 时间：2012-10-21T18:08:29.220
> 
> 标签：java, android, image, imagebutton

我已通过 HTTPUrlConnection 将 Android ImageButton 的位图设置为来自网络的 jpeg，并希望在用户单击它时更改它。我设置了一个正确触发的 View.onClickListener，但它触发的代码似乎并没有改变按钮上的图像。

我触发 ImageButton1.setBackgroundResource(R.drawable.image1); 但是我想也许背景是已经设置的位图（顾名思义）。我应该怎么做才能设置 R.darwable.image1？

当前代码；

```
View.OnClickListener handlerImgBtnCatCelebrities1 = new View.OnClickListener() 
{
      @Override
      public void onClick(View v) 
      {
        ImageButton1.setBackgroundResource(R.drawable.image1);  
      }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:10:43.293

怎么样，[setImageResource()](http://developer.android.com/reference/android/widget/ImageView.html#setImageResource%28int%29)？

不要对这个方法引用`ImageView`类这一事实感到困惑，因为 an`ImageButton`实际上是 an`ImageView`或换句话说：`ImageButton`类扩展了`ImageView`类。

[图像按钮](http://developer.android.com/reference/android/widget/ImageButton.html)

罗尔夫

# c# - 使用 C# 捕获 MS Word 的 keydown 事件

> ID：13000645
> 
> 赞同：4
> 
> 时间：2012-10-21T18:08:45.623
> 
> 标签：c#, vsto, office-interop

我正在尝试开发一个办公室插件，并且需要使用 C# 在 MS-Word 上捕获 keydown 事件。有人可以给我一个例子来说明我该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T15:43:47.740

这看起来像以下内容的副本：[如何从 Word 2010 插件（用 C# 开发）获取“KeyPress”事件？](https://stackoverflow.com/questions/8120199/how-to-get-the-keypress-event-from-a-word-2010-addin-developed-in-c)

在那个问题中，[这个答案](https://stackoverflow.com/a/8800908/700926)链接到 MSDN 论坛上的一个类似问题：http: [//social.msdn.microsoft.com/Forums/en-US/vsto/thread/7198a84f-4a37-474b-93b5-1e6f38d5d139](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/7198a84f-4a37-474b-93b5-1e6f38d5d139)。在 MSDN 论坛上接受的答案中指出：

> Word API 或 VSTO 中没有任何东西可以接收击键。您可以在 VSTO 项目中使用任何内置功能来获取击键。

但是，MSDN 论坛上接受的答案也谈到了涉及该[`WindowSelectionChange`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.applicationevents4_event.windowselectionchange%28v=office.14%29.aspx)事件的可能解决方案 - 调查一下可能很有用。

# android - 多语言的安卓应用

> ID：13000647
> 
> 赞同：2
> 
> 时间：2012-10-21T18:09:02.463
> 
> 标签：android, multilingual

我正在开发英语和古吉拉特语的 Android 应用程序。用户将选择他想在应用程序本身中使用的语言。这里的问题是 Android 默认不支持古吉拉特语、印地语或其他 Devnagari 语言。假设我通过在 assets 文件夹中设置字体来开发它，但对我来说真正的问题是，如果我想在将来添加更多这样的语言，我不想更改我的应用程序的代码，那么我该如何添加更多语言不改变代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:53:35.793

例如，创建几个`res`您将命名的文件夹，`res-fr`并在此文件夹中存储一个`string.xml`包含所有字符串的文件。通过使用将它们导入您的应用程序

```
getResources().getString(R.string.mystring); 
```

请记住**始终**为每个字符串使用相同的名称，但要更改每个元素的内容：

**英文字符串.xml**

```
<string name="welcome">Welcome to my application</string> 
```

**和法语 string.xml**

```
<string name="welcome">Bienvenue sur ma demande</string> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T11:13:47.473

为此，您需要正确的字体 .ttf 文件。你必须将它复制到你的项目资产文件夹中，而不是通过使用字体你可以修复你自己的字体......

# c# - 是否可以在 C# 中创建没有类的对象？

> ID：13000648
> 
> 赞同：33
> 
> 时间：2012-10-21T18:09:11.043
> 
> 标签：c#, object

在许多语言中，您可以在不创建数据类型的情况下创建对象，并向该对象添加属性。

例如在 JS 或 AS 中：

```
 var myObject = {};
 myObject.myParameter = "hello world"; 
```

或者，您可以使用 C 和 C++ 创建结构。

有可能在 C# 中做到这一点吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-10-21T18:10:51.240

[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)是您要找的。例如 -

```
var v = new { Amount = 108, Message = "Hello" }; 
```

上面的代码将创建一个新`object`的属性`Amount`和`Message`.

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-21T18:13:24.703

是的，`ExpandoObject`在`System.Dynamic`命名空间下。您可以像在其他动态语言中一样动态添加属性

```
dynamic dynObject = new ExpandoObject();
dynObject.someProperty= "Value"; 
```

[http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-21T18:14:01.683

阅读有关[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)

```
dynamic myObject = new ExpandoObject();
myObject.myParameter = "hello world";

Console.WriteLine(myObject.myParameter); 
```

# javascript - CSS精灵有什么好的替代品吗？

> ID：13000650
> 
> 赞同：3
> 
> 时间：2012-10-21T18:09:40.947
> 
> 标签：javascript, css, performance, image, sprite

我正在开发一个需要加载大量图标的应用程序。目前，我正在使用将' 设置为正确 URL 的`<img>`标签。`src`这引发了很多请求。即使缓存设置正确，仍然有很多 HEAD 请求。

我正在寻找一种解决方案，它只会触发最少的请求（最好是 1 个）来接收所有需要的图标。但我不喜欢精灵的概念，因为在这个概念中更改/替换/添加图标更难。

还有其他解决方案吗？

例如，将所有图像base64编码到服务器上的一个文件，将它们发送到浏览器，用JavaScript拆分它们并将base64 src设置为img标签会变慢吗？

有没有人测试这个或不同的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T19:20:32.177

使用 Base64 数据 URI 在 CSS 中内联图像。

```
background-image: url('data:image/png;base64,.......'); 
```

您可以使用自定义 PHP/node.js/... 脚本或使用在线转换器（例如[http://www.greywyvern.com/code/php/binary2base64 ）转换图像](http://www.greywyvern.com/code/php/binary2base64)

或 [https://www.useotools.com/image-to-base64](https://www.useotools.com/image-to-base64)

这会导致只发出一个 HTTP 请求（只有一个用于 CSS 文件），但您无法单独控制每个内联资源的缓存。您需要为 CSS 文件设置缓存 HTTP 标头。

您可以让您的服务器在每次请求 CSS 文件时对图标进行编码，这样您就无需在每次更改图标时手动重新转换它们。一些简单的转换缓存应该包含在服务器端。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T19:12:23.827

就替代方案而言，为什么不尝试使用图标字体呢？这里有一些很好的免费的：

[https://pictonic.co/free](https://pictonic.co/free)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T18:13:12.263

您可以使用 CSS sprite 自动动态创建[CSS sprite](http://code.google.com/p/csssprite/)

确保在您的客户端请求它们之前或在第一个客户端请求之前构建精灵并将它们保存在服务器上，因为如果您在每个请求上生成一个精灵表，则会增加很多不必要的开销。

这使您可以将图像作为单独的文件，并且只需在服务器上执行脚本来创建那些讨厌的精灵表，保持原件完好无损并且使更新它们变得轻而易举。（需要使用 imagemagick 库构建的 PHP）

**注意：**我不确定分发图像 CSS sprite 的效率如何。

# android - 如何使Android Camera Intent返回全尺寸图片

> ID：13000651
> 
> 赞同：6
> 
> 时间：2012-10-21T18:09:40.123
> 
> 标签：android, android-intent, camera, android-camera

我正在使用这篇文章[从相机捕获图像并在活动](https://stackoverflow.com/questions/5991319/capture-image-from-camera-and-display-in-activity)中显示的 jengelsma 代码从相机获取图像。

当我得到返回的图像时，它很小，当我尝试扩展它时，我立即失去了图像质量。

我假设这只是预览大小，但是我无法找到返回大图像，因为我需要它来操作它。

供参考，代码是：

```
package edu.gvsu.cis.masl.camerademo;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class MyCameraActivity extends Activity {
private static final int CAMERA_REQUEST = 1888; 
private ImageView imageView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    this.imageView = (ImageView)this.findViewById(R.id.imageView1);
    Button photoButton = (Button) this.findViewById(R.id.button1);
    photoButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
            startActivityForResult(cameraIntent, CAMERA_REQUEST); 
        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
    if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {  
        Bitmap photo = (Bitmap) data.getExtras().get("data"); 
        imageView.setImageBitmap(photo);
    }  
} 
} 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-21T18:23:55.650

您必须做一些额外的工作才能获得全尺寸图片，它不会将其传递到 Intent 中，而是将其存储在文件中。

要为此启动相机，请在您的 Intent 中添加一个额外的内容：

```
Intent intent = new Intent( MediaStore.ACTION_IMAGE_CAPTURE );

fileUri = getOutputMediaFileUri();
intent.putExtra( MediaStore.EXTRA_OUTPUT, fileUri ); 
```

getOutputMediaFileUri 看起来像：

```
/** Create a file Uri for saving an image or video */
private static Uri getOutputMediaFileUri(){
  return Uri.fromFile(getOutputMediaFile());
}

/** Create a File for saving an image or video */
private static File getOutputMediaFile(){
    // To be safe, you should check that the SDCard is mounted
    // using Environment.getExternalStorageState() before doing this.

    File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
          Environment.DIRECTORY_PICTURES), "MyCameraApp");
    // This location works best if you want the created images to be shared
    // between applications and persist after your app has been uninstalled.

    // Create the storage directory if it does not exist
    if (! mediaStorageDir.exists()){
        if (! mediaStorageDir.mkdirs()){
            Log.d("MyCameraApp", "failed to create directory");
            return null;
        }
    }

    // Create a media file name
    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    File mediaFile = new File(mediaStorageDir.getPath() + File.separator +
        "IMG_"+ timeStamp + ".jpg");

    return mediaFile;
} 
```

当然，您可以修改创建文件的方法，但是您喜欢修改命名。

`getData()`然后在您的 onActivityResult 中，您只需调用Intent即可获取图片的 URI 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-08T12:26:54.613

相机的开始意图

```
private void takeFromCamera() {
        Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        if (takePictureIntent.resolveActivity(getActivity().getPackageManager()) != null) {
            File exportDir = new File(Environment.getExternalStorageDirectory(), "TempFolder");
            if (!exportDir.exists()) {
                exportDir.mkdirs();
            }

            String fileName = "/" + UUID.randomUUID().toString().replaceAll("-", "") + ".jpg";
            mTempCameraPhotoFile = new File(exportDir,fileName);
            Log.d(LOG_TAG, fileName);
            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(mTempCameraPhotoFile));
            startActivityForResult(takePictureIntent, REQUEST_CAMERA);
        }
    } 
```

在 onActivityResult 中捕获结果

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (resultCode == Activity.RESULT_OK) {

        if  (requestCode == REQUEST_CAMERA) {

            if (requestCode == REQUEST_CAMERA) {
                String filePath = mTempCameraPhotoFile.getPath();
                Log.d(LOG_TAG, filePath);

                /*
                // extracted file path can be load into imageview for example with Picasso loader
                Uri uri = Uri.fromFile(new File(mReportImageList.get(position).getUrl()));
                Picasso.with(mContext)
                        .load(uri)
                        .fit()
                        .centerCrop()
                        .into(ivPhoto);*/

            }
        }
    }
} 
```

在清单中

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-feature android:name="android.hardware.camera" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# objective-c - 为 HTTP 请求添加错误和成功处理程序

> ID：13000652
> 
> 赞同：1
> 
> 时间：2012-10-21T18:09:53.680
> 
> 标签：objective-c, ios, cocoa-touch, asihttprequest

我有一个登录页面，它向 URL 发出请求并将变量或用户名和密码发布到 URL，然后在完成后将我带到一个新的视图控制器。

当我输入正确的用户名和密码时，请求有效，因为我可以在日志中复制 html，它会显示我提出请求的个人资料。

如果我输入了错误的详细信息并复制了 html，我会从日志或控制台获取登录页面 html。

当输入正确的详细信息时，我如何仅将用户引导到新视图控制器或模态选项卡栏。

如果输入了错误的详细信息，我想显示错误。

非常感谢

**登录表视图控制器.h**

```
#import <UIKit/UIKit.h>

@interface LoginTableViewController : UITableViewController
{
UITabBarController *tbc;
}

- (void)dismissTabBar;
@property (nonatomic, retain) UITabBarController *tbc;

@end 
```

**登录表视图控制器.m**

```
#import "LoginTableViewController.h"
#import "rootViewController.h"

@interface LoginTableViewController ()
@property (weak, nonatomic) IBOutlet UITextField *UIEmailTextField;
@property (weak, nonatomic) IBOutlet UITextField *UIPasswordTextField;

@end

@implementation LoginTableViewController
@synthesize UIEmailTextField;
@synthesize UIPasswordTextField;
@synthesize tbc;

- (id)initWithStyle:(UITableViewStyle)style
{
self = [super initWithStyle:style];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{

[super viewDidLoad];
}

- (void)viewDidUnload
{
[self setUIEmailTextField:nil];
[self setUIPasswordTextField:nil];
[super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - barButton Outlet

- (IBAction)loginButtonPressed:(UIBarButtonItem *)sender {
NSString *data = [NSString stringWithFormat:@"username=%@&password=%@",UIEmailTextField.text, UIPasswordTextField.text];
NSData *postData = [data dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

// preaparing URL request to send data.

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init] ;
NSString *url = [NSString stringWithFormat:@"https://online.vrmcapital.co.za"];
[request setURL:[NSURL URLWithString:url]];
[request setHTTPMethod:@"POST"];
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:postData];
[request setTimeoutInterval:7.0];

NSURLResponse *response;
NSError *error;

NSData *urlData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSString *str=[[NSString alloc]initWithData:urlData encoding:NSUTF8StringEncoding];

NSLog(@"Login response:%@",str);

NSLog(@"Log In button was pressed!");

NSLog(@"Tab Bar Controller Button Clicked");
UIViewController *blueController = [[UIViewController alloc] initWithNibName:nil bundle:nil];
blueController.view.backgroundColor = [UIColor blueColor];
blueController.title = @"Blue";
blueController.tabBarItem.image = [UIImage imageNamed:@"Gallery.png"];

UIViewController *redController = [[UIViewController alloc] initWithNibName:nil bundle:nil];
redController.view.backgroundColor = [UIColor redColor];

UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button setFrame:CGRectMake(20.0f, 140.0f, 280.0f, 40.0f)];
[button setTitle:@"Done" forState:UIControlStateNormal];
[button addTarget:self action:@selector(dismissTabBar) forControlEvents:UIControlEventTouchUpInside];

[redController.view addSubview:button];
//redController.title = @"Red1";
[redController setTitle:@"Red1" ];
redController.tabBarItem.image = [UIImage imageNamed:@"Gallery.png"];
image:[UIImage imageNamed:@"Gallery.png"];

tbc = [[UITabBarController alloc] initWithNibName:nil bundle:nil];
tbc.viewControllers = [NSArray arrayWithObjects:blueController, redController, nil];
tbc.selectedViewController = redController;
NSLog(@"Selected index = %d of %d", tbc.selectedIndex, [tbc.viewControllers count]);

//[blueController release];
//[redController release];
[self presentViewController:tbc animated:YES completion:nil];

}

- (void)dismissTabBar {
[[self tbc] dismissViewControllerAnimated:YES completion:nil];

}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:29:57.243

每当您提供错误的用户名或密码时，您在请求中点击的服务器端点似乎都会提供 HTML 表单。我假设它提供了不同的 HTML 页面。

无论哪种方式，如果没有适当的 Web 服务，您将不得不处理 HTML 解析。您希望 Web 开发人员不要决定以破坏您的解析器的方式更改页面...同样，如果没有适当的 Web 服务，您将不得不依靠 HTML 页面解析来区分成功和不成功的请求。

顺便说一句，你真的想`NSURLConnection`在主线程上使用同步 API 吗？如果网络连接不好，你的主线程将被阻塞。

# actionscript-3 - Flex：数据绑定到数字步进器不起作用

> ID：13000653
> 
> 赞同：0
> 
> 时间：2012-10-21T18:10:00.133
> 
> 标签：actionscript-3, apache-flex, flex4, flash-builder, flex4.6

我试图让两种方式的数据绑定与数字步进器一起工作。它从值绑定到显示 OK，但是当我更新 GUI 时，模型值没有改变。我怎样才能解决这个问题？

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
 [Bindable]
        private var val:Number = 2;

    ]]>
</fx:Script>
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:NumericStepper x="30" y="27" value="{val}"/>
<s:Button x="30" y="58" label="Apply" click="trace(val);"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:33:33.943

要获得双向绑定，您需要不同的语法：

```
<s:NumericStepper x="30" y="27" value="@{val}"/> 
```

注意`@`左大括号前的标志。否则只是单向

# javascript - 没有数据打印出来

> ID：13000657
> 
> 赞同：-1
> 
> 时间：2012-10-21T18:10:59.873
> 
> 标签：javascript, html

我在 JavaScript 中有一些代码可以存储一些浮点数，但我似乎无法让它打印出正确的数据，这是我的代码片段，这是我遇到的问题。

```
function Vector3(x,y,z){
    this.x = x; this.y = y; this.z = z;
}

function Edge(vec1, vec2){
    var vector1 = new Vector3(vec1.x,vec1.y,vec1.z);
    document.write(vector1.x+ "," +vector1.y +"," + vector1.z+"<br>");
var vector2 = new Vector3(vec2.x,vec2.y,vec2.z);
}

var sqrVer = new Array();
sqrVer[1] = new Vector3(-1.0,    1.0,    1.0);
sqrVer[2] = new Vector3( 1.0,    1.0,    1.0);
sqrVer[3] = new Vector3(-1.0,   -1.0,    1.0);
sqrVer[4] = new Vector3( 1.0,   -1.0,    1.0);
sqrVer[5] = new Vector3( 1.0,   -1.0,   -1.0);
sqrVer[6] = new Vector3( 1.0,    1.0,   -1.0);
sqrVer[7] = new Vector3(-1.0,    1.0,   -1.0);
sqrVer[8] = new Vector3(-1.0,   -1.0,   -1.0);

var sqrEdge = new Array();
sqrEdge[1] = new Edge(sqrVer[1], sqrVer[2]);

document.write(sqrVer[1].x + "<br>");
document.write(sqrEdge[1].vector1.x + "<br>"); 
```

现在打印出来的是这个

```
-1.0, 1.0, 1.0,
-1.0 
```

但是对于到 sqrEdge 并尝试打印出 x 的行，没有任何内容写入屏幕？？？为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:16:13.737

您的 Edge 函数实际上并没有创建和返回任何内容。这会导致您的程序在打印之前崩溃，因为它返回一个空对象（由于“new”），{}.vector1 = undefined 并且 {}.vector1.x 会引发错误。

要解决此问题，请尝试：

```
function Edge(vec1, vec2){
    this.vector1 = new Vector3(vec1.x,vec1.y,vec1.z);
    this.vector2 = new Vector3(vec2.x,vec2.y,vec2.z);
} 
```

我的建议是学习如何使用其中一个 javascript 控制台（chrome 或 safari 中的“开发人员工具”，或 firefox 中的 firebug）。

这将在您遇到错误时向您显示，您还可以使用 console.log() 而不是 document.write() 这将让您自己发送消息而无需将它们写入页面。

# .net - Visual Basic：将按钮单击更改为不断更新的事件

> ID：13000659
> 
> 赞同：0
> 
> 时间：2012-10-21T18:11:14.097
> 
> 标签：.net, vb.net, timer, activex, updates

我是 Visual Basic 的新手（我正在学习它来为客户构建项目的一部分）。下面是使用 Sterling ActiveX API 库的示例代码。基本上，该程序与名为 Sterling Trader 的股票交易软件一起运行，当按下按钮时，文本框会更新为指定股票的当前股票报价（在本例中为 IBM）：

```
Option Strict Off
Option Explicit On

Public Class Form1
Inherits System.Windows.Forms.Form

Dim stiEvents As New SterlingLib.STIEvents
Dim stiQuote As New SterlingLib.STIQuote

Delegate Sub TextBoxUpdater(ByVal byre As TextBox, ByRef str As Object)

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    AddHandler stiQuote.OnSTIQuoteSnap, AddressOf OnSTIQuoteSnap
    AddHandler stiQuote.OnSTIQuoteUpdate, AddressOf OnSTIQuoteUpdate
End Sub

Private Sub OnSTIQuoteSnap(ByRef structQuoteSnap As SterlingLib.structSTIQuoteSnap)

    UpdateTextBoxLast(TextBox1, structQuoteSnap.fLastPrice)

End Sub

Private Sub OnSTIQuoteUpdate(ByRef structQuoteUpdate As SterlingLib.structSTIQuoteUpdate)

    If structQuoteUpdate.bLastPrice Then
        UpdateTextBoxLast(TextBox1, structQuoteUpdate.fLastPrice)
    End If

End Sub

Private Sub UpdateTextBoxLast(ByVal lb As TextBox, ByRef str As Object)
    If (lb.InvokeRequired) Then
        Me.BeginInvoke(New TextBoxUpdater(AddressOf UpdateTextBoxLast), lb, str)
    Else
        TextBox1.Text = str

    End If

End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    stiQuote.RegisterQuote("IBM", "*")
End Sub

End Class 
```

Sterling Activex API 指南链接：http: [//www.sterlingtrader.com/documents/Sterling_ActiveX_API_Guide.pdf](http://www.sterlingtrader.com/documents/Sterling_ActiveX_API_Guide.pdf)

我想做这个代码的两件事：

1.  我想做的是使文本框不断更新自己的新当前股票报价，而无需按下按钮。我猜你可以用计时器来做到这一点，但我不完全确定要修改代码的哪一部分，也不熟悉在 Visual Basic 中执行此操作的方法。

2.  我想创建另一个文本框/按钮，让您通过输入并单击按钮来更改您要提取报价的股票。目前，代码使用的是 IBM 股票；这是由这行代码的“IBM”部分决定的： stiQuote.RegisterQuote("IBM", "*")

我该怎么做这两件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:43:42.093

这是一个计时器和程序化按钮单击的简单示例。

```
Imports System.Windows.Forms ' one of several namespaces that include timers

Public Class MyForm

    Private MyTimer As Timer

    Private Sub MyForm_Load(sender As Object, e As System.EventArgs) Handles Me.Load
        MyTimer = New Timer
        MyTimer.Interval = 1000 ' 1 second
        MyTimer.Enabled = True
        AddHandler MyTimer.Tick, AddressOf HandleTimer
    End Sub

    Private Sub HandleTimer()
        Button1.PerformClick()
    End Sub

    Private Sub Button1_Click(sender As Object, e As System.EventArgs) Handles     Button1.Click
        TextBox1.Text = DateTime.Now.ToString("MM:ss")  
    End Sub

    Private Sub MyForm_FormClosed(sender As Object, e As System.Windows.Forms.FormClosedEventArgs) Handles Me.FormClosed
        MyTimer.Dispose()
        MyTimer = Nothing
    End Sub

End Class 
```

# cordova - 正确的 PhoneGap - Cordova 多页方法

> ID：13000661
> 
> 赞同：1
> 
> 时间：2012-10-21T18:11:32.687
> 
> 标签：cordova, structure

是否有任何重要的理由使用其中包含所有 html 的页面和具有属性集的 div 元素而不是[PhoneGap](http://www.phonegap.com)`data-role='page'`中的多个页面文件？

我似乎在辅助页面（即链接自`index.html`）上的代码存在一些问题，这些代码在制作主加载文件时又可以正常工作。

我问这个问题的一个原因是显然无法轻松导入可重用代码，例如所有页面通用的包含所有包含和 js 的公共标头，因此无法遵守[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)原则。

包含页面所有部分的所有内容的大页面似乎有点矫枉过正，所以我假设在从一个页面转换到另一个页面时导入额外的 js 文件是合适的，或者因为它们重新从本地文件系统加载，加载时间足够快，可以完成一次“大负载”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T07:42:01.893

您可以做的也许是拥有一个`index.html`包含所有页面准系统 HTML 的文件，如下所示：

```
<!-- Start of second page -->
<div data-role="page" id="second">
</div><!-- /page -->
<!-- Start of third page -->
<div data-role="page" id="third">
</div><!-- /page --> 
```

因此，每当客户端加载带有哈希 url 的页面时`#third`，它将被转移到第三个页面。也许您可以触发一个 AJAX 请求，该请求在页面加载到 DOM 后构建页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T20:05:56.040

例如，为所有页面使用一个 html 文件的充分理由是能够使用某些模板引擎。
您可以在开始时创建和初始化所有页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T20:24:13.080

您需要将每个页面的主要内容保存在单独的 html 文件中。然后，您可以使用 jQuery Mobile ajax 调用来拉入这些模板文件中的每一个。查看[http://jquerymobile.com/demos/1.0a4.1/docs/pages/docs-navmodel.html](http://jquerymobile.com/demos/1.0a4.1/docs/pages/docs-navmodel.html)

# sql - 如何将单个字段转换为 SQLite 日期以计算工作日？

> ID：13000663
> 
> 赞同：1
> 
> 时间：2012-10-21T18:11:37.933
> 
> 标签：sql, sqlite

有一个下表：

```
CREATE TABLE `foo`(
  `year` INT NOT NULL,
  `month` INT NOT NULL,
  `day` INT NOT NULL,
  `hour` INT NOT NULL,
  `minute` INT NOT NULL,
  `value` INT NOT NULL,
  PRIMARY KEY(`year`, `month`, `day`, `hour`, `minute`)
); 
```

如何在 SQLite 中选择所有星期一的记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:28:32.937

1.  将日期转换为[SQLite 可以理解](http://www.sqlite.org/lang_datefunc.html)的格式，这需要用零填充到所需的四/两位字段宽度才能得到`YYYY-MM-DD`；
2.  然后只需使用`strftime('%w')`获取工作日：

```
SELECT *
FROM foo
WHERE strftime('%w',
               substr('000' || year,  -4) || '-' ||
               substr('0'   || month, -2) || '-' ||
               substr('0'   || day,   -2)           ) = '1' 
```

# html - 边框底部，环绕文本

> ID：13000671
> 
> 赞同：0
> 
> 时间：2012-10-21T18:12:11.987
> 
> 标签：html, css, border, word-wrap

我在用 css 包装时遇到问题。我需要红色边框底部以单词“somewordhere”开头..此处不允许使用跨度/其他 html 方法的解决方案，因为文本是从 CMS 生成的……我需要什么-> [http://i.imgur。 com/JWd1X.png](http://i.imgur.com/JWd1X.png)

第二排 Intouchables 还可以

谢谢

[http://jsfiddle.net/XGRwy/384/](http://jsfiddle.net/XGRwy/384/)

```
ul { text-align:center; padding: 10px; border: 2px solid green}
li { margin: 10px 0 10px; display: inline-block; border-bottom: 2px solid red;}
li a {text-decoration:none; border-left: 2px solid orange; }

<ul style="width: 150px">
   <li>
      <a href="http://some">BEGIN........END somewordhere</a>
   </li>
   <li>
      <a href="http://some">Intouchables</a>
   </li>    
</ul> 
```

​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:42:05.097

我偏离了 Fabricio 提出的您所说的应该是什么样子的图像。

我删除了左边框调用并将其放在“li”上，然后我将“li”设置为 100% 的宽度。

```
ul { text-align:center; padding: 10px; border: 2px solid green; width: 150px; }
li { width: 100%; margin: 10px 0 10px; border-bottom: 2px solid red; border-left: 2px solid brown;}
li a {text-decoration:none;  } 
```

这是[jsFiddle](http://jsfiddle.net/XGRwy/389/)工作示例。

# java - Netbeans 实时/实时更新

> ID：13000672
> 
> 赞同：1
> 
> 时间：2012-10-21T18:12:13.147
> 
> 标签：java, netbeans

我正在尝试像这里一样使 NetBeans IDE 7.0.1 实时编译：[http](http://www.youtube.com/watch?feature=player_detailpage&v=dwn_UrItwfw#t=239s)
://www.youtube.com/watch?feature=player_detailpage&v=dwn_UrItwfw#t= 239s 我尝试在调试模式下运行它，类型为 ctrl + s如评论。
但这不起作用，他（NetBeans）不会实时更新代码。

如何让 netbeans 实时更新代码（在应用程序运行时）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T20:59:41.547

1.  在调试模式下运行

2.  做出改变

3.  保存文件

4.  从调试菜单或工具栏中按“应用代码更改”。

注意：在首选项中，您可以将此选项设置为自动应用代码更改。

确保您的代码将通过该行（例如，更改初始化代码意味着您需要重新初始化对象）。

# c++ - 在wireshark中查看时来自TFTP客户端的未知操作码

> ID：13000674
> 
> 赞同：1
> 
> 时间：2012-10-21T18:12:24.440
> 
> 标签：c++, winsock2, tftp

大家晚上好。

我在为使用 #include 的 C++ 分配创建 TFTP 客户端时遇到问题

我正在发送 char 缓冲区：

> 缓冲区={'0','2','f','i','l','e','n','a','m','e','0','o' ,'c','t','e','t','0'};

使用代码：

> sendto(sock,buffer,strlen(buffer), 0, (sockaddr *) &serverAddr, sizeof(sockaddr));

但是当我在 WireShark 中查看此传输时，当我查看数据包的操作码部分时，它会显示“操作码：未知 (12338)”。即使它已经从字符串中选择了操作码

![在此处输入图像描述](../Images/6f4fb11eb6241599f29ad53a60fc6042.png)

我完全被困住了，任何帮助将不胜感激。我很确定如果我可以发送和接收消息，我可以很容易地处理其余的。

**只是在这里丢下我所做的，但标记的答案基本上是它** 使用了来自 winsock2 的 BYTE（不知道我是否需要，但安全总比抱歉好）

> 缓冲区={(BYTE)0,(BYTE)2,'f','i','l','e','n','a','m','e',(BYTE)0, 'o','c','t','e','t',(BYTE)0};

和

> sendto(sock,buffer,sizeof(buffer), 0, (sockaddr *) &serverAddr, sizeof(sockaddr));

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:15:34.810

不是`strlen(buffer)`但`sizeof(buffer)`...

strlen 在第一次出现`'\0'`- 时停止计算字符，因此它为缓冲区数组返回未指定的值，因为缓冲区`'\0'`中不存在。

如果您想使用操作码启动缓冲区，`02`则将其作为整数而不是其数字表示形式传递：

```
buffer={0,2,'f','i','l','e','n','a','m','e','0','o','c','t','e','t','0'};
//      ^ ^  simple numbers - not characters - not sure about rest of your buffer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T18:16:08.423

十进制的 12338 是 0x30，十六进制的 0x32 对应于缓冲区中的“0”和“2”。

您使用 ascii 字符，但您需要使用十进制/整数，方法是将它们设置为`(char) 0x00`缓冲区`(char) 0x02`。

# jquery - 从同一事件处理程序中触发 jquery 事件

> ID：13000675
> 
> 赞同：3
> 
> 时间：2012-10-21T18:12:30.700
> 
> 标签：jquery, ajax, zend-framework, validation

我正在使用 Ajax 验证 Zend 表单，并提出了以下建议：

```
$('#some-dialog-i-have form').live('submit', function(e) {

    e.preventDefault();

    MyClass.Form.Validate($(this), function() {
        // I wish to submit the form from this callback function
        $(this).trigger('submit');

    });
}); 
```

MyClass.Form.Validate 获取表单并执行 XHR 请求以检查表单是否有效。

我的问题是，如果表单有效，我希望继续提交，但如果不是，则停止一切。从这个处理程序中触发提交显然会导致递归问题；最好的方法是什么？

```
Form: {
    Validate: function(form, onSuccess) {

        $.ajax({
            type: 'POST',
            dataType: 'json',
            url: '/ajax/form/validate',
            data: form.serialize() + '&f=' + form.data('id')

        }).done(function(errorMessages) {
            if(errorMessages.count > 0) {
                // Snip (display errors)
                return false;
            }
        // Callback
            onSuccess();
        });
    }
} 
```

*   我已经完成了 stopPropagation，但这对实时处理程序没有影响
*   我知道 live() 处理程序已被弃用，我暂时忽略了更改它
*   我考虑过简单地通过 Ajax 发布表单，但不确定我是否想这样做

可能是一个简单的解决方案，但我今天的头不在正确的位置。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:18:23.317

想到的一件事是有一个变量来说明表单是否作为 Ajax 检查的结果有效。

如果标志为假，则运行 Ajax 验证。一旦 Ajax 验证返回有效，将标志设置为 true，然后当触发提交处理程序时，它会看到标志并绕过检查并直接提交表单。

请记住，提交时表单仍应在服务器上进行验证，以防有人禁用 JS 或机器人尝试直接发布到服务器并跳过验证步骤。

希望有帮助。

# java - Java中的多线程死锁

> ID：13000679
> 
> 赞同：1
> 
> 时间：2012-10-21T18:13:00.220
> 
> 标签：java, multithreading

拜托，有人能解释一下为什么这段代码是死锁的。看来它应该可以正常工作。请详细说明。谢谢。

```
public class H extends Thread {
    String info = "";
    public H (String info) {
        this.info = info;
    }

    public synchronized void run() {
        try {
            while (true) {
                System.out.println(info);
                notify();
                wait();
            }
        } catch (Exception e) {}

    }
    public static void main(String[] args) {
          new H("0").start();
          new H("1").start();
    } 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T18:17:44.693

每个线程同步`this`（通过`synchronized`方法上的关键字），这对于两个线程对象中的每一个都是不同的。他们每个人都打电话`notify`，`wait`但他们不互动，因为`this`是不同的。因此，在第一次迭代中，它们都会`wait`永远调用和阻塞，因为没有人可以唤醒它们。

以下是我为使代码按预期工作而进行的一些更改。注意允许线程通信的共享静态字段：

```
public class Test extends Thread {
    String info = "";
    static final Object signal = new Object();
    static volatile String current = null;

    public Test (String info) {
        this.info = info;
    }

    public void run() {
        try {
            synchronized(signal) {
                while (true) {                                  
                    while(current.equals(info))
                        signal.wait();
                    System.out.println(info);
                    current = info;
                    signal.notify();
                }
            }
        } catch (Exception e) {}

    }

    public static void main(String[] args) {
        Test.current = "0";
        new Test("0").start();
        new Test("1").start();
    }
} 
```

我想对您的原始代码做一些其他注释：

*   您应该尝试实现`Runnable`而不是扩展`Thread`. 这样可以为您提供更大的灵活性。
*   不要吞下异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T18:18:18.247

`notify`和在不同的对象`wait`上调用`Thread`，所以当一个线程到达时`wait`，另一个线程不会通知它，而是每个线程通知自己。

流程差不多（可能有交错）：

1.  线程A开始
2.  ThreadA 通知正在等待 ThreadA 锁定的对象
3.  ThreadA 等待 ThreadA 的锁
4.  线程 B 启动
5.  ThreadB 通知正在等待 ThreadB 锁定的对象
6.  ThreadB 等待 ThreadB 的锁

最终状态 - 两个线程都在等待，没有人通知它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T18:18:16.563

notify() 只唤醒当前正在等待对象的线程。当您调用 notify() 时，在这两种情况下都没有线程在等待。然后，当你调用 wait 时，你永远不会有任何 notify() 的代码。基本上，你不能从同一个线程通知一个线程，因为它必须在等待。等待一段时间后尝试从主线程通知他们，看看会发生什么。

```
public class H extends Thread {
    String info = "";
    public H (String info) {
        this.info = info;
    }

    public synchronized void run() {
        try {
            while (true) {
                System.out.println(info);
                wait();
            }
        } catch (Exception e) {}

    }
    public static void main(String[] args) throws Exception {
          H a = new H("0").start();
          H b = new H("1").start();
          Thread.sleep(1000);
          a.notify();
          b.notify();
    }
} 
```

请注意，两个线程都不会通知另一个线程。等待一个对象只等待它，而不是整个类。

TL；DR： notify() 没有做任何事情， wait() 造成死锁。

# html - 如何让 SVG 图像从 HTML 文档继承颜色？

> ID：13000682
> 
> 赞同：84
> 
> 时间：2012-10-21T18:13:23.553
> 
> 标签：html, css, colors, svg

我有一堆 SVG 图像，我想将它们嵌入到 HTML 页面中，该页面采用 CSS 样式。

我希望能够让 SVG 中的元素的颜色继承自父 HTML 元素的颜色属性。

我尝试设置`style="stroke: none; fill: inherit"`，但这不起作用。

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2012-10-21T21:19:21.863

HTML 使用颜色，而 SVG 使用填充和描边。您可以通过使用值来获取填充或描边以使用颜色 CSS 属性的值，`currentColor`例如`fill="currentColor"`

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2018-06-26T07:33:25.203

您可以使用`fill="currentColor"`.

```
<a href="#" style="color:red">
<svg fill="currentColor"> ...</svg>
</a> 
```

# java - 在 Java 中，如何添加每个循环的结果？

> ID：13000686
> 
> 赞同：1
> 
> 时间：2012-10-21T18:13:35.850
> 
> 标签：java, loops, for-loop

我得到了这个程序，除了

```
if (more == JOptionPane.NO_OPTION)       
{
    System.out.print("\nTotal profit/loss: $");      
    System.out.print(profitandloss);
} 
```

部分，在程序结束时，它将仅显示最终循环的结果，而不是将所有循环相加。例如，如果每个循环的利润是 8，如果有 4 个循环，那么总数应该是 32，但它只会显示 8。关于如何解决这个问题的任何想法？

```
String productcode = null, purchased, cost, sold, salesprice, numberproducts = null;

double number = 1;
double profitandloss = 0;
int more;

System.out.println("Product code    units purchased  unit cost   units sold   units available   sales price  profit/loss");

double money;

for (int index = 1; index <= number; index++)
{
    productcode = JOptionPane.showInputDialog("Please enter the product code");
    int code = Integer.parseInt(productcode);

    purchased = JOptionPane.showInputDialog("Please enter the amount purchased");
    double unitspurchased = Double.parseDouble(purchased);

    cost = JOptionPane.showInputDialog("Please enter the cost of this item");
    double unitcost = Double.parseDouble(cost);

    sold = JOptionPane.showInputDialog("Please enter how many these items were sold");
    double unitssold = Double.parseDouble(sold);

    salesprice = JOptionPane.showInputDialog("Please enter the sales price for this item");
    double price = Double.parseDouble(salesprice);

    double available = unitspurchased - unitssold;
    profitandloss = unitssold*(price - unitcost);

    System.out.printf("P %2d %18.2f %18.2f %12.2f %12.2f %15.2f %15.2f", code, unitspurchased, unitcost, unitssold, available, price, profitandloss);
    System.out.println("");
    more= JOptionPane.showConfirmDialog(null, "Do you wish to enter any more products?", numberproducts, JOptionPane.YES_NO_OPTION);

    if (more == JOptionPane.YES_OPTION)
    {
        number++;
    }
    if (more == JOptionPane.NO_OPTION)
    {
        System.out.print("\nTotal profit/loss: $");
        System.out.print(profitandloss);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:16:05.687

改变

```
profitandloss = unitssold*(price - unitcost); 
```

至

```
profitandloss = profitandloss + unitssold *(price - unitcost); 
```

或等效地

```
profitandloss += unitssold*(price - unitcost); 
```

您遇到问题的原因是因为不是通过每次添加来累积最终答案，而是`profitandloss`每次都用当前结果覆盖`profitandloss`，所以最后您只打印最近的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T18:17:33.567

你应该更换

```
profitandloss = unitssold*(price - unitcost); 
```

和

```
profitandloss += unitssold*(price - unitcost); 
```

`profitandloss`您在每次迭代时都覆盖了。

# ios - 如何在继续进行 segue 之前等待另一个线程完成？

> ID：13000692
> 
> 赞同：7
> 
> 时间：2012-10-21T18:14:19.710
> 
> 标签：ios, ios5, asynchronous, uistoryboardsegue

我有两个 UITableViewControllers，我正在使用情节提要在它们之间进行切换。

在`prepareForSegue:sender:`中，第一个 VC 从 Web 服务获取 NSArray，并使用下载的数据设置目标 VC 的模型。我将下载部分放入 a 中`dispatch_queue_t`，因此它将异步运行并且不会阻塞 UI 线程。我想点击一个表格单元格，让 UIActivityIndi​​catorView 开始旋转，下载照片，下载照片后，停止旋转器并继续转场。

在第一个 UITableViewController 我有一个`prepareForSegue:sender:`方法：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"SelectPlace"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];

        UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc]
                                            initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
        [spinner startAnimating];
        self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:spinner];

        __block NSArray *photos = [[NSMutableArray alloc] init];
        dispatch_queue_t downloadQueue = dispatch_queue_create("flickr download", NULL);
        dispatch_async(downloadQueue, ^{
            photos = [FlickrFetcher photosInPlace:[self.places objectAtIndex:indexPath.row] maxResults:50];
        });
        dispatch_release(downloadQueue);
        [spinner stopAnimating];
        [segue.destinationViewController setPhotos:photos withTitle:[[sender textLabel] text]];
    }

} 
```

现在它正在立即执行 segue，而不显示微调器或等待下载完成。

**如何在不阻塞主线程的情况下异步下载数据以准备目标视图，也无需立即进行 segue？**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T18:37:04.517

让您的目标视图控制器加载数据。当用户在您的表格中选择一行时，您应该立即转到新的视图控制器。这是保持用户界面快速的必要条件。在`prepareForSegue`中，为目标视图控制器提供它自己进行加载所需的数据。然后在`viewWillAppear`目标视图控制器中，异步加载数据。

如果您想保持目标视图控制器的通用性并避免从目标视图控制器中获取 Flicker 照片，您可以设置一个协议，该协议具有一个方法，例如，`getThePhotoData`并且在您的目标视图控制器中有一个`dataSource`指针，该指针设置为`self`in `prepareForSegue`。然后，在`viewWillAppear`目标视图控制器中，`[dataSource getThePhotoData]`异步调用。闪烁照片获取将在`getThePhotoData`触发 segue 的视图控制器中实现的方法中进行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-21T18:27:48.850

在 prepareForSegue 中你不能停止 segue。在拥有所有数据之前，您最好不要触发 segue。因此，我建议您创建手动 segue 并在下载所有数据后调用它。

例如，事件链可能与此类似：

1.  在您的 VC 注册通知 (dataReady:) 中的 viewDidLoad 并在 dealloc 中取消注册，
2.  用户单击下载按钮并触发您的目标方法，您开始旋转动画
3.  目标方法使用某个块（最好在某些模型中）下载所有数据，
4.  在您发送通知的块末尾（[[NSNotificationCenter defaultCenter] postNotificationName...），
5.  您的 VC dataReady: 被调用并且您停止微调器并调用 [self performSegueWithIdentifier:...]
6.  Segue被触发

# objective-c - 如何在 Objective-C 中将变量添加到类别中？

> ID：13000693
> 
> 赞同：6
> 
> 时间：2012-10-21T18:14:34.763
> 
> 标签：objective-c, ios, categories

需要使用新变量（NSArray 类型）创建类别。

原始类+扩展.h：

```
@interface OriginalClass (Extension) {
    NSArray *_array;
}

@property (nonatomic, retain) NSArray *array;

@end 
```

但我得到了错误：`Cannot declare variable inside @interface or @protocol`。

请帮助解决问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T18:41:57.563

正如另一个所说，你不能。尽管已经指出 H2CO3，但您可以使用[关联引用](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocAssociativeReferences.html)。在[Apple 文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)上：

> 请注意，类别不能为该类声明额外的实例变量；它只包括方法。但是，类范围内的所有实例变量也在类范围内。这包括类声明的所有实例变量，甚至是声明为@private 的实例变量。

如果你想去关联对象，你可以使用[这个](https://stackoverflow.com/questions/7819092/how-can-i-add-properties-to-an-object-at-runtime)答案。此外，您可以使用Ole Begemann 的[这篇](http://oleb.net/blog/2011/05/faking-ivars-in-objc-categories-with-associative-references/)文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T18:16:29.817

你不能，一个类别不能声明额外的实例变量......

参考：[这里](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocCategories.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T18:15:56.673

很简单：您不能使用类别将实例变量添加到类中。

如果您需要存储其他数据：使用[关联对象。](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocAssociativeReferences.html)

# html - HTML表单提交位置

> ID：13000696
> 
> 赞同：0
> 
> 时间：2012-10-21T18:15:18.203
> 
> 标签：html

我有这样的表格：

```
<form action="/search/">
    <input type="text" name="query"> <input type="submit" name="submit" value="go">
</form> 
```

我希望能够通过单击按钮使请求转到：`/search/[query-text]`而不是`/search/?query=[query-text]`

这是否可以在没有 JAVASCRIPT 且不进行额外重定向的情况下进行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T18:20:24.150

我看不出有办法做到这一点。GET 方法的行为是将所有表单字段附加到模式 ?name1=value1&name2=value2 中。这将发生在浏览器级别。

如果您尝试使用此表单以便可以输入 URL 的最后一部分 - 为什么不使用 POST 方法然后进行服务器端重定向？

# sql - 检查约束中的子查询

> ID：13000698
> 
> 赞同：40
> 
> 时间：2012-10-21T18:15:46.593
> 
> 标签：sql, sql-server-2008, check-constraints

我在`SQL-Server`2008 R2 中设计了表格。

我在该表中有一个列，在插入数据时需要对照另一个表进行检查。

```
ALTER TABLE Table1
        WITH CHECK ADD CONSTRAINT CK_Code
        CHECK (MyField in (Select Field From Table2)) 
```

这会导致错误

> *在这种情况下不允许子查询。只允许标量表达式。*

我已经查看了关于[Check Constraint-Subqueries are not allowed in this context 的](https://stackoverflow.com/questions/9722433/check-constraint-subqueries-are-not-allowed-in-this-context)这个问题。

有什么方法可以在不使用触发器的情况下实现这一点？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-21T18:17:19.010

请注意，您真正想要的是外键约束。也就是说，要将“查询”放入检查中，您可以编写一个包含查询并输出标量值的函数，然后在检查约束中使用该函数。

```
CREATE FUNCTION myFunction (
    @field DATATYPE(?)
)
RETURNS VARCHAR(5)
AS
BEGIN
    IF EXISTS (SELECT* FROM Table2 WHERE MYFIELD = @field)
        return 'True'
    return 'False'
END 
```

类似的东西。未测试。

然后您可以像这样将其添加到您的支票中

```
ALTER TABLE Table1
    WITH CHECK ADD CONSTRAINT CK_Code
    CHECK (myFunction(MYFIELD) = 'True') 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-01T09:26:59.063

检查约束内不能有子查询。您可以做的是使用在检查约束内返回标量值的 UDF。

步骤 1：创建表

```
USE CTBX
GO

CREATE TABLE RawMaterialByGender 
(
RMGID int primary key identity(1,1),
RMID smallint foreign key references RawMaterialMaster(RMID),
LeveLMasterID smallint foreign key references LevelMaster(LevelTextID),
IsDeleted bit
) 
```

第 2 步：创建返回标量的 UDF

```
Create FUNCTION [dbo].[IsValidLevelMasterGender](@LevelMasterID smallint)

    RETURNS bit
    AS
    BEGIN
     DECLARE @count smallint;
     DECLARE @return bit;

     SELECT @count = count(LevelTextID)      
     FROM [LevelMaster]
     WHERE LevelCategoryID = 3 AND IsActive = 1 AND LevelTextID=@LevelMasterID

     IF(@count = 0)
     SET @return = 'false';
     ELSE
     SET @return = 'true';

     RETURN @return;

    END;
    GO 
```

第 3 步：更改表以添加 CHECK 约束

```
ALTER TABLE RawMaterialByGender 
ADD CONSTRAINT check_LevelMasterID CHECK (dbo.IsValidLevelMasterGender(LeveLMasterID) = 'true') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-21T18:25:49.170

```
ALTER TABLE Table1
ADD CONSTRAINT FK_Table1_Code FOREIGN KEY (MyField)
REFERENCES Table2 (Field) ; 
```

参考： http: [//msdn.microsoft.com/en-us/library/ms190273.aspx](http://msdn.microsoft.com/en-us/library/ms190273.aspx)
注意：我没有检查上面的语法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-07T19:52:16.957

首先，在您的示例中，您显然需要 FK 约束。

另一种可能性是使用视图`WITH CHECK OPTION`并通过它授予用户访问权限：

```
CREATE TABLE Table1(i INT PRIMARY KEY, CK_Code CHAR(1));
CREATE TABLE Table2(Field CHAR(1));
INSERT INTO Table2(Field) VALUES ('A'),('B'), ('C');
GO

CREATE VIEW v_Table1
AS
SELECT *
FROM Table1
WHERE CK_code IN (SELECT Field FROM Table2)  -- here goes your subquery check
WITH CHECK OPTION; 
```

当您尝试插入违反“约束”的数据时，例如：

```
INSERT INTO v_Table1(i, CK_Code)
VALUES(10, 'D'); 
```

你会得到：

> 尝试的插入或更新失败，因为目标视图指定了 WITH CHECK OPTION 或跨越了一个指定 WITH CHECK OPTION 的视图，并且该操作产生的一个或多个行不符合 CHECK OPTION 约束条件。
> 
> 该语句已终止。

`**[`LiveDemo`](http://rextester.com/LIUHA16713)**`

# java - Android，如何结合 sqldatabase 使用 LoaderManager & Loader

> ID：13000700
> 
> 赞同：0
> 
> 时间：2012-10-21T18:16:03.100
> 
> 标签：java, android, sql

我有一个带有 _id 等的数据库。

我想通过 LoaderManager & Loader 将这些数据加载到适配器，但我不确定如何。

任何人都可以解释一种简单而有效的方法来使用 LoaderManager & loader 和 sqldatabase 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:34:46.060

我发现使用的最佳方式`AsyncTaskLoader`已在Android 设计模式博客上的[本教程中详细介绍。](http://www.androiddesignpatterns.com/2012/08/implementing-loaders.html)此示例返回一个对象，但将代码移植到返回 a然后在方法中执行数据库查询并`SampleItem`不会太多。`Cursor``loadInBackground`

我强烈建议您阅读该系列的所有部分，这是一本好书：）

# c++ - 使用 NASM 汇编器时的问题

> ID：13000703
> 
> 赞同：1
> 
> 时间：2012-10-21T18:16:11.343
> 
> 标签：c++, assembly, nasm

我有以下 ASM 代码：

```
USE32
Start:
jmp Main
    struc st
        .stLong resd 1
        .stWord resw 1
        .stBuffer   resb    32
    endstruc

    mystruc:
    istruc st
        at st.stLong, dd 1
        at st.stWord, dw 1
    iend
Main:
    mov eax, 1
    mov [mystruc+st.stLong], eax 
```

我已经使用 NASM 对其进行了编译，并尝试使用以下代码执行（逐步）在 Visual C++ 的调试模式下生成的二进制文件：

```
unsigned char hexData[50] = {
    0xEB, 0x00, 0xB8, 0x01, 0x00, 0x00, 0x00, 0xA3,
    0x0C, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00,
    0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00 
};

__asm{
    lea eax, hexData
    call eax
} 
```

问题是：执行第一条指令（jmp Main）总是会导致访问冲突异常。:(我不知道这里到底发生了什么。你能告诉我问题是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:46:06.427

内存可以有不同的保护，它可以是可读的、可写的或可执行的。默认情况下，您定义的数据成员不可执行，以避免代码注入或利用代码中的攻击。您在这里有 2 个选项：

```
// Remember this function at least allocate a page that is usually 4096 byte
// Use GetSystemInfo to get page size.
void* pvExecutableMem = VirtualAlloc(NULL, 50, MEM_RESERVE | MEM_COMMIT,
    PAGE_EXECUTE_READWRITE);
// Resulting page is executable
memcpy( pvExecutableMem, hexData, 50 );
// Now you can execute this page
__asm {
    mov eax, pvExecutableMem
    call eax
} 
```

另一种方法是更改​​保护类型`hexData`：

```
DWORD dwOldProt;
VirtualProtect( hexData, sizeof(hexData), PAGE_EXECUTE_READWRITE, &dwOldProt ); 
```

但是因为`VirtualXXX`函数在页面上工作并且不能只处理 50 字节的内存，这将改变内存其他部分的内存保护，从而导致安全漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:09:59.327

旁注（我无法添加评论..）

```
__asm{
    lea eax, hexData
    call eax
} 
```

您不需要内联汇编程序来调用 hexData。也许 MSVC x32 没问题，但请注意 MSVC x64 没有内联汇编程序。

您可以使用[以下方法](http://ideone.com/1J5qbQ)调用二进制数组中的代码：

```
#include <iostream>
#include <ostream>
using namespace std;

namespace Namespace
{
    namespace Aux
    {
        extern "C" unsigned char hexData[]={0xC3};
    }
    extern "C" void hexData();
}

int main()
{
    Namespace::hexData();
    cout << "alive!" << endl;
    return 0;
} 
```

为了解决访问冲突 - 遵循 BigBoss 的建议。例如，以下代码在 MSVC x64 中运行良好：

```
#include <iostream>
#include <windows.h>
using namespace std;

namespace Namespace
{
    namespace Aux
    {
        extern "C" unsigned char hexData[]={0xC3};
    }
    extern "C" void hexData();
}

int main()
{
    DWORD dwOldProt;
    VirtualProtect( Namespace::Aux::hexData, sizeof(Namespace::Aux::hexData), PAGE_EXECUTE_READWRITE, &dwOldProt );
    Namespace::hexData();
    cout << "alive!" << endl;
    return 0;
} 
```

# android - 通过 Android WebView 在 YouTube HTML5 视频中搜索

> ID：13000706
> 
> 赞同：30
> 
> 时间：2012-10-21T18:16:19.863
> 
> 标签：android, html, video, youtube

> **编辑**没关系，YouTube 发布了 Native Android API ( [https://developers.google.com/youtube/android/player/](https://developers.google.com/youtube/android/player/) )

我有一个在 WebView 上显示 HTML5 videoview 的应用程序。该视频被 YouTube 服务强制转换为 HTML5 ( [http://www.youtube.com/embed/3FFyT039tJ0?autoplay=1&rel=0&showinfo=0&html5=1&start=90&end=176](http://www.youtube.com/embed/3FFyT039tJ0?autoplay=1&rel=0&showinfo=0&html5=1&start=90&end=176) )

正如您在 URL 中看到的，参数“start”显示视频必须开始播放的秒数。我一直在使用 的方法`onShowCustomView`来`WebChromeClient`获取`VideoView`由 WebView 创建的对象，如此[处所示](https://stackoverflow.com/questions/3815090/webview-and-html5-video)。

当我有对 的引用时`VideoView`，我可以使用该方法`seekTo()`来实现我的目标。到这里一切都很好，但仅适用于低于 4.x 的 Android 版本。

很多人都知道，从 4.x 及更高版本开始，仅在用户单击“全屏”模式时才调用方法`onShowCustomView`，`WebViewChromeClient`而不是在视频开始播放时调用（过去是 4.x 之前的情况）。

所以，关键是我无法向前寻找 90 秒，因为我无法获得对 VideoView 的引用，也找不到任何解决方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-02T23:49:36.053

## 对于未来的观众

**YouTube 现在有一个播放器 API：** [https ://developers.google.com/youtube/android/player/](https://developers.google.com/youtube/android/player/)

**您可以轻松地在 xml 中放置视图并在活动中处理它，以下是示例：** [https ://github.com/youtube/yt-android-player](https://github.com/youtube/yt-android-player)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T10:13:00.100

试试这个：

```
 wv.getSettings().setPluginsEnabled(true);
    DisplayMetrics metrics = new DisplayMetrics();
    getActivity().getWindowManager().getDefaultDisplay().getMetrics(metrics);
    int w1 = (int) (metrics.widthPixels / metrics.density), h1 = w1 * 3 / 5;                
    String item="http://www.youtube.com/embed/3FFyT039tJ0";
    wv.getSettings().setJavaScriptEnabled(true);
    wv.setWebChromeClient(chromeClient);
    wv.getSettings().setPluginsEnabled(true);

    try {
        wv.loadData(
                "<html><body><iframe class=\"youtube-player\" type=\"text/html5\" width=\""
                        + (w1 - 20)
                        + "\" height=\""
                        + h1
                        + "\" src=\""
                        + item
                        + "\" frameborder=\"0\"\"allowfullscreen\"></iframe></body></html>",
                "text/html5", "utf-8");
    } catch (Exception e) {
        // TODO: handle exception
        e.printStackTrace();
    }

} 
```

并像这样编写一个 webchrome 客户端：

```
private WebChromeClient chromeClient = new WebChromeClient() {

    @Override
    public void onShowCustomView(View view, CustomViewCallback callback) {

        super.onShowCustomView(view, callback);
        if (view instanceof FrameLayout) {
            FrameLayout frame = (FrameLayout) view;
            if (frame.getFocusedChild() instanceof VideoView) {
                VideoView video = (VideoView) frame.getFocusedChild();
                frame.removeView(video);
                video.start();
            }
        }

    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-16T11:22:25.940

如果有人想使用`WebView`尚未播放 youtube 视频，有两个考虑因素：

1.  根据Android版本，这是不可能的。Android 4.x 版`WebView`无法做到这一点（或者我没有找到方法:) 正如我在 [此处发布的那样](https://stackoverflow.com/questions/31591010/youtube-iframe-player-wont-show-videos-in-android-4-x-webview/38410424#38410424)
2.  如果您使用的是 Android 5 或更高版本，则必须将 设置`WebChromeClient`为`WebView`组件：`setWebChromeClient(new WebChromeClient());`

希望能帮助到你！

# android - 动态更新 ListView 的视图类型

> ID：13000708
> 
> 赞同：5
> 
> 时间：2012-10-21T18:16:36.137
> 
> 标签：android, android-listview, android-adapter, android-adapterview

我创建了一个自定义适配器实现。我在这个适配器中也有一些不同的视图类型。

我需要在运行时替换我的适配器的一些视图。Romain Guy 说“...动态更改视图类型计数是一个大错误”（请参阅[​​ ArrayAdapter 和 ListView - ArrayIndexOutOfBoundsException](https://stackoverflow.com/questions/3017496/arrayadapter-and-listview-arrayindexoutofboundsexception)）。当视图类型计数动态变化时，这样做的正确方法是什么？

适配器代码：

```
...
private List<Class<?>> itemTypes = new ArrayList<Class<?>>(20);

private void initList(List<Object> items) {
    itemTypes = new ArrayList<Class<?>>(20);
    positionSection = new SparseArray<Integer>(items.size());

    int count = 0;
    int sectionIndex = -1;
    for (Object object : items) {
        Class<?> currentClass = object.getClass();
        if (object instanceof String) {
            sectionIndex = count;
        }
        if (!itemTypes.contains(currentClass)) {
            itemTypes.add(currentClass);
        }
        positionSection.put(count, sectionIndex);
        count++;
    }
}
@Override
public int getItemViewType(int position) {
    return itemTypes.indexOf(items.get(position).getClass());
}

@Override
public int getViewTypeCount() {
    int size = itemTypes.size();
    return size == 0 ? 1 : size;
}

@Override
public void notifyDataSetChanged() {
    initList(items);
    super.notifyDataSetChanged();
}
... 
```

我在更改数据后更新了我的项目类型列表，但它没有按预期工作。

上面的代码导致 ArrayIndexOutOfBounds 异常：

```
10-21 20:18:16.231: E/AndroidRuntime(4475): java.lang.ArrayIndexOutOfBoundsException: length=3; index=3
10-21 20:18:16.231: E/AndroidRuntime(4475):     at android.widget.AbsListView$RecycleBin.addScrapView(AbsListView.java:6437)
10-21 20:18:16.231: E/AndroidRuntime(4475):     at android.widget.ListView.layoutChildren(ListView.java:1559)
10-21 20:18:16.231: E/AndroidRuntime(4475):     at android.widget.AbsListView.onLayout(AbsListView.java:2102)
10-21 20:18:16.231: E/AndroidRuntime(4475):     at se.davison.sodatools.widget.SectionListView.onLayout(SectionListView.java:147)
10-21 20:18:16.231: E/AndroidRuntime(4475):     at android.view.View.layout(View.java:13754)
10-21 20:18:16.231: E/AndroidRuntime(4475):     at android.view.ViewGroup.layout(ViewGroup.java:4362) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:37:12.167

解决了来自[https://stackoverflow.com/users/493939/luksprog的建议](https://stackoverflow.com/users/493939/luksprog)

更改了这些方法并且没有在 initList 中创建 itemTypes 的新实例

```
@Override
public int getViewTypeCount() {
    return 20;
} 
```

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-10-21T19:48:42.733

我认为这里有问题：

```
@Override
public int getViewTypeCount() 
{
    int size = itemTypes.size();
    return size == 0 ? 1 : size;
} 
```

您必须始终返回提供给适配器的数据大小

尝试以下：

```
@Override
public int getViewTypeCount() 
{
    int size = itemTypes.size();
    return size;
} 
```

# asp.net - Web 服务的服务参考

> ID：13000710
> 
> 赞同：0
> 
> 时间：2012-10-21T18:16:48.060
> 
> 标签：asp.net, web-services, service-reference

我有一个带有 2 个 Web 项目 WebApp1 的 vs.net 解决方案：有 1 个名为 Default.aspx WebApp2 的表单：有 1 个名为 webservice1 的 Web 服务

我右键单击 WebApp1 并单击“添加服务引用”并添加对 WebApp2.Webservice1 的引用，它称为 wsref1。现在我面临的问题是，在 default.aspx 中，当我尝试将脚本管理器中的服务引用添加到此 Web 服务时，它不起作用。

是否可以引用在属于同一解决方案的另一个 Web 应用程序项目中声明的 Web 服务？

# orchardcms - 在 Orchard CMS 中将单个页面标题添加到 html 文档头部

> ID：13000711
> 
> 赞同：2
> 
> 时间：2012-10-21T18:16:49.673
> 
> 标签：orchardcms

出于 SEO 的原因，我想将单个页面标题添加到我的网页中，而不是像默认情况下那样添加通用站点名称。

这是我自己想出来的：

我需要复制到我的主题和修改`Document.cshtml`部分：

`<title>@Html.Title(title, siteName)</title>`

我需要在那里插入`Title`包含在每个页面中的内容部分。

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T02:20:24.220

从您的角度来看，请执行以下操作：

```
@{
    Html.TitleForPage("Mr1159pm's Page Title");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T23:35:45.117

我找到了一个完全符合我需要的[模块！](http://gallery.orchardproject.net/List/Modules/Orchard.Module.EMS.PageTitleOverride/1.0)

# java - 如何在远程服务器中部署 Struts2 应用程序

> ID：13000712
> 
> 赞同：1
> 
> 时间：2012-10-21T18:16:53.957
> 
> 标签：java, eclipse, struts2

我在 Eclipse 中使用 Struts2 开发了一个 java web 应用程序。我使用此 url 运行应用程序

```
http://localhost:8080/newApp 
```

应用程序在 tomcat 服务器的本地计算机上运行，​​但我想使用类似这样的 url 在远程服务器上运行它。

```
http://myapp.com/newApp 
```

如何进行此部署？执行此操作的服务器要求是什么，任何教程将不胜感激。我希望应用程序位于远程服务器中，以便远程客户端可以访问该应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:26:29.710

部署 Struts 应用程序的行为将需要您可以将您的应用程序转移到它，以便您需要`sftp`并`ssh`在远程机器上运行。

然后，您将需要您选择的应用程序服务器在那里运行；候选服务器将包括来自 IBM 的 Oracle WebSphere 的 Tomcat、JBoss、Weblogic。

如果您想练习部署，您可以使用 VirtualBox 和 Vagrant 在本地 PC 上创建一个虚拟机，您可以在其中安装您决定的应用程序服务器并练习部署您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:21:18.627

如果您想访问您的本地服务器，请下载一个 Web 服务器，例如[**Apache HTTP Server**](http://httpd.apache.org/)。安装和配置[**虚拟主机**](http://httpd.apache.org/docs/2.4/vhosts/)以`myapp.com`映射`localhost:8080`服务器。完成后，您可以使用`http://myapp.com/newApp`URL 访问您的应用程序。这样，您仍然可以在本地访问您的应用程序。

如果您希望可以从**Internet 上的任何地方**访问您的应用程序，则需要在 Internet 连接的服务器上提供类似的服务器（我猜您正在使用`WebLogic`），并且您可能会`DNS`为 URL 的命名创建别名。业内有多家服务提供商提供应用程序托管服务（有/无费用）。您可能也想对此进行评估。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T18:24:56.490

> Q：如何在远程服务器上部署struts2应用？

答：部署应用程序的细节完全取决于您使用的服务器类型。以下是 WebSphere 的示例：

*   [http://www.ibm.com/developerworks/websphere/library/techarticles/0401_hanis/hanis.html](http://www.ibm.com/developerworks/websphere/library/techarticles/0401_hanis/hanis.html)

以下是 JBoss 的示例：

*   [http://www.mastertheboss.com/jboss-web-server/jboss-struts-tutorial](http://www.mastertheboss.com/jboss-web-server/jboss-struts-tutorial)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T18:25:07.330

您可以使用 jboss 来部署您的应用程序[Jboss Web Configuration](http://docs.jboss.org/jbossweb/2.1.x/config/host.html)

# node.js - SocketStream - 检测客户端何时与服务器端断开连接

> ID：13000714
> 
> 赞同：0
> 
> 时间：2012-10-21T18:17:03.840
> 
> 标签：node.js, socketstream

有没有办法检测客户端何时与服务器端断开连接？

应用程序.js

ss.event.on（“关闭”，函数（会话）{

console.log（客户端断开连接）；});

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:29:40.237

检查这两个：

```
req.on("close", function() {
  // request closed unexpectedly
});

req.on("end", function() {
  // request ended normally
}): 
```

# c# - ScriptSharp：在选定的元数据上将类转换为 JavaScript 对象

> ID：13000722
> 
> 赞同：-1
> 
> 时间：2012-10-21T18:17:51.993
> 
> 标签：c#, javascript, jquery, script#

假设您有两个 ScriptSharp 类，如下所示：

```
public class Person {
    public int Weight;
    public Name Name;
    public int Height;
}

public class Name { 
   public string FirstName;
   public string LastName;
} 
```

如何让 ScriptSharp 在输出 JS 中生成以下内容？

```
var object1 = {
  weight: 0,
  name: {firstname: 'fname1', lastname: 'srn1'},
  height: 97
};

instead of

var object1 = {};
object1.weight = 0;
object1.height = 97; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T17:36:13.163

最终会有对对象文字的语言支持。

同时，您可以在其中一个 script# 测试中使用 CustomDictionary 类演示的技术 - 请参阅[https://github.com/nikhilk/scriptsharp/blob/master/tests/TestCases/Expression/New/Code.cs](https://github.com/nikhilk/scriptsharp/blob/master/tests/TestCases/Expression/New/Code.cs) .

# android - 从外部异步类更新progressDialog

> ID：13000723
> 
> 赞同：1
> 
> 时间：2012-10-21T18:18:00.823
> 
> 标签：android, android-asynctask, progressdialog

[编辑]只是为了让它更短。我知道如何从 doInBackground 中更新 progressDialog。我正在寻找一种方法来更新不同类的进度，而 Async 类仍保留在主要活动中。[编辑]

在我的主要活动中，我有几个按钮，每个按钮执行不同的 AsyncTask。因为我想让我的代码保持良好，所以我想在不同的类中执行 doInBackground 内容，如下所示：

主要活动

```
 @Override
    protected ArrayList<Object> doInBackground(String... params) {
        String query = params[0];
        return OtherClass.performSomethingThatTakesTime(query);
    }

    @Override
    protected void onPostExecute(final Object result) {
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                sendIntentToAnotherClass(result);
            }
        });
    } 
```

这时候我有整个 `OtherClass.performSomethingThatTakesTime(query)`doInBackground 里面，我通过代码使用`publishProgress(value)`. 但就像我说的那样，我希望将代码放在不同的类中，但我可以从不同的类更新 UI 的进度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T05:32:50.710

你可以在这里找到你的答案..希望它会有所帮助

[http://www.codingforandroid.com/2011/06/basic-asynctask-with-progress-bar.html](http://www.codingforandroid.com/2011/06/basic-asynctask-with-progress-bar.html)

另见 - [http://mobileorchard.com/android-app-developmentthreading-part-2-async-tasks/](http://mobileorchard.com/android-app-developmentthreading-part-2-async-tasks/)

另请参阅 [-Android：AsyncTask，如何更新 ProgressDialog 增量](https://stackoverflow.com/questions/7590555/android-asynctask-how-can-update-progressdialog-increment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:25:28.410

将 ProgressDialogs 对象传递给 AsyncTask 并在其中一种方法中更新它，该方法在 UI 线程上运行。

您可以为 AsyncTask 创建自己的自定义构造函数，然后将 ProgressDialog 保存在全局变量中。

请参阅此处了解哪些方法在 UI 线程上运行：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html) - 查看不同的方法（onPreExecute、onPostExecute、publishProgress 等）。

# c++ - 我如何理解 boost Spirit 编译器错误

> ID：13000730
> 
> 赞同：5
> 
> 时间：2012-10-21T18:18:38.490
> 
> 标签：c++, boost, compiler-errors, boost-spirit

我正在尝试使用该`no_skip`指令来解析表单的输入：

```
state PASS
<tab> state FAIL 
```

我正在`ascii::blank`用作我的船长。当我换`no_skip[ trans_assign_expr ]`行以解析选项卡时出现编译错误。

我该如何修复这个错误，一般来说，我如何理解这些错误，以便我可以修复未来的错误？boost Spirit 文档从未涵盖使用 Spirit 的这一方面 :(

这是错误

```
在 /usr/include/boost/spirit/home/qi/nonterminal/grammar.hpp:18:0 包含的文件中，
                 来自 /usr/include/boost/spirit/include/qi_grammar.hpp:16，
                 来自../src/RJstate.cpp:9：
/usr/include/boost/spirit/home/qi/nonterminal/rule.hpp: 在成员函数'bool boost::spirit::qi::rule::parse(Iterator&, const Iterator&, Context&, const Skipper&, Attribute&) const [with Context = boost::spirit::context, boost::fusion::vector0 >, Skipper = boost::spirit::qi::detail::unused_skipper >>, Attribute = const boost::spirit::unused_type , 迭代器 = __gnu_cxx::__normal_iterator >, T1 = boost::proto::exprns_::expr >, 0l>, T2 = boost::spirit::unused_type, T3 = boost::spirit::unused_type, T4 = boost: :spirit::unused_type]':
/usr/include/boost/spirit/home/qi/reference.hpp:43:71: 从 'bool boost::spirit::qi::reference::parse(Iterator&, const Iterator&, Context&, const Skipper&, Attribute& 实例化) const [with Iterator = __gnu_cxx::__normal_iterator >, Context = boost::spirit::context, boost::fusion::vector0 >, Skipper = boost::spirit::qi::detail::unused_skipper > >, 属性= const boost::spirit::unused_type, 主题 = const boost::spirit::qi::rule >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost: :spirit::unused_type, boost::spirit::unused_type>]'
/usr/include/boost/spirit/home/qi/directive/no_skip.hpp:64:63: 从 'bool boost::spirit::qi::no_skip_directive::parse(Iterator&, const Iterator&, Context&, const Skipper& , Attribute&) const [with Iterator = __gnu_cxx::__normal_iterator >, Context = boost::spirit::context, boost::fusion::vector0 >, Skipper = boost::spirit::qi::char_class >, Attribute = const boost::spirit::unused_type, Subject = boost::spirit::qi::reference >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost::spirit: :unused_type, boost::spirit::unused_type> >]'
/usr/include/boost/spirit/home/qi/detail/fail_function.hpp:45:74: 从 'bool boost::spirit::qi::detail::fail_function::operator()(const Component&) const 实例化[with Component = boost::spirit::qi::no_skip_directive >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost::spirit::unused_type, boost:: Spirit::unused_type> > >, Iterator = __gnu_cxx::__normal_iterator >, Context = boost::spirit::context, boost::fusion::vector0 >, Skipper = boost::spirit::qi::char_class >]'
/usr/include/boost/fusion/algorithm/query/detail/any.hpp:42:83: [跳过 8 个实例化上下文]
/usr/include/boost/function/function_template.hpp:132:42: 从 'static R boost::detail::function::function_obj_invoker4::invoke(boost::detail::function::function_buffer&, T0, T1 , T2, T3) [with FunctionObj = boost::spirit::qi::detail::parser_binder >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost:: Spirit::unused_type, boost::spirit::unused_type> >, boost::fusion::cons >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost:: Spirit::unused_type, boost::spirit::unused_type> > >, boost::fusion::nil> > > >, mpl_::bool_ >, R = bool, T0 = __gnu_cxx::__normal_iterator >&, T1 = const __gnu_cxx::__normal_iterator >&, T2 = boost::spirit::context, boost::fusion::vector0 >&, T3 = const boost::spirit::qi::char_class >&]'
/usr/include/boost/function/function_template.hpp:913:60: 实例化自 'void boost::function4::assign_to(Functor) [with Functor = boost::spirit::qi::detail::parser_binder >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost::spirit::unused_type, boost::spirit::unused_type> >, boost::fusion::cons >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost::spirit::unused_type, boost::spirit::unused_type> > >, boost::fusion::nil> > > >, mpl_::bool_ >, R = bool, T0 = __gnu_cxx::__normal_iterator >&, T1 = const __gnu_cxx::__normal_iterator >&, T2 = boost::spirit::context, boost::fusion::vector0 >&, T3 = const boost::spirit::qi::char_class >&]'
/usr/include/boost/function/function_template.hpp:722:7: 从 'boost::function4::function4(Functor, typename boost::enable_if_c::value>::value, int>::type) [ with Functor = boost::spirit::qi::detail::parser_binder >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost::spirit::unused_type, boost ::spirit::unused_type> > boost::fusion::cons >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost::spirit::unused_type, boost ::spirit::unused_type> > >, boost::fusion::nil> > > >, mpl_::bool_ >, R = bool, T0 = __gnu_cxx::__normal_iterator >&, T1 = const __gnu_cxx::__normal_iterator >& , T2 = boost::spirit::context, boost::fusion::vector0 >&, T3 = const boost::spirit::qi::char_class >&, typename boost::enable_if_c::value>::值，int>::type = int]'
/usr/include/boost/function/function_template.hpp:1064:16: 从 'boost::function::function(Functor, typename boost::enable_if_c::value>::value, int>::type) [ with Functor = boost::spirit::qi::detail::parser_binder >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost::spirit::unused_type, boost ::spirit::unused_type> > boost::fusion::cons >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost::spirit::unused_type, boost ::spirit::unused_type> > >, boost::fusion::nil> > > >, mpl_::bool_ >, R = bool, T0 = __gnu_cxx::__normal_iterator >&, T1 = const __gnu_cxx::__normal_iterator >& , T2 = boost::spirit::context, boost::fusion::vector0 >&, T3 = const boost::spirit::qi::char_class >&, typename boost::enable_if_c::value>::值，int>::type = int]'
/usr/include/boost/function/function_template.hpp:1105:5: 从 'typename boost::enable_if_c::value>::value, boost::function&>::type boost::function::operator=( Functor) [with Functor = boost::spirit::qi::detail::parser_binder >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost::spirit::未使用类型，boost::spirit::unused_type> >, boost::fusion::cons >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost::spirit::未使用类型，boost::spirit::unused_type> > >, boost::fusion::nil> > > >, mpl_::bool_ >, R = bool, T0 = __gnu_cxx::__normal_iterator >&, T1 = const __gnu_cxx:: __normal_iterator >&, T2 = boost::spirit::context, boost::fusion::vector0 >&, T3 = const boost::spirit::qi::char_class >&, 类型名 boost::enable_if_c::value>::value, boost::function&>::type = boost::function >&, const __gnu_cxx::__normal_iterator >&, boost::spirit::context, boost::fusion::vector0 >& , const boost::spirit::qi::char_class >&)>&]'
/usr/include/boost/spirit/home/qi/nonterminal/rule.hpp:198:13: 从 'boost::spirit::qi::rule& boost::spirit::qi::rule::operator= 实例化(const Expr&) [with Expr = boost::proto::exprns_::expr >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost::spirit::unused_type , boost::spirit::unused_type>&, const boost::proto::exprns_::expr, 0l>&>, 2l>&, const boost::proto::exprns_::expr, 0l>&, boost: :spirit::qi::rule >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost::spirit::unused_type, boost::spirit::unused_type>& >, 2l>&>, 2l>, Iterator = __gnu_cxx::__normal_iterator >, T1 = boost::proto::exprns_::expr >, 0l>, T2 = boost::spirit::unused_type, T3 = boost:: Spirit::unused_type, T4 = boost::spirit::unused_type, boost::Spirit::qi::rule = boost::spirit::qi::rule >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost::spirit::unused_type , boost::spirit::unused_type>]'
../src/RJstate.cpp:49:7: 实例化自 'fsm_grammar::fsm_grammar() [with Iterator = __gnu_cxx::__normal_iterator >, Skipper = boost::proto::exprns_::expr >, 0l>]'
../src/RJstate.cpp:112:50：从这里实例化
/usr/include/boost/spirit/home/qi/nonterminal/rule.hpp:277:17: 错误：不匹配调用 '(const function_type {aka const boost::function >&, const __gnu_cxx::__normal_iterator > &, boost::spirit::context, boost::fusion::vector0 >&, const boost::spirit::qi::char_class >&)>}) (__gnu_cxx::__normal_iterator >&, const __gnu_cxx::__normal_iterator >&, boost::spirit::qi::rule >, boost::proto::exprns_::expr >, 0l>, boost::spirit::unused_type, boost::spirit::unused_type, boost::spirit ::unused_type>::context_type&, const boost::spirit::qi::detail::unused_skipper > >&)'
/usr/include/boost/function/function_template.hpp:1043:7：注意：候选人是：
/usr/include/boost/function/function_template.hpp:1006:1: 注意: boost::function4::result_type boost::function4::operator()(T0, T1, T2, T3) const [with R = bool , T0 = __gnu_cxx::__normal_iterator >&, T1 = const __gnu_cxx::__normal_iterator >&, T2 = boost::spirit::context, boost::fusion::vector0 >&, T3 = const boost::spirit::qi ::char_class >&, boost::function4::result_type = bool]
/usr/include/boost/function/function_template.hpp:1006:1：注意：参数 4 从 'const boost::spirit::qi::detail::unused_skipper >>' 到 'const boost:: 没有已知的转换精神::qi::char_class >&'

```

这是我的代码

```
#define BOOST_SPIRIT_DEBUG

#include <iostream>
#include <vector>
#include <iterator>
#include <fstream>

// forwards to <boost/spirit/home/qi/nonterminal/grammar.hpp>
#include <boost/spirit/include/qi_grammar.hpp>
// forwards to <boost/spirit/home/qi/nonterminal/rule.hpp>
#include <boost/spirit/include/qi_rule.hpp>

#include <boost/spirit/include/qi.hpp>

#include <boost/spirit/include/qi_char_class.hpp>
#include <boost/spirit/include/qi_no_skip.hpp>

#include <boost/spirit/include/phoenix.hpp>

#include "TestParser.hpp"

///////////////////////////////////////////////////////////////////////////////

namespace qi = boost::spirit::qi;
namespace ascii = boost::spirit::ascii;

template <typename Iterator, typename Skipper=qi::space_type>
struct fsm_grammar : qi::grammar<Iterator, Skipper>
{
   fsm_grammar() : fsm_grammar::base_type(script)
   {
      using boost::spirit::double_;
      using boost::spirit::ascii::char_;
      using boost::spirit::ascii::alnum;
      using boost::spirit::ascii::alpha;
      using boost::spirit::lit;
      using boost::spirit::qi::eol;
      using boost::spirit::qi::eoi;
      using boost::spirit::lexeme;
      using boost::spirit::qi::no_skip;
      using boost::spirit::qi::_1;
      using boost::spirit::qi::_val;

      //id = char_("a-zA-Z")[_val += _1] >> *char_("a-zA-Z_0-9")[_val += _1];
      id = lexeme[ alpha[_val += _1] >> *alnum[_val += _1] >> !alnum ];
      state_id = "state" >> id;
      start_expr = "start" >> id;
      trans_assign_expr = lit("\t") >> state_id >> +(char_('a','z'));
      trans_expr = state_id >> eol >> no_skip[ trans_assign_expr ];
      assign_expr = char_("a-zA-Z");
      states_list = "states" >> +(id);
      expr = (trans_expr | start_expr | states_list) >> +eol;
      script = *expr >> eoi;

      BOOST_SPIRIT_DEBUG_NODE(script);
      BOOST_SPIRIT_DEBUG_NODE(states_list);
      BOOST_SPIRIT_DEBUG_NODE(expr);
      BOOST_SPIRIT_DEBUG_NODE(start_expr);
      BOOST_SPIRIT_DEBUG_NODE(assign_expr);
      BOOST_SPIRIT_DEBUG_NODE(trans_expr);
      BOOST_SPIRIT_DEBUG_NODE(trans_assign_expr);
      BOOST_SPIRIT_DEBUG_NODE(state_id);
      BOOST_SPIRIT_DEBUG_NODE(id);

      std::string val = "PASS";
      //test_parser("  ",+char_("a-zA-Z"));
   }

   qi::rule<Iterator, Skipper> script;
   qi::rule<Iterator, Skipper> states_list;
   qi::rule<Iterator, Skipper> expr;
   qi::rule<Iterator, Skipper> trans_expr;
   qi::rule<Iterator, Skipper> trans_assign_expr;
   qi::rule<Iterator, Skipper> assign_expr;
   qi::rule<Iterator, Skipper> start_expr;
   qi::rule<Iterator, Skipper> state_id;
   qi::rule<Iterator, std::string()> id;
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T09:46:25.630

正如 llonesmiz 非常恰当地指出的那样：

*   寻找静态断言 ( `****** like this in the error 'novel' ******`)
*   在“失败”行上方*直接*（我的意思是，**直接**）查找评论。这包括触发模板实例化的点。

    > 如果您在此处看到编译错误，指出无法将第四个参数转换为所需的目标类型，那么您可能正在尝试使用不兼容的船长类型的规则或语法。

    在这种情况下，由于您想在`trans_assign_expr`没有船长的情况下使用，您必须在没有船长的情况下声明它：

    ```
    // no skippers
    qi::rule<Iterator, std::string()> id;
    qi::rule<Iterator> state_id;
    qi::rule<Iterator> trans_assign_expr; 
    ```

这使它编译。但是，输出表明它不 /work/。

**我不相信这是你想要做的**。无论如何`lexeme`，这里似乎是一个更好的选择。我会简化`id`规则：

```
id = lexeme [ alpha >> *alnum ]; 
```

`lexeme`已经具有本地禁用正在使用的船长的属性。

这是语法**[http://liveworkspace.org/code/70f3319342c567854b9f785ac13508d6的轻微变化](http://liveworkspace.org/code/70f3319342c567854b9f785ac13508d6)**

```
trans_assign_expr = state_id >> +(char_('a','z'));
trans_expr        = state_id >> no_skip [ eol >> '\t' ] >> trans_assign_expr; 
```

如您所见，我将 with 包含`eol`在 no_skip 中（以避免船长吃标签）。这样，船长*仍然*有效`trans_assign_expr`- 这使得它接受额外的空间。给定输入

```
const char input[]="state PASS\n\t state FAIL more"; 
```

现在的输出是

```
<script>
  <try>state PASS\n\t state F</try>
  <expr>
    <try>state PASS\n\t state F</try>
    <trans_expr>
      <try>state PASS\n\t state F</try>
      <state_id>
        <try>state PASS\n\t state F</try>
        <id>
          <try> PASS\n\t state FAIL m</try>
          <success>\n\t state FAIL more\n</success>
          <attributes>[[P, A, S, S]]</attributes>
        </id>
        <success>\n\t state FAIL more\n</success>
        <attributes>[]</attributes>
      </state_id>
      <trans_assign_expr>
        <try> state FAIL more\n</try>
        <state_id>
          <try> state FAIL more\n</try>
          <id>
            <try> FAIL more\n</try>
            <success> more\n</success>
            <attributes>[[F, A, I, L]]</attributes>
          </id>
          <success> more\n</success>
          <attributes>[]</attributes>
        </state_id>
        <success>\n</success>
        <attributes>[]</attributes>
      </trans_assign_expr>
      <success>\n</success>
      <attributes>[]</attributes>
    </trans_expr>
    <success></success>
    <attributes>[]</attributes>
  </expr>
  <expr>
    <try></try>
    <trans_expr>
      <try></try>
      <state_id>
        <try></try>
        <fail/>
      </state_id>
      <fail/>
    </trans_expr>
    <start_expr>
      <try></try>
      <fail/>
    </start_expr>
    <states_list>
      <try></try>
      <fail/>
    </states_list>
    <fail/>
  </expr>
  <success></success>
  <attributes>[]</attributes>
</script>
true 
```

# php - 检测操作并返回使用的数字

> ID：13000733
> 
> 赞同：-1
> 
> 时间：2012-10-21T18:19:24.697
> 
> 标签：php, regex

用户将输入一个类似于 的字符串`151+328`。我需要一个函数来检测用户在两个数字之间输入的操作并返回它们。怎么做？我知道如何用正则表达式做第一部分（即`[0-9]+\+[0-9]`，但我对第二部分一无所知。

tldr：

```
function('10+296', '+', 1)='10'    
function('10+296', '+', 2)='296'    
function('perpderpherp', 'derp', 2)='herp' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:26:29.727

此函数使用正则表达式来确保字符串采用以下格式：[0-9]+[0-9] 然后分解以拆分并返回一部分：

```
function splitAndReturn($str, $delimiter, $part) {
    $pattern = '/^\d+\+\d+$/';
    if (preg_match($pattern, $str)) {
        $parts = explode($delimiter, $str);
        return $parts[$part-1];
    }
    return false;
}

echo splitAndReturn('10+296', '+', 1); //=10
echo splitAndReturn('10+296', '+', 2); //=296
echo splitAndReturn('potatocarrotbanana', 'carrot', 1); // returns false because it doesn't comply with the "detect only [0-9]+[0-9]" rule you stated. 
```

* * *

此函数用于[`explode`](http://php.net/manual/en/function.explode.php)在分隔符处拆分字符串并返回任何部分：

```
function splitAndReturn($str, $delimiter, $part) {
    $parts = explode($delimiter, $str);
    return $parts[$part-1];
}

echo splitAndReturn('10+296', '+', 1); //=10
echo splitAndReturn('10+296', '+', 2); //=296
echo splitAndReturn('potatocarrotbanana', 'carrot', 1); //='potato' 
```

如果分隔符不存在，它将只返回原始字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:58:48.323

`\d+\+\d+`将检测到`number + number`而不是`word + word`或`word + number`或`number + word`

# c# - 在 Singleton 上实现 IDisposable 是否正确

> ID：13000736
> 
> 赞同：1
> 
> 时间：2012-10-21T18:19:42.833
> 
> 标签：c#, wcf, design-patterns

在我们的 WCF 项目中，我们`singleton pattern`用于获取客户端代理。

基本上是因为——

1.  以后需要的任何增强，在添加 `Binding`或的客户端对象上`Endpoint`，都需要最少的更改。
2.  我们不会同时调用多个服务。

为了确保`connection is closed`在每次服务调用后正确，我们计划`IDisposable`在单例中实现如下 -

```
public class ClientSingleton : IDisposable
{
    static Service1Client client;
    private ClientSingleton()
    {
        client = new Service1Client();
    }
    public Service1Client getInstance()
    {
        if (client != null)
            return client;
        else
        {
            client = new Service1Client();
            return client;
        }
    }
    public void Dispose()
    {
        client.Close();
    }
} 
```

这是否违反单例`Design-Pattern`原则？任何改善这一点的建议都会有所帮助。

**编辑：**

考虑`using block`按如下方式处理客户端对象 -

```
using (Service1Client client = new Service1Client())
{
    client.Operation1();
} 
```

这意味着 WCF 代理实现`IDisposable`接口。所以我认为在这里实现这个接口没有任何害处。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:45:12.217

我一直在我的项目中使用一种扩展方法来正确关闭服务连接。（我从某个博客上偷了扩展方法，忘记了那个博客链接）

```
public static void CloseConnection(this ICommunicationObject client)
{
  if (client.State != CommunicationState.Opened)
  {
    return;
  }

  try
  {
    client.Close();
  }
  catch (CommunicationException)
  {
    client.Abort();
    throw;
  }
  catch (TimeoutException)
  {
    client.Abort();
    throw;
  }
  catch (Exception)
  {
    client.Abort();
    throw;
  }
} 
```

与您的方法（特定于特定代理）不同，这可以在任何代理上使用以安全地关闭连接。

示例用法

```
Service1Client client = null

try
{
  client = new Service1Client();
}
finally
{
  if(client != null)
     client.CloseConnection();
} 
```

# sql - 将子节点的文本连接到单个列中

> ID：13000743
> 
> 赞同：2
> 
> 时间：2012-10-21T18:20:24.180
> 
> 标签：sql, xml, sql-server-2008, xpath, xquery

我正在使用返回属性信息的 API。一些文本信息存储在子节点中，我想将它连接成一个字符串（VARCHAR）。

我的过程是我通过 web 服务获取 xml，然后将其传递给 proc，该 proc 提取 xml 值并将它们插入到视图中，这是我返回的 xml 片段：

```
<properties>
    <property propertyid="1234">
        <bullets>
            <bullet>nice garden</bullet>
            <bullet>it smells a bit</bullet>
            <bullet>body under the patio</bullet>
        </bullets>
    </property>
    ...
</properties> 
```

这是如何查询 xml 以从中提取值的一瞥：

```
INSERT        
INTO          VProperty
(             PropertyId,
              Description
)
SELECT        P.value('@propertyid', 'INT'),
              NULL -- extract all the bullet text values into a single string
FROM          @xml.nodes('/properties/property') 
```

在此示例中，我希望能够从 xml 中提取信息，因此最终结果如下：

```
PropertyId    Description
1234          'nice garden\r\nit smells a bit\r\nbody under the patio 
```

这在纯 sql/xml 中是否可行，或者我是否需要在进入 SQL 领域之前对 xml 执行一些预处理？

非常感谢任何帮助（一如既往）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T19:16:09.727

Does this work for you?

```
DECLARE @XML XML = 
('<properties>
    <property propertyid="1234">
        <bullets>
            <bullet>nice garden</bullet>
            <bullet>it smells a bit</bullet>
            <bullet>body under the patio</bullet>
        </bullets>
    </property>
    <property propertyid="2345">
        <bullets>
            <bullet>bullet 2345_1</bullet>
            <bullet>bullet 2345_2</bullet>
            <bullet>bullet 2345_3</bullet>
        </bullets>
    </property>
</properties>');

SELECT  X.node.value('@propertyid', 'INT'),
        STUFF((SELECT '\r\n' + B.bullet.value('.', 'NVARCHAR(MAX)')
               FROM   X.node.nodes('./bullets/bullet') B ( bullet )
               FOR XML PATH(''),TYPE).value('.', 'NVARCHAR(MAX)'),
              1, 4, '') AS Description
FROM    @xml.nodes('/properties/property') X ( node ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:27:27.537

**您可以使用这个 XQuery（不确定 SQL Server 2008 的 XQuery 方言是否与它完全兼容）：**

```
for $pr in /*/property,
    $id in $pr/@propertyid,
    $desc in string-join($pr/*/*, '&#xD;&#xA;')
  return
     (<PropertyId>{string($id)}</PropertyId>,
     <Description>{$desc}</Description>) 
```

**使用 Saxon 和 XQSharp (XmlPrime) 在提供的 XML 文档上应用此查询的结果**：

```
<properties>
    <property propertyid="1234">
        <bullets>
            <bullet>nice garden</bullet>
            <bullet>it smells a bit</bullet>
            <bullet>body under the patio</bullet>
        </bullets>
    </property>
    ...
</properties> 
```

**是**：

```
<PropertyId>1234</PropertyId>
<Description>nice garden&#xD;
it smells a bit&#xD;
body under the patio</Description> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-16T04:55:05.633

```
DECLARE @XML XML
SET @XML = 
'<properties>
  <property propertyid="1234">
    <bullets>
      <bullet>nice garden</bullet>
      <bullet>it smells a bit</bullet>
      <bullet>body under the patio</bullet>
    </bullets>
  </property>
  <property propertyid="2345">
    <bullets>
      <bullet>bullet 2345_1</bullet>
      <bullet>bullet 2345_2</bullet>
      <bullet>bullet 2345_3</bullet>
    </bullets>
  </property>
</properties>'

SET @XML = @XML.query('
    for $prop in /properties/property
    return
    <property propertyid="{string($prop/@propertyid)}">
        <description>
        {
            for $bullet in $prop/bullets[1]/bullet
            return
                if ($bullet is $prop/bullets[1]/bullet[1] and $bullet << $prop/bullets[1]/bullet[last()])
                then concat(string($bullet), "\r\n")
                else
                    if ($bullet is $prop/bullets[1]/bullet[last()])
                    then string($bullet)
                    else concat(string($bullet), "\r\n")
        }    
        </description>
    </property>
')

SELECT
Tab.ColXML.value('@propertyid', 'INTEGER') AS PropertyId,
Tab.ColXML.value('description[1]', 'NVARCHAR(128)') AS Description
FROM @XML.nodes('//property') AS Tab(ColXML) 
```

由于 MS SQL Server 2005 中没有 let 子句，我必须找到解决方法。

在 query() 方法的表达式中，我使用 2 个嵌套的“类似循环”的 for 子句来选择需要的元素。第一个 [for 子句] 构建 [property] 元素。第二个 [for 子句] 从 [bullet] 元素列表中构建 [description] 元素，即 [property] 的子元素。

[description] 将从 [bullet] 元素列表构建的序列中获取值，如下所示：

第一个但不是最后一个 [bullet] 将附加“\r\n”。

非第一个和非最后一个 [bullet] 也将附加“\r\n”。

我们保持其他[子弹]完好无损。

我们连接为每个构建的所有字符串，以便为相关的 [描述] 创造价值。

# entity-framework - 为什么 EF 需要实体的 id 以及引用

> ID：13000744
> 
> 赞同：0
> 
> 时间：2012-10-21T18:20:36.363
> 
> 标签：entity-framework, ef-code-first

我有一个关于实体框架的问题。在代码优先场景中，我有一个引用地址的人员类。在我的域中，我会将其作为对 Address 类的引用。我见过的所有实体框架示例也需要一个 AddressId 字段。这是我认为不应该存在并且在我的域驱动模型中不需要的东西。

为什么EF需要这个？我可以没有它吗（我不相信 NHibernate 需要这个）。

谢谢

```
public class Person()
{
    public int Id {get;set;}
    public string Name {get;set;}
    public Address Address {get;set;}
    public int AddressId {get;set;} //Entity Framework seems to require this
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:07:18.170

不需要外键。事实上，对外键的支持是在 EF4 中引入的。通常，FK 是为了方便。在许多情况下，FK 有助于提高性能，因为如果您知道 id（保存一次到数据库的行程），您可以在不加载相关实体的情况下更改关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:28:59.397

您应该阅读独立关联和外键关联： [代码优先：独立关联与外键关联？](https://stackoverflow.com/questions/5281974/code-first-independent-associations-vs-foreign-key-associations)

来自回答上述问题的同一作者的一篇好文章也可以在以下位置找到： [foreign-key-vs-independent-associations-in-ef-4](http://www.ladislavmrnka.com/2011/05/foreign-key-vs-independent-associations-in-ef-4/)

# c# - 使用字符串作为 DbSet 的类型，如 DbSet 在 EF-CodeFirst 中

> ID：13000748
> 
> 赞同：3
> 
> 时间：2012-10-21T18:20:58.767
> 
> 标签：c#, entity-framework, c#-4.0, ef-code-first

我想要一个字符串列表，并使用 EF-CodeFirst 将它们保存并加载到数据库中。这是我的 DbContext 类：

```
public class KeysDbContext : DbContext
{
    public DbSet<string> Keys { get; set; }
} 
```

但是当我尝试运行代码时，我得到了这个异常`System.InvalidOperationException`：：`The type 'System.String' was not mapped. Check that the type has not been explicitly excluded by using the Ignore method or NotMappedAttribute data annotation. Verify that the type was defined as a class, is not primitive, nested or generic, and does not inherit from EntityObject.`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T19:02:24.463

你不能有一个`DbSet<string>`. EF 将 String 视为原始类型，并且 DbSet 的类型必须是实体。实体具有属性（通常映射到数据库中的列）并且还必须具有键。如果在您的数据库中，您有一个只有一个字符串列的表，您将必须创建一个具有字符串属性的实体来对此进行建模。此外，字符串属性必须是键属性。

# zend-framework2 - 多个控制器的单一工厂？

> ID：13000752
> 
> 赞同：6
> 
> 时间：2012-10-21T18:21:25.453
> 
> 标签：zend-framework2

简而言之，我的问题是：我可以为多个控制器使用一个工厂吗？

更多细节：

*我在/config/autoload/global.php*中有一些全局非模块特定设置，如下所示：

```
return array(
    'settings' => array(
        'setting_a' => 'foo',
        'setting_b' => 'bar'
    ),

    // More ZF default configuration ...
); 
```

现在我想让这些设置在每个控制器中都可以访问，而不必一直调用`$this->getServiceLocator()->get('config')`。

`$settings`所以我的想法是在我`AbstractController`的配置数组中引入一个类属性。我试图直接在`AbstractController`. 但是`getServiceLocator()`，当时似乎还没有准备好并返回 NULL。

我可以为每个控制器构建控制器工厂并注入如下设置：

```
class ControllerFactory implements FactoryInterface
{
    public function createService(ServiceLocatorInterface $serviceLocator) {
        $config = $serviceLocator->get('config');
        return new \MyModule\Controller\MyController($config['settings']);
    }
} 
```

但它会一遍又一遍地相同。所以我的问题是：我可以为多个控制器使用一个工厂吗？

在我的*module.config.php 中*，我可以为多个控制器指定一个工厂类：

```
return array(
    'controllers' => array(
        'factories' => array(
            'MyModule\Controller\MyControllerA' => 'MyModule\Factory\ControllerFactory',
            'MyModule\Controller\MyControllerB' => 'MyModule\Factory\ControllerFactory',
            'MyModule\Controller\MyControllerC' => 'MyModule\Factory\ControllerFactory',
        )
    ),
); 
```

但是在工厂中，我需要手动返回实际的 Controller 对象（参见上面的示例），这当然只适用于每个 Controller 的一个工厂。

希望，我把我的问题说清楚了。

**2013 年 3 月 24 日更新：**

尽管我首先通过创建一个初始化程序来遵循建议的解决方案，但我从来没有真正喜欢将它仅用于配置注入。

所以我一直在挖掘并最终创建了一个控制器插件来接收设置。

该插件的代码如下所示：

```
use Zend\Mvc\Controller\Plugin\AbstractPlugin;

class Settings extends AbstractPlugin
{
    protected $settings;

    public function __invoke()
    {
        $config = $this->getController()->getServiceLocator()->get('Config');

        if (isset($config['settings']) && is_array($config['settings'])) {
            $this->settings = $config['settings'];
        }

        return $this->settings;
    }
} 
```

在*module.config.php*中添加插件后

```
'controller_plugins' => array(
    'invokables' => array(
        'settings' => 'My\Controller\Plugin\Settings',
    )
), 
```

我可以通过简单地调用在控制器中轻松访问我的设置`$this->settings()`。希望这对任何人都有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T10:05:09.870

您可以尝试附加一个初始化程序，然后在创建控制器时根据已知的初始化程序检查实例。如果实例匹配给定的接口或抽象类，那么您可以应用一些通用逻辑。

我没有用控制器测试过这种方法，但考虑到 ControllerLoader 是一种 ServiceManager/ServiceLocator，理论上它应该可以工作。

```
'controllers' => array (
    'initializers' => array(
        'MyApplication\Controller\Initializer'
    )
), 
```

然后初始化器看起来像：

```
class Initializer implements InitializerInterface
{
    public function initialize($instance, ServiceLocatorInterface $serviceLocator)
    {
        if (!$instance instanceof MyControllerInterface)
        {
            return;
        }

        // Do something for this instance
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:29:26.343

不确定您如何进行未来更新“UPDATE 2013-03-24”；）

你为什么不像你建议的那样使用控制器，而是将你想要的所有控制器中的代码放入一个抽象工厂，然后从中继承，例如：

```
abstract class AbstractControllerFactory implements FactoryInterface
{
    protected function initialise(ServiceLocatorInterface $serviceLocator, $controller) {
        $config = $serviceLocator->get('config');
        $controller->setConfig($config);
    }
}

class ControllerFactory extends AbstractControllerFactory implements FactoryInterface
{
    public function createService(ServiceLocatorInterface $serviceLocator) {
        $controller = new \MyModule\Controller\MyController();
        $this->initialise($serviceLocator, $controller);
        return $controller;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T15:32:53.533

甚至更干净：将您的控制器作为可调用对象添加到配置中，然后执行以下操作将您的控制器变成单行：

```
abstract class AbstractControllerFactory implements FactoryInterface
{
    protected $controllerKey;

    public function createService(ServiceLocatorInterface $serviceLocator) {
        $config     = $serviceLocator->get('config');
        $controller = $serviceLocator->get($this->controllerKey);
        $controller->setConfig($config);
        return $controller;
    }
}

class ControllerFactory extends AbstractControllerFactory implements FactoryInterface
{
    protected $controllerKey = 'mymodule_controller_mycontroller';
} 
```

# java - Spring 3.1.2 MVC @ExceptionHandler 与 @ResponseBody

> ID：13000754
> 
> 赞同：1
> 
> 时间：2012-10-21T18:21:33.117
> 
> 标签：java, spring, spring-mvc

我正在尝试使用 @ResponseBody 实现 Spring Web MVC @ExceptionHandler 以返回包含验证错误的对象。（[策略 E 记录在这里](http://doanduyhai.wordpress.com/2012/05/06/spring-mvc-part-v-exception-handling/)）。

在 Spring 3.0.x 中，有一个已确认的[bug](https://jira.springsource.org/browse/SPR-6902)已解决，导致它无法正常工作。我使用的是 Spring 3.1.2，不应该遇到那个。

但是，我遇到了一个异常“找不到可接受的表示”。

这是一个例外：

```
[10/21/12 12:56:53:296 CDT] 00000045 ExceptionHand E redacted.loggi
ng.jdk14.LogWrapper error Failed to invoke @ExceptionHandler method: public 
redacted.model.view.ValidationErrorResponse redacted.controller.Re
stController.handleValidationException(redacted.util.ValidationExceptio
n,javax.servlet.http.HttpServletResponse)

Originating Class/Method:redacted.web.ui.filter.AccessControlFilter.pr
ocessFilter()

                                 org.springframework.web.HttpMediaTypeNotAccepta
bleException: Could not find acceptable representation
        at org.springframework.web.servlet.mvc.method.annotation.AbstractMessage
ConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMeth
odProcessor.java:115) 
```

这是代码：

```
@ExceptionHandler(ValidationException.class)
@ResponseStatus(value = HttpStatus.PRECONDITION_FAILED)
@ResponseBody
public ValidationErrorResponse handleValidationException(ValidationException ex, HttpServletResponse response) {
    List<ValidationError> errs = new LinkedList<ValidationError>();
    for (ObjectError er : ex.getErrors()) {
        errs.add(new ValidationError(er.getObjectName(), er.getDefaultMessage()));
    }

    return new ValidationErrorResponse(errs);

}

@RequestMapping(value = "/search")
@ResponseBody
public SearchResult search(@Valid @ModelAttribute SearchRequest searchRequest, BindingResult bResult) {
    if (bResult.hasErrors()) {
        throw new ValidationException(bResult.getAllErrors());
    }
    return searchService.search(searchRequest);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T00:48:01.220

如果你正在阅读这篇文章，你可能对我是如何让它工作的有一些疑问。简短的回答是我不知道。我恢复了我的代码并从这里重新实现（实际上是复制并粘贴了控制器位），它突然开始工作了。

如果您使用的是 Spring 3.1.2，@ExceptionHandler 和 @ResponseBody 确实可以工作。

我对为什么这最初不起作用的初步解释是，它可能是用户错误或我正在使用的（非常复杂，这个应用程序很大）部署脚本中的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T20:23:50.537

当我需要为以“/blah/blah.xml”之类的已知扩展名结尾的请求返回 JSON 错误响应时，我遇到了这个问题。在这种情况下，Spring 支持基于扩展的表示匹配，并忽略 Accept 标头（最新的 Spring 4.1.5 也是这种情况）。

无论请求是什么，我都使用以下内容“锁定”到 JSON 响应。

```
@Configuration
@EnableWebMvc
public class ApplicationConfiguration extends WebMvcConfigurerAdapter {
    public void configureContentNegotiation(ContentNegotiationConfigurer configurer) {
        configurer.favorPathExtension(false);
        configurer.ignoreAcceptHeader(true);
        configurer.defaultContentType(MediaType.APPLICATION_JSON);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T16:11:58.743

问题似乎是 Spring 没有如何将其转换 `ValidationErrorResponse`为，例如它是否应该将其转换为 JSON、XML 或其他东西？尝试返回 ResponseEntity 因为您可以直接控制内容类型。

```
protected ResponseEntity<ValidationErrorResponse> createResponseEntity(ValidationErrorResponse restApiError)
    {
        HttpHeaders headers = new HttpHeaders();
        headers.setContentType(MediaType.APPLICATION_JSON);

           // assuming your ValidationErrorResponse object has an http code stored in it
        HttpStatus responseStatus = HttpStatus.valueOf(restApiError.getHttpStatus());
        ResponseEntity<RestApiError> result = new ResponseEntity<>(restApiError, headers, responseStatus);
        return result;
    } 
```

我在我的应用程序中使用了类似的东西，我还有一堆我可以抛出的 RuntimeExceptions，其中包含足够的信息来生成正确的错误响应。

# c - 在 C 中为灵活的数据类型项调用堆栈 API

> ID：13000758
> 
> 赞同：0
> 
> 时间：2012-10-21T18:21:57.963
> 
> 标签：c, api, stack

这里的问题是为 C 中的调用堆栈设计一个 API。要压入堆栈的项可以有不同的大小，从 1 字节到 N 字节不等（并且可以是它们的混合体——例如，压入一个首先是char，然后是int，然后是struct）。堆栈可以实现为链表或动态数组，没有约束。

我的解决方案：由于将被压入堆栈的项目的数据类型是未知的，我认为使用 void* 指针可能是一个合适的解决方案。

问题：从工程的角度来看，这是实现它的最佳方式吗？有更好的方法吗？请在下面找到我的代码。谢谢！

```
#include <stdio.h>
#include <stdlib.h> 
#include <stdbool.h>

typedef struct stack_node snode;
struct stack_node{
    snode *next;
    void *data;
};

bool push(snode **top, void* data)
{
    snode *current = (snode*)malloc(sizeof(snode));
    if(!current)
        return false;
    current->data = data;
    current->next = *top;
    *top = current;
    return true;
}

bool pop(snode **top, void **data)
{
    snode* current;
    current = *top;
    if(!current)
        return false;
    *data = current->data;
    *top = current->next;
    free(current);
    return true;
}

int main()
{
    int num=0, i;
    snode* top = NULL;

    int arr[10] = {1,2,3,4,5,6,7,8,9,10};
    for(i = 0; i < 10 ; i++ )
    {
        if(!push(&top, &arr[i]))
            printf("error allocating memory\n");
    }
    void *data;
    while(pop(&top, &data))
    {
        printf("popped %d\n", *((int*)data));
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:26:28.800

如果数据不应该存在于堆栈中，则使用指针将是一个不错的选择。如果我想从堆栈中传递超过 4 个字节的数据怎么办？指针不是那里的最佳选择。在我看来，您应该将数据逐字节插入堆栈。这意味着`unsigned char`也是一个不错的选择。

# jquery - 在使用 jQuery 提交之前验证字段

> ID：13000760
> 
> 赞同：0
> 
> 时间：2012-10-21T18:22:05.290
> 
> 标签：jquery

我有一个普通的按钮：

```
<button value="finish_with_send" class="finish_with_send">Send</button> 
```

我需要在提交之前验证两个字段，因此我已将此按钮替换为以下内容：

```
<a href="javascrtip:void(0)" class="finish_with_send">Send</a> 
```

和验证：

```
$(".finish_with_send").click(function() {
if(!$("#feedback_string").val() || !$("#feedback_title_string").val()) {
        // Validation failed, do something  
    } else {
        // Validation suceeded, submit
    }
}) 
```

问题是我需要像上一个按钮一样提交，其中值出现以识别提交类型：

```
value="finish_with_send" 
```

有没有办法用jQuery再次做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:25:48.970

保留您的`<button>`（或者`<input type="submit">`我建议您使用它以获得更好的浏览器支持）......像这样更改您的javascript：

```
$(".finish_with_send").click(function(event) {
if(!$("#feedback_string").val() || !$("#feedback_title_string").val()) {
        event.preventDefault(); //Stop it submitting.
        return false;
    } else {
        return true; //Carry on.
    }
})​ 
```

并让你的按钮变成`submit`这样的形式：

```
<button type="submit" value="finish_with_send" class="finish_with_send">Send</button> 
```

`event.preventDefault()`停止事件触发的默认操作，在`<button type="submit">`它的默认操作是提交表单的情况下。

工作示例：http: [//jsfiddle.net/JUSsf/1/](http://jsfiddle.net/JUSsf/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:30:55.890

您可以使用触发提交`$('#formID').submit()`

如果您保留按钮，您可以在表单提交处理程序中管理验证。如果用户绕过按钮在表单中点击“Enter”，将会有所帮助。

```
$('#formID').submit(function() {
    if (!$("#feedback_string").val() || !$("#feedback_title_string").val()) {
        // Validation failed, do something 
        return false; /* stop browser submitting*/
    }

})​ 
```

# c# - 使用 lb_addstring 添加到 c# 列表框中的项目不会影响 items.count

> ID：13000762
> 
> 赞同：2
> 
> 时间：2012-10-21T18:22:09.607
> 
> 标签：c#, listbox

AC# WinForms 应用程序在表单上有一个 ListBox。ListBox 窗口句柄被传递给使用 SendMessage(hWnd,LB_ADDSTRING...) 将项目添加到列表框中的旧版 Win32 DLL。这些字符串在运行时出现在列表框中，但是 listbox.Items.Count 为 0，并且无法使用 listbox.Items[x].ToString() 访问单个项目

您需要在 C# 应用程序中做些什么来让它意识到这些字符串在其列表中，因此应该反映在 Items.Count 中，并且可以使用 Items[x] 进行访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T21:48:05.393

创建一个`ListBox`覆盖的子类`WndProc`，监听`LB_ADDSTRING`消息（值 = 0x180），防止这些消息被正常处理，而是将它们包含的数据添加到`Items`集合中。尚未测试此代码，但它应该足够接近您的需要：

```
using System;
using System.Runtime.InteropServices;
using System.Windows.Forms;

public class LegacyListBox : ListBox
{
    private const int LB_ADDSTRING = 0x180;

    public LegacyListBox() { }

    protected override void WndProc(ref Message m)
    {
        if (m.Msg == LB_ADDSTRING)
        {
            Items.Add(Marshal.PtrToStringUni(m.LParam));

            // prevent base class from handling this message
            return;
        }

        base.WndProc(ref m);
    }
} 
```

# contact - BulletPhysic：接触力/脉冲

> ID：13000764
> 
> 赞同：7
> 
> 时间：2012-10-21T18:22:40.997
> 
> 标签：contact, game-physics, bullet, bulletphysics

我想检测一个（球）何时接触到另一个物体（目标），我想知道那个接触的冲动。

我知道三种检测接触者的方法

```
gContactAddedCallback 
```

或者

```
 int numManifolds = m_dynamicsWorld->getDispatcher()->getNumManifolds();
    for (int i=0;i<numManifolds;i++)
    {
        btRigidBody* obA = static_cast<btRigidBody*>(contactManifold->getBody0());
        btRigidBody* obB = static_cast<btRigidBody*>(contactManifold->getBody1());
        // May be there is contact obA and obB

        btPersistentManifold* contactManifold =  m_dynamicsWorld->getDispatcher()->getManifoldByIndexInternal(i);
        int numContacts = contactManifold->getNumContacts();
        for (int j=0;j<numContacts;j++)
        {
            btManifoldPoint& pt = contactManifold->getContactPoint(j);
            if (pt.getDistance()<0.f)
            {
                // One contact point is inside of another object
                // But some contacts are ignored
            }
        }
    } 
```

或者

检查线速度和角速度的变化。（不清楚是否有接触以及是什么物体改变了速度，是物体还是阻尼、重力还是一些力场。

* * *

我希望有联系信息，包括联系冲动。我注意到在 1 帧模拟中解决了一些接触，其他需要 2 帧并且脉冲低两倍。（我得到了它的调试代码。）我会很完美地获得 1 个完全冲动的联系通知。

我列出的所有方法都没有为我提供联系人的完整信息。有时它会在球飞到目标附近甚至没有碰到它时发射。

预期的方法是什么？

如果接触能量很高，这些信息可以用来播放撞击声或开始一些动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T19:36:44.520

此代码应为您指明可能的方向

```
// some global constants needed

enum collisiontypes {
    NOTHING         = 0,    // things that don't collide
    BALL_BODY       = 1<<2, // is ball
    TARGET_BODY     = 1<<3  // is target
};

int ballBodyCollidesWith    = TARGET_BODY | BALL_BODY;  // balls collide with targets and other balls
int targetBodyCollidesWith  = BALL_BODY;    // targets collide with balls

// ...
// bodies creation

dynamicsWorld->addRigidBody(ballBody, BALL_BODY, ballBodyCollidesWith);

dynamicsWorld->addRigidBody(targetBody, TARGET_BODY, targetBodyCollidesWith);

//...
// find out whether a ball collides with a target

int numManifolds = m_dynamicsWorld->getDispatcher()->getNumManifolds();
for (int i=0;i<numManifolds;i++)
{
    btRigidBody* obA = static_cast<btRigidBody*>(contactManifold->getBody0());
    btRigidBody* obB = static_cast<btRigidBody*>(contactManifold->getBody1());
    // May be there is contact obA and obB

    // ignore bodies that are not balls or targets
    if (
        (!(obA->getCollisionFlags() | BALL_TYPE) && !(obB->getCollisionFlags() | BALL_TYPE))    // there is no BALL_TYPE colliding
        ||
        (!(obA->getCollisionFlags() | TARGET_TYPE) && !(obB->getCollisionFlags() | TARGET_TYPE))    // there is no TARGET_TYPE colliding
        )
        continue; // no more searching needed

    btPersistentManifold* contactManifold =  m_dynamicsWorld->getDispatcher()->getManifoldByIndexInternal(i);
    int numContacts = contactManifold->getNumContacts();
    for (int j=0;j<numContacts;j++)
    {
        btManifoldPoint& pt = contactManifold->getContactPoint(j);

        printf("%f\n", pt.getAppliedImpulse()); // log to see the variation range of getAppliedImpulse and to chose the appropriate impulseThreshold
        if (pt.getAppliedImpulse() > impulseThreshold)
        {
                // increase score or something
                break; // no more searching needed
        }
    }
} 
```

# git - git clone 的输出

> ID：13000766
> 
> 赞同：4
> 
> 时间：2012-10-21T18:22:58.613
> 
> 标签：git

关于 git clone 的输出，我有一些不明白的地方。在以下示例中：

```
Cloning into 'omap-kernel'...
remote: Counting objects: 2649896, done.
remote: Compressing objects: 100% (418466/418466), done.
remote: Total 2649896 (delta 2218148), reused 2636767 (delta 2205019)
Receiving objects: 100% (2649896/2649896), 575.45 MiB | 4.76 MiB/s, done.
Resolving deltas: 100% (2218148/2218148), done. 
```

`objects`和是什么`delta`意思`reused`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T19:10:55.607

Git 将所有内容存储在对象中（例如 blob、树、提交）。*Pro Git*书有一个关于该主题的精彩介绍章节（ [Git Internals ）。](http://git-scm.com/book/en/Git-Internals)关于[Git 对象](http://git-scm.com/book/en/Git-Internals-Git-Objects)的部分是关于如何手动创建对象以及 git 如何使用这些资源操作的很棒的教程。

显示*总数*和*重用*信息，因为 git 还压缩数据（有关详细信息，请参阅 的`git gc`描述）。否则存储库中有很多冗余。

# java - 泛型地狱：hamcrest 匹配器作为方法参数

> ID：13000767
> 
> 赞同：17
> 
> 时间：2012-10-21T18:23:01.883
> 
> 标签：java, generics, hamcrest

所以，让我们有一个字符串列表和一个函数，它接受一个 Hamcrest 匹配器并返回`matches()`提供的匹配器方法的结果：

```
public boolean matchIt(final Matcher<? super List<String>> matcher) {
    final List<String> lst = obtainListFromSomewhere();
    return matcher.matches(lst);
} 
```

到目前为止，一切都很好。现在我可以轻松调用：

```
matchIt(empty());
matchIt(anything());
matchIt(hasItem("item"));
matchIt(everyItem(equalToIgnoringCase("item"))); 
```

...因为所有这些工厂静态方法都会生成适合方法签名的匹配器`Matcher<? super List<String>>`。

但是，我相信接受 Iterable 对象的匹配器也应该被该`matchIt()`方法接受：

```
matchIt(everyItem(anything())); 
```

所以我天真地改变了`matchIt()`方法签名：

```
public boolean matchIt(final Matcher<? super List<? super String>> matcher); 
```

但它根本不起作用。不仅不接受`everyItem(anything())`，甚至不接受之前正确的`everyItem(equalToIgnoringCase("item"))`说法（1.7.0_05编译器版本）：

```
actual argument Matcher<Iterable<String>> cannot be converted to Matcher<? super List<? super String>> by method invocation conversion 
```

什么？那么这里有什么问题呢？是`matchIt()`方法签名还是`everyItem()`Hamcrest 签名设计错误？还是只是 Java 泛型系统无法修复？非常感谢您的评论！

编辑@rlegendi 我的目的是为客户端提供一个接口，以添加和执行关于列表的谓词。这就是`matchIt()`方法。在这种情况下调用`matchIt(anything())`是有意义的，客户端想知道列表是否是任何东西。调用`matchIt(empty())`意味着客户端想知道列表是否为空。反之亦然。`matchIt(everyItem(equalToIgnoringCase("item")))`_`matchIt(hasItem("item"))`

我的目标是尽可能获得*最佳* `matchIt()`方法签名。对于`Matcher<? super List<String>>`之前的所有场景都可以正常工作。但是，我相信客户端也应该被允许添加`Matcher<Iterable<Object>>`匹配器（例如`matchIt(everyItem(notNullValue())`，这里非常有意义，客户端想知道列表中的每个 String 项是否不为空）。

但是我找不到正确的签名，`matchIt(Matcher<? super List<? super String>>)`不适用于`everyItem(notNullValue());`

我使用 Hamcrest 1.3。

编辑2：

我相信我已经找到了我的根本误解。

该`everyItem(anything())`表达式返回一个类型为 的对象`Matcher<Iterable<Object>>`。所以我可以轻松做到`Matcher<Iterable<Object>> m = everyItem(anything());`

但是我不明白为什么我不能这样做`Matcher<? super List<? super String>> m1 = m;`。似乎`Matcher<Iterable<Object>>`不是`Matcher<? super List<? super String>>`，但我不明白为什么。

我什至做不到`Matcher<? super List<?>> m1 = m;`。`Matcher<Iterable<Object>>`不是`Matcher<? super List<?>>`吗？为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T22:02:08.797

> 但是，我相信接受 Iterable 对象的匹配器也应该被 matchIt() 方法接受

不，这是不正确的。而不是`Iterable`，让我们暂时考虑`List`一下。所以你有一个`Matcher<List<Object>>`，它的`matches`方法需要一个`List<Object>`。现在，这需要一个`List<String>`吗？不，您可能已经知道原因——因为它可以将一个类型的对象添加`Object`到列表中。

现在，我知道在命名类`Matcher`时，您希望该`matches`方法是只读的，而不是改变给它的列表。但是，不能保证这一点。如果它确实没有向列表中添加任何内容，则匹配器的正确类型是`Matcher<List<?>>`，其中 (1) 不允许该`matches`方法向列表中添加任何内容，除了`null`，并且 (2) 将允许该`matches`方法获取随便哪种。

我相信您当前的方法签名`public boolean matchIt(final Matcher<? super List<String>> matcher)`已经允许`Matcher<List<?>>`（或`Matcher<Iterable<?>>`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T00:06:53.020

这有什么问题吗？

```
public boolean matchIt(final Matcher<? extends Iterable<String>> matcher); 
```

# php - 添加 n 个额外的文本行进行翻译

> ID：13000769
> 
> 赞同：1
> 
> 时间：2012-10-21T18:23:11.657
> 
> 标签：php

我正在尝试向应由语言 php 文件翻译的 php 页面添加额外的文本行。

代码是这样的

```
<?php 
    if($phone) { 
?>
<b>
<?php 
    _de('Phone',49); 
?>
:</b><span>
<?php 
    echo $phone; 
?>
</span>
<?php 
    } 
?> 
```

在这里我想添加一行像'sentence'，1045（翻译的句子的编号。但每次我尝试添加一个php行它都会出错并且一切都停止工作。

```
<div class="clear10"></div><a name="contactform"></a>
<div class="sendemail rad3 bluebutton l"<?php if ($err && $_POST['action'] == "contactform") { echo ' style="display: none;"'; } ?>><i><?php _de('Contact this escort',784); ?></i></div>
<div class="clear"></div>
<?php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:43:51.447

试试这个，也许`_de(...)`需要打印

```
<b>
<?php 
    echo _de('Phone',49); 
?>
:</b><span> 
```

# c# - mvc 应用程序中的表单身份验证，使用外部服务进行身份验证

> ID：13000770
> 
> 赞同：2
> 
> 时间：2012-10-21T18:23:28.860
> 
> 标签：c#, asp.net-mvc, security, asp.net-mvc-4, forms-authentication

我目前正在开发一个 MVC4 应用程序，不同类型的用户可以访问该站点并登录。将有 2 种不同的用户类别，A 类和 B 类，可以访问该站点的不同区域。

用户身份验证是通过对身份验证提供程序的服务调用，他们将返回用户是否已通过身份验证的状态以及用户信息，例如姓名、地址等。此时我想跟踪用户是否已通过身份验证以及他们的角色。以前我会创建一个包含用户名、地址等的 cookie 并存储在客户端机器上。但这很容易被操纵，因为 cookie 是纯文本。

但我想加强网站的安全性，因此考虑使用 FormsAuthentication。我知道这会生成一个 cookie，但它更安全。

这是正确的方法吗？用户信息（例如地址等）是否可以存储在此 cookie 中？我想存储它的会话对我不可用。我将如何使用 FormsAuthentication 实现这一点？

我的第二个问题是，一旦用户登录，我怎么知道他们的角色？

最后，一旦用户登录，整个网站是否应该通过https？即使是对所有人开放但由登录用户访问的区域？登录的用户将在每个页面的屏幕上显示他们的信息，例如 Welcome John。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T19:53:44.437

> 这是正确的方法吗？用户信息（例如地址等）是否可以存储在此 cookie 中？

您是正确的，表单身份验证默认情况下会将用户详细信息存储在加密的 cookie 中，因此它比您现在拥有的更安全。

使用表单身份验证，您可以指定进入客户端 cookie 的字符串内容。但是，我认为您应该存储在 cookie 中的唯一信息是用户标识符和角色标识符。这些信息应该是根据请求对用户进行身份验证和授权所必需的全部信息。任何额外的信息（例如地址）只会增加 cookie 的权重，并且可以在需要时从服务中获取。

要使用表单身份验证，只需将身份验证元素添加到 system.web 部分内的 web.config 中：

```
<authentication mode="Forms">
  <forms loginUrl="~/Login/Home" timeout="60" />
</authentication> 
```

调用服务验证用户后，通过 FormsAuthentication 静态类设置 Cookie 数据。Cookie 数据需要包含用户的标识符（例如，如果您想显示用户的姓名）和角色标识符（解释如下）。

```
var username = // get name from service
var role = // get role from service
FormsAuthentication.SetAuthCookie(username + "-" + role, keepUserLoggedIn); 
```

当用户退出时，使用相同的类来删除 cookie。

```
FormsAuthentication.SignOut(); 
```

* * *

> 我的第二个问题是，一旦用户登录，我怎么知道他们的角色？

asp.net MVC 提供了一种简单的机制，仅允许特定用户使用您的应用程序区域。通过`[Authorise]`在任何控制器类或操作方法上使用属性，仅允许登录用户访问 - 即存在 FormsAuthentication cookie 的用户。未登录的用户将被重定向到 web.config 的 authenication 元素中指定的 LoginUrl。

Authorize 属性也有一个重载，它只允许特定角色的用户访问控制器/方法。这将只允许具有“管理员”角色的登录用户访问控制器的任何操作方法。

```
[Authroise("Admin")]
public class EditController : Controller
{} 
```

然后您需要创建您自己的系统接口实现`RoleProvider`。该接口包含许多方法，但并非所有方法都是必需的。您需要实施以检查用户所在角色的唯一方法是`GetRolesForUser`. 该`[Authorise]`属性将使用这来确定用户是否可以查看。

```
public class MyRoleProvider : RoleProvider
{
    public override string[] GetRolesForUser(string username)
    {
        var authCookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];

        if (authCookie != null && !String.IsNullOrEmpty(authCookie.Value))
        {
            var authTicket = FormsAuthentication.Decrypt(authCookie.Value);
            var roles = authTicket.UserData.Split(',')[1];
            return roles.Split(';');
        }

        throw new MemberAccessException("User not logged in");
    }
} 
```

然后，您只需要告诉您的应用程序使用属性`RoleProvider`何时`Authorise]`启动的实现。这也可以通过 system.web 元素中的 web.config 完成。

```
<roleManager defaultProvider="MyRoleProvider" enabled="true">
  <providers>
    <clear />
    <add name="MyRoleProvider" type="My.Namespace.MyRoleProvider" />
  </providers>
</roleManager> 
```

* * *

> 最后，一旦用户登录，整个网站是否应该通过https？即使是对所有人开放但由登录用户访问的区域？

理想情况下，是的。一旦用户登录并且您设置了 FormsAuthentication cookie，您需要保护该 cookie 免受外部拦截。为了防止这种情况，您应该在应用程序的所有区域强制执行 https 协议。如果用户的请求被拦截并制作了 cookie 的副本，那么“中间人”可以在他的浏览器中设置 cookie 的副本并获得对您网站受保护区域的访问权限。使用 MVC，您可以`[RequireHttpsAttribute]`在任何特定的控制器或操作方法上使用类似于`[Authorise]`Attribute 的方法。在 MVC4 中，有一种简单的方法可以“全局”应用它。在 Web 项目的 App_Start 文件夹中，找到`FilterConfig`该类并将以下行包含在`RegisterGlobalFilters`方法中：

```
filters.Add(new RequireHttpsAttribute()); 
```

# php - 缺失：在树枝中的属性 ID 之后

> ID：13000771
> 
> 赞同：0
> 
> 时间：2012-10-21T18:23:34.240
> 
> 标签：php, javascript, symfony, twig

我是 Symfony2 的新开发人员，所以我很难将我从控制器中获得的对象数组转换为一个数组，其中包含我的树枝中的 JavaScript。

问题是我有一个数组数组：

这是一个例子

```
 $Flight = array
                (
                '1' => array
                    (
                    '5' => array
                        (
                        'LFID' => '6684',
                        'DepartureDate' => '2012-10-22T12:30:00',
                        'ArrivalDate' => '2012-10-22T14:00:00',
                        'BaseFareAmtInclTax' => '343.50',
                        'ReturnFlightSegmentDetails' =>

                    ),
                    '10' => array
                        (
                        'LFID' => '6684',
                        'DepartureDate' => '2012-10-23T12:30:00',
                        'ArrivalDate' => '2012-10-23T14:00:00',
                        'BaseFareAmtInclTax' => '243.50',
                        'ReturnFlightSegmentDetails' =>
                        array
                            (
                            '150' => array
                                (
                                'LFID' => '6647',
                                'DepartureDate' => '2012-10-24T12:25:00',
                                'FareTypeName' => 'Change',
                                'FareTypeID' => '22',
                                'BaseFareAmtInclTax' => '198',
                            )

                        )
                    )
                ),
            ); 
```

在我正在做的树枝上：

```
{% for flight in flights%}
                   var $FlightSegment = new Array();
                  $flight.push({
                        DepartureDate:"{{flight.DepartureDate}}",
                        ArrivalDate:"{{flight.ArrivalDate}}",
                        Amount:"{{flight.BaseFareAmtInclTax}}",
                        {% for ReturnFlightSegmentDetails in flight.ReturnFlightSegmentDetails %}
                          $FlightSegment.push({
                                ReturnFlightSegmentDetails :"{{ReturnFlightSegmentDetails.DepartureDate}}",   
                           });
                        {% endfor %}

                    });

                {% endfor %} 
```

但是“$FlightSegment.push”行会产生一个错误，即

> 缺失：在属性 ID 之后

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:28:46.613

在 php 中以您想要的格式获取数组然后将其作为 json 回显可能更容易：

```
{% autoescape false %}
    var jsflights = {{ phpflights|json_encode() }};
{% endautoescape %} 
```

在上面的示例中，我假设变量 $phpflights 是一个 php 数组，格式为您希望传递给视图的格式。上面的代码在视图中，并创建了一个与 php 数组结构相同的 javascript 数组 jsflights。

这样您就不需要编写两次数组代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:04:29.740

您的原始模板代码看起来包含 PHP，这在 twig 模板中是不允许的。

更一般地说，模板应该用于呈现数据，并且可能对其进行最少的修改以帮助实现这一点。对于您正在做的事情，看起来您最好在 PHP 的控制器中执行此操作，然后将已经准备好显示的结果传递给 twig。

# android - 尝试使用适配器自定义微调器

> ID：13000773
> 
> 赞同：2
> 
> 时间：2012-10-21T18:23:55.413
> 
> 标签：android, spinner, android-arrayadapter

我只想更改微调器文本的字体和大小。

我做了一些初步的尝试。没有什么崩溃，但我的微调器是空白的。（我还没有实现自定义字体，我只是想让微调器先工作。

在代码中：

```
protected SpinnerSortAdapter sAdapter;
    protected Spinner sort;
    protected String[] strings;

        sort = (Spinner) getActivity().findViewById(R.id.spinner2);
        strings = getActivity().getResources().getStringArray(R.array.sorting_items);
        SpinnerSortAdapter sAdapter = new SpinnerSortAdapter(getActivity(),
                android.R.layout.simple_spinner_item, strings);
        sAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        sort.setAdapter(sAdapter);
        sort.setOnItemSelectedListener(new MyOnItemSelectedListener()); 
```

适配器：

```
public class SpinnerSortAdapter extends ArrayAdapter<String> {
public SpinnerSortAdapter(Context context, int textViewResourceId,
        String[] strings) {
    super(context, textViewResourceId, strings);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = super.getView(position, convertView, parent);
    if (view instanceof TextView) {
        ((TextView) view).setTextSize(5);
    }
    return view;
}

public View getDropDownView(int position, View convertView, ViewGroup parent) {
    View row = super.getView(position, convertView, parent);
    return (row);
} 
```

}`enter code here`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T18:39:46.013

您没有正确初始化适配器。您的版本`ArrayAdapter`需要两个 int，一个指向行的布局文件，一个 int 表示该`TextView`布局文件中小部件的 id。此适配器将为空。你的代码应该是这样的：

```
String[] items = getResources().getStringArray(R.array.sorting_items);
SpinnerSortAdapter adapter = new SpinnerSortAdapter(getActivity(), android.R.layout.simple_spinner_item, items); 
```

适配器也将更改为：

```
 public class SpinnerSortAdapter extends ArrayAdapter<String> {

    public SpinnerSortAdapter(Context context, int textViewResourceId,
            String[] strings) {
        super(context, textViewResourceId, strings);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = super.getView(position, convertView, parent);
        if (view instanceof TextView) {
            ((TextView) view).setTextSize(5);
        }
        return view;
    }

    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        View row = super.getView(position, convertView, parent);
        return (row);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T18:40:58.413

一个更容易和更快的方法是自定义您传递给适配器而不是适配器本身的*布局：*

```
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(getActivity(), R.layout.spinner_item, R.array.sorting_items);
adapter.setDropDownViewResource(R.layout.spinner_dropdown_item); 
```

将此保存`spinner_dropdown_item.xml`为`res/layout`：

```
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@android:id/text1"
    style="?android:attr/spinnerDropDownItemStyle"
    android:singleLine="true"
    android:layout_width="fill_parent"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:ellipsize="marquee" 
    android:textSize="15sp"/> 
```

`simple_spinner_dropdown_item.xml`（我只是在底部复制并添加了 textSize 属性。你应该对`simple_spinner_item`布局做同样的事情。）

这种方法更快，因为您不会在运行时更改任何属性。XML 是经过预处理的。`getView()`虽然自定义适配器在您每次调用或`getDropDownView()`...时都会更改字体和大小

# java - eclipse：小程序浏览器调试：无法连接到远程VM。拒绝连接

> ID：13000775
> 
> 赞同：1
> 
> 时间：2012-10-21T18:23:59.417
> 
> 标签：java, applet, remote-debugging

当我尝试在浏览器中远程调试小程序时，会发生此错误：`Failed to connect to remote VM`。拒绝连接。为什么它可以占据一席之地？以下是我的行动：

```
1\. javac -g TestApplet.java
2\. create html file specifying TestApplet.class
3\. in java control pannel: -Djava.compiler=NONE -Xnoagent -Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n
4\. open in browser html file with applet
5\. in the eclipse in applet's code set a breakpoint
6\. debug configuration -> remote java configuration create new config with parameters: SocketAttach, localhost, 8000
7\. debug 
```

之后：错误消息 - 无法连接到远程虚拟机。连接被拒绝。如何解决此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-23T10:44:05.160

浏览器的 Java 插件有自己安装的 Java，可能你错过了它（在错误的 Java 控制面板中设置参数）。Fe 我有`C:\Program Files (x86)\Java\jre7\bin`

并检查此参数以在 JCP (javacpl.exe) 中设置

```
-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=1044 
```

（[https://stackoverflow.com/a/173447/2171669](https://stackoverflow.com/a/173447/2171669)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:43:43.867

```
-Djava.compiler=NONE -Xnoagent -Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n 
```

作为

```
-Djava.compiler=NONE -Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n 
```

`-Xdebug -Xnoagent`调试时不要使用这两个选项。

1.还要检查Eclipse配置中的端口号和你的应用程序的端口号可能不一样。
2.您可能没有使用正确的参数启动您的应用程序。

当您遇到“连接被拒绝”错误时，这些都是简单的问题。

# mysql - 如果我有一个带有允许字母的多重集，使用哪种数据库来存储单词列表然后快速搜索单词？

> ID：13000777
> 
> 赞同：3
> 
> 时间：2012-10-21T18:24:01.007
> 
> 标签：mysql, sql-server, database, relational-database

我有一个巨大的单词列表，大约 100 万个单词。如果我使用 MySQL 或 SQL Server 等关系数据库并将所有单词放在一张表的一列中，我可以期待什么性能？数据库必须做的很简单：只需搜索包含某些给定字母的单词（例如：AOEPLMNUS）。（就像拼字游戏一样）必须产生结果：

```
 maple
 ample
 mole
 lamp
 palm
 mope
 poem 
```

等等...

你在想什么？我可以期待来自数据库的足够快的响应吗？我必须使用什么数据库，MySQL是不错的选择吗？除了 SQL SERVER 2010，我没有其他人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:37:22.177

仅出于测试目的，[我已经开发并解决了您的场景](http://beutil.blogspot.com.es/2012/04/pujar-aplicacio-mvc-3-dinahosting.html)。[该解决方案是使用EF](http://msdn.microsoft.com/en-us/data/ef.aspx)和 SQL-Server构建的。

我在单词（'paraules'）和字母（'lletres'）之间建模了一个 N:M 关系，一个字母在一个单词中出现了多少次：

![在此处输入图像描述](../Images/d57c0692bf3c9d8d62d1c318d37c76a1.png)

我还用 linq 编写了 EF 查询：

![在此处输入图像描述](../Images/a0314b01feceb50b00d65ab47547732a.png)

[您可以在此处测试性能（直到 2013 年 2 月）](http://www.joincar.cat/a/search/go)。

# twitter-bootstrap - AngularJS 和 Bootstrap 的拆分按钮下拉菜单

> ID：13000786
> 
> 赞同：11
> 
> 时间：2012-10-21T18:25:00.100
> 
> 标签：twitter-bootstrap, angularjs, angular-ui

你知道是否有人将 Bootstrap 的脚本移植到 AngularJS 中吗？

我的应用程序需要 Bootstrap 的[拆分按钮下拉菜单](http://twitter.github.com/bootstrap/components.html#buttonDropdowns)，我真的很想避免拉入 jQuery。我似乎无法通过谷歌搜索它。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-31T12:47:16.533

看看这个演示：http: [//jsfiddle.net/guillaumebiton/8muRC/](http://jsfiddle.net/guillaumebiton/8muRC/)

只有 Angular 的强大功能：

```
<div class="btn-group" ng-class='{open: open}'>
    <button class="btn">Action</button>
    <button class="btn dropdown-toggle" data-toggle="dropdown" ng-click='open=!open'>
        <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
        <li><a href="#">Action</a></li>
        <li><a href="#">Another action</a></li>
        <li><a href="#">Something else here</a></li>
        <li class="divider"></li>
        <li><a href="#">Separated link</a></li>
    </ul>
</div> 
```

它只使用一个变量“open”，它是真或假。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-21T18:50:44.520

作为 angular-ui 的一部分，我们正致力于在纯 AngularJS 中创建引导程序的小部件（不依赖于 3rd 方 JS 库，仅依赖于引导程序的 CSS）。

存储库位于此处：[https ://github.com/angular-ui/bootstrap](https://github.com/angular-ui/bootstrap)

这是正在进行的大量工作，但已经有 dropdown-toggle 指令： [https ://github.com/angular-ui/bootstrap/blob/master/src/dropdownToggle/dropdownToggle.js](https://github.com/angular-ui/bootstrap/blob/master/src/dropdownToggle/dropdownToggle.js)

你可以像这样使用它：

```
<div ng-controller="MyCtrl">
  <div class="btn-group">
      <a class="btn dropdown-toggle">
        Actions
        <span class="caret"></span>
      </a>
      <ul class="dropdown-menu">
          <li><a>Action 1</a></li>
          <li><a>Action 2</a></li>
      </ul>
  </div>
</div> 
```

请注意，该指令在类级别上运行，因此添加`dropdown-toggle`类使其可操作就足够了！

再一次，这是正在进行的工作（整个工作大约在 2-3 周前开始），因此非常欢迎错误报告/拉取请求！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T15:54:15.043

您可以尝试使用此指令将 angularjs 选择框转换为引导程序的下拉列表：[http](http://jsfiddle.net/M32pj/28/) ://jsfiddle.net/M32pj/28/ `示例：

```
<select ng-model="example1" bs-selectbox>
 <option value="1">One</option>
 <option value="2">Two</option>
</select> 
```

`

# html - 将两个子 div 并排放置在父 div 中

> ID：13000789
> 
> 赞同：1
> 
> 时间：2012-10-21T18:25:08.723
> 
> 标签：html, css

这就是我到目前为止得到的：http: [//jsfiddle.net/cHKF4/3/](http://jsfiddle.net/cHKF4/3/)

但我想放小盒子（盒子1和盒子2在里面）

```
#late {
    position: relative;
    border-style: solid;
    border-width: 3px;
    border-color: #00fff3;
    height: 200px;
       width: 960px;
    margin: 0 auto;
    margin-top: 30px;
}

#box1 {
    position: relative;
    border-style: solid;
    border-width: 1px;
    border-color: #55fff3;
    height: 100%;
    width: 200px;
    margin: 0 auto;
}

#box2 {
    position: relative;
    border-style: solid;
    border-width: 3px;
    border-color: #55fff3;
    height: 100%;
    width: 200px;
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:37:23.283

[这是您要实现的目标吗](http://jsfiddle.net/cHKF4/7/)（并排并以页面为中心在内部`box1`居中）：`box2``late``late`

```
<div id="late">
    <div id="inner">
       <div id="box1"></div>
       <div id="box2"></div>
    </div>
</div>​

#late {
    border: solid 3px #00fff3;
    height: 200px;
    width: 960px;
    margin: 30px auto 0 auto;
}

#inner {
    width: 408px;
    height: 100%;
    margin: 0 auto 0 auto;
}

#box1 {
    border: solid 1px #55fff3;
    height: 100%;
    width: 200px;
    float: left;
}

#box2 {
    border: solid 3px #55fff3;
    height: 100%;
    width: 200px;
    float: left;
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T18:33:18.983

我不太明白您要达到的目标。您是否要在 #late 中将 #box1 和 #box2 居中？

如果您只是想将它们并排放置在#late 中，我会这样做：[http ://codepen.io/AntonNiklasson/pen/rIdcj](http://codepen.io/AntonNiklasson/pen/rIdcj)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T18:33:23.943

添加`float:left`到两者`#box1`和`#box2`

```
#box1 {
    float:left;
    position: relative;
    border-style: solid;
    border-width: 3px;
    border-color: #55fff3;
    height: 100%;
    width: 200px;
}

#box2 {
    float:left;
    position: relative;
    border-style: solid;
    border-width: 3px;
    border-color: #55fff3;
    height: 100%;
    width: 200px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T18:33:59.927

尝试

```
#box1 {
position: absolute;
top: 10px;
left: 10px;
} 
```

保持父容器的位置设置为相对。

# ios - 保持 3.5" 和 4" 屏幕之间的界面元素一致

> ID：13000791
> 
> 赞同：0
> 
> 时间：2012-10-21T18:25:26.287
> 
> 标签：ios, xcode, user-interface, interface-builder, screen-size

当我有一个 4 英寸的屏幕尺寸时，按钮和标签有很多空间：

![在此处输入图像描述](../Images/664f5d2d0ef9204ff0a0274a4b2c1641.png)

但是当我将它缩小到 3.5 英寸时，按钮底线下方的标签会跳到按钮上方。标签有空间：

![在此处输入图像描述](../Images/d4d176c439d75e43a49519205914cb82.png)

有没有办法解决它？还有其他更好的方法来制作主屏幕吗？有没有办法将元素放置在具有永久位置的不同屏幕上？
最后一个问题：您是否知道一些关于设计应用程序并在 xcode 中实现它的教程，并且它可以在设备上运行！

# jqgrid - 是否可以使用默认 colModel 过滤 jqGrid

> ID：13000795
> 
> 赞同：0
> 
> 时间：2012-10-21T18:25:48.703
> 
> 标签：jqgrid, filter

在由 Oleg 完成的以下演示[演示](http://www.ok-soft-gmbh.com/jqGrid/simplelocalgridwithsearchingtoolbarmultilpe1.htm)中，我遇到了如何基于 Ship_via 列进行默认搜索的问题。我不知道该怎么做，因为我是 jqGrid 的新手。请任何人帮助我。

我会让它清除奥列格。首先当页面加载时，网格会显示如下：在下面的网格中，它显示了页面加载时的所有结果，

![默认多选网格](../Images/1e43f52714c55220c69b1da5dd64d6d7.png)

但是我在页面加载时需要以下方式的网格，默认情况下，通过列运送，应该选择 FedEx 选项并加载网格，我们不应该通过单击 FedEx 选项来选择，稍后我们可以更改搜索选项。我想要这个例子而不是其他例子

![默认选择](../Images/da2929ce38343c27760c16c64de237e9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:38:07.953

目前尚不清楚您在“默认搜索”下的意思。

如果您需要显示带有*过滤数据*的网格，您应该阅读相应代码示例[的答案](https://stackoverflow.com/a/4977896/315935)。[另一个答案](https://stackoverflow.com/a/5273385/315935)显示了如何动态构建搜索过滤器。[另一个答案](https://stackoverflow.com/a/6884755/315935)显示了如何在搜索工具栏中显示初始过滤器。[答案](https://stackoverflow.com/a/8436273/315935)显示了如何保存过滤器`localStorage`并在下次使用相同的过滤器重新加载页面。

# java - Java Buffer 连接文件

> ID：13000802
> 
> 赞同：1
> 
> 时间：2012-10-21T18:26:42.650
> 
> 标签：java

真的可以在不使用缓冲区的情况下连接到文件吗？我真的很困惑。澄清方面的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:31:22.427

您一次可以读取一个字节。使用缓冲区纯粹是为了性能。不使用缓冲区可能会慢 10 - 100 倍，这就是通常使用它的原因。

注意：您可以使用缓冲区而不会使代码复杂化。即它只是一个打开的功能。

# javascript - HTML 5 本地存储在 iOS 6、7 或 8 上的 UIWebView 中不起作用

> ID：13000805
> 
> 赞同：8
> 
> 时间：2012-10-21T18:26:57.580
> 
> 标签：javascript, ios, uiwebview

我有一个应用程序将网站的部分内容拉入 UIWebViews。这些页面使用本地存储来保持状态，例如最后查看的内容和各种设置等。

我看到正在创建 UIWebViews 本地存储（通过 Web 检查器，设备和应用程序连接到调试机器），但在应用程序关闭后被清除。相关页面在标准浏览器甚至 Mobile Safari 的主站点上正常工作，但在 UIWebViews 中不能正常工作？

我一直在挖掘并看到一些关于使用 iOS6 对本地存储缓存进行更改的讨论，但我不清楚这是否可以工作，如果可以，如何启用它？

在我们不得不切换到使用 cookie 或在服务器端做某事之前，任何人都有明确的答案吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T16:04:03.517

*** 更新 ***
确定的 iOS 错误，报告为：#12546916
从 iOS 开始未修复：8.3

UIWebView`WebKitStoreWebDataForBackup`在 NSUserDefaults 中设置时会忽略键。

*** 原帖 ***
这个 NSUserDefaults 键在 iOS 6 中可用：

```
WebKitStoreWebDataForBackup = YES 
```

我们将它设置在 ApplicationDelegate 的顶部，如下所示：

```
[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"WebKitStoreWebDataForBackup"]; 
```

iOS 6 发行说明在这里讨论：[发行说明](http://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)。它应该告诉 WebKit UIWebView LocalStorage 不是一次性的，并导致它被放置在非一次性的位置。

显然不工作。`WebKitStoreWebDataForBackup`当应用程序关闭或页面刷新时，iOS 会忽略并删除 LocalStorage。

在调试期间使用 Web Inspector 可以看到创建的本地存储，但是在应用程序关闭并重新启动后它就消失了。

有问题的 html/js 页面在 Firefox、Chrome、Safari 和 Mobile Safari 中查看时有效，但在 UIWebView 中查看页面时无效。

# powershell - 带有 sendkey 的 powershell 调用表达式

> ID：13000806
> 
> 赞同：0
> 
> 时间：2012-10-21T18:27:12.853
> 
> 标签：powershell, automation, sendkeys

有没有一种方法可以通过Powershell 中的**SendKey**将参数传递给我的自定义应用程序

TCL中的EXPECT之类的东西

```
#!/usr/bin/perl -w
use Expect;
my $exp = new Expect;

my $command = 'ssh -l user 10.10.10.25';

$exp->spawn($command) or die "Cannot spawn $command: $!\n";

my $patidx = $exp->expect(30, 'Enter passphrase for key');
$exp->send("password\n"); 
```

我厌倦了使用以下内容，但它似乎没有调用我的自定义应用程序

```
$a = Get-Process | Where-Object {$_.Name -eq "Notepad"}
wait
[Microsoft.VisualBasic.Interaction]::AppActivate($a.ID)
[void] [System.Reflection.Assembly]::LoadWithPartialName("'System.Windows.Forms")
wait
[System.Windows.Forms.SendKeys]::SendWait("{F5}{ENTER}") 
```

我的客户应用程序就像**C:\somecli -option1 -option2 -option 3**

我有一个cli命令说 ping -t 10.10.10.1 这里命令是“ping”，参数是“-t 10.10.10.1”，所以当我最初调用命令时，我假设使用“ping -t 10.10.10.1”我需要传递另一个参数说： y 在一些执行完成后，这个命令，sendkey 确实允许我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:28:37.670

我不太明白您将“传递参数”传递给 SendKeys 是什么意思，但 SendKeys 仅适用于当前聚焦的窗口，这意味着您无法向后台运行的任何应用程序输入键。前面提到的 PowerShell 的 WASP 模块只是在内部使用了 SendKeys，所以如果 WASP 不起作用，那么也不会输入 SendKeys 函数。

至于“这适用于任何自定义应用程序”，SendKeys 基于 WinForms API，因此它只能与使用该 API 的应用程序交互。

编辑：

根据您的编辑，您似乎只想发送在运行时定义的密钥。只需将您的键分配给一个变量（如`$keys="Keys I want to send"`），然后发送该变量（如`[System.Windows.Forms.SendKeys]::SendWait($keys)`）。`Read-Host`如果您希望用户键入要发送的密钥，则可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T08:01:44.917

您可以在[http://wasp.codeplex.com/中使用 WASp shap](http://wasp.codeplex.com/)

这是他们网站上的示例：

```
Select-Window notepad | Send-Keys "%(ea)Testing{Enter}{F5}" 
```

# coldfusion - SESSION 不适用于 Sencha Touch 2 和 Coldfusion

> ID：13000810
> 
> 赞同：0
> 
> 时间：2012-10-21T18:27:32.573
> 
> 标签：coldfusion, sencha-touch, extjs, sencha-touch-2, coldfusion-9

我正在调用我的 Web 服务的 API 来运行 Sencha 触摸应用程序。当我直接从浏览器点击登录 API 时，它会设置我以后可以访问的 SESSION 变量。

但是当我从我的 Sencha Touch 应用程序中以图表方式调用相同的 API 时，它会成功登录，但它没有设置 SESSION 变量。即我无法访问更多 API 中的会话变量。

我不确定问题是在客户端还是在服务器端。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:48:37.803

作为对登录 API 的回应，我也返回`#SESSION.CFID#`了`#SESSION.CFTOKEN#`

现在每个 API 我都发送这些变量： ?CFID=123&CFTOKEN=334455

最后，Coldfusion 可以识别我的会话 :)

# winapi - 在C中打开CMD框并隐藏弹出

> ID：13000812
> 
> 赞同：0
> 
> 时间：2012-10-21T18:27:35.293
> 
> 标签：winapi, dos

大家好，我想知道是否有人可以帮助我解决这个问题，我正在从我的 WINAPI 项目中调用一个 cmd 提示符 .exe 文件。这可以正常工作，但是黑色的dos框会弹出一秒钟。它不是世界末日，但我正试图阻止它。

此代码工作正常，但弹出我用来调用 .exe 并保存数据的框。

```
system("my.exe > output.txt"); 
```

这是我使用 winexec 的其他工作

```
WinExec("my.exe > output.txt",SW_SHOWMINIMIZED); // This wont work 
```

这将起作用

```
WinExec("my.exe",SW_SHOWMINIMIZED); // This will work but I cant add the  > output.txt to save my output. 
```

请问有什么建议吗？

BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:47:53.390

您可以使用[CreateProcess](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.85%29.aspx) API 启动新进程，并将标准输出重定向到文件句柄。MSDN 提供了一个示例：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms682499 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499(v=vs.85).aspx)

# database - 多个父对象的注释

> ID：13000815
> 
> 赞同：1
> 
> 时间：2012-10-21T18:27:53.883
> 
> 标签：database, database-design, web-applications, yii

我正在学习在 Yii PHP 框架中构建网络应用程序，但我认为我的问题一般适用于网络应用程序。

我想知道如何为与不同类型的父对象（即照片或帖子）相关的评论构建数据库表。

照片和帖子本质上是不同的，不会坐在同一张桌子上。然而，在大多数情况下，对这些对象的注释格式相同。

我的问题是双重的，是否可以将多个父对象的注释放入同一个表中？[在我看来这是自然的解决方案，但我不确定如何使用外键/主键等来处理这个问题。我认为它还需要一个指向父对象类型的键......？]

其次，如果可以将这些评论放在同一个表中，这样做是否有效，为每个父对象都有一个评论表是否更有效？

在此先感谢，希望这对某人来说是一个足够有趣的话题。

干杯，

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:29:26.387

另一种选择是有一个所有帖子相关的帖子表（无论类型如何）。因此，无论是照片还是普通帖子，都会在此表中为其创建记录。

根据内容的类型，您可以在此表中存储照片和普通帖子（每个都有可选字段，例如：照片、照片类型、post_content 可能是可选的，具体取决于正在创建的类型（这将是一个很好的机会）了解 Yii 模型验证场景）。

所以你发布的表格看起来像：

*   ID
*   post_content
*   照片
*   照片类型
*   ETC...

如果您选择不将两者存储在同一个表中，则可以有 1 个用于照片的表和 1 个用于与 post_id 相关的帖子

这样，您可以有一个与 post_id 相关的评论表（无论是正确的路线）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T01:08:24.523

我会将评论建模为自己的表格。Comment 表将包含 PhotoId 和 PostId 列。这些是允许空值的外键。然后，数据库检查约束将确保 PhotoId 和 PostId 中的一个为空。即每条评论都附在一个父母身上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T00:36:14.713

我可以建议 3 表结构

表：[Entity_Types]（列出所有对象标题，例如照片、帖子）示例：PK:1001，“照片”

表：[照片] 示例：PK:2001，“我的第一张照片标题” PK:2002，“我的第二张照片标题”

表：[评论] 示例：PK:3001，“我对我的第一张照片的第一个评论”，FK:1001，FK:2001 PK:3002，“我对我的第一张照片的第二个评论”，FK:1001，FK:2001 PK :3003，“我对第二张照片的第一条评论”，FK：1001，FK：2002

# php - DOMDocument 仅选择外部元素

> ID：13000817
> 
> 赞同：0
> 
> 时间：2012-10-21T18:28:17.410
> 
> 标签：php, domdocument

如果我有`DOMDocument`这样的：

```
<div name="outer">
    <div name="inner"></div>
    <div name="inner"></div>
</div>
<div name="outer">
</div>
<div name="outer">
    <div name="inner"></div>
</div> 
```

如果我这样做`$dom->getElementsByTagName('div')`，我将获得所有 6 个元素，包括内部元素。

例如，我如何选择第二个外部 div 元素？（`name`只是为了说明我的意思，元素实际上没有这些属性！）

**编辑：**

我知道我可以使用`xpath`，但我更有可能在没有它的情况下寻找解决方案，因为我在其余代码中仅使用 DOMDocument 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:36:01.123

使用[DOMXPath](http://php.net/manual/en/class.domxpath.php)

```
$xpath = new DOMXPath($doc);
$entry = $xpath->query('/div[2]'); 
```

# function - Emacs 中的书签问题

> ID：13000821
> 
> 赞同：2
> 
> 时间：2012-10-21T18:28:44.397
> 
> 标签：function, emacs, bookmarks

我在使用书签时遇到了一些问题，我之前在其中定义了一个可以正常工作的函数，但现在它不再工作了。

我面临的错误是在调用书签“last”时它说“ `Invalid bookmark last`”，没有引号。

```
(defun go-bookmark-last () 
  (interactive)
  (bookmark-jump "last")
  (message "Went to most recent bookmark.")
)

(defun save-bookmark-as-last () 
  (interactive)
  (bookmark-set "last")
  (message "Save as most recent bookmark.")
) 
```

这些函数作为宏的使用没有问题。现在的问题是我无法访问我的最后一个书签，直到我使用我的“保存书签为最后”功能“激活”书签或其他东西。另外，当我运行 command 时`bookmark-bmenu-list`，我可以立即运行 go-bookmark-last 。不知何故，我需要“激活”书签，然后才能转到最后一个书签。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T19:16:34.917

我假设您在重新启动 Emacs 时遇到此错误。您看到此错误是因为未加载书签文件。您可以使用`bookmark-maybe-load-default-file`函数加载默认书签文件。像这样修改你的`go-bookmark-last`函数：

```
(require 'bookmark)

(defun go-bookmark-last ()
  (interactive)
  (bookmark-maybe-load-default-file)
  (bookmark-jump "last")
  (message "Went to most recent bookmark.")) 
```

# c# - MVC 4 连接字符串到 SQL Server 2012

> ID：13000824
> 
> 赞同：23
> 
> 时间：2012-10-21T18:29:20.787
> 
> 标签：c#, asp.net-mvc-4, visual-studio-2012, sql-server-2012, .net-4.5

我使用 Visual Studio 2012 在 C# 中创建了一个全新的 MVC 4 应用程序。我正在尝试连接到一个全新的 SQL Server 2012（标准）实例，但我似乎无法正确设置我的连接字符串。

我的 Web.config 中的连接字符串：

```
 <connectionStrings>
    <add name="ConnectionStringName"
        providerName="System.Data.SqlClient"
        connectionString="Data Source=MyServerName;
                          Initial Catalog=MyDatabaseName;
                          Integrated Security=False;
                          User ID=MyUserID;Password=MyPassword;
                          MultipleActiveResultSets=True" />
  </connectionStrings> 
```

每次我从 Visual Studio 中转到 ASP.NET 配置时，页面都会加载，但只要单击“安全”，我就会收到以下消息：

> 您选择的数据存储存在问题。这可能是由无效的服务器名称或凭据或权限不足引起的。这也可能是由于未启用角色管理器功能造成的。单击下面的按钮可重定向到您可以选择新数据存储的页面。
> 
> 以下消息可能有助于诊断问题： **无法连接到 SQL Server 数据库。**

我已经验证我的凭据是正确的（我可以使用它们通过 SQL Management Studio 进行连接）。还有什么我可以检查的吗？我难住了。

**更新：**

我无法从 SQL Management Studio (MSSQLSERVER) 中连接到我的默认实例，因此我重新安装了 SQL，创建了一个命名实例 (LHSQLSERVER)。现在我可以在 SQL Management Studio 中连接到该实例，但我仍然从 ASP.NET 配置中收到相同的错误。

还有一点需要注意——我运行的 aspnet_regsql 工具来自 Framework64\v4.0.30319 文件夹。如果我使用的是 .NET 4.5，这是否正确？

**更新 2：**

我尝试用我知道有效的远程站点（即 mysite.winhost.com）的连接字符串替换我的连接字符串，但在 ASP.NET 网站配置工具中仍然遇到相同的错误？FWIW 我也在使用 Windows 8，但我认为这并不重要。

还有什么我可以检查的吗？

**更新 3：**

我发现[这篇文章](https://stackoverflow.com/questions/11163547/mvc-4-rc-aspnet-regsql-exe)说您不再需要用于 MVC 4 的 aspnet_regsql 工具，因此我重新运行该工具以删除所有设置，但同样没有运气。以前有人用 MVC 4 做过这个吗？

**更新 4：**

有关我找到的解决方案，请参阅下面的答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-21T18:38:59.587

如果您能够使用 Sql Management Studio 进行连接，那么我相信连接字符串肯定有问题 -

连接字符串您正在使用以下格式 -

```
Data Source=myServerAddress;Initial Catalog=myDataBase;Integrated Security=SSPI;
User ID=myDomain\myUsername;Password=myPassword; 
```

尝试`IP Address, Port`在数据源字段中使用 -

```
 <connectionStrings>
    <add name="ConnectionStringName"
        providerName="System.Data.SqlClient"
        connectionString="Data Source=190.190.200.100,1433;
                          Initial Catalog=MyDatabaseName;
                          Integrated Security=False;
                          User ID=MyUserID;Password=MyPassword;
                          MultipleActiveResultSets=True" />
  </connectionStrings> 
```

或尝试其他变体 -

**标准安全**

```
Server=myServerAddress;Database=myDataBase;User Id=myUsername;Password=myPassword; 
```

**可信连接**

```
Server=myServerAddress;Database=myDataBase;Trusted_Connection=True; 
```

**连接到 SQL Server 实例**

```
Server=myServerName\myInstanceName;Database=myDataBase;User Id=myUsername;
Password=myPassword; 
```

参考 - [http://www.connectionstrings.com/sql-server-2012](http://www.connectionstrings.com/sql-server-2012)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T18:37:43.330

没有尝试使用 SQL 2012，但此连接字符串在 SQL 2008 R2 中运行良好

```
connectionString="Server=ServerAddress;Database=DataBaseName;User Id=Username;Password=Password;" 
```

或者

```
connectionString="user id=UserName;password=Password;initial catalog=DatabaseName;data source=SQLServerIPorFQDN;Connect Timeout=30;" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T18:40:38.653

您可能需要在配置中启用角色管理器

```
<roleManager enabled="true"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T02:45:00.367

虽然 lhan16 的回答对我有所帮助，但如果说您需要添加的只是一个 DefaultConnection 会更简单。我从同一个地方开始，MVC 使用的数据库连接不适用于安全框架。该框架的作者从未想过您不会使用 DefaultConnection。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T03:10:44.877

感谢大家的意见，我终于找到了解决办法。我遇到了**[这篇](http://www.dwdmbi.com/2012/09/visual-studio-2012-uses.html)**描述 VS 2012 用于 MVC 4 的新 Simple Membership 的文章。我基本上只是重新开始，创建一个新的数据库，新的 MVC 4 项目，并按照文章中的说明进行操作。果然，只是在网页上“注册”就在我的数据库中创建了表并存储了用户信息。

# lisp - LISP 键值绑定存储和查找

> ID：13000834
> 
> 赞同：4
> 
> 时间：2012-10-21T18:30:57.440
> 
> 标签：lisp, key-value

我正在学习 LISP，只是想问在 LISP 程序中存储键值对的最佳选择是什么。

对于我提到的键值对，我想像JAVA中的Map Collection一样使用它：我想将键与值一起存储，并且可以通过键查找值。
例如：如果我有一个`"apple"`与 匹配的字符串`"fruit"`，如果它不存在，我希望能够存储它，并且可以查询与 关联的值`"apple"`，即水果。

任何建议或代码示例都会非常有帮助。先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:38:50.433

你没有指定你正在学习哪个 Lisp（Scheme、Common Lisp 等）所以我猜是 Common Lisp。如果我不正确，请发表评论，我会相应地进行编辑。

在 Lisp 中，这样的东西称为关联列表。它非常常用，因此有一些方便的功能可以使它成为可能。不过，它的核心实际上只不过是一个 pair 列表`((key . value) ... )`。

我建议查看[Carnegie Melon 的解释](http://www.cs.cmu.edu/Groups/AI/html/cltl/clm/node153.html)，它会给你一个简单的函数概述，比如`assoc`使`alist-cons`使用关联列表变得容易。我发现它很有帮助。

关联列表的问题在于，虽然它们具有恒定的时间插入、删除和查找都是*O(n)*。因此，如果速度是一个大问题，您将需要转向实际的哈希表。

[Common Lisp Cook 书](http://cl-cookbook.sourceforge.net/hashes.html)对这些有很好的解释。它们依赖于允许恒定时间随机访问的实际数组（有时称为向量）。与关联列表不同，它们确实提供*O(1)*查找。然而，它们不像关联列表那样易于使用，因为 Lisp 通常擅长列表。

注意：对于Scheme，如果您的编译器默认不提供这些函数，那么这些函数中的大部分都应该提供SRFI 1 和69 扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T19:51:27.657

在 Common Lisp 中，您可以使用关联列表。

[有关关联列表](http://www.lispworks.com/documentation/HyperSpec/Body/14_aba.htm)和函数[ASSOC](http://www.lispworks.com/documentation/HyperSpec/Body/f_assocc.htm) ，请参阅 Common Lisp Hyperspec

对于任何更复杂和更快的事情，Common Lisp 提供了[哈希表](http://www.lispworks.com/documentation/HyperSpec/Body/18_.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T21:42:24.983

为了公平起见，`Map`Java 中是一个接口。它有各种不同的实现，它们在读/写/删除操作中可能不会为您提供相同的复杂性。有些可以实现为链表，有些可能是二进制尝试等。

`Map`在 Java 中*只*定义了访问数据的方式，但没有定义数据的存储方式。

Lisps，好吧，如果你考虑CLOS，没有接口的概念，这是因为CLOS支持多重继承。Java 没有足够的类似物，`Map`因为没有以这种方式访问​​集合的概念，也没有接口的概念，因为它们存在于 Java 中。

Java中有几种标准实现`Map`。一个是`HashMap`（`Hashtable`与它非常相似）。`hash-table`这与Common Lisp中的类非常相似。Java 中也有`LinkedHashMap`，它与 Lisp 中的关联列表非常相似。一个简单的 Lisp 不提供红黑树映射，并且没有关于线程的标准化行为 - 您需要阅读有关特定实现的文档，但您可以在这里找到各种数据结构的许多良好实现：[http://www.cliki.net/Data%20structure](http://www.cliki.net/Data%20structure)。

# android - 在本地计算机上测试 HTTP 服务的 I/P 问题

> ID：13000835
> 
> 赞同：0
> 
> 时间：2012-10-21T18:30:58.173
> 
> 标签：android, visual-studio-2010, http, rest

我的开发计算机在我的 LAN 上分配了一个本地 I/P 192.168.2.7。

如果我进入`http://localhost`浏览器，我会按预期获得计算机的 IIS 屏幕（运行 Win7）。

如果我进入`http://192.168.2.7`浏览器，我会按预期获得计算机的 IIS 屏幕。

我有一个监听端口 50421 的 HTTP 服务。（Visual Studio）

如果我进入`http://localhost:50421`浏览器，我会从我的 HTTP 服务中得到正确的响应

如果我进入`http://192.168.2.7:50421`浏览器，firefox 和 IE 都说它们无法连接。

为什么是这样？为什么我不能在测试中使用我机器的 IP 地址？我的计算机的 I/P 可以工作，但与端口一起使用时不能。我也从局域网上的其他机器上尝试过，得到了相同的结果。

我需要这样做的实际原因是因为我正在测试来自 Windows Phone 7 和 Android AVD 模拟器的客户端调用，我不能使用“localhost”我必须使用我机器的 IP。如果我想不出办法做到这一点，我就无法调试我的 POST 服务。

顺便说一句，该服务在部署到我的生产 Web 服务器时运行良好，但我无法单步执行那里的代码。

任何想法可能有什么问题？

谢谢，加里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:16:41.537

某些路由器品牌不允许您这样做，请尝试使用您的全局 IP 从 WAN 访问并设置端口转发。

# php - 在 Phalcon 视图中包含 JavaScript

> ID：13000838
> 
> 赞同：3
> 
> 时间：2012-10-21T18:32:12.687
> 
> 标签：php, javascript, phalcon

考虑以下两个文件：

```
// view/index.phtml
 echo \Phalcon\Tag::javascriptInclude("javascript/jquery.js"); 
// view/about/about.phtml
 echo \Phalcon\Tag::javascriptInclude("javascript/x.js"); 
```

关于将生成如下：

```
<script src="javascript/x.js">
<script src="javascript/jquery.js"> 
```

但是`x.js`文件是依赖的，`jquery.js`所以它应该放在它之前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T20:03:22.993

假设您有以下结构：

```
app/views/index.phtml
app/views/about/index.phtml 
```

`app/views/index.phtml`您可以在顶部定义以下内容

```
<?php echo \Phalcon\Tag::javascriptInclude("javascript/jQuery.js"); ?>
<?php echo \Phalcon\Tag::javascriptInclude("javascript/myother.js"); ?> 
```

然后在`app/views/about/index.phtml`

```
<?php echo \Phalcon\Tag::javascriptInclude("javascript/x.js"); ?> 
```

这将使`jQuery.js`和`myother.js`脚本在执行之前加载`x.js`，因为`x.js`将在主视图中使用

```
<?php echo $this->getContent() ?> 
```

或者，您可以在主视图中进行设置：

```
<?php echo \Phalcon\Tag::javascriptInclude("javascript/jQuery.js"); ?>
<?php echo \Phalcon\Tag::javascriptInclude("javascript/myother.js"); ?>
<?php if ($is_about) { echo \Phalcon\Tag::javascriptInclude("javascript/myother.js"); } ?> 
```

在你的 About 控制器中

```
$this->view->setVar('is_about', TRUE); 
```

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-18T16:40:56.207

不确定它是否适合 OP 的用例，但对于其他搜索，此模式非常有用：

```
class MyController extends Phalcon\Mvc\Controller
{

    public function initialize()
    {
        $this->assets->addJs("/path/to/myjs.js");

    [...etc] 
```

文档： [http ://docs.phalconphp.com/en/latest/reference/assets.html](http://docs.phalconphp.com/en/latest/reference/assets.html)

# r - 逻辑回归误差

> ID：13000839
> 
> 赞同：0
> 
> 时间：2012-10-21T18:32:17.593
> 
> 标签：r, statistics, glm

```
Test <- read.table("C:/Users/ARAB/Documents/user_table.csv", header=T)
testlog <- glm(Conv ~ active_days, family=binomial("logit")) 
```

这是我试图在 R 中运行但出现错误的代码

```
"Error in eval(expr, envir, enclos) : object 'Conv' not found" 
```

这是我在 R 的第一天。请帮助我。`Conv`当我使用`view()`命令时，我也可以在数据中看到。`Conv`是包含 1/0 的结果变量。同样在 sas 或 spss 中，我们可以选择在二进制 logit 模型中建模 1 或 0。我们如何在 R 中使用它，或者这个错误与此有关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T19:04:35.747

`data=data.frame`正如@blindJesse 所提到的，您需要通过使用内部`glm`函数或使用以下替代方法之一来指定包含变量的data.frame

```
utils::data(anorexia, package="MASS") # using some R data

# Option 1 (the best one)
glm(Postwt ~ Prewt + Treat + offset(Prewt), family = gaussian, data = anorexia)

# Option 2: Using 'with'
with(anorexia, glm(Postwt ~ Prewt + Treat + offset(Prewt), family = gaussian))

# Option 3: Using 'attach' I don't like it
attach(anorexia)
glm(Postwt ~ Prewt + Treat + offset(Prewt), family = gaussian)

detach(anorexia) # detaching the data.

# Option 4: Using '$'
glm(anorexia$Postwt ~ anorexia$Prewt + Treat + offset(Prewt), family = gaussian) 
```

可以使用第五个选项，`[`它可能与第四个选项非常相似。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-21T18:41:45.210

您需要指定data.frame，例如

```
testlog <- glm(Conv ~ active_days, data=Test, family=binomial("logit")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-15T15:26:15.540

此错误的另一个原因是，如果您在 + 号之间不留空格，glm 会抛出此错误

*   萨斯肯

# c# - 为什么我收到错误“预期的类、委托、枚举、接口或结构”

> ID：13000840
> 
> 赞同：2
> 
> 时间：2012-10-21T18:32:19.180
> 
> 标签：c#

谁能告诉我为什么会出现这个错误？这是我在这个论坛上的第一篇文章。我为自己解决问题所做的研究表明，我可能在某处有一个不正确的花括号，但我找不到它。任何帮助是极大的赞赏。

* * *

```
using System;

    class Program
    {
    //declare constant
    const double ANGLES_FROM_RADIANS = 57.295779513082323;

    static void Main()
    {

        //declare vairiables
        double xc = 0.0;
        double yc = 0.0;
        double radius = 0.0;
        double theta = 0.0;

        //call methods
        double GetUserInput (ref double xc, ref double yc);
        double CalcCoords (double xc, double yc, ref double radius, ref double theta);
        double Output (double radius, double theta);
     }

    //method prologue

    static double GetUserInput (ref double xc, ref double yc)
    {
        xc = 0;
        yc = 0;
        while (xc = 0)
        {
     Console.WriteLine("Please enter a possitive, non-zero value for the  x-ccordinate   of a point.");
            xc = int.Parse(Console.ReadLine());
            if (xc <= 0)
            {
                Console.WriteLine("Error, x must be greater than zero.");
            }
        }
        Console.WriteLine("Please enter a possitive value for the y-coordinate of a point.");
        yc = int.Parse(Console.ReadLine());

        Return Console.WriteLine("Your Coordinates are ({0},{1})", xc, yc);
    }

    //method prologue
    static double CalcCoords (double xc, double yc, ref double radius, ref double theta)
    {
            {
            radius = Math.sqrt((xc * yc) + (xc * yc));
            return radius;
            }
            {
            theta = Math.Atan(yc / xc) * ANGLES_FROM_RADIANS;
            return theta;
        }
    }

    //method prologue
    static double Output (double radius, double theta)
    {
        Console.WriteLine("For your polar coordinates:");
        Console.WriteLine("Distance from the origin: {0:f}", radius);
        Console.WriteLine("The angle (in degrees) from the x-axis is: {0:f3}", theta);
    }   

        Console.ReadLine();

    }//End Main()
    }//End class Program 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T18:34:20.240

最后一个大括号是额外的伴侣。这个 -

```
}//End Main() 
```

还有为什么最后`Console.ReadLine();`是`misplaced`. 它不应该在任何方法范围内吗？

**编辑**

我不知道你的代码应该做什么。它包含很多，`errors`也`intent of code`不清楚。这段代码正在编译 -

```
class Program
    {
        //declare constant
        const double ANGLES_FROM_RADIANS = 57.295779513082323;

        static void shdg()
        {
            //declare vairiables
            double xc = 0.0;
            double yc = 0.0;
            double radius = 0.0;
            double theta = 0.0;
        }

        //method prologue
        static void GetUserInput(ref double xc, ref double yc)
        {
            xc = 0;
            yc = 0;
            while (xc == 0)
            {
                Console.WriteLine("Please enter a possitive, non-zero value for the  x-ccordinate   of a point.");
                xc = int.Parse(Console.ReadLine());
                if (xc <= 0)
                {
                    Console.WriteLine("Error, x must be greater than zero.");
                }
            }
            Console.WriteLine("Please enter a possitive value for the y-coordinate of a point.");
            yc = int.Parse(Console.ReadLine());

            Console.WriteLine("Your Coordinates are ({0},{1})", xc, yc);
        }

        //method prologue
        static double CalcCoords(double xc, double yc, ref double radius, ref double theta)
        {
            {
                radius = Math.Sqrt((xc * yc) + (xc * yc));
                return radius;
            }
            {
                theta = Math.Atan(yc / xc) * ANGLES_FROM_RADIANS;
                return theta;
            }
        }

        //method prologue
        static void Output(double radius, double theta)
        {
            Console.WriteLine("For your polar coordinates:");
            Console.WriteLine("Distance from the origin: {0:f}", radius);
            Console.WriteLine("The angle (in degrees) from the x-axis is: {0:f3}", theta);
        }
    }//End class Program 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T18:35:16.920

额外的最后一个大括号`}//End Main()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T18:37:41.417

`main method`或`method`不包含`class`或其他方法

a`class`包含单个`main`方法（这是您的应用程序的入口点）**或/和**多个`methods`

你`//call methods`也是无效的..你必须传递值或变量。

# python - Numpy 数组和更改值区域

> ID：13000842
> 
> 赞同：0
> 
> 时间：2012-10-21T18:32:37.210
> 
> 标签：python, numpy

我正在寻找替换数组中的区域，例如我创建一个数组`b = numpy.zeros((12,12))`。我想用`a=numpy.aray([[1,2],[2,3]])`左上角的索引来改变它的值`[0:1,0:1]`。

当我指定`b[0:1,0:1] = a`我有一个错误：

```
"ValueError: output operand requires a reduction, but reduction is not enabled". 
```

做这种事情的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T18:41:31.100

使用正确的索引：

```
>>> b[0:2,0:2] = a
>>> b
array([[ 1.,  2.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 2.,  3.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.]]) 
```

从[文档](http://docs.python.org/tutorial/introduction.html)：

> 记住切片如何工作的一种方法是将索引视为字符之间的指向，第一个字符的左边缘编号为 0。然后 n 个字符的字符串的最后一个字符的右边缘具有索引 n，例如：

```
 +---+---+---+---+---+
 | H | e | l | p | A |
 +---+---+---+---+---+
 0   1   2   3   4   5
-5  -4  -3  -2  -1 
```

# php - 从 PHP 中的 RNCryptor AES 256 标头中检索 IV

> ID：13000843
> 
> 赞同：3
> 
> 时间：2012-10-21T18:32:37.830
> 
> 标签：php, cocoa-touch, cocoa, aes, unpack

使用最新的 RNCryptor 源并尝试将加密数据发送到 PHP 脚本。

RNCryptor 将 IV 打包到标题部分中，该部分附加在实际加密数据的前面。

```
- (NSData *)header
{
  uint8_t header[2] = {kRNCryptorFileVersion, self.options};
  NSMutableData *headerData = [NSMutableData dataWithBytes:header length:sizeof(header)];
  if (self.options & kRNCryptorOptionHasPassword) {
    [headerData appendData:self.encryptionSalt]; // 8 bytes
    [headerData appendData:self.HMACSalt]; // 8 bytes
  }
  [headerData appendData:self.IV]; // BlockSizeAES128
  return headerData;
} 
```

我是在 PHP 中处理二进制数据的新手，使用以下解包函数是否正确？

```
<?
$baseEncodedString = "...";
$data = mb_convert_encoding($baseEncodedString, "UTF-8", "BASE64" );
$array = unpack("Cversion/Coptions/C8salt/C8hmac/C16iv/C*aes", $data);
print_r($array);
?> 
```

注意：加密数据在传输之前是从可可中进行 Base64 编码的。

上面的 PHP 脚本返回的数据例如...

> 数组 ( [版本] => 1 [选项] => 1 [salt1] => 109 [salt2] => 195 [salt3] => 185 [salt4] => 71 [salt5] => 130 [salt6] => 209 [salt7] => 230 [salt8] => 25 [hmac1] => 8 [hmac2] => 152 [hmac3] => 188 [hmac4] => 135 [hmac5] => 117 [hmac6] => 169 [hmac7 ] => 25 [hmac8] => 228 [iv1] => 43 [iv2] => 220 [iv3] => 80 [iv4] => 102 [iv5] => 142 [iv6] => 144 [iv7] = > 172 [iv8] => 104 [iv9] => 216 [iv10] => 45 [iv11] => 155 [iv12] => 117 [iv13] => 188 [iv14] => 67 [iv15] => 24 [iv16] => 191 [aes1] => 122 [aes2] => 227 [aes3] => 45 [aes4] => 194 [aes5] => 57 [aes6] => 123 [aes7] => 28 [aes8 ] => 130 [aes9] => 110 [aes10] => 122 [aes11] => 97 [aes12] => 118 [aes13] => 214 [aes14] => 117 [aes15] =>56 [aes16] => 168 [aes17] => 54 [aes18] => 198 [aes19] => 113 [aes20] => 120 [aes21] => 138 [aes22] => 67 [aes23] => 223 [ aes24] => 200 [aes25] => 11 [aes26] => 109 [aes27] => 177 [aes28] => 167 [aes29] => 103 [aes30] => 139 [aes31] => 243 [aes32] => 199 [aes33] => 214 [aes34] => 214 [aes35] => 241 [aes36] => 199 [aes37] => 173 [aes38] => 219 [aes39] => 71 [aes40] => 97 [aes41] => 32 [aes42] => 27 [aes43] => 248 [aes44] => 175 [aes45] => 203 [aes46] => 123 [aes47] => 21)139 [aes31] => 243 [aes32] => 199 [aes33] => 214 [aes34] => 214 [aes35] => 241 [aes36] => 199 [aes37] => 173 [aes38] => 219 [ aes39] => 71 [aes40] => 97 [aes41] => 32 [aes42] => 27 [aes43] => 248 [aes44] => 175 [aes45] => 203 [aes46] => 123 [aes47] => 21)139 [aes31] => 243 [aes32] => 199 [aes33] => 214 [aes34] => 214 [aes35] => 241 [aes36] => 199 [aes37] => 173 [aes38] => 219 [ aes39] => 71 [aes40] => 97 [aes41] => 32 [aes42] => 27 [aes43] => 248 [aes44] => 175 [aes45] => 203 [aes46] => 123 [aes47] => 21)

我如何在 PHP MCrypt 函数中使用它？

谢谢。

* * *

**编辑**

为了响应draw010的回答，我已将我的PHP脚本更新为以下...

```
<?
function pbkdf2($algorithm, $password, $salt, $count, $key_length, $raw_output = false)
{
    $algorithm = strtolower($algorithm);
    if(!in_array($algorithm, hash_algos(), true))
        die('PBKDF2 ERROR: Invalid hash algorithm.');
    if($count <= 0 || $key_length <= 0)
        die('PBKDF2 ERROR: Invalid parameters.');

    $hash_length = strlen(hash($algorithm, "", true));
    $block_count = ceil($key_length / $hash_length);

    $output = "";
    for($i = 1; $i <= $block_count; $i++) {
        // $i encoded as 4 bytes, big endian.
        $last = $salt . pack("N", $i);
        // first iteration
        $last = $xorsum = hash_hmac($algorithm, $last, $password, true);
        // perform the other $count - 1 iterations
        for ($j = 1; $j < $count; $j++) {
            $xorsum ^= ($last = hash_hmac($algorithm, $last, $password, true));
        }
        $output .= $xorsum;
    }

    if($raw_output)
        return substr($output, 0, $key_length);
    else
        return bin2hex(substr($output, 0, $key_length));
}

$base = $_GET['base'];
$data = mb_convert_encoding($base, "UTF-8", "BASE64" );
//$data = base64_decode($base);

$header = array();
$header['ver'] = substr($data, 0, 1);
$header['options'] = substr($data, 1, 1);
$header['salt'] = substr($data, 2, 8);
$header['hmac'] = substr($data, 10, 8);
$header['iv'] = substr($data, 18, 16);
$data = substr($data, 34);

$td = mcrypt_module_open(MCRYPT_RIJNDAEL_128, '', MCRYPT_MODE_CBC, '');
mcrypt_generic_init($td, pbkdf2('SHA256', 'password', $header['salt'], 10000, 16), $header['iv']);

//$decrypted = mcrypt_decrypt('rijndael-256','password',$data,'',$header['iv']);
$decrypted = mdecrypt_generic($td, $data);
echo $decrypted;
?> 
```

我怎么仍然收到乱码。

> U¸¦uÀˆÆ&bŸ8:f`ôShŽºÃ~:¾ÉöÁß=Ç®nqäà€•Æ‹ò</p>

我回顾了 RNCryptor 并为 PHP 脚本使用了以下值

```
static const RNCryptorSettings kRNCryptorAES256Settings = {
    .algorithm = kCCAlgorithmAES128,
    .blockSize = kCCBlockSizeAES128,
    .IVSize = kCCBlockSizeAES128,
    .options = kCCOptionPKCS7Padding,
    .HMACAlgorithm = kCCHmacAlgSHA256,
    .HMACLength = CC_SHA256_DIGEST_LENGTH,

    .keySettings = {
        .keySize = kCCKeySizeAES256,
        .saltSize = 8,
        .PBKDFAlgorithm = kCCPBKDF2,
        .PRF = kCCPRFHmacAlgSHA1,
        .rounds = 10000
    },

    .HMACKeySettings = {
        .keySize = kCCKeySizeAES256,
        .saltSize = 8,
        .PBKDFAlgorithm = kCCPBKDF2,
        .PRF = kCCPRFHmacAlgSHA1,
        .rounds = 10000
    }
}; 
```

我相信这个功能会产生关键？

```
+ (NSData *)keyForPassword:(NSString *)password salt:(NSData *)salt settings:(RNCryptorKeyDerivationSettings)keySettings
{
  NSMutableData *derivedKey = [NSMutableData dataWithLength:keySettings.keySize];

  int result = CCKeyDerivationPBKDF(keySettings.PBKDFAlgorithm,         // algorithm
                                    password.UTF8String,                // password
                                    password.length,                    // passwordLength
                                    salt.bytes,                         // salt
                                    salt.length,                        // saltLen
                                    keySettings.PRF,                    // PRF
                                    keySettings.rounds,                 // rounds
                                    derivedKey.mutableBytes,            // derivedKey
                                    derivedKey.length);                 // derivedKeyLen

  // Do not log password here
  // TODO: Is is safe to assert here? We read salt from a file (but salt.length is internal).
  NSAssert(result == kCCSuccess, @"Unable to create AES key for password: %d", result);

  return derivedKey;
} 
```

再次感谢。

MCRYPT_RIJNDAEL_128 是否正确？尽管 RNCryptor 设置建议它使用 256，但实际算法是 128，IV 大小与 128 块大小相关。我在某处读到强制 PHP 使用 16 字节 IV，您必须使用 MCRYPT_RIJNDAEL_128 然后让 256 为其提供 32 字节密钥。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-09T08:05:40.627

这适用于 iOS 中最新的 RNCryptor

`$b64_data`：base64 编码的加密数据
`$pwd`：密码

```
// back to binary
$bin_data = mb_convert_encoding($b64_data, "UTF-8", "BASE64");
// extract salt
$salt = substr($bin_data, 2, 8);
// extract HMAC salt
$hmac_salt = substr($bin_data, 10, 8);
// extract IV
$iv = substr($bin_data, 18, 16);
// extract data
$data = substr($bin_data, 34, strlen($bin_data) - 34 - 32);
// extract HMAC
$hmac = substr($bin_data, strlen($bin_data) - 32);

// make HMAC key
$hmac_key = $this->pbkdf2('SHA1', $password, $hmac_salt, 10000, 32, true);
// make HMAC hash
$hmac_hash = hash_hmac('sha256', $data , $hmac_key, true);
// check if HMAC hash matches HMAC
if($hmac_hash != $hmac) return false;

// make data key
$key = $this->pbkdf2('SHA1', $password, $salt, 10000, 32, true);
// decrypt
$ret = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, $data, MCRYPT_MODE_CBC, $iv);
return trim(preg_replace('/[\x00-\x08\x0B\x0C\x0E-\x1F\x80-\xFF]/u', '', $ret)); 
```

`pbkdf2`与上述问题相同，来自[https://defuse.ca/php-pbkdf2.htm](https://defuse.ca/php-pbkdf2.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T18:44:38.040

您不需要为此使用 unpack 。

收到完整的 base64 编码字符串后，对其进行解码，现在您应该有一个二进制字符串，该字符串的开头有 IV。

然后，您可以使用`substr()`从数据中获取所需的每一部分。

例如：

```
$base = $_GET['base'];
$data = base64_decode($base);

$iv   = substr($data, 0, 32);  // get 32 byte IV
$data = substr($data, 32);     // set data to begin after the IV now 
```

如果您在密文前附加了其他字段，请确保以正确的顺序对其他数据执行与上述相同的操作。

一旦你有了这些数据，你就可以`$data`连同 IV 和你的密钥一起传递给 mcrypt。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T01:51:54.753

> MCRYPT_RIJNDAEL_128 是否正确？尽管 RNCryptor 设置建议它使用 256，但实际算法是 128，IV 大小与 128 块大小相关。我在某处读到强制 PHP 使用 16 字节 IV，您必须使用 MCRYPT_RIJNDAEL_128 然后让 256 为其提供 32 字节密钥。

中的“128”是`MCRYPT_RIJNDAEL_128`指块大小，而不是密钥大小。Rijndael 算法可以处理多种块大小，但 AES 只能处理 128 位块。这与密钥大小无关。CBC IV 应该始终是块大小，在 AES 中也始终是 16 字节。（Rijndael 和 AES 非常相似，但并不完全相同。Rijndael 比 AES 更灵活。）

在您的`pbkdf2()`函数中，您应该传递 32 字节（256 位）的密钥长度，而不是 16 字节。我相信如果传递一个 256 位密钥，PHP mcrypt 模块会自动切换到 256 位 AES（基于对[理解 PHP AES 加密](http://www.chilkatsoft.com/p/php_aes.asp)的评论；我对 mcrypt 不是特别熟悉）。我假设您正在正确实施 PBKDF2；我没有在那里研究你的代码。

请注意，RNCryptor 在末尾附加了一个 32 字节的 HMAC。我相信您当前的代码会尝试解密它，最终导致 32 字节的垃圾。通常你应该去掉这个 HMAC 并验证它以确保数据在传输过程中没有被修改并且密码是正确的。

# excel - VBA 验证无法正常工作

> ID：13000851
> 
> 赞同：0
> 
> 时间：2012-10-21T18:33:23.713
> 
> 标签：excel, vba

**如果单击提交**按钮`cbo_moduleName`后该字段为空但没有任何反应，我将尝试返回错误消息。

 **```
Private Sub btnSubmit_Click()

    If IsEmpty(cbo_moduleName.Value) Then
        MsgBox ("Module Name field empty!")
        Exit Sub
    End If

End Sub 
```

知道我在哪里犯错吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T18:55:25.823

`IsEmpty`检查类型变量是否`Variant`包含特殊值`Empty`。

您可能的意思是检查字符串是否为空字符串：

```
If Len(cbo_moduleName.Value) = 0 Then
    ...
End If 
```**

# asp.net - ASP.NET 路由导致页面资源无法加载

> ID：13000852
> 
> 赞同：3
> 
> 时间：2012-10-21T18:33:24.063
> 
> 标签：asp.net, .net-4.0, url-routing

我在 ASP.NET 4.0 *C#下有一个**Web 窗体应用程序*。好吧，我开始考虑应用页面路由来掩盖我的内部资源组织，所以我在[这个问题](https://stackoverflow.com/questions/12636087/how-to-specify-url-mappings-in-asp-net-4-0-when-parameters-are-involved)中提出并接受了答案。

 *## 一点背景

我的问题是，在应用路由时，所考虑的页面将被正确路由，这意味着我通过不同的路径（逻辑而不是物理）到达页面，但是图像、样式和外部资源没有正确呈现（根本没有）。

但让我们更详细一点。我在文件中为我的页面添加了一些基本路由，如下`Global.asax`所示：

```
<%@ Application Language="C#" %>

<script runat="server">

  void Application_Start(object sender, EventArgs e) {
    // Registering routes
    this.RegisterRoutes(System.Web.Routing.RouteTable.Routes);
  }

  void Application_End(object sender, EventArgs e) {
    ...
  }

  void Application_Error(object sender, EventArgs e) {
    ...
  }
  void Session_Start(object sender, EventArgs e) {
    ... 
  }

  void Session_End(object sender, EventArgs e) {
    ...
  }

  void RegisterRoutes(System.Web.Routing.RouteCollection routes) {
    // Handling blog posts
    routes.MapPageRoute(
      "BlogRoot",
      "blog/posts",
      "~/Blog.aspx");
    routes.MapPageRoute(
      "BlogPosts",
      "blog/posts/{post-id}",
      "~/BlogPost.aspx");
  }

</script> 
```

# 问题

好吧，在某个时刻，当我想尝试我的新路径时，我会执行以下操作。通常，要查看我的博客，我总是这样做：`http://localhost/MyWebSite/Blog.aspx`并且我的博客帖子都显示了。我又这样做了，没有问题。然后我尝试输入：`http://localhost/MyWebSite/blog/posts`并且页面被正确路由。但有一个问题。浏览器不加载图像和样式。

### 我猜测...

就像它试图从我提供的 url 开始获取图像和样式链接，但这是一个合乎逻辑的链接，它会失败！页面看起来有内容，内容就在那里，但是当涉及到图像、css 内容以及从页面本身之外的某个地方链接的所有内容时，浏览器不会加载它。

我想检查我的 html，但这并不奇怪，即使我没有应用路由，它也只是正常情况。因此，以下是我的页面的摘录，其中显示了一些图像链接和一些 css 包含：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title>
  This is my blog
</title>
<meta name="author" content="Me, myself and I" />
<meta name="keywords" content="blog, personal information, personal page" />
<meta name="description" content="Personal Blog" />
<meta name="language" content="en-us" />
<meta name="copyright" content="Me - Year" />
<link rel="shortcut icon" href="Images/FavIco.jpg" />
<link href="Styles/Style1.css" rel="stylesheet" type="text/css" />
<link href="Styles/Style2.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="Scripts/jquery-1.4.1.js"></script>
    <script type="text/javascript" src="Scripts/jquery-1.4.1-vsdoc.js"></script>
    <script type="text/javascript" src="Scripts/jquery-1.4.1.min.js"></script>
<link href="Scripts/google-code-prettify/src/prettify.css" rel="stylesheet" type="text/css" />
<script src="Scripts/google-code-prettify/src/prettify.js" type="text/javascript"></script>
...

My web site is structured in this way, in the root folder I have all my web pages and there is also a folder called `Images` where, inside, there are all images. In the root folder I also have the folder `Styles` with all css stylesheet inside it. There is also a folder called `Scripts`. 
```

以下是另一个摘录，显示了我的一部分`body`：

```
<div class="main">
   <div class="navbar">
      <span id="WebSite_SiteMapPath"><a href="#WebSite_SiteMapPath_SkipLink"><img alt="Skip Navigation Links" height="0" width="0" src="/WebResource.axd?d=YSaZQjo4n2xp9k-WqUJlK9ILtJOv6g5YNS2VyAf4VpYsZPmq-FcXDtnA5jQ1uPO3rQgDza-fEJKO1qU_C8uSY-WJiCQ7055T8wpvl9SIRFc1&amp;t=634608253861201595" style="border-width:0px;" /></a>
         <span>
            <span class="sitenav">Home page</span>
         </span><a id="WebSite_SiteMapPath_SkipLink"></a>
       </span>
    </div>
   ... 
```

我认为浏览器以某种方式试图使用提供的地址，以便将其附加到`src`它找到的东西并确定资源的确切位置。但由于这是一个逻辑地址，它失败了。我想很多人都使用路由，他们如何解决这个问题？也在谈论最佳实践？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T08:55:46.047

看起来这是因为您的 css/script 包含的是到当前页面的相对链接，并且因为您的路由 URL 在 URL 中有一个额外的级别，所以他们的浏览器正在请求错误的 URL。最好的办法是让 ASP.NET 为您解决这个问题，所以不要这样做：

```
<link href="Scripts/google-code-prettify/src/prettify.css" rel="stylesheet" type="text/css" /> 
```

尝试这个：

```
<link href="<%= Page.ResolveUrl("~/Scripts/google-code-prettify/src/prettify.css") %>" rel="stylesheet" type="text/css" /> 
```*

# javascript - javascript 下拉菜单不适用于 Chrome（事件问题？）

> ID：13000856
> 
> 赞同：0
> 
> 时间：2012-10-21T18:33:42.173
> 
> 标签：javascript, google-chrome, menu

我生成的下拉菜单适用于 Firefox 和 IE，但不适用于 Google Chrome。我有

```
function characterList(){
    //code removed that generates select list 
    var optionContainer = document.createElement("option");
    optionContainer.innerHTML = "Show All Character Lines";
    addEvent(optionContainer, "click", filterChar, false);
    selectContainer.appendChild(optionContainer); //appends option to select menu

    for (var i = 0; i < menu_lines; i++){
       var optionContainer1 = document.createElement("option");
       optionContainer1.innerHTML = "blah" //simplified so that names in menu are all "blah"
       selectContainer.appendChild(optionContainer1);//appends option to select menu
       addEvent(optionContainer1, "click", filterChar, false);//I think the problem is here.
    }
}

function filterChar(){
    alert("filterChar");
}

function addEvent(object, evName, fnName, cap) {
   if (object.attachEvent)
       object.attachEvent("on" + evName, fnName);
   else if (object.addEventListener)
       object.addEventListener(evName, fnName, cap);
} 
```

characterList 使用取自 HTML 文件的 h3 标题的名称填充下拉菜单（选择选项类型）。这工作正常。问题是在谷歌浏览器中，点击下拉菜单时不会调用 filterChar。我有一个应该与所有浏览器兼容的函数（attachEvent）。请有人帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:42:07.933

您需要将单个事件侦听器附加到您的`select`元素。选项元素不是常规的 DOM 元素，这就是为什么听它们`onclick`不起作用的原因。

将单个`onchange`事件侦听器附加到选择将在选择更改时触发：

```
addEvent(selectContainer, "change", filterChar, false); 
```

您可以使用作为第一个参数传递的事件对象在回调函数中获取对 select 的引用：

```
function filterChar(e){
    var select = e.target;
    alert("The selected item was index "+select.selectedIndex);
} 
```

# delphi - 从静态数组迁移到动态数组

> ID：13000863
> 
> 赞同：1
> 
> 时间：2012-10-21T18:34:42.853
> 
> 标签：delphi, matrix

以前我有用于矩阵数据集设计的静态数组

```
TMatrix = record
    row, column: word; {m columns ,n strings }
    Data: array[1..160, 1..160] of real

 var
 Mymatrix  : TMatrix;

 begin

 Mymatrix.row := 160; - maximum size for row us is 160 for 2 x 2 static design.
 Mymatrix.columns := 160; -  maximum size for column us is 160  for 2 x 2 static design. 
```

使用当前的设计，我只能在 2 维矩阵设计中拥有 160 x 160。如果我输入更大的数组大小 [1..161, 1..161] ，编译器将警告 E2100 数据类型太大：超过 2 GB 错误。因此，如果我将代码转换为动态数组，我需要重新构建所有当前代码以读取从 0 开始的矩阵。Previoulsy ，对于静态数组，数组将从 1 开始。一些外部函数从 1 开始读取矩阵。

所以，现在我坚持使用当前的代码，我需要创建超过一千个 N x N 矩阵大小。使用我当前的静态数组设计，如果低于 160 x 160 一切都很好。因此，我需要获得任何解决方案而无需过多地更改我当前的静态数组设计。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T18:51:46.287

继续使用基于 1 的索引会更容易。你可以通过几种不同的方式做到这一点。例如：

```
type
  TMatrix = record
  private
    Data: array of array of Real;
    function GetRowCount: Integer;
    function GetColCount: Integer;
    function GetItem(Row, Col: Integer): Real;
    procedure SetItem(Row, Col: Integer; Value: Real);
  public      
    procedure SetSize(RowCount, ColCount: Integer);
    property RowCount: Integer read GetRowCount;
    property ColCount: Integer read GetColCount;
    property Items[Row, Col: Integer]: Real read GetItem write SetItem; default;
  end;

function TMatrix.GetRowCount: Integer;
begin
  Result := Length(Data)-1;
end;

function TMatrix.GetColCount: Integer;
begin
  if Assigned(Data) then
    Result := Length(Data[0])-1
  else
    Result := 0;
end;

procedure TMatrix.SetSize(RowCount, ColCount: Integer);
begin
  SetLength(Data, RowCount+1, ColCount+1);
end;

function TMatrix.GetItem(Row, Col: Integer): Real;
begin
  Assert(InRange(Row, 1, RowCount));
  Assert(InRange(Col, 1, ColCount));
  Result := Data[Row, Col];
end;

procedure TMatrix.SetItem(Row, Col: Integer; Value: Real);
begin
  Assert(InRange(Row, 1, RowCount));
  Assert(InRange(Col, 1, ColCount));
  Data[Row, Col] := Value;
end; 
```

这里的技巧是，即使动态数组使用基于 0 的索引，您也只需忽略存储在 0 索引中的值。如果您要从使用基于 1 的索引的 Fortran 移植代码，这种方法通常是最有效的。

# html - 我可以在 CSS 类中设置表格单元格的预定义文本内容吗？

> ID：13000867
> 
> 赞同：3
> 
> 时间：2012-10-21T18:35:15.813
> 
> 标签：html, css, html-table

我试过这个：

```
<style type="text/css">
    td.orange : before { background: #DD5F15; content : "TRIPLE";}
</style> 
```

但我相信它会在结束“td”标签之后添加提供的内容，这就是它没有出现的原因。基本上，我只希望所有“橙色”表格单元格中都包含“TRIBLE”文本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T18:45:00.467

你有

```
td.orange : before { background: #DD5F15; content : "TRIPLE";} 
```

试试这个（删除冒号前后的空格`:`）

```
td.orange:before { background: #DD5F15; content : "TRIPLE";}​ 
```

[**工作示例**](http://jsfiddle.net/gkgdk/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:39:16.147

您可以指定背景，或相对定位 :before 元素。

在某些元素上（我认为输入）css3 也不允许 :before。

# java - JSF 更新 primefaces 树的孩子

> ID：13000870
> 
> 赞同：1
> 
> 时间：2012-10-21T18:35:23.073
> 
> 标签：java, ajax, jsf, jsf-2, primefaces

我想更新primefaces树的孩子而不从服务器中拉出整棵树。

我可以更新整个树，但**不仅**是特定节点的子节点......

编辑：

这是我的代码示例：

```
<p:tree value="#{cc.tree}" var="wrapper" id="tree" widgetVar="tree" styleClass="commentTree-#{cc.id}">
   <p:treeNode id="treeNode" styleClass="treenode-#{wrapper.id}">
      Hallo: #{wrapper.text}
   </p:treeNode>
</p:tree> 
```

现在我想更新一个特定的树节点。

```
function findIDbySelector(selector) {
    return $(selector).first().attr('id');
}

function updateComponent(clientID) {
    var ajax_json = {};
    ajax_json['source'] = '#{cc.id}';
    ajax_json['update'] = clientID;

    PrimeFaces.ajax.AjaxRequest(ajax_json);
}

[...]

updateComponent(findIDbySelector('.treenode-1')); 
```

正如我所说，我可以更新整个树，但我只想更新一个 Treenode。

（代码可能包含错误/错别字，因为它被剥离了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:40:44.770

我浏览了一些primefaces资源，发现它们支持加载子节点，这对我来说已经足够了（我可以将节点的内容包装到面板中并更新它和子节点）。

为了更新孩子，我修改了 primefaces expandnode 方法：

```
function loadNodes(tree, c) {
    var a = tree;
    if (tree.cfg.dynamic) {
        if (tree.cfg.cache && c.children(".ui-treenode-children").children().length > 0) {
            tree.showNodeChildren(c);
            return
        }
        if (c.data("processing")) {
            PrimeFaces.debug("Node is already being expanded, ignoring expand event.");
            return
        }
        c.data("processing", true);
        var b = {
            source: tree.id,
            process: tree.id,
            update: tree.id,
            formId: tree.cfg.formId
        };
        b.onsuccess = function (j) {
            var g = $(j.documentElement),
                h = g.find("update");
            for (var e = 0; e < h.length; e++) {
                var l = h.eq(e),
                    k = l.attr("id"),
                    f = l.text();
                if (k == a.id) {
                    c.children(".ui-treenode-children").html(f);
                    a.showNodeChildren(c)
                } else {
                    PrimeFaces.ajax.AjaxUtils.updateElement.call(tree, k, f)
                }
            }
            PrimeFaces.ajax.AjaxUtils.handleResponse.call(tree, g);
            return true
        };
        b.oncomplete = function () {
            c.removeData("processing")
        };
        b.params = [{
            name: tree.id + "_expandNode",
            value: a.getRowKey(c)
        }];
        if (tree.hasBehavior("expand")) {
            var d = tree.cfg.behaviors.expand;
            d.call(tree, c, b)
        } else {
            PrimeFaces.ajax.AjaxRequest(b)
        }
    } else {
        tree.showNodeChildren(c);
        tree.fireExpandEvent(c)
    }
} 
```

一个示例调用可能是：

```
loadNodes(tree, $('#j_idt62\\:tree\\:0')); 
```

`tree`p:tree 的 WidgetVar 在哪里

# code-organization - 我真的需要帮助组织我的网站文件

> ID：13000871
> 
> 赞同：0
> 
> 时间：2012-10-21T18:35:37.453
> 
> 标签：code-organization, project-organization, file-organization

好的，我无法为我的网站组织所有文件。我根本找不到一种有效的方法来组织文件。

这就是我目前组织文件的方式.. [http://imgur.com/knwue](http://imgur.com/knwue)

这是组织它们的好方法吗？或者有没有更好更干净的方法，因为我觉得这在未来会开始变得烦人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:45:26.637

我的目标是将每个站点（learningjs 和 msw）的所有文件都存储在他们自己的文件夹中。

例如，在 /sites/learningjs 中，我将创建一个 /css、/js 和 /img 文件夹，然后将各种 learningjs 文件移入其中。这意味着如果您将来想下载/开源您的项目，那么所有文件都将在正确的位置。

您最终可能会得到多个 jquery 副本 - 但实际上这没关系，因为您可能希望在一个项目中使用 jquery 的较新副本，但在另一个项目中使用旧版本。

查看[http://www.initializr.com/](http://www.initializr.com/)并了解它如何为您构建项目。

# javascript - 使用 XHR 轮询关闭套接字连接

> ID：13000872
> 
> 赞同：3
> 
> 时间：2012-10-21T18:35:41.253
> 
> 标签：javascript, node.js, sockets

有谁知道为什么我的套接字连接在使用 xhr-polling 时没有关闭？这是我想执行的服务器代码，但在使用 xhr-polling 时不会触发。套接字连接工作正常（我在 stunnel 的清漆后面运行，因为这是一个安全的套接字）。我尝试在浏览器卸载时手动发出断开连接事件，但这对我来说不是最佳解决方案。

```
client.on('disconnect', function () {

    delete connected_clients[id];
    console.log('   debug - ' + 'client ' + client.id + 'is disconnected');
    console.log('   debug - ' + 'total number of connected clients is ' + Object.keys(connected_clients).length);               

}); 
```

在我的客户端代码中，我像这样连接套接字：

```
socket = io.connect(BASE_URL, {
    "sync disconnect on unload":true
}); 
```

我的服务器端设置是这样的：

```
 io.enable('browser client minification');  // send minified client
    io.enable('browser client etag');          // apply etag caching logic based on version number
    io.enable('browser client gzip');          // gzip the file
    io.set('log level', 3);                    // reduce logging
    io.set('match origin protocol', true);     // ssl support
    io.set('sync disconnect on unload', true);
    io.set('transports', [                     // enable all transports (optional if you want flashsocket)
        'xhr-polling',
        'websocket',
        'flashsocket',
        'htmlfile',
        'jsonp-polling'
    ]); 
```

这是我在客户端退出浏览器时收到的调试消息

```
debug: xhr-polling closed due to exceeded duration 
```

我正在使用带有节点 0.8.8 的 socket.io 版本 0.9.10。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T10:20:20.577

由于连接是在您（服务器）和客户端（浏览器）之间，因此您可以在连接关闭时收到通知。如果浏览器没有通知您它认为连接已关闭，那么您将无法获知它。

我建议您对客户端进行编程，使其以一种很好地对待您的服务器的方式运行，并在适当地丢弃连接时通知它。在没有通知的情况下简单地忽略连接的情况下，您只需在一段时间不活动（超时）后关闭连接。

可以将其想象为您与朋友进行即时通讯的场景。您的朋友可能会很友好地通知您他们将离开办公桌并且不再能够参加对话（断开连接），或者他们也可以在没有通知的情况下离开办公桌（终止浏览器进程），或者更糟糕的是，他们可以心脏病发作会使他们无法参加（停电）。一段时间后，您将了解他们不再积极参与会话（超时）。

对不起，这里没有魔法。您必须对服务器进行编程以处理它可能正在与断开连接的客户端交谈的事实。

# gnu-screen - 如何绕过与 zssh 文件传输 (rz/sz) 的屏幕/byobu 冲突

> ID：13000880
> 
> 赞同：0
> 
> 时间：2012-10-21T18:37:41.750
> 
> 标签：gnu-screen, tty, pty, byobu

我一直在尝试[zssh](http://manpages.ubuntu.com/manpages/hardy/man1/zssh.1.html)，因为它似乎是一种快速/简单`sz`的`rz`方式来来回发送文件（本地 <-> 远程） over `ssh`。问题是我在远程服务器上使用`byobu`（基本上`screen`），这与文件的发送和接收有某种冲突。

[http://zssh.sourceforge.net/FAQ](http://zssh.sourceforge.net/FAQ)

第 6 条指出：

```
Beware that any program interferring (ie non transparent) with the tty/pty
chain will likely prevent file tranfers from working.

For example, running 'screen' on the REMOTE side will prevent zssh from
working properly because it will be messing things between rz and sz. 
```

这真是太糟糕了，因为运行`byobu`是我的远程管理工具包的重要组成部分，而且我还没有找到任何看起来像`zssh`.

任何人都可以想出一种`zssh`无需禁用即可开始工作的方法`byobu/screen`吗？我会自己解决问题，但是这种事情让我头疼（因为，我不知道为什么`screen`会与这样的文件传输过程发生冲突，所以解释会非常有帮助）。

此外，该问题的任何替代解决方案将不胜感激。

**编辑：** 想知道是否有办法快速退出`byobu`，执行`zssh`任务然后跳回上一个`byobu`会话......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:24:38.713

繁荣。知道了：

在当地，`zssh me@remote.com -p <your port>`

在远程上`byobu`，您需要`Shift`+`F6`以暂时分离会话（不用担心，我们会在此传输后将其取回）。

现在我们在远程服务器上的一个普通的旧 shell 中，让我们从本地机器发送一个文件到远程机器。在遥控器上，输入：`rz`准备在此目录中接收 ( `pwd`)。

现在，点击`Ctrl`+`Space`来显示`zssh`提示符（这个提示符现在基本上是在使用本地机器的终端）。找到您想要的文件（例如`BillLumberg.gif`）并输入：

`sz BillLumberg.gif`

该文件将自动将自身发送到远程计算机并带您返回远程提示。

现在文件已上传，让我们跳回您之前的`byobu`会话。

`byobu -list`将向您显示所有现有`byobu`会话：

```
There is a screen on:
    8515.byobu  (10/21/2012 12:36:23 PM)    (Detached) 
```

要恢复特定会话，请输入：`byobu -r 8515`然后瞧。您实际上需要做的就是`byobu -R`恢复以前使用的会话。

**TLDR：**

1.  `zssh me@remote.com -p <port>`
2.  `Shift`+`F6`分离电流`byobu`
3.  `rz`进入接收模式（仅远程 -> 本地需要此步骤）
4.  `Ctrl`+`Space`到本地`zssh`提示
5.  `sz <filename>`发送文件
6.  `byobu -R`恢复上一个会话

只需交换步骤 3 和 5 即可将文件从远程发送到本地！

# css - SCSS & Susy：不同方向的不同布局

> ID：13000882
> 
> 赞同：3
> 
> 时间：2012-10-21T18:37:43.757
> 
> 标签：css, responsive-design, compass-sass, susy-compass

我正在创建两种不同的布局：一种用于横向，一种用于纵向。横向布局具有更宽的列。我正在使用新版本的 Susy 来执行此操作。

这是我的代码：

```
/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
$total-columns  : 7;
$column-width   : 10.900em;
$gutter-width   : 2.80em;
$grid-padding   : 4.00em;

$show-grid-backgrounds  : true;
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 0px) 
and (max-device-width : 768px) 
and (orientation : portrait) {
$total-columns  : 7;
  $column-width: 7.2em;
  $gutter-width: 2.8em;

  .container {
    @include container;
  }

} 
```

但它不起作用。列保持相同大小（较小的纵向大小）。我怎样才能解决这个问题？

我页面上的其他响应式代码确实有效，只是网格不起作用！

[Susy 文档](http://susy.oddbird.net/guides/reference/)有一整节是关于响应式网格的，但它有点复杂，并且没有讨论方向。我之前也问过[这个问题](https://stackoverflow.com/questions/9782914/susy-change-the-number-of-columns-according-to-screen-size)，但是解决方案不起作用（我认为是因为解决方案是针对旧的 Susy 版本）。

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T20:43:17.843

Susy 主要用于以百分比设置列的宽度，这将使列灵活地适应视口或外部容器的大小。我会使用该`$container-style: fluid;`设置告诉 Susy 使用百分比作为宽度和边距。因为你没有改变列数——你只是想要改变宽度——让宽度变得灵活。然后你的媒体查询几乎不需要改变。

这是我对 12 列网格的基本设置。

```
@import "susy";
$total-columns: 12; // Evenly divisible by 2, 3, 4 and 6
$column-width: 60px;
$gutter-width: 20px;
$grid-padding: $gutter-width;
$container-style: fluid; 
```

我将这些设置保存在我的`_base.scss file and never change it – instead, I apply`@include span-columns(X)` 中到我拥有的任何容器中，并调整我希望它在不同的媒体查询断点处占用的列数。

专门针对 iPad 不是很友好，也不是响应式网页设计的意图，但我相信你有你的理由。该评论更适合阅读此论坛的 RWD 新手。

为了更好地嗅探设备，您可能需要检查用户代理字符串。这个问题也有一些不错的想法：[一个可靠的媒体查询，只检测 iPad（或最好是 1024x768 移动设备）](https://stackoverflow.com/questions/9208245/a-reliable-media-query-to-detect-only-ipad-or-at-best-1024x768-mobile-devices)

# ms-access - 访问表单链接三个列表框在同一个表单上使用基于类别的同一个表

> ID：13000883
> 
> 赞同：0
> 
> 时间：2012-10-21T18:37:59.090
> 
> 标签：ms-access, vba

我有一个关于如何链接一个列表框上的选定项目并以相同形式显示在另一个列表框上的问题......这就是我想要的：

我有一个名为 category 的表，它具有以下值：

```
category table:
categorynumber (primary key) int not null,
categoryname varchar() not null,
Parentcategory (foreign key refering to categorynumber)int not null,
categoryfollowingnumber int not null. 
```

我想从类别、子类别和子子类别中进行选择。因此

```
listbox1(category1),
listbox2(subcategory based on category1)
listbox3 (sub-sub category based on subcategory)

listbox1: select category: Car
listbox2: display: toyota
listbox3: display: toyota corola 
```

我可以在 listbox1 中看到 category1，但是基于所选类别的链接是我卡住的地方。我是否必须在单个表单上使用子表单或这可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:56:01.153

您的行源将需要这样的东西：

```
 Listbox1: SELECT id, category FROM categorytable
 Listbox2: SELECT id, subcategory FROM subcategorytable
           WHERE categoryID = Forms!NameOfForm!LListbox1
 Listbox3: SELECT id, subsubcategory FROM subsubcategorytable
           WHERE subcategoryID = Forms!NameOfForm!LListbox2 
```

在表单的当前事件和 listbox1 和 listbox2 的更新后事件中，您需要根据需要重新查询 listbox2 和 listbox3。

# javascript - null JSON 对象，错误未捕获类型错误：无法读取属性“长度”

> ID：13000885
> 
> 赞同：1
> 
> 时间：2012-10-21T18:38:14.167
> 
> 标签：javascript, json, getjson

我有一个脚本，我通过 JSON 获取一些数据，这就像：

```
$.getJSON('phpfile', function(data) { ... 
```

当我收到一些数据时它工作得很好，但是当它为空时，我得到下一个错误：

> 未捕获的类型错误：无法读取 null 的属性“长度”

我得到这个错误的地方是这样的一行：

```
if(data==null){
 //actions if the JSON is doesnt give me data
}else{
 //actions if I get data
} 
```

我想要的是控制 JSON 何时发送数据，我该怎么做？

编辑：当数据是空对象，当json没有得到任何数据时，我得到了 $.each(data, function(key, val) { 的错误。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:15:14.830

```
$.getJSON('phpfile', function handleSuccess(data) {
    if(!data){ 
          //handle if null or undefined
    }else{
         //actions if I get data
    }
    }).error(function handleErrorCase(){
        //handle error i.e. your server returning something other 200 or not json
    }; 
```

# c - 为什么“地址”运算符给我的指针地址与指针本身不同？

> ID：13000886
> 
> 赞同：0
> 
> 时间：2012-10-21T18:38:38.183
> 
> 标签：c, pointers

例如：

```
printf("&num_ptr = %p ; num_ptr  = %p ;", &num_ptr , num_ptr); 
```

输出以下内容：

```
&num_ptr = 0018FF50 ; num_ptr  = 0018FF48 ; 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-21T18:39:25.783

因为指针没有指向自己。

# entity-framework - 模型类和映射

> ID：13000887
> 
> 赞同：1
> 
> 时间：2012-10-21T18:38:42.753
> 
> 标签：entity-framework, fluent

我定义了 Client 类。我还有使用 Fluent API 定义列名的 Mapping\ClientMap.cs 文件。但是，我不确定如何“调用”它，因为我没有看到正在执行的 ClientMap.cs 代码。

我也有这个：

```
namespace CardNumbers.Data
{
    public class Repository : DbContext, IRepository
    {
        public DbSet<Client> Clients { get; set; }
        public DbSet<ClientOrder> ClientOrders { get; set; }
        public DbSet<Reorder> Reorders { get; set; }
        public DbSet<Operator> Operators { get; set; } 
```

我知道这不是一个很好的做法，但这就是我们与讲师一起构建应用程序的方式。

所以，我的问题是 - 我需要添加什么来确保在运行时调用 Fluent API 代码？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:43:09.290

您应该将映射代码直接放在[OnModelCreating](http://msdn.microsoft.com/en-us/library/system.data.entity.dbcontext.onmodelcreating%28v=vs.103%29.aspx)方法中（这是您可以覆盖的虚拟方法`DbContext`），或者将其放在单独的配置类中，然后从该`OnModelCreating`方法中调用该类。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<Client>().Property(p => p.Name).IsRequired();
} 
```

或者

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Configurations.Add(new ClientConfiguration());
} 
```

别处：

```
public class ClientConfiguration : EntityTypeConfiguration<Client>
{
    public ClientConfiguration()
    {          
        this.Property(p => p.Name).IsRequired();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T18:43:22.730

流利的映射应该`Repository`像这样添加到你的“”类的底部

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        //add fluent api code
    } 
```

我引用您的存储库的原因是您并没有真正在那里实现存储库模式。您确实应该将其定义为特定的 DbContext，然后拥有一个可以采用多个上下文的存储库。请参阅这篇写得很好的关于实现存储库的文章：[http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work -patterns-in-an-asp-net-mvc-application](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)

# android - 微调器如果字符串** == 不工作

> ID：13000893
> 
> 赞同：1
> 
> 时间：2012-10-21T18:39:16.730
> 
> 标签：android

为什么这不起作用？！

```
if(itemx == "Test number item 0")
    {
    Log.i("Dropdown", "inside if");
    us_lo_ans_hold.setText("0x");
    }; 
```

如果 itemx 是一个字符串并且它具有字符串“测试编号项目 0”。

我正在创建我的第一个微调器。

这是 Activity 的 onCreate 块中的微调器代码：

```
 Spinner us_lo_spinner = (Spinner) findViewById(R.id.ul_ans_spinner); 
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource( this, R.array.test_defaults , android.R.layout.simple_spinner_item); 
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    us_lo_spinner.setAdapter(adapter); 

 // Spinner click listener 
us_lo_spinner.setOnItemSelectedListener(this); 
```

这是 strings.xml 中的字符串数组：

```
<string name="spin_title_ulover_ans">Spinner default:</string> 
<string-array name="test_defaults"> 
    <item>Test number item 0</item>
    <item>Test number item 1</item> 
    <item>Test number item 2</item> 
    <item>Test number item 3</item> 
    <item>Test number item 4</item> 
</string-array> 
```

这是 onItemSelected：

```
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) 
{
    Log.i("XXX_Dropdown", "XXXX");
    TextView us_lo_ans_hold = (TextView)findViewById(R.id.us_lo_ans_holdtest);
    // On selecting a spinner item 
    String itemx = arg0.getSelectedItem().toString();
    us_lo_ans_hold.setText("oppp12");
    Log.i("Dropdown", "item: " + itemx);
    Log.i("Dropdown", "arg1: " + arg1);
    Log.i("Dropdown", "arg2: " + arg2);
    Log.i("Dropdown", "arg3: " + arg3);
    // Showing selected spinner item 
    if(itemx == "Test number item 0")
        {
        Log.i("Dropdown", "inside if");
        us_lo_ans_hold.setText("0x");
        }; 

} 
```

从所有的log.i（，）我放入我可以告诉itemx是正确的，选择旋转器中的项目时，它有正确的字符串。然而，IF 将不起作用。

如果我将 IF 更改为：

```
if(arg2 == 0)
    {
    Log.i("Dropdown", "inside if");
    us_lo_ans_hold.setText("0x");
    }; 
```

它会起作用；但这不是我想要的！

那么......为什么这不起作用？！：

```
if(itemx == "Test number item 0")
    {
    Log.i("Dropdown", "inside if");
    us_lo_ans_hold.setText("0x");
    }; 
```

如果 itemx 是一个字符串并且它具有字符串“测试编号项目 0”。?

* * *

还有如何或何时调用“onNothingSelected”？当你按下后退按钮？当您选择已选择的项目时？我的“onNothingSelected”从未被调用过！

```
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub
    Log.i("Dropdown", "in NOTHING SELECTED");
    TextView us_lo_ans_hold = (TextView)findViewById(R.id.us_lo_ans_holdtest);
    us_lo_ans_hold.setText("nothing selected");
} 
```

尝试放入 Activity 的 onCreate 块，如下所示：

```
 // Spinner click listener 
    us_lo_spinner.setOnItemSelectedListener(this);

us_lo_spinner.onNothingSelected(this) 
```

但是〜编译器〜确实喜欢。

那么......如何或何时调用“onNothingSelected”以及它如何连接到微调器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T18:42:05.253

如果您`itemx`是一个变量，那么您不能将两个字符串与`==`. 改为使用`items.equals("Test number item 0");`

`==`比较*对象*并`equals()`比较字符串值。看看这个[帖子](https://stackoverflow.com/a/513839/828728)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T18:43:21.823

永远不要用 == 比较字符串，使用等于：

```
if(itemx.equals("Test item 0")){... 
```

至于 onNothingSelected，[文档](http://developer.android.com/reference/android/widget/AdapterView.OnItemSelectedListener.html#onNothingSelected%28android.widget.AdapterView%3C?%3E%29)指出，例如，如果您从适配器中删除所选项目，它将被调用。

# c# - 如何处理 TFS 中的公共库和共享 dll

> ID：13000894
> 
> 赞同：7
> 
> 时间：2012-10-21T18:39:24.007
> 
> 标签：c#, visual-studio, tfs, nuget

我在 tfs 源代码管理中设置了 2 个不同的应用程序。两者共享一个公共库，也在源代码管理中设置。

当前更改公共库的过程是构建它，跨 dll 复制到一个位置，以供其他应用程序拉入和使用。这是手动的，效果不好，尤其是现在我正在转向 TFS CI 构建。

TFS 中的布局如下：

```
-TFS
   - Web 1
      | Main
      | RB_1_0
   - Web 2
      | Main
      | RB_1_0
   - Shared
      | Main
      | RB_1_0
      | RB_2_0
      | RB_3_0 
```

所以我希望改变它，自动化它。但不知道我怎么能这样做。如您所见，有多个分支等。作为我正在考虑设置的公共库，就像我使用 nuget 包一样，其中更改被推送到我的 web 1 和/或 web 2。我不确定它有多容易进行设置。

是否可以查看上述结构并就管理输出的 dll 的分布的最佳方式给出意见？在 CI 环境中？Nuget 是最佳选择吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-21T20:13:08.650

NuGet 是我用来做这个的。

**修改构建过程为通用包创建新包**

添加一个活动以[构建一个 nuget 包](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package)，另一个将其复制到您用作 NuGet 存储库的网络共享。有一些像[Tfs NuGetter](http://nugetter.codeplex.com/)这样的项目可以使用，而不是手动编辑构建模板。

如果您不想修改构建模板，则可以使用 [tfs deployer] 之类的工具并编写自定义部署脚本来创建 NuGet 包。或者写一些挂钩到构建完成事件的东西。

**为所有解决方案启用在构建时还原包**

这意味着您不需要将软件包存储在源代码管理中，或者在您获得最新解决方案时处理未下载的软件包。

当您想要更新依赖项的版本时，请打开解决方案并像任何普通 NuGet 包一样对其进行更新。

# mongodb - MongoDB 删除名称无效的数据库

> ID：13000897
> 
> 赞同：1
> 
> 时间：2012-10-21T18:39:28.547
> 
> 标签：mongodb

我不知何故在我的 mongo 服务器上得到了一个名为“*”的数据库。我想摆脱它，但我找不到摆脱它的方法。尝试执行正常的 dropDatabase() 函数不起作用，因为 shell 不允许我选择它（即我运行“use *”）。

我怎样才能删除这个数据库？我尝试了类似 db.getSiblingDB("*").dropDatabase();

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T20:17:31.463

我可以放下它。

```
MongoDB shell version: 2.2.0
connecting to: test
> use *
switched to db *
> db.test.insert({'t':1})    
> show tables    
system.indexes    
test
> show dbs;
*       0.203125GB
admin   0.203125GB
local   (empty)
> use *
switched to db *
> db.dropDatabase()
{ "dropped" : "*", "ok" : 1 }
> show dbs;
admin   0.203125GB
local   (empty) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:51:20.370

我成功切换到名称包含“无效”字母的数据库是在 Windows 中打开 CMD 并重定向到 mongodb /bin 文件夹，然后使用您想要切换到的数据库名称的命令行打开“mongo.exe”作为参数。所以我们开始吧！

* * *

例如：打开名为“Congrès”的数据库

c:\Program Files\mongodb\bin>mongo.exe 大会

# c++ - 此功能可能有什么问题或不正确？

> ID：13000900
> 
> 赞同：0
> 
> 时间：2012-10-21T18:39:39.247
> 
> 标签：c++

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

```
double* weird( double a, double b )
{ 
    double c;
    c = pow( a + b, 0.5 );
    return &c;
} 
```

对于你们中的大多数人来说，这可能是微不足道的，但我看不出这里会出现什么问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T18:41:25.333

这是**非常**错误的，因为您正在返回一个指向局部变量的指针。

`&c`返回时，作用域为函数的变量将`c`被`weird`销毁，从而为您提供指向内存中随机区域的指针。这是**未定义的行为**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T18:41:16.873

您在函数范围内声明了一个局部变量`c`，该变量在退出函数后不再有效，因此指向该变量的指针在之后没有任何意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T18:49:53.503

正如其他人所说。

`static`除了在方法中或花括号之间声明的变量之外，变量`{}`具有局部范围。一旦你离开它，变量就会被销毁。

如果您仍然想要它，请使用静态

```
static double c; 
```

# actionscript-3 - 确保在 Flex 3 中至少选中一个复选框

> ID：13000901
> 
> 赞同：2
> 
> 时间：2012-10-21T18:39:39.470
> 
> 标签：actionscript-3, apache-flex, flex3

我有 12 个复选框，我正在尝试验证是否至少选中了一个复选框。我正在维护一个旧的 Flex 3 应用程序。有谁知道我如何在 Flex 3 中做到这一点？

谢谢KS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T19:26:57.147

请按照以下链接使用复选框所需的验证器 [http://hugolarcher.com/2011/03/18/validate-checkbox-in-flex/](http://hugolarcher.com/2011/03/18/validate-checkbox-in-flex/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:51:18.137

一种方法是：

`var atLeastOne:Boolean = chk01.selected || chk02.selected || ... || chk12.selected;`

当然，您需要填写`...`with 检查`chk03`through `chk11`。

# firefox - soundcloud 小部件：自动播放在 Firefox 16 中无法始终如一地工作

> ID：13000907
> 
> 赞同：1
> 
> 时间：2012-10-21T18:40:04.097
> 
> 标签：firefox, iframe, widget, soundcloud, autoplay

当尝试在 iframe 中加载 soundcloud 小部件时，在 Firefox 16 中它并不总是自动播放。

我已将链接配置如下：

```
iframeElement.setAttribute('src','http://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F19746506&auto_play=true&show_artwork=false'); 
```

在 Chrome 和 IE9 中，轨道总是按预期触发。但是，在 Firefox 16 中，有一半以上的时间不会自动播放。

我不知道如何触发它。我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:39:39.897

底层 Flash 组件中存在一个错误，导致自动播放功能表现异常。它只发生在 Firefox 上，因为它不支持带有 HTML5 音频的 MP3 播放，所以我们必须在那里使用 Flash。下周应该会有修复。您还可以使用[Widget API](http://developers.soundcloud.com/docs/api/html5-widget)以编程方式控制播放。

# oracle - 使用 OData 和 Oracle 插入 BLOB

> ID：13000909
> 
> 赞同：1
> 
> 时间：2012-10-21T18:40:09.967
> 
> 标签：oracle, entity-framework, blob, odata, dbcontext

使用 OData 和 Oracle 时，我需要在某个表中插入 blob 记录。我试图在这里遵循示例：http: [//blogs.msdn.com/b/astoriateam/archive/2010/08/04/data-services-streaming-provider-series-implementing-a-streaming-provider-part-1 .aspx](http://blogs.msdn.com/b/astoriateam/archive/2010/08/04/data-services-streaming-provider-series-implementing-a-streaming-provider-part-1.aspx) 作为微软的建议，我从数据模型中排除了我的 BLOB。最后，数据被发送到我的服务，在 GetWriteStream() 我将二进制数据写入临时文件。然后在 Dispose() 我应该将它插入数据库。但是...使用 DbContext，我不能这样做： ObjectStateEntry entry = this.context.ObjectStateManager.GetObjectStateEntry(cachedEntity);

将 this.context 转换为 dbcontext 会引发异常 - DbContext 无法使用，因为它已被释放。我仍然无法理解如何做到这一点？我没有在互联网上找到任何描述如何将 OData 与 blob 和 dbcontext 一起使用以直接使用数据库的示例。

使用：WCF 数据服务 5.1.0-rc2、Visual Studio 2012、带有 ODP 的 Oracle 11.x

# c - 将 const char* 复制到 c 中的字符串

> ID：13000910
> 
> 赞同：2
> 
> 时间：2012-10-21T18:40:11.010
> 
> 标签：c, string, char, constants

在 C [不是 C++] 中：

如何将 a 复制`const char*`到字符串（char 数组）中？

我有：

```
const char *d="/home/aemara/move/folder"
char tar[80] ;
int dl=strlen(d);
int x=0;
while (x<dl){tar[x]=d[x]; x++; }
printf("tar[80]: %s\n",tar); 
```

打印出来：`tar[80]: /home/aemara/move/folderøèB` 问题是这样会在数组末尾添加垃圾[有时，并非总是]我该如何解决？还是有另一种方法可以复制`const char*`到字符串中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T18:41:56.467

`strlen`返回不带空终止符的长度。您需要再复制一个字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T18:41:33.073

复制后忘记在末尾添加 '\0' 字符。

为了解决这个问题，`memset(tar,'\0',80);`

或者 ：

```
if(d1 < 80){ //bad idea, don't use magic numbers
  while(x < d1){ tar[x] = d[x]; x++;}
  tar[x] = '\0';
}
printf.. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T18:42:16.567

`strlen`的返回值不包括 NULL 终止符。

`while`在循环之后添加以下行

```
tar[dl] = '\0'; 
```

`tar`或者，您可以在声明数组时进行零初始化。

```
char tar[80] = {0}; 
```

现在您不需要在循环后终止 NULL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-21T20:10:27.180

这是你应该做的：

```
const char *d="/home/aemara/move/folder";//Semi-colon was missing in your posted code
char tar[80];
memset(tar,0x00,80);//This always a best practice to memset any array before use
int dl=strlen(d);//This returns length of the string in excluding the '\0' in the string
int x=0;
if(dl<79)// Check for possible overflow, 79th byte reserved=1 byte for '\0'
while (x<dl){ tar[x]=d[x]; x++; }
if(x<80) d[x]=0;//If not using memset have to use this, xth byte initialized to '\0'
printf("\ntar[80]: %s\n",tar); 
```

# apache - 通过 ssh 编辑 php.ini 文件不生效

> ID：13000912
> 
> 赞同：1
> 
> 时间：2012-10-21T18:40:16.410
> 
> 标签：apache, php

我使用 SSH 访问我的 VPS 服务器并使用 root 登录并编辑*php.ini*文件，然后保存它。但重新启动 apache 后，更改会恢复，因此更改不会生效。

我应该怎么做才能解决这个问题？

使用 kloxo 控制面板和 CentOS 5.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:49:20.613

取决于你使用什么。

这是用于 plesk 的教程

[http://www.linuxspy.info/704/how-to-enable-custom-php-ini-settings-for-particular-domain-in-plesk/](http://www.linuxspy.info/704/how-to-enable-custom-php-ini-settings-for-particular-domain-in-plesk/)

# c - C 编程 fork() 多管道()

> ID：13000917
> 
> 赞同：0
> 
> 时间：2012-10-21T18:40:47.727
> 
> 标签：c, unix, fork, pipe

我使用管道（）forks（）exec（）dup（）模拟shell。我已经在 stackoverflow 上看到了一些帖子来指导前进。但是我的 prog 似乎与其他人在这里遇到的类似问题。

我使用的 LinkedList 结构包含：char* cmd 和 char** args（例如 cmd='ls' args = '-l -d'）

以下是一些输出结果： ls -l ls -l -a（我想要多少个参数） ls -l | 种类

```
ls -l | wc -w (runs but spits out wrong value)
ls | wc -w (runs, but spits out the wrong value)
ls (alone - no args, spits out A NULL argv[0] was passed through an exec system call.)
ls -l | sort | wc -w (causes system to hang) 
```

它现在至少假装它正在接受多个参数但无效的结果或系统挂起。

```
void runCommand(Node* head)
{
    int old_fd[2], new_fd[2];
    int isValid, cpid, pid;

    //Loop through all commands
    for(int cmd = 0; cmd < cmdCount; cmd++)
    {
        //if(curr cmd has next cmd)
        if(cmd+1 < cmdCount)
        {
            //Create pipe new_fd
            if( pipe(new_fd) == -1) //pipe error
            {
            perror("Pipe Error.");
            exit(-1);
            }
        }

        //Parent
        if( (pid=fork()) != 0 ) //parent
        {
            //Wait for child process
            //wait(0); //moved below

            //Curr cmd has next command
            if(cmd+1 < cmdCount)
            {
                old_fd[0] = new_fd[0];
                old_fd[1] = new_fd[1];
            }

            //Curr cmd has previous command
            if(cmd-1 > -1)
            {
            close(old_fd[0]);
            close(old_fd[1]);
            }
        }
        //Child process
        else //if fork() == 0
        {
            //Curr cmd has previous command
            if(cmd-1 > -1)
            {
                dup2(old_fd[0], 0); // setting up old_pipe to input into the child
                close(old_fd[0]);
                close(old_fd[1]);
            }

            //Curr cmd has next command
            if(cmd+1 < cmdCount)
            {
                close(new_fd[0]); // setting up new_pipe to get output from child
                dup2(new_fd[1], 1);
                close(new_fd[1]);
            }

            printf("Running command '%s': \n",getCmd(cmd,head));
            printf("Arguments: "); printArgs(cmd,head);
            //Below works for 1 cmd 1+ args, but not 1 cmd 0 arg or mult pipes
            isValid = execvp(getCmd(cmd,head), getArgs(cmd,head));

            if(isValid == -1)
            printf("%s: Command not found.\n", getCmd(cmd,head));
        }
     wait();

    }
} 
```

**请注意这个线程：[Another_Stack_Overflow_Example](https://stackoverflow.com/questions/1694706/problem-with-piping-commands-in-c)我在那里使用了示例并将我的函数替换为他们的“工作”示例。他们的工作示例似乎适用于大多数情况，除了一个没有像“ls”这样的参数的命令，它根本什么都不做。并要求输入**

这是请求的 getCmd() 和 getArgs() 函数，只需调用“getNode()”，它返回一个 Node* 结构（包含 char* 和一个 char** 和两个整数）getCmd 提取 char* cmd，getArgs 提取char** 参数。

```
char* getCmd(int index, Node* head)
{
  Node* curr = getNode(index,head);
  return curr->cmd;
}
char** getArgs(int index, Node* head)
{
  Node* curr = getNode(index,head);
  return curr->args;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T20:29:45.887

两件事情：

1\. 您应该将一个 NULL 终止的数组传递给**execvp()**：

```
execvp("ls", NULL); // invalid!!! 
```

这应该是：

```
const char *args[1] = { NULL };
execvp("ls", args); 
```

2. "Pipe operator" | is a shell extension so you cannot use it in **exec...** functions. You can specify only a single executable there.

# php - WordPress 页面模板在更新时更改回默认模板

> ID：13000918
> 
> 赞同：1
> 
> 时间：2012-10-21T18:40:56.753
> 
> 标签：php, wordpress

我已经为一个页面创建了一个 WordPress 模板。该模板称为 koebenhavn.php。它位于我的主题目录中的一个子目录中。代码如下所示：

```
<?php
/*
Template Name: Koebenhavn
*/
?>

<?php get_header(); ?>

<?php
    query_posts('cat=3');
    while (have_posts()) : the_post();
    the_content();
    endwhile;
?>

<?php get_footer(); ?> 
```

当我转到管理面板并选择要在其上使用此模板的页面时，我按下蓝色的“更新”按钮，它会自动切换回“默认模板”。我以前从未经历过这种情况。

我尝试在现有页面以及新创建的页面上添加模板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:49:04.583

为了清楚起见，您要转到现有页面并在点击更新之前选择模板？除了一些无关的标记之外，我认为代码本身没有任何问题，这些都与您的问题无关，但我将在下面粘贴清理后的代码。

我怀疑这是一个文件权限问题，因为它在某种意义上是可见的（wordpress 可以读取它）但在另一种意义上是不可见的（wordpress 似乎无法“执行”它）。

或者，数据库、其他插件等可能存在问题。一般来说，最好禁用所有插件并测试异常是否会重复出现。

```
<?php
/*
Template Name: Koebenhavn
*/

get_header();

    query_posts('cat=3');
    while (have_posts()) : the_post();
    the_content();
    endwhile;

get_footer();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T07:21:34.410

此行为的原因是由文件名引起的。我在文件名中使用了丹麦字母 ø `københavn.php`。

可能有一种方法可以解决这个问题，但为了简单的出路，只需编写即可`koebenhavn.php`。

# matlab - Matlab中的单元格和矩阵有什么区别？

> ID：13000923
> 
> 赞同：29
> 
> 时间：2012-10-21T18:41:17.623
> 
> 标签：matlab, matrix

Matlab中的单元格（即带有`{ }`）和矩阵（即带有）有什么区别？`[ ]`

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-21T18:56:47.127

MATLAB 中的元胞数组和矩阵有几个区别：

*   一个元胞数组可以在每个元胞中包含任意类型的元素；而矩阵要求其元素的类型是同质的，即相同类型。

*   就内存布局而言，矩阵的所有元素都在内存中连续布局，而元胞数组包含指向数组每个元素的指针。在考虑高性能代码的缓存局部性等问题时，这可能很重要。

*   第 2 点的另一面是，当您调整矩阵大小时，必须将矩阵中的每个元素复制到新分配的内存区域，但对于单元数组，只需复制指针列表。根据您存储的元素的大小和类型，这可能意味着元胞数组调整大小的速度要快得多。

* * *

为了说明内存布局的差异，让我们考虑一个简单的例子：

```
A = [10 20 30 40]; 
```

在这里，MATLAB 创建了一个名为 A 的新矩阵变量，分配了足够的内存来保存 4 个双精度数（32 字节，假设 8 字节双精度数）并将此内存分配给指向 A 的*实*部的指针。（如果您创建一个复数矩阵数字，内存也分配给*虚*部，一个单独的指针指向这个内存区域）。

现在让我们创建一个包含这些元素的元胞数组：

```
B = cell(1, 4);
B{1,1} = 10;
B{1,2} = 20;
B{1,3} = 30;
B{1,4} = 40; 
```

当 MATLAB 执行第一条语句时，它会创建一个包含 4 个指针的元胞数组，每个指针都可以指向任意类型。所以`B`已经使用了 16 个字节（假设是 32 位指针）。下一行创建一个包含值 10 的 1x1 矩阵，并将其分配给第一个元胞数组元素。这里的过程类似于我上面描述的创建 1x4 矩阵的过程，除了分配的内存仅大到足以容纳一个双精度数（8 字节）。对其余 3 个语句中的每一个重复此操作。因此，第二个示例至少使用`16 + 8 x 4 = 48`字节。

请注意，MATLAB 中的每个变量还包括一个称为*mxArray*的结构的内存开销，该结构存储诸如维度、数据类型和有关该变量的更多信息。为了简单起见，我忽略了这个开销。

# php - 将内容类型字段链接到用户配置文件

> ID：13000925
> 
> 赞同：3
> 
> 时间：2012-10-21T18:41:25.083
> 
> 标签：php, drupal, drupal-7

我想将内容类型（比如文章）中的字段（比如 WRITTEN BY:Name）的输出链接到用户配置文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T07:56:59.693

你应该看看[Entity API](http://drupal.org/project/entity)和[Entity reference](http://drupal.org/project/entityreference)。

考虑这些模块而不是参考模块（如参考模块中所述）：

> 引用很可能在不久的将来被弃用，转而支持实体引用，这可能应该在新的 D7 项目中首先考虑。另一个更激进的替代方案是关系模块。

**更新：** 以下是必需的步骤：

*   转到内容类型管理字段页面。例如 `admin/structure/types/manage/page/fields`
*   在`Add new field`“选择`Type of data to store.`成为”部分下`Entity Reference`，对于小部件，选择适合您的部分。然后单击`Save`。
*   从`Field settings`页面中，设置`Target type`为`User`，然后配置其余设置以适合您的目的并保存设置。

希望这会有所帮助……穆罕默德。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T04:52:23.183

您可以使用[用户参考](http://drupal.org/project/references)字段并链接到用户配置文件。

干杯！！！

# visual-studio - 我是否需要 Visual Studio 的付费版本来开发适用于 Windows 8 的应用程序？

> ID：13000934
> 
> 赞同：0
> 
> 时间：2012-10-21T18:42:35.300
> 
> 标签：visual-studio, windows-8

我即将开始一个专门用于 Windows 8 操作系统的项目。据我所知，有一个随 Windows 8 SDK 一起分发的免费 Visual Studio 版本。创建此类应用程序是否需要完整的套件，或者我可能需要购买完整版的 Visual Studio？我在 MS 网站上找不到任何有关它的信息。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:44:10.577

[http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-products)

它们是免费的，但付费版本具有更强大的开发人员选项。

# java - 通过资源读取和写入 Java 文件

> ID：13000937
> 
> 赞同：24
> 
> 时间：2012-10-21T18:43:08.900
> 
> 标签：java, io

我正在尝试读取和写入文件，但我想通过 Resource 访问该文件。

这就是我所做的

```
File f = new File(ClassLoader.getSystemResource("/blah/blah/Properties.prop").toURI());
BufferedReader br = new BufferedReader(new FileReader(f));
String line = br.readLine();

PrintWriter p = new PrintWriter(new File(ClassLoader.getSystemResource("/blah/blah/Properties.prop").toURI())); 
```

但似乎都不正确。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-21T18:47:54.677

对于输入，请尝试以下操作：

```
 InputStreamReader isReader = 
                      new InputStreamReader(
                          this.getClass().getResourceAsStream(templateName));
      BufferedReader br = new BufferedReader(isReader); 
```

或者

```
 InputStreamReader isReader = 
                      new InputStreamReader(
                          <youclassName>.class.getResourceAsStream(templateName));
      BufferedReader br = new BufferedReader(isReader); 
```

对于输出，请尝试以下操作：

```
 PrintWriter writer = 
               new PrintWriter(
                     new File(this.getClass().getResource(templateName).getPath())); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-07T05:33:59.267

上面的所有解决方案都显示了您如何获得对**build 文件夹**中资源的访问权限。这意味着资源已被移动到带有**.class**文件的构建目录。
如果您需要在程序终止后将一些文件写入资源以保存它们，那么您必须描述以根项目开头的路径：

> ./src/main/resources/foo.ext

通常不推荐这种解决方法，但在其他情况下可能是必要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-26T14:38:59.520

更简单地说，

```
 try (BufferedReader bufferedReader = Files.newBufferedReader(Paths.get(Resources.getResource("path").toURI()))) {
        //bufferedReader...
    }
    try (BufferedWriter bufferedWriter = Files.newBufferedWriter(Paths.get(Resources.getResource("path").toURI()))) {
        //bufferedWriter...
    } 
```

请注意，路径是相对于资源文件夹的。

# javascript - JavaScript 中有没有简单的选择器来获取 DOM 元素？

> ID：13000940
> 
> 赞同：-1
> 
> 时间：2012-10-21T18:43:24.567
> 
> 标签：javascript, element, inspector

我正在寻找类似于在 Opera Dragonfly 和 Firebug 中单击鼠标的元素检查器。

单击后，它将显示如何在 JavaScript 中获取该元素？有什么工具可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T18:45:30.857

应该这样做：

```
var element = document.elementFromPoint(x, y); 
```

完整代码：

```
window.onmousemove=function(e) {
elem=document.elementFromPoint(e.clientX,e.clientY);
elem.style.backgroundColor="#3399ff";
} 
```

当然，这只是一个例子，并不完美。

# jquery - Perl CGI->Vars() 没有正确散列 cgi 参数

> ID：13000943
> 
> 赞同：0
> 
> 时间：2012-10-21T18:43:47.857
> 
> 标签：jquery, json, perl, post, cgi

我正在尝试使用 MySQL、Perl 和 JS 为我的网站制作一个简单的注册表单。当直接通过 cmdline 或 URL 给定参数并且 MySQL 正确注册用户时，Perl 脚本工作正常。问题在于 JS；当我通过 JSON 帖子发送数据时，Perl 脚本接收该帖子并尝试创建通过代码给出的参数的哈希：

`%params = $cgh->Vars()`

但是，这并没有正确拆分参数并将它们分配给各个键。相反，Perl 脚本会创建一个如下所示的哈希：

%参数数据

```
$VAR1 = 'POSTDATA';
$VAR2 = 'action=register&uname=d&pass=d&first=d&last=d&email=anemail@themailplace.com&phone=d'; 
```

我怀疑 JS 需要改变它提交数据的方式，而不是 Perl 脚本接受数据的方式。无论如何，这里是 JS：

```
$(document).ready(function(){
    $("form#register-form").submit(function() { // register-form is submitted
        var username = $('#username').attr('value'); // get username
        var password = $('#password').attr('value'); // get password
        var repassword = $('#repassword').attr('value'); // get password
        var firstName = $('#firstName').attr('value'); // get password
        var lastName = $('#lastName').attr('value'); // get password
        var email = $('#email').attr('value'); // get password
        var phone = $('#phone').attr('value'); // get password

        if (username && password && repassword && firstName && lastName && email && phone) { // values are not empty
            $.ajax({
                type: "POST",
                url: "/cgi/login.pl", // URL of the Perl script
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                // send username and password as parameters to the Perl script
                data: "action=register" + "&uname=" + username + "&pass=" + password + "&first=" + firstName + "&last=" + lastName
                    + "&email=" + email + "&phone=" + phone,
                // script call was *not* successful
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                    $('div#register-result').text("responseText: " + XMLHttpRequest.responseText
                        + ", textStatus: " + textStatus
                        + ", errorThrown: " + errorThrown);
                    $('div#register-result').addClass("error");
                }, // error 
                // script call was successful 
                // data contains the JSON values returned by the Perl script 
                success: function(data){
                    if (data.error) { // script returned error
                        $('div#register-result').text("data.error: " + data.error);
                        $('div#register-result').addClass("error");
                        } // if
                    else { // login was successful
                        $('form#register-form').hide();
//                        $('div#register-result').text("data.success: " + data.success + ", data.userid: " + data.userid);
//                        $('div#register-result').addClass("success");
                    } //else
                } // success
            }); // ajax
        } // if
        else {
            $('div#register-result').text("enter username and password");
            $('div#register-result').addClass("error");
        } // else
//    $('div#register-result').fadeIn();
    return false;
    });
}); 
```

除非与问题相关，否则请忽略我对表单提交的信息几乎没有检查的事实。如果您需要更多信息，请告诉我。提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T19:17:33.560

您没有将 JSON 发送到服务器，因此使用`contentType: "application/json; charset=utf-8",`将覆盖默认值`'application/x-www-form-urlencoded; charset=UTF-8'`

使用默认值，服务器脚本处理键/值对，就像处理任何其他表单提交一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T19:47:43.900

根据 CGI 文档：

> 如果 POST 数据的类型不是 application/x-www-form-urlencoded 或 multipart/form-data，则不会处理 POST 数据，而是在名为 POSTDATA 的参数中按原样返回。

所以删除你的内容类型规范并允许 jQuery 使用它的默认`application/x-www-form-urlencoded`. （`multipart/form-data`用于包含文件上传的表单数据。）

# javascript - 根据 url 新建背景

> ID：13000944
> 
> 赞同：1
> 
> 时间：2012-10-21T18:43:50.047
> 
> 标签：javascript, jquery

我确定可以根据网址更改背景图片吗？

例如 www.myurl.co.uk/halloween/

如果 url 包含 /halloween/ 那么 body {background:url(/images/newbackground.jpg)}

我想我以前做过这个，但对于我的生活，我不记得怎么做。

首选 jQuery？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T18:49:51.767

```
$(document).ready(function () {
    if(window.location.href.indexOf("halloween") > -1) {
       alert("your url contains the name halloween");
       $("body").css('background', 'url("images/newbackground.jpg")');
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T18:48:41.197

此代码段可能会为您解决问题：

```
if(window.location.indexOf("halloween") != -1) {
  $("body").css('background', 'url(imgs/halloween.png)');
} 
```

它在当前 url 中查找字符串“halloween”，如果在其中的任何位置找到它，则将正文背景设置为“imgs/halloween.png”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T18:52:14.640

jQuery 为此增加了不必要的开销。给定关键字到图像的映射：

```
var images = {
    'halloween' : '/images/newbackground.jpg',
    'christmas' : '/images/xmasbackground.jpg'
}; 
```

你可以这样做：

```
var url = document.location.href,
    elem = document.getElementById('elementThatYouWantToStyle');

for (var keyword in images){
    if (images.hasOwnProperty(keyword) && url.indexOf(keyword) !== -1) {
        elem.style.backgroundImage = 'url(' + encodeURI(images[keyword]) + ')';
    }
} 
```

现在，有了一个成熟的（[谢天谢地经过调试](https://stackoverflow.com/q/13001333/)的）功能形式：

```
var images = {
    'halloween': 'http://davidrhysthomas.co.uk/img/dexter.png',
    'christmas': 'http://davidrhysthomas.co.uk/img/mandark.png'
};

function setBG(el, map, url) {
    if (!el || !map) {
        return false;
    }
    else {
        url = url || document.location.href;
        /* means you can pass an element's `id` or a reference to the node itself */
        el = el.nodeType == 1 ? el : document.getElementById(el);
        for (var keyword in map) {
            if (map.hasOwnProperty(keyword) && url.indexOf(keyword) !== -1) {
                el.style.backgroundImage = 'url(' + map[keyword] + ')';
            }
        }
    }
}

setBG('one', images, 'http://some.domain.com/with/halloween.jpg');
setBG(document.getElementById('two'), images, 'http://some.domain.com/with/christmas.jpg'); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/VsZ4f/5/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-21T18:54:06.220

试试这个

```
<script>

    var currentUrl = document.URL;

    if(currentUrl == 'www.myurl.co.uk/halloween/')
      document.body.style.backgroundImage = 'url(/images/newbackground.jpg)';
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-21T18:49:32.743

也许你通过 jQuery 为每个页面的正文添加一个类，例如 /halloween/: $("body").addClass("halloween");

然后在 Css 中：body.halloween { /* custom bg */ }

您也可以将所有链接设为橙色：body.halloween a {color:orange;}

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-21T18:51:38.913

在脚本标签中包含以下代码 -

```
$(document).ready(function() {
    var path = window.location.href.split("/");
    if (path.length > 2) {
       if(a[2] == "halloween" ) { 
           $('body').css({background : 'url(/images/newbackground.jpg)' });
       }
       else if(a[2] == "something_else") {
           $('body').css({background : 'url(/images/something_else.jpg)' });
       }
       //more else if for other images
    }

}); 
```

# java - Spring MVC：新手错误。Classnotfound 异常

> ID：13000948
> 
> 赞同：0
> 
> 时间：2012-10-21T18:44:07.237
> 
> 标签：java, spring-mvc

`ClassNotFoundException`我在尝试运行我的示例应用程序时得到以下信息。如果有人能指出我做错了什么，那就太好了。谢谢！

```
SEVERE: Context initialization failed
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [com.thecafetechno.HelloWorldController] for bean with name '/requestURI.htm' defined in ServletContext resource [/WEB-INF/dispatcher-servlet.xml]; nested exception is java.lang.ClassNotFoundException: com.thecafetechno.HelloWorldController
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1138)
....
Caused by: java.lang.ClassNotFoundException: com.thecafetechno.HelloWorldController
.... 
```

但是，我`HelloWorldController`已经在正确的地方定义了。这是我的调度程序 servlet。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation=" http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="viewResolverBean" class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
        <property name="prefix">
            <value>/WEB-INF/jsp/</value>
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
   </bean>
   <bean name="/requestURI.htm" class="com.thecafetechno.HelloWorldController" >
        <property name="processor" ref="processorBean"/>
    </bean>
    <bean name="processorBean" class="process.Processor" />
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:54:05.033

您是否可以发送该示例应用程序，以便我快速查看。您如何构建应用程序似乎存在一些问题。

# java - Java中runtime.exec的同步性

> ID：13000954
> 
> 赞同：0
> 
> 时间：2012-10-21T18:45:01.413
> 
> 标签：java, process, jvm, runtime.exec

我有一些代码`proc = Runtime.getRuntime().exec(cmd)`被调用来启动一个子进程，然后在父进程和子进程之间进行了一些通信。在某些情况下，我`java.io.IOException: The pipe is being closed`在调用 write() 和 flush() 从父母到孩子。这种情况有时会发生，但不是每次都发生。

我的假设是子进程正在启动（因此`proc.getInput/OutputStream()`可以工作），但父进程正试图在子进程完全运行/执行之前写入子进程。这看起来有道理吗？我对 JVM 没有足够的深入经验，无法真正感到自信。目前我的解决方案是让子进程写入父进程，通知它它已启动并正在运行；这工作得很好，但如果对它更有信心的话会很好。

如果有更多代码细节或需要什么，我很乐意提供。

谢谢！

# iphone - 如何使用 UISearhBar 在 UITableview 中搜索？

> ID：13000956
> 
> 赞同：0
> 
> 时间：2012-10-21T18:45:08.090
> 
> 标签：iphone, xcode, uitableview, nsstring, uisearchbar

> **可能重复：**
> [iOS 搜索结果顺序](https://stackoverflow.com/questions/11533204/ios-search-results-order)

当我使用**UISearchBar在****UITableview**中搜索某些东西时，在UISearch中进行搜索后，我的 UITableview 中没有出现任何内容。在搜索我的表之前显示我在 PList 中的所有数据。当我在这样的格式中有 Plist**数据**时，我正面临搜索问题.as my Sreenshot show below

 ****![在此处输入图像描述](../Images/1c8d6e0f8b47df733ae109e04cf92215.png) 我的代码在下面给出。

```
 - (void)viewDidLoad
{
[super viewDidLoad];
    pArray = [[NSArray alloc] init];
    listOfItems = [[NSMutableArray alloc] init];
NSDictionary *dic = [NSDictionary dictionaryWithObject:pArray forKey:@"Countries"];
[listOfItems addObject:dic];
sArray = [[NSMutableArray alloc] init];
 }

-(void) viewWillAppear:(BOOL)animated{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"Songs" 
        ofType:@"plist"];
NSDictionary *dic = [[NSDictionary alloc] initWithContentsOfFile:path];
pArray = [[dic objectForKey:@"A"]retain];
[tableView reloadData];
}

 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
if (searching){
      return [sArray count];
}
  else {  
       return [pArray count];
     }
  }

- (void) searchTableView
  {
NSString *searchText = searchBar.text;
NSMutableArray *searchArray = [[NSMutableArray alloc] init];
for (NSDictionary *dictionary in listOfItems)
{
    NSArray *array = [dictionary objectForKey:@"Countries"];
    [searchArray addObjectsFromArray:array];
}

for (NSString *sTemp in searchArray)
{
    NSRange titleResultsRange = [sTemp rangeOfString:searchText options:NSCaseInsensitiveSearch];

    if (titleResultsRange.length > 0)
        [sArray addObject:sTemp];
}

[searchArray release];
searchArray = nil;

} 
```

**当我在searchTableView**方法中使用断点时，字符串**SearchText**显示它当前拥有的文本，但我的 NSArray**数组**显示零对象和我的 NSString **sTemp**显示**变量不是 CFString**。可以帮助修复它。提前谢谢。****

# xcode - Xcode：无法使用 SOIL 构建 OpenGL 项目

> ID：13000957
> 
> 赞同：2
> 
> 时间：2012-10-21T18:45:15.593
> 
> 标签：xcode, soil

我尝试在带有 OpenGL 的 C++ 项目中的 Xcode 下运行 SOIL。当我将文件添加到我的项目时，它会自动将“libSOIL.a”添加到目标的“Link Binary With Libraries”。我在 main.cpp 中添加了：

```
#include "lib/soil/src/SOIL.h" 
```

当我构建项目时，我总是得到错误

> /.../Projects/XCode/OpenGLTest/OpenGLTest/lib/soil/src/test_SOIL.cpp:4:10: 'windows.h' 文件未找到

我不知道为什么 SOIL 试图用“widows.h”编译一些东西，因为我在 OS X 下。我搜索了网络，但没有找到解决方案。我希望有人可以在这里帮助我并解释我是否可以轻松运行 SOIL。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T11:20:10.457

I posted the question also on another board and finally got a an answer [Xcode: Can't build OpenGL project with SOIL](http://www.tutorial-portal.com/board/thread/id/5)

Now it works!

# c - 下面的“assert_disabled()”宏是如何工作的？

> ID：13000962
> 
> 赞同：4
> 
> 时间：2012-10-21T18:45:49.633
> 
> 标签：c, assert, sizeof

我看到这个宏出现在代码库的许多地方，以查找特定字段是否被禁用（0 或 1）。

```
#define assert_disabled(e)      ((void)sizeof(e)) 
```

这里如何`sizeof`帮助查找字段是 0 还是 1？

有人可以用一个工作示例来解释这一点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-21T18:50:56.203

我很确定这个宏只是在关闭断言时使用。使用`((void)sizeof(e))`而不是 just`(void)0`或类似的技巧很聪明：它避免了评估`e`（大多数情况下），但仍然让编译器检查`e`是否为有效表达式，因此当您更改定义以打开断言时，您不会遇到意外的编译错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T18:51:39.077

这是我在 Linux 内核代码中看到的一种黑魔法。

它用于在编译时检查表达式'e'。

# c# - WebBrowser.Document.Forms[0].InvokeMember() 参数是否总是“提交”？

> ID：13000963
> 
> 赞同：0
> 
> 时间：2012-10-21T18:45:50.723
> 
> 标签：c#, winforms, webbrowser-control, form-submit

到目前为止，我[在 WebBrowser 控件中提交表单的](https://stackoverflow.com/a/2299388/1357272)每个代码示例都将`WebBrowser.Document.Forms[0].InvokeMember()`参数硬编码为`"submit"`.

这个参数必须总是**“提交”**吗？

如果是这样，那为什么它是一个参数？

如果不是，那么指定放置哪个字符串的规则是什么？它是否依赖于被访问页面的 HTML？

**更新 1：**[InvokeMember()](http://msdn.microsoft.com/en-us/library/0t9yb2z4.aspx)的文档清楚地显示了使用“提交”以外的值的示例。所以，至少我得到了答案：**没有**。

但我仍然不明白什么时候应该使用“提交”，什么时候应该使用“moveRow”：在我通过“提交”处理的网页中，没有提到那个字符串，但它工作得很好。隐藏在网页中的隐含“提交”在哪里？

**更新2：**啊！我想我开始明白了：这是一个[Javascript 内置方法](http://www.w3schools.com/jsref/met_form_submit.asp)。因此暗示了任何 DOM[表单](http://www.w3schools.com/jsref/dom_obj_form.asp)元素。

权威的答案是最受赞赏的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T19:32:56.863

不，它不必是“提交”。但这肯定是您在表单中使用过的最流行的方法。Winforms HtmlDocument 和 HtmlElement 类是 DOM 接口的包装器。本例中的核心是 IHtmlDocument2（匹配 HtmlDocument）和 IHtmlElement2（匹配 HtmlElement）。使用大量特定的接口类型，例如 IHtmlFormElement 来表示 DOM 中的表单对象。但是在 Winforms 中没有匹配的类，HtmlElement 将它们全部包装起来。这就是为什么您需要使用 InvokeMember()，与反射的 Type.InvokeMember() 的想法相同。它弥补了没有被 HtmlElement 包装的方法。像 IHtmlFormElement::submit()。

HtmlElement 的一个优点是它可以帮助您避免这些 DOM 接口版本的混乱。例如，有七个版本的 IHtmlDocument。每次微软改进 IE 时，他们往往不得不创建另一个版本的界面并添加额外的成员。

你当然可以使用它们早期绑定。添加对 c:\windows\system32\mshtml.tlb 的引用。将 WebBrowser.ActiveXInstance 转换为 mshtml.IHtmlDocument 以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T16:04:18.260

InvokeMember 通过 IDispatch::Invoke 调用表单元素的方法/属性。[您可以从 IE 的form element](http://msdn.microsoft.com/en-us/library/ie/ms535249%28v=vs.85%29.aspx)文档中找到可以调用的方法和属性列表。

通过 IE 的类型库更容易绑定确保类型安全，但您需要为方法/属性找到正确的接口，这意味着对于表单元素，如果在 IHTMLFormElementX 下找不到方法/属性，则需要在 IHTMLElementX 下查找。

# asp.net-mvc - 手动设置 IIdentity

> ID：13000964
> 
> 赞同：0
> 
> 时间：2012-10-21T18:45:57.573
> 
> 标签：asp.net-mvc, authentication

我正在使用我自己的身份验证方案，不基于 cookie。我希望能够手动设置`Controller.User.Identity`我通常在 FormsAuthentication Cookie 中设置的用户名和其他数据。目前，用户身份由 FormsAuthentication 设置（我不知道如何设置，它只是从加密的 cookie 中读取）。FormsAuthentication 如何做到这一点？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T18:50:17.913

```
System.Web.HttpContent.Current.User = new GenericPrincipal(
    new GenericIdentity("username", "CUSTOM"),
    new string[]());
System.Threading.Thread.CurrentPrincipal = System.Web.HttpContent.Current.User; 
```

# ios - ios 使子视图出现在 CALayer 之上

> ID：13000968
> 
> 赞同：0
> 
> 时间：2012-10-21T18:46:22.020
> 
> 标签：ios, calayer, addsubview

```
 [[background layer] addSublayer:myLayer];
    [background addSubview:toolbar]; 
```

我有一个 UIImageView 称为背景。在此之上，我有一个名为工具栏的子视图。此外，我的背景之上还有一个 CALayer。问题是，我需要工具栏位于 myLayer 之上。如何使子视图出现在图层顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:46:35.303

```
 [background bringSubviewToFront:toolbar]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T21:51:00.037

错误的做法是将 zPosition 属性设置为 -1

# xcode - UISegmentedControl 仅在我点击 segmenteddcontrol 几次时才更改其值？

> ID：13000973
> 
> 赞同：0
> 
> 时间：2012-10-21T18:47:38.560
> 
> 标签：xcode

所以我在`Xcode`哪里有这个问题`UISegmentedControl`。
我还在`IBAction`控件上放了一个 (valueChanged)。
问题是当我点击一个索引时，该索引没有被注册，但如果我点击另一个索引，然后返回上一个索引，它将被注册。
（例如`0`和`1`是索引，如果我点击`0`，然后点击 ，`1`然后再点击`0`，`0`将被注册） 我希望你有一个解决方案。

谢谢。

# indexeddb - 如何将 indexedDB 本地数据与服务器同步？

> ID：13000975
> 
> 赞同：19
> 
> 时间：2012-10-21T18:47:45.077
> 
> 标签：indexeddb

我有一个小项目，将数据存储在浏览器的 IndexedDB 中。我想添加同步功能，以便用户可以在任何地方访问数据。

如何在远程服务器或服务器数据库中同步本地 IndexedDB 数据，以便我可以在任何地方访问它？换句话说，我想让[这个演示](http://www.html5rocks.com/en/tutorials/webdatabase/todo/)在我所有的浏览器中都可用。（这个阶段安全不是问题）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T22:57:30.093

事实上，IndexedDB 上用于同步数据库的内容并不多。您只需要[RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer)服务即可从服务器复制到客户端，反之亦然。

为了有效同步，服务应该支持每条记录的 etag（HTTP 规范），更新的集合（ATOM 规范）。此外，为了支持可恢复更新，totalResults、startIndex、itemsPerPage（[OpenSearch](http://www.opensearch.org/Home)规范）和按更新排序是必要的。

当 GET 指定 etag 的记录 'If-None-Match' 标头时，为了获得完整的缓存优势，当 PUT 指定记录 'If-Match' 标头以解决客户端的冲突时。要更新集合，查询受更新参数的限制，因此只返回不在客户端数据库中的记录。

这就是我在我的开源 IndexedDB API 包装器上实现的方式。请参阅angularjs 和[demo](http://dev.yathit.com/demo/feature-matrix/index.html)中的示例应用程序[https://github.com/yathit/feature-matrix](https://github.com/yathit/feature-matrix)。

另请查看[PouchDB](http://pouchdb.com/)。

# php - 之前匹配但不包含在结果中

> ID：13000976
> 
> 赞同：0
> 
> 时间：2012-10-21T18:47:49.307
> 
> 标签：php, regex

我的正则表达式：

```
(?<=(?i)start\s+date\s+)([0-9]{2}[\.]{1}[0-9]{2}[\.]{1}[0-9]{4}) 
```

我正在尝试匹配一个以“开始日期”开头但只希望返回日期的日期。

因此，例如“开始日期 01.01.2000”的匹配应该返回“01.01.2000”，我知道我很接近但我似乎无法让我的表达式的第一部分不包含在结果中。非常感谢任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:54:15.157

```
(?<=start\sdate)\s+([0-9]{2}[\.]{1}[0-9]{2}[\.]{1}[0-9]{4}) 
```

将工作。我认为问题在于 \s+，变长后看。大多数正则表达式引擎不实现可变长度查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T18:54:16.330

试试这个：

```
(?<=start\sdate\s)([0-9]{2}\.[0-9]{2}\.[0-9]{4}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T18:54:34.013

如果您一直在寻找匹配的字符串，`start date ##.##.####`可以这样做：

```
start date ([0-9]{2}\.[0-9]{2}\.[0-9]{4}) 
```

但是在这种情况下，您也可以简单地做

```
substr($string, strrpos($string, "start date ") + 11, 10); 
```

# c# - DWM 消息常量值

> ID：13000981
> 
> 赞同：-1
> 
> 时间：2012-10-21T18:48:12.047
> 
> 标签：c#, int, constants, message, dwm

我在互联网上搜索，但我找不到我感兴趣的东西......

我试图找到的价值

```
private const int DWMCOMPOSITIONCHANGED; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T18:58:03.947

你可能找不到它，因为它的真实名称是 WM_DWMCOMPOSITIONCHANGED。您可以通过搜索计算机上 Windows SDK 的 Include 目录中的文件来找到它。

您会找到 WinUser.h，其值为 0x31e。

# python - 向 pystemmer 添加语言

> ID：13000982
> 
> 赞同：5
> 
> 时间：2012-10-21T18:48:16.297
> 
> 标签：python, stemming, snowball

我想使用[`pystemmer`](http://pypi.python.org/pypi/PyStemmer/1.0.1)with [`whoosh`](http://pypi.python.org/pypi/Whoosh/)，但不支持我的语言。

我为我的语言 ( [Snowball ) 找到了两个雪球文件，并按照](http://snowball.tartarus.org/)[此处](https://stackoverflow.com/questions/8714040/slovenian-stemmer-for-sphinx.)的建议从它们中制作了 *.c 文件。

现在我想在 pystemmer 中包含 *.c 文件。我将它们添加到源代码中，我编辑了所有找到链接/语言文件列表的文件，但是在安装 pystemmer（从源代码）之后，我仍然无法使用我的语言 - 它不在列表中`Stemmer.algorithms()`。

我究竟做错了什么？

# python - 尝试创建一个简单的字典类型应用程序

> ID：13000984
> 
> 赞同：0
> 
> 时间：2012-10-21T18:48:24.030
> 
> 标签：python, oop, object

我正在尝试创建一个简单的程序来收集单词及其翻译，然后以不同的顺序重复它们。老实说，我认为第二部分我可以做到没有问题，但我对编程中对象的使用不是很精通。无论如何，这是我的代码：

```
 def trial2():
    class ind:
        pass

    entry = raw_input('Please enter English, Spanish, POS. ')
    entry = entry.split(', ')
    ind.english = entry[0]
    ind.spanish = entry[1]
    ind.pos = entry[2]
    print ind() 
```

现在，我不确定最好的方法是什么。我不认为每个条目都有一个单独的对象（代表它的英文形式、它的翻译和词性），而是一个（？）的迭代。

我一直在环顾四周并阅读了很多关于 OOP 的内容，但我还是有点迷茫。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T18:52:39.920

字典对象可能比这里的类更容易使用：

```
def trial2():
    entry = raw_input('Please enter English, Spanish, POS. ').split(', ')
    word = {
        'english': entry[0],
        'spanish': entry[1],
        'pos': entry[2]
    }

    print word 
```

我的一般经验法则是，如果您在一个类上定义的方法少于两个，则它不应该是一个类。

# sip - 基于 3G 网络的 VOIP

> ID：13000985
> 
> 赞同：3
> 
> 时间：2012-10-21T18:48:33.130
> 
> 标签：sip, voip, 3g, nat, hole-punching

我创建了一个类似 STUN 的 + 集合服务器。我已经通过 WIFI（在国内 NAT 之后）尝试了整个过程，一切正常。我有两个移动 ISP，一个允许一切（VOIP + P2P + MODEM）（ISP 1），另一个允许除 P2P 之外的一切（ISP 2）。

在尝试 ISP 1 时，它也可以正常工作。但是，当我尝试使用 ISP 2 时，udp 数据包无法通过。

我已将我的计算机与 ISP 2 上的电话连接，并运行 TUM NAT Analyzer。

它在告诉我

```
UPnP Test (?):  No UPnP device found

STUN Test (?):  Symmetric NAT

UDP Binding Test (?):   Endpoint depenent binding, port prediction may be hard
TCP Binding Test:   Endpoint depenent binding, port prediction may be hard

UDP Mapping Test (?):   local and external IP addresses were different 
(NAT). Your source ports were not preserved. It may be hard to predict your external source port.
TCP Mapping Test:   local and external IP addresses were different (NAT).
Your source ports were not preserved. It may be hard to predict your external source port.

SIP ALG (?):    The initial SIP INVITE packet has not been modified on its way to our servers.
There is no SIP ALG involved
FTP ALG:    The initial FTP PORT command has been modified.
Most probably, your NAT implements a FTP-ALG 
```

因此，显然它使用的是具有随机端口影响的对称 NAT（显然无法使用端口预测）。

所以我想知道，一个允许 VOIP 但不允许 P2P（并且没有 SIP ALG）的 ISP，它是否希望 VOIP 使用中继服务器才能工作？

还是我错过了什么……？据我了解，AT&T（可能还有其他人）使用与我的 ISP 2 相同类型的 NAT ......（对称 NAT）所以这成为一个大问题，我猜......

但是，任何人，想法，反应都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T06:52:35.403

*   许多 VoIP 提供商都包括基于 SBC 或其他 RTP 代理的基础设施，它们在任何情况下都将中继媒体流量，无论您拥有的 NAT 类型如何。
*   如果另一个端点不在对称 NAT 后面（例如 PSTN 网关，这是一种非常常见的情况），您可以连接到它们而无需任何额外的中继。
*   否则你需要一个 TURN 继电器

# jsp - DisplayTag 在 forEach 标记内不起作用

> ID：13000988
> 
> 赞同：0
> 
> 时间：2012-10-21T18:48:45.097
> 
> 标签：jsp, jstl, displaytag

我正在尝试在 forEach 循环中呈现 DisplayTag 表。表达式`${paquete.listaProductoPaquete}`是一个单项列表；但是当我尝试这个时，我得到一个空表：

```
<c:forEach var="paquete"
    items="${consultaConsumosWrapper.listadoPaqueteConsumo}">
    <tr>
        <td><display:table
                name="${paquete.listaProductoPaquete}" export="false"
                id="producto" style="width:100%" sort="list"
                defaultsort="1" class="grilla">
                <display:column sortable="false"
                    titleKey="header.consultaDatos.producto">
                    ${producto.producto}
                </display:column>
            </display:table> 
            </td>
    </tr>
</c:forEach> 
```

如果我尝试这个，我会按预期获得列表中单个项目的信息：

```
<c:forEach var="paquete"
    items="${consultaConsumosWrapper.listadoPaqueteConsumo}">
    <tr>
        <td>
            <c:forEach var="producto"
                items="${paquete.listaProductoPaquete}">
                ${producto.producto}
            </c:forEach></td>
    </tr>
</c:forEach> 
```

任何想法为什么这不起作用？当我在循环外尝试标记时，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:10:30.353

请确保您正在使用带有 EL 支持的 displayTag。在您的 DisplayTag jar 文件中，您应该有 displayTag-el.tld 文件。

如果您的 List 有正确的数据，您应该会看到以下代码的表格：我刚刚从 displayTable 标记中删除了 DisplayColumn 和 sort 属性。

```
<c:forEach var="paquete"
    items="${consultaConsumosWrapper.listadoPaqueteConsumo}">
    <tr>
        <td><display:table
                name="${paquete.listaProductoPaquete}" export="false"
                style="width:100%" class="grilla">                    
            </display:table> 
         </td>
    </tr>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T22:17:14.587

尝试更改为 `<display:table name="paquete.listaProductoPaquete" ...`

# java - 科赫雪花Java递归

> ID：13000994
> 
> 赞同：0
> 
> 时间：2012-10-21T18:49:47.997
> 
> 标签：java

我正在尝试在 java 中使用递归和 gpdraw 制作科赫雪花。我可以自己制作实际的科赫曲线，但我不知道如何让它一直环绕并制作雪花。

```
import gpdraw.*;

public class KochCurve
{
  private SketchPad myPaper;
  private DrawingTool myPencil;

  public KochCurve()
  {
    myPaper = new SketchPad(600,600);
    myPencil = new DrawingTool(myPaper);
  }

  public void draw()
  {
    drawKochCurve(6, 300);
  }

  private void drawKochCurve(double level, double sideLength)
  {
    if(level < 1)
       myPencil.forward(sideLength);

    else
    {
      drawKochCurve(level - 1, (sideLength)/3);
      myPencil.turnLeft(60);
      drawKochCurve(level - 1, (sideLength)/3);
      myPencil.turnRight(120);
      drawKochCurve(level - 1, (sideLength)/3);
      myPencil.turnLeft(60);   
      drawKochCurve(level - 1, (sideLength)/3);
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:01:28.447

您必须在三角形的三个方向中的每一个上绘制相同的曲线。为此，您可以编写一个函数 drawKochCurve(double level, double sideLength, double additionalAngle) 并调用它 3 次，添加附加角度。

维基百科有更多细节：科赫最初描述的科赫曲线是由原始三角形的三个边中的一个构成的。换句话说，三个科赫曲线构成一个科赫雪花。[http://en.wikipedia.org/wiki/Koch_snowflake](http://en.wikipedia.org/wiki/Koch_snowflake)

# netbeans - Netbeans 7.2 MacOSX 10.8.2 上模板的位置

> ID：13000997
> 
> 赞同：0
> 
> 时间：2012-10-21T18:50:03.700
> 
> 标签：netbeans, netbeans-7, netbeans-7.2

在 MacOSX 上的 Tools > Templates 下创建的模板文件在哪里？

正如其他帖子所建议的那样，我已经检查了 ~/.netbeans/[version]/config/Templates，但我只能在这里找到旧版本 (7.1.1) 的模板，而不是安装的 7.2。

文件夹 ~/.netbeans/7.2/ 找不到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:17:48.297

使用终端搜索特定文件后找到它：

```
find / -name "temlatefilename*" -print 
```

版本 7.2 将模板文件定位在：

```
~/Library/Application Support/NetBeans/7.2/config/Templates/ 
```

# java - Java - 接口不允许 ArrayList 正常运行

> ID：13000998
> 
> 赞同：-4
> 
> 时间：2012-10-21T18:50:10.937
> 
> 标签：java, interface, arraylist

我正在尝试实现一个名为 board 的接口`Board`，但是每当我尝试向我在其中创建的 ArrayList 添加任何内容时，它都会抛出

`- Syntax error on token(s), misplaced construct(s) - Syntax error on token "Tile1", VariableDeclaratorId expected after this token`

这是完整的代码：

```
import java.util.ArrayList;

public interface BoardTest {
    public ArrayList<Land> lands = new ArrayList<Land>();

    Land Tile1 = new Land(0,1,0,0,0, "Tile 1");
    lands.add(Tile1);
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-21T18:51:25.373

接口不能有实现。

您不能在接口中创建 ArrayList 或调用其任何方法。您所能做的就是为一个方法创建一个方法签名，该方法可能会或可能不会按照您编写的方式执行。

界面的整个想法是将“什么”与“如何”分开。

也许你的意思是：

```
public interface Board {
    void land(Land l);
}

public class BoardImpl implements Board {
   List<Land> squares = new ArrayList<Land>();

   public void land(Land l) {
      this.squares.add(l);
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-21T18:52:34.077

An`Interface`仅包含`method`带有初始化的声明和字段声明。接口中不能有方法调用之类的语句。

您可能应该使用一个实现接口并在其中完成所有这些工作的类。并且只需在您的界面中声明方法。