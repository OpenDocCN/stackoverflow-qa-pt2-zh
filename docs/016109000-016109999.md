# StackOverflow 问答 16109000-16109999

# xml - Magento 1.7.0.2 UPS XML 选项不起作用

> ID：16109002
> 
> 赞同：0
> 
> 时间：2013-04-19T16:11:43.140
> 
> 标签：xml, magento, option, ups

我们需要在 UPS 类型管理员配置中将运输方式从 UPS 切换到 UPS XML，但它无法正常工作。错误消息“此运输方式目前不可用。如果您想使用此运输方式运输，请联系我们。”。

我确保设置正确，例如用户ID密码是UPS登录用户ID和密码，访问许可证ID正确，网关XML URL：[https](https://onlinetools.ups.com/ups.app/xml/Rate) ://onlinetools.ups.com/ups.app/xml/Rate等.

我们正在使用 Magento 社区版本 1.7.0.2

使 UPS XML 选项正常工作有什么困难，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T08:46:40.163

Is your XML inculed in SOAP Header and Envelope? If so, try this url: [https://wwwcie.ups.com/webservices/Rate](https://wwwcie.ups.com/webservices/Rate)

Ups XML should be used without SOAP envelope. It needs 2 seperate xml to be sent at once. First XML is for accept request that includes your access licence number, username and password. The second is for rate request values.

```
<?xml version="1.0" ?>
<AccessRequest xml:lang='en-US'>
<AccessLicenseNumber>YOURACCESSLICENSENUMBER</AccessLicenseNumber>
<UserId>YOURUSERID</UserId>
<Password>YOURPASSWORD</Password>
</AccessRequest>

<?xml version="1.0" ?>
<RatingServiceSelectionRequest>
<Request>
<TransactionReference>
<CustomerContext>Rating and Service</CustomerContext>
<XpciVersion>1.0</XpciVersion>
</TransactionReference>
<RequestAction>Rate</RequestAction>
<RequestOption>Rate</RequestOption>
</Request>
<PickupType>
<Code>01</Code>
<Description>Daily Pickup</Description>
</PickupType>
<Shipment>
<Description>Rate Shopping - Domestic</Description>
<Shipper>
<ShipperNumber>ISGB01</ShipperNumber>
<Address>
<AddressLine1>Southam Rd</AddressLine1>
<AddressLine2 />
<AddressLine3 />
<City>Dunchurch</City>
<StateProvinceCode>Warwickshire</StateProvinceCode>
<PostalCode>CV226PD</PostalCode>
<CountryCode>GB</CountryCode>
</Address>
</Shipper>
<ShipTo>
<CompanyName>Belgium</CompanyName>
<AttentionName>nanananan</AttentionName>
<PhoneNumber>7777778978</PhoneNumber>
<Address>
<AddressLine1>5, rue de la Bataille</AddressLine1>
<AddressLine2 />
<AddressLine3 />
<City>Neufchateau</City>
<PostalCode>6840</PostalCode>
<CountryCode>BE</CountryCode>
</Address>
</ShipTo>
<ShipFrom>
<CompanyName>Imani's Imaginarium</CompanyName>
<AttentionName>AT:United Kingdom</AttentionName>
<PhoneNumber>3057449002</PhoneNumber>
<FaxNumber>3054439293</FaxNumber>
<Address>
<AddressLine1>Southam Rd</AddressLine1>
<AddressLine2 />
<AddressLine3 />
<City>Dunchurch</City>
<StateProvinceCode>Warwickshire</StateProvinceCode>
<PostalCode>CV226PD</PostalCode>
<CountryCode>GB</CountryCode>
</Address>
</ShipFrom>
<Service><Code>65</Code></Service>
<Package>
<PackagingType>
<Code>04</Code>
<Description>UPS 25KG Box</Description>
</PackagingType>
<Description>Rate</Description>
<PackageWeight>
<UnitOfMeasurement>
<Code>KGS</Code>
</UnitOfMeasurement>
<Weight>23</Weight>
</PackageWeight>
</Package>
<ShipmentServiceOptions />
</Shipment>
</RatingServiceSelectionRequest> 
```

For detailed information check Ups document named Rating Package - XML Developers Guide.pdf

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T08:00:09.990

您应该将“模式”选项设置为“开发”。

# python - ImageTK 应用程序不会运行

> ID：16109009
> 
> 赞同：0
> 
> 时间：2013-04-19T16:12:11.057
> 
> 标签：python, tkinter

我觉得这将是一个非常明显的问题，但我已经使用 pyfaces 项目的命令行版本很长时间了，我正在尝试运行 GUI 版本，可以在此处找到 ( [Google Code](http://code.google.com/p/pyfaces/source/browse/#svn%2Ftrunk%2Fsrc%2Fpyfaces) )。我可以看到它需要 ImageTK，并且已经检查了*映像、imaging-dbg、imaging-tk、imaging-tk-dbg*是否已安装，但是当代码运行时，我没有得到任何输出——甚至没有 Windows 初始化。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:38:26.987

因为我怀疑我是愚蠢的。我没有调用包含`__main__`所以程序不会初始化的文件。一旦它运行，就会引发一些与不存在的包相关的错误。以下是所需的软件包（Ubuntu 12.04）供参考：

```
python-imaging
python-imaging-dbg
python-imaging-tk
python-imaging-tk-dbg
python-tix
python-tix-dev 
```

我不完全确定是否需要所有`dbg`和`dev`包，如果你知道请编辑。

# svn - 我想添加一个 post commit 钩子，这样如果用户删除文件，我会收到电子邮件通知

> ID：16109013
> 
> 赞同：-4
> 
> 时间：2013-04-19T16:12:31.057
> 
> 标签：svn, post-commit, svn-hooks

我想添加一个提交后挂钩，以便如果用户删除特定文件，我将通过电子邮件收到通知..

帮助 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:16:18.590

创建[提交后挂钩脚本](http://svnbook.red-bean.com/en/1.6/svn.ref.reposhooks.post-commit.html)以“挂钩”提交。在挂钩脚本中，您可以使用[SVNLOOK](http://svnbook.red-bean.com/en/1.6/svn.ref.svnlook.html)实用程序检查变更集。您还可以评估[SVN Notifier](http://svnnotifier.tigris.org/)

# jpa - @Entity 不同数据库表之间的关系

> ID：16109015
> 
> 赞同：0
> 
> 时间：2013-04-19T16:12:51.017
> 
> 标签：jpa, netbeans, entity, eclipselink, one-to-one

我是 Java Enterprise 和 JPA 的新手（使用 Netbeans 的 EclipseLink JPA 2.0）。我试图实现不同项目和包中不同@Entity 类之间的链接，但没有成功。

数据库 D1 有一个表 T1 和一个同义词 T2 引用数据库 D2 上的表 T2。

所以我创建了 2 个项目（罐子）：

D1-jpa 包含 @Entity package1.T1.class 和 persistence.xml（也映射 T2）

D2-jpa 包含 @Entity package1.T2.class 和 persistence.xml

我需要创建一个从 T1 到 T2 的 @OneToOne 关系，以便 T1 具有

@OneToOne

公共 T2 t2;

问题是当我尝试执行简单的 JPQL 查询时：

从 T1 中选择 t

翻译后的查询类似于

从 T1 t 中选择 t.field1、t.field2、T2_t2；——“T2_t2”？？

当我期望 SELECT t1.field1, t1.field2, t2.field1 FROM T1 t1, T2 t2

WHERE（加入条件）

你对问题的解决方案是什么？如果 D1 上的同义词与 D2 上的真实表具有不同的名称（同义词 TT2 在 D2 上引用 T2 ...）怎么办？

都看。

F。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:02:32.567

纯 JPA 中的 @OneToOne 仅在目标是此持久性单元中的实体时才有效。由于您没有遇到异常，因此它的工作方式好像两者都可以由 D1 持久性单元类加载器找到并处理。该映射将 T1->T2 外键字段默认为“T2_t2”，这可能是因为您的 T2 实体将 t2 字段或属性标记为其 ID。如果要将不同的数据库列用作外键，则需要在关系上指定连接列。

我不清楚你的目的，因为 T1 必须能够导入 T2，所以它们不是完全分开的——这些表也应该在同一个数据库中，以便它们之间存在 1:1。但是您可以完成将多个持久性单元组合在一起并将它们作为一个与 EclipseLink 中描述的复合持久性单元功能一起使用[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Composite_Persistence_Units](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Composite_Persistence_Units)

# validation - 如何使用 iText 为 PAdES 签名时间戳嵌入 CRL/OCSP 撤销信息？

> ID：16109017
> 
> 赞同：1
> 
> 时间：2013-04-19T16:12:52.843
> 
> 标签：validation, timestamp, itext, signature

这个问题与[另一个问题有关](https://stackoverflow.com/questions/16105496/should-i-validate-an-embedded-timestamp-in-a-pades-signature-when-doing-signatur)。

由于我想完全验证添加到 PAdES 签名（到期和撤销）的时间戳，我还需要将 crl 文件或在创建时间戳时抓取的 TSA 证书的 ocsp 响应添加到签名中。

据我了解，iText 5.4.1 似乎没有提供此功能。特别是通过

*   com.itextpdf.text.pdf.security.TSAClientBouncyCastle，和
*   com.itextpdf.text.pdf.security.MakeSignature

我错过了什么吗？

在此先感谢您的帮助，

伯特兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:43:01.923

关于 CRL，您可以将获取 TSA 证书的 CRL 的 CrlClient 添加到传递给 MakeSignature 的 CrlList。

关于 OCSP 的回应：你是对的。似乎我们没有办法做到这一点，除了在创建文档级时间戳时。

# openmpi - 检查 lmgrd 日志文件，或尝试 lmreread - 在 Totalview 中加载 Open MPI 程序时出错

> ID：16109030
> 
> 赞同：1
> 
> 时间：2013-04-19T16:13:39.800
> 
> 标签：openmpi, totalview

当我在 TotalView 中加载程序时，我收到一个警告对话框“检查 lmgrd 日志文件，或尝试 lmreread”，并且程序没有加载。

我首先从“程序”选项卡中选择正确的程序，然后从“并行”选项卡中选择“打开 MPI”并使用四个任务。当我单击“确定”时，会出现警告对话框并且不会加载调试器。

我正在使用 Totalview 8.9.2-2 和 Open MPI 1.4.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T20:01:42.150

这听起来像是一个许可证错误。可能您的许可证服务器配置不正确。

我们很乐意帮助您解决这个问题。通过 tvsupport@roguewave.com 联系我们，或在我们的网站[http://www.roguewave.com/support/contact-support/file-a-support-request.aspx上填写支持请求](http://www.roguewave.com/support/contact-support/file-a-support-request.aspx)

干杯，克里斯·戈特布拉斯

我是 Rogue Wave Software 的 TotalView 的产品经理

# javascript - .ajax() 调用后设置选定值仅在警报后有效

> ID：16109032
> 
> 赞同：0
> 
> 时间：2013-04-19T16:13:47.393
> 
> 标签：javascript, jquery, ajax

我正在尝试设置在填充下拉列表时从 Java 会话中获得的选定值。在这种情况下，我想选择“selectedCtgry”，它也是被调用的响应 json 对象中的键之一。

我知道有一个竞争条件。但我不知道如何克服这个问题。我还使用了 .done() 附加到 .ajax() 函数。这样，成功处理程序和延迟都不起作用。

有什么办法可以解决这个问题吗？

```
$(document).ready(function() {
    // alert("selectedCtgry: "+selectedCtgry);
   var selectedCtgry=document.getElementById("title").value;
   $("#title").one("click", function() {  
    if(selectedCtgry!=null){
                  var d1 = null;
                        $.ajax({
                             url : 'UpdateHelperServlet',
                             data: {title : selectedCtgry}, 
                             type: 'get',                   
                             dataType:'json',
                             async: false,                   
                             success : function(data) {  
                                      var $options = $();
                                      $.each(data,function(key,value) {
              $options = $options.add($('<option/>').attr('value', key).text(value));
                             });
                             $("#title").html($options);
                             alert("typeof key");
                             $("#title").val(selectedCtgry);          

                              });
                        } 
               });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:18:14.540

```
 $.each(data,function(key,value) {

     if(key == selectedValue)
        $('#title').append('<option selected value="'+key+'">'+value'+</option>');
     else
        $('#title').append('<option value="'+key+'">'+value'+</option>');
}); 
```

# ios - 资产库未更新

> ID：16109033
> 
> 赞同：1
> 
> 时间：2013-04-19T16:13:56.317
> 
> 标签：ios, objective-c, alassetslibrary

我正在构建的应用程序中使用照片库功能，因此用户可以从应用程序内拍照，并将它们保存到自定义相册中，并附加特殊元数据以识别哪些图片属于该应用程序。

保存图片后，我尝试重新加载我的表格以显示它找到的内容，但它永远找不到最近添加的图片。只有在我离开视图并再次打开它之后，它才会找到最新的图片。

我使用[此](http://www.touch-code-magazine.com/ios5-saving-photos-in-custom-photo-album-category-for-download/)类别保存到自定义相册。这是我的代码中的一些摘录，显示了保存/加载过程

保存

```
NSMutableDictionary *realMetaData = [[NSMutableDictionary alloc] init];
[realMetaData setObject:metaData forKey:(NSString*)kCGImagePropertyTIFFDictionary];
[library saveImage:imageToSave toAlbum:albumName metadata:realMetaData withCompletionBlock:^(NSError *error) {
    if ( error != nil )
    {
        NSLog(@"Error saving picture? %@", error);
    }
    [self loadAlbum];
}]; 
```

正在加载

```
-(void) loadAlbum
{
    [library groupNamed:albumName withCompletionBlock:^(NSError *error, ALAssetsGroup *foundGroup) {
        if ( error == nil )
        {
            self.album = foundGroup;
            [self loadAssets];
        }
        else
        {
            NSLog(@"Error loading album: %@", error);
        }
    }];

}

-(void) loadAssets
{
//  self.assets = [NSMutableArray arrayWithCapacity:album.numberOfAssets];
    for ( id key in [events allKeys] )
    {
        NSArray *event = [events objectForKey:key];
        if ( event != nil && event.count > 0 )
        {
            [events removeObjectForKey:key];
        }
    }
    [album enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
        if ( result != nil )
        {
            NSDictionary *metaData = result.defaultRepresentation.metadata;
//          NSLog(@"Retrieved image metadata: %@", metaData);
            NSDictionary *tiffData = [metaData objectForKey:(NSString*)kCGImagePropertyTIFFDictionary];
            NSString *encodedData = [tiffData objectForKey:(NSString*)kCGImagePropertyTIFFImageDescription];

            if ( encodedData != nil )
            {
                NSArray *parts = [encodedData componentsSeparatedByString:@"##"];
                if ( parts.count == 3 )
                {
                        NSLog(@"Found picture named %@", [parts objectAtIndex:2]);
                        NSString *eventName = [parts objectAtIndex:1];
                        NSArray *foundEvent = [events objectForKey:eventName];
                        if ( foundEvent != nil )
                        {
                            NSMutableArray *mutableEvent = [foundEvent mutableCopy];
                            [mutableEvent addObject:result];
                            [events setObject:mutableEvent forKey:eventName];
                        }
                        else
                        {
                            NSMutableArray *newEvent = [[NSMutableArray alloc] init];
                            [newEvent addObject:result];
                            [events setObject:newEvent forKey:eventName];
                        }
                    }
            }
        }
        else
        {
            [self.tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];
        }
    }];
} 
```

一切都使用元数据正确解码，只是我刚刚添加到库中的一张图像没有显示出来。

# javascript - 如何剪切这样的css精灵图像来制作动画？

> ID：16109037
> 
> 赞同：1
> 
> 时间：2013-04-19T16:14:06.757
> 
> 标签：javascript, css, css-animations

google 向我们展示了一个使用 css sprite 制作动画的非常好的示例。

[http://www.google.com/green/storyofsend/desktop/#/over-to-google](http://www.google.com/green/storyofsend/desktop/#/over-to-google)是您可以看到它是如何工作的（只关注信封）。

我只是想知道如何制作这样的图像？ [http://www.google.com/green/storyofsend/desktop/assets/images/package.png](http://www.google.com/green/storyofsend/desktop/assets/images/package.png)

有什么工具可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:18:42.213

如果您已经拥有单独的图像，[Compass](http://compass-style.org/help/tutorials/spriting/)将帮助您将它们组合成一个单独的精灵，并为其生成 CSS 类。然后，您可以更新目标元素上的 CSS 类以获得您正在寻找的动画效果。

# python - AttributeError：“模块”对象没有属性

> ID：16109039
> 
> 赞同：14
> 
> 时间：2013-04-19T16:14:18.523
> 
> 标签：python, python-2.7

我在这里查看了有关此主题的其他帖子，但没有找到明确的答案，尽管我确信它很简单。

我的代码具有以下结构...

```
import matplotlib
...
...

class xyz:
    def function_A(self,...)
        ...
        ...
        fig1 = matplotlib.figure()
        ...
        ... 
```

我正在从“xyz”的实例中调用“function_A”，当我这样做时，我收到错误消息：

```
AttributeError: 'module' object has no attribute 'figure' 
```

根据我读过的帖子，我导入 matplotlib 的方式似乎有问题，但我无法解决。我已经尝试在 Function_A 定义中导入它（我认为这是不好的形式，但我想测试它），但我仍然是同样的错误。

我在其他地方使用了我的“function_A”代码没有问题，但它只是模块中的一个函数，而不是类中的方法。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-19T16:32:32.737

我认为你是对的，这是一个进口问题。该模块`matplotlib`没有*功能*：`figure`

```
>>> import matplotlib
>>> matplotlib.figure
Traceback (most recent call last):
  File "<ipython-input-130-82eb15b3daba>", line 1, in <module>
    matplotlib.figure
AttributeError: 'module' object has no attribute 'figure' 
```

图形功能位于更深的位置。有几种方法可以将其拉入，但通常的导入看起来更像：

```
>>> import matplotlib.pyplot as plt
>>> plt.figure
<function figure at 0xb2041ec> 
```

坚持这种习惯可能是一个好主意，因为您可以在 Web 上找到的大多数示例都使用它，例如[matplotlib 库](http://matplotlib.org/gallery.html)中的示例。（当我需要弄清楚如何做某事时，画廊仍然是我去的第一个地方：我找到一个看起来像我想要的图像，然后查看代码。）

# c# - 在 C# 中使隐藏的中继器列可见的怪异

> ID：16109043
> 
> 赞同：0
> 
> 时间：2013-04-19T16:14:27.587
> 
> 标签：c#, repeater

我有一个中继器，其中隐藏了一组列，直到单击按钮以显示它们。这工作正常，直到您再次单击该按钮导致再次隐藏列。

我基本上希望它只工作一次（不过我可能会清除/重置）。我在 foreach 循环中尝试了 if 语句等，但没有成功。

这是代码：

```
<asp:Repeater ID="rptQuote" OnItemCommand="rptQuote_ItemCommand" runat="server">
    <ItemTemplate>
        <p>
            <span><%#Eval("Qty") %> x&nbsp;</span> 
            <span class="bolist120"><%#Eval("product") %> bin</span>
            <asp:Label ID="lblBinPrices" Visible="false">@ <%# string.Format("{0:c}",Eval("Value")) %> = <%# string.Format("{0:c}",Eval("Total")) %></asp:Label> 
        </p>
    </ItemTemplate>
</asp:Repeater>

<asp:Button ID="btnCalculate" runat="server" OnClick="BtnCalc" /> 
```

这是点击代码：

```
protected void BtnCalc(object sender, EventArgs e)
{
    foreach (RepeaterItem item in rptQuote.Items)
    {
        var label = (Label)item.FindControl("lblBinPrices");
        label.Visible = true;
    }

} 
```

我想知道我是否丢失了*label.Visible = true;* 在下一次单击时，但肯定 onclick 操作应该再次将其设置回来。

对我做错了什么有任何想法吗？

干杯，麻木

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:58:20.977

在客户端使用 JQuery 会更容易。不要使用 Visible 属性并在回发期间更改它（高开销），而是使用样式属性隐藏隐藏的内容，然后使用 JQuery 显示它。像这样的东西...

```
<asp:Repeater ID="rptQuote" OnItemCommand="rptQuote_ItemCommand" runat="server">
    <ItemTemplate>
        <p>
            <span><%#Eval("Qty") %> x&nbsp;</span> 
            <span class="bolist120"><%#Eval("product") %> bin</span>
            <asp:Label ID="lblBinPrices" Visible="false">@ <%# string.Format("{0:c}",Eval("Value")) %> = <%# string.Format("{0:c}",Eval("Total")) %></asp:Label> 
        </p>
    </ItemTemplate>
</asp:Repeater>

<input type="button" id="bt_showStuff" value="Click to show stuff" /> 
```

然后，您只需使用隐藏内容的类属性即可找到它，并在按钮上单击事件...

```
$("#bt_showStuff").click(function() { 
    $(".hiddenClass").prop("visible", "visible");
} ); 
```

因此，这意味着，当您单击按钮时，JQuery 将找到所有具有“hiddenClass”类的元素，并将它们的“可见”属性更改为“可见”——您的页面应该将其发送为“可见：隐藏；” - 这只会工作一次。一旦这些东西“可见”，再次将其设置为“可见”就无关紧要了。您还可以隐藏按钮本身作为点击事件的一部分......

```
$("#bt_showStuff").click(function() { 
    $(".hiddenClass").prop("visible", "visible");
    $("#bt_showStuff").fadeOut();
} ); 
```

这将阻止某人再次单击（现在无法使用）按钮。

（在您的代码示例中，我不知道您要隐藏哪些内容。如果您能告诉我，我可以将上面的代码修复为功能齐全）

# jdbctemplate - 无法在 QueryDslJdbcTemplate 上调用 list() 方法

> ID：16109046
> 
> 赞同：3
> 
> 时间：2013-04-19T16:14:37.353
> 
> 标签：jdbctemplate, spring-jdbc, querydsl

我正在使用 Spring jdbc 来获取特定列的不同元素：

```
template.newSqlQuery().from(qCustomer).groupBy(qCustomer.name).list(qCustomer.name); 
```

根据[querydsl 的官方文档，](http://www.querydsl.com/static/querydsl/2.1.0/reference/html/ch02s04.html)一切似乎都是正确的

但我得到了这个：

```
GRAVE: The RuntimeException could not be mapped to a response, re-throwing to the HTTP container
java.lang.NullPointerException
    at com.mysema.query.sql.AbstractSQLQuery.iterateSingle(AbstractSQLQuery.java:434)
    at com.mysema.query.sql.AbstractSQLQuery.iterate(AbstractSQLQuery.java:367)
    at com.mysema.query.sql.AbstractSQLQuery.list(AbstractSQLQuery.java:488)
    at com.dao.springdata.SpringDataLogRecordDAO.selectRecord(SpringDataLogRecordDAO.java:167)
    at com.domain.logic.LogRecordServiceImpl.selectRecord(LogRecordServiceImpl.java:41)
    at com.restservice.IOSLogsReporter.datatables(IOSLogsReporter.java:94)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:167)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:70)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:279)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:86)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:136)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:74)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1347)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1279)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1229)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1219)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:419)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:886)
    at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:834)
    at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:795)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680)
19 avr. 2013 20:56:13 org.apache.catalina.core.StandardWrapperValve invoke
GRAVE: "Servlet.service()" pour la servlet default a g?n?r? une exception
java.lang.NullPointerException
    at com.mysema.query.sql.AbstractSQLQuery.iterateSingle(AbstractSQLQuery.java:434)
    at com.mysema.query.sql.AbstractSQLQuery.iterate(AbstractSQLQuery.java:367)
    at com.mysema.query.sql.AbstractSQLQuery.list(AbstractSQLQuery.java:488)
    at com.dao.springdata.SpringDataLogRecordDAO.selectRecord(SpringDataLogRecordDAO.java:167)
    at com.domain.logic.LogRecordServiceImpl.selectRecord(LogRecordServiceImpl.java:41)
    at com.restservice.IOSLogsReporter.datatables(IOSLogsReporter.java:94)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$TypeOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:167)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:70)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:279)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:86)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:136)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:74)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1347)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1279)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1229)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1219)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:419)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:886)
    at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:834)
    at com.sun.jersey.spi.container.servlet.ServletContainer.doFilter(ServletContainer.java:795)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:931)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:680) 
```

我错过了什么 ？有一个更好的方法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:45:33.910

这种替代方法效果很好：

```
template.query(template.newSqlQuery().from(qCustomer).groupBy(qCustomer.name), qCustomer.name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:26:29.290

看起来查询的 JDBC 连接为空[https://github.com/mysema/querydsl/blob/QUERYDSL_2_2_2/querydsl-sql/src/main/java/com/mysema/query/sql/AbstractSQLQuery.java#L434](https://github.com/mysema/querydsl/blob/QUERYDSL_2_2_2/querydsl-sql/src/main/java/com/mysema/query/sql/AbstractSQLQuery.java#L434)

# php - sql语句查询count数据

> ID：16109047
> 
> 赞同：0
> 
> 时间：2013-04-19T16:14:39.740
> 
> 标签：php, mysql, sql

我开始学习如何编写 sql 语言，但遇到了以下问题：现在我在名为“data”的表中有一个数据

```
+------+-------+-------+-------+-------+
| id   | name  | type1 | type2 | type3 |
+------+-------+-------+-------+-------+
|    1 | Cake  | a     | b     | f     |
|    2 | Coca  | a     | d     | c     |
|    3 | Ice   | c     | b     | a     |
|    4 | Wine  | c     | e     | d     |
|    5 | Salad | c     | f     | a     |
|    6 | Water | d     | e     | f     |
+------+-------+-------+-------+-------+ 
```

我想编写一个 sql 语句来计算 type1、type2、type3 中存在的所有类型，所以我想要得到的结果是

```
+------+------+
| type | count|
+------+------+
|    a | 4    |
|    b | 2    |
|    c | 4    |
|    d | 3    |
|    e | 2    |
|    f | 3    |
+------+------+ 
```

假设我们不确切知道有多少不同的类型和列数，那么您能指导我如何处理这个问题吗？哦，我应该用级别编程语言而不是 sql 来解决它吗？我在 Symfony2 上使用 php。

提前致谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T16:17:30.143

```
SELECT  type, COUNT(*) count
FROM    
    (
        SELECT  type1 type FROM data
        UNION ALL
        SELECT  type2 type FROM data
        UNION ALL
        SELECT  type3 type FROM Data
    ) AS subquery
GROUP   BY type 
```

*   [SQLFiddle Demo](http://www.sqlfiddle.com/#!2/bbf1f1/1)

OUTPUT

```
╔══════╦═══════╗
║ TYPE ║ COUNT ║
╠══════╬═══════╣
║ a    ║     4 ║
║ b    ║     2 ║
║ c    ║     4 ║
║ d    ║     3 ║
║ e    ║     2 ║
║ f    ║     3 ║
╚══════╩═══════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:30:23.900

一种只需要扫描数据表的方法：

```
select type, count(*) from
(select case t.typeno
            when 1 then d.type1
            when 2 then d.type2
            when 3 then d.type3
        end type
 from (select 1 typeno union all select 2 typeno union all select 3 typeno) t
 cross join data d
) sq
group by type 
```

# c++ - C++ Dekker 的算法不能正常工作

> ID：16109048
> 
> 赞同：0
> 
> 时间：2013-04-19T16:14:41.747
> 
> 标签：c++, multiprocessing

这真的让我很烦，我真的看不出这段代码有任何错误.. 它应该用一个进程执行五次`cout<<"Process: "<<i+1<<", K.O. num: "<<k<<" ("<<m<<"/5)"<<endl;`，而不是轮到另一个进程，并不断在这两个进程之间切换。这段代码大部分是随机的，一个进程永远不会完成它的业务。

而且，当我使用 SIGINT 时，共享内存段不会被删除。

```
#include <signal.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <stdlib.h>
#include <unistd.h>
#include <iostream>
using namespace std;

int Id; /* Segment Id */
int *TURN;
int *FLAG_I;
int *FLAG_J;

void get_out_of_critical(int i)
{
   if(i==0){
      *TURN=1;i=1;
      *FLAG_I=0;
   }
   else{
      *TURN=0;i=0;
      *FLAG_J=0;
   }

}

void get_in_critical(int i)
{
   if(i==0){
      *FLAG_I=1;
      while(*FLAG_J!=0){
           if(*TURN==1){
            *FLAG_I = 0;
            while(*TURN==1){}
         *FLAG_I=1;
         }
      }
   }
   else{
   *FLAG_J=1;
   while (*FLAG_I!=0){
         if(*TURN==0){
            *FLAG_J = 0;
            while(*TURN==0){}
         *FLAG_J=1;
         }
      }
   }

}

void process(int i)
{
   for(int k=1;k<=5;k++){
       get_in_critical(i);
       for(int m=1;m<=5;m++){
           cout<<"Process: "<<i+1<<", K.O. num: "<<k<<" ("<<m<<"/5)"<<endl;
                   //sleep(1);
      }
      get_out_of_critical(i);
   }
}

void del(int sig)
{
   /* free shared memory */
   (void) shmdt((char *) TURN);
   (void) shmdt((char *) FLAG_I);
   (void) shmdt((char *) FLAG_J);
   (void) shmctl(Id, IPC_RMID, NULL);
   exit(0);
}

int main()
{
   cout<<endl;
   /* allocating shared memory */
   Id = shmget(IPC_PRIVATE, sizeof(int)*100, 0600);

   if (Id == -1)
      exit(1);

   TURN = (int *) shmat(Id, NULL, 0);
   *TURN = 0;
   FLAG_I = (int*) shmat(Id, NULL, 0);
   FLAG_J = (int*) shmat(Id, NULL, 0);
   *FLAG_I = 0;
   *FLAG_J = 0;
   sigset(SIGINT, del);// in case of signal interrupt, delete shared memory

   /* starting paralel processes */
   if (fork() == 0) {
      process(0);
      exit(0);
   }
   if (fork() == 0) {
      process(1);
      exit(0);
   }
   wait();
   wait();
   del(0);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:15:42.303

[关于Dekker 算法](http://en.wikipedia.org/wiki/Dekker%27s_algorithm)的 Wikipedia 文章解释了您的代码有什么问题：

> [..] 但是请注意，C/C++“volatile”属性仅保证编译器生成具有正确顺序的代码；它不包括必要的内存屏障来保证该代码的按顺序执行。C++11 原子变量可用于保证适当的排序要求 [..]

所以你必须使用原子变量和原子操作`TURN`，`FLAG_I`并且`FLAG_J`为了让它工作。也可以看看：

*   [atomic_store](http://en.cppreference.com/w/cpp/atomic/atomic_store)
*   [atomic_load](http://en.cppreference.com/w/cpp/atomic/atomic_load)

# pyrocms - 我正在尝试将数据从我的控制器传递到插件。但我需要先将它传递给一个视图，然后调用插件中的函数

> ID：16109050
> 
> 赞同：0
> 
> 时间：2013-04-19T16:14:54.070
> 
> 标签：pyrocms

这是我的控制器

```
public function ajax_filter() {
    $filters = array(
                      'start_date'=>    $this->input->post('start_date'),
                      'end_date'  =>    $this->input->post('end_date'),
                      'project'   =>    $this->input->post('project'),
                      'repo'      =>    $this->input->post('repo'),
                      'coder'     =>    $this->input->post('coder'),
                      'user_id'   =>    $this->current_user->id
                );

    // $start_date = $this->input->post('start_date');

    $view = $this->load->view('overview', $filters, TRUE);

    $ret = array(  'view'  =>  $view);

    die(json_encode($ret));
} 
```

`$view = $this->load->view('overview', $filters, TRUE);`
我认为问题可能出在这条线上，还有其他方法可以将数据传递给视图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T20:09:22.850

您不能将其传递给插件。只是在说。

此外，如果您直接传递 $filters 数组，则 $start_date 将在视图中可用，但无法访问 $filters 本身。

```
$view = $this->load->view('overview', compact('filters'), TRUE); 
```

这将使 $filters 在该视图中工作。

# c# - 超时后的 Console.Clear()

> ID：16109055
> 
> 赞同：1
> 
> 时间：2013-04-19T16:15:09.257
> 
> 标签：c#, ascii, countdown, timespan

我正在 C# 控制台中开发一个用于作业的游戏。我在 ASCII 艺术中对游戏的开始做了一种介绍。我想要的是显示这段代码5秒钟，然后进入游戏。

我搜索了信息并尝试了`Console.Clear()`但不接受`TimeSpan`参数。

我不是要你做我的工作，而是寻求指导来做这件事。

我留下 ASCII 艺术的代码，壁纸取自 CM Punk “Best in the World”。

```
class Programa
{
    static void Main()
    {
        // BEST IN THE WORLD!!!!
        Console.ForegroundColor = ConsoleColor.Red;
        Console.WriteLine("       Z");
        Console.WriteLine("         Z=");
        Console.ResetColor();
        Console.Write("++++++++++");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write("MZZ.");
        Console.ResetColor();
        Console.WriteLine("++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++");
        Console.Write("++++++++++++");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write("$ZZ:.");
        Console.ResetColor();
        Console.WriteLine("+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++");
        Console.Write("++++++++++++");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write(".ZZZZ:.");
        Console.ResetColor();
        Console.WriteLine("+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++");
        Console.Write("++++++++++++++");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write(".ZZZZZ:.");
        Console.ResetColor();
        Console.WriteLine("++++++++++++++++++++++++++++++++++++++++++++++++++++++++");
        Console.Write("++++++++++++++++");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write(".ZZZZZZZ:.");
        Console.ResetColor();
        Console.WriteLine("++++++++++++++++++++++++++++++++++++++++++++++++++++");
        Console.Write("++++++++++++++++++");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write(".ZZZZZZZZZ:.");
        Console.ResetColor();
        Console.WriteLine("++++++++++++++++++++++++++++++++++++++++++++++++");
        Console.Write("++++++++++++++");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write(".zZZZZZZZZZZZ:.");
        Console.ResetColor();
        Console.WriteLine("+++++++++++++++++++++++++++++++++++++++++++++++++");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.WriteLine("                zZZZZZZZZ:.");
        Console.WriteLine("                    zZZZZZ$ZZ:..:7ZZZZZ7$.                                     ");
        Console.WriteLine("                        zZZZZZ. .7\.  .$$ZZz                                    ");
        Console.WriteLine("                           zZZZ+:  :Z     ZZ$                                  ");
        Console.WriteLine("     *            *          zZZZZz   Z  Z$Z$             *             *      ");
        Console.WriteLine("*    *    *  *    *    *    zZZZZZZZ   Z$   ZZ       *    *    *   *    *    * ");
        Console.WriteLine("  *******      *******      ZZZ:ZZ.:Z:  Z  Zz          *******       *******   ");
        Console.WriteLine("   *****        ****        ZZ+ZZZZ.  Z7Z$ZZZ:          *****         *****    ");
        Console.WriteLine("  *******      *******      $ZZZI     $Z$$$ZZZZ,       *******       *******   ");
        Console.WriteLine("*    *    *  *    *    *     ZZZZZZ   Z$   ZZ  ZZZZ:.*    *    *   *    *    * ");
        Console.WriteLine("     *            *            zIO,,     :7Z$   7ZZZZ=,   *             *      ");
        Console.WriteLine("                                   $       ZZO    7ZZZZ$+7                     ");
        Console.WriteLine("                                  OZO$.....Z~...7ZZZZI:ZZZZZ+$                 ");
        Console.WriteLine("                                    ZZO:...$ZI.,    7ZZZZ,Z                  ");
        Console.WriteLine("                                   .Z$.OI:?ZOZ,      $77ZZ                     ");
        Console.ResetColor();
        Console.Write("++++++++++++++++++++++++++++++++++++++++++++++++++++");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write(".ZZZZZZZ:.");
        Console.ResetColor();
        Console.WriteLine("++++++++++++++++");
        Console.Write("+++++++++++++++++++++++++++++++++++++++++++++++++++++++");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write(".C7ZZI.");
        Console.ResetColor();
        Console.WriteLine("++++++++++++++++");
        Console.Write("+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write("7ZZ:.");
        Console.ResetColor();
        Console.WriteLine("++++++++++++++");
        Console.Write("+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Write(".Z.");
        Console.ResetColor();
        Console.WriteLine("++++++++++++++");
        Console.ForegroundColor = ConsoleColor.Red;
        Console.WriteLine("                              BEST IN THE WORLD");

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:18:35.200

一些选项是[`Thread.Sleep(5000)`](http://msdn.microsoft.com/en-us/library/d00bd51t.aspx)或[`Task.Delay(5000)`](http://msdn.microsoft.com/en-us/library/hh194873.aspx)。在控制台应用程序中，您使用两者中的哪一个通常并不重要。在大多数其他情况下，如果您使用的是 .NET 4.5 或更高版本，我会推荐后者，因为新的 .Net 异步功能要好得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:18:50.500

你可以让当前线程休眠 5 秒：

```
System.Threading.Thread.Sleep(5000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T16:18:51.437

```
System.Threading.Thread.Sleep(5000); 
```

将暂停您的应用程序 5 秒钟。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T16:18:52.013

只是`Thread.Sleep`用来暂停当前线程的执行一段时间。

# visual-studio-2010 - system.timers.timer 不会在服务器上触发 elapsed 事件

> ID：16109056
> 
> 赞同：0
> 
> 时间：2013-04-19T16:15:09.503
> 
> 标签：visual-studio-2010, web-services, timer

我有一个 Web 服务，我在其中使用了计时器。当我在我的 vs2010 中运行服务应用程序时，它就像一个魅力。但是当我将它部署到远程服务器时，它不会触发 ElapsedEventHandler。我使用 Logger 记录事件并设置写入日志文件的权限。让我再解释一下。我正在尝试编写一个等待工作的服务，而该工作正在向一个大列表发送电子邮件。并且电子邮件应以 20 秒的间隔发送。这是我的代码的一部分：

```
 public class EmailSender : IEmailSender
{

    Queue<AdvEmail> ListOfEmails = new Queue<AdvEmail>();
    List<EmailJob> EmailJobs = new List<EmailJob>();

    Timer timerFetchJobs = null;
    Timer timerSendEmails = null;

    public EmailSender()
    {
        try
        {
            Logger.Log("init service");
            timerFetchJobs = new Timer();
            timerFetchJobs.Interval = 5 * 1000;
            timerFetchJobs.Elapsed += new ElapsedEventHandler(timerFetchJobs_Elapsed);
            timerFetchJobs.Enabled = true;
            timerSendEmails = new Timer();
            timerSendEmails.Interval = 20 * 1000;
            timerSendEmails.Elapsed += new ElapsedEventHandler(timerSendEmails_Elapsed);
            timerSendEmails.Enabled = true;
            timerFetchJobs.Start();
            timerSendEmails.Start();
            Logger.Log("init service Ended Succefully");
            Logger.Log("timerFetchJobs.Enabled=" + timerFetchJobs.Enabled.ToString());
            Logger.Log("timerSendEmails.Enabled=" + timerSendEmails.Enabled.ToString());
        }
        catch (Exception ex)
        {
            Logger.Log("Error in InitService. Message: " + ex.Message);
        }
    }

    void timerSendEmails_Elapsed(object sender, ElapsedEventArgs e)
    {
        timerSendEmails.Stop();
        Logger.Log("Checking for Emails in the Queue");
        // some statments here

        timerSendEmails.Start();
    }

    void timerFetchJobs_Elapsed(object sender, ElapsedEventArgs e)
    {
        timerFetchJobs.Stop();
        try
        {
            FetchJobsFromDB();
        }
        catch (Exception ex)
        {
            Logger.Log("Error in timerFetchJobs. Message: " + ex.Message);
        }
        timerFetchJobs.Start();
    } 
```

当我从浏览器转到服务地址时，它会正确初始化并记录初始化级别，但没有触发计时器的线索！我不知道为什么？我做错了什么？谢谢

编辑： **这是我在本地运行时的日志文件：**

日志条目 : 1392/01/30 08:47:09 : :init service-------------------------------

日志条目 : 1392/01/30 08:47:09 : :init 服务已成功结束-----------------------------

日志条目：1392/01/30 08:47:09::timerFetchJobs.Enabled=True------------------------------ -

日志条目：1392/01/30 08:47:09::timerSendEmails.Enabled=True------------------------------ -

日志条目 : 1392/01/30 08:47:14 : :检查数据库中的作业----------------------------- --

日志条目 : 1392/01/30 08:47:16 : :有一个新工作。作业名称是 Pad 71--------------------------------

日志条目 : 1392/01/30 08:47:19 : : 为工作垫 71 添加电子邮件---------------------------- ---

**这是我将其部署到远程服务器时的日志文件**

日志条目 : 1392/01/30 08:47:09 : :init service-------------------------------

日志条目 : 1392/01/30 08:47:09 : :init 服务已成功结束-----------------------------

日志条目：1392/01/30 08:47:09::timerFetchJobs.Enabled=True------------------------------ -

日志条目：1392/01/30 08:47:09::timerSendEmails.Enabled=True------------------------------ -

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:02:27.897

我更改了 Logger 类并解决了问题。我不知道为什么它在服务器上不起作用。

# javascript - 移除框时如何利用 JQuery 创建滑动效果？

> ID：16109057
> 
> 赞同：1
> 
> 时间：2013-04-19T16:15:10.810
> 
> 标签：javascript, jquery, jquery-ui, slide

在这里查看我的小提琴：http: [//jsfiddle.net/nnHQp/1/](http://jsfiddle.net/nnHQp/1/)

HTML：

```
 <div class="box box1"><a href=#delete">Delete</a></div>
 <div class="box box2"><a href=#delete">Delete</a></div>
 <div class="box box3"><a href=#delete">Delete</a></div>
 <div class="box box4"><a href=#delete">Delete</a></div> 
```

CSS：

```
.box {
width: 150px;
height: 300px;
    margin-right: 5px;
}
.box1 {
background-color: tomato;
    float: left;
    display: inline-block;
}
.box2 {
background-color: red;
    float: left;
    display: inline-block;
}
.box3 {
background-color: green;
    float: left;
    display: inline-block;
}
.box4 {
background-color: black;
    float: left;
    display: inline-block;
 } 
```

当其中一个框被删除时，剩下的应该滑动，下一个应该取代它。如何使用 JQuery 实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:22:59.697

尝试这个：

```
$("a").click(function(){
    $(this).parent().hide("slow",function() {$(this).remove();});
}); 
```

您的 html 格式错误：

```
<div class="box box1"><a href="#delete">Delete</a></div>
<div class="box box2"><a href="#delete">Delete</a></div>
<div class="box box3"><a href="#delete">Delete</a></div>
<div class="box box4"><a href="#delete">Delete</a></div> 
```

**jsFiddle**：http: [//jsfiddle.net/hescano/nnHQp/8/](http://jsfiddle.net/hescano/nnHQp/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:28:42.643

实际的“幻灯片”效果 - 其他答案中未提供 - 将为宽度设置动画，如下所示：http: [//jsfiddle.net/BramVanroy/nnHQp/15](http://jsfiddle.net/BramVanroy/nnHQp/15)

```
$("a").click(function(){
    var $this = $(this);

    $this.parent().animate({
        "width": 0
    }, 700, function() {
        $this.remove();
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T16:50:51.643

Here's my attempt. I like it because it's actually mirroring a slide (not altering the width). YMMV:

```
$('.box a[href=#delete]').click(function(event) {
    event.preventDefault();
    var boxes = $('.box');
    var box = $(this).parent('.box');
    box.css('visibility','hidden').next().animate({
        marginLeft: '-='+box.width()
    },400);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T16:30:09.853

使用：`[.slideUp()](http://api.jquery.com/slideUp/)`和`[.remove()](http://api.jquery.com/remove/)`回调。

`**[LIVE DEMO](http://jsfiddle.net/nnHQp/20/)**`

您`"`的 HTML 中缺少一个，因此应该如下所示：

```
<div class="box box1"><a href="#delete">Delete</a></div> 
```

jQuery：

```
$('[href=#delete]').click(function(){
    var myParent = $(this).closest('.box');
    myParent.slideUp(800, function(){
        myParent.remove();
    });
}); 
```

**另一种使用方式`.animate()`：** `**[LIVE DEMO 2](http://jsfiddle.net/nnHQp/22/)**`

```
$('[href=#delete]').click(function(){
    var myParent = $(this).closest('.box');
    myParent.animate({width:'toggle'}, 800, function(){
        myParent.remove();
    });
}); 
```

确保将您的 jQuery 代码包装到一个`document ready`函数中：

```
$(function(){ // DOM is now ready to be manipulated

    // code here

}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T16:26:10.977

**看到这个**

[http://jsfiddle.net/nnHQp/11/](http://jsfiddle.net/nnHQp/11/)

```
 $('a').click(function(){
       $(this).parent().hide('slow');
   }); 
```

# html - Menu bar breaks to the next line / fluctuates in size depending on zoom level

> ID：16109065
> 
> 赞同：0
> 
> 时间：2013-04-19T16:15:50.130
> 
> 标签：html, css, line-breaks

This is my menu bar at 100% on my browser: ![](https://i.imgur.com/KdGWB2Q.png)

And this is what happens at certain zoom levels and some other browsers: ![](https://i.imgur.com/tqgPM57.png)

Here's a simplified version on fiddle: [http://jsfiddle.net/heetertc/ARGm8/6/](http://jsfiddle.net/heetertc/ARGm8/6/)

```
<div id="bar">
    <div id="center-menu">
        <ul id="nav">
            <li><a href="/about/">ABOUT</a></li>
            <li><a href="/bacharach-institute/">THE INSTITUTE</a></li>
            <li><a href="/renaissance-pavilion/">RENAISSANCE PAVILION</a></li>
            <li><a href="/day-rehab/">DAY REHAB</a></li>
            <li><a href="/outpatient-services/">OUTPATIENT SERVICES</a></li>
            <li><a href="/therapy-centers/">THERAPY CENTERS</a></li>
            <li><a href="/blog/">NEWS</a></li>
            <li><a href="/contact/">CONTACT</a></li>
        </ul>
        <div class="clear"></div>
    </div>
</div>
<style type="text/css">

ol, ul {
    list-style: none outside none;
}
#bar {
    height: 50px;
    left: 0;
    margin-top: 8px;
    position: absolute;
    width: 100%;
}
#bar ul {
    text-align: center;
}
#center-menu{
    height: 50px;
    margin: 0 auto;
    width: 954px;
}
#nav {
    list-style: none outside none;
    margin-bottom: 0;
    margin-top: 0;
    padding-top: 0;
    width: 100%;
}
#nav li {
    border-left: 1px solid #0c4b89;
    display:block; 
    float:left; 
    height: 50px;
    line-height: 50px;
    padding-top: 0;
    position:relative;  
    z-index:500;
}
#nav li a {
    color: #FFFFFF;
    display: block;
    font-size: 12px;
    font-weight: bold;
    height: 50px;
    padding-left: 18px;
    padding-right: 18px;
    text-align: left;
    text-decoration: none;
    text-shadow: 0 1px 1px #000000;
}
#nav > li:last-child {
    border-right: 1px solid #0C4B89;
}

</style> 
```

I'm sure this is something really easy, but I've been at it for a few days and tried many different things, including many attempts of resizing.

So why does the last element skip down to the next level, but only at different zooms? When I resize it to fit one zoom level, it looks completely different in another. Is there a way to get this to always fill the 954px #bar element no matter the zoom?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:18:42.477

添加

```
White-space: nowrap 
```

到#nav

# ruby - NoMethodError in PostsController#create

> ID：16109070
> 
> 赞同：6
> 
> 时间：2013-04-19T16:16:09.127
> 
> 标签：ruby, nomethoderror

Forgive my ignorance but I am brand new not only to Ruby but programming in general. I am working through the example on edge guides at rubyonrails.org. and am receiving the following error and despite reviewing every piece of code I've typed since the app last worked I am unable to fix it.

> NoMethodError in PostsController#create
> 
> undefined method `permit' for {"title"=>"", "text"=>""}:ActiveSupport::HashWithIndifferentAccess

And this is what my posts_controller.rb looks like:

```
class PostsController < ApplicationController
  def new
    @post = Post.new
  end

  def create
    @post = Post.new(params[:post].permit(:title, :text))

    if @post.save
      redirect_to action: :show, id: @post.id
    else
      render 'new'
    end    
  end

  def show
    @post = Post.find{params[:id]}
  end  

  def index
    @posts = Post.all
  end        
end 
```

What am I doing wrong?

Thank you in advance for any help!

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T16:26:08.323

而不是这一行：

```
@post = Post.new(params[:post].permit(:title, :text)) 
```

尝试这个

```
 @post = Post.new(params[:post]) 
```

看起来您遇到了[strong_parameters](https://github.com/rails/strong_parameters)并且有一些教程混淆。

如果您确实想使用`strong_parameters`，请将 gem 添加到您的 Gemfile 并使用以下内容创建一个初始化程序：

```
ActiveRecord::Base.send(:include, ActiveModel::ForbiddenAttributesProtection) 
```

那么你的控制器可以是：

```
class PostsController < ApplicationController
  def new
    @post = Post.new
  end

  def create
    @post = Post.new(post_params)

    if @post.save
      redirect_to action: :show, id: @post.id
    else
      render 'new'
    end    
  end

  def show
    @post = Post.find_by_id(params[:id].to_i)
  end  

  def index
    @posts = Post.all
  end    

  private

  def post_params
    params.require(:post).permit(:title, :text)
  end    
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T16:27:40.497

您使用的是哪个版本的 Rails？`#permit`是 Rails 4.0 中添加的一项新功能，用于防止批量分配。因此，如果您使用的是 3.2，则需要添加`strong_parameters`gem 以支持此功能。或者，您可以删除`.permit(:title, :text)`并将`PostsController#create`以下内容添加到您的`Post`模型中：

```
attr_accessible :title, :text 
```

这样做是为了防止攻击者篡改提交的表单数据并更新一些未经授权的字段（例如“is_admin”或类似的东西。

更多细节[在这里](http://weblog.rubyonrails.org/2012/3/21/strong-parameters/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T16:28:42.203

您遵循的指南适用于 rails4，您必须安装另一个版本的 rails。

对于rails 3.2，请遵循此

[http://guides.rubyonrails.org/v3.2.13/](http://guides.rubyonrails.org/v3.2.13/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-11T22:12:11.740

在文件 `posts_controller.rb`中，您需要添加这两种方法：

```
class PostsController < ApplicationController
  def new
  end
  def create
    @post = Post.new(params[:post])
    @post.save
    redirect_to @post
  end
end 
```

`app/models/post.rb`然后将这一行添加到文件中 ：

> attr_accessible :title, :text

我希望这可以帮助您解决问题:)，对我来说它有效;)

# c# - How to preserve formatting when inserting rows in Excel

> ID：16109071
> 
> 赞同：0
> 
> 时间：2013-04-19T16:16:10.483
> 
> 标签：c#, excel, oledb, excel-2010

I have a small program to insert rows in an existing excel file. On certain columns it is formatted a certain way such as centering bold face and Number columns. When I pull data into the excel file from an external source within excel the formatting is preserved. But when I use C# to push data into the excel file the formatting is stripped. Here is the code I am using

```
using (OleDbConnection conn = new OleDbConnection(string.Format(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=""Excel 12.0 Xml;HDR=YES"";Jet OLEDB:Engine Type=37", exportPath)))
{
     conn.Open();
     OleDbCommand comm = new OleDbCommand(q, conn);
     comm.Parameters.AddWithValue("@MyNumber", record.MyNumber);
     comm.Parameters.AddWithValue("@Revision", record.RevisionChange);
     comm.ExecuteNonQuery();
} 
```

Any ideas

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:20:11.137

使用 execl 文件时，请避免使用互操作 dll。最好的方法是使用 NPOI dll，以防您需要比简单 sql 更多的功能。

您可以轻松应用字体或任何其他格式。我相信它也会保留任何现有的格式

[从codeplex](http://npoi.codeplex.com/)免费下载，包含大量示例

# node.js - Issue with routing and user authentication in angularjs

> ID：16109072
> 
> 赞同：2
> 
> 时间：2013-04-19T16:16:12.717
> 
> 标签：node.js, angularjs

i am creating an application with angularjs and nodejs.

how to authenticate and authorize user in angularjs. say for example before sending a template to the user i have to check whether the user has access to it or not.

And also is it possible to send some request to server instead of angular?

for eg if the user hits www.example.com/sample#/template1, then he will be shown with template1 with the help of angular routing,

```
 $routeProvider.
  when('/', {templateUrl: '/template1',   controller: ctrl1}).
  otherwise({redirectTo: '/invalid'}); 
```

instead of this that particular req has to be handled by node server.

```
app.get(/sample/template1)
// do the following 
```

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T19:55:10.103

您的问题不太清楚，但这里有一些您可能想要调查的方向。

当前设置中的“/”路由将为您的基本 Angular 应用程序提供来自 /template1 的模板。这是您需要从节点角度支持以提供该 html 文件的 url。在您的示例路由中，用户不会被定向到 /template1，而是 /invalid，因为您使用的 URL (www.example.com/sample#/template1) 是 Angular URL。如果您希望用户从 Angular 的角度访问 /template1，他们只需访问 www.example.com/sample/。

在 node.js 方面，如果您使用 express.js，则需要使用某种类型的中间件进行身份验证，否则您将在返回 html 文件之前自行滚动。只是不要将部分 html 文件放在静态文件夹中（如果是 express.js），因为中间件检查将被绕过。

# python - Python 似乎不记得已安装的包

> ID：16109073
> 
> 赞同：-1
> 
> 时间：2013-04-19T16:16:15.920
> 
> 标签：python, python-3.x, cmd, pip, distutils

好吧，我已经开始搞乱 Python 打包了，但是我遇到了一些问题。我曾经`python setup.py install`安装我的包，然后分发，然后 pip。这些包工作了一段时间，但 Python 最终无法找到它们。有趣的是，这发生在我最初给出操作的同一个 Windows 7 命令提示符窗口中。我打开了交互式提示符并尝试导入分发和我的包。它找不到分发，但找到了我的包，虽然我不知道它在哪里。到底是怎么回事？

更新：我在我的 Python 安装中找到了它们所属的包文件。现在我如何让它们运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T01:43:35.567

我最终解决了这个问题。我必须使用`python -m <package name>`. 有一次它可以工作，因为我在提取的源代码中。哎呀。

# php - Yii SQLSTATE[HY093]: Invalid parameter number: 参数未定义

> ID：16109076
> 
> 赞同：1
> 
> 时间：2013-04-19T16:16:28.233
> 
> 标签：php, pdo, yii

我已经查看了有关此错误消息的其他问题，但似乎都与参数与其绑定之间的不匹配或缺少绑定或类似的事情有关。这是我的代码。这里的任何人都可以看到错误吗？这是在 CDbMigration 类中。

```
$this->insert('company', array(
    'name' => 'Site Administrator',
    ));
$companyId = $this->dbConnection->getLastInsertID();

$sql  = 'insert into `user` (`company-id`, `login-id`, `password`) ';
$sql .= 'values (:company-id, :login-id, :password)';
$command = $this->dbConnection->createCommand($sql);
$command->bindValue(':company-id', $companyId, PDO::PARAM_INT);
$command->bindValue(':login-id', 'admin');
$command->bindValue(':password', 'admin');
$command->execute(); 
```

第一个插入正确执行，第二个给出以下错误：

```
Exception: CDbCommand failed to execute the SQL statement: SQLSTATE[HY093]: Invalid parameter number: parameter was not defined. The SQL statement executed was: insert into `user` (`company-id`, `login-id`, `password`) values (:company-id, :login-id, :password). Bound with :company-id='6', :login-id='admin', :password='admin' (C:\eclipse-php-3.0.2\workspace\interview\lib\yii\db\CDbCommand.php:357) 
```

作为记录，我意识到我需要对密码做一些事情，这样它就不会以纯文本形式存储。我稍后会处理。另外，在迁移类中定义用户表如下：

```
$this->createTable('user', array(
    'id' => 'pk',
    'company-id' => 'integer not null',
    'login-id' => 'string unique not null',
    'password' => 'string not null',
    'full-name' => 'string',
    'mobile-phone' => 'string',
    'other-phone' => 'string',
    'email' => 'string unique',
    ));
$this->addForeignKey('fk_user_company', 'user', 'company-id', 'company', 'id'
    , 'restrict'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:26:06.103

为什么不以同样的方式继续并拥有：

```
$this->insert('user', array(
   'company-id' => (int)$companyId,
   'login-id' => 'admin',
   'password' => 'admin'
)); 
```

?

此外，使用破折号而不是下划线并不是您对表列名称的最佳想法。稍后你会想要使用 CActiveRecord 来引用登录 ID，但是

```
$model->login-id; 
```

无效，所以你必须

```
$model->{'login-id'} // or
$model->getAttribute('login-id'); 
```

这是一种痛苦。总的来说，我建议您将其切换为下划线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:32:14.960

根据 Yii 文档：

> 参数的 SQL 数据类型。如果为 null，则类型由值的 PHP 类型确定。

所以：

```
$command->bindValue(':company-id', $companyId); 
```

或者

```
$command->bindValue(':company-id', (int)$companyId); 
```

应该有效

# r - 将过滤器应用于R中的矩阵的最快方法

> ID：16109077
> 
> 赞同：0
> 
> 时间：2013-04-19T16:16:35.203
> 
> 标签：r, image-processing, matrix, filter, filtering

如果我有一个二维矩阵，并且我想在给定一些滤波器矩阵的情况下应用某种滤波器（例如扩张、侵蚀、索贝尔边缘检测）：

```
f = matrix(c(0,1,0,
             1,1,1,
             0,1,0), 3) 
```

将它应用于矩阵的最有效方法是什么。

For 循环遍历每个像素似乎效率太低：

```
for(i in 2:nrow(mat)){
    for(j in 2:ncol(mat)){
        //Apply filter to pixel i,j
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:34:02.397

我猜这取决于你在做什么！您只需调用对矩阵进行操作的函数即可将函数应用于矩阵的每个单元格。像这样的东西：

```
f1 <- function(x){ x*2 }

m <- matrix(sample(25,9),nrow=3)
m
#    [,1] [,2] [,3]
#[1,]   24   16    2
#[2,]   11   10    5
#[3,]   23   19    8

## Operates on all cells as R treats the matrix like a vector
f1(m)
#    [,1] [,2] [,3]
#[1,]   48   32    4
#[2,]   22   20   10
#[3,]   46   38   16 
```

或者，如果这种构造对您不起作用，那么您可以使用`apply`在矩阵的每一行/列中应用一个函数：

```
apply( m , 1:2 , function(x){ x * 10 } )
#    [,1] [,2] [,3]
#[1,]  240  160   20
#[2,]  110  100   50
#[3,]  230  190   80 
```

但就像@joran 说的，这取决于你想做什么！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:32:52.867

有一个名为 的函数`convolve`，但我想它只适用于一维信号。所以你有`fft`选择。在频域中进行操作并转换回时域。

在不知道预期输入/输出的情况下很难显示确切的步骤，但试试这个：

```
Re( fft( (1/dimension) * fft(signal) * fft(f), inverse=T)) 
```

# javascript - 淘汰如何在 foreach 期间将自定义列添加到表中

> ID：16109081
> 
> 赞同：4
> 
> 时间：2013-04-19T16:16:39.020
> 
> 标签：javascript, knockout.js

您好，我需要使用数组中的列（标题）和其他数组中的行构建动态表，数组中的第一列必须是静态的。

```
<table>
<thead>
<tr>
<th>Static</th>
<th>Dynamic 1</th>
<th>Dynamic 2</th>
<th>Dynamic 3</th>
</tr>
</thead>
<tbody>
<tr>
<th>Nam1</th>
<th>value</th>
<th>value</th>
<th>value</th>
</tr>
</tbody>
</table> 
```

我有下一个 Knockout HTML 模型 allRoles 这是带有动态标题的数组

```
<table>
            <thead>
                <tr data-bind="template: { name: 'tableHeader', foreach: allRoles, as: 'role',afterRender: addFirstColumn } ">                                                  

                </tr>
            </thead>    
                <tbody data-bind="foreach: {data: userRoles,as:'dep'}">
                <tr>
                    <td>
                       <span data-bind="text: dep.name"></span>
                    </td>                   
                    <td data-bind="foreach: {data: dep.roles, as: 'role'}">
                       <span data-bind="text: role.id"></span>
                    </td>
                </tr>
                </tbody>
            </table>

<script type="text/html" id="tableHeader">
    <th data-bind="text: role.name">

    </th>
</script> 
```

我如何添加静态？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T16:25:52.390

您可能正在寻找 Knockout 的无*容器控制流语法*。它看起来像这样：

```
<table>
    <thead>
        <tr>
            <th>Static</th>
            <!-- ko foreach: allRoles -->
                <th data-bind="text: name"></th>
            <!-- /ko -->
        </tr>
    </thead>
</table> 
```

请参阅此处的**注释 4** ：http : [//knockoutjs.com/documentation/foreach-binding.html](http://knockoutjs.com/documentation/foreach-binding.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:25:22.683

将您的绑定更改为：

```
<thead>
    <tr>                                                  
        <th>Static</th>
        <!-- ko  template: { name: 'tableHeader', foreach: allRoles, as: 'role',afterRender: addFirstColumn } -->
        <!-- /ko -->
    </tr>
</thead> 
```

这使用敲除描述为[虚拟元素](http://knockoutjs.com/documentation/custom-bindings-for-virtual-elements.html)的东西来呈现您的`foreach`绑定，而无需父节点。

# python - 为存在的元素绘制两个向量 - 即跳过没有条目的行

> ID：16109085
> 
> 赞同：1
> 
> 时间：2013-04-19T16:16:47.190
> 
> 标签：python, arrays

两个向量：

```
A = ['1','2','3','4','5','6','','6','7','8','','1','2','3','','']
B = ['2','3','4','','5','','','6','','7','8','9','1','4'] 
```

如何仅针对具有两个现有元素的值绘制 A 与 B？目前，我必须遍历每个向量并检查 int() 在同一行是否 > 0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:26:51.510

如果您`None`输入空格，则可以连接两个向量并删除具有缺失值的对，如下所示：

```
>>> A = [1,2,3,4,5,6,None,6,7,8,None,1,2,3,None,None]
>>> B = [2,3,4,None,5,None,None,6,None,7, 8,9,1,4]
>>> filter(lambda (a,b): a is not None and b is not None, map(lambda a,b: (a,b), A,B))
[(1, 2), (2, 3), (3, 4), (5, 5), (6, 6), (8, 7), (1, 9), (2, 1), (3, 4)] 
```

然后您可以使用结果进行绘图。

在评论中回答您的问题，如果您使用 Python 的 CSV 模块，那么它将正确解析带有空格的 CSV 并将空格解析为空字符串：

```
$ cat t.csv 
1,2,,4
1,,3,,
$ python
Python 2.7.1 (r271:86832, Mar 18 2011, 09:09:48) 
[GCC 4.5.0 20100604 [gcc-4_5-branch revision 160292]] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import csv
>>> with open('t.csv') as f:
...   reader = csv.reader(f)
...   for row in reader:
...     print row
... 
['1', '2', '', '4']
['1', '', '3', '', '']
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:11:28.447

您可以使用`zip`配对元素，然后（如果它们是字符串）`all`选择那些不是空字符串的元素，因为`bool(some_str)`如果它是空的则为 False，否则为 True。例如：

```
>>> A = ['1','2','3','4','5','6','','6','7','8','','1','2','3','','']
>>> B = ['2','3','4','','5','','','6','','7','8','9','1','4']
>>> pairs = filter(all, zip(A, B))
>>> pairs
[('1', '2'), ('2', '3'), ('3', '4'), ('5', '5'), ('6', '6'), ('8', '7'), ('1', '9'), ('2', '1'), ('3', '4')] 
```

不过，我可能会使用列表理解，更像是：

```
>>> [map(float, pair) for pair in zip(A, B) if all(pair)]
[[1.0, 2.0], [2.0, 3.0], [3.0, 4.0], [5.0, 5.0], [6.0, 6.0], [8.0, 7.0], [1.0, 9.0], [2.0, 1.0], [3.0, 4.0]] 
```

并同时获取数字。

# java - Drawing a draggable text box

> ID：16109087
> 
> 赞同：1
> 
> 时间：2013-04-19T16:16:47.243
> 
> 标签：java, swing, sdk, paint

Would it be possible to type on the cursors location, somehow, via the use of DrawString()?

I am using the JCreator IDE, for Java.

For example, if I used something similar to:

drawString("Hello there", xCo, yCo);

What I want to do is allow the user to type when the mouse is clicked on a drawing canvas. The user can already draw shapes in my program, but I would like to enable them to type text on-screen.

The program code is below:

```
import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

import java.awt.event.*;
import java.awt.*;
import java.awt.geom.*;
import java.text.DecimalFormat;
import java.util.*;

@SuppressWarnings("serial")
public class Splat extends JFrame
{

    JButton brushBut, lineBut, clearBut, ellipseBut, rectBut, strokeBut, fillBut;

    // Defines the arrays used on the DrawingBoard. These are Instantiated earlier
    // so that they may be cleared in the makeMeButtons method

    ArrayList<Shape> shapes = new ArrayList<Shape>();
    ArrayList<Color> shapeFill = new ArrayList<Color>();
    ArrayList<Color> shapeStroke = new ArrayList<Color>();
    ArrayList<Float> transPercent = new ArrayList<Float>();

    // Transparency slider

    JSlider transSlider;

    JLabel transLabel;

    // Limits the transparency float to 2 decimal points

    DecimalFormat dec = new DecimalFormat("#.##");

    // Standard 2D drawing rules for Java

    Graphics2D graphSettings;

    // Used to determine the shape/button selected

    int currentAction = 1;

    // Transparency of the shape

    float transparentVal = 1.0f;

    // Default stroke and fill colors

    Color strokeColor=Color.BLACK, fillColor=Color.BLACK;

    public static void main(String [] args)
    {
            new Splat();
    }

    public Splat()
    {
        // Define the defaults for the JFrame

        this.setSize(800, 600);
        this.setTitle("Java Paint");
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel buttonPanel = new JPanel();

        // Swing box that will hold all the buttons

        Box theBox = Box.createHorizontalBox();

        // Make all the buttons in makeMeButtons by passing the
        // button icon. 

        brushBut = makeMeButtons("./src/brush.png", 1);
        lineBut = makeMeButtons("./src/Line.png", 2);
        clearBut = makeMeButtons("./src/Clear.png", 3);
        ellipseBut = makeMeButtons("./src/Ellipse.png", 4);
        rectBut = makeMeButtons("./src/Rectangle.png", 5);

        // Make all the buttons in makeMeColorButton by passing the
        // button icon and true for stroke color or false for fill

        strokeBut = makeMeColorButton("./src/Stroke.png", 6, true);
        fillBut = makeMeColorButton("./src/Fill.png", 7, false);

        // Add the buttons to the box

        theBox.add(brushBut);
        theBox.add(lineBut);
        theBox.add(clearBut);
        theBox.add(ellipseBut);
        theBox.add(rectBut);
        theBox.add(strokeBut);
        theBox.add(fillBut);

        // Add the transparent label and slider

        transLabel = new JLabel("Transparent: 1");

        // Min value, Max value and starting value for slider

        transSlider = new JSlider(1, 99, 99);

        // Create an instance of ListenForEvents to handle events

        ListenForSlider lForSlider = new ListenForSlider();

        // Tell Java that you want to be alerted when an event
        // occurs on the slider

        transSlider.addChangeListener(lForSlider);

        theBox.add(transLabel);
        theBox.add(transSlider);

        // Add the box of buttons to the panel

        buttonPanel.add(theBox);

        // Position the buttons in the bottom of the frame

        this.add(buttonPanel, BorderLayout.SOUTH);

        // Make the drawing area take up the rest of the frame

        this.add(new DrawingBoard(), BorderLayout.CENTER);

        // Show the frame

        this.setVisible(true);
    }

    // Spits out buttons based on the image supplied
    // actionNum represents each shape to be drawn

    public JButton makeMeButtons(String iconFile, final int actionNum){
        JButton theBut = new JButton();
        Icon butIcon = new ImageIcon(iconFile);
        theBut.setIcon(butIcon);

        // Make the proper actionPerformed method execute when the
        // specific button is pressed
        // If the action number is 3 then the DrawingBoard is blanked instantly,
        // on the button press

        theBut.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                if(actionNum == 3)
                {
                    shapes.clear();
                    shapeFill.clear();
                    shapeStroke.clear();
                    transPercent.clear();
                    repaint();
                }
                else
                {
                currentAction = actionNum;
                }
            }
        });

        return theBut;  
    }

    // Creates the Fill Colour and Stroke Colour Buttons

    public JButton makeMeColorButton(String iconFile, final int actionNum, final boolean stroke){
        JButton theBut = new JButton();
        Icon butIcon = new ImageIcon(iconFile);
        theBut.setIcon(butIcon);

        theBut.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {

                if(stroke){

                    // JColorChooser is a popup that lets you pick a color

                    strokeColor = JColorChooser.showDialog(null,  "Pick a Stroke", Color.BLACK);
                } else {
                    fillColor = JColorChooser.showDialog(null,  "Pick a Fill", Color.BLACK);
                }

            }
        });

        return theBut;  
    }

    private class DrawingBoard extends JComponent
    {

            Point drawStart, drawEnd;

            // Monitors events on the drawing area of the frame

            public DrawingBoard()
            {

                    this.addMouseListener(new MouseAdapter()
                      {

                        public void mousePressed(MouseEvent e)
                        {

                            if(currentAction != 1){

                            // When the mouse is pressed get x & y position

                            drawStart = new Point(e.getX(), e.getY());
                            drawEnd = drawStart;
                            repaint();

                            }

                            }

                        public void mouseReleased(MouseEvent e)
                            {

                            if(currentAction != 1){

                              // Create a shape using the starting x & y
                              // and finishing x & y positions

                            Shape aShape = null;

                            if (currentAction == 2){
                                aShape = drawLine(drawStart.x, drawStart.y,
                                        e.getX(), e.getY());
                            } else 

                            if (currentAction == 4){
                                aShape = drawEllipse(drawStart.x, drawStart.y,
                                        e.getX(), e.getY());
                            } else 

                            if (currentAction == 5) {

                                // Create a new rectangle using x & y coordinates

                                aShape = drawRectangle(drawStart.x, drawStart.y,
                                        e.getX(), e.getY());
                            }

                              // Add shapes, fills and colors to there ArrayLists

                              shapes.add(aShape);
                              shapeFill.add(fillColor);
                              shapeStroke.add(strokeColor);

                              // Add transparency value to ArrayList

                              transPercent.add(transparentVal);

                              drawStart = null;
                              drawEnd = null;

                              // repaint the drawing area

                              repaint();

                            }

                            }
                      } );

                    this.addMouseMotionListener(new MouseMotionAdapter()
                    {

                      public void mouseDragged(MouseEvent e)
                      {

                          // If this is a brush have shapes go on the screen quickly

                          if(currentAction == 1){

                            int x = e.getX();
                            int y = e.getY();

                            Shape aShape = null;

                            // Make stroke and fill equal to eliminate the fact that this is an ellipse

                            strokeColor = fillColor;

                            aShape = drawBrush(x,y,5,5);

                            shapes.add(aShape);
                              shapeFill.add(fillColor);
                              shapeStroke.add(strokeColor);

                              // Add the transparency value

                              transPercent.add(transparentVal);
                        } 

                        // Get the final x & y position after the mouse is dragged

                        drawEnd = new Point(e.getX(), e.getY());
                        repaint();
                      }
                    } );
            }

            public void paint(Graphics g)
            {
                    // Class used to define the shapes to be drawn

                    graphSettings = (Graphics2D)g;

                    // Antialiasing cleans up the jagged lines and defines rendering rules

                    graphSettings.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                            RenderingHints.VALUE_ANTIALIAS_ON);

                    // Defines the line width of the stroke

                    graphSettings.setStroke(new BasicStroke(4));

                    // Iterators created to cycle through strokes and fills
                    Iterator<Color> strokeCounter = shapeStroke.iterator();
                    Iterator<Color> fillCounter = shapeFill.iterator();

                    // Iterator for transparency

                    Iterator<Float> transCounter = transPercent.iterator();

                    for (Shape s : shapes)
                    {

                        // Sets the shapes transparency value

                        graphSettings.setComposite(AlphaComposite.getInstance(
                                AlphaComposite.SRC_OVER, transCounter.next()));

                        // Grabs the next stroke from the color arraylist
                        graphSettings.setPaint(strokeCounter.next());

                        graphSettings.draw(s);

                        // Grabs the next fill from the color arraylist
                        graphSettings.setPaint(fillCounter.next());

                        graphSettings.fill(s);
                    }

                    // Guide shape used for drawing
                    if (drawStart != null && drawEnd != null)
                    {
                        // Makes the guide shape transparent

                        graphSettings.setComposite(AlphaComposite.getInstance(
                                AlphaComposite.SRC_OVER, 0.40f));

                        // Make guide shape gray for professional look

                        graphSettings.setPaint(Color.LIGHT_GRAY);

                        Shape aShape = null;

                        if (currentAction == 2){
                            aShape = drawLine(drawStart.x, drawStart.y,
                                    drawEnd.x, drawEnd.y);
                        } else 

                        if (currentAction == 4){
                            aShape = drawEllipse(drawStart.x, drawStart.y,
                                    drawEnd.x, drawEnd.y);
                        } else 

                        if (currentAction == 5) {

                            // Create a new rectangle using x & y coordinates

                            aShape = drawRectangle(drawStart.x, drawStart.y,
                                    drawEnd.x, drawEnd.y);
                        }

                            graphSettings.draw(aShape);
                    }
            }

            private Rectangle2D.Float drawRectangle(
                    int x1, int y1, int x2, int y2)
            {
                // Get the top left hand corner for the shape
                // Math.min returns the points closest to 0

                    int x = Math.min(x1, x2);
                    int y = Math.min(y1, y2);

                    // Gets the difference between the coordinates and 

                    int width = Math.abs(x1 - x2);
                    int height = Math.abs(y1 - y2);

                    return new Rectangle2D.Float(
                            x, y, width, height);
            }

            // The other shapes will work similarly
            // More on this in the next tutorial

            private Ellipse2D.Float drawEllipse(
                    int x1, int y1, int x2, int y2)
            {
                    int x = Math.min(x1, x2);
                    int y = Math.min(y1, y2);
                    int width = Math.abs(x1 - x2);
                    int height = Math.abs(y1 - y2);

                    return new Ellipse2D.Float(
                            x, y, width, height);
            }

            private Line2D.Float drawLine(
                    int x1, int y1, int x2, int y2)
            {

                    return new Line2D.Float(
                            x1, y1, x2, y2);
            }

            private Ellipse2D.Float drawBrush(
                    int x1, int y1, int brushStrokeWidth, int brushStrokeHeight)
            {

                return new Ellipse2D.Float(
                        x1, y1, brushStrokeWidth, brushStrokeHeight);

            }

    }

 // Implements ActionListener so it can react to events on components

    private class ListenForSlider implements ChangeListener{

        // Called when the spinner is changed

        public void stateChanged(ChangeEvent e) {

            // Check if the source of the event was the button

            if(e.getSource() == transSlider){

                // Change the value for the label next to the spinner
                // Use decimal format to make sure only 2 decimals are ever displayed

                transLabel.setText("Transparent: " + dec.format(transSlider.getValue() * .01) );

                // Set the value for transparency for every shape drawn after

                transparentVal = (float) (transSlider.getValue() * .01);

            }

        }

    }
} 
```

My aim is for the user to click a button, write the text they require and then press enter for this text to be drawn on the canvas.

If someone could point me towards a descriptive tutorial on how to do this, or provide some assistance it would be swell...

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:27:36.577

你可以`drawString()`在你的`paint()`方法中使用，就像他们[在这里](https://stackoverflow.com/a/5312702/261156)展示的那样，但你可能应该重写`paintComponent()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T16:29:27.237

前段时间，我为此类任务编写了一个框架。也许您觉得它很有用（该库是开源的）：

教程：

[http://softsmithy.sourceforge.net/lib/current/docs/tutorial/swing/customizer/index.html](http://softsmithy.sourceforge.net/lib/current/docs/tutorial/swing/customizer/index.html)

Java 文档：

[http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-swing-customizer/index.html](http://softsmithy.sourceforge.net/lib/current/docs/api/softsmithy-lib-swing-customizer/index.html)

有关最新版本的信息：

[http://puces-blog.blogspot.ch/2012/11/news-from-software-smithy-version-03.html](http://puces-blog.blogspot.ch/2012/11/news-from-software-smithy-version-03.html)

# c# - Getting error about creating folder because of date-time format of IIS

> ID：16109089
> 
> 赞同：-1
> 
> 时间：2013-04-19T16:16:54.453
> 
> 标签：c#, asp.net, .net, iis, windows-server-2008

I have a asp.net application and I am running remotely an.exe file which locates in windows 2008r2 server. This exe file creates a folder according to date-time format.
When I host this web application into server, the folders cannot be created because IIS date format is like xx/xx/xx. Because it includes / , folder cannot be created.
I want to change date format like xx-xx-xx. How can I manage this?

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm1.aspx.cs" Inherits="WebApplication2.WebForm1" Culture = "tr-TR"%> 
```

this did not work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:19:18.543

[您可以使用ToString()](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)格式化您的日期时间。要获得您想要的格式，您可以使用：

```
myDate.ToString("yy-MM-dd") 
```

# jquery - .blur() 两个选择框

> ID：16109093
> 
> 赞同：-2
> 
> 时间：2013-04-19T16:17:11.907
> 
> 标签：jquery, drop-down-menu, blur

我目前正在开发一些带有表格的管理工具。当我单击一个字段时，它将使其可编辑。但是我有几个字段，其中有多个选择框或文本字段。问题是当一个选择框或文本字段模糊时调用处理程序。

我尝试检查是否有任何所需的对象具有焦点，但似乎在新元素具有焦点之前触发了模糊事件。

举个例子：

我的 HTML 代码如下所示：

```
<form>
<select id="edit">
<!-- Options... -->
</select>
<select id="edit2">
<!-- Options... -->
</select>
</form> 
```

这是我的一些js：

```
$(document).on("blur", "select.edit", finishEdit);
$(document).on("blur", "select.edit2", finishEdit);

// Some later point in the code

function finishEdit()
{
  if(!($("select.edit:focus").length || $("select.edit2:focus").length))
  {
    // This should NOT be called if I just focus edit2! But it does!!
  }
} 
```

所以我从选择编辑开始。我可以轻松地编辑它。但是，如果我现在尝试选择 edit2，我的编辑中的模糊事件将被调用。行。这应该不是什么大问题，因为我正在检查是否选择了另一个下拉菜单。但是此时 edit2 尚未集中，因此我的检查失败并调用了代码，这将删除下拉菜单并发送更新！

那么我怎样才能使这项工作呢？基本上，如果我将焦点放在另一个有效元素上，如何防止触发模糊事件？

（我希望现在更清楚......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:47:30.787

行。我解决了！

```
$(document).on("blur", "select.edit, select.edit2", function()
{
  $(document).one("click", finishEdit);
}); 
```

这会在设置焦点后调用 finishEdit 函数。

# c# - 使用 WriteableBitmapEx 访问像素颜色时出现 AccessViolationException

> ID：16109097
> 
> 赞同：1
> 
> 时间：2013-04-19T16:17:24.923
> 
> 标签：c#, windows-8, writeablebitmapex

我正在使用[WriteableBitmapEx](https://writeablebitmapex.codeplex.com)库来编辑使用 Windows 8 Pro 的平板电脑摄像头拍摄的图像。每次调用 GetPixel() 函数时，我都会收到 AccessViolationException，代码如下：

```
Windows.Media.Capture.MediaCapture captureMgr = new MediaCapture();
await captureMgr.InitializeAsync();

IRandomAccessStream memoryStream = new InMemoryRandomAccessStream();
await captureMgr.CapturePhotoToStreamAsync(imageProperties, memoryStream);
await memoryStream.FlushAsync();
memoryStream.Seek(0);

WriteableBitmap tmpImage = new WriteableBitmap(1, 1); 
tmpImage.SetSource(memoryStream);
tmpImage.GetPixel(1, 1); // An AccessViolationException occurs. 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T16:35:24.173

尝试使用内置方法来创建您的`WriteableBitmap`替代方法。

```
WriteableBitmap tmpImage = await BitmapFactory.New(1, 1).FromStream(memoryStream);  
tmpImage.GetPixel(1, 1); 
```

这应该确保您的图像在被访问之前已被加载到 WriteableBitmap 中。

# c++ - c++ - 在将值分配给引用时，有没有办法自动转换值？

> ID：16109100
> 
> 赞同：1
> 
> 时间：2013-04-19T16:17:30.977
> 
> 标签：c++

我想知道 C++ 是否有某种方式可以自动转换我想要分配给引用的值。

```
class X{
public:
    X(int x){
    }
};

int main(){
    X x = 5;        //works
    X& y = 6;       //doesn't work
    X& z = (X)7;    //works
    return 0;
} 
```

如您所见，将 6 分配给引用 y 之前不进行转换是行不通的。我可以在类 X 的定义中添加一些东西来使这个工作没有强制转换，这样非工作线就可以工作了吗？

基本上我想实现这一点，例如这样的功能：

```
void doSomething(X& x){
    //...
} 
```

之后可以这样调用：

```
doSomething(7); 
```

可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T16:22:23.077

对 non- 的左值引用`const`只能绑定到左值。`6`是纯右值，所以它不能绑定到`y`. 你在这一行做什么：

```
X& z = (X)7; 
```

基本上相当于这个：

```
X& z = X(7); 
```

在右侧，它创建一个临时类型`X`，然后将其绑定到一个左值引用。在 C++ 中，这是非法的 - 临时变量是右值。您的编译器可能允许这样做（不是很聪明）记录的扩展。

避免编写那种代码。另一方面，这是合法的：

```
X const& z = 6; 
```

并且临时绑定的生命周期`z`将延长以匹配`z`引用本身的生命周期（12.2/5）。所以你应该这样写你的函数：

```
void doSomething(X const& x)
//                 ^^^^^
{
    //...
} 
```

左值引用`const` *可以*绑定到右值（包括临时值）。因此，以下调用是合法的：

```
doSomething(7) 
```

`X`它会通过提供构造函数的参数来构造一个临时类型`7`，然后将函数参数绑定`x`到该临时。

# python - 如何让 python 帮助系统在我的动态创建的模块中显示动态创建的类？

> ID：16109101
> 
> 赞同：0
> 
> 时间：2013-04-19T16:17:33.010
> 
> 标签：python, python-2.7, documentation

我正在动态创建一个 python 模块，其中包含在该模块中动态创建的类。但是，在 python 中使用帮助功能时，类不会出现。这是该问题的一个示例。

```
import imp
Foo = imp.new_module("Foo")
Foo.Bar = type('Bar', (object,), dict(x=10, y=20))
help(Foo) 
```

这显示了以下内容。

```
Help on module Foo:

NAME
    Foo

FILE
    (built-in) 
```

我希望 Bar 出现在**CLASSES**部分。我怎么做？

请注意，`help(Foo.Bar)`将类描述为`in module __main__`. 这是一个线索吗？

```
Help on class Bar in module __main__:

class Bar(__builtin__.object)
 |  Data descriptors defined here:
 |  
 |  __dict__
 |      dictionary for instance variables (if defined)
 |  
 |  __weakref__
 |      list of weak references to the object (if defined)
 |  
 |  ----------------------------------------------------------------------
 |  Data and other attributes defined here:
 |  
 |  x = 10
 |  
 |  y = 20 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:21:53.397

设置：`__module__`_`Bar`

```
Foo.Bar.__module__ = Foo.__name__ 
```

它会出现。根据属性`help()`过滤掉*不*属于模块的所有内容。`.__module__`其余部分假定为外部进口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:29:05.483

如果您设置`Foo.__all__`为 include `'Bar'`，则将`Bar`在以下`CLASSES`部分列出：

```
import imp
Foo = imp.new_module('Foo')
Foo.Bar = type('Bar', (object,), dict(x=10, y=20))
Foo.__all__ = ['Bar']
help(Foo) 
```

# cucumber - Intermittent errors running cucumber tests with capybara and poltergeist on jruby

> ID：16109105
> 
> 赞同：5
> 
> 时间：2013-04-19T16:17:41.610
> 
> 标签：cucumber, capybara, poltergeist

When running cucumber 1.1.9 tests using capybara 2.0.2 and poltergeist 1.1.0 on jruby 1.7.3 I see intermittent errors like the following:

```
 Scenario: Recover username for a valid email                                                       # features/user/recover_username.feature:14
  Undefined method reset_id! for module '#<Module:0xac1f53d>' (NameError)
  org/jruby/RubyModule.java:2284:in `undef_method'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activemodel-3.2.13/lib/active_model/attribute_methods.rb:279:in `undefine_attribute_methods'
  org/jruby/RubyArray.java:1613:in `each'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activemodel-3.2.13/lib/active_model/attribute_methods.rb:279:in `undefine_attribute_methods'
  org/jruby/RubyModule.java:2291:in `module_eval'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activemodel-3.2.13/lib/active_model/attribute_methods.rb:278:in `undefine_attribute_methods'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activerecord-3.2.13/lib/active_record/attribute_methods.rb:85:in `undefine_attribute_methods'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activerecord-3.2.13/lib/active_record/attribute_methods/read.rb:37:in `undefine_attribute_methods'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activerecord-3.2.13/lib/active_record/model_schema.rb:299:in `reset_column_information'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activerecord-jdbc-adapter-1.2.7/lib/arjdbc/jdbc/base_ext.rb:10:in `reset_column_information_with_arjdbc_base_ext'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activerecord-3.2.13/lib/active_record/session_store.rb:112:in `setup_sessid_compatibility!'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activerecord-3.2.13/lib/active_record/session_store.rb:100:in `find_by_session_id'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activerecord-3.2.13/lib/active_record/session_store.rb:308:in `get_session'
  /Users/jnorton/workspace/echo-reverb-rails/config/initializers/buffered_logger_silencer_fix.rb:18:in `silence'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activerecord-3.2.13/lib/active_record/session_store.rb:307:in `get_session'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:251:in `load_session'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/actionpack-3.2.13/lib/action_dispatch/middleware/session/abstract_store.rb:49:in `load_session'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/actionpack-3.2.13/lib/action_dispatch/middleware/session/abstract_store.rb:57:in `stale_session_check!'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/actionpack-3.2.13/lib/action_dispatch/middleware/session/abstract_store.rb:49:in `load_session'
  org/jruby/RubyBasicObject.java:1683:in `__send__'
  org/jruby/RubyKernel.java:2107:in `send'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:135:in `load!'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:127:in `load_for_read!'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:59:in `[]'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/actionpack-3.2.13/lib/action_dispatch/middleware/flash.rb:238:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/actionpack-3.2.13/lib/action_dispatch/middleware/cookies.rb:341:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activerecord-3.2.13/lib/active_record/query_cache.rb:64:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activerecord-3.2.13/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/actionpack-3.2.13/lib/action_dispatch/middleware/callbacks.rb:28:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:408:in `_run__1481551955__call__1911249458__callbacks'
  org/jruby/RubyBasicObject.java:1677:in `__send__'
  org/jruby/RubyKernel.java:2103:in `send'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:405:in `__run_callback'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:390:in `_run_call_callbacks'
  org/jruby/RubyBasicObject.java:1677:in `__send__'
  org/jruby/RubyKernel.java:2103:in `send'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activesupport-3.2.13/lib/active_support/callbacks.rb:81:in `run_callbacks'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/actionpack-3.2.13/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/actionpack-3.2.13/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/actionpack-3.2.13/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/actionpack-3.2.13/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/cucumber-rails-1.3.0/lib/cucumber/rails/action_controller.rb:10:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/railties-3.2.13/lib/rails/rack/logger.rb:32:in `call_app'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/railties-3.2.13/lib/rails/rack/logger.rb:16:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/activesupport-3.2.13/lib/active_support/tagged_logging.rb:22:in `tagged'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/railties-3.2.13/lib/rails/rack/logger.rb:16:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/actionpack-3.2.13/lib/action_dispatch/middleware/request_id.rb:22:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/actionpack-3.2.13/lib/action_dispatch/middleware/static.rb:63:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/railties-3.2.13/lib/rails/engine.rb:479:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/railties-3.2.13/lib/rails/application.rb:223:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/rack-1.4.5/lib/rack/builder.rb:134:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/rack-1.4.5/lib/rack/urlmap.rb:64:in `call'
  org/jruby/RubyArray.java:1613:in `each'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/rack-1.4.5/lib/rack/urlmap.rb:49:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/capybara-2.0.2/lib/capybara/server.rb:19:in `call'
  /Users/jnorton/workspace/echo-reverb-rails/vendor/bundle/jruby/1.9/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
  /Users/jnorton/.rvm/rubies/jruby-1.7.3/lib/ruby/1.9/webrick/httpserver.rb:138:in `service'
  /Users/jnorton/.rvm/rubies/jruby-1.7.3/lib/ruby/1.9/webrick/httpserver.rb:94:in `run'
  /Users/jnorton/.rvm/rubies/jruby-1.7.3/lib/ruby/1.9/webrick/server.rb:191:in `start_thread' 
```

The test will invariably pass when run a second time.

This happens less than 5% of the time, but enough to break CI. These errors are not the typical timing issues causing a page element to not be located; they occur at the start of a scenario before any steps are executed.

This looks to me like some kind of race condition that is causing some classes/modules to be loaded in the wrong order, but I have not looked deeply into it yet. I wanted to ask here to see if this was a known issue with some sort of solution/work around.

# javascript - Javascript 创建对象 - 多种方法，有什么区别吗？

> ID：16109108
> 
> 赞同：30
> 
> 时间：2013-04-19T16:17:47.987
> 
> 标签：javascript, javascript-objects

我已经看到了几种在 javascript 中实例化对象的不同方法，想知道各种方法的优缺点以及为什么要使用其中一种方法。

**方法一**

```
var obj = {
    prop: value,
    .
    .
    .
} 
```

方法一是标准方法，没什么新鲜的:)

**方法二**

```
var obj = new function() {
    var prop1 = value1;
    var fn1 = function() {
    };
    .
    .
    .

    this.prop2 = value2;
    .
    .
    .
}(); 
```

函数方法，我想将这种方法与方法3进行比较。函数方法主要用于封装（对吗？）

**方法 3**

```
var obj = (function() {
    var prop1 = value1;
    var fn1 = function() {
    };
    .
    .
    .

    return {
        prop2: value2,
        .
        .
        .
    }
})(); 
```

使用这种方法，我不太了解其使用背后的原因。它与方法 2 有何不同？两者都可以用来封装逻辑。

是不是我们可以传入参数，这样我们就可以处理任何潜在的冲突？例如 jquery 的`$`语法 - 但你也可以用方法 2 来做到这一点......

谢谢。

* * *

**编辑：**

* * *

我知道方法 1 和 3 是相似的（因为它们都返回对象）但是方法 3 也创建了一个闭包。哪种方法2也可以。

这确实是我的问题的基础，2 和 3 都创建了闭包，但它们之间有什么区别。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-12-10T09:48:59.467

在 JavaScript 中创建对象的 7 种方法：

**1.对象构造函数**

创建对象最简单的方法是使用 Object 构造函数：view plainprint?

```
var person = new Object();  
person.name = "Diego";  
person.getName = function(){  
    return this.name;  
}; 
```

**2\. 字面符号**

查看普通版？

```
var person = {  
    person.name : "Diego",  
    person.getName : function(){  
        return this.name;  
    }  
} 
```

**3.工厂功能**

Factory 函数允许封装和重用创建类似对象的逻辑。它为此利用了任何先前的构造。要么：查看plainprint？

```
var newPerson=function(name){  
    var result = new Object();  
    result.name = name;  
    result.getName = function(){  
        return this.name;  
    };  
    return result;  
};  
var personOne = newPerson("Diego");  
var personTwo = newPerson("Gangelo");  
console.log(personOne.getName()); // prints Diego  
console.log(personTwo.getName()); // prints Gangelo 
```

或者：

```
view plainprint?
var newPerson=function(name){  
    return {  
        person.name : name,  
        person.getName : function(){  
            return this.name;  
        };  
};  
var personOne = newPerson("Diego");  
var personTwo = newPerson("Gangelo");  
console.log(personOne.getName()); // prints Diego  
console.log(personTwo.getName()); // prints Gangelo 
```

**4\. 函数构造函数**

在 Javascript 中，可以调用前面带有 new 运算符的任何函数。给定一个函数 F，对于 new F()：创建一个新的空对象 X。X 被设置为 F 的上下文，这在整个 F 中都指向 X。X 作为 F 视图普通打印的结果返回？

```
function Person(name){  
        this.name = name;  
        this.getName = function(){  
            return this.name;  
        };  
};  
var personOne = new Person("Diego");  
console.log(personOne.getName()); // prints Diego  
console.log(personOne instanceOf Person); // prints true  
console.log(personOne.constructor === Person); // prints true  
console.log(personOne instanceOf Object); // prints true 
```

**5\. 原型**

函数在 Javascript 中非常特殊。它们是对象，它们可以创建其他对象，并且它们会自动获得一个名为原型的字段。原型是具有单个字段的普通对象，称为构造函数，指向函数本身。它的特别之处在于，通过函数创建的每个对象都继承了函数的原型。查看普通版？

```
function Person(){};  
Person.prototype.name = "Diego";  
var personOne = new Person();  
var personTwo = new Person();  
console.log(personOne.constructor == Person); // prints true  
console.log(personOne.name); // prints Diego  
console.log(personTwo.constructor == Person); // prints true  
console.log(personTwo.name); // prints Diego 
```

**6.功能/原型组合**

正如您想象的那样，功能/原型组合利用了这两种方法 :) 查看原图？

```
function Person(name){  
        this.name = name;  
};  
Person.prototype.getName = function(){  
            return this.name;  
        };  
var personOne = new Person("Diego");  
var personTwo = new Person("Filippo");  
console.log(personOne.getName()); // prints Diego  
console.log(personTwo.getName()); // prints Filippo  
console.log(personOne.getName === personTwo.getName) //prints true 
```

**7.单身人士**

有时，您可能希望确保某个类只存在一个实例。在 Javascript 中获取 Singleton 就像同时定义和调用构造函数一样简单：查看 plainprint？

```
var singleton = new function(){  
    this.name = "ApplicationName";  
}; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-19T16:35:48.137

在方法#2 和#3`constructor`中，结果对象的属性会有所不同。

实际上，这意味着第二种方法允许您使用匿名构造函数实例化多个对象：

```
x = new function() { alert(1) };
y = new x.constructor; // shows the message too 
```

[模块模式与匿名构造函数实例的](https://stackoverflow.com/questions/1536127/module-pattern-vs-instance-of-an-anonymous-constructor)最佳答案包括道格拉斯·克罗克福德（Douglas Crockford）的一句话，他在其中解释了为什么他认为方法 #3 比 #2 更好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-19T16:26:25.550

第一种和第三种方法几乎相同，在某种程度上它们都创建了一个对象字面量，它是`Object`类的直接子代。它们之间的区别在于，在第三种方法中，您可能对属性进行了某种封装：

```
var obj = (function() {
    var prop = {};

    return {
        prop2: function(){ return prop };
    }
})(); 
```

在性能方面，您可能会认为第三种方法会创建闭包，而第一种不会！

然而，在第二种方法中，您只是从一个不是类的直接子`Object`类的匿名类创建一个新对象。

第二种方法的正确形式是这样的（至少这是 ecma 标准）：

```
var obj = new function() {
    var prop1 = value1;

    this.prop2 = value2;
}(); 
```

方法 2 和 3 之间的区别仅在于它们的继承链：（假设 obj2 来自 2nd 方法， obj3 来自 3rd 方法）

```
obj2.__proto__ == Object.prototype;  // false
obj3.__proto__ == Object.prototype;  // true 
```

obj2 是从匿名类本身创建的：

```
obj2.__proto__.__proto__ == Object.prototype;  // true (there's 2 level of inheritance here) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-09T08:25:38.490

还有：

```
var obj = Object.create({prop: ...}); 
```

这是通过设置原型来实现的。如果要让多个对象共享属性或方法，使用原型会更有效。

```
var proto = {foo: function() {}},
    obj1 = Object.create(proto),
    obj2 = Object.create(proto),
    obj3 = {foo: function() {}},
    obj4 = {foo: function() {}}; 
```

在这个例子中，obj1 和 obj2 共享一个在“proto”中定义的“foo”函数。同时，obj3 和 obj4 都有自己的“foo”。如果您正在创建具有大量属性的大量对象，这可能会对内存消耗甚至性能产生很大影响。

如果您使用命名函数并在使用 new 之前将属性分配给函数的原型（例如：f.prototype.prop），则可以通过使用“new”关键字来共享此好处。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-19T16:29:15.690

**方法 1**
这是一个单一的对象，没有类，如果它很复杂，你不能定义更简单

```
var obj = {
   prop: value
} 
```

**方法 2**
一个非匿名函数。它将从“类”中创建一个对象，正常情况下该函数被保存为一个类名，并且可以轻松地创建多个相同类型的对象，如下所示：

```
var Bycicle= function() {
    var prop1 = value1;

    this.prop2 = value2;
}
var obj1 = new Bycicle(),
    obj2 = new Bycicle(); 
```

**方法3**
一个匿名函数，来自函数外部的变量不能干扰函数内部的变量：

```
var a = 10;
var obj = (function() {
    alert(a); // Alerts undefined
    var prop1 = value1;
    alert(prop1); // alerts the value of value1
    return {
        prop2: value2;
    }
})(); // Within the () you can pass arguments to the anonymous function. 
```

更多关于匿名函数：[http ://helephant.com/2008/08/23/javascript-anonymous-functions/](http://helephant.com/2008/08/23/javascript-anonymous-functions/)

**其他方法**
还有`Object.create()`一个`new Object()`创建新对象的方法，它们都与方法 1 相同。

**结论**
最后，除了第三个之外，对象总是相同的，因为它是匿名的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-19T16:28:21.500

您的问题应该是 2 种方法，因为**方法 3**与**方法 1**完全相同，只是通过自我执行功能来创建方法。

关于创建像**方法 1**这样的对象时的区别，您可以将其视为像 java 中只有静态函数的对象。所以它总是活着的，你不会用它做实例（类似于单例） - 所以当你制作这个对象时：

```
var obj = {
    prop: value,
    func: function(){
     alert(this.prop);
    }
}; 
```

您可以立即调用它：

```
obj.prop = 'something else';
obj.func(); 
```

**方法 2**（没有新的，就像你得到的评论一样）是一个经典的对象，你可以创建实例 - 使继承（使用 js“技巧”）等等：

```
function Person(firstName,lastName){ // or var Person = function(...
   this.firstName = firstName;
   this.lastName= lastName;

   this.getFullName = function(){
      return this.firstName + ' ' + this.lastName;
   }
}

//use
var person1 = new Person('yair','lapid');
var person2 = new Person('Naftali','Bennet');

you can put it in an array etc...
var arr = [person1,person2, new Person('shelly','yekimovits')]; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-01-07T07:13:17.687

我一直在使用 JS 并想发布一些答案，我希望它对其他人也有帮助：

1）**对象文字**：您在创建对象时将其写出

```
var person = {
  name: ['Bob', 'Smith'],
  age: 32,
  gender: 'male',
  interests: ['music', 'skiing'],
  bio: function() {
    alert(this.name[0] + ' ' + this.name[1] + ' is ' + this.age + ' years old. He likes ' + this.interests[0] + ' and ' + this.interests[1] + '.');
  },
  greeting: function() {
    alert('Hi! I\'m ' + this.name[0] + '.');
  }
}; 
```

用途：当您想将数据传输到服务器时

2）**构造函数：** 当你想创建多个相同的对象时使用构造函数。

```
function Vehicle(name, maker) {
  this.name = name;// Every function while executing has a reference         
            this.maker = maker;// to its current execution context called as this
}
let car1 = new Vehicle(’Fiesta’, 'Ford’);// New keyword with function turns function call into constructor call
let car2 = new Vehicle(’Santa Fe’, 'Hyundai’);

console.log(car1.name);    //Output: Fiesta
console.log(car2.name);    //Output: Santa Fe 
```

3)**使用 create 方法创建 Javascript 对象**

Object.create() 允许创建具有更多属性选项的对象，例如值、可配置、可枚举和可写。创建一个新对象，扩展作为参数传递的原型对象

```
let car = Object.create(Object.prototype,{
   name:{
     value: 'Fiesta',
     configurable: true,
     writable: true,
     enumerable: false
   },
   maker:{
     value: 'Ford',
     configurable: true,
     writable: true,
     enumerable: true
   }});
console.log(car.name)    //Output: Fiesta 
```

原型：每个对象都由构造函数构建。构造函数使对象链接到自己的原型原型是构造函数和对象之间的任意链接。

4)**使用 ES6 类创建 Javascript**

```
class Vehicle {
 constructor(name, maker, engine) {
   this.name = name;
   this.maker =  maker;
   this.engine = engine;
 }
}

let bike1 = new Vehicle('Hayabusa', 'Suzuki', '1340cc');
let bike2 = new Vehicle('Ninja', 'Kawasaki', '998cc');

console.log(bike1.name);    //Output: Hayabusa
console.log(bike2.maker);   //Output: Kawasaki 
```

5) **使用对象构造函数**

```
var d = new Object(); 
```

创建空对象的最佳方法。

[注意：我已经编译了这个链接https://codeburst.io/various-ways-to-create-javascript-object-9563c6887a47](https://codeburst.io/various-ways-to-create-javascript-object-9563c6887a47)中的大部分内容

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-19T16:24:17.830

对于一次性对象，方法 2 和 3 之间没有太大区别。（如果您要命名方法 2 中使用的函数，您将定义一个可重用的构造函数。）我的印象是方法 3 更常用于这些情况，但我看不出它们之间有很大的区别。

应该注意的是，方法 2 和 3 都可以带参数：

```
var approach2Obj = new function(formalArg) {
    var privateProp = ...;
    this.publicProp = ...;
    // more constructor logic
)(actualArg);

var approach3Obj = (function(formalArg) {
    var privateProp = ...;
    // more creation logic
    return {
        publicProp : ...;
    };
}(actualArg)); 
```

PS 正如[@Alexey Lebedev 在他的回答中指出的那样](https://stackoverflow.com/a/16109421/535871)，两者之间的一个区别（也许是唯一的一个）是`approach2Obj.constructor`并且`approach3Obj.constructor`将会有所不同。`approach3Obj.constructor`将是相同的`Object`，而`approach2Obj.constructor`将是匿名函数。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-19T16:33:00.000

为了理解方法 2，读者需要了解一些有关新关键字工作方式的技术性知识。具体来说，它将实际调用匿名函数作为构造函数，而不是实例化一个新的函数对象并将其转储到 obj 变量中。

为了理解方法 3，读者只需要理解 IIFE 模式。在过去的两年中，这种模式在 javascript 代码中变得非常普遍，这可能就是为什么该版本更常用的原因。

两个版本都用于产生封装，并且两个版本都需要了解复杂的语言特征才能理解。然而，方法三所需的语言特征比理解方法二所需的语言特征更常见。这就是为什么方法三在野外更常用的原因。

# html - table alignment when creating table using divs?

> ID：16109111
> 
> 赞同：1
> 
> 时间：2013-04-19T16:18:02.393
> 
> 标签：html, css, css-tables

I have a table which is created using Divs and as my columns grew its hard to recognize if it was a table or something else?

**What i want**

I want all columns in each row to be aligned to another irrespective of width? Just like a normal table ![enter image description here](https://i.stack.imgur.com/FpTzw.png)

**What I have**

```
<div class="tabularStructure">  
<div id="token1">
    <div class="cell">
         <label><bdi>${PredefinedSearch_Label}</bdi></label>
    </div>
    <div class="cell">
         <select id="predefineSrch">
            <option value="default">(None)</option>
        </select>   
    </div>

    <div class="cell">&nbsp;
    </div>
    <div class="cell">&nbsp;
    </div>
    <div class="cell">&nbsp;
    </div>
    <div class="cell">&nbsp;
    </div>
    <div class="cell">&nbsp;
    </div>
    <div class="cell">&nbsp;
    </div>

</div> 
```

```
 <div class="spacer">&nbsp; </div>

   <div class="tabularStructure">   
<div  id="token2">
    <div class="cell">
    <label><bdi>${Date_Label}</bdi></label>
    </div>
    <div class="cell">
        <select id="date">
             <option value="default">(None)</option>
        </select>
    </div>

    <div class="cell" id="token3">
        <label><bdi>${DayRange_Label}</bdi></label>
    </div>
    <div class="cell">
        <select id="dayRange">
             <option value="default">(None)</option>
        </select>
    </div>

    <div class="cell" id="token5">
        <label for="idFromDate"><bdi>${From_Label}</bdi></label>
    </div>
    <div class="cell">
        <input type="text" id="idFromDate" name="toDate" class="date" />
    </div>

    <div class="cell" id="token4">
        <label for="idToDate"><bdi>${To_Label}</bdi></label>
    </div>
    <div class="cell">
        <input type="text" id="idToDate" name="to" class="date" />
    </div>
        </div>
             </div> 
```

**Check the fiddle for full code** [Fiddle](http://jsfiddle.net/ZEHSB/)

# ruby-on-rails - rails 4中的虚拟属性

> ID：16109118
> 
> 赞同：10
> 
> 时间：2013-04-19T16:18:28.883
> 
> 标签：ruby-on-rails, ruby-on-rails-4, attr-accessor, virtual-attribute

如何在 rails 4 中使用虚拟属性（getter、setter），因为删除了“attr_accessible”。

我遇到问题，在这里

```
 def tags_list
    @tags = self.tags.collect(&:name).join(', ')
  end 
```

尝试更新/创建时，我可以达到上述方法，但无法达到下面的设置器。

```
 def tags_list=(tags)
    @tags = tags
  end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-03T22:47:59.397

在 Rails 4 中使用虚拟属性与使用 attr_accessible 几乎相同。您只需将虚拟属性添加到控制器中允许的参数（而不是 attr_accessible），然后像往常一样在模型中添加 getter 和 setter 方法。

```
# your_controller.rb
private

def your_model_params
  params.require(:your_model_name).permit(:tags_list)
end 
```

# c# - 数据成员验证 - ISO 4217（货币）和 639-1（语言）

> ID：16109121
> 
> 赞同：1
> 
> 时间：2013-04-19T16:18:40.227
> 
> 标签：c#, .net, iso, model-validation

因此，我希望对我目前正在处理的 .NET 项目中的某些模型进行一些自定义数据字段验证。

这些涉及默认语言和默认货币。为了满足此应用程序以及所涉及的各种其他应用程序和服务的标准，货币需要是 ISO 4217（3 字符货币）标准，语言需要是 ISO 639-1（2 字符语言）。

*看到在任何地方都*没有为此进行模型验证，我很高兴设置它，在我开始制作一些巨大的自定义数据验证器之前，我想知道是否有人知道任何现有的库可以随时提供这些标准，甚至如果它类似于检查我可以自己插入数据验证器的字符串。

任何意见和/或建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-03T12:45:30.940

好的，所以我找到了一个可行的解决方案。这有点不雅，但它有效。

ISO 639-1（2 字符语言）代码可作为 System.Globalization 命名空间中 RegionInfo 对象的 TwoLetterISORegionName 属性找到。

ISO 4217（3 个字符的货币）代码可以在同一对象的 ISOCurenySymbol 属性中找到。

要创建区域信息，请使用：

```
new RegionInfo(Int32) 
```

其中 int 是文化标识符

要生成文化标识符列表，使用起来非常简单

```
System.Globalization.CultureInfo.GetCultures(CULTURETYPE) 
```

其中 CULTURETYPE 是各种文化类型的枚举或各自的数字（请务必选择不包含中性文化的一种，因为这些文化无法正确映射）。这将返回一个 CultureInfo 对象数组，每个对象都包含一个 LCID 属性。此属性可用于构造相应的 RegionInfo，您可以从那里获取所需的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-30T10:03:03.160

我自己也遇到过同样的问题，我认为您的问题也可以通过我找到的这些资源来解决。

此源教我们如何查找与ISO 4217 格式的货币代码关联的**CultureInfo对象。**

[http://eddietech.blogspot.com.es/2008/01/find-cultureinfo-by-iso-currency-code.html](http://eddietech.blogspot.com.es/2008/01/find-cultureinfo-by-iso-currency-code.html)

对于这些对象中的每一个（可以有多个文化使用相同的货币代码），您可以读取关联 ISO 639-1 格式语言代码的**TwoLetterISOLanguageName**属性。

您还可以阅读每个 CultureInfo 对象的 Name 属性，您可以在其中找到该文化的“(ISO 639-1)-(ISO 3166)”（每个代码长度为 2 个字母）（例如：“es-ES”、“ en-GB”等）。

可以在[此处](http://en.csharp-online.net/index.php?title=Localization_Like_the_Pros%E2%80%94Cultures_in_Action)找到在 C# 中涵盖此主题的另一个重要资源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-23T14:34:07.440

由 Kira Namida 的回答开始：

撒上一点 Linq，这将是系统上已知的所有已知 ISO 4217 字符的列表：

```
using System.Globalization;
using System.Linq;

IEnumerable<string> currencySymbols = CultureInfo.GetCultures(CultureTypes.SpecificCultures) //Only specific cultures contain region information
    .Select(x => (new RegionInfo(x.LCID)).ISOCurrencySymbol)
    .Distinct()
    .OrderBy(x=>x) 
```

# requirejs - requirejs 初始化方法在其他一切之前运行

> ID：16109125
> 
> 赞同：1
> 
> 时间：2013-04-19T16:18:47.297
> 
> 标签：requirejs, momentjs

我正在使用 require.js 和 moment.js 并希望在加载任何模块之前全局设置语言。但是，我似乎找不到合适的方法来运行保证首先运行的 init 方法。

即在我的 main.js 中

```
requirejs(['mymodule'], function(mymodule) {
  moment.lang('fr'); // This gets run second, but I want it to get run first
  mymodule.printMonth();
}); 
```

mymodule.js：

```
define(function() {
  var string = moment().format('MMMM'); // This gets run first

  ...
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:36:36.607

要么在你的模块中[返回一个](http://requirejs.org/docs/api.html#funcmodule)你在 moment.lang() 之后调用的函数，要么使用一个帮助模块来加载具有正确配置的时刻。

```
define(["moment"], function (moment) {
    moment.lang('fr');
    return moment;
}); 
```

# elasticsearch - NEST中的地理距离范围过滤器？

> ID：16109135
> 
> 赞同：8
> 
> 时间：2013-04-19T16:19:33.403
> 
> 标签：elasticsearch, nest

如何使用 NEST应用[地理距离范围过滤器？](http://www.elasticsearch.org/guide/reference/query-dsl/geo-distance-range-filter/)好像是这样的

```
var results = client.Search<MyDataType>(s => s
.Filter(m => m.GeoDistance(c => c.Location, f => f.Distance(100, GeoUnit.mi))); 
```

但是我如何传递目标位置的长/纬度？

（类似的问题已[被问到](https://stackoverflow.com/questions/7855635/how-is-elasticsearch-queried-using-the-java-client)Java 客户端）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T20:24:49.543

Answering my own question. This works:

```
var results = client.Search<MyDataType>(s => s
.Filter(m => m.GeoDistance(
  c => c.Location, 
  f => f.Distance("100 mi").Location(40.7, -74.0))); 
```

After some debugging, I suspect that `f.Distance(100, GeoUnit.mi)` didn't work due to a bug in NEST.

# c++ - 在 C++ 中构建和填充 gui 网格

> ID：16109136
> 
> 赞同：1
> 
> 时间：2013-04-19T16:19:56.473
> 
> 标签：c++, grid, sudoku

使用 GUI。

我很感激很多人问如何开始使用 Windows GUI。我已经编写了一个 C++ 数独求解器作为命令行代码（如果有人愿意，很乐意分享）。

我可以要求一些关于在 gui 窗口中设置和填充带有数字的网格的指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:26:22.430

看看Qt：http: [//qt-project.org/](http://qt-project.org/)，

它是一个功能强大且易于使用的框架，可以有效地创建和维护 GUI 应用程序。您可以使用 Qt 创建用于显示/用户交互的 ui，并将您的命令行求解器与它集成...

# java - 将类成员复制到其他类 - eclipse

> ID：16109137
> 
> 赞同：3
> 
> 时间：2013-04-19T16:20:01.277
> 
> 标签：java, eclipse, class, refactoring

![一种将方法移动到另一个类的方法](https://i.stack.imgur.com/b8o7Z.png)

当您需要将某些类功能移动到另一个类时，可以通过一些公共变量（Ctrl+Shift+G）的引用搜索相应的方法，然后使用 Eclipse 的重构功能“Move”来轻松完成，该功能允许移动选定的方法进入其他班级。

但也可能发生您需要复制方法。例如，如果您在其他类中需要非常相似的功能 - 稍微改变一下这些复制的方法比从头开始编写要舒服得多。

*   一个一个地复制粘贴方法体不是最方便的方法..
*   创建一个重复的类，然后使用上面提到的“方法移动”，感觉也有点愚蠢。

**你会/你会怎么做？**

PS。请不要思考和谈论代码重复问题，我绝对不会在两种不同的方法中拥有共同的功能。只需将其视为将一批方法从 A 类复制到 B 类的挑战。无论出于何种原因。屏幕截图只是“移动”功能的说明。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:35:38.317

*   在大纲视图中选择一种或多种方法并复制它们（它会复制整个方法）。
*   打开您希望复制方法的其他类。导航到大纲视图并右键单击类名 -> 粘贴。方法的主体被成功复制到另一个类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:31:07.387

理想情况下，您应该重构原始方法，编写更多方法来移动无需任何更改即可使用的通用功能。在您要应对的地方和要粘贴的地方使用这些常用方法。

这样，您的应用程序将具有良好的代码可重用性，并且您也不必重复编写常见功能的单元测试（如果这是您可能的用例之一）

编辑：除了 Alt+Shift+V，Eclipse 还具有“上拉”和“下推”功能，以满足分层代码结构情况下方法重用的需求

# try-catch - 无法从 sp_send_dbmail 捕获错误

> ID：16109138
> 
> 赞同：2
> 
> 时间：2013-04-19T16:20:06.950
> 
> 标签：try-catch, sp-send-dbmail

我们使用 sp_send_dbmail 来通知我们某些问题，有时我们会在电子邮件中附加文件。有时我们会收到错误 32（正在使用的文件）错误。在这种情况下，我已经将一些代码放在一起发送没有附件的电子邮件，但无论我做什么，我都无法捕捉到错误并忽略它。

我希望能够处理或忽略来自 sp_send_dbmail 的任何错误，因为这会导致生产中的作业失败。

我尝试实现本文[http://www.sqlusa.com/articles2008/trycatch/](http://www.sqlusa.com/articles2008/trycatch/)中描述的技术，如下所示：

```
CREATE PROC dbo.sp_send_email
(
    @recipients         VARCHAR(100),
    @body               VARCHAR(max),
    @subject            VARCHAR(100),
    @file_attachments   VARCHAR(100)=''
)
AS
BEGIN
DECLARE @retcode INT

BEGIN TRY
    EXEC @retcode = msdb.dbo.sp_send_dbmail 
        @recipients=@recipients,
        @subject =@subject,
        @body= @body,
        @file_attachments=@file_attachments
    PRINT '@@ERROR: ' + CONVERT(VARCHAR, @@ERROR)
    PRINT 'Retcode ONE: ' + CONVERT(VARCHAR, @retcode)

    IF @retcode <> 0
        EXEC @retcode = msdb.dbo.sp_send_dbmail 
            @recipients=@recipients,
            @subject =@subject,
            @body= @body
END TRY

BEGIN CATCH
    SELECT ERROR_MESSAGE() "sp_send_dbmail: Error Description",ERROR_SEVERITY()"Error Severity"
END CATCH

RETURN @retcode

END
GO

CREATE PROCEDURE dbo.sp_test_send_email
AS
BEGIN
DECLARE @retcode INT

BEGIN TRY
    EXEC @retcode = dbo.sp_send_email @recipients='me@somewhere.com', @subject='Test Mail', @body='This is a test', @file_attachments='C:\temp\stage\test.txt'
END TRY
BEGIN CATCH
    SELECT ERROR_MESSAGE() "sp_test_send_email: Error Description",ERROR_SEVERITY()"Error Severity"
END CATCH

RETURN @retcode
END
GO

BEGIN TRY
    DECLARE @retcode INT
    EXEC @retcode = dbo.sp_test_send_email
    PRINT 'Retcode: ' + CONVERT(VARCHAR, @retcode)
END TRY
BEGIN CATCH
    SELECT ERROR_MESSAGE() "test: Error Description",ERROR_SEVERITY()"Error Severity"
END CATCH 
```

这是返回的内容：

消息 22051，级别 16，状态 1，第 0 行无法打开附件文件“C:\temp\stage\test.txt”。执行 API 'CreateFile' 失败，错误号为 32。@@ERROR: 0 Retcode ONE: 1 Mail (Id: 11) queued。转码：0

电子邮件确实已发送，但 Msg 22051 从未被捕获。这就是导致生产失败的原因。

这可能是它的方式：[http ://connect.microsoft.com/SQLServer/feedback/details/687544/2008-sp1-engine-sp-send-dbmail-does-not-fall-into-a-catch-正确阻止](http://connect.microsoft.com/SQLServer/feedback/details/687544/2008-sp1-engine-sp-send-dbmail-does-not-fall-into-a-catch-block-properly)

但是，如果我缺少某些东西并且有办法从 sp_send_dbmail 中获取错误，我肯定想知道如何。

谢谢，

射线

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T21:19:23.620

在此处查看 sp_send_dbmail 的文档：http: [//msdn.microsoft.com/en-us/library/ms190307.aspx](http://msdn.microsoft.com/en-us/library/ms190307.aspx)

请注意，您应该使用 sp_send_dbmail 的返回码，而不是 try/catch：

> 返回代码值
> 
> * * *
> 
> 返回码 0 表示成功。任何其他值都意味着失败。失败语句的错误代码存储在@@ERRROR 变量中。
> 
> 结果集
> 
> * * *
> 
> 成功时，返回消息“邮件排队”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-13T12:04:01.883

我使用 SQLServer 2008R2。我总是将 0 作为返回值或引发错误。

例如，当我使用不存在的配置文件时，我将获得以下信息：

ERROR_NUMBER() = 14607 ERROR_MESSAGE() = '配置文件名称无效'

我认为这比检查返回值本身更有用。

托梅克

# zeromq - zmq - 何时使用 zmq_bind 或 zmq_connect

> ID：16109139
> 
> 赞同：18
> 
> 时间：2013-04-19T16:20:10.737
> 
> 标签：zeromq

参考[http://hintjens.wdfiles.com/local--files/main:files/cc1pe.pdf](http://hintjens.wdfiles.com/local--files/main:files/cc1pe.pdf) 第22页分而治之

```
 Ventilator[PUSH]
        ___________________|____________________             
        |                  |                   |
[PULL]Worker[PUSH] [PULL]Worker[PUSH]  [PULL]Worker[PUSH]
        |__________________|___________________|             
                           |                   
                     [PULL]Sink

// taskvent.c
    //  Socket to send messages on
    void *context = zmq_ctx_new ();
    void *sender = zmq_socket (context, ZMQ_PUSH);
    zmq_bind (sender, "tcp://*:5557");

    //  Socket to send start of batch message on
    void *sink = zmq_socket (context, ZMQ_PUSH);
    zmq_connect (sink, "tcp://localhost:5558");

// taskwork.c
    //  Socket to receive messages on
    void *context = zmq_ctx_new ();
    void *receiver = zmq_socket (context, ZMQ_PULL);
    zmq_connect (receiver, "tcp://localhost:5557");

    //  Socket to send messages to
    void *sender = zmq_socket (context, ZMQ_PUSH);
    zmq_connect (sender, "tcp://localhost:5558");

// tasksink.c
    //  Prepare our context and socket
    void *context = zmq_ctx_new ();
    void *receiver = zmq_socket (context, ZMQ_PULL);
    zmq_bind (receiver, "tcp://*:5558"); 
```

我对何时使用 zmq_bind 或 zmq_connect 感到困惑。它说大多数时候“服务器”使用 zmq_bind 而“客户端”使用 zmq_connect。

Question> 什么时候应该使用zmq_bind，什么时候应该使用zmq_connect？

[http://api.zeromq.org/](http://api.zeromq.org/)

```
zmq_bind - accept incoming connections on a socket  
zmq_connect - create outgoing connection from socket 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-19T19:23:26.477

有一些基本原则可以绑定和连接。一般来说，zeromq 并不关心*，它只是取决于你什么更方便。

对于将相互通信的给定套接字对，这里有几个问题要问以确定哪个应该绑定和哪个应该连接：

1.  其中一个进程是否比另一个进程寿命更长（即一个进程开始、做某事、停止，而另一个进程则坐下来运行很长时间）？如果是这样，寿命较长的应该绑定。
2.  您是否有一侧或另一侧的多个实例？如果是这样，则不是多个（或具有较少实例）的那个应该绑定，因为要跟踪的 URL 更少。

这些主要是为了更容易管理 URL 和连接。在通风口/水槽示例中，只有一个呼吸机和一个水槽，但可以有任意数量的工作人员（零对多）。如果水槽和通风口都绑定，那么他们不需要知道工人来来去去。只有两个 URL 需要跟踪，而如果 worker 绑定，您必须跟踪每个新工作者的 URL，并在每次新工作者到达时告诉 sink 和/或发泄有关新 URL。

*它实际上在某些边缘情况下可能很重要，但通常不是。

# javascript - 未捕获的类型错误：类型错误，在外部脚本中

> ID：16109142
> 
> 赞同：0
> 
> 时间：2013-04-19T16:20:24.240
> 
> 标签：javascript, html, syntax-error, photo, object-detection

因此，我尝试使用一个名为 photobooth 的 JavaScript 拍照应用程序，并尝试检测人脸何时进入 photobooth 应用程序的屏幕，并让它在控制台中输出人脸的坐标。

但是，每当我似乎将其设置正确时，我会在外部脚本中显示“未捕获的 TypeError：类型错误”，即下图中的 object_detect.js：

链接到图像------>[未捕获的类型错误](http://i.stack.imgur.com/fFXxl.png)

现在这是我的 javascript 代码如下所示：**（注意：示例是照相亭的 div id）

```
 var video = $("#example").get(0);

            $(video).objectdetect("all", {scaleMin: 3, scaleFactor: 1.1, classifier: objectdetect.frontalface}, function(coords) {
                if (coords[0][1] > 80 && coords[0][1] < 170) {                          
                    //console.log(objectdetect.length);         
                        console.log ( coords[0]);

                }
            }); 
```

这是对象检测 html 示例的链接（如果您在本地托管它，它可以工作）：[对象检测](https://github.com/mtschirs/js-objectdetect/blob/master/examples/example_sunglasses_jquery.htm)

关于我做错了什么的任何想法？

# json - AngularStrap typeahead 与对象类型

> ID：16109147
> 
> 赞同：2
> 
> 时间：2013-04-19T16:20:41.827
> 
> 标签：json, twitter-bootstrap, angularjs, angularjs-directive

我正在使用 angular.js/angularstrap`[{'name': 'name1', 'code': 'code1'}, {'name': 'name2', 'code': 'code2']`从远程源获取格式的元组列表。现在，如果能够结合名称和代码来预先输入自动完成功能，那就太好了。即查询“name1”应该获取第一个对象，“code2”应该返回第二个对象。

另外，我想用所选对象的值更新两个单独的字段。

[这个问题与Typeahead using object name](https://stackoverflow.com/questions/16017531/typeahead-using-object-name)非常相似，但我无法让它与远程源一起工作。我是 angular.js 的新手，我真的很想提出一个解决方案，而不是退回到 jQuery。

现在我的控制器中有以下内容：

```
$scope.typeaheadFn = function(query, callback) {
    $http.get('/autocomplete?term='+query).success(function(items) {
        callback(items);
    });
} 
```

，但这失败了，因为列表*项*是非字符串对象的列表。我的 HTML 看起来像：

```
<input bs-typeahead="typeaheadFn" id="id_search" name="search" ng-model="search"  type="text"> 
```

和：

```
<input type="text" value="{| search.code |}" disabled="disabled" placeholder="Code" />
<input type="text" value="{| search.name |}" disabled="disabled" placeholder="Name" /> 
```

任何指针？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:53:39.473

我认为 typeahead 指令不能开箱即用地支持这一点。您可以通过缩减`items`为一个简单的数组并将缩减后的数组传递给`callback`. 如果你以后真的需要这些对象，你可以`$scope.storedItem = items`.

# python - 如何使用 tweepy 只返回一条推文

> ID：16109148
> 
> 赞同：0
> 
> 时间：2013-04-19T16:20:42.627
> 
> 标签：python, twitter, tweepy

我对tweepy很陌生，现在下面的代码只将结果输出到屏幕上，但我想做的是：将每个结果传递给变量：

例如：

```
tweet = Twitter().start() 
print tweet
>> justinbieber 
```

所以我的问题是我不知道如何一次返回一个值。

现在我有了这个，下面的代码将永远存在，在我按下 Ctrl + C 后它不会将结果存储在 tt 中：

```
>>> import twitter_streaming_tweepy as t
>>> tt = t.Twitter().start()
alwaysupportjus
Madam_Rauhl 
```

这是代码：

```
import sys
import tweepy

output = []

class CustomStreamListener(tweepy.StreamListener):

    def on_status(self, status):
        try:
            print status.author.screen_name
            output.append(status.author.screen_name)

        except Exception, e:
            print >> sys.stderr, 'Encountered Exception:', e
            pass

    def on_error(self, status_code):
        print >> sys.stderr, 'Encountered error with status code:', status_code
        return True # Don't kill the stream

    def on_timeout(self):
        print >> sys.stderr, 'Timeout...'
        return True # Don't kill the stream

class Twitter():

    def __init__(self):

        consumer_key="*******"
        consumer_secret="*******"
        access_key = "*******"
        access_secret ="*******"

        self.auth = tweepy.OAuthHandler(consumer_key, consumer_secret)
        self.auth.set_access_token(access_key, access_secret)
        self.api = tweepy.API(self.auth)

    def start(self):
        l = CustomStreamListener()
        stream = tweepy.streaming.Stream(self.auth,l)
        stream.filter(follow=None, track=['justinbieber'])
        return output

if __name__ == "__main__":
    Twitter().start() 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T19:05:38.027

在类中创建一个名为“tweet”的变量，并使用 on_status 事件将接收到的对象发送到使用 this.tweet = status 的变量。

作为性能提示，如果您逐个处理状态，这将导致程序从 Twitter 延迟，并且 Twitter 会切断您的流。确保列表或队列在另一个线程中将推文作为批处理处理。

玩得开心。

# javascript - 刷新页面时导航到错误的选项卡

> ID：16109154
> 
> 赞同：-1
> 
> 时间：2013-04-19T16:21:02.837
> 
> 标签：javascript, html

我有一个包含两个主要选项卡、设备和报告的页面。每次刷新页面时，页面都会显示报告信息（假设显示设备信息）。当我直接将 html 文件翻倍或使用 window.location =url 时，这也适用。

示例js代码

```
$(document).ready(function () {
      $('#mainpage').click(function (e) {
        e.preventDefault();
        window.location = "main.html";

      });
    }); 
```

可能的原因有哪些？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:36:31.663

继续 fotanus 在她的回答中提出的建议，您还可以：

*   **选项 3**：使用 cookie 记录页面状态以防页面重新加载
*   **选项 4**：使用两个相互关联的页面，每个选项卡一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:30:37.633

当你重新加载一个页面时，你的标签的样式和css都没有保留，就像你第一次进入它一样。因此，如果您重新加载这样的页面，您将无法保持页面的当前状态。

由于您的问题非常笼统，我会给您两个解决方法的想法，您可以自己学习。

*   **选项 1**：与 url 一起发送一个 get 参数，并在刷新页面时显示正确的 div
*   **选项 2**：重新加载 AJAX 调用所需的内容。

# jasper-reports - iReport 中的日期操作

> ID：16109157
> 
> 赞同：2
> 
> 时间：2013-04-19T16:21:15.250
> 
> 标签：jasper-reports, ireport

我有日期时间列，其数据如下：2013-04-19 23:44:27.357

在*iReport*中，我使用表达式`new SimpleDateFormat("h:mma").format($F{domain_datetime})`仅显示时间。

在上面的表达式中，我想说如果时间大于 23:59，那么我不想显示时间，而是显示一天，例如 13 年 3 月 5 日，否则显示时间。

怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:04:26.007

如果您不关心超过几秒钟的信息，而只是想将任何格式转换 `12:00AM`为日期，则可以将当前表达式替换为：

```
(new SimpleDateFormat("h:mma").format($F{domain_datetime}).equals("12:00AM")) ? 
new SimpleDateFormat("dd MMM yy").format($F{domain_datetime}) : 
new SimpleDateFormat("h:mma").format($F{domain_datetime}) 
```

现在这有效，但它`SimpleDateFormat`为表达式创建了 3 个新实例，当只有 2 个或需要时（我也很想知道它是否会`SimpleDateFormat`为每行创建 3 个新对象，但我不知道是否是这种情况） . 所以在我看来，这可以改进一些。

在您的报告中创建两个新参数，它们将是`SimpleDateFormat`实例。他们的 XML 应该如下所示：

```
<parameter name="TIME_FORMAT" class="java.text.SimpleDateFormat" isForPrompting="false">
    <defaultValueExpression><![CDATA[new SimpleDateFormat("h:mma")]]></defaultValueExpression>
</parameter>
<parameter name="DATE_FORMAT" class="java.text.SimpleDateFormat" isForPrompting="false">
    <defaultValueExpression><![CDATA[new SimpleDateFormat("dd MMM yy")]]></defaultValueExpression>
</parameter> 
```

它们具有日期格式化程序的默认值，我们可以在表达式中引用它们。所以现在我们可以将表达式重写为：

```
($P{TIME_FORMAT}.format($F{domain_datetime}).equals("12:00AM")) ? 
$P{DATE_FORMAT}.format($F{domain_datetime}) : 
$P{TIME_FORMAT}.format($F{domain_datetime}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:58:35.117

如果您使用的是 JRBeanCollectionDataSource，为什么不在用于填写报告的查询或 Java 中执行此操作？这样你只需要显示一个文本，不管它是什么

# c# - Windows Phone Market 1 App 2 XAPS 版本 7.8 和 8 可以吗？

> ID：16109163
> 
> 赞同：0
> 
> 时间：2013-04-19T16:21:33.017
> 
> 标签：c#, windows-phone-8, windows-phone-7.8

假设我正在创建一个我希望每个人都能享受的应用程序。所以我推出了7.8版本。但是，在 8 版本中，我只想实现 8 个 api 功能。您应该如何将其提交给市场？我应该使用多个应用程序进行一次提交吗？两个单独的提交？还是这种做法不大声？请将尖刻的评论保留一分钟。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:27:50.760

根据 Bernardo Zamora 的这篇博客，开发中心确实允许针对不同版本的 Windows Phone 操作系统的多个 XAP 文件。

[http://blogs.windows.com/windows_phone/b/wpdev/archive/2013/01/15/app-submission-tips-for-windows-phone-7-and-windows-phone-8.aspx](http://blogs.windows.com/windows_phone/b/wpdev/archive/2013/01/15/app-submission-tips-for-windows-phone-7-and-windows-phone-8.aspx)

# python - Django admin datetime`now`按钮选择正确的本地时间，但错误的服务器时间

> ID：16109167
> 
> 赞同：1
> 
> 时间：2013-04-19T16:21:41.493
> 
> 标签：python, django, time, nginx

晚上所有，

当您单击`now`Django 管理员 DateTimeField 选择器小部件时，它会用一些 javascript 填充当前时间。

但是，我的服务器是 UTC，我的客户端是 UTC+1（英国夏令时，最具讽刺意味的时区）。

因此，当我单击 时`now`，我会在框中看到 17:16。现在在服务器上**不是**正确的时间，即 16:16。因此，从我的系统的角度来看，用户现在创建的模型看起来已经有一个小时了。

有没有正确的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T12:12:56.453

您可以[将所有数据存储在 UTC 中](https://bugzilla.mozilla.org/show_bug.cgi?id=452353)，并将客户端转换为该时区的正确时间以进行显示，并转换为 UTC 进行存储吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:21:41.493

我建议它可能工作的方式是使用服务器时间，由[标头](https://stackoverflow.com/questions/220231/accessing-http-headers-in-javascript)提供：

`Date: fri, 19 apr 2013 16:16:00 gmt`

但是，页面打开的时间越长，它就越不正确，所以这不是一个很好的答案......

# spring - 尽管我正在使用@Transactional 注释，但得到“无法初始化代理 - 无会话”

> ID：16109170
> 
> 赞同：13
> 
> 时间：2013-04-19T16:21:46.003
> 
> 标签：spring, hibernate, transactions, lazy-initialization

我正在使用 Spring 3.1.1.RELEASE 和 Hibernate 4.1.0.Final。尽管我将相关的方法调用包装在 @Transactional 注释中，但我收到“无法初始化代理 - 无会话”异常。这是我的方法……</p>

```
@Service("teacherImportService")
public class TeacherImportServiceImpl extends AbstractmyprojectService 
{
    …
    @Transactional
    @Override
    public void saveUserObject(final JsonObject jsonData)  
    {
        …
        final myprojectOrganization myprojectOrg = myprojectOrgDao.findBymyprojectOrgId(myprojectSchoolId);
        final Organization school = myprojectOrg != null ? myprojectOrg.getOrg() : null;
            …
        final Address address = new Address();
        address.setState(school.getState());    // error occurs here 
```

我还需要做什么来保证交易发生？我在我的应用程序上下文中包含了“<tx:annotation-driven />”，我将其包含在下面

```
<context:component-scan base-package="org.mainco.subco" />
...
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${test.mysql.dataSource.driverClassName}" />
    <property name="url" value="${test.mysql.dataSource.url}" />
    <property name="username" value="${test.mysql.db.user}" />
    <property name="password" value="${test.mysql.db.password}" />
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="packagesToScan" value="org.mainco.subco" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter"/>
    </property>
    <property name="dataSource" ref="dataSource"/>
    <property name="jpaPropertyMap" ref="jpaPropertyMap" />
</bean>

<util:map id="jpaPropertyMap">
    <entry key="hibernate.show_sql" value="true" />
    <entry key="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" /> 
    <entry key="hibernate.cache.region.factory_class" value="org.hibernate.cache.ehcache.EhCacheRegionFactory"/>
    <entry key="hibernate.cache.provider_class" value="org.hibernate.cache.EhCacheProvider"/>
    <entry key="hibernate.cache.use_second_level_cache" value="true" />
    <entry key="hibernate.cache.use_query_cache" value="false" />
    <entry key="hibernate.generate_statistics" value="true" />
</util:map>

<bean id="sharedEntityManager" class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
   <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<tx:annotation-driven />

<jdbc:initialize-database data-source="dataSource">
    <jdbc:script location="classpath:truncate_tables.sql" />
    <jdbc:script location="classpath:db-test-data.sql" />
</jdbc:initialize-database> 
```

这是异常的完整堆栈跟踪...

```
org.hibernate.LazyInitializationException: could not initialize proxy - no Session
    at org.hibernate.proxy.AbstractLazyInitializer.initialize(AbstractLazyInitializer.java:149)
    at org.hibernate.proxy.AbstractLazyInitializer.getImplementation(AbstractLazyInitializer.java:195)
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:185)
    at org.mainco.subco.organization.domain.Organization_$$_javassist_30.getState(Organization_$$_javassist_30.java)
    at org.mainco.subco.myproject.service.TeacherImportServiceImpl.saveUserObject(TeacherImportServiceImpl.java:101)
    at org.mainco.subco.myproject.service.AbstractmyprojectService.saveUsers(AbstractmyprojectService.java:226)
    at org.mainco.subco.myproject.service.AbstractmyprojectService$$FastClassByCGLIB$$d080e416.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:618)
    at org.mainco.subco.myproject.service.TeacherImportServiceImpl$$EnhancerByCGLIB$$a06c7e9f.saveUsers(<generated>)
    at org.mainco.subco.myproject.service.TeacherImportServiceTest.testSaveTeachers(TeacherImportServiceTest.java:46)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T17:00:51.713

也许您忘记将事务注释添加到`AbstractmyprojectService.saveUsers()`

请注意，内部调用永远不会被代理，因此流程：

```
 TeacherImportServiceTest.testSaveTeachers() -> 
 AbstractmyprojectService.saveUsers() -> 
 TeacherImportServiceImpl.saveUserObject() 
```

如果`AbstractmyprojectService.saveUsers()`根本不是事务性的，则不会是事务性的。

**编辑**

阅读您的评论后，我看到了三个解决方案：

*   **将该方法提取`saveUsers()`到辅助类**。

非常简单，重构您的代码以将 Tx 方法保留在一个类中，并通过组合从另一个类中使用它。

*   **在`saveUserObject()`**.

例如，注入 txManager 和

```
public void saveUserObject() {
        DefaultTransactionDefinition def = new DefaultTransactionDefinition();
        def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRES_NEW);
        TransactionStatus status = txManager.getTransaction(def);
        try {
          // the code
        }
        catch (Exception ex) {
          txManager.rollback(status);
          throw ex;
        }
        txManager.commit(status);
    } 
```

*   **使用 AspectJ 代替 Spring AOP。**（我认为这个选项对于这个问题来说太复杂了。）

使用 AspectJ，您可以用 Aspect 替换 AOP 代理`AnnotationTransactionAspect`

使用`<tx:annotation-driven mode="aspectj"/>`并选择一种编织方法（编译或加载时间）。

对于加载时间编织，请参阅[http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/aop.html#aop-aj-ltw](http://static.springsource.org/spring/docs/3.0.5.RELEASE/reference/aop.html#aop-aj-ltw)

对于使用 maven 进行编译时编织，请参阅[Spring / @Transactional with AspectJ is完全忽略](https://stackoverflow.com/questions/15616710/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T05:24:48.580

在您的应用程序上下文 XML 中，我没有看到组件扫描配置，它可以让 Spring 管理带注释的立体类型 bean 类 [即，使用**@Service**、**@Repository**或**@Component**注释的类]

只需为以下示例中的任何此类添加包扫描：

```
<context:component-scan base-package="some.package.where.stereotypedclassesexist"/> 
```

关于 Spring 托管组件的类路径扫描，请参阅[此处](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s12.html)的 Spring 文档参考。

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T16:30:53.223

这可能与[代理实现模式](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/aop.html#aop-introduction-proxies)有关。尝试提取`saveUserObject`到一个界面：

```
public class TeacherImportServiceImpl extends AbstractmyprojectService implements SomeInterface {

    @Transactional
    @Override
    public void saveUserObject(final JsonObject jsonData)  {
        ...
    }

}

public interface SomeInterface {
   void saveUserObject(JsonObject jsonData);
} 
```

您也可以尝试使用 CGLIB 进行基于类的代理：

```
<tx:annotation-driven proxy-target-class="true" /> 
```

# r - 在循环中对数据进行子集化并将结果写入列表

> ID：16109178
> 
> 赞同：3
> 
> 时间：2013-04-19T16:22:06.100
> 
> 标签：r, loops, plyr, subset

我有包含五个变量的数据框。其中两个是公制测量，其中三个包含存储为因子的组。我尝试通过不同的组在一个循环中将该数据帧子集三次，并计算每个组的每个度量测量的平均值。结果可以存储为新列表中的新数据框。现在我使用`subset`和`ldply`从`plyr`包中。单个子集没有问题，但是当我尝试将循环的结果存储在向量中时，我收到一条警告消息，指出`number of items to replace is not a multiple of replacement length`. 可以在下面找到示例代码。任何帮助将非常感激！

```
df<-data.frame(a=c(1:5),b=c(21:25),group1=c("a","b","a","a","b"),group2=c("b","a","c","b","c"),group3=c("a","b","c","d","c"))

# single subset
llply(subset(df,group1=="a")[1:2],mean)

# subset for all groups
# create grouplist
grouplist<-colnames(df[3:5])
# create vector to store results
output.vector<-vector()

# create loop
for (i in grouplist)output.vector[i]<-ldply(subset(df,grouplist=="a")[1:2],mean)

output.vector

Warning messages:
1: In output.vector[i] <- ldply(subset(df, grouplist == "a")[1:2],  :
  number of items to replace is not a multiple of replacement length 
```

因此列表中一项的输出如下所示：

```
output.vector$group1
         |a|    | b|
|a|     |2.67|  |3.5|
|b|     |22.7|  |23.5|

output.vector$group2
     |a|    | b|    |c|
|a|  |2|    |2.5|   |4|
|b|  |22|   |22.5|  |24|

output.vector$group3
     |a|     |b|    |c|    |d|
|a|  |1|     |2|    |4|    |4|
|b|  |21|    |22|   |24|   |14| 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:49:30.993

基本包中的另一个选项使用`by`and `colMeans`，并循环通过组列：

```
 id.group <- grepl('group',colnames(df))
 lapply(df[,id.group],
       function(x){
         res <- by(df[,!id.group],x,colMeans)
         do.call(rbind,res)
       })
$group1
         a        b
a 2.666667 22.66667
b 3.500000 23.50000

$group2
    a    b
a 2.0 22.0
b 2.5 22.5
c 4.0 24.0

$group3
  a  b
a 1 21
b 2 22
c 4 24
d 4 24 
```

**编辑**添加一些基准测试

```
library(microbenchmark)
microbenchmark(ag(),dr(),an())

Unit: milliseconds
 expr       min        lq    median        uq      max neval
 ag()  4.717987  4.936251  5.072595  5.394017 27.13639   100
 dr() 14.676580 15.244331 15.689392 16.252781 43.76198   100
 an() 14.691750 15.159945 15.625107 16.312705 46.01326   100 
```

看起来 agstudy 解决方案是赢家，比其他 2 个解决方案快 3 倍！

这里使用的函数：

```
ag <- function(){
id.group <- grepl('group',colnames(df))
lapply(df[,id.group],
       function(x){
         res <- by(df[,!id.group],x,colMeans)
         do.call(rbind,res)
       })
}
dr <- function(){

grouplist<-colnames(df[3:5])
lapply(grouplist, function(n) 
  daply(df, n, function(d) colMeans(d[, 1:2])))
}

an <- function(){
temp <- melt(df, id.vars=1:2)
setNames(
  lapply(unique(temp$variable), function(x) {
    aggregate(. ~ value, temp[temp$variable == x, c(1, 2, 4)], mean)
  }), unique(temp$variable))
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:30:06.990

一种方法是首先将您的数据转换为长格式，然后使用`lapply`and `aggregate`.

这是长格式的数据。

```
library(reshape2)
temp <- melt(df, id.vars=1:2)
temp
#    a  b variable value
# 1  1 21   group1     a
# 2  2 22   group1     b
# 3  3 23   group1     a
# 4  4 24   group1     a
# 5  5 25   group1     b
# 6  1 21   group2     b
# 7  2 22   group2     a
# 8  3 23   group2     c
# 9  4 24   group2     b
# 10 5 25   group2     c
# 11 1 21   group3     a
# 12 2 22   group3     b
# 13 3 23   group3     c
# 14 4 24   group3     d
# 15 5 25   group3     c 
```

这是计算。我相信你感兴趣的所有计算都在那里。

```
setNames(
  lapply(unique(temp$variable), function(x) {
    aggregate(. ~ value, temp[temp$variable == x, c(1, 2, 4)], mean)
  }), unique(temp$variable))
# $group1
#   value        a        b
# 1     a 2.666667 22.66667
# 2     b 3.500000 23.50000
# 
# $group2
#   value   a    b
# 1     a 2.0 22.0
# 2     b 2.5 22.5
# 3     c 4.0 24.0
# 
# $group3
#   value a  b
# 1     a 1 21
# 2     b 2 22
# 3     c 4 24
# 4     d 4 24 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T16:45:54.613

这可以使用包的组合来`lapply`完成：`daply``plyr`

```
grouplist<-colnames(df[3:5])
lapply(grouplist, function(n) daply(df, n, function(d) colMeans(d[, 1:2])))

# [[1]]
#       
# group1        a        b
#      a 2.666667 22.66667
#      b 3.500000 23.50000
# 
# [[2]]
#       
# group2   a    b
#      a 2.0 22.0
#      b 2.5 22.5
#      c 4.0 24.0
# 
# [[3]]
#       
# group3 a  b
#      a 1 21
#      b 2 22
#      c 4 24
#      d 4 24 
```

# python - django - 如何将部分 html 呈现为 ajax 响应

> ID：16109188
> 
> 赞同：4
> 
> 时间：2013-04-19T16:22:36.647
> 
> 标签：python, ajax, django, django-templates

我被困在这个问题上。我有一个页面，用户可以搜索并转到搜索结果页面。现在我希望该用户能够按某些标准对结果进行排序，我为此使用 ajax，因为我不希望再次加载页面

我的阿贾克斯：

```
function sort(){
 var sortid = $('#sort').val().toLowerCase();
 $.ajax({
    type:"GET",
    url: "/sort/",
    data: {sortid:sortid}
 });
} 
```

这是我的观点：

```
def sort(request):
  sortid = request.GET.get('sortid')
  ratings = Bewertung.objects.order_by(sortid)
  locations = Location.objects.filter(locations_bewertung__in=ratings)
  t = loader.get_template('result-page.html')
  c = Context({ 'locs': locations })
  return HttpResponse(t.render(c)) 
```

但是现在，一旦我对结果进行排序，页面上没有任何变化。为什么没有出现带有新查询集的加载模板？我想，没有ajax的`done`功能，页面就会被替换。

有人可以解释一下为什么会这样吗？

多谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T21:20:30.853

在浏览器的请求检查器中验证您正在从 ajax 调用中接收到您期望的数据后，您应该告诉 jQuery ajax 在您从服务器获取新 html 时如何处理它。

```
function sort(){
 var sortid = $('#sort').val().toLowerCase();
 $.ajax({
    type:"GET",
    url: "/sort/",
    data: {sortid: sortid},
    success: function(newData){
        $('#selector-that-you-care-about').html(newData);
    }
 });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-12T14:04:27.920

```
function sort(){
 var sortid = $('#sort').val().toLowerCase();
 $.ajax({
    type:"GET",
    url: "/sort/",
    data: {sortid:sortid}
success: function(return_data){
    $('#tag-id').append(return_data);
    }
 });
} 
```

这个也可以试试！

# javascript - 当多个“then”处理程序链接到延迟时，为什么会调用多个“失败”处理程序？

> ID：16109195
> 
> 赞同：1
> 
> 时间：2013-04-19T16:23:19.703
> 
> 标签：javascript, jquery, jquery-deferred, promise

我的项目涉及使用返回延迟承诺的多个 API 的工作流。我正在使用 jQuery 1.8

`.done()`我知道和之间的区别在于`.then()`返回`.then()`一个新的承诺。在我的示例中，我希望如果第一个 deferred 被拒绝，则只有第一个`.fail()`处理程序将被执行，因为第二个处理程序链接到新的 Promise。在执行中，两个失败处理程序都被执行。

```
var firstDeferred = $.Deferred(), secondDeferred = $.Deferred();

firstDeferred.promise()
.fail(function (error) {
    console.log(error);
})
.then(function () {
    return secondDeferred.promise();
})
.fail(function (error) {
    console.log(error);
});

firstDeferred.reject('first deferred object');
//secondDeferred.reject('second deferred object'); 
```

我的预期结果：

```
> first deferred object 
```

实际结果：

```
> first deferred object
> first deferred object 
```

为什么两个`.fail()`处理程序都被调用？如何构建我的工作流程，使处理程序仅在特定的延迟承诺被拒绝时才被调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:07:34.693

您没有将任何内容链接到您在`then()`回调中返回的承诺，因为该回调永远不会被执行。

`then()`接受这些论点：

```
then( doneFilter , failFilter ) 
```

您的回调是第一个参数，因此它是`doneFilter`. 但是第一个承诺失败了，所以`then()`不调用你的回调。它*会*调用`failFilter`，但你没有为第二个参数传递任何东西。

引用[文档](http://api.jquery.com/deferred.then/)：

> 如果使用的过滤器函数为 null 或未指定，则 promise 将被解析或拒绝，并使用与原始值相同的值。

由于`failFilter`没有给出参数，所以`then()`只转发第一个承诺的状态，这会触发第二个`fail()`处理程序。

这有效：

```
var firstDeferred  = $.Deferred(),
    secondDeferred = $.Deferred();

firstDeferred.promise()
.fail(function (error) {
    console.log(error);
})
.then(null, function () { // Notice the null
    return secondDeferred.promise();
})
.fail(function (error) {
    console.log(error);
});

firstDeferred.reject('first deferred object');
secondDeferred.reject('second deferred object'); 
```

其中记录：

```
first deferred object
second deferred object 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:07:22.397

发生这种情况是因为`then`返回了一个新的 Promise（该结果通过管道传递到其回调返回的 Promise 的结果）。

一个 Promise 可以有两种最终状态：已解决或失败。因此，由于第一个 deferred 失败了，第二个永远无法解决，所以它失败了。如果`then`没有冒泡失败，你会发现自己有一个无限期的未决承诺。这可能是内存泄漏的风险。

`then`如果您只希望它在实际运行时运行，则只需更改管理失败功能的方式即可。

# javascript - 移动 Safari 和 iframe 使用 youtube 源显示/隐藏

> ID：16109196
> 
> 赞同：0
> 
> 时间：2013-04-19T16:23:21.603
> 
> 标签：javascript, jquery, html, css, mobile

我正在移动 Safari 中编写一个网络应用程序，我似乎对一些我认为应该足够简单的事情感到困惑，尽管它现在正在躲避我。

本质上，我有`iframe`一个`src`youtube 视频。当有人点击某个兴趣点时，它会以某种模式显示该视频。它也有一个用于关闭的关闭按钮。

这仅使用 jQuery`show`和`hide`方法。字面上地：

```
$(".selector").on("click", function() {

    $(this).show();

}); 
```

和

```
$(".selector").on("click", function() {

    $(this).hide();

}); 
```

当模式出现时，用户必须点击 youtube 视频来播放它。那部分一切都很好。

当您关闭它并尝试再次打开它时，奇怪的部分就会发挥作用。模态弹出，但视频是空白的。只有黑屏，但可以听到视频仍在播放。

我猜这与创建的附加`window`上下文有关`iframe`。也许这在那棵特定的树中隐藏了一些额外的东西？

当我在桌面上测试我的移动代码时，它工作正常，我没有任何问题。在 iPhone 上测试没有。

对这个有什么想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:42:50.273

好吧，解决了这个问题，但它很奇怪。显然，这是旧桌面版 Safari 中的一个已知问题。这是任何遇到问题的人的解决方案。

像这样设置你的 iFrame：

```
<iframe id="myYTVideo" src="" frameborder="0" allowfullscreen></iframe> 
```

注意没有`src`添加任何属性。当您使用 jQuery 打开模式时，请执行以下操作：

```
$(".openButtonSelector").on("click", function() {
    $("#myYTVideo").show();
    $("#myYTVideo").attr("src", youryoutubesourcehere);
}); 
```

关闭它时，请执行以下操作：

```
$(".closeButtonSelector").on("click", function() {
    $("#myYTVideo").hide();
    $("#myYTVideo").attr("src", "");
}); 
```

不是最迷人的解决方案，但它确实有效。不知道为什么它会在随后的通话中搞砸。我想这一定是一个移动 Safari 错误。

# git-bash - 无法看到我当前正在工作的当前分支

> ID：16109197
> 
> 赞同：0
> 
> 时间：2013-04-19T16:23:27.620
> 
> 标签：git-bash, .bash-profile

我正在使用 git，这就是我的 bash_profile 的样子。

```
"$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function
if [ -f /usr/local/etc/bash_completion.d/git-completion.bash ]; then
  . /usr/local/etc/bash_completion.d/git-completion.bash
fi   
PS1='\[\033[32m\]\u@\h\[\033[00m\]:\[\033[36m\]\w\[\033[31m\]$(__git_ps1)\[\033[00m\]\$ '
GIT_PS1_SHOWDIRTYSTATE=true 
```

我曾经像这样看到我目前正在使用的 branch_name，但它不再显示了。 `project_name(current_branch_name)`

它总是显示 `'-bash: __git_ps1: command not found'`

我可以在个人资料中更改什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T19:16:21.957

您遇到的问题是 git-completion.bash 很可能不在您要查找的位置。

这意味着：

```
if [ -f /usr/local/etc/bash_completion.d/git-completion.bash ]; then 
```

可能失败了。

尝试将其更改为指向 git install 目录中的 contrib 目录。例如，如果 git 安装在 /usr/local/git 中，那么

```
if [ -f /usr/local/git/contrib/completion/git-completion.bash ] ; then
    . /usr/local/git/contrib/completion/git-completion.bash
fi 
```

# dart - 我需要什么来绘制图像？

> ID：16109199
> 
> 赞同：1
> 
> 时间：2013-04-19T16:23:36.537
> 
> 标签：dart, drawimage

以下代码应在工具栏中选择鼠标后在画布中移动时绘制图像：

```
import 'dart:html';

    class Test {
      ImageElement toolbar_selected_element = new ImageElement();
      CanvasElement canvas;
      var loaded_image_toolbar = false;
      var mouseX = null, mouseY = null;

      void main() {
        canvas = query("#canvas");
        canvas.onMouseMove.listen(canvas_OnMouseMove);
        query(".toolbuton").onDragStart.listen(toolbar_button_OnClick);
      }

      void toolbar_button_OnClick(MouseEvent event) {
        toolbar_selected_element.onLoad.listen(tool_button_image_OnLoad);
        toolbar_selected_element.src = event.target.src;
       }

      void tool_button_image_OnLoad(event) {
        loaded_image_toolbar = true;
        window.requestAnimationFrame(draw);
      }

      void canvas_OnMouseMove(MouseEvent event) {
        mouseX = event.clientX;
        mouseY = event.clientY;
        window.requestAnimationFrame(draw);
      }

      void draw(num _) {
        if(loaded_image_toolbar && mouseX != null && mouseY != null) {
          CanvasRenderingContext2D context = canvas.context2d;
          context.drawImage(toolbar_selected_element, mouseX, mouseY);
        }
      }
    }

    void main() {
      new Test().main();
    } 
```

调用了 draw 方法，但图像没有显示在画布中，缺少什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:51:38.900

我猜元素类实际上是`toolbutton`而不是`toolbuton`.

您的 Dart 代码（或多或少）适用于我的 HTML 正文，如下所示：

```
<body>
  <canvas id="canvas"></canvas>
  <img class="toolbuton" src="./test.png" />
</body> 
```

当然，既然你想在不同的图像之间进行选择（我认为......），这更像是：

```
<body>
  <canvas id="canvas"></canvas>
  <img class="toolbutton" src="./test.png" />
  <img class="toolbutton" src="./test2.png" />
</body> 
```

然后在 中`Test.main()`，为每个工具按钮添加一个侦听器，而不仅仅是第一个：

```
for (var toolbutton in queryAll('.toolbutton')) {
  toolbutton.onClick.listen(toolbar_button_OnClick);
} 
```

然后我单击任一图像并将其绘制在画布中的光标位置，我可以在它们之间来回切换，我相信这就是你想要的。

# azure - 在 Windows Azure 媒体服务中签名 url

> ID：16109200
> 
> 赞同：0
> 
> 时间：2013-04-19T16:23:36.740
> 
> 标签：azure, cdn, akamai, azure-media-services

我正在尝试在 Windows Azure 媒体服务中找到与以下 S3 功能等效的功能：[http ://www.bucketexplorer.com/documentation/amazon-s3--how-to-generate-url-for-amazon-s3- file.html#signedurl](http://www.bucketexplorer.com/documentation/amazon-s3--how-to-generate-url-for-amazon-s3-file.html#signedurl)

我听说像这样的签名网址可以通过 S3 以及 CDN（如 Akamai）来实现。

2个问题。

1) 有人对如何在 WAMS 中实现签名 URL 有建议吗？

2) 有人知道 Azure 会在多大程度上与 Akamai 等其他 CDN 挂钩？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:24:15.030

The Equivalent for this feature in Windows Azure is called [Shared Access Signature](https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/). Media Services does support creating of [SAS Origin Locators](http://msdn.microsoft.com/en-us/library/windowsazure/hh974308.aspx).

You can read the official documentation on [how to create SAS Locator with .NET SDK](http://msdn.microsoft.com/en-us/library/windowsazure/jj129575.aspx#create_sas_locator).

Or you can check [my project on GitHub](https://github.com/astaykov/WaMediaWeb) and the [Locators implementation in particular](https://github.com/astaykov/WaMediaWeb/blob/master/WaMedia.Common/Implementations/LocatorService.cs)

A Code sample for generating SAS Locator for particular asset follows:

```
public string GetSasLocator(IAsset asset)
{
    // Create an 1-day readonly access policy. 
    IAccessPolicy streamingPolicy = this.MediaService.MediaContext.AccessPolicies.Create("Full Access Policy",
        TimeSpan.FromMinutes(20),
        AccessPermissions.List | AccessPermissions.Read | AccessPermissions.Read);

    // Create the origin locator. Set the start time as 5 minutes 
    // before the present so that the locator can be accessed immediately 
    // if there is clock skew between the client and server.
    ILocator sasLocator =
        (from l in this.MediaService.MediaContext.Locators
         where l.Type == LocatorType.Sas && l.AssetId.Equals(asset.Id)
         select l).FirstOrDefault();

    if (sasLocator != null && sasLocator.ExpirationDateTime < DateTime.UtcNow)
    {
        sasLocator.Delete();
        sasLocator = null;
    }

    if (sasLocator == null)
    {
        sasLocator = this.MediaService.MediaContext
            .Locators.CreateSasLocator(asset,
         streamingPolicy,
         DateTime.UtcNow.AddMinutes(-5));
    }
    // Create a full URL to the manifest file. Use this for playback
    // in streaming media clients. 
    string sasUrl = sasLocator.Path;

    // Display the full URL to the streaming manifest file.
    Console.WriteLine("URL to for blob upload: ");
    Console.WriteLine(sasUrl);

    return sasUrl;
} 
```

# javascript - 长页面的 Javascript 性能问题

> ID：16109201
> 
> 赞同：0
> 
> 时间：2013-04-19T16:23:47.827
> 
> 标签：javascript, jquery, javascript-events, dot.js

我正在处理一个包含 3400 多个项目的非常长的页面。这些项目中的每一个都有一个带有 3 个按钮的表单，并且每个表单都附加了一个 jQuery $.on() 点击事件。我认为这就是导致我在 IE8 和 IE7 文档模式下出现问题的原因（悬停响应缓慢、渲染页面时间长）。当我选择 $('button') 时，我得到了超过 10K 的元素。

该页面正在使用来自 JSON 对象的快速 DoT.js 模板库进行渲染，该对象的深度大约为 6 级。

有什么想法可能是我的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:25:11.833

根据我的经验，IE7 和 IE8*非常*慢。IE9更好，IE10可以接受。

如果您绝对需要执行此操作，则必须查看更具侵入性的性能调整，例如不渲染所有 3400 个元素。

根据您的描述，性能损失可能不在您的 JavaScript 代码中。如果悬停事件需要很长时间，这意味着浏览器很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:27:08.490

如果问题在于大量的事件处理程序，那么通过事件委托来解决这个问题是微不足道的。

您没有提到您的 DOM 元素的结构，但举例来说，假设您当前正在附加事件处理程序：

```
$('.myform').on( 'click', function() { /*...*/ } ); 
```

`myform`每个表单上的类名在哪里。

现在假设您将这些表单嵌套在 id="formparent" 的父元素中。您需要做的就是将代码更改为：

```
$('#formparent').on( 'click', '.myform', function() { /*...*/ } ); 
```

真的就是这么简单。

如果您发布一些代码，有人可以给出更具体的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:12:43.543

您是否尝试过删除 javascript 以查看页面的执行情况？如果无法删除，请在浏览器中禁用它，看看有什么影响。如果您的页面运行得更快，那么您就知道您已经找到了问题的一部分。

3400 多个事件侦听器很多，您可以尝试重写 javascript 以允许委托事件侦听器在 DOM 中更高。您有 3 个按钮，因此可能会委托三个侦听器并将单击的表单元素传递给处理函数。除此之外，如果不知道其余代码的作用，就很难知道是否还有其他 javascript 性能问题。

Frits 说 IE7/8 很慢也是正确的，如果性能是优先考虑的，考虑一次渲染更少的元素是有益的。

# json - 在 mongodb 中查询特定键的所有文档和子文档而不循环

> ID：16109204
> 
> 赞同：0
> 
> 时间：2013-04-19T16:23:52.920
> 
> 标签：json, mongodb

我很难为这个问题选择正确的标题。我有如下文件和子文件列表

```
{
        "name" : "Pets",
        "subcategories" : [
            {
                "name" : "Cats",
                "fbCategories" : []
            },
            {
                "name" : "Dogs",
                "fbCategories" : []
            }
        ],
        "fbCategories" : ["Pet Services","Pet Supplies", "Animal"]
    },
    {
        "name" : "Entertainment",
        "subcategories" : [
            {
                "name" : "Music",
                "subcategories" : [
                    {
                        "name" : "Albums",
                        "fbCategories" : [ "Album"]
                    },
                    {
                        "name" : "Musicians",
                        "fbCategories" : ["Concert Tour","Musician/Band"]
                    }
                ],
                "fbCategories" : [
                    "Concert Venue",
                    "Music Chart",
                    "Music Video",
                    "Musical Instrument",
                    "Record Label",
                    "Music"
                ]
            } 
```

在此示例中，我们有两个主要类别***（“宠物”、“娱乐”）***及其对应的子类别*（“宠物”的猫和狗，...）*。虽然有不同级别的子类别，但所有文档/子文档都有两个键，**name 和 fbCategories**。我想在不编写循环或多个查询的情况下找到每个类别/子类别的 fbCategories。无论如何要在一个查询中查询它们，结果应该列出每个 *“名称”*键的*“fbCategories” 。*例如对于*“音乐家”* ，它将列出，而对于*“音乐”*，它将列出**`["Concert Tour","Musician/Band"]`**

 ***```
 ["Concert Venue","Music Chart","Music Video","Musical Instrument","Record Label","Music"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:19:39.700

看看：[在 mongodb 中查找嵌入文档？](https://stackoverflow.com/questions/16100210/finding-embeded-document-in-mongodb/16103703#16103703)

没有循环，恕我直言，这个问题没有解决方案，因为 $where 语句在聚合框架中受到限制。***

# knockout.js - 如何在页面初始加载时填充淘汰赛可观察数组？

> ID：16109206
> 
> 赞同：0
> 
> 时间：2013-04-19T16:24:07.733
> 
> 标签：knockout.js

我有几千个对象，我最初通过以下方式在我的视图模型的初始加载时将它们加载到可观察数组中：

```
self.ReadingListItems = ko.mapping.fromJS(initialData.ReadingListItems); 
```

但是这使得页面真的很慢并且页面需要很长时间才能加载，有没有比这更快的替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:19:44.167

如果性能是一个问题，那么您可以使用映射选项来包含或排除您想要映射的对象的属性，这可能会有所帮助。

```
var mapping = {
    'include': ["propertyToInclude", "alsoIncludeThis"]
}
var viewModel = ko.mapping.fromJS(data, mapping); 
```

# regex - 如何使用 sed 命令从文件中删除包含特定字符串的行

> ID：16109207
> 
> 赞同：2
> 
> 时间：2013-04-19T16:24:11.030
> 
> 标签：regex, linux, shell, sed

我有以下文件：

```
#!example
#!toto
example
#example
;example
toto
example 
```

我想删除包含字符串的行，但以 .`"example"`开头的行除外`"#!"`。

所以结果文件应该是：

```
#!example
#!toto
toto 
```

如何仅使用`sed`命令来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T16:39:28.710

这条线怎么样：

```
 sed '/^#!/n;/example/d' file 
```

使用您的示例文本进行测试：

```
kent$  cat file
#!example
#!toto
example
#example
;example
toto
example

kent$  sed '/^#!/n;/example/d' file
#!example
#!toto
toto 
```

如果你愿意，**awk**也可以这样做：

```
kent$  awk '/^#!/ || !/example/' file                                                                                                                 
#!example
#!toto
toto 
```

**编辑**

赛德：

*   如果行匹配`starting with #!`，停止处理，转到下一行 ( `n`)
*   如果上述检查失败（不匹配`#!`），检查是否包含`example`，如果是，`d`删除（不要在输出中打印）

awk

*   打印所有行：
    *   以`#!`或 ( `||`) 开头的不包含示例。

表现：

我真的说不出来。因为需求很简单。您可以建立一个巨大的文件，并用于`time`自己比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:25:53.163

如果您只想保留以`#!`

```
$ sed '/#!/!d' foo.sh
#!example
#!toto 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T21:58:07.457

这可能对您有用（GNU sed）：

```
sed '/#!/b;/example/d' file 
```

这将打印所有包含的行`#!`和所有其他行，但包含`example`.

# apache - 使用 503 阻止文件请求

> ID：16109208
> 
> 赞同：0
> 
> 时间：2013-04-19T16:24:11.783
> 
> 标签：apache, .htaccess

我一直在尝试从中国 IP 地址访问我的站点 CMS 中的某些脚本。

这些似乎是黑客尝试，尽管删除了文件，但我想用 503 而不是下面的 htaccess 代码生成的 403 来阻止对它们的请求，因为我被告知这是这种情况下的最佳做法。

```
<files foo.php>
Deny from all
</files> 
```

谁能指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:55:52.667

您可以只使用 a`RewriteRule`而无需替换并返回所需的`503`状态代码

```
RewriteRule foo.php - [R=503,L] 
```

您可以添加多个规则，如果不仅仅是这个文件，或者使用[正则表达式](http://httpd.apache.org/docs/current/rewrite/intro.html#regex)，比如

```
RewriteRule (?:foo.php|bar.pl|baz.py) - [R=503,L] 
```

作为替代方案，您可以查看[`Redirect`](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirect)and [`RedirectMatch`](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirectmatch)，它们提供的或多或少是相同的。

如果您有很多文件，您还可以查看 into [`RewriteMap`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)，例如，它允许在外部将列表维护为[`txt`](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#txt)文件或[`dbm`](http://httpd.apache.org/docs/current/rewrite/rewritemap.html#dbm)哈希文件。

# mysql - 仅授予用户创建和更新查看权限

> ID：16109209
> 
> 赞同：0
> 
> 时间：2013-04-19T16:24:16.147
> 
> 标签：mysql

有谁知道 MySQL 中是否有一种方法可以允许用户创建/更改视图，而无需让用户能够在数据库中删除表？

我需要让用户能够创建/更改视图。

不知道您是否可以拒绝对特定表的删除权限，这是否仍会影响用户创建/更新视图的能力。

我问这个的原因是因为我不是系统的 DBA，但需要能够创建视图。

同样，如果有人可以告诉我这是可能的还是不可能的，或者甚至可以说明如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:12:14.320

直接取自手册：

从关于[DROP 权限](http://dev.mysql.com/doc/refman/5.5/en/privileges-provided.html#priv_drop)的页面：

> DROP 权限使您能够删除（删除）现有的数据库、表和视图。需要 DROP 权限才能在分区表上使用语句 ALTER TABLE ... DROP PARTITION。`TRUNCATE TABLE` 也需要 DROP 权限。如果您将 mysql 数据库的 DROP 权限授予用户，则该用户可以删除存储 MySQL 访问权限的数据库。

从关于[ALTER TABLE](http://dev.mysql.com/doc/refman/5.5/en/alter-table.html)的页面：

> 要使用 ALTER TABLE，您需要该表的 ALTER、CREATE 和 INSERT 权限。重命名表需要对旧表进行 ALTER 和 DROP，对新表进行 ALTER、CREATE 和 INSERT。

所以你的问题的答案是：不。您不能拒绝特定表的 DROP 权限，并且需要 DROP 才能使用`ALTER TABLE`.

# objective-c - 更新 TextField 的奇怪延迟

> ID：16109211
> 
> 赞同：0
> 
> 时间：2013-04-19T16:24:21.857
> 
> 标签：objective-c, facebook-graph-api

我正在获取 Facebook 用户数据以自动完成注册文本字段。

问题：我做了一个测试，NSLog 快速返回信息，但是更新 TextFields.text 它延迟了。

* * *

代码：

```
- (IBAction)facebookProfile:(id)sender {
    if(!_accountStore)
        _accountStore = [[ACAccountStore alloc] init];

    ACAccountType *facebookTypeAccount = [_accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

    [_accountStore requestAccessToAccountsWithType:facebookTypeAccount
                                           options:@{ACFacebookAppIdKey: @"417425124162461", ACFacebookPermissionsKey: @[@"email"]}
                                        completion:^(BOOL granted, NSError *error) {
                                            if(granted){
                                                NSArray *accounts = [_accountStore accountsWithAccountType:facebookTypeAccount];
                                                _facebookAccount = [accounts lastObject];
                                                NSLog(@"Success");

                                                [self me];
                                            }else{
                                                // ouch
                                                NSLog(@"Fail");
                                                NSLog(@"Error: %@", error);
                                            }
                                        }];
}

- (void)me {
    NSURL *meUrl = [NSURL URLWithString:@"https://graph.facebook.com/me"];
    SLRequest *meRequest = [SLRequest requestForServiceType:SLServiceTypeFacebook requestMethod:SLRequestMethodGET URL:meUrl parameters:nil];

    meRequest.account = _facebookAccount;

    [meRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

        if (!error) {
            NSDictionary *resultsDictionary = [responseData objectFromJSONData];

            NSLog(@"%@", [resultsDictionary objectForKey:@"name"]);

            // The problem is here. While NSLog runs in seconds showing Facebook User Name, the textfiend.text updates take about 10 seconds longer.

            _tfName.text = [resultsDictionary objectForKey:@"name"];
            _tfEmail.text = [resultsDictionary objectForKey:@"email"];
            _tfGender.text = [resultsDictionary objectForKey:@"gender"];
            _tfBirthday.text = [resultsDictionary objectForKey:@"birthday"];
        }

    }];    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:33:47.560

您需要在主线程上执行 UI 更新。您的完成处理程序正在后台线程上调用。

```
[meRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

    if (!error) {
        NSDictionary *resultsDictionary = [responseData objectFromJSONData];

        NSLog(@"%@", [resultsDictionary objectForKey:@"name"]);

        // The problem is here. While NSLog runs in seconds showing Facebook User Name, the textfiend.text updates take about 10 seconds longer.

        // Ensure UI updated on main queue
        dispatch_async(dispatch_get_main_queue(), ^{
            _tfName.text = [resultsDictionary objectForKey:@"name"];
            _tfEmail.text = [resultsDictionary objectForKey:@"email"];
            _tfGender.text = [resultsDictionary objectForKey:@"gender"];
            _tfBirthday.text = [resultsDictionary objectForKey:@"birthday"];
        });
    }

}]; 
```

# php - PHP简单的HTML DOM输出空白页

> ID：16109213
> 
> 赞同：1
> 
> 时间：2013-04-19T16:24:41.833
> 
> 标签：php, simple-html-dom

所以，我试图输出一个玩 L4D2（游戏 ID 550）的人的游戏时间，虽然这个脚本曾经可以工作，但它现在只使用我在这里备份的“PHP Simple HTML DOM”输出一个空白页面[http:/ /rghost.net/45405596](http://rghost.net/45405596)。如果我从他们的网站下载并尝试使用最新的简单 dom 而不是什么都不显示

> 在第 9 行调用未定义函数 file_get_dom()"

这是我正在运行的代码

```
 <?php
    ini_set('memory_limit', '-1');
    include('simple_html_dom.php');
    $lines = file('profile2.txt');                                                       //reads in the file with the list of user numbers
    foreach ($lines as $usernumber) {                                                  //loops line by line
    $link = "http://steamcommunity.com/profiles/<sitenumber>/games?tab=all";   //link format
    $link = preg_replace('/(<sitenumber>)/i',$usernumber,$link);               //puts usernumber into link format
    $link = preg_replace('/\s*/m','',$link);                                   //remove the stupid space
    $html = file_get_dom($link);                                               //calls the dom function
    $divline = $html->find('div[id=game_550] h5', 0);                          //finds the div block and then the h5 line
    $divline = preg_replace('/(<(\/)?h5>)/i', '', $divline);                   //replaces the <h5> tag with nothing
    if ($divline != '') {
        list($hrs,$u1,$u2,$u4) = explode(" ",$divline);
        if (($hrs < 90) && ($hrs > 1)) {
            echo $hrs." - ".$link."<br>";                                  //prints results
        }
    }
    $html->__destruct();
    unset($html); 
while(@ob_end_clean()); 

}
?> 
```

这指向一个名为 profile3.txt 的文本文件，其中包含这个数字“76561198049810642”

关于为什么这没有输出的任何建议？万分感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:43:17.203

下面是一些（未经测试的）代码，可以帮助您开始使用[Steam Web API](http://steamcommunity.com/dev)：

```
$api_key = '...';
$steam_id = '...';
$game_id = 550;

$json = file_get_contents('http://api.steampowered.com/IPlayerService/GetOwnedGames/v0001/?key=' . $api_key . '&steamid=' . $steam_id . '&format=json');

$data = json_decode($json);
foreach ($data->response->games as $game) { 
    if ($game->appid == $game_id) {
        echo 'Playtime for ', $game_id, ' is ' . $game->playtime_forever;
    }
} 
```

# html-agility-pack - htmlAgilityPack HtmlNodeCollection 项目与节点集合

> ID：16109217
> 
> 赞同：2
> 
> 时间：2013-04-19T16:24:58.670
> 
> 标签：html-agility-pack

我正在使用 htmlAgilityPack 来解析一些 html 值。我加载文档，然后执行 selectNodes("/html/body//a") ，一切正常。但是，如果我为每个循环做一个

对于 htmlnodecollection.nodes 中的每个 htmlnode

htmlnode 对象没有任何属性，只有标签中的文本。

如果我使用 htmlnodecollection(0) 之类的项目索引遍历 htmlnodecollection，它将为我提供对象的所有可能值。我宁愿为每个都做，但看起来我必须用一个整数来查找索引号来获取对象。

这是它必须工作的方式还是我错过了什么？

# events - 在 Visual Studio 2012 中执行保存操作

> ID：16109219
> 
> 赞同：2
> 
> 时间：2013-04-19T16:25:18.300
> 
> 标签：events, visual-studio-2012, envdte

在 Visual Studio 2012 中，我发现可以使用 DocumentEventsClass 中的 DocumentSaved 事件。所以我在 PowerShell 中编写了以下代码。

```
$DTE.Events.DocumentEvents($DTE.ActiveDocument) 
```

但是，返回的 COMObject 不正确，(000...GUID)。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T15:46:22.637

要在 Save 上执行操作，我们发现简单的解决方案是在文件上设置自定义工具。RESX 文件的工作方式相同。

基本上，我们添加了

```
MSBuild:CustomTarget 
```

每次保存时都会调用此目标。

# objective-c - [lazy-] 异步加载 Core Data 属性的策略

> ID：16109227
> 
> 赞同：1
> 
> 时间：2013-04-19T16:25:54.477
> 
> 标签：objective-c, core-data, asynchronous, properties, transient

假设您在 Core Data 中为外卖餐厅建模。每个都`Restaurant`应该有一个`phoneNumber`属性，但它会根据用户的街道地址而有所不同。不过不用担心，有一个 REST API 可以帮助您将街道地址和餐厅 ID 转换为电话号码。

我想对联系 REST API 的`phoneNumber`属性进行建模`Restaurants`：

1.  仅在需要时（即`phoneNumber`访问属性时）
2.  尽可能不频繁

我正在考虑的策略是这样的：

1.  `phoneNumberLoaded`在餐厅上提供符合 KVO 的布尔值
2.  在卸载状态下`nil`访问时返回`phoneNumber`
3.  开始异步加载`phoneNumber`属性：
    1.  第一次访问
    2.  当用户调用`preloadPhoneNumber`方法时
4.  维护一个代表 API 接收预加载请求的队列，将它们分批处理
5.  在 API 调用返回时更新`phoneNumber`，设置`phoneNumberLoaded`为`YES`

我应该开始工作，还是有人有更好的策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:59:49.383

我不知道这是不是你的意思，但这就是我的看法：

Restaurant<<-->Address (city,street,needPhoneResolutoin[BOOL],phoneNumber[default value: nil])
创建一个处理分辨率的类 (PhoneResolver)。
解析器将有一个 FRC 实体：`Address`，谓词：`needPhoneResolution == YES AND phoneNumber == nil`。
实现委托方法，但只处理插入的对象（以及第一次执行 fetch 调用后存在的所有对象）和删除的对象（清理）。
将它们批处理（在`-controllerDidChangeContent:`）
执行 REST 提取
更新数据库。
向解析器报告失败（将需要另一个提取，或将地址标记为不可解析）。

这样，您不需要自己实现队列或 KVO（由 CoreData 提供），并且根据局部性原则，如果用户请求电话一次（并且获取失败），您仍然会保留用户请求该电话并尝试在每次启动解析器时获取它。

# javascript - 单击禁用的输入或按 钮

> ID：16109228
> 
> 赞同：33
> 
> 时间：2013-04-19T16:25:58.963
> 
> 标签：javascript, jquery, disabled-control

是否可以单击禁用的按钮并向用户提供一些反馈？

HTML：

```
<input type="button" value="click" disabled> 
```

和 JavaScript：

```
$('input').mousedown(function(event) {
    alert('CLICKED');
}); 
```

上面的代码对我不起作用；这也不是：

```
$('input').live('click', function () {
    alert('CLICKED');
}); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-19T16:32:31.297

无法捕获对禁用元素的点击。你最好的选择是对`class`元素的特定做出反应。

HTML 标记：

```
<input type="button" class="disabled" value="click" /> 
```

JavaScript 代码：

```
$('input').click(function (event) {
    if ($(this).hasClass('disabled')) {
        alert('CLICKED, BUT DISABLED!!');
    } else {
        alert('Not disabled. =)');
    }
}); 
```

然后，您可以使用 CSS 样式来模拟禁用的外观：

```
.disabled
{
    background-color: #DDD;
    color: #999;
} 
```

这是一个[jsFiddle](http://jsfiddle.net/puYxX/1/)演示它的用法。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-11-12T09:54:56.650

制作该字段`readonly`会有所帮助，因为单击事件将被触发。虽然要注意[行为上的差异](https://stackoverflow.com/questions/7730695/whats-the-difference-between-disabled-disabled-and-readonly-readonly-for-te)。

```
<input type="button" value="click" readonly="readonly" /> 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-08-17T20:26:28.030

放

```
input[disabled] {pointer-events:none} 
```

在您的 CSS 中（它可以防止某些浏览器完全放弃对禁用输入的点击），并捕获对父元素的点击。恕我直言，这是一个更干净的解决方案，而不是在元素上放置透明覆盖以捕获点击，并且根据情况也可能比使用 CSS 简单地“模拟”禁用状态要容易得多（因为这不会阻止输入已提交，并且还需要覆盖默认浏览器的“禁用”样式）。

如果您有多个这样的按钮，则每个按钮都需要一个唯一的父级，以便能够区分单击了哪个按钮，因为使用`pointer-events:none`，单击目标是按钮的父级而不是按钮本身。（或者你可以测试点击坐标，我想......）。

但是，如果您需要支持较旧的浏览器，请检查哪些浏览器支持`pointer-events`： [http ://caniuse.com/#search=pointer-events](http://caniuse.com/#search=pointer-events)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-19T16:29:58.317

您不能没有解决方法，请参阅：[jQuery detect click on disabled submit button](https://stackoverflow.com/questions/7833854/jquery-detect-click-on-disabled-submit-button)

浏览器禁用禁用元素上的事件。

编辑以从链接添加上下文：

提问者发现了这个线程，并解释了为什么事件没有注册：[http ://www.webdeveloper.com/forum/showthread.php?t=186057](http://www.webdeveloper.com/forum/showthread.php?t=186057)

> Firefox，也许还有其他浏览器，禁用表单字段上的 DOM 事件。从禁用的表单字段开始的任何事件都将被完全取消，并且不会向上传播 DOM 树。如果我错了，请纠正我，但是如果您单击禁用的按钮，则事件的来源是禁用的按钮，并且单击事件完全消失了。浏览器实际上不知道按钮被点击，也不会传递点击事件。就好像你在点击网页上的一个黑洞。

解决方法是将按钮设置为“看起来”禁用，但实际上并非如此。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-19T16:27:55.077

`disabled`元素将不允许用户与它们交互。

所以：不，你不能把一个按钮`onclick`放在一个`disabled`按钮上并期望它会触发。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-01T13:40:32.873

`<input id="idButton" type="button" value="click" disabled>`

```
$('#idButton').on('click', function() {
    // The button is disabled but this will be executed.
}); 
```

上面的示例适用于需要捕获事件的禁用按钮的 JQuery。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-09T22:44:57.273

你不能点击禁用的按钮，但可以点击禁用的链接

```
$('.btn').on('click', function(e) {
  e.preventDefault();
  $txt = $('div.text');
  if($(this).attr('disabled')){
    $txt.html('CLICKED, BUT DISABLED!!');
  }else{
    $txt.html('Not disabled. =)');
  }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div class="text">No action</div>
<input type="button" href="" class="btn" value="click" />
<input type="button" href="" class="btn" value="click disabled" disabled />
<a href="" class="btn">Click</a>
<a href="" class="btn" disabled>Click Disabled</a>
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-02-14T14:24:01.390

将按钮包装在某个元素中并捕获单击该元素怎么样？

```
<span id="container">
    <input type="button" value="click" disabled>
</span> 
```

Javascript：

```
$("#container").click(function(){
    alert("Element clicked!");
}) 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-04-19T16:31:18.587

您应该使用 disabled="disabled" 而不仅仅是禁用。

```
$('input:disabled').val('disabled'); 
```

# java - 无法在项目 MavenSelenium 上执行目标 org.apache.maven.plugins:maven-surefire-plugin:2.10:test (default-test)：有测试失败

> ID：16109229
> 
> 赞同：0
> 
> 时间：2013-04-19T16:26:01.847
> 
> 标签：java, selenium, selenium-webdriver

我正在使用带有 maven设置**的 selenium java webdriver 。**

到目前为止，我的**Maven**报告运行良好。突然它停止工作了。

**它说的是**

> 未能在项目 DARTMavenSelenium 上执行目标 org.apache.maven.plugins:maven-surefire-plugin:2.10:test (default-test)：存在测试失败。

问题是什么 ？

有没有人遇到过这类问题？

谢谢

# javascript - 如何正确检查索引是否存在，然后使用索引获取值，然后从数组 javascript/jquery 中删除索引和值

> ID：16109237
> 
> 赞同：1
> 
> 时间：2013-04-19T16:26:26.433
> 
> 标签：javascript, jquery, arrays

我知道标题很拗口，但描述了我需要在这里做的事情。我承认我在弄清楚这一点时遇到了很多麻烦！

我正在尝试创建一个折扣计算器，这是我第一次使用数组。

这是我到目前为止的代码......

```
 dTrackerArray = [];
    //Create Array

    dTrackerArray.push( [var1, var2] );
    //Add Variables to Array

    var check = $.inArray(var1, dTrackerArray);
    // Checking to see if variable exists, keeps returning -1!!!

    alert(JSON.stringify(dTrackerArray));
    // Even though I have this right under it which alerts the array clearly showing var 1 and var 2 exist! 
```

一旦我弄清楚如何正确检查数组，我想保留该对的值（也许在一个变量中），然后从数组中删除该对。

对不起，如果这有点难以阅读或理解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:29:52.057

您正在创建一个多维数组（`[var1, var2]`成为数组中的一个对象`dTrackerArray`。）

尝试推动`var1`和`var2`分开。

```
 dTrackerArray.push(var1);
 dTrackerArray.push(var2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:29:52.963

您正在向数组中添加一个包含`var1`和`var2`的`dTrackerArray`数组。

请改用此语法：

```
dTrackerArray.push(var1);
dTrackerArray.push(var2);

// Or this syntax
dTrackerArray.push(var1, var2);

// Or this syntax
dTrackerArray = [ var1, var2 ]; 
```

这是一个要演示[的工作小提琴。](http://jsfiddle.net/bEYtj/)

# python - 在 App Engine 中查询随时间变化的百分比

> ID：16109240
> 
> 赞同：2
> 
> 时间：2013-04-19T16:26:32.063
> 
> 标签：python, google-app-engine, app-engine-ndb

我的网站索引来自不断更新的提要的时间序列数据。网站的用户应该能够配置警报，当数据中特定属性的值在特定时间段内发生特定百分比的变化时触发。

示例：假设我们正在跟踪用户拥有的 Twitter 关注者数量。这就是（简化的）数据馈送的样子：

日期，追随者

*   10:00, 1
*   10:01, 2
*   10:02, 2
*   10:03, 15
*   ...

警报：

*   如果“关注者”在过去 1 小时内增加了 15%，请通知我。
*   如果“关注者”在过去 40 分钟内减少了 10%，请通知我。

只有一个简单的数据馈送。将（希望）定义数以千计的警报。其中许多警报可能相似，但很难估计会有多少独特的警报。

编辑：之前忘记提及这一点，但追随者的数量经常变化（每分钟）。

使用数据存储区和其他 App Engine 设施实现这种机制的最优雅的方式是什么？警报应该相对实时地触发（+/- 几分钟）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:33:17.573

覆盖 put 意味着每次写入都会进行计算，这可能是低效的。如果您允许用户设置这些警报，您最终可能会得到代表警报的数据存储对象，这意味着每次评估警报时都会有获取或查询。

一种选择是任务：当数据馈送发生变化时，启动一项任务来评估警报。至少，这将允许初始数据馈送写入请求更快地完成。但是，如果数据馈送正在迅速变化，您可能有很多任务，其中大部分任务会因最近的数据更改而变得不必要。

也许最好的选择是[cron](https://developers.google.com/appengine/docs/python/config/cron "cron")任务，每隔几分钟运行一次。如果需要，您可以根据负载更改 cron 作业的时间，并且如果您有很多用户/警报，则以高度并行的方式进行处理会更可行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T14:55:30.513

如果您的数据不需要每用户每分钟更新一次以上：

1.  在用户中设置“警报” `LocalStructuredProperty`。
2.  从提要中“放置”传入数据点时，使用 pre-put 挂钩来预先计算值：

    *   在 pre-put 挂钩中抓取用户实体。（如果使用 NDB 并且您已经抓取了用户，它应该来自本地内存）
    *   获取该用户的所有“警报”并异步处理它们（小任务）
    *   将每个人的警报数据存储在自己的实体中，使用特殊的键名来快速查询（例如，将它们的键名设置为类似`<user>_<alert_type>_<time_in_seconds>_<percentage>`这样，这样您就可以使用 a`get`而不是 a `query`。在这个对象中，存储所有进入并落在指定时间限制。对于每分钟一次更新，您可能可以将 1000 多个数据点存储为元组列表`(<timestamp>, <value>)`。从这个过程中，警报基于定义的配置并存储新值。

示例（tbh。这是一个粗略的示例。如果您希望对数据有保证，则应使用事务）：

```
class AlertConfiguration(ndb.Model):
  timespan_in_seconds = ndb.IntegerProperty('tis', indexed=False)
  percent_change = ndb.FloatProperty('pc', indexed=False)

class User(ndb.Model):
  alerts = LocalStructuredProperty(AlertConfiguration, repeated=True, name='a')
  ...

class DataPoint(ndb.Model):
   timestamp = ndb.DateTimeProperty('ts', auto_now_add=True)
   value = ndb.FloatProperty('v')
   user = ndb.KeyProperty(name='u', kind=User)

   def _pre_put_hook(self):
     alerts = self.user.get().alerts
     futures = []
     for alert in alerts:
       futures.append(process_alert(alert, self))
     yield futures

class AlertProcessor(ndb.Model):
  previous_data_points = ndb.JsonProperty(name='pdp', compressed=True)

@ndb.tasklet
def process_alert(alert_config, data_point):
  key_name = '{user}_{timespan}_{percentage}'.format(user=data_point.user.id(), timespan=alert_config.timespan_in_seconds, percentage=alert_config.percent_change)
  processor = yield AlertProcessor.get_or_insert_async(key_name)
  new_points = []
  found = False
  for point in processor.previous_data_points:
     delta = data_point.timestamp - datetime.strptime(point[0], '%c')
     seconds_diff = (86400 * delta.days) + delta.seconds
     if seconds_diff < alert_config.timespan_in_seconds:
       new_points.add(point)
       if not found:
         found = True
         if (data_point.value - point[1]) / data_point.value >= alert_config.percent_change:
            #E-mail alert here?
  new_points.append((data_point.timestamp.strftime('%c'), data_point.value))
  processor.previous_data_points = new_points
  yield processor.put_async() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T19:25:48.967

有时，当您需要保持变量的移动平均线时，您能做的最好的事情就是回到该要求的来源，看看是否可以用具有指数衰减权重的加权平均值代替它（阅读解释它的[维基百科文章）。](http://en.wikipedia.org/wiki/Exponential_decay)它不像移动平均线那么容易理解，但维护和存储要简单得多，特别是如果您想在线实时计算它。

例如，假设您不是查看您提供的系列的移动平均线，而是查看半衰期为一分钟的权重衰减的平均值。

*   10:00, 1（平均为 1）
*   10:01, 2（旧平均值为 1，权重为 0.5，新数据为 2，新加权平均值为 (1*0.5+2*1)/(0.5+1)= **1.667**）
*   10:02, 2（旧平均值为 1.667，权重为 0.75，新数据为 2，新加权平均值为 (1.667*0.75+2*1)/(0.75+1)= **1.85**）
*   10:03, 15（旧平均值为 1.85，权重为 0.875，新数据为 15，新加权平均值为 (1.85*0.875+15*1)/(0.875+1)= **8.8667**）
*   ...

它可能看起来很复杂，但实际上非常简单。当然，您需要将您看到的半衰期调整为适合您需要的东西（这与选择移动平均线的窗口有点不同）。

使用衰减权重平均值优于移动平均值有两大优势：

1.  您不需要记录离散值来计算平均值；您只需要存储当前值和采样时间。
2.  您只需要在数据发生变化时重新计算平均值。当它不改变时，你所拥有的平均值的权重会衰减，但它的值仍然存在。因此，您可以在收到新数据时计算它，而不是在单独的任务中运行`cron`或类似的东西。

PS，稍微玩一下方程式，您可以找到一些更有用的事情，例如将 e^X 存储为您可以索引的值，因为它保持了您度量的不同值之间的序数关系'随着时间的推移进行监控。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T18:35:20.760

我将尝试对您的模型进行非规范化，并在性能和冗余、写入操作和读取操作之间找到平衡点。

例如：

1.  由于该服务专注于实时变化，因此每个特定属性的乘法数据可以一起存储在一个数据存储中。例如，一个大型实体在五天内存储同一用户的所有更改。因此，随着时间的变化不需要额外的查询来计算。这也是谷歌在应用引擎上托管代码堵塞的方式。可以在数据存储中应用树结构来提供一些额外的功能。

2.  对于警报，一种常见的方法可能是直接在数据模型本身上写下谁在观察数据的变化。

由于 denormalize 确实需要澄清用例是什么，因此此设计仅基于我的假设。

```
class Watcher(ndb.Model):
    # define the rule such as "Notify me if 'followers' has increased by 15% in the past 1 hour."
    pass

class Attribute(ndb.Model):
    name = ndb.StringProperty() # the name of this attribute such as "twitter_user_1:followers"
    data = ndb.PickleProperty() # a tree store all changes of the specify attribute

    watch_list = ndb.LocalStructureProperty(repeated=True, kind=Watcher) # who want to received the notification 
```

因此，该服务可以在一个地方收集所有必要的信息。

# entity-framework - EF 5 / 具有唯一约束的一对零或一

> ID：16109244
> 
> 赞同：1
> 
> 时间：2013-04-19T16:26:40.557
> 
> 标签：entity-framework, unique-constraint

在我的数据库中，我有三个表。TestVP、TestProject 和 TestPitch。关系如图所示。TestVP 是主表，TestProject 和TestPitch 在创建时将一行链接到TestVP。在 EF World TestVP 中为 1，其他为 0..1。

[http://tinypic.com/r/a3pg69/6](http://tinypic.com/r/a3pg69/6)

[http://tinypic.com/r/ve69w/6](http://tinypic.com/r/ve69w/6)

TestVP 和 TestPitch 与主键相关联，因此 EF 正确理解并使其为 1 - 0..1。

TestVP 和 TestProject 与 FK 链接。ID <-> FKID 和 FKID 是唯一的。在这种情况下，EF 生成一个 1 - * 关联。

如何在不更改数据库结构的情况下在 EF 中更改它？我想在 TestVP 和 TestProject 之间有 1 - 0..1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:02:18.207

实体框架会忽略数据库中的唯一键约束（除了主键）并且[它们不受支持](https://stackoverflow.com/a/15373090/270591)。因此，不支持与与主键不同的外键的一对一关联。

最好的解决方法是不在主体上使用导航属性，`TestVP`而仅在依赖上使用`TestProject`。如果您使用的是数据库，则`TestVP`在 EF 创建后手动删除集合属性。

对于 EF，关系仍然是一对多的，但您不会有意外向集合中添加一个以上实体的风险（由于唯一约束，这将在数据库中失败）。

# python - 在 Python 中处理数据

> ID：16109246
> 
> 赞同：0
> 
> 时间：2013-04-19T16:26:47.407
> 
> 标签：python, dataset, large-data

我使用 mathcad 已经好几年了，但它并不适合数据处理。我正在学习 python，我想知道如何使用 python 脚本操作数据。基本上我的数据集来自这样组织的 dat 文件：

```
w : A_D02
chipX : 6
chipY : -3
ID :2_12-A1
BOD
12  1.93
10  1.5
8   1.43
6   1.46
4   1.39
2   1.41
48  1.35
46  1.41
44  1.39
42  1.44
40  1.44
38  2.08
36  2.1
34  1.47
32  1.46
30  1.42
28  1.45
26  1.37
24  1.41
22  1.39
20  1.44
18  1.46
16  1.49
14  1.97
0   0
EOD
w : A_D02
chipX : 6
chipY : -3
ID : 0.04_10
f : 100000 H
BOD
1.5 -8.48417e-12    0.000105852
1.45    -7.57959e-12    0.000104342
1.4 -6.66443e-12    0.000102611
1.35    -6.66912e-12    0.000101964
EOD
w : A_D02
chipX : 6
chipY : -3
ID : 0.04_10
f : 10000 H
BOD
1.5 2.54351e-12 0.000102326
1.45    3.30898e-12 0.000100371
1.4 4.05372e-12 9.91379e-05
1.35    4.89822e-12 9.86476e-05
EOD
w : A_D02
chipX : 6
chipY : -3
ID : 0.04_10
f : 1e+06 H
BOD
1.5 2.99854e-12 0.000109691
1.45    3.24767e-12 0.000109494
1.4 3.53048e-12 0.000110429
1.35    3.87087e-12 0.000112401
EOD 
```

作为以 txt 格式保存的输出文件，我希望执行以下操作：

```
w   chipX   chipY   ID  f   V   C   G
A_D02   6   -3   0.04_10    100000  1.5 -8.48E-12   0.000105852
A_D02   6   -3   0.04_10    100000  1.45    -7.58E-12   0.000104342
A_D02   6   -3   0.04_10    100000  1.4 -6.66E-12   0.000102611
A_D02   6   -3   0.04_10    100000  1.35    -6.67E-12   0.000101964
A_D02   6   -3   0.04_10    10000   1.5 2.54E-12    0.000102326
A_D02   6   -3   0.04_10    10000   1.45    3.31E-12    0.000100371
A_D02   6   -3   0.04_10    10000   1.4 4.05E-12    9.91E-05
A_D02   6   -3   0.04_10    10000   1.35    4.90E-12    9.86E-05
A_D02   6   -3   0.04_10    1.00E+06    1.5 3.00E-12    0.000109691
A_D02   6   -3   0.04_10    1.00E+06    1.45    3.25E-12    0.000109494
A_D02   6   -3   0.04_10    1.00E+06    1.4 3.53E-12    0.000110429
A_D02   6   -3   0.04_10    1.00E+06    1.35    3.87E-12    0.000112401
EOD 
```

我非常感谢您的帮助，因为在 excel 中执行此操作真的很痛苦，尤其是因为我已经为大型数据集这样做了；-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:22:07.427

我强烈推荐 Ipython + Pandas。

熊猫（[http://pandas.pydata.org](http://pandas.pydata.org) ) 本质上是 python 的强项。您可以以易于操作和导入/导出的方式存储表格数据，并与许多 python 包（如 numpy 和 scipy）集成。因为它与这些框架一起工作，它还允许更轻松地桥接其他语言。

Ipython( [http://ipython.org/index.html](http://ipython.org/index.html) ) 将为您提供一个出色的数据可视化界面，并允许您创建笔记本来存储您的工作，并与他人合作。

您可能需要查看[https://www.enthought.com/canopy-express](https://www.enthought.com/canopy-express)以快速设置这些工具。这是 enthought 中的软件包列表：[https ://www.enthought.com/products/canopy/package-index/](https://www.enthought.com/products/canopy/package-index/)

这也是一本很棒的书，将指导您设置和使用这些工具： [http ://shop.oreilly.com/product/0636920023784.do](http://shop.oreilly.com/product/0636920023784.do)

如果你在 python 中做这种工作，这些绝对是你应该知道的工具。

# facebook-ios-sdk - Facebook 登录按钮挂起然后在 5.1 但不是 6 上崩溃 ios 模拟器

> ID：16109251
> 
> 赞同：0
> 
> 时间：2013-04-19T16:27:04.697
> 
> 标签：facebook-ios-sdk, facebook-login, ios5.1

我很确定我已经包含了所有正确的 sdk，正确的 sdk 设置为可选，但是在 ios 5.1 上，当我单击 facebook 登录按钮时，它会挂起，然后稍后崩溃。错误跟踪给了我一大堆 Facebook 类中的错误，这些错误有点难以理解。跟踪中的最后一个调用是

`[FBSession isSystemAccountStoreAvailable]`;

还有什么我应该检查的吗？在 6.1 中运行良好。facebook 示例应用程序在 5.1 模拟器上运行良好，我复制了我能想到的所有设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T03:51:27.707

此错误已在 SDK 3.5.1 中修复。请更新 SDK，您应该一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T02:03:50.310

我认为这次崩溃是由于无限循环造成的。这可能是由于 Facebook 昨天修复的与 3.5 SDK 相关的服务器错误。它应该对你有用。

Facebook 已修复导致许多开发人员出现此问题的服务器错误。但是，服务器修复只会降低无限循环问题发生的可能性。它仍然存在。我创建了一个新错误来跟踪无限循环问题。

[https://developers.facebook.com/bugs/446010282155033](https://developers.facebook.com/bugs/446010282155033)

# c - 如何检查单个字符是否等于给定字符集中的至少一个？

> ID：16109252
> 
> 赞同：0
> 
> 时间：2013-04-19T16:27:09.793
> 
> 标签：c, string, char

对不起标题。随意将其编辑为更清晰的内容。

我有一个字符串，我必须检查该字符串的第一个字符是否等于其他给定字符之间的至少一个字符，例如 B、Z 和 K（在我的情况下，我有大约 10 个字符要检查，但它们不是可归类为一个范围）。

我正在按如下方式进行检查。

```
if (string[0] == 'Z' || string[0] == 'K' || string[0] == 'B') {
   /* do something... */
} 
```

有没有更简单的方法呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T16:28:36.153

一种可能的方法是在字符串中列出您的目标字符并使用[strchr](http://linux.die.net/man/3/strchr)

```
const char* matches = "ZKB...";
if (strchr(matches, string[0]) != NULL) {
    /* do something */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:30:31.167

```
#include <string.h>

char* test = "ZKB";
if (strchr(test, string[0]) != NULL)
{
  // do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:48:36.323

将所有要比较的字符放在一个字符串中，然后将字符串的第一个字符存储在另一个字符串中，然后执行以下操作 strstr("firstChar","compareset"); 如果它返回 null 这意味着字符串的第一个字符不是来自集合

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-19T16:37:53.287

如何创建一个数组来存储将要检查的字符...例如，如果它们在给定的第一个字符串中，则检查 A、B、C、D 这 4 个字符。然后写一个函数：

```
int check_first(char *s,char *t){ //string s is given,string t is chars which
                                  // will be checked.
    while(*t++ == *s){//You should leave 1 more byte in array to store '\0'
        return 1;
    }
    return 0;
} 
```

# javascript - JSONP 会干扰获取背景图像吗？

> ID：16109253
> 
> 赞同：0
> 
> 时间：2013-04-19T16:27:15.197
> 
> 标签：javascript, css

我正在使用 JSONP 返回状态，但我还将图片和一些详细信息显示为列表中的项目。当我加载页面时，我看到加载所有图片都有延迟，除了第一个图片，这与 JSONP 调用拉状态的时间差不多。[你可以在这里](http://screencast.com/t/8hbejuvMkkCm)看到。

JSONP 是否有一些固有的东西会影响我的背景图像的加载？我认为这是一个异步调用，所以我不确定为什么浏览器会阻止调用来拉取图像。这是我正在使用的 CSS（当我遍历列表中的项目时，ID 是在运行时动态生成和提供的）：

```
<div class='avatar status available' style='background-image: url(https://services.xxx.com/pics/{id}.jpg);'><span></span></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:33:43.600

对于在后台显示图像规则，您需要图像或资源的绝对路由（URL）。在您的链接中，绝对（URL）是[`http://content.../d812611d-5284-4abe-bb85-4ccda1424f16/2013-04-18_1722.png`](http://content.screencast.com/users/lsacco/folders/Jing/media/d812611d-5284-4abe-bb85-4ccda1424f16/2013-04-18_1722.png)

不推荐显示来自 CSS 的动态图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:16:07.727

我发现的最佳解决方案不是使用 CSS，而是使用`<img>`标签。所以现在我的代码变成了：

```
<div class='avatar status available'><img onerror='imgError(this)' src='https://services.xxx.com/pics/{id}.jpg'/></div> 
```

这会导致图像按预期加载而不会被阻止，如果图​​像无法发送默认图像，我将受益于检查错误：

```
function imgError (image) {
    image.onerror = function () {
        this.parent().addClass('user');
    }
    image.src = "/resources/img/user.png";
    return true;
} 
```

# iis - 关闭经典 ASP 的 IIS8 自定义错误 - IIS 中的潜在错误？

> ID：16109255
> 
> 赞同：2
> 
> 时间：2013-04-19T16:27:30.710
> 
> 标签：iis, asp-classic, custom-errors, iis-8

我想我在 IIS 错误页面系统中发现了一个错误。

注意： - 我没有使用 .NET 错误页面 - 这设置为关闭

**问题：**

为 500.100 (Classic ASP) 响应代码设置自定义错误页面时，即使**errorMode**设置为**Detailed** ，IIS 也始终发送自定义错误页面。让 IIS 发送错误的唯一方法是显式删除 web.config 中的条目。

例如：

```
<remove statusCode="500" subStatusCode="100"/>
 or
<clear/> 
```

注意 - 以下内容不起作用**（**适用于所有其他代码）：

```
<remove statusCode="500" subStatusCode="-1"/> 
```

**我的场景：**

*   IIS 8（我不知道问题是否存在于旧版本的 IIS 中）
*   运行 .NET 2.0 的网站 - 经典管道
*   错误页面上的功能委派设置为**只读**
*   IIS 中的错误页面设置如下（由于上述功能委托，这些条目不在 web.config 中）：
    *   404 - /path/to/404.htm - ExecuteURL
    *   500 - /path/to/500.htm - ExecuteURL
    *   500.100 - /path/to/500.htm - ExecuteUrl

**关闭自定义错误：**

为了关闭自定义错误，我需要做的就是：

*   加载 IIS
*   加载`Error Pages`
*   点击`Edit Feature Settings`
*   选择`Detailed Errors`

这适用于**除**经典 ASP 500 错误（状态代码 500.100）之外的所有代码。

我可以获得正确的经典 ASP 错误的唯一方法是设置以下内容（这需要我将功能委托更改为读/写）：

```
<system.webServer>
    <httpErrors errorMode="Detailed">

        <clear/>  
        OR    
        <remove statusCode="500" subStatusCode="100"/>

    </httpErrors>    
</system.webServer> 
```

**概括**

似乎如果设置了 500.100 自定义错误页面，则将**详细错误**设置为 true 不适**用于**经典 ASP 500 错误。

**这是一个错误还是我错过了什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:49:20.007

这是一个已知的错误，我们也得到并正在解决它，方法是删除 500 错误，而是从配置的“当您可以找到其他任何东西发送”部分链接到我们的自定义页面。

（我不记得它叫什么）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T08:49:50.723

尝试以这种方式修改您的 web.config（它适用于 IIS 7.5）。

换行

```
<httpErrors errorMode="Detailed"> 
```

和

```
<httpErrors existingResponse="PassThrough" errorMode="Detailed"> 
```

这是因为默认情况下 IIS7 会截获 HTTP 状态代码，例如由应用程序生成的 4xx 和 5xx 进一步向上管道。

# ios - MonoTouch <--> 静态库异常：无法在包中加载 NIB

> ID：16109258
> 
> 赞同：3
> 
> 时间：2013-04-19T16:27:38.230
> 
> 标签：ios, objective-c, xcode, xamarin.ios

我有一个静态库，用 开发`Xcode 4`，这个库包含一个自己的`UIViewController`.
现在我正在尝试从我的 MonoTouch 项目中使用这个视图及其控制器。
但是在视图试图加载 NIB 文件的那一刻，我得到了以下异常：

```
"NSInternalInconsistencyException Reason: Could not load NIB in bundle". 
```

有没有办法在**MonoTouch**项目中使用现有`UIViewController`的 Objective-C 静态库？

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T17:13:07.800

这并不是 MonoTouch 特有的问题，这是因为主包中不存在 nib 文件。NIB 文件（以及与此相关的图像）未打包在库中，而是打包在资源包中。如果您在 .app 上“显示包内容”，您将在根目录或 en.lproj 中看到主应用程序中的所有文件。您将看不到库的 nib 文件，因为您的应用程序不知道要构建它。

最快的解决方法是将 .xib 文件移动到 MonoTouch 主项目，它应该可以立即工作，尽管这并不令人满意。另一种方法，我只在 XCode 中做过，是在你的库项目中添加一个捆绑目标来保存你的资源。

创建捆绑包的步骤：

1.  在您的库项目中，使用**OS X -> Framework & Library -> Bundle**添加一个新目标。不要担心“OS X”部分。将其命名为“MyLibrary”。
2.  您应该会看到“MyLibraryResources.bundle”出现在构建产品中。
3.  在这个新目标中，将 .xib 文件添加到“复制捆绑资源”构建阶段。
4.  将“MyLibraryResources.bundle”构建产品添加到应用程序的“复制捆绑资源”构建阶段。

现在，如果你构建你的应用程序，它仍然会崩溃，但是如果你查看你的 .app 文件，你会看到包含你的 NIB 文件的目录“MyLibraryResources.bundle”。下一步是让您的视图控制器引用该 NIB。

找到你打电话的地方`initWithNib:bundle:`。是时候设置捆绑包了！以下步骤创建一个包：

```
NSBundle *myLibraryBundle = [NSBundle bundleWithURL:[[NSBundle mainBundle]
    URLForResource:@"MyLibraryResources" withExtension:@"bundle"]]; 
```

如果你通过`initWithNib:@"MyViewController" bundle:myLibraryBundle`它应该工作。您可能希望以`myLibraryBundle`每次应用程序执行只调用一次的方式打包。**

# asp.net-mvc - Htm.DropdownFor 验证问题

> ID：16109261
> 
> 赞同：-1
> 
> 时间：2013-04-19T16:27:45.047
> 
> 标签：asp.net-mvc, validation, asp.net-mvc-4, jquery-validate

我正在开发一个 MVC4 项目，我有一些奇怪的行为，jQuery 验证正在检查下拉列表中的文本而不是值：

```
 // field in model
    [Required]
    [DataType(DataType.Text)]
    [StringLength(2, ErrorMessage = "The {0} must be {2} characters long.", MinimumLength = 2)]
    [Display(Name = "State")]
    public string StateCode { get; set; }

    // source of states  -> List.States
    Dictionary<string, string> states = new Dictionary<string, string>();
      states.Add("AK", "Alaska");
      states.Add("AZ", "Arizona");
      // etc.
      states.Add("WI", "Wisconsin");
      states.Add("WY", "Wyoming");
    }

    // in the controller
    ViewBag.States = new SelectList(Lists.States(), "Key", "Value", Lists.States["AK"]);

    <!-- in the view -->
    <li>
      @Html.LabelFor(m => m.StateCode)
      @Html.DropDownListFor(m => m.StateCode, (SelectList)ViewBag.States, "Alaska")
    </li> 
```

这是我收到的错误消息： •State 必须是 2 个字符长。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:38:26.843

我相信这是因为 jquery 正在检查所选项目的数量。

```
maxlength: function(value, element, param) {
    return this.optional(element) || this.getLength($.trim(value), element) <= param;
}

getLength: function(value, element) {
    switch( element.nodeName.toLowerCase() ) {
        case 'select':
            return $("option:selected", element).length;
        case 'input':
            if( this.checkable( element) )
                return this.findByName(element.name).filter(':checked').length;
    }
    return value.length;
} 
```

# ruby - 带有 Spree 的 Bootstrap 可以在本地工作，但不能在 Heroku 上工作

> ID：16109262
> 
> 赞同：0
> 
> 时间：2013-04-19T16:27:46.213
> 
> 标签：ruby, twitter-bootstrap, heroku, webpage, spree

我正在使用 Ruby On Rails、Bootstrap 和 Spree 创建一个应用程序。我的本地主机上一切正常，但是当我推送到 Heroku 时，我收到一条错误消息“我们很抱歉，但出了点问题。” 当我将“/store”添加到加载正常的地址时，我可以访问 Heroku 上的商店区域，但主页加载时显示错误消息。当我运行 heroku 日志时，我看到：

```
Processing by PagesController#home as HTML
2013-04-19T16:03:19.156092+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (100.2ms)
2013-04-19T16:03:19.156092+00:00 app[web.1]: Compiled jquery.alerts/jquery.alerts.css  (145ms)  (pid 2)
2013-04-19T16:03:19.156092+00:00 app[web.1]: Compiled jquery.alerts/jquery.alerts.spree.css  (0ms)  (pid 2)
2013-04-19T16:03:19.156092+00:00 app[web.1]: Compiled responsive-tables.css  (0ms)  (pid 2)
2013-04-19T16:03:19.156092+00:00 app[web.1]: Compiled normalize.css  (0ms)  (pid 2)
2013-04-19T16:03:19.156092+00:00 app[web.1]: Compiled skeleton.css  (0ms)  (pid 2)
2013-04-19T16:03:19.156092+00:00 app[web.1]: Compiled jquery-ui.datepicker.css  (259ms)  (pid 2)
2013-04-19T16:03:19.156092+00:00 app[web.1]: Compiled jquery.powertip.css  (0ms)  (pid 2)
2013-04-19T16:03:19.156092+00:00 app[web.1]: Compiled select2.css  (2728ms)  (pid 2)
2013-04-19T16:03:19.156538+00:00 app[web.1]: Compiled admin/spree_admin.css  (1552ms)  (pid 2)
2013-04-19T16:03:19.156538+00:00 app[web.1]: Compiled admin/spree_core.css  (4771ms)  (pid 2)
2013-04-19T16:03:19.156538+00:00 app[web.1]: Compiled admin/spree_promo.css  (1ms)  (pid 2)
2013-04-19T16:03:19.156538+00:00 app[web.1]: Compiled admin/all.css  (4785ms)  (pid 2)
2013-04-19T16:03:19.156538+00:00 app[web.1]: Compiled pages.css  (0ms)  (pid 2)
2013-04-19T16:03:19.156538+00:00 app[web.1]: Compiled store/screen.css  (600ms)  (pid 2)
2013-04-19T16:03:19.156538+00:00 app[web.1]: Compiled store/spree_core.css  (609ms)  (pid 2)
2013-04-19T16:03:19.156538+00:00 app[web.1]: Compiled store/spree_promo.css  (11ms)  (pid 2)
2013-04-19T16:03:19.156538+00:00 app[web.1]: Compiled store/all.css  (631ms)  (pid 2)
2013-04-19T16:03:19.156538+00:00 app[web.1]: Completed 500 Internal Server Error in 5726ms
2013-04-19T16:03:19.149366+00:00 app[web.1]: 
2013-04-19T16:03:19.149366+00:00 app[web.1]: ActionView::Template::Error (File to import not found or unreadable: bootstrap.
2013-04-19T16:03:19.149366+00:00 app[web.1]: Load path: /app
2013-04-19T16:03:19.149366+00:00 app[web.1]:     2: <html>
2013-04-19T16:03:19.149366+00:00 app[web.1]:     7:   <%= csrf_meta_tags %>
2013-04-19T16:03:19.149842+00:00 app[web.1]:     8: </head>
2013-04-19T16:03:19.149366+00:00 app[web.1]:     4:   <title>Sample App</title>
2013-04-19T16:03:19.149842+00:00 app[web.1]:   app/assets/stylesheets/styles.css.scss:5
2013-04-19T16:03:19.149842+00:00 app[web.1]:   app/views/layouts/application.html.erb:5:in `_2bef37236eb3fbbf2665a458326374e1'
2013-04-19T16:03:19.149366+00:00 app[web.1]:     5:   <%= stylesheet_link_tag    "application", :media => "all" %>
2013-04-19T16:03:19.149366+00:00 app[web.1]:     6:   <%= javascript_include_tag "application" %>
2013-04-19T16:03:19.149366+00:00 app[web.1]:   (in /app/app/assets/stylesheets/styles.css.scss)):
2013-04-19T16:03:19.149366+00:00 app[web.1]:     3: <head>
2013-04-19T16:03:19.157636+00:00 heroku[router]: at=info method=GET path=/ host=guarded-headland-2911.herokuapp.com fwd="98.154.183.5" dyno=web.1 connect=6ms service=6092ms status=500 bytes=643
2013-04-19T16:03:27.655609+00:00 heroku[web.1]: Stopping remaining processes with SIGKILL
2013-04-19T16:03:27.655609+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least one process failed to exit within 10 seconds of SIGTERM
2013-04-19T16:03:29.492003+00:00 heroku[web.1]: Process exited with status 137
2013-04-19T16:08:01.494500+00:00 app[web.1]: Started GET "/" for 98.154.183.5 at 2013-04-19 16:08:01 +0000
2013-04-19T16:08:01.526972+00:00 app[web.1]: 
2013-04-19T16:08:01.526972+00:00 app[web.1]: ActionView::Template::Error (File to import not found or unreadable: bootstrap.
2013-04-19T16:08:01.526972+00:00 app[web.1]: Load path: /app
2013-04-19T16:08:01.526972+00:00 app[web.1]:   (in /app/app/assets/stylesheets/styles.css.scss)):
2013-04-19T16:08:01.526972+00:00 app[web.1]:     2: <html>
2013-04-19T16:08:01.526972+00:00 app[web.1]:     5:   <%= stylesheet_link_tag    "application", :media => "all" %>
2013-04-19T16:08:01.526972+00:00 app[web.1]:     7:   <%= csrf_meta_tags %>
2013-04-19T16:08:01.526972+00:00 app[web.1]:     6:   <%= javascript_include_tag "application" %>
2013-04-19T16:08:01.527299+00:00 app[web.1]: Completed 500 Internal Server Error in 20ms
2013-04-19T16:08:01.526972+00:00 app[web.1]:     3: <head>
2013-04-19T16:08:01.526972+00:00 app[web.1]:     4:   <title>Sample App</title>
2013-04-19T16:08:01.527299+00:00 app[web.1]: 
2013-04-19T16:08:01.527299+00:00 app[web.1]: 
2013-04-19T16:08:01.527299+00:00 app[web.1]:   app/assets/stylesheets/styles.css.scss:5
2013-04-19T16:08:01.527299+00:00 app[web.1]: Processing by PagesController#home as HTML
2013-04-19T16:08:01.527299+00:00 app[web.1]:     8: </head>
2013-04-19T16:08:01.527299+00:00 app[web.1]:   app/views/layouts/application.html.erb:5:in `_2be
f37236eb3fbbf2665a458326374e1'
2013-04-19T16:08:01.527299+00:00 app[web.1]:   Rendered pages/home.html.erb within layouts/application (0.2ms)
2013-04-19T16:08:01.536160+00:00 heroku[router]: at=info method=GET path=/ host=guarded-headland-2911.herokuapp.com fwd="98.154.183.5" dyno=web.1 connect=9ms service=82ms status=500 bytes=643 
```

我的样式表 application.css 文件如下所示：

```
/*
 * This is a manifest file that'll be compiled into application.css, which will include all the files
 * listed below.
 *
 * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,
 * or vendor/assets/stylesheets of plugins, if any, can be referenced here using a relative path.
 *
 * You're free to add application-wide styles to this file and they'll appear at the top of the
 * compiled file, but it's generally better to create a new file per style scope.
 *
 *= require_self
 *= require_tree .
 */ 
```

gemfile 看起来像这样：

```
source 'https://rubygems.org'

gem 'rails', '3.2.13'
gem 'jquery-rails'
gem 'spree', '1.3.2'
gem 'spree_gateway', :github => 'spree/spree_gateway', :branch => '1-3-stable'
gem 'spree_auth_devise', :github => 'spree/spree_auth_devise', :branch => '1-3-stable'

group :production do
    gem 'pg'
end

group :development, :test do
    gem 'sqlite3'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'bootstrap-sass', '~> 2.3.1'

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:46:30.637

如果我的评论不起作用。然后我建议以下。

1.  更改`application.css`为`application.css.scss`

2.  `*= require_tree .`从中删除 `application.css.scss`

3.  将以下行添加`@import "bootstrap";`到文件中的页面底部`application.css.scss`

唯一的问题是您将删除 Spree CSS 文件，因此 Spree 布局看起来不正确。目前 Spree 不提供对 Bootstrap 的官方支持。如果这不起作用，希望对 Spree 有更多了解的人可以帮助您。

# html - 阴影不适用于 IE 7 和 IE 8

> ID：16109267
> 
> 赞同：-5
> 
> 时间：2013-04-19T16:27:57.190
> 
> 标签：html, css

为什么这个 css 不能在 ie 7 和 ie 8 上工作

```
.shadow
{
    -moz-box-shadow: 3px 3px 4px rgba(0,0,0,0.4);
    -webkit-box-shadow: 3px 3px 4px rgba(0,0,0,0.4);
    -o-box-shadow: 3px 3px 4px rgba(0,0,0,0.4);
    -o-transition: box-shadow 0.4s;
    box-shadow: 3px 3px 4px rgba(0,0,0,0.4); /* For IE 8+ */
    zoom: 1;
    filter: progid:DXImageTransform.Microsoft.Shadow(color='#000000', Direction=145, Strength=3); /* For IE 5.5 - 7 */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:48:01.170

通过使用[它](http://css3pie.com/)，您可以应用阴影。检查一次

# jquery - Ajax 加载后未触发 Facebook 应用程序请求对话 (Rails Turbolinks)

> ID：16109268
> 
> 赞同：1
> 
> 时间：2013-04-19T16:27:59.210
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, facebook-javascript-sdk, turbolinks

我无法弄清楚如何在点击事件后加载 Facebook javascript，这会触发带有 Turbolinks 的 Ajax 请求。

我让我的 Javascript 的其余部分可以使用，但这并没有发生。

我在这段代码中使用了各种各样的品种：[https ://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

我试图实现这里提到的所有内容： [https ://github.com/rails/turbolinks/issues/25](https://github.com/rails/turbolinks/issues/25)

我已经尝试做同样的事情，让所有其余的 JS 工作，即使用 Turbolinks 触发 page:load 调用。

没有任何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T22:26:44.840

我还发现我的 Facebook 对话框在 Ajax 加载后停止触发，但这与 Facebook 无关。使用 Turbolinks，您必须在事件上绑定您的点击处理程序`page:load`（或者可能在 body 元素上使用事件委托） - 否则它们会丢失。请参阅[Turbolinks 上的 Railscast](http://railscasts.com/episodes/390-turbolinks)以及“[页面更改事件](http://edgeguides.rubyonrails.org/working_with_javascript_in_rails.html#page-change-events)”。

例子：

**项目.js.coffee.erb**

```
ready = ->
  $('a').click (event) ->
    alert('do something facebooky')
    event.preventDefault()

$(document).ready(ready)
$(document).on('page:load', ready) 
```

就我而言，我还必须改变 Facebook 的加载方式。请参阅[此问题](https://github.com/rails/turbolinks/issues/25)和[相应的解决方案](http://reed.github.io/turbolinks-compatibility/facebook.html)。这是我的画布应用程序中的代码。

**应用程序.html.erb**

```
<!-- I used no other facebook code -->
<div id="fb-root"></div> 
```

**facebook.js.coffee.erb**

```
#
# Get Facebook working with Turbo Links
# see: http://reed.github.io/turbolinks-compatibility/facebook.html
#

fb_root = null
fb_events_bound = false

$ ->
  loadFacebookSDK()
  bindFacebookEvents() unless fb_events_bound

bindFacebookEvents = ->
  $(document)
    .on('page:fetch', saveFacebookRoot)
    .on('page:change', restoreFacebookRoot)
    .on('page:load', ->
      FB?.XFBML.parse()
    )
  fb_events_bound = true

saveFacebookRoot = ->
  fb_root = $('#fb-root').detach()

restoreFacebookRoot = ->
  if $('#fb-root').length > 0
    $('#fb-root').replaceWith fb_root
  else
    $('body').append fb_root

loadFacebookSDK = ->
  window.fbAsyncInit = initializeFacebookSDK
  $.getScript("//connect.facebook.net/en_US/all.js#xfbml=1")

initializeFacebookSDK = ->
  FB.init
    appId     : "<%= ENV['FACEBOOK_APP_ID'] %>"
    channelUrl: "//" + window.location.host + "/channel.html"
    status    : true
    cookie    : true
    xfbml     : true
    frictionlessRequests  : true

  # Listen to the auth.login which will be called when the user logs in
  # using the Login button
  FB.Event.subscribe 'auth.login', (response) ->
    # We want to reload the page now so Ruby can read the cookie that the
    # Javascript SDK sat. But we don't want to use
    # window.location.reload() because if this is in a canvas there was a
    # post made to this page and a reload will trigger a message to the
    # user asking if they want to send data again.
    window.location = window.location

  FB.Canvas.setAutoGrow() 
```

# c++ - 我可以在同一个进程中运行多个 Ruby 解释器实例吗？

> ID：16109269
> 
> 赞同：3
> 
> 时间：2013-04-19T16:28:06.433
> 
> 标签：c++, c, ruby

我有一个应用程序需要运行与应用程序本身交互的 Ruby 代码作为一种扩展。问题是，我需要能够运行 Ruby 解释器的单独实例，因为一个扩展不能影响另一个。

另一个问题是我需要解释器完全包含在我的可执行文件中，所以 Rubinius 是毫无疑问的。MRuby，虽然还在开发中，但是好像可以这样运行，但是太有限了。有没有办法用 MRI 或任何其他比 MRuby 更强大的实现来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:41:48.393

你用什么语言编写你的基础应用程序？C++？

您可以分叉 Ruby 任务，这些任务将运行单独的 Ruby 实例，每个实例都是独立且自治的。您必须决定是否要与他们交谈和控制他们。或者您可以使用一些 IPC，`popen`用于在您的代码和正在运行的 Ruby 应用程序之间来回交流。

听起来你正处于“哎呀，如果不是很好”阶段，而不是“我该怎么做？” 阶段。查看“[如何控制 popen stdin、stdout、stderr 重定向？](https://stackoverflow.com/questions/280571/how-to-control-popen-stdin-stdout-stderr-redirection) ”进一步讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:40:07.697

Rubinius、JRuby 和 IronRuby 是我所知道的唯一能够在每个进程中拥有多个 Ruby 环境的工具。

# c++ - C++11类函数的多重定义

> ID：16109270
> 
> 赞同：0
> 
> 时间：2013-04-19T16:28:08.110
> 
> 标签：c++, class, function, c++11, multiple-definition-error

已解决：我完全是个傻瓜。在仔细检查所有文件并通过我们专有的依赖文件生成器进行追溯之后，事实证明确实存在最近添加到文件系统中的恶意 .cpp 包含，这导致了问题。对不起，谢谢大家的帮助！XD

我遇到了一个令人沮丧的问题，我希望有人能帮忙解决一个晦涩难懂的错误。基本上，我在头文件中声明一个通用类，如下所示：

```
//foo.h
#pragma once

class foo
{
  public:
    foo();
    ~foo();
    void random_function();
}; 
```

请注意，我已经声明了一次 pragma 以防止多个定义，并且所有函数原型都放在类定义中。对应的类定义如下：

```
// foo.cpp
#include "foo.h"

foo::foo() {
}

foo::~foo(){
}

void foo::random_function(){
//do stuff
} 
```

这个类在很多其他文件中使用。例如：

```
// bar.h
#include “foo.h”

class bar
{
  bar();
  ~bar();
  std::shared_ptr<foo> get_foo();
  std::shared_ptr<foo> my_foo;
}; 
```

但是当我编译时，类定义的每个函数成员都会出现以下错误：

```
bar.o: In function `foo:foo()':
dir/foo.cpp:80: multiple definition of `foo::foo()'
blah.o:dir/foo.cpp:80: first defined here
bar.o: In function `foo:foo()':
dir/foo.cpp:80: multiple definition of `foo::foo()'
blah.o:dir/foo.cpp:80: first defined here 
```

请注意它似乎连续两次重复相同的 3 行错误。对于每个构造函数/析构函数/函数声明，都会重复相同的错误模式。还要注意它似乎是在说 foo.cpp 中的函数 foo() 是首先在 foo.cpp 中定义的，这似乎没有多大意义。但我刚刚注意到，它以 bar.o 开头，然后是 blah.o ...？

真的在这个问题上摸不着头脑，似乎无法破译问题出在哪里或我应该看哪里。任何帮助将不胜感激！:D

附录：

*   我不能发布原始代码，因为它来自我的工作。我希望这个示例片段足以至少给出一些关于我应该从哪里开始寻找的方向，除非当前设置的代码有任何问题。
*   我没有在代码的其他地方包含任何 .cpp 文件。我只包括.h。
*   原始代码在头文件类声明的末尾有分号，只是忘记包含在此处发布的示例中。更新以反映这一点。
*   foo.h 的包含在所有文件中都是一致的（没有意外混合大小写）。
*   其他类似定义的类使用这种完全相同的模式，但奇怪的是没有产生相同的错误。:?
*   重申一下，我确定我不会在我的程序中的任何位置#include 任何 .cpp 文件，只有头文件会包含在程序的其他位置。
*   我也确信构造函数在头文件中声明为 foo(); 就像上面的代码示例一样，而不是 foo(){}。
*   编译器支持编译指示一次（使用 g++）。
*   修复了原始代码中未找到的上述示例中的另一个错字（头文件名周围的引号）
*   我正在开发的系统实际上非常大。整个代码中有许多包含和依赖项（甚至是一些循环依赖项），并且使用了一些在整个系统中传递的单例。上面的例子是我在最基本层面上看到的问题的简化表示，我看到的上述错误实际上是为我已经合并到系统中的许多新文件（不仅仅是一个）生成的. 奇怪的是，我以类似方式定义的其他文件没有也没有产生这个问题，这就是为什么我很困惑它现在似乎正在引起问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:39:46.470

尝试添加 foo.h

```
#ifndef FOO_H
#define FOO_H

//foo class and stuff

#endif 
```

# python - Sqlite3 子查询参数化

> ID：16109271
> 
> 赞同：0
> 
> 时间：2013-04-19T16:28:11.450
> 
> 标签：python, python-3.x, sqlite

我正在使用 Python 3.3 中的 Sqlite3。我正在尝试运行以下查询：

```
c.execute('INSERT OR REPLACE INTO system (id, date,code,number) VALUES 
((select id from system where date=:date, code=:thiscode), :date,:thiscode, 
coalesce((select profiles from system where date=:date, code=:thiscode), 1))', 
{"date": mdate, "thiscode": thiscode}) 
```

该表用于跟踪一个月内发生的代码实例数。如果月份的日期/代码组合已经存在，则将其编号加 1，否则使用 number=1 创建它。

给出的错误是无用的

```
sqlite3.OperationalError: near ",": syntax error 
```

我猜原因涉及子查询参数化，因为我没有看到其他人使用它的例子，但我愿意接受建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:14:10.810

```
where date=:date, code=:thiscode 
```

这是什么意思？我猜你想写这个：

```
where date=:date and code=:thiscode 
```

# solr - 如何在 SOLR 查询中排除字段

> ID：16109273
> 
> 赞同：11
> 
> 时间：2013-04-19T16:28:23.773
> 
> 标签：solr, solr-query-syntax

我有一个 SOLR 查询，它应该获取我存储的所有字段，除了一个字段。
假设我有**20 个**字段，我是否需要对要获取的**19 个**
`&fl=[f],[f],[f],....[f]'`
字段进行硬编码 或者有没有办法做类似的事情
`&fl=*,![f]'`

`[f]`代表字段名称。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-19T17:24:16.403

不幸的是，通过查询字符串删除字段名称的能力仍然是一个突出的改进请求。有关详细信息，请参阅[SOLR-3191 。](https://issues.apache.org/jira/browse/SOLR-3191)

在实施此改进之前，您需要在`fl`参数中指定所有 19 个字段。但是，您可以更新您的默认`/select`requestHandler 以定义您想要返回的 19 个字段作为将应用于所有查询的默认设置，除非它在查询字符串中被覆盖。

这是示例 solrconfig.xml 中默认`/select`requestHandler 的修改版本：

```
 <requestHandler name="/select" class="solr.SearchHandler">
    <!-- default values for query parameters can be specified, these
     will be overridden by parameters in the request
     -->
    <lst name="defaults">
      <str name="echoParams">explicit</str>
      <int name="rows">10</int>
      <str name="df">text</str>
      <!-- Only showing 3 fields for this example -->
      <str name="fl">field1,field2,field3</str>
    </lst>
  </requestHandler> 
```

有关这些默认设置和 requestHandler 配置的更多详细信息，请参阅[SolrConfig 中的 RequestHandlers 和 SearchComponents](http://docs.lucidworks.com/display/solr/RequestHandlers+and+SearchComponents+in+SolrConfig)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-28T20:23:04.677

另一种选择可能是：您想要包含的字段应该共享一个公共前缀；最重要的是，您可以在 fl 中使用 glob。因此，例如，假设前缀是 tobeincluded_ 你可以有一个 fl 值，如

被包括_*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-07T21:25:58.647

另一种选择是使用[文档转换器 ValueAugmenterFactory](https://cwiki.apache.org/confluence/display/solr/Transforming+Result+Documents#TransformingResultDocuments-[value]-ValueAugmenterFactory)将字段返回的实际值替换为空字符串。

如果您的要求只是避免返回该字段的内容，这应该可以工作。

下面是一个替换标题字段内容的示例：

```
&fl=*,title:[value v=""] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-02T21:15:25.450

还有另一个更简单的补丁可以解决这里的简单情况：[https](https://issues.apache.org/jira/browse/SOLR-9467) ://issues.apache.org/jira/browse/SOLR-9467如果被接受，它将像这样工作：

```
&fl=*,[fl.rm v="title"] 
```

删除标题字段。

# google-drive-api - 批量修订控制是否可行？

> ID：16109275
> 
> 赞同：1
> 
> 时间：2013-04-19T16:28:32.133
> 
> 标签：google-drive-api

我有一个包含 100 个 png 文件的驱动器文件夹。

现在我想为每个 png 文件添加水印并上传每个文件的新版本。（抱歉，水印是事后才想到的。我会在以后的文件夹中采取预防措施：（）

有什么办法可以上传新版本的整个文件夹吗？（驱动器上的旧文件夹中的文件已经附加了一些元数据（如描述和属性）。我不想破坏它，但想将其移动到每个文件的新版本。）

或者以其他方式实现这一目标的最有效方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T23:40:45.677

您需要递归地遍历文件夹下的每个文件并为每个文件上传一个新的 blob：[https ://developers.google.com/drive/manage-uploads](https://developers.google.com/drive/manage-uploads)

# gwt - 使用触控板在 Mac 上使用 GWT MouseWheelEvent 缩放太快

> ID：16109281
> 
> 赞同：0
> 
> 时间：2013-04-19T16:28:45.450
> 
> 标签：gwt, canvas, mousewheel

我正在捕获用于在画布上放大/缩小的 MouseWheelEvent。在 Firefox、Chrome 和 IE 下使用 Windows 7 上的实际鼠标滚轮可以正常工作，但在 Mac OS X 上，使用触控板会导致缩放发生得太快。

我已经看到其他使用本机 JavaScript 规范化车轮增量的解决方案，这些解决方案涉及从鼠标滚轮事件中检索到的细节，但是有没有办法使用带有 GWT 的 Java 来做到这一点，它只提供对车轮增量的访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T01:43:40.227

车轮增量变化也可以通过操作系统进行更改。

您能否确认只有您的网站滚动速度过快？

你能设置最大滚动速度吗？

通过 Jquery 或其他插件处理滚动事件以规范跨浏览器的输入？

# xml - XSLT For-Each 循环从枚举标签中获取数据？

> ID：16109282
> 
> 赞同：2
> 
> 时间：2013-04-19T16:28:48.547
> 
> 标签：xml, xslt, foreach

我得到了一个 SML 文件，设计师（不在我的公司，所以我无法控制）创建了一些我需要使用的数据；但他们设置了枚举标签，所以我很难创建一个循环来读取数据。

他们的代码看起来像

```
 <Root>
    <Subjects>
    <...more XML Data>
    <Data>
      <...other XML Data>
      <Demographic_Information>
            <Age1>33</Age1>
            <Age2>66</Age2>
            <Age3 />
            <Age4 />
            <Age5 />
            <Age6 />
            <Age7 />
            <Age8 />
            <Age9 />
            <Age10 />
            <Gender1>M</Gender1>
            <Gender2>F</Gender2>
            <Gender3 />
            <Gender4 />
            <Gender5 />
            <Gender6 />
            <Gender7 />
            <Gender8 />
            <Gender9 />
            <Gender10 />
            <Race1>W</Race1>
            <Race2>H</Race2>
            <Race3 />
            <Race4 />
            <Race5 />
            <Race6 />
            <Race7 />
            <Race8 />
            <Race9 />
            <Race10 />
        </Demographic_Information>
        </...other XML Data>
    </Data>
    </...more XML Data>
   </Subjects>
  </Root> 
```

我只需要遍历它，并确保 Age1、Gender1 和 Race1 进入我的数据，例如

```
<Person subject="1">
    <Age>33</Age>
    <Gender>M</Gender>
    <Race>W</Race>
</Person>
<Person subject="2">
    <Age>66</Age>
    <Gender>F</Gender>
    <Race>A</Race>
</Person> 
```

这是较大集合中的数据子集，但如果可能，我需要将其转换为这种格式。我确信它可以完成，我只是不知道如何去做。

我的 XSLT 是 Microsoft Visual Studio 2008 中的 1.0 版。我从

```
<xsl:template match="/Root/Subjects"> 
```

***已修改以提供我的问题的更好示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T16:59:29.027

这是一个有效的快速尝试 - 我将继续研究这个以找到效率，但我想给你一个答案。

**编辑：感谢@MartinHonnen 的简化。**

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:variable
     name="vNums"
     select="'0123456789'"/>

  <xsl:key
     name="kElemByNumber"
     match="Demographic_Information/*"
     use="translate(name(), translate(name(), $vNums, ''), '')"/>

  <xsl:template match="/*">
    <Demographic_Information>
      <xsl:apply-templates 
        select="*[generate-id() = 
                  generate-id(key(
                    'kElemByNumber',
                    translate(name(), translate(name(), $vNums, ''),
                    ''
                  ))[1])][normalize-space()]">
        <xsl:sort
          select="translate(name(), translate(name(), $vNums, ''), '')"
          data-type="number"/>
      </xsl:apply-templates>
    </Demographic_Information>
  </xsl:template>

  <xsl:template match="*">
    <Person subject="{position()}">
      <xsl:apply-templates
        select="key('kElemByNumber', position())"
        mode="children">
        <xsl:sort select="name()"/>
      </xsl:apply-templates>
    </Person>
  </xsl:template>

  <xsl:template match="*" mode="children">
    <xsl:element name="{translate(name(), $vNums, '')}">
      <xsl:apply-templates/>
    </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

**...应用于提供的源 XML：**

```
<Demographic_Information>
  <Age1>33</Age1>
  <Age2>66</Age2>
  <Age3/>
  <Age4/>
  <Age5/>
  <Age6/>
  <Age7/>
  <Age8/>
  <Age9/>
  <Age10/>
  <Gender1>M</Gender1>
  <Gender2>F</Gender2>
  <Gender3/>
  <Gender4/>
  <Gender5/>
  <Gender6/>
  <Gender7/>
  <Gender8/>
  <Gender9/>
  <Gender10/>
  <Race1>W</Race1>
  <Race2>H</Race2>
  <Race3/>
  <Race4/>
  <Race5/>
  <Race6/>
  <Race7/>
  <Race8/>
  <Race9/>
  <Race10/>
</Demographic_Information> 
```

**...产生了想要的结果：**

```
<Demographic_Information>
  <Person subject="1">
    <Age>33</Age>
    <Gender>M</Gender>
    <Race>W</Race>
  </Person>
  <Person subject="2">
    <Age>66</Age>
    <Gender>F</Gender>
    <Race>A</Race>
  </Person>
</Demographic_Information> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:18:21.383

另一种选择：

```
<?xml version="1.0"?> 
<xsl:stylesheet
   version="1.0"     
   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
>
    <xsl:output encoding="utf-8" method="xml" indent="yes"/>

    <xsl:template match="/Demographic_Information">
        <Demographic_Information>
            <xsl:for-each select="./*[starts-with(name(), 'Age')][normalize-space()]">
                <xsl:variable name="i"><xsl:value-of select="string(position())"></xsl:value-of></xsl:variable>
                <Person>
                    <xsl:attribute name="subject"><xsl:value-of select="$i"/></xsl:attribute>
                    <Age>
                        <xsl:apply-templates select="node()" />
                    </Age>
                    <xsl:apply-templates select="../*[starts-with(name(), 'Gender')][position()=$i]"/>
                    <xsl:apply-templates select="../*[starts-with(name(), 'Race')][position()=$i]"/>
                </Person>
            </xsl:for-each>
        </Demographic_Information>
    </xsl:template>

    <xsl:template match="*[starts-with(name(), 'Age')]">
        <xsl:copy>
            <xsl:apply-templates select="node()" />
        </xsl:copy>
    </xsl:template>
    <xsl:template match="*[starts-with(name(), 'Gender')]">
        <Gender>
            <xsl:apply-templates select="node()" />
        </Gender>
    </xsl:template>
    <xsl:template match="*[starts-with(name(), 'Race')]">
        <Race>
            <xsl:apply-templates select="node()" />
        </Race>
    </xsl:template>

   <!-- defaults -->
    <xsl:template match="text()">
        <xsl:value-of select="."/>
    </xsl:template>
    <xsl:template match="node()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T17:08:56.793

以下会做。但也许不是最快的解决方案。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes" />

    <xsl:template match="@*|node()">
        <xsl:apply-templates />
    </xsl:template>

    <xsl:template match="*[substring(name(),1,3) = 'Age']">
        <xsl:variable name="id" select="substring(name(),4)"/>
        <Person id="{$id}">
            <Age><xsl:value-of select="."/></Age>
            <Gender><xsl:value-of select="//*[name() =concat('Gender',$id)]"/></Gender>
            <Race><xsl:value-of select="//*[name() =concat('Race',$id)]"/></Race>
    </Person>
    </xsl:template>

    <xsl:template match="/" >
        <xsl:apply-templates />
    </xsl:template>
</xsl:stylesheet> 
```

# javascript - 将 responseText 对象转换为字符串以进行警报

> ID：16109288
> 
> 赞同：0
> 
> 时间：2013-04-19T16:29:01.753
> 
> 标签：javascript

我正在尝试使用 Javascript 从 .txt 文件中获取文本。我正在尝试通过使用警报语句显示文件中的文本来测试我的代码。

我收到了这个警告框：

![例子](https://i.stack.imgur.com/UcZMg.png)

这是我的代码：

```
$(document).ready(function() {
    // Obtain services text from .txt file
    var text = new XMLHttpRequest();
    text.open("GET", "js/servText.txt", true);
    text.onreadystatechange = function() {
        // Check states 4 = Ready to parse, 200 = found file
        if(text.readyState === 4 && text.readyState === 200) {
            text = text.responseText;
        }
    }
    alert(text);
    text.send(null);
}); 
```

我曾尝试使用 JSON.stringify(); 但我收到一个带有“{}”的警告框，但它在 Google Chrome 中不起作用。

我也尝试使用 toString(); 和字符串（）；

任何帮助都会很棒！谢谢-克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:31:50.903

您需要将您的`alert`语句移动*到*回调中。：

```
$(document).ready(function() {
    // Obtain services text from .txt file
    var text = new XMLHttpRequest();
    text.open("GET", "js/servText.txt", true);
    text.onreadystatechange = function() {
        // Check states 4 = Ready to parse, 200 = found file
        if(text.readyState === 4 && text.status === 200) {
            alert(text.responseText);
        }
    }
    text.send(null);
}); 
```

顾名思义，AJAX 调用是异步的。您会*立即*`alert`被调用，它不会等待 AJAX 请求完成。

 *异步可能令人难以置信。您的代码不会从上到下运行，而是您必须查看事件。活动从哪里开始？我有什么数据？等等*

# c - C中的“设备不适当的ioctl”错误

> ID：16109289
> 
> 赞同：3
> 
> 时间：2013-04-19T16:29:02.480
> 
> 标签：c, getch

我有一个`getch()`我的导师给我的功能，它可以在不点击“ENTER”的情况下从键盘获取输入。但是，当我在 Eclipse 的 Ubuntu 12 中运行它时，出现以下错误：

```
tcsetattr(): Inappropriate ioctl for device
tcsetattr ICANON: Inappropriate ioctl for device 
```

这是我的代码：

```
#include <stdio.h>
#include <unistd.h>
#include <termios.h>

char getch();

int main(int argc, const char* argv[])
{
    char c;
    do
    {
        c=getch();
        printf("%c",c);
    } while(c!='q');

    return 0;
}

char getch()
{
    char buf = 0;
    struct termios old = {0};
    if (tcgetattr(0, &old) < 0)
        perror("tcsetattr()");
    old.c_lflag &= ~ICANON;
    old.c_lflag &= ~ECHO;
    old.c_cc[VMIN] = 1;
    old.c_cc[VTIME] = 0;

    if (tcsetattr(0, TCSANOW, &old) < 0)
        perror("tcsetattr ICANON");
    if (read(0, &buf, 1) < 0)
        perror ("read()");
    old.c_lflag |= ICANON;
    old.c_lflag |= ECHO;
    if (tcsetattr(0, TCSADRAIN, &old) < 0)
        perror ("tcsetattr ~ICANON");
    return (buf);
} 
```

注意：该代码在 SSH 安全外壳中工作。但是我必须在我的 Ubuntu 中完成这项工作，因为我在那里编写了我的代码。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T16:49:19.200

这可能是因为 Eclipse 没有为在 IDE 下运行的程序提供*[伪终端。](http://linux.die.net/man/7/pty)*试试这个依赖非阻塞 I/O 而不是终端控制的替代方案。

```
#include <errno.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

#define perror_exit(msg) do { perror(msg); exit(1); } while(0)

#if defined EAGAIN && defined EWOULDBLOCK
#define retry_p(err) ((err) == EAGAIN || (err) == EWOULDBLOCK)
#elif defined EAGAIN
#define retry_p(err) ((err) == EAGAIN)
#elif defined EWOULDBLOCK
#define retry_p(err) ((err) == EWOULDBLOCK)
#else
#error "Don't know how to detect read-would-block condition."
#endif

int
main(void)
{
    int flags = fcntl(0, F_GETFL);
    if (flags == -1)
        perror_exit("fcntl(F_GETFL)");
    flags |= O_NONBLOCK;
    if (fcntl(0, F_SETFL, flags))
        perror_exit("fcntl(F_SETFL, O_NONBLOCK)");

    for (;;)
    {
       char ch;
       ssize_t n = read(0, &ch, 1);
       if (n == 1)
       {
           putchar(ch);
           if (ch == 'q')
               break;
       }
       else if (n < 0 && !retry_p(errno))
          perror_exit("read");
    }
    return 0;
} 
```

如果这仍然不起作用，请尝试修改它以*同时*执行此操作和您的`getch()`操作，忽略失败`tcsetattr`和`tcgetattr`何时`errno == ENOTTY`。

请注意，此代码和您的原始代码都在忙于等待 I/O，这是不好的做法。您*真正*应该做的是使用[ncurses](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)库，它具有更复杂的方法来同时处理和等待更适合多任务环境的输入，并且还可以处理您的缺乏-a-tty 问题和任意数量的其他你不想浪费精力的低级头痛。

# c++ - 如何正确打印 ac 字符串中的每个元素？

> ID：16109290
> 
> 赞同：2
> 
> 时间：2013-04-19T16:29:04.440
> 
> 标签：c++, string

```
#include <stdio.h>
#include <iostream>

using namespace std;

int main(){
    char *a[20];
    FILE * fin = fopen("testtest.txt","r");
    int i;

    fscanf(fin,"%s",a);

    for(i=0;i<20;i++)
    {
        printf("%c\n",a[i]);
    }

    system("pause");
} 
```

在这个程序中，我想打印数组中的每个元素，它应该是 ABCDE 但实际上它打印：

似乎每个元素都很奇怪，我应该如何正确打印它？

```
A
E
─
╒
┴
■
┌
·
Φ

8
↔

p
╘
╠
x
3
☻ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T16:30:39.110

的类型`a`是 的数组`char*`，而不是 的数组`char`。改成：

```
char a[20]; 
```

建议在最高警告级别编译，并将警告视为错误。例如：

```
$ gcc -Wall -Werror -pedantic main.c
main.c：在函数'main'中：
main.c:9:5：错误：格式“%s”需要“char *”类型的参数，但参数 2 的类型为“char **”[-Werror=format]
main.c:10:5：错误：格式“%c”需要“int”类型的参数，但参数 2 的类型为“char *”[-Werror=format]
cc1：所有警告都被视为错误

```

在尝试使用变量之前检查结果`fopen()`并`fscanf()`确定文件已打开并已读入数据。`a`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:30:49.023

`a``char` *是一个包含 20 个指针*的数组。我想你想要一个 20 个字符的数组

```
char a[20]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:36:18.113

```
char a[20];
FILE * fin = fopen("testtest.txt","r");
int i;

fscanf(fin,"%19s",a); 
```

# java - Java 正则表达式替换字符串中的负字节

> ID：16109293
> 
> 赞同：2
> 
> 时间：2013-04-19T16:29:13.723
> 
> 标签：java, regex

我正在从网络 (html) 获取日期：“ abril 2013 Viernes 19”

**我已经尝试了所有正常的正则表达式，但没有成功。**

最后我发现了字符串字节（str.getBytes（）），这是值：

```
[-96, 97, 98, 114, 105, 108, -96, -96, -96, 50, 48, 49, 51, -96, -96, 86, 105, 101, 114, 110, 101, 115, -96, 49, 57] 
```

**这是什么-96？**

如何用 1 个空格替换 1 个或多个 -96 或任何空白空间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T16:39:32.883

字节 -96（十六进制的 A0，或 160 作为无符号字节）是 ISO-8859-1 字符编码中的不间断空格，这可能是您用于将字符串转换为字节的编码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T16:39:41.010

第一个字节 (-96) 是负数，因为在 Java 中字节是有符号的。它对应于字符 160 (256 - 96)，它是一个[不间断的空格](http://www.ascii-code.com/)。您需要直接在正则表达式中指定该字符。

```
str = str.replaceAll(String.valueOf((char) -96), " "); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T06:45:16.883

您应该能够使用该`Character.isSpaceChar`功能来执行此操作。如[对相关问题的回复中所述](https://stackoverflow.com/a/6255512/1427124)，您可以在 java regex 中使用它，如下所示：

```
String sampleString = "\u00A0abril\u00A0\u00A02013\u00A0Viernes\u00A019";
String result = sampleString.replaceAll("\\p{javaSpaceChar}", " "); 
```

我认为这将完全符合您的要求，同时避免任何处理原始字节的需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T06:31:11.857

我以这种方式修复了（如果有人有更好的答案，我将不胜感激）：

```
byte[] b=str.getBytes();
for (int i = 0; i < b.length; i++) {
    if (b[i]==-96)
        b[i]=" ".getBytes()[0];
}
String strOut=new String(b).trim();
Pattern blank=Pattern.compile("\\s+|\b+|\t+|\n+|\f+|\r+");
strOut=blank.matcher(strOut).replaceAll(" "); 
```

感谢每个机构的帮助！

# actionscript-3 - 错误 1118：将静态类型 Object 的值隐式强制转换为可能不相关的类型 Function

> ID：16109305
> 
> 赞同：0
> 
> 时间：2013-04-19T16:29:55.023
> 
> 标签：actionscript-3, actionscript

我在我的 Actionscript 3.0 文件中不断收到错误“错误 1118：将静态类型 Object 的值隐式强制转换为可能不相关的类型 Function”。

我的代码是：

```
var myBox:Object = new Object();
colourcb.addEventListener("change", myBox);

myBox.change = function(){
outline.gotoAndStop(colourcb.value);
} 
```

我正在尝试使用组合框更改影片剪辑的帧。任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:38:10.190

您似乎混合了 AS2 和 AS3 语法。尝试这个：

```
colourcb.addEventListener(Event.CHANGE, changeHandler);

function changeHandler(event:Event):void
{
    outline.gotoAndStop(colourcb.value);
} 
```

# jquery - 滚动时，粘性导航栏（hcSticky）位于引导轮播图像下方

> ID：16109317
> 
> 赞同：0
> 
> 时间：2013-04-19T16:30:29.680
> 
> 标签：jquery, css, twitter-bootstrap, hcsticky

[您可以在这个演示](http://jsfiddle.net/Trufa/7FJvf/13/)中非常清楚地看到这个问题。

我有一个粘性引导导航栏，用[hcSticky 粘贴](http://someweblog.com/hcsticky-jquery-floating-sticky-plugin/)。

当你向下滚动时，当你通过引导轮播的图像时，这些在导航栏上，它应该是相反的。

粘性导航栏以通常的方式实例化：

```
$("#thenav").hcSticky(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:30:29.680

这是一个简单的问题`z-index`。

只需添加：

```
#thenav{
    z-index:1;
} 
```

问题应该得到解决，请参见[此处](http://jsfiddle.net/Trufa/7FJvf/14/)的演示。

# ios - 更改方向时 UIView 框架未正确更新

> ID：16109327
> 
> 赞同：1
> 
> 时间：2013-04-19T16:30:53.110
> 
> 标签：ios, objective-c, uiview, autorotate

我`UIView`用两个文本标签和两个按钮进行了自定义。它在创建时功能齐全，但现在我试图在屏幕旋转时移动它（即从纵向到横向）。

尽管 UI 元素似乎被正确移动，但实际`UIView`的框架最终会做一些奇怪的事情，比如变成一个矩形，当它最初是一个正方形并且被设置为一个正方形但具有不同的 x、y 位置时。

我看到这一点的方法是将我`UIView`的背景颜色设置为黑色并观察我的背景图像被绘制在我希望绘制视图的位置，但`UIView`背景变成了不同的形状并且被绘制在错误的位置。

这是我的代码：

```
- (void) moveControls
{
    CGRect frame;

    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
    switch (orientation)
    {
        case UIDeviceOrientationPortrait:
        case UIDeviceOrientationPortraitUpsideDown:
            frame = CGRectMake(0, 120, 320, 320);
            break;
        case UIDeviceOrientationLandscapeLeft:
        case UIDeviceOrientationLandscapeRight:
            frame = CGRectMake(120, 0, 320, 320);
            break;
        case UIDeviceOrientationFaceDown:
        case UIDeviceOrientationFaceUp:
        case UIDeviceOrientationUnknown:
           return;
    }

    [self setFrame:frame];

    backgroundImage.frame = CGRectMake(0,0, frame.size.width, frame.size.height);
    titleLabel.frame = CGRectMake(0,50,frame.size.width,frame.size.height/2);
    titleLabel.numberOfLines = 0;
    titleLabel.lineBreakMode = NSLineBreakByWordWrapping;
    textLabel.frame = CGRectMake(0,frame.size.height/3,frame.size.width,frame.size.height/3);
    doneButton.frame = CGRectMake(frame.size.width - 154, frame.size.height - 90, 100, 34);
    tellButton.frame =CGRectMake(54, frame.size.height - 90, 100, 34);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:24:30.983

并没有真正回答所有问题，但解决了问题： [ios: UIView's width and height after changed orientation is inaccurate?](https://stackoverflow.com/questions/16110076/ios-uiviews-width-and-height-after-changing-orientations-is-inaccurate)

```
view.center = view.superview.center;
view.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin |  UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleBottomMargin; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:01:36.930

利用：

```
- (void) moveControls
{
    CGRect frame;

    UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
    if (UIDeviceOrientationIsLandscape(orientation))
        frame = CGRectMake(120, 0, 320, 320);
    else
        frame = CGRectMake(0, 120, 320, 320);

    [self setFrame:frame];

    backgroundImage.frame = CGRectMake(0,0, frame.size.width, frame.size.height);
    titleLabel.frame = CGRectMake(0,50,frame.size.width,frame.size.height/2);
    titleLabel.numberOfLines = 0;
    titleLabel.lineBreakMode = NSLineBreakByWordWrapping;
    textLabel.frame = CGRectMake(0,frame.size.height/3,frame.size.width,frame.size.height/3);
    doneButton.frame = CGRectMake(frame.size.width - 154, frame.size.height - 90, 100, 34);
    tellButton.frame =CGRectMake(54, frame.size.height - 90, 100, 34);
} 
```

# c# - ASP 从 GridView 内的 RadioButtonList 读取值

> ID：16109330
> 
> 赞同：2
> 
> 时间：2013-04-19T16:31:04.823
> 
> 标签：c#, asp.net, gridview

我有一个 ASP.NET GridView，我用数据、一个按钮和一个带有 4 个单选按钮的 RadioButtonList 填充。如何通过按下 GridView 外部的按钮（使用 c# 代码隐藏）来选择哪个单选按钮？GridView 内的按钮将用于删除一行（我认为是 RowCommand 事件......）

GridView 中的代码：

```
<Columns>
    <asp:BoundField DataField="name" HeaderText="Name" />
    <asp:BoundField DataField="value" HeaderText="Value" />
    <asp:TemplateField ShowHeader="false" HeaderText="Foo?">
        <ItemTemplate>
            <asp:RadioButtonList ID="RadioButtonList1" runat="server" RepeatDirection="Horizontal">
                <asp:ListItem Selected="true">Item 1</asp:ListItem>
                <asp:ListItem>Item 1</asp:ListItem>
                <asp:ListItem>Item 2</asp:ListItem>
                <asp:ListItem>Item 3</asp:ListItem>
                <asp:ListItem>Item 4</asp:ListItem>
            </asp:RadioButtonList>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField ShowHeader="false" HeaderText="">
        <ItemTemplate>
            <asp:Button ID="Button1" runat="server" Text="Remove" />
        </ItemTemplate>
    </asp:TemplateField>
</Columns> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:51:03.447

To know which RadioButton was selected follow these steps from your current code:

Modify your button to this:

```
<asp:TemplateField ShowHeader="false" HeaderText="">
    <ItemTemplate>
        <asp:Button ID="Button1" runat="server" Text="Remove" CommandArgument="<%#  ((GridViewRow) Container).RowIndex%>"
            CommandName="remove" />
    </ItemTemplate>
</asp:TemplateField> 
```

so now you have `CommandName` and `CommandArgument` properties filled in. The `CommandArgument` will pass the index of the row to your `RowCommand` event.

Then your `RowCommand` event looks like this:

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "remove")
    {
        int index = Convert.ToInt32(e.CommandArgument);
        if (index >= 0)
        { 
            //index is the row, now obtain the RadioButtonList1 in this row
            RadioButtonList rbl = (RadioButtonList)GridView1.Rows[index].FindControl("RadioButtonList1");
            if (rbl != null)
            {
                string selected = rbl.SelectedItem.Text;
                Response.Write("Row " + index + " was selected, radio button " + selected);
            }
        }
    }
} 
```

**Note**: I would recommend adding `Value` to your `RadioButtons` so that you check against values and not text.

# python - 从 csv 导入 Sage 并绘制大于 10 的数字

> ID：16109333
> 
> 赞同：4
> 
> 时间：2013-04-19T16:31:10.613
> 
> 标签：python, csv, scatter-plot, sage

好的，问题很简单：

我尝试绘制一个简单的散点图：

```
import csv

a = csv.reader(open(DATA+'testi1.csv'))

G = Graphics()

  for col in a:  
  time = col[0]  
  conversion = col[2]  
  x_series = time  
  y_series = conversion  
  plot = scatter_plot (zip(x_series,y_series))  
  G += plot 

G.set_axes_range(0, 20, 0, 20)

G 
```

从这个数据：

```
1,2,3  
2,4,6  
3,6,9  
4,8,12  
5,10,15  
6,12,18 
```

这导致图形工作正常，直到我们得出值 12 15 18
它的图形如下：

```
1,3  
2,6  
3,9  
4,1  
5,1  
6,1 
```

我尝试了同样的方法直接输入值：

```
G = Graphics()

x_series = (1,2,3,4,5,6)  
y_series = (3,6,9,12,15,18)  
plot = scatter_plot(zip(x_series,y_series))  
G += plot 

G.set_axes_range(0, 20, 0, 20)

G 
```

这导致图形工作得很好，它被绘制没有问题。我认为问题出在 csv.reader 上，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:46:36.553

好的，你可以试试这个：

```
import csv

a = csv.reader(open(DATA+'testi1.csv'))
G = Graphics()

# create 2 lists so as to save the desired column fields
x_series=[]
y_series=[]

# iterate the csv file
for x,y,z in a:
  # append the first and third columns to
  # x_series and y_series list respectively
  x_series.append( int(x) )
  y_series.append( int(z) )

# then make the scatter plot
plot = scatter_plot(zip(x_series,y_series))  
G += plot 

G.set_axes_range(0, 20, 0, 20)

G 
```

# plsql - PL SQL 过程声明/定义

> ID：16109341
> 
> 赞同：0
> 
> 时间：2013-04-19T16:31:24.827
> 
> 标签：plsql, plsqldeveloper

我是 PL/SQL 的新手，所以只是想弄清楚创建包的一般流程

```
CREATE OR REPLACE PACKAGE P1 AS
     PROCEDURE PROC1
     (
     );
END P1;

CREATE OR REPLACE PACKAGE BODY P1 AS
    //package definition
END P1; 
```

这是定义包的正确方法吗？

基本上，我想知道我是否可以在同一个文件中声明包并定义包体，还是需要创建 2 个单独的文件？

当我尝试执行它时，我得到了错误`Encountered the word 'PROCEDURE' when expecting one of the following`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:29:26.253

通常，您将包的规范放在一个文件中，而将正文放在另一个文件中。你为什么要把它们放在同一个文件中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:38:19.267

单独的包没关系，但你必须在正文之前声明规范。

在创建多个包的情况下，最好先创建所有规范，因为主体可以编译，即使它们引用了尚未为其创建主体的不同包。

# svn - ant .svn 被复制，源包含被忽略

> ID：16109343
> 
> 赞同：0
> 
> 时间：2013-04-19T16:31:29.467
> 
> 标签：svn, ant, javac

```
 <target name="compile">
<javac destdir="${build.dir}/classes"
  classpathref="${build.classpath}"
  debug="on">
  <src path="${src.dir}"/>
  <include name="package1/**/*.java"/>
</javac> 
```

问题

1.  编译源 ${src.dir} 下的所有 java 文件，不仅是 package1，还包括其他包。
2.  源目录位于 SVN 签出工作区中，.svn 被复制到 ${build.dir}/classes。

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:15:53.023

您是在告诉 javac 仅在`package1`.

删除这一行：

`<include name="package1/**/*.java"/>`

该`.svn`目录包含带有`.java`扩展名的文件。将此添加到`javac`任务：

`<excludes name="**/.svn/**"/>`

您的目标代码将是：

```
<target name="compile">
<javac destdir="${build.dir}/classes"
  classpathref="${build.classpath}"
  debug="on">
  <src path="${src.dir}"/>
  <excludes name="**/.svn/**"/>
</javac>
</target> 
```

# c# - 从 B 类更新由 A 类创建的 X 类。封装问题

> ID：16109344
> 
> 赞同：0
> 
> 时间：2013-04-19T16:31:34.520
> 
> 标签：c#, design-patterns, encapsulation

上一个问题（更简单）：[从另一个类更新类，封装问题](https://stackoverflow.com/questions/16107764/update-class-from-another-class-encapsulation-issue)

例子：

```
class User
{
    public void BeginWork(Device device)
    {
        Command command = new Command(1);

        device.ExecuteCommand(command);

        Console.WriteLine("Result={0}", command.Result);
    }
}

class Command
{
    public int Code {get; private set;}

    public Command(int code) { Code = code; }

    public int Result { get; set; }
}

class Device
{

    public void ExecuteCommand(Command command)
    {
        /* ... */

        // Analyzing and execution of command leads to a result

        if(command.Code == 1) command.Result = 5;
        else if(command.Code == 2) command.Result = 36;

        /* ... */
    }

} 
```

用法：

```
 User u = new User();
        Device d = new Device();
        u.BeginWork(d); 
```

如您所见，封装被`Result`类属性的公共集访问器破坏`Command`

不建议更改方法`ExecuteCommand`返回结果。实际情况要复杂得多。

如何保持封装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:41:22.203

一种方法是将请求和结果的概念分开。所以你有一个CommandRequest 和一个CommandResult 类。然后 Device 类可以构造 CommandResult 类，并且它不需要公共设置器（不可变）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T22:47:32.050

在一个程序集中定义命令和设备，在另一个程序集中定义用户。然后在内部制作 Result 的设置器。

```
public int Result { get; internal set; } 
```

# ios - 魔法记录未编译

> ID：16109347
> 
> 赞同：1
> 
> 时间：2013-04-19T16:31:42.963
> 
> 标签：ios, cocoa, compiler-errors, magicalrecord

我是 Xcode、C、Objective-C 的新手，我有这个为 Magical Record 编译的错误。提供源代码的项目正在编译，只有我的项目没有。

以下错误是否提供了足够的信息来获得任何帮助？

![Xcode给出的错误](https://i.stack.imgur.com/Bh920.png)

谢谢 ！

PS：我也在使用 mogenerator。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:31:41.823

`NS_OPTIONS`需要 10.8 SDK。这就是为什么 ！因此，必须将基础 SDK 设置为 10.8。

# ruby-on-rails - 使用 ruby /rails geocoder gem 获取 request.location 附近的位置

> ID：16109349
> 
> 赞同：4
> 
> 时间：2013-04-19T16:31:43.083
> 
> 标签：ruby-on-rails, ruby, gem

您如何使用 geocoder gem for ruby​​ on rails 3.2.x 获取当前位置附近的位置？

我知道要找到您将使用的其他位置之一附近的位置

```
@myClass.nearbys(50) 
```

但我希望它们在浏览器位置（request.location）附近，而不是在我的另一个位置附近。

这样它会类似于

```
request.location.nearby(50) 
```

或类似的东西。

如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T16:48:16.537

如果你有用户所在位置的经纬度，可以这样查询

```
location_info = request.location

@locations = Location.near([location_info.latitude, location_info.longitude], radius_distance_you_want_to_include) 
```

还可以预期您的表，即在上面的示例`Location`中应该有`lat`和`lon`字段。

这是你要找的东西吗？

编辑：我不确定是否`request.location`可以在模型中使用。如果没有，您始终可以将其作为参数设置到控制器内部的模型方法中，以便您的逻辑保持分离。但是，如果可以，请保留`request.location`模型。

# mongodb - 在 MongoDB 中查找具有数组字段的文档是查询数组的子集

> ID：16109351
> 
> 赞同：9
> 
> 时间：2013-04-19T16:31:46.900
> 
> 标签：mongodb

假设我有一个插入一组文档，每个文档都有一个`array`字段。我想找到所有文档，使其`array`字段是查询数组的子集。例如，如果我有以下文件，

```
collection.insert([
  {
     'name': 'one',
     'array': ['a', 'b', 'c']
  },
  {
     'name': 'two',
     'array': ['b', 'c', 'd']
  },
  {
     'name': 'three',
     'array': ['b', 'c']
  }
]) 
```

我查询`collection.find({'array': {'$superset': ['a', 'b', 'c']})`，我希望看到文档`one`和`three`as`['a', 'b', 'c']`并且`['b', 'c']`都是`['a', 'b', 'c']`. 换句话说，我想做 Mongo`$all`查询的逆操作，它选择所有文档，使得查询数组是文档`array`字段的子集。这可能吗？如果是这样，如何？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-03-27T03:10:44.167

在 MongoDb 中，对于数组字段：

```
"$in:[...]" means "intersection" or "any element in",
"$all:[...]" means "subset" or "contain",
"$elemMatch:{...}" means "any element match"
"$not:{$elemMatch:{$nin:[...]}}" means "superset" or "in" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-19T19:04:16.540

有一种简单的方法可以使用聚合框架或查找查询来执行此操作。

查找查询很简单，但您必须使用 $elemMatch 运算符：

```
> db.collection.find({array:{$not:{$elemMatch:{$nin:['a','b','c']}}}}, {_id:0,name:1}) 
```

请注意，这表明我们不希望匹配具有（同时）不等于“a”、“b”或“c”的元素的数组。我添加了一个投影，它只返回可选的结果文档的名称字段。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-16T17:55:05.093

要在聚合上下文中执行此操作，您可以使用[`$setIsSubset`](http://docs.mongodb.org/manual/reference/operator/aggregation/setIsSubset/#exp._S_setIsSubset)：

```
db.collection.aggregate([
    // Project the original doc and a new field that indicates if array
    // is a subset of ['a', 'b', 'c']
    {$project: {
        doc: '$$ROOT',
        isSubset: {$setIsSubset: ['$array', ['a', 'b', 'c']]}
    }},
    // Filter on isSubset
    {$match: {isSubset: true}},
    // Project just the original docs
    {$project: {_id: 0, doc: 1}}
]) 
```

请注意，这`$setIsSubset`是在 MongoDB 2.6 中添加的。

# regex - 从bash中的路径中去除双点

> ID：16109353
> 
> 赞同：1
> 
> 时间：2013-04-19T16:31:50.060
> 
> 标签：regex, bash, path, sed

我想知道如何使用正则表达式来简化文件路径中的双点（路径可能实际上不存在）？

例如更改`/my/path/to/.././my/./../../file.txt`为`/my/file.txt`或。`path/./to/../../../file.txt``../file.txt`

是否可以在 bash 的一个命令中执行此操作？（`sed`例如，使用不是复杂的 python 或 perl 脚本）

**编辑**：我遇到了[这个问题](https://stackoverflow.com/questions/284662/how-do-you-normalize-a-file-path-in-bash)，但`realpath`在我使用的计算机上不可用。

**编辑**：从[FJ](https://stackoverflow.com/users/505154/f-j)的解决方案中，我最终构建了以下正则表达式，它适用于更一般的情况（如果路径的某些文件夹被命名，则不起作用`....`）：

```
sed -e 's|/\./|/|g' -e ':a' -e 's|\.\./\.\./|../..../|g' -e 's|^[^/]*/\.\.\/||' -e 't a' -e 's|/[^/]*/\.\.\/|/|' -e 't a' -e 's|\.\.\.\./|../|g' -e 't a' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T16:55:23.227

尝试以下操作：

```
sed -e 's|/\./|/|g' -e ':a' -e 's|/[^/]*/\.\./|/|' -e 't a' 
```

例子：

```
$ echo '/my/path/to/.././my/./../../file.txt' |
  sed -e 's|/\./|/|g' -e ':a' -e 's|/[^/]*/\.\./|/|' -e 't a'
/my/file.txt 
```

以下是该方法的说明：

```
read line
replace all '/\./' in line with '/'
while there is a match of '/[^/]*/\.\./' {
    replace first occurrence of '/[^/]*/\.\./' in line with '/'
}
output line 
```

# c++ - Visual Studio 看不到成员函数

> ID：16109355
> 
> 赞同：0
> 
> 时间：2013-04-19T16:31:51.480
> 
> 标签：c++, class, visual-studio-2012

我有一个名为人的班级。在 person.h 我有这个：

```
#include "stdafx.h"
#include "Resource.h"
#pragma once

class person
{
private:
   std::string firstName;
   std::string lastName;
   int age;
   Resource *resource;

public:
   person(std::string first,
          std::string last,
          int age);
   ~person();
   person(person& p);

   bool operator < (const person& currentPerson) const;
   bool operator < (int number) const;

   void        setFirst(std::string first) {firstName = first;}
   void        setLast(std::string last) {lastName = last;}
   std::string getName() const;
   std::string getFirst() const;
   std::string getLast() const;
   int         getAge() const {return age;}
   void        setAge(int newAge) {age = newAge;}
   void        addResource();

   friend bool operator < (int number, const person& currentPerson);
};

bool operator < (int number, const person& currentPerson); 
```

除了我刚刚添加到类中的功能之外`setFirst`，每个功能都可以完美运行。`setLast`当我调用它时，

```
#include "stdafx.h"
#include "Resource.h"
#include "person.h"

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
   person Kenneth("Kenneth", "Cochran", 19);
   Kenneth.addResource();
   Kenneth.setFirst("Kenny");
   Kenneth.setLast("Cochran");
   Kenneth.addResource();
   return 0;
} 
```

视觉工作室说

```
freestore.cpp(14): error C2039: 'setFirst' : is not a member of 'person'
person.h(5) : see declaration of 'person'
freestore.cpp(15): error C2039: 'setLast' : is not a member of 'person'
person.h(5) : see declaration of 'person' 
```

# email - SPF 问题 - 如何设置

> ID：16109357
> 
> 赞同：0
> 
> 时间：2013-04-19T16:32:04.393
> 
> 标签：email, spam, spf

我想在我自己的服务器上为我的域 example.com 设置 SPF，但我真的不明白如何做到这一点，所以这是我的问题：

1) 如果我想允许我的服务器 IP xxxx 使用 mail@example.com（或更好的 *@example.com）发送邮件，我的 SPF 记录应该是什么样子？

2) 我必须在哪里添加 SPF 记录？到我的 DNS 记录？我怎么把它存储在那里？？？

3) 我还想使用 myname@example.com 从我的笔记本电脑发送邮件，并且我使用我的服务器 IP xxxx 作为 SMTP 服务器，我想这不是 SPF 记录的问题吗？

希望这听起来不会太愚蠢，但我觉得这个 SPF 有点令人困惑；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T12:55:46.653

使用 SPF 生成向导，如下所示：[http ://spfwizard.com/](http://spfwizard.com/)

> 1) 如果我想允许我的服务器 IP xxxx 使用 mail@example.com（或更好的 *@example.com）发送邮件，我的 SPF 记录应该是什么样子？

在 BIND 记录格式中，它可能类似于：

```
example.com. IN TXT "v=spf1 mx ip4:x.x.x.x ~all" 
```

基本上，它允许从以下位置发送电子邮件：

*   example.com 的所有 MX 记录
*   ip xxxx

其他情况被认定为[softfail](http://en.wikipedia.org/wiki/Sender_Policy_Framework#Qualifiers)。

> 2) 我必须在哪里添加 SPF 记录？到我的 DNS 记录？我怎么把它存储在那里？？？

必须允许您编辑域 example.com 的 DNS 记录。它很可能是您的注册商提供的服务。**您说您有 2 个字段：您应该在主机**字段中添加 example.com（您的域） ，并在**规则**字段中添加“v=spf1..”字符串（不带引号）。

> 3) 我还想使用 myname@example.com 从我的笔记本电脑发送邮件，并且我使用我的服务器 IP xxxx 作为 SMTP 服务器，我想这不是 SPF 记录的问题吗？

说得好，你明白了。

# html - 输入文本元素的正确只读属性语法是什么？

> ID：16109358
> 
> 赞同：67
> 
> 时间：2013-04-19T16:32:07.647
> 
> 标签：html, forms, readonly, input-field

`readonly`作为大多数，我对 的属性很熟悉`text input`，但是在阅读其他网站的代码时（我的一个讨厌的习惯），我看到了不止一个该属性的实现：

```
<input type="text" value="myvalue" class="class anotherclass" readonly > 
```

和

```
<input type="text" value="myvalue" class="class anotherclass" readonly="readonly" > 
```

我什至见过

```
<input type="text" value="myvalue" class="class anotherclass" readonly="true" > 
```

..而且我相信我看到了更多，但现在不记得确切的语法了..

那么，我应该使用哪一个是正确的？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2014-07-05T16:31:08.193

**HTML5 规范**：

[http://www.w3.org/TR/html5/forms.html#attr-input-readonly](http://www.w3.org/TR/html5/forms.html#attr-input-readonly)：

> readonly 属性是一个布尔属性

[http://www.w3.org/TR/html5/infrastructure.html#boolean-attributes](http://www.w3.org/TR/html5/infrastructure.html#boolean-attributes)：

> 元素上存在布尔属性表示真值，不存在该属性表示假值。
> 
> 如果该属性存在，则其值必须是空字符串或与属性的规范名称匹配的不区分大小写的 ASCII 值，并且没有前导或尾随空格。

**结论**：

以下是**有效的、等价的和真实的**：

```
<input type="text" readonly />
<input type="text" readonly="" />
<input type="text" readonly="readonly" />
<input type="text" readonly="ReAdOnLy" /> 
```

以下是**无效**的：

```
<input type="text" readonly="0" />
<input type="text" readonly="1" />
<input type="text" readonly="false" />
<input type="text" readonly="true" /> 
```

缺少该属性是**false**的唯一有效语法：

```
<input type="text"/> 
```

**推荐**

如果您关心编写有效的 XHTML，请使用`readonly="readonly"`, since`<input readonly>`是无效的，并且其他替代方案的可读性较差。否则，只需使用它，`<input readonly>`因为它更短。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-04-19T16:37:03.100

从[w3](https://www.w3.org/TR/2012/WD-html-markup-20120329/input.text.html)：

> *readonly* = **"readonly"**或**"" （空字符串）**或**空**- 指定元素表示一个控件，其值不应被编辑。

所以基本上是一样的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-09T12:39:01.483

应该是

```
<input type="text" value="myvalue" class="class anotherclass" readonly="readonly" /> 
```

# spring - hibernate和spring的关系

> ID：16109359
> 
> 赞同：0
> 
> 时间：2013-04-19T16:32:10.407
> 
> 标签：spring, hibernate

我有一个关于 spring + hibernate 的问题我总是使用 hibernate 进行开发，我生成表和类 DAO 的图像然后在逻辑层我对这些方法进行简单调用 dao ....

> 例如 UserDao=new UserDao () 然后 userdao.persist() ...

现在我有 intgret spring，但我还不明白..

1

> 他知道他也在打电话有什么好处有dao服务（手动的着作）它不会用hibernate生成类dao

2

> 是春天我不会担心管理会话，例如打开会话，关闭会话提交（）......

提前谢谢你我想有一个想法Ccool：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:02:43.003

Spring 的核心是一个依赖注入框架。这意味着，而不是做

```
public class MyService
    private MyDao dao;

    public MyService() {
        dao = new MyDao();
    }
} 
```

你可以做

```
public class MyService
    private MyDao dao;

    @Autowired
    public MyService(MyDao dao) {
        this.dao = dao;
    }
} 
```

而Spring会自动调用构造函数并注入一个MyDao的实例。主要好处是代码很容易进行单元测试。

最重要的是，它允许直接注入代理而不是实际的实现。这些代理确实会为您处理事务管理，以及更多（异常翻译、安全检查等）。

因此，无需显式打开、提交和回滚事务，您只需使用 注释服务方法`@Transactional`，Spring 将打开、提交/回滚事务。并且事务上下文会自动传播到嵌套的服务调用。

这个简短的答案只是为了给你一个想法。要了解更多信息，请阅读依赖注入，并阅读 Spring 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:51:48.527

`@Service`对服务类、`@Repository`Dao 类和`@Controller`动作控制器使用 Spring 注释。使用`@Transactional`服务类或方法足以执行事务。

# c# - 实体框架中的父子链接

> ID：16109363
> 
> 赞同：0
> 
> 时间：2013-04-19T16:32:23.793
> 
> 标签：c#, asp.net-mvc, entity-framework

我正在创建一个类似于任务列表的系统 Web 应用程序。

*   用户可以创建任务
*   用户可以在任何任务中创建任务。
*   然后用户可以在该任务中创建一个任务
*   用户可以查看第一个任务并查看与其链接的所有任务。

我创建了一个简单的父子关系。一旦我通过了第一级，我发现这是不可能的？

我希望能够查看原始父任务以及其中的所有其他父任务和子任务。

到目前为止，一个任务有一个任务集合。

我想要做的是查看原始父类的所有兄弟姐妹。

```
 modelBuilder.Entity<Task>()
            .HasMany(x => x.Children)
            .WithOptional()
            .HasForeignKey(x => x.ParentID); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:08:20.697

查询数据库时，请执行以下操作：

```
var tasks = from t in db.Tasks.Include("Parent")
            where t.Id //... your logic here
            select t; 
```

并且您将需要扩展您的 Task 类以包含父属性：

```
public virtual Task Parent { get; set; }
```

然后映射关系：

```
modelBuilder.Entity<Task>()
            .HasOptional(x => x.Parent)
            .WithMany(x => x.Children)
            .HasForeignKey(x => x.ParentID);
```

上面的查询告诉 EF 为每个返回的任务带来父任务。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:25:28.587

一种解决方案可能是必须使用外键。一个外键是 IDRootTask，另一个外键是 IDParentTask。

第一个 IDRootTask 是第一个任务的 ID，所以要获取该组的所有任务。第二个 FK，IDRootParent 可用于仅获取父任务的任务。这样，就不需要递归函数来获取父母的父母和父母的父母。

其他选项如果您希望所有任务都是确定的任务，那么您需要在数据库中存储一棵树，以便您了解所有后代或所有祖先。

# angularjs - selectMatch上的角度ui-bootstrap typeahead回调？

> ID：16109364
> 
> 赞同：95
> 
> 时间：2013-04-19T16:32:24.873
> 
> 标签：angularjs, angular-ui, bootstrap-typeahead

我正在使用 angular ui-bootstrap typeahead，我想用它来选择很多选择，所以我需要在启动 selectMatch 方法时获取选定的值，但我找不到怎么做在我的控制器中

```
<div class='container-fluid' ng-controller="TypeaheadCtrl">
<pre>Model: {{selected| json}}</pre>
<input type="text" ng-model="selected" typeahead="state for state in states | filter:$viewValue"> 
```

如果我观察选定的值，每次按下一个键我都会得到改变......

```
scope.$watch('selected', function(newValue, oldValue) {... }); 
```

我知道方法 selectMatch 是当用户按 Enter 或单击列表时调用的方法，但我不知道如何对此进行回调...

谢谢 ！

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2013-08-01T12:51:46.823

现在有更好的方法来做到这一点。[添加了一个新的回调方法](http://angular-ui.github.io/bootstrap/)

在控制器文件中添加以下内容：

```
 $scope.onSelect = function ($item, $model, $label) {
    $scope.$item = $item;
    $scope.$model = $model;
    $scope.$label = $label;
}; 
```

在视图中添加以下内容：

```
 <input type="text"
        ng-model="selected"
        typeahead="state for state in states | filter:$viewValue"
        typeahead-editable="false"
        typeahead-on-select="onSelect($item, $model, $label)"/> 
```

有关更多信息，请参阅[typeahead 规范](https://github.com/angular-ui/bootstrap/blob/91ac17c9ed691a99647b66b3f464e3585398be19/src/typeahead/test/typeahead.spec.js#L372)（搜索 onSelect）。

检查以下 URL 是否有帮助 [http://www.techguides.in/how-to-create-autocomplete-using-angularjs-ui/](http://www.techguides.in/how-to-create-autocomplete-using-angularjs-ui/)

[http://www.techguides.in/how-to-customize-autocomplete-to-display-multiple-columns-using-angularjs-ui-2/](http://www.techguides.in/how-to-customize-autocomplete-to-display-multiple-columns-using-angularjs-ui-2/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-22T07:55:23.817

编辑：这种方法现在不是最好的。最好使用 onSelect 回调，就像上面的答案中解释的那样。

我发现如何做我想做的事。我确实看到有一个打字可用属性，如果将其设置为false，则仅在选择模型值时才更改所选值。因此 $watch 可以正常检查何时选择了新值。

```
<input type="text" ng-model="selected" typeahead="state for state in states | filter:$viewValue" typeahead-editable="false">

link: function(scope, elm, attrs){
    scope.$watch('selected', function(newValue, oldValue) {
        if (newValue)
          console.log(oldValue+"->"+newValue);
     });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-13T17:54:04.087

*以下应该是您的 HTML*

```
 <input id="title" type="text"  ng-model="title"  typeahead="data.enquiry_title for data in titleData | filter:$viewValue | limitTo:8" 
typeahead-on-select='onSelect($item, $model, $label)' /> 
```

只需在带有回调函数的输入标记中添加**typeahead-on-select即可。**

*以下将进入控制器*

```
$scope.onSelect = function ($item, $model, $label) {
            console.log($item);
            if($item.tid)
                $scope.activeTitleId = $item.tid
        }; 
```

在 $item 中，您将获得在建议列表的主数组中传递的整个对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-21T14:38:52.483

在验证之前尝试以下操作

```
 modelCtrl.$setValidity('editable', true); 
```

# asp.net-mvc-3 - MVC3 - Unity/工作单元模式和 Web 服务实现

> ID：16109371
> 
> 赞同：0
> 
> 时间：2013-04-19T16:32:40.907
> 
> 标签：asp.net-mvc-3, web-services, dependency-injection, unity-container, unit-of-work

我是一个具有统一和工作单元模式的新手，我正在尝试编写一个代码，它连接到我的网络服务并完成所有工作。在我使用数据库之前一切都很顺利，但是当我尝试使用网络服务时我迷路了。

我浪费了我宝贵的 2 天，搜索与它相关的每一篇可能的文章并将其应用到我的代码中，但到目前为止还没有运气。

我知道，通过将连接字符串写入 web.config 并在 dbcontext 类控制器中调用它，将连接到所需的数据库，但我没有连接到任何数据库，所以我需要在 web/app.config 中进行哪些更改。此外，即使我在 dbcontext 构造函数中编写连接逻辑，它仍然会搜索并使用 sql server 详细信息填充 dbcontext。我认为这是因为我正在使用 DBSet。

伙计们，请你看一下我的代码，我已经完成了，并向我展示了一些我能做到的希望。如果您想了解与您想查看的代码相关的任何其他信息，请告诉我。

谢谢

```
 DBCONTEXT

 public class CVSContext :  DbContext
 {
    public DbSet<CVSViewModel> CVS { get; set; }
    public DbSet<Contact> Contacts { get; set; }
    public DbSet<Account> Accounts { get; set; }

    public CVSContext()
    {
        //CRM Start
            var clientCredentials = new System.ServiceModel.Description.ClientCredentials();
            clientCredentials.UserName.UserName = "";
            clientCredentials.UserName.Password = "";
            var serviceProxy = new Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy(new Uri("http://Organization.svc"), null, clientCredentials, null);
            serviceProxy.ServiceConfiguration.CurrentServiceEndpoint.Behaviors.Add(new ProxyTypesBehavior());
            HttpContext.Current.Session.Add("ServiceProxy", serviceProxy);
          //CRM End
    }
 } 
```

通用存储库

```
 public class GenericRepository<TEntity> where TEntity : class
   {
    internal CVSContext context;
    internal DbSet<TEntity> dbSet;

    public GenericRepository(CVSContext context)
    {
        this.context = context;
        this.dbSet = context.Set<TEntity>();
    }
   } 
```

工作单位

```
 public interface IUnitOfWork : IDisposable
{
    int SaveChanges();
}

public interface IDALContext : IUnitOfWork
{
    ICVSRepository CVS { get; set; }

    IContactRepository Contacts { get; set; }

    //IAccountRepository Accounts { get; set; }
}

public class DALContext : IDALContext
{
    private CVSContext dbContext;
    private ICVSRepository cvs;
    private IContactRepository contacts;
   // private IAccountRepository accounts;

    public DALContext()
    {
        dbContext = new CVSContext();
    }

    public ICVSRepository CVS
    {
        get
        {
            if (cvs == null)
                cvs = new CVSRepository(dbContext);
            return cvs;
        }

        set
        {
            if (cvs == value)
                cvs = value;
        }
    }

    public IContactRepository Contacts
    {
        get
        {
            if (contacts == null)
                contacts = new ContactRepository(dbContext);
            return contacts;
        }

        set
        {
            if (contacts == value)
                contacts = value;
        }
    }

    public int SaveChanges()
    {
        return this.SaveChanges();
    }

    public void Dispose()
    {
        if(contacts != null)
            contacts.Dispose();
        //if(accounts != null)
        //    accounts.Dispose();
        if(dbContext != null)
            dbContext.Dispose();

        GC.SuppressFinalize(this);
    }
  } 
```

服务

```
 public interface ICVSService
{
    Contact CreateContact(Guid contactName, string productName, int price);

    List<CVSViewModel> GetCVS();
    List<Contact> GetContacts();
    List<Account> GetAccounts();
}

public class CVSService : ICVSService, IDisposable
{
    private IDALContext context;

    public CVSService(IDALContext dal)
    {
        context = dal;
    }

    public List<CVSViewModel> GetCVS()
    {
        return context.CVS.All().ToList();
    }

    public List<Contact> GetContacts()
    {
        return context.Contacts.All().ToList();
    }

    public List<Account> GetAccounts()
    {
        return context.Accounts.All().ToList();
    }

    public Contact CreateContact(Guid contactName, string accountName, int price)
    {
        var contact = new Contact() { ContactId = contactName };

        var account = new Account() { ContactName = accountName,  Rent  = price, Contact = contact };

        //context.Contacts.Create(contact);
        context.SaveChanges();

        return contact;
    }

    public void Dispose()
    {
        if (context != null)
            context.Dispose();
    }
} 
```

控制器

```
 public ActionResult Index()
    {         
        ViewData.Model = service.GetContacts();
        return View();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:10:39.563

这都是关于适当的抽象。在某些数据源（可能是 db 或 ws）之间使用的通用抽象是存储库模式，或者更高级别的工作单元模式。事实上，实体框架`DbContext`是工作单元模式的一种实现，但它是为数据库量身定制的。您不能用于与 Web 服务进行通信。

在这种情况下，您将不得不编写自己的`IRepository<T>`抽象，并拥有一个使用幕后的数据库特定实现`DbContext`和一个在幕后包装 Web 服务客户端代理的 Web 服务特定实现。

但是，当您的应用程序变得更加复杂时，您经常会发现自己想要某种类似事务的行为。这就是工作单元模式的用途：它呈现一个业务事务。然而，使用工作单元模式来包装多个 WS 调用很快就会变得很痛苦。要做到正确需要做很多工作，在这种情况下，使用基于消息的架构会更好。

使用基于消息的架构，您可以将单个原子操作（业务事务或用例）定义为特定消息，例如：

```
public class MoveCustomerCommand
{
    public int CustomerId { get; set; }

    public Address NewAddress { get; set; }
} 
```

这只是一个具有一组属性但没有行为的对象 (DTO)。很好的是，您可以使用 WCF 或任何其他技术通过网络传递这些类型的对象，或者在本地处理它们，而无需消费者知道。

看看[这篇详细描述它的文章](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)。[本文](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=95)建立在该模型之上，并描述了如何使用该模型编写高度可维护的 WCF 服务。

# firefox - 如何在 options.xul 中使用 oncommand 来调用 bootstrap.js 中的函数？

> ID：16109372
> 
> 赞同：2
> 
> 时间：2013-04-19T16:32:42.503
> 
> 标签：firefox, button, firefox-addon, xul, add-on

我正在尝试从 bootstrap.js 文件中调用 changePassword() 方法，但我无法弄清楚如何.. Bootstrap.js 位于项目文件夹的根目录中，而 options.xul 位于 ./chrome/content/

```
<setting type="control" title="&passwordBtn;">
<button label="&passwordBtn;" oncommand="changePassword();"/>
</setting> 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T18:09:48.790

首先，更改您的 options.xul 添加一个`id`属性以供以后选择，它不需要`oncommand`属性，因此我们可以将其删除。

```
<setting type="control" title="&passwordBtn;">
    <button id="password" label="&passwordBtn;" />
</setting> 
```

然后侦听首选项面板打开并手动将单击事件侦听器添加到按钮。下面是示例 bootstrap.js

```
const log = function() { dump(Array.slice(arguments).join(' ') + '\n'); }

const {classes: Cc, interfaces: Ci} = Components;
const OBS = Cc['@mozilla.org/observer-service;1']
              .getService(Ci.nsIObserverService);

const myAddonId = 'my_addon_id' // same as install.rdf "<em:id>" tag value

let optionObserver = {
    observe: function(subject, topic, data) {
        if (topic !== 'addon-options-displayed' || data !== myAddonId) {
            return;
        }
        let document = subject.QueryInterface(Ci.nsIDOMDocument);
        let button = document.getElementById('password');
        button.addEventListener('command', this.changePassword);
    },
    changePassword: function(event) {
        log('password button clicked!');
        // do your stuff...
    }
}

let install = function(data, reason) {};
let uninstall = function(data, reason) {};

let startup = function(data, reason) {
    OBS.addObserver(optionObserver, 'addon-options-displayed', false);
};

let shutdown = function(data, reason) {
    OBS.removeObserver(optionObserver, 'addon-options-displayed', false);
}; 
```

# java - 特定模式的字符串的正则表达式

> ID：16109377
> 
> 赞同：-1
> 
> 时间：2013-04-19T16:33:13.267
> 
> 标签：java

说我有一个像下面这样的字符串

```
String s1 = "This is a new direction. Address located. \n\n\n 0.35 miles from location"; 
```

现在我只想提取“距位置 0.35 英里”。我对“0.35”更感兴趣，以便将此数字与其他数字进行比较。

字符串 s1 也可能具有以下模式。

```
String s1 = "This is not a new direction. Address is not located. \n\n\n 10.25 miles from location"; 
```

或者

```
String s1 = "This is not a new direction. Address is located. \n\n\n 11.3 miles from location"; 
```

请帮助我实现结果。谢谢！

我试过这个

```
String wholeText = texts.get(i).getText();
if(wholeText.length() > 1) {
    Pattern pattern = Pattern.compile("[0-9].[0-9][0-9] miles from location");
    Matcher matcg = pattern.matcher(wholeText);
    if (match.find()) {
        System.out.println(match.group(1));
    } 
```

但是我不知道当它是 xx.xx 英里时该怎么办......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:45:22.150

这应该适用于格式为 ...ab.cd... 的任何数字

```
public static void main(String[] args){
    String s  = "This is a new direction. Address located. " +
            "\n\n\n 0.35 miles from location";
    Pattern p = Pattern.compile("(\\d+\\.\\d+)");
    Matcher m = p.matcher(s);
    while (m.find()) {
      System.out.println(m.group());
    }
} 
```

# c# - 手动配置服务参考

> ID：16109378
> 
> 赞同：-1
> 
> 时间：2013-04-19T16:33:19.410
> 
> 标签：c#, wcf, web-services, web

当我在 Visual Studio 2012 中添加服务引用时，它会将这些用于将元素排序到我的所有属性的属性添加到我的 reference.cs。

```
[System.Xml.Serialization.XmlArrayAttribute(Order=0)] 
```

但是，它会导致肥皂消息无法正确反序列化。当我删除它们时，它可以工作。所以我需要知道如何通过一些配置或任何需要的东西来生成没有属性的reference.cs。我查看了 Reference.svcmap 地图，但没有看到针对此特定问题的设置。
我尝试了 MSDN，但找不到有关此类请求的手动配置的任何内容。

请注意，如果我将其添加为 Web 引用，它将不会添加这些属性，但不想要该路由，因为我想要 aync 处理。

请帮忙！

注意：服务器 Web 服务是第 3 方，是 apache 轴托管服务。

这是wsdl：

```
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:prews="http://www.coda.com/efinance/schemas/presenter/presenter-11.1/webservice" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" targetNamespace="http://www.coda.com/efinance/schemas/presenter/presenter-11.1/webservice">
<types>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:com="http://www.coda.com/efinance/schemas/common" xmlns:pre="http://www.coda.com/efinance/schemas/presenter" targetNamespace="http://www.coda.com/efinance/schemas/presenter/presenter-11.1/webservice" attributeFormDefault="unqualified" elementFormDefault="qualified">
<xsd:import namespace="http://www.coda.com/efinance/schemas/common" schemaLocation="http://sfdcoda1/coda/wsdl/finance/common/common.xsd"/>
<xsd:import namespace="http://www.coda.com/efinance/schemas/presenter" schemaLocation="http://sfdcoda1/coda/wsdl/finance/presenter/presenter.xsd"/>
<xsd:element name="AddRequest">
<xsd:complexType>
<xsd:sequence>
<xsd:element name="Companies" minOccurs="0" type="com:Companies"/>
<xsd:element name="Presenter" type="pre:Presenter">
<xsd:annotation>
<xsd:documentation>
Contains the information for the presenter master you want to create.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
<xsd:element name="ListRequest">
<xsd:complexType>
<xsd:sequence>
<xsd:element name="Filter" type="pre:PresenterListFilter">
<xsd:annotation>
<xsd:documentation>
A filter that selects the presenter masters to be listed.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
<xsd:element name="GetResponse">
<xsd:complexType>
<xsd:sequence>
<xsd:element name="CmpCode" type="com:typeGeneralCode">
<xsd:annotation>
<xsd:documentation>
The code of the company in which you attempted to retrieve the presenter master.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
<xsd:element name="Code" type="com:typeGeneralCode">
<xsd:annotation>
<xsd:documentation>
The code of the presenter master that you attempted to retrieve.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
<xsd:element name="Presenter" minOccurs="0" type="pre:Presenter">
<xsd:annotation>
<xsd:documentation>
Contains the presenter master you have retrieved from the database.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
<xsd:element name="OptionsResponse">
<xsd:complexType>
<xsd:attribute name="transactioncoordinator" type="xsd:string"/>
</xsd:complexType>
</xsd:element>
<xsd:element name="ListResponse">
<xsd:complexType>
<xsd:sequence>
<xsd:element name="Filter" type="pre:PresenterListFilter">
<xsd:annotation>
<xsd:documentation>
The filter that was used to select the presenter masters to be listed.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
<xsd:element name="Keys" minOccurs="0" type="com:KeyData">
<xsd:annotation>
<xsd:documentation>
Contains the key information for the listed presenter masters.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
<xsd:element name="DeleteResponse">
<xsd:complexType>
<xsd:sequence>
<xsd:element name="CmpCode" type="com:typeGeneralCode">
<xsd:annotation>
<xsd:documentation>
The code of the company in which you attempted to delete the presenter master.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
<xsd:element name="Code" type="com:typeGeneralCode">
<xsd:annotation>
<xsd:documentation>
The code of the presenter master that you attempted to delete.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
<xsd:element name="UpdateResponse">
<xsd:complexType>
<xsd:sequence>
<xsd:element name="MultiCompany" minOccurs="0">
<xsd:complexType>
<xsd:sequence>
<xsd:element name="Companies" type="com:Companies"/>
<xsd:element name="Warning" type="com:Reason"/>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
<xsd:element name="CmpCode" type="com:typeGeneralCode">
<xsd:annotation>
<xsd:documentation>
The code for the company in which you attempted to update the presenter master.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
<xsd:element name="Code" type="com:typeGeneralCode">
<xsd:annotation>
<xsd:documentation>
The code of the presenter master that you attempted to update.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
<xsd:element name="TimeStamp" type="com:typeWord">
<xsd:annotation>
<xsd:documentation>
The TimeStamp value for this presenter master in the database.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
<xsd:element name="AddResponse">
<xsd:complexType>
<xsd:sequence>
<xsd:element name="MultiCompany" minOccurs="0">
<xsd:complexType>
<xsd:sequence>
<xsd:element name="Companies" type="com:Companies"/>
<xsd:element name="Warning" type="com:Reason"/>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
<xsd:element name="CmpCode" type="com:typeGeneralCode">
<xsd:annotation>
<xsd:documentation>
The code of the company in which you attempted to create the presenter master.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
<xsd:element name="Code" type="com:typeGeneralCode">
<xsd:annotation>
<xsd:documentation>
The code of the presenter master that you attempted to create.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
<xsd:element name="TimeStamp" type="com:typeWord">
<xsd:annotation>
<xsd:documentation>
The TimeStamp value for this presenter master in the database.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
<xsd:element name="UpdateRequest">
<xsd:complexType>
<xsd:sequence>
<xsd:element name="Companies" minOccurs="0" type="com:Companies"/>
<xsd:element name="Presenter" type="pre:Presenter">
<xsd:annotation>
<xsd:documentation>
Contains the information for the presenter master you want to update.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
<xsd:element name="Options">
<xsd:complexType>
<xsd:attribute name="bulkload" type="xsd:boolean"/>
<xsd:attribute name="logtitle" type="com:typeLogTitle"/>
<xsd:attribute name="attachments" type="com:typeAttachments" default="none"/>
<xsd:attribute name="locale" type="com:typeLocale"/>
<xsd:attribute name="origin" type="xsd:string"/>
<xsd:attribute name="user" type="com:typeGeneralCode"/>
<xsd:attribute name="company" type="com:typeGeneralCode"/>
<xsd:attribute name="session" type="xsd:string"/>
<xsd:attribute name="slot" type="xsd:nonNegativeInteger"/>
<xsd:attribute name="transactionid" type="xsd:string"/>
<xsd:attribute name="txtimeout" type="xsd:int"/>
</xsd:complexType>
</xsd:element>
<xsd:element name="DeleteRequest">
<xsd:complexType>
<xsd:sequence>
<xsd:element name="Key" type="com:Key">
<xsd:annotation>
<xsd:documentation>
Contains the key identifying the presenter master you want to delete.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
<xsd:element name="GetRequest">
<xsd:complexType>
<xsd:sequence>
<xsd:element name="Key" type="com:Key">
<xsd:annotation>
<xsd:documentation>
Contains the key identifying the presenter masters you want to retrieve from the database.
</xsd:documentation>
</xsd:annotation>
</xsd:element>
</xsd:sequence>
</xsd:complexType>
</xsd:element>
</xsd:schema>
</types>
<message name="UpdateResponse">
<part name="UpdateResponse" element="prews:UpdateResponse"/>
</message>
<message name="GetRequest">
<part name="GetRequest" element="prews:GetRequest"/>
</message>
<message name="Options">
<part name="Options" element="prews:Options"/>
</message>
<message name="AddResponse">
<part name="AddResponse" element="prews:AddResponse"/>
</message>
<message name="GetResponse">
<part name="GetResponse" element="prews:GetResponse"/>
</message>
<message name="DeleteResponse">
<part name="DeleteResponse" element="prews:DeleteResponse"/>
</message>
<message name="DeleteRequest">
<part name="DeleteRequest" element="prews:DeleteRequest"/>
</message>
<message name="AddRequest">
<part name="AddRequest" element="prews:AddRequest"/>
</message>
<message name="ListResponse">
<part name="ListResponse" element="prews:ListResponse"/>
</message>
<message name="ListRequest">
<part name="ListRequest" element="prews:ListRequest"/>
</message>
<message name="OptionsResponse">
<part name="OptionsResponse" element="prews:OptionsResponse"/>
</message>
<message name="UpdateRequest">
<part name="UpdateRequest" element="prews:UpdateRequest"/>
</message>
<portType name="PresenterServicePortTypes">
<operation name="Update">
<input message="prews:UpdateRequest"/>
<output message="prews:UpdateResponse"/>
</operation>
<operation name="Add">
<input message="prews:AddRequest"/>
<output message="prews:AddResponse"/>
</operation>
<operation name="Get">
<input message="prews:GetRequest"/>
<output message="prews:GetResponse"/>
</operation>
<operation name="Delete">
<input message="prews:DeleteRequest"/>
<output message="prews:DeleteResponse"/>
</operation>
<operation name="List">
<input message="prews:ListRequest"/>
<output message="prews:ListResponse"/>
</operation>
</portType>
<binding name="PresenterServiceSOAPBinding" type="prews:PresenterServicePortTypes">
<soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
<operation name="Update">
<documentation>
Updates presenter masters in the database using the information you provide.
</documentation>
<soap:operation soapAction="uri-coda-webservice/11.300.0491/finance/Presenter/Update" style="document"/>
<input>
<soap:header message="prews:Options" part="Options" use="literal"></soap:header>
<soap:body use="literal"/>
</input>
<output>
<soap:header message="prews:OptionsResponse" part="OptionsResponse" use="literal"></soap:header>
<soap:body use="literal"/>
</output>
</operation>
<operation name="Add">
<documentation>
Creates new presenter masters in the database using the information you provide.
</documentation>
<soap:operation soapAction="uri-coda-webservice/11.300.0491/finance/Presenter/Add" style="document"/>
<input>
<soap:header message="prews:Options" part="Options" use="literal"></soap:header>
<soap:body use="literal"/>
</input>
<output>
<soap:header message="prews:OptionsResponse" part="OptionsResponse" use="literal"></soap:header>
<soap:body use="literal"/>
</output>
</operation>
<operation name="Get">
<documentation>
Retrieves the specified presenter masters from the database.
</documentation>
<soap:operation soapAction="uri-coda-webservice/11.300.0491/finance/Presenter/Get" style="document"/>
<input>
<soap:header message="prews:Options" part="Options" use="literal"></soap:header>
<soap:body use="literal"/>
</input>
<output>
<soap:header message="prews:OptionsResponse" part="OptionsResponse" use="literal"></soap:header>
<soap:body use="literal"/>
</output>
</operation>
<operation name="Delete">
<documentation>
Deletes the specified presenter master from the database.
</documentation>
<soap:operation soapAction="uri-coda-webservice/11.300.0491/finance/Presenter/Delete" style="document"/>
<input>
<soap:header message="prews:Options" part="Options" use="literal"></soap:header>
<soap:body use="literal"/>
</input>
<output>
<soap:header message="prews:OptionsResponse" part="OptionsResponse" use="literal"></soap:header>
<soap:body use="literal"/>
</output>
</operation>
<operation name="List">
<documentation>
Retrieves key information for the specified presenter masters from the database.
</documentation>
<soap:operation soapAction="uri-coda-webservice/11.300.0491/finance/Presenter/List" style="document"/>
<input>
<soap:header message="prews:Options" part="Options" use="literal"></soap:header>
<soap:body use="literal"/>
</input>
<output>
<soap:header message="prews:OptionsResponse" part="OptionsResponse" use="literal"></soap:header>
<soap:body use="literal"/>
</output>
</operation>
</binding>
<service name="PresenterService">
<port name="PresenterServicePort" binding="prews:PresenterServiceSOAPBinding">
<soap:address location="http://sfdcoda1/coda/services/finance/presenter/presenter-11.1"/>
</port>
</service>
</definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:03:28.787

尝试从 DataContract 属性中删除 order 属性。然后，当您使用服务参考时，它也不应该在那里添加 order 属性。

您必须执行以下操作：

```
[DataContract]
public class DerivedType : BaseType
{
    [DataMember(Order = 0)]
    public string bird;
    [DataMember(Order = 1)]
    public string parrot;
} 
```

只需删除合同中的 Order 属性即可。

# excel - 删除图表 VBA 错误

> ID：16109381
> 
> 赞同：1
> 
> 时间：2013-04-19T16:33:25.267
> 
> 标签：excel, graph, vba

当工作表上没有图表时，如何让 VBA 忽略此代码？目前，除非工作表中有 ChartObject，否则它将停止并打开调试器。

```
ActiveSheet.ChartObjects.Delete 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T20:58:11.590

与其忽略代码，不如直接忽略错误。

```
On Error Resume Next
ActiveSheet.ChartObjects.Delete
On Error GoTo 0 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T18:05:37.253

> 当工作表上没有图表时，如何让 VBA 忽略此代码？

尝试这个

```
Sub Sample()
    Dim ws As Worksheet
    Dim Chrtobj As ChartObject

    Set ws = ThisWorkbook.Sheets("Sheet1")

    '~~> Check if there are any chartobjects in the sheet
    If Not ws.ChartObjects.Count = 0 Then ws.ChartObjects.Delete
End Sub 
```

# java - 无法清除之前的表格数据

> ID：16109389
> 
> 赞同：0
> 
> 时间：2013-04-19T16:33:51.433
> 
> 标签：java, swing, jdbc, applet, jtable

我制作了一个带有搜索引擎功能的小程序。这里的问题是，当我尝试首先使用关键字进行搜索时，通过以 JTable 格式打开一个新的 JFrame 来正确显示它。但是当我关闭该框架并在搜索表单中输入其他内容以搜索其他内容时，它不仅会显示我搜索过的最新内容，还会显示我之前搜索过的内容。在水平方向上，它也不断重复表格列。以下是截图：

首先我搜索 Dosa： ![图 1](https://i.stack.imgur.com/Td71L.png)

然后我关闭那个 Frame 并搜索 Idli，看看它是怎么来的： ![图 2](https://i.stack.imgur.com/Qwgtk.png)

谁能帮助我并告诉我哪里出错了？这是我的数据库活动和检索代码。

```
search.addActionListener(new ActionListener() {
                public void actionPerformed(ActionEvent ae){
                try {
                     s=field.getText();
                     Connection con = null;
                     Class.forName("com.mysql.jdbc.Driver");
                     con = (Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/delikat", 
                            "root", "");
                     Statement st = (Statement) con.createStatement();
                     ResultSet rs= (ResultSet) st.executeQuery( "SELECT * FROM delicious where name = '"+s+ "'" );
                     ResultSetMetaData md = (ResultSetMetaData) rs.getMetaData();
                     int columns = md.getColumnCount();
                     for (int i = 1; i <= columns; i++) {
                        columnNames.addElement( md.getColumnName(i) );
                        }
                     while (rs.next()) {
                         Vector<Object> row = new Vector<Object>(columns);
                         for (int i = 1; i <= columns; i++) {
                             row.addElement( rs.getObject(i) );
                         }
                         data.addElement( row );
                     }
                     rs.close();
                     st.close();                         
                }
                catch(Exception e) {
                    e.printStackTrace();
                }
                Vector<Vector<Object>> NULL = null;
                if(data==NULL) {
                        JOptionPane.showMessageDialog(frame, "No Data Found");
                }
                    else {
                //Declare a new Frame for the Query Result Display
                JFrame tab=new JFrame();

                //Add the Data and the Column Names to the Table
                JTable table = new JTable(data, columnNames);

                //Add Scroll Pane for instances when more data is to be displayed
                JScrollPane scrollPane = new JScrollPane( table );

                /* Open the Result of the Query in a new Frame, in a Tabular Format with Scroll Pane.
                   Add all the elements to the Frame and set the specifications of the Frame like
                   Size, Visibility, etc.
                */
                tab.add( scrollPane );
                tab.setVisible(true);
                tab.setSize(810,100);
                }
                }
            }); 
```

请帮助我克服这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:15:38.093

*   `data = new Vector<Vector<Object>>`如果（伪代码）被重用，则需要重新初始化，`Vector<Vector<Object>> data = new Vector<Vector<Object>>`那么旧的二维数组是一个没有旧元素的新数组

*   使用[XxxTableModel 底层数据而不是](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)重新创建整个数组，可以作为标准的可能方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:38:48.360

尝试：

```
data.clear(); 
```

前

```
 while (rs.next()) {... 
```

# c# - 在同一个变量上重复创建新对象

> ID：16109392
> 
> 赞同：9
> 
> 时间：2013-04-19T16:34:03.760
> 
> 标签：c#, .net, object

我想这是一个非常愚蠢的问题，但我一直在环顾四周，找不到以下问题的答案。真的很感谢答案阐明了这一点。

1）如果在同一方法中实例化一个新对象，前一个对象会发生什么。例子：

```
DataTable dataTable = new DataTable();
dataTable = new DataTable(); // Will the previously created object be destroyed and memory freed? 
```

2) 与 (1) 相同的问题，但在静态变量上。例子：

```
static private DataView dataView;

private void RefreshGridView()
{
    dataView = new DataView(GetDataTable()); // Will the previously created objects be destroyed and memory freed?
    BindGridView();
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T16:37:41.487

> // 之前创建的对象会被销毁并释放内存吗？

潜在的。执行此操作后，您将不再持有对原始`DataTable`. 只要没有其他东西引用这个对象，它就会有资格进行垃圾回收。在那之后的某个时刻，GC 将运行并收集对象，这反过来又会释放它的内存。

这适用于静态、实例和局部变量。在所有这些场景中，机制都是相同的。

请注意，如果您引用的对象 implements ，最好在丢失引用之前`IDisposable`调用它。`Dispose()`从技术上讲，正确实现的`IDisposable`实现*最终*会正确处理事情，但是在 GC 收集发生之前可能会占用原生资源，这可能不会很快发生。请注意，这与（托管）内存无关，但仍然是一个好习惯。

话虽这么说，你的第一个例子是一个不好的做法。虽然内存将（最终）被清理，但您执行的额外分配毫无用处，因此最好不要“双重分配”变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:37:29.290

简短的回答是所有这些都由垃圾收集器处理。这些实例不会立即被删除，但它们会被标记为“无法访问”并在稍后释放。

我建议阅读MSDN上的[垃圾收集文章](http://msdn.microsoft.com/en-au/library/0xy59wtx.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T16:40:14.700

对象是 C# 中的引用变量。这意味着它们在其中存储内存引用。

因此，当您重新分配一个对象时，您只需覆盖它持有的早期值（内存引用）。早期的值现在符合垃圾收集的条件。现在它的垃圾收集器的工作是释放该内存。同样适用于所有类型的变量，包括静态变量

# sql-server - 显示实际查询计划导致错误？

> ID：16109393
> 
> 赞同：4
> 
> 时间：2013-04-19T16:34:09.590
> 
> 标签：sql-server, tsql

好奇之前是否有人遇到过这个问题以及根本原因是什么。问题是在 SQL 2012 中执行包含实际查询计划时发生错误。它可以在 2008 R2 中以任何方式（有或没有计划）工作，并且在没有打开计划的情况下在 2012 年工作。我在针对分区视图测试功能时发现了这一点。

```
--Setup
USE master
go 

DROP DATABASE Test
GO

CREATE DATABASE Test
GO

USE Test
GO

CREATE TABLE DD (pkID int IDENTITY(1,1), FullDate date);
INSERT INTO DD (FullDate) VALUES ('2013-01-01')
INSERT INTO DD (FullDate) VALUES ('2013-01-02')
INSERT INTO DD (FullDate) VALUES ('2013-01-03')
INSERT INTO DD (FullDate) VALUES ('2013-01-04')
INSERT INTO DD (FullDate) VALUES ('2013-01-05')
GO

CREATE TABLE DC (pkID int IDENTITY(1,1), Filter varchar(32), FilterGroup varchar(32));
INSERT INTO DC (Filter, FilterGroup) VALUES ('one', 'groupone')
INSERT INTO DC (Filter, FilterGroup) VALUES ('two', 'grouptwo')
INSERT INTO DC (Filter, FilterGroup) VALUES ('three', 'groupone')
GO

CREATE TABLE FDA1 (pkID int IDENTITY(1,1), fkpID int, fkCID int, fkDateID int)
INSERT INTO FDA1(fkpID, fkCID, fkDateID) VALUES (1,1,1)
INSERT INTO FDA1(fkpID, fkCID, fkDateID) VALUES (1,2,1)
INSERT INTO FDA1(fkpID, fkCID, fkDateID) VALUES (1,1,3)
INSERT INTO FDA1(fkpID, fkCID, fkDateID) VALUES (1,3,5)
GO

CREATE TABLE FDA2 (pkID int IDENTITY(1,1), fkpID int, fkCID int, fkDateID int)
INSERT INTO FDA2(fkpID, fkCID, fkDateID) VALUES (2,1,2)
INSERT INTO FDA2(fkpID, fkCID, fkDateID) VALUES (2,2,2)
INSERT INTO FDA2(fkpID, fkCID, fkDateID) VALUES (2,1,4)
INSERT INTO FDA2(fkpID, fkCID, fkDateID) VALUES (2,3,5)
GO

CREATE VIEW FDA 
AS
    SELECT pkID, fkpID, fkCID, fkDateID FROM FDA1
    UNION ALL
    SELECT pkID, fkpID, fkCID, fkDateID FROM FDA2
GO

CREATE FUNCTION GetFilter
(
    @pID int
    , @filterGroup varchar(32)
)
RETURNS @Filter TABLE 
(
    CID int
)
AS
BEGIN
    INSERT INTO
        @Filter
    SELECT 
        dc.pkID 
    FROM
        DC dc
    WHERE
        dc.FilterGroup = @filterGroup 
    RETURN
END
GO

CREATE PROC test (@ID int)
AS
BEGIN
    BEGIN TRY
        DECLARE @FilterGroup varchar(32) = 'groupone'

        SELECT
            CAST(MIN(dd.FullDate) As datetime) as ProjectReviewStartDate
        FROM
            dbo.FDA fda
            INNER JOIN dbo.DD dd On fda.fkDateID = dd.pkID 
            INNER JOIN dbo.GetFilter(@ID, @FilterGroup) ctl on fda.fkCID = ctl.CID  
        WHERE
            fda.pkID = @ID 
        OPTION (RECOMPILE);
        RETURN 0;
    END TRY
    BEGIN CATCH

        --Declare variables for error information.
        Declare
            @ErrorMessage nvarchar(max),
            @ErrorSeverity bigint,
            @ErrorState int;

        --Populate error information.
        Select
            @ErrorMessage = ERROR_MESSAGE(),
            @ErrorSeverity = ERROR_SEVERITY(),
            @ErrorState = ERROR_STATE();

        --Re-throw error to calling method.
        RAISERROR(@ErrorMessage, @ErrorSeverity, @ErrorState);

        --Failure
        RETURN -1;
    END CATCH;
END
GO 
```

现在设置完成，让我们运行实际代码，首先“包含实际执行计划”

```
USE Test
GO

SET STATISTICS IO ON;
SET STATISTICS TIME ON;
GO

DECLARE @id int = 1
DECLARE @tbl table (dt datetime)
DECLARE @findate datetime

INSERT @tbl EXEC test @id

SELECT @findate = dt FROM @tbl
SELECT @findate
GO 
```

您应该收到以下结果：2013-01-01 00:00:00.000。

现在打开包含实际执行计划，您将收到 NULL 结果并看到错误（在 SQL 2012 中）：

消息 50000，级别 16，状态 10，过程测试，第 33 行字符串或二进制数据将被截断。

启用包含实际执行计划并从 proc 中删除 Try/Catch 块将删除错误并返回正确的结果。然而，这在 2008R2 中再次运行良好。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:44:04.150

我还没有给你答案，只是你可能遇到了错误的更多弹药。

首先，为了证明这并不`RAISERROR`具体涉及，将该行更改为：

```
THROW; 
```

而是返回此错误消息：

> 消息 8152、级别 16、状态 10、过程测试、第 7 行
> 字符串或二进制数据将被截断。

所以这表明错误发生在`SELECT`调用中，`TRY/CATCH`并且与显示实际计划的组合有关。

接下来，让我们看看元数据描述为存储过程的输出：

```
SELECT name, system_type_name
  FROM sys.dm_exec_describe_first_result_set_for_object
  (OBJECT_ID('test'), NULL); 
```

结果：

```
name                    system_type_name
----------------------  ----------------
ProjectReviewStartDate  datetime 
```

现在，如果我们尝试测试您正在运行的批处理的元数据，让我们看看它对元数据的说明（实际上，结果是一条错误消息）：

```
SELECT [error_message]
FROM sys.dm_exec_describe_first_result_set(N'DECLARE @id int = 1
  DECLARE @tbl table (dt datetime)
 DECLARE @findate datetime
 INSERT @tbl 
 EXEC test @id', -1, NULL); 
```

结果：

```
error_message
----------------------------------------------------------
Incorrect syntax near '-'.
The batch could not be analyzed because of compile errors. 
```

批次中没有`-`。这是在执行计划关闭的情况下。即使您在上面的批处理中注释掉插入，您也会得到相同的结果。甚至例如：

```
SELECT error_message
  FROM sys.dm_exec_describe_first_result_set(N'EXEC test 1', -1, NULL); 
```

错误消息变化如此轻微（仔细观察）：

```
error_message
----------------------------------------------------------
Incorrect syntax near '1'.
The batch could not be analyzed because of compile errors. 
```

我们已经删除了任何涉及显示计划或潜在截断的内容，我们仍然可以证明 SQL Server 在为这个简单的批处理编译和/或生成元数据时存在某种问题。

似乎是一个非常简单的重现，并且您有解决方法，但[我肯定会在 Connect 上归档](http://connect.microsoft.com/sql)。

**编辑**

我看到你提交了一个错误；任何可以重现这种情况的人都应该投票并确认重现：

[http://connect.microsoft.com/SQLServer/feedback/details/785151/show-actual-query-plan-causes-error](http://connect.microsoft.com/SQLServer/feedback/details/785151/show-actual-query-plan-causes-error)

# c++ - 命名空间范围

> ID：16109398
> 
> 赞同：1
> 
> 时间：2013-04-19T16:34:31.077
> 
> 标签：c++, namespaces, static-functions

我是一名 C 开发人员，最近才切换到 C++，所以命名空间是要学习的新东西。A 类有一个静态方法 validate()，因此它只能访问 A 类的静态变量或常量。但是如果 A.cpp 在命名空间中定义了一个常量，则 val() 能够使用该常量并且下面的代码被正确编译。

啊

```
class A
{
    public:
    A();
    static bool validate(const int num);
};

A::A()
{
    // Do nothing. Just an example.
} 
```

A.cpp

```
namespace A_local_constants
{
    const int val = 1;
}

using namespace A_local_constants;

bool A::validate(const int num)
{
    return (num == val);
} 
```

所以我的问题是：

1.  为什么静态函数 validate() 能够使用非静态常量 val？

2.  在内存中创建的 val 在哪里？

3.  这个常数的范围是多少？

4.  它总是在内存中创建而不创建 A 对象吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:44:50.463

1) “使用命名空间 A_local_constants；” 此语句拖出 A_local_constants 中定义的所有符号，因此 bool A::validate(const int num) 可以引用 val。

2) 全局内存

3) 此常量的范围在 A_local_constants 内，并且在我们使用“使用命名空间 A_local_constants”或“使用命名空间 A_local_constants::val”的所有地方都可见

4) A 类与常量 val 之间没有关系。

注意：应该明智地使用“使用命名空间 some_name_space”，因为它们可能会不必要地污染当前的命名空间。

# php - php-ews 如何按日历主题搜索日历事件

> ID：16109399
> 
> 赞同：0
> 
> 时间：2013-04-19T16:34:35.507
> 
> 标签：php, exchangewebservices, exchange-server-2010, php-ews

我正在使用[https://github.com/jamesiarmes/php-ews](https://github.com/jamesiarmes/php-ews)将 php 连接到交换服务器，到目前为止使用下面的代码没有问题。我可以连接到特定的用户邮箱，并可以检索他所有的日历事件。现在它拉所有的事件我想要的是只拉那些可以说'学生申请'的日历事件。在主题行中。是否可能。?

```
require_once('bug/dBug.php');
require_once('EWSType.php');
require_once('ExchangeWebServices.php');
require_once('NTLMSoapClient.php');
require_once('NTLMSoapClient/Exchange.php');
require_once('EWS_Exception.php');
require_once('EWSType/FindItemType.php');
require_once('EWSType/ItemQueryTraversalType.php');
require_once('EWSType/ItemResponseShapeType.php');
require_once('EWSType/DefaultShapeNamesType.php');
require_once('EWSType/CalendarViewType.php');
require_once('EWSType/NonEmptyArrayOfBaseFolderIdsType.php');
require_once('EWSType/DistinguishedFolderIdType.php');
require_once('EWSType/DistinguishedFolderIdNameType.php');
require_once('EWSType/EmailAddressType.php');
require_once('EWSType/UserIdType.php');
require_once('EWSType/CalendarEventDetails.php');

$host = 'xxx';
$username = 'xxx';
$password = 'xxx';
$version = 'Exchange2010';

$start = " 2013-04-17T15:18:34+03:00";
$end   = " 2013-04-30T15:18:34+03:00";

$ews = new ExchangeWebServices($host, $username, $password, $version);

//new dBug ($ews);

// Set init class
$request = new EWSType_FindItemType();
// Use this to search only the items in the parent directory in question or use ::SOFT_DELETED
// to identify "soft deleted" items, i.e. not visible and not in the trash can.
$request->Traversal = EWSType_ItemQueryTraversalType::SHALLOW;
// This identifies the set of properties to return in an item or folder response
$request->ItemShape = new EWSType_ItemResponseShapeType();
$request->ItemShape->BaseShape = EWSType_DefaultShapeNamesType::DEFAULT_PROPERTIES;

// Define the timeframe to load calendar items
$request->CalendarView = new EWSType_CalendarViewType();
$request->CalendarView->StartDate = $start ;// an ISO8601 date e.g. 2012-06-12T15:18:34+03:00
$request->CalendarView->EndDate = $end ; // an ISO8601 date later than the above

// Only look in the "calendars folder"
$request->ParentFolderIds = new EWSType_NonEmptyArrayOfBaseFolderIdsType();
$request->ParentFolderIds->DistinguishedFolderId = new EWSType_DistinguishedFolderIdType();
$request->ParentFolderIds->DistinguishedFolderId->Id = EWSType_DistinguishedFolderIdNameType::CALENDAR;

// if you want to get to someones folder 
while($info = mysql_fetch_array( $call_pri_result )){

    $EmailAddy = 'abc@exchangeserver.com';    
    $mailBox = new EWSType_EmailAddressType();
    $mailBox->EmailAddress = $EmailAddy;
    $request->ParentFolderIds->DistinguishedFolderId->Mailbox = $mailBox;

    echo 'Now Looping for Consular ID '.$EmailAddy.'<br>' ;

// Send request
    $response = $ews->FindItem($request);

    // Loop through each item if event(s) were found in the timeframe specified
    if ($response->ResponseMessages->FindItemResponseMessage->RootFolder->TotalItemsInView > 0){
        $events = $response->ResponseMessages->FindItemResponseMessage->RootFolder->Items->CalendarItem;
        foreach ($events as $event){
            $id = $event->ItemId->Id;
            $change_key = $event->ItemId->ChangeKey;
            $start = $event->Start;
            $end = $event->End;
            $subject = $event->Subject;
            //$location = $event->Location;
        }
    }
    else {
        // No items returned
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:25:21.770

根据我的挖掘，您无法向 CalendarView 添加限制或排序顺序。我将[此处](https://github.com/jamesiarmes/php-ews/wiki/Search-Expression%3a-Simple-Conditions#contains)找到的代码添加到我的代码中以获取日历项目，并得到以下 MessageText：

```
Restrictions and sort order may not be specified for a CalendarView. 
```

看起来 FieldURI 变量的完整列表列在此[MSDN 页面上](http://msdn.microsoft.com/en-us/library/exchange/aa494315%28v=exchg.140%29.aspx)。

在你的情况下，我会在你的 foreach() 事件循环中放置一个正则表达式 strpos() 或类似的。然后，如果这种情况匹配执行您的功能。是的，您将有额外的事件，您将无所事事，但您至少能够过滤掉您想要的事件。

# android - 创建物理世界给了我黑屏

> ID：16109402
> 
> 赞同：1
> 
> 时间：2013-04-19T16:34:55.133
> 
> 标签：android, box2d, andengine

我已经开始学习 andegine 并且我对 box2d 扩展有一些问题。我有这个代码，它给了我黑屏。当我删除制作 PhysicsWorld 时，它可以工作。

```
package com.cupofcoffee.heartjump;
import org.andengine.engine.camera.Camera;
import org.andengine.engine.options.EngineOptions;
import org.andengine.engine.options.ScreenOrientation;
import org.andengine.engine.options.resolutionpolicy.FillResolutionPolicy;
import org.andengine.entity.primitive.Rectangle;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.scene.background.Background;
import org.andengine.entity.util.FPSCounter;
import org.andengine.extension.physics.box2d.PhysicsWorld;
import org.andengine.ui.activity.SimpleBaseGameActivity;
import org.andengine.util.color.Color;

import android.hardware.SensorManager;

import com.badlogic.gdx.math.Vector2;

public class MainActivity extends SimpleBaseGameActivity {

    static final int CAMERA_WIDTH = 800;
    static final int CAMERA_HEIGHT = 480;
    Camera camera;
    Scene gameScene;

    Heart heart;
    PhysicsWorld physicsWorld;

    @Override
    public EngineOptions onCreateEngineOptions() {
        this.camera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);

        EngineOptions engineOptions = new EngineOptions(true,
                ScreenOrientation.LANDSCAPE_FIXED, new FillResolutionPolicy(),
                camera);
        return engineOptions;
    }

    @Override
    protected void onCreateResources() {

    }

    @Override
    protected Scene onCreateScene() {
        mEngine.registerUpdateHandler(new FPSCounter());
        gameScene = new Scene();
        gameScene.setBackground(new Background(1, 1, 1));

        physicsWorld = new PhysicsWorld(new Vector2(0, SensorManager.GRAVITY_EARTH), false);
//      heart = new Heart(500, 100, this, getVertexBufferObjectManager(), physicsWorld);

//      gameScene.registerUpdateHandler(physicsWorld);

//      gameScene.attachChild(heart.sprite);

        Rectangle r = new Rectangle(100, 100, 100, 100,
                getVertexBufferObjectManager());
        r.setColor(new Color(50, 50, 50));
        gameScene.attachChild(r);
        return gameScene;
    }

} 
```

那有什么问题？我真的找不到解决办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:23:46.123

您可以设置颜色背景。

```
gameScene.setBackground(new ColorBackground(1, 1, 1)); 
```

或者如果设置任何图像然后

```
gameScene.setBackground(new SpriteBackground(yourSprite)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:58:09.670

我认为这是无效的：
new Color(50, 50, 50)
每个参数的有效范围是 0-1，而不是 0-255

另外，尝试：
gameScene.setBackground(new Background(Color.RED));

# c++ - 程序说字典不存在

> ID：16109404
> 
> 赞同：1
> 
> 时间：2013-04-19T16:35:02.140
> 
> 标签：c++, file-io, static-libraries, spell-checking

我正在使用我的库 libspellcheck 编写拼写检查器。我有一个向字典添加单词的功能。但是，当它确实存在时，它会不断抛出异常，说字典不存在。您可以在此处的 pastebin 上找到拼写检查器代码：http: [//pastebin.com/1rCFAxDz](http://pastebin.com/1rCFAxDz)。在 libspellcheck 库中添加单词的函数如下：

```
void add_word(char *dict, char *word)
{
    ofstream dictionary;
    dictionary.open(dict, ios::out | ios::app); 
    if (dictionary.is_open())
    {
            dictionary << word;
            dictionary << "\n";
            dictionary.close();
    }
    else
    {
        throw 1;
    }

} 
```

检查单词拼写的功能使用相同的字典变量，并且工作正常。我很困惑。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:44:13.123

你确定你使用的是正确的路径吗？
喜欢：

> C:\\文件夹\\文件夹\...

有时你必须使用 2 \\ 瞬间 1 \\

# php - 如何将 Twitter 状态 id_str 存储在 mysql 数据库中

> ID：16109412
> 
> 赞同：2
> 
> 时间：2013-04-19T16:35:35.013
> 
> 标签：php, mysql, twitter

我正在从 twitter 搜索 api 中抓取流行的推文。对于每条抓取的推文，我记录状态变量“id_str”并在每次抓取之前对其进行检查，以确保没有重复添加到 db。但是我遇到了一些问题：

首先，当我将 id_str 字段格式化为 INT 时，它存储值“2147483647”而不是状态 id（每次！！）我真的不知道为什么？

然后我将其更改为 VARCHAR 字段，在添加 id 时成功，但我偶尔会发现添加了 dups。无论我使用 = 检查还是 LIKE 检查，都会发生这种情况。

所以问题是：我怎样才能**可靠地存储**唯一的 id_str 变量并**可靠地检查它**以避免重复？

顺便说一句，我正在使用 PHP。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:38:46.397

因为 id 大于整数的最大值 2147483647。[http://dev.mysql.com/doc/refman/5.0/en/integer-types.html](http://dev.mysql.com/doc/refman/5.0/en/integer-types.html)

您可以改用 BIGINT 或 DOUBLE。

# iphone - 截取部分屏幕截图

> ID：16109413
> 
> 赞同：0
> 
> 时间：2013-04-19T16:35:37.260
> 
> 标签：iphone, ios

我的视图控制器中有一个 UIImageView 我需要拍摄它的截图。上面还有一个 UILabel 。UIImageView 并没有覆盖整个页面，只是其中的一部分。我怎样才能截取屏幕的一部分？

我敢打赌这个问题之前已经被问过，但我查看了这篇文章[如何使用 UIGraphicsBeginImageContextWithOptions？](https://stackoverflow.com/questions/5146008/how-to-use-uigraphicsbeginimagecontextwithoptions)它只是与未定义的变量混淆

![在此处输入图像描述](https://i.stack.imgur.com/nsR5K.png)

到目前为止，我拥有的代码截取了整件事的屏幕截图。（不是我想要的）。我尝试使用 screenRect 没有任何效果。我想在拍摄全屏截图后裁剪图片，但问题是每个设备 iphone3、iphone4、iphone5、iPad 1、2、3 等的裁剪尺寸会有所不同。

所以我的问题是有没有办法在不经过裁剪路线的情况下截取一段屏幕截图？如果裁剪是唯一的方法，那么有没有一种方法可以可靠地剪切图片而不必担心具有高/低像素的不同 iOS 设备？

```
testBgImgVw = [[UIImageView alloc] initWithFrame:CGRectMake(0, 80, 320, 220)];

....

    -(IBAction) takeScreenshot
    {
        CGRect screenRect = [[UIScreen mainScreen] bounds];

        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) 
        {
            //its iphone
            screenRect  = CGRectMake(0, 0, 320, 480);
        }
        else
        {
            //its pad
            screenRect  = CGRectMake(0, 0, 768, 1024);
        }

        // This code is for high resolution screenshot
        UIGraphicsBeginImageContextWithOptions(screenRect.size, NO, 0.0);
        [self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
        UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        NSData* imageData = UIImageJPEGRepresentation(viewImage, 1.0);
        NSString* incrementedImgStr = [NSString stringWithFormat: @"UserScreenShotPic.jpg"];

        NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString* documentsDirectory = [paths objectAtIndex:0];

        // Now we get the full path to the file
        NSString* fullPathToFile2 = [documentsDirectory stringByAppendingPathComponent:incrementedImgStr];
        [imageData writeToFile:fullPathToFile2 atomically:NO];

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:54:53.867

好的，如果您只想捕获图像和图像上的标签（如果您可以确保标签始终在图像上），那么

在 imageview 上添加标签（imageview addSubview:label）

然后将其渲染为新图像

```
UIGraphicsBeginImageContextWithOptions(screenRect.size, NO,[[UIScreen mainScreen]scale]);
[imageView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

完毕 ：）

如果你想拍摄几个 uiviews（imageview、label 等），最好的方法是提供一个 UIView 画布

```
UIView *canvasView = [[UIView alloc]......]
[self.view addSubview:canvasView]; 
```

并添加您想要在其上渲染的每个视图，最后将其渲染为您想要的新图像

# ios - 对所有实例变量编码标准使用@properties

> ID：16109415
> 
> 赞同：0
> 
> 时间：2013-04-19T16:35:38.947
> 
> 标签：ios, objective-c

我的编码团队已选择实施一种编码标准，即对所有实例 ivars 使用 @property。对于公开的东西，我们当然在我们的 .h 文件中定义它们，但对于我们的私有的东西，我们在 .m 文件中定义它们，在我们的实现之上的一个接口中。

1.  我将它们称为`self.myvar = whatever`还是 有关系`[self setMyvar:whatever]`吗？这对我来说似乎一点也不重要，而且在我们的代码库中似乎有很多混合方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T16:37:49.537

```
self.myvar = whatever 
```

是语法糖

```
[self setMyvar:whatever] 
```

它们完全一样。完全没有区别。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T17:05:37.833

正如其他人所指出的那样，`foo.bar`并且`[foo bar]`是等效的（除了对前者的附加类型要求，但这是次要的）。

FWIW，我们的团队决定完全避开点语法。动机是避免歧义；消息发送始终看起来像消息发送，并且 .s 始终用于访问结构成员。

我们还限制我们仅使用`@{}`和`@[]`创建集合。所有访问都通过`indexOfObject:`,`objectForKey:`等完成...

同样，我们在任何地方都使用 ARC，除了位于 ObjC 和 C++ 之间的几个边界文件。我们为所有 DEBUG 构建打开了静态分析器，所有警告都被视为硬错误。我们还打开了几乎所有实用的编译器警告（有些根本不实用）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T16:39:38.427

self.myVar = x 实际上编译为 [self setMyVar: x];。没有运行时差异。

然而; 为了便于代码可读性，我建议坚持使用一种或另一种方案。如果您已经强制执行了属性，最好将所有内容都保留为点符号 - 如果没有其他原因，只是因为这样可以更轻松地搜索您的代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T16:48:30.620

类似的问题还有很多。

在我们的编码标准中，我们不关心使用点符号或方法来访问属性。我们甚至有时对未正式声明为属性的方法使用点表示法，因为对于库方法，有时如果不检查文档就很难知道，而且没有任何区别。

禁止直接方法调用是没有意义的（难以实施）。
我看到了禁止点符号的编码标准。

一般来说，我倾向于使用点表示法，因为它使我能够将作业拆分为视觉上分离的部分，例如

```
self.a = x; 
```

反对

```
[self setA:x]; 
```

第二个对我来说似乎不太可读，但这是个人品味的问题。

另一方面，有时直接使用该方法更容易，例如，当您将对象作为 an`id`并且您必须强制转换以使用点符号时。

我认为将两者混合是一个很好的解决方案。选择一个可以增加给定位置可读性的选项。

# c++ - 问题控制游戏帧率 C++

> ID：16109417
> 
> 赞同：1
> 
> 时间：2013-04-19T16:35:44.397
> 
> 标签：c++, frame-rate, game-loop

我正在用 C++ 编写游戏，但我无法创建一种让游戏每秒只更新 60 次的方法。我编写的代码看起来应该可以工作，但帧速率实际上是每秒 44 帧而不是 60 帧。

```
const int               FRAMES_PER_SECOND = 60;
const int               FRAME_CONTROL = (1000 / FRAMES_PER_SECOND);
double                  lastFrameTime;
double                  currentFrameTime;

void GameLoop()
{
    currentFrameTime = GetTickCount();

    if ((currentFrameTime - lastFrameTime) >= FRAME_CONTROL)
    {
        lastFrameTime = currentFrameTime;

        // Update Game.
    }
} 
```

所以是的，它应该是 60 帧，但它实际上以 44 帧运行。我用来计算帧速率的类在其他已经有上限帧速率的程序中完美运行。

任何想法是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:39:30.837

它是由于`getTickCount`. 该函数仅提供 10-16 毫秒的分辨率[Microsoft GetTickCount()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408%28v=vs.85%29.aspx)

# java - 将 Java 项目部署给其他用户

> ID：16109419
> 
> 赞同：0
> 
> 时间：2013-04-19T16:35:45.077
> 
> 标签：java, swing, jframe, javac, japplet

我是 Java 新手，正在使用 Eclipse。

每当我在我的 PC 上成功构建 Java (JFrame) 项目时，当我将 java 项目文件部署给其他用户时，我必须在其他 ppl 的 PC 上编译项目，然后他们才能真正使用它。

有什么方便的方法来解决这个问题吗？即当我将这些Java 文件放到一个共享文件夹中时，所有其他用户（新的/现有的）都可以在他们的PC 上执行它.. （juz 就像MS Window 中的.exe） 实际上外面的做法如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T02:50:44.687

分发桌面应用程序的最佳方式。对用户来说是[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)。它需要我们开发人员做一些额外的工作，但对最终用户来说是轻而易举的事。

> Java Web Start (JWS) 是 Oracle Corporation 的技术，用于直接从网络或 Internet 链接启动富客户端（Swing、AWT、SWT）桌面应用程序。它为支持 Java 的平台提供“一键式”安装。
> 
> JWS 提供了许多吸引人的功能，包括但不限于启动屏幕、桌面集成、文件关联、自动更新（包括延迟下载和更新的编程控制）、按平台、架构或 Java 版本、配置划分本地和其他资源下载运行时环境（最低 J2SE 版本、运行时选项、RAM 等），使用扩展轻松管理公共资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:39:57.980

您可以使用 Eclipse 为您的项目创建一个 JAR 文件，它会生成一个其他人可以运行的可执行 JAR。有关在 Eclipse 中创建 JAR 的更多信息，请[参阅](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/tasks-32.htm&resultof=%22jar%22%20).

# perl - Perl - 在字符串中使用未初始化的值

> ID：16109422
> 
> 赞同：0
> 
> 时间：2013-04-19T16:35:52.503
> 
> 标签：perl

我开始自学 Perl，在一些谷歌搜索的帮助下，我能够编写一个脚本，打印出给定目录中的文件扩展名。该代码运行良好，但是有时会抱怨以下内容：

```
Use of uninitialized value $exts[xx] in string eq at get_file_exts.plx 
```

我试图通过如下初始化我的数组来纠正这个问题：my @exts = (); 但这并没有按预期工作。

```
#!/usr/bin/perl
use strict; 
use warnings;
use File::Find;

#Check for correct number of arguments
if(@ARGV != 1) {
    print "ERROR: Incorrect syntax...\n";
    print "Usage: perl get_file_exts.plx <Directory>\n";
    exit 0;
}

#Search through directory
find({ wanted => \&process_file, no_chdir => 1 }, @ARGV);

my @exts;

sub process_file {
    if (-f $_) {
        #print "File: $_\n";
        #Get extension
        my ($ext) = $_ =~ /(\.[^.]+)$/;

        #Add first extension
        if(scalar @exts == 0) {
            push(@exts, $ext);
        }

        #Loop through array
        foreach my $index (0..$#exts) {
            #Check for match
            if($exts[$index] eq $ext) {
                last;
            } 
            if($index == $#exts) {
                push(@exts, $ext);
            }
        }
    } else {
        #print "Searching $_\n";
    }
}

#Sort array
@exts = sort(@exts);

#Print contents
print ("@exts", "\n"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:47:17.970

警告是抱怨 的内容`$exts[xx]`，而不是`@exts`它本身。

实际上`$ext`可以是`undef`，当文件名与您的正则表达式不匹配时，例如*README*。

试试看：

```
 my ($ext) = $_ =~ /(\.[^.]+)$/ or return; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T18:44:23.257

您需要测试是否找到了扩展。

此外，您不应该索引您的数组。您也不需要管理“推送”，只需执行此操作即可。这不是 Perl 的方式。你的 for 循环应该像这样开始：

```
sub process_file {
  if (-f $_) {
    #print "File: $_\n";
    #Get extension
    my ($ext) = $_ =~ /(\.[^.]+)$/;

    # If we found an extension, and we have not seen it before, add it to @exts
    if ($ext) {
      #Loop through array to see if this is a new extension
      my $newExt = 1;
      for my $seenExt (@exts) {
        #Check for match
        if ($seenExt eq $ext) {
          $newExt = 0
          last;
        }
      }

      if ($newExt) {
        push @exts,$ext;
      }
    }
  }
} 
```

但是你真正想做的是使用哈希表来记录你是否看到了一个扩展

```
# Move this before find(...); if you want to initialize it or you will clobber the 
# contents
my %sawExt;

sub process_file {
  if (-f $_) {
    #print "File: $_\n";
    # Get extension
    my ($ext) = $_ =~ /(\.[^.]+)$/;

   # If we have an extension, mark that we've seen it
   $sawExt{$ext} = 1
     if $ext;
  }
}

# Print the extensions we've seen in sorted order
print join(' ',sort keys %sawExt) . "\n"; 
```

甚至

```
sub process_file {
  if (-f $_ && $_ =~ /(\.[^.]+)$/) {
    $sawExt{$1} = 1;
  }
} 
```

或者

```
sub process_file {
  $sawExt{$1} = 1
    if -f && /(\.[^.]+)$/;
} 
```

一旦你开始在 Perl 中思考，这就是编写它的自然方式

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T18:49:58.483

主要问题是您没有考虑不包含点的文件名，所以

```
my ($ext) = $_ =~ /(\.[^.]+)$/; 
```

设置`$ext`为`undef`。

尽管有警告，处理继续通过评估`undef`为空字符串，未能在 中找到它`@exts`，因此也渗透`undef`到数组中。

使您的代码正常工作的最小更改是替换

```
my ($ext) = $_ =~ /(\.[^.]+)$/; 
```

和

```
return unless /(\.[^.]+)$/;
my $ext = $1; 
```

但是这里有几个 Perl 课程需要学习。曾经有人教导说，好的程序是评论良好的程序*。*那是在不得不编写高效但难以理解的代码的时代，但现在不再如此。您应该编写尽可能清晰的代码，并且仅在您绝对必须编写一些不自我解释的内容时才添加注释。

您应该记住并使用 Perl 习语，并尝试忘记您所知道的大多数 C。例如，Perl 接受“here document”语法，并且通常将`or`and`and`用作短路运算符。您的参数检查变为

```
@ARGV or die <<END;
ERROR: Incorrect syntax...
Usage: perl get_file_exts.plx <Directory>
END 
```

Perl 允许清晰而简洁的编程。这就是我写你的`wanted`子程序的方式

```
sub process_file {

  return unless -f and /(\.[^.]+)$/;

  my $ext = $1;

  foreach my $index (0 .. $#exts) {
    return if $exts[$index] eq $ext;
  }

  push @exts, $ext;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T16:43:19.740

[`exists`](http://perldoc.perl.org/functions/exists.html)在`$exts[xx]`访问它之前使用。

`exists`尽管正如@chrsblck 指出的那样，但已弃用：

> 请注意，对数组值调用存在已被弃用，并且可能在 Perl 的未来版本中被删除。

但是您应该能够简单地检查它是否存在（而不是`0`or `""`）：

```
if($exts[index] && $exts[$index] eq $ext){
   ...
} 
```

# php - Mysql 存储诸如“Facebook 喜欢”之类的内容

> ID：16109423
> 
> 赞同：1
> 
> 时间：2013-04-19T16:35:59.117
> 
> 标签：php, facebook, facebook-like

我必须创建一个赞系统（名称不会是“赞”，Facebook 拥有它）。所以我想出了两种方法将这些喜欢存储在我的数据库中，我想知道，对于一个流量非常大的网站，哪种方式更好。

1.  使用“id”、“comment_id”、“user_id”单元格创建表 comment_likes。在评论表中存储“like_count”，所以当我需要写出来的时候不需要计算它。但是点赞很容易做到，所以人们会创建很多点赞，如果我需要列出指定评论的点赞，我需要阅读整个comment_likes 表并找到所有user_id。这可能是未来数百万行。如果 1000 个用户同时执行此操作，我的系统将会死机。
2.  我的第二个想法是，在评论表中存储喜欢。创建一个名为“likes”的单元格，其中包含这样的 user_ids 列表：1#34#21#56#.... 所以当有人喜欢/不喜欢评论时，只需用 # 连接或替换此单元格中的他/她的 id。当我需要列出指定的评论时，只需在#-s 处展开此列表。

我认为 2nd 可能会更快、更智能，但您对此有何看法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:42:08.643

第一个选项要好得多，因为您有关系设置的好处。例如：如果你想从数据库 userId x 中获取评论怎么办？使用第一个设置，这是一个快速而简单的查询。在第二种情况下，您将不得不使用 LIKE，这要慢得多且不准确。（假设 userId 为 1，comments 表中的 likes 字段包含 #10 - 如果您使用 LIKE '%1%'，它将返回评论）。

甚至对于高流量网站；只需在commentId 上使用索引就可以快速操作。

所以选择第一个选项。

如果您真的怀疑第一个选项的速度，您可以在评论表中创建一个“缓存”字段，您可以在其中计算喜欢的数量，这样您就不必执行子查询来选择喜欢的数量。

# twitter-bootstrap - 当屏幕宽度改变时，twitter 引导布局会修改

> ID：16109425
> 
> 赞同：1
> 
> 时间：2013-04-19T16:36:00.590
> 
> 标签：twitter-bootstrap, responsive-design, html, fluid-layout

我正在尝试使用 Twitter Bootstrap 来实现某些目标，但我不确定如何去做，以及是否可能（很确定它是，只需要知道如何 :p ）。

基本上我想要的是，当我在全屏时，我的布局是一个四列布局。

当我将屏幕调整为更小的宽度时，布局应转换为两列布局。

最后，当在手机大小的屏幕上时，具有一列布局。

对于手机来说，这不是问题，因为当屏幕尺寸介于手机和平板电脑之间时，twitter bootstrap 会堆叠所有列。

问题出在窗口和平板电脑布局上。

假设我做了这样的事情：

```
 <div class="container">
        <div class="row">
            <div class="span3">test</div>
            <div class="span3">test2</div>
            <div class="span3">test3</div>
            <div class="span3">test4</div>
        </div>
    </div> 
```

然后我有一个四列布局，直到我调整到手机大小并且 div 被堆叠（当我使用引导响应时）。

我不知道我是否说清楚了。

但是，如果有人理解我并且可以提供帮助，我很乐意接受所有关于这一点的建议！

编辑：这样的东西会很棒（但如果可能的话，使用 twitter 引导程序（我只是想使用它，所以基本上是看看它是如何工作的））：[http ://webdesignerwall.com/demo/responsive-column-grid /](http://webdesignerwall.com/demo/responsive-column-grid/)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T21:46:51.473

我找到了我要找的东西：stackoverflow.com/questions/15400148/

# css - Ext JS 中的样式组合框字段

> ID：16109426
> 
> 赞同：1
> 
> 时间：2013-04-19T16:36:01.057
> 
> 标签：css, extjs, combobox, styles

我有一个组合框，我只是想让它加粗。数据在存储中。我可以加粗列表中的项目，但在文本框中选择项目后我不能加粗项目。

我努力了：

fontWeight: 'bold', cls: 'make-bold', itemCls:'make-bold',

我可以通过模板加粗列表，但不能在文本字段中加粗项目。

```
items:[
{
xtype: 'combobox',
name: 'inputType',
id: 'inputType',
padding : '6 5 5 5',
store: 'Codes',
displayField: 'display',
valueField: 'code',
value: 'Inp_CODE',
editable: false,
width: 80,
tpl: Ext.create('Ext.XTemplate', 
'<tpl for=".">','<div class="x-boundlist-item"><b>{display}</b></div>','</tpl>')
}, { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:55:58.853

这做到了

```
 fieldCls: 'make-bold', 
 style: {               
     fontWeight: 'bold' 
 } 
```

为什么我两者都需要？

# php - 从 PHP 执行时 PhantomJS 不呈现

> ID：16109427
> 
> 赞同：4
> 
> 时间：2013-04-19T16:36:08.630
> 
> 标签：php, javascript, phantomjs

phantomjs 的新手决定使用它来打印网页的屏幕截图。从终端一切正常，但是当使用 shell_exec 函数从 PHP 脚本执行时，渲染不起作用。

这只是从 PHP 执行幻象的部分。使用 shell_exec 执行的其他命令可以正常工作，只是渲染无效。

```
$output = shell_exec("phantomjs phantom.js");
echo $output; 
```

这是在 shell 上执行时可以正常工作的幻影脚本

```
var page = require('webpage').create();
page.open( "http://www.google.co.uk" , function(s){
    var title = page.evaluate(function(){
        var main = document.getElementsByTagName("center");
        main[0].style.visibility = "hidden";
        return document.title;
    });
    console.log("rendering now");
    page.render("title" + ".png");
phantom.exit();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:16:03.923

这可能会产生更可预测的结果-

出于测试目的，只需使用：

```
 exec("phantomjs phantom.js"); 
```

确保您在执行 php 脚本的**同一文件夹**中有 phantomjs 可执行文件。

其次，丢失 $output 变量。我尝试了与您尝试的类似的方法，但它不起作用-您的幻像脚本不会在当前状态下返回任何内容，并且 shell_exec 由于其不可预测和不安全的性质而正在被弃用。恕我直言，shell_exec 充其量是 hackish 和暂时的。

第三，为了测试，将您的文件夹 CHMOD 到“777”。或者将页面渲染的输出保存到具有写入权限的文件夹中。

至于从 PhantomJs 脚本返回可用数据（读取：可用于多个并发用户，因为这是一个缓慢且阻塞的操作）到您的 PHP 脚本......嗯......这就是挑战......

# ruby-on-rails - 未定义的局部变量或方法`params` Rspec

> ID：16109429
> 
> 赞同：1
> 
> 时间：2013-04-19T16:36:13.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

我有以下控制器 RSpec 测试，但是当我尝试执行以下代码时，它应该可以工作：

```
require 'spec_helper'
require File.expand_path(File.dirname(__FILE__) + '/../spec_helper')

describe UsersController do
  include Devise::TestHelpers #Include devise test helpers
  render_views # Render devise views

  describe "GET 'show'"

  before(:each) do
    @user = User.find(params[:id])
    @attr = {:initials => 'EU', :name => 'Example', :full_name => 'Example User',
             :email => 'user@example.com', :password => 'password', :password_confirmation => 'password'

             #@attr = User.all
    }
  end

  it 'should be successful when showing OWN details' do
    get :show, :id => @attr
    response.should be_success
  end

  it 'should find the correct user' do
    get :show, :id => @attr
    assigns(@attr).should == @attr
  end
end 
```

但是我得到以下输出：`Undefined locacl variable or method 'params' for RSPRC`我相信这个设置应该是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:52:43.200

I see a few things going on here.

Your calling params within the before statement but where is the id ever set? No where in this code do I see where the user id is ever actually determined/found. You should set @user explicitly using either an id that you know exists or doing something such as User.first.

Then instead of calling

```
get :show, :id => @attr 
```

you should be calling

```
get :show, :id => @user.id 
```

Also I'm not sure why you need to include spec_helper twice. Line 2 should be able to be removed.

One more thing - assigns(@attr).should == @attr doesn't make any sense. It should be assigns(:attr).should == @attr. Otherwise you would be passing the value of @attr into the assigns method.

# angularjs - Angular UI ui-keypress 不适用于向下键

> ID：16109435
> 
> 赞同：1
> 
> 时间：2013-04-19T16:36:36.483
> 
> 标签：angularjs, angular-ui

我试图让 angular-ui ui-keypress 在按下向下键时调用一个函数。从我发现向下键是代码号 40。但是我无法触发事件。

如果您查看此 jsfiddle，它会触发 ENTER 按键上的功能（尝试输入或什至 13）。但是，如果您将其更改为 40，它将不起作用。[http://jsfiddle.net/jayrmotta/NbjZL/70/](http://jsfiddle.net/jayrmotta/NbjZL/70/)

```
<!DOCTYPE html>
<html ng-app="myModule" xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Main</title>
</head>
<body ng-controller="Ctrl">
  <button ng-click="add()">Add</button>
  <input type="text" ui-keypress="{40: 'add()'}" />
  {{item}}
</body>
</html>

var myModule = angular.module('myModule', ['ui.directives']);
function Ctrl($scope) {
  $scope.item = "";

  $scope.add = function () {
    $scope.item = "Item Added";
  }
} 
```

我有错误的代码还是可以告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T16:42:06.927

JavaScript`keypress`事件不会针对上、下、左或右触发。您想使用`keyup`or`keydown`代替。在你的情况下，你想要：`ui-keyup="{40: 'add()'}"`

[http://www.w3schools.com/jsref/event_onkeypress.asp](http://www.w3schools.com/jsref/event_onkeypress.asp)

> 注意：onkeypress 事件并非针对所有浏览器中的所有键（例如 ALT、CTRL、SHIFT、ESC）触发。要仅检测用户是否按下了某个键，请改用 onkeydown 事件，因为它适用于所有键。

# sql-server - Sql 查询以查找计数

> ID：16109440
> 
> 赞同：1
> 
> 时间：2013-04-19T16:36:55.997
> 
> 标签：sql-server, sql-server-2008, tsql

我有一张如下表。

```
Id Product1 Product2 Product3
1     1      null     null
2     1       2       null
3     3       1       null
4     2       3        1 
```

现在我想编写一个查询来计算 Product 1 的条目。在上述情况下， Product1 为 2 ， Product2 为 1 ， Product 3 为 1

我想出了一个类似这样的查询。

```
select
Count(Product1) +
Count(Product2) +
Count(Product3)
from  
Table 
where Product1  =  1 
```

但它给了我一个不准确的结果。有没有办法获得每种产品的出现次数？

**通过...分组**

所需的输出将是这样的：

```
ProductID Product1Count Product2Count Product3Count 
  1           2              1             1                    
  2           1              1             0
  3           1              1             0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:41:16.563

```
select Count(CASE WHEN Product1 = 1 THEN 1 END) +
       Count(CASE WHEN Product2 = 1 THEN 1 END) +
       Count(CASE WHEN Product3 = 1 THEN 1 END)
from   Table1 
where  1 IN (Product1, Product2, Product3) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/e9e43/1)

添加这一行的原因是：`where 1 IN (Product1, Product2, Product3)`只计算受影响的行，从而使其比运行所有记录更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:40:51.347

像这样的东西会起作用：

```
SELECT
SUM(CASE WHEN Product1 = 1 THEN 1 ELSE 0 END)
+ SUM(CASE WHEN Product2 = 1 THEN 1 ELSE 0 END)
+ SUM(CASE WHEN Product3 = 1 THEN 1 ELSE 0 END)
FROM Table 
```

# installation - 已存在相同版本时安装 JRE

> ID：16109443
> 
> 赞同：2
> 
> 时间：2013-04-19T16:37:00.353
> 
> 标签：installation, java

我正在尝试以`jre-6u43-windows-i586`静态静默模式在我的计算机上安装一个。这是另一个安装程序的一部分。我跑

```
jre-6u43-windows-i586.exe /s STATIC=1 INSTALLDIR=D:\\java1 
```

它安装得很好。然后，我尝试再安装一次，比如

```
jre-6u43-windows-i586.exe /s STATIC=1 INSTALLDIR=D:\\java2 
```

它不会安装，直到我通过删除以前的安装`Programs and Features`。

如何创建一个完全独立的 JRE 安装，因此它不会在 中列出`Programs and Features`，也不会在注册表中注册，等等。因此，我可以创建任意数量的嵌入式安装。

PS 我知道我可以在安装 JRE 后打包，然后在任何地方解压，但也许有更合适的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:19:17.240

看看您是否可以使用可在[此处](http://portableapps.com/apps/utilities/java_portable)找到的 Portable Java 。

我认为它可以满足您的需求，并且不会使注册表混乱。

# opencv - NumPy/OpenCV 2：如何枚举区域中的所有像素？

> ID：16109444
> 
> 赞同：2
> 
> 时间：2013-04-19T16:37:02.320
> 
> 标签：opencv, image-processing, numpy, region

这是我[的旧问题](https://stackoverflow.com/questions/15341538/numpy-opencv-2-how-do-i-crop-non-rectangular-region)的延续。

给定**非矩形**区域，我如何**枚举其中的所有像素**并将它们排列为单个向量？顺序无关紧要（尽管应该是确定性的）。是否有任何快速方法（或至少是标准功能）或者我最好的方法是迭代图像中的像素并仅从 ROI 中提取那些？

如果以后可以从该向量恢复区域数据，则额外加分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:57:41.690

您可以`numpy.where()`为此使用功能。您不必遍历像素。

我将继续你的最后一个问题。在接受的答案中，创建了一个蒙版，您在其上绘制了一个多边形，以确定蒙版区域。您所要做的就是简单地找到该掩码图像中像素为 255 的位置。

```
ROI_pixel_locations = np.transpose(np.where(mask[:,:,0]==255)) 
```

这将为您提供 x,y 位置的 Mx2 数组。

如果您使用的是 OpenCV 2.4.4 或更高版本，它的功能`cv2.nonzero()`完全相同。

**笔记 ：**

在上一个问题中，接受的答案会创建 3 通道蒙版图像。如果是单通道蒙版图像，您只需像这样给出：

```
ROI_pixel_locations = np.transpose(np.where(mask==255)) 
```

但是在 AND 操作期间，您修改行如下：

```
masked_image = cv2.bitwise_and(image,image, mask=mask) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:41:24.443

# 提取区域

您可以使用 [`numpy.nonzero()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.nonzero.html)

```
mask_1c = mask[:, :, 0]
indexes = mask_1c.nonzero() 
```

`mask_1c`是否存在，因为在您之前的问题中，您有一个 3 通道蒙版图像。

**存储为向量**

如果您希望将内容存储为单个数组（而不是数组元组）

```
indexes_v = np.array(indexes).T # Returns an Nx2 matrix 
```

# 使用区域

假设您随后想要*反转该区域*，例如：

```
image[indexes[0], indexes[1], :] = 255 - image[indexes[0], indexes[1], :] 
```

我假设图像是类型的`np.uint8`（最大值为`255`）。

# wpf - 无法在用户控件中引用/绑定查看模板

> ID：16109446
> 
> 赞同：2
> 
> 时间：2013-04-19T16:37:06.870
> 
> 标签：wpf, user-controls, views

我在用户控件中有一个视图模板，如下所示

```
<UserControl
    x:Class="Configuration.Views.viewProfileTemplate"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
    mc:Ignorable="d" 
    d:DesignHeight="300" d:DesignWidth="300">

    <Grid Background="Azure" Width="233">
        <StackPanel Height="300" HorizontalAlignment="Left" Name="stackPanel1"  VerticalAlignment="Top" Width="230">
             <TextBox Text="{Binding Path=SomeProfileText}" Margin="10" />
             <ListBox ItemsSource="{Binding Path=Profiles}" Height="70" Margin="10"/>
             <CheckBox Content="CheckBox" Height="16" Name="checkBox1" Width="175" />
         </StackPanel>
     </Grid>
</UserControl> 
```

用户控件在 main.xaml 窗口中定义如下

```
<Window x:Class="Configuration.TreeUI"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:views="clr-namespace:Configuration.Views"
        xmlns:local="clr-namespace:Configuration"
        Title="TreeUI" Height="300" Width="450" WindowStyle="ToolWindow"> 
```

我尝试将模板与

```
<DataTemplate DataType="{x:Type local:ProfileViewModel}">
    <Views:viewProfileTemplate/>
</DataTemplate> 
```

但编译器报告：
错误 1 ​​找不到类型“视图：viewProfileTemplate”。确认您没有丢失程序集引用并且所有引用的程序集都已构建。

我又错过了一些重要的点，但是什么？

想欠别人一大杯酒......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:45:22.470

这有两个潜在的原因：

1）如果数据模板与 不同的程序集`viewProfileTemplate`，则需要使 xaml 反映这一点：

```
 xmlns:views="clr-namespace:Configuration.Views;assembly=ViewAssembly" 
```

请注意，这还需要将引用添加到项目中才能正常运行。

2) 如果这是设计时错误，请确保首先构建解决方案。VS 中的 WPF 设计器通常会报告有关缺少类型的错误，直到您构建一次，然后它才能正常“工作”。

# github - 无效语法 - 使用 https:// 的 easy_install

> ID：16109447
> 
> 赞同：0
> 
> 时间：2013-04-19T16:37:16.633
> 
> 标签：github, ipython, easy-install

我正在使用 IPython。

我正在尝试从 GitHub 安装一个包。

我正在使用以下内容：

```
easy_install https://github.com/lisa-lab/pylearn2/tree/master/pylearn2 
```

我的输出表明语法无效（突出显示 https 中的“s”）。

具体来说，它指出`File "<ipython-input-1-c700863fa141>", line 1`

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:10:17.067

这里有几个误解：

1.  `easy_install`不是 Python 命令，而是 shell 命令。因此，您想在常规 shell 中运行此行：

    ```
    $> easy_install [url] 
    ```

    `!`或IPython 中的前缀：

    ```
    In [1]: !easy_install [url] 
    ```

2.  该 URL 不适合安装 github 项目的当前 master。您想使用 tarball 网址：

    ```
    $> easy_install https://github.com/lisa-lab/pylearn2/tarball/master 
    ```

# algorithm - 如何停止一个进程并开始其他进程而不返回 Arduino 中的初始进程

> ID：16109450
> 
> 赞同：1
> 
> 时间：2013-04-19T16:37:21.223
> 
> 标签：algorithm, arduino, interrupt

我想构建一个利用Arduino并通过蓝牙远程控制的Hexapod，目前我正在编写它的行走代码（在Arduino部分），但我不知道如何进行。问题如下：当一个新的从远程设备接收到命令我希望腿停止他们正在做的事情并执行接收到的命令。如果这个动作是通过中断实现的，那么在命令完成后，前面的过程再次开始，这对我来说是不希望的。可以做什么？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:40:54.960

arduino 并没有真正的独立进程——甚至没有操作系统。

你应该从“状态”的角度来思考。有一个表示当前状态的全局（抱歉）int（使用枚举），然后当你执行新命令时，将状态设置为新命令并返回，然后有一个主循环来检查状态并执行所需的任何功能。

# mediaelement.js - mediaelement.js 的闪存后备是否预加载音频文件？

> ID：16109454
> 
> 赞同：1
> 
> 时间：2013-04-19T16:37:35.627
> 
> 标签：mediaelement.js

当 mediaelement.js 在 Internet Explorer v.6-8 中加载 Flash 回退时，我有一个关于 mediaelement.js 的一般性问题。如果标签中没有 preload="none" 属性，mediaelement 创建的 Flash 播放器是否会预加载 mp3？

我目前正在使用 mediaelement.js 版本 2.6.5。

# java - 在tomcat上部署java-application

> ID：16109455
> 
> 赞同：1
> 
> 时间：2013-04-19T16:37:37.233
> 
> 标签：java, apache, tomcat, ubuntu-12.04

我开发了一个 java webservice 应用程序，我一直在我的开发计算机上运行，​​同时设置了一个基于 ubuntu 的专用 linux 服务器。我已经在这个 linux 服务器上安装了 oracle-jre、mysql 和 apache tomcat 7，在阅读了文档之后，我了解到我可以复制部署的项目存档 (.WAR) 或者我可以简单地将项目文件夹复制到服务器 /webapps/我的开发计算机中的文件夹。然后重启tomcat7，它应该会自动运行webapp。

在我的带有 Eclipse IDE 的开发计算机上，web 服务按预期正常工作，但我根本无法访问服务器上的 POST URL 方法，
例如 localhost:8080/Webservice/rest/account/login
（服务器上的安装似乎没问题因为 Apache 示例都可以正常工作。）

1.  我在 /logs/ 目录中看不到任何日志，实际上该文件夹是完全空的，所以我无法调试实际发生的事情。为什么不将日志写入 Catalina.out 文件？
2.  如上所述，我是否正确部署了它？
3.  我是否需要配置 Eclipse 或任何项目设置以反映从 Eclipse IDE / dev-computer 到服务器的更改？例如，有什么真正的区别吗？

那里有很多问题，但我想尽可能地澄清，
干杯，
奥利弗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-05T02:53:45.627

我通过重新安装tomcat解决了这个问题。

# android - 从我的应用程序启动 android 秒表

> ID：16109463
> 
> 赞同：1
> 
> 时间：2013-04-19T16:38:08.000
> 
> 标签：android, stopwatch

我想从我的应用程序中启动 android 附带的秒表应用程序，但不知道如何执行此操作。我不想自己创建秒表，因为当我关闭我的应用程序时它需要继续运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:43:36.507

直到 Android 4.1（或者可能是 4.2）AOSP Android 都没有秒表，并且没有官方 SDK 支持启动应用程序的这一部分。秒表可能是由用户或 OEM 在大多数设备上安装的。

# entity-framework - 将 Breeze js 结果集成到包含嵌套类型的剑道网格中

> ID：16109466
> 
> 赞同：2
> 
> 时间：2013-04-19T16:38:19.657
> 
> 标签：entity-framework, recursion, kendo-ui, breeze, durandal

我正在通过微风返回一个包含嵌套模型的对象。让我拿典型的样本。客户和订单。我在服务器上使用 EF5。使用微风，我调用我的控制器来获取所有客户，并且还在微风查询调用中包含“.expand”属性以包含“订单”实体。json 完美返回，我正在使用“Derick Bailey”构建的“kendo.breeze.datasource”将微风实体映射到淘汰可观察对象 [使用 ko.mapping]，然后最终绑定到剑道网格。在我们想要返回嵌套类型之前，这非常有效。例如，我想将“order().Orderid”绑定到一个元素。所以，当我尝试将“数据”传递给剑道数据源以绑定到网格时，我得到一个“堆栈溢出”异常。这种情况是针对“ 如果我完全忽略“订单”，则绑定有效，但我无法访问网格中的“订单（）.Orderid”。请帮忙？如果我完全忽略“订单”，则绑定有效，但我无法访问网格中的“订单（）.Orderid”。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T21:09:02.817

您需要处理的微风数据返回 - 在传递到网格之前 - 使用 ko.mapping 到`ignore ['entityAspect', 'entityType', and 'orders']`

我遇到了一个非常相似的问题，并且从 Derick 在 kendo-labs 的“kendo.breeze.datasource”开始。我开始了[keno-breeze-knockout](https://github.com/jstott/kendo-breeze-knockout)以建立更多的东西......

完成您所追求的部分示例是：
`new kendo.data.extensions.BreezeDataSource({ entityManager: self.datacontext.manager,
endPoint: new breeze.EntityQuery.from('Products').expand('Category'),
defaultSort: "productName asc",
mapping: {
ignore: ['products'] // category.products is recursive - ignore it
}`

应该强调你的追求的来源是：

``` function querySucceeded(xhr) { payload.data = self.mapping.mapToJS(xhr.results);

```
 if (self.inlineCount) {
      payload.total = xhr.inlineCount;
    }
    options.success(payload); // notify the DataSource that the operation is complete
     return true;
  } 
```

```

`function mapToJS(items) {
baseIgnore: ['entityType', 'entityAspect'],
include: [],
ignore: [], // set your particular properties here
mapToJS : function(results) {
var koMapping = {
'include': this.include,
'ignore': this.baseIgnore.concat(this.ignore)
};
// if you override - you might not care about using ko.mapping?
if (!ko.mapping) {
throw new Error('knockout mapping plugin is required!');
}
return ko.mapping.toJS(results,koMapping);
}
}`

# jquery-ui - 编辑 cakephp 表单时，日期选择器不显示当前值

> ID：16109468
> 
> 赞同：0
> 
> 时间：2013-04-19T16:38:23.287
> 
> 标签：jquery-ui, cakephp, date, picker

我正在使用带有 cakephp 2.3 的 jquery 日期选择器。日期选择器弹出是好的。

当我想编辑任何记录时，它不会在表单中显示日期字段值。我检查了很多方法，我确信这是日期选择器问题。

日期字段的填充源代码

```
<input id="CallDateTo" class="hasDatepicker" type="text" value="2013-04-15" name="data[Call][date_to]"> 
```

在这里，我们看到该值存在于 HTML 中，但它不显示在表单中。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:48:10.037

是的，我找到了解决方案。我必须写如下

$( "#CallDateFrom, #CallDateTo" ).datepicker({ dateFormat: "yy-mm-dd"});

在此之前，我写如下并引起了问题。

$( "#CallDateFrom, #CallDateTo" ).datepicker({ changeMonth: true, changeYear: true}); $( "#CallDateFrom, #CallDateTo" ).datepicker( "option", "dateFormat", 'yy-mm-dd' );

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T08:37:30.390

使用正确的格式设置日期

```
 $('#CallDateTo').datepicker({
    dateFormat: "yy-mm-dd"
  }); 
```

演示：[Plunker](http://plnkr.co/edit/b3qe4kaoztu5fXzq4htk?p=preview)

# c++ - 使用openCV Mat c ++加载图像

> ID：16109471
> 
> 赞同：10
> 
> 时间：2013-04-19T16:38:42.973
> 
> 标签：c++, opencv, mat, loadimage

我想在 openCV 中使用 Mat 加载图像

我的代码是：

```
Mat I = imread("C:/images/apple.jpg", 0);
namedWindow( "Display window", CV_WINDOW_AUTOSIZE );// Create a window for display.
imshow( "Display window", I ); 
```

我在消息框中收到以下错误：

```
Unhandled exception at 0x70270149 in matching.exe: 0xC0000005: Access violation 
reading location 0xcccccccc. 
```

请注意，我包括：

```
#include <cv.h>
#include <cxcore.h>
#include <highgui.h>
#include <iostream>
#include <math.h> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T17:09:09.000

我之前已经[讲过](https://stackoverflow.com/a/8271889/176769)[很多次](https://stackoverflow.com/a/14506326/176769)了，我想再做一遍也没有意义，但是**代码防御性**：如果方法/函数调用可能失败，请确保您知道它何时发生：

```
Mat I = imread("C:\\images\\apple.jpg", 0);
if (I.empty())
{
    std::cout << "!!! Failed imread(): image not found" << std::endl;
    // don't let the execution continue, else imshow() will crash.
}

namedWindow( "Display window", CV_WINDOW_AUTOSIZE );// Create a window for display.
imshow( "Display window", I ); 
waitKey(0); 
```

请注意，Windows 的路径使用反斜杠而不是*nix 系统上使用`\`的标准。`/`传递文件名时需要转义反斜杠：`C:\\images\\apple.jpg`

[`waitKey()`如果您使用 ，则必须调用`imshow()`。](https://stackoverflow.com/a/16090881/176769)

**编辑**：

如果`cv::imread()`是抛出异常**，我知道唯一可行的解​​决方案是下载 OpenCV 源代码并将其构建**在机器上，因为重新安装 OpenCV 并不能解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:42:55.623

你有没有在imread之后检查我是否存在？也许文件读取失败

读取文件后`if ( I.empty() )`检查它是否失败

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T16:43:09.710

我不知道你为什么没有包含问题，因为通常它是 .hpp 文件，所以你应该这样做

```
#include <opencv2/highgui/highgui.hpp>
#include <opencv2\core\eigen.hpp> 
```

但是您的代码看起来不错，但是`cv::waitKey(0);`在您的 imshow 之后添加了一个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T09:44:30.370

您是否使用 Visual Studio 2010 运行 OpenCV 代码？如果是这样，请尝试在 Release 模式下编译。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-16T05:57:40.973

正如@karlphillip 所指出的那样，无论听起来多么微不足道，但这条语句“您需要在传递文件名时转义反斜杠：C:\images\apple.jpg”非常重要。

# bash - 使用 awk 在字符串中搜索并将结果作为变量返回

> ID：16109472
> 
> 赞同：0
> 
> 时间：2013-04-19T16:38:46.517
> 
> 标签：bash, shell, awk

我现在拥有的代码

```
line=$(ps -A|awk '/$name/{print $1}') 
```

似乎不起作用。我想要的是使用 awk 按进程名称搜索 ps 的输出并在我的脚本中返回 pid

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T16:53:23.220

```
line=$(ps -A|awk -v name="$name" '$0 ~ name{print $1}') 
```

有关在 awk 脚本中访问 shell 变量值的正确方法，请参见[此处。](http://cfajohnson.com/shell/cus-faq-2.html#Q24)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:43:34.273

```
line=$(ps -A|awk '/'$name'/{print $1}') 
```

您缺少额外的`'`报价`$name`

# regex - 正则表达式，tcl

> ID：16109475
> 
> 赞同：2
> 
> 时间：2013-04-19T16:38:49.057
> 
> 标签：regex, tcl

我正在尝试从跟踪文件中提取特定行，如下所示：

```
- 0.118224 0 7 ack 40 ------- 1 2.0 7.0 0 2
r 0.118436 1 2 tcp 40 ------- 2 7.1 2.1 0 1
+ 0.118436 1 2 ack 40 ------- 2 3.1 2.1 0 3
- 0.118436 1 2 ack 40 ------- 2 4.1 2.1 0 3
r 0.120256 0 7 ack 40 ------- 1 2.0 7.0 0 2 
```

我想提取任何具有以下内容的行：

`r x.xxxxx 1 2 xxx xx ------- x numbers.x 2.x x x`.

注意：`x`表示任何值，`numbers`可以在 3 到 7 之间。

这是我的尝试-它不起作用！：

```
if {[regexp \r+ ([0-9.]+) 1 2.*-  ([3-7.]+) 2.*- ([0-9.]+) $line -> time]} 
```

有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:39:56.107

你必须`.`用`\`. 它在正则表达式中表示“任何字符”。

所以你的正则表达式可能看起来像：

```
if {[regexp {r \d\.\d{5} 1 2 \d{3} \d{2} ------- \d [3-7]\.\d 2\.\d \d \d} $line -> time ]} {
   # ...
} 
```

现在你必须在`()`你想要的部分周围放置。

顺便说一句：我对您要匹配的内容的描述使用了以下转换：

```
set input {r x.xxxxx 1 2 xxx xx ------- x numbers.x 2.x x x}
set re [subst [regsub -all {x{2,}} $data {\\\\d{[string length \0]}}]]
set re [string map {. {\.} x {\d} numbers {[3-7]}} $re] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:38:58.227

这是另一种方法：提取要用于比较的字段

```
while {[gets $f line] != -1} {
    lassign [split $line] a - b c - - - - d e - -
    if {
            $a eq "r"  && 
            $b == 1    && 
            $c == 2    && 
            3 <= floor($d) && floor($d) <= 7  && 
            floor($e) == 2
    } {
        puts $line
    }
} 
```

# java - 无法在 Eclipse Juno 上启动 Glassfish 3.1.2.2

> ID：16109476
> 
> 赞同：1
> 
> 时间：2013-04-19T16:38:54.107
> 
> 标签：java, eclipse, deployment, glassfish

我更新到 Eclipse Juno，从那时起，我似乎无法启动或调试 Glassfish，而我之前可以完美地做到这一点。启动服务器时，我得到这个控制台输出......

```
INFO: Running GlassFish Version: GlassFish Server Open Source Edition 3.1.2.2 (build 5)
INFO: Registered org.glassfish.ha.store.adapter.cache.ShoalBackingStoreProxy for persistence-type = replicated in BackingStoreFactoryRegistry
INFO: Grizzly Framework 1.9.50 started in: 1978ms - bound to [0.0.0.0:7676]
INFO: Grizzly Framework 1.9.50 started in: 2031ms - bound to [0.0.0.0:3700]
INFO: Grizzly Framework 1.9.50 started in: 2165ms - bound to [0.0.0.0:8080]
INFO: Grizzly Framework 1.9.50 started in: 2071ms - bound to [0.0.0.0:4848]
INFO: Grizzly Framework 1.9.50 started in: 2077ms - bound to [0.0.0.0:8181]
INFO: SEC1002: Security Manager is OFF.
SEVERE: Exception while deploying the app [LuxorAutorizacionesBackEnd] 
```

我无法在 Eclipse 上进行部署，但是当我将项目导出到 WAR 文件并将其放在 glassfish 服务器的 autodeploy 文件夹中，并在命令提示符下启动它时，它启动得非常好。

我在 Windows 7 x64 上，使用 Glassfish OpenSource 3.1.2.2 和 Eclipse Juno

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T09:35:06.157

您必须将 jreX.X 更改为适当的 jdkX.X（其中 XX 是一些版本的 jre 或 jdk）。我在网上发现 glassfish 现在需要 jdk 之类的默认环境。

您必须在 Eclipse 中进入寡妇>已安装的 JRE，然后单击添加按钮来设置 jdk 而不是 jre。在此之后，您必须进入项目属性并单击 java 构建路径结束标记 glassfish 系统库。这是新版本 glassFish 的消息。

# ios - 是否可以将字体作为应用内购买？

> ID：16109480
> 
> 赞同：0
> 
> 时间：2013-04-19T16:39:04.673
> 
> 标签：ios, in-app-purchase

是否可以在应用程序购买中使用不同的字体？

我不确定这是否可行，因为 Info.plist 必须包含不同的字体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:44:18.740

您可以使用应用内购买销售四种受支持的产品：

1.  内容包括数字书籍、杂志、照片、艺术品、游戏关卡、游戏角色和其他可以在您的应用程序中交付的数字内容。

2.  功能产品解锁或扩展您已经在应用程序中提供的功能。例如，您可以发布一个包含多个用户可以购买的较小游戏的游戏。

3.  服务允许您的应用程序向用户收取一次性服务费用，例如语音转录。每次使用该服务都是单独购买。

4.  订阅提供对内容或服务的扩展访问。例如，您的应用程序可能会提供每月对财务信息或在线游戏门户的访问。

字体属于第 1 类。

**另请参阅**
[应用内购买概述](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/APIOverview/OverviewoftheStoreKitAPI.html#//apple_ref/doc/uid/TP40008267-CH100-SW1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:44:18.680

是的，这应该是可能的。

> 我不确定这是否可能，因为 Info.plist 必须包含不同的字体。

因此，您只需确保您想要在 Info.plist 中正确购买的字体。

# c# - 选中的列表框项目检查事件奇怪的行为

> ID：16109481
> 
> 赞同：4
> 
> 时间：2013-04-19T16:39:10.290
> 
> 标签：c#, checkedlistbox

```
private void checkedListBox1_ItemCheck(object sender, ItemCheckEventArgs e)
{
    if (checkedListBox1.GetItemChecked(i) == false) 
    {
        ...
    }
    else
    {
        ...
    }
} 
```

由于某种原因，当上面的代码执行时，它的作用与我想要的相反。当一个项目第一次被选中时，它什么都不做，然而，当它被取消选中时，它会做 else 语句中的事情（同样，与它应该做的事情相反）。我在这里忘记了一些财产吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T16:44:40.563

您应该使用`e.NewValue`而不是`checkedListBox1.GetItemChecked(i)`. 原因`checkedListBox1.GetItemChecked`是*缓存*状态，因为`ItemCheck`事件发生**在**内部值更新之前。

这将按您的预期工作：

```
private void checkedListBox1_ItemCheck(object sender, ItemCheckEventArgs e)
{
    if (e.NewValue == CheckState.Checked) 
    {
        ...
    }
    else
    {
        ...
    }
} 
```

* * *

其次，至于为什么第一次单击复选框时，它没有反应：那是因为`CheckedListBox`对象**要求**在通过鼠标单击更改复选框值*之前*突出显示该项目。

为了达到*类似*的效果，设置`checkedListBox1.CheckOnClick = true`. 这将导致在单击复选框**或**列表项本身时选中复选框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:43:54.660

[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.checkedlistbox.itemcheck.aspx)指示检查状态在 ItemCheck 事件完成之前不会更新。您可能正在寻找[e.NewValue](http://msdn.microsoft.com/en-us/library/system.windows.forms.itemcheckeventargs.aspx)。

# android - 带有标签的 ActionBarSherlock

> ID：16109493
> 
> 赞同：1
> 
> 时间：2013-04-19T16:39:39.540
> 
> 标签：android, tabs, actionbarsherlock

我正在尝试使用三个选项卡实现 ActionBarSherlock，将选项卡放置在与 HomeButton 相同的行中。见下图： ![在此处输入图像描述](https://i.stack.imgur.com/nWhsV.png)

我创建了 ActionBarSherlock 并添加了三个选项卡，但它们没有出现在屏幕上。我错过了什么？

这是我的代码：

```
 //ActionBarSherlock settings
    ActionBar actionBar=getSupportActionBar();
    Resources res=getResources();
    actionBar.setDisplayUseLogoEnabled(true);
    actionBar.setLogo(res.getDrawable(R.drawable.logo));
    actionBar.setSplitBackgroundDrawable(res.getDrawable(R.drawable.separator));
    actionBar.setBackgroundDrawable(res.getDrawable(R.drawable.navbar));
    actionBar.setHomeButtonEnabled(true);
    actionBar.setDisplayHomeAsUpEnabled(true);

    //Tabs
    actionBar.addTab(actionBar.newTab().setText("apps").setIcon(R.drawable.ico_apps_normal).setTabListener(this).setTag("apps tab"),true);
    actionBar.addTab(actionBar.newTab().setIcon(R.drawable.ico_add_normal).setTabListener(this).setTag("add tab"));
    actionBar.addTab(actionBar.newTab().setIcon(R.drawable.ico_news_normal).setTabListener(this).setTag("news tab")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:10:37.413

尝试添加

```
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 
```

在开始添加标签之前。看来您还没有设置导航模式。

我还在这里回答了关于操作栏和导航选项卡的类似[问题](https://stackoverflow.com/a/15952997/2109241)

# asp.net-web-api - 返回特定格式的数据或更通用的数据？

> ID：16109498
> 
> 赞同：0
> 
> 时间：2013-04-19T16:39:47.900
> 
> 标签：asp.net-web-api

我正在使用 ASP.NET Web API，并希望使用它来向我的移动应用程序（Android、iPhone、Windows Phone）提供数据。

我想知道我应该以更一般的方式还是更以特定的方式返回数据。

我一直发现自己试图发回更具体的数据，但这可能是因为我对它在我的移动设备上的外观有所了解，但不确定这是否是一种好方法，特别是如果我曾经向公众开放我的 API .

例子

我想告诉用户多少天前将记录插入数据库。

最好在服务器上计算它是“5”并将它们发回并让它们附加“5天前”还是最好只发回日期时间并让设备解析它（这会让他们做任何事情至日期）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:50:25.813

在您的具体示例中，最好返回`DateTime`事件而不是解释的命名增量。原因：

*   时区
*   全球化

您希望将此事件作为基于 UTC 的时间戳存储在数据库中，并让客户端计算差异，以便他们可以显示准确的措辞。除非您将所有全球​​化字符串集中存储在数据库中，否则将其也放在客户端更有意义。

# c++ - 专业模板 - 目的

> ID：16109499
> 
> 赞同：4
> 
> 时间：2013-04-19T16:39:47.680
> 
> 标签：c++

我知道 c++ 中的模板是做什么的，但是今天我看到了一些奇怪的代码：

```
template <> void swap(foo &a, foo &b)
{
   a.name = b.name;
   a.id = 1;
   // blah blah blah
} 
```

我做了一些研究，发现它被称为专用模板或类似的东西。

如果在上面的代码中删除`template <>`部分，我会得到完全相同的结果。也没有像通常的模板函数那样的通用类型......

我的问题是 - 使用它们的目的是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:12:40.563

`template <>`从该函数中删除将导致以下更改：

1.  它不会是*模板专业化*。
2.  它*不会*从代码中调用`swap<foo>( a, b )`
3.  它*可能*`swap( a, b )`是when`a`和/或`b`are*可转换*为的类型的最佳匹配`foo`。

# c++ - 在运行时检测字节序有什么好处？

> ID：16109501
> 
> 赞同：3
> 
> 时间：2013-04-19T16:39:51.980
> 
> 标签：c++, endianness

我已经搜索了宏以确定机器上的字节顺序，但没有找到任何标准的预处理器宏，但有很多解决方案在运行时这样做。**为什么我应该在运行时检测字节序？**

如果我这样做：

```
#ifdef LITTLE_ENDIAN
  inline int swap(int& x) {
    // do swap anyhow
    return swapped;
  }
#elif BIG_ENDIAN
  inline int& swap(int& x) { return x; }
#else
  #error "some blabla"
#endif

int main() {
  int x = 0x1234;
  int y = swap(x);

  return 0;
} 
```

编译器只会生成一个函数。

但如果我这样做（见[predef.endian](http://sourceforge.net/p/predef/wiki/Endianness/)）：

```
enum {
  ENDIAN_UNKNOWN,
  ENDIAN_BIG,
  ENDIAN_LITTLE,
  ENDIAN_BIG_WORD,   /* Middle-endian, Honeywell 316 style */
  ENDIAN_LITTLE_WORD /* Middle-endian, PDP-11 style */
};

int endianness(void)
{
  uint8_t buffer[4];

  buffer[0] = 0x00;
  buffer[1] = 0x01;
  buffer[2] = 0x02;
  buffer[3] = 0x03;

  switch (*((uint32_t *)buffer)) {
  case 0x00010203: return ENDIAN_BIG;
  case 0x03020100: return ENDIAN_LITTLE;
  case 0x02030001: return ENDIAN_BIG_WORD;
  case 0x01000302: return ENDIAN_LITTLE_WORD;
  default:         return ENDIAN_UNKNOWN;
}

int swap(int& x) {
  switch(endianess()) {
    case ENDIAN_BIG:
      return x;
    break;
    case LITTLE_ENDIAN:
      // do swap
      return swapped;
    break;
    default:
      // error blabla
  }
  // do swap anyhow
} 
```

编译器生成检测代码。

我不明白，我为什么要这样做？

如果我有为小端机器编译的代码，则为小端机器生成整个代码，并且如果我尝试在大端机器上运行此类代码（在像 arm [wiki:bi-endian](http://en.wikipedia.org/wiki/Endianness#Bi-endian_hardware)这样的双端机器上) 整个代码是为 little-endian 机器编译的。所以所有其他例如 int 的声明也是 le。

```
// compiled on little endian
uint32_t 0x1234;  // 0x1234 constant literal
// should result 34120000 on BE 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T17:25:51.630

实际上，有些系统 SOFTWARE 可以设置系统是（当前运行在）小端模式还是大端模式。大多数系统仅支持在特殊情况下进行切换，而不是（幸运的是对于系统程序员等）任意来回切换。但是可以想象支持一个可执行文件定义该特定可执行文件是在 LE 模式下运行还是在 BE 模式下运行。在这种情况下，您不能依赖于挑选出它是什么操作系统和处理器型号......

另一方面，如果硬件只支持一个字节序（例如不同形式的x86），那么我认为不需要在运行时检查。你知道它是小端，就是这样。让系统包含代码来检查它是哪种字节序，并携带从大字节序转换为小字节序的转换方法是浪费的（在性能和代码大小方面）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T17:32:22.303

在编译时进行强大的字节序检测不一定是可能的。在某些平台上，即使在同一二进制文件的运行之间，字节序也可能发生变化。

[http://gcc.gnu.org/ml/gcc-help/2007-07/msg00343.html](http://gcc.gnu.org/ml/gcc-help/2007-07/msg00343.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T16:48:18.387

我认为在运行时检测字节序的唯一好处是您不必乱用宏。正如您自己注意到的那样，没有标准宏说明您正在编译代码的机器的字节序是什么，因此您必须自己定义一些内容并将其传递给编译器，或者根据其他指示架构的标志有条件地定义它/操作系统，例如：

```
#ifdef _this_system_
#define LITTLE_ENDIAN
#endif
#ifdef _that_system_
#define BIG_ENDIAN
#endif 
```

但是对于每一种可能的架构都重复了很多次，这很混乱且容易出错。在运行时检查它更容易、更安全。我知道，这看起来很傻，但它确实更实用。

# c# - 如何在我的 C# 浏览器中单击非 ID Java 按钮？

> ID：16109503
> 
> 赞同：2
> 
> 时间：2013-04-19T16:39:53.997
> 
> 标签：c#, button, click, browser, watin

我有 ac# 程序，它有一个网络浏览器我的程序处理 java 页面我希望它单击页面中的按钮，但该按钮没有 ID 或值，我得到的只是这段代码：

```
 td class="submit">
  <br>
   <button class="fixedSizeBigButton" type="submit">
   </td> 
```

请问有什么方法可以点击那个按钮

对于 [http://watin.sourceforge.net/](http://watin.sourceforge.net/) 我需要一个代码

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T03:31:31.733

你的按钮有一个类名，你可以使用类名找到你的按钮，见这个例子：

```
private void Form1_Load(object sender, EventArgs e)
    {
        webBrowser1.DocumentText = "<td class=\"submit\"><br><button   class=\"fixedSizeBigButton\" type=\"submit\"></td>";
        webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);
    }

    void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        foreach (HtmlElement btn in webBrowser1.Document.GetElementsByTagName("button"))
        {
            if (btn.GetAttribute("ClassName") == "fixedSizeBigButton")
            {
                btn.InvokeMember("Click");
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:57:13.907

当我环顾四周时， 我发现[了这个链接。](http://www.caffeinatedcoder.com/watin-and-the-iedevtoolbar-the-dynamic-duo-of-automated-web-testing/)

更多地环顾四周让我相信你需要更多地研究整个`Find`班级本身。我知道还有其他方法可以定位元素。

我正在尝试找到可以让我构建一些代码的文档，因为我以前从未真正使用过它:-) 如果/当我得到更多东西时，我会更新。

**更新**

看起来你不是唯一一个有类似问题的人。您显然可以链接查找方法。 [WatiN - Find HTML Table](https://stackoverflow.com/questions/6638524/watin-find-html-table) 如果您对按钮的确切位置有更多了解，这似乎很有用。`Find.ByClass`与其他东西一起使用，尝试唯一地定义按钮。

# c++ - 关闭消息框后焦点不返回 CView

> ID：16109507
> 
> 赞同：2
> 
> 时间：2013-04-19T16:40:05.673
> 
> 标签：c++, mfc, modal-dialog, focus, messagebox

在派生的 CView 类的方法中，我调用了 CWnd 的 MessageBox 方法。这是一个停靠视图，而不是 MDI 子视图。从 MessageBox 返回后，焦点转到 Active MDI 子项，而不是返回到停靠视图。

认为这是 MFC 行为“异常”，我尝试更改代码以使用 Win32 ::MessageBox 并将视图的 GetSafeHwnd() 传递给父 HWND 参数，并且视图仍然没有关注消散 MessageBox ，但 Active MDI 子项获得焦点，就像 MFC 调用一样。

此外，我从视图中看到了基于 CDialog 的窗口的类似行为，而不仅仅是 MessageBox 的。

我通过在从 MessageBox 返回后调用 SetFocus() 进行了解决，并且有效。但是，**我不想以编程方式始终将焦点重新设置给我**（在某些情况下，视图或其子项在对话框/消息框之前没有焦点，所以我实际上需要在对话框/消息框，然后只有在我有焦点时才恢复焦点，在调用 DoModal/MessageBox 之后）。

这是一个 MDI Windows 行为错误吗？这不是错误，而是 MDI 应用程序的“所需功能”吗？难道我做错了什么？有人有什么想法或意见吗？

# javascript - 从循环内的 javascript 数组中删除元素

> ID：16109514
> 
> 赞同：3
> 
> 时间：2013-04-19T16:40:22.137
> 
> 标签：javascript

我有以下代码遍历 JS 数组。当我到达特定元素时，我想将其删除。我意识到我可以使用拼接，但有没有一种方法不涉及我跟踪索引：

```
 myArray.forEach(function (point) {
        canvasContext.clearRect(point.PointX - 3, point.PointY - 3, 6, 6);
        point.PointY++;
        canvasContext.fillRect(point.PointX - 3, point.PointY - 3, 6, 6);

        if (point.PointY > canvas.height) {
            // Remove point

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:51:36.227

Modifying the array in-place can be tricky, so perhaps [`Array.filter()`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Array/filter) is a better function to use:

```
myArray = myArray.filter(function (point) {
    canvasContext.clearRect(point.PointX - 3, point.PointY - 3, 6, 6);
    point.PointY++;
    canvasContext.fillRect(point.PointX - 3, point.PointY - 3, 6, 6);

    if (point.PointY > canvas.height) {
        return false;
    }
    return true;
}); 
```

It returns an array with all elements for which the callback returned `true`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:41:58.517

使用第二个参数`forEach`,`index`和`Array.splice`:

```
myArray.forEach(function (point, index) {
    canvasContext.clearRect(point.PointX - 3, point.PointY - 3, 6, 6);
    point.PointY++;
    canvasContext.fillRect(point.PointX - 3, point.PointY - 3, 6, 6);

    if (point.PointY > canvas.height) {
        myArray.splice(index, 1);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:50:08.100

循环经常会出现一个问题，它会改变被循环的数组的长度。他们最终会“跳过”一个项目。

当您要影响数组的长度以倒计时而不是向上倒计时时，这是典型的，使用如下循环：

```
for (var i = Things.length - 1; i >= 0; i--) {
  //your code here
}; 
```

# java - 代码在模拟器上工作但不在真实设备上

> ID：16109515
> 
> 赞同：1
> 
> 时间：2013-04-19T16:40:24.370
> 
> 标签：java, android, android-intent, android-emulator

我将我的应用程序定位为使用 API 11 或更高版本。在活动 A 中，我使用以下代码行来捕获剪贴板中的文本并将其发送到活动 B（这是上一个活动）。

`onCreate`：

```
wvContent = (WebView) findViewById(R.id.wvContent);
LinearLayout ll= (LinearLayout)findViewById(R.id.layout_view);  
    webkit=new Webkit(this);
    wvContent.addView(webkit, 0,0);    
    WebviewSelectedText webkitSelectedText=new WebviewSelectedText(getApplicationContext(), webkit);
    webkitSelectedText.init();      
    ll.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {               
            finish(); 
        }           
    }); 
```

以及复制的文本以触发活动 B（使用剪贴板中的文本返回上一个活动）：

```
public class WebviewSelectedText
{
    private Context context;
    Webkit webkit;
    private final String have_word="have_word";     

    public WebviewSelectedText(Context context,Webkit webkit) 
    {
        this.context=context;
        this.webkit=webkit;
    }

    @SuppressWarnings("deprecation")
    public void init()      
    {
        final ClipboardManager clipboardManager = (ClipboardManager) context.getSystemService(Context.CLIPBOARD_SERVICE);
        clipboardManager.setText(null);
        setOnSelectTextListener(clipboardManager, webkit);
    }

    private void setOnSelectTextListener(@SuppressWarnings("deprecation") final ClipboardManager clipboardManager, final Webkit webkit) {
        webkit.setOnSelectTextListener(new OnSelectTextListener() {
            @SuppressWarnings("deprecation")
            public void onSelectText() {
                String text = clipboardManager.getText().toString();
                text = text.toLowerCase();
                //Remove all non-word elements starting and/or ending a string 
                String strippedInput = text.replaceAll("^\\W+|\\W+$", "");
                System.out.println("Stripped string: " + strippedInput);
                //receivedText = txtView.getText().toString().toLowerCase();
                if(strippedInput!=null) 
                {
                    Intent intent=new Intent(context,ActivityB);
                    intent.putExtra(have_word, strippedInput);
                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP|Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);
                    ActivityA.this.startActivity(intent);
                } 
            }
        });

    } 
```

在模拟器上一切都很好，即复制文本，然后使用剪贴板中的文本调用活动 B。

但是，在我的真实设备（HTC 和平板电脑）上，带有复制文本的活动 B 不会自动启动，直到触摸软按钮（任何按钮：返回、菜单......）。

仅供参考，这是我的布局：

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"   
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"  >
<LinearLayout
    android:id="@+id/layout_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scrollbars="vertical"
    android:layout_weight="1">

    <WebView  
        android:id="@+id/wvContent"
        android:layout_width="0dip" 
        android:layout_height="fill_parent"
        android:layout_gravity="top" 
        android:layout_weight="1"  
    />

</LinearLayout>
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:orientation="horizontal"
>
    <ImageButton
        android:id="@+id/btnHome"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:src="@drawable/home"
        android:layout_weight="0.25"
    />
    <ImageButton
        android:id="@+id/btnPronounce"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:src="@drawable/pronounce"
        android:layout_weight="0.25" 
    />

    <ImageButton
        android:id="@+id/btnShowHistory"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:src="@drawable/history"
        android:layout_weight="0.25"
    /> 
    <ImageButton
        android:id="@+id/btnAddFavourite"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:src="@drawable/add_favourite"
        android:layout_weight="0.25" 
    />
</LinearLayout> 
```

我想知道您是否可以查看我的代码并告诉我问题所在。非常感谢。

# vb.net - 打开表单设计器时 VS 2010 停止响应

> ID：16109516
> 
> 赞同：1
> 
> 时间：2013-04-19T16:40:27.527
> 
> 标签：vb.net

我有许多表单的 VisualBasic 项目，其中一个是 form1。每当调用 initializecimponent 方法时，VS 停止响应，我必须使用 taskmgr 结束它。错误在 form1.designer.vb 内，因为我能够在设计器中查看和编辑其他表单和用户控件。另一个奇怪的事情是独立的 exe 在 IDE 之外成功运行。我还尝试将表单添加到另一个项目并且该项目也崩溃了。每当我在设计器中构建/调试/查看 form1 ，我一个接一个地得到两个对话框：VS2010已停止工作，VS2010正在重新启动（但它永远不会！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:04:05.710

创建表单的副本，然后开始删除表单的某些部分，直到它起作用为止。您删除的最后一件事是失败的。您必须通过删除每个控件的三个部分来手动执行此操作：

*   宣言（底部）
*   实例化（在顶部）
*   配置（中间）。下面是一个配置示例

* * *

```
 '
  'LeftLabel
  '
  Me.LeftLabel.Anchor = System.Windows.Forms.AnchorStyles.Left
  Me.LeftLabel.AutoSize = True
  Me.LeftLabel.Location = New System.Drawing.Point(3, 3)
  Me.LeftLabel.Name = "LeftLabel"
  Me.LeftLabel.Size = New System.Drawing.Size(39, 13)
  Me.LeftLabel.TabIndex = 1
  Me.LeftLabel.Text = "Label2" 
```

您还需要删除对该控件的任何引用，例如将其添加到容器中。

一次执行一个控件，然后构建项目并打开表单。如果表单未打开，请重新启动 Visual Studio 并执行下一个控件。如果它确实打开了，那么您删除的最后一件事就是罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T07:59:42.837

对于面临同样问题的程序员，这里是解决方案：确保您的用户控件不会在自己内部创建自己的实例。即使您的程序可能运行时没有任何错误，VS 设计器也会崩溃。这是此类示例代码：

```
Public class controlx
   public sub new()
      dim x as new controlx
   End sub
End class 
```

你可能认为这是一个愚蠢的逻辑错误，但这样的错误可能非常令人沮丧和耗时。总是将你的代码分解为更小的单元，以便如 Brian 所说的那样易于管理。

# java - Java ArrayList 中的 contains() 方法是否使用二进制搜索？

> ID：16109517
> 
> 赞同：4
> 
> 时间：2013-04-19T16:40:31.637
> 
> 标签：java, arraylist, contains, binary-search

Java ArrayList 中的 contains() 方法是否使用二进制搜索？还是我需要使用 Collections 来代替？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T16:41:46.203

不，您需要`Collections`使用二进制搜索，通常在排序之后。An`ArrayList`对其排序一无所知，并且您必须知道列表已排序，然后才能使用二进制搜索。

或者，您可以使用`TreeSet`，这与使用二进制搜索一样有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:42:01.050

不，它不使用二进制搜索，因为列表不必排序。

使用 Collections 类的实用方法首先对列表进行排序，然后执行二进制搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T16:42:11.910

不，这意味着在每次插入时都会增加开销，因此不包括在内。

这是源代码：它只是测试所有值：

```
218     public boolean contains(Object o) {
219         return indexOf(o) >= 0;
220     }

229     public int indexOf(Object o) {
230         if (o == null) {
231             for (int i = 0; i < size; i++)
232                 if (elementData[i]==null)
233                     return i;
234         } else {
235             for (int i = 0; i < size; i++)
236                 if (o.equals(elementData[i]))
237                     return i;
238         }
239         return -1;
240     } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-19T16:43:13.870

不，您需要使用 Collections 才能使用二进制搜索，通常是在对其进行排序之后。

# php - sql查询where子句中的多个条件

> ID：16109523
> 
> 赞同：0
> 
> 时间：2013-04-19T16:41:03.437
> 
> 标签：php, sql

我试图在单个 where 子句上为多个条件设置回显...如果找到此值回显某些内容...如果找到另一个值回显某些内容...我的代码当前一直回显表中的所有数据它只应该根据特定字段中存储的值来回显一组特定的数据......

```
<?php
$query = mysql_query("SELECT *
    FROM   tblfoodoptions JOIN tblhealthconditionfoods 
        ON tblfoodoptions.FoodID = tblhealthconditionfoods.FoodID, tblhealthcondition                                
    WHERE  tblhealthconditionfoods.HealthconditionID = tblHealthcondition.HealthconditionID 
    AND tblhealthcondition.Healthcondition IN ( 'Diabetes Type1' OR 'Diabetes Type2' OR 'General Health' OR 'Pregnant' OR 'Anemia' OR 'High Cholesterol')");

{
    echo "<table width='100%' border='4'>
            <caption>Your Food Options</caption>
            <thead>
                <tr>
                    <th>FoodName</th>
                    <th>Serving_Size</th>
                    <th>Calories</th>
                    <th>Cholestrol</th>
                    <th>Sodium</th>
                    <th>Protein</th>
                    <th>Total_Carbohydrates</th>
                    <th>Total_Fat</th>
                </tr>
            </thead>
        <tbody>";

        while($row = mysql_fetch_array($query))
        {
            echo "<tr>";
            echo "<td>".$row['FoodName']."</td>";
            echo "<td>".$row['Serving_Size']."</td>";
            echo "<td>".$row['Calories']."</td>";
            echo "<td>".$row['Cholesterol']."</td>";
            echo "<td>".$row['Sodium']."</td>";
            echo "<td>".$row['Protein']."</td>";
            echo "<td>".$row['Total_Carbohydrates']."</td>";
            echo "<td>".$row['Total_Fat']."</td>";
            echo "</tr>";
        }
        echo "</tbody></table>";
    }       
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:44:19.340

```
IN ( 'Diabetes Type1' OR 'Diabetes Type2' OR 'General Health' OR 'Pregnant' OR 'Anemia' OR 'High Cholesterol') 
```

这部分应该是

```
IN ( 'Diabetes Type1', 'Diabetes Type2', 'General Health', 'Pregnant', 'Anemia', 'High Cholesterol'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:43:54.463

你的`IN`条款不正确。您没有`OR`将这些值放在一起，您只需列出它们：

```
... something IN (1,2,3,4,5) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T17:01:27.113

IN 条件中的值与许多值除以 OR 表达式相同

所以

```
where field = 10 OR field = 20 OR field = 30 
where field IN (10,20,30) 
```

这两条线都相似

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-17T17:52:03.030

首先，我只需要指出您的数据库设置对于查询结果（选择）的方式并不理想。您正在使用关系数据库...使用关系。我并不是建议您不要在表上使用联接，但您可以通过使用 1:many 关系以将数据放置在相关位置的方式重新组织数据库结构。

最重要的是，您正在使用 PHP 来获取或存储数据……让程序来思考，而不是数据库。让数据库连接数据或以其他方式不必要地对表或数据进行连接会为 SQL 注入打开 2 阶（这是非常讨厌的，您看不到它的到来），但更糟糕的是您更改了存储的数据。PHP 有许多注意事项可供您以简洁和相关的方式组织数据。使用包装器将患者的数据拉入对象或数组，然后将您的食物选择或有关所述病症的其他医疗信息拉入多维数组列表

```
$foods = array(
                "Ritz Crackers" => array("serving" => "6 crackers", "calories" => 42 ...),
                "Yoplait Vanilla Yogurt" => array("serving" => "2oz", "calories" => 22, ...),
                ); 
```

该数据不是真实数据，只是说明如何利用数组列表发挥优势的示例。

一旦您的程序从数据库中提取数据，您就可以使用 OOP 甚至 PHP 中的程序编程将数据组织成可显示的报告，并根据需要编写。这使您可以自由地将数据库中的数据尽可能简化为代码，PHP 程序代码知道将什么翻译成什么。这将使您的数据库工作量大大减少，并让您可以自由地操作您想要的数据，而无需弃用、截断或以其他方式破坏或破坏数据库中的数据。

网上有很多关于 PHP、SQL 和 MySQL 的教程和手册页，只要在尽可能小的范围内准确地询问您需要做什么，您通常会找到让您前进的答案。

# svn - Cruisecontrol.net 和 Visual SVN 端口问题

> ID：16109525
> 
> 赞同：0
> 
> 时间：2013-04-19T16:41:06.320
> 
> 标签：svn, cruisecontrol.net, visualsvn-server

我似乎对 Cruisecontrol.net（1.6.7 版）有一个奇怪的问题。我的 VisualSVN 服务器端口设置为 8443，这一直工作正常。

但是 Cruisecontrol.net 无法连接到 VisualSVN 服务器实例。

以下来自我的 ccnet.config 的源代码控制摘录是失败的：

```
 <sourcecontrol type="svn">
      <authCaching>Always</authCaching>     
      <executable>C:\Program Files\SlikSvn\bin\svn.exe</executable>
      <trunkUrl>https://svn.aaaa.org:8443/svn/wim-web/Year%20Round%20Site/Trunk</trunkUrl>
      <autoGetSource>true</autoGetSource>
      <username>rrrrr</username>
      <password>xxxxx</password>
      <workingDirectory>D:\CCNET\Builds\Web\YearRoundSite</workingDirectory>
 </sourcecontrol> 
```

我得到的错误消息是指 没有指定端口的[https://svn.aaaa.org (8443)。](https://svn.aaaa.org)如果没有指定端口，这将转到一个网站而不是 SVN 存储库，因此无法连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T19:16:31.650

转到 CC.NET 机器。以运行 CC.NET SERVICE 的同一帐户（身份）登录。(<

在命令行............运行 svn.exe list 命令

```
svn list https://svn.aaaa.org:8443/svn/wim-web/Year%20Round%20Site/Trunk 
```

（当然，您必须找到 svn.exe 的完整路径）

（或类似的东西）

查看是否提示您接受证书。如果是，请选择 (p) 为永久。

现在重试。

我发现你必须在 CC.NET-SVN 工作之前通过命令行接受证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:14:48.530

如果指定工作目录，则不必指定 TrunkURL。您首先必须手动转到您的工作目录并使用 SVN 进行初始结帐。然后巡航控制运行的 SVN 将知道如何联系该工作目录的存储库。

# sql - 我有一个包含多行的 SQL 表，我希望将其放入包含多列的一行

> ID：16109528
> 
> 赞同：0
> 
> 时间：2013-04-19T16:41:17.053
> 
> 标签：sql, sql-server, pivot

我有一个 SQL 表，其中包含用户的多行数据。我想查询该数据并为每个用户返回一行。所以我想取多行并将它们组合成一行多列。这可能吗？

**这是我目前拥有的**

```
UserID   Value
8111     396285
8111     812045789854
8111     Secretary 
```

**这就是我所追求的**

```
UserID     Column1     Column2        Column3
8111       396285      812045789854   Secretary 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:37:04.357

您可以使用该`PIVOT`函数来获取结果。我使用该`row_number()`函数生成将转换为列的值。

如果您提前知道将有多少个值，那么您可以对查询进行硬编码：

```
select userid, Col1, Col2, Col3
from
(
  select userid, value,
    'Col'+cast(row_number() over(partition by userid 
                                  order by (select 1)) as varchar(10)) rn
  from yt
) d
pivot
(
  max(value)
  for rn in (Col1, Col2, Col3)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/6a4a4/5)。

如果您有未知数量的值，则可以使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME('Col'+cast(row_number() over(partition by userid 
                                                                                    order by (select 1)) as varchar(10))) 
                    from yt
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT userid,' + @cols + ' 
             from 
             (
                select userid, value,
                  ''Col''+cast(row_number() over(partition by userid 
                                                order by (select 1)) as varchar(10)) rn
                from yt
            ) x
            pivot 
            (
                max(value)
                for rn in (' + @cols + ')
            ) p '

execute(@query); 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/6a4a4/9)。两者都给出结果：

```
| USERID |   COL1 |         COL2 |      COL3 |
----------------------------------------------
|   8111 | 396285 | 812045789854 | Secretary | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:16:55.653

如果您不能或不想使用 PIVOT/UNPIVOT，则另一种选择是将列一一加入用户：

```
DECLARE @Users TABLE(
    UserID int NOT NULL
)

INSERT INTO @Users (UserID) VALUES (1)
INSERT INTO @Users (UserID) VALUES (2)
INSERT INTO @Users (UserID) VALUES (3)

DECLARE @AnyTable TABLE(
    UserID int NOT NULL,
    FieldNo int NOT NULL,
    Value varchar(50) NULL
)

INSERT INTO @AnyTable (UserID, FieldNo, Value) VALUES (1, 1, 'abc')
INSERT INTO @AnyTable (UserID, FieldNo, Value) VALUES (1, 2, 'def')
INSERT INTO @AnyTable (UserID, FieldNo, Value) VALUES (1, 3, 'ghi')
INSERT INTO @AnyTable (UserID, FieldNo, Value) VALUES (2, 1, '123')
INSERT INTO @AnyTable (UserID, FieldNo, Value) VALUES (2, 3, '789')

SELECT u.UserID,
    col1.Value as Column1,
    col2.Value as Column2,
    col3.Value as Column3
FROM @Users u
LEFT JOIN @AnyTable col1
    ON col1.UserID = u.UserID
    AND col1.FieldNo = 1
LEFT JOIN @AnyTable col2
    ON col2.UserID = u.UserID
    AND col2.FieldNo = 2
LEFT JOIN @AnyTable col3
    ON col3.UserID = u.UserID
    AND col3.FieldNo = 3 
```

结果将是：

```
UserID   Column1   Column2   Column3
 1        abc       def       ghi
 2        123       NULL      789
 3        NULL      NULL      NULL 
```

# c++ - 线程安全游戏引擎：多线程最佳实践？

> ID：16109530
> 
> 赞同：0
> 
> 时间：2013-04-19T16:41:27.720
> 
> 标签：c++, sdl

我正在编写一个多线程游戏引擎，我想知道关于等待线程的最佳实践。我突然想到那里可能有比我实施的更好的选择，所以我想知道你们的想法。

**选项 A）** “wait()”方法在类中所有其他方法的顶部被调用。这是我目前的实现，我意识到它并不理想。

```
class Texture {
public:
    Texture(const char *filename, bool async = true);
    ~Texture();

    void Render();

private:
    SDL_Thread *thread;
    const char *filename;

    void wait();
    static int load(void *data);
}

void Texture::wait() {
    if (thread != NULL) {
        SDL_WaitThread(thread, NULL);
        thread = NULL;
    }
}

int Texture::load(void *data) {
    Texture *self = static_cast<Texture *>(data);

    // Load the Image Data in the Thread Here...

    return 0;
}

Texture::Texture(const char *filename, bool async) {
    this->filename = filename;
    if (async) {
        thread = SDL_CreateThread(load, NULL, this);
    } else {
        thread = NULL;
        load(this);
    }
}

Texture::~Texture() {
    // Unload the Thread and Texture Here
}

void Texture::Render() {
    wait();

    // Render the Texture Here
} 
```

**选项 B)**将“wait()”方法转换为函数指针。这会将我的程序从所有其他方法顶部的 jmp 中保存下来，并且只需检查每个方法顶部的“线程！= NULL”。仍然不理想，但我觉得跳跃越少越好。（我也考虑过在函数上使用“inline”关键字......但是当我真正需要的是“if（thread！= NULL）”检查以确定是否其余代码是否应该执行？）

**选项 C)**将所有类的方法转换为函数指针，并放弃调用“wait()”的整个概念，除非在实际加载纹理时。我看到了这种方法的优点和缺点……也就是说，这感觉是最难实施和跟踪的。诚然，我对 GCC 的优化和组装，尤其是 memory->cpu->memory 通信的内部工作的了解并不是最好的，因此使用一堆函数指针实际上可能比正确定义的类要慢。

有人有更好的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:40:27.903

最佳实践通常不是重新发明轮子：D

如果你有一个支持 C++11 的编译器，你可能想看看[std::thread](http://en.cppreference.com/w/cpp/thread)库。您需要的一切都已经实现并尽可能安全（考虑到这个主题，这并不安全）。

特别是，您的`wait()`函数由 std::condition_variable 实现。

Boost 线程库提供了几乎相同的功能。

我不知道你正在使用的图书馆抱歉：D

# c++ - 如何将 std::string 环境块传递给 CreateProcess？

> ID：16109531
> 
> 赞同：3
> 
> 时间：2013-04-19T16:41:30.323
> 
> 标签：c++, windows, createprocess

我目前正在尝试将[CreateProcess](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms682425%28v=vs.85%29.aspx)与路径、参数和环境变量一起使用。我的变量存储在字符串中。

在下面的示例中，filePath 和 cmdArgs 工作正常，但我无法让 envVars 工作。

```
std::string filePath = "C:\\test\\DummyApp.exe";
std::string cmdArgs  = "Arg1 Arg2 Arg3";
std::string envVars  = "first=test\0second=jam\0";  // One

//LPTSTR testStr = "first=test\0second=jam\0";      // Two

CreateProcess(
   LPTSTR(filePath.c_str()),           //path and application name
   LPTSTR(cmdArgs.c_str()),            // Command line
   NULL,                               // Process handle not inheritable
   NULL,                               // Thread handle not inheritable
   TRUE,                               // Set handle inheritance
   0,                                  // Creation flags
   LPTSTR(envVars.c_str()),            // environment block
   //testStr                      //this line works
   NULL,                               // Use parent's starting directory 
   &si,                                // Pointer to STARTUPINFO structure
   &pi )                               // Pointer to PROCESS_INFORMATION structure 
```

)

当我运行此代码时，返回的错误是“错误 87：参数不正确”。

我不明白的是，如果我注释掉标记为“一”的行并将其替换为标记为“二”的行（并在函数调用中进行匹配交换），那么它可以正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T16:46:41.567

您使用的构造函数`std::string`将复制`"first=test\0second=jam\0"`到第一个`\0`（C 样式字符串）。

要传递所有字符串，请使用另一个[构造函数](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)：

```
std::string envVars("first=test\0second=jam\0", 22);
                     ^^^^^^^^^^^^^^^^^^^^^^^^   ^
                                                |
                           22 characters -------+ 
```

# haskell - 从定义的矩阵计算结果

> ID：16109533
> 
> 赞同：1
> 
> 时间：2013-04-19T16:41:38.563
> 
> 标签：haskell, matrix, increment

所以我对编程很陌生，而 Haskell 是我学习的第一门语言。我遇到的问题可能是一个非常简单的问题，但无论我搜索多少，我都找不到答案。

所以基本上我拥有的是一个 3x3 矩阵，每个元素都有一个从 1 到 3 的数字。这个矩阵是预定义的，现在我需要做的就是创建一个函数，当我输入 1、2 或 3 时告诉我如何该矩阵中有许多具有此值的元素。我一直在尝试不同的东西，但似乎都不允许，例如，我为每个可能的数字定义了 3 个变量，并尝试通过

```
value w =   
  let a=0  
      b=0  
      c=0   
      in
if matrix 1 1==1 then a=a+1 else if matrix 1 1==2 then b=b+1 
```

等等等等，每个组合和领域。

<- 忽略我真正苦苦挣扎的错误语法，我不能将“=”与“if, then”一起使用是我最大的问题。有没有办法绕过这个，或者可以使用以前定义的函数中的“存储数据”？

我希望我的问题有点清楚，正如我所说，我现在只在编程 2 天，我似乎无法找到一种方法来完成这项工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:01:07.313

默认情况下，Haskell 不使用可更新变量。相反，您通常会创建一个新值，然后将其传递到其他地方（例如，从函数中返回它，将其添加到列表中，等等）。

我将分两步解决这个问题：从矩阵中获取元素列表，然后计算每个值的元素。

```
-- get list of elements using list comprehension 
elements = [matrix i j | i <- [1..3], j <- [1..3]]

-- define counting function
count (x,y,z) (1:tail) = count (x+1,y,z) tail
count (x,y,z) (2:tail) = count (x,y+1,z) tail
count (x,y,z) (3:tail) = count (x,y,z+1) tail
count scores [] = scores

-- use counting function
(a,b,c) = count (0,0,0) elements 
```

有更好的累积分数的方法，但这似乎最接近您的问题。

* * *

根据下面的评论，一个更惯用的计数方法的示例，使用`foldl`和累积函数`addscore`而不是`count`上面的函数：

```
-- define accumulation function
addscore (x,y,z) 1 = (x+1,y,z)
addscore (x,y,z) 2 = (x,y+1,z)
addscore (x,y,z) 3 = (x,y,z+1)

-- use accumulation function
(a,b,c) = foldl addscore (0,0,0) elements 
```

# hadoop - Hadoop：从jobconf强制每个节点执行1个映射器任务

> ID：16109534
> 
> 赞同：0
> 
> 时间：2013-04-19T16:41:40.517
> 
> 标签：hadoop

我想在我的 Hadoop 集群上为每个节点运行一个任务（映射器），但我无法修改运行 tasktracker 的配置（我只是一个用户）。
因此，我需要能够通过作业配置推送选项。我尝试在 hadoop jar 命令中设置 mapred.tasktracker.map.tasks.maximum=1，但 tasktracker 忽略它，因为它在其配置文件中有不同的设置。
顺便说一下，集群使用了容量调度器。

有什么办法可以强制每个节点执行 1 个任务？

编辑：为什么？我有一个内存绑定任务，所以我希望每个任务都使用节点可用的所有内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:44:54.203

当您通过配置文件或其他方式设置映射器的数量时，这只是对框架的提示。它不能保证您只会获得指定的映射器数量。映射器的创建实际上是由拆分的数量决定的。并且拆分创建由您的 InputFormat 持有的逻辑执行。如果您真的希望只有一个映射器来处理整个文件，请在您使用的 InputFormat 类中将“issplittable”设置为 true。但是你为什么要这样做呢？hadoop 的强大之处实际上在于分布式并行处理。

# php - 通过 PHP 访问 PostgreSQL 数据库中的特定模式

> ID：16109539
> 
> 赞同：0
> 
> 时间：2013-04-19T16:41:53.830
> 
> 标签：php, database, postgresql

我有一个`userdb`包含 5 个模式的 PostgreSQL 数据库。

```
Schema 1- Persons
Schema 2- Project
Schema 3- Shop
Schema 4- Test 
```

我能够使用`pg_connect`. 如何访问该数据库中的特定模式？

当数据库中只有一个模式时，我能够连接到模式。但是现在由于我有多个模式，我很难访问任何特定的模式。

```
 <?php
 // attempt a connection
 $dbh = pg_connect("host=**.****.*******.*** dbname=test user=merlin port=5433 password=passw123");
 if (!$dbh) {
     die("Error in connection test: " . pg_last_error());
 } 
// execute query
 $sql = "SELECT * FROM test.country";
 $result = pg_query($dbh, $sql);
 if (!$result) {
     die("Error in SQL query: " . pg_last_error());
 }       

 // iterate over result set
 // print each row
 while ($row = pg_fetch_array($result)) {
     echo "Country code: " . $row[0] . "<br />";
     echo "Country name: " . $row[1] . "<p />";
 }       

 // free memory
 pg_free_result($result);       

 // close connection
 pg_close($dbh);      
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T17:22:22.640

使用模式名称限定表

```
select *
from my_schema.aircraft 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T19:03:24.107

Schema-qualify the table name as [Clodoaldo already advised](https://stackoverflow.com/a/16110205/939860). Or set the **[`search_path`](https://www.postgresql.org/docs/current/ddl-schemas.html#DDL-SCHEMAS-PATH)** for a permanent effect. It works much like a search path in the file system.

*How* permanent depends on how you set it. See:

*   [How does the search_path influence identifier resolution and the "current schema"](https://stackoverflow.com/questions/9067335/how-to-create-table-inside-specific-schema-by-default-in-postgres/9067777#9067777)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-30T18:36:51.120

使用：
SET search_path TO myschema；或者

将搜索路径设置为 myschema，myschemab；

[https://www.postgresql.org/docs/9.4/static/ddl-schemas.html](https://www.postgresql.org/docs/9.4/static/ddl-schemas.html)

# ember.js - IndexRoute 中的 Controller.set

> ID：16109540
> 
> 赞同：0
> 
> 时间：2013-04-19T16:41:55.357
> 
> 标签：ember.js

我有以下js代码：

```
App = Ember.Application.create({
    LOG_TRANSITIONS: true
});

App.Router.map(function() {
    this.resource('posts');
    this.resource('about');
});

App.IndexRoute = Ember.Route.extend({
     setupController: function(controller) {
         controller.set('title', "test");
     }
});

App.PostsRoute = Ember.Route.extend({
    setupController: function(controller) {
        controller.set('title', 'test');
    }
}); 
```

以及以下html页面：

```
<script type="text/x-handlebars">
    <div class="container">
        <div class="navbar">
            <div class="navbar-inner">
                <ul class="nav">
                    <li>{{#linkTo index}}Home{{/linkTo}}</li>
                    <li>{{#linkTo posts}}Posts{{/linkTo}}</li>
                    <li>{{#linkTo about}}About{{/linkTo}}</li>
                </ul>
            </div>
        </div>
        {{title}} // <--- no title here
        {{outlet}}
    </div>
</script>

<script type="text/x-handlebars" id="about">
    About template
</script>

<script type="text/x-handlebars" id="posts">
    <h1>{{title}}</h1> // <--- works here
    Recent posts
</script> 
```

我只在帖子路线上渲染了 {{title}} 变量。但它不适用于索引路由。我正在阅读手册并尝试完全按照那里提到的那样做：http: [//emberjs.com/guides/routing/defining-your-routes/](http://emberjs.com/guides/routing/defining-your-routes/)

# html - 窗口对象是 HTML5 中的新对象吗？

> ID：16109544
> 
> 赞同：-3
> 
> 时间：2013-04-19T16:42:06.787
> 
> 标签：html, dom, web

在 HTML5 之前 window 对象存在吗？如果不是，性能属性是新的吗？我试着用谷歌搜索它，但除了说明它已经定义的规范文档之外找不到任何东西，这并不意味着它一定是新的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T16:46:35.777

> 在 HTML5 之前 window 对象存在吗？

是的。`window`只要浏览器环境中有 JS，它就一直是默认对象。

> 如果不是，性能属性是新的吗？

它来自[导航计时](http://www.w3.org/TR/navigation-timing/)规范。

# python - Python 的 xlrd 0.9.2 是否向后兼容 0.7？

> ID：16109548
> 
> 赞同：0
> 
> 时间：2013-04-19T16:42:21.097
> 
> 标签：python, excel, xlrd

我们在大约 20 个项目中使用 John Machin 的[xlrd](https://pypi.python.org/pypi/xlrd) 0.7.1 来读取 Excel 电子表格。更新到最新版本 (0.9.2) 是否可以开箱即用，或者是否存在我们应该计划的已知不兼容性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T21:42:47.903

`xlrd`根据（在他今天（2013-04-29）发送到`python-excel`邮件列表的消息中）的维护者之一 Chris Withers 所说：

> [0.6 和 0.9 之间的唯一 API 变化是删除了 open_workbook 的 'pickleable' 参数。然而，这个被删除了，因为它已经很长时间没有工作了。... 为 0.6.x 编写的应用程序在使用 0.9.2 时仍然可以正常工作。

我希望您现在所拥有的一切都可以使用最新的`xlrd`.

# css - 需要一些帮助来尝试让这个粘性页脚恰到好处

> ID：16109549
> 
> 赞同：0
> 
> 时间：2013-04-19T16:42:25.973
> 
> 标签：css, push, margin, footer, sticky

有问题的网站：http: [//www.flowersbe.com](http://www.flowersbe.com)

所以我没有让页脚粘在底部的问题，我的问题是我的容器上有一个上边距，它将页脚向下推到浏览器底部之外 25px，这在联系页面上最为明显上述网站。我想将 25px 空间保留在顶部，但我仍然希望页脚完全可见......下面是容器和页脚的 css......关于如何解决这个问题的任何想法？

```
html,
body {
    height: 100%;
}

#container {
    width: 960px;
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 25px auto -50px;
    background-color: #fff;
}

footer {
    clear: both;
    width: 960px;
    height: 35px;
    margin: 0 auto;
    padding: 15px 0 0 0;
    background-color: #ffebeb;
    text-align: center;
}

.push {
    height: 50px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:03:31.300

我相信要准确实现您想要做的事情，您必须引入一些 JavaScript 来计算`#container`应该的确切高度。

它将`height`100% 转换为视口的确切高度，然后在其上添加 25px 边距。我能想到的唯一解决方法是使用 JavaScript 获取视口的高度并将高度设置`#container`为该值减去 25px。

不涉及 JS 的可能替代解决方案：

*   只需放下`min-height`并允许`#container`它只有它需要的高度。
*   用于确保页脚始终`position: fixed`位于`footer`视口的底部，但请注意，它会位于任何内容的顶部，足够长以超出视口的高度。

这足以让你继续前进吗？

# c - Pre-ANSI C 使用结构选择器

> ID：16109553
> 
> 赞同：1
> 
> 时间：2013-04-19T16:42:43.250
> 
> 标签：c, pointers, gcc, struct, ansi

几年前，在 C 标准化之前，允许在地址上使用结构选择器。例如，允许并经常使用以下代码。

```
#define PTR 0xAA000
struct {  int integ; };

func() {
   int i;
   i = PTR->integ;    /* here, c is set to the first int at PTR */
   return c;
} 
```

也许它不是很整洁，但我喜欢它。在我看来，这种语言的强大和多功能性还依赖于它缺乏约束。如今，编译器只是转储一个错误。我想知道是否可以在 GNU C 编译器中消除这种限制。

PS：C 的发明者在 UNIX 内核上使用了类似的代码。（在 V6 中，在 param.h 中声明了一些虚拟结构）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T16:55:03.617

“几年前”实际上是很久很久以前。AFAICR，第 7 版 UNIX™ 中的 C（1979 年，比定义 C89 标准早了十年）不再支持这种表示法（但见下文）。

问题中显示的代码仅在所有结构的所有结构成员共享相同的名称空间时才有效。这意味着`structure.integ`或者总是在结构的开头`pointer->integ`引用a，因为整个程序中只有一个可能的结构成员。`int``integ`

请注意，在“现代”C（1978 年以后）中，您不能引用结构类型；它既没有结构标记，也没有 typedef —— 类型是无用的。原始代码还引用了一个未定义的变量`c`。

为了使它工作，你需要类似的东西：

```
#define PTR 0xAA000
struct integ {  int integ; };

int func(void)
{
   struct integ *ptr = (struct integ *)PTR;
   return ptr->integ;
} 
```

* * *

### C 代表第 7 版 UNIX

我建议第 7 版 UNIX 的 C 支持不同结构类型的独立命名空间。但是，与 UNIX 程序员手册第 2 卷一起发布的 C 参考手册在第 8.5 节结构中提到：

> 结构成员和结构标记的名称可以与普通变量相同，因为可以通过上下文进行区分。但是，标签和成员的名称必须不同。只有当两个成员的类型相同并且它们的结构起源相同时，相同的成员名称才能出现在不同的结构中；因此，不同的结构可以共享一个共同的初始段。

但是，同一手册还提到了符号（另请参见[What does `=+`mean in C](https://stackoverflow.com/questions/7573978/what-does-mean-in-c/7578156#7578156)）：

> §7.14.2 左值 =+ 表达式
> §7.14.3 左值 =- 表达式
> §7.14.4 左值 =* 表达式
> §7.14.5 左值 =/ 表达式
> §7.14.6 左值 =% 表达式
> §7.14.7 左值 =>> 表达式
> § 7.14.8 左值 =<< 表达式
> §7.14.9 左值 =& 表达式
> §7.14.10 左值 =^ 表达式
> §7.14.11 左值 = | 表达
> 
> ''E1 = op E2'' 形式的表达式的行为可以通过将其等同于 ''E1 = E1 op E2'' 来推断；但是，E1 只计算一次。此外，禁止将指针添加到整数的表达式，如“i =+ p”。

AFAICR，我使用的第一个 C 编译器不支持这一点（1983 年——我很古老，但不是那么古老）；只允许使用现代`+=`符号。换句话说，我不认为该参考手册中描述的 C 在产品发布时是完全最新的。（我还没有检查过我的 K&R 的第 1 版 — 有没有人可以检查？）您可以在[http://cm.bell-labs.com/7thEdMan/](http://cm.bell-labs.com/7thEdMan/)上在线找到 UNIX 第 7 版手册。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T16:55:44.333

通过为结构指定类型名称并稍微调整宏，您可以在代码中实现相同的效果：

```
typedef struct { int integ; } PTR_t;
#define PTR ((PTR_t*)0xAA000) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T17:35:47.200

> 我想知道是否可以在 GNU C 编译器中消除这种限制。

我有理由确定答案是否定的——也就是说，除非你重写 gcc 以支持旧版本的语言。

[gcc 手册](http://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/C-Dialect-Options.html)记录了命令`-traditional`行选项：

> '-traditional' '-traditional-cpp'
> 
> 以前，这些选项导致 GCC 尝试模拟一个准标准的 C 编译器。它们现在只支持 `-E' 开关。预处理器继续支持预标准模式。有关详细信息，请参阅 GNU CPP 手册。

这意味着现代 gcc（引用来自 4.8.0 手册）不再支持 pre-ANSI C。

您所指的特定功能不仅是 pre-ANSI，而且*非常*pre-ANSI。ANSI 标准于 1989 年发布。K&R 的第一版于 1978 年发布，我记得它描述的语言不支持您正在寻找的功能。gcc 的初始版本是在 1987 年，因此很可能*没有任何*版本的 gcc 支持该功能。

此外，启用此类功能会破坏现有代码，这可能取决于在不同结构中使用相同成员名称的能力。（旧规则的痕迹在标准 C 库中仍然存在，例如类型的成员`struct tm`都具有以 ; 开头的名称`tm_`，在现代 C 中这是不必要的。）

您也许可以找到以您想要的方式工作的古老 C 编译器的源代码。已故的 Dennis Ritchie 的[主页](http://www.cs.bell-labs.com/who/dmr/)将是一个很好的起点。无需大量工作就可以让这样的编译器在任何现代系统上运行，这一点并不明显。结果将是一个编译器不支持许多您可能会发现有用的 C 新特性，例如`long`、`signed`和`unsigned`关键字、按值传递结构的能力、函数原型和混合尝试的诊断指针和整数。

C现在比以前*好多了。*有一些危险的事情比以前稍微困难一些，但我不知道任何实际的表达能力已经丧失。

# mips - mips 中的 Sprintf

> ID：16109554
> 
> 赞同：1
> 
> 时间：2013-04-19T16:42:47.880
> 
> 标签：mips, printf

所以我试图在 MIPS 中创建 Sprintf。问题是，我不确定如何处理 %d、%c 等的所有情况。

因此，即使我确实识别 % 我如何识别下一个字符？我的意思是，所以我在寄存器 $a3 中有 %。li $a3, '%'

但是，我没有足够的寄存器用于 $d、%c、%b 等。

我将如何检查所有这些？

```
######################################################################
# spf-main.s
# 
# This is the main function that tests the sprintf function

# The "data" segment is a static memory area where we can 
# allocate and initialize memory for our program to use.
# This is separate from the stack or the heap, and the allocation
# cannot be changed once the program starts. The program can
# write data to this area, though.
    .data

# Note that the directives in this section will not be 
# translated into machine language. They are instructions 
# to the assembler, linker, and loader to set aside (and 
# initialize) space in the static memory area of the program. 
# The labels work like pointers-- by the time the code is 
# run, they will be replaced with appropriate addresses.

# For this program, we will allocate a buffer to hold the
# result of your sprintf function. The asciiz blocks will
# be initialized with null-terminated ASCII strings.

buffer: .space  20000           # 2000 bytes of empty space 
                    # starting at address 'buffer'

format: .asciiz "string: %s, unsigned dec: %u, hex: 0x%x, char: %c, dec: %d, bin: %b, percent: %%\n"
                    # null-terminated string of 
                    # ascii bytes.  Note that the 
                    # \n counts as one byte: a newline 
                    # character.
str:    .asciiz "thirty-nine"       # null-terminated string at
                    # address 'str'
chrs:   .asciiz " characters:\n"    # null-terminated string at 
                    # address 'chrs'
strpd:  .asciiz "%d"        # null-terminated string at 
strpc:  .asciiz "%c"        # null-terminated string at 
strpb:  .asciiz "%b"        # null-terminated string at     
strpu:  .asciiz "%u"        # null-terminated string at
strpx:  .asciiz "%x"        # null-terminated string at 
strpo:  .asciiz "%o"        # null-terminated string at 
strps:  .asciiz "%s"        # null-terminated string at 
strpp:  .asciiz "%%"        # null-terminated string at 
strpi:  .asciiz "%"     # null-terminated string at 

# The "text" of the program is the assembly code that will
# be run. This directive marks the beginning of our program's
# text segment.

    .text

# The sprintf procedure (really just a block that starts with the
# label 'sprintf') will be declared later.  This is like a function
# prototype in C.

    .globl sprintf

# The special label called "__start" marks the start point
# of execution. Later, the "done" pseudo-instruction will make
# the program terminate properly.   

main:
    addi    $sp,$sp,-36 # reserve stack space

    # $v0 = sprintf(buffer, format, str, 255, 255, 111, -255, -255)

    la  $a0,buffer  # arg 0 <- buffer
    la  $a1,format  # arg 1 <- format
    la  $a2,str     # arg 2 <- str

    addi    $a3,$0,255  # arg 3 <- 255
    sw  $a3,16($sp) # arg 4 <- 255

    addi    $t0,$0,111
    sw  $t0,20($sp) # arg 5 <- 111 ('o', as a character)

    addi    $t0,$0,-255
    sw  $t0,24($sp) # arg 6 <- -255

    addi    $t0,$0,255  
    sw  $t0,28($sp) # arg 7 <- 255

    sw  $ra,32($sp) # save return address
    jal sprintf     # $v0 = sprintf(...)

    # print the return value from sprintf using
    # putint()

    add $a0,$v0,$0  # $a0 <- $v0
    jal putint      # putint($a0)

    ## output the string 'chrs' then 'buffer' (which
    ## holds the output of sprintf)
    li  $v0, 4  
    la      $a0, chrs
    syscall
    #puts   chrs        # output string chrs

    li  $v0, 4
    la  $a0, buffer
    syscall
    #puts   buffer      # output string buffer

    addi    $sp,$sp,36  # restore stack
    li  $v0, 10     # terminate program
    syscall

# putint writes the number in $a0 to the console
# in decimal. It uses the special command
# putc to do the output.

# Note that putint, which is recursive, uses an abbreviated
# stack. putint was written very carefully to make sure it
# did not disturb the stack of any other functions. Fortunately,
# putint only calls itself and putc, so it is easy to prove
# that the optimization is safe. Still, we do not recommend 
# taking shortcuts like the ones used here.

# HINT: You should read and understand the body of putint,
# because you will be doing some similar conversions
# in your own code.

putint: addi    $sp,$sp,-8  # get 2 words of stack
    sw  $ra,0($sp)  # store return address

    # The number is printed as follows:
    # It is successively divided by the base (10) and the 
    # reminders are printed in the reverse order they were found
    # using recursion.

    remu    $t0,$a0,10  # $t0 <- $a0 % 10
    addi    $t0,$t0,'0' # $t0 += '0' ($t0 is now a digit character)
    divu    $a0,$a0,10  # $a0 /= 10
    beqz    $a0,onedig  # if( $a0 != 0 ) { 
    sw  $t0,4($sp)  #   save $t0 on our stack
    jal putint      #   putint() (putint will deliberately use and modify $a0)
    lw  $t0,4($sp)  #   restore $t0
                            # } 
onedig: move    $a0, $t0
    li  $v0, 11
    syscall         # putc #$t0
    #putc   $t0     # output the digit character $t0
    lw  $ra,0($sp)  # restore return address
    addi    $sp,$sp, 8  # restore stack
    jr  $ra     # return

    #sprintf!
#$a0 has the pointer to the buffer to be printed to
#$a1 has the pointer to the format string
#$a2 and $a3 have (possibly) the first two substitutions for the format string
#the rest are on the stack
#return the number of characters (ommitting the trailing '\0') put in the buffer

        .text

sprintf:
    addi $sp, $sp, -12
    sw $ra, 8($sp)
    sw $s1, 4($sp)
    sw $s2, 0($sp)

    li $a3, '%'     

        li      $s0, 0          # len = 1
        la      $s1, ($a1)        # s = str
test:
        lb      $s2, 0($s1)     # c = *s
        beqz    $s2, done       # if c == '\0', branch to "done"
     #   beq    $s2, $a3, percent

        addi    $s0, $s0, 1     # len = len + 1
        addi    $s1, $s1, 1     # s = s + 1
        j       test

percent:
     li $v0, 4    # print_string    
    la $a0, str 
    syscall

done:
     #   li      $v0, 1          # syscall code: print_int
     #   move    $a0, $s0
     #   syscall
       li      $v0, 11         # syscall code: print_char
        li      $a0, 10         # pass newline character
        syscall

        add $v0,$0, $s0
        lw $ra, 8($sp)
        lw $s1, 4($sp)
    lw $s2, 0($sp)
    addi $sp, $sp, 12

        jr      $ra 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-30T21:17:52.830

您需要一个循环来检查`sprintf`函数内的下一个字符。此循环应扫描下一个字符，将其与您将使用的可用字符列表进行比较，然后分支到必要的功能，其中包括返回循环以防万一`%%`。

# mysql - MySQL QUERY 在准备中太久了

> ID：16109558
> 
> 赞同：0
> 
> 时间：2013-04-19T16:43:07.047
> 
> 标签：mysql

以下 SQL 的准备时间为 30+ 秒。SQL是错误的，还是我有接近一百万的事实导致数据库？可以优化此 SQL 使其不准备那么长时间吗？

```
UPDATE url_source_wp SET hash="ASDF2"
WHERE (url_source_wp.id NOT IN (
   SELECT url_done_wp.url_source_wp FROM url_done_wp WHERE url_done_wp.url_group = 4)
)
AND (hash IS NULL) LIMIT 50 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:51:45.183

It seems like you could more optimally do this update across a JOIN, avoiding the use of the sub-select.

```
UPDATE
  url_source_wp AS s
  INNER JOIN url_done_wp AS d
    ON s.id = d.url_source_wp
SET
  s.hash = 'ASDF2'
WHERE
  s.hash IS NULL
  AND d.url_group = 4 
```

You need to make sure you have indexes on `s.id`, `d.url_source_wp`, `s.hash`, and `d.url_group`. Also, note that you can't use `LIMIT` with multi-table syntax, so if this is important this suggestion will likely not work for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:45:44.253

如果准备是您的问题，您可以将其预编译为存储过程。

看到这个：[http ://dev.mysql.com/doc/refman/5.0/en/stored-routines.html](http://dev.mysql.com/doc/refman/5.0/en/stored-routines.html)

# javascript - 在 javascript 中强制停止 iphone/ipad 上的动量滚动

> ID：16109561
> 
> 赞同：10
> 
> 时间：2013-04-19T16:43:12.203
> 
> 标签：javascript, iphone, mobile, infinite-scroll, momentum

是否可以在 javascript 中强制停止 iphone/ipad 上的动量滚动？

额外：很确定这是天上掉下来的馅饼，但是对于奖励点（荣誉和荣誉），在 dom-manipulation 和 scrollTo 应用之后，在强制停止之前以相同的动量恢复滚动。如何？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-05T14:27:12.557

[这在使用fastclick.js](https://github.com/ftlabs/fastclick)时实际上是很有可能的。该库消除了移动设备上 300 毫秒的点击延迟，并在惯性/动量滚动期间启用了事件捕获。

在包含 fastclick 并将其附加到 body 元素后，我停止滚动并转到顶部的代码如下所示：

```
scrollElement.style.overflow = 'hidden';
scrollElement.scrollTop = 0;
setTimeout(function() {
  scrollElement.style.overflow = '';
}, 10); 
```

诀窍是设置`overflow: hidden`，它会停止惯性/动量滚动。[请参阅我的小提琴，了解在惯性/动量期间停止滚动](http://jsfiddle.net/6EYxz/)的完整实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-28T17:47:47.933

这是我使用 jQuery 动画的代码（作为 onclick 事件运行）

```
var obj=$('html, body'); // your element

if(!obj.is(':animated')) {

    obj.css('overflow', 'hidden').animate({ scrollTop: 0 }, function(){ obj.css('overflow', ''); });

} 
```

在 iPhone 6 上测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-14T18:47:41.460

我找到了一种通过在**touchend**事件上分配**html.scrollTop**属性来取消 BODY 动量滚动的方法。看起来像这样：

 **```
let html = document.querySelector('html');
window.addEventListener( 'touchend', function( e ){
    html.scrollTop = html.scrollTop;
}); 
```

在 iOS 13 上测试

**UPD：上述解决方案在 iOS 12 上失败**，因为在此版本中实际滚动元素不是“html”。

以下代码适用于 12 和 13：

```
window.addEventListener( 'touchend', function( e ){
    window.scroll( 0, window.scrollY );
}); 
```**

# winforms - Winforms 在设置 TabPage.Text 时抛出 ArgumentOutOfRangeException

> ID：16109563
> 
> 赞同：0
> 
> 时间：2013-04-19T16:43:15.840
> 
> 标签：winforms, tabcontrol, tabpage

我有这样的代码

```
someTabPage.Text = "hello"; 
```

其中是由 Winforms 设计器创建`someTabPage`的非空实例。`System.Windows.Forms.TabPage`

偶尔（没有人能重现这个）这个异常被抛出

```
[System.ArgumentOutOfRangeException] InvalidArgument=Value of '-1' is not valid for 'index'.
Parameter name: index
  at System.Windows.Forms.TabControl.SetTabPage(Int32 index, TabPage tabPage, TCITEM_T tcitem)
  at System.Windows.Forms.TabControl.UpdateTab(TabPage tabPage)
  at System.Windows.Forms.TabPage.UpdateParent()
  at System.Windows.Forms.TabPage.set_Text(String value)
  at my code which calls the setter 
```

我正在[从调用堆栈中的这一点开始](http://typedescriptor.net/browse/members/519700-System.Windows.Forms.TabPage.set_Text%28String%29)查看源代码，但我无法想象出了什么问题。正如 Ginosaji 在评论中所暗示的那样，父子关系似乎被打破了——TabPage 指向其父 TabControl，但父级并未将子级包含在其集合中。我会认为“竞争条件”，但只有 UI 线程应该能够触摸 Winforms 控件。

值得注意的是，这个 TabControl 嵌套在另一个 TabControl 中，但这并没有给我任何想法。

有谁知道为什么会发生这种情况？

**进步**

我在调试器中抓到了，确认父子关系确实坏了。

```
? tabPageProblem.Parent
{System.Windows.Forms.TabControl, TabPages.Count: 2, TabPages[0]: TabPage: {Unit Data}}
    System.Windows.Forms.TabControl: {System.Windows.Forms.TabControl, TabPages.Count: 2, TabPages[0]: TabPage: {Unit Data}}
? tabPageProblem.Parent.Name
"tabControlParent"
? tabControlParent.TabPages.Contains(tabPageProblem)
False 
```

标签页仍然有其父集，但父不包含标签页。

不幸的是，我仍然不知道它是如何进入这种状态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:11:00.933

您提到问题发生在子 TabControl 中...设置 Text 时，包含此子 TabControl 的标签页是否处于非活动状态？（意味着父 TabControl 的不同标签页位于前台。）我相信，虽然子 TabControl 不可见（在“背景”标签页中），但它往往会出现意外行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T18:18:44.187

我一直在使用 .TabPages.Add 遇到此错误，最后找到了一致的重现和可能对您有所帮助的解决方案：

添加这个新行：

```
 someTabPage.PerformLayout();
    someTabPage.Text = "hello"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-13T20:15:59.877

这是我使用的解决方法：

```
If tabControl.TabPages.Contains(tabPage) Then
    tabPage.Text = "the text"
ElseIf tabPage.Parent IsNot Nothing Then
    logger.Warn("there is still a problem with this tab page, parent is {0}", tabPage.Parent)
End If 
```

# midl - 在非托管 C++ 中使用 size_is 的 MIDL 编组结构数组

> ID：16109578
> 
> 赞同：3
> 
> 时间：2013-04-19T16:44:00.450
> 
> 标签：midl

我正在尝试通过 COM 接口检索结构数组。它在结构数为 1 时起作用。当结构数大于 1 时，只有第一个结构被正确编组。数组中的其余结构具有垃圾数据。我的界面如下所示：

```
typedef struct tagINTOBJINTERFACE
{
    long lObjectId;
    IMyObject* pObj;

} INTOBJINTERFACE;

[
    object,
    uuid(<removed>),
    dual,
    nonextensible,
    helpstring("Interface"),
    pointer_default(unique)
]
interface IMyInterface : IUnknown {

    HRESULT CreateObjects(
        [in] VARIANT* pvDataStream,
        [out]long* Count, 
        [out,size_is(,*Count)] INTOBJINTERFACE** ppStruct
        );
}; 
```

我像这样分配结构内存：

```
long lCountInterfaces = listInterfaces.GetCount();
long lMemSize = lCountInterfaces * sizeof(INTOBJINTERFACE);
INTOBJINTERFACE* pstruct = (INTOBJINTERFACE*) CoTaskMemAlloc( lMemSize ); 
```

然后填写数组中每个结构的成员。我可以在调试器中看到所有数组元素的所有成员都已正确分配。填写完结构后，我分配“*ppStruct = pstruct”来传递数组。我还可以看到输出参数“*Count”被正确设置为正确的元素数量。

为什么这不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-17T08:52:32.593

原因：您的应用程序使用 windows 中的通用编组器进行编组。通用编组器从您的类型库 (*.tlb) 中读取元数据。
生成的 typelib 不支持 size_is。

Todo：您应该使用由 Visual Studio 生成的 Proxy/Stub dll（...PS 项目）。- 构建代理/存根 dll - 调用“regsvr32” - 从您的服务器“*.rgs”文件中删除“TypeLib = s '{?????-...-????}'”条目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-10T18:58:22.010

除了 Joerg 的回答说 using`size_is`是不可能的，这里有什么是可能的：`SAFEARRAY`.

关键词：UDT的Safearray

解释和例子在[这里](https://docs.microsoft.com/en-us/previous-versions/windows/desktop/automat/passing-safearray-of-udts)

简短的摘要：

1.  使用 GUID 定义结构。
2.  使用类型库创建描述您的结构的 IRecordInfo 类型的对象。
3.  用于`SafeArrayCreateEx`创建`SAFEARRAY`类型`VT_RECORD`。
4.  用数据填充它。
5.  取回另一边。

# hive - Sqoop、Avro 和 Hive

> ID：16109585
> 
> 赞同：3
> 
> 时间：2013-04-19T16:44:22.303
> 
> 标签：hive, sqoop, avro

我目前正在使用 avro 格式的 Sqoop 从 Mysql 导入 HDFS，这很好用。然而，将这些文件加载​​到 HIVE 中的最佳方法是什么？

由于 avro 文件包含架构，我可以将文件下拉到本地文件系统，使用 avro 工具并使用提取的架构创建表，但这似乎过度？

此外，如果从 mysql 中的表中删除列，我是否仍可以将旧文件加载到使用新 avro 架构创建的新 HIVE 表中（删除的列丢失）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:52:21.787

在 9.1 版之后，Hive 与 Avro Hive SerDe 一起打包。这允许 Hive 直接从 Avro 文件中读取，而 Avro 仍然“拥有”架构。

对于第二个问题，您可以使用列默认值定义 Avro 架构。添加新列时，只需确保指定默认值，所有旧的 Avro 文件都可以在新的 Hive 表中找到。

要开始使用，您可以在[此处](https://cwiki.apache.org/confluence/display/Hive/AvroSerDe)找到文档，而*Programming Hive*书（可在 Safari 在线图书中获得）有一个[关于 Avro HiveSerde 的部分](http://my.safaribooksonline.com/book/databases/hadoop/9781449326944/15dot-customizing-hive-file-and-record-formats/avrohiveserde_html)，您可能会发现它更具可读性。

# android - 将在 web 服务中读取的 Android 应用程序我使用 Soap 还是 Rest 以及如何读取它

> ID：16109587
> 
> 赞同：1
> 
> 时间：2013-04-19T16:44:33.657
> 
> 标签：android, web-services, rest, ksoap

我有一个 Android 应用程序，它将从预先指定的 Web URL 读取名为 getFuelStops() 的 asp.net webservice 方法。下面是对 getFuelStops() 的 Web 服务调用的内容。

getFuelStops() 的 Web 服务结果

```
<FuelStop>
      <Physical_Address_Street>3100 Church</Physical_Address_Street>
      <Physical_Address_Local> Chesapeake</Physical_Address_Local>
      <Physical_Address_State>VA</Physical_Address_State>
      <Physical_Address_Zip>23321</Physical_Address_Zip>
      <Phone_Number>555-555-5555</Phone_Number></FuelStop>
<FuelStop>
<FuelStop>
<Physical_Address_Street>3102 Church</Physical_Address_Street>
      <Physical_Address_Local> Chesapeake</Physical_Address_Local>
      <Physical_Address_State>VA</Physical_Address_State>
      <Physical_Address_Zip>23321</Physical_Address_Zip>
      <Phone_Number>555-555-5555</Phone_Number></FuelStop>
<FuelStop>
<FuelStop>
      <Physical_Address_Street>3103 Church</Physical_Address_Street>
      <Physical_Address_Local> Chesapeake</Physical_Address_Local>
      <Physical_Address_State>VA</Physical_Address_State>
      <Physical_Address_Zip>23321</Physical_Address_Zip>
      <Phone_Number>555-555-5555</Phone_Number>
</FuelStop> 
```

然后我的 Android 应用程序中有一个活动。并显示为 TableLayout。
我需要此活动以将上面的地址列表作为列表读取。对于地址，我需要将 Physical_Address_Street、Physcial_Address_Local、Physcial_Address_State 和 Physcial_Address_Zip 都与字符串生成器连接在一起，并将电话作为单独的字符串。我的第一个问题是，我可以使用 KSOAP2 来执行此操作，还是必须为此使用 RESTFul 阅读器？就示例而言，我将如何做到这一点。

FuelStopActivity.java

```
public class FuelStopActivity extends Activity {

    @TargetApi(Build.VERSION_CODES.HONEYCOMB)
    @SuppressLint("InlinedApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_fuel_stop);
        displayFuleStopTable();
    }

    private void displayFuleStopTable(){
        List<FuelStops> subwayList = new ArrayList<FuelStops>();

        ScrollView sv = new ScrollView(this);

        TableLayout ll = (TableLayout) findViewById(R.id.TableLayout01);

        HorizontalScrollView hsv = new HorizontalScrollView(this);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:49:42.153

如果您要访问一个 URL 并且它正在吐出该数据，那可能是一个 RESTful 服务。RESTful 服务使用 HTTP 进行传输。因此，您需要使用 HttpClient 之类的东西从您的应用程序中访问此服务。

# c++ - 恢复调试会话不构建更改 VS2012

> ID：16109591
> 
> 赞同：0
> 
> 时间：2013-04-19T16:44:46.627
> 
> 标签：c++, visual-studio, visual-studio-2012, visual-c++

我的 Visual Studio 不会构建/编译在暂停的调试会话下所做的更改。

我在谷歌上找不到我的理由，所以我决定它不再是我的朋友，并来这里寻找新朋友，希望你能理解我的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:46:34.657

您需要启用[Edit and Continue](http://msdn.microsoft.com/en-us/library/bcew296c.aspx "在 MSDN 编辑并继续")。这将允许您在调试会话期间重新编译并继续运行。

# php - MySQL 获取单行上的所有数据

> ID：16109592
> 
> 赞同：-2
> 
> 时间：2013-04-19T16:44:47.767
> 
> 标签：php, html, sql, database

我的 PHP 代码从 SQL 数据库中检索信息时遇到问题，数据库看起来像

![我的数据库](https://i.stack.imgur.com/WGokd.jpg) 我的代码如下所示：

```
$query="SELECT nDeCand FROM `candidats`";
$res=mysql_query($query);
$row = mysql_fetch_row($res,MYSQL_NUM);
$num= count($row);
echo "Printed Array: </br>";
echo "<pre>";
print_r($row);
echo "</pre>"; 
```

它打印：

数组
（
[0] => 24567
）

我需要它来检索 nDeCand 中的所有数字，而不仅仅是第一个。谁能解释为什么它不这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:47:27.977

您必须使用一段时间循环遍历行。

```
$query="SELECT nDeCand FROM `candidats`";
$res=mysql_query($query);

while($row = mysql_fetch_row($res,MYSQL_NUM)) {
  $num= count($row);
  echo "Printed Array: </br>";
  echo "<pre>";
  print_r($row);
  echo "</pre>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:49:09.687

首先，您应该使用[mysqli](http://php.net/manual/en/book.mysqli.php "mysqli")，而不是`mysql_`已弃用的函数。

除此之外，当使用 mysql_fetch_row（或 mysqli_fetch_row，在函数上下文中）时，您需要在循环中调用它：

```
<?php
while ($row = mysqli_fetch_row($mysqli_result)) {
    // do stuff...
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:49:20.993

你忘了循环：

```
$res=mysql_query($query);
while($row = mysql_fetch_assoc($res))
{
    echo $row['nDeCand'];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T16:52:04.183

您只是获取第一行并访问该值。您需要遍历所有行。mysql_fetch_assoc() 每次在 while 循环中调用时都会增加指向下一行的指针。这样您就可以访问所有行。这是代码： -

```
$result=mysql_query($query);
while($row = mysql_fetch_assoc($result))
{
    echo $row['nDeCand'];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T16:52:41.590

`mysql_fetch_row`只获取一行。

请尝试`mysql_fetch_array`，然后循环数组。

# python - 合并十六进制数字字符串以在python中进行串行通信

> ID：16109594
> 
> 赞同：0
> 
> 时间：2013-04-19T16:44:53.607
> 
> 标签：python, string, serial-port, hex

我正在以`ser.write('\x01\x03\x01')`运行良好的格式将消息发送到 COM 端口。我尝试制作一个功能如下：

`def func(inp):
# transport inp to hex format and to be like \xXY (two digits)
# merge in the way '\x01'+'\xXY'+'\x01'`

但是我总是在插入反斜杠（它可以像双反斜杠一样插入，但端口不能将其作为单个反斜杠读取）或通过解释器读取这个反斜杠（给出错误）时遇到问题。
如果有人已经这样做了，请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:58:26.520

这正是 Python 的[struct 模块](http://docs.python.org/2/library/struct.html)的用途。你的函数可以写成：

```
import struct

>>> def func(inp):
...     return struct.pack('bbb', 1, inp, 1)
...
...
>>> func(22)
'\x01\x16\x01' 
```

格式字符将`'b'`字节值解释为有符号字符，`'B'`将它们解释为无符号字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:55:37.900

您可以使用`binascii.unhexlify`转换十六进制字符串

```
>>> import binascii
>>> binascii.unhexlify('010203') == '\x01\x02\x03'
True 
```

所以你的功能是

```
def func(inp):
    return '\x01' + binascii.unhexlify(inp) + '\x01'; 
```

# image - 图像的 alt 或 title 属性中的 HTML 实体如何影响工具提示和音频用户代理？

> ID：16109595
> 
> 赞同：1
> 
> 时间：2013-04-19T16:44:55.940
> 
> 标签：image, title, html-entities, screen-readers, alt

背景 我收到了一位撰稿人的文字，其中包含很多 © 。所以在 Sublime Text Editor 中，我进行了搜索并替换为：

```
&copy; 
```

许多文本已经添加到标题和 alt 属性中的图像中。所以那里的文字也受到了影响。

以前在我自己的项目中，我只会去掉所有合法项目，如注册、商标和版权符号。因为我认为只有实际的文字很重要。但是这个项目是针对一家有更多合规规定的公司的，所以我正在考虑诸如屏幕阅读器之类的东西。在屏幕阅读器中，我的第一个想法是会说出“版权”？那是对的吗？在这种情况下它真的很重要吗？

那么我应该使用 HTML 实体吗？

到目前为止我在谷歌发现

*   在 w3 学校总结的[HTML 标题属性。](http://www.w3schools.com/tags/att_global_title.asp)但没有提到 HTML 实体。
*   w3c 推荐文档中讨论标题标签[的 HTML 文档的全局结构。](http://www.w3.org/TR/html401/struct/global.html)但没有提到 HTML 实体。
*   [使用 HTML 标题属性——更新](http://blog.paciellogroup.com/2013/01/using-the-html-title-attribute-updated/)对标题属性有很好的了解，但同样没有提及 html 实体。

有这方面的经验吗？或其他有关搜索内容的建议？还是我只用纯文本就可以了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-21T14:50:42.987

一般来说，屏幕阅读器应该对它们进行可接受的工作。[您可以在http://accessibleculture.org/research-files/character-references/jaws-all.php](http://accessibleculture.org/research-files/character-references/jaws-all.php)找到 JAWS 如何处理此问题的精彩摘要。并非所有人都被正确阅读，但大多数都是。我还在 OS X Yosemite 上使用 VoiceOver 测试了该页面，它似乎也做得很好。因此，我认为您可以像往常一样使用角色实体，并期望主流屏幕阅读器获得不错的（如果不是完美的话）结果。

# javascript - Javascript插件没有出现在drupal上

> ID：16109598
> 
> 赞同：1
> 
> 时间：2013-04-19T16:45:10.243
> 
> 标签：javascript, drupal-7

我想在我的 drupalgardens 页面上放一个 soundcloud 音乐播放器 ( [http://stratus.sc/ )。](http://stratus.sc/)我添加了一个外部源 javascript 库并在系统上上传了一个 js 文件，正如它在插件网站上所说的那样。所有这些都是 drupalgardens 的管理网站。当我检查我网页的源代码时，它看起来就像插件在标题上。但它不起作用，我看不到它。我激活了所有的 jquery 功能。

标头上的一些源代码似乎在那里插入：

```
<script type="text/javascript" src="http://stratus.sc/stratus.js"></script>
<script type="text/javascript" src="http://NAMEOFMYSITE/sites/NAMEOFMYSITE/files/js/js_PRNQJr2GPf-FrbaSuV5IDQ1l6Lfby6e79KpPOUTf5kI.js"></script> 
```

关联：

[http://bit.ly/10nyAHV](http://bit.ly/10nyAHV)

有什么建议么？

注意：我所说的播放器不是旋转横幅下可以看到的播放器。我正在谈论它应该在网页上的全球范围内似乎在插入官方网页上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:06:42.430

对于一个您收到此控制台错误的人：`"Uncaught SyntaxError: Unexpected token < "` 不确定如何添加该脚本，但仅删除脚本标签可能会清除它。

即使 KG 提到的帧错误是无关的，你也必须把它清理干净。

您的脚本也应该在 jquery 之后加载。由于看起来您打开了 js 聚合，我真的不知道如何确定 drupal 是否正确加载内容。如果您不确定，您可以告诉您的脚本加载页脚而不是页眉。下面的链接解释了如何做到这一点。

这里有一些 Drupal 的 javascript 相关资源。他们有时期望以不同的方式处理事情。

该插件依赖于 jQuery。默认情况下，Drupal 7 加载 jQuery 1.4。您可能需要使用[jQuery Update 插件](http://drupal.org/project/jquery_update)来使用 1.5、1.7 或 1.8

Drupal 社区关于 javascript 的文档：http: [//drupal.org/node/756722](http://drupal.org/node/756722)

Drupal javascript API： [http ://drupal.org/node/751744](http://drupal.org/node/751744)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T21:27:01.040

我有一个类似的问题。播放器无法正常工作的一些原因是：

*   由于某种原因 $ 未知（尽管包括 jQuery）。我用“jQuery”替换了“$”，一切正常。这意味着使用`jquery(document).ready(...`代替`$(document).ready(...`和`jQuery.stratus({..`代替`$.stratus({..`。
*   Stratos.sc 网站上有一个错字。`$.stratus`它不应该读作`$stratus`（或`jQuery.stratus`，参见前面的提示）。
*   检查是否包含源stratus.js 和初始化代码。

https 和 http 的混合可能是问题原因的一个很好的猜测，但实际上它有效（我刚刚尝试过）。如果找不到问题，请尝试使用 JavaScript 调试器并先检查错误日志！

# asp.net-mvc - 是否可以自动捆绑、缩小和包含我的页面特定 Javascript？

> ID：16109600
> 
> 赞同：1
> 
> 时间：2013-04-19T16:45:11.440
> 
> 标签：asp.net-mvc, asp.net-mvc-4, bundling-and-minification

对于我的每个视图，我都将特定于页面的 javascript 存储在一个单独的文件中，我的命名约定导致每个 js 文件始终位于同一个位置 scripts/pagejs/controllername/viewname.js 我可以自动包含和缩小这些 javascript 文件吗？每个视图？

到目前为止，我已经在思考，我可以在不捆绑的情况下这样做，我的 cshtml 页面中有一个渲染标签，它可以在脚本目录中查找，我可以将它替换为在 bundles 目录中查找的标签

```
<script src="/Bundles/pagejs/Account/Home.js"></script> 
```

捆绑过程应该导致一个包含一个 javascript 文件的捆绑包（这里的捆绑过程仅对缩小过程有用）

# ruby-on-rails - 销毁rails中的所有控制器动作

> ID：16109605
> 
> 赞同：2
> 
> 时间：2013-04-19T16:45:21.873
> 
> 标签：ruby-on-rails, controller

我有一个`Notification`模型。总而言之，这个模型并不重要，只是为了通知用户。我没有理由保留这些数据。

用户可以通过AJAX一一清除通知，该部分工作正常。

我想给用户一个“全部删除”选项。很像 Android 的通知中心。

执行此操作的最佳方法是客户控制器操作吗？或者我会使用删除控制器并传递用户 ID 和某种标志来删除所有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:48:26.210

我会在`destroy_all_notifications_path`没有任何 id 的情况下发布，并在控制器上销毁登录用户的所有通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:49:29.807

您应该在 Notification 控制器中声明一个新操作：

```
 def destroy_all
   @user.notifications.each(&:destroy)
 end 
```

然后将其添加到您的路线

```
 map.resources :users do |user|
   user.resources :notifications, :collection => { :destroy_all => :delete }
 end 
```

不要忘记检查 @user 是否为 current_user ！

在您看来，使用链接来销毁。

```
 <%= link_to_remote :destroy_all_notifications_user_path(current_user) %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-29T13:59:45.867

最近我自己偶然发现了这个，这就是我解决这个问题的方法。所以首先，用户通知的集合可以建模为一个 RESTful 资源。但是，此资源不能有 id，并且用户只能拥有一个通知集合，而不是很多。这就是为什么我会将其建模为这样的单一资源：

```
resources :user do
  resource :notifications, only: :destroy
end 
```

这会给我 RESTful 路线`DELETE /users/:user_id/notifications`。现在，问题在于，默认情况下，Rails 会将此路由分配给`NotificationsController#destroy`. 由于您已经将此操作分配给销毁单个通知，因此您必须为资源“user_notifications”创建一个单独的控制器。

我会在下面创建一个文件夹`users`，`app/controllers`并在其中创建`notifications_controller.rb`. 然后在这个控制器中，我将执行该`destroy`操作。最后，在路由中，我需要像这样指定控制器：

```
resources :user do
  resource :notifications, only: :destroy, controller: 'users/notifications'
end 
```

# c# - 在 adp.Fill 处抛出 OleDbException 说“找不到可安装的 ISAM”。

> ID：16109609
> 
> 赞同：1
> 
> 时间：2013-04-19T16:45:24.823
> 
> 标签：c#, excel

```
 string fileName = "e:\\investigation\\report.xlsx";
        string SHEETNAME_HERE = "Sheet1";
        string connectionString = String.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=\"Excel 8.0;HDR=YES\";", fileName);
        OleDbConnection con = new OleDbConnection(connectionString);
        StringBuilder stbQuery = new StringBuilder();
        stbQuery.Append("SELECT * FROM [" + SHEETNAME_HERE + "]");
        OleDbDataAdapter adp = new OleDbDataAdapter(stbQuery.ToString(), con);

        DataSet dsXLS = new DataSet();
        adp.Fill(dsXLS); 
```

我使用的是 Windows 64 位，而 Office 2010（32 位）找不到可安装的 ISAM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:50:52.200

您需要验证是否安装了正确的 DLL。IE Msexcl40.dll

请参阅（忽略它说访问 2k 并按照解决步骤） [http://support.microsoft.com/kb/209805](http://support.microsoft.com/kb/209805)

# qt - 如何使用 C++ 将 ITK 连接到 VTK？

> ID：16109610
> 
> 赞同：3
> 
> 时间：2013-04-19T16:45:27.503
> 
> 标签：qt, user-interface, vtk, itk

我是 ITK、VTK 和 Qt 的初学者。我使用visual studio 9。我正在尝试使用ITK阅读DICOM系列并在QVTKWidget（Qt）中使用VTK显示。我基于此代码[http://www.itk.org/Wiki/VTK/Examples/Cxx/IO/ReadDICOMSeries](http://www.itk.org/Wiki/VTK/Examples/Cxx/IO/ReadDICOMSeries)并根据我的需要进行了修改。

当我用 VTK 阅读 DICOM 系列并在 QVTKWidget 中显示它时，它可以工作，但是当我想用 ITK 阅读这个系列并在 QVTKWidget 中用 VTK 显示时，程序显示系列的第一张图像，当我转到下一张图像时鼠标滚轮，程序崩溃。

当我调试时，我得到了这个错误：

```
void VTKImageExportBase::UpdateInformationCallbackFunction(void *userData)
{
static_cast< VTKImageExportBase * >
( userData )->UpdateInformationCallback();//the error is here
} 
```

我尝试了 ausssi ImageToVTKImageFilter 类，但遇到了同样的问题。

这是我的代码：

```
void essaieAppQtVTK::drawDCMSeries(std::string folderDCM)
{
typedef unsigned short    PixelType;
const unsigned int      Dimension = 3;

typedef itk::Image< PixelType, Dimension >         ImageType;

typedef itk::VTKImageExport<ImageType> ImageExportType; 
typedef itk::ImageSeriesReader< ImageType >        ReaderType;
ReaderType::Pointer reader = ReaderType::New();
typedef itk::GDCMImageIO       ImageIOType;
ImageIOType::Pointer dicomIO = ImageIOType::New(); 

reader->SetImageIO( dicomIO );
typedef itk::GDCMSeriesFileNames NamesGeneratorType;
NamesGeneratorType::Pointer nameGenerator = NamesGeneratorType::New();

nameGenerator->SetUseSeriesDetails( true );
nameGenerator->AddSeriesRestriction("0008|0021" );  
nameGenerator->SetDirectory( folderDCM);

typedef std::vector< std::string >    SeriesIdContainer;    
const SeriesIdContainer & seriesUID = nameGenerator->GetSeriesUIDs();   
std::cout << seriesUID.size() << std::endl;
SeriesIdContainer::const_iterator seriesItr = seriesUID.begin();
SeriesIdContainer::const_iterator seriesEnd = seriesUID.end();
while( seriesItr != seriesEnd )
{
std::cout << seriesItr->c_str() << std::endl;
seriesItr++;
}
std::string seriesIdentifier;
seriesIdentifier = seriesUID.begin()->c_str();
std::cout << seriesIdentifier.c_str() << std::endl;

typedef std::vector< std::string >   FileNamesContainer;
FileNamesContainer fileNames; 
fileNames = nameGenerator->GetFileNames( seriesIdentifier ); 

reader->SetFileNames( fileNames );
try
{
reader->Update();
}
catch (itk::ExceptionObject &ex)
{
std::cout << ex << std::endl;
}

//------------------------------------------------------------------------
// ITK to VTK pipeline connection.
//------------------------------------------------------------------------

// Create the itk::VTKImageExport instance and connect it to the
// itk::CurvatureFlowImageFilter.
ImageExportType::Pointer exporter = ImageExportType::New();
exporter->SetInput(reader->GetOutput());

// Create the vtkImageImport and connect it to the
// itk::VTKImageExport instance.
vtkImageImport* importer = vtkImageImport::New();  
ConnectPipelines(exporter, importer);

//------------------------------------------------------------------------
// VTK pipeline.
//------------------------------------------------------------------------

this->imageViewer= vtkImageViewer2::New();
imageViewer->SetInput(importer->GetOutput());

// slice status message
//******same code *****//

// usage hint message
//******same code *****//

// create an interactor with our own style (inherit from vtkInteractorStyleImage)
// in order to catch mousewheel and key events
//******same code *****//

// add slice status message and usage hint message to the renderer
//******same code *****//

//to display the result: 
ui.qvtkWidget->SetRenderWindow(imageViewer->GetRenderWindow()); 
ui.qvtkWidget->GetRenderWindow()->GetInteractor()-   >SetInteractorStyle(myInteractorStyle); 
imageViewer->Render(); 
ui.qvtkWidget->update();
} 
```

可选：我的出口商和进口商如下：

```
template <typename ITK_Exporter, typename VTK_Importer>
void ConnectPipelines(ITK_Exporter exporter, VTK_Importer* importer)
{
importer->SetUpdateInformationCallback(exporter->GetUpdateInformationCallback());
importer->SetPipelineModifiedCallback(exporter->GetPipelineModifiedCallback());
importer->SetWholeExtentCallback(exporter->GetWholeExtentCallback());
importer->SetSpacingCallback(exporter->GetSpacingCallback());
importer->SetOriginCallback(exporter->GetOriginCallback());
importer->SetScalarTypeCallback(exporter->GetScalarTypeCallback());
importer->SetNumberOfComponentsCallback(exporter->GetNumberOfComponentsCallback());
importer->SetPropagateUpdateExtentCallback(exporter- >GetPropagateUpdateExtentCallback());
importer->SetUpdateDataCallback(exporter->GetUpdateDataCallback());
importer->SetDataExtentCallback(exporter->GetDataExtentCallback());
importer->SetBufferPointerCallback(exporter->GetBufferPointerCallback());
importer->SetCallbackUserData(exporter->GetCallbackUserData());
}
/**
* This function will connect the given vtkImageExport filter to
* the given itk::VTKImageImport filter.
*/
template <typename VTK_Exporter, typename ITK_Importer>
void ConnectPipelines(VTK_Exporter* exporter, ITK_Importer importer)
{
importer->SetUpdateInformationCallback(exporter->GetUpdateInformationCallback());
importer->SetPipelineModifiedCallback(exporter->GetPipelineModifiedCallback());
importer->SetWholeExtentCallback(exporter->GetWholeExtentCallback());
importer->SetSpacingCallback(exporter->GetSpacingCallback());
importer->SetOriginCallback(exporter->GetOriginCallback());
importer->SetScalarTypeCallback(exporter->GetScalarTypeCallback());
importer->SetNumberOfComponentsCallback(exporter->GetNumberOfComponentsCallback());
importer->SetPropagateUpdateExtentCallback(exporter->GetPropagateUpdateExtentCallback());
importer->SetUpdateDataCallback(exporter->GetUpdateDataCallback());
importer->SetDataExtentCallback(exporter->GetDataExtentCallback());
importer->SetBufferPointerCallback(exporter->GetBufferPointerCallback());
importer->SetCallbackUserData(exporter->GetCallbackUserData());
} 
```

可能ITK和VTK之间的Pipline有问题，请帮我解决这个问题，我花了两周的时间寻找解决方案但所有方法都失败了，也许还有另一种方法可以绑定ITK和VTK除了 ImageToVTKImageFilter 类。我指望你的帮助。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T11:19:20.570

在我用于转换的void`VTKImageExportBase::UpdateInformationCallbackFunction`函数中显示的同一点上，我遇到了同样的错误。`ImageToVTKImageFilter`我缺少的是在将 ITK 管道连接到 VTK 查看器之前对其进行更新。在`ITK to VTK pipeline connection`某种程度上，您的代码也缺少相同的东西。所以使用：

```
exporter->SetInput(reader->GetOutput());
exporter->Update(); 
```

然后走得更远。

# asp.net - 如何获取页面中的所有验证器？

> ID：16109618
> 
> 赞同：3
> 
> 时间：2013-04-19T16:45:56.780
> 
> 标签：asp.net

我认为 RequiredFieldValidators、CustomValidators 和所有其他验证器都将存在于 Controls 集合中。基本上我有一个用户控件，里面有许多验证器，我想掌握它们来做事。

Page.Validators 似乎返回了一个 IValidator 对象列表，这不是我想要的。

我在哪里可以获得用户控件中所有验证器的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:53:02.840

Page.Validators 集合是您最好的选择；所有的验证器都实现了 IValidator，然后是 BaseValidator，所以你可以用这个来做。由于验证器是一个控件，它的父引用跟踪将包含对它所在的用户控件的引用。它可能需要您执行以下操作：

```
if (validator.Parent.Parent.Parent.Parent is UserControl) { } 
```

但这是弄清楚这一点的唯一方法。因此，Page.Validators 的组合和检查父控件树是唯一的方法，除非您寻找验证器实现的特定验证组，这也是另一种方式（BaseValidator 的属性，所以你必须做一个类型检查和强制转换。

最后一个潜在的选择；您可以覆盖在每个控件添加时执行的 AdditionalControl，并检查控件是否是验证器，然后将该控件保存在本地集合中，例如：

```
private List<BaseValidator> _vals = ..;

protected overrides void AddedControl(Control control, int index) {
   if (control is BaseValidator)
     _vals.Add((BaseValidator)control);
} 
```

然后您就会知道哪些控件属于该用户控件。我已经使用自定义控件完成了此操作，而不是任何用户控件，因此可能无法像我提到的那样工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:22:41.617

由于您使用的是 ASP.NET 验证控件，因此您可能正在寻找验证摘要：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.validationssummary%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.validationsummary%28v=vs.100%29.aspx)

你可以用它来适应大多数使用场景，这是一个简单的例子：

[http://asp-net-example.blogspot.com/2008/10/validationssummary-example-how-to-use.html](http://asp-net-example.blogspot.com/2008/10/validationsummary-example-how-to-use.html)

或者，Page.Validators 将提供直接访问。

# android - 支持的最大图像尺寸是多少

> ID：16109619
> 
> 赞同：5
> 
> 时间：2013-04-19T16:45:58.503
> 
> 标签：android, performance, bitmap, android-imageview, bitmapfactory

由于在添加图像时我有很多这些（内存不足异常），我想知道位图对象支持的最大大小是多少，以及如何有效地管理它们。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T16:47:34.380

位图的最大大小因设备而异，具体取决于可用的堆空间。使用 Google Play 的任何设备至少需要 16 MB 的堆空间。

请记住，您的应用程序的其余部分也在同一个堆空间中运行，因此整个堆不适用于单个位图。

此外，位图的大小将根据颜色格式以及高度和宽度而有所不同。

最好的策略是只将屏幕大小所需的位图大小加载到内存中，而不是更大。

有关如何处理大型位图的详细信息，请参阅文档的[这一部分。](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# c# - 选择绘制的贝塞尔曲线的最佳方法是什么？

> ID：16109622
> 
> 赞同：0
> 
> 时间：2013-04-19T16:46:12.830
> 
> 标签：c#, bezier

我正在开发一个图形程序。我想知道将注意力集中在绘制的贝塞尔曲线上的最佳方法是什么。到目前为止，我已经实现了椭圆和矩形，并且很容易聚焦/选择它们（您只需要在其中单击）。将它添加到绘制曲线的最佳方法是什么？一旦选择了这条曲线，我想让 4 个矩形出现在贝塞尔曲线附近，但我不确定如何检测这条曲线的选择。 ![在此处输入图像描述](https://i.stack.imgur.com/Le7vL.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:15:26.350

如果您使用 System.Windows.Shapes.Path() 绘制贝塞尔曲线，您可以使用标准 UI 事件，例如

```
myPath.MouseEnter += new MouseEventHandler(myPath_MouseEnter); 
```

等等

# c# - C# 类对象重置？

> ID：16109624
> 
> 赞同：0
> 
> 时间：2013-04-19T16:46:18.343
> 
> 标签：c#

我想我可能知道我的问题是什么，但我不知道如何解决它。我试着google了一下，但是没有...

假设我有 3 节课；菜单、商店和播放器。当您从商店购买东西时，它会被添加到玩家类的库存中，然后您返回主菜单。然后，您选择查看您的库存。

我已经完成了所有这些工作，但是当我选择在主菜单中查看我的库存时，里面什么都没有。我知道它有效，因为我在购买商品后已在商店打印了我的库存。

我认为这是因为我在菜单和商店类中创建了一个新对象？

菜单.cs

```
Shop shop = new Shop();
Player player = new Player(); 
```

商店.cs

```
Menu menu = new Menu();
Player player = new Player(); 
```

我认为问题是当我在用户购买商品后将他们送回菜单时，它会创建一个新的 Player 对象，将他们的所有变量设置回默认值？

正如我边做边学一样，我对类和对象了解不多。但是有没有办法让它在你返回菜单后不会自行重置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:52:48.703

Yes, when you do `new Anything()`, it's a fresh new instance with default options and values.

One way to solve it is to pass the `Player` instance to the `Shop` when you buy. (Shop doesn't need to have a player declared inside it, just need to use an existing player). And in that `Player` you passed to the `Shop`, you add the things bought to the inventory.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:54:45.437

与其在每个类中存储 Player 对象，不如在某个重要的类（例如主菜单？主类？）中只创建一个 Player 对象（即`new Player()`只使用一次）。

然后，要从您的 Shop 和 Menu 访问此 Player，请将其作为构造函数参数传入：

```
private Player player;

public Shop(Player player, OtherStuff here) {
    this.player = player;
} 
```

# r - 选择不同data.frame列的子集

> ID：16109625
> 
> 赞同：3
> 
> 时间：2013-04-19T16:46:18.603
> 
> 标签：r, dataframe, plyr

我想从每一列中选择一个不同的数据框子集，然后像这样进行平均

```
per <- data.frame(Apocal=c(10,1,2,3,4,0,6),Aporos=c(0,2,1,3,0,5,6),Euker=c(0,3,5,7,0,0,0), fecha=c(1,1,2,2,2,3,3))

temp <-with(per, per[Apocal>0,])
require(plyr)
temp <- ddply(temp, .(fecha), summarise, Apocal = mean(Apocal))

temp <-with(per, per[Aporos>0,])
temp <- ddply(temp, .(fecha), summarise, Aporos = mean(Aporos))

... 
```

并重复每一列，除了fecha，有没有办法用一个函数或其他东西来自动化这个？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:19:56.603

与`aggregate`：

```
aggregate(. ~ fecha, data = per, function(x)mean(x[x > 0]))
#   fecha Apocal Aporos Euker
# 1     1    5.5    2.0     3
# 2     2    3.0    2.0     6
# 3     3    6.0    5.5   NaN 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:56:01.560

如果您的功能是`mean`您可以`colMeans`正常使用该功能。它计算所有列的平均值（按列表示）。但是由于您需要在删除每列的 0 个条目*后*计算平均值，因此可以使用`colSums`如下：

```
# x gets all columns grouped by `fecha`.
ddply(per, .(fecha), function(x) colSums(x[, -4])/colSums(x[, -4] != 0))
#   fecha Apocal Aporos Euker
# 1     1    5.5    2.0     3
# 2     2    3.0    2.0     6
# 3     3    6.0    5.5   NaN 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T17:23:06.613

```
pmean <- function(x,byvar){
  y=x[,-1*byvar]
  colSums(y*(y>0))/colSums(y>0)
}

ddply(per, .(fecha), function(x) pmean(x,4)) 
```

Arun 解决方案的修改版本。

# regex - Nutch 正则表达式不会按照我想要的方式爬行

> ID：16109633
> 
> 赞同：2
> 
> 时间：2013-04-19T16:46:49.753
> 
> 标签：regex, search-engine, nutch

好的，我已经问过了，但我想我并没有按照 stackoverflow 期望的方式问它。希望这次我能得到更多的运气和答案。

我正在尝试运行 nutch 来抓取此站点：[http ://www.tigerdirect.com/](http://www.tigerdirect.com/)

我希望它抓取该网站和所有子链接。

问题是它不起作用。在我的 reg-ex 文件中，我尝试了几件事，但都没有奏效：

```
+^http://([a-z0-9]*\.)*tigerdirect.com/

+^http://tigerdirect.com/([a-z0-9]*\.)* 
```

我的 urls.txt 是：

```
http://tigerdirect.com 
```

基本上我想要完成的是抓取他们网站上的所有产品页面，这样我就可以创建一个电子产品的搜索引擎（我正在使用 solr）。最终，我也想爬取 bestbuy.com、newegg.com 和其他网站。

顺便说一句，我从这里遵循了教程：[http](http://wiki.apache.org/nutch/NutchTutorial) ://wiki.apache.org/nutch/NutchTutorial并且我正在使用会话 3.3 中提到的脚本（在修复了它的错误之后）。

我有 java、android 和 bash 的背景，所以这对我来说有点新。5年前我曾经在perl中做正则表达式，但这一切都被遗忘了。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T11:07:03.080

根据您的评论，我看到您以前爬过某些东西，这就是您的 Nutch 开始爬取维基百科的原因。

当您使用 Nutch 抓取某些内容时，它会在表中记录一些元数据（如果您使用 Hbase，它是一个名为 pages 的表）当您完成爬网并开始一个新的爬网时，该表会被扫描，如果有一条记录包含元数据，则表示“这条记录可以再次获取，因为下一个获取时间已过” Nutch 开始获取该网址以及您的新网址。

因此，如果您只想在系统中抓取[http://www.tigerdirect.com/](http://www.tigerdirect.com/)，则必须先清理该表。如果您使用 Hbase 启动 shell：

```
./bin/hbase shell 
```

并禁用表：

```
disable 'webpage' 
```

最后放下它：

```
drop 'webpage' 
```

我可以截断该表但将其删除。

接下来是将其放入您的seed.txt：

```
http://www.tigerdirect.com/ 
```

打开位于以下位置的 regex-urlfilter.txt：

```
nutch/runtime/local/conf 
```

将该行写入其中：

```
+^http://([a-z0-9]*\.)*www.tigerdirect.com/([a-z0-9]*\.)* 
```

你会放那条线而不是`+.`

我已经表示要抓取tigerdirect的子域，这取决于你。

之后，您可以将其发送到 solr 以进行索引并对其进行搜索。我已经尝试过并且可以正常工作，但是您在 Nutch 方面可能会遇到一些错误，但这是另一个要讨论的话题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:35:44.943

您在两个正则表达式的末尾都有一个 / ，但您的 URL 没有。

`http://tigerdirect.com/`会匹配，`http://tigerdirect.com`不会。

`+^http://tigerdirect.com/([a-z0-9]*\.)*` 尝试在括号内移动那个拖尾斜线 `+^http://tigerdirect.com(/[a-z0-9]*\.)*`

# foursquare - Foursquare 和结果限制。任何想法如何取回所有结果？

> ID：16109634
> 
> 赞同：0
> 
> 时间：2013-04-19T16:46:52.583
> 
> 标签：foursquare

我看到foursquare api有50个结果限制，这让我有点担心。我的问题是这个

“用户会扫描一件物品，它会找到距离他们 x 公里内有该物品的所有商店”。

现在在杂货等某些类别中，我认为 50 个结果限制不会太糟糕，因为即使我将搜索区域提高到最大（50 公里），我也无法真正想到有 50 个杂货店的区域。

但是，如果该物品是一件衣服，而您在一个大商场里怎么办。我认为在这种情况下可以达到 50 的限制。

我会得到 50 个结果，然后扫描我的数据库以查看该商店是否包含该服装。然而，什么都没有回来，但实际上，如果我可以让 51 家商店退货，那么第 51 家商店就会拥有它。

有人有什么想法可以防止这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:54:32.753

是的，有一种方法可以解决这个问题，即运行多个搜索，在同一大区域内指定稍微不同的位置。

之前已经回答了这个问题：[如何获得更多位置？](https://stackoverflow.com/questions/7303309/how-do-i-get-more-locations?answertab=active#tab-top)

# android - 如何在 AOSP 中的启动器之前添加我的应用程序

> ID：16109639
> 
> 赞同：1
> 
> 时间：2013-04-19T16:47:16.660
> 
> 标签：android, android-source

如何在 AOSP 中修改启动顺序：在启动 Launcher2 应用程序之前，我将添加自定义应用程序（注册应用程序 - 登录名和密码，将发送到服务器进行授权）。我怎样才能做到这一点？我知道 ActivityManager 管理要启动的 Activity，但我不知道应该在哪里启动我的应用程序。我需要在 android 系统启动完成后立即启动我的应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T00:53:45.403

在 ICS 中，有一个名为`startHomeActivityLocked`in的方法`ActivityManagerService`。在该方法中，`ActivityManagerService`将通过发送一个`android.intent.category.HOME`意图来启动 Launcher2 应用程序。

```
boolean startHomeActivityLocked(int userId) {
    ....
    intent.setComponent(mTopComponent);
        if (mFactoryTest != SystemServer.FACTORY_TEST_LOW_LEVEL) {
            intent.addCategory(Intent.CATEGORY_HOME);
        }
        ActivityInfo aInfo =
            resolveActivityInfo(intent, STOCK_PM_FLAGS, userId);
        if (aInfo != null) {
            intent.setComponent(new ComponentName(
                    aInfo.applicationInfo.packageName, aInfo.name));
            // Don't do this if the home app is currently being
            // instrumented.
            aInfo = new ActivityInfo(aInfo);
            aInfo.applicationInfo = getAppInfoForUser(aInfo.applicationInfo, userId);
            ProcessRecord app = getProcessRecordLocked(aInfo.processName,
                    aInfo.applicationInfo.uid);
            if (app == null || app.instrumentationClass == null) {
                intent.setFlags(intent.getFlags() | Intent.FLAG_ACTIVITY_NEW_TASK);
                mMainStack.startActivityLocked(null, intent, null, aInfo,
                        null, null, 0, 0, 0, 0, null, false, null);
            }
        }
} 
```

因此，您可以在该方法中或该方法的调用站点之前添加您的代码。特别是，您可以替换意图以`ActivityManagerService`启动您的应用程序，而不是启动器。当您的应用程序完成身份验证后，您可以让您的应用程序向 Launcher2 发送一个意图。

在姜饼中，方法签名是`boolean startHomeActivityLocked()`因为 Android 在此构建中不支持多用户。

# jquery - 带有 jquery 的关键帧在歌剧中不起作用

> ID：16109641
> 
> 赞同：0
> 
> 时间：2013-04-19T16:47:21.727
> 
> 标签：jquery, opera, css-animations

```
$.fn.addKeyframe([{
        name: "spinrd",
        "from": tr + ':rotate(' + (rX1 + 0) + 'deg);',
        "to": tr + ':rotate(' + (rX1 + 360) + 'deg);',
    }]); 
```

我有这个代码的序列，它在 Firefox chrome 和 ie10 中运行良好，而在 opera 中不运行。

这是 jquery 插件[https://github.com/krazyjakee/jQuery-Keyframes](https://github.com/krazyjakee/jQuery-Keyframes)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T16:19:10.890

查看关键帧 jquery 插件的代码可能是前缀无法正常工作，因为该插件使用嗅探。我用 Modernizr 解决了不同情况下的运输问题。

# linux - 错误：依赖性不可满足：debian 的 libqt4-network (>= 4:4.8.0)

> ID：16109642
> 
> 赞同：1
> 
> 时间：2013-04-19T16:47:26.267
> 
> 标签：linux, debian, skype, deb

我正在尝试使用**skype-debian_4.1.0.20-1_i386.deb**包在 Debian 中安装 Skype，但它没有安装。它显示此错误消息：**错误：依赖项不可满足：libqt4-network (>= 4:4.8.0) for debian**。

所以我下载**了 libqtscript4-network_0.2.0-1_i386.deb**并安装了该软件包，但它仍然抛出**Error: Dependency is not satisfiable: libqt4-network (>= 4:4.8.0) for debian**。

我的系统内核版本是**2.6.32-5-686**。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T01:25:11.353

这里有一篇关于如何修复此错误的优秀文章：

[http://www.nairabytes.net/internet/how-to-fix-error-dependency-is-not-satisfiable-libqt4-network-4-4-8-0-while-installing-skype-on-debian- 6-0-6-挤压](http://www.nairabytes.net/internet/how-to-fix-error-dependency-is-not-satisfiable-libqt4-network-4-4-8-0-while-installing-skype-on-debian-6-0-6-squeeze)。

总结上述页面上提出的问题的解决方案，只需安装 Skype for Ubuntu 而不是 Skype for Debian。（我在我的机器上试过这个方法，效果很好。）

# javascript - javascript函数计算两个日期的差异，返回短格式，四舍五入为单个单位

> ID：16109647
> 
> 赞同：1
> 
> 时间：2013-04-19T16:47:38.893
> 
> 标签：javascript, function, math, datetime, datediff

我在标题的措辞上苦苦挣扎，但基本上我想要一个可以提供两个日期的函数，它会输出如下内容：如果结果是 15 天，则输出“2w”，如果结果为 13 个月，则输出“1y”，如果结果为“1m”，则输出如下是 4 或 5 周。最好减少到一小时……但最少 1 天。

我发现了一个类似的 SO 问题，但它是针对 PHP 的，无论如何都不完整：[如何计算两天之间的差异作为格式化字符串？](https://stackoverflow.com/questions/8993067/how-to-calculate-the-difference-between-two-days-as-a-formatted-string)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:58:40.647

有许多 javascript 日期库可以满足您的所有需求，甚至更多。这是使用[XDate的示例](http://arshaw.com/xdate/)

```
<div id="result"><div/>

var now = new XDate();

var then = new XDate(2013, 04, 01, 0, 0, 0, 0);

document.getElementById("result").textContent = now.diffWeeks(then).toFixed(1) + " Weeks"; 
```

可用的[jsfiddle](http://jsfiddle.net/Xotic750/WtAQB/)

这是[Moments.js](http://momentjs.com/)

```
<div id="result"><div/>

var then = moment("Dec 25, 1995");

document.getElementById("result").textContent = moment(then, "YYYYMMDD").fromNow(); 
```

也可以在[jsfiddle上使用](http://jsfiddle.net/Xotic750/yaVZP/)

# heroku - 如何使用 Heroku Scheluder Standard 自动备份？

> ID：16109648
> 
> 赞同：0
> 
> 时间：2013-04-19T16:47:40.317
> 
> 标签：heroku, scheduled-tasks, scheduling, add-on

正如你所说，我有一个在 Heroku 中运行的应用程序，最近我安装了 Heroku Scheluder Standard 插件来自动化`heroku pgbackups:capture --expire --app my-app`，但是已经 3 天了，它并没有进行备份，所以......</p>

我怎样才能让它做他们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T13:40:09.713

您可能会发现[`pgbackups`](https://addons.heroku.com/pgbackups)插件对您有用，具体取决于您希望备份发生的频率。`heroku addons:add pgbackups:auto-month`将配置适当的插件。

# linux - Bash 数组和负下标，是还是不是？

> ID：16109652
> 
> 赞同：15
> 
> 时间：2013-04-19T16:47:50.290
> 
> 标签：linux, arrays, bash, unix, gnu

[GNU bash 手册](http://www.gnu.org/software/bash/manual/html_node/Arrays.html)告诉我

> 如果使用语法分配了任何变量，则会自动创建索引数组
> 
> ```
> name[subscript]=value 
> ```
> 
> 下标被视为必须计算为数字的算术表达式。如果下标计算为小于零的数字，则将其用作大于数组最大索引的 1 的偏移量（因此 -1 的下标指的是数组的最后一个元素）。

所以我想我会尝试一下并得到以下结果：

```
$ muh=(1 4 'a' 'bleh' 2)
$ echo $muh
1
$ echo ${muh[*]}
1 4 a bleh 2    # so far so good so now I'll try a negative ...
$ echo ${muh[-1]}
-bash: muh: bad array subscript  # didn't go as planned! 
```

是我做错了什么，还是网站错了，还是 gnu bash 与我在 CentOS 下运行的 bash 不同？谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-19T16:54:40.220

如果你只想要最后一个元素

```
$ echo ${muh[*]: -1}
2 
```

如果你想在最后一个元素旁边

```
$ echo ${muh[*]: -2:1}
bleh 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-19T17:13:09.417

根据[Greg Wooledge 的 wiki](http://mywiki.wooledge.org/BashFAQ/061)（链接到 bash 更改日志），负索引语法在 4.2 alpha 版本中被添加到 bash。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T16:59:18.260

如果您执行`man bash`有关数组的部分，则不会列出此行为。它可能是 bash 中的新东西（gnu？）。

在 CentOS 6.3（bash 4.1.2）中对我来说失败了

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-21T13:49:14.770

Bash 4.2 之前的版本（就像现在 Mac 上的默认版本一样）不支持负下标。除了接受的答案中使用的“子字符串扩展”之外，一个可能更干净的解决方法是从括号内的数组开始计算所需的索引：

```
$ array=(one two three)
$ echo "${array[${#array[@]}-1]}"
three 
```

使用这种方法，您可以将其他参数扩展操作打包到术语中，例如“删除匹配前缀模式” `th`：

```
$ echo "${array[${#array[@]}-1]#th}"
ree 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-19T12:34:36.680

负下标在我的 Ubuntu 14.04 / GNU bash 版本 4.3.11(1) 的计算机上非常适合我，但是它返回：

```
line 46: [-1]: bad array subscript 
```

当我尝试在 4.2.46(1) 上运行相同的脚本时。我

# ember.js - linkTo 和操作助手默认事件

> ID：16109653
> 
> 赞同：4
> 
> 时间：2013-04-19T16:47:55.710
> 
> 标签：ember.js

有没有办法替换触发 linkTo 和操作助手的默认事件？

我想响应 mousedown 而不是单击...

这是为了让界面工作得更快一点。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T08:18:09.537

**动作助手：**

答案可以在官方指南中找到：
指定事件类型：[http ://emberjs.com/guides/templates/actions/](http://emberjs.com/guides/templates/actions/)

```
<p>
  <button {{action "select" post on="mouseUp"}}>✓&lt;/button>
  {{post.title}}
</p> 
```

可用事件列表：[http ://emberjs.com/guides/understanding-ember/the-view-layer/#toc_adding-new-events](http://emberjs.com/guides/understanding-ember/the-view-layer/#toc_adding-new-events)

* * *

**LinkTo 助手：**

由于`{{linkTo}}`没有`on`类似的选项`{{action}}`，这个助手可以通过定义`eventManager`属性来模拟相同的结果。

```
Ember.Handlebars.registerHelper('linkAction', function (name) {
    var options = [].slice.call(arguments, -1)[0];
    var params = [].slice.call(arguments, 1, -1);

    var hash = options.hash;

    hash.namedRoute = name;
    hash.currentWhen = hash.currentWhen || name;

    hash.parameters = {
        context: this,
        options: options,
        params: params
    };

    var LinkView = Ember.LinkView.extend({
        didInsertElement: function () {
            this.eventManager = Ember.Object.create({});
            this.eventManager.click = function () {
                return false;
            };
            this.eventManager[hash.on] = function (e, v) {
                Ember.LinkView.prototype.click.call(v, e);
            }
        }
    })

    return Ember.Handlebars.helpers.view.call(this, LinkView, options);
}); 
```

如何使用：

```
{{#linkAction route on="mouseEnter"}}Text{{/linkAction}} 
```

演示：http: [//jsfiddle.net/indream/mKVU8/1/](http://jsfiddle.net/indream/mKVU8/1/)

参考：[动作助手](https://github.com/emberjs/ember.js/blob/v1.0.0-rc.3/packages/ember-routing/lib/helpers/action.js) [LinkTo 助手](https://github.com/emberjs/ember.js/blob/v1.0.0-rc.3/packages/ember-routing/lib/helpers/link_to.js)

# google-visualization - 我可以在页面加载后修改 Google 图表的元素吗？具体来说，颜色

> ID：16109661
> 
> 赞同：0
> 
> 时间：2013-04-19T16:48:22.287
> 
> 标签：google-visualization

我正在使用 Google Charts 的 Visualization API 和柱形图包。我可以使用我想要的数据生成图表，但是我可以在页面加载后修改图表的某些部分吗？具体来说，我想改变一列的颜色。我已经通过在 Chrome 的 Element 面板工具中编辑 DOM 来做到这一点，但是有没有办法可以将它实际编码到我的页面中，还是我不走运？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:40:51.430

我也有类似的挑战。就我而言，我需要为条形图中的每个条形使用不同的颜色，这是 vis api 不支持的。

我最终得到了这个（使用jquery，但没有理由不能只使用本机dom函数来完成）statusCols btw只是一个html颜色数组......

```
 function colorBars(){
  $("#masterstatus g rect[fill='#3366cc']").each(function(){$(this).attr("bar", 'true')})
  $("#masterstatus g rect[bar='true']").each(function(barNo){
   $(this).attr("fill", statusCols[barNo]);
  });
 } 
```

秘密（听起来您已经发现）在于识别要更改的 dom 元素，这就是 $("#masterstatus g rect[fill='#3366cc']") 位 - 我只是在默认颜色并遍历它们，在您的情况下，您想要绘制一个序数（例如集合中的第三个）

希望有帮助。

其实我更希望其他人想出更好的方法......

# jquery - 向 jqModal 添加触发器时未捕获 TypeError

> ID：16109667
> 
> 赞同：0
> 
> 时间：2013-04-19T16:48:37.607
> 
> 标签：jquery, jqmodal

我有一个 jqModal 对话框：

```
function initOrderIdCardDialog() {
    $('#orderIdCardDialog').jqm({
        trigger: '#orderIdCardButton',
        overlay: 85, /* 0-100 (int) : 0 is off/transparent, 100 is opaque */
        overlayClass: 'dialogOverlay',
        closeClass:'cancelOrderIDCard',
        onShow: showDialog,
        onHide: hideDialog,
        toTop: true
    });
} 
```

在一些 html 之后调用：

```
<a href="#" class="sideBtn" id="orderIdCardButton">Order ID Card</a>
...
<div id="orderIdCardDialog" class="dialog">
    ...
</div>
<script type="text/javascript" charset="utf-8">
    initOrderIdCardDialog();
</script> 
```

当页面加载时，jqModal.js 中会抛出异常：

```
Uncaught TypeError: undefined is not a function 
```

在 jqModal.js 的第 34 行，紧随其后：

```
$.fn.jqmAddTrigger=function(e){return hs(this,e,'jqmShow');}; 
```

因此，单击链接不会显示对话框。如果我将 jQuery 选择器替换为触发器的空字符串，则不会引发异常。我有点困惑，因为[jqModal 的网站](http://dev.iceburg.net/jquery/jqModal/#how)说 jQuery 选择器是有效的。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:17:16.573

每个[anpsmn](https://stackoverflow.com/users/473016/anpsmn)：

> jQuery 的版本是多少？它不适用于 1.9+。见小提琴。在小提琴中将其更改为 1.8.3 即可。

# java - TableLayout 中以编程方式创建的嵌套 TableLayout 的大小与父级不匹配

> ID：16109672
> 
> 赞同：0
> 
> 时间：2013-04-19T16:49:07.953
> 
> 标签：java, android, nested, android-tablelayout

我有一个 ScrollView，其中有一个 TableLayout，我用 TableRows 和包含 TableRows 的 TableLayouts 动态填充它。

我希望嵌套 TableLayouts 的 TableRows 以与其他 TableRows 完全相同的方式显示。

目前我得到这个结果： ![在此处输入图像描述](https://i.stack.imgur.com/9rGx9.png)

嵌套的 TableLayout 进入了红圈。例如，带有复选框的第一个 tableRow 与第三个 tableRow 完全相同，但显示不同。可能主 Tablelayout 对其中的其他容器布局进行了不同的处理。我没有在 TableRows 中使用额外的布局。

当我在主 TableLayout 和嵌套 TableLayout 中添加一个子项时，我包含了一个 layoutParameter，但没有任何改变。

```
table.addView(row,new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT,1f)); 
```

可能我必须添加一个不同的参数，但直到现在我找不到有用的东西。有任何想法吗？

PS如果我的问题不够清楚，请告诉我需要什么样的附加信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:37:02.357

我设法找到了解决方法。通过设置嵌套的 tableLayout

```
table.setColumnStretchable(0, true); 
```

嵌套表格伸展并填满屏幕。

但很明显 tableLayout 不是用于此类任务的正确 View。所以我必须调查更多关于在 ListView 中动态扩展视图的事情。我会将问题设置为已解决（现在不能这样做，我必须等待 2 天..）

# html - 这种元素操作是如何实现的？

> ID：16109674
> 
> 赞同：4
> 
> 时间：2013-04-19T16:49:10.137
> 
> 标签：html, google-chrome, dom-manipulation

在 Google Chrome 中，您可以使用以下元素的快捷方式`contenteditable='true'`：

`CTRL + B`：将突出显示的文本设置为粗体，例如

幕后发生的事情是，`<b>`标签被附加或删除到标记的短语，不管是什么字。

这是怎么做到的？“他们”从哪里知道，元素是否已经设置为粗体，以及主要问题，它位于哪里？

我问这个是因为我无法摆脱今天早些时候提到的这个问题：

[获取 .html() 和 .text() 中突出显示的文本位置](https://stackoverflow.com/questions/16103157/get-the-highlighted-text-position-in-html-and-text)

**编辑：**

我尝试了以下

[富文本编辑](https://developer.mozilla.org/de/docs/Rich-Text_Editing_in_Mozilla#Executing_Commands)

但首先，它不会正确加载，但这应该是我自己的失败造成的。其次，出于学习目的，我想实现我自己的缩小版本。

因为我真的在 JavaScript 中，我无法弄清楚这是如何完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T09:54:19.167

**[document.getSelection() / window.getSelection()](https://developer.mozilla.org/en-US/docs/DOM/window.getSelection)**应该适用于您想对所选内容执行的任何操作。元素样式被继承。如何跟踪这取决于 CSS 实现。查看**[Chrome 的源代码](http://dev.chromium.org/developers/how-tos/get-the-code)**可能会有很大帮助。

# c++ - CancelIoEx : 函数指针 typedef

> ID：16109681
> 
> 赞同：2
> 
> 时间：2013-04-19T16:49:40.517
> 
> 标签：c++, function, pointers, typedef, cancelio

以下代码是从 MS Async Filter 复制而来的。假设以下代码正在调用 CancelIo 或 CancelIoEx。无论如何，我看不到在哪里调用 CancelIoEx。假设 typedef 代表 CancelIoEx 但从未被调用。这条线到底在`bResult = (pfnCancelIoEx)(m_hFile, NULL);`做什么？

```
// Cancel: Cancels pending I/O requests.
HRESULT CFileStream::Cancel()
{
    CAutoLock lock(&m_CritSec);

    // Use CancelIoEx if available, otherwise use CancelIo.

    typedef BOOL (*CANCELIOEXPROC)(HANDLE hFile, LPOVERLAPPED lpOverlapped);

    BOOL bResult = 0;
    CANCELIOEXPROC pfnCancelIoEx = NULL;

    HMODULE hKernel32 = LoadLibrary(L"Kernel32.dll");

    if (hKernel32){

        //propably bad code !!! Take Care.
        bResult = (pfnCancelIoEx)(m_hFile, NULL);

        FreeLibrary(hKernel32);
    }
    else {

        bResult = CancelIo(m_hFile);
    }

    if (!bResult) {

        return HRESULT_FROM_WIN32(GetLastError());
    }
    return S_OK;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:42:56.303

假设这是所有代码，它有一个严重的错误。这个：

```
CANCELIOEXPROC pfnCancelIoEx = NULL; 
```

定义`pfnCancelIoEx`为指向其签名匹配的函数的指针`CancelIoEx`。`CancelIoEx`指针被初始化为空值，明显的意图是稍后指向它。

该函数在 中定义`Kernel32.dll`，因此加载它是合乎逻辑的下一步。如果成功，则代码*应继续*执行以下操作：

```
pfnCancelIoEx = GetProcAddress(hKernel32, "CancelIoEx"); 
```

然后它应该检查结果。但是，*它并没有这样做。*

接下来，在这一行：

```
bResult = (pfnCancelIoEx)(m_hFile, NULL); 
```

它试图调用 指向的函数`pfnCancelIoEx`。但是，这个指针永远不会改变它的初始空值，所以这将尝试取消引用空指针，导致未定义的行为并可能崩溃。

# ios - EASession 的 NSOutputStream 停止向 EAAccessory 发送数据

> ID：16109686
> 
> 赞同：0
> 
> 时间：2013-04-19T16:49:45.353
> 
> 标签：ios, cocoa-touch, nsoutputstream, eaaccessory

我有一个项目，它连接到外部附件并与 iOS 应用程序进行少量数据通信。我能够像苹果在他们的 EADemo 参考代码中那样设置会话和流，并且一切似乎都运行良好。

我遇到的问题是，在使用该应用程序的随机时间后，输出流停止工作，但输入流仍然运行良好。我在每次写入尝试之前检查以确保 hasSpaceAvailable 为真，当我读回写入的字节数时，一切看起来都是正确的。此外，查看运行循环并不表示工作和非工作之间有任何区别，并且流状态仍然显示为打开。

我能看到的唯一导致这种情况的原因是我的附件没有连续确认应用程序的一些写入尝试，然后它就中断了。

我怎样才能检测到我处于这种状态，我该如何解决？

```
 // low level write method - write data to the accessory while there is space available and data to write
    - (void)_writeData {
        while (([[_session outputStream] hasSpaceAvailable]) && ([_dataToWrite length] > 0))
        {

            NSInteger bytesWritten = [[_session outputStream] write:[_dataToWrite bytes] maxLength:[_dataToWrite length]];

            if (bytesWritten == -1)
            {
                NSLog(@"write error");
                break;
            }
            else if (bytesWritten > 0)
            {
                [_dataToWrite replaceBytesInRange:NSMakeRange(0, bytesWritten) withBytes:NULL length:0];
            }
        }
    }

    // low level read method - read data while there is data and space available in the input buffer
    - (void)_readData {
        NSLog(@"reading data to buffer");
    #define EAD_INPUT_BUFFER_SIZE 128
        uint8_t buf[EAD_INPUT_BUFFER_SIZE];
        while ([[_session inputStream] hasBytesAvailable])
        {
            NSInteger bytesRead = [[_session inputStream] read:buf maxLength:EAD_INPUT_BUFFER_SIZE];
            if (_dataToRead == nil) {
                _dataToRead = [[NSMutableData alloc] init];
            }
            [_dataToRead appendBytes:(void *)buf length:bytesRead];
        }

        [[NSNotificationCenter defaultCenter] postNotificationName:EASessionDataReceivedNotification object:self userInfo:nil];
    }

    // high level write data method
    - (void)writeData:(NSData *)data
    {
     //   NSLog(@"writing data to buffer");
        if (_dataToWrite == nil) {
            _dataToWrite = [[NSMutableData alloc] init];
        }

        [_dataToWrite appendData:data];
        [self _writeData];

    }

// high level read method
- (NSData *)readData:(NSUInteger)bytesToRead
{
    NSLog(@"reading data");
    NSData *data = nil;
    if ([_dataToRead length] >= bytesToRead) {
        NSRange range = NSMakeRange(0, bytesToRead);
        data = [_dataToRead subdataWithRange:range];
        [_dataToRead replaceBytesInRange:range withBytes:NULL length:0];
    }
    return data;
}

    - (BOOL)openSession
    {
         NSLog(@"openSession");
        [_accessory setDelegate:self];

        if(_session){
            [self closeSession];
        }

        _session = [[EASession alloc] initWithAccessory:_accessory forProtocol:_protocolString];

        if (_session)
        {
            _runLoop = [NSRunLoop currentRunLoop];

            [[_session inputStream] setDelegate:self];
            [[_session inputStream] scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
            [[_session inputStream] open];

            [[_session outputStream] setDelegate:self];
            [[_session outputStream] scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
            [[_session outputStream] open];
            NSLog(@"creating session succeeded!");
        }
        else
        {
            NSLog(@"creating session failed!");
        }

        return (_session != nil);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T13:47:25.173

我想我可能会遇到同样的问题。我有一个蓝牙连接的配件，当我测试范围时，我经常会遇到与您在问题中描述的完全相同的症状。

但是如何检测到问题是由附件未能 ACK 数据引起的呢？

我猜在我的情况下，附件正在发送 ACK，但是因为我处于蓝牙范围的边缘，所以我的手机永远不会收到 ACK。

现在我最好的选择是尝试在APP中检测情况。在我的情况下，我可以这样做，因为如果附件没有从手机接收任何数据，它将重新发送相同的包。因此，如果我多次看到从附件传输的相同数据，我将断开连接并要求用户靠近附件，然后重新连接。

# html - 在 flexbox 容器 div 中覆盖/悬停一个 div

> ID：16109687
> 
> 赞同：15
> 
> 时间：2013-04-19T16:49:46.970
> 
> 标签：html, css, overlay, flexbox

我正在尝试覆盖一个会在 flexbox 容器中浮动的 div。

标头是一个 flexbox 容器，容器中有 3 个 flexbox div。我想覆盖其他三个 div 但仍被限制在 .header flexbox 容器 div 中的覆盖。

我在 stackoverflow 和其他地方尝试了多种方法，但是在与 flexbox 结合使用时如何解决覆盖或分层的解决方案。

感谢您的任何建议！

链接到以下的jsfiddle：[链接](http://jsfiddle.net/karlgo/UHECE/)

HTML：

```
<div class="header">
    <div class="headerLeft">Left</div>
    <div class="headerMiddle">Middle</div>
    <div class="headerRight">Right</div>
    <div class="overlay">Overlay</div>
</div> 
```

CSS：

```
.header {
    border: 3px solid orange;
    width: 100%;
    display: -webkit-flex;
    display: flex;
    z-index: 0;
}

.headerLeft {
    border: 2px solid chartreuse;
    -webkit-flex: 1;
    flex: 1;
    z-index: 1;
}
.headerMiddle {
    border: 2px solid darkorchid;
    -webkit-flex: 1;
    flex: 1;
    z-index: 1;
}
.headerRight {
    border: 2px solid darkorange;
    -webkit-flex: 1;
    flex: 1;
    z-index: 1;
}

.overlay {
    border: 2px solid green;
    z-index: 10;
    background: rgba(0,0,0,0.3);
} 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-19T19:24:59.437

查看所有注释掉的代码，您在 flex 容器上的相对定位上处于正确的轨道上。您只需要绝对定位您的叠加元素。

[http://jsfiddle.net/UHECE/4/](http://jsfiddle.net/UHECE/4/)

添加/取消注释这些样式：

```
.header {
    position: relative;
}

.overlay {
    position: absolute;
    left: 0; top: 0; right: 0; bottom: 0;
} 
```

# jquery-ui - 如何在 KnockoutJS 中设置 JQuery-UI 日期选择器自定义绑定的格式？

> ID：16109692
> 
> 赞同：0
> 
> 时间：2013-04-19T16:50:12.690
> 
> 标签：jquery-ui, date, knockout.js, format, iso8601

我正在尝试将 HTML 输入元素与 ISO 8601 格式的日期绑定，并且需要以该`'dd/mm/yyyy'`格式显示。

当日期选择器是 KnockoutJS 中的自定义绑定时，如何指定该格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:53:40.647

如果您有[将 JQuery DatePicker 集成到 KnockoutJS 中的正确绑定处理程序](https://stackoverflow.com/q/6612705/866172)，则所有选项都应放在“datepickerOptions”绑定中，如下所示：

```
<span data-bind="datepicker: myDate, 
                 datepickerOptions: { 'dateFormat': 'dd/mm/yy' }"></span> 
```

此外，如果您要在多个位置使用此格式，您可能需要考虑将此日期格式字符串放在视图模型中的可观察属性中，然后您可以像这样使用它：

```
<span data-bind="datepicker: myDate, 
                 datepickerOptions: { 'dateFormat': $root.config.dateFormat }"></span> 
```

...这意味着格式字符串`config.dateFormat`从根开始绑定在属性中。

# django - 在 git push 上强制重新创建 Heroku slug

> ID：16109699
> 
> 赞同：3
> 
> 时间：2013-04-19T16:50:57.897
> 
> 标签：django, heroku, pip, slug, requirements.txt

我已经在 Heroku 上托管了一个 Django 应用程序，到目前为止它运行良好。我现在对 requirements.txt 文件进行了一些更改，但是当我进行 git push 时，感觉它们没有正确安装在 Heroku 上。日志输出显示了一些要求的安装，但不是全部。我猜蛞蝓不会被重新创建，而是刚刚更新。有没有办法强制重新创建完整的蛞蝓？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:00:24.497

这个插件[https://github.com/lstoll/heroku-repo](https://github.com/lstoll/heroku-repo)将允许你这样做。只需安装并运行`heroku repo:rebuild -a appname`

# android - "Pausing" my app works but does not work the way I want it to

> ID：16109704
> 
> 赞同：0
> 
> 时间：2013-04-19T16:51:14.510
> 
> 标签：android

I am working on a chunk of code that involves my code holding up for a certain amount of time in order for something to work properly. However the code does hang when the 35 seconds are initiated however its not working the way I want it to. IE I do not get the desired output I want.

Here is some code I am working on.

```
 LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    LocationListener mlocListener = new MyLocationListener();
    mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
            mlocListener);
    LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
            1000L, 1.0f, (LocationListener) this);
    boolean isGPS = locationManager
            .isProviderEnabled(LocationManager.GPS_PROVIDER);

    // Methods to make the code wait 35 seconds
    int time = 35000;
    try {
        Thread.sleep(time);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    Intent WriteOut = new Intent(context, WriteOut.class);
    WriteOut.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(WriteOut); 
```

I am trying to print out the current GPS co-ordinates after the system has a chance to launch / acquire the GPS signal of the device.

Any tips on how to pull this off would be wonderful since its clear I am doing something wrong.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:35:13.937

如果问题是在运行代码之前没有启动服务，那么在运行代码之后调用`sleep()`将`Thread`无济于事。让它休眠一段时间，同时增加等待时间并检查您需要更改的任何值。我没有弄乱 GPS，所以我不知道你需要检查什么，但我相信你会。

```
LocationListener mlocListener = new MyLocationListener();

// Methods to make the code wait 35 seconds
int time = 35000;
int curTime = 0;
while (curTime<time && aCoordingateVariable = aDefaultValue)  // I don't mess with GPS so I don't know what you need there but that should give you the idea
try {
        Thread.sleep(100);
        LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0,
        mlocListener);
        LocationManager locationManager = (LocationManager) getSystemService(LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
        1000L, 1.0f, (LocationListener) this);
        boolean isGPS = locationManager
        .isProviderEnabled(LocationManager.GPS_PROVIDER);enter code here
} catch (InterruptedException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

让我知道这是否有帮助

# html - HTML页面底部的滚动条

> ID：16109705
> 
> 赞同：-1
> 
> 时间：2013-04-19T16:51:17.803
> 
> 标签：html, css

我对这段代码有疑问：

```
<style>
#tabimg{
}
#tabpara{
position:relative;
left:310px;
top:-310px;
}
</style>

<h1>CLICK ON THIS HEADING</h1>
<div id="hideme" height="400">
  <div id="tabimg">
    <img src="http://www.newyorker.com/online/blogs/photobooth/NASAEarth-01.jpg" width="300" height="300">
  </div>
  <div id="tabpara" width="300" height="300" >
    <p>Paragraph Text</p>
  </div>
</div>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script type="text/javascript">

$(document).ready(function() {

    $("#hideme").hide();
    $("h1").click(function(){
                $("#hideme").slideToggle(500);
    });
});
</script> 
```

我在页面底部得到一个滚动条，我不知道为什么？我对 HTML+JavaScript 很陌生，如果是一个简单的错误，我深表歉意，谢谢 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:58:23.383

您应该将 width 参数添加到您的 css 并删除直接 width="300" 参数：

```
#tabpara
{
 position:relative;
 left:310px; 
 top:-310px;
 width:300px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:03:37.260

你得到滚动条的原因是这个 CSS 规则：

```
#tabpara {
    left: 310px;
} 
```

如果您不使用`left`. `width="300"`此外，您不应该依赖内联样式。使用 CSS 改变元素的宽度：

```
#tabpara {
    left: 310px;
    width: 300px;
    top: -310px;
} 
```

# joomla - Joomla 2.5 创建组件并保存数据

> ID：16109709
> 
> 赞同：4
> 
> 时间：2013-04-19T16:51:32.067
> 
> 标签：joomla, joomla2.5, admin

我一直在使用这个文档（我可以在网上找到的唯一一个）来构建一个组件： [http ://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Introduction](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Introduction)

我可以在一定程度上理解它，但它确实缺乏任何定义。我创建的组件在一定程度上可以工作，尽管我遇到了一些更奇怪的问题。

基本上我需要组件做的只是加载一个设置区域来设置一些值，并通过它能够更改这些值。以下是我所拥有的细分：

表单视图，从数据库加载表单数据。用于保存/应用和取消的工具栏设置。

这加载没有错误，并且根据我发现的 joomla 上的所有文档，通过使用模型中连接的 JTable 初始化 JControllerForm 实例，简单的表单保存应该会自动工作。然而，即使代码中的任何地方都绝对没有引用以 s 结尾的视图（主视图是tireapi，表单总是重定向到tireapis）。

这会引发 500 错误，因为没有具有该视图的地点集。该文档确实包含一个视图列表，但是我只有一行需要编辑，因此列表毫无意义。我知道可以将参数设置为组件，而不是创建一个数据库字段，但是我找不到任何与之相关的文档。

我正在寻找的是有关如何阻止组件重定向到不存在的视图并正确保存数据的方向。链接到不仅显示示例代码，而且描述功能及其工作方式的文档将是有益的。

这是一些代码，请随时指出我可能完全忽略的任何内容（我是创建组件的新手）：

轮胎api.php：

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// import joomla controller library
jimport('joomla.application.component.controller');

// Get an instance of the controller prefixed by TireAPI
$controller = JController::getInstance('TireAPI');

// Get the task
$jinput = JFactory::getApplication()->input;
$task = $jinput->get('task', "", 'STR' );

// Perform the Request task
$controller->execute($task);

// Redirect if set by the controller
$controller->redirect();
?> 
```

控制器.php：

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// import Joomla controller library
jimport('joomla.application.component.controller');

class TireAPIController extends JController{
    function display($cachable = false){
        // set default view if not set
        $input = JFactory::getApplication()->input;
        $input->set('view', $input->getCmd('view', 'TireAPI'));

        // call parent behavior
        parent::display($cachable);
    }
}
?> 
```

控制器/tireapi.php：

```
<?php
// No direct access to this file
 defined('_JEXEC') or die('Restricted access');
// import Joomla controllerform library
jimport('joomla.application.component.controllerform');
class TireAPIControllerTireAPI extends JControllerForm{}
?> 
```

模型/tireapi.php：

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');
// import the Joomla modellist library
jimport('joomla.application.component.modeladmin');
class TireAPIModelTireAPI extends JModelAdmin{
    protected $settings; //define settings

    public function getTable($type = 'TireAPI', $prefix = 'TireAPITable', $config = array()){
        return JTable::getInstance($type, $prefix, $config);
    }

    public function getSettings(){ //grab settings from database
        if(!isset($this->settings)){
            $table = $this->getTable();
            $table->load(1);
            $this->settings = $table;
        }
        return $this->settings;
    }
    public function getForm($data = array(), $loadData = true){
    // Get the form.
        $form = $this->loadForm('com_tireapi.tireapi', 'tireapi',
            array('control' => 'jform', 'load_data' => $loadData));
        if (empty($form)){
            return false;
        }
        return $form;
    }
    protected function loadFormData(){
        // Check the session for previously entered form data.
        $data = JFactory::getApplication()->getUserState('com_tireapi.edit.tireapi.data', array());
        if (empty($data)){
            $data = $this->getSettings();
        }
        return $data;
    }
}
?> 
```

表/tireapi.php：

```
<?php
// No direct access
defined('_JEXEC') or die('Restricted access');

// import Joomla table library
jimport('joomla.database.table');
class TireAPITableTireAPI extends JTable
{
    function __construct( &$db ) {
        parent::__construct('#__tireapi', 'id', $db);
    }
}
?> 
```

意见/tireapi/view.html.php：

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// import Joomla view library
jimport('joomla.application.component.view');

class TireAPIViewTireAPI extends JView{
        function display($tpl = null){

            $form = $this->get('Form');
            $item = $this->get('Settings');

            // Check for errors.
            if(count($errors = $this->get('Errors'))){
                JError::raiseError(500, implode('<br />', $errors));
                return false;
            }
            // Assign data to the view
            $this->item = $item;
            $this->form = $form;

            $this->addToolBar();

            // Display the template
            parent::display($tpl);
        }
        protected function addToolBar() {
            $input = JFactory::getApplication()->input;
            JToolBarHelper::title(JText::_('COM_TIREAPI_MANAGER_TIREAPIS'));
            JToolBarHelper::apply('tireapi.apply');
            JToolBarHelper::save('tireapi.save');
            JToolBarHelper::cancel('tireapi.cancel');
        }
}
?> 
```

意见/tireapi/tmpl/default.php：

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted Access');

// load tooltip behavior
JHtml::_('behavior.tooltip');
?>
<form action="<?php echo JRoute::_('index.php?option=com_tireapi&layout=edit&id='.(int) $this->item->id); ?>"
      method="post" name="adminForm" id="tireapi-form">
    <fieldset class="adminform">
            <legend><?php echo JText::_( 'COM_TIREAPI_DETAILS' ); ?></legend>
            <ul class="adminformlist">
    <?php foreach($this->form->getFieldset() as $field): ?>
                    <li><?php echo $field->label;echo $field->input;?></li>
    <?php endforeach; ?>
            </ul>
    </fieldset>
    <div>
        <input type="hidden" name="task" value="tireapi.edit" />
        <?php echo JHtml::_('form.token'); ?>
    </div>
</form> 
```

这些是我能想到的所有可能很重要的文件，让我知道是否应该再包含。

更新：现在我可以停止重定向问题，但它不会保存数据。我收到此错误：不允许您使用该链接直接访问该页面 (#1)。

这是让这个极其基本的管理功能发挥作用的最后一个障碍。有任何想法吗？为了澄清，我通过一个 xml 文件设置表单并且正确加载，甚至用数据库中的正确数据填充它们。但是，当我单击“应用”时，它只会将我引导回带有上面列出的错误的表单，而不会保存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:32:26.133

您未解决的主要问题是您希望它重定向到哪里？Joomla 默认重定向到列表视图（除非您直接指定列表视图，否则通过在视图名称中添加“s”）。

您可以通过以下几种方式覆盖它：

在您的控制器 (controllers/tireapi.php) 中，设置您自己的列表视图。我认为您甚至可以将其设为相同的视图：

```
function __construct() {
    $this->view_list = 'tireapi';
    parent::__construct();
} 
```

覆盖保存功能以更改保存后发生的重定向（再次在控制器中）。这可以通过将自然发生的重定向更改为其他内容来实现：

```
public function save($key = null, $urlVar = null) {
    $return = parent::save($key, $urlVar);
    $this->setRedirect(JRoute::_('index.php?option=com_tireapi&view=tireapi'));
    return $return;
} 
```

其中之一应该为您解决问题。

** 更新

要让项目最初结帐，您需要更改组件处理未设置视图的方式。现在您只需设置视图，而是让我们重定向！更新的controller.php 如下。

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// import Joomla controller library
jimport('joomla.application.component.controller');

class TireAPIController extends JController{
    function display($cachable = false){
        // set default view if not set
        $input = JFactory::getApplication()->input;
        $view = $input->get('view');
        if (!$view) {
            JFactory::getApplication()->redirect('index.php?option=com_tireapi&task=tireapi.edit&id=1');
            exit();
        }

        // call parent behavior
        parent::display($cachable);
    }
}
?> 
```

注意：如果不止一个人需要编辑它，这将非常糟糕，因为系统会在您打开组件时检查它，如果您在保存后还让它重定向回此页面。因为那样它总是会被最后一个编辑它的人签出，所以下一个人将无法打开它。如果只有一个人编辑它会很好。

第二注意：如果您不想破解结帐系统，您也可以在保存过程中忽略它，这与黑客攻击的级别基本相同。

下面是来自 controllerform.php 中的保存功能的副本`libraries/joomla/application/component/`。这是正常保存时运行的内容（因为您从哪里继承。我已删除检查项目是否已签出。因此，如果您将其放在该`parent::save...`位所在的tireapi.php控制器中，它将改为运行，而您不必费心检查项目（即忽略所有评论......）。（老实说，在您的情况下，您可能可以删除更多内容，但这是保存时发生的事情，顺便说一句！ )

```
public function save($key = null, $urlVar = null)
{
    // Check for request forgeries.
    JSession::checkToken() or jexit(JText::_('JINVALID_TOKEN'));

    // Initialise variables.
    $app   = JFactory::getApplication();
    $lang  = JFactory::getLanguage();
    $model = $this->getModel();
    $table = $model->getTable();
    $data  = JRequest::getVar('jform', array(), 'post', 'array');
    $checkin = property_exists($table, 'checked_out');
    $context = "$this->option.edit.$this->context";
    $task = $this->getTask();

    // Determine the name of the primary key for the data.
    if (empty($key))
    {
        $key = $table->getKeyName();
    }

    // To avoid data collisions the urlVar may be different from the primary key.
    if (empty($urlVar))
    {
        $urlVar = $key;
    }

    $recordId = JRequest::getInt($urlVar);

    // Populate the row id from the session.
    $data[$key] = $recordId;

    // The save2copy task needs to be handled slightly differently.
    if ($task == 'save2copy')
    {
        // Check-in the original row.
        if ($checkin && $model->checkin($data[$key]) === false)
        {
            // Check-in failed. Go back to the item and display a notice.
            $this->setError(JText::sprintf('JLIB_APPLICATION_ERROR_CHECKIN_FAILED', $model->getError()));
            $this->setMessage($this->getError(), 'error');

            $this->setRedirect(
                JRoute::_(
                    'index.php?option=' . $this->option . '&view=' . $this->view_item
                    . $this->getRedirectToItemAppend($recordId, $urlVar), false
                )
            );

            return false;
        }

        // Reset the ID and then treat the request as for Apply.
        $data[$key] = 0;
        $task = 'apply';
    }

    // Access check.
    if (!$this->allowSave($data, $key))
    {
        $this->setError(JText::_('JLIB_APPLICATION_ERROR_SAVE_NOT_PERMITTED'));
        $this->setMessage($this->getError(), 'error');

        $this->setRedirect(
            JRoute::_(
                'index.php?option=' . $this->option . '&view=' . $this->view_list
                . $this->getRedirectToListAppend(), false
            )
        );

        return false;
    }

    // Validate the posted data.
    // Sometimes the form needs some posted data, such as for plugins and modules.
    $form = $model->getForm($data, false);

    if (!$form)
    {
        $app->enqueueMessage($model->getError(), 'error');

        return false;
    }

    // Test whether the data is valid.
    $validData = $model->validate($form, $data);

    // Check for validation errors.
    if ($validData === false)
    {
        // Get the validation messages.
        $errors = $model->getErrors();

        // Push up to three validation messages out to the user.
        for ($i = 0, $n = count($errors); $i < $n && $i < 3; $i++)
        {
            if ($errors[$i] instanceof Exception)
            {
                $app->enqueueMessage($errors[$i]->getMessage(), 'warning');
            }
            else
            {
                $app->enqueueMessage($errors[$i], 'warning');
            }
        }

        // Save the data in the session.
        $app->setUserState($context . '.data', $data);

        // Redirect back to the edit screen.
        $this->setRedirect(
            JRoute::_(
                'index.php?option=' . $this->option . '&view=' . $this->view_item
                . $this->getRedirectToItemAppend($recordId, $urlVar), false
            )
        );

        return false;
    }

    // Attempt to save the data.
    if (!$model->save($validData))
    {
        // Save the data in the session.
        $app->setUserState($context . '.data', $validData);

        // Redirect back to the edit screen.
        $this->setError(JText::sprintf('JLIB_APPLICATION_ERROR_SAVE_FAILED', $model->getError()));
        $this->setMessage($this->getError(), 'error');

        $this->setRedirect(
            JRoute::_(
                'index.php?option=' . $this->option . '&view=' . $this->view_item
                . $this->getRedirectToItemAppend($recordId, $urlVar), false
            )
        );

        return false;
    }

    // Save succeeded, so check-in the record.
    if ($checkin && $model->checkin($validData[$key]) === false)
    {
        // Save the data in the session.
        $app->setUserState($context . '.data', $validData);

        // Check-in failed, so go back to the record and display a notice.
        $this->setError(JText::sprintf('JLIB_APPLICATION_ERROR_CHECKIN_FAILED', $model->getError()));
        $this->setMessage($this->getError(), 'error');

        $this->setRedirect(
            JRoute::_(
                'index.php?option=' . $this->option . '&view=' . $this->view_item
                . $this->getRedirectToItemAppend($recordId, $urlVar), false
            )
        );

        return false;
    }

    $this->setMessage(
        JText::_(
            ($lang->hasKey($this->text_prefix . ($recordId == 0 && $app->isSite() ? '_SUBMIT' : '') . '_SAVE_SUCCESS')
                ? $this->text_prefix
                : 'JLIB_APPLICATION') . ($recordId == 0 && $app->isSite() ? '_SUBMIT' : '') . '_SAVE_SUCCESS'
        )
    );

    // Redirect the user and adjust session state based on the chosen task.
    switch ($task)
    {
        case 'apply':
            // Set the record data in the session.
            $recordId = $model->getState($this->context . '.id');
            $this->holdEditId($context, $recordId);
            $app->setUserState($context . '.data', null);
            $model->checkout($recordId);

            // Redirect back to the edit screen.
            $this->setRedirect(
                JRoute::_(
                    'index.php?option=' . $this->option . '&view=' . $this->view_item
                    . $this->getRedirectToItemAppend($recordId, $urlVar), false
                )
            );
            break;

        case 'save2new':
            // Clear the record id and data from the session.
            $this->releaseEditId($context, $recordId);
            $app->setUserState($context . '.data', null);

            // Redirect back to the edit screen.
            $this->setRedirect(
                JRoute::_(
                    'index.php?option=' . $this->option . '&view=' . $this->view_item
                    . $this->getRedirectToItemAppend(null, $urlVar), false
                )
            );
            break;

        default:
            // Clear the record id and data from the session.
            $this->releaseEditId($context, $recordId);
            $app->setUserState($context . '.data', null);

            // Redirect to the list screen.
            $this->setRedirect(
                JRoute::_(
                    'index.php?option=' . $this->option . '&view=' . $this->view_list
                    . $this->getRedirectToListAppend(), false
                )
            );
            break;
    }

    // Invoke the postSave method to allow for the child class to access the model.
    $this->postSaveHook($model, $validData);

    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:53:59.953

这不是一个真正的答案，但您的问题也不是一个真正的问题（我必须阅读 3 次）。

带有复数“s”（表示轮胎皮）的东西就是 Joomla！自动执行。你可以覆盖它。

我建议你看看核心组件（如 com_banners）。

您需要做的是避免重定向。您应该只有“保存”按钮，这应该让您保持在同一页面上。而“保存并关闭”会将您重定向到复数页面。

# .net - 从本机代码调用的 C++/CLI 库加载其他 .NET 库

> ID：16109710
> 
> 赞同：2
> 
> 时间：2013-04-19T16:51:32.350
> 
> 标签：.net, c++-cli, assembly-resolution

所以我有三个部分：

*   Lib：AC# 库，为 AnyCPU 编译。
*   BridgeLib：一个 C++/CLI 库，为 x86 编译。它导出一个本地 C 函数`bridgeEntry`，并调用 Lib 中的方法。
*   NativeExe：一个本机 C++ Win32 应用程序，只需加载 BridgeLib.dll 并执行`bridgeEntry`.

现在我将它们全部放在一个目录中，正如预期的那样，当我运行 NativeExe 时，会执行来自 Lib 的代码。

但是，如果我像这样重新排列目录结构：

```
├───exe
│       NativeExe.exe
│
└───libs
        BridgeLib.dll
        Lib.dll 
```

事情有点不同。显然`NativeExe.exe`在`exe`文件夹中运行失败，因为它找不到`BridgeLib.dll`. 但这可以通过转到`libs`文件夹并运行来解决`..\exe\NativeExe.exe`。现在应用程序加载`BridgeLib.dll`并跳转到`bridgeEntry`. 但是现在 CLR 崩溃了，因为它在可执行文件的文件夹 ( ) 中而不是在桥库的文件夹中`FileNotFoundException`寻找。`Lib.dll``exe``libs`

这只是一个过于简化的示例，我无法更改目录结构。但是我还能怎么解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:54:06.453

您的 C++/CLI 库可以处理[AppDomain.AssemblyResolve](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)以正确指定 C# 程序集的位置。当 CLR 在运行时找不到程序集时会触发此事件，并让您有机会自己加载程序集。

# xslt - 如何将 xpath 表达式转换为 xsl 键？

> ID：16109713
> 
> 赞同：3
> 
> 时间：2013-04-19T16:51:39.917
> 
> 标签：xslt, xpath, xslt-1.0

我被 XSLT 键应该是一个简单的问题所困扰。

如果它是相关的，我将被迫使用 XSLT 1.0 解析器。

示例 XML：

```
<updates>
  <update>
    <id>first</id>
    <pkglist>
      <collection arch='i686'>
        <package name='bin' version='1.0'/>
      </collection>
      <collection arch='x86_64'>
        <package name='bin' version='1.0'/>
      </collection>
    </pkglist>
  </update>
  <update>
    <id>second</id>
    <pkglist>
      <collection arch='i686'>
        <package name='bin' version='1.1'/>
        <package name='conf' version='1.1'/>
      </collection>
      <collection arch='x86_64'>
        <package name='bin' version='1.2'/>
        <package name='conf' version='1.1'/>
      </collection>
    </pkglist>
  </update>
  <update>
    <id>third</id>
    <pkglist>
      <collection arch='i686'>
        <package name='bin' version='1.3'/>
        <package name='conf' version='1.1'/>
        <package name='src' version='1.3'/>
      </collection>
      <collection arch='x86_64'>
        <package name='bin' version='1.3'/>
        <package name='conf' version='1.2'/>
        <package name='src' version='1.3'/>
      </collection>
    </pkglist>
  </update>
</updates> 
```

这个 XPATH 选择了我正在寻找的东西

```
/updates//update[pkglist/collection/package/@name = 'bin']/id/text() 
```

我正在整个文档中查找具有“name”属性的包的所有“id”值。但在现实世界中，我拥有的包裹比手工列出​​的要多得多。

所以我想一把钥匙是要走的路

```
<xsl:key name="idByPackage" match="/updates//update/pkglist/collection/package/@name" use="../../../../id" /> 
```

但这并没有给我任何有用的东西

```
<xsl:key name="idByPackage" match="/updates//update/pkglist/collection/package/@name" use="../../../../id" />

<xsl:template match="/">
    <xsl:apply-templates select="updates/update" />
</xsl:template>
<xsl:template match="update">
    Updates:
    <xsl:value-of select="id" />
    Related updates
    <xsl:apply-templates select="pkglist" />
</xsl:template>
<xsl:template match="pkglist">
    <xsl:for-each select="key('idByPackage', collection/package/@name)">
        <xsl:value-of select="." />
        <xsl:value-of select="collection/package/@name" />
    </xsl:for-each>
</xsl:template> 
```

当我将密钥更改为此时，我知道我在正确的区域：

```
<xsl:key name="idByPackage" match="/updates//update/pkglist/collection/package/@name" use="../../../../pkglist/collection/package/@name" /> 
```

相同的 xsl 模板吐出我的包名称。

当我使用“对我来说看起来有效但不起作用”键运行模板时，我得到了这个：

```
Updates:
first
Related updates
Updates:
second
Related updates
Updates: third
Related updates 
```

当我期望得到类似的东西时

```
Updates:
first
Related updates
second
third
Updates:
second
Related updates
first
third
Updates: third
Related updates 
first
second 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T18:41:40.100

这是您需要的关键：

```
<xsl:key name="idByPackage" 
         match="update/id" use="../pkglist/collection/package/@name" /> 
```

在您的示例输入上运行此 XSLT 时：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" indent="yes" omit-xml-declaration="yes"/>

  <xsl:key name="idByPackage"
           match="update/id" use="../pkglist/collection/package/@name" />
  <xsl:variable name="nl" select="'&#xA;'" />

  <xsl:template match="/">
    <xsl:apply-templates select="updates/update" />
  </xsl:template>

  <xsl:template match="update">
    <xsl:value-of select="concat('Updates:', $nl, 
                                 id, $nl, 
                                 'Related updates:', $nl)" />

    <xsl:variable name="name" select="pkglist/collection/package/@name" />
    <xsl:apply-templates select="key('idByPackage', $name)[. != current()/id]" />
  </xsl:template>

  <xsl:template match="id">
    <xsl:value-of select="concat(., $nl)" />
  </xsl:template>

</xsl:stylesheet> 
```

结果是：

```
Updates:
first
Related updates:
second
third
Updates:
second
Related updates:
first
third
Updates:
third
Related updates:
first
second 
```

# performance - Slow running code due to a lot of objects hiding / unhiding

> ID：16109719
> 
> 赞同：0
> 
> 时间：2013-04-19T16:51:49.603
> 
> 标签：performance, excel, button, hide

I have a spreadsheet of about 20,000 rows. This spreadsheet is a hierarchy that displays part lists for pieces of equipment. I have created code that creates buttons (actually the shape rectangle) that allow the user to expand / contract these groups through hiding / unhiding rows.

I believe the code is running slow because there are several thousand buttons on the spreadsheet that I believe are refreshing each time rows are hidden. When I click the button the code runs, the correct rows hide / unhide, then all the buttons dissapear for a few seconds then reapear. The disapearing occurs after the rows hide or unhide so the code has already finnished running.

Is there any way to stop Excel from refreshing every button? Is there a different issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:30:04.097

听起来您可以利用 Excel 中的数据透视表功能。我确信它比电子表格使用的宏/按钮快得多：

数据透视表大纲 ![数据透视表大纲](https://i.stack.imgur.com/d2kGs.png)

您只需要努力将数据重新组织成合适的格式。祝你好运。

如果您需要关于数据透视表的解释，您可以谷歌“数据透视表教程 [。http://www.google.com/search? q=%22pivot+table+tutorial%22](http://www.google.com/search?q=%22pivot%20table%20tutorial%22)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T11:43:59.893

我使用了一种解决方法，当代码方便时我会详细说明，但就像这样：

1.  让您的按钮创建宏在单元格中创建超链接，而不是使用文本`+/-`和工具提示`>>expand/collapse<<`

    ```
    ActiveSheet.Hyperlinks.Add _
        Anchor:=[A1], Address:="", _
        SubAddress:=[A1].Address, _
        ScreenTip:=">>expand/collapse<<", _
        TextToDisplay:="+/-" 
    ```

2.  在这种情况`workseet_followhyperlink`下，请检查工具提示是否存在`>>expand/collapse<<`，如果是，请按照您的宏进行播种和隐藏。

    ```
    if target.screentip = ">>expand/collapse<<" then 
        myShowHideMacro
    else
        'do other stuff
    end if 
    ```

# vba - Put data into sheet on timer for excel presentation

> ID：16109720
> 
> 赞同：0
> 
> 时间：2013-04-19T16:51:51.723
> 
> 标签：vba, excel

I have a working timer in my sheet in a certain cell. I need to populate the sheet with predetmined values (in the macro or references to cell either one) and input the into a templete for a demonstration. Has anyone ever done this. My code is.. The "yeah" sub is NOT done but I wanted to get one piece working. I cannot.

```
Sub timer()
Application.OnTime Now + TimeValue("00:00:01"), "Increment_count"
End Sub
Sub Increment_Count()
Range("AE5").Value = Range("AE5") + TimeValue("00:00:01")
timer

Application.Run ("yeah")

End Sub
Sub STOPtimer()
Application.OnTime Now + TimeValue("00:00:01"), "Increment_count", Schedule:=False
End Sub

Sub yeah()

Dim i As Integer

For i = 2 To 31
If IsError(Cells(i, 39)) = False And IsError(Cells(32, 5)) = False Then
If Cells(i, 38) = Cells(31, 5) Then
Cells(1, 8) = Cells(i, 39)
End If
End If

Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:10:37.173

您是否要使用数据缓慢填充的过渡类型效果？我认为这就是你正在做的。对于像这样的一次性事情来说，计时器似乎有点不必要。（30或任何数字也不是很多）。

```
Declare Sub Sleep Lib "kernel32" _
(ByVal dwMilliseconds As Long)

Sub Macro1()

    Range("B1").Value = "1"
    Sleep 1000 'Implements a 1 second delay
    Range("B2").Value = "2"
    Sleep 1000 'Implements a 1 second delay
    Range("B3").Value = "3"
    Sleep 1000 'Implements a 1 second delay
    Range("B4").Value = "4"
    Sleep 1000 'Implements a 1 second delay
    Range("B5").Value = "5"
    Sleep 1000 'Implements a 1 second delay
    Range("B6").Value = "6"
    Sleep 1000 'Implements a 1 second delay
    Range("B7").Value = "7"
    Sleep 1000 'Implements a 1 second delay
    Range("B8").Value = "8"
    Sleep 1000 'Implements a 1 second delay
    Range("B9").Value = "9"
    Sleep 1000 'Implements a 1 second delay
    Range("B10").Value = "10"
    Sleep 1000 'Implements a 1 second delay
    Range("B11").Value = "11"
    Sleep 1000 'Implements a 1 second delay
    Range("B12").Value = "12"
    Sleep 1000 'Implements a 1 second delay
    Range("B13").Value = "13"
    Sleep 1000 'Implements a 1 second delay
    Range("B14").Value = "14"
    Sleep 1000 'Implements a 1 second delay
    Range("B15").Value = "15"
    Sleep 1000 'Implements a 1 second delay
    Range("B16").Value = "16"
    Sleep 1000 'Implements a 1 second delay
    Range("B17").Value = "17"
    Sleep 1000 'Implements a 1 second delay
    Range("B18").Value = "18"
    Sleep 1000 'Implements a 1 second delay
    Range("B19").Value = "19"
    Sleep 1000 'Implements a 1 second delay
    Range("B20").Value = "20"
    Sleep 1000 'Implements a 1 second delay
    Range("B21").Value = "21"
    Sleep 1000 'Implements a 1 second delay
    Range("B22").Value = "22"
    Sleep 1000 'Implements a 1 second delay
    Range("B23").Value = "23"
    Sleep 1000 'Implements a 1 second delay
    Range("B24").Value = "24"
    Sleep 1000 'Implements a 1 second delay
    Range("B25").Value = "25"
    Sleep 1000 'Implements a 1 second delay
    Range("B26").Value = "26"
    Sleep 1000 'Implements a 1 second delay
    Range("B27").Value = "27"
    Sleep 1000 'Implements a 1 second delay
    Range("B28").Value = "28"
    Sleep 1000 'Implements a 1 second delay
    Range("B29").Value = "29"
    Sleep 1000 'Implements a 1 second delay
    Range("B30").Value = "30"
    Sleep 1000 'Implements a 1 second delay
    Range("B31").Value = "31"

End Sub 
```

通过这种方式，您可以根据需要填充组并更改效果之间的延迟。虽然个人出于演示目的 - 我只会显示数据并完成它。在这方面无需让观众惊叹。不过，这只是我个人的喜好。祝你好运。

# javascript - How do i get a vertical menu to slide out with my jquery mobile panel?

> ID：16109724
> 
> 赞同：2
> 
> 时间：2013-04-19T16:52:25.667
> 
> 标签：javascript, jquery, css, jquery-mobile

So i have a menu(only icons) that is on the right side of my screen and I am wanting to get the icons to slide out with my panel when the panel opens. but i want the menu to be visible when the panel is closed. One image will open one panel and another image will open another panel.

```
<div class="buttons right">
            <a href="#rightpanel3" data-role="button" data-inline="true" class="filter">One</a> 
            <a href="#rightpanel1" data-role="button" data-inline="true" class="layers">Two</a> 
            <a href="#rightpanel2" data-role="button" data-inline="true" class="list">Three</a> 
            <a href="#rightpanel4" data-role="button" data-inline="true" class="settings">four</a>
</div>
<div data-role="panel" id="rightpanel3" data-position="right"
            data-display="overlay" data-dismissible="false" data-theme="b">
            <h3>Search/Filter</h3>
            <h4 class="top heading">Search</h4>
            <h4 class="heading">Filter</h4>
</div> 
```

jsfiddle: [jsfiddle.net/5GhPM](http://jsfiddle.net/5GhPM)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:27:31.113

可能需要一些调整，但这有效：

```
$("#rightpanel3").on("panelopen", function() {
    $(".buttons.right").animate({ marginRight: $("#rightpanel3").width() });
});

$("#rightpanel3").on("panelclose", function() {
    $(".buttons.right").animate({ marginRight: -($("#rightpanel3").width()) });
}); 
```

[http://jsfiddle.net/yRu4q/](http://jsfiddle.net/yRu4q/)

这些事件记录[在这里](http://api.jquerymobile.com/panel/)。

# python - 如何用 CherryPy 做 XMLRPC

> ID：16109725
> 
> 赞同：2
> 
> 时间：2013-04-19T16:52:33.573
> 
> 标签：python, xml-rpc, cherrypy

服务器（CherryPy 3.2.0）：

```
import cherrypy

class XMLRPCServer(cherrypy._cptools.XMLRPCController):
    def index(self):
        return 'index'
    index.exposed = True

if __name__ =='__main__':
    cherrypy.config.update({
        'server.thread_pool': 1,
        'request.dispatch': cherrypy.dispatch.XMLRPCDispatcher,
        'tools.xmlrpc.on': True,
        'tools.xmlrpc.allow_none': 0, 
    })
    cherrypy.quickstart(XMLRPCServer()) 
```

客户端（Python 2.7.1）：

```
import xmlrpclib
svc = xmlrpclib.ServerProxy('http://127.0.0.1:8080')
r = svc.index() 
```

错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/xmlrpclib.py", line 1224, in __call__
    return self.__send(self.__name, args)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1575, in __request
    verbose=self.__verbose
  File "/usr/lib/python2.7/xmlrpclib.py", line 1264, in request
    return self.single_request(host, handler, request_body, verbose)
  File "/usr/lib/python2.7/xmlrpclib.py", line 1312, in single_request
    response.msg,
xmlrpclib.ProtocolError: <ProtocolError for 127.0.0.1:8080/RPC2: 404 Not Found> 
```

你如何在 CherryPy 中启用 xml-rpc，我已经用谷歌搜索并阅读了文档，但仍然卡住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-29T16:26:32.457

这是文档中的相关引用[`XMLRPCController`](https://cherrypy.readthedocs.org/en/3.3.0/refman/_cptools.html#cherrypy._cptools.XMLRPCController)：

> XMLRPCDispatcher 去除任何 /RPC2 前缀；如果您没有在 URL 中使用 /RPC2，则可以安全地跳过打开 XMLRPCDispatcher。

以下工作正常。还要注意将全局配置和应用程序配置分开，因为您将它们混合在一起。

*服务器.py*

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import cherrypy

config = {
  'global' : {
    'server.socket_host' : '127.0.0.1',
    'server.socket_port' : 8080,
    'server.thread_pool' : 8
  },
  '/' : {
    'tools.xmlrpc.allow_none' : True
  }
}

class Api(cherrypy._cptools.XMLRPCController):

  @cherrypy.expose
  def mul(self, a, b):
    return a * b

if __name__ == '__main__':
  cherrypy.quickstart(Api(), '/api', config) 
```

*客户端.py*

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import xmlrpclib

rpc = xmlrpclib.ServerProxy('http://localhost:8080/api')
print rpc.mul(2, 6) 
```

# java - 检查通用对象的对象类型的正确方法是什么？

> ID：16109726
> 
> 赞同：5
> 
> 时间：2013-04-19T16:52:34.933
> 
> 标签：java, object, casting, warnings, instanceof

在编译我的代码时，我收到了关于 Object Casting 的警告消息。我不知道如何用我目前的知识来修复它......假设我有一个通用对象`MyGenericObj<T>`，它是从非通用对象扩展而来的`MyObj`

这是一个示例代码：

```
MyObj obj1 = new MyGenericObj<Integer>();
if (obj1 instanceof MyGenericObj) {
    //I was trying to check if it's instance of MyGenericObj<Integer>
    //but my IDE saying this is wrong syntax.... 
    MyGenericObj<Integer> obj2 = (MyGenericObj<Integer>) obj1;
    //This line of code will cause a warning message when compiling 
} 
```

您能否让我知道这样做的正确方法是什么？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T16:54:11.543

由于[*类型擦除*](https://stackoverflow.com/q/339699/335858)，没有办法做到这一点：`MyGenericObj<Integer>`实际上是一个`MyGenericObj<Object>`幕后，不管它的类型参数。

解决此问题的一种方法是`Class<T>`向您的通用对象添加一个属性，如下所示：

```
class MyGenericObject<T> {
    private final Class<T> theClass;
    public Class<T> getTypeArg() {
        return theClass;
    }
    MyGenericObject(Class<T> theClass, ... the rest of constructor parameters) {
        this.theClass = theClass;
        ... the rest of the constructor ...
    }
} 
```

现在您可以使用`getTypeArg`来查找类型参数的实际类，将其与 进行比较`Integer.class`，并据此做出决定。

# javascript - 单击视图中的项目时以JSON文件中的子对象为目标-AngularJS

> ID：16109728
> 
> 赞同：1
> 
> 时间：2013-04-19T16:52:41.277
> 
> 标签：javascript, json, angularjs

好的，所以我的问题是我认为我有以下设置：

```
<a class="like" ng-tap="likeClicked()"><span>{{isLiked}}</span></a> 
```

此外，我还有另一个关键的视图元素：

```
<span class="like-count" ng-tap="viewLikes()" ng-init="likeCount=feed.likes.length"{{likeCount}}</span> 
```

然后是我的控制器，我有以下代码：

```
$scope.likeClicked = function () {

    console.log($scope.feeds);

    if (!hasLiked) {
      hasLiked = true;
      $scope.isLiked = 'Unlike';
    } else {
      hasLiked = false;
      $scope.isLiked = 'Like';         
    }
  }; 
```

最后，一些虚拟的 JSON：

```
 {
    "id":5,
    "title":"Feed 1",
    "createdby":1,
    "typeId":2,
    "content":"Lorem ipsum dolor sit amet, consectetur adipisicing elit,",
    "createdon":"2013-03-21 14:53:35",
    "editedon":"2013-03-21 14:53:35",
    "comments": [
      {
        "id": 0,
        "createdby": 5,
        "content": "Lorem ipsum dolor sit amet, consectetur adipisicing elit,",
        "createdon":"2013-03-21 14:53:35"
      }
    ],
    "likes": [
      {
        "id": 11,
        "createdby": 4,
        "createdon":"2013-03-21 14:53:35"
      },
      {
        "id": 13,
        "createdby": 2,
        "createdon":"2013-03-21 14:53:35"
      }
    ]
  } 
```

我想要实现的是，当用户点击时`likeClicked`，喜欢“喜欢”（尽管这有点有效）。然后一旦喜欢，我需要获取与`.length`该提要项关联的 JSON 子项中的数组。问题来了，我可以使用控制台日志返回控制台中的对象`console.log($scope.feeds);`，但是，如果我使用`console.log($scope.feeds.likes);`，这将返回未定义，即使它是数组和`$scope`单击元素中的可用对象。

例如，我不想指定 JSON 的特定子项`console.log($scope.feeds[3});`，因为如果我可以根据`ng-repeat`单击的项目动态设置子项会更好。

那里有任何 Angular 坏蛋，请帮忙！

谢谢，

J.P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:49:40.743

要针对单个提要实例，您可以使用 ng-repeat 公开的属性 $index 并将其传递给 likeClicked() 方法。

```
<article ng-repeat="feed in feeds">
    <h3>{{feed.createdby}}</h3>
    <p>{{feed.content}}</p>
    <button ng-click="likeClicked($index)">{{isLiked}}</button>
</article> 
```

知道索引后，您可以单独跟踪每个提要/点赞，举个例子，我创建了一个对象 (isLiked) 来保存这些数据。

要更改按钮的文本，我将使用基于存储在 isLike 对象中的值的过滤器。

这是一个 plunker [http://plnkr.co/edit/OJmSFIppizpTtUiOcqxD?p=preview](http://plnkr.co/edit/OJmSFIppizpTtUiOcqxD?p=preview)

# parsing - printing parse Tree as a dynamic list in c language

> ID：16109735
> 
> 赞同：0
> 
> 时间：2013-04-19T16:52:57.797
> 
> 标签：parsing, compiler-construction, lr1

I have written a code in C to implement LR(1) parse table, however now I am facing a problem in printing the parse tree. How do we do that in C? The tree can have variable children and since the parsing algorithm is bottom-up, I am not sure where to begin. I want to make it look like the output of the `pstree` command or something of that sort.

Thank You

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:17:57.877

您会发现在解析器中构造解析树更容易，并在解析完成后自上而下递归地打印它。这有几个优点：首先，您不限于解析树，而是可以生成[抽象语法树](http://en.wikipedia.org/wiki/Abstract_syntax_tree)，这通常更清晰。其次，您可以以任何您喜欢的形式生成树。

我打算插入一个证明，证明在你进行从左到右的解析时不可能绘制解析树，但令我惊讶的是，我说服自己只要你稍微放松一下规则，这是可能的：你必须能够上下左右移动光标，但你可以做到这一点，而无需每次套印任何东西。为此，您必须在左侧边缘或顶部绘制带有叶子（终端）的树，然后您可以通过从每个子节点绘制线来绘制缩减，并记住“连接点”是什么结果节点是。我不知道这是否适合刚开始解析的人的编程练习，但即使使用控制台应用程序也是可能的。

这是“反向 pstree”图的示例：

```
(41*x) + (27/y) - sin(2*pi*z);

(───────────────────────┐
41─factor─term┐         │
*─────────────┤         │
x─factor──────┴term─expr┤
)───────────────────────┴factor─term─expr┐
+────────────────────────────────────────┤
(───────────────────────┐                │
27─factor─term┐         │                │
/─────────────┤         │                │
y─factor──────┴term─expr┤                │
)───────────────────────┴factor─term─────┴expr┐
-─────────────────────────────────────────────┤
sin─────────────────────────┐                 │
(───────────────────────────┤                 │
2─factor─term┐              │                 │
*────────────┤              │                 │
pi─factor────┴term┐         │                 │
*─────────────────┤         │                 │
z─factor──────────┴term─expr┤                 │
)───────────────────────────┴factor─term──────┴expr 
```

用于生成保持每个堆栈项的宽度和高度的算法；终端以 1 的高度和终端本身的宽度开始。在每个缩减规则中：

*   光标向右移动，直到它在每个孩子的右边；

*   光标向上移动到第一个孩子的底部

*   对于每个孩子，从其右下角到光标所在的列绘制一条水平线，然后绘制一条垂直线，直到到达下一个孩子所在的行。在最后一个孩子处，打印缩减的非终结符名称，并记录生成的非终结符的高度和宽度。

# sql-server-2005 - 重复的唯一标识符索引

> ID：16109736
> 
> 赞同：0
> 
> 时间：2013-04-19T16:52:59.933
> 
> 标签：sql-server-2005, database-indexes

我认为我对 SQL Server 2005 中的索引（可能还有所有索引？？）的理解是有缺陷的，请教育我。

我们有一个表，说 5 列：

```
Id  |  ProductId | OrderId | PriceId | Approved | Price
---------------------------------------------------------
1   |  2545      | 32345   | 224     |      1   |  150.00 
```

该表有 3000 万行（如果重要的话，实际表中实际上大约有 30 列）。

这些`Id`列都是`UniqueIdentifer`，所以围绕如果其中一个是一个大字段，它可能不是多余的事实的帖子似乎并不相关。

如果我在列上添加索引`ProductID`。

```
CREATE INDEX "ProductIndex" ON "dummy_table" (
   "ProductId"
) 
```

`ProductId`然后在AND `OrderId`AND上添加另一个索引`PriceId`

```
CREATE INDEX "ProductAndOrderIndex" ON "dummy_table" (
   "ProductId",
   "OrderId",
   "PriceId"
) 
```

第一个索引是多余的吗，即 SQL Server 计划程序应该恢复使用第二个索引并且性能也一样好？

之所以出现这个问题，是因为删除第一个索引会导致性能大幅下降（一个进程的 10 秒已变为 2 分半钟）。我已经把它缩小到那个特定的索引，所以接下来就是跟踪所有的 SQL，但这将是一项大任务，除非我必须这样做，否则我不想做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:17:33.470

在没有索引的情况下，`ProductId`查询优化器很可能会使用`ProductId`,`OrderId`和上的索引`PriceId`。任一索引每页包含比表行更多的条目，因此它们减少了所需的 I/O。

`ProductId`第一个索引将包含比第二个索引更多的每页条目和更少的重复项。这使得通过`ProductId`. 如果查询使用`OrderId`和/或`PriceId`，即使它们只是输出列，那么查询优化器仍可能会发现第二个索引更有效。（参见[涵盖的索引](https://stackoverflow.com/questions/62137/what-is-a-covered-index)。）

查看查询的执行计划。它将显示如何使用索引以及执行的 I/O 操作的数量。这应该可以解开大部分谜团。

# c# - 合并数组或追加到数组

> ID：16109739
> 
> 赞同：0
> 
> 时间：2013-04-19T16:53:12.750
> 
> 标签：c#, arrays

在 C# 中，我有三个数组 、`string[] array1`、 2 和 3 ，它们都有不同的值。我很乐意做我可以在 php 中做的事情：

`$array = array(); $array[] .= 'some value';`

在 C# 中执行此操作的等效方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T16:55:13.257

在 C# 中，您通常会使用 a[`List<string>`](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)而不是`string[]`.

这将允许您编写`list.Add("some value")`并动态“增长”列表。

请注意，如果需要，很容易在列表和数组之间进行转换。 `List<T>`有一个构造函数，它接受 any `IEnumerable<T>`，包括一个数组，因此您可以通过以下方式从数组中创建一个列表：

```
var list = new List<string>(stringArray); 
```

您可以通过以下方式将列表转换为数组：

```
var array = list.ToArray(); 
```

但是，仅当您需要数组时才需要这样做（例如使用第三方 API）。如果您知道您将使用大小不同的集合，那么始终坚持`List<T>`使用而不使用数组通常会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T16:57:36.687

您可以创建一个列表并将数组值添加到其中，然后将该列表转换回数组。

```
int[] array1 = { 1, 2, 3, 4, 5 };
int[] array2 = { 6, 7, 8, 9, 10 };

// Create new List of integers and call AddRange twice
var list = new List<int>();
list.AddRange(array1);
list.AddRange(array2);

// Call ToArray to convert List to array
int[] array3 = list.ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:56:40.730

如果你只是想合并你的数组

使用 linq [.Concat](https://stackoverflow.com/questions/217805/using-linq-to-concatenate-strings)

```
 array1 = array1.Concat(array2).Concat(array3).ToArray(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T16:55:55.403

您可以使用动态列表`List<string>`。你可以做

`List<string> TotalList = array1.ToList();`

然后你可以`TotalList.AddRange(array2)`等等....

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T17:00:27.810

`List<T>`或 LINQ 可能是最简单的解决方案，但您也可以使用老式方法：

```
// b1 is now 5 bytes
byte[] b1 = Get5BytesFromSomewhere();

// creating a 6-byte array
byte[] temp = new byte[6];

// copying bytes 0-4 from b1 to temp
Array.copy(b1, 0, temp, 0, 5);

// adding a 6th byte
temp[5] = (byte)11;

// reassigning that temp array back to the b1 variable
b1 = temp; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T17:03:16.400

使用 linq 很容易：

```
int[] array1 = { 1, 2, 3, 4, 5 };
int[] array2 = { 6, 7, 8, 9, 10 };
int[] array3 = { 3, 4 ,5, 9, 10 };

var result = array1
    .Concat(array2)
    .Concat(array3)
    .ToArray(); 
```

# json - 如何将多个数据系列放入 Highcharts

> ID：16109742
> 
> 赞同：5
> 
> 时间：2013-04-19T16:53:27.730
> 
> 标签：json, highcharts

以下代码有效：

```
var options1 = {
    chart: {
        renderTo: 'container1'
    },
    series: [{}]
    };

$.getJSON('tokyo.jsn', function(data){
        options1.series[0].data = data;
        var chart = new Highcharts.Chart(options1);
    }); 
```

我希望能够添加一些数据系列，所以我试图从 getJSON 中引用“new Highcharts”，但我似乎没有做对。以下代码不起作用：

```
$.getJSON('tokyo.jsn', function(data){
    options1.series[0].data = data;
});
var chart = new Highcharts.Chart(options1); 
```

我也尝试过以不同的方式解决它，但以下代码再次不起作用：

```
var chart1 = new Highcharts.Chart({
    chart: {
        renderTo: 'container1'
    },
    series: [{}]
});

$.getJSON('tokyo.jsn', function(data){
    chart1.series[0].data = data;
}); 
```

谁能指出我正确的方向。我需要能够通过执行第二个 getJSON 调用来支持多个数据系列，如下所示：

```
$.getJSON('sydney.jsn', function(data){
    options1.series[1].data = data;
}); 
```

我使用的 JSON 代码如下：

```
[ 7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6 ] 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T17:55:37.943

`$.getJSON` is an *asynchronous* request. Once you receive the data, then you can pass it to Highcharts, thus you have to call that code from within the callback function of `$.getJSON()`.

Try this, use a helper function to process your data and draw the chart, see `drawChart()` below:

```
var options1 = {
    chart: {
        renderTo: 'container1'
    },
    series: []
};

var drawChart = function(data, name) {
    // 'series' is an array of objects with keys: 
    //     - 'name' (string)
    //     - 'data' (array)
    var newSeriesData = {
        name: name,
        data: data
    };

    // Add the new data to the series array
    options1.series.push(newSeriesData);

    // If you want to remove old series data, you can do that here too

    // Render the chart
    var chart = new Highcharts.Chart(options1);
};

$.getJSON('tokyo.jsn', function(data){
    drawChart(data, 'Tokyo');
});
$.getJSON('sydney.jsn', function(data){
    drawChart(data, 'Sydney');
}); 
```

See fiddle: [http://jsfiddle.net/amyamy86/pUM7s/](http://jsfiddle.net/amyamy86/pUM7s/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T10:22:35.630

您可以在该示例中使用 Highcharts 使用的解决方案：[http ://www.highcharts.com/stock/demo/compare](http://www.highcharts.com/stock/demo/compare)

或者先创建空图表，没有任何系列，然后`addSeries()`在每个回调中使用函数，参见：[http://api.highcharts.com/highcharts#Chart.addSeries()](http://api.highcharts.com/highcharts#Chart.addSeries())

# .net - 使用 MQ-Websphere 调试应用程序的问题：amqmdnet.dll 由于版本冲突

> ID：16109743
> 
> 赞同：1
> 
> 时间：2013-04-19T16:53:39.093
> 
> 标签：.net, websphere, assemblies, .net-assembly, ibm-mq

我有一个引用 IBM-WebSphereMQ dll“amqmdnet.dll”的应用程序。我正在尝试在本地调试此控制台应用程序，为此我从我们的 OP 团队获得了 64 位 dll。运行该服务的服务器是 32 位的。尝试调试时，出现以下错误。

> 无法加载文件或程序集 'amqmdnet, Version=1.0.0.3, Culture=neutral, PublicKeyToken=dd3cb1c9aae9ec97' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常：0x80131040）

给我的 dll 版本是 7.1.0.0。我在解决方案中添加了对 7.1.0.0 版本的引用我不确定它在哪里期待 1.0.0.3 版本？我尝试将以下内容添加到我的 App.Config 中：

```
<runtime>
    <assemblyBinding>
      <dependentAssembly>
        <assemblyIdentity name="amqmdnet" publicKeyToken="dd3cb1c9aae9ec97"/>
        <bindingRedirect oldVersion="1.0.0.3" newVersion="7.1.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

但是，没有效果。它仍然给了我同样的例外。这是“探测”期间生成的“Fusionlog”：

> ```
> === Pre-bind state information ===
> LOG: User = xxxx\ccc
> LOG: DisplayName = amqmdnet, Version=1.0.0.3, Culture=neutral, PublicKeyToken=dd3cb1c9aae9ec97
>  (Fully-specified)
> LOG: Appbase = file:///C:/xxx/vvv/MouserMQ/services/MMQMonitor/dev/Kk/MMQconfigChange/MMQWatchDogConsole/bin/Debug/
> LOG: Initial PrivatePath = NULL
> Calling assembly : MMQTools, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null.
> ===
> LOG: This bind starts in default load context.
> LOG: Using application configuration file: C:\NewCodeBase\mm\MouserMQ\services\MMQMonitor\dev\kk\MMQconfigChange\MMQWatchDogConsole\bin\Debug\MMQWatchDogConsole.vshost.exe.Config
> LOG: Using host configuration file: 
> LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
> LOG: Post-policy reference: amqmdnet, Version=1.0.0.3, Culture=neutral, PublicKeyToken=dd3cb1c9aae9ec97
> LOG: Attempting download of new URL file:///C:/nb/Mouser/MouserMQ/services/MMQMonitor/dev/kk/MMQconfigChange/MMQWatchDogConsole/bin/Debug/amqmdnet.DLL.
> WRN: Comparing the assembly name resulted in the mismatch: Major Version
> ERR: Failed to complete setup of assembly (hr = 0x80131040). Probing terminated. 
> ```

还有什么我想念的吗？我删除并重新添加了对 dll 的引用，因为它出现在我的解决方案中。

有人可以帮我弄这个吗？我真的很感激任何帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T14:26:18.447

看来您还没有安装完整的 MQ 客户端。看起来你只是复制了一两个 dll。您的应用程序使用 amqmdnet.dll 版本 1.0.0.3 编译，这意味着它来自 MQ 客户端版本 7.0.1，而您收到的 amqmdnet.dll 版本来自 MQ 客户端版本 7.1。我认为因此您遇到了这个问题。

要解决此问题，我将安装完整的 MQ 客户端版本 v7.1。这将安装策略文件，该文件还将重定向使用 MQv701 编译的应用程序以加载 MQv7.1 程序集。

# ruby-on-rails - Rails 3.2.x 应用程序不写入日志文件

> ID：16109749
> 
> 赞同：0
> 
> 时间：2013-04-19T16:54:11.970
> 
> 标签：ruby-on-rails

我无法弄清楚为什么我的 rails 应用程序不再生成日志文件。我重新启动了 Web 服务器，但仍然没有日志文件的迹象。哪些配置参数可能使其无法生成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:57:05.433

你有文件夹`log`吗？运行 rails 的用户是否对该文件夹具有写权限？

# android - 如何将对象按钮更改为整数

> ID：16109750
> 
> 赞同：0
> 
> 时间：2013-04-19T16:54:13.153
> 
> 标签：android, button, conditional-statements

我有 6 个对象按钮

```
kartu1 = (Button)findViewById(R.id.kartu1);
kartu2 = (Button)findViewById(R.id.kartu2);
kartu3 = (Button)findViewById(R.id.kartu3);
kartu4 = (Button)findViewById(R.id.kartu4);
kartu5 = (Button)findViewById(R.id.kartu5);
kartu6 = (Button)findViewById(R.id.kartu6); 
```

所有这些对象都设置为 OnclickListener

```
 kartu1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
        r = new Random();
        int i = r.nextInt(gamb.size());
        v.setBackgroundDrawable(gamb.get(i));
        }
    }); 
```

我想将所有对象设为整数，因为有一个条件可以计算所有对象。我有一个条件。

```
if (kartu1 >= 5){

} 
```

如何将 kartu1 更改为整数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:09:02.267

尝试这个

```
int[] ids={R.id.kartu1 ,R.id.kartu2, R.id.kartu3, R.id.kartu4, R.id.kartu5,R.id.kartu6  };
int clicks=0;
for(int i=0;i<ids.length;i++)
{
Button b=(Button)findViewById(R.id.kartu1);
b.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
        r = new Random();
        int i = r.nextInt(gamb.size());
        v.setBackgroundDrawable(gamb.get(i));
        // set the click count in variable
         clicks+=1;

         if(clicks>=5){
            // do stuff here
          }              
        }
    });
} 
```

**第二种情况。**

以上假设所有图片的总点击次数为 5

如果您想将单个按钮的点击次数设置为 5，请这样做

```
 public void onClick(View v) {
            r = new Random();
            int i = r.nextInt(gamb.size());
            v.setBackgroundDrawable(gamb.get(i));
            // set the click count in variable
            String count=b.getContentDescription();
             if(count!=null && count.length()!=0)
             {
                 int cnt=Integer.parseInt(count);
                  cnt+=1;
             button.setContentDescription(String.valueOf(cnt));
              if(cnt>=5)
            {
               // do stuff here
            }
              }  
              else
              {
                button.setContentDescription(String.valueOf(1));
               }

            } 
```

# c# - 发送电子邮件异步

> ID：16109752
> 
> 赞同：0
> 
> 时间：2013-04-19T16:54:28.347
> 
> 标签：c#, asp.net, email, asynchronous

这是我尝试使用 SendAsync() 方法发送电子邮件的方法。当通过 bool 发送常规电子邮件时，它工作正常。使用 SendAsync 方法发送时没有骰子。如果您在这里发现问题，只是寻找一些提示。提前致谢。

```
private static void SendEmail(System.Net.Mail.MailMessage m, Boolean Async)
    {

    using (var smtpClient = new System.Net.Mail.SmtpClient(EmailList.SMTP_GOOGLE, 587))
            {
                smtpClient.EnableSsl = true;
                smtpClient.UseDefaultCredentials = false;
                smtpClient.Credentials = new NetworkCredential("email@domain.com","password");
                smtpClient.DeliveryMethod = System.Net.Mail.SmtpDeliveryMethod.Network;
                smtpClient.Timeout = 3000000;

                if (Async)
                {
                    object userState = m;
                    smtpClient.SendCompleted += new SendCompletedEventHandler(Smtp_OnComplete);
                    try
                    {
                        smtpClient.SendAsync(m, userState);
                    }
                    catch (Exception ex)
                    {
                            //Logging

                    }
                }
                else
                {
                    try
                    {
                        smtpClient.Send(m);
                    }
                    catch (Exception ex)
                        //Logging

                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T16:56:02.523

您的`using`声明是`SmtpClient`在异步发送完成之前处理。
那是行不通的。

相反，您可以使用 C# 5`await`在语句内等待异步发送完成`using`，或者完全摆脱`using`异步发送并`SmtpClient`在完成事件中处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T20:25:11.957

> 我只是设置了一个简单的控制台应用程序来运行测试方法

因为电子邮件是异步发送的，所以控制台应用程序将在不同的线程中启动该方法并继续其自己的执行。如果它在发送实际电子邮件的方法完成之前关闭，则电子邮件将无法发送，因为 Visual Studio 将终止该线程。尝试在呼叫后添加以下行以发送电子邮件以使控制台应用程序等待几秒钟：

```
System.Threading.Thread.Sleep(5000); 
```

这应该足够长，以便电子邮件方法在控制台应用程序关闭和 Visual Studio 终止所有进程之前发送电子邮件并完成。该代码应该可以在 Web 服务器上正常工作。

# ios-simulator - 从命令行设置 iOS 模拟器的版本

> ID：16109760
> 
> 赞同：2
> 
> 时间：2013-04-19T16:55:03.367
> 
> 标签：ios-simulator, ios-ui-automation

上下文：使用 Xcode 的 UIAutomation 和模拟器 6.1 和 5.1 运行自动化脚本 Xcode 版本是 4.6.1

问题：从终端运行 shell 脚本时，UIAutomation 总是打开 6.1，即使我已将应用程序路径设置为 5.1。

我已经尝试在 5.1 上构建和运行，如果我从 Instruments 运行测试，我可以选择 5.1 的目标并且它工作正常。问题只是当我从命令行运行它时。

我检查了 iphonesimulator.plist 并且 currentSDKRoot 指向 5.1 路径，但是一旦 shell 脚本运行，它就会更改为 6.1。无论如何我可以强制它使用5.1吗？

经过数小时的搜索（包括最合适的一个 -[使用仪器命令行实用程序启动特定硬件版本的 iOS 模拟器](https://stackoverflow.com/questions/12836129/launch-a-specific-hardware-version-of-ios-simulator-using-instruments-command-li)），似乎没有解决方案。

有一种方法可以使用默认值设置设备 write com.apple.iphonesimulator \"SimulateDevice" '"iPad"' 我需要类似 defaults write com.apple.iphonesimulator \"Version" '"5.1"' 虽然显然没有'不工作。

任何指针将不胜感激。谢谢你！

编辑：我希望这可以通过 XCode 5 解决，但我仍然有同样的问题，iOS7 模拟器总是打开！顺便说一句，有没有办法绕过这个问题 - 我敢肯定有很多运行多个模拟器版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T22:21:37.107

这并不优雅，但它是一种解决方法，我们已经能够开始我们的自动化设置：

从 App Store
安装 Xcode 5 安装 Xcode 4.6.3 或从开发人员门户的“Xcode 旧版本页面”
重复旧版本的 Xcode，其中最大 sim 版本 == 您要运行的版本
使用“sudo xcode-select - switch */path/to/Xcode.app* " 选择 Xcode 的版本

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T01:22:43.277

### 在我的 Jenkins 机器上运行自动化测试时，我也遇到了这个问题，我做了以下操作来使用 6.1 版模拟器而不是 7.0 版模拟器测试我的应用程序：

### 使用詹金斯：

第 1 步 = 我创建了一个使用 6.1 sdk 版本构建我的 ios 应用程序的作业。

### ============================================

第 2 步 = 我使用第一个作业的下游 bash 脚本创建了第二个作业，该脚本执行以下操作：

### [进入 Xcode 应用程序位置进入 iphone 模拟器 sdk 目录]

cd '/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/'

### [将'iPhoneSimulator7.0.sdk'目录移动到另一个位置（我选择了桌面）]

echo [在此处输入管理员密码] | sudo -S mv iPhoneSimulator7.0.sdk/${HOME}/Desktop

### [将“iPhoneSimulator6.1.sdk”重命名为“iPhoneSimulator7.0.sdk”]

echo [在此处输入管理员密码] | sudo -S mv iPhoneSimulator6.1.sdk/ iPhoneSimulator7.0.sdk/

### ============================================

STEP 3 = 我创建了执行我的测试的第三个作业。我的第二份工作下游的第三份工作。

### ============================================

第 4 步 = 我创建了第 3 个作业下游的第 4 个作业。第 4 个作业使用 bash 脚本，该脚本执行以下操作：

### [进入 Xcode 应用程序位置进入 iphone 模拟器 sdk 目录]

cd '/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/'

### [将“iPhoneSimulator7.0.sdk”重命名为“iPhoneSimulator6.1.sdk”]

echo [在此处输入管理员密码] | sudo -S mv iPhoneSimulator7.0.sdk/ iPhoneSimulator6.1.sdk/

### [转到您移动“iPhoneSimulator7.0.sdk”的目录（在我的情况下，我将“iPhoneSimulator7.0.sdk”移动到桌面）]

cd ${HOME}/桌面

### [将'iPhoneSimulator7.0.sdk'目录移回Xcode app sdk目录]

echo [在此处输入管理员密码] | sudo -S mv iPhoneSimulator7.0.sdk/'/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/'

### [我杀死任何与自动化相关的挥之不去的进程]

ps ax|grep [b]ash|awk '{print $1}'|xargs kill -9

ps ax|grep [i]nstruments|awk '{print $1}'|xargs kill -9

### ============================================

我可能需要让这个过程更加简单，但我认为它比在自动化机器上拥有多个 xcode 实例更好。

# cordova - 带有 PhoneGap 的 Google+ 登录按钮

> ID：16109762
> 
> 赞同：7
> 
> 时间：2013-04-19T16:55:05.547
> 
> 标签：cordova, google-plus, phonegap-plugins

我们如何在 Phonegap 中使用 JS Google+ 登录按钮？专门针对iOS？我找到[了这篇](http://lifehacker.com/302197/useful-command-line-tricks-for-mac-users)关于使用 phonegap 和 childbrowser 插件进行 oauth 的文章，但是我不确定该方法是否适用于 Google+ 登录按钮。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T15:42:24.860

Google+ 登录按钮在 PhoneGap 中对您不起作用，因为 Phonegap 如何提供内容（基本上它被视为 file://），这会导致一些与按钮本身或 API 控制台配置相关的问题.

您要做的是为 PhoneGap 使用 OAuth 插件，并将您的 phonegap 应用程序视为“已安装的应用程序”。我快速浏览了以下教程，它似乎是一个准确的设置和过程：

[http://www.itsalif.info/content/oauth-google-api-gapi-phonegap-childbrowser-jquery](http://www.itsalif.info/content/oauth-google-api-gapi-phonegap-childbrowser-jquery)

您仍然可以`https://www.googleapis.com/auth/plus.login`使用这种方法请求 Google+ 登录范围 ( )，并利用大多数新的 Google+ 功能。

我很想知道你是否能成功，所以如果你成功了，请稍后发表评论。

# php - PHP 返回大量空格

> ID：16109765
> 
> 赞同：0
> 
> 时间：2013-04-19T16:55:09.147
> 
> 标签：php, javascript, ajax, forms

我有一个使用 AJAX 的登录脚本，但我的代码有问题，我无法解决。

这是代码：

JS：

```
$(document).ready(function(){
        $("#loginForm").submit(function(){

            $("#report").removeClass().addClass('loader').html('Loading...').fadeIn(1000);

            $.post("check_login.php",{ username:$('#signin_username').val(),password:$('#signin_pwd').val()},function(data){
                console.log(data);
                if(data == "TRUE"){
                    document.write(data);
                    console.log("YEP");
                    $("#report").fadeTo(200,1,function(){            
                        $(this).html('Logging in.....').addClass('log').fadeTo(900,1,function(){                 
                            document.location='members/index.php';
                        });           
                    });
                }
                else if(data == "FALSE"){
                    console.log("NOPE")
                    $("#report").fadeTo(200,1,function(){             
                        $(this).html('Username or password error.').addClass('error').fadeTo(900,1);
                    });     
                }
            });
            return false; 
        });

        $("#password").blur(function(){
            $("#login_form").trigger('submit');
        });
}); 
```

形式：

```
<div id="login_form">
            <h3>Login</h3>
            <div id="signup_link">
                <a href="signup/">Signup Now</a>
            </div>
            <div id="report"></div>
            <form action="" method="post" id="loginForm">
                <ul>
                    <li>
                        <label for="username">Email: </label>
                        <input type="text" id="signin_username" name="signin_username" required="required" />
                    </li>
                    <li>
                        <label for="pwd">Password: </label>
                        <input type="password" id ="signin_pwd" name="signin_pwd" required="required" />
                    </li>
                    <li>
                        <input type="submit" name="login" id="login" value="Login"/>
                    </li>
                    <li><a href="members/forgotPass.php" class="forgot_pass">Forgot Password</a></li>
                </ul>
            </form>
        </div> 
```

和由js调用的PHP文件：

```
require_once 'members/classes/Membership.php';

# Make instance of membership class
$membership = new Membership();

$true = "FALSE";
$false = "FALSE";

if(!empty($_POST))
{       
    $username   = $_POST['username'];
    $pwd        = $_POST['password'];

    if($test = $membership->validate_user($username, $pwd))
        echo $true;
    else 
        echo $false;
}
else 
{
    echo "Details werent entered";  
} 
```

基本上，php脚本调用的方法会检查数据库以查看用户详细信息是否匹配以及是否允许登录，如果是则返回true，否则返回false（这是它将返回的仅有的两个值。

所以它可以工作文件，直到我们回到 js 代码，注意第一个“console.log”这个输出似乎在我正在寻找这样的单词之前有大量的空白：

"

真的”

真实之上的空间什么都不是，所以当我测试`if(data == "TRUE")`它永远不会是真实的。

要么发生了一些奇怪的事情，要么我错过了一些非常愚蠢的事情。任何人都可以看到有什么问题吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T16:56:18.393

确保您没有任何输出空格的包含文件。很容易犯这个错误。

# jquery - 为什么在我自己包含它之后 jQuery 会“重新加载”自己（通过 Ajax）？

> ID：16109773
> 
> 赞同：12
> 
> 时间：2013-04-19T16:55:30.820
> 
> 标签：jquery

我在网页上看到一些奇怪的行为......我使用常规脚本标签包含了 jQuery（和 jQuery UI）。当页面加载时，我看到文件已加载（来自本地浏览器缓存，因为文件上有遥远的 Expires 标头）。

但是，似乎 jQuery 本身发起了一个新的网络请求以再次获取自身，包括导致文件下载的随机参数值（即不使用缓存版本）。

Chrome 网络标签的截图：

![jQuery 加载自身...？](https://i.stack.imgur.com/1sg1J.jpg)

这很奇怪......这里发生了什么？

**更新：**触发此行为的代码如下：

```
 $(window).load(function() {
     $("#t20ContentRightWrapper").toggle("slide", { direction: "right" }, 400);
   }); 
```

如果我改成这个，“双重加载”就会消失：

```
 $(window).load(function() {
       $("#t20ContentRightWrapper").toggle("fade", 400);
   }); 
```

所以基本上，当我使用“幻灯片”动画时，jQuery 和 jQuery UI 会重新加载额外的网络请求，而使用“淡入淡出”动画则不会。

我想使用“幻灯片”动画，所以我需要知道这里发生了什么......！

**更新 2：**这是一个屏幕截图，显示了将鼠标悬停在 Chrome 中的“Initiator”脚本上时的调用堆栈：

![细节](https://i.stack.imgur.com/CUGUJ.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T00:08:34.893

你也可以试试

```
$(function() {
   $("#t20ContentRightWrapper").toggle("slide", { direction: "right" }, 400);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T20:43:01.003

没有完整的页面代码很难说，我的猜测是 jQuery 包含的代码在切换的容器内

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T23:18:05.533

您是否尝试过用简单的段落替换 #t20ContentRightWrapper 的内容？如果解决了它，您可以取出部分内容以找到有问题的位。另外，也许您有两个具有相同 id 的元素。您也可以尝试重新下载并替换您的 jquery.js 文件。您仍然可以从 github 获得 1.7.1。但如果我是你，我也会尝试当前版本并保留它，除非它破坏了一些东西。

如果问题仍然存在，如果您能说出我们可以在哪些浏览器/操作系统和版本上重现它会很有帮助？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T20:47:52.587

[jQuery 文档对.load()](http://api.jquery.com/load-event/)方法有以下警告-

> Ajax 模块还有一个名为.load() 的方法。哪个被触发取决于传递的参数集。

你可以试试这个来排除任何歧义

```
$(window).on("load", function(){
    $("#t20ContentRightWrapper").toggle("slide", { direction: "right" }, 400);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-29T20:33:54.187

你试过使用*slideToggle()*吗，可能是这样的：

```
 $(window).load(function() {
     $("#t20ContentRightWrapper").slideToggle();
   }); 
```

无论如何，slideToggle 运动效果默认为 400

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-20T19:21:17.243

你检查过回调的内容吗？我知道这听起来很明显，但你确定 jquery 库不包含在从 ajax 回调返回的 html 中。这可能是它加载两次的最可能原因。检查回调响应，看看它是否从那里加载。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-22T05:18:09.313

load 函数的含义与我认为您所期望的不同：

> 此方法是从服务器获取数据的最简单方法。它大致相当于 $.get(url, data, success) ，只是它是一个方法而不是全局函数，并且它具有隐式回调函数。当检测到成功响应时（即当 textStatus 为“success”或“notmodified”时），.load() 将匹配元素的 HTML 内容设置为返回的数据。这意味着该方法的大多数用途都非常简单：

也许您想改用它：

`

```
$(function() {
     $("#t20ContentRightWrapper").toggle("slide", { direction: "right" }, 400);
   }); 
```

`

# javascript - 将纹理与 Three.js 和 PLY 文件一起使用

> ID：16109774
> 
> 赞同：2
> 
> 时间：2013-04-19T16:55:31.617
> 
> 标签：javascript, three.js

我现在可以很好地加载 ascii ply 文件，但是它有纹理，无论我如何配置，我似乎都无法加载它。

```
 cameraMain = new THREE.Camera(8, MainWidth / MainHeight, 1, 10000);
sceneMain = new THREE.Scene();
ambientLightMain = new THREE.AmbientLight(0x202020);
directionalLightMainRight = new THREE.DirectionalLight(0xffffff, 0.5);
directionalLightMainLeft = new THREE.DirectionalLight(0xffffff, 0.5);
pointLightMain = new THREE.PointLight(0xffffff, 0.3);

directionalLightMainRight.position.x = dlpx;
directionalLightMainRight.position.y = dlpy;
directionalLightMainRight.position.z = dlpz;
directionalLightMainRight.position.normalize();

directionalLightMainLeft.position.x = -dlpx;
directionalLightMainLeft.position.y = dlpy;
directionalLightMainLeft.position.z = dlpz;
directionalLightMainLeft.position.normalize();  

pointLightMain.position.x = plpx;
pointLightMain.position.y = plpy;
pointLightMain.position.z = plpz;

sceneMain.addLight(ambientLightMain);
sceneMain.addLight(directionalLightMainRight);
sceneMain.addLight(directionalLightMainLeft);
sceneMain.addLight(pointLightMain);

rendererMain = new THREE.WebGLRenderer();
texture = THREE.ImageUtils.loadTexture('3D/'+ mainURL +'.jpg', {}, function() {
    rendererMain.render(sceneMain);
});

rendererMain.domElement.style.backgroundColor = backgroundColor;
rendererMain.setSize(MainWidth, MainHeight);
rendererMain.domElement.addEventListener('DOMMouseScroll', onRendererMainScroll, false);
rendererMain.domElement.addEventListener('mousewheel', onRendererMainScroll, false);
rendererMain.domElement.addEventListener('dblclick', onRendererMainDblClick, false);
rendererMain.domElement.addEventListener('mousedown', onRendererMainMouseDown, false);

$("#viewerMain").append(rendererMain.domElement);

window.addEventListener('mousemove', onMouseMove, false);
window.addEventListener('mouseup', onMouseUp, false); 
```

那段代码初始化模型。其中一些不需要用于问题目的，它具有用于缩放、旋转等的代码。我知道还有另一行，我已将其注释掉，但由于某种原因它不会在这里显示，所以我将单独进行。

```
material = new THREE.MeshBasicMaterial({map: texture}); 
```

该行位于 loadTexture 代码之后。

其余部分加载了 loadPly 函数

```
 var geometryMain = new THREE.Geometry();
    for (i in event.data.content[0])
      geometryMain.vertices.push(new THREE.Vertex(new THREE.Vector3(event.data.content[0][i][0], event.data.content[0][i][1], event.data.content[0][i][2])));
    for (i in event.data.content[1])
      geometryMain.faces.push(new THREE.Face3(event.data.content[1][i][0], event.data.content[1][i][1], event.data.content[1][i][2]));
    geometryMain.computeCentroids();
    geometryMain.computeFaceNormals();
    mainModel = new THREE.Mesh(geometryMain, new THREE.MeshLambertMaterial({color:0xffffff, shading:THREE.FlatShading}));
    sceneMain.addObject(mainModel);
    mainModel.overdraw = true;
    mainModel.doubleSided = true; 
```

我尝试调整 THREE.mesh() 部分以包含材料，但它破坏了一切。我已经尝试将 map:material 添加到 MeshLambertMaterial 中，也是不行的。任何人有任何见解？对不起，如果这太复杂了，但我还远远不够了解这一点，以至于效率还不够高。

如果我添加

```
map:THREE.ImageUtils.loadTexture('3D/'+ mainURL +'.jpg') 
```

到 THREE.Mesh() 行，我得到

> .WebGLRenderingContext：GL 错误：GL_INVALID_OPERATION：glDrawElements：尝试访问属性 2 中超出范围的顶点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T08:43:12.867

为了在对象上显示纹理，它需要纹理坐标。您似乎只向几何图形添加顶点和面。查看`THREE.PLYLoader`来源，它似乎不支持加载纹理坐标。（虽然我不确定您是否使用该加载器，因为它应该已经返回一个就绪`Geometry`实例，而不是要求您手动构造数组）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-13T10:55:29.773

使用 THREE.MeshNormalMaterial。当您使用 MeshNormalMaterial 时，它会显示纹理。

# c++-cli - “System.IO.FileNotFoundException”类型的未处理异常

> ID：16109777
> 
> 赞同：-1
> 
> 时间：2013-04-19T16:55:45.070
> 
> 标签：c++-cli

我为 C++/CLI 中的 C++ dll 制作了一个包装器，以便与 c++ 程序一起使用。当我从该包装器调用具有类声明的函数时，出现此错误：

EMWCADLink.dll 中出现“System.IO.FileNotFoundException”类型的未处理异常

附加信息：无法加载文件或程序集“Nom，Version=1.0.0.0，Culture=neutral，PublicKeyToken=7210645d4d5e3a39”或其依赖项之一。该系统找不到指定的文件。

我在“添加引用...”中添加了这个包装 dll，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:58:48.557

您要包装的 dll 必须位于可执行文件的目录或路径中。最可能的情况是，当运行时尝试加载包装器时，包装器会查找 c++ dll 并失败。

# boost - 在 ubuntu 上使用 boost 的英特尔 icpc 编译器错误

> ID：16109781
> 
> 赞同：0
> 
> 时间：2013-04-19T16:55:55.467
> 
> 标签：boost, compiler-errors, icc

我正在尝试让 Boost 在 Ubuntu 上与英特尔的编译器 icpc 一起工作。[我的管理员从此网页](http://packages.ubuntu.com/lucid/libboost-all-dev)安装了该软件包。我现在正在尝试[从 Boost 的网页上运行一个基本示例](http://www.boost.org/doc/libs/1_40_0/more/getting_started/unix-variants.html#link-your-program-to-a-boost-library)，编译如下：

```
icpc -I /usr/include/boost example.cpp -L/usr/lib/ -lboost_regex, 
```

我得到了一堆这种形式的编译器错误：

```
/usr/include/boost/smart_ptr/detail/shared_count.hpp(233): error: copy constructor for class "boost::detail::shared_count" may not have a parameter of type "boost::detail::shared_count"
  shared_count(shared_count && r): pi_(r.pi_) // nothrow
/usr/include/boost/smart_ptr/detail/shared_count.hpp(233): error: expected a ")"
  shared_count(shared_count && r): pi_(r.pi_) // nothrow
/usr/include/boost/smart_ptr/detail/shared_count.hpp(233): error: identifier "r" is undefined
  shared_count(shared_count && r): pi_(r.pi_) // nothrow
/usr/include/boost/smart_ptr/detail/shared_count.hpp(340): error: copy constructor for class "boost::detail::weak_count" may not have a parameter of type "boost::detail::weak_count"
  weak_count(weak_count && r): pi_(r.pi_) // nothrow 
```

等等。令人惊讶的是（或不是），这件事在 g++ 上运行良好，只需写：

```
g++ example.cpp -o example.out -lboost_regex 
```

如果您能帮我解决这个问题，我将不胜感激。干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:06:51.157

您发布的链接指向`boost 1.40`，而您遇到的问题似乎[自 1.47 以来已修复](https://svn.boost.org/trac/boost/ticket/5878)。（注意[当前的 boost 版本是 1.53](http://www.boost.org/users/history/version_1_53_0.html)。）

# highcharts - Highcharts 不呈现数据点

> ID：16109784
> 
> 赞同：0
> 
> 时间：2013-04-19T16:56:01.323
> 
> 标签：highcharts, highstock

我正在从数据库中提取一些数据，我试图将这些数据呈现到 Highcharts 股票图表中。使用 PHP 从数据库中提取数据并通过`$.get(..php/line-data.php)`调用传递给图表，检索到的数据*应该*是在图表上呈现的数据。

数据以下列方式返回，我已通过登录`data`控制台验证了这一点。它看起来是这样的，第一个值是 UNIX 到 Javascript 转换的日期/时间（x 轴），第二个值是值（y 轴）：

```
[[1362639600000, 8],[1362726000000, 20],[1362985200000, 28],[1363071600000, 51],[1363158000000, 64],[1363244400000, 11],[1363330800000, 4],[1363503600000, 4],[1363590000000, 21],[1363676400000, 10],[1363762800000, 31],[1363849200000, 13],[1363935600000, 17],[1364194800000, 10],[1364454000000, 1],[1365058800000, 30],[1365145200000, 10],[1366009200000, 55],[1366182000000, 18],[1366268400000, 22],[1366354800000, 12]] 
```

作为一个实验，我尝试将这些数据直接插入一个基本的演示 Fiddle，它似乎渲染得很好。

[**小提琴在这里。**](http://jsfiddle.net/v7gF4/)

**那么我做错了什么？一切似乎都设置正确，但它没有渲染。这就是我所看到的：**

![在此处输入图像描述](https://i.stack.imgur.com/pPpr5.png)

* * *

这是我的代码的相关部分。**是的，我知道 mysql_* 已被弃用...我会更改它。**

```
$.get('../php/line-data.php', function(data) {
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'total_mentions',
            margin: [20, 10, 10, 10],
            spacingTop: 0,
            spacingBottom: 1,
            spacingLeft: 0,
            spacingRight: 0
        },

        series : [{
            name : 'Total Mentions',
            data: data,
            type:'line',
            lineWidth:1,
            shadow:false,
            states: {
                hover: {
                    lineWidth:1
                }
            },
            id : 'dataseries',
            tooltip : {
                valueDecimals: 4,
                borderColor:'#DA7925',
                borderRadius: 0,
                borderWidth: 1,
                shadow: false
            },
            color:'#DA7925',
            fillOpacity:0.2
        }]
[more options...etc.] 
```

* * *

这段代码没有问题。它正在提取正确的数据并与我的期望相呼应。

```
<?php

    $expAddress = "URL";
    $expUser = "USERNAME";
    $expPwd = "PASSWORD";
    $database = "DB";
    $db = mysql_connect($expAddress, $expUser, $expPwd);
    mysql_select_db($database, $db);

    $ok = mysql_query("
                        SELECT 
                            DATE(created_at) AS create_date,
                            COUNT(id) AS total
                        FROM
                            tweets
                        WHERE 
                            subject LIKE 'word1'
                        OR  
                            subject LIKE 'word2'
                        GROUP BY 
                            DATE(created_at)");

    if (!$ok) {
        echo "<li>Mysql Error: ".mysql_error()."</li>";
    }
    else {
        while($row = mysql_fetch_assoc($ok)){           
            extract($row);
            $date = strtotime($create_date);
            $date *= 1000;
            $data[] = "[$date, $total]";
        }
        $tmp = join($data,',');
        echo "[".$tmp."]";
    }

?> 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T19:08:41.127

您是否尝试过`data (string)`在将其设置为 javascript 对象之前将其解析为 javascript 对象`series[i].data`？

```
series : [{          
            data: JSON.parse(data)
        }] 
```

您从 php 获得`$.get`的基本上是`string`，而不是数字数组的 javascript 数组，这就是您想要的。它可能看起来像那样，但它很简单`"5"!=5`，但`parseInt("5")==5`json 对象也是如此，您需要将字符串解析为这样的对象，然后 javascript 或 highcharts 才能正确解释它，highcharts 可以代表您完成，但是它不是那样设计的。

[**试试他的小提琴**](http://jsfiddle.net/jugal/82Tqm/)来了解图片中的数据类型

```
var data="[[1362639600000, 8],[1362726000000, 20],[1362985200000, 28],[1363071600000, 51],[1363158000000, 64],[1363244400000, 11],[1363330800000, 4],[1363503600000, 4],[1363590000000, 21],[1363676400000, 10],[1363762800000, 31],[1363849200000, 13],[1363935600000, 17],[1364194800000, 10],[1364454000000, 1],[1365058800000, 30],[1365145200000, 10],[1366009200000, 55],[1366182000000, 18],[1366268400000, 22],[1366354800000, 12]]"
console.log(typeof data);    //string
var parsedData=JSON.parse(data);
console.log(typeof parsedData);    //object
console.log(typeof parsedData[0]);    //object [1362639600000, 8]
console.log(typeof parsedData[0][0]);    //number 1362639600000 
```

当您将控制台值直接粘贴到小提琴中时，实际上是将其粘贴为有效的 javascript 数组，请尝试使用用`"`引号括起来的控制台值`"`，看看是否重现了确切的问题！

**[演示@jsFiddle](http://jsfiddle.net/jugal/nAsnN/)**

另一种方法可能是使用该[**`$.getJSON()`**](http://api.jquery.com/jQuery.getJSON/)方法。jQuery 在调用您的回调方法之前为您进行解析

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-20T07:59:43.107

您的问题出在 PHP 脚本的输出中或当您在 Javascript 中接收数据时（非常明显）。

首先，不要使用 json_encode ( [http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php) ) 手动执行 JSON。它更容易，它将保证字符串将被正确转义。

其次，`data`使用调试器检查您的变量。您还可以将变量的确切内容发布到问题中。

但基本上，只要它在小提琴中而不是在您的程序中工作，您还没有在小提琴中正确地重现代码中的错误。

例如，您可以将`data`回调中的数据替换为小提琴中的数据，以查看代码是否运行。

# c# - 使用 Fluent NHibernate 映射或模仿多对任意关系的选项？

> ID：16109785
> 
> 赞同：0
> 
> 时间：2013-04-19T16:56:01.417
> 
> 标签：c#, nhibernate, fluent-nhibernate

**编辑 - 快速总结**

我意识到我有相当多的文字，所以这里是这个问题的快速总结：

*   `<many-to-any />`Fluent NHibernate不[支持](https://github.com/jagregory/fluent-nhibernate/issues/56)
*   想要拆分 XML 和 Fluent 之间的属性映射以映射 `<many-to-any />`关系
*   发现这可以通过[命名查询来实现](https://stackoverflow.com/questions/1613904/nhibernate-fluent-and-named-queries)
*   当我尝试同时使用 XML 和 Fluent 作为我的界面时，我得到一个`NHibernateDuplicateMappingException`
*   当尝试仅对接口使用 XML 并为我的子类使用 Fluent 时，XML 映射使其进入数据库，但 Fluent 被忽略。

因为我定义了很多约定，所以我不希望仅将 XML 用于此类层次结构。

**此外，如果有人知道在 Fluent 中使用多对任意的替代解决方案，我非常愿意尝试一下。**

* * *

**编辑 - 完整的问题和代码示例**

我有两个共享多对多关系的类（我们称它们为“Foo”和“Bar”）。通常，用 Fluent 映射 this 就像扔进`HasManyToMany(x => x.SomeProperty)`我的类映射一样简单；但是，我的一个界面遇到了问题。

作为参考，这里是对象的基本示例设置：

```
public class Foo
{
    public virtual long ID { get; set; }
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
    public virtual IList<IBar> Bars { get; set; }
}

public interface IBar
{
    long ID { get; set; }
    IList<Foo> Foos { get; set; }
} 
```

由于 IBar 是一个几乎可以附加到任何类的接口，因此将在中间表上引用的任何“BarID”都可以属于任意数量的其他表。由于这是一个[“多对任意”](http://ayende.com/blog/3967/nhibernate-mapping-many-to-any)关系，[Fluent 仍然不支持](https://github.com/jagregory/fluent-nhibernate/issues/56)它（是的，我知道 NHibernate 的[mapping-by-code](http://notherdev.blogspot.com/2012/02/nhibernates-mapping-by-code-summary.html)支持它）。

幸运的是，NHibernate 的 xml 映射仍然可以在使用 Fluent 的项目中轻松使用。不过，我不想在 *.hbm.xml 文件中定义整个映射，我只想映射`<many-to-any />`. 其余部分，我想保留在 Fluent 映射中（基本上，将映射分成两个文件）。

[我知道这对于命名查询和存储过程](https://stackoverflow.com/questions/1613904/nhibernate-fluent-and-named-queries)之类的东西是可能的，但是我在使用这种模式来定义我的关系时遇到了一些麻烦。

这是我的 Foo 类的 Fluent 映射，就像现在一样：

```
public class FooMap : ClassMap<Foo>
{
    public FooMap()
    {
        Id(x => x.ID);
        Map(x => x.Name);
        Map(x => x.Description);
    }
} 
```

这里是 Foo.hbm.xml 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="MyProject" namespace="MyProject.Entities">
    <class name="Foo" table="Foos"> 
        <id name="ID">      
            <generator class="identity" />
        </id>
        <bag name="Bars" table="FooBarRelationship">
            <key column="ID" />
            <many-to-any id-type="System.Int64" meta-type="System.String">
                <column name="BarID" />
                <column name="BarType" />
            </many-to-any>
        </bag>
    </class>
</hibernate-mapping> 
```

就其本身而言，这两个都可以正常工作。例如，如果我只是使用 Fluent 映射，那么我的 Foo 表是使用三个映射列生成的。同样，如果我只使用 xml，那么 NHibernate 会创建一个带有 ID 的 Foo 表和一个 FooBarRelationship 表，其中包含 ID、Foregin Keys 和 BarType 列。但问题是：**当我尝试同时使用 xml 和 Fluent 映射时，我得到一个`NHibernateDuplicateMappingException`**. 此外，如果我只对接口使用 XML，而对子类使用 Fluent，则完全忽略 Fluent 映射（即，它就像我只有 xml）。

我已经做了很多搜索，但我无法找到任何可能有帮助的信息。我可以对地图（甚至配置）做些什么来让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T16:08:16.913

我认为您最终可能不得不将整个 Foo 映射（和子类）放在 XML 文件中。我相信你可以将流利的映射和hbm映射结合起来是对的，但我不相信当它们用于同一个实体时你可以做到这一点，也许这也适用于子类？当通过与子类不同的方式定义根类（或接口）映射时，它似乎遇到了问题。

您可能想尝试尽可能多地为该接口及其子类进行流利的映射，然后运行您的应用程序并将配置导出到 hbm 文件。

```
.Mappings(m =>
{
    m.FluentMappings.ExportTo(@"C:\")
} 
```

从那里修剪到只是接口的映射及其子类，然后添加您的多对任意映射。我不会假装它是一个干净的解决方案，但我不熟悉 nHibernate 映射的深层内部结构，以了解它如何合并来自 hbm 文件的映射与流畅或冗长的映射之类的东西。

我不确定你还能尝试什么，除了切换到 nHibernate 的 loquacious 映射（如果不是因为它们不支持多对多映射上的 where 子句，我也很想尝试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-19T14:11:13.737

我遇到了同样的问题，并想出了一个半优雅的解决方案。不能在 .hbm.xml 文件中流畅地映射同一个类。但是，您*可以*单独映射子类。我的解决方案是创建一个抽象的 FooBase 类，该类被流畅地映射并包含除了 FluentNHibernate 不支持的功能之外的所有内容。然后，创建一个继承 FooBase 的具体 Foo 类，并将 Foo 类（仅不支持的功能）映射到 .hbm.xml 文件中。

缺点是它需要对您的域结构进行轻微修改，但 IMO 它比尝试导出和操作 FluentNHibernate 生成的 XML 更优雅。

# javascript - 为什么 mongodb find() 从来没有得到我的回调

> ID：16109788
> 
> 赞同：4
> 
> 时间：2013-04-19T16:56:07.483
> 
> 标签：javascript, node.js, mongodb, mongoose

我正在尝试使用 mongodb（带有 mogoose）和带有 restify 的 node.js 构建类似 rest 的 API。我是 mongo 世界的绝对新手，我不确定问题出在哪里。这是数据库连接的问题，还是其他问题？

所以，我这样做： **rest-server.js**

```
//start server
var restify = require('restify');
var server = restify.createServer();
server.use(restify.bodyParser());

//connect db
var config = require('./Config.js');
var mongoose = require('mongoose'),   
db = mongoose.createConnection('localhost', 'travelers'),
Schema = mongoose.Schema,
ObjectId = mongoose.SchemaTypes.ObjectId;

db.on('error', console.error.bind(console, 'DB connection error:'));
db.once('open', function callback() {
    console.log('db connection open');
});

var LoginModel = require('./models/LoginModel.js').make(Schema, mongoose);
var LoginResource = require('./resource/LoginResource.js')(server, LoginModel); 
```

**登录模型.js**

```
function make(Schema, mongoose) {
    var LoginSchema = new Schema({
        //id: (?)
        username: String,
        password: String,
        traveler_id: Number,
        contact_id: Number,
        last_login: Date,
        token: String
});
    return mongoose.model('Login', LoginSchema);
}

module.exports.make = make; 
```

**登录资源.js**

```
exports = module.exports = function (server, LoginModel) {
    var LoginRepository = require('../repository/LoginRepository.js');

    server.get('/login/:username/:password', function (req, res, next) {    
        LoginRepository.getLogin(req, res, next, LoginModel);
    });
} 
```

**LoginRepository.js**

```
function getLogin(req, res, next, LoginModel) {
    var query = LoginModel.find({ username: req.params.username, password: req.params.password});

    query.exec(function (err, docs) {
        console.log('got it!');
        res.send(docs);
    });
} 
```

测试查询 **curl localhost:8080/login/qqq/www**

所以我从来没有去`res.send(docs);` 实际上，我没有向数据库添加任何东西。我只想知道查询没有找到任何东西。

**更新：** 我不明白为什么，但是如果我像这样更改数据库连接代码，可以解决这个问题：

```
//connect db
var config = require('./Config.js');
var mongoose = require('mongoose/');
db = mongoose.connect(config.creds.mongoose_auth),
Schema = mongoose.Schema; 
```

（使用**mongoose.connect**并将**db**和**Schema**变量定义为全局）

但在这种情况下**db.on()**和**db.once()**抛出异常“没有这样的方法”。

换句话说 - 问题嗯......解决了，但我仍然不知道为什么。这看起来像是一个有用的链接：[github 上的 server.js 示例](https://github.com/thomasdavis/backbonetutorials/blob/gh-pages/examples/nodejs-mongodb-mongoose-restify/server.js)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-12T13:47:04.190

您通过调用创建的模型`mongoose.model()`在执行查询时使用 Mongoose 的默认连接池。默认连接池是通过调用创建的`mongoose.connect()`，您使用创建的模型进行的任何查询都将排队，直到您调用它并完成。

您还可以像最初那样调用来创建单独的连接池（可以有自己的模型！）`db = mongoose.createConnection()`，但是您必须为使用创建模型，`db.model()`这就是为什么事情最初不适合您的原因。

# php - PHP如何处理具有动态生成字段的表单？

> ID：16109792
> 
> 赞同：1
> 
> 时间：2013-04-19T16:56:34.277
> 
> 标签：php, forms

我正在尝试处理我提前不知道表单字段将是什么的表单。这仍然可以在 PHP 中完成吗？

例如，我有这个 html 表单：

```
<form method="post" action="process.php">
     <?php get_dynamic_fields(); // this gets all the fields from DB which I don't know ahead of time what they are. ?>
     <input type="submit" name="submit" value="submit" /> 
</form> 
```

这是我在 PHP 进程文件中的内容

```
<?php
if ( isset( $_POST['submit'] ) && $_POST['submit'] === 'submit' ) {
     // process form here but how do I know what field names and such if they are dynamic.
}

?> 
```

这里有一个警告：假设我无法提前从数据库中获取数据，还有办法做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T16:58:18.080

当然，只需[遍历](http://php.net/foreach)[`$_POST`](http://php.net/manual/reserved.variables.post.php)数组中的所有项目：

```
foreach ($_POST as $key => $value) {
    // Do something with $key and $value
} 
```

请注意，您的提交按钮将存在于数组`$_POST`中，因此您可能需要编写一些代码来处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:58:57.050

您可以像这样遍历所有 $_POST 键。

```
foreach($_POST as $key => $value)
{
    echo $key.": ".$value;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T17:00:15.157

这将为您提供 HTML 表单中使用的字段名称。

```
$field_names = array_keys($_POST); 
```

您也可以使用遍历 POST 数组

```
foreach($_POST as $field_name => $field_value) {
    // do what ever you need to do
    /* with the field name  and field value */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T16:59:02.570

从您的函数中获取字段的名称`get_dynamic_fields`并将它们传递到一个隐藏的输入中，该输入始终是一个具有静态名称的数组。然后解析它以获取输入的名称以及输入的数量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T17:00:06.980

你可以遍历 `$_POST 数组的所有部分；

```
foreach($_POST as $key => $value){
   //$key contains the name of the field
} 
```

# xml - 我们可以使用 stax 合并两个 xml 文件吗

> ID：16109796
> 
> 赞同：1
> 
> 时间：2013-04-19T16:56:52.327
> 
> 标签：xml, xml-parsing, jaxb, stax

我需要合并两个 xml 文件。我正在尝试使用 stax 解析器进行调查。我只关心少数特定元素，因为两个 xml 文件中的剩余元素相同。例如：A.xml

```
<report>
    <measurement event-id="2170014015"/>
    <measurement event-id="2170014021"/> 
</report>

B.xml

<report>
    <measurement event-id="2170014011"/>
    <measurement event-id="2170014013"/> 
  <measurement event-id="2170014015"/>
</report>

Output:
<report>
    <measurement event-id="2170014015">
    <measurement event-id="2170014021"> 
  <measurement event-id="2170014011">
    <measurement event-id="2170014013"> 
</report>

These are for understanding purpose(but xml files are pretty big). What is the opinion on using jaxb 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T11:26:26.267

如果这些文件真的很大，那么我不会推荐 JAXB。除非你要投入大量内存。StAX 将是更可取的选择。请参阅本[教程](http://www.ibm.com/developerworks/xml/library/x-tipstx5/)，了解如何使用 StAX 合并多个文档。

# salesforce - 删除 PickList visualforce apex 中的 None 选项

> ID：16109797
> 
> 赞同：2
> 
> 时间：2013-04-19T16:56:57.623
> 
> 标签：salesforce, apex-code, visualforce

我创建了一个名为 PS_Detail__c 的对象。在这个自定义对象中，我创建了一个自定义字段。在这个选项列表中，我定义了两个值 Dollar，Unit ![这是字段描述的屏幕截图。](https://i.stack.imgur.com/pRxh8.png)。当我转到 P/S 详细信息选项卡以创建新的 PS_Detail__c 对象时，我也得到 None 作为选项列表字段中的值。我只想要美元和单位作为选项列表值。有人请帮助如何从选项列表中删除此 None ！ ![在此处输入图像描述](https://i.stack.imgur.com/b9AUV.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:45:09.763

正如您所发现的，您不能在对象级别使该选项列表成为必需。但是，在**页面布局**上将此字段设为必填将从可用选项中删除 -None- 选项。

为此，请编辑对象的页面布局并选择字段旁边的扳手图标： ![选择您的字段旁边的扳手图标](https://i.stack.imgur.com/X7yMK.gif)

然后，您应该可以在弹出的对话框中选中“必填”框： ![检查](https://i.imgur.com/QV2dukq.gif)

# php - getcwd() 和 exec('pwd') 总是匹配吗？

> ID：16109799
> 
> 赞同：4
> 
> 时间：2013-04-19T16:57:01.547
> 
> 标签：php, bash

**问题**

是否`getcwd()`并且`exec('pwd')`总是会返回相同的结果？如果不是在什么情况下他们不会？

**我试过的**

我尝试这样做`exec('cd ..')`，然后`echo exec('pwd')`返回相同的路径，如果我不这样做`cd ..`。这并不让我感到惊讶，因为它`cd ..`可能只`exec()`在它完成的持续时间内存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-16T10:43:21.070

作为“工作目录”的符号链接至少是一种可能不同的情况——即使是内置的 bash ，`getcwd()`也可能在此处有所不同。`exec('pwd')``pwd``/bin/pwd`

```
# ll /res4/Linux/eldk
lrwxrwxrwx 1 armali ARNGO_res4 9 Oct 20  2008 /res4/Linux/eldk -> eldk3.1.1
# cd /res4/Linux/eldk
# php
<?php
echo getcwd(), "\n";
echo exec('pwd'), "\n";
?>
/res4/Linux/eldk3.1.1
/res4/Linux/eldk
# pwd
/res4/Linux/eldk
# /bin/pwd   
/res4/Linux/eldk3.1.1 
```

有以下`pwd`选项：

```
 -L, --logical
          use PWD from environment, even if it contains symlinks

   -P, --physical
          avoid all symlinks 
```

显然，bash 内置`pwd`默认为 -L 和`/bin/pwd`-P。

但是对于大多数用例，包括你的，这两种形式都可以工作，所以这里的区别并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:24:09.903

如果要将相对路径转换为绝对路径，可以使用`realpath()`：

```
$abs_path = realpath('../path/to/binary'); 
```

# jquery - 选择最后一个孩子，并确保它不是唯一的孩子？

> ID：16109802
> 
> 赞同：1
> 
> 时间：2013-04-19T16:57:13.687
> 
> 标签：jquery, jquery-selectors

只有当它是最后一个孩子时，我才需要在内容周围包裹一个 div。我对这段代码的问题是，如果只有一项，它将执行。所以我想知道我应该如何检查只有在有多个孩子时才使用 :last-child 。如果只有一个孩子。我不希望添加 div。这是我的代码：

```
$('div[class^="columns-"]').each(function(){
   $(this).find('div[class^="column"]:last-child').each(function(i){
       $(this).wrapInner('<div class="col-last" />');   
   });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:03:57.750

如果它是唯一的孩子，它也是第一个，所以你可以这样做：

```
$('div[class^="columns-"]').each(function(){
   $(this).find('div[class^="column"]:last-child:not(:first-child)').each(function(i){
       $(this).wrapInner('<div class="col-last" />');   
   });
}); 
```

这样，您可以拥有多组列，并且仍然只获得其中包含多个列的集合的最后一个子项，即，如果您有：

```
<div class="row-1">
  <div class="columns-1"></div>
</div>
<div class="row-2">
  <div class="columns-1"></div>
  <div class="columns-2"></div>
  <div class="columns-3"></div>
</div>
<div class="row-3">
  <div class="columns-1"></div>
</div> 
```

选择器只会影响 .row-2 .columns-3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:11:51.670

[您可以使用过滤器](http://api.jquery.com/filter/)尝试此操作

```
$('div[class^="columns-"]').each(function(){
    $(this).find('div[class^="column"]:last-child')
    .filter(function(){ return $(this).parent().children().length > 1; )
    .each(function(i){
        $(this).wrapInner('<div class="col-last" />');   
    });
}); 
```

[**演示。**](http://jsfiddle.net/c5ueV/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T17:31:26.183

`* + selector` [仅选择元素前面的元素](http://jsfiddle.net/cMEeu/2/)

`:gt(0)` [选择不是第一个的所有元素](http://jsfiddle.net/cMEeu/5/)

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T16:59:18.057

尝试这个

```
 $('div[class^="columns-"]').each(function(){
     if((this).children().length>1)
       $(this).
           find('div[class^="column"]:last-child').
           each(function(i){
               $(this).wrapInner('<div class="col-last" />');   
           });
 }); 
```

`children().length`这将给出子元素的数量

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T17:01:48.267

这应该工作

```
$('div[class^="columns-"]').each(function() {
    var children = $(this).find('div[class^="column"]');
    if(children.length > 1) {
        children.last().wrapInner('<div class="col-last" />');   
    };
}); 
```

# django - 如何允许 NGINX 为多个 Django 应用服务器缓冲

> ID：16109805
> 
> 赞同：1
> 
> 时间：2013-04-19T16:57:18.067
> 
> 标签：django, nginx, gunicorn

如何允许 NGINX 缓冲多个 Django 应用服务器的客户端请求，这些 Django 应用服务器都运行像 Gunicorn 这样的 WSGI 服务器？我需要在配置文件中更改什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T17:21:43.017

使用 nginx 的[upstream](http://wiki.nginx.org/NginxHttpUpstreamModule#upstream)选项定义应用服务器池；当你 proxy_pass 时，你可以 proxy_pass 到命名的上游：

```
upstream my-upstream {
 server 127.0.0.1:9000;
 server 127.0.0.1:9001;
}

location / {
  proxy_pass http://my-upstream;
} 
```

除非您另外指定，否则请求将在不同的上游服务器之间循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-03T11:46:59.127

```
upstream my-upstream {
 least_conn;
 server 127.0.0.1:9000;
 server 127.0.0.1:9001;
}
location / {
  proxy_pass http://my-upstream;
} 
```

假设您在服务器 1 关闭时使用 4 个服务器，那么 nginx 会智能地将您的下一个请求转移到您的下一个可用服务器，一旦服务器 1 启动，那么您的下一个请求将在服务器 1 中再次发送。实际上 nginx 使用循环算法转移请求。

```
upstream my-upstream {
 ip_hash;
 server 127.0.0.1:9000;
 server 127.0.0.1:9001;
}

location / {
  proxy_pass http://my-upstream;
} 
```

在这种情况下，之前的场景将不一样，就像我们总是会从服务器 1 获得响应，当我们的服务器 1 关闭时，它会转到服务器 2，然后当它启动时，它将再次响应服务器 1。

# ssrs-2008 - 使用预过滤的 SSRS 报告

> ID：16109806
> 
> 赞同：1
> 
> 时间：2013-04-19T16:57:19.347
> 
> 标签：ssrs-2008, reporting-services

我想针对与客户合同相关的每个案例运行我的报告。现在，我可以在帐户级别运行报告。我使用了如下过滤视图：

```
dbo.FilteredAccount AS CRMAF_FilteredAccount 
on CRMAF_FilteredAccount.accountid = I.CustomerId 
WHERE A.PartyObjectTypeCode = 8 AND A.PartyIdName IS NOT NULL 
```

我希望能够针对与合同关联的帐户的每个案例运行相同的报告。我尝试使用 FilteredIncident 视图，但我不确定我做得对。

从评论中查询：

```
SELECT I.CustomerIdName AS 'Customer Name',
       S.CreatedOn AS 'Task Start Date',
       S.Subject AS 'Task Performed',
       A.PartyIdName AS 'Resource',
       S.Description,
       cast((S.ActualDurationMinutes / 480) as varchar(5)) +' day(s)' + ', ' +
           cast((S.ActualDurationMinutes% 480) / 60 as varchar(2))+' hour(s)' 
           as 'Time Spent',
       S.ActualDurationMinutes AS 'Total Time',
       S.ActualDurationMinutes AS 'Total' 
FROM dbo.Incident I 
JOIN [dbo].[ServiceAppointment] S ON I.IncidentId = S.RegardingObjectId 
JOIN dbo.ActivityParty A ON S.ActivityId = A.ActivityId 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:07:57.580

您需要在您的选择列表中添加一个 CaseID，并在报告中添加一个参数以与它进行比较。因此，您可以在 WHERE 子句中添加类似的内容：

```
WHERE I.CaseID = @SelectedCase 
```

# wordpress - 将 Wordpress siteurl 和 home 设置从数据库移动到 wp-config.php

> ID：16109811
> 
> 赞同：0
> 
> 时间：2013-04-19T16:57:35.457
> 
> 标签：wordpress

有没有办法可以移动我的 Wordpress 域配置设置：

*   网址
*   家

从数据库 wp-options 表到 wp-config.php？

为了开发目的，我有时希望能够将我的实时数据库与我的本地主机同步，但是每次都必须更改数据库中的这些设置很烦人。

我正在使用 git，并且在我的存储库中有一个 wp-config.production.php 和 wp-config.testing.php，它们在部署时与 Capistrano 进行符号链接，所以理想情况下我想将我的域设置分别添加到这些文件中.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:21:08.077

我想出了以下解决方案，似乎可以正常工作：

将以下内容添加到 wp-config.php

```
/** Domain settings (No trailing slash!)*/
define ('SITEURL', 'http://domain.dev');
define ('HOME', 'http://domain.dev'); 
```

然后在function.php中添加：

```
<?php

update_domain_settings();

/**
 * update_domain_settings
 */
function update_domain_settings()
{
    $domain_updated = false;

    if(get_option('siteurl') != SITEURL) {
        update_option('siteurl', SITEURL);
        $domain_updated = true;
    }

    if(get_option('home') != HOME) {
        update_option('home', HOME);
        $domain_updated = true;
    }

    if($domain_updated === true) {
        header("Location: " . home_url());
        exit;
    }
} 
```

省略 SITEURL 和 HOME 中的尾部斜杠很重要，否则您最终会遇到递归重定向问题。

# logging - log4j 找不到在standalone.xml 中配置的记录器的附加程序

> ID：16109814
> 
> 赞同：4
> 
> 时间：2013-04-19T16:57:46.817
> 
> 标签：logging, log4j, jboss7.x

我在独立模式下将 jboss 用作 7。我在我的应用程序中使用 spring，当我运行我的应用程序时，我在服务器日志中收到以下错误：

```
17:40:19,669 ERROR [stderr] (http-localhost-127.0.0.1-8080-1) log4j:WARN No appenders could be found for logger (org.springframework.core.env.StandardEnvironment).
17:40:19,671 ERROR [stderr] (http-localhost-127.0.0.1-8080-1) log4j:WARN Please initialize the log4j system properly. 
```

所以我通过添加记录器来配置jboss，如下所示：

```
 <logger category="org.springframework.core.env.StandardEnvironment">
            <level name="DEBUG"/>
            <handlers>
                <handler name="CONSOLE"/>
                <handler name="FILE"/>
                <handler name="TESTFILE"/>
            </handlers>
        </logger> 
```

处理程序 CONSOLE 定义如下：

```
 <console-handler name="CONSOLE" autoflush="true">
        <level name="DEBUG"/>
        <formatter>
            <pattern-formatter pattern="%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n"/>
        </formatter>
    </console-handler> 
```

但即使这样做了，我仍然收到同样的错误，为什么？

## 解决方案：

缺少的部分是表明应用程序应该使用`logging`jboss 的子系统作为 (log4j) 位于其目录`modules`中，更准确地说是`org/apache/log4j`. 这是通过将文件添加`jboss-deployment-structure.xml`到包含以下内容的 WEB-INF 来完成的：

```
<jboss-deployment-structure>
    <deployment>
        <dependencies>
            <module name="org.apache.log4j"/>
        </dependencies>
    </deployment>
</jboss-deployment-structure> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:25:44.843

你必须在你的配置中定义一个附加程序：

```
<appender name="springFileAppender" class="org.apache.log4j.DailyRollingFileAppender">
    <param name="File" value="../logs/spring.log" />
    <param name="datePattern" value="yyyy-MM-dd" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d{dd-MM-yyyy kk:mm:ss.SSS} %-5p %c %x - %m%n" />

    </layout>
</appender> 
```

然后从记录器中引用它：

```
<logger name="org.springframework.beans" additivity="true">
    <level value="info" />
    <appender-ref ref="springFileAppender" />
</logger> 
```

此配置将在文件 ../logs/spring.log 中记录来自 Spring Beans 模块的所有信息，阈值为 INFO

编辑：我明白了，您正在将 log4J 与 JBOSS 一起使用！

那么您应该定义处理程序（如我示例中的附加程序）。

与此类似的东西：

```
 <periodic-rotating-file-handler name="FILE">
            <level name="DEBUG"/>
            <formatter>
                <pattern-formatter pattern="%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n"/>
            </formatter>
            <file relative-to="jboss.server.log.dir" path="server.log"/>
            <suffix value=".yyyy-MM-dd"/>
            <append value="false"/>
    </periodic-rotating-file-handler> 
```

# java - android - 通过javascript在webview中请求数据

> ID：16109817
> 
> 赞同：2
> 
> 时间：2013-04-19T16:58:07.027
> 
> 标签：java, android, cordova

我知道你可以定义用于 webviews 的 javascript 接口。你能走另一条路，在你的 webviews 上调用 android 中的 javascript 函数吗？

例如

```
 WebView myWebView = (WebView) findViewById(R.id.webview);
        WebSettings webSettings = myWebView.getSettings();
        webSettings.setJavaScriptEnabled(true);
        myWebView.addJavascriptInterface(new WebAppInterface(this),
                "Android");
        myWebView.loadUrl("http://www.mytest.com/whatever.php?");

        String formValue = myWebView.fireJavascriptFunction("getFormInput"); 
```

我的 html 页面将具有以下 javascript 函数

```
function getFormInput(){
    return $("#myInput").val();
} 
```

想法是从本机按钮的本机 onclick 处理程序触发 getFormInput() 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:09:41.000

一个简单的谷歌搜索“android webview call javascript function”会给你很多例子。[这是一个](https://stackoverflow.com/questions/4325639/android-calling-javascript-functions-in-webview)。但是，您不能从此调用返回值。如果你需要一个返回值，那么你可以在你的 JavaScript 接口对象中实现一个回调方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:14:49.310

您可以简单地调用`myWebView.loadUrl("javascript:getFormInput()");`以运行该功能。

然而，从在 webview 中运行的 javascript 函数获取结果并在 java 代码中使用它比这复杂得多。从 WebView 获取信息非常复杂。您可以在这篇文章中获得更多信息：

[如何从 WebView 获取网页内容？](https://stackoverflow.com/questions/2376471/how-do-i-get-the-web-page-contents-from-a-webview)

# java - 我怎样才能给这一行一个 class="right"

> ID：16109819
> 
> 赞同：0
> 
> 时间：2013-04-19T16:58:08.677
> 
> 标签：java, jsf

我有一个这样的数据表：

```
 <h:dataTable  styleClass="pretty"   value="#{ftController.ftDataModel}" var="item">
                    <h:column headerClass="left">
                        <f:facet name="header">
                            <h:outputText value="Amount"/>
                        </f:facet>
                        <h:outputLink   value="index.jsf"><h:outputText value="#{item.ftType}"/></h:outputLink><br />
                        <h:outputText class="red" id="amount"   value="#{item.amount}"></h:outputText> <h:outputText value="&#160;" /><h:outputText  style="font-size:12px" class="gray" value="TL" />
                    </h:column>
                    <h:column headerClass="right" >
                        <f:facet  name="header">
                            <h:outputText value="Date"/>
                        </f:facet> 
                        <h:outputText value="#{item.date}" />
                    </h:column>
                </h:dataTable> 
```

我想给这个`<h:outputText value="#{item.date}" />`class="right" 我怎样才能**只**在这一行上使用 class 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:36:06.030

如何将输出文本包装在 h:panelGroup 这将生成一个跨度标记并使用 styleclass 您可以分配所需的 css 类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:26:45.863

我可能误解了您的问题，但我怀疑您的问题可能是基于对数据表的错误假设。以这个数据表为例：

```
<h:dataTable value="#{foo.selectedWidgets}" var="widget">
    <h:column>
         #{widget.name}
    </h:column>
</h:dataTable> 
```

标记的内容`<h:column>`（标题方面除外）——在我的示例中 `#{widget.name}`——*不是*一行。相反，它是`<td>`为给定列生成的所有标签的模板。对于这个 dataTable 循环的*每个*小部件，它将打印小部件的 name 属性——这就是我所说的“模板”。所以你对 h:column 所做的任何事情都会影响*整个 column*，而不是任何特定的行。

我对此的解决方案是非 JSF。使用 CSS 表，并使用`first-child`或`nth-child`选择器选择您想要设置样式的行。

# php - PHP PDO 在连接字符串时将变量绑定到字符串

> ID：16109827
> 
> 赞同：0
> 
> 时间：2013-04-19T16:58:23.490
> 
> 标签：php, sql, loops, pdo, concatenation

我正在尝试创建一个如下所示的 SQL 语句：

```
SELECT * FROM `table` WHERE `attribute` LIKE %variable_1% AND `attribute` LIKE %variable_2% AND ... AND `attribute` LIKE %variable_n% 
```

我有变量：variable_1，variable_2，...，variable_n 存储在一个数组中，为了创建上面提到的语句，我将使用 foreach 循环，如下所示：

```
$sql = 'SELECT * FROM `table` WHERE ';
$variables_array; // this array will contain all the variables mentioned above, the variables are numerically indexed
$total_variables = count($variables_array);

foreach($variables_array as $key => $value){

    $sql .= '`attribute` LIKE "%'.$value.'%" '; 
    if($key != ($total_variables - 1) ){
        $sql .= ' AND ';
    }
} 
```

我的问题是，如何在我的 foreach 循环中分别使用 PDO 和 PDO 语句对象的 'prepare' 和 'bindValue' 方法，以便每个新插入的变量都可以安全使用，就像它们传递给'prepare' 方法，然后使用 'bindValue' 插入到语句中。或者我需要使用其他一些方法吗？

# c# - 反序列化 IPAddress 时出现内存不足异常

> ID：16109830
> 
> 赞同：1
> 
> 时间：2013-04-19T16:58:36.757
> 
> 标签：c#, xml, xml-serialization

当我尝试从 MyConfig.xml 反序列化时，出现内存不足异常

```
System.Net.IPAddress.InternalParse(String ipString, Boolean tryParse)
System.Net.IPAddress.Parse(String ipString)
MyNamespace.IPRange.ReadXml(XmlReader reader) 
```

**IPRange.cs**

```
public class IPRange : IXmlSerializable
{
    public IPRange () { }

    public IPAddress StartIP { get; set; }
    public IPAddress EndIP { get; set; }

    public XmlSchema GetSchema()
    {
        throw new NotImplementedException();
    }

    public void ReadXml(XmlReader reader)
    {
        this.StartIP = IPAddress.Parse(reader.GetAttribute("StartIP"));
        this.EndIP = IPAddress.Parse(reader.GetAttribute("EndIP"));
    }

    public void WriteXml(XmlWriter writer)
    {
        writer.WriteAttributeString("StartIP", this.StartIP.ToString());
        writer.WriteAttributeString("EndIP", this.EndIP.ToString());
    }
} 
```

**我的配置文件**

```
public class MyConfig
{
    [XmlArrayItem("IPRange")]
    public List<IPRange> DMZ { get; set; }
} 
```

**MyConfig.xml**

```
<?xml version="1.0" encoding="utf-8" ?>
<MyConfig>
    <DMZ>
        <IPRange StartIP="{some start ip}" EndIP="{some end ip}" />
        <IPRange StartIP="{some start ip}" EndIP="{some end ip}" />
    </DMZ>
</MyConfig> 
```

我不知道我做错了什么。请帮我解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:52:35.880

我已经通过在函数末尾编写*reader.Read()来修复它......*

```
public void ReadXml(XmlReader reader)
{
    this.StartIP = IPAddress.Parse(reader.GetAttribute("StartIP"));
    this.EndIP = IPAddress.Parse(reader.GetAttribute("EndIP"));

    reader.Read();
} 
```

# angularjs - 带有 templateUrl 的 Angular 指令 - Plunker 上的问题？

> ID：16109833
> 
> 赞同：9
> 
> 时间：2013-04-19T16:58:53.180
> 
> 标签：angularjs, plunker

我可以链接到 Plunker 中的特定文件吗？具体来说，我想在指令中使用 Angular 的“templateUrl”来外部化我正在构建的指令的 HTML：

```
myApp.directive('groupedlist', function() {
  return {
    restrict: 'E',
    scope: true,
    templateUrl: '/groupedList.html',
    link: function() {}
  };
}); 
```

我有一个名为“groupedList.html”的文件，其中包含一个 HTML 模板，但这些文件似乎是 Plunker 项目中的逻辑文件——我的浏览器抱怨，因为它找不到 groupedList.html。是否可以使用 Plunker 做我想做的事情？我宁愿不使用“模板”属性，因为我想要外部化的 HTML 内容数量并不多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-15T18:01:18.457

templateUrl 不适用于绝对 URL，请改用相对 URL（如 './page.html' 或 '../templates/page.html'）。如果您需要将跨域页面加载到模板，您可以发出请求（XMLHttpRequest）并将 STRING HTML 设置为模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T15:19:41.467

就像 Rafael 所说的那样，但只是添加......如果您像我一样将文件放在子文件夹中，请使用： `templateUrl: 'app/home.html', styleUrls: ['app/home.css'],`

你会认为`'./home.html'`会起作用，但即使我的组件在同一个文件夹中，它也不起作用。

# mysql - 使用触发器记录完整的 SQL 查询

> ID：16109834
> 
> 赞同：0
> 
> 时间：2013-04-19T16:58:53.837
> 
> 标签：mysql, triggers

我想记录将一列的值从一个预定值更改为另一个预定值的任何内容的完整 SQL 查询。不幸的是，我不清楚如何做到这一点，即使是这样。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:09:29.420

[MySQL Proxy](http://dev.mysql.com/doc/refman/5.1/en/mysql-proxy.html)可以帮助您获取查询，您可以编写一个过滤器来选择仅影响特定行的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:06:02.530

在表上设置更新触发器（之后或之前）。

然后有逻辑（表示为伪代码）：

```
if old.col = 'Value1' and new.col = 'Value2'
then insert into logrecords(. . .) select "what I want to log here"
end if ; 
```

# php - Javascript 或 Jquery 中两个日期之间的天数

> ID：16109837
> 
> 赞同：1
> 
> 时间：2013-04-19T16:59:00.257
> 
> 标签：php, javascript, jquery, count

我想用 Javascript 或 jquery 进行一些计算。实际上我有两个输入日期选择器。我希望当我在两个字段中选择日期时，应该出现一个新字段值，其中包含所选日期的总天数。例如：我在输入一中选择：2012-01-01 并在输入二中选择：2013-01-01 然后在字段三中的值应该是 = 365 天

希望你能理解。我知道如何计算两个日期之间的天数：

```
$days = (strtotime($termi_date) - strtotime($str_date)) / (60 * 60 * 24);
echo $days; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:01:17.013

```
var from_date = $("#from_input").datepicker('getDate'),
    to_date   = $("#to_input").datepicker('getDate');

var diff_in_milliseconds = to_date.getTime() - from_date.getTime(); 
```

或者干脆

```
diff = Math.floor((d2.getTime() - d1.getTime()) / 86400000); // ms per day 
```

**[演示](http://jsfiddle.net/VhBA8/1/)**

# c# - “指定的类型必须是不包含引用的结构”使用 TeaFiles.NET

> ID：16109839
> 
> 赞同：2
> 
> 时间：2013-04-19T16:59:03.427
> 
> 标签：c#, exception, memory-mapped-files

我发现了这个名为 TeaFiles.NET 的引人注目的库。

我正在编写一个非常简单的控制台应用程序来测试它。

这是代码：

```
class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("Starting....");

            string filename = String.Format("History_{0}.{1}.{2}.tea",
                                               DateTime.Now.Year,
                                               DateTime.Now.Month,
                                               DateTime.Now.Day);

            File.Delete(filename);
            using (var tf = TeaFile<HistoryRow>.Create(filename))
            {
                var items = new List<HistoryRow>();

                for (int i = 0; i < 1000; i++)
                {
                    for (int k = 0; k < 100000; k++)
                    {
                        items.Add(new HistoryRow()
                        {
                            Flags = 192,
                            Name = "Name_" + i.ToString(CultureInfo.InvariantCulture),
                            Value = k,
                            Timestamp = DateTime.Now.AddTicks((long)i)
                        });
                    }
                }

                var sw = Stopwatch.StartNew();
                Console.WriteLine("Initiate write...");
                tf.Write(items);
                sw.Stop();
                Console.WriteLine("...completed write in {0} ms.", sw.ElapsedMilliseconds);
            }

            Console.ReadLine();

        }
    }

    struct HistoryRow
    {
        public string Name;
        public dynamic Value;
        public Time Timestamp; 
        public int Flags;
    } 
```

这应该很简单。相反，它在 Create() 调用中出错，并出现以下错误：

**`"The specified Type must be a struct containing no references".`**

我真的不知道从哪里开始故障排除....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:09:53.880

TeaFiles 提供对时间序列数据的快速读/写访问。鉴于该库需要`struct`包含 @dtb 描述为[blittable types](http://msdn.microsoft.com/en-us/library/75dwhxf7.aspx)的内容，这应该可以工作：

```
[StructLayout(LayoutKind.Sequential, Pack=1)]
struct HistoryRow
{
    public char[16] Name;
    public double Value;
    public Time Timestamp; 
    public int Flags;
} 
```

请注意，在存储时间数据序列时，您通常不会存储带有值的描述，该值是列中已经有名称的多个值之一。

# iphone - HelloFacebookSample 项目，iPhone 3GS 上的奇怪行为

> ID：16109842
> 
> 赞同：1
> 
> 时间：2013-04-19T16:59:27.477
> 
> 标签：iphone, ios, objective-c, facebook

我正在运行 Facebook SDK 提供的示例项目，但遇到了一些奇怪的事情。

示例项目的总体思路是：您可以通过手机上的 Facebook 应用发帖

*   如果这不可用但 iOS 6 集成可用，您可以通过它发布。
*   如果这不可用，最后的手段是通过 Facebook 网站发布。

现在，在没有 Facebook 应用程序但 iOS 6.1 的模拟器上，它允许通过 iOS6 进行 Facebook 集成。模态视图控制器弹出，但因为我没有登录，它要求我通过 iPhone 设置这样做。这就是我想要的回应。

但是，在我的开发 3GS 上，运行 6.1.3，`[FBDialogs canPresentOSIntegratedShareDialogWithSession:nil];`似乎没有检测到 iPhone 有 iOS 6 Facebook 集成，只是没有登录。因此 Facebook 的弹出窗口没有出现，也没有请我登录。

有谁知道为什么？

# java - 在 Android 应用程序中连接到 Web 服务失败

> ID：16109846
> 
> 赞同：0
> 
> 时间：2013-04-19T16:59:48.687
> 
> 标签：java, android, mobile, mamp

我正在编写一个测试应用程序来测试一套 JSON 服务。对于初学者，我正在使用 MAMP 托管在我的本地计算机上的简单 Web 服务进行测试。我有一个用于执行服务调用的按钮和一个用于显示结果的文本字段。当我单击模拟器中的按钮时，出现以下错误：

连接到 http://localhost:8888 失败

Web 服务已经过测试并且可以在其他应用程序中运行

这是按钮单击处理程序：

```
public void btnGetJsonData(View v){

    EditText txtUserInfo = (EditText) findViewById(R.id.txtUserInfo);
    new ReadJsonTask().execute( public void btnGetJsonData(View v){
    EditText txtUserInfo = (EditText) findViewById(R.id.txtUserInfo);
    new ReadJsonTask().execute("http://localhost:8888/services/_login.php?un=bobd&pw=bobby&ref=cons");
});
} 
```

关于为什么会发生这种情况的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:58:58.420

```
You can use 10.0.2.2 to access your actual machine, it is an alias set up to help in development. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:06:31.533

将 localhost 更改为您计算机的 IP 地址。在这种情况下，localhost 指的是电话设备（self = locahost）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T17:06:10.377

如果您需要帮助，请发布您的 ReadJsonTask 代码

还要尝试确保测试模拟器没有尝试通过网络访问您的 WS（因为他不知道 2 个网络之间的区别）

尝试使用您的本地 IP 地址（如 192.168...）访问您的 WS

# java - 在编译hadoop程序的情况下连接到log4j时出错

> ID：16109847
> 
> 赞同：0
> 
> 时间：2013-04-19T16:59:53.290
> 
> 标签：java, linux, hadoop, compilation, log4j

我使用 log4j 编写了 hadoop 程序，并给出了它的一部分

```
package org.myorg;

import java.io.*;
import java.util.*;
import org.apache.hadoop.fs.*;
import org.apache.hadoop.conf.*;
import org.apache.hadoop.io.*;
import org.apache.hadoop.mapred.*;
import org.apache.hadoop.util.*;
import org.apache.log4j.Logger;
import org.apache.logging.log4j.LogManager;
import org.apache.log4j.xml.DOMConfigurator;

public class ParallelIndexation {
    //public static native long Traveser(String Path);

    //public static native void Configure(String Path);

    //static {
    //  System.loadLibrary("nativelib");
    //}
    public static class Map extends MapReduceBase implements
            Mapper<LongWritable, Text, Text, LongWritable> {
        private final static LongWritable zero = new LongWritable(0);
        private Text word = new Text();
        private static final Logger logger = LogManager.getLogger(Map.class.getName());
        DOMConfigurator.configure("/export/hadoop-1.0.1/log4j.xml"); 
```

我试图通过命令编译hadoop程序

```
root@one:/opt/jdk1.7.0_06/bin#. / javac - classpath/export/hadoop-1.0.1/hadoop-core-1.0.1.jar:/export/hadoop-1.0.1/log4j-1.2.17.jar - d/folder/classes/folder/src/ParallelIndexation.java 
```

结果我也收到了以下错误消息

```
/folder/src/ParallelIndexation.java:27: error: <identifier> expected
        DOMConfigurator.configure("/export/hadoop-1.0.1/log4j.xml");
                                 ^
/folder/src/ParallelIndexation.java:27: error: illegal start of type
        DOMConfigurator.configure("/export/hadoop-1.0.1/log4j.xml");
                                  ^
2 errors 
```

有助于消除这些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:02:03.067

该声明

```
DOMConfigurator.configure("/export/hadoop-1.0.1/log4j.xml"); 
```

应该在方法（或构造函数或`static`初始化程序）中

而不是在类块中`Map`

# c# - 如何在richtextbox中以不同的顺序（上下）搜索单词？

> ID：16109853
> 
> 赞同：0
> 
> 时间：2013-04-19T17:00:17.777
> 
> 标签：c#, search, user-interface, direction

就像我想从句子的开头或结尾搜索“测试”，如何使它工作？我应该使用什么方法？我将在文本框中输入“test”，然后在richtextbox 中搜索，句子在richtextbox 中。感谢您抽出宝贵的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:10:50.473

您可以使用 System.Text.RegularExpressions.Regex.IsMatch() 检查较大文本字符串中的某些文本字符串：

```
if (System.Text.RegularExpressions.Regex.IsMatch("text string including test", "test", System.Text.RegularExpressions.RegexOptions.IgnoreCase))
{
    //test found
} 
```

希望这可以帮助

# c# - 反序列化 JSON 列表 数据合约是否必须拥有 JSON 拥有的每个成员？

> ID：16109856
> 
> 赞同：0
> 
> 时间：2013-04-19T17:00:18.580
> 
> 标签：c#, json, serialization, deserialization

嘿伙计们，我正在尝试反序列化来自 API 的 JSON 响应，然后显示数据。我以字符串的形式获取响应并尝试将其映射到对象。这是来自 twitter 的回复，它回复了多条推文，所以我试图将其映射到推文列表。

我收到以下异常。

```
System.InvalidOperationException: Type 'Default3+TwitterApiData' is not supported for deserialization of an array. at System.Web.Script.Serialization.ObjectConverter.ConvertListToObject(IList list, Type type, JavaScriptSerializer serializer, Boolean throwOnError, IList& convertedList) at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeInternal(Object o, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object& convertedObject) at System.Web.Script.Serialization.ObjectConverter.ConvertObjectToTypeMain(Object o, Type type, JavaScriptSerializer serializer, Boolean throwOnError, Object& convertedObject) at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer serializer, String input, Type type, Int32 depthLimit) at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize[T](String input) at Default3.Page_Load(Object sender, EventArgs e) 
```

这可能是因为我没有 JSON 中每个键值对的数据成员吗？返回的 JSON 就像 60 KV 对，我不需要所有数据，所以我只有两个成员。

还是我在反序列化为对象数组时做错了什么？下面是我正在进行反序列化的代码。

在此先感谢您的帮助。

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(resourceUrl);
request.Headers.Add("Authorization", authorizationHeader);
request.Method = "GET";
request.ContentType = "application/x-www-form-urlencoded";

        try
        {
            WebResponse response = request.GetResponse();
            var responseData = new StreamReader(response.GetResponseStream()).ReadToEnd();

            TwitterApiData twitterApiResponse = new JavaScriptSerializer().Deserialize<TwitterApiData>(responseData);

            foreach (var item in twitterApiResponse.data)
            {
                lblResponse.InnerText = "created_at: " + item.created_at + " text: " + item.text;
            }
        }
        catch (Exception ex)
        {
            lblResponse.InnerText = ex.ToString();
        } 
```

然后我映射到的对象。还看这个我需要 [DataContract] 和 [DataMember] 属性吗？

```
public class TwitterApiData
{
    public List<Tweet> data { get; set; }
}

public class Tweet
{
    public string created_at { get; set; }
    public string text { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:36:30.633

我想通了，我不需要包裹的物体。我只是将其反序列化为推文列表。

```
var twitterApiResponse = new JavaScriptSerializer().Deserialize<List<Tweet>>(responseData); 
```

排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:06:47.503

```
 TwitterApiData data = new JavaScriptSerializer().Deserialize<TwitterApiData>(strContent); 
```

# backbone.js - 来自ajax的骨干stickit selectOptions

> ID：16109859
> 
> 赞同：1
> 
> 时间：2013-04-19T17:00:28.603
> 
> 标签：backbone.js, backbone-stickit

我正在尝试使用以下填充选择。

```
 View: Backbone.View.extend({
                    initialize: function () {
                        this.setElement($('#templatePlaceholder'));
                    },
                    bindings: {

                        'select#List': {
                            observe: 'ddList',
                            selectOptions: {
                                collection: Q.when(getSelects.execute()).then(function (data) {
                                    console.dir(data);
                                    return data;
                                })

                            }
                        }
                    }, 
```

控制台返回一个数组对象：

```
 [ { value: 1, label: "a" },   { value: 2, label: "b" } ] 
```

但我什么也得不到。

如果我将集合定义为：

```
collection: function () { return [{ value: 1, label: "a" },{ value: 2, label: "b" }];} 
```

然后一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:36:55.633

这可能存在几个问题：异步代码`View`在分配时立即执行，这可能是不希望的；并且 collection 被分配给执行该承诺的结果，而不是`return data`.

一些解决方案：

1）您可以在页面加载时引导您的选择选项。这是单页或 Backbone 应用程序中的流行模式。基本上，您有后端将公共数据的 json 数据结构放在一起，然后将其作为 javascript 变量呈现到页面。所以服务器端模板（jsp、erb、php）看起来像这样：

```
<!DOCTYPE html>
...
    <script type="text/javascript">
       window.bootstrap = { users: <%= userjson %>, ddlist: <%= ddlistjson %> };
    </script>
... 
```

建议使用此方法以提高性能和方便性。

2) 如果您可以选择`getSelects.execute()`同步运行 - 例如，如果它是一个 jQuery ajax 请求，请使用该`async:false`选项运行它 - 那么您可以在视图中的几个位置执行它。during`initialize`将在实际构造视图时获取数据。或者，您可以将`collection`绑定分配给运行 getSelects 例程的函数，该函数会阻塞然后返回数据：

```
collection: function() {
    var collection = [];
    // Assumes that getSelects.execute() will block and run synchronously.
    Q.when(getSelects.execute()).then(function (data) {
       collection = data;
    });
    return collection;
} 
```

不推荐使用此方法，因为它可能会使您的 UI 处于时髦状态，因为它会阻止其他 javascript 运行，并且可能会挂断。

# wpf - WPF ListView 中的样式错误

> ID：16109861
> 
> 赞同：0
> 
> 时间：2013-04-19T17:00:47.817
> 
> 标签：wpf

我想在 ListView 获得焦点时更改它的边框颜色。我用这种风格

```
<Style TargetType="ListView">
<Setter Property="Template">
   <Setter.Value>
      <ControlTemplate TargetType="ListView">
          <ControlTemplate.Triggers>
            <Trigger Property="IsFocused" Value="true">
                <Setter Property="BorderBrush" Value="#FF9D9B9B" />
            </Trigger>
          </ControlTemplate.Triggers>
      </ControlTemplate>
  </Setter.Value>
</Setter> 
</Style> 
```

这是我的 ListView 的代码

```
<ListView  Margin="49,91,61,148" Grid.Column="1">
  <ListView.View>
       <GridView>
            <GridViewColumn Header="ID" />
            <GridViewColumn Header="Name"/>
       </GridView>
  </ListView.View>
</ListView> 
```

但是在我应用这种样式之后，ListView 在运行时完全消失了。那里发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:13:39.177

看看[这里](https://stackoverflow.com/a/1790712/637953)。它关于 ListBox 的 IsFocused 属性，但与 ListView 的想法相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:42:57.357

也许它是`<ControlTemplate>` 你能简单地声明你的风格没有它吗？

```
 <Style TargetType="ListView">
    <Style.Triggers>
       <Trigger Property="IsFocused" Value="true">
          <Setter Property="BorderBrush" Value="Lime" /><!--bright color for empahsis only-->
      </Trigger>
    </Style.Triggers>
  </Style> 
```

这在测试项目中没有问题/

# python - Python-自定义速度数字时钟

> ID：16109864
> 
> 赞同：0
> 
> 时间：2013-04-19T17:01:00.623
> 
> 标签：python, user-interface, python-2.7, tkinter, clock

我正在用 python 编写一个程序，我需要一个具有自定义速度的数字时钟。现在，我正在使用一个以正常速度工作并与 Windows 时钟同步的时钟。如何编写具有自定义速度的数字时钟？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T13:02:51.120

这是一个设计过度的工作示例：

```
import Tkinter as tk
import functools

class UnconventionalClock(tk.Label):
    '''A label that displays a clock that runs at an unconvetional rate

    usage: x=UnconventionalClock(root, hours, minutes, seconds, interval)
           x.start(); ... ; x.stop()

    'interval' determines how fast one second is, expressed as milliseconds.
    1000 means the clock runs normally; 2000 means it runs at half speed,
    500 means it runs at double speed, etc. 

    '''
    def __init__(self, parent, hours=0, minutes=0, seconds=0, interval=1000):
        tk.Label.__init__(self, parent)
        self._after_id = None
        self.reset(hours, minutes, seconds, interval)

    def start(self):
        self._schedule()

    def stop(self):
        if self._after_id is not None:
            self.after_cancel(self._after_id)
            self._after_id = None

    def reset(self, hours=0, minutes=0, seconds=0, interval=1000):
        self.interval = interval
        self.hours = hours
        self.minutes = minutes
        self.seconds = seconds
        self.configure(text=self._format())

    def _tick(self):
        self.seconds += 1
        if self.seconds >= 60:
            self.seconds = 0
            self.minutes += 1
            if self.minutes >= 60:
                self.minutes = 0
                self.hours += 1
                if self.hours >= 24:
                    self.hours = 0
        self.configure(text=self._format())
        self._schedule()

    def _format(self):
        return "%02d:%02d:%02d" % (self.hours, self.minutes, self.seconds)

    def _schedule(self):
        self._after_id = self.after(self.interval, self._tick)

class Example(tk.Frame):
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)

        self.clock = UnconventionalClock(self, 23, 59, 40, 500)

        toolbar = tk.Frame(self)
        start = tk.Button(toolbar, text="Start", command=self.clock.start)
        stop = tk.Button(toolbar, text="Stop", command=self.clock.stop)
        start.pack(side="left")
        stop.pack(side="left")

        toolbar.pack(side="top", fill="x")
        self.clock.pack(side="top", fill="x")

root = tk.Tk()
Example(root).pack(side="top", fill="both", expand=True)
root.mainloop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:12:27.670

```
custom_time = custom_time0 + (win_time - win_time0)*alpha 
```

`alpha`自定义因素在哪里。

# php - SSL上的PHP / cURL文件传输限制？

> ID：16109865
> 
> 赞同：2
> 
> 时间：2013-04-19T17:01:02.210
> 
> 标签：php, iis, file-upload, curl, ssl

我使用 cURL 编写了几个 PHP 脚本，通过 SSL 连接将文件从 ServerA 传输到 ServerB。两者都是运行 IIS 的 Windows 服务器。该代码适用于较小的文件（大约 7MB 以下）。但是，它对于任何比这更大的东西都失败了。

这似乎是 SSL 的问题。我在ServerB上临时开通了一个http端口，能够成功发送一个650MB的文件。但是当通过 SSL 发送时，它会爆炸。使用 Wireshark，我可以看到它很快发送了大约 7-8MB，然后没有更多的数据包出去。脚本会一直挂起，直到超时。

我得到的 cURL 错误是： SSL read: error:00000000:lib(0):func(0):reason(0), errno 10054

cURL SSL 连接是否存在某种发送限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:11:39.217

经过一整天半的尝试，我找到了解决方案。很简单。我所要做的就是添加：

```
curl_setopt($curl, CURLOPT_SSLVERSION,3); 
```

希望这个线程可以将其他人从我一直试图解决这个问题的痛苦中解救出来。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T18:06:19.700

确保将`post_max_size`php.ini 中的默认值更新为大于默认值 8MB 的值：

```
post_max_size = 8M 
```

确保之后重新启动 IIS。如果这确实解决了它，我不确定为什么它适用于 HTTP 而不是 HTTPS，但值得一试。

# jquery - 使用jquery根据滚动位置显示和隐藏元素

> ID：16109866
> 
> 赞同：0
> 
> 时间：2013-04-19T17:01:04.280
> 
> 标签：jquery, performance

我的代码正在运行，但我想知道是否可以用更少的代码行来完成？我该如何改进它？

[http://jsfiddle.net/f8sHN/3/](http://jsfiddle.net/f8sHN/3/)

```
var $scb = $('<div class="scroll-border"></div>');
$('.above').append($scb);
var $ccol = $('.content');

function isFadingIn($el){
    return ($el.data('fadingIn') == true);
}
function isFadingOut($el){
    return ($el.data('fadingOut') == true);
}
function isVisible($el){
    return ($el.css('display') == 'block')
}
function isHidden($el){
    return ($el.css('display') == 'none')
}
function isBelow($el){
    return ($el.scrollTop() > 10)
}
function isAbove($el){
    return ($el.scrollTop() < 10)
}

$ccol.scroll(function(){
    console.log($ccol.scrollTop());

    if(isBelow($ccol) && (isHidden($scb) || isFadingOut($scb)) ){
        $scb.data('fadingIn',true);
        $scb.stop(true).fadeIn('4000', function(){
                $(this).data('fadingIn',false)
            });
        console.log("fadeIn");
    }
    if(isAbove($ccol) && (isVisible($scb) || isFadingIn($scb)) ){
        $scb.data('fadingOut',true);
        $scb.stop(true).fadeOut('4000', function(){
                $(this).data('fadingOut',false)
            });
        console.log("fadeOut");
    }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:20:08.607

设法缩短了一点：

```
var $scb = $('<div class="scroll-border"></div>');
$('.above').append($scb);

$('.content').scroll(function(){
    $scb.stop(true,true).fadeTo(500, $ccol.scrollTop() > 10 ? 1 : 0);
}); 
```

[http://jsfiddle.net/f8sHN/8/](http://jsfiddle.net/f8sHN/8/)

* * *

另一个版本：

```
var $scb = $('<div class="scroll-border"></div>');
$('.above').append($scb);
var $ccol = $('.content');

$ccol.scroll(function(){
    $scb.filter($ccol.scrollTop() > 10 ? ':hidden' : ':visible').stop(true,true).fadeToggle(500);
}); 
```

[http://jsfiddle.net/f8sHN/11/](http://jsfiddle.net/f8sHN/11/)

# java - 使用带有 fetch=FetchType.LAZY 的 hibernate 从表中获取数据

> ID：16109868
> 
> 赞同：0
> 
> 时间：2013-04-19T17:01:07.207
> 
> 标签：java, spring, hibernate, hibernate-mapping

我正在尝试从表中获取所有用户的电子邮件。实体用户：

```
 @Entity
     @Table(name = "tbl_User")
     public class User {
          @Expose
          @Id
          @GeneratedValue
          @Column(name = "id")
          private Long id;
          .....
          @OneToMany(mappedBy = "user", fetch = FetchType.LAZY)
          List<CommunicationAddress> communicationAddresses = new ArrayList<CommunicationAddress>();
          .....
     } 
```

在服务中，我正在获取用户并尝试查看电子邮件：

```
User user = userDAO.getUserById(id);
        if (user == null) {
            throw new Exception("User not found");
        } else {
            List<Email> addresses = user.getCommunicationAddresses();
        } 
```

但我收到了下一个例外：

```
 org.hibernate.LazyInitializationException: could not initialize proxy - no Session
        at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:186)
        at org.hibernate.collection.internal.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:137)
        at org.hibernate.collection.internal.PersistentBag.isEmpty(PersistentBag.java:249) 
```

获取用户的方法：

```
@Transactional
@Override
public User getUserById(Long userId) {
    Criteria criteria = sessionFactory.getCurrentSession().createCriteria(User.class);
    criteria.add(Restrictions.eq("id", userId));
    return (User) criteria.uniqueResult();
} 
```

我知道当我使用 Criteria 获取 User 时，我必须获取communicationAddresses... 怎么做？谢谢大家。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T18:45:23.003

It seems your service method is not annotated with `@Transactional`. Thus, after calling `userDAO.getUserById(id);`, there is no longer a transaction. That means that you cannot access any lazy-loaded properties of the loaded entity that hasn't been accessed/pre-fetched inside the transaction without running into a LazyInitializationException.
So you can either think about replacing `LAZY` with `EAGER` fetching (this mostly depends on the use cases you are facing) or you should annotate your Service method with `@Transactional`.

I'd highly suggest to annotate your service methods (instead of the DAO methods), as only there you can establish meaningful transactional boundaries when interacting with multiple entities.
Also, if you make usage of lazy loading, you must be aware of the possibility to run into that kind of exception after leaving the service layer, e.g. when rendering your view (assuming you somehow present the data).

### "Prefetching' lazy associations

To trigger instant loading of lazy associations (called "[dynamic association fetching](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-dynamicfetching)"), add this line in `getUserById`:

```
criteria.setFetchMode("communicationAddresses", FetchMoode.EAGER); 
```

However, if you do that in this specific method, I wonder why you stick to lazy loading at all?

# wcf - WCF 继承合约和回调合约

> ID：16109869
> 
> 赞同：0
> 
> 时间：2013-04-19T17:01:08.710
> 
> 标签：wcf

我有一个测试继承合同和回调合同的测试项目。

**更新 1**：我用接口植入更新了所有主题

通过阅读这篇文章：[http ://codeidol.com/csharp/wcf/Service-Contracts/Contract-Inheritance/#part-16](http://codeidol.com/csharp/wcf/Service-Contracts/Contract-Inheritance/#part-16)

这是可能的，但是当我尝试时，它失败了。

```
class Program
    {
        static void Main(string[] args)
        {
            ServiceHost Service_IServer = new ServiceHost(new ServiceImplemantation(), new Uri(@"net.tcp://localhost:8080/"));
            Service_IServer.AddServiceEndpoint(typeof(IService), new NetTcpBinding(), "Service");
            Service_IServer.Open();
            ServiceHost Service_I_IP = new ServiceHost(new IPImplemantation(), new Uri(@"net.tcp://localhost:8080/"));
            Service_I_IP.AddServiceEndpoint(typeof(I_IP), new NetTcpBinding(), "Service");
            Service_I_IP.Open();
            Console.ReadLine();
        }
    }
    [ServiceContract]
    public interface I_IP
    {
        [OperationContract]
        string GetIP();
    }
    [ServiceContract]
    public interface IService : I_IP
    {
        [OperationContract]
        void ImTheServer_Print();
    }
    //
    //
    //
    //
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
    public class IPImplemantation : I_IP
    {
        public string GetIP()
        {
            return "1.2.3.4";
        }
    }
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
    public class ServiceImplemantation : IPImplemantation, IService
    {
        public void ImTheServer_Print()
        {
            Console.WriteLine("ImTheServer_Print");
        }
    } 
```

**错误：**

'net.tcp://localhost:8080/Service' 上的 ChannelDispatcher 与合同 '"I_IP"' 无法打开其 IChannelListener。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-19T17:02:42.803

确保将其装饰为`OneWay`.

```
[OperationContract(IsOneWay = true)]
void GetIP(); 
```

# ios - 如何为 UITextField 分配默认值？

> ID：16109870
> 
> 赞同：0
> 
> 时间：2013-04-19T17:01:10.640
> 
> 标签：ios, uitextfield

当其中一个字段（它们是字符串）为空时，每次用户点击“下一步”时，我的 iOS 应用程序都会崩溃。我怎样才能做到这不会发生？

```
emailBody = [emailBody stringByAppendingString:nameField.text]; 
```

这是导致崩溃的行之一；它试图从 nameField.text 中提取数据，但在某些情况下它是空的，这会使它崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:11:12.233

您不应该分配默认值 - 相反，您应该保护您的代码，使其不会崩溃。

在这种情况下，您可以执行以下操作：

```
if (nameField.text) {
    emailBody = [emailBody stringByAppendingString:nameField.text];
} 
```

# c# - C# 中的对象定义以符合 JSON 定义

> ID：16109871
> 
> 赞同：0
> 
> 时间：2013-04-19T17:01:10.913
> 
> 标签：c#, json, serialization, json.net

我有这个 JSON 定义：

```
{
    "id": 1400,
    "types": {
        "type one": {
           "url": "http://www.example.com",
           "desc": "type one desc"
        },
        "type two": {
            "url": "http://www.example.com",
            "desc": "type two desc"
        }
    }
} 
```

我需要创建一个 C# 类，该类在序列化时会生成上面的 JSON。

我遇到的问题是“类型一”和“类型二”。如果我的班级看起来像这样：

```
public class mytypes{

    public int id { get; set; }
    public List<mytype> types { get; set; }
} 
```

我的类型是：

```
public class mytype {

    public string url { get; set; }
    public string desc { get; set; }
} 
```

数据来自数据库，这会生成一个“类型”数组，而不是一个“类型”对象，其中的对象具有作为定义的描述（类型一，类型二）。

如何更改我的类以在“类型”中生成“类型一”和“类型二”，而不是数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:06:59.270

而不是使用：

```
public List<mytype> types { get; set; } 
```

你必须使用`Dictionary`所以属性将是：

```
public Dictionary<string,mytype> types { get; set; } 
```

# jquery - 与jquery脚本冲突

> ID：16109875
> 
> 赞同：1
> 
> 时间：2013-04-19T17:01:31.780
> 
> 标签：jquery

我不是 jQuery 方面的专家。我有一个问题：当我插入一个滑块时，位于底部的脚本不再起作用。

这是[没有](http://www.egocreative.it/uni_demo2/)和[有](http://www.egocreative.it/uni_demo1/)滑块的链接。

我用 jqueryNoconflict 试过了，但没有！

我看到谷歌浏览器控制台有很多问题，你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:19:56.217

修复你的网站，它充满了未打开的标签，还为每个要使用的元素创建一个 jQuery 对象，例如：

```
$('.accordion, .tabs').TabsAccordion... 
```

最好是这样：

```
$('.accordion').TabsAccordion...
$('.tabs').TabsAccordion... 
```

此外，您尝试创建的某些 jQuery 对象似乎不存在于源代码中，显然没有带有CSS 类`accordion`的元素。`tabs`

顺便说一句，如果您没有看到未打开的标签，请在 Internet Explorer 中打开您的网站并按 F12，您应该会看到我在控制台中提到的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:33:17.263

通过检查控制台（例如使用 Firebug）有错误：

```
$(".accordion, .tabs").TabsAccordion is not a function
/uni_demo1/ (row 1338)

jQuery("video,object").maximage is not a function
jQuery('video,object').maximage('maxcover');

(nothing to output)
video.js (row 21)

a is null
...var Ah=zh(-fa,-fa,fa,fa),Bh=zh(0,0,0,0);function Ch(a,b,c){if(a=a[db](b))c=q.pow...
main.js (row 28)

"NetworkError: 404 Not Found - http://www.egocreative.it/uni_demo1/video/vid/camera.mp4" 
```

你必须：

1.  通过检查打开/关闭标签平衡来清理您的代码
2.  检查您的脚本是否运行`$(document).ready`
3.  检查您要激活的对象`TabsAccordion`，没有带有类手风琴或标签的元素；似乎是演示的副本？( [http://lamovo.com/support/tabs+accordion#usage](http://lamovo.com/support/tabs+accordion#usage) )
4.  检查用于 maximage 插件的选择器 ( [http://www.aaronvanderzwan.com/maximage/](http://www.aaronvanderzwan.com/maximage/) )
5.  检查您的网络服务器是否正确地提供所有资源

# performance - LINQ 使用 Group 和 Count 和 Where，简单的 SQL，在 LINQ 中更难

> ID：16109879
> 
> 赞同：2
> 
> 时间：2013-04-19T17:01:39.040
> 
> 标签：performance, linq, entity-framework, linq-to-sql

我正在尝试显示计数大于 1 的城市名称。我可以在 SQL 中轻松做到这一点，并且在 LINQ 中很接近，但无法弄清楚如何使用组并获得计数并显示名称

```
 var query = (from c in Consumer
                   group c
                   by new { c.City, size = c.City.Count() }
                       into results
                       select new { Name = results.Key.City })
                    .Where(a => size > 0); 
```

尺寸部分不起作用

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T17:10:33.300

试试这个查询：

```
var list= Consumer.GroupBy(s=>s.City)
              .Select(s=>new {
                          City = s.Key,
                          size = s.Count(),
                   })
              .Where(s=>s.size>0).ToList(); 
```

# caching - EclipseLink 无法将实体插入 oracle

> ID：16109881
> 
> 赞同：1
> 
> 时间：2013-04-19T17:01:43.177
> 
> 标签：caching, eclipselink, sequence

我使用这样的 oracle 序列构建了一个带有 id 的实体。

```
@Entity
@Table(name="C_ESTIMATE")
public class Estimate implements Serializable{

     private static final long serialVersionUID = 1L;
     public Estimate(){}

     @Id
     @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "estimatenoGen")
     @SequenceGenerator(name="estimatenoGen",sequenceName="AUTOSERIALNO",allocationSize=1)
     @Column(name="ESTIMATENO")
     private long id;
  } 
```

当我打电话时`em.persist(new Estimate())`，

EclipseLink 提示`Internal Exception: java.sql.SQLIntegrityConstraintViolationException: ORA-00001: unique constraints`。

有时它工作正常，有时失败，这太奇怪了。该实体部署了多个 weblogic 服务器。EclipseLink 在使用 oracle 序列生成 id 上有错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:46:20.863

Oracle 上应该没有任何问题。

可以重现问题吗？启用日志记录，是否使用了重复的 ID？

您是如何在数据库上创建 SEQUENCE 对象的？

# java - 如何使用递归来反转字符串？

> ID：16109884
> 
> 赞同：0
> 
> 时间：2013-04-19T17:01:47.237
> 
> 标签：java, string, recursion, char, substring

```
 public String reverse(String word) {

    if ((word == null) || (word.length() <= 1)) {
        return word;
    }
    return reverse(word.substring(1)) + word.charAt(0);
} 
```

我有教授发给我的这段代码，但我不明白。我知道什么是递归，但我仍然是 Java 编程的新手，所以如果有人愿意向我解释一下 return reverse(word.substring(1)) + word.charAt(0); 部分。

subString(1) 和 chartAt(0) 做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:19:53.157

```
return reverse(word.substring(1)) + word.charAt(0); 
```

你应该这样读：

*   删除第一个字母`word`
*   反转其余部分（递归调用）
*   把第一个字母放在最后

如果您假设此函数反转长度为 N 的字符串，您可以很容易地看到它必须反转长度为 N+1 的字符串。如果您意识到如果反转（前三行代码）最多包含一个字母的单词是相同的，那么您使用[数学归纳法](http://en.wikipedia.org/wiki/Mathematical_induction)得到了一个完整的非常简单的证明，即该函数确实反转了字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:05:16.580

递归部分的工作方式是反转字符串，删除第一个字符，反转剩下的内容，然后将第一个字符附加到结果中。这就是教授的代码正在做的事情。

*   `word.substring(1)`返回从索引 1 开始到末尾的子字符串
*   `word.charAt(0)`返回索引 0 处的字符

当这两个部分使用`+`. 问题是它`word.charAt(0)`的返回类型为`char`. 由于 the 的左侧部分`+`是 a `String`，[Java 语言规则规定](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.1)如果右侧`String`不是 a ，则必须将其转换为 a 。所以`char`首先将值转换为a `Character`，然后调用该类的`toString()`方法。`Character`这将返回一个`String`由单个字符组成的。

编写该行的代码可能更有效，例如：

```
return reverse(word.substring(1)) + word.substring(0, 1); 
```

的双参数版本`substring`返回两个索引之间的子字符串。这将消除[自动装箱](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)和转换为`String`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T17:07:26.260

这是[递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)。这是[subString()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int%29)和[charAt()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#charAt%28int%29)的文档。来看看这是如何工作的：

```
public static String reverse(String word) {

    if ((word == null) || (word.length() <= 1)) {
        return word;
    }
    return reverse(word.substring(1)) + word.charAt(0);
} 
```

**Pass1：**反向（“用户”）：`return reverse("ser")+'u';`

**Pass2：**反向（“ser”）+'u'：`return reverse("er")+'s'+'u';`

**Pass3:** reverse("er")+'s'+'u' :`return reverse("r")+'e'+'s'+'u';`

**Pass4:** reverse("r")+'e'+'s'+'u' : `return 'r'+'e'+'s'+'u';`// 因为这里`"r".length()==1`

# pdf - 对齐字符串 C# 的内容

> ID：16109885
> 
> 赞同：1
> 
> 时间：2013-04-19T17:01:48.173
> 
> 标签：pdf, itextsharp

我正在使用`iTextSharp`扩展名将数据输出到 PDF 文件。我正在使用 a`For loop`来动态输出 XML 表单上的数据。我遇到的问题是对齐一行的内容，或者在这种情况下是“段落”，它正在写入 pdf 页面。当前的输出是这样的：

```
__ 0002 dog name              breed              John Doe
__ 0004 Kona                 Doberman             Jesus Montero 
```

我需要输出如下所示：

```
__ 0002 dog name             breed                John Doe
__ 0004 Kona                 Doberman             Jesus Montero 
```

请记住，这些只是在 .pdf 文件中的两个单独循环上写入 pdf 文件的两个字符串`For loop`。添加字符串的代码是：

```
iText.Paragraph dogEntryParagraph = new iText.Paragraph(
  (   "__   "
    + String.Format( "{0,-40}{1,-40}{2,-40}{3,-40}" ,
        armBandString ,
        dogNameString ,
        breedString   ,
        ownerNameString
        )
  ) ,
  _smallFont
  ) ; 
```

有没有人对我在尝试在字符串中对齐品种和所有者名称时做错了什么有任何建议？我花了很多时间并且可以接近它，但不完全是我需要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:08:59.623

你需要使用一张桌子。我自己在使用 iTextSharp 时遇到了这个问题 - 即使您使用等宽字体，除非您在特定坐标处绘制文本然后炸毁流布局，否则您尝试做的事情也不会奏效。因此，在 iTextSharp 中处理表格数据的最佳方法是使用表格......

首先将表创建为对象，然后将其添加到您的流程中......

```
PdfPTable table = new PdfPTable(2);

table.addCell("Dog Name");
table.addCell("Breed");

table.addCell("Akira");
table.addCell("Chinese Crested");

table.addCell("Kaika");
table.addCell("Greyhound");

document.add(table); 
```

这真的很好用，如果需要，您可以将格式化的对象添加到单元格中，或者添加图像或其他内容。您还可以添加边框和其他东西......

[http://www.geek-tutorials.com/java/itext/itext_table.php](http://www.geek-tutorials.com/java/itext/itext_table.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:17:10.587

在这种情况下，您也可以尝试使用等宽字体。这将确保每个空格和字符都是固定长度。

# android - 在可变时间后更改按钮颜色

> ID：16109894
> 
> 赞同：0
> 
> 时间：2013-04-19T17:02:16.650
> 
> 标签：android, time, handle

一段时间后，我无法更改按钮颜色。我知道如何在固定时间后使用句柄进行更改，但我需要在用户选择的特定时间后更改颜色。

```
 public class MainActivity extends Activity {

EditText tempo;
Button bt;
int estado = 1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    tempo = (EditText) findViewById(R.id.tempo);
    long delay = Long.parseLong(tempo.getText().toString());

     bt = (Button) findViewById(R.id.btvibrar);

    bt.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {

        if(!tempo.getText().toString().equals("")){

            if(estado==1){

                  Vibrar();
                  estado*=-1;

                 bt.setText("Parar !");
                 bt.setBackgroundColor(Color.RED);

                    //Handler handler = new Handler();
                    //handler.postDelayed(new Runnable() {

                        //@Override
                        //public void run() {
                            //estado*=-1;
                            //bt.setText("Vibrar !");
                             //bt.setBackgroundColor(Color.GREEN);
                        //}
                //  },  );
                            } else {
                                Parar();
                                estado*=-1;
                                bt.setText("Vibrar !");
                                 bt.setBackgroundColor(Color.GREEN);

                                    }
                                        } else  {
                                            AlertDialog.Builder dialogo = new AlertDialog.Builder(MainActivity.this);
                                            dialogo.setTitle("Erro !");
                                            dialogo.setMessage("Escolha um tempo.");
                                            dialogo.setNeutralButton("OK", null);
                                            dialogo.show();

                                        }
        }

        private void Vibrar(){    // É necessario lançar excessao no ANDROIDMANIFEST.XML
            Vibrator rr = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
            long treal = Long.parseLong(tempo.getText().toString());
            long milliseconds = treal*1000;  
            rr.vibrate(milliseconds);
        }

        private void Parar(){
            Vibrator rr = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
            rr.cancel();
        }

    });
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T09:53:27.333

Sorry for being late, here is a full example:

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/etTime"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="34dp"
    android:layout_marginTop="28dp"
    android:text="Start" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/button1"
    android:layout_marginLeft="53dp"
    android:layout_toRightOf="@+id/button1"
    android:ems="10"
    android:inputType="number|none"
    android:digits="1234567890" >

    <requestFocus />
</EditText> 
```

MainActivity.java

```
package com.example.testevent;

import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.app.Activity;
import android.graphics.Color;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity {

EditText etTime;
Button bStart;
myHandler mh;
int time;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    bStart = (Button) this.findViewById(R.id.button1);
    etTime = (EditText) this.findViewById(R.id.editText1);

    bStart.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            mh = new myHandler(bStart);
            try {
                time = Integer.parseInt(etTime.getText().toString());
            } catch (Exception e) {
                time = 1000;
            }
            tester a = new tester(mh, time);
            a.start();

        }
    });
}

}

class myHandler extends Handler {
Button bStart;

public myHandler(Button bStart) {
    this.bStart = bStart;
}

public void DisplayResult(String Result) {
    // error management,creates an error message
    Message msg = obtainMessage(1);

    // sends the message to our handler
    sendMessage(msg);
}

public void handleMessage(Message msg) {
    // switch (msg.what)
    bStart.setBackgroundColor(Color.RED);
}
}

class tester extends Thread {
myHandler mh;
int time;

public tester(myHandler mh, int time) {
    this.mh = mh;
    this.time = time;
}

@Override
public void run() {
    try {
        Thread.sleep(time);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    // error management,creates an error message
    Message msg = mh.obtainMessage(1);

    // sends the message to our handler
    mh.sendMessage(msg);
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:07:54.307

例如，在按钮侦听器中尝试此操作：

```
 try {
            Thread.sleep(_time_);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        Button but = (Button)theMainActiv.findViewById(R.id.bSend);
        but.setBackgroundColor(Color.BLUE); 
```

`_time_`你可以从`Edittext`例如

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T17:51:10.680

注意你输入了多少睡眠时间——超过 5 秒，系统会给你一个弹出窗口，告诉用户你的应用程序挂起并提供关闭它。

# web - 开发时尝试仅在我的个人计算机上查看网站

> ID：16109897
> 
> 赞同：0
> 
> 时间：2013-04-19T17:02:23.690
> 
> 标签：web

我认为这很简单，但显然不是......目前我只是试图制作一些简单的 HTML/JS 文件来测试引导程序，我将它们留在我的 C 驱动器上，并尝试从内部查看它们我的浏览器（铬）。但是，当我尝试时，它只是告诉我我指向的 HTML 文件不是一个网站，这就是它的结尾。

我到底做错了什么？

编辑：它只是这么说

没有找到该网址的网页：file:///C:/.../test.html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:05:20.077

尝试以管理员模式启动浏览器。打开浏览器可执行文件（*C:\Program Files\Google\Chrome\Application\chrome.exe*）的属性窗口，转到兼容性选项卡并选中“以管理员身份运行此应用程序”

# facebook - 当 LIMIT 与 DESC 订单一起使用时，Facebook FQL 查询返回空结果集

> ID：16109915
> 
> 赞同：1
> 
> 时间：2013-04-19T17:04:03.683
> 
> 标签：facebook, facebook-graph-api, facebook-fql

您可以使用 Graph API Explorer 进行尝试：

```
SELECT post_id, id, fromid, time, text, user_likes, likes FROM comment WHERE post_id ='126757470715601_530905090300835' AND time < '1366318653' ORDER BY time DESC LIMIT 30 
```

这将返回一个空的结果集。但是如果我从查询中删除 DESC，它将返回 30 个结果。

```
SELECT post_id, id, fromid, time, text, user_likes, likes FROM comment WHERE post_id ='126757470715601_530905090300835' AND time < '1366318653' ORDER BY time LIMIT 30 
```

因此，通过某种方式改变了 LIMIT 的行为方式，将 DESC 添加到订单中。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:54:04.860

**更新：**

时间在范围内。对不起，我之前的错误计算。你可以做的是将评论数增加到一个巨大的值，例如 LIMIT 150，因为可能有很多评论 is_privacy='0' 大约 30 项。

# java - 在 super.run() 调用后，线程类中的控制不会回来

> ID：16109919
> 
> 赞同：0
> 
> 时间：2013-04-19T17:04:17.267
> 
> 标签：java, multithreading, threadpoolexecutor

我有一个线程工厂、执行程序、线程类和一个可运行类。这是线程类：（threadsCount 是一个 AtomicInteger，我用它来跟踪创建的线程数）

```
public void run() {
    try {
        threadsCount.incrementAndGet();
        super.run();
    } finally {
        threadsCount.decrementAndGet();
    }
} 
```

我的可运行类目前没有实现，但有空的 run() 方法。

当我尝试调用 Executor.execute(new RunnableClazz()) 时，控制权来到这个 Thread 类 - run() 方法，当它遇到 super.run() 时，它转到 RunnableClazz#run() 方法。

所有这些都很好。但问题是，在 RunnableClazz#run() 完成后，控件不会回到我的 Thread 类的“finally”块。

有任何想法吗？我是否需要在 run() 方法结束时手动杀死可运行对象？

```
public class ThreadAA extends Thread {

private static final AtomicInteger threadsCount = new AtomicInteger();
private static final AtomicInteger threadsCreated = new AtomicInteger();
public static final String DEFAULT_NAME = "ThreadAA";

public ThreadAA(Runnable r)
    {
        this(r, DEFAULT_NAME);
    }
public ThreadAA(Runnable r, String threadName)
    {
        super(r, threadName + "-" + threadsCreated.incrementAndGet());

        setUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler()
        {
            public void uncaughtException(Thread t, Throwable e)
            {
                logger.error("Uncaught exception in thread " + t.getName(), e);
            }
        });
    }

@Override
public void run()
    {
        boolean debug = false;
        //just for debug purpose
        debug = true;
        if(debug)
        {
            logger.debug("Running thread " + getName());
        }

        try
        {
            threadsCount.incrementAndGet();
            super.run();
        }
        finally
        {
            threadsCount.decrementAndGet();
            if(debug)
            {
                logger.debug("Done running thread " + getName());
            }
        }
    }

 } 
```

我的可运行类：

```
public class RunnableClazz implements Runnable {

@Override
public void run() {
        logger.debug("Inside RunnableClazz");
}

} 
```

调用这个 runnable 的方法如下所示：

```
 Executor executor = new Executor(25, 100, 1L, TimeUnit.SECONDS, 
                new ArrayBlockingQueue<Runnable>(5), new TFactory("abc"));

    executor.setRejectedExecutionHandler(new ThreadPoolExecutor.CallerRunsPolicy());        
    executor.execute(new RunnableClazz());  

executor.execute(new RunnableClazz()); 
```

请注意，我在服务器启动期间只创建了一次执行程序。我粘贴它只是为了说明我如何创建它。因此`executor.execute(new RunnableClazz());`产生了问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:55:25.157

我复制了您的代码并开始调试。

当您调用 super.run() 时，它会从 ThreadPoolExecutor 运行一个：

```
 public void run() {
        runWorker(this);
    } 
```

runWorker 然后调用 RunnableClazz.run()，完成后，它把线程搁置，等待新的 runnables 被执行。这是怎么发生的？

在 threadFactory 中，我认为它是这样的：

```
public Thread newThread(Runnable r) {
    return new ThreadAA(r);
} 
```

Runnable r 不是您的 RunnableClazz，而是 ThreadPoolExecutor。

**编辑：**

您可能想要扩展 ThreadPoolExecutor 类并实现方法：

```
protected void beforeExecute(Thread t, Runnable r) { }

protected void afterExecute(Runnable r, Throwable t) { } 
```

并在那里实施您的计数。

# ios - touchesBegin 在自定义 UITableViewCell，touchesEnded 在 UIView

> ID：16109922
> 
> 赞同：0
> 
> 时间：2013-04-19T17:04:32.940
> 
> 标签：ios, uitableview, uiview, touchesbegan

我正在尝试模仿将图像从 a 拖放`UITableView`到 a `UIView`。UITableView 和 UIView 都在同一个视图上，并排。

**我的做法：**

是触发`touchesBegan`内部的事件`UITableView`（即，当触摸/选择单元格时）并在触摸结束时触发 touchesEnded 事件`UIView`。

**问题：**

所以我创建了一个自定义`UITableViewCell`，其中包含一个`UIImageView`和几个`UILabels`. 我`User Interaction Enabled`为此设置了`UIImageView`. 然后为了接收`touchesBegan`事件，我确实覆盖`touchesBegan`了自定义`UITableViewCell`类中的方法；现在我可以`touchesBegan`从单元格接收事件。

**问题是**

当触摸`touchesEnded`在`UIView`. 请注意，我已经`touchesEnded`在视图控制器类中实现了该方法（不是在自定义类中）；如果我在此范围内开始和停止触摸`UIView`，我会看到`touchesEnded`被解雇。

我在这里有什么遗漏吗？

使用 Xcode 4.6 (4H127)，在 iPad 2 和 iOS 6.1.3 上测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:04:11.117

这不会那样工作。您将需要在包含两个子视图的父视图上使用触摸方法。可以抽象地看起来像这样：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    if ([self touchOnCell:touches]) { //check to see if your touch is in the table
        isDragging = YES;             //view cell
    }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    //do your dragging code here
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    if (isDragging && [self touchOnDropView:touches]) {
        //do your drop code here 
    }
} 
```

现在，如果这不能单独工作，您可能希望`hitTest`在 tableView 上实现，并且如果触摸位于拖动对象的区域，则返回父视图。

希望这可以帮助

# ruby-on-rails - 在 Rails 中的 Facebook 共享和在 Twitter 上共享

> ID：16109926
> 
> 赞同：0
> 
> 时间：2013-04-19T17:04:50.840
> 
> 标签：ruby-on-rails, facebook, twitter

在我的登录页面上，我希望用户能够在 Facebook 上分享并在 Twitter 上分享带有**特定消息**的页面。我希望能够知道他们何时将其实际发布在 Facebook 和/或 Twitter 上（任何获取回调的方式）。

在 Rails 中添加 Facebook 分享链接的正确方法是什么？我想拥有自己的按钮。

我看过考拉，但我想知道它是否太多，因为我只想能够分享那个登录页面。我不想提供任何类型的身份验证或更复杂的东西。唯一棘手的部分是我需要知道他们何时真正共享。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:33:56.907

您可以使用 sharethis 之类的外部服务，添加一些选项，

对于 facebook，您可以通过注册 facebook 应用程序来使用自己的共享方式，请考虑以下示例

```
<a href="#" onclick='postToFeed("<%= image_url%>","<%= somte text %>"); return false;'>
      <%= image_tag("btn_fb.png" , :alt=>"Facebook") %>
    </a>

<script type="text/javascript">
FB.init({appId: APP_ID", status: true, cookie: true});

  function postToFeed(img,name) {

    // calling the API ...
    var obj = {
      method: 'feed',
      // redirect_uri: 'http://localhost:3000',
      link: 'http://url/',
      picture: img,
      name: 'NAME',
      caption: 'CAPTION',
      description: DESCRIPTION
    };

    function callback(response) {
      document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
    }

    FB.ui(obj, callback);
  }

</script> 
```

# sql-server - SQL Azure - 连接失败 - 但没有问题吗？

> ID：16109930
> 
> 赞同：9
> 
> 时间：2013-04-19T17:04:58.967
> 
> 标签：sql-server, entity-framework, azure, azure-sql-database

我们最近在生产部署过程中将客户端迁移到 SQL Azure 平台。从所有外在迹象来看，它是成功的：与之相连的网络应用程序都在工作。

但是，当我们查看 Azure 监视器时，我们会看到许多失败的连接。我们还没有找到太多解释什么是连接失败的文档。我们的用户都没有报告问题。有谁知道这怎么可能？

![在此处输入图像描述](https://i.stack.imgur.com/9eHSd.png)

使用本文中的示例查询（[查看 SQL Azure 实例上的连接问题](http://www.clickrex.com/post/42345168417/view-connection-issues-on-an-sql-azure-instance)）

```
SELECT      
            [Date From] = EL.[start_time],
            [Date To] = EL.[end_time],
            [Database Name] = EL.[database_name],
            [Event Type] = EL.[event_type],
            [Event Sub Type] = EL.[event_subtype_desc],
            [Description] = EL.[description],
            [Additional Data] = EL.additional_data
FROM sys.event_log EL
WHERE EL.event_type != 'connection_successful'
AND EL.event_subtype_desc != 'idle_connection_timeout'
ORDER BY [Date From] DESC 
```

我们看到这样的结果：

```
2013-04-19 16:40:00.0000000 2013-04-19 16:45:00.0000000 [DATABASE]  connection_failed   blocked_by_firewall Client IP address is not allowed to access the server.  NULL
2013-04-19 16:40:00.0000000 2013-04-19 16:45:00.0000000             connection_failed   blocked_by_firewall Client IP address is not allowed to access the server.  NULL
2013-04-19 16:35:00.0000000 2013-04-19 16:40:00.0000000 [DATABASE]  connection_failed   blocked_by_firewall Client IP address is not allowed to access the server.  NULL
2013-04-19 16:35:00.0000000 2013-04-19 16:40:00.0000000             connection_failed   blocked_by_firewall Client IP address is not allowed to access the server.  NULL
2013-04-19 16:30:00.0000000 2013-04-19 16:35:00.0000000 [DATABASE]  connection_failed   blocked_by_firewall Client IP address is not allowed to access the server.  NULL
2013-04-19 16:30:00.0000000 2013-04-19 16:35:00.0000000             connection_failed   blocked_by_firewall Client IP address is not allowed to access the server.  NULL
2013-04-19 16:25:00.0000000 2013-04-19 16:30:00.0000000 [DATABASE]  connection_failed   blocked_by_firewall Client IP address is not allowed to access the server.  NULL
2013-04-19 16:25:00.0000000 2013-04-19 16:30:00.0000000             connection_failed   blocked_by_firewall Client IP address is not allowed to access the server.  NULL
2013-04-19 16:20:00.0000000 2013-04-19 16:25:00.0000000 [DATABASE]  connection_failed   blocked_by_firewall Client IP address is not allowed to access the server.  NULL
2013-04-19 16:20:00.0000000 2013-04-19 16:25:00.0000000             connection_failed   blocked_by_firewall Client IP address is not allowed to access the server.  NULL
2013-04-19 16:15:00.0000000 2013-04-19 16:20:00.0000000 [DATABASE]  connection_failed   blocked_by_firewall Client IP address is not allowed to access the server.  NULL 
```

以及我们的连接字符串示例，根据要求：

```
 <add name="[MyContext]"
     providerName="System.Data.SqlClient"
     connectionString="
      Server=tcp:[machine].database.windows.net,1433;
          Database=[database];
          User ID=[user]@[machine];
          Password=[password];
          Trusted_Connection=False;
          Encrypt=True;
          Connection Timeout=30;"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T20:23:07.837

因此，自发布的第一天起，我们就再也没有看到失败的连接。我目前的想法是，Azure 端可能有一个后端进程无法与新实例一起正常运行，但此后要么停止，要么已修复，因为我们没有更改任何内容。我会让它再坐几天，如果我们没有发现更多问题，请将其归结为环境设置故障。

![在此处输入图像描述](https://i.stack.imgur.com/LAovJ.png)

这是一周左右后的状态。不是一个频繁使用的站点，但没有任何连接错误的迹象。

![在此处输入图像描述](https://i.stack.imgur.com/kg5SS.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-24T05:28:17.447

我遇到了同样的问题，它让我感到困惑，直到我意识到我在我的家庭办公室机器上打开并连接了一个 SQL Server Management Studio 实例，并且我的 ISP 更改了我的 IP 地址！一旦我关闭 SSMS，失败的连接就会停止。感谢 OP 提供指向 SQL 查询的链接，这也很有用！

# codeigniter - 在 PyroCMS 中更改新创建用户的组

> ID：16109933
> 
> 赞同：0
> 
> 时间：2013-04-19T17:05:18.173
> 
> 标签：codeigniter, pyrocms

使用 PyroCMS 2.2，我怎样才能让注册表单将用户分配给我创建的新组之一。在管理面板中，我创建了一个名为`client`. 当我的模块内的注册表单被发送时，它会创建客户端，但将组的类型设置为`$config['default_group'] = 'user';`核心模块内。

有没有办法让我在这个模块中为这个特定的注册表单将组设置为客户端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T14:06:47.287

我建议这样做：

*   当您将用户重定向到服装注册表单时，请使用您的服装模块名称的值设置会话变量，例如
*   使用[PyroCMS 事件](http://docs.pyrocms.com/2.2/manual/developers/tools/events)( `Events::trigger('post_user_register', $id)`) 并为您的模块构建一个`events.php`文件，以便在每次用户注册后触发此事件，并且由于您已设置会话变量，您可以决定将新创建用户的用户组更改为适当的用户组，并且完成后请务必取消设置会话变量。

希望你能明白。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:51:40.773

看起来没有内置的方法可以做到这一点。

```
system/cms/modules/users/controllers/users.php:384

// We are registering with a null group_id so we just
// use the default user ID in the settings.
$id = $this->ion_auth->register($username, $password, $email, null, $profile_data); 
```

[似乎也无法覆盖核心模块](https://github.com/pyrocms/pyrocms/issues/1325#issuecomment-7740818)。

好像你有2个选择：

*   修改核心模块

*   尝试将用户模块移植到您自己的模块中

# c# - 使用 await 时 SynchronizationContext 不流动

> ID：16109936
> 
> 赞同：4
> 
> 时间：2013-04-19T17:05:30.113
> 
> 标签：c#, .net, mvvm, nunit, async-await

我们计划在我们的 MVVM 视图模型中使用 async/await，但是在对这段代码进行单元测试时遇到了一个难题。当我们使用 NUnit 和手写模拟进行消息传递时，我们正在丢失当前的`SynchronizationContext`.

最好用以下小的复制示例代码显示：

```
[Test] public void TestMethod()
{       
  Func<Task> asyncMethod = async () =>
    {
      var context = SynchronizationContext.Current;
      await TaskEx.Yield();
      Assert.AreEqual(context, SynchronizationContext.Current);
    };

    // Establish the new context
    var syncCtx = new SingleThreadSynchronizationContext(false);
    SynchronizationContext.SetSynchronizationContext(syncCtx);

    // Invoke the function and alert the context to when it completes
    var t = asyncMethod();
    t.ContinueWith(delegate { syncCtx.Complete(); }, TaskScheduler.Default);

    // Pump continuations and propagate any exceptions
    syncCtx.RunOnCurrentThread();
    t.GetAwaiter().GetResult();
} 
```

实际上，大部分代码是从 Stephen Toub[在他的博客上](http://blogs.msdn.com/b/pfxteam/archive/2012/02/02/10263555.aspx)的 AsyncPump 实现中窃取的。

有趣的是，要让这个测试通过，`ExecutionContext.SuppressFlow();`在调用 async 方法之前要折腾一下。这可能足以解决我们的问题，但我对 ExecutionContext 了解不够，我想更深入地了解正在发生的事情。

为什么 await 语句生成的代码会吞下当前的 SynchronizationContext？
是否有另一种明显的方法可以使用单线程上下文对异步/等待代码进行单元测试？

PS：我们正在使用 .Net4 和 Microsoft.CompilerServices.AsyncTargetingPack.Net4

PPS：这也发生在使用稳定的 Microsoft.Bcl.Async 而不是 ATP 的简单项目中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:05:50.630

您遇到了 .NET 4.0 中的错误，该错误已在 .NET 4.5 中修复：

[SynchronizationContext.Current 在主 UI 线程上的 Continuation 中为 null](https://stackoverflow.com/a/11634544/495262)

这是同一个问题，因为后面的代码`await`将被包裹在一个延续中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-23T12:56:56.340

我有完全相同的问题。

我发现这是因为我的自定义`SynchronizationContext`没有正确覆盖和实现`CreateCopy`方法。似乎异步代码在每个任务（或某事）之后创建了上下文的副本。确保您的也正确实施它。

# java - 创建向量 > 将 .txt 文件导入 JTable

> ID：16109937
> 
> 赞同：1
> 
> 时间：2013-04-19T17:05:30.783
> 
> 标签：java, swing, vector, jtable, file-io

我在从一维向量“v”转换到二维向量“myVector”时遇到问题。如果您能帮我解决这个问题，将不胜感激。接受任何建议。

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.util.Vector;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;

public class InsertDataFinal {

public static void main(String args[]) {
    Vector<String> v = new Vector<String>(3);

    Vector<Vector<String>> myVector = new Vector<Vector<String>>();
    int i = 0;
    int j = 0;
    try {

        FileReader fReader = new FileReader("Password.txt");
        BufferedReader inFile = new BufferedReader(fReader);
        String input;
        String[] temp;
        while ((input = inFile.readLine()) != null) {

            temp = input.split(" ");

            for (i = 0; i < temp.length; i++) {

                v.add(temp[i]);
            }

            myVector.add(j, v);
            j++;
        }

    } catch (Exception e) {
        System.out.println("ERROR");
    }

    Vector<String> columnNames = new Vector<String>(3);
    columnNames.addElement("Website");
    columnNames.addElement("Username");
    columnNames.addElement("Password");
    DefaultTableModel model = new DefaultTableModel(myVector, columnNames);
    JTable table = new JTable();
    table.setModel(model);
    JScrollPane scrollpane = new JScrollPane(table);
    JPanel panel = new JPanel();
    panel.add(scrollpane);
    JFrame frame = new JFrame();
    frame.add(panel, "Center");
    frame.pack();
    frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:51:55.213

您的示例继续扩展`Vector<String>`名为的单个实例`v`。相反，创建一个新实例并将其添加到`myVector`. 此外，限制变量的范围并捕获最具体的异常。

```
Vector<Vector<String>> myVector = new Vector<Vector<String>>();
try {
    FileReader fReader = new FileReader("temp.txt");
    BufferedReader inFile = new BufferedReader(fReader);
    String input;
    while ((input = inFile.readLine()) != null) {
        String[] temp = input.split(" ");
        Vector<String> v = new Vector<String>(3);
        for (int i = 0; i < temp.length; i++) {
            v.add(temp[i]);
        }
        myVector.add(v);
    }
} catch (IOException e) {
    e.printStackTrace(System.err);
} 
```

# jquery - 将下拉菜单中对象的方向从垂直更改为水平？

> ID：16109940
> 
> 赞同：1
> 
> 时间：2013-04-19T17:05:38.630
> 
> 标签：jquery, css, wordpress, menu, orientation

好的，所以[我的网站](http://www.bassnbeats.com)有底部菜单（灰色的小加号），我希望将从菜单中下拉的对象的方向从垂直更改为水平。有人告诉我，我需要编辑 toggle.js 文件中的一些部分，如下所示。另外，如果有人对如何使我之前提到的颜色变暗有任何想法，那也很棒。

```
jQuery( document ).ready( function( $ ) {

// Submenu highlighting
$("ul.sub-menu").closest("li").addClass('parent');
$(".main-navigation ul.children").closest("li").addClass('parent');

var $comments = $( '#content' );

// Toggle comments on
$( '.comments-link' ).unbind( 'click' ).click( function() {

    $( 'html,body' ).animate( { scrollTop: $( "#comments-toggle" ).offset().top },'slow' );
    $comments.find( '#comments' ).slideToggle( 'ease' );
    $( this ).toggleClass( 'toggled-on' );

} );

var $sidebar = $( '#main' );

// Toggle sidebar on
$( '.sidebar-link' ).unbind( 'click' ).click( function() {
    $( 'html,body' ).animate( { scrollTop: $( "#secondary" ).offset().top },'slow' );
    $sidebar.find( '#secondary' ).slideToggle( 'ease' );
    $( this ).toggleClass( 'toggled-on' );

} );

//Toggle the the main navigation menu for small screens.
var $masthead = $( '#masthead' ),
    timeout = false;

$.fn.smallMenu = function() {
    $masthead.find( '.site-navigation' ).removeClass( 'main-navigation' ).addClass( 'main-small-navigation' );
    $masthead.find( '.site-navigation h1' ).removeClass( 'assistive-text' ).addClass( 'menu-toggle' );

    $( '.menu-toggle' ).unbind( 'click' ).click( function() {
        $masthead.find( '.menu' ).slideToggle( 'ease' );
        $( this ).toggleClass( 'toggled-on' );
    } );
};

// Check viewport width on first load.
if ( $( window ).width() < 600 )
    $.fn.smallMenu();

// Check viewport width when user resizes the browser window.
$( window ).resize( function() {
    var browserWidth = $( window ).width();

    if ( false !== timeout )
        clearTimeout( timeout );

    timeout = setTimeout( function() {
        if ( browserWidth < 600 ) {
            $.fn.smallMenu();
        } else {
            $masthead.find( '.site-navigation' ).removeClass( 'main-small-navigation' ).addClass( 'main-navigation' );
            $masthead.find( '.site-navigation h1' ).removeClass( 'menu-toggle' ).addClass( 'assistive-text' );
            $masthead.find( '.menu' ).removeAttr( 'style' );
        }
    }, 200 );
} ); 
```

});

这是页面 CSS 的小部件部分：

```
/* =Widgets
----------------------------------------------- */

.sidebar-link {
background: #fafafa;
border-radius: 40px;
clear: both;
color: #ddd;
cursor: pointer;
display: block;
font-size: 18px;
font-size: 1.8rem;
line-height: 40px;
margin: 2em auto 0;
text-align: center;
transition: all .4s ease-in-out;
-webkit-transition: all .4s ease-in-out;
-moz-transition: all .4s ease-in-out;
-o-transition: all .4s ease-in-out;
-ms-transition: all .4s ease-in-out;
width: 40px;
height: 40px;
}
.sidebar-link:hover {
background-color: #444;
color: #969696;
transition: all .4s ease-in-out;
-webkit-transition: all .4s ease-in-out;
-moz-transition: all .4s ease-in-out;
-o-transition: all .4s ease-in-out;
-ms-transition: all .4s ease-in-out;
}
.widget {
font-family: Baskerville, "Playfair Display", "Times New Roman", serif;
font-size: 16px;
font-size: 1.6rem;
font-weight: 100;
margin: 0 0 3em;
word-break: break-word;
}
.widget-column {
width: 100%;
}
.widget-title {
font-size: 24px;
font-size: 2.4rem;
margin: 0 0 .5em 0;
}
.one.widget-column {
float: none;
margin: 0 33%;
}
.two.widget-column {
float: left;
margin: 0 13.5%;
}
.three.widget-column {
float: left;
margin: 0 5%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:14:38.760

我认为您不需要编辑任何 JavaScript。只需修改该菜单的 CSS。这是一个起点：

```
#secondary .widget-column {
    width: 100%;
}

#secondary .widget {
    width: 33%;
    float: left;
} 
```

# perl - Apache2 在 Perl 脚本上返回 404

> ID：16109941
> 
> 赞同：2
> 
> 时间：2013-04-19T17:05:40.953
> 
> 标签：perl, apache2, http-status-code-404

[解决了]

在设法让服务器抛出 500 之后，我不得不重新定位线路；到 .pl 脚本中的不同位置。

;-)

我找到了这篇文章 VIA SO：[为什么我的 Perl CGI 程序返回服务器错误？](https://stackoverflow.com/questions/11850192/why-does-my-perl-cgi-program-return-a-server-error)

这与我目前在运行 A2 的 Ubuntu 12.04.02 中遇到的问题相同，但是在 /etc/apache2/sites-available 中进行的设置更改看起来正确并没有产生任何积极影响。

=> 在 perl 脚本中（就在对 perl 解释器的调用下方）脚本中，我在使用VIA CLI 功能的浏览*器运行时遇到问题；*

```
 print "Content-type: text/plain\n\n";
 print STDERR "OK so far\n";
 print "Succeeded."; 
```

=> 这个服务器在配置点上是非常基础的，只打算托管 1 个网站。此时没有分配域，我只是通过 LAN IP 10.0.0.50 访问它，我认为这应该不是问题？

=> 我的文档根是`/var/www` => cg-bin 位于：`/var/www/cgi-bin`

=> 目前 /etc/apache2/sites-available/default 正在使用以下关于 ScriptAlias 的参数；

```
 ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
            AllowOverride None
            Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
            Order allow,deny
            Allow from all
    </Directory> 
```

=> 我已将上述设置为以下，但服务器仍然返回 404；

```
ScriptAlias /cgi-bin/ /var/www/cgi-bin/
<Directory "/var/www/cgi-bin/">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
</Directory> 
```

=> /var/log/apache2/error.log 提供以下内容：

```
[Thu Apr 18 23:06:22 2013] [error] [client 10.0.0.10] script not found or unable to stat: /usr/lib/cgi-bin/acctmanager.pl
[Thu Apr 18 23:07:45 2013] [notice] caught SIGTERM, shutting down
[Thu Apr 18 23:07:46 2013] [notice] Apache/2.2.22 (Ubuntu) PHP/5.3.10-1ubuntu3.6 with Suhosin-Patch configured -- resuming normal operations 
```

=> ** /etc/apache2/sites-available/default ** 的顶部显示为；

```
<VirtualHost *:80>
        ServerAdmin webmaster@localhost

        DocumentRoot /var/www
        <Directory /var/www>
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory 
```

如果有人对我的错误有所了解，我将非常感谢您的时间和投入。

谢谢

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:51:53.750

我相信您对 script/dir 文件夹具有 u+x 权限，并且该脚本位于 ScriptAlias 目录中，请再次检查此链接以查看您是否错过了任何配置。-

*   [http://httpd.apache.org/docs/2.2/howto/cgi.html](http://httpd.apache.org/docs/2.2/howto/cgi.html)

# eclipse - Eclipse XML Schema Editor 在验证期间无法处理链接？

> ID：16109942
> 
> 赞同：1
> 
> 时间：2013-04-19T17:05:41.770
> 
> 标签：eclipse, xsd, hyperlink, xsd-validation

我有带有 XSD 文件的模块，并希望在模块 B (egbxsd) 中包含模块 A (egaxsd) 的 XSD，在导入语句中不使用相对或绝对路径，而只使用要包含的文件的名称。就我而言：

```
<import namespace="..." schemaLocation="a.xsd"/> 
```

为此，我在 .project 中添加了指向原始文件的链接，以便两个文件看起来彼此相邻。现在的问题是错误

```
src-resolve: Cannot resolve the name 'a:Some' to a(n) 'type definition' component. 
```

如果我从 a.xsd 中引用了 Some 类型。

是否有修复程序不会出现此错误，或者这是编辑器中的错误？

如果我在编辑器中输入“a:”，它会建议我输入 Some，如果我在 a:Some 处按 F3，则会打开文件 a.xsd 并标记输入 Some。所以链接被识别...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T21:47:50.357

您不能避免在 schemaLocation 属性中使用相对路径或绝对路径：该属性采用 URI，并且所有 URI 要么是绝对的，要么是相对的。您显示的 ( `a.xsd`) 是相对的。

除非您更改其配置，否则某些 HTTP 服务器会避免遵循符号链接；某些 URI 解析库在解析文件时拒绝遵循符号链接：URI。如果我理解正确，他们正试图保护您免受某种形式的跨站点脚本攻击。看起来好像你被他们的这种谨慎所困扰。您可以尝试硬链接，或者可能有一种方便的方法来更改相应模块的配置。

# jquery - 基于 div a href 链接的重定向

> ID：16109950
> 
> 赞同：1
> 
> 时间：2013-04-19T17:06:20.050
> 
> 标签：jquery, redirect

我正在寻找一种基于 div 的 href 链接重定向页面的方法。如果页面上只有一个 div，则重定向到该 div 的 a href 链接。

JS

```
$(function () { 
    if ($('.div').length = 1) { alert('Just one Div'); } 
}); 
```

HTML

```
<div class="div"><div class="title"><a href="../posters/bicycles/default.html">Bicycle</a></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T17:09:21.610

尝试这个：

```
$('.div a').click(function (e) {
    e.preventDefault();
    window.location.href = $(this).attr('href');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:08:14.743

你可以这样做，返回 DIV 元素的数量：

```
if( $("div").length == 1 )
{
    document.location = $("div a").attr("href");
} 
```

# java - Java ServerSocket 未收到 HTTP 响应 - 超时

> ID：16109957
> 
> 赞同：0
> 
> 时间：2013-04-19T17:06:43.510
> 
> 标签：java

我正在为一个简单的客户端-服务器程序编写原型。客户端发出一个 HTTP PUT 请求（工作成功），但它没有收到 HTTP 响应并且正在超时。我一直在玩代码并试验 InputStream 和 OutputStream 几个小时，但我错过了一些东西。可能很简单，因为我没有用 Java 做太多的编码。

客户代码：

```
URL url = new URL("http://" + remoteFilepath);
        HttpURLConnection httpCon = (HttpURLConnection) url.openConnection();
        httpCon.setReadTimeout(5000);
        httpCon.setDoOutput(true);
        //httpCon.setDoInput(true);
        httpCon.setRequestMethod("PUT");
        OutputStreamWriter out = new OutputStreamWriter(
            httpCon.getOutputStream());
        String tmp = getContent(localFilepath);
        System.out.println("tmp: " + tmp);
        out.write(tmp + "\n"); 
        out.flush();
        httpCon.connect();
        System.out.println("before afterClient");
        BufferedReader fromClient = new BufferedReader(new InputStreamReader(httpCon.getInputStream()));
        System.out.println("after fromClient");
        String line;
        while ((line = fromClient.readLine()) != null) {
            System.out.println(line);
        }
        System.out.println("response code: " + httpCon.getResponseCode() + ", response message: " + httpCon.getResponseMessage()); 
```

服务器代码：内部运行方法

```
BufferedReader fromClient = new BufferedReader(new InputStreamReader(conn.getInputStream()));
if(line.startsWith("PUT")){
                    methodLine = line.split(" ");
                    this.put(fromClient, line, methodLine);
} 
```

put() 方法 - 包含 http 响应

```
public void put(BufferedReader fromClient, String line, String[] putLine){
        String[] contentLine;

        try{
        while((line = fromClient.readLine()) != null){
            if(line.startsWith("Content-Length:")){
                contentLine = line.split(" ");
                //get the content, then send back HTTP response
                int numChars = Integer.parseInt(contentLine[1]);
                char[] cbuf = new char[numChars]; 
                fromClient.readLine(); //skip over blank line
                fromClient.read(cbuf);  //read the specified number of bytes

                System.out.println("cbuf" + new String(cbuf));

                //store <file,content> in memory

                contentMap.put(putLine[1], new String(cbuf));

                //send back HTTP response then break
                PrintWriter out = new PrintWriter(
                        conn.getOutputStream());
                out.write("HTTP/1.1 200 OK" + "\n");  //response 
                out.flush();
                break;
            }
        } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2019-08-24T11:01:43.237

嗯，你可以把这个写在你的回复里，然后我用**PostMan**测试一下，这告诉我我想看到什么。

```
HTTP/1.1 200 OK
Content-Type: text/html
COntent-Length: your length 
```

# ios - 将 UILabel 的文本从一个视图控制器传递到另一个视图控制器

> ID：16109962
> 
> 赞同：0
> 
> 时间：2013-04-19T17:07:03.347
> 
> 标签：ios, xcode, xib, viewcontroller, nib

是的，我知道人们已经安静地询问了一段时间。

我正在寻找有关如何使用@properties 将数据从一个视图控制器传递到另一个视图控制器的帮助。

我没有在此处发布代码，而是发布了一个免费的示例代码，您可以从打开的保管箱文件夹中获取该代码。

任何帮助表示赞赏，但请记住，我正在寻求帮助，但我没有使用故事板进行开发，所以我不能使用`prepareForSeque`.

网址：[https ://www.dropbox.com/sh/l7xagtqqprcjqr2/gplHMvM2-O](https://www.dropbox.com/sh/l7xagtqqprcjqr2/gplHMvM2-O)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:03:02.880

好的，所以，在 SecondViewController 中，您创建了一个 UserText UITextField - 实际发生的是：

1.  `SecondViewController *SecondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];`
2.  `SecondView.UserText = TextField.text;`
3.  调用 SecondViewController viewDidLoad，通过 IBOutlet 用正确的引用覆盖 UserText。

这几乎是人们不断犯的错误。初始化 viewcontroller 并不能保证 viewDidLoad 在你想要的时候被调用。

所以有几种方法可以做到这一点，

1.  在 SecondViewController 中设置 NSString 属性
2.  将文本传递给 SecondViewController 的 initWithNibName 方法，如下所示：

    `- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil text:(NSString *) text`

选项 2 需要 NSString 属性。您不能将文本分配给通过 IBOutlet 连接的 UILabel，这是因为在初始化视图控制器后**不会立即调用 viewDidLoad。**

# nosql - leveldb/Cassandra 的布隆过滤器是否有助于范围查询？

> ID：16109964
> 
> 赞同：1
> 
> 时间：2013-04-19T17:07:16.363
> 
> 标签：nosql, cassandra, bigtable, leveldb

我知道 leveldb/cassandra 将他们的记录存储在 SSTable 中，并使用布隆过滤器在执行精确键查询时选择 SSTable，他们的布隆过滤器是否有助于键范围查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T17:14:21.667

Cassandra 中有两种类型的范围查询：get_slice，它在一行中查找一系列列；get_range_slices，它从一系列行中查找一系列列。

get_slice 中使用布隆过滤器来定位行。但是在 get_range_slices 查询中不使用布隆过滤器。但是，由于 Cassandra 键是按哈希顺序存储的，因此 get_range_slices 并不是很有用，因此必须扫描所有 SSTable 以执行 get_range_slices 查询通常并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:40:39.857

在进行范围查询之前，了解什么是布隆过滤器很重要？

> 布隆过滤器是概率集，允许您用内存换取准确性，或者是一种节省空间的概率数据结构，用于测试元素是否是集合的成员。

Cassandra 在执行密钥查找时使用布隆过滤器来节省 IO，并且您知道每个 SSTable 都有一个与之关联的布隆过滤器，Cassandra 在进行任何磁盘搜索之前都会对其进行检查。现在考虑没有布隆过滤器的情况，每次读取密钥都必须读取每个 sstable，这非常昂贵。通过使用布隆过滤器，cassandra 几乎总是只需要查看包含该键数据的 sstables。

因此，每当执行范围查询时，布隆过滤器都会发挥重要作用。在 get_slice 类型的范围查询中，它将有助于识别确切的行，而在 get_range_slices 中，它将有助于找到负责的概率键集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T18:22:47.610

理查德回答布隆过滤器端；填写第一部分：是的，LeveledCompactionStrategy 通常会导致更快的扫描（通过 PK 或索引），因为数据行的写入端合并更积极。

# c++ - 通过继承实现纯虚函数

> ID：16109966
> 
> 赞同：1
> 
> 时间：2013-04-19T17:07:17.490
> 
> 标签：c++, inheritance, virtual

我有以下情况：

```
class Fork {
    public:
        virtual void use() = 0;
};

class Spoon {
    public:
        virtual void use() = 0;
};

class SilverSpoon : public Spoon {
    public:
        virtual void use() { }
};

class SilverSpork : public SilverSpoon, public Fork {
    public:
        using SilverSpoon::use;
}; 
```

我希望纯虚函数`Fork::use`将由`SilverSpoon::use`in定义`SilverSpork`。但是，我得到

```
error: cannot declare variable ‘spork’ to be of abstract type ‘SilverSpork’
note:  because the following virtual functions are pure within ‘SilverSpork’:
note:  virtual void Fork::use() 
```

有没有办法解决这个问题而无需添加

```
virtual void use() {
    SilverSpoon::use();
} 
```

到`SilverSpork`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T17:20:59.003

`Fork`和之间没有内在的联系`Spoon`，而且它们都有一个名为的虚函数这一事实`use`并没有产生联系。但是，如果您添加一个新类，比如说，`Utensil`它定义了一个纯虚函数`use()`，并从它派生`Fork`并`Spoon`从它作为一个虚基，您就有了一个连接。这样，该类`SilverSpork` **将**在其直接基类中选择 的实现`SilverSpoon::use`作为覆盖器。这被称为“支配地位”。`use``Fork`

```
class Utensil {
public:
    virtual void use() = 0;
};

class Spoon : public virtual Utensil {
public:
    virtual void use() = 0; // or can omit this, relying on Utensil
};

class Fork : public virtual Utensil {
public:
    virtual void use() = 0; // or can omit this, relying on Utensil
};

class SilverSpoon : public Spoon {
public:
    void use() { }
};

class SilverSpork : public SilverSpoon, public Fork {
}; // OK: SilverSpoon::use overrides Fork::use 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T17:16:59.510

`Fork::use()`并且`Spoon::use()`是两个具有相同名称的不同方法，它们扩展为`SilverSpork`.

编译器希望它们都被实现。这只是一个冲突的名称，不是覆盖也不是重载。一种可能性是从基虚拟类继承 Fork 和 Spoon：

```
class Object {
    public:
        virtual void use() = 0;    
};

class Fork : virtual public Object {
};

class Spoon: virtual public Object {
};

class SilverSpoon : public Spoon {
    public:
        virtual void use() { cout << "SilverSpoon" << endl; }
};

class SilverSpork : public SilverSpoon, public Fork {
    public:
        using SilverSpoon::use;
}; 
```

图表：

```
 +---------------+
                                    |    Object     |
                                    +---------------+
                                      ^           ^
                                      |           |
                                      |           |
                                      |           |
                       +---------------+         +---------------+
                       |    Spoon      |         |     Fork      |
                       +---------------+         +---------------+
                               ^                  ^
                               |                  |
                               |                  |
                               |                  |
                       +---------------+          |
                       |  SilverSpoon  |          |
                       +---------------+          |
                                      ^           |
                                      |           |
                                      |           |
                                      |           |
                                   +---------------+
                                   |  SilverSpork  |
                                   +---------------+ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T17:22:38.833

由于您使用多重继承，您实际上继承了两个不同的抽象方法，并且您必须在您的孩子中`use`覆盖*它们。*

您需要问自己的第一个问题是为什么 a`SilverSpork`具有与 a 相同的`use`行为`SilverSpoon`。如果确实如此，我不敢相信我会建议这样做，但是您可以通过使用带有新虚拟基础的菱形继承来解决此问题：

```
class Utinsil
{
    public:
        virtual void use() = 0;
};

class Fork : public virtual Utinsil {
};

class Spoon : public virtual Utinsil {
};

class SilverSpoon : public Spoon {
    public:
        virtual void use() { }
};

class SilverSpork : public SilverSpoon, public Fork {
};

int main()
{
    SilverSpork silver_spork;
} 
```

# java - 如何检查表单是否可见（WebDriver）？

> ID：16109971
> 
> 赞同：0
> 
> 时间：2013-04-19T17:07:38.930
> 
> 标签：java, selenium, webdriver

我有两种形式：

```
<form action="" method="post" name="form1" id="form1" target="_self">
///
</form>

<style>
form#form2 {
    display: none;
}
</style>
<form action="" method="get" name="form2" id="form2" target="_blank">
////
</form> 
```

我有以下代码：

```
WebDriver driver = new HtmlUnitDriver();
List<WebElement> forms = driver.findElements(By.cssSelector("form"));
for (WebElement form : forms) { 
   if (!form.isDisplayed()) break;
   System.out.print(form.ToString() + "\n");
} 
```

在控制台中，我看到：

```
<form action="" method="post" name="form1" id="form1" target="_self">
<form action="" method="get" name="form2" id="form2" target="_blank"> 
```

如何检查表单是否不可见？

**问题的解决方案。**

```
WebDriver driver = new HtmlUnitDriver(**true**); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:44:38.347

您是否有从开发人员工具中获得的真实呈现的 html，如果有，请您粘贴一下吗？

试试这个，代码没有测试，想法是如果 selenium 认为所有表单都显示了，那么我们应该尝试获取表单的 css 值或 style 属性的值，看看它们是如何实际呈现的。（我怀疑你所做的硒部分是正确的，但 html 样式是错误的。）

```
// following your logic
WebDriver driver = new HtmlUnitDriver();
List<WebElement> forms = driver.findElements(By.cssSelector("form"));
for (WebElement form : forms) { 
   if (form.getCssValue("display") == "none") break;
   // or if (form.getAttribute("style").contains("display: none")) break;
   System.out.print(form.ToString() + "\n");
}

// a version showing more info
WebDriver driver = new HtmlUnitDriver();
List<WebElement> forms = driver.findElements(By.cssSelector("form"));
for (WebElement form : forms) {
   System.out.print(form.ToString() + "\n");
   System.out.print(form.isDisplayed() + "\n"); // how selenium determines
   System.out.print(form.getCssValue("display") + "\n"); // get css display value
   System.out.print(form.getAttribute("style") + "\n"); // get all style values if exists
   System.out.print("==================\n");
} 
```

# javascript - Javascript继承——创建相同类型的实例

> ID：16109973
> 
> 赞同：0
> 
> 时间：2013-04-19T17:07:46.413
> 
> 标签：javascript, oop

说我有一个类`BaseClass`和两个类`ClassA`，`ClassB`它们继承自`BaseClass`via

```
ClassA.prototype = Object.create( BaseClass.prototype ); 
```

我想编写一个方法，如果从 的实例调用`ClassA`，则返回 的新实例，`ClassA`如果从 的实例调用`ClassB`，则返回 的新实例`ClassB`——我想知道最好的方法是什么。目前，在摆弄之后，我想出了以下解决方案，它似乎工作得很好：

```
// this is added additionally to the above mentioned inheritance setup
ClassA.prototype.constructor = ClassA;
ClassB.prototype.constructor = ClassB;

BaseClass.prototype.newInstance = function () {
    var constructor = this.constructor,
        ClassFactory = constructor.bind.apply( constructor, [constructor].concat( [].slice.call( arguments ) ) );

    return new ClassFactory();
}; 
```

明显的缺点就是覆盖了原型的构造函数，感觉不对，因为原型的构造函数其实*是* `BaseClass`.

另一种应该起作用的方法是覆盖的方法：

```
BaseClass.prototype.newInstance = function () {
    throw new Error( 'Cannot call abstract method.' );
};

/** @override */
ClassA.prototype.newInstance = function () {
    var ClassFactory = ClassA.bind.apply( ClassA, [ClassA].concat( [].slice.call( arguments ) ) );

    return new ClassFactory();
};

// ... do the same for ClassB 
```

现在我的问题是询问哪种策略更好，为什么，每种策略的优缺点是什么，即使有更好的方法？

*编辑*：为了澄清目标是什么，我想最终做这样的事情：

```
BaseClass.prototype.someMethod = function () {
    var instance = this.getInstance();
    instance.someMethod();

    return instance;
}; 
```

现在，由于`ClassA`并将`ClassB`继承此方法，我希望它返回调用它的同一类的新实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:26:11.180

> ```
> ClassA.prototype.constructor = ClassA;
> ClassB.prototype.constructor = ClassB; 
> ```
> 
> 明显的缺点就是覆盖了原型的构造函数，感觉不对，因为原型的构造函数其实就是BaseClass。

不，原型对象不是由`BaseClass`. 你只是`Object.create`d 他们，甚至`BaseClass.prototype`被创建为一个 plain `Object`。

将对象上的属性设置为`constructor`[back] 构造从该对象继承的实例的函数正是该属性的用途，在这种情况下是正确的。我看不出这个非常简单、实用、高效和预期的解决方案会有什么问题……</p>

特别是如果该`getInstance`工厂做的事情不仅仅是实例化，并且所有子类都一样，那么“覆盖解决方案”就会失去 DRYness。

但是，也许您根本不需要那种额外的方法，而应该在`new this.constructor(args…)`任何地方使用。

> ```
> var ClassFactory = constructor.bind.apply( constructor, [constructor].concat( [].slice.call( arguments ) ) );
> return new ClassFactory(); 
> ```

看起来有点复杂，尤其是我不确定这是否适用于所有`bind`垫片。看看[javascript 中的动态对象构造？](https://stackoverflow.com/q/3871731/1048572)或[将 .apply() 与“new”运算符一起使用。这可能吗？](https://stackoverflow.com/q/1606797/1048572).

# php - wkhtmltopdf - 将 AJAX 创建的 SVG 转换为 PDF

> ID：16109975
> 
> 赞同：3
> 
> 时间：2013-04-19T17:07:51.540
> 
> 标签：php, svg, d3.js, wkhtmltopdf, html-to-pdf

我正在开发一个将使用 d3.js 生成的 HTML 和 SVG 图表转换为 PDF 的应用程序。图表在页面加载后通过 AJAX 调用呈现。

我正在使用 wkhtmltopdf 0.9.6，它似乎在将静态 HTML5 转换为 PDF 方面做得很好，但我在转换 SVG 图表时遇到了问题。

渲染简单的多系列折线图时，大部分图表区域没有渲染。即使在禁用动画之后。`--redirect-delay`即使设置为 8000，使用也无济于事。

有趣的是，图表的大部分部分都被渲染了，比如图例和轴。只是没有内容。

其他人遇到过这个或类似的问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-24T16:31:29.857

如果您在 shell 中使用 wkhtmltopdf，作为在源代码中设置计时器的替代方法，您可以添加此选项：

```
--javascript-delay 30000 
```

例如，一个完整的命令可能如下所示：

```
wkhtmltopdf --enable-javascript --debug-javascript --javascript-delay 30000 --images http://www.google.com google.pdf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T20:04:07.433

添加此脚本的最后一页：

```
function sleep(milliSeconds) {
    var startTime = new Date().getTime(); // get the current time
    while (new Date().getTime() < startTime + milliSeconds); // hog cpu
}

sleep(5000); 
```

并且： --redirect-delay -> 5000

使用库 d3.js 不压缩其他 js。

# vba - 访问 VBA - 在大范围内更改 Excel 单元格值的更快方法？

> ID：16109981
> 
> 赞同：5
> 
> 时间：2013-04-19T17:08:28.123
> 
> 标签：vba, ms-access, excel

我在 Access 中有一些 VBA 代码，它从 Excel 工作表中获取一系列单元格，然后将它们从数字转换为日期。例如，一个范围是 H1:Y25000

```
Public Sub FixDates(theRange as Range)

Dim RangeCell as Range

For Each RangeCell In theRange
    If IsNumeric(RangeCell.Value) And RangeCell.Value > 0 And Not IsEmpty(RangeCell.Value) Then
        lngDate = CLng(RangeCell.Value)
        RangeCell.Value = DateAdd("d", lngDate -1, "1/1/1968")
    End If
Next RangeCell

End Sub 
```

代码似乎可以工作，但运行需要很长时间。可以用不同的方式编写以更快地运行吗？我正在阅读有关使用 Variant 而不是 Range 的信息，但我无法弄清楚。

哦，要调用 Sub，我使用类似的东西：

```
path = "C:\myfile.xlsx"
Set xlApp = CreateObject("Excel.Application")
Set xlWbk = xlApp.Workbooks.Open(path)
Set xlWks = xlWbk.Worksheets(1)
lastRow = xlWks.Range("A1").End(xlDown).Row
FixDates (xlWks.Range("H1:Y" & lastRow)) 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T17:14:53.653

您可以简单地将范围分配给一个变体，这将创建一个数组 - 它看起来像下面的代码 - 您应该添加适当的错误处理：

```
Public Sub FixDates(theRange as Range)

    Dim data as Variant
    Dim i as Long
    Dim j as Long
    Dim lngDate as Long

    data = theRange

    For i = LBound(data, 1) to UBound(data, 1)
        For j = LBound(data, 2) to UBound(data, 2)
            If IsNumeric(data(i, j)) Then
                If data(i, j) > 0 Then
                    lngDate = CLng(data(i, j))
                    data(i, j) = DateAdd("d", lngDate - 1, "1/1/1968")
                End If
            End If
        Next j
    Next i

    theRange = data

End Sub 
```

# javascript - 获取对象内部某些东西的父值

> ID：16109983
> 
> 赞同：2
> 
> 时间：2013-04-19T17:08:38.687
> 
> 标签：javascript, inheritance

这个例子的灵感来自 Alex Sexton 的博文[Understanding JavaScript Inheritance](http://alexsexton.com/blog/2013/04/understanding-javascript-inheritance/)：

```
var defaults = {};
defaults.x = 1;

var myObject = Object.create(defaults);
console.log(myObject); // {x:1}
myObject.x = 2;
console.log(myObject); // {x:2, x:1}
console.log(myObject.x); // 2 
```

问：有什么方法可以从 myObject 中恢复值 1？我在想类似的东西：

```
console.log(myObject.parent.x); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:12:23.340

这适用于 Chrome 和 Firefox。

```
>>> myObject.__proto__.x
1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:31:23.003

您可以从 myObject 引用默认值

```
myObject.parent = defaults;
console.log(myObject.parent.x);// 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T19:05:46.057

所有主要浏览器的最新版本都支持`Object.getPrototypeOf()`，需要一些额外的代码来兼容 IE8 和更早版本（[检查这个](http://ejohn.org/blog/objectgetprototypeof/)）。如果这对您来说不是问题，您可以执行以下操作：

```
Object.getPrototypeOf(myObject).x 
```

检查[jsfiddle](http://jsfiddle.net/excentris/eebPT/)。

# haskell - 如何在 Haskell 中继承 Eq 类？

> ID：16109984
> 
> 赞同：3
> 
> 时间：2013-04-19T17:08:45.120
> 
> 标签：haskell

我想定义继承 Eq 类的新类 PersonOP。我的意思是我有一个数据类型

```
data Person a = {name:a,age:Int} 
```

我想创建一个类

```
 class (Eq a)=> PersonOp a where 
```

然后像这样制作实例

```
 instance PersonOp (Person a) where

         (Person a)==(Person a) = equality (Person a) (Person a) 
```

当我在课堂上实现类似的东西时

```
 (==)::a->a->Bool 
     x==y = not (x/=y) 
```

我有错误我该如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T17:17:20.757

为您的 person 类推导相等性是最简单的：

```
data Person a = Person {name::a, age::Int}
   deriving Eq 
```

这样你就可以做到

```
*Main> Person "James" 53 == Person "Fred" 23
False
*Main> Person "James" 53 == Person "James" 53
True 
```

这会自动创建一个基于for的`==`函数。`Person a``==``a`

## 为什么

在 haskell 中，`==`是`Eq`类的成员。您只能`==`通过创建`Eq`类的实例来定义，如果您尝试以其他方式定义它，则会出错。

使其成为类的一部分使您可以轻松地定义适合您的数据类型的相等性。

## 手动定义实例

您可以自己定义而不是派生`Eq`，例如：

```
data Person a = Person {name::a, age::Int}

instance Eq a => Eq (Person a) where
   someone == another = name someone == name another
                      && age someone == age another 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-20T11:08:32.473

我找到了答案

```
import Prelude hiding ((==))

data Person a = {name:a,age:Int}
class PersonOp a where
    (==)::a->a->Bool

instance PersonOp (Person a) where
    (Person a)==(Person a) = equality (Person a) (Person a) 
```

# c# - 通用参数实现的 XML 文档？

> ID：16109985
> 
> 赞同：1
> 
> 时间：2013-04-19T17:08:52.357
> 
> 标签：c#, xml-documentation

给定一个泛型接口，我如何记录泛型类型的实现？

```
public interface ICommand<in T, in T2>
{
  void Execute(T arg1, T2 arg2);
}

public class MyCommand : ICommand<string, string>
{
} 
```

记录 T:"string" 和 T1:"string" 含义的正确方法是什么？

编辑

我忘记将 ICommand 接口添加到 MyComand 类定义中。该类没有重复，另一个问题询问泛型参数 T 的文档，我询问泛型参数 T 的实现文档。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T17:54:34.840

```
public class MyCommand<string, string> 
```

它不会编译。

您只能在类型参数声明中提供标识符（T、T1、TKey 等...）。但是，您可以通过以下方式为类型参数提供 XML 注释。

```
/// <summary>
/// Description
/// </summary>
/// <typeparam name="T">The type of xxxx</typeparam>
/// <typeparam name="T2">The type of xxxx</typeparam>
public interface ICommand<in T, in T2>
{
  void Execute(T arg1, T2 arg2);
} 
```

# entity-framework-4 - 在没有 edmx 编辑器的实体框架中映射 CRUD 存储过程

> ID：16109988
> 
> 赞同：0
> 
> 时间：2013-04-19T17:09:01.533
> 
> 标签：entity-framework-4

是否可以在不使用愚蠢的 edmx 编辑器的情况下映射 CRUD SP。

10倍

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:32:49.387

幸运的我。

有一个支持该功能的 EF6 的 alpha 版本。我会尝试，如果它不起作用会回到这里。如果没有，您将知道它正在工作:)

[http://entityframework.codeplex.com/wikipage?title=Code%20First%20Insert%2fUpdate%2fDelete%20Stored%20Procedure%20Mapping](http://entityframework.codeplex.com/wikipage?title=Code%20First%20Insert%2fUpdate%2fDelete%20Stored%20Procedure%20Mapping)

# python - 使用 re.finditer 按索引循环匹配

> ID：16109990
> 
> 赞同：2
> 
> 时间：2013-04-19T17:09:04.657
> 
> 标签：python, regex

我想知道如何通过索引来导航 finditer 正则表达式操作产生的对象。

我的字符串是`s = "fish oil X22 stack peanut C4"`

这是我的代码：

```
import re
words = re.finditer('\S+', s)
has_digits = re.compile(r'\d').search
for word in words:
    if has_digits(word.group()):
        print (the word that is two words back) 
```

期望的输出 =

```
fish
stack 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T17:15:48.700

您可以使用 a`deque`来保存元素。然后这变得很容易：

```
import re
from collections import deque
s = 'fish oil X22 stack peanut C4'
words = re.finditer('\S+', s)
has_digits = re.compile(r'\d').search
deq = deque([],2)
for word in words:
    wordtxt = word.group()
    if has_digits(wordtxt):
        print (deq[0])
    deq.append(wordtxt) 
```

有点不清楚字符串应该发生什么：

```
s = 'fish oil X22 stack C4' 
```

它应该打印“fish”和“oil”还是“fish”和“X22”。另外，如果第一个子字符串是“X22”怎么办？在我的回答中，这会导致`IndexError`，但很难知道你想用它做什么......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:30:24.427

您可以使用[`itertools.tee`](http://docs.python.org/2/library/itertools.html#itertools.tee)和[`itertools.izip`](http://docs.python.org/2/library/itertools.html#itertools.izip)：

```
import re
import itertools as it

s = "fish oil X22 stack peanut C4"
words = re.finditer('\S+', s)
has_digits = re.compile(r'\d').search
words, words_copy = it.tee(words)
next(words); next(words)       #Skip the first two words of one iterator
for word, back_word in it.izip(words, words_copy):
    if has_digits(word.group()):
            print(back_word.group()) 
```

# dart - 如何从 Dart 中的 Type 实例中获取限定名称？

> ID：16109993
> 
> 赞同：9
> 
> 时间：2013-04-19T17:09:09.280
> 
> 标签：dart, dart-mirrors

我有一个 的实例`Type`，但我想要它的完全限定名称。我怎样才能做到这一点？我知道我必须使用 Mirrors（Dart 的反射库）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T17:09:09.280

使用 中的新`reflectClass`顶级函数`dart:mirrors`。

这是一个例子：

```
import 'dart:html';
import 'dart:mirrors';

class Awesome {
  // ...
}

void main() {
  var awesome = new Awesome();
  Type type = awesome.runtimeType;
  ClassMirror mirror = reflectClass(type);
  Symbol symbol = mirror.qualifiedName;
  String qualifiedName = MirrorSystem.getName(symbol);

  query('#name').text = qualifiedName;
} 
```

`qualifiedName`应该是这样的：

```
http://127.0.0.1:3030/Users/sethladd/dart/type_name/web/type_name.dart.Awesome 
```

请注意，这适用于内部版本 21753 或更高版本。*此外，这目前*还不能在 dart2js 中使用。我们计划在 dart2js 中支持它。

# doctrine-orm - 从 OneToMany 上的 ArrayCollection 中删除元素不会在 persist() 上删除它吗？

> ID：16109995
> 
> 赞同：12
> 
> 时间：2013-04-19T17:09:09.053
> 
> 标签：doctrine-orm

在 Zend Framework 2 项目中，我们有两个 Doctrine 2 实体，我们想从已经保存在数据库中的集合中删除一个元素......

***所以我们有一个名为 FormGroupConstraint 的第一个实体：***

```
/**
 * FormGroupConstraint
 *
 * @ORM\Table(name="form_group_constraint")
 * @ORM\Entity(repositoryClass="Application\Dao\FormGroupConstraintDao")
 */
class FormGroupConstraint {

    /**
     * @var integer 
     * 
     * @ORM\Column(name="id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
     protected $id;

    /**
     * @param \Doctrine\Common\Collections\ArrayCollection
     * @ORM\OneToMany(targetEntity="Application\Entity\FormQuestionConstraint", mappedBy="groupConstraint", fetch="EAGER", cascade={"persist", "merge", "refresh", "remove"})
     */
     protected $constraints;

     public function __construct() 
          $this->constraints = new \Doctrine\Common\Collections\ArrayCollection();
     }

     /**
     * @param \Doctrine\Common\Collections\ArrayCollection $constraints
     */
     public function addConstraints($constraints) {
        foreach ($constraints as $constraint) {
            $this->constraints->add($constraint);
        }
        return $this->constraints;
    }
    /**
     * @param \Doctrine\Common\Collections\ArrayCollection $constraints
     */
     public function removeConstraints($constraintsToRemove) {
            foreach ($constraintsToRemove as $key => $constraintToRemove) {
                $this->constraints->removeElement($constraintToRemove);
            }
            return $this->constraints;
     }
} 
```

***以及名为 FormQuestionConstraint 的子实体：***

```
/**
 * FormQuestionConstraint
 *
 * @ORM\Table(name="form_question_constraint")
 * @ORM\Entity(repositoryClass="Application\Dao\FormQuestionConstraintDao")
 */
class FormQuestionConstraint
{
    /**
    * @var integer
    *
    * @ORM\Column(name="id", type="integer", nullable=false)
    * @ORM\Id
    * @ORM\GeneratedValue(strategy="IDENTITY")
    */
    protected $id;

    /**
    * @var \Application\Entity\FormGroupConstraint
    *
    * @ORM\ManyToOne(targetEntity="Application\Entity\FormGroupConstraint", cascade=   {"persist", "merge", "refresh", "remove"})
    * @ORM\JoinColumns({
    *   @ORM\JoinColumn(name="form_group_constraint_id", referencedColumnName="id")
    * })
    */
    protected $groupConstraint;
} 
```

因此，如果我们尝试创建、持久化、刷新 FormGroupConstraint 实体，没问题，但是当我们想要删除 $constraints ArrayCollection 的元素时，什么也没有发生……

我们正在使用在 dev-master 中安装了 composer.phar 的 zend 2 的教义-orm-module ...

***这是我们正在尝试做的一个例子：***

```
$constraint = $this->findConstraintByGroup(1);

$formGroupConstraint = $this->_em->findOneById(1);

$formGroupConstraint->getConstraints()->removeElement($constraint);
$this->_em->persist($formGroupConstraint);
$this->_em->flush(); 
```

没有错误，但没有删除或删除......如果我们在persist（）之前var_dump（）getConstraints（），实际上元素仍在ArrayCollection中......

谁能解释我们如何做到这一点或为什么不删除该元素？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-12-21T17:20:00.967

也许有点晚了，但尝试添加`orphanRemoval=true`到关系的反面（OneToMany）

```
@ORM\OneToMany(
    targetEntity="Application\Entity\FormQuestionConstraint",
    mappedBy="groupConstraint",
    cascade={"persist", "remove"},
    orphanRemoval=true
) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-29T07:18:10.123

您可以在关系`orphanRemoval=true`的`OneToMany`一侧添加，例如：

```
@ORM\OneToMany(
    targetEntity="Application\Entity\FormQuestionConstraint",
    mappedBy="groupConstraint",
    cascade={"all"},
    orphanRemoval=true
) 
```

出现这种行为的原因是实体从 ArrayCollection 中移除，但集合的内容仅由指向父实体的子实体的外键决定。

当学说下一次查找父实体的子实体时，它仍然存在并且将再次显示在下一个请求中，当再次从数据库中获取 ArrayCollection 时。

如果`orphanRemoval`设置为`true`，则此类子实体将被删除`persist()`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T17:18:18.920

因为引用被保留，`FormQuestionConstraint`你需要做：

```
$this->_em->remove($constraint);
$this->_em->flush(); 
```

# javascript - 重写并添加到我的命名空间一个 javascript 库

> ID：16109996
> 
> 赞同：1
> 
> 时间：2013-04-19T17:09:11.733
> 
> 标签：javascript, javascript-namespaces

我打开了一个名为 Jibberish ( [https://github.com/mdp/gibberish-aes](https://github.com/mdp/gibberish-aes) ) 的 javascript 项目，我试图了解它的编码风格，我只给出了它的开始和结束的一部分：

```
(function (root, factory) {
    if (typeof exports === 'object') {
        // Node. 
        module.exports = factory();
    } else if (typeof define === 'function' && define.amd) {
        // AMD. Register as an anonymous module.
        define(factory);
    } else {
        // Browser globals (root is window)
        root.GibberishAES = factory();
    }
}(this, function () {
    'use strict';
    var Nr = 14,
    /* Default to 256 Bit Encryption */
    Nk = 8,
    Decrypt = false,
    enc_utf8 = function(s)
    {
        try {
            return unescape(encodeURIComponent(s));
        }
        catch(e) {
            throw 'Error on UTF-8 encode';
        }
    },
    //...................................
    return {
        "size": size,
        "h2a":h2a,
        "expandKey":expandKey,
        "encryptBlock":encryptBlock,
        "decryptBlock":decryptBlock,
        "Decrypt":Decrypt,
        "s2a":s2a,
        "rawEncrypt":rawEncrypt,
        "rawDecrypt":rawDecrypt,
        "dec":dec,
        "openSSLKey":openSSLKey,
        "a2h":a2h,
        "enc":enc,
        "Hash":{"MD5":MD5},
        "Base64":Base64
    };
})); 
```

只是想知道它的用法：

```
// GibberishAES.enc(string, password)
// Defaults to 256 bit encryption
enc = GibberishAES.enc("This sentence is super secret", "ultra-strong-password");
alert(enc);
GibberishAES.dec(enc, "ultra-strong-password"); 
```

我可以看到**一个最外面的自执行函数在代码末尾返回一个**实际上是匿名（！）的对象，并且该对象的成员是自执行函数内部定义的函数，因此，属性`"size"`指的是`function size()`定义为函数表达式：

```
size = function(newsize){...} 
```

我什至可以通过调用所有返回的函数 as`public`和其余的 as来回忆有关这种方法的私有和公共函数的所有讨论，`private`但有些事情让我很困惑：

1.  为什么外部匿名函数有参数，它们将在哪里使用？

2.  而不是使用`(function(){//put my code here...}());`作者`(function(root, factory){//some code...}(this, function(){//main code here...}));`，这是为什么呢？

3.  在问题 (2) 上，我可以看到两个参数`this`并`function(){//main code here...}`作为参数传递给外部匿名函数来代替`root`and `factory`。所以，`root`变成了`this`！但是，现在`this`指的是哪里？

4.  也许我们可以更好地重写这一切？我刚刚阅读[了如何在 JavaScript 中声明命名空间？](https://stackoverflow.com/questions/881515/javascript-namespace-declaration)我发现 Jaco Pretorius 的回答非常棒，我可以重写这个并将其添加到**我的命名空间**中，如下所示：

    （函数（myGibberishAES）{

    //这里的主要代码...

    }(window.myGibberishAES = window.myGibberishAES || {}));

可以接受的编码标准吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:21:33.363

这种格式称为 UMD（通用模块定义），它是一种编写代码的方式，可以使用和不使用 AMD（异步模块定义），以及使用和不使用 Node.js。

在第一个匿名函数中，代码正在检查我们所处的环境。

1.  如果`exports`定义了一个函数，那么我们可能正在使用 node.js
2.  如果有一个名为 的函数`define`，并且它有一个名为 的属性`amd`，那么这意味着我们正在使用 AMD。
3.  如果上述情况都不成立，我们没有使用任何东西，所以我们应该将它附加到根对象，在这种特殊情况下将是`window`.

这个函数的参数是`this`（将是`window`）和一个基本上是工厂的函数，即，它是实际定义对象的代码。通常（没有 UMD），它看起来像这样：

```
var myModule = (function() {
    ...
}(); 
```

所以现在`factory`基本上是这个函数，它返回你的模块/对象。`module.exports`如果您使用的是 node.js，则可以将该对象分配给该对象，或者如果您使用的`define`是 AMD，则可以将其传递给函数，否则您可以简单地将其附加到根对象 ( `window`)。

至于您的重写问题，您可能不想这样做，因为常规的 JavaScript 命名空间声明模式不适用于 node.js 和 AMD。与 requireJS 一起使用的 AMD 允许您指定和管理依赖项，因此如果有人使用 requireJS，这允许他们非常轻松地导入此模块。这基本上是满足三种不同用例和框架的一种方式。

如果你没有使用 node.js 或 requireJS，你不需要重写任何东西，因为`GibberishAES`它将是一个附加到的全局对象，`window`所以你可以直接使用它。

有关更多信息，请查看GitHub 上的[UMD](https://github.com/umdjs/umd)，它有一堆模式（您正在查看的是 的组合`nideAdapter.js`和更简单的变体`amdWeb.js`），还可以查看[requireJS 上的 AMD](http://requirejs.org/docs/whyamd.htmlhttp://requirejs.org/docs/whyamd.html)。