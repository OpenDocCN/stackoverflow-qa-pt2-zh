# StackOverflow 问答 13798000-13798999

# python - Django 消息属性错误

> ID：13798000
> 
> 赞同：0
> 
> 时间：2012-12-10T09:19:33.437
> 
> 标签：python, django

我正在使用[arneb/django 消息](http://files.arnebrodowski.de/software/django-messages/Documentation/)来处理我的 django 站点上的消息。每当我向用户发送消息时，它都会显示以下错误，并且消息仍会以静默方式传递。

```
 Traceback (most recent call last):

 File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 111, in get_response
response = callback(request, *callback_args, **callback_kwargs)

 File "/usr/local/lib/python2.7/dist-packages/django/contrib/auth/decorators.py", line 20, in _wrapped_view
return view_func(request, *args, **kwargs)

 File "/usr/local/lib/python2.7/dist-packages/django_messages/views.py", line 77, in compose
request.user.message_set.create(

File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 185, in inner
return func(self._wrapped, *args)

    AttributeError: 'User' object has no attribute 'message_set' 
```

我一直在尝试解决这个问题，但没有成功。我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:29:54.527

快速浏览一下文档（“您至少需要 django 1.0”）表明这是一个相当古老的包。消息框架在很久以前就被删除了。

我建议四处寻找其他可以使用的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:08:21.110

此错误已在 GitHub 存储库中修复。只有 PyPi 上的旧版本与 Django 1.4 不兼容。

[https://github.com/arneb/django-messages](https://github.com/arneb/django-messages)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:35:42.920

看起来你已经升级到 Django 1.4，它与你使用的 django 消息版本不兼容。请参阅这篇文章以获得解释：[刚刚升级到 Django 1.4 并收到错误消息](https://stackoverflow.com/questions/13283253/just-upgraded-to-django-1-4-and-getting-error-with-messages/13284882#13284882)

# iphone - 测试版本更新是否正常

> ID：13798001
> 
> 赞同：18
> 
> 时间：2012-12-10T09:19:37.147
> 
> 标签：iphone, ios, ios5, ios6

几天前，我在从 iOS 4.0 到 6.0 的版本更新方面遇到了一些问题。安装新版本时，整个数据库都被清理了。

有什么方法可以在提交给苹果之前测试版本更新吗？

我通过测试版本更新

1.  曲棍球
2.  通过 iPhone 配置实用程序安装的 AdHoc 构建。

有没有其他方法可以测试这些东西，所以我可以确定更新不会有任何问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T08:13:55.760

您可以通过[TestFlight](https://www.testflightapp.com/)服务对其进行测试。这是一个很棒的工具，我经常用它来测试我的更新。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-17T19:45:16.957

在新手机（或没有您的应用程序的手机）上，从 App Store 下载应用程序的当前版本。设置所有必要的数据，在数据库中创建值等。然后通过 adhoc release 或[TestFlight](https://www.testflightapp.com/)在手机中更新您的应用程序。关键是首先拥有您的应用程序的最新公共版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-19T02:05:41.847

试试[Crashlytics](http://try.crashlytics.com/)。它提供即时和详细的崩溃报告，就在发生问题的 # 行。

它的大小可以忽略不计（几百 KB），但它甚至适用于发行版！这意味着即使您错过了一些错误，您也会在崩溃发生时立即收到通知，而不必等待发布无用的 Apple 崩溃报告。

希望对您有所帮助。

# objective-c - 将大小设置为自定义 iOS 字体不起作用

> ID：13798002
> 
> 赞同：3
> 
> 时间：2012-12-10T09:19:38.663
> 
> 标签：objective-c, ios, font-size

我在我的 iphone 应用程序中使用了一些自定义字体。它们显示正确，但我无法更改它们的大小。

以下是为 UILabel 设置此字体的方法：

```
myLabel.font=[UIFont fontWithName:@"Cabin-Regular" size:18]; 
```

这个标签是 uitableview 单元格的一部分，如果它可以发挥任何作用的话。

IB中的标签设置：

![在此处输入图像描述](../Images/6f28c79069233a7783cb5fca7124b592.png)

我只更改此标签的代码中的颜色、文本和字体。

有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:24:50.837

你确定字体加载正确吗？

你可以试试：

```
for (NSString *familyName in [UIFont familyNames]) {
    NSLog(@"%@", familyName);
    for (NSString *fontName in [UIFont fontNamesForFamilyName:familyName]) {
        NSLog(@"\t%@",fontName);
    }
} 
```

这将显示所有已加载的字体。确保相同的名称“Cabin-Regular”显示完全相同。很多时候字体本身没有加载，然后字体大小根本不会被使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T11:34:38.163

`Xcode`如果您手动添加，则需要在 中添加字体。

1.  在项目文件中添加字体
2.  转到您的`Project name-Info.plist`文件，右键单击并单击`Add Row`。
3.  在您的新行类型`Fonts provided by application`中。如果你扩展它，你可以添加新项目，在那里为`item 0`. 该值应该是您的`font`文件名。如下图

![在此处输入图像描述](../Images/a9b21943cea908401aef342b04d4613d.png)

4\. 双击您的字体，它将在外部编辑器中打开，如下图所示

![在此处输入图像描述](../Images/deae4ecabd10c811bd1a9eca3a2dbfaa.png)

5\. 将该名称输入您的`fontWithName:`方法中。如果您正在为您的`tableviewcell`. 代码将是
`cell.nameLbl.font = [UIFont fontWithName:@"Cabin" size:18.0];`

这对我来说可以。我希望它有帮助:)

# visual-studio - How to open visual studio solution in Mono develop

> ID：13798003
> 
> 赞同：2
> 
> 时间：2012-12-10T09:19:39.147
> 
> 标签：visual-studio, monodevelop

How can I open a Visual Studio 2012 solution in Mono Develop? Visual Studio hangs when I debugging.

When I tring to open the solution in Mono Develop it just open at text file with a lot of numbers.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:08:23.280

我记得在 3.0.6 中修复了这个问题，目前在 Alpha 中。

[这个stackoverflow问题](https://stackoverflow.com/questions/11049049/when-using-the-latest-monodevelop-and-vs-2012-rc-to-share-code-i-get-problems)有一个解决方法

# php - php webservice framework

> ID：13798007
> 
> 赞同：-5
> 
> 时间：2012-12-10T09:19:59.100
> 
> 标签：php

I need to write a php based web service. I believe I have to write all the necessary code by myself. I do not want to reinvent the wheel if there is already some framework to write a php based web service ?

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:25:39.907

有两种方法：

*   一、使用PHP5的soap方法[http://fr2.php.net/manual/en//book.soap.php](http://fr2.php.net/manual/en//book.soap.php)
*   其次，使用像 nuSOAP 这样的库，它允许您自动生成 wsdl。这个库像一些不方便的那样无法使用对象来管理服务。[http://sourceforge.net/projects/nusoap/](http://sourceforge.net/projects/nusoap/)

# c# - How to change the Time of the datepicker?

> ID：13798011
> 
> 赞同：1
> 
> 时间：2012-12-10T09:20:03.793
> 
> 标签：c#, wpf, datepicker

Currently i developing a WPF application. My application allow user to select any date from the datepicker and data from the selected date will show up. However, user is not allow to select any specific time from the datepicker. The output from the datepicker will be something like `02-dec-2012 12:00:00 AM`. The time from the datepicker will always be 12:00am. So, how can i allow user to alter the time? I found some resource from [DateTimePicker](http://wpftoolkit.codeplex.com/wikipage?title=DateTimePicker&referringTitle=Home), but i looking for another solution. Any advice? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:23:06.527

WPF DatePicker 不支持时间选择或显示。它只支持日期选择。

一个简单的解决方法是使用多个 TextBox 控件并将它们的 Text 属性绑定到 DateTime 数据源，以允许用户查看和更改时间。

有关 DataBinding 的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/ms752347.aspx](http://msdn.microsoft.com/en-us/library/ms752347.aspx)。

如果要在 DatePicker 中添加时间选择功能，则需要引入自定义控件。

有关自定义控件的更多信息，请参阅[http://msdn.microsoft.com/en-us/library/ms745025.aspx](http://msdn.microsoft.com/en-us/library/ms745025.aspx)。

[资源](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/44c2d5b9-3b8a-4b3d-8e74-8c9a5612442d/)

您还可以查看以下示例以了解如何执行此操作：[示例项目](http://www.codeproject.com/Articles/126762/A-couple-of-tricks-when-using-the-standard-WPF-NET)

# javascript - 谷歌地图自动完成：如何知道何时选择了建议？

> ID：13798015
> 
> 赞同：-2
> 
> 时间：2012-12-10T09:20:48.660
> 
> 标签：javascript, jquery, google-maps-api-3, google-places-api

我正在使用[https://developers.google.com/maps/documentation/javascript/places#places_autocomplete](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)。有没有办法知道用户何时选择了建议列表中的项目？触发了什么事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:45:34.207

不会触发“place_changed”事件吗？

我基于[文档](https://developers.google.com/maps/documentation/javascript/places)“**[获取地点信息](https://developers.google.com/maps/documentation/javascript/places#getting_place_information)****”**部分**。**

[例子](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)的源代码可以看到有一个

```
google.maps.event.addListener(autocomplete, 'place_changed', function() {
    ...
}); 
```

# algorithm - 此功能是否具有抗原像性？

> ID：13798016
> 
> 赞同：1
> 
> 时间：2012-12-10T09:20:54.673
> 
> 标签：algorithm, prng, hash-function

测试 PRNG 函数强度的方法之一是设计将 PRNG 输出与随机字符串区分开来的测试：给定一个框，它为某些 u 或随机字符串输出 PRNG(u)。我们必须确定输出是否来自 PRNG。假设散列函数 H 未通过此测试。

这是否意味着它不具有第二原像抗性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:29:26.807

假设一个 256 位加密散列函数`h`具有预期的所有属性。

构造函数，对于任何输入 string `s`，返回前 255 位，`h(s)`后跟 bit `0`。

给定足够的输入，这个函数很容易与随机数区别开来：它只返回偶数。但是为它计算任何类型的碰撞或原像仍然很棘手：它是 255 位强的。

抵抗碰撞或原像不是一个全有或全无的问题。有渐变。

# android - sending sms intent with multiple types of extras

> ID：13798018
> 
> 赞同：1
> 
> 时间：2012-12-10T09:20:59.770
> 
> 标签：android, android-intent, sms, motorola-droid

So I have an app that has a button where when you click it the sms app opens and a body populates which you can then send to whoever. I am using:

```
Intent shareIntent = new Intent(Intent.ACTION_VIEW);
shareIntent.putExtra("sms_body", getResources().getString(R.string.sharingSMS));
shareIntent.setType("vnd.android-dir/mms-sms");
startActivity(shareIntent); 
```

This works on almost all phones I have tried it on but on the Motorola Razr (Which annoys me since I have had many problems with their code being different) the sms body is blank. Now, when I use:

```
shareIntent.putExtra(Intent.EXTRA_TEXT, getResources().getString(R.string.sharingSMS)); 
```

instead of sms_body it works fine but doesn't work with any other phones. After searching around for issues on this I found that since sms_body is not part of the android OS specifically it doesn't have to work with all phones. When I search around for how to send an sms also everything says to do it the first way I do it with sms_body. Another thing I tried was to add both extras, then it worked on all the phones I tested it on but other people have gotten a crash with the following: android.content.ActivityNotFoundException: `No Activity found to handle Intent { act=android.intent.action.VIEW typ=vnd.android-dir/mms-sms (has extras) }`

By searching for things what I found seems like this error occurs because I have both extras attached and it tries to find things to do with both and can't find the second when it already uses one, but I'm not sure about that. In the end what I am trying to do is find something that will work with all phones or a way to use both extras without the crash. I have been looking around for a while and have found similar questions on multiple places but none of them have been answered, so any help would be great.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T21:15:34.740

玩过之后，我发现你可以把东西用在不同的手机上。我使用此代码找出它是什么电话：

```
String manuModel = Build.MANUFACTURER + " " + Build.MODEL; 
```

# android - Clear Android's Local Notifications cordova plugin

> ID：13798021
> 
> 赞同：2
> 
> 时间：2012-12-10T09:21:31.763
> 
> 标签：android, cordova, phonegap-plugins, localnotification

I use [Phonegap's localNotification Plugin for Android](https://github.com/phonegap/phonegap-plugins/tree/master/Android/LocalNotification) to show notifications on specific dates.

I use Cordova [2.2] & I used cordova's [upgrading tutorial](http://docs.phonegap.com/en/2.2.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android) to modify the plugin.

The notification is displayed, but when I click on it, the application doesn't open and the notification isn't cleared.

How can I fix this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-26T14:26:35.867

在 AlarmReceiver.java 中，大约第 70 行，您将看到以下代码行：

```
 // Construct the notification and notificationManager objects
    final NotificationManager notificationMgr = (NotificationManager) systemService;
    final Notification notification = new Notification(R.drawable.ic_launcher, tickerText,
            System.currentTimeMillis());
    final PendingIntent contentIntent = PendingIntent.getActivity(context, 0, new Intent(), 0);
    notification.defaults |= Notification.DEFAULT_SOUND;
    notification.vibrate = new long[] { 0, 100, 200, 300 };
    notification.setLatestEventInfo(context, notificationTitle, notificationSubText, contentIntent); 
```

添加适当的行以匹配以下内容：

```
 // Construct the notification and notificationManager objects
    final NotificationManager notificationMgr = (NotificationManager) systemService;
    final Notification notification = new Notification(R.drawable.ic_launcher, tickerText,
            System.currentTimeMillis());
    Intent notificationIntent = new Intent(context, CLASS_TO_OPEN.class);
    final PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);
    notification.defaults |= Notification.DEFAULT_SOUND;
    notification.vibrate = new long[] { 0, 100, 200, 300 };
    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notification.setLatestEventInfo(context, notificationTitle, notificationSubText, contentIntent); 
```

其中 CLASS_TO_OPEN 是您希望在按下通知时打开的类的名称。

编辑：
为了澄清，为了让通知在按下时打开一个活动，您需要将此活动与通知对象相关联。这是通过创建一个`Intent`，指定要打开的活动（如在 NAME_OF_ACTIVITY.class 中）作为第二个参数，并将其作为第三个参数传递`Intent`给 a`PendingIntent`来完成的。这又通过该`setLatestEventInfo`方法传递给通知对象。

在上面的代码片段中，除了指定要打开的活动之外，这一切都是为您完成的，因为这将特定于您的项目。除非您添加了其他活动，否则 PhoneGap/Cordova 项目包含一个活动，即打开 Cordova WebView 的活动。如果您不知道或不记得项目中此活动的名称，您可以通过以下方式在 Package Explorer（在 Eclipse 中）中找到它：

> src>NAME_OF_YOUR_PACKAGE>NameOfActivity.java

为确保这是类的名称，请使用文本编辑器打开 java 文件，您将看到`NAME_OF_ACTIVITY extends DroidGap`. 将上述代码段中的 CLASS_TO_OPEN 替换为您的活动名称（必须包含 .class 文件扩展名）。

# php - PHP：一周从星期一开始，但是星期日的“本周星期一”得到下周星期一

> ID：13798026
> 
> 赞同：36
> 
> 时间：2012-12-10T09:21:51.420
> 
> 标签：php, datetime

这是问题的摘要： 在星期日，`strtotime('this week')`返回下周的开始。

在 PHP 中，一周似乎从星期一开始。但是，在除星期日之外的任何一天，此代码

```
echo date('Y-m-d', strtotime('monday this week', strtotime('last sunday'))); 
```

输出本周星期一的日期，看起来应该是上周的星期一输出。在这种情况下，PHP 似乎将星期日和星期一都视为一周的开始。现在是 2012 年 12 月 10 日星期一或 2012 年 12 月 10 日。`date('Y-m-d', strtotime('sunday last week'))`返回`2012-12-09`- 昨天。

这是一个错误，还是我错过了什么？看起来这个明显的错误应该是众所周知的，但我找不到任何关于它的信息。获得一周开始的唯一方法是在周日使用一些特殊处理吗？

```
$week_offset = (int) 'sunday' == date('l');
$week_start  = strtotime("-$week_offset monday"); // 1 or 0 Mondays ago 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T19:43:44.587

据我所知，这是一个错误。我认为没有合理的理由`strtotime('this week');`应该返回未来的日期。这是一个相当大的错误。在我的特殊情况下，我有一个排行榜，显示自本周开始以来得分最高的用户。但是在星期天，它是空的，因为`strtotime`返回了未来日期的时间戳。我很怀疑，因为我不知道这怎么可能被忽视，但我找不到任何其他关于这个错误的报告。

感谢您的所有时间和帮助，伙计们。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-15T11:19:26.973

这个答案很晚，但这是我一直在努力解决的问题。到目前为止，我尝试过的每个解决方案都因某种原因而出现故障。这就是我最终得到的对我有用的东西。（虽然它可能看起来很漂亮，但它至少有效）。

```
$thisMonday =  strtotime('next Monday -1 week', strtotime('this sunday')); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-16T22:07:40.820

以下是如何获得本周的星期一：

```
echo date("Y-m-d", strtotime(date('o-\\WW'))); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-14T13:55:43.953

这并不理想，但这就是我使用的方法：

```
if(date('N') == 7) { 
    $date = date('Y-m-d',strtotime('monday last week'));
} else {
    $date = date('Y-m-d',strtotime('monday this week'));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-18T22:36:40.543

```
 I think the only problem with your coding is TimeZone. 
```

**解决方案：**
设置自己的时区。这是我自己的时区的示例：

**例子**

```
 date_default_timezone_set('Asia/Kolkata');

   Set the above line before calling any time function. 
```

祝你今天过得愉快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T05:31:45.900

试试这个代码

```
// set current date
$date = date("m/d/Y");
$ts = strtotime($date); // also $ts = time();

// find the year and the current week
$year = date('o', $ts);
$week = date('W', $ts);
// print week for the current date
$i = 1; // 1 denotes the first day of week

$ts = strtotime($year.'W'.$week.$i);
echo $day = date("l", $ts); // generate the name of day
echo "<br>";
echo $day = date("Y-m-d", $ts); // generate the date 
```

你会得到本周的日期，无论你是在星期一，你都会得到那个星期一的日期。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-16T16:50:06.197

如果你想要最近的星期一：

```
function mostRecentMonday(){
  if(date("w") == 1){
   return strtotime("midnight today");
  } else {
   return strtotime("last monday");
  }
} 
```

易于修改以使用 DateTime，或者甚至指定不同的日期作为基准。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-10T10:06:21.590

我想而不是尝试

```
echo date('Y-m-d', strtotime('monday this week', strtotime('last sunday'))); 
```

你应该试试

```
echo date('Y-m-d', strtotime('monday last week')); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-26T12:39:42.240

这适用于寻找适合任何一天的友好解决方案的人。

```
function getWeekStart($week_start_day = "Monday") {
    $week_days = array("Sunday"=>0,"Monday"=>1,"Tuesday"=>2,"Wednesday"=>3,"Thursday"=>4,"Friday"=>5,"Saturday"=>6,);

    if(!isset($week_days[$week_start_day])) {
        return false;
    } else {
        $start_day = $week_days[$week_start_day];

        $today = date("w");
        $one_day = (60 * 60 * 24);

        if($today < $start_day) {
            $days_difference = 7 - ($start_day - $today);
        } else {
            $days_difference = ($today - $start_day);
        }

        $week_starts = strtotime(date("Y-m-d 00:00:00")) - ($one_day * $days_difference);

        return $week_starts;
    }
}

//Test: If today is Monday, it will return today's date
echo date("Y-m-d H:i:s", getWeekStart("Monday")); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-20T18:19:20.450

基于[布莱恩特](https://stackoverflow.com/a/32584683/7917266)的回答：

```
$first_week_date = date('d F Y', strtotime('next Monday -1 week', strtotime('this sunday')));
$last_week_date = date('d F Y', strtotime('next Monday -1 week + 6 days', strtotime('this sunday'))); 
```

# javascript - D3 缩放行为阻止 IE9 中的单击事件

> ID：13798027
> 
> 赞同：3
> 
> 时间：2012-12-10T09:21:55.290
> 
> 标签：javascript, internet-explorer-9, d3.js

我加

```
d3.behavior.zoom().on("zoom", redraw); 
```

现在节点上的点击事件在 IE9 中不起作用。

```
var nodeEnter = node.enter().append("g")
            .attr("class", "node")
            .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
            .on("click", click, true); 
```

我该怎么做才能让点击事件在 IE9 中也能正常工作？

//詹斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T16:18:09.463

通过覆盖 mouseup.zoom（在 mousemove 上），我能够在 IE9 中保留点击事件。

```
var pan = svg.append("g")
    .attr("transform", "translate(" + panTranslate + ")")
    .call(d3.behavior.zoom().on("zoom", function(d){
        panTranslate[0] += d3.event.translate[0];
        panTranslate[1] += d3.event.translate[1];
        pan.attr("transform", "translate(" + panTranslate + ")");
        d3.select(window).on("mouseup.zoom", function(){
            d3.select(window).on("mousemove.zoom", null).on("mouseup.zoom", null);
        });
        return true;
    })).on("dblclick.zoom", null); 
```

# android - achartengine android中的ConcurrentModificationException

> ID：13798028
> 
> 赞同：0
> 
> 时间：2012-12-10T09:21:57.397
> 
> 标签：android, achartengine

我正在开发一个 android 应用程序，我从蓝牙接收 eeg 信号并使用 achartengine 实时显示它。我使用异步任务来显示图表并更新它。但是，我每次都得到 ConcurrentModificationException 。该图会显示一段时间，然后给出该错误。下面是我的代码。

```
mstart.setOnClickListener(new OnClickListener() {

         @Override
        public void onClick(View arg0) 
        {
            // TODO Auto-generated method stub
            // tv.setText("Fetal Heart rate loading..");

//               index = 0;
                flag = true;  

             if(fhr_alg!=null)
                    fhr_alg = null;

             fhr_alg = new AddStringTask();

             algo_done = false;
             /*curr = 5;
             counter = 0;*/
////                a1.setFlag(true);
                //a1.setMax(0);

            Thread tt = new Thread()
            {
                public void run()
                {
                    try{
                        sleep(600);                             
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }finally{

                        fhr_alg.execute();

                    }
                }
            };tt.start();
             if (view_eeg1== null) {
                    LinearLayout layout_eeg1 = (LinearLayout) findViewById(R.id.layout2);
                    view_eeg1= ChartFactory.getLineChartView(BluetoothConnect.this, eeg1, renderer_eeg1);
                  //  layout_eeg1.
                    layout_eeg1.addView(view_eeg1);
                    } else {
                    view_eeg1.repaint();}
            // w1.loadUrl("javascript:callJS()");               
             mstart.setEnabled(false);

        }           
    });

class AddStringTask extends android.os.AsyncTask<Void, Integer, Integer> {
    @Override
    protected void onPostExecute(Integer result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        algo_done=true;
        //Toast.makeText(Html.this, "Done Algo !", Toast.LENGTH_SHORT).show();
    }

    @SuppressLint("UseValueOf")
    @Override
    protected Integer doInBackground(Void... unused) {

        try {
            for(int r=0;r<=5000;r++){
                //Thread.sleep(300); 

                series1.add(r,data[r]);
              //  w2.loadUrl("javascript:count(\""+data[r]+"\")"); 

                if(r<=250){
                    renderer_eeg1.setXAxisMax(250);
                }
                else if(r>250){
                    double maxX = series1.getMaxX();
                    double minX = maxX - 250;
                    renderer_eeg1.setXAxisMin(minX);
                    renderer_eeg1.setXAxisMax(maxX);
                }
                view_eeg1.repaint();                   
                publishProgress((int)data[r]);
                SystemClock.sleep(600);

            }
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 

        return (0);

    }

    @Override
    protected void onProgressUpdate(Integer ... value) {

        int fhr=value[0];
        view_eeg1.repaint();
        w2.loadUrl("javascript:count(\""+fhr+"\")");            
        //a1.setfhr(curr, fhr);
        //curr++;           

    }

} 
```

谁能告诉我为什么会出现这个错误以及如何解决它。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:36:45.293

> 将 UI 更新为不是 UI 线程的线程时出现问题，因此您必须使用如下的 doinbackground 并删除在 doInbackground 中修改 UI 的代码

# sql - Oracle 表列名带空格

> ID：13798035
> 
> 赞同：29
> 
> 时间：2012-12-10T09:22:38.970
> 
> 标签：sql, oracle

是否可以创建一个列名包含空格的表？如果是这样，我该如何创建和使用它？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-10T09:28:11.013

这是可能的，但不建议这样做。您需要用双引号将列名括起来。

```
create table my_table ("MY COLUMN" number); 
```

[但请注意文档](http://docs.oracle.com/cd/E11882_01/server.112/e41084/sql_elements008.htm#SQLRF51129)中的警告：

> **注意**：Oracle 不建议对数据库对象名称使用带引号的标识符。SQL*Plus 接受这些带引号的标识符，但在使用其他管理数据库对象的工具时它们可能无效。

该名称将区分大小写，并且每次引用该名称时都必须将其括在双引号中：

```
select "MY COLUMN" from my_table; 
```

所以......不要，这将是我的建议......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T09:27:42.120

是的，这是可能的。您只需要确保引用列名。例如：

```
CREATE TABLE Fubar ("Foo Bar" INT);
INSERT INTO Fubar VALUES (1337);
SELECT "Foo Bar" FROM SpaceMonster 
```

尽管有可能，但这并不是一个好主意。如果只是用下划线替换所有空格，您可能会避免很多痛苦。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T09:28:54.943

可以通过命名两个`"` 示例之间的列： "My columN" ，列名区分大小写，这意味着。

```
SELECT "my column" from table; --NOT OK
SELECT "My columN" from table; --OK 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T09:27:34.367

如果您适当地引用这些内容，您可以（参见[Oracle 文档）。](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements008.htm)但是我怀疑这不是一个好主意，因为您必须引用所有内容。通常 db 命名标准/约定（例如[here](http://www.gplivna.eu/papers/naming_conventions.htm)或[here](http://ss64.com/ora/syntax-naming.html)）倾向于使用下划线（不需要引用）而不是空格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T09:28:27.923

你谷歌了吗？我做到了 - 第 6 个链接是[this](http://www.devshed.com/c/a/Oracle/Oracle-Database-Fundamentals/1/)，我在其中找到以下内容：

```
create table employee (
   "First Name" varchar2(20),
   "Last Name" varchar2(20),
   Address varchar2(60),
   Phone varchar2(15),
   Salary number,
   EmpID number,
   DeptID number
); 
```

...当我在 10g 中尝试时效果很好。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-10T09:27:38.423

这是为 oracle 定义的列规则

列（用于表格）

1.  所有列的格式为 {alias}_{colname}。例如 prs_id、prs_name、prs_adr_id、adr_street_name。这保证了列名在模式中是唯一的，但来自另一个表的非规范化列除外，这些列使用触发器或应用程序逻辑填充。
    1.  所有列都是单数。如果您认为您需要一个列名的复数形式，请三思它是否是正确的设计？通常这意味着您在同一列中包含多个值，应该避免这种情况。
    2.  所有表都有 {alias}_id 形式的代理主键列，它是表中的第一列。例如，prs_id、mat_id、adr_id。

您始终可以使用“”为列名 bu 设置别名

# java - 简单 SAX 解析器的输出错误

> ID：13798038
> 
> 赞同：0
> 
> 时间：2012-12-10T09:22:50.050
> 
> 标签：java, xml, saxparser

我在 mykong 中看到了一个示例 - [http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/) 我试图使它适用于 xml 文件（下）通过对上述页面中的代码进行以下修改 -

```
1 - Have only two if blocks in startElement() and characters() methods.
2 - Change the print statements in above methods, ie 
    FIRSTNAME and First Name = passenger id
    LASTNAME and Last Name = name 
```

问题是 - 在输出中，我看到的是乘客这个词，而不是乘客 ID 的值。我该如何解决？

```
<?xml version="1.0" encoding="utf-8"?>
<root xmlns:android="www.google.com">

<passenger id="001">
<name>Tom Cruise</name>
</passenger>

<passenger id="002">
<name>Tom Hanks</name>
</passenger>

</root> 
```

**Java 代码**

```
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class ReadXMLFileSAX{

public static void main(String argv[]) {

try {

SAXParserFactory factory = SAXParserFactory.newInstance();
SAXParser saxParser = factory.newSAXParser();

DefaultHandler handler = new DefaultHandler() {

boolean bfname = false;
boolean blname = false;

public void startElement(String uri, String localName,String qName, 
            Attributes attributes) throws SAXException {

    System.out.println("Start Element :" + qName);

    if (qName.equalsIgnoreCase("passenger id")) {
        bfname = true;
    }

    if (qName.equalsIgnoreCase("name")) {
        blname = true;
    }

}

public void endElement(String uri, String localName,
    String qName) throws SAXException {

    System.out.println("End Element :" + qName);

}

public void characters(char ch[], int start, int length) throws SAXException {

    if (bfname) {
        System.out.println("passenger id : " + new String(ch, start,   length));
        bfname = false;
    }

    if (blname) {
        System.out.println("name : " + new String(ch, start, length));
        blname = false;
    }

}

 };

   saxParser.parse("c:\\flight.xml", handler);

 } catch (Exception e) {
   e.printStackTrace();
   }

   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:43:22.460

在 startElement 中，当它用于“乘客”时，您获得的 Attributes 参数将具有该值。

```
public void startElement(String uri, String localName,
    String qName, Attributes attributes)
        throws SAXException {
    if (qName.equalsIgnoreCase("passenger") && attributes != null){
        System.out.println(attributes.getValue("id"));
    }
} 
```

# python - 在嵌套类中，如何从 Python 的嵌套类中访问外部类的元素？

> ID：13798044
> 
> 赞同：5
> 
> 时间：2012-12-10T09:23:00.657
> 
> 标签：python, class, nested

我有这种情况，我需要要求一个嵌套类将项目附加到外部类的列表中。这是类似于我试图做的伪代码。我将如何让它发挥作用？

```
class Outer(object):
  outerlist = []
  class Inner(object):
    def __call__(self, arg1):
      outerlist.append(arg1)

if __name__ == "__main__":
  f = Outer()
  f.Inner("apple")
  f.Inner("orange")

  print f.outerlist() 
```

这是我希望看到的—— `apple, orange`

详细信息：
OS X、Python 2.7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:33:49.030

这将产生预期的结果。

注意`__new__`（A行）的使用。这意味着 Inner 不会正确地做任何构造工作，而是附加列表。此外，要访问包含类的类属性，只需使用外部类的名称（B 行）。

最后看 C 行。列表不是函数。您的原始代码中有一些额外的括号。

```
class Outer(object):
    outerlist = []
    class Inner(object):
        def __new__(self, arg1):                #A
            Outer.outerlist.append(arg1)        #B

f = Outer()
f.Inner("apple")
f.Inner("orange")
print f.outerlist                               #C 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T09:25:51.790

您只能使用完整的全局名称访问外部类：

```
class Outer(object):
    outerlist = []
    class Inner(object):
        def __call__(self, arg1):
            Outer.outerlist.append(arg1) 
```

在python中，在任何情况下一般都不需要嵌套类。在某些用例中，在函数中定义一个类是有意义的（使用作用域变量），但很少需要嵌套类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-01T17:43:13.927

为什么不将外部类实例作为参数传递给内部类方法？您可以通过这种方式访问​​外部类实例的成员。

```
 class Outer(object):
    outerlist = []
    class Inner(object):
      def __init__(self, outer_self):
        self.outer = outer_self
      def __call__(self, arg1):
        self.outer.outerlist.append(arg1)

 if __name__ == "__main__":
   f = Outer()
   i = f.Inner(f)
   i("apple")
   i("orange")

   print f.outerlist 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T10:05:17.223

既然我了解了您的设计，那么您做的事情都错了。

首先，Outer 是一个类；它没有得到`__call__`编辑。您的第 17 行只是要构造一个空`Outer`对象并且什么都不做。如果您想“调用”该`Outer`对象，您可以定义一个`__init__`方法——或者，正如 Sheena 所建议的，定义 a`__new__`并拦截初始化，因为您实际上并不需要初始化的对象。

老实说，我不认为那些还不了解如何`__call__`工作的人应该尝试构建像这样棘手的东西。但是，如果您坚持，请继续阅读。

在一个类而不是一个实例中收集这种东西是一个非常奇怪，并且可能很糟糕的设计。请记住，类变量实际上是全局变量，包含所有这些。如果您尝试以`Outer`可重入方式使用，或者从多个线程/事件处理程序/greenlets/whatever 中使用，那么这些用途最终会相互踩踏。即使您认为现在这可能不会成为问题，但它可能会在未来的某个时候成为问题。

您可以创建一个`Outer`实例，并将其成员用作装饰器。例如：

```
from outer_library import Outer

outer = Outer()

@outer.get("/")
… 
```

但我不确定那会好得多。这里的整个设计似乎涉及在模块级别执行操作，即使看起来您只是定义普通函数并在最后调用一个函数。您设法使自己感到困惑的事实应该证明这是多么令人困惑的设计。

但是，如果您*确实*想要这样做，您可能想要做的是在`Outer.__init__`方法中定义类，并将它们分配给实例成员。类是一等值，可以像任何其他值一样分配给变量。然后，使用这些类的`__init__`（或`__new__`）方法来完成您想要的工作，使这些类模拟函数。

这可能看起来令人困惑或误导。但是请记住，您尝试做的全部重点是以一种看起来像方法的方式使用类，因此这种混淆是问题固有的。但是，如果您愿意，可以将装饰器编写为函数（在这种情况下，作为 的普通实例方法`Outer`）；它只是使问题的不同部分变得更难，而不是这部分。

设计这样的东西的一种更正常的方法是创建`Outer`一个完全正常的类，人们可以对其进行子类化或创建实例，并提供一种显式的非花哨方式来将处理程序方法或函数附加到 URL。然后，一旦它起作用，设计一种方法来简化使用装饰器注册的处理程序。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-11-23T09:50:03.247

我认为 picmate 指出的选项（将外部类作为内部类的输入传递）对于这个特定问题是一个不错的选择。请注意，它也可以在不必“嵌套”类的情况下工作（在我看来，这里要避免的事情，因为它是不必要的）。请注意，我还在外部类中嵌入了内部类的初始化（此步骤并非严格需要，但出于说明目的，我将其包含在此处）：

```
class Outer(object):
  outerlist = []
  def __init__(self):
    self.Inner=Inner(Outer=self)
  def get_basket(self):
    print "Outer basket: %s" %(self.outerlist)

class Inner(object):
  def __init__(self,Outer):
    self.Outer=Outer
  def __call__(self, arg1):
    self.Outer.outerlist.append(arg1)
  def get_basket(self):
    print "Inner basket: %s" %(self.Outer.outerlist)

if __name__ == "__main__":
  f = Outer()
  print "Initial state"
  f.get_basket()
  f.Inner.get_basket()
  f.Inner("apple")
  f.Inner("orange")
  print "Final state"
  f.get_basket()
  f.Inner.get_basket() 
```

# jquery - 为网页的每 x 个访问者加载一个弹出窗口

> ID：13798050
> 
> 赞同：0
> 
> 时间：2012-12-10T09:23:28.457
> 
> 标签：jquery, random, popup, onload-event, bpopup

我正在寻找一些帮助来为我的特殊目标找到更好的方法/脚本。

**我如何加载我网页的每个 x 访问者的弹出窗口？**

我的想法是能够在网页上为每个 x 访问者加载一个弹出窗口。此弹出窗口将随机包含列表之间的文本。

实际上，我为随机弹出窗口创建了一些东西，例如“提示”列表样式，但我坚持使用“加载每个 x 访问者”

我更喜欢使用 jquery 或 javascript，我不知道这是否可能，但我会尝试用[这个 jquery来做到这一点](http://dinbror.dk/bpopup/)

因此，如果有人可以在此之后给我一个技巧或一种搜索方式，那就太好了:)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:31:22.983

你如何实际显示弹出窗口是无关紧要的，挑战在于计算访问者。

您不能仅使用客户端技术（javascript、jquery 等）来执行此操作，因为每个用户的请求都独立于最后一个用户。您需要某种形式的持久性服务器端来计算访问者。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-10T09:33:53.580

您可以使用本地存储 (HTML5)。像这样：

```
if (localStorage.getItem("visit") == null) {
    alert("Show popup");
    localStorage.setItem("visit", "true"); //Set visit to true
} 
```

由于它是 HTML5，您可以使用以下方法创建 cookie 回调：

```
if (!localStorage) {
    var localStorage = {
        setItem: function(name, value) {
            var date = new Date();
                date.setTime(date.getTime()+(days*24*60*60*1000));
                var expires = "; expires="+date.toGMTString();
            document.cookie = name+"="+value+expires+"; path=/";
        },

        getItem: function(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for(var i=0;i < ca.length;i++) {
                var c = ca[i];
                while (c.charAt(0)==' ') c = c.substring(1,c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
            }
            return null;
        }
    };
}​ 
```

# javascript - 想在javascript中设置延迟

> ID：13798051
> 
> 赞同：1
> 
> 时间：2012-12-10T09:23:37.760
> 
> 标签：javascript, html

我想在 javascript 代码中设置延迟，以便在运行 javascript 之前生成 XML 文件。这是我的html代码

```
<body onLoad="Func1Delay()">
<div id="map"></div>
</body> 
```

在这个 Func1Delay() 函数中，我编写了代码来延迟 javascript 的执行

```
function Func1Delay()
    {
    setTimeout("load()", 3000);
    } 
```

load() 是javascript函数吗？如何延迟 javascript 代码的执行，以便在代码执行之前成功生成 xml 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:25:00.373

您希望函数尽快执行，但在每种情况下都在成功生成 xml*之后。*

在这种情况下，您应该避免使用固定的时间量（因为您不确切知道该值），但请尝试以下操作：

```
function load(){

    if (/*check here if the xml has *not yet* been generated*/){
          setTimeout(load,50); // try again in 50 milliseconds
          return;
    }

    // do your stuff here
} 
```

只要您的 xml 尚未准备好，它就会循环，并在它可用时立即启动。

关于setTimeout的一般：

您可以传递一个字符串，但出于多种原因，强烈建议不要这样做。而是传递函数引用或这样的函数：

```
// function reference
setTimeout(load,3000) // no `()` !

// function
setTimeout( function(){load()},3000) 
```

如果您需要将参数传递给函数，则不能使用第一个选项，但需要使用第二个选项，您可以轻松地传递它们`load(params)`。

如果你传递这样的函数：`setTimeout(load(),3000)`它会执行函数`load`并将其*返回值*传递给超时。但是，您希望在 3 秒后调用该函数，因此只传递对该函数的引用。

但是请注意，如果您以这种方式执行函数，您将拥有不同的范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:25:47.567

你就是这样做的，除了你不想使用字符串（尽管它有效——前提是你有一个`load`在全局范围内定义的函数）。`setTimeout`安排一个函数在给定的毫秒数之后被调用。

最好给它一个实际的函数参考：

```
function Func1Delay() {
    setTimeout(load, 3000);

    function load() {
        // Stuff to do three seconds later
    }
} 
```

请注意，您用来触发它的事件`onload`of`body`已经在页面加载周期的非常非常晚的时候发生了，因此您等待的任何事情都可能已经完成；相反，如果它可能需要超过三秒钟，您可能等待的时间不够长。因此，如果您可以检查某些内容是否已完成，您可以进行轮询，如下所示：

```
function Func1Delay() {

    check();

    function check() {
        if (theWorkIsDone) {
            // Do something with the work
        }
        else {
            // Check back in 100ms (1/10th of a second)
            setTimeout(check, 100);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T10:48:35.770

似乎您的 downloadUrl 函数提供了回调。*在加载 XML 之后，*回调函数会自动触发。您不需要 3 秒的延迟，只需将您的逻辑移动到回调函数中即可。像这样的东西：

```
function Func1Delay() {
    downloadUrl("location.xml", function (data) {
        var xml = data.responseXML;
        // do any thing with xml, it is loaded!
        // alert(xml);
    });
} 
```

# unity3d - Unity 3d - 渲染的材质选择

> ID：13798052
> 
> 赞同：0
> 
> 时间：2012-12-10T09:23:44.867
> 
> 标签：unity3d, textures, materialized-views

我正在尝试`Material`在运行时更改墙。我从 Google Sketchup 导入房屋模型，它在一个对象中包含不同的材料（这在检查器中显示）。每当我单击下一个按钮 ( `>>`) 时，它都会更改对象的第一个材质。如何获取对其他元素的引用？这是我到目前为止所拥有的：

```
public class Material_GUI : MonoBehaviour {

public Material[] mats;
public GameObject go;
private int index = 0;

// Use this for initialization
void Start () {
    go.renderer.material= mats[index];
}

// Update is called once per frame
void Update () {
}

void OnGUI(){
    GUILayout.BeginArea(new Rect(Screen.width/2-100,Screen.height-60,200,50));
    GUI.Box (new Rect(10,10,190,40),"");

    GUI.Label(new Rect(62,20,100,20),"Wall Testing"+(index +1));

    if(GUI.Button (new Rect(15,15,30,30),"<<")){
        index--;
        if(index<0){
            index = mats.Length - 1;

        }
        go.renderer.material = mats[index];
    }

    if(GUI.Button (new Rect(165,15,30,30),">>")){
        index++;
        if(index > mats.Length -1){
            index = 0;

        }
        go.renderer.material = mats[index];
    }
    GUILayout.EndArea();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:40:15.023

如果要更改渲染器的其他材质，可以使用

```
go.renderer.materials 
```

[http://docs.unity3d.com/Documentation/ScriptReference/Renderer-materials.html?from=MeshRenderer](http://docs.unity3d.com/Documentation/ScriptReference/Renderer-materials.html?from=MeshRenderer)

例如：

```
go.renderer.materials[0] = mats[0];
go.renderer.materials[1] = mats[1]; 
```

# java - 选择使用休眠插入的最后一个实体

> ID：13798056
> 
> 赞同：0
> 
> 时间：2012-12-10T09:23:53.960
> 
> 标签：java, hibernate

我正在尝试获取插入数据库的最后一个实体，我认为这将是一件非常简单的事情，但是我尝试的每个查询都会导致某种异常被抛出

我使用的代码是：

```
@Override
public DataStoreMark getLastMark() {

    String selectQuery = "from Mark";
    Query query = em.createNativeQuery(selectQuery, DataStoreMark.class);

    try {
        return (DataStoreMark) query.getSingleResult();
    } catch (NoResultException e) {
        log.error("Couldn't find any Marks in the DataStore.");
    }

    return null;
} 
```

但是，此代码会引发 PesistenceException：

```
org.hibernate.exception.SQLGrammarException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'from milestone' at line 1 
```

而且数据库里肯定有记录。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:05:50.577

您可以使用其中一种`createQuery()`，`createSqlQuery()`如果它不起作用：

1.

```
String selectQuery = "from Mark";
Query query = em.createQuery(selectQuery);
return (DataStoreMark) query.list().get(0); 
```

2.

```
String selectQuery = "select * from Mark";
SQLQuery query = (SQLQuery) em.createSQLQuery(selectQuery);
query.addEntity(DataStoreMark.class);
return query.list(); 
```

我认为hibernate不会告诉最后一个添加到数据库中的实体。或者，您可以编写特定于您的数据库的查询并使用`createSqlQuery()`如上所示运行它。

# python - 如何将特定的war文件提取到特定的文件夹

> ID：13798058
> 
> 赞同：3
> 
> 时间：2012-12-10T09:23:55.663
> 
> 标签：python, jar

我有 python 代码，它将下载`.war`文件并将其放在变量指定的路径中`path`。

现在我想从那场战争中提取一个特定的文件到一个特定的文件夹。

但我在这里被打动了：

```
os.system(jar -xvf /*how to give the path varible here*/  js/pay.js) 
```

我不确定如何将变量传递`path`给`os.system`命令。

我对python很陌生，请帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T09:34:33.430

如果你真的想使用`os.system`，shell 命令行作为字符串传递，你可以传递任何你想要的字符串。所以：

```
os.system('jar -xvf "' + pathvariable + '" js/pay.js) 
```

或者您可以使用`{}`或`%s`格式化等。

但是，您可能不想使用`os.system`.

首先，如果您想运行其他程序，使用该[`subprocess`](http://docs.python.org/library/subprocess.html)模块几乎总是更好。例如：

```
subprocess.check_call(['jar', '-xvf', pathvariable, 'js/pay.js']) 
```

如您所见，您可以传递参数列表，而不是尝试找出如何将字符串放在一起（并处理转义和引用以及所有这些混乱）。还有许多其他优点，主要在文档本身中进行了描述。

However, you probably don't want to run the `war` tool at all. As jimhark says, a [WAR file](http://en.wikipedia.org/wiki/WAR_file_format_%28Sun%29) is just a special kind of [JAR file](http://en.wikipedia.org/wiki/JAR_%28file_format%29), which is just a special kind of [ZIP file](http://en.wikipedia.org/wiki/ZIP_file_format). For creating them, you generally want to use JAR/WAR-specific tools (you need to verify the layout, make sure the manifest is the first entry in the ZIP directory, take care of the package signature, etc.), but for expanding them, any ZIP tool will work. And Python has ZIP support built in. What you want to do is probably as simple as this:

```
import zipfile
with zipfile.ZipFile(pathvariable, 'r') as zf:
    zf.extract('js/pay.js', destinationpathvariable) 
```

IIRC, you can only directly use `ZipFile` in a `with` statement in 2.7 and 3.2+, so if you're on, say, 2.6 or 3.1, you have to do it indirectly:

```
from contextlib import closing
import zipfile
with closing(zipfile.ZipFile(pathvariable, 'r')) as zf:
    zf.extract('js/pay.js', destinationpathvariable) 
```

Or, if this is just a quick&dirty script that quits as soon as it's done, you can get away with:

```
import zipfile
zf = zipfile.ZipFile(pathvariable, 'r')
zf.extract('js/pay.js', destinationpathvariable) 
```

But I try to always use `with` statements whenever possible, because it's a good habit to have.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T09:27:01.320

`war`文件不是一种`zip`文件吗？Python 具有[zipfile](http://docs.python.org/2/library/zipfile)支持（单击文档页面的链接）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:27:51.770

您可以使用 os.environ，它包含所有环境变量。它是一个字典，所以你可以像这样使用它：

```
pypath = os.environ['PYTHONPATH'] 
```

现在，如果您的意思是它是一个常见的 python 变量，只需像这样使用它：

```
var1 = 'pause'
os.system('@echo & %s' % var1) 
```

# android - 无法在 2.3 上播放 youtube 视频

> ID：13798059
> 
> 赞同：1
> 
> 时间：2012-12-10T09:23:56.863
> 
> 标签：android, youtube

我无法在 android 2.3 上将您打开到我的应用程序的 webview 中，但在 android 4.1 上它可以正常工作

这是代码

```
 openWebLinkWebView.getSettings().setJavaScriptEnabled(true);
    openWebLinkWebView.getSettings().setBuiltInZoomControls(true);
    openWebLinkWebView.getSettings().setRenderPriority(RenderPriority.HIGH);
    openWebLinkWebView.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);
    openWebLinkWebView.getSettings().setAppCacheEnabled(false);
    openWebLinkWebView.setScrollBarStyle(View.SCROLLBARS_INSIDE_OVERLAY);
    openWebLinkWebView.getSettings().setLightTouchEnabled(false);
    openWebLinkWebView.getSettings().setUseWideViewPort(true);
    openWebLinkWebView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    openWebLinkWebView.getSettings().setPluginsEnabled (true);
    openWebLinkWebView.getSettings().setSupportMultipleWindows(true);
    openWebLinkWebView.getSettings().setPluginState(PluginState.ON);
    openWebLinkWebView.loadUrl(url); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:56:31.213

您可以在 YouTube 视频活动类中使用此代码

```
WebView web=new WebView(MyYouTubeActivity.this);
web.getSettings().setJavaScriptEnabled(true);
web.loadUrl("youtube_link");
setContentView(mWebView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:35:28.700

是的，在此之前我遇到了这个问题，因为该功能`android:hardwareAccelerated="true"`仅在**大于或等于 11 的 API 版本**中可用，并且`4.1`默认情况下已启用（您可以在应用程序级别的清单中启用/禁用此功能）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:35:41.307

我在玩 2.3.3 时遇到了像你这样的问题
以下对我有用。

```
 webView = (WebView) findViewById(R.id.idWebView);       

    webView.setWebChromeClient(new WebChromeClient(){

    });
    webView.setWebViewClient(new WebViewClient());
    webView.getSettings().setJavaScriptEnabled(true);
            webView.getSettings().setPluginsEnabled(true);
    webView.getTouchables();
    webView.setBackgroundColor(Color.parseColor("#00000000"));
    String emdLink = "http://www.youtube.com/embed/" + video_code;
    webView.loadUrl(emdLink); 
```

注意：你应该有`embed`+ 你的视频代码。

另请注意，上面使用了不推荐使用的调用 - 代替

```
 webView.getSettings().setPluginsEnabled(true); 
```

最好使用（未经测试）：

```
 webView.getSettings().setPluginState(PluginState.ON); 
```

# html - Html 在打印中不可见

> ID：13798064
> 
> 赞同：0
> 
> 时间：2012-12-10T09:24:19.603
> 
> 标签：html, web-applications, printing

如何使该文本在网页上可见但在打印网页中不可见。我不能使用媒体查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:26:54.740

您将需要定义一个打印 css 文件。

看看[http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)

您只需要包含两个不同的 css 文件（我的首选方法）：

```
<link rel="stylesheet" type="text/css" media="screen" href="css/screen.css" />
<link rel="stylesheet" type="text/css" media="print" href="css/print.css" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:33:37.300

您可以将文本包装在一个元素中并给它一个类。例如，如果文本还没有可以添加类的元素，则可以添加跨度。

```
<span class="printInvisible">This is a text</span> 
```

然后，您可以定义一个用于打印的 css（您不需要为此进行媒体查询）：

```
 <link rel="stylesheet" media="print" type="text/css" href="print.css" /> 
```

并将您的类定义为在此样式表中不可见以隐藏它，例如：

```
.prinitInvisible {
     visibility: hidden;
} 
```

或者

```
.prinitInvisible {
     display: none;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:31:32.697

即使您声明不能使用媒体查询，您也可以创建单独的样式表进行打印。

```
<link rel="stylesheet" type="text/css" href="print.css" media="print"> 
```

如果您可以使用 javascript 并且绝对不能使用上述内容，您可以为所有不应打印的内容添加一个类（例如`class='no_print'`），当您单击打印选项时，使用 javascript 分配另一个类以`no_print`使它们不可见。

例如使用 jQuery

```
$('.no_print').addClass('hide'); 
```

或者直接用css做

```
$('.no_print').css('visibility','hidden'); 
```

# ruby-on-rails - 如何使用不是属性的方法在 Rails 中找到

> ID：13798066
> 
> 赞同：0
> 
> 时间：2012-12-10T09:24:39.437
> 
> 标签：ruby-on-rails, activerecord

您如何使以下工作...

```
Beagle.beagles.where(:snount => "short") 
```

...在为`snout`定义了方法 id`Beagle`但表中没有`snout`列的情况`beagles`下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:34:50.213

如果您需要一个范围（即`ActiveRecord::Relation`对象），那么我认为您不走运，因为`where`处理的是数据库查询逻辑，而不是模型实例方法。但是，如果您只需要获得满足方法要求的结果数组，那么这将起作用：

```
Beagle.select { |b| b.snout == "short" } 
```

请注意，这将从数据库中获取所有记录，*然后*从中选择您想要的记录。这是生成的 SQL：

```
Beagle Load (0.1ms)  SELECT "beagles".* FROM "beagles" 
```

另请参阅：[范围内的实例方法](https://stackoverflow.com/questions/6198660/instance-method-in-scope)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:31:36.993

也许试试这个

```
beagles = Beagle.find(:all)
beagles.each do |beagle|
if beagle.snount == "short"
beagles_selected << beagle
end
end 
```

然后，您将拥有一个`beagles_selected`包含您需要的所有小猎犬的数组

# javascript - 从 SVG 创建 Paper.js PathItem

> ID：13798067
> 
> 赞同：1
> 
> 时间：2012-12-10T09:24:47.173
> 
> 标签：javascript, svg, html5-canvas, vector-graphics, paperjs

免责声明：这是我第一种处理矢量图形的方法；）

我正在编写一个网络应用程序，用户上传一些图像（以撰写绘图），并且他应该上传一个矢量图像（SVG）作为“掩码”。

我正在使用[Paper.js](http://paperjs.org/)库。

所以，我的目标是阅读 SVG 并创建一个 paper.js [PathItem](http://paperjs.org/reference/pathitem)来表示它（然后添加填充颜色，无论如何）。

我尝试了一个简单的形状：

![在此处输入图像描述](../Images/c705c558d5c4f8186cace2623a8eb19d.png)

在 SVG 中看起来像：

```
// Adobe Illustrator
<?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 14.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 43363)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Livello_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     width="100px" height="100px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">
<polygon fill="none" stroke="#000000" points="48.771,12.137 59.323,33.518 82.919,36.947 65.845,53.59 69.875,77.09 48.771,65.994 
    27.667,77.09 31.697,53.59 14.623,36.947 38.219,33.518 "/>
</svg>

// Inkscape pure svg
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   version="1.1"
   width="100"
   height="100"
   viewBox="0 0 100 100"
   id="Livello_1"
   xml:space="preserve"><metadata
   id="metadata3358"><rdf:RDF><cc:Work
       rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
         rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs
   id="defs3356" />
<polygon
   points="59.323,33.518 82.919,36.947 65.845,53.59 69.875,77.09 48.771,65.994 27.667,77.09 31.697,53.59 14.623,36.947 38.219,33.518 48.771,12.137 "
   id="polygon3352"
   style="fill:none;stroke:#000000" />
</svg> 
```

处理这种形状真的很容易，将`points`字符串转换为数组，创建路径并`.add()`为每个元素调用。

当形状不仅仅是线条时，问题就来了，例如：

![在此处输入图像描述](../Images/b68184b6a615ec8a3837c3a560e66e2b.png)

我真的不知道如何将弯曲部分翻译成 paper.js 命令！SVG 包含这样的结构：

```
<path fill="#FFFFFF" stroke="#000000" d="M74.89,73.117H34.605c-11.32,0-20.497-9.177-20.497-20.497v-5.695
    c0-11.32,9.177-20.497,20.497-20.497H74.89"/>
<line fill="none" stroke="#000000" x1="74.89" y1="26.428" x2="74.89" y2="73.117"/> 
```

我没有运气读过[W3C svg 转换](http://www.w3.org/TR/2009/WD-SVG-Transforms-20090320/)，我真的不知道如何翻译这`M 74.89,73.117 H 34.605 c -11.32,0 -20.497,-9.177 -20.497,-20.497 v -5.695 c 0,-11.32 9.177,-20.497 20.497,-20.497 H 74.89`部分。

任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-09-28T08:31:55.563

您是否知道 Paper.js 带有自己成熟的 SVG 解析器和导出器，可让您非常轻松地导入和导出 SVG 内容？

目前还没有关于它的教程，但功能页面显示了两个示例：

[http://paperjs.org/features/#svg-import-and-export](http://paperjs.org/features/#svg-import-and-export)

它记录在此处的参考资料中：

[http://paperjs.org/reference/project/#importsvg-svg](http://paperjs.org/reference/project/#importsvg-svg) [http://paperjs.org/reference/item/#importsvg-svg](http://paperjs.org/reference/item/#importsvg-svg)

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:27:52.130

转换不是您要照顾的，而是[路径](http://www.w3.org/TR/SVG/paths.html#PathData)。您应该知道，正确解析那里的任何路径数据都需要一些工作，而一个已建立的 SVG 库至今仍无法正确处理（我在这里谈论的是 librsvg）。

幸运的是，SVG DOM 提供了帮助。path 元素具有 property `normalizedPathSegList`，它简化了`d`属性中的数据并允许您遍历所有段。查看类似问题的出色答案：[Scripting <path> data in SVG (reading and modifying)](https://stackoverflow.com/questions/8053487/scripting-path-data-in-svg-reading-and-modifying#8125957)。

[fabric.js](http://fabricjs.com/)是另一个可能对弥合 SVG/canvas 差距感兴趣的库。

# android - 等待 AsyncTask 完成

> ID：13798070
> 
> 赞同：0
> 
> 时间：2012-12-10T09:24:55.383
> 
> 标签：android, android-asynctask

嗨，我正在制作访问 MySQL 数据库的登录页面。但是我`Activity`总是在完成之前运行检查失败/成功的代码`AsyncTask`。

我尝试使用`asynctask.get()`方法，但它只是冻结了我的用户界面并且不起作用。

我尝试了这个[答案](https://stackoverflow.com/a/6396376/1318622)，说我应该在里面调用 result-checker 方法`onPostExecute()`。

但是由于我需要更改 TextView 以显示成功/失败，因此会导致`NullPointerException`因为我在内部实例化了 TextView `onCreate()`。

我无法将 TextView 实例化移动到构造函数中，因为它会返回`NullPointerException unable to instantiate activity ComponentInfo`.

**登录.java**

```
public class Login extends Activity{

    //declare global Views here

    protected void onCreate(Bundle bundle){
        //Setup views
    }

    protected void onClick(View v){
        //Setup necessary variables
        AsyncClass async = new AsyncClass(this);
        async.execute(username, password);
    }

    public void checkSuccess(boolean success){
        if(success)
            textView1.setText("Success");
        else
            textView1.setText("Failed");
    }
} 
```

**异步类.java**

```
public class AsyncClass extends AsyncTask<String, String, JSONObject>{
    protected JSONObject doInBackground(String... params){
        //access database
    }

    protected void onPostExecute(JSONObject json){
        //read the json result
        Login login = new Login();
        login.checkSuccess(true);
    }
} 
```

有什么解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:33:04.257

让 AsyncTask 作为你的内部类怎么样？

所以你的代码应该如下所示。

```
public class Login extends Activity {

    //declare global Views here

    protected void onCreate(Bundle bundle) {
        //Setup views
    }

    protected void onClick(View v) {
        new AsyncClass().execute(username, password);
    }

    public void checkSuccess(boolean success) {
        if (success) textView1.setText("Success");
        else textView1.setText("Failed");
    }

    class AsyncClass extends AsyncTask < String, String, JSONObject > {
        protected JSONObject doInBackground(String...params) {
            //access database
        }

        protected void onPostExecute(JSONObject json) {
            checkSuccess(true / false);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T09:28:43.197

尝试这个

```
protected void onPostExecute(JSONObject json){
    //read the json result
    Login login = (Login)context; // object that you pass to task constructor
    login.checkSuccess(true);
} 
```

您还可以向任务添加进度对话框以指示某些作业执行

```
public class BaseTask<T> extends AsyncTask<Object, Void, T> {

public Context context;
public ProgressDialog dialog;

public BaseTask(Context context) {
    this.context = context;
    this.dialog = new ProgressDialog(context);
}

@Override
protected void onPreExecute() {
    this.dialog.setMessage(context.getResources().getString(R.string.loading));
    this.dialog.show();

}

@Override
protected T doInBackground(Object... objects) {
    //....
    return something;
}

@Override
protected void onPostExecute(T result) {
    if (dialog != null && dialog.isShowing())
        dialog.dismiss();
    // do something
} 
```

}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T09:37:35.107

您无法从异步任务线程编辑 UI。为了对 UI 线程进行更新，请使用 onProgressUpdate() 方法。此方法是您的 AsyncTask 类的一部分，实际上是在主 UI 线程中执行的（我希望您将异步任务用作嵌套类，因为它被声明为 public，我猜您不是。您应该更改它）。如果您在异步任务中调用 publishProgress(...)，操作系统本身会调用 onProgressUpdate() 方法。

一个小样本：

```
protected JSONObject doInBackground(String... params){
    publishProgress("test");
}

    /**
     * This method is part of the Async Task
     */
    protected void onProgressUpdate(String... progress) {
        login.checkSuccess(true);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-12T14:00:14.760

我会以这种方式使用它，只需在您需要的地方覆盖您的 onPostExecute 或创建自己的界面

```
//create a object f your asyncclass and 
//override the onPostExecute where you need it
mInfo = new ASYNCCLASS({
   @Override
   public void onPostExecute(Object result){
      //doSomething something with your views!

  }
}).execute(); 
```

等待不是答案，因为您不知道 Asynctask 需要多长时间才能结束。上面的代码没有经过测试，只是伪代码，但它应该表明我的意思。

这里没有我的 IDE，所以如果有必要的话，如果有人能纠正括号，那就太好了！

格雷茨

# javascript - 在 Native Javascript 中监听 jQuery 触发的自定义事件

> ID：13798089
> 
> 赞同：-1
> 
> 时间：2012-12-10T09:26:09.563
> 
> 标签：javascript, jquery, javascript-events

我正在使用触发函数在 jQuery 中触发自定义事件。

```
$(document.body).trigger("mycustomevent"); 
```

我可以使用绑定函数来监听事件。但是，我需要在不使用 jQuery 的情况下使用本机函数来收听它。

期待一些像 document.body.addEventListerner("mycustomevent", handleCustomEvent);

我的问题 ：

好吧，这是我的实际问题。

我在我的页面中包含了 a.js，它通过在文档中插入脚本标签来加载 jquery 和 b.js。从主页我想调用 b.js 中定义的函数。为此，a.js 必须通知主页 b.js 已加载。

我希望主页通过监听像 onBJSLoad 这样的事件来处理它，不想调用一些虚拟函数作为回调。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:04:41.607

混合自定义事件并带来不必要的浏览器不一致听起来是一个非常糟糕的主意。

为什么不在你的主地图中做一个回调，f.ex：

```
window._onload = function() {
    // I’m ready
}; 
```

然后在 a.js 中，您可以在脚本准备好时调用它：

```
window._onload(); 
```

# ember.js - 如何更改 ember-data 中的 DS.Model url？

> ID：13798093
> 
> 赞同：0
> 
> 时间：2012-12-10T09:26:33.710
> 
> 标签：ember.js, ember-data

我是新手（对于 ember），并试图构建一个以搜索为中心的 Ember 应用程序 w/ Ember-data。我想动态更改 url（基于搜索字符串），数据应该自动更改（动态）。怎么做？

这是我不工作的代码：

```
Emapp.Data = DS.Model.extend({
first_name: DS.attr('string')
}).reopenClass({
  url: Emapp.MyURL.get('url')
});

Emapp.MyURL = Em.Object.create({
  urlParam: 'John',
  url: function()
  {
    return 'emb/data.php?id=%@'.fmt(this.get('urlParam'));
  }.property('urlParam')
}); 
```

当我执行。emapp.MyURL.set('urlParam', 'Adams')。我可以检查并看到 URL 更改为“Adams”。但不会再次获取数据。

编辑：emapp -> Emapp（由 rudi-angela 指出）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:10:00.630

由于您已将 'url' 属性设为计算属性，因此 Ember 会在 urlParam 更改时更新此值。这就是你指示 Ember 在这里做的所有事情（显然它做得很好）。但我认为您在这里想要的是“urlParam”属性中的任何更改以触发获取操作。在这种情况下，一个解决方案是创建一个单独的对象来观察 urlParam 并在 'urlParam' 值更改时采取行动。这些方面的东西：

```
emapp.watcher = Ember.Object.create({
    valueBinding: "emapp.MyURL.urlParam",

    observer: function() {
        console.log("urlParam has changed:");
        // perform your fetch here
    }.observes("value"),
}); 
```

注意：我认为命名空间需要大写（而不是 Emapp 而不是 emapp）。

# css - 以大写字母和负边距上市

> ID：13798094
> 
> 赞同：0
> 
> 时间：2012-12-10T09:26:39.393
> 
> 标签：css, margin

我正在编写以下列表，即使文本由多行组成，它也会在大写字母和文本之间保持距离。现在大写字母和以下文本不在同一行，尤其是在使用 Safari mobile 或 OSX Safari 等不同浏览器查看时。我认为负边距顶部是这里的问题。您有改进此代码的想法吗？提前非常感谢！

```
<style type="text/css">

ul {
list-style: none;
margin:10px 0px 0px 0px;
padding: 0px;
}

ul li a {
background-color: #F7F7F7;
border: 1px solid #999999;
color: #000000;
display: block;
font-size: 16px;
margin-bottom: -1px;
padding: 12px 12px;
}

ul li:first-child a {
-webkit-border-top-left-radius: 8px;
-webkit-border-top-right-radius: 8px;
}

ul li:last-child a {
-webkit-border-bottom-left-radius: 8px;
-webkit-border-bottom-right-radius: 8px;
}

#inside {
margin:-22px 0px 0px 26px; 
}

h1 {
font-size: 20px;
font-weight:bold;
display:inline;
}

</style>

<ul>
<li><a href="#"><h1>A</h1><div id="inside">Some text</div></a></li>
<li><a href="#"><h1>B</h1><div id="inside">Some text</div></a></li>
<li><a href="#"><h1>C</h1><div id="inside">Some text</div></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:38:38.743

**现在定义您的** `h1`标签和`#inside id` `display:inline-block;`/或**删除否定边距**并根据您的设计 定义您的**锚标签。** `line-height`

**习惯了这个css**

```
ul {
list-style: none;
margin:10px 0px 0px 0px;
padding: 0px;
}

ul li a {
background-color: #F7F7F7;
border: 1px solid #999999;
color: #000000;
display: block;
font-size: 16px;
padding: 12px 12px;
    line-height:16px; // add this line
    border-bottom:0; // add this line
}

ul li:first-child a {
-webkit-border-top-left-radius: 8px;
-webkit-border-top-right-radius: 8px;
}

ul li:last-child a {
-webkit-border-bottom-left-radius: 8px;
-webkit-border-bottom-right-radius: 8px;
    border-bottom: 1px solid #999999; // add this line
}

h1, #inside {
margin:0; // add this line
    display:inline-block; // add this line
    vertical-align:top; // add this line
}

h1 {
font-size: 20px;
font-weight:bold;
    margin-right:5px; // add this line
} 
```

***[演示](http://jsfiddle.net/mNaVY/)***

# c# - 当事务在数据库中完成但连接问题导致异常时，我该如何解决？

> ID：13798098
> 
> 赞同：1
> 
> 时间：2012-12-10T09:26:44.060
> 
> 标签：c#, .net, sql-server, azure, azure-sql-database

在我的 Azure Web 服务中，我有调用 SQL Azure 中的存储过程的代码。有时会发生这种情况，以便存储过程完成，但之后连接断开，调用者得到一个`SqlException`声称`Timeout expired. The timeout period elapsed prior to completion of the operation or the server is not responding.`

然后调用者将重新打开连接并尝试重新运行相同的代码。问题是代码首先检查数据库表是否存储“正确的状态”，并且由于上述存储过程已经运行，数据库状态已经改变，因此检查失败并抛出异常。

所以问题是调用代码依赖于“无异常”等于“数据库更改正常”的条件，因此如果出现异常，则数据库没有更改。在这种情况下，例外是由于发生数据库更改后的临时连接问题，因此假设结果是错误的。

处理此类情况的典型方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:30:39.200

使用 DTC 和远程事务，那么至少您可以正确处理此问题。您必须将其从“本地”事务提升为“分布式”事务。这本身就有问题，但几乎没有其他方法可以正确地做到这一点。

或者，您可以重新编程，以便在代码中正确处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:38:56.723

完全解决问题的唯一方法是使事务具有[幂等](http://en.wikipedia.org/wiki/Idempotence)性，这是一种奇特的说法，即无论您运行该过程多少次，最终状态都是正确的。一旦你这样做了，那么第一个事务（或第二个、第三个、第四个等）是否失败都没有关系。您只需继续尝试直到它起作用，然后您就会知道您的状态是正确的。

您如何实现幂等性取决于具体情况。在许多情况下，您可以使用保护子句来检查您是否已经处于所需的状态，但有时您可能需要做一些更复杂的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T22:13:03.997

我建议使用[Enterprise Library Transient Fault Handling Block](http://msdn.microsoft.com/en-us/library/hh680901%28v=pandp.50%29.aspx)。我们已经开始将它整合到我们的 Web 角色中。

# c# - 是否可以使用 asp.net 中的文件流播放视频文件？

> ID：13798106
> 
> 赞同：1
> 
> 时间：2012-12-10T09:27:22.163
> 
> 标签：c#, asp.net, video

我有一个 .flv 文件的文件流，我想在 asp.net 页面中使用文件流播放视频。

我可以在 asp.net 页面中使用此本地文件路径播放视频（使用对象标签）

是否可以在 asp.net 中使用文件流播放视频？如果是，请解释如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:36:43.800

如果你想做[这个视频流](http://stage.orchestra.it/)，你可以根据这篇[博文](http://blogs.ugidotnet.org/kfra/archive/2006/10/04/50003.aspx)使用它。

> 使用这个 HTTP 处理程序，您可以像 video.google.com 一样轻松地进行 FLV 流式下载。

# silverlight - 在 WP7 Pivot 中停止从一侧滑动

> ID：13798107
> 
> 赞同：0
> 
> 时间：2012-12-10T09:27:26.857
> 
> 标签：silverlight, windows-phone-7, pivot

我在我的应用程序中使用枢轴来显示一组图像，我想停止在枢轴中向左或向右滑动以使用户无法向后导航。我该怎么做？

```
 <controls:Pivot Title="TITLE"   Margin="0,0,0,60">

        <controls:PivotItem >
            <Grid>

                <Image Source="/src" />
            </Grid>
        </controls:PivotItem>

        <controls:PivotItem>
            <Grid>
                <Image Source="/src"  />
            </Grid>
        </controls:PivotItem>
        <controls:PivotItem >
            <Grid>
                <Image Source="/src" />
            </Grid>
        </controls:PivotItem>
        <controls:PivotItem >
            <Grid>
                <Image Source="/src" />
            </Grid>
        </controls:PivotItem>

    </controls:Pivot> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:18:49.920

如果您想要一个没有导航目的的枢轴，您可以创建一个页面或用户控件来满足您的需求。如果您只想防止手动控制枢轴，请参阅此问题： [防止手动控制枢轴控制运动](https://stackoverflow.com/questions/8848089/prevent-manual-control-of-pivot-control-movement)

# jquery - jquery 两个函数相互干扰：它们重叠

> ID：13798113
> 
> 赞同：1
> 
> 时间：2012-12-10T09:27:45.507
> 
> 标签：jquery, smarty

我正在使用两个 jQuery 函数：一个在标题中（下拉替换），一个在内容部分（可用项目年份的图形表示）。我的问题是它们重叠。如何将下拉功能放在第二个功能之上一层？

![在此处输入图像描述](../Images/59a7333ea0cd3479296b402f21e3da09.png)

我很感谢任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:35:28.417

您应该将[z-index](http://www.vanseodesign.com/css/css-stack-z-index/) CSS 属性应用于背景中的元素。

请注意，两个元素（您喜欢放在前面的元素和当前与其重叠的元素）需要位于相同的[堆叠上下文中](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)才能使 z-index 起作用。

# google-maps - Google Maps API Key - 以编程方式为我的每个用户获取一个？

> ID：13798121
> 
> 赞同：0
> 
> 时间：2012-12-10T09:28:12.270
> 
> 标签：google-maps, api-key

我看到，如果你想使用他们的地图 API，除非你想使用他们的网络服务和统计数据等，否则不必获得谷歌地图 API 密钥。

现在我对此有两个问题：

1.  如果我有一个使用 Google Maps API 显示带有默认选项的地图的公共网站。如果我不使用 API 密钥，Google 如何计算 API 调用？（也许在请求地图的域的帮助下？）

2.  如果他们这样做并且我的站点超过每天 25k 次调用，我的用户是否有可能在我的站点上使用他们的 Google 帐户登录，并且某些后端逻辑将从 Google 获取我存储在例如数据库中的 API 密钥。所以我可以使用我的用户的 API 密钥来绕过我的站点的 API 使用限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:54:42.260

假设您使用的是 Javascript API v3：

[这个](https://stackoverflow.com/questions/2769148/whats-the-api-key-for-in-google-maps-api-v3)SO question 部分回答了您的疑问。

看看[使用限制](https://developers.google.com/maps/faq#usagelimits)，看起来你不能使用多个 API 密钥：

> 我可以使用多个 API 密钥来增加我的可用使用量，超过记录的限制吗？如果任何网站在未经许可的情况下尝试使用超过允许的 Maps API 地图加载次数，并且在 Google 联系时未能做出回应，Google 保留拒绝访问 Maps API 的权利。

尽管这可能值得商榷，但对我来说，使用用户的 API 密钥似乎是个坏主意。当然你需要请求许可，然后你必须监控他们的配额等等，一个雷区......

**TL;DR**如果您不断超出每日配额，您应该购买更大的配额。

# java - GlassFish 服务器上的单独线程

> ID：13798123
> 
> 赞同：3
> 
> 时间：2012-12-10T09:28:25.310
> 
> 标签：java, jakarta-ee, service, glassfish

我正在做我的毕业设计，在这里遇到了困境。我需要制作一个应用程序来生成 PDF 并按照数据库中数据定义的时间表将它们通过电子邮件发送给人们。我正在为一家从事此项目的公司工作，我们已经有一个可以使用的 GlassFish 应用程序服务器。如果整个解决方案像现在这样在一个包中交付，那将是最好的。具有 webstart Web 应用程序等的客户端都在一个包中

我的新服务需要在单独的线程上运行，生成报告并通过电子邮件发送出去。从我在网上看到的内容来看，非常不鼓励在应用程序服务器中运行自己的线程作为 GlassFish，所以听起来我需要制作自己的单独应用程序。

这真的可以吗？您有什么意见，对此有何最佳做法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T09:34:02.027

**@日程**

如果您使用的是 Ejb 3.1 (glassfish 3.x)，您可以使用 @Schedule 注释让容器在指定的时间间隔或给定的日历时间调用方法。允许您避免在自己的代码中处理线程

[阅读有关 ejb 3.1 计时器的信息](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)

```
@Stateless
public class LabbBean {

    @EJB
    WorkerEjb workerEjb;

    @Schedule(second="*/5", minute="*",hour="*", persistent=false)
    public void myMethod() {
        for (all jobs found in db){
            workerEjb.workerMethod(job);    
        }
    }
}

@Stateless
public class WorkerEjb {
    @Asynchronous
    public void workerMethod(job) {
        //Send emails
    }
} 
```

如果你想在单独的线程中完成工作，@Schedule 注释方法可以调用一个 worker-ejb，其中 worker-method 注释为 @Asynchronous

**@超时**

我刚刚意识到您希望从数据库启动计划。一个选项是使用带有@Startup 注释的@Singleton ejb 以编程方式启动一堆计时器。如果某些计时器同时用完，则将在单独的线程中调用超时注释方法。

```
@Singleton
@Startup
public class LabbBean {
    @Resource
    protected TimerService timerService;

    @PostConstruct
    public void init() {
        //Init your timers from the data in the database here
        for (all your timers) {
            TimerConfig config = new TimerConfig();
            config.setInfo("timer1");
            config.setPersistent(false);

            ScheduleExpression schedule = new ScheduleExpression();
            schedule.dayOfMonth(10);
            schedule.minute(2);
            timerService.createCalendarTimer(schedule, config);
        }
    }

    //method called when timeout occurs
    @Timeout
    public void timeoutHandler(Timer timer) {
        String name = timer.getInfo().toString();
        System.out.println("Timer name=" + name);
    }
} 
```

# c# - 如何在 C# 中使用 Selenium webdriver 将数据导出到 Excel 工作表

> ID：13798128
> 
> 赞同：0
> 
> 时间：2012-12-10T09:28:27.230
> 
> 标签：c#, selenium-webdriver

我需要在单击按钮时将数据从表导出到 Excel 工作表，并使用 C# 中的 selenium webdriver 读取 Excel 工作表中的数据。

有什么解决办法吗？如果有任何方法，那么请在这里写完整的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T22:12:50.957

Selenium cannot interact with Excel spreadsheets, it is a browser automation tool that can only interact with HTML through a browser.

To manipulate Excel spreadsheets you will need some code that interacts with Excel documents.

# knockout.js - 淘汰赛主详细信息不适用于选择

> ID：13798129
> 
> 赞同：0
> 
> 时间：2012-12-10T09:28:30.890
> 
> 标签：knockout.js

```
here`see my fiddle 
```

[http://jsfiddle.net/kirannandedkar/JUChh/2/](http://jsfiddle.net/kirannandedkar/JUChh/2/)

当我单击名称时，它不会加载选择列表并给出预期功能的错误。实际上我想加载选择并且应该选择值。当我在选择中更改某些内容时，它应该会反映在列表中。目前 ModuleId 没有被填充到列表中，当我点击列表时它没有填充选择列表。

视图模型：

```
var Person = function(id, name, country,ModuleId) {
    var self = this;
    self.id = ko.observable(id);
    self.name = ko.observable(name);
    self.country = ko.observable(country); 
    self.ModuleId= ko.observable(ModuleId);
    return self;
};

var vm = (function() {
    var people = ko.observableArray(),
        selectedPerson = ko.observable();
        self.editModuleId = ko.observable();
        self.modules = ko.observableArray([{"Id": 1,"ModuleName": "M1"},{"Id":2,"ModuleName":"M2"}]);

        getPeople = function() {
            people.push(new Person(1, 'John', 'USA',1));
            people.push(new Person(2, 'Mike', 'UK',1));
            people.push(new Person(3, 'Dan', 'AUS',2));
        },
        selectPerson = function(p){
            selectedPerson(p);
             self.editModuleId(ko.utils.arrayFirst(self.modules(), function (data) {
                    console.log("item module id " + p.ModuleId());
                    return data.Id() === p.ModuleId();
                }));
        };

    getPeople();

    return {
        people: people,
        selectedPerson: selectedPerson,
        selectPerson : selectPerson 
    };
})();

ko.applyBindings(vm); 
```

看法：

```
<ul data-bind="foreach: people">
 <li data-bind="text:name, click:$parent.selectPerson"></li>
<li data-bind="text:$root.editModuleId,click:$parent.selectPerson"></li>

</ul>

<div data-bind="with:selectedPerson">
<span data-bind="text:id"></span>
<input data-bind="value:name"/>
    <input data-bind="value:country"/>
    <select data-bind = "options:$root.modules,value:$root.editModuleId,optionsText:'ModuleName'"/>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:42:20.490

Modules observable 数组包含没有 observables 的简单 js 对象，因此在访问其属性时，您不需要将`()`. 从函数中的 data.Id 中删除它`selectPerson`：

```
selectPerson = function(p){
    selectedPerson(p);
     editModuleId(ko.utils.arrayFirst(modules(), function (data) {
            console.log("item module id " + p.ModuleId());
            return data.Id === p.ModuleId();
        }));
}; 
```

这是工作小提琴：http: [//jsfiddle.net/JUChh/3/](http://jsfiddle.net/JUChh/3/)

我仔细查看了您的代码，发现这`editModuleId`是多余的。您需要`selectedPerson`对象内部的属性 -`ModuleId`并且应该将下拉列表的值绑定到它。

这是重构的小提琴：http: [//jsfiddle.net/JUChh/18/](http://jsfiddle.net/JUChh/18/)

# android - Android：cygwin中的systrace不写入输出文件，加上产生垃圾

> ID：13798132
> 
> 赞同：2
> 
> 时间：2012-12-10T09:28:42.310
> 
> 标签：android, python, adb, trace, systrace

我在使用 python 2.7 的 windows 2003 PC 上由 android Jelly bean SDK 提供的 systrace 工具出现以下错误

在 cygwin 编辑器中执行以下命令

```
python systrace.py --time=10 -o mynewtrace.html

▒GS{▒&amp;▒izAr ▒▒9▒Zww▒▒▒Hj▒▒K▒[X▒▒▒4▒i▒▒D▒▒@▒"▒▒▒]▒lJ▒!▒▒)K▒dKY▒▒:\▒?▒ ▒?w%{D▒g▒?Q&▒wQ▒▒p%'T▒▒oE▒(▒:▒▒k▒▒◄▒▒)▒2▒?▒%▒▒4▒w^▒ ▒~▒▒/▒g▒7?M?▒c▒r#/▒oDE▒tg▒▒N▒▒S'\▒▒▒▒↓▒▒GY▒x▒↓▒2D'↓CN▒{▒f2?pu▒▒?▒▒▒▒(g▒▒9▒f▒&lt;A▒Hz▒+P/▒▒sTU▒b▒?{▒/▒▒▒▒4u_▒▒?▒!0▒▒▒▒1▒▒▒▒@1 ▒▒▒s ▒↓
    Y▒;♥♥▒▒3G▒H     ▒▒&v▒▒:♦▒{▒▒*▒?7▒▒=▒"▒♥▒▒▒▒▒♥▒▒▒&lt;▒:n?♥&lt;i▒▒►    ▒v/▒▒↓▒/♣c▒.▒)#Ou/▒▒O▒▒?▒▒▒%▒A,4+▒x▒▒▒@▒*gfσ▒7▒♣▒▒EtV▒3▒▒▒▒▒r♦▒kQ▒a♦↓▒▒|/:Iy▒{▒◄x8y▒▒▒h▒M▒▒▒G|▒▒"#⌂▒▒gK-▒▒▒'▒▒(▒▒FfN▒▒▒▒▒↑▒▒~4▒⌂▒T?r▒▒▒▒▒▒!▒?▒?▒▒▒▒~CaO▒
ho▒▒L▒H▒9▒▒▒Lh▒▒▒iY▒$4▒d▒▒.C▒▒►@!↓↑▒▒▒▒RQ▒;c▒▒▒?@3▒g▒▒▒▒?G▒y▒▒?Fb▒B=▒▒W|▒%Zc▒▒Q▒UY?♣▒c▒▒$v▒▒▒?▒8▒4v▒h▒▒▒I↑▒`▒Kb▒,▒▒Y▒▒#▒+▒▒▒▒=▒▒▒▒▒▒▒▒

e▒*▒e⌂▒▒"▒P▒!↑▒}▒n♦▒IW      ▒▒▒
▒⌂▒)♠K▒?ln▒D♠:z▒:♥▒xA>▒▒LGX↑▒O▒▒W9Z▒▒p▒8▒xG$?▒▒;▒,▒M▒▒▒▒`▒kH▒▒▒kd9▒4t6▒xQH%o▒▒▒▒▒▒O▒▒▒@▒▒▒x▒3▒▒0◄~▒♦▒▒*#W▒▒▒_▒▒_y▒▒▒04▒▒▒▒P-R2K▒▒▒(?B▒e9▒g▒8M37A4▒▒n▒▒@▒▒m▒I▒.▒=▒3▒c▒▒?▒▒s▒▒▒j▒4e▒▒*E▒Q1N▒▒▒▒▒▒▒qy▒▒▒▒▒▒▒▒▒▒▒▒aN?▒_▒▒▒▒▒28_~▒]e♦▒▒▒▒&amp;g♥v3►p▒p▒`▒J▒/▒X⌂▒{▒▒▒-▒▒▒rI▒%Q▒⌂▒▒q▒▒▒▒?▒▒▒▒/hE▒▒▒?▒▒▒▒▒▒▒7▒6▒W▒j▒▒▒w▒▒O▒▒>▒▒▒▒?▒xy▒▒v▒▒▒⌂?4▒T▒a▒◄▒c▒▒▒O7▒⌂v⌂|▒▒rL▒*▒♠▒▒▒#▒▒▒▒~}▒▒

▒K▒H2▒▒▒^l▒RI▒c^$9S$▒=▒▒BI:▒6cj+▒▒▒@
>▒▒▒&amp;f      ▒▒▒$▒▒◄▒?▒r▒C▒Ze♥↓▒%▒▒&▒@6▒CE▒▒◄+G♣-▒▒]▒ ▒▒[c▒b\▒MBhu▒O▒▒2▒!+y▒▒▒▒lDt▒U▒▒e▒I5▒\▒▒=▒▒▒▒▒▒T▒T▒▒▒♦^▒▒v▒k▒?▒-▒▒*▒)▒9▒t?▒▒cq▒,$▒▒▒

▒▒+▒▒OM▒@▒▒▒=?▒,?d;k▒♥p▒▒sd▒w▒▒▒▒▒I▒▒p▒nk▒▒D▒▒J▒Gh▒AJ▒B
▒t▒?%D▒q▒yUfyb▒?▒▒▒o▒/q*▒▒▒%i▒▒▒▒▒?>▒v▒/▒&gt;_-▒▒~▒▒▒▒cu▒▒▒▒▒/▒▒|▒~▒▒v3▒▒▒_▒v▒~y"▒▒?▒▒▒▒▒▒_?▒▒▒/Oj▒&gt;▒▒▒▒~▒\▒▒▒▒▒▒▒#▒▒t▒▒2Z▒K▒8_▒▒▒J▒*▒▒▒▒^a▒▒▒4W-▒▒▒TAn error occured while capturing the trace.  Output file was not written. 
```

应该为python添加任何环境变量吗？如果是，必须添加哪个变量？谁能帮我解决这个问题？

感谢和问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T03:35:55.617

它在 Cygwin 上不起作用的原因是来自设备的流实际上在每次换行之前都有两个回车符。您可以通过在从 adb.stdout 读取后调用 'print repr(out) 来看到这一点。

您只需按如下方式更新 systrace.py 即可解决此问题：

```
if sys.platform == 'cygwin':
  out = out.replace('\r\r\n', '\n')
else:
  out = out.replace('\r\n', '\n') 
```

[我在https://android-review.googlesource.com/55170](https://android-review.googlesource.com/55170)上发布了一个补丁来解决这个问题。

# c# - 固定大小字节数组

> ID：13798147
> 
> 赞同：2
> 
> 时间：2012-12-10T09:29:29.160
> 
> 标签：c#, .net, c++-cli

```
public : array<Byte>^ Foo(array<Byte>^ data) 
```

获取动态大小的托管数组

但是如何获得固定大小的托管字节数组？

我想强制 C# 用户向我发送 8 字节数组；并取回 8 个字节

风格：

```
public : Byte[8] Foo(Byte[8] data) 
```

**编辑：**

任何人都可以解释为什么它在安全的情况下是不可能的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T09:37:52.547

如果您想*强制*使用8 个字节......请考虑发送`long`or`ulong`代替。老派，但它的工作原理。它还具有不需要对象（a`byte[]`是对象）的优点 - 它是纯值类型（在这种情况下是原始类型）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T09:34:32.000

C# 不允许您这样做。您只需验证数组的长度，如果长度不是 8，则可能会引发异常。

此外，您的函数类型不能是`Byte[8]`; 您必须将其更改为`Byte[]`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T09:35:55.067

您可以在结构内使用[固定大小的缓冲区](http://msdn.microsoft.com/en-us/library/zycewsya.aspx)。不过，您需要将其置于不安全的块中。

```
unsafe struct fixedLengthByteArrayWrapper
{
    public fixed byte byteArray[8];
} 
```

在 C++ 方面，您需要使用`inline_array`来表示这种类型。

正如 Marc 所说，使用固定大小的缓冲区并不有趣。您可能会发现进行运行时长度检查更方便。

# wordpress - 发送希伯来语值参数时找不到 PHP 文件

> ID：13798148
> 
> 赞同：0
> 
> 时间：2012-12-10T09:29:35.667
> 
> 标签：wordpress, character-encoding

我有一个将他的值发送到 ajax php 的表单。当值是希伯来语时，我得到 404 的 php 文件。当值是英文时 - 一切正常。变量是“问题”。这就是看萤火虫时“GET”的样子。希伯来语版本（查看“问题”参数）：

```
http://ilanerez.co.il/wp-content/plugins/wp-faq/wp-faq-ajax.php?cmd=ask&uninumber=74db12&74db12%5Bgroup_id%5D=2&74db12%5Bemail%5D=dsssf%40sdfsd.com&74db12%5Bquestion%5D=%D7%A0%D7%99%D7%A1%D7%99%D7%95%D7%9F 
```

英语和工作“GET”：

```
http://ilanerez.co.il/wp-content/plugins/wp-faq/wp-faq-ajax.php?cmd=ask&uninumber=74db12&74db12%5Bgroup_id%5D=&74db12%5Bemail%5D=sfdss%40sdfs.com&74db12%5Bquestion%5D=sdf 
```

它曾经工作，突然停止工作。我应该在发送表单之前对数据进行编码吗？因为我之后无法对其进行编码，因为我没有得到 php 文件。你有什么主意吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:00:47.473

问题是我激活了一个名为： Better WP Security 的 WordPress 插件。哪个已打开“过滤可疑查询字符串”功能。我禁用了它，它解决了问题。

# java - 休眠更新始终为空

> ID：13798149
> 
> 赞同：0
> 
> 时间：2012-12-10T09:29:38.880
> 
> 标签：java, spring, hibernate

我是hibernate的新手，我有一个名为student的实体类，它有5个字段：姓名、年龄、地址、电话和性别。然后我想更新姓名和年龄字段。

```
student.setName("foo");
student.setAge("11");
getHibernateTemplate().update(student); 
```

运行代码后，除了上面代码中的两个字段外，其他字段值变为空。我希望我的另一个领域保持原样。

任何建议都深表感谢

顺便说一句，对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:31:21.270

首先要更新值，您必须通过主键获取值，然后更新对象（Bean），然后应该调用更新方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:42:40.580

您需要做的是之前从数据库中检索您的学生，以便为所有字段设置一个值：

```
Student student = getHibernateTemplate().get(Student.class, id);
student.setName("foo");
student.setAge("11");
getHibernateTemplate().update(student); 
```

或者，或者，您可以手动更新您的字段：

```
Session session;
boolean newSession=false;
try {
    session=getHibernateTemplate().getSessionFactory().getCurrentSession();
} catch (final HibernateException e) {
    session=getHibernateTemplate().getSessionFactory().openSession();
    newSession=true;
}

session.createQuery(
  "update Student student set " +
  "student.Name = :studentName, " +
  "student.Age = :studentAge " +
  "where student.Id = :studentId")
.setString("studentName", "foo")
.setString("studentAge", "11")
.setString("studentId", id)
.executeUpdate();

if (newSession)
    session.close(); 
```

# javascript - jQuery选择值失败

> ID：13798154
> 
> 赞同：1
> 
> 时间：2012-12-10T09:30:10.010
> 
> 标签：javascript, jquery, html

我对此进行了一些研究，到目前为止所说/建议的一切都没有奏效。

我正在尝试从选择标签中捕获输入，但是没有任何结果，甚至`null`.

编码：

```
 function validateForm()
  {
    var name = $('#txtName').val();
    var email = $('#txtEmail').val();
    var tel = $('#txtTel').val();
    var look = $('#lookingFor').val();
    var goals = $('#goals').val();
    alert(name + " " + email + " " + tel + " " + look + " " + goals);
    return false;
  } 
```

HTML：

```
<select class="fomForm select" style="color:#777;" 
id="lookingFor" name="lookingFor">
<option value="">I'm looking for</option>
<option value="">CYCLING</option>
<option value="">RUNNING</option>
<option value="">TRIATHLONS</option>
<option value="">TRAINING CAMPS</option>
<option value="">PERFORMANCE TESTING</option>
<option value="">DIET &amp; NUTRITION</option>
<option value="">WELLNESS</option>
</select> 
```

我很抱歉提出这个问题，因为互联网上有很多资源，但它们似乎对这个案例没有帮助。姓名、电子邮件等都在警报中正常显示，但选择框却没有。

我在控制台中没有错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:33:42.920

它没有显示，因为您选择的选项中的所有值都是空的。

尝试设置一些值：

```
 <option value="TRIATHLONS">TRIATHLONS</option> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T09:33:53.573

您的选择框选项没有任何价值...因此警报为空

```
<option value="">I'm looking for</option>
<option value="">CYCLING</option> 
```

用你想要的值替换值....

```
<option value="iamlookingfor">I'm looking for</option>
...... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:35:50.027

```
$(function(){$(".fomForm").change(function(){
alert($(".fomForm option:selected").text()); })}); 
```

在这个小提琴中做一个演示：http: [//jsfiddle.net/tAxDv/](http://jsfiddle.net/tAxDv/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T09:35:59.287

Seems like you are missing the `value` for `option`s. They all say `option=""`

Put the value in there, and it should start working with `$('#lookingFor').val()`

If you don't have control on the html, or can't add values for whatever reasons, this should give you the `text` displayed in the `option`

```
$('#lookingFor option:selected').text() 
```

# php - PHP MYSQL 如何在更新时检查记录是否已经存在？

> ID：13798155
> 
> 赞同：1
> 
> 时间：2012-12-10T09:30:09.503
> 
> 标签：php, mysql, sql-update, exists

对于我的员工表，电子邮件是一个唯一字段。当我插入新员工时，我会检查电子邮件是否存在。如果它已经存在，您会收到一条错误消息：

```
 $selectquery ="SELECT * FROM employee WHERE empemail='$empemail'";
    $selectresult=mysql_query($selectquery) or die("query fout " . mysql_error() );
    if(mysql_num_rows($selectresult)==1)
    {
        $errormsgnewemployee = '<p id=notification>The email you entered already exists.</p>';
    } 
```

但是在更新字段时该怎么做呢？因为如果我更新员工数据（不更改他的邮件），它不会让我，因为电子邮件已经存在。我能想到的就是先更新，然后检查是否有 2 条记录，如果有 2 条，则像以前一样更新它。

这是一个好方法还是有更好的解决方案？

*编辑*

我自己的解决方案是更新在表上有 a`unique index`的表并使用查询错误：

```
 if (mysql_error())
            {
                $errormsgnewemployee = '<p id=notification>Update failed. Please check if the email you entered already exists.</p>';
            } 
```

因为，如果不是唯一的唯一字段，为什么用户会有错误？在所有其他情况下，更新都会成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:38:23.453

我建议你使用`INSERT ... ON DUPLICATE UPDATE ...`sql 构造。深入了解[手册](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)。

因此，您的查询可能如下：

```
INSERT INTO employee (email, first_name, last_name, ...) 
VALUES ('employee_email@example.com', 'nik', 'smtih', ...) 
ON DUPLICATE UPDATE 
    first_name = 'nik', 
    last_name = 'smith', 
    ... 
```

请注意，`INSERT`此查询的一部分将由于`UNIQUE KEY`约束而失败，这就是为什么查询的第二部分`ON DUPLICATE UPDATE`, 将被执行并且数据将被更新而不是插入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T09:38:53.127

您可以使用相同的解决方案，您只需要“获取此电子邮件地址，但不是我的”以检查是否有**其他**用户在使用它。

例如。在更新之前，请执行以下操作：

`SELECT 1 FROM employee WHERE empemail = '$empemail' AND id != '$myid';`

应该只返回电子邮件属于其他人的行。

附带说明一下，将变量插入到这样的 SQL 查询中存在潜在的安全问题——你不应该这样做。不推荐使用的 mysql_* 函数应替换为 PDO 或 mysqli 替代品。

# web - 终端 + Plesk + 新目录

> ID：13798156
> 
> 赞同：0
> 
> 时间：2012-12-10T09:30:13.637
> 
> 标签：web, terminal, plesk

我正在尝试将我的新 Web 文件传输到 httpdocs_new 文件夹中。然而，在 plesk 中创建一个新目录似乎几乎是不可能的——当我终于设法找到一种创建新目录的方法时，我的网站崩溃并得到了 500 - Internal Server Error。有没有办法我可以创建一个 httpdocs_new 文件夹，所以一旦我的所有文件都传输到该文件夹​​中，我就可以制作 httpdocs -> httpdocs_old 和新文件夹 httpdocs ？？？

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:29:29.530

只需复制您的原件`httpdocs/`即可`private/httpdocs_old`（以防您只需要备份文件）。现在清理并用新文件替换 httpdocs/ 中的所有文件。

或者，单击您的站点名称并在此处键入新文件夹名称（即`httpdocs_new/`），然后在此处上传所有新文件。

# javascript - 是否有任何标准的 javascript 函数可以将字符串转换为电话号码格式，反之亦然？

> ID：13798157
> 
> 赞同：0
> 
> 时间：2012-12-10T09:30:13.547
> 
> 标签：javascript, function, phone-number

我需要两个函数，一个将字符串转换为电话号码格式，另一个将电话号码转换为字符串。有没有可用的标准 JS 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:31:19.653

不，没有。你必须写一个或找到一个。它可能会使用各种[`String`函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String)和/或[正则表达式](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)的组合。

# touch - IE10上的水平触摸滚动

> ID：13798159
> 
> 赞同：2
> 
> 时间：2012-12-10T09:30:21.140
> 
> 标签：touch, internet-explorer-10, horizontal-scrolling

`-ms-touch-action: pan-y;`我已经通过使用样式关闭了水平滚动。但是，我现在有一个需要水平滚动的子 div。我添加了样式：

```
-ms-touch-action: pan-x; 
```

这很好用，但是它仍然允许 IE10 的默认行为接管，滑回上一页等。有没有办法在阻止浏览器操作的同时获得水平滚动，或者我是否需要使用编写自定义滚动脚本`MSPointer`事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T14:04:34.393

添加

```
-ms-scroll-chaining: none; 
```

到有的元素

```
-ms-touch-action: pan-x; 
```

[http://msdn.microsoft.com/en-us/library/windows/apps/hh466007.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh466007.aspx)

# wordpress - 不同页面的WordPress自定义头文件？

> ID：13798161
> 
> 赞同：2
> 
> 时间：2012-12-10T09:30:29.780
> 
> 标签：wordpress

我想知道是否可以调用不同的标题，例如 get_sidebar('newsidebar')？我可以打电话给 get_header('custom') 吗？我想让索引的标题与所有其他页面不同

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T09:46:02.910

多头

不同页面的不同标题。

```
<?php
if ( is_home() ) :
get_header('home');
elseif ( is_404() ) :
get_header('404');
else :
get_header();
endif;
?> 
```

home 和 404 标头的文件名应分别为 header-home.php 和 header-404.php。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:41:41.523

当然可以，查看代码：http: [//codex.wordpress.org/Function_Reference/get_header](http://codex.wordpress.org/Function_Reference/get_header)

# java - JFilechooser 外观

> ID：13798163
> 
> 赞同：3
> 
> 时间：2012-12-10T09:30:36.620
> 
> 标签：java, macos, swing, look-and-feel, jfilechooser

在我的 Swing 应用程序中，我将 UI 外观设置为：

```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

它在 Windows 上运行良好。在应用程序内部，用户必须使用`JFileChooser`. Windows 上的`JFileChooser`外观又是原生的。但不是在 Mac 上。JFileChooser 面板的屏幕截图：

![在此处输入图像描述](../Images/5d42e52e969c158ec00d06131471dd7f.png)

但相反，我更喜欢这样的东西：（这个取自gmail中的上传选项）

![在此处输入图像描述](../Images/9dadce60ce3a446a841093e8c806ed93.png)

我应该将 UIManager 更改为什么或其他什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:41:06.623

几种替代方法包括：

*   `java.awt.FileDialog`,[在这里](https://stackoverflow.com/a/2914733/230513)说明。

![文件对话框](../Images/be8b7aad05b1f7afd6ccc7278662fc30.png)

*   一个习惯`ChooserUI`，显示[在这里](https://stackoverflow.com/a/3390237/230513)。

![选择器UI](../Images/752678117c079351566de45b69902401.png)

*   完全自定义的实现；[这里](https://codereview.stackexchange.com/q/4446/6692)显示了几个变体。

![图片](../Images/23cdb3ac31746680c2928b202bef1f23.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T10:28:24.677

在 MacOS 上，您可以使用[`FileDialog`](http://docs.oracle.com/javase/7/docs/api/java/awt/FileDialog.html)看起来像您所描述的内容。缺点是它的可配置性要低得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T09:41:57.647

Windows、Linux 和 Mac 的文件选择器实现并非 100% 适合任何操作系统

不幸的是，如果您真的想要这个，您需要寻找 JFileChooser 的替代品，或者您需要编写自己的外观和费用。

Java 难以跟上操作系统的变化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-26T13:00:18.323

在从 Java 6 迁移到 Java 8 时，我遇到了很多麻烦，因为我的 Java 应用程序必须打开一些专有文件包。

FileDialog 仍然提供更好的 LookAndFeel，但将捆绑的文件视为目录。解决此问题的第一个方法是将 FileDialog 设置为选择目录，这仍然允许在文件包内导航，但也允许将包作为一个整体进行选择。

```
System.setProperty("apple.awt.fileDialogForDirectories", "true"); 
```

我对解决方案不太满意，我尝试了其他选项，包括[macOS 的 VAqua LookAndFeel，](https://violetlib.org/vaqua/overview.html)它看起来非常棒，但有时没有显示所有 UI 元素（一些 JTree 在启动时被隐藏，JFileChooser 看起来很棒，但仍然没有t 显示边栏中的网络驱动器）。

最后我发现了一个简单的属性——当设置时——允许像在 Java 6 下一样使用 FileDialog。当然，如果我们想选择文件而不是目录，则必须删除上面的行。

```
System.setProperty("apple.awt.use-file-dialog-packages", "true"); 
```

[在一个关于 Dialog 个性化](http://mirror.informatimago.com/next/developer.apple.com/samplecode/FunWithFileDialogs/FunWithFileDialogs.html)的旧示例项目中找到了这个

# php - 获取数组中索引的名称

> ID：13798166
> 
> 赞同：6
> 
> 时间：2012-12-10T09:30:46.737
> 
> 标签：php

> **可能重复：**
> [获取[可能]关联数组中的第一个键？](https://stackoverflow.com/questions/1028668/get-first-key-in-a-possibly-associative-array)

我有这个数组：

```
Array
(
    ['foobar'] => Array
        (
            [key1] => value1
            [key2] => value2
        )

) 
```

我想获得第一个索引（foobar）的名称。我该怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T09:35:00.490

另一种方式是，

```
$keys = array_keys($array);

echo $keys[0]; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-10T09:33:27.127

假设您没有使用`each()`,`next()`或`prev()`以任何其他方式推进数组指针：

```
key($array); 
```

# django - Django ListView：对所有项目采取时间差

> ID：13798167
> 
> 赞同：2
> 
> 时间：2012-12-10T09:30:49.640
> 
> 标签：django, listview, time, timezone, django-class-based-views

我对基于类的视图相当陌生，所以这可能很明显，但任何提示都值得赞赏。我想为列表中的每个项目显示“剩余时间”。也就是说，如果我有 10 个对象，每个对象都应该在模板中显示截止日期到来之前的天数、小时数、mn。这是我的尝试：

### 模型.py

```
class Law(models.Model):
    deadline = models.DateTimeField(_(u'The Deadline'),)
    name = ..
    more_stuff = .. 
```

### 视图.py

```
class LawList(ListView):
    model = Law
    context_object_name = 'law'
    template_name = 'template.html' 
```

### 模板.html

```
{% for l in law %}
   <h3>{{ l.deadline }} - {{l.name }} </h3>
     {{l.more_stuff}}
{% endfor %} 
```

到这里为止一切顺利。但是我想拥有 `{{l.time-left}}`而不是`{{l.deadline}}`. 视图有没有办法计算这个并将它传递给模板？

我想`get_context_data`在“LawList”视图中添加一个，但我不知道如何为列表中的每个项目添加一个。以下是适用于单个项目的内容。

```
# views.py, below the section above
def get_context_data(self, **kwargs):
     context = super(LawList, self).get_context_data(**kwargs)
     context['time_left'] = Law.objects.all()[0].deadline - timezone.now() 
```

但我有点卡住了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:35:35.207

看看[`timeuntil`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#timeuntil)模板标签

# php - 使用javascript ajax调用php

> ID：13798171
> 
> 赞同：0
> 
> 时间：2012-12-10T09:30:58.143
> 
> 标签：php, javascript, jquery, ajax, call

我正在尝试在 javascript 中使用本地化，其中本地化字符串存储在 php 文件中，get_string() 函数用于获取 php 中的本地化值。我写了一个名为 alertpopup.php 的脚本

```
$alertmessage = $_POST['msg'];

switch($alertmessage)
{
    case '1':
        $alertmessage = get_string('first');
        break;
    case '2':
        $alertmessage = get_string('second');
        break;
    case 'deletecomment':
        $alertmessage = get_string('random');
        break;  
}

echo json_encode(Array('Message' => $alertmessage)); 
```

和一个 javascript 脚本从这个 php 脚本中获取价值：-

```
 var answer;
        $.ajax( {
        type: "POST",
        data: "msg=1",
        url: "alertpopup.php",
        success: function(data) {
        var alertmsg = $.parseJSON(data);

            if (alertmsg.Message != null) {
                answer = confirm(alertmsg.Message);
                document.location.reload();
            }

        }
       });
        if(answer) {
                     something
                }
                else{
                    something else
                } 
```

但是，我不断收到错误：- Uncaught TypeError: Object function (E,F){return new o.fn.init(E,F)} has no method 'parseJSON'

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:34:42.177

您使用的是什么版本的 jQuery？

[API 文档](http://api.jquery.com/jQuery.parseJSON/)说明在`parseJSON`v1.4.1 中添加。确保您没有使用旧版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:41:12.180

因为您在 json 中获得了 ajax 调用的结果...您不需要在那里解析 json...

删除`parseJson()`并尝试

**更新**

```
var answer;
    $.ajax( {
    type: "POST",
    data: "msg=1",
    dataType: "json",   //added
    url: "alertpopup.php",
    success: function(data) {

        if (data.Message != null) {
              if (confirm(data.Message)) {
                   something
               }else{
                   something else  
               }
            document.location.reload();
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:35:51.273

尝试替换以下代码

```
var alertmsg = $.parseJSON(data); 
```

和

```
var alertmsg = jQuery.parseJSON(data); 
```

**编辑：**

或者

上学日方法:)

```
var alertmsg = eval(data); 
```

由于某些安全性或类似的原因，有些人可能不同意这一点，但请尝试一下。

# android - 将图像从四方形加载到画廊适配器

> ID：13798173
> 
> 赞同：0
> 
> 时间：2012-12-10T09:31:01.683
> 
> 标签：android

您好正在创建一个应用程序，该应用程序从 Foursquare 提取资源并将其显示在 android 手机上，并且在加载图像时遇到问题。该应用程序运行但由于某种原因它没有在手机上加载它只显示我定义的加载器图像

我的代码如下：

```
public class PicAdapter extends BaseAdapter {

    //use the default gallery background image
    int defaultItemBackground;

    //gallery context
    private Context galleryContext;

    //array to store bitmaps to display
    private Bitmap[] imageBitmaps;
    //placeholder bitmap for empty spaces in gallery
    Bitmap placeholder;

    //constructor
    public PicAdapter(Context c) {

        //instantiate context
        galleryContext = c;

        //create bitmap array
        //imageBitmaps  = new Bitmap[10];
        //decode the placeholder image
        //placeholder = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);

    }

    //BaseAdapter methods

    //return number of data items i.e. bitmap images
    public int getCount() {
        return PicturesURLlist.size();
    }

    //return item at specified position
    public Object getItem(int position) {
        return position;
    }

    //return item ID at specified position
    public long getItemId(int position) {
        return position;
    }

    //get view specifies layout and display options for each thumbnail in the gallery
    public View getView(int position, View convertView, ViewGroup parent) {

        //create the view
        ImageView imageView = new ImageView(galleryContext);
        //specify the bitmap at this position in the array
        //imageView.setImageBitmap(imageBitmaps[position]);
        ImageLoader imgloader = new ImageLoader(getApplicationContext());

        int loader = R.drawable.ic_launcher;

        HashMap<String, String> song = new HashMap<String, String>();

        song = PicturesURLlist.get(position);
        //Log.d("Links", song.get(picurl));

        imgloader.DisplayImage(song.get(picurl), loader, imageView );
        //imageView.setImageBitmap((imgloader.DisplayImage(song.get(picurl), loader, imageView)));
        //set layout options
        imageView.setLayoutParams(new Gallery.LayoutParams(400, 600));
        //scale type within view area
        imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);
        //set default gallery item background
        imageView.setBackgroundResource(defaultItemBackground);
        //return the view
        return imageView;
    }

    //custom methods for this app

    //helper method to add a bitmap to the gallery when the user chooses one

} 
```

我的 imagloader 类

```
public class ImageLoader {

MemoryCache memoryCache=new MemoryCache();
FileCache fileCache;
private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
ExecutorService executorService; 

public ImageLoader(Context context){
    fileCache=new FileCache(context);
    executorService=Executors.newFixedThreadPool(5);
}

int stub_id = R.drawable.ic_launcher;
public String DisplayImage(String url, int loader, ImageView imageView)
{
    stub_id = loader;
    imageViews.put(imageView, url);
    Bitmap bitmap=memoryCache.get(url);
    Log.d("Image loader succes", url);
    if(bitmap!=null){
        imageView.setImageBitmap(bitmap);
        Log.d("Image loader succes", "true");
    }
    else
    {
        queuePhoto(url, imageView);
        imageView.setImageResource(loader);
        Log.d("Image loader succes", "false");
    }
    return null;
}

private void queuePhoto(String url, ImageView imageView)
{
    PhotoToLoad p=new PhotoToLoad(url, imageView);
    executorService.submit(new PhotosLoader(p));
}

private Bitmap getBitmap(String url)
{
    File f=fileCache.getFile(url);

    //from SD cache
    Bitmap b = decodeFile(f);
    if(b!=null)
        return b;

    //from web
    try {
        Bitmap bitmap=null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        conn.setInstanceFollowRedirects(true);
        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        Utils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Exception ex){
       ex.printStackTrace();
       return null;
    }
}

//decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f){
    try {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=70;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
}

//Task for the queue
private class PhotoToLoad
{
    public String url;
    public ImageView imageView;
    public PhotoToLoad(String u, ImageView i){
        url=u;
        imageView=i;
    }
}

class PhotosLoader implements Runnable {
    PhotoToLoad photoToLoad;
    PhotosLoader(PhotoToLoad photoToLoad){
        this.photoToLoad=photoToLoad;
    }

    public void run() {
        if(imageViewReused(photoToLoad))
            return;
        Bitmap bmp=getBitmap(photoToLoad.url);
        memoryCache.put(photoToLoad.url, bmp);
        if(imageViewReused(photoToLoad))
            return;
        BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
        Activity a=(Activity)photoToLoad.imageView.getContext();
        a.runOnUiThread(bd);
    }
}

boolean imageViewReused(PhotoToLoad photoToLoad){
    String tag=imageViews.get(photoToLoad.imageView);
    if(tag==null || !tag.equals(photoToLoad.url))
        return true;
    return false;
}

//Used to display bitmap in the UI thread
class BitmapDisplayer implements Runnable
{
    Bitmap bitmap;
    PhotoToLoad photoToLoad;
    public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
    public void run()
    {
        if(imageViewReused(photoToLoad))
            return;
        if(bitmap!=null)
            photoToLoad.imageView.setImageBitmap(bitmap);
        else
            photoToLoad.imageView.setImageResource(stub_id);
    }
}

public void clearCache() {
    memoryCache.clear();
    fileCache.clear();
} 
```

}

# java - 我想要java中两个日期之间的区别？

> ID：13798174
> 
> 赞同：2
> 
> 时间：2012-12-10T09:31:03.797
> 
> 标签：java

> **可能重复：**
> [计算两个 Java 日期实例之间的差异](https://stackoverflow.com/questions/1555262/calculating-the-difference-between-two-java-date-instances)
> [如何使用 java 计算两个日期之间的差异](https://stackoverflow.com/questions/3491679/how-to-calculate-difference-between-two-dates-using-java)

我尝试通过使用一些示例来区分两个日期，但我没有得到正确的答案。

```
java.text.DateFormat df = new java.text.SimpleDateFormat("yyyy-mm-dd hh:mm:ss");
 java.util.Date date1 = df.parse("2012-09-14 15:26:14+00");
 java.util.Date date2 = df.parse("2012-08-30 15:26:14+00");
 long diff = Math.abs(date2.getTime() - date1.getTime());
 System.out.println("millisecond="+diff); 
```

我也想要月差，但它没有给我。它给了我不同的天、小时、分钟和秒，但不是月。我做错了什么？请帮我

编辑：

```
java.text.DateFormat df = new java.text.SimpleDateFormat("yyyy-mm-dd hh:mm:ss");
 java.util.Date date1 = df.parse("2012-09-30 15:26:14+00");
 java.util.Date date2 = df.parse("2012-08-30 15:26:14+00");
 long diff = Math.abs(date2.getTime() - date1.getTime());
 System.out.println(date2.getTime()+"date2");
 System.out.println(date1.getTime()+"date1");
 System.out.println("millisecond="+diff);
 diff=diff/1000;
 System.out.println("second="+diff);
 long days=diff/86400;
 days=days%86400;
 long hours=diff/3600;
 hours=hours%3600;
 long min=diff/60;
 min=min%60;
 hours=(hours-(24*days));
 String time=days+":"+hours+":"+min;
 System.out.println(time);
System.out.println("days="+days+":"+"hours="+hours+":"+"minutes"+min); 
```

这就是我想要做的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T09:33:24.440

您可以使用Java 的[Joda](http://joda.sourceforge.net)时间库。用它计算日期之间的时间差异会容易得多。

[time-diff 的示例片段](http://joda-time.sourceforge.net/faq.html#datediff)：

```
Days d = Days.daysBetween(startDate, endDate);
int days = d.getDays(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T09:45:29.380

将其称为 getDuration(date1, date2, Calendar.MONTH);

```
 public static long getDuration(Date returnTime, Date leaveTime, int scale) {
        long durationInMillis = returnTime.getTime() - leaveTime.getTime();
        switch (scale) {
            case Calendar.MINUTE:
                return durationInMillis / ONE_MINUTE_IN_MILLIS;
            case Calendar.MILLISECOND:
                return durationInMillis;
            case Calendar.SECOND:
                return durationInMillis / ONE_SECOND_IN_MILLIS;
            case Calendar.HOUR:
                return durationInMillis / ONE_HOUR_IN_MILLIS;
            case Calendar.DAY_OF_YEAR:
            case Calendar.DATE:
                return durationInMillis / ONE_DAY_IN_MILLIS;
            case Calendar.MONTH:
                return durationInMillis / ONE_MONTH_IN_MILLIS; // 30days per month
        }
        throw new IllegalArgumentException("invalid scale specified");
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T09:33:25.570

[`Date.getTime`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#getTime%28%29)返回*毫秒*，而不是秒。您需要除以 1000 才能获得秒数。

```
long diff = Math.abs(date2.getTime() - date1.getTime()) / 1000; 
```

同样如评论中所述，您的格式字符串不正确。应该是这样的：

```
"yyyy-MM-dd HH:mm:ss" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T11:28:40.010

首先，让我们将 yyyy-mm-dd hh:mm:ss 更改为 yyyy-MM-dd HH:mm:ss。

日期之间的差异只能使用 Calendar 类来计算，下面是我的基于 Calendar 的解决方案，不确定它是否是最好的，但它肯定在做它的工作。它计算填充月份的日期差异，即 2012-09-30 15:26:14+00 - 2012-08-30 15:26:14+00 为 1 个月。但是 2012-09-30 15:26:14+00 - 2012-08-30 15:26:15+00 是 0 个月。请注意，区域设置也很重要，因为结果取决于省光设置。我不会对此发表评论，希望代码中的一切都清楚

```
public static void main(String[] args) throws Exception {
    java.text.DateFormat df = new java.text.SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    java.util.Date date1 = df.parse("2012-09-30 15:26:14+00");
    java.util.Date date2 = df.parse("2012-08-30 15:26:14+00");
    int diff = getMonthDifference(date1, date2);
    System.out.println(diff);
} 
```

.

```
public static int getMonthDifference(java.util.Date date1, java.util.Date date2) {
    if (date1.after(date2)) {
        return getMonthDifference0(date1, date2);
    } else if (date2.after(date1)) {
        return -getMonthDifference0(date2, date1);
    }
    return 0;
} 
```

.

```
private static int getMonthDifference0(java.util.Date date1, java.util.Date date2) {
        Calendar c1 = Calendar.getInstance();
        Calendar c2 = Calendar.getInstance();
        c1.setTime(date1);
        c2.setTime(date2);
        int diff = 0;
        while (c2.getTimeInMillis() < c1.getTimeInMillis()) {
            c2.add(Calendar.MONTH, 1);
            diff++;
        }
        int dd = c2.get(Calendar.DAY_OF_MONTH) - c1.get(Calendar.DAY_OF_MONTH);
        if (dd > 0) {
            diff--;
        } else if (dd == 0) {
            int hd = c2.get(Calendar.HOUR_OF_DAY) - c1.get(Calendar.HOUR_OF_DAY);
            if (hd > 0) {
                diff++;
            } else if (hd == 0) {
                long t1 = c1.getTimeInMillis() % (60 * 1000);
                long t2 = c2.getTimeInMillis() % (60 * 1000);
                if (t2 > t1) {
                    diff--;
                }
            }
        }
        return diff;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T09:33:36.440

你得到的区别是两个日期之间的*毫秒数，而不是秒数。*请注意，您给出的日期之间的差异不是整月。

# ios - 动态创建 iOS 蒙版图像

> ID：13798176
> 
> 赞同：0
> 
> 时间：2012-12-10T09:31:07.597
> 
> 标签：ios, graphics, ios6, masking

我得到了一张我想即时屏蔽的图像。面罩基本呈半圆形，体积不时变化。因此，我需要创建一个内存中的图像，为其绘制蒙版圆圈，然后对原始图像进行蒙版，如[How to Mask an UIImageView](https://stackoverflow.com/questions/5757386/how-to-mask-an-uiimageview)中所述。

问题是我不知道如何创建可用于遮罩的内存图像，并且我可以在.t 上应用基本的绘图操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:27:52.993

如果您的蒙版只是一个半圆形，则使用`CGContext*`调用创建剪切路径并将图像绘制为`CGImage`应用剪切路径可能会更容易。有关详细信息，请参阅[文档`CGContextClip()`](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGContext/Reference/reference.html)。

# python - 装饰一个实例方法并从装饰器中调用它

> ID：13798178
> 
> 赞同：3
> 
> 时间：2012-12-10T09:31:09.827
> 
> 标签：python, decorator, nose, python-decorators

我正在使用鼻子[测试生成器](https://nose.readthedocs.org/en/latest/writing_tests.html#test-generators)功能在不同的上下文中运行相同的测试。由于每个测试都需要以下样板：

```
class TestSample(TestBase):

    def test_sample(self):
        for context in contexts:
            yield self.check_sample, context

    def check_sample(self, context):
        """The real test logic is implemented here"""
        pass 
```

我决定编写以下装饰器：

```
def with_contexts(contexts=None):        
    if contexts is None:
        contexts = ['twitter', 'linkedin', 'facebook']

    def decorator(f):
        @wraps(f)
        def wrapper(self, *args, **kwargs):
            for context in contexts:
                yield f, self, context # The line which causes the error
        return wrapper
    return decorator 
```

装饰器的使用方式如下：

```
class TestSample(TestBase):  

    @with_contexts()
    def test_sample(self, context):
        """The real test logic is implemented here"""
        var1 = self.some_valid_attribute 
```

当测试执行时，会抛出一个错误，指定正在访问的属性不可用。但是，如果我将调用该方法的行更改为以下内容，则它可以正常工作：

```
yield getattr(self, f.__name__), service 
```

我知道上面的代码片段创建了一个绑定方法，其中第一个**self**被手动传递给函数。但是，据我的理解，第一个片段也应该可以正常工作。如果有人能澄清这个问题，我将不胜感激。

问题的标题通常**与在装饰器中调用实例方法有关，**但我保留了特定于我的上下文的描述。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:35:08.127

您可以使用`functools.partial`将包装的函数绑定到`self`，就像方法一样：

```
from functools import partial

def decorator(f):
    @wraps(f)
    def wrapper(self, *args, **kwargs):        
        for context in contexts:
            yield partial(f, self), context
    return wrapper 
```

现在您正在生成部分，当调用 as 时`yieldedvalue(context)`，将调用`f(self, context)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:02:52.120

据我所知，有些东西不适合。首先，你的装饰器就像

```
def with_contexts(contexts=None):        
    if contexts is None:
        contexts = ['twitter', 'linkedin', 'facebook']

    def decorator(f):
        @wraps(f)
        def wrapper(self, *args, **kwargs):
            for context in contexts:
                yield f, self, context # The line which causes the error
        return wrapper
    return decorator 
```

但你像使用它一样

```
@with_contexts
def test_sample(self, context):
    """The real test logic is implemented here"""
    var1 = self.some_valid_attribute 
```

这是错误的： this 调用`with_context(test_sample)`，但你需要`with_context()(test_sample)`. 也一样

```
@with_contexts()
def test_sample(self, context):
    """The real test logic is implemented here"""
    var1 = self.some_valid_attribute 
```

即使你不提供`contexts`论据。

其次，你修饰了错误的函数：你的用法表明该函数为每个上下文`test`生成函数。`check`你要包装的函数完成了检查函数的工作，但你必须在测试函数之后命名它。

应用`self`到一个方法可以用`partial`Martijn 写的，但它也可以用 Python 在后台的方式来完成：

```
method.__get__(self, None) 
```

或者更好

```
method.__get__(self, type(self)) 
```

你可以达到同样的效果。（也许你的原始版本也可以，产生要调用的函数和要使用的参数。我不清楚这是它的工作方式。）

# ios - 英语国家的 URL 本地化 - iOS

> ID：13798180
> 
> 赞同：0
> 
> 时间：2012-12-10T09:31:16.057
> 
> 标签：ios, localization, locale

那么问题来了...

我的应用程序将有一个从全球在线零售商处购买产品的链接，但在英国它将来自“shop.co.uk”，在美国“shop.com”，澳大利亚“shop.oz.au”， ETC

我如何将语言环境设置为位置而不是语言，因为它们都是英语国家？

提前谢谢了

抢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:36:55.253

使用此代码，您可以从当前语言环境中获取国家/地区，然后您可以选择正确的 URL

```
NSLocale *currentLocale = [NSLocale currentLocale];
NSString *countryCode = [currentLocale objectForKey:NSLocaleCountryCode]; 
```

# mysql - 使用 phpmyadmin 查询永远不会返回

> ID：13798183
> 
> 赞同：0
> 
> 时间：2012-12-10T09:31:21.783
> 
> 标签：mysql, sql, phpmyadmin

当我在本地尝试以下操作时没有结果也没有错误：

```
 select
  a,
  bunch,
  of,
  fields
    from import where id in (
        SELECT distinct t1.id
        FROM import t1 inner join import t2 
        on t1.programid = t2.programid and t1.sku = t2.sku 
        where t1.lastupdated < t2.lastupdated   
    ) 
```

此查询是复制旧记录以存档的查询的一部分，这是获取需要移动的数据的部分。

当我在 cpanel 的 phpmydmin 中运行整个过程时，什么也没有发生，没有错误，也没有记录被复制，当我运行只获取数据的状态时，没有任何返回，页面只是停留在加载中，仅此而已。

有超过一百万条记录，需要存档 2/3，我必须使用具有 phpmyadmin 的 cpanel，但认为它不适合运行这样的查询。当与“插入”结合使用时，上述语句将 phpmyadmin 会话锁定 2 小时，但不会复制任何记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:59:35.180

我已经让 phpmyadmin 对它的某些版本的子选择查询执行此操作。

但是试试这个 SQL，它应该做同样的事情，但可能更有效。

```
SELECT a, bunch, of, fields
    FROM import 
    INNER JOIN (SELECT distinct t1.id
        FROM import t1 inner join import t2 
        on t1.programid = t2.programid and t1.sku = t2.sku 
        where t1.lastupdated < t2.lastupdated ) Sub1
    ON import.id = Sub1.id 
```

编辑添加以下代码以检索每个 programid / sku 没有最新 lastupdated 的记录

```
SELECT a, bunch, of, fields
FROM import 
LEFT OUTER JOIN (SELECT programid, sku, MAX(lastupdated) AS lastupdated FROM import GROUP BY programid, sku) Sub1
ON import.programid = Sub1.programid AND import.sku = Sub1.sku AND import.lastupdated = Sub1.lastupdated
WHERE Sub1.programid IS NULL 
```

# html - Lighttpd url.rewrite-once for html static 失败->指定的控制器无效

> ID：13798186
> 
> 赞同：1
> 
> 时间：2012-12-10T09:31:22.370
> 
> 标签：html, url-rewriting, rewrite, lighttpd

我在 php 中使用 lighthtpd。使用 Zend 框架。

我放了一个只有 HTML 代码的简单页面 test.html。当我尝试查看它时，我收到一个错误：

**指定的控制器无效（test.html）：/test.html**

```
<!--                                                                                                                                                                                                                                                                                                                          
To change this template, choose Tools | Templates                                                                                                                                                                                                                                                                             
and open the template in the editor.                                                                                                                                                                                                                                                                                          
-->
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
    <div>TODO write content</div>
</body>
</html> 
```

在我的conf（不是htaccess）

```
url.rewrite-once = (
  ".*\?(.*)$" => "/index.php?$1",
  ".*\.(js|ico|gif|jpg|png|css)$" => "$0",
  "" => "/index.php"
) 
```

我迷路了。尝试几个选项，但不明白问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T08:14:35.747

出色地。

为提问道歉。

简单的。

```
url.rewrite-once = (".*\?(.*)$" => "/index.php?$1",".*\.(js|ico|gif|jpg|png|css)$" => "$0","" => "/index.php") 
```

变成

```
url.rewrite-once = (".*\?(.*)$" => "/index.php?$1",".*\(js|ico|gif|jpg|png|css|html)$" => "$0","" => "/index.php") 
```

# scala - 如何使用 SBT 只运行一个 Spec2 规范？

> ID：13798193
> 
> 赞同：16
> 
> 时间：2012-12-10T09:31:44.467
> 
> 标签：scala, specs2

如果您在 SBT 项目中定义了 2 个测试：

```
class Spec1 extends Specification {
  def is =
    "Tests for specification 1" ^
      p ^
      "Test case 1" ! todo ^
      end
} 
```

和

```
class Spec2 extends Specification {
  def is =
    "Tests for specification 2" ^
      p ^
      "Test case 2" ! todo ^
      end
} 
```

然后`test`从 SBT 内部运行将执行这两个测试。只运行其中一个测试的最简单方法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-10T09:49:54.217

使用`test-only`sbt 命令。

```
sbt> test-only com.example.MySpec 
```

您甚至可以使用通配符来运行一系列测试。请参阅[如何执行仅匹配正则表达式的测试？](https://stackoverflow.com/questions/6997730/in-sbt-can-i-run-only-tests-that-match-a-regular-expression)

# vb.net - 我如何从字符串中获取选定的部分？

> ID：13798194
> 
> 赞同：-3
> 
> 时间：2012-12-10T09:31:43.150
> 
> 标签：vb.net

我如何得到字符串

> 'EJ0004','EK0001','EA0001'

像字符串一样

> {Emaster.Emp_Code}='EJ0004' 或 {Emaster.Emp_Code}='EK0001' 或 {Emaster.Emp_Code}='EA0001'

在 VB.NET 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:05:32.230

您可以使用[正则表达式](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex%28v=vs.80%29.aspx)。

* * *

**例子：**

```
Sub Main
    Dim s = "{Emaster.Emp_Code}='EJ0004' OR {Emaster.Emp_Code}='EK0001' OR {Emaster.Emp_Code}='EA0001'"
    Dim pattern = "('\w*')"
    Dim matches = Regex.Matches(s, pattern)
    Dim values  = matches.OfType(Of Match).Select(Function(m) m.Value)

    For Each v in values
        Console.WriteLine(v)
    Next

    Console.WriteLine(String.Join(",", values))
End Sub 
```

**输出：**

> 'EJ0004'
> 'EK0001'
> 'EA0001'
> 'EJ0004','EK0001','EA0001'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:06:45.493

有很多方法可以做到这一点，这里我提供一种简单的方法：

```
dim yourString as string = 'This is the variable which holds your initial string
dim newString as string = yourString.replace("{Emaster.Emp_Code}=", "").replace(" OR ",",") 
```

现在 newString 将持有 'EA0001' 或其他任何东西。如果你想要它没有''然后做

```
dim newString as string = yourString.replace("{Emaster.Emp_Code}=", "").replace("'","").replace(" OR ",",") 
```

# django - django：表单 - 覆盖时间输入小部件

> ID：13798196
> 
> 赞同：3
> 
> 时间：2012-12-10T09:31:47.197
> 
> 标签：django, forms, widget

我覆盖了时间输入小部件，但是当我提交该表单时，会显示“输入有效时间”

```
class TimePickerWidget(forms.TimeInput):                                                  
def render(self, name, value, attrs=None):                                                
    htmlString = u''                                                                      
    htmlString += u'<select name="%s">' % (name)                                          
    for i in range(12):                                                                   
            htmlString += ('<option value="%d:00 AM">%d:00 AM</option>' % (i,i))          
    htmlString +='</select>'                                                              
    return mark_safe(u''.join(htmlString)) 
```

如您所见，它使时间选择的下拉框。在形式上，它被称为

```
class JobForm (ModelForm):
   fromHour = forms.TimeField(widget=TimePickerWidget(format='%I:%M %p'))
   toHour = forms.TimeField(widget=TimePickerWidget(format='%I:%M %p')) 
```

我有两个问题。

1）当我提交时，会显示“输入有效时间”。我该如何解决这个问题？

2) 有没有办法将 format='%I:%M %p' 格式封装到 TimePicketWidget？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:38:06.037

将`input_format`参数设置为[TimeField](https://docs.djangoproject.com/en/1.4/ref/forms/fields/#timefield)，即：

```
fromHour = forms.TimeField(input_format='%I:%M %p', widget=TimePickerWidget(format='%I:%M %p')) 
```

# android - 在 .apk 中打包数据并在安装时解包

> ID：13798200
> 
> 赞同：3
> 
> 时间：2012-12-10T09:32:07.253
> 
> 标签：android, offline, osmdroid

我正在android上开发应用程序，它必须有离线地图。我正在使用 OSMDroid 并使用 MOBAC 创建了图集。一切正常，但我不知道如何在安装过程中解压图集。你能建议我如何在 .apk 中打包所有图块并在安装到 sdcard 上解压它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:55:10.577

将它们包含在您的 res/raw 文件夹中。在运行时，您可以使用

```
InputStream stream = context.getAssets().open("filename"); 
```

并将其保存到 SD 卡。

# vb.net - Vb.net - 处理从 SQL 命令对象返回的空值或无值

> ID：13798202
> 
> 赞同：2
> 
> 时间：2012-12-10T09:32:13.727
> 
> 标签：vb.net

我们得到了这个 sql 查询：

```
Select EmployeeDesignation from Employee where EmployeeName = Paramater1 
```

（Parameter1 是传给 this 的值）

我们使用这个语句：lEmployeeDesignation = _SQLCommand.ExecuteScalar()

3个场景：

1.  返回员工名称（表中存在记录）
2.  没有在数据库中为 Parameter1 设置值 - 所以应该返回 NULL（记录存在但没有值）
3.  不存在员工记录，因此不返回任何内容（记录不存在）

我在 2 和 3 场景中苦苦挣扎——在场景 3 的情况下，我们希望应用程序失败，但在努力如何捕获这个错误。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:41:57.553

```
lEmployeeDesignation = _SQLCommand.ExecuteScalar()
if lEmployeeDesignation IsNot Nothing AndAlso lEmployeeDesignation <> DBNull.Value then
    ' you have found your data....' 
Else
    if lEmployeeDesignation = DBNull.Value then
       ' you have a record for parameter1 but EmployeeDesignation field is null'
    End If
End If 
```

请注意使用 AndAlso 来缩短评估过程。如果第一个条件为假，则不评估第二个条件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:45:35.307

您可以通过...完全消除 Null

```
Select IsNull(Max(EmployeeDesignation),0) from Employee where EmployeeName = Paramater1 
```

这不是一件非常好的事情，但它确实有效，只要你不做太多就可以了。

您也可以输入 Count(EmployeeDesignation)=0 来检查场景 3，当然这不能在同一个查询上完成，或者您必须使用阅读器

# google-chrome - 用于触发 Google Chrome 语音搜索键盘快捷键的 OSX 脚本

> ID：13798203
> 
> 赞同：4
> 
> 时间：2012-12-10T09:32:13.793
> 
> 标签：google-chrome, applescript, google-search

在 Google Chrome 浏览器（在 Mac 上）中，您可以通过在 htttp://google.com 中按 Command+Shift+Period 来激活 Google 语音搜索。

假设 url [http://google.com](http://google.com)加载在 chrome 选项卡中，搜索框处于焦点位置，下面的 applescript 不应该工作吗？

```
tell application "Google Chrome"
    activate
    tell application "System Events" to keystroke "." using {command down, shift down}
end tell 
```

由于某种原因它不起作用，我不明白为什么，因为以下脚本将按预期用文本填充搜索字段：

```
tell application "Google Chrome"
    activate
    tell application "System Events" to keystroke "this test works as expected"
end tell 
```

如何使用脚本触发谷歌语音搜索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T22:03:33.150

尝试：

```
tell application "Google Chrome" to activate
tell application "System Events"
    key code 47 using {command down, shift down}
end tell
delay 3 
```

# xml - XML - 架构：元素引用本身

> ID：13798204
> 
> 赞同：0
> 
> 时间：2012-12-10T09:32:15.747
> 
> 标签：xml, eclipse, schema

这是一个 xml 架构：

```
<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.example.org/TEST"
xmlns:tns="http://www.example.org/TEST" elementFormDefault="qualified">
<element name="test1">
    <complexType>
        <sequence>
            <element ref="tns:test1" maxOccurs="1" minOccurs="1"/>
        </sequence>
    </complexType>
</element> 
```

但是当试图通过GUI删除这个元素时，会导致无限循环浪费所有可用的堆并出现stackoverflow异常。

这是一个有效的模式？？但是验证是可以使用的。

# android - 用于 Eclipse android 的 QR 码应用程序的 Google Image API

> ID：13798208
> 
> 赞同：-3
> 
> 时间：2012-12-10T09:32:46.787
> 
> 标签：android, android-intent, qr-code, zxing, google-visualization

听说我正在从事 qrcode 生成应用程序开发，我是 EAndroid 应用程序开发的新手所以任何人都可以建议我如何使用 google image chart API 将其集成到 eclipse android 项目中并用于 QR 码生成，如果还有其他选择的话也建议我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:42:32.153

如果您正在查看“扫描”二维码，那么您应该尝试使用 zxing 库。如果它给你带来麻烦，有很多关于 SO 的 Q&A 可以帮助你，你也可以参考这个[博客](http://mcondev.wordpress.com/category/zxing/)。

在 SO 上搜索 zxing 还有[zxing home](http://code.google.com/p/zxing/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T12:58:52.337

Follow the Intent-based integration described here: [http://code.google.com/p/zxing/wiki/ScanningViaIntent](http://code.google.com/p/zxing/wiki/ScanningViaIntent)

Although the page mostly refers to scanning and decoding, the `IntentIntegrator` class actually has a method for encoding data too by Intent.

You don't even need the Google Chart API. But if you do want to use it, there's nothing much to know except that you would display the image that it generates in a `WebView`. That's it.

# javascript - 另一个脚本启动后 Javascript 失败

> ID：13798213
> 
> 赞同：0
> 
> 时间：2012-12-10T09:33:12.797
> 
> 标签：javascript, jquery, html

我正在制作一个使用 Javascript 排序器的网站。除了排序器，我还添加了一些自定义的 javascript，以使某些 div 可点击。我的理由是使用该属性无法完成我们希望它做的所有事情，所以我坚持使用 div，并使用 javascript 来使它们发挥作用。

看看这里 -- [http://www.opohills.com/taipei-rentals.php](http://www.opohills.com/taipei-rentals.php)

您可以向下滚动到您看到搜索栏的位置，然后单击其中一间公寓。当您返回单击（1 间卧室）时，您会发现单击公寓不再起作用。

我完全不知道该怎么做。可点击性的 javascript 位于页面底部。

您对此有何看法？

这是我的javascript

```
 <script type='text/javascript'>
    $(".box_1").click(function(){
         window.location=$(this).find("a").attr("href"); 
         return false;
    });
     $(".box_2").click(function(){
         window.location=$(this).find("a").attr("href"); 
         return false;
    });
         $(".box_3").click(function(){
         window.location=$(this).find("a").attr("href"); 
         return false;
    }); 
    $(".apt2").click(function(){
         window.location=$(this).find("a").attr("href"); 
         return false;
    });   
  </script> 
```

想法？

**更新**

根据建议，我通过将 javascript 移动到 jquery.quicksand 上方的可点击性来更新代码，并且仅在文档准备好后才启动它。

即使进行了这些更改，我仍然无法使其正常工作。

该网站的最新版本可以在这里看到---

[http://www.opohills.com/taipei-rentals.php](http://www.opohills.com/taipei-rentals.php)

非常感谢您的想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:56:26.913

该脚本基本上对我有用（并且应该对你有用）。您的问题可能是有时您的 dom 还没有准备好：

```
$(document).ready(function() {
  // your code here
}); 
```

还有2件事。

1.) 添加“光标：指针；” 到您的可点击框的CSS（可用性）

2.）只需触发您的链接点击：

```
$(".apt2").click(function(){
  $(this).find("a").trigger('click');
  return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:04:33.417

当我在您的网站上使用内置调试器的 chorme 时，如果我在您的“li”标签上创建像 ID 这样的自定义字段，它们会在过滤后被删除。我认为流沙在页面加载期间创建了一个缓存。您仅在流沙库初始化后才创建 .click() 事件，并且这些单击事件可能会被删除，因为流沙替换了您的 li 标签。

尝试初始化您的点击

```
$(function() {
  $("#ourHolder li").click(function() { window.location.href=$(this).find('a').attr('href')});
}); 
```

您应该在 ul 标签中添加一个 id="ourHolder" 以优化脚本速度。

并且只有在这个初始化之后才开始你的流沙对象初始化。移动你的

```
<script src="js/jquery.quicksand.js"></script>
<script src="js/sorter-settings.js"></script> 
```

在之前的点击功能之后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T10:18:13.987

因此，您可以尝试编辑我们的文件 sorter-settings.js 并用此代码替换（基于此处提供的文档（[http://razorjack.net/quicksand/docs-and-demos.html](http://razorjack.net/quicksand/docs-and-demos.html "文档页面")）：

```
 $(document).ready(function() {

  // get the action filter option item on page load
  var $filterType = $('#filterOptions li.active a').attr('class');

  // get and assign the ourHolder element to the
    // $holder varible for use later
  var $holder = $('ul#ourHolder');

  // clone all items within the pre-assigned $holder element
  var $data = $holder.clone();

  // attempt to call Quicksand when a filter option
    // item is clicked
    $('#filterOptions li a').click(function(e) {
        // reset the active class on all the buttons
        $('#filterOptions li').removeClass('active');

        // assign the class of the clicked filter option
        // element to our $filterType variable
        var $filterType = $(this).attr('class');
        $(this).parent().addClass('active');

        if ($filterType == 'all') {
            // assign all li items to the $filteredData var when
            // the 'All' filter option is clicked
            var $filteredData = $data.find('li');
        } 
        else {
            // find all li elements that have our required $filterType
            // values for the data-type element
            var $filteredData = $data.find('li[data-type=' + $filterType + ']');
        }

        // call quicksand and assign transition parameters
        $holder.quicksand($filteredData, {
            duration: 800,
            easing: 'easeInOutQuad',
                    enhancement: function() {
                        $("#ourHolder li").click(function() { window.location.href=$(this).find('a').attr('href')});
                        }
        }
            );
        return false;
    });
}); 
```

Additinaly，我认为这段代码对你的 html 内容没用。

```
 <!--Begin Sorter-->
    <script type='text/javascript'>
    $(document).ready(function() {
          $('#source').quicksand( $('#destination li') );
     });
  </script> 
```

# windows - 我可以将 windbg 用作 Windows 服务的事后调试器吗？

> ID：13798220
> 
> 赞同：1
> 
> 时间：2012-12-10T09:33:38.733
> 
> 标签：windows, windows-services, windbg, postmortem-debugging

我将 Windbg 设置为默认的事后调试器。我通过运行来做到这一点`windbg -I`。但是，这似乎只能从我登录的用户运行的应用程序中捕获未处理的异常，而不是 Windows 服务。有谁知道我如何配置windbg来捕捉这些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T13:54:23.297

如果您计划从执行开始调试服务应用程序，包括其初始化代码，则需要此准备步骤。 [http://msdn.microsoft.com/en-us/library/windows/hardware/ff553427(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553427(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T22:23:38.887

当 WinDbg 作为事后调试器运行时，它由崩溃的进程启动。在服务的情况下，它由在会话 0 中运行的进程启动，并且无法访问桌面。

您可以配置 AeDebug 注册表以启动创建故障转储的进程并调试故障转储。您可以使用 ntsd -server 并连接到服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T13:38:29.677

您应该能够使用 WinDbg 附加或启动任何服务，即使那些不是由用户运行的服务：http: [//support.microsoft.com/kb/824344](http://support.microsoft.com/kb/824344)

# css - CSS悬停嵌套类传播

> ID：13798224
> 
> 赞同：5
> 
> 时间：2012-12-10T09:33:50.170
> 
> 标签：css, hover, nested, propagation

我知道这是一个经典的，但我在网上找不到答案：

我有这个 html 代码：

```
<div class="comment>
  <div class="myLinks">Some Links</div>
  <div class="comment">
    <div class="myLinks">Some Links</div>
  </div>
</div> 
```

然后我有这个css（用scss编写）：

```
.myLinks {
  display: hidden;
}

.comment {
  &:hover {
    .myLinks {
      display: visible;
    }
  }
} 
```

当指针移到第一个注释块上方时，嵌套的悬停效果也被激活。我想要的是我的链接仅在悬停的评论中可见，而不是在他的父母或孩子中。

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-10T09:45:18.910

```
.myLinks{
  display:none;
}

.comment:hover > .myLinks {
  display: block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:44:09.343

习惯了这个css

```
.myLinks{
display:none;
}

.comment:hover .myLinks{
display:block;
} 
```

***[演示](http://jsfiddle.net/mNaVY/1/)***

**或者**

## --------

```
.myLinks{
    visibility:hidden;
    }

    .comment:hover .myLinks{
    visibility: visible;
    } 
```

***[演示2](http://jsfiddle.net/mNaVY/2/)***

# perl - 从系统调用中过滤掉警告

> ID：13798225
> 
> 赞同：0
> 
> 时间：2012-12-10T09:33:52.083
> 
> 标签：perl

我的脚本运行这个命令，它总是给出三个警告。有没有办法过滤掉这些？

```
my $output = `cleartool mktag -view -tag test -reg win_region -host view_server1 -gpath \\\\view_server\\view_directory1\\test.vws/viewstore/view_directory1/test.vws\` 
```

警告看起来像这样：

```
cleartool: warning: The global pathname "blabla" in the non-default region will not be validated
cleartool: warning: Unable to access "blabla": No such file or directory
cleartool: warning: Storage pathname "blabla" may not reside on host 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:36:09.160

假设外部工具写入`STDERR`您可以告诉外壳程序将其重定向到其他地方。通常的方法是`2> /dev/null`通过反引号附加到您正在运行的命令。

如果您需要其他警告和错误，请通过重定向捕获`STDERR`到临时文件（请参阅[File::Temp](https://metacpan.org/module/File%3a%3aTemp)了解如何安全地生成临时文件）`2> $temp_file_name`，使用 Perl 读取该文件（请参阅[File::Slurp](https://metacpan.org/module/File%3a%3aSlurp)或[IO::All](https://metacpan.org/module/IO%3a%3aAll)以便于- 使用一个内衬来读取像`my @captured_stderr = read_file($temporary_file_name);`) 这样的文件，用 Perl 的函数将不需要的行扔掉，然后用)`grep`将剩余的行输出回。`STDERR``print STDERR @captured_stderr`

# facebook-c#-sdk - 使用 Facebook C# SDK 5.4.1.0 检索好友列表后访问令牌为空

> ID：13798230
> 
> 赞同：1
> 
> 时间：2012-12-10T09:34:16.370
> 
> 标签：facebook-c#-sdk

我是 Facebook C# SDK 的新手，我正在使用 Facebook C# SDK 5.4.1.0 维护现有的 FB 应用程序。在最近的 FB 更新之前，此应用程序运行良好。我知道我应该更新我的 SDK，但我需要先找到一个临时解决方案，然后才能花时间将 SDK 升级到 v6。

我面临的问题是 FacebookWebContext.Current 中的访问令牌在应用程序使用 fbquery 执行好友列表查询后变为 NULL。这对于通常的视图来说很好，因为授权过程会将用户重定向到页面以刷新令牌。

在我的情况下，我正在使用 HttpPost 和 CustomAuthorize 属性向 MVC 函数执行 AJAX 发布。当访问令牌为空时，OnAuthorization 将返回一个带有 URL 的 HTML 字符串。我尝试将用户重定向到该 URL，但该 URL 最终不会执行发布，因为用于处理它的数据已丢失。

所以我的问题是，有没有其他方法可以在不执行重定向的情况下重置访问令牌？在我可以花一些时间升级 SDK 的同时，是否有任何其他临时解决方案可以使应用程序正常工作？

# php - PHP 将未知/未定义的变量转储到文件

> ID：13798234
> 
> 赞同：1
> 
> 时间：2012-12-10T09:34:29.000
> 
> 标签：php

我有以下 HTTP 数据：

```
POST /forum/post.php HTTP/1.1
Accept: text/xml, text/html, text/plain, */*
Host: myhost.com
Content-Length: 752
Cache-Control: no-cache

LxINAXyIgvOZQBF28yt0/NYmrYy7/dWENDNdFybIqYSWxLS6Ystk1pHfFDEBOJPgfJMWPQwqojMTvLugMOD7ZeXm33WYxFnjhR8C+Q8es49bGp8GiBmU7o3VYvJYKHSsknRXoB9tp9hhnzBJ4RMOhLbIIk5i6QwR8sFHxqUsL+i/8mKJDAcDsXXZcJXlXqhRN7fCDqLb/vTmnSTm+qA2HWU1AsBAGpWoQycRr0BT62lI2H3WnKevGi7fePJdCKWmwp5yoztKYCI3QJKrJbt5f60zb8TR5JHEs2S8ne0e6mssV7N4A3rwE+/O08pfHAmsVVtotpdqkPHWEWr+S7te9r01grfJt6GY0ozH0BPqSkP98wUwlrD385sRzf8M8uOw3hI1DWliZl0ea2Dc4b/7zVfwsqHl94Hk5x2p6nzXaW0vEsAVrodNIIcv3ZGGEkk97BOsHXP1rvJNiQLuM/7D3X9WFX/cYYqnNrIW84rhtbhty04r6JH37G9hPDlHjiYAogQ0lpMubsTNaW35Gn9G7X/qaH4+uQtYDVt67graNB3dDEBQRfXHw/sOM57hlxU/o/Q52RgAcekhGABXsLtXH3Sd5rurYg+qjMtceK9hC37ylXOJ+0bTKVf/A8nLlMarTtGhQK+oG8Rx8juy/USlCvg4++dCXS3qr0pFC9u2tcLAgND0g3tcBN1kYw2Ca4TTxP5m932pBTict7PE0jAXITmOoV3MGFE9AsKMJAVUdRK0sg== 
```

如何捕获 BASE64 数据并将其写入文件，我试图转储 $_POST 变量但我什么也没得到，尝试使用 $_REQUEST 或 serialize($_REQUEST) ，我得到的是：

```
Array
(
) 
```

如何捕获未定义的帖子数据？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:39:12.487

它可以在以下位置找到`$HTTP_RAW_POST_DATA`：

```
echo $HTTP_RAW_POST_DATA; 
```

或者：

```
echo file_get_contents("php://input"); 
```

[手动](http://php.net/manual/en/reserved.variables.httprawpostdata.php)。

然后，您可以使用[`file_put_contents()`](http://uk3.php.net/manual/en/function.file-put-contents.php)或任何其他写入文件的方法将其写入文件。

# jsf-2 - java.lang.IllegalStateException: 组件 ID vedh51d2-retrieve-update 已在视图中找到

> ID：13798242
> 
> 赞同：0
> 
> 时间：2012-12-10T09:35:00.693
> 
> 标签：jsf-2, icefaces-3

我已经查看了我的页面是否有重复的 ID，并且还进行了清理和构建，但我仍然遇到相同的错误：

```
java.lang.IllegalStateException: Component ID vrtrjrp2-retrieve-update has already been found in the view.  
    com.sun.faces.util.Util.checkIdUniqueness(Util.java:846)
    com.sun.faces.util.Util.checkIdUniqueness(Util.java:830)
    com.sun.faces.application.view.StateManagementStrategyImpl.saveView(StateManagementStrategyImpl.java:144)
    com.sun.faces.application.StateManagerImpl.saveView(StateManagerImpl.java:133)
    org.springframework.faces.webflow.FlowViewStateManager.saveView(FlowViewStateManager.java:167)
    com.sun.faces.application.view.WriteBehindStateWriter.flushToWriter(WriteBehindStateWriter.java:225)
    com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:419)
    com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
    com.ocpsoft.pretty.faces.application.PrettyViewHandler.renderView(PrettyViewHandler.java:163)
    org.springframework.faces.webflow.FlowViewHandler.renderView(FlowViewHandler.java:99)
    com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:118)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:99)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:57)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
    com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:110)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:112)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

这是我的看法：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ice="http://www.icesoft.com/icefaces/component"
    xmlns:pretty="http://ocpsoft.com/prettyfaces" 
    xmlns:sec="http://www.springframework.org/security/tags"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:c="http://java.sun.com/jsp/jstl/core">    
    <h:head>
        <title>Welcome</title>
    </h:head>
    <h:body>
        <f:loadBundle basename="ValidationMessages" var="validation" />
        <br />
        <div style="height: 380px; left: 408px; margin: auto;absolute; width: 570px; -rave-layout: grid;background: url('resources/images/LoginImage.png') repeat scroll 0 0 transparent">
            <form action="#{request.contextPath}/j_spring_security_check" method="post">
                <c:if test="#{param.error != null}">
                    <div style="color: red;position: relative; left: 148px; top: 300px; width: 270px" >
                        Wrong Username/Password, try again.
                    </div>
                </c:if>
                <h:outputLabel for="j_username" id="outputLabel1" style="left: 48px; top: 120px; position: absolute" value=""/>
                <h:outputLabel for="j_password" id="outputLabel2" style="left: 48px; top: 168px; position: absolute" value=""/>
                <h:inputText id="j_username" required="true" style="background:#cacaca;width: 237px; position: relative; left: 149px; top: 163px;" />
                <h:inputSecret id="j_password" required="true"  style="background:#cacaca; width: 237px; position: relative; right: 92px; top: 239px;"/>
                <h:commandButton id="loginBtn" style=" position: relative; top: 305px; right: 333px;" value="Login" image="/resources/images/Login.png"/>
                <h:commandButton id="resetBtn" style=" position: relative; top: 272px; left: 324px;" type="reset" value="reset" image="/resources/images/cancel.png"/>
                <h:outputText id="errorMessage" style="left:0px;top:300px;position:absolute"/>
                <h:message errorClass="errorMessage"  for="j_username" fatalClass="fatalMessage" id="messages1" infoClass="infoMessage" showSummary="false"
                    style="height: 43px; left: 24px; top: 288px; position: absolute; width: 523px;color:red;" warnClass="warnMessage"/>
            </form>
        </div>  
    </h:body>        
</html> 
```

# android - Android：滑动时在 imageview 中加载更多图像

> ID：13798243
> 
> 赞同：0
> 
> 时间：2012-12-10T09:35:05.787
> 
> 标签：android, android-imageview

我需要在滑动时以单个图像视图显示存储在内部存储器中的图像。即在滑动时，imageview 将像轮子一样连续快速地显示下一个图像。请告诉我一些想法来加载许多图像而不会出现内存超出范围异常并快速加载。

谢谢你。

# java - 配置没有依赖注入的java对象构造

> ID：13798251
> 
> 赞同：0
> 
> 时间：2012-12-10T09:35:33.293
> 
> 标签：java

这是我的代码（当然只是一个例子）：

```
Employee manager = new DefaultEmployee(/* dependencies */);
Budget budget = new DefaultBudget(/* dependencies */);
Project project = new DefaultProject(manager, budget); 
```

`DefaultProject`依赖`Employee`和`Budget`，它们依赖于其他东西，等等等等。依赖的层次结构相当大（可能是数百种类型）。我可以硬编码（如示例中所示），或者我可能可以使用某种配置（XML 或 YAML）和一些可以在运行时创建这种层次结构的构建器。除了 Spring Framework，还有什么可用的解决方案吗？

请不要提供依赖注入。

[这个片段与依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)设计模式无关，因为消费者没有任何指向容器的链接。而且，根本没有容器（这是DI模式的静态组件，是对OOP原则的粗暴违反），也没有[控制反转](http://martinfowler.com/articles/injection.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:50:54.943

您可以创建一个`ObjectFactory`提供方法的方法`<T> T getInstance(T Interface)`。

然后工厂查找您传递的接口的实现，实例化并返回它。考虑它实例化的对象的`ObjectFactory`构造函数以查找进一步的实现。这几乎是一种反射，但很有效，我已经在一个项目中使用过它。

在您的示例中，您将不得不致电

```
Project project = objectFactory.getInstance(Project.class); 
```

`ObjectFactory`找到实现 ( )`DefaultProject`并看到构造函数需要 an`Employee`和 a `Budget`。因此，在实例化之前，`DefaultProject`它会查找那些 (`DefaultEmployee`和`DefaultBudget`) 的实现并实例化它们。你必须在这里使用递归。

# ios - iOS崩溃：播放视频前缺少图像

> ID：13798254
> 
> 赞同：1
> 
> 时间：2012-12-10T09:35:35.423
> 
> 标签：ios, video

我想使用 MPMoviePlayerViewController 播放视频，然后出现以下日志崩溃：

*** -[MPDetailSlider _setupControlsForStyle] 中的断言失败，/SourceCache/MediaPlayer_Sim/MobileMusicPlayer-1641.29/MPDetailSlider.m:708

*** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“缺少样式 2 的图像”

有没有人遇到过这种崩溃，你能帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T21:33:11.707

这解决了我们遇到的问题。感谢您添加编辑。我们有一个名为 imageNamed:inBundle 的 UIImage 类别。将名称更改为我们的类别方法解决了这个问题。

# python - Tornado 作为游戏引擎和后端

> ID：13798256
> 
> 赞同：0
> 
> 时间：2012-12-10T09:35:38.187
> 
> 标签：python, real-time, tornado, sockjs

我将实时构建一个简单的垄断游戏。 **游戏限制：**

*   一场比赛3-8人
*   玩家之间实时切换
*   分数和其他数据
*   开始位置和结束位置
*   接收特定玩家的回答并实时查看

所以，我决定使用 SockJS 作为实时（彗星）服务器。你能给我一些可插入 SockJS 的 py 游戏框架，还是从头开始正确的游戏引擎更好？例子表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:43:46.687

我认为最好自己写一个，因为大多数解决方案都很简单，最好基于[https://github.com/mrjoes/sockjs-tornado/](https://github.com/mrjoes/sockjs-tornado/)构建特定的东西 Tornado + SockJS + Redis 的组合可能是你的方法

# java - java.lang.ClassCastException：com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl 无法转换为 org.eclipse.persistence.jaxb.JAXBContext

> ID：13798262
> 
> 赞同：1
> 
> 时间：2012-12-10T09:35:51.510
> 
> 标签：java, jaxb, classcastexception, moxy

我正在尝试使用 JAXB 规范的 MOxy 实现。主要原因之一是确保 XML 文件中未映射的元素在封送回对象内容期间不会丢失。即使（我认为）我的 jaxb.properties 文件位于正确的位置，我也一直在遇到 ClassCastException。以下是我的文件组织（以及它在 Eclipse 中的组织方式）：

*   \zMain.java
*   \Config.java
*   \jaxb.properties（指定使用 MOxy 有 JAXB 提供程序 - javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory）

我写了一些基本的东西来验证这个实现的功能。

```
import java.io.File;
import javax.xml.bind.Binder;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import org.eclipse.persistence.jaxb.JAXBContext;
import org.w3c.dom.Document;
import org.w3c.dom.Node;

public class zMain {
   public static void main(String[] args) {
      try {
         DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
         DocumentBuilder db = dbf.newDocumentBuilder();
         File xml = new File("sampleconfig.xml");
         Document document = db.parse(xml);
         JAXBContext jc = JAXBContext.newInstance(Config.class);
         Binder<Node> binder = jc.createBinder();
         Config cfg = (Config) binder.unmarshal(document);
         // do nothing
         binder.updateXML(cfg);
         TransformerFactory tf = TransformerFactory.newInstance();
         Transformer t = tf.newTransformer();
         t.setOutputProperty(OutputKeys.INDENT, "yes");
         t.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "3");
         t.transform(new DOMSource(document), new StreamResult(System.out));
      } catch (Exception ex) {
         ex.printStackTrace();
         System.exit(100);
      }
   }
} 
```

执行这个 JAR 抛出

```
java.lang.ClassCastException: com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl cannot be cast to org.eclipse.persistence.jaxb.JAXBContext 
```

eclipselink-2.4.0.jar 在我的类路径中（否则我假设它会是 ClassNotFoundException 或编译错误）。

虽然不太可能，但是否有任何环境设置导致我的导入被覆盖？关于这里做错了什么的任何指示都会有很大帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:32:48.257

在您的示例中，该`jaxb.properties`文件必须与您的`Config`类位于同一包中。

解决当前问题后，以下导入将给您带来问题。 `JAXBContext.newInstance(Config.class)`将返回一个实例，`javax.xml.bind.JAXBContext`所以你应该导入它。

```
import org.eclipse.persistence.jaxb.JAXBContext; 
```

以下是 GitHub 示例的链接，该示例利用`jaxb.properties`文件将 MOXy 指定为 JAXB 提供程序。

*   [https://github.com/bdoughan/blog20110819](https://github.com/bdoughan/blog20110819)

**了解更多信息**

*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

**笔记：**

EclipseLink 的当前版本是 2.4.1，您可以从以下位置下载它：

*   [http://www.eclipse.org/eclipselink/downloads/](http://www.eclipse.org/eclipselink/downloads/)

# python - 当somthing被添加到python中的队列时如何运行函数

> ID：13798265
> 
> 赞同：1
> 
> 时间：2012-12-10T09:35:57.097
> 
> 标签：python, multithreading

我想知道是否有一个选项可以知道何时将任务添加/附加到 python 中的队列。

我有一个应用程序，其中一些进程在线程中运行。根据条件，从该线程调用函数。被调用的函数将显示一个窗口。

目前它正在工作并且窗口正在显示，我的主要问题是应用程序在显示窗口时被挂起。我认为这是由于在线程中调用了显示窗口的函数。

所以从我的搜索中有人建议我在 python 中使用队列。

但是当我通过 python[示例](http://docs.python.org/2.6/library/queue.html#queue-objects)显示无限循环将在主线程中运行。

如果是这样，那么我的整个应用程序将处于无限循环中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:35:46.527

您没有指定您正在使用的确切 GUI 框架。

如果您使用的是 wxPython，您可以使用 wx.CallAfter 从另一个线程调用函数：

```
def ShowWindow(txt):
    wx.MessageBox(txt) 
```

从另一个线程：

```
wx.CallAfter(ShowWindow,'message from another dimension') 
```

这不会导致您的主循环挂起。

# ios - 如何以编程方式移动 UIButton。Objective-C Xcode

> ID：13798269
> 
> 赞同：11
> 
> 时间：2012-12-10T09:36:04.370
> 
> 标签：ios, objective-c, xcode, uibutton

我已经看到了一些解决方案，但没有一个对我的问题有效。

我`UIButton`通过简单地拖放到`UIViewController`情节提要编辑器中创建了一个。

有一个链接到与该视图关联的 .h 文件的`UIButton`出口。`UIViewController`它也在`.m`文件中被合成。

```
@property (strong, nonatomic) IBOutlet UIButton *answerButton; 
```

我想像这样在运行时更改按钮的位置；

```
CGRect btFrame = answerButton.frame;
btFrame.origin.x = xOne;
btFrame.origin.y = yOne;
answerButton.frame = btFrame; 
```

但是，每当我尝试此操作时，按钮都会拒绝移动。

所有其他编辑功能（如`setTitle`等）都可以使用，但由于某种原因，框架不会按我想要的方式移动。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-05-06T11:47:40.027

Simply uncheck "Use Autolayout" in the file inspector..

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-10T10:17:24.830

.h 文件

```
 #import <UIKit/UIKit.h>

@interface ViewController : UIViewController{
    IBOutlet UIButton *theButton;
}
@property(nonatomic, strong) IBOutlet UIButton *theButton;
-(IBAction)moveTheButton:(id)sender;

@end 
```

.m 文件

```
-(IBAction)moveTheButton:(id)sender{
CGRect btFrame = theButton.frame;
btFrame.origin.x = 90;
btFrame.origin.y = 150;
theButton.frame = btFrame; 
```

}

此代码将按钮从一个点移动到另一个点。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T09:40:43.047

用下面的代码替换您的代码，其中包括删除自动调整大小掩码的代码。

```
CGRect btFrame = answerButton.frame;
btFrame.origin.x = xOne;
btFrame.origin.y = yOne;
answerButton.autoresizingMask = UIViewAutoresizingNone;
answerButton.frame = btFrame; 
```

# sql-server - 无法打开登录请求的数据库“测试”。登录失败。用户 'DOMAIN\$Test' 登录失败

> ID：13798273
> 
> 赞同：0
> 
> 时间：2012-12-10T09:36:16.237
> 
> 标签：sql-server

在 IIS 中部署 Linq to Sql 应用程序后，应用程序会引发此错误。

**无法打开登录请求的数据库“测试”。登录失败。用户 'DOMAIN\$Test' 登录失败**。

它在我的开发机器上运行良好，以下是我的连接字符串

add key="Connection" value="Data Source=server-name;Initial Catalog=DbName;Integrated Security=SSPI"

该帐户在 Sql server 上具有足够的权限。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T05:44:54.123

它得到了解决..我的坏...

连接字符串存储在我没有注意到的设置文件中，它指向 dev。和 windows 帐户没有权限。

谢谢...

# google-app-engine - GAE 和前瞻性搜索：空查询

> ID：13798278
> 
> 赞同：0
> 
> 时间：2012-12-10T09:36:47.390
> 
> 标签：google-app-engine

我想用空查询创建预期搜索订阅，但 GAE 引发异常

```
QuerySyntaxError: query:'' detail:'Query is empty.' 
```

这与允许空查询的 Search API 不兼容。任何解决方法？我应该提出问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T21:30:03.047

预期搜索服务旨在支持**过滤**文档流的应用程序；需要少于所有匹配的文档的应用程序。在这样的应用程序中，“空查询”通常会被视为错误的证据。诚然，空查询有时可能对各种调试目的有用，但是，决定设计接口的合同时要考虑到生产用途。

正如 Will Brown 所建议的，如果您想要一个匹配所有文档的订阅，那么将一些具有常量值的虚拟字段插入到您的文档中，然后创建一个仅匹配该字段和值的查询。鉴于在需要“所有文档”的极少数情况下可以使用如此简单的解决方法，我认为我们不太可能为空查询提供支持。还可能有趣的是，禁止空查询不仅存在于 AppEngine 代码中，还存在于 AppEngine 访问以提供预期搜索服务的后端服务器中。

尽管“Search API”（实际上应该称为“Retrospective Search API”）可能支持空查询，但重要的是要意识到前瞻性搜索的资源利用模式与追溯搜索的资源利用模式非常不同。例如，您可能有一个应用程序每秒将数百个文档流式传输到文档索引（使用追溯搜索）和通过查询索引（使用前瞻性搜索）。在这样的系统中，每当提交查询时，一个空的追溯查询只会返回几个文档。另一方面，前瞻性查询将生成所有文档的实时流。因此，仅存在几个预期查询可能会在您的应用程序上产生大量负载。一般来说，如果你想要一根消防水带，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T23:42:31.763

您可以为此提出功能请求，但这是设计使然（我不知道为什么）。如果你知道传入的文档会有一些共同点，你可以为它们编写一个查询；例如，如果您在发送请求时向文档中添加内容为“yes”的字段“alldocuments”，则可以注册一个类似“alldocuments:yes”的查询来匹配所有文档。

# aem - CQ5 富文本编辑器 HtmlRules DocType 节点被忽略

> ID：13798280
> 
> 赞同：1
> 
> 时间：2012-12-10T09:36:53.140
> 
> 标签：aem, rich-text-editor

小部件 API 建议您可以通过富文本编辑器下 HtmlRules 对象上的 DocType 对象更改富文本编辑器内容的默认包装标记：

defaultEditBlock : String 要使用的默认编辑块类型；默认为 "p" 在 CQ 5.4 中添加。

我需要对此进行更改，以便我可以在具有特定类的 ap 标记中包含富文本编辑器字段的内容（您不能将一个 p 标记放在另一个标记中，因此自动换行会脱离我预定义的 p 标记）。

不幸的是，这个节点似乎被忽略了。

我需要做什么来删除 p 标签，或者如果不是，那么将它们更改为可以放入 ap 标签的东西？

以下是富文本编辑器的 xml，rtePlugins 节点似乎可以正常工作，但 htmlRules 节点却不能。

```
<introText
     jcr:primaryType="cq:Widget"
     allowBlank="{Boolean}false"
     fieldLabel="Intro text"
     name="./introText"
     xtype="richtext">
     <htmlRules jcr:primaryType="nt:unstructured">
         <docType jcr:primaryType="nt:unstructured"
                  defaultEditBlock="span">
         </docType>
  </htmlRules>
  <rtePlugins jcr:primaryType="nt:unstructured">
        <edit jcr:primaryType="nt:unstructured"
              features="[cut,copy,paste-default,paste-plaintext]"/>
        <format jcr:primaryType="nt:unstructured"
               features="[]"/>
        <justify jcr:primaryType="nt:unstructured"
                 features="[]"/>
        <lists jcr:primaryType="nt:unstructured"
               features="[]"/>
    </rtePlugins>
</introText> 
```

# javascript - .mousemove 和内存，我是否需要优化这个？

> ID：13798281
> 
> 赞同：7
> 
> 时间：2012-12-10T09:36:53.367
> 
> 标签：javascript, jquery

我在这里创建了一个简单的光照测试演示：http: [//jsfiddle.net/CGr9d/](http://jsfiddle.net/CGr9d/)

当我使用 Chrome 开发工具记录内存使用情况时，我得到这个：[http](http://cl.ly/LSDl) ://cl.ly/LSDl ，它基本上会上升到某个点，然后再次下降并重新开始，直到再次达到之前的高点。

这正常吗？有什么方法可以优化我的代码以减少内存占用？

这是我的鼠标移动功能：

```
$('body').mousemove(function(e) {
  //2000 is half the image width/height, of course used for centering
  $('.light-circle').css({ backgroundPosition: (e.pageX-2000)+'px '+(e.pageY-2000)+'px' });
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:41:22.100

如果匹配选择器的元素`.light-circle`没有改变，你可以像这样优化一点：

```
var circles = $('.light-circle');
$('body').mousemove(function(e) {
  //2000 is half the image width/height, of course used for centering
  circles.css({ backgroundPosition: (e.pageX-2000)+'px '+(e.pageY-2000)+'px' });
}); 
```

这样您就不会在每次鼠标移动时重新查询 DOM、分配新的 jQuery 对象等。

但是在垃圾收集环境中看到内存增加，然后减少，然后再次增加是完全正常的。

# c# - 浏览我的网站的用户的 IP 地址

> ID：13798286
> 
> 赞同：1
> 
> 时间：2012-12-10T09:37:00.077
> 
> 标签：c#, http, ip-address

我想知道客户端机器的IP地址，即浏览我网站的用户的IP地址。我正在尝试以下代码，但它正在返回服务器地址 -

```
public string GetClientIP()
{
    string result = string.Empty;
    string ip = HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"];
    if (!string.IsNullOrEmpty(ip))
    {
        string[] ipRange = ip.Split(',');
        int le = ipRange.Length - 1;
        result = ipRange[0];
    }
    else
    {
        result = HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"];
    }

    return result;
} 
```

如何找到正确的 IP 地址？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T09:45:50.590

可以从请求中读取客户端 IP：

```
context.Request.ServerVariables["REMOTE_HOST"] 
```

这是获取不仅仅是客户端 IP 地址的代码：

```
string browserInfo =
             "RemoteUser=" + context.Request.ServerVariables["REMOTE_USER"] + ";\n"
            + "RemoteHost=" + context.Request.ServerVariables["REMOTE_HOST"] + ";\n"
            + "Type=" + context.Request.Browser.Type + ";\n"
            + "Name=" + context.Request.Browser.Browser + ";\n"
            + "Version=" + context.Request.Browser.Version + ";\n"
            + "MajorVersion=" + context.Request.Browser.MajorVersion + ";\n"
            + "MinorVersion=" + context.Request.Browser.MinorVersion + ";\n"
            + "Platform=" + context.Request.Browser.Platform + ";\n"
            + "SupportsCookies=" + context.Request.Browser.Cookies + ";\n"
            + "SupportsJavaScript=" + context.Request.Browser.EcmaScriptVersion.ToString() + ";\n"
            + "SupportsActiveXControls=" + context.Request.Browser.ActiveXControls + ";\n"
            + "SupportsJavaScriptVersion=" + context.Request.Browser["JavaScriptVersion"] + "\n"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T09:38:58.633

```
string IPAddress = string.Empty;
string SearchName = string.Empty;

String strHostName = HttpContext.Current.Request.UserHostAddress.ToString();

IPAddress = System.Net.Dns.GetHostAddresses(strHostName).GetValue(0).ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-25T13:30:54.257

您可以使用“HTTP_X_FORWARDED_FOR”或“REMOTE_ADDR”标头属性。

[参考developernote.com 博客](http://www.developersnote.com/2013/11/c-get-visitorclient-ip-address-aspnet.html)中的GetVisitorIPAddress 方法。

```
 /// <summary>
    /// method to get Client ip address
    /// </summary>
    /// <param name="GetLan"> set to true if want to get local(LAN) Connected ip address</param>
    /// <returns></returns>
    public static string GetVisitorIPAddress(bool GetLan = false)
    {
        string visitorIPAddress = HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"];

        if (String.IsNullOrEmpty(visitorIPAddress))
            visitorIPAddress = HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"];

        if (string.IsNullOrEmpty(visitorIPAddress))
            visitorIPAddress = HttpContext.Current.Request.UserHostAddress;

        if (string.IsNullOrEmpty(visitorIPAddress) || visitorIPAddress.Trim() == "::1")
        {
            GetLan = true;
            visitorIPAddress = string.Empty;
        }

        if (GetLan)
        {
            if (string.IsNullOrEmpty(visitorIPAddress))
            {
                //This is for Local(LAN) Connected ID Address
                string stringHostName = Dns.GetHostName();
                //Get Ip Host Entry
                IPHostEntry ipHostEntries = Dns.GetHostEntry(stringHostName);
                //Get Ip Address From The Ip Host Entry Address List
                IPAddress[] arrIpAddress = ipHostEntries.AddressList;

                try
                {
                    visitorIPAddress = arrIpAddress[arrIpAddress.Length - 2].ToString();
                }
                catch
                {
                    try
                    {
                        visitorIPAddress = arrIpAddress[0].ToString();
                    }
                    catch
                    {
                        try
                        {
                            arrIpAddress = Dns.GetHostAddresses(stringHostName);
                            visitorIPAddress = arrIpAddress[0].ToString();
                        }
                        catch
                        {
                            visitorIPAddress = "127.0.0.1";
                        }
                    }
                }
            }
        }

        return visitorIPAddress;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-18T12:59:55.317

```
string myIP = (HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"] ?? HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"]).Split(',')[0].Trim(); 
```

注意：用于获取公共 IP 地址。

# reporting-services - 2012 年构建的 Reporting Services 2008 年部署

> ID：13798289
> 
> 赞同：1
> 
> 时间：2012-12-10T09:37:11.713
> 
> 标签：reporting-services, ssrs-2008, ssrs-2012

我一直在为在其实时环境中运行 SQL Server 2008 的客户工作。我在现场工作了一段时间，但现在在家工作。但是，由于安全原因，我无法连接到实时设置，我只能连接到测试服务器。该服务器运行 SQL Server 2012。我编写任何代码并将其发送到办公室以供某人部署。我遇到的问题是我现在正在做一些报告服务工作。它们只是非常基本的报告、tablix 控件，没什么特别的。是否可以在 2012 年构建并部署到 2008 年？我可以对 .rdl 文件做些什么来完成这项工作还是不可行？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-22T12:04:17.813

在 Visual Studio 的 ReportServer 项目的属性中，您可以设置目标服务器版本。

右键单击解决方案资源管理器窗格中的项目并将 TargetServerVersion 属性设置为所需的版本。这适用于 SQL Server Reporting Services 2008 及更高版本的报表。然后，设计人员将管理哪些功能可用，以避免使用更高版本的 SSRS 的功能。

![在此处输入图像描述](../Images/c03626acc8183d2b38af54696527a9c4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:33:32.863

.rdl 文件是格式良好的 XML。您可以使用您最喜欢的 diff 工具来比较在该工具的任一版本中生成的报告。

我很确定微软不支持将较新的 RDL 移动到较旧版本的服务器。

.rdl 格式在 2005 年和 2008 年之间发生了巨大变化，在 2008 年和 2008R2 之间发生了适度的变化，但我还没有真正研究过 2008R2 与 2012 年的对比。据我所知，这些应该是较小的变化。

如果你这样做，你就离开了黄金支撑的砖路。由于该服务器是生产服务器，并且您没有测试它的好方法，我会找到一个 2008 的服务器来开发。我不希望我的名字与可能提出的将 rdl 向后移动的问题联系起来。

# java - 我如何将字符串方法调用到 jpanel

> ID：13798293
> 
> 赞同：-1
> 
> 时间：2012-12-10T09:37:24.177
> 
> 标签：java, swing, class, for-loop, jpanel

我如何将方法字符串（printBestillingsordre）调用到另一个方法中并为其创建 JPanel

```
public String printBestillingsordre(){
        JButton button = new JButton("Varemodtaget");
        String temp = "";
        for(HentbestillingsordreRegistrer hentboregistrer: hbor){
        if(status == "Leveret"){    

        temp += "Bestillings Status: " + hentboregistrer.BestillingsStatus+" \n" + 
        "LeverandoerID: "+ hentboregistrer.LeverandoerID+" \n";

        }else{
            temp += hentboregistrer.BestillingsStatus+ button + "\n" + 
                    "LeverandoerID: "+ hentboregistrer.LeverandoerID+" \n";
        }
        System.out.println(temp);

    }
        return temp;
} 
```

进入这段代码

```
public JPanel HentOrdreGUI(){

    JPanel info = new JPanel();
    info.setLayout(new BorderLayout());
    info.add(printBestillingsordre());
    return null;
} 
```

顺便说一句，这段代码还没有完成

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:19:17.940

假设您想将“printBestillingsordre()”中的可视文本添加到面板，最简单的方法是更改​​行：

```
info.add(printBestillingsordre()); 
```

至

```
info.add(new JLabel(printBestillingsordre()); 
```

这将创建您的字符串的视觉代表。要组织您的 GUI 组件，我建议您查看以下[链接：](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

# batch-file - 通过批处理文件从文件中读取

> ID：13798295
> 
> 赞同：1
> 
> 时间：2012-12-10T09:37:26.277
> 
> 标签：batch-file

我有一个 file.txt，其中包含安装在我的机器上的预言机的路径。从注册表示例中，此文件包含：

```
 ORACLE_HOME    REG_SZ    C:\oracle\product\11.2.0\dbhome_1
    ORACLE_HOME    REG_SZ    C:\oracle\product\11.2.0\dbhome_2 
```

我想通过我的批处理文件将预言机的所有路径插入到列表或类似列表中。我怎样才能在批处理文件中做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T11:24:55.297

假设您想要内存中的值“列表”，而不是文件中：

我认为大多数人更喜欢可以通过索引值访问的值“数组”。（注意 - 批处理没有正式的数组，但可以模拟它们）。

只要没有主路径包含`!`. 如果包含并启用延迟扩展，扩展`%%B`将损坏。`!`

```
@echo off
setlocal enableDelayedExpansion

:: Read the file and create an "array" of home paths
:: This will fail if any of the paths contain !
set /a cnt=0
for /f "usebackq tokens=2*" %%A in ("file.txt") do (
  set /a cnt+=1
  set "home.!cnt!=%%B"
)

:: Access the "array" members
for /l %%N in (1 1 %cnt%) do echo !home.%%N! 
```

您可能可以在许多环境中运行上述代码多年，并且永远不会遇到问题。但是某个地方的某个人可能包含`!`在 Oracle 主路径中。有许多策略可以解决上述问题`!`。以下是三个选项：

选项 1 - 代码量最少，但由于 CALL 最慢

```
@echo off
setlocal disableDelayedExpansion

:: Read the file and create an "array" of home paths
:: This will safely process all paths, regardless of value
set /a cnt=0
for /f "usebackq tokens=2*" %%A in ("file.txt") do (
  set /a cnt+=1
  call set "home.%%cnt%%=%%B"
)

:: Access the "array"
setlocal enableDelayedExpansion
for /l %%N in (1 1 %cnt%) do echo !home.%%N! 
```

选项 2 - 一种使用 FINDSTR 计算行数的有趣且有效的方法。

```
@echo off
setlocal disableDelayedExpansion

:: Read the file and create an "array" of home paths
:: This will safely process all paths, regardless of value
set /a cnt=0
for /f "tokens=1,3* delims=: " %%A in ('findstr /n "^" "file.txt"') do (
  set "home.%%A=%%C"
  set "cnt=%%A"
)

:: Access the "array" members
setlocal enableDelayedExpansion
for /l %%N in (1 1 %cnt%) do echo !home.%%N! 
```

选项 3 - 一种使用延迟扩展切换的有效方法，但代码最多

```
@echo off
setlocal disableDelayedExpansion

:: Read the file and create an "array" of home paths
:: This will safely process all paths, regardless of value
set /a cnt=0
for /f "usebackq tokens=2*" %%A in ("file.txt") do (
  set /a cnt+=1
  setlocal enableDelayedExpansion
  for %%N in (!cnt!) do (
    endlocal
    set "home.%%N=%%B"
  )
)

:: Access the "array"
setlocal enableDelayedExpansion
for /l %%N in (1 1 %cnt%) do echo !home.%%N! 
```

* * *

也可以在单个变量中包含主路径列表。每个路径都应该用引号括起来。路径可以用空格、逗号、分号、等号或制表符分隔。我选择了空间。

列表的大小是有限的，因为批处理环境变量的最大大小约为 8191 字节。由于 CALL，此解决方案也相对较慢。这些问题在现实世界中都不太可能成为问题。

```
@echo off
setlocal disableDelayedExpansion

:: Read the file and create a space delimited list of quoted home paths
:: This will safely process all paths, regardless of value
for /f "usebackq tokens=2*" %%A in ("file.txt") do (call set list=%%list%% "%%~B")

:: optional - remove leading space
(set list=%list:~1%)

:: Display the list
echo list=%list%

:: Access the list members
for %%F in (%list%) do echo %%~F 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:08:03.347

```
for /f "tokens=3 delims= " %%a in (file.txt) do echo %%a >>paths.txt 
```

# design-patterns - 如何改善工厂模式

> ID：13798305
> 
> 赞同：1
> 
> 时间：2012-12-10T09:38:14.717
> 
> 标签：design-patterns, c#-2.0

我必须创建一组将由同一个客户端使用的对象类型。我正在考虑应用工厂模式。但我是这种设计模式的新手，想从你们中的一些人那里得到建议。

我有 MessageTypeA、MessageTypeB 和 MessageType C。每种消息类型都可以是 XML 格式或普通纯文本。每个消息类型也可以有 1 个或多个版本。例子，

```
MessageType A in xml format version 1,
MessageType A in xml format version 2,
MessageType A in xml format version 3.

MessageType A in plain text format version 1,
MessageType A in plain text format version 2,
MessageType A in plain text format version 3.

MessageType B in xml format version 1,
MessageType B in xml format version 2,
MessageType B in xml format version 3.

MessageType B in plain text format version 1,
MessageType B in plain text format version 2,
MessageType B in plain text format version 3. 
```

你能建议我如何将工厂设计模式应用于这些对象的创建吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:15:13.103

您可能对上述工厂方法设计模式和“[构建器](http://en.wikipedia.org/wiki/Builder_pattern)”模式都感兴趣。

如果您要将抽象描述转换为具体表示，则构建器很有用。通常的例子是一个结构化的文档，它可以被描述为诸如 Headline-level-1:“我是标题”，base-text:“我是内容。这里有几行”这样的元素。这可以转换为几种具体的渲染，例如 HTML、RTF、PDF...

如果您的消息比乔瓦尼回答中描述的相对简单的消息系列更适合该模型，那么您可能会发现该模式有用。事实上，在我看来，他的解决方案是 Builder 的简化版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:41:24.097

首先没有“工厂”模式，已知的模式是[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)。此模式允许您为每个 Factory 方法实例创建一种类型的对象，然后您传递您的抽象基础 Factory 方法并调用**单个 create**方法来实例化它创建的任何内容。

我认为您需要的是完全不同的[抽象工厂模式。](http://en.wikipedia.org/wiki/Abstract_factory_pattern)在这种情况下，每个 Factory 实例**都会创建一系列**相互关联的对象。在您的特定情况下，我会这样建模（伪代码）：

```
// Base abstract Abstract Factory
abstract class MessageAF {
   MsgType createMessageTypeA();  
   MsgType createMessageTypeB();  
   MsgType createMessageTypeC();  
}

// concrete implementation
class XmlFormatVersion1AF extends MessageAF {
   MsgType createMessageTypeA();  
   MsgType createMessageTypeB();  
   MsgType createMessageTypeC();  
}

// concrete implementation
class XmlFormatVersion2AF extends MessageAF {
   MsgType createMessageTypeA();  
   MsgType createMessageTypeB();  
   MsgType createMessageTypeC();  
}

// concrete implementation
class PlainTextFormatVersion1AF extends MessageAF {
   MsgType createMessageTypeA();  
   MsgType createMessageTypeB();  
   MsgType createMessageTypeC();  
} 
```

然后在您的代码库中，您主要依赖于类型`MessageAF`，并在每种情况下传递适当的实例实现，例如`PlainTextFormatVersion1AF`创建纯文本消息版本 1。

# c# - C#中的动态拆分表单布局

> ID：13798308
> 
> 赞同：0
> 
> 时间：2012-12-10T09:38:23.267
> 
> 标签：c#, forms, layout, controls

我正在尝试在 C#（Windows 窗体）中创建一个动态拆分的表单，以将其用作视频流监控应用程序。想象一下，它是监控应用程序的默认外观，或者是运行 x 的 Linux 发行版中通常的标准虚拟桌面视图。

```
_________________________
|           |           |
|   scr01   |   scr02   |
|           |           |
|-----------+-----------|
|           |           |
|   scr04   |   scr04   |
|___________|___________| 
```

现在，使用“TableLayoutPanel”很容易完成上面的视图。定义 2 行 2 列，高度和宽度各为 25%。但我想通过将 ROWS 和 COLUMNS 定义为数字来动态设置我的视图。使用 TableLayoutPanel，我可以定义所需的行和列，是的，但是无论我定义什么，布局都是一团糟。

因为：没有像真实表格中的列或行这样的东西。TableLayoutPanel 只是定义了一些整数，表单必须将其绘制为具有在 TableLayoutPanelRow/Column 样式中定义的属性的单元格。也没有工作“自动调整”属性的选项。

完成这样的事情的最佳方法是什么？TableLayoutPanel 是一个可怕的表单实体，我可以使用其他控件吗？还是我必须计算所有内容，在每次调整表单大小时在其位置绘制控件等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:43:16.203

如果你厌倦了s `TableLayoutPanel`，你可以使用[`Panel`s](http://msdn.microsoft.com/en-us/library/system.windows.forms.panel.aspx)和[`Splitters`](http://msdn.microsoft.com/en-us/library/system.windows.forms.splitter.aspx). 这样，您应该能够非常准确地指定每个组件的确切位置。

您也可以使用拆分容器，但是您在指定拆分器宽度等方面的自由度较低。

我希望这有帮助。

# mysql - 如何以特定格式查找mysql中两个日期时间字段的差异

> ID：13798310
> 
> 赞同：1
> 
> 时间：2012-12-10T09:38:28.663
> 
> 标签：mysql

我有一个包含两个字段 start_date 和 end_date 的表。我需要以这种格式显示数据

```
4 days 12 hours remaining.

id      start_date           end_date
1       2012-12-07 12:00:00  2012-12-14 12:00:00 
```

我怎样才能做到这一点。使用 mysql 的 now() 查找剩余的天数和小时数。我的意思是今天是 2012 年 12 月 10 日，所以我需要找出从今天到结束日期的差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:55:11.977

这可能会帮助您：

```
SELECT
    FLOOR(HOUR(t) / 24) AS days,
    HOUR(t) % 24 hours
FROM (
    SELECT TIMEDIFF('2012-12-07 12:00:00', '2012-12-14 18:00:00') t
) AS t1 
```

在嵌套查询中，您会得到差异（以小时为单位）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:41:55.453

请检查这是否有帮助::试试`TIME_TO_SEC(TIMEDIFF())`

```
select 
TIME_TO_SEC(TIMEDIFF(end_date, start_date))/86400 as days,
TIME_TO_SEC(TIMEDIFF(end_date, start_date))/3600- TIME_TO_SEC(TIMEDIFF(end_date, start_date))/86400 as hours
from
myTable 
```

# javascript - 设置自定义 HTML5 必填字段验证消息

> ID：13798313
> 
> 赞同：120
> 
> 时间：2012-12-10T09:38:39.727
> 
> 标签：javascript, jquery, html

# 必填字段自定义验证

我有一个包含许多输入字段的表单。我已经把 html5 验证

```
<input type="text" name="topicName" id="topicName" required /> 
```

当我提交表单而不填写此文本框时，它会显示默认消息，例如

`"Please fill out this field"`

谁能帮我编辑这条消息？

我有一个 javascript 代码来编辑它，但它不起作用

```
$(document).ready(function() {
    var elements = document.getElementsByName("topicName");
    for (var i = 0; i < elements.length; i++) {
        elements[i].oninvalid = function(e) {
            e.target.setCustomValidity("");
            if (!e.target.validity.valid) {
                e.target.setCustomValidity("Please enter Room Topic Title");
            }
        };
        elements[i].oninput = function(e) {
            e.target.setCustomValidity("");
        };
    }
}) 
```

# 电子邮件自定义验证

我有以下 HTML 表单

```
<form id="myform">
    <input id="email" name="email" type="email" />
    <input type="submit" />
</form> 
```

我想要的验证消息。

**必填字段：**请输入电子邮件地址
**错误的电子邮件：** “testing@.com”不是有效的电子邮件地址。（*此处，输入的电子邮件地址显示在文本框中*）

我试过这个。

```
function check(input) {  
    if(input.validity.typeMismatch){  
        input.setCustomValidity("'" + input.value + "' is not a Valid Email Address.");  
    }  
    else {  
        input.setCustomValidity("");  
    }                 
} 
```

此功能无法正常工作，您有其他方法吗？将不胜感激。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-04-17T20:37:14.673

## 代码片段

由于这个答案得到了非常多的关注，这是我想出的一个很好的可配置片段：

```
/**
  * @author ComFreek <https://stackoverflow.com/users/603003/comfreek>
  * @link https://stackoverflow.com/a/16069817/603003
  * @license MIT 2013-2015 ComFreek
  * @license[dual licensed] CC BY-SA 3.0 2013-2015 ComFreek
  * You MUST retain this license header!
  */
(function (exports) {
    function valOrFunction(val, ctx, args) {
        if (typeof val == "function") {
            return val.apply(ctx, args);
        } else {
            return val;
        }
    }

    function InvalidInputHelper(input, options) {
        input.setCustomValidity(valOrFunction(options.defaultText, window, [input]));

        function changeOrInput() {
            if (input.value == "") {
                input.setCustomValidity(valOrFunction(options.emptyText, window, [input]));
            } else {
                input.setCustomValidity("");
            }
        }

        function invalid() {
            if (input.value == "") {
                input.setCustomValidity(valOrFunction(options.emptyText, window, [input]));
            } else {
               input.setCustomValidity(valOrFunction(options.invalidText, window, [input]));
            }
        }

        input.addEventListener("change", changeOrInput);
        input.addEventListener("input", changeOrInput);
        input.addEventListener("invalid", invalid);
    }
    exports.InvalidInputHelper = InvalidInputHelper;
})(window); 
```

## 用法

→ [jsFiddle](http://jsfiddle.net/B4hYG/633/)

```
<input id="email" type="email" required="required" /> 
```

```
InvalidInputHelper(document.getElementById("email"), {
  defaultText: "Please enter an email address!",

  emptyText: "Please enter an email address!",

  invalidText: function (input) {
    return 'The email address "' + input.value + '" is invalid!';
  }
}); 
```

## 更多细节

*   `defaultText`最初显示
*   `emptyText`输入为空时显示（已清除）
*   `invalidText`当输入被浏览器标记为无效时显示（例如，当它不是有效的电子邮件地址时）

您可以为这三个属性中的每一个分配一个字符串或一个函数。
如果您分配一个函数，它可以接受对输入元素（DOM 节点）的引用，并且它*必须*返回一个字符串，然后将其显示为错误消息。

## 兼容性

测试：

*   铬金丝雀 47.0.2
*   即 11
*   Microsoft Edge（使用截至 2015 年 8 月 28 日的最新版本）
*   火狐 40.0.3
*   歌剧 31.0

* * *

## 旧答案

您可以在此处查看旧版本：[https ://stackoverflow.com/revisions/16069817/6](https://stackoverflow.com/revisions/16069817/6)

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2015-07-03T11:23:53.553

您可以使用 oninvalid 属性简单地实现这一点，查看此演示代码

```
<form>
<input type="email" pattern="[^@]*@[^@]" required oninvalid="this.setCustomValidity('Put  here custom message')"/>
<input type="submit"/>
</form> 
```

![在此处输入图像描述](../Images/6055792e02076183d7bcc3afb6eac32e.png)

Codepen 演示：[https ://codepen.io/akshaykhale1992/pen/yLNvOqP](https://codepen.io/akshaykhale1992/pen/yLNvOqP)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-03-09T17:58:15.353

**HTML：**

```
<form id="myform">
    <input id="email" oninvalid="InvalidMsg(this);" name="email" oninput="InvalidMsg(this);"  type="email" required="required" />
    <input type="submit" />
</form> 
```

**JAVASCRIPT：**

```
function InvalidMsg(textbox) {
    if (textbox.value == '') {
        textbox.setCustomValidity('Required email address');
    }
    else if (textbox.validity.typeMismatch){{
        textbox.setCustomValidity('please enter a valid email address');
    }
    else {
       textbox.setCustomValidity('');
    }
    return true;
} 
```

**演示：**

[http://jsfiddle.net/patelriki13/Sqq8e/](http://jsfiddle.net/patelriki13/Sqq8e/)

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-12-10T09:58:08.077

试试这个：

```
$(function() {
    var elements = document.getElementsByName("topicName");
    for (var i = 0; i < elements.length; i++) {
        elements[i].oninvalid = function(e) {
            e.target.setCustomValidity("Please enter Room Topic Title");
        };
    }
}) 
```

我在 Chrome 和 FF 中对此进行了测试，并且在两种浏览器中都可以使用。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-05-31T17:51:13.390

伙计，我从来没有在 HTML 5 中这样做过，但我会尝试的。看看[这个小提琴。](http://jsfiddle.net/AZZA3/)

我在输入标签上使用了一些 jQuery、HTML5 原生事件和属性以及自定义属性（如果您尝试验证代码，这可能会导致问题）。我没有在所有浏览器中进行测试，但我认为它可能有效。

这是使用 jQuery 的字段验证 JavaScript 代码：

```
$(document).ready(function()
{
    $('input[required], input[required="required"]').each(function(i, e)
    {
        e.oninput = function(el)
        {
            el.target.setCustomValidity("");

            if (el.target.type == "email")
            {
                if (el.target.validity.patternMismatch)
                {
                    el.target.setCustomValidity("E-mail format invalid.");

                    if (el.target.validity.typeMismatch)
                    {
                         el.target.setCustomValidity("An e-mail address must be given.");
                    }
                }
            }
        };

        e.oninvalid = function(el)
        {
            el.target.setCustomValidity(!el.target.validity.valid ? e.attributes.requiredmessage.value : "");
        };
    });
}); 
```

好的。这是简单的html表单：

```
<form method="post" action="" id="validation">
    <input type="text" id="name" name="name" required="required" requiredmessage="Name is required." />
    <input type="email" id="email" name="email" required="required" requiredmessage="A valid E-mail address is required." pattern="^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9]+$" />

    <input type="submit" value="Send it!" />
</form> 
```

属性`requiredmessage`就是我讲的自定义属性。您可以为每个必填字段设置消息，因为 jQuery 会在显示错误消息时从中获取。您不必在 JavaScript 上正确设置每个字段，jQuery 会为您完成。那个正则表达式似乎很好（至少它阻止了你的`testing@.com`！哈哈）

正如您在小提琴上看到的那样，我对提交表单事件进行了额外的验证（*这也在 document.ready 上*）：

```
$("#validation").on("submit", function(e)
{
    for (var i = 0; i < e.target.length; i++)
    {
        if (!e.target[i].validity.valid)
        {
            window.alert(e.target.attributes.requiredmessage.value);
            e.target.focus();
            return false;
        }
    }
}); 
```

我希望这对你有用或对你有帮助。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-09-02T22:35:20.023

这对我很有效：

```
jQuery(document).ready(function($) {
    var intputElements = document.getElementsByTagName("INPUT");
    for (var i = 0; i < intputElements.length; i++) {
        intputElements[i].oninvalid = function (e) {
            e.target.setCustomValidity("");
            if (!e.target.validity.valid) {
                if (e.target.name == "email") {
                    e.target.setCustomValidity("Please enter a valid email address.");
                } else {
                    e.target.setCustomValidity("Please enter a password.");
                }
            }
        }
    }
}); 
```

以及我使用它的形式（截断）：

```
<form id="welcome-popup-form" action="authentication" method="POST">
    <input type="hidden" name="signup" value="1">
    <input type="email" name="email" id="welcome-email" placeholder="Email" required></div>
    <input type="password" name="passwd" id="welcome-passwd" placeholder="Password" required>
    <input type="submit" id="submitSignup" name="signup" value="SUBMIT" />
</form> 
```

![在此处输入图像描述](../Images/ffc461471899e31c0edaa0bc762226c5.png)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-05-31T23:33:46.947

您可以根据您的需要为相同类型的所有输入或仅一个输入中的“无效”设置一个事件侦听器，然后设置正确的消息。

```
[].forEach.call( document.querySelectorAll('[type="email"]'), function(emailElement) {
    emailElement.addEventListener('invalid', function() {
        var message = this.value + 'is not a valid email address';
        emailElement.setCustomValidity(message)
    }, false);

    emailElement.addEventListener('input', function() {
        try{emailElement.setCustomValidity('')}catch(e){}
    }, false);
    }); 
```

脚本的第二部分，有效性消息将被重置，否则将无法提交表单：例如，即使电子邮件地址已更正，这也会阻止消息被触发。

此外，您不必根据需要设置输入字段，因为一旦您开始输入输入，就会触发“无效”。

这是一个小提琴：http: [//jsfiddle.net/napy84/U4pB7/2/](http://jsfiddle.net/napy84/U4pB7/2/) 希望有帮助！

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-07-25T23:52:41.037

在每个输入标签中使用属性“title”并在其上写一条消息

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-05-05T21:38:48.143

**只需要获取元素并使用 setCustomValidity 方法即可。**

例子

```
var foo = document.getElementById('foo');
foo.setCustomValidity(' An error occurred'); 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-12-20T10:10:31.167

您可以简单地使用**oninvalid="**属性，并绑定**this.setCustomValidity()** eventListener！

**这是我的演示代码！（您可以运行它来查看！）** [![在此处输入图像描述](../Images/47842c7da1fb161d0ea4bc4b2fbed82f.png)](https://i.stack.imgur.com/HC694.gif)

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>oninvalid</title>
</head>
<body>
    <form action="https://www.google.com.hk/webhp?#safe=strict&q=" method="post" >
        <input type="email" placeholder="xgqfrms@email.xyz" required="" autocomplete="" autofocus="" oninvalid="this.setCustomValidity(`This is a customlised invalid warning info!`)">
        <input type="submit" value="Submit">
    </form>
</body>
</html>
```

# 参考链接

[http://caniuse.com/#feat=form-validation](http://caniuse.com/#feat=form-validation)

[https://www.w3.org/TR/html51/sec-forms.html#sec-constraint-validation](https://www.w3.org/TR/html51/sec-forms.html#sec-constraint-validation)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-01-11T06:03:11.737

您可以添加此脚本以显示您自己的消息。

```
 <script>
     input = document.getElementById("topicName");

            input.addEventListener('invalid', function (e) {
                if(input.validity.valueMissing)
                {
                    e.target.setCustomValidity("Please enter topic name");
                }
//To Remove the sticky error message at end write

            input.addEventListener('input', function (e) {
                e.target.setCustomValidity('');
            });
        });

</script> 
```

对于其他验证，例如模式不匹配，您可以添加额外的 if else 条件

像

```
else if (input.validity.patternMismatch) 
{
  e.target.setCustomValidity("Your Message");
} 
```

还有其他有效条件，如 rangeOverflow、rangeUnderflow、stepMismatch、typeMismatch、valid

# c# - ViewStat 非常奇怪的行为

> ID：13798319
> 
> 赞同：0
> 
> 时间：2012-12-10T09:39:08.360
> 
> 标签：c#, asp.net, devexpress, viewstate

我在我的页面中使用 devexpress 控件，但这不是问题。

下面是发生的情况，我在页面中创建了一个仅使用 get 的属性，该属性将从 ViewState 中检索查询字符串值。我将值存储在页面加载事件的 ViewState 中，该事件包含在 !IsPostBack 中。在我存储注意后，我已经在我的母版页上放置了一个更新面板。我搜索了网络，发现 ViewState 值从不存储在回调中，我不知道是不是这个原因。这是我的代码：

```
 public partial class _Default : BasePage
{
    private Int64 RequestId
    {
        get
        {
            return (Int64.Parse(ViewState["RequestId"].ToString()));
        }
    }

    protected override void Page_Load(object sender, EventArgs e)
    {
        //Check for security
        base.Page_Load(sender, e);

        if (!IsPostBack)
        {
            GetQueryString();
            gridBind();
        }
    }

    private void GetQueryString()
    {
        string requestId = this.Request.QueryString["RID"];
        if(!String.IsNullOrEmpty(requestId))
            ViewState["RequestId"] = Int64.Parse(this.Server.UrlDecode(requestId))
        else
            ViewState["RequestId"] = 0;
    }
  } 
```

我编辑了这个问题，我遇到的第一个问题是由于 IE7 的愚蠢，但是每次回发后的 ViewState 都是空的。我尝试使用 EnableViewState 但它始终为空。在我的解决方案中使用的任何页面都是一样的。我们根本不能使用 ViewStates。肯定有问题。

# groovy - 如何在插件中获取 Jira 对象版本的 Greenhopper 结束日期

> ID：13798320
> 
> 赞同：0
> 
> 时间：2012-12-10T09:39:09.490
> 
> 标签：groovy, jira, jira-plugin, jira-agile

我正在从链接问题中收集数据以显示在主问题中。我们的产品由多个组件组成。对于每个组件，我们都有一个团队和一个 Jira 项目。每个产品都有一个 Jira 项目，我们在其中跟踪产品的功能和版本。

我在从相关问题中收集各种信息并提交给产品经理方面非常成功。我想通过查找所有版本的最大结束日期（即 Greenhopper 字段）来确定该功能可用的最早日期。所以基本上我需要访问 GH 字段以获取 Jira 对象版本的结束日期。

GH API 中有`getEndDate()`和`getVerionEndDate()`方法，但我迫切需要一个样本！

这是我在 Groovy Script Runner 中尝试访问版本的结束日期但没有成功的方法

```
import com.atlassian.greenhopper.model.issue.VersionWrapper

def allVersions = ""
parentIssue.getFixVersions().each { version -> 
    def versionWrapper = new VersionWrapper(version)
        allVersions += "Version: ${version.getName()} in component ${version.getProjectObject().getName()} planned at ${versionWrapper.getEndDate()} \n" 
} 
```

我得到：

```
Problem loading class: startup failed: /jira-plugins/ProductComponentSync.groovy:
  17: unable to resolve class com.atlassian.greenhopper.model.issue.VersionWrapper
  @ line 17, column 1\. import com.atlassian.greenhopper.model.issue.VersionWrapper
                              ^ 1 error 
```

参考链接：[http ://docs.atlassian.com/greenhopper/6.0.7/com/atlassian/greenhopper/model/issue/VersionWrapper.html](http://docs.atlassian.com/greenhopper/6.0.7/com/atlassian/greenhopper/model/issue/VersionWrapper.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:59:28.427

我能够做到这一点/

这是链接 [https://answers.atlassian.com/questions/113898/use-of-greenhopper-classes-in-groovy-script-classes](https://answers.atlassian.com/questions/113898/use-of-greenhopper-classes-in-groovy-script-classes)

# c# - 事件日志中事件的唯一标识符

> ID：13798324
> 
> 赞同：0
> 
> 时间：2012-12-10T09:39:21.800
> 
> 标签：c#, .net, powershell, event-log

我有一个 Windows 事件日志文件 (.evt/.evtx)，我想使用 power shell 从事件日志中选择一个特定事件。我看到像

```
$provider = Get-WinEvent -listprovider $EventSource
$ProviderEvent = $provider.events | Where-Object {($_.ID -eq 4)} 
```

查询事件日志，但在我的 .evtx 中，有多个具有相同 ID 的事件。

因此，我的问题是 - 如何确定单个事件（使用哪些字段）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:01:30.693

检查 RecordId 属性：

```
$provider.events | Where-Object {$_.ID -eq 4} | foreach {$_.RecordId} 
```

# android - 如何通过 UI 访问存储在服务器中的数据？

> ID：13798330
> 
> 赞同：1
> 
> 时间：2012-12-10T09:39:38.773
> 
> 标签：android

我正在开发一个安卓应用程序。在该应用程序中，我必须使用用户界面将数据从服务器访问到我的单元中。我不太了解如何在服务器中保存数据以及如何在我的单元格中访问。

如果有人知道，请帮助我。或者给我一些链接来研究这个。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:47:59.863

[本](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)教程可帮助您做到这一点。基本上你需要知道一些事情。您需要先将数据存储在数据库中，可能是 mysq 等。使用 php、java 等服务器端语言，您可以以非常方便的 JSON 形式获取这些数据。稍后您可以解析它们并将其显示在您的 UI 中。您将在上述教程中了解这一点。你那里也有视频。祝一切顺利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T09:55:36.960

与服务器通信时（从服务器获取数据或将数据上传到服务器）。[我建议您对Web 服务](http://en.wikipedia.org/wiki/Web_service)有所了解，这将对您有很大帮助。

下面我给你一个我正在使用的方法。

为此，您需要一个请求 URL，使用它您将从服务器获得响应，因此稍后您可以读取响应结果并可以在任何您想要的地方使用。

```
public String getResult(String url) {

        Log.v(TAG, "Final Requsting URL is : :"+url);

        String line = "";
        String responseData = null;

        try {
            StringBuilder sb = new StringBuilder();
            String x = "";
            URL httpurl = new URL(url);
            URLConnection  tc= httpurl.openConnection();

            BufferedReader in = new BufferedReader(new   
                                 InputStreamReader(tc.getInputStream()));

            while ((line = in.readLine()) != null) {
                sb.append(line + "\n");
                x = sb.toString();
            }
            responseData = new String(x);
        }
        catch (UnknownHostException uh){            
            Log.v("NewWebHelper", "Unknown host :");
            uh.printStackTrace();
        }
       catch (FileNotFoundException e) {
           Log.v("NewWebHelper", "FileNotFoundException :");
            e.printStackTrace();
         }
        catch (IOException e) {
            Log.v("NewWebHelper", "IOException :");
            e.printStackTrace();
        }
      catch (Exception e) {
          Log.v("NewWebHelper", "Exception :");
            e.printStackTrace();
        }
        return responseData;
    } 
```

* * *

如果您对此代码有任何问题，请告诉我，稍后我将尝试分享如何将数据上传到服务器示例代码

# c++ - 与 Visual Studio 6.0 相关

> ID：13798335
> 
> 赞同：0
> 
> 时间：2012-12-10T09:40:31.900
> 
> 标签：c++, visual-studio, visual-studio-6

我正在使用 Microsoft Visual Studio 6.0

有2个dsp文件，即1）。A.dsp 2）。dsp

我将 A.dsp 设置为我的 ACTIVE PROJECT 并将配置选择为“Debug_mode2”[有两种可用的调试模式：Debug_mode1、Debug_mode2 在配置下]...并且 B.dsp 是依赖的[类似于 A.dsp，我的 B.dsp也有 2 种调试模式：Debug_mode1、Debug_mode2 under configuration]。

现在，问题是......当我试图重建 A.dsp 文件时，它正在选择 B.dsp 的“Debug_mode1”并尝试构建 B.dsp......但我想要 B 的 Debug_mode2。应选择 dsp，然后构建 B.dsp。

谢谢。

我不知道如何更改此默认行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:40:11.817

你不能这样做。不仅在 VS6 中，最新版本的 VS 处理配置的方式与 AFAIK 相同。

但是，您可以做的是将您的`Debug_mode2`配置重命名`B.dsp` 为`Debug_mode1`.

# jquery - jQuery dataTables 中的 fnDeleteRow 错误

> ID：13798340
> 
> 赞同：1
> 
> 时间：2012-12-10T09:40:46.587
> 
> 标签：jquery, jquery-datatables

在 Datatable 中，当我尝试使用 fnDeleteRow 删除一行时，它会引发错误。“TypeError：e 未定义：在 datatable.js 文件中”

但与此同时，该行已成功删除。

有什么帮助吗？

```
 "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
        if(aData[0]=='Total')
        {
            var oTable = $('#data_table').dataTable();
            oTable.fnDeleteRow( nRow); 
        }
      } 
```

我还将从数据库中获取全部详细信息。我将在页脚中显示该总计，并希望从显示中删除总计行。

# c# - 我的一个控件没有在智能感知中显示

> ID：13798341
> 
> 赞同：0
> 
> 时间：2012-12-10T09:40:47.293
> 
> 标签：c#, vb.net, visual-studio-2010, splitcontainer

我的 VB.NET WinForm 中有两个拆分容器`SplitContainer1`，`SplitContainer2`但是我将我的重命名`Splitcontainer1`为`SC1`，现在它在编码时没有显示在智能感知中，当我手动输入时它也会给我错误。

所以我最后，回滚到以前的名字，即从`SC1`到再次`SplitContainer1`，但它仍然没有出现。可能的原因是什么，我该如何解决。因为我`SplitContainer2`的工作正常，它可以通过代码窗口访问。

我的另一件事`SplitContainer1`也可以通过设计模式进行攻击。

**编辑：**

当我`SplitContainer1`在代码窗口中使用时，它说`Error 1 'SplitContainer1' is not declared. It may be inaccessible due to its protection level.`

我不知道发生了什么，因为当我尝试将另一个 SplitContainer 添加到表单时，它的名称`SplitContainer1`表示它已经在表单中使用。

# c++ - 我无法让三个线程井井有条

> ID：13798342
> 
> 赞同：3
> 
> 时间：2012-12-10T09:40:55.187
> 
> 标签：c++, c, multithreading, pthreads, mutex

我有一个要序列化的三个线程我
使用的 pthreads 是 C++。我正在尝试对输出进行排序，使其成为 {A,B,C,A,B,C,A,B,C,................}。我这样做是因为我有太多想要序列化的线程。我想要的输出是：

```
Thread A
Thread B
Thread C
Thread A
Thread B
Thread C
Thread A
Thread B
Thread C
Thread A
Thread B
Thread C
........
........ 
```

这是我拥有的代码。它有时会挂起，有时会运行一两个循环然后挂起。我想听听你认为问题所在。我的代码是：
thread_test.cpp

```
#include <stdio.h>
#include <pthread.h>

pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t cond = PTHREAD_COND_INITIALIZER;
int condition = 0;
int count = 0;

void* thread_c( void * arg )
{
   while( 1 )
   {
      pthread_mutex_lock( &mutex );
      while( condition != 2 )
         pthread_cond_wait( &cond, &mutex );
      printf( "Thread C");
      condition = 0;
      pthread_cond_signal( &cond );
      pthread_mutex_unlock( &mutex );
   }

   return( 0 );
}

void* thread_b( void * arg )
{
   while( 1 )
   {
      pthread_mutex_lock( &mutex );
      while( condition != 1 )
         pthread_cond_wait( &cond, &mutex );
      printf( "Thread B" );
      condition = 2;
      pthread_cond_signal( &cond );
      pthread_mutex_unlock( &mutex );
   }

   return( 0 );
}

void*  thread_a( void * arg )
{
   while( 1 )
   {
      pthread_mutex_lock( &mutex );
      while( condition != 0 )
         pthread_cond_wait( &cond, &mutex );
      printf( "Thread A");
      condition = 1;
      pthread_cond_signal( &cond );      
      pthread_mutex_unlock( &mutex );
   }
   return( 0 );
}

int main( void )
{
    pthread_t  thread_a_id;
    pthread_create( &thread_a_id, NULL, &thread_a, NULL );
    pthread_t  thread_b_id;
    pthread_create( &thread_b_id, NULL, &thread_b, NULL );
    pthread_t  thread_c_id;
    pthread_create( &thread_c_id, NULL, &thread_c, NULL );
    int a = pthread_join(thread_a_id, NULL);
    int b = pthread_join(thread_b_id, NULL);
    int c = pthread_join(thread_c_id, NULL);
} 
```

为了编译代码，我使用

```
g++ -lpthread -std=gnu++0x thread_test.cpp 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T09:45:33.503

我认为问题在于`pthread_cond_signal()`可以自由选择它希望的任何等待线程，而您的代码取决于它选择特定线程。

如果我替换`pthread_cond_signal()`为`pthread_cond_broadcast()`，我将无法再让代码停止。我提到这是一个观察；我还没有说服自己这是一个正确的解决方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T09:52:52.027

Putting aside the question of why you want to serialize the threads to this extent, the problem is that if more than one thread is waiting on the condition, `pthread_cond_signal( &cond )` may only wake up one of them to check the condition (actually that's the intended and usually desired behavior - it's more of an accident if more then one waiter is released).

For example, when `thread_a()` sets `condition = 1` it is intending to wake up `thread_b`. However, `thread_c` may be waiting at the same time as `thread_b`. Using `pthread_cond_signal` you have no control over which of `thread_b` or `thread_c` will be released.

Use `pthread_cond_broadcast( &cond )` instead to wake all waiters.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:45:18.943

三个条件变量，每个线程一个。线程 A 发出一个线程 B 正在等待的信号，谁发出一个线程 C 等待的信号，谁发出一个线程 A 正在等待的信号......

但是，如果您只想串行运行它们，那么拥有三个可以并行工作的线程有什么用呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T09:46:26.113

你应该看看这个：[死锁](http://en.wikipedia.org/wiki/Deadlock)

# python - 如何访问在不同py文件的类构造函数中初始化的属性？

> ID：13798344
> 
> 赞同：0
> 
> 时间：2012-12-10T09:40:56.323
> 
> 标签：python, oop

我有两个 py 文件。a.py 和 b.py 在名为 test (has `__init__.py`)的包中

我想访问下面 a.py 中定义的属性 self.items

```
import b

class Window(object):
    def __init__(self):
        self.items={'Magenta':'mag','Grey':'gre','Red':'red'}
    def getMats():
        newobj=b.BAR()
        selected = newobj.type_of_mats[1] 
```

从不同的 py 文件 b.py[below] 所以在 b.py 我导入了 a 模块，即

```
import a

#now 

obj = a.Window()
print obj.items['Magenta']
class BAR(object):
    def myMat(self):
        type_of_mats=['ground', 'corridor', 'Outdoor'] 
```

上面不应该打印 mag 因为或者我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:05:51.310

[请参阅有关循环导入(a)](https://stackoverflow.com/questions/896112/properly-importing-modules-in-python)和[(b)](https://stackoverflow.com/questions/744373/circular-or-cyclic-imports-in-python)的这些 stackoverflow 问题。我认为这取决于所使用的编译器/解释器。在我的情况下，您的代码没有给我超出递归深度，但这[确实](http://www.copypastecode.com/5193/)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:00:05.530

循环导入。`a.py`进口`b`再`b.py`进口`a`。鸡/蛋问题！而 python 无法为您解决这个问题，因此它会警告您最大递归深度（它不断地从 a 跳到 b 到 a 到 b 到 a...）。

您必须修复它，以便导入仅是单向的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:00:22.357

你有一个循环依赖：`a`is importing `b`，它又是 importing `a`。由于这两个导入处于模块级别，因此它们永远无法完成。

在您的情况下，您可以通过将其`import b`移入`getMats`方法来修复它。

# iphone - 针对 MITM 验证 SSL 证书

> ID：13798348
> 
> 赞同：1
> 
> 时间：2012-12-10T09:41:21.970
> 
> 标签：iphone, ios, ssl, ssl-certificate, x509

我正在通过 HTTPS 从 iOS 应用程序与我的服务器通信，并希望对其进行加强以降低中间人攻击的风险。验证以检测 MITM 攻击的最佳 X.509 字段是哪些？

验证证书的序列号和颁发者签名是否最有效？当然，假设我的发行人没有与 Eve 勾结，并且 Eve 没有窃取我的发行人的签名密钥。自签名将消除第一个威胁。

验证证书的主题和颁发者签名几乎一样安全，但让我能够灵活地更新证书吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:33:42.780

攻击者可以颁发与您的所有相同字段的证书。所以检查它的唯一方法 - 检查指纹（即存储在证书中的公钥哈希）或检查整个证书链（如果您使用的是权威签名证书）。但是，第一种方法不具备在证书被盗/撤销时快速重新颁发证书的灵活性。

# c# - Devexpress 在页面上找不到控件

> ID：13798352
> 
> 赞同：0
> 
> 时间：2012-12-10T09:41:31.767
> 
> 标签：c#, asp.net, devexpress

> 错误：当前上下文中不存在名称“”

所有 devexpress 控件都出现此错误。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.OleDb;
using DevExpress.Data;
using DevExpress.Web.ASPxGridView;
using DevExpress.Web.ASPxFileManager;
using BPM.Layer.DataTypes;
using BPM.Layer.UIFClass;
using BPM.Layer.DataOpr;
using BPM.Layer;

    namespace BPM.Ihracat.UI.Tahsilatlar
{
    public partial class Tahsilatlar : System.Web.UI.Page
    {
    Operate DOpr = new Operate();
    DataHelper dh = new DataHelper();
    LogClass log = new LogClass();
    BPM.Layer.DataTypes.logininfo giris = new BPM.Layer.DataTypes.logininfo();
    UIFObjects UIO = new UIFObjects();
    DevExpress.Web.ASPxGridView.ASPxGridView grd = new DevExpress.Web.ASPxGridView.ASPxGridView();
    IhracatClass ihr = new IhracatClass();
    DataSet fds = new DataSet();
    DataTable grdTable = new DataTable();
    bool isWriting = false;
    string departman = "0";

    protected void Page_Load(object sender, EventArgs e)
    {
        if (Request.QueryString.Count == 0)
        {
            Response.Redirect("Giris.aspx");
        }
        else
        {
            string ticket = Request.QueryString[0].ToString();
            UIO.getbpmsession(ticket, giris);
        }
        if (Request.QueryString.Count == 2)
        {   
/*islemId is a label*/
/*  <asp:Label runat="server" ID="islemid" Visible="false"></asp:Label>*/

            islemId.Text = Request.QueryString[1].ToString();
        }

        string progname = Request.Url.LocalPath.ToString();
        isWriting = DOpr.getifuserhaswriting(giris.UserID, DOpr.ProgIDofPage(progname));
        DataTable usrdt = DOpr.getKullaniciData(giris.UserID.ToString());
        departman = usrdt.Rows[0]["DepartmanID"].ToString();
        Button btnHiddenTemp=(Button)Page.FindControl("btnHidden");
      // btnHidden.Click += new EventHandler(btnHidden_Click);

      ( (Button)Page.FindControl("btnHidden")).Click += new EventHandler(btnHidden_Click);

        preparetitle();
        preparegrid();

        PrepareCombobox();
    } 
```

我可以解决这样的问题。有什么解决方案可以解决这个问题吗？我认为 Visual Studio 找不到所有必需的参考资料。我该怎么办？

# ios - 一个应用程序如何知道设备中安装了哪些其他应用程序

> ID：13798353
> 
> 赞同：0
> 
> 时间：2012-12-10T09:41:33.110
> 
> 标签：ios, sandbox

> **可能重复：**
> [获取 iphone 上已安装应用程序的列表](https://stackoverflow.com/questions/4614114/get-list-of-installed-apps-on-iphone)

有没有办法知道 iPhone 或其他 iOS 设备中安装了哪些其他应用程序？我知道所有 ios 应用程序都是沙盒的，所以这在非越狱设备上可能是不可能的。但是有一个应用程序可以做到这一点。！没有越狱（见图），它怎么知道我安装的所有应用程序？

![](../Images/66eef6fda275692305862e6d64a7579c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:44:41.960

我正在为我的项目使用 iHasApp 框架，它运行良好。[您可以在此处](https://github.com/danielamitay/iHasApp)获取代码。

# asp.net-mvc-3 - StructureMap HttpContextScoped 是必要的吗？

> ID：13798355
> 
> 赞同：8
> 
> 时间：2012-12-10T09:41:41.430
> 
> 标签：asp.net-mvc-3, entity-framework, structuremap, session-per-request

我在 的教程中看到了如下代码`EF code first`，`MVC`并`StructureMap`创建了一个`Context Per Request`模式：

```
 protected void Application_Start()
    {
        ...

        initStructureMap();

    }

    private static void initStructureMap()
    {

        ObjectFactory.Initialize(x =>
        {
            x.For<IUnitOfWork>().HttpContextScoped().Use(() => new Context());
            x.For<IFirstEntity>().Use<FirstEntity>();
            x.For<ISecondEntity>().Use<SecondEntity>();
            x.For<IThirdEntity>().Use<ThirdEntity>();
        });

        ControllerBuilder.Current.SetControllerFactory(new StructureMapControllerFactory());
    }

    protected void Application_EndRequest(object sender, EventArgs e)
    {
        ObjectFactory.ReleaseAndDisposeAllHttpScopedObjects();
    }

public class StructureMapControllerFactory : DefaultControllerFactory
{
    protected override IController GetControllerInstance(RequestContext requestContext, Type controllerType)
    {
        return ObjectFactory.GetInstance(controllerType) as Controller;
    }
} 
```

`FirstEntity`, `SecondEntity`and ... 都需要`IunitOfWork`在他们的构造函数中。

如您所见，它仅`HttpContextScoped()`用于`Context`其他人，并且在`EndRequest`它调用的情况下`ReleaseAndDisposeAllHttpScopedObjects()`。

1-这是正确的方法吗？

2-我应该将 HttpContextScoped() 用于所有其他`Service layer Interfaces`还是不只是用于`IUnitOfWork`？例如

```
x.For<IFirstEntity>().Use<FirstEntity>(); 
```

或者

```
x.For<IFirstEntity>().HttpContextScoped().Use(() => new FirstEntity()); 
```

3-`ReleaseAndDisposeAllHttpScopedObjects()`处置所有实例还是仅仅处置`Context`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T10:15:19.813

Web 应用程序的约定是在整个 http 请求期间保持相同的 ORM 上下文/UnitOfWork。这是为了在请求期间使用相同的实体，保持数据一致并最小化进行的数据库调用。生命`HttpContextScoped`周期确保在请求所有依赖于它的实例期间使用相同的 UoW 实例。

所以1）是的，这是正确的

至于剩下的“服务层接口”，就看在整个请求过程中是否需要是同一个实例。问问自己：“在整个请求期间是否需要此对象的状态”？对于大多数“服务”而言，情况并非如此。另请注意，制作“HttpContextScoped”也会使其所有依赖项保持在该范围内。

这导致我说 2) 在大多数情况下，不

`ReleaseAndDisposeAllHttpScopedObjects`处置用 . 注册的容器中的所有对象`HttpContextScoped`。默认情况下，对象在 Structuremap 中被限定为瞬态（每次调用的新实例）。

所以 3)`IUnitOfWork`只会处理实例。

# tfs - “Web Deploy Publish Profile”属性是做什么用的？

> ID：13798356
> 
> 赞同：3
> 
> 时间：2012-12-10T09:41:40.667
> 
> 标签：tfs, tfsbuild, publishing, web-deployment, azure-web-app-service

在 TFS 资源管理器中，我在 Build Definition Editor -> Process -> Build process parameters -> 6\. Publishing -- Azure Website -> Web Deploy Publish Profile 下找到了这个属性：

[![在此处输入图像描述](../Images/35a7d0c3cabd2e56c5d1401dddf43069.png)](https://i.stack.imgur.com/ntqPk.png)

我下载了发布配置文件，但 TFS 构建报告以下错误：

> 总体构建过程
> 更新内部版本号
> 在代理上运行（保留的构建代理 托管的构建代理）
> 创建工作区
> 获取工作区
> 创建标签
> 编译、测试和关联变更集和工作项
> 编译和测试
> 获取 Azure 网站 发布配置文件
> 运行 MSBuild for Project
> Built $/myproj /myproj/myproj.sln 用于默认目标。
> 为默认目标构建 $/myproj/myproj/myproj/myproj.csproj。
> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets (4435)：PublishProfile 的值设置为“myproj.azurewebsites.net”，预计会找到'C:\a\src\myproj\myproj\myproj\Properties\PublishProfiles\myproj.azurewebsites.net' 中的文件，但找不到。
> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\Microsoft.Web.Publishing.targets (4449)：目标 ValidatePublishProfileSettings 失败 MSBuild 日志文件
> 处理异常
> 创建工作项
> 关联变更集和工作项
> 异常消息：MSBuild 错误 1 ​​已结束此构建。您可以在上述消息中找到有关此错误原因的更多具体信息。（类型 BuildProcessTerminateException）
> **异常堆栈跟踪：**
> 在 System.Activities.Statements.Throw.Execute(CodeActivityContext context) 在 System.Activities.CodeActivity.InternalExecute(ActivityInstance 实例，ActivityExecutor 执行程序，BookmarkManager bookmarkManager) 在 System.Activities.Runtime.ActivityExecutor.ExecuteActivityWorkItem.ExecuteBody(ActivityExecutor 执行程序，BookmarkManager bookmarkManager , Location resultLocation)
> Drop Files to Drop Location
> Work item '4: Build Failure in Build: myproj_2012-55-10_07-55.1' 被构建打开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T21:20:50.323

我遇到了类似的问题，关于构建设置的文档确实不多。我从您的屏幕截图中看到您正在使用 .publishsettings 文件，但我无法让它工作，相反我认为您需要一个 .pubxml 文件。

试试这个：

*   右键单击项目并选择发布（或发布网站）
*   您将看到发布向导，在配置文件选项卡上选择导入并选择从 Azure 门户下载的文件。
*   关闭向导。（我第一次手动发布，但我没有必要）。此时，Visual Studio 应该已经创建了 3tow .pubxml 文件。一个用于 webdeploy，一个用于 ftp。
*   将此文件签入源代码控制中的某处
*   使用问题的第一个屏幕截图中的步骤 6 的源代码管理文件夹位置选择文件。

希望有帮助，它为我解决了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T21:24:11.463

'C:\a\src\myproj\myproj\myproj\Properties\PublishProfiles\myproj.azurewebsites.net' 但找不到它。

您在该目录中有个人资料吗？这可能是问题..它需要在那个目录中。

# xpath - 查找具有 : 特定属性和具有特定文本的子元素的元素

> ID：13798357
> 
> 赞同：2
> 
> 时间：2012-12-10T09:41:45.213
> 
> 标签：xpath, watir-webdriver

对于下面的代码示例，我需要检查一个 tr ，type="a" 并且有一个带有文本“3”作为孩子的 td ，是否存在：

```
<table>
    <tr type="a">
     <td>1</td>
    </tr>
    <tr type="b">
     <td>1</td>
    </tr>
    <tr type="a">
     <td>3</td>
    </tr>
</table> 
```

试过这个：

```
 b.tr( :xpath =>"//tr[@type='a']").td( :text =>'3').exists? 
```

但它不起作用（`xpath`表达式仅返回 2 个现有的第一个 tr ）。

有任何想法吗 ？`tr`如果我需要存在，是否有一个 xpath 表达式将返回 true ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:43:26.817

Alternatively, this can also be done without xpath:

```
b.trs.count{ |tr|
  tr.attribute_value('type') == 'a' and tr.td(:text, '3').present? 
} > 0 
```

A little bit more verbose, but I think it is easier to read than xpaths.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:40:29.057

**使用**：

```
boolean(/*/tr[@type='a']/td[. = 3]) 
```

`true()`当存在一个`td`字符串值等于数字 3 且其父`tr`字符串值为其`type`属性为“a”且其 (the `tr`) 是 XML 顶部元素的子元素时，此 XPath 表达式的计算结果准确无误文档。

否则，XPath 表达式的计算结果为`false()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:56:26.083

好吧，我不确定这是否有帮助，但此代码返回 xpath 表达式返回的元素数量的计数，因此您可以检查计数是否为 0，然后没有匹配项，否则它将返回匹配项的数量：

```
var doc = document.evaluate("//table/tbody/tr[@type='a']/td[text()=1]",document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);
doc.snapshotLength 
```

或者

```
var doc = document.evaluate("//table[@id='tableId']/tbody/tr[@type='a']/td[text()=1]",document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);
doc.snapshotLength 
```

如果你的桌子有一个 id。

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:14:10.883

```
b.tr(:xpath =>"//tr[@type='a']", :index => 1).td(:text =>'3').exists? 
```

或者

```
b.tr(:xpath =>"(//tr[@type='a'])[2]").td(:text =>'3').exists? 
```

# ocaml - 动态创建两种记录类型之一的函数

> ID：13798358
> 
> 赞同：3
> 
> 时间：2012-12-10T09:41:48.533
> 
> 标签：ocaml

我有这种 OO 情况，我试图在 Ocaml 中实现：两个类`X1`和`X2`，都是子类型`X`（`X1 <: X`和`X2 <: X`），我想编写一个动态返回一个的函数，`X`它可以是 an`X1`或 an `X2`。

但是我听说避免使用 Ocaml 中的类并改用模块通常很好，所以我试图像这样表示我的问题（过于简化但仍然很重要）：两个模块`X1`和`X2`，我希望我的函数在返回一个`X1.t`或一个`X2.t`。

```
module type X = sig
  type choice
  type t
  (* some methods we don't care about in this instance, like
     val modifySomething : t -> t *)
end

module Xbase = struct
  type choice = Smth | SmthElse
end

module X1 = (
struct
  include Xbase
  type t = { foo : int; bar : int }
end : X)

module X2 = (
struct
  include Xbase
  type t = { foo : int; star : int }
end : X)

module XStatic =
struct
  (* construct either an X1.t or X2.t from the string *)
  let read : string -> 'a =
    function
    | "X1" -> { X1.foo = 0, bar = 0 }
    | "X2" -> { X2.foo = 1, star = 1 }
end 
```

但这`Error: Unbound record field label X1.foo`在`read`功能中失败了。我尝试了不同的排列方式，例如使用`let open X1 in { foo = 0, ... }`但无济于事。

我的方法是从根本上错误的（即我应该使用类，因为这对模块来说是不可能/不切实际的）还是我只是错过了一些微不足道的东西？

编辑：澄清了我要解决的问题并重命名`module X`为`module XBase`以区别于`module type X`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T14:06:01.207

最简单的方法是使用 sum 类型（免责声明：我没有尝试编译代码）：

```
module X1 = struct
  type t = { foo : int; bar : string }
  let modify_foo = ...
end
module X2 = struct
  type t = { foo : int; star : bool }
  let modify_foo = ...
end
type x1_or_x2 =
  | Left of X1.t
  | Right of X2.t

let read = function
  | "X1" -> Left { X1.foo = 1; bar = "bar" }
  | "X2" -> Right { X2.foo = 1; star = true }

let modify_foo = function
  | Left x1 -> Left (X1.modify_foo x1)
  | Right x2 -> Right (X2.modify_foo x2) 
```

如果您想利用这一事实`X1.t`并`X2.t`共享一些共同的结构，您可以分解类型。这个想法是它们分别与产品类型同构`common_part * specific_to_x1`和`common_part * specific_to_x2`。因此`x1_or_x2`类型是`(common * specific_to_x1) + (common * specific_to_x2)`，相当于`common * (specific_to_x1 + specific_to_x2)`。

```
type common = { foo : int }
let modify_foo_common : common -> common = ...

type specific_x1 = { bar : string }
type specific_x2 = { star : bool }

type x1_or_x2 = common * specific_x1_or_x2
and specific_x1_or_x2 =
  | Left of X1.t
  | Right of X2.t

let read = function
  | "X1" -> { foo = 1 }, Left { bar = "bar" }
  | "X2" -> { foo = 1 }, Right { star = true }

let modify_foo (common, specific) = (modify_foo_common common, specific) 
```

这样，作用于公共部分的定义不会重复，而是可以声明一次。

PS：另请参阅这个非常相关的问题，您可能对此感兴趣并且有一个很好的答案（镜头！）：[Ptival：静态“扩展”一个记录式数据类型而没有间接麻烦](https://stackoverflow.com/questions/9379626/statically-extend-a-record-ish-data-type-without-indirection-hassle)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T15:21:50.113

一旦您将模块强制转换为模块类型`X1`，您就失去了在这些模块之外如何构建内部类型的信息。其余的代码（即除模块内容之外的所有内容）将无法知道是由什么组成的：这些类型对于其他所有内容都变得*抽象*，但它们各自的模块除外。`X2``X``X1.t``X2.t`

 *您的问题的 OOP 方法可能是创建默认构造函数，并在需要时调用它们。在您的情况下，这意味着在模块中定义默认值，在接口（模块类型）中添加声明，以便外部代码仍然可以创建这些类型的值。

```
module type X = sig
    type t
    val default : unit -> t
    (* etc. *)
end;;

module X1 : X = struct
    include XBase     
    type t = {foo : int; bar : int}
    (* here I can change fields adlib *)
    let default () = {foo = 0; bar = 1}
   (* ... *)
end;;
(* here I don't have access to X1.t fields anymore *) 
```

请注意，如果您的类型不包含可变字段或引用，您可以将`default`其作为简单的值`t`，而不是函数，但也许您希望保留在其他模块中拥有此类字段的可能性。

这里的要点是，您需要保持您的类型公开或为您的抽象类型提供构造和操作值的方法（我想后者已经在您的代码中在某种程度上实现了）。

如果您不更改或无法更改模块类型`X`，那么您也许可以在上层强制签名，使用 mli 文件对包含`X1`and的模块以外的其他模块进行强制转换`X2`（也就是说，如果您的代码遵循这样的设计）。

另一种方法是添加有关`t`何时进行强制的类型信息。例如，这里有一个明确类型的`X1`声明`choice`（假设它已经存在于 中`X`）：

```
module X1 : X with type choice = XBase.choice =
struct
   (* body of the X1 module *)
end;;
(* now I can access X1.choice constants from here, if XBase.choice is visible too *) 
```

您可以对其 type 执行类似的操作`t`，然后从外部代码访问其内容。从设计的角度来看，如果您已经在模块中提供了操作符来操作 type 的值，那么这显然不是处理问题的最佳方式`t`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T10:05:34.463

该错误`Unbound record field label X1.foo`是由于`X1`and`X2`具有模块签名`Xbase`，它只有类型`choice`（而不是类型`t`）。即语法隐藏了不属于签名`: X`的所有值和类型。`X1``Xbase`

但是即使你纠正了这个错误，也会出现更重要的东西：函数的返回类型是`read`什么？不能同时是`X1.t`和`X2.t`。*

# android - StateListDrawable 未显示按下状态

> ID：13798360
> 
> 赞同：0
> 
> 时间：2012-12-10T09:41:52.623
> 
> 标签：android, android-layout, android-button, nine-patch, statelistdrawable

我只是想创建一个自定义的 9-Patch 按钮。所以这就是我所拥有的：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/yellow_button_background_pressed"
          android:state_pressed="true" />
    <item android:drawable="@drawable/yellow_button_background_pressed"
          android:state_focused="true" />
    <item android:drawable="@drawable/yellow_button_background_default" />
</selector> 
```

带有各自的图像：（![Yellow_button_background_default](../Images/5f2fc6db0f5ca3a97c88282eaba10daf.png)默认），![Yellow_button_background_pressed](../Images/7c368d8b40dcd718cd869b851e6cba5a.png)（按下）

和布局

```
<Button
    android:id="@+id/answerAButton"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:text="@string/answer_a"
    android:background="@drawable/yellow_button_background"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="@color/black"/> 
```

现在，当我触摸按钮时，什么也没有发生。我尝试了模拟器和真机，但它们总是显示默认图形。各个图形本身可以正常工作，但不知何故 StateListDrawable XML 无法按预期工作。

很感谢任何形式的帮助。

**解决方案：** 代码没问题，但是按钮被另一段代码禁用。因此，无法单击它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:59:20.757

问题既不是 StateListDrawable 也不是 Layout。正如 Luksprog 指出的那样，该按钮从未收到 onClick 事件，因为它已在代码中被禁用。愚蠢的我忘记了，在我当前的调试设置中从未触发重新启用按钮的事件。

# javascript - 使用 jquery 禁用两层网页的背景功能

> ID：13798362
> 
> 赞同：0
> 
> 时间：2012-12-10T09:41:55.673
> 
> 标签：javascript, jquery, json

该网页有2个div

```
<div top> : This div overlap the under div unless the user exit it
<div under> : This div has a function, when user hover one of the item on it, it will process something 
```

那么，当 div top 生成并覆盖 under div 时，鼠标不小心悬停在页面上会触发 div 下的功能，有什么办法可以防止呢？当显示 div 顶部时，我只希望所有应用程序都集中在 div 顶部。谢谢

```
var handler = function() {      
$('drag').unbind('hover', handler);
}; 
```

不工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:44:42.010

您是否尝试过添加`return false;`或添加`e.preventDefault`到您希望禁用的功能？

# c++ - Linux 上的多核计算性能低下（openMP、boost::thread 等）

> ID：13798366
> 
> 赞同：1
> 
> 时间：2012-12-10T09:42:05.073
> 
> 标签：c++, linux, boost, openmp, opensuse

我想在我的应用程序中使用多核计算。我开始[使用 openMP (C++) 开发示例应用程序](http://pastebin.com/et3EBetK)。

当我启动它时，我发现我的多核计算并不比串行计算快（在某些情况下，甚至多核计算也比串行计算慢）：

```
./openmp_test

串行。总和：1.77544e+08 时间：21.84

减少，2个线程。总和：1.77544e+08 时间：21.65

两节。总和：1.77544e+08 时间：60.65

```

我的下一个想法是创建[boost::thread 应用程序](http://pastebin.com/nkpJXYvv)来测试 CPU 核心上的两个线程。结果：

```
./boost_thread_test

串行。总和：1.42146e+09 时间：179.64

两个增强线程。总和：1.42146e+09 时间：493.34

```

我使用内置酷睿 i3 CPU 的 openSuSe (x64) 笔记本电脑。

为什么我的多线程性能如此糟糕？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T12:18:42.193

您的代码（基于 OpenMP 的代码`sections`和基于 的代码）都可能是*虚假共享*`boost::thread`的受害者。错误共享的发生是因为时间加载和存储在整个高速缓存行上操作，而不是直接在它们的操作数上。例如，以下语句：

 *```
sum = sum + value; 
```

不仅会导致`sum`从内存中读取、更新然后写回的值，还会导致整个内存的一小部分（称为*高速缓存行*）被读取然后写回。现代 x86 CPU 上的高速缓存行通常为 64 字节，这意味着不仅 的值`sum`会从内存中加载/存储到内存中，而且还会在其周围 56 字节。缓存行也总是从 64 的倍数地址开始。这对您的代码有什么影响？

在 OpenMP 部分代码中，您有：

```
double sum1;
double sum2;

...
// one section operates on sum1
...
// one section operates on sum2
... 
```

`sum1`并且`sum2`位于父函数的堆栈上`omp_sections`（附注 -`omp_`前缀是为 OpenMP 运行时库中的函数保留的；不要用它来命名您自己的函数！）。双打，`sum1`并`sum2`在 8 字节边界上对齐，总共占用 16 个字节。它们都落入同一高速缓存行的概率是 7/8 或 87.5%。当第一个线程想要更​​新时会发生`sum1`以下情况：

*   它读取保存的缓存行`sum1`
*   它更新了`sum1`
*   **它通知所有其他核心缓存行的内容已更改，因此它们必须在其缓存中使其无效**

最后一部分非常关键——它是所谓的*缓存一致性*的一部分。由于`sum1`和`sum2`可能落入同一高速缓存行，执行秒线程的核心必须使其高速缓存无效并从较低的内存层次结构级别（例如从共享的最后一级高速缓存或从主内存）重新加载它。当第二个线程修改`sum2`.

一种可能的解决方案是在`reduction`使用 OpenMP 工作共享指令的情况下使用该子句`for`：

```
double sum;

#pragma omp parallel sections reduction(+:sum) num_threads(2)
{
   ...
} 
```

另一种可能的解决方案是在两个值之间插入一些填充，以使它们分开多个缓存行：

```
double sum1;
char pad[64];
double sum2; 
```

我不知道 C++ 标准是否保证局部变量如何放置在堆栈上，即可能无法保证编译器不会“优化”变量的位置并且不会像这样重新排序它们`sum1`，`sum2`, `pad`. 如果是这样，它们可以被放置在一个结构中。

问题与您的线程案例基本相同。类数据成员采用：

```
double *a;   // 4 bytes on x86, 8 bytes on x64
int niter;   // 4 bytes
int start;   // 4 bytes
int end;     // 4 bytes
// 4 bytes padding on x64 because doubles must be aligned
double sum;  // 8 bytes 
```

类数据成员在 x86 上占用 24 个字节，在 x64 上占用 32 个字节（x86 在 64 位模式下）。这意味着两个类实例可以放在同一个缓存行中，或者可能共享一个。同样，您可以`sum`在至少 32 个字节的大小之后添加一个填充数据成员：

```
class Calc
{
private:
    double *a;
    int niter;
    int start;
    int end;
    double sum;
    char pad[32];
...
}; 
```

请注意`private`，包括由该子句创建的隐式私有副本在内的变量`reduction`可能驻留在各个线程的堆栈上，因此相隔不止一个缓存行，因此不会发生错误共享，并且代码并行运行得更快。

编辑：我忘了提到大多数编译器在优化阶段会删除未使用的变量。在 OpenMP 部分的情况下，填充大部分都被优化了。这可以通过应用对齐属性来解决（警告：可能特定于 GCC）：

```
double sum1 __attribute__((aligned(64))) = 0;
double sum2 __attribute__((aligned(64))) = 0; 
```

尽管这消除了错误共享，但它仍然阻止大多数编译器使用寄存器优化，因为`sum1`和`sum2`是共享变量。因此它仍然会比使用归约的版本慢。在我的测试系统上，如果串行执行时间为 20 秒，则在缓存行边界上对齐两个变量可将执行时间从 56 秒减少到 30 秒。这只表明有时 OpenMP 结构会破坏一些编译器优化，并且并行代码的运行速度可能比串行代码慢得多，因此必须小心。

您可以制作这两个变量`lastprivate`，这将允许编译器对它们执行寄存器优化：

```
#pragma omp parallel sections num_threads(2) lastprivate(sum1,sum2) 
```

通过这种修改，部分代码的运行速度与使用工作共享指令的代码一样快。另一种可能的解决方案是累积到局部变量并分配给`sum1`循环`sum2`完成后：

```
#pragma omp section
{
    double s = 0;
    for (int i = 0; i < niter / 2; i++)
    {
        for (int j = 0; j < niter; j++)
        {
            for (int k = 0; k < niter; k++)
            {
                double x = sin(a[i]) * cos(a[j]) * sin(a[k]);
                s += x;
            }
        }
    }
    sum1 = s;
}
// Same for the other section 
```

这一个本质上等同于`threadprivate(sum1)`。

不幸的是我没有`boost`安装所以我无法测试你的线程代码。尝试使用`Calc::run()`so 执行整个计算，看看使用 C++ 类对速度有什么影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:51:49.027

*太长了，不能作为评论*

`sin`和的实现有些奇怪`cos`。

（编辑：当然它与**and****无关，但与数组的访问模式有关`sin``cos``a`**）。

（**编辑2：并且还消除了大量冗余`sin`和`cos`调用。在函数`single_thread`中，编译器将循环不变调用移动到`sin`循环`cos`之外，但它没有在`Calc::run`方法中移动它们。所以这解释了性能上的差异。是时候提出一个问题，为什么编译器会做不同的事情:)**）

比较具有和不具有以下更改的程序。

虽然单线程版本的执行时间大致相同（约 12 秒），但原始多线程版本的执行时间约为 18 秒（即比单线程版本慢），但修改后的多线程版本执行时间约为 7秒 ( `niter == 1000`)。

```
--- thread-smp-orig.cxx        2012-12-10 12:40:03.547640307 +0200
+++ thread-smp.cxx        2012-12-10 12:37:27.990650712 +0200
@@ -26,11 +26,13 @@ public:
         double x;
         for (int i = start; i < end; i++)
         {
+            double sai = sin(a[i]);
             for (int j = 0; j < niter; j++)
             {
+                double caj = cos(a[j]);
                 for (int k = 0; k < niter; k++)
                 {
-                    x = sin(a[i]) * cos(a[j]) * sin(a[k]);
+                    x = sai * caj * sin(a[k]);
                     sum += x;
                 }
             }
@@ -48,11 +50,13 @@ double single_thread(double a[], const i
     double x;
     for (int i = 0; i < niter; i++)
     {
+        double sai = sin(a[i]);
         for (int j = 0; j < niter; j++)
         {
+            double caj = cos(a[j]);
             for (int k = 0; k < niter; k++)
             {
-                x = sin(a[i]) * cos(a[j]) * sin(a[k]);
+                x = sai * caj * sin(a[k]);
                 sum += x;
             }
         } 
```*

# android - 在以编程方式创建的 textview 上设置 onclick 事件

> ID：13798368
> 
> 赞同：5
> 
> 时间：2012-12-10T09:42:12.580
> 
> 标签：android, click, textview

我根据从数据库中检索到的记录动态创建可点击的文本视图，就像这样。

```
DBAdapter db = new DBAdapter(this);

db.open();
Cursor c = db.getAllProfiles();
if(c.moveToFirst())
{
    do{
        TextView tv = new TextView(this);
        tv.setText(c.getString(1));
        tv.setTextSize(18);
        tv.setTextColor(Color.BLACK);
        tv.setClickable(true);
        tv.setPadding(0, 10, 0, 0);
        tv.setGravity(Gravity.CENTER);
        mainLayout.addView(tv);

        tv.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
        Toast.makeText(getBaseContext(), tv.getText().toString(), Toast.LENGTH_LONG).show();
            }
        });

    }while(c.moveToNext());
}
else
    Toast.makeText(getBaseContext(), "No Profiles", Toast.LENGTH_LONG).show();
db.close(); 
```

如何在每个 texview 上独立设置点击事件？在我看到它的路上，如果我在循环上创建一个点击事件，点击事件可能会被所有文本视图触发。

*更新尝试在每个循环中添加事件，但出现此错误：

> “不能引用以不同方法定义的内部类中的非最终变量”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T09:45:55.630

将代码更改为将 OnClickListener 添加到 TextView

```
TextView tv;
     if(c.moveToFirst())
            {
                do{
                    tv = new TextView(this);
                    tv.setText(c.getString(1));
                    tv.setTextSize(18);
                    tv.setTextColor(Color.BLACK);
                    tv.setClickable(true);
                    tv.setPadding(0, 10, 0, 0);
                    tv.setGravity(Gravity.CENTER);
                    tv.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // do you work here
                     }
                    });
                    mainLayout.addView(tv);

                }while(c.moveToNext());
            } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T09:45:28.647

用这个

```
do{
                TextView tv = new TextView(this);
                tv.setText(c.getString(1));
                tv.setTextSize(18);
                tv.setTextColor(Color.BLACK);
                tv.setClickable(true);
                tv.setPadding(0, 10, 0, 0);
                tv.setGravity(Gravity.CENTER);
                tv.setId(1)
                tv.setOnClickListner(this);
                mainLayout.addView(tv);

            }while(c.moveToNext()); 
```

并放置一个 onClick 方法，如下所示

```
 @Override
public void onClick(View v)
{
    if(v.getId()==1)
    {

        // do stuf here
    }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T09:57:30.730

用这种方式...

```
tv.setOnClickListener(new OnClickListener()
                    {

                        public void onClick(View voew) 
                        {
                             TableRow t = (TableRow) voew; //Your Layout
                              TextView firstTextView = (TextView) t.getChildAt(0);
                              String firstText = firstTextView.getText().toString();
                         }
                   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T09:46:13.977

**在我看到它的路上，如果我在循环上创建一个点击事件，点击事件可能会被所有文本视图触发。**

=> 这怎么可能？仅供参考，当且仅当点击动作被触发时，点击 evnet 代码才会被触发。所以`setOnClickListener`像往常一样分配你可以分配。

```
do {
 tv.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {

    }
  });
} while(c.moveToNext()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T09:56:43.273

如果休息一切都好，那么你应该

试试这个

```
tv.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {
                Toast.makeText(getBaseContext(), ((TextView)v).getText().toString(), Toast.LENGTH_LONG).show();
                    }
                }); 
```

希望有帮助

# windows - 在 Powershell 中将文件从一台机器复制到另一台机器

> ID：13798370
> 
> 赞同：0
> 
> 时间：2012-12-10T09:42:13.777
> 
> 标签：windows, powershell, iis

我目前正在一台机器上生成文档，并在脚本中使用以下命令将其发布到 Web 服务器：

```
net use "\\someShare" PASSWORD /user:username
del /S /Q "\\someShare"
xcopy /E /Y Documentation\html\* "\\someShare\" 
```

但是，在脚本中使用纯文本形式的密码是一个非常糟糕的主意，因此我正在寻找当前解决方案的替代方案。想法？

我绝对会喜欢使用某种访问控制的解决方案，因为应该允许许多不同的人将他们自己的文档发布到 Web 服务器，但不要弄乱彼此的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:34:10.933

如果您的脚本以交互方式运行，您可以要求使用凭据，并使用 New-PSDrive cmdlet：

```
$cred=get-credential
New-PSDrive -Name Z -PSProvider FileSystem -Root \\server\share -Credential $cred  # you may add -Persist to have a peristent drive 
```

如果您希望脚本在没有交互的情况下运行，您必须将您的凭据保存到文件中，例如：

```
$Cred.Password | ConvertFrom-SecureString | Set-Content $env:USERPROFILE\$env:USERNAME.txt 
```

当您需要通行证时：

```
$Pass = Get-Content $env:USERPROFILE\$env:USERNAME.txt | ConvertTo-SecureString
$Cred = New-Object System.Management.Automation.PsCredential("username@domain.com",$Password) 
```

# .net - 无法使用 webapi 在 Sendgrid 上发送安全电子邮件

> ID：13798371
> 
> 赞同：5
> 
> 时间：2012-12-10T09:42:15.003
> 
> 标签：.net, security, sendmail, sendgrid

我无法使用 web api 在 Sendgrid 上发送“安全”电子邮件。（平台 - .Net/C#、SendgridMail）

它适用于 http url (http://sendgrid.com/api/mail.send)，但适用于 https (https://sendgrid.com/api/mail.send) 则失败。

```
 private void SendMail()
    {
        var message = SendGrid.GenerateInstance();

        //set the message recipients
        message.AddTo("to@sonedomain.com1");

        //set the sender
        message.From = new MailAddress("from@somedomain.com1");

        //set the message body
        message.Html = "<html><p>Hello</p><p>World</p></html>";

        //set the message subject
        message.Subject = "Hello World HTML Test";

        //create an instance of the Web transport mechanism
        var transportInstance = SendGridMail.Transport.REST.GetInstance(new NetworkCredential("myusername", "mypassword"),"https://sendgrid.com/api/mail.send");

        //send the mail
        transportInstance.Deliver(message);
    } 
```

我得到一个 ArgumentException：未知元素：html。

进一步深入研究代码，我收到此错误：“400 Bad Request, The plain HTTP request was sent to HTTPS port, nginx/0.7.65”

**注意**
它适用于*http* url 即： (http://sendgrid.com/api/mail.send) 在上面的 GetInstance 函数中，而不是 (https://sendgrid.com/api/mail.send)。

通过浏览器发送电子邮件请求工作正常：（https://sendgrid.com/api/mail.send.json?to=to%40somedomain.com1&from=from%40somdomain.com1&subject=Test%20SG%20API&text=sometext&html=%3Cb% 3E%20test%20SG%20api%20body&api_user=sendgridusername&api_key=sendgridpassword)

对此的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T21:58:52.513

我为 SendGrid 工作。我做了一些测试，这是 C# 包装器的一个限制，特别是用于进行 HTTP 调用的 CodeScales 库。不幸的是，CodeScales 根本不支持 HTTPS。我为此在 GitHub 上打开了一个问题：[https ://github.com/sendgrid/sendgrid-csharp/issues/21](https://github.com/sendgrid/sendgrid-csharp/issues/21)

我将开始计划重构应用程序以使用 RestSharp 进行 API 调用。抱歉，添麻烦了！

# wordpress - 如何在 Wordpress 评论上显示“自定义昵称”？

> ID：13798372
> 
> 赞同：0
> 
> 时间：2012-12-10T09:42:15.820
> 
> 标签：wordpress

当我发表评论时，它总是打印在用户 CMS 区域上设置的不可编辑的昵称。我想打印自定义昵称（可以通过下拉列表选择的昵称）。

我实际使用`comment_author_link();`过，似乎还不够。我应该如何使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:51:43.887

WordPress 使用以下代码检索当前评论的作者：

```
/**
 * Retrieve the author of the current comment.
 *
 * If the comment has an empty comment_author field, then 'Anonymous' person is
 * assumed.
 *
 * @since 1.5.0
 * @uses apply_filters() Calls 'get_comment_author' hook on the comment author
 *
 * @param int $comment_ID The ID of the comment for which to retrieve the author. Optional.
 * @return string The comment author
 */
function get_comment_author( $comment_ID = 0 ) {
    $comment = get_comment( $comment_ID );
    if ( empty($comment->comment_author) ) {
        if (!empty($comment->user_id)){
            $user=get_userdata($comment->user_id);
            $author=$user->user_login;
        } else {
            $author = __('Anonymous');
        }
    } else {
        $author = $comment->comment_author;
    }
    return apply_filters('get_comment_author', $author);
}

/**
 * Displays the author of the current comment.
 *
 * @since 0.71
 * @uses apply_filters() Calls 'comment_author' on comment author before displaying
 *
 * @param int $comment_ID The ID of the comment for which to print the author. Optional.
 */
function comment_author( $comment_ID = 0 ) {
    $author = apply_filters('comment_author', get_comment_author( $comment_ID ) );
    echo $author;
} 
```

您可以看到您对 function 给出的返回字符串进行了操作`get_comment_author`。
您可以做的是在您的`functions.php`:

```
add_filter('get_comment_author', 'my_comment_author', 10, 1);

function my_comment_author( $author = '' ) {
    // Get the comment ID from WP_Query

    $comment = get_comment( $comment_ID );

    if ( empty($comment->comment_author) ) {
        if (!empty($comment->user_id)){
            $user=get_userdata($comment->user_id);
            $author=$user->display_name; // this is the actual line you want to change
        } else {
            $author = __('Anonymous');
        }
    } else {
        $author = $comment->comment_author;
    }

    return $author;
}); 
```

希望能帮助到你！

# javascript - JSP 特殊字符验证不起作用

> ID：13798381
> 
> 赞同：2
> 
> 时间：2012-12-10T09:42:46.077
> 
> 标签：javascript, jsp

我已经编写了验证 JSp 页面的代码。但是特殊字符验证不起作用。有人可以告诉我原因。如果我的方法有误，请用正确的方法通知我。

**JSP 代码**

```
<%-- 
    Document   : LapsePeriodicFeedBack
    Created on : Dec 7, 2012, 2:50:28 PM
    Author     : Admin
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<%@ page import="java.util.*" %>
<%@page import="PeriodicFeedBack.PeriodicType"%>

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>LapsePeriodicList</title>
        <style>

        body {
            font: 11px Arial, Helvetica, sans-serif;
            background-color:#E4Eff4;
            padding: 0;
            margin: 10px;
        }
        </style>
        <script>
            function validateForm(){
                var iChars = "!@#$%^&*()+=-[]\\\';,./{}|\":<>?";
                var selectindex=document.forms["lapse"]["periodmenu"].selectedIndex;
                var whitespace = /\w+/g;
                var x= document.forms["lapse"]["lapsedays"].value;
                var textlength=document.forms["lapse"]["lapsedays"].length;
                if(x==""){
                    alert("Days Cant Be Empty");
                    return false;
                }
                if(!whitespace.test(x)){
                    alert("White Spaces are not Allowed");
                    return false;
                }
                if(selectindex==0){

                    alert("Please select Days from menu");
                }
                if(isNaN(x)){
                    alert("Only Numbers Allowed");
                    return false;
                }

        if(x.indexOf(iChars) != -1) {
        alert ("The box has special characters. \nThese are not allowed.\n");
        return false;
   }

 }

        </script>

    </head>
    <body>
        <form  method="post" name="lapse" onsubmit="return validateForm()" action="LapsePeriodicFbUpdate">
            <table width="450px" border="1" align="center" style='border-collapse: collapse;font: 13px Arial, Helvetica, sans-serif;' bordercolor='#000000'>

                <tr  style="color:'#ffffff';background-color:#CA1619;background-repeat:repeat-x;font: 13px Arial, Helvetica, sans-serif;">
                    <td colspan="4" align="center">
               <font color="#ffffff" > <b>Periodic Feedback List</b></font></td></tr>
                <tr >
                    <td align="center">
                    Periodic Feedback Days</td>
                    <td align="center">
                        <select id="periodmenu" STYLE="width: 150px" name="periodmenu">
                            <option>Select</option>
                            <%
        PeriodicType p = new PeriodicType();
        ArrayList periodicList = p.getPeriodicType();
        for (int i = 0; i < periodicList.size(); i++) {%>
        <option value="<%=periodicList.get(i)%>">

                                <% out.println(periodicList.get(i));
        }%>
                            </option>
                    </select></td>
                </tr>
                <tr>
                    <td align="center">
                    Lapse Days &nbsp;</td>
                    <td align="center">
                     <input id="lapsedays" name="lapsedays" onkeyup="nospaces(this)" style="width:145px;" type="text" />
                    </td>
                     </tr>
                     <tr>
                         <td align="right" colspan="2"><input type="submit" id="submit" value="Submit"/></td>
                     </tr>

            </table>
        </form>
        <p>
        &nbsp;</p>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:03:05.647

该行`x.indexOf(iChars)`与`x`FULL`iChars`字符串匹配。

您可以使用正则表达式搜索，如下所示：

```
var iChars = "[!@#$%^&*()+=\\-\\[\\]\\\';,./{}|\":<>?]{1}";
....
if(x.search(iChars) != -1)
.... 
```

# backbone.js - Handlebar.js if 语句不起作用

> ID：13798382
> 
> 赞同：0
> 
> 时间：2012-12-10T09:42:52.077
> 
> 标签：backbone.js, if-statement, handlebars.js

我在列表表模板中添加了一个组合框，并且我想根据模型中的数据库呈现组合框，那么有什么问题吗？请帮忙..

```
<script type="text/x-handlebars-template" id="listItemTmpl">
<tr>                             
    <td>{{partNo}}</td>
    <td>
         <select name="selectCombo" id="selectCombo">
                {{#each chks}}
                <option value='{{myModel.id}}' {{#if(this.id==myModel1.status)}}selected{{/if}}>{{myModel1.name}}</option>
                {{/each}}
            </select>
    </td>
</tr>

</script> 
```

我有两个模型；一个是，

```
 myModel1=Backbone.Model.extend({
    url:url,
    defaults:{
      name:"",
      status:""
  }
 }); 
```

另一个是；

```
myModel=Backbone.Model.extend({
  url:url,
  defaults:{

  }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T14:05:07.787

问题是，车把不是这样工作的。该表达式`{{#if(this.id==myModel1.status)}}`不是有效的车把 if 块。

Handlebars 是一个语义的、声明性的模板引擎。它不支持任意 javascript 表达式。您可以使用该块检查的唯一一件事是，某`#if`事是否真实（不是`false`、`undefined`、`null`或）。`""``[]`

首选方法是在渲染模板之前评估条件，并使用视图模型将结果传递给模板。在您的情况下，您可以为数组`isSelected`中的每个对象添加一个属性`chks`，然后在模板中简单地评估它

```
{{#if isSelected}}selected{{/if}} 
```

有关如何使用把手的示例，请参阅[handlebars.js 文档。](http://handlebarsjs.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T17:25:08.003

只是一个更新。最新版本的 Handlebars 使用 block.fn() 而不是 block()。否则可能会抛出错误。

```
Handlebars.registerHelper('ifeq', function(a, b, block) {
    return a == b ? block.fn() : block.inverse();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T17:05:32.997

通常，您应该使用`isSelected`标志，而[fencliff 的答案](https://stackoverflow.com/a/13802519/479863)涵盖了这一点。但是，有时添加额外的标志不是一个合理的选择，如果是这种情况，您可以添加您的`{{#ifeq}}`助手。像这样简单的东西：

```
Handlebars.registerHelper('ifeq', function(a, b, block) {
    return a == b ? block() : block.inverse();
}); 
```

然后在模板中：

```
<option value='{{myModel.id}}' {{#ifeq id myModel1.status}}selected{{/ifeq}}>{{myModel1.name}}</option> 
```

演示：http: [//jsfiddle.net/ambiguous/rsyv9/](http://jsfiddle.net/ambiguous/rsyv9/)

# android - Android 应用程序的 vb.net 代码

> ID：13798383
> 
> 赞同：0
> 
> 时间：2012-12-10T09:43:10.423
> 
> 标签：android, vb.net, blackberry, bit-shift, vb4android

我正在开发一个黑莓应用程序。这个应用程序已经在“Basic4Android”程序中在Android中开发。android 应用程序的代码是用 vb.net 编写的。我需要为 BlackBerry 编写完全相同的代码。我试图理解这种方法，但我无法理解，因为我不是 vb.net 的专家。我不会粘贴整个方法，而只会粘贴我需要澄清的部分：

```
Sub HEX_T24_SHORT_GPS(latitude_decimal_degrees As Double, longitude_decimal_degrees As Double, speed_knots As Int, heading_degrees As Int, time_seconds_since_midnight_gmt As Int, alert_on As Boolean, alert_ack As Boolean, external_interface_control As Boolean, send_extended As Boolean) As String
    Dim pBuffer(11) As Int
    pBuffer(0)=0 ' T24 MSGID 0
    Log("pBuffer(2)" & pBuffer(2))
    Dim t1 As Double
    'Get latitude sign
    Dim lat_south As Boolean
    lat_south=True
    If latitude_decimal_degrees<0 Then lat_south=False
    'Get Longitude sign 
    Dim lon_west As Boolean
    lon_west=True
    If longitude_decimal_degrees<0 Then lon_west=False
    'Get number of second since midnigh extra bit
    Dim num_of_second_extra_bit As Boolean 
    num_of_second_extra_bit=False
    If time_seconds_since_midnight_gmt > 0xFFFF Then num_of_second_extra_bit=True
    'Convert latitude in bytes 1 to 3
    latitude_decimal_degrees = Abs(latitude_decimal_degrees*60000) 
```

“如果 time_seconds_since_midnight_gmt > 0xFFFF”是什么意思？这里发生了什么“latitude_decimal_degrees = Abs(latitude_decimal_degrees*60000)”。我检查了“Basic4Android”文档，但找不到 Abs API。

```
If num_of_second_extra_bit=True Then latitude_decimal_degrees=latitude_decimal_degrees + 0x800000
    pBuffer(1)=Bit.ShiftRight(Bit.And(latitude_decimal_degrees, 0xFF0000),16)
    pBuffer(2)=Bit.ShiftRight(Bit.And(latitude_decimal_degrees, 0x00FF00),8)
    pBuffer(3)=Bit.And(latitude_decimal_degrees, 0xFF) 
```

位移是如何应用的？在 int 和 hex 值之间使用“AND”运算吗？pBuffer(1) 的最终值是多少？步骤 pBuffer(1) 到 pBuffer(3) 的目的是什么。它在做什么，latitude_decimal_degrees的最终值是多少？最终值是字节，字节数组还是十六进制？请解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:12:26.953

> “如果 time_seconds_since_midnight_gmt > 0xFFFF”是什么意思？

它的作用是检查 time_seconds_since_midnight_gmt 是否大于 65,535 - 这可能是某种补偿 - 请记住一天中有 86,400 秒。

> 这里发生了什么“latitude_decimal_degrees = Abs(latitude_decimal_degrees*60000)”

纬度的小数部分乘以 60,000 - 这几乎是基于上下文的 - 它可能与您移动的速度有关 - 您应该查看调用此函数的位置并尝试计算找出进入这个变量的数字范围，然后尝试从中推断出来。

> 位移是如何应用的？

添加第一个 0x800000（这是将第 23 位设置为高）

> 在 int 和 hex 值之间使用“AND”运算吗？

是的。看起来你把事情搞混了——一个整数值可以以基数 2（二进制）、基数 8（八进制）、基数 10（通常的方式）和基数 16（十六进制）表示——它仍然是相同的值。

> pBuffer(1) 的最终值是多少？请解释。

好的 - 让我们看一个例子：

latitude_decimal_degrees = 0xE653 (58,963)

然后添加 0x800000

纬度 = 0x80E653

然后和 0xFF0000

纬度 = 0x800000

最后右移 16

纬度 = 0x000080

另一方面，这意味着什么，取决于您的解释。

# c# - 如何正确卸载 XNA 中的图形资源？

> ID：13798387
> 
> 赞同：3
> 
> 时间：2012-12-10T09:43:26.000
> 
> 标签：c#, .net, xna

我正在开发一款使用大量纹理的游戏。因此，我需要在不再使用纹理时正确卸载它们。

卸载纹理（还有顶点缓冲区、着色器和其他图形资源）的正确方法是什么

我听说打电话`Dispose()`不是这样做的正确方法。

所有纹理都是通过加载的，`Texture2D.FromStream`所以我根本不使用`ContentManager`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T10:10:39.777

您应该使用 ContentManager.Unload() 卸载 ContentManager 已加载的内容。

应该在 Game.UnloadContent 函数中处理（使用 Dispose()）您自己创建的纹理和其他一些资源而不通过 ContentManager。

# java - 使用 MySQL 和 Qtjambi 的 Java 客户端-服务器应用程序：哪个许可证？

> ID：13798388
> 
> 赞同：2
> 
> 时间：2012-12-10T09:43:42.037
> 
> 标签：java, mysql, licensing, qt-jambi

我用 Java 开发了一个客户端-服务器应用程序。我想使用包含我的程序的 jar 和放置在不同目录中的 Qtjambi jar (LGPL) 的 zip 文件分发客户端。在服务器端，我有一个使用 mysql 连接器 (GPL) 与 MySQL 数据库通信的 servlet。我需要在哪个许可证下发布我的软件？我需要公开我的源代码吗？

非常感谢罗塞拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:54:47.347

您不必公开您的源代码。您可以在任何您想要的许可证下发布客户端。

LGPL 允许动态链接到不同许可下的软件。将其用作单独目录中的库即可满足此条件。只需记住将带有 GNU LGPL 的文本文件放入库目录中，并提及可以找到 LGPL 库的源代码的位置。

然而，GPL 不允许动态链接。因此，当您的服务器包含 GPL 软件时，您只能在 GNU GPL 下分发它。但是，只要您自己使用服务器，就不会分发它。GPL 仅适用于软件的分发。只要您将软件留给自己，您就完全没有义务。根据 GPL，让人们通过网络连接到您的软件并不是一种分发形式，因为 GPL 软件不会离开您的硬件。

还有一个称为 Affero 通用公共许可证 (AGPL) 的许可证，通过要求*通过网络使用该软件的*人获得许可证来填补这个漏洞，但普通 GPL 不需要类似的东西。

# antlr - 字符串模板：使所有变量声明全局化

> ID：13798395
> 
> 赞同：3
> 
> 时间：2012-12-10T09:43:57.240
> 
> 标签：antlr, grammar, stringtemplate, code-translation

我正在尝试使用 ANTLR+StringTemplate 实现翻译器。我有一种类似于 java 的起始语言和多种目标语言。

我用了这个例子：[http ://www.antlr.org/wiki/display/ST/Language+Translation+Using+ANTLR+and+StringTemplate](http://www.antlr.org/wiki/display/ST/Language+Translation+Using+ANTLR+and+StringTemplate)

我的一种目标语言需要全局声明所有变量。我写了一个识别变量的语法，但是我在我的模板中找不到使局部变量全局声明的方法。

当然，如果我只有一个翻译，我可以做到，但我有多个翻译，其中一些有局部和全局变量。我想在特定的模板文件中制作它。

例如，如果我可以在模板中定义某种变量以保存所有变量声明的列表并在我定义全局范围时在最后使用它，那就太好了......但我不知道这是否可能.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T21:00:45.167

解析器必须在将变量传递给模板之前对其进行跟踪。这并不意味着您需要一个解析器用于基于全局的目标，而另一个解析器用于其他目标，它只是意味着您需要在目标中定义一些空模板。

这是一个非常简单的例子，说明如何做到这一点。我不建议您的案例是这个理想，但我希望它能给您足够的工作。

假设您的源语法，类似于 Java 的语法，接受如下代码：

```
class Foobar { 
    var a;
    var b;
    var myMethod(var x, var y) { 
       var c;
       var d;
    }
} 
```

类`Foobar`包含成员字段`a`和`b`，成员方法`myMethod`包含局部变量`c`和`d`。为论证起见，假设您希望将`a`、`b`、`c`和`d`视为全局目标的全局变量，否则视为普通变量。

这是一个接受上面定义的输入的语法，为模板输出做好准备：

```
grammar JavaLikeToTemplate;

options { 
    output = template;
}

@members { 
    private java.util.ArrayList<String> globals = new java.util.ArrayList<String>();

}

compilationUnit : class_def EOF 
                    -> compilationUnit(classDef={$class_def.st}, globals={globals});
class_def       : CLASS ID LCUR class_body RCUR
                    -> class(name={$ID.text}, body={$class_body.st});
class_body      : (t+=class_element)+
                    -> append(parts={$t});
class_element   : class_field
                    -> {$class_field.st}
                | class_method
                    -> {$class_method.st};
class_field     : VAR ID SEMI {globals.add($ID.text);}
                    -> classField(name={$ID.text});
class_method    : VAR ID LPAR paramlist? RPAR LCUR method_body RCUR
                    -> classMethod(name={$ID.text}, params={$paramlist.st}, body={$method_body.st});
method_body     : (t+=method_element)+
                    -> append(parts={$t});
method_element  : method_field
                    -> {$method_field.st};
method_field    : VAR ID SEMI {globals.add($ID.text);}
                    -> methodField(name={$ID.text});
paramlist       : VAR t+=ID (COMMA VAR t+=ID)*
                    -> paramList(params={$t});

CLASS   : 'class';
VAR     : 'var';
ID      : ('a'..'z'|'A'..'Z')('a'..'z'|'A'..'Z'|'_'|'0'..'9')*;
INT     : ('0'..'9')+;
COMMA   : ',';
SEMI    : ';';
LCUR    : '{';
RCUR    : '}';
LPAR    : '(';
RPAR    : ')';
EQ      : '=';
WS      : (' '|'\t'|'\f'|'\r'|'\n'){skip();}; 
```

请注意，解析器成员`globals`跟踪仅全局目标所关注的变量的名称，但仍会调用与字段/变量有关的模板。这确保了语法是目标中立的。

这是一个生成 Java 代码的模板。请注意，`compilationUnit`忽略输入`globals`，因为 Java 不使用它们。

```
group JavaLikeToJava;

compilationUnit(globals, classDef) ::=
<<
<classDef>
>>

class(name, body) ::= 
<<
public class <name> { 
    <body>
}
>>

classField(name) ::=
<<
private Object <name>;
>>

classMethod(name, params, body) ::=
<<
public Object <name>(<params>) {
    <body> 
}
>>

methodField(name) ::=
<<
    Object <name>;
>>

paramList(params) ::=
<<
    <params:{p|Object <p.text>}; separator=", ">
>>

append(parts) ::=
<<
 <parts;separator="\n">
>> 
```

这是一个全局目标的模板。请注意，许多类模板是空的，但会`compilationUnit`处理 input `globals`。

```
group JavaLikeToGlobal;

globals(names) ::=
<<
    <names:global()>
>>

global(name) ::=
<<
global <name>
>>

compilationUnit(globals, classDef) ::=
<<
<globals:globals();separator="\n">
<classDef>
>>

class(name, body) ::= 
<<
<body>
>>

classField(name) ::=
<<>>

classMethod(name, params, body) ::=
<<
<name>(<params>):
    <body>
end
>>

methodField(name) ::=
<<
>>

paramList(params) ::=
<<
    <params:{p| <p.text>}; separator=", ">
>>

append(parts) ::=
<<
 <parts;separator="\n">
>> 
```

这是我将用来测试语法和模板的启动器类。

```
public class JavaLikeToTemplateTest {

    public static void main(String[] args) throws Exception {

        final String code = "class Foobar {\n var Foobar_a;\n var Foobar_b;\n var doSomething() {\n  var doSomething_a;\n  var doSomething_b;\n }\n}"; 

        process(code, "JavaLikeToJava.stg");
        process(code, "JavaLikeToGlobal.stg");

    }

    private static void process(final String code, String templateResourceName)
            throws IOException, RecognitionException, Exception {
        CharStream input = new ANTLRStringStream(code);
        JavaLikeToTemplateLexer lexer = new JavaLikeToTemplateLexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);

        JavaLikeToTemplateParser parser = new JavaLikeToTemplateParser(tokens);

        InputStream stream = JavaLikeToTemplateTest.class.getResourceAsStream(templateResourceName);
        Reader reader = new InputStreamReader(stream);
        parser.setTemplateLib(new StringTemplateGroup(reader));
        reader.close();
        stream.close();

        JavaLikeToTemplateParser.compilationUnit_return result = parser.compilationUnit();

        if (parser.getNumberOfSyntaxErrors() > 0){
            throw new Exception("Syntax Errors encountered!");
        }

        System.out.printf("Result with %s:%n%n", templateResourceName);
        System.out.println(result.toString());
    }
} 
```

这是测试类中硬编码的输入：

```
class Foobar {
 var Foobar_a;
 var Foobar_b;
 var doSomething() {
  var doSomething_a;
  var doSomething_b;
 }
} 
```

这是代码生成的输出，使用两个模板：

```
Result with JavaLikeToJava.stg:

public class Foobar { 
     private Object Foobar_a;
     private Object Foobar_b;
     public Object doSomething() {
            Object doSomething_a;
            Object doSomething_b; 
     }
}

Result with JavaLikeToGlobal.stg:

    global Foobar_a
    global Foobar_b
    global doSomething_a
    global doSomething_b

 doSomething():

 end 
```

关键是在解析器中跟踪全局变量，而不考虑目标语言，并将它们与非全局信息一起传递给语言的模板。目标语言的模板文件要么处理全局变量，要么忽略它们。模板接收到足够的信息来定义两种类型的语言（无论是否全部使用），因此无需创建新的解析器。

# c# - FileSystemWatcher 可以离线工作吗？

> ID：13798396
> 
> 赞同：4
> 
> 时间：2012-12-10T09:43:57.560
> 
> 标签：c#, wpf, filesystemwatcher

我编写了一个应用程序，该应用程序需要在用户*未*连接到网络时监控对同步脱机文件夹的更改。我已经使用了 FileSystemWatcher，它在用户连接到网络时运行良好，但是一旦他们处于离线状态，FileSystemWatcher 就会停止接收任何事件。

我在脱机文件夹中找不到任何有关文件系统事件的文档，有人在这个领域有经验吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:15:44.433

[http://www.codeproject.com/Articles/15656/Advanced-FileSystemWatcher](http://www.codeproject.com/Articles/15656/Advanced-FileSystemWatcher)

*   两个新的公共事件：NetworkPathAvailable 和 NetworkPathUnavailable。在代码中，用户将查看这些事件以确定网络路径是否可用，代码可以采取适当的措施继续工作，或者优雅地死掉。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:05:55.683

当用户脱机时，FileSystemWatcher 会捕获 Win32Error，并显示一条错误消息，指出“指定的网络名称不再可用”。这可以在**FileSystemWatcher.Error**事件中检测到。

此异常还具有将属性**EnableRaisingEvents**更改为*false*的效果。一旦用户重新上线，再次将其设置为*true*，您将再次收到通知。不幸的是，您不会收到有关用户离线时发生的情况的通知。

所以你的问题的最终答案是否定的，FileSystemWatcher 不处理离线文件通知。

# r - 如何使用 ggplot2 包在 R 中创建此图表。相关图？

> ID：13798399
> 
> 赞同：3
> 
> 时间：2012-12-10T09:44:20.483
> 
> 标签：r, ggplot2, data-visualization, correlation

我非常想使用纯 ggplot2 方法重新创建此图，因为我想使用该包解决我的所有绘图问题。

![我想使用 ggplot2 包重新创建的绘图](../Images/08a35b02fad21b4f6300cda094dd6b50.png)

下面给出了生成这个特定图的代码。

```
library(PerformanceAnalytics)
library(quantmod)
getSymbols(c('SPY','LQD','GLD'))
Data <- cbind(Cl(SPY),Cl(LQD),Cl(GLD))
Year <- as.factor(format(index(Data),'%Y'))
chart.Correlation(Data,bg=seq(1:5)[Year],pch=21)
par(xpd=TRUE)
legend(0, 1, as.vector(unique(Year)), fill=seq(1:5)) 
```

[你可以在这个网站](http://www.r-bloggers.com/graphically-analyzing-variable-interactions-in-r/)上阅读更多关于它的信息。

我创建了一个小数据集来玩。以下代码定义了一个 data.frame 并将其融合为 ggplot 通常喜欢的格式。

```
library(ggplot2)
library(reshape2)
mydf<-structure(list(SPY = c(141.37, 141.67, 140.54, 141.19, 141.07, 
                   141.54, 142.16, 143.24, 142.96, 143.02, 142.54, 142.82, 142.38, 
                   142.8, 143.95, 142.26, 142.13, 142.05, 142.79, 143.75, 144.86, 
                   141.31, 141.19, 138.91, 140.37, 141.29, 140.15, 141.28, 138.17, 
                   136.98, 133.43, 132.06, 130.72, 133.86, 134.99, 133.04, 135.24, 
                   135.91, 134.91, 137.37, 92.96, 92.85, 93.47, 90.67, 91.04, 89.09, 
                   86.95, 87.11, 84.37, 84.4, 85.06, 80.57, 84.05, 82.75, 83.11, 
                   83.68, 84.53, 87.39, 84.55, 82.83), 
           LQD = c(106.45, 107.25, 107.19, 107.15, 107.17, 107.03, 106.7, 106.59, 
                   106.71, 106.56, 106.87, 
                   106.81, 106.88, 106.59, 106.64, 106.3, 106.23, 106.18, 106.33, 
                   106.78, 105.73, 106.6, 106.47, 106.27, 106.05, 105.74, 106.51, 
                   106.07, 106.64, 106.48, 106.98, 106.8, 107.03, 107.17, 106.26, 
                   107.41, 107.38, 107.2, 107.18, 107.53, 100.61, 101.3, 101.47, 
                   100.62, 101.34, 102.6, 102.07, 101.85, 101.4, 101.6, 101.6, 100.1, 
                   99.6, 99.23, 98.57, 97.69, 99.53, 100.32, 99.12, 99.82), 
           GLD = c(62.28, 61.65, 60.17, 60.48, 60.85, 60.59, 60.63, 62.17, 61.97, 62.64, 
                   62.26, 63, 62.72, 64.23, 64.33, 64.06, 64.17, 63.77, 64.22, 64.83, 
                   85.57, 85.13, 84.77, 86.78, 86.55, 88.25, 88.58, 89.54, 87.99, 
                   86.7, 86.5, 87.42, 88.17, 87.89, 90.08, 90.3, 91.75, 91.15, 92.06, 
                   91.4, 86.23, 84.48, 85.13, 82.75, 84.46, 83.92, 80.76, 80.88, 
                   79.79, 80.39, 82.71, 84.52, 84.15, 84.58, 88.53, 88.95, 88.38, 
                   87.42, 89.5, 91.31), 
           Year = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 
                              1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 
                              2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
                              2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
                              3L, 3L, 3L, 3L, 3L, 3L), 
                            .Label = c("2007", "2008", "2009"), 
                            class = "factor")), 
      .Names = c("SPY", "LQD", "GLD", "Year"), 
      row.names = c("2007-01-02", "2007-01-03", 
                    "2007-01-04", "2007-01-07", "2007-01-08", "2007-01-09", "2007-01-10", 
                    "2007-01-11", "2007-01-15", "2007-01-16", "2007-01-17", "2007-01-18", 
                    "2007-01-21", "2007-01-22", "2007-01-23", "2007-01-24", "2007-01-25", 
                    "2007-01-28", "2007-01-29", "2007-01-30", "2008-01-02", "2008-01-03", 
                    "2008-01-06", "2008-01-07", "2008-01-08", "2008-01-09", "2008-01-10", 
                    "2008-01-13", "2008-01-14", "2008-01-15", "2008-01-16", "2008-01-17", 
                    "2008-01-21", "2008-01-22", "2008-01-23", "2008-01-24", "2008-01-27", 
                    "2008-01-28", "2008-01-29", "2008-01-30", "2009-01-01", "2009-01-04", 
                    "2009-01-05", "2009-01-06", "2009-01-07", "2009-01-08", "2009-01-11", 
                    "2009-01-12", "2009-01-13", "2009-01-14", "2009-01-15", "2009-01-19", 
                    "2009-01-20", "2009-01-21", "2009-01-22", "2009-01-25", "2009-01-26", 
                    "2009-01-27", "2009-01-28", "2009-01-29"), 
      class = "data.frame")
mydf<-data.frame(ID=rownames(mydf), mydf)
moltdf<-melt(mydf) 
```

现在我知道这个 moltdf 可以传递给 ggplot 但我不知道如何在上面信息密集的图中生成不同的段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T11:57:49.590

我认为你需要`ggpairs`在这里 - 可能还有一些进一步的调整。例子：

```
> library(GGally)
> ggpairs(mtcars) 
```

![简单的 ggpairs 演示](../Images/e401b11a285a142869449451f331ace3.png)

* * *

*更新*：基于添加数据的更新问题：

```
> ggpairs(mydf[, 2:5]) 
```

![mydf上的ggpairs](../Images/7ecd7a43667d13562db193f157a64549.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2019-04-27T12:03:25.460

```
library(PerformanceAnalytics)
mydata <- mtcars[, c(1,3,4,5,6,7)]
chart.Correlation(mydata, histogram=TRUE, pch=19) 
```

# android - android微调器-onItemSelected

> ID：13798404
> 
> 赞同：2
> 
> 时间：2012-12-10T09:44:50.960
> 
> 标签：android, spinner

我是初学者。我的微调器有问题。我想通过使用 onItemSelected 方法创建一个微调器并在 TextView 中显示该选定的微调器项

但是我的程序没有在模拟器中运行。它说“程序停止”..我在下面的程序中犯了什么错误。请帮助我..谢谢你..

我的 SpinOnItemActivity.java

```
package spinner.onitemsel;
import android.app.Activity;
  import android.os.Bundle;
 import android.view.View;
 import android.widget.AdapterView;
 import android.widget.ArrayAdapter;
 import android.widget.Button;
 import android.widget.Spinner;
 import android.widget.TextView;
 import android.view.View.OnClickListener;

  public class SpinOnItemActivity extends Activity  
  {
    Spinner sp= (Spinner) findViewById(R.id.spin);;

    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            this, R.array.spinner_array , android.R.layout.simple_spinner_item);

            public void onCreate(Bundle savedInstanceState)
            {           
                      super.onCreate(savedInstanceState);
                  setContentView(R.layout.activity_spin_on_item );

                    sp.performClick();

            }
            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {    
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
                sp.setAdapter(adapter);

                String Name = (String) sp.getSelectedItem();

                TextView tview1 = (TextView)findViewById(R.id.testtxt );
                tview1.setText(Name);

            }

 } 
```

我的 activity_spin_on_item.xml 文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".SpinActivity" >

<Spinner
    android:id="@+id/spin"
    android:layout_width="149dp"
    android:layout_height="66dp"
    android:layout_alignBottom="@+id/button1"
    android:layout_alignParentLeft="true"
    android:layout_alignRight="@+id/testtxt"
    android:layout_gravity="top" />

<TextView
    android:id="@+id/testtxt"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/testtxt2"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="44dp"
    android:gravity="bottom"
    android:text="Spin Txt" />

 </RelativeLayout> 
```

我的 logcat 报告

```
12-10 09:58:40.988: W/Trace(837): Unexpected value from nativeGetEnabledTags: 0
12-10 09:58:41.168: W/Trace(837): Unexpected value from nativeGetEnabledTags: 0
12-10 09:58:41.198: W/Trace(837): Unexpected value from nativeGetEnabledTags: 0
12-10 09:58:41.878: D/dalvikvm(837): GC_CONCURRENT freed 51K, 6% free 2830K/2996K, paused 12ms+3ms, total 56ms
12-10 09:58:41.878: D/dalvikvm(837): WAIT_FOR_CONCURRENT_GC blocked 25ms
12-10 09:58:41.968: D/AndroidRuntime(837): Shutting down VM
12-10 09:58:41.968: W/dalvikvm(837): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
12-10 09:58:41.988: E/AndroidRuntime(837): FATAL EXCEPTION: main
12-10 09:58:41.988: E/AndroidRuntime(837): java.lang.RuntimeException: Unable to start activity ComponentInfo{spinner.onitemsel/spinner.onitemsel.SpinOnItemActivity}: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not valid; is your activity running?
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.os.Looper.loop(Looper.java:137)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-10 09:58:41.988: E/AndroidRuntime(837):  at java.lang.reflect.Method.invokeNative(Native Method)
12-10 09:58:41.988: E/AndroidRuntime(837):  at java.lang.reflect.Method.invoke(Method.java:511)
12-10 09:58:41.988: E/AndroidRuntime(837):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-10 09:58:41.988: E/AndroidRuntime(837):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-10 09:58:41.988: E/AndroidRuntime(837):  at dalvik.system.NativeStart.main(Native Method)
12-10 09:58:41.988: E/AndroidRuntime(837): Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not valid; is your activity running?
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.view.ViewRootImpl.setView(ViewRootImpl.java:567)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.view.WindowManagerGlobal.addView(WindowManagerGlobal.java:246)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:69)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.widget.PopupWindow.invokePopup(PopupWindow.java:993)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.widget.PopupWindow.showAsDropDown(PopupWindow.java:899)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.widget.ListPopupWindow.show(ListPopupWindow.java:603)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.widget.Spinner$DropdownPopup.show(Spinner.java:981)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.widget.Spinner.performClick(Spinner.java:609)
12-10 09:58:41.988: E/AndroidRuntime(837):  at spinner.onitemsel.SpinOnItemActivity.onCreate(SpinOnItemActivity.java:35)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.app.Activity.performCreate(Activity.java:5104)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-10 09:58:41.988: E/AndroidRuntime(837):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-10 09:58:41.988: E/AndroidRuntime(837):  ... 11 more
12-10 10:03:42.109: I/Process(837): Sending signal. PID: 837 SIG: 9 
```

我编辑的代码：请检查一下..

```
 package spinner.onitemsel;
 import android.app.Activity;
 import android.os.Bundle;
 import android.view.View;
 import android.widget.AdapterView;
 import android.widget.ArrayAdapter;
 import android.widget.Spinner;
 import android.widget.TextView;

 public class SpinOnItemActivity extends Activity  
 {      
    ArrayAdapter<CharSequence> adapter;
    Spinner sp;
    TextView tview1;
    int length;

            public void onCreate(Bundle savedInstanceState)
            {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_spin_on_item );

                sp= (Spinner) findViewById(R.id.spin);

                adapter = ArrayAdapter.createFromResource(this, R.array.spinner_array ,           android.R.layout.simple_spinner_item);
                     adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

                sp.setAdapter(adapter);
                sp.performClick();       
            }
            public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {    
                String Name = (String) sp.getSelectedItem();
                tview1 = (TextView)findViewById(R.id.testtxt );
                tview1.setText(Name);

            }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:46:11.083

```
Spinner sp= (Spinner) findViewById(R.id.spin);;

ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            this, R.array.spinner_array , android.R.layout.simple_spinner_item); 
```

之后会进入你的`onCreate()`方法`setContentView()`

* * *

编辑：然后

```
 sp.setAdapter(adapter);
 TextView tview1 = (TextView)findViewById(R.id.testtxt ); 
```

之后也会进来`onCreate()`方法`setContentView()`

编辑：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_spin_on_item);
        Spinner sp = (Spinner) findViewById(R.id.spin);

        TextView tview1 = (TextView) findViewById(R.id.testtxt);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                this, R.array.spinner_array,
                android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        sp.setAdapter(adapter);

        sp.performClick();

    }

    public void onItemSelected(AdapterView<?> adapterView, View view, int i,
            long l) {

        String Name = (String) sp.getSelectedItem();
        tview1.setText(Name);

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T09:46:46.937

实际上你`Spinner sp`是**null**`sp.performClick();` ，所以当在应用程序中执行代码行时，会`onCreate()`崩溃`Null Pointer Exception`。

因为您`Spinner sp`在上面定义，`onCreate()`所以 android 找不到`Spinner sp`来自**Layout Xml**文件。它应该在`setContentView()`android nut shell 具有特定 Activity 的 Spinner 的引用之后。

**解决方案：**

把这些线，

```
Spinner sp = (Spinner) findViewById(R.id.spin);;

ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
            this, R.array.spinner_array , android.R.layout.simple_spinner_item); 
```

在`onCreate()`活动之后`setContentView(R.layout.activity_spin_on_item );`

就像是，

```
public void onCreate(Bundle savedInstanceState)
{           
 super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_spin_on_item );

 Spinner sp= (Spinner) findViewById(R.id.spin);;
 ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(
                this, R.array.spinner_array , android.R.layout.simple_spinner_item);
 adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
 sp.setAdapter(adapter);

 sp.performClick();
} 
```

**更新：2**

从您的 `activity_spin_on_item.xml` 文件中。

看父标签，

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".SpinActivity" > 
```

在这个属性

```
tools:context=".SpinActivity" 
```

应该`tools:context=".SpinOnItemActivity"`

# orchardcms - 果园CMS。探索是否打开了管理面板

> ID：13798410
> 
> 赞同：1
> 
> 时间：2012-12-10T09:45:08.123
> 
> 标签：orchardcms

我如何在代码中探索在 Orchard CMS 中现在打开的页面“管理面板”或“前端”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:59:40.437

只需使用`AdminFilter.IsApplied(requestContext)`. 当用户在管理仪表板中时，这是真的。

# android - 将 jsonArray 中的 500 个 FB 好友发送到服务器

> ID：13798415
> 
> 赞同：2
> 
> 时间：2012-12-10T09:45:19.483
> 
> 标签：android, facebook

在我们的应用程序中，我需要从 Facebook 服务器获取 Facebook 好友并将所有好友发送到 PHP 服务器。只有当我有一个小的朋友列表时，我才能将 Facebook 朋友列表发送到服务器，例如：--30 个朋友，如果是大的例如--500 个朋友，它无法将列表发送到服务器。我用来向服务器发送数据的代码是：

```
 json.put("UserId",SAVING_INFO_PREF.getString("USER_ID",""));

            for(int i=0;i<Friends_ID.size();i++)
            {
                JSONObject newjson = new JSONObject();
                newjson.put("facebookId",Friends_ID.get(i).toString());
                newjson.put("facebookUserName",Friends_Name.get(i));
                newjson.put("userThumbnailUrl",Friends_ThumbURL.get(i));
                jsArray.put(newjson);
            }   
            json.put("facebookfriends", jsArray); 
```

所以我被困在这里。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T12:38:48.927

将 fbFriends 发送到服务器时，我也遇到了同样的问题。实际上问题是我的数组包含特殊字符。我没有在 stringEntity 函数中指定字符集。

```
 StringEntity se = new StringEntity(json.toString(),HTTP.UTF_8);
        httpPostRequest.setEntity(se);
        httpPostRequest.setEntity(se); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:51:18.807

> 在我们的应用程序中，我需要从 facebook 服务器获取 facebook 朋友并将所有朋友发送到 php 服务器。

为什么不让“php 服务器”自己*获取*数据，这样就无需再次发送该数据……？

# html - 背景图片不显示

> ID：13798419
> 
> 赞同：0
> 
> 时间：2012-12-10T09:45:30.307
> 
> 标签：html, css

我有这个html：

```
<p class="separator" style="background:url('http://localhost:85/WebCamClone/public/images/home/separator.png') repeat-y;"></p> 
```

这个CSS：

```
 p.separator {
position: absolute;
height: 100%;
width: 10px;
top: 0px;
right: 46px;
z-index: 999;
} 
```

当我在新标签页中打开它时，我可以看到图像，但我看不到 p 标签中页面上显示的图像..为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:55:32.997

问题是你`height: 100%;`的身高不能像你期望的那样伸展。要解决此问题，您可以尝试以下选项：

1.  给你的高度像素值，就像你的宽度一样

2.  让你`html, body { height: 100%; }`和你的`height: 100%;`意志发挥作用

3.  分配`position: absolute`给您的图像

您可以选择其中一个，每个都应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:06:31.137

也许绝对位置会导致这个问题

为了确保使用彩色背景，如果第一步不起作用，则使用相对位置作为第二步，第三步：使用“位置：相对”到父容器

# c# - 如何列出标有 protobuf .net ProtoMember 属性的所有类成员（包括继承的）？

> ID：13798434
> 
> 赞同：-3
> 
> 时间：2012-12-10T09:46:31.057
> 
> 标签：c#, .net, inheritance, reflection, protobuf-net

拥有一个类类型（例如从 C 继承的 D，从 B 继承的 D）如何按从顶部父级[到底](http://code.google.com/p/protobuf-net/)部后代（B 成员， C成员，D成员）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:00:09.510

通常答案是使用`GetFields()`、`GetProperties()`和来检查反射`Attribute.IsDefined`。但是，在这种情况下，最好询问 protobuf-net 模型*它*认为存在什么：

```
using ProtoBuf;
using ProtoBuf.Meta;
using System;
[ProtoContract, ProtoInclude(5, typeof(Bar))]
public class Foo
{
    [ProtoMember(1)]
    public int X { get; set; }
}
[ProtoContract]
public class Bar : Foo
{
    [ProtoMember(1)]
    public string Y { get; set; }
}
static class Program {
    static void Main() {
        var metaType = RuntimeTypeModel.Default[typeof(Bar)];
        do {
            Console.WriteLine(metaType.Type.FullName);
            foreach(var member in metaType.GetFields())
            {
                Console.WriteLine("> {0}, {1}, field {2}",
                    member.Member.Name, member.MemberType.Name,
                    member.FieldNumber);
            }
        } while ((metaType = metaType.BaseType) != null);
    }
} 
```

这样做的好处是它甚至可以用于自定义配置（属性不是配置 protobuf-net 的唯一机制）

# windows - 打开并另存为对话框位置

> ID：13798435
> 
> 赞同：1
> 
> 时间：2012-12-10T09:46:37.543
> 
> 标签：windows, winapi

您好，我使用 Visual Studio 2010。我使用 OPENFILENAME 结构和函数 GetSaveFileName GetOpenFileName 来显示另存为（打开）对话框。问题是它第一次启动时出现在屏幕的左上角 (0,0)。这看起来真的很糟糕，用户总是倾向于在使用它之前将窗口移动到屏幕中间。不，我到处寻找解决这个问题的方法，但没有找到任何最终答案。我已经设置了窗口的所有者，但它没有帮助。我也尝试过挂钩它在 hookProcedure 中设置窗口位置。但是那个（出于某种奇怪的）原因总是会改变对话风格，而且它只在第一次起作用。下次显示窗口时，对话框将与父窗口的左上角对齐。我只是不明白。

我也尝试使用新的 IFileOpenDialog 和 IFileSaveDialog 但它没有编译（我使用 Windows 7） - 未定义的标识符。我是否需要包含 windows.h 以外的内容？

最后一件事......我还需要程序在 XP 中正确运行（IFileDialogue 是在 Vista 中引入的，我真的不明白它是否向后兼容）。

非常感谢。

# xml - XML 文件创建和 Viola-Jones

> ID：13798439
> 
> 赞同：0
> 
> 时间：2012-12-10T09:46:52.317
> 
> 标签：xml, image-processing, machine-learning, detection, adaboost

我正在尝试创建一个 XML 文件来检测与 Rainer Leinhart 的 haarcascade_frontalface_alt.xml 一样好的和健壮的手势。到目前为止，我已经尝试了各种培训技术，例如在[http://nayakamitarup.blogspot.com/2011/07/how-to-make-your-own-haar-trained-xml.html](http://nayakamitarup.blogspot.com/2011/07/how-to-make-your-own-haar-trained-xml.html)中发布的技术（大约几个小时到三天）和[http://note.sonots.com/edit.php?SciSoftware/haartraining](http://note.sonots.com/edit.php?SciSoftware/haartraining)中的一个（大约需要一周时间）。两者都没有生成可以成功检测到对应手的文件。你们有没有人尝试过这两种训练 XML 文件的方法并获得了成功的结果？我也试过邮寄这两个网站的作者，还是没有运气。

我还看到了 Paul Viola 和 Michael Jones 撰写的 Robust Real-Time Face Detection 文章（以及 Koji Ikehara 在此处发布的题为 Viola Jones Experiments (training sets) 的问题），你们中有人知道如何标准化样本图像吗？培训？有没有人遇到过任何工具来完成这项任务？

我是新来的，我将不胜感激对此的任何见解。谢谢！

# webforms - 用于在文本字段中显示多个项目的自定义控件

> ID：13798442
> 
> 赞同：1
> 
> 时间：2012-12-10T09:47:20.057
> 
> 标签：webforms

我正在寻找一个 Asp.Net WebForms 自定义控件，它允许用户从下拉列表中选择项目并将它们添加到控件的文本部分。同时为用户提供了一种从文本字段中删除项目的方法，类似于 Stackoverflow 处理标签的方式。

谢谢

# html - 由于 z-index，链接不可点击

> ID：13798446
> 
> 赞同：28
> 
> 时间：2012-12-10T09:47:47.703
> 
> 标签：html, css

我有一个页面上有一个绝对位置的 div，它在滚动时与另一个 div 重叠。当它滚动到特定的 div 时，我想让它不可见。

为此，我正在使用`z-index`. 我正在设置`z-index`要隐藏的 div 的 1，而其他 div 的设置要高得多`z-index`。但是它不会隐藏 div。如果我将其设置`z-index`为 -1，那么它会隐藏，但该 div 上的链接将不再可点击。我怎样才能解决这个问题？

这是我的代码：

**HTML：**

```
<div class="wrap">
    <div class="up"><div class="box"><a href="#">Should hide</a></div></div>   
    <div class="down">Should be visible</div>
</div> 
```

**CSS：**

```
.wrap{
    width: 300px;
    position: relative;
    overflow: hidden;
    border: 1px solid #000;

}
.up{
    height: 100px;   
}

.box{
    position: absolute;
    top: 20px;
    background: yellow;
    width: 100px;
    height: 100px;
    z-index: -1; 
}

.down{
    background: green;
    overflow: hidden;
    z-index: 200;
    height: 400px;
} 
```

所以上面例子中的问题是.box中的链接不可点击（因为-ve`z-index`值），如果我将它设置为正，它不会隐藏在.down后面。

**JSFiddle：http:** [//jsfiddle.net/G2xRA/](http://jsfiddle.net/G2xRA/)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-10T09:59:04.877

实际上`z-index`只适用于`position`所以我给了`position:relative;`你的`.down`课。

请参阅下面提到的**CSS** & **DEMO**。

```
.box{
        position: absolute;
        top: 20px;
        background: yellow;
        width: 100px;
        height: 100px;
        z-index: 1;  
    }

    .down {
        background: none repeat scroll 0 0 green;
        height: 400px;
        overflow: hidden;
        position: relative;
        z-index: 2;
    } 
```

[**演示**](http://jsfiddle.net/G2xRA/4/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-10T09:51:48.983

为了使 z-index 相互叠加，您将两个元素都定位。

更好的描述：

> 定义和使用
> 
> z-index 属性指定元素的堆栈顺序。
> 
> 具有较大堆栈顺序的元素始终位于具有较低堆栈顺序的元素之前。
> 
> 注意：z-index 仅适用于定位元素（位置：绝对、位置：相对或位置：固定）。

所以你需要：

```
.up {
    height: 100px;
    position: absolute;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T09:56:48.827

```
.box{
    position: absolute;
    top: 20px;
    background: yellow;
    width: 100px;
    height: 100px;
    z-index: 1;  
}

.down{
    background: green;
    overflow: hidden;
    z-index: 2;
    height: 400px;
    position:relative;
} 
```

在类中进行这 2 项更改。Z-index 在 .down 中不起作用，因为您没有放置位置。而且，.box 中不需要 -ive z-index。Z-index 像层一样工作，z-index 为 1 的元素将位于 z-index 高于 1 的任何元素下。当然，要使其正常工作，需要定位元素。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-19T16:56:32.773

我也有同样的问题。我通过将**z-index**值更改为大于 -1 的值来解决它。

我做了前面的第 2 层和后面的第 1 层，所以它起作用了。

# python - 一次写入多个文件

> ID：13798447
> 
> 赞同：5
> 
> 时间：2012-12-10T09:47:49.197
> 
> 标签：python, file

我有一个包含 196 个列表的文件，我想创建新的 196 个输出文件并将每个列表写入一个新文件，这样我将有 196 个输出文件，每个输出文件包含 1 个输入数据列表 这是输入文件：

```
"['128,129', '116,118', '108,104', '137,141', '157,144', '134,148', '138,114', '131,138', '248,207', '208,247', '246,248', '101,106', '131,115', '119,120', '131,126', '138,137', '132,129']"
"['154,135', '151,147', '236,244', '243,238', '127,127', '125,126', '122,124', '123,126', '127,129', '122,121', '147,134', '126,132', '128,137', '233,222', '222,236', '125,126']" 
```

.....例如，我只给出了 2 个列表，但总共有 196 个列表。输出应该是：

文件 1：

```
128,129
116,118
108,104 
```

文件2：

```
154,135
151,147
236.244 
```

当前代码：

```
fn = open("/home/vidula/Desktop/project/ori_tri/inpt.data","r")
fnew = fn.read()
fs = fnew.split('\n')
for value in fs:
    f = [open("/home/vidula/Desktop/project/ori_tri/input_%i.data" %i,'w') for i in range(len(list_of_files))]
    f.write(value)
    f.close() 
```

错误：列表不属性写入。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T10:41:30.260

您当前的代码正在将所有内容加载到内存中，这是非常不必要的，然后它会在不合适的地方列出一个列表，因此您的错误。尝试这个：

```
fn = open("/home/vidula/Desktop/project/ori_tri/inpt.data","r")
for i, line in enumerate(fn):
    f = open("/home/vidula/Desktop/project/ori_tri/input_%i.data" %i,'w')
    f.write(line)
    f.close() 
```

这只会将每一行写入每个文件。查找我用来进行索引的[枚举函数。](http://docs.python.org/2/library/functions.html)

完成此操作后，您仍然需要编写解析逻辑以将每一行转换为一系列行...我不会在这里为您执行此操作，因为您的原始代码也没有真正的逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:37:58.230

你的 f 是一个文件列表，你必须遍历它：

```
for file in f:
   file.write(value) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-28T20:25:31.433

您不能让 python 在列表类中查找 write 对象作为列表理解中的可迭代对象。该列表与 write() 方法不兼容。在 python 列表中附加。

假设您的数据文件中已经有新行，请创建一个过滤器对象以删除空白行，然后迭代：

```
string1 = '128,129', '134, 167', '127,189'
string2 = '154, 134', '156, 124', '138, 196'
l1 = list(string1)
l2 = list(string2)
data = [l1, l2]
f = open("inpt.data", "w")
for val in data:
    f.write(str(val))
    f.write('\n')
f.close()

with open("inpt.data", "r", encoding='utf-8') as fs:
    reader = fs.read()
    file = reader.split('\n')
    file = filter(None, file) 
```

最简单的方法：

```
# create one file for each list of data (1) on every new line 
i = 0
for value in file:
    i += 1
    f = open("input_%s.data" % i, 'w')
    f.write(value)
fs.close() 
```

pythonic简单的方法：

```
for i, line in enumerate(file):
    fi = open("input_%s.data" % i, 'w')
    fi.write(line)
fs.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:37:34.080

我假设您要读取 196 个文件，然后将数据（经过一些修改）写入新的 196 个文件。如果你使用 map 和 reduce（函数式编程），它可以做你想做的事。尽管在问题中没有太多解释，但我无能为力。

```
def modify(someString):
    pass # do processing

def newfiles(oldfilename): return '%s.new.txt'%(oldfilename) # or something 

filenames = ('a', 'b', 'c', 'd', ....) 
handles = [(open(x, 'r'), open(newfile(x), 'w')) for x in filenames] # not using generator
tmp = [y[1].write(modify(y[0].read())) for y in handles) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T10:45:22.880

我认为这就是你要找的：

```
with open("/home/vidula/Desktop/project/ori_tri/inpt.data","r") as fn:
    listLines = fn.readlines()

for fileNumber, line in enumerate(listLines):
    with open("/home/vidula/Desktop/project/ori_tri/input{0}.data".format(fileNumber), "w") as fileOutput:
        fileOutput.write(line) 
```

# c# - 如何在 MonoTouch 中将 NSRect/CGRect 转换回 RectangleF？

> ID：13798449
> 
> 赞同：4
> 
> 时间：2012-12-10T09:47:53.777
> 
> 标签：c#, xamarin.ios

*（这个问题与我之前问的相反，从 RectangleF[] 到 NSArray 时。请参阅此处：[如何将 RectangleF[] 转换为 CGRects 的 NSArray？](https://stackoverflow.com/questions/13702264/how-to-convert-rectanglef-into-nsarray-of-cgrects)）*

我有一个 3rd 方库和它的绑定。其中一个绑定是返回一个 NSArray（注意：它**不是**一个“ `NSArray*`”，而是一个普通的“ ”），因此MonoTouch 不工作/不支持`NSArray`返回`RectangleF[]`而不是。`NSArray`我现在遇到的问题：如何将返回`NSArray`的（`NSRect`我知道的）转换回一个`RectangleF[]`？

如果我循环遍历 NSArray：

```
for(uint i = 0; i < oHighlightAnnot.Rects.Count; ++i)
{
  IntPtr ptrRect = oHighlightAnnot.Rects.ValueAt(i);
  var oObj = new NSObject(ptrRect);
} 
```

并检查 oObj，我可以在调试器中看到它是一个 NSRect：

> {NSRect: {{121.3672, 265.76123}, {192.09813, 288}}}

但那又如何呢？`NSRect`没有暴露，也`CGRect`没有`RectangleF`继承自`NSObject`. 如何转换/转换回来？

完成方法如下：

```
public virtual NSArray Rects
{
    [Export ("rects")]
    get
    {
        NSArray nSArray;
        if (this.IsDirectBinding)
        {
            nSArray = (NSArray)Runtime.GetNSObject (Messaging.IntPtr_objc_msgSend (base.get_Handle (), PSPDFHighlightAnnotation.selRects));
        }
        else
        {
            nSArray = (NSArray)Runtime.GetNSObject (Messaging.IntPtr_objc_msgSendSuper (base.get_SuperHandle (), PSPDFHighlightAnnotation.selRects));
        }
        base.MarkDirty ();
        this.__mt_Rects_var = nSArray;
        return nSArray;
    }
    [Export ("setRects:")]
    set
    {
        if (this.IsDirectBinding)
        {
            Messaging.void_objc_msgSend_IntPtr (base.get_Handle (), PSPDFHighlightAnnotation.selSetRects_, (value != null) ? value.get_Handle () : IntPtr.Zero);
        }
        else
        {
            Messaging.void_objc_msgSendSuper_IntPtr (base.get_SuperHandle (), PSPDFHighlightAnnotation.selSetRects_, (value != null) ? value.get_Handle () : IntPtr.Zero);
        }
        base.MarkDirty ();
        this.__mt_Rects_var = value;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T14:08:31.023

*[此处](http://forums.xamarin.com/discussion/comment/1744/#Comment_1744)已对此进行了回答，但仅作记录：*

我的猜测是你看到一个 NSRect 包裹在一个 NSValue 中。

试试这个：

```
for(uint i = 0; i < oHighlightAnnot.Rects.Count; ++i)
{
    IntPtr ptrRect = oHighlightAnnot.Rects.ValueAt(i);
    var val = new NSValue(ptrRect);
    var rect = val.RectangleFValue;
} 
```

# objective-c - 更改控件使用的默认 systemFont

> ID：13798450
> 
> 赞同：2
> 
> 时间：2012-12-10T09:47:58.677
> 
> 标签：objective-c, uifont, system-font

我有一个很大的应用程序，需要更改字体，但我不想触摸每个标签、文本字段等。如何访问 IB 和 in 中使用的“systemFont” `[UIFont systemFontOfSize:x]`？

我已经尝试过这个：[iOS 5：对 UIAppearance 感到好奇，](https://stackoverflow.com/questions/8257556/ios-5-curious-about-uiappearance)但这不是解决方案，因为我的应用程序有不同的 FontSizes 和 Bold/Regular，我无法对其进行整体设置。

我可以通过 UIApplication 或 InfoPlist 中的某处设置它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T09:52:12.320

您可以为 UILabel、UITextField 和 UIButton 创建类别，并且可以在“awakeFromNib”方法中，您可以将字体名称更改为新字体并且可以保持相同的大小。我在下面添加了 UILabel 类别的代码。您可以对 UITextField 和 UIButton 执行相同的操作。

```
@implementation UILabel (CustomFontLabel)

-(void)awakeFromNib{
    [super awakeFromNib];
    float size = [self.font pointSize];
    NSString *stringfontstyle=self.font.fontName;
    if([stringfontstyle rangeOfString:@"Bold"].location != NSNotFound) {
        self.font = [UIFont fontWithName:@"MyCustomFont-Bold" size:size];
    }
    else if ([stringfontstyle rangeOfString:@"Italic"].location != NSNotFound) {
        self.font = [UIFont fontWithName:@"MyCustomFont-Italic" size:size];
    }
    else if ([stringfontstyle rangeOfString:@"Medium"].location != NSNotFound) {
        self.font = [UIFont fontWithName:@"MyCustomFont-Medium" size:size];
    }
    else {
        self.font = [UIFont fontWithName:@"MyCustomFont" size:size];
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-28T00:42:56.707

实际上，Paramasivan 的回答只是部分正确。问题是，例如，如果`UILabel`要实现`awakeFromNib`它，它将永远不会被调用。您的类别将覆盖此方法。您可以调整或覆盖它，如下所示：

[http://www.mikeash.com/pyblog/friday-qa-2010-01-29-method-replacement-for-fun-and-profit.html](http://www.mikeash.com/pyblog/friday-qa-2010-01-29-method-replacement-for-fun-and-profit.html)

# css - 从公共资产下的 css 文件导入另一个 css 文件不适用于 play 2.0.4

> ID：13798451
> 
> 赞同：0
> 
> 时间：2012-12-10T09:47:58.280
> 
> 标签：css, twitter-bootstrap, playframework, assets, public

我很新玩，我正在尝试使用带有 twitter bootstrap 的 play 2.0.4 scala 版本。我还从 wrapbootstrap 获得了一个主题。主题有一些自定义的 css 文件，我将它们放在 public/stylesheets 下。

我最终在 public/stylesheets 下得到了两个 css 文件：style.css 和 icons.css。style.css 使用 @import url("icon.css") 导入 icons.css。

所以我认为如果我只是在我的 index.scala.html 中使用以下链接链接 style.css，一切都应该工作：但是播放框架找不到 icon.css。我必须明确地将 index.scala.html 中的 icon.css 与

我不确定播放框架如何处理在公共资产下的 css 文件中导入另一个 css 文件的路径问题。如果有人能对此有所了解，我将不胜感激。

最好的，詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:44:23.297

这与 Play 无关，您放入`public`文件夹中的所有文件都无需任何额外处理即可访问。

在 CSS 中导入 CSS 的正确方法是：

```
@import url("icons.css"); 
```

因此，如果您在末尾添加分号，它可能会开始工作。

*   记住，这`@import`条规则必须放在 CSS 文件的开头，你不能在它之前放单行注释！
*   确保您的两个样式表内部都有一些代码，如果需要，还可以重新启动应用程序和/或清除浏览器的缓存。
*   最后使用开发人员工具（例如 FireFox 中的 Firebug）来检查创建了哪些文件路径，我知道这种可能性非常低，但也许你......在文件名中打错了。

# php - php 5.3 CLI 垃圾字符

> ID：13798455
> 
> 赞同：3
> 
> 时间：2012-12-10T09:48:06.293
> 
> 标签：php, character, command-line-interface

我遇到的问题就像每当我从命令行运行一个简单的 php 脚本时，它前面都会显示一些垃圾字符。

我在 Windows 7 上的 wamp 服务器上使用 php 5.3.9。

这是我的脚本代码

```
<?php
echo "Hi"; exit;
?> 
```

这就是我在 cli 中得到的

```
∩╗┐Hi 
```

让我知道是否有其他人遇到过同样的问题并知道解决方案。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:50:09.147

这是 UTF-8 BOM。在您的编辑器中，将文件另存为“不带 BOM 的 UTF-8”（查找该设置，它必须在某个地方。如果找不到，请更改编辑器）。

# .net - OData 和实体框架向所有查询添加额外的 where 子句

> ID：13798456
> 
> 赞同：3
> 
> 时间：2012-12-10T09:48:25.547
> 
> 标签：.net, entity-framework, odata

我有一个连接到实体框架以公开 DataServices 的 OData 端点，但我想在运行时根据一些元数据来塑造出来的数据，以使查询比 URL 更具限制性

例如：

[http://services.odata.org/OData/OData.svc/Category(1)/Products](http://services.odata.org/OData/OData.svc/Category(1)/Products) ?$top=2&$orderby=name

如果这是位于欧洲的用户，我希望它返回具有“欧洲”区域的产品，但我宁愿 url 不必具有客户端提供的过滤器，例如：

[http://services.odata.org/OData/OData.svc/Category(1)/Products](http://services.odata.org/OData/OData.svc/Category(1)/Products) $top=2&$orderby=name&$filter=Region eq 'Europe'

我发现查询拦截器可以用于这类事情，但它是一个适用于大量实体的所有查询的概念，所以我希望有一种更通用的方法将它应用于所有实体，而不是必须在每个实体上指定一个拦截器。

我还在考虑根据用户权限隐藏某些字段，例如，如果某个字段被标记为敏感，我可以根据是否允许用户查看敏感数据从查询或结果中动态删除该字段。我认为我上面描述的技术将是这两种情况的解决方案。

修改 url 可能会被命中和错过所以也许我可以访问表达式树 EF 创建并在它执行之前从中添加或删除项目？

以防万一它是相关的，我使用 DataService 基类来公开数据：

公共类 MyDataService : 数据服务

这既快速又简单，但可能难以实现我想要的

非常感谢任何帮助-即使它只是我要实现的目标的特定名称，也将有助于研究解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T22:31:39.780

不幸的是，今天在 WCF 数据服务中没有一种简单的方法可以做到这一点（正如您提到的 QueryInterceptors 除外）。团队经常听到对此类功能的要求，我们正在这方面进行一些改进，但目前还不能公开承诺任何事情。

可以使用自定义提供程序接口 (IDataServiceMetadata/QueryProvider) 来完全自定义 WCF DS 所做的大部分工作，但是通过 EF 执行此操作需要大量工作，并且可能无法做到完美。同样，该团队正在寻找使自定义 EF 提供程序更容易的方法（例如公开我们对这些接口的内置实现），但我再次无法确定何时可用。

[ASP.NET Web API](http://www.asp.net/web-api)是创建 OData 服务的另一种选择，具有更大的灵活性，尽管您可能需要编写比使用 EF + DataService 更多的代码。

# c# - 我可以在 RichTextBox 中插入一个带有进度条的按钮吗

> ID：13798459
> 
> 赞同：2
> 
> 时间：2012-12-10T09:48:44.607
> 
> 标签：c#, winforms, richtextbox

我想在 RichTextBox 中插入一个 Button 和进度条，当用户单击该按钮时，会发生一些事情。
许多聊天应用程序都有文件传输实用程序。用户只需将文件拖到 RichTextBox 上，然后在另一端显示一个进度条和接受按钮。我正在开发聊天应用程序，我希望当任何用户在我的 win 聊天应用程序中拖动我的 RichTextBox 上的任何文件时，进度条和按钮将显示在 RichTextBox 的同一行中。我搜索谷歌但没有发现任何提示。
所以任何人都可以帮助我提出概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:58:32.347

你可以，有困难：有一篇文章描述了这个过程[http://www.codeproject.com/Articles/12135/Inserting-images-into-a-RichTextBox-control-the-OL](http://www.codeproject.com/Articles/12135/Inserting-images-into-a-RichTextBox-control-the-OL)

# android - 无法执行dex：多个dex文件定义了Lcom/google/android/gcm/GCMBaseIntentService；

> ID：13798460
> 
> 赞同：7
> 
> 时间：2012-12-10T09:48:46.493
> 
> 标签：android, export, dex

我正忙于创建一个时间表应用程序，该应用程序通过 JSON 从我的数据库中获取数据。

我将 GCM 服务用于推送通知和 Johan Nilsson 的 Android Actionbar。

但是，当我尝试将我的应用程序导出到 .APK 文件时，会发生以下错误。

```
[2012-12-10 10:28:03 - Dex Loader] Unable to execute dex: Multiple dex files define Lcom/google/android/gcm/GCMBaseIntentService;
[2012-12-10 10:28:03 - TimeTable] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/google/android/gcm/GCMBaseIntentService; 
```

导出 Android Dependencies 映射时会创建并创建副本。里面有对 GCM 和 android actionbar 的引用。在将 gcm 从 libs 文件夹添加到构建路径后，GCM 已经在引用的库映射中。

因此，在删除依赖项后，由于错误，我无法运行和导出应用程序。

我已经尝试清理和重建应用程序。请帮我。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-10T11:31:11.903

只需在`libs/`. 不要手动弄乱您*的*构建路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-13T07:42:25.000

在“配置构建路径”的“订购和导出”部分取消勾选admob jar文件。

它立即对我有用...

我厌倦了删除 Bin 目录或删除 gen 目录、重新启动 Eclipse 或再次清理和构建等所有操作，但除了上述步骤外，没有任何效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-24T15:52:41.443

我在“配置构建路径”的“订单和导出”部分取消选中 google-play-services.jat，然后开始工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-10T14:51:01.663

不要从项目中添加 GCM.jar，而是添加为外部 jar。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-22T10:23:12.793

在我的情况下，我只是直接将我的 jar 文件复制到带有大写字母的 eclipse 项目 libs 文件夹中。只是重命名为小案例。我的问题解决了

# php - 如何规范化编码名称，如 ks_c_5601-1987 到 CP949？

> ID：13798461
> 
> 赞同：7
> 
> 时间：2012-12-10T09:49:09.600
> 
> 标签：php, utf-8, mb-convert-encoding

我正在从邮件服务器获取电子邮件并将消息转换为 UTF-8 字符集并将其保存在 DB 中。要转换字符集，我正在使用 mb_convert_encoding 但它无法转换 `gb2312`和`ks_c_5601-1987`. 在谷歌搜索时，我发现`gb2312`我可以使用`CP936`and for `ks_c_5601-1987`use而不是`CP949`.

采用上述方法意味着在我的代码中维护一个单独的字符集映射列表。有没有办法将编码名称规范化为 PHP 内部支持的名称，从而消除在本地维护任何映射的需要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:03:38.803

根据[支持的字符编码列表，](http://php.net/manual/en/mbstring.supported-encodings.php)只有少量的编码由代码页明确列出。鉴于这些情况的数量很少 - 虽然不是所要求的内置规范化 - 映射列表可能并不太合适。

相关的似乎如下（右侧的小写名称是您需要转换的名称）：

*   CP932 shift_jis
*   CP51932 euc_jp
*   CP50220 iso-2022-jp
*   CP50221 cISO220JP
*   CP50222 iso-2022-jp
*   CP936 国标2312
*   CP950 大5

PHP 文档上的代码页也列出了以下内容，但似乎已经有了合适的同义词：

*   CP866 (IBM866)
*   UHC (CP949)
*   Windows-1251 (CP1251)
*   Windows-1252 (CP1252)

# c++ - c++ boost::graph 从有向图中获取父顶点

> ID：13798465
> 
> 赞同：2
> 
> 时间：2012-12-10T09:49:31.907
> 
> 标签：c++, boost, graph, boost-graph, directed-acyclic-graphs

我有一个有向图（通过 boost::graph 库中的 adjacency_graph 实现），我试图找到某个顶点的父顶点。

过去（通过 pygraph）我只是简单地反转了有向图，然后进行了邻居搜索，但似乎使用 boost::reverse_graph 反转图会将我的有向图变成双向图，因此我不能使用相邻顶点方法了。

有没有更好的方法来获取父顶点？

谢谢。

这是我当前的示例代码：

```
#include <boost/graph/adjacency_list.hpp>
#include <boost/graph/reverse_graph.hpp>
#include <iostream>

typedef boost::adjacency_list< boost::setS, boost::vecS, boost::directedS > Graph;
typedef boost::reverse_graph<Graph> Rgraph;
typedef Graph::vertex_descriptor Vertex;

int main()
{
    Graph graph;
    Vertex v0 = boost::add_vertex(graph);
    Vertex v1 = boost::add_vertex(graph);
    Vertex v2 = boost::add_vertex(graph);
    Vertex v3 = boost::add_vertex(graph);
    Vertex v4 = boost::add_vertex(graph);
    Vertex v5 = boost::add_vertex(graph);
    Vertex v6 = boost::add_vertex(graph);

    boost::add_edge(v0,v1,graph);
    boost::add_edge(v1,v2,graph);
    boost::add_edge(v2,v3,graph);
    boost::add_edge(v2,v4,graph);
    boost::add_edge(v3,v5,graph);
    boost::add_edge(v4,v5,graph);
    boost::add_edge(v5,v6,graph);

    Graph::adjacency_iterator ibegin, iend;
    for (boost::tie(ibegin, iend) = boost::adjacent_vertices(v2, graph); ibegin != iend; ++ibegin)
    {
        std::cout << *ibegin << std::endl;
    }

    std::cout << std::endl << "############# RGRAPH #############" << std::endl << std::endl;

    Rgraph rgraph(graph);
    Rgraph::adjacency_iterator rbegin, rend;
    for (boost::tie(rbegin, rend) = boost::adjacent_vertices(v2, rgraph); rbegin != rend; ++rbegin)
    {
        std::cout << *rbegin << std::endl;
    }
    std::cout << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T10:45:58.413

[`reverse_graph`](http://www.boost.org/libs/graph/doc/reverse_graph.html)要求调整后的图是 的模型[`BidirectionalGraph`](http://www.boost.org/libs/graph/doc/BidirectionalGraph.html)。如果将图形更改为`typedef boost::adjacency_list< boost::setS, boost::vecS, boost::bidirectionalS > Graph;`程序编译并给出结果：

```
3
4

############# RGRAPH #############

1 
```

我相信这是你应该期待的。

另一种不需要`reverse_graph`（但仍然需要`bidirectionalS`）的方法是使用：

```
Graph::out_edge_iterator out_begin, out_end;
for (boost::tie(out_begin, out_end) = out_edges(v2,graph); out_begin != out_end; ++out_begin)
{   
    std::cout << target(*out_begin,graph) << std::endl;
}
std::cout << std::endl;

Graph::in_edge_iterator in_begin, in_end;
for (boost::tie(in_begin, in_end) = in_edges(v2,graph); in_begin != in_end; ++in_begin)
{   
    std::cout << source(*in_begin,graph) << std::endl;
}
std::cout << std::endl; 
```

# android - Android位图失去图像分辨率

> ID：13798467
> 
> 赞同：0
> 
> 时间：2012-12-10T09:49:44.180
> 
> 标签：android, bitmap, drawable

我正在为android开发一个应用程序，它包含几个图像，我必须从drawable中获取它们，所以我使用位图来通过重新缩放它们来避免内存不足异常，但问题是重新缩放时，分辨率（/质量) 的图像被缩小。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:09:59.643

您可以保留对原始字节数组的引用并检查您的位图大小，但我只会在适当的可绘制文件夹中使用 pngs。在垃圾收集语言中，自己重新缩放/重新加载图像并检查质量可能会占用更多内存。让android做它的事情..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:44:08.570

避免质量损失的唯一方法是根据宽度和高度按比例缩放图像。

例如：如果您的分辨率是 100x80，请尝试将其降低到 5x:4x。这将在一定程度上保持质​​量。

# php - 如何传递对 call_user_func 的引用？

> ID：13798468
> 
> 赞同：21
> 
> 时间：2012-12-10T09:49:43.923
> 
> 标签：php, reference, callback

考虑以下示例：

```
function myTest(&$var)
{ 
    $var++;
    echo "var = {$var}\n";
}

$x = 42;
call_user_func('myTest', $x); 
```

它显示警告：

> 警告：myTest() 的参数 1 应为参考，在 /home/alain/workspace/echo/echo.php(57) 中给出的值：第 7 行的 eval()'d 代码

注意：在在线沙箱上编写的代码，解释了 eval。

知道如何传递对`call_user_func`家庭功能的引用吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-10T09:49:43.923

我在[PHP 手册](http://fr2.php.net/manual/en/function.call-user-func.php)上找到了答案：

> **笔记：**
> 
> 请注意，call_user_func() 的参数不是通过引用传递的。

他们还提供了一个技巧来完成这项工作：

```
$x = 42;
call_user_func_array('myTest', array(&$x)); 
```

# cookies - 如何维护会话和 cookie 到 webrequest？

> ID：13798472
> 
> 赞同：1
> 
> 时间：2012-12-10T09:44:47.517
> 
> 标签：cookies, session, asp.net, vb.net

我创建了一个具有获取库存详细信息的功能的应用程序。创建它是为了在 HTTPS 站点上发布数据。

我想在此调用中维护会话状态和 cookie。我怎样才能完成这项任务？

我在第 1 点有会话。第 2 点调用函数并且函数丢失会话和 cookie。

如何将会话传递给 Web 请求 URL？Web 请求发生在同一应用程序服务器中。

这是我的代码：

```
Function getStockDtl()
    session("stockid")="123456"
    Dim url As String = "some url.aspx"
    Dim req As WebRequest = HttpWebRequest.Create(url)
    Dim sread As New StreamReader(req.GetResponse.GetResponseStream)
    Dim RString As String = sread.ReadToEnd
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:00:02.883

首先，这似乎不是实现获取库存详细信息目标的最佳方式。Surley 如果您正在访问的网站在同一台服务器上，您可以创建一个 Web 服务并调用它吗？

其次，如果您想让它工作，您是否可以不只是将查询字符串传递给 url 而不是尝试将其存储在会话中（这将是首选的简单解决方案）

您当前正在执行的操作将不起作用，因为您将其添加到会话缓存（您正在向其发出 Web 请求的 Web 应用程序不可用），您可以通过将值放入应用程序缓存中来解决此问题（但是如果这是您设置此会话的唯一位置，我只会这样做，而且它通常看起来很乱。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-13T01:12:45.573

有关如何`CookieContainer`使用相同的会话信息添加和发出多个请求的信息，请参阅此帖子：

[同一会话中的多个 WebRequest](https://stackoverflow.com/questions/787857/multiple-webrequest-in-same-session)

# javascript - Oembed 不呈现 javascript，只有 Twitter 的文本

> ID：13798473
> 
> 赞同：6
> 
> 时间：2012-12-10T09:50:00.067
> 
> 标签：javascript, jquery, twitter, oembed

我在 Twitter API 中使用 oembed 来嵌入推文小部件。它可以很好地获得 JSON 响应，但它仅以文本形式显示推文，而不是嵌入的小部件响应。Twitter 发送的 JavaScript 没有触发。

```
 $(document).ready(function() 

  {$.getJSON("https://api.twitter.com/1/statuses/oembed.json?id=133640144317198338&align=center&callback=?", function(data)
    {$('#target').html(data.html);
    });
  }); 
```

然后对于html：

```
<body >
  <div id="target"></div>
</body> 
```

==================================================== ================

响应格式为纯文本版本，而不是小部件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-15T03:11:20.587

我也被困住了。如果您不想处理 jquery，您可以使用

```
<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script> 
```

然后放入html：

```
<blockquote class="twitter-tweet"><a href="http://twitter.com/coffee_dad/status/287348974577385474">link</a></blockquote> 
```

我不确定这是否是正确的方法，但它似乎对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T12:31:55.027

我有同样的问题。动态加载`blockquote`的 from`oembed`不会被渲染。深入研究后`widget.js`，我发现您只需要在页面`twttr.widgets.load()`中添加新内容后调用即可`blockquote`。享受！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:17:00.467

不要使用附加。使用 $('#target').html(data.html);

# wcf - FaultException 和详细信息

> ID：13798474
> 
> 赞同：0
> 
> 时间：2012-12-10T09:50:01.893
> 
> 标签：wcf

我从几天开始就致力于 WCF 服务。我写了一个带有异常的服务

```
public String Login(string Vendorname, string VendorAccessCode)
    {        
        try
        {
        if()
        {
        }
        else
        {
            UserIdentityToken = string.Empty;
            this.ErrorMessage = "Authentication failed. Please contact administrator";
            throw new FaultException(this.ErrorMessage);
        }

        }
        catch (FaultException ex)
        {
           logger.Error(ex.Message); 
        }
        catch (Exception ex)
        {
            logger.Error(ex.Message); 
        }

        return UserIdentityToken;
    } 
```

在此之后，我在 Messgae Inspector 中处理客户端的异常

```
 public class MessageInspector : IClientMessageInspector
     {

    public void AfterReceiveReply(ref Message reply, object correlationState)
    {
        if (reply.IsFault)
        {

            MessageFault fault = MessageFault.CreateFault(new FaultCode("Receiver"), new FaultReason(reply.ToString()));
            throw new FaultException(fault);
        }
    }
   } 
```

我正在处理我的客户端代码

```
 try
            {                                objVendorServiceClient.Login(txtuserName.Text.Trim(),
txtAccessCode.Text.Trim());               
            }
            catch (FaultException ex)
            {                
                lblAuthenticationMessage.Text = ex.Message;                
                throw ex;
            } 
```

但是，当 Service 中的身份验证失败时，Reply.IsFault 仅返回 false。谁能解释一下什么是reply.Isfault以及它对我到底有什么用处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:54:13.620

> [**Message.IsFault 属性**](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.message.isfault.aspx)：
> 
> 获取一个值，该值指示此消息是否生成任何 SOAP 错误。

你说：

> 当服务中的身份验证失败时，Reply.IsFault 将返回 false

那是因为你自己发现了错误，记录它，然后返回一个空字符串。您必须抛出 FaultException 以便 WCF 捕获它并从中创建 SOAP 错误。

# java - 获取符号之间的字符串

> ID：13798475
> 
> 赞同：0
> 
> 时间：2012-12-10T09:50:02.143
> 
> 标签：java

我正在从 youtube 链接中提取 youtube 视频 ID。列表看起来像这样

[http://www.youtube.com/watch?v=mmmc&feature=plcp](http://www.youtube.com/watch?v=mmmc&feature=plcp)

我只想得到 mmmc。

我用过 .replaceAll 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:01:27.563

三种方式：

1.  网址解析：http: [//download.oracle.com/javase/6/docs/api/java/net/URL.html](http://download.oracle.com/javase/6/docs/api/java/net/URL.html)

> ```
> URL url = new URL("http://www.youtube.com/watch?v=mmmc&feature=plcp");
> url.getQuery(); // return query string. 
> ```

1.  正则表达式示例在这里[http://www.vogella.com/articles/JavaRegularExpressions/article.html](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

2.  标记化

    ```
    String s = "http://www.youtube.com/watch?v=mmmc&feature=plcp";
    String arr[] = s.split("=");
    String arr1[] = arr[1].split("&");
    System.out.println(arr1[0]); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:50:03.110

如果您想使用正则表达式，这可能是一个解决方案：

```
Pattern p = Pattern
.compile("http://www.youtube.com/watch\\?v=([\\s\\S]*?)\\&feature=plcp");

Matcher m = p.matcher(youtubeLink);

if (m.find()) {
return m.group(1);
}
else{
throw new IllegalArgumentException("invalid youtube link");
} 
```

当然，这仅在该功能始终为 plcp 时才有效，如果不是，您可以简单地删除该部分或将其替换为通配符，就像我对 mmmc 所做的那样

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:57:10.807

编辑：现在我知道你在找什么我希望：

```
String url= "http://www.youtube.com/watch?v=mmmc&feature=plcp";
String search = "v=";
int index     = url.indexOf(search);
int index2    = url.indexOf("&",index);
String found  = url.substring(index+2,index2);
System.out.println(found); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:05:51.233

这是一个通用解决方案（使用 Guava [`MapSplitter`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.MapSplitter.html)）：

```
public final class UrlUtil {
    /**
     * Query string splitter.
     */
    private static final MapSplitter PARAMS_SPLITTER = Splitter.on('&').withKeyValueSeparator("=");

    /**
     * Get param value in provided url for provided param.
     * 
     * @param url Url to use
     * @param param Param to use
     * @return param value or null.
     */
    public static String getParamVal(String url, String param)
    {
        if (url.contains("?")) {
            final String query = url.substring(url.indexOf('?') + 1);
            return PARAMS_SPLITTER.split(query).get(param);
        }

        return null;
    }

    public static void main(final String[] args)
    {
        final String url = "http://www.youtube.com/watch?v=mmmc&feature=plcp";
        System.out.println(getParamVal(url, "v"));
        System.out.println(getParamVal(url, "feature"));
    }
} 
```

输出：

```
mmmc
plcp 
```

# facebook - 适用于公共设备的 iOS 上的 Facebook OAuth 流程

> ID：13798478
> 
> 赞同：2
> 
> 时间：2012-12-10T09:50:22.143
> 
> 标签：facebook, facebook-ios-sdk

我正在开发一个针对公共场所设备的 ios 应用程序。

我需要 facebook 共享功能，这意味着用户完成共享后应立即删除用户登录会话。但是当用户登录时，登录会话保留在 Safari 中。尽管我从应用程序中调用注销，但用户实际上并未在浏览器中注销。有没有什么办法解决这一问题？

# c# - 基本 C# 骰子游戏

> ID：13798480
> 
> 赞同：3
> 
> 时间：2012-12-10T09:50:34.967
> 
> 标签：c#, dice

我是 c# 和一般编码的新手。为了尝试提高我的技能，我正在尝试创建一个基本游戏，其中两名玩家掷骰子并记录他们的得分。玩家在达到 20 点时获胜。每个玩家轮流掷骰子，将他们的第一个骰子加到第二个，依此类推，直到其中一个达到 20 点。如果玩家掷出 6，则可以再次掷骰子。

我目前的代码是：

* * *

```
 do
        {

            Console.Write("Enter the name of Player 1: ");
            Player[0] = Console.ReadLine();
            Console.Write("Enter the name of Player 2: ");
            Player[1] = Console.ReadLine();

            Random DiceRandom = new Random();
            DiceThrow[0] = DiceRandom.Next(1, 7);

            int i = 0;
            while (i <= 1)
            {
                DiceThrow[0 + i] = DiceRandom.Next(1, 7);
                Console.ReadLine();
                Console.Write(Player[0 + i] + " rolled a " + DiceThrow[0 + i]);
                if (DiceThrow[0 + i] != 6) i++;
            }

            Console.ReadLine();
            PlayerTotal[0] = DiceThrow[0];
            PlayerTotal[1] = DiceThrow[1];

            Console.ReadLine();
            Console.Write(Player[0] + " currently has " + PlayerTotal[0]);
            Console.ReadLine();
            Console.Write(Player[1] + " currently has " + PlayerTotal[1]);
            Console.ReadLine();

        }
        while (PlayerTotal[0] == 20);
        while (PlayerTotal[1] == 20); 
```

* * *

我特别苦苦挣扎的是将玩家的第一卷添加到第二卷中。如果玩家掷出一个 6，它会将 6 添加到他们重新掷出的结果中。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T09:59:52.990

您的代码存在许多问题：

1.  您在循环中询问玩家姓名
2.  您正在循环内初始化随机生成器（这可能会在不同的循环上导致相同的结果，因为随机生成器可以使用相同的种子）
3.  您正在使用 = 而不是 += 重置总计
4.  停止条件是 totals == 20 而不是 total < 20
5.  您正在使用两个 while 语句而不是 AND (&&) 条件

这只是一个简短的概述..

这可以是一个解决方案：

```
 Console.Write("Enter the name of Player 1: ");
  Player[0] = Console.ReadLine();
  Console.Write("Enter the name of Player 2: ");
  Player[1] = Console.ReadLine();

  Random DiceRandom = new Random();

  do
    {

        int i = 0;
        while (i <= 1)
        {
            int thisThrow = DiceRandom.Next(1, 6);
            DiceThrow[0 + i] += thisThrow;
            Console.ReadLine();
            Console.Write(Player[0 + i] + " rolled a " + thisThrow);
            if (thisThrow != 6) i++;
        }

        Console.ReadLine();
        PlayerTotal[0] += DiceThrow[0];
        PlayerTotal[1] += DiceThrow[1];

        Console.ReadLine();
        Console.Write(Player[0] + " currently has " + PlayerTotal[0]);
        Console.ReadLine();
        Console.Write(Player[1] + " currently has " + PlayerTotal[1]);
        Console.ReadLine();

    }
    while (PlayerTotal[0] < 20 && PlayerTotal[1] < 20); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T09:58:39.290

您的问题是您正在使用这些行重置以前的分数：

```
PlayerTotal[0] = DiceThrow[0];
PlayerTotal[1] = DiceThrow[1]; 
```

您应该将其更改为`+=`像这样使用：

```
PlayerTotal[0] += DiceThrow[0];
PlayerTotal[1] += DiceThrow[1]; 
```

这就像说：`PlayerTotal[0] = PlayerTotal[0] + DiceThrow[0];`

除此之外，您的代码中还有一些问题。

例如，您`Do`在代码的开头有一个但 2`while`秒...您可能希望`While`使用*AND*语句创建一个。此外，该`Do`语句需要*在*您获得用户名之后......

例如： // 获取用户名

```
 do
 {
    // All your Dice throwing logic
 }
 while (PlayerTotal[0] != 20 && PlayerTotal[1] != 20); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T13:26:26.837

```
 int i = 0;
    while (i <= 1)
    {
        int thisThrow = DiceRandom.Next(1, 6);
        DiceThrow[0 + i] += thisThrow;
        Console.ReadLine();
        Console.Write(Player[0 + i] + " rolled a " + thisThrow);
        if (thisThrow != 6) i++;
    }

    Console.ReadLine();
    PlayerTotal[0] += DiceThrow[0];
    PlayerTotal[1] += DiceThrow[1];

    Console.ReadLine();
    Console.Write(Player[0] + " currently has " + PlayerTotal[0]);
    Console.ReadLine();
    Console.Write(Player[1] + " currently has " + PlayerTotal[1]);
    Console.ReadLine(); 
```

# xcode - 如何忽略 Xcode 合并备份文件？

> ID：13798482
> 
> 赞同：1
> 
> 时间：2012-12-10T09:50:37.627
> 
> 标签：xcode, git, git-merge

在 Xcode 之后`git mergetool`，有一些备份文件是这样的：

```
X.xcodeproj/project.pbxproj.BACKUP.36127.pbxproj
X.xcodeproj/project.pbxproj.LOCAL.36127.pbxproj
X.xcodeproj/project.pbxproj.REMOTE.36127.pbxproj 
```

如何在 git 中忽略这些文件`.gitignore`？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:33:55.467

与[本文](http://portal.customerfx.com/wikis/devguidelines/using-the-gitignore-file-with-saleslogix-models.aspx)一样，您可以在[全局忽略文件](https://stackoverflow.com/q/7529266/6309)中添加：

```
*.BACKUP.*.pbxproj
*.BASE.*.pbxproj
*.LOCAL.*.pbxproj 
```

[奇怪的是， “GitHub Ignore”全局文件项目](https://github.com/github/gitignore/tree/master/Global)中还没有 XCode 文件。

[indiantroy](https://stackoverflow.com/users/412678/indiantroy) [建议](https://stackoverflow.com/review/suggested-edits/5249925)也忽略：

```
*.REMOTE.*.pbxproj 
```

# algorithm - 给数字链表加 1

> ID：13798483
> 
> 赞同：1
> 
> 时间：2012-12-10T09:50:39.617
> 
> 标签：algorithm, data-structures

给定一个链表，使得每个节点都是数字中的一个数字。

例如：如果 number 为 1234，则对应的链表为：

```
1 -> 2 -> 3 -> 4 -> [\] 
```

问题是在这个数字上加 1。所以输出将是：

```
1 -> 2 -> 3 -> 5 -> [\] 
```

我们可以在 O(n) 时间和 O(n) 空间中递归地完成它。是否可以优化 O(logn) 时间复杂度的解决方案？

**更新：** n 是总位数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T09:57:22.283

不，只要您没有额外的数据结构。

由于列表中的最后一个节点总是会改变，并且任何算法到达那里都需要 O(n) 时间（如果你没有额外的数据结构，你必须追逐整个列表），这使得 O(n) 作为你的下限边界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T11:00:25.700

在执行操作之前，您必须遍历每个数字，没有其他方法，但由于您知道元素的总数，因此您可以编写所有移动操作，例如 head->next->next->next...在同一行而不是 for 循环中。这将加快进程，因为将避免运行 for 循环的超载时间复杂度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T09:54:40.340

是什么`n`？如果`n`是数字中的位数，我认为不可能有`O(log(n))`解决方案。

如果 n 是数字本身，那么位数已经是`O(log(n))`。

# javascript - 如何使用javascript在文本框内添加文本框值

> ID：13798484
> 
> 赞同：0
> 
> 时间：2012-12-10T09:50:38.510
> 
> 标签：javascript, javascript-events

我正在使用 javascript 创建一个程序，同时单击按钮它将选择一个座位并将其背景颜色更改为绿色，同时按钮值将被添加到文本字段中，并将相应地切换，并且在相同的功能中我是传递另一个值，即公共汽车的票价。问题：当我点击一个座位按钮时，它的票价会添加到文本框中，但如果我点击两个或更多座位按钮，票价只会添加到文本框中，但不会计算票价的总和。当我再次点击选定的座位时，票价将从总票价中扣除。这里我没有使用 jquery。请问有人可以帮助我吗？

```
// Create a variable for the array!
var selectedSeats = new Array();
var selectedFares= new Array();

// Build a function that will update the textfield.
// Call this, whenever the array gets changed!
function updateListOfSelectedSeats() {
    document.getElementById('selectedseat').value = selectedSeats.join(',');
    document.getElementById('selectedfare').value = selectedFares;
}

// Removes a seat from the list of selected seats
function removeSeatFromList(seat,seatFare) {
    for (var i = 0; i < selectedSeats.length; i++) {
        if (selectedSeats[i] == seat) {
            selectedSeats.splice(i, 1);
            updateListOfSelectedSeats();
            removeFareFromList(seatFare);
            break;
        }
    }
}
function removeFareFromList(seatFares) {
  for (var i = 0; i < selectedFares.length; i++) {
    if (selectedFares[i] == seatFares) {
        selectedFares.splice(i, 1);
        updateListOfSelectedSeats();
        break;
    }
  } 
```

}

```
// Now the function that reacts to clicks on a seat
function setId(id, value,fare) {
    var Seat = document.getElementById(id);

    switch (Seat.style.backgroundImage) {
        case 'url("themes/frontend/images/greenseat.png")':
            // Seat is already selected and needs to be deselected
            Seat.style.backgroundImage = 'url("themes/frontend/images/seat.png")';
            removeSeatFromList(value,fare);
            break;

        case '':
        case 'url("themes/frontend/images/seat.png")':
            // Seat is empty, select it!
            Seat.style.backgroundImage = 'url("themes/frontend/images/greenseat.png")';
            selectedSeats.push(value);
            selectedFares.push(fare);
            updateListOfSelectedSeats();
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-10T10:10:12.427

因此，如果我理解正确，价格的文本字段将显示为逗号分隔的数组，而不是获取值的总和，如果是这种情况，您可以执行以下操作：

```
document.getElementById('selectedfare').value = eval(selectedFares.join('+')); 
```

这应该得到您 selectedFares 数组的总和。

希望这可以帮助。

# android - Android - 使用 HDMI 时的 DisplayMetrics 分辨率问题

> ID：13798491
> 
> 赞同：1
> 
> 时间：2012-12-10T09:51:05.350
> 
> 标签：android

我有一台来自 Sony 的 GoogleTV 设备，它使用 HDMI 连接到全高清电视 (1920x1080)。我使用以下代码来计算电视的目标显示尺寸。

```
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);
//dm.widthPixels
//dm.heightPixels 
```

效果很好，我分别得到 1920 和 1080 像素。

现在讨论这个问题。当我将 GoogleTV 盒子连接到不同尺寸的不同电视时，它仍然显示 1920x1080，而分辨率却大不相同。

为了获得新的分辨率，我需要额外的东西吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:10:04.507

您可以尝试在 onSizeChanged 中添加它，如下所示可能有效：

```
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) 
{
    DisplayMetrics displaymetrics = new DisplayMetrics();
    ((Activity) getContext()).getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);
    ScreenWidth = displaymetrics.widthPixels;
    ScreenHeight = displaymetrics.heightPixels;
} 
```

# node.js - 使用 memwatch-node 识别闭包的内存泄漏

> ID：13798495
> 
> 赞同：11
> 
> 时间：2012-12-10T09:51:31.127
> 
> 标签：node.js, memory-leaks, closures

我的 Node.js 项目遭受内存泄漏，我已经在关闭时将变量设置为 null，我的意思是，我知道这样的代码：

```
var a = 0;
var b = 1;
var c = 0;
example_func(c, func(){
    console.log(b);
}); 
```

会导致内存泄漏，所以我添加了一些代码将这些变量设置为null；

```
var a = 0;
var b = 1;
var c = 0;
example_func(c, func(){
    console.log(b);
    a = null;
    b = null;
    c = null;
}); 
```

但是我仍然有漏洞，所以我尝试用它`memwatch-node`来找出我的代码出了什么问题。

结果表明`closure`导致泄漏，但没有指定足够的目标。

我有这样的JSON

```
 { what: 'Closure',
   '+': 12521,
   size: '520.52 kb',
   '-': 5118,
   size_bytes: 533016 }, 
```

而且我想知道是否可以获得有关哪个闭包泄漏的更多具体细节。

我已经为所有闭包分配了名称，但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-30T00:41:26.853

您无法更具体地了解哪个闭包。memwatch 获取 v8 堆的转储，然后获取它的差异并报告泄漏，如果在 5 次连续的垃圾收集事件之后，该对象类型计数继续增长。

另外，我相信您对什么是闭包感到困惑。[MDN 关于闭包的页面](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Closures)给出了很好的描述。闭包不是一个变量，而是一个作用域，它使函数能够保留引用并在这些变量引用原本不可用的代码部分中使用时继续工作。

如果你传递函数保持对该函数的引用，它的闭包可能会引用其他闭包。所以，你可能有一个闭包，里面可能有很多东西。

这样做：禁用部分代码，直到 memwatch 停止抱怨。然后，查看该代码。如果您仍然感到困惑，请在此问题中发布更多详细信息。

# windows-phone-7 - 集成时是否需要将flurry dll文件夹复制到windows phone项目中？

> ID：13798501
> 
> 赞同：0
> 
> 时间：2012-12-10T09:51:56.377
> 
> 标签：windows-phone-7, flurry

我试图将 Flurry 分析集成到我的 Windows Phone 7.5 应用程序中。我已经下载了 SDK。我对将文件夹放在我的项目中的哪个位置感到困惑？我是否必须复制整个 dll 文件夹并将其放在我的项目文件夹中？或者我可以从任何地方引用它吗？我的项目被 Git 监控

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:14:33.380

您是否使用 Git 导入了 SDK？如果是这样，请在您的解决方案资源管理器中单击引用。您应该在那里看到乱舞分析参考。检查属性以将其复制到您的输出文件夹。出于开发目的，它的位置实际上并不重要，我更喜欢将它放在我的主干文件夹内的文件夹中以进行备份。

# ant - 如何访问速度模板中的属性？

> ID：13798503
> 
> 赞同：1
> 
> 时间：2012-12-10T09:52:12.037
> 
> 标签：ant, properties, velocity

我在一个位置 (/home/XXXX) 有一个属性文件，并希望在位置 (/irb/dev4/ccm_wa/cb532/RBAPI-XXX/RBAPI/BA/tools/src/com/ 的速度模板中访问其属性之一创/工具/构建/j2ee/ejb）。我们如何访问它们？

只有当上面访问的属性返回 true 时，我才需要执行下面的 foreach 循环

```
#if( **PROPERTY IS TRUE** )
#foreach ($databaseGroup in ${root.getAllDatabaseGroups().values()})
#foreach ($index in ${databaseGroup.getIndices()})
      <resource-ref>
        <res-ref-name>${databaseGroup.getResRefPrefix()}${databaseGroup.getTxDs(${index})}</res-ref-name>
        <resource-name>${databaseGroup.getResRefPrefix()}${databaseGroup.getTxDs(${index})}</resource-name>
      </resource-ref> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T11:25:51.967

在您的 Template 类中，将属性文件读入一个`Properties`对象并将其放入上下文中。我建议为此使用[Apache Commons PropertiesyConfiguration](http://commons.apache.org/proper/commons-configuration//apidocs/org/apache/commons/configuration/PropertiesConfiguration.html)：

```
PropertiesConfiguration props = new PropertiesConfiguration("/home/XXXX");
contxt.put("props", props); 
```

在您的模板文件中，您现在可以检查您的属性：

```
#if($props.getBoolean(propertyName)) 
```

# stored-procedures - 更新存储过程实体框架抛出“验证 FunctionImport 名称是否唯一”错误

> ID：13798504
> 
> 赞同：2
> 
> 时间：2012-12-10T09:52:20.770
> 
> 标签：stored-procedures, entity-framework-4

我正在使用 EF v4.3，但在更新存储过程时遇到问题。

在模型浏览器中，我选择了要更新的存储过程（它具有要更新的函数导入和复杂类型）。

我右键单击并选择添加功能导入。通常的窗口打开。

我的第一个问题是 EF 不会自动发现已经定义了复杂类型的事实，因为“返回集合”单选按钮设置为 None 而不是 Complex。

无论如何，我选择了正确的复杂类型并按下“更新”按钮。存储过程框填充了正确的复杂类型，需要更改的行在操作列中标记为“更新”。

我按下 OK 并显示一个消息框，其中包含错误消息“验证 FunctionImport 名称是否唯一”。

我可以通过删除函数导入来解决这个问题，但我不想每次都这样做。为什么更新不起作用？我究竟做错了什么？

感谢您的任何帮助，您可以提供。

米歇尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-03-06T04:42:08.717

这是一个屏幕截图，显示您需要做什么，要么删除现有的，要么根据 OP 的评论进行更新：

[![在此处输入图像描述](../Images/c50ae88077592ac73dd28d08bce31d13.png)](https://i.stack.imgur.com/8qgEV.png)

# tomcat - 如何访问在应用逻辑云应用程序上运行的 Web 服务器？

> ID：13798507
> 
> 赞同：0
> 
> 时间：2012-12-10T09:52:36.947
> 
> 标签：tomcat, cloud

我有一个在应用逻辑云应用程序上运行的 tomcat 服务器。

我有机器的 IP 地址和端口号，但我不知道如何访问在云中运行的 Web 应用程序。

有谁知道我该怎么做？

**编辑** 我忘了提到我只有一个虚拟交换机的 IP 地址。每台机器都可以通过交换机上的端口访问。即使用 ssh，127.0.0.1:2222 允许我在终端窗口中访问 linux 框。可以使用浏览器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:00:40.107

您需要知道的只是映射到您的 tomcat 的 IP 地址。然后默认 url 变为**ip_address:8080/application**

云/虚拟服务器将为您提供可用的公共 IP 列表。可用的公共 IP 数量通常非常少（少于 5 个）。因此，如果您的 tomcat 可以公开访问，它将绑定到这些 IP 中的任何一个。

# java - 如何使用 Slider Jquery 设置值

> ID：13798508
> 
> 赞同：1
> 
> 时间：2012-12-10T09:52:46.980
> 
> 标签：java, javascript, jquery, jquery-ui, jquery-slider

基本上，我有 2 个使用 Jquery 实现的滑块。I want to set the value in such a way that, when the first slider is selected say a range ex: 0-36\. 我希望将第二个滑块的最大值动态设置为 36。这是代码。我无法将值设置为第二个滑块，请帮助。

```
$(function() {
$( "#slider-range-min" ).slider({
        range: "min",
        value: 0,
        min: 0,
        max: 100,
        slide: function( event, ui ) {
            $( "#greenData" ).val( "0 - " + ui.value );
        }
    });
    $( "#greenData" ).val( "$" + $( "#slider-range-min" ).slider( "value" ) );

});

    $(function() {
    $( "#slider-range-min-amber" ).slider({
            range: "min",
            value: 0,
            min: 0,
            max: 100,
            slide: function( event, ui ) {
                $( "#amberData" ).val( "0 - " + ui.value );
            }
        });
        $( "#amberData" ).val( "$" + $( "#slider-range-min-amber" ).slider( "value" ) );
    }); 
```

这是HTML代码：

```
<tr>
<td align="right"><label for="greenValue"
                            style="font-family: sans-serif; font-size: small;">
                                Green</label>
                                 </td>
                                 <td>   <div id="slider-range-min">  </div>  </td>
                                 <td> <input type="text" id="greenData" style="border: 0; color: green; font-weight: bold;" readonly="readonly" />  
                          </td>
                    </tr>

                    <tr>
                        <td align="right"><label
                            style="font-family: sans-serif; font-size: small;">
                                Amber</label>
                                 </td>
                                 <td id="amberTdId">    <div id="slider-range-min-amber">  </div>    </td>
                                 <td> <input type="text" id="amberData" style="border: 0; color: #FF7E00; font-weight: bold;" readonly="readonly" /> </td>
                    </tr> 
```

当我从 0-36 选择绿色滑块的范围时，值 36 应设置为滑块 2。即..第二个滑块范围应为最小值：0 和最大值：36

我该怎么做。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:40:11.023

试试这个代码：

```
$(function() {
$( "#slider-range-min-amber" ).slider({
        range: "min",
        value: 0,
        min: 0,
        max: 100,
        slide: function( event, ui ) {
            $( "#amberData" ).val( "0 - " + ui.value );
        }
    });
    $( "#amberData" ).val( "$" + $( "#slider-range-min-amber" ).slider( "value" ) );
}); 

$(function() {
$( "#slider-range-min" ).slider({
    range: "min",
    value: 0,
    min: 0,
    max: 100,
    slide: function( event, ui ) {
        $( "#greenData" ).val( "0 - " + ui.value );
        var value = ui.value;
        var max = ui.value;
        $( "#slider-range-min-amber" ).slider("option","max",max).slider("value",value);
        $( "#amberData" ).val( "0 - " + ui.value );

    }
});
$( "#greenData" ).val( "$" + $( "#slider-range-min" ).slider( "value" ) );
}); 
```

或者看看我的小提琴：http: [//jsfiddle.net/QPnxf/1/](http://jsfiddle.net/QPnxf/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T10:44:16.220

简单的答案是在您的`$('#greenData').val('0 - ' + ui.value);`行之后添加以下内容：

```
$('#slider-range-min-amber').slider('option', 'max', ui.value);
$('#amberData').val('0 - ' + ui.value); 
```

但是像这样重新查询 DOM 对性能不利。最好缓存您的 jQuery 对象并重新使用它们。一个更有效的解决方案是这样的：

```
$(function() {
  var green = $('#slider-range-min'),
      amber = $('#slider-range-min-amber'),
      greenData = $('#greenData'),
      amberData = $('#amberData'),
      opts = {
        range: 'min',
        value: 0,
        min: 0,
        max: 100
      };

  greenData.val('$' + opts.value);
  green.slider(opts).slider('option', 'slide', function(e, ui) {
    greenData.val(opts.min + ' - ' + ui.value);

    // this is the bit that updates the 
    // max value of the second slider
    amber.slider('option', 'max', ui.value);
    amberData.val(opts.min + ' - ' + ui.value);
  });

  amberData.val('$' + opts.value);
  amber.slider(opts).slider('option', 'slide', function(e, ui) {
    amberData.val(opts.min + ' - ' + ui.value);
  });
}); 
```

# ios - 应用程序崩溃 - 已被应用商店接受

> ID：13798511
> 
> 赞同：0
> 
> 时间：2012-12-10T09:53:01.500
> 
> 标签：ios, xcode, crash, report

我已将我的应用程序从 iOS5/iPhone 4 更新为兼容 iOS6/iPhone5。该应用程序已获得苹果商店的批准并且可以下载，当从应用程序商店下载时它在启动时崩溃。但是，将应用程序从 xcode 安装到设备上效果很好，我很茫然。我附上了崩溃报告的链接

非常感激任何的帮助

[http://pastebin.com/epgh2Jxv](http://pastebin.com/epgh2Jxv)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:55:27.703

从您的设备中完全删除应用程序，清理产品，然后从 xcode 再次运行。我敢打赌，问题也出在你的身上。似乎故事板不存在。您可能错误地删除了它，但它仍然存在于您的产品中，因为 Xcode 不会主动搜索要删除的旧文件。

# javascript - 用于移动浏览器重新启动或设备唤醒的 Javascript 事件

> ID：13798516
> 
> 赞同：15
> 
> 时间：2012-12-10T09:53:17.680
> 
> 标签：javascript, android, ios, mobile

早上好，我正在寻找某种 Javascript 事件，我可以用来检测移动浏览器窗口何时重新获得焦点，在用户关闭/最小化他们的浏览器（返回主屏幕/其他应用程序）之后，或者如果设备从睡眠状态恢复（用户将其关闭，或者在屏幕超时后进入睡眠状态）。

我希望能够找到一个适用于所有事情的单一事件，但我知道这不太可能！该`pageshow`事件适用于 iOS 设备，但与其他所有设备一起使用时相当粗略。我已经尝试过`focus`，`DOMActivate`但它们似乎都没有达到预期的效果。

页面上可能并不总是有表单元素，我真的不希望用户必须再次触摸页面才能触发事件。

此类事件的需求是由我们的代码通过发出 XHR 请求定期检查新内容引起的。当浏览器处于睡眠状态时，这些永远不会发送，因此我们永远不会获得新的内容来重新启动超时。

感谢你们可以提供的任何帮助！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-08-07T12:29:26.717

我们有一个类似的问题并解决了这个问题：

```
var lastSync = 0;
var syncInterval = 60000; //sync every minute

function syncPage() {
  lastSync = new Date().getTime(); //set last sync to be now
  updatePage(); //do your stuff
}

setInterval(function() {
  var now = new Date().getTime();
  if ((now - lastSync) > syncInterval ) {
    syncPage();
  }
}, 5000); //check every 5 seconds whether a minute has passed since last sync 
```

这样，如果您的页面处于活动状态，您将每分钟同步一次，并且如果您将浏览器置于空闲模式超过一分钟，则在再次打开浏览器时最多会经过 5 秒的同步。短间隔可能会比您想要的更多地消耗电池，因此在根据您的需要调整时间时请记住这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T17:18:48.190

比间隔更好的是添加一个窗口模糊侦听器和一个窗口焦点侦听器。在模糊时，记录当前时间。在焦点上，确认您仍然登录/同步/您需要做的任何事情。

基本上完全相同的东西，但它只在必要时运行，而不是在一段时间内减慢整个页面的速度。

**更新**

```
var $window = $(window),
  $window.__INACTIVITY_THRESHOLD = 60000;

$window.add(document.body);  //necessary for mobile browsers

$window.declareActivity = function () { $window.__lastEvent = new Date(); };

$window.blur($window.declareActivity);
$window.focus(function(){
  var diff = (new Date()) - $window.__lastEvent;
  if (diff > $window.__INACTIVITY_THRESHOLD) { 
     $window.trigger("inactivity"); 
  }
});

$window.on("inactivity", "", null, function () {
  //your inactivity code
}); 
```

虽然如果手机关机，这个模糊事件似乎很粗略，我不知道我会在所有情况/移动设备上信任它。所以我可能会抛出这样的东西：

```
$(document.body).on("click scroll keyup", "", null, $window.declareActivity); 
```

这样我的不活动计时器也适用于用户刚刚走开的情况。根据您的站点，您可能需要调整该确切的事件列表 - 或简单地输入 $window.declareActivity(); 到响应用户输入的现有脚本中。

# c++ - 每个进程或每台计算机的线程 ID 是唯一的吗？

> ID：13798517
> 
> 赞同：15
> 
> 时间：2012-12-10T09:53:38.083
> 
> 标签：c++, multithreading, winapi, thread-safety

比如说，如果我有一个线程 ID，我可以确保它在每个进程或整个操作系统（在所有登录用户中）都是唯一的（只要线程正在运行）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-10T09:55:47.003

是的，Windows 上的线程 ID 和进程 ID 是从同一个池中分配的，因此它们是唯一的。然而，一旦线程或进程结束，该 ID 可能会被另一个线程或进程重新使用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-10T10:17:18.853

线程由内核对象表示，例如在 Windows 平台上。因此，它的 id 在所有登录会话的所有进程中都是唯一的。但是线程 id 可以在线程内核对象关闭后回收。

[GetCurrentThreadId](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683183(v=vs.85).aspx)还清楚地说明了运行时的唯一 ID。

# c# - 如何在 .net 4.0 中使用 asyn/await？AsyncTargetingPack 和 Microsoft.Bcl.Async 之间的区别？

> ID：13798519
> 
> 赞同：5
> 
> 时间：2012-12-10T09:53:53.077
> 
> 标签：c#, async-await

我想在 C# 4.0 中使用 async/await，直到知道，我已经使用了 async CTP v3，但这似乎是一个糟糕的选择，如果我使用的是 VS2012 则更多。

在 VS2012 中，至少有两个选项，Microsoft.CompilerServices.AsyncTargetingPack 和 Microsoft.Bcl.Async。

第一个，Microsoft.Bcl.Async (Bcl)，比 AsyncTargetingPack (ATP) 发布晚，但 Bcl 是 beta。

但是，ATP 适用于目标为 Silver light 5 或 .NET 4.0 的项目，而 Bcl 似乎与 silver light 4、silver light 5、Windows Phone 7.5 和 .NET 4.0 兼容。

ATP 已弃用？都是兼容的还是它们是不同的实现，如果我使用一个，我总是必须使用相同的？

哪个是最好的选择？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T10:03:16.973

[AsyncTargetingPack 已重命名为 Microsoft.Bcl.Async](http://blogs.msdn.com/b/lucian/archive/2012/04/24/async-targeting-pack.aspx)；后者只是前者的更新版本，而不是新的单独实现。在这种情况下，我只会使用最新版本，即使它是预发布版本，以避免以后必须更新到新的 NuGet 包名称时出现问题。

# python - uPnP 将视频推送到 OSX/Mac 上的智能电视/三星电视

> ID：13798520
> 
> 赞同：2
> 
> 时间：2012-12-10T09:53:55.893
> 
> 标签：python, bash, upnp, server-push, samsung-smart-tv

我想制作一个简单的脚本来将电影推送到智能电视。我已经安装了 miniupnp 或 ushare，但我不想进入电视智能应用程序的文件夹，我想将电影推送到电视上，以赢得时间，将来为什么不直接从 NAS 做同样的事情.

谁能知道如何做到这一点？这个应用程序 SofaPlay 让它很棒，但只能来自我的 mac。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:11:12.760

您仍然需要一个 DLNA 服务器来托管您的视频。通过 UPnP，您只需将 URL 传递给电视，而不是直接传递视频。将其托管在 DLNA 服务器上后，您可以通过在 Windows Media Player（支持 DLNA）中播放视频或使用 UPnP Inspector（如果您打算使用 UPnP）。然后，您可以将此 URL 推送到电视，电视将下载并播放视频（如果其格式受支持）。

我不知道如何使用 python，但是由于 UPnP 是基于 HTTP 的，因此您需要发送带有适当 UPnP 标头的 HTTP 请求（请参阅 wikipedia 或使用 UPnP Inspector 自行测试）和正确的 XML 格式正文您尝试使用的功能。

我用来推送电视链接的 UPnP 功能是“SetAVTransportURI”，但它可能与您的电视不同。使用 UPnP Inspector 找到正确的，包括它的参数。

总结：获取一个 DLNA-Server 来托管您的视频。使用 UPnP Inspector 或其他 DLNA 客户端查找这些视频的链接。找出向您的电视发送 URL 的 UPnP 功能（我再次推荐 UPnP Inspector，您可以使用它探索和调用所有功能）。在您的脚本中实现对该函数的调用。

# android - 位图大小超出 mapview addoverlay

> ID：13798525
> 
> 赞同：0
> 
> 时间：2012-12-10T09:54:27.333
> 
> 标签：android

我正在使用一些 .png 文件将叠加层添加到地图中。它工作正常，但有时会抛出位图大小超过 VM 预算错误。当将图像添加到列表视图时发生同样的问题时，我通过应用 SoftReference 解决了它。但我不知道如何应用它在地图视图中添加叠加层。请有任何想法。谢谢

像这样添加叠加层

```
public ItemizedOverlayMarker(Drawable defaultMarker, Context context) {
    super(boundCenterBottom(defaultMarker));
    mContext = context;
}

@Override
protected OverlayItem createItem(int i) {
    return mOverlays.get(i);
}

@Override
public int size() {
    return mOverlays.size();
}
public void addOverlay(OverlayItem overlay) {
    mOverlays.add(overlay);
    populate();
} 
```

像这样调用 ItamizerOverlay ：

```
final List<Overlay> mapOverlaysResult = mapView.getOverlays();
Drawable drawableResult = getResources().getDrawable(R.drawable.pin_pink);
final ItemizedOverlayMarker itemizedoverlayResult = new ItemizedOverlayMarker(drawableResult, this);

for (int i = 0; i < Constants.listOfPlaces.size(); i++) {

    GeoPoint geoPoint = new GeoPoint((int)(Double.parseDouble(latitude) * 1E6), (int)(Double.parseDouble(longitude) * 1E6));
    OverlayItem overlayitem = new OverlayItem(geoPoint, name, vicinity);
    itemizedoverlayResult.addOverlay(overlayitem);
                } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-10T10:10:10.820

首先将图像转换为文件对象

并传递下面的函数它将返回位图..

```
private Bitmap decodeFile(File f)
    {
        try
        {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true)
            {
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } 
        catch (FileNotFoundException e) {}
        return null;
    } 
```

# pdf-generation - 从 Magnolia CMS 中的内容生成 PDF

> ID：13798527
> 
> 赞同：1
> 
> 时间：2012-12-10T09:54:31.653
> 
> 标签：pdf-generation, magnolia

我们想为单个页面生成 PDF 文档。虽然只有[这个链接](http://forum.magnolia-cms.com/forum/thread.html?threadId=57b98495-1f50-4cdf-9eba-6b269f8e9168)讨论了这个主题（以及从那里链接的其他讨论），但给出的信息非常少。

有人可以分享迄今为止取得的任何成功案例，包括源代码吗？

有人成功使用[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)吗？

（我们计划使用 Magnolia 4.5.6）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T21:56:07.993

在评估了[Aspose.pdf](http://www.aspose.com/java/pdf-component.aspx)（商业产品）和[iText](http://itextpdf.com/)之后，我们开始使用 LaTex。我们有相当多的特定要求（例如，带有脚注的两列布局，非常大的表格），这对于上述两个产品是不可能的。

我们对这个解决方案非常满意，但是有一些事情需要注意：首先你离开了 JVM，其次 LaTex 本身就是另一种需要学习的宏语言。不过，结果的质量非常好，我们对这个解决方案非常满意。

wkhtmltopdf在另一个项目中使用，结果也不错，格式更直接。

# c# - ServiceStack.Text 没有按预期序列化我的对象

> ID：13798528
> 
> 赞同：2
> 
> 时间：2012-12-10T09:54:34.850
> 
> 标签：c#, json, serialization, json.net, servicestack

我正在尝试使用**Newtonsoft.Json**和**ServiceStack.Text**库比较序列化/反序列化的性能结果。我有一个名为 Application 的大类，我正在使用此类的一个实例来执行这些操作。对于同一个实例 NewtonSoft.Json 工作正常，并给我以下输出：

```
{
  "$id": "1",
  "_expiryDate": {
    "$id": "2",
    "_underlyingValue": null,
    "_isModified": false,
    "_isTrimmed": false
  },
  "_number": {
    "$id": "3",
    "_underlyingValue": 700771,
    "_isModified": true,
    "_isTrimmed": false
  },
  "_sobfDate": {
    "$id": "4",
    "_underlyingValue": null,
    "_isModified": false,
    "_isTrimmed": false
  },
  "_applyDate": {
    "$id": "5",
    "_underlyingValue": "/Date(1355127719000+0200)/",
    "_isModified": true,
    "_isTrimmed": false
  },
  "_approvalDate": {
    "$id": "6",
    "_underlyingValue": null,
    "_isModified": false,
    "_isTrimmed": false
  },
  "_contractDate": {
    "$id": "7",
    "_underlyingValue": null,
    "_isModified": false,
    "_isTrimmed": false
  },
  "_associatedLimitOffers": {
    "$id": "8",
    "$values": []
  },
  "_decisionTreeApprovals": {
    "$id": "9",
    "$values": [
      {
        "$id": "10",
        "_entity": {
          "$id": "11",
          "_date": null,
          "_rules": null,
          "_result": {
            "$id": "12",
            "_underlyingValue": 30,
            "_isModified": true,
            "_isTrimmed": false
          },
          "_applicant": null,
          "_activity": null,
          "_type": null,
          "_application": null,
          "_createdAt": null,
          "_id": null,
          "_isDeleted": null,
          "_isModifiedByOwnProcess": null,
          "_version": null,
          "_createdBehalfOf": null,
          "_createdBy": null,
          "_process": null,
          "_clientState": 0,
          "_serverState": 0,
          "_isLoaded": false,
          "_isTrimmed": false
        },
        "_clientState": 0,
        "_serverEntityId": null,
        "_serverEntityTypeName": null,
        "_serverState": 0,
        "_isLoaded": false,
        "_isTrimmed": false
      }
    ]
  },
  "_courierTasks": {
    "$id": "13",
    "$values": []
  },
  "_guarantors": {
    "$id": "14",
    "$values": []
  },
  "_utilization": {
    "$id": "15",
    "_entity": {
      "$id": "16",
      "_date": {
        "$id": "17",
        "_underlyingValue": null,
        "_isModified": true,
        "_isTrimmed": false
      },
      "_isBlockedUsage": null,
      "_application": null,
      "_createdAt": null,
      "_id": null,
      "_isDeleted": null,
      "_isModifiedByOwnProcess": null,
      "_version": null,
      "_createdBehalfOf": null,
      "_createdBy": null,
      "_process": null,
      "_clientState": 0,
      "_serverState": 0,
      "_isLoaded": false,
      "_isTrimmed": false
    },
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_associatedBalanceSheet": {
    "$id": "18",
    "$values": []
  },
  "_collaterals": {
    "$id": "19",
    "$values": []
  },
  "_submitterChannel": {
    "$id": "20",
    "_entity": {
      "$id": "21",
      "$type": "BigBank.Data.Model.ChannelDomain.VirtualChannel, BigBank.Data.Model",
      "_hierarchyDelegates": null,
      "_displayName": {
        "$id": "22",
        "_underlyingValue": "",
        "_isModified": true,
        "_isTrimmed": false
      },
      "_key": null,
      "_isActive": null,
      "_integrationCode": null,
      "_limitOptions": null,
      "_contractedOrganizations": null,
      "_constraints": null,
      "_createdAt": null,
      "_id": null,
      "_isDeleted": null,
      "_isModifiedByOwnProcess": null,
      "_version": null,
      "_createdBehalfOf": null,
      "_createdBy": null,
      "_process": null,
      "_clientState": 0,
      "_serverState": 0,
      "_isLoaded": false,
      "_isTrimmed": false
    },
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_ownerChannel": {
    "$id": "23",
    "_entity": {
      "$id": "24",
      "$type": "BigBank.Data.Model.ChannelDomain.VirtualChannel, BigBank.Data.Model",
      "_hierarchyDelegates": null,
      "_displayName": {
        "$id": "25",
        "_underlyingValue": "",
        "_isModified": true,
        "_isTrimmed": false
      },
      "_key": null,
      "_isActive": null,
      "_integrationCode": null,
      "_limitOptions": null,
      "_contractedOrganizations": null,
      "_constraints": null,
      "_createdAt": null,
      "_id": null,
      "_isDeleted": null,
      "_isModifiedByOwnProcess": null,
      "_version": null,
      "_createdBehalfOf": null,
      "_createdBy": null,
      "_process": null,
      "_clientState": 0,
      "_serverState": 0,
      "_isLoaded": false,
      "_isTrimmed": false
    },
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_scoreCard": {
    "$id": "26",
    "_entity": null,
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_seller": {
    "$id": "27",
    "_entity": null,
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_priority": {
    "$id": "28",
    "_underlyingValue": null,
    "_isModified": false,
    "_isTrimmed": false
  },
  "_merchandise": {
    "$id": "29",
    "_entity": null,
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_payment": {
    "$id": "30",
    "_entity": null,
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_requestedTerm": {
    "$id": "31",
    "_entity": {
      "$id": "32",
      "_maturity": null,
      "_application": null,
      "_items": null,
      "_product": {
        "$id": "33",
        "_entity": {
          "$id": "34",
          "_key": null,
          "_isActive": null,
          "_description": {
            "$id": "35",
            "_underlyingValue": "",
            "_isModified": true,
            "_isTrimmed": false
          },
          "_beginDate": null,
          "_endDate": null,
          "_limitOptions": null,
          "_baseProduct": null,
          "_derivedProducts": null,
          "_attributes": null,
          "_hierarchyDelegates": null,
          "_createdAt": null,
          "_id": null,
          "_isDeleted": null,
          "_isModifiedByOwnProcess": null,
          "_version": null,
          "_createdBehalfOf": null,
          "_createdBy": null,
          "_process": null,
          "_clientState": 0,
          "_serverState": 0,
          "_isLoaded": false,
          "_isTrimmed": false
        },
        "_clientState": 0,
        "_serverEntityId": null,
        "_serverEntityTypeName": null,
        "_serverState": 0,
        "_isLoaded": false,
        "_isTrimmed": false
      },
      "_accumulatedInterestUsage": null,
      "_pricingFactor": null,
      "_createdAt": null,
      "_id": null,
      "_isDeleted": null,
      "_isModifiedByOwnProcess": null,
      "_version": null,
      "_createdBehalfOf": null,
      "_createdBy": null,
      "_process": null,
      "_clientState": 0,
      "_serverState": 0,
      "_isLoaded": false,
      "_isTrimmed": false
    },
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_status": {
    "$id": "36",
    "_entity": null,
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_applicant": {
    "$id": "37",
    "_entity": {
      "$id": "38",
      "$type": "BigBank.Data.Model.PersonDomain.Person, BigBank.Data.Model",
      "_birthDate": null,
      "_birthPlace": null,
      "_citizenshipNumber": {
        "$id": "39",
        "_underlyingValue": 11111111111,
        "_isModified": true,
        "_isTrimmed": false
      },
      "_dependentRelative": null,
      "_disabilityRate": null,
      "_religion": null,
      "_totalWorkingPeriodInMonth": null,
      "_isStaff": null,
      "_identificationCertificate": null,
      "_drivingLicense": null,
      "_passport": null,
      "_relatives": null,
      "_relativeOf": null,
      "_socialSecurities": null,
      "_workExperiences": null,
      "_decisionTreeApprovals": {
        "$id": "40",
        "$values": []
      },
      "_bloodGroup": null,
      "_gender": null,
      "_graduation": null,
      "_maritalStatus": null,
      "_name": {
        "$id": "41",
        "_first": {
          "$id": "42",
          "_underlyingValue": "TEST",
          "_isModified": true,
          "_isTrimmed": false
        },
        "_last": {
          "$id": "43",
          "_underlyingValue": "TEST",
          "_isModified": true,
          "_isTrimmed": false
        },
        "_maiden": null
      },
      "_nationality": null,
      "_deathNotice": null,
      "_workingStatus": null,
      "_profession": null,
      "_birthProvince": null,
      "_balanceSheet": {
        "$id": "44",
        "$values": []
      },
      "_predefinedLimitOffers": null,
      "_accounts": null,
      "_locations": null,
      "_partnerships": null,
      "_applications": null,
      "_guarantoredRetailLoanApplications": null,
      "_customer": null,
      "_tax": null,
      "_baseLimit": null,
      "_associatedDocuments": null,
      "_phones": null,
      "_emails": null,
      "_isInsured": null,
      "_insurances": null,
      "_comments": null,
      "_createdAt": null,
      "_id": {
        "$id": "45",
        "_underlyingValue": "7c1058a6-0dd3-c378-ebaa-fdcf2a8a6936",
        "_isModified": true,
        "_isTrimmed": false
      },
      "_isDeleted": null,
      "_isModifiedByOwnProcess": null,
      "_version": null,
      "_createdBehalfOf": null,
      "_createdBy": null,
      "_process": null,
      "_clientState": 0,
      "CreditReferenceResult": {
        "$id": "46",
        "_creditReferencesApplication": null,
        "_scrCreditLimit": null,
        "_creditReferences": null,
        "_creditReferenceOwnData": null,
        "_person": null
      },
      "_serverState": 0,
      "_isLoaded": false,
      "_isTrimmed": false
    },
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_purpose": {
    "$id": "47",
    "_entity": null,
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_targetAccount": {
    "$id": "48",
    "_entity": null,
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_contractLocation": {
    "$id": "49",
    "_entity": null,
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_contractPhone": {
    "$id": "50",
    "_entity": null,
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_contractEmail": {
    "$id": "51",
    "_entity": null,
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_contactLocation": {
    "$id": "52",
    "_entity": null,
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_contactPhone": {
    "$id": "53",
    "_entity": null,
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_contactEmail": {
    "$id": "54",
    "_entity": null,
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_fundsTransferType": {
    "$id": "55",
    "_underlyingValue": null,
    "_isModified": false,
    "_isTrimmed": false
  },
  "_associatedDocuments": {
    "$id": "56",
    "$values": []
  },
  "_comments": {
    "$id": "57",
    "$values": []
  },
  "_createdAt": null,
  "_id": {
    "$id": "58",
    "_underlyingValue": "b9ee4131-43c6-6fe0-be4d-bbe60e6ace97",
    "_isModified": true,
    "_isTrimmed": false
  },
  "_isDeleted": null,
  "_isModifiedByOwnProcess": null,
  "_version": null,
  "_createdBehalfOf": null,
  "_createdBy": null,
  "_process": {
    "$id": "59",
    "_entity": {
      "$id": "60",
      "_state": {
        "$id": "61",
        "_underlyingValue": "Rejected(Completed)",
        "_isModified": true,
        "_isTrimmed": false
      },
      "_description": {
        "$id": "62",
        "_underlyingValue": "Red(Tamamlandı)",
        "_isModified": true,
        "_isTrimmed": false
      },
      "_isCompleted": null,
      "_correlationKey": null,
      "_logs": null,
      "_migration": null,
      "_parent": null,
      "_children": null,
      "_variables": null,
      "_definition": null,
      "_createdAt": null,
      "_id": null,
      "_isDeleted": null,
      "_isModifiedByOwnProcess": null,
      "_version": null,
      "_createdBehalfOf": null,
      "_createdBy": null,
      "_process": null,
      "_clientState": 0,
      "_serverState": 0,
      "_isLoaded": false,
      "_isTrimmed": false
    },
    "_clientState": 0,
    "_serverEntityId": null,
    "_serverEntityTypeName": null,
    "_serverState": 0,
    "_isLoaded": false,
    "_isTrimmed": false
  },
  "_clientState": 0,
  "_serverState": 0,
  "_isLoaded": false,
  "_isTrimmed": false
} 
```

在这之后，ServiceStack.Text 的输出只是：

```
{"_serverState":"New","_isLoaded":false,"_isTrimmed":false} 
```

这是我对两者进行序列化的方法：

```
 private List<string> SerializeUsingServiceStackText(List<Application> applications)
    {
        List<string> strings = new List<string>();

        foreach (Application item in applications)
        {
            string s = ServiceStack.Text.JsonSerializer.SerializeToString<Application>(item);
            strings.Add(s);
        }

        return strings;
    }

    Newtonsoft.Json.JsonSerializerSettings jsonSerializerSettings =
                new Newtonsoft.Json.JsonSerializerSettings()
                {
                    PreserveReferencesHandling = Newtonsoft.Json.PreserveReferencesHandling.All,
                    DateFormatHandling = Newtonsoft.Json.DateFormatHandling.MicrosoftDateFormat,
                    TypeNameHandling = Newtonsoft.Json.TypeNameHandling.Auto
                };

    private List<string> SerializeUsingJsonNet(List<Application> applications)
    {
        List<string> strings = new List<string>();

        foreach (Application item in applications)
        {
            strings.Add(Newtonsoft.Json.JsonConvert.SerializeObject(item, Newtonsoft.Json.Formatting.None, jsonSerializerSettings));
        }

        return strings;
    } 
```

我究竟做错了什么？我是否必须像在 Newtonsoft.Json 中那样对 ServiceStack.Text 库进行一些设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T13:21:02.410

[使用此方法](https://github.com/ServiceStack/ServiceStack.Text/blob/master/src/ServiceStack.Text/ReflectionExtensions.cs#L414)检索可序列化的属性。它只获取公共的、可读的属性。没有私有属性或字段。看起来您要么必须更改 POCO，要么被**Newtonsoft.Json**卡住:)

也许[这个 GitHub 问题](https://github.com/ServiceStack/ServiceStack.Text/issues/87)回答了你的问题？

**编辑：**我想你可以*做*这样的事情：

```
var bindingFlags = BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic;
TypeConfig<Application>.Properties = typeof(Application).GetProperties(bindingFlags); 
```

您可能还应该检查 getter 并且属性未标记`IgnoreDataMemberAttribute`等。但是您仍然被属性困住......

我可能是错的，但我看不到将其插入框架的方法，因此您必须对所有要反序列化的类型执行此操作。也许您可以创建一个通用扩展方法来执行此操作，然后对对象进行反序列化/序列化？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T14:35:42.170

看起来您正在尝试序列化具有私有属性的类，但 ServiceStack 仅序列化公共属性。

# xml - 导入文件内容时，vbs 将 < 更改为 < 并将我的 > 更改为 >

> ID：13798529
> 
> 赞同：0
> 
> 时间：2012-12-10T09:54:35.570
> 
> 标签：xml, vbscript

我完全不知道何时使用 VBScript，所以当我将网上找到的两个简单代码片段用于将文本文件的全部内容插入 XML 文档时，我非常高兴。

除了我的`<`已更改为`&lt;`和我的`<`已更改为之外，一切正常`&gt;`。

我该如何克服呢？

我的代码：

```
Const ForReading = 1

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objTextFile = objFSO.OpenTextFile("C:\test.txt", ForReading)

strText = objTextFile.ReadAll
objTextFile.Close

Set xmlDoc = CreateObject("Microsoft.XMLDOM")

xmlDoc.Async = "False"
xmlDoc.Load("C:\Audits.xml")

Set colNodes = xmlDoc.SelectNodes("/TOOLS")

For Each objNode In colNodes
   objNode.text = (strText)
Next

xmlDoc.Save "C:\Audits.xml" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T20:11:44.217

CDATA 部分允许 < 和 >：

> CDATA 部分允许开发人员在元素内容中包含标记字符 <、> 和 &，而无需使用字符或实体引用。脚本、样式表、程序代码和示例 XML 代码经常包含在 CDATA 部分中。

（[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms754521%28v=vs.85%29.aspx)）

代码：

```
 Dim oXML : Set oXML = CreateObject("Msxml2.DOMDocument")
  Set oXML.documentElement = oXML.createElement("a")
  Dim nd
  Set nd = oXML.createElement("b")
  nd.appendChild oXML.createTextNode("<>")
  oXML.documentElement.appendChild nd
  Set nd = oXML.createElement("c")
  nd.appendChild oXML.createCDATASection("<>")
  oXML.documentElement.appendChild nd 
```

输出：

```
<a><b>&lt;&gt;</b><c><![CDATA[<>]]></c></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:33:10.250

你没有“克服”这一点。`<`和`>`字符**必须**进行编码，否则解析 XML 标记会出现问题（由尖括号分隔，即`<`和`>`字符）。

# iphone - 如何在iphone录音前设置定时器？

> ID：13798532
> 
> 赞同：-1
> 
> 时间：2012-12-10T09:54:41.383
> 
> 标签：iphone, ios, objective-c

我是电话编程的新手。我正在做一个项目，因为我想在录音之前设置特定的时间。在段控制器中，我给出了一些值，我将这些值存储在变量中。如果点击里面的那个段按钮该按钮的一些值我已经给出了我想在这段代码中修复的值如何做到这一点。任何人都可以帮助我

```
[recorder recordForDuration:(NSTimeInterval)5]; 
```

在上面的代码中代替 5，我想给段控制器变量值，例如如果我选择 10 表示。10 的值修复代替 5。类似地，如果我选择 15 表示 15 的值修复代替 10 如何做到这一点有什么可以帮助我的。谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-10T10:12:42.793

尝试这个

```
[recorder recordForDuration:intvalue]; 
```

或者，

这可能有助于解决您的问题。

开始录制后，通过设置定时器来调用录制停止功能，如下所示。

```
[self performSelector:@selector(stoprecord)withObject:nil afterDelay:intvalue]; 
```

将 int 值设置为您想要的任何整数

```
-(void) stoprecord
{
   [recorder stop]
} 
```

# java - 扩展已创建的对象以执行 1 次执行

> ID：13798535
> 
> 赞同：-3
> 
> 时间：2012-12-10T09:54:54.597
> 
> 标签：java, sockets

我不知道该怎么称呼这个问题，但是我有这个聊天程序，我在其中从 ChatPerson 对象创建了几个聊天人。

现在，每当客户端连接时，都会创建一个新的 ChatPerson。但是我在客户端遇到了问题。客户端必须知道谁在发送例如聊天消息。

因此，我向您提出的问题是我该如何解决这个难题？我是扩展对象并创建一个“我”的对象，还是我只是创建该对象的另一个实例，而这就是通过程序传递的那个？

最好的做法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:02:08.347

很难说出你想要什么或在问什么。看来您需要识别客户。

给 ChatPerson 类一个 id 字段——也许使用用户的昵称。

每条消息都应该携带发送消息的客户端的 id。聊天服务器应控制客户端的注册以确保 id 是唯一的。

# python - 覆盖先前内容的同一行输出不起作用（python 2.7）

> ID：13798536
> 
> 赞同：1
> 
> 时间：2012-12-10T09:54:55.007
> 
> 标签：python, linux, printing, python-2.7

按照[此处](https://stackoverflow.com/questions/4897359/output-to-the-same-line-overwriting-previous-output-python-2-5)给出的描述如何在 python 中以这种方式创建输出，即覆盖以前的输出，我尝试了以下代码

```
from __future__ import print_function
import time

for val in range(10):
    time.sleep(0.2)
    print(val, end='\r') 
```

但根本看不到任何输出。它`end=\n`按预期工作（即垂直列中的数字 0 到 9）。我看不到任何输出的原因是什么？我需要冲洗一些东西吗？这个操作系统是否依赖（在 Ubuntu Linux 上工作）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:03:05.067

我猜该流在获得“\ n”之前不会被刷新。

看看这篇文章：[禁用输出缓冲](https://stackoverflow.com/q/107705/1045800)

尝试使用 -u 启动 Python 时它是否有效。

# app-store-connect - iTunes，应用上传警告。应用程序引用非公共选择器：productName

> ID：13798537
> 
> 赞同：5
> 
> 时间：2012-12-10T09:54:57.550
> 
> 标签：app-store-connect

在 iTune connect 上上传我的应用程序期间，我收到以下警告：

```
The app references non-public selectors in My_application.app/My_application: productName 
```

我从这些问题中获得了一些知识：

[该应用程序在 Payload 中引用了非公共选择器](https://stackoverflow.com/questions/10023343/the-app-references-non-public-selectors-in-payload "问题 1")

[如何调试 Apple App Loader 中的“应用程序引用非公共选择器”错误？](https://stackoverflow.com/questions/13356014/how-to-debug-the-app-references-non-public-selectors-error-in-apple-app-loader)

[苹果说该应用程序引用了我的应用程序中的非公共选择器。这意味着什么？](https://stackoverflow.com/questions/10884968/apple-says-the-app-references-non-public-selectors-in-my-app-what-does-that-mea)

但没有具体说明`productName`。搜索我的项目时，我只在 Google Analytics Libraries 中找到了这个字符串。我仔细检查了我是否获得了最新版本的 Google Analytics。

我假设 Apple 验证器机器人认为我正在尝试以编程方式更改应用程序名称（我没有这样做）。

是否有任何应用程序因此警告而被拒绝？如何删除此警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T16:20:20.627

经过 5 天的压力，该应用程序在没有任何警告的情况下被 Apple 接受。

我认为这是 Apple Tester 众所周知的机器人警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-23T06:20:42.707

只需从谷歌分析下载最新的 SDK。该问题已在最新版本中得到解决（此时答案为 3.0.1）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-11T12:55:57.523

我有同样的问题。我删除了 Google Analytics sdk 并使用了 flurry 。

然后一切正常。

# c# - 如何将 CancellationTokenSource 附加到 DownloadStringTaskAsync 方法并取消异步调用？

> ID：13798539
> 
> 赞同：18
> 
> 时间：2012-12-10T09:54:57.783
> 
> 标签：c#, .net-4.5, async-await, c#-5.0, cancellationtokensource

我创建了一个示例示例以使用 WebClient 使用 async 和 await 方法调用链接，现在我还想附加取消异步调用功能。但我无法获取 CancellationTokenSource 令牌并将 DownloadStringTaskAsync 附加到此取消令牌。以下是我的代码，任何人都可以告诉我如何做到这一点。

```
private async void DoWork()
        {
            this.Cursor = Cursors.WaitCursor;
            Write("DoWork started.");
            cts = new CancellationTokenSource();
            WebClient wc = new WebClient();
            string result = await wc.DownloadStringTaskAsync(new Uri("http://gyorgybalassy.wordpress.com"));

            if (result.Length < 100000)
            {
                Write("The result is too small, download started from second URL.");
                result = await wc.DownloadStringTaskAsync(new Uri("https://www.facebook.com/balassy"));
            }
            Write("Download completed. Downloaded bytes: " + result.Length.ToString());
            Write("DoWork ended.");
            this.Cursor = Cursors.Default;
        }

        private void btnCancel_Click(object sender, EventArgs e)
        {
            Write("Cancellation started.");
            this.cts.Cancel();
            Write("Cancellation ended.");
        } 
```

当我的取消按钮调用 cts.Cancel 时，DownloadStringTaskAsync 调用不会被取消。为什么取消按钮无法取消异步调用？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-10T23:52:53.657

早于 .Net 4.5的异步功能`WebClient`，因此它仅部分支持[基于任务的异步模式。](http://msdn.microsoft.com/en-us/library/hh873175.aspx)这包括拥有自己的取消机制：[方法`CancelAsync()`，](http://msdn.microsoft.com/en-us/library/system.net.webclient.cancelasync.aspx)即使使用新`-TaskAsync`方法也可以。要在取消 a 时调用此方法`CancellationToken`，可以使用[它的`Register()`方法](http://msdn.microsoft.com/en-us/library/dd321790.aspx)：

```
cts.Token.Register(wc.CancelAsync); 
```

作为替代方案，您可以使用新的`HttpClient`，正如斯蒂芬建议的那样，它完全支持 TAP，包括`CancellationToken`s。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-08-23T16:21:59.410

基于 svick 答案的扩展方法：

```
public static async Task<string> DownloadStringTaskAsync(this WebClient webClient, string url, CancellationToken cancellationToken) {
    using (cancellationToken.Register(webClient.CancelAsync)) {
        return await webClient.DownloadStringTaskAsync(url);
    }
}

public static async Task<string> DownloadStringTaskAsync(this WebClient webClient, Uri uri, CancellationToken cancellationToken) {
    using (cancellationToken.Register(webClient.CancelAsync)) {
        return await webClient.DownloadStringTaskAsync(uri);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-10T13:26:15.760

`WebClient`不支持取消。我建议您使用较新的类型，例如`HttpClient`：

```
...
cts = new CancellationTokenSource();
string result;
using (var client = new HttpClient())
using (var response = await client.GetAsync("http://gyorgybalassy.wordpress.com", cts.Token))
{
  result = await response.Content.ReadAsStringAsync();
}

if (result.Length < 100000)
... 
```

默认情况下，该`GetAsync`方法在读取整个响应之前不会完成，因此该`await response.Content.ReadAsStringAsync`行实际上是同步完成的。

# javascript - 如何从 IE 中的跨域 iframe 获取窗口大小

> ID：13798540
> 
> 赞同：1
> 
> 时间：2012-12-10T09:55:03.827
> 
> 标签：javascript, iframe

在跨域场景中，当 javascript 代码在 iframe 中运行时，我需要知道 iframe 的大小（宽度和高度）是什么。（我无法爬到父级，因为我在跨域 iframe 中） 注意：我不想使用 jquery。我尝试了几种方法来获取该信息：

```
var w = window.innerWidth || window.document.documentElement.clientWidth || document.getElementsByTagName('body')[0].clientWidth || document.body.offsetWidth
var h = window.innerHeight || window.document.documentElement.clientHeight || document.getElementsByTagName('body')[0].clientHeight || document.body.offsetHeight 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:59:19.783

那么，您是否尝试访问另一个域上的 iframe？你不能，因为 XSS 保护。

这是一个类似的问题：[Get DOM content of cross-domain iframe](https://stackoverflow.com/questions/6170925/get-dom-content-of-cross-domain-iframe)

[http://en.wikipedia.org/wiki/Cross-site_scripting](http://en.wikipedia.org/wiki/Cross-site_scripting)

编辑：也许这个解决方案可以根据您在页面上的权限为您提供有关如何操作的提示[http://paulasmuth.com/blog/dynamic_height_crossdomain_iframe/ 。](http://paulasmuth.com/blog/dynamic_height_crossdomain_iframe/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:23:35.013

如果要获取窗口大小，请使用此（如果有，则不包括滚动条大小）：

```
var w = document.documentElement.clientWidth;
var h = document.documentElement.clientHeight; 
```

如果要获取文档大小，请使用此（如果有，则不包括滚动条大小）：

```
var w = document.documentElement.scrollWidth;
var h = document.documentElement.scrollHeight; 
```

# c# - 实体框架可空列不在数据库中

> ID：13798544
> 
> 赞同：1
> 
> 时间：2012-12-10T09:55:13.197
> 
> 标签：c#, database, entity-framework, nullable

我有一个用户访问类：

```
public class UserAccess : CloneableBaseEntity<UserAccess>
{
    public int UserId { get; set; }
    public User User { get; set; }
    public int? SiteId { get; set; }
    public virtual Site Site { get; set; }
    public int? CostCenterId { get; set; }
    public virtual CostCenter CostCenter { get; set; }
    public int? ProductId { get; set; }
    public virtual Product Product { get; set; }
} 
```

该类派生自基本实体：

```
public  class BaseEntity : ObservableObject
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }
    public DateTime Created { get; set; }
    public int CreatedUserId { get; set; }
    public DateTime Changed { get; set; }
    public int ChangedUserId { get; set; }

    public BaseEntity()
    {
    }

} 
```

Site、Product 和 CostCenter 公开此属性：

```
 public virtual List<UserAccess> UserAccesses { get; private set; } 
```

当我更新我的数据库时，UserAccess 表中的列仍然不能为空。是什么导致了这种行为？

# java - 添加按钮以创建行并删除以删除摆动表中的行

> ID：13798545
> 
> 赞同：1
> 
> 时间：2012-12-10T09:55:13.120
> 
> 标签：java, swing, jbutton

我需要一个在标题上有添加按钮的 Jtable。单击添加时..然后它必须添加一行，其中包含 4 列的 3 个文本字段和删除按钮。单击删除按钮时，应删除相应的行..提前致谢..

```
public class UserTableInfo {
private JFrame frame;
private JTable CompTable = null;
private PanelTableModel CompModel = null;
private JButton delButton=null;
private JButton button=null;
public static void main(String args[]) {
try {
UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
} catch (Exception fail) {
}
SwingUtilities.invokeLater(new Runnable() {
@Override
public void run() {
new UserTableInfo().makeUI();
}
});    }
public void makeUI() {
CompTable = CreateCompTable();
JScrollPane CompTableScrollpane = new JScrollPane(CompTable,
JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,
JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
JPanel bottomPanel = CreateBottomPanel();
frame = new JFrame("Comp Table Test");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.add(CompTableScrollpane, BorderLayout.CENTER);
frame.add(bottomPanel, BorderLayout.SOUTH);
frame.setPreferredSize(new Dimension(800, 400));
frame.setLocation(150, 150);
frame.pack();
frame.setVisible(true);
}public JTable CreateCompTable() {
CompModel = new PanelTableModel();
button=new JButton("Add Row");
button.addActionListener(new ActionListener() {
@Override
public void actionPerformed(ActionEvent e) {
CompModel.addRow();
}
});        
JTable table = new JTable(CompModel);
table.setRowHeight(new CompCellPanel().getPreferredSize().height);
JTableHeader header = table.getTableHeader();
header.setLayout(new FlowLayout(FlowLayout.TRAILING, 5, 0));
header.add(button);
PanelCellEditorRenderer PanelCellEditorRenderer = new
PanelCellEditorRenderer();
table.setDefaultRenderer(Object.class, PanelCellEditorRenderer);
table.setDefaultEditor(Object.class, PanelCellEditorRenderer);
return table;
}    public JPanel CreateBottomPanel() {
delButton=new JButton("Exit");
delButton.addActionListener(new ActionListener(){
public void actionPerformed(ActionEvent ae) {
Object source = ae.getSource();
if (source == delButton) {
System.exit(1);
}           
}
});        JPanel panel = new JPanel(new GridBagLayout());
panel.add(delButton);
return panel;
}
}
class PanelCellEditorRenderer extends AbstractCellEditor implements
TableCellRenderer, TableCellEditor {
private static final long serialVersionUID = 1L;
private CompCellPanel renderer = new CompCellPanel();
private CompCellPanel editor = new CompCellPanel();
@Override
public Component getTableCellRendererComponent(JTable table, Object
value, boolean isSelected, boolean hasFocus, int row, int column) {
renderer.setComp((Comp) value);
return renderer;
}
@Override
public Component getTableCellEditorComponent(JTable table, Object
value, boolean isSelected, int row, int column) {
editor.setComp((Comp) value);
return editor;
}
@Override
public Object getCellEditorValue() {
return null;
}
@Override
public boolean isCellEditable(EventObject anEvent) {
return true;
}
@Override
public boolean shouldSelectCell(EventObject anEvent) {
return false;
}
}
class PanelTableModel extends DefaultTableModel {
private static final long serialVersionUID = 1L;
@Override
public int getColumnCount() {
return 1;
}
public void addRow() {
super.addRow(new Object[]{new Comp("")});
}
}
class Comp {
public String upper;
public Comp(String upper) {
this.upper = upper;
}
}
class CompCellPanel extends JPanel {
private static final long serialVersionUID = 1L;
private JLabel label = new JLabel();
private JTextField upperField = new JTextField();
private JButton removeButton = new JButton("remove");
CompCellPanel() {
setLayout(new BoxLayout(this, BoxLayout.X_AXIS));
removeButton.addActionListener(new ActionListener() {
public void actionPerformed(ActionEvent e) {
JTable table = (JTable)
SwingUtilities.getAncestorOfClass(JTable.class, (Component) e.getSource());
int row = table.getEditingRow();
table.getCellEditor().stopCellEditing();
((DefaultTableModel) table.getModel()).removeRow(row);
}        });
upperField.setMaximumSize(new Dimension(Integer.MAX_VALUE,            upperField.getPreferredSize().height) );
add(upperField);
label.setMaximumSize(getMaximumSize());
add(label);
add(Box.createHorizontalStrut(10));
add(removeButton);
}
public void setComp(Comp Comp) {
upperField.setText(Comp.upper);
}    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T16:18:49.390

`AbstractTableModel`如果您扩展 a并使用它来显示您的数据，这会容易得多。您可以制作数据的 ArrayList 并从中添加/删除。当 ArrayList 发生变化时，TableModel 会自动更新 Table。ArrayList 包含一个类，其中包含您将连续拥有的所有数据。请参阅 Oracle 的 Java 教程示例：http://docs.oracle.com/javase/tutorial/displayCode.html?code=http: [//docs.oracle.com/javase/tutorial/uiswing/examples/components/TableDemoProject/ src/components/TableDemo.java](http://docs.oracle.com/javase/tutorial/displayCode.html?code=http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableDemoProject/src/components/TableDemo.java)

对于自定义单元格，您可以从 TableModel 中检测单元格所在的列并相应地更新其内容。

# iphone - 模糊图像的部分部分

> ID：13798546
> 
> 赞同：0
> 
> 时间：2012-12-10T09:55:15.417
> 
> 标签：iphone, objective-c, ios, cocoa, nsimage

我是 iOS 开发新手。谷歌搜索后我发现，很容易模糊整个图像，但很难模糊图像的特定部分，如矩形或圆形。所以请帮助我如何模糊图像的特定部分而不是整个图像？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T19:35:29.153

模糊整个图像，然后[裁剪](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CICrop)到您关心的部分。您可以为非矩形/非锐边模糊使用蒙版，但不要跳过裁剪。

Core Image 可爱但有时很棘手的一点是它非常懒惰。从头到尾都行不通；它更像是一个拉模型，从您要求的最后一件事一直到原始栅格。此外，它实际上不会过滤您没有要求的任何像素。

因此，在您的情况下，裁剪意味着不要求裁剪之外的任何模糊像素。由于您没有要求它们，因此它们不会变得模糊。模糊仅在您要求的像素上运行 - 裁剪内的像素。

掩蔽的工作方式不同；根据定义，它需要查看掩码图像中的每个像素，如果它不查看源中的每个像素（甚至将其乘以零），我会感到惊讶。这就是为什么你仍然应该裁剪，即使戴着面具。

请注意，图像的模糊和裁剪部分仍将位于原始图像中的位置。它不会复制/移动图像中的像素，因为那样会很昂贵；相反，它返回一个具有不同范围的图像——即裁剪矩形。您需要[检索该范围](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIImage_Class/Reference/Reference.html#//apple_ref/occ/instm/CIImage/extent)并从要绘制图像的坐标中减去其原点 - 要么使用仿射变换过滤器，要么使用[仿射变换过滤器](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIAffineTransform)，但同样，这可能会很昂贵。

# c# - SQL CLR 函数错误

> ID：13798555
> 
> 赞同：1
> 
> 时间：2012-12-10T09:55:47.983
> 
> 标签：c#, sharepoint, sqlclr

我制作了一个 SQL CLR 函数来从 SharePoint 网站检索数据。这是返回给 SQL 的部分：

```
public static void GetListItemInfo(
                        object obj,
                        out SqlString Name,
                        out SqlString SO,
                        out SqlString LineNumber,
                        out SqlString SerialNumber,
                        out SqlString Certificates,
                        out SqlString Tags,
                        out SqlString RevisionNumber)
    {
        DataRow r = (DataRow)obj;
        Name = new SqlString(r["ows_LinkFilename"].ToString());
        SO = new SqlString(r["ows_SO"].ToString());
        LineNumber = new SqlString(r["ows_Line_x0020_Number"].ToString());
        SerialNumber = new SqlString(r["ows_Unit_x0020_Number"].ToString());
        Certificates = new SqlString(r["ows_Certificate_x0020_Type"].ToString());
        Tags = new SqlString(r["ows_Tags"].ToString());
        RevisionNumber = new SqlString(r["ows_Revision_x0020_Number"].ToString());
    } 
```

所有这些都是 SharePoint 列表中存在的列名，但是当我从 SQL 运行该函数时，它会显示此错误：

```
Msg 6260, Level 16, State 1, Line 1
An error occurred while getting new row from user defined Table Valued Function : 
System.ArgumentException: Column 'ows_Line_x0020_Number' does not belong to table row.
System.ArgumentException: 
   at System.Data.DataRow.GetDataColumn(String columnName)
   at System.Data.DataRow.get_Item(String columnName)
   at SharePointToSQL.GetListItemInfo(Object obj, SqlString& SO, SqlString& LineNumber, SqlString& Tags) 
```

但是，如果我尝试仅获取“SO”和“标签”列，则不会出现此错误，因为其他所有内容都不起作用。

**更新：** 我发现我能够返回“ows_SO”“ows_Sample”等列，但不能返回“ows_Line_x0020_Number”等列。我可以通过稍微更改列名来做我想做的事。但是谁能告诉我为什么不能使用像“ows_Line_x0020_Number”这样的列名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:47:40.050

SharePoint 使用该`xNNNN`表示法对某些符号进行编码。`0020`是 Unicode 空间的 HEX，因此请尝试使用：

`r["ows_Line Number"]`

代替

`r["ows_Line_x0020_Number"]`

`_x0020_`即用（空格）替换every `，看看是否有帮助。`

 `如果这不起作用，请尝试在调试器中停止并查看表行中的实际列。我仍然认为这只是一些行名转换的问题。`Table`要获取行名，您可以先使用属性 of获取 shema `DataRow`，然后使用它的[`Columns`](http://msdn.microsoft.com/en-us/library/system.data.datatable.columns.aspx)属性获取所有列名。`

# java - Java 表达式解析器和计算器调车场算法

> ID：13798557
> 
> 赞同：1
> 
> 时间：2012-12-10T09:55:53.507
> 
> 标签：java, expression, unary-operator, shunting-yard

所以任务是为表达式计算器创建我们自己的解析器。例如：

输入：3+2*1-6/3 输出：3

输入：3++2 输出：无效的表达式

输入：-5+2 输出：-3

输入：5--2 输出：7

这里的代码解决了部分问题，只是它有一个固定的输入并且无法解决负值，而且我还不太确定它是否真的解决了具有运算符优先级的表达式。但我已经对其进行了修改以从用户那里获取输入表达式。我一直想知道如何解决负值。帮助任何人？

请不要使用 JAVASCRIPT 引擎。

这是当前代码

```
 import java.util.*; 

public class ExpressionParser   
{  
    // Associativity constants for operators  
    private static final int LEFT_ASSOC  = 0;  
    private static final int RIGHT_ASSOC = 1;  

    // Operators  
    private static final Map<String, int[]> OPERATORS = new HashMap<String, int[]>();  
    static   
    {  
        // Map<"token", []{precendence, associativity}>  
        OPERATORS.put("+", new int[] { 0, LEFT_ASSOC });  
        OPERATORS.put("-", new int[] { 0, LEFT_ASSOC });  
        OPERATORS.put("*", new int[] { 5, LEFT_ASSOC });  
        OPERATORS.put("/", new int[] { 5, LEFT_ASSOC });          
    }  

    // Test if token is an operator  
    private static boolean isOperator(String token)   
    {  
        return OPERATORS.containsKey(token);  
    }  

    // Test associativity of operator token  
    private static boolean isAssociative(String token, int type)   
    {  
        if (!isOperator(token))   
        {  
            throw new IllegalArgumentException("Invalid token: " + token);  
        }  

        if (OPERATORS.get(token)[1] == type) {  
            return true;  
        }  
        return false;  
    }  

    // Compare precedence of operators.      
    private static final int cmpPrecedence(String token1, String token2)   
    {  
        if (!isOperator(token1) || !isOperator(token2))   
        {  
            throw new IllegalArgumentException("Invalid tokens: " + token1  
                    + " " + token2);  
        }  
        return OPERATORS.get(token1)[0] - OPERATORS.get(token2)[0];  
    }  

    // Convert infix expression format into reverse Polish notation  
    public static String[] expToRPN(String[] inputTokens)   
    {  
        ArrayList<String> out = new ArrayList<String>();  
        Stack<String> stack = new Stack<String>();  

        // For each token  
        for (String token : inputTokens)   
        {  
            // If token is an operator  
            if (isOperator(token))   
            {    
                // While stack not empty AND stack top element   
                // is an operator  
                while (!stack.empty() && isOperator(stack.peek()))   
                {                      
                    if ((isAssociative(token, LEFT_ASSOC)         && 
                         cmpPrecedence(token, stack.peek()) <= 0) ||   
                        (isAssociative(token, RIGHT_ASSOC)        &&   
                         cmpPrecedence(token, stack.peek()) < 0))   
                    {  
                        out.add(stack.pop());     
                        continue;  
                    }  
                    break;  
                }
                // Push the new operator on the stack  
                stack.push(token);  
            }   
            // If token is a left bracket '('  
            else if (token.equals("("))   
            {  
                stack.push(token);  //   
            }   
            // If token is a right bracket ')'  
            else if (token.equals(")"))   
            {                  
                while (!stack.empty() && !stack.peek().equals("("))   
                {  
                    out.add(stack.pop());   
                }  
                stack.pop();   
            }   
            // If token is a number  
            else   
            {  
            //  if(!isOperator(stack.peek())){
            //      out.add(String.valueOf(token*10));
            //      }
                out.add(token);   
            }  
        }  
        while (!stack.empty())  
        {  
            out.add(stack.pop());   
        }  
        String[] output = new String[out.size()];  
        return out.toArray(output);  
    }  

    public static double RPNtoDouble(String[] tokens)  
    {          
        Stack<String> stack = new Stack<String>();  

        // For each token   
        for (String token : tokens) //for each   
        {  
            // If the token is a value push it onto the stack  
            if (!isOperator(token))   
            {  
                stack.push(token);                  
            }  
            else  
            {          
                // Token is an operator: pop top two entries  
                Double d2 = Double.valueOf( stack.pop() );  
                Double d1 = Double.valueOf( stack.pop() );  

                //Get the result  
                Double result = token.compareTo("*") == 0 ? d1 * d2 :   
                                token.compareTo("/") == 0 ? d1 / d2 :  
                                token.compareTo("+") == 0 ? d1 + d2 :  
                                                            d1 - d2;                 
              // Push result onto stack  
                stack.push( String.valueOf( result ));                                                  
            }                          
        }          

        return Double.valueOf(stack.pop());  
    }  

    public static void main(String[] args) throws Exception{  
        Scanner in = new Scanner(System.in);
        String reg = "((?<=[<=|>=|==|\\+|\\*|\\-|<|>|/|=])|(?=[<=|>=|==|\\+|\\*|\\-|<|>|/|=]))";
    while(true){
        try{
        System.out.println("Enter Your Expression");  
        //String[] input = "( 1 + 2 ) * ( 3 / 4 ) - ( 5 + 6 )".split(" ");
        String[] input =  in.nextLine() .split(reg);  
        String[] output = expToRPN(input);  

        // Build output RPN string minus the commas  
         System.out.print("Stack: ");
         for (String token : output) {  
                System.out.print("[ ");System.out.print(token + " "); System.out.print("]");
        }  
         System.out.println(" ");   
        // Feed the RPN string to RPNtoDouble to give result  
        Double result = RPNtoDouble( output );
        System.out.println("Answer= " + result);                
        }catch (NumberFormatException | EmptyStackException nfe){ 
            System.out.println("INVALID EXPRESSION"); }         
        }
    }
} 
```

更新代码：添加：unaryToexp() 函数。我想做的是每次出现“ - ”时，代码通过将其更改为“ _ ”作为另一个运算符将其视为二进制文件，并且该运算符解决乘以 -1 的问题（我首先想要的是添加 [- 1] 和 [*] 到 rpn 堆栈）。这里仍然有问题。

编译器说：

```
Enter Your Expression
-5+3
Stack: [  ][ 5 ][ - ][ 3 ][ + ]
Exception in thread "main" java.lang.NumberFormatException: empty String
        at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:10 11)
        at java.lang.Double.valueOf(Double.java:504)
        at ExpressionParser.RPNtoDouble(ExpressionParser.java:160)
        at ExpressionParser.main(ExpressionParser.java:194)* 
```

我认为这与`Double d1 = Double.valueOf( stack.pop() );`它仍然弹出另外两个值的原因有关，我只需要一个来解决一元运算符。有什么帮助吗？

```
public class ExpressionParser   
{  
    // Associativity constants for operators  
    private static final int LEFT_ASSOC  = 0;  
    private static final int RIGHT_ASSOC = 1;  

    // Operators  
    private static final Map<String, int[]> OPERATORS = new HashMap<String, int[]>();  
    static   
    {  
       // Map<"token", []{precendence, associativity}>      
        OPERATORS.put("-", new int[] { 0, LEFT_ASSOC });  
        OPERATORS.put("+", new int[] { 0, LEFT_ASSOC });  
        OPERATORS.put("*", new int[] { 5, LEFT_ASSOC });  
        OPERATORS.put("/", new int[] { 5, LEFT_ASSOC });
        OPERATORS.put("_", new int[] { 5, RIGHT_ASSOC }); 
    }  

    // Test if token is an operator  
    private static boolean isOperator(String token)   
    {
        return OPERATORS.containsKey(token);  
    }  

    // Test associativity of operator token  
    private static boolean isAssociative(String token, int type)   
    {  
        if (!isOperator(token))   
        {  
            throw new IllegalArgumentException("Invalid token: " + token);  
        }  

        if (OPERATORS.get(token)[1] == type) {  
            return true;  
        }

        return false;  
    }  

    // Compare precedence of operators.      
    private static final int cmpPrecedence(String token1, String token2)   
    {  
        if (!isOperator(token1) || !isOperator(token2))   
        {  
            throw new IllegalArgumentException("Invalid tokens: " + token1  
                    + " " + token2);  
        }  
        return OPERATORS.get(token1)[0] - OPERATORS.get(token2)[0];  
    }  

    // CONVERT UNARY OPERATORS
    public static String[] unaryToexp(String[] inputTokens)
    {
        ArrayList<String> out = new ArrayList<String>();  
        Stack<String> stack = new Stack<String>(); 
                //if token is an unary minus
        for (String token : inputTokens)   
        {
                    if( ((token == "-") && (isOperator(stack.peek()) || stack.empty()  ))){  // 
                        token = "_";
                    }
                    else if (token == "-"){
                        token = "-";
                    }
            out.add(token);
             while (!stack.empty())  
                {  
                    out.add(stack.pop());
                }       
        }

        String[] output = new String[out.size()];  
        return out.toArray(output);  
    }

    // Convert infix expression format into reverse Polish notation  
    public static String[] expToRPN(String[] inputTokens)   
    {  
        ArrayList<String> out = new ArrayList<String>();  
        Stack<String> stack = new Stack<String>();  

        // For each token  
        for (String token : inputTokens)   
        { 
            // If token is an operator  
            if (isOperator(token))   
            {  
                // While stack not empty AND stack top element   
                // is an operator 

                while (!stack.empty() && isOperator(stack.peek()))
                {                      
                    if ((isAssociative(token, LEFT_ASSOC)         && 
                         cmpPrecedence(token, stack.peek()) <= 0) ||   
                        (isAssociative(token, RIGHT_ASSOC)        &&   
                         cmpPrecedence(token, stack.peek()) < 0))       

                    {  
                        out.add(stack.pop());     
                        continue; 
                    }
                    break;  
                }

                // Push the new operator on the stack 
                stack.push(token);  
            }
            // If token is a left bracket '('  
            else if (token.equals("("))   
            {  
                stack.push(token);  //   
            }   
            // If token is a right bracket ')'  
            else if (token.equals(")"))   
            {                  
                while (!stack.empty() && !stack.peek().equals("("))   
                {  
                    out.add(stack.pop());   
                }  
                stack.pop();   
            }   
            // If token is a number  
            else   
            {  
                out.add(token);   
            }  
        }  
        while (!stack.empty())  
        {  
            out.add(stack.pop());   
        }  
        String[] output = new String[out.size()];  
        return out.toArray(output);  
    }  

   public static double RPNtoDouble(String[] tokens)  
{          
    Stack<String> stack = new Stack<String>();  

    // For each token   
    for (String token : tokens)   
    {  
        // If the token is a value push it onto the stack  
        if (!isOperator(token))   
        {  
            stack.push(token);                  
        }  
        else  
        {  
            // Token is an operator: pop top two entries  
            Double d2 = Double.valueOf( stack.pop() );  
            Double d1 = Double.valueOf( stack.pop() );  

            //Get the result  
            Double result = token.compareTo("_") == 0 ? d2 * -1 :   
                            token.compareTo("*") == 0 ? d1 * d2 :   
                            token.compareTo("/") == 0 ? d1 / d2 :  
                            token.compareTo("+") == 0 ? d1 + d2 :  
                                                        d1 - d2;    

            // Push result onto stack  
            stack.push( String.valueOf( result ));                                                  
        }                          
    }          
    return Double.valueOf(stack.pop());  
}  

    public static void main(String[] args) throws Exception{  
        Scanner in = new Scanner(System.in);
        String reg = "((?<=[<=|>=|==|\\+|\\*|\\-|\\_|<|>|/|=])|(?=[<=|>=|==|\\+|\\*|\\-|<|>|/|=]))";
    while(true){
        //try{
        System.out.println("Enter Your Expression");  
        //String[] input = "( 1 + 2 ) * ( 3 / 4 ) - ( 5 + 6 )".split(" ");
        String[] input =  in.nextLine() .split(reg); 
        String[] unary = unaryToexp(input); //.split(reg);
        String[] output = expToRPN(unary);  

        // Build output RPN string minus the commas  
         System.out.print("Stack: ");
         for (String token : output) {  
                System.out.print("[ ");System.out.print(token); System.out.print(" ]");
        }  
         System.out.println(" ");   
        // Feed the RPN string to RPNtoDouble to give result  
        Double result = RPNtoDouble( output );
        System.out.println("Answer= " + result);                
        //}catch (){ 
            //System.out.println("INVALID EXPRESSION"); }           
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:14:37.577

看一些例子，并尝试找到一条如何区分负值和运算符的规则。像这样的规则：

```
 if (token is + or -) and next token is a number
 and
       (the previous token was empty
    or the prvious token was ')' or another operator)
 then it is a sign to the current value. 
```

您可以遍历您的原始令牌列表并根据此规则创建一个新的令牌列表。我刚刚编写了这样一个表达式评估器，并且手头有一个用于标记表达式的迭代器。计划在 GitHub 上进行一些扩展后发布。

编辑：这是迭代器，引用和调用应该很清楚，由于支持变量/函数和多字符运算符，它有点复杂：

```
private class Tokenizer implements Iterator<String> {
    private int pos = 0;
    private String input;
    private String previousToken;

    public Tokenizer(String input) {
        this.input = input;
    }

    @Override
    public boolean hasNext() {
        return (pos < input.length());
    }

    private char peekNextChar() {
        if (pos < (input.length() - 1)) {
            return input.charAt(pos + 1);
        } else {
            return 0;
        }
    }

    @Override
    public String next() {
        StringBuilder token = new StringBuilder();
        if (pos >= input.length()) {
            return previousToken = null;
        }
        char ch = input.charAt(pos);
        while (Character.isWhitespace(ch) && pos < input.length()) {
            ch = input.charAt(++pos);
        }
        if (Character.isDigit(ch)) {
            while ((Character.isDigit(ch) || ch == decimalSeparator)
                    && (pos < input.length())) {
                token.append(input.charAt(pos++));
                ch = pos == input.length() ? 0 : input.charAt(pos);
            }
        } else if (ch == minusSign
                && Character.isDigit(peekNextChar())
                && ("(".equals(previousToken) || ",".equals(previousToken)
                        || previousToken == null || operators
                            .containsKey(previousToken))) {
            token.append(minusSign);
            pos++;
            token.append(next());
        } else if (Character.isLetter(ch)) {
            while (Character.isLetter(ch) && (pos < input.length())) {
                token.append(input.charAt(pos++));
                ch = pos == input.length() ? 0 : input.charAt(pos);
            }
        } else if (ch == '(' || ch == ')' || ch == ',') {
            token.append(ch);
            pos++;
        } else {
            while (!Character.isLetter(ch) && !Character.isDigit(ch)
                    && !Character.isWhitespace(ch) && ch != '('
                    && ch != ')' && ch != ',' && (pos < input.length())) {
                token.append(input.charAt(pos));
                pos++;
                ch = pos == input.length() ? 0 : input.charAt(pos);
                if (ch == minusSign) {
                    break;
                }
            }
            if (!operators.containsKey(token.toString())) {
                throw new ExpressionException("Unknown operator '" + token
                        + "' at position " + (pos - token.length() + 1));
            }
        }
        return previousToken = token.toString();
    }

    @Override
    public void remove() {
        throw new ExpressionException("remove() not supported");
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:59:34.593

您可以使用专为此类任务设计的解析器生成器，例如 JavaCC 或 antlr，而不是重新发明轮子。这是几十行 JavaCC 中简单表达式解析器和求值器的[一个很好的例子。](http://userpages.umbc.edu/~vick/431/Lectures/Spring06/3_LexicalAnalysis/3_Tools/2_JavaCC_Example.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T10:12:43.510

给你：

```
private static final ScriptEngine engine = new ScriptEngineManager().getEngineByName("JavaScript");

public static String eval(String matlab_expression){
    if(matlab_expression == null){
        return "NULL";
    }
    String js_parsable_expression = matlab_expression
            .replaceAll("\\((\\-?\\d+)\\)\\^(\\-?\\d+)", "(Math.pow($1,$2))")
            .replaceAll("(\\d+)\\^(\\-?\\d+)", "Math.pow($1,$2)");
    try{
        return engine.eval(js_parsable_expression).toString();
    }catch(javax.script.ScriptException e1){
        return null; // Invalid Expression
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T10:36:47.987

你不能使用javascript脚本引擎吗？（您需要对`5--2`表达式进行一些调整）下面的代码输出：

```
3+2*1-6/3 = 3.0
3++2 = Invalid Expression
-5+2 = -3.0
5--2 = 7.0 
```

代码：

```
public class Test1 {

    static ScriptEngine engine;

    public static void main(String[] args) throws Exception {
        engine = new ScriptEngineManager().getEngineByName("JavaScript");

        printValue("3+2*1-6/3");
        printValue("3++2");
        printValue("-5+2");
        printValue("5--2");
    }

    private static void printValue(String expression) {
        String adjustedExpression = expression.replaceAll("--", "- -");
        try {
            System.out.println(expression + " = " + engine.eval(adjustedExpression));
        } catch (ScriptException e) {
            System.out.println(expression + " = Invalid Expression");
        }
    }
} 
```

# asp.net - IIS上URL中的特殊字符，IIS挂起

> ID：13798560
> 
> 赞同：1
> 
> 时间：2012-12-10T09:56:08.363
> 
> 标签：asp.net, iis-7.5, sitecore, windows-server-2008-r2, freeze

一段时间以来，我一直在 Windows Server 2008 R2 上遇到 IIS 问题。我有一个需要移动到此服务器的网站。

当我们移动解决方案时发生的情况是，每个具有 æ、ø、å、á 或空格 (%20) 等特殊字符的 URL 都将无法工作、挂起并最后超时。该问题出现在图像和文件（ashx、gif、jpg）上。一切看起来都像是经过 URL 编码的。

在这件事上，我们在旧服务器上完全没有问题。

这是该问题的一些示例：

*   [http://biva-search.workingpropeople.com/~/media/Flash%20-%20og%20alternativer%20740x188/TLFlash/Timberman.ashx?w=740&h=231](http://biva-search.workingpropeople.com/~/media/Flash%20-%20og%20alternativer%20740x188/TLFlash/Timberman.ashx?w=740&h=231)
*   [http://biva-search.workingpropeople.com/~/media/170x120/Boerne_t%C3%A6pper.ashx?mw=170](http://biva-search.workingpropeople.com/~/media/170x120/Boerne_t%C3%A6pper.ashx?mw=170)

我确定这是我错过了一些疯狂的设置，我希望这里有人可以帮助我:)

亲切的问候，尼尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T14:21:54.847

不确定 IIS 问题/解决方案，URL 中不允许使用 afaik 特殊字符，但解决此问题的“Sitecore”方法是通过配置替换字符。本文解释了所需的配置更改：[Sitecore 中对 SEO 友好的 URL](http://blog.navigationarts.com/seo-url-sitecore/)

但本质上，您需要在 Sitecore 配置中添加更多 encodenamereplacements：

```
<encodenamereplacements>
    ...
    <replace mode="on" find="æ" replaceWith="a" />
    <replace mode="on" find="ø" replaceWith="o" />
</encodenamereplacements> 
```

还有另一个线程有类似的问题：[Sitecore issue on replace danish characters in url](https://stackoverflow.com/questions/11226540/sitecore-issue-on-replacing-danish-characters-in-url)

# android - 尽管减小了图像大小android内存不足错误

> ID：13798564
> 
> 赞同：0
> 
> 时间：2012-12-10T09:56:22.263
> 
> 标签：android, android-asynctask, out-of-memory, decode, bitmapfactory

这个应用程序运行没有问题，但太慢了。它在一个 UI 线程上运行所有内容，当在 gridView 中加载了许多图像的页面时，页面加载之前需要很长时间。[我使用名为“ Processing Bitmaps Off the UI Thread](http://developer.android.com/training/displaying-bitmaps/process-bitmap.html) ”的 android 文档中的代码解决了这个问题

使用代码，它现在加载 gridview 页面变化很快，并且在您可以看到它在单独的后台线程中一一加载每个小位图图像之后。

在这个使用 AsyncTask 作为多线程部分的代码中，它还使用了几种方法来减小图像大小以消除内存不足错误。我在该程序的前一个单线程版本中使用的相同图像缩减方法。无论图像多大，都不应大于图像缩小方法设置的 200dp 乘以 200dp。它可以在没有多线程的旧版本的应用程序中运行，并且在新版本的应用程序中大部分看起来都可以。但有一个奇怪的问题。

我现在遇到了与 BitmapFactory 解码方法相关的内存错误。

发生这种情况的原因是我开始使用许多较小的图像测试该应用程序，并在其中放置一个大约 10,000 X 10,000 像素的位图。这不应该引起问题，因为使用位图工厂选项正在减少图像。

错误不会立即发生。该应用程序可以正常工作一段时间，但在活动之间来回移动和来回移动之后。3到5分钟后它会崩溃。

还有其他人有这样的问题吗？你能提供任何可能是我可以检查的原因的想法吗？或者帮助我开始寻找正确的方向？

图像缩小代码如下所示，下面是 logcat 输出。

```
 class BitmapWorkerTask extends AsyncTask<String, Void, Bitmap> {
    private final WeakReference<ImageView> imageViewReference;
    private String data = "";

    public BitmapWorkerTask(ImageView imageView) {
        // Use a WeakReference to ensure the ImageView can be garbage collected
        imageViewReference = new WeakReference<ImageView>(imageView);
    }

    // Decode image in background.
    @Override
    protected Bitmap doInBackground(String... params) {
        data = params[0];
       // return imageProcessor(data);
        return decodeSampledBitmapFromResource(data, 100, 100);
    }

    // Once complete, see if ImageView is still around and set bitmap.
    @Override
    protected void onPostExecute(Bitmap bitmap) {
        if (imageViewReference != null && bitmap != null) {
            final ImageView imageView = imageViewReference.get();
            if (imageView != null) {
                imageView.setImageBitmap(bitmap);
            }
        }
    }
  }// end BitmapWorkerTask extends AsyncTask class

      public static Bitmap decodeSampledBitmapFromResource(String fileName, int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(fileName, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;

    return BitmapFactory.decodeFile(fileName, options);

}//end decodeSampledBitmapfromresource method

public static int calculateInSampleSize(
        BitmapFactory.Options options, int reqWidth, int reqHeight) {
// Raw height and width of image
final int height = options.outHeight;
final int width = options.outWidth;
int inSampleSize = 1;

if (height > reqHeight || width > reqWidth) {
    if (width > height) {
        inSampleSize = Math.round((float)height / (float)reqHeight);
    } else {
        inSampleSize = Math.round((float)width / (float)reqWidth);
    }
}
return inSampleSize;
}// end calculateInSampleSize method 
```

日志猫

```
17:52:28.340: E/AndroidRuntime(7812): FATAL EXCEPTION: main
17:52:28.340: E/AndroidRuntime(7812): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.v.splitter/com.v.splitter.AudioViewer}: android.view.InflateException: Binary XML file line #63: Error inflating class <unknown>
17:52:28.340: E/AndroidRuntime(7812): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
17:52:28.340: E/AndroidRuntime(7812): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
17:52:28.340: E/AndroidRuntime(7812): at android.app.ActivityThread.access$600(ActivityThread.java:123)
17:52:28.340: E/AndroidRuntime(7812): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
17:52:28.340: E/AndroidRuntime(7812): at android.os.Handler.dispatchMessage(Handler.java:99)
17:52:28.340: E/AndroidRuntime(7812): at android.os.Looper.loop(Looper.java:137)
17:52:28.340: E/AndroidRuntime(7812): at android.app.ActivityThread.main(ActivityThread.java:4424)
17:52:28.340: E/AndroidRuntime(7812): at java.lang.reflect.Method.invokeNative(Native Method)
17:52:28.340: E/AndroidRuntime(7812): at java.lang.reflect.Method.invoke(Method.java:511)
17:52:28.340: E/AndroidRuntime(7812): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
17:52:28.340: E/AndroidRuntime(7812): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
17:52:28.340: E/AndroidRuntime(7812): at dalvik.system.NativeStart.main(Native Method)
17:52:28.340: E/AndroidRuntime(7812): Caused by: android.view.InflateException: Binary XML file line #63: Error inflating class <unknown>
17:52:28.340: E/AndroidRuntime(7812): at android.view.LayoutInflater.createView(LayoutInflater.java:606)
17:52:28.340: E/AndroidRuntime(7812): at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
17:52:28.340: E/AndroidRuntime(7812): at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
17:52:28.340: E/AndroidRuntime(7812): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
17:52:28.340: E/AndroidRuntime(7812): at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
17:52:28.340: E/AndroidRuntime(7812): at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
17:52:28.340: E/AndroidRuntime(7812): at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
17:52:28.340: E/AndroidRuntime(7812): at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
17:52:28.340: E/AndroidRuntime(7812): at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:255)
17:52:28.340: E/AndroidRuntime(7812): at android.app.Activity.setContentView(Activity.java:1835)
17:52:28.340: E/AndroidRuntime(7812): at com.v.splitter.AudioViewer.onCreate(AudioViewer.java:63)
17:52:28.340: E/AndroidRuntime(7812): at android.app.Activity.performCreate(Activity.java:4465)
17:52:28.340: E/AndroidRuntime(7812): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
17:52:28.340: E/AndroidRuntime(7812): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
17:52:28.340: E/AndroidRuntime(7812): ... 11 more
17:52:28.340: E/AndroidRuntime(7812): Caused by: java.lang.reflect.InvocationTargetException
17:52:28.340: E/AndroidRuntime(7812): at java.lang.reflect.Constructor.constructNative(Native Method)
17:52:28.340: E/AndroidRuntime(7812): at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
17:52:28.340: E/AndroidRuntime(7812): at android.view.LayoutInflater.createView(LayoutInflater.java:586)
17:52:28.340: E/AndroidRuntime(7812): ... 24 more
12-17:52:28.340: E/AndroidRuntime(7812): Caused by: java.lang.OutOfMemoryError
17:52:28.340: E/AndroidRuntime(7812): at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
17:52:28.340: E/AndroidRuntime(7812): at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:483)
17:52:28.340: E/AndroidRuntime(7812): at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
17:52:28.340: E/AndroidRuntime(7812): at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
17:52:28.340: E/AndroidRuntime(7812): at android.content.res.Resources.loadDrawable(Resources.java:1937)
17:52:28.340: E/AndroidRuntime(7812): at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
17:52:28.340: E/AndroidRuntime(7812): at android.view.View.<init>(View.java:2785)
17:52:28.340: E/AndroidRuntime(7812): at android.view.View.<init>(View.java:2722)
17:52:28.340: E/AndroidRuntime(7812): at android.view.ViewGroup.<init>(ViewGroup.java:379)
17:52:28.340: E/AndroidRuntime(7812): at android.widget.RelativeLayout.<init>(RelativeLayout.java:174)
17:52:28.340: E/AndroidRuntime(7812): ... 27 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T11:22:17.070

仍然需要加载 10,000x10,000 的图像以供 BitmapFactory 调整大小。我建议将该图像缩小。

无论如何，如果您使用了大量的位图，请确保在使用完它们后回收它们。它们消耗垃圾收集需要一段时间才能到达的本机资源。

```
bitmap.recycle(); 
```

只要确保在回收后不要使用Bitmap，因为会抛出异常。

# c# - 一起使用 MVVM Light 和 Okra 框架

> ID：13798565
> 
> 赞同：1
> 
> 时间：2012-12-10T09:56:25.777
> 
> 标签：c#, .net, windows-runtime, mvvm-light, okra-framework

我是 Win 8 Development 的新手（刚开始规划一个应用程序）并且知道有人在 Windows Phone 上使用 MVVM light。

我的 Oneline Surfing 开发框架我选择了 2 个框架：

1.  [适用于 Win 8 的 MVVM 灯](http://mvvmlight.codeplex.com)
2.  [用于 Win RT 的 Okra 框架](http://okra.codeplex.com/)

在阅读了博客之后，我对使用什么感到很困惑。

这些将提供哪些优势？

在这个方向上的任何帮助都会有所帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:01:28.840

在使用了这两个框架之后......我在这里分享我的经验......

如果我想要简单的 DI，MVVM Light 是最好的选择......

但我一直喜欢 MEF，因此我使用了 OKRA F/W。

还有很多有用的类，用于 Win 8 应用程序（导航、设置窗格）等的不同功能......

是的，它很容易使用，因为教程总是可用的......作者的回应很及时......

# c# - 从gridview传递参数

> ID：13798569
> 
> 赞同：1
> 
> 时间：2012-12-10T09:56:38.983
> 
> 标签：c#, gridview

尝试从 gridview 中的标签传递参数，仅传递第一行的标签文本。

不确定缺少什么。

```
 protected void GV1_OnRowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName == "edit")
        {

            foreach (GridViewRow row in GridView1.Rows)
            {
                if (row.RowType == DataControlRowType.DataRow)
                {
                    Label lbl_taskID = (Label)row.FindControl("lbl_taskID");

                    Session["TaskID"] = lbl_taskID.Text;

                    Response.Redirect("~/tasks_edit.aspx");
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T09:58:27.913

您正在打破循环`Response.Redirect`您需要将 do `Response.Redirect`out 侧循环设置为所有值，您还需要连接`lbl_taskID`所有行的值而不是过度写入。

```
protected void GV1_OnRowCommand(object sender, GridViewCommandEventArgs e)
{
    string taskIds = string.Empty;
    if (e.CommandName == "edit")
    {

        foreach (GridViewRow row in GridView1.Rows)
        {
            if (row.RowType == DataControlRowType.DataRow)
            {
                Label lbl_taskID = (Label)row.FindControl("lbl_taskID");

                if(Session["TaskID"] != null)
                  taskIds = Session["TaskID"].ToString();
                Session["TaskID"] = taskIds + lbl_taskID.Text + ",";                 
            }
        }
        Response.Redirect("~/tasks_edit.aspx");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:46:26.713

我使用了 gridview 向导中自动生成的 EDIT 按钮，它正在工作。

很抱歉浪费您的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:01:12.973

您正在使用`foreach`循环，但您正在使用循环将单个值分配给单个`Session`变量。那么你期待什么？

但是，我会假设您的最后一行不是第一行。

您需要放在`Response.Redirect("~/tasks_edit.aspx")`循环之外，因为它将中止当前请求。您可能想要分配当前处于编辑模式的行：

```
foreach (GridViewRow row in gridView1.Rows)
{
    if (row.RowState == DataControlRowState.Edit)
    {
        Label lbl_taskID = (Label)row.FindControl("lbl_taskID");
        Session["TaskID"] = lbl_taskID.Text;
        break;
    }
}
Response.Redirect("~/tasks_edit.aspx"); 
```

旁注：您不需要检查`DataControlRowType`因为[`GridView.Rows`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rows.aspx)只返回行`DataControlRowType.DataRow`（与`RowDataBound`-event不同）。

**编辑**：而不是`RowCommand`我会使用的点击事件`LinkButton`：

```
protected void EditLink_Clicked(Object sender, EventArgs e)
{
    // get the LinkButton reference
    LinkButton link = (LinkButton)  sender;
    // get the GridViewRow reference via NamingContainer
    GridViewRow row = (GridViewRow) link.NamingContainer;
    Label lbl_taskID = (Label) row.FindControl("lbl_taskID");
    Session["TaskID"] = lbl_taskID.Text;
    Response.Redirect("~/tasks_edit.aspx");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:02:21.743

**如果只使用第一行，那么为什么要使用 foreach 循环？**你可以简单地`find the control of the 0th row.`

```
if (e.CommandName == "edit") //this makes sure that you have a row
{
  Label lbl_taskID = (Label)GridView1.Rows[0].FindControl("lbl_taskID");
  Session["TaskID"] = lbl_taskID.Text;  
  Response.Redirect("~/tasks_edit.aspx");
} 
```

**如果您的意思是来自当前编辑列的标签文本**，`take the index of the editing column`则从`CommandArgument`并获取标签

```
if (e.CommandName == "edit") //this makes sure that you have a row
{
      int index = Convert.ToInt32(e.CommandArgument); //currently editing row index
      Label lbl_taskID = (Label)GridView1.Rows[index].FindControl("lbl_taskID");
      Session["TaskID"] = lbl_taskID.Text;  
      Response.Redirect("~/tasks_edit.aspx");
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T10:07:19.233

你怎么`lbl_taskID`每排都有？在你的 foreach 循环中，你在做 -

```
Label lbl_taskID = (Label)row.FindControl("lbl_taskID"); 
```

您实际上只是`lbl_taskID`在第一行中获取 present 的值。接下来的行将不再具有相同的元素。你的编码是错误的。您将需要在每一行中使用类似这样的名称命名标签 - `label0`, `label1`,... 然后在您的代码中您可以执行 -

```
 int i=0;
            foreach(GridViewRow row in GridView1.Rows)
            {
                 Label xyz = (Label)row.FindControl("Label"+i);
                 Session["TaskID"+i] =xyz.Text; //to have unique session variables
                 i++;
            }
            Response.Redirect("~/tasks_edit.aspx"); // you should redirect only when you come out of the loop 
```

# javascript - 透明文本上的实心 div

> ID：13798572
> 
> 赞同：2
> 
> 时间：2012-12-10T09:57:04.270
> 
> 标签：javascript, html, css

是否有可能在透明文本上有一个实心 div？一个具有隐藏/显示鼠标悬停某个元素的 div。但背景中的透明文本与 div 内容混淆。我想让 div 在所有背景内容上都变得稳固。这可能与 CSS 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:08:07.900

解决方案是使用[z-index](http://www.w3schools.com/cssref/pr_pos_z-index.asp) CSS 属性。

# javascript - 如何使用 soundmanager2 播放 wav 文件？

> ID：13798573
> 
> 赞同：1
> 
> 时间：2012-12-10T09:57:06.207
> 
> 标签：javascript, wav, soundmanager2

在我的应用程序中，我使用 soundmanager2 插件进行播放，mp3 文件播放良好，但 wav 文件没有播放。

我的代码如下

```
 soundManager.createSound({
                  id: 'playback',
                  url: '/music.wav',
                  autoPlay: true,
            }); 
```

例外情况如下：

```
 HTML5::loadstart: playback
 Media resource http://localhost:3000/music.wav could not be decoded.

 HTML5::error: 3
 SMSound._onload(): "playback" failed to load? - /music.wav 
```

soundmanager2 是否支持 wav 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T12:18:25.113

尝试添加`type="audio/wav"`到播放的元素。

“Firefox 支持 8 位和 16 位 PCM，但不支持其他位深度（12、20、24、32）。”

如果可以更改的话，这也可能是您的文本到语音的比特率的问题。

尝试更改您的文本到语音代码，似乎很有可能（通过快速搜索）将文本到语音运行为所有浏览器支持的其他格式。

最后，如果您必须保留您的方法，请运行服务器端单独的代码以简单地将您的 wav 文件转换为 ogg 和 aac 并列出多个源，以便所有浏览器都支持它。

# javascript - 照片滑动，将外部链接添加到 .js 文件中的图像

> ID：13798576
> 
> 赞同：2
> 
> 时间：2012-12-10T09:57:13.217
> 
> 标签：javascript, photoswipe

我是 PhotoSwipe 的新手，对如何向图像添加外部链接感到非常困惑

这是我用来加载图像的 .js 文件，但是，它只有 url 和标题，

```
instance = PhotoSwipe.attach(
[
    { url: 'img/picture1.jpg', caption: 'Image 001'},
    { url: 'img/picture2.jpg', caption: 'Image 002'},
    { url: 'img/picture3.jpg', caption: 'Image 003'},
    { url: 'img/picture4.jpg', caption: 'Image 004'},
    { url: 'img/picture5.jpg', caption: 'Image 005'},
],
{
    target: window.document.querySelectorAll('#PhotoSwipeTarget')[0],
    preventHide: true,
    getImageSource: function(obj){
        return obj.url;
    },
    getImageCaption: function(obj){
        return obj.caption;
    }
}
); 
```

除了在 html 中使用

```
<ul id="Gallery">
<li><a href="images/full/01.jpg"><img src="images/thumb/01.jpg" alt="Image 01"      /></a></li>

</ul> 
```

有没有其他方法可以在 PhotoSwipe.attach 中添加参数以将图像与外部链接超链接？

# jquery - 警报不起作用。成功后编码不起作用

> ID：13798579
> 
> 赞同：0
> 
> 时间：2012-12-10T09:57:26.487
> 
> 标签：jquery

这是我的问题。

我的代码工作正常。当我将断点放在 mozilla firefox 浏览器的脚本中然后运行应用程序时。

但是当我断点时它没有运行。即使警报也没有显示。

这是我的代码

```
function OpenOrdershipment() 
{
    var  arrayOrderId = '';
    var arrayChannelOrderReference = new Array();
    var Url = '<%: Url.Action("OrderShipment", "Shipments") %>';
    $.ajax({
        cache: false,
        type: "POST",
        url: Url,
        data: "strOrderId=" + arrayOrderId + "&ChannelOrderReference=" + arrayChannelOrderReference + "&strOpenShipments=" + 1,
        dataType: "HTML",
        success: function (data) {
            if (data != "0" && data != "") {
                alert(data);
                arrOrderId = data;
                $('#Hiddenid').val(arrOrderId);
                document.forms["shipform"].submit();
            }
            else {
                SucessErrorMessageDisplay('DivSuccessErrorMess', 'lblSuccessError', 'imgStatus', 1, 'There is no open shipments');
            }
        },
        error: function (xhr, ajaxOptions, thrownError) {
            if (xhr.status == 403) {
                window.location.href = '<%: Url.Action( "SessionExpire", "Home" ) %>';
            }
        }
    });
}

    <% using (Html.BeginForm("OrderShipments", "Shipments", FormMethod.Post, new { @id = "shipform" })) // Creates <form>
       {%>
    <input type="hidden" id="Hiddenid" name="orderId" />
    <input type="submit" value="book" style="display: none" />
    <%} %> 
```

是什么原因？为什么它不起作用？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:07:10.247

**`if (data != "0" && data != "") {`**

您将 0 视为字符串，因此很明显它不会进入函数内部来执行警报和下一个语句......

# selenium-rc - 如何使用 Selenium RC 进行数据库测试？

> ID：13798581
> 
> 赞同：0
> 
> 时间：2012-12-10T09:57:28.367
> 
> 标签：selenium-rc

我如何使用 selenium 和 SQL SERVER 开始数据库测试，请让我知道我必须下载和启动哪些所有 jar。

谢谢，PK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:06:59.827

Selenium RC 旨在使用 javascript 测试 html 页面，该 javascript 被包装到多种语言的客户端驱动程序中。如果您需要数据库中与 selenium 无关的任何内容，只需包含您的数据库客户端库并独立访问 Selenium。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T07:06:05.300

Selenium 主要用于 Web 应用程序测试。您可以使用 java 特性进行数据库测试。

请参阅下面链接中给出的示例。您可以在 java 程序中使用 sql 查询从数据库中获取结果并在 java 程序本身中验证它们。

[点击这里](http://www.roseindia.net/jsp/execute-sql-query.shtml)

# c# - 从 Excel 读取数据然后更新它

> ID：13798586
> 
> 赞同：0
> 
> 时间：2012-12-10T09:57:51.720
> 
> 标签：c#, asp.net, gridview, export-to-excel

我的 Excel 工作簿存储在某个位置，基本上，当我单击一个按钮时，我正在使用 Export 从 gridview 中导出 excel。

一切正常，

我的问题是，“我想先查找文件，如果它已经存在，然后用我的 gridview 获得的数据更新它，如果有任何新数据存在。”

我的函数只是创建了大量的新数据，这些数据覆盖了之前的数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:15:00.353

您可以先检查文件如下

```
 string filePath = Request.PhysicalApplicationPath + "filename.xls";  
 FileInfo imageFile = new FileInfo(filePath);  
 bool fileExists = imageFile.Exists;  
 Label1.Text = "File exits?: " + fileExists.ToString(); 
```

这是读取和更新excel文件的代码

```
 var myConnection = new OleDbConnection("provider=Microsoft.Jet.OLEDB.4.0;Data Source='c:\\Language_Batch1_OneClick.xls';Extended Properties=Excel 8.0;"); ;
    var myCommand = new OleDbCommand();
    var upCommand = new OleDbCommand();
    int i = 0;
    try
    {

        string sql = null;
        myConnection.Open();
        myCommand.Connection = myConnection;
        sql = "select ANSWER_CODE,Punjabi from [Batch_Lang_1$]";
        myCommand.CommandText = sql;
        var dataReader = myCommand.ExecuteReader();

        while (dataReader.Read())
        {
            var langText = Convert.ToBase64String(Encoding.UTF8.GetBytes(dataReader["Punjabi"].ToString()));
            if (langText.Length >= 1000)
            {
                continue;
            }
            var ansCode = dataReader["ANSWER_CODE"].ToString();
            sql = "update [Batch_Lang_1$] set Punjabi= '" + langText + "'  where ANSWER_CODE='" + ansCode + "'";
            upCommand.Connection = myConnection;
            upCommand.CommandText = sql;
            upCommand.ExecuteNonQuery();
            i++;
        } 
```

这是一个链接，其中包含用于读取和更新 excel 文件的代码。
[C# 将 MS Excel 列转换为 utf-8，然后再转换为 base64](https://stackoverflow.com/questions/13448325/c-sharp-convert-ms-excel-column-to-utf-8-and-then-to-base64)

# c# - 使用选择更改淡出或淡入另一个字段

> ID：13798587
> 
> 赞同：1
> 
> 时间：2012-12-10T09:57:55.590
> 
> 标签：c#, javascript, jquery, asp.net-mvc

我正在尝试使用一个下拉菜单，它作为 2 个值是/否来更改是否显示字段。我仍然希望元素存在，只是不可见。

我正在使用 Razor 和 MVC3 来呈现页面。

所以我尝试了以下代码：

```
$(function () {
    $("DiscountOn").change(function () {
        if ($("DiscountOn").Value == 0) {
            $("DiscountPercentage").fadeOut('fast');
        }
        else {
            $("DiscountPercentage").fadeIn('fast');
        }
    });
}); 
```

DiscountOn 是下拉菜单，其值为 0 或 1，文本分别为 no 或 yes。我希望它在 DiscountOn 变为 0 时使 DiscountPercentage 消失，并在 DiscountOn 变为 1 时重新出现。对于增值，如果您可以在页面加载时使其显示或消失，具体取决于下拉菜单中设置的选项会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:01:48.540

```
$("DiscountOn") 
```

没有正确选择元素。如果您希望选择元素的 ID，那么您需要执行以下操作：

```
document.getElementById("DiscountOn") // Pure JS 
```

或者

```
$("#DiscountOn") // jQuery 
```

你的另一个问题是你如何获得价值。你要么需要这样做

```
.value // Pure JS 
```

或者

```
.val() // jQuery 
```

请记住，JS 是区分大小写的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:01:18.550

```
$(function () {
    $("#DiscountOn").change(function () {
        if ($(this).val() == '0') {
            $('#DiscountPercentage').fadeOut('fast');
        }
        else {
            $('#DiscountPercentage').fadeIn('fast');
        }
    });
}); 
```

> 对于增值，如果您可以在页面加载时使其显示或消失，具体取决于下拉菜单中设置的选项，那就太好了。

理想情况下，这应该在服务器端完成，而不是使用任何 javascript。您已经知道下拉列表的选定值，因此您可以在 DiscountPercentage 元素周围动态添加一些 CSS 类来显示/隐藏它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:00:38.150

问题出在选择器上

如果`DiscountOn`和`DiscountPercentage`是 ID 或元素。`#`如果他们是班级，那么在前面加上前缀`.`

```
$(function () {
    $("#DiscountOn").change(function () {
        if ($("#DiscountOn").val() === 0) {
            $("#DiscountPercentage").fadeOut('fast');
        }
        else {
            $("#DiscountPercentage").fadeIn('fast');
        }
    });
}); 
```

# python - 使用 CGI 中的 Flask，可能吗？

> ID：13798590
> 
> 赞同：1
> 
> 时间：2012-12-10T09:58:07.353
> 
> 标签：python, cgi, flask

实际上可以从 CGI 中使用 Flask 吗？

如果是这样，怎么做？我知道[CGI+Flask](http://flask.pocoo.org/docs/deploying/cgi/)的简洁美观的文档，但在我看来`request.args.get('varname')`，当作为 CGI 运行时，该功能不起作用。当作为 WSGI 运行时，它在同一个（Apache，Ubuntu 12.10）服务器上当然适用于我。

`args.get()`在命令行上运行 CGI 脚本后，我得出的结论（或强烈怀疑）是行不通的。它不会在 QUERY_INFO 中获取任何内容。

我是否遗漏了一些关于 CGI 的重要内容，是 Flask 中的错误，还是这里发生了什么？

***编辑***

*Flask 的文档在 git 中进行了更新，但在撰写本文时还没有在主页上。只是不要`print`在你的 Flask 应用程序中使用任何东西，CGI 应该可以正常工作。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:29:00.663

args 事情是一个红鲱鱼。

问题出在 CGI 中，*任何* `print`东西都可能弄乱输出，在这种情况下，它弄乱了标题。`print`解决方案：当作为 CGI 运行时，不要提供任何调试信息或任何东西。

还;

[“...... Google 的 App Engine，在类似 CGI 的环境中执行”](http://flask.pocoo.org/docs/deploying/cgi/)

显然 Google App Engine 类似于 CGI 环境，同样`print`的事情[可能是一个问题](https://stackoverflow.com/a/5453787/193892)。

# c# - 如何将 ExecuteStoreCommand 结果分配给 gridview

> ID：13798592
> 
> 赞同：0
> 
> 时间：2012-12-10T09:58:13.867
> 
> 标签：c#, asp.net, entity-framework

我是Entity Framework的新手，我正在尝试将gridview与我编写的存储过程绑定如下

```
var ietsParameter = new SqlParameter("@ID", 1000);
grdStoreProc.DataSource = entities.ExecuteStoreCommand("selectData2 @ID", ietsParameter);
grdStoreProc.DataBind(); 
```

但我遇到了一个例外

> 数据源是无效类型。它必须是 IListSource、IEnumerable 或 IDataSource。

有人可以告诉我任何替代方法来实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:03:52.073

`ExecuteStoreCommand`用于对数据库执行命令，`int`返回类型表明有多少行受到影响。

你应该`ExecuteStoreQuery`改用。

[从示例中检查此链接](http://msdn.microsoft.com/en-us/library/vstudio/dd487208%28v=vs.100%29.aspx)

# java - 如何构建 + 将 FFMPEG 包含到现有的 Android 项目中

> ID：13798602
> 
> 赞同：1
> 
> 时间：2012-12-10T09:59:17.547
> 
> 标签：java, android, ffmpeg, audio-streaming

我发现了多个关于 FFMPEG 的问题和教程，但我似乎并不理解其中的大部分。我读过的所有指南都漏掉了很大的空白，并且不倾向于解释事情。

我有一个现有的 Android 应用程序，它使用名为 AAC 解码器的第三方库流式传输音频。由于各种原因，我需要切换到使用 FFMPEG，但不知道如何。我已经设法按照指南构建 FFMPEG，但是我不明白我应该对输出做什么。

我的应用程序只需要从远程 URL 流式传输音频。流可以是多种格式。

如果有人可以将我链接到一些全面、详细的指南，或者为我提供说明，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T16:55:37.347

我创建了构建 FFmpeg 的脚本，请在此处查看我的答案：

[arm-linux-androideabi-gcc 无法创建可执行文件 - 为 android armeabi 设备编译 ffmpeg](https://stackoverflow.com/questions/12660043/arm-linux-androideabi-gcc-is-unable-to-create-an-executable-compile-ffmpeg-fo/13244551#13244551)

一个你编译了 FFmpeg 的文件在你的项目的根目录中创建了一个“jni”文件夹。在 jni 文件夹中创建包含以下内容的 Android.mk：

```
include $(call all-subdir-makefiles) 
```

然后使用以下内容创建 Application.mk：

```
APP_ABI := armeabi armeabi-v7a x86 
```

接下来，在 jni 文件夹中创建以下文件夹结构：

ffmpeg/ffmpeg/

在第一个 ffmpeg 文件夹中创建另一个 Android.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := libavcodec
LOCAL_SRC_FILES := ffmpeg/$(TARGET_ARCH_ABI)/lib/$(LOCAL_MODULE).so
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/ffmpeg/$(TARGET_ARCH_ABI)/include
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := libavformat
LOCAL_SRC_FILES := ffmpeg/$(TARGET_ARCH_ABI)/lib/$(LOCAL_MODULE).so
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/ffmpeg/$(TARGET_ARCH_ABI)/include
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := libavutil
LOCAL_SRC_FILES := ffmpeg/$(TARGET_ARCH_ABI)/lib/$(LOCAL_MODULE).so
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)/ffmpeg/$(TARGET_ARCH_ABI)/include
include $(PREBUILT_SHARED_LIBRARY)

LOCAL_PATH:= $(call my-dir) 
```

最后，将构建文件夹的内容（来自构建脚本）移动到 /jni/ffmpeg/ffmpeg/

从项目根运行：

```
ndk-build clean 
```

然后运行：

```
ndk-build 
```

如果你觉得懒惰，你可以简单地从我的项目中下载 jni 文件夹并删除“元数据”和“播放器”文件夹：

[http://svn.code.sf.net/p/servestream/code/trunk/jni/](http://svn.code.sf.net/p/servestream/code/trunk/jni/)

如果您有任何其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T10:17:50.070

您需要交叉编译 FFMPEG 以获得 android 支持。在项目中创建`jni`文件夹并将`FFMPEG`文件夹放在 jni 中。设置`android NDK`。

这是我用来交叉编译 ffmpeg for android 的 Config.sh 的副本。

```
Config.sh

#!/bin/sh
PLATFORM=/home/nishant/Desktop/android/android-ndk-r5b/platforms/android-8/arch-arm
PREBUILT=/home/nishant/Desktop/android/android-ndk-r5b/toolchains/arm-eabi-4.4.0/prebuilt/linux-x86
LIBX264=/home/nishant/Desktop/android/workspace/DemoProject/jni/x264
LIB=/home/nishant/Desktop/android/workspace/DemoProject/jni
EXTRA_LIBS="-lgcc -lm -ldl -lz -lc"
#EXTRA_EXE_LDFLAGS="$PLATFORM/usr/lib/crtbegin_dynamic.o $PLATFORM/usr/lib/crtend_android.o"

./configure --target-os=linux \
    --arch=arm \
    --enable-version3 \
    --enable-gpl \
    --enable-nonfree \
    --disable-stripping \
    --disable-ffmpeg \
    --disable-ffplay \
    --disable-ffserver \
    --disable-ffprobe \
    --enable-encoders \
    --enable-libfaac \
    --disable-muxers \
    --disable-devices \
    --disable-protocols \
    --enable-protocol=file \
    --enable-avfilter \
    --disable-network \
    --disable-mpegaudio-hp \
    --disable-avdevice \
    --enable-cross-compile \
    --cc=$PREBUILT/bin/arm-eabi-gcc \
    --nm=$PREBUILT/bin/arm-eabi-nm \
    --prefix=/home/nishant/Desktop/android/workspace/DemoProject/jni \
    --cross-prefix=$PREBUILT/bin/arm-eabi- \
    --enable-postproc \
    --extra-libs="$EXTRA_LIBS" \
    --extra-cflags="-I$PLATFORM/usr/include/ -I$LIB/include/ -I/home/admin1/x264 -std=gnu99 -fPIC -DANDROID -fpic -mthumb-interwork -ffunction-sections -funwind-tables -fstack-protector -fno-short-enums -D__ARM_ARCH_5__ -D__ARM_ARCH_5T__ -D__ARM_ARCH_5E__ -D__ARM_ARCH_5TE__  -Wno-psabi -march=armv5te -mtune=xscale -msoft-float -mthumb -Os -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -DANDROID -Wa,--noexecstack -MMD -MP" \
    --disable-asm \
    --enable-neon \
    --enable-armv5te \
    --enable-static \
    --disable-shared \
    --extra-ldflags="-Wl,-rpath-link=$LIB/lib -L$LIB/lib -nostdlib -Bdynamic  -Wl,--no-undefined -Wl,-z,noexecstack  -Wl,-z,nocopyreloc -Wl,-soname,/system/lib/libz.so -Wl,-rpath-link=$PLATFORM/usr/lib,-dynamic-linker=/system/bin/linker -L/usr/lib -L$PLATFORM/usr/lib -nostdlib $PLATFORM/usr/lib/crtbegin_dynamic.o $PLATFORM/usr/lib/crtend_android.o" 
```

您可以使用此配置文件交叉编译 ffmpeg，并在其中进行一些修改。

`config.sh`使用`ndk-build`命令编译。

编辑 ：

FFMPEG 与所有音频编码器和解码器捆绑在一起。对于 AAC 编码和解码，使用`libfaac`和`libfaad`. `libavcodecs` `api-example.c`您可以在文件中找到音频解码示例。您需要创建一个`JNI Wrapper Class`来操作编解码器。我在此处发布的该文件的解码示例之一。

```
static void audio_decode_example(const char *outfilename, const char *filename)
{
    AVCodec *codec;
    AVCodecContext *c= NULL;
    int out_size, len;
    FILE *f, *outfile;
    uint8_t *outbuf;
    uint8_t inbuf[AUDIO_INBUF_SIZE + FF_INPUT_BUFFER_PADDING_SIZE];
    AVPacket avpkt;

    av_init_packet(&avpkt);

    printf("Audio decoding\n");

    /* find the mpeg audio decoder */
    codec = avcodec_find_decoder(CODEC_ID_MP2);
    if (!codec) {
        fprintf(stderr, "codec not found\n");
        exit(1);
    }

    c= avcodec_alloc_context();

    /* open it */
    if (avcodec_open(c, codec) < 0) {
        fprintf(stderr, "could not open codec\n");
        exit(1);
    }

    outbuf = malloc(AVCODEC_MAX_AUDIO_FRAME_SIZE);

    f = fopen(filename, "rb");
    if (!f) {
        fprintf(stderr, "could not open %s\n", filename);
        exit(1);
    }
    outfile = fopen(outfilename, "wb");
    if (!outfile) {
        av_free(c);
        exit(1);
    }

    /* decode until eof */
    avpkt.data = inbuf;
    avpkt.size = fread(inbuf, 1, AUDIO_INBUF_SIZE, f);

    while (avpkt.size > 0) {
        out_size = AVCODEC_MAX_AUDIO_FRAME_SIZE;
        len = avcodec_decode_audio3(c, (short *)outbuf, &out_size, &avpkt);
        if (len < 0) {
            fprintf(stderr, "Error while decoding\n");
            exit(1);
        }
        if (out_size > 0) {
            /* if a frame has been decoded, output it */
            fwrite(outbuf, 1, out_size, outfile);
        }
        avpkt.size -= len;
        avpkt.data += len;
        if (avpkt.size < AUDIO_REFILL_THRESH) {
            /* Refill the input buffer, to avoid trying to decode
             * incomplete frames. Instead of this, one could also use
             * a parser, or use a proper container format through
             * libavformat. */
            memmove(inbuf, avpkt.data, avpkt.size);
            avpkt.data = inbuf;
            len = fread(avpkt.data + avpkt.size, 1,
                        AUDIO_INBUF_SIZE - avpkt.size, f);
            if (len > 0)
                avpkt.size += len;
        }
    }

    fclose(outfile);
    fclose(f);
    free(outbuf);

    avcodec_close(c);
    av_free(c);
} 
```

希望它会帮助你。

# android - Android SQLite数据库删除表后，id会从1开始吗？

> ID：13798606
> 
> 赞同：5
> 
> 时间：2012-12-10T09:59:25.220
> 
> 标签：android, android-sqlite

我怀疑如果我使用以下语句删除表，

```
 SQLiteDatabase db = this.getWritableDatabase();
     db.delete(date_difference, null, null); 
```

那么如果我将一行作为新的第一条记录插入到表中，记录的 id 主键自动递增是否从 1 开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:10:12.770

> 如果插入时没有指定 ROWID，或者指定的 ROWID 的值为 NULL，则会自动创建适当的 ROWID。通常的算法是给新创建的行一个比插入前表中最大的 ROWID 大一的 ROWID。 **如果表最初为空，则使用 1 的 ROWID。**如果最大的 ROWID 等于最大可能的整数 (9223372036854775807)，则数据库引擎开始随机挑选正候选 ROWID，直到找到以前未使用的 ROWID。

所以是的，删除表后，ID 将从 1 开始

[http://www.sqlite.org/autoinc.html](http://www.sqlite.org/autoinc.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T10:04:49.517

提供的文档指出该删除方法是：

```
Convenience method for deleting rows in the database. 
```

语法是：

```
int delete(String table, String whereClause, String[] whereArgs) 
```

因此它不会再次从 1 开始。它将从最后一个增量继续。如果您删除了整个表，然后重新创建它，增量将从 1 开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T10:08:38.257

**SQLite使用名为 "sqlite_sequence" 的内部表来**跟踪表所拥有的最大 ROWID 。每当创建包含 AUTOINCREMENT 列的普通表时，就会自动创建和初始化 sqlite_sequence 表**。sqlite_sequence 表的内容可以使用普通的 UPDATE、INSERT 和 DELETE 语句进行修改**。但是对这个表进行修改可能会扰乱 AUTOINCREMENT 密钥生成算法。在进行此类更改之前，请确保您知道自己在做什么。

所以当你删除你的表并重新创建它时，你应该让 SQLITE_SEQUENCE 从 0 重新开始。

你应该这样做：

```
Delete from date_difference;    
Delete from sqlite_sequence where name='date_difference'; 
```

注意，因为 where 子句中的字段`'table name'`区分大小写。

阅读[此](http://sqlite.org/autoinc.html)内容以获取更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-23T07:34:07.477

将主键字段定义为

```
INTEGER PRIMARY KEY AUTOINCREMENT DEFAULT 1 
```

如果您正在为主键字段插入任何值，请删除代码，如下所示

```
values.put(KEY_PRIMARY, object.getIntegerValue()); 
```

# jquery - 使用 KnockoutJS 2.2.0 和 jQuery 1.8.2 从 #someDiv 的所有子项中删除所有绑定

> ID：13798607
> 
> 赞同：0
> 
> 时间：2012-12-10T09:59:29.543
> 
> 标签：jquery, knockout.js

我想从某个 div 的所有子元素中删除所有绑定（ko.cleanNode）。一定是一个菜鸟问题，但我不知道如何使用 jQuery 循环遍历所有子项、孙子、曾孙等，同时让 KnockoutJS 删除所有 DOM 元素的绑定。

我不想从 DOM 中删除元素。这是一个单页应用程序，因此元素被预加载为嵌入式资源，如果他们再次访问该页面，则不会重新发送给客户端。如果客户重新访问应用程序的该部分，我将有一个功能重新绑定必要的元素，目前工作正常。

当前设置：

```
<html>
<head>
//loading all resources
</head>
<body>
//load first element using some obscure setup
<div id="firsPage" data-role="page">
    <div data-role="header">@Global.header</div>
    <div data-role="fieldcontain">
         <label for="firstInput" />
         <input id="firstInput some other stuff />
    </div>
    <div data-role="datebox <!-- some settings --> >
         //creates table using jQuery mobile (lots of (great-)(grand-)children)
    </div>
    <div data-role="fieldcontain">
        <div id="secondInput">
            <div class="checklist">
                <ul>
                    <li />
                    <li />
                </ul>
            </div>
        </div>
    </div>
</div>
//Here the whole thing starts again 
<div id="secondPage" data-role="page">
    <!-- repeat above innerHTML in your mind ;) -->
</div>
//And here again! and again...
</body> 
```

我遇到的问题是，当我使用时，孩子们的绑定似乎没有得到“清理”

```
ko.cleanNode($('#firstPage')[0]); 
```

或者当我将元素放入一个变量中，然后将其格式化为 ko.cleanNode($element)。

有没有办法做到这一点？现在已经盯着它看了好几个小时，所以可能忽略了一种太明显的方式......

谢谢！

**编辑：**下面是我得到的错误：未捕获的错误：无法解析绑定。消息：ReferenceError：someDate 未定义；绑定值：值：someDate

然而，这个 ko.observable 'someDate' 不再作为绑定在我正在导航的“data-role='page'”上存在。出于某种原因，它继续希望与此值绑定。如果我使用 removeNode() 我没有这样的问题，那么我就会遇到我缺少包含整个页面的 DOM 元素的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:02:03.410

你有没有尝试过？：

```
$('#firstPage').undatabind(); 
```

**更新：**

抱歉，正如@NukeFace 所指出的，此方法是我使用的 Knockout Programmatic 插件的一部分。

干杯。

# python - UnboundLocalError：分配前引用的局部变量“url_request”

> ID：13798609
> 
> 赞同：9
> 
> 时间：2012-12-10T09:59:36.217
> 
> 标签：python

觉得我要疯了。

```
url_request = 0

def somefunction():
    url_request+=1

if __name__ =='__main__':
    somefunction() 
```

给了我 UnboundLocalError。我在这里缺少什么重要的概念？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-10T10:00:41.913

您正在分配一个全局变量，这意味着您需要将其*标记*为全局变量：

```
def somefunction():
    global url_request
    url_request+=1 
```

当您分配给局部范围内的变量时，它被假定为局部变量，除非您首先使用`global`语句告诉 python 否则。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-10T10:18:18.830

对于 Python 2.7，我们必须使用变量类型：全局、本地。每个函数都为变量创建自己的局部范围。

在本地范围内，您可以不受任何限制地**阅读。**您还可以**调用**全局对象方法，因此您可以从全局**修改**变量。但是你不能**重新分配**价值。

看看这段代码：

```
requests = [1,2,3]

def modify():
    requests.append(4)

def redeclare():
    requests = [10,20,30]

modify()
print requests
# will give you [1,2,3,4]

redeclare()
print requests
# will give you [1,2,3,4] 
```

这是怎么回事？您不能`requests`从本地范围重新分配变量，因此解释器为您创建**其他**变量 - 在本地范围内用于`redeclare`调用上下文。

关于您的代码...首先，您尝试从全局范围重新分配变量。为什么？`url_request`is `int`,`int`是不可变的，所以操作`url_request+=1`不会**改变**值，它应该为变量名重新分配新值。其次，您没有`global`为此变量指定标识。所以解释器只有一个选择 - 假设`url_request`为局部变量。但是......你没有在任何地方声明它的价值......

`UnboundLocalError`意味着您尝试使用变量值执行操作而不事先声明它。希望这将帮助您更多地了解 Python 变量/名称/范围。

# backbone.js - 在带有 Backbone.js 的 Rivets.js 中使用自定义活页夹时向按钮添加“收音机”功能

> ID：13798614
> 
> 赞同：5
> 
> 时间：2012-12-10T09:59:54.657
> 
> 标签：backbone.js, rivets.js

我正在使用 Rivets.js 将元素绑定到我的模型。我使用 Twitter 的 Bootstrap 进行设计，并设置了三个按钮以从值 1、2 和 3 中进行选择（功能等同于单选按钮）。

我在一个按钮组中设置了三个按钮，如下所示：

```
<div class="btn-group" id="input_level" data-toggle="model.level">
    <button data-toggle-value="1" class="btn active">One</button>
    <button data-toggle-value="2" class="btn">Two</button>
    <button data-toggle-value="3" class="btn">Three</button>
</div> 
```

我添加了一个自定义`toggle`活页夹，如下所示：

```
rivets.binders.toggle = function(el,value){
    $(el).find('button[data-toggle-value="' + value + '"]')
        .addClass('active').siblings().removeClass('active');
} 
```

这会像它应该的那样更新按钮状态，但不能以其他方式工作 - 即没有事件绑定到按钮单击事件。我想将其推广到 Rivets.js，因此我不必在 Backbone 视图的表单中为每个按钮组添加点击事件。

这是 Rivets 中的基本功能吗？如果是，我该如何设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:21:25.680

在研究了Rivets.js注解的源码后，过了一会儿我找到了解决方案（我没有使用CoffeeScript，所以阅读起来有点麻烦）：

我在我的问题中替换了这段原始代码：

```
rivets.binders.toggle = function(el,value){
    $(el).find('button[data-toggle-value="' + value + '"]')
        .addClass('active').siblings().removeClass('active');
} 
```

有了这个：

```
rivets.binders.toggle = {
    publishes: true,
    bind: function(el){
        $(el).on('click', 'button:not(.active)', _.bind(function(e){
            this.model.set(this.keypath, $(e.currentTarget).data('toggle-value'));
        }, this));
    },
    unbind: function(el){
        $(el).off('click', 'button:not(.active)');
    },
    routine: function(el,value){
        $(el).find('button[data-toggle-value="' + value + '"]')
            .addClass('active').siblings().removeClass('active');
    }
}; 
```

初始代码现在位于`rivets.binders.toggle.routine`而不是`rivets.binders.toggle`.

# opengl - 如何推断旋转矩阵值？

> ID：13798622
> 
> 赞同：1
> 
> 时间：2012-12-10T10:00:04.510
> 
> 标签：opengl, dead-reckoning

我正在使用 chai3d api，它使用 3x3 浮动 pt 矩阵在我的虚拟世界中存储对象方向。

在服务器定期更新之后，我想在客户端预测这些方向，以便我拥有一致的虚拟图形世界。

我通过发送位置和速度值来预测对象（例如 opengl 立方体）的位置。

方向的角速度与位置的速度相同吗？

**如果是，我如何从这个 3x3 矩阵计算角速度并将其用于外推？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:13:07.063

变换矩阵本质上是另一个坐标系中新坐标系的表示。如果您添加一列，您甚至可以将翻译放入其中。如果你记得你的微积分和物理，那么你可能还记得

```
r = 1/2 a² t + v0 t + r0

v = d/dt r = a + v0

a = d/dt v 
```

要从速度“v”到位置“r”，您必须进行积分。在标量的情况下，您将 v 与时间相乘。但是与矩阵的标量乘法只会缩放它，而不是旋转它。所以你必须做点别的。如果您想使用矩阵来执行此操作，关键字是*矩阵幂*，即计算矩阵的幂。

假设你有一个微分旋转，d/dt R，那么你可以通过将相应的旋转矩阵无限地乘以它本身来整合它，即取一个幂。

但是还有一种数学上更好的方法可以做到这一点。非常接近于乘以一个因子的东西。那就是：使用*四元数*而不是矩阵来表示方向。事实证明，简单地缩放一个四元数与仅仅乘以它所描述的旋转是一样的。

你应该用谷歌搜索的关键字（因为 StackOverflow 是在整个四元数理论中引入一个错误的地方）是：

*   四元数
*   角速度
*   角度插值
*   SLERP [http://en.wikipedia.org/wiki/Slerp](http://en.wikipedia.org/wiki/Slerp)

# javascript - 从变量插入数据到json

> ID：13798627
> 
> 赞同：1
> 
> 时间：2012-12-10T10:00:23.037
> 
> 标签：javascript, json

我使用以下代码将数据插入 json：

```
categories: [
                'Tokyo',
                'Jakarta',
                'New York',
                'Seoul',
                'Manila',
                'Mumbai',
                'Sao Paulo',
                'Mexico City',
                'Dehli',
                'Osaka',
                'Cairo',
                'Kolkata',
                'Los Angeles',
                'Shanghai',
                'Moscow',
                'Beijing',
                'Buenos Aires',
                'Guangzhou',
                'Shenzhen',
                'Istanbul'
            ], 
```

它可以工作，但是，我想将这些数据放入一个数组或字符串变量中，如下所示：

```
var data = Array('Tokyo',
                'Jakarta',
                'New York',
                'Seoul',
                'Manila',
                'Mumbai',
                'Sao Paulo',
                'Mexico City',
                'Dehli',
                'Osaka',
                'Cairo',
                'Kolkata',
                'Los Angeles',
                'Shanghai',
                'Moscow',
                'Beijing',
                'Buenos Aires',
                'Guangzhou',
                'Shenzhen',
                'Istanbul');
categories: [data], 
```

但是，它不起作用。你能帮助我吗 ？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:04:46.973

```
data: ['Tokyo', 'Jakarta',...] 
```

已经是一个数组，它是对象的一部分。如果您希望它作为单独的变量，只需像这样创建它：

```
var data = ['Tokyo', 'Jakarta',...]; 
```

并将其添加到您的对象

```
var yourObject = {categories: data}; 
```

你甚至可以做这样的事情：

```
var yourObject = {categories: new Array('Tokyo', ...)}; 
```

但请使用括号表示法

提示：您正在创建一个“对象文字”而不是 JSON 对象。JSON 只是对象字面量的一个子集。[在这里](http://www.json.org/js.html)阅读更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:05:31.093

它应该是

```
var data = ['Tokyo','Jakarta','New York','Seoul','Manila','Mumbai','Sao Paulo','Mexico City','Dehli','Osaka','Cairo','Kolkata','Los Angeles','Shanghai','Moscow','Beijing','Buenos Aires','Guangzhou','Shenzhen','Istanbul']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:02:25.163

答案是有效的第一部分正是你在第二部分中描述的。所以它已经工作了。

像这样分配一个变量：

```
categories : ['firstElement', 'secondElement']; 
```

使包含 Array 对象的 json-field 类别。您可以使用`categories[0]`例如访问“firstElement”。

完全一样：

```
var categoties = new Array();
categories.push('firstElement');
categories.push('secondElement'); 
```

您的第二次尝试不起作用，因为您无法在构造函数中提供数组值`new Array(...)`。如果您使用它实例化它，`new Array()`您可以使用`.push('value')`将元素添加到数组中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:04:44.197

```
var categories = [];

var data = ['Tokyo',
            'Jakarta',
            'New York',
            'Seoul',
            'Manila',
            'Mumbai',
            'Sao Paulo',
            'Mexico City',
            'Dehli',
            'Osaka',
            'Cairo',
            'Kolkata',
            'Los Angeles',
            'Shanghai',
            'Moscow',
            'Beijing',
            'Buenos Aires',
            'Guangzhou',
            'Shenzhen',
            'Istanbul'];

for (var i = 0; i < data.length; i++) {
  categories.push(data[i]);
} 
```

# google-maps - Google Maps Geocoding API 未返回所有结果

> ID：13798633
> 
> 赞同：1
> 
> 时间：2012-12-10T10:00:41.363
> 
> 标签：google-maps, google-maps-api-3, maps

[我在这里](http://maps.google.com)（谷歌地图网站）输入“macys”作为搜索项，这给了我在地图上标记的大约 30 到 40 个结果。

当我将他们的 API 与查询词“macys”一起使用时，它只返回 2 到 3 个结果。我正在使用以下 api：

```
 http://maps.googleapis.com/maps/api/geocode/json?address=macys&sensor=false 
```

我可能使用了错误的 API，因为它在查询参数中显示为“地址”。我应该使用哪个 API 来获取美国/世界的所有梅西百货位置？

我希望它返回所有 lat 和 lng 对象，就好像它在他们自己的网站（谷歌地图网站）中完成一样。如果他们没有公开 API，那么有办法解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:32:28.873

您应该使用 Places API： [https ://developers.google.com/places/documentation/](https://developers.google.com/places/documentation/)

地理编码并非旨在返回 POI，它可能会返回一些，但您不应该依赖它。

# css - twitter bootstrap 导航栏中的容器

> ID：13798634
> 
> 赞同：12
> 
> 时间：2012-12-10T10:00:45.403
> 
> 标签：css, twitter-bootstrap

我有一个使用 twitter bootstrap 的以下导航栏代码

```
<div class="navbar navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <ul class="nav">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">Link</a></li>
        <li><a href="#">Link</a></li>
      </ul>
    </div>
  </div>
</div> 
```

并且输出是 ![使用原始引导程序](../Images/653cf5926d5881b1258a8b97235bc56b.png) 当我从 bootstap.css 中的“.navbar .container{width:auto}”中删除“width：auto”时，输出变为 ![破解后](../Images/145fd7be75727960fe536cbffbd3d2b4.png) 并且是我期望的输出。

[https://github.com/twitter/bootstrap/issues/2093](https://github.com/twitter/bootstrap/issues/2093)将“宽度：自动”显示为预期功能。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T21:57:19.847

```
<div class="navbar navbar-static-top navbar-inverse">
  <div class="navbar-inner">
    <div class="container">
      <ul class="nav">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">Link</a></li>
        <li><a href="#">Link</a></li>
      </ul>
    </div>
  </div>
</div> 
```

这应该这样做

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-10T11:47:23.923

我找到了上述问题的另一种解决方案。

将`navbar-fixed-top`类添加到主`navbar`div。

并添加

```
.navbar-fixed-top{
position: relative;
} 
```

到你的 CSS 规则。

这限制了菜单向左拉，并且在我为 wordpress 开发主题时工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:34:37.300

如果您查看[Bootstrap 基本导航栏示例](http://twitter.github.com/bootstrap/components.html#navbar)，您将看到导航栏两侧都有边距。这是因为对于非流体容器，您的页面将占据固定宽度，而导航栏使用该宽度。

如果您希望导航栏扩展到整个页面，则需要使用 a`class="container-fluid"`但在流畅的布局中，菜单项（默认情况下）将从页面的左侧流动。

在您的代码中，您同时使用了两者`container`，`container-fluid`哪个不正确，并且根据 Bootstrap 文档，您需要将导航放置在容器中 - 而不是在导航标签中嵌入容器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:06:59.487

我通过从in 中删除`width: auto`定义解决了这个问题。`.navbar .container``bootstrap.css`

不是一个理想的解决方案（`bootstrap.css`一般编辑），但它比将所有响应宽度应用于选择器要简单得多。

# android - Android 资源无法解析为变量

> ID：13798636
> 
> 赞同：0
> 
> 时间：2012-12-10T10:01:03.317
> 
> 标签：android, listview, android-listview, android-arrayadapter

我正在尝试创建一个数组适配器以将文本数组中的内容设置到适配器，但我无法从 Activity 设置适配器。我不确定我应该将什么作为 Int 传递给资源

**PlacesListAdapter.java**

```
public class PlacesListAdapter extends ArrayAdapter<Place> {
    public Context context;
    private List<Place> places;

    public PlacesListAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    public PlacesListAdapter(Context context, int resource, List<Place> places) {
        super(context, resource, places);
        this.context = context;
        this.places = places;
        // imageLoader = new ImageLoader(context.getApplicationContext());

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;
        View view = convertView;
        Place p = places.get(position);

        if (convertView == null) {
            LayoutInflater viewInflater;
            viewInflater = LayoutInflater.from(getContext());
            view = viewInflater.inflate(R.layout.item_place, null);

            holder = new ViewHolder();
            holder.placeTitle = (TextView) view.findViewById(R.id.place_title);
            holder.placeDistance = (TextView) view
                    .findViewById(R.id.place_distance);

            view.setTag(holder);

        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.placeTitle.setText(p.getPlaceTitle());
        holder.placeDistance.setText("200");
        holder.placeCategoryIcon.setImageResource(R.drawable.marker);

        return view;
    }

    static class ViewHolder {
        TextView placeId;
        TextView placeTitle;
        TextView placeDistance;
        ImageView placeCategoryIcon;
    }

} 
```

**Place.java**

```
public class Place {

    String placeId = "", placeTitle = "", placeDistance = "",
            placeCategoryIcon = "";

    public Place(String placeId, String placeTitle, String placeDistance,
            String placeCategoryIcon) {
        this.placeId = placeId;
        this.placeTitle = placeTitle;
        this.placeDistance = placeDistance;
        this.placeCategoryIcon = placeCategoryIcon;
    }

    public String getPlaceId() {
        return placeId;
    }

    public void setPlaceId(String placeId) {
        this.placeId = placeId;
    }

    public String getPlaceTitle() {
        return placeTitle;
    }

    public void setPlaceTitle(String placeTitle) {
        this.placeTitle = placeTitle;
    }

    public String getPlaceDistance() {
        return placeDistance;
    }

    public void setPlaceDistance(String placeDistance) {
        this.placeDistance = placeDistance;
    }

    public String getPlaceCategoryIcon() {
        return placeCategoryIcon;
    }

    public void setPlaceCategoryIcon(String placeCategoryIcon) {
        this.placeCategoryIcon = placeCategoryIcon;
    }

} 
```

**现在在 MainActiivty 我正在尝试设置适配器，以便它填充数组中的列表**

```
public class MainActivity extends SherlockFragmentActivity implements
        SearchView.OnQueryTextListener {

    private final String[] places = new String[] { "Mysore", "Bangalore", "Mangalore",
            "Wayanad", "Bandipur National Park", "Chickmaglur",
            "Bandipura", "Coorg", "Kodaikanal", "Hampi",
            "Ghati Subramanya", "Mekedatu", "Muththathhi", "Shivasamudram",
            "Talakadu", "Savana Durga" };

    public SearchView mSearchView;
    private TextView mStatusView;

    private Menu mainMenu = null;

    PlacesListAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Log.i("Nomad", "onCreate");

        ListView listView = (ListView) findViewById(R.id.place_list);

        adapter = new PlacesListAdapter(this, resource, places);

    }
} 
```

我不确定要设置`resources`什么`adapter = new PlacesListAdapter(this, resource, places);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:04:14.337

初始化`resource`变量：

```
// it doesn't matter what values you assing to the resource variable because you build
// the row layout yourself in the getView method of the adapter
int resource = android.R.layout.simple_list_item_1;
adapter = new PlacesListAdapter(this, resource, places); 
```

编辑：

```
List<Place> thePlaces = new ArrayList<Place>();
for (int i = 0; i < places.length; i++) {
     Place pl = new Place("NO_ID", places[i], "NO_DISTANCE", "NO_CATEGORYICON");
     thePlaces.add(pl);
}
int resource = android.R.layout.simple_list_item_1;
adapter = new PlacesListAdapter(this, resource, thePlaces); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:15:50.047

如果您通过扩展创建自定义适配器，则传递行布局 ID 而不是默认的 android 布局`ArrayAdapter`：

```
adapter = new PlacesListAdapter(this,R.layout.item_place, places); 
```

代替

```
adapter = new PlacesListAdapter(this, resource, places); 
```

# facebook - Spotify API - 查找 Facebook 用户

> ID：13798637
> 
> 赞同：1
> 
> 时间：2012-12-10T10:01:04.640
> 
> 标签：facebook, spotify

是否可以使用 Spotify JavaScript API 来确定（经过身份验证的）FaceBook 用户是否也使用 Spotify？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:14:10.963

不是直接的。但是，如果您`listens`在 Open Graph 上查看他们，您将能够看到他们是否在积极分享他们对 Facebook 的收听。但是，当然可以连接到 Facebook 而不分享您的收听。

# algorithm - Sublime Text 使用哪种算法/数据结构进行文件搜索

> ID：13798638
> 
> 赞同：2
> 
> 时间：2012-12-10T10:01:08.663
> 
> 标签：algorithm, search, data-structures, sublimetext2

您能否就 Sublime Text 的文件搜索功能如何根据他们使用的任何特殊算法/数据结构来实现一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:18:19.017

**警告**：此答案中的所有内容都是推测，可能与现实毫无共同之处。

Sublime Text 是封闭源代码，所以没有人可以告诉你使用了什么确切的算法。我可以猜测它在您搜索子字符串时使用简单的正则表达式搜索`Ctrl+F`并使用某种倒排索引作为标记（如类或变量名）。

sublime text 可能使用[间隙缓冲区](http://en.wikipedia.org/wiki/Gap_buffer)进行文本存储，但这种数据结构不适合快速搜索。

# javascript - 淡出（）后淡入（）不起作用

> ID：13798640
> 
> 赞同：0
> 
> 时间：2012-12-10T10:01:15.540
> 
> 标签：javascript, jquery, jquery-ui, hover, jquery-hover

```
$("#slider").live("hover", function(e) {
    if (e.type == 'mouseenter') {
        $("#slider").delay(100).fadeIn(); 
    }
    else {
        $("#slider").delay(1200).stop(true, true).fadeOut();
    }
}); 
```

我在 jQueryUI 中使用了一个滑块。我想要实现的是当用户将鼠标悬停在滑块上时，它会显示，当鼠标没有悬停在滑块上时，它会淡出。但是，我的情况是在第一次淡出之后，无论我将鼠标放在滑块的哪个位置，滑块都不会淡入。我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:08:36.410

使用ahren的建议试试这个

```
$("#slider").hover( function( ) {
    $("#slider").fadeTo( 1000, 1 );
},
function( ) {
    $("#slider").fadeTo( 1000, 0 );
}); 
```

[**在这里**](http://jsfiddle.net/qqwaA/)提琴[](http://jsfiddle.net/qqwaA/)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:16:59.463

这是另一种使用方法`mouseover`和`mouseout`处理程序的解决方案`.animate()`：

```
$("#slider").mouseover(function() {
    $("#slider").stop().animate({"opacity":0},500);
}).mouseout(function() {
    $("#slider").stop().animate({"opacity":1},500);
}); 
```**

# sql - SQL Server 2012 -- 循环键

> ID：13798644
> 
> 赞同：0
> 
> 时间：2012-12-10T10:01:24.177
> 
> 标签：sql, sql-server, ssis

我编写了一个查询，它连接单独的表并尝试在某个时间点（插入点）发现哪些 PK 键是给定记录的数据库中最新的。您会看到我已将其缩减为患者 ID 100，因为这是我似乎可以使其正常工作的唯一方法。

当前查询的工作方式如下所示：

```
SELECT TOP 1 P1.PatientID, 
             P1.DimPatientPK, 
             DA1.DimAdmissionPK, 
             DD1.DiagnosisPK, 
             DI1.Investigation1PK, 
             DIE1.InvestigationECGPK, 
             IEG1.InvestigationEchoGoldPK, 
             MH1.DimMedicalHistoryPK, 
             FH1.DimPatientFamilyHistoryPK, 
             PHT1.PatientHospitalisationTreatmentPK, 
             PMP1.PatientMedicalPersonnelPK, 
             RR1.PatientReferralReasonPK, 
             PEA1.PhysicalExamAHSPK, 
             PEM1.PhysicalExamMurmursPK, 
             SI1.SocialIssuePK, 
             TRT.TreatmentPK
--DT1.Treatment1PK          
  FROM
       DimPatient P1 LEFT JOIN DimAdmission DA1 ON P1.PatientID = DA1.PatientID
                     LEFT JOIN DimDiagnosis DD1 ON P1.PatientID = DD1.PatientID
                     LEFT JOIN DimInvestigation1 DI1 ON P1.PatientID = DI1.PatientID
                     LEFT JOIN DimInvestigationECG DIE1 ON P1.PatientID = DIE1.PatientId
                     LEFT JOIN DimInvestigationECHOgold IEG1 ON P1.PatientID = DIE1.PatientId
                     LEFT JOIN DimMedicalHistory MH1 ON P1.PatientID = MH1.PatientId
                     LEFT JOIN DimPatientFamilyHistory FH1 ON P1.PatientId = FH1.PatientID
                     LEFT JOIN DimPatientHospitalisationTreatment PHT1 ON P1.PatientID = PHT1.PatientId
                     LEFT JOIN DimPatientMedicalPersonnel PMP1 ON P1.PatientID = PMP1.PatientId
                     LEFT JOIN DimPatientReferralReason RR1 ON P1.PatientID = RR1.PatientId
                     LEFT JOIN DimPhysicalExamAHS PEA1 ON P1.PatientId = PEA1.PatientId
                     LEFT JOIN DimPhysicalExamination PE1 ON P1.PatientID = PE1.PatientId
                     LEFT JOIN DimPhysicalExamMurmurs PEM1 ON P1.PatientID = PEM1.PatientId
                     LEFT JOIN DimSocialIssue SI1 ON P1.PatientID = SI1.PatientID
                     LEFT JOIN DimTreatment TRT ON P1.PatientID = TRT.PatientId
  WHERE P1.patientid IN(100)
  ORDER BY DA1.DimAdmissionPK DESC, 
           P1.DimPatientPK DESC, 
           DD1.DiagnosisPK DESC, 
           DI1.Investigation1PK DESC, 
           DIE1.InvestigationECGPK DESC, 
           IEG1.InvestigationEchoGoldPK DESC, 
           MH1.DimMedicalHistoryPK DESC, 
           FH1.DimPatientFamilyHistoryPK DESC, 
           PHT1.PatientHospitalisationTreatmentPK DESC, 
           PMP1.PatientMedicalPersonnelPK DESC, 
           RR1.PatientReferralReasonPK DESC, 
           PEA1.PhysicalExamAHSPK DESC, 
           PE1.PhysicalExaminationPK DESC, 
           PEM1.PhysicalExamMurmursPK DESC, 
           SI1.SocialIssuePK DESC, 
           TRT.TreatmentPK DESC; 
```

这成功地恢复了完整的记录，无论它是否已为 patid 100 填写。

我无法扩展它，以便它循环并为数据库中的每个患者收集相同的结果。

即，如果我删除 where 子句，我仍然只能得到 1 行..

如果我删除 select top 1 .. 然后它返回我多组患者 ID 90 - 我基本上想要每个患者 ID 有 1 行 - 即 90、91、92，每个表匹配的最大键值。

有人对如何实现这一目标有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:15:58.630

您要加入的一个（或多个）表是空的。将您的联接更改为左外部联接，即

```
LEFT OUTER JOIN DimAdmission DA1    ON P1.PatientID = DA1.PatientID 
```

对于所有连接的表。空表将在结果集列中有 Null。

如果存在针对同一患者 ID 的多项选择，则您的一个或多个表中的每个患者 ID 都有多个记录。您要么需要从查询中排除这些表，要么查看您的数据结构，看看是否有一个字段可以让您选择单个记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T01:15:20.150

我建议您将 ROW_NUMBER 函数添加到 WHERE 子句中，例如

```
 WHERE ROW_NUMBER() (PARTION BY P1.patientid ORDER BY DA1.DimAdmissionPK desc,
P1.DimPatientPK desc, ... ) = 1 
```

“...”是指将整个 ORDER BY 子句移到 ROW_NUMBER 函数中。

祝你好运-看来您缺少事实表...

# php - PHP urlencoding 问题

> ID：13798645
> 
> 赞同：0
> 
> 时间：2012-12-10T10:01:27.110
> 
> 标签：php, urlencode

我的 php 文件采用 UTF-8 编码，我正在尝试对我的数据进行编码以安全发送到应用程序，但某些字符的编码不正确。

```
$text = "Š";
$text = urlencode(utf8_decode($text));
echo $text; 
```

回声 %3F 但根据此处找到的 w3c urlencoding 参考 (http://www.w3schools.com/tags/ref_urlencode.asp)，“Š”应转换为 %8A。Php 自己的参考资料也没有说明它使用的是什么参考资料。这可能是编码/解码问题还是其他问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:35:18.347

utf8_decode 尝试从 UTF-8 转换为 ISO-8859-1，但 ISO-8859-1 中不存在Š。所以你得到'？(= %3F)，替换字符。

它存在于 CP1252（可能是其他）中，十六进制代码为 8A。所以：

```
$text = urlencode(iconv('UTF-8', 'CP1252', $text)); 
```

应该给你所期望的。事实上，您不应该解码 unicode 字符串。

# mysql - 如何从列'rec_host'中检索等于1和0的所有行以进行回显

> ID：13798657
> 
> 赞同：1
> 
> 时间：2012-12-10T10:02:01.177
> 
> 标签：mysql

我想知道如何制作一个准备好的语句查询，该查询选择所有`rec_host`行并计算所有等于 1 的行和所有等于 0 的行，以便我可以分别打印出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:07:38.947

你想要这样的东西吗？

```
SELECT IF(rec_host=0,0,1) as value, COUNT(rec_host)
FROM lhr_reviews
GROUP BY value 
```

尝试一下！:)

解释：

*   它检查是否`rec_host`等于`0`。如果相等，则值为`0`，否则为`1`。
*   所有具有相同值的字段都被分组
*   `COUNT`将计算每个组中的所有行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:08:50.267

试试这个：：

```
SELECT rec_host as value, COUNT(rec_host)
FROM table_name
where rec_host in (0,1)
GROUP BY value 
```

# security - 用户角色何时刷新以及如何强制刷新？

> ID：13798662
> 
> 赞同：21
> 
> 时间：2012-12-10T10:02:22.057
> 
> 标签：security, symfony, roles, symfony-2.1, symfony-security

首先，我没有使用 FOSUserBundle 也不能，因为我正在移植一个遗留系统，它有自己的模型层（这里没有 Doctrine/Mongo/whatsoever）和其他非常自定义的行为。

我正在尝试将我的旧角色系统与 Symfony 连接起来，这样我就可以在控制器和视图中使用本机 symfony 安全性。

我的第一次尝试是`getRoles()`从`Symfony\Component\Security\Core\User\UserInterface`. 起初，它看起来很有效。但在深入研究之后，我注意到这些角色仅在用户登录时才会刷新。这意味着如果我授予或撤销用户的角色，他必须注销并重新登录才能使更改生效。但是，如果我撤销用户的安全角色，我希望立即应用它，这样我就不能接受这种行为。

我希望 Symfony 做的是在每个请求上重新加载用户的角色，以确保它们是最新的。我已经实现了一个自定义用户提供程序，并且`refreshUser(UserInterface $user)`在每个请求上都会调用它的方法，但是角色并没有被刷新。

在我的 UserProvider 中加载/刷新用户的代码如下所示：

```
public function loadUserByUsername($username) {
    $user = UserModel::loadByUsername($username); // Loads a fresh user object including roles!
    if (!$user) {
        throw new UsernameNotFoundException("User not found");
    }
    return $user;
} 
```

（`refreshUser`看起来很相似）

有没有办法让 Symfony 在每个请求上刷新用户角色？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-12T09:54:47.367

因此，经过几天尝试寻找可行的解决方案并为 Symfony2 用户邮件列表做出贡献后，我终于找到了它。以下内容来自[https://groups.google.com/d/topic/symfony2/NDBb4JN3mNc/discussion的讨论](https://groups.google.com/d/topic/symfony2/NDBb4JN3mNc/discussion)

事实证明，有一个接口`Symfony\Component\Security\Core\User\EquatableInterface`不是用于比较对象身份，而是用于比较对象身份

> 测试两个对象在安全和重新认证上下文中是否相等

在您的用户类中实现该接口（已经实现的接口`UserInterface`）。实现唯一需要的方法`isEqualTo(UserInterface $user)`，以便在当前用户的角色与传递的用户的角色不同时返回 false。

**注意：用户对象在会话中被序列化。由于序列化的工作方式，请确保将角色存储在用户对象的字段中，并且不要直接在`getRoles()`方法中检索它们，否则所有这些都不起作用！**

以下是特定方法的示例：

```
protected $roles = null;

public function getRoles() {

    if ($this->roles == null) {
        $this->roles = ...; // Retrieve the fresh list of roles
                            // from wherever they are stored here
    }

    return $this->roles;
}

public function isEqualTo(UserInterface $user) {

    if ($user instanceof YourUserClass) {
        // Check that the roles are the same, in any order
        $isEqual = count($this->getRoles()) == count($user->getRoles());
        if ($isEqual) {
            foreach($this->getRoles() as $role) {
                $isEqual = $isEqual && in_array($role, $user->getRoles());
            }
        }
        return $isEqual;
    }

    return false;
} 
```

另外，请注意，当角色实际更改并且您重新加载页面时，分析器工具栏可能会告诉您您的用户未经过身份验证。另外，查看分析器，您可能会发现角色实际上并没有被刷新。

我发现刷新这个角色*确实*有效。只是如果没有遇到授权约束（没有`@Secure`注释，防火墙中没有必需的角色等），则实际上并没有完成刷新，并且用户保持在“未经身份验证”状态。

一旦您点击执行任何类型的授权检查的页面，用户角色就会被刷新，并且分析器工具栏会再次显示带有绿点和“已验证：是”的用户。

这对我来说是可以接受的行为 - 希望它有帮助:)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-02-28T12:44:14.267

在您的 security.yml （或替代品）中：

```
security:
    always_authenticate_before_granting: true 
```

我一生中最简单的游戏。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-10T15:56:33.117

在控制器中，将角色添加到用户并保存到数据库后，只需调用：

```
// Force refresh of user roles
$token = $this->get('security.context')->getToken()->setAuthenticated(false); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-14T13:07:05.893

看看[这里](https://stackoverflow.com/a/13386608/2717270)，设置`always_authenticate_before_granting`为`true`at `security.yml`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-10T11:07:26.623

我通过实现自己的 EntityUserProvider 并覆盖 loadByUsername($username) 方法来实现此行为：

```
 /**
    * Load an user from its username
    * @param string $username
    * @return UserInterface
    */
   public function loadUserByUsername($username)
   {
      $user = $this->repository->findOneByEmailJoinedToCustomerAccount($username);

      if (null === $user)
      {
         throw new UsernameNotFoundException(sprintf('User "%s" not found.', $username));
      }

      //Custom function to definassigned roles to an user
      $roles = $this->loadRolesForUser($user);

      //Set roles to the user entity
      $user->setRoles($roles);

      return $user;
   } 
```

诀窍是`setRoles`每次打电话时都打电话`loadByUsername`......希望它有帮助

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-01T07:12:20.217

解决方案是将订阅者挂在 Doctrine *postUpdate*事件上。如果更新的实体是用户，与登录的用户相同，那么我会使用 AuthenticationManager 服务进行身份验证。当然，您必须向订阅者注入服务容器（或相关服务）。我更喜欢注入整个容器以防止循环引用问题。

```
public function postUpdate(LifecycleEventArgs $ev) {
    $entity = $ev->getEntity();

    if ($entity instanceof User) {
        $sc = $this->container->get('security.context');
        $user = $sc->getToken()->getUser();

        if ($user === $entity) {
            $token = $this->container->get('security.authentication.manager')->authenticate($sc->getToken());

            if ($token instanceof TokenInterface) {
                $sc->setToken($token);
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-10T15:22:01.690

抱歉，我无法在评论中回复，所以我重播了问题。如果 symfony 安全领域的新人尝试在自定义密码身份验证中获得角色刷新工作，那么在函数 authenticateToken 中：

```
if(count($token->getRoles()) > 0 ){
        if ($token->getUser() == $user ){
            $passwordValid=true;
        }
    } 
```

并且不要从 DB/LDAP 或任何地方检查密码。如果用户进入系统，那么在 $token 中只是用户名并且没有角色。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-07T17:38:23.323

我一直在为 Symfony4 争取这个，我想我终于找到了一个解决方案。

问题是，在我的情况下，角色取决于用户正在使用的“公司”。它可能是一家公司的 CEO，但另一家公司的运营商，菜单、权限等取决于公司。切换公司时，用户不得重新登录。

最后我做了以下事情：

*   将防火墙设置为无状态。
*   在 FormAuthentication 类中，我使用用户名在会话中明确设置了一个属性。
*   我为每个请求设置了另一个 Guard，它本质上采用此属性并从数据库中为其加载用户。

```
class FormAuthenticator extends AbstractFormLoginAuthenticator
{
    /** Constructor omitted */

    public function supports(Request $request)
    {
        return 'app_login' === $request->attributes->get('_route')
            && $request->isMethod('POST');
    }

    public function getCredentials(Request $request)
    {
        $credentials = [
            'nomusuari' => $request->request->get('nomusuari'),
            'password' => $request->request->get('password'),
            'csrf_token' => $request->request->get('_csrf_token'),
        ];
        $request->getSession()->set(
            Security::LAST_USERNAME,
            $credentials['nomusuari']
        );

        return $credentials;
    }

    public function getUser($credentials, UserProviderInterface $userProvider)
    {
        $token = new CsrfToken('authenticate', $credentials['csrf_token']);
        if (!$this->csrfTokenManager->isTokenValid($token)) {
            throw new InvalidCsrfTokenException();
        }

        $user = $userProvider->loadUserByUsername($credentials['nomusuari']);

        if (!$user) {
            // fail authentication with a custom error
            throw new CustomUserMessageAuthenticationException('Invalid user/password');
        }

        return $user;
    }

    public function checkCredentials($credentials, UserInterface $user)
    {
        $valid = $this->passwordEncoder->isPasswordValid($user, $credentials['password']);
        return $valid;
    }

    public function onAuthenticationSuccess(Request $request, TokenInterface $token, $providerKey)
    {
        $request->getSession()->set("user_username",$token->getUsername());

        return new RedirectResponse(
          $this->urlGenerator->generate("main")
        );
    }

    protected function getLoginUrl()
    {
        return $this->urlGenerator->generate('app_login');
    }
} 
```

SessionAuthenticator（返回 JSON，您可能需要调整它）：

```
class SessionAuthenticator extends AbstractGuardAuthenticator
{
    /**
     * Called on every request to decide if this authenticator should be
     * used for the request. Returning `false` will cause this authenticator
     * to be skipped.
     */
    public function supports(Request $request)
    {
        return $request->getSession()->has("user_username");
    }

    /**
     * Called on every request. Return whatever credentials you want to
     * be passed to getUser() as $credentials.
     */
    public function getCredentials(Request $request)
    {
        return $request->getSession()->get("user_username","");
    }

    public function getUser($credentials, UserProviderInterface $userProvider)
    {
        if (null === $credentials) {
            // The token header was empty, authentication fails with HTTP Status
            // Code 401 "Unauthorized"
            return null;
        }

        // if a User is returned, checkCredentials() is called
        /*return $this->em->getRepository(User::class)
            ->findOneBy(['apiToken' => $credentials])
        ;*/
        return $userProvider->loadUserByUsername($credentials);
    }

    public function checkCredentials($credentials, UserInterface $user)
    {
        // Check credentials - e.g. make sure the password is valid.
        // In case of an API token, no credential check is needed.

        // Return `true` to cause authentication success
        return true;
    }

    public function onAuthenticationSuccess(Request $request, TokenInterface $token, $providerKey)
    {
        // on success, let the request continue
        return null;
    }

    public function onAuthenticationFailure(Request $request, AuthenticationException $exception)
    {
        $data = [
            // you may want to customize or obfuscate the message first
            'message' => strtr($exception->getMessageKey(), $exception->getMessageData())

            // or to translate this message
            // $this->translator->trans($exception->getMessageKey(), $exception->getMessageData())
        ];

        return new JsonResponse($data, Response::HTTP_UNAUTHORIZED);
    }

    /**
     * Called when authentication is needed, but it's not sent
     */
    public function start(Request $request, AuthenticationException $authException = null)
    {
        $data = [
            // you might translate this message
            'message' => 'Authentication Required'
        ];

        return new JsonResponse($data, Response::HTTP_UNAUTHORIZED);
    }

    public function supportsRememberMe()
    {
        return false;
    }
} 
```

最后，我的security.yaml：

```
main:
            anonymous:
            stateless: true
            guard:
                entry_point: App\Security\FormAuthenticator
                authenticators:
                    - App\Security\SessionAuthenticator
                    - App\Security\FormAuthenticator 
```

工作正常。我可以在工具栏中看到更改，并且角色被刷新。

高温下，

埃斯特夫

# magento - 如何在页脚中添加 Magento 通讯？

> ID：13798665
> 
> 赞同：10
> 
> 时间：2012-12-10T10:02:26.207
> 
> 标签：magento, magento-1.7

我是 Magento 的新手。我想在页脚中添加时事通讯选项并在页脚中设置时事通讯功能。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-10T10:10:50.970

我想您谈到了将其放置在模板中的新闻通讯块。一个解决方案是在您的主题中创建一个 local.xml 布局文件。

例如，您的主题位于 /app/design/frontend/default/mytemplate/layout/local.xml

local.xml 的优势在于允许您覆盖自己模板的核心布局结构，而无需复制基本模板的整个 newsletter.xml 布局文件。

也许您需要删除通讯块的先前位置。我在下面给你一个例子。

在这个 local.xml 文件中，您可以执行以下操作：

```
<?xml version="1.0"?>
<layout version="0.1.0">

<!--
Default layout, loads most of the pages
-->

    <default>
        <remove name="left.newsletter" /> <!-- if you want to remove the newsletter block which is on the left side -->
        <!-- Mage_Newsletter -->
        <reference name="footer">
            <block type="newsletter/subscribe" name="newsletter" as="newsletter" template="newsletter/subscribe.phtml" before="-" />
        </reference>
    </default>
</layout> 
```

然后，在您的 footer.phtml 中，您应该添加以下内容：

```
<?php echo $this->getChildHtml('newsletter'); ?> 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-12-11T05:46:49.620

只需在您的footer.phtml 中添加以下单行。

```
<?php echo $this->getLayout()->createBlock('newsletter/subscribe')->setTemplate('newsletter/subscribe.phtml')->toHtml(); ?> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-10-16T17:30:38.280

您也可以在后端使用静态块来执行此操作，而无需靠近应用程序代码。我认为最好这样做，以防 Magento 或扩展更新覆盖编辑。

### 第1步

从商店的管理员/后端转到顶部的“CMS”导航菜单并选择“静态块”。单击“添加新”按钮。在随后的表格中，为“块标题”和“标识符”指定一个唯一的名称，并确保其状态设置为启用。将以下代码放入“内容”文本区域...

```
{{block type="newsletter/subscribe" name="left.newsletter" template="newsletter/subscribe.phtml"}} 
```

记下您为“标识符”输入的名称，因为您将在下一步中使用它。

单击“保存块”按钮。

### 第2步

现在转到 CMS 和“页面”或“静态块”，具体取决于您要放置时事通讯的位置。选择“内容”选项卡和文本区域，然后将此代码添加到要显示时事通讯注册表单的任何位置...

```
{{block type="cms/block" block_id="your_block_identifier"}} 
```

确保将创建静态块时使用的标识符的名称放入`block_id`

# css - Internet Explorer 中的 tinymce 图标

> ID：13798667
> 
> 赞同：2
> 
> 时间：2012-12-10T10:02:36.440
> 
> 标签：css, internet-explorer, icons, tinymce

我正在使用 TinyMCE，但图标的图像没有显示在 Internet Explorer 中。我已经检查了[这里](https://stackoverflow.com/questions/2625019/how-do-i-get-the-icons-of-tinymce-to-show)的讨论，但我已经正确地编写了必要的代码。

在使用 firefox 的 firebug 中，我可以检查 CSS 并且确实看到图像（img/icons.gif）正在加载，因此它也必须在 IE 中加载，但工具栏仍然是空白的。如果我滚动工具栏，我会得到正确的工具提示，并且可以找出它是哪个按钮，这意味着 advacned 中的按钮正在工作。我认为问题出在 CSS 中。

我正在使用最新的 jQuery 版本的 TinyMCE，并运行 IE9。当我在 IE9 的兼容性视图中尝试它时，它确实显示了图标。

是否有任何特定的 CSS 需要针对 IE9 进行调整？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T23:53:18.167

你在使用响应式布局吗？如果是这样，试试这个：

```
.mceEditor img {
 max-width: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-21T11:56:02.737

在我的情况下，原因是**阻止**在**IE-Security-Settings**中下载字体。（IE -> Internet 选项 -> tab 'security' ）这里是德语 IE 中设置的屏幕截图：

[![德语 IE 11 中的设置对话框](../Images/1a8eca727dbc1a8f47a7fe81f036036b.png)](https://i.stack.imgur.com/lt5sg.png)

如果您无法更改安全设置，您可以[在 TinyMce](http://archive.tinymce.com/forum/viewtopic.php?id=30966)用户组中找到使用不使用字体的皮肤的建议。[您可以在此处](http://archive.tinymce.com/download/plugins_view.php?id=34)下载皮肤“lightgraynofonts” 。将 zip 文件解压缩到目录**/tinymce/skins/lightgraynofonts**并像这样初始化 tinymce 编辑器：

```
 tinyMCE.init({
                            selector: ideditor,
                            theme: "modern",
                            skin: "lightgraynofonts",** ... 
```

# java - ActionBarSherlock 4.2 是否支持 SearchView 的搜索建议？

> ID：13798668
> 
> 赞同：5
> 
> 时间：2012-12-10T10:02:41.277
> 
> 标签：java, android, android-searchmanager

一个月前，我将 ActionBarSherlock 4.2 加入了我的项目。除了我的`SearchView`. 我创建搜索建议的方式是使用[Android 文档中的方法](http://developer.android.com/guide/topics/search/adding-custom-suggestions.html)。

ActionBarSherlock 是否支持搜索建议？我试图通过Github 页面上[的问题](https://github.com/JakeWharton/ActionBarSherlock/issues/659)列表进行挖掘，但问题似乎已关闭，但我似乎无法关注讨论并了解它是否真的已解决。我想你们中的一些一直在使用 ActionBarSherlock 的人可能更了解。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T14:46:49.333

它没有。但我找到了一种让它查询您的 ContentProvider 的方法。我从执行查询的 API 17 中查看了 SuggestionsAdapter 的来源，并想出了替换此方法的想法。我还发现 ActionbarSherlock 的 SuggestionsAdapter 不使用您的 SearchableInfo。

在 ActionBarSherlock 项目中编辑 com.actionbarsherlock.widget.SuggestionsAdapter：

添加一行

```
private SearchableInfo searchable; 
```

在构造函数中，添加

```
this.searchable = mSearchable; 
```

用这个替换 getSuggestions 方法：

```
public Cursor getSuggestions(String query, int limit) {

    if (searchable == null) {
        return null;
    }

    String authority = searchable.getSuggestAuthority();
    if (authority == null) {
        return null;
    }

    Uri.Builder uriBuilder = new Uri.Builder()
            .scheme(ContentResolver.SCHEME_CONTENT)
            .authority(authority)
            .query("")  // TODO: Remove, workaround for a bug in Uri.writeToParcel()
            .fragment("");  // TODO: Remove, workaround for a bug in Uri.writeToParcel()

    // if content path provided, insert it now
    final String contentPath = searchable.getSuggestPath();
    if (contentPath != null) {
        uriBuilder.appendEncodedPath(contentPath);
    }

    // append standard suggestion query path
    uriBuilder.appendPath(SearchManager.SUGGEST_URI_PATH_QUERY);

    // get the query selection, may be null
    String selection = searchable.getSuggestSelection();
    // inject query, either as selection args or inline
    String[] selArgs = null;
    if (selection != null) {    // use selection if provided
        selArgs = new String[] { query };
    } else {                    // no selection, use REST pattern
        uriBuilder.appendPath(query);
    }

    if (limit > 0) {
        uriBuilder.appendQueryParameter("limit", String.valueOf(limit));
    }

    Uri uri = uriBuilder.build();

    // finally, make the query
    return mContext.getContentResolver().query(uri, null, selection, selArgs, null);
} 
```

现在它查询我的 ContentProvider 但由于默认适配器崩溃，说没有 layout_height 从支持库加载一些 xml 文件。所以你必须使用自定义的 SuggestionsAdapter。这对我有用：

```
import com.actionbarsherlock.widget.SearchView;

import android.app.SearchManager;
import android.app.SearchableInfo;
import android.content.ContentResolver;
import android.content.Context;
import android.database.Cursor;
import android.net.Uri;
import android.support.v4.widget.CursorAdapter;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public final class DrugsSearchAdapter extends CursorAdapter
{
    private static final int QUERY_LIMIT = 50;

    private LayoutInflater inflater;
    private SearchView searchView;
    private SearchableInfo searchable;

    public DrugsSearchAdapter(Context context, SearchableInfo info, SearchView searchView)
    {
        super(context, null, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
        this.searchable = info;
        this.searchView = searchView;
        this.inflater = LayoutInflater.from(context);
    }

    @Override
    public void bindView(View v, Context context, Cursor c)
    {
        String name = c.getString(c.getColumnIndex(SearchManager.SUGGEST_COLUMN_TEXT_1));
        TextView namet = (TextView) v.findViewById(R.id.list_item_drug_name);
        namet.setText(name);

        String man = c.getString(c.getColumnIndex(SearchManager.SUGGEST_COLUMN_TEXT_2));
        TextView manuf = (TextView) v.findViewById(R.id.list_item_drug_manufacturer);
        manuf.setText(man);
    }

    @Override
    public View newView(Context arg0, Cursor arg1, ViewGroup arg2)
    {
        return this.inflater.inflate(R.layout.list_item_drug_search, null);
    }

    /**
     * Use the search suggestions provider to obtain a live cursor.  This will be called
     * in a worker thread, so it's OK if the query is slow (e.g. round trip for suggestions).
     * The results will be processed in the UI thread and changeCursor() will be called.
     */
    @Override
    public Cursor runQueryOnBackgroundThread(CharSequence constraint) {
        String query = (constraint == null) ? "" : constraint.toString();
        /**
         * for in app search we show the progress spinner until the cursor is returned with
         * the results.
         */
        Cursor cursor = null;
        if (searchView.getVisibility() != View.VISIBLE
                || searchView.getWindowVisibility() != View.VISIBLE) {
            return null;
        }
        try {
            cursor = getSuggestions(searchable, query, QUERY_LIMIT);
            // trigger fill window so the spinner stays up until the results are copied over and
            // closer to being ready
            if (cursor != null) {
                cursor.getCount();
                return cursor;
            }
        } catch (RuntimeException e) {
        }
        // If cursor is null or an exception was thrown, stop the spinner and return null.
        // changeCursor doesn't get called if cursor is null
        return null;
    }

    public Cursor getSuggestions(SearchableInfo searchable, String query, int limit) {

        if (searchable == null) {
            return null;
        }

        String authority = searchable.getSuggestAuthority();
        if (authority == null) {
            return null;
        }

        Uri.Builder uriBuilder = new Uri.Builder()
                .scheme(ContentResolver.SCHEME_CONTENT)
                .authority(authority)
                .query("") 
                .fragment(""); 

        // if content path provided, insert it now
        final String contentPath = searchable.getSuggestPath();
        if (contentPath != null) {
            uriBuilder.appendEncodedPath(contentPath);
        }

        // append standard suggestion query path
        uriBuilder.appendPath(SearchManager.SUGGEST_URI_PATH_QUERY);

        // get the query selection, may be null
        String selection = searchable.getSuggestSelection();
        // inject query, either as selection args or inline
        String[] selArgs = null;
        if (selection != null) {    // use selection if provided
            selArgs = new String[] { query };
        } else {                    // no selection, use REST pattern
            uriBuilder.appendPath(query);
        }

        if (limit > 0) {
            uriBuilder.appendQueryParameter("limit", String.valueOf(limit));
        }

        Uri uri = uriBuilder.build();

        // finally, make the query
        return mContext.getContentResolver().query(uri, null, selection, selArgs, null);
    }

} 
```

并在 SearchView 中设置这个适配器

```
searchView.setSuggestionsAdapter(new DrugsSearchAdapter(this, searchManager.getSearchableInfo(getComponentName()), searchView)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T13:51:02.357

我是为此打开[github 问题](https://github.com/JakeWharton/ActionBarSherlock/issues/659)的人。它正在开发分支上工作。当前版本（4.2）没有修复。这个[提交](https://github.com/JakeWharton/ActionBarSherlock/commit/e5f1661210b8d526386f61f01677a6360ddd6e63)完全修复了它，但我建议只检查开发分支并尝试它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-18T14:38:46.030

我不知道我在这里是错的还是我意外更改了某些内容，但是上面的答案不起作用并且 ActionBarSherlock SuggestionsAdapter 不起作用。我得到的只是runQueryOnBackgroundThread 中的空指针。它也从不进入 bindView 等，但它设法显示建议结果。我认为 android.app.SearchManager 以某种方式用 getSuggestions() 覆盖了 ABS，但我不确定。我还在尝试一些事情...

# html - Chrome：当父级固定时，不能将一个绝对 div 定位在另一个上

> ID：13798669
> 
> 赞同：6
> 
> 时间：2012-12-10T10:02:46.893
> 
> 标签：html, css, google-chrome, z-index

我发现当我想要位于顶部的 div 的父级是固定的时，我无法在 Chrome 中将一个绝对定位的 div 放置在另一个上：

```
<div id="parent">
    <div id="top"></div>
</div>
<div id="bottom"></div> 
```

这是一个演示问题的 JSFiddle：

[http://jsfiddle.net/SEJhg/](http://jsfiddle.net/SEJhg/)

您应该看到，在 Chrome 中，z-index 为 10 的黄色绝对定位 div 出现在 z-index: 1 的绿色绝对定位 div 后面，因为父级的位置是固定的。

其他浏览器（如 Firefox）在绿色 div 之上显示黄色 div。

有关如何在 Chrome 中解决此问题的任何建议？我无法改变父母的固定位置。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-10T10:53:34.327

您正在体验的是 Chrome 中相对较新的行为，引入该行为是为了使桌面浏览器行为与移动浏览器保持一致。

当一个元素`position: fixed;`与你的 类似时`#parent`，会为该元素创建一个新的堆叠上下文，这意味着该元素及其子元素相对于彼此堆叠，而不是相对于窗口上下文堆叠。因此，不是固定元素 ( `#bottom`) 的子元素的元素不能放置在“介于”`#parent`和之间`#top`。

您的解决方案是移动`#bottom`内部`#parent`（将其放在相同的堆叠上下文中），或者将定位方法更改为`#parent`固定之外的其他方法。

可以在此处找到有关 Chrome 更改的提案：http: [//lists.w3.org/Archives/Public/www-style/2012May/0473.html](http://lists.w3.org/Archives/Public/www-style/2012May/0473.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T10:22:11.427

我一直在摆弄这个，我得出的结论是，在 chrome 中，`parent`和`top`元素是不可分割的。我试图得出这个结论的是将`bottom`元素放在`parent`“三明治”之上并摆弄 z-index。我可以让`bottom`三明治出现在上面或下面，但不能直接出现在里面。

对我有用的是：

```
<div id="parent">
    <div id="bottom"></div>
    <div id="top"></div>
</div> 
```

我不知道您页面的上下文，因此这对您来说可能是无用的响应，但我认为这样做然后调整位置以在页面的 x 和 y 轴上获得所需的结果将比尝试更容易如您所愿，从外面将三明治中的元素滑入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:56:42.537

我正在使用 Chrome 版本：21.0.1180.89 m，黄色位于绿色上方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:52:40.343

试试这个代码：

```
<div id="parent">
<div id="bottom"></div> 
```

`</div>`

```
<div id="top"></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T10:08:34.800

仅适用于 chrome 的位置：

```
@media screen and (-webkit-min-device-pixel-ratio:0) { 
 #parent {
    position: absolute;
  }
} 
```

在所有浏览器中查看[http://jsfiddle.net/5fKq6/ 。](http://jsfiddle.net/5fKq6/)

# qtp - qtp中的等待和同步

> ID：13798670
> 
> 赞同：5
> 
> 时间：2012-12-10T10:02:49.787
> 
> 标签：qtp

QTP中的等待和同步功能有什么区别。还请您介绍一下可以使用什么情况等待功能，可以使用情况同步功能。

请帮帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T16:09:15.270

`Browser.Sync`或者`Page.Sync`等待导航完成，表示页面已经完全下载成功。这并不一定意味着页面的所有元素都已下载（即图像、CSS、JS）。

`Wait`是硬编码延迟（等待 X 秒数）。应尽可能避免等待。`WaitProperty`如果您使用 QTP (或`Sync`)的内置同步功能，该脚本将运行得更快、更可靠。

直接取自 QTP 帮助文本，下面是一个代码示例，它显示了使用浏览器或页面级同步的理想时间。

```
SystemUtil.Run "iexplore.exe", "http://www.google.com"
Browser("Google").Page("Google").Sync
Browser("Google").Navigate "http://www.cnn.com"
Browser("Google").Page("CNN.com - Breaking News,").Sync
Wait 10 ' we can read the latest news
Browser("Google").Back 
```

# sql - 根据特定条件将多行合并为一个

> ID：13798672
> 
> 赞同：1
> 
> 时间：2012-12-10T10:02:51.010
> 
> 标签：sql, sql-server, row

我有这样的数据：

## 开始日期 结束日期 金额 INVNO

*   2012-11-07 09:23:48.000 2012-11-07 09:23:59.000 0.00000000 000000000002012
*   2012-11-07 09:23:59.000 2012-11-07 10:14:02.000 0.00000000 000000000002012
*   2012-11-07 10:14:02.000 2012-11-07 10:15:13.000 0.00000000 000000000002012
*   2012-11-07 10:15:13.000 2012-11-07 10:34:08.000 0.00000000 000000000002012
*   2012-11-07 10:34:08.000 2012-11-07 11:09:33.000 4000.00000000 000000000002012
*   2012-11-07 11:09:33.000 2012-11-07 11:10:35.000 4000.00000000 000000000002012

我希望它们合并成一行，如下所示：

*   2012-11-07 09:23:48.000 2012-11-07 11:10:35.000 8000.00000000 000000000002012 STARTDATE 字段中第一行的开始日期，ENDDATE 字段中最后一行的结束日期和 AMOUNT 字段中金额的总和。

谢谢你的帮助

ps：但如果有数据开始日期与上一行的结束日期不同，则必须开始新行。像这样：

*   2012-11-07 09:23:48.000 2012-11-07 09:23:59.000 20.00000000 000000000002012
*   2012-11-07 09:23:59.000 2012-11-07 10:14:02.000 30.00000000 000000000002012
*   2012-11-07 10:16:09.000 2012-11-07 10:19:13.000 40.00000000 000000000002012
*   2012-11-07 10:19:13.000 2012-11-07 10:34:08.000 50.00000000 000000000002012

应该是这样的：

*   2012-11-07 09:23:48.000 2012-11-07 10:14:02.000 50.00000000 000000000002012
*   2012-11-07 10:16:09.000 2012-11-07 10:34:08.000 90.00000000 000000000002012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:21:48.037

```
select min(startdate),max(enddate),sum(amount),INVNO 
       from T 
       group by INVNO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:41:30.950

这是一些示例数据 - 我已将您的第二个示例的发票编号更改为 ...13 以区分它。

```
--DROP TABLE #LINES
CREATE TABLE #Lines(
STARTDATE datetime, 
ENDDATE datetime, 
AMOUNT money,
INVNO varchar(50)
)

INSERT INTO #Lines
SELECT 
'2012-11-07 09:23:48.000', '2012-11-07 09:23:59.000', 0.00000000, 000000000002012
UNION ALL SELECT
'2012-11-07 09:23:59.000', '2012-11-07 10:14:02.000', 0.00000000, 000000000002012
UNION ALL SELECT
'2012-11-07 10:14:02.000', '2012-11-07 10:15:13.000', 0.00000000, 000000000002012
UNION ALL SELECT
'2012-11-07 10:15:13.000', '2012-11-07 10:34:08.000', 0.00000000, 000000000002012
UNION ALL SELECT
'2012-11-07 10:34:08.000', '2012-11-07 11:09:33.000', 4000.00000000, 000000000002012
UNION ALL SELECT
'2012-11-07 11:09:33.000', '2012-11-07 11:10:35.000', 4000.00000000, 000000000002012

UNION ALL SELECT
'2012-11-07 09:23:48.000', '2012-11-07 09:23:59.000', 20.00000000, 000000000002013
UNION ALL SELECT
'2012-11-07 09:23:59.000', '2012-11-07 10:14:02.000', 30.00000000, 000000000002013
UNION ALL SELECT
'2012-11-07 10:16:09.000', '2012-11-07 10:19:13.000', 40.00000000, 000000000002013
UNION ALL SELECT
'2012-11-07 10:19:13.000', '2012-11-07 10:34:08.000', 50.00000000, 000000000002013 
```

然后试试这个

```
;
WITH 
    InvGroupStartDates AS
    (
        select
            InvGroupStartDate = L1.STARTDATE, 
            L1.INVNO, 
            INVGroupNo = ROW_NUMBER() OVER (PARTITION BY L1.INVNO ORDER BY L1.StartDate )
        from #Lines L1
        where not exists(
            select *
            from #Lines L2
            where L1.ENDDATE = L2.STARTDATE
            and L1.INVNO = L2.INVNO
            )
    ),

    InvGroupRanges AS
    (
        select 
            IGSD1.INVNO, 
            IGSD1.InvGroupStartDate, 
            InvGroupEndDateEx = IGSD2.InvGroupStartDate
        from InvGroupStartDates IGSD1
            left join InvGroupStartDates IGSD2
                on IGSD1.INVNO = IGSD2.INVNO
                and IGSD1.INVGroupNo = IGSD2.INVGroupNo - 1
    )
SELECT 
    STARTDATE = InvGroupRanges.InvGroupStartDate,
    INVNO = InvGroupRanges.INVNO,
    ENDDATE = MAX( L.ENDDATE ),
    AMOUNT = SUM( L.Amount )
from #Lines L
    inner join InvGroupRanges
        on L.STARTDATE >= InvGroupRanges.InvGroupStartDate
        and ( InvGroupRanges.InvGroupEndDateEx is NULL OR L.ENDDATE < InvgroupRanges.InvGroupEndDateEx )
group by InvGroupRanges.InvGroupStartDate, InvGroupRanges.INVNO 
```

该代码确定发票行范围的开始（相同的发票编号，只获取那些没有前一行的）。然后它获取发票行范围的结束 - 结束日期不包括在内，因为它是后续范围的开始。

最后，它使用这些开始/结束发票行范围日期行来获取您的数据。

# php - 使用 PHP/CodeIgniter 动态检测动画 GIF

> ID：13798674
> 
> 赞同：6
> 
> 时间：2012-12-10T10:02:55.567
> 
> 标签：php, codeigniter, url, gif, animated-gif

有什么方法可以检查图像[URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)是否返回动画或非 GIF？

我需要保存图像 URL，然后在我的网站上显示图像，所以我想允许 GIF 扩展，但我需要避免使用动画 GIF。是否可以在不下载图像的情况下即时检测到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:07:40.790

查看[对函数*imagecreatefromgif*](http://php.net/manual/en/function.imagecreatefromgif.php#104473)文档的评论（在 php.net 上）。即使您稍后要链接到它，您仍然需要先下载图像文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:31:56.563

我认为，[ImageMagick](http://en.wikipedia.org/wiki/ImageMagick)真的会是你最好的机会：

```
identify -format %n  posible_animation.gif 
```

请查看论坛帖子*[如何识别动画图像格式](http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=11988)*以获取更多信息。

# mysql - 使用联合查询两个表

> ID：13798677
> 
> 赞同：2
> 
> 时间：2012-12-10T10:03:08.283
> 
> 标签：mysql, datatable

我有一个非常简单的 mysql 查询，我想从两个表 table1 和 table2 中获取一些“数据”，只要这个“数据”在包含精确“id”的一行中，所以我运行了一个准备好的请求：

```
'select data from (
    select data from table1 union select data from table2) 
 where id = :id' 
```

但它似乎不起作用（顺便说一句，我只是简单地尝试过`'select data from table1, table2 where id = :id '`）但它不起作用。有人可以帮忙，我不知道我在哪里错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:19:14.680

```
 select * from table1  where id = :id
 union all
 select * from table2  where id = :id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T08:59:54.227

联合在 MySQL 中是复杂且没有根据的，我宁愿依靠 JOIN 来执行我的语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:08:35.313

我认为你正在寻找的是一个加入。有多种类型的连接，其中最常见的是`LEFT JOIN`和`INNER JOIN`。

`LEFT JOIN`即使匹配的数据不存在，也返回行，并为连接的数据返回 null。

`INNER JOIN`要求匹配的数据存在，如果匹配的数据不存在，则不返回任何内容。

使用示例`INNER JOIN`：

```
SELECT
   table1.*,
   table2.*
FROM
   table1
   INNER JOIN table2 ON ( table1.id = table2.id )
WHERE
   id = :id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:08:47.713

选择table1.data，table2.data from table1 where table1.id = table2.id

# android - 如何使用 inputtype="number" 设置多行 EditText？

> ID：13798688
> 
> 赞同：0
> 
> 时间：2012-12-10T10:04:01.043
> 
> 标签：android

我尝试为edittext设置多行，如果`imputtype="number"` ：

```
<EditText
            android:id="@+id/txtJianNo"
            android:layout_width="480px"
            android:layout_height="wrap_content"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:background="@drawable/txtjianno"
            android:ems="10"
            android:gravity="top"
            android:inputType="number|textMultiLine"
            android:lines="2"               
            android:singleLine="false"
            android:textColor="#5FB234"
            android:textSize="18dp" /> 
```

但是如果值的长度>编辑文本的长度，则编辑文本的值不会换行。如何使用 inputtype="number" 设置多行 EditText？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:18:52.560

只有一个属性是可能的，即`android:numeric="integer"`。

**但它已被弃用，但对于您的问题，这是唯一的解决方案。**

**代码**

```
 <EditText
      android:id="@+id/editText2"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:ems="10"
      android:gravity="top"
      android:lines="10"
      android:numeric="integer" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-12-07T07:48:25.117

你可以**`edittext.setSingleLine(false);`**

# ios - 内容偏移的表视图滚动问题

> ID：13798692
> 
> 赞同：1
> 
> 时间：2012-12-10T10:04:14.023
> 
> 标签：ios, xcode, cocoa-touch

我正在尝试滚动我的表格视图以在键盘处于活动状态时显示我的最后一个单元格。这就是我正在做的`tableView:cellForRowAtIndexPath:`......

```
if (keyboard) {

    CGFloat calculatedPosY = 70 * ([Array count]-1);
    MyTable.contentOffset = CGPointMake(0.0, calculatedPosY);

} 
```

它第一次正常工作，但第二次重新加载表时它不滚动。第三次它再次滚动并显示表格的最后一个单元格。或者，代码正在运行，并且日志给出了相同的内容偏移量 (0,280)。

请告诉我是否做错了。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:12:58.973

您需要做两件事 - 1）确保表格视图适合键盘未覆盖的屏幕可见部分，以及 2）将表格滚动到最后一行。

要调整视图大小，我会注册以检测出现的键盘：

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector (keyBoardWillShow:)
                                             name: UIKeyboardWillShowNotification object: nil]; 
```

`keyBoardWillShow:`当键盘出现并且您可以调整表格视图的大小时，将调用该方法：

```
- (void)keyBoardWillShow:(NSNotification *)aNotification
{
    NSValue *value = [[aNotification userInfo] objectForKey: UIKeyboardFrameEndUserInfoKey];
    CGRect keyboardRect = [value CGRectValue];

    CGFrame tableFrame = self.tableView.frame;
    tableFrame.height -= keyboardRect.size.height 
    self.tableView.frame = tableFrame;
} 
```

最后，滚动到最后一个单元格（`keyBoardWillShow:`如果你愿意，你可以这样做）：

```
[tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:lastRowIndex inSection:0] atScrollPosition:UITableViewScrollPositionBottom animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:09:49.047

不要在`tableView:cellForRowAtIndexPath:`.. 中这样做。此方法遍历所有数组元素并创建单元格。这意味着此计算运行 array[N] 次。

而是在之后运行一次`[self.tableView reloadData]`；

或者试试这个：

```
NSInteger *cells_count // You can have it from - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section.

//Run this after [tableView reloadData]
NSIndexPath* indexPath = [NSIndexPath indexPathForRow:cells_count-1 inSection:0];
[tableView scrollToRowAtIndexPath:indexPath atScrollPosition:UITableViewScrollPositionTop animated: NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:51:16.327

我建议你使用 - scrollToRowAtIndexPath:atScrollPosition:animated:。它是 UITableView 中的一个方法。

# vim - 如何在 g 命令的 Vim 标准模式下转义

> ID：13798693
> 
> 赞同：6
> 
> 时间：2012-12-10T10:04:26.177
> 
> 标签：vim

我想在 Vim中添加`[](`到行首和行`)`尾。`http`

为此，我使用以下 g 命令：

```
g/^htt/norm I[]( 
```

现在，我现在想在`Esc`里面按键`g`并放`A)`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-10T14:24:39.550

您可以`Esc`使用`ctrl`+`v`后跟`esc`.

`ctrl`+`v`将按字面意思插入下一个非数字。

注意：您可能必须使用`ctrl`+ `q`，具体取决于您的系统。（很好的助记符是引用）

有关更多信息，请参阅帮助

```
:h c_Ctrl-V 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-10T10:12:10.510

为了能够`:normal`按顺序使用两个命令，您必须将它们包装在`:execute`. 当您使用双引号时，您可以将 Escape 写为`\<Esc>`，如下所示：

```
:g/^htt/exe "norm I[](\<Esc>" | norm A) 
```

笔记：

*   除非您需要应用映射，否则`:normal!`首选使用 (with the bang)，因为它更健壮。
*   你也可以`:substitute`在这里使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T10:52:05.897

这更容易做到`:s`：

```
:%s/^htt.*/[](&)/ 
```

# numpy - Numpy/Scipy irfft 奇怪的行为

> ID：13798697
> 
> 赞同：0
> 
> 时间：2012-12-10T10:04:43.057
> 
> 标签：numpy, scipy, fft, resampling

我正在重新采样一个真实信号，并且由于我可以使用它的 fft `rfft`，我想使用`irfft(signal, new_length)`. 但我似乎无法让它工作。

这是一个工作代码片段，它使用复数 fft 对长度为 4 的信号进行重新采样：

```
from numpy.fft import fft,ifft
p=array([1.,2.2,4.,1.])
pk=fft(p)
pnew=ifft(pk,8)*(8./4.) 
```

其中因子`(8./4.)`从原始长度重新调整为新长度。你可以检查一下`pnew[::2]==p`。

现在，当我尝试对真实傅里叶变换应用相同的策略时，我在原始点得到了错误的结果：

```
from numpy.fft import rfft,irfft
p=array([1.,2.2,4.,1.])
pk=rfft(p)
pnew=irfft(pk,8)*(8./4.) 
```

我有`pnew[::2]=[ 1.45, 1.75, 4.45, 0.55]!=p`。

有人知道发生了什么吗？我尝试使用 scipy 中的例程，结果相同。文档本身简要讨论了如何执行此操作，请参阅[此处](http://docs.scipy.org/doc/numpy-1.6.0/reference/generated/numpy.fft.irfft.html#numpy.fft.irfft)，页面底部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T14:03:35.477

您喜欢的文档说：

```
In other words, irfft(rfft(a), len(a)) == a to within numerical accuracy. 
```

如果你这样做，情况并非如此`irfft(pk, 8)`！除了填充之外，问题在于奇数样本和傅里叶变换的对称性。`len(p)`请注意，如果是奇数，则根本没有问题。

为了更好地理解，请考虑以下内容：

```
>>> p = np.array([1.,2.2,4.,1.])
>>> np.fft.fft(p)
array([ 8.2+0.j , -3.0-1.2j,  1.8+0.j , -3.0+1.2j])
>>> np.fft.fftfreq(len(p))
array([ 0\.  ,  0.25, -0.5 , -0.25]) # 0.5 only occurs once negative
>>> np.fft.rfft(p)
array([ 8.2+0.j , -3.0-1.2j,  1.8+0.j ])
>>> np.fft.rfftfreq(len(p)) # (not available in numpy 1.6.)
array([ 0\.  ,  0.25,  0.5 ]) # 0.5 occurs, here positive, it does not matter

# also consider the odd length FFT
>>> np.fft.fftfreq(len(p)+1)
array([ 0\. ,  0.2,  0.4, -0.4, -0.2]) # 0.4 is in there twice.

# And consider that this gives the result you expect:
>>> symmetric_p = np.fft.rfft(p)
>>> symmetric_p[-1] /= 2
>>> np.fft.irfft(symmetric_p, 8)[::2]*(8./4.)
array([ 1\. ,  2.2,  4\. ,  1\. ]) 
```

这意味着如果你仔细观察。如果输入样本是偶数，则计算的 FFT 频率*不是*对称的，而是有一个额外的负频率（实际上也可以是正频率，因为它始终没有相移）。

因为您正在填充（没有真正的原因？）到不同的频率，RFFT 突然为这个频率提供了额外的“空间”。因此，如果您从 FFT 的角度来看它，通常只会在出现负频率时将其添加为正频率（这基本上意味着它会加倍）。如果您查看`symmetric_p`减半的上方，则此频率会给出带有填充的预期结果（如果没有填充，它将不会给出预期的结果）。

# javascript - 在与 MongoDB 的共享集合中跟踪每个用户的“已加星标”项目

> ID：13798704
> 
> 赞同：0
> 
> 时间：2012-12-10T10:05:07.300
> 
> 标签：javascript, node.js, mongodb

我们在 MongoDB 中有一组用户提交的帖子，它们可以被其他用户“加星标”。我想知道实现这一目标的最佳方法是什么？

我的第一个猜测是将一组用户 ID 放在一个已加注星标的帖子上，如下所示：

```
{
   created:Date
   title:String
   content:String
   ...
   starred_by:[ObjectId] // Array of users by id that have starred the post
} 
```

然后，当我们执行 find() 时，我想通过以下方式订购：

```
$sort: {
   starred_by:{$in:[session.user_id]},
   created:-1
} 
```

这可能吗？我正在努力寻找有关它的任何文档。我们真的希望查找的结果首先按“starred_by”字段排序，这样加星标的结果首先出现，然后按创建日期排序。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:54:23.680

我建议您将它们放入单独的集合中

```
{ item : ObjectID, user: ObjectID, starred_on : Date } 
```

原因是一个项目可能会被很多用户加注星标，并且您的项目文档可能会超出文档限制大小 ( [16MB](http://docs.mongodb.org/manual/core/document/#record-documents) )。

我不完全确定您的查询是做什么的（显示给定用户加星标的最新文章？）。如果您想显示给定用户加星标的最新项目（mongodb shell）：

```
db.starred.find({ user : session.user_id, }).sort([starred_on, -1]) 
```

# javascript - 警报在打包的应用程序中不起作用

> ID：13798706
> 
> 赞同：1
> 
> 时间：2012-12-10T10:05:12.277
> 
> 标签：javascript, html, google-chrome, webview, google-chrome-app

我正在研究 chrome 打包应用程序中的 webview，我正在研究 chrome 中的浏览器示例。在 onload 函数的 browser.js 文件中，我添加了 alert("webview apps"); 在第一行，代码不再起作用，当我删除这一行时，它又起作用了。

```
onload = function() {
    alert("webview app");
    var webview = document.querySelector('webview');
    doLayout();
    ...
} 
```

那么警报是否适用于打包的应用程序？
P / s：console.log也不起作用，我看到源代码使用它，但是在检查元素窗口上什么都没有显示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:08:29.147

Console.log*应该可以*工作，这完全取决于您正在查看的视图。例如，要在窗口中访问日志，您必须在页面上“检查元素”才能访问它。

警报以及确认和许多其他旧版 Web 功能已[被禁用。](http://developer.chrome.com/apps/app_deprecated.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-08T10:17:14.293

这听起来像调试。如果你想调试一个打包的应用程序，开发者工具应该足以替换`alert`（和其他对话框）。但是默认情况下不启用开发者工具。您可以在`chrome://flags/#debug-packed-apps`.

查看此[博客文章](http://blog.getpostman.com/2014/01/27/enabling-chrome-developer-tools-inside-postman/)以获取示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T17:06:13.300

您可以将您的包应用程序设置为在沙盒模式下运行，但这将不允许访问任何操作页面的 api。

[http://developer.chrome.com/apps/sandboxingEval.html](http://developer.chrome.com/apps/sandboxingEval.html)

这实质上将允许应用程序在其自己的环境中运行，从而允许您在编程时查看应用程序。这样做是为了创建应用程序的安全性。Console.log 完美运行。当您去检查元素然后在检查元素视图中选择控制台时，您应该会看到您想要打印的任何“回声”结果。

# delphi - 将文本从 Delphi 输入到 Word

> ID：13798709
> 
> 赞同：3
> 
> 时间：2012-12-10T10:05:19.970
> 
> 标签：delphi, ms-word, delphi-xe2

我正在使用 Delphi XE2 并使用以下代码将字母 Y 输入到 Word (2010) 模板中的书签中。

```
Doc.Bookmarks.Item('NS').Range.InsertAfter('Y'); 
```

除了在文档中，出现数字 89 而不是字母 Y。

错误可能来自我的代码还是 Word 文档？任何方向都感激地接受。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:21:38.387

您的文字`'Y'`是字符文字而不是字符串字符串文字。的[ASCII 码`Y`是 89](http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters)。

因此，您传递的是 a`Char`而不是 a `string`。当 Word 需要获取该整数的字符串表示形式时，它只需将整数转换`89`为其文本表示形式，即 string `'89'`。

要解决此问题，您可以这样做：

```
var
  Text: string;
....
Text := 'Y';
Doc.Bookmarks.Item('NS').Range.InsertAfter(Text); 
```

这个想法是我们确保我们传递一个字符串`InsertAfter()`而不是一个字符。请记住，`InsertAfter()`接收一个变体参数，因此您需要注意存储在变体中的有效负载的类型。

# php - mysql & php 搜索高亮

> ID：13798715
> 
> 赞同：3
> 
> 时间：2012-12-10T10:05:36.490
> 
> 标签：php, mysql, search

想知道是否有人可以帮助我朝着正确的方向前进，我正在构建一个搜索功能（php 和 mysql），它将显示搜索结果并突出显示用户搜索过的关键字。目前，我获取用户输入的搜索条件，并针对数据库进行查询，这可以正常工作以获得所需的结果。我的问题是

```
$highlight = preg_replace("/".$_GET['criteria']."/", "<span class='highlight'>".$_GET['criteria']."</span>", $_row['name']); 
```

这只会突出显示一个短语而不是单个关键字。因此，例如，如果文档被称为“Hello world”并且用户准确地输入了这个，它会突出显示没有问题，但是如果用户输入“world hello”，它不会突出显示任何内容。我认为采用搜索条件并使用 explode 并单独检查每个单词是个好主意，但这似乎也失败了。这是我的查询以及我如何显示结果

```
 $sql = "SELECT *
                FROM uploaded_documents
                WHERE dept_cat = 'procedures'
                AND cat =:cat 
                AND keywords REGEXP :term ";
    $result->execute(array(':cat' => $_GET['category'],':term' => $_GET['criteria']));

 //display results
 while($row = $stmt->fetch()){
    $explode_criteria = explode(" ",$_GET['criteria']);             
    foreach($explode_criteria as $key){                             
        $highlight = preg_replace("/".$key."/", "<span class='highlight'>".$key."</span>", $row['name']); 

            echo '<td><a target="_blank" href="'.$row['url'].'">'.$highlight.'</a></td>';   
                    echo '<td>'.$row['version'].'</td>';
                    echo '<td>'.$row['cat'].'</td>';
                    echo '<td>'.$row['author'].'</td>'; 

                    echo '<td>'.$row['added'].'</td>';  
                    echo '<td>'.$row['auth_dept'].'</td>';  

                    echo '<td>';
    } 
} 
```

为了篇幅的缘故，我在这里省略了代码并尽量保持最小，我一直试图将我的工作建立在以下帖子的基础上

[在 php/mysql 中突出显示搜索结果](https://stackoverflow.com/questions/2738555/highlighting-search-results-in-php-mysql)

我认为我的第一个问题是 while 循环中的 foreach 循环复制结果，但我想不出解决方法。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:16:46.890

在这段代码中：

```
//display results
while ($row = $stmt->fetch())
{
    $explode_criteria = explode(" ", $_GET['criteria']);
    foreach ($explode_criteria as $key)
    {
        $highlight = preg_replace("/" . $key . "/", "<span class='highlight'>" . $key . "</span>", $row['name']);

        echo '<td><a target="_blank" href="' . $row['url'] . '">' . $highlight . '</a></td>';
        echo '<td>' . $row['version'] . '</td>';
        echo '<td>' . $row['cat'] . '</td>';
        echo '<td>' . $row['author'] . '</td>';

        echo '<td>' . $row['added'] . '</td>';
        echo '<td>' . $row['auth_dept'] . '</td>';

        echo '<td>';
    }
} 
```

循环一直在引用`$row['name']`，所以替换完成了，但是下一次循环发生时，它正在替换原始未修改的下一个单词`$row['name']`

我认为这应该可以帮助您：

```
//display results
while ($row = $stmt->fetch())
{
    $explode_criteria = explode(" ", $_GET['criteria']);
    $highlight = $row['name']; // capture $row['name'] here
    foreach ($explode_criteria as $key)
    {
        // escape the user input
        $key2 = preg_quote($key, '/');
        // keep affecting $highlight
        $highlight = preg_replace("/" . $key2 . "/", "<span class='highlight'>" . $key . "</span>", $highlight);

        echo '<td><a target="_blank" href="' . $row['url'] . '">' . $highlight . '</a></td>';
        echo '<td>' . $row['version'] . '</td>';
        echo '<td>' . $row['cat'] . '</td>';
        echo '<td>' . $row['author'] . '</td>';

        echo '<td>' . $row['added'] . '</td>';
        echo '<td>' . $row['auth_dept'] . '</td>';

        echo '<td>';
    }
} 
```

# c# - 使用 DataContracts 从 Enum 获取值和描述

> ID：13798720
> 
> 赞同：1
> 
> 时间：2012-12-10T10:05:54.447
> 
> 标签：c#, enums

我有一份服务数据合同

```
public enum AddressType
    {
        [Description("Billing Address")]
        Billing = 0
    } 
```

如果我给出对页面的引用，那么描述就不会出现。

```
[DataContract(Name = "AddressType", Namespace = "http://schemas.datacontract.org/2004/07/MyEnums.Enums")]
public enum AddressType
{
    [EnumMember]
    Billing = 0
} 
```

如何在c#中获取值和描述？

我将传递 AddressType 和 AddressType 内的所有值，包括描述需要绑定到下拉列表。

# html - Howto CSS：两个元素，都垂直居中，浮动到相对的两侧（示例）

> ID：13798722
> 
> 赞同：1
> 
> 时间：2012-12-10T10:05:59.830
> 
> 标签：html, css

简单地说，我想要一个标题，其中有两个元素浮动到每一侧并垂直居中：

![在此处输入图像描述](../Images/ee5393ea04a0e48b6af2132ceb4f1fb9.png)

我开始使用非浮动元素进行此操作，并设法制作[了这个示例](http://jsbin.com/azaxus/1/edit)。

但是一旦我添加`float:left`或`float:right`垂直居中就会丢失（我明白为什么，因为它不再是流程的一部分）

我想知道实现这一目标的最佳方法是什么。完整的 CSS 重新设计被欣然接受。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:20:53.363

添加`text-align:right`到父 div，它使子元素向右对齐。现在添加 float:left 到`#text`

```
#parent {
  border: 1px solid black;
  display: block;
  line-height: 400px;
  height: 400px; text-align:right

}

#text {
  display: inline-block;
  border: 1px dashed black;
  height: 100%; text-align:left; float:left
}

#logo {
  border: 1px dashed black;
  height: 90%;
  line-height: 90%;
  vertical-align: middle;
  display: inline-block;
}

#logo img {
  border: 1px dashed red;
  height: 100%;
}
​ 
```

[**演示**](http://jsfiddle.net/x5sN9/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:41:34.277

垂直居中可能会很痛苦，尤其是当您不处理内联元素时。在这种情况下，我建议利用`display:table-cell`.

**HTML**

```
 <div id="wrapper">
            <div class="cell">
                <div class="content">
                    Content Goes here
                </div>
            </div>
            <div class="cell">
                <div class="content2">
                    <div class="redbox">
                    </div>
                </div>
            </div>
        </div> 
```

**CSS**

```
 #wrapper {
                color: white;
                display: table;
                border: 1px solid darkblue;
                background: blue;
                width: 100%;
            }

            .cell {
                display: table-cell;
                vertical-align: middle;
                height: 200px;
            }

            .content {
                float: left;
            }

            .content2{
                float: right;
            }

            .redbox {
                border: 2px solid darkred;
                background: red;
                height: 75px;
                width: 75px;
            } 
```

示例：http: [//jsfiddle.net/YBAfF/](http://jsfiddle.net/YBAfF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:11:53.287

这是一个示例[jsfiddle](http://jsfiddle.net/kYrCB/)和下面的相同代码。当您设置元素的高度时，您可以为嵌套元素设置相同的 line-height 并且它们将扩展至高度。垂直居中内容。

HTML

```
<div id="wrapper">
<div id="left">left</div>
<div id="right">right</div>
</div>​ 
```

CSS

```
#wrapper{
    margin:0 auto;
    width 960px;
    background: #eee;
    height:50px;
}
#left{
    float:left;
    background:#ccc;
    line-height:50px;
}
#right{
    float:right;
    background:#ddd;
    line-height:50px;
} 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:14:07.157

您应该在要居中的元素周围添加一个包装器，并将它们浮动在包装器内。像这样的东西：

HTML

```
<div class="center">
  <p class="left">Some text goes here</p>
  <img src="/path/toimage" alt="My image" class="right">
</div> 
```

CSS

```
.center {
  margin:0 auto;
  width: 400px;
}
.right {
  float: right;
}
.right {
  float: left;
} 
```

当然，这是一个非常简单的例子。您可以根据需要更改值和 CSS。

# cordova - 使用带有 PhoneGap 2.2.0 的终端创建 Android 项目后出错

> ID：13798724
> 
> 赞同：0
> 
> 时间：2012-12-10T10:06:17.790
> 
> 标签：cordova

我之前在我的 Mac 上安装了 PhoneGap 2.0.0 和 Eclipse。上周，我下载了最新的 PhoneGap 2.2.0 并在点击此链接后： http: [//docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android) 我是能够使用终端生成项目文件夹，也在 Eclipse 中，通过 New > Project > Android Project from Existing Code 指向项目

但是我却收到以下错误： [http ://www.freeimagehosting.net/mzvr8](http://www.freeimagehosting.net/mzvr8)

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:30:46.787

您的屏幕截图显示您使用的是相当旧的 Android 2.2。您可以通过启动 Android SDK 管理器来安装较新的版本。然后在项目的属性中选择较新的版本。请参阅[http://developer.android.com/sdk/installing/adding-packages.html](http://developer.android.com/sdk/installing/adding-packages.html)

# concurrency - 并发使用 MVC 应用程序的 Stack Empty 问题

> ID：13798726
> 
> 赞同：3
> 
> 时间：2012-12-10T10:06:26.427
> 
> 标签：concurrency, asp.net-mvc-4, thread-safety, renderaction

我们最近开发了一个新的 ASP.NET MVC 4 Web 应用程序 (C#/Visual Studio)。经过本地测试和调试后，我们将其部署到生产环境中，然后开始收到越来越多的健康监控邮件。这些有不同的异常消息：

*   堆栈空。
*   收藏已修改；枚举操作可能无法执行。
*   项目已添加。字典中的键：'ALL_HTTP' 正在添加的键：'ALL_HTTP'（还提到了其他键）。
*   值不在预期范围内。

例如，我们无法简单解决或重现的一系列错误类型。'Stack Empty' 是发生最多的一个，每天有 100 次（例如，对于 1-10% 的用户），所以我们专注于这个，因为其他错误似乎相关。这是部分堆栈跟踪：

```
Exception information:
Exception type: System.InvalidOperationException
Exception message: Stack empty.
...
Stack trace:    at System.ThrowHelper.ThrowInvalidOperationException(ExceptionResource resource)
at System.Collections.Generic.Stack`1.Pop()
at System.Web.WebPages.TemplateStack.Pop(HttpContextBase httpContext) 
```

如图所示，堆栈跟踪大部分完全位于 MVC 框架 (System.Web) 中。在我们自己的代码中，经常出现在某些堆栈跟踪中的唯一位置是请求 URL 的视图（.cshtml 文件），然后是 @Html.RenderAction() 调用。到目前为止，我们已经将其中很多重构为 RenderPartial() 调用。这导致堆栈跟踪中没有更多视图，尽管一些 RenderPartial 现在也给出了一些

搜索此错误表明并发/并行执行是原因。这符合我们最初无法在本地重现错误的事实，但它确实发生在生产中。我们没有进行负载测试，但现在已经能够通过同时启动大量应用程序/请求在本地开发人员系统上重现错误。然而，在我们的代码中，没有任何事情是通过显式并行指令完成的。

这似乎与 MVC 视图不是线程安全的有关。然而，很难想象没有其他人会遇到这种情况。我们每天有几千名访客，任何时候大约有 30 多个活跃用户。遗憾的是，由于谷歌排名下降（与此问题相关），这个数字现在正在下降。

有谁知道这个问题的解决方案/方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:59:42.693

我正在开发一个 ASP.NET MVC 4 应用程序，我也遇到了你提到的错误。尽管它们不同，但它们似乎具有相同的来源。在花了几个小时试图找出原因（以及大量代码更改）之后，我从头开始分析。

由于我使用的是自定义路由，并且该路由有一个处理程序，它检查几件事并访问我通过评论数据库访问开始的数据库。非常快速地打开几个浏览器选项卡（使用 IISExpress > 显示所有应用程序窗口或通过 Ctrl+单击链接）我很高兴看到所有页面都正确显示，而不是几个随机错误消息。尝试了几次以确定并得出结论，访问数据库时出现问题。

```
public class MyNewRouteHandler : IRouteHandler {

    IHttpHandler MvcHandler;

    public IHttpHandler GetHttpHandler(RequestContext requestContext) {
        MvcHandler = new MvcHandler(requestContext);

        // some checkings and
        // some database access code 
        // that was commented

        return MvcHandler;
    }
} 
```

有同事建议我在这个方法里面加了一个小线程睡眠：`GetHttpHandler`. 该行使错误再次出现，表明该问题与 DB 无关...当我这样做时，我看到该`MvcHandler`对象被定义为类属性，这可能是并发问题的根源（仅当执行多个几乎连续的访问时，才会显示问题）。将对象移动`MvcHandler`到方法内的本地对象。

```
public class MyNewRouteHandler : IRouteHandler {

    public IHttpHandler GetHttpHandler(RequestContext requestContext) {
        IHttpHandler MvcHandler = new MvcHandler(requestContext);

        // some checkings and
        // some database access code 
        // that was commented

        return MvcHandler;
    }
} 
```

并且经过测试，没有更多的错误。取消注释我所有访问数据库的代码（并进行了其他检查），但仍然没有发现更多错误。差不多3天过去了，一切仍然正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:07:29.587

这种做法`Custom Route Handler`确实解决了我的**大部分**错误，但我还有一些错误和新消息。其中一个指向我的代码行，`Custom Route Handler`所有这些都有一个共同点，即字典正在由 MVC 框架处理，所以......我还有并发问题吗？

我假设是这样，并且我的所有方法属性都被移动到了`public IHttpHandler GetHttpHandler(RequestContext requestContext)`方法中，而不仅仅是前面提到的那个。其中之一是`RouteData`集合......最后，经过 2 天，似乎没有更多错误出现。

# jquery - css 和 jquery 的布局问题

> ID：13798728
> 
> 赞同：0
> 
> 时间：2012-12-10T10:06:34.463
> 
> 标签：jquery, css

我尝试布局网站并在 Firefox 10.0.9 中遇到一个奇怪的错误。在 IE8 中一切正常。

我想要一个 2 面布局：左侧元素，高度为 100%，宽度为 200 像素。(framecontentLeft) 具有 100% 高度和最大宽度的右侧元素。（框架主要内容）

问题是，jQuery Tab 顶部栏将与完整的 framecontentLeft 高度相同。

更新小提琴：http: [//jsfiddle.net/k2Crf/20/](http://jsfiddle.net/k2Crf/20/)

更新的 CSS：

```
body, html{
height: 100%;
}
#framecontentLeft {          
float: left;
min-height: 100%;
height: auto !important;
height: 100%;        
width: 200px;
}
#framemaincontent {
height: auto !important;
min-height: 100%;
width: auto;         
} 
```

这一定是一个非常常见的错误，但我不明白。

感谢帮助。胡吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:14:36.757

我找到了错误描述：[http ://bugs.jqueryui.com/ticket/5601](http://bugs.jqueryui.com/ticket/5601)

解决方案是操作 Tab-UI 元素的 css： $(".tabs").css("float", "left");

这个对我有用。

# jquery - 图像出现然后在 chrome 中消失

> ID：13798731
> 
> 赞同：1
> 
> 时间：2012-12-10T10:06:41.107
> 
> 标签：jquery, google-chrome

在我的网站中，我使用 jQuery 更改了包含图像的 div：

```
 <div class='bar1' >
    <div class='blocks'> <a href='#' >Home</a></div>
    <div class='blocks'> <a href='#'>About</a></div>
    <div class='blocks'><a href='#'>Zones</a></div>
    <div class='blocks'><a href='#'>Players</a></div>
 </div>
<div class='block-top-container'>
   <div class='scroll-block'>
      <img src='ban1/1.jpg' alt ='' />
   </div>
   <div class='scroll-block'>
     <img src='ban1/2.jpg' alt ='' />
   </div>
   <div class='scroll-block'>
      <img src='ban1/10.jpg' alt ='' />
    </div>
</div> 
```

jQuery代码在点击的链接上向左移动图像

```
$(window).load(function() {

    $(".bar1  a").click(function(e){

    var $this = $(this);
    var index = $this.parent().index();
    var left = (index * $(" .scroll-block ").width());

    $(" .block-top-container ").animate({ marginLeft: -(left) }, 500);

    });

 }); 
```

该错误发生在 Chrome（版本 23）中。图像加载，但页面加载完成后图像消失，我们看到一个损坏的图像图标。

当页面加载图像出现时，我在 Chrome 开发人员工具中检查了网络选项卡，但页面加载完成后图像消失，在网络选项卡中显示图像获取失败错误。

![错误图片](../Images/dec518ec172937a5863a98e6d8a8ae05.png)

# jquery - 从另一个页面加载内容时，jquery 对话框不会打开第二个

> ID：13798735
> 
> 赞同：0
> 
> 时间：2012-12-10T10:07:04.920
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我有一个 jQuery UI 对话框，它从另一个页面加载内容。对话框第一次打开，但不是第二次。如果不将任何内容加载到对话框中，它也会第二次工作。

请参阅[jsFiddle](http://jsfiddle.net/94jgT/)。[它有效，错误必须在其他地方]

HTML：

```
<a class="click" href="form.php">form</a>
<a class="click" href="data.php">data</a>
<a class="click" href="user.php">user</a>
<div id="dialog"></div> 
```

JavaScript：

```
$(document).ready(function() {
    $("#dialog").dialog({
        autoOpen: false,
        closeOnEscape: true
    });

    $('.click').click(function(event) {
        event.preventDefault();
        $('#dialog').load(this.href);
        $("#dialog").dialog('open');
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T06:07:04.793

尝试在加载的完成回调中打开对话框 - 默认情况下加载将异步运行，因此在您打开时它可能不会完成 - 这可能是它搞砸的原因（尽管很难说什么时候示例作品:-)）

```
var $dialog;
$(document).ready(function() {
  $dialog = $("#dialog").dialog({
    autoOpen: false,
    closeOnEscape: true
  });

  $('.click').click(function(event) {
    event.preventDefault();
    $dialog.load(this.href, function() {
     $dialog.dialog('open');
    });
  });
});​ 
```

# maven - Maven Objenesis 相关的构建问题

> ID：13798738
> 
> 赞同：0
> 
> 时间：2012-12-10T10:07:14.040
> 
> 标签：maven, build

我在做 mvn install 时遇到了这个问题

```
[ERROR] BUILD ERROR

[INFO] ------------------------------------------------------------------------

[INFO] Error building POM (may not be this project's POM).
Project ID: org.objenesis:objenesis:jar:1.0
Reason: Cannot find parent: org.objenesis:**objenesis-parent** for project:    
org.objenesis:objenesis:jar:1.0 for project org.objenesis:objenesis:jar:1.0 
```

我查找了每个 maven 存储库，例如 mvnrepository、repo1.maven 等，但在任何地方都找不到这个对象父 Jar。即使是 Objenesis 站点也只有 objenesis Jar 而没有父 Jar。

是否需要对象父 Jar？（我正在使用 JMock 模拟一些类（不是接口），因此 JMock Legacy 对 Objenesis 的依赖）

我是否在 pom 配置中遗漏了一些东西，以便项目可以在没有对象父 Jar 的情况下构建？

```
 <dependency>
        <groupId>org.jmock</groupId>
        <artifactId>jmock-junit4</artifactId>
        <version>2.5.1</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.jmock</groupId>
        <artifactId>jmock</artifactId>
        <version>2.5.1</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.jmock</groupId>
        <artifactId>jmock-legacy</artifactId>
        <version>2.5.1</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.objenesis</groupId>
        <artifactId>objenesis</artifactId>
        <version>1.0</version>
        <scope>test</scope>
    </dependency> 
```

# session - CQRS 和会话

> ID：13798739
> 
> 赞同：2
> 
> 时间：2012-12-10T10:07:14.100
> 
> 标签：session, cqrs

我是 CQRS 的忠实粉丝，但我仍然无法弄清楚：您如何描述 CQRS 中的登录过程？因为它是一个查询（检查凭据）和一个命令（创建内存中/sql/任何会话状态）。在这种情况下，我们不能有异步命令，登录过程必须是同步的。

或者，CQRS 中可能不存在会话的概念，因为它暗示了某种状态？

雷米

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T09:13:09.103

为什么首先要使用 CQRS 进行身份验证？这真的很不合适。

您可能会用某种身份验证/授权来包装您的命令处理程序。

请记住，CQRS 并非无处不在。它将用于有意义的有界上下文。用户和会话管理通常不是其中之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T13:58:16.510

这完全取决于您的情况。

问题是：登录在您的应用程序中*意味着*什么？

如果它只是意味着用户通过了身份验证并且会话cookie存储在他的浏览器中，那么您只需阅读即可实现。例如，您的登录过程可能主要是由 Ajax 进行登录调用的客户端 JavaScript 代码；登录调用将简单地从读取存储（或 LDAP 存储或其他）读取并返回真/假结果。然后接收客户端将创建 cookie，用户现在被视为已登录。cookie 甚至可能包含用户名信息。

如果登录意味着登录的记录作为事件存储在数据库中，那么登录当然意味着执行`Command`. 在这里，我想创建一个同步的`Command`（并且可能是一个单独的登录服务，毕竟这是管道）是有意义的。

# php - 图片url的htaccess重写规则

> ID：13798740
> 
> 赞同：2
> 
> 时间：2012-12-10T10:07:16.270
> 
> 标签：php, regex, apache, .htaccess, mod-rewrite

我有网址： `http://www.mywebsite.com/i/1Q2GmFuFdZ.jpg`

我想重写一个规则，使它进入文件`image.php?id=1Q2GmFuFdZ.jpg`

在我的 PHP 文件中，我有这个

```
<?PHP
print_r($_GET);
?> 
```

这就是我的 htaccess

```
RewriteEngine On
RewriteRule ([a-zA-Z0-9]+[\.]+[a-z]{3})$ image.php?id=$1 
```

这是我得到的输出：

```
Array ( [id] => image.php ) 
```

我不确定我做错了什么。我不是正则表达式专家，但我知道基础知识。

谢谢

编辑：忘记在表达式中添加 0-9

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T10:18:23.697

mod_rewrite 规则以递归方式应用。这是您请求时发生的情况`1Q2GmFuFdZ.jpg`：

*   `1Q2GmFuFdZ.jpg`匹配模式，变成`image.php?id=1Q2GmFuFdZ.jpg`
*   由于文件名已更改，因此使用重写的 URL 执行另一次迭代
*   `image.php` ***也匹配模式***并重写为`image.php?id=image.php`
*   文件名或目录未更改，因此不再执行迭代
*   最终结果：`image.php?id=image.php`

解决方案：添加这条规则：

```
RewriteEngine On
RewriteRule image\.php$ - [L]
RewriteRule ([a-zA-Z0-9]+\.[a-z]{3})$ image.php?id=$1 
```

第二条规则起到手刹的作用。您还需要调整规则#3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:16:27.433

您的重写规则是错误的。它应该是这样的：

```
RewriteRule ^i/(.+)$ /image.php?id=$1 [L,NC,QSA] 
```

# javascript - 设置 jqgrid 变量

> ID：13798745
> 
> 赞同：0
> 
> 时间：2012-12-10T10:07:26.170
> 
> 标签：javascript, oop

我在我的大部分页面上都使用了 jqgrid，我想为我的页面实现设置。我在我的对象中定义了设置，见下文。我想知道，是否有办法更改或覆盖设置，而不是映射每个设置。

```
var myGridSettings={
        pager: $("#pager"),
        rowNum: 10,
        width:750,
        rowList: [5, 10, 20, 50],
        viewrecords: true,
        imgpath: '',
        loadonce: true,
        caption: gridCaptionName,
        ignoreCase: true,
} 
```

示例中使用的代码 [http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html)

Java 脚本代码...

```
jQuery("#list2").jqGrid({
    url:'server.php?q=2',
    datatype: "json",
    colNames:['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes'],
    colModel:[
        {name:'id',index:'id', width:55},
        {name:'invdate',index:'invdate', width:90},
        {name:'name',index:'name asc, invdate', width:100},
        {name:'amount',index:'amount', width:80, align:"right"},
        {name:'tax',index:'tax', width:80, align:"right"},      
        {name:'total',index:'total', width:80,align:"right"},       
        {name:'note',index:'note', width:150, sortable:false}       
    ],
    rowNum:10,
    rowList:[10,20,30],
    pager: '#pager2',
    sortname: 'id',
    viewrecords: true,
    sortorder: "desc",
    caption:"JSON Example"
}); 
```

这是为了让我对所有页面进行通用设置，并确保我的所有设置都相同。

我知道的唯一方法会起作用，但是这个解决方案在每个页面上都涉及大量重复

```
 jQuery("#list2").jqGrid({
        url:'server.php?q=2',  // not using my settings object
        datatype: myGridSettings.datatype,   // using my settings object
        rowNum:myGridSettings.rowNum,
        rowList:myGridSettings.rowList,
        pager: myGridSettings.pager,        
        viewrecords: myGridSettings.viewrecords,      
    }); 
```

有没有更好的方法，用我的设置设置 jqgrid 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:15:08.577

您可以使用`$.jqgrid.defaults`. 参见例如这篇文章：[http](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options) ://www.trirand.com/jqgridwiki/doku.php?id=wiki:options 。

# php - 我不知道如何在 php 中获取序列化数据

> ID：13798748
> 
> 赞同：0
> 
> 时间：2012-12-10T10:07:37.630
> 
> 标签：php, html, forms, jquery

我的html表单是：

```
<form id="myform" action="" method="post" >
    <input id="firstname" name="firstname" type="text" placeholder="FIRST NAME" autofocus><br>
    <input id="lastname" name="lastname" type="text" placeholder="LAST NAME"><br>
    <input id="gender" name="gender" type="text" placeholder="GENDER" ><br>
    <input id="email" name="email" type="email" placeholder="EMAIL"><br>
    <input id="date" name="date" type="date" placeholder="JOINING DATE" ><br>
    <input id="designation" name="designation" type="text" placeholder="DESIGNATION"><br>
    <input id="username" name="username" type="text" placeholder="USER NAME" ><br>
    <input id="password1" name="password1" type="password" placeholder="PASSWORD" ><br>
    <input id="password2" name="password2" type="password" placeholder="CONFORM PASSWORD" ><br>
    <input type="button" id="submit" value="SUBMIT" />
</form> 
```

在这个程序中，我使用 ajax 进行验证。为此，我正在序列化表单。

```
data:$("#myform").serialize(), 
```

而且我不知道如何在 PHP 中反序列化它。任何人都可以解释在 PHP 中反序列化的代码，我使用 html5 来编写表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:35:22.830

您没有向我们展示完整的 $.ajax 请求代码：它可能是 GET 或 POST 请求。

来自[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)文档

> 默认情况下，Ajax 请求使用 GET HTTP 方法发送。如果需要 POST 方法，可以通过设置 type 选项的值来指定该方法。

因此，如果是 GET 请求，您应该在 PHP 代码中检查 $_GET。或者只是检查 $_REQUEST 数组。并访问其他答案中显示的表单值：例如 $_GET["firstname"]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:30:32.367

我想问题在于提交您的表格。如果您通过 AJAX 发布，请检查[jquerypost 。](http://api.jquery.com/jQuery.post/)否则试试

```
<input type="submit" id="submit" value="SUBMIT" /> 
```

代替

```
<input type="button" id="submit" value="SUBMIT" /> 
```

`$_POST['firstname']`一旦成功发布，我就可以毫无问题地访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:10:55.987

使用`unserialize()`php函数。

`unserialize()`获取单个序列化变量并将其转换回 PHP 值。

[http://php.net/manual/en/function.unserialize.php](http://php.net/manual/en/function.unserialize.php)

但在你的情况下..因为你正在发布数据，你可以只使用具有对应名称的发布数据..

```
 $firstname=$_POST['firstname'];
 $email=$_POST['email'];
 ..... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:11:48.653

所有序列化所做的就是将表单字段转换为可以发送到服务器的 url 字符串。

您对它的处理方式与对提交的常规表单的处理方式相同：

```
$firstName = $_POST['firstname'];
.... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T10:09:56.597

由于您的方法是`post`，您的变量应该被读取为任何其他后变量：

```
$firstname=$_POST['firstname'];
$lastname=$_POST['lastname']; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-10T10:44:39.280

数据是从`$_POST`变量中检索的，不需要反序列化...因为在您发送 ajax 请求时，序列化的数据已被反序列化为数组

# sql - Postgres SQL 中的查找模式

> ID：13798750
> 
> 赞同：3
> 
> 时间：2012-12-10T10:07:41.370
> 
> 标签：sql, postgresql

我有一张这样的桌子-

`cdr_pkey as serial, calldate as timestamp, src as text, duration as bigint`

我需要使用 SQL 查询在“src”列中找到前 10 个最常见的数字，以及表中出现的次数。

我尝试通过导出到 Excel 并运行模式功能，但记录约为 700 万，因此效率不高。

PS。我正在使用 PostreSQL 9.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:31:52.757

```
select 
    src as text,
    count(*) as total
from t
group by 1
order by total desc
limit 10; 
```

# android - 即使在静音模式下如何启用媒体声音

> ID：13798758
> 
> 赞同：3
> 
> 时间：2012-12-10T10:08:16.833
> 
> 标签：android, media-player

即使在静音模式下如何启动声音？我的原始文件夹中有我的音频文件。我已经编写了一些代码，但是当我进入 android 的声音设置时，铃声和闹钟是唯一更改为最大但不是媒体部分的设置。这是我的代码

```
public void playSound(Context context)
{
    AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
    int maxVolumeAlarm = audioManager.getStreamMaxVolume(AudioManager.STREAM_ALARM);
    int maxVolumeRing = audioManager.getStreamMaxVolume(AudioManager.STREAM_RING);
    audioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
    audioManager.setStreamVolume(AudioManager.STREAM_ALARM, maxVolumeAlarm,AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);
    audioManager.setStreamVolume(AudioManager.STREAM_RING, maxVolumeRing,AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);;
    MediaPlayer mMediaPlayer;
    mMediaPlayer = new MediaPlayer();
    mMediaPlayer = MediaPlayer.create(context, R.raw.puff);
    mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    mMediaPlayer.setLooping(false);
    mMediaPlayer.start();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T10:28:51.320

现在好了，我用了这段代码

```
AudioManager audioManager = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
    int maxVolumeMusic = audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
    audioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
    audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, maxVolumeMusic,AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE); 
```

# .net - specflow 以编程方式获取场景描述

> ID：13798760
> 
> 赞同：0
> 
> 时间：2012-12-10T10:08:24.077
> 
> 标签：.net, specflow

我使用 specflow`nunitexecutionreport`命令生成我的测试的 html 报告，并将其复制到一个文件夹中，在该文件夹中我有时间戳、报告、生成的 html 和成功或失败时截取的屏幕截图（全部以编程方式完成）。但是该文件夹的html报告没有当时的特征文件文本。我想知道如何，对于每个测试，我可以在运行时获取功能文件文本，以便我可以将其复制到该文件夹​​。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:44:21.607

*这不是一个真正的答案，但我需要给出一个格式化的回复，所以稍后需要编辑*

你真的需要通过重写轮子来实现这一点，或者至少你真的需要重写测试运行程序吗？

例如，以下输出来自[TeamCity](http://www.jetbrains.com/teamcity/)在 specflow 生成的测试上运行[NUnit 。](http://confluence.jetbrains.net/display/TCD7/NUnit+Support)

```
[20:29:38][MyCode.Tests.dll] MyCode.Tests.MyFeature.Reload
[20:29:38][MyCode.Tests.MyFeature.Reload] Given I have a config reloader
[20:29:38][MyCode.Tests.MyFeature.Reload] -> done: ConfigReloadTests.GivenIHaveAConfigReloader() (0.1s)
[20:29:38][MyCode.Tests.MyFeature.Reload] And a config A that will unload
[20:29:38][MyCode.Tests.MyFeature.Reload] -> done: ConfigReloadTests.GivenAConfig("A") (0.0s)
[20:29:38][MyCode.Tests.MyFeature.Reload] And a config B that wont unload
[20:29:38][MyCode.Tests.MyFeature.Reload] -> done: ConfigReloadTests.GivenAConfigThatWontUnload("B") (0.0s)
[20:29:38][MyCode.Tests.MyFeature.Reload] When I reload my configs
[20:29:38][MyCode.Tests.MyFeature.Reload] -> done: ConfigReloadTests.WhenIReloadMyConfigs() (0.3s)
[20:29:38][MyCode.Tests.MyFeature.Reload] Then I should have 2 instances
[20:29:38][MyCode.Tests.MyFeature.Reload] -> done: ConfigReloadTests.ThenIShouldHaveInstances(2) (0.1s) 
```

现在这是一个开箱即用的标准结果，设置可能需要十五分钟。它完全支持，并且免费提供。还是您需要一些我在您的问题中遗漏的自定义内容？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:45:00.127

**如果**您可以保证您使用 NUnit 来运行 Specflow 测试，那么您可以编写一个[NUnitAddin](http://nunit.com/index.php?p=nunitAddins&r=2.4.1)，它可以在运行时获取 Specflow 输出。我以前为[个人项目](http://alski.net/post/2011/11/03/RedGreenRefactor-v01.aspx)做过这个。

你注册一个班级

```
[NUnitAddin(
    Name = "RedGreenRefactor.DatCapture.NUnitAddIn", 
    Description = "Captures both test data and test output so that SpecFlow steps can be correctly consolidated by RedGreenRefactor",
    Type=ExtensionType.Core)]
public class Addin : IAddin
{       
    public bool Install(IExtensionHost host)
    {
       IExtensionPoint listeners = host.GetExtensionPoint("EventListeners");
        if ( listeners == null )
            return false;

        listeners.Install( new NUnitCapture() );
        return true;
    }       
} 
```

你的插件的核心看起来像这样

```
public class NUnitCapture : NUnit.Core.EventListener 
{
...
public void TestOutput(NUnit.Core.TestOutput testOutput)
{
    var text = testOutput.Text.Trim();
    Debug.WriteLine(String.Format("[{0}]", text));
    if (text.StartsWith("Given")
        || text.StartsWith("When")
        || text.StartsWith("Then")
        || text.StartsWith("And"))
        {
            CreateStep(testOutput);
            return;
        }

        if (text.StartsWith("-> done"))
        {
            SetStepToSuccess();
            return;
        }

        if (text.StartsWith("-> error"))
        {
            SetStepToFail();
            return;
        }

        if (text.StartsWith("-> No matching step definition found for the step."))
        {
            SetStepToPending();
            return;
        }
    } 
```

# android - 从 URI 制作图像作为布局的背景

> ID：13798763
> 
> 赞同：0
> 
> 时间：2012-12-10T10:08:33.963
> 
> 标签：android, android-layout

我有图像的 URI。图像存储在 sdcard 中。使用 URI 如何使此图像作为我的相对布局的背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:18:18.997

尝试：

```
File imgFile = new  File(“/sdcard/Images/test_image.jpg”);  
if(imgFile.exists()){

    Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
    Drawable drawable = new BitmapDrawable(getResources(), bitmap);
    layout.setBackground(drawable);
} 
```

仅供参考，您可以`getExternalStorageDirectory()`代替 SD-Card 的静态路径

# c# - 使用 c# 在 Asp.net 中使用 formAuthentication 登录

> ID：13798766
> 
> 赞同：0
> 
> 时间：2012-12-10T10:08:35.800
> 
> 标签：c#, asp.net

如何在 ASP.NET Web 表单中使用 FormAuthenticate 方法登录或进行身份验证，以及登录后如何在每个页面上检查用户是否通过身份验证。

请给我一个示例，说明如何在登录页面中使用表单身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:36:02.687

> [如何：实现简单表单身份验证](http://msdn.microsoft.com/en-us/library/xdt4thhy(v=vs.100).aspx)
> 
> 该页面显示用户的经过身份验证的身份，该身份由 FormsAuthentication 类设置，可在 ASP.NET 页面中作为**`Context.User.Identity.Name`**属性使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:39:35.993

1) [FormsAuthentication 类](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.aspx)- 验证用户

```
public void Login_OnClick(object sender, EventArgs args)
{
   if (Membership.ValidateUser(UsernameTextbox.Text, PasswordTextbox.Text))
   {
      FormsAuthentication.RedirectFromLoginPage(UsernameTextbox.Text, NotPublicCheckBox.Checked);
   }
   else
     Msg.Text = "Login failed. Please check your user name and password and try again.";
} 
```

2)[如何：实现简单表单身份验证](http://msdn.microsoft.com/en-us/library/xdt4thhy%28v=vs.100%29.aspx)

3）检查用户是否登录

```
if(User.Identity.IsAuthenticated)
{
    //user is logged in
}
else
{
    //user is not logged in
} 
```

# iphone - 导航栏高度是 43 点？

> ID：13798769
> 
> 赞同：0
> 
> 时间：2012-12-10T10:08:48.713
> 
> 标签：iphone, titanium-mobile

根据每个在线资源，导航栏高度应为 44 点（在 Retina 屏幕上为 88 像素）。

事实上，当我截取我的 iPhone（见下文）时，状态栏的高度是 20pts，导航栏的高度是 44pts，但它被分成了 1pt 白色像素和 43 个“蓝色”像素：

[![iPhone原版](../Images/d4846913ce93ede43d27d3c7706970bb.png)](https://i.stack.imgur.com/Oscjb.png)

当我开发我的应用程序并创建一个 NavBar（标准）时，StatusBar 和 NavBar 之间没有“白色”像素，因此 NavBar 的高度是 43pts（而不是 44pts）。这使内部窗口高 1pt：

[![我的版本](../Images/710412e4c7496f20dc140d30e5e13a2e.png)](https://i.stack.imgur.com/HUh49.png)

我的整个代码只有 5 行（app.js）：

```
var mainWindow = Titanium.UI.createWindow();
var innerWindow = Titanium.UI.createWindow({ title : "Settings" });
var navGroup = Titanium.UI.iPhone.createNavigationGroup({ window : innerWindow });
mainWindow.add(navGroup);
mainWindow.open(); 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:47:01.767

也许有一天它会对某些人有所帮助，如果您在创建 NavigationGroup 时添加“top : 0”，您将获得额外的像素线 :)

```
var navGroup = Titanium.UI.iPhone.createNavigationGroup({ top : 0, window : innerWindow }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:33:19.893

从 iOS 6 开始，导航栏下方有一条 1 点阴影线。这可能是您的问题的原因。

# javascript - 如果它由先前的管道解决，则无法拒绝使用管道函数延迟的 jquery

> ID：13798770
> 
> 赞同：0
> 
> 时间：2012-12-10T10:08:48.867
> 
> 标签：javascript, jquery, jquery-deferred

代码是非常直接的前言：

```
 var handleNextPressedDeferred = $.Deferred();
  $('input:button').live('click',function(){
    console.log('resolving');
    return handleNextPressedDeferred.resolve();
  });

  handleNextPressedDeferred.pipe(function(){
    console.log('rejecting');
    return $.Deferred().reject();
  });

  var handleNextPressedPromise = handleNextPressedDeferred.promise();

  handleNextPressedPromise.done(function(){
    console.log('done');
  });
  handleNextPressedPromise.then(function(){
    console.log('then');
  });
  handleNextPressedPromise.fail(function(){
    console.log('fail');
  }); 
```

在原始按钮单击解决延迟后，我有兴趣通过管道函数拒绝它。

单击按钮时的预期结果是：

*   解决
*   拒绝
*   失败

单击按钮时的实际结果是：

*   解决
*   拒绝
*   完毕
*   然后

我在这里没有正确理解什么？我已经尝试过一百万种变体，但无法按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T16:04:36.683

`.pipe`创建一个新的`Deferred`. 在您的代码中，您正在“连接” `.done`，`.then`并且连接`.fail`到未拒绝的前一个 Deferred，这就是为什么执行`.done`and`.then`而不是`.fail`.

尝试替换这个：

```
handleNextPressedDeferred.pipe(function(){
    console.log('rejecting');
    return $.Deferred().reject();
});

var handleNextPressedPromise = handleNextPressedDeferred.promise(); 
```

经过

```
var handleNextPressedPromise = handleNextPressedDeferred.pipe(function(){
    console.log('rejecting');
    return $.Deferred().reject();
}).promise(); 
```

它会起作用。

[在这里提琴](http://jsfiddle.net/bfr8E/)

**编辑：**

我看到你在你的代码中`then`都使用了。`pipe`我不知道您使用的是哪个版本的 jQuery，但请注意，自 jQuery 1.8 以来，它们是严格等效的，并且都返回一个新的 Deferred `pipe`。不再是and的语法糖。`then``then``.done``.fail`

有关更多信息，请参阅[jQuery 延迟和承诺 - .then() 与 .done()](https://stackoverflow.com/questions/5436327/jquery-deferreds-and-promises-then-vs-done)和[pipe() 以及 then() 文档与 jQuery 1.8](https://stackoverflow.com/questions/12011925/pipe-and-then-documentation-vs-reality-in-jquery-1-8)中的现实。

# node.js - ZMQ 套接字队列

> ID：13798773
> 
> 赞同：1
> 
> 时间：2012-12-10T10:09:12.597
> 
> 标签：node.js, zeromq

我对 ZMQ 很陌生，我正在使用 NodeJS 绑定。我有一个使用`PUSH/PULL`套接字的应用程序。一方面，我`PUSH`向一些节点发送数据，这些节点通过`PULL`套接字接收并处理它。有时我必须杀死我的应用程序的一个或多个节点，并且这些节点可能在套接字中仍有一些数据`PULL`需要处理。我不想丢失这些数据，所以我想知道是否有办法访问 ZMQ 的`PULL`套接字队列来检查是否还有消息要处理。

我实际上在 ZMQ 和 NodeJS 绑定的规范中找不到任何东西，所以也许我把整个概念弄错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:01:51.563

如果您杀死一个进程，那么该进程缓冲区中的任何数据都将丢失。

与其强行终止进程，不如始终找到一种允许进程正常关闭的方法。在这里，您可以向 PULL 套接字发送“KILL”消息；然后该进程可以读取它并在收到它时退出。如果您可以刷新套接字缓冲区（取决于是否还有其他进程仍在发送给它），您可以这样做，然后在没有更多消息要读取时退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:31:16.713

我正在发布我找到的解决方案。这不是一个真正的解决方案，因为我没有使用 ZMQ 套接字来检查队列中是否有更多消息，这只是我想到的一种解决方法/黑客使事情正常工作。我没有时间自己编写队列处理，所以这是我解决问题的方法：

每当进程接收到要处理的消息时，它们都会通过`new Date().getTime()`. 每当一个进程需要被杀死`kill`时，就会向它发送一条消息。当进程接收到消息时，它开始超时`setInterval`。每隔`x`几秒（我放 10，可能或多或少）超时触发一个函数，检查最后收到的消息是否足够旧（需要一个时间戳，用最后一个保存的消息减去这个 ts，如果结果大于`y`，在我的情况下是 100 秒，它已经足够老了）。如果是，则意味着没有收到更多消息（队列中没有更多消息），因此它会终止进程，否则什么也不做。

# python - python 将使用哪些端口来发送 html 请求？使用 urllib 或 urllib2

> ID：13798774
> 
> 赞同：1
> 
> 时间：2012-12-10T10:09:28.777
> 
> 标签：python, http, port, urllib

我正在使用 webpy 制作一个小型网站。当我想使用 OAuth 时，发现防火墙会阻止对任何站点的 http 请求，我什至无法使用 IE 浏览互联网。

所以我要求管理员为我打开一些端口，但我不知道python或IE将使用哪些端口来发送http请求。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T10:13:58.293

我假设您正在谈论远程端口。在这种情况下，只需告诉管理员打开标准 Web 端口即可。真的，如果您的管理员不知道如何使 IE 能够通过防火墙工作，那么他就没有希望了。我建议走到街上随机的人面前说“80 和 443”，直到有人抬头，然后解雇你的管理员并雇用那个人；他不能更糟了。

如果您的管理员*确实*知道他在做什么，并且希望您使用 HTTP 代理而不是直接连接，请让他在 IE 中为您设置代理，查看他使用的设置，然后回到这里并搜索如何在 Python 中使用 HTTP 代理（对此有很多答案），如果遇到困难，请寻求帮助。

如果你在谈论本地端口，因为你有一个疯狂的防火墙，它们会从一些大范围内随机挑选出来。如果你想覆盖每一个常见的操作系统，你需要打开所有的1024-65535，虽然如果你只需要处理单个平台，大多数使用比这更小的范围，如果机器不会做除了运行你的程序之外，大多数人都有办法将其限制在更小的范围内（例如，Windows 上小至 255 个端口）。谷歌“临时端口”了解详情。

如果您需要限制本地端口，关键是在调用[`bind`](http://docs.python.org/2/library/socket.html#socket.socket.bind)之前先调用您的套接字`connect`。如果您认为您在谈论本地端口，那么您可能错了。去问你的管理员（或你刚雇用的新管理员）并确定。但如果你是……</p>

如果您正在使用`urllib`/ `urllib2`，它没有任何方法可以做您想做的事，所以您不能再这样做了。您可以下拉到[`httplib`](http://docs.python.org/2/library/httplib.html#httplib.HTTPConnection)，它可以让您传递`source_address`一个`(host, port)`元组，它将在连接之前用于绑定套接字。它并不像您使用的那么简单，但它比从头开始实现 HTTP 容易得多。

您可能还想查看[requests](http://python-requests.org)，我知道它有自己的[原生 OAuth](http://docs.python-requests.org/en/latest/user/quickstart/#oauth-authentication)支持，并且可能有一种指定源地址的方法。（我没看过，但我通常发现每当我想知道是否可以做 X时，它可以，并且`requests`以我想到的最明显的方式......）什么时候很乱，所以移植东西通常很容易。`requests``urllib2``urllib2``urllib2`

无论如何，无论您如何执行此操作，您都必须考虑一次只能将一个套接字绑定到同一个本地端口的事实。那么，如果两个程序同时运行，并且它们都需要建立出站连接，而您的管理员只给了您一个端口，会发生什么？其中之一将失败。这可以接受吗？

如果没有，您真正需要做的是打开一系列端口，并编写`random.shuffle`在该范围上执行 a 的代码，然后尝试`bind`它们直到成功。这意味着您将需要一个 HTTP 库，它可以让您输入套接字工厂或预先打开的套接字，而不是仅仅指定一个端口，其中大多数都没有，这可能意味着您将破解`httplib`资源。

如果一切都失败了，您始终可以设置一个本地代理，该代理在向外代理时绑定到您想要的任何源端口（或端口范围）。然后你可以直接使用你最喜欢的高级库，并连接到本地代理，防火墙无法知道代理背后发生了什么。

如您所见，这并不容易。这主要是因为您实际上很少这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-10T10:12:31.830

通常，当一个程序想要使用一个端口但不关心它有哪个数字时，它会使用一个“[临时端口](http://en.wikipedia.org/wiki/Ephemeral_port)”。这是典型的客户端应用程序，其中远程端口是固定的（由服务器），但本地端口没有任何区别。

通常，防火墙将允许来自任何端口的传出连接，只是阻止与未知端口的传入连接，理论上应该允许发出传出请求的内部机器决定什么是正确的，并且不良行为者都在“公共”方面。

您可能会发现您的管理员要求您使用“HTTP 代理”。如果是这样，这里是我想你可以移植到 Python 的 Ruby 的说明：[Ruby and Rails - oauth and http proxy](https://stackoverflow.com/questions/1153488/ruby-and-rails-oauth-and-http-proxy)

# jquery - 如何在kendoGrid中为双数设置逗号

> ID：13798777
> 
> 赞同：4
> 
> 时间：2012-12-10T10:09:40.540
> 
> 标签：jquery, kendo-ui

```
$("#kendoGridView").kendoGrid({
                            width: 1500,
                            dataSource: data.d,
                            resizable: true,
                            rowTemplate:
                            height: 790,
                            dataBound: dbGrid,
                            selectable: true,
                            columns: [
                                            { title: 'Revenue', field: 'Revenue', width: '20%', sortable: true },
                                            { title: 'postals', field: 'postals', width: '12%', sortable: true },
                                            { title: 'MQC', field: 'MQC', width: '12%', sortable: true },
                                      ]
                        }); 
```

我正在将数据库中的值绑定到 kendoGrid。我想为网格中的所有列号设置逗号分隔符（例如 458690 到 4,58,690）。我已经阅读了 kendoui 中的 NumberFormating 概念，但我没有足够的信息。我怎么能放。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:30:59.017

这取决于您使用的文化，但基本上，您只需`format`根据[文档](http://docs.kendoui.com/getting-started/framework/globalization/numberformatting)在列中添加一个字段：

```
$("#kendoGridView").kendoGrid({
    width: 1500,
    dataSource: data.d,
    resizable: true,
    rowTemplate:
    height: 790,
    dataBound: dbGrid,
    selectable: true,
    columns: [
        // Here I have added the format field
        { title: 'Revenue', field: 'Revenue', width: '20%', sortable: true, format: "{0:c3}" },
        { title: 'postals', field: 'postals', width: '12%', sortable: true },
        { title: 'MQC', field: 'MQC', width: '12%', sortable: true },
    ]
}); 
```

我创建了这个小提琴：http: [//jsfiddle.net/AHCbq/](http://jsfiddle.net/AHCbq/)。

* * *

**编辑 ：**

似乎即使使用正确的文化，一些十进制字段在网格中也没有正确解释，我们不能应用自定义格式。

为了解决这个问题，我们必须创建一个自定义解析器，以强制将该字段视为十进制字段。我已经更新了我以前的小提琴：http: [//jsfiddle.net/AHCbq/7/](http://jsfiddle.net/AHCbq/7/)。

这是通过在`datasource.schema.parse`其中添加解析器来实现的，将字符串转换为数字：

```
parse : function(data) {
    $.each(data.d.results, function(i, val) {
        // Here I convert the string in a decimal number
        val.Freight = +val.Freight;
    });
    return data;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:51:54.600

您可以尝试[为您的列使用模板](http://docs.kendoui.com/api/web/grid#columnstemplate-string)并将其与[kendo.format](http://docs.kendoui.com/api/framework/kendo#format)方法结合使用。

例如

```
 columns: [
     {
         field: "Salary",
         template: '#= kendo.format("{0:c}",Salary) #'
    }
 ] 
```

[你可以使用这里](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)的大部分东西，该方法的灵感来自 C# 方法。

# java - 图表，服务器端还是客户端？

> ID：13798779
> 
> 赞同：5
> 
> 时间：2012-12-10T10:09:51.850
> 
> 标签：java, charts, highcharts, jfreechart, fusioncharts

## 客户端图表或服务器端图表？

（我看过一些基于这个主题的问题，但没有一个给出结论。）

我目前正在评估客户端图表（javascript 图表）。
我看到很多文章说客户端图表同样好。
背后的主要原因是它节省了服务器之旅。现在切换到客户端图表应该需要一些原因。一些统计数据。

*   我的 Web 应用程序涉及大量数据操作。
*   在很大程度上需要在图表上进行客户端交互。

**在性能方面**使用客户端和服务器端之间的**确切区别**是什么。**一个比另一个有** 什么优势？

 ***** * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T10:49:35.127

您选择的技术主要取决于创建图表时形成的 CPU 与 I/O 比率：

*   从小数据生成的图表，例如饼图，是客户端渲染的理想选择；只需发送六个数据点，让客户端渲染图表，而不是在服务器上渲染和发送 30KB 的图像。

*   从大量数据点生成的图表应该在服务器上呈现；向客户端发送 200 万个数据点进行渲染既慢*又*昂贵——带宽不是免费的。

通常，您应该针对较少的带宽使用进行优化，以降低运营成本并使您的服务更具响应性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:18:49.790

HighCharts 是一个非常流行的 javascript 图表库[http://www.highcharts.com/](http://www.highcharts.com/)图表在浏览器客户端呈现，但您要处理的数据应该来自您的服务器。他们的演示包括一个 AJAX 加载的数据图表[http://www.highcharts.com/demo/line-ajax](http://www.highcharts.com/demo/line-ajax)

Zendesk 正在使用 highcharts。性能将来自您发送到图表的数据量、处理方式以及服务器环境设置的组合。****

# prolog - 在序言中查找所有统一

> ID：13798787
> 
> 赞同：1
> 
> 时间：2012-12-10T10:10:14.270
> 
> 标签：prolog, unification, prolog-findall

我在 PROLOG 中编写了我的第一个简单代码：

```
is_beginning([], _).
is_beginning([FirstLetterB|RestWordB], [FirstLetterW|RestWordW]) :-
   FirstLetterB == FirstLetterW,
   is_beginning(RestWordB, RestWordW). 
```

它旨在找出 is_beginning 的第一个参数是否等于第二个开始。好吧，恕我直言，它可以很好地回答问题，但现在我想知道是否有可能获得定义的第二个参数的所有可能答案。例如。为了

```
is_beginning(Answers, [a,b,c]); 
```

我希望得到 [], [a], [a,b], [a,b,c] 作为答案统一，但我只得到 [] （最简单的答案）。

有没有可能得到我想要的？也许我的定义有问题？我已经尝试使用 findall 和 forall，但对我来说效果不佳:(

感谢所有的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T12:21:54.727

您在不需要时使用 ( [==](http://www.swi-prolog.org/pldoc/doc_for?object=%28==%29/2) )/2 （请注意文档页面末尾的注释）。实际上，如果您将其更改为“简单”统一 (=)/2，您的程序将按预期工作：

```
is_beginning([], _).
is_beginning([FirstLetterB|RestWordB], [FirstLetterW|RestWordW]) :-
    FirstLetterB = FirstLetterW,
    is_beginning(RestWordB, RestWordW). 
```

测试：

```
?- is_beginning(Answers, [a,b,c]).
Answers = [] ;
Answers = [a] ;
Answers = [a, b] ;
Answers = [a, b, c] ;
false. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:22:23.630

解释器不会立即返回所有解决方案。当它返回时`[]`，按“;” 告诉它继续搜索：

```
?- is_beginning(X, [a,b,c]).
X = [] ;
X = [a] ;
X = [a, b] ;
X = [a, b, c] ;
false. 
```

如果您需要 Prolog 列表中的所有这些解决方案，而不仅仅是在控制台中打印出来，这`findall/3`确实是您正在寻找的：

```
?- findall(X, is_beginning(X, [a,b,c]), L).
L = [[], [a], [a, b], [a, b, c]]. 
```

# iphone - 我想让 imageView Position 垂直倒置

> ID：13798788
> 
> 赞同：1
> 
> 时间：2012-12-10T10:10:22.830
> 
> 标签：iphone, objective-c, ios, ios6

在下图中有两个 imageViews 一个是 body imageView 另一个是黑色纹身 imageview ，现在我用下面的代码获取 tatoo imageView 的位置

```
appDelegate.xFloat= self.imgView.frame.origin.x;
appDelegate.yFloat= self.imgView.frame.origin.y;
appDelegate.widthFloat= self.imgView.frame.size.width;
appDelegate.heightFloat= self.imgView.frame.size.height; 
```

![在此处输入图像描述](../Images/cb125c6ae735849c106d48c1a6bd9e75.png)

现在我需要将纹身图像放在另一个视图控制器中，正如我们在图像中看到的那样（这里汽车处于相反位置），但是在 ( `appDelegate.xFloat`, `appDelegate.yFloat`, `appDelegate.widthFloat`, `appDelegate.heightFloat`) 的帮助下，我正在设置纹身图像视图框架。但我在另一个视图中得到如下所示的图像

![在此处输入图像描述](../Images/5edef560b981780757babe37b3f1e5d5.png)

正如我们在第一张图片中看到的那样，我需要将汽车图像反向放置。请指导我

我的要求不仅是旋转..图像可以在任何位置，如下所示

![在此处输入图像描述](../Images/82b9f968e1ca909fc510231aa006e453.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:04:07.657

奇怪的是，一幅图像没有旋转，而另一幅图像正在旋转。我假设其中一个图像是背景图像或其他图像，但您可以使用变换属性来更改旋转。类似于下面的代码的一些东西应该在两个方向上向您显示相同的图像。

```
UIImage *image = [UIImage imageNamed:@"image.png"];

UIImageView *iv1 =[[UIImageView alloc] initWithImage:image];

[self.view addSubview:iv1];

UIImageView *iv2 = [[UIImageView alloc] initWithImage:image];

[iv2 setFrame:CGRectMake(100,100,image.size.width,image.size.height)];

[iv2 setTransform:CGAffineTransformMakeRotation(-M_PI)];

[self.view addSubview:iv2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:50:34.693

Babul，看起来您正在尝试创建图像。为此，您需要使用一些名为 ImageContext 的东西。我已经给出了一些代码，您可以在其中在上下文中绘制图像，然后将图像取出。

```
UIGraphicsBeginImageContext(CGSizeMake(300,300));

UIImage *image = [UIImage imageNamed:@"breakpoint place.png"];

[image drawAtPoint:CGPointMake(0,0)];

UIImage *image2 = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

UIImageView *iv = [[UIImageView alloc] initWithImage:image2];

[iv setFrame:CGRectMake(100,100,image2.size.width,image2.size.height)];

[self.view addSubview:iv]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:51:38.157

您必须在使用之前构造 appDelegate 。经过：

```
appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate]; 
```

# installation - 如何将合并模块安装位置设置为安装目录

> ID：13798791
> 
> 赞同：2
> 
> 时间：2012-12-10T10:10:34.250
> 
> 标签：installation, wix, wix3.6, merge-module

我正在为 Wix 3.6 中的 Firebird 创建一个合并模块，合并模块默认路径转到窗口驱动器，请指导我如何将合并模块安装目录永久设置为用户在安装时选择的安装目录。无论用户选择哪个路径，都需要将合并模块安装到应用程序路径。

例如

用户选择的路径\应用程序名称\app.exe（或）

用户选择的路径\应用程序名称\合并模块文件夹（或）

用户选择的路径\app.exe（或）

用户选择的路径\合并模块文件夹

实际上在 installshield 中，这可以通过右键单击合并模块并从下拉菜单中设置安装位置来完成

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:53:46.687

要配置合并模块合并到的目录，请`Merge`在所需元素下添加`Directory`元素。例如：

```
<Directory Id='TARGETDIR' Name='SourceDir'>
   <Directory Id='ProgramFilesFolder'>
      <Directory Id='INSTALLFOLDER' Name='Application name'>
         <Merge SourceFile='path\to\fb.msm' />
      </Directory>
   </Directory>
</Directory> 
```

当然，您还需要将`MergeRef`元素添加到要控制 Merge Modules 组件的安装状态的 Feature。

# c++ - OpenCV 捕获循环视频/不检测最后一帧

> ID：13798795
> 
> 赞同：3
> 
> 时间：2012-12-10T10:10:42.587
> 
> 标签：c++, eclipse, macos, opencv

我正在捕获一个 avi 文件并对其进行处理。我的代码已经运行了一段时间没有问题，但现在它似乎在视频的最后一帧被捕获后并没有停止。相反，它会不断循环回到视频的开头。我不明白为什么会发生这种情况，我想不出关于 Eclipse 或 OpenCV 的任何变化。我在我的 Ubuntu 电脑上用相同的视频尝试了相同的代码，它可以正常工作。我什至尝试过重新安装操作系统和应用程序都没有成功。

示例代码：

```
#include "opencv2/opencv.hpp"
using namespace std;
using namespace cv;

int main(int argc, char** argv)
{
Mat frame;
VideoCapture capture;
const string inputVideo = argv[1];

char buff[PATH_MAX];
getcwd( buff, PATH_MAX );
std::string fileName( buff );
fileName.append("/");
fileName.append(inputVideo);

capture.open(inputVideo);

while(true)
{
    capture >> frame;

    if(!frame.empty())
    {
        imshow("frame", frame);
    }
    else
    {
        printf(" --(!) No captured frame -- Break!");
        break;
    }

    int key = waitKey(10);
    if((char)key == 'c')
    {
        break;
    }
}

return 0;
} 
```

我在 Mac OS X (10.8.2)、Eclipse Juno 和 OpenCV 2.4.3 上运行它。

任何建议或意见表示赞赏。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-05T15:33:18.423

我使用的解决方案由@GB 作为评论发布。我正在创建一个解决方案，以便将其标记为一个。

我使用`capture.get(CV_CAP_PROP_POS_FRAMES)`了之前和之后的帧抓取，如果“after”的值小于“before”的值，那么我已经到了视频的结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-05T07:23:37.200

获取如下所示的帧数，

```
int frameCnt = capture.get(CV_CAP_PROP_FRAME_COUNT); 
```

并在帧数超过时检查退出循环..

# javascript - 在 JavaScript 中清空节点的最佳方法是什么

> ID：13798796
> 
> 赞同：13
> 
> 时间：2012-12-10T10:10:47.547
> 
> 标签：javascript

我有一个包含一长串缩略图的画廊。为了防止 DOM 被节点填满，我正在重用它们。从 DOM 中删除节点的最佳方法是什么（不使用库）？

使用`innerHTML = ""`将解析并创建一个新的空文本节点，但循环和删除子节点会导致回流？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-10T10:13:45.253

你至少有四个选择：

1.  `innerHTML = ""`如您在问题中所示使用。它将确保您调用它的元素根本没有子节点，并且不会创建任何新节点。它是[指定](https://w3c.github.io/DOM-Parsing/#the-innerhtml-mixin)且可靠的跨浏览器（尽管[有一个 IE 错误](https://stackoverflow.com/questions/28741528/is-there-a-bug-in-internet-explorer-9-10-with-innerhtml)可能会或可能不会影响您的代码），并且可能相当有效。

2.  使用`textContent = ""`，这也是[指定](https://dom.spec.whatwg.org/#dom-node-textcontent)和可靠的跨浏览器（IE9+），有趣的是，IE11（至少）似乎没有`textContent`与`innerHTML`. 它还具有不需要 HTML 解析器的优点，当然您提供的字符串应该`innerHTML`是 HTML。（不过，浏览器可能会对字符串为空时进行优化。）

3.  您可以`removeChild`在循环中使用，但这涉及到 DOM 中可能重复的函数调用：

    ```
    // assuming elm is the element
    while (elm.firstChild) {
       elm.removeChild(elm.firstChild);
    } 
    ```

4.  您可以用省略子元素的克隆*替换父元素：*

    ```
    // assuming elm is the element
    const clone = elm.cloneNode(false);
    parent.parentElement.replaceChild(clone, elm);
    elm = clone; 
    ```

    请注意，与其他人不同，这将删除父元素上的所有事件处理程序。

如果我不得不猜测，我猜这`textContent = ""`将是最快的，至少如果有**很多**孩子的话。但是**性能通常并不重要**，这是一种极其罕见的情况，这将是代码中明显变慢的部分。如果您遇到重要的情况，请使用目标浏览器中的每个选项测试您的实际代码，然后选择最有效的一个。

人们喜欢综合基准，但**综合基准非常不可靠**，并且对基准假设（例如被移除的儿童数量）非常敏感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-12T12:49:54.157

```
function clearNode(node, clone = true) {
  let emptyNode;

  if (clone) {
    emptyNode = node.cloneNode();
    node.parentNode.replaceChild(emptyNode, node);
    node = emptyNode;
  }
  else {
    while (node.hasChildNodes()) {
      node.removeChild(node.firstChild);
    }
    emptyNode = node;
  }

  return emptyNode;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-25T18:29:14.797

您也可以只调用[`node.replaceChildren()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/replaceChildren#emptying_a_node)它，它将清空节点。它快速，干净，并且使您的意图清晰。

# android - 在 AsyncTask Android 中处理进程

> ID：13798802
> 
> 赞同：0
> 
> 时间：2012-12-10T10:11:10.393
> 
> 标签：android, multithreading, android-asynctask, android-handler

我有两个任务在 doInBackground() 中运行。一项任务是从站点读取数据，另一项任务是从 Url 解析 xml 文件并在 imageview 中设置图像。但是我想将这两个任务分开意味着一旦从站点读取完成，它应该在 textview 中设置文本。之后应该开始 xml 解析。那我该怎么办？

这是我的代码：

```
private class DownloadWebPageTask extends AsyncTask<String, Void, ArrayList<String>>
    {
        ProgressBar progressBar;

        @Override
        protected void onPreExecute() {
            super.onPreExecute();

            progressBar = (ProgressBar)findViewById(R.id.showLoading);
            progressBar.bringToFront();         

        }

        @Override
        protected ArrayList<String> doInBackground(String... arg0)
        {
            String xml = null;

            ArrayList<String> lyricArtistArray = new ArrayList<String>();

                    //get lyrics - First task
            lyricsArray = SearchHelper.findLyrics(arg0[0],arg0[1]);
            lyricArtistArray.add(lyricsArray);

                //get image - Second task
            artistNameGlobal = arg0[1].toString();
            try
            {
                XMLParser parser= new XMLParser();
                String img;
                String t = arg0[1].replace(" ","%20");
                String url = "http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist="+t+"&api_key=mykey";
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                xml = EntityUtils.toString(httpEntity);
                Document doc = parser.getDomElement(xml);
                NodeList nl = doc.getElementsByTagName("artist");
                for(int i=0;i<1;i++)
                {
                    Element e = (Element)nl.item(i);
                    img = parser.getValue(e,"image");
                    System.out.print(img);
                    ImageView imageArtist = (ImageView) findViewById(R.id.artistImageView);
                    imageArtist.setImageBitmap(LoadImageFromURL(img));
                }               
            }
            catch (Exception e) {
                // TODO: handle exception
                e.printStackTrace();
            }

            return lyricArtistArray;
        }

        @Override
        protected void onPostExecute(ArrayList<String> lyricArtistArray)
        {
            progressBar.setVisibility(View.GONE);

            tvMain.setTextSize(fontSize);
            tvMain.setTextColor(FontColor);
            if(!FontStyle.equals("None"))
            {
                String s = FontStyle.concat(".ttf");
                String s1 = "fonts/"+s;
                Typeface tf=Typeface.createFromAsset(getAssets(),s1);
                tvMain.setTypeface(tf); 
            }

            tvMain.setText(Html.fromHtml(lyricArtistArray.get(0).toString()));
            tvMain.setMovementMethod(new ScrollingMovementMethod());                    
            tvMain.setSelected(true);       
        }
    } 
```

我应该如何处理这两个任务？请建议我一些解决方案，以便花费最少的时间。请尽快回复我。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:29:36.723

我想到了几种方法。第一个是在这个方法中实现`onProgressUpdate(Progress...)`传递 a`String`并设置值。然后，您将在下载完成后但在解析开始之前`TextView`调用。`updateProgress`这将是您完成这项工作所需的最少工作量。

另一种方法是创建一个`AsyncTask`只包含解析代码的新方法。第一个`AsyncTask`（现在只执行下载）将设置`TextView`内容并`AsyncTask`在其`onPostExecute`.

# ios - 使用 MKLocalSearch 在地图上搜索位置

> ID：13798804
> 
> 赞同：9
> 
> 时间：2012-12-10T10:11:11.953
> 
> 标签：ios, objective-c, mkmapview, mapkit, mklocalsearch

我想`MKLocalSearch`用于在地图中搜索。此功能在 iOS 6.1+ 中可用。有人知道如何使用它，或者任何人都可以举一个如何使用的例子`MKLocalSearch`吗？

[MKLocalSearchResponse 文档](https://developer.apple.com/library/prerelease/ios/#documentation/MapKit/Reference/MKLocalSearchResponse_class/Reference/Reference.html#//apple_ref/doc/uid/TP40012891-CH1-SW4)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-04-29T14:51:41.197

API for[`MKLocalSearch`](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKLocalSearch/Reference/Reference.html)相当容易理解。最基本的，你

1.  `alloc-init`一个[`MKLocalSearchRequest`](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKLocalSearchRequest_class/Reference/Reference.html#//apple_ref/doc/c_ref/MKLocalSearchRequest)
2.  将其设置`naturalLanguageQuery`为某个搜索词
3.  使用搜索请求初始化`MKLocalSearch`对象
4.  告诉本地搜索开始，传递一个完成处理程序
5.  `MKMapItem`对响应 中的对象数组执行某些操作

    * * *

搜索咖啡馆：

```
// Create a search request with a string 
MKLocalSearchRequest *searchRequest = [[MKLocalSearchRequest alloc] init];
[searchRequest setNaturalLanguageQuery:@"Cafe"];

// Create the local search to perform the search
MKLocalSearch *localSearch = [[MKLocalSearch alloc] initWithRequest:searchRequest];
[localSearch startWithCompletionHandler:^(MKLocalSearchResponse *response, NSError *error) {
    if (!error) {
        for (MKMapItem *mapItem in [response mapItems]) {
            NSLog(@"Name: %@, Placemark title: %@", [mapItem name], [[mapItem placemark] title]);
        }
    } else {
        NSLog(@"Search Request Error: %@", [error localizedDescription]);
    }
}]; 
```

* * *

您可以像这样为搜索指定一个区域：

```
// Search for Cafes in Paris 
MKLocalSearchRequest *searchRequest = [[MKLocalSearchRequest alloc] init];
[searchRequest setNaturalLanguageQuery:@"Cafe"];
CLLocationCoordinate2D parisCenter = CLLocationCoordinate2DMake(48.8566667, 2.3509871);
MKCoordinateRegion parisRegion = MKCoordinateRegionMakeWithDistance(parisCenter, 15000, 15000);
[searchRequest setRegion:parisRegion]; 
```

您还可以从`MKMapView`用户放大的区域中获取区域。这将产生更好的结果：

```
[searchRequest setRegion:self.mapView.region]; 
```

* * *

响应对象 an[`MKLocalSearchResponse`](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKLocalSearchResponse_class/Reference/Reference.html)包含一个对象数组[`MKMapItem`](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapItem_class/Reference/Reference.html)( `mapItems`) 和一个`MKCoordinateRegion`called `boundingRegion`，它是一个包含所有结果的区域。您可以使用它来设置地图视图以显示所有结果：

```
[self.mapView setRegion:response.boundingRegion]; 
```

* * *

对象数组`MKMapItem`不能放置在地图上（它们用于发送到地图应用程序），但每个对象都包含一个*可以*添加到地图的`placemark`属性：

 *```
[localSearch startWithCompletionHandler:^(MKLocalSearchResponse *response, NSError *error) {
    if (!error) {
        for (MKMapItem *mapItem in [response mapItems]) {
            NSLog(@"Name: %@, MKAnnotation title: %@", [mapItem name], [[mapItem placemark] title]);
            NSLog(@"Coordinate: %f %f", [[mapItem placemark] coordinate].latitude, [[mapItem placemark] coordinate].longitude);
            // Should use a weak copy of self
            [self.mapView addAnnotation:[mapItem placemark]];
        }
    } else {
        NSLog(@"Search Request Error: %@", [error localizedDescription]);
    }
}]; 
```

搜索都柏林会在地图视图和日志上放置一个图钉：

```
Name: Dublin, Co. Dublin, MKAnnotation title: Dublin, Co. Dublin, Ireland
Coordinate: 53.344104 -6.267494 
```

* * *

返回的对象中有大量额外的细节，尤其是在您搜索企业时。这里有几个：

```
[localSearch startWithCompletionHandler:^(MKLocalSearchResponse *response, NSError *error) {
    if (!error) {
        NSLog(@"Results: %@", [response mapItems]);
        MKMapItem *mapItem = [[response mapItems] objectAtIndex:0];
        NSLog(@"Name:%@ Phone:%@ URL:%@", [mapItem name], [mapItem phoneNumber], [mapItem url]);
        NSLog(@"Placemark: %@", [mapItem placemark]);
        MKPlacemark *placemark = [mapItem placemark];
        NSLog(@"Placemark Address: %@", [placemark addressDictionary]);
        MKCoordinateRegion boundingRegion = [response boundingRegion];
        NSLog(@"Bounds: %f %f", boundingRegion.span.latitudeDelta, boundingRegion.span.longitudeDelta);
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-07T07:34:29.280

这是一个在给定位置周围 1 公里半径内搜索咖啡馆的示例：

```
MKLocalSearchRequest *request = [[MKLocalSearchRequest alloc] init];
CLLocationCoordinate2D location = CLLocationCoordinate2DMake(11.567898, 104.894430);
request.naturalLanguageQuery = @"cafe";
request.region = MKCoordinateRegionMakeWithDistance(location, 1000, 1000);
MKLocalSearch *search = [[MKLocalSearch alloc] initWithRequest:request];
[search startWithCompletionHandler:^(MKLocalSearchResponse *response, NSError *error){
    for (MKMapItem *item in response.mapItems) {
        NSLog(@"%@", item.name);
    }
}]; 
```

请注意，当搜索不成功时，它不会返回空列表，而是返回 domain`MKErrorDomain`和 code错误`4`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T06:59:15.370

这是Localsearch的教程

[http://jeffreysambells.com/2013/01/28/mklocalsearch-example](http://jeffreysambells.com/2013/01/28/mklocalsearch-example)*

# solr - Solr 关键字搜索

> ID：13798807
> 
> 赞同：1
> 
> 时间：2012-12-10T10:11:21.730
> 
> 标签：solr

我有一个 solr 索引，其中包含大约 1000 万个网络讨论线程。Solr 在读写器模式下运行。我有另一个进程查询 solr 以获取不同的关键字查询。关键字可以是以下格式：

1.  一个
2.  A和B和C......
3.  A AND B AND C.... AND Z NOT AA NOT AB NOT AC......

最终的 Solr Query 有点像这样

```
text:( "Keyword A" OR "Keyword B" OR "Keyword C" ...) AND source: (source1 OR source2 OR source3...) AND date:[date1 TO date2] 
```

在 solr 上查询了大约 100 种不同的组合。查询组合的选择取决于它返回的每个查询的结果数。

不知何故，查询似乎需要很多时间。有时只需几分钟（2 - 15 分钟）。缓存的使用似乎很困难，因为很少有查询被调度线程背靠背拾取。

如何减少 Solr 查询所需的时间？

# database-design - MySQL 数据库 CSV 文件和概念

> ID：13798809
> 
> 赞同：0
> 
> 时间：2012-12-10T10:11:38.967
> 
> 标签：database-design, csv

我的数据库模型的概念有些麻烦。

我有一个用于未来网站类别的大 CSV 文件。

```
BIGCAT1;SUBCAT1;SUBSUBCAT1;BRAND1
BIGCAT1;SUBCAT1;SUBSUBCAT2;BRAND2
BIGCAT2;SUBCAT2;SUBSUBCAT3;BRAND1
BIGCAT2;SUBCAT2;SUBSUBCAT4;BRAND3 
```

如您所见，SUBCATx 仅属于 BIGCATx。一个 SUBSUBCATx 只属于一个 SUBCATx。但是一个 BRANDx 可以属于多个 SUBSUBCAT。

在开始时，我创建了一个 CSV 解析器...并且我将每个 BRAND 视为 subsubsub...cat。它有效，但它是如此令人反感。如果我将每个品牌视为一个类别，我有 3,600 个品牌...当我删除重复项时，我只有 2,106 个独特品牌...（+/-1,500 个重复项）。

如果我认为我的数据库模型与关系类别 (id,is_active) / category_has_brand (category.id, brand.id) / brand (id, is_active) ：如何使用 CSV 文件生成我的数据库插入？

而且因为它很有趣……它是多语言的（适用于 BIGCAT、SUBCAT、SUBSUBCAT，但不适用于 BRAND）。

如果我手动填写这个数据库......没关系。但我不想那样做。

有人有想法吗？我使用 PHP 和 MySQL 来读取我的文件并填充我的数据库。

有没有办法使用这种 CSV 在 3 个 SQL 表中生成条目：category (id,is_active) / category_has_brand (category.id, brand.id) / brand (id, is_active)？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T16:31:00.610

我想你在问两个问题：

*   我应该如何构建我的数据库？
*   我应该如何导入我的 CSV 文件？

数据库设计可以非常简单：

```
Category
-----------
CategoryID
ParentCategoryID 
```

这是基于“子类别只属于单亲”的说法。如果结果是“多对多”，则需要创建一个连接表而不是 ParentGategoryID。

要存储本地化的类别描述等，您可以拥有一个本地化的字符串表：

```
CategoryDescription
------------
CategoryID
Locale
Description 
```

从您所写的内容来看，类别和品牌之间存在“多对多”，因此可以按如下方式工作：

```
Brand
-----
BrandID
.... 

CategoryBrand
---------
CategoryID
BrandID 
```

我不认为有导入 CSV 文件的简洁方法。伪代码可能是：

```
for each line in CSV file
  for each field in line
     if field is category
          add category if not exists
          if category is not top level
              set category Parent to last category
          end if
     end if
     if field is brand
         add brand if not exists
         set brand category to last category
     end if
   next field
 next line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T15:10:54.693

我将为 Cat/Subcat/SubSubcat 创建 3 个表。

```
CatId | Description | Whatever else fits there, like "active flag". 
```

...

```
SubCatId | Description | Whatever else fits there, like "active flag". 
```

...

```
SubSubCatId | Description | Whatever else fits there, like "active flag". 
```

然后是品牌表：

...

```
BrandId | Name | Description | Whatever else fits there, like "Country Iso Code". 
```

然后我将创建一个“Triplet+Brand”结构，其中包含 3 个表的外键：

```
CatId|SubcatId|SubSubCatId|BrandId 
```

现在您的 CSV 导入变为：

```
Read a record from CSV
   Split it into Cat/Subcat/SubSubCat/Brand - these will all be descriptions, or names
   Find if the the Category exists, if yes get ID from DB, otherwise create Category table and generate Id by sequence
   Find SubCategory (as above)
   ...
   Find Brand (as above)
   Create record with  CatId+SubcatId+SubSubCatId+BrandId 
```

使用适当的唯一键，您还可以在创建期间或应用程序生命周期的后期避免重复。

# php - 如何使用php关闭mysql中的dbconnection

> ID：13798810
> 
> 赞同：2
> 
> 时间：2012-12-10T10:11:41.440
> 
> 标签：php, mysql, mysqli

我有一个创建数据库连接的代码，如下所示。

```
$dbConn = new mysqli($dbHost, $dbUserName, $dbUserPasswrd, $database);  

$strSQL = 'SELECT * 
             FROM Table_Name';

$stmt   = $dbConn->prepare($strSQL);
$stmt->execute();

$stmt->close();
$dbConn->close(); 
```

我创建了一个 php 页面，我在其中调用此代码。

现在，当我使用 toad GUI 在 mysql 数据库中看到连接时，它在第一次加载页面时显示 1 个连接，并且当页面刷新时计数不断增加。

1.为什么尽管我在代码末尾关闭了mysqli，但连接数却增加了

2\. 使用 $dbConn->close() 是否有助于通过减少未使用的连接来优化 DB 的性能

请简要说明，以便每个人都可以学习一些。

![在此处输入图像描述](../Images/d5c1edc49c28902735181c3d9440bd8b.png)

谢谢您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:39:33.413

[https://dev.mysql.com/doc/refman/5.5/en/server-status-variables.html](https://dev.mysql.com/doc/refman/5.5/en/server-status-variables.html)说：

> **Connections**：与 MySQL 服务器的连接尝试次数（成功与否）。 **Threads_connected**：当前打开的连接数。

即`connections`计算所有已进行的连接尝试，而`threads_connected`可能是您感兴趣的值。

# r - R语言中的SQL窗口函数

> ID：13798812
> 
> 赞同：0
> 
> 时间：2012-12-10T10:11:43.783
> 
> 标签：r

我想解决`postgresSQL`使用`R`语言编写的窗口函数。

据我所知， `R`必须`aggregate()`计算分组数据。是否有任何库支持窗口功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-08-16T06:00:37.190

首先通过调用创建分区`group_by`。这样，以下`mutate`调用将明智地进行作业分区。然后取消组合以释放表格。我在一张假工资表上试了一下，它似乎奏效了。

```
hr_muatated <- hr_sub %>%
  group_by(Department) %>% 
  mutate(
  avg_dep_rate = mean(DailyRate),
  medi_dep_rate = median(DailyRate)) %>% 
  ungroup() 
```

它给了我这个：

```
> as.data.table(hr_muatated)
      EmployeeNumber             Department DailyRate avg_dep_rate medi_dep_rate
   1:              1                  Sales      1102     800.2758         770.5
   2:              2 Research & Development       279     806.8512         810.0
   3:              4 Research & Development      1373     806.8512         810.0
   4:              5 Research & Development      1392     806.8512         810.0
   5:              7 Research & Development       591     806.8512         810.0
  ---                                                                           
1466:           2061 Research & Development       884     806.8512         810.0
1467:           2062 Research & Development       613     806.8512         810.0
1468:           2064 Research & Development       155     806.8512         810.0
1469:           2065                  Sales      1023     800.2758         770.5
1470:           2068 Research & Development       628     806.8512         810.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:31:59.117

如果您熟悉 SQL 语法，则可以使用`aggregate`and 。`merge`以[PostgreSQL 手册中的一个例子为例](http://www.postgresql.org/docs/9.1/static/tutorial-window.html)，我们将使用

```
empsalary <- data.frame(depname=rep(c("develop", "personnel", "sales"), c(5, 2, 3)),
                        empno=c(11, 7, 9, 8, 10, 5, 2, 3, 1, 4), 
                        salary=c(5200, 4200, 4500, 6000, 5200, 3500, 3900, 4800, 5000, 4800)) 
merge(empsalary, aggregate(salary ~ depname, empsalary, mean), by="depname") 
```

重现第一个示例（按 计算平均工资`depname`）。

```
 depname empno salary.x salary.y
1    develop    11     5200 5020.000
2    develop     7     4200 5020.000
3    develop     9     4500 5020.000
4    develop     8     6000 5020.000
5    develop    10     5200 5020.000
6  personnel     5     3500 3700.000
7  personnel     2     3900 3700.000
8      sales     3     4800 4866.667
9      sales     1     5000 4866.667
10     sales     4     4800 4866.667 
```

您可能想看看[plyr](http://plyr.had.co.nz)为更精细的构造提供了什么。

# objective-c - 如何将按钮添加到导航控制器

> ID：13798815
> 
> 赞同：3
> 
> 时间：2012-12-10T10:11:54.187
> 
> 标签：objective-c, uinavigationbar, uibarbuttonitem

这是我的代码..我无法在导航控制器中添加按钮。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UIViewController *viewController1, *viewController2, *viewController3,*viewController4;

    viewController1 = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    viewController2 = [[DisplayAllImagesController alloc] initWithNibName:@"DisplayAllImagesController" bundle:nil];
    viewController3 = [[EmptyView alloc] initWithNibName:@"EmptyView" bundle:nil];
    viewController4 = [[ListView alloc] initWithNibName:@"ListView" bundle:nil];

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController2, viewController1, viewController3, viewController4, nil];
    self.tabBarController.title = @"Title";

    self.navController = [[UINavigationController alloc]
                          initWithRootViewController:self.tabBarController];
    self.window.rootViewController = self.navController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

所以，请让我知道如何将按钮添加到导航控制器......请......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T10:20:51.273

`ViewController`只需在您的方法中添加以下代码`viewDidLoad:`...

```
UIBarButtonItem *btnReload = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(btnReloadPressed:)];
self.navigationController.topViewController.navigationItem.rightBarButtonItem = btnReload;
btnReload.enabled=TRUE;
btnReload.style=UIBarButtonSystemItemRefresh; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-10T10:16:26.923

尝试这个：

```
UIButton *customButton = [UIButton alloc] initWithFrame:CGRectMake(0, 0, 50,30)];

UIBarButtonItem *closeButton = [[UIBarButtonItem alloc] initWithCustomView:customButton];
self.navigationItem.rightBarButtonItem = closeButton; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T10:19:22.413

如果你想要自定义按钮，我们可以使用这个

```
UIButton *myButton1 = [UIButton buttonWithType:UIButtonTypeCustom];
[myButton1 setImage:[UIImage imageNamed:@"back.png"] forState:UIControlStateNormal];
myButton1.showsTouchWhenHighlighted = YES;
myButton1.frame = CGRectMake(0.0, 3.0, 50,30);

[myButton1 addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithCustomView:myButton1];
self.navigationItem. rightBarButtonItem = rightButton; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-10T10:24:11.690

> //创建按钮并分配图片 UIImage *buttonImage = [UIImage imageNamed:@"button.png"];
> 
> UIButton *rightButton = [UIButton buttonWithType:UIButtonTypeCustom];

```
[rightButton setFrame:CGRectMake(280,7,buttonImage.size.width,buttonImage.size.height)]; 
```

> ```
> [rightButton setBackgroundImage:buttonImage forState:UIControlStateNormal];
> rightButton.titleLabel.font = [UIFont boldSystemFontOfSize:12];
> [rightButton setTitle:@"Right" forState:UIControlStateNormal];
> 
> // add image view
> [self.navigationController.navigationBar addSubview:rightButton];
> 
> [self.navigationController.navigationBar bringSubviewToFront:rightButton];
> 
> //create a UIBarButtonItem with the button as a custom view
> UIBarButtonItem *customBarDone = [[UIBarButtonItem alloc] initWithCustomView:rightButton];
> self.navigationItem.rightBarButtonItem = customBarDone;
> [rightButton addTarget:self action:@selector(yourSelector:) forControlEvents:UIControlEventTouchUpInside]; 
> ```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T10:23:46.697

UIButton* btn =[UIButton alloc] init]; .... self.navController.view addsubview:btn];

# .net - 将邮箱从 Exchange Server 导出到 PST 文件

> ID：13798821
> 
> 赞同：3
> 
> 时间：2012-12-10T10:12:10.870
> 
> 标签：.net, vb.net, powershell, outlook, exchange-server

我试图将邮箱（任何用户的）从 Exchange 2010 Server 导出到 PST 文件。存档此文件的最佳方法是什么？

首先我看的是 COM-Interop 模型。但这似乎只是能够将当前登录到 Outlook 的用户的邮箱导出。还是我在那里遗漏了什么？我试过这个：

```
Dim app As New Outlook.Application()
Dim ns As Outlook.NameSpace = app.GetNamespace("MAPI")
ns.AddStore("C:\backup.pst")
Dim backupFolder As Outlook.MAPIFolder = ns.Session.Folders.GetLast()
Dim selectedMailBox As Outlook.MAPIFolder = ns.Folders("mymail@company.com") 'NOT Working
selectedMailBox.CopyTo(backupFolder)
ns.RemoveStore(backupFolder) 
```

后来我发现了这个 PowerShell 函数：`New-MailboxExportRequest` 遗憾的是，我找不到从 .NET 调用它的方法。有没有可能从.NET 调用它？

还是我需要使用任何其他库从 Exchange 导出文件？（*也许使用 POP3 来获取所有邮件并将它们转换为 PST？*）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T01:50:50.877

您可以为此使用[Redemption](http://www.dimastr.com/redemption) - 以域用户身份运行您的代码，该用户可以访问相关邮箱并调用[RDOSession.LogonExchangeMailbox](http://www.dimastr.com/redemption/rdosession.htm)。然后，您可以使用 . 打开其他用户的邮箱`RDOSession.Stores.GetSharedMailbox`。拥有[RDOStore](http://www.dimastr.com/redemption/rdostore.htm)对象后，您将能够访问以 . 开头的所有文件夹和消息`RDOStore.IPMRootFolder`。

要复制到 PST 存储，您可以使用 . 添加新的或现有的 PST 文件`RDOSession.Stores.AddPstStore`。

要复制所有文件夹，请使用以下内容

```
foreach (RDOFolder sourceFolder in ExchangeStore.IPMRootFolder.Folders)
{
  sourceFolder.CopyTo(PstStore.IPMRootFolder);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:50:58.640

您可以使用 System.Management.Automation 和 System.Management.Automation.Runspaces 在 C# 中执行 Powershell 命令。

一个非常有限的例子：

```
int GetMiliseconds()
{
    using (var ps = System.Management.Automation.PowerShell.Create())
    {
        var cmd = new System.Management.Automation.Runspaces.Command("Get-Date");
        ps.Commands.AddCommand(cmd);
        var result = ps.Invoke();
        return result != null && result.Any() ? result.First().Members["Millisecond"].Value as Int32? ?? 0 : 0;
    }
} 
```

最棘手的部分是结果总是以 . 的形式返回`ICollection<PSObject>`，您必须时刻留意抛出的异常和 null 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-02T09:41:44.643

哪个交换服务器？在 Exchange Server 2013 中，您必须首先授予此角色的权限，因为即使管理员也没有权限。使用管理权限打开 Windows Power-Shell，执行以下命令：

New-ManagementRoleAssignment –角色“邮箱导入导出” –用户“用户名”

（用用户名替换“用户名”）。

创建一个共享网络文件夹并记住 \"SERVER-NAME"\"SHAREDFOLDERNAME" 中的路径。

将“SERVER-NAME”替换为您的服务器名称，将“SHAREDFOLDERNAME”替换为您的特定共享文件夹名称。在 Exchange Server 命令行界面（命令行界面）上，使用命令 Get-Mailbox 获取您在 Exchange 服务器中拥有的所有邮箱，然后您可以从那里选择要导出其 .pst 文件的邮箱。接下来，在 CLI 上，键入：

New-MailboxExportRequest –邮箱“USERNAME” –FilePath \"SERVER-NAME"\"SHAREDFOLDERNAME"\"PSTFILENAME".pst

再次记住将“SERVER-NAME”和“USERNAME”替换为您的服务器名和要导出的特定邮箱的用户名，否则会发生错误。将“PSTFILENAME”替换为您要保存文件的名称。之后，您可以检查共享文件夹，您会注意到文件的大小在增加或使用命令：Get-MailboxExportRequest -Mailbox "SPECIFICUSERNAME" | 格式表 -wrap -autosize

查看该过程是否已完成。如果完成，它将在状态栏中显示为“已完成”。如果没有，它将指示“排队”。

# android - 调整位图大小

> ID：13798824
> 
> 赞同：0
> 
> 时间：2012-12-10T10:12:33.380
> 
> 标签：android, bitmap, image-resizing, live-wallpaper

喂。我正在制作动态壁纸，但遇到了问题。我已经完成了壁纸中的视差效果。现在，问题是我的动态壁纸的位图（即静态背景）没有正确缩放。在某些屏幕中，宽度是适当的，但在某些屏幕中，位图（即背景）仅显示一半。

我已经尝试过密度、窗口管理器和 px 到 dp 的转换。

它们似乎都不适合我。或者可能是我对它的处理方式不正确。

我也需要帮助。

代码片段

```
this._backgroundImage = BitmapFactory.decodeResource(context.getResources(),R.drawable.scene, options);

Bitmap background_image = Bitmap.createScaledBitmap(_backgroundImage, width, height, false);

canvas.drawBitmap(this.background_image, 0, 0, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:52:08.747

我有时会使用以下方法..我不知道这些是否对您有帮助..请检查这是否适合您

```
float scale = getResources().getDisplayMetrics().density;
Display display = ((WindowManager) main.getSystemService(Context.WINDOW_SERVICE)) 
.getDefaultDisplay();
int WIDTH = display.getWidth();
int HEIGHT = display.getHeight();

public static Drawable resizeDrawable(Drawable d, float scale) {
    Drawable drawable = null;
    if (d != null) {
        try {
            Bitmap bitmap1 = ((BitmapDrawable) d).getBitmap();
            int width = 0;
            int height = 0;
            if (Math.min(WIDTH, HEIGHT) > 600) {
                width = (int) (100 * scale + 0.5f);
                height = (int) (100 * scale + 0.5f);

            } else if (Math.min(WIDTH, HEIGHT) > 240) {
                width = (int) (70 * scale + 0.5f);
                height = (int) (70 * scale + 0.5f);

            } else {
                width = (int) (44 * scale + 0.5f);
                height = (int) (44 * scale + 0.5f);
            }

            drawable = new BitmapDrawable(resizeBitmap(bitmap1,
                    width, height));
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    return drawable;
} 
```

请注意，resizeDrawable 方法中 if-else 条件中使用的值只是试验 n 错误（适合我的应用程序）采用的任意值。您可以根据您的目标屏幕尝试其他值

```
public static Bitmap resizeBitmap(final Bitmap bitmap, final int width,
        final int height) {
    final int oldWidth = bitmap.getWidth();
    final int oldHeight = bitmap.getHeight();
    final int newWidth = width;
    final int newHeight = height;

    // calculate the scale
    final float scaleWidth = ((float) newWidth) / oldWidth;
    final float scaleHeight = ((float) newHeight) / oldHeight;

    // create a matrix for the manipulation
    final Matrix matrix = new Matrix();
    // resize the Bitmap
    matrix.postScale(scaleWidth, scaleHeight);
    // if you want to rotate the Bitmap

    // recreate the new Bitmap
    final Bitmap resizedBitmap = Bitmap.createBitmap(bitmap, 0, 0,
            oldWidth, oldHeight, matrix, true);

    return resizedBitmap;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:54:33.653

您可以使用它来获取屏幕尺寸并相应地对其进行缩放。

```
Display display = getWindowManager().getDefaultDisplay(); 
int width = display.getWidth();  // deprecated
int height = display.getHeight(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:40:31.010

尝试这个：

位图 resizedBitmap=Bitmap.createScaledBitmap(bb, newWidth, newHeight, false);

告诉我它是否有效。

# c++ - 我需要学习这些用 C++ 编写的代码

> ID：13798825
> 
> 赞同：0
> 
> 时间：2012-12-10T10:12:39.363
> 
> 标签：c++, vector, iterator, containers, unordered-map

我有一段代码正在分析一些与网络相关的事情。

我需要学习该代码的某些部分。但我无法理解以下部分。我不知道这样的用法。

```
unordered_map < string, DomainInfo *>::iterator hostTrafficItr; 
```

据我所知`unordered_map`，得到一个键、映射对并包含它（一个容器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:15:49.570

您`unordered_map`有一个 type 的键和一个 type 的`string`值`DomainInfo*`。`::iterator`声明为此映射类型`hostTrafficItr`的[迭代器。](http://www.cplusplus.com/reference/iterator/)

阅读一本好的 C++ 参考书可能是个好主意。如果您需要在线参考，可以使用：[http ://www.cplusplus.com/](http://www.cplusplus.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:24:31.877

这是（可能是标准的）unorderd_map 的声明（参见这里[http://www.cplusplus.com/reference/unordered_map/unordered_map/](http://www.cplusplus.com/reference/unordered_map/unordered_map/)）迭代器。

unordered_map 是 key->value 结构，允许使用字符串访问 DomainInfo* 元素来识别它们。

迭代器是一个类，允许您（顾名思义）遍历集合元素，为您提供对集合键和值的访问。

您可以使用以下方法访问与当前迭代器值连接的键：

```
hostTrafficItr->first //Has type string 
```

和价值使用

```
hostTrafficItr->second //Has type DomainInfo* 
```

取消引用运算符返回 pair<string, DomainInfo>。

迭代器最常见的是由集合的 .begin() 或 .end() 初始化。

高温高压

# android - 带有 exFAT 文件系统的 Android sqlite 崩溃

> ID：13798826
> 
> 赞同：4
> 
> 时间：2012-12-10T10:12:40.400
> 
> 标签：android, sqlite

我在创建新的 sqlite 数据库时遇到了问题，它大部分都可以工作，但是我们的一些三星 Galaxy S III 客户在安装我们的应用程序后报告崩溃。我们发现问题出在 sqlite 调用*write()*方法时，并且仅在客户拥有使用 exFAT 格式化的外部 SD 卡（三星在他们的某些手机上支持）时才会发生。奇怪的是，创建文件夹有效，创建空数据库文件也有效，然后崩溃。它只发生在三星 ROM 的库存中，在带有 exfat 的自定义 ROM 上它工作得很好。如何解决这个问题呢？谢谢

```
[21:10:36.225] W [22233][Sqlite]: (0) OPENX   59  /storage/extSdCard/Be-on-road/packages 0400102
[21:10:36.225] W [22233][Sqlite]: (0) OPEN    59  /storage/extSdCard/Be-on-road/packages
[21:10:36.225] W [22233][Sqlite]: (0) READ    59      0       0 0
[21:10:36.225] I [22233][Sqlite]: Database successfully opened /storage/extSdCard/Be-on-road/packages.
[21:10:36.238] W [22233][Sqlite]: (0) LOCK    59 SHARED was NONE(NONE,0) pid=22233 (unix)
[21:10:36.238] W [22233][Sqlite]: (0) LOCK    59 SHARED ok (unix)
[21:10:36.238] W [22233][Sqlite]: (0) UNLOCK  59 0 was 1(1,1) pid=22233 (unix)
[21:10:36.239] W [22233][Sqlite]: (0) LOCK    59 SHARED was NONE(NONE,0) pid=22233 (unix)
[21:10:36.239] W [22233][Sqlite]: (0) LOCK    59 SHARED ok (unix)
[21:10:36.239] W [22233][Sqlite]: (0) UNLOCK  59 0 was 1(1,1) pid=22233 (unix)
[21:10:36.239] W [22233][Sqlite]: (0) LOCK    59 SHARED was NONE(NONE,0) pid=22233 (unix)
[21:10:36.239] W [22233][Sqlite]: (0) LOCK    59 SHARED ok (unix)
[21:10:36.239] W [22233][Sqlite]: (0) LOCK    59 RESERVED was SHARED(SHARED,1) pid=22233 (unix)
[21:10:36.239] W [22233][Sqlite]: (0) LOCK    59 RESERVED ok (unix)
[21:10:36.239] W [22233][Sqlite]: (0) OPENX   60  /storage/extSdCard/Be-on-road/packages-journal 0400102
[21:10:36.239] W [22233][Sqlite]: (0) OPENDIR 61  /storage/extSdCard/Be-on-road
[21:10:36.239] W [22233][Sqlite]: (0) OPEN    60  /storage/extSdCard/Be-on-road/packages-journal
[21:10:36.240] W [22233][Sqlite]: (0) WRITE   60    512       0 0
[21:10:36.242] W [22233][Sqlite]: (0) LOCK    59 EXCLUSIVE was RESERVED(RESERVED,1) pid=22233 (unix)
[21:10:36.242] W [22233][Sqlite]: (0) LOCK    59 EXCLUSIVE ok (unix)
[21:10:36.242] W [22233][Sqlite]: (0) READ    60      0     512 0
[21:10:36.242] W [22233][Sqlite]: (0) SYNC    60 
[21:10:36.246] W [22233][Sqlite]: (0) DIRSYNC 61  (have_fullfsync=0 fullsync=0)
[21:10:36.246] W [22233][Sqlite]: (0) WRITE   60     12       0 0
[21:10:36.246] W [22233][Sqlite]: (0) SYNC    60 
[21:10:36.249] W [22233][Sqlite]: (0) WRITE   59   1024       0 0
[21:10:36.249] W [22233][Sqlite]: (0) WRITE   59   1024    1024 0
[21:10:36.249] W [22233][Sqlite]: (0) WRITE   59   1024    2048 0
............ lots of write
[21:10:36.250] W [22233][Sqlite]: (0) WRITE   59   1024   10240 0
[21:10:36.250] W [22233][Sqlite]: (0) SYNC    59 
[21:10:36.263] W [22233][Sqlite]: (0) CLOSE   -1 
[21:10:36.264] W [22233][Sqlite]: (0) UNLOCK  59 1 was 4(4,1) pid=22233 (unix)
[21:10:36.264] W [22233][Sqlite]: (0) UNLOCK  59 0 was 1(1,1) pid=22233 (unix)
[21:10:36.264] W [22233][Sqlite]: (0) LOCK    59 SHARED was NONE(NONE,0) pid=22233 (unix)
[21:10:36.264] W [22233][Sqlite]: (0) LOCK    59 SHARED ok (unix)
[21:10:36.264] W [22233][Sqlite]: (0) READ    59     16      24 0
[21:10:36.264] W [22233][Sqlite]: (0) LOCK    59 RESERVED was SHARED(SHARED,1) pid=22233 (unix)
[21:10:36.264] W [22233][Sqlite]: (0) LOCK    59 RESERVED ok (unix)
[21:10:36.265] W [22233][Sqlite]: (0) OPENX   60  /storage/extSdCard/Be-on-road/packages-journal 0400102
[21:10:36.265] W [22233][Sqlite]: (0) OPENDIR 61  /storage/extSdCard/Be-on-road
[21:10:36.265] W [22233][Sqlite]: (0) OPEN    60  /storage/extSdCard/Be-on-road/packages-journal
[21:10:36.266] W [22233][Sqlite]: (0) WRITE   60    512       0 0
[21:10:36.266] W [22233][Sqlite]: (0) WRITE   60      4     512 0
[21:10:36.266] W [22233][Sqlite]: (0) WRITE   60   1024     516 0
............ lots of write
[21:10:36.269] W [22233][Sqlite]: (0) WRITE   60   1024    3612 0
[21:10:36.269] W [22233][Sqlite]: (0) WRITE   60      4    4636 0
[21:10:36.272] W [22233][Sqlite]: (0) OPENX   62  /storage/extSdCard/Be-on-road/etilqs_nX2uuug04YJMBLG 0500302
[21:10:36.273] W [22233][Sqlite]: (0) OPEN    62  
[21:10:36.273] W [22233][Sqlite]: (778) os_unix.c:27158: (5) write() - 
[21:10:36.273] W [22233][Sqlite]: (0) WRITE   62     -1       0 0
[21:10:36.273] W [22233][Sqlite]: (778) statement aborts at 22: [UPDATE app_info SET db_version=:NEW_VERSION] 
[21:10:36.273] W [22233][Sqlite]: (0) READ    60      4    4624 0
[21:10:36.275] W [22233][Sqlite]: (0) READ    60      4    1540 0
............ lots of read
[21:10:36.276] W [22233][Sqlite]: (0) READ    60      4    4636 0
[21:10:36.276] W [22233][Sqlite]: (0) READ    60      4    4624 0
[21:10:36.276] W [22233][Sqlite]: (0) CLOSE   -1 
[21:10:36.276] W [22233][Sqlite]: (0) CLOSE   -1 
[21:10:36.277] W [22233][Sqlite]: (0) UNLOCK  59 1 was 2(2,1) pid=22233 (unix)
[21:10:36.278] W [22233][Sqlite]: (0) UNLOCK  59 0 was 1(1,1) pid=22233 (unix)
[21:10:36.281] E [22233][Sqlite]: Step failed: disk I/O error, code: 778\. Expecting SQLITE_DONE.
[21:10:36.281] E [22233][PackageDb]: Sqlite error: disk I/O error on query UPDATE app_info SET db_version=:NEW_VERSION
[21:10:36.282] E [22233][UpdaterService]: Failed to initialize package database on service start. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:34:44.093

我们终于在 SGS III 上解决了这个问题，这是一个很好的解决方法——我们将临时文件默认存储在内存中，而不是 sd 卡（SQLITE_TEMP_STORE=2 编译参数），它似乎可以工作。

# ruby-on-rails - 不是 rails 实例变量的条件

> ID：13798830
> 
> 赞同：0
> 
> 时间：2012-12-10T10:12:46.557
> 
> 标签：ruby-on-rails

我有一个约会成员的哈希值，并尝试在我的 rails 控制器中创建一个 MySQL 查询。具有来自 map 命令的 ID 的用户（例如 {1,3}）应在查询中排除。例如@appointment.members.map{|m| m.user_id} 返回 {1,3,5} 我想找到除这些之外的所有其他用户。

```
@users = User.where( "id NOT IN (?)", @appointment.members.map{|m| m.user_id} ) 
```

我使用的是 Rails 3.2.9，所以我的排除语句可能是错误的，因为我没有从这个查询中得到任何结果。问题不可能是地图数组——我已经测试过了。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:26:58.780

我认为您的`map`方法有问题，试试这个：

```
@users = User.where( "id NOT IN (?)", @appointment.members.map(&:user_id) ) 
```

编辑：为未来的读者删除了错误的语法（如果有）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T12:06:22.880

我用一个新的实例变量解决了这个问题：

```
@members = @appointment.members.all 
```

接着

```
@add_users = User.where( "id NOT IN (?)", @members.map(&:user_id) ) 
```

感谢您的支持

# php - href链接上的php语法问题

> ID：13798832
> 
> 赞同：0
> 
> 时间：2012-12-10T10:12:53.577
> 
> 标签：php

我有这个代码，我想用它来访问带有产品 ID 的页面。

问题是，我没有得到链接上的 id .. 我在这里做错了什么？

```
 echo'<a href="pershkrim.php?id="'.$row["id"].'"">"'.$row["id"].'"</a>'; 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:14:21.593

试试这个：

```
echo'<a href="pershkrim.php?id='.$row["id"].'">"'.$row["id"].'"</a>'; 
```

问题是你的回声你的链接看起来像这样：

```
<a href="pershkrim.php?id="777">"777"</a>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:15:36.127

您有太多引号，它们在链接中的 id 之前关闭

```
echo'<a href="pershkrim.php?id='.$row["id"].'">'.$row["id"].'</a>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T10:15:41.207

改成

```
echo'<a href="pershkrim.php?id='.$row["id"].'">'.$row["id"].'</a>'; 
```

# android - 保存对已发布应用程序的更改是否会更新版本？

> ID：13798833
> 
> 赞同：1
> 
> 时间：2012-12-10T10:13:01.173
> 
> 标签：android, publish

我在 play.google.com 上发布了一个应用程序，然后我对其进行了更改并添加了新的 apk 并保存，而没有取消发布并再次发布它。它会更新应用程序版本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:18:14.297

是的 - 只要您激活了新的 APK，它就会发送给用户（单击 APK 文件选项卡并检查最新版本是活动版本）。

# ruby-on-rails - 设计多个并发登录

> ID：13798834
> 
> 赞同：3
> 
> 时间：2012-12-10T10:13:01.643
> 
> 标签：ruby-on-rails, devise

我有一个现有的 Rails 3 站点。本站使用 Devise 登录。

现在我需要添加一个单独登录的子站点。假设它位于 mysite.com/special。访问 /special 的每个人都需要使用与主站点不同的一组凭据登录。这些凭据对主站点无效，但它们必须同时能够登录到主站点并保持登录状态。

让情况稍微复杂一点的是，“特殊”用户能够冒充普通用户的子集。如果他们确实冒充，退出冒充等等，他们必须保持登录到特殊站点，直到他们明确地在那里注销。

我最初的想法是为整个子站点使用单独的会话 cookie，但我不知道该怎么做。我尝试设置这样的东西，但此时几乎是猜测。

```
scope '/special' do 
    devise_for :special_users, :controllers => { :sessions => "special/sessions" }, :skip => "registrations", :module => "special_users"
    unauthenticated do
      as :special_user do
        root :to => 'special/sessions#new'
      end
    end
end 
```

不幸的是，我对 Rails 有点陌生，这似乎相当复杂。甚至有可能使用设计，如果是这样，是否有人对如何去做有任何指示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T12:17:31.957

事实证明，这就是作用域的用途。当您知道他们如何称呼它时，一切都会变得更有意义；）无论如何，上面 Qumaras 的评论实际上是在正确的轨道上），并且教程和 wiki 通常是很好的信息来源。一种可能的方法：

```
 devise_for :spuser, :controllers => { :sessions => "sp/spusers/sessions"}
  as :spuser do # as = equiv. to devise_scope
    # add spuser specific items here, such as:
    unauthenticated :spuser do
      root :to => 'sp/spusers/sessions#new'
    end
  end 
```

然后，如果您想以普通用户身份登录另一个选项卡，您可以在控制器中执行此操作。

```
def impersonate
  @user = User.first
  sign_in(:user, @user)
  redirect_to '/main'
end 
```

并将模拟操作连接到 routes.rb

```
resources :regularcustomers do
  member do
    get :impersonate
  end
end 
```

然后你可以在视图中调用它：

```
<%= link_to @customer.name, impersonate_regularcustomers_path(@customer), :target => 'impersonationtab' %> 
```

# vb.net - 替换 vb.NET 文件中的“bel”字符

> ID：13798836
> 
> 赞同：2
> 
> 时间：2012-12-10T10:13:09.003
> 
> 标签：vb.net, ssis, replace, hex

我在我的一个数据馈送中遇到了一个我以前从未遇到过的角色

![这就是它在 Notepad++ 视图中的样子](../Images/12dd783720a0e3ae5b5a1cc9ff8e27c5.png)

![这是它在记事本视图中的外观](../Images/721a26cd606678c3b274ae5f227dfffa.png)

上图是 Notepad++ 和 Notepad 视图中的数据馈送。如您所见，它在 Notepad++ 中显示为“BEL”，在记事本中显示为“要点”。

我将如何在 vb.NET 中替换这个字符？

我通过将字符复制并粘贴到替换函数中来尝试在 SSIS 脚本任务中进行简单替换，例如

text = text.Replace("复制粘贴字符", "")

这给出了这个错误

![SSIS 错误](../Images/504c74fe55cdd18703eb2f0a57c796da.png)

非常感谢所有帮助，

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T10:36:51.637

我不知道 SSIS 是什么，但既然您想知道 VB.NET 中的解决方案，那么您尝试过的代码将在这里工作。那是：

```
text = text.Replace("copy and pasted character", "") 
```

在VB中可以正常工作。或者，您可以使用以下内容：

```
text = text.Replace(Chr(7).ToString(), "") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:38:16.503

找出字符的Ascii值是多少，然后用Chr函数消除

IE

```
text = text.Replace(Chr(n), "") 
```

[贝尔] 可能是字符 7

# javascript - 我需要 VPS 还是可以将共享服务器用于 Ajax 可抓取网站？

> ID：13798837
> 
> 赞同：0
> 
> 时间：2012-12-10T10:13:11.997
> 
> 标签：javascript, ajax, seo, hosting

我在 1 和 1 共享服务器上托管了一个网站，我需要我的 ajax 加载内容才能被谷歌机器人抓取......该网站已准备好“hash-bang”，但现在我正在努力处理 escaped_fragment 部分。我必须安装 HtmlUnit、Node.js 或 Zombie.js 来帮助谷歌处理我的 javascript 事件。

现在我不明白在哪里安装这个软件在服务器上？

当我收集信息时，我意识到我可能必须将它托管在虚拟服务器 (VPS) 上才能访问根目录或安装库......我是对的吗？

我对将我的年度托管费用增加三倍只是为了帮助谷歌找到我的内容的想法并不高兴......你知道如何在共享主机上实现可抓取的 ajax 吗？

如果没有，有没有办法将这些库托管在其他地方，同时保持网站现在的位置？

我正在寻找实用信息，因为谷歌在这方面没有多大帮助，而且在线文章并没有真正进入托管部分。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:08:07.863

因此，您通过带有 hashbang URL 的 AJAX 提供博客文章。然后，您需要为支持爬网做的唯一事情就是处理 URL，`_escaped_fragment_=work-stuff`使它们以 HTML 形式返回与通过 AJAX 从相应的 hashbang URL 返回的内容相同的内容`#!work-stuff`。

例如，让我们以您网站的以下 URL 为例：`http://www.youpiemonday.com/#!arcena`. 当浏览器导航到这里时，它会从以下“丑陋”的 URL 接收数据：`http://www.youpiemonday.com/arcena/?_=1355151916735`. 我认为足够做的是处理由爬虫生成的 URL，例如`http://www.youpiemonday.com/?_escaped_fragment_=arcena`，并将它们映射到您为“丑陋” URL 返回的相同内容。这样，您将为索引提供主要内容。

对于无头浏览器，如果您的页面是根据许多小型 AJAX 请求接收到的数据构建的，并且服务器上根本不存在整个页面表示（其主要内容），则将需要它。然后，您可以使用无头浏览器自己“浏览”此类页面，并将生成的页面快照存储在某个缓存中，爬虫可以从中获取纯 html 版本。

对我来说，查看网站后，答案是否定的——你不需要 VPS。

# javascript - 现代浏览器的 ECMA 脚本功能支持表 通缉

> ID：13798838
> 
> 赞同：2
> 
> 时间：2012-12-10T10:13:14.353
> 
> 标签：javascript, cross-browser

几乎所有人都看过[quirksmode](http://quirksmode.org)浏览器对 CSS（和其他一些特性）的支持表。他们看起来棒极了。

我正在寻找 ECMA 脚本表，而不是[Dom Features](http://www.quirksmode.org/dom/w3c_core.html)或[JS API](http://caniuse.com/#cats=JS_API)。IE9 支持`Array.indexof()`吗？`Array.map()`? GreaseMonkey vs V8？

我找到[了这个](http://pointedears.de/scripts/test/es-matrix/)，但我认为它**不可读**:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:30:08.223

这个[es5 兼容性表](http://kangax.github.com/es5-compat-table/)可能会提供一些帮助

# android - 多次按下按钮

> ID：13798840
> 
> 赞同：0
> 
> 时间：2012-12-10T10:13:14.983
> 
> 标签：android

多次按下按钮时，我会强制关闭。我有一个条件，比如如果连接了互联网，那么将显示谷歌地图。如果没有连接互联网，那么我会一直显示警报框以检查我们的互联网连接。所以问题就在这里。如果在按下按钮一次时未连接互联网，则会显示警报框。但是，如果多次单击它会显示强制关闭。我已将警报框显示放置在 catch 块中。

```
 case R.id.geocode_button:   // Place name as selected by the user.

            placeName = placeText.getText().toString();
            clik=1;         
            placenametemp = placeName;
            System.out.println(""+placenametemp);

            String [] optionArray = new String[numberOptions];
            Geocoder gcoder = new Geocoder(this);

            try
            { 
                              ///// code to display google map 

            } 
            catch (IOException e)
            {
            if(!dialogShown)
                {
                    dialogShown = true;
                    //Show your dialog

                new  
        AlertDialog.Builder(this).setIcon(R.drawable.icon).setTitle(
                " Check your Internet  
        Connection!").setPositiveButton("OK",
                new DialogInterface.OnClickListener()
                {

                    @Override
                    public void onClick(DialogInterface dialog,  
                     int which)
                    {
                        dialogShown = false;    
                        // TODO Auto-generated method stub
                        dialog.cancel();
                    }
                }).show();

                Log.e("Geocoder", "I/O Failure; is network    
                                                                available?",e);
            }
                          } 
```

```
//The LOG cat details : 
```

```
 12-10 18:31:09.506: E/Geocoder(238): I/O Failure; is network available?
    12-10 18:31:09.506: E/Geocoder(238): java.io.IOException: Unable to parse response from server
    12-10 18:31:09.506: E/Geocoder(238):    at android.location.Geocoder.getFromLocationName(Geocoder.java:166)
    12-10 18:31:09.506: E/Geocoder(238):    at com.journey.snoozer.Mapper.onClick(Mapper.java:93)
    12-10 18:31:09.506: E/Geocoder(238):    at android.view.View.performClick(View.java:2364)
    12-10 18:31:09.506: E/Geocoder(238):    at android.view.View.onTouchEvent(View.java:4179)
    12-10 18:31:09.506: E/Geocoder(238):    at android.widget.TextView.onTouchEvent(TextView.java:6540)
    12-10 18:31:09.506: E/Geocoder(238):    at android.view.View.dispatchTouchEvent(View.java:3709)
    12-10 18:31:09.506: E/Geocoder(238):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    12-10 18:31:09.506: E/Geocoder(238):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    12-10 18:31:09.506: E/Geocoder(238):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    12-10 18:31:09.506: E/Geocoder(238):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    12-10 18:31:09.506: E/Geocoder(238):    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    12-10 18:31:09.506: E/Geocoder(238):    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
    12-10 18:31:09.506: E/Geocoder(238):    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
    12-10 18:31:09.506: E/Geocoder(238):    at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
    12-10 18:31:09.506: E/Geocoder(238):    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
    12-10 18:31:09.506: E/Geocoder(238):    at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
    12-10 18:31:09.506: E/Geocoder(238):    at android.os.Handler.dispatchMessage(Handler.java:99)
    12-10 18:31:09.506: E/Geocoder(238):    at android.os.Looper.loop(Looper.java:123)
    12-10 18:31:09.506: E/Geocoder(238):    at android.app.ActivityThread.main(ActivityThread.java:4363)
    12-10 18:31:09.506: E/Geocoder(238):    at java.lang.reflect.Method.invokeNative(Native Method)
    12-10 18:31:09.506: E/Geocoder(238):    at java.lang.reflect.Method.invoke(Method.java:521)
    12-10 18:31:09.506: E/Geocoder(238):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    12-10 18:31:09.506: E/Geocoder(238):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    12-10 18:31:09.506: E/Geocoder(238):    at dalvik.system.NativeStart.main(Native Method)
    12-10 18:31:10.277: E/ActivityThread(238): Failed to find provider info for com.google.settings
    12-10 18:31:10.296: E/ActivityThread(238): Failed to find provider info for com.google.settings
    12-10 18:31:10.426: E/ActivityThread(238): Failed to find provider info for com.google.settings
    12-10 18:31:11.626: I/MapActivity(238): Handling network change notification:CONNECTED
    12-10 18:31:11.626: E/MapActivity(238): Couldn't get connection factory client
    12-10 18:31:11.926: D/dalvikvm(238): GC freed 3247 objects / 233880 bytes in 241ms
    12-10 18:31:11.936: E/DEBUGTAG(238): Remote Image Exception
    12-10 18:31:11.936: E/DEBUGTAG(238): android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
    12-10 18:31:11.936: E/DEBUGTAG(238):    at android.view.ViewRoot.checkThread(ViewRoot.java:2683)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at android.view.ViewRoot.requestLayout(ViewRoot.java:557)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at android.view.View.requestLayout(View.java:7918)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at android.view.View.requestLayout(View.java:7918)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at android.view.View.requestLayout(View.java:7918)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at android.view.ViewGroup.removeAllViews(ViewGroup.java:2146)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:196)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at android.app.Activity.setContentView(Activity.java:1622)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at com.journey.snoozer.ShowTheMap.mapProgress(ShowTheMap.java:143)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at com.journey.snoozer.ShowTheMap$loadImageTask.doInBackground(ShowTheMap.java:197)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at com.journey.snoozer.ShowTheMap$loadImageTask.doInBackground(ShowTheMap.java:1)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
    12-10 18:31:11.936: E/DEBUGTAG(238):    at java.lang.Thread.run(Thread.java:1096)
    12-10 18:31:12.756: D/dalvikvm(238): GC freed 7692 objects / 597720 bytes in 68ms
    12-10 18:31:12.886: D/dalvikvm(238): GC freed 5342 objects / 404384 bytes in 62ms
    12-10 18:31:13.296: E/WindowManager(238): Activity com.journey.snoozer.Mapper has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44ea2bc8 that was originally added here
    12-10 18:31:13.296: E/WindowManager(238): android.view.WindowLeaked: Activity com.journey.snoozer.Mapper has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@44ea2bc8 that was originally added here
    12-10 18:31:13.296: E/WindowManager(238):   at android.view.ViewRoot.<init>(ViewRoot.java:227)
    12-10 18:31:13.296: E/WindowManager(238):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
    12-10 18:31:13.296: E/WindowManager(238):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
    12-10 18:31:13.296: E/WindowManager(238):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
    12-10 18:31:13.296: E/WindowManager(238):   at android.app.Dialog.show(Dialog.java:239)
    12-10 18:31:13.296: E/WindowManager(238):   at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
    12-10 18:31:13.296: E/WindowManager(238):   at com.journey.snoozer.Mapper.onClick(Mapper.java:141)
    12-10 18:31:13.296: E/WindowManager(238):   at android.view.View.performClick(View.java:2364)
    12-10 18:31:13.296: E/WindowManager(238):   at android.view.View.onTouchEvent(View.java:4179)
    12-10 18:31:13.296: E/WindowManager(238):   at android.widget.TextView.onTouchEvent(TextView.java:6540)
    12-10 18:31:13.296: E/WindowManager(238):   at android.view.View.dispatchTouchEvent(View.java:3709)
    12-10 18:31:13.296: E/WindowManager(238):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    12-10 18:31:13.296: E/WindowManager(238):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    12-10 18:31:13.296: E/WindowManager(238):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    12-10 18:31:13.296: E/WindowManager(238):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    12-10 18:31:13.296: E/WindowManager(238):   at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
    12-10 18:31:13.296: E/WindowManager(238):   at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
    12-10 18:31:13.296: E/WindowManager(238):   at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
    12-10 18:31:13.296: E/WindowManager(238):   at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
    12-10 18:31:13.296: E/WindowManager(238):   at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
    12-10 18:31:13.296: E/WindowManager(238):   at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
    12-10 18:31:13.296: E/WindowManager(238):   at android.os.Handler.dispatchMessage(Handler.java:99)
    12-10 18:31:13.296: E/WindowManager(238):   at android.os.Looper.loop(Looper.java:123)
    12-10 18:31:13.296: E/WindowManager(238):   at android.app.ActivityThread.main(ActivityThread.java:4363)
    12-10 18:31:13.296: E/WindowManager(238):   at java.lang.reflect.Method.invokeNative(Native Method)
    12-10 18:31:13.296: E/WindowManager(238):   at java.lang.reflect.Method.invoke(Method.java:521)
    12-10 18:31:13.296: E/WindowManager(238):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    12-10 18:31:13.296: E/WindowManager(238):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    12-10 18:31:13.296: E/WindowManager(238):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:45:45.120

您不能多次显示警报对话框，因此请像这样进行检查

首先创建一个类级变量

```
public boolean dialogShown = false; 
```

然后在这里`case R.id.geocode_button`

```
if(!dialogShown){
dialogShown = true;
//Show your dialog
} 
```

然后在您的对话框`ok`按钮中单击`listener`

```
dialogShown = false; 
```

**更新**

像这样检查您的互联网连接

```
 void boolean checkInternet(){
  NetworkInfo i = conMgr.getActiveNetworkInfo();
  if (i == null)
    return false;
  if (!i.isConnected())
    return false;
  if (!i.isAvailable())
    return false;
  return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T02:37:04.483

正确的。所以首先，这不是检查互联网连接是否可用的方法。但这不是这里的问题。第一个问题是 CalledFromTheWrongThread 异常，这意味着您正试图从另一个线程访问 UI 元素。永远不要那样做。我猜你有一个 AsyncTask 试图以不允许的方式发布一些更新。（在 com.journey.snoozer.ShowTheMap.mapProgress(ShowTheMap.java:143)）

不过这里的主要问题是几行之后的 WindowLeaked 异常。例如，当您退出活动然后尝试访问对话框时，就会发生这种情况。（方向更改等）由于您遇到了涉及 AsyncTask 的另一个异常，我想知道您是否在发生 IO 异常时取消了第一个 AsycTask。

因此，请确保在 onPause() 中的 AsyncTask 上使用 .cancel() 并在任务创建的对话框中使用 dissmiss()。

# php - 在php中使用foreach创建数组

> ID：13798849
> 
> 赞同：-3
> 
> 时间：2012-12-10T10:13:57.127
> 
> 标签：php, arrays

我在数组中遇到问题，我想在多维数组中添加数组。谢谢我的意图是动态检查具有某些值的数组，如果这些值
不存在，我将添加它们

我的代码是：

```
$a=array(array(1,2,3),
    array(4,5,6),
    array(7,8,9),
    array(10,11,12),
);

foreach($a as &$b){
array_push($b,array(1,1,1));

} 

echo "<pre>";
print_r($a); 
```

所需输出：

```
Array
(
[0] => Array
    (
        [0] => 1
        [1] => 2
        [2] => 3

    )

[1] => Array
    (
        [0] => 4
        [1] => 5
        [2] => 6

    )

[2] => Array
    (
        [0] => 7
        [1] => 8
        [2] => 9

    )

[3] => Array
    (
        [0] => 10
        [1] => 11
        [2] => 12

    )
[4] => Array
    (
        [0] => 1
        [1] => 1
        [2] => 1
    )

) 
```

但我变得像这样

```
Array
(
[0] => Array
    (
        [0] => 1
        [1] => 2
        [2] => 3
        [3] => Array
            (
                [0] => 1
                [1] => 1
                [2] => 1
            )

    )

[1] => Array
    (
        [0] => 4
        [1] => 5
        [2] => 6
        [3] => Array
            (
                [0] => 1
                [1] => 1
                [2] => 1
            )

    )

[2] => Array
    (
        [0] => 7
        [1] => 8
        [2] => 9
        [3] => Array
            (
                [0] => 1
                [1] => 1
                [2] => 1
            )

    )

[3] => Array
    (
        [0] => 10
        [1] => 11
        [2] => 12
        [3] => Array
            (
                [0] => 1
                [1] => 1
                [2] => 1
            )

    )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:24:23.187

```
$a = array(
    array(1, 2, 3),
    array(4, 5, 6),
    array(7, 8, 9),
    array(10, 11, 12)
);

array_push($a, array(1, 1, 1));
// or
$a[] = array(1, 1, 1);

echo '<pre>';
print_r($a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:35:40.983

在查看您所需的输出后，这种情况下不需要 foreach。

我认为只推你想要的数组......像这样：

```
$a=array(array(1,2,3),
  array(4,5,6),
  array(7,8,9),
  array(10,11,12),
);
array_push($a,array(1,1,1));
echo "<pre>";
print_r($a); 
```

希望有帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T10:18:22.927

尝试类似：

```
$array=array(
    array(4,5,6),
    array(7,8,9),
    array(10,11,12),
    array(1,1,1)    
); 
```

编辑：如何在循环中填充数组。

我会使用 a `while`，因为它更清楚一点。

```
$x=1;
$array=array();
while($x<6){
    $array[$x]=array(1+$x*3, 2+$x*3, 3+$x*3);
    $x++;
} 
```

这应该输出一个矩阵，如：

```
(4 ,  5,  6)
(7 ,  8,  9)
(10, 11, 12)
(13, 14, 15) 
```

# android - 检测用户是否完成了 Intent.ACTION_VIEW 或者只是点击 BACK

> ID：13798850
> 
> 赞同：1
> 
> 时间：2012-12-10T10:13:58.920
> 
> 标签：android

我有一个 webview，点击一些横幅，我发送 Intent.ACTION_VIEW 来打开浏览器或任何用户认为合适的东西，如下所示：

```
 w.setWebViewClient(new WebViewClient(){
         @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
             if (url != null && url.startsWith("http://")) {
                    view.getContext().startActivity(
                        new Intent(Intent.ACTION_VIEW, Uri.parse(url)));
                    return true;
                } else {

                    return false;
                }

            }

     }); 
```

现在我想要的是找到一种方法来了解用户是在打开浏览器之前点击返回按钮还是他实际打开了浏览器。我发现[了这个](https://stackoverflow.com/questions/8793825/successful-share-intent-for-android)问题，但那里没有解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:43:33.007

你可以做一件事，这可能不是最好的做法，但我认为这会解决你的问题

初始化 =>**布尔 isPageLoading = false;**

```
webview.setWebViewClient(new WebViewClient() {  
 public boolean shouldOverrideUrlLoading(WebView view, String url)  {                  

            return true;    
        }

        public void onPageFinished(WebView view, String url) {
            isPageLoading = false;             
        }
       public void onPageStarted(WebView view, String url, Bitmap favicon){
            isPageLoading = true;
        }
    }); 
```

现在你有正确的指示器来说明页面是否正在加载。

现在在您的活动中覆盖返回按键事件

```
 @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) { // Back key pressed
                    if(isPageLoading){
                       // Do the tasks you want to do when page is loading
                    }else{
                       // Do the tasks you want to do when page loading is finished (or not in progress)
                     }
        return true;
    }
    return super.onKeyDown(keyCode, event);
  } 
```

请注意，您可以通过添加更多布尔变量来更改此功能的行为，这些变量将指示不同的状态信息（例如页面加载是否已开始等）

希望这将解决您提出的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T08:05:08.990

另一种可能的解决方案：使用`startActivityForResult(intent, 1)`代替并以这种方式`startActivity(intent)`检查`requestCode`和：`resultCode`

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == 1) {
        //intent 1 was
        if(resultCode == Activity.RESULT_OK) {
             //successful
        } else {
             //not succusseful
        }
    }
} 
```

这适用于大多数类型的 Intent（电子邮件、相机等）

# performance - 转义下划线时 Postgres 索引行为不一致

> ID：13798851
> 
> 赞同：2
> 
> 时间：2012-12-10T10:13:58.800
> 
> 标签：performance, postgresql, indexing, pattern-matching

我有一个用户表，列键上有一个 text_pattern_ops 索引。问题是键列中的数据有下划线，需要转义。有两种方法（我知道）来转义下划线，并且只有在其中一种中实际使用了索引。谁能解释为什么会这样？

我已经为以下两个查询粘贴了解释分析的结果。

查询一：

```
EXPLAIN ANALYZE
select distinct userid from user
where userstatus IN ('Active')
and ( key like E'999999999_434153_%' or parentid = 434153) ; 
```

查询计划：

```
HashAggregate  (cost=340685.17..340687.84 rows=267 width=4) (actual time=22678.760..22678.760 rows=0 loops=1)
  ->  Seq Scan on user  (cost=0.00..340684.50 rows=267 width=4) (actual time=22678.754..22678.754 rows=0 loops=1)
        Filter: (((userstatus)::text = 'Active'::text) AND (((key)::text ~~ '999999999_434153_%'::text) OR (parentid = 434153)))
Total runtime: 22678.879 ms 
```

查询 2：

```
EXPLAIN ANALYZE
select distinct userid from user
where userstatus IN ('Active')
and ( key like '999999999\\_434153\\_%' or parentid = 434153) ; 
```

产生警告：

```
WARNING:  nonstandard use of \\ in a string literal
LINE 1: ...userstatus IN ('Active') and ( key like '999999999...
                                                             ^
HINT:  Use the escape string syntax for backslashes, e.g., E'\\'. 
```

查询计划：

```
HashAggregate  (cost=344.50..347.17 rows=267 width=4) (actual time=226.127..226.127 rows=0 loops=1)
  ->  Bitmap Heap Scan on user  (cost=11.09..343.83 rows=267 width=4) (actual time=226.123..226.123 rows=0 loops=1)
        Recheck Cond: (((key)::text ~~ '999999999\\_434153\\_%'::text) OR (parentid = 434153))
        Filter: (((userstatus)::text = 'Active'::text) AND (((key)::text ~~ '999999999\\_434153\\_%'::text) OR (parentid = 434153)))
        ->  BitmapOr  (cost=11.09..11.09 rows=84 width=0) (actual time=226.121..226.121 rows=0 loops=1)
              ->  Bitmap Index Scan on user_key_idx  (cost=0.00..5.44 rows=1 width=0) (actual time=145.758..145.758 rows=0 loops=1)
                    Index Cond: (((key)::text ~>=~ '999999999_434153_'::text) AND ((key)::text ~<~ '999999999_434153`'::text))
              ->  Bitmap Index Scan on user_parentid_key1  (cost=0.00..5.52 rows=84 width=0) (actual time=80.358..80.358 rows=0 loops=1)
                    Index Cond: (parentid = 434153)
Total runtime: 226.256 ms 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:30:17.717

您混淆了两个级别的转义。

1.  Posix 风格的转义字符串`E'foo'`。检查您的设置[`standard_conforming_strings`](http://www.postgresql.org/docs/current/interactive/runtime-config-compatible.html#GUC-STANDARD-CONFORMING-STRINGS)。

2.  [`LIKE`运算符](http://www.postgresql.org/docs/current/interactive/functions-matching.html#FUNCTIONS-LIKE)的模式，其中`_`具有可以转义的特殊含义。我引用手册：

    > 要匹配文字下划线或百分号而不匹配其他字符，pattern 中的相应字符必须以转义字符开头。默认转义字符是反斜杠，但可以使用 ESCAPE 子句选择不同的转义字符。要匹配转义字符本身，请编写两个转义字符。

该索引只能用于左锚定模式。如果`_`模式中间有下划线 ( )，则不能使用索引。就像在这个模式表达式中一样：

```
key like E'999999999_434153_%' 
```

在模式中间未转义`_`，任何单个字符的通配符 - 可能无法将 B-tree 索引与 一起使用`text_pattern_ops`，尤其是在旧版本中。另请参阅[@Richard 的评论](https://stackoverflow.com/questions/13798851/postgres-index-behaviour-inconsistent-when-escaping-underscore/13799096#comment18980708_13799096)。

在这种模式中，`_`转义了，这意味着它代表文字`_`，而不是单个字符的通配符-> 未使用的索引。

```
key like '999999999\\_434153\\_%' 
```

假设你有`standard_conforming_strings = OFF`. `standard_conforming_strings = ON`这样会导致模式寻找可能不使用索引的文字`\`和通配符。`_`

您可能对附加模块感兴趣[`pg_trgm`](http://www.postgresql.org/docs/current/interactive/pgtrgm.html)，它允许支持*任何* `LIKE`表达式的 GiST 或 GIN 索引。[在此处](https://dba.stackexchange.com/questions/10694/pattern-matching-with-like-similar-to-or-regular-expressions-in-postgresql/10696#10696)和[此处](https://dba.stackexchange.com/questions/2195/how-is-like-implemented/10856#10856)的 dba.SE 相关答案中了解更多信息

# css - 创建一个可滚动的 Span

> ID：13798852
> 
> 赞同：1
> 
> 时间：2012-12-10T10:13:59.347
> 
> 标签：css

我有以下 DIV，它主要有两个部分 - 左和右。右侧部分有一些图像，我并不担心。令人担忧的是 span class="left"。我无法为其添加滚动条。

```
<div id="about">
        <span class="quoted">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris </span><br/>

        <span class="left"><span class="paragraph_title">ABOUT</span><br/>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?"<br/><br/>
        At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident, similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum fuga. Et harum quidem rerum facilis est et expedita distinctio. Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus. Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptates repudiandae sint et molestiae non recusandae. Itaque earum rerum hic tenetur a sapiente delectus, ut aut reiciendis voluptatibus maiores alias consequatur aut perferendis doloribus asperiores repellat<br/><br/>

        Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciun<br/><br/>       

        </span>

        <div class="right">
            <ul>
                <li><span class="paragraph_title">RECENT ACTIVITIES</span></li>
                <li><a href="" data-rel="prettyPhoto[recents]" title="" class="rollover"><img src="" alt="recent project"/></a><a href="#" target="_blank">www.stackoverflow.com</a></li>
                <li><a href="" data-rel="prettyPhoto[recents]" title="" class="rollover"><img src="" alt="recent project"/></a><a href="#" target="_blank">www.stackoverflow.com</a></li>
                <li><a href="" data-rel="prettyPhoto[recents]" title="" class="rollover"><img src="" alt="recent project"/></a><a href="#" target="_blank">www.stackoverflow.com</a></li>
            </ul>
        </div>
    </div> 
```

和关于 div 的一些 CSS

```
#about {
    position: absolute;
    padding: 0px 0px 0px 30px;
    top: 210px;
    opacity: 0;
    display: none;
    z-index: 8;
    overflow: auto;
}

#about .quoted {
    font-size: 21px;
    font-weight: 300;
    line-height: 27px;
    color: #4bc9f2; 
    text-shadow: 0px 2px 2px #000;
}

#about .paragraph_title {
    font-size: 14px;
    font-weight: 700;
    color: #4bc9f2; 
    line-height: 28px;
}

#about .left {
    font-size: 13px;
    font-weight: 300;
    line-height: 16px;
    color: #fff;    
    float: left;
    padding: 60px 0px 0px 0px;
    width: 490px;
} 
```

如何将滚动条添加到 Span 标签并使其垂直滚动而不是水平滚动。您可以假设跨度高度是任何值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T10:52:34.050

> 如何将滚动条添加到 Span 标签并使其垂直滚动而不是水平滚动。您可以假设跨度高度是任何值。

为了在跨度上执行此操作，您将需要那些 CSS

```
display: block;
overflow: auto; 
```

然后，如果跨度使用浮点数或没有合适的容器，您可能需要应用高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:49:42.537

如果我没记错，垂直滚动可以这样完成：

```
overflow-y:scroll 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-10T06:11:02.717

给出高度和溢出属性

```
style="height: 114px;overflow: scroll !important;" 
```

# c# - 应用程序在后台时的 C# KeyBinding

> ID：13798857
> 
> 赞同：1
> 
> 时间：2012-12-10T10:14:13.137
> 
> 标签：c#, key-bindings

> **可能重复：**
> [如何使用 WPF 和 .NET 3.5 注册全局热键以说出 CTRL+SHIFT+(LETTER)？](https://stackoverflow.com/questions/48935/how-can-i-register-a-global-hot-key-to-say-ctrlshiftletter-using-wpf-and-ne)

我想为我的 WPF 应用程序创建一个快捷方式。

应用程序在大多数情况下应该是不可见的，当按下 Ctrl+N 时应用程序应该会出现。我试图这样做：

```
Mcommand m = new Mcommand();
KeyBinding b = new KeyBinding()
{
  Command = m,
  Modifiers = ModifierKeys.Control,
  Key = Key.Q
 }; 
```

m 在应用程序可见时执行。但是当应用程序不可见时，它就不起作用了。任何想法 ？谢谢你。

# excel - 行数据分区 - 一侧的行中的空列值和非空的另一侧

> ID：13798858
> 
> 赞同：0
> 
> 时间：2012-12-10T10:14:14.277
> 
> 标签：excel, vbscript, vba

我想知道一个VBscript，我可以通过它移动一侧的空行值和另一侧的非空值保持数据描述完整。这可以使用循环技术来完成。但是如果可以使用 VBscript 实现的话，我想要一些更快的过程。

***输入表***

```
Code                Error-I                          Error-II                          Error-III

           Type-1    Type-2    Type-3        Test-A      Test-B    Test-C          Prog-A  Prog-B  Prog-C   

Code-A               Yes         No                                  Yes              X              Z     

Code-B                           No                        Yes       Yes                      Y      Z

Code-C              Yes                       Yes                     No                             Z 
```

***输出表***

```
Code                Error-I                          Error-II                          Error-III

           Type-1    Type-2                   Test-A      Test-B                    Prog-A  Prog-B   

Code-A        Yes       No                     Yes                                     X     Z     

Code-B        No                               Yes        Yes                          Y     Z

Code-C        Yes                              Yes         No                          Z 
```

***更新***：移位后，如果发现组中的列不包含单个数据，则应将该列从工作表中删除。

我为所有列集编写了以下代码，但它产生了不正确的数据移位。你能说我哪里错了吗？

```
Option Explicit

Dim objExcel1
Dim strPathExcel1
Dim objSheet1
Dim row,col1,col2
Dim TotlColumnSet : TotlColumnSet =3
Dim AssColmuns : AssColmuns=3
Dim EachColumnSet, ColStart, ColEnd

Set objExcel1 = CreateObject("Excel.Application")
strPathExcel1 = "D:\VA\Copy of Test.xlsx"
objExcel1.Workbooks.open strPathExcel1
Set objSheet1 = objExcel1.ActiveWorkbook.Worksheets(1)

ColStart = 2
For EachColumnSet = 1 To TotlColumnSet

  For row = 3 To 5
    ' find the first empty cell in the row
    col1 = ColStart'2
    ColEnd = ColStart + AssColmuns
    Do Until IsEmpty(objSheet1.Cells(row, col1)) Or col1 > ColEnd-1'4
      col1 = col1 + 1
    Loop

    ' collapse right-hand cells to the left
    If col1 < ColEnd-1 Then '4
      ' proceed only if first empty cell is left of the right-most cell
      ' (otherwise there's nothing to do)
      col2 = col1 + 1
      Do Until col2 > ColEnd-1'4
        ' move content of a non-empty cell to the left-most empty cell, then
        ' increment the index of the left-most empty cell (the cell right of
        ' the former left-most empty cell is now guaranteed to be empty)
        If Not IsEmpty(objSheet1.Cells(row, col2).Value) Then
          objSheet1.Cells(row, col1).Value = objSheet1.Cells(row, col2).Value
          objSheet1.Cells(row, col2).Value = Empty
          col1 = col1 + 1
        End If
        col2 = col2 + 1
      Loop
    End If
  Next

  ColStart = ColEnd

Next

'=======================
objExcel1.ActiveWorkbook.SaveAs strPathExcel1
objExcel1.Workbooks.close
objExcel1.Application.Quit
'====================== 
```

***更新：***

由于错误，我没有在输出表列 Type-3、Test-C、Prog-C 中显示。但他们应该在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T19:14:05.963

如果我对您的理解正确，您想折叠左侧的每一列。如果是这样，结果中的列标题确实具有误导性。

工作表是否总是有 3 行，每组 3 列，每组 3 列？在这种情况下，您可以简单地使用单元格的绝对位置。第一组列的示例：

```
filename = "..."

Set xl = CreateObject("Excel.Application")
xl.Visible = True

Set wb = xl.Workbooks.Open(filename)
Set ws = wb.Sheets(1)

For row = 3 To 5
  ' find the first empty cell in the row
  col1 = 2
  Do Until IsEmpty(ws.Cells(row, col1)) Or col1 > 4
    col1 = col1 + 1
  Loop

  ' collapse right-hand cells to the left
  If col1 < 4 Then
    ' proceed only if first empty cell is left of the right-most cell (otherwise
    ' there's nothing to do)
    col2 = col1 + 1
    Do Until col2 > 4
      ' move content of a non-empty cell to the left-most empty cell, then
      ' increment the index of the left-most empty cell (the cell right of the
      ' former left-most empty cell is now guaranteed to be empty)
      If Not IsEmpty(ws.Cells(row, col2).Value) Then
        ws.Cells(row, col1).Value = ws.Cells(row, col2).Value
        ws.Cells(row, col2).Value = Empty
        col1 = col1 + 1
      End If
      col2 = col2 + 1
    Loop
  End If
Next 
```

# asp.net - 如何获得干净的 ASP.Net 错误页面？

> ID：13798865
> 
> 赞同：6
> 
> 时间：2012-12-10T10:14:34.817
> 
> 标签：asp.net, iis, xhtml

当我在 IIS(6.0) 上的 ASP.Net(3.5) 站点出现应用程序错误时，我得到了肮脏的 HTML 代码。

我想使用**自动生成的 XHTML 代码**，这对于解析答案的 Web 服务会很好......（我对编写自定义页面不感兴趣）。

有没有办法指定它？

**编辑：示例**

例如，为 404 错误生成的页面，我想要干净的 XHTML 代码，但我不想自己编写，ASP.Net 模块可以做到吗？

```
<html>
    <head>
        <title>La ressource est introuvable.</title>
        <style>
         body {font-family:"Verdana";font-weight:normal;font-size: .7em;color:black;} 
         p {font-family:"Verdana";font-weight:normal;color:black;margin-top: -5px}
         b {font-family:"Verdana";font-weight:bold;color:black;margin-top: -5px}
         H1 { font-family:"Verdana";font-weight:normal;font-size:18pt;color:red }
         H2 { font-family:"Verdana";font-weight:normal;font-size:14pt;color:maroon }
         pre {font-family:"Lucida Console";font-size: .9em}
         .marker {font-weight: bold; color: black;text-decoration: none;}
         .version {color: gray;}
         .error {margin-bottom: 10px;}
         .expandable { text-decoration:underline; font-weight:bold; color:navy; cursor:hand; }
        </style>
    </head>

    <body bgcolor="white">

            <span><H1>Erreur du serveur dans l'application '/</b>/MyVirtualDirectory'.<hr width=100% size=1 color=silver></H1>

            <h2> <i>La ressource est introuvable.</i> </h2></span>

            <font face="Arial, Helvetica, Geneva, SunSans-Regular, sans-serif ">

            <b> Description : </b>HTTP 404\. ...
            <br><br>

            <b> URL demandée: </b>/MyVirtualDirectory/MyService.aspx<br><br>

            <hr width=100% size=1 color=silver>

            <b>Informations sur la version :</b>&nbsp;Version Microsoft .NET Framework :2.0.50727.3053; Version ASP.NET :2.0.50727.3634

            </font>

    </body>
</html> 
```

**编辑**

我想，上面的 HTML 是由 ASPX 页面生成的，有没有地方可以找到它？为了获得灵感并将其翻译成 XHTML，我将使用@Remko 3rd 解决方案来指定自定义错误页面。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T14:21:59.217

有几种方法可以处理 ASP.NET 中的错误并控制响应的内容。注意：所有方法都要求您编写自己的自定义 XHTML 代码（尽管您说您对编写自定义页面不感兴趣）

1.  在页面级别：将 Page_Error 事件处理程序添加到您的页面。

    ```
    public void Page_Error(object sender,EventArgs e)
    {
        Exception objErr = Server.GetLastError().GetBaseException();
        Response.Write("<p>Your perfectly formatted XHTML code.</p>");
        Server.ClearError();
    } 
    ```

    如果您调用`Server.ClearError()`该错误将不会由 ASP.NET 处理，并且您将不会获得默认的错误页面。

2.  在应用程序级别：将 Application_Error 事件处理程序添加到 Global.asax。

    ```
    protected void Application_Error(object sender, EventArgs e)
    {
        Exception objErr = Server.GetLastError().GetBaseException();
        Response.Write("<p>Your perfectly formatted XHTML code.</p>");
        Server.ClearError();
    } 
    ```

3.  `web.config`在文件中指定自定义错误页面

    ```
    <customErrors mode="On" defaultRedirect="myperfectxhtmlerror.aspx" > 
    ```

有关更详细的说明，请参阅：[如何在 ASP.NET 中创建自定义错误报告页面](http://support.microsoft.com/kb/306355)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T14:35:28.130

除了上面答案中的大部分内容之外，您还可以尝试：

[自定义错误的 HTTP 模块](http://www.codeproject.com/Articles/16171/An-HTTP-Module-for-ASP-NET-Error-Handling)

使用它您可以指定输出 HTML，虽然这种方式不需要完整的自定义页面，但仍需要您编写少量 HTML。

# c# - 图像按钮下的文本

> ID：13798867
> 
> 赞同：0
> 
> 时间：2012-12-10T10:14:37.570
> 
> 标签：c#, asp.net, visual-studio-2010

> **可能重复：**
> [c#asp.net 3.5 中图像按钮上的文本](https://stackoverflow.com/questions/262141/text-on-an-image-button-in-c-sharp-asp-net-3-5)

我有一个图像按钮。我想在它下面添加一个文本。我正在使用 VS 2010。谁能告诉我如何将文本添加到图像按钮？

```
<asp:ImageButton ID="ImageButton1" runat="server" ImageUrl="Images/Icon_Variante1.jpg" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:23:36.417

您不能将文本添加到图像按钮。如果你想在它下面添加一些，在需要的位置添加一个标签控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:16:47.310

```
.btnBg
{
   background:url("../imagepath");
}

<asp:Button ID="Button2" CssClass="btnBg" runat="server" Text="Button" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T10:26:33.287

如果要在按钮**下**添加文本，则应在按钮后添加标签。然后将标签和按钮放入容器并为其更改样式。下面的一个例子

```
 <div style="width:100px;">
        <div>
            <asp:ImageButton runat="server" ID="BUTTON" ImageUrl="IMAGE_URL" />
        </div>
        <div>
            <asp:Label runat="server" ID="Label1" Text="TEXT FOR BUTTON"></asp:Label>
        </div>
    </div> 
```

# java - 在没有巨大列表参数的情况下重写 Hibernate 查询

> ID：13798868
> 
> 赞同：9
> 
> 时间：2012-12-10T10:14:37.990
> 
> 标签：java, sql, hibernate, postgresql

在我的数据库中，我有一个`zip`带有`code`列的表。用户可以上传邮政编码列表，我需要找出哪些已经在数据库中。目前，我使用以下 Hibernate 查询 (HQL) 执行此操作：

```
select zip.code from Zip zip
where zip.code in (:zipCodes) 
```

该`:zipCodes`参数的值是用户上传的代码列表。但是，在我使用的 Hibernate 版本中，有[一个错误](https://hibernate.onjira.com/browse/HHH-2166)会限制此类列表参数的大小，有时我们会超出此限制。

所以我需要找到另一种方法来确定数据库中已经存在哪些（可能很长）邮政编码列表。以下是我考虑过的几个选项

## 选项 A

使用 SQL 而不是 HQL 重写查询。虽然这将避免 Hibernate 错误，但我怀疑如果需要检查 30,000 个邮政编码，性能将会很糟糕。

## 选项 B

将邮政编码列表拆分为一系列子列表，并对每个子列表执行单独的查询。同样，这将避免 Hibernate 错误，但性能可能仍然很糟糕

## 选项 C

使用临时表，即将要检查的邮政编码插入到临时表中，然后将其连接到`zip`表中。看起来这个解决方案的查询部分应该执行得相当好，但是临时表的创建和最多 30,000 行的插入不会。但也许我的方法不对，这就是我在伪 Java 代码中的想法

```
/**
 * Indicates which of the Zip codes are already in the database
 *
 * @param zipCodes the zip codes to check
 * @return the codes that already exist in the database
 * @throws IllegalArgumentException if the list is null or empty
 */
List<Zip> validateZipCodes(List<String> zipCodes) {

  try {
    // start transaction

    // execute the following SQL
    CREATE TEMPORARY TABLE zip_tmp
    (code VARCHAR(255) NOT NULL) 
    ON COMMIT DELETE ROWS;

    // create SQL string that will insert data into zip_tmp
    StringBuilder insertSql = new StringBuilder()

    for (String code : zipCodes) {
      insertSql.append("INSERT INTO zip_tmp (code) VALUES (" + code + ");")
    }     

    // execute insertSql to insert data into zip_tmp

    // now run the following query and return the result   
    SELECT z.*
    FROM zip z
    JOIN zip_tmp zt ON z.code = zt.code

  } finally {
    // rollback transaction so that temporary table is removed to ensure
    // that concurrent invocations of this method operate do not interfere
    // with each other
  }    
} 
```

有没有比上面的伪代码更有效的方法来实现这一点，还是有其他我没有想到的解决方案？我正在使用 Postgres 数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:26:55.240

将数据库中的所有邮政编码加载到列表中。并在用户输入的邮政编码列表上执行`removeAll(databaseList)`.

问题解决了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:23:18.417

美国大约有 45'000 个邮政编码，而且似乎每年都会更新。如果这是一项年度工作，请不要用 java 编写它。创建一个 sql 脚本，将邮政编码加载到一个新表中并编写一个插入语句

`insert XXX into zip where zip.code not in (select code from ziptemp)`

让你的操作人员每年运行一次这个两行 SQL 脚本，不要在 Java 代码中购买。另外，如果您将其排除在 Java 之外，您基本上可以采取任何方法，因为没有人关心它是否在非高峰时间运行了 30 分钟。

*分而治之*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T11:10:00.587

假设您针对包含 100000 条记录的表“验证”1000 个代码，其中代码是主键并具有聚集索引。

*   选项 A 不是改进，Hibernate 将构建相同的 SELECT ... IN ... 您可以自己编写。
*   选项 B 以及您当前的查询可能无法使用索引。
*   如果您确定邮政编码不会在任意时间更改（这不太可能），或者如果您可以从尝试处理现有代码中恢复过来，选项 D 可能会很好。
*   选项 C（创建一个临时表，发出 1000 个 INSERT 语句并在单个 SELECT 中将 1000 行与 100000 行连接起来）与仅针对单个新代码发出 1000 个简单且索引友好的查询相比没有竞争力：

    选择 COUNT(*) 从 Zip WHERE Zip.code = :newCode

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:23:19.537

选项 D：
从数据库中加载所有现有的邮政编码（分页？）并在您的应用程序中进行比较。

关于您的选项 A：
我记得 SQL 查询长度的限制，但那是在 DB2 上，我不知道 PostgreSQL 是否有限制。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-10T10:27:16.540

您是否尝试过使用子查询 IN ？

[http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/criterion/Subqueries.html](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/criterion/Subqueries.html)

会是这样的

```
DetachedCriteria dc = DetachedCriteria.forClass(Zip.class, "zz");
//add restrictions for the previous dc

Criteria c = session.createCriteria(Zip.class, "z");
c.add(Subqueries.in("z.code" dc)); 
```

对不起，如果我弄错了代码，因为我不使用 Hibernate，所以需要一段时间

# php - MySQL - INNER JOIN 到另一台服务器

> ID：13798869
> 
> 赞同：0
> 
> 时间：2012-12-10T10:14:49.793
> 
> 标签：php, mysql, join, cloud, inner-join

我有一个问题，如何在两个数据库服务器之间 INNER JOIN 两个表...

如果一台服务器中的 INNER JOIN 可以，但是两台呢？

任何想法 ？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:28:21.370

您可以连接来自多个服务器的表，您可以使用 Spider 存储引擎检查此链接[http://spiderformysql.com/product.html](http://spiderformysql.com/product.html)

# javascript - 通过 `print()` 打印不会打印 Firefox 中的所有页面

> ID：13798872
> 
> 赞同：-2
> 
> 时间：2012-12-10T10:15:15.797
> 
> 标签：javascript, firefox, printing

我想知道通过在 Firefox 中使用 JavaScript 来使用打印选项。

我有一个包含打印链接的页面：

```
<a href="javascript:print()">print</a> 
```

我也按照关于 Javascript 的[打印按钮](http://javascript.about.com/library/blprint.htm)页面上的说明进行操作。

问题是当我尝试在 Firefox 下打印页面时，我得到一个四页的 PDF 预览，其中缺少内容：

*   第一页是空的，
*   第二个将从应该在第三页上的内容开始，并且
*   第三页和第四页是空的

我尝试使用 Chrome，它按预期工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T10:19:37.723

获得一致打印行为的最佳方法是使用打印样式表。这准确定义了应该如何打印哪些内容，因为浏览器在这方面存在很大差异。某些浏览器在某些标记方面存在问题（例如浮动元素）。

**[您可以在A List Apart](http://www.alistapart.com/articles/goingtoprint/)**上找到一篇关于打印样式表的非常好的文章，它应该对您很有帮助。

当然可能还有其他更新的好文章，但这篇 ALA 文章是如此基础，即使它已有 10 年的历史，它仍然值得一读——这就像网络内容的石器；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-13T19:20:11.400

这都是因为 Firefox 无法处理不同的容器样式。我使用 UIkit 并通过将以下代码添加到我的 CSS 文件来解决此问题：

```
@media print
{   
    .uk-grid {
        display: inline !important
    }
} 
```

您可能想为您使用的类设置“显示：内联！重要”。

# jquery - 动画切换 从右向左滑动输入搜索

> ID：13798873
> 
> 赞同：2
> 
> 时间：2012-12-10T10:15:16.203
> 
> 标签：jquery, animation, toggle, slide

**我在这里做了一些事情，我只是想让输入从右向左滑动。**

[http://jsfiddle.net/5Gq7L/5/](http://jsfiddle.net/5Gq7L/5/)

我使用简单的代码来显示和隐藏输入字段，

```
 $("#edit-search-block-form--2").animate({width:'toggle'},500); 
```

**任何帮助。谢谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:23:29.630

我将您的输入字段放在一个 div 中，并将链接和包装器 div 的浮动设置为左侧：

```
<div id="input_wrapper">
  <input type="text" id="search2" name="search_block_form" value="" size="30" maxlength="128" >
</div> 
```

这迫使 div 从左到右移动。

这是更新的小提琴：http: [//jsfiddle.net/robertp/5Gq7L/10/](http://jsfiddle.net/robertp/5Gq7L/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:39:02.073

据我了解，您的问题是将文本输入从右向左滑动。

jQuery 不提供从左侧或右侧滑动元素，因此您可以使用 jQuery 提供的 animate 方法来实现这一点。

这是我实现这个的方式：

```
$("#showhide").toggle(function() {
$("#search2").animate({'margin': '-=100px'}, 500);
      $(this).toggleClass("closed");
}, function() {
$("#search2").animate({'margin': '+=100px'}, 500);
      $(this).toggleClass("closed");
}); 
```

你可以在这里检查一个小提琴：

> **[http://jsfiddle.net/5Gq7L/11/](http://jsfiddle.net/5Gq7L/11/)**

# objective-c - 如何在 TableView 中显示字典数据

> ID：13798875
> 
> 赞同：0
> 
> 时间：2012-12-10T10:15:17.733
> 
> 标签：objective-c, ipad, ios4

我正在使用 Json 解析数据，目前数据在字典中可用，并且它也可以在数组中使用，现在我想在表视图中显示该数据。可以请一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:44:58.047

```
NSMutableDictionary* dicts = parseJSON;
...
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;
{
    return dicts.count;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: @"myCell"];    
    if (cell == nil) {
        cell =  [[[ UITableViewCell alloc ] initWithFrame:CGRectZero] autorelease];
    }
    cell.textLabel = [[dicts objectIndex:indexPath.row] objectforkey:@"namefield"];
    return cell;
} 
```

# asana - 如何在 Asana 中归档子任务？

> ID：13798876
> 
> 赞同：5
> 
> 时间：2012-12-10T10:15:20.987
> 
> 标签：asana

如何在 Asana 中归档子任务？归档任务很容易，但我找不到归档子任务的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T22:41:30.500

在这里搜索后，我通过 Twitter 将问题定向到 @asana 并收到以下回复：“还没有子任务存档 - 但它在我们的列表中。” [请参阅https://twitter.com/asana/status/280760677457608704](https://twitter.com/asana/status/280760677457608704)上的 Twitter 帖子

# cassandra - 如果我在 Cassandra 的压缩正在进行时添加记录怎么办？

> ID：13798878
> 
> 赞同：0
> 
> 时间：2012-12-10T10:15:28.093
> 
> 标签：cassandra

我是卡桑德拉的新手。我的密钥空间很小（大约 1GB）。我正在使用循环将 10000 条记录添加到该密钥速度中。如果为我当前添加记录的密钥空间启动压缩作业会发生什么？记录插入是否会在循环中间暂停还是会发生其他情况？..

提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T21:41:17.017

压缩发生在后台，不会影响数据的加载。

# c# - 将 X509Certificate2 证书转换为 BouncyCastle X509Certificate

> ID：13798879
> 
> 赞同：14
> 
> 时间：2012-12-10T10:15:28.710
> 
> 标签：c#

我有一个 System.Security.Cryptography.X509Certificates.X509Certificate2 的对象。我需要将其转换为 Org.BouncyCastle.X509.X509Certificate 的对象。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-05-29T09:21:03.897

使用`Org.BouncyCastle.Security.DotNetUtilities.FromX509Certificate`，它接受 a`System.Security.Cryptography.X509Certificates.X509Certificate`并返回 a `Org.BouncyCastle.X509.X509Certificate`。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-10T11:06:07.890

我已经有一段时间没有玩 Bouncy Castle 了。基本上取 X509Certificate2.RawData 并将其传递给 BC X509Certificate 构造函数。

如果我没记错的话，BC 有一个`Org.BouncyCastle.Security.DotNetUtilities`. 这应该允许您导入证书。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-11-30T12:41:08.697

这是我的做法（BouncyCastle.Crypto 版本 1.8.1.0）：

```
var cert = new Org.BouncyCastle.X509.X509CertificateParser()
    .ReadCertificate(x509Certificate2.GetRawCertData()); 
```

在其他答案中`Org.BouncyCastle.Security.DotNetUtilities.FromX509Certificate(X509Certificate)`也提到了作品。

# c# - 当您关闭表单时，仍在运行的后台工作人员会发生什么？

> ID：13798880
> 
> 赞同：7
> 
> 时间：2012-12-10T10:15:31.077
> 
> 标签：c#, winforms, backgroundworker

或者问题的另一个方面是：在编码后台工作人员时，我是否应该处理表单关闭的可能性？

例如，我有在后台工作人员中执行 SQL 查询（不可取消）的代码，然后在日历控件中完成“加粗”日期以匹配从查询返回的日期。

我很好奇后台工作人员在这种情况下设计做什么？- 不触发`RunWorkerComplete`事件？- 在函数调用中忽略对对话框的`RunWorkerComplete`调用，因为它不再是窗口？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T10:22:44.313

如果您要关闭的表单是主（也就是唯一）表单，那么后台工作线程将随着应用程序的关闭而自动关闭。

如果它不是主窗体，那么后台线程将继续运行。在这种情况下，您应该在关闭表单时手动中止后台线程

# rdf - 什么是 dbpedia 和其他中使用的 blankInfoSec 属性

> ID：13798887
> 
> 赞同：2
> 
> 时间：2012-12-10T10:15:51.713
> 
> 标签：rdf, semantic-web, dbpedia

问题在标题中。属性[http://dbpedia.org/property/blankInfoSec](http://dbpedia.org/property/blankInfoSec)可以在一些文档中找到。例如[http://dbpedia.org/page/Barcelona](http://dbpedia.org/page/Barcelona)。

dbpedia 胡言乱语中这个属性的含义是什么？它是如何使用的？它的语义是什么（天哪，我开始像一个真正的语义网络极客一样说话了）。

:)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:18:37.513

显然，该属性没有语义意义。`languages_type`文章的信息框没有使用和配对，而是`languages`使用自定义键值对（`blank_name_sec1`和`blank_info_sec1`）。这些名称来自信息框模板。您会发现 Country 模板有语言键值对，但 Settlement 模板没有。

可以参考原文章的标注（`{{Infobox settlement}}`section）和[Template:Infobox](http://en.wikipedia.org/wiki/Template%3aInfobox_settlement)的设置。

# css - 如何水平拉伸我的下拉菜单并突出显示所选菜单项？

> ID：13798893
> 
> 赞同：1
> 
> 时间：2012-12-10T10:16:29.150
> 
> 标签：css, drop-down-menu, html-lists

我正在使用来自 [http://www.lwis.net/free-css-drop-down-menu/的下拉菜单](http://www.lwis.net/free-css-drop-down-menu/)

我的菜单有 Home|About|Register|Login 我希望菜单看起来像

首页|关于|注册|登录<------------------stretch to end ----------------->

我现在正在做的是创建一个额外的 li 并在其中添加“ ”。代码如下

```
<div id="mymenu">
<ul class="dropdown dropdown-horizontal">
<li class="first"><a href="/home">Home</a></li>
<li><a href="/about">About</a></li>
<li><a href="/reg">Register</a></li>
<li><a href="/login">Login</a></li>
<li class="last"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li>
</ul>   
</div> 
```

有一个更好的方法吗？另外，我如何突出显示选择的菜单项，例如，如果我单击主页，则应突出显示菜单主页。

# sharedpreferences - 无法在应用程序中的远程服务和活动之间共享共享首选项？

> ID：13798894
> 
> 赞同：0
> 
> 时间：2012-12-10T10:16:31.333
> 
> 标签：sharedpreferences

我尝试使用 API 级别 11 以上的 MULTI_MODE_PROCESS。但我仍然没有在活动中更新值，并且在远程服务中更新了值。即使在 froyo、姜饼版本中，我也无法在远程服务和活动中分享偏好。这是 Android 中的错误吗？我们有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:11:20.533

没有代码，不清楚你在做什么，但我猜你和我一开始做的一样：只需将现有的调用更改`getSharedPreferences()`为使用`MULTI_MODE_PROCESS`并期望同步。这还不够；`getSharedPreferences()`在访问可能已被另一个进程更改的 SharedPreferences 之前，您还必须再次调用（使用多进程标志）。

# perl - Perl nginx REST CGI::Application

> ID：13798896
> 
> 赞同：1
> 
> 时间：2012-12-10T10:16:38.700
> 
> 标签：perl, rest, cgi-application

我正在尝试将一个简单的基于 CGI::Application::Dispatch 的 REST 应用程序从 Apache 服务器转换为 Nginx。该应用程序在 Apache 下运行良好，但在 Nginx 下运行时，只有 Dispatch 请求的根层工作——即 /app。路径的任何其他部分，例如 /app/doit，都会导致调用失败并显示 Forbidden。

我怀疑我需要更改将 URL 传递给 fastcgi 的方式，但我不清楚如何拆分它。我能够找到的大多数示例都是在存在 dispatcher.cgi 类型的脚本时进行拆分，但是由于 C:A:D 期望被称为 /app 并期望看到 URL 的 /doit 部分，所以我我不确定如何实现它。

我当前的位置块是：

```
 location /app {
    root /var/www;
    gzip off;
    include /etc/nginx/fastcgi_params;
    fastcgi_pass unix:/var/run/fcgiwrap.socket;
    fastcgi_index index.pl;
    fastcgi_param SCRIPT_FILENAME $fastcgi_script_name;
    } 
```

Apache 中的设置非常简单：

```
ScriptAlias /app/ /var/www/app/
    <Directory "/var/www/app">
            AllowOverride None
            Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
            Order allow,deny
            Allow from all
    </Directory> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:01:38.120

可能会调整您的位置，例如
位置 ~ ^/app/.*.pl$

# c++ - 为什么编译器可以通过引用传递和值传递来重载函数

> ID：13798897
> 
> 赞同：13
> 
> 时间：2012-12-10T10:16:38.620
> 
> 标签：c++, function, reference, overloading

我认为在重载期间，编译器会检查形式参数是否属于同一类型。例如：

```
void a(int x)
void a(double x) 
```

可以仅仅因为两个“x”具有不同的类型而重载。

但是，以下两个有不同的类型吗？

```
void f(int y)
void f(int& y) 
```

我知道一个是 PBV，另一个是 PBR。但是第二个 y 也有“int”类型，对吧？为什么编译成功？

PS我注意到虽然它编译了，但它没有运行，报告运行时不明确的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-10T10:19:04.677

从广义上讲，函数可以在以下基础上重载：

*   参数数量
*   *参数*类型**
**   论证顺序*

 *该示例可以编译，因为它满足第二个条件。
`int`并且`int &`是不同的*数据类型*。

* * *

考虑以下示例：

```
void foo(int i);
void foo(int& i);
void foo(int i){}
void foo(int& i){}
int main()
{
     return 0;
} 
```

上面的代码可以编译，因为它是有效代码。根据传递给函数的函数参数，编译器可能/可能不会检测到函数调用的最佳匹配。因此，函数本身可以共存，但它们在某些方面的使用可能会导致编译器产生歧义。

例如：在以下代码中，文字不能绑定到非常量引用，因此函数调用的唯一候选者是非引用版本，这应该可以编译并正常工作：

```
void foo(int i);
void foo(int& i);
void foo(int i){}
void foo(int& i){}
int main()
{
    foo(20); 
    return 0;
} 
```

但，

```
void foo(int i);
void foo(int& i);
void foo(int i){}
void foo(int& i){}
int main()
{
    int i = 10;
    foo(i);
    return 0;
} 
```

以上将导致编译器产生歧义，因为编译器无法检测到两个函数调用之间的最佳匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T10:30:30.580

让我们调用 f(x)，其中 x 是一个 int。

> $13.3.3.1.4 - “当引用类型的参数直接绑定（8.5.3）到参数表达式时，隐式转换序列是恒等转换，除非参数表达式的类型是参数类型的派生类，在这种情况下，隐式转换序列是派生到基转换"

因此 f(int &) 是完全匹配的，f(int) 也是如此，因为两者都是身份转换。因此模棱两可

现在让我们接听电话'f(2)'

这很好，因为 'f(int &)' 根本不匹配，因为右值不绑定到非 const 左值。因此，没有歧义

因此，该标准允许 'f(T)' abd 'f(T &)' 形成一个重载集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T10:26:57.313

首先，歧义总是在编译时报告。

其次，您的示例是否编译取决于您如何使用此功能

```
void f(int y)
{
}
void f(int& y)
{
}

int main ()
{
    int a = 10;

    f (a); // ERROR: ambiguous call
    f (10); // OK
} 
```

在第一种情况下有一个错误，因为`a`可以作为副本和引用传递。在第二种情况下不会出错，因为`int`字面量不能通过非常量引用传递

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-10T10:27:02.597

那要看。如果您不从代码中调用这些函数，编译器可能会将它们优化掉。如果没有，您可以使用文本查看器打开 .obj 文件并搜索函数名称（给它一个比 更唯一的名称`f`，例如`floop`:-)），您将看到两个使用您的基本函数名称的名称。

但是，如果您确实尝试使用它们，那么您会注意到不同之处。如果你打电话

```
f(5); 
```

编译器只能使用`f(int y)`版本，因为不可能通过引用传递常量。但如果你这样做

```
int b = 10;
f(b); 
```

然后编译器会发出一个混淆错误，因为这两种`f`形式都可以这样调用。*

# c - c/fortran 函数内存分析工具

> ID：13798898
> 
> 赞同：0
> 
> 时间：2012-12-10T10:16:41.590
> 
> 标签：c, memory

我遇到了一些问题，其中我的应用程序为发布和调试模式提供了不同的结果。是否有任何工具可以用来检查两种模式之间函数的内存映射差异和变量值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:43:19.217

如果您使用的是类 Unix 操作系统，您可能想看看[Valgrind](http://valgrind.org/)。调试和发布模式之间的输出差异通常是由于可执行文件具有不同的内存布局，因此暴露了与内存相关的错误，而这些错误在其他情况下是不可见的。

# apache - 守护进程模式下的 Apache 和 mod_wsgi。没有显示额外的过程？

> ID：13798899
> 
> 赞同：0
> 
> 时间：2012-12-10T10:16:43.423
> 
> 标签：apache, mod-wsgi, wsgi

我已经通过添加成功地测试并在守护进程模式下运行了一个简单的 wsgi 应用程序。

```
WSGIDaemonProcess wsgi_proc
WSGIProcessGroup  wsgi_proc 
```

我希望将新流程打印出来

```
ps aux| grep wsgi_proc 
```

然而事实并非如此，但 wsgi 应用程序运行良好。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:24:42.190

阅读 WSGIDaemonProcess 的“显示名称”选项的文档。

*   [http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIDaemonProcess](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIDaemonProcess)

# delphi - Delphi可以插入Excel 2007/2010表格吗

> ID：13798904
> 
> 赞同：2
> 
> 时间：2012-12-10T10:16:50.697
> 
> 标签：delphi, vba, delphi-xe2, excel-2010

我有一个将大量数据转储到 Excel 的 Delphi XE2 应用程序。

当我们使用 Excel 2010 时，用户询问是否可以将该数据格式化为**表格**，即在标题行中使用内置过滤器和搜索工具

查看 VBA 它应该相当简单

```
ActiveSheet.ListObjects.Add(xlSrcRange, Range("$A1:$Z$999"), , xlYes).Name = "fee" 
```

1）我知道要转换的范围

2) **TExcelApplication**和**TExcelWorkbook**都将**ActiveSheet**列为可用属性

这就是问题所在

3) 这些都不**会将 ListObjects**列为可用。

我假设这是因为 Delphi 只支持 Excel 2000 或 Excel 2003 nativly。那么有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T13:06:20.800

> 这是因为 Delphi 本身只支持 Excel 2000 或 Excel 2003

1) Delphi 本身不支持任何 Excel。这一切都是通过手动调整的 OCX 导入完成的，您可以随时进行自己的导入！

Delphi 菜单：Component / Import COMpionent / Type Library / excel.exe

2) 但如果您谈论 Delphi XE2，它包含`c:\RAD Studio\9.0\OCX\Servers\pas2010\Excel2010.pas`为您手动调整的内容

因此，Delphi 为您提供了 3 个设计时包：

*   c:\RAD Studio\9.0\bin\dcloffice `2010`160.bpl
*   c:\RAD Studio\9.0\bin\dcloffice `2K`160.bpl
*   c:\RAD Studio\9.0\bin\dcloffice `xp`160.bpl

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T10:32:32.337

我认为那是因为 ActiveSheet 是作为 IDispatch 公开的。您可以先进行类型转换：

```
var
  w: ExcelWorksheet;
begin
  w := ExcelApplication1{....}.ActiveSheet as ExcelWorksheet;
  w.ListObjects.DoAsYouWish; 
```

如果这确实是一个根本不可用的新特性，你可以导入一个更新的类型库。您可能需要先卸载包含当前 TExcelApplication 对象的包。之后：

*   转到`Component`->`Import Component...`
*   选择“导入类型库”并单击“下一步”
*   选择正确的类型库，我认为它被命名为`Microsoft Excel 14.0 Object Library`.
*   选择要安装组件的调色板页面，或键入一个新页面，例如 Office 2010
*   选中该框`Generate component wrapper`，它将为您提供一个 TExcelApplication 组件。
*   点击下一步
*   选择安装到新包中，然后单击下一步
*   选择文件名并键入程序包名称 (Office 2010)。
*   点击完成

您现在将拥有一个新单元，但在这个单元中（我只是按照这些步骤操作），ActiveSheet 仍然是一个 IDispatch，因此您仍然需要我最初发布的类型转换。

# c - 如何使用由 mmap 加载的共享库

> ID：13798905
> 
> 赞同：0
> 
> 时间：2012-12-10T10:16:56.440
> 
> 标签：c, mmap

在`Expert C Programming`P101一书中，有一段话：

`For example, if you have eight XViewTM applications running, only one copy of the XView library text segment has to be mapped into memory. The first process's mmap [1] call will result in the kernel mapping the shared object into memory. The next seven process mmaps will cause the kernel to share the existing mapping in each process. Each of the eight processes will share one copy of the XView library in memory. If the library were statically linked, there would be eight individual copies consuming more physical memory and causing more paging.`

由于 mmap 只返回内存的指针，我想知道如何使用变量或调用库中定义的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:31:28.963

这是描述系统自动使用的机制。除了将您的程序与共享库链接以利用此共享之外，您无需执行任何操作。您当然不需要调用`mmap()`自己，或者弄清楚如何以某种特殊方式调用函数。

# iphone - 文本字段的自动完成功能

> ID：13798906
> 
> 赞同：0
> 
> 时间：2012-12-10T10:16:59.110
> 
> 标签：iphone, ios, autocomplete, uitextfield

我正在为文本字段完成自动完成文本字段功能。我已经完成了，但性能时间很慢，这意味着当我按下键盘上的任何字符时，首先字母正在缩放，然后一段时间后它会显示在文本字段中。实际上我的自动完成功能列表取自服务 url。需要的是，只要我在键盘上键入一个字符，我就需要它在几秒钟内显示出来。我知道在服务中检查它需要一些时间url 及其列表。但至少如果我能比现在更快地获得它，那将是 gud。

这是我正在处理的代码。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    if(textField==CompanyName)
    {

        autocompleteTableView.hidden = NO;

        NSString *substring = [NSString stringWithString:textField.text];
        substring = [substring stringByReplacingCharactersInRange:range withString:string];
        [self searchAutocompleteEntriesWithSubstring:substring];
        return YES;
        if([CompanyName.text length]==0)
        {
            autocompleteTableView.hidden = YES;

        }
    }

}

- (void)searchAutocompleteEntriesWithSubstring:(NSString *)substring {

    NSString *urlString= [NSString stringWithFormat:@"http://221.190.132.116/services/AutoCompService.svc/GetEmpNames/?p=%@",substring];     
    NSURL *jsonUrl =[NSURL URLWithString:urlString];
    NSURLRequest *request = [NSMutableURLRequest requestWithURL:jsonUrl];
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    parser = [[NSXMLParser alloc] initWithData:data];
    currentHtmlElement=@"5";
    [parser setDelegate:self];
    [parser setShouldProcessNamespaces:NO];
    [parser setShouldReportNamespacePrefixes:NO];
    [parser setShouldResolveExternalEntities:NO];
    [parser parse];
    [parser release];

    if([arr4 count]!=0)
    {
         self.autocompleteUrls = [[NSMutableArray alloc] init];
         if(autocompleteTableView)
             [autocompleteTableView removeFromSuperview];
         autocompleteTableView = [[UITableView alloc] initWithFrame:CGRectMake(10, 110, 195, [arr4 count]*30) style:UITableViewStyleGrouped];
         autocompleteTableView.delegate = self;
         autocompleteTableView.dataSource = self;
         autocompleteTableView.scrollEnabled = YES;
         autocompleteTableView.backgroundColor = [UIColor lightTextColor];
         autocompleteTableView.rowHeight=28;
         autocompleteTableView.separatorStyle = UITableViewCellSeparatorStyleNone;
         [self.view addSubview:autocompleteTableView];
         [autocompleteUrls removeAllObjects];
         for(int i=0;i<[arr4 count];i++)
         {
             NSString *curString = [[arr4 objectAtIndex:i] valueForKey:@"Name"];
             [autocompleteUrls addObject:curString];

         }

     }
     [autocompleteTableView reloadData];
}];

     }
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
    CompanyName.text = selectedCell.textLabel.text;
    autocompleteTableView.hidden=YES;

}

} 
```

我怎样才能交替完成这个功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:58:48.430

与其发送同步请求，不如发送一个异步请求，并在完成后让它更新表

```
 NSString *urlString= [NSString stringWithFormat:@"http://221.190.132.116/services/AutoCompService.svc/GetEmpNames/?p=%@",substring];     
   NSURL *jsonUrl =[NSURL URLWithString:urlString];       
   NSURLRequest *request = [NSMutableURLRequest requestWithURL:jsonUrl];
   NSOperationQueue *queue = [[NSOperationQueue alloc] init];
   [NSURLConnection sendAsynchronousRequest:request queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
       parser = [[NSXMLParser alloc] initWithData:data];
       /* parse as before */ 
       [autocompleteTableView reloadData];
   }]; 
```

您可能应该在发出新请求之前取消当前请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:33:47.447

您可以使用`NSURLConnection`has 方法来异步执行请求。您只需给它一个委托或完成块，它会在请求完成时调用您。

试试这个例子[http://x-techteam.blogspot.in/2011/10/asynchronous-web-service-client-using.html](http://x-techteam.blogspot.in/2011/10/asynchronous-web-service-client-using.html)

# mysql - 如何在mysql中的表中创建动态列

> ID：13798909
> 
> 赞同：0
> 
> 时间：2012-12-10T10:17:10.170
> 
> 标签：mysql, dynamic

我有一个问题，请你告诉我。

*   是否有可能在 MySQL 中创建动态列？
*   有没有办法在查询（插入、更新）时创建列？
*   有什么方法可以创建列，就像在插入行时创建行一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:52:33.697

您可以使用`ALTER TABLE` [命令](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)向表中添加列；在你做的时候添加一个专栏`INSERT`对我来说听起来不可行，即使有可能我也会劝阻它。在运行语句*之前*，您应该知道要在哪些列中插入值。`INSERT`我的选择是在`ALTER`你的表前`INSERT`声明。

也就是说，你为什么需要这个？如果您真的需要动态添加列，我感觉到您的数据库设计存在干扰:)

# c# - 增加处理时间

> ID：13798911
> 
> 赞同：-1
> 
> 时间：2012-12-10T10:17:19.687
> 
> 标签：c#

我有一段代码可以比较和验证日期。

**问题：**

此代码在执行期间花费了太多时间。当我评论此代码时，执行所需的时间要少得多。从这里我可以理解这段代码有一些开销。请提出建议以提高此代码的效率。

```
DateTime regDate;
DateTime dob;

extractDate(buffer[5], buffer[6], out regDate, out dob);

private void extractDate(string date, string rDate, out DateTime regDate, out DateTime dob)
{
    if (date == "")     // Date of birth is not given;
    {
        regDate = getStandardDate(rDate);   // MM/DD/YYYY
        dob = regDate.AddYears(-18);
    }
    else
    {
        dob = getStandardDate(date);
    }

    if (rDate == "")
    {
        dob = getStandardDate(date);
        regDate = dob.AddYears(18);
    }
    else
    {
        regDate = getStandardDate(rDate);
    }
} 

private DateTime getStandardDate(string date)
{
    bool checkDate = isValidDate(date);
    if (checkDate)
    {
        IFormatProvider culture = new System.Globalization.CultureInfo("en-gb", true);
        DateTime dt;
        if (karachiDateFormat)
        {
            dt = DateTime.Parse(date);
        }
        else
        {
            dt = DateTime.Parse(date, culture);
        }

        return dt.Date;
    }
    else
    {
        return DateTime.Now.Date;
    }
}

private bool isValidDate(string date)
{
    IFormatProvider culture = new System.Globalization.CultureInfo("en-gb", true);
    DateTime Ttime;
    if (!karachiDateFormat)
    {
        Ttime = DateTime.Parse(date, culture);
    }
    else
    {
        Ttime = DateTime.Parse(date);
    }

    date = string.Empty;
    date = Ttime.Date.ToShortDateString();
    string[] splitDate = date.Split('/');

    int day = Int32.Parse(splitDate[1]);
    int month, year;
    month = Int32.Parse(splitDate[0]);

    year = Int32.Parse(splitDate[2]);
    DateTime time = DateTime.Now;
    if ((day > 0 && day < 32) && (month > 0 && month <= 12) && (year > 1950 && year < time.Year))
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:35:49.970

我相信您可以通过更改 isValidDate 方法来加速您的代码。据我了解，您验证文本是否与日期模式匹配。我会尝试完全删除此方法并`DateTime.Parse`在您的 getStandardTime 中替换为`DateTime.TryParse`This 将负责验证和解析。请参阅此处[DateTime.TryParse 方法](http://msdn.microsoft.com/en-us/library/system.datetime.tryparse.aspx)

如果您需要对日期进行一些验证，请使用 DateTime 结构而不是字符串表示。

此外，您正在解析两个日期（日期和 rDate）。也许使用[Parallel.Invoke](http://msdn.microsoft.com/en-us/library/dd992634.aspx)可能会有所帮助，但我不确定这一点。

```
 private void extractDate(string date, string rDate, out DateTime regDate, out DateTime dob)
    {
        Parallel.Invoke(
            () =>
            {
                if (date == "")     // Date of birth is not given;
                {
                    regDate = getStandardDate(rDate);   // MM/DD/YYYY
                    dob = regDate.AddYears(-18);
                }
                else
                {
                    dob = getStandardDate(date);
                }
            },
        () =>
        {

            if (rDate == "")
            {
                dob = getStandardDate(date);
                regDate = dob.AddYears(18);
            }
            else
            {
                regDate = getStandardDate(rDate);
            }
        });
    }

    private DateTime getStandardDate(string date)
    {
        IFormatProvider culture = new System.Globalization.CultureInfo("en-gb", true);
        DateTime dt;
        if (karachiDateFormat)
        {
            if (!DateTime.TryParse(date, out dt))
                dt = DateTime.Now.Date;
        }
        else
        {
            if (!DateTime.TryParse(date, culture, out dt))
                dt = DateTime.Now.Date;
        }
    } 
```

# hibernate - 更新多对多的属性

> ID：13798917
> 
> 赞同：1
> 
> 时间：2012-12-10T10:17:43.287
> 
> 标签：hibernate, many-to-many, hibernate-mapping, hbm

*我在表Student*和*Course*之间存在多对多关联，它们通过*StudentCourse*连接。 *StudentCourse有一个名为**Grade*的额外属性。为了让学生访问特定课程的成绩，我在**Student.hbm.xml**中编写了以下映射：

```
<map name="coursesGrades" table="StudentCourse" lazy="false" cascade="save-update" inverse="true">
    <key column="studentId" />
    <map-key-many-to-many class="Course" column="courseId" />
    <element type="integer" column="grade" />
</map> 
```

获取数据时，一切似乎都很棒。但是，当尝试更新成绩时，我得到一个**违反唯一约束的**异常，因为 hibernate 没有更新行，而是尝试插入具有相同 studentId 和 courseId（定义为唯一）的新行。

所以我的问题是：我**如何让休眠通过 studentId 和 courseId 更新地图？**

**StudentCourse.hbm.xml**看起来像这样：

```
<class name="StudentCourse" table="StudentCourse"...>       
        <composite-id name="pk" class="StudentCoursePK">
            <key-many-to-one name="Student" column="studentId"/>
            <key-many-to-one name="Course" column="courseId"/>
        </composite-id>
        <property name="grade" type="integer"/>         
</class> 
```

任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T19:34:30.613

**由于您将courseGrades**映射的 inverse 设置为 true ，这意味着**Student**不是此关系的所有者，因此它不会更新成绩。你如何准确地更新你的数据？另外我不了解您的**StudentCourse**类映射，在 Student 中定义的映射是否足以映射 StudentCourse 表？

# javascript - https连接和ajax请求

> ID：13798918
> 
> 赞同：0
> 
> 时间：2012-12-10T10:17:47.403
> 
> 标签：javascript, jquery, asp.net, asp.net-2.0

我有一个使用 HTTPS 的网站。在那里，我使用 jQuery AJAX 从服务器访问 webMethoid。这个 webMethod 是通过 HTTPS 调用的吗？它安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:21:43.703

> 这个 webMethod 是通过 https 调用的吗

是的。如果不是，ajax 调用会因为[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)而失败，这要求发出调用的文档和调用使用相同的协议。（当然，除非您使用的是[CORS](http://www.w3.org/TR/access-control/)）。

> 它安全吗？

如果“安全”是指“受 SSL 保护”，是的。

如果“安全”是指“免受用户欺骗”（例如，在投票站点上反复投票），**则不**，用户*可以*欺骗它，因此对这类事情的检查必须在服务器端进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:21:34.090

如果您的站点在`https`，您也可以通过调用您的方法`https`。它和您设计的一样安全。`SSL`只是您网站安全的一部分。

# php - Facebook PHP api 未捕获的 OAuthException 错误

> ID：13798922
> 
> 赞同：1
> 
> 时间：2012-12-10T10:18:06.597
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在为我的应用程序使用 FB 的 php SDK（版本 3.2.0），`FB Login`当我尝试使用 `facebook->getUser()` methode 获取用户 ID 时，它返回用户 ID，但是当我尝试使用 methode 获取用户数据时 `facebook->api('/me')`它返回错误

> 未捕获的 OAuthException：必须使用活动访问令牌来查询有关当前用户的信息

如果我没有登录 FB 并通过 FB 登录链接登录，两者都可以工作。如果登录FB并尝试获取用户数据，总是会导致错误

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T13:12:45.870

首先检查 user_id，如果它为 null，则重新授权用户，如下例所示：http: [//developers.facebook.com/docs/reference/php/facebook-api/](http://developers.facebook.com/docs/reference/php/facebook-api/)

# c# - 在 Windows Store 应用程序的 GridView 中设置 SelectedItem

> ID：13798924
> 
> 赞同：1
> 
> 时间：2012-12-10T10:18:13.210
> 
> 标签：c#, gridview, windows-8, visual-studio-2012, windows-store-apps

我有一个模型对象，它的列表绑定到 Gridview。这是我的模型课

```
public class ItemModel: BindableBase
{

    public override bool Equals(object obj)
    {
        return this.Id == ((ItemModel)obj).Id;
    }

    public override int GetHashCode()
    {
        return Id.GetHashCode();
    }
    public static bool operator ==(ItemModel op1, ItemModel op2)
    {
        return  op1.Id == op2.Id;
    }

    public static bool operator !=(ItemModel op1, ItemModel op2)
    {
        return op1.Id != op2.Id;
    }

    private Guid _id;
    public Guid Id
    {
        set { SetProperty(ref this._id, value); }
        get { return _id; }
    }

    private string _clue;
    public string Clue
    {
        set { this.SetProperty(ref this._clue, value); }
        get { return _clue; }
    }

    private string _boxId;
    public string BoxId
    {
        set { this.SetProperty(ref this._boxId, value); }
        get { return _boxId; }
    }

    public override string ToString()
    {
        return this.Clue;
    } 
```

有两种方法可以在我的页面中加载数据。第一个是整数，第二个是 ItemModel 对象。对于第二种方式，网格必须选择传递给页面的相应项目。所以我的代码如下所示：

```
protected override async void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
    {
        // TODO: Assign a bindable collection of items to this.DefaultViewModel["Items"]

        if (navigationParameter is int)
        {
            BindByBoxId(navigationParameter);
        }
        else if (navigationParameter is ItemModel)
        {
            BindByWordObject(navigationParameter as ItemModel);
        }

    }

    private async void BindByWordObject(ItemRepository passedItem)
    {
        ItemRepository repo = new ItemRepository();
        var boxId = (int)passedItem.BoxId;
        var item = await repo.GetWordsByBox(boxId);
        this.DefaultViewModel["Items"] = item;
        GroupNameTextBlock.Text = passedItem.Box.BoxName;

        itemGridView.SelectedIndex = GetItemIndex(passedItem);
        itemGridView.SelectionChanged += SelectChanged;

    }

    private int GetItemIndex(ItemModel item)
    {
        for(int i =0 ; i<itemGridView.Items.Count; i++)
        {
            if (((ItemModel)itemGridView.Items[i]) == item)
                return i;
        }
        return -1;
    }

    private async void BindByBoxId(object navigationParameter)
    {
        ItemRepository repo = new ItemRepository();
        var boxId = (int)navigationParameter;
        var item = await repo.GetItemsByBox(boxId);
        this.DefaultViewModel["Items"] = item;
        GroupNameTextBlock.Text = item.First().Box.BoxName;
        itemGridView.SelectedValue = -1;
        itemListView.SelectedValue = -1;

        itemGridView.SelectionChanged += SelectChanged;
    } 
```

我尝试`SelectedValue`并且`SelectedItem`（在 Windows 商店应用程序中，它们可以用作 seter 和 geter ）但这些属性永远无法正常工作。我在gridview中选择相应项目的解决方案是遍历gridview的项目并找到项目索引（`GetItemIndex`方法）并使用`SelectedIndex`属性。我想知道有什么替代和优化的方式适合我吗？因为循环大量的项目会很糟糕！！！请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-11T09:08:09.557

一年后，但我今天只有一个类似的问题，并将分享我的发现：

尝试 GridView 事件 DataContextChanged，其中参数 args 与 ObservavleColletion 或 null 一起提供（如果此事件被触发两次，如我的情况）

```
 private void itemGridView_DataContextChanged(FrameworkElement sender, DataContextChangedEventArgs args)
  {
   GridView oGridView = sender as GridView;
   if (oGridView != null && args.NewValue != null)
   {
    ObservableCollection<yourclass> yourCol = args.NewValue as ObservableCollection<yourclass>;
    for(int i= 0; i<yourCol.Count; i++)
     // do your checking...
     if (YourChecking) oGridView.SelectedIndex = i;
   } 
  } 
```

# android - 如何以编程方式使用 android NFC 将图像从一台设备传输到另一台设备

> ID：13798925
> 
> 赞同：2
> 
> 时间：2012-12-10T10:18:12.357
> 
> 标签：android

我只想使用 NFC 以编程方式将图像和文本从我的 android 应用程序传输到另一台设备。我是 android NFC 的新手。所以我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:26:28.417

最简单的方法是使用[`4.1 Beam APIs`](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html#p2p)支持切换到蓝牙以获取更大文件的 。

# mysql - mysql全文搜索部分匹配和引号

> ID：13798926
> 
> 赞同：0
> 
> 时间：2012-12-10T10:18:16.953
> 
> 标签：mysql, full-text-search

在我标准化我的数据库后，我现在在 myiasm 表上使用全文搜索。

我有几个搜索场景

1.  在“你好朋友”中搜索“你好”

2.  在“你好朋友，欢迎来到地狱”中搜索“地狱”

3.  在“和朋友一起玩”中搜索“朋友”

我需要最好的匹配，目前正在使用

```
SELECT cu.ID as UID ,MATCH cu.content AGAINST  ('hell')  as relevance
FROM cht_user cu 
JOIN cht_agent_script cas ON ( cas.UID = cu.ID AND cas.AID = '315') 
WHERE MATCH cu.content AGAINST ('hell')  
ORDER BY relevance DESC 
```

问题是

1.  3号不会给出结果

2.  2号不会给出结果

3.  1 号是唯一可行的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:04:08.447

首先，正如他们在这篇[文章](https://stackoverflow.com/questions/1125678/mysql-fulltext-not-working)中解释的那样，向您的表中添加更多数据。

其次，查看全文停用词：http: [//dev.mysql.com/doc/refman/5.1/en/fulltext-stopwords.html](http://dev.mysql.com/doc/refman/5.1/en/fulltext-stopwords.html)

Mysql 忽略单词列表，您可以在该链接中看到它们。全文搜索会忽略“hello”。

因此，请尝试将更多记录添加到您的表中。然后重做全文索引：

```
OPTIMIZE TABLE cht_user; 
```

如果您仍然遇到问题，请告诉我

希望这可以帮助你

# python - tkinter 插入具有给定边距的文本

> ID：13798930
> 
> 赞同：0
> 
> 时间：2012-12-10T10:18:21.947
> 
> 标签：python, tkinter

我希望我在 Text 小部件中插入的文本行每次都有不同的左边距（取决于它们在标题层次结构中的级别，字处理器样式）：

```
# The Solar system
The Solar System[a] consists of the Sun and its planetary system of ...
  ## Inner Planets
  The four inner or terrestrial planets...
    ### Mercury
    Mercury (0.4 AU from the Sun) is the closest planet to the Sun and... 
```

我知道我可以在标签定义[http://infohost.nmt.edu/tcc/help/pubs/tkinter/text.html](http://infohost.nmt.edu/tcc/help/pubs/tkinter/text.html)中设置 lmargin1/lmargin2 ，但我不想每次必须增加时都创建一个新标签/减少左边距。

没有办法将它作为 text.insert() 的选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:10:56.883

您最好的选择是使用标签。标签既便宜又容易，专门用于解决此类问题。您可以将标签存储在 dict 中并通过缩进级别引用它们，然后您只需在第一次在特定缩进级别添加内容时创建和配置标签。

当然，您也可以使用制表符来缩进一行文本。制表符和使用标签之间的区别在于，使用标签可以在一行文本换行时获得正确的行为，而制表符实际上只是行首的制表符。如果亚麻布缠绕，它将缠绕到左边距而不是行首的位置。

# asp.net - 在专用服务器中将 url 更改为 https 时无法查看网页

> ID：13798933
> 
> 赞同：0
> 
> 时间：2012-12-10T10:18:29.073
> 
> 标签：asp.net, iis-7

两天前，我已将我的 asp.net 网站转移到专用服务器。之前它托管在共享主机中。在付款接受页面中，使用重写 url。

```
If Request.IsSecureConnection = False Then  
         HttpContext.Current.Response.Redirect(HttpContext.Current.Request.Url.AbsoluteUri.Replace("http://", "https://"))
End If 
```

这在共享主机中运行良好。但在专用服务器中显示**“无法连接”**

我该如何解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T10:34:50.060

您的新服务器中似乎没有安装和配置 SSL 证书

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T18:02:47.040

新站点尚未配置为允许超过 443 的 SSL 流量。

您应该验证是否已安装 SSL 证书，并且您的站点的主机标头已配置为使用正确的证书将流量通过 443 路由到您的站点。

尝试按照教程中列出的[这些步骤进行操作。](http://www.iis.net/learn/manage/configuring-security/how-to-set-up-ssl-on-iis)您应该能够修改站点的绑定以处理 HTTPS 请求。

![在此处输入图像描述](../Images/c8f48c57db5905197abf8ab2bf2af9bf.png)

# php - php 函数在数组对象中搜索特定值

> ID：13798940
> 
> 赞同：-3
> 
> 时间：2012-12-10T10:18:56.893
> 
> 标签：php

我有一个这样的数组对象，

```
Array (
    [0] => stdClass Object ( [id] => 247 )
    [1] => stdClass Object ( [id] => 248 )
) 
```

由此，是否有任何功能可以检查`id=222`是否存在。

我试过`in_array()`and `array_search()`，它不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:52:57.487

您可以使用[`array_filter()`](http://php.net/manual/en/function.array-filter.php)指定的回调：

```
$entries = array_filter($arr,
    create_function('$v', 'return $v->id == ' . $id . ';'));

$isPresent = count($entries) > 0;
$firstFound = array_shift($entries); 
```

# c++ - 处理 iOS 触摸以模拟 C++ 输入库的鼠标

> ID：13798944
> 
> 赞同：4
> 
> 时间：2012-12-10T10:19:10.600
> 
> 标签：c++, objective-c, ios

我有现有的跨平台 C++ 代码来处理鼠标输入，方法如下：

```
onMouseDown(x,y,button)
onMouseUp(x,y,button)
onMouseMove(x,y,buttons) 
```

我正在将功能移植到 C++ iOS 应用程序中……根据需要使用最低限度的 Objective-C。我想处理单点触控手势来模拟鼠标功能，这样我就可以将参数传递给现有方法（以及添加多点触控）。

执行此操作的代码会是什么样子，理想情况下，它是一个最小的示例应用程序 - 主要是 OBJ-C/C++ 交互让我感到困惑？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T15:48:20.380

以下是我如何将多点触控传递给 OpenGL 程序的 C++ 代码（使用 1 根或 2 根手指）：

```
// Set this in your ViewController's init code
[self setMultipleTouchEnabled:YES];

// Implement these in ViewController
int touchCount = 0;
UITouch* touch[2];

- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event{ 
    NSArray* array = [touches allObjects];  
    UITouch* touchTemp; 
    int t;
    int touchedPixel[2];

    for(int i = 0; i < [array count]; ++i){
        touchTemp = [array objectAtIndex:i];

        if(touchCount >= 2)
            return;

        if(touch[0] == NULL)    
            t = 0;
        else
            t = 1;      
        touch[t] = touchTemp;

        CGPoint touchLoc = [touch[t] locationInView:(EAGLView *)self.view]; 
        ++touchCount;

        touchedPixel[X] = touchLoc.x;
        touchedPixel[Y] = touchLoc.y;
        mainScreen->push(t, touchedPixel);  // mainScreen is a C++ object for GL drawing.
    }
}

- (void)touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event{
    NSArray* array = [touches allObjects];
    UITouch* touchTemp; 
    int t;
    int touchedPixel[2];

    for(int i = 0; i < [array count]; ++i){
        touchTemp = [array objectAtIndex:i];
        for(t = 0; t < 2; ++t){         // Find the matching touch in the array
            if(touchTemp == touch[t])
                break;
        }       
        if(t == 2)                      // Return if touch was not found
            continue;

        CGPoint touchLoc = [touch[t] locationInView:(EAGLView *)self.view]; 

        touchedPixel[X] = touchLoc.x;
        touchedPixel[Y] = touchLoc.y;
        mainScreen->move(t, touchedPixel);
    }
}

- (void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event{ 
    NSArray* array = [touches allObjects];
    UITouch* touchTemp; 
    int t;
    int touchedPixel[2];

    for(int i = 0; i < [array count]; ++i){
        touchTemp = [array objectAtIndex:i];
        for(t = 0; t < 2; ++t){         // Find the matching touch in the array
            if(touchTemp == touch[t])
                break;
        }       
        if(t == 2)                      // Return if touch was not found
            continue;               

        CGPoint touchLoc = [touch[t] locationInView:(EAGLView *)self.view];

        touch[t] = NULL;
        --touchCount;

        touchedPixel[X] = touchLoc.x;
        touchedPixel[Y] = touchLoc.y;
        mainScreen->release(t, touchedPixel);
    }
}

- (void)touchesCancelled:(NSSet*)touches withEvent:(UIEvent*)event{
    printf("Touch cancelled\n");
    [self touchesEnded:touches withEvent: event];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T11:18:41.963

对于这种情况，我将实现 touchesBegan、Moved andEnded 并将调用转发到 c++ mouseDown/Moved/Up 代码

我会做的示例：假设代码在应用程序的 viewController 中！

```
static UITouch *_trackedTouch = nil;
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    assert(!_trackedTouch && "no multitouch");

    _trackedTouch = [touches anyObject];
    CGPoint pt = [_trackedTouch locationInView:self.view];
    mouseDown(pt.x,pt.y,0);
}
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    assert(_trackedTouch && "no touch began");

    if(![touches containsObject:_trackedTouch])
        return;

    CGPoint pt = [_trackedTouch locationInView:self.view];
    mouseMoved(pt.x,pt.y,0);
}
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    assert(_trackedTouch && "no touch began");

    if(![touches containsObject:_trackedTouch])
        return;

    CGPoint pt = [_trackedTouch locationInView:self.view];
    mouseUp(pt.x,pt.y,0);
} 
```

* * *

关于书籍mhm ...也许：[https](https://stackoverflow.com/questions/5308106/book-recommendations-for-objective-c-for-ios-development) ://stackoverflow.com/questions/5308106/book-recommendations-for-objective-c-for-ios-development（但arent C++有偏见...... objC基于C。除了 ObjC 之外，C++ 只是您可以使用的东西，但是.. 了解 C++ 只能为学习 ObjC 提供有限的帮助）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T00:01:01.630

这适用于单点触控和多点触控用例。我编写了一个存根 c++ 库`oldlib`，名为我在下面的 obj-c 文件中使用。

你可以通过任何你需要的作为`button`. 我的代码通过了触摸 ID。我想你需要检查你的图书馆对那里的期望并相应地改变它。

这是我的代码：

老库

```
#ifndef Quick_oldlib_h
#define Quick_oldlib_h

void onMouseDown(int x,int y,int button);
void onMouseUp(int x,int y,int button);
void onMouseMove(int x,int y,int buttons);

#endif 
```

旧的lib.cpp

```
#include "oldlib.h"
#include <stdio.h>

void onMouseDown(int x,int y,int button)
{
    printf("onMouseDown:%d,%d button:%d\n", x, y, button);
}

void onMouseUp(int x,int y,int button)
{
    printf("onMouseUp:%d,%d button:%d\n", x, y, button);
}

void onMouseMove(int x,int y,int button)
{
    printf("onMouseMove:%d,%d button:%d\n", x, y, button);
} 
```

QViewController.h

```
#import <UIKit/UIKit.h>

@interface QViewController : UIViewController

@end 
```

QViewController.mm <- 注意 MM 扩展，它可以与 C++ 头文件一起编译

```
#import "QViewController.h"
#include "oldlib.h"

@interface QViewController ()
@property (nonatomic, retain) NSMutableSet* active_touches;
@end

@implementation QViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.active_touches = [[NSMutableSet alloc] init];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    for (UITouch* touch in touches) {
        [self.active_touches addObject:touch];
        onMouseDown([touch locationInView:self.view].x, [touch locationInView:self.view].y, (int)(__bridge void*)touch);
    }
}

- (void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    for (UITouch* touch in touches) {
        if ([self.active_touches containsObject:touch]) {
            onMouseUp([touch locationInView:self.view].x, [touch locationInView:self.view].y, (int)(__bridge void*)touch);
            [self.active_touches removeObject:touch];
        }
    }
}

- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    for (UITouch* touch in touches) {
        if ([self.active_touches containsObject:touch]) {
            onMouseMove([touch locationInView:self.view].x, [touch locationInView:self.view].y, (int)(__bridge void*)touch);
        }
    }
}

- (void) touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    for (UITouch* touch in touches) {
        [self.active_touches removeObject:touch];
        NSLog(@"cancelled: %@", touch);
    }
}

@end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-24T11:37:01.713

为此，您需要实现触摸转发，并确保您刚刚检测到的触摸被您的 C++ 代码使用，而不是响应链中的任何 Cocoa Touch 对象。例如，在视图的`touchesBegan:withEvent:`选择器中，您将包含对您的`onMouseDown(int, int, void*)`方法的调用。`touchesMoved:withEvent:`并且`touchesEnded:withEvent:`会有类似的逻辑。

不过也有一些困难。根据 HIG，`touchesCancelled:withEvent:`应始终在实现其他`touches*:withEvent:`选择器时实现，并且您必须包含处理该问题的逻辑。

您可能遇到的另一个问题是`UIGestureRecognizer`子类。我之前提到过，您必须确保您的 C++ 代码使用触摸。但是，如果您使用手势识别器，如果您还实现了`touches*:WithEvent:`选择器，您的整个响应器链可能会变得混乱。有一些优秀的 WWDC 视频解释了这一点。简而言之，如果您的手势识别器消耗了触摸，它将永远不会发送到您的 C++ 方法。简单的解决方案是不使用手势识别器，但它们是迄今为止处理多点触控的最简单方法。

这给我们带来了最后一种可能性（如果你想使用手势识别器）。除了单独实现`touches*:withEvent:`选择器之外，您还可以将手势识别器的操作设置为一个 Objective-C 选择器，它简单地包装对您的 C++ 代码的调用。例如，a`UITapGestureRecogniser`的动作可以是一个被调用的方法`onTap`，它简单地调用`onMouseDown(...)`. 如果您确实选择走这条路，请务必观看 WWDC 视频（'11 和 '12），其中更详细地解释了触摸处理和响应程序链。

关于处理 Objective-C++ 的书籍的主题，Apple 自己已经删除了用于解释 ObjC++ 的注意事项的页面......然而，它可以[在这里找到，谢天谢地](http://web.archive.org/web/20090423073703/http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/ObjectiveC/Articles/ocCPlusPlus.html)。处理交叉的最简单方法是在 Objective-C 中实现应用层的基本要素，并将所有适当的调用转发到 C++ 引擎。就我个人而言，我会在 Pure Objective-C 中编写 App Delegate，但是一旦你进入了你的应用程序`ViewController`，你就可以自由支配了。

# ios - 在 iOS 上放大图像视图

> ID：13798949
> 
> 赞同：2
> 
> 时间：2012-12-10T10:19:21.373
> 
> 标签：ios, facebook, image, image-enlarge

我正在尝试找到一种从缩略图全屏打开图像的方法，其风格与 iOS 上的 Facebook 应用程序相同。[http://i.imgur.com/weT5T.png](http://i.imgur.com/weT5T.png)这是我想要放大的电车图片。

任何帮助都会很棒谢谢马特·麦金尼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:51:58.047

检查[此链接](https://stackoverflow.com/questions/9934031/how-to-enlarge-uiimageview-when-tapped)可能会帮助您 [如何在点击时放大 UIImageView](https://stackoverflow.com/questions/9934031/how-to-enlarge-uiimageview-when-tapped)

```
- (IBAction)buttonTapped:(id)sender {

[self.imageView setFrame:CGRectMake(0, 0, self.view.frame.size.width, 80)];

} 
```

# javascript - Sencha touch - 我如何运行生产构建？

> ID：13798950
> 
> 赞同：1
> 
> 时间：2012-12-10T10:19:22.047
> 
> 标签：javascript, sencha-touch-2

我跑了`sencha app build production`它创建了`build/production`一个 app.js 文件所在的目录。问题是如何让应用程序加载组合的 app.js 文件，而不是现在的 dev 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T12:35:25.030

检查建筑指南：

[http://docs.sencha.com/touch/2-0/#!/guide/building](http://docs.sencha.com/touch/2-0/#!/guide/building)

我在我的应用程序中使用了这些命令

```
cd ~/path/to/my/app

sencha 创建 jsb -a index.html -p app.jsb3

sencha build -p app.jsb3 -d ./

```

记得在 app.js 中添加所有的类。最后你会得到一个缩小的文件，你仍然有 app.js。但缩小的文件将包含所有其他类。

# actionscript-3 - 使用 Ant 构建 FlexUnit 运行器 (4.0.0.b2) 会因静态方法而失败？

> ID：13798957
> 
> 赞同：0
> 
> 时间：2012-12-10T10:20:14.617
> 
> 标签：actionscript-3, ant, flexunit

我有一个使用 Ant 构建的项目。在构建和提交实际项目之前，会执行一个测试运行程序来验证一致性。

到目前为止一切正常，但是一旦我为使用静态方法的类添加了一个测试用例，Ant 构建就开始中途退出，没有任何有意义的消息。

这是 FlexUnit 运行器的常见情况，在测试的类中遇到静态调用问题，还是在我的项目中非常特殊？

# java - Spring代理中的调试问题

> ID：13798962
> 
> 赞同：3
> 
> 时间：2012-12-10T10:20:28.840
> 
> 标签：java, spring

所以，我正在尝试修复一个相当复杂的基于 Spring 的 webapp 上的错误。该错误是一个 NullPointer 异常，但毫无帮助的是，它没有返回堆栈跟踪或任何类似的有助于让我确切知道它发生的位置。

使用 IntelliJ 逐步执行程序表明异常发生在 Spring Proxy 对象中： $Proxy338 ，但不显示代理代码。

我很抱歉如此含糊：关于这个错误的错误报告是非常无用的。任何关于我应该如何从这里开始的建议都将受到欢迎：我应该寻找产生失败代理的 AOP/事务代码吗？我是否可以使用 IntelliJ 收集更多信息，让我准确指出发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:34:44.737

您还可以尝试检索代理对象以查看 NullPointerExeption 的确切抛出位置。

获取代理对象：

```
((Advised)yourProxy).getTargetSource().getTarget(); 
```

# c# - 只保留数据表的前 10 行

> ID：13798963
> 
> 赞同：0
> 
> 时间：2012-12-10T10:20:33.147
> 
> 标签：c#, datatable

我目前有一个按特定列排序的数据表，一旦完成排序，我想摆脱底部不需要的数据行，

例如，我有 14 行，只需要前 10 行，如何删除后 4 行？

从存储在数据表中的错误文件电子表格文件中查询数据表，然后我对数据进行排序，然后只想获取前 10 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T11:00:38.010

您可以使用 Linq 使用 Take(10) 提取前 10 条记录，但在您对数据表进行排序之后

```
var records = datatable.AsEnumerable().OrderBy(v => v["FieldToUseAsSortOrder"]).Take(10); 
foreach(DataRow r in records)
{
    // process your records in order
} 
```

当然，这将针对您的表重新进行排序，因此您可以选择通过上面的 LinQ 表达式进行排序还是在 DefaultView 行上循环并删除不需要的行

```
for(int x = 10; x < datatable.DefaultView.Count; x++)
{
    datatable.DefaultView[x].Row.Delete();
}
datatable.AcceptChanges(); 
```

第一种方法让您的数据表保留所有原始行，仅提取需要的行，第二种方法将更新您的数据表，删除不需要的行（当然只在内存中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:46:50.453

如果您的数据库是 Sql Server：

```
Delete From VictimTable
       Where ID Not In(
       Select Top 10 ID From VictimTable Order By SomeColumn) 
```

# magento - Magento 通过编辑 view.phtml 删除添加到购物车按钮

> ID：13798964
> 
> 赞同：0
> 
> 时间：2012-12-10T10:20:35.623
> 
> 标签：magento

我的 Magento 有三个 StoreView。`view.phtml`我试图通过在以下路径中编辑来删除“添加到购物车” ：

```
app/design/frontend/default/your theme/template/catalog/product/ 
```

关于如何做到这一点的链接在[这里](http://unwittinglyrad.com/2012/03/21/disable-add-to-cart-for-certain-products/)。

我的问题是，英文 StoreViews 中的“添加到购物车”已按预期删除，但“添加到购物车”按钮仍显示在其他两个视图中。我已经清理了缓存，还重新启动了 Apache。

我该如何解决？这三个 StoreViews 使用相同`view.phtml`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:50:05.543

尝试打开 [模板路径提示](http://www.westwideweb.com/wp/2009/08/04/magento-how-to-turn-on-template-path-hints-and-inline-translation/)以确保您已将其从正确的位置删除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:59:55.733

在系统->配置->常规->设计中，您可以将不同的模板应用于不同的网站和商店视图。

查看主题部分并将`Current Configuration Scope`左上角的（左侧管理菜单上方）更改为您的不同商店视图，以查看哪些模板、皮肤和布局应用于不同的商店视图。

# javascript - 在所有浏览器中启用第三方 cookie

> ID：13798972
> 
> 赞同：1
> 
> 时间：2012-12-10T10:21:07.707
> 
> 标签：javascript, jquery

我找到了一个 p3p 标头代码，用于在 safari、firefox、chrome、opera 和所有版本的 IE 中启用第三方 cookie。我找到的代码是“P3P:CP=”IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT”'

但是这段代码在 safari 中不起作用。谁能建议我一些启用第三方cookie的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-10T11:08:38.910

Safari 默认禁用所有 3rd 方 cookie。没有可以设置的标题来启用它。这是一种适当的安全措施，理想情况下应该被所有浏览器采用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:50:16.763

试试这个：`CP="CAO PSA OUR"`

据我所知，它被称为“紧凑版”。

干杯。

# php - Mysql查询将字符串（varchar）比较为整数

> ID：13798973
> 
> 赞同：3
> 
> 时间：2012-12-10T10:21:12.917
> 
> 标签：php, mysql, comparison, type-conversion

我不确定mysql查询中是否有函数。我有一个价格表，列名是“价格”，它的类型是 VARCHAR()。出于多种原因，我有意将其用作 VARCHAR。

现在的问题是，如果我想搜索最高价格为 100000 的产品，但在我的专栏中，我们有不同类型的价格，示例如下：-

1.  待定 374,500
2.  谈判
3.  299,000

我正在寻找一个像 intVal() 这样的函数，它首先将字段值本身转换为 INTEGER 并进行比较。以下是我当前的查询语句：-

... AND 价格 <= $maximum_price

可能是这样的应该是解决方案：intVal(price) <= $maximum_price

感谢您对解决方案的任何帮助或指导。干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T10:52:24.517

尝试这个...

字符串值为“0”。其他值排序..

```
SELECT CAST(price AS UNSIGNED INTEGER) price 
FROM tt order by price desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:30:31.173

我认为在 PHP 中没有这样的功能。您必须自己对其进行硬编码以获得合适的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T12:49:18.653

看起来您在价格列中有各种格式。我认为您正在寻找比较列中的值是否为“TBD 374,500”，然后将 374500 与 100000 进行比较

在这种情况下，简单的整数转换会将所有以 char 开头的价格转换为 0。您必须在 mysql 中创建自己的函数来处理所有格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-10T10:41:11.823

也许是这样的：

```
SELECT ... WHERE CAST(SUBSTRING_INDEX(REPLACE(price, ',', ''), ' ', -1) AS SIGNED) <= $maximum_price 
```

但我同意之前的评论，你最好重新考虑你的桌子。

# php - 使用 FFMPEG 的 PHP HTML5 兼容 MP4 视频

> ID：13798978
> 
> 赞同：4
> 
> 时间：2012-12-10T10:21:37.527
> 
> 标签：php, html, ffmpeg, html5-video, internet-explorer-10

您好我正在使用 FFMPEG 将上传的视频与 PHP 进行转换。

```
echo "conversion exercise started...<br/><br/>";

/* looping through all files in the directory */
if ($handle = opendir('assets/uploaded_videos')) {
    while (false !== ($entry = readdir($handle))) {

        /* filtering the desired extensions */
        if ($entry != "." && $entry != ".." && in_array(substr($entry, strrpos($entry, '.')), array(".wmv", ".mpg", ".mpeg", ".flv", ".ogg", ".mp4")))
        {
            $filename = substr($entry, 0, strrpos($entry, '.'));

            //$command = "ffmpeg -i assets/uploaded_videos/$entry -vcodec libx264 assetss/videos/$filename.mp4";

            $command = "ffmpeg -i assets/uploaded_videos/$entry -vcodec mpeg4 -acodec libfaac files/videos/$filename.mp4";

            echo $command."<br />";

            shell_exec($command."> /dev/null 2>/dev/null &");
        }
    }
    closedir($handle);
} 
```

我已将播放器嵌入到视图文件中，如下所示：

```
<video width="350" poster="<?php echo $first_video['thumb_path'];?>" controls>
    <source src="<?php echo $first_video['video_path']; ?>" />
    <span id="silverlight_player_for_fallback"></span>
</video> 
```

现在，当我在 IE10 中运行时，播放器给了我**无效源**错误。我在使用MP4 编解码器`libx264`时都遇到了这个问题。`mpeg4`

任何想法出了什么问题？

# 更新

按照伊恩的指示，我终于开始工作了。我在**libx264中使用了****baseline-level3**配置文件。您可以提供额外的参数，但我猜配置文件是关键！我尝试了几个配置文件，并观察到 ​​vimeo 和 youtube 上的所有 HTML5 视频都使用这个基线 L3 配置文件。

 **任何与 MP4 斗争的人都可以考虑使用以下命令进行转换：

```
/* following command converted all my uploaded *.wmv files to mp4 */
$command = "ffmpeg -i files/uploaded_videos/$entry -vcodec libx264 -profile:v baseline -level 3 files/videos/$filename.mp4"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:19:11.867

您是否在 Chrome 和 Safari 等其他浏览器（支持 MP4）中测试过生成的 MP4 文件？第一步是确保文件实际播放。

您也可以保存生成的 MP4 并尝试将其拖入 Chrome/Safari 和 IE10（如果其他浏览器工作），看看它是否可以播放。通过这种方式，您可以尝试查看是否是编码问题。

MP4有许多不同的风格（称为[配置文件](http://en.wikipedia.org/wiki/H.264/MPEG-4_AVC#Profiles)），并不是所有的都可以在浏览器中播放。**

# c# - 将通用列表项添加到 Winforms 的列表框 c#

> ID：13798979
> 
> 赞同：2
> 
> 时间：2012-12-10T10:21:40.783
> 
> 标签：c#, winforms, generics, listbox

您好我正在尝试将这些项目添加到通用列表中。然后在一个按钮上单击通用列表项应该转移到我的listbox1。但是，这可行，每次单击按钮时都会不断添加它们。

我尝试使用 if 命令，有时像这样

```
 if (listBox1.Items.Count == 0)
 {
     // this contained everything I am now adding under initialize component)
 } 
```

但这产生了错误。索引值不能为 0。所以本质上这是按原样工作的。但我不想每次单击时都继续添加项目。

```
public Form1()
{
    InitializeComponent();
    list.Add("Januari");
    list.Add("Februari");
    list.Add("March");
    list.Add("April");
    list.Add("May");
    list.Add("June");
    list.Add("July");
    list.Add("August");
    list.Add("September");
    list.Add("Oktober");
    list.Add("November");
    list.Add("December");
}

private IList<string> list = new List<string>();

private void button1_Click(object sender, EventArgs e)
{
    for (int index = 0; index < list.Count; index++)
    {
        listBox1.Items.Add(list[index]);
    }

    int mnr = Convert.ToInt32(textBox1.Text);
    string mnm = Convert.ToString(listBox1.Items[mnr - 1]);
    textBox2.Text = mnm;      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:42:56.297

这只是@Kami 答案的替代方案，如果您不使用`IList<string> list`其他任何地方，那么只需将项目直接添加到列表框：

```
public Form1()
{
    InitializeComponent();

    // This is only called once.
    InitializeListBox();
}

private void InitializeListBox()
{
    listBox1.Items.Add("Januari");
    listBox1.Items.Add("Februari");
    listBox1.Items.Add("March");
    listBox1.Items.Add("April");
    listBox1.Items.Add("May");
    listBox1.Items.Add("June");
    listBox1.Items.Add("July");
    listBox1.Items.Add("August");
    listBox1.Items.Add("September");
    listBox1.Items.Add("Oktober");
    listBox1.Items.Add("November");
    listBox1.Items.Add("December");
}

private void button1_Click(object sender, EventArgs e)
{
    int mnr = Convert.ToInt32(textBox1.Text);
    string mnm = Convert.ToString(listBox1.Items[mnr - 1]);
    textBox2.Text = mnm;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T10:31:05.993

您可以在这里做两件事。

第一个选项是`clear()`在加载列表之前添加调用。这将删除现有项目并重新插入它们。

```
 private void button1_Click(object sender, EventArgs e)
    {
        listBox1.Items.Clear();

        for (int index = 0; index < list.Count; index++)
        {

            listBox1.Items.Add(list[index]);
        }

        int mnr = Convert.ToInt32(textBox1.Text);
        string mnm = Convert.ToString(listBox1.Items[mnr - 1]);
        textBox2.Text = mnm;
    } 
```

或者，可能更好的解决方案是将加载移动到 init 函数中。由于每个表单只需要加载一次数据，因此这是更好的解决方案。

```
 public Form1()
    {
        InitializeComponent();
        Init();
    }

    private void Init()
    {
        list.Add("Januari");
        list.Add("Februari");
        list.Add("March");
        list.Add("April");
        list.Add("May");
        list.Add("June");
        list.Add("July");
        list.Add("August");
        list.Add("September");
        list.Add("Oktober");
        list.Add("November");
        list.Add("December");

        listBox1.Items.Clear();

        for (int index = 0; index < list.Count; index++)
        {

            listBox1.Items.Add(list[index]);
        }
    }

    private IList<string> list = new List<string>();

    private void button1_Click(object sender, EventArgs e)
    {
        int mnr = Convert.ToInt32(textBox1.Text);
        string mnm = Convert.ToString(listBox1.Items[mnr - 1]);
        textBox2.Text = mnm;
    } 
```

# php - 位置：$GLOBALS

> ID：13798983
> 
> 赞同：0
> 
> 时间：2012-12-10T10:21:46.637
> 
> 标签：php, location

嘿，我正在做登录检查，我想将位置设置为上一页。

在我的网站上，我设置了用户名和密码：

```
<?php
$GLOBALS['returnsite'] = 'login.php';
?> 
```

在检查器站点上，它检查名称和通行证是否匹配：

```
<?php
header('Location: '.$GLOBALS['returnsite']);
?> 
```

它不返回，我收到此错误“注意：未定义的索引：returnsite”

我如何制作一个可以在标题中设置的“全局变量”（'Location：'.$myvar）; ??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T10:27:48.630

正如马克在他的评论`$GLOBALS`中所说，他并不坚持。

我建议您改用会话：

带有表格的页面：（在第 1 行！）

```
<?php
    session_start();
    $_SESSION['returnsite'] = 'login.php';
?> 
```

在“检查器”页面上：（第 1 行！）

```
<?php
    session_start();
?> 
```

然后在您处理登录后：

```
header("Location: {$_SESSION['returnsite']}\r\n");
exit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T10:51:02.820

您可以做的只是将重定向 URL 作为 GET 变量传递。

例子：

```
checker.php?returnsite=login.php 
```

然后你会使用：

```
header('Location: ' . $_GET["returnsite"]); 
```

# mysql - Mysql（和 Postgresql）在 where = 1 和 in(1) 上的性能

> ID：13798986
> 
> 赞同：1
> 
> 时间：2012-12-10T10:21:52.083
> 
> 标签：mysql, sql, ruby-on-rails-3, postgresql, activerecord

只是出于好奇，有没有人知道当你这样做时是否有任何重大的性能差异......

```
Select something Where foo=1 
```

...和...

```
Select something Where foo In(1)    #just one item not multiple 
```

...在单个或联合 SQL 查询中的 Mysql 和 Postgresql 上。

问题是我正在构建[Ruby on Rails 范围](http://guides.rubyonrails.org/active_record_querying.html#scopes)，我想知道哪种方法更好，

为多个项目 (IN) 创建一个范围，为将使用相等 (=) 的单个项目创建一个范围

```
scope :with_owner_ids, lambda{|owner_class, *ids| where(owner_type: owner_class.model_name, owner_id: ids.flatten)}
scope :with_owner, lambda{|owner| where(owner_type: owner.class.model_name, owner_id: owner.id)}
#... where `foos`.`owner_class`='User' and `foos`.`owner_id` = 15 
```

或更清洁，为多个项目（IN）创建范围，而不仅仅是将此范围传递给单个项目的另一个范围（IN也是）

```
scope :with_owner_ids, lambda{|owner_class, *ids| where(owner_type: owner_class.model_name, owner_id: ids.flatten)}
scope :with_owner, lambda{|owner| with_owner_ids(owner.class, owner.id)}
#... where `foos`.`owner_class`='User' and `foos`.`owner_id` IN (15) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-10T11:49:48.020

一个非常简单的表上的 PostgreSQL 示例：

```
CREATE TABLE a (
    a_id integer
    , t_id integer
);

COPY a
FROM STDIN;
1   1
2   1
3   1
4   4
\.

EXPLAIN ANALYZE SELECT * FROM a WHERE t_id IN (1);

 Seq Scan on a  (cost=0.00..36.75 rows=11 width=8) (actual time=0.056..0.059 rows=3 loops=1)
   Filter: (t_id = 1)
 Total runtime: 41.795 ms 
```

从该`Filter: (t_id = 1)`部分可以清楚地看出，它`IN (1)`被翻译成简单的相等检查，因此两种形式之间没有区别。

我将 MySQL 部分留给其他人 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:11:39.967

我玩过 MySQL EXPLAIN：

**平等的**

```
mysql> explain extended select * from document_name_ownerships as dno join document_names as dn on dn.id = dno.document_name_id  where dn.id = 18 ;
+----+-------------+-------+-------+---------------+---------+---------+-------+------+----------+-------------+
| id | select_type | table | type  | possible_keys | key     | key_len | ref   | rows | filtered | Extra       |
+----+-------------+-------+-------+---------------+---------+---------+-------+------+----------+-------------+
|  1 | SIMPLE      | dn    | const | PRIMARY       | PRIMARY | 4       | const |    1 |   100.00 |             |
|  1 | SIMPLE      | dno   | ALL   | NULL          | NULL    | NULL    | NULL  |   81 |   100.00 | Using where |
+----+-------------+-------+-------+---------------+---------+---------+-------+------+----------+-------------+
2 

rows in set, 1 warning (0.00 sec) 
```

**在（）**

```
mysql> explain extended select * from document_name_ownerships as dno join document_names as dn on dn.id = dno.document_name_id  where dn.id in(18) ;
+----+-------------+-------+-------+---------------+---------+---------+-------+------+----------+-------------+
| id | select_type | table | type  | possible_keys | key     | key_len | ref   | rows | filtered | Extra       |
+----+-------------+-------+-------+---------------+---------+---------+-------+------+----------+-------------+
|  1 | SIMPLE      | dn    | const | PRIMARY       | PRIMARY | 4       | const |    1 |   100.00 |             |
|  1 | SIMPLE      | dno   | ALL   | NULL          | NULL    | NULL    | NULL  |   81 |   100.00 | Using where |
+----+-------------+-------+-------+---------------+---------+---------+-------+------+----------+-------------+
2 rows in set, 1 warning (0.01 sec) 
```

因此，当涉及到一条记录时，似乎**等于 (=)**比**IN()快得可以忽略不计**

但有趣的是，当我做了几个项目时，结果是一样的：

```
mysql> explain extended select * from document_name_ownerships as dno join document_names as dn on dn.id = dno.document_name_id  where dn.id = 18 or dn.id=17  or dn.id=19;
> (0.00 sec)

mysql> explain extended select * from document_name_ownerships as dno join document_names as  dn on dn.id = dno.document_name_id  where dn.id in (18, 17, 19);
> (0.00 sec) 
```

但不知道这个结果是否可以在实时服务器上被信任，因为在我的开发机器上我有 SSD 驱动器......但对我来说似乎一样

* * *

**更新**

有 70000 条记录

```
select * from document_name_ownerships as dno join document_names as dn on dn.id = dno.document_name_id  where dn.id = 60811;
1 row in set (0.04 sec)

select * from document_name_ownerships as dno join document_names as dn on dn.id = dno.document_name_id  where dn.id in( 60811);
1 row in set (0.04 sec) 
```

多

```
select * from document_name_ownerships as dno join document_names as dn on dn.id = dno.document_name_id  where dn.id in( 60800, 11111, 22222, 40000);
4 rows in set (0.07 sec)

select * from document_name_ownerships as dno join document_names as dn on dn.id = dno.document_name_id  where dn.id = 60800 or dn.id = 11111 or dn.id = 22222 or dn.id = 40000;
4 rows in set (0.08 sec) 
```

# php - 邮件功能不适用于个人域

> ID：13798988
> 
> 赞同：0
> 
> 时间：2012-12-10T10:22:01.910
> 
> 标签：php, email

我正在使用 php 邮件功能在我的项目中发送电子邮件。电子邮件来自 gmail、yahoo 和其他公共电子邮件服务，但这些不是来自诸如 info@mydomain.com 之类的私有域电子邮件 ID。请帮我。我的代码是：

```
$to = 'email@mydomain.com';
$subject = "Subject line of email";
$body = "Body of email";
$header = "From: MYDOMAIN <no-reply@mydomain.com>" . "\r\n";
$header .= "\r\nMIME-Version: 1.0\r\n";
$header .= "Content-type: text/html; charset=iso-8859-1\r\n";
mail($to,$subject,$body,$header); 
```

# matlab - Matlab：绘制纬度和经度

> ID：13798989
> 
> 赞同：0
> 
> 时间：2012-12-10T10:22:06.263
> 
> 标签：matlab

我想将纬度和经度绘制为节点，并且将有边缘连接节点。我想在图形背景中显示地图。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:22:59.183

听起来您正在查看以下内容：

```
figure
image(...)
hold
plot(...) 
```

您使用图像功能来显示您的地图，并使用绘图（或类似功能）来显示您的纬度/经度数据，但它是您想要的（您对此不是很具体）。

您可能必须使用轴属性才能正确缩放并将绘图放置在相对于地图的正确位置，但这取决于您的数据。

# iphone - iphone 我可以访问方法，但他们无法访问属性

> ID：13798990
> 
> 赞同：1
> 
> 时间：2012-12-10T10:22:05.993
> 
> 标签：iphone, uiviewcontroller, uinavigationcontroller, uitabbar

我有 UIViewController 一个带有许多 UINavigationController 的标签栏。标签栏是以编程方式创建的。当我单击第一个 UITabItem 时，它会显示一个 UITable，当我再次单击它时，它会显示地图，以便我可以在它们之间切换。UITable 和 MKMapView 在同一个视图中，我使用 sethidden yes 或 no 在它们之间切换。问题是这不起作用，我找到了原因，但我不明白为什么会发生在这里是执行隐藏和显示的函数的代码：

```
 -(void) showMap
    {
        fieldsTableView.hidden = YES;
        [mapView setHidden:NO];
    }
    -(void) showList
    {
        fieldsTableView.hidden = NO;
        mapView.hidden = YES;
    } 
```

这是调用这些方法的代码：

```
 -(void) showFieldsView
    {
        @try 
        {
            if(self.fieldsViewController == nil) 
            {
                self.fieldsViewController = [[FieldsViewController alloc] initWithNibName:@"FieldsView" bundle:nil];
            }
            if(currentViewController == nil)
            {
                [self showFieldsListView];
                currentViewController = fieldsNavController;

            }

            NSString *viewtype = [[NSString alloc] initWithString:[(UITabBarItem *)[self.tabBar.items objectAtIndex:0] title]];
            if(currentViewController == self.fieldsNavController)
            {
                if (viewtype == @"List")
                {

                    [(UITabBarItem *)[self.tabBar.items objectAtIndex:0] setTitle:@"Map"];
                    [(UITabBarItem *)[self.tabBar.items objectAtIndex:0] setImage:[UIImage imageNamed:@"map.png"]];
                    [fieldsViewController showMap];
                }
                else
                {

                    [self.fieldsViewController showList];
                    [(UITabBarItem *)[self.tabBar.items objectAtIndex:0] setTitle:@"List"];
                    [(UITabBarItem *)[self.tabBar.items objectAtIndex:0] setImage:[UIImage imageNamed:@"list.png"]];
                }
            }
            else
            {
                [self showFieldsListView];
                currentViewController = self.fieldsNavController;

            }
            [viewtype release];
        }
        @catch (NSException *exception) {
            NSLog(@"Exception in tabViewControlelr showFieldsView \nDescription %@", [exception description]);
        }

    }
    - (void) showFieldsListView {
        [self.fieldsNavController viewWillAppear:YES];
    [self.fieldsNavController.view addSubview:tabBar];
        [self.view addSubview:self.fieldsNavController.view];
    } 
```

我做了一个 NSLOG，这是我发现的：当调用 showMap 或 showList 函数时，它被调用并且内部完成了，但是属性没有被访问，它显示 NULL（我试图显示另一个字符串属性，它显示NULL) 这里是声明：

```
 UITableView * fieldsTableView;
    MKMapView *mapView; 
```

和

```
 @property (nonatomic, retain) UITableView * fieldsTableView;
    @property (nonatomic, retain) MKMapView *mapView; 
```

# c++ - 没有未来的编程。那么

> ID：13798991
> 
> 赞同：1
> 
> 时间：2012-12-10T10:22:07.137
> 
> 标签：c++, visual-studio-2010, asynchronous, concurrency, future

我需要在以下几行中写一些很长的东西：

> *   缓冲区中的 foreach 缓冲区：
>     
>     
>     *   在 thread0 中映射一个 OpenGL 缓冲区，然后复制到 thread1 中的缓冲区，然后在 thread1 中取消映射缓冲区。
> *   当所有缓冲区都未映射时，然后在 thread1 中渲染

这并不像我希望的那样微不足道，`future.then`而且`when_all`这将非常简单。然而，目前我有一些相当丑陋的东西，你可以在下面找到，见`upload_to_buffers`底部。它有点工作，但它很快变得相当难以管理和不可读（一切都需要以相反的顺序编写），我有点不确定这个解决方案的安全性。关于如何以更好的方式实现这一目标的任何想法？

```
template<typename T>
class async_result
{
public:
    async_result(T value)
        : value_(std::move(value))
    {
    }

    async_result(std::exception_ptr exception)
        : exception_(exception)
    {
    }

    T& get()
    {
        if(exception_)
            std::rethrow_exception(exception_);

        return *value_;
    }

    const T& get() const
    {
        if(exception_)
            std::rethrow_exception(exception_);

        return *value_;
    }

private:
    boost::optional<T> value_;
    std::exception_ptr exception_;
};

template<typename C>
void map(buffer buf, C callback)
{
    thread0.execute([=]
    {
        try
        {
            // Do map.

            callback(async_result<buffer>(std::move(buf)));
        }
        catch(...)
        {
            callback(async_result<buffer>(std::current_exception()));
        }
    });
}

template<typename C>
void copy(buffer buf, C callback)
{
    thread1.execute([=]
    {
        try
        {
            // Do copy.

            callback(async_result<buffer>(std::move(buf)));
        }
        catch(...)
        {
            callback(async_result<buffer>(std::current_exception()));
        }
    });
}

template<typename C>
void unmap(buffer buf, C callback)
{
    thread0.execute([=]
    {
        try
        {
            // Do unmap.

            callback(async_result<buffer>(std::move(buf)));
        }
        catch(...)
        {
            callback(async_result<buffer>(std::current_exception()));
        }
    });
}

template<typename C>
void upload_to_buffers(std::vector<buffer> buffers, C callback)
{
    auto unmap_buffer_results = std::make_shared<std::vector<async_result<buffer>>();
    auto unmap_buffer_results_count = buffers.size();

    auto on_unmap_buffer = [=](async_result<buffer> result)
    {
        unmap_buffer_results->push_back(std::move(result));
        if(unmap_buffer_results->size() != unmap_buffer_results_count )
            return;

        std::vector<buffer> buffers;
        for(auto& result : *unmap_buffer_results)
            buffers.push_back(std::move(result.get()));

        callback(std::move(buffers);
    };  

    auto copy_buffer_results = std::make_shared<std::vector<async_result<buffer>>();
    auto copy_buffer_results_count = buffers.size();

    auto on_copy_buffer = [=](async_result<buffer> result)
    {
        copy_buffer_results->push_back(std::move(result));
        if(copy_buffer_results->size() != copy_buffer_results_count)
            return;

        std::vector<buffer> buffers;
        for(auto& result : *copy_buffer_results)
            buffers.push_back(std::move(result.get()));

        for(auto& buf: buffers)
            unmap(std::move(buf), on_unmap_buffer);
    };

    auto map_buffer_results = std::make_shared<std::vector<async_result<buffer>>();
    auto map_buffer_results_count = buffers.size();

    auto on_mapped_buffer = [=](async_result<buffer> result)
    {
        map_buffer_results->push_back(std::move(result));
        if(map_buffer_results->size() != map_buffer_results_count)
            return;

        std::vector<buffer> buffers;
        for(auto& result : *map_buffer_results)
            buffers.push_back(std::move(result.get()));

        for(auto& buf: buffers)
            copy(std::move(buf), on_copy_buffer);       
    };

    for(auto& buf : buffers)
        map(std::move(buf), on_mapped_buffer);
} 
```

# javascript - 处理 IE 浏览器的关闭按钮

> ID：13798993
> 
> 赞同：2
> 
> 时间：2012-12-10T10:22:21.627
> 
> 标签：javascript, html, internet-explorer, browser

> **可能重复：**
> [在 IE8 中关闭窗口时的 Java 脚本](https://stackoverflow.com/questions/10598070/java-script-on-close-of-window-in-ie8)

当单击浏览器的关闭按钮时，我想关闭会话。

我已经使用`OnBeforeUnload`母版页的正文标记处理了它，但即使最终用户导航到其他页面，它也会被触发。所以我的要求是调用关闭会话代码，只有当浏览器的关闭按钮被点击时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T10:25:16.250

我认为没有任何方法可以检测到这一点。这是大多数 Web 开发人员在某些时候遇到的常见问题。

处理此问题的常用方法是让会话在一段时间不活动（超时）后过期。许多人陷入了认为必须有“更好的方法”的陷阱，但鉴于 HTTP 的性质，它实际上是一个非常好的、优雅的解决方案。

# c# - 试图获取单个链表中元素的值

> ID：13798994
> 
> 赞同：0
> 
> 时间：2012-12-10T10:22:24.563
> 
> 标签：c#, singly-linked-list

我正在编写自己的单链表以用于学习目的，但我坚持使用“获取”方法。

```
public void Get(int index)
{
  SLElement curr = _root;
  SLElement prev = _root._next;
  for (int i = 0; i <= index; i++)
  {
    while (curr._next != null)
    {
      if (curr == null) return;
      prev = curr; 
      curr = curr._next;
    }
  }
  prev._next = curr._next;
  curr._next = prev;
  Console.WriteLine("Index {0} has the value {1}", index, curr._value);
} 
```

它似乎有效，但是当我想知道列表中最后一个元素的值时，它给了我一个`NullReferenceException` Any way to prevent this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:24:35.687

因为它从 0 开始，所以您的循环应该在(ie )`for()`时停止：`i = index - 1``i < index`

```
for (int i = 0; i < index; i++) 
```

第一个元素在位置 0，所以最后一个元素在 position `index - 1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T11:43:09.327

我现在让它像这样工作：

```
public void Get(int index)
{
  SLElement curr = _root;
  SLElement prev = _root._next;
  for (int i = 0; i <= index; i++)
  {
    while (curr._next != null)
    {
      if (curr == null) return;
      prev = curr; 
      curr = curr._next;
    }
  }
  Console.WriteLine("Index {0} has the value {1}", index, curr._value);
  if (prev == null) return;
  prev._next = curr._next;
  curr._next = _root;
} 
```

这对我有用