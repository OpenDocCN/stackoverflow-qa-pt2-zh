# StackOverflow 问答 15897000-15897999

# jquery - 使用英国城镇或邮政编码的谷歌地图 API

> ID：15897003
> 
> 赞同：0
> 
> 时间：2013-04-09T08:31:01.120
> 
> 标签：jquery, asp.net-mvc, google-maps, c#-4.0

我目前正在开发一个类似于yell.com的系统，您可以在其中输入一个位置（城镇或邮政编码），它会返回说半径为10英里的所有其他城镇。

我找到了很多可以让我输入邮政编码的代码，而且我确信它很容易转换为允许城镇，所以也许有 2 个文本框就足够简单了，或者一个文本框可以检查你有什么输入并可以确定它是城镇还是邮政编码，可能也不会太难，但是我只是想知道是否有人知道直接通过API执行此操作的方法，因此我们只需将其丢弃即可出去...

如果不是不用担心，只是一个想法:)

干杯

达兹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:37:24.873

是的，我可以..对不起，我已经在这里回答了我自己的问题:)

```
var address = 'doncaster';
//var address = 'LS2';    
geocoder.geocode( { 'address': address}, function(results, status) {
if (status == google.maps.GeocoderStatus.OK) {
    alert(results[0].formatted_address);
}
}) 
```

# c - 如何用 git 处理这个补丁问题？

> ID：15897005
> 
> 赞同：2
> 
> 时间：2013-04-09T08:31:05.460
> 
> 标签：c, linux, git

我目前正在使用 git 做一个项目。基本上，我的 git 树由三个分支组成：

*   分支**A**：起源分支，我的工作就是从它衍生出来的。
*   分支**B**：基于 A 的**分支**。**B**包含开发工作（**A**的新功能）。
*   **C**分支：出于时间管理的原因，我还开始为新功能开发不完整的实验选项。此实验代码直接添加到**B**中。所以**C是****B**的清理分支，只保留完全可操作的代码。

分支关系可以用这种方式表示：

> **A** *头*-> **B** ->*提交 0* -> ... ->*提交 n* -> **C** ->*清理提交*

分支**B**包含所有新功能的代码，有时与仍在开发中的可选部分混合。**C**中的所有提交都是对实验部分的删除。

分支**C**中的代码是干净的，我想从中伪造一个补丁。**该补丁应包括从C**的最后一次提交到**A**的头部的所有更改。

如果我这样做`git format-patch master --stdout > my_patch.patch`了，这会产生一个补丁，该补丁将有效地以操作代码结束。但这并不好，因为在补丁中，添加了实验代码（通过**B**中的一些提交）然后删除（清理**C**中的提交）。除了一点都不聪明之外，这还包括无用的额外空间（这意味着与社区共享补丁的额外邮件）和应用程序的额外开销。

我应该如何对这些分支进行操作以生成干净的补丁？请注意，我想保留迄今为止在分支**B**中所做的实验工作，我只是不想将其包含在补丁中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T03:27:00.823

```
git checkout C              # alternately, do "git checkout -b C_NEW" for safety
git rebase --interactive A  # Your A branch 
```

它会弹出一个编辑器。将除第一个之外的所有“pick”文本更改为“s”。这会将您的所有提交“压缩”到一个提交中。

您也可以使用cherry-pick（将一些提交拉出到A上），或 git rebase --interactive （并删除所有B提交以获得C）。

# ruby-on-rails - AngularJS 使用 rails 预渲染

> ID：15897006
> 
> 赞同：0
> 
> 时间：2013-04-09T08:31:10.200
> 
> 标签：ruby-on-rails, ruby-on-rails-3, angularjs

有什么方法可以在 rails 中预渲染 angularJS 模板，然后只向客户端发送 html 吗？

我想解决 SEO 的真正问题，即使我们有另一种使用方式`<noscript>`

谢谢阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:57:29.420

我在几个地方读过关于使用 PhantomJS 在服务器上呈现站点并将结果保存为静态 HTML 的内容。

[用于服务器端渲染的 PhantomJS](http://thedigitalself.com/blog/seo-and-javascript-with-phantomjs-server-side-rendering)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-22T11:03:52.423

看看这个 rails middle ware [pre-render rails](https://github.com/prerender/prerender_rails)

# zend-framework - 设置默认元素装饰器

> ID：15897009
> 
> 赞同：1
> 
> 时间：2013-04-09T08:31:19.760
> 
> 标签：zend-framework, zend-decorators

我在应用程序路径中编写了自己的装饰器，例如“library/myLib/Form/Decorator/Lalala.php”

现在假设像使用它`$element->addDecorator('Lalala');` 但得到错误：

> 在注册表中找不到名为“Filechoose”的插件；使用的路径： Zend_Form_Decorator_: Zend/Form/Decorator/

如何设置默认元素装饰器路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:09:17.390

假设您的装饰器类`myLib_Form_Decorator_Lalala`存储在 file 中`library/myLib/Form/Decorator/Lalala.php`，那么我们可以这样做：

在表单级别：

```
$form->addElementPrefixPath(APPLICATION_PATH . '/../library/myLib/Form/Decorator', 'myLib_Form_Decorator_', Zend_Form::DECORATOR); 
```

在元素级别：

```
$elt->addPrefixPath(APPLICATION_PATH . '/../library/myLib/Form/Decorator', 'myLib_Form_Decorator_', Zend_Form::DECORATOR); 
```

# php - php有趣的编码

> ID：15897010
> 
> 赞同：1
> 
> 时间：2013-04-09T08:31:20.743
> 
> 标签：php

嘿，我使用嵌套的 for 循环制作了一个简单的 php 表......它会是这样的......

```
1   2   3   4   5
6   7   8   9   10
11  12  13  14  15 
```

但问题是，我无法使用列内的循环打印此值..那么解决方案是什么？？？请

**我的代码：**

```
echo "<table border=1>\n";
for($row=1;$row<=3;$row++)
{
    echo "<tr>";
    for($col=1;$col<=5;$col++)
    {
        echo "<td>";
        echo "MY PROBLEM HERE...I cant print column numbers \n";
        echo "</td>";
    }
    echo "</tr>";
}
echo "</table> \n"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:35:26.777

```
echo "<table border=1>\n";
for($row=1;$row<=3;$row++)
{
    echo "<tr>";
    for($col=1;$col<=5;$col++)
    {
        echo "<td>";
        //echo "MY PROBLEM HERE...I cant print column numbers \n";
        echo $col + ($row - 1) * 5;
        echo "</td>";
    }
    echo "</tr>";
}
echo "</table> \n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:39:36.483

这不是`$col + $row * 5` 必须的`$row - 1`

```
<?php
echo "<table border=1>\n";
for($row=1;$row<=3;$row++)
{
    echo "<tr>";
    for($col=1;$col<=5;$col++)
    {
        echo "<td>";
        echo $col + ($row-1) * 5;
        echo "</td>";
    }
    echo "</tr>";
}
echo "</table> \n";

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T08:52:04.920

要保存多个循环：

```
$rows = 3;
$cols = 5;

$table = '<table border="1">';

for($i=1;$i<=$rows;$i++){
    $table .= '<tr><td>'.implode('</td><td>', range($cols*$i-$cols+1,$cols*$i)).'</td></tr>';
}

$table .= '</table>';
echo $table; 
```

# scala - Scala 构造函数弃用

> ID：15897014
> 
> 赞同：13
> 
> 时间：2013-04-09T08:31:30.807
> 
> 标签：scala, constructor, annotations, deprecated

我在 Scala 中有一个类，目前以标准方式构建：

```
class Test( int : Int )
{
    override def toString() = "Test: %d".format( int ) 
} 
```

但是，我想通过伴随对象转到间接构造。由于我正在修改的库被其他人使用，我不想立即将构造函数设为私有。相反，我想弃用它，然后在人们有机会改变他们的使用方式后返回并将其设为私有。所以我像这样修改了我的代码：

```
object Test
{
    def apply( int : Int ) = new Test( int )
}

@deprecated( "Don't construct directly - use companion constructor", "09/04/13" )
class Test( int : Int )
{
    override def toString() = "Test: %d".format( int ) 
} 
```

但是，这会弃用整个类。

```
scala> Test( 4 )
<console>:10: warning: class Test in package foo is deprecated: Don't construct directly - use companion constructor
       val res0 =
           ^
res0: com.foo.Test = Test: 4 
```

有谁知道 Scala 是否支持弃用构造函数，如果支持，它是如何完成的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T08:40:14.180

[该线程](http://www.scala-lang.org/node/3388)似乎描述了解决方案：

```
object Test
{
    def apply( int : Int ) = new Test( int )
}

class Test @deprecated( "Don't construct directly - use companion constructor", "09/04/13" ) ( int : Int )
{
    override def toString() = "Test: %d".format( int ) 
} 
```

不过现在还不能试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:43:06.603

就我的特殊情况而言，由于伴随对象使用了已弃用的构造函数，因此弃用构造函数会导致编译时出现弃用警告，一位同事建议我使用虚拟参数提供第二个构造函数，并弃用没有的构造函数：

```
object Test
{
    def apply( int : Int ) = new Test( int, false )
}

class Test ( val int : Int, dummy : Boolean )
{
    @deprecated( "Don't construct directly - use companion constructor", "09/04/13" )
    def this( int : Int ) = this( int, false )

    override def toString() = "Test: %d".format( int ) 
} 
```

这是可行的，因为如果用户调用已弃用的构造函数，只会有弃用警告，但显然这很不愉快 - 有没有人有更好的解决方案？

# php - 数据库存储奇怪的字符

> ID：15897015
> 
> 赞同：1
> 
> 时间：2013-04-09T08:31:35.193
> 
> 标签：php, postgresql

我在带有 php portlet 和数据库的前端 liferay 门户之间有问题。描述情况：我有一个 portlet——不管它做什么——它将一些字符串存储到数据库中。当我将字符串读回前端时，每个“非英语”字符都很奇怪。我需要存储各种字符，如斯洛伐克语、捷克语、波兰语、德语、罗马尼亚语等。

我很确定问题不在前端，因为在我存储它之前（或同时）我显示了我在前端存储的内容并且字符串看起来没问题。所以前端的 UTF-8 可以工作。但是当我查看数据库时，一切都是混合的，并且有类似`ÃÂ³`这些有趣角色的角色和其他组合。

我的 postgres 数据库也设置为 UTF-8。首先，我认为与语言环境有联系，所以我现在让我的服务器上的每个支持的语言环境都可以工作。仍然没有帮助。我有一种蛮力解决方案可以将这些字符转换为#xxxx；代码，但它真正的工作。

有什么建议吗？

谢谢。

# apache-flex - Flex tilelist itemrender 实例与 dataprovider 长度不匹配

> ID：15897019
> 
> 赞同：1
> 
> 时间：2013-04-09T08:31:45.083
> 
> 标签：apache-flex, itemrenderer, dataprovider, tilelist

我将自定义 itemrenderer 用于我的 Tilelist 控件。当我运行我的应用程序时。我发现 customitemrenderer 的实例计数不等于 dataprovider listItem 计数。dataprovider 列表中只有一项，但有 2 个 customitemrenderer 实例。我算了，找不到原因。有谁能够帮我。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T15:46:34.123

对于基于列表的组件，flex 这样做是为了提高效率。想象一个有 1000 行的数据提供者，但瓦片列表一次只显示 9 个 (3X3)。创建了 1000 个 UI 组件但未显示将浪费内存，因此 flex 将创建它需要在屏幕上拥有的 9 个渲染器，以及额外的缓冲区量。当你滚动 tilelist 时，缓冲区中的渲染器将是下一个出现在列表中的渲染器，而刚刚滚动关闭的渲染器将进入缓冲区进行回收。

# spring - 缓存还是会话？

> ID：15897022
> 
> 赞同：1
> 
> 时间：2013-04-09T08:31:57.477
> 
> 标签：spring, session, caching

在缓存中存储用户特定的数据（如 loginAccountId 等）有多少好处？

如果我们将 LoginAccountID 存储在会话的缓存中，作为用户登录系统是否有益？

如果存储在缓存中，我将面临什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:34:41.057

实际上，服务器上的会话变量旨在缓存用户特定的数据。将用户特定的数据存储在缓存中，就像重新发明轮子一样。

# jsp - 使用 Servlet 从数据库中检索 Clob 数据并使该数据可在 JSP 中下载

> ID：15897023
> 
> 赞同：1
> 
> 时间：2013-04-09T08:31:59.183
> 
> 标签：jsp, servlets, download, clob

我有一个要求，我需要检索一组数据，其中一个是 CLOB 数据，可能会得到多行，我需要在 JSP 页面中显示每一行，还需要提供下载选项来将此 CLOB 数据下载为 XML 文件每一行。

我不知道如何实现这一点，下面是我用来检索数据的代码。

```
List dataList = new ArrayList();

        while(rs.next()){
            RecordData rdata =new RecordData();
            rdata.setId(rs.getInt("OBJID"));    

            aclob = (CLOB)rs.getClob("X_MESSAGE");  
            clob_length = (int)aclob.length();  
            rdata.setMessage(aclob.getSubString(1, clob_length));

            dataList.add(rdata);
        }

request.setAttribute("dataList", dataList);
request.getRequestDispatcher("jsp/displayrecords.jsp").forward(request,response); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:33:41.103

“需要检索一组数据，其中一个是 CLOB 数据，可能会获得多行，我需要在 JSP 页面中显示每一行，还需要提供下载选项来将此 CLOB 数据下载为每一行的 XML 文件。”

在上面的代码示例中，您已经解决了前半部分 - 获取数据，在 bean 中设置并将该 bean 放入会话中。现在在 JSP 中迭代它并显示在一个表格中。

对于下载 - 向表和 bean 添加一个 ID 列，每个下载链接将指向一个下载 jsp，并将 id 作为参数。在那个jsp中下载文件。我建议在渲染后从会话中清除 dataList，因为如果有很多用户或很多行，它将占用 JVM 上的内存 (RAM)

# android - 旧版本android不支持sql查询

> ID：15897027
> 
> 赞同：0
> 
> 时间：2013-04-09T08:32:21.303
> 
> 标签：android, android-sqlite

嗨，我已经在下面提到了这个查询。

这个查询的目的是保存本地数据库中的两列，我已经发送了它的数量。对于将获得的运费金额。但旧版本的第一个值只能得到它。但新版本成功更新。为什么我不知道它不是更新旧版本。

询问：

```
mCursor = db.rawQuery("select ROUND(deliverycharge) from pincodedetails where ROUND(subtotal) <=( select ROUND(subtotal)  from pincodedetails where ROUND(subtotal)>="+price+" and resturantID="+selArgs+" LIMIT 1) and resturantID="+selArgs+" and ROUND(subtotal) >=( select ROUND(subtotal) from pincodedetails where ROUND(subtotal)<="+price+" and resturantID="+selArgs+" LIMIT 1)  order by ROUND(subtotal) LIMIT 1", null); 
```

我认为**旧版本不支持 LIMIT 1**。

请给我解决方案？

```
public double getAllPincodeDetails(
            String dinein_restaurant_id,Double GetAllPrice ) {
        // TODO Auto-generated method stub
        String selArgs = dinein_restaurant_id;
        Double price = GetAllPrice;
        String query = "select ROUND(delivarycharge) from pincodedetails where ROUND(subtotal) <=( select ROUND(subtotal)  from pincodedetails where ROUND(subtotal)>="+price+" and resturantID="+selArgs+" LIMIT 1) and resturantID="+selArgs+" and ROUND(subtotal) >=( select ROUND(subtotal) from pincodedetails where ROUND(subtotal)<="+price+" and resturantID="+selArgs+" LIMIT 1)  order by ROUND(subtotal) LIMIT 1";
        Log.i(this.toString(), "Message"+query);
        mCursor = db.rawQuery("select ROUND(delivarycharge) from pincodedetails where ROUND(subtotal) <=( select ROUND(subtotal)  from pincodedetails where ROUND(subtotal)>="+price+" and resturantID="+selArgs+" LIMIT 1) and resturantID="+selArgs+" and ROUND(subtotal) >=( select ROUND(subtotal) from pincodedetails where ROUND(subtotal)<="+price+" and resturantID="+selArgs+" LIMIT 1)  order by ROUND(subtotal) LIMIT 1", null);
        double delivarycharge = 0;
        if (mCursor.moveToFirst()) 
        {
            // Got first result
            delivarycharge = mCursor.getDouble(0);
         //System.out.println("***************"+mCursor.getString(mCursor.getColumnIndex("totamount")));System.out.println("***************"+mCursor.getString(mCursor.getColumnIndex("price")));
        }
//
        return delivarycharge;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:43:46.287

SQlite 只是一个有限的 SQL 实现……它的设计目的与大型 DBMS 不同。

您将需要简化 SELECT 查询并在 Java 代码中进行一些处理。

请参阅此处： [SQL Lite 文档](http://www.sqlite.org/docs.html)

# java - 休眠：插入具有外部“id 类”的实例

> ID：15897029
> 
> 赞同：0
> 
> 时间：2013-04-09T08:32:29.547
> 
> 标签：java, hibernate, insert, save, identifier

我在 JBOSS 服务器上使用 Hibernate + HSQL，我需要 saveOrUpdate() 一个对象，它的 ID 由另一个类表示：

```
public class RideId implements java.io.Serializable {

    private int beginPop;
    private int endPop;
    private String requestUser;

public RideId() {
}

public RideId(int beginPop, int endPop, String requestUser) {
    this.beginPop = beginPop;
    this.endPop = endPop;
    this.requestUser = requestUser;
}
... 
```

因此，“RideID”是实体“Ride”的 ID

```
public class Ride implements java.io.Serializable {

private RideId id;
private User userByRequestUser;
private User userByAcceptUser;
private Pop pop;
private Boolean rideStatus;

public Ride() {
}

public Ride(RideId id, User userByRequestUser, Pop pop) {
    this.id = id;
    this.userByRequestUser = userByRequestUser;
    this.pop = pop;
}

public Ride(RideId id, User userByRequestUser, User userByAcceptUser,
        Pop pop, Boolean rideStatus) {
    this.id = id;
    this.userByRequestUser = userByRequestUser;
    this.userByAcceptUser = userByAcceptUser;
    this.pop = pop;
    this.rideStatus = rideStatus;
}
... 
```

我怎样才能 saveOrUpdate() 类型 Ride 的新对象？

谢谢大家，对不起我的英语！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:50:20.350

这很简单。您需要先创建一个 new `RideId`，将其分配给一个 new`Ride`并`saveOrUpdate`使用`Ride`.

```
RideId id = new RideId(1, 2, "someuser");
Ride ride = new Ride(id, ...);
session.saveOrUpdate(ride); 
```

# matlab - sfit Matlab对象的cfit数据

> ID：15897031
> 
> 赞同：0
> 
> 时间：2013-04-09T08:32:53.203
> 
> 标签：matlab

有没有办法从 cfit 或 sfit 对象中提取数据？我想从 sfit 对象中提取拟合值的矩阵，而不访问每个拟合元素（在 240x320 中非常慢）。问题相当于从 cfit 对象中提取向量。是否有在这个对象上定义的方法，或类似的东西？

请发代码！谢谢，尼古拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:20:11.883

您可以使用 sfit.element 访问 sfit 对象的元素。例如：

```
sf = fit([x,y],z,'poly23');
sf

     Linear model Poly23:
     sf(x,y) = p00 + p10*x + p01*y + p20*x^2 + p11*x*y + p02*y^2 + p21*x^2*y
                    + p12*x*y^2 + p03*y^3
     Coefficients (with 95% confidence bounds):
       p00 =       1.118  (0.9149, 1.321)
       p10 =  -0.0002941  (-0.000502, -8.623e-05)
       p01 =       1.533  (0.7032, 2.364)
       p20 =  -1.966e-08  (-7.084e-08, 3.152e-08)
       p11 =   0.0003427  (-0.0001009, 0.0007863)
       p02 =      -6.951  (-8.421, -5.481)
       p21 =   9.563e-08  (6.276e-09, 1.85e-07)
       p12 =  -0.0004401  (-0.0007082, -0.0001721)
       p03 =       4.999  (4.082, 5.917) 
```

要获得 sf 的一个元素：

```
sf.p03

ans =

    4.9994 
```

# java - 屏幕方向更改为横向时如何向视图添加滚动？

> ID：15897033
> 
> 赞同：12
> 
> 时间：2013-04-09T08:32:57.107
> 
> 标签：java, android, landscape

我有一个 Activity 有几个`TextEdits`，在纵向模式下，一切都完美显示。但是当我将设备切换到横向模式时，几个视图没有显示（它们被剪切）。我可以以某种方式自动在视图中添加滚动设备切换到横向模式？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-09T08:50:10.907

您可以尝试这样做，这可能对您有帮助：

将 ScrollView 添加到您的布局并设置此标志`android:fillViewport="true"` ，例如：

```
 <ScrollView
    android:id="@+id/scrollView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        // your layout

    </LinearLayout>
</ScrollView> 
```

当您的屏幕中没有足够的空间放置项目时，将启用滚动。然后你可以滚动屏幕。因此，如果屏幕方向更改为横向，您可以滚动项目，而纵向则所有内容都可以完美显示而无法滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:37:57.457

检查您的设备何时处于纵向模式并添加：

```
ScrollView scroll = new ScrollView(yourContext);
scroll.setBackgroundColor(android.R.color.transparent);
scroll.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
scroll.addView(yourView); 
```

# database - 找不到驱动程序（ZF2 + Doctrine 2 + PostgreSQL）。错误的驱动程序

> ID：15897039
> 
> 赞同：2
> 
> 时间：2013-04-09T08:33:18.923
> 
> 标签：database, pdo, doctrine, zend-framework2, pg

应用程序.config.php ：

```
'doctrine' => array(
     'connection' => array(
        // default connection name
        'orm_default' => array(
            'driverClass' => 'Doctrine\DBAL\Driver\PDOPgSql\Driver',
            'params' => array(

                'driver'   => 'pdo_pgsql',
                'host'     => 'localhost',
                'port'     => '5432',
                'user'     => 'postgres',
                'password' => 'root',
                'dbname'   => 'thebasee',
            )
        )
    ),
   'driver' => array(
        __NAMESPACE__ . '_driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'array',
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
        ),
        'orm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
            )
        )
    )
), 
```

模块.config.php：

```
 // Controllers in this module
'controller' => array(
    'classes' => array(
        'Account/Account' => 'Account\Controller\AccountController'
    ),
),

'doctrine' => array(
    'driver' => array(
        'orm_driver' => array(
            'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
            'cache' => 'array',
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
        ),
        'orm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Entity' => 'orm_driver'
            )
        ),
        'odm_driver' => array(
            'class' => 'Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver',          
            'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Document')
        ),
        'odm_default' => array(
            'drivers' => array(
                __NAMESPACE__ . '\Document' => 'odm_driver'
            )
        )                   
    )
),

// Routes for this module
'router' => array(
    'routes' => array(
        'Account' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/account[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Account/Account',
                    'action'     => 'index',
                ),
            ),
        ),
    ),
),    

// View setup for this module
'view_manager' => array(
    'template_path_stack' => array(
        'Account' => __DIR__ . '/../view',
    ),
), 
```

现在，错误是：

> **/var/www/applicationDir/vendor/doctrine/dbal/lib/Doctrine/DBAL/Driver/PDOConnection.php:36 中的**“找不到驱动程序”****

 **安装了 postgresql 的驱动程序（另一个项目的工作正常）但是对于 MySql inst，并且在跟踪中我播种了这个：

> **/var/www/applicationDir/vendor/doctrine/dbal/lib/Doctrine/DBAL/Driver/PDOConnection.php(36): PDO->__construct('mysql:host=loca...', 'postgres', 'root '， 大批）**

它似乎使用了 Mysql 驱动程序，但是为什么，如果我选择 Pg？！请帮忙。**

# android - (Android Xamarin) 获取资源字符串值而不是 int

> ID：15897042
> 
> 赞同：28
> 
> 时间：2013-04-09T08:33:26.923
> 
> 标签：android, xamarin.android, xamarin

我刚刚开始使用 VS2012 使用 Xamarin 创建一个简单的 android 应用程序。我知道有一种类型的资源只用于字符串。在我的资源文件夹中，我有一个这样的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <string name="RecordsTable">records</string>
   <string name="ProjectTable">projects</string>
   <string name="ActivitiesTable">activities</string>
</resources> 
```

在我的代码中，我想使用这些资源的值，例如：

```
string recordTable = Resource.String.RecordsTable; //error, data type incompatibility 
```

我知道它 `Resource.String.<key>`返回一个整数，所以我不能使用上面的代码。我希望该`recordTable`变量的值为`records`.

有没有办法可以将这些资源字符串的值用于我的代码的字符串变量？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-09T08:39:02.530

尝试使用[Resources.GetString](http://docs.mono-android.net/?link=M%3aAndroid.Content.Res.Resources.GetString%28int%29#)从字符串 Resources 获取字符串

```
Context context = this;
// Get the Resources object from our context
Android.Content.Res.Resources res = context.Resources;
// Get the string resource, like above.
string recordTable = res.GetString(Resource.String.RecordsTable); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-05-29T03:00:08.917

值得注意的是，您**无需**创建实例`Resources`即可访问资源表。这同样适用：

```
using Android.App;

public class MainActivity : Activity
{
    void SomeMethod()
    {
        string str = GetString(Resource.String.your_resource_id);
    }
} 
```

`GetString()`，这样使用，是在抽象`Context`类上定义的方法。你也可以使用这个版本：

```
using Android.App;

public class MainActivity : Activity
{
    void SomeMethod()
    {
        string str = Resources.GetString(Resource.String.your_resource_id);
    }
} 
```

`Resources`，以这种方式使用，是类上的只读属性`ContextWrapper`，它`Activity`继承自`ContextThemeWrapper`类。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-08T11:09:03.937

如果您不在活动或其他上下文中，则应获取上下文并使用它来获取资源和 PackageName，如下例所示：

```
int resID = context.Resources.GetIdentifier(listEntryContact.DetailImage.ImageName, "drawable", context.PackageName);
imageView.SetImageResource(resID); 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-04-09T08:37:38.910

```
int int_recordTable = Resource.String.RecordsTable;

String recordTable = (String.valueOf(int_recordTable)); //no more errors 
```

获取`int`，然后将其更改为`String`

# c# - 使用 System.Drawing.Image.FromFile 创建图像对象

> ID：15897044
> 
> 赞同：3
> 
> 时间：2013-04-09T08:33:30.067
> 
> 标签：c#, asp.net, image

我正在尝试获取用户从列表框中选择的图像的图像尺寸。图像文件在 FTP 服务器上可用。我在列表框中显示文件名供用户选择。选择后，我想显示图像的预览，因为我想获得尺寸，以便我可以在需要时调整它的大小。

我将链接到当前选定列表项的文件名存储到字符串变量中。我知道服务器上的路径。我正在使用以下代码创建 Image 对象，但没有运气

```
try
{
     string dir = Session["currentUser"].ToString();
     System.Drawing.Image img = System.Drawing.Image.FromFile("~/Uploads/"+dir+"/"+fName, true);     //ERROR here, it gives me file URL as error message!
}
catch(Exception ex)
{
     lbl_Err.Text = ex.Message;
} 
```

不知道出了什么问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T08:37:08.750

用于`Server.MapPath`从服务器获取图像。
如下

```
System.Drawing.Image img = 
      System.Drawing.Image.FromFile(Server.MapPath("Uploads/"+dir+"/"+fName), true); 
```

您也可以使用以下

*   Server.MapPath(".") 返回正在执行的文件（例如 aspx）的当前物理目录
*   Server.MapPath("..") 返回父目录
*   Server.MapPath("~") 返回应用程序根目录的物理路径
*   Server.MapPath("/") 返回域名根目录的物理路径（不一定和应用的根目录相同）

参考
[Server.MapPath(".")、Server.MapPath("~")、Server.MapPath(@"\")、Server.MapPath("/")。有什么不同？](https://stackoverflow.com/questions/275781/server-mappath-server-mappath-server-mappath-server-mappath)

# css - 用可滚动的 Div 填充剩余高度

> ID：15897045
> 
> 赞同：2
> 
> 时间：2013-04-09T08:33:31.273
> 
> 标签：css

所以我尝试了多种解决方案，但似乎没有一个适合我的布局。我希望拥有的是 2 列，每列有 2 个 div，占父母宽度的 100%。每个 div 的高度是根据内容变化的。

所以想法是，左边的2列将决定两列的高度，最后一个div（在右下角）将是可滚动的并占据剩余空间。

我在这里有一个 jsfiddle 示例：http: [//jsfiddle.net/Split98/cndej/](http://jsfiddle.net/Split98/cndej/)但这有两个问题：a）它不允许 div C 在高度上仍然是动态的 b）我真的不' t 想使用 display:table-cell

此外，当我尝试在我的网站上实施这个临时解决方案时，一切都崩溃了。因此，与其试图解决问题，我什至没有真正考虑解决方案，而是认输并寻求帮助。

现在我知道有很多关于等高的问题，但我找不到解决这两个问题的方法：让左右 div 具有相同的高度，并且让所有 4 个 div 占据空间。

所以这是最基本的形式（如果可能的话，我希望在没有表格单元的情况下完成这个）：

```
<div id="wrap">
 <div class="left">
   <div class="A">A</div>
   <div class="B">B</div>
 </div>
 <div class="right">
  <div class="C">C</div>
  <div class="D">Need this to expand to fill</div>
 </div>
</div>

.left {
 width: 200px;
 display: table-cell;
}

.right {
 position: relative;
 width: 200px;
 display: table-cell;
 background: yellow;
} 

.A {
 background: blue;
 height: 100px;
}

.B {
 background: pink;
 height: 200px;
}

.C {
 background: red;
 height: 50px;
}

.D {
 width: 100%;
 position: absolute;
 bottom: 0;
 left: 0;
 top: 50px;
 right: 0px;
 background: green;
} 
```

我也不反对使用 Javascript，但我对它一点也不擅长。最好，如果可能的话，我想用 CSS 来做这件事。

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:52:38.743

如果选择 JavaScript，您可以将此解决方案与 jQuery 一起使用。

```
$(function(){
    $('.D').height( $('.right').height() - $('.C').height() );
}) 
```

[http://jsfiddle.net/cndej/3/](http://jsfiddle.net/cndej/3/)

# sql-server-2008 - 过程之间共享的临时表

> ID：15897046
> 
> 赞同：1
> 
> 时间：2013-04-09T08:33:34.797
> 
> 标签：sql-server-2008

我有一个程序让我们称之为

```
caller 
```

创建临时表的过程

```
#temp1 
```

并执行另一个过程让我们称之为

```
callee 
```

将一些值插入到#temp1 表中的过程，以便调用者过程可以使用它。现在的问题是我的被调用程序只能通过调用者或其他创建#temp1 表然后执行被调用者的程序来调用。有没有办法像引入'If'条件检查被调用者是否已被调用者调用然后只执行语句

```
'insert #temp1 ....' 
```

和其他明智的避免它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:41:58.747

您可以实现逻辑以知道谁调用了“被调用者”过程 - 将参数添加到“被调用者”，默认值 = NULL（例如），然后通过添加这个值为 1 的参数仅更改“调用者”过程（例如）。在“被调用者”过程中检查此参数的值，如果它不同于 NULL，则使用您的临时表。

代码示例：

```
create procedure [callee]
(
@CalledByCaller bit = NULL
)
as 
set nocount on 
If @CalledByCaller =1 
begin 
    SELECT '3'
    --work with temp table
end
SELECT '2'
go

create procedure [caller] 
as
set nocount on 

exec [callee] @CalledByCaller =1 

go 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:52:42.400

**如果**被调用者将始终生成单个结果集，并且如果它可用，则应该插入该结果集`#temp1`，那么您可以考虑将其转移`INSERT`到外部过程中，使用`INSERT ... EXEC`inside `caller`：

```
CREATE procedure caller
as
   --Various things
   create table #temp1 (column1,column2)
   --Other things
   insert into #temp1 (column1,column2) exec callee
   --Work with #temp1 
```

# c# - 如何通过在 Winform 中编程突出显示列表视图中的列表视图项？

> ID：15897048
> 
> 赞同：0
> 
> 时间：2013-04-09T08:33:42.943
> 
> 标签：c#, .net, winforms

就像手动点击 listviewitem 一样，它会变成蓝色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:42:39.787

走这条路：

```
Listview lv = new ListView();   // Maybe lv.MultiSelect = false  

// Add your items

lv.Items[<index>].Focused = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:48:12.093

将列表视图项的选定属性设置为 true。

```
myListView.Items[indexNumber].Selected = true;
myListView.Items[indexNumber].Focused = true; 
```

# api - 如何使用 Spotify 视图 API？

> ID：15897050
> 
> 赞同：0
> 
> 时间：2013-04-09T08:33:46.830
> 
> 标签：api, views, spotify

如何正确使用 Spotify Views API？

[https://developer.spotify.com/technologies/apps/docs/preview/views/index.html](https://developer.spotify.com/technologies/apps/docs/preview/views/index.html)

我正在尝试在 div 中实现一个 throbber，所以我使用以下代码：

```
 require(['$views/throbber#Throbber'], function(Throbber) {

      var favs = document.getElementById('favs');
      var throbber = Throbber.forElement(favs);

    }); 
```

但这会引发“ReferenceError：require is not defined”。当我这样使用它时：

```
 var sp = getSpotifyApi();
    sp.require(['$views/throbber#Throbber'], function(Throbber) {

      var favs = document.getElementById('favs');
      var throbber = Throbber.forElement(favs);

    }); 
```

它抛出了这个错误。“TypeError: Object $views/throbber#Throbber has no method 'match'”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:54:42.403

Throbber[组件](https://developer.spotify.com/technologies/apps/docs/preview/views/views-throbber-throbber.html)仅在 1.X API 上可用，使用您的第一个代码片段的语法。

为了让 Spotify 客户端知道您正在使用该版本的 API，您需要在`manifest.json`文件中指定使用 1.X API，方法是添加一个包含和框架的`Dependencies`属性：`api``views`

```
"Dependencies": {
    "api": "1.0.0",
    "views": "1.0.0"
} 
```

# android - 我可以在运行时在列表视图中插入一列吗？

> ID：15897053
> 
> 赞同：6
> 
> 时间：2013-04-09T08:33:52.903
> 
> 标签：android, listview

我想让一个listview看起来像android中的datagrid控件。所有列都是由动态代码生成的。我的代码片段可以成功构建，但是listview没有按我的预期显示。它有什么问题？

```
 @Override
        public View getView(int position, View convertView, ViewGroup parentView) {
            ViewHolder holder = null;
            if (convertView == null) {
                synchronized (MainActivity.this) {
                    convertView = mInflater.inflate(id_row_layout, null);
                    holder = new ViewHolder();

//I had add an textView to the convertView,but it not show

                    LinearLayout layout = (LinearLayout) convertView.findViewById(R.id.rLayout);
                    TextView tx = new TextView(context);
                    tx.setText("ads");
                    layout.addView(tx);

                    MyHScrollView scrollView1 = (MyHScrollView) convertView
                            .findViewById(R.id.horizontalScrollView1);

                    holder.scrollView = scrollView1;
                    holder.txt1 = (TextView) convertView
                            .findViewById(R.id.textView1);
                    holder.txt2 = (TextView) convertView
                            .findViewById(R.id.textView2);
                    holder.txt3 = (TextView) convertView
                            .findViewById(R.id.textView3);
                    holder.txt4 = (TextView) convertView
                            .findViewById(R.id.textView4);
                    holder.txt5 = (TextView) convertView
                            .findViewById(R.id.textView5);

                    MyHScrollView headSrcrollView = (MyHScrollView) mHead
                            .findViewById(R.id.horizontalScrollView1);
                    headSrcrollView
                            .AddOnScrollChangedListener(new OnScrollChangedListenerImp(
                                    scrollView1));

                    convertView.setTag(holder);
                    mHolderList.add(holder);
                }
            } else {
                holder = (ViewHolder) convertView.getTag();
            }
            holder.txt1.setText(position + "" + 1);
            holder.txt2.setText(position + "" + 2);
            holder.txt3.setText(position + "" + 3);
            holder.txt4.setText(position + "" + 4);
            holder.txt5.setText(position + "" + 5);

            return convertView;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-27T10:43:35.770

```
1) In your adapter with Arraylist override the appropriate constructor
2) In your activity, make your variable data a field (type ArrayList
3) When you add a location you can use data.add(location)
4) Then you can call notifyDatasetChanged() on your adapter 
```

示例代码：[http ://androidadapternotifiydatasetchanged.blogspot.in/](http://androidadapternotifiydatasetchanged.blogspot.in/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:01:55.147

在带有额外 textView 的 ApiDemos 中为我工作；

```
public class List14 extends ListActivity {

    private static class EfficientAdapter extends BaseAdapter {
        private LayoutInflater mInflater;
        private Bitmap mIcon1;
        private Bitmap mIcon2;
        private Context context;

        public EfficientAdapter(Context context) {
            // Cache the LayoutInflate to avoid asking for a new one each time.
            mInflater = LayoutInflater.from(context);
this.context = context;
            // Icons bound to the rows.
            mIcon1 = BitmapFactory.decodeResource(context.getResources(), R.drawable.icon48x48_1);
            mIcon2 = BitmapFactory.decodeResource(context.getResources(), R.drawable.icon48x48_2);
        }

        /**
         * The number of items in the list is determined by the number of speeches
         * in our array.
         *
         * @see android.widget.ListAdapter#getCount()
         */
        public int getCount() {
            return DATA.length;
        }

        /**
         * Since the data comes from an array, just returning the index is
         * sufficent to get at the data. If we were using a more complex data
         * structure, we would return whatever object represents one row in the
         * list.
         *
         * @see android.widget.ListAdapter#getItem(int)
         */
        public Object getItem(int position) {
            return position;
        }

        /**
         * Use the array index as a unique id.
         *
         * @see android.widget.ListAdapter#getItemId(int)
         */
        public long getItemId(int position) {
            return position;
        }

        /**
         * Make a view to hold each row.
         *
         * @see android.widget.ListAdapter#getView(int, android.view.View,
         *      android.view.ViewGroup)
         */
        public View getView(int position, View convertView, ViewGroup parent) {
            // A ViewHolder keeps references to children views to avoid unneccessary calls
            // to findViewById() on each row.
            ViewHolder holder;

            // When convertView is not null, we can reuse it directly, there is no need
            // to reinflate it. We only inflate a new View when the convertView supplied
            // by ListView is null.
            if (convertView == null) {
                convertView = mInflater.inflate(R.layout.list_item_icon_text, null);

                // Creates a ViewHolder and store references to the two children views
                // we want to bind data to.
                holder = new ViewHolder();
                holder.text = (TextView) convertView.findViewById(R.id.text);
                holder.icon = (ImageView) convertView.findViewById(R.id.icon);
                LinearLayout layout = (LinearLayout) convertView.findViewById(R.id.layout);
                TextView child = new TextView(context);
                child.setText("CHILD");
                layout.addView(child);

                convertView.setTag(holder);
            } else {
                // Get the ViewHolder back to get fast access to the TextView
                // and the ImageView.
                holder = (ViewHolder) convertView.getTag();
            }

            // Bind the data efficiently with the holder.
            holder.text.setText(DATA[position]);
            holder.icon.setImageBitmap((position & 1) == 1 ? mIcon1 : mIcon2);

            return convertView;
        }

        static class ViewHolder {
            TextView text;
            ImageView icon;
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new EfficientAdapter(this));
    }

    private static final String[] DATA = {
            "Abbaye de Belloc", "Abbaye du Mont des Cats", "Abertam",
           };
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/31kkB.png)

检查您的静态`holder`和`layouts`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:25:03.103

有一个额外的列很容易，只需显示和隐藏选定位置的元素。一旦元素未显示，您必须隐藏它们。

事实上，你也可以从你的适配器中对一个 RelativeLayout 进行膨胀，但这可能会更难实现。

希望有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T09:44:33.047

如果每行的行文件布局相同，则

> 你可以只添加项目的数量（换句话说你的列）

给您的`ArrayList`（负责填写`listview` `adapter`），然后致电`notifydatasetchanged(true)` 或`adapter.notifyDataSetChanged()`

# tfs - 搁置集“搁置集名称”、“用户”存在合并冲突

> ID：15897054
> 
> 赞同：1
> 
> 时间：2013-04-09T08:33:54.010
> 
> 标签：tfs, tfsbuild

当我尝试构建搁置集时，出现错误 - 搁置集“搁置集名称”、“用户”存在合并冲突。为什么我收到此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:31:02.133

当您构建一个`shelveset`.TFS 时，TFS 有效地将架子上架到一个工作目录中。这与用户将架子上架到他们自己的工作目录中时完全相同。

该错误告诉您在进行此取消搁置时存在冲突。您可以通过在您自己的机器上将架子放到一个干净（最新）的工作区中来获得更多的可见性。您应该会看到相同的冲突，并`Visual Studio`会为您提供解决冲突的工具。

我会解决冲突，然后重新搁置。

**原因**

最常见的原因是在搁置的文件之一上发生了冲突签入。因此，当您尝试取消搁置时，自动合并会失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-17T15:43:06.303

有时不同的用户可以取消搁置到一个干净的工作区，创建一个新的搁置集，而搁置集构建仍然会失败并出现相同的错误。添加新文件时尤其如此。到目前为止，我发现的唯一解决方案是让用户签入新文件，将它们从搁置集中删除并再次尝试搁置构建。

# sql - JOIN 选择中的正确分页

> ID：15897055
> 
> 赞同：11
> 
> 时间：2013-04-09T08:34:02.177
> 
> 标签：sql, postgresql, join, pagination, hsqldb

我有一条 SQL 语句

```
select * 
from users u left join files f
on u.id = f.user_id
where f.mime_type = 'jpg'
order by u.join_date desc
limit 10 offset 10 
```

关系是 1-N：用户可能有很多文件。

这有效地选择了第二个 10 元素页面。

问题是此查询限制/偏移连接表，但我想限制/偏移第一个 ( `users`) 表中的不同行。

**如何？**我的目标是 PostgreSQL 和 HSQLDB

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-09T08:45:36.290

您需要先限制外部表上的选择，然后将依赖表连接到结果。

```
select * from (select * from users where f.mime_type = 'jpg' limit 10 offset 10)  as u
left join files f
   on u.id = f.user_id 
```

# ruby-on-rails - 如何在“/someurl”上运行在“/”上运行的应用程序的副本？

> ID：15897064
> 
> 赞同：2
> 
> 时间：2013-04-09T08:34:24.557
> 
> 标签：ruby-on-rails, routes, rails-routing

假设我有一个像 Digg 这样的网站正在运行，`bookmarks.com`并且想要创建`bookmarks.com/girls`共享所有路线的网站，但所有链接都指向`/girls/<something>`而不是仅仅指向`/<something>`.

在不更改视图中的所有链接的情况下，我想修改`routes.rb`以执行以下操作：

```
all_routes = lambda {
  ...
}

scope '/girls', &all_routes, constraint: { |r| r.session[:subsite] == girls }
scope '/', &all_routes 
```

但是，我一直在反复试验，无法提出解决方案。

**奖励积分**：如果我有多个动态子站点，我将如何路由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:55:01.243

我认为你可以通过子类化你的 Rails 应用程序来实现这一点，然后在你的路线中使用[Rack.mount安装它](http://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/Base.html#method-i-mount)

```
mount AnotherRailsApp, :at => "/something" 
```

或者，您可以使用 rackup 文件，因此在 config.ru 中：

```
map "/" do
  run RailsApp::Application
end

map "/something" do
  run AnotherRailsApp::Application
end 
```

但是，无论使用哪种方法，我都不确定 Rails 的 URL 辅助方法在挂载在“/something”时是否能够生成有效的 URL，并且您的数据也可能会遇到一些有趣的问题，除非您每个应用程序有一个 db。

# html - HTML5 背景动画 onScroll，最佳实践

> ID：15897068
> 
> 赞同：0
> 
> 时间：2013-04-09T08:34:46.490
> 
> 标签：html, animation, background

当用户向下滚动页面时，我正在寻找一种在页面背景上实现一些动画的方法。想想……也许是一个分割的球体，当用户向下滚动页面并在向上滚动时离开。

我曾想过将 SVG 与 JS 结合使用，但也许你们中的一些人知道实现这类东西的更好方法。

也许你们中的一些人已经编写了那种动画？

PS：我不想使用 Flash 等，只是 HTML5 和现有的框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:06:58.800

我找到了一些框架和插件，它们完全符合我的要求，我不想阻止它们。以下是链接：

*   [卷轴画](http://johnpolacek.github.io/scrollorama/)
*   [滚动台，视差](http://johnpolacek.github.io/scrolldeck.js/decks/parallax/)

祝你今天过得愉快！:)

西

# delphi - Win32 应用程序上的 Http 服务器

> ID：15897077
> 
> 赞同：-1
> 
> 时间：2013-04-09T08:35:19.167
> 
> 标签：delphi, http

如何使用嵌入式 Http 服务器编写桌面 Delphi 7 Win32 应用程序，例如带有 Web 界面的 Media Player Classic。我需要一个独立的 HTTP 服务器从用户的浏览器启动到一个 URL，例如 http://:/ 并使用 GET 或 POST 请求，然后从 Delphi 应用程序响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:31:09.677

TCP/IP 库通常带有演示项目。例如[http://synapse.ararat.cz/doku.php/public:howto:httpsserver](http://synapse.ararat.cz/doku.php/public:howto:httpsserver)

还有一些更大的框架提供 HTTP 服务器作为他们的服务之一（它仍然允许您切割他们的代码的那部分并重用它）。

例如（但 Henri 似乎厌倦`Embarcadero`并放弃了他的`Delphi`项目）[http://code.google.com/p/delphionrails/w/list](http://code.google.com/p/delphionrails/w/list)

另一个例子是[http://blog.synopse.info/tag/HTTP](http://blog.synopse.info/tag/HTTP) 这个实现依赖于 Windows`http.sys`驱动程序，它是作为`Microsoft IIS`. 在最近基于`DataSnap`性能枪战`mORMot`的服务器中，通过`http.sys`AFAIR 工作，显示了出色的性能和低开销。顺便说一句，`Indy`基于`DataSnap`- 被证明只能在低到中等负载下存活。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:01:24.560

将 IdHTTPServer 添加到项目中。

# c# - 组合框显示成员未更改

> ID：15897078
> 
> 赞同：0
> 
> 时间：2013-04-09T08:35:21.550
> 
> 标签：c#, entity-framework, combobox

我在我的表单中使用了一个 ComboBox 并使用实体框架作为它的数据源，我的代码是：

```
 publishContext = new publishingCompanyEntities();
            comboBox2.DataSource = publishContext.Authors;
            comboBox2.DisplayMember = "FirstName";
            MessageBox.Show(comboBox2.DisplayMember.ToString());//this line return null ! 
```

虽然我改了`DisplayMember`ComboBox的，MessageBox返回null值，ComboBox没有填充数据，数据库有数据`publishContext.Authors`返回，但是ComboBox不显示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:50:01.910

您需要像我提到的那样显示您的消息框。

```
publishContext = new publishingCompanyEntities();
comboBox2.DisplayMember = "FirstName";
comboBox2.DataSource = publishContext.Authors.ToList();
MessageBox.Show(publishContext.Authors.Count().ToString()); 
```

现在检查它是否为 null 如果为 null 然后使用 try catch 块来获取确切的错误

```
try
{
publishContext = new publishingCompanyEntities();
comboBox2.DisplayMember = "FirstName";
comboBox2.DataSource = publishContext.Authors.ToList();
MessageBox.Show(publishContext.Authors.Count().ToString());
}
catch(Exception ex)
{
} 
```

或者您也可以查看此[链接](http://social.msdn.microsoft.com/Forums/en-US/winformsdatacontrols/thread/c71f0f95-3f88-4b04-9e95-11dd15b11d37)

希望它有效...

# c++ - 警告 GDB 设备的 IOCTL 不合适

> ID：15897079
> 
> 赞同：2
> 
> 时间：2013-04-09T08:35:23.443
> 
> 标签：c++, linux, compilation, qt-creator, stdout

我正在使用一个在 Linux 上崩溃的程序（并且在 Windows 上运行良好），我不知道为什么。我有一个很奇怪的错误，那就是：`&"warning: GDB: Failed to set controlling terminal: Inappropriate ioctl for devide\n"`当我启动调试器时。

我在互联网上找到的信息让我认为它与输出有关。

相关文件崩溃`lign 0`并仅包含此功能：

```
void Sync_Print::stdOutFormat (const char* format, ...) {
    va_list args;
    va_start(args, format);
    Locker Protect (Synchro);
    ::vprintf(format, args);
    va_end(args);
} 
```

`Sync_Print`是我的类的名称，它实现`static void stdOutFormat(const char* format, ...);`和`static Mutex Synchro;`

在我在 QtCreator 上的调试器中，它说程序在名为`/lib/ld-linux.so.2`lign 0 的文件中崩溃了。程序立即崩溃，我什至无法使用...输出任何东西`std`......即使是空的 main 并且没有包含它也会崩溃。

我有点迷路了......我不知道提供更多代码是否准确。如果您需要任何精度，我很乐意给他们...

我在 Linux Ubuntu 12.04 下，带有 QtCreator 和 GCC 4.7.2。我正在使用 Qt 4。

# c# - C# 无法捕获 StackOverflowException 或查看它发生的位置

> ID：15897083
> 
> 赞同：4
> 
> 时间：2013-04-09T08:35:34.383
> 
> 标签：c#, visual-studio, visual-studio-2012, stack-overflow

我知道这很模糊，但这是我能收集到的全部信息。我希望有人对这可能发生的情况有所了解。

我有一个 64 位程序，我在 Win 7 64 位机器上运行，内置于 Visual Studio 2012。

它使用位于另一个项目中的类（编译为 dll）。该类有一个错误的迭代器，可能导致堆栈溢出。调用错误迭代器的操作是通过任务调用的。

所以在我的程序中，代码如下所示：

```
new Task(()=>{
try
{
    DoWork(); //<-- buggy iterator is called inside
}
catch (Exception ex)
{
    //Exception reported to user
}
}).Start(); 
```

该代码每次都在相同的数据上执行，并且不涉及随机变量或 guid 生成，因此每次都应该产生相同的输出。

大多数时候，它会*在 Unknown Module 中发生 StackOverflowException*崩溃（尽管我知道它到底发生在哪里）。如果发生这种情况，我无法查看发生溢出的代码点，并且 try-catch 块什么也不做！我无法继续执行该程序（如果我在没有调试的情况下运行它，它会显示*“必须关闭程序让我们在线检查解决方案”*系统窗口）。

现在，有时它会捕获异常（显示导致异常的代码中的正确位置）。这是随机的，但如果我更频繁地中断任务（比如在任务工作期间随机插入断点），似乎会发生更多。

但是，我仍然无法继续申请。即使异常发生在应该捕获 StackOverflowException 的 try-catch 块内（它应该捕获它，因为 StackOverflowException 包含在 Exception 中 - C# 不会让您捕获两者并明确告诉您 SOE 已经包含在 E 中）。

我尝试制作一个小程序，该程序在 try-catch 块内故意造成堆栈溢出，它还显示*“程序必须关闭，让我们在线检查解决方案”*系统窗口为我而不是正确处理。这是代码：

```
 private bool Overflow()
    {
        return Overflow();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        try { Overflow();}
        catch (StackOverflowException ex) { }
    } 
```

因此，我有几个问题：

**问题一：**

是否有可能捕获 StackOverflowExceptions？我该怎么做？

**问题2：**

当您的 dll（同一解决方案中的其他项目）内部发生堆栈溢出时，什么可以让 VS 2012 调试器认为它是“未知模块”？

**问题 3：**

为什么用部落乐器做一些奇怪的魔术舞蹈会减少这样做的频率？（我的意思是随机破坏正在进行的程序）

总的来说，这是怎么回事？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:38:26.450

不允许您捕获*真正的*堆栈溢出异常，这就是它不起作用的原因。

另请参阅[此](https://stackoverflow.com/questions/1599219/c-sharp-catch-a-stack-overflow-exception)讨论。

我无法回答你的第二个问题，只能说“程序真的很乱”。

对于您的第三个问题：因为它在单独的线程中运行，所以它运行的代码量将根据您何时中断程序而有所不同。我认为您能够深入了解这一点的唯一方法是通过一些繁琐的逐行调试或大量 Debug.WriteLine()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:39:19.737

1) 从 .NET Framework 2.0 版本开始，StackOverflowException 对象无法被 try-catch 块捕获，相应的进程默认终止。因此，建议用户编写代码来检测和防止堆栈溢出。例如，如果您的应用程序依赖于递归，请使用计数器或状态条件来终止递归循环。请注意，承载公共语言运行时（CLR）的应用程序可以指定CLR卸载发生堆栈溢出异常的应用程序域，并让相应的进程继续进行。有关详细信息，请参阅 ICLRPolicyManager 接口和托管概述。（[http://msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx)）

# xcode - 使用 MKNetworkoperation 调用 Web 服务

> ID：15897084
> 
> 赞同：0
> 
> 时间：2013-04-09T08:35:43.127
> 
> 标签：xcode, web-services, mknetworkkit

在我们的开发团队中，我们实现了一个 WEB 服务，它将对客户端进行身份验证。从 iPhone 应用程序中，我们需要将客户端的信息发送到 Web 服务，为此，我编写了以下函数。

```
-(void)authenticateClient:(NSString*)theContractNumber
           ClientCode:(NSString*)theClientCode
            CellPhone:(NSString*)theCellPhone
              appleID:(NSString*)theAppleID

{
NSLog(@"Begin Send the information to the Web Service",nil);

NSString *uid = [UIDevice currentDevice].uniqueIdentifier;

NSDictionary *formParams = [NSDictionary dictionaryWithObjectsAndKeys:
                            theClientCode, @"ClientCode",
                            theContractNumber, @"ContractCode",
                            theAppleID, @"AppleID",
                            @" ", @"AndroidID",
                            @" ", @"WindowsID",
                            uid, @"AppleDeviceID",
                            @" ", @"AndroidDeviceID",
                            @" ", @"WindowsDeviceID",
                            theCellPhone, @"TelephoneNumber"
                            , nil];

MKNetworkOperation *operation = [self.engine operationWithPath:@"/services/Authentication.ashx"
                                                        params: formParams
                                                    httpMethod:@"POST"];
[operation addCompletionHandler:
 ^(MKNetworkOperation *operation) {
     NSLog(@"%@", [operation responseString]);
 }
                   errorHandler:^(MKNetworkOperation *errorOperation, NSError *error) {
                       NSLog(@"%@", error);
                   }];
[self.engine enqueueOperation:operation] ;

} 
```

该功能有效（或似乎没有错误），但实际上它没有做任何事情。它从**[operation addCompletionHandler:**块传递，但它不做任何事情。我也一步一步地执行了它，我看到应用程序到达了这一行，然后它执行它并直接进入**[self.engine enqueueOperation:operation]**行而不进入代码块。

有人可以帮忙吗？

谢谢你。

# r - 错误 ggplot（seq.int(0, to0 - from, by) 中的错误：'to' 必须是有限的）

> ID：15897087
> 
> 赞同：3
> 
> 时间：2013-04-09T08:35:55.060
> 
> 标签：r, ggplot2

为了用 绘制数据`ggplot2`，我遇到了以下错误。可用的命令、数据和错误类型如下：

```
require(ggplot2)
require(reshape2)
df <- data.frame(HMn25_30$avg,dt_hmn$dt)

df[3] = c(   "Normal",   "Normal",
             "Normal",
             "Normal",
             "Normal",
             "Normal",
             "Normal",
             "Normal",
             "Normal",
             "Normal",
             "Outlier",
             "Outlier",
             "Outlier",
             "Outlier",
             "Outlier",
             "Outlier",
             "Normal",
             "Outlier",
             "Outlier",
             "Normal",
             "Normal",
             "Outlier",
             "Outlier",
             "Normal",
             "Normal"
)
names(df)[1] <- 'Node 25'
names(df)[3] <-'Results'
df.m <- melt(df, names(df)[2:3], names(df)[1])
df.m$Results <- factor(df.m$Results)
df.m$dt_hmn.dt <- strptime(as.character(df.m$dt_hmn.dt), format = "%Y-%m-%d %H:%M")
p <- ggplot(df.m, aes(x = dt_hmn.dt, y = value, group = variable, color = variable))
p <- p + scale_shape_manual(values=c(27,20))
p <- p + geom_point(aes(shape = Results), cex=13, color= "blue")
p <- p + theme(axis.text.x = element_text(angle = 90, hjust = 1, size=13,color="darkred"))
p <- p + scale_color_manual(values=c("Red"))
p <- p + ylim(-1,8)
p <- p + theme_bw()
p <- p + xlab('Date and Time') 
p <- p + ylab('Temprature') 
p <- p + ggtitle("Temporal Outliers of Node 25 ") + theme(plot.title = element_text(lineheight=3, face="bold", color="black", size=29))
    p 
```

数据是：

```
HMn25_30$avg
 [1]  0.280  0.208 -0.264 -0.480 -0.708 -0.714 -0.498 -0.216  0.126  0.574  1.042  1.086  1.820
[14]  4.570  3.808  7.400  5.572  5.402  6.288  4.966  5.180  2.380  4.710  5.366  4.766

dt_hmn$dt
 [1] 9/29/2007 23:00 9/30/2007 0:00  9/30/2007 1:00  9/30/2007 2:00  9/30/2007 3:00 
 [6] 9/30/2007 4:00  9/30/2007 5:00  9/30/2007 6:00  9/30/2007 7:00  9/30/2007 8:00 
[11] 9/30/2007 9:00  9/30/2007 10:00 9/30/2007 11:00 9/30/2007 12:00 9/30/2007 13:00
[16] 9/30/2007 14:00 9/30/2007 15:00 9/30/2007 16:00 9/30/2007 17:00 9/30/2007 18:00
[21] 9/30/2007 19:00 9/30/2007 20:00 9/30/2007 21:00 9/30/2007 22:00 9/30/2007 23:00 
```

我遇到了以下错误：

```
Error in seq.int(0, to0 - from, by) : 'to' must be finite 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:59:59.947

您的代码中的第一个问题是`format=`参数`striptime()`格式错误 - 它与实际日期格式不对应。它应该是`format = "%m/%d/%Y %H:%M"`

```
df.m$dt_hmn.dt <- strptime(as.character(df.m$dt_hmn.dt), format = "%m/%d/%Y %H:%M") 
```

接下来是`ggplot()`代码 - 如果您`color="blue"`为 in 中的所有点设置了`geom_point()`您不需要使用`scale_color_manual()`并且也使用`color=variable`inside `aes()`。因为`scale_shape_manual()`没有形状`27`，改成`17`。

如果您使用，则应在此行之后放置`theme_bw()`其他`theme()`调用，以确保`theme_bw()`不会覆盖您的参数。

```
ggplot(df.m, aes(x = dt_hmn.dt, y = value, group = variable)) + 
  geom_point(aes(shape = Results), cex=13, color= "blue")+
  scale_shape_manual(values=c(17,20))+
  ylim(-1,8)+
  theme_bw()+
  xlab('Date and Time') +
  ylab('Temprature')+
  ggtitle("Temporal Outliers of Node 25 ") + 
  theme(plot.title = element_text(lineheight=3, face="bold", color="black", size=29))+
  theme(axis.text.x = element_text(angle = 90, hjust = 1, size=13,color="darkred")) 
```

![在此处输入图像描述](https://i.stack.imgur.com/mg6TL.png)

# python - 使用 pyparsing 改进错误消息

> ID：15897094
> 
> 赞同：11
> 
> 时间：2013-04-09T08:36:23.113
> 
> 标签：python, pyparsing

**编辑：**我做了第一个版本，Eike 帮助我在上面做了很多改进。我现在被困在一个更具体的问题上，我将在下面描述。你可以看看[历史上的原始问题](https://stackoverflow.com/posts/15897602/revisions)

* * *

我正在使用 pyparsing 来解析一种用于从数据库请求特定数据的小语言。它具有众多关键字、运算符和数据类型以及布尔逻辑。

我正在尝试改进在用户出现语法错误时发送给用户的错误消息，因为当前的错误消息不是很有用。我设计了一个小例子，类似于我使用上述语言所做的，但要小得多：

```
#!/usr/bin/env python                            

from pyparsing import *

def validate_number(s, loc, tokens):
    if int(tokens[0]) != 0:
        raise ParseFatalException(s, loc, "number musth be 0")

def fail(s, loc, tokens):
    raise ParseFatalException(s, loc, "Unknown token %s" % tokens[0])

def fail_value(s, loc, expr, err):
    raise ParseFatalException(s, loc, "Wrong value")

number =  Word(nums).setParseAction(validate_number).setFailAction(fail_value)
operator = Literal("=")

error = Word(alphas).setParseAction(fail)
rules = MatchFirst([
    Literal('x') + operator + number,
])

rules = operatorPrecedence(rules | error , [
    (Literal("and"), 2, opAssoc.RIGHT),
])

def try_parse(expression):
    try:
        rules.parseString(expression, parseAll=True)
    except Exception as e:
        msg = str(e)
        print("%s: %s" % (msg, expression))
        print(" " * (len("%s: " % msg) + (e.loc)) + "^^^") 
```

所以基本上，我们可以用这种语言做的唯一的事情就是写一系列的`x = 0`，连接在一起`and`和括号。

现在，有些情况下，当`and`和括号使用时，错误报告不是很好。考虑以下示例：

```
>>> try_parse("x = a and x = 0") # This one is actually good!
Wrong value (at char 4), (line:1, col:5): x = a and x = 0
                                              ^^^
>>> try_parse("x = 0 and x = a")
Expected end of text (at char 6), (line:1, col:1): x = 0 and x = a
                                                         ^^^
>>> try_parse("x = 0 and (x = 0 and (x = 0 and (x = a)))")
Expected end of text (at char 6), (line:1, col:1): x = 0 and (x = 0 and (x = 0 and (x = a)))
                                                         ^^^
>>> try_parse("x = 0 and (x = 0 and (x = 0 and (x = 0)))")
Expected end of text (at char 6), (line:1, col:1): x = 0 and (x = 0 and (x = 0 and (xxxxxxxx = 0)))
                                                         ^^^ 
```

实际上，如果解析器无法**解析**（并且在这里*解析*很重要） a 之后的某些内容`and`，它就不会再产生好的错误消息了:(

我的意思是**parse**，因为如果它可以解析 5 但解析操作中的“验证”失败，它仍然会产生一个很好的错误消息。但是，如果它无法解析有效数字（如`a`）或有效关键字（如`xxxxxx`），它将停止生成正确的错误消息。

任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T08:59:22.857

Pyparsing 总是会有一些不好的错误消息，因为它会回溯。错误消息是在解析器尝试的最后一条规则中生成的。解析器无法知道错误到底在哪里，它只知道没有匹配规则。

对于好的错误消息，您需要一个提前放弃的解析器。这些解析器不如 Pyparsing 灵活，但大多数传统的编程语言都可以用这样的解析器进行解析。（C++ 和 Scala 恕我直言不能。）

要改进 Pyparsing 中的错误消息，请使用`-`运算符，它的工作方式与`+`运算符类似，但不会回溯。你会像这样使用它：

```
assignment = Literal("let") - varname - "=" - expression 
```

这是[一篇关于改进错误报告的小文章](https://web.archive.org/web/20160821175151/http://pyparsing.wikispaces.com/share/view/30875955)，由 Pyparsing 的作者撰写。

**编辑**

您还可以为执行验证的解析操作中的无效数字生成良好的错误消息。如果数字无效，则会引发 Pyparsing 未捕获的异常。此异常可以包含一个很好的错误消息。

解析动作可以有三个参数 [1]：

*   s = 被解析的原始字符串（见下面的注释）
*   loc = 匹配子串的位置
*   toks = 匹配标记的列表，打包为`ParseResults`对象

还有三种有用的帮助方法可用于创建良好的错误消息 [2]：

*   `lineno(loc, string)`- 函数给出字符串中位置的行号；第一行是第 1 行，换行符开始新行。
*   `col(loc, string)`- 函数给出字符串中位置的列号；第一列是第 1 列，换行符将列号重置为 1。
*   `line(loc, string)`- 检索表示的文本行的函数`lineno(loc, string)`。在打印出异常的诊断消息时很有用。

您的验证解析操作将如下所示：

```
def validate_odd_number(s, loc, toks):
    value = toks[0]
    value = int(value)
    if value % 2 == 0:
        raise MyFatalParseException(
            "not an odd number. Line {l}, column {c}.".format(l=lineno(loc, s),
                                                              c=col(loc, s))) 
```

[1] [http://pythonhosted.org/pyparsing/pyparsing.pyparsing.ParserElement-class.html#setParseAction](http://pythonhosted.org/pyparsing/pyparsing.pyparsing.ParserElement-class.html#setParseAction)

[2][如何使用Pyparsing](https://web.archive.org/web/20170911072516/http://pyparsing.wikispaces.com:80/HowToUsePyparsing)

**编辑**

这里 [3] 是问题当前 (2013-4-10) 脚本的改进版本。它使示例错误正确，但其他错误指示​​在错误的位置。我相信我的 Pyparsing 版本（'1.5.7'）中存在错误，但也许我只是不明白 Pyparsing 是如何工作的。问题是：

*   ParseFatalException 似乎并不总是致命的。当我使用自己的异常时，脚本按预期工作。
*   `-`操作员似乎不工作。

[3] [http://pastebin.com/7E4kSnkm](http://pastebin.com/7E4kSnkm)

# android - 尝试在 android 中启动新活动时出现 ActivityNotFoundException 错误

> ID：15897095
> 
> 赞同：0
> 
> 时间：2013-04-09T08:36:26.940
> 
> 标签：android, android-activity, manifest

我正在尝试从我的主要活动开始设置电子邮件帐户的活动。它不工作，让我发疯。我所拥有的是：

```
button.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            EditText username = (EditText) findViewById(R.id.editText1);
            EditText password = (EditText) findViewById(R.id.editText2);

            ComponentName cname = new ComponentName("com.android.email",
            "com.android.email.activity.setup.AccountSetupBasics");
            Intent intent = new Intent("android.intent.action.MAIN");
            intent.putExtra("com.android.email.AccountSetupBasics.username", username.getText().toString());
            intent.putExtra("com.android.email.AccountSetupBasics.password", password.getText().toString());
            intent.putExtra("com.android.email.extra.eas_flow", true);
            intent.setComponent(cname);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(intent);
        }
    }); 
```

清单是：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.test.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我总是得到这个错误：

android.content.ActivityNotFoundException：找不到明确的活动类 {com.android.email/com.android.email.activity.setup.AccountSetupBasics}；您是否在 AndroidManifest.xml 中声明了此活动？

我是新手，谁能告诉我如何解决这个错误？

任何回应都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:39:15.150

如果它被导出，您只能开始其他人的活动。检查是否`com.android.email.activity.setup.AccountSetupBasics`。而且你应该总是`try/catch`尽可能`startActivity()`地抛出异常，如果你让它不被捕获，你的应用程序将会崩溃

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:39:23.627

```
button.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            EditText username = (EditText) findViewById(R.id.editText1);
            EditText password = (EditText) findViewById(R.id.editText2);

            ComponentName cname = new ComponentName("com.android.email",
            "com.android.email.activity.setup.AccountSetupBasics");
            Intent intent = new Intent(currentActivity.this, targetActvity.class);
            intent.putExtra("com.android.email.AccountSetupBasics.username", username.getText().toString());
            intent.putExtra("com.android.email.AccountSetupBasics.password", password.getText().toString());
            intent.putExtra("com.android.email.extra.eas_flow", true);
            intent.setComponent(cname);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(intent);
        }
    }); 
```

# .net - 获取网络上的所有 IP 和 MAC 地址

> ID：15897096
> 
> 赞同：0
> 
> 时间：2013-04-09T08:36:27.020
> 
> 标签：.net, vb.net, ip-address, mac-address

嗨，我是 VB 2010 的新手，正在尝试编写简单的 WPF 应用程序，它将检测连接到本地无线网络的所有机器并列出这台机器的 IP 地址和 Mac 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:39:46.987

您无法检测到连接到 LAN 的机器。也许您可以尝试 ping 某个范围内的机器，但不能保证有响应。框架中包含一个 Ping 类 ( [http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.aspx](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ping.aspx) )，但机器可能位于防火墙后面。

请注意，如果您 p​​ing 一个网络范围，一些系统管理员可能会生气。

**编辑**：如果您是系统管理员并且您正在将此任务用于内部使用，也许您可​​以通过 telnet 连接（以编程方式）到路由器并获取信息。

# java - 使用 Apache MINA 进行文件传输 - Java

> ID：15897103
> 
> 赞同：0
> 
> 时间：2013-04-09T08:36:46.233
> 
> 标签：java, ftp, file-transfer, apache-mina

我一直在做一个项目，我必须将文件从本地系统发送到我的 FTP 服务器。为此，我想到了使用 Apache MINA。

是否可以在这种情况下实施 Apache MINA，任何建议或帮助都会很有用。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:41:01.020

我知道[Apache Commons Net](http://commons.apache.org/proper/commons-net/)是一个用于编写 FTP 客户端的便捷高效的库。

他们还提供了一个 FTP 客户端示例：[FTPClientExample.java](http://commons.apache.org/proper/commons-net/examples/ftp/FTPClientExample.java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-27T14:02:26.740

是的，您可以为此目的使用 Apache Mina。查找以下 JAR/参考

```
mina-core-2.0.19.jar - For authentication purpose
slf4j-api-1.7.25.jar - For logging purpose
sshd-common-2.1.0.jar - Common functions dependent jars
sshd-core-2.1.0.jar - Common functions dependent jars
sshd-sftp-2.1.0.jar - For SFTP file transfers and creating 
```

客户端和连接

一些例子：

```
mSshClient = SshClient.setUpDefaultClient();
 mSshClient.start();
 mConnectFuture = mSshClient.connect(mUsername,mServerAddress.getHostAddress(),mServerPort,null);
 mClientSession = mConnectFuture.verify().getSession();
 mSftpClient = new DefaultSftpClient(mClientSession); 
```

# java - Java 1.6.0_27 更新后 Heroku 应用程序在 60 秒内无法启动

> ID：15897104
> 
> 赞同：2
> 
> 时间：2013-04-09T08:37:00.623
> 
> 标签：java, heroku, playframework

当我使用 1.6.0_20 回滚到以前的版本时，我的应用程序会在 60 秒内启动。鉴于以下事实，我该如何调试和解决问题？

*   我的应用程序正在使用 Play 1.2.5
*   在日志中，我看到应用程序连接到 PostgreSQL 数据库。这通常是 R10 错误之前的最后一个日志。

**--UPDATE** 我创建了一个插件并发出了一个假端口绑定，它将在 10 秒后关闭。这解决了绑定问题，但现在我遇到了内存问题。在高负载下可能应用程序正在使用 600M 的内存。但现在我看到~1500M，而且还在不断增加。

```
@Override
public void onConfigurationRead() {
    final int port = Integer.parseInt(Play.configuration.getProperty("http.port"));

    try {
        // Create a new server socket and set to non blocking mode
        final ServerSocketChannel ssc = ServerSocketChannel.open();
        ssc.configureBlocking(false);
        InetSocketAddress isa = new InetSocketAddress(port);
        ssc.socket().bind(isa);
        Logger.info("Fake bind to port %d", port);

        Timer timer = new Timer();
        timer.schedule(new TimerTask() {
            @Override
            public void run() {
                try {
                    ssc.socket().close();
                    Logger.info("Fake port closed");
                } catch (IOException ioe) {
                    Logger.error(ioe, "Cannot close fake port");
                }
            }
        }, 10000);
    } catch (IOException ioe) {
        Logger.error(ioe, "Cannot open fake port");
    }

    Cache.forcedCacheImpl = RedisCacheImpl.getInstance();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T07:20:45.907

我已切换到 jdk 7。我的应用程序现在可以在 40 秒内启动并使用 500-600MB 内存。我已经将这个问题告知 Heroku，但他们并不在意。

# sql - 将连接重写为 ANSI 语法

> ID：15897106
> 
> 赞同：3
> 
> 时间：2013-04-09T08:37:05.990
> 
> 标签：sql, oracle, join

```
select ... fields
from table a, b
where ... conditions
and a.timeload between b.timestop(+) and b.timego(+) 
```

我确实了解运算符**之间的**工作原理，并且我知道这里的**+**运算符代表**左连接**。如何使用 ANSI 连接标准重写它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T08:39:53.387

使用`LEFT OUTER JOIN`而不是`+`运算符。

对于您的查询，它是`a LEFT OUTER JOIN b`：

```
select ... fields
from table a
LEFT OUTER JOIN b ON a.timeload between b.timestop and b.timego
where ... conditions 
```

# css - 如何使用 CSS 填充和文本缩进将输入按钮拉伸到可用宽度并使其文本居中？

> ID：15897108
> 
> 赞同：0
> 
> 时间：2013-04-09T08:37:08.773
> 
> 标签：css, input, padding, text-alignment

我有一个固定宽度为 20px 的输入按钮，使用`box-sizing: content-box`.

```
<input data-role="none" type="button" class="icon_text" value="click me" /> 
```

按钮的宽度仅使用填充设置。

例子：

```
.icon_text {
    border: 1px solid #aaa;
    border-radius: .7em;
    -moz-border-radius: .7em;
    -webkit-border-radius: .7em;
    color: white !important;
    font-size: 16px;
    font-weight: 800;
    cursor: pointer;
    background-color: #7EB238;
    background-image: url("p.png");
    background-image: url("p.png"), -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(rgba(52,109,28,1)), color-stop(rgba(52,109,28,0) )), -webkit-gradient(linear, left top, left bottom, from( #9ad945 ), to( #7eb238 )); 
    background-image: url("p.png"), -webkit-radial-gradient(center, ellipse cover,  rgba(52,109,28,1), rgba(52,109,28,0) ), -webkit-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("p.png"), -moz-radial-gradient(center, ellipse cover, rgba(52,109,28,1), rgba(52,109,28,0) ), -moz-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("p.png"), -ms-radial-gradient(center, ellipse cover, rgba(52,109,28,1), rgba(52,109,28,0) ), -ms-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("p.png"), -o-radial-gradient(center, ellipse cover, rgba(52,109,28,1), rgba(52,109,28,0) ), -o-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("p.png"), radial-gradient(ellipse at center, rgba(52,109,28,1) 67%, rgba(52,109,28,0) 69%), linear-gradient( #9ad945, #7eb238 );
    background-attachment: scroll, scroll, scroll;
    background-repeat: no-repeat, no-repeat, no-repeat;
    background-position: -100px 50%, 7px 50%, center center;
    background-size: 864px 18px, 20px 20px, auto auto;
    -webkit-background-size: 864px 18px, 20px 20px, auto auto;
    background-clip: content-box, content-box, padding-box;
    -webkit-box-sizing: content-box; 
    -moz-box-sizing: content-box;   
    box-sizing: content-box;
    text-indent: 2.1em;
    padding-top: 6px;
    padding-bottom:7px;
    padding-left: 7px;
    padding-right:92px;
    width: 20px;
    height: 20px; 
```

}

虽然这很好用，但我需要能够生成带有居中文本的按钮的全屏。我可以或多或少地将按钮设置为`padding-right`，`96%`但我不知道如何使文本居中，因为`text-indent`不采用百分比值。

问题：
只有在按钮宽度固定、按钮长度使用填充设置的情况下，是否可以通过 CSS 拉伸按钮并将其文本居中？只是好奇是否有人有想法，如何做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:41:08.770

使用固定宽度时无法实现这一点。如果您愿意调整宽度，则以下样式将起作用。重要的部分是`display:block`, `width:100%`, `text-align:center`。

```
.icon_text {
    border: 1px solid #aaa;
    border-radius: .7em;
    -moz-border-radius: .7em;
    -webkit-border-radius: .7em;
    color: white !important;
    font-size: 16px;
    font-weight: 800;
    cursor: pointer;
    background-color: #7EB238;
    background-image: url("p.png");
    background-image: url("p.png"), -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(rgba(52,109,28,1)), color-stop(rgba(52,109,28,0) )), -webkit-gradient(linear, left top, left bottom, from( #9ad945 ), to( #7eb238 )); 
    background-image: url("p.png"), -webkit-radial-gradient(center, ellipse cover,  rgba(52,109,28,1), rgba(52,109,28,0) ), -webkit-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("p.png"), -moz-radial-gradient(center, ellipse cover, rgba(52,109,28,1), rgba(52,109,28,0) ), -moz-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("p.png"), -ms-radial-gradient(center, ellipse cover, rgba(52,109,28,1), rgba(52,109,28,0) ), -ms-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("p.png"), -o-radial-gradient(center, ellipse cover, rgba(52,109,28,1), rgba(52,109,28,0) ), -o-linear-gradient( #9ad945, #7eb238 ); 
    background-image: url("p.png"), radial-gradient(ellipse at center, rgba(52,109,28,1) 67%, rgba(52,109,28,0) 69%), linear-gradient( #9ad945, #7eb238 );
    background-attachment: scroll, scroll, scroll;
    background-repeat: no-repeat, no-repeat, no-repeat;
    background-position: -100px 50%, 7px 50%, center center;
    background-size: 864px 18px, 20px 20px, auto auto;
    -webkit-background-size: 864px 18px, 20px 20px, auto auto;
    background-clip: content-box, content-box, padding-box;
    -webkit-box-sizing: content-box; 
    -moz-box-sizing: content-box;   
    box-sizing: content-box;
    text-indent: 2.1em;
    padding-top: 6px;
    padding-bottom:7px;
    padding-left: 7px;
    padding-right:92px;
    height: 20px;
    display: block;
    width: 100%;
    text-align: center;
} 
```

**工作示例：http:** [//jsfiddle.net/3bCB2/](http://jsfiddle.net/3bCB2/)

# ios - 将照片上传到 Facebook 并保留链接 按 AppName 上传

> ID：15897111
> 
> 赞同：1
> 
> 时间：2013-04-09T08:37:12.677
> 
> 标签：ios, facebook, upload

我使用以下代码将照片发布到墙上

```
 [FBRequestConnection startForUploadPhoto:img
                               completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

                               }]; 
```

它工作正常。在 iOS 5.1 中有指向 iTunes 下载我的应用程序的照片下的链接。我喜欢。

但在 iOS 6.1 中有指向 iOS 的链接。它告诉iOS上传。

如何将其替换为 iOS 5.1 中的应用名称或添加另一个链接到我的应用？

我使用 FB iOS SDK 3.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:09:10.123

你可以使用 opengraph 来做到这一点。实施起来需要相当多的工作，但它确实为您提供了一个更加突出的链接和许多其他选项。

我联系了 facebook 上的某个人，询问他们对此的建议，他们给我发了这些链接。

[https://developers.facebook.com/docs/opengraph/usergeneratedphotos/](https://developers.facebook.com/docs/opengraph/usergeneratedphotos/)

[https://developers.facebook.com/docs/concepts/opengraph/overview/](https://developers.facebook.com/docs/concepts/opengraph/overview/)

[https://developers.facebook.com/docs/technical-guides/opengraph/creating-open-graph-stories/](https://developers.facebook.com/docs/technical-guides/opengraph/creating-open-graph-stories/)

# extjs - animate() 函数在带有 IE 8 的 EXTJS4 中无法正常工作

> ID：15897113
> 
> 赞同：1
> 
> 时间：2013-04-09T08:37:20.163
> 
> 标签：extjs, internet-explorer-8, extjs4, jquery-animate

我在我的项目中使用带有 IE 8 的 EXTJS 4。我为一系列小圆圈创建了一个动画。每隔 1 秒，一个圆圈消失，另一个圆圈消失。

代码 ：-

```
me.startAnimation=function(circles,color,direction,startIndex,initIndex)
       { 
           try
           {
               circles.items[startIndex].animate({
                duration: 0,
                to: {      
                    fill:'#fff'
                }              

            }).animate({
                delay: 1000,                    
                to: {    

                    fill:color
                },
                listeners: {

                    afteranimate: function() {

                        // Execute my custom method after the animation

                        if(direction==='direct')
                            startIndex++;
                        else
                            startIndex--;
                        if(startIndex===circles.length || startIndex<0)                       
                            startIndex=initIndex;      
                        this.startAnimation(circles,color,direction,startIndex,initIndex);
                    },
                    scope: this
                }
            });
        }
        catch(e)
        {                
            return;
        }

    } 
```

![在此处输入图像描述](https://i.stack.imgur.com/qx3qg.jpg) 所以这个动画在 Chrome 和 Firefox 中运行良好，但在 IE 8 中产生了问题。如上图所示，在 IE 8 中，圆圈并未完全消失。那么，三个（IE 8、EXTJS 4、ANIMATE FUNCTION）的问题出在哪里......？

# caching - 何时使用 Azure 缓存本地缓存

> ID：15897125
> 
> 赞同：1
> 
> 时间：2013-04-09T08:37:42.587
> 
> 标签：caching, azure, distributed-caching

我想开始使用 Azure 分布式缓存并遇到了 LocalCache 的概念。但它可能与分布式缓存不同步的事实让我想知道，我为什么要使用它以及如何安全地使用它。

*启用后，从缓存集群检索的项目本地存储在客户端计算机的内存中。这提高了后续 get 请求的性能，但可能导致本地缓存版本与缓存集群中的实际项目之间的数据不一致。*

调用 DataCache.GetIfNewer 是确保获得最新版本的一种选择，但这要求我仍然调用分布式缓存，传入我要检查的对象，以查看两个版本是否不同。

我可以使用通知使 LocalCache 对象无效，但这是在轮询的基础上完成的，这为在轮询期间发生更新提供了机会，从而使我得到过时的数据。

那么，我为什么要使用 LocalCache，如果有理由这样做，我如何安全地使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T10:36:00.710

> “计算机科学中只有两件困难的事情：缓存失效和命名事情”——Phil Karlton

当 a) 性能很关键 b) 您不关心检索到的对象可能是陈旧的时，您将使用 LocalCache。

在许多情况下，对象永远不会过时（例如公共/银行假日列表），或者当您不太担心 100% 是最新的（例如，如果项目有 > 1000 个单位库存，使用本地缓存，否则从数据库重新获取）。

不要尝试使本地缓存无效。如果您需要更多最新的对象，请从集群中获取它们。如果您不能容忍不同步的数据，请从数据库中获取。缓存始终是一种性能不一致的妥协——LocalCache 比服务器缓存更多，但服务器缓存仍然是一种妥协。

# jquery - 缩略图在 Jquery 中不显示正确的图像

> ID：15897129
> 
> 赞同：0
> 
> 时间：2013-04-09T08:37:55.933
> 
> 标签：jquery, image, gallery, thumbnails

我在为网站创建照片库时遇到问题。图库的每个缩略图都显示第一个缩略图的图像。我使用的代码：

```
 $(".thumb").click(function() {
    $(".image").fadeOut(500, function() {
        $(".image").attr("src",$(".thumb").attr("href"));
    }).fadeIn(500);
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:40:41.880

因为您使用`$(".thumb").attr("href")`which 将返回匹配该选择器的第一个元素的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:45:11.987

您正在 javascript 中选择第一张图片和缩略图。用作`$(this)`对选定元素的引用，如下所示...

```
$(".thumb").click(function() {
    var $thumb = $(this);
    $(".image").fadeOut(500, function() {
        $(this).attr("src",$thumb.attr("href"));
    }).fadeIn(500);
    return false;
}); 
```

`$thumb`是被点击的元素，而`$(this)`在fadeOut 回调中是被选中的图像元素。我怀疑类只有 1 个`image`，但这是使用`$(this)`.

# sql - 如何覆盖现有值？

> ID：15897132
> 
> 赞同：0
> 
> 时间：2013-04-09T08:37:59.147
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有以下情况

表格1

```
PricelistID  ValidTo    Currency Markup
1            2013-12-31 USD      1.2
2            2013-12-31 USD      1.25  
3            2013-12-31 USD      1.3
4            2013-12-31 USD      1.1 
```

表2

```
PricelistID PeriodID Price
1           1        10.00
1           2        20.00
2           3        15.00
3           4        50.00
4           5        30.00 
```

现在我有一种情况，我需要添加新的价格表，其值（2013-12-31，USD，1.5）（仅在表 1 中）将继承表 2 中 pricelistID 4 的值，我该怎么做？

查询应该返回

```
PricelistiD ValidTo    Currency Markup PeriodID Price
5           2013-12-31 USD      1.5    5        30.00 
```

# c# - Decimal.Parse 和不正确的字符串格式错误

> ID：15897134
> 
> 赞同：17
> 
> 时间：2013-04-09T08:37:59.650
> 
> 标签：c#, .net, decimal

我有一个小数解析的简单问题。以下代码在我的计算机上运行良好，但是当我在服务器（VPS、Windows Server 2008 R2 标准版）上发布项目时，我收到错误“输入字符串格式不正确”。有什么想法有什么问题吗？

我将该解析后的数字存储在 MySQL DB 表中 - 列类型是`DECIMAL(10, 4)`

**源代码：**

```
CultureInfo nonInvariantCulture = new CultureInfo("en-AU"); //or pl-PL
nonInvariantCulture.NumberFormat.NumberDecimalSeparator = ".";
Thread.CurrentThread.CurrentCulture = nonInvariantCulture;
string toConvert = ("3,4589").Replace(",", "."); //it's an example
decimal parsed = decimal.Parse(toConvert); 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-09T08:47:12.320

如果您知道数字的字符串表示形式使用逗号作为小数分隔符，则可以使用自定义解析该值`NumberFormatInfo`：

```
var number = "3,4589";
var numberFormatInfo = new NumberFormatInfo { NumberDecimalSeparator = "," };
var value = Decimal.Parse(number, numberFormatInfo); 
```

您也可以将现有`CultureInfo`的文化用于您知道会起作用的文化，`pl-PL`但我认为这更容易理解。

另一方面，如果数字的格式是`3.4589`您可以简单地使用`CultureInfo.InvariantCulture`它，您可以考虑一种基于以下的“默认”文化`en-US`：

```
var number = "3.4589";
var value = Decimal.Parse(number, CultureInfo.InvariantCulture); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T08:48:10.933

您可以构建一个自定义`NumberFormatInfo`来解析您的值

这些线上的东西

```
NumberFormatInfo numinf = new NumberFormatInfo();
numinf.NumberDecimalSeparator= ",";    
decimal.Parse("3,4589", numinf); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-09T08:55:28.967

我猜想通过以下代码解决问题。

```
decimal parsed = decimal.Parse(toConvert, CultureInfo.InvariantCulture); 
```

# java - Java中镜像二叉树和阻塞队列之间的任何连接

> ID：15897135
> 
> 赞同：0
> 
> 时间：2013-04-09T08:38:06.707
> 
> 标签：java, multithreading, recursion, concurrency, tree

我相信在 Java 中镜像二叉树是直截了当的，例如：

```
 http://stackoverflow.com/questions/4366251/mirror-image-of-a-binary-tree 
```

但是，我遇到了一个面试问题，该问题与 Java 中的多线程有关，即阻塞队列（java.util.concurrent）

据我所知，我没有看到这两个概念之间有明显的联系，有人能给我暗示我可能遗漏了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:08:58.703

## 一般来说

树镜像的递归结构揭示了解决方案。首先给定根节点，我们在主线程上交换左孩子和右孩子。现在我们在左侧节点上应用镜像，在右侧节点上应用镜像。但是镜像左节点独立于镜像右节点，所以我们可以在不同的线程上进行。

保持以下规则以避免线程过多。当前线程交换它当前正在操作的节点的左右子节点。然后它将新左子节点的镜像委托给一个新线程，并继续处理右节点的镜像。

请注意，对于我们遇到的每个节点，我们都在生成一个新线程。因此，如果树不平衡并且只有左子节点，我们会生成 O(n) 个线程，其中 n 是树中的节点数。但是，我们可以维护一个线程池，这样一旦任何线程到达叶节点，它就会返回到池中。如果树是平衡的，每个线程都会在 O(log n) 步骤中终止，所以我们有 O(n / log n) 个线程的顺序（我认为？）。

## 使用阻塞队列

你可以结合这个线程池的想法来使用阻塞队列，通过将交换后的左右节点放入队列中，然后工作人员可以将它们取出并处理它们，然后返回该子节点的新左右子节点回到队列中等待另一个线程处理。一旦一个叶子节点被命中，就没有左右孩子了，所以队列中没有任何东西。当Queue为空时，镜像完成。

# android - 滑动屏幕时改变活动

> ID：15897136
> 
> 赞同：1
> 
> 时间：2013-04-09T08:38:07.130
> 
> 标签：android

我的应用程序中有三个活动。

第一个是默认活动，当我从右向左滑动时第二个活动应该打开它的布局，当我从左向右滑动第三个应该打开它的布局我想改变滑动时的活动，不仅是背景或布局..给我适当的方式来做到这一点。

我正在使用此选项卡视图，但这没有提供任何滑块功能

```
public class TabDemo extends TabActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_host);

        TabHost tabHost=getTabHost();
        // no need to call TabHost.Setup()        

        //First Tab
        TabSpec spec1=tabHost.newTabSpec("activity 1");
        spec1.setIndicator("activity 1");
        Intent in1=new Intent(this, activity 1);
        spec1.setContent(in1);

        TabSpec spec2=tabHost.newTabSpec("activity 2");
        spec2.setIndicator("activity 2");
        Intent in2=new Intent(this,activity 2);
        spec2.setContent(in2);
        Toast toast = Toast.makeText(getApplicationContext(), "Welcome in Resident center",Toast.LENGTH_SHORT);
        toast.show();

        TabSpec spec3=tabHost.newTabSpec("activity 3");
        spec3.setIndicator("activity 3");
        Intent in3=new Intent(this,activity 3);
        spec3.setContent(in3);

        tabHost.addTab(spec1);
        tabHost.addTab(spec2);
        tabHost.addTab(spec3);
        tabHost.setCurrentTab(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:20:12.793

在我看来，创建具有滑动功能的应用程序的最简单方法是通过 Eclipse 向导创建一个新的 Android 应用程序，并选择以下选项：

1.  创建`Activity`-> 空白活动
2.  导航类型 = 选项卡 + 滑动

这将创建一个包含（我认为）3 个页面的应用程序，您可以在其中滑动浏览。现在您可以检查创建的文件/代码并更改您想要/需要的任何内容。

正如您对答案的评论中所提到的，这是不可能的`Activites`，您需要使用`Fragments`!

# css - 使用 BOXY JQuery 插件

> ID：15897137
> 
> 赞同：-1
> 
> 时间：2013-04-09T08:38:07.873
> 
> 标签：css, ruby, jquery

我正在为我的一些页面使用以下四四方方的插件。[BOXY 插件](http://onehackoranother.com/projects/jquery/boxy/)

我想为每个页面设置不同样式的方形弹出框的外框。问题是我注意到 boxy.js 文件中的硬编码 html 和 css 类。有人可以帮助我并指出正确的方向吗？我想使用相同的方形插件在每个页面上使用不同的样式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:43:27.210

在以下情况下，您可以轻松覆盖 CSS 属性：

*   它有一个更具体的选择器（例如`img.myClass`beats `.myClass`）
*   在后面的代码中定义
*   您`!important`在属性中使用

尽管该`!important`功能经常被误用，导致许多开发人员不喜欢它，但如果使用正确，它实际上非常有用。例如，当您想覆盖第 3 方 CSS 时；）

```
.myClass {
    color: red;
}

.myClass {
    color: blue !important; /* overwrites the red color */
} 
```

# c++ - qDatastream 中的 Qt 二进制读取错误

> ID：15897146
> 
> 赞同：4
> 
> 时间：2013-04-09T08:38:39.320
> 
> 标签：c++, qt, binary, precision

我正在读取由传感器生成的二进制文件。我在读取具有不同精度（32 或 64）的浮点数时遇到问题。我可以在 MATLAB（64 位版本）中读取它们，但 Qt（Windows 上的 32 位版本）给出了错误的值。我可以阅读直到`dtmth`（请参考下面的结构）。在它之后，我得到`Inf`了`baseline`. 这个值`0`实际上是。如您所见，我更改了 MSB (LittleEndian)。如果我保留 BigEndian，我会得到`0`基线，但其他值是错误的。我的桌面是64位的。

我检查了字节数，它们是正确的。我认为问题在于机器精度。

```
QDataStream in(&file);

           in.setByteOrder(QDataStream::LittleEndian);
           params p;

           in >> p.filetype;               
           in >> p.projectid;
           in >> p.datamin;               
           in >> p.dtyear;
           in >> p.dtmth;              
           in >> p.baseline;
           in >> p.startfrequ; 
```

其中 p 是一个定义为的结构：

```
 struct params
    {
        quint8 filetype;   
        quint16 projectid;
        double datamin;
        quint16 dtyear;
        quint8 dtmth;    
        float baseline;
        double startfrequ;

    }; 
```

我可以在 MATLAB 中阅读它们。我的 matlab 是 64 位版本，我在其中读取数据类型如下：

```
MATLAB:
        uint8 filetype;   
        uint16 projectid;
        float64 datamin;
        uint16 dtyear;
        uint8 dtmth;    
        float32 baseline;
        float64 startfrequ; 
```

如果我错过了任何细节，请告诉我。

编辑：

读取文件：

```
 QString fileName = QFileDialog::getOpenFileName(this, tr("Open File"), QString(),
               tr("Raw Files (*.msr);;All files (*.*)"));

           if (!fileName.isEmpty()) {
               qDebug("Attempting to open file..");
               QFile file(fileName);
               if (!file.open(QIODevice::ReadOnly)) {
                   QMessageBox::critical(this, tr("Error"), tr("Could not open file"));
                   return;
               }

               QDataStream in(&file); 
```

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:50:56.007

您使用的是哪个版本的 Qt？如果版本优于 Qt 4.6，则默认精度为 64 位，[这意味着 Qt 将尝试将您的 float 32 读取为 float 64](http://qt-project.org/doc/qt-4.8/qdatastream.html#setFloatingPointPrecision)。您需要手动设置精度`in.setFloatingPointPrecision ( QDataStream::SinglePrecision);`

```
 in >> p.filetype;               
       in >> p.projectid;
       in >> p.datamin;               
       in >> p.dtyear;
       in >> p.dtmth;    
       in.setFloatingPointPrecision(QDataStream::SinglePrecision);
       in >> p.baseline;
       in.setFloatingPointPrecision(QDataStream::DoublePrecision);
       in >> p.startfrequ; 
```

从您的评论看来，这就是问题所在。实际上，如果您设置为单精度，并尝试读取`p.datamin`或`p.startfrequ`（64 位），那么数据流会将它们读取为 32 位浮点数。不仅 `p.datamin`会不正确，而且之后的所有值都会不正确。

首先，检查我的建议是否在最后一行之后使用

```
 if(in.status() == QDataStream::ReadCorruptData){
            qDebug() << "still doesnt work";
      } 
```

# servicestack - ServiceStack：如何让 InMemoryTransientMessageService 在后台运行

> ID：15897147
> 
> 赞同：4
> 
> 时间：2013-04-09T08:38:43.730
> 
> 标签：servicestack

需要做什么才能让 InMemoryTransientMessageService 在后台线程中运行？我使用在服务中发布内容

```
 base.MessageProducer.Publish(new RequestDto()); 
```

并且它们在服务请求中立即执行。

该项目是自托管的。

这是一个快速单元测试，显示当前请求的阻塞而不是将其推迟到后台：

*   [https://gist.github.com/lmcnearney/5407097](https://gist.github.com/lmcnearney/5407097)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-16T05:50:28.273

没有什么是开箱即用的。你必须建立你自己的。看一下`ServiceStack.Redis.Messaging.RedisMqHost`- 你需要的大部分东西都在那里，与`ServiceStack.Redis.Messaging.RedisMqServer`（一个线程用于队列侦听，一个线程用于每个工作人员）相比，它可能更简单（一个线程完成所有工作）。我建议您参加该课程并根据您的需要进行调整。

几点建议：

*   `ServiceStack.Message.InMemoryMessageQueueClient`没有实现`WaitForNotifyOnAny()`，因此您需要另一种方法来让后台线程等待传入消息。
*   密切相关的是，ServiceStack.Redis 实现使用主题订阅，在此类中用于传输`WorkerStatus.StopCommand`，这意味着您必须找到另一种让后台线程停止的方法。
*   最后，您可能希望适应`ServiceStack.Redis.Messaging.RedisMessageProducer`它的`Publish()`方法将请求的消息推送到队列并将通道/队列名称推送到 TopicIn 队列。阅读代码后，您可以看到这三个点是如何联系在一起的。

希望这可以帮助...

# python - 通过 HTTP 通过 base64 编码发送文件的最佳方式是什么

> ID：15897155
> 
> 赞同：0
> 
> 时间：2013-04-09T08:38:57.140
> 
> 标签：python, django, http, rest, base64

在 python 中有一个很好的库'base64'，使用这个模块可以根据文件名和内容对文件进行编码/解码。我正在开发一个具有上传文件功能的 API。我设法编写了一些代码来编码和解码这些文件，但是通过 HTTP 请求发送这个编码的 base64 消息的正确方法是什么？

*   通过 POST 并将文件名和编码消息放入 post 参数？
*   在标题里面？

欢迎任何想法，如果可能的话显示一个小的http请求你应该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:29:39.323

我最近不得不这样做，因为[django-tastypie](http://django-tastypie.readthedocs.org/en/latest/)不支持[multipart/form-data](https://www.rfc-editor.org/rfc/rfc2388)。[klipstein](https://stackoverflow.com/users/1794177/klipstein)创建了[Base64FileField](https://gist.github.com/klipstein/709890)以通过使用文件的 base64 编码来支持文件上传。

下面是一个基于 Base64FileField 的示例：

```
#models.py
from django.db import models

class Person(models.Model):
    name = models.CharField("name", max_length=40)
    avatar = models.ImageField("avatar", upload_to="uploads/person_avatars")

    def __unicode__(self):
        return self.name

#views.py
import json
import base64
import sys
from django.core.files.uploadedfile import SimpleUploadedFile
from django.http import HttpResponse, HttpResponseBadRequest
from django.views.decorators.csrf import csrf_exempt

from .models import Person

MAX_SIZE = 10*1024*1024 #10MB

@csrf_exempt
def save_person(request):
    if (request.method == "POST" and request.META.get("CONTENT_TYPE")
        == "application/json"):
        data = json.loads(request.raw_post_data)
        avatar = data.get("avatar")
        file = base64.b64decode(avatar["file"])
        if sys.getsizeof(file) > MAX_SIZE:
            response = {"error": {
                "code": "invalid_request",
                "message": "Max file size exceeded."
                }}
            return HttpResponseBadRequest(json.dumps(response),
                mimetype="application/json")

        person = Person(name=data.get("name"), avatar=SimpleUploadedFile(
            avatar["name"],
            file,
            getattr(avatar, "content_type", "application/octet-stream")))
        person.save()

        response = {"id": person.id, "name": person.name,
            "avatar": person.avatar.url}
        return HttpResponse(json.dumps(response), mimetype="application/json")

    response = {"error": {
        "code": "invalid_request",
        "message": "Method Not Allowed."
        }}
    return HttpResponseBadRequest(json.dumps(response),
        mimetype="application/json") 
```

这是要为上述视图发布的示例 JSON 正文

```
{
    "name": "Test User",
    "avatar": {
        "name": "myfile.png",
        "file": "a long base64 encoded string ",
        "content_type": "image/png"
    }
} 
```

示例响应是：

```
{
    "id": 1,
    "avatar": "/media/uploads/person_avatars/myfile.png",
    "name": "Test User"
} 
```

> 什么是最好的方法？

不确定这是否是最好的方法，但是，它简单明了。

# php - 文件上传到wordpress中的文件夹

> ID：15897156
> 
> 赞同：1
> 
> 时间：2013-04-09T08:38:59.060
> 
> 标签：php, wordpress, file-upload

我使用以下编写的代码将文件移动到名为“training”的文件夹中。

```
 <td>
   <input type="file" name="training_image" accept="image/*" id="traing-image"value="<?php echo esc_attr( get_the_author_meta( 'training_image', $user->ID ) ); ?>" class="regular-text" />
  </td> 
```

为了保存图像，我写了这个

```
$training_path = time().'_'.$_FILES['training_image']['name'];
$tmp_file_name = $_FILES['training_image']['tmp_name'];
$upload_dir = wp_upload_dir();
if($training_path){
       move_uploaded_file($tmp_file_name,$upload_dir['baseurl'].'/training/'.$training_path);
}
update_user_meta( $user_id, 'training-image', $training_path ); 
```

但我无法得到任何结果。我有没有做错什么。请帮我。

这是我的全部代码

```
function training_user_profile_fields( $user ) { ?>
<h3><?php// _e("Extra profile information", "blank"); ?></h3>

<table class="form-table">
  <tr>
    <th><label for="traing-image"><?php _e("Upload Your Training Certificate:"); ?></label></th>
      <td>
       <input type="file" name="training_image" id="traing-image"value="<?php echo esc_attr( get_the_author_meta( 'training_image', $user->ID ) ); ?>" class="regular-text" />
      </td>
    </tr>
</table>
<?php }

add_action( 'personal_options_update', 'save_extra_user_profile_fields' );
add_action( 'edit_user_profile_update', 'save_extra_user_profile_fields' );

function save_extra_user_profile_fields( $user_id ) {

if ( !current_user_can( 'edit_user', $user_id ) ) { return false; }
$training_path = time().'_'.$_FILES['training_image']['name'];
$tmp_file_name = $_FILES['training_image']['tmp_name'];
echo "filename".$_FILES['training_image']['tmp_name']; exit;
$upload_dir = wp_upload_dir();
if($training_path){
       move_uploaded_file($tmp_file_name,$upload_dir['baseurl'].'/training/'.$training_path);
}
update_user_meta( $user_id, 'training-image', $training_path );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:51:16.807

你这样做是不对的。`$upload_dir['baseurl']`给`URL`上传目录而不是`absolute path`给目录。您不能使用 URL 上传或移动文件。

`HTTP wrapper does not support writeable connections`

所以`$upload_dir['baseurl']`应该改为$upload_dir['basedir']。

它应该是

```
$training_path = time().'_'.$_FILES['training_image']['name'];
$tmp_file_name = $_FILES['training_image']['tmp_name'];
$upload_dir = wp_upload_dir();
if($training_path){
       move_uploaded_file($tmp_file_name,$upload_dir['basedir'].'/training/'.$training_path);
}
update_user_meta( $user_id, 'training-image', $training_path ); 
```

还要确保您的表单`enctype`设置为`multipart/form-data` `(enctype="multipart/form-data")`

**更新**

WordPress 个人资料表单默认没有`enctype`属性。您可以使用钩子添加它。将此添加到您的主题中`functions.php`

```
add_action('user_edit_form_tag', 'add_enctype');

function add_form_enctype () {
    echo  'enctype="multipart/form-data"';
} 
```

希望这可以帮助

# android - Android：在 Eclipse 的图形布局中打开滑动抽屉？

> ID：15897165
> 
> 赞同：3
> 
> 时间：2013-04-09T08:39:44.987
> 
> 标签：android, eclipse, android-layout, android-xml

`SlidingDrawer`在 Eclipse 图形布局预览中查看时是否可以打开？默认情况下，它在查看时是关闭的，所以我看不到`SlidingDrawer`.

如果这是不可能的，那么处理这个问题的最佳方法是什么？我猜是一个单独的布局文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:50:05.317

我不确定是否有标准的方法来做到这一点。

我目前使用以下方法：覆盖 SlidingDrawer.onFinishInflate() 以在 Eclipse 布局预览中强制打开它。

导入 android.widget.SlidingDrawer；

```
public class MySlidingDrawer extends SlidingDrawer {

    public MySlidingDrawer(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    public MySlidingDrawer(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
        if (isInEditMode()) {
            open();
        }
    }
} 
```

然后，当然，在 layout.xml 中用 my.package.MySlidingDrawer 替换 SlidingDrawer。

# php - 来自最新帖子的 PHP 排序列表

> ID：15897167
> 
> 赞同：0
> 
> 时间：2013-04-09T08:39:49.397
> 
> 标签：php, mysql

我的表中有 3 个部分，第一个是“ID”，第二个是“主题”，最后是“发布日期”。我有这个问题，我不能让新主题成为最重要的。它只是在列表的最后一个。现在，我怎样才能让我发布的最新主题出现在我的列表中？

我的代码：

```
$query = mysql_query("SELECT * FROM PythoN_Blog")or die(mysql_error());
echo "<table border='0' width='700'>"; 
while($result = mysql_fetch_array($query))
{
    echo "<tr>";
    echo "<td  align='center' style='padding-left:30;'>".$result['id']."</td>";
    echo "<td  align='center' style='padding-left:10;'><a href='#'>".$result['topic']."</a></td>";
    echo "<td  align='center'>".$result['date']."</td>";
    echo "</tr>";   
}
echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T08:41:15.910

将您的查询更改为此

```
"SELECT * FROM PythoN_Blog order by DATE_POSTED DESC"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:52:42.857

如果您的 DATE_POSTED 列不是日期时间格式（例如 varchar），那么您必须对其进行转换：

```
"SELECT * FROM PythoN_Blog ORDER BY CONVERT(DateTime, DATE_POSTED,103)  DESC" 
```

如果您的 DATE_POSTED 列是日期时间格式，则：

```
"SELECT * FROM PythoN_Blog ORDER BY 'DATE_POSTED' DESC"; 
```

# android - 在android数据文件夹中复制数据库

> ID：15897168
> 
> 赞同：-1
> 
> 时间：2013-04-09T08:39:50.033
> 
> 标签：android

**我正在使用此代码将我的 sqlite 数据库从资产复制到 android 中的数据。**

```
private static String DB_PATH= "/data/data/com.project.writing/databases/";
private static String DB_NAME = "Fonts.sqlite";
private SQLiteDatabase schoolDataBase;

    /**
    * Creates a empty database on the system and rewrites it with your own database.
    * */
    public void createDataBase() throws IOException{
        boolean dbExist = checkDataBase();
        if(dbExist){
            //do nothing - database already exist
        }else{

            //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();
            try {
                copyDataBase();
            } catch (IOException e) {
                throw new Error("Error copying database");
            }
        }
    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
    */
    private boolean checkDataBase(){
        SQLiteDatabase checkDB = null;
        try{
            String myPath = DB_PATH + DB_NAME;

            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
        }catch(SQLiteException e){
            //database does't exist yet.
            System.out.println("data base does not exist"+e);
        }
        if(checkDB != null){
            checkDB.close();
        }
        return checkDB != null ? true : false;
    }
    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * 
     * */

    private void copyDataBase() throws IOException{
        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);
        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;
        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);
        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }
        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

        //Toast.makeText(myContext, "Copy Done", 300).show();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:48:30.937

不要重新发明轮子。有一个很好的包可以在两行代码中完成你想要的：[https ://github.com/jgilfelt/android-sqlite-asset-helper](https://github.com/jgilfelt/android-sqlite-asset-helper)

# listview - 滚动时移动列表视图过滤器始终可见

> ID：15897169
> 
> 赞同：0
> 
> 时间：2013-04-09T08:39:50.247
> 
> 标签：listview, mobile, user-interface, filter, kendo-ui

使用 KENDO UI MOBILE 当我向下滚动内容时，如何让过滤框始终可见？

```
 function mobileListViewEndlessScrolling() {
            var dataSource = new kendo.data.DataSource({
                pageSize: 40,
                serverPaging: true,
                serverFiltering: true,
                transport: {
                    read: {
                        url: "http://search.twitter.com/search.json?rpp=1&page=1&q=koi", // the remove service url
                        dataType: "jsonp" // JSONP (JSON with padding) is required for cross-domain AJAX

                    },
                    parameterMap: function(options) {
                        var filter = options.filter ? options.filter.filters[0].value : "";
                        var parameters = {
                            q: filter, //additional parameters sent to the remote service
                            rpp: options.pageSize,
                            page: options.page //next page
                        }

                        return parameters;
                    }
                    //http://localhost:50833/Service1.svc/GetLocalita.json?q=&rpp=10&page=1
                },
                schema: { // describe the result format
                    data: "results" // the data which the data source will be bound to is in the "results" field
                }
            });

            $("#endless-scrolling").kendoMobileListView({
                dataSource: dataSource,
                template: $("#endless-scrolling-template").text(),
                filterable: true,
                endlessScroll: true,
                scrollTreshold: 30 //treshold in pixels
            });
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-06T09:49:42.790

这是剑道给出的解决方案:)祝你好运！

[http://dojo.telerik.com/afosu](http://dojo.telerik.com/afosu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:15:48.160

我也试图实现相同的行为并检查了剑道支持。他们告诉我，截至今天，不支持这种行为。它甚至不适用于 -webkit-overflow-scrolling: touch; 应用于 List 的 CSS。我认为他们实现了这样的行为，因为 iOS 列表的行为方式相同。无论如何，拥有一个静态过滤器很好，这样您就不必向上滚动来过滤列表。

# ruby-on-rails - I18n.l 显示错误的月份（一个月后）

> ID：15897171
> 
> 赞同：3
> 
> 时间：2013-04-09T08:39:54.283
> 
> 标签：ruby-on-rails, spree, rails-i18n

我对 I18n.l 助手有一个严重的问题。我在 updated_at 数据库字段中有以下日期：2013-04-09 08:17:26

我在我的视图中显示这个日期，并在我**第一次**加载页面时`<%= l product.updated_at %>`得到这个： 。当我刷新页面时，它变为. 如您所见，日期现在是一个月后。它坚持这一点，直到我重新启动服务器。然后再次正确显示一次。**`Dienstag, 09\. April 2013, 10:17 Uhr``Dienstag, 09\. Mai 2013, 10:17 Uhr`**

 **这里可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:00:14.790

我终于找到了。这是我使用的 Spree 版本中的一个错误，他们意外删除了`nil`密钥： [https ://github.com/spree/spree/pull/2427](https://github.com/spree/spree/pull/2427)`month_names`**

# jquery - 文本框失去焦点与 jquery 自动完成选择

> ID：15897172
> 
> 赞同：0
> 
> 时间：2013-04-09T08:39:59.747
> 
> 标签：jquery, asp.net, jquery-ui, jquery-ui-autocomplete

我一直在使用jquery自动完成，一旦我从自动完成下拉文本框中选择值就会失去焦点，

我该如何预防，

```
<script type="text/javascript">
    $(document).ready(
    function() {
        $("#<%=search.ClientID%>").autocomplete("Search.ashx", {
            width: 153, scrollHeight: 250,
            close: function(event, ui) { alert("close"); }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:46:37.197

```
$('input').autocomplete({
    'select':function(){
        $(this).focus();
    }
}); 
```

应该这样做，尽管这将转到某人键入的行的末尾...我想这取决于您选择维护输入插入符号位置的值并适当利用的位置。如果您需要帮助，我会在 jQuery API 上查找该`select`事件。

# powershell - 命令失败时如何让 topshelf 返回错误代码？

> ID：15897173
> 
> 赞同：3
> 
> 时间：2013-04-09T08:40:09.347
> 
> 标签：powershell, topshelf

我正在尝试使用 powershell 启动我的服务，但目前它失败了。我不知道它为什么会失败，但这不是重点。尝试启动主机时，我没有得到正确的退出代码，因此我的自动部署会静默失败。

我想做的是：

```
$cmd = "$folder" + "\MyService.exe"
try
{
    & $cmd stop
    & $cmd uninstall
    & $cmd install
    & $cmd start
}
catch
{
    Write-Host "Error: Update of service failed"
    exit 1
} 
```

该`start`命令失败并显示以下消息：

```
Topshelf.Hosts.StartHost Error: 0 : The service failed to start., System.InvalidOperationException: Cannot start service MyService on computer '.'. ---> System.ComponentModel.Win32Exception: The service cannot be started, either because it is disabled or because it has no enabled devices associated with it
    --- End of inner exception stack trace ---
    at System.ServiceProcess.ServiceController.Start(String[] args)
    at System.ServiceProcess.ServiceController.Start()
    at Topshelf.Runtime.Windows.WindowsHostEnvironment.StartService(String serviceName)
    at Topshelf.Hosts.StartHost.Run() 
```

而且我从来没有进入我的 powershell 脚本的 catch 语句。

**更新：**

请注意，我问的是如何获取 catch 语句的方法，而不是实际异常的解决方案。我已经解决了实际的异常，但是如果它失败了，我希望将来有更好的反馈，那就是希望执行 catch 语句，而不是在出错的情况下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T10:11:35.093

`try/catch`在 PowerShell 中不适用于 exe。通话后`myservice.exe`，您需要检查自动变量`$LastExitCode`。尝试这样的事情：

```
$out = & $cmd start
if ($LastExitCode -ne 0) # if exe returns 0 on success, if not change the condition accordingly
{
    "ERROR: $out"
    return # to exit script or do something else.
} 
```

# iphone - 如何在 iPhone 中隐藏带有标签的 SPUserResizableView？

> ID：15897178
> 
> 赞同：0
> 
> 时间：2013-04-09T08:40:40.850
> 
> 标签：iphone, ios, xcode, ipad, uiview

嗨，我有一种方法，可以通过单击创建 3 个视图；

```
-(void)method{

for (i=0; i<3; i++) {
NSLog(@"i is: %d",i);

NSLog(@"i is: %d",i);
userResizableView = [[SPUserResizableView alloc] initWithFrame:CGRectMake   (100,41,60,60)];
userResizableView.tag = i;

imageVw1 = [[UIImageView alloc]initWithFrame:userResizableView.bounds];
imageVw1.image = [UIImage imageNamed:@"redacted2.jpg"];
imageVw1.userInteractionEnabled=YES;
imageVw1.autoresizesSubviews = YES;
imageVw1.alpha = 0.93;  // for opacity
userResizableView.contentView = imageVw1;

userResizableView.delegate = self;
[userResizableView showEditingHandles];
currentlyEditingView = userResizableView;
lastEditedView = userResizableView;
[self.view addSubview: userResizableView];
[userResizableView release];

}   
} 
```

现在在另一种方法中，我想隐藏我最后创建的这些视图。但我做不到。我隐藏我的观点就像-

```
-(void)Hide_method{
// int type instance variable, and a=0; in viewdidload;
userResizableView.tag = a;
userResizableView.hidden = YES;
a++;
} 
```

但是只有一个视图是隐藏的，其余的都保留了，无论我点击 Hide_method 多少​​次，只有一个视图是隐藏的。

我的问题是如何隐藏我最后创建的最后一个视图。意味着视图像 3,2,1,0 一样隐藏。每次单击 hide_method 时。

任何想法或建议都将受到高度欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:48:11.523

```
-(void)Hide_method{
 // int type instance variable, and a=0; in viewdidload;
   //userResizableView.tag = a;
   SPUserResizableView *_view = (SPUserResizableView *)[self.view viewWithTag:a];
   userResizableView.hidden = YES;
   a++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:53:34.370

试试这个：

```
-(void)Hide_method{

   //UIView *v = [self.view viewWithTag:a];

    SPUserResizableView *v = (SPUserResizableView *)[self.view viewWithTag:a];

    if(v)
        [v removeFromSuperview];

   a++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:58:04.347

删除具有标签 = a 的视图的方法

```
for (UIView *subview in [self.view subviews])
    {
       if (subview.tag == a)
          {
            [subview removeFromSuperview];
          }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T09:47:14.430

提供`unique tag`不`clash`与任何`other subview`一个`self.view`和`same tag`任何一个数字一样`999 +`。

相应地进行更改：

```
for (i=0; i<3; i++) {
  SPUserResizableView *userResizableView = [[SPUserResizableView alloc] initWithFrame:CGRectMake(100,41,60,60)];
  userResizableView.tag = 999+i;

  ..........
  ..........
} 
```

现在`hide method`将是：

```
-(void)Hide_method{
  // find SPUserResizableView with unique tag
for (i=0; i<3; i++) {
  if(i == 2){
    SPUserResizableView*userResizableView = (SPUserResizableView *)[self.view viewWithTag:999+i];
    userResizableView.hidden = YES;
  }
} 
```

**编辑**：要`restore` `frame`存储`origina`而`allocating view`

```
CGRect prevFrame = userResizableView.frame //take frame while allocating userResizableView 
```

现在`restore`，每当你想要`original` `frame`这样：

```
SPUserResizableView*userResizableView = (SPUserResizableView *)[self.view viewWithTag:999+2]; //get last userResizableView
userResizableView.frame = prevFrame; 
```

# java - java <= 无法正常工作

> ID：15897180
> 
> 赞同：0
> 
> 时间：2013-04-09T08:40:55.307
> 
> 标签：java

```
 do {
        System.out.println("Please enter the cost: ");
        Cost1 = input.nextDouble();
    } while (Cost1 <= 100000 || Cost1 >= 900000); 
```

那是我的代码。如果我输入 100001 它会跳过循环，但如果我输入 100000 它不会。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:43:35.373

错误的条件（基于您对它的期望）

```
Cost1 <= 100000 || Cost1 >= 900000 
```

方法

```
While Cost1 <= 100k OR Cost1 >=900K 
```

所以当你把`100001` 它既不小于等于`100k`也不大于等于`900K`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:43:43.727

如果您在`Cost1`不低于 100 000 且不高于 900 000 时输入 100 001，那么您将退出 while 语句。

不过，如果您输入 100 000，则 while 的第一个条件已完成，因此该语句将再次执行（惰性求值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:43:44.600

它就像您要求的（或至少写的）一样工作。

正如您所指出的，如果大于 100000 且小于 900000 ，`Cost1`则将**跳过**循环。

所以对于 100000 它不会跳过（因为它等于 100000）而对于 100001 它会跳过（因为它在 100000 和 900000 之间）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T08:46:37.743

根据条件，它显然会退出循环，因为 100001 >100000 我认为你想要别的东西并且错误地你输入了错误的条件。在这里发布你的查询

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T08:47:09.850

您的循环仅在值不在 100000 和 900000 之间时执行，给定 or 逻辑。

这种逻辑似乎超出了正常情况（**虽然它可能是有意**的），我假设您只希望在这些值之间进行迭代，这可以通过使用和逻辑来解决。

```
do {
    System.out.println("Please enter the cost: ");
    Cost1 = input.nextDouble();
} while (Cost1 >= 100000 && Cost1 <= 900000); 
```

# c - net_ntoa、struct sockaddr_in 和指针转换

> ID：15897185
> 
> 赞同：-2
> 
> 时间：2013-04-09T08:41:07.663
> 
> 标签：c, network-programming

对于以下代码段中的第三行：

```
char cli_ip[20];
struct sockaddr cliaddr;
.......
memcpy(cli_ip, inet_ntoa(((struct sockaddr_in *)cliaddr)->sin_addr), 20); 
```

我收到错误：

> udp_receiver.c:96:41: 错误: 无法转换为指针类型 udp_receiver.c:96:41: 警告: 传递“memcpy”的参数 2 使指针从整数不进行强制转换 [默认启用] /usr/include/ string.h:44:14：注意：预期为“const void * **restrict** ”，但参数的类型为“int”</p>

这是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:48:27.107

您是否适当地包含了标题？

`inet_ntoa`建议以下的人包括

```
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h> 
```

可能是编译器没有找到原型`inet_ntoa`并假设它返回`int`然后在`memcpy`.

# freeradius - freeRADIUS 与 LDAP SASL/基于证书的绑定

> ID：15897189
> 
> 赞同：0
> 
> 时间：2013-04-09T08:41:22.177
> 
> 标签：freeradius

我正在使用 LDAP 作为后端来验证用户的 freeRADIUS v1.1.7-r0.0.2。

我想用证书而不是使用用户名和密码来配置 freeRADIUS 服务器。

如何使用基于 SASL/证书的绑定配置 RADIUS+LDAP？

请指导我如何实现这一点，是否有任何帮助/文档如何为 RADIUS 服务器配置 LDAP SASL 绑定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-11T02:32:26.320

最近在 v3.0.x 中添加了对 SASL 绑定的支持，包括管理绑定和用户绑定，它在以前的版本中不可用。

[请在此处](https://github.com/FreeRADIUS/freeradius-server/blob/v3.1.x/raddb/mods-available/ldap)查看配置中的 SASL 部分

始终支持基于证书的绑定。它使用`certificate_file`和`private_key_file`配置项进行配置。

您不能通过 EAP 对话之类的方式通过 SSL 隧道。

# if-statement - SRSS 中的 Switch 语句

> ID：15897191
> 
> 赞同：0
> 
> 时间：2013-04-09T08:41:24.430
> 
> 标签：if-statement, reporting-services, switch-statement

我想对文本框的背景颜色进行条件格式设置。我想要这样的东西。如果我可以使用 If - else 语句，它仍然可以。

```
 =Switch

     (
       (First(Fields!Risk_Level.Value, "BBS_ID") = "high","Red"),
       (First(Fields!Risk_Level.Value, "BBS_ID") = "Medium","Orange"),
       (First(Fields!Risk_Level.Value, "BBS_ID") = "Low","Green")
      ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:11:25.880

以下应该有效：

```
=Switch(
        Fields!Risk_Level.Value = "high","Red",
        Fields!Risk_Level.Value = "Medium","Orange",
        Fields!Risk_Level.Value = "Low","Green"
       ) 
```

# android - 在 Android 中以编程方式切换到开发者模式

> ID：15897192
> 
> 赞同：3
> 
> 时间：2013-04-09T08:41:25.727
> 
> 标签：android

我想创建一个工具，允许在 Android 版本低于 4.2 的 Android 设备上切换到开发人员模式。我想创建一个 apk 来激活和停用开发人员模式。这可能吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:57:36.113

“开发者”模式是系统设置，因此只能从系统应用程序修改（即使用制造商密钥签名）。您无法创建会修改此设置的应用程序。

# excel - Excel中的自动递增十进制值

> ID：15897193
> 
> 赞同：0
> 
> 时间：2013-04-09T08:41:30.120
> 
> 标签：excel

我试图弄清楚如何在 Excel 中自动增加一个十进制值，并为下一张表将第一个数字增加一个。

下面的例子：

```
(first sheet)
1.1
1.2
1.3
...
(second sheet)
2.1
2.2
2.3
... 
```

现在，如果我添加一张新工作表，我希望编号继续使用 3.1。在 excel 2010 中会出现这样的情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:14:03.330

如果没有一些宏支持，我看不到任何方法来实现这一点。以下内容可能是一个起点；将其添加到`ThisWorkbook`VBA 中的模块中：

```
Private Sub Workbook_NewSheet(ByVal Sh As Object)
    Sh.Cells(1, 1) = ThisWorkbook.Worksheets.Count + 0.1
End Sub 
```

创建新工作表时调用该代码，接收新工作表作为参数。然后为左上角的单元格提供一个反映当前工作簿中工作表数量的值，加上问题中的 0.1。进一步的单元格可能会根据需要填充（比如说）一个`For`循环（从问题中不清楚究竟有多少单元格应该获得一个值或者我们知道什么规则）。

# c# - 何时检查列表 为空，当为 0 和当两者

> ID：15897194
> 
> 赞同：3
> 
> 时间：2013-04-09T08:41:33.630
> 
> 标签：c#, linq

我使用 ADO.NET 实体框架，并且经常有这样的代码片段：

```
List<Sole> entity = soleService.All()
    .Where(s => (s.ShoeLastID == shoeLastID) && (s.Status == 20))
    .ToList(); 
```

从现在开始我没有多想，只是做了这个检查：

```
if (entity.Count > 0) 
```

相信这就够了。现在我看到很多人使用`Any()`和 进行检查`null`。如何确定在某种情况下我需要什么样的检查以及在这种情况下，正如我所说的 - 我经常使用就`if (entity.Count > 0)`足够了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:47:59.883

`if (entity.Count > 0)`或者在你的情况下`if (entity.Any())`是**相同的。**由于您已经从数据库中获取了所有数据，因此列表已经构建并且您知道它的大小。所以`.Count`属性不会迭代任何东西。

另一方面，`.Count()` `IEnumerable`如果您没有获取所有数据，请不要调用扩展程序，因为它会一劳永逸地枚举项目。

改用：

```
bool test = soleService.All()
    .Any(s => (s.ShoeLastID == shoeLastID) && (s.Status == 20));

if (test)
{
...
} 
```

此外，LINQ 扩展不会返回 null 而是一个空的`IEnumerable`，所以不要检查`null`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:44:41.980

如果您有`.ToList()`电话，则列表始终是列表。可能为空，但绝不为空。

对于大多数容器或可枚举对象来说，检查`.Any()`而不是检查`.Count() > 0`是一种性能改进，因为`.Any()`如果有第一个元素，它只会触及第一个元素。`.Count()`尽管您对结果不感兴趣，但需要将容器计数到最后，只是因为它不为零。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T08:45:13.903

取决于你需要什么。

如果您只想知道是否有任何实体与您的谓词匹配，请使用`Any()`，因为它会在找到第一个匹配实体后立即返回。 `Count() / Count`将需要处理通常会慢得多的所有实体。

也更喜欢 Linq 的`Count()`列表`Count`，因为它不必在内存中创建完整的列表，这对于大型结果集可能非常昂贵。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T08:46:32.147

`Any()`将提供更好的解决方案，因为它在第一次匹配后停止。

**此外**

我建议也`ToList()` **仅**在`Any()`为真时才这样做。

您将节省（微）性能。

```
var t = soleService.All()  .Where(s => (s.ShoeLastID == shoeLastID) && (s.Status == 20));
if  (t.Any()) entity =t.ToList(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-09T08:46:46.253

entity.Any() - 如果您的集合中有任何实体，将返回 true。entity.Count() == 0 也会这样做。但我建议使用 any，因为它会运行得更快。因为 Count 将返回集合中的数据量，但 any 将在您的集合中找到的第一个项目上触发。但是，如果您不确定您的集合是否已初始化，我建议您使用下一个构造：

```
if(entity!=null && entity.Any())
{
   //Do something. You will get her always without error, And you will be 100% sure that your collection is not empty and it is initialized
} 
```

希望能帮助到你。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-09T08:48:00.633

当你调用`if (entity.Count > 0)`but`entity == null`时，你会得到一个异常，因为**实体**未初始化`.Count`时不存在。

 *** * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-09T08:48:38.010

当然，列表可以是也可以是`null`空的。如果您尝试`List<Sole>`如上所述创建 using LINQ 并且`soleService`可能为 null，在这种情况下您将获得一个`NullReferenceException`. 所以我会先检查`soleService`is 不是`null`或空的。所以

```
List<Sole> entity = null;
// ...
if (soleService != null && soleService.Count > 0)
    entity = soleService.All()
        .Where(s => (s.ShoeLastID == shoeLastID) && (s.Status == 20))
        .ToList(); 
```

我希望这有帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-09T08:44:17.290

entity.Any() 是更好的选择。而且您不需要调用 .ToList() 因为这将从数据库中获取所有数据，然后只检查其计数。**

# tomcat - 未发送 ViewState

> ID：15897201
> 
> 赞同：1
> 
> 时间：2013-04-09T08:41:58.600
> 
> 标签：tomcat, jsf-2, primefaces

我有一个带有 primefaces 3.5 的 JSF 2.2.0-m12 应用程序。由于我将应用程序从 JBoss 7.1.1 移植到 Tomcat 7.0.39，重新加载页面后输入字段（输入文本、滑块、按钮...）的第一次更改工作正常，但第二次更改没有任何作用。我搜索了第一个和第二个请求之间的差异：

**第一个请求：**

*   JSF 阶段：执行阶段 1 到 6
*   在 Firebug 'network -> all -> POST zinsrechner.xhtml -> post' 中是一个视图状态：

```
内容形式 内容形式
contentForm:inputZinsatz 2.0
contentForm:j_idt157:anla... 277
contentForm:j_idt157:maxA... 25
内容形式：j_idt157：滑动... 277
contentForm:j_idt72:saveA... 10000
contentForm:j_idt72:saveA... 20000
contentForm:selectSparArt false
javax.faces.ViewState -1622287370124327744:4775655032591022279
javax.faces.behavior.even... slideEnd
javax.faces.partial.ajax 真
javax.faces.partial.event slideEnd
javax.faces.partial.execu ... contentForm:j_idt157:sliderAnlageDauer
javax.faces.partial.rende... contentForm
javax.faces.source contentForm:j_idt157:sliderAnlageDauer

```

**第二个要求：**

*   JSF 阶段：在第 1 阶段之后执行第 6 阶段
*   在 Firebug 'network -> all -> POST zinsrechner.xhtml -> post' 中**没有**视图状态：

```
内容形式 内容形式
contentForm:inputZinsatz 2.0
contentForm:j_idt157:anla... 460
contentForm:j_idt157:maxA... 25
contentForm:j_idt157:slide... 460
contentForm:j_idt72:saveA... 10000
contentForm:j_idt72:saveA... 20000
contentForm:selectSparArt false
javax.faces.behavior.even... slideEnd
javax.faces.partial.ajax 真
javax.faces.partial.event slideEnd
javax.faces.partial.execu ... contentForm:j_idt157:sliderAnlageDauer
javax.faces.partial.rende... contentForm
javax.faces.source contentForm:j_idt157:sliderAnlageDauer

```

现在我不确定是否缺少 ViewState 会导致不正确的行为。

在我的页面中有三个不包含的表格。对于每个表单，在输出的 html（压缩）中呈现一个隐藏的 viewstate 标记：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Zinsrechner</title>
<body>
<div class="wrapper">
    <form id="headerForm" name="headerForm" method="post"
        action="/Tools_Web/pages/rechner/zinsrechner.xhtml"
        enctype="application/x-www-form-urlencoded">
        <input type="hidden" name="headerForm" value="headerForm" />

        <header>
            <html xmlns="http://www.w3.org/1999/xhtml">
                <script type="text/javascript"> ... </script>
                <nav>...</nav>
            </html>
            <h1>Zinsrechner</h1>
        </header>
        <input type="hidden" name="javax.faces.ViewState"
            id="j_id1:javax.faces.ViewState:0"
            value="863948539220421748:307506195687956782" autocomplete="off" />
    </form>

    <div id="contentOutline">
        <div id="content">
            <div class="wrapper">
                <form id="contentForm" name="contentForm" method="post"
                    action="/Tools_Web/pages/rechner/zinsrechner.xhtml"
                    enctype="application/x-www-form-urlencoded">
                    <input type="hidden" name="contentForm" value="contentForm" />
                    <div id="sidebar"></div>
                    <div id="zinsrechner">
                        <!-- Headline -->
                        <header>
                            <div style="padding: 0 1em; float: right;">
                                <span
                                    title="Zinssatz pro Jahr"><span id="contentForm:j_idt70"
                                    class="ui-inplace ui-hidden-container"><span
                                        id="contentForm:j_idt70_display" class="ui-inplace-display"
                                        style="display: inline">2.0%</span><span
                                        id="contentForm:j_idt70_content" class="ui-inplace-content"
                                        style="display: none"><input
                                            id="contentForm:inputZinsatz" name="contentForm:inputZinsatz"
                                            type="text" value="2.0"
                                            style="width: 70px; right: 0px; top: 0 position:absolute"
                                            class="ui-inputfield ui-inputtext ui-widget ui-state-default ui-corner-all" />
                                        <script id="contentForm:inputZinsatz_s" type="text/javascript">PrimeFaces.cw('InputText','widget_contentForm_inputZinsatz',{id:'contentForm:inputZinsatz',behaviors:{change:function(event) {mojarra.ab('contentForm:inputZinsatz',event,'valueChange','@form','@form headerForm footerForm')},change:function(event) {PrimeFaces.ab({source:'contentForm:inputZinsatz',event:'change',process:'contentForm:inputZinsatz',update:'contentForm'}, arguments[1]);}}});</script></span></span>
                                <script id="contentForm:j_idt70_s" type="text/javascript">PrimeFaces.cw('Inplace','widget_contentForm_j_idt70',{id:'contentForm:j_idt70',effect:'fade',effectSpeed:'normal',event:'click',toggleable:true});</script>
                                </span>
                            </div>
                        </header>

                        <div>
                            <!-- More input elements -->
                        </div>
                    </div>
                    <input type="hidden" name="javax.faces.ViewState"
                        id="j_id1:javax.faces.ViewState:0"
                        value="863948539220421748:307506195687956782" autocomplete="off" />
                </form>
            </div>
        </div>
    </div>
    <form id="footerForm" name="footerForm" method="post"
        action="/Tools_Web/pages/rechner/zinsrechner.xhtml"
        enctype="application/x-www-form-urlencoded">

        <input type="hidden" name="footerForm" value="footerForm" />

        <footer></footer>
        <input type="hidden" name="javax.faces.ViewState"
            id="j_id1:javax.faces.ViewState:0"
            value="863948539220421748:307506195687956782" autocomplete="off" />
    </form>
</div> 
```

我尝试使用此处描述的 JS 解决问题，但未成功： [h:commandButton/h:commandLink 在第一次单击时不起作用，仅在第二次单击时起作用](https://stackoverflow.com/questions/11408130/jsf-commandbutton-works-on-second-click/11412138#11412138)

以及 web.xml 中的以下配置：

```
<context-param>
<param-name>com.sun.faces.autoCompleteOffOnViewState</param-name>
<param-value>false</param-value>
</context-param>

<context-param>
<param-name>com.sun.faces.enableViewStateIdRendering</param-name>
<param-value>false</param-value>
</context-param> 
```

**编辑** 这是xhtml页面：

```
<ui:composition
xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:p="http://primefaces.org/ui"
template="/template/baseLayout.xhtml"
xmlns:ad="http://java.sun.com/jsf/composite/components/ad">
<ui:param
    name="title"
    value="Zinsrechner" />
<ui:param
    name="bgClass"
    value="whiteGrid" />
<ui:define name="content">
    <div id="zinsrechner">
        <!-- Headline -->
        <header>
            <p:selectOneButton
                id="selectSparArt"
                value="#{zinsrechner.monthly}"
                styleClass="selectSparArt">
                <f:selectItem
                    itemLabel="Anlagebetrag"
                    itemValue="#{false}" />
                <f:selectItem
                    itemLabel="Sparbetrag"
                    itemValue="#{true}" />
                <p:ajax
                    event="change"
                    update="contentForm"
                    process="selectSparArt"
                    listener="#{zinsrechner.onMonthlyChange()}" />
            </p:selectOneButton>
            <div style="padding: 0 1em; float: right;">
                <span title="Monatlicher Sparbetrag">
                    <p:inplace label="#{zinsrechner.saveAmount}€" rendered="#{zinsrechner.monthly}">
                        <p:inputText
                            style="width: 70px; margin-right: 10px;"
                            id="inputSparbetrag"
                            value="#{zinsrechner.saveAmount}">
                            <p:ajax
                                event="change"
                                update="contentForm"
                                process="inputSparbetrag"
                                listener="#{zinsrechner.onSaveAmountChange()}" />
                            </p:inputText>
                        </p:inplace>
                    </span>

                <span title="Zinssatz pro Jahr">
                    <p:inplace label="#{zinsrechner.interestRate}%">
                        <p:inputText
                            style="width: 70px; right:0px; top: 0 position:absolute"
                            id="inputZinsatz"
                            value="#{zinsrechner.interestRate}">
                            <p:ajax
                                event="change"
                                update="contentForm"
                                process="inputZinsatz"
                                listener="#{zinsrechner.onInterestRateChange()}" />
                                <f:ajax execute="@form" render="@form :headerForm :footerForm"></f:ajax>
                        </p:inputText>
                    </p:inplace>
                </span>
            </div>
        </header>

        <!-- Y-Achse -->
        <ad:yAxis
            component="#{zinsrechner}"
            editable="true"
            inputId="saveAmount"
            inputMaxValueId="saveAmountMax"
            rendered="true"
            sliderId="saveAmountSlider"></ad:yAxis>

        <!-- Chartcontainer -->
        <ad:barChart
            component="#{zinsrechner}"
            rendered="true"
            renderSumBarLeft="false"
            renderSumBarRight="false" />

        <!-- X-Achse -->
        <ad:xAxis
            component="#{zinsrechner}"
            sliderId="sliderAnlageDauer"
            editable="true"
            inputId="anlagedauer"
            inputMaxValueId="maxAnlagedauer"
            rendered="true"
            renderSumBarLeft="false"
            renderSumBarRight="false"></ad:xAxis>
    </div>
</ui:define> 
```

我该怎么做才能将 ViewStatus 传递给服务器？丢失的 ViewState 可能是导致错误行为的原因吗？

谢谢你的帮助。如果您需要更多信息，请询问！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:53:36.773

就像 BalusC 和 Jens 所说的那样，问题出在 Primefaces 和 JSF 的版本上：

> PF 3.5 不是为 JSF 2.2 设计的。您应该为此使用 PF 4.0。请使用常规 JSF 组件进行测试以排除 PF 3.5 的原因，或降级到 JSF 2.1。

降级到 JSF 2.1 后它可以工作。

# android - 在 Android 中保存聊天记录的推荐方法是什么？

> ID：15897206
> 
> 赞同：2
> 
> 时间：2013-04-09T08:42:21.247
> 
> 标签：android, caching, chat, asmack

我正在使用 Asmack 编写一个聊天应用程序。

我正在寻找保存聊天记录的最佳方式。虽然我稍后会在服务器端进行，但我仍然希望将一些历史记录（大部分是最近的）保存在手机上。

我读了这个[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

我实现了内部数据存储来保存历史。但这是保存聊天记录/联系人的推荐方式吗？

编辑：

回复评论；如下，像我做的那样？（但添加加密）

```
String FILENAME = "contactName.History";
String string = "encrypted message history";

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

我必须手动加密字符串，还是 Android 自己加密？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-02T14:43:45.610

Best way is to use Sqlite data base because its easy to process it and also you can sort objects based on timestamp.

# android - 何时删除内容提供商与外部应用程序共享的文件

> ID：15897208
> 
> 赞同：0
> 
> 时间：2013-04-09T08:42:30.407
> 
> 标签：android, security, share, android-contentprovider

在我的应用程序中，我允许用户使用内容提供程序与外部应用程序共享文件。我的文件已加密，因此在我可以共享其中一个文件之前，我需要对其进行解密并将其存储在应用程序内部存储中。之后，我实现了自定义内容提供程序，它可以使用给定的 URL 指向文件并返回 ParcelFileDescriptor 实例。

出于安全问题，我想在外部应用程序使用该文件或用户取消操作后从内部存储中删除该文件。

编辑：我与之共享文件的外部应用程序是第 3 方应用程序。

所以我的问题是：我应该什么时候删除文件，或者你知道我可以收听的任何事件或我可以附加到文件的处理程序吗？

感谢您的所有回复。

附带的问题是：您是否知道我不必将文件存储在内部存储中，而是直接将其作为流发送到外部应用程序的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:11:51.263

我的问题的答案是使用管道 ParcelFileDescriptor。

代码在 CommonsWare 的 The Busy Coder's Guide to Android Development 中进行了描述。

解决方案基于： [https ://github.com/nandeeshwar/Pfd-Create-Pipe](https://github.com/nandeeshwar/Pfd-Create-Pipe)

我设法实施的实际解决方案是： [https ://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Pipe](https://github.com/commonsguy/cw-omnibus/tree/master/ContentProvider/Pipe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:00:26.017

如果它是*您的*外部应用程序，您可以留下一个加密文件并在 Intent 中传递密钥。如果是第 3 方外部应用程序，您必须找出该应用程序可以接受的内容。

您可能还阅读了有关服务的信息——也许它们提供了您想要的东西。

至于“何时”，我建议在 onResume() 中启动一个清理任务。（除非您决定使用服务。）

# css - 工具栏在 Linux Firefox 中的页面之外而不是在 Windows 上

> ID：15897209
> 
> 赞同：0
> 
> 时间：2013-04-09T08:42:31.990
> 
> 标签：css, jsf, firefox, layout, richfaces

我正在构建一个基于 JSF 和 Richfaces 的 Web 应用程序。我有一个主页，一旦用户登录，就会显示给用户。

我`<rich:dropDownMenu>`在里面的标题中使用`<rich:toolbar>`。标题包含在所有页面中。

虽然布局在 Windows 中看起来非常好，但当在 Linux 上运行相同的应用程序时，工具栏会超出页面。

每个`<rich:page>`宽度为 800。我希望在 windows 和 Linux 浏览器中具有相同的布局。我尝试了许多可能的组合，但它仍在页面之外。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:51:19.227

我不能说这个问题背后的具体原因是什么，但是作为一种解决方法，你可以将你`<rich:toolbar>`的 div 包裹起来，即，`<h:panelGroup layout="block">`并相应地设置它的最大宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:06:16.963

经过 2 多天的努力，我们发现是字体的问题导致标题超出了 Linux 中的页面。

Linux 操作系统没有标题中使用的字体，因此使用默认字体，因为标题正在拉伸。

在 Linux 上安装所需的字体就可以了。

# java - 将逗号分隔值放入 Collecton 对象

> ID：15897214
> 
> 赞同：0
> 
> 时间：2013-04-09T08:42:58.617
> 
> 标签：java, collections

我有一个查询字符串，它接收为`January, February, March`

我想用逗号分割字符串并将字符串放入`HashMap`，这样当我检索时我想获取并执行空检查字符串为`January, February, March`

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:45:00.060

您可以使用拆分功能：

```
String[] monthsArray= yourString.split(","); 
```

然后您可以将其转换为 HashSet，例如：

```
Set<String> months = new HashSet<String>(Arrays.asList(monthsArray)); 
```

或列表：

```
List<String> months = Arrays.asList(monthsArray) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:47:19.857

尝试类似的东西-

```
 final String input = "January, February, March, ...";
    final String[] months = input.split(",");
    final List<String> monthList = new ArrayList<String>();
    for(String month : months) {
        monthList.add(month);
    } 
```

您甚至可以直接从数组转换为列表，请查看 Collections Framework API。

编辑：`monthList=Arrays.asList(months)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T09:14:56.150

```
You can use the following code to store the months in a hash map.   

 import java.util.HashMap;
    import java.util.Iterator;
    import java.util.Map;
    import java.util.Set;
    import java.lang.String;

    public class strings {
        public static void main(String [] args){
            String text = "jan,feb,march,april";
            String[] keyValue = text.split(",");
            Map<Integer, String> myMap = new HashMap<Integer, String>();
            for (int i=0;i<keyValue.length;i++) {
                myMap.put(i, keyValue[i]);
            }
             Set keys = myMap.keySet();
                Iterator itr = keys.iterator();

                Integer key;
                String value;
                while(itr.hasNext())
                {
                    key = (Integer)itr.next();
                    value = (String)myMap.get(key);
                    System.out.println(key + " - "+ value);
                }
        }
    }

The out put will be-
0 - jan
1 - feb
2 - march
3 - april

Further you can perform the check that you want 
```

# xml - XSL for-each 和 LEFT JOIN

> ID：15897216
> 
> 赞同：2
> 
> 时间：2013-04-09T08:43:03.630
> 
> 标签：xml, xslt, join

我需要一些 XSLT 语句，它给了我类似“LEFT JOIN”的东西：如果选定的节点确实存在，则返回所有这样的节点，否则只循环一次。

这与 xsl:for-each 循环不同，因为当没有这样的节点时，for-each 循环返回零行。

这是一个实际的例子。

XML 文件：

```
<root>
    <sec1>
        <x1/> ... <x1/>
    </sec1>
    <sec2>
        <x2/> ... <x2/>
    </sec2>
    ...
    <sec10>
        <x10/> ... <x10/>
    </sec10>
</root> 
```

现在，我不知道我有多少个“x1”、“x2”、..“x10”，我想打印出所有可能的组合。一个简单而错误的解决方案：

```
<xsl:for-each select="/root/sec1/x1">
    <xsl:for-each select="/root/sec2/x2">
        ...
        <xsl:for-each select="/root/sec10/x10">
           ...print x1 and x2... and x10
        </xsl:for-each>
        ...
    </xsl:for-each>
</xsl:for-each> 
```

这个解决方案是错误的，因为如果没有“x3”，它会返回 0 行（就像 FULL JOIN 一样），而我想查看所有其他值（如 LEFT 或 RIGHT JOIN）。

我可以使用 xsl:choose、xls:when、xsl:foreach 和 xsl:otherwise 的组合，但这很长。

我尝试构建自己的 xsl 模板，但它不起作用：

```
<xsl:template name="left-join">
    <xsl:param name="select"/>
    <xsl:param name="template"/>

    <xsl:choose>
        <xsl:when test="$select">
            <xsl:for-each select="$select">
                <xsl:call-template name="$templatename"> <!--WRONG -->
                    <xsl:with-param name="one-parameter" select="$select"/>
                </xsl:call-template>
            </xsl:for-each>
        </xsl:when>
        <xsl:otherwise>
            <xsl:call-template name="$templatename">
                <xsl:with-param name="one-parameter" select="$select"/>
            </xsl:call-template>
        </xsl:otherwise>
    </xsl:choose>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:04:05.820

即使我不完全理解您的问题，我也会尝试回答。我的理解是，您正在锁定诸如 sql left join 之类的东西。（例如[http://www.w3schools.com/sql/sql_join_left.asp](http://www.w3schools.com/sql/sql_join_left.asp)） XML/XSLT 版本可能如下。

输入数据：

```
 <root>
        <Persons>
            <Person id="1">
                <Name>Hansen</Name>
            </Person>
            <Person id="2">
                <Name>Svendson</Name>
            </Person>
            <Person id="3">
                <Name>Pettersen</Name>
            </Person>
        </Persons>
        <Orders>
            <Order id="1" >
                <P_Id>3</P_Id>
                <OrderNo>77895</OrderNo>
            </Order>
            <Order id="2">
                <P_Id>3</P_Id>
                <OrderNo>44678</OrderNo>
            </Order>
            <Order id="3">
                <P_Id>1</P_Id>
                <OrderNo>22456</OrderNo>
            </Order>
            <Order id="4">
                <P_Id>1</P_Id>
                <OrderNo>24562</OrderNo>
            </Order>
            <Order id="5">
                <P_Id>15</P_Id>
                <OrderNo>34764</OrderNo>
            </Order>
        </Orders>
    </root> 
```

XSLT

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>
        <xsl:strip-space elements="*"/>

        <xsl:template match="root">
            <xsl:call-template name="person_order" />
        </xsl:template>

        <xsl:template name="person_order">
           <orders>
            <xsl:for-each select="//Person">
                <xsl:variable name ="pid" select="@id" />
                <xsl:call-template name="left_join">
                    <xsl:with-param name="jname" select="'order'"/>
                    <xsl:with-param name="left" select="."/>
                    <xsl:with-param name="right" select="//Order[P_Id = $pid]"/>
                </xsl:call-template>
            </xsl:for-each>
           </orders>
        </xsl:template>

        <xsl:template name="left_join">
            <xsl:param name="jname" />
            <xsl:param name="left" />
            <xsl:param name="right" />

            <xsl:choose>
                <xsl:when test="$right">
                    <xsl:for-each select="$right">
                        <xsl:call-template name="print_join">
                            <xsl:with-param name="jname" select="$jname"/>
                            <xsl:with-param name="left" select="$left"/>
                            <xsl:with-param name="right" select="."/>
                        </xsl:call-template>
                    </xsl:for-each>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:call-template name="print_join">
                        <xsl:with-param name="jname" select="$jname"/>
                        <xsl:with-param name="left" select="$left"/>

                    </xsl:call-template>
                </xsl:otherwise>
            </xsl:choose>

        </xsl:template>
        <xsl:template match="node() | @*">
            <xsl:copy>
                <xsl:apply-templates select="node() | @*"/>
            </xsl:copy>
        </xsl:template>

        <xsl:template name="print_join">
            <xsl:param name="jname" />
            <xsl:param name="left" />
            <xsl:param name="right" />
            <xsl:element name="{$jname}" >
                <xsl:for-each select="$left">
                    <xsl:apply-templates select="node() "/>
                </xsl:for-each>
                <xsl:if test="$right">
                    <xsl:for-each select="$right">
                        <xsl:apply-templates select="node() "/>
                    </xsl:for-each>
                </xsl:if>
            </xsl:element>
        </xsl:template>

    </xsl:stylesheet> 
```

生成输出：

```
 <orders>
      <order>
        <Name>Hansen</Name>
        <P_Id>1</P_Id>
        <OrderNo>22456</OrderNo>
      </order>
      <order>
        <Name>Hansen</Name>
        <P_Id>1</P_Id>
        <OrderNo>24562</OrderNo>
      </order>
      <order>
        <Name>Svendson</Name>
      </order>
      <order>
        <Name>Pettersen</Name>
        <P_Id>3</P_Id>
        <OrderNo>77895</OrderNo>
      </order>
      <order>
        <Name>Pettersen</Name>
        <P_Id>3</P_Id>
        <OrderNo>44678</OrderNo>
      </order>
    </orders> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:32:53.203

使用嵌套的 for-each 执行此操作似乎非常错误：它似乎是递归的候选者。但我很难理解问题的确切性质。x1、x2 等是否每次出现（0 或 1）次？在这种情况下，问题肯定是微不足道的，您不需要 for-each 来迭代单例。

如果您想避免递归、条件代码的冗长，那么是时候迁移到 XSLT 2.0 了。

# html - 右下角倾斜的 CSS 按钮

> ID：15897221
> 
> 赞同：1
> 
> 时间：2013-04-09T08:43:20.317
> 
> 标签：html, css

根据这个小提琴，我正在尝试在右下角实现一个带有透明蒙版的矩形按钮：

[http://jsfiddle.net/c6gUX/](http://jsfiddle.net/c6gUX/)

```
body {
background: #fff;
padding: 5em;
}
.button {
    color: #FFFFFF;
    font-family: 'RalewayRegular', Arial,sans-serif;
    font-size: 1em;
    padding: 0.5em 1.2em 0.5em 0.8em;
    position: relative;
    text-decoration: none;
}
.button:hover {
    background: linear-gradient(to bottom, #FFA13E 0px, #E56204 100%) repeat scroll 0 0 transparent;
    color: #FFFFFF;
}
.button:after {
    background: url(http://i.imgur.com/8Vvw1Sw.png) no-repeat scroll 0 0 transparent;
    bottom: -12px;
    content: " ";
    height: 38px;
    position: absolute;
    right: -12px;
    width: 36px;
    z-index: 99;
}
.orange-grad {
    background: #ffa13e; /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmYTEzZSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZjc4MDUiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZmY3ODA1IiBzdG9wLW9wYWNpdHk9IjEiLz4KICA8L2xpbmVhckdyYWRpZW50PgogIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9InVybCgjZ3JhZC11Y2dnLWdlbmVyYXRlZCkiIC8+Cjwvc3ZnPg==);
    background: -moz-linear-gradient(top,  #ffa13e 0%, #ff7805 100%, #ff7805 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffa13e), color-stop(100%,#ff7805), color-stop(100%,#ff7805)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #ffa13e 0%,#ff7805 100%,#ff7805 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #ffa13e 0%,#ff7805 100%,#ff7805 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #ffa13e 0%,#ff7805 100%,#ff7805 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #ffa13e 0%,#ff7805 100%,#ff7805 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffa13e', endColorstr='#ff7805',GradientType=0 ); /* IE6-8 */
} 
```

正如你所看到的，我已经用一种非常 hacky 的方式实现了它。我没有测试过这个跨浏览器，并怀疑 IE 在没有 :after 等的垫片的情况下把它搞砸了。

我怎样才能实现这种跨浏览器的现代性？叠加到图像上时如何使其工作以使其有效透明？（见下图）

来自PSD：

![在此处输入图像描述](https://i.stack.imgur.com/6wkyR.png)

我对图像的小提琴：

![在此处输入图像描述](https://i.stack.imgur.com/t811C.png)

从逻辑上讲，我知道 IE6/7 将需要一个图像，我对此很满意。

字长。有时按钮没有“阅读更多”，因此需要 100% 宽度的解决方案。

**编辑**

我正在考虑使用雪碧。( [http://i.imgur.com/z0UYpTX.png](https://i.imgur.com/z0UYpTX.png) )

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T09:44:02.920

这很棘手——尤其是在将渐变与斜角相结合的情况下。我能得到的最接近的是[这个小提琴](http://jsfiddle.net/cherryflavourpez/wEQD7/)，它利用 CSS 渐变来实现你所追求的效果，基于 Lea Verou 的[精彩文章](http://lea.verou.me/2011/03/beveled-corners-negative-border-radius-with-css3-gradients/)。

相关的CSS是：

```
.button {    
    background: #ffa13e; /* fallback */
    background: -webkit-linear-gradient(135deg, transparent 10px, #ff7805 10px, #ffa13e 100%);
    background: -moz-linear-gradient(135deg, transparent 10px, #ff7805 10px, #ffa13e 100%);
    background: -o-linear-gradient(135deg, transparent 10px, #ff7805 10px, #ffa13e 100%);
    background: linear-gradient(315deg, transparent 10px, #ff7805 10px, #ffa13e 100%);
} 
```

这是让背景图像显示出来的唯一方法（我知道）。缺点是渐变不是从上到下的线性渐变，而是一个角度。我*认为*不可能结合多个渐变来精确匹配您的视觉效果。但它非常接近：

![渐变斜面效果](https://i.stack.imgur.com/CQQn9.png)

我建议这是渐进增强的完美候选 - 较旧的 IE 将获得纯色背景色，但这是完全可以接受的（即我个人不会费心尝试图像回退）。

**注意：**工作草案和候选推荐之间的梯度语法有很多变化，其中之一是梯度的角度：

![渐变度语法更改](https://i.stack.imgur.com/IeCmF.png)

来自[IE 博客](http://blogs.msdn.com/b/ie/archive/2012/06/25/unprefixed-css3-gradients-in-ie10.aspx)。因此，无前缀版本需要不同的`deg`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:55:37.523

利用它.....我认为这会对你有所帮助..将它与你的图像一起使用..这将解决跨浏览器问题......

[http://jsfiddle.net/Praveen16oct90/2bZAW/1095/](http://jsfiddle.net/Praveen16oct90/2bZAW/1095/)

```
 div {
     width:200px;
     height:80px;
     background: red;
     top:150px;left:100px;
     position: relative;
     }

div:before {
            content: '';
            position: absolute;
            top: 40px; right: 0;
            border-right: 40px solid white;
             border-top: 40px solid red;
             width: 20;
      } 
```

# mysql - 如何在我的文本中编写一个带有未加空格的查询？

> ID：15897226
> 
> 赞同：1
> 
> 时间：2013-04-09T08:43:33.600
> 
> 标签：mysql, sql, content-management-system

我目前正在改进我的 cms 的搜索功能，以便用户可以通过从网页复制和粘贴文本并在数据库中找到它来搜索条目。

查询很简单。它接受搜索词并执行 LIKE '% text here %' 查询。

问题是，我没有得到很多结果并且已经弄清楚了原因。

在 CMS 本身中，从 MS Word 输入的许多文本似乎都是双倍行距的。如

```
"Hello my  name  is James" 
```

但是在前端网站上，它可以正确呈现，带有单个空格，例如：

```
"Hello my name is James" 
```

这意味着我的查询永远不会根据网页上显示的内容获取数据库条目。

有什么建议么？我是否要处理 CMS 中的双空格（那里有这么多 HTML 对我来说似乎很危险！），还是我可以调整我的查询以应对它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:46:17.473

看一眼**[`MySQL REPLACE`](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function%5Freplace)**

> `REPLACE(str,from_str,to_str)`
> 
> 返回字符串 str，其中所有出现的字符串 from_str 都替换为字符串 to_str。 `REPLACE()`搜索 from_str 时执行区分大小写的匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:49:12.947

如果只是造成问题的只有双空格，那么只需

```
replace(columnToSearch,'  ',' ') 
```

在搜索时，或者正如@ManMohan 建议的那样，在首先将数据插入表之前

# string - 提取字符串的第一个（或最后一个）n 个字符

> ID：15897236
> 
> 赞同：101
> 
> 时间：2013-04-09T08:43:51.163
> 
> 标签：string, r

我想提取字符串的第一个（或最后一个）*n 个*字符。这将等效于 Excel`LEFT()`和`RIGHT()`. 一个小例子：

```
# create a string
a <- paste('left', 'right', sep = '')
a
# [1] "leftright" 
```

我想产生`b`一个等于前 4 个字母的字符串`a`：

```
b
# [1] "left" 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-04-09T08:46:49.830

看`?substr`

```
R> substr(a, 1, 4)
[1] "left" 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-04-09T08:48:46.570

该`stringr`包提供的`str_sub`功能比 更容易使用`substr`，特别是如果您想提取字符串的正确部分：

```
R> str_sub("leftright",1,4)
[1] "left"
R> str_sub("leftright",-5,-1)
[1] "right" 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-10-27T15:32:41.803

您可以从 Rbase 包开始轻松获取 Right() 和 Left() 函数：

*   正确的功能

    ```
    right = function (string, char) {
        substr(string,nchar(string)-(char-1),nchar(string))
    } 
    ```

*   左函数

    ```
    left = function (string,char) {
        substr(string,1,char)
    } 
    ```

您可以将这两个自定义函数与 Excel 中的 left() 和 right() 完全相同。希望你会发现它有用

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-02-10T00:05:49.680

使其简单并使用 R 基本功能：

```
# To get the LEFT part:
> substr(a, 1, 4)
[1] "left"
> 
# To get the MIDDLE part:
> substr(a, 3, 7)
[1] "ftrig"
> 
# To get the RIGHT part:
> substr(a, 5, 10)
[1] "right" 
```

该`substr()`功能告诉你在哪里开始和停止`substr(x, start, stop)`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-08-27T11:47:45.047

如果您来自 Microsoft Excel，则以下函数将类似于`LEFT()`、`RIGHT()`和`MID()`函数。

```
 # This counts from the left and then extract n characters

str_left <- function(string, n) {
  substr(string, 1, n)
}

# This counts from the right and then extract n characters

str_right <- function(string, n) {
  substr(string, nchar(string) - (n - 1), nchar(string))
}

# This extract characters from the middle

str_mid <- function(string, from = 2, to = 5){

  substr(string, from, to)
  } 
```

**例子：**

```
x <- "some text in a string"
str_left(x, 4)
[1] "some"

str_right(x, 6)
[1] "string"

str_mid(x, 6, 9)
[1] "text" 
```

# php - 更改货币 Postgresql 的格式

> ID：15897237
> 
> 赞同：1
> 
> 时间：2013-04-09T08:44:03.727
> 
> 标签：php, format, currency

我有一个 Postgre DB，其中一个值是钱（类型，ofc）。当我使用 PHP 进行选择时，该查询的输出采用以下格式：

示例：1.00 欧元

我正在寻找将这种格式更改为另一种格式的方法：

示例：1,00 欧元。

我可以在查询中更改什么以获得最后一个结果？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:49:02.820

如果它像没有货币的数字一样存储在数据库中，您可以使用函数`number_format($x,y,'.','')`

其中 $x 是您的数字 y 是小数分隔符 '.' 后面的数字数量。- 表示小数点分隔符是 . '' - 表示千位之间没有分隔符

所以你只需以你想要的方式格式化你的号码并添加“欧元”符号。

如果它的价格有一个叫做货币格式的函数：

你必须将它与你想要的货币国家的语言环境一起使用。：

`setlocale(LC_MONETARY, 'de_DE'); echo money_format('%.2n', $your_variable);`

这意味着你使用德国货币。'%.2n' 表示您的输出来自 $yourvariable 并且有 2 个小数

以及数字之后或之前的“欧元”符号。这取决于语言环境。我认为斯洛伐克语或西班牙语在数字后有欧元符号。

尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:51:27.120

PHP 中最快的方法是使用 str_replace :)

```
$cash = '€1,00';
$cash = str_replace('€','',$cash) . '€';
echo $cash; 
```

但更好的选择是将您的数据库字段类型更改为某种数字类型，然后在您想要的位置添加“€”符号。

*   您可以在您的 DB SELECT 语句中执行此替换，但我认为最好在您的 PHP 中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:52:54.800

这应该为您提供所需的东西，并且可以灵活地使用所有货币：

```
$value = '$4265';

if (!is_numeric($value[0])) {
    $value = substr($value, 1) . $value[0];    
} 
```

# c# - 在 asp.net 中动态更改登录名

> ID：15897240
> 
> 赞同：0
> 
> 时间：2013-04-09T08:44:12.610
> 
> 标签：c#, asp.net, login, login-name

我把`asp:LoginName`我的母版页文件，

```
<asp:LoginName ID="LoginName1" runat="server" /> 
```

默认显示`asp:LoginName`用户名，
如何显示用户的其他数据，例如电子邮件。我想在`LoggingIn`Event 中编写这个过程。

```
void Login1_LoggingIn(object sender, LoginCancelEventArgs e)
{
 .......
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:30:21.163

```
void Login1_LoggingIn(object sender, LoginCancelEventArgs e)
{
LoginName _loginName = Master.FindControl("LoginName1") as LoginName;
_loginName.FormatString = "User's_Email" ;
} 
```

# c++ - ostream，复制函数打印字符串地址，而不是字符串内容

> ID：15897242
> 
> 赞同：1
> 
> 时间：2013-04-09T08:44:17.620
> 
> 标签：c++, list, iostream

这会打印我的字符串的地址，而不是它的内容，

```
#include <memory>
#include <string>
#include <list>
#include <iostream>
#include <iterator>

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    unique_ptr<list<shared_ptr<string>>> upList (new list<shared_ptr<string>>);
    shared_ptr<string> spNation (new string ("India"));
    upList->push_back (spNation);
    copy (upList->begin(), upList->end(), ostream_iterator<shared_ptr<string>> (cout, "\n "));
    return 0;
} 
```

我的问题是：

1.  什么`ostream_iterator<shared_ptr<string>>`将 shared_ptr 或字符串作为其主要对象。
2.  如何使用这种方法打印实际的字符串内容（即印度）。
3.  这种方法是否优于传统的 for 循环来打印所有节点内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:55:41.913

> 什么`ostream_iterator<shared_ptr<string>>`将 shared_ptr 或字符串作为其主要对象。

您已经为 实例化`ostream_iterator`了`shared_ptr<string>`，所以这就是它将尝试输出的内容。

> 如何使用这种方法打印实际的字符串内容（即印度）。

如果您出于某种原因真的想使用共享指针，那么您不能使用`copy`，因为这不会撤消额外的间接级别。要么使用普通循环，要么摆脱不必要的间接：

```
list<string> list;
list.push_back("India");
copy(list.begin(), list.end(), ostream_iterator<string>(cout, "\n ")); 
```

当然，如果没有所有的箭头、模板、新表达式和伪匈牙利疣，它看起来并不那么令人兴奋，但是任何试图维护代码的人都不会感谢您添加这些装饰。

> 这种方法是否优于传统的 for 循环来打印所有节点内容

当它使代码更简单时更可取。当它没有时，它不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:46:08.987

首先：为什么你使用`shared_ptr<string>`而不是`string`这里？你不应该这样做。

1)

```
shared_ptr<string> 
```

2)`std::for_each`与 lambda (or `range-based for loop`)一起使用

```
for_each(upList->begin(), upList->end(), [](const shared_ptr<string>& p)
{
   cout << *p << endl;
}); 
```

或者

```
for (const auto& p : upList)
{
   std::cout << *p << std::endl;
} 
```

# sdk - 如何使用 kinect sdk 跟踪头部位置和旋转？

> ID：15897245
> 
> 赞同：0
> 
> 时间：2013-04-09T08:44:35.350
> 
> 标签：sdk, rotation, position, kinect, head

我想知道如何使用 kinect sdk 跟踪头部位置和旋转！可能吗？如果是怎么办？

那么跟踪整个身体旋转呢？（y轴）

请 c# 代码将不胜感激;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T09:16:30.160

**Absolutely Kinect SDK 使用Face Tracking**提供针对 X、Y 和 Z 轴的头部旋转。

*   在**OnFrameReady**方法中，请以 Kinect Sensor 为参数构造 FaceTracker 对象。

> `this.faceTracker = new FaceTracker(kinectSensor);`

*   **使用 facetracker 的.Track()**方法创建 FaceTrackFrame**对象**。

> ```
> FaceTrackFrame frame = this.faceTracker.Track(colorImageFormat, colorImage, depthImageFormat, depthImage, skeletonOfInterest); 
> ```

*   获取 X、Y、Z 头部旋转轴：

> 浮动 yRotation = frame.Rotation.Y;
> 
> 浮动 xRotation = frame.Rotation.X;
> 
> 浮动 zRotation = frame.Rotation.Z;

仅供参考关于使用面部跟踪的头部旋转，这里是文档：http: [//msdn.microsoft.com/en-us/library/jj130970.aspx](http://msdn.microsoft.com/en-us/library/jj130970.aspx)

关于身体旋转，我还没有尝试过任何实验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T13:59:00.047

据我所知，没有办法跟踪旋转。你可以这样做的最好方法是比较左肩和右肩，或左髋和右髋，并确定每个 Z 轴，看看哪个更接近，然后你可以了解身体的哪个方向被旋转。

# html - 浏览器调整大小时位置绝对变化的元素

> ID：15897247
> 
> 赞同：0
> 
> 时间：2013-04-09T08:44:42.190
> 
> 标签：html, css

当我重新调整浏览器的大小时，位置设置为绝对的元素不会根据其他元素而改变。如果我将绝对 div 放在相对内部，则不会显示黑框。

```
<div id="outer"></div>
<div id="blackbox"></div>
<div class="form"></div> 

#outer{
    width:1250px;
    height:auto;
    margin:auto;
    position:relative;
}
#blackbox{
    width:100%;
    height:100%;
    background:#000;
    opacity:0.5;
    position:absolute;
    z-index:10;
    left:0;
    top:0;
}
.form{
    width:500px;
    height:350px;
    z-index:20;
    background:#FFF;
    position:absolute;
    top:100;
    left:400;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:46:38.537

**习惯了这个**

```
<div id="outer">
<div class="blackbox"></div>
<div class="form"></div> 

</div> 
```

定义**为父 div** `position relative`和**子 div** `position absolute`

**[现场演示](http://jsfiddle.net/WfHc4/)**

**[更多关于职位](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:52:11.467

绝对和相对定位是相对于“包含块”的

绝对块相对于它们的“包含块”放置。他们为他们的孩子定义了一个新的“包含块”。

相对块相对于它们的流入位置放置。他们还为他们的孩子定义了一个新的“包含块”。

因此，当您将绝对块 X 放置在相对块 Y 中时，您是在说“将 Y 放入页面流中，稍微移动它一点，然后将 X 相对于 Y 的新位置固定”。

查看代码 - 您已设置`outer`高度为`auto`并且`blackbox`高度为`100%`。所以父母的身高以孩子的身高为准，孩子的身高以父母的身高为准！所以他们崩溃到0px。这就是为什么你没有看到`blackbox`。[试着`#outer {height: 1250px;}`看东西...](http://jsfiddle.net/dr3daemon/4uhgz/)

希望有所帮助，如果没有，请阅读规范 - 这始终是所有这些问题的最终答案（这就是我学习 CSS 的方式）！

[http://www.w3.org/TR/CSS2/visuren.html](http://www.w3.org/TR/CSS2/visuren.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:50:22.053

您的 CSS 中有错字。从 更改`#blackbox`为`.blackbox`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T08:55:53.140

```
<div id="outer">
 <div class="blackbox"></div>
 <div class="form"></div> 
</div>

#blackbox -> wrong 
```

使用 .blackbox { }

还要记住，绝对定位元素必须始终在相对定位元素内

# javascript - jQuery 不旋转图像

> ID：15897255
> 
> 赞同：0
> 
> 时间：2013-04-09T08:45:00.797
> 
> 标签：javascript, jquery, sharepoint

我正在尝试使用 datalist 从列表中获取图像 >>> 和 jQuery 来旋转此图像，但 jQuery 不旋转图像....任何人都可以告诉我我的代码有什么问题

```
<script type="text/javascript">
var activeNewItem = 0;
        $(function () {
            var totalItems = $("#MyRotator LI").length;
            $("#MyRotator LI").hide();
            $("#MyRotator LI::nth-child(" + ((activeNewItem++ % totalItems) + 1) + ")").show();
            setTimeout('RotateWhatsNew()', 5000); //30000
        });       
</script>
<asp:DataList id="rotator"  bordercolor="Black" cellpadding="2" 
    headerstyle-backcolor="DarkBlue" 
    headerstyle-forecolor="Yellow" repeatcolumns="1"    
    runat="server" Height="179px" Width="168px">  
<HeaderStyle BackColor="DarkBlue" ForeColor="Yellow"></HeaderStyle>
<ItemTemplate>
<div id="MyRotator">
        <ul type="none">
<li style='padding: 3px; list-style: none; width: 200px; word-wrap: break-word; display: none'>

                    <img  Id="Image"   height='90%' width='90%' src='<%=siteurl%>/<%# DataBinder.Eval(Container.DataItem,"ThumbnailOnForm")%>'/> 
             </li>
</ul>
    </div>
</ItemTemplate>
</asp:DataList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:59:34.180

如果你想为特定角度旋转 div 意味着试试这个 css

```
-moz-transform: rotate(344deg);
-o-transform: rotate(344deg);
filter: progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',
M11=0.9396926207859084, M12=0.3420201433256687, M21=-0.3420201433256687,
M22=0.9396926207859084); /* IE6,IE7 */
-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', 
M11=0.9396926207859084, M12=0.3420201433256687, M21=-0.3420201433256687, 
M22=0.9396926207859084)"; /* IE8 */
writing-mode: lr-tb;"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:36:49.427

在谷歌搜索此“RotateWhatsNew”功能后，结果让我认为您不想物理旋转图像，而只是隐藏列表项并仅显示新项。

我认为代码应该看起来更像这样：

```
<script type="text/javascript">
    var activeNewItem = 0,
        waitTime = 5000;

    function RotateWhatsNew() {
        var totalItems = $("#MyRotator li").length;
        $("#MyRotator li").hide();
        $("#MyRotator li:nth-child(" + ((activeNewItem++ % totalItems) + 1) + ")").show();
        setTimeout(RotateWhatsNew, waitTime);
    };  

    $(function() {
      setTimeout(RotateWhatsNew, waitTime);
    });     
</script> 
```

这有帮助吗？我可能误解了你。除非列表每 5 秒添加一次新项目，否则我看不到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T06:04:12.700

```
jQuery code to fade images in throughout a sequence
$(document).ready(function () {
    $('#BannerSlideshow').innerfade({
        speed: 2500,
        timeout: 7000,
        type: 'sequence',
        containerheight: '300px'
    });

Example of the list of images
<ul id="BannerSlideshow" style="list-style-type: none;">
    <li><img src="SiteImages/HeaderBackgrounds/HeaderBackground1.png" alt="" /></li>
    <li><img src="SiteImages/HeaderBackgrounds/HeaderBackground2.png" alt="" /></li>
    <li><img src="SiteImages/HeaderBackgrounds/HeaderBackground3.png" alt="" /></li>
    <li><img src="SiteImages/HeaderBackgrounds/HeaderBackground4.png" alt="" /></li>
    <li><img src="SiteImages/HeaderBackgrounds/HeaderBackground5.png" alt="" /></li>
    <li><img src="SiteImages/HeaderBackgrounds/HeaderBackground6.png" alt="" /></li>
</ul> 
```

# java - 使用 Java 编辑 PDF 中的矩形框

> ID：15897262
> 
> 赞同：0
> 
> 时间：2013-04-09T08:45:15.057
> 
> 标签：java, pdf, itext

是否可以使用 Java 编辑现有的 PDF 内容？我正在尝试 iText，但我没有找到有关如何移动对象或更改其 z-Pos 的任何线索。

案例：我在现有 PDF 上有裁剪标记。我们使用 iText 添加压模，但它们位于顶部位置（z-index）。现在我们需要访问裁剪标记矩形并将它们放在顶层位置。

这怎么可能？

最佳马塞尔

# php - PHP + PDF，如何使用 curl 保存下载的 PDF？

> ID：15897264
> 
> 赞同：7
> 
> 时间：2013-04-09T08:45:20.223
> 
> 标签：php, pdf, curl, header, save

欢迎

我在页面上保存下载的pdf有一点问题。要下载 pdf，我使用 Curl：

```
$CurlConnect = curl_init();
curl_setopt($CurlConnect, CURLOPT_URL, 'http://website.com/invoices/download/1');
curl_setopt($CurlConnect, CURLOPT_POST,   1);
curl_setopt($CurlConnect, CURLOPT_RETURNTRANSFER, 1 );
curl_setopt($CurlConnect, CURLOPT_POSTFIELDS, $request);
curl_setopt($CurlConnect, CURLOPT_USERPWD, $login.':'.$password);
$Result = curl_exec($CurlConnect); 
```

现在在**$Result** (string) 我有所有的 PDF 文件内容。现在开始我的问题。我想保存下载的pdf：

```
header('Cache-Control: public'); 
header('Content-type: application/pdf');
header('Content-Disposition: attachment; filename="new.pdf"');
header('Content-Length: '.filesize($Result));
readfile($Result); 
```

不幸的是，当我保存或打开一个新的 PDF 文件时，我得到一个空白文档。也许问题出在最后几行：

```
header('Content-Length: '.filesize($Result));
readfile($Result); 
```

不幸的是，我不知道如何改变它们以使其工作......我请求你的帮助。谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-09T09:08:54.710

[filesize](http://www.php.net/manual/en/function.filesize.php)和[readfile](http://www.php.net/manual/en/function.readfile.php)都接受文件作为参数。您提供的是字符串而不是文件。

请试试这个。

```
$CurlConnect = curl_init();
curl_setopt($CurlConnect, CURLOPT_URL, 'http://website.com/invoices/download/1');
curl_setopt($CurlConnect, CURLOPT_POST,   1);
curl_setopt($CurlConnect, CURLOPT_RETURNTRANSFER, 1 );
curl_setopt($CurlConnect, CURLOPT_POSTFIELDS, $request);
curl_setopt($CurlConnect, CURLOPT_USERPWD, $login.':'.$password);
$Result = curl_exec($CurlConnect);

header('Cache-Control: public'); 
header('Content-type: application/pdf');
header('Content-Disposition: attachment; filename="new.pdf"');
header('Content-Length: '.strlen($Result));
echo $Result; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:54:14.653

也许是：

```
// ...
$Result = curl_exec($CurlConnect);
$file = 'file.pdf';
$fileName = 'fileName.pdf';
file_put_contents($file, $Result); 
```

然后：

```
header('Content-type: application/pdf');
header('Content-Disposition: inline; filename="' . $filename . '"');
header('Content-Transfer-Encoding: binary');
header('Content-Length: ' . filesize($file));
header('Accept-Ranges: bytes');

readfile($file); 
```

我希望我有所帮助！

# php - 使用 PHP 编辑 CronTab 是否安全？

> ID：15897267
> 
> 赞同：1
> 
> 时间：2013-04-09T08:45:24.530
> 
> 标签：php, security, cron, crontab, cron-task

我正在构建一个脚本，这要归功于[这个 tuts](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)从使用 php 制作的网站的管理部分附加和删除 cronjob。

在服务器上实现它是否安全？可能是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:03:02.840

也许是：

crontab (fe) 中的脚本列表：

```
#script1
#script2
#script3 
```

我正在从 crontab 中删除脚本：

```
crontab -l | grep -v "#script1" > crontab.txt && crontab crontab.txt 
```

编辑后 crontab 中的脚本列表：

```
#script2
#script3 
```

`crontab -l | grep -v "#script1" > crontab.txt && crontab crontab.txt`您可以从`exec()`函数运行的命令。

我希望我有所帮助。

# python - 在 64 位 Windows 上进行 Python 32 位开发

> ID：15897268
> 
> 赞同：4
> 
> 时间：2013-04-09T08:45:25.347
> 
> 标签：python, windows

是否可以在 Windows 7/8 64 位上安装 32 位 Python（2.7 系列）来开发 32 位应用程序？我确定答案是肯定的，但最好得到确认。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T08:57:30.813

您几乎可以在 64 位 Windows 上安装任何 32 位软件，因为它具有内置的 32 位仿真器。

如果您要使用 32 位 Python，请确保您使用的所有库也是 32 位的。

# linux - 似乎缺少 libgc（安装 Virtuoso-Opensource 并支持 Mono）

> ID：15897270
> 
> 赞同：2
> 
> 时间：2013-04-09T08:45:33.490
> 
> 标签：linux, mono, makefile, virtuoso

完成后我正在构建 Virtuoso Opensource `./configure --enable_mono`- 工作正常。然后调用`make`给我一个错误，因为`libgc`没有找到。

```
make[2]: Entering directory `/usr/local/src/virtuoso-opensource/libsrc/Thread'
/bin/bash ../../libtool  --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I../../libsrc/Dk    -fno-strict-aliasing -O2  -DMONO_USE_EXC_TABLES -fexceptions -D_REENTRANT -D_GNU_SOURCE -Wall  -DNDEBUG -DPOINTER_64   -I/usr/local/src/virtuoso-opensource/libsrc/Xml.new  -DOPENSSL_NO_KRB5 -Dlinux -D_GNU_SOURCE -DFILE64 -D_LARGEFILE64_SOURCE -I../../binsrc/mono/mono-1.1.7/libgc/include -I../../libsrc -I../../libsrc/Dk -DNO_UDBC_SDK -DUSE_INCLUDED_LIBGC=1 -g -O2 -MT libthrp_gc_la-sched_pthread_gc.lo -MD -MP -MF .deps/libthrp_gc_la-sched_pthread_gc.Tpo -c -o libthrp_gc_la-sched_pthread_gc.lo `test -f 'sched_pthread_gc.c' || echo './'`sched_pthread_gc.c
libtool: compile:  gcc -DHAVE_CONFIG_H -I. -I../../libsrc/Dk -fno-strict-aliasing -O2 -DMONO_USE_EXC_TABLES -fexceptions -D_REENTRANT -D_GNU_SOURCE -Wall -DNDEBUG -DPOINTER_64 -I/usr/local/src/virtuoso-opensource/libsrc/Xml.new -DOPENSSL_NO_KRB5 -Dlinux -D_GNU_SOURCE -DFILE64 -D_LARGEFILE64_SOURCE -I../../binsrc/mono/mono-1.1.7/libgc/include -I../../libsrc -I../../libsrc/Dk -DNO_UDBC_SDK -DUSE_INCLUDED_LIBGC=1 -g -O2 -MT libthrp_gc_la-sched_pthread_gc.lo -MD -MP -MF .deps/libthrp_gc_la-sched_pthread_gc.Tpo -c sched_pthread_gc.c  -fPIC -DPIC -o .libs/libthrp_gc_la-sched_pthread_gc.o
sched_pthread_gc.c:41:16: fatal error: gc.h: No such file or directory
compilation terminated.
make[2]: *** [libthrp_gc_la-sched_pthread_gc.lo] Error 1
make[2]: Leaving directory `/usr/local/src/virtuoso-opensource/libsrc/Thread'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/usr/local/src/virtuoso-opensource/libsrc'
make: *** [all-recursive] Error 1
dellas@india672:/usr/local/src/virtuoso-opensource$ 
```

我只是做了`sudo apt-get install libgc-dev`哪些工作。Make 仍然给我同样的错误。我是 Linux 菜鸟，有人可以给我建议这里可能是什么问题或如何解决它？

编辑：仅供参考：`ldconfig -v -p`明确表示`libgc.so`存在，那么为什么这个`make`脚本要寻找标题？

```
...
libgdbm_compat.so.3 (libc6,x86-64) => /usr/lib/x86_64-linux-gnu/libgdbm_compat.so.3
libgdbm.so.3 (libc6,x86-64) => /usr/lib/x86_64-linux-gnu/libgdbm.so.3
libgd.so.2 (libc6,x86-64) => /usr/lib/x86_64-linux-gnu/libgd.so.2
libgcrypt.so.11 (libc6,x86-64) => /lib/x86_64-linux-gnu/libgcrypt.so.11
libgccpp.so.1 (libc6,x86-64) => /usr/lib/libgccpp.so.1
libgccpp.so (libc6,x86-64) => /usr/lib/libgccpp.so
libgcc_s.so.1 (libc6,x86-64) => /lib/x86_64-linux-gnu/libgcc_s.so.1
libgc.so.1 (libc6,x86-64) => /usr/lib/libgc.so.1
libgc.so (libc6,x86-64) => /usr/lib/libgc.so
libgamin-1.so.0 (libc6,x86-64) => /usr/lib/libgamin-1.so.0
libgailutil.so.18 (libc6,x86-64) => /usr/lib/x86_64-linux-gnu/libgailutil.so.18
libfuse.so.2 (libc6,x86-64) => /lib/libfuse.so.2
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:31:23.037

您应该检查`libgc-dev`包裹提供的内容。`/usr/include`调用中一般有一个兼容性文件`gc.h`，其唯一目的是为了`#include <gc/gc.h>`. 您的发行版可能没有此文件，这会导致编译问题。

要检查 的内容`libgc-dev`，请执行以下操作：

```
dpkg-query -L libgc-dev 
```

这将列出此包提供的所有文件。如果它不包含`/usr/include/gc.h`，那么您可能需要将 更改`#include`为 read `#include <gc/gc.h>`，或将 makefile 更改为 add: `-I/usr/include/gc`。`-I`作为最后的手段，我会更改选项。

作为替代方案，您可以在`/usr/include`调用中添加一个`gc.h`包含简单内容的文件：

```
/* This file is installed for backward compatibility. */
#include <gc/gc.h> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:29:54.990

Virtuoso 单声道主机支持适用于 1.x 版本，不适用于当前的 2.x 及更高版本，需要计划添加支持...

Is 是您正在寻求的特定单声道运行时支持，或者可能只是 Mono 的 ADO.Net 提供程序，可以使用以下方式构建：

```
cd binsrc/VirtuosoClient.Net
gmake -f Makefile.mono 
```

最好的问候休·威廉姆斯

# wpf - WPF Canvas，接受鼠标滚轮事件

> ID：15897275
> 
> 赞同：2
> 
> 时间：2013-04-09T08:45:42.127
> 
> 标签：wpf, canvas, mousewheel

我有一个`CanvasControl`画地平面的习惯。`Canvas`我给它本身添加了一个新的`CanvasControl`东西，这就是我所绘制的。我还设置了`MouseWheel`事件。

```
Canvas drawingCanvas = new Canvas();
this.Children.Insert(0, drawingCanvas);
MouseWheel += new MouseWheelEventHandler(Groundplane_MouseWheel); 
```

许多元素被吸引`drawingCanvas`但从未改变（除了缩放修改），这意味着我想设置`IsHitTestVisible = false`以提高性能（增益很大），同时仍然接受本身`MouseWheel`的事件。`CanvasControl`不幸的是，当我这样做时，我失去了使用`MouseWheel`. 有什么我想念的吗？

```
drawingCanvas.IsHitTestVisible = false; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T09:30:56.453

为了直接在顶层 Canvas 上获取输入事件，您必须设置其`Background`属性，例如`Transparent`：

```
Background = Brushes.Transparent;
MouseWheel += Groundplane_MouseWheel; 
```

# string - 将字符串的一部分提取到bash中的变量

> ID：15897276
> 
> 赞同：16
> 
> 时间：2013-04-09T08:45:43.183
> 
> 标签：string, bash, sed, find, extract

菜鸟在这里，对不起，如果重新发布。我正在从文件中提取一个字符串，并以一行结尾，例如：

```
abcdefg:12345:67890:abcde:12345:abcde 
```

假设它在一个名为 testString 的变量中，冒号之间的值的长度不是恒定的，但是我想将数字（因为字符串很好）保存到第二个和第三个冒号之间的变量中。所以在这种情况下，我最终会得到我的新变量，我们称它为 extractNum，即 67890 。我认为我必须使用 sed 但从未使用过它并试图解决它......有人可以帮忙吗？干杯

在旁注中，我使用 find 通过搜索第一个字符串（在本例中为 abcdefg 部分）从字符串中提取整行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-09T09:42:04.900

使用数组的纯 Bash：

```
testString="abcdefg:12345:67890:abcde:12345:abcde"
IFS=':'
array=( $testString )
echo "value = ${array[2]}" 
```

输出：

```
value = 67890 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-09T14:01:18.390

这是另一种纯粹的 bash 方式。当您的输入相当一致并且您在选择哪个部分时不需要太大的灵活性时工作正常。

```
extractedNum="${testString#*:}"     # Remove through first :
extractedNum="${extractedNum#*:}"   # Remove through second :
extractedNum="${extractedNum%%:*}"  # Remove from next : to end of string 
```

您还可以在读取文件时过滤文件，例如在 while 循环中：

```
while IFS=' ' read -r col line ; do
    # col has the column you wanted, line has the whole line
    # # #
done < <(sed -e 's/\([^:]*:\)\{2\}\([^:]*\).*/\2 &/' "yourfile") 
```

sed 命令选择第二列并用空格将该值与整行分隔。如果您不需要整行，只需从替换中删除空格+& 并从读取中删除 line 变量。您可以通过更改 \{2\} 位中的数字来选择任何列。（如果要在此处使用变量，请将命令放在双引号中。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-09T08:47:40.653

你可以用`cut`这种东西。干得好：

```
VAR=$(echo abcdefg:12345:67890:abcde:12345:abcde |cut -d":" -f3); echo $VAR 
```

为了它的乐趣，这就是我会（不）这样做`sed`的方式，但我相信有更简单的方法。我想这对未来的读者来说是我自己的问题；）

```
echo abcdefg:12345:67890:abcde:12345:abcde |sed -e "s/[^:]*:[^:]*:\([^:]*\):.*/\1/" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T08:53:13.297

这应该对你有用：关键部分是`awk -F: '$0=$3'`

```
NewVar=$(getTheLineSomehow...|awk -F: '$0=$3') 
```

例子：

```
kent$  newVar=$(echo "abcdefg:12345:67890:abcde:12345:abcde"|awk -F: '$0=$3')

kent$  echo $newVar 
67890 
```

如果您的文本存储在 var 中`testString`，您可以：

```
kent$  echo $testString                                                                                                                                                     
abcdefg:12345:67890:abcde:12345:abcde
kent$  newVar=$(awk -F: '$0=$3' <<<"$testString")
kent$  echo $newVar                                                                                                                                                         
67890 
```

# c - 在 C 中使用指针表示法迭代双指针

> ID：15897284
> 
> 赞同：-8
> 
> 时间：2013-04-09T08:46:07.330
> 
> 标签：c, pointers, memory

如果我有一个指向此示例中变量“bs”之类的指针的指针：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char **argv)
{
    char **bs = {"this", "is", "a", "test"};

    puts(bs);

    return 0;
} 
```

puts 语句在屏幕上显示“this”。我将如何让它显示“是”等等。我虽然我可以做类似的事情：

```
puts(bs+1); 
```

将数字添加到指针变量实际上有什么作用？它是指向下一个地址，还是考虑指针的类型并使用它指向的变量的大小来确定下一个变量在内存中的起始位置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T13:22:08.273

> puts 语句在屏幕上显示“this”。

这只是（坏）运气，如果编译器根本不拒绝编译它，代码会调用未定义的行为。

clang（默认情况下）对代码产生的警告是

```
$ clang badpoint.c 
badpoint.c:6:18: warning: incompatible pointer types initializing 'char **' with an
      expression of type 'char [5]' [-Wincompatible-pointer-types]
    char **bs = {"this", "is", "a", "test"};
                 ^~~~~~
badpoint.c:6:26: warning: excess elements in scalar initializer                          
    char **bs = {"this", "is", "a", "test"};
                         ^~~~
badpoint.c:8:10: warning: incompatible pointer types passing 'char **' to parameter of   
      type 'const char *'dereference with * [-Wincompatible-pointer-types]
    puts(bs);
         ^~
         *                                                                               
/usr/include/stdio.h:688:32: note: passing argument to parameter '__s' here              
extern int puts (__const char *__s);
                               ^
3 warnings generated. 
```

gcc 为每个多余的初始化器生成一个警告，而 clang 只为三个中的第一个给出一个警告，否则来自 gcc 的警告（也是默认情况下）信息量少一些，但相同。

发生什么了？

您正在尝试初始化一个标量 ( `char**`)，并提供一个包含四个*初始化程序*‍s`{"this", "is", "a", "test"}`的大括号括起来的*初始化程序列表。*每 6.7.9 (11)

 *> 标量的初始值设定项应为单个表达式，可选择用大括号括起来。对象的初始值是表达式的初始值（转换后）；应用与简单赋值相同的类型约束和转换，将标量的类型作为其声明类型的非限定版本。

这违反了“应”要求，因此会调用未定义的行为。

如果编译器没有在那里终止翻译，它可能只是忽略多余的初始化程序 - clang 和 gcc 都这样做 - 并将声明视为

```
char **bs = "this"; 
```

这会导致有关从不兼容类型初始化的警告，因为它试图`char**`用 a初始化 a `char[5]`，但根据 6.5.16.1，初始化程序的类型必须与 兼容`char**`。

然而，如果编译器成功地翻译了程序，它很可能导致在字符串文字中`bs`包含第一个地址（数组被转换为指向赋值运算符右侧第一个元素的指针）。`char``"this"`

然后打电话

```
puts(bs) 
```

`char**`将错误类型 ( )的指针传递给`puts`，这是违反约束的，需要来自编译器的诊断消息（并使程序无效）。

但是指针恰好包含正确的地址，并且未定义的行为表现为程序打印`"this"`。

> 我将如何让它显示“是”等等

通过修正程序。实际上，字符串`"is"`、`"a"`和`"test"`甚至不会出现在 gcc 或 clang 生成的目标文件中。

纠正它的一种方法是将声明更改为

```
char *bs[] = {"this", "is", "a", "test"}; 
```

所以这`bs`是一个由四个组成的数组`char*`，指向四个字符串的（各自的第一个元素）。

然后你必须调整调用`puts`，取消引用或下标`bs`，

```
puts(bs[0]); 
```

打印`"this"`；

```
for(int i = 0; i < 4; ++i) {
    puts(bs[i]);
} 
```

在单独的行上打印所有四个字符串。*

# php - 处理 CodeIgniter 路由错误？

> ID：15897287
> 
> 赞同：0
> 
> 时间：2013-04-09T08:46:10.613
> 
> 标签：php, codeigniter

我有一个非常简单的路由规则，用于将路由配置文件放入 CodeIgniter 中。

```
$route['building/(:num)'] = 'building/$1'; 
```

路由规则工作得很好，没有问题我发现的唯一问题是，当将变量传递给参数时，它会显示此错误消息

```
An Error Was Encountered

The URI you submitted has disallowed characters. 
```

我知道我的规则告诉 CodeIgniter 只接受数字作为参数，但是如果参数错误，我需要这样做，它必须重定向到另一个定义的页面或 url 而不是显示此错误。
我不知道是否可以通过配置文件来做到这一点，或者我应该写一个控制器来做到这一点
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:56:54.003

路由从不清理或错误检查 URI，它们只是为了匹配一个模式。生成错误是因为 URI 中的某些字符在 中的`$config['permitted_uri_chars']`设置中不存在`application/config/config.php`，然后由`_filter_uri()`方法中的 URI 类检查。

在不知道您尝试使用的变量是什么样子的情况下（它显然具有对 URI 不友好的字符），我建议在尝试在您的 URL 中使用它们之前验证和清理这些变量。**特别是**如果它们是用户生成的。不要相信人。曾经。

您的一些选择包括：

1.  清理/检查变量的值以查看它是否包含不应出现在 URI 中的字符。默认配置设置几乎是 URI 字符的规范（尽管其他一些字符也是允许的），所以如果可能的话，我会尽量坚持这一点（特别是如果你不知道自己在做什么）。

2.  更改您的`permitted_uri_chars`列表以包含其他字符（不推荐，请参阅#1）。

3.  扩展 URI 类并替换/修改`_filter_uri()`方法，将`show_error()`部分替换为重定向或其他代码以满足您的需要。也不是很推荐，因为库不应该控制您的重定向。

# angularjs - Angular js：$http 和 $resource 有什么区别

> ID：15897289
> 
> 赞同：10
> 
> 时间：2013-04-09T08:46:12.310
> 
> 标签：angularjs

我需要更好地理解 $http 和 $resource 之间的区别以及何时使用它们

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T08:48:11.780

从`$resource`文档：

> 创建资源对象的工厂，可让您与 RESTful 服务器端数据源进行交互。
> 
> 返回的资源对象具有提供高级行为而不需要与低级 $http 服务交互的操作方法。

`$resource`是比 更高级别的服务`$http`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-18T00:47:29.253

$resource 建立在 $http 之上。

$http 是普通的 ajax，它可以用于任何形式的 web 服务。

$resource 专门用于 RESTful 服务。

有关此的更多详细信息

[AngularJS $http 和 $resource](https://stackoverflow.com/questions/13181406/angularjs-http-and-resource)

# proxy - 谷歌从一个名为 1e100 的域中杀死我的 Squid 服务器

> ID：15897290
> 
> 赞同：0
> 
> 时间：2013-04-09T08:46:14.227
> 
> 标签：proxy, squid, ubuntu-server

我在 VPS 中设置了 Squid，并设法将其配置为透明代理，但在从 Google 访问任何内容时遇到了问题。

事实证明，有一个属于 Google (1e100) 的域，它维护着与我的 VPS 的持久连接（有时多达 12 个来自 1e100 域后面的各种主机名的连接）

这导致我的搜索速度很慢，而且我经常会得到一个谷歌页面，说我的机器可能正在发送自动查询并且它无法处理我的搜索。很多时候，我还会收到一条消息，说连接已重置。请记住，Bing 工作得很好，没有同样的缓慢

我应该注意，我是唯一使用服务器的人，并且只有我自己能够连接，因为 Squid 在内部网络上侦听。

有什么建议么？

# android - Asynctask 配置发送特定参数

> ID：15897293
> 
> 赞同：0
> 
> 时间：2013-04-09T08:46:23.990
> 
> 标签：android, parameters, android-asynctask

我遇到了异常问题`NetworkOnMainThreadException`。

所以我必须为 asynctask 提供一个函数，问题是我必须发送两个参数，这两个参数与发送和接收它们不同。

这些是需要发送的参数，所以 asynctask 接收它们

```
TypedArray array
Boolean true

public void SetImages(TypedArray array){
   SetImages(array, true); // OLD CALL
   new task().execute   // NEW CALL
} 
```

这是我需要带到 asynctask 的代码

```
public void SetImages(TypedArray array, boolean reflected){

    final int reflectionGap = 4;

//          Drawable[] drawables = new Drawable[array.length()];
//          mImages = new CarouselImageView[array.length()];
    mImages = new CarouselImageView[MainActivity.aL_home.size()];
    Log.e("TAG", "SIZE OF: "+MainActivity.aL_home.size());
    for(int i = 0; i< MainActivity.aL_home.size(); i++)
    {
        try {
            Log.e("TAG","url: "+MainActivity.aL_home.get(i).getUrl_imagen());
//              drawables[i] = array.getDrawable(i);
//              Bitmap originalImage = ((BitmapDrawable)drawables[i]).getBitmap();
            Bitmap originalImage = BitmapFactory.decodeStream((InputStream)new URL(MainActivity.aL_home.get(i).getUrl_imagen()).getContent());
            if(reflected){
                int width = originalImage.getWidth();
                int height = originalImage.getHeight();

                // This will not scale but will flip on the Y axis
                Matrix matrix = new Matrix();
                matrix.preScale(1, -1);

                // Create a Bitmap with the flip matrix applied to it.
                // We only want the bottom half of the image
                Bitmap reflectionImage = Bitmap.createBitmap(originalImage, 0,
                        height / 2, width, height / 2, matrix, false);

                // Create a new bitmap with same width but taller to fit
                // reflection
                Bitmap bitmapWithReflection = Bitmap.createBitmap(width,
                        (height + height / 2), Config.ARGB_8888);

                // Create a new Canvas with the bitmap that's big enough for
                // the image plus gap plus reflection
                Canvas canvas = new Canvas(bitmapWithReflection);
                // Draw in the original image
                canvas.drawBitmap(originalImage, 0, 0, null);
                // Draw in the gap
                Paint deafaultPaint = new Paint();
                canvas.drawRect(0, height, width, height + reflectionGap,
                        deafaultPaint);
                // Draw in the reflection
                canvas.drawBitmap(reflectionImage, 0, height + reflectionGap,
                        null);

                // Create a shader that is a linear gradient that covers the
                // reflection
                Paint paint = new Paint();
                LinearGradient shader = new LinearGradient(0,
                        originalImage.getHeight(), 0,
                        bitmapWithReflection.getHeight() + reflectionGap,
                        0x70ffffff, 0x00ffffff, TileMode.CLAMP);
                // Set the paint to use this shader (linear gradient)
                paint.setShader(shader);
                // Set the Transfer mode to be porter duff and destination in
                paint.setXfermode(new PorterDuffXfermode(Mode.DST_IN));
                // Draw a rectangle using the paint with our linear gradient
                canvas.drawRect(0, height, width,
                        bitmapWithReflection.getHeight() + reflectionGap, paint);

                originalImage = bitmapWithReflection;
            }

            CarouselImageView imageView = new CarouselImageView(mContext);
            imageView.setImageBitmap(originalImage);
            imageView.setIndex(i);

            ////////imageView.setLayoutParams(new CarouselOld.LayoutParams(120, 180));
            ////////imageView.setScaleType(ScaleType.MATRIX);
            mImages[i] = imageView;
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:54:54.637

> NetworkOnMainThreadException

如果您尝试从与 Main(UI) 线程不同步的后台线程操作和更改 UI，则会引发这种异常。

AsyncTask 提供了一些可以更新 UI 的方法：

*   预执行
*   onProgressUpdate
*   后执行

并且您应该只在提到的方法中执行任何 UI 更新。

> 这是我需要带到 asynctask 的代码

因此，将您的方法移动到 AsyncTask 类并通过 AsyncTask 的构造函数传递所需的参数（TypedArray 和 Boolean），即

```
Task task = new Task(arr, boolVariable);
task.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:53:18.280

我认为，您仍然在主线程上调用网络代码。很可能，忘记评论一些东西。

请参阅 [如何修复 android.os.NetworkOnMainThreadException？](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:55:59.947

所以问题是如何将参数传递给AsyncTask？

格式是

```
private class MyTask extends AsyncTask<Params, Progress, Result> { ... } 
```

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

所以你可以定义你的 AsyncTask 像

```
private class SetImagesTask extends AsyncTask<TypedArray, Void, Void> { 
    protected Void doInBackground(TypedArray... typedArrays) {
        TypedArray array = typedArrays[0];
        ...
    }
    ...
} 
```

并称它为

```
new SetImagesTask.execute(array); 
```

对于布尔值，您可以使用主类字段或静态变量，因此您可以在执行（数组）之前设置它。或者，您可以将布尔值包装到第二个 TypedArray 中，并传递它们的数组，如 execute(new TypedArray[] {array, booleanArray});

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T08:56:13.907

NetworkOnMainThread 发生异常是因为您正在主 UI 线程上运行与网络相关的操作。这仅针对针对 Honeycomb SDK 或更高版本的应用程序抛出

[http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

您应该使用异步任务。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

在 onCreate()

```
new TheTask().execute(); 
```

**您还可以将 url 等参数传递给 AsyncTask 的构造函数，并在 doInBackground() 中使用相同的参数**

```
class TheTask extends AsyncTask<Void,Void,Void>
{
 protected void onPreExecute()
{           super.onPreExecute();
        //display progressdialog.
} 

protected void doInBackground(Void ...params)//return result here
{  
    //http request. do not update ui here

    return null;
} 

protected void onPostExecute(Void result)//result of doInBackground is passed a parameter
{     
        super.onPostExecute(result);
        //dismiss progressdialog.
        //update ui using the result returned form doInbackground()
 } 
 } 
```

当一个异步任务被执行时，任务会经过 4 个步骤：

1.  onPreExecute()，在任务执行之前在 UI 线程上调用。此步骤通常用于设置任务，例如通过在用户界面中显示进度条。

2.  doInBackground(Params...)，在 onPreExecute() 完成执行后立即在后台线程上调用。此步骤用于执行可能需要很长时间的后台计算。异步任务的参数传递到这一步。计算的结果必须由这一步返回，并将传递回最后一步。此步骤还可以使用 publishProgress(Progress...) 来发布一个或多个进度单位。这些值在 UI 线程上的 onProgressUpdate(Progress...) 步骤中发布。

3.  onProgressUpdate(Progress...)，在调用 publishProgress(Progress...) 后在 UI 线程上调用。执行的时间是不确定的。此方法用于在后台计算仍在执行时在用户界面中显示任何形式的进度。例如，它可用于动画进度条或在文本字段中显示日志。

4.  onPostExecute(Result)，在后台计算完成后在 UI 线程上调用。后台计算的结果作为参数传递给该步骤。

# ios - IOS 在集合视图中显示下载的图像

> ID：15897305
> 
> 赞同：0
> 
> 时间：2013-04-09T08:46:40.037
> 
> 标签：ios, image, collectionview

我从我的网站下载的图片有问题。

我的`CollectionView`显示图像已经添加到我的项目中，但是当我从`Pictures.plist`文件信息下载新图像时。我一无所有。

我在下载之前检查图像是否已经下载。但是……我不知道。

**这是我的代码：**

```
 #pragma mark - Téléchargement d'un fichier image mis à jour
- (void)downloadImageFileIfUpdated:(NSString *)file withPath:(NSString *)urlPath {

    //NSLog(@"[downloadImageFileIfUpdated withPath]");
    BOOL downloadFromServer = NO;

    /// Définition de l'adresse du fichier serveur
    NSURL *url = [NSURL URLWithString:[urlPath stringByAppendingString:file]];
    //NSLog(@"Téléchargement de l'entête HTTP depuis : %@", url);

    /// Récupération du fichier local
    NSArray *picturesInfosPath = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *picturesInfosDirectoryPath = [picturesInfosPath objectAtIndex:0];
    NSString *cachedPath = [picturesInfosDirectoryPath stringByAppendingPathComponent:file];
    NSFileManager *fileManager = [NSFileManager defaultManager];

    NSString *lastModifiedString = nil;
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setHTTPMethod:@"HEAD"];
    NSHTTPURLResponse *response;
    [NSURLConnection sendSynchronousRequest:request returningResponse:&response error: NULL];
    if([response respondsToSelector:@selector(allHeaderFields)]) {
        lastModifiedString = [[response allHeaderFields] objectForKey:@"Last-Modified"];
    }

    NSDate *lastModifiedServer = nil;
    @try {
        NSDateFormatter *df = [[NSDateFormatter alloc] init];
        df.dateFormat = @"EEE',' dd MMM yyyy HH':'mm':'ss 'GMT'";
        df.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
        df.timeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
        lastModifiedServer = [df dateFromString:lastModifiedString];
    }
    @catch(NSException * e) {
        NSLog(@"Error parsing last modified date : %@ - %@", lastModifiedString, [e description]);
    }
    //NSLog(@"Dernière modification du fichier serveur : %@", lastModifiedServer);

    NSDate *lastModifiedLocal = nil;
    if([fileManager fileExistsAtPath:cachedPath]) {
        NSError *error = nil;
        NSDictionary *fileAttributes = [fileManager attributesOfItemAtPath:cachedPath error:&error];
        if (error) {
            NSLog(@"Error reading file attributes for : %@ - %@", cachedPath, [error localizedDescription]);
        }
        lastModifiedLocal = [fileAttributes fileModificationDate];
        //NSLog(@"Dernière modification du fichier local : %@", lastModifiedLocal);
    }

    /// Activation du téléchargement si on a pas de fichier local
    if(!lastModifiedLocal) {
        downloadFromServer = YES;
    }

    /// Activation du téléchargment si le fichier serveur Pictures.plist possède une mise à jour
    if([lastModifiedLocal laterDate:lastModifiedServer] == lastModifiedServer) {
        downloadFromServer = YES;
    }

    /// Téléchargement du fichier serveur
    if(downloadFromServer) {
        //NSLog(@"Télécharment du nouveau fichier serveur");
        NSData *data = [NSData dataWithContentsOfURL:url];
        if(data) {
            /// Enregistrement du fichier
            if([data writeToFile:cachedPath atomically:YES]) {
                //NSLog(@"Téléchargement du fichier sauvé à : %@.", cachedPath);
            }
            /// Déclaration de la date de modification du fichier local en accord avec celle du fichier du serveur
            if(lastModifiedServer) {
                NSDictionary *fileAttributes = [NSDictionary dictionaryWithObject:lastModifiedServer forKey:NSFileModificationDate];
                NSError *error = nil;
                if([fileManager setAttributes:fileAttributes ofItemAtPath:cachedPath error:&error]) {
                    //NSLog(@"File modification date updated.");
                }
                if(error) {
                   // NSLog(@"Error setting file attributes for: %@ - %@.", cachedPath, [error localizedDescription]);
                }
            }
        }
    }
}

#pragma mark - Initialisation des informations
-(void) initializeViewWithFile:(NSString *)file {

    NSLog(@"[initializeViewWithFile]");
    /// Arrêt de l'indication de chargement de la vue
    [loadingView stopAnimating];

    NSString *fileName = [file stringByDeletingPathExtension];
    NSString *fileExtension = [file pathExtension];
    NSString *fileLocalPath;
    NSString *rootPath = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    fileLocalPath = [rootPath stringByAppendingPathComponent:file];
    if(![[NSFileManager defaultManager] fileExistsAtPath:fileLocalPath]) {
        fileLocalPath = [[NSBundle mainBundle] pathForResource:fileName ofType:fileExtension];
    }
    NSDictionary* dictFromFile = [[NSDictionary alloc] initWithContentsOfFile:fileLocalPath];
    NSMutableArray* arrayFromFile = [dictFromFile objectForKey:@"Root"];

    /// Création d'un tableau qui contient les objets images
    gallery = [[NSMutableArray alloc] init];
    NSEnumerator *enumerator = [arrayFromFile objectEnumerator];
    NSDictionary *obj;
    while((obj = [enumerator nextObject])) {
        PMPicture *picture = [[PMPicture alloc] initWithDictionaryFromPlist: obj];
        [gallery addObject: picture];
        [self downloadImageFileIfUpdated:picture.file withPath:picture.url];
    }

    /// Initialisation
    [galleryCollectionView setDataSource:self];
    [galleryCollectionView setDelegate:self];
    [galleryCollectionView reloadData];
} 
```

**集合视图方法：**

```
#pragma mark - UICollectionViewDataSource

- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {

 return 1;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:   (NSInteger)section {

 return gallery.count;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"GalleryCell";
PMPictureCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:CellIdentifier forIndexPath:indexPath];
PMPicture *picture = [gallery objectAtIndex:indexPath.item];

// UIImageView *cellImageView = (UIImageView *)[cell viewWithTag:100];
// cellImageView.image = [UIImage imageNamed:[picture file]];

NSString *image = [picture file]; // NOT WORKING, BUT IS LIKE @"img23.png"
//NSString *image = @"radios.png"; // WORK, I THINK BECAUSE IS ADDED IN PROJECT
//NSLog(@"Image affichée : %@", image);
[[cell cellImage] setImage:[UIImage imageNamed:image]];
return cell;
} 
```

就是这样，如果你能帮助我，我将不胜感激！

我的观点开始于`initializeViewWithFile:file`，文件在哪里`myPictures.plist`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:03:58.767

```
NSString *ImagePath = @"Full Path of Image";
[img setImage:[UIImage imageWithContentsOfFile:ImagePath] forState:UIControlStateNormal]; 
```

1.  在这里，我给出了对我有用的示例..在 ImageView 中。谢谢。

# ruby-on-rails - 发送电子邮件时 URL 格式错误。导轨 3.2

> ID：15897312
> 
> 赞同：0
> 
> 时间：2013-04-09T08:46:55.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email, actionmailer, link-to

我已经设法从我的 Rails 3.2 应用程序发送电子邮件 (gmail)，没有明显问题。但是，电子邮件中生成的 :id 参数位置错误。

通知邮件程序

```
default :from => 'no-reply@someDomaiin.com'
def report_spam(comment)
    @comment = comment

    mail(:to => "admin@someDomaiin.com", :subject => "Inappropriate content report")
  end 
```

某些电子邮件.html.haml

```
Reported by:
"
= link_to @comment.reports.last.user.name, users_url(@comment.reports.last.user)
"
%p

Content of the accused comment:
%br
"
= link_to @comment.body, events_url(@comment.event.id)
"
%p 
```

收件箱中的电子邮件看起来不错

```
Reported by: " saben "
Content of the accused comment: 
" I just created a superb event!! " 
```

但是，这两个链接网址是：

```
http://someDomaiin.heroku.com/saben/users
http://someDomaiin.heroku.com/2/events 
```

应该是：

```
http://someDomaiin.heroku.com/users/saben
http://someDomaiin.heroku.com/events/2 
```

这发生在我收到的所有/不同的邮件中。我有什么明显的遗漏吗？

提前致谢！

解决方案 ：

```
= link_to @comment.reports.last.user.name, user_url(:id => @comment.reports.last.user.id)
"
%p

Content of the accused comment:
%br
"
= link_to @comment.body, event_url(:id => @comment.event.id) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:32:40.013

这可能是一个路由问题，一般来说，如果您要链接到特定资源，您将需要成员方法`event_url(@comment.event)`而不是`events_url`集合方法。

# ruby-on-rails - 如何修复我的 git push 错误？我搞砸了吗？

> ID：15897313
> 
> 赞同：0
> 
> 时间：2013-04-09T08:46:57.137
> 
> 标签：ruby-on-rails, git, heroku, github

到目前为止，我在部署我的应用程序时遇到的问题很少。但是，在今晚的部署之后，我收到了一个无法修复的应用程序错误。所以我从一周前从**v7**回滚到**v4 。**该应用程序再次运行，但我决定尝试“git push heroku master -f” **v5**，我认为不会在**v7**上发现应用程序错误。不幸的是，**v5**也给了我同样的错误。

之后，我尝试回滚到工作版本**v4**，但它仍然给了我一个错误。我尝试了另一个回滚，但它仍然给了我一个应用程序错误。然后我尝试从我的本地硬盘驱动器“git push heroku master -f” **v4**（我知道它有效），但它现在显示“一切都是最新的”。

我从这里做什么？我的应用程序无法在 heroku 上运行，我无法进行任何回滚，甚至无法推送现在可以使用的版本。我怎样才能让它工作？我想重新部署**v4**这是一个工作版本，并逐段重写代码以恢复到当前级别。

在开发环境中并在中查看时一切正常`rails server` 但是，这是我在运行时遇到的错误`rails server -e production`

```
Started GET "/" for 127.0.0.1 at 2013-04-09 02:09:49 -0700
Processing by StaticPagesController#home as HTML
Completed 500 Internal Server Error in 1ms

ActiveRecord::StatementInvalid (Could not find table 'users'):
  app/helpers/sessions_helper.rb:19:in `current_user'
  app/helpers/sessions_helper.rb:11:in `signed_in?'
  app/controllers/static_pages_controller.rb:3:in `home'

Started GET "/favicon.ico" for 127.0.0.1 at 2013-04-09 02:09:49 -0700

ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `c
all'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `ca
ll'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `
call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  rack-cache (1.2) lib/rack/cache/context.rb:136:in `forward'
  rack-cache (1.2) lib/rack/cache/context.rb:245:in `fetch'
  rack-cache (1.2) lib/rack/cache/context.rb:185:in `lookup'
  rack-cache (1.2) lib/rack/cache/context.rb:66:in `call!'
  rack-cache (1.2) lib/rack/cache/context.rb:51:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `servi
ce'
  C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/webrick/server.rb:191:in `block in
start_thread' 
```

但是，我在部署后使用的错误与控制器`heroku logs`的 Rails有关`superclass mismatch error`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:35:12.763

你这里有两个不相关的问题。 `rails server -e production`不起作用，因为您需要针对本地数据库的生产版本运行迁移，因此请执行以下操作：`RAILS_ENV=production rake db:migrate`

您的 Heroku 问题将与此无关。您将需要发布您的 Heroku 日志以`heroku logs`供任何人帮助您。

此外，强制 git push 到 Heroku 并不是回滚版本的方式。你这样做：`heroku releases:rollback [RELEASE]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:37:32.510

您的部分日志说您没有 table `users`。

> ActiveRecord::StatementInvalid（找不到表“用户”）：
> app/helpers/sessions_helper.rb:19:in signed_in？ app/controllers/static_pages_controller.rb:3:in `home'`current_user'
> app/helpers/sessions_helper.rb:11:in`

你申请迁移了吗？如果没有，请尝试：

```
rake db:migrate 
```

# jquery - colspane 克隆行的所有列

> ID：15897319
> 
> 赞同：0
> 
> 时间：2013-04-09T08:47:14.423
> 
> 标签：jquery

我想将所有列合并到使用jquery 方法`(colspan)`创建的新行中。`clone()`我希望新行之后只有一列的另一件事`colspan`应该将原始行的所有值用空格分隔。

我已经尝试过这样的事情，`clone`并且它对我的工作到目前为止考虑`cloning`

```
$(document).ready(function(){
 console.log($('table tbody tr').eq(0).html());
 var newtr=$('table tbody tr').eq(0).clone();
 console.log(newtr.html());
}); 
```

但不知道如何将`colspan`所有具有原始行逗号值的列分开。

[JS 小提琴链接](http://jsfiddle.net/rahularyansharma/3p3m2/1/)

**已编辑**

当前的html是这样的

```
<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Order</th>
            <th>Month</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Rahul</td>
            <td>#1</td>
            <td>January</td>
        </tr>
        <tr>
            <td>Yunus</td>
            <td>#2</td>
            <td>April</td>
        </tr>
        <tr>
            <td>Nitin</td>
            <td>#3</td>
            <td>March</td>
        </tr>
    </tbody>
</table> 
```

在 jquery 代码运行之后，我希望我的结果 html 看起来像这样

```
<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Order</th>
            <th>Month</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Rahul</td>
            <td>#1</td>
            <td>January</td>
        </tr>
        <tr>
            <td>Yunus</td>
            <td>#2</td>
            <td>April</td>
        </tr>
        <tr>
            <td>Nitin</td>
            <td>#3</td>
            <td>March</td>
        </tr>
        <tr>
            <td colspan="3">Rahul #1 January</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:04:12.347

```
$("table tbody tr:eq(0)").each(function() {
    var $tr = $(this).clone(),
        $td = $("td", $tr);

    $td.filter(":gt(0)")
       .remove()
       .end()
       .attr("colspan", $td.length)
       .html($td.map(function() {
           return this.innerHTML;
       }).get().join(" "));

    $tr.appendTo($(this).closest("tbody"));
}); 
```

**演示：http:** [//jsfiddle.net/uAwnQ/2/](http://jsfiddle.net/uAwnQ/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:36:24.133

我应该做这样的事情：

```
var $tr = $("table tbody tr:first").clone(),
$td = $("td", $tr);

var content = '';
$td.each(function(){content+=$(this).html()+' ';});
content = '<td colspan="'+$td.length+'">'+content+'</td>';
$tr.html(content);

$tr.appendTo("table tbody"); 
```

如果需要另一行，您可以将**:first**选择器更改为**eq() 。**如果要影响多行，则可以使用**.each()**

**演示** [http://jsfiddle.net/f932M/1/](http://jsfiddle.net/f932M/1/)

# c# - automapper：从数组映射到一个字段？

> ID：15897321
> 
> 赞同：1
> 
> 时间：2013-04-09T08:47:22.060
> 
> 标签：c#, automapper

我在尝试将数组映射到类型时遇到问题。我收到以下错误

```
Missing type map configuration or unsupported mapping.

Mapping types:
Run[] -> Run 
```

目标项目是一个运行，源是一个运行（数组）......我在 global.asax 中设置了我的映射

```
 Mapper.CreateMap<Model.Run, Run>(); 
```

任何想法，我想我错过了一些东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T08:56:30.657

当您指定类型映射时，AutoMapper 可以自动映射集合到集合，因此当您有：

```
Mapper.CreateMap<Model.Run, Run>(); 
```

你可以一起去

```
var runs = Mapper.Map<IEnumerable<Model.Run>, IEnumerable<Run>>(source); 
```

因为它自然地遵循 - 它使用您指定的一对一映射将源集合的每个项目映射到目标集合。不遵循的是自动`T -> T[]`或`T[] -> T`映射，映射器在映射时应该做什么`T[] -> T`？从数组中取出第一项？或者也许是最后一个？做某种聚合？如果集合是空的怎么办？

您必须为此编写一个单独的完整地图，例如：

```
Mapper.CreateMap<Model.Run[], Run>()
      .ForMember(x => x.NumericMember, expr => expr.MapFrom(y => y.Sum(z => z.NumericMember)))
      .ForMember(//etc...); 
```

# c# - 如何在 ASP.NET MVC 4 页面中显示 HTML 编辑器

> ID：15897331
> 
> 赞同：2
> 
> 时间：2013-04-09T08:47:43.053
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我一直在开发 MVC 应用程序。目前我`@Html.EditorFor(model => model.TextField)`用来显示一个文本框。

现在我想改用 WYSIWYG HTML 编辑器，但不知道如何将其合并到 Razor 视图中。我已经将该字段设置为允许在我的模型中使用 html。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:05:07.160

如果你想使用[TinyMCE](http://www.tinymce.com/download/download.php)，你可以这样做：

**该模型**

```
public class EditorModel
{  
    [UIHint("tinymce_full"), AllowHtml]
    public string TextField { get; set; }
} 
```

**Shared -> EditorTemplates 下**的模板****

 **```
@*
Don't forget to reference the JQuery Library here, inside your view or layout.
<script src="@Url.Content("~/Scripts/jquery-x.x.x.min.js")" type="text/javascript"></script>
*@

<script src="@Url.Content("~/Scripts/tinymce/jquery.tinymce.js")" type="text/javascript"></script>

<script type="text/javascript">

    (function () {

        $(function () {

            $('#@ViewData.TemplateInfo.GetFullHtmlFieldName(string.Empty)').tinymce({

                // Location of TinyMCE script
                script_url: '@Url.Content("~/Scripts/tinymce/tiny_mce.js")',
                theme: "advanced",

                height: "500",
                width: "500",
                verify_html: false,
                plugins: "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist", //,autosave

                // Theme options
                theme_advanced_buttons1: "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",
                theme_advanced_buttons2: "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
                theme_advanced_buttons3: "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
                theme_advanced_buttons4: "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak,restoredraft,codehighlighting,netadvimage",
                theme_advanced_toolbar_location: "top",
                theme_advanced_toolbar_align: "left",
                theme_advanced_statusbar_location: "bottom",
                theme_advanced_resizing: false,

                // Example content CSS (should be your site CSS)
                //            content_css : "@Url.Content("~/Content/style.css")",
                convert_urls: false,

                // Drop lists for link/image/media/template dialogs
                template_external_list_url: "lists/template_list.js",
                external_link_list_url: "lists/link_list.js",
                external_image_list_url: "lists/image_list.js",
                media_external_list_url: "lists/media_list.js",

                valid_elements: "@@[span]"
            });

        });

    })();

</script>

@Html.TextArea(string.Empty, /* Name suffix */
    ViewData.TemplateInfo.FormattedModelValue /* Initial value */
) 
```

**查看实施**

```
@Html.EditorFor(m=>m.TextField) 
```**

# coordinates - 将 300 dpi 图像的坐标转换为 72 dpi 图像的坐标

> ID：15897334
> 
> 赞同：1
> 
> 时间：2013-04-09T08:47:44.967
> 
> 标签：coordinates, image-resizing, tesseract, dpi

我正在开发一个 tess4J 项目并使用 tess4j，我得到了图像中单词的坐标。唯一的问题是，这些是 TIFF 图像的坐标。我的项目涉及在 pdf 文档中的图像上写一层文本。我认为pdf文档的分辨率是72dpi。所以坐标被变形并且放置得太宽了。如果我可以将分辨率从 300 dpi 降低到 72dpi，然后将图像传递给 tessaract，我不会得到我需要的坐标吗？如果没有，还有其他选择吗？已经尝试将坐标乘以 300/72。令人惊讶的是，这不起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T08:43:50.843

要将 300DPI 转换为 72DPI，您需要乘以 72/300，而不是相反。使用浮点数或先乘法再除法，如 (x * 72) / 300。PDF 单位始终为 1/72 英寸。

缩小原始图像不是一个好主意，因为信息的丢失会降低输出文本的质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T06:52:06.600

`-(UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize`

{

`UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);`

`[image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];`

`UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();`

`UIGraphicsEndImageContext();`

`NSLog(@"New image has w=%f, h=%f", newImage.size.width, newImage.size.height);`

返回新图像；

}

此代码更改任何图像 72 dpi。

# r - 查找 R 中每 1000000 个计数的列的平均值

> ID：15897339
> 
> 赞同：2
> 
> 时间：2013-04-09T08:47:51.623
> 
> 标签：r, aggregate, mean

我有一个数据框，它具有以下结构，包含两列`data1`和`data2`. 以下是样本数据：

```
data1       data2        
800000    1
800030    0.956521739130435
1000000   0.480916030534351
1686626   0.496
1687492   0.174757281553398
2148463   0.0344827586206897
2850823   0.05
2959087   0.0416666666666667 
```

我想计算第二行的平均值，即`data2`每 1000000 个计数`data1`。这意味着它应该给出前 2 行的平均值，然后是接下来的 3 行，然后是接下来的 3 行，依此类推......

输出应该是一个数据帧，其最后一个值在 1000000 区间内，平均值为 1000000 区间内的平均值`data2`： 示例输出如下所示：

```
 800030  0.97826087
 1687492 0.38389110
 2959087 0.04204981 
```

可以帮助在 R 中做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T09:09:13.793

假设您的数据在 data.frame 中`DF`，您可以使用`aggregate`函数来执行此操作

```
> with(DF, aggregate(data2, by=list((data1+0.01)%/%1000000), mean ))
  Group.1          x
1       0 0.97826087
2       1 0.38389110
3       2 0.04204981 
```

要获取`mean`计算过的列中的值，您将不得不`aggregate`再次使用 - 这次是在`data1`列本身上。之后，您可以`merge`生成两个结果数据帧。

```
res <- with(DF, merge(aggregate(data1, by = list((data1 + 0.01)%/%1e+06), paste), aggregate(data2, by = list((data1 + 0.01)%/%1e+06), mean), by = "Group.1"))
names(res) <- c("Group", "Values", "Mean")
res
##   Group                    Values       Mean
## 1     0            800000, 800030 0.97826087
## 2     1 1000000, 1686626, 1687492 0.38389110
## 3     2 2148463, 2850823, 2959087 0.04204981 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T08:53:20.983

你可以这样做：

```
group <- cut(df$data1, c(0,1000000,2000000,3000000))
tapply(df$data2, group, mean)
# (0,1e+06] (1e+06,2e+06] (2e+06,3e+06] 
# 0.81247926    0.33537864    0.04204981 
```

**编辑：**要自动计算`breaks`in `seq`，您可以替换`c(0,1000000,2000000,3000000)`为：

```
c(seq(0, max(df$data1), by=1000000),max(df$data1)) 
```

**编辑 2：**以下使用`ddply`from`plyr`将在数据框中返回均值和最大值：

```
group <- cut(df$data1, c(seq(0, max(df$data1), by=1000000),max(df$data1)))
ddply(df, .(group), summarize, mean=mean(data2), max=max(data2))
#              group       mean   max
# 1        (0,1e+06] 0.81247926 1.000
# 2    (1e+06,2e+06] 0.33537864 0.496
# 3 (2e+06,2.96e+06] 0.04204981 0.050 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T09:50:00.230

为了多样性，这里有另一个解决方案，使用`split`：

```
sapply(split(df,df$data1%/%1e6), function(x)mean(x$data2))
         0          1          2 
0.97826087 0.38389110 0.04204981 
```

**编辑**：甚至更简单：

```
sapply(split(df$data2,df$data1%/%1e6), mean) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-05T21:24:34.990

为了完整起见，我想在 `tidyverse`宇宙中提出一个解决方案

```
library(tidyverse)

df <- tribble(
~data1,   ~data2,        
800000,    1,
800030,    0.956521739130435,
1000000,   0.480916030534351,
1686626,   0.496,
1687492,   0.174757281553398,
2148463,   0.0344827586206897,
2850823,   0.05,
2959087,   0.0416666666666667)

df |> 
  mutate(group= data1 %/% 1000000) |> 
  group_by(group) |> 
  summarize(max_in_group = max(data1), mean_data2 = mean(data2), n_in_group = n())
#> # A tibble: 3 x 4
#>   group max_in_group mean_data2 n_in_group
#>   <dbl>        <dbl>      <dbl>      <int>
#> 1     0       800030     0.978           2
#> 2     1      1687492     0.384           3
#> 3     2      2959087     0.0420          3 
```

尽管似乎并非所有小数都被打印出来，但它只是`dplyr`. 所有小数的计算如下所示

```
df |> 
  mutate(group= data1 %/% 1000000) |> 
  group_by(group) |> 
  summarize(max_in_group = max(data1), mean_data2 = mean(data2), n_in_group = n()) |> 
  pull(mean_data2)
#> [1] 0.97826087 0.38389110 0.04204981 
```

^(由[reprex 包](https://reprex.tidyverse.org)于 2022-03-05 创建(v2.0.1))

# c# - 如何在 WPF 中按像素绘制

> ID：15897341
> 
> 赞同：1
> 
> 时间：2013-04-09T08:47:51.717
> 
> 标签：c#, .net, wpf, drawing

需要按像素数组绘制数据（大）。我怎样才能做到这一点？

我在上面尝试了 Canvas 和 Rectangle - 计算机上吊了自己...尝试了以下选项（DrawingContext） - 计算机仍然上吊了自己，但少了一点。

请推荐计算机负载最小的选项。整数宽度 = 800；- 数组的大小（大！！！） int size = 1; - 希望能够使片段不仅仅是一个像素，而是几个像素

```
protected override void OnRender(System.Windows.Media.DrawingContext drawingContext)
        {
            Random rnd = new Random();
            int width = 800;
            int size = 1;
            CellType[,] types = new CellType[width, width];
            for (int i = 0; i < width; i++)
            {
                for (int j = 0; j < width; j++)
                {
                    int r = rnd.Next(0, 100);
                    if (r >= 70) types[j,i] = CellType.IsOccupied;
                    else types[j, i] = CellType.IsEmpty;
                }
            }

            for (int i = 0; i < width; i++)
            {
                for (int j = 0; j < width; j++)
                {
                    Brush brush = Brushes.Black;

                    switch (types[j, i])
                    {
                        case CellType.IsEmpty: brush = Brushes.Green;
                            break;
                        case CellType.IsOccupied: brush = Brushes.Black;
                            break;
                    }

                    drawingContext.DrawRectangle(brush,
                    new Pen(brush, 1),
                    new Rect(j * size, i * size, size, size));
                }
            }

            base.OnRender(drawingContext);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:27:07.983

它会冻结多长时间？几年前，我在 Silverlight 中做了类似的事情。这有点慢，但仍然可以接受。尝试使用带有 SetPixel 或 FillRectangle 方法的 WriteableBitmap，但请记住，在循环中逐像素绘制总是需要一些时间。

忘了提到 SetPixel 和 FillRectangle 可能需要 WriteableBitmapEx，可在此处获得： [http ://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/)

# regex - 特定字符后的 Oracle 子字符串

> ID：15897347
> 
> 赞同：2
> 
> 时间：2013-04-09T08:48:04.520
> 
> 标签：regex, oracle, substr

我已经发现我需要使用 substr/instr 或 regex，但是通过阅读有关这些的文档，我无法完成......我在 Oracle 11.2 上。

所以这就是我所拥有的。字符串列表，如：

```
743H5-34L-56
123HD34-7L
12HSS-34R
23Z67-4R-C23 
```

我需要的是第一个'-'之后的数字（长度1或2），直到出现'L'或'R'。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:02:27.833

```
regexp_replace(string, '^.*?-(\d+)[LR].*$', '\1') 
```

[小提琴](http://www.sqlfiddle.com/#!4/134bb/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T10:11:51.993

另一个版本（没有花哨的外观:-)：

```
with v_data as (
  select '743H5-34L-56' val from dual
  union all
  select '123HD34-7L' val from dual
  union all 
  select '12HSS-34R' val from dual
  union all
  select '23Z67-4R-C23' val from dual
)
select 
  val, 
  regexp_replace(val, '^[^-]+-(\d+)[LR].*', '\1') 
from v_data 
```

它匹配

*   字符串“^”的开头
*   一个或多个字符不是'-' "[^-]+"
*   后跟一个“-”“-”
*   后跟一个或多个数字（将它们捕获在一组中）“（\ d +）”
*   后跟“L”或“R”“[LR]”
*   后跟零个或多个任意字符“.*”

# java - Hibernate 查找错误的主键

> ID：15897354
> 
> 赞同：2
> 
> 时间：2013-04-09T08:48:26.873
> 
> 标签：java, spring, hibernate, spring-data-jpa

我的实体有两个外键，其中一个是主键。我在[JPA Wiki](http://en.wikibooks.org/wiki/Java_Persistence)中读到，如果子项的（采购）主键与父项（文章）的主键相同，则建立 @OneToOne 关系。

```
@SuppressWarnings("serial")
@Entity
public class Procurement implements Serializable {

    @Id
    @OneToOne
    // the child's primary key is the same as the parent
    @JoinColumn(name = "articleId", referencedColumnName = "id")
    private Article article;

    @OneToOne
    @JoinColumn(name = "supplierId", referencedColumnName = "id")
    private Supplier supplier; 
```

按照标准方法，JpaRepository 应该如下所示：

```
@Repository
public interface IProcurementRepository extends
        JpaRepository<Procurement, Article> 
```

但是，如果我想调用 findOne 方法（它查找主键）传递一个“Article”对象，Hibernate 会抛出一个异常。

> org.hibernate.TypeMismatchException：为类 de.willms.spring.myerp.model.Procurement 提供了错误类型的 id。预期：类 de.willms.spring.myerp.model.Procurement，得到类 de.willms.spring.myerp.model.Article

*DB表结构：*

表“文章”（ID，短文本）

表“供应商”（ID、名称）

表“采购”（articleID、supplierID、price）

我必须更改什么才能通过相应的“物品”对象找到“采购”记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:36:57.593

您仍然必须使用 int 或 long 类型的 id。`@JoinColumn`不同之处在于，您必须使用，而不是加入`@PrimaryKeyJoinColumn`。你的课应该是这样的。

```
@SuppressWarnings("serial")
@Entity
public class Procurement implements Serializable {

    @Id
    @GeneratedValue(generator = "articleForeignGenerator")
    /* Hibernate-specific generator needed for shared primary key */
    @GenericGenerator(name = "articleForeignGenerator", strategy = "foreign", parameters = @Parameter(name = "property", value = "article"))
    @Column(name = "articleId")
    private int articleId;

    @OneToOne
    // the child's primary key is the same as the parent
    @PrimaryKeyJoinColumn
    private Article article;

    @OneToOne
    @JoinColumn(name = "supplierId", referencedColumnName = "id")
    private Supplier supplier; 
```

请注意，我为 ID 使用了特定于休眠的生成器。您的 JPA 提供程序可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:39:16.693

最后，我在 Hibernate 中发现了一个特殊的功能（令人惊叹，但在文档中很难理解），从而导致了解决方案。

一旦主键由几列组成，或者像我的例子一样，与其他表相关，就必须编写一个特殊的 ID 类。

```
@Embeddable    
public class Procurement_ID implements Serializable {

    /**
     * This attribute establishes the 1:1 connection to a record in the
     * "article" table. The column "articleId" is a foreign key to the column
     * "id" in the {@link Article} entity. (Warning: This is Hibernate
     * specific!)
     */
    @OneToOne
    @JoinColumn(name = "articleId", referencedColumnName = "id")
    private Article article;

    /**
     * This attribute establishes the 1:1 connection to a record in the table
     * "supplier". The column "supplierId" is a foreign key to the column "id"
     * in the {@link Supplier} entity. (Warning: This is Hibernate specific!)
     */
    @OneToOne
    @JoinColumn(name = "supplierId", referencedColumnName = "id")
    private Supplier supplier; 
```

（由于更“规范化”的数据模型，我切换到复合主键。）

因为@Embeddable注解，这个ID可以注入到实体类中。

```
@Entity
public class Procurement implements Serializable {

    /**
     * The composite primary key of the underlying table is defined in the
     * {@link Procurement_ID} class.
     */
    @EmbeddedId
    private Procurement_ID procid; 
```

在我使用这种方法时，Hibernate 会插入一条带有正外键检查的新记录：

> [DEBUG]**生成标识符：** component[article,supplier]{article=de.willms.spring.myerp.model.Article#1, supplier=de.willms.spring.myerp.model.Supplier#1}，使用策略：org .hibernate.id.CompositeNestedGeneratedValueGenerator
> 
> ...（冲洗）...
> 
> [调试] 列出实体：... de.willms.spring.myerp.model.Procurement{price=2.5, deliveryTime=10, **procid=component[article,supplier]{article=de.willms.spring.myerp.model.文章#1，供应商=de.willms.spring.myerp.model.Supplier#1}**，价格单位=$}

然而，遗憾的是 JpaRepository 不能注入 find() 方法存根，只涉及主键的一部分。它是“无法根据路径解析属性”。欢迎您发表评论！

# c - 无法命中 0xff

> ID：15897355
> 
> 赞同：3
> 
> 时间：2013-04-09T08:48:29.030
> 
> 标签：c, jpeg

我有一个小挑战（可以在页面底部找到，标题是 CSI。https [://x.cs50.net/2012/psets/4/pset4.html](https://x.cs50.net/2012/psets/4/pset4.html)，太长了，我无法粘贴。） （[不，我不是想作弊，我已经找到了完整的代码解决方案，但我希望我的工作..](https://github.com/CoreData/cs50/blob/master/pset4/jpg/recover.c)）

工作是在 .raw 文件中嗅出 JPG 文件（文件已上传）

我正在使用下面显示的代码：

```
 #include <stdio.h>

 int main(void){
    FILE* fp = fopen("card.raw", "r");
    if (fp == NULL){
        printf("error!");
    }
    char foo[512];
    fread(foo,sizeof(foo),sizeof(foo[0]), fp);
    for(int j = 0; j < 20000; j++) {
        if (foo[0] == 0xff){
            printf("jackpot");
            return 0;
        }
        else {
            printf(" %d ", foo[0]);
            fread(foo,sizeof(foo),sizeof(foo[0]), fp);
        }
    }
} 
```

问题是，我不知道我做错了什么。它应该在达到 0xff 时立即尖叫并退出，但它会继续前进。 如果需要，可以在[https://mega.co.nz/#!tZcFWYIS!DmPAGT7FHLFgtW0SorWU-SE-gfJfR7MlbxdNucN1Biw](https://mega.co.nz/#!tZcFWYIS!DmPAGT7FHLFgtW0SorWU-SE-gfJfR7MlbxdNucN1Biw)找到文件是。

更新：感谢大家的帮助，我终于中奖了。这是我最终得到的结束代码。

```
#include <stdio.h>
#include <stdint.h>

typedef uint8_t BYTE;
int main(void){
    FILE* fp = fopen("card.raw", "rb");
    if (fp == NULL){
        printf("error!");
    }
    BYTE foo[512];    
    for (int j = 0;fread(foo,sizeof(foo),sizeof(foo[0]), fp) > 0; j++){
        if (foo[0] == 0xff){
            printf("jackpot, %d", j);
            return 0;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:55:53.327

我的猜测是您正在以`"r"`模式读取文件，这可能会转换换行符并弄乱块同步。

`"rb"`尝试以模式（二进制模式）读取文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:53:34.567

我看到你有两个问题。

一个是除了你读取的块的第一个字节之外，你并没有真正检查任何东西。第二个是您继续阅读而不考虑文件结尾或错误。

您应该重新设计以循环读取（同时检查错误和文件结尾），并在该循环中使用另一个循环来查找您正在寻找的字节序列。

* * *

像这样的东西：

```
for (;;)
{
    size_t nread = fread(...);
    if (nread == 0)
    {
        /* Error or end-of-file */
        break;
    }

    for (int i = 0; i < nread; i++)
    {
        /* Check for signature in `foo[i]` */
    }
} 
```

* * *

如果仅在每个 512 字节块的开头找到签名，则不需要第二个内部循环，并且可以大大简化它：

```
while (fread(...) > 0)
{
    /* Check for signature in `foo[0]` */
} 
```

# java - Struts 2 中的个性化 URL

> ID：15897360
> 
> 赞同：1
> 
> 时间：2013-04-09T08:48:38.320
> 
> 标签：java, parameters, struts2, url-rewriting, wildcard-mapping

我目前正在开发一个允许匿名使用的 Struts 2 Web 应用程序。我希望匿名用户的 URL 如下所示：

```
http://localhost:8080/myapp 
```

但是用户登录后，URL会根据用户名进行个性化设置，例如：

```
http://localhost:8080/myapp/Cuong-Doan 
```

请向我推荐一个可以帮助我实现它的插件/技术。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:13:22.133

您可以尝试使用 Tuckey 的[UrlRewriteFilter](http://tuckey.org/urlrewrite/)来完成。登录后添加会话属性，例如`loggedUsername=Cuong-Doan`. 然后使用[条件](http://urlrewritefilter.googlecode.com/svn/trunk/src/doc/manual/4.0/index.html#condition)元素的参数分析 UrlRewriteFilter[规则中的这个属性。](http://urlrewritefilter.googlecode.com/svn/trunk/src/doc/manual/4.0/index.html#rule)如果存在 -> 进行重定向，请使用[反向引用](http://urlrewritefilter.googlecode.com/svn/trunk/src/doc/manual/4.0/index.html#backreferences)将其添加到 URL 。`session-attribute`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T12:10:32.023

个性化可以通过设置指定角色的参数来完成。查看问题中的 URL，我决定让您想象一下用于重现 SEO 优化 URL 的技术。这种技术称为[“动作名称后的参数”](https://struts.apache.org/core-developers/wildcard-mappings.html)。例如，将您的角色映射到您可以使用的操作

```
@Action(value = "/*", params = {"person", "{1}"}) 
```

`person`因此，在映射该操作后，您将通过可在操作中使用的参数获取有关人员的信息。

# jquery - 带有附加 jQuery 的 CSS 多级下拉菜单

> ID：15897362
> 
> 赞同：2
> 
> 时间：2013-04-09T08:48:43.377
> 
> 标签：jquery, css, drop-down-menu

我有一个完美运行的 CSS 多级下拉菜单。

我想添加一些额外的 jQuery 代码，以便在悬停时菜单保持打开状态。然后您必须单击屏幕关闭菜单，（类似于[http://www.cssplay.co.uk/menus/cssplay-click-drop-fly.html](http://www.cssplay.co.uk/menus/cssplay-click-drop-fly.html)或[http://www.codenothing.com/档案/2009/多级下拉菜单/](http://www.codenothing.com/archives/2009/multi-level-drop-down-menu/)）。

我添加了一些 jQuery，（见下文），这使得前两个级别/uls 可以按要求工作，但较低的级别不会保持打开状态。关于如何解决这个问题的任何想法？

Jsfiddle在这里-http: [//jsfiddle.net/PSFk7/5/](http://jsfiddle.net/PSFk7/5/)

jQuery代码：

```
$('.top_level').mouseover(function(){
    $('.megamenu_main').addClass('megamenu_main_over');
    $('html').click(function() {        
         $('.megamenu li.top_level ul').removeClass('megamenu_main_over');
    });
});  

$('li.parent').mouseover(function(){
    $('li.parent ul').removeClass('children_over')
    $(this).children('ul').addClass('children_over');
    $('html').click(function() {        
         $('ul').removeClass('children_over');
    });
}); 
```

HTML 代码：

```
 <div class="megamenu_container">
            <ul class="megamenu megamenu_slide">       
                <li class="top_level"><span><a href="#">Main Page</a></span>        
                    <ul class="megamenu_main">
                        <li><a href="#">Suspendisse</a></li>
                        <li><a href="#">Fusce porta</a></li>
                        <li class="parent"><a href="http://www.mysite.co.uk/mainpage/page-01">Page Level 01</a>
                            <ul class='children'>
                                <li><a href="#">Donec et enim</a></li>
                                <li><a href="#">Aliquam volutpat</a></li>
                                <li class="parent"><a href="#">Page Level 02</a>
                                    <ul class='children'>
                                        <li class="parent"><a href="#">Page Level 03</a>
                                            <ul class='children'>
                                                <li><a href="#">Page Level 04</a></li>
                                                <li><a href="#">Proin sed nisi a sapien</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#">Curabitur ultricies</a></li>
                                    </ul>
                                </li>
                                <li><a href="#">Nunc sit amet</a></li>
                                <li class="parent"><a href="#">In aliquam orci</a>
                                    <ul class='children'>
                                        <li class="parent"><a href="#">Page Level 03 V2</a>
                                            <ul class='children'>
                                                <li><a href="#">Page Level 04 V2</a></li>
                                                <li><a href="#">Proin sed nisi a sapien V2</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#">Curabitur ultricies</a></li>
                                    </ul>
                                </li>
                                <li><a href="#">Integer dignissim</a></li>
                                <li><a href="#">Praesent euismod tortor</a></li>
                            </ul>
                        </li>
                        <li><a href="#">Vestibulum quis velit</a></li>
                        <li><a href="#">Aliquam lacinia</a></li>
                        <li class="parent"><a href="#">Ut porttitor ipsum</a>
                                    <ul class='children'>
                                        <li class="parent"><a href="#">Page Level 01 V1</a>
                                            <ul class='children'>
                                                <li><a href="#">Page Level 02 V1</a></li>
                                                <li><a href="#">Proin sed nisi a sapien V1</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#">Curabitur ultricies</a></li>
                                    </ul>
                        </li>
                        <li><a href="#">Mauris sit amet</a></li>
                        <li><a href="#">Praesent</a></li>
                        <li><a href="#">Nullam ornare</a></li>                                
                    </ul>
                </li>
            </ul>
        </div> 
```

CSS 代码：

```
.megamenu_container { height:55px; line-height:55px; margin:0; position:relative; float:left; z-index:9; background:#d55c4b; margin:0 17px 0 0; padding:0 39px; text-align:left; }
.megamenu_container a { text-decoration: none; }
.megamenu_main { list-style:none; padding:0; margin:0; }
.megamenu li.top_level { list-style:none; background:none; }
.megamenu .top_level > span { color:#FFF; line-height:55px; outline:0; text-decoration:none; }
.megamenu .top_level > span a { color:#FFF; }
.megamenu_main, .megamenu_main ul { position:absolute; top:-9999em; left:-9999em; width:167px; margin:0 0 40px -1px; padding:0; -webkit-box-shadow: 0 2px 5px #bbb; -moz-box-shadow: 0 2px 5px #bbb;  -o-box-shadow: 0 2px 5px #bbb; box-shadow: 0 2px 5px #bbb; border:none; border-top:5px solid #d04734; background:#FFF; display:none; }
.megamenu > li:hover .megamenu_main { top:55px; left:1px; display:block; }      
.megamenu > li .megamenu_main_over { top:55px; left:1px; display: block; }      
.megamenu_main li:hover > ul { top:-5px; left:100%; display:block; }        
.megamenu_main ul.children_over, .megamenu_main li.addmenu ul.children { top:-5px; left:100%; display:block; }      
.megamenu_main li:hover > .left_dropdown { left:-100%; }
.megamenu_slide { top:30px; -webkit-transition: top 0.3s 0.2s, opacity 0 0.2s; -moz-transition: top 0.3s 0.2s, opacity 0 0.2s;  -o-transition: top 0.3s 0.2s, opacity 0 0.2s; -ms-transition: top 0.3s 0.2s, opacity 0 0.2s; transition: top 0.3s 0.2s, opacity 0 0.2s; }
.megamenu_slide ul { left:80%; -webkit-transition: left 0.2s 0.2s, opacity 0 0.2s; -moz-transition: left 0.2s 0.2s, opacity 0 0.2s; -o-transition: left 0.2s 0.2s, opacity 0 0.2s; -ms-transition: left 0.2s 0.2s, opacity 0 0.2s; transition: left 0.2s 0.2s, opacity 0 0.2s; }
.megamenu_slide li > .left_dropdown { left:-80%; }
.parent, .megamenu_main .dropdown_arrow { background-image:url(http://shop.tree-free.com/secure/images/arrow_right_small.gif); background-repeat: no-repeat; background-position: 96% 48%; }
.parent:hover, .megamenu_main .dropdown_arrow:hover { background-image:url(http://shop.tree-free.com/secure/images/arrow_right_small.gif); }
.megamenu_main li a { text-decoration: none; color:#4d4d4d; font-size:12px; }
.megamenu_main li { border-bottom:1px solid #e5e5e5; line-height:0.8em; margin:0; padding:9px 27px 9px 13px; }
.megamenu_main li a:hover { color:#d04734; }
.megamenu_main > li a { font-weight:bold; }
.megamenu_main > li ul { list-style: none; padding:0; margin:0; min-height:408px; }
.megamenu_main > li ul li a { font-weight:normal; }
.main_opened li, .megamenu_main > li ul li { position:static; -webkit-transition: background-color 0.3S; -moz-transition: background-color 0.3s; -o-transition: background-color 0.3s; -ms-transition: background-color 0.3s; transition: background-color 0.3s; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T09:01:32.813

您当前正在删除`children_over`mouseover ( `$('li.parent ul').removeClass('children_over')`) 上的所有类，这会破坏您的脚本。而是仅从兄弟树中删除这些类（即不是当前项的父项）

您可以改为使用此行来执行此操作：

```
$(this).siblings().find('ul').removeClass('children_over'); 
```

这是一个修改过的小提琴：http: [//jsfiddle.net/PSFk7/8/](http://jsfiddle.net/PSFk7/8/)

希望能帮助到你 ：）

# java - log4j xml 配置中的 BufferSize 位置

> ID：15897367
> 
> 赞同：1
> 
> 时间：2013-04-09T08:48:58.547
> 
> 标签：java, log4j

我的 log4j.xml 配置中有以下内容：

```
<appender name="FileAppender" class="org.apache.log4j.DailyRollingFileAppender">
    <param name="File" value="${MDCapture.logfile.dir}/${APP_NAME}.log"/>
    <param name="BufferedIO" value="false"/>
    <param name="DatePattern" value="'.'yyyy-MMM-dd"/>
    <layout class="org.apache.log4j.TTCCLayout">
        <param name="DateFormat" value="ISO8601"/>
    </layout>
</appender>

<appender name="AsyncAppenders" class="org.apache.log4j.AsyncAppender">
    <appender-ref ref="FileAppender"/>
    <param name="BufferSize" value="1000" />
</appender> 
```

当我运行它时，我收到以下警告：

> 2013 年 4 月 8 日 14:22:15 log4j:WARN 持续解析错误 18 和第 13 列 log4j:WARN 元素类型“appender”的内容必须匹配“(errorHandler?,param*,rollingPolicy?,triggeringPolicy?,connectionSource?,布局？，过滤器*，附加器参考*）”。

我是否需要按以下方式移动：

```
<appender name="FileAppender" class="org.apache.log4j.DailyRollingFileAppender">
    <param name="File" value="${MDCapture.logfile.dir}/${APP_NAME}.log"/>
    <param name="BufferedIO" value="false"/>
    <param name="DatePattern" value="'.'yyyy-MMM-dd"/>
    <!-- HERE -->
    <param name="BufferSize" value="1000" /> 
    <!-- END HERE --> 
    <layout class="org.apache.log4j.TTCCLayout">
        <param name="DateFormat" value="ISO8601"/>
    </layout>
</appender> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-01T21:23:48.217

好吧，我只看到 13 行代码，但是

```
<appender name="AsyncAppenders" class="org.apache.log4j.AsyncAppender">
    <appender-ref ref="FileAppender"/>
    <param name="BufferSize" value="1000" />
</appender> 
```

有`<appender-ref>`和`<param>`标签的顺序错误。

WARN 元素类型“appender”的内容必须匹配“(errorHandler?, **param*** ,rollingPolicy?,triggeringPolicy?,connectionSource?,layout?,filter*, **appender-ref*** )”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:02:43.053

要使用 BufferSize，您必须至少拥有 log4j v1.2.17。请检查您正在使用的 jar 版本。

# gcc - 如何为 CMake 编译器添加前缀？

> ID：15897370
> 
> 赞同：2
> 
> 时间：2013-04-09T08:49:04.987
> 
> 标签：gcc, makefile, cmake

我想在编译器前面加上一个实用程序脚本，所以调用了 example 而`g++-4.7 main.cpp`不是`kinst-ompp g++-4.7 main.cpp`。

我尝试在 CMakeLists.txt 中执行此操作，但出现“未找到”错误：

```
set(CMAKE_CXX_COMPILER "${OMPP_CXX} ${CMAKE_CXX_COMPILER}")
set(CMAKE_C_COMPILER "${OMPP_CC} ${CMAKE_C_COMPILER}") 
```

如何使用 CMake 正确配置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:53:37.287

您应该避免以这种方式设置编译器 - 请参阅[cmake：指定编译器的问题 (2)](https://stackoverflow.com/questions/13054451/cmake-problems-specifying-the-compiler-2)和此[CMake 常见问题解答条目](http://www.cmake.org/Wiki/CMake_FAQ#How_do_I_use_a_different_compiler.3F)以获取更多信息。

我认为以下应该有效（删除您的 CMakeCache.txt 之后）：

```
export CC="kinst-ompp gcc-4.7" CXX="kinst-ompp g++-4.7" cmake <Path to CMakeLists.txt> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T12:49:12.457

我通过将我的编译器设置为前缀然后将真实的编译器名称作为第一个参数传递来让它工作。丑陋，我知道。

```
set(CMAKE_CXX_COMPILER "${OMPP_CXX}")
set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_COMPILER} ${commonCXXFlags} ${commonReleaseFlags}") 
```

# batch-file - 批处理文件输入验证 - 确保用户输入了一个字母

> ID：15897377
> 
> 赞同：1
> 
> 时间：2013-04-09T08:49:21.483
> 
> 标签：batch-file, user-input

正如标题所暗示的，我如何询问用户输入，如果它不是字母 goto :this。我正在制作一个批处理文件来搜索指定的网络驱动器并返回 .exe 文件列表。

```
I have done this but with to much code, i.e. 
If "%choice%"=="a" goto :scan
If "%choice%"=="b" goto :scan
etc. 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:51:53.400

```
@echo off
setlocal EnableDelayedExpansion
set letters=abcdefghijklmnopqrstuvwxyz
set /P drive=Enter drive:
rem Be sure that just one character is processed
set drive=%drive:~0,1%
rem Try to remove the character from letters; 
rem if the result is not equal: the character IS a letter
if "!letters:%drive%=!" neq "%letters%" goto scan 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:35:40.517

您可以使用 VBScript 更轻松地完成此操作，但这里有一个批处理解决方案：

```
setlocal enabledelayedexpansion
set /p choice=
set map=abcdefghijklmnopqrstuvwxyz
for /l %%i in (0,1,25) do (
    if /i %choice% equ !map:~%%i,1! goto scan
)
exit
:scan 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:11:31.483

```
@ECHO Off
SETLOCAL
SET letter=&SET /p letter="Please choose a single letter "
IF NOT DEFINED letter ECHO No choice made&GOTO :eof
ECHO "%letter%"|FINDSTR /i /b /e /r \"[a-z]\" >NUL
IF ERRORLEVEL 1 (ECHO NOT a single letter) ELSE (ECHO "%letter%" is a single letter) 
```

几乎就在那里 - 仅当条目包含时才会出现失败`"`

# java - 如何在 Java 中加载多个证书文件？

> ID：15897378
> 
> 赞同：1
> 
> 时间：2013-04-09T08:49:30.607
> 
> 标签：java, ssl, certificate, keystore

我正在尝试使用从两个文件（.p12 和 .p7b）加载的证书创建 SSL 连接。
我已尝试使用以下代码加载 .p12 文件

```
char []passwKey = "1234567".toCharArray();
        KeyStore ts = KeyStore.getInstance("PKCS12");
        ts.load(new FileInputStream("/home/user/Desktop/file.p12"), passwKey);
        KeyManagerFactory tmf = KeyManagerFactory.getInstance("SunX509");
        tmf.init(ts,passwKey);
        SSLContext sslContext = SSLContext.getInstance("TLS");
        sslContext.init(tmf.getKeyManagers(), null, null);
        SSLSocketFactory factory =sslContext.getSocketFactory();
        HttpsURLConnection.setDefaultSSLSocketFactory(factory);
        SSLSocket socket = (SSLSocket) factory.createSocket("www.host.com", 8883); // Create the ServerSocket
        String[] suites = socket.getSupportedCipherSuites();
        socket.setEnabledCipherSuites(suites);
        socket.startHandshake(); 
```

但我收到异常：

> javax.net.ssl.SSLHandshakeException：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法找到请求目标的有效证书路径

我相信我必须从 .p12 和 .p7b 文件（包含整个 CA 链）中创建一个 .jks 文件，但我对此很陌生，我不知道该怎么做。我发现的示例基于单个文件/证书。

更新：

我使用认证文件创建了一个密钥库（我相信我只需要 .p12 文件）但没有运气。所以我直接访问了该站点，并将证书导出为 .pem 并将其添加到密钥库中。在我的调试信息中，我现在收到“ServerHello”，但最后，我仍然得到

```
handling exception: javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure 
```

我尝试了几种解决方案，例如。 [Java 客户端证书通过 HTTPS/SSL](https://stackoverflow.com/questions/875467/java-client-certificates-over-https-ssl) 或 [获取 javax.net.ssl.SSLHandshakeException：收到致命警报：handshake_failure](https://stackoverflow.com/questions/11047100/getting-javax-net-ssl-sslhandshakeexception-received-fatal-alert-handshake-fai) 收到的 .p12 文件中的证书和从浏览器导出的证书出错，但它们都不起作用...

更新 2：

我试过这个：[https://stackoverflow.com/a/11908693/1215791](https://stackoverflow.com/a/11908693/1215791)并设法到达 ServerHelloDone （并找到受信任的证书......）。

但是，我现在要做的是使用 SOAP 请求登录，我得到了这个：

```
com.sun.xml.internal.messaging.saaj.soap.MessageImpl identifyContentType
SEVERE: SAAJ0537: Invalid Content-Type. Could be an error message instead of a SOAP message
Exception in thread "main" com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: com.sun.xml.internal.messaging.saaj.SOAPExceptionImpl: Invalid Content-Type:text/html. Is this an error message instead of a SOAP response?
    at com.sun.xml.internal.messaging.saaj.client.p2p.HttpSOAPConnection.call(HttpSOAPConnection.java:148)
    at SoapT.login(SoapT.java:241)
    at SoapT.main(SoapT.java:75) 
```

我相信这不是附加证书的问题，而是创建soap请求时的错误或服务器的错误（html）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:56:53.617

试试[not-yet-commons-ssl](http://juliusdavies.ca/commons-ssl/ssl.html)。

非常易于使用的 SSL 库。创建 SSLClient 并添加 Trust 材料

网页示例：

```
Client Example:

SSLClient client = new SSLClient();

// Let's trust usual "cacerts" that come with Java.  Plus, let's also trust a self-signed cert
// we know of.  We have some additional certs to trust inside a java keystore file.
client.addTrustMaterial( TrustMaterial.DEFAULT );
client.addTrustMaterial( new TrustMaterial( "/path/to/self-signed.pem" ) );
client.addTrustMaterial( new KeyMaterial( "/path/to/keystore.jks", "changeit".toCharArray() ) );

// To be different, let's allow for expired certificates (not recommended).
client.setCheckHostname( true );  // default setting is "true" for SSLClient
client.setCheckExpiry( false );   // default setting is "true" for SSLClient
client.setCheckCRL( true );       // default setting is "true" for SSLClient

// Let's load a client certificate (max: 1 per SSLClient instance).
client.setKeyMaterial( new KeyMaterial( "/path/to/client.pfx", "secret".toCharArray() ) );
SSLSocket s = (SSLSocket) client.createSocket( "www.cucbc.com", 443 ); 
```

# java - 如何使用透视投影矩阵？

> ID：15897381
> 
> 赞同：2
> 
> 时间：2013-04-09T08:49:43.433
> 
> 标签：java, opengl, lwjgl

我写了这个程序，但我希望正方形随着它移动得更远而改变大小。

```
package com.ncom.src;

import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import org.lwjgl.opengl.GL11;
import static org.lwjgl.util.glu.GLU.*;

import static org.lwjgl.opengl.GL11.*;

public class Main {
    public void start() {
        float y = 0;
        try {
            Display.setDisplayMode(new DisplayMode(800,600));
            Display.create();
        } catch (LWJGLException e) {
            e.printStackTrace();
            System.exit(0);
        }
        while (!Display.isCloseRequested()) {
            glMatrixMode(GL_PROJECTION);
            glLoadIdentity();
            glOrtho(0, 800, 600, 0, 500000000, -500000000);
            glMatrixMode(GL_MODELVIEW);
            glClear(GL_COLOR_BUFFER_BIT);
            glBegin(GL_QUADS);
                glVertex3f(350, 250, y);
                glVertex3f(350, 270, y);
                glVertex3f(370, 270, y);
                glVertex3f(370, 250, y);
            glEnd();
            Display.update();
            y -= 20;
        }

        Display.destroy();
        System.exit(0);
    }
    public static void main(String[] argv) {
        Main quadExample = new Main();
        quadExample.start();
    }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-30T15:22:06.100

该代码`glOrtho(0, 800, 600, 0, 500000000, -500000000);`用于正交视图，请尝试使用 GLU.gluPerspective()。例子：

```
GL11.glMatrixMode(GL_PROJECTION);
GL11.glLoadIdentity();
GLU.gluPerspective(field_of_vision, Display.getWidth()/Display.getHeight(), zNear, zFar);
GL11.glMatrixMode(GL_MODELVIEW);
GL11.glLoadIdentity(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T10:19:44.643

如果您想看到透视图，那么我将从使用透视投影开始。

```
 glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        near = 1; // near should be chosen as far into the scene as possible
        far  = 100;
        fov  = 1; // 1 gives you a 90° field of view. It's tan(fov_angle)/2.
        glFrustum(-aspect*near*fov, aspect*near*fov, -fov, fov, near, far); 
```

# c# - TcpClient / TcpListener 文件名

> ID：15897382
> 
> 赞同：-1
> 
> 时间：2013-04-09T08:49:44.793
> 
> 标签：c#, tcpclient, tcplistener

我正在根据我在[此处](https://stackoverflow.com/questions/11396454/sending-binary-file-tcpclient-file-is-larger-than-source)找到的示例实现一个简单的文件发送方法，但是在发送实际字节之前，我无法找到有关如何发送文件名和/或类型的任何参考。我见过的所有例子，都是在接收端手动设置文件名。

到目前为止，我唯一的想法是将它作为字符串单独发送，但我只是好奇我是否错过了一些更简单/方便的方法。那么，TcpClient/TcpListener 中是否有一种方法可以发送我错过的文件名？有没有一种我根本没有遇到过的常见方法？

如有必要，我也可以发布代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:57:07.450

您可以发送的只是“数据”，一个扁平的字节数组。因此，您将需要使用某种协议，发送者和侦听器都适用于数据。

你可以说你想传输“两个数据块”，在这种情况下你可以：

*   发送每个块的大小，然后是实际数据，然后是下一个块大小和数据，或者：
*   使用分隔符（仅在实际数据不包含该分隔符时才有效（即使这样也有解决方案，例如转义数据中的分隔符））

或者，您可以*格式化*数据，例如通过发送一个 Xml 文档，其中包含：

```
<myData>
  <filename>txt.txt</filename>
  <data>F83BA=</data>
</myData> 
```

问题当然是必须对文件内容进行*编码*才能验证 Xml（例如 base64 编码）。

# javascript - 从课堂上移动图像

> ID：15897386
> 
> 赞同：1
> 
> 时间：2013-04-09T08:50:00.590
> 
> 标签：javascript, html

如何从 html5 画布中的类访问图像？我从一个类加载图像，但要访问它并将其移动到画布上，我无法访问它。我可以在没有课程的情况下做到这一点。

没有类，代码可以正常工作。

```
 <script>
  var canvas = document.getElementById('myCanvas');
  var ctx = canvas.getContext('2d');
  var img1_x=10;
  var img1_y=10;
  ctx.font="14px Arial"; 

  //this is how you do classes
 //this is how you do classes
function ClassLoadImages(name1) {
  var img1 = new Image();
  this.x=img1_x;
  this.y=img1_y;
  this.name1=name1;
  img1.src = name1;

  img1.onload = function() {
  ctx.drawImage(img1, img1_x,  img1_y);

 };

//add this
 this.imgElement = img1;
};//func

  ClassLoadImages.prototype.m_move = function(){
     img1_x++;
   img1_y++;
      ctx.drawImage(img.imgElement,  img1_x,   img1_y);
     // ctx.fillText("finished loading " ,10,40);
  };

 function doGameLoop() {

    ctx.clearRect(0,0,600,400);
    img.m_move();
     if (img1_x>30)
     {
          clearInterval(gameLoop);

     }
 }

  var img= new ClassLoadImages('images/image4.jpg');
 gameLoop = setInterval(doGameLoop, 100);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:56:01.730

如果您的意思是在构造函数中创建的图像元素，那么您只需添加`new Image`to `this`：

```
//this is how you do classes
function ClassLoadImages(name1) {
    var img1 = new Image();
    this.x=10;
    this.y=10;
    this.name1=name1;
    img1.src = name1;

    img1.onload = function() {
    ctx.drawImage(img1, img1_x,  img1_y);

    };

    //add this
    this.imgElement = img1;
};//func 
```

然后您可以通过`img.imgElement`.

如果您的意思是您不能移动被引用的对象，那么您添加的公共方法中还有一个错字 -`ClassMoveImages.prototype.m_move`应该是`ClassLoadImages.prototype.m_move`为了访问您创建的对象的属性。

# c++ - 比较 argv[1][i] 数组 C++

> ID：15897388
> 
> 赞同：-11
> 
> 时间：2013-04-09T08:50:02.680
> 
> 标签：c++, visual-studio

我需要比较参数中的数组

有人能告诉我为什么这部分代码是错误的

```
{
for(int i=0;i<strlen(argv[3]);i++)
    if(strcmp((argv[3][i]),"c")==0){
        cout<<"C"<<endl;
        return (0);
    } 
```

谢谢.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:52:01.693

```
if(strcmp((argv[3][i]),"c")==0) 
```

这条线是错误的。

argv[3][i] 是一个字符，而不是一个字符串。你可能想要：

```
if(argv[3][i]=='c') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T08:57:02.770

我希望这是你想尝试的。

```
for(int i=0;i<strlen(argv[3]);i++)
{
if(argv[3][i]=='c')
   {
     cout<<"\n found c";

    }
} 
```

# regex - perl 数组中的正则表达式

> ID：15897390
> 
> 赞同：1
> 
> 时间：2013-04-09T08:50:06.050
> 
> 标签：regex, perl

我在 Perl 中有一个数组，它的值如下：

```
$Array[0] = "[a][b][c] good bad";
$Array[1] = "[d] apple";
$Array[2] = "[e][f] mango ";
$Array[3] = "[g] capgemini"; 
```

我需要一个常规的 exp 来查找`[]`.
我写了这个：

```
my @matched = grep {$_ ne ""} map { m/\[(.*?)\]/; $1; } @Array; 
```

但是，这只会找到第一个匹配项，例如`a`from `$Array[0]`，`e`from `$Array[2]`。
我想`a,b,c`从`$Array[0]`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:54:49.693

您对匿名哈希的使用和符号的省略令人困惑。不过，这对我有用：

```
#!/usr/bin/perl
use warnings;
use strict;

use Data::Dumper;

my @Array;
$Array[0]= "[a][b][c] good bad";
$Array[1]= "[d] apple";
$Array[2]= "[e][f] mango ";
$Array[3]= "[g] capgemini";
my @matched = map { m/\[(.*?)\]/g } @Array;
print Dumper \@matched; 
```

主要技巧是使用`/g`全局匹配选项并让匹配返回所有匹配项。

# selenium-ide - Selenium IDE：无法在新选项卡上执行操作

> ID：15897391
> 
> 赞同：0
> 
> 时间：2013-04-09T08:50:06.303
> 
> 标签：selenium-ide

我无法在新选项卡上执行操作。考虑以下场景：添加工单，添加工单后，页面转到查看工单页面（所有操作都在同一选项卡上执行）在此页面上，我有三个选项查看，编辑和删除工单。如果我单击查看或编辑图标，则会打开新选项卡。

一切都执行到上面但是打开新标签后，selenium ide无法识别或无法对新打开的标签执行操作。

（**注意**：-我们坚持使用 selenium ide 1.10.0）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T13:49:57.877

在选项卡上的元素之一上使用 waitForVisible。

还可以尝试使用速度滑块减慢执行速度，看看是否有帮助。

# ssl - Nginx 重定向到 SSL 上的主域

> ID：15897396
> 
> 赞同：3
> 
> 时间：2013-04-09T08:50:16.423
> 
> 标签：ssl, nginx

我有两个相同的域，由虚拟主机提供服务，`site.com`并且`additional.com`. 我只有第一个的 SSL 证书，并不真正想要另一个。当用户尝试登录时，我正在执行永久重定向：

```
server {
  listen   443;
  server_name  additional.com;
  rewrite ^/(.*) https://site.com permanent;
} 
```

...

```
server {
  listen 80;
  server_name site.com additional.com;

  root /home/site/production/public;

  location / {
    ...
  }
}

server {
  listen 443;
  server_name site.com;
  ssl                  on;
  ...
} 
```

这失败了，因为我将 SSL 流量代理到上行链路服务器，它无法处理它，因为它只谈论 HTTP 并且存在`SSL23_GET_SERVER_HELLO:unknown protocol`（对于 Chrome；Firefix 和 curl 的错误消息略有不同）。所以我不得不把它改成（注意http，而不是https）：

```
server {
  listen   443;
  server_name  additional.com;
  rewrite ^/(.*) http://site.com permanent;
} 
```

错误不再出现，但是当转到 /login 页面（应该是安全的并且上行链接重定向到 HTTPS）时，它不会重写，说明证书无效。如果您确认安全异常，您将被重定向到`site.com`登录页面并需要第二次单击`login`链接。

如何正确设置从`https://additional.com/login`点到点的重定向`https://site.com`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:30:08.990

恐怕如果您想从 HTTPS 重定向到 HTTPS，您将需要一个 SSL 证书来完成旅程的每一步。没有办法解决它 - 至少要杀死你的错误。

就是说...尝试所有的重写：

```
rewrite ^/(.*) https://site.com/$1 permanent; 
```

这应该保持使用的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T10:55:28.190

我发现一切都`443`应该是`443 ssl`并重写作品（感谢@Sebastien 指出`/$1`）：

```
server {
  listen   443 ssl;
  server_name  additional.com;
  rewrite ^/(.*) https://site.com/$1 permanent;
} 
```

# javascript - 下拉列表在 Knockout KoGrid 中不起作用

> ID：15897397
> 
> 赞同：3
> 
> 时间：2013-04-09T08:50:19.003
> 
> 标签：javascript, knockout.js, kogrid

我正在尝试使用自定义单元格模板在 KoGrid 单元格中显示下拉列表，但我不知道为什么它不能正常工作。

我有一个使用 的工作下拉列表的示例，`options, optionsText, optionsValue and optionsCaption`并且绑定可以正常工作。但是 KoGrid 中的类似下拉菜单不显示任何元素。我的问题是我错过了什么/做错了什么，我该如何解决这个问题？

链接到 jsFiddle：http: [//jsfiddle.net/AxyWz/6/](http://jsfiddle.net/AxyWz/6/)

HTML：

```
<p>
    Working drop-down list:
    <select data-bind="options: data, optionsText: 'name', optionsValue: 'id', optionsCaption: '-', value: selectedItemId"></select>
</p>

<p>
    Drop-down list not working in KoGrid:
    <div class="grid" data-bind="koGrid: gridOptions"></div>
</p>

<pre data-bind="text: ko.toJSON($root, null, 2)"></pre>

<script type="text/html" id="template">
    <select data-bind="options: $root.data, optionsText: 'name', optionsValue: 'id', optionsCaption: '-', value: $parent.entity[$data.field]"></select>
</script> 
```

Javascript：

```
function Item(id, name) {
    this.id = ko.observable(id);
    this.name = ko.observable(name);
    this.parentId = ko.observable();
}

function ViewModel() {
    this.selectedItemId = ko.observable();

    this.data = ko.observableArray([
        new Item(1, 'aaa'),
        new Item(2, 'sss'),
        new Item(10, 'xxx'),
        new Item(14, 'zzz')
    ]);

    this.gridOptions = {
        data: this.data,
        canSelectRows: false,
        columnDefs: [
            { field: 'id', displayName: 'id' },
            { field: 'name', displayName: 'name' },
            { 
                field: 'parentId', displayName: 'parent',
                cellTemplate: $.trim($('#template').html())
            },
        ]
    };
}

ko.applyBindings(new ViewModel()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:22:56.633

当您在单元格模板中时，您需要使用`$userViewModel`来访问您的“$root”视图模型。

从[文档](https://github.com/Knockout-Contrib/KoGrid/wiki/About-Custom-Templates)中：

> $userViewModel: {{ko binding context}}// 用于实例化网格的视图模型的访问器。

所以你需要写：

```
<script type="text/html" id="template">
    <select data-bind="options: $userViewModel.data, 
                       optionsText: 'name', optionsValue: 'id', 
                       optionsCaption: '-', value: $parent.entity[$data.field]">
    </select>
</script> 
```

演示[JSFiddle。](http://jsfiddle.net/JfnUT/)

# java - 转换时文件被截断

> ID：15897400
> 
> 赞同：1
> 
> 时间：2013-04-09T08:50:26.317
> 
> 标签：java, file, io, type-conversion

当我将一个包含许多文件的文件夹从 ANSI(windows-1252) 转换为 UTF8 时，一些文件被截断，而一个小文件完全空白。我尝试通过减小缓冲区大小来转换文件，但没有成功。有人对此有任何想法吗？？？

```
public class ConvertFromAnsiToUtf8 {

private static final char BYTE_ORDER_MARK = '\uFEFF';
private static final String ANSI_CODE = "windows-1252";
private static final String UTF_CODE = "UTF8";
private static final Charset ANSI_CHARSET = Charset.forName(ANSI_CODE);

public static void main(String[] args) {

List<File> fileList;
File inputFolder = new File(args[0]);
if (!inputFolder.isDirectory()) {
    return;
}
File parentDir = new File(inputFolder.getParent() + "\\"
                + inputFolder.getName() + "_converted");

if (parentDir.exists()) {
    return;
}
if (parentDir.mkdir()) {

} else {
    return;
}

fileList = new ArrayList<File>();
for (final File fileEntry : inputFolder.listFiles()) {
    fileList.add(fileEntry);
}

InputStream in;
Reader reader = null;
Writer writer = null;
try {
    for (File file : fileList) {
        in = new FileInputStream(file.getAbsoluteFile());
        reader = new InputStreamReader(in, ANSI_CHARSET);

        OutputStream out = new FileOutputStream(
                        parentDir.getAbsoluteFile() + "\\"
                                        + file.getName());
        writer = new OutputStreamWriter(out, UTF_CODE);
        writer.write(BYTE_ORDER_MARK);
        char[] buffer = new char[10];
        int read;
        while ((read = reader.read(buffer)) != -1) {
            System.out.println(read);
            writer.write(buffer, 0, read);
        }
    }
    reader.close();
    writer.close();
} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (UnsupportedEncodingException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}
}
} 
```

任何指针都会有所帮助。

谢谢，阿希什

# php - 如何让数组数据只输出整数 PHP

> ID：15897402
> 
> 赞同：1
> 
> 时间：2013-04-09T08:50:36.237
> 
> 标签：php, arrays, int

目前在我的开发网站上，我正在使用一个数组来输出服务器上的玩家数量和玩家总数。

通过线`$info['Players'] = $server_cache_data[1];`

它显示这样

> 1601.5.1/5EmpireCraft - 派系 - PvP!0250

正如你在我的网站上看到的[那样](http://dev.xitude.co.uk/minecraft-tracker/index.php)

我怎样才能让它只以整数（数字）输出？

我试图`string_resize($server_cache_data[1], 4)`把它降到 4，希望它能阻止这种情况，但没有运气。

感谢您的宝贵时间。

另请注意，您可以看到的输出由两个数组提供，玩家和控制的玩家总数`$info['MaxPlayers'] = $server_cache_data[2];`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:56:04.743

如果你必须得到`INT`最后 4 个字符的值，你可以使用

```
$info['Players'] = intval(substr($server_cache_data[1],-4)); 
```

如果您想要最后 4 位数字，即使它们以 0 开头，您也可以删除`intval()`呼叫

```
$info['Players'] = substr($server_cache_data[1],-4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:56:33.490

我想你正在寻找[`substr()`](http://php.net/manual/en/function.substr.php)

```
$str = server_cache_data[1];
$start = 0;
$length = 4;

$num = intval(substr($str, $start, $length)); // 1601 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:02:22.997

您可以使用 PHP 的类型杂耍功能：

```
echo intval("1601.5.1/5EmpireCraft - Factions - PvP!0250" + 0); 
```

无论数字有多少位，这都会返回第一个整数。

注意：这仅在数字是字符串的第一部分时才有效。

# android - Android Sqllite db本质上是静态的还是动态的？

> ID：15897403
> 
> 赞同：1
> 
> 时间：2013-04-09T08:50:36.830
> 
> 标签：android, sqlite

我对 Android 很陌生，在理解 android 中的 DB 概念时遇到了一些问题。

当我在 android 中创建我的表时，android 会给我的应用程序提供*静态*空间吗？或者当我向其中添加更多数据时，数据库大小会以*动态*方式增长？

如果它确实以*动态方式*增长，它可以增长到最大的空间是多少？

我的应用程序创建的数据库是持久的吗？Android 保证我的数据不会被 Android 操作系统删除？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T08:58:49.817

Sqlite 是一个数据库管理系统，但是是一个非常轻量级的 sql 版本。是的，当您将数据输入到它的表中时，数据库的大小会增加。它本身的数据（ text,int,float,image ）由二进制信息组成，因此它将发生。

> 如果它确实以动态方式增长，它可以增长到最大的空间是多少？

这取决于您的可用空间。

> 我的应用程序创建的数据库是持久的吗？Android 保证我的数据不会被 Android 操作系统删除？

是的，数据样式是持久性的，只要您不以编程方式或手动方式将其删除，它就会保留在系统中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:57:51.457

在 android 中，您的数据库作为文件保存在为您的应用程序分配的内部存储中，并且它是持久的。

通向您的 dB 的共同路径是

```
/data/data/<your-package-name>/databases 
```

[在此处](http://www.sqlite.org/limits.html)查看实施限制

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:02:38.960

单个问题主要有三个问题

第一的

`how much space it can grow to the max?` [看到这个](https://stackoverflow.com/questions/3482635/what-is-a-maximum-size-of-sqlite-database-on-android)

第二

`DB that is been created by my app is persistent?` [看到这个](https://stackoverflow.com/questions/6085988/android-persistence-alternative-to-sqlite)

最后的

`Android guarantees me that my data wont be removed by the Android OS?`

一旦您卸载了您的应用程序，您将无法返回。如果开发人员在私有路径中存储了额外的数据库文件，则可能是另一种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T09:03:11.470

从应用程序创建数据库时，数据库保存在`/data/data/APP-Name/Databases`. 随着您不断添加表，大小会增加，数据库的最大容量为 140 TB，并且是持久的。

# cassandra - Cassandra 列族大于节点驱动空间

> ID：15897406
> 
> 赞同：0
> 
> 时间：2013-04-09T08:50:45.660
> 
> 标签：cassandra

我想启动一个 cassandra 集群（例如 3 个节点），而我的应用程序只有一个列族。

阅读文档后，我了解了 cassandra 如何跨多个节点复制一个列族。

例如。每个节点都有 2Tb 的驱动器空间，列族在每个节点上复制，因此每个节点都包含它的完整副本。

如果几年后该列族将超过 2Tb 并且我无法增加驱动器空间会怎样？

如果我要添加更多 10 个节点，我希望将该列族拆分为多个部分并存储在节点上的不同驱动器上，这样它就可以增加到无限大。如果我理解正确，列族仅限于集群中最小的驱动器空间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:05:39.717

您描述的场景仅适用于将所有数据复制到所有节点的情况。您可以通过将复制因子 (RF) 设置为节点数来进行配置。

但是，RF 可以小于节点数，如果添加更多节点，则不需要扩展。

例如，如果您今天有 3 个 RF 为 3 的节点，如您所说，每个节点将包含所有数据的副本。但是如果再添加 3 个节点并将 RF 保持在 3，每个节点将拥有一半的数据。您可以继续添加更多节点，以便每个节点包含的数据比例越来越小。

因此，原则上您的数据可以有多大是没有限制的。

# php - 无法在 Joomla 中修改外部数据库！3.0.3。使用 php 请求

> ID：15897412
> 
> 赞同：1
> 
> 时间：2013-04-09T08:50:56.900
> 
> 标签：php, mysql, joomla, joomla-extensions

我一直在使用 Joomla 在我的本地服务器上创建一个网站！3.0.3。我已经成功地将一个外部数据库连接到这个网站并且可以查询它（见我之前的问题：[WHERE statement not working in Joomla! 3.0.3\. php request](https://stackoverflow.com/questions/15670555/where-statement-not-working-in-joomla-3-0-3-php-request)）。但是，当我尝试修改外部数据库中的条目时，服务器会返回错误屏幕。

这是我在 Joomla 后端使用的代码！（使用 Sourcerer 扩展）。我尝试将新货币添加到我的外部数据库中的 MySQL“货币”表中。

```
<?php

/**///////// LOAD EXTERNAL DATABASE (i.e. not the Joomla one) /////////**/

$option = array();
$option['driver'] = 'mysql'; // Database driver name
$option['host'] = 'localhost'; // Database host name
$option['user'] = 'root'; // User for database authentication
$option['password'] = ''; // Password for database authentication
$option['database'] = 'externaldatabase'; // Database name
$db = JDatabase::getInstance( $option );
/**///////// CREATE NEW QUERY OBJECT /////////**/

$query = $db->getQuery(true); //OK
/**///////// SELECT RECORDS & INSERT A NEW ROW /////////**/

$columns=array('ID', 'CurrencyCode', 'FullName');
$values=array('3', 'GBP', 'Pound Sterling');
$query->insert($db->quoteName('currency'));
$query->columns($db->quoteName($columns));
$query->values(implode(',', $values);

/**///////// RESET QUERY /////////**/

$db->setQuery($query); //OK

try {
    $result = $db->execute();
} catch (Exception $e) {
    // catch
}
?> 
```

浏览器返回以下两个错误：

*   **解析错误**：语法错误，意外的 ';' 在 C:\wamp\www\plugins\system\sourcerer\helper.php(450) 中：第 46 行运行时创建的函数
*   **致命错误**：函数名称必须是第 454 行 C:\wamp\www\plugins\system\sourcerer\helper.php 中的字符串

你有什么建议吗？在此先感谢您的帮助。

* * *

这是适用于您感兴趣的人的更新代码！

```
<?php
$values=array('3', '"GBP"', '"Pound Sterling"');
$query->insert($db->quoteName('currency'));
$query->columns($db->quoteName($columns));
$query->values(implode(',', $values)**)**;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:58:37.403

您忘记了右括号：

```
$query->values(implode(',', $values);
//                        Here ----^ 
```

所以它必须是： `$query->values(implode(',', $values));`

# html - 关闭 HTML 脚本标签

> ID：15897413
> 
> 赞同：31
> 
> 时间：2013-04-09T08:51:03.167
> 
> 标签：html, tags, external-js

`<script>`如果我这样写标签，我只是好奇为什么我的 JavaScript 不能运行（在 Firefox 和 IE 中测试） ：

```
<script type="text/javascript" src="script.js"/> 
```

如果我将该行更改为：

```
<script type="text/javascript" src="script.js"></script> 
```

所以我的问题是：为什么我不能关闭`script`开始标签中的标签，因为我里面没有任何内容。

我的 JavaScript 代码很简单，只是：

```
alert("test"); 
```

注意：我检查了 firefox 错误控制台，没有错误。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-09T08:53:09.523

自闭合标签的概念是一个 XML 概念。您不能在 HTML 中使用它们。（您可以在 XHTML 中使用它们，但前提是文档以 XML 内容类型提供，而不是[提供为 t`text/html`](http://www.w3.org/TR/xhtml-media-types/#C_2)）。

在 HTML 中，某些元素（例如`<img>`）不能有任何内容，因此它们没有结束标记）。

由于脚本可以具有`src`属性或脚本可以在元素内部，`<script>`因此不是其中之一。

（HTML 5 允许一个`/`字符出现在定义为 EMPTY 的元素的开始标记的末尾，但对于沉迷于 XML 的人来说，这只是糖，在语言中没有任何意义）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-09T08:52:40.737

也许你正在使用 HTML 5 doctype，为此使用 html 4 doctype

# .net - 单击数据网格中的按钮后未到达代码

> ID：15897415
> 
> 赞同：0
> 
> 时间：2013-04-09T08:51:08.370
> 
> 标签：.net

我正在一个报告网站上工作，目前有一个带有按钮列的数据网格。我需要的是在单击其中一个按钮时加载另一个页面以及运行 SQL 查询并填充另一个数据网格（但为了使事件正常工作，第二个数据网格位于同一页面上）。我遇到的问题是我创建的 Sub 似乎是无法访问的代码。据我了解，事件处理程序需要是 ItemCommand。这是我的代码：

```
Private Sub DataGrid2_ItemCommand(source As Object, e As DataGridCommandEventArgs) Handles DataGrid2.ItemCommand
        Dim DT1 As New DataTable
        Dim DR1 As SqlClient.SqlDataReader
        Using cn As New SqlClient.SqlConnection
            cn.ConnectionString = constr
            cn.Open()
            'not hitting the breakpoint which is why the datagrid isn't populating
            SQLstr = "long SQL query"
            Using cmd As New SqlClient.SqlCommand(SQLstr, cn)
                cmd.CommandText = SQLstr
                DR1 = cmd.ExecuteReader
                Dim DR As DataRow
                If DR1.HasRows Then
                    DT1.Load(DR1)
                    For Each col In DT1.Columns
                        col.ReadOnly = False
                    Next
                    If Not DR1 Is Nothing Then
                        DT1.Load(DR1)
                        DataGrid2.DataSource = DT1
                        DataGrid2.DataBind()
                    Else
                        DataGrid2.DataSource = Nothing
                        DataGrid2.DataBind()
                    End If
                End If
            End Using
        End Using
    End Sub 
```

我引入了一个断点，其中创建了子，但单击数据网格中的按钮时没有命中它。有人可以帮忙吗？

# asp.net - 将 QueryString 中的多个值传递到 ASP.NET 中的新页面

> ID：15897427
> 
> 赞同：0
> 
> 时间：2013-04-09T08:51:52.873
> 
> 标签：asp.net, query-string

我已经在 StackOverflow 上寻找其他解决方案，但我似乎无法弄清楚。我在数据网格中有这个链接按钮：

```
 <asp:LinkButton 
        ID="lnkname" runat="server"
        Text='<%#Eval("Titel") %>'
        PostBackUrl='<%#"Details.aspx?ID="+Eval("ID").toString()%>'
        CausesValidation="false">
    </asp:LinkButton> 
```

这是参数：

```
<asp:ControlParameter ControlID="txtTitel" DefaultValue="*" Name="Titel" 
PropertyName="Text" Type="String" ConvertEmptyStringToNull="False" /> 
```

我想将 ID 值带到下一页： details.aspx 但我收到以下错误：

> 输入字符串的格式不正确。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

```
Exception Details: System.FormatException: Input string was not in a correct format. 
```

我知道这与 ID 是一个 INT 有关，但我不知道如何解决它。

注意：我在 VB.NET 中做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:00:49.630

将其转换为字符串存在问题

```
+Eval("ID").toString() 
```

用这个

```
PostBackUrl='<%# "Details.aspx?ID="+Eval("ID").ToString() %>' 
```

`.toString()`应该是`ToString()`

## 编辑 1

或者你可以使用

```
Try using a HyperLinkField 
```

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlinkfield.aspx)

```
<asp:HyperLinkField
                 HeaderText="Client IP"
                 DataNavigateUrlFields="IP"
                 DataNavigateUrlFormatString="Details.aspx?id={0}"
                 DataTextField="ID"
                 DataTextFormatString="{0}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:31:51.260

如果您需要传递多个参数，那么您可以`&`在它们之间使用例如

```
PostBackUrl='<%# "Details.aspx?ID="+Eval("ID")+"&x=50" %>' 
```

**重要的**

每当您将任何类型的变量（如值）连接（连接）到`Eval("ID")`字符串（如 我确信这种行为和`"Details.aspx?ID="``ToString()``C#``VB.NET`

所以你可以简单地写

```
PostBackUrl='<%# "Details.aspx?ID="+Eval("ID") %>' 
```

# bit-manipulation - 检查一个位是否在一系列位集中仅设置一次

> ID：15897431
> 
> 赞同：10
> 
> 时间：2013-04-09T08:52:00.057
> 
> 标签：bit-manipulation

我试图找到实现这一目标的正确方法：假设我们有一组位集，如下所示：

```
00100
00101
10000
00010
10001 
```

我想测试一下，哪些位在所有位集中只设置一次。在示例中，结果将是：

```
00010 
```

因为第 4 位是唯一在所有系列中只出现一次的位。

通过按位逻辑运算哪个是最好的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T09:06:53.923

如您所见，您不能使用单个集合来存储中间结果，因为您需要区分每个位的 3 种状态：从不设置、设置一次和设置多次。

因此，您至少需要 2 个中间结果。例如，您可以分别跟踪至少设置一次的位和多次设置的位：

```
int atLeastOnce = 0;
int moreThanOnce = 0;
for (int current: sets) {
    moreThanOnce |= (atLeastOnce & current);
    atLeastOnce |= current;
}
int justOnce = atLeastOnce & ~moreThanOnce; 
```

或者使用`BitSet`s （它看起来不那么优雅，因为`BitSet`它不是不可变的）：

```
BitSet atLeastOnce = new BitSet();
BitSet moreThanOnce = new BitSet();
for (BitSet current: sets) {
    BitSet moreThanOnceInCurrent = (BitSet) atLeastOnce.clone();
    moreThanOnceInCurrent.and(current);
    moreThanOnce.or(moreThanOnceInCurrent);
    atLeastOnce.or(current);
}
atLeastOnce.andNot(moreThanOnce);
BitSet justOnce = atLeastOnce; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T09:09:51.530

您可以使用一次两次的方法：

*   对于每个集合
    *   对于每个元素
        *   如果元素在`once`集合 中
            *   将其添加到`twice`集合中
        *   别的
            *   将其添加到`once`集合中
*   返回`once`——`twice`

这里的技巧是它可以并行执行：

*   对于每个集合`C`
    *   `twice`:=`twice`或 (`once`与`C`)
    *   `once`:=`once`或`C`

实现可能如下所示：

```
BitSet once = new BitSet();
BitSet twice = new BitSet();
for(BitSet b : sets){
  BitSet mask = (BitSet) b.clone();
  mask.and(once);
  twice.or(mask);
  once.or(b);
}
once.andNot(twice);
return once; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T09:13:47.610

```
int length = 5;
int count[] = new int[length];
for (i = 0; i < bitset.length(); i++) {   
    int value = bitset[i];
    unsigned int count = 0;

    for (int j = 0; j < length; j++) {           // until all bits are zero
        if ((value & 1) == 1)     // check lower bit
            count[j]++;
        value >>= 1;              // shift bits, removing lower bit
    }
}

int number = 00000;
for (int k = 0; k < 5; k++) {
    if (count[k] == 1) 
         number = number | 1; 
    number >>= 1;
}

number is desired answer 
```

# c#-4.0 - 如何捕获 HttpRequestValidationException

> ID：15897433
> 
> 赞同：5
> 
> 时间：2013-04-09T08:52:00.420
> 
> 标签：c#-4.0, asp.net-mvc-4

发生 HttpRequestValidationException 时，如何将用户重定向到自定义错误页面。我试图在我的 basecontroller 中捕捉它：

```
protected override void OnException(ExceptionContext exceptionContext)
    {
      if (exceptionContext.Exception is HttpRequestValidationException)
        {
          this.View("CustomError").ExecuteResult(this.ControllerContext);
        }
    } 
```

但我仍然得到异常：从客户端检测到潜在危险的 request.form 值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T08:58:19.490

此异常发生在请求执行的早期，并且无法由`OnException`基本控制器中的方法处理。您可以编写一个全局异常处理程序，如我在[`this post`](https://stackoverflow.com/a/5229581/29407).

# javascript - Javascript：刷新父页面而不完全重新加载

> ID：15897434
> 
> 赞同：6
> 
> 时间：2013-04-09T08:52:00.320
> 
> 标签：javascript, html

用户通过花式框（javascript）弹出窗口登录后，我希望重新加载父页面，以便他们可以访问登录的功能。

目前我正在这样做：

```
<a href="javascript:window.top.location.reload(true)" class="continue">Continue</a> 
```

这很好用，但唯一的问题是它完全重新加载了整个页面：重新下载所有 css 和 javascipt 等。

我要做的就是正常重新加载页面，而不是完全刷新。我怎样才能做到这一点？

（我不知道确切的 URL，因为登录可以通过 fancybox 从任何页面完成，所以我无法对 URL 进行硬编码。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T08:58:06.773

我在*facebook graph api*中看到的另一种重新加载页面的方法如下：

```
window.location = window.location 
```

或者在你的情况下：

```
window.top.location = window.top.location 
```

此解决方案在不尝试重新发送`POST`请求的情况下重新加载页面。可能有用。有关更多信息，请查看以下[SO 问题](https://stackoverflow.com/questions/2405117/difference-between-window-location-href-window-location-href-and-window-location)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-17T18:21:04.213

采用：

```
location.replace(location.href.split('#')[0]); 
```

on hash 是必需的`split`，否则不会刷新带有 hash 的 url。

如果您想在浏览器历史记录中保留之前的加载，请使用[`assign`](https://developer.mozilla.org/en-US/docs/Web/API/Location/assign)而不是[`replace`](https://developer.mozilla.org/en-US/docs/Web/API/Location/replace).

`href`据[MDN](https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/href)称，Opera 目前不支持。

# php - LDAP with PHP - 获取特定成员的所有组，包括组的完整 DN

> ID：15897436
> 
> 赞同：0
> 
> 时间：2013-04-09T08:52:00.960
> 
> 标签：php, filter, ldap

我在我的应用程序中有此查询，以从特定用户所属的 LDAP 服务器获取所有组。是否可以更改或扩展此 ldap_search() 查询以返回它找到的组的完整 DN？

```
ldap_search($conn, null, '(&(objectClass=groupOfNames)(member='.$searchUser.'))', array('cn')); 
```

或者是实现这一点的唯一方法是为每个返回的结果执行一个 ldap_get_dn() ？

我已经尝试将“dn”添加到属性数组中，但结果集中始终为空。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:51:23.733

所有搜索结果都包含与搜索参数匹配的条目的可分辨名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T09:44:20.260

猜猜没有其他方法可以做到这一点。

首先做一个`ldap_serach`这样的： `ldap_search($conn, null, '(&(objectClass=groupOfNames)(member='.$searchUser.'))', array('cn'));`

然后遍历所有结果并`ldap_get_dn()`为每个结果做一个以获得完整的结果`dn`。

# map - 哪个是切割地图的正确 SRS？

> ID：15897439
> 
> 赞同：0
> 
> 时间：2013-04-09T08:52:05.047
> 
> 标签：map, openlayers

我已经使用 MapTiler 剪切图像，步骤：

1.  选择“Google Maps Comatible（球形墨卡托）”。
2.  添加图像。
3.  选择“WGS84-纬度和经度（大地测量）”。
4.  设置最小缩放 0，最大缩放 4。

然后我得到了 5 个文件夹，分别命名为“0”、“1”、“2”、“3”和“4”。

我曾经`OpenLayers.Layer.XYZ`展示过这张地图，但是上下错位了。哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:41:28.660

每当处理 Google 地图时，我都会使用“EPSG:900913”作为 SRS。

# javascript - Windows Phone 8 Launcher-App 设置为横向时向网站提交错误的宽度和高度

> ID：15897440
> 
> 赞同：1
> 
> 时间：2013-04-09T08:52:04.730
> 
> 标签：javascript, css, xaml, windows-phone-8, landscape

我正在开发一个启动我的网站的启动器应用程序。在移动 Internet Explorer 上它工作正常（横向模式），但是当我尝试使用我自己的应用程序（固定为横向模式并包含网络浏览器）时，WebBrowser 将错误的宽度和高度发送到我的网站（480x800）但由于风景，它必须是 800x480。

是否有解决此问题的方法或任何解决方法？

# android - Google Map V2 android错误Inflating class fragment错误

> ID：15897441
> 
> 赞同：6
> 
> 时间：2013-04-09T08:52:05.810
> 
> 标签：android, google-maps, android-fragments, android-fragmentactivity, layout-inflater

我正在使用选项卡创建一个应用程序，并且我在其中一个选项卡中有地图，当我从它打开地图时工作正常，当我访问其他一些选项卡时它也工作正常，但是当我回到地图选项卡应用程序崩溃时有这个错误。

```
04-09 14:10:43.866: E/AndroidRuntime(28184): android.view.InflateException: Binary XML file line #42: Error inflating class fragment
04-09 14:10:43.866: E/AndroidRuntime(28184):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
04-09 14:10:43.866: E/AndroidRuntime(28184):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
04-09 14:10:43.866: E/AndroidRuntime(28184):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
04-09 14:10:43.866: E/AndroidRuntime(28184):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-09 14:10:43.866: E/AndroidRuntime(28184):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-09 14:10:43.866: E/AndroidRuntime(28184):    at com.research.fragmenttabstudy.tabA.TodaysDealLocation.onCreateView(TodaysDealLocation.java:43) 
```

这是我的代码：

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        Log.d("err","todaysdeal location");
        Log.d("err","todaysdeal location"+inflater.toString()+" "+container.toString()+" ");
        super.onCreateView(inflater, container, savedInstanceState); 
//      map.clear();
        View view = inflater.inflate(R.layout.todays_deal_location, container,
                false);

        Log.d("err",view.toString());
        back = (ImageView) view.findViewById(R.id.list);
        back.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                // TODO Auto-generated method stub
                // Constants.passcode_chk = 0;
                // finish();
                mActivity.popFragments();
            }
        });
        return view;
    }
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        map = ((SupportMapFragment) getFragmentManager().findFragmentById(
                R.id.mapp)).getMap();
        map.setMapType(GoogleMap.MAP_TYPE_NORMAL);

    } 
```

xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/topbar" />

    <!-- <ImageView -->
    <!-- android:id="@+id/deallistmenu" -->
    <!-- android:layout_width="wrap_content" -->
    <!-- android:layout_height="wrap_content" -->
    <!-- android:layout_marginLeft="5dp" -->
    <!-- android:layout_marginTop="9dp" -->
    <!-- android:src="@drawable/deallist_menubtn" /> -->

    <ImageView
        android:id="@+id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="7dp"
        android:layout_marginTop="7dp"
        android:src="@drawable/map_list" />

    <RelativeLayout
        android:id="@+id/frameLayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@id/imageView1"
        android:layout_marginTop="-4.8dp" >

        <!-- box layout.................................................................... -->

        <!-- box layout.................................................................... -->

        <fragment
            android:id="@+id/mapp"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_below="@+id/tv_location"
            android:name="com.google.android.gms.maps.SupportMapFragment" />

        <!-- <ZoomControls -->
        <!-- android:id="@+id/zoomControls" -->
        <!-- android:layout_width="wrap_content" -->
        <!-- android:layout_height="wrap_content" -->
        <!-- android:layout_alignParentBottom="true" -->
        <!-- android:layout_alignParentLeft="true" -->
        <!-- android:layout_marginBottom="30dp" -->
        <!-- android:layout_marginLeft="100dp" /> -->

    </RelativeLayout>

    <TextView
        android:id="@+id/barTitle"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:gravity="center"
        android:lines="1"
        android:maxLines="1"
        android:paddingLeft="50dip"
        android:paddingRight="55dip"
        android:singleLine="true"
        android:text=""
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@android:color/white"
        android:textSize="18dp" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-07-01T13:43:32.800

您的问题是您已经在 XML 中声明了 google maps v2 片段，因此每次膨胀 XML 时都会生成一个新片段。但是，片段的 id 在 XML 中是硬编码的，因此它会尝试使用与已经运行的片段相同的 id 创建新片段。两个正在运行的片段不能具有相同的 id，因此应用程序崩溃。

解决此问题的最佳方法是以编程方式制作地图片段。可以在 Google 地图示例项目的 ProgrammaticDemoActivity.java 部分中找到一个很好的示例。

但是，如果由于某种原因您必须在 XML 中声明您的片段，您可以通过在离开视图时杀死旧的地图片段来使其工作，以便可以创建新的片段。

您可以执行以下操作：

```
private void killOldMap() {
    SupportMapFragment mapFragment = ((SupportMapFragment) getSherlockActivity()
            .getSupportFragmentManager().findFragmentById(R.id.map));

    if(mapFragment != null) {
        FragmentManager fM = getFragmentManager();
        fM.beginTransaction().remove(mapFragment).commit();
    }

} 
```

然后调用它`onDetach()`并`onDestroyView()`确保旧地图被杀死。

正如您所看到的，这是一种 hack，您最好只是以编程方式制作您的应用程序，而不是使用 XML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-17T06:38:34.733

尝试这个...

从 onDetach() 和 onDestroyView() 调用此函数以终止现有片段事务。

```
private void commitMaps() {
    if (null != mapFragment) {
        getFragmentManager().beginTransaction().remove(mapFragment).commitAllowingStateLoss();
    }
} 
```

如果您 commit() 存在地图事务，有时您会收到“IllegalStateException：onSaveInstanceState 后无法执行此操作”。为避免此异常，您应在删除现有事务时使用 commitAllowingStateLoss()。

[commit() 和 commitAllowingStateLoss() 的](http://www.androiddesignpatterns.com/2013/08/fragment-transaction-commit-state-loss.html)区别

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T11:00:32.047

确保您的活动扩展了片段活动并替换

```
map=((SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

并删除“ `android:layout_below="@+id/tv_location" because it is inside relative layout`”

去吧，让我知道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-24T17:54:19.957

已经创建了一个地图片段，当您尝试返回地图页面时，它会尝试在其顶部创建另一个片段。下面的代码对我来说终于可以正常工作了：

XML:

```
<fragment
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"/>
```

请注意，我使用了 SupportMapFragment 而不是 MapFragment。

爪哇：

```
 @Override
public void onDestroyView() {
    super.onDestroyView();
    Fragment f = getActivity().getSupportFragmentManager().findFragmentById(R.id.map);
    if (f != null)
        getFragmentManager().beginTransaction().remove(f).commit();
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-09T09:00:42.433

我在您提供的代码中看到的第一个问题是这一行：

```
map = ((SupportMapFragment) getFragmentManager().findFragmentById(R.id.mapp)).getMap(); 
```

您试图`SupportMapFragment`使用通常的`FragmentManager`. 这是错误的。要获取`SupportMapFragment`对象，您必须`SupportFragmentManager`像这样使用：

```
map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.mapp)).getMap(); 
```

但我的猜测是，你现在遇到的问题还不是源于这个错误。我认为您以错误的方式引用`google-play-services`图书馆的图书馆。`google-support-v4`

你可以看看我写的这篇关于如何添加`Google Map API V2`到你的应用程序的博客文章：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

**更新：**

如果您的最小 SDK 为 11，那么您可以将片段更改为以下代码：

```
<fragment
        android:id="@+id/mapp"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_below="@+id/tv_location"
        android:name="com.google.android.gms.maps.MapFragment" /> 
```

# vim - Vim - 根据输入猜测编程语言？

> ID：15897442
> 
> 赞同：2
> 
> 时间：2013-04-09T08:52:05.873
> 
> 标签：vim, input, syntax-highlighting

有谁知道如何让 vim 根据您的输入猜测新文件的编程语言并使用适当的语法突出显示？到目前为止，语法突出显示仅在它知道文件扩展名（在我保存它之后）时才有效，这很好，但有时我很懒，想制作一个新文件而不保存它直到以后。

例如，如果我要开始一个新文件并输入：

```
#include <stdlib.h> 
```

我希望它自动开始使用 C 语法高亮显示，比如在我按下回车键之后，其他语言（如 Python）也是如此。

我对vim有点菜鸟，不知道vimscript，所以请不要让它太复杂。任何帮助表示赞赏。

谢谢，西蒙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:13:49.860

Vim 使用文件路径/名称/扩展名和某些特征文件内容来检测文件类型；使用什么取决于特定类型。

您可以通过重新触发检测

```
:filetype detect 
```

对于 C/C++，检测基于文件扩展名。要添加基于内容的检测，您必须自己编写；详情见`:help new-filetype-scripts`。在实践中，我建议`:setf c`在需要时手动进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:08:05.277

这可以安排，但性能可能是一个小问题（取决于你想变得多么聪明）并且手动设置语法要容易得多：

```
:setf c 
```

您还可以设置缓冲区文件名；这将相应地设置语法，通常：

```
:file x.c 
```

（这不会保存文件。）

如果您确实想要自动猜测，您将使用 autocmd 来触发它，然后可以猜测文件类型是否`&ft`为空（即，如果它还没有这样做）。

# variables - 当我没有正确声明变量时，使 VB 编译器发出警告

> ID：15897447
> 
> 赞同：4
> 
> 时间：2013-04-09T08:52:15.303
> 
> 标签：variables, vb6, type-safety

当我忘记声明变量时，如何使 VB6 编译器失败？

这将停止各种键入错误（键盘和数据类型）以及当它试图访问意外的东西时这样的[错误。](https://stackoverflow.com/questions/15894938/arguments-not-optional-in-vb6)

未正确声明变量导致的问题：

*   [使用未定义变量时出现无法解释的错误，但实际上指向其他错误](https://stackoverflow.com/q/15894938/588306)
*   [由于拼写错误，变量在不同时间具有不同的值](https://stackoverflow.com/q/870962/588306)
*   试图访问其范围之外的变量似乎未初始化

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T08:52:15.303

你应该使用`Option Explicit`. 这应该放在每个模块和表单的代码部分的第一行。

您还可以通过转到工具 > 选项 > 需要变量声明来配置 VB6 IDE 以将其自动添加到所有新模块。

# sql - 它是 SQL Server 2008 中的错误吗？

> ID：15897450
> 
> 赞同：4
> 
> 时间：2013-04-09T08:52:28.080
> 
> 标签：sql, sql-server-2008

```
create table Mytable1
(ID int,
Fname varchar(50)
)

create table Mytable2
(ID int,
Lname varchar(50)
)

insert into Mytable1 (ID,Fname)
values (1,'you')
insert into Mytable1 (ID,Fname)
values (2,'Tou')
insert into Mytable1 (ID,Fname)
values (3,'Nou')

insert into Mytable2 (ID,Lname)
values (1,'you2') 
```

`Fname`表中不存在该字段`Mytable2`但我们有以下查询的结果：

```
select * from Mytable1 where Fname in (select Fname from Mytable2) 
```

注意：我使用 sql server 2008 结果是表 Mytable1 的所有行

它是 SQL 中的错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T09:06:36.127

不，这不是错误。

如果将表别名添加到整个查询中使用的字段，您可以更清楚地看到发生了什么：

```
select * from Mytable1 mt1 
where mt1.Fname in (select mt1.Fname from Mytable2 mt2) 
```

- IE。子查询引用（并返回）来自主查询的值。

如果将查询更改为：

```
select * from Mytable1 mt1 
where mt1.Fname in (select mt2.Fname from Mytable2 mt2) 
```

- 你得到一个错误。

[（这里](http://sqlfiddle.com/#!3/77a67/7)的 SQLFiddle ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:58:50.253

不，这不是错误：[http ://bugs.mysql.com/bug.php?id=26801](http://bugs.mysql.com/bug.php?id=26801)

显然，这`Fname`来自`Mytable1`：

```
mysql> select *, (select Lname from Mytable1 limit 1) from Mytable2 where Lname in (select Lname from Mytable1 );
+------+-------+--------------------------------------+
| ID   | Lname | (select Lname from Mytable1 limit 1) |
+------+-------+--------------------------------------+
|    1 | you2  | you2                                 |
+------+-------+--------------------------------------+
1 row in set (0.01 sec) 
```

# gcc - gcc/g++ 中的尾递归

> ID：15897452
> 
> 赞同：8
> 
> 时间：2013-04-09T08:52:36.767
> 
> 标签：gcc, recursion, compiler-optimization, tail-recursion

我试图搜索，但无法找到：函数需要什么才能使 gcc 优化尾递归？是否有包含最重要案例的参考资料或清单？由于这是特定于版本的，我感兴趣的是 4.6.3 或更高版本（越新越好）。然而，事实上，任何具体的参考将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T10:04:49.913

`-O2`启用后，如果可能，gcc 将执行尾调用优化。现在，问题是：什么时候可能？

只要递归调用发生在（单个）语句之前或内部，就可以消除*单个*`return`递归调用，因此除了可能返回不同的值之外，没有可观察到的副作用。这包括返回涉及三元运算符的表达式。
请注意，即使在返回表达式中有*多个*递归调用（例如在著名的斐波那契示例`return (n==1) ? 1 : fib(n-1)+fib(n-2);`中：），仍然会应用尾调用递归，但只会应用到最后一个递归调用。

作为一个明显的特殊情况，如果编译器可以证明递归函数（及其参数）符合常量表达式，它可以（达到可配置的最大递归深度，默认为 500）不仅消除尾调用，而且消除整个函数的执行。这是 GCC 经常且非常可靠地执行的操作`-O2`，甚至包括对某些库函数的调用，例如`strlen`对文字的调用。

# ios - 使用可访问性来存储其他信息？

> ID：15897458
> 
> 赞同：1
> 
> 时间：2013-04-09T08:52:51.770
> 
> 标签：ios, objective-c, uiaccessibility

在我的应用程序中，我想让 UILabel 为我的应用程序保存两个字符串（一个用于显示，另一个用于稍后使用）。在考虑子类化时，我遇到了`accessibilityValue`所有 UIElements 的属性。不知道是不是为了这个目的。所以请指导我，如果我可以将其`accessibilityValue`用于我的目的，或者我应该采用其他方式

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T08:55:22.243

不，你真的不应该那样做。`accessibilityValue`用于 VoiceOver，即使您不关心使用它（和*需要*）它的用户，它仍然是一个糟糕的 OO 实践。

继续并对其进行子类化。

# javascript - 等待异步 grunt 任务完成

> ID：15897469
> 
> 赞同：4
> 
> 时间：2013-04-09T08:53:11.410
> 
> 标签：javascript, asynchronous, gruntjs

我收到了一个 grunt 设置，其中一个新任务应该执行（grunt.task.run）已经存在的任务。要执行的任务是异步的，新任务应该等到异步任务完成。

这样做的首选方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T16:50:04.257

grunt 已经涵盖了这一点，您应该将您的任务声明为异步任务，并在您的任务中使用 done() 函数来告诉 grunt 它已经完成，看看[这个 repo](https://github.com/robdodson/async-grunt-tasks/blob/master/tasks/grunt-read-write-local.js)和[这篇文章](https://robdodson.me/posts/asynchronous-grunt-tasks/)，这对我很有帮助我首先必须处理异步任务。

看不到你的 gruntfile，这就是我所能说的，但可以随意更新你的帖子，并带有指向 grunfile 的链接:)

# arrays - nullglob 和数组

> ID：15897473
> 
> 赞同：3
> 
> 时间：2013-04-09T08:53:19.953
> 
> 标签：arrays, bash, glob, shopt

我可以创建一个数组，然后从这个数组中删除

```
$ foo=(a b c)

$ unset foo[0]

$ echo ${foo[*]}
b c 
```

但是，如果`nullglob`已设置，则我无法从数组中删除

```
$ shopt -s nullglob

$ foo=(a b c)

$ unset foo[0]

$ echo ${foo[*]}
a b c 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:07:35.350

```
unset 'foo[0]' 
```

> Bash 认为它`var[1]`是一个 glob，没有找到与其匹配的文件，并且根据`nullglob`删除它的指令，导致你的脚本运行`unset` 而不是`unset var[1]`- 并且没有任何东西被取消。解决此问题的正确方法是引用变量名（并始终明确指定）`-v`：. `unset -v 'var[1]'`

[§ nullglob](http://mywiki.wooledge.org/glob#nullglob)

# c# - 资源中的图像作为excel中的页脚

> ID：15897477
> 
> 赞同：0
> 
> 时间：2013-04-09T08:53:24.673
> 
> 标签：c#, image, excel, footer

如何在创建的 excel 文件中使用资源中的图像作为页脚？

这肯定行不通：

```
xlWorkSheet.PageSetup.CenterFooterPicture = Properties.Resources.stopka; 
```

因为：无法将类型“System.Drawing.Bitmap”隐式转换为 Microsoft.Office.Interop.Excel.Graphic'

好的，这有效：

```
 xlWorkSheet.PageSetup.CenterFooterPicture.Filename = Application.StartupPath + "\\stopka.png";
  xlWorkSheet.PageSetup.CenterFooterPicture.LockAspectRatio = Microsoft.Office.Core.MsoTriState.msoTrue;
  xlWorkSheet.PageSetup.CenterFooterPicture.Width = 590;
  xlWorkSheet.PageSetup.CenterFooter = "&G"; 
```

但这不是我需要的。我想从项目资源而不是从应用程序文件夹中获取图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:30:57.430

这有效：

```
System.Reflection.Assembly CurrAssembly = System.Reflection.Assembly.LoadFrom(System.Windows.Forms.Application.ExecutablePath);
  System.IO.Stream stream = CurrAssembly.GetManifestResourceStream("Oferty_BMGRP.Resources.stopka.png");
  string temp = Path.GetTempFileName();
  System.Drawing.Image.FromStream(stream).Save(temp);

  xlWorkSheet.PageSetup.CenterFooterPicture.Filename = temp; //Application.StartupPath + "\\Resources\\stopka.png";
  xlWorkSheet.PageSetup.CenterFooterPicture.LockAspectRatio = Microsoft.Office.Core.MsoTriState.msoTrue;
  xlWorkSheet.PageSetup.CenterFooterPicture.Width = 590;
  xlWorkSheet.PageSetup.CenterFooter = "&G"; 
```

图像“stopka.png”必须设置为嵌入资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:06:24.843

由于微软没有为 CenterFooterPicture 属性提供设置选项

以下是 MSDN 中可用的文档

CenterFooterPicture - 返回一个 Graphic 对象，该对象表示页脚中心部分的图片。用于设置图片的属性。

[参考链接](http://msdn.microsoft.com/en-us/library/ms280798%28v=office.14%29.aspx)

# c# - string.replace() 不适用于 xml 字符串

> ID：15897478
> 
> 赞同：-1
> 
> 时间：2013-04-09T08:53:26.177
> 
> 标签：c#, .net, xml, string, replace

我已经阅读了所有类似的问题并采取了相应的行动。但仍然无法弄清楚我的代码有什么问题。

这是我的代码，超级简单。（我知道这不是有效的 XML。仅用于示例）。

```
string replacement = "TimeSheetsReplaced";
string word = "TimeSheets";
string result = "<?xml version=\"1.0\" encoding=\"utf-16\"?><DisplayName>Timesheets</DisplayName>"; 
result = result.Replace("<DisplayName>" + word + "</DisplayName>", "<DisplayName>" + replacement + "</DisplayName>"); 
```

结果字符串仍未放置。我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T08:55:28.543

`TimeSheets != Timesheets`

外壳不匹配

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:55:28.777

这是因为您的字符串包含`Timesheets`，但您正在寻找`TimeSheets`（带有大写字母`S`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T08:55:38.907

用你的话来说，TimeSheets 有大 S，在字符串中是小 s

# arcgis-server - ArcGIS Server 和 F5

> ID：15897485
> 
> 赞同：0
> 
> 时间：2013-04-09T08:53:37.020
> 
> 标签：arcgis-server, f5

使用 F5 和 ArcGIS server 9.3.1 祝你好运。F5如何知道ArcGIS服务器中的服务不可用（服务不可用总会有响应）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T07:43:07.707

F5 从不知道服务，因为它实际上处理的是 SOM 而不是 SOC，它需要在 F5 中进行空间配置才能这样做。我不确定在 F5 中你能做到什么，但我知道你能做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T03:59:23.390

我认为，F5 可以向服务 URL 发送频繁的探测请求，响应会指示服务是否已启动（返回 200）或已关闭/不可用（返回 404）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T19:40:04.813

您可以为池配置[自定义运行状况监视器。](https://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/ltm-monitors-reference-11-6-0/1.html)如果这是一个 Web 服务器，您将需要使用[HTTP 或 HTTPS 健康监视器](https://support.f5.com/kb/en-us/solutions/public/2000/100/sol2167.html)，但也有 TCP、UDP、SIP、脚本和许多其他类型的健康监视器。

# java - 每次单击时将对象添加到面板

> ID：15897487
> 
> 赞同：0
> 
> 时间：2013-04-09T08:53:41.080
> 
> 标签：java, swing, actionlistener

这是我的弹出菜单按钮的 actionListener 我想在每次点击后在面板上添加这张图片

```
 mntmNewMenuItem.addActionListener(new ActionListener() {
        //This method will be called whenever you click the button.
          int i;
          public void actionPerformed(ActionEvent e) {
            try {
                label.setIcon(new ImageIcon
                 (new URL("file:/C:/Users/Ashad/JunoWorkspace/FYP1/table.png")));
            } catch (MalformedURLException e1) {
                e1.printStackTrace();
            }   
                panel.add(label); 
            //redraw panel after addition
                panel.validate();    
                panel.repaint();
                handleDrag(label);
              }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:05:04.117

您只能添加一次 UI 对象。

如果您只想添加一个实例，则需要先删除该元素，然后再添加。（但删除然后添加似乎不合逻辑）。

相反，您可以`Label()`在 actionperformed 中创建一个对象

```
public void actionPerformed(ActionEvent e) {
            label = new Label();//Added
            try {
                label.setIcon(new ImageIcon
                 (new URL("file:/C:/Users/Ashad/JunoWorkspace/FYP1/table.png")));
            } catch (MalformedURLException e1) {
                e1.printStackTrace();
            } 
```

# c# - 如何使用 Enterprise-Library 5.0 更新 poco

> ID：15897489
> 
> 赞同：0
> 
> 时间：2013-04-09T08:53:56.650
> 
> 标签：c#, .net, stored-procedures, enterprise-library, poco

我想将 poco 属性传递给存储过程（更新并添加对象）使用早期版本的企业库（例如 v2.0）我可以执行以下操作：

```
var arrParam = SqlHelperParameterCache.GetSpParameterSet(ConnectionString(), 
                   SprocNameSet);

for (int x = 0; x <= arrParam.Length - 1; x++)
{           
    System.Reflection.PropertyInfo pi = 
        dataObject.GetType()
        .GetProperty(arrParam[x].ParameterName
          .Substring(1, Convert.ToInt32(arrParam[x].ParameterName.Length) - 1));        
    arrParam[x].Value = pi.GetValue(myDataObject, null);
}

SqlHelper.ExecuteScalar(ConnectionString(), 
    CommandType.StoredProcedure, 
    SprocNameSet, 
    arrParam); 
```

但是在 5.0 版（可能更早？）中，SqlHelperParameterCache.GetSpParameterSet 方法消失了。

问题是：如何获取存储过程参数并用 poco-properties-values 填充它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T17:47:10.807

你可以这样做：

```
Database db = DatabaseFactory.CreateDatabase();

string spName = "MySP";
var parameters = new object[] { "Information", 22 };

int value = (int)db.ExecuteScalar(spName, parameters); 
```

现在，这取决于参数顺序。如果您想使用名称并自动填充 DbCommand 并且您的数据库支持参数发现（例如 SQL Server），那么您可以执行以下操作：

```
public class MyClass
{
    public string Severity { get; set; }
    public int OtherValue { get; set; } 

}

MyClass myClass = new MyClass() { OtherValue = 1, Severity = "Information" };

Database db = DatabaseFactory.CreateDatabase();

string spName = "MySP";            
DbCommand cmd = db.GetStoredProcCommand(spName);

db.PopulateCommandValues(cmd, myClass); 

int value = (int)db.ExecuteScalar(cmd); 
```

```
public static class DatabaseExtensions
{
    public static void PopulateCommandValues<T>(this Database db, 
        DbCommand cmd, T poco)
    {
        if (!db.SupportsParemeterDiscovery)
        {
            throw new InvalidOperationException("Database does not support parameter discovery");
        }

        db.DiscoverParameters(cmd);

        foreach (DbParameter parameter in cmd.Parameters)
        {
            if (parameter.Direction != System.Data.ParameterDirection.Output &&
                parameter.Direction != System.Data.ParameterDirection.ReturnValue)
            {
                PropertyInfo pi = poco.GetType().GetProperty(
                    parameter.ParameterName.Substring(1)); // remove @ from parameter

                if (pi != null)
                {
                    parameter.Value = pi.GetValue(poco, null);
                }
            }
        }
    }
} 
```

这假定 POCO 属性名称与存储过程参数名称相同。

# java - 如何使用 Java 对象提交表单

> ID：15897494
> 
> 赞同：0
> 
> 时间：2013-04-09T08:54:15.857
> 
> 标签：java, jsf, jsf-2

我有这个实体，我用它来生成带有代理的对象：

```
private Integer autoDialer;
private String description;
private String email;
private String ipAddress;
private Integer isActive;
private Boolean isAdmin;
private Boolean isRemove;
private Boolean isSenior;
private Boolean isSuper;
private Timestamp lastLogged;
private Timestamp lastReady;
private String password;
private String phone;
private String placeLoc;
private String placeName;
private String regServerList;
private String signature;
private Integer status;
private String uiLang;
private Boolean useCtt;
private Boolean useVcc;
private String username;
private Long vaccountId;
private Long accountId; 
```

我有一个表单，它必须将这个巨大的对象添加到代理并将数据插入另一个表：

```
<h:form id="formDlgId">

                        <div class="dlg-row">
                            <div></h:outputText></div>
                            <div>
                                <h:selectOneMenu id="skillID" styleClass="selectLong2" title="skill" value="#{agentsToCampaign.agentSkillLevel}">
                                    <f:selectItem itemValue="Level"></f:selectItem>
                                    <f:selectItem itemValue="1"></f:selectItem>
                                    <f:selectItem itemValue="2"></f:selectItem>
                                    <f:selectItem itemValue="3"></f:selectItem>
                                    <f:selectItem itemValue="4"></f:selectItem>
                                    <f:selectItem itemValue="5"></f:selectItem>
                                    <f:selectItem itemValue="6"></f:selectItem>
                                </h:selectOneMenu> <p:tooltip for="skillID" />
                            </div>
                        </div>

                        <div>
                            <div></h:outputText></div>
                            <div>
                                <h:selectOneMenu id="selectAgentID" title="select agent" value="#{agentsToCampaign.agentId}">
                                    <f:selectItem itemValue="Select - Agent"></f:selectItem>
                                    <!--  vzimame spisak s agenti ot agentsBean -->
                                    <f:selectItems value="#{agentsBean.data}" var="item" 
                                        itemValue="#{item.accountId}" itemLabel="#{item.username}"></f:selectItems>
                                </h:selectOneMenu> <p:tooltip for="selectAgentID" />
                            </div>
                        </div>

                        <div class="dlg-row">
                            <div class="dlg-firstColumn">&nbsp;</div>
                            <div class="dlg-secondColumn">
                                <p:commandButton button-reset" value="reset"
                                                 update=":dlgId" oncomplete="dlg.show()" process="@this">
                                    <p:resetInput target=":dlgId"></p:resetInput>
                                </p:commandButton>
                                <p:commandButton value="save"
                                                 update=":formDlgId :formTblId" oncomplete="handleDialogSubmit(xhr, status, args)"
                                                 onclick="removeButtonMove()" action="#{agentsToCampaign.save()}">
                                </p:commandButton>
                            </div>
                        </div>
                    </h:form> 
```

例如，我可以在提交表单时将带有 setter/getter 的 Object agentsBean.data 传递给第二个托管 bean 吗？

# c# - 无需在 CRM 2011 中调用 AssignRequest 即可创建具有特定所有者的新记录

> ID：15897495
> 
> 赞同：5
> 
> 时间：2013-04-09T08:54:19.597
> 
> 标签：c#, dynamics-crm-2011, dynamics-crm, assign, ownership

在我们的应用程序中，我们创建了几千条电话记录。每个电话都应该有一个不同的所有者，由名为 GetAnyAppropriateSystemUser() 的方法确定，该方法根据某些标准找到一些随机 SystemUser。

在下面的代码示例中，我们创建了一个电话呼叫，然后在其上使用 AssignRequest 来指定其所有者。

```
PhoneCall phoneCall = new PhoneCall();

// 
// stuff to set up the new PhoneCall instance here; populate fields, etc...
//

// determine this phonecall's owner through some algorithm
Guid appropriateOwner = GetAnyAppropriateSystemUser();

Guid createdPhoneCallId = _serviceProxy.Create(phoneCall);
if (createdPhoneCallId != Guid.Empty)
{
    AssignRequest phoneCallAssign = new AssignRequest();
    phoneCallAssign.Assignee = new EntityReference(SystemUser.EntityLogicalName, appropriateOwner);
    phoneCallAssign.Target = new EntityReference(PhoneCall.EntityLogicalName, createdPhoneCallId);
    _serviceProxy.Execute(phoneCallAssign);
} 
```

这可以正常工作，但是有两个调用，一个要创建，一个要分配。是否可以在调用 Create() 方法之前设置 PhoneCall 记录的“ownerid”，从而消除以后调用 AssignRequest 的需要？它似乎工作，我什至在SDK中找到了一个类似的例子，如下所示。

**SDK 示例：针对目标收入汇总自定义期间的目标数据**

```
// Create three goals: one parent goal and two child goals.
Goal parentGoal = new Goal()
{
    Title = "Parent Goal Example",
    RollupOnlyFromChildGoals = true,
    ConsiderOnlyGoalOwnersRecords = true,
    TargetMoney = new Money(300.0M),
    IsFiscalPeriodGoal = false,
    MetricId = new EntityReference
    {
        Id = _metricId,
        LogicalName = Metric.EntityLogicalName
    },
    GoalOwnerId = new EntityReference
    {
        Id = _salesManagerId,
        LogicalName = SystemUser.EntityLogicalName
    },
    OwnerId = new EntityReference
    {
        Id = _salesManagerId,
        LogicalName = SystemUser.EntityLogicalName
    },
    GoalStartDate = DateTime.Today.AddDays(-1),
    GoalEndDate = DateTime.Today.AddDays(30)
};
_parentGoalId = _serviceProxy.Create(parentGoal); 
```

虽然它似乎有效，但如果我们在创建新记录之前设置 ownerid，有什么我们必须注意的吗？有什么不同吗？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T09:06:38.033

正如您已经发现的那样，允许在创建记录时设置 ownerid。

但是不可能以相同的方式编辑现有记录的所有者，在这种情况下，您必须使用`AssignRequest`.

还要检查这个问题： [ETL Software, can't retrieve owner of a contact](https://stackoverflow.com/questions/15631909/etl-software-cant-retrieve-owner-of-a-contact/15632336)

# android - ActionBarSherlock 经典菜单样式

> ID：15897498
> 
> 赞同：2
> 
> 时间：2013-04-09T08:54:30.193
> 
> 标签：android, menu, actionbarsherlock

我使用带有 min api 7 和目标 api 17 的 ActionBarSherlock 4.2.0。

当我在 api 7 设备上测试菜单时，底部菜单的格式似乎很差。我试图改变它，但我所能做的就是改变背景颜色：

```
<item name="android:panelFullBackground">@color/menu_background_color</item> 
```

我想以相同的方式显示未溢出的菜单项：使用白色文本颜色。

# html - 从 XML 中提取 HTML 时关闭标签

> ID：15897500
> 
> 赞同：1
> 
> 时间：2013-04-09T08:54:36.020
> 
> 标签：html, xml, xslt, visual-studio-2012

我正在使用 xslt 样式表转换混合的 html 和 xml 文档并仅提取 html 元素。

源文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<html >
  <head>
    <title>Simplified Example Form</title>
  </head>
  <body>
    <TLA:document xmlns:TLA="http://www.TLA.com">
      <TLA:contexts>
        <TLA:context id="id_1" value=""></TLA:context>
      </TLA:contexts>
      <table id="table_logo" style="display:inline">
        <tr>
          <td height="20" align="middle">Big Title Goes Here</td>
        </tr>
        <tr>
          <td align="center">
            <img src="logo.jpg" border="0"></img>
          </td>
        </tr>
      </table>
      <TLA:page>
        <TLA:question id="q_id_1">
          <table id="table_id_1">
            <tr>
              <td>Label text goes here</td>
              <td>
                <input id="input_id_1" type="text"></input>
              </td>
            </tr>
          </table>
        </TLA:question>
      </TLA:page>
      <!-- Repeat many times -->
    </TLA:document>
  </body>
</html> 
```

样式表：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:TLA="http://www.TLA.com" exclude-result-prefixes="TLA">
  <xsl:output method="html" indent="yes" version="4.0" />
  <xsl:strip-space elements="*" />

  <xsl:template match="@*|node()" priority="-2">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- This element-only identity template prevents the 
       TLA namespace declaration from being copied to the output -->
  <xsl:template match="*">
    <xsl:element name="{name()}">
      <xsl:apply-templates select="@* | node()" />
    </xsl:element>
  </xsl:template>

  <!-- Pass processing on to child elements of TLA elements -->
  <xsl:template match="TLA:*">
    <xsl:apply-templates select="*" />
  </xsl:template>
</xsl:stylesheet> 
```

输出：

```
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Simplified Example Form</title>
  </head>
  <body>
    <table id="table_logo" style="display:inline">
      <tr>
        <td height="20" align="middle">Big Title Goes Here</td>
      </tr>
      <tr>
        <td align="center"><img src="logo.jpg" border="0"></td>
      </tr>
    </table>
    <table id="table_id_1">
      <tr>
        <td>Label text goes here</td>
        <td><input id="input_id_1" type="text"></td>
      </tr>
    </table>
  </body>
</html> 
```

但是存在一个问题，即 meta、img 和 input 元素没有正确关闭。我已将 xsl:output 设置为 html 并将版本设置为 4.0，据我所知，它们*应该*输出正确的 html。

我猜第一个 xsl:template/xsl:copy 指令需要有细微的变化，但我的 xslt 技能非常有限。

需要进行哪些更改才能使标签正确关闭？

PS 我不确定不同的工具/解析器之间是否存在差异，但我正在使用 Visual Studio 2012 调试样式表，以便我可以看到任何更改的直接效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:21:48.567

恐怕您不了解 HTML 4 或 4.01 的基于 SGML 的 HTML 的语法规则：空元素的正确标记是, `<input>`it is not `<input></input>`nor 。`<input/>``<input />`

因此，当您的 XSLT 转换的结果树被序列化时，根据您对 HTML 输出方法和版本的请求，您将获得正确的 HTML 语法。

检查例如[http://validator.w3.org/check?uri=http%3A%2F%2Fhome.arcor.de%2Fmartin.honnen%2Fxslt%2Ftest2013040901Result.html&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fhome.arcor.de%2Fmartin.honnen%2Fxslt%2Ftest2013040901Result.html&charset=%28detect+automatically%29&doctype=Inline&group=0)，那里没有正确关闭的元素没有错误或警告。

但是使用[http://validator.w3.org/check?uri=http%3A%2F%2Fhome.arcor.de%2Fmartin.honnen%2Fxslt%2Ftest2013040902Result.html&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=http%3A%2F%2Fhome.arcor.de%2Fmartin.honnen%2Fxslt%2Ftest2013040902Result.html&charset=%28detect+automatically%29&doctype=Inline&group=0)你会得到元素未正确关闭的警告。

所以`html`输出方法做正确的事，另见[http://www.w3.org/TR/xslt#section-HTML-Output-Method](http://www.w3.org/TR/xslt#section-HTML-Output-Method)说：

> html 输出方法不应为空元素输出结束标记。对于 HTML 4.0，空元素是 area、base、basefont、br、col、frame、hr、img、input、isindex、link、meta 和 param。例如，以样式表形式`<br/>`或`<br></br>`在样式表中编写的元素应输出为`<br>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:58:27.917

和元素不需要关闭——它仍然是有效的`<meta>`HTML `<img>`。`<input>`

如果您想让它们关闭，您可以使用`xml`（据我所知，对于 XSLT2.0，您也可以使用`xhtml`）作为输出方法，并在`<meta>`需要时自行添加标签。例如：

### 样式表

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:TLA="http://www.TLA.com" exclude-result-prefixes="TLA">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>
  <xsl:strip-space elements="*" />

  <xsl:template match="@*|node()" priority="-2">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="head">
    <xsl:copy>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- This element-only identity template prevents the 
       TLA namespace declaration from being copied to the output -->
  <xsl:template match="*">
    <xsl:element name="{name()}">
      <xsl:apply-templates select="@* | node()" />
    </xsl:element>
  </xsl:template>

  <!-- Pass processing on to child elements of TLA elements -->
  <xsl:template match="TLA:*">
    <xsl:apply-templates select="*" />
  </xsl:template>
</xsl:stylesheet> 
```

### 输出

```
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Simplified Example Form</title>
  </head>
  <body>
    <table id="table_logo" style="display:inline">
      <tr>
        <td height="20" align="middle">Big Title Goes Here</td>
      </tr>
      <tr>
        <td align="center">
          <img src="logo.jpg" border="0"/>
        </td>
      </tr>
    </table>
    <table id="table_id_1">
      <tr>
        <td>Label text goes here</td>
        <td>
          <input id="input_id_1" type="text"/>
        </td>
      </tr>
    </table>
  </body>
</html> 
```

# android - 如何在单个活动中显示来自第一个片段的第二个片段

> ID：15897501
> 
> 赞同：1
> 
> 时间：2013-04-09T08:54:39.610
> 
> 标签：android, android-layout, android-widget, android-fragments, android-fragmentactivity

我正在开发一个仅适用于平板电脑并使用 android 4.0 的简单 android 应用程序。我的应用程序的主屏幕如下：

![在此处输入图像描述](https://i.stack.imgur.com/qF7Zi.png)

主活动的 Oncreate() 我使用以下代码在 main.xml 中添加片段 A：

```
FragmentTransaction ft = getFragmentManager().beginTransaction();
Fragment imageFragment = new ImageFragment();
ft.replace(R.id.fragment_container, imageFragment);
ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
ft.addToBackStack(null);
ft.commit(); 
```

这个片段 A 只有一个可点击的图像视图。现在我希望当用户单击图像视图时，应该调用另一个片段（片段 B）并替换图像视图。片段 B 有一个播放视频的 VideoView。

所以我的第二个屏幕应该如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/qLtQx.png)

我的问题是我没有得到“如何在主屏幕活动中从第一个片段中调用第二个片段？”

我可以使用不同的活动，但我不想这样做，只想使用片段来运行它。

请指导我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:05:01.337

这是最简单的方法：

1）在里面`YourActivity`创建一个方法：

```
public void goToSecondFragment(){}
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    Fragment secondFragment = new SecondFragment();
    ft.replace(R.id.fragment_container, secondFragment);
    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
    ft.addToBackStack(null);
    ft.commit();
} 
```

2）在你的第一个片段中，当你想替换它时，调用：

```
YourActivity activity = (YourActivity) getActivity();
activity.goToSecondFragment(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:59:24.373

您可以使用以下方法执行相同操作：

添加片段并维护后退堆栈

```
FragmentManager supportFragmentManager = getSupportFragmentManager();
supportFragmentManager.addOnBackStackChangedListener(new OnBackStackChangedListener() {
@Override
public void onBackStackChanged() {
}
}); 
FragmentTransaction fragmentTransaction = supportFragmentManager.beginTransaction();
fragmentTransaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
fragmentTransaction.addToBackStack("fragmentTag");
fragmentTransaction.replace(R.id.slate, fragment, "fragmentTag");
fragmentTransaction.commit(); 
```

并替换片段

```
FragmentManager supportFragmentManager = getSupportFragmentManager();
FragmentTransaction fragmentTransaction = supportFragmentManager.beginTransaction();
fragmentTransaction.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
fragmentTransaction.replace(R.id.slate, fragment, "fragmentTag");
fragmentTransaction.commit(); 
```

应该为你工作。

# android - 如何返回到之前的片段活动

> ID：15897502
> 
> 赞同：0
> 
> 时间：2013-04-09T08:54:41.587
> 
> 标签：android, back, android-fragmentactivity

三个片段活动`MainFragmentActivity`：`Reports`和`ReportsType`。

报告正在调用`ReportsType`。

有一个后退按钮`ReportsType`可以使用以下代码返回：

```
public void goBackReport(View v)
    {
       finish(); // why MainFragmentActivity.java is called after finish()?
    } 
```

但它总是回到`MainFragmentActivity.java`. 但它应该是`Reports.java`。

**更新：**

**报告.java**

```
public void showReport(View v) {
        String tag = v.getTag().toString();
    Intent i5 = new Intent(this, ReportsType.class);
    i5.putExtra("name", tag);
    FragmentTransactiontransaction=getSupportFragmentManager().beginTransaction();
        transaction.addToBackStack(null).commit();
        startActivity(i5);

    } 
```

**报告类型.java**

```
public void goBackReport(View v)
    {
       getSupportFragmentManager().popBackStack(); //nothing happens
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:05:08.033

没有调用的`finish()`概念`Fragment`。相反，您应该在执行事务时保留一堆片段。例如：

```
ft.addToBackStack(null);   // ft is FragmentTransaction 
```

因此，当您按下**back-key**时，当前活动（包含多个片段）将加载前一个片段而不是完成自身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:58:38.773

尝试这个..

```
Intent i=new Intent(this,MainFragmentActivity.class)
startActivity(i);
finish();

Intent i=new Intent(this,Reports.class)
startActivity(i);
finish();

Intent i=new Intent(this,ReportsType.class)
startActivity(i);
finish(); 
```

当您最后调用 new Activity 时，请编写完成（）

# html - 正文只包括标题？

> ID：15897509
> 
> 赞同：0
> 
> 时间：2013-04-09T08:54:53.257
> 
> 标签：html, google-chrome

我有以下 HTML 代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Contest Coding</title>
        <meta charset = 'utf-8'>
        <meta name = 'description' content = 'The free programming competition for everyone'>
        <meta name = 'keywords' content = 'programming competition, coding competition, programming contest, coding contest, progrramming puzzles, coding puzzles, contestcoding, contest coding, c, c#, c++, python, ruby, java, javascript, php, haskell, perl, programming, coding'>
        <meta name = 'author' content = 'Lewis Cornwall'>
        <style type = 'text/css'>
            body {
                margin: auto;
                width: 960px;
                font-family: Helvetica, sans-serif;
                font-size: 16px;
            }
            #header {
                text-align: center;
            }
            #leaderboard {
                float: left;
            }
            #leaderboard table {
                width: 280px;
            }
            #puzzles {
                float: right;
            }
            #puzzles table {
                width: 640px;
            }
            .view_full {
                line-height: 2em;
            }
            h1 {
                font-size: 60px;
                line-height: .5em;
            }
            table {
                border-collapse: collapse;
                background-color: lightgrey;
            }
            table, th, td {
                padding: 10px;
                border: 1px solid #000;
                text-align: left;
            }
            a {
                color: #000;
                text-decoration: none;
            }
            a:hover {
                text-decoration: underline;
            }
        </style>
    </head>
    <body>
        <div id = 'header'>
            <h1>CONTEST CODING</h1>
            <p>The free programming competition for everyone</p>
        </div>
        <div id = 'leaderboard'>
            <h2>Leaderboard</h2>
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Points</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <a href = ''>Ed Southall</a>
                        </td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>
                            <a href = ''>Mark Bishop</a>
                        </td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>
                            <a href = ''>Krishna Teja</a>
                        </td>
                        <td>18</td>
                    </tr>
                </tbody>
            </table>
            <a href = '' class = 'view_full'>View full leaderboard &raquo;</a>
        </div>
        <div id = 'puzzles'>
            <h2>Latest Puzzles</h2>
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Solved By</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <a href = ''>The Truck Driver - Click to View and Solve</a>
                        </td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>
                            <a href = ''>The Eight Queens - Click to View and Solve</a>
                        </td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>
                            <a href = ''>Palindromic Primes - Click to View and Solve</a>
                        </td>
                        <td>3</td>
                    </tr>
                </tbody>
            </table>
            <a href = '' class = 'view_full'>View all puzzles &raquo;</a>
        </div>
    </body>
</html> 
```

我在谷歌浏览器上运行它。我右键单击，选择“检查元素”，单击正文部分（因此 Chrome 应该突出显示整个正文），但它只突出显示了该`#header`部分。为什么它不突出显示整个页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:03:32.770

这是因为“[当一个元素浮动时，它会脱离文档的正常流程](https://developer.mozilla.org/en-US/docs/CSS/float#How_floats_are_positioned)”。所以我猜浏览器不包含浮动元素的正常内容，`<body>`因此它们没有突出显示。

它在 Firefox 中的 Firebug 中的行为相同，顺便说一句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:11:11.277

```
body {
     margin: auto;
     width: 960px;
     height:750px;
     font-family: Helvetica, sans-serif;
     font-size: 16px;
} 
```

指定身体高度。以上应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:02:58.953

因为你忘了“清除”花车。

```
<div style="clear: both;"></div> 
```

将此添加到最后一个浮动 div 的末尾。

# android - 第二个活动没有启动，应用程序强制关闭：致命异常主要；java.lang.ClassCastException:android.app.Application

> ID：15897514
> 
> 赞同：-1
> 
> 时间：2013-04-09T08:55:03.630
> 
> 标签：android, android-permissions

我正在尝试制作一个应用程序，它提供已安装应用程序的列表，当单击一个项目时，启动另一个活动，说明已安装应用程序所需的权限。我得到了已安装的应用程序列表，但是当我单击任何应用程序而不是开始新活动时，应用程序强制关闭。

主要活动

```
package com.example.appslist;

import java.util.List;
import com.example.appslist.adapter.ApkAdapter;
import com.example.appslist.app.AppData;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

public class ApkListActivity extends Activity implements OnItemClickListener {

    PackageManager packageManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        packageManager = getPackageManager();
        List<PackageInfo> packageList = packageManager
                .getInstalledPackages(PackageManager.GET_PERMISSIONS);

        ListView mylistview= (ListView) findViewById(android.R.id.list);
        mylistview.setAdapter(new ApkAdapter(this, packageList, packageManager));
        mylistview.setOnItemClickListener(this);
        }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long row) {

        PackageInfo packageInfo = (PackageInfo) parent
                .getItemAtPosition(position);
        AppData appData = (AppData) getApplication();
        appData.setPackageInfo(packageInfo);

        Intent appInfo = new Intent(ApkListActivity.this, ApkInfo.class);
        startActivity(appInfo);
    }
} 
```

APKInfo.java

```
package com.example.appslist;

import android.os.Bundle;
import android.app.Activity;
import com.example.appslist.app.AppData;
import android.content.pm.FeatureInfo;
import android.content.pm.PackageInfo;
import android.widget.TextView;

public class ApkInfo extends Activity {

  TextView appLabel, packageName, version, features;
    TextView permissions, andVersion,path;
    PackageInfo packageInfo;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.apkinfo);

        findViewsById();

        AppData appData = (AppData) getApplicationContext();
        packageInfo = appData.getPackageInfo();

        setValues();

    }

    private void findViewsById() {
        appLabel = (TextView) findViewById(R.id.applabel);
        packageName = (TextView) findViewById(R.id.package_name);
        version = (TextView) findViewById(R.id.version_name);
        features = (TextView) findViewById(R.id.req_feature);
        permissions = (TextView) findViewById(R.id.req_permission);
        andVersion = (TextView) findViewById(R.id.andversion);
        path = (TextView) findViewById(R.id.path);

    }

    private void setValues() {
        // APP name
        appLabel.setText(getPackageManager().getApplicationLabel(
                packageInfo.applicationInfo));

        // package name
        packageName.setText(packageInfo.packageName);

        // version name
        version.setText(packageInfo.versionName);

        // target version
        andVersion.setText(Integer
                .toString(packageInfo.applicationInfo.targetSdkVersion));

        // path
        path.setText(packageInfo.applicationInfo.sourceDir);

        // features
        if (packageInfo.reqFeatures != null)
            features.setText(getFeatures(packageInfo.reqFeatures));
        else
            features.setText("-");

        // uses-permission
        if (packageInfo.requestedPermissions != null)
            permissions
                    .setText(getPermissions(packageInfo.requestedPermissions));
        else
            permissions.setText("-");
    }

    // Convert string array to comma separated string
    private String getPermissions(String[] requestedPermissions) {
        String permission = "";
        for (int i = 0; i < requestedPermissions.length; i++) {
            permission = permission + requestedPermissions[i] + ",\n";
        }
        return permission;
    }

    // Convert string array to comma separated string
    private String getFeatures(FeatureInfo[] reqFeatures) {
        String features = "";
        for (int i = 0; i < reqFeatures.length; i++) {
            features = features + reqFeatures[i] + ",\n";
        }
        return features;
    }
} 
```

AppData 类

```
package com.example.appslist.app;

import android.app.Application;
import android.content.pm.PackageInfo;

public class AppData extends Application {

    PackageInfo packageInfo;

    public PackageInfo getPackageInfo() {
        return packageInfo;
    }

    public void setPackageInfo(PackageInfo packageInfo) {
        this.packageInfo = packageInfo;
    }
} 
```

我尝试在清单中注册 AppData，尝试使用捆绑包，它强制关闭。请帮忙 。

清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.appslist"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
    >

        <activity
            android:name="com.example.appslist.ApkListActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ApkInfo"
            android:label="@string/title_activity_apk_info" >
        </activity>
    </application>

</manifest> 
```

这是 LogCat

```
04-09 12:17:47.305: E/asset(5752): MAS: getAppPckgAndVerCode package: com.example.appslist === version 1
04-09 12:17:47.329: D/dalvikvm(5752): Trying to load lib lib_glossary.so 0x0
04-09 12:17:47.329: I/dalvikvm(5752): Unable to dlopen(lib_glossary.so): Cannot load library: load_library[1083]: Library 'lib_glossary.so' not found
04-09 12:17:47.329: E/MBGlossaryManager(5752): lib_glossary.so can't be loaded
04-09 12:17:47.469: E/asset(5752): MAS: getAppPckgAndVerCode package: com.google.android.location === version 8
04-09 12:17:47.469: E/asset(5752): MAS: getAppPckgAndVerCode package: com.android.launcher === version 8
04-09 12:17:47.477: E/asset(5752): MAS: getAppPckgAndVerCode package: com.android.defcontainer === version 8
04-09 12:17:47.477: E/asset(5752): MAS: getAppPckgAndVerCode package: com.navngo.igo.javaclient === version 148360
04-09 12:17:47.485: E/asset(5752): MAS: getAppPckgAndVerCode package: com.android.contacts === version 8
04-09 12:17:47.493: E/asset(5752): MAS: getAppPckgAndVerCode package: com.example.backgroundapp === version 1
04-09 12:17:47.493: E/asset(5752): MAS: getAppPckgAndVerCode package: com.arcsoft.photoworkshop === version 5
04-09 12:17:47.548: D/dalvikvm(5752): GC_EXTERNAL_ALLOC freed 934 objects / 65512 bytes in 49ms
04-09 12:17:47.555: E/asset(5752): MAS: getAppPckgAndVerCode package: com.android.phone === version 8
04-09 12:17:47.563: E/asset(5752): MAS: getAppPckgAndVerCode package: com.android.calculator2 === version 8
04-09 12:17:47.563: E/asset(5752): MAS: getAppPckgAndVerCode package: com.android.htmlviewer === version 8
04-09 12:17:47.563: E/asset(5752): MAS: getAppPckgAndVerCode package: com.example.myfirstapp === version 1
04-09 12:17:47.571: E/asset(5752): MAS: getAppPckgAndVerCode package: com.android.providers.calendar === version 8
04-09 12:17:47.571: E/asset(5752): MAS: getAppPckgAndVerCode package: com.android.bluetooth === version 8
04-09 12:17:47.571: E/asset(5752): MAS: getAppPckgAndVerCode package: com.example.sessionmanagement === version 1
04-09 12:17:47.579: E/asset(5752): MAS: getAppPckgAndVerCode package: com.google.android.location === version 8
04-09 12:17:47.579: E/asset(5752): MAS: getAppPckgAndVerCode package: com.android.launcher === version 8
04-09 12:17:47.587: E/asset(5752): MAS: getAppPckgAndVerCode package: com.android.defcontainer === version 8
04-09 12:17:47.587: E/asset(5752): MAS: getAppPckgAndVerCode package: com.navngo.igo.javaclient === version 148360
04-09 12:17:47.594: E/asset(5752): MAS: getAppPckgAndVerCode package: com.android.contacts === version 8
04-09 12:17:47.641: E/asset(5752): MAS: getAppPckgAndVerCode package: com.example.backgroundapp === version 1
04-09 12:17:47.782: W/IInputConnectionWrapper(5752): showStatusIcon on inactive InputConnection
04-09 12:17:47.782: W/IInputConnectionWrapper(5752): clearMetaKeyStates on inactive InputConnection
04-09 12:17:49.704: D/AndroidRuntime(5752): Shutting down VM
04-09 12:17:49.704: W/dalvikvm(5752): threadid=1: thread exiting with uncaught exception (group=0x400207e0)
04-09 12:17:49.719: E/AndroidRuntime(5752): FATAL EXCEPTION: main
04-09 12:17:49.719: E/AndroidRuntime(5752): java.lang.ClassCastException: android.app.Application
04-09 12:17:49.719: E/AndroidRuntime(5752):     at com.example.appslist.ApkListActivity.onItemClick(ApkListActivity.java:42)
04-09 12:17:49.719: E/AndroidRuntime(5752):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
04-09 12:17:49.719: E/AndroidRuntime(5752):     at android.widget.ListView.performItemClick(ListView.java:3444)
04-09 12:17:49.719: E/AndroidRuntime(5752):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
04-09 12:17:49.719: E/AndroidRuntime(5752):     at android.os.Handler.handleCallback(Handler.java:587)
04-09 12:17:49.719: E/AndroidRuntime(5752):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-09 12:17:49.719: E/AndroidRuntime(5752):     at android.os.Looper.loop(Looper.java:143)
04-09 12:17:49.719: E/AndroidRuntime(5752):     at android.app.ActivityThread.main(ActivityThread.java:4717)
04-09 12:17:49.719: E/AndroidRuntime(5752):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 12:17:49.719: E/AndroidRuntime(5752):     at java.lang.reflect.Method.invoke(Method.java:521)
04-09 12:17:49.719: E/AndroidRuntime(5752):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-09 12:17:49.719: E/AndroidRuntime(5752):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-09 12:17:49.719: E/AndroidRuntime(5752):     at dalvik.system.NativeStart.main(Native Method)
04-09 12:17:51.118: I/Process(5752): Sending signal. PID: 5752 SIG: 9
04-09 12:24:48.087: E/asset(5827): MAS: getAppPckgAndVerCode package: com.example.appslist === version 1
04-09 12:24:48.102: D/dalvikvm(5827): Trying to load lib lib_glossary.so 0x0
04-09 12:24:48.110: I/dalvikvm(5827): Unable to dlopen(lib_glossary.so): Cannot load library: load_library[1083]: Library 'lib_glossary.so' not found
04-09 12:24:48.110: E/MBGlossaryManager(5827): lib_glossary.so can't be loaded
04-09 12:24:48.212: E/asset(5827): MAS: getAppPckgAndVerCode package: com.google.android.location === version 8
04-09 12:24:48.219: E/asset(5827): MAS: getAppPckgAndVerCode package: com.android.launcher === version 8
04-09 12:24:48.219: E/asset(5827): MAS: getAppPckgAndVerCode package: com.android.defcontainer === version 8
04-09 12:24:48.219: E/asset(5827): MAS: getAppPckgAndVerCode package: com.navngo.igo.javaclient === version 148360
04-09 12:24:48.227: E/asset(5827): MAS: getAppPckgAndVerCode package: com.android.contacts === version 8
04-09 12:24:48.235: E/asset(5827): MAS: getAppPckgAndVerCode package: com.example.backgroundapp === version 1
04-09 12:24:48.235: E/asset(5827): MAS: getAppPckgAndVerCode package: com.arcsoft.photoworkshop === version 5
04-09 12:24:48.298: D/dalvikvm(5827): GC_EXTERNAL_ALLOC freed 971 objects / 66752 bytes in 58ms
04-09 12:24:48.305: E/asset(5827): MAS: getAppPckgAndVerCode package: com.android.phone === version 8
04-09 12:24:48.313: E/asset(5827): MAS: getAppPckgAndVerCode package: com.android.calculator2 === version 8
04-09 12:24:48.313: E/asset(5827): MAS: getAppPckgAndVerCode package: com.android.htmlviewer === version 8
04-09 12:24:48.313: E/asset(5827): MAS: getAppPckgAndVerCode package: com.example.myfirstapp === version 1
04-09 12:24:48.321: E/asset(5827): MAS: getAppPckgAndVerCode package: com.android.providers.calendar === version 8
04-09 12:24:48.321: E/asset(5827): MAS: getAppPckgAndVerCode package: com.android.bluetooth === version 8
04-09 12:24:48.329: E/asset(5827): MAS: getAppPckgAndVerCode package: com.example.sessionmanagement === version 1
04-09 12:24:48.329: E/asset(5827): MAS: getAppPckgAndVerCode package: com.google.android.location === version 8
04-09 12:24:48.329: E/asset(5827): MAS: getAppPckgAndVerCode package: com.android.launcher === version 8
04-09 12:24:48.337: E/asset(5827): MAS: getAppPckgAndVerCode package: com.android.defcontainer === version 8
04-09 12:24:48.337: E/asset(5827): MAS: getAppPckgAndVerCode package: com.navngo.igo.javaclient === version 148360
04-09 12:24:48.344: E/asset(5827): MAS: getAppPckgAndVerCode package: com.android.contacts === version 8
04-09 12:24:48.391: E/asset(5827): MAS: getAppPckgAndVerCode package: com.example.backgroundapp === version 1
04-09 12:24:49.805: D/AndroidRuntime(5827): Shutting down VM
04-09 12:24:49.805: W/dalvikvm(5827): threadid=1: thread exiting with uncaught exception (group=0x400207e0)
04-09 12:24:49.821: E/AndroidRuntime(5827): FATAL EXCEPTION: main
04-09 12:24:49.821: E/AndroidRuntime(5827): java.lang.ClassCastException: android.app.Application
04-09 12:24:49.821: E/AndroidRuntime(5827):     at com.example.appslist.ApkListActivity.onItemClick(ApkListActivity.java:42)
04-09 12:24:49.821: E/AndroidRuntime(5827):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
04-09 12:24:49.821: E/AndroidRuntime(5827):     at android.widget.ListView.performItemClick(ListView.java:3444)
04-09 12:24:49.821: E/AndroidRuntime(5827):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
04-09 12:24:49.821: E/AndroidRuntime(5827):     at android.os.Handler.handleCallback(Handler.java:587)
04-09 12:24:49.821: E/AndroidRuntime(5827):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-09 12:24:49.821: E/AndroidRuntime(5827):     at android.os.Looper.loop(Looper.java:143)
04-09 12:24:49.821: E/AndroidRuntime(5827):     at android.app.ActivityThread.main(ActivityThread.java:4717)
04-09 12:24:49.821: E/AndroidRuntime(5827):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 12:24:49.821: E/AndroidRuntime(5827):     at java.lang.reflect.Method.invoke(Method.java:521)
04-09 12:24:49.821: E/AndroidRuntime(5827):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-09 12:24:49.821: E/AndroidRuntime(5827):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-09 12:24:49.821: E/AndroidRuntime(5827):     at dalvik.system.NativeStart.main(Native Method)
04-09 12:24:51.688: I/Process(5827): Sending signal. PID: 5827 SIG: 9
04-09 12:24:55.165: E/asset(5835): MAS: getAppPckgAndVerCode package: com.example.appslist === version 1
04-09 12:24:55.188: D/dalvikvm(5835): Trying to load lib lib_glossary.so 0x0
04-09 12:24:55.188: I/dalvikvm(5835): Unable to dlopen(lib_glossary.so): Cannot load library: load_library[1083]: Library 'lib_glossary.so' not found
04-09 12:24:55.188: E/MBGlossaryManager(5835): lib_glossary.so can't be loaded
04-09 12:24:55.313: E/asset(5835): MAS: getAppPckgAndVerCode package: com.google.android.location === version 8
04-09 12:24:55.321: E/asset(5835): MAS: getAppPckgAndVerCode package: com.android.launcher === version 8
04-09 12:24:55.329: E/asset(5835): MAS: getAppPckgAndVerCode package: com.android.defcontainer === version 8
04-09 12:24:55.329: E/asset(5835): MAS: getAppPckgAndVerCode package: com.navngo.igo.javaclient === version 148360
04-09 12:24:55.337: E/asset(5835): MAS: getAppPckgAndVerCode package: com.android.contacts === version 8
04-09 12:24:55.337: E/asset(5835): MAS: getAppPckgAndVerCode package: com.example.backgroundapp === version 1
04-09 12:24:55.344: E/asset(5835): MAS: getAppPckgAndVerCode package: com.arcsoft.photoworkshop === version 5
04-09 12:24:55.391: D/dalvikvm(5835): GC_EXTERNAL_ALLOC freed 993 objects / 67608 bytes in 49ms
04-09 12:24:55.407: E/asset(5835): MAS: getAppPckgAndVerCode package: com.android.phone === version 8
04-09 12:24:55.415: E/asset(5835): MAS: getAppPckgAndVerCode package: com.android.calculator2 === version 8
04-09 12:24:55.415: E/asset(5835): MAS: getAppPckgAndVerCode package: com.android.htmlviewer === version 8
04-09 12:24:55.415: E/asset(5835): MAS: getAppPckgAndVerCode package: com.example.myfirstapp === version 1
04-09 12:24:55.423: E/asset(5835): MAS: getAppPckgAndVerCode package: com.android.providers.calendar === version 8
04-09 12:24:55.423: E/asset(5835): MAS: getAppPckgAndVerCode package: com.android.bluetooth === version 8
04-09 12:24:55.423: E/asset(5835): MAS: getAppPckgAndVerCode package: com.example.sessionmanagement === version 1
04-09 12:24:55.430: E/asset(5835): MAS: getAppPckgAndVerCode package: com.google.android.location === version 8
04-09 12:24:55.430: E/asset(5835): MAS: getAppPckgAndVerCode package: com.android.launcher === version 8
04-09 12:24:55.438: E/asset(5835): MAS: getAppPckgAndVerCode package: com.android.defcontainer === version 8
04-09 12:24:55.438: E/asset(5835): MAS: getAppPckgAndVerCode package: com.navngo.igo.javaclient === version 148360
04-09 12:24:55.446: E/asset(5835): MAS: getAppPckgAndVerCode package: com.android.contacts === version 8
04-09 12:24:55.493: E/asset(5835): MAS: getAppPckgAndVerCode package: com.example.backgroundapp === version 1
04-09 12:24:56.641: D/AndroidRuntime(5835): Shutting down VM
04-09 12:24:56.641: W/dalvikvm(5835): threadid=1: thread exiting with uncaught exception (group=0x400207e0)
04-09 12:24:56.657: E/AndroidRuntime(5835): FATAL EXCEPTION: main
04-09 12:24:56.657: E/AndroidRuntime(5835): java.lang.ClassCastException: android.app.Application
04-09 12:24:56.657: E/AndroidRuntime(5835):     at com.example.appslist.ApkListActivity.onItemClick(ApkListActivity.java:42)
04-09 12:24:56.657: E/AndroidRuntime(5835):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
04-09 12:24:56.657: E/AndroidRuntime(5835):     at android.widget.ListView.performItemClick(ListView.java:3444)
04-09 12:24:56.657: E/AndroidRuntime(5835):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
04-09 12:24:56.657: E/AndroidRuntime(5835):     at android.os.Handler.handleCallback(Handler.java:587)
04-09 12:24:56.657: E/AndroidRuntime(5835):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-09 12:24:56.657: E/AndroidRuntime(5835):     at android.os.Looper.loop(Looper.java:143)
04-09 12:24:56.657: E/AndroidRuntime(5835):     at android.app.ActivityThread.main(ActivityThread.java:4717)
04-09 12:24:56.657: E/AndroidRuntime(5835):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 12:24:56.657: E/AndroidRuntime(5835):     at java.lang.reflect.Method.invoke(Method.java:521)
04-09 12:24:56.657: E/AndroidRuntime(5835):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-09 12:24:56.657: E/AndroidRuntime(5835):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-09 12:24:56.657: E/AndroidRuntime(5835):     at dalvik.system.NativeStart.main(Native Method)
04-09 12:24:58.040: I/Process(5835): Sending signal. PID: 5835 SIG: 9
04-09 12:39:54.556: I/Process(5930): Sending signal. PID: 5930 SIG: 9
04-09 12:43:51.244: E/asset(5972): MAS: getAppPckgAndVerCode package: com.example.appslist === version 1
04-09 12:43:51.283: D/dalvikvm(5972): Trying to load lib lib_glossary.so 0x0
04-09 12:43:51.291: I/dalvikvm(5972): Unable to dlopen(lib_glossary.so): Cannot load library: load_library[1083]: Library 'lib_glossary.so' not found
04-09 12:43:51.291: E/MBGlossaryManager(5972): lib_glossary.so can't be loaded
04-09 12:43:51.494: E/asset(5972): MAS: getAppPckgAndVerCode package: com.google.android.location === version 8
04-09 12:43:51.494: E/asset(5972): MAS: getAppPckgAndVerCode package: com.android.launcher === version 8
04-09 12:43:51.502: E/asset(5972): MAS: getAppPckgAndVerCode package: com.android.defcontainer === version 8
04-09 12:43:51.509: E/asset(5972): MAS: getAppPckgAndVerCode package: com.navngo.igo.javaclient === version 148360
04-09 12:43:51.509: E/asset(5972): MAS: getAppPckgAndVerCode package: com.android.contacts === version 8
04-09 12:43:51.517: E/asset(5972): MAS: getAppPckgAndVerCode package: com.example.backgroundapp === version 1
04-09 12:43:51.517: E/asset(5972): MAS: getAppPckgAndVerCode package: com.arcsoft.photoworkshop === version 5
04-09 12:43:51.580: D/dalvikvm(5972): GC_EXTERNAL_ALLOC freed 1059 objects / 70176 bytes in 57ms
04-09 12:43:51.588: E/asset(5972): MAS: getAppPckgAndVerCode package: com.android.phone === version 8
04-09 12:43:51.595: E/asset(5972): MAS: getAppPckgAndVerCode package: com.android.calculator2 === version 8
04-09 12:43:51.595: E/asset(5972): MAS: getAppPckgAndVerCode package: com.android.htmlviewer === version 8
04-09 12:43:51.595: E/asset(5972): MAS: getAppPckgAndVerCode package: com.example.myfirstapp === version 1
04-09 12:43:51.603: E/asset(5972): MAS: getAppPckgAndVerCode package: com.android.providers.calendar === version 8
04-09 12:43:51.603: E/asset(5972): MAS: getAppPckgAndVerCode package: com.android.bluetooth === version 8
04-09 12:43:51.611: E/asset(5972): MAS: getAppPckgAndVerCode package: com.example.sessionmanagement === version 1
04-09 12:43:51.611: E/asset(5972): MAS: getAppPckgAndVerCode package: com.google.android.location === version 8
04-09 12:43:51.619: E/asset(5972): MAS: getAppPckgAndVerCode package: com.android.launcher === version 8
04-09 12:43:51.619: E/asset(5972): MAS: getAppPckgAndVerCode package: com.android.defcontainer === version 8
04-09 12:43:51.619: E/asset(5972): MAS: getAppPckgAndVerCode package: com.navngo.igo.javaclient === version 148360
04-09 12:43:51.627: E/asset(5972): MAS: getAppPckgAndVerCode package: com.android.contacts === version 8
04-09 12:43:51.673: E/asset(5972): MAS: getAppPckgAndVerCode package: com.example.backgroundapp === version 1
04-09 12:43:56.166: D/AndroidRuntime(5972): Shutting down VM
04-09 12:43:56.166: W/dalvikvm(5972): threadid=1: thread exiting with uncaught exception (group=0x400207e0)
04-09 12:43:56.189: E/AndroidRuntime(5972): FATAL EXCEPTION: main
04-09 12:43:56.189: E/AndroidRuntime(5972): java.lang.ClassCastException: android.app.Application
04-09 12:43:56.189: E/AndroidRuntime(5972):     at com.example.appslist.ApkListActivity.onItemClick(ApkListActivity.java:43)
04-09 12:43:56.189: E/AndroidRuntime(5972):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
04-09 12:43:56.189: E/AndroidRuntime(5972):     at android.widget.ListView.performItemClick(ListView.java:3444)
04-09 12:43:56.189: E/AndroidRuntime(5972):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
04-09 12:43:56.189: E/AndroidRuntime(5972):     at android.os.Handler.handleCallback(Handler.java:587)
04-09 12:43:56.189: E/AndroidRuntime(5972):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-09 12:43:56.189: E/AndroidRuntime(5972):     at android.os.Looper.loop(Looper.java:143)
04-09 12:43:56.189: E/AndroidRuntime(5972):     at android.app.ActivityThread.main(ActivityThread.java:4717)
04-09 12:43:56.189: E/AndroidRuntime(5972):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 12:43:56.189: E/AndroidRuntime(5972):     at java.lang.reflect.Method.invoke(Method.java:521)
04-09 12:43:56.189: E/AndroidRuntime(5972):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-09 12:43:56.189: E/AndroidRuntime(5972):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-09 12:43:56.189: E/AndroidRuntime(5972):     at dalvik.system.NativeStart.main(Native Method)
04-09 12:43:57.486: I/Process(5972): Sending signal. PID: 5972 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:02:40.157

如果你仔细阅读错误日志，你会发现你的问题是什么。它上线了

```
AppData appData = (AppData) getApplication(); 
```

你的`onItemClick`方法。 `getApplication`方法返回`com.android.Application`，您试图将其强制转换为`AppData`类，但它不是`AppData`.

虽然每个实例`AppData`也是 的实例`Application`，但反过来就不一样了： 的实例`Application`不会自动成为其子类的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:05:45.583

如果你扩展应用程序类，你应该修改你的清单 [add android:name]。在您的情况下，您应该添加到清单：

```
 <application
        android:name=".app.AppData" 
```

# emacs - 如何在 Emacs 中使用没有空格键的德语键盘布局上的 Cx ^ 快捷键？

> ID：15897516
> 
> 赞同：0
> 
> 时间：2013-04-09T08:55:11.510
> 
> 标签：emacs, keyboard-shortcuts

如此处所述 ( [https://stackoverflow.com/a/6315267/772434](https://stackoverflow.com/a/6315267/772434) )`C-x ^`可以在 Emacs 中使用快捷键来增加拆分窗口的大小。

然而，在我的德语键盘布局中，我必须输入`Control-X ^ **SPACE**`才能使其工作，因为该`^`字符仅在按下空格键后才会出现。

有没有办法避免这种情况并使命令工作而不必最后键入 SPACE （这不是很优雅）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:58:17.440

我使用 Emacs 的标准英文布局。如果我需要输入不同的字符，我会*在 Emacs*`C-\`中切换到不同的键盘布局。

# windows-phone-8 - 是否可以在 Windows phone8 的媒体库中保存 pdf 文件

> ID：15897524
> 
> 赞同：3
> 
> 时间：2013-04-09T08:55:35.227
> 
> 标签：windows-phone-8

是否可以将 PDF 文件保存到 Windows Phone 8 中的媒体库？如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:19:08.380

媒体库允许您保存图像。就是这样。没有PDF，没有别的

# solution - 找到多项式函数的所有零点

> ID：15897529
> 
> 赞同：1
> 
> 时间：2013-04-09T08:55:47.993
> 
> 标签：solution, polynomial-math, modelica, dymola

我正在使用 Dymola 2013 版。我尝试解决一个简单的数学问题，例如：

```
f= x^2 -4 ;
y=1;
f=y; 
```

f 和 x 被定义为实数。解决方案是 2.36。但我需要用这两种解决方案来计算。所以 2.36 和 -2.36！在我的问题中 f 是一个多项式，如 ax^3 + bx^2 +cx +d 并且 y 是线性的。y = ax + b

我怎样才能得到这个问题的所有解决方案？x 没有明确的值。x 通常至少有两个解。x 应该是一个向量吗？在这种情况下，我遇到了方程维数的问题......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:54:11.407

据我了解您的问题，您有两个多项式，并希望找到它们相等的所有点。
这是一个使用 执行此操作的函数`Modelica.Math.Vectors.Utilities.roots`：
首先，您给出两个多项式`poly1`和`poly2`。查找`poly1=poly2`与查找相同`poly1-poly2=0`，因此我定义了第三个多项式`polyDiff = polyLong-polyShort`，然后将该多项式交给`Modelica.Math.Vectors.Utilities.roots`. 它将返回所有根，甚至是复杂的根。

```
function polyIntersect
  input Real[:] poly1={3,2,1,0};
  input Real[:] poly2={8,7};
  output Real[:,2] intersect;

protected 
  Integer nPoly1 = size(poly1,1);
  Integer nPoly2 = size(poly2,1);
  Integer nPolyShort = min(nPoly1, nPoly2);
  Integer nPolyLong = max(nPoly1, nPoly2);
  Real[nPolyShort] polyShort;
  Real[nPolyLong] polyLong;
  Real[nPolyLong] polyDiff;

algorithm 
  if (nPoly1<nPoly2) then 
    polyShort := poly1;
    polyLong := poly2;
  else 
    polyShort := poly2;
    polyLong := poly1;
  end if;

  polyDiff := polyLong;
  for i in 0:nPolyShort-1 loop
    polyDiff[nPolyLong-i] := polyLong[nPolyLong-i] - polyShort[nPolyShort-i];
  end for;

  intersect := Modelica.Math.Vectors.Utilities.roots(polyDiff);

end polyIntersect; 
```

上面的代码也可以在这里找到：[https ://gist.github.com/thorade/5388205](https://gist.github.com/thorade/5388205)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:06:10.827

如果我理解正确，您的目标是使用 Modelica 找到（高于二阶）多项式的所有根。恐怕这不是 Modelica 的用途。对于给定的非线性方程，Modelica 模型的模拟将（至多）使用非线性方程的一个根。如果你想找到所有的根，你必须找到一种方法来自己分解多项式。在您的情况下，您只处理三次多项式，因此您应该研究分解三次多项式的算法。然后，您可以将这样的算法编写为 Modelica 函数。

# javascript - 将fuelux datagrid列单元格设置为对象集合中的字符串

> ID：15897534
> 
> 赞同：0
> 
> 时间：2013-04-09T08:56:00.247
> 
> 标签：javascript, jquery, datagrid, fuelux

我的fuelux数据网格在主干渲染功能中看起来像这样

```
 var dataSource = new StaticDataSource({
            columns: [
                                     {
                                           property: 'id',
                                           label: 'id',
                                          sortable: true
                                     },
                {
                    property: 'name',
                    label: 'groups',
                    sortable: true
                },
                {
                    property: 'name',
                    label: 'Roles',
                    sortable: true
                }
            ],
            data: this.collection,
            delay: 250
        });
        $('#sectionName').html('Groups');
        $('#MyGrid').datagrid({
            dataSource: dataSource,
            stretchHeight: true
        }); 
```

this.collection 返回 json 如下

```
[
{
    "id":1,
    "roles":[
                {"id":1,"authority":"ROLE1"},
                {"id":2,"authority":"ROLE2"},
                {"id":3,"authority":"ROLE3"}
            ],
    "groups":[
                {"id":1,"name":"A"},
                {"id":2,"name":"B"},
                {"id":3,"name":"C"}
          ]
},
{
    "id":2,
    "roles":[
                {"id":5,"authority":"ROLE4"},
                {"id":5,"authority":"ROLE5"},
                {"id":6,"authority":"ROLE6"}
            ],
    "groups":[
                {"id":4,"name":"D"},
                {"id":5,"name":"E"},
                {"id":6,"name":"F"}
          ]
} 
```

]

我希望fuelux datagrid 具有列ID、角色和组。它应该如下所示：

```
 id        roles                        groups
    1         role1, role2 , role3          A, B, C
    12        role3, role4 , role5          D, E, F 
```

我试图编写类似这样的格式化程序函数，但它不起作用

```
 var dataSource = new StaticDataSource({
        columns: [
            {
                property: 'id',
                label: 'id',
                sortable: true
            },
            {
                property: 'name',
                label: 'groups',
                sortable: true
            },
            {
                property: 'name',
                label: 'Roles',
                sortable: true
            }
        ], 

       formatter: function (items) {
                $.each(items, function (index, item) {
                                    item.roles= //string made from groups with comma
                    item.groups= //string made from roles with comma

            },
        data: this.collection,
        delay: 250
    });

    $('#MyGrid').datagrid({
       //as above
    });
  formatter: function (items) {
                $.each(items, function (index, item) {
                   item.roles= //string of roles made from roles with comma
                                   item.groups= /string of groups made from groups with comma 
                });
            }, 
```

如果这里有人可以帮助我，那将是很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:10:56.187

我已经能够解决我的问题如下

```
 formatter: function (items) {
                $.each(items, function (index, item) {
                    var roleCell = new app.RoleSupplier({ model: item      });
                    roleCell.render();
                    item.roles = roleCell.$el; //set property name above to roles
                });
            }, 
```

然后，我创建了 RoleSupplier 如下

```
 app.RolesSupplier = Backbone.View.extend({
    template: _.template($('#roles-cell-template').html()),
    render: function (eventName) {
        this.$el.html(this.template(this.model.toJSON()));
    }
}); 
```

我创建了如下模板

```
 <script type="text/template" id="roles-cell-template">
        <div>
            <@ _.each(roles.toJSON(), function( role, index, list ){ @>
                <@ if(index < (list.length - 1)) { @>
                    <@=role.authority + ','@>
                <@ } else { @>
                    <@=role.authority@>
                <@ } @>
            <@ }); @>

        </div>  
    </script> 
```

这对我有用。但是，fuelux 的用户必须了解的是：

*   您可以将属性名称设置为 json 中的键名称以设置其值

    > > property:'id', label:'ID' //将id值设置为列名ID

*   如果你有一些 json 值并且你想以特定的方式显示它们，或者你不能在单元格中使用一些 html，你可以将它们格式化如下

    > > ```
    > > formatter: function (items) {
    > >                 $.each(items, function (index, item) {
    > >                      item.yourPropertyName1= format your html here that you want  appear in label1
    > >                      item.yourProeprtyName 2= fromat your html like button , anything you want inside column cell of label2                 
    > >                 });
    > >             }, 
    > > ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:33:36.920

对于您的列定义，每个`property`都应与您的数据源返回的属性名称相匹配。尝试这个：

```
{
    property: 'id',
    label: 'ID',
    sortable: true
},
{
    property: 'roles',
    label: 'Roles',
    sortable: true
},
{
    property: 'groups',
    label: 'Groups',
    sortable: true
} 
```

# sql - CTE循环查询

> ID：15897537
> 
> 赞同：0
> 
> 时间：2013-04-09T08:56:09.017
> 
> 标签：sql, loops, with-statement

首先我给你解释一下情况。

我想将数据从一个表（View_Solidnet_Training）传输到另一个表（OBJ_Availability）。有一个问题：在视图中有一个开始日期和结束日期！在`OBJ_Availability`每个日期都有一个记录。所以视图中的一行在另一个表中有多行。

我必须与 CTE 合作。所以光标对我来说是没有选择的。中间`WITH`运行完美，但是当我想添加一个额外的`WITH`以检查是否`ID`不为零时，它必须更改变量`@Start`并更改`@End`为视图中的新记录。

对不起，我的英语不太好，但我希望你能理解情况。

这是我的代码：

```
DECLARE @Start AS DATETIME;
DECLARE @End AS DATETIME;
SET @Start = '2013-04-09';
SET @End = '2013-04-11';
with cte1 as 
(

with cte2 as
(
select @Start as DateValue
union all

select DateValue + 1
from cte2
where DateValue + 1 <= @End
)
into OBJ_Availability  
select 34, DateValue, 'AM', 2, 'Test' from cte2
)
select * from cte1 where PK_Training_ID is not null; 
```

像这样的东西，但我不明白它从哪里获取视图的信息。我从来没有在任何地方提到过这个名字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:26:34.190

我还不能发表评论，所以在回答之前我需要问你几个问题。

1、CTE的名字怎么和view的名字一样？它永远不会起作用。

2，'检查ID是否不为零，它必须将变量@Start和@End更改为视图中的新记录'是什么意思，我不明白为什么需要进行空检查

3、你确定可以使用 DateValue + 1 来获取下一个日期吗？你应该使用 DATEADD 吗？

最后，您不能在 CTE 中包含 CTE，这是行不通的。在 CTE 中声明变量也是不可能的。

**这是我最好的客人：**

首先，正如您提到的，您的视图有一个 startdate 列和一个 enddate 列，

所以我假设视图中有 StartDate 和 EndDate 列，这是我的 sql：

```
DECLARE @start AS DATETIME
DECLARE @end AS DATETIME

SELECT @start = min(StartDate)
from View_Solidnet_Training 
where PK_Training_ID is not null

SELECT @end = max(EndDate) 
from View_Solidnet_Training 
where PK_Training_ID is not null

;with cte_dates as
(
    select @start DateValue
    union all
    select DateValue + 1
    from cte_dates
    where DateValue + 1 <= cast(@end as datetime)
)
into OBJ_Availability  
select v.PK_Training_ID, DateValue, 'AM', 2, 'Test' --columns from the view
from cte_dates cte
join View_Solidnet_Training v on v.StartDate < cte.DateValue and cte.DateValue < v.EndDate 
where v.PK_Training_ID is not null 
```

max() 和 min 函数找出视图中最新和最旧的日期

然后 CTE cte_dates 创建从 @start 到 @end 的日期列表

那么与 CTE 的连接将使记录在从 StartDate 到 EndDate 的范围内重复

希望这有帮助

顺便说一句，我的家用电脑上没有 sql，所以我可以检查一下

```
SELECT @start = min(StartDate)
from View_Solidnet_Training 
where PK_Training_ID is not null 
```

运行与否，但你应该明白

**使用 while 而不是 CTE：**

```
DECLARE @start AS DATETIME
DECLARE @end AS DATETIME

SELECT @start = min(StartDate)
from View_Solidnet_Training 
where PK_Training_ID is not null

SELECT @end = max(EndDate) 
from View_Solidnet_Training 
where PK_Training_ID is not null

DECLARE @AllDates table
        (DateValue datetime)

DECLARE @dCounter datetime
SELECT @dCounter = @start

WHILE @dCounter <= @end
BEGIN
 INSERT INTO @AllDates VALUES (@dCounter)
 SELECT @dCounter=@dCounter+1 
END

insert into OBJ_Availability  
select v.PK_Training_ID, DateValue, 'AM', 2, 'Test' --columns from the view
from @AllDates d
join View_Solidnet_Training v on v.StartDate < d.DateValue and d.DateValue < v.EndDate 
where v.PK_Training_ID is not null 
```

**或者你甚至可以做**

```
DECLARE @start AS DATETIME
DECLARE @end AS DATETIME

SELECT @start = min(StartDate)
from View_Solidnet_Training 
where PK_Training_ID is not null

SELECT @end = max(EndDate) 
from View_Solidnet_Training 
where PK_Training_ID is not null

DECLARE @dCounter datetime
SELECT @dCounter = @start

WHILE @dCounter <= @end
BEGIN

    insert into OBJ_Availability  
    select v.PK_Training_ID, DateValue, 'AM', 2, 'Test' --columns from the view
    from View_Solidnet_Training v
    where v on v.StartDate < @dCounter and @dCounter < v.EndDate and v.PK_Training_ID is not null

    SELECT @dCounter=@dCounter+1 
END 
```

# java - 歧义错误 - 可变参数和具有相同类型的参数

> ID：15897542
> 
> 赞同：3
> 
> 时间：2013-04-09T08:56:17.713
> 
> 标签：java, variadic-functions

我想用以下两个构造函数实例化给定的类：

```
public Foo(File jarFile, String... args)
public Foo(File jarFile, String className, String... args) 
```

我这样调用第一个构造函数：

```
Foo foo = new Foo(jarFile, "arg-val-1", "arg-val-2"); 
```

这给出了一个编译器错误“对 PactProgram 的引用不明确”，这是有道理的。

有没有办法强制使用其中一个构造函数？我无法更改界面。

调用任何一个构造函数对我来说都很好。仅传递 jar 文件可以正常工作，但我需要传递参数。

我在 Ubuntu 上运行 Oracle Java 1.6.0_38。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T08:59:46.777

由于 varargs 等效于数组，因此如果您想使用第一个，可以这样做：

```
Foo foo = new Foo(jarFile, new String[]{"arg-val-1", "arg-val-2"}); 
```

对于第二个，使用：

```
Foo foo = new Foo(jarFile, "arg-val-1", new String[]{"arg-val-2"}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T09:00:07.847

在某种程度上... varargs 等效于数组，因此您可以使用以下内容：

```
Foo(file, new String[] { "string" });
Foo(file, "string", new String[] { "string" }); 
```

# cakephp - cakePHP - 带有命名参数数组的蛞蝓

> ID：15897545
> 
> 赞同：0
> 
> 时间：2013-04-09T08:56:33.090
> 
> 标签：cakephp

我有点卡住了，试图弄清楚如何在带有一组命名参数的 URL 上使用 slug：

网址如下：`/controller/action/param:1-Slug1/param:2-Slug2/param:3-Slug3`

这给了我以下请求对象中的命名参数数组：

```
[named] => Array
        (
            [param] => Array
                (
                    [0] => 1-Slug1
                    [1] => 2-Slug2
                    [2] => 3-Slug3
                )

        ) 
```

如何配置路由以考虑 slug？这样的输出是：

```
[named] => Array
            (
                [param] => Array
                    (
                        [0] => 1
                        [1] => 2
                        [2] => 3
                    )

            ) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:06:53.617

首先，您不需要这些`[0], [1]`东西，通过将参数命名为相同，您将自动创建一个数组。因此将您的网址更改为

`/controller/action/param:1-Slug1/param:2-Slug2`

您的路线如下所示，

`Router::connect('/:controller/:action/*');`

通过在末尾传递一颗星，路线将自动通过您添加的任何额外参数。这将允许您将尽可能多的参数传递到您想要的 url。

如果您想使用命名参数，路线将如下所示。

`Router::connect('/:controller/:action:/:slug', array(), array('slug' => '[a-z0-9-]+'));`

这会将 slug 与正则表达式进行匹配，以形成匹配的路线。正则表达式允许任何字母、数字和连字符。

在这里阅读更多，[http://book.cakephp.org/2.0/en/development/routing.html#passing-parameters-to-action](http://book.cakephp.org/2.0/en/development/routing.html#passing-parameters-to-action)

# android - 加载程序在某些配置更改期间无法保留自身

> ID：15897547
> 
> 赞同：20
> 
> 时间：2013-04-09T08:56:34.993
> 
> 标签：android

根据[http://developer.android.com/guide/components/loaders.html](http://developer.android.com/guide/components/loaders.html)，loader 的好处之一是，它能够在配置更改期间保留其数据。

> 在配置更改后重新创建时，它们会自动重新连接到最后一个加载器的光标。因此，他们不需要重新查询他们的数据。

但是，它并不适用于所有场景。

我举一个简单的例子。它是一个`FragmentActivity`，它正在托管一个`Fragment`. 本身`Fragment`拥有.`AsyncTaskLoader`

以下 3 个场景运行良好。

## 首次启动期间 (OK)

创建了 1 个加载器，并`loadInBackground`执行一次。

## 简单旋转时（OK）

没有创建新的加载程序，`loadInBackground`也没有被触发。

## 启动子活动，并按下后退按钮（确定）

没有创建新的加载程序，`loadInBackground`也没有被触发。

但是，在以下场景中。

## ***启动子活动 -> 旋转 -> 按下后退按钮***（错误）

那时，旧装载机`onReset`被称为。旧的装载机将被销毁。将创建新的加载器，并 `loadInBackground`再次触发新的加载器。

我期望的正确行为是，**不会创建新的加载器。**

loader相关代码如下。我在 Android 4.1 模拟器下运行代码。

```
package com.example.bug;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.AsyncTaskLoader;
import android.support.v4.content.Loader;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class MainFragment extends Fragment implements LoaderManager.LoaderCallbacks<Integer> {
    private static class IntegerArrayLoader extends AsyncTaskLoader<Integer> {

        private Integer result = null;

        public IntegerArrayLoader(Context context) {
            super(context);
            Log.i("CHEOK", "IntegerArrayLoader created!");
        }

        @Override
        public Integer loadInBackground() {
            Log.i("CHEOK", "Time consuming loadInBackground!");
            this.result = 123456;
            return result;
        }

        /**
         * Handles a request to cancel a load.
         */
        @Override 
        public void onCanceled(Integer integer) {
            super.onCanceled(integer);
        }

        /**
         * Handles a request to stop the Loader.
         * Automatically called by LoaderManager via stopLoading.
         */
        @Override 
        protected void onStopLoading() {
            // Attempt to cancel the current load task if possible.
            cancelLoad();
        }

        /**
         * Handles a request to start the Loader.
         * Automatically called by LoaderManager via startLoading.
         */
        @Override        
        protected void onStartLoading() {
            if (this.result != null) {
                deliverResult(this.result);
            }

            if (takeContentChanged() || this.result == null) {
                forceLoad();
            }
        }

        /**
         * Handles a request to completely reset the Loader.
         * Automatically called by LoaderManager via reset.
         */
        @Override 
        protected void onReset() {
            super.onReset();

            // Ensure the loader is stopped
            onStopLoading();

            // At this point we can release the resources associated with 'apps'
            // if needed.
            this.result = null;
        }        
    }

    @Override
    public Loader<Integer> onCreateLoader(int arg0, Bundle arg1) {
        Log.i("CHEOK", "onCreateLoader being called");
        return new IntegerArrayLoader(this.getActivity());
    }

    @Override
    public void onLoadFinished(Loader<Integer> arg0, Integer arg1) {
        result = arg1;

    }

    @Override
    public void onLoaderReset(Loader<Integer> arg0) {
        // TODO Auto-generated method stub

    }

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.fragment_main, container, false);
        return v;
    }

    // http://stackoverflow.com/questions/11293441/android-loadercallbacks-onloadfinished-called-twice
    @Override
    public void onResume()
    {
        super.onResume();

        if (result == null) {
            // Prepare the loader.  Either re-connect with an existing one,
            // or start a new one.
            getLoaderManager().initLoader(0, null, this);
        } else {
            // Restore from previous state. Perhaps through long pressed home
            // button.
        }
    }    

    private Integer result;
} 
```

完整的源代码可以从[https://www.dropbox.com/s/n2jee3v7cpwvedv/loader_bug.zip下载](https://www.dropbox.com/s/n2jee3v7cpwvedv/loader_bug.zip)

这可能与 1 个未解决的 Android 错误有关：[https ://code.google.com/p/android/issues/detail?id=20791&can=5&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars](https://code.google.com/p/android/issues/detail?id=20791&can=5&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

[https://groups.google.com/forum/?fromgroups=#!topic/android-developers/DbKL6PVyhLI](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/DbKL6PVyhLI)

**我想知道，这个错误有什么好的解决方法吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T09:26:01.737

我的回答其实很直截了当。不要使用 AsyncTaskLoaders。因为您现在已经知道一些关于 AsyncTaskLoaders 的错误。

一个好的组合将是一个可保留的（onActivityCreated() 中的 setRetainInstance(true)）片段与 AsyncTask。以同样的方式工作。只需要稍微重构一下代码。

* * *

## *来自 OP 的消息*

尽管作者没有提供任何代码示例，但这是最接近可行的解决方案。我不使用作者提出的解决方案。相反，我仍然依赖于`AsyncTaskLoader`所有必要的加载任务。解决方法是，我将依靠一个额外的保留片段来确定是否应该重新连接/创建加载器。这是整个想法的骨架代码。据我所知，效果很好。

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    ...

    dataRetainedFragment = (DataRetainedFragment)fm.findFragmentByTag(DATE_RETAINED_FRAGMENT);
    // dataRetainedFragment can be null still...
}

@Override
public void onResume() {
    ...
    if (this.data == null) {
        if (dataRetainedFragment != null) {
            // Re-use!
            onLoadFinished(null, dataRetainedFragment);
        } else {
            // Prepare the loader.  Either re-connect with an existing one,
            // or start a new one.
            getLoaderManager().initLoader(0, null, this);
        }
    } else {
    }
}

@Override
public void onLoadFinished(Loader<Data> arg0, Data data) {
    this.data = data;

    if (this.dataRetainedFragment == null) {
        this.dataRetainedFragment = DataRetainedFragment.newInstance(this.data);
        FragmentManager fm = getFragmentManager();
        fm.beginTransaction().add(this.dataRetainedFragment, DATE_RETAINED_FRAGMENT).commitAllowingStateLoss();            
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:49:58.830

尝试改变，

```
 @Override
public void onResume()
{
    super.onResume();

    if (result == null) {
        // Prepare the loader.  Either re-connect with an existing one,
        // or start a new one.
        getLoaderManager().initLoader(0, null, this);
    } else {
        // Restore from previous state. Perhaps through long pressed home
        // button.
    }
} 
```

到

```
 @Override
public void onResume()
{
    super.onResume();

Loader loader = getLoaderManager().getLoader(0); 
if ( loader != null && loader.isReset() ) { 
    getLoaderManager().restartLoader(0, getArguments(), this); 
} else { 
    getLoaderManager().initLoader(0, getArguments(), this); 
} 

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T14:29:16.817

如果您使用 FragmentManager 的替换片段技术，则会发生此问题。

当您替换/删除 Fragment 时，该 Fragment 会从 Activity 中分离出来，并且由于加载器附加到 Activity，因此加载器将在方向更改期间重新创建。

尝试使用 FragmentManager 的隐藏/显示技术。可能这会对你有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-23T01:12:27.630

我已经成功地将 AsyncTaskLoader 子类化并对其方法进行了一些调整。

```
public class FixedAsyncTaskLoader<D> extends AsyncTaskLoader<D> {

    private D result;

    public FixedAsyncTaskLoader(Context context) {
        super(context);
    }

    @Override
    protected void onStartLoading() {
        if (result != null) {
            deliverResult(result);
        } else {
            forceLoad();
        }
    }

    @Override
    public void deliverResult(T data) {
        result = data;

        if (isStarted()) {
            super.deliverResult(result);
        }
    }

    @Override
    protected void onReset() {
        super.onReset();
        onStopLoading();

        result = null;
    }

    @Override
    protected void onStopLoading() {
        cancelLoad();
    }
} 
```

# javascript - 根据字符串检查当前选项卡

> ID：15897550
> 
> 赞同：0
> 
> 时间：2013-04-09T08:56:40.643
> 
> 标签：javascript, google-chrome, google-chrome-extension

我的扩展程序正在使用页面操作（仅在 twitter.com 上可用），我希望在地址栏中使图标可见（并且现在至少为空），但我无法让它工作。我使用了[文档三明治示例](https://developer.chrome.com/extensions/examples/api/pageAction/pageaction_by_content.zip)并对其进行了修改，使其看起来像这样：

内容脚本.js：

```
// Called when the url of a tab changes.
if(chrome.tabs.query(active(true),function{
  // If the url is twitter
  ( {'url':'https://google.com/google-results-string'}
  if (chrome.tabs.query({'url':'*://twitter.com/*'} , function(tabs){console.log(tabs)}){
    // ... show the page action.
    //chrome.pageAction.show(tabId);
    chrome.extension.sendRequest({}, function(response) {});
  }
};
// Listen for any changes to the URL of any tab.
chrome.tabs.onUpdated.addListener(checkForValidUrl); 
```

背景.js

```
function onRequest(request, sender, sendResponse) {
// Show the page action for the tab that the sender (content script)
// was on.
    chrome.pageAction.show(sender.tab.id);

// Return nothing to let the connection be cleaned up.
    sendResponse({});
};

// Listen for the content script to send a message to the background page.
chrome.extension.onRequest.addListener(onRequest); 
```

我不确定为什么它不起作用，我不确定如何使用 chrome.tabs.query() url 属性以及如何对照 * ://twitter.com/ * 进行检查。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:58:27.330

`Page Action by Content`当您应该查看示例时，您链接并使用了[`Page Action by Url`](http://developer.chrome.com/extensions/samples.html#0ebfdfeb5e765ff6e1e8cb0c882ae98d)示例。您所需要的只是`background`页面中的类似内容：

```
function checkForValidUrl(tabId, changeInfo, tab) {
  if (tab.url.indexOf('twitter.com') > -1) {
    chrome.pageAction.show(tabId);
  }
};
chrome.tabs.onUpdated.addListener(checkForValidUrl); 
```

`content script`如果您只想检查 url，则无需使用 a 。

编辑：如果您只想针对当前选项卡进行测试，那么您可以执行以下操作：

```
chrome.tabs.onUpdated.addListener(function(tabId,info,tab){
  if(tab.active){
    if (tab.url.indexOf('twitter.com') > -1)
      chrome.pageAction.show(tabId);
  }
}); 
```

# java - 通过代码更改android按钮的高度

> ID：15897553
> 
> 赞同：3
> 
> 时间：2013-04-09T08:56:52.450
> 
> 标签：java, android, button, runtime

我试图在运行时通过代码更改按钮的高度和宽度。

**我的布局xml**

```
 <Button
    android:id="@+id/button1"
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/button2"
    android:background="@drawable/button1_background" 
    /> 
```

**主要活动代码**

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
   //some other code
   int displaywidth= getResources().getDisplayMetrics().widthPixels;
    Button f_button = (Button) findViewById(R.id.button1);
    Log.d("F_button width before is",""+ f_button.getWidth());
    f_button.setWidth(displaywidth/2);
    Log.d("F_button width after is",""+ f_button.getWidth());
//some other code
} 
```

Logcat 将宽度前后的 F_button 显示为“0”。

我究竟做错了什么。

谢谢！。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:29:31.653

我想它可能会帮助你..

```
Button btn = (Button)findViewById(R.id.btn1); 

android.widget.LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT,60); // 60 is height you can set it as u need

btn.setLayoutParams(lp); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:07:11.860

在 java (Activity) 中使用下面的代码

```
 f_button.setLayoutParams (new LayoutParams(50, LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:08:58.267

你应该使用

```
int displaywidth= getResources().getDisplayMetrics().widthPixels;    
ViewGroup.LayoutParams buttonlp= (ViewGroup.LayoutParams)f_button.getLayoutParams();
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(displaywidth, buttonlp.height);
buttonlp.setLayoutParams(params); 
```

如果不是，`LinearLayout`您应该使用按钮的父布局而不是`LinearLayout`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-31T22:47:40.677

是的，我试图解决这个问题很长时间。Ajay 的解决方案让我成功了。对于 Kotlin 程序员来说，它看起来像这样：

```
btn.layoutParams = LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, 60) 
```

# image - android上的else值错误

> ID：15897560
> 
> 赞同：0
> 
> 时间：2013-04-09T08:57:12.107
> 
> 标签：image, if-statement, view, conditional-statements

我想在特殊状态时更改可见性

所以我会这样做

```
else {  
ImageView image_A_wrong = (ImageView)findViewById(R.id.imageView1);
image_A_wrong.setVisibility(View.GONE);
 } 
```

但是在eclipse上出现错误。

你知道为什么吗 ？

我的图像视图

> ```
> <ImageView
>         android:id="@+id/imageView1"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:src="@drawable/quo100px"
>         android:visibility="gone" /> 
> ```

Tks提前所有

这是我的完整文件

> 包 com.example.androidhive;
> 
> 导入 java.util.ArrayList；导入 java.util.HashMap；导入 java.util.List；
> 
> 导入 org.apache.http.NameValuePair；导入 org.json.JSONArray；导入 org.json.JSONException；导入 org.json.JSONObject；
> 
> 导入android.app.ListActivity；导入 android.app.ProgressDialog；导入android.content.Intent；导入android.os.AsyncTask；导入android.os.Bundle；导入android.util.Log；导入android.view.View；导入 android.widget.AdapterView；导入 android.widget.AdapterView.OnItemClickListener；导入android.widget.ImageView；导入 android.widget.ListAdapter；导入 android.widget.ListView；导入 android.widget.SimpleAdapter；导入 android.widget.TextView；
> 
> 公共类 quoPAPIERCORD 扩展 ListActivity {
> 
> ```
>  // Progress Dialog
>   private ProgressDialog pDialog;
> 
>   // Creating JSON Parser object
>   JSONParser jParser = new JSONParser();
> 
>   ArrayList<HashMap<String, String>> productsList;
> 
>   // url to get all products list
>   private static String url_all_products_quo = >"http://192.168.1.81/php/android/get_all_quotidiens.php";
> 
>   // JSON Node names
>   private static final String TAG_SUCCESS = "success";
>   private static final String TAG_PRODUCTS = "products";
>   private static final String TAG_PID = "pid";
>   private static final String TAG_NAME = "name";
>   private static final String TAG_PRICE = "price";
>   private static String TAG_CU = "cu";
> 
>   // products JSONArray
>   JSONArray products = null;
> 
>   @Override
>   public void onCreate(Bundle savedInstanceState) {
>       super.onCreate(savedInstanceState);
>       setContentView(R.layout.quotidiens);
> 
>       // Hashmap for ListView
>       productsList = new ArrayList<HashMap<String, String>>();
> 
>       // Loading products in Background Thread
>       new LoadAllProducts().execute();
> 
>       // Get listview
>       ListView lv = getListView();
> 
>       // on seleting single product
>       // launching Edit Product Screen
>       lv.setOnItemClickListener(new OnItemClickListener() {
> 
>           @Override
>           public void onItemClick(AdapterView<?> parent, View view,
>                   int position, long id) {
>               // getting values from selected ListItem
>               String pid = ((TextView) >view.findViewById(R.id.pid)).getText()
>                       .toString();
> 
>               // Starting new intent
>               Intent in = new Intent(getApplicationContext(),
>                       EditProductActivity.class);
>               // sending pid to next activity
>               in.putExtra(TAG_PID, pid);
> 
>               // starting new activity and expecting some response back
>               startActivityForResult(in, 100);
>           }
>       });
> 
>   }
> 
>   // Response from Edit Product Activity
>   @Override
>   protected void onActivityResult(int requestCode, int resultCode, Intent data) {
>       super.onActivityResult(requestCode, resultCode, data);
>       // if result code 100
>       if (resultCode == 100) {
>           // if result code 100 is received 
>           // means user edited/deleted product
>           // reload this screen again
>           Intent intent = getIntent();
>           finish();
>           startActivity(intent);
>       }
> 
>   }
> 
>   /**
>    * Background Async Task to Load all product by making HTTP Request
>    * */
>   class LoadAllProducts extends AsyncTask<String, String, String> {
> 
>       /**
>        * Before starting background thread Show Progress Dialog
>        * */
>       @Override
>       protected void onPreExecute() {
>           super.onPreExecute();
>           pDialog = new ProgressDialog(quoPAPIERCORD.this);
>           pDialog.setMessage("Loading products. Please wait...");
>           pDialog.setIndeterminate(false);
>           pDialog.setCancelable(false);
>           pDialog.show();
>       }
> 
>       /**
>        * getting All products from url
>        * */
>       protected String doInBackground(String... args) {
>           // Building Parameters
>           List<NameValuePair> params = new ArrayList<NameValuePair>();
>           // getting JSON string from URL
>           JSONObject json = jParser.makeHttpRequest(url_all_products_quo, >"GET", params);
> 
>           // Check your log cat for JSON reponse
>           Log.d("All Products: ", json.toString());
> 
>           try {
>               // Checking for SUCCESS TAG
>               int success = json.getInt(TAG_SUCCESS);
> 
>               if (success == 1) {
>                   // products found
>                   // Getting Array of Products
>                   products = json.getJSONArray(TAG_PRODUCTS);
> 
>                   // looping through All Products
>                   for (int i = 0; i < products.length(); i++) {
>                       JSONObject c = products.getJSONObject(i);
> 
>                       // Storing each json item in variable
>                       String id = c.getString(TAG_PID);
>                       String name = c.getString(TAG_NAME);
>                       String price = c.getString(TAG_PRICE);
>                       String cu = c.getString(TAG_CU);
>                       /////////////
>                       if (cu.equals("1")) {
>                           cu = "oui";
>                       } else {
>                           ImageView image_A_wrong = (ImageView) >findViewById(R.id.imageView1);
>                           image_A_wrong.setVisibility(View.GONE);
>                       }
>                       // creating new HashMap
>                       HashMap<String, String> map = new >HashMap<String, String>();
> 
>                       // adding each child node to HashMap key => >value
>                       map.put(TAG_PID, id);
>                       map.put(TAG_NAME, name);
>                       map.put(TAG_PRICE, price);
>                       map.put(TAG_CU, cu);
> 
>                       // adding HashList to ArrayList
>                       productsList.add(map);
>                   }
>               } else {
>                   // no products found
>                   // Launch Add New product Activity
>                   Intent i = new Intent(getApplicationContext(),
>                           NewProductActivity.class);
>                   // Closing all previous activities
>                   i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
>                   startActivity(i);
>               }
>           } catch (JSONException e) {
>               e.printStackTrace();
>           }
> 
>           return null;
>       }
> 
>       /**
>        * After completing background task Dismiss the progress dialog
>        * **/
> 
>       protected void onPostExecute(String file_url) {
>           // dismiss the dialog after getting all products
>           pDialog.dismiss();
>           // updating UI from Background Thread
>           runOnUiThread(new Runnable() {
>               public void run() {
>                   /**
>                    * Updating parsed JSON data into ListView
>                    * */
>                   ListAdapter adapter = new SimpleAdapter(
>                           quoPAPIERCORD.this, productsList,
>                           R.layout.list_item, new String[] { >TAG_PID,
>                                   TAG_NAME, >TAG_PRICE, TAG_CU},
>                           new int[] { R.id.pid, R.id.name, >R.id.price, R.id.cu });
>                   // updating listview
>                   setListAdapter(adapter);
>               }
>           });
> 
>       }
> 
>   } 
> ```
> 
> }

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    android:padding="5px"
    android:stretchColumns="1">

    <!-- Product id (pid) - will be HIDDEN - used to pass to other activity -->
    <TextView
        android:id="@+id/pid"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:visibility="gone" />

    <!-- Name Label -->
    <TextView
        android:id="@+id/name"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingRight="10px" 
        android:textSize="17sp"
        android:layout_marginRight="10px"
        android:layout_weight="0.2"
        android:textColor="#fff"
        android:gravity="left"  />

    <!-- price Label -->
    <TextView
        android:id="@+id/price"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingRight="5px" 
        android:textSize="17sp"
        android:layout_marginRight="5px"
        android:layout_weight="0.2"
        android:textColor="#C00000"
        android:gravity="left"
        android:textStyle="bold"  />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/quo100px"/>

     <TextView
        android:id="@+id/cu"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingRight="5px" 
        android:textSize="17sp"
        android:layout_marginRight="5px"
        android:layout_weight="0.2"
        android:textColor="#C00000"
        android:gravity="left"
        android:textStyle="bold"  />

      <TextView
        android:id="@+id/mc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingRight="5px" 
        android:textSize="17sp"
        android:layout_marginRight="5px"
        android:layout_weight="0.2"
        android:textColor="#C00000"
        android:gravity="left"
        android:textStyle="bold"  />

      <TextView
        android:id="@+id/tel"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingRight="5px" 
        android:textSize="17sp"
        android:layout_marginRight="5px"
        android:layout_weight="0.2"
        android:textColor="#C00000"
        android:gravity="left"
        android:textStyle="bold"  />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T06:52:13.063

[在这里](https://stackoverflow.com/questions/15811776/android-imageview-setvisibility)看到您的错误，您无法在 DoInBackgroud 中访问 UI（Textview、Edittext、ImageView 等**）**。在**OnPostExecute**或**OnProgressUpdate**方法上执行此操作

编辑：改变这个

```
if (cu.equals("1"))
{
   cu = "oui";
} 
else
{
   ImageView image_A_wrong = (ImageView) findViewById(R.id.imageView1);
   image_A_wrong.setVisibility(View.GONE);
} 
```

至

```
if (cu.equals("1"))
{
   cu = "oui";
} 
else
{
   cu = "pas";
} 
```

然后将此添加到您的**OnPostExecute()**

编辑 2：看到你的代码，我有点缩小了你的错误。上面的代码必须像

全局声明字符串**cu**然后尝试以下操作

```
ImageView image_A_wrong = (ImageView) findViewById(R.id.imageView1);
if(cu.equals("pas"))
{
    image_A_wrong.setVisibility(View.GONE);
}
else
{
    image_A_wrong.setVisibility(View.GONE);
} 
```

# java - 大型 XML 的 XML 节点到字符串的转换

> ID：15897562
> 
> 赞同：3
> 
> 时间：2013-04-09T08:57:20.130
> 
> 标签：java, android, xml, out-of-memory, xslt

到目前为止，我在我的 Android 应用程序中使用**DOMSource**将 XML 文件转换为字符串。

**这是我的代码**：

```
public  String convertElementToString (Node element) throws TransformerConfigurationException, TransformerFactoryConfigurationError
{
      Transformer transformer = TransformerFactory.newInstance().newTransformer();
      transformer.setOutputProperty(OutputKeys.INDENT, "yes");

       //initialize StreamResult with File object to save to file
      StreamResult result = new StreamResult(new StringWriter());
      DOMSource source = new DOMSource(element);

      try {
          transformer.transform(source, result);  
      } 
      catch (TransformerException e) {
          Log.e("CONVERT_ELEMENT_TO_STRING", "converting element to string failed. Aborting", e);
      }

      String xmlString = result.getWriter().toString();
      xmlString = xmlString.replace("<?xml version=\"1.0\" encoding=\"UTF-8\"?>", "");
      xmlString = xmlString.replace("\n", "");
      return xmlString; 
} 
```

这**适用于小型 xml**文件。

**但是**对于**大型 xml** ，此代码开始**抛出 OutOfMemoryError**。

其背后的原因可能是什么以及如何纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:06:21.490

首先：如果您只需要将 XML 作为字符串，并且不使用`Node`其他任何内容，则应该使用 StAX（[XML 的 Streaming API](http://docs.oracle.com/javase/tutorial/jaxp/stax/index.html)），因为它的内存占用要低得多。您会在`javax.xml.stream`标准库的包中找到 StAX。

对当前代码的一项改进是更改行

```
transformer.setOutputProperty(OutputKeys.INDENT, "yes"); 
```

至

```
transformer.setOutputProperty(OutputKeys.INDENT, "no"); 
```

由于您在方法结束时无论如何都要删除换行符，因此在输出中请求额外的缩进并不是很有用。这是一件小事，但如果您的 XML 中有很多标签（因此，换行符和缩进的空格），可能会稍微减少您的内存需求。

# android - 3.0以上android版本的可滚动滑动标签，如何为不同的标签添加不同的屏幕

> ID：15897565
> 
> 赞同：0
> 
> 时间：2013-04-09T08:57:43.360
> 
> 标签：android, android-listview, swipe, android-fragmentactivity, scrollable

我是 android 应用程序的初学者，我在 tab+swipe 应用程序上工作，我的主类就像 belove。请帮帮我。公共类 MainScreenViewActivity 扩展 FragmentActivity {

```
 /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide
     * fragments for each of the sections. We use a
     * {@link android.support.v4.app.FragmentPagerAdapter} derivative, which
     * will keep every loaded fragment in memory. If this becomes too memory
     * intensive, it may be best to switch to a
     * {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    SectionsPagerAdapter mSectionsPagerAdapter;
    private static String list_display_data1 = "item@sec1";
    private static String list_display_data2 = "item@sec2";
    private static String list_display_data3 = "item@sec3";
    private static View rootView;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_screen_view);

        // Create the adapter that will return a fragment for each of the three
        // primary sections of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(
                getSupportFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);
        /*mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener(){

            @Override
            public void onPageSelected(int position) {
                super.onPageSelected(position);
                // When swiping between pages, select the
                // corresponding tab.
                getActionBar().setSelectedNavigationItem(position);
            }
        });*/

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main_screen_view, menu);
        return true;
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the sections/tabs/pages.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            // getItem is called to instantiate the fragment for the given page.
            // Return a DummySectionFragment (defined as a static inner class
            // below) with the page number as its lone argument.
            Fragment fragment = null;
            fragment = new DummySectionFragment();
            Bundle args = new Bundle();
            args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
            fragment.setArguments(args);

            return fragment;
        }

        @Override
        public int getCount() {
            // Show 3 total pages.
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            Locale l = Locale.getDefault();
            switch (position) {
            case 0:
                return getString(R.string.title_section1).toUpperCase(l);
            case 1:
                return getString(R.string.title_section2).toUpperCase(l);
            case 2:
                return getString(R.string.title_section3).toUpperCase(l);
            }
            return null;
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply
     * displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static final String ARG_SECTION_NUMBER = "section_number";

        public DummySectionFragment() {
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            rootView = inflater.inflate(
                    R.layout.fragment_main_screen_view_dummy, container, false);
            TextView dummyTextView = (TextView) rootView
                    .findViewById(R.id.section_label);
            dummyTextView.setText(Integer.toString(getArguments().getInt(
                    ARG_SECTION_NUMBER)));

            dummyTextView.setVisibility(View.INVISIBLE);
            if(dummyTextView.getVisibility() == View.VISIBLE){
                ListView sessionList = (ListView) rootView.findViewById(R.id.session_list);
                initListView(getActivity(), sessionList, list_display_data1, 30, android.R.layout.simple_list_item_1);
            }
            else{
                Log.d("", "");   
            }

            //ListView sessionList = (ListView) rootView.findViewById(R.id.session_list);
            //initListView(getActivity(), sessionList, list_display_data1, 30, android.R.layout.simple_list_item_1);
            return rootView;
        }
    }

    public static void initListView(Context context, ListView listView,String prefix, int numItems, int layout ){

        // By using setAdpater method in listview we an add string array in list.
        String[] arr = new String[numItems];
        for(int i = 0; i< arr.length; i++){

            arr[i] = prefix + (i +1);
        }

        listView.setAdapter(new ArrayAdapter<String>(context, layout, arr));
        listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id) {
                Context context = view.getContext();

                String msg = "item[" + position + "]= " + parent.getItemIdAtPosition(position);

                Toast.makeText(context, msg, 1000).show();
                System.out.println(msg);

            }
        });

    }
} 
```

在 dummySectionFragment 的 onCreateView 中如何添加不同的列表视图。我只能处理视图的可见性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:33:02.127

您应该为不同的标签添加`Fragments`到`viewpager`不同的页面。

# c++ - 使用 char[] 创建字符串

> ID：15897566
> 
> 赞同：1
> 
> 时间：2013-04-09T08:57:46.253
> 
> 标签：c++, string, char

```
#include <iostream>

using namespace std;

int main()
{
    char strin[206];

    strin = "sds";
    cout<<strin;
} 
```

为什么我会收到此错误？

```
error: incompatible types in assignment of 'const char [4]' to 'char [206]' //on line strin = "sds" 
```

我正在关注[这个](http://www.cprogramming.com/tutorial/lesson9.html)初学者教程

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T09:01:45.993

该错误来自您试图将一个数组分配给另一个数组的事实。赋值运算符不能这样做；您必须使用`strcpy()`or复制数组`std::copy()`。

但是，由于您想在 C++ 中工作，因此您应该真正使用`std::string`而不是`char[]`存储字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T09:01:17.217

您不能直接将数组分配给另一个数组。它应该被复制元素到元素。

[`std::strcpy`](http://en.cppreference.com/w/cpp/string/byte/strcpy)从[`<cstring>`](http://en.cppreference.com/w/cpp/header/cstring)标头使用

```
char strin[206];
std::strcpy(strin, "sds"); 
```

[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)从[`<string>`](http://en.cppreference.com/w/cpp/header/string)标头使用

```
std::string strin;
strin = "sds"; 
```

由于您使用的是 C++，请选择第二个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T09:01:22.820

你的代码；

```
strin = "sds"; 
```

应该：

```
strcpy(strin, "sds"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T09:03:11.253

C/C++ 没有内置的字符串操作。您需要使用任一功能：

```
strcpy(strin, "sds"); // will work in C and C++
// strncpy(strin, "sds", 205); // safer if you want to copy user-given string 
```

或`std::string`：

```
std::string strin(206, 0);

strin = "sds"; // only C++ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T09:04:44.920

**strin**是一个数组，它是指向 chars 的**const****指针**，而不是指向**chars**的指针。您试图更改**const**指针，这是被禁止的

 ******你需要复制字符串。例如这样

```
strcpy (string, "sds"); 
```

（在一般情况下意识到缓冲区溢出！）******

# database - 删除选中的复选框勾选的行

> ID：15897567
> 
> 赞同：1
> 
> 时间：2013-04-09T08:57:46.883
> 
> 标签：database, jsp, checkbox

我是jsp的新手。我在从数据库中获取的每一行前面提供了复选框。现在我想删除其复选框已被选中的行。请建议如何在提交表单时完成此任务。我可以在最后进行删除查询，但问题是复选框是否打勾。我们有什么办法`request.getParameter("delete_checkbox").value`或类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:08:25.583

这就是你需要的：

[http://theopentutorials.com/examples/java-ee/servlet/getting-checkbox-values-from-html-form-in-servlet/](http://theopentutorials.com/examples/java-ee/servlet/getting-checkbox-values-from-html-form-in-servlet/)

如教程中所示，值`attribute`传递记录的 ID。

在 servlet 中将它们解析为 Long 并将服务器命中到`delete`.

# jquery - 如何根据计算从下拉列表中更新一个值？

> ID：15897571
> 
> 赞同：-1
> 
> 时间：2013-04-09T08:57:57.167
> 
> 标签：jquery, html

例如：我从保额获得下拉列表，我想自动计算保费。例如，如果选择了 30000 的保额，那么保费 361.30 将在保费选择列表中被选中。

```
<select id="sumAssured"> 
<option value="10000">10000</option> 
<option value="20000">20000</option> 
<option selected="selected" value="30000">30000</option>  
<option value="50000">50000</option>
<option value="100000">100000</option> 
</select> 
```

溢价 361.30 将在后端自动计算。

建议使用 Jquery，谢谢 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:01:46.747

你不需要为此使用 JQuery，JavaScript 会为你做。
使用下面的脚本：

```
var stateVar = $('#selected option, #selected optgroup');
    stateVar.hide();
    $('#sumAssured').change(function () {
        stateVar.hide();
        $("#selected optgroup[label='" + $(this).find(':selected').html() + "']")
            .children()
            .andSelf()
            .show();
  }); 
```

有关 HTML 的更多详细信息，您也可以[在此处](https://stackoverflow.com/questions/15829948/depending-on-first-drop-list-selection-second-drop-down-list-should-contain-rel/15830286#15830286)参考我的回答。
如有任何疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:21:11.223

使用 jquery 更改事件。

```
<input type="text" id="tb" />

$("#sumAssured").change(function()
{ 
       var selectedvalue = $(this).val();
     // do your calculation
     $("#tb").val(selectedvalue);
}); 
```

工作[演示](http://jsfiddle.net/XMQ3V/)

# java - 为什么请求将发送到 Struts Dispatcher？

> ID：15897572
> 
> 赞同：0
> 
> 时间：2013-04-09T08:58:01.257
> 
> 标签：java, spring, spring-mvc, configuration, struts2

我同时配置了 Struts 2 和 Spring MVC。我的`web.xml`样子如下。当我点击 REST URL 上传文件时，它调用 struts 调度程序而不是 Spring。

为什么 URL`/rest/uploadfile/iec9.pdf`要去 Struts Dispatcher？

**`web.xml`：**

```
<filter>
<filter-name>struts2</filter-name>
<filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
</filter>

<filter-mapping>
<filter-name>struts2</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping>

<servlet>
<servlet-name>springmvc-dispatcher</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
<servlet-name>springmvc-dispatcher</servlet-name>
<url-pattern>/rest/*</url-pattern>
</servlet-mapping>

<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>/WEB-INF/springmvc-dispatcher-servlet.xml</param-value>
</context-param>

<listener>
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<filter>
<filter-name>jsonpCallbackFilter</filter-name>
<filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
<filter-name>jsonpCallbackFilter</filter-name>
<url-pattern>*.json</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T11:52:42.867

您的 spring MVC 调度程序 servlet 映射到由 Struts 过滤器处理的 URL 子集。就在任何其他 servlet 之前调用的过滤器而言，它将具有优先权。要解决此问题，您需要将 Struts 配置为从映射中排除某些 URL。

```
<struts>
    <constant name="struts.action.excludePattern" value="/rest/?.*"/>
    ...

</struts> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-07T16:25:58.810

添加到 Roman 的回答中，在同一个项目中配置 Struts 和 Spring MVC 时，通常使用 struts exclude 过滤器。当发出请求时，Struts 将尝试处理请求，当它被排除时，Spring MVC 将接管并处理请求。值得注意的是，Struts 的排除过滤器可以放在一个属性文件中，例如一个 struts.properties。通常可以在此处使用 Regex 以排除常用短语（例如，如果类中的所有操作或控制器共享一个公共部分，则可以使用 Regex 排除所有操作）。

# c# - 区分制表符分隔、空格分隔和逗号分隔的流

> ID：15897581
> 
> 赞同：0
> 
> 时间：2013-04-09T08:58:25.537
> 
> 标签：c#, streamreader

我正在使用以下代码来读取制表符分隔的流。

```
using (StreamReader readFile = new StreamReader(path))
{
    string line;
    string[] row;
    while ((line = readFile.ReadLine()) != null)
    {
        row = line.Split('\t');
        parsedData.Add(row);
    }
} 
```

但是，有时用户可能会提供以空格或逗号分隔的文件。如何自动检测分隔符而不必更改`row = line.Split('\t');`为`row = line.Split(' ');`or `row = line.Split(',');`？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:00:50.647

您无法事先区分它们。

您*可以*做的是尝试拆分所有这些：

```
row = line.Split('\t', ' ', ','); 
```

这当然假设分隔符之间的数据不包含分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:01:23.480

您可以使用 to string.Split 方法按字符数拆分数据

```
var delims = new [] {',', '\t', ' ' };  
var result = line.Split(delims, StringSplitOptions.RemoveEmptyEntries); 
```

或者你可以使用正则表达式

```
var result = Regex.Split(line, @"[,\t ]+") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:01:26.783

您必须定义分隔符是什么以及如何检测它。如果您说：*“文件的分隔符是我在第一行遇到的第一个不带引号的空白字符”*，那么您可以读取第一行并确定分隔符。然后，您可以将其传递给该`.Split()`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T09:01:50.737

```
row = line.Split(new char[]{' ', ',', '\t'}, StringSplitOptions.RemoveEmptyEntries); 
```

# javascript - 在客户端的 JavaScript 中将文件作为二进制数据读取

> ID：15897582
> 
> 赞同：0
> 
> 时间：2013-04-09T08:58:28.993
> 
> 标签：javascript, file-io, binaryfiles, binary-data

正如问题所述，我想要某种方法来使用 JavaScript 在客户端读取文件（还有其他可能的替代方法吗？）。

这些文件（主要是图片）是网页的一部分，所以我不需要访问文件系统。

所以基本上我的问题应该归结为，是否可以在 JavaScript 中以二进制模式打开文件并逐字节读取它？

* * *

我想要达到的目标似乎有些混乱。问题[如何使用 Javascript 和 XMLHttpRequest 加载二进制图像数据？](https://stackoverflow.com/questions/1095102/how-do-i-load-binary-image-data-using-javascript-and-xmlhttprequest)处理用户实际上能够向服务器发出自己的请求并设置自己的 mime 类型等的情况。

我希望创建一个 js 函数/脚本，将网页上已加载的文件作为二进制文件读取，以便提取元数据。

# eclipse-plugin - Eclipse Papyrus 上的 OCL 约束检查

> ID：15897583
> 
> 赞同：3
> 
> 时间：2013-04-09T08:58:36.957
> 
> 标签：eclipse-plugin, uml, check-constraints, ocl, papyrus

有没有人设法检查在 Eclipse Papyrus 中建模的类图上的 OCL 约束？我已经定义了一个简单的测试配置文件，对原型属性只有一个约束：

```
{OCL} self.property > 0 
```

构造型扩展了属性元类，因此我将它应用到类属性上，并将构造型的属性设置为 0。但是上下文菜单中的“*验证”>“验证模型*”命令从未出现错误。

任何帮助将不胜感激。

提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-23T15:16:11.450

我为可能有同样问题的其他人回答自己。

OCL 约束检查不适用于 Papyrus 0.9.x 您必须下载 OCL 和 Papyrus 的最新版本。

您可以从这些存储库下载它们：

*   [http://download.eclipse.org/modeling/mdt/papyrus/updates/nightly/kepler/](http://download.eclipse.org/modeling/mdt/papyrus/updates/nightly/kepler/)
*   [http://download.eclipse.org/modeling/mdt/ocl/updates/nightly](http://download.eclipse.org/modeling/mdt/ocl/updates/nightly)

请注意，您必须使用 Eclipse Kepler 而不是 Juno。

# javascript - 使用 javascript 在 ipad 应用程序中创建 csv 文件

> ID：15897590
> 
> 赞同：-1
> 
> 时间：2013-04-09T08:58:59.003
> 
> 标签：javascript, jquery, ios, html, ipad

请让我知道是否可以在 ipad 应用程序中使用。

从 html 页面获取文本字段数据并将其保存到我的 html5 本地存储中。从本地存储中获取数据并写入 csv 文件并使用 javascript 将其保存在 ipad 中。然后能够从 ipad 位置获取 csv 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:15:50.057

查看 jquery 插件以从表中获取数据，例如 table2csv

也看看这个答案：[Export to csv in jQuery](https://stackoverflow.com/questions/4639372/export-to-csv-in-jquery)

这可能会奏效或让您成功，即有数据保存到本地存储？

# button - ext:Button 没有显示，即使 render=true

> ID：15897594
> 
> 赞同：0
> 
> 时间：2013-04-09T08:59:06.007
> 
> 标签：button, ext.net

所以我得到了一些非常简单的标记，其中包含一个工具栏内的按钮。

现在的问题是，即使按钮“正确”写入 DOM，它也不会显示出来。
有关详细信息，请参阅此屏幕截图：

![截屏](https://i.stack.imgur.com/yTY0D.jpg)

有人介意解释为什么设置固定的高度/宽度/位置不会将按钮带到前面并且包含的​​标记元素都具有`width=0px;`或`height=0px;`吗？

这是一个示例：

```
<body>
<ext:ResourceManager ID="RM" runat="server" />
<ext:Viewport Layout="BorderLayout" runat="server" ID="InnerView" OverflowY="Scroll">
    <Content>
        <ext:Button ID="adminswap" runat="server" Text="Admin-Ansicht umschalten" Hidden="false"
            AllowDepress="true" MinHeight="16" ToFrontOnShow="true" Visible="true" Icon="ArrowSwitchBluegreen">
            <%-- This Guy doesn't show up--%>
        </ext:Button>
        <ext:Panel runat="server" ID="order" Border="false" OverflowY="Scroll">
            <LayoutConfig> 
                <ext:TableLayoutConfig Columns="3" />
            </LayoutConfig>
            <Items>
                <ext:Panel runat="server" Layout="ColumnLayout" RowSpan="2" Border="false">
                    <Content>
                       <p> And here is some Grid-panel, which is of no further interest</p>
                    </Content>
                </ext:Panel>
                <ext:Panel ColSpan="2" runat="server" ID="Panel_Instructions" Title="Türöffnung per Telefon"
                    Width="740" Padding="10" Border="true" AutoHeight="true">
                    <Content>
                        <br />
                        <p>
                            Some Multiline text containing instructions<br>
                            this also is of no further interest and just for the sake of the sample<br><br> lorem Ipsum dolor sit amet and stuff...
                        </p>
                    </Content>
                </ext:Panel>
                <ext:Panel runat="server" Width="350" AutoHeight="false" Height="200"
                    StripeRows="true" TrackMouseOver="true" Border="true">
                    <Content>
                       <p>Some Content Grid-Panel</p>
                    </Content>
                </ext:Panel>
                <ext:Panel runat="server" ID="Standort_Details" Title="Adresse" Width="370" Padding="10"
                    AutoHeight="false" Height="200" Border="true">
                    <Items>
                        <ext:DisplayField ID="Details_field1" runat="server" FieldLabel="street"
                            Name="" />
                        <ext:DisplayField ID="Details_field2" runat="server" FieldLabel="postal code" Name="" />
                        <ext:DisplayField ID="Details_field3" runat="server" FieldLabel="city" Name="" />
                        <ext:DisplayField ID="Details_field4" runat="server" FieldLabel="phone" Name="" />
                    </Items>
                </ext:Panel>
                <ext:Panel ID="Panel_5" Border="true" Height="460" StyleSpec="vertical-align:top;" ColSpan="3" runat="server">
                    <Content>
                        <p> some content control grid-panel</p>
                    </Content>
                </ext:Panel>
            </Items>
        </ext:Panel>
      </Content>
  </ext:Viewport>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T11:42:19.130

BorderLayout 适用于区域。您没有指定任何区域。要使 Button 可见，您只需删除视口的 Layout="BorderLayout"。

这是[使用 BorderLayout 的示例](http://examples.ext.net/#/Layout/BorderLayout/Simple_in_Markup/)。

# mysql - 查询另一个表的子结果

> ID：15897596
> 
> 赞同：0
> 
> 时间：2013-04-09T08:59:06.870
> 
> 标签：mysql, sql

我有以下两个数据库表：

```
`membership_members` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` tinytext NOT NULL,
  `active` tinyint(1) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`)
)

`membership_payments` (
  `date` date NOT NULL,
  `amount` int(11) NOT NULL,
  `member` int(11) NOT NULL,
  KEY `member` (`member`)
) 
```

我希望列出所有成员，对于每个成员，我想显示该成员所有付款的清单。该`membership_payments.member`列是一个外键`membership_members.id`（这是 MySQL，所以我不能明确指定一个外键）。请注意，我确实想列出一个成员，即使他没有任何付款。

所以像：

```
* John Smith
    - 2012-05-06 $100
    - 2012-01-02 $100
* Brian Jones

* Mike Jackson
    - 2012-09-02 $50 
```

我试过这个查询：

```
SELECT id, name, active, date, amount
FROM `membership_members`,
     `membership_payments`
WHERE membership_members.id = member 
```

这当然给了我我需要的数据，但并不完全是我需要的数据，因为它为每次付款返回一行。这意味着我以后必须按成员 ID 对行（在 PHP 中）进行分组，这样我就不会多次列出一个成员。我*可以*这样做，但我相信在 SQL 中这样做会更容易和更快。此外，此查询仅向我提供使用其 ID 付款的用户。

我觉得这应该很简单，但上一次我做的除了 SQL 中最简单的东西是 6-7 年前。

**编辑：** `LEFT OUTER JOIN`答案之一中的建议解决了“失踪”成员的问题。但是，按成员 ID 对结果进行分组的最佳方式是什么？我知道有一个`GROUP BY`条款，但它并没有给我给定成员的所有付款，只有一个。我想我可以为每个成员运行一个新的付款查询，但我担心这会非常低效（我们大约有 300-400 个成员）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:01:35.787

您需要`JOIN`基于引用键列的两个表。

```
SELECT id, name, active, date, amount
FROM membership_members
    LEFT OUTER JOIN membership_payments 
        ON membership_members.id = membership_payments.member;
```

我选择`LEFT OUTER JOIN`这样也显示没有付款的成员。

有关连接的更多信息，请查看[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

**编辑**

用于`ORDER BY membership_members.id`获取按特定列排序的记录。分组的行为不像排序。按您提供的列`GROUPING` **合并所有记录。**`ORDER BY` **排序**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:01:17.790

看一下`GROUP_CONCAT`MySQL 子句。

[`Example`](http://www.w3resource.com/mysql/aggregate-functions-and-grouping/aggregate-functions-and-grouping-group_concat.php)

**或者**

您可以使用`CONCAT`.

**例子**

```
SELECT CONCAT(`membership_payments.date`, ' ', `membership_payments.amount`) 
   FROM `membership_members`
 LEFT OUTER JOIN membership_payments 
    ON membership_members.id = membership_payments.member; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T09:01:49.510

采用`LEFT JOIN`

基本上，你现在正在做的是一个`INNER JOIN`. `INNER JOIN`只有在每个表上至少有一条记录时才显示一条记录。但`LEFT JOIN`运作方式不同。它显示左侧表上的所有记录，*无论它在右侧**表*上是否有匹配记录。

 *```
SELECT  id, name, active, date, amount
FROM    `membership_members` a
        LEFT JOIN `membership_payments` b
            ON a.ID = b.member 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)*

# ember.js - Ember 模板和 Google AdSense

> ID：15897597
> 
> 赞同：7
> 
> 时间：2013-04-09T08:59:08.327
> 
> 标签：ember.js, handlebars.js, adsense

在 Ember（Handlebars）模板中包含 Google AdSense 横幅的适当方法是什么？假设我有一个看起来像这样的视图模板：

```
<script type="text/x-handlebars" data-template-name="myPageWithBanner">
  <div id="mainContent"> 
    Lorem ipsum main content
  </div>
  <div id="banner">
    //Normally I would insert a script tag here, but that is not possible
  </div>
</script> 
```

我是否需要使用预编译模板从代码中执行此操作，还是有我不知道的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T11:28:29.037

我没有 Google AdSense 帐户，因此无法对此进行测试。但是这里有几个主要问题：

1.  您不能`<script>`在 Handlebars 模板中包含标签，即使您使用 CDATA。
2.  Google AdSense 要求 AdSense JavaScript 逐字显示在您的网页中，否则违反了 TOS。
3.  根据[这个 StackOverflow 答案](https://stackoverflow.com/questions/6161806/desperately-need-a-solution-for-adsense-that-works-with-ajax?rq=1)，目前 AJAX 网站上的 AdSense 支持很差。
4.  Google AdSense 抓取工具将无法看到您网页上的任何内容，因此我怀疑广告定位是否会起作用。但是请参阅下面的一些可能对爬虫有帮助的东西。

但为了简单起见，我假设您可以直接与 Google 讨论 TOS 问题，我将尝试解决技术问题。首先，基于[这个 StackOverflow 答案](https://stackoverflow.com/questions/3418041/add-javascript-into-a-html-page-with-jquery)，这里有一个可能的解决方案，可以让您逐字提供 Google 的脚本：

```
<script type="text/x-handlebars">
    <h1>Ember AdSense</h1>
    {{outlet}}
    <div id="ads"></div>
</script>

<script type="text/x-handlebars" data-template-name="index">
    <p>Hello, world!</p>
</script>

<div id="ads-load" style="display: none">

<!--
  Apparently this needs to appear verbatim, exactly as Google gave it to
  you, or it's a TOS violation.
-->

<script type="text/javascript"><!--
google_ad_client = "ca-pub-XXXXXXXXXX";
/* Test Ad */
google_ad_slot = "XXXXXX";
google_ad_width = 250;
google_ad_height = 250;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>

</div> 
```

然后当我们的主模板加载时，我们使用 jQuery 将广告移动到我们的应用程序模板中：

```
window.App = Ember.Application.create();

// Explicitly declare the view class for our application view.
App.ApplicationView = Ember.View.extend({
    // Called once the view is rendered.
    didInsertElement: function () {
        $('#ads-load').appendTo("#ads").css("display", "block");
    }
}); 
```

至于允许谷歌爬虫看到你的内容，谷歌[官方对 AJAX 应用有建议](https://developers.google.com/webmasters/ajax-crawling/)，但[不知道是否适用于 AdSense 爬虫](http://productforums.google.com/forum/#!topic/adsense/lQNyzydWtHA)。或者，如果您`pushState`用于更新显示的 URL，那么您需要确保当爬虫请求时，这些 URL 中的每一个都可以由您的服务器呈现。（Discourse 论坛软件[正是这样做](http://meta.discourse.org/t/will-posts-show-up-on-google/1184/15)的。）

如果它让你更接近，请告诉我。

# facebook - iOS 6+ Facebook / Twitter 分享 - 是否预填充文本

> ID：15897598
> 
> 赞同：0
> 
> 时间：2013-04-09T08:59:08.317
> 
> 标签：facebook, text, ios6, share

我一直在研究 iOS 6 及其分享功能。我看到有些人（例如他们的应用商店中的苹果）预先填充了一些相关文本的 Facebook 共享弹出窗口，而其他人则将其留空供用户填写（仅提供图像/网址）。

我看到了前者的好处（因为您可以节省用户时间），例如通过发布：“喜欢这个新应用程序”。但同样，如果此部分留空，则用户更有可能创建个性化消息。

有谁知道最好的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:32:49.440

好的，看起来 iTunes App Store 确实使用应用程序名称和开发人员名称预先填充了这些字段。

然而，一位同事向我指出了这一点：Facebook 平台政策的相关部分是第四节。2 这里： [https ://developers.facebook.com/policy/#integration](https://developers.facebook.com/policy/#integration)

你猜陪审团还没出吗？

# excel - 尝试使用 VBA 遍历 Excel 中的列但失败。我究竟做错了什么？

> ID：15897604
> 
> 赞同：0
> 
> 时间：2013-04-09T08:59:23.943
> 
> 标签：excel, vba

我正在尝试遍历 Excel 中的 A 列。检查它是否有值，如果有，移动到 b 列中的相邻单元格并检查该值并将其存储以用于搜索。

我什至无法通过 A 列的循环工作。我已经查看了数百个示例以及我应该使用的示例。

有人可以指出缺少什么吗？这是我的代码：

```
Sub AdjacentRow()

    Dim xlWrkBk As Excel.Workbook

    Dim xlsht As Excel.Worksheet
    Dim xl As Excel.Application

    Set xl = CreateObject("Excel.Application")
    Set xlWrkBk = GetObject("C:\Users\my_username\Desktop\AgileProjects\ITAG Open Interactions.xlsx")
    Set xlsht = xlWrkBk.Worksheets(1)

    Dim i, j, FirstCell, LastCell As Integer
    Dim strIMresult As String

    Dim Cell, Row, Column As Excel.Range

    'Set Cell = Range("A9").End(xlDown)
    'Set Cell = Range([a1], [a250])

    For Each Row In Range("A9:A250").Rows
        If Not IsEmpty(ActiveCell.Value) Then
            'move to adjacent cell
            ActiveCell.Offset(0, 1).Select
            If Not IsEmpty(ActiveCell.Value) Then
                'copy the value
                strIMresult = ActiveCell.Value
                'ActiveCell.Offset(1, 0).Select
                'ActiveCell = strIMresult
                Debug.Print strIMresult
            Else
                ActiveCell.Offset(0, -1).Select
            End If
        End If
    Next Row

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:57:57.800

您的许多变量的尺寸不正确，这可能会导致错误（或将来可能会导致错误）。

例如，将、 和`Dim i, j, FirstCell, LastCell As Integer`声明为 Variant。只有. 与：将 声明为 Variant 相同，仅声明为 Range 变量。`i``j``FirstCell``LastCell as Integer``Dim Cell, Row, Column As Excel.Range``Cell``Row``Column`

这应该让你开始。我清理了声明，并删除了您注释掉的行并进行了一些更改，因此您的循环现在应该可以正常工作。

```
Sub AdjacentRow()

Dim xlWrkBk As Excel.Workbook

Dim xlsht As Excel.Worksheet
Dim xl As Excel.Application

Dim i#, j#, FirstCell#, LastCell#
Dim strIMresult As String
Dim cl As Excel.Range
Dim clNext As Excel.Range

Set xl = CreateObject("Excel.Application")
Set xlWrkBk = GetObject("C:\Users\my_username\Desktop\AgileProjects\ITAG Open Interactions.xlsx")
Set xlsht = xlWrkBk.Worksheets(1)

For Each cl In xlsht.Range("A9:A250")
    Set clNext = cl.Offset(0, 1)
    If Not cl.Value = vbNullString Then
        'check the adjacent cell'
        If Not clNext.Value = vbNullString Then
            'store the value'
            strIMresult = clNext.Value
            Debug.Print strIMresult
        End If
    End If
Next Row

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T13:56:32.930

**一般评论 1**

VBA 中的尺寸标注应该针对每个变量进行，只有一行中的最后一个会获得您指定的类型。所以以下内容：

```
Dim Cell, Row, Column As Excel.Range 
```

应该变成：

```
Dim Cell As Excel.Range, Row As Excel.Range, Column As Excel.Range 
```

如果此脚本在 Excel VBA 中，您甚至不需要使用 Excel。只需将其标注为范围：

```
Dim aa As Range 
```

**一般性评论 2**

您使用行、列和单元格作为局部变量，这些是 Excel 中现有的对象，也不应该用作局部变量名！！此外，他们对这样的名字并没有说太多。请将这些变量/对象名称更改为有意义且独特的名称！

**现在解决问题**

您确实遍历了行，但是您的脚本根本不与行交互！您的脚本正在与 ActiveCell 范围交互...因此，在脚本中更改 ActiveCell 以引用 Row 变量（使用其新名称...）：

```
If Not IsEmpty(Row.Value) Then 
```

看看会发生什么！

此外，我想知道是否`Range("A9:A250").Rows`实际上包含任何内容，因为您没有明确引用 Excel 工作表对象。你最好在调试模式下运行它，看看你的局部变量和对象是否真的引用了你所期望的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T14:17:20.757

我不明白你的代码是什么意思，但我认为你的代码几乎没有问题：

1) 避免使用与 vba 对象名称相同的变量名称，例如“row”、“column”、“cell”。它可能会导致错误，因此最好使用相同的名称，例如“myrow”、“row1”、“rw”等。

2) 如果您想在“ITAG Open Interactions.xlsx”工作表之一上创建循环，您必须引用它的名称并指定工作表，例如“xlWrkBk.Worksheets(1).Range("A9:A250") .行”

3) 在 ActiveCell 引用迭代单元之前，您必须激活它，如 (row1.Activate)。但是，我更喜欢使用选择和选择。

4）当你打开其他excel应用程序并创建对象时，你应该在代码的最后关闭或释放它们，比如“set xlWrkbk = nothing”或“xl.Application.Quit”。

5）当使用循环“For Each”时，您可以检查当前迭代的范围是否满足您的要求，然后执行指定的操作。您不必返回右列，因此可以跳过外部 if 语句。

我不完全知道你想用 strIMresult 做什么，但是整个代码应该是这样的：

```
Sub AdjacentRow()

Dim xlWrkBk As Excel.Workbook
Dim xl As Excel.Application

Set xl = CreateObject("Excel.Application")
Set xlWrkBk = GetObject("D:\Excel\a.xlsx")

Dim i, j As Integer
Dim strIMresult As String
Dim row1 As Excel.Range

xlWrkBk.Worksheets(1).Activate
For Each row1 In xlWrkBk.Worksheets(1).Range("A9:A250").Rows
    row1.Select
    If Not IsEmpty(Selection) Then
        'move to adjacent cell
        Selection.Offset(0, 1).Select
        strIMresult = Selection
        'I dont understand what the code should do with the value from b column,
        'so you should add here some code.
        'For now I just added code that print string value in the message box
        MsgBox (strIMresult)
    End If
Next

Set xlWrkBk = Nothing
xl.Application.Quit 
```

结束子

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T14:14:39.790

这是有效的：

```
Sub AdjacentRow()

    Dim xlWrkBk As Excel.Workbook

    Dim xlsht As Excel.Worksheet
    Dim xl As Excel.Application

    Set xl = CreateObject("Excel.Application")

    Set xlWrkBk = GetObject("C:\Users\My_Account\Desktop\tst.xlsx")
    Set xlsht = xlWrkBk.Worksheets(1)

    Dim i, j, FirstCell, LastCell As Integer
    Dim strIMresult As String

    Dim Cell, Row, Column As Excel.Range

    For Each Row In xlsht.Range("A9:A250").Rows
        For Each Cell In Row.Cells

            If Len(Cell.Value) > 0 Then
                'move to adjacent cell
                ActiveCell.Offset(0, 1).Select

                If Len(ActiveCell.Value) > 0 Then
                    'copy the value
                    strIMresult = ActiveCell.Value

                    Debug.Print strIMresult
                Else
                    ActiveCell.Offset(0, -1).Select
                End If
            End If
        Next Cell
    Next Row
End Sub 
```

最终修复如下

```
For Each Row In Range("A9:A250").Rows 
```

更改为

```
For Each Row In xlsht.Range("A9:A250").Rows 
```

指定必须循环通过的工作表。然后添加，

```
For Each Cell In Row.Cells 
```

# solr - 在 Solr 中禁用显式提交

> ID：15897605
> 
> 赞同：2
> 
> 时间：2013-04-09T08:59:29.733
> 
> 标签：solr, lucene

我目前正在努力提高我无法完全控制执行索引的代码的应用程序的索引速度。我发现索引代码在每个文档之后都会进行提交，出于性能原因，我想避免这种情况。

**问题：**

> 在 Solr 中是否可以禁用从客户端显式提交的所有提交，而仅依赖于 Solr 配置中配置的自动提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:06:33.447

聪明的问题！

我在很多应用程序中都看到了同样的情况，这是每个人都会犯的第一个错误。[`UpdateRequestProcessor`](http://wiki.apache.org/solr/UpdateRequestProcessor)在 Solr 中开箱即用是不可能的，但我认为你可以通过自己编写来实现。

到目前为止，这在配置中是不可能的，但您可能会[`processCommit`](http://lucene.apache.org/solr/4_2_0/solr-core/org/apache/solr/update/processor/UpdateRequestProcessor.html#processCommit%28org.apache.solr.update.CommitUpdateCommand%29)用一个空方法或只是一个日志行来覆盖该方法。除非自动提交使用相同的工作流程，否则应该可以正常工作，但情况并非如此，但我会检查一下。无论如何，您可以轻松地对此进行测试。

一旦您编写了自己的组件，您必须将其作为 jar 提供给 solr，并在更新请求处理器链 ( `solrconfig.xml`) 中对其进行配置：

```
<updateRequestProcessorChain>
    <processor class="solr.NoCommitUpdateRequestProcessorFactory" />
    <processor class="solr.LogUpdateProcessorFactory" />
    <processor class="solr.RunUpdateProcessorFactory" />
</updateRequestProcessorChain> 
```

不要忘记最后两行，它们是默认的请求处理器，否则所有更新请求都不会执行任何操作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-05T05:36:37.837

从 Solr 5.3（如果不是更早版本）开始，您可以将以下内容添加到 solrconfig.xml：

```
<updateRequestProcessorChain name="ignore-commit-from-client" default="true">
  <processor class="solr.IgnoreCommitOptimizeUpdateProcessorFactory">
    <int name="statusCode">200</int>
  </processor>
  <processor class="solr.LogUpdateProcessorFactory" />
  <processor class="solr.DistributedUpdateProcessorFactory" />
  <processor class="solr.RunUpdateProcessorFactory" />
</updateRequestProcessorChain> 
```

请参阅：[https ://lucene.apache.org/solr/guide/6_6/shards-and-indexing-data-in-solrcloud.html#ShardsandIndexingDatainSolrCloud-IgnoringCommitsfromClientApplicationsinSolrCloud](https://lucene.apache.org/solr/guide/6_6/shards-and-indexing-data-in-solrcloud.html#ShardsandIndexingDatainSolrCloud-IgnoringCommitsfromClientApplicationsinSolrCloud)

# python - Hg 代码中的哪个位置实现了命令完成？

> ID：15897608
> 
> 赞同：2
> 
> 时间：2013-04-09T08:59:41.173
> 
> 标签：python, mercurial

Mercurial 有一个非常好的特性，它允许人们只在命令行上键入需要明确的内容，例如：

```
hg pus 
```

用于推动，或：

```
hg comm 
```

承诺。

我很想在 Git 和 Maven 中看到这个功能，这让我很好奇它是如何完成的。我对代码进行了拖网搜索，但运气不佳，我发现与 bash_completion 有关，但与 Windows 无关。

**此命令完成在 Hg[代码中的什么位置实现？](http://selenic.com/hg)**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T10:59:59.427

为命令执行此操作的代码是[mercurial.cmdutil](http://selenic.com/hg/file/bd6aed2ad5ee/mercurial/cmdutil.py#l21)`findpossible`中的和`findcmd`函数。他们搜索已知命令并找到以您键入的内容开头的命令，因此找到该命令。`hg pus``push`

对于命令行选项（标志），普通的[getopt 模块](http://docs.python.org/2/library/getopt.html)可以让你缩短，比如说，`hg log --patch`自动`hg log --pat`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T10:55:05.530

我认为它在`mercurial/cmdutil.py`并且调用它的方法`findpossible`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:32:42.710

在 linux 上，这是由`bash_completion`

在我的系统上，hg 的配置在`/etc/bash_completion.d/mercurial`

# oracle - oracle如何删除没有表的用户

> ID：15897618
> 
> 赞同：1
> 
> 时间：2013-04-09T09:00:11.590
> 
> 标签：oracle, sql-drop, drop-table

如何在 oracle 中删除没有表的用户？

```
 create user andi identified by andi; 
 alter user andi quota 10m on users; 
 grant connect to andi; 
 grant create table to andi;

 conn andi;

 create table mahasiswa( idmhs number(3) primary key, nama varchar(20),
    nim number(7), jurusan varchar(20) );

 insert into mahasiswa values (101, 'Budi', 0881103, 'TI');

 drop user andi cascade; ---> table mahasiswa is also deleted. 
```

如何在 oracle 中删除没有表的用户？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:05:58.337

你不能做这个。

这张桌子属于andi，**当你放下andi 时，你也会放下它所有的东西**。

如前所述（@Steven Wolfe）为表创建一个用户，并为其他用户授予权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:09:15.327

您可以创建`mahasiswa`以另一个用户为所有者的表，然后授予该用户`andi`他们需要的任何权限（`SELECT, INSERT, UPDATE, DELETE`）。

我还将创建一个同义词，这样您就不必不断地从`andi`具有所有者架构的架构中引用表，例如：`OTHERUSER.mahasiswa`. 当`andi`用户执行以下操作：

```
CREATE SYNONYM mahasiswa FOR OTHERUSER.mahasiswa 
```

希望有帮助。

# android - onLocationChanged 在真实设备上不起作用

> ID：15897621
> 
> 赞同：1
> 
> 时间：2013-04-09T09:00:15.120
> 
> 标签：android, location, locationmanager

现在我正在使用基于位置的应用程序，我的问题是位置没有在真实设备上更新。那是`onLocationChanged`在真实设备上不起作用。但在模拟器上很好。

```
 locmngr=(LocationManager)getSystemService(Context.LOCATION_SERVICE);
            loclis =new MyLocationListner();
            our_location=locmngr.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            locmngr.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0,loclis);
public class MyLocationListner implements LocationListener{

        @Override
        public void onLocationChanged(Location location)
        {
            // TODO Auto-generated method stub
            L1=location.getLatitude();
            L2=location.getLongitude();
            String currentDateTimeString = DateFormat.getDateTimeInstance().format(new Date());
            //          Toast.makeText(getApplicationContext(), currentDateTimeString, Toast.LENGTH_SHORT).show();
            DatabaseHandlerActivity db = new DatabaseHandlerActivity(getApplicationContext());
            db.addLocation(new Locations_viewer(L1.toString(), L2.toString(), currentDateTimeString));

                        Toast.makeText(getApplicationContext(), "New Location   "+"Latitude ="+L1+
                                "   Longitude ="+L2, Toast.LENGTH_LONG).show();

            Calendar c = Calendar.getInstance();
            SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
            String formattedDate = df.format(c.getTime());

            ParseUser.getCurrentUser().put("Latitude", L1.toString());
            ParseUser.getCurrentUser().put("Longitude", L2.toString());

            ParseUser.getCurrentUser().put("Time", formattedDate);

            ParseUser.getCurrentUser().saveInBackground();

            //          Toast.makeText(getApplicationContext(), "Latitude ="+L1, Toast.LENGTH_LONG).show();
            //          Toast.makeText(getApplicationContext(), "Longitude ="+L2, Toast.LENGTH_LONG).show();

        }

        @Override
        public void onProviderDisabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onProviderEnabled(String provider) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            // TODO Auto-generated method stub

        }
    } 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-03T14:51:06.787

我只是使用`NETWORK_PROVIDER`而不是`GPS_PROVIDER`. 因为 GPS 并非在所有位置都可用。就我而言，它完美地解决了我的问题。我们只需要在我们的手机中有一个活跃的互联网连接。

# ruby-on-rails - 如何在 Postgres DB 上使 find_or_initialize 不区分大小写？

> ID：15897622
> 
> 赞同：0
> 
> 时间：2013-04-09T09:00:16.567
> 
> 标签：ruby-on-rails

在 Rails 3.2 应用程序中，我有一个属于类别的 Post 模型。在新的帖子表单中有一个用于分配类别或创建新类别的文本字段。

它通过以下方法在 Post 模型上工作

```
def category_name=(name)
  if name.present?
    post_cat = category.find_or_initialize_by_name(name) 
    if post_cat.new_record?
      post_cat.save(:validate => false)
      self.category = post_cat
    else
      self.category = post_cat
    end
  end
end 
```

这或多或少有效，但区分大小写。例如，数据库现在包含“精选”、“精选”和“精选”类别的记录。

如何使上述`find_or_initialize`函数表现得好像不区分大小写一样。我正在使用 Postgres 数据库，我怀疑这并不像“`find_or_initialize`不区分大小写”那么容易。

对于最佳实践、要考虑的内容和有用的参考资料，我很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:02:16.723

我参考了您上面的评论：也许您可以添加第二个字段，其中包含显示给用户的字符串的值，以及`find_or_initialize`名称列：

```
post_cat = category.find_or_initialize_by_name(name.downcase)
post_cat.display_name = name if post_cat.new_record? 
```

因此，第二行确保现有记录不会被另一个尝试添加类别的用户覆盖，例如`bRandnAmE`. 我看到的唯一缺陷是，创建类别的第一个用户必须拼写正确。

# iphone - Scrolling强制停止tableview时调用哪个方法？

> ID：15897624
> 
> 赞同：1
> 
> 时间：2013-04-09T09:00:17.977
> 
> 标签：iphone, uitableview

我有一些值的 tabelview 并快速滚动它。我通过点击 tableview 停止滚动，我想知道我触摸的单元格的索引路径。我怎样才能得到这个？我调用了 Scorll 视图委托方法

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset
{
// this method is called using scrollview delegates
} 
```

但它总是返回顶部可见行的索引路径和值。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:31:09.850

获取您的回复并将其保存在字典中。

NSDictionary *u = [结果 objectAtIndex:indexPath.row];

在滚动视图上创建一个按钮并设置一个标签值 =indexPath.row

在滚动时单击按钮，您会单击该单元格的索引（此处的按钮）。

# mysql - 使用 WHERE x = 1 时如何将值为“0”的记录计为“0”

> ID：15897625
> 
> 赞同：0
> 
> 时间：2013-04-09T09:00:20.307
> 
> 标签：mysql, count, where-clause

我有一个看起来像这样的表结构：

![http://imgur.com/DswITVz](https://i.stack.imgur.com/hMDD9.png)

我有一个完美运行的查询，可以计算过去 30 天每天有多少条记录。它看起来像这样：

```
SELECT DATE(timestamp) AS date, COUNT(id) AS emails FROM 'emails WHERE timestamp >= now() - interval 1 month GROUP BY DATE(timestamp) 
```

这会输出以下内容，非常好：

![http://imgur.com/QkwTgiD](https://i.stack.imgur.com/k21nk.png)

然而，接下来的事情对我来说似乎太难以想象了。现在我想计算过去 30 天每天有多少条记录，但仅限于时事通讯 = 1 的情况。

我试图放置一个如下所示的 WHERE 语句：

```
SELECT DATE(timestamp) AS date, COUNT(*) AS emails, nyhedsbrev FROM emails WHERE timestamp >= now() - interval 1 month AND nyhedsbrev = 1 GROUP BY DATE(timestamp) 
```

...这会输出以下内容：

![http://imgur.com/kIVKYjc](https://i.stack.imgur.com/kS1Rn.png)

问题是，它省略了 newsletter = 0 的记录，因此我无法将我的第一个查询与新查询进行比较，因为日期不匹配。我知道那是因为我使用 WHERE newsletter = 1。

而不是省略记录，我想要一个从该日期起只输入“0”的查询。我怎样才能做到这一点？最后的查询应该输出这个：

![http://imgur.com/XlcovbN](https://i.stack.imgur.com/fEo6o.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:09:02.163

可能最好获取日期列表，然后将其加入子查询以获得所需的计数。

像这样的东西

```
SELECT Sub1.date, Sub2.emails, IFNULL(Sub3.emails, 0)
FROM (SELECT DISTINCT DATE(timestamp) AS date
FROM emails 
WHERE timestamp >= now() - interval 1 month) Sub1
LEFT OUTER JOIN (SELECT DATE(timestamp) AS date, COUNT(id) AS emails 
FROM emails WHERE timestamp >= now() - interval 1 month 
GROUP BY DATE(timestamp)) Sub2
ON Sub2.date = Sub3.date
LEFT OUTER JOIN (SELECT DATE(timestamp) AS date, COUNT(*) AS emails 
FROM emails 
WHERE timestamp >= now() - interval 1 month AND nyhedsbrev = 1 
GROUP BY DATE(timestamp)) Sub3
ON Sub1.date = Sub3.date 
```

（您可能可以优化其中的一个子选择，但我已经完整地完成了它以使其清楚它是如何工作的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:09:11.377

您应该能够简单地使用`SUM()`并`IF()`获得所需的输出：

```
SELECT 
    DATE(timestamp) AS date, 
    COUNT(*) AS emails,
    SUM(IF(nyhedsbrev > 0, 1, 0)) as nyhedsbrev_count
FROM 
    emails 
WHERE 
    timestamp >= now() - interval 1 month
GROUP BY 
    DATE(timestamp) 
```

[**SQLFiddle 演示**](http://sqlfiddle.com/#!2/4706f/1/0)

**编辑**：您甚至可以简化它，因为它是一个布尔值，并且只需使用`SUM(nyhedsbrev)`，但这`nyhedsbrev`仅**需要** `0`or `1`：

```
SELECT 
    DATE(timestamp) AS date, 
    COUNT(*) AS emails,
    SUM(nyhedsbrev) as nyhedsbrev_count
FROM 
    emails 
WHERE 
    timestamp >= now() - interval 1 month
GROUP BY 
    DATE(timestamp) 
```

![在此处输入图像描述](https://i.stack.imgur.com/73hQm.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:10:49.557

假设时事通讯是布尔 1/0 值，那么这可能会为您提供所需的表格：

```
SELECT DATE(timestamp) AS date, COUNT(*) AS emails, nyhedsbrev 
FROM emails WHERE timestamp >= now() - interval 1 month GROUP BY DATE(timestamp),nyhedsbrev ; 
```

只需添加另一个 GROUP BY 参数。

# javascript - 带有按钮的表格上的敲除映射和 foreach 数据绑定，缺少对视图模型的引用？

> ID：15897629
> 
> 赞同：2
> 
> 时间：2013-04-09T09:00:27.677
> 
> 标签：javascript, asp.net-mvc-4, reference, knockout.js, knockout-mapping-plugin

我将 mvc4 和 entityframework 与淘汰赛结合使用。我也使用淘汰赛映射。但是我遇到了一个我无法解决的问题。

我想要达到的目标：

*   用户单击删除按钮从表中删除行。[**作品**]
*   在 mvc 控制器上调用 delete 操作方法来实际从数据库中删除数据。[**作品**]
*   发回包含新更改表的数据的新 Json 对象。[**作品**]
*   在我的淘汰视图模型中加载新数据并使用`ko.mapping.fromJS() and ko.applyBindings()` **[不起作用，我真的迷失在这里**]更新 UI

看起来我完全失去了对我用来数据绑定和 foreach 表的体验列表的引用。我认为这与我在 foreach 循环中调用删除方法的方式有关。

看起来带有 var 的 javascript“技巧”也`self = this;`无法让我引用正确的数据。

下面是我现在使用的代码，让大家更好地了解情况。如果需要更多信息，请告诉我。

这些是我的 mvc 视图模型：

```
public class ExperienceOverviewModel
{
        public ExperienceModel selectedExperience { get; set; }
        public List<ExperienceModel> Experiences { get; set; }
}

public class ExperienceModel
{
        public int ExperienceId { get; set; }
        public DateTime DateFrom { get; set; }
        public DateTime DateUntil { get; set; }
        public string Description { get; set; }
        public string Employer { get; set; }
        public decimal Hours { get; set; }
        public int PersonId { get; set; }
        public bool? Secondment { get; set; }
        public string Title { get; set; }
} 
```

这是我使用淘汰赛 foreach 数据绑定经验的表格：

```
</table>
    <thead>
        </thead> 
    <tbody data-bind="foreach: Experiences()">
            <tr>
                <td data-bind="text: Employer"></td>
                <td data-bind="text: Description"></td>
                <td data-bind="text: DateFrom"></td>
                <td data-bind="text: DateUntil"></td>
                <td data-bind="text: Secondment"></td>
                <td>
                    <a href="#" data-bind="click: function(data, event){ $root.EditExperienceModal(data); }"><i class="icon-edit"></i></a>
                </td>
                <td>
                    <a href="#" data-bind="click: function(data, event){ $root.ConfirmDeleteExperienceModal(data);}"><i class="icon-remove"></i></a>
                </td>
            </tr>
        </tbody>
    </table> 
```

我想调用 ko.mapping.fromJS() 和 ko.applyBindings() 的淘汰视图模型...这里是 fubar....

```
 function ViewModel() {
            this.DeleteExperience = function (experience) {

                $.ajax({
                    type: "post",
                    contentType: "application/json",
                    url: "/Experienced/Delete/" + this.selectedExperience.ExperienceId(),
                    data: ko.toJSON(self.selectedExperience),
                    error: function (xhr, status, error) {
                    },
                    success: function (response) {

                        ko.mapping.fromJS(response, ?? this.Experiences ??);  <---- ???
                        ko.applyBindings(?????);                              <---- ???

                    }
                });
            }
        }

        $(function () {
            var jsonModel = '@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(this.Model, new Newtonsoft.Json.Converters.IsoDateTimeConverter()))';
            var mvcModel = ko.mapping.fromJSON(jsonModel);

            var myViewModel = new ViewModel();
            g = ko.mapping.fromJS(myViewModel, mvcModel);
            ko.applyBindings(g);
        }); 
```

***** -- 更新 -- *******

 **在这里澄清更多是我所简单化的：当我从 AJAX 调用返回结果时，我收到以下错误：

> 对象 # 没有方法“经验”

```
<table class="table table-striped">
    <tbody data-bind="foreach: Experiences()">
        <tr>
            <td data-bind="text: Employer"></td>
            <td data-bind="text: Description"></td>
            <td data-bind="text: DateFrom"></td>
            <td data-bind="text: DateUntill"></td>
            <td data-bind="text: Secondment"></td>
            <td>
               <a href="#" data-bind="click: $root.DeleteExperience"><i class="icon-remove"></i></a>

            </td>
        </tr>
    </tbody>
</table>
<script type="text/javascript">

    function ViewModel() {
        var self = this;

        self.DeleteExperience = function (experience) {
            $.ajax({
                type: "post",
                contentType: "application/json",
                url: "/Experienced/Delete/" + experience.ExperienceId(),
                data: ko.toJSON(experience),
                error: function (xhr, status, error) {
                    console.log(error);
                },
                success: function (response) {
                    $('#confirmDeleteModal').modal('hide');
                    self.UpdateExperienceList(response);
                }
            });
        }

        self.UpdateExperienceList = function (data) {
            self.Experiences(data);       <---- ?????
        }
    }

    $(function () {
        var jsonModel = '@Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(this.Model, new Newtonsoft.Json.Converters.IsoDateTimeConverter()))';
        var mvcModel = ko.mapping.fromJSON(jsonModel);
        var myViewModel = new ViewModel();
        g = ko.mapping.fromJS(myViewModel, mvcModel);
        ko.applyBindings(g);
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:28:52.790

我觉得你不需要再打电话`ko.applyBindings(?????);`了。您应该明确定义您的视图模型：

```
function MyModel() {
    var self = this;

    self.Data = ko.observableArray([{"Name": "Lionel Messi", "Occupation": "Football player"}, {"Name": "Jason Mraz", "Occupation": "Singer"}, {"Name": "Nicolas Cage", "Occupation": "Film Actor"}]);

    self.update = function(data) {
        self.Data(data);
    }
}

$(function(){
    var model = new MyModel();
    ko.applyBindings(model);
}); 
```

如您所见，我定义`self.update`了，您只需调用此函数并更新您的数据，如果您想从表中删除一行，您只需`splice`将该行`self.Data()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:48:29.133

在您的`self.UpdateExperienceList`函数中，尝试以下操作：

```
self.UpdateExperienceList = function(data) {
    ko.mapping.fromJSON(data, {}, self);
}; 
```

这将`self`根据来自服务器的数据更新对象的属性。

您最初创建的视图模型在我看来也是错误的。尽管您想要更多类似于以下的内容，但我本来会：

```
var myViewModel = ko.mapping.fromJSON(jsonModel, {}, new ViewModel()); 
```**

# java - 如何从 RandomAccessFile 写入和删除对象？

> ID：15897630
> 
> 赞同：0
> 
> 时间：2013-04-09T09:00:28.153
> 
> 标签：java, file, object, methods, randomaccessfile

我目前正在做一个学校项目，我需要将我的数据保存到`RandomAccessFile`. 我认为这不是迄今为止最有效的方法，但我必须这样做。注意：我必须使用 RandomAccessFile 类。

我了解如何将 main 方法中的简单`strings`和`int`创建方法保存到文件中，但是我无法将这些知识转移到我自己的程序中。

我有 4 个不同的课程，即`Database`, `Group`, `Student`, `Rehearsal`。该类`Database`允许您将组添加到组的链接列表中。然后，您可以为每个小组添加学生（见下文）以及排练日期（这是一个剧院管理计划）。这些被分别添加到`linkedlist<Student>`和`linkedlist<Rehearsal>`。

这是我`addStudent`在`Group`课堂上将学生添加到已创建组的链表中的方法。

```
public void addStudent(int id, String firstname, String lastname) throws IOException {
    Student newstudent = new Student(id, firstname, lastname);
    if (!Students.contains(newstudent)) {
        Students.add(newstudent);
} else 
        JOptionPane.showMessageDialog(null, "Student with ID " + id
                + " already exists in group!", "Error",
                JOptionPane.WARNING_MESSAGE);
} 
```

如何让方法在执行时自动将学生对象写入文件？

这是我的`removeStudent`方法：

```
public void removeStudent(int id) {
    if (!Students.remove(new Student(id, null, null))) {
        JOptionPane.showMessageDialog(null, "Student with ID[" + id
                + "] not present. System unchanged.");

    } 
} 
```

几乎相同的问题，当方法执行时，如何从文件中删除特定对象。如果你也能帮我解决这个问题，那就太好了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:12:41.357

`toString()`以您要写入文件的方式覆盖对象类的方法！

然后循环使用`foreach`并`linkedlist`调用`toString()`学生对象并写入文件

例子：

```
fileOutputStream outStream=newFileOutputStream("../RandomAccessFile");//path where you want to create file
foreach(Student s in linkedlist)
{
  outStream.println(s.toString()+"/n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:50:17.263

您不能从 a 中删除任何内容，`RandomAccessFile`除非通过实现您的代码可以理解的一些文件协议，例如用空值填充记录，假设您的文件有记录，并假设全空值（或其他）不是合法的记录值。或者在每条记录上实现一个字节头，这样 1 表示存在，0 表示已删除，*反之亦然。*

# java - 在字节数组java的末尾添加空格或“0”

> ID：15897631
> 
> 赞同：0
> 
> 时间：2013-04-09T09:00:28.637
> 
> 标签：java, bytearray

我如何修改现有的字节数组，如果我的条件满足，我可以附加“空格”或“0”

```
for example :: 
last 2 byte Hex value if E0 in decimal is -32 
   byte1 [] = [48, 16, 6, 11, 43, 6, 1, 2, 1, 69, 1, 2, 1, 6, 9, 4, 1, -32]
last 1byte 101=e 48=0
    byte2[]=[48, 17, 6, 11, 43, 6, 1, 2, 1, 69, 1, 2, 1, 6, 9, 4, 2, 101, 48] 
```

我怎么知道字节数组中的最后一个索引是 2 字节，十六进制本身还是 1 字节，如果这是十六进制，那么我需要在字节数组上添加“0”或“空格”

```
In precise : the last character need to be checked 
byte b = byte1[18]
check this whether it's one byte or 2 byte if it come as "e0" then 2 byte if it's come as "0" then modify the byte array to contain extra "0" 
```

# javascript - 如何在不使用 php 的情况下解决跨域问题

> ID：15897632
> 
> 赞同：0
> 
> 时间：2013-04-09T09:00:30.300
> 
> 标签：javascript, jquery, ajax, json

下面的代码工作正常，但我使用 demo.php 来解决跨域问题，我如何在不使用 php 的情况下做到这一点，bcs 客户端不需要 php

```
 $('#basic-search').submit(function(el){

        var searchdata=$('#search-text').val(); 

            $.ajax({
                  type:"POST" ,
              url:'demo.php',
              data:{
               address: 'http://search-harbinger-n5nyhive6kr72z37m6qrz2xxie.us-east-1.cloudsearch.amazonaws.com/2011-02-01/search?q='+searchdata+'*&results-type=json&return-fields=message&size=10', 
              },
              success:function(response){ 
                if(response!=""){
                response = jQuery.parseJSON(response);
                $.each(response.hits,function(indx,obj){
                    if($.isArray(obj)) {
                        $('.search-results').empty();    
                        $('.search-results').prepend('<div class="basic-results">Results ('+ obj.length+')</div>');
                        if(obj.length!="0"){
                        for(var i=0;i<obj.length;i++){
                            var $temp = '<div class="serach-results-items"><div class=""><b>ID : '+obj[i].id +'</b></div><div class="search-cont"> <b>Message :</b> '+obj[i].data.message+'</div></div>';
                            $('.search-results').append($temp);
                            $('.submit-btn').css('display','none');
                        }
                        }

                        else{
                        $('.search-results').append('<div><div>Your search-<b>'+searchdata+'</b>-did not match any documents.</div><div>Make sure that all words are spelled correctly.</div></div>');
                        $('.submit-btn').css('display','none');
                        }
                    }
                });

                }
                else{alert('something went wrong.');}
             }
            });

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:02:56.200

你应该使用 jsonp 进行跨域调用，像这样

```
 $.ajax({
          type:"POST" ,
          url:'demo.php',
          data:{
           address: 'http://search-harbinger-n5nyhive6kr72z37m6qrz2xxie.us-east-1.cloudsearch.amazonaws.com/2011-02-01/search?q='+searchdata+'*&results-type=json&return-fields=message&size=10', 
          }
         dataType: 'jsonp',
         jsonp: 'callback', 
```

# jquery-mobile - 在 JQM 中以编程方式更改页面

> ID：15897636
> 
> 赞同：1
> 
> 时间：2013-04-09T09:00:38.470
> 
> 标签：jquery-mobile

我有一个带有一些页面的 jQuery Mobile 1.3.0 应用程序。我在 index.html 中有一个页面 (#menyside)，我已将事件绑定到：

```
$(document).on('pagebeforeshow', '#menyside', function(event){
        // check local storage, and some times do this:
    $.mobile.changePage("otherPage.html", { transition: "slideup"} );
}
}); 
```

我检查本地存储中的一些值，并基于这些值我可能想以编程方式更改页面。这在我第一次打开应用程序时有效，但在我重新打开应用程序时无效（即文档已加载到浏览器中，但它被重新加载）

我是否绑定了错误的事件？我试图查看文档中的事件，但并没有真正找到更好的东西......

# hmvc - HMCV 如何从其他模块加载模型

> ID：15897637
> 
> 赞同：-1
> 
> 时间：2013-04-09T09:00:40.210
> 
> 标签：hmvc

**嗨，大家好。**

在这里，我有一个非常简单的问题。

算我一个

```
modules/guestbook/admin.php 
```

我想从不同的模块加载模型

```
modules/admin/models/ 
```

这种方法：

```
$this->load->model('someModel', 'someModel'); is not working bcz HMVC is looking only in the same module the controller is in or in application/models/ 
```

有人可以向 Josh Yudell 建议如何使用 HMCV 做到这一点。我尝试使用

```
Modules::find,Modules::load Modules::load_file, bt there is no result with it. 
```

提前致谢。乔什·尤德尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T15:02:21.087

我建议您应该为您的负载提供模块目录的路径。您还没有在您工作的环境中提供您的问题。

在结构更严格的codeigniter HMVC中：

```
 Modules::run('admin/get_account_details_model'); or $this->load->module('admin/get_account_details_model'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T02:14:11.150

从留言簿模块内部调用管理模块怎么样。您不应该直接访问模型。

# php - Drupal Multiserver 设置图片上传问题

> ID：15897640
> 
> 赞同：0
> 
> 时间：2013-04-09T09:00:45.077
> 
> 标签：php, drupal-7, varnish, multiserver

我正在开发一个项目，该项目使用两个具有安全连接的服务器和一个数据库连接，并且两个单独的 Varnish 缓存服务器也被集成。我有一个 IP，它是一个负载平衡器 IP，以太重定向到第一台服务器或第二台服务器

从单个数据库中提取数据时，一切似乎都运行良好。但是，用户个人资料图像中存在问题。

当用户上传图像并且负载平衡器 IP 重定向到第一个服务器时，图像会转到第一个服务器文件目录。

但是，当用户从第二台服务器访问站点时看到完整的数据（因为所有内容都从公共数据库加载）但无法看到保存在第一台服务器中的图像。

我怎样才能解决这个问题？

我是 PHP 开发人员，我使用 phpseclib 制作了一个简单的 PHP 脚本，该脚本也将图像文件保存在外部服务器中。

我不知道如何将它集成到 Drupal 中。（我是一名 PHP 开发人员，但在 Drupal 中的模块制作方面工作很多）

或者还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:05:24.873

我们在项目中使用了类似的结构。在存储图像的两台服务器中的文件系统之间使用 RSYNC 或 NFS RSYNC - 同步两台服务器 NFS - 将一台服务器的文件系统加载到另一台服务器上

# java - 在 .jar 中捆绑 .dll

> ID：15897659
> 
> 赞同：0
> 
> 时间：2013-04-09T09:01:40.163
> 
> 标签：java, swing, deployment, jfilechooser, filechooser

我正在使用 XFileDialog ( [https://code.google.com/p/xfiledialog/](https://code.google.com/p/xfiledialog/) ) 而不是 JFileChooser，但我想将 dll 捆绑在 .jar 中，因此我不必将它们与应用程序一起提供。

所以我将它们添加到项目中，但我不确定如何引用它们。在 XFileDialog.class 我发现`System.loadLibrary("xfiledialog64");`

我想这必须更改为`System.load("xfiledialog64")`.

这个对吗？

另一个问题是我无法从 Eclipse 内部编辑 .class 文件。这是否意味着我必须在源代码中编辑 .class 然后重新编译它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:12:39.370

由于它显然是一个桌面应用程序。一种策略是使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)启动它。如果使用 web start 启动，则将按正常加载方式加载本机。

这是[用于加载小程序演示的 JNLP。](https://code.google.com/p/xfiledialog/downloads/detail?name=applet.jnlp&can=2&q=)

```
<?xml version="1.0" encoding="UTF-8"?>
<jnlp spec="1.0+" codebase="" href="">
    <information>
        <title>helloapplet</title>
        <vendor>stevpan</vendor>
</information>

    <resources os="Windows" arch="x86">
        <nativelib href="win_x86_dll.jar" />
    </resources>

    <resources os="Windows" arch="amd64">
        <nativelib href="win_x64_dll.jar" />
    </resources>

    <resources>
        <!-- Application Resources -->
        <j2se version="1.6+"
              href="http://java.sun.com/products/autodl/j2se" />
        <jar href="hello.jar" main="true" />
    </resources>

    <applet-desc 
         name="helloapplet"
         main-class="helloapplet"
         width="640"
         height="480">
     </applet-desc>
     <update check="background"/>
</jnlp> 
```

# angularjs - 对父指令的必需依赖

> ID：15897667
> 
> 赞同：0
> 
> 时间：2013-04-09T09:01:59.003
> 
> 标签：angularjs, angularjs-directive

我有一个`<layout>`包含许多`<pane>`元素的指令。

是否可以创建窗格指令，使其指令仅在`<layout>`元素中找到时才适用？

该文档指出：

> require - 要求将另一个控制器传递到当前指令链接函数中。require 需要传入指令控制器的名称。如果找不到这样的控制器，则会引发错误。

使用`require: '^layout'`，当在`<pane>`元素之外找到`<layout>`元素时，确实会引发错误，但 dom 元素仍会被转换。可以定义指令以将其行为限制在`<layout>`元素的范围内吗？

如果我需要另一个在`<grid>`元素内包含不同指令的窗格指令怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:55:05.317

这是一种方法（也许不是最好的方法）：在你的指令上定义一个控制器，然后在你的指令中`layout`选择`require`它。在您的链接函数中，检查 layoutCtrl 是否已定义：`^?``layout`

```
require: '^?layout',
link: function(scope, element, attrs, layoutCtrl) {
   if(!layoutCtrl) return;  // do nothing if no layout 
```

[小提琴](http://jsfiddle.net/mrajcok/2pwLn/)。

# php - modules::run 返回 NULL 结果

> ID：15897668
> 
> 赞同：0
> 
> 时间：2013-04-09T09:02:03.827
> 
> 标签：php, codeigniter, hmvc

我有一个控制器，列出了我创建的一些优惠。Foreach 报价，我想显示关联的未读消息数。

我想使用 modules::run 但是当我打电话时：

```
<?php echo Modules::run('messages/messages/get_number_new_messages/'.$oOffer->offer_id); ?> 
```

什么都没有显示。如果我直接在我的 url 中调用 get_number_new_messages，它会返回我想要的 int（即：“1”）

这是我的消息控制器功能：

```
public function get_number_new_messages($bForOffers = false){
        $iNumberMessages = $this->messages_model->count_new_messages($this->current_user->previous_last_login, $bForOffers);

        $aDatas = array();
        $aDatas['iNumberMessages'] = $iNumberMessages;

        return $this->load->view('messages/get_number_new_messages', $aDatas);
    } 
```

我也叫

```
<?php echo Modules::run('messages/messages/get_number_new_messages/a'); ?> 
```

和

```
<?php echo Modules::run('messages/messages/get_number_new_messages'); ?> 
```

在我的一个主题文件中

我错过了什么......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:12:18.780

是的，加载视图的第三个参数必须设置为 true 才能将视图作为字符串返回。

在您的 get_number_new_messages 方法中，您需要这样做：

```
return $this->load->view('messages/get_number_new_messages', $aDatas,true); 
```

...或者这个（调用视图将直接输出它；您不需要使用返回）：

```
$this->load->view('messages/get_number_new_messages', $aDatas); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:39:51.027

好的，我解决了...

它是 ：

```
<?php echo Modules::run('messages/messages/get_number_new_messages', $oOffer->offer_id); ?> 
```

代替

```
<?php echo Modules::run('messages/messages/get_number_new_messages/'.$oOffer->offer_id); ?> 
```

# java - java中的最终方法

> ID：15897670
> 
> 赞同：1
> 
> 时间：2013-04-09T09:02:07.140
> 
> 标签：java

面试的时候被问到`can final method override....?`

我说是。面试官有奇怪的手势。它有什么问题？我猜从语法上来说这是正确的答案。final 方法可以覆盖，但 final 方法不能被覆盖。
我的回答正确吗？

我发现有些人有兴趣重新打开这个问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-09T09:03:46.523

如果他的英语不好，那么你应该试着澄清他的意思。通信是构建软件的一个非常重要的方面。

除此之外：

*   final 方法可以覆盖其他方法
*   final 方法不能被覆盖。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T09:04:47.377

[**最终（Java）**](http://en.wikipedia.org/wiki/Final_%28Java%29)

> 在 Java 编程语言中，final 关键字在几个不同的上下文中用于定义以后无法更改的实体。
> 
> final 方法不能被子类覆盖。这用于防止子类更改可能对类的功能或一致性至关重要的方法的意外行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T09:05:47.677

我想有一点误解。如果他们真的按照您的措辞提出了这个问题，则不清楚他们问的是您以下哪一项：

*   ***不能***覆盖现有`final`方法
**   ***可以***覆盖现有的非`final`方法以防止进一步覆盖。*`final`**

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T09:06:05.217

我更容易这样想：无论你声明为 final 都意味着它在功能上是 100% 完整的，并且任何人都不应该被允许对其进行子类化、扩展等。

当然，您可以将覆盖函数标记为 final。但是您不能覆盖最终功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T09:06:06.500

一个final类不能被子类化，一个final方法不能被子类覆盖，一个final变量只能被初始化一次

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T09:09:29.260

静态方法和最终方法不能在 java 中被覆盖。**

# jquery - 编辑模式下的 ASP.NET GridView

> ID：15897677
> 
> 赞同：0
> 
> 时间：2013-04-09T09:02:27.340
> 
> 标签：jquery, asp.net, gridview, datatable

我有一个 Gridview，它放置了两个用于选择和删除特定行的图像图标。网格绑定到 jquery 数据表，但是当我选择图像来选择行时，默认行为是强制回发，这会导致网格松动数据表设置。

知道如何在单击任一按钮时保留数据表吗？

```
<asp:GridView ID="grdMessageDups" runat="server" DataSourceID="sourceDuplicates"
     AutoGenerateColumns="false"> 
    <Columns>
        <asp:CommandField ShowSelectButton="true" ButtonType="Image"
             SelectImageUrl="~/images/icn_alert_success.png"/>
        <asp:ButtonField ButtonType="Image" 
             ImageUrl="~/images/icn_alert_error.png" />
        <asp:BoundField DataField="MsgDateDetailDuplicatesID" Visible="false" />
        <asp:BoundField  DataField="1" HeaderText="Heading 1" />
        <asp:BoundField  DataField="2" HeaderText="Heading 2" />
        <asp:BoundField  DataField="3" HeaderText="Heading 3" />
     </Columns>
 </asp:GridView> 
```

然后 DataTable JQuery 的东西是：

```
 var oTable = $('#grdMessageDetail').dataTable({
                "aLengthMenu": [[10, 25, 50, 100, -1], [10, 25, 50, 100, "ALL"]],
                'asStripClasses': null,
                "iDisplayLength": 10,
                "bJQueryUI": true,
                "bFilter": true,
                "bAutoWidth": false,
                "bProcessing": true,
                "bServerSide": false,
                "sDom": 'RC<"H"lfr>t<"F"ip>',

                //Scrolling .......
                "sScrollY": "250px",
                "sScrollX": "100%",
                "sScrollXInner": "100%",
                "bScrollCollapse": true,
                }); 
```

后面代码中的代码是：

```
public static void MakeAccessible(GridView grid)
{
    if (grid.Rows.Count <= 0) return;
    grid.UseAccessibleHeader = true;
    grid.HeaderRow.TableSection = TableRowSection.TableHeader;
    if (grid.ShowFooter)
        grid.FooterRow.TableSection = TableRowSection.TableFooter;
}
protected override void OnPreRender(EventArgs e)
{
    base.OnPreRender(e);
    MakeAccessible(grdMessageDups);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:07:16.760

每次在网格上发生事件时，您都需要绑定它..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:09:00.207

选择行所做的是客户端事件（java-script 或 jQuery）在这两种情况下都使用

```
return false; 
```

如果在（java-script 或 jQuery）中调用任何函数

## 编辑

你可以更换

```
<asp:ButtonField ButtonType="Image" 
         ImageUrl="~/images/icn_alert_error.png" /> 
```

使用模板归档并在其中放置图像而不是图像按钮，如下所示

```
 <asp:TemplateField>
      <ItemTemplate>
          <img src="~/images/icn_alert_error.png" />    
       </ItemTemplate>
  </asp:TemplateField> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T12:13:37.660

在所有最终解决方案的帮助下：

```
 <asp:TemplateField>
                     <ItemTemplate>
                       <a href="#" id="selectImage">
                        <img src="images/icn_alert_success.png" /></a>
                      </ItemTemplate>
                  </asp:TemplateField> 
```

然后这个 JQuery 代码：

```
 $('[id$=selectImage]').click(function (evt) {
                  evt.preventDefault();
                 alert("item selected");
                  }); 
```

所以，现在，我需要执行获取所选行的 KeyValue，我们是黄金。

# php - PHP中的回显输入

> ID：15897687
> 
> 赞同：-3
> 
> 时间：2013-04-09T09:02:42.487
> 
> 标签：php, html, input, echo, isset

有人可以帮我弄这个吗。我试图用isset作为php中的值来回显输入，但我在使用逗号时遇到了困难。

```
echo '<td><input class="text" type="text" id="txtLogin" name="txtLogin" value="<?= isset($_POST['"txtLogin"']) ? htmlspecialchars($_POST['"txtLogin"']) : '' ></td>'; 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:13:01.600

更清洁的解决方案将是：

```
$txtLogin = isset($_POST['"txtLogin"']) ? htmlspecialchars($_POST['"txtLogin"']) : "";
echo '<td><input class="text" type="text" id="txtLogin" name="txtLogin" value="'. $txtLogin .'"></td>'; 
```

这很好，而不是在引号内添加条件语句

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:06:03.413

你可以试试这个。

```
<?php
echo '<td><input class="text" type="text" id="txtLogin" name="txtLogin" value="' . isset($_POST['txtLogin']) ? htmlspecialchars($_POST['txtLogin']) : '' . '></td>';
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:05:05.350

尝试这个

```
echo '<td><input class="text" type="text" id="txtLogin" name="txtLogin" value="'.isset($_POST['"txtLogin"']) ? htmlspecialchars($_POST['"txtLogin"']) : "".'"></td>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T09:05:30.540

您可以将字符串连接到这样的表达式：

```
echo '<td><input class="text" type="text" id="txtLogin" name="txtLogin" value="' . (isset($_POST['"txtLogin"']) ? htmlspecialchars($_POST['"txtLogin"']) : '') . '"></td>'; 
```

# android - 谷歌地图 Android API v2 教程

> ID：15897690
> 
> 赞同：2
> 
> 时间：2013-04-09T09:02:47.437
> 
> 标签：android, google-maps

我正在编写 Google Maps Android API v2 的教程：[https ://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

我只是想在我的应用程序中显示一个简单的地图，但它不起作用（应用程序没有打开，并且有一个消息框显示““Test2”应用程序已停止。”）我不知道为什么。我完全按照教程中所说的进行了操作。

这是我的代码：

AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.test2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.example.test2.permission.MAPS_RECEIVE"
        android:protectionLevel="signature"/>

    <uses-permission android:name="com.example.test2.permission.MAPS_RECEIVE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name="com.example.test2.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="The key"/>
    </application>

</manifest> 
```

活动主.xml：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:name="com.google.android.gms.maps.MapFragment"/> 
```

MainActivity.java ：

```
package com.example.test2;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }
} 
```

先感谢您。

**编辑 ：**

这是日志猫：

```
04-09 11:58:31.689: E/AndroidRuntime(4028): FATAL EXCEPTION: main
04-09 11:58:31.689: E/AndroidRuntime(4028): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test2/com.example.test2.MainActivity}: android.view.InflateException: Binary XML file line #1: Error inflating class fragment
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.os.Looper.loop(Looper.java:137)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.app.ActivityThread.main(ActivityThread.java:4745)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at java.lang.reflect.Method.invoke(Method.java:511)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at dalvik.system.NativeStart.main(Native Method)
04-09 11:58:31.689: E/AndroidRuntime(4028): Caused by: android.view.InflateException: Binary XML file line #1: Error inflating class fragment
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:256)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.app.Activity.setContentView(Activity.java:1867)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at com.example.test2.MainActivity.onCreate(MainActivity.java:12)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.app.Activity.performCreate(Activity.java:5008)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
04-09 11:58:31.689: E/AndroidRuntime(4028):     ... 11 more
04-09 11:58:31.689: E/AndroidRuntime(4028): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.SupportMapFragment: make sure class name exists, is public, and has an empty constructor that is public
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.app.Fragment.instantiate(Fragment.java:584)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.app.Fragment.instantiate(Fragment.java:552)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.app.Activity.onCreateView(Activity.java:4656)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
04-09 11:58:31.689: E/AndroidRuntime(4028):     ... 20 more
04-09 11:58:31.689: E/AndroidRuntime(4028): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.SupportMapFragment
04-09 11:58:31.689: E/AndroidRuntime(4028):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-09 11:58:31.689: E/AndroidRuntime(4028):     at android.app.Fragment.instantiate(Fragment.java:574)
04-09 11:58:31.689: E/AndroidRuntime(4028):     ... 23 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T09:10:58.957

我目前在这里看到的唯一问题是这一行：

```
 <uses-library android:name="com.google.android.maps" /> 
```

此行属于 Google Map API v1，不应使用 Google Map API V2 编写。

如果没有 logcat 输出，我们将无法为您提供更多帮助。

**更新：**

如果现在您粘贴了正确的清单文件，那么您当前的问题是：

**1.**您正在开发您的应用程序，`min SDK 8`因此您必须使用 .`SupportMapFragment`而不是布局文件中的`MapFragment`对象。像这样：`XML``Activity`

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/map"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:name="com.google.android.gms.maps.SupportMapFragment"/> 
```

你可以看看我写的这篇关于如何添加`Google Map API V2`到你的应用程序的博客文章：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T12:21:10.380

您忘记在 AndroidMenifest.xml中提到更新的**google-play-service lib 版本**

```
 <application
        android:name="packagename"
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <meta-data
            android:name="com.google.android.gms.version"
            android:value="@integer/google_play_services_version" />

  </application> 
```

# batch-file - 递归删除目录

> ID：15897694
> 
> 赞同：2
> 
> 时间：2013-04-09T09:03:01.187
> 
> 标签：batch-file, directory, subdirectory, shared-directory, delete-directory

我目前正在做一个批处理文件，它从服务器上的特定文件夹中删除所有内容。到目前为止它正在工作，但不幸的是，文件夹名称中带有空格的目录将无法识别。我不知道在脚本中的何处放置引号以克服此限制。

这是到目前为止的脚本，它位于 "D:\" 的根目录中：

```
cd Sharedfolder
for /f %%i in ('dir D:\Sharedfolder /B /D') do rd %%i /Q /S
del /F /S /Q *.* 
```

它工作得很好，但只要我在“共享文件夹”中有一个目录，它就不适用于该目录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T14:00:31.057

命令使用不匹配。要么使用**/f**要么使用

```
FOR /D %%i IN (D:\Sharedfolder\*) DO rd /s /q "%%i"
del /F /S /Q *.* 
```

这更接近你的想法。另一种解决方案是：

```
rmdir /s /q D:\Sharedfolder
mkdir D:\Sharedfolder 
```

这可能在系统的其他地方有一些问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:12:47.907

这是您正在寻找的完整答案，试试这个：

```
for /f "delims=" %%x in ('dir /b /ad abc*') do rd /s /q "%%x" 
```

我试过了，它有效。

# android - 安卓流媒体屏幕

> ID：15897700
> 
> 赞同：-1
> 
> 时间：2013-04-09T09:03:07.690
> 
> 标签：android, ffmpeg, ffserver

我可以通过 ffmpeg 共享屏幕
`./ffmpeg -f fbdev -r 24 -i /dev/graphics/fb0 http://localhost:8090/feed1.ffm`

但是输出直播流很慢。以下是我正在使用的 conf 文件。

```
`Port 8090
RTSPPort 7654
BindAddress 0.0.0.0
RTSPBindAddress 0.0.0.0
MaxHTTPConnections 2000
MaxClients 1000
MaxBandwidth 1000
CustomLog -
NoDaemon
<Feed live1.ffm>
File /data/live1.ffm
FileMaxSize 40M
NoAudio
ACL allow 127.0.0.1
</Feed>
<Stream live.mp4>
Feed live1.ffm
Format mpeg2video
NoAudio
VideoBitRate 1024
VideoFrameRate 1
VideoBufferSize 10000
VideoSize 480x800
VideoQMin 1
VideoQMax 15
</Stream>` 
```

请让我知道我应该如何更改我的 conf 文件以获得快速的视频输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:14:38.680

使用纯 CPU 能力进行视频编码是无法获得令人满意的性能的。因此，尝试使用硬件编码器找出其他一些解决方案。

# ios - 架构 armv7 的未定义符号：“_OBJC_CLASS_$_SSZipArchive”

> ID：15897702
> 
> 赞同：0
> 
> 时间：2013-04-09T09:03:09.223
> 
> 标签：ios, xcode, cordova, ssziparchive

我正在尝试在此使用 Extractzipfile 插件：[https ://github.com/phonegap/phonegap-plugins/tree/master/iOS/ExtractZipFile](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ExtractZipFile)

但是当我在 sdk 6.1 中使用 Xcode 4.6.1 编译时，它会引发错误：

```
 Undefined symbols for architecture i386:
    "_OBJC_CLASS_$_SSZipArchive", referenced from:
        objc-class-ref in ExtractZipFilePlugin.o
  ld: symbol(s) not found for architecture i386
  clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我尝试在这里解决问题：[架构 armv7 SSZipArchive 的未定义符号](https://stackoverflow.com/questions/15639875/undefined-symbols-for-architecture-armv7-ssziparchive)

但它显示了另一个错误：

> /Users/alienware/Desktop/ExtractZipFile/SSZipArchive/Tests/SSZipArchiveTests.m:10:9：找不到“SenTestingKit/SenTestingKit.h”文件

我使用 phonegap 并在 iOS 中制作应用程序，我很垃圾。

**更新**：我尝试将 SSZipArchive.m 添加到编译器源中，这出现了新错误：

```
Undefined symbols for architecture i386:
"_unzClose", referenced from:
    +[SSZipArchive unzipFileAtPath:toDestination:overwrite:password:error:delegate:] in SSZipArchive.o
"_unzCloseCurrentFile", referenced from:
    +[SSZipArchive unzipFileAtPath:toDestination:overwrite:password:error:delegate:] in SSZipArchive.o
"_unzGetCurrentFileInfo", referenced from:
    +[SSZipArchive unzipFileAtPath:toDestination:overwrite:password:error:delegate:] in SSZipArchive.o
"_unzGetGlobalInfo", referenced from:
    +[SSZipArchive unzipFileAtPath:toDestination:overwrite:password:error:delegate:] in SSZipArchive.o
"_unzGoToFirstFile", referenced from:
  +[SSZipArchive unzipFileAtPath:toDestination:overwrite:password:error:delegate:] in SSZipArchive.o
"_unzGoToNextFile", referenced from:
  +[SSZipArchive unzipFileAtPath:toDestination:overwrite:password:error:delegate:] in SSZipArchive.o
  "_unzOpen", referenced from:
    +[SSZipArchive unzipFileAtPath:toDestination:overwrite:password:error:delegate:] in SSZipArchive.o
"_unzOpenCurrentFile", referenced from:
  +[SSZipArchive unzipFileAtPath:toDestination:overwrite:password:error:delegate:] in SSZipArchive.o
"_unzOpenCurrentFilePassword", referenced from:
    +[SSZipArchive unzipFileAtPath:toDestination:overwrite:password:error:delegate:] in SSZipArchive.o
"_unzReadCurrentFile", referenced from:
    +[SSZipArchive unzipFileAtPath:toDestination:overwrite:password:error:delegate:] in SSZipArchive.o
"_zipClose", referenced from:
    -[SSZipArchive close] in SSZipArchive.o
"_zipCloseFileInZip", referenced from:
    -[SSZipArchive writeFile:] in SSZipArchive.o
    -[SSZipArchive writeData:filename:] in SSZipArchive.o
"_zipOpen", referenced from:
    -[SSZipArchive open] in SSZipArchive.o
"_zipOpenNewFileInZip", referenced from:
    -[SSZipArchive writeFile:] in SSZipArchive.o
    -[SSZipArchive writeData:filename:] in SSZipArchive.o
"_zipWriteInFileInZip", referenced from:
    -[SSZipArchive writeFile:] in SSZipArchive.o
    -[SSZipArchive writeData:filename:] in SSZipArchive.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:12:36.547

转到项目设置>转到构建阶段选项卡，然后编译源并确保将类拖到列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-21T02:04:22.147

我有同样的问题，这就是你必须做的。在您的项目中，创建您自己的名为 SSZipArchive 的组（文件夹）并将 2 个主要类文件拖放到其中。然后在 SSZipArchive 中，创建一个名为 minizip 的子文件夹，现在将 minizip 中的文件拖放到此文件夹中。基本上，源代码中的文件夹需要手动创建...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:16:28.153

嗨，据我所知，由于以下任何原因，都会发生此错误

1.如果您忘记在 VC 类中导入任何库。2.忘记在项目中添加所需的库。3.忘记正确设置标题搜索（意味着您添加了正确的Extractzipfile插件，因此显然您必须在项目中获取此库的路径并且必须在标题搜索路径中设置）

所以请检查这些东西。一切顺利。

# php - 带有html问题的ajax

> ID：15897706
> 
> 赞同：0
> 
> 时间：2013-04-09T09:03:15.607
> 
> 标签：php, html, ajax

我想获取一个网站的 html 来检查它的链接，我使用以下 ajax 代码来获取远程网站的 html：

```
$.ajax({
  type : 'get',
  url : 'proxy.php',
  dataType : 'html',
  success : function(data){
    alert('success');
  },
  error : function(XMLHttpRequest, textStatus, errorThrown) {
  alert('error');
  }
}); 
```

proxy.php 是我用来获取数据的代理，因为它不在我的服务器上：

```
<?php
// Set your return content type
header('Content-type: application/html');

// Website url to open
$daurl = 'http://example.com';
// Get that website's content
$handle = fopen($daurl, "r");

// If there is something, read and return
if ($handle) {
    while (!feof($handle)) {
        $buffer = fgets($handle, 4096);
        echo $buffer;
    }
    fclose($handle);
}
?> 
```

代码总是提醒错误，我不明白一切都很好，因为我不是 ajax 专家，所以我想要任何人都可以为我检查吗？它是错误的ajax数据类型吗？请问代理文件中的标头是否错误？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:30:20.767

您正在提供`proxy.php`使用错误检索到的 html 文件`Content-type`。

正确的内容类型应该是`text/html`而不是`application/html`.

如果您浏览到您的`proxy.php`文件，您会看到您没有获得任何内容，并且您的浏览器会尝试下载该页面。

更改为正确的内容类型后，如果您浏览到，`proxy.php`您将在浏览器中看到内容。

因此，这是您必须更改的行：

```
<?php
// Set your return content type
header('Content-type: text/html'); 
```

# ruby-on-rails - “rails 服务器”的问题

> ID：15897707
> 
> 赞同：1
> 
> 时间：2013-04-09T09:03:17.243
> 
> 标签：ruby-on-rails

我是 Ruby on Rails 的新手，很抱歉这个问题，这可能很容易，但是..

所以，这是我的问题：我有带有 RoR 的 Ubuntu 12.04。我正在参与一些项目，所以我检查了 svn，安装了 bundle，现在我遇到了 rails 服务器的问题。这是来自终端的日志

```
    public 不再用于避免重载 Module#public，而是使用 :public_folder
    来自 /usr/lib/ruby/gems/1.8/gems/web_translate_it-1.7.1.3/lib/web_translate_it/server.rb:12
    弃用警告： require "activerecord" 已被弃用，将在 Rails 3 中删除。请改用 require "active_record"。（从 /usr/lib/ruby/vendor_ruby/activerecord.rb:2 调用）
    => 启动 WEBrick
    => Rails 3.2.12 应用程序开始在 http://0.0.0.0:3000 开发
    => 使用 -d 调用以分离
    => Ctrl-C 关闭服务器
    退出
    /usr/lib/ruby/gems/1.8/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `connect': 拒绝用户 'fubademoall'@'localhost' 访问（使用密码：YES ) (Mysql2::错误)
        来自 /usr/lib/ruby/gems/1.8/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `initialize'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `new'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `mysql2_connection'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:315:in `send'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:315:in `new_connection'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:325:in `checkout_new_connection'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:247:in `checkout'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `loop'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:242:in `checkout'
        来自 /usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:239:in `checkout'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:102:in 'connection'
        来自 /usr/lib/ruby/1.8/monitor.rb:242:in `synchronize'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:101:in `connection'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_pool.rb:410:in `retrieve_connection'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:171:in `retrieve_connection'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/connection_adapters/abstract/connection_specification.rb:145:in 'connection'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/model_schema.rb:308:in `clear_cache!'
        来自 /usr/lib/ruby/gems/1.8/gems/activerecord-3.2.12/lib/active_record/railtie.rb:97:in `_callback_before_3'
        来自 /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:418:in `_run__1552657550__prepare__4__callbacks'
        来自 /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `send'
        来自 /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:405:in `__run_callback'
        来自 /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
        来自 /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `send'
        来自 /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.12/lib/active_support/callbacks.rb:81:in `run_callbacks'
        来自 /usr/lib/ruby/gems/1.8/gems/actionpack-3.2.12/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
        来自 /usr/lib/ruby/gems/1.8/gems/actionpack-3.2.12/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
        来自 /usr/lib/ruby/gems/1.8/gems/railties-3.2.12/lib/rails/application/finisher.rb:47
        来自 /usr/lib/ruby/gems/1.8/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `instance_exec'
        来自 /usr/lib/ruby/gems/1.8/gems/railties-3.2.12/lib/rails/initializable.rb:30:in `run'
        来自 /usr/lib/ruby/gems/1.8/gems/railties-3.2.12/lib/rails/initializable.rb:55:in `run_initializers'
        来自 /usr/lib/ruby/gems/1.8/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `each'
        来自 /usr/lib/ruby/gems/1.8/gems/railties-3.2.12/lib/rails/initializable.rb:54:in `run_initializers'
        来自 /usr/lib/ruby/gems/1.8/gems/railties-3.2.12/lib/rails/application.rb:136:in `initialize!'
        来自 /usr/lib/ruby/gems/1.8/gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:in `send'
        来自 /usr/lib/ruby/gems/1.8/gems/railties-3.2.12/lib/rails/railtie/configurable.rb:30:in `method_missing'
        来自 /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `require'
        来自 /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `require'
        来自 /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:236:in `load_dependency'
        来自 /usr/lib/ruby/gems/1.8/gems/activesupport-3.2.12/lib/active_support/dependencies.rb:251:in `require'

```

谢谢指教！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:05:27.210

连接 MySQL 数据库时出错：

> /usr/lib/ruby/gems/1.8/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `connect': 拒绝用户 'fubademoall'@'localhost' 访问（使用密码：YES ) (Mysql2::错误)

检查*config/database.yml*中的配置是否与您正在使用的 MySQL 服务器上的数据库凭据匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:37:36.513

```
If you are new Please see following eg: for creating database, grant ,and database.yml file  

=> Go to Mysql :
D:\sandeep\Ruby Projects\simple_cms>mysql -u root -p
Enter password: ********

=>Create Database :
 create database simple_cms_development 

=>Gtanting the Access to database : 
 mysql> grant all privileges on simple_cms_development.*
     ->to 'simple_cms' @'localhost'
     -> identified by 'secretpassword';
Query OK, 0 rows affected (0.00 sec)

=>See Database and Grant :
 mysql> show grants for 'simple_cms' @'localhost';

=>And Your database.yml file like this :
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: simple_cms_development
  pool: 5
  username: simple_cms
  password: secretpassword
  socket: /tmp/mysql.sock

test:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: simple_cms_test
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock

production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: simple_cms_production
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:08:00.723

我认为错误消息的相关行是：

```
`connect': Access denied for user 'fubademoall'@'localhost' (using password: YES) (Mysql2::Error) 
```

你设置mysql了吗？权限是否正确？

# batch-file - 用一些扩展名替换所有文件的内容

> ID：15897709
> 
> 赞同：1
> 
> 时间：2013-04-09T09:03:27.990
> 
> 标签：batch-file, special-characters, replace

我必须用一些特定的扩展名替换所有文件中的一些内容。

例如：在 toChange 文件夹中我可能有多个子文件夹，现在我想在所有带有扩展名的文件中`isabcd`更改`isxyz`文本`html`

此类命令的批处理是什么，我正在使用 Windows

实际上，我需要更换多个项目。我有它们的键值形式，需要在文件夹中的所有文件中一一替换

我的文字将有双引号，我想替换我的文字如下

```
if (loUserAgent.toLowerCase().indexOf("firefox") > -1
|| (loUserAgent.toLowerCase().indexOf("msie") > -1 && loUserAgent.toLowerCase().indexOf("msie 7") != -1)) 
```

我希望它被转换为

```
if (loUserAgent.toLowerCase().indexOf(aaa.FIRE_FOX) > -1
|| (loUserAgent.toLowerCase().indexOf(aaa.MSIE) > -1 && loUserAgent.toLowerCase().indexOf(aaa.IE_7) != -1)) 
```

conf.txt 文件将包含如下输入

```
 AAA.PY_ERROR_OCCURRED_WHILE_GETTING_PAYMENT_LIST_SCREEN_FOR_ORG_TYPE:::"Error occurred while getting payment list screen for org type: "
AAA.PY_AO_PAYMENT_LIST_SIZE:::"aoPaymentListSize"
AAA.PY_AO_PAYMENT_STATUS:::"aoPaymentStatus" 
```

其中右侧`:::`的文本是需要替换的文本（带双引号），并且该文本也可能包含特殊字符，左侧的字符串是我希望用它替换的文本

PS：很抱歉询问直接解决方案。但是我不知道批处理文件:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T16:17:49.607

```
@echo off
setlocal DisableDelayedExpansion

rem Load the replacement table from conf.txt file
set n=0
for /F "usebackq delims=" %%a in ("%~P0conf.txt") do (
   set "line=%%a"
   set /A n+=1
   setlocal EnableDelayedExpansion
   rem Use the first special character here, after second equal-sign and 15 characters forward
   rem and the second special character after the third equal-sign
   for /F "tokens=1,2 delims=Ç" %%b in ("!n!Ç!line::::=ü!") do (
      endlocal
      set "replace[%%b]=%%c"
   )
)

rem Process all HTML files in toChange folder
setlocal DisableDelayedExpansion
cd "C:\toChange"
for /R %%a in (*.html) do (
   rem Process all lines of this file
   (for /F "usebackq delims=" %%b in ("%%a") do (
      set "line=%%b"
      setlocal EnableDelayedExpansion
      rem Make the replacements
      for /L %%i in (1,1,%n%) do (
         rem Use the second special character here, after second equal-sign
         for /F "tokens=1,2 delims=ü" %%c in ("!replace[%%i]!") do (
            set "line=!line:%%d=%%c!"
         )
      )
      echo !line!
      endlocal
   )) > "%%a.txt"
   rem Remove the REM in next lines to delete original .html file and rename the created one
   REM del "%%a"
   REM ren "%%a.txt" "%%~NXa"
) 
```

上面的批处理程序在与原始文件同名并添加“.txt”扩展名的文件中生成其输出。如果结果正确，请删除批处理文件末尾的 REM 命令以删除原始 .hmtl 文件并重命名创建的文件。我用这些数据测试了程序：

**配置文件.txt**

```
AAA.PY_ERROR_OCCURRED_WHILE_GETTING_PAYMENT_LIST_SCREEN_FOR_ORG_TYPE:::"Error occurred while getting payment list screen for org type: "
AAA.PY_AO_PAYMENT_LIST_SIZE:::"aoPaymentListSize"
AAA.PY_AO_PAYMENT_STATUS:::"aoPaymentStatus"
aaa.FIRE_FOX:::"firefox"
aaa.MSIE:::"msie"
aaa.IE_7:::"msie 7" 
```

**例子.html**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- Example HTML file -->

Normal text. <b>Bold text.</b> <i>Italic text.</i>

if (loUserAgent.toLowerCase().indexOf("firefox") > -1
|| (loUserAgent.toLowerCase().indexOf("msie") > -1 && loUserAgent.toLowerCase().indexOf("msie 7") != -1)) 
```

输出：**example.html.txt**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- Example HTML file -->
Normal text. <b>Bold text.</b> <i>Italic text.</i>
if (loUserAgent.toLowerCase().indexOf(aaa.FIRE_FOX) > -1
|| (loUserAgent.toLowerCase().indexOf(aaa.MSIE) > -1 && loUserAgent.toLowerCase().indexOf(aaa.IE_7) != -1)) 
```

conf.txt 文件必须与批处理文件位于同一文件夹中。

该程序从输入文件中删除空行。如果您愿意，这可能很容易解决。

该程序可能有点慢。这可能会在某种程度上得到改进，但需要进行大量修改。

**编辑**：我修改了该程序的先前版本，以便：

*   正确处理 conf.txt 文件中的感叹号。
*   使用特殊字符来分隔 conf.txt 文件的替换值，而不是等号。

请注意，您可以在自己的文本中使用字符组合作为分隔符，例如`:::`，但在某些批处理管理中，分隔符必须只有*一个*字符。这个细节迫使我们选择一个不能出现在 conf.txt 文件中的字符。我的程序需要使用*两个*不同的特殊字符作为分隔符。我选择了 Ascii 字符 128 (Ç) 和 129 (ü)；如果这些字符可能出现在 conf.txt 文件中，那么您必须选择另一个字符并在程序中的指定点更改它们。抱歉，没有其他方法可以在批处理文件中执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T18:38:05.093

我编写了一个名为 REPL.BAT 的混合 JScript/批处理实用程序，可以帮助解决这个问题。我相信它会比任何纯批处理解决方案都要快得多。另一个不错的功能是这个解决方案可以很容易地适应进行正则表达式搜索和替换，而不是字符串文字搜索和替换。

假设我的 REPL.BAT 和您的 conf.txt 与您的 html 文件位于同一文件夹中，那么以下脚本应该可以工作：

```
@echo off
setlocal disableDelayedExpansion

:: Define LF to contain a newline (0x0A) character
set LF=^

:: The 2 blank lines above are critical - DO NOT REMOVE

:: Read the search and replace strings and store them in an "array"
:: Also, create a variable containing a cascading set of piped commands to
:: carry out each search and replace
:: Normally the search is in the s array, and the replacement in the r array.
:: But if the replacement is an empty string, then the search is in the r array
:: and the s array value is undefined.
set "cnt=0"
set "update="
for /f delims^=^ eol^= %%A in (conf.txt) do (
  set "ln=%%A"
  set /a cnt+=1
  setlocal enableDelayedExpansion
  for %%n in ("!LF!") do set "ln=!ln::::=%%~n!"
  for %%N in (!cnt!) do (
    for /f delims^=^ eol^= %%U in (""!update!"") do (
      for /f delims^=^ eol^= %%L in ("!ln!") do (
        if "!"=="" endlocal
        if not defined r%%N (
          set "r%%N=%%L"
        ) else (
          set "s%%N=%%L"
        )
      )
      if "!"=="" endlocal
      if defined s%%N (
        set "update=%%~U|repl s%%N r%%N vl"
      ) else if defined r%%N (
        set "update=%%~U|repl r%%N "" vl"
      )
    )
  )
)

:: Process each file
for %%F in (*.html) do (
  echo processing %%F
  type "%%F" %update% >"%%F.new"
  move /y "%%F.new" "%%F" >nul
)
echo Done! 
```

该脚本构建了一个搜索和替换字符串的“数组”：`s1,s2,...sn`和`r1,r2,...rn`

它还构建了一个`update`看起来像的命令

```
|repl s1 r1 vl|repl s2 r2 vl...|repl sn rn vl 
```

每个文件都通过一组管道 REPL 命令传递，这些命令执行搜索和替换，每个 REPL 命令一个。

上面的脚本有以下限制：

*   我构建的最终`update`命令的长度必须小于 8191 个字符，因此一次可以执行的搜索和替换操作的数量是有限的。理论上的限制是大约 480 次替换，但我不知道 Windows 在一个命令中处理这么多管道时会如何表现。
*   任何搜索或替换字符串都不能包含`:::`. 这是 conf.txt 文件设计所固有的

这是上述脚本所需的 REPL.BAT 文件。完整的文档嵌入在脚本中。上面的脚本使用`V`从变量中读取搜索和替换字符串的`L`选项，以及强制进行文字搜索而不是正则表达式搜索的选项。

```
@if (@X)==(@Y) @end /* Harmless hybrid line that begins a JScript comment

::************ Documentation ***********
:::
:::REPL  Search  Replace  [Options  [SourceVar]]
:::REPL  /?
:::
:::  Performs a global search and replace operation on each line of input from
:::  stdin and prints the result to stdout.
:::
:::  Each parameter may be optionally enclosed by double quotes. The double
:::  quotes are not considered part of the argument. The quotes are required
:::  if the parameter contains a batch token delimiter like space, tab, comma,
:::  semicolon. The quotes should also be used if the argument contains a
:::  batch special character like &, |, etc. so that the special character
:::  does not need to be escaped with ^.
:::
:::  If called with a single argument of /? then prints help documentation
:::  to stdout.
:::
:::  Search  - By default this is a case sensitive JScript (ECMA) regular
:::            expression expressed as a string.
:::
:::            JScript regex syntax documentation is available at
:::            http://msdn.microsoft.com/en-us/library/ae5bf541(v=vs.80).aspx
:::
:::  Replace - By default this is the string to be used as a replacement for
:::            each found search expression. Full support is provided for
:::            substituion patterns available to the JScript replace method.
:::            A $ literal can be escaped as $$. An empty replacement string
:::            must be represented as "".
:::
:::            Replace substitution pattern syntax is documented at
:::            http://msdn.microsoft.com/en-US/library/efy6s3e6(v=vs.80).aspx
:::
:::  Options - An optional string of characters used to alter the behavior
:::            of REPL. The option characters are case insensitive, and may
:::            appear in any order.
:::
:::            I - Makes the search case-insensitive.
:::
:::            L - The Search is treated as a string literal instead of a
:::                regular expression. Also, all $ found in Replace are
:::                treated as $ literals.
:::
:::            B - The Search must match the beginning of a line.
:::                Mostly used with literal searches.
:::
:::            E - The Search must match the end of a line.
:::                Mostly used with literal searches.
:::
:::            V - Search and Replace represent the name of environment
:::                variables that contain the respective values. An undefined
:::                variable is treated as an empty string.
:::
:::            M - Multi-line mode. The entire contents of stdin is read and
:::                processed in one pass instead of line by line. ^ anchors
:::                the beginning of a line and $ anchors the end of a line.
:::
:::            X - Enables extended substitution pattern syntax with support
:::                for the following escape sequences:
:::
:::                \\     -  Backslash
:::                \b     -  Backspace
:::                \f     -  Formfeed
:::                \n     -  Newline
:::                \r     -  Carriage Return
:::                \t     -  Horizontal Tab
:::                \v     -  Vertical Tab
:::                \xnn   -  Ascii (Latin 1) character expressed as 2 hex digits
:::                \unnnn -  Unicode character expressed as 4 hex digits
:::
:::                Escape sequences are supported even when the L option is used.
:::
:::            S - The source is read from an environment variable instead of
:::                from stdin. The name of the source environment variable is
:::                specified in the next argument after the option string.
:::

::************ Batch portion ***********
@echo off
if .%2 equ . (
  if "%~1" equ "/?" (
    findstr "^:::" "%~f0" | cscript //E:JScript //nologo "%~f0" "^:::" ""
    exit /b 0
  ) else (
    call :err "Insufficient arguments"
    exit /b 1
  )
)
echo(%~3|findstr /i "[^SMILEBVX]" >nul && (
  call :err "Invalid option(s)"
  exit /b 1
)
cscript //E:JScript //nologo "%~f0" %*
exit /b 0

:err
>&2 echo ERROR: %~1\. Use REPL /? to get help.
exit /b

************* JScript portion **********/
var env=WScript.CreateObject("WScript.Shell").Environment("Process");
var args=WScript.Arguments;
var search=args.Item(0);
var replace=args.Item(1);
var options="g";
if (args.length>2) {
  options+=args.Item(2).toLowerCase();
}
var multi=(options.indexOf("m")>=0);
var srcVar=(options.indexOf("s")>=0);
if (srcVar) {
  options=options.replace(/s/g,"");
}
if (options.indexOf("v")>=0) {
  options=options.replace(/v/g,"");
  search=env(search);
  replace=env(replace);
}
if (options.indexOf("l")>=0) {
  options=options.replace(/l/g,"");
  search=search.replace(/([.^$*+?()[{\\|])/g,"\\$1");
  replace=replace.replace(/\$/g,"$$$$");
}
if (options.indexOf("b")>=0) {
  options=options.replace(/b/g,"");
  search="^"+search
}
if (options.indexOf("e")>=0) {
  options=options.replace(/e/g,"");
  search=search+"$"
}
if (options.indexOf("x")>=0) {
  options=options.replace(/x/g,"");
  replace=replace.replace(/\\\\/g,"\\B");
  replace=replace.replace(/\\b/g,"\b");
  replace=replace.replace(/\\f/g,"\f");
  replace=replace.replace(/\\n/g,"\n");
  replace=replace.replace(/\\r/g,"\r");
  replace=replace.replace(/\\t/g,"\t");
  replace=replace.replace(/\\v/g,"\v");
  replace=replace.replace(/\\x[0-9a-fA-F]{2}|\\u[0-9a-fA-F]{4}/g,
    function($0,$1,$2){
      return String.fromCharCode(parseInt("0x"+$0.substring(2)));
    }
  );
  replace=replace.replace(/\\B/g,"\\");
}
var search=new RegExp(search,options);

if (srcVar) {
  WScript.Stdout.Write(env(args.Item(3)).replace(search,replace));
} else {
  while (!WScript.StdIn.AtEndOfStream) {
    if (multi) {
      WScript.Stdout.Write(WScript.StdIn.ReadAll().replace(search,replace));
    } else {
      WScript.Stdout.WriteLine(WScript.StdIn.ReadLine().replace(search,replace));
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:19:56.650

启动`mintty.exe`（您的 cygwin 终端）并执行以下命令。酌情修改`/cygdrive/c/Users/etc`。

> `find /cygdrive/c/Users/Varun/Documents/etc/toChange -type f -iname '*.html' -print0 | xargs -0 sed -i -r -e "/aaa\.[A-Z1-9_]+\s*=/!s/\Wfirefox\W/aaa.FIRE_FOX/g" -e "/aaa\.[A-Z1-9_]+\s*=/!s/\Wmsie 7\W/aaa.IE_7/g" -e "/aaa\.[A-Z1-9_]+\s*=/!s/\Wmsie\W/aaa.MSIE/g"`

这意味着：

*   内`/path/to/toChange`，
*   查找`f`带有`.html`扩展名的文件（不是目录）
*   将每个匹配项传递给`sed`，这将修改内联内容。
*   对于每行**不**包含`var aaa.FIRE_FOX =`或类似的，
    *   全局搜索`[non alpha-numeric]firefox[non alpha-numeric]`
    *   并替换为`aaa.FIRE_FOX`

... 等等。

**test.html**之前：

```
var aaa.FIRE_FOX="firefox"
var aaa.MSIE="msie"
var aaa.IE_7="msie 7"
if (loUserAgent.toLowerCase().indexOf("firefox") > -1
|| (loUserAgent.toLowerCase().indexOf("msie") > -1 && loUserAgent.toLowerCase().indexOf("msie 7") != -1)) 
```

**命令后的**test.html**`find | xargs sed`：**

 **```
var aaa.FIRE_FOX="firefox"
var aaa.MSIE="msie"
var aaa.IE_7="msie 7"
if (loUserAgent.toLowerCase().indexOf(aaa.FIRE_FOX) > -1
|| (loUserAgent.toLowerCase().indexOf(aaa.MSIE) > -1 && loUserAgent.toLowerCase().indexOf(aaa.IE_7) != -1)) 
```

如果这对您不起作用，也许 Endoro 建议使用带有 GUI 的东西（例如 WinGrep）可能会更好**

# actionscript-3 - TextField 小写行

> ID：15897712
> 
> 赞同：2
> 
> 时间：2013-04-09T09:03:41.187
> 
> 标签：actionscript-3, actionscript, textfield

我需要使用 ActionScript 3**在缩放后的 TextField中获取 Baseline 和 Lowercase 线之间的距离。我在这里用蓝色箭头标记了它：**![在此处输入图像描述](https://i.stack.imgur.com/QE9oR.jpg)

有谁知道如何获得这个价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:01:59.180

您要查找的内容称为[x-height](http://en.wikipedia.org/wiki/X-height)。不幸的是，Flash ActionScript API 没有提供任何获取字体 x 高度的方法。

使用一些棘手的技术，您也许可以自己计算 x 高度。我在想您也许可以创建一个只有“x”的新文本字段，并将其绘制到位图数据中。然后测试像素以获得高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T10:42:31.967

```
var s:String=yourTF.text; // preserve
yourTF.text='x';
var c:uint=yourTF.textColor; // get color
var bd:BitmapData=new BitmapData(yourTF.width,yourTF.height);
bd.draw(yourTF);
var r:Rectangle=bg.getColorBoundsRect(0x00ffffff,c);
trace(r.height);
yourTF.text=s; 
```

# php - 设置 Cookie AJAX/PHP

> ID：15897716
> 
> 赞同：0
> 
> 时间：2013-04-09T09:04:02.173
> 
> 标签：php, ajax, cookies, login

我有一个 AJAX 登录系统 - 所有表单数据都使用 PHP 进行验证，如果用户名和密码匹配，它会设置某些 cookie。

我知道需要在其他任何东西之前设置 cookie，但是我使用的模型怎么可能呢？我想保持整个登录不刷新。

我收到错误消息：“无法修改标头信息 - 标头已由.....发送”

有人有建议吗？

谢谢

编辑：使用 IF 语句验证表单，然后如果满足条件，则在其中设置 cookie

代码：全部

```
<?php
session_start(); 
include "connect.php";
if ($_POST) {   
    $loginuser = mysql_escape_string($_POST['loginuser']);
    $loginpass = mysql_escape_string($_POST['loginpass']);
    $rememberme = mysql_escape_string($_POST['rememberme']);

    if ($rememberme = 1) {
        $time = time()+60*60*24*365;
    } else {
        $time = time()+3600;
    }

    $salt = changedsalt";
    $hashed_password = sha1($loginpass).sha1($salt);

    $getUser_sql = "SELECT * FROM acts WHERE username = '$loginuser' AND hashed_password = '$hashed_password'";
    $getUser = mysql_query($getUser_sql);
    $getUser_RecordCount = mysql_num_rows($getUser);        

    if($getUser_RecordCount == 1) {
        $rowLogin = mysql_fetch_array($getUser);
        $user_id = $rowLogin['id'];
        $emailad = $rowLogin['email'];
        $activated = $rowLogin['activated'];            
        if ($activated == 1) {
            $hash = "changedthistoo";
            $randstring = rand(5, 10);
            $code = sha1($hash . $randstring);
            mysql_query("UPDATE `acts` SET `key` = '$code' WHERE `id` = '$user_id' AND `email` = '$emailad'");
            setcookie('AHkey', $code, $time, '/');
            setcookie('AHid', $user_id, $time,  '/');
            setcookie('AHem', $emailad, $time, '/');
            setcookie('AHty', 'acts', $time, '/');
            setcookie('AHtr', 1, time()+3600, '/');
            $data['success'] = true;
            $data['message'] = "Act Login - Activated";
            $data['message'] = $code;
            echo json_encode($data);
            exit;               
        } else {
            $data['success'] = false;
            $data['message'] = "Act Login - Not Activated";
            echo json_encode($data);
            exit;
        }       
    } elseif ($getUser_RecordCount == 0) {
        $getUser_sqlp = "SELECT * FROM promoter WHERE username = '$loginuser' AND hashed_password = '$hashed_password'";
        $getUserp = mysql_query($getUser_sqlp);
        $getUser_RecordCountp = mysql_num_rows($getUserp);
        $rowLogin = mysql_fetch_array($getUserp);
        $user_id = $rowLogin['id'];
        $emailad = $rowLogin['email'];
        $activated = $rowLogin['activated'];
        if($getUser_RecordCountp == 1) {
            if ($activated == 1) {
                //generate random string
                $hash = "49ebva09afbh";
                $randstring = rand(5, 10);
                $code = sha1($hash . $randstring);
                mysql_query("UPDATE `promter` SET `key` = '$code' WHERE `id` = '$user_id' AND `email` = '$emailad'");
                setcookie('AHkey', $code, $time, '/');
                setcookie('AHid', $user_id, $time, '/');
                setcookie('AHem', $emailad, $time, '/');
                setcookie('AHty', 'promoter', $time, '/');
                setcookie('AHtr', 1, time()+3600, '/');
                $data['success'] = true;
                $data['message'] = "Act Login - Activated";
                $data['message'] = $code;
                echo json_encode($data);
                exit;                           
            } else {
                $data['success'] = false;
                $data['message'] = "Promoter Login - Not Activated";
                echo json_encode($data);
                exit;
            }
        } else {
            $data['success'] = false;
            $data['message'] = "Wrong Username or Password";
        }       
    }   
    echo json_encode($data);
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:13:58.237

请`ob_start();`在重定向之前使用`header();`

在任何使用之前`header()`不应该有任何输出到屏幕。更多使用 ob_start 请通过 [http://php.net/manual/en/function.ob-start.php](http://php.net/manual/en/function.ob-start.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:21:28.617

您可以将 session_start() 保留在顶部的主索引页面中。然后使用 Ajax 将数据发送到这个 url 或页面。

# javascript - 为什么说 - 下划线未定义

> ID：15897717
> 
> 赞同：-1
> 
> 时间：2013-04-09T09:04:09.643
> 
> 标签：javascript, underscore.js

为什么说 - '_' 未定义，下面是一个基本的简单示例和小提琴。谢谢你

[http://jsfiddle.net/fuEfq/](http://jsfiddle.net/fuEfq/)

```
-------------index.html---------------------------
<html>
<head>

    <title></title>

        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="underscore.js"></script>     
        <script type="text/javascript" src="myJs.js"></script>   

    <head>  

    <html>

    <body>

    <script>

    <button type="button" onclick = "loadThis();">Click Me!</button>

    </script>

    </body>

</html> 
```

* * *

```
-------------myJs.js---------------------------

var loadThis = function(){

    vas x = _.uniq([1, 2, 1, 3, 1, 4]);

    alert(x);

}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:06:44.970

您的小提琴的问题在于`loadThis`它包含在 jsFiddle 为您提供的函数中（包装您的代码），错误是`loadThis`, not`_`是未定义的。（如果你看左边，你会看到你在第二个下拉列表中选择了“onLoad”。这意味着 jsFiddle 会`window.load`为你生成一个回调并将你的代码放在那个回调中。）如果我用[这个更新来解决这个问题小提琴](http://jsfiddle.net/fuEfq/4/)，它工作正常。

如果您在实际代码中看到一个错误，`_`即未定义，则表明您尚未（成功）加载 underscore.js。这通常是因为您没有`script`为其添加标签、`script`标签在某些方面有误，或者标签中的 URL 错误。如果您查看浏览器的 JavaScript 控制台（如果您的浏览器没有，请切换到现代浏览器），它会显示 URL 是否错误。

# c# - C# PresentViewController 到情节提要中的视图控制器

> ID：15897719
> 
> 赞同：6
> 
> 时间：2013-04-09T09:04:14.580
> 
> 标签：c#, ios, xamarin.ios, xamarin

我正在 iOS 中创建我的第一个 Xamarin 应用程序 (C#)，但在故事板中导航时遇到问题。我所有的标签栏、导航和视图控制器都在情节提要中。在几乎每个视图控制器中，我都添加了一个从侧面滑动的菜单（Facebook 和 YouTube 风格）。从那里必须可以返回到情节提要中的第一个视图控制器（主页）。因为菜单在我的应用程序的几乎每个控制器中都处于活动状态，所以我不使用 segues（这在我的故事板中会一团糟）。

所以我想使用 PresentViewController()，但是当我这样做时，页面变黑并且不显示任何内容。

```
homeViewController home = new homeViewController();
PresentViewController(home, true, null); 
```

它变黑是因为 PresentViewController 需要来自 homeViewController 的 XIB 文件吗？我希望用户留在情节提要中，这样他就可以继续浏览我的应用程序。

有人有想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T11:52:45.800

您是否自己创建了空构造函数？如果是这样，那么它没有从情节提要中加载信息，这就是为什么它是黑色的。

要创建控制器，请调用：

```
var controller = Storyboard.InstantiateViewController("HomeViewController") as UIViewController; 
```

您还必须在 XCode 中打开控制器并将其“Storyboard ID”设置为“HomeViewController”。这是详细信息窗格中左侧（我认为）的第二个选项卡。您更改课程的同一选项卡。

# java - 如何在 Java 中为多个用户实现多问题轮询线程？

> ID：15897720
> 
> 赞同：0
> 
> 时间：2013-04-09T09:04:21.143
> 
> 标签：java, multithreading, synchronize

我有一个关于 Java 线程的问题。这是我的场景：

*   **2 个**不同的人将在他们的手机中收到一个多问题民意调查。
*   发送问题后，服务器会一直处于**等待**（）状态，直到收到答案。然后，发送一个**notify** () 信号让轮询继续进行，直到发送完所有问题。
*   **用户 1**可能正在回答***问题 3***，而**用户 2**仍在回答***问题 1。***

到目前为止，我的方法是实现一个新的*ChainedPollThread*线程。无论如何，通过这种方式，如果**用户 1**回答了问题 1，则用户**1 和用户 2**都会收到第二个问题。

我需要为每个用户创建一个新的*ChainedPollThread吗？*

如果用户数量增加，这是否意味着我需要创建例如 100 个线程？

哪种方法可以实现我想要实现的目标？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:16:15.920

多线程的方式是每个参与者都需要一个线程。

你现在实现的方式意味着，一旦有人回答了一个问题，你的服务器端程序的整个状态就会推进到第二个问题。每个参与者都有一个线程（因此，如果你愿意的话，一个民意调查程序）将缓解这个问题。

要减少由于不必要的线程数量而导致的服务器负载，请使用线程池（请参阅[http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html)）。一旦不再需要现有线程，线程池就会重新使用它们，从而试图将活动线程的大小保持在最低限度。（创建线程是昂贵的部分）如果需要更多，则池增长到指定的最大值，如果需要更少，则缩小到指定的最小值。

另一方面，整个模型有一些危险：如果一个人根本不回答怎么办？服务器会超时吗？它会永远等待吗？

一种选择可能是在移动设备上安装一个软件/框架，它能够接收所有问题和可能的投票答案，并在屏幕上一个接一个地呈现。一旦参与者按下“完成”，一组选择的答案就会发送回给您。这样，您的服务器就不需要为每个参与者保留线程，只需接收一个包含所有答案的字符串。

# sql - 用于比较 Sybase 和 Sql 服务器数据库的 Tablediff.exe 实用程序

> ID：15897722
> 
> 赞同：0
> 
> 时间：2013-04-09T09:04:25.420
> 
> 标签：sql, sql-server-2008, ssis, sybase

我正在尝试使用 tablediff.exe 实用程序来比较和更新 sybase 和 sql server 2008R2 表。

我写了这个声明：

```
exec master..xp_cmdshell '"C:\Program Files\Microsoft SQL Server\100\COM\tablediff.exe" -sourceserver HANU-302\newty -sourcedatabase SSISDBSource -sourcetable company -destinationserver SQL2008R2\HANU-302 -destinationdatabase SSISDBDest -destinationtable customer -f C:\Temp\Diff' 
```

我不确定源服务器（sybase 数据库）的名称应该是什么。

![在此处输入图像描述](https://i.stack.imgur.com/wHLGG.jpg)

我的 sybase 服务器是 HANU-302，端口号为 5000，数据库名为 newty，表名为 company。

我收到错误消息“无法连接到源 HANU-302\newty。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T03:47:46.087

我不知道您可以对 Sybase 使用 Tablediff 吗？是否有一些文件表明您可以做到这一点？

事实上，根据你给 TableDiff 的参数，它只能连接到 SQL Server。它是 Microsoft 构建的 SQL Server 工具，所以我认为您不会有任何不同！

# iis-express - IISExpress 8 无法读取配置文件redirection.config

> ID：15897726
> 
> 赞同：48
> 
> 时间：2013-04-09T09:04:38.437
> 
> 标签：iis-express

我正在使用 IISExpress8 运行 Windows Server 2008 R2 (x64)，并且在导航到

```
c:\Program Files (x86)\IIS Express>iisexpress.exe 
```

它说：

文件名：redirection.config

> 错误：无法读取配置文件

任何想法从哪里开始？我什么都找不到...

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-11-12T11:51:07.220

I had a similar issue to @Myles J but renaming `%userprofile%\Documents\IISExpress\config\applicationhost.config` didn't work. What I had to do was the following:

1.  Close Visual Studio.
2.  Rename the `%userprofile%\Documents\IISExpress\config` **directory**.
3.  Start Visual Studio again. The `%userprofile%\Documents\IISExpress\config` directory will be recreated with the default config files.
4.  Copy the original `applicationhost.config` file over the autogenerated one.

Before anyone asks: the permissions on the folders were identical, the read-only flag was not set on the folder or its files, and I didn't modify `applicationhost.config` in any way.

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2014-07-25T13:10:55.143

安装 IIS Express 后，将所有文件从

> C:\Program Files\IIS Express\config\templates\PersonalWebServer

至

> %userprofile%\Documents\IISExpress\config

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2014-04-09T05:04:43.897

右键单击您的项目文件并编辑项目文件并从 IISUrl 中删除 URL 并重新加载您的项目然后它将工作

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-04-30T08:27:09.760

我刚刚解决了这个问题。这是一个奇怪的解决方案，但它对我有用。以下是我采取的步骤：

导航到包含本地 IISExpress 配置文件的文件夹（通常是我的文档>IISExpress>Windows7 上的配置）。

找到 applicationhost.config 文件。将其重命名为不同的名称，例如 applicationhost2.config。

在 Visual Studio 中导航到您的 Web 项目（我使用的是 VS 2012）。右键单击 Web 项目并选择使用 IISExpress。运行项目。由于重命名配置文件，它应该会失败。

将配置文件的名称改回 application.config。确保在 Web 项目设置中选择了“使用本地 IIS Web 服务器”。运行解决方案。

这对我有用。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-09-05T16:55:50.257

如果你这样做：

```
C:\Users\”username*****”\Documents\IISExpress\config 
```

你找到这些文件

```
applicationhost.config
aspnet.config
redirection.config 
```

删除上面3个文件，然后打开项目，问题就解决了。我试过了，它工作正常。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-11-23T03:33:36.390

我在 Windows 8.1 上与 Visual Studio 2013 有完全相同的问题我将我的文档文件夹映射到 SkyDrive，因此 IISExpress 文件夹被标记为“仅限在线”。一旦我将其标记为“离线可用”，一切正常。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-06-27T04:35:35.323

在某些情况下，仅仅重命名/删除 applicationhost.config 文件是不够的，因为 VS 不会总是为您重新创建它。我相信以下内容将在所有情况下解决它：

关闭 Visual Studio。

确保没有 IIS Express 进程在运行，然后删除 C:\Users\XXXX\Documents\IISExpress\config\applicationhost.config（其中 XXXX 是您的 Windows 用户名）。

在命令行上，执行 c:\Program Files\IIS Express\iisexpress.exe。这将重新创建必要的配置。立即按“Q”结束该过程。

再次打开 Visual Studio 并启动/调试您的 Web 项目。现在一切都应该正常工作。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-02-19T14:55:39.190

在本地 IISExpress 文件夹中备份文件。可以在以下位置找到它：C:\Users\”username*****”\Documents\IISExpress\config
转到位置：
C:\Program Files\IIS Express\config\templates\PersonalWebServer
从中复制所需的文件目录到本地 IISExpress 文件夹。
复制文件后它对我有用：
applicationhost.config
aspnet.config
redirection.config

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-08-29T11:27:14.673

在我的情况下，我的工作笔记本电脑的“我的文档”文件夹被映射到网络共享。因此，当工作网络不可用时，我无法打开我的解决方案。

更改：这些将在网络共享中具有我的文档的价值。将此更改为本地

一、Computer\HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders\Personal

二、Computer\HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders\Personal

例如：

旧值：\networkdrive\c$\Users\profile\Documents

新值：C:\Users\profile\Documents

请参阅： [https ://blogs.msdn.microsoft.com/chiranth/2015/04/01/error-while-runningstarting-a-website-under-iisexpress-in-visual-studio/](https://blogs.msdn.microsoft.com/chiranth/2015/04/01/error-while-runningstarting-a-website-under-iisexpress-in-visual-studio/)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-07-24T17:21:24.050

问题是 C:\Users\"Your Username"\Documents\IISExpress\config 中的文件已加密。打开此文件夹，选择所有文件，右键单击并选择属性，单击高级，取消选择“加密内容以保护数据，单击确定，单击应用。

那将解决它。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-05-07T07:57:35.697

Visual Studio 将只报告它查找的*文件名，而不是**完整路径*。许多用户的问题是带有redirection.config 的IISExpress 可以存在于多个路径中，包括可能未同步的OneDrive 路径。

要准确了解 Visual Studio 尝试打开的文件，请使用 Microsoft (SysInternals) 工具 ProcMon。它列出了 Windows 尝试访问的所有文件和资源。为“路径包含redirection.config”添加过滤器并在Visual Studio 中重现该问题。现在您将看到它尝试使用的实际路径。

就我而言，我有多个 IISExpress 文件夹。一个同步到 OneDrive，另一个同步到本地。Visual Studio 尝试访问未同步到本地磁盘的 OneDrive 文件夹，因此失败。

[![强制 IISExpress 文件夹在本地存储文件解决了问题](https://i.stack.imgur.com/X8NAr.png)](https://i.stack.imgur.com/X8NAr.png)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-06-18T19:46:55.087

使用 VS2013 / Windows 7

关闭解决方案。打开 Windows 资源管理器并右键单击“My Documents\IISExpress\config”目录并选择“解密”。确保选中“将更改应用到此文件夹、子文件夹和文件”。重新打开 VS 解决方案。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-05-12T16:51:19.243

使用 Visual Studio 2013

我不得不停止 Visual Studio 重命名整个配置目录，Documents > IISExpress> Config 然后启动一个新的 Web 项目，该项目失败但它重新创建了配置目录，然后我重新启动并启动了 Visual Studio，一切正常！

在两台计算机之间复制项目后，我注意到了这个问题，可能是由重复的 IISExpress 端口或一些琐碎的事情引起的。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-02-26T10:37:59.457

在我的情况下，它发生在 IISExpress 在之前的 VS 会话中仍然处于活动状态并且运行了新的 VS 实例时。

解决方案是停止（或终止）IIS Express 实例。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-12-18T11:49:23.020

对我来说，这是一个简单的权限不足，要么授予每个人对“%userprofile%\Documents\IISExpress\config”此文件夹的权限，要么在管理员模式下打开 VS

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-06-13T08:57:28.823

您无需关闭 Visual Studio 或重命名任何内容。

1.  打开 %userprofile%\Documents 的属性
2.  选择安全 > 高级，将所有者更改为您自己（如果您已经是所有者，则再次更改）。
3.  选择“替换子容器和对象的所有者”和“用从该对象继承的权限项替换所有子对象权限项”。
4.  好的。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-08-29T19:08:02.060

修复对我来说真的很简单 >> 重新启动 Visual Studio

我的设置：

*   视觉工作室 2015

*   Web 项目使用本地 IIS 8.5

*   我偶尔会遇到我认为是 VS 的错误，它会将一些项目转换为使用 IISExpress（通过删除在 /This PC/Documents 中创建的文件夹来解决这个问题）。这可能是相关的。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-11-07T11:23:19.663

我发现从 applicationhost.config 文件中删除其中一个站点为我解决了这个问题。

`%ProgramFiles(x86)%\IISExpress`我从目录中使用了以下命令：

```
appcmd list site 
```

然后

```
appcmd delete site rogueSiteName 
```

特别是我删除了一个带有括号数字后缀的站点名称（例如“MySite(1)”）。我还不确定 VS2013 是否只是括号有问题，或者两个站点指向同一个目录。无论哪种方式，删除它都会让 VS 再次高兴。

### 背景

我已经在这个问题上苦苦挣扎了几天，似乎没有任何帮助 - 甚至没有这里的最佳答案中给出的说明。

我还尝试过移动配置文件夹，如[http://www.iis.net/learn/extensions/introduction-to-iis-express/iis-80-express-readme](http://www.iis.net/learn/extensions/introduction-to-iis-express/iis-80-express-readme)中所述。但是，尽管 VS2013 在新位置重新创建了目录结构和文件，但错误仍在继续，运行 appcmd 显示它仍然默认指向旧位置。

### 学分

我在哪里找到要使用的命令的功劳转到[http://gyorgybalassy.wordpress.com/2013/12/02/cleaning-up-iis-express-configuration/](http://gyorgybalassy.wordpress.com/2013/12/02/cleaning-up-iis-express-configuration/)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-02-22T16:14:03.397

我通过转到 Documents > IISExpress> Config 并重命名 application.config 解决了这个问题（使用 vs2013 和 windows 7）。之后，我重新启动了 Visual Studio 并打开了我的项目并且它工作了。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-07-21T22:20:01.307

我在安装 VS2013（更新 3 RC）后尝试打开另一个开发人员的解决方案时遇到了这个问题。在遵循此处的建议并删除/重命名/等之后。该`config`文件夹，VS在错误的位置重新创建了文件。它创建了嵌套`config`文件夹：

C:\Users[用户]\Documents\IISExpress\config\config

我将所有内容从 ...\config\config 移至 ...\config，它按预期工作。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-01-03T09:07:43.363

在尝试通过快速修复将 Visual Studio 中的 IIS express 从集成更改为经典管道来解决问题后，我最终根本无法使用 IIS express。我尝试了以上所有技术...

我无法重命名，复制文件。卸载 IIS express 并重新安装不起作用。

我终于下载了最新版本的 WebMatrix 并安装了 IIS express 8，但没有用，但至少那时我终于能够删除旧目录，然后我重新创建了自己.....

一点也不好玩。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-11-22T06:47:07.240

在 IIS 10 Express 上。确保 Visual Studio (VS) 已关闭。

我首先发现它`%userprofile%\Documents\IISExpress\config\`不起作用。

我首先认为 IIS Express 与 Windows 操作系统中的 IIS 发生了冲突。

我卸载了它，但没有任何变化，然后我通过控制面板卸载了与 VS 2019 一起安装的 IIS 10 Express。

然后我继续发现这个文件保存在`C:\Users\username\OneDrive\Documents\IISExpress`，与一个驱动器存储相关联，所以我建议你复制`%userprofile%\Documents\IISExpress\config\`并粘贴到你的 Windows 资源管理器导航中找到目录。

转到更高的一个目录，和/或重命名配置文件夹。重新启动 VS 并再次运行项目。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-11-29T11:35:05.213

对于 ASP.Net Core，只需访问您的属性部分，然后进行修改并保存。

示例：我修改了 SSL 端口 [![核心示例](https://i.stack.imgur.com/G9jyj.png)](https://i.stack.imgur.com/G9jyj.png)

您将收到您的 launchsettings.json 已修改的通知。接受这一点，你就可以走了。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-04-15T20:43:31.260

对我来说是删除文件 Documents\IISExpress\config\applicationhost.config

关闭 Visual Studio > 打开 > 调试

感谢之前的回答帮助直接解决问题

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-05-16T12:01:00.310

现在是 2020 年，我在 Visual Studio 2019 中报告了同样的问题。

原因：使用不同的 Web 应用程序（在我的实例中为 Blazor）打开了多个 VS 实例。

解决方案：关闭所有 VS 实例并重新打开您要运行的解决方案。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-08-14T10:37:08.360

## 如果是 ASP.NET Core 项目

只需尝试`launchSettings.json`通过路径更改文件中的iis端口`iisSettings:iisExpress:applicationUrl`

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-06-12T17:18:25.607

我的是由 OneDrive 引起的。显然我的文档文件夹正在同步到它。我所做的是通过 regedit 更改文档文件夹的位置并导航到此路径：

HKEY_CURRENT_USER > 软件 > Microsoft > Windows > CurrentVersion > Explorer > User Shell 文件夹

然后将**Personal**的值 从：C:\Users\my username\OneDrive\Documents 更改为 C:\Users\my username\Documents

之后，我重新启动计算机，就可以创建一个 VS 项目。

# extjs - extjs 是否保留未决电话列表？

> ID：15897731
> 
> 赞同：2
> 
> 时间：2013-04-09T09:04:55.143
> 
> 标签：extjs, sencha-touch, sencha-touch-2

在处理了对服务器的所有调用之后，我需要发生一些事情。但我不知道这些会按什么顺序发生。

所以我想知道 extjs/sencha touch 是否在某处保留了所有打开调用的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:27:14.037

好像这种情况确实存在。

```
Ext.Ajax.requests 
```

保留所有未决呼叫的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:16:28.123

如果我正确理解您的问题，您可能不需要这样的功能，您可以在执行每个调用时在 n 个异步函数返回递增计数器后安排一些事情。在每个回调递减计数器上，如果全部返回，计数器将达到零，您可以执行“全局”回调。

# facebook - Facebook Graph API POST 特定应用相册中的图片

> ID：15897735
> 
> 赞同：1
> 
> 时间：2013-04-09T09:04:59.313
> 
> 标签：facebook, facebook-graph-api, facebook-fql, facebook-php-sdk

我有一个 Facebook 应用程序，可以将图片发布到我的应用程序创建的特定相册。如果我第二次运行该应用程序，它将创建另一个相册并在那里发布新图片。我想如果用户发布一个新的，图片要放在同一个相册中，如果不在那里创建。到目前为止，这是我的代码：

```
$graph_url = "https://graph.facebook.com/me/albums?" . "access_token=". $access_token;
$album_name = 'MyApp Album';
$album_description = 'Album description';
$postdata = http_build_query(
    array('name'=> $album_name,
      'message'=> $album_description
          ));
$opts = array('http' =>
    array(
        'method'=> 'POST',
    'header'=> 'Content-type: application/x-www-form-urlencoded',
    'content' => $postdata
    ));
$context  = stream_context_create($opts);
$result = json_decode(file_get_contents($graph_url, false, $context));
$album_id = $result->id;
$file = $_POST['photo'];
$args = array(
    'message' => 'Photo from application',
    );
$args[basename($file)] = '@' . realpath($file);
$ch = curl_init();
$url = "https://graph.facebook.com/".$album_id."/photos?access_token=" . $access_token;
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $args);
$data = curl_exec($ch);
print_r(json_decode($data,true)); 
```

如果不是绝对必要，我不想使用 FQL 查询。如果我可以搜索专辑名称然后返回 ID，那就太好了。

# xcode - 如何检查 OS X 应用程序中是否有可用的网络？

> ID：15897737
> 
> 赞同：0
> 
> 时间：2013-04-09T09:05:02.020
> 
> 标签：xcode, macos, networking, network-programming

在我的应用程序中，我想检查当前 OS X 系统中是否有任何类型的现有网络可用。以太网或互联网或 Wifi 或 3G 卡或任何其他类型的网络通信。

我怎样才能做到这一点？

谢谢！

* * *

[https://stackoverflow.com/questions/5662298 ...](https://stackoverflow.com/questions/5662298/how-to-check-network-status-in-iphone-app)

感谢[bdash](https://stackoverflow.com/users/1991710/bdash)和[cody](https://stackoverflow.com/users/971144/cody)！我做了功课，在上面找到了另一个答案。但那是针对 iPhone 的，我在下面做了一些修改。

```
- (BOOL)isAnyNetworkExist
{
    struct sockaddr_in nullAddress;

    bzero(&nullAddress, sizeof(nullAddress));
    nullAddress.sin_len = sizeof(nullAddress);
    nullAddress.sin_family = AF_INET;

    SCNetworkReachabilityRef ref = SCNetworkReachabilityCreateWithAddress(kCFAllocatorDefault, (const struct sockaddr*) &nullAddress);

    SCNetworkReachabilityFlags flags;
    SCNetworkReachabilityGetFlags(ref, &flags);
    CFRelease(ref);     /* !!! */

    AMCDebug(@"Flag: 0x%08X", flags);
    if (0 != (flags & kSCNetworkFlagsIsLocalAddress))
    {
        return YES;
    }
    else
    {
        return NO;
    }
} 
```

我只检查“ *kSCNetworkFlagsIsLocalAddress* ”，但我不确定这是否可以。

我在删除所有网络连接时尝试了该标志，它返回 0x07。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:27:55.890

你应该看看[SCNetworkReachability](http://developer.apple.com/library/mac/#documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/Reference/reference.html)。通常，您将创建可达性对象并将其添加到运行循环，当它可以访问时您将获得回调。有关详细信息，请参阅[此](https://stackoverflow.com/questions/7627058/how-to-determine-internet-connection-in-cocoa)帖子。
还可以查看[SCNetworkConfiguration](http://developer.apple.com/library/mac/#documentation/Networking/Reference/SCNetworkConfiguration/Reference/reference.html)：您可以浏览系统中的所有接口，看看它们是否已连接。
你也可以看看[SCDynamicStore](http://developer.apple.com/library/mac/#documentation/Networking/Reference/SCDynamicStore/Reference/reference.html#//apple_ref/doc/uid/TP40008287)。苹果邮件列表中有一个[例子](http://lists.apple.com/archives/Macnetworkprog/2006/Oct/msg00007.html)。

# sql-server - 从多个表中收集数据

> ID：15897747
> 
> 赞同：0
> 
> 时间：2013-04-09T09:05:33.990
> 
> 标签：sql-server, stored-procedures

我正在构建一个存储过程，它将用于驱动管理报告。

报告结构如下：

> 地区
> 
> > 分支
> > 
> > > 产品
> > > 
> > > > 销售额 | 销售计数 | 应用程序计数 | 取消计数 | 下降计数 | 待定计数
> > > 
> > > 产品
> > 
> > 分支
> 
> 地区

我编写了查询，为我提供了销售、申请、取消、拒绝和待定的数据。

这些查询都返回到具有以下结构的临时表：

> 分行代码 | 产品编号 | 价值 | 数数

然后我有一个查询，它返回区域和分支 (QryBranch) 的所有数据，因为我们希望报告显示所有分支，没有数据的分支只会在结果中显示零。

我遇到的问题是将所有数据整理在一起以获得所需的结果，因为我在 QryBranch 和 TblProduct 之间没有链接。

我可以轻松地将 QryBranch 和 BranchCode 上的临时表链接起来，但我无法弄清楚如何将 Product 考虑在内。

请有人能给一些建议。

# node.js - socket.io 中的不同套接字连接或命名空间？

> ID：15897751
> 
> 赞同：1
> 
> 时间：2013-04-09T09:05:42.400
> 
> 标签：node.js, sockets, azure, websocket, socket.io

我的 Socket.IO 实现需要不同的通道。这些不同的通道将有不同的处理，不同的数据将被传递给连接到不同通道的客户端。我有点困惑是否使用不同的套接字连接，因为我想我必须在不同的端口上创建不同的连接？或者使用 socket.io 提供的标准命名空间功能。我主要担心的是，如果我选择命名空间，它将为所有通道使用一个套接字连接，那么将数据发送到不同通道上的许多客户端的性能会因此受到影响吗？

非常感谢任何建议或意见。谢谢

# dependency-injection - wicket DataTable getSort 状态不变

> ID：15897753
> 
> 赞同：0
> 
> 时间：2013-04-09T09:05:44.163
> 
> 标签：dependency-injection, wicket

感谢您的关注，我遇到了一个我无法解决的奇怪问题。我已经构建了一个 DataTable，其中 wicket 映射了来自 mongoDB 的内容。我也在使用 Tomcat7 和 Eclipse

但是，每次我选择要排序的列时，数据提供者的迭代器方法中的 getSort() 方法总是返回与默认值相同的值。

```
public SortableGalaxyDataProvider() {

    setSort("name", SortOrder.ASCENDING);
}

@Override
public Iterator<? extends Galaxy> iterator(long first, long count) {

    SortParam<String> sort = getSort(); //is always the same 
```

我的页面的初始化是这样完成的

[编辑] 我使用 Spring 进行注入，所以在 GalaxyTable 页面中我有。

```
@Inject
SortableGalaxyDataProvider galaxyProvider;

public GalaxyTable() {

    List<IColumn<Galaxy, String>> columns = new ArrayList<IColumn<Galaxy, String>>();

    columns.add(new PropertyColumn<Galaxy,String>(new Model<String>("Name"),"name","name"));
    columns.add(new PropertyColumn<Galaxy,String>(new Model<String>("Type"),"type","type"));
    columns.add(new PropertyColumn<Galaxy,String>(new Model<String>("Ancestors"),"ancestors","ancestors"));
    columns.add(new PropertyColumn<Galaxy,String>(new Model<String>("Radius"),"radius","radius"));

    add(new DefaultDataTable<Galaxy, String>("galaxies", columns, galaxyProvider, 10));
} 
```

这是用于表格的 html 行

```
<wicket:extend>
<table cellspacing="0" wicket:id="galaxies">[table]</table>
</wicket:extend> 
```

我找了很多例子，似乎没有人遇到同样的问题，初始显示是正常的，我可以浏览内容但是它永远不会排序，因为排序状态没有改变。

有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:53:21.107

我认为您的问题可能是由使用 SpringBean 引起的。它的工作方式，我认为在注入点中有一个自动生成的代理，因此，当 Wicket 尝试使用自省设置排序状态时，它会在代理中执行（或无法执行）。可能发生的另一件事是 Spring 在两个 ajax 请求之间重新创建 GalaxyProvider bean，排序状态也会丢失。

我会尝试摆脱代码中的注入，看看它会做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:29:14.607

解决 Spring 注入问题的一种方法：

将 DAO 注入页面并在数据提供者的构造函数中使用它是可行的。

```
 @Inject
    //SortableGalaxyDataProvider galaxyProvider;
    UniversDAO dao;

    public GalaxyTable() {

        List<IColumn<Galaxy, String>> columns = new ArrayList<IColumn<Galaxy, String>>();

        columns.add(new PropertyColumn<Galaxy,String>(new Model<String>("Name"),"name","name"));
        columns.add(new PropertyColumn<Galaxy,String>(new Model<String>("Type"),"type","type"));
        columns.add(new PropertyColumn<Galaxy,String>(new Model<String>("Ancestors"),"ancestors","ancestors"));
        columns.add(new PropertyColumn<Galaxy,String>(new Model<String>("Radius"),"radius","radius"));

        //add(new DefaultDataTable<Galaxy, String>("galaxies", columns, galaxyProvider, 10));
        add(new DefaultDataTable<Galaxy, String>("galaxies", columns, new SortableGalaxyDataProvider(dao), 10));
    } 
```

但是我更希望它与常规的弹簧注射一起使用。正如塞德里克所说，问题可能出在这个包装弹簧上。

# javascript - 过滤掉要更新的跨度

> ID：15897755
> 
> 赞同：2
> 
> 时间：2013-04-09T09:05:46.387
> 
> 标签：javascript, html, css

我的 HTML 中有以下 div 集合。它旨在根据用户交互动态复制。

```
 <div class="bill-item">
<!-- Section for a single item -->
<div class="bill-item-img">
<!-- Section for Item pic -->
</div>
<div class="bill-item-description">
<!-- Section for Item description and pricing -->
<div class="bill-item-name">
<p class="bill-item-name-left">Normal Cofee</p><p class="bill-item-name-right">170.00</p>
<div class="clear"></div>
</div>
<div class="bill-item-price">
<span>170.00 USD</span>
</div>
    <div class="bill-item-amount">
<span>2</span>
</div>
</div>
<div class="bill-amount-selection">
<!-- Section where the increment & decrement of item amount goes -->
<a class="amount-increase" href="#"></a>
<a class="amount-decrease" href="#"></a>
</div>
</div> 
```

这是元素的 HTML 渲染图像。

![页](https://i.stack.imgur.com/FoctZ.png)

我编写了以下脚本来增加 bill-item-amount 跨度值。

```
 $(".amount-increase").click(function(){
            x+=1;
            $(".bill-item-amount span").html(x);
        });

        $(".amount-decrease").click(function(){
            if(!x<=0){
                x-=1;
                $(".bill-item-amount span").html(x);
            }
        }); 
```

这很好用，但是它更新了两个 span 元素的值。我想要的是捕捉单击元素的事件（我现在这样做）并增加相应跨度的跨度值。如何过滤掉使用 javascript 更新的跨度。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:10:13.763

类似的东西`$(this).parents('.bill-item').find('.bill-item-amount span')`应该选择正确的元素。
在您的回调内部`this`分配给`eventSource`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:09:23.457

您应该从单击的元素向上遍历 dom 树，直到到达`.bill-item`元素并向下到达`.bill-item-amount span`节点

```
$(".amount-increase").click(function(){
    var $span = $(this).parent().parent().find(".bill-item-amount span");
    var x = $span.html();
    x+=1;
    $span.html(x);
});

$(".amount-decrease").click(function(){
    var $span = $(this).parent().parent().find(".bill-item-amount span");
    var x = $span.html();
    if(!x<=0){
         x-=1;
        $span.html(x);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:14:59.107

嗨 dimal 更新您的代码：

```
$(".amount-increase").click(function(){
        x+=1;
        $(".bill-item-amount").html(x);
    });

    $(".amount-decrease").click(function(){
        if(!x<=0){
            x-=1;
            $(".bill-item-amount").html(x);
        }
    }); 
```

不要在选择器内添加跨度[它会更改整个跨度值]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T09:19:00.637

```
 $(".amount-increase").click(function(){
        x+=1;
        $("use ur increase span id here").html(x); //
    });

    $(".amount-decrease").click(function(){
        if(!x<=0){
            x-=1;
            $("use ur decrease span id here").html(x);
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T09:29:09.310

在每个函数中，选择器`$(".bill-item-amount span")`将找到`<span>`文档中的所有金额。您可以使用 jQuery 或纯 JavaScript*遍历 DOM*以找到正确的。`<span>`您似乎正在使用 jQuery 函数，所以我的回答也使用 jQuery。

下面的代码将这两个动作组合成一个函数，根据`<a>`点击的类名增加或减少数量。我还添加了一个`return false`，以便浏览器不会跟随锚点上的*href="#" 。*

```
$('.bill-amount-selection').on('click', 'a', function(){
    var change = this.className == 'amount-increase' ? 1 : -1
    var $amount = $(this).closest('.bill-item').find('.bill-item-amount span')
    var amount = parseInt($amount.html(), 10) + change
    $amount.html(amount < 0 ? 0 : amount)
    return false
}); 
```

的使用[`.on()`](http://api.jquery.com/on/)意味着需要 jQuery v1.7+。如有必要，我可以提供与较低 jQuery 版本兼容的功能。

# android - EditText：如何在editText中为所有文本加下划线

> ID：15897758
> 
> 赞同：0
> 
> 时间：2013-04-09T09:05:52.653
> 
> 标签：android, android-edittext, underline

我正在使用一些按钮处理editText：粗体、斜体和下划线。我用粗体和斜体取得了成功，但我不知道如何给文本加下划线。

我的目的是在输入editText时，按下下划线按钮，然后所有文本都加下划线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T23:29:40.513

看看我的[RichEditText](https://github.com/kemallette/RichEditText)库。它具有您想要的所有功能以及更多功能。

# ruby-on-rails - jquery-datatables-rails 引导样式

> ID：15897760
> 
> 赞同：1
> 
> 时间：2013-04-09T09:06:01.197
> 
> 标签：ruby-on-rails, twitter-bootstrap, datatables

在 Rails 中，我通过 jquery-datatables-rails gem 使用引导程序和数据表。然而，我似乎只得到了引导样式的一半。

```
gem 'jquery-datatables-rails', git: 'git://github.com/rweng/jquery-datatables-rails.git' 
```

应用程序.js

```
 //= require jquery
    //= require jquery_ujs
    //= require jquery.ui.core
    //= require jquery.ui.datepicker
    //= require twitter/bootstrap
    //= require dataTables/jquery.dataTables
    //= require dataTables/jquery.dataTables.bootstrap
    //= require dataTables/extras/TableTools
    //= require chosen-jquery
    //= require best_in_place
    //= require cocoon
    //= require_tree .

    $.extend( $.fn.dataTableExt.oStdClasses, {
      "sWrapper": "dataTables_wrapper form-inline"
    } ); 
```

应用程序.css

```
 *= require_self
 *= require jquery.ui.core
 *= require jquery.ui.datepicker
 *= require dataTables/jquery.dataTables.bootstrap
 *= require dataTables/extras/TableTools
 *= require dataTables/extras/TableTools_JUI
 *= require chosen
 *= require_tree .
 */ 
```

特定的咖啡脚本

```
jQuery ->
  $('#customers').dataTable
    sDom: "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>"
    sPaginationType: "bootstrap"
    bjQueryUI: true 
```

erb

```
<table id="customers" class="display" cellpadding="0" cellspacing="0" border="0" class="table table-bordered table-striped">  
  <thead>
    <tr>
      <th>etc. 
```

但是样式是下面显示的样式，而不是 dataTable 站点[http://www.datatables.net/media/blog/bootstrap/上显示的样式](http://www.datatables.net/media/blog/bootstrap/)

注意标题是错误的，条纹是紫色而不是灰色

![在此处输入图像描述](https://i.stack.imgur.com/Ms9xr.png)

关于我还需要做什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:58:27.830

这一切都归结为我对资产管道缺乏了解。一旦我明白了，更多的事情就会运作良好。

似乎我在开发中使用了预编译和压缩选项，因此 public/assets 目录中有 css 文件，这些文件覆盖了我使用的任何其他文件。

一旦我删除了该目录的内容并将我的 capistrano 部署配置为在生产环境中进行预编译，一切都运行良好。

资产管道当然很棒，但需要小心。

# mongodb - 停止索引后mongodb无法删除索引

> ID：15897765
> 
> 赞同：3
> 
> 时间：2013-04-09T09:06:08.787
> 
> 标签：mongodb, indexing, nosql

我不得不在 MongoDB 上运行一些索引，所以我做到了

```
 db.devices.ensureIndex({ "installed_packages" : 1 }) 
```

但是当它运行时，我发现它太大了，我没有时间，所以我停止了索引。

现在，我需要运行

```
 db.devices.reIndex() 
```

但它再次尝试对 installed_pa​​ckages 进行索引

我不再需要它了，当我尝试运行时

```
 db.devices.dropIndex({ "installed_packages" : 1 }) 
```

它说 ：

```
{
 "errmsg" : "can't find index with key:{ installed_packages: 1.0 }",
"ok" : 0
} 
```

如果我运行：

```
 db.devices.dropIndex("installed_packages_1") 
```

它说：

```
 { "errmsg" : "index not found", "ok" : 0 } 
```

我该怎么做才能放下它？

# android - 我正在尝试在 android 中创建一个应用程序，以通过 Web 服务将数据插入 sql server。

> ID：15897774
> 
> 赞同：1
> 
> 时间：2013-04-09T09:06:25.953
> 
> 标签：android, sql-server, web-services

大家好，我是 android 新手，我试图通过 web 服务从 android 将一些数据保存在 sql server 中。我在 android 和 web 服务中创建了一个示例应用程序。我收到一个异常，但我无法在 java 中解决异常。这是我正在使用的代码。

这是我正在使用的网络服务。它工作正常。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Data.SqlClient;
using System.Runtime.Serialization;

namespace Common.Services
{
    /// <summary>
    /// Summary description for AndroidService
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class AndroidService : System.Web.Services.WebService
    {

        [WebMethod]
        public string InsertUserDetails(UserDetails userInfo)
        {
            string strMessage;
            SqlConnection con = new SqlConnection("Data Source=106.205.11.220;Initial Catalog=mydb;User ID=usernm;Password=passwd");
            con.Open();
            SqlCommand cmd = new SqlCommand("insert INTO android_Sample (SampleName,SampleValue,AddDate) VALUES(@Name,@Value,dateadd(minute,330,getdate()))", con);
            cmd.Parameters.AddWithValue("@Name", userInfo.UserName);
            cmd.Parameters.AddWithValue("@Value", userInfo.UserAge);
            int result = cmd.ExecuteNonQuery();
            if (result == 1)
            {
                strMessage = userInfo.UserName + " Details inserted successfully";
            }
            else
            {
                strMessage = userInfo.UserName + " Details not inserted successfully";
            }
            con.Close();
            return strMessage;
        }

        public class UserDetails
        {
            string name = string.Empty;
            string age = string.Empty;

            [DataMember]
            public string UserName
            {
                get { return name; }
                set { name = value; }
            }

            [DataMember]
            public string UserAge
            {
                get { return age; }
                set { age = value; }
            }

        }
    }
} 
```

这是 MainActivity.java 文件。在这里我遇到了一个例外

```
 package tecs.example.wsd;

    import android.os.Bundle;
    import android.app.Activity;
    import android.view.Menu;
    import org.ksoap2.SoapEnvelope;
    import org.ksoap2.SoapFault;
    import org.ksoap2.serialization.PropertyInfo;
    import org.ksoap2.serialization.SoapObject;
    import org.ksoap2.serialization.SoapSerializationEnvelope;
    import org.ksoap2.transport.HttpTransportSE;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.Toast;

    public class MainActivity extends Activity 
    {
         /** Called when the activity is first created. */
            private static String SOAP_ACTION = "http://tempuri.org/InsertUserDetails";
            private static String NAMESPACE = "http://tempuri.org/";
            private static String METHOD_NAME = "InsertUserDetails";

            private static String URL = "http://192.168.1.137/common.ui/Services/AndroidService.asmx";

            Button btnSend;
            EditText txtName, txtVal;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            btnSend=(Button)findViewById(R.id.btnSend);
            txtName=(EditText)findViewById(R.id.txtText);
            txtVal=(EditText)findViewById(R.id.txtValue);

            btnSend.setOnClickListener(new View.OnClickListener() 
            {

                @Override
                public void onClick(View v) 
                {
                    //Initialize soap request + add parameters
                    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);        
                    PropertyInfo pi=new PropertyInfo();
                    pi.setName("UserName");
                    pi.setValue(txtName.getText().toString());
                    pi.setType(String.class);
                    request.addProperty(pi);
                    pi=new PropertyInfo();
                    pi.setName("UserAge");
                    pi.setValue(txtVal.getText().toString());
                    pi.setType(String.class);
                    request.addProperty(pi);
                    //Declare the version of the SOAP request
                    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

                    envelope.setOutputSoapObject(request);
                    envelope.dotNet = true;

                    try {

                        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                        //this is the actual part that will call the webservice
                        androidHttpTransport.call(SOAP_ACTION, envelope);
// Get the SoapResult from the envelope body.
                            SoapObject result = (SoapObject)envelope.bodyIn;

                            if(result != null)
                            {

                                Toast.makeText(getBaseContext(), result.getProperty(0).toString(), Toast.LENGTH_SHORT).show();
                                txtName.setText("");
                                txtVal.setText("");

                            }
                            else
                            {
                                Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
                            }
                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                    }
                });
            }

            @Override
            public boolean onCreateOptionsMenu(Menu menu) {
                // Inflate the menu; this adds items to the action bar if it is present.
                getMenuInflater().inflate(R.menu.main, menu);
                return true;
            }

        } 
```

我得到了这个例外

> java.lang.ClassCastException: org.ksoap2.SoapFault

在这条线上

```
// Get the SoapResult from the envelope body.
SoapObject result = (SoapObject)envelope.bodyIn; 
```

这是我的清单文件代码

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="tecs.example.wsd"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.INTERNET" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="tecs.example.wsd.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是我的布局文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/txtText"
        android:layout_width="fill_parent"
        android:layout_height="150dp"
        android:gravity="top"
        android:inputType="textMultiLine"
        android:hint="@string/Text_Hint" />

    <EditText 
        android:id="@+id/txtValue"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="number"
        android:hint="@string/Value_Hint" />

    <Button
        android:id="@+id/btnSend"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text="@string/btnSend_text" />

</LinearLayout> 
```

这是我的字符串值文件

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="app_name">WSD</string>
    <string name="action_settings">Settings</string>
    <string name="hello_world">Hello world!</string>
    <string name="Text_Hint">Enter Text</string>
    <string name="Value_Hint">Enter Value</string>
    <string name="btnSend_text">Send</string>
</resources> 
```

谁能帮我这个。怎么了？哪个是正确的方法？如何解决此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:17:06.097

我用于 .Net Web 服务的示例代码

```
 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(webRequest);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    androidHttpTransport.call(SOAP_ACTION + METHOD_NAME, envelope);
    Log.d("CheckLogin-SOAP ACTION", SOAP_ACTION + METHOD_NAME);
    SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
    Log.d("CheckLogin - Response", response.toString());

    status= Boolean.valueOf(response.toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:21:11.317

检查您的 jar 文件是否已`ksoap2-android-assembly-2.4-jar-with-dependencies.jar`添加`ksoap2-j2me-core-2.1.2.jar`到您的 android 项目中。

# arrays - 在 Matlab 中对 dicom 数据集进行排序

> ID：15897777
> 
> 赞同：0
> 
> 时间：2013-04-09T09:06:32.277
> 
> 标签：arrays, matlab, sorting, dicom

嗨，有来自多个 CT 扫描的大约 5000 张 2d 图像，需要对它们进行分类。数据集直接从 GE 工作站导入。

现在，这些图像一次以某种随机顺序排列成大约 10 个排序的图像。

我们如何才能对这些图像进行排序？如果您建议 dicominfo，请准确告诉我们要使用哪个参数。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:40:30.530

应该如何对 DICOM CT 图像进行排序最终取决于使用上下文，但根据经验，我建议您首先使用以下标签根据（患者）、研究和系列对图像进行分组：

```
(0010,0020)  Patient ID
(0020,000D)  Study Instance UID
(0020,000E)  Series Instance UID 
```

要对一个系列中的图像进行排序，您可以使用*实例编号 (0020,0013)*，但不能保证已设置此值，因为它是类型 2 属性。

另一种选择是使用*图像位置（患者）（0020,0032）*，这在 CT 图像中是强制性的。您需要检查*图像方向（患者）（0020,0037）*来决定如何按位置排序。往往CT图像方位为(1,0,0)、(0,1,0)，然后图像位置的Z(第三)分量可以作为排序的依据。

如果该系列还包含定位器图像，则必须从位置排序中排除该图像。

# android - 解码大型 base64 字符串

> ID：15897779
> 
> 赞同：5
> 
> 时间：2013-04-09T09:06:36.010
> 
> 标签：android, base64

我已经使用这个（下面的）代码从 SD 卡上的图片创建了一个 base64 字符串，它可以工作，但是当我尝试解码它时（甚至在下面）我得到一个`java.lang.outOfMemoryException`，大概是因为我没有将字符串拆分成合理的在我解码之前的大小，就像我在编码之前一样。

```
byte fileContent[] = new byte[3000];
StringBuilder b = new StringBuilder();
try{
     FileInputStream fin = new FileInputStream(sel);
     while(fin.read(fileContent) >= 0) {
    b.append(Base64.encodeToString(fileContent, Base64.DEFAULT));
     }
}catch(IOException e){

} 
```

上面的代码运行良好，但是当我尝试使用以下代码解码图像时出现问题；

```
byte[] imageAsBytes = Base64.decode(img.getBytes(), Base64.DEFAULT);
ImageView image = (ImageView)this.findViewById(R.id.ImageView);
image.setImageBitmap(
    BitmapFactory.decodeByteArray(imageAsBytes, 0, imageAsBytes.length)
); 
```

这种方法我也试过

```
byte[] b = Base64.decode(img, Base64.DEFAULT);
Bitmap bitmap = BitmapFactory.decodeByteArray(b, 0, b.length);
image.setImageBitmap(bitmap); 
```

现在我假设我需要将字符串拆分为像我的图像编码代码这样的部分，但我不知道如何去做。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T09:14:20.143

您需要在 AsyncTask 等后台线程中解码图像，或者您需要使用 BitmapFactory 降低图像质量。例子：

```
 BitmapFactory.Options options = new BitmapFactory.Options();

            options.inSampleSize = 2;
            options.inPurgeable=true;
        Bitmap bm = BitmapFactory.decodeFile("Your image exact loaction",options);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();  
        bm.compress(Bitmap.CompressFormat.JPEG, 100, baos); //bm is the bitmap object 

        byte[] b = baos.toByteArray(); 
        String encodedImage = Base64.encodeToString(b, Base64.DEFAULT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:14:23.477

你有两个问题

*   base64 编码需要更多空间。3 个字节转换为 4 个字符（因子 8/3）
*   您一次阅读了整个文件

以同样的方式，您的第一种方法解决了这个问题。所以就用那个版本

那样的话，你为什么使用**decodeByteArray**而不是**decodeFile**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T09:14:28.080

您可能会尝试解码为临时文件并从该文件创建图像。

对于 base64，它是每个字符 6 位，或 6x4=24 位=每 4 个字符 3 个字节。所以如果取base64的4个字符，就不会破坏对应的3个字节。也就是说，您可以将 base64 编码的数据拆分为 4 的倍数的字符索引。

# php - 当调用来自该特定表的查询时存储更新的时间戳

> ID：15897787
> 
> 赞同：-2
> 
> 时间：2013-04-09T09:06:52.170
> 
> 标签：php, mysql

我想存储访问/修改表的时间。我知道如何放置当前时间戳。

但是我们必须做些什么来存储更新的时间戳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:10:10.547

我不确定您到底在寻找什么，但下面的查询可能会有所帮助。您可以创建/更新您的表以具有“ [On Update Current_timestamp](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html) ”

```
CREATE TABLE t1 (
  ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:14:15.400

要在访问记录时更新时间戳，您可以对`select`记录使用存储过程，然后`update`使用时间戳字段。

@Suresh Kamrushi 提出了一种解决方案，用于在修改记录时更新时间戳。

# c# - 如何使用实体框架仅保存特定项目？

> ID：15897796
> 
> 赞同：2
> 
> 时间：2013-04-09T09:07:12.977
> 
> 标签：c#, asp.net, entity-framework

我在我的 Web 应用程序中使用 EF4。

目前，当我想保存特定项目时，我会更改其属性，然后调用`SaveChanges()`.

但是随后应用程序中的所有更改都已提交。

如何仅提交特定项目的更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:09:11.040

创建一个新上下文并将您的特定项目附加到这个新上下文。然后调用`SaveChanges()`新的上下文。

# php - 严格标准：非静态方法

> ID：15897797
> 
> 赞同：1
> 
> 时间：2013-04-09T09:07:14.567
> 
> 标签：php, methods, static, strict

我正在运行 Ubuntu + PHP 5.4 并得到这样的错误：

> 严格标准：不应静态调用非静态方法 XTemplate::I()，假设 $this 来自第 339 行 ...

该方法如下所示：

```
interface ITemplate
{
    public function I();
}

class XTemplate implements ITemplate
{
    public function I()
    {
             ...
    }
} 
```

并且此代码在 XAMPP 中的 Windows 7 上正常运行。我只找到了关闭 error_reporing 的建议，但我需要解决它。我是否需要安装一些模块才能打开 php.ini 中的一些其他设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:24:46.117

您收到错误消息是因为您正在静态调用该函数，而不是创建 XTemplate 类的实例。根据您的情况，将函数设为静态：

```
static public function I()
    {
             ...
    } 
```

或者先创建一个 XTemplate 的实例：

```
$myXtemplate = new XTemplate();
$myXtemplate->I(); 
```

我希望这回答了你的问题。

编辑： [这个页面](http://www.lornajane.net/posts/2010/declaring-static-methods-in-php)对你来说可能很有趣。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-30T06:59:35.303

我遇到了同样的错误，您只需要更改界面： `public function I();`更改为 `public static function I();`和创建实例时使用

```
public static function I(); 
```

我希望这会有所帮助。

# sql - VB.NET 如何将十进制格式应用于 Gridview 中的特定列？

> ID：15897801
> 
> 赞同：1
> 
> 时间：2013-04-09T09:07:32.543
> 
> 标签：sql, vb.net, gridview, floating-point, decimal

如何将十进制格式应用于 Gridview 中的特定列？

例如 83.7837837837838 正在从 SQL 中填充，我如何将其转换为 83.8。

我只想将它应用于一列，因为其他列是整数，所以这不是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:14:42.660

一种方法是使用该[`DataFormatString`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)属性。例如：

```
 <asp:GridView ID="GridView1" runat="server" 
    AutoGenerateColumns="False" 
    DataKeyNames="ProductID" DataSourceID="SqlDataSource1">
    <Columns>
        <asp:BoundField DataField="ListPrice" 
            HeaderText="ListPrice" 
            SortExpression="ListPrice"
            DataFormatString="{0:F1}" />
    </Columns>
</asp:GridView> 
```

你也可以[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)在你有更多控制权的地方使用：

```
protected void GridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
        // assuming you are using BoundFields and
        // the column which you want to format is the first
        // if you are using TemplateFields use e.Row.FindControl("ControlID") to find your controls
        var row = (DataRowView) e.Row.DataItem;
        decimal price = (decimal)row["ListPrice"];
        e.Row.Cells[0].Text = price.ToString("F1");
    }
} 
```

编辑：这里是 VB.NET 版本：

```
Protected Sub GridView1_RowDataBound(sender As [Object], e As GridViewRowEventArgs) Handles GridView1.RowDataBound
    If e.Row.RowType = DataControlRowType.DataRow Then
        ' assuming you are using BoundFields and                                                   '
        ' the column which you want to format is the first                                         '
        ' if you are using TemplateFields use e.Row.FindControl("ControlID") to find your controls '
        Dim row = DirectCast(e.Row.DataItem, DataRowView)
        Dim price As Decimal = CDec(row("ListPrice"))
        e.Row.Cells(0).Text = price.ToString("F1")
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:56:13.130

您只需要使用 **BoundField.DataFormatString**属性，为了解决您的问题并获得适当的知识，请查看此[Microsoft Link](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)

希望对你有效。

# go - 如何在 go 中有一个用于多个包的通用测试套件？

> ID：15897803
> 
> 赞同：12
> 
> 时间：2013-04-09T09:07:34.417
> 
> 标签：go

当我在编写一个接口时，通常很方便地将我的测试定义在与接口相同的包中，然后定义多个实现接口集的包，例如。

```
package/
package/impl/x <-- Implementation X
package/impl/y <-- Implementation Y 
```

有没有一种简单的方法可以在子包中运行相同的测试套件（在这种情况下，位于`package/*_test.go`）？

到目前为止我想出的最好的解决方案是添加一个测试包：

```
package/tests/ 
```

它实现了测试套件，并在每个实现中进行了测试以运行测试，但这有两个缺点：

1) 中的测试`package/tests`不在`_test.go`文件中，最终成为实际库的一部分，由`godoc`等记录。

2) 中的测试`package/tests`由自定义测试运行器运行，它必须基本上复制所有功能`go test`以扫描 go 测试并运行它们。

似乎是一个非常俗气的解决方案。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T15:14:09.850

我真的不喜欢使用单独的测试库的想法。如果您有一个接口并且您对每个接口都有通用测试，那么实现该接口的其他人可能也喜欢使用这些测试。

您可以创建一个`"package/test"`包含函数的包

```
// functions needed for each implementation to test it
type Tester struct {
    func New() package.Interface
    func (*package.Interface) Done()
    // whatever you need. Leave nil if function does not apply
}

func TestInterface(t *testing.T, tester Tester) 
```

请注意， 的签名与预期的`TestInterface`不匹配。`go test`现在，为每个包`package/impl/x`添加一个文件`generic_test.go`：

```
package x

import "testing"
import "package/test"

// run generic tests on this particular implementation
func TestInterface(t *testing.T) {
    test.TestInterface(t,test.Tester{New:New})
} 
```

`New()`您的实现的构造函数在哪里。这种方案的优点是

1.  你的测试对于任何实现你的接口的人来说都是可重用的，即使来自其他包
2.  很明显，您运行了通用测试套件
3.  测试用例是实现的地方，而不是另一个晦涩的地方
4.  如果一个实现需要特殊的初始化或类似的东西，代码可以很容易地调整
5.  它是`go test`兼容的（大加！）

当然，在某些情况下你需要一个更复杂的`TestInterface`函数，但这是基本思想。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:12:10.920

如果您共享一段代码以供不同包重用，那么是的，根据定义，它是一个库。即使仅用于从 *_test.go 文件进行测试。这与在 _test.go 文件中导入“fmt”的“测试”没有什么不同。并且有 godoc 记录的 API 是一个加号，而不是减号恕我直言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T07:51:48.887

也许有些东西在这里混淆了：如果包 a 只定义了一个接口，那么就没有代码可以测试，因为 Go 中的接口是免费的。

所以我假设你的接口中的方法包 a 有约束。例如在

```
interface Walker {
    Walk(step int)
    Tired() bool
} 
```

您的合同假设如果已步行超过 500 个步骤，则 Tired 返回 true（否则为 false），并且您的测试代码会检查这些依赖关系（或假设、合同、不变量，无论您如何命名）。

如果是这种情况，我将提供（在包 a 中）一个导出函数

```
func TestWalkerContract(w Walker) error {
    w.Walk(100)
    if w.Tired() { return errors.New("Tired after 100 steps") }
    w.Walk(450)
    if !w.Tired() { return errors.New("Not tired after 100+450 steps") }
} 
```

它正确地记录了合同，并且可以由具有实现 walker 的类型的包 b 和 c 使用，以测试它们在 b_test.go 和 c_test.go 中的实现。恕我直言，这些函数（如 TestWalkerContract）由 godoc 显示是完全可以的。

PS 比 Walk and Tired 更常见的可能是错误状态，该错误状态会一直保留并报告，直到清除/重置。

# pandas - 按列量向 Pandas 读取可变的列和行结构

> ID：15897805
> 
> 赞同：1
> 
> 时间：2013-04-09T09:07:39.450
> 
> 标签：pandas

我需要从一个带有空格分隔值和取决于列数的行结构的大文件创建一个 Pandas DataFrame。

原始数据如下所示：

```
2008231.0 4891866.0 383842.0 2036693.0 4924388.0 375170.0 
```

在一行或多行上，换行符被忽略。

如果列数为三，则最终结果如下所示：

```
[(u'2008231.0', u'4891866.0', u'383842.0'),
(u'2036693.0', u'4924388.0', u'375170.0')] 
```

将文件拆分为行取决于文件元部分中规定的列数。

目前我将文件拆分为一个大列表并将其拆分为行：

```
def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

（代码来自 itertools 示例）

问题是，我最终在内存中有多个数据副本。对于 500MB 以上的文件，这会很快耗尽内存，而且 Pandas 在读取具有大型 MultiIndex 的大型列表时会遇到一些麻烦。

如何对此类数据使用 Pandas 文件读取功能（read_csv、read_table、read_fwf）？

或者有没有其他方法可以在没有辅助数据结构的情况下将数据读入 Pandas？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:41:20.090

虽然可以创建一个自定义的类文件对象，但与正常使用相比，这将非常慢`pd.read_table`：

```
import pandas as pd
import re

filename = 'raw_data.csv'
class FileLike(file):
    """ Modeled after FileWrapper
    http://stackoverflow.com/a/14279543/190597 (Thorsten Kranz)
    """
    def __init__(self, *args):
        super(FileLike, self).__init__(*args)
        self.buffer = []
    def next(self):
        if not self.buffer:
            line = super(FileLike, self).next()
            self.buffer = re.findall(r'(\S+\s+\S+\s+\S+)', line)
        if self.buffer:
            line = self.buffer.pop()
            return line

with FileLike(filename, 'r') as f:
    df = pd.read_table(f, header=None, delimiter='\s+')
    print(len(df)) 
```

当我尝试`FileLike`在 5.8M 文件（由 200000 行组成）上使用时，上面的代码需要 3.9 秒才能运行。

如果我改为预处理数据（将每行分成 2 行并将结果写入磁盘）：

```
import fileinput
import sys
import re

filename = 'raw_data.csv'
for line in fileinput.input([filename], inplace = True, backup='.bak'):
    for part in re.findall(r'(\S+\s+\S+\s+\S+)', line):
        print(part) 
```

那么您当然可以使用以下方法将数据正常加载到 Pandas 中`pd.read_table`：

```
with open(filename, 'r') as f:
    df = pd.read_table(f, header=None, delimiter='\s+')
    print(len(df)) 
```

重写文件所需的时间约为 0.6 秒，而现在加载 DataFrame 需要约 0.7 秒。

因此，看来您最好先将数据重写到磁盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:29:55.253

我认为没有办法用与列相同的分隔符来分隔行。

解决此问题的一种方法是[`reshape`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.reshape.html)（这很可能是副本而不是视图，以保持数据连续）在使用以下命令创建系列之后[`read_csv`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.io.parsers.read_csv.html)：

```
s = pd.read_csv(file_name, lineterminator=' ', header=None)
df = pd.DataFrame(s.values.reshape(len(s)/n, n)) 
```

在您的示例中：

```
In [1]: s = pd.read_csv('raw_data.csv', lineterminator=' ', header=None, squeeze=True)

In [2]: s
Out[2]: 
0    2008231
1    4891866
2     383842
3    2036693
4    4924388
5     375170
Name: 0, dtype: float64

In [3]: pd.DataFrame(s.values.reshape(len(s)/3, 3))
Out[3]: 
         0        1       2
0  2008231  4891866  383842
1  2036693  4924388  375170 
```

# c++ - 衡量线程迁移的成本？

> ID：15897813
> 
> 赞同：1
> 
> 时间：2013-04-09T09:08:14.823
> 
> 标签：c++, multithreading, migration

信息：

1.  我正在用 C/C++ 编码；
2.  我有一个多线程程序，我想优化它，即减少每个函数消耗的cpu时间（由'clock_gettime'指定'CLOCK_THREAD_CPUTIME_ID'计算）；
3.  我的猜测是，通过使用“pthread_setaffinity_np”将每个线程绑定到其特定的 CPU，它可能符合我的目的，即避免线程迁移导致的成本；
4.  初步测试表明我的猜测似乎是正确的。

问题：

1.  线程迁移的成本是多少？将线程绑定到 CPU 真的有用吗？
2.  是否有可能知道在进程执行期间发生了多少次线程迁移？如果可能的话，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T09:29:12.027

> 线程迁移的成本是多少？

它增加了缓存未命中的可能性；迁移后，它可能会访问不同的缓存，其中不包含其最近使用的数据。这个成本多少取决于它会利用多少缓存。

> 将线程绑定到 CPU 真的有用吗？

在某些情况下，它可以提供帮助；在其他情况下，它会损害性能。例如，绑定到同一个内核的线程必须相互等待，而未绑定的线程可以立即在任何可用内核上调度。如果您真的需要这种级别的性能调整，那么您需要测量效果。

> 是否有可能知道在进程执行期间发生了多少次线程迁移？如果可能的话，怎么做？

它取决于平台。在 Linux 上，您可以在`/proc/<pid>/sched`

# javascript - jQuery从范围内选择文本

> ID：15897817
> 
> 赞同：0
> 
> 时间：2013-04-09T09:08:28.333
> 
> 标签：javascript, jquery, jquery-selectors

我创建了一个动态列表，并且需要能够在单击时选择两个跨度标签中保存的数据。到目前为止，我的代码是：

```
var app_data="<li class='auto' 
    data-short='"+this['dish_short']+"' 
    data-desc='"+this['dish_desc']+"' 
    data-dish_id='"+this['dish_id']+"'>
         <span class='m_name'>"+this['dish_name']+"</span> - £<span 
         class='m_price'>"+this['dish_price']+"</span>
</li>"; 
```

请注意，代码中的换行符是为了使其更具可读性，而不是全部在一行上。

我想做的是从每个跨度类中选择文本，尽管到目前为止，下面的代码正在选择所有文本，例如。菜名和菜价。

代码：

```
 $('li').click(function(){
    //alert($('li', this).data('short'));
    var m_name=$(this, 'span .m_name').text();
    console.log(m_name);
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:09:31.353

上下文部分作为第二个参数（即`$(selector, context)`），以及将`m_name`类设置为`<span>`元素，因此选择器中不应有任何空格：

```
var m_name = $("span.m_name", this).text(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T09:10:21.787

对于**创建的动态列表，**用于`.on`评估点击或其他事件。

**例子**

```
$(document).on('click','li',function(){
   //code here
}); 
```

# git - 对于包含大型二进制/普通文本文件组合的存储库，如何加快文本内容的操作？

> ID：15897818
> 
> 赞同：1
> 
> 时间：2013-04-09T09:08:32.573
> 
> 标签：git, large-files, git-log

虽然单个存储库并非完全无法管理，但对于仅涉及文本内容（即`git log -Gword`）的操作来说，这是一种痛苦，以至于我愿意考虑同时拥有一个“纯文本”存储库和“一切”存储库. 有谁知道如何实现这一目标？可能有一些高级的 git 操作？

我也对允许我在单个存储库中随意排除二进制内容（可能超过一定大小的对象）以加快操作时间的想法持开放态度，即使我发现这是一种更遥远的可能性。

# liferay - Liferay Drools 样本错误

> ID：15897820
> 
> 赞同：0
> 
> 时间：2013-04-09T09:08:37.610
> 
> 标签：liferay, integration, tomcat7, liferay-6, drools

我正在尝试测试来自 git-hub 的[示例 drool portlet](https://github.com/liferay/liferay-plugins/tree/master/portlets/sample-drools-portlet/docroot)，并开始学习如何使用集成在 Liferay 中的 Drools portlet。

我正在使用 Liferay 6.1、Tomcat 7。

我的代码有错误，无法识别这个库..

```
<%@ page import="com.liferay.portal.kernel.util.ClassResolverUtil" %> 
```

我多次更改此行以避免使用此导入..

```
MethodKey methodKey = new MethodKey(ClassResolverUtil.resolveByPortalClassLoader("com.liferay.portal.security.permission.ResourceActionsUtil"), "getModelResource", PageContext.class, String.class); 
```

但我总是得到同样的错误：

`generator-rules-portlet-6.1.20.1.war`不支持此版本的 Liferay。

我能做些什么来解决这个错误？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T11:53:51.500

您已经从 github 的“master”分支获取了 portlet。主分支是 6.2 Milestone。将分支切换到“6.1.x”并下载portlet，您将不会收到此错误问题。

问候，

拉姆库马尔。

# android - 表格Android上的不同对齐方式

> ID：15897828
> 
> 赞同：0
> 
> 时间：2013-04-09T09:09:10.050
> 
> 标签：android

我有一个带有这个布局 xml 的自定义列表视图

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

 <TableLayout
     android:id="@+id/tableLayout1"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:layout_gravity="center_horizontal" >

     <TableRow android:gravity="center" >

          <ImageView
             android:id="@+id/image"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_gravity="left"
             android:gravity="left"/>

         <TextView
             android:id="@+id/headline"
             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_gravity="center|center_horizontal"
             android:gravity="center"/>

     </TableRow>
 </TableLayout> 
```

它工作正常，但我希望图像按钮在左侧对齐，文本视图在中心对齐。

搜索了很多我发现在 tablerow 上使用重力我可以对齐 tablerow 内容，但是 imageview 重力和 textview 重力似乎没有效果

这种布局使它看起来像

```
[    Image text    ] 
```

我希望它看起来像

```
[Image   text      ] 
```

所以图像左对齐，textview居中，但我不想使用固定分隔，因为文本是动态加载的，我不知道它的长度

有人能帮我吗？

对不起，我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:14:46.897

使用这个 xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

 <TableLayout
     android:id="@+id/tableLayout1"
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:layout_gravity="center_horizontal" >

     <TableRow  >

          <ImageView
             android:id="@+id/image"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_gravity="left"
             android:gravity="left"
             android:src="@drawable/ic_launcher"/>

         <TextView
             android:id="@+id/headline"
             android:layout_width="0dp"
             android:layout_weight="1"
             android:layout_height="wrap_content"
             android:layout_gravity="center|center_horizontal"
             android:gravity="center"
             android:text="Text"/>

     </TableRow>
 </TableLayout>

</LinearLayout> 
```

# f# - 有没有办法默认使用 JavaScript 属性？

> ID：15897832
> 
> 赞同：5
> 
> 时间：2013-04-09T09:09:13.237
> 
> 标签：f#, websharper

我只想以某种方式说“我希望这个项目中的所有方法都使用[JavaScript]”手动注释每个方法都很烦人

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T12:40:49.803

F# 3 允许您使用[ReflectedDefinition](http://msdn.microsoft.com/en-us/library/ee353643.aspx)属性（在 WebSharper 中也称为 [JavaScript]）标记模块，该属性标记下面的所有方法。

查看[有关 F# 3.0 语言功能的更多](http://blogs.msdn.com/b/fsharpteam/archive/2012/07/19/more-about-fsharp-3.0-language-features.aspx)信息：

> （说到不常见的属性，在 F# 3.0 中，[< ReflectedDefinition >] 属性现在可以放在模块和类型定义上，作为将其应用于模块/类型的每个单独成员的简写方式。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T13:00:53.077

我认为 Phil 的答案是要走的路——当你可以标记整个模块或类型时，它不会增加太多噪音，它还允许你区分 WebSharper 中的服务器端和客户端代码。

仅作记录，F# 编译器是开源的，因此某人（认为此问题很重要）可以轻松创建分支，该分支将添加一个额外的命令行属性来覆盖该设置。我认为这只是添加参数然后在中设置`reflect`标志的默认值的问题`check.fs`（这里[是 GitHub 上的源代码](https://github.com/fsharp/fsharp/blob/master/src/fsharp/check.fs#L1483)）。

目前，主要 F# 存储库不接受添加新功能的贡献（请参阅[此处的讨论](https://github.com/fsharp/fsharp/pull/125)），但这无疑是向 F# 团队发送功能请求的好方法 :-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T13:22:28.527

如果您使用 JavaScript 属性注释所有代码，WebSharper 编译器将尝试将所有内容转换为 JavaScript。WebSharper 开发中的一条经验法则是将服务器端代码和客户端代码分开，因此如果您的目标是 .NET 4.5，您可以简单地注释包含客户端代码的模块/类，而不是每个函数/成员。

```
namespace Website

open IntelliFactory.WebSharper

module HelloWorld =

    module private Server =

        [<Rpc>]
        let main() = async { return "World" }

    [<JavaScript>] // or [<ReflectedDefinition>]
    module Client =

        open IntelliFactory.WebSharper.Html

        let sayHello() =
            async {
                let! world = Server.main()
                JavaScript.Alert <| "Hello " + world
            }

        let btn =
            Button [Text "Click Me"]
            |>! OnClick (fun _ _ ->
                async {
                    do! sayHello()
                } |> Async.Start)

        let main() = Div [btn]

    type Control() =

        inherit Web.Control()

        [<JavaScript>]
        override __.Body = Client.main() :> _ 
```

# xslt - 如何使用 xsl:if 测试不同路径内的变量

> ID：15897837
> 
> 赞同：0
> 
> 时间：2013-04-09T09:09:22.667
> 
> 标签：xslt

我在路径中有一个变量 = 1，我可以通过该级别的模板检查它：

```
<xsl:if test="myVariable = value">
    do this 
```

我需要在不应用该模板的情况下检查该变量是否有另一条路径。我可以在 xsl:if 语句中更改一些内容吗？

请问你能帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T12:04:29.893

如果您在节点内声明变量，则它仅在该节点内可用。因此，要使用您的示例，它不能从节点“x”或“x/y”获得，只能从“x/y/z”获得。如果你想在多个层次上使用它，在更高的节点上声明它，或者让它成为一个全局变量。

# java - 根据格式化字符串格式化数字字符串

> ID：15897839
> 
> 赞同：0
> 
> 时间：2013-04-09T09:09:23.567
> 
> 标签：java, format

我有一个表示数字的字符串（例如 1234.56）和一个表示格式的字符串（例如 1,234.56 或 1 234.56 或 1234,56...），并且需要根据格式字符串格式化数字字符串。两个字符串都给出。

一些代码可以更好地理解：

```
public static void main(String[] args) {
    String number = "1000.0";
    formatNumber(number, "1,234.56"); //Should be 1,000.00
    formatNumber(number, "1 234.56"); //Should be 1 000.00
    formatNumber(number, "1234,56"); //Should be 1000,00
}

public static String formatNumber(String number, String format) {
    return ???
} 
```

实现这一目标的最佳方法是什么？

谢谢保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:14:59.340

这三行应该可以。

```
String pattern = format.replaceAll("\\d", "#");
DecimalFormat myFormatter = new DecimalFormat(pattern);
return myFormatter.format(value); 
```

我是用心写的，如果遇到问题请回信

# java - Java 抱怨在 switch 的默认情况下未初始化 final 字段

> ID：15897840
> 
> 赞同：1
> 
> 时间：2013-04-09T09:09:25.097
> 
> 标签：java

我想以不同的方式初始化最终字段。因此，我创建了一个枚举类型并对其进行了切换。

```
 public enum TYPE {
        A,
        B,
    } 
```

我还使用断言向开关添加了默认情况，以警告我的程序员伙伴，以防他们添加新的枚举常量并忘记更新开关。

```
 default:
            assert false : "missing TYPE detected"; 
```

然而，Java 检测到我的论点中的缺陷并抱怨空白字段可能尚未初始化。我应该如何处理这种情况？

```
public class SwitchExample
{
    public enum TYPE {
        A,
        B,
    }

    private final int foo;

    public SwitchExample(TYPE t)
    {
        switch (t) {
        case A:
            foo = 11;
            break;

        case B:
            foo = 22;
            break;

        default:
            assert false : "missing TYPE detected";
        }

        // The blank final field foo may not have been initialized
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:13:34.203

而不是`assert false : "missing TYPE detected";`你可以抛出一个`IllegalArgumentException("missing TYPE detected")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:10:55.397

当您重新分配 foo 参考

```
foo = 11; 
```

您不能将其声明为最终的

```
private final int foo; 
```

见[http://javarevisited.blogspot.fr/2011/12/final-variable-method-class-java.html](http://javarevisited.blogspot.fr/2011/12/final-variable-method-class-java.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:11:30.247

您可以在您之后更改代码，`default`如下所示：

```
assert (foo = 0) > 0 : "missing TYPE detected"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T09:14:42.460

如果使用`final`关键字，则必须在 switch 语句中的所有情况下设置其值。为了解决这个问题，只需将您设置`foo`为一个您知道意味着发生错误的值，例如`-1`

# java - 两个日期之间的比较未显示正确结果

> ID：15897844
> 
> 赞同：1
> 
> 时间：2013-04-09T09:09:33.437
> 
> 标签：java

在我的android应用程序中，我需要找出哪个日期更大或更小。我使用了以下代码。此代码运行良好，但有时会显示错误的输出。请帮助

```
 String strDate1 = "3/9/2013";   
    String strDate2 = "4/6/2013";   

    SimpleDateFormat sdf = new SimpleDateFormat( "m/d/yyyy" );   
    java.util.Date d1;
    java.util.Date d2;
    try {
        d1 = sdf.parse( strDate1 );
        d2 = sdf.parse( strDate2 );   
        if  ( d1.after(d2))  
        {   
              System.out.println( "d1 is after d2" ); 
        }   
        else if  ( d1.before(d2) )
        {   

           System.out.println( "d1 is before d2" ); 
        }   
        else  
        {   
           System.out.println( "d1 is equal to d2" );   
        }  

    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

对于上面的代码，我得到的输出是“d1 在 d2 之后”。但真正的事情是“d1 在 d2 之前”。如果我在这方面犯了任何错误，请提出建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T09:10:23.367

您使用了错误的月份格式。

```
SimpleDateFormat sdf = new SimpleDateFormat( "M/d/yyyy" ); 
```

`m`是小时的分钟数 `M`是年的月数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:11:26.270

尝试将您的日期格式更改为以下

```
SimpleDateFormat sdf = new SimpleDateFormat( "M/d/yyyy" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:13:07.960

您需要使用`M`由`m`.

```
SimpleDateFormat sdf = new SimpleDateFormat( "M/d/yyyy" ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T09:14:41.083

[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)这显示小 m 代表分钟，大写 M 代表月份，因此请尝试更改它。

# c# - 如何以编程方式更改屏幕分辨率

> ID：15897847
> 
> 赞同：5
> 
> 时间：2013-04-09T09:09:52.657
> 
> 标签：c#, vb.net, screen-resolution

当我的应用程序加载系统屏幕分辨率需要更改为 1024 * 768。当它关闭时，它会更改为原始屏幕解决方案。

如何做到这一点？有什么可行的解决方案吗？基本上我正在使用 vb.net 无论如何我欢迎来自 C# 的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:12:01.747

更改分辨率更加困难。

此 CodeProject 描述了如何在 C# [http://www.codeproject.com/KB/dotnet/changeing-display-settings.aspx](http://www.codeproject.com/KB/dotnet/changing-display-settings.aspx)中执行此操作，您可以使用它

以下网站可帮助您将 C# 代码翻译成 VB [http://www.developerfusion.com/tools/convert/csharp-to-vb/](http://www.developerfusion.com/tools/convert/csharp-to-vb/)

编辑

这是样本

```
Public Class Form1

  Private Resolution As New ResolutionChanger
  Private OldWidth As UInteger
  Private OldHeight As UInteger

  Private Sub Form1_FormClosing(ByVal sender As Object, ByVal e As System.Windows.Forms.FormClosingEventArgs) Handles Me.FormClosing
    Resolution.SetResolution(OldWidth, OldHeight)
  End Sub

  Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    OldHeight = CUInt(Screen.PrimaryScreen.Bounds.Height)
    OldWidth = CUInt(Screen.PrimaryScreen.Bounds.Width)
    Select Case Resolution.SetResolution(800, 600)
      Case ResolutionChanger.ChangeResult.Success
        MsgBox("The Resolution was changed", MsgBoxStyle.OkOnly)
      Case ResolutionChanger.ChangeResult.Restart
        MsgBox("Restart your system to activate the new resolution setting", MsgBoxStyle.OkOnly)
      Case ResolutionChanger.ChangeResult.Fail
        MsgBox("The resolution couldn't be changed", MsgBoxStyle.OkOnly)
      Case ResolutionChanger.ChangeResult.ResolutionNotSupported
        MsgBox("The requested resolution is not supported by your system", MsgBoxStyle.OkOnly)
    End Select
  End Sub

End Class
'
'========== RESOLUTION CHANGER ===============================
'
'
Class ResolutionChanger
  Public Enum ChangeResult
    Success
    Restart
    Fail
    ResolutionNotSupported
  End Enum

  Public Function SetResolution(ByVal Width As UInteger, ByVal Height As UInteger) As ChangeResult
    Dim DevMode As New DEVMODEA
    If User_32.EnumDisplaySettingsA(Screen.PrimaryScreen.DeviceName, ENUM_CURRENT_SETTINGS, DevMode) Then
      DevMode.dmPelsWidth = Width
      DevMode.dmPelsHeight = Height
      Dim ReturnValue = User_32.ChangeDisplaySettingsA(DevMode, CDS_TEST)
      If ReturnValue = DISP_CHANGE_FAILED Then
        'The Requested resolution is not supported by the system
        Return ChangeResult.ResolutionNotSupported
      Else
        ReturnValue = User_32.ChangeDisplaySettingsA(DevMode, CDS_UPDATEREGISTRY)
        Select Case ReturnValue
          Case DISP_CHANGE_RESTART
            'The resolution cannot be change dynamically on every system
            'Windows 9x and some Laptop (XP,Vista,Windows7) have to reboot.
            Return ChangeResult.Restart
          Case DISP_CHANGE_SUCCESSFUL
            'Resolution was changed
            'This is not an assurance that the new resolution will render 
            'proprely on every system. It only means that the registery was
            'updated succesfuly and that the driver have not return any
            'error
            Return ChangeResult.Success
          Case Else
            'An error has caused the resolution not to be changed
            Return ChangeResult.Fail
        End Select
      End If
    End If
  End Function
  '
  '============Region Interop ==============================================
  '
  '
  Private Const ENUM_CURRENT_SETTINGS As Integer = -1
  Private Const CDS_UPDATEREGISTRY As Integer = 1
  Private Const CDS_TEST As Integer = 2
  Private Const DISP_CHANGE_SUCCESSFUL As Integer = 0
  Private Const DISP_CHANGE_RESTART As Integer = 1
  Private Const DISP_CHANGE_FAILED As Integer = -1

  <System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Sequential)> _
  Public Structure DEVMODEA
    'BYTE[32]
    <System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.ByValArray, SizeConst:=32, ArraySubType:=System.Runtime.InteropServices.UnmanagedType.I1)> _
    Public dmDeviceName() As Byte
    Public dmSpecVersion As UShort
    Public dmDriverVersion As UShort
    Public dmSize As UShort
    Public dmDriverExtra As UShort
    Public dmFields As UInteger
    Public Union1 As Anonymous_2338c0fc_03a3_4514_b536_fb9bb5df14c5
    Public dmColor As Short
    Public dmDuplex As Short
    Public dmYResolution As Short
    Public dmTTOption As Short
    Public dmCollate As Short
    <System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.ByValArray, SizeConst:=32, ArraySubType:=System.Runtime.InteropServices.UnmanagedType.I1)> _
    Public dmFormName() As Byte
    Public dmLogPixels As UShort
    Public dmBitsPerPel As UInteger
    Public dmPelsWidth As UInteger
    Public dmPelsHeight As UInteger
    Public Union2 As Anonymous_7557e508_845c_4777_b9f2_a1496c1c7b21
    Public dmDisplayFrequency As UInteger
    Public dmICMMethod As UInteger
    Public dmICMIntent As UInteger
    Public dmMediaType As UInteger
    Public dmDitherType As UInteger
    Public dmReserved1 As UInteger
    Public dmReserved2 As UInteger
    Public dmPanningWidth As UInteger
    Public dmPanningHeight As UInteger
  End Structure

  <System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Explicit)> _
  Public Structure Anonymous_2338c0fc_03a3_4514_b536_fb9bb5df14c5
    <System.Runtime.InteropServices.FieldOffsetAttribute(0)> _
    Public Struct1 As Anonymous_a67d541d_da92_408e_8852_89977e56cead
    <System.Runtime.InteropServices.FieldOffsetAttribute(0)> _
    Public Struct2 As Anonymous_d973d7e7_ad4c_4155_86fe_6d2b51ab5f04
  End Structure

  <System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Explicit)> _
  Public Structure Anonymous_7557e508_845c_4777_b9f2_a1496c1c7b21
    <System.Runtime.InteropServices.FieldOffsetAttribute(0)> _
    Public dmDisplayFlags As UInteger
    <System.Runtime.InteropServices.FieldOffsetAttribute(0)> _
    Public dmNup As UInteger
  End Structure

  <System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Sequential)> _
  Public Structure Anonymous_a67d541d_da92_408e_8852_89977e56cead
    Public dmOrientation As Short
    Public dmPaperSize As Short
    Public dmPaperLength As Short
    Public dmPaperWidth As Short
    Public dmScale As Short
    Public dmCopies As Short
    Public dmDefaultSource As Short
    Public dmPrintQuality As Short
  End Structure

  <System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Sequential)> _
  Public Structure Anonymous_d973d7e7_ad4c_4155_86fe_6d2b51ab5f04
    Public dmPosition As POINTL
    Public dmDisplayOrientation As UInteger
    Public dmDisplayFixedOutput As UInteger
  End Structure

  <System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Sequential)> _
  Public Structure POINTL
    Public x As Integer
    Public y As Integer
  End Structure

  Partial Public Class User_32
    <System.Runtime.InteropServices.DllImportAttribute("user32.dll", EntryPoint:="EnumDisplaySettingsA")> _
    Public Shared Function EnumDisplaySettingsA(<System.Runtime.InteropServices.InAttribute(), System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.LPStr)> ByVal lpszDeviceName As String, ByVal iModeNum As Integer, <System.Runtime.InteropServices.OutAttribute()> ByRef lpDevMode As DEVMODEA) As <System.Runtime.InteropServices.MarshalAsAttribute(System.Runtime.InteropServices.UnmanagedType.Bool)> Boolean
    End Function

    <System.Runtime.InteropServices.DllImportAttribute("user32.dll", EntryPoint:="ChangeDisplaySettingsA")> _
    Public Shared Function ChangeDisplaySettingsA(<System.Runtime.InteropServices.OutAttribute()> ByRef lpDevMode As DEVMODEA, ByVal dwFlags As UInteger) As Integer
    End Function
  End Class

End Class 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T09:14:51.840

虽然我讨厌一个改变我的分辨率并立即扔掉它的桌面程序

但是对于编码，您可以使用类似这样的东西

此 API 函数可让您更改显示设置：

```
 [DllImport("user32.dll")]
        static extern int ChangeDisplaySettings(
        ref DEVMODE devMode, int flags); 
```

[这篇](http://www.codeproject.com/KB/cs/csdynamicscrres.aspx?df=100&forumid=38736&select=800137)文章解释了如何使用这个功能

# c++ - C++ FFMPEG 不写入 AVCC 框信息

> ID：15897849
> 
> 赞同：8
> 
> 时间：2013-04-09T09:10:01.013
> 
> 标签：c++, video, ffmpeg, h.264, mp4

我正在尝试使用 C++ 中的 FFMPEG API 将原始 H264 编码到 mp4 容器中。一切正常，但是 AVCC 框为空，并返回错误：[iso file] Box "avcC" size 8 invalid

如果我在输出文件上使用命令行工具：

> ffmpeg -i output.mp4 -vcodec 复制fixed.mp4

输出文件有效，并且 AVCC 填充了所需的信息。我不知道为什么这个命令行参数有效，但我无法使用 API 产生相同的结果。

我在 C++ 代码中所做的事情（也在函数调用之间做一些事情）：

```
outputFormat_ = av_guess_format( "mp4", NULL, NULL ); //AV_CODEC_H264
formatContext_ = avformat_alloc_context();
formatContext_->oformat = outputFormat_;
...
AVDictionary *opts = NULL;
char tmpstr[50]; sprintf(tmpstr, "%i", muxRate * KILOBYTESTOBYTES);
av_dict_set(&opts, "muxrate", tmpstr, 0);
avformat_write_header( formatContext_, &opts);
av_write_trailer(formatContext_); 
```

这个输出是正确的，除了它缺少 AVCC 信息。手动添加（并相应地修复盒子长度）让我可以很好地播放视频。知道为什么 API 调用没有生成 AVCC 信息吗？

作为参考，这是修复前 mp4 中的字符：

> .avc1.......................€.8.H....H........ .............................ÿÿ....avcC....stts

之后：

> avc1..............€.8.H......H....... .........................ÿÿ...!avcC.B€(ÿá..gB€(Ú.à.—•. ..hÎ<€..stts

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-02-05T19:15:02.870

我的 MP4 文件也有空 AVCC 盒子的问题。原来我`CODEC_FLAG_GLOBAL_HEADER`在`AVCodecContext`调用. *_* `avcodec_open2`该标志应在调用*之前*`avcodec_open2`设置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T01:40:58.437

解决了。所需的数据是 AVCC 编解码器的 SPS 和 PPS 组件。由于原始 H264 流采用附件 b 格式，因此它出现在每个 I 帧的开头，在 NAL 单元中以`0x00 0x00 0x00 0x01 0x67`和开头`0x00 0x00 0x00 0x01 0x68`。因此，需要将该信息复制到 AVStream 编解码器的 extradata 字段中：

```
codecContext = stream->codec;

...

// videoSeqHeader contains the PPS and SPS NAL unit data
codecContext->extradata = (uint8_t*)malloc( sizeof(uint8_t) * videoSeqHeader_.size() );

for( unsigned int index = 0; index < videoSeqHeader_.size(); index++ )
{
    codecContext->extradata[index] = videoSeqHeader_[index];
}

codecContext->extradata_size = (int)videoSeqHeader_.size(); 
```

这导致 AVCC 框被正确填充。

# sql - SQL 中到当前期间的 YTD 预算表

> ID：15897850
> 
> 赞同：0
> 
> 时间：2013-04-09T09:10:01.190
> 
> 标签：sql, sql-server, finance

我有一个格式如下的表（伪代码）：

```
CREATE TABLE [GLM_MASTER__BUDGET](
    [Budget_Year],
    [Budget_Type],
    [Account],
    [Period_1_Budget],
    [Period_2_Budget],
    [Period_3_Budget],
    [Period_4_Budget],
    [Period_5_Budget],
    [Period_6_Budget],
    [Period_7_Budget],
    [Period_8_Budget],
    [Period_9_Budget],
    [Period_10_Budget],
    [Period_11_Budget],
    [Period_12_Budget]
    ) 
```

我需要能够用一个 int 来查询当前期间的这个，比如 6

这应该返回从 1 到指定数字的所有周期的组合值。

所以我最终会得到这样的输出：

```
Budget_Year, Budget Type, Account, (Sum of all periods from 1 to the period specified) as Amount 
```

我正在使用 MS SQL 服务器，因此可以在顶部执行以下操作：

```
DECLARE @current_period INT = 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:17:05.267

如果您有机会重新设计此表，您不妨现在考虑一下。

您可以使用以下内容：

```
DECLARE @current_period INT = 6 

SELECT 
Budget_Year, Budget Type, Account,
CASE WHEN @current_period >= 1 THEN [Period_1_Budget] ELSE 0 END +
CASE WHEN @current_period >= 2 THEN [Period_2_Budget] ELSE 0 END +
CASE WHEN @current_period >= 3 THEN [Period_3_Budget] ELSE 0 END +
CASE WHEN @current_period >= 4 THEN [Period_4_Budget] ELSE 0 END +
.....
..
CASE WHEN @current_period >= 12 THEN [Period_12_Budget] ELSE 0 END As Amount
FROM [GLM_MASTER__BUDGET] 
```

此外，从您的描述中也不清楚您是否需要 SUM 和 GROUP BY，所以我将其省略了。

# c++ - 如何使用跨平台方法确定驱动器类型

> ID：15897853
> 
> 赞同：5
> 
> 时间：2013-04-09T09:10:09.397
> 
> 标签：c++

我正在编写一个跨平台应用程序，它应该在某些事件上创建文件，现在我有一个问题，如果我的目标位于可移动磁盘或网络驱动器上，我想首先在本地硬盘驱动器上的临时文件夹中创建文件，然后将其移动到目标以避免在删除目标路径的情况下丢失数据。

现在我的问题是我应该如何在跨平台方法中指示路径类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:15:30.040

如果您使用的是 QtMobility，则可以使用[QSystemStorageInfo](http://doc.qt.digia.com/qtmobility/qsystemstorageinfo.html)类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:20:36.940

我认为这将很难以可靠和便携的方式实现。我确信所有平台都有一些方法来确定驱动器是否是本地驱动器，但我认为更简单可靠的解决方案是创建一个本地临时文件，无论基本文件系统是什么。

# breeze - 在微风.js 中搜索文本

> ID：15897855
> 
> 赞同：2
> 
> 时间：2013-04-09T09:10:12.640
> 
> 标签：breeze

我想用 Breeze.js 搜索文本

```
var qu = new breeze.EntityQuery("Projects")
                    .where("Name", "startsWith", newValue); 
```

此语句仅显示以我在搜索框中键入的文本开头的项目。

如果它位于项目名称的中间，如何也可以搜索文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:17:01.517

您可以使用如下：

```
var qu = new breeze.EntityQuery("Projects")
                .where("Name", FilterQueryOp.Contains, newValue); 
```

> FilterQueryOp 是一个“枚举”，包含 EntityQuery 的所有有效谓词过滤器运算符。

查询操作在[http://www.breezejs.com/sites/all/apidocs/classes/FilterQueryOp.html中定义](http://www.breezejs.com/sites/all/apidocs/classes/FilterQueryOp.html)

`Contains`还有一个别名“substringof”。所以你可以做如下。

```
var qu = new breeze.EntityQuery("Projects")
                .where("Name", "substringof", newValue); 
```

# javascript - 如何使用 Javascript 正则表达式 - 在不丢失数据的情况下拆分字符串并格式化段落

> ID：15897858
> 
> 赞同：0
> 
> 时间：2013-04-09T09:10:15.323
> 
> 标签：javascript, html

我有以下段落。现在我想管理下面的字符串，如果（1）、（2）发生这种情况或会发生特定的字符串异常，我想换行。

> 本章的要求适用于以下情况： (1) 用作医疗保健场所的新建筑物或其部分（见 1.4.1） (2) 增建或用作医疗保健场所（见 4.6.6 和18.1.1.4) 例外：18.1.1.1.1 的要求不适用于按照 18.1.2.1 与医疗保健占用分开并符合特定占用要求的医疗保健以外的占用。根据第 12 章至第 17 章和第 20 章至第 42 章，视情况而定。 (3) 现有医疗保健场所的改建、现代化或翻新（见 4.6.7 和 18.1.1.4） (4) 现有建筑物或其部分在改变医疗保健入住（见 4.6.11） 例外*：已根据第 1.5 节提供了具有管辖权的当局已确定等效安全的设施。

通过以下方式：-

> 本章的要求适用于以下情况：
> 
> (1) 用作医疗保健场所的新建筑物或其部分（见 1.4.1）
> 
> (2) 增加或用作医疗保健用房（见 4.6.6 和 18.1.1.4）
> 
> 例外：18.1.1.1.1 的要求不适用于按照 18.1.2.1 与医疗保健占用分开并符合第 12 章规定的特定占用要求的医疗保健以外的占用。至第 17 章和第 20 章至第 42 章，视情况而定。
> 
> (3) 现有医疗保健场所的改建、现代化或翻新（见 4.6.7 和 18.1.1.4）
> 
> (4) 现有建筑物或其部分在改用医疗保健场所时（见 4.6.11） 例外*：具有管辖权的机构已根据第 1.5 节确定已提供同等安全性的设施。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:26:35.710

```
var str = '(1)point 1 (2) point2 exception: some exception (3) point 3'
str = str.replace(/(\(\d+\)|exception\s*\:)/gi, "<br />$1"); 
```

# angularjs - Angular JS：使用 Angular 有哪些问题/陷阱？

> ID：15897859
> 
> 赞同：5
> 
> 时间：2013-04-09T09:10:17.850
> 
> 标签：angularjs

当我开始使用 Angular 构建真实且更复杂的应用程序时，我可能会遇到哪些陷阱/问题/痛苦？我正在从事一份新工作，并且即将推荐 Angular（和 Bootstrap）作为构建我们所有 Web 应用程序的基础。在使用了近 1.5 年的主干.js 之后，我知道我不想使用它......我们有一个 Node + MongoDB 后端，并且没有对任何客户端堆栈进行真正的投资。一件独特的事情是我们有一些大数据 - 一个集合将达到 10 的规模和数亿条记录......我在过去两周左右一直在阅读和使用 Angular，但还没有真的发现有什么不好的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T10:06:19.573

真的没有陷阱:)

关于一个可能不太狂热的解释：AngularJS（据我所知）比主干更固执己见——大多数进程都非常容易执行（显示数据、处理交互），但遵循更严格的模式这样做。**据说**它使 angularJS 比骨干更难符合您的特定标准，但我发现事实并非如此。此外，该系统的一些缺点正在迅速消失，因为它正在疯狂地快速发展。

**以防万一：**路由系统是 angularJS 的次要方面之一，因为它通常不是很灵活（没有路由继承，没有状态机）......我开始使用一种非常干净的解决方法制作应用程序，[在这里](http://www.bennadel.com/blog/2420-Mapping-AngularJS-Routes-Onto-URL-Parameters-And-Client-Side-Events.htm)解释。**然而，** angular-ui 的人已经提出了一个[可靠的解决方案](https://github.com/angular-ui/ui-router) ，并且类似的解决方案必然会出现在 angular 本身中。

动画指令也是一个缺点（动画对象的出现和消失很棘手，因为它们需要一直存在到动画结束，并且必须进行管理）并且也有解决方案，**但核心动画系统是4 月 4 日在 Angular 1.1.4 中引入，在[这里](http://blog.angularjs.org/2013/04/angularjs-106-universal-irreversibility.html)**，所以你看，它正在迅速发展:)

关于学习曲线：它有一些，但没有任何一个有你经验的人在很短的时间内无法处理。[这个系列的视频教程](http://egghead.io/)是我所知道的最好的资源，作为一种简单的方式来理解大多数事情的要点（文档已经足够好并且越来越好，但是在某些地方缺乏应用示例，它确实会有所帮助 - 或缺乏，他们现在可能会更好-而且，“初学者教程”很可怕，我个人讨厌长时间运行的分步教程）

希望能帮助到你！

# compilation - f951 错误：无法识别的命令行选项

> ID：15897861
> 
> 赞同：2
> 
> 时间：2013-04-09T09:10:21.770
> 
> 标签：compilation, compiler-errors, fortran, compiler-warnings, fortran90

我在 linux 上，我正在编译以下内容：

```
mpif90 -shared source.F90 object1.o object2.o -L/some/path -Qoption,link,-rpath=/some/path -I/some/path -lhdf5 -lhdf5_fortran -fPIC -fpp -DDECDEC_ -DMSMS_  -cxxlib-gcc -o libhdfwrapper.so 
```

我得到

```
f95: unrecognized option '-Qoption,link,-rpath=/some/path'
f95: unrecognized option '-cxxlib-gcc'
f951: error: unrecognized command line option "-fpp" 
```

谁能告诉我为什么 fpp 不被识别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:49:09.183

`-fpp`是一些编译器使用的标志，特别是 Solaris Studio。似乎也`-rpath`指向 Solaris Studio。但是，您似乎正在使用 gfortran 或其他一些编译器。其他编译器`-cpp`改为使用。其他选项也是如此。

此外，该部分`-Qoption,link,-rpath=/some/path`可能格式不正确。

您可能需要查阅[http://www.oracle.com/technetwork/server-storage/solarisstudio/documentation/oss-translate-gfortran-180584.pdf](http://www.oracle.com/technetwork/server-storage/solarisstudio/documentation/oss-translate-gfortran-180584.pdf)和您的编译器手册。

# google-chrome - 用于 RemoteWebDriver 的 Selenium Grid 2 为 Chrome 浏览器提供了一个例外

> ID：15897866
> 
> 赞同：0
> 
> 时间：2013-04-09T09:10:42.680
> 
> 标签：google-chrome, selenium, remotewebdriver

请参阅我的网格批处理文件。（我在路径中添加了 chrome 二进制文件和 chrome 驱动程序位置）

如果我使用 firefox，我的代码可以完美运行，但对于 chrome 和 IE，它会抛出下面给出的异常。我确定我错过了一件非常微不足道的事情，但我无法弄清楚。

```
Batch file

set HERE=C:\Users\Administrator\Downloads
set JAVA_HOME=%HERE%\jdk-7u13-windows-x64
set PATH=%JAVA_HOME%\jre\bin;%JAVA_HOME%\bin;%CHROME_DRIVER_LOC%;%IE_DRIVER_LOC%;%CHROME_BINARY_LOC%;%PATH%;
set SELENIUM_VERSION=2.29.0
set CHROME_VERSION=chromedriver_win_26.0.1383.0
set HUB_URL=http://localhost:4444/grid/register
set CHROME_DRIVER_LOC=C:\Users\Administrator\Downloads\chromedriver_win_26.0.1383.0\chromedriver.exe
set IE_DRIVER_LOC=C:\Users\Adminstrator\Downloads\IEDriverServer_x64_2.31.0\IEDriverServer.exe
set CHROME_BINARY_LOC=C:\Users\Administrator\AppData\Local\Google\Chrome\Application\chrome.exe
start java -jar selenium-server-standalone-2.29.0.jar -role hub
start java -jar selenium-server-standalone-2.29.0.jar -role node
-Dwebdriver.chrome.driver=%CHROME_DRIVER_LOC% -hub %HUB_URL% -port 5556

My sample code:
DesiredCapabilities capabilities = new DesiredCapabilities();
capabilities.setBrowserName(DesiredCapabilities.chrome().getBrowserName());
URL url = new URL(“&lt;http://localhost:4444/wd/hub>”);
WebDriver driver = new RemoteWebDriver(url, capabilities);

// And now use this to visit Google
driver.get(“web page”);

Exception I am getting :

Exception in thread “main” org.openqa.selenium.WebDriverException: The path to the driver executable must be set by the webdriver.chrome.driver system property; for more information, see http://code.google.com/p/selenium/wiki/ChromeDriver. The latest version can be downloaded from http://code.google.com/p/chromedriver/downloads/list
Command duration or timeout: 608 milliseconds
Build info: version: ’2.29.0′, revision: ’58258c3′, time: ’2013-01-17 22:47:00′
System info: os.name: ‘Windows Server 2008 R2′, os.arch: ‘amd64′, os.version: ’6.1′, java.version: ’1.7.0_13′
Driver info: org.openqa.selenium.remote.RemoteWebDriver
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
at java.lang.reflect.Constructor.newInstance(Unknown Source)
at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:187)
at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:533)
at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:216)
at org.openqa.selenium.remote.RemoteWebDriver.(RemoteWebDriver.java:111)
at org.openqa.selenium.remote.RemoteWebDriver.(RemoteWebDriver.java:129)
at test.Test.main(Test.java:32)
Caused by: java.lang.IllegalStateException: The path to the driver executable must be set by the webdriver.chrome.driver system property; for more information, see …. 
```

请帮忙！我不明白我做错了什么。很长一段时间以来，我一直在为此苦苦挣扎。任何帮助将不胜感激。

```
Thanks
Sushmita 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:11:55.553

我认为，下面的行是罪魁祸首

```
start java -jar selenium-server-standalone-2.29.0.jar -role node
-Dwebdriver.chrome.driver=%CHROME_DRIVER_LOC% -hub %HUB_URL% -port 5556 
```

使用下面的行并检查它是否正常工作。

```
start java -Dwebdriver.chrome.driver=%CHROME_DRIVER_LOC% -jar selenium-server-standalone-2.29.0.jar -role webdriver -hub %HUB_URL% -port 5556 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T16:10:02.110

一个非常简单的解决方法是将 IEDriverServer 和 chromedriver 可执行文件与 selenium jar 文件放在同一文件夹中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-17T06:20:52.640

使用 Chrome 和 IE，您需要定义驱动程序可执行路径，您可以在此处细化文件：http: [//code.google.com/p/chromedriver/downloads/list](http://code.google.com/p/chromedriver/downloads/list) 和[http://code.google.com/ p/硒/下载/列表](http://code.google.com/p/selenium/downloads/list)

那么在你创建一个新的 ChromeDriver 之前你需要这样的东西： String chromeDriverPath = "C:\ChromeDriver.exe"; System.setProperty("webdriver.chrome.driver", chromeDriverPath);

# node.js - 本地主机上的 Node.js

> ID：15897868
> 
> 赞同：-1
> 
> 时间：2013-04-09T09:10:47.330
> 
> 标签：node.js

我对 node.js 很陌生。我正在开发一款多人纸牌游戏。所以，有人建议我将 node.js 与 apache 和 php 一起使用。

如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:22:48.350

做一些研究会解决你的问题。看来您缺少有关已读取套接字的信息，然后继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T10:20:41.773

这是一个用 node.js 编写的简单聊天服务器。它应该是 Web 环境中多用户通信的一个很好的起点。

[https://github.com/evert/nodejs-chat](https://github.com/evert/nodejs-chat)

希望能帮助到你！

# java - 在 Java 中计算 B-Tree 的内存使用量

> ID：15897869
> 
> 赞同：5
> 
> 时间：2013-04-09T09:10:47.967
> 
> 标签：java, memory-management, jvm, b-tree

我已经实现了一个简单的[B-Tree](https://github.com/graphhopper/graphhopper/blob/master/src/main/java/com/graphhopper/coll/MyLongIntBTree.java)，它将 long 映射到 int。现在我想使用以下方法估计它的内存使用情况（仅适用于 32 位 JVM）：

```
class BTreeEntry {

    int entrySize;
    long keys[];
    int values[];
    BTreeEntry children[];
    boolean isLeaf;
    ...
    /** @return used bytes */
    long capacity() {
        long cap = keys.length * (8 + 4) + 3 * 12 + 4 + 1;
        if (!isLeaf) {
            cap += children.length * 4;
            for (int i = 0; i < children.length; i++) {
                if (children[i] != null)
                    cap += children[i].capacity();
            }
        }
        return cap;
    }
}
/** @return memory usage in MB */
public int memoryUsage() {
    return Math.round(rootEntry.capacity() / (1 << 20));
} 
```

但是我尝试了例如 7mio 条目，并且 memoryUsage 方法报告的值比 -Xmx 设置允许的值高得多！例如，它说 1040 (MB)，我设置了 -Xmx300！JVM 是否能够以某种方式优化内存布局，例如。对于空数组或我的错误可能是什么？

更新 1：好的，引入 isLeaf 布尔值大大减少了内存使用量，但仍不清楚为什么我观察到的值高于 Xmx。（您仍然可以通过对所有构造函数使用 isLeaf == false 来尝试此操作）

更新2：嗯，有些事情很不对劲。当增加每个叶子的条目时，会假设内存使用量减少（当对两者都进行压缩时），因为较大的数组涉及较少的引用开销（并且 btree 具有较小的高度）。但是如果我使用 500 而不是每片叶子 100 个条目，则 memoryUsage 方法会报告增加的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T10:16:38.277

哦，嘘……新鲜空气解决了这个问题；）

当条目已满时，它将被拆分。在我原来的拆分方法`checkSplitEntry`中（我想避免浪费内存）我犯了一个很大的内存浪费错误：

```
// left child: just copy pointer and decrease size to index
BTreeEntry newLeftChild = this;
newLeftChild.entrySize = splitIndex; 
```

这里的问题是，旧的子指针仍然可以访问。因此，在我的 memoryUsage 方法中，我数了一些孩子两次（尤其是当我没有压缩时！）。所以，如果没有这个技巧，一切都会好起来的，我的 B-Tree 将更加高效，因为垃圾收集器可以完成它的工作！

# selenium-ide - 使用 Selenium IDE 测试图像上传和裁剪

> ID：15897870
> 
> 赞同：0
> 
> 时间：2013-04-09T09:10:48.693
> 
> 标签：selenium-ide

我无法在 selenium ide 中裁剪图像。考虑这种情况：-

1.  点击上传图片链接后，会弹出一个窗口供选择文件
2.  选择文件后，我得到了上传文件的选项
3.  点击上传文件后，我有 3 个选项

    *   裁剪它
    *   适合窗户
    *   取消

并且必须选择三个选项中的任何一个来将图像上传到您的个人资料。

我想为上述步骤自动化 selenium 脚本脚本被正确记录到第 3 步，但在第 4 步 selenium 无法记录以上三个选项。（我没有使用 firebug 或 xpathfinder 插件获得以上 3 个按钮的任何 Xpath）

（我们坚持使用 selenium ide 1.10.0）

# sql - 努力创建插入查询

> ID：15897874
> 
> 赞同：1
> 
> 时间：2013-04-09T09:10:57.260
> 
> 标签：sql, sql-server-2008, insert

我为这样的表创建`Insert`语句`organization`：

```
select'Insert into Organizations(Name,ContactPerson,ContactNumber,Mobilenumber)values('''+Nameofthecompany+''+','+Nameofthepersonresponsibleforrecruitment+','+PhoneNumber+','+MobileNumber+''')' from Organization 
```

当我执行此语句时，我得到插入语句。但问题是值为 null 的地方，它显示所有列`null`。

**示例：（**在数据库中）

*   姓名：xxx
*   联系人：zzzz
*   联系电话：444444
*   手机号码：空

所以我的插入语句看起来像：

```
Null. 
```

我只希望该列提供空值。其他细节正确显示。sql server有什么办法吗？任何人都帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:19:15.780

将任何东西连接到 NULL 的结果，甚至它本身，总是 NULL。使用 ISNULL 函数的解决方法：

```
select'Insert into Organizations(Name,ContactPerson,ContactNumber,Mobilenumber)
values('''+ISNULL(Nameofthecompany, 'NULL')+''+','
          +ISNULL(Nameofthepersonresponsibleforrecruitment, 'NULL')+','
          +ISNULL(PhoneNumber, 'NULL')+','
          +ISNULL(MobileNumber, 'NULL')+''')' 
from Organization 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/00dfc/1)上的演示[](http://sqlfiddle.com/#!3/00dfc/1)

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:19:34.310

当然 - 只是`ISNULL(..)`用来将 a`NULL`变成例如一个空字符串：

```
SELECT 
    'INSERT INTO Organizations(Name, ContactPerson, ContactNumber, Mobilenumber) VALUES(''' + 
    ISNULL(Nameofthecompany, '') + '' + ',' + 
    ISNULL(Nameofthepersonresponsibleforrecruitment, '') + ',' + 
    ISNULL(PhoneNumber, '') + ',' + ISNULL(MobileNumber,'') + ''')' 
FROM Organization 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:18:42.643

在将每个参数添加到 SQL 语句时，需要检查它们是否为空，如果是，请使用关键字 NULL，否则请包含用单引号括起来的文字字符串，但请记住，如果字符串包含任何单引号，都需要用两个单引号替换。

更新每个参数的 SQL，如下所示：

```
CASE WHEN MobileNumber IS NULL THEN 'NULL' ELSE '''' + REPLACE(MobileNumber, '''', '''''') + '''' END 
```**

# string - 替换 Bash 中的文本

> ID：15897880
> 
> 赞同：-1
> 
> 时间：2013-04-09T09:11:16.057
> 
> 标签：string, bash, replace

我有 2 个变量：

```
varString = abcd
varNumber = 12345 
```

我想在一个名为`textFile.txt`. 该行将如下所示：

```
abcd:11111:blah:00000:blah 
```

所有字段的长度未知。

我想找到 abcd 行，并将`11111`位更改`varNumber`为`12345`之后文件上的行将是：

```
abcd:12345:blah:00000:blah 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:18:13.303

这样的事情会做：

```
sed -e "s/\($varString\):\([0-9]*\):/\1:$varNumber:/g" textFile.txt 
```

`$varString:<digits>:`它用替换字符串`$varString:$varNumber:`。输出开启`stdout`。要进行就地编辑，请`-i '~'`提供`sed`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:23:39.917

使用`awk`：

```
awk -F: -v OFS=: -v varString=abcd -v varNumber=12345 '{if($1==varString)$2=varNumber;print}' file 
```

# jquery - Jquery .toggle - 一种写得更短的方法？

> ID：15897882
> 
> 赞同：0
> 
> 时间：2013-04-09T09:11:23.583
> 
> 标签：jquery, toggle

我正在玩弄 Jquery 和 JS 以获得基础知识，但我面临以下问题：

我有5段。当我单击一个段落（vraag）时，它将显示另一个段落（antwood）。再一次，当我按下“Antwoord”时，我不得不再次隐藏。现在我已经为每个 Vraag/Antwoord 编写了一个新函数。我正在寻找一种方法来写这个更短！我一直在环顾四周，并自己进行了一些头脑风暴，但我无法想出一些东西。我现在写它的方式非常草率。

另外，当我按“vraag”，然后按“antwood”再次隐藏它时，它将切换 3 次。我不确定是什么导致了这个问题！

希望有人可以帮我解决这个问题，并启发我！:)

谢谢！

编码：

```
<hmtl>
<head>
    <script src="jquery-1.9.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("#vraag1").click(function(){
                $("#antwoord1").toggle('normal');
                $("#antwoord1").click(function(){
                    $("#antwoord1").toggle('normal');   
                });
            });
            $("#vraag2").click(function(){
                $("#antwoord2").toggle('normal');
                $("#antwoord2").click(function(){
                    $("#antwoord2").toggle('normal');   
                });
            });
            $("#vraag3").click(function(){
                $("#antwoord3").toggle('normal');
                $("#antwoord3").click(function(){
                    $("#antwoord3").toggle('normal');   
                });
            });
            $("#vraag4").click(function(){
                $("#antwoord4").toggle('normal');
                $("#antwoord4").click(function(){
                    $("#antwoord4").toggle('normal');   
                });

            });
            $("#vraag5").click(function(){
                $("#antwoord5").toggle('normal');
                $("#antwoord5").click(function(){
                    $("#antwoord5").toggle('normal');   
                });                 
            });
        });

    </script>
    <style type="text/css">
        .hidden{
            display: none;
        }
    </style>
</head>
<body>
    <p id="vraag1"> vraag 1 </p>
    <p class="hidden" id="antwoord1"> antwoord1 </p>
    <p id="vraag2"> vraag 2 </p>
    <p class="hidden" id="antwoord2"> antwoord2 </p>
    <p id="vraag3"> vraag 3 </p>
    <p class="hidden" id="antwoord3"> antwoord3 </p>
    <p id="vraag4"> vraag 4 </p>
    <p class="hidden" id="antwoord4"> antwoord4 </p>
    <p id="vraag5"> vraag 5 </p>
    <p class="hidden" id="antwoord5"> antwoord5 </p>
</body>
</hmtl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:15:41.633

首先，您应该更改您的 HTML 以使用类而不是（或除了）id：

```
<p class="vraag"> vraag 1 </p>
<p class="hidden antwoord"> antwoord1 </p>
<p class="vraag"> vraag 2 </p>
<p class="hidden antwoord"> antwoord2 </p> 
```

然后重写 click 事件处理程序以利用 HTML 的类和结构：

```
$(".vraag").click(function(){
    $(this).next(".antwoord").toggle('normal');
}); 
```

我没有`click`为上述设置处理程序，因为每次单击时都会`.antwoord`设置一个*额外*`.vraag`的单击处理程序（您可以`alert`在自己的代码中放置一个以了解我的意思）。

`.antwoord`取而代之的是，我们可以像我们所做的那样只设置一次恢复正常切换`.vraag`：

```
$(".antwoord").click(function(){
    $(this).toggle('normal');   
}); 
```

就是这样——两个最小的事件处理程序现在将处理任何数量的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:29:34.557

> 我正在寻找一种方法来写这个更短！

我看到的最短代码**是**：

```
$('p').click(function(){
    $(this).next().hasClass('hidden') ? $(this).next().toggle('normal') : $(this).toggle('normal');
}); 
```

请注意，我的回答**并不是最适合**的，也不应该在您的网站上按原样使用。

请参阅[此小提琴](http://jsfiddle.net/sDrqH/)以获取工作演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:15:20.900

使用属性选择器`^`获取所有以给定字符串开头的元素，并为`antwoord`外部调用单独的点击事件（而不是在点击事件内部`vraag`）将其保留在内部您需要额外的点击事件才能使 vraag 工作...

试试这个

```
 $(document).ready(function(){
        $("p[id^='vraag']").click(function(){
            $(this).next('p').toggle('normal');

        });
        $("p[id^='antwoord']").click(function(){
                $(this).toggle('normal');   
            });
  }); 
```

# python-2.7 - 防止在python中丢失互联网

> ID：15897888
> 
> 赞同：1
> 
> 时间：2013-04-09T09:11:33.277
> 
> 标签：python-2.7, serial-port

我知道我可以确保使用互联网的脚本不采取任何行动，除非它使用这样的代码连接到网络。

```
import time
import json
import urllib

try:
    response = urllib.urlopen('http://search.twitter.com/search.json?q=%23monty')
except IOError:
    time.sleep(15)
    continue
j =json.loads(response.read()) 
```

然而，我发现，当我在脚本中的这一点之后关闭路由器时，脚本可能会冻结。重新打开互联网不会解除卡住的脚本。什么是不粘方法？我需要一个脚本才能在暂时失去互联网和串行端口连接的情况下幸存下来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:29:44.517

这可能与您的请求超时有关（如果我没记错的话，默认为套接字的超时）。尝试这个：

```
import time
import json
import urllib

try:
    response = urllib.urlopen('http://search.twitter.com/search.json?q=%23monty', timeout=10)
except IOError:
    time.sleep(5)
    continue
j =json.loads(response.read()) 
```

此致，

沙利文

# c# - 组织涵盖行为步骤的测试方法的最佳实践是什么？

> ID：15897891
> 
> 赞同：1
> 
> 时间：2013-04-09T09:11:39.653
> 
> 标签：c#, unit-testing, mocking, tdd, mstest

我有一个`FileExtractor`类，它有一个`Start`执行一些步骤的方法。

我在名为“FileExtractorTests”的文件夹中创建了一个名为“WhenExtractingInvalidFile.cs”的测试类，并在其中添加了一些测试方法，如下所示，应作为 Start() 方法的步骤进行验证：

```
[TestMethod]
public void Should_remove_original_file()
{

}

[TestMethod]
public void Should_add_original_file_to_errorStorage()
{

}

[TestMethod]
public void Should_log_error_locally()
{

} 
```

这样，它可以很好地组织应该满足的行为和期望。

问题是这些测试方法的大部分逻辑都是相同的，所以我应该创建一种测试方法来验证所有步骤还是像上面一样单独创建？

```
[TestMethod]
public void Should_remove_original_file_then_add_original_file_to_errorStorage_then_log_error_locally()
{      
} 
```

最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:30:13.080

虽然人们普遍认为测试的[Act](http://c2.com/cgi/wiki?ArrangeActAssert)部分应该只包含一个调用，但对于“每个测试一个断言”的做法仍然存在很多争论。

我倾向于坚持它，因为：

*   当测试失败时，我立即（从测试名称）知道我们要在被测方法上验证的多项内容中的哪一项出错了。

*   暗示模拟的测试已经比常规测试更难阅读，当您在同一个测试中断言多个模拟时，它们很容易变得晦涩难懂。

如果您不遵循它，我至少建议您包含有意义的 Assert 消息，以便在测试失败时尽量减少头疼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T11:54:10.523

干燥 - 不要重复自己。

想想你的测试失败的场景。从测试组织的角度来看，什么最有用？

要看的第二个维度是维护。您要运行和维护 1 个测试还是 n 个测试？不要因为编写许多没有什么价值的测试而使开发负担过重（我认为出于这个原因，TDD 有点被高估了）。如果一个测试使用更大的代码路径而不是较短的路径，那么它会更有价值。

在这个特定场景中，我将创建一个测试。如果此测试经常失败并且您没有足够快地找到问题的根本原因，请重新考虑多个测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:15:49.547

我会做和你一样的事情，但是`_on_start`后缀是这样的：`Should_remove_original_file_on_start`. 后一种方法最多只会给你一个断言失败，即使 Start 的所有方面都可能被破坏。

# java - 比较方法违反其一般合同异常java 7

> ID：15897892
> 
> 赞同：0
> 
> 时间：2013-04-09T09:11:41.090
> 
> 标签：java

下面的代码在 Java 6 上运行时会抛出“Java 比较方法违反其一般约定”。但是，在 Java 7 上它不会抛出相同的异常。什么问题？如何修改此代码以在 Java 7 上也抛出异常？

```
class ComparableScore implements Comparable<ComparableScore> {

    private int score;
    private String itemName;

    int getScore() {
        return score;
    }

    void setScore(int i) {
        score = i;
    }

    String getItemName() {
        return itemName;
    }

    void setItemName(String str) {
        itemName = str;
    }

    public int compareTo(ComparableScore another) {
        if (score == another.getScore())
            return this.getItemName()
                    .compareToIgnoreCase(another.getItemName());
        else if ((score) > another.getScore())
            return 1;
        else
            return -1;
    }

    @Override
    public boolean equals(Object o) {
        final ComparableScore other = (ComparableScore) o;

        if (score == other.getScore()
                && this.getItemName().equalsIgnoreCase(other.getItemName()))
            return true;
        else
            return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:19:57.987

这与这个 Java“错误”有关 - [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7193557](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7193557)

除了它不是一个错误，它是一个功能。的新 Java 实现`sort`告诉您您的`compareTo`方法已损坏。

但是，错误报告说异常是在 Java 7 而不是 Java 6 上引发的。检查 Java 6 源代码可以确认这一点。该消息不会出现在`Arrays.sort`Java 6 中实现排序代码的源代码中。

* * *

如果您的目标是以在 Java 7 中发生异常的方式**破坏**您的代码，那么：

*   目前没有抛出异常，因为合同没有被破坏。（或者至少，不是以我能看到的任何明显方式......）

*   我不知道会触发异常的确切条件。

*   尝试一些实验（即使用不同的实现`compareTo`和`equals`以不同的方式破坏合同）或阅读 Java 7 源代码，以自己找出导致它的原因......可重现。

*   （为什么，为什么，你为什么要这样做？？？）

# ruby - 在 Ubuntu 12.04 上安装 Compass 和 Susy

> ID：15897894
> 
> 赞同：8
> 
> 时间：2013-04-09T09:11:59.523
> 
> 标签：ruby, ubuntu-12.04, compass-sass

我正在尝试在我的 Ubuntu 12.04 上安装 Compass 和 Susy。

我尝试过的是控制台上的以下步骤：

```
sudo apt-get install rubygems1.8
sudo gem install rubygems-update # Instead of sudo gem update --system
sudo update_rubygems
sudo gem install compass # Installing Compass & Sass
sudo gem install susy 
```

因此，gems 已安装，并将在我执行以下命令时列出：

```
gem list 
```

但是现在，当我尝试创建一个新的指南针项目时

```
compass create project 
```

我收到以下错误：

```
/usr/local/bin/compass: /usr/bin/ruby1.9.1: bad interpreter: No such file or directory 
```

我当前的 ruby​​ 版本是 1.8.7。所以我安装了 ruby​​ 1.9.1 并让它工作。控制台仍然说当前的 ruby​​ 版本是 1.8.7

我的问题：我是否必须同时运行两个 ruby​​ 版本才能使其正常工作？ubuntu下还有别的方法吗？我知道它正在工作，但它有点令人困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T09:24:52.700

为多个 ruby​​ 版本使用 Ubuntu 的包管理器有点失败。

*大多数*人使用[rvm](http://rvm.io)，它允许您非常轻松地在多个 rubies 之间安装和切换。

其他流行的选项是[rbenv](https://github.com/sstephenson/rbenv/)和[chruby](https://github.com/postmodern/chruby)。这只是个人喜好的问题，但我会说 rvm 对于初学者来说有点优势。

此外，我不建议安装 ruby​​ 1.9.1 - 最好使用 1.9.3，因为与其他 1.9.x 版本存在一些兼容性问题。

然后，您可以通过 ruby​​ gems（而不是 aptitude）安装 compass 和 sass：

```
$ gem install compass
$ gem install sass 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-17T16:41:45.623

这个简单的命令适用于 ubuntu 14.10

```
sudo apt-get install ruby-compass 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-16T23:59:40.240

RVM 很棒而且很容易安装。我设法在终端中使用这些命令安装了 rvm、compass 和 sass：

首先：

```
curl -L https://get.rvm.io | bash -s stable --rails --autolibs=enabled --ruby=1.9.3 
```

这将安装 rvm，它会在 ~/.bash_profile 中放置一个命令以自动加载 rvm，除非这不是 Ubuntu 使用的，所以将此行放入 ~/.bashrc 文件中：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function* 
```

然后简单地运行：

```
gem install compass
gem install susy #(or sass) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-02T12:17:49.013

安装 build-essentials 和 ruby​​-dev 软件包以安装 compass 而不会出错。

```
sudo apt-get install build-essential
sudo apt-get install ruby
sudo apt-get install ruby-dev
sudo gem install compass 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-28T21:50:02.923

Masterchief的答案很接近，但对我不起作用。此网页提供了一种清晰可靠的工作方式来在我的 ubuntu 服务器实例上安装 rvm：[http ://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/](http://ryanbigg.com/2010/12/ubuntu-ruby-rvm-rails-and-you/)

# iphone - 在 UIViewController 中的 viewWillAppear 或 viewDidAppear 中线程的正确位置是什么？

> ID：15897898
> 
> 赞同：-6
> 
> 时间：2013-04-09T09:12:05.850
> 
> 标签：iphone, ios, objective-c, grand-central-dispatch

在 UIViewController 中的 viewWillAppear 或 viewDidAppear 中**线程**的正确位置是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:39:09.017

一般来说，如果您想加载需要与视图控制器的所有其他视图一起看到（出现）的图像，那么您需要以 SYNC 方式加载（您需要等到图像加载后才能显示视图控制器）在视图中会出现：

这样你可以为你的视图控制器（包括你的图像）设置动画，但是，当然，你可能会记住从服务器加载图像需要时间（并且可能会发生互联网错误），因此，可能会发生用户点击离开到您的视图控制器，然后您的应用程序会停止一段时间（可能太多，取决于图像的文件大小，互联网速度连接......）

因此，更好的方法可能是：

以 ASYNC 方式在 viewDidAppear 中加载图像：

用户会立即看到您的 viewController 的动画（没有图像），并且会在您的图像可用时看到您的图像（如果您愿意，可以使用新动画）。

无论如何，这取决于您的应用程序应该做什么，两种方式都可能很好......

# c# - 这段代码有什么问题（.net 2.0）

> ID：15897900
> 
> 赞同：-1
> 
> 时间：2013-04-09T09:12:10.547
> 
> 标签：c#, .net, web-services, .net-2.0

我正在尝试使用下面的代码获取最新日期，但它进入无限循环并且在控制台中不显示任何内容，

```
 public static void sortsortyMyDates()
    {
        int i = 1;
        DateTime[] dtList = new DateTime[20];
        DateTime LatestDate = dtList[1];

        dtList[1] = Convert.ToDateTime("28/05/2013 13:00:00");
        dtList[2] = Convert.ToDateTime("23/04/2013 13:00:00");
        dtList[3] = Convert.ToDateTime("25/03/2013 13:00:00");
        dtList[4] = Convert.ToDateTime("08/04/2013 13:00:00");

        while(i < dtList.Length)
        {
            int result = DateTime.Compare(LatestDate, dtList[i]);

            if (result < 0)
                continue;
            else
                LatestDate = dtList[i];

            ++i;
        }

        Console.WriteLine(LatestDate.ToString());
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:20:15.463

您的循环逻辑有问题：

```
if (result < 0)
    continue; 
```

如果`result < 0`那么您不递增`i`，则循环不会进行。

另外，您的比较是错误的方法。 `result < 0`将意味着当前测试的日期晚于当前的最大值。您获得`01/01/0001`输出的原因是因为您当前的代码实际上找到了*最早*的日期，并且您的大部分数组都未初始化（因此比您的测试值早得多！）。

改用`if`这个（并`else`完全删除）：

```
if (result < 0)
    LatestDate = dtList[i]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T09:19:40.747

if`continue`被执行，`i`不再递增，循环也不会终止。

# mysql - MYSQL：获取不属于某个类别的项目

> ID：15897902
> 
> 赞同：0
> 
> 时间：2013-04-09T09:12:16.077
> 
> 标签：mysql

我有两个代表帖子及其类别的表格。
这是一个简化的表模式：

```
posts                post_categories
-----               ----------------
-id                 -post_id
-title              -cat_id
-text 
```

我需要获取所有**不属于“5”类别的**帖子：

```
SELECT * FROM `posts` WHERE id NOT IN( SELECT id FROM `posts`, 
`post_categories` AS cat WHERE cat.cat_id=5 AND posts.id=cat.post_id ) 
```

我正在使用子查询，因为帖子不能属于任何类别，所以如果我做一个简单的：

```
cat_id!=5 AND posts.id=post_id 
```

我不会得到那些没有类别的帖子。

有比做子查询更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:15:52.670

你做一个左联接：

```
SELECT DISTINCT `field1`,`field2`...etc FROM `posts` a LEFT JOIN `post_categories` b ON a.id=b.post_id  WHERE b.cat_id <> 5 
```

应该管用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:14:53.417

关于什么：

```
SELECT * FROM `posts` WHERE id NOT IN( SELECT id FROM
`post_categories` WHERE cat_id!=5) 
```

我不确定您为什么在子查询中需要“帖子”。你想要的只是从'post_categories'中获取类别！= 5的帖子，然后从'posts'中获取他们的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T09:16:05.683

就性能而言，进行左连接通常“更好”。像这样做：

```
SELECT * FROM `posts` 
    LEFT JOIN `post_categories` AS cat ON posts.id=cat.post_id AND cat.cat_id=5
WHERE  cat.cat_id IS NULL 
```

# php - 从网页中只获取一行

> ID：15897903
> 
> 赞同：-1
> 
> 时间：2013-04-09T09:12:22.167
> 
> 标签：php

嗨，我有这个文件[test1.php](http://inviatapenet.gethost.ro/sop/test1.php)，在另一个文件[test.php](http://inviatapenet.gethost.ro/sop/test.php)中我 `php`运行了这个代码：

```
<?php
$file = "http://inviatapenet.gethost.ro/sop/test1.php";
$line = '0';
if($f = fopen($file, 'r')){
  $line = fgets($f); // read until first newline
  fclose($f);
}
echo $line;
?> 
```

我们的想法是只获取网页 test1.php 的第二行。

> 第二行

我试图改变`$line = '2';`但没有影响，它只显示第一行。我需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:19:19.790

您可以使用[`file`](http://php.net/file)which 将文件读取到数组中，然后可以使用所需的索引来获取所需的任何行。

例如：

数据.txt：

```
line one
line two
line three
line four 
```

PHP代码：

```
$file = file('data.txt');
echo $file[1]; // echo line number 2, remember arrays start at 0! 
```

更新了新版本 (5.4) 的 PHP 代码：

```
echo file('data.txt')[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:17:01.800

这应该有效。显然，只改变 的值`$linetofetch`：

```
<?php
// Write here the number of the line you want to fetch.
$linetofetch = 2;

$file = "http://inviatapenet.gethost.ro/sop/test1.php";
$currentline = 1;
if($f = fopen($file, 'r')){
  while ($currentline <= $linetofetch) {
    $line = fgets($f); // read until first newline
    $currentline++;
    }
  fclose($f);
  }
echo $line;
?> 
```

# android - 在 Android 上的 GridView 中设置突出显示的项目

> ID：15897911
> 
> 赞同：1
> 
> 时间：2013-04-09T09:12:44.187
> 
> 标签：android, android-gridview

有时我真的很惊讶看到简单的事情很难找到解决方案。

我有`GridView`6 列和多行。每个项目都是一个以颜色为背景的正方形。当我选择一个项目时，它会在`listSelector`设置时突出显示

```
<GridView
        android:id="@+id/listFontColors"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_gravity="center_horizontal"
        android:layout_margin="8dip"
        android:drawSelectorOnTop="true"
        android:gravity="center"
        android:horizontalSpacing="3dp"
        android:listSelector="@drawable/color_list_selected"
        android:numColumns="6"
        android:padding="0dip"
        android:scrollbars="none"
        android:stretchMode="columnWidth"
        android:verticalSpacing="3dp" /> 
```

当我打开布局时，包含`GridView`我想突出显示上一个选定的项目。由于它后面的适配器有一个`ArrayList<Object>`很容易找到需要突出显示的位置。问题是执行实际突出显示。

我做了很多测试：

```
listColors.requestFocus();
listColors.setSelection(9);

if (v != null) {
    v.requestFocus();
    v.setPressed(true);
    v.setSelected(true);
}
listColors.performItemClick(listColors, 9, listColors.getItemIdAtPosition(9)); 
```

这些都不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:20:09.520

最简单的方法是保存`position`并在您的 Adapter 类 inside`getView()`方法中检查它。

```
if(selected_position = position){
    view.setBackgroundResource(selected_resource_id);
}
else{
    view.setBackgroundResource(resource_id);
} 
```

然后只需调用`notifyDataSetChanged()`您的适配器。

# windows-phone-7 - 费用化框架

> ID：15897914
> 
> 赞同：0
> 
> 时间：2013-04-09T09:12:53.720
> 
> 标签：windows-phone-7

我是新的 Windows 手机，我们计划使用 Expensify 的 Windows Phone 测试框架进行 WP7 UI 自动化。

安装这个框架。我需要什么软件？. 除了 Expensify 的 Windows Phone 测试框架、Windows 7 OS、Windows phone 7 SDK、Nunit 和 Flowspec，我还需要什么吗？

我的另一个问题是 - 我们可以使用这个框架模拟 kre press 或 touch 事件吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:42:12.917

除了你提到的之外，没有什么特别需要的。

> 我的另一个问题是 - 我们可以使用这个框架模拟 kre press 或 touch 事件吗？

是的你可以。

但请记住，Expensify 框架相当大，未完成，我想说写得不是很好。您必须扩展它以执行甚至简单的操作（例如单击应用栏按钮）。

# iphone - iOS 上的 Social Framework 出现阴影屏幕

> ID：15897918
> 
> 赞同：0
> 
> 时间：2013-04-09T09:13:06.380
> 
> 标签：iphone, ios, social-framework

我创建具有“与 facebook 共享”功能的应用程序我使用此代码进行 facebook 共享

```
[facebookViewController setInitialText:[NSString stringWithFormat:@"via %@", self.randomGame.name]];
NSLog(@"%@", self.resultImageView.image);
[facebookViewController addImage:self.resultImageView.image];
[facebookViewController setCompletionHandler:^(SLComposeViewControllerResult result){
    if (result == SLComposeViewControllerResultCancelled) {
        NSLog(@"Dialog Did Cancel");
    }
}];

[self presentViewController:facebookViewController animated:YES completion:nil]; 
```

我已经使用 SLComposeViewController 分配/初始化 facebookViewController 对象。

第一次分享没有问题。但是，我第二次分享我得到这样的阴影屏幕

![在此处输入图像描述](https://i.stack.imgur.com/Kzzaq.png)

谁能帮忙？感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:53:00.420

我用代码完成了

```
facebookViewController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
[facebookViewController setInitialText:[NSString stringWithFormat:@"via %@", self.randomGame.name]];
[facebookViewController addImage:self.resultImageView.image];

[self presentViewController:facebookViewController animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:43:15.290

我不确定，但每次您展示 facebook 弹出框时，您还需要在完成块中将其关闭，例如

```
[facebookViewController dismissViewControllerAnimated:YES completion:Nil]; 
```

希望能帮助到你

# python - 不使用函数的根的整数部分

> ID：15897921
> 
> 赞同：-1
> 
> 时间：2013-04-09T09:13:13.863
> 
> 标签：python

一个数的平方根的整数部分的计算可以通过反复试验来完成，从 1 开始，通过执行平方直到结果小于或等于由根计算的起始值。

以下程序返回根的整数部分

```
def radice(x):
    z = 0
    t = 0
    while True:
        t = z*z
        if t > x:
            z -= 1
            return z
        z += 1

radice(17) // 4 
```

是否可以在不使用函数和中断的情况下编写它？这是我的代码没有函数，但我不知道如何编写相同的算法`break`

```
z = 0
t = 0
while True:
    t = z*z
    if t > x:
        z -= 1
        break
    z += 1
print 'The integer part of the root is: ', z 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:14:32.803

这应该足够了：

```
>>> int(17**0.5)
4 
```

`17**0.5`生成 17 的平方根，`int`基本上去掉小数，留下“根的整数部分”。

在不使用任何函数的情况下，如果您想要一个整数结果，则需要复杂的代码（如您自己的）。但是，如果可以使用浮点数，那么您可以尝试以下操作：

```
>>> (17**0.5)//1
4.0 
```

这基本上与`int`调用相同，但如果任一侧是浮点数，则将返回一个浮点数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:38:54.000

正如你所说，一个数字的平方根的整数部分可以通过反复试验来完成，从 1 开始，通过执行平方直到结果小于或等于由根计算的起始值。说不用function和break语句也可以写代码；这是代码：

```
n = input("insert a number: ")
r = 1
while (r * r <= n):
        r = r + 1

print  "the result is:", r -1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:19:17.273

括号是为了清楚起见，不是必需的

```
>>> (17**.5)-(17**.5)%1
4.0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T11:17:01.213

好吧，让我们逻辑思考。您不能使用`break`，因此退出循环的唯一方法`while`是打破它的条件。如果它是`True`，它就不能被破坏，所以我们必须考虑停止迭代的适当条件。这个条件已经在你的算法中使用了：你退出时`t > x`，或`z * z > x`。所以继续迭代的条件应该是相反的，即`z * z <= x`。我们有这个简单的解决方案。

```
x = 17
z = 0
while z * z <= x:
    z += 1

print 'The integer part of the root is: ', z - 1 
```

作为一般规则，尽量避免这些`while True:`循环。虽然它们有时很有用，但它们通常更难阅读和理解，这可能是你的老师限制使用`break`. 该函数被禁止可能是因为`return`它只是逃避循环的另一种方式。但那些是例外的：结束循环的正常方法是打破它的条件，所以它应该这样写。

# android - Android 如何为循环画廊创建默认画廊？

> ID：15897922
> 
> 赞同：2
> 
> 时间：2013-04-09T09:13:13.940
> 
> 标签：android, geometry, android-gallery

我想创建如下图所示的画廊视图。我已经看了很多，也尝试过旋转木马。但我无法创建它。任何人都可以建议我创建这样的视图吗？我也尝试过画廊视图样式。但我还没有找到任何东西。

等待更好的回应。谢谢。

![在此处输入图像描述](https://i.stack.imgur.com/1OFlC.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T09:17:58.083

[您可以在此处](http://developer.digitalaria.com/devguide/gama/en/gama/wheel_android.php)使用 Gama API 进行此外观

# sql - 基于最近时间戳连接两个表的 SQL 查询

> ID：15897923
> 
> 赞同：4
> 
> 时间：2013-04-09T09:13:14.610
> 
> 标签：sql, sql-server, sql-server-2008, join, timestamp

我需要从 dbo.transaction （所有用户的交易 - 每个用户的多个交易）中检索具有最接近 dbo.bal 时间的时间戳的记录（每个用户的当前余额详细信息 - 每个用户只有一个记录用户）

即，结果记录应等于 dbo.bal 中的记录数

在这里我尝试了下面的查询，我只得到少于 dbo.bal 时间的记录。但是有些记录的时间戳大于和最接近 dbo.bal.time

```
SELECT dbo.bal.uid,
       dbo.bal.userId,
       dbo.bal.balance,
       dbo.bal.time,
  (SELECT TOP 1 transactionBal
   FROM dbo.transaction
   WHERE TIMESTAMP <= dbo.bal.time
   ORDER BY TIMESTAMP DESC) AS newBal
FROM dbo.bal
WHERE dbo.bal.time IS NOT NULL
ORDER BY dbo.bal.time DESC 
```

这是我的表结构，

```
dbo.transaction
---------------

| uid| userId   | description| timestamp               | credit | transactionBal
-------------------------------------------------------------------------
| 1  | 101      | buy credit1| 2012-01-25 03:23:31.624 | 100    | 500
| 2  | 102      | buy credit5| 2012-01-18 03:13:12.657 | 500    | 700
| 3  | 103      | buy credit3| 2012-01-15 02:16:34.667 | 300    | 300
| 4  | 101      | buy credit2| 2012-01-13 05:34:45.637 | 200    | 300
| 5  | 101      | buy credit1| 2012-01-12 07:45:21.457 | 100    | 100
| 6  | 102      | buy credit2| 2012-01-01 08:18:34.677 | 200    | 200

dbo.bal
-------

| uid| userId   | balance | time                    |
-----------------------------------------------------
| 1  | 101      | 500     | 2012-01-13 05:34:45.645 |
| 2  | 102      | 700     | 2012-01-01 08:18:34.685 |
| 3  | 103      | 300     | 2012-01-15 02:16:34.672 | 
```

结果应该是这样的，

```
| Id | userId   | balance | time                    | credit | transactionBal 
-----------------------------------------------------------------------------
| 1  | 101      | 500     | 2012-01-13 05:34:45.645 | 200    | 300
| 2  | 102      | 700     | 2012-01-01 08:18:34.685 | 200    | 200
| 3  | 103      | 300     | 2012-01-15 02:16:34.672 | 300    | 300 
```

请帮助我..任何帮助都必须感谢...谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:38:28.457

如果您发布表结构会有所帮助，但是...

1.  我认为您的内部查询需要一个连接条件。（这实际上不在你的问题中）

2.  您`ORDER BY`在内部查询中的子句可能是`ABS(TIMESTAMP - DB0.BAL.TIME)`. 这应该给你2之间的最小差异。

这有帮助吗？

基于以下 Sql Fiddle [http://sqlfiddle.com/#!3/7a900/15](http://sqlfiddle.com/#!3/7a900/15)我想出了...

```
SELECT 
  bal.uid, 
  bal.userId, 
  bal.balance, 
  bal.time,
  trn.timestamp,
  trn.description,
  datediff(ms, bal.time, trn.timestamp)
FROM 
  money_balances bal
  JOIN money_transaction trn on
    trn.userid = bal.userid and
    trn.uid =
    (
      select top 1 uid
      from money_transaction trn2
      where trn2.userid = trn.userid
      order by abs(datediff(ms, bal.time, trn2.timestamp))
    )
WHERE 
  bal.time IS NOT NULL
ORDER BY 
  bal.time DESC 
```

我不能保证它的性能，因为我对你的数据一无所知，但我相信它有效。

我已经简化了我的答案 - 我相信你需要的是

```
SELECT 
  bal.uid as baluid,   
  (
      select top 1 uid 
      from money_transaction trn2
      where trn2.userid = bal.userid
      order by abs(datediff(ms, bal.time, trn2.timestamp))
  ) as tranuid
FROM 
  money_balances bal 
```

从中您可以导出您需要的所有数据集。例如 ：

```
with matched_credits as
(
SELECT 
  bal.uid as baluid,   
  (
      select top 1 uid 
      from money_transaction trn2
      where trn2.userid = bal.userid
      order by abs(datediff(ms, bal.time, trn2.timestamp))
  ) as tranuid
FROM 
  money_balances bal 
)
select 
  *
from 
  matched_credits mc
  join money_balances mb on
    mb.uid = mc.baluid
  join money_transaction trn on
    trn.uid = mc.tranuid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:35:31.960

尝试：

```
SELECT dbo.bal.uid,
       dbo.bal.userId,
       dbo.bal.balance,
       dbo.bal.time,
  (SELECT TOP 1 transactionBal
   FROM dbo.transaction
   ORDER BY abs(datediff(ms, dbo.bal.time, TIMESTAMP))) AS newBal
FROM dbo.bal
WHERE dbo.bal.time IS NOT NULL
ORDER BY dbo.bal.time DESC 
```

# c# - 我可以在 ListView 的详细信息模式下显示链接吗？

> ID：15897925
> 
> 赞同：1
> 
> 时间：2013-04-09T09:13:23.530
> 
> 标签：c#, winforms, listview, hyperlink

在我的 Windows 应用程序中，我有一个列表视图，其中包含两列。一行中的一个子项包含如下数据。

```
 "Failed testcase path=C:\temp\test.jpg" 
```

我只需要提供超链接`C:\temp\test.jpg`。如果我点击相同的，它应该打开相应的图像。我尝试将属性更改`HotTracking`为`true`.

```
listView1.HotTracking = true; 
```

但它显示了指向列表视图中所有行的超链接。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:28:22.573

使用[ObjectListView——](http://www.codeproject.com/KB/list/ObjectListView.aspx)一个围绕标准 ListView 的开源包装器。它直接支持链接：

![替代文字](https://www.codeproject.com/KB/list/ObjectListView/hyperlinks.png)

[这](http://objectlistview.sourceforge.net/cs/recipes.html#how-do-i-show-a-hyperlink-in-a-cell)记录了简单的过程以及如何自定义它。

# c# - 如何回调参数？

> ID：15897927
> 
> 赞同：0
> 
> 时间：2013-04-09T09:13:24.837
> 
> 标签：c#, class, parameters

我想设置`textbox.text`from `class1`，但是当我按下按钮时没有任何反应。怎么了？

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }
        Class1 c;
        private void button1_Click(object sender, EventArgs e)
        {
            c = new Class1();
            c.x();
        }
    }
} 
```

而这段代码来自`class1`

```
namespace WindowsFormsApplication1
{
    class Class1
    {
        public static Form1 f;

        public void x()
        {
            f = new Form1();
            f.textBox1.Text = "hello";
        }
    }
} 
```

我已经将`textBox1`修饰符更改为公共。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T09:16:07.920

当你这样做时，`f = new Form1()`你会创建一个新表单。如果您已经有一个`Form1`open 实例，那么这将为您提供两个`Form1`. 在其中一个上调用方法不会影响另一个。您必须将表单的引用传递给您的实例`Class1`并调用该引用的方法。

有不同的方法可以做到这一点。一种可能是将引用作为参数传递给`x`方法：

```
public void x(Form1 f)
{
    f.textBox1.Text = "hello";
} 
```

当您调用时，`x`您可以将特殊变量传递给它`this`，它是代码关联的对象。`Form1`这将传递您的to实例`x`，以便`x`可以使用它。

```
c.x(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:16:58.417

```
private void button1_Click(object sender, EventArgs e)
{
    c = new Class1(this);
    c.x();
}

class Class1
{
    public static Form1 f;

    public Class1(Form1 form)
    {
        f = form;
    }

    public void x()
    {
        f.textBox1.Text = "hello";
    }
} 
```

问题是您在 x 方法中创建了一个新的 Form1 实例。根据我的代码段更改您的代码，它将起作用。

# java - 完美数法

> ID：15897930
> 
> 赞同：0
> 
> 时间：2013-04-09T09:13:29.723
> 
> 标签：java, methods, types, perfect-numbers

这个程序应该接受用户输入并确定它是否是一个完美的数字。当我尝试编译它时，我得到错误 Method testPerfect in class scalvert_Perfect cannot be applied to given types;

*   测试完美（数字）；
*   必需：int，int
*   发现：int
*   原因：实际参数列表和形式参数列表的长度不同

我的代码：

```
import java.util.Scanner;

public class scalvert_Perfect
{
public static void main ( String args[] ) 
{
    Scanner input = new Scanner(System.in);
    int test;
    int num = 0;
    int counter = 0;

    do
    {
        System.out.print("How many numbers would you like to test? ");
        test = input.nextInt();

    }while(test < 1);

    do
    {
        System.out.print("Please enter a possible perfect number: ");
        num = input.nextInt();

        testPerfect(num);
        printFactors(num);

        counter++;

    }while(counter < test);
}

    public static boolean testPerfect(int num, int test)
    {
        int sum = 0;

        for(int i = 0; i < test ; i++)
            {
                if(num % i == 0)
                {
                sum += i;
                }       

            }
                if(sum == num)
                {
                return true;
                }
                else
                {
                return false;
                }
    }       

    public static void printFactors(int num)
    {
        int x;
        int sum = 0;

        for(int factor = num - 1 ; factor > 0; factor--)
            {
                x = num % factor;

                if (x == 0)
                {
                    sum = sum+factor;
                }
            }
                if(sum != num)
                {
                    System.out.printf("%d:NOT PERFECT",num);
                }

            if(sum == num)
                {       
                    System.out.printf("%d: ",num);

                        for(int factor=1; factor < num; factor++)
                            {       
                                x = num % factor;
                                if(x == 0)
                                {
                                    System.out.printf("%d ",factor);
                                }
                            }               
                }
                System.out.print("\n");
                sum = 0;
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:15:01.663

您的函数需要两个整数，因为：

```
public static boolean testPerfect(int num, int test) 
```

你在这里用 1 个整数调用它：

```
 testPerfect(num); 
```

顺便说一句，这正是错误所说的：

功能：

```
testPerfect(num); 
```

需要两个整数

```
required :int, int 
```

但是你用一个来称呼它：

```
found: int 
```

所以错误是因为参数的数量不正确：

```
reason: actual and formal argument list differ in length 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:16:33.637

代码应该通过对`testPerfect`方法的测试，因为方法的签名是`testPerfect(int,int)`. 原始调用仅将一个传递`int`给该方法。

```
 do
    {
        System.out.print("Please enter a possible perfect number: ");
        num = input.nextInt();

        testPerfect(num,test);
        printFactors(num);

        counter++;

    }while(counter < test); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:15:42.073

采用

```
testPerfect(int num, int test) 
```

你使用了一个参数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T09:15:58.493

`testPerfect`方法有两个参数`int num`和`int test`。

`testPerfect(num);`应该产生编译器错误，因为不`testPerfect(int)`存在。

您可能需要传递两个参数 Like `testPerfect(num, test)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T09:16:33.893

你的函数需要两个`int`参数传递给它，但你只传递一个：

```
testPerfect(num); 
```

调用时尝试将两个传递给它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T09:17:45.740

你这样称呼：

```
public static boolean testPerfect(int num, int test) 
```

像这样：

```
testPerfect(num); 
```

您要么在调用中缺少参数，要么在方法签名中要求太多。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-22T15:45:06.123

```
 public static void main(String[] args) {
    int n=25;
    for(int i=0;i<=n;i++)
    {
        int v= i*i;
        if(v == n)
        {
            System.out.println("it is a perfect number");
        }
    }
} 
```

# ios - PhoneGap-iOS，如何用红色按钮显示对话框？

> ID：15897931
> 
> 赞同：3
> 
> 时间：2013-04-09T09:13:32.550
> 
> 标签：ios, cordova

我在 iOS 上使用 Phonegap，这里是显示对话框的代码：

```
navigator.notification.confirm(
              'Which color do you like most?'
            , confirmCB
            , 'Title | Confirm'
            , 'Green,Red'
        ); 
```

我想显示一个带有红色取消按钮的确认对话框，但我不知道怎么做。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:34:04.290

这对于phonegap是不可能的。

`navigator.notification.confirm`使用 native `UIAlertView`，`UIAlertView`按钮为蓝色/灰色，取消按钮为深蓝色/灰色

您可以尝试使用此库[BlockAlerts 和 ActionSheets创建一个插件](https://github.com/gpambrozio/BlockAlertsAnd-ActionSheets)

或使用 javascript/css 警报替换

# c++ - 使用 msgpack 通过 zeromq 发送向量

> ID：15897935
> 
> 赞同：3
> 
> 时间：2013-04-09T09:13:37.160
> 
> 标签：c++, zeromq, msgpack, messagepack

我似乎无法通过 ZeroMQ 发送我用 msgpack 序列化`vector`的 a 。`struct`

**这是这个结构的一个向量：**

```
struct MyData
{
    MyData() : id(0), x(0), y(0), a(0) {}
    MyData(const Obj &r) : id(0), x(r.pose[0]), y(r.pose[1]), a(r.pose[2]) {}
    MyData(const Obj *r) : id(0), x(r->pose[0]), y(r->pose[1]), a(r->pose[2]) {}
    double id;
    double x;
    double y;
    double a;
    MSGPACK_DEFINE(id, x, y, a);
}; 
```

**在发送方：**

`data`是一个`std::vector<MyData>`

```
msgpack::sbuffer sbuf;
msgpack::pack(sbuf, data);
zmq::message_t msg(sbuf.data(), sizeof(char *) * sbuf.size(), NULL, NULL);
local_socket->send(msg); // this is just zeromq's send function 
```

我构造了我的`sbuffer`还是`message_t`错误的？

**在接收方：**

我不确定我是否应该强制转换，`msg.data()`但我找不到任何关于如何使用 ZeroMQ 和消息包的好的文档。

```
message_t msg;
server_socket->recv(&msg);

msgpack::unpacked unpacked;
msgpack::unpack(&unpacked, reinterpret_cast<char*>(msg.data()), msg.size());
msgpack::object obj = unpacked.get();

std::vector<MyData> data;
obj.convert(&data);
printf("size %d\n", data.size()); 
```

**我收到以下错误：**

> 在抛出 'msgpack::type_error'
> what() 的实例后调用终止：std::bad_cast Aborted

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T09:45:57.247

这似乎对我有用：

```
msgpack::sbuffer sbuf;
msgpack::pack(sbuf, data);
zmq::message_t msg(sbuf.size());
memcpy(msg.data(), sbuf.data(), sbuf.size()); 
```

# treeview - Javafx 2 树视图过滤

> ID：15897936
> 
> 赞同：5
> 
> 时间：2013-04-09T09:13:40.420
> 
> 标签：treeview, javafx-2

如何在 JavaFX 2 中过滤节点`TreeView`？

我有一个`TextField`并且我想根据`TextField`.

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-12-23T00:45:14.200

这是我写的可重复使用的可过滤树项类。

过滤器应该绑定在*predicateProperty*上，并且您**必须**使用*getSourceChildren*方法来操作树项。

```
public class FilterableTreeItem<T> extends TreeItem<T> {
    private final ObservableList<TreeItem<T>> sourceChildren = FXCollections.observableArrayList();
    private final FilteredList<TreeItem<T>> filteredChildren = new FilteredList<>(sourceChildren);
    private final ObjectProperty<Predicate<T>> predicate = new SimpleObjectProperty<>();

    public FilterableTreeItem(T value) {
        super(value);

        filteredChildren.predicateProperty().bind(Bindings.createObjectBinding(() -> {
            Predicate<TreeItem<T>> p = child -> {
                if (child instanceof FilterableTreeItem) {
                    ((FilterableTreeItem<T>) child).predicateProperty().set(predicate.get());
                }
                if (predicate.get() == null || !child.getChildren().isEmpty()) {
                    return true;
                }
                return predicate.get().test(child.getValue());
            };
            return p;
        } , predicate));

        filteredChildren.addListener((ListChangeListener<TreeItem<T>>) c -> {
            while (c.next()) {
                getChildren().removeAll(c.getRemoved());
                getChildren().addAll(c.getAddedSubList());
            }
        });
    }

    public ObservableList<TreeItem<T>> getSourceChildren() {
        return sourceChildren;
    }

    public ObjectProperty<Predicate<T>> predicateProperty() {
        return predicate;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:28:40.397

JFX 没有提供特殊的过滤器。

所以你应该自己实现它。

您拥有的 JFX 的唯一支持 - 跟踪 TreeItems 项目的集合。当您添加或删除一个项目时，它将被添加或删除。但是从您自己实现的集合中添加或删除。

# facebook - Facebook 社交插件未显示

> ID：15897940
> 
> 赞同：0
> 
> 时间：2013-04-09T09:13:47.710
> 
> 标签：facebook, wordpress

我正在尝试让 Activity Feed Social Plugin 显示在此网站上：[http](http://wrdtempsite.com.au/qualdes/) ://wrdtempsite.com.au/qualdes/ （它是 WordPress 运行并安装了具有 FB 元数据的 WordPress SEO 插件）

什么都没有显示，但我没有收到任何错误。（它应该显示在主页的右侧）。

下面的代码：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=XXXXX";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-activity" data-site="http://wrdtempsite.com.au/qualdes/" data-app-id="XXXXX" data-width="300" data-height="600" data-header="true" data-recommendations="false"></div> 
```

我看不出有什么问题？任何帮助将非常感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:13:14.043

这是一个基本上从视图中“隐藏”小部件的 CSS 规则。

```
.fb_iframe_widget iframe {position:absolute;} 
```

我将其更改为相对位置。

# vb.net - 字体安装了吗？功能

> ID：15897941
> 
> 赞同：3
> 
> 时间：2013-04-09T09:13:48.363
> 
> 标签：vb.net, visual-studio, visual-studio-2012, fonts, font-family

我可以改进我的功能以不按每个元素搜索？

```
#Region " Font Is Installed? Function "

    ' [ Font Is Installed? Function ]
    '
    ' Examples :
    ' MsgBox(Font_Is_Installed("Lucida Console"))

    Private Function Font_Is_Installed(ByVal FontName As String) As Boolean
        Dim AllFonts As New Drawing.Text.InstalledFontCollection
        For Each Font As FontFamily In AllFonts.Families
            If Font.Name.ToLower = FontName.ToLower Then Return True
        Next
        Return False
    End Function

#End Region 
```

> 更新：

好的，现在我看到了“.tolist”函数，现在我的代码是这样的：

```
Private Function Font_Is_Installed(ByVal FontName As String) As Boolean
    Dim AllFonts As New Drawing.Text.InstalledFontCollection
    Dim FontFamily As New FontFamily(FontName)
    If AllFonts.Families.ToList().Contains(FontFamily) Then Return True Else Return False
End Function 
```

我有同样的问题：第二种方法最好改进，还是我可以更好地改进它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:24:40.383

这是

```
 Public Shared Function IsFontInstalled(ByVal FontName As String) As Boolean
        Using TestFont As Font = New Font(FontName, 10)
            Return CBool(String.Compare(FontName, TestFont.Name, StringComparison.InvariantCultureIgnoreCase) = 0)
        End Using
    End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-12T13:09:19.227

```
 Dim SomeTextBox As TextBox = New TextBox()
    Dim SomeFontFamily As FontFamily = Nothing
    Dim SomeFontCollection As PrivateFontCollection = Nothing

    Try
        SomeFontFamily = New FontFamily("SomeFontFamilyName")
    Catch ex As Exception
        SomeFontCollection = New PrivateFontCollection()
        SomeFontCollection.AddFontFile("SomeFontFileName")
        SomeFontFamily = SomeFontCollection.Families(0)
    End Try

    SomeTextBox.Font = New Font(SomeFontFamily, 12) 
```

这样 SomeFontFamily 只有在不能从本地字体创建的情况下才会从文件创建。SomeTextBox 将显示正确的字体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-23T21:01:17.450

这是一个例子。只需尝试分配一个字体名称，如果它产生错误，则捕获它并返回 false。

```
Private Function isFontInstalled(ByVal FontName As String) As Boolean
    Try
        Dim FontFamily As New FontFamily(FontName)
        FontFamily.Dispose()
        Return True
    Catch
        Return False
    End Try
End Function 
```

# c++ - C++ AVL 树重新计算高度

> ID：15897943
> 
> 赞同：3
> 
> 时间：2013-04-09T09:13:53.173
> 
> 标签：c++, treenode, avl-tree

我正在研究 AVL 树的实现，并且我的重新计算高度函数有问题。当我调用它时，我传入了树的根和一个值为 1 的变量。我单步执行了它，发现一旦它进入 while 循环，它就会按预期执行，但之后它会返回一个。你能看看它，看看我做错了什么。如果需要，我会发布更多代码，但我认为该功能将为您提供足够的信息。谢谢

```
void BinaryTree::recalculate(Node *leaf, int count)
{
    if(leaf == NULL)//if we are at the root
    {
        return;//exit the function
    }

     if((leaf->getLeft() != NULL))//if we are not at the end of the subtree
    {
        recalculate(leaf->getLeft(), count);//advance to the next node and re-enter the function

    }

     if(leaf->getRight() != NULL)//if we are not at the end of the right subtree
    {
        recalculate(leaf->getRight(), count);//advance to the next node and re-enter the program
    }

    else
    {
        while(leaf->getParent() != NULL)//calculate each subtree until we are at the root
        {
            leaf = leaf->getParent();//get the parent node
                count++;//increment the height          

            if(leaf->getLeft() != NULL)//if there is an item in the left
            {

                leaf->getLeft()->setHeight(count-1);//sets the hight of the left child
            }

             if(leaf->getRight() != NULL)//if there is an item in the right
            {
             leaf->getRight()->setHeight(count -1);//sets the height of the right child

            }
        }

        return;//exit the function
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:26:21.330

您的函数应该计算二叉树的每个子树的高度，并将该值保存在该子树的根节点中。您选择遵循一种递归方法，这是标准方法。在这种方法中，必须首先计算左子树和右子树的高度，然后将两者中的最高者作为当前节点。

在您的实现中，您使用一个名为`count`传递参数的值到递归调用。考虑到我们需要从子节点检索计数，而不是向它们传递一个计数，该值的目的是什么？

如果你：

*   `recalculate`从参数中删除该值
*   如果适用，让`recalculate`方法首先在两个孩子上调用自己
*   从`recalculate`每个子节点高度更新当前节点高度

你应该让它工作。以下是基于此算法的可能实现：

```
void BinaryTree::recalculate(Node *leaf) {
     int count = 0;
    if (leaf == NULL)  {
        return;
    }
    if (leaf->getLeft() == NULL && leaf->getRight() == NULL) {
        // no child, the height is 0
        setHeight(0);
        return;
    }
    if (leaf->getLeft() != NULL) {
        recalculate(leaf->getLeft());
        count = leaf->getLeft()->getHeight();
    }
    if (leaf->getRight() != NULL){
        recalculate(leaf->getRight());
        count = max(count, leaf->getRight()->getHeight());
    }
    // include leaf in the height
    setHeight(count+1);
} 
```

如果`getHeight`无法使用该方法，您可以通过`recalculate`返回它计算的高度来替换它。

# sql-server - 为什么 SQL Server 找不到新创建的函数？

> ID：15897944
> 
> 赞同：5
> 
> 时间：2013-04-09T09:13:53.517
> 
> 标签：sql-server, tsql, function

我想知道为什么最近我创建了函数但 SQL Server 在调用它们时返回错误，以防它们被添加到数据库的函数列表中。

例如对于以下函数，我收到这样的错误：

```
declare @cats nvarchar(1000)
set @cats = 'a|b|c|d|e'

SELECT dbo.fncSplit(@Cats, '|') 
```

错误：

> 找不到列“dbo”或用户定义的函数或聚合“dbo.fncSplit”，或者名称不明确。

示例功能：

```
CREATE FUNCTION [dbo].fncSplit
(    
    @RowData NVARCHAR(MAX),
    @Delimeter NVARCHAR(MAX)
)
RETURNS @RtnValue TABLE 
(
    ID INT IDENTITY(1,1),
    Data NVARCHAR(MAX)
) 
AS
BEGIN 
    DECLARE @Iterator INT
    SET @Iterator = 1

    DECLARE @FoundIndex INT
    SET @FoundIndex = CHARINDEX(@Delimeter,@RowData)

    WHILE (@FoundIndex>0)
    BEGIN
        INSERT INTO @RtnValue (data)
        SELECT 
            Data = LTRIM(RTRIM(SUBSTRING(@RowData, 1, @FoundIndex - 1)))

        SET @RowData = SUBSTRING(@RowData,
                @FoundIndex + DATALENGTH(@Delimeter) / 2,
                LEN(@RowData))

        SET @Iterator = @Iterator + 1
        SET @FoundIndex = CHARINDEX(@Delimeter, @RowData)
    END

    INSERT INTO @RtnValue (Data)
    SELECT Data = LTRIM(RTRIM(@RowData))

    RETURN
END 
```

任何建议或解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T09:22:19.120

这是表值函数。语法是

```
declare @cats nvarchar(1000)
set @cats = 'a|b|c|d|e'

SELECT * from dbo.fncSplit(@Cats, '|') 
```

# java - Java 的 Paint 方法存在问题，刷新速度荒谬

> ID：15897947
> 
> 赞同：1
> 
> 时间：2013-04-09T09:13:58.500
> 
> 标签：java, swing, awt, paint, repaint

我正在为大学开发一个非常简单的 R-Type 版本，但尽管它有效，但飞行速度很慢，所以运动很丑陋和笨拙。我使用repaint方法刷新屏幕，还有其他方法或最好的方法吗？

[运动视频](http://www.youtube.com/watch?v=d9KL7N35BS4&feature=youtu.be)

**主面板的绘制方法**

```
@Override
    public void paint(Graphics g) {
        super.paint(g);
        Graphics2D g2 = (Graphics2D) g;
        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
        RenderingHints.VALUE_ANTIALIAS_ON);
        g2.drawImage(fondo, 0, 0,1200,600,this);
        pj.paint(g2);
        g2D=g2;

    } 
```

**PJ的画法**

```
public void paint(Graphics2D g) {

    g.drawImage(imagen,x,y,this);
} 
```

**PJ的移动方法**

```
public void move (KeyEvent e)  {
    int dx = 0; int dy = 0;
    int code = e.getKeyCode();

    switch (code) {
    case KeyEvent.VK_Q: dy-=1; break;
    case KeyEvent.VK_A: dy+=1; break;
    case KeyEvent.VK_P: dx+=1; break;
    case KeyEvent.VK_O: dx-=1; break;
    }

    int x = (getX()<maxX&&getX()!=0) ? getX()+dx : getX();
    int y = (getY()<maxY&&getY()!=0) ? getY()+dy : getY();

    if (getY()>=maxY||getY()==0) {
        if (dy==+1) y=y+1;
    }

    setPosicion(x, y); 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T09:53:14.447

[您可以在此处](http://zetcode.com/tutorials/javagamestutorial/spaceinvaders/)找到类似程序的一个很好的示例。该示例演示了创建一个新线程并让该线程在主循环的每次迭代中休眠。

[这](http://www.cs.princeton.edu/courses/archive/spr96/cs333/java/tutorial/ui/drawing/movingImage.html)是另一个关于在 Java 中为游戏加载图像的问题。

看起来摇摆本身对于在游戏中使用图像非常糟糕。您可能需要考虑使用更合适的库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T09:53:24.073

*   图像`fondo`应该已经缩放到 1200x600。
*   我不确定，但`super.paint(g)`需要吗？你也可以使用`paintComponent`.

事件处理（您似乎在按下键时移动了 1 个像素），必须正确完成。我会设置方向和速度（1px），并将其留给摆动计时器来进行连续移动。

最好的重绘是弹性/灵活的：（`repaint(20L)`每秒50帧）；像 key-down 这样的事件可能带有`EventQueue.invokeLater(new Runnable() { ... });`.

特别是您可能会在更改区域使用重绘。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T11:06:18.977

下面是使用背景作为简单游戏循环的简单示例。它更新游戏对象的状态并计算所需的延迟以保持所需的 fps。

游戏对象 ( `Ship`) 具有在短时间内加速/减速的能力

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.awt.geom.Path2D;
import javax.swing.AbstractAction;
import javax.swing.ActionMap;
import javax.swing.InputMap;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class AnimationTest {

    public static void main(String[] args) {
        new AnimationTest();
    }

    public AnimationTest() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new GamePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class GamePane extends JPanel {

        private Ship ship;

        public GamePane() {

            ship = new Ship();
            Thread thread = new Thread(new MainLoop(this));
            thread.setDaemon(true);
            thread.start();

            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            ActionMap am = getActionMap();

            // Key controls...
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0, false), "upPressed");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0, false), "downPressed");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0, true), "upReleased");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0, true), "downReleased");

            am.put("upPressed", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    // Change the direction...
                    ship.setDirection(-1);
                    // Accelerate by 1 per frame
                    ship.setVelocity(1);
                }

            });
            am.put("downPressed", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    // Change direction
                    ship.setDirection(1);
                    // Accelerate by 1 per frame
                    ship.setVelocity(1);
                }

            });
            am.put("upReleased", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    // Deccelerate by 1 per frame
                    ship.setVelocity(-1);
                }

            });
            am.put("downReleased", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    // Deccelerate by 1 per frame
                    ship.setVelocity(-1);
                }

            });
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        public void updateState() {
            // Update the state of the game objects.
            // This would typically be better done in 
            // some kind of model
            ship.update(getWidth(), getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            // Paint the game state...
            Graphics2D g2d = (Graphics2D) g.create();
            ship.paint(g2d);
            g2d.dispose();
        }

    }

    public class MainLoop implements Runnable {

        private GamePane pane;
        private int fps = 25;

        public MainLoop(GamePane pane) {
            this.pane = pane;
        }

        @Override
        public void run() {
            // Wait until the screen is ready
            while (pane.getHeight() <= 0) {
                try {
                    Thread.sleep(125);
                } catch (InterruptedException ex) {
                }
            }
            // Main loop
            while (true) {
                // Start time loop
                long startTime = System.currentTimeMillis();
                // Update the game state
                pane.updateState();
                // Calculate the amount of time it took to update
                long elasped = System.currentTimeMillis() - startTime;
                // Calculate the number of milliseconds we need to sleep
                long sleep = Math.round((1000f / fps) - elasped);
                pane.repaint();
                if (sleep > 0) {
                    try {
                        Thread.sleep(sleep);
                    } catch (InterruptedException ex) {
                    }
                }
            }
        }

    }

    public static class Ship {

        public static int MAX_SPEED = 8;
        private int direction = 0;
        private int velocity = 0;
        private int x;
        private int y;
        private int speed = 0;
        private Path2D shape;
        private boolean initState;

        public Ship() {
            shape = new Path2D.Float();
            shape.moveTo(0, 0);
            shape.lineTo(5, 5);
            shape.lineTo(0, 10);
            shape.lineTo(0, 0);
            shape.closePath();
            initState = true;
        }

        public void setDirection(int direction) {
            this.direction = direction;
        }

        public void setVelocity(int velocity) {
            this.velocity = velocity;
        }

        public void update(int width, int height) {
            if (initState) {
                y = (height - 10) / 2;
                initState = false;
            } else {
                // Add the velocity to the speed
                speed += velocity;
                // Don't over accelerate
                if (speed > MAX_SPEED) {
                    speed = MAX_SPEED;
                } else if (speed < 0) {
                    speed = 0;
                }
                // Adjust out position if we're moving
                if (speed > 0) {
                    y += (direction * speed);
                }

                // Bounds check...
                if (y - 5 < 0) {
                    y = 5;
                } else if (y + 5 > height) {
                    y = height - 5;
                }
            }
        }

        public void paint(Graphics2D g2d) {
            int yPos = y - 5;
            g2d.translate(10, yPos);
            g2d.fill(shape);
            g2d.translate(-10, -yPos);
        }

    }

} 
```

# windows-phone-8 - FlipView 控件在 Windows Phone 8 SDK 中不可用

> ID：15897948
> 
> 赞同：2
> 
> 时间：2013-04-09T09:14:03.397
> 
> 标签：windows-phone-8

FlipView 控件在 Windows Phone 8 SDK 中不可用，实现类似功能的替代方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T14:51:12.467

这里有几个选项。如果您只想显示固定数量的“页面”，您可以使用[全景](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff941109)应用程序。如果您有很多页面要显示，您将需要使用[枢轴](http://blogs.msdn.com/b/stephanc/archive/2010/05/09/windows-phone-7-pivot-control-sample.aspx)控件。

如果您必须重新实现 FlipView，您可以通过在应用程序栏中放置“左”和“右”按钮来实现。您需要使用自定义控件构建自己的内容区域。如果你想要一个“酷”的基于手势的导航，你会想要得到[toolkit](http://phone.codeplex.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-13T05:23:51.597

这是为 WP8 定制的 FlipView 控件，例如 WINRT FlipView 控件...

第 1 步：添加一个新的用户控件并将其命名为“FlipView.xaml”

第 2 步：在“FlipView.xaml”中添加以下 xaml

```
 <Grid x:Name="LayoutRoot" Background="{StaticResource PhoneChromeBrush}">
    <ContentPresenter  Name="contentPresenter"/>
    <Button BorderThickness="0" Name="leftButton" FontSize="70" Margin="-25" HorizontalAlignment="Left" VerticalAlignment="Center" Content="&lt;" Click="Button_Click"/>
    <Button BorderThickness="0" Name="rightButton" FontSize="70" Margin="-25" HorizontalAlignment="Right" VerticalAlignment="Center" Content="&gt;" Click="Button_Click_1"/>
</Grid> 
```

第 3 步：在“FlipView.cs”中添加以下代码

```
public partial class FlipView : UserControl
{
    public FlipView()
    {
        InitializeComponent();
        Datasource = new List<object>();
        SelectedIndex = 0;
    }

    private IList Datasource;
    public static readonly DependencyProperty ItemTemplateProperty =
        DependencyProperty.Register("ItemTemplate", typeof(DataTemplate), typeof(FlipView), new PropertyMetadata(default(DataTemplate)));

    public DataTemplate ItemTemplate
    {
        get { return (DataTemplate)GetValue(ItemTemplateProperty); }
        set
        {
            SetValue(ItemTemplateProperty, value);
            contentPresenter.ContentTemplate = value;
            contentPresenter.Content = SelectedItem;
        }
    }

    public static readonly DependencyProperty ItemsSourceProperty =
       DependencyProperty.Register("ItemsSource", typeof(IList), typeof(FlipView), new PropertyMetadata(default(IList)));

    public IList ItemsSource
    {
        get { return (IList)GetValue(ItemsSourceProperty); }
        set
        {
            SetValue(ItemsSourceProperty, value);
            Datasource = value;
            SelectedIndex = SelectedIndex;
        }
    }

    public static readonly DependencyProperty SelectedIndexProperty =
        DependencyProperty.Register("SelectedIndex", typeof(int), typeof(FlipView), new PropertyMetadata(default(int)));

    public int SelectedIndex
    {
        get { return (int)GetValue(SelectedIndexProperty); }
        set
        {
            SetValue(SelectedIndexProperty, value);

            rightButton.Visibility = leftButton.Visibility = Visibility.Visible;
            if (SelectedIndex == 0)
            {
                leftButton.Visibility = Visibility.Collapsed;
            }

            if (SelectedIndex + 1 == Datasource.Count)
            {
                rightButton.Visibility = Visibility.Collapsed;
                SelectedItem = Datasource[SelectedIndex];
            }

            if (Datasource.Count > SelectedIndex + 1)
            {
                SelectedItem = Datasource[SelectedIndex];
            }
        }
    }

    public static readonly DependencyProperty SelectedItemProperty =
        DependencyProperty.Register("SelectedItem", typeof(object), typeof(FlipView), new PropertyMetadata(default(object)));

    public object SelectedItem
    {
        get { return (object)GetValue(SelectedItemProperty); }
        set
        {
            SetValue(SelectedItemProperty, value);
            contentPresenter.Content = SelectedItem;
        }
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        SelectedIndex--;
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        SelectedIndex++;
    }
} 
```

第 4 步：现在在主页上，添加命名空间以使用翻转视图用户控件

示例：xmlns:FlipViewControl="clr-namespace:ImageFlip"（注意：根据您的解决方案名称而有所不同）。

第 5 步：使用命名空间，添加翻转视图控件，如下所示。

```
 <Grid x:Name="LayoutRoot" Background="Transparent">
    <FlipViewControl:FlipView Name="imgViewer">
        <FlipViewControl:FlipView.ItemTemplate>
            <DataTemplate>
                <Image Source="{Binding}" Stretch="Fill"/>
            </DataTemplate>
        </FlipViewControl:FlipView.ItemTemplate>
    </FlipViewControl:FlipView>
</Grid> 
```

第 6 步：在 mainpage.cs 中添加以下代码

```
 // Constructor
    public MainPage()
    {
        InitializeComponent();

        // Sample code to localize the ApplicationBar
        //BuildLocalizedApplicationBar();
        imgViewer.ItemsSource = new List<string> { "/Images/1.jpg", "/Images/2.jpg", "/Images/3.jpg" };
    } 
```

希望这会有所帮助。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-10T14:19:20.953

我使用`FlipView`了 Windows Phone Toolkit 中的版本。

如果您启用了 NuGet 扩展，那么获取工具包非常容易：在解决方案资源管理器中右键单击您的项目 -> 管理 NuGet 包 -> 确保选择了在线（在左侧列中）-> 在搜索字段中输入（右侧列）“工具包”-> 单击相应包上的“安装”按钮。

使用`FlipView`后面的 from 代码很简单：

`Microsoft.Phone.Controls.FlipView flipView = new Microsoft.Phone.Controls.FlipView(); flipView.ItemSource = myItemSource; flipView.ItemTemplate = myItemTemplate;` 我更喜欢使用这种方法，因为这个 FrameworkElement 可以很好地响应滑动手势。

# html - Twitter Bootstrap 的 Youtube 嵌入问题

> ID：15897954
> 
> 赞同：-1
> 
> 时间：2013-04-09T09:14:23.977
> 
> 标签：html, twitter-bootstrap, youtube

我正在流行的 BootStrap 框架上构建一个小型静态网站。不幸的是，我无法提供链接，但基本上我已经构建了一个模态框，单击按钮会下降，其中嵌入了 YouTube 视频。

它工作正常，但如果你关闭模态框，它就会消失，但 YouTube 视频会悬停在其他所有内容上，无法摆脱它。这是在 IE10 上。

有没有其他人尝试将视频嵌入到 BootStrap 模块盒中并有解决方案？

提前致谢，

杰克

编辑

好的，这是一段代码：

```
<a id="mediaVideo" class="btn btn-primary btn-large" href="#" data-toggle="modal" data-target="#video">Watch the interview</a>

<!-- Modal -->
<div id="video" class="modal hide fade" style="color: #2a2a2a; width: 590px;" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
<h3 id="myModalLabel">This is the modal title</h3>
</div>
<div class="modal-body">
<p>Small paragraph to describe the video</p>
<iframe width="560" height="315" src="http://www.youtube.com/embed/H542nLTTbu0" frameborder="0" allowfullscreen></iframe>
</div>
<div class="modal-footer">
<button class="btn" data-dismiss="modal" aria-hidden="true">Close Window</button>
<div class="btn-group">
<a class="btn btn-primary dropdown-toggle" data-toggle="dropdown" href="#">
Share This Video
<span class="caret"></span>
</a>
<ul class="dropdown-menu" align="left">
<li><a href="http://www.facebook.com/sharer.php?u=http://www.google.com">Facebook</a></li>
<li><a href="http://twitter.com/share?text=This%20is%20the%20text&url=http://www.google.com">Twitter</a></li>
<li><a href="https://plus.google.com/share?url=http://www.google.co.uk">Google+</a></li>
</ul>
</div>
</div>
</div>
<!--END MODAL--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:25:54.520

对我来说似乎工作正常：[jsFiddle](http://jsfiddle.net/BenedictLewis/qzZ4a/)。我使用的是在[Google Developers](https://developers.google.com/youtube/player_parameters#Manual_IFrame_Embeds)`<iframe>`咨询 YouTube Embed API 页面时推荐的选项。

# heroku - Heroku 和 Environments - 域不工作

> ID：15897955
> 
> 赞同：0
> 
> 时间：2013-04-09T09:14:25.037
> 
> 标签：heroku, heroku-toolbelt

我发现在heroku上管理生产和登台环境确实是一个痛苦的过程，尤其是域、git等。

1）我创建了名为 htest 的应用程序。

2）在 htest 目录中，我执行了以下操作：

```
heroku create --app htest-staging --remote staging
heroku create --app htest-production --remote production

heroku domains:add staging.mydomain.com --app htest-staging --remote staging
heroku domains:add production.mydomain.com --app htest-production --remote production 
```

3）我提交了应用程序并启动了服务

```
git push staging master
heroku ps --app htest-staging --remote staging 
```

3）我使用 htest-staging.herokuapp.com 的 cname 将域添加到 route53

```
heroku info --app htest-staging
=== htest-staging
Web URL:       http://htest-staging.herokuapp.com/ 
```

正如预期的那样，我找不到网页。

更令人不安的是，当我访问[http://htest-staging.herokuapp.com/](http://htest-staging.herokuapp.com/)时，我在页面上看到了这个：

```
Heroku | Welcome to your new app!
Refer to the documentation if you need help deploying. 
```

我的 python 应用程序应该说你好世界。

所以..我该如何解决？

# java - 按值获取数据

> ID：15897962
> 
> 赞同：0
> 
> 时间：2013-04-09T09:14:36.190
> 
> 标签：java, xpath

我在用 Java 中的 XPath 乱七八糟，我似乎碰壁了。我有以下 XML 文档

```
<?xml version="1.0" encoding="UTF-8"?>
<database>

    <student>
        <index>1234</index>
        <courselist>
            <course name="analiza matematyczna 1" grade="5.0"/>
            <course name="kurs programowania" grade="5.5"/>
            <course name="logika i struktury formalne" grade="4.0"/>
        </courselist>
    </student>

    <student>
        <index>5678</index>
        <courselist>
            <course name="logika i struktury formalne" grade="5.0"/>
            <course name="algebra z geometrią analityczną" grade="5.0"/>
            <course name="kurs programowania" grade="5.5"/>
        </courselist>
    </student>

</database> 
```

我想检索所有至少有一个 4.0 等级的索引号。我可以单独完成这些任务，但不能完全完成。我试过

```
/database/student/courselist/course[@grade='4.0']/@name | /database/student/index/text() 
```

但结果远非理想

```
[#text: 1234]    #good
name="logika i struktury formalne"    #even better, I can display where 4.0 was achieved
[#text: 5678]    #bad, this student doesn't have even one 4.0 
```

我的问题是这样的查询在 XPath 中是否可行？当然，我将非常感谢一个工作示例:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T09:30:49.563

您当前的实现也给出了`5678`，因为`|`XPath 中的运算符表示“和”：它同时选择左侧的结果*和*右侧的结果。

你想要的是这样的：

```
/database/student[courselist/course[@grade='4.0']]/index/text() 
```

其内容为“给我所有具有课程列表的学生元素`grade=4.0`，然后给我他们`index`元素的文本内容。

# uml - Omnigraffle 类图到代码

> ID：15897977
> 
> 赞同：2
> 
> 时间：2013-04-09T09:15:22.820
> 
> 标签：uml, code-generation, wysiwyg

我使用 OmniGraffle Pro 工具制作我的 UML 类图，但我想自动从它的图中制作类似 C 的代码。也许有人知道我怎么做这个？
谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T09:17:06.270

我不认为你会处理这个。像 Rational Rose 这样的特殊计算机辅助软件工程工具可以让您做到这一点，但 OmniGraffle 实际上只是一个图形工具。它可以读取各种格式（如 DOT），但仅此而已。

原因之一是适当的 CASE 工具不仅可以绘制图形，还可以对您可以创建的结构表示和强制执行语义约束。如果您的图表要创建真正的、有意义的代码，那么执行很重要。Omnigraffle 并不真正关心您在文本字段中输入的内容，或者您​​连接的内容。

此外，UML 用于面向对象，如 C++、Java、C#。如果您在 Rational Rose 中创建了一个类，那么很明显它应该在 C++/Java/C# 中创建一个类。

在任何情况下它都不适合 C，因为 OO 不是该语言的特性。你希望它如何代表一个类？需要大量额外的样板模板代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-17T16:15:29.813

我认为[这](https://www.graffletopia.com/stencils/447)是目前 OmniGraffle 中对 UML 的最佳可用支持，但显然它只是一个模板，没有自动分析。

至于实际的 UML 工具，最全面*、*性价比最高的是Sparx [Systems的](http://www.sparxsystems.com/)[Enterprise Architect](http://www.sparxsystems.com/products/ea/index.html)。

在复杂性（和价格）范围的另一端，但仍然是“真正的”UML 图表工具是[WebSequenceDiagrams](http://www.websequencediagrams.com/)。这是一个非常棒的工具，可以将非常简洁的描述（纯文本）转换为渲染良好的图表。可用的不同图表类型的数量非常有限，但在这些限制范围内，它所做的实际上是非常令人印象深刻的，至少对我来说是这样。因为它包括交互图（免费，有一些功能限制），所以它提供了我认为 UML 中最有价值的部分，因为理解不熟悉（或以前熟悉）代码体中的交互通常是最重要和最多时间的- 成功使用该代码的消耗方面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T20:48:01.487

我想这是很多工作，但你肯定可以。我使用脚本从网络设计中生成材料清单。该脚本 100% 采用 AppleScript，在您的情况下，您可以编写一个脚本，将基本结构转储为 XML 或其他格式，然后对其进行处理以生成源代码，您甚至可以使用已经存在的工具。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-06-28T03:27:47.950

好吧，我知道如何将 Omnigraffle 决策树和状态机转换为源代码。

也许这就是您正在寻找的：

[http://www.youtube.com/watch?v=SZEQsFEvL48](http://www.youtube.com/watch?v=SZEQsFEvL48)

# c# - 可移植库、MVVM 以及如何抽象本地数据库

> ID：15897980
> 
> 赞同：0
> 
> 时间：2013-04-09T09:15:35.667
> 
> 标签：c#, windows-phone-7, mvvm, sql-server-ce, mvvm-light

我发现了这个[使用 MVVM 和便携式库的好例子，](https://skydrive.live.com/?cid=30d7e2f2bc3db6be&id=30D7E2F2BC3DB6BE!637)发现它非常有用，我想开始在我的项目和解决方案中使用它。我开始通过这个例子移植我当前的 Windows Phone 应用程序，它会满足 MVVM 模式。我只是不确定如何抽象像 SQLCE 这样的本地数据库。

我的非 MVVM 解决方案是这样的：

数据上下文

```
public class ChallengeDataContext : DataContext
{
    public const string ConnectionString = "isostore:/challenges.sdf";

    public ChallengeDataContext(string connectionString)
        : base(connectionString)
    {
        this.Challenges = this.GetTable<Challenge>();
    }

    public Table<Challenge> Challenges { get; set; }
} 
```

存储库

```
public class ChallengeRepository
{
    public static void Initialize()
    {
        using (ChallengeDataContext dc = new ChallengeDataContext(ChallengeDataContext.ConnectionString))
        {
            if (dc.DatabaseExists() == false)
            {
                dc.CreateDatabase();
                dc.SubmitChanges();
            }
        }
    }

    public static void SeedSampleData()
    {
        using (ChallengeDataContext dc = new ChallengeDataContext(ChallengeDataContext.ConnectionString))
        {
            if (dc.DatabaseExists() != false && dc.Challenges.Count() == 0)
            {
                var challenge = new Challenge("Testing", 3, ChallengeKind.Writting, false);
                dc.Challenges.InsertOnSubmit(challenge1);
                dc.SubmitChanges();
            }
        }
    }

    public Challenge GetChallengeRandomly(int difficulty, ChallengeKind kind)
    {
        using (ChallengeDataContext dc = new ChallengeDataContext(ChallengeDataContext.ConnectionString))
        {
            var challenge = (from ch in dc.Challenges
                             where ch.Difficulty == difficulty && ch.Kind == kind && ch.Shown == false
                             select ch).FirstOrDefault();
            return challenge;
        }

    }

    public void SaveChallenge(Challenge challenge)
    {
        using (ChallengeDataContext dc = new ChallengeDataContext(ChallengeDataContext.ConnectionString))
        {
            dc.Challenges.InsertOnSubmit(challenge);
            dc.SubmitChanges();
        }
    }

    public void UpdateChallengeShownAttribute(int id, bool shown)
    {
        using (ChallengeDataContext dc = new ChallengeDataContext(ChallengeDataContext.ConnectionString))
        {
            var challenge = (from ch in dc.Challenges
                             where ch.Id == id
                             select ch).FirstOrDefault();

            if (challenge != null)
            {
                challenge.Shown = shown;
                dc.SubmitChanges();
            }
        }
    }

    public void UpdateChallengeShownAttribute(int difficulty, ChallengeKind kind, bool shown)
    {
        using (ChallengeDataContext dc = new ChallengeDataContext(ChallengeDataContext.ConnectionString))
        {
            var challenges = from ch in dc.Challenges
                             where ch.Kind == kind && ch.Difficulty == difficulty
                             select ch;

            foreach (var challenge in challenges)
            {
                challenge.Shown = shown;
            }
            dc.SubmitChanges();
        }
    }
} 
```

挑战班

```
[Table(Name = "Challenges")]
public class Challenge
{
    [Column(IsPrimaryKey = true,IsDbGenerated=true)]
    public int Id { get; set; }
    [Column]
    public string Name { get; set; }
    [Column]
    public int Difficulty { get; set; }
    [Column]
    public ChallengeKind Kind { get; set; }
    [Column]
    public bool Shown { get; set; }

    public Challenge()
    {
    }

    public Challenge(string name, int difficulty, ChallengeKind kind, bool shown)
    {
        Name = name;
        Difficulty = difficulty;
        Kind = kind;
        Shown = shown;
    }
}
public enum ChallengeKind
{
    Writting,
    Telling,
    Pantomime
} 
```

我知道基础知识，创建接口没问题，但我不确定如何更改可在所有项目中使用的模型类（我可以将属性更改为 DataContract 和 DataMember，但如何将其与 SQLCE 一起使用？）。那么我必须在哪个项目中实现存储库？代码在所有平台上都是相同的，但我认为 Windows 8 不使用 SQLCE。那么这个怎么算呢？感谢帮助

# jakarta-ee - Websphere 和 logback

> ID：15897992
> 
> 赞同：1
> 
> 时间：2013-04-09T09:15:52.323
> 
> 标签：jakarta-ee, logging, websphere, java-ee-6, logback

我使用 IBM Rational Application Developer (RAD) 创建了一个动态 Web 项目。我使用 Logback 作为日志框架。我将 logback.xml 放在 WEB-INF/classes 中。但应用程序不会拾取此配置文件。日志信息记录在控制台中。但我希望这会登录一个文件。请参阅下面的 logback.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>

    <appender name="FILE"
        class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>myApp.log</file>
        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <Pattern>%d{yyyy-MM-dd_HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</Pattern>
        </encoder>

        <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
            <FileNamePattern>myApp.%i.log.zip</FileNamePattern>
            <MinIndex>1</MinIndex>
            <MaxIndex>10</MaxIndex>
        </rollingPolicy>

        <triggeringPolicy
            class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
            <MaxFileSize>2MB</MaxFileSize>
        </triggeringPolicy>

    </appender>

    <logger name="com.nyl.ltc.logging.handler" level="ALL" />

    <root level="INFO">
        <appender-ref ref="FILE" />
    </root>

</configuration> 
```

我将以下罐子放在 WEB-INF/lib

1.  logback-classic-1.0.11.jar
2.  logback-core-1.0.11.jar
3.  slf4j-api-1.7.5.jar

我正在使用 WebSphere Application Server v7.0。

请帮我解决这个问题。

注意：我在 RAD 的内部浏览器中运行该应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T08:32:22.980

尝试在 websphere 中设置 jvm 系统属性：

logback.configurationFile=/tmp/logback.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T14:19:51.237

你可以使用 ServletContextListener 并将 logback 设置为上下文。

## web.xml

```
<context-param>
    <param-name>logbackLocation</param-name>
    <param-value>/WEB-INF/classes/logback.xml</param-value>
</context-param>

<listener>
    <listener-class>com.listener.LogbackListener</listener-class>
</listener> 
```

## 回溯监听器

```
package com.listener;

import java.io.*;
import java.net.URL;
import javax.servlet.*;
import org.slf4j.*
import ch.qos.logback.*;

public class LogbackListener implements ServletContextListener {
    public static final String CONFIG_LOCATION = "logbackLocation";

    public void contextInitialized(ServletContextEvent sce) {
        ServletContext servletContext = sce.getServletContext();
        LoggerContext loggerContext = (LoggerContext) LoggerFactory.getILoggerFactory();
        String location = servletContext.getInitParameter(CONFIG_LOCATION);
        // check location

        InputStream inputStream = openInputStream(servletContext, location);
        // check inputStream
        try {
            configureLogback(/*params*/);
        } finally {
            try {
                inputStream.close();
            } catch (IOException e) {
                 servletContext.log("Could not close logback config inputstream.", e);
            }
        }
    }

    private InputStream openInputStream(ServletContext servletContext, String location) {
        InputStream inputStream = null;
        if (location == null)
            return inputStream;
        if (location.startsWith("/"))
            inputStream = servletContext.getResourceAsStream(location);
        else
            try {
                inputStream = new URL(location).openStream();
            } catch (IOException e) {
            //ommited
            }
        if (inputStream == null)
            try {
                inputStream = new FileInputStream(location);
            } catch (FileNotFoundException e) {
            //ommited
            }
        return inputStream;
    }

    private void configureLogback(/*params*/) {
        //implementation ommited
    }

     public void contextDestroyed(ServletContextEvent sce) {
        LoggerContext loggerContext = (LoggerContext) LoggerFactory.getILoggerFactory();
        loggerContext.stop();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-16T10:57:29.030

将共享库添加到 Websphere 管理控制台，到您的 logback.xml

# java - 从 Class2 调用 Class1 的 getter

> ID：15897994
> 
> 赞同：-4
> 
> 时间：2013-04-09T09:15:55.620
> 
> 标签：java, call, getter

我有一个关于面向对象编程的非常基本的问题。

有两个类 - Class1 和 Class2。我需要从 Class2 调用 Class1 的 getter（请参阅代码）。问题是无法编译下面显示的代码。如何更改此代码以能够从 Class2 调用 Class1 的 getter。那么，解决这个问题的正确方法是什么？

PS如果我将函数`getVar1`设为静态，编译器会说这`return this.var1`是不正确的。

```
public class Class1 
{
    private int var1;

    public Class1(int index1, int index2) 
    {
      //...
      Class2 c2 = new Class2();
      //..
    }

    public int getVar1()
    {
      return this.var1;
    }
}

import Class1;

public Class2
{
    public Class2() 
    {
      //...
      int var = Class1.getVar1(); // !!!
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:18:52.153

*   要调用`Class1` **没有静态**的方法，您需要该类的实例。

> 如果我将函数 getVar1 设为静态，编译器会说 return this.var1 不正确。

没错，因为`var1`不是*静态*的。您会收到如下错误：

> 无法在静态上下文中访问非静态方法

这应该给你提示。

```
class Class2{
   //pass the instance of Class1 to Class2
   public Class2(Class1 class1){
      class1.getVar1(); //invoke method here
   }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T09:19:37.663

首先`public Class2`应该是`public class Class2`

其次，如果您更改`getVar1`为静态，您也必须更改`var1`为静态（原因是您不能直接从静态函数访问非静态成员）

否则创建一个实例`Class1`并调用`getVar1()`该实例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T09:17:54.943

```
new Class1().getVar1(); 
```

您没有创建实例。在使用实例变量或方法之前创建实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T09:24:41.993

我不明白你在找什么。但暂时我做出了改变。

```
public class Class1 {
    private int var1;

    public Class1() {
    }

    public Class1(int index1, int index2) {
        // ...
        Class2 c2 = new Class2();
        // ..
    }

    public int getVar1() {
        return this.var1;
    }
}

import Class1;
public class Class2 {
    public Class2() {
        // ...
        int var = new Class1().getVar1(); // !!!
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-09T09:25:24.543

`Class1`不是**static**，因此您只能通过为其创建实例来访问其变量和函数。

```
int var = new Class1.getVar(); 
```

或make`class1`和as **static**`getVar1``var1`

 **```
public static class1 {
    private static int var1;

    public Class1(int index1, int index2)  {
        //...
        Class2 c2 = new Class2();
        //..
    }

    public static int getVar1() {
        return var1;
    }
} 
```**