# StackOverflow 问答 15548000-15548999

# python - 当我使用 python 使用 wsdl 时，我得到一个 xml.parsers.expat.ExpatError

> ID：15548002
> 
> 赞同：1
> 
> 时间：2013-03-21T12:47:14.167
> 
> 标签：python, wcf, python-2.7, wsdl, soappy

我按照[这些说明](http://msdn.microsoft.com/en-us/library/vstudio/ms733069%28v=vs.100%29.aspx)制作了一个本地 wsdl。我的本地 WSDL 中的一些行：

```
< wsdl:definitions 
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"        
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" 
xmlns:tns="http://tempuri.org/" 
xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" 
xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" 
xmlns:i0="http://Microsoft.ServiceModel.Samples" 
xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" 
xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" 
xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" 
xmlns:wsa10="http://www.w3.org/2005/08/addressing" 
xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" 
xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" 
name="CalculatorService" 
targetNamespace="http://tempuri.org/"> 
```

当我像这样使用python时：

```
 from SOAPpy import WSDL
    server = WSDL.Proxy('http://114.212.190.58:8000/ServiceModelSamples/service?wsdl')
    server.ADD(a=3,b=4) 
```

我得到错误：

```
xml.parsers.expat.ExpatError: not well-formed(invalid token): line 1, column5. 
```

# linux - 为什么我们需要在嵌入式设备中使用引导加载程序？

> ID：15548004
> 
> 赞同：23
> 
> 时间：2013-03-21T12:47:27.623
> 
> 标签：linux, embedded, arm, bootloader

我正在使用 ARM cortex-A8 上的 ELinux 内核。

我知道引导加载程序是如何工作的以及它在做什么。但我有一个问题——为什么我们需要引导加载程序，**为什么引导加载程序诞生了**？

为什么我们不能在没有引导加载程序的情况下直接将内核从闪存加载到 RAM 中？如果我们加载它会发生什么？事实上，处理器不会支持它，但我们为什么要遵循程序呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-21T23:53:33.540

在 Linux 的上下文中，引导加载程序负责一些预定义的任务。由于这个问题是[arm](/questions/tagged/arm "显示标记为“手臂”的问题")标记的，我认为[ARM 引导](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/Documentation/arm/booting.rst)可能是一个有用的资源。具体来说，引导加载程序负责建立一个`ATAG`描述 RAM 数量、内核命令行和其他参数的列表。最重要的参数之一是*机器类型*。使用*设备树*，可以传递电路板的完整描述。如果没有一些代码来设置所描述的参数，这使得库存的 ARM Linux 无法启动。

这些参数允许一个*通用*Linux 支持多个设备。例如，一个 ARM Debian 内核可以支持数百种不同的板卡类型。 **Uboot**或其他引导加载程序可以动态确定此信息，也可以对板进行硬编码。

您可能还想在堆栈溢出处查看[引导加载程序信息页面。](https://stackoverflow.com/tags/bootloader/info)

基本系统可能能够设置`ATAGS`NOR 闪存并将其复制到 SRAM。但是，它通常比这更复杂一些。Linux 需要 RAM 设置，因此您可能需要初始化 SDRAM 控制器。如果使用 NAND 闪存，则必须处理*坏块*，并且*副本*可能比`memcpy()`.

Linux 经常有一些潜在的驱动程序错误，驱动程序会假设时钟已初始化。例如，如果**Uboot**总是为特定机器初始化一个以太网时钟，Linux 以太网驱动程序可能忽略了设置这个时钟。时钟树尤其如此。

某些系统需要 Linux 不支持的引导映像格式；例如一个可以立即初始化硬件的特殊头文件；就像配置从`devices`读取初始代码一样。此外，通常有应该立即配置的硬件；引导*加载程序*可以快速完成此操作，而 Linux 的正常结构可能会显着延迟此操作，从而导致 I/O 冲突等。

从实用的角度来看，使用引导加载程序更简单。但是，没有什么可以阻止您更改 Linux 的源代码以直接从它引导；尽管它可能就像将*引导加载程序*代码直接粘贴到 Linux 的开头一样。

另请参阅：[Coreboot](http://www.coreboot.org/Welcome_to_coreboot)、[Uboot](http://www.denx.de/wiki/U-Boot)和[Wikipedia 的比较](http://en.wikipedia.org/wiki/Comparison_of_boot_loaders)。[Barebox](http://www.barebox.org/)是一个鲜为人知但结构良好且现代的 ARM 引导加载程序。 [RedBoot](http://ecos.sourceware.org/redboot/)也用于一些 ARM 系统；内核树支持 RedBoot 分区。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-21T12:54:56.010

> 引导加载程序是在完成自检后为计算机加载主操作系统或运行时环境的计算机程序。

^[来自[维基百科文章](http://en.wikipedia.org/wiki/Bootloader#Boot_loader)]

所以基本上引导加载程序正在做你想要的 - 将数据从闪存复制到操作内存中。真的就是这么简单。

如果您想了解更多有关提升操作系统的信息，我强烈建议您阅读链接的文章。引导阶段除了测试之外，还包括检查外围设备和其他一些事情。跳过它们仅在非常简单的嵌入式设备上才有意义，这就是它们的引导加载程序更简单的原因：

> 一些嵌入式系统不需要明显的引导序列即可开始运行，并且在打开时可以简单地运行存储在 ROM 中的操作程序。

[同一来源]

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T13:05:28.077

主引导加载程序通常内置于芯片中，并执行将在系统中运行的第一个用户代码的加载。

引导加载程序的存在是因为没有用于加载第一个代码的标准化协议，因为它依赖于芯片。有时代码可以通过串口、闪存甚至硬盘加载。定位它是引导加载程序功能。

加载并运行用户代码后，将不再使用引导加载程序，系统执行的正确性由用户负责。

在嵌入式 linux 链中，主引导加载程序将设置并运行 Uboot。然后Uboot会找到linux内核并加载它。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-18T19:20:00.740

> 为什么我们不能在没有引导加载程序的情况下直接将内核从闪存加载到 RAM 中？如果我们加载它会发生什么？事实上，处理器不会支持它，但我们为什么要遵循程序呢？

Bartek、Artless 和 Felipe 都给出了部分图片。

每种嵌入式处理器类型（EG 386EX、Coretex-A53、EM5200）在重置或开机时都会自动执行***某些操作。***有时，根据电源是否循环或设备是否重置，情况会有所不同***。***一些嵌入式处理器允许您根据设备通电或复位时施加到不同引脚的电压来更改***某些内容。***

***无论如何，处理器可以做的事情***是有限的，因为定义***某些东西***需要处理器上的物理空间，无论是片上闪存、指令微代码还是其他一些机制。

这个限制意味着***某物***是

*   固定的目的，尽可能快地做一件事。
*   范围和能力有限，通常将一小块代码（通常为几千字节或更少）加载到固定的内存位置并从加载代码的开头执行。
*   不可修改。

所以处理器响应复位或电源循环所做的事情不能改变，也不能做很多事情，我们不希望它自动将数百兆字节或千兆字节复制到可能不存在或可能未初始化的内存中，这可能需要很长时间。

所以....

我们设置了一个小程序，它小于我们将要使用的所有设备所允许的最小尺寸。该程序存储在***任何需要***它的地方。

有时候小程序就是U-Boot。有时甚至 U-Boot 对于初始加载来说都太大了，所以小程序会依次加载 U-Boot。

关键是***某物***加载的任何内容都可以根据特定系统的需要进行修改***。***如果是 U-Boot，很好，如果不是，它知道在哪里加载主操作系统或在哪里加载 U-Boot（或其他一些引导加载程序）。

U-Boot（一般来说是引导加载程序）然后配置一组最小的设备、内存、芯片设置等，以使主操作系统能够被加载和启动。主操作系统 init 负责任何额外的配置或初始化。

所以顺序是：

*   处理器开机或复位
*   ***加载***初始引导代码（或 U-Boot 样式嵌入式引导加载程序）
*   初始引导代码（可能不需要）
*   U-Boot（或其他通用嵌入式引导加载程序）
*   Linux 初始化

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-04T01:13:35.967

内核要求您正在使用的硬件处于特定状态。您使用的所有硬件都需要检查其状态并对其进行初始化以供进一步操作。这是在嵌入式（或任何其他环境）中使用引导加载程序的主要原因之一，除了它用于将内核映像加载到 RAM 中。
当您打开系统时，RAM 也不处于有用状态（完全初始化以供使用），我们无法将内核加载到其中。因此，我们不能直接加载内核（回答您的问题），因此需要构造来初始化它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-16T12:13:29.983

除了所有其他答案中所述的内容（这是正确的）外，在某些情况下，系统必须经历不同的执行模式，例如用于安全 ARM 芯片的 TrustZone。仍然可以将其视为一种硬件初始化，但它的特殊之处在于存在额外的限制（例如：可用内存），这使得在单个二进制文件中完成所有事情即使不是不可能，也是不切实际的，因此可以使用多个阶段的引导加载程序。

此外，出于安全原因，它们中的每一个都经过签名，并且只有在满足安全要求时才能执行其工作。

# c# - 单选按钮的 jQuery 事件绑定问题

> ID：15548007
> 
> 赞同：1
> 
> 时间：2013-03-21T12:47:29.537
> 
> 标签：c#, jquery, asp.net

当文档加载到我的单选按钮时，我试图让 jQuery 绑定一个 onClick 函数。

ASP 返回数据库并找到所有打开的标记，然后它使用原始 HTML 向页面发送响应，以制作单选按钮和标记的图像。我需要做的是让 jQuery（或与此相关的任何东西）绑定一个 onClick，它会发出点击的信号，以便我可以将该 markerId 发送回数据库以将其附加到一个人。

这是迄今为止我尝试过的粗略的[jsFiddle 。](http://jsfiddle.net/sDAWQ/1/ "jsFiddle")在调试中，我在每个函数中添加了警报，我看到它们是我应该看到的 3 倍，但`attr('id')`返回未定义。

这是将单选按钮放在表单上的 html

```
 <br />
            <p>Select open marker for new user:
            <% getMarkers(); %>
            </p> 
```

这是该调用的代码隐藏

```
 while (reader.Read())
        {
            if (readIndex % 3 == 0)
                markerTable += "<tr>";

            string markerId = reader["marker_id"].ToString();
            string fileName = reader["marker_filename"].ToString();

            markerTable += "<td><input type=\"radio\" name=\"openMarker\" value=\"" + markerId + "\" " +
                "id=\"oMrk" + markerId + "\"><label for=\"oMrk" + markerId + "\"><img src=\"/Markers/" +
                fileName + "\" /></label></input></td>";

            readIndex++;

            if (readIndex % 3 == 0)
                markerTable += "</tr>";

        }

        if (readIndex % 3 != 0)
            markerTable += "</tr>";

        markerTable += "</table>";
    }
    else
        markerTable = "<p>No empty markers. Please delete a user to continue.</p>";

    sCon.Close();
    return markerTable; 
```

我发布的小提琴有从这个函数粘贴到它的源代码。

我有两个问题。

1.  为什么这不起作用？似乎应该，我从我的 jQuery 选择器语句中获取了 3 个元素，它是从`$(document).ready()`为什么未定义属性中调用的？
2.  有一个更好的方法吗？我计划将该值放入页面变量中，然后使用 ASP 按钮将其发送回服务器到存储过程，以将该标记与来自另一个字段的一些文本添加回数据库。我意识到我可以将 onClick 事件添加到响应 html 中，但是我需要了解为什么我正在做的事情不起作用。

我对网络很陌生，所以如果我在程序上离题，我愿意接受建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:49:43.847

[关联](http://jsfiddle.net/sDAWQ/3/)

```
$(document).ready(function () {
    $('input:radio').each(function (radElem) {
        var radId = $(this).attr('id');
        alert(radId);

    });

     $('input:radio').on('click', function () {
            alert('Clicked');
        });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:53:32.617

```
$(document).ready(function () {
    $('input:radio').on('click', function() {
        alert($(this).attr('id'));
    });
}); 
```

您是否需要在停留在页面上时将值发送到服务器？（通过阿贾克斯）

还是您需要将表格发布到另一个页面？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:09:13.370

1.  它不起作用，因为您正在尝试绑定`onClick`而不是仅仅`click`
2.  其他答案为您提供了 jQuery。在每个你只需要使用`this`关键字

我在小提琴中对此进行了测试，它有效。其他人也提供了类似的答案，但无论如何，这就是小提琴：[THE FIDDLE](http://jsfiddle.net/kvYLf/1/)

> ```
> $(document).ready(function () {
>     $("input:radio").each(function () {
>         var radId = $(this).attr('id');
>         alert(radId);
>         $(this).on('click', function () {
>             alert('Clicked');
>         });
>     });
> }); 
> ```

至于更好的方法来做你想要完成的事情，我对你真正想要做的事情没有把握，对不起。虽然感觉就像您最初应该在 asp.net 中填充它一样，但是您的页面的约束可能无法实现。我不能说。

另外，继续选择以前的答案之一，我只是想向您解释为什么您所拥有的东西不起作用。

# c# - GUI 未使用计时器或 BackgroundWorker 进行更新

> ID：15548009
> 
> 赞同：0
> 
> 时间：2013-03-21T12:47:35.330
> 
> 标签：c#, user-interface, timer

我正在尝试每秒更新一次 GUI。我尝试过 System.Timers.Timer、System.Windows.Forms.Timer 和 BackgroundWorker。没有骰子。我显然错过了一些东西。

我对 BackgroundWorker 的尝试：

```
public partial class Form1 : Form
{
    List<int> counts = new List<int>() { 0, 0, 0, 0, 0, 0, 0, 0 };
    List<long> complete = new List<long>() { 0, 0, 0, 0, 0, 0, 0, 0 };

    private void button1_Click(object sender, EventArgs e)
    {
        var backgroundWorker = new BackgroundWorker();
        backgroundWorker.DoWork += new DoWorkEventHandler(UpdateGUI);
        backgroundWorker.RunWorkerAsync();

        // Do stuff that updates counts and complete

        backgroundWorker.CancelAsync();
    }

    private void UpdateGUI(object sender, EventArgs e)
    {
        var backgroundWorker = sender as BackgroundWorker;
        while (backgroundWorker.CancellationPending == false)
        {

            label1.Text = count.ToString();
            labelF1.Text = counts[0].ToString();
            labelF2.Text = counts[1].ToString();
            labelF3.Text = counts[2].ToString();
            labelF4.Text = counts[3].ToString();
            labelF5.Text = counts[4].ToString();
            labelF6.Text = counts[5].ToString();
            labelF7.Text = counts[6].ToString();
            labelF8.Text = counts[7].ToString();

            labelC1.Text = complete[0].ToString();
            labelC2.Text = complete[1].ToString();
            labelC3.Text = complete[2].ToString();
            labelC4.Text = complete[3].ToString();
            labelC5.Text = complete[4].ToString();
            labelC6.Text = complete[5].ToString();
            labelC7.Text = complete[6].ToString();
            labelC8.Text = complete[7].ToString();

            Application.DoEvents();

            Thread.Sleep(1000);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:02:23.290

尝试这个

```
public partial class Form1 : Form
{
List<int> counts = new List<int>() { 0, 0, 0, 0, 0, 0, 0, 0 };
List<long> complete = new List<long>() { 0, 0, 0, 0, 0, 0, 0, 0 };

private void button1_Click(object sender, EventArgs e)
{
    var backgroundWorker = new BackgroundWorker();
    backgroundWorker.DoWork += new DoWorkEventHandler(UpdateGUI);
    backgroundWorker.RunWorkerCompleted += backgroundWorker_RunWorkerCompleted 
    backgroundWorker.RunWorkerAsync();

    // Do stuff that updates counts and complete

    //backgroundWorker.CancelAsync();
}

private void UpdateGUI(object sender, EventArgs e)
{

        Thread.Sleep(1000);

}
private void backgroundWorker.RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
   var backgroundWorker = sender as BackgroundWorker;

        label1.Text = count.ToString();
        labelF1.Text = counts[0].ToString();
        labelF2.Text = counts[1].ToString();
        labelF3.Text = counts[2].ToString();
        labelF4.Text = counts[3].ToString();
        labelF5.Text = counts[4].ToString();
        labelF6.Text = counts[5].ToString();
        labelF7.Text = counts[6].ToString();
        labelF8.Text = counts[7].ToString();

        labelC1.Text = complete[0].ToString();
        labelC2.Text = complete[1].ToString();
        labelC3.Text = complete[2].ToString();
        labelC4.Text = complete[3].ToString();
        labelC5.Text = complete[4].ToString();
        labelC6.Text = complete[5].ToString();
        labelC7.Text = complete[6].ToString();
        labelC8.Text = complete[7].ToString();

        Application.DoEvents();

   }
 } 
```

# git - 从 github 从团队 repo 中提取时，git 强制我进行合并提交，没有冲突

> ID：15548010
> 
> 赞同：1
> 
> 时间：2013-03-21T12:47:35.933
> 
> 标签：git, github, git-merge, git-pull

我一直在与另一个人合作我们在 github 上托管的一个 repo。每次我或他拉动时，git 都会强制我们进行合并提交（vim 打开一个提交描述），尽管我们正在处理不同的文件并且肯定没有冲突。

不应该在没有额外的合并提交的情况下添加新的提交吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:54:22.463

把 git 的历史想象成一张图。您和您的同事都在进行基于提交 A 的新提交；让我们称你的 B 和他的 C。历史现在看起来像这样：

```
B     C
 \   /
  \ /
   A 
```

有两种方法可以将其重新组合在一起。一是合并：

```
 M
  / \
 /   \
B     C
 \   /
  \ /
   A 
```

另一个是变基（例如 via `git pull --rebase`）。在以下示例中，您是要变基的人：

```
B -- C -- A 
```

两者都有优点和缺点。作为一般规则，如果您尚未推送（或以其他方式共享）您的提交，rebase 工作正常，即您是唯一拥有 B 的人。如果不是这种情况，rebase 将导致非常非常烦人的问题，你会更好地合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:54:44.650

由于每次提交都记录了整个树的状态，因此即使不同的分支没有修改任何相同的文件，也需要进行合并。

虽然在这种情况下保证不会有任何文本冲突，因此 git 总是能够自动合并来自不同分支的更改，但它不能保证不会有任何语义冲突。例如，一个分支可以修改库中的方法以要求附加参数，而另一个分支则引入对该方法的新调用；即使合并不会报告任何冲突，如果没有额外的更改，生成的代码也不会工作。要求某人进行显式合并提交会引入在进行非工作提交之前捕获此类冲突的机会。在实践中，任何人都不太可能在每次进行合并时检查这种类型的冲突，

# c# - 在 linq 中求和两个别名

> ID：15548012
> 
> 赞同：0
> 
> 时间：2013-03-21T12:47:39.403
> 
> 标签：c#, linq, c#-4.0

我在 linq 中编写了这个查询，我想在选择新的 2 减时间跨度中执行这项工作 1-sum x 和 y，并在一个数字中进行多重播放，例如 30

```
var query = 
    (from c in DB.SabtHoghoghs
     join aa in DB.SabtHesabKarmands on c.KarmandID equals aa.KarmandID
     select new 
        { 
            c.Karmand.FName,
            c.BabatMah,
            x = DB.SabtHesabKarmands.Where(q => q.BabatMah.Year == c.BabatMah.Year &&
                q.BabatMah.Month == c.BabatMah.Month && q.HesabKarmand.HesabKarmandTypeID==1)
                .Sum(aaa => aaa.Tedad * aaa.HesabKarmand.Mablagh),

            y = DB.SabtHesabKarmands.Where(q => q.BabatMah.Year == c.BabatMah.Year &&
                q.BabatMah.Month == c.BabatMah.Month && q.HesabKarmand.HesabKarmandTypeID == 2)
                .Sum(aaa => aaa.Tedad * aaa.HesabKarmand.Mablagh),

            z=y-x   //how to do this(1)

            karkard = (c.Karmand.ExitTime-c.Karmand.EnterTime).Hours *30  //how to do this(2)

        }).Distinct(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:56:38.390

我将尝试指导您找到正确的解决方案。定义你的自定义类，不要使用匿名类，像这样

```
class MyClass
{
    public string FName { get; set; }
    public string BabatMah { get; set; }

    public int x { get; set; }
    public int y { get; set; }

    public int z { get { return x - y; }    }

    public int karkard { get; set; }

    // implement Equals and GetHashCode for correct behaviour of Distinct
} 
```

然后只选择计算值而不`z`进入`MyClass`

```
select new MyClass
    { 
        FName = c.Karmand.FName,
        BabatMah = c.BabatMah,
        ... 
```

为了解决`(c.Karmand.ExitTime-c.Karmand.EnterTime).Hours *30`计算，您需要提供有关 ORM 的更多详细信息。解决方案将取决于。一种通用的解决方案是提取`ExitTime`并`EnterTime`进入`MyClass`，然后以与您计算的相同的方式计算小时差`x - y`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:04:20.663

在查询中使用`let`关键字：

```
var query =
(from c in DB.SabtHoghoghs
join aa in DB.SabtHesabKarmands on c.KarmandID equals aa.KarmandID
let x = DB.SabtHesabKarmands.Where(q => q.BabatMah.Year == c.BabatMah.Year &&
        q.BabatMah.Month == c.BabatMah.Month && q.HesabKarmand.HesabKarmandTypeID == 1)
        .Sum(aaa => aaa.Tedad * aaa.HesabKarmand.Mablagh)
let y = DB.SabtHesabKarmands.Where(q => q.BabatMah.Year == c.BabatMah.Year &&
        q.BabatMah.Month == c.BabatMah.Month && q.HesabKarmand.HesabKarmandTypeID == 2)
        .Sum(aaa => aaa.Tedad * aaa.HesabKarmand.Mablagh)
select new
{
    c.Karmand.FName,
    c.BabatMah,

    X = x,
    Y = y,

    Z = y - x,   //how to do this(1)

    karkard = (c.Karmand.ExitTime - c.Karmand.EnterTime).Hours * 30  //how to do this(2)

}).Distinct(); 
```

# jpa - 无法独立于其所有者写入/删除/查询聚合对象

> ID：15548015
> 
> 赞同：0
> 
> 时间：2013-03-21T12:47:46.720
> 
> 标签：jpa, persistence, eclipselink, toplink

我有这样的课：

```
@Entity
@Indexes(value={
        @Index(name="idx_produto", columnNames={"codigoInterno"}),
        @Index(name="idx_produto_ean_com",columnNames={"eanComercial"}),
        @Index(name="idx_prod_unicidade",columnNames={"codigoInterno","empresa_id"})
})
@Customizer(ProdutoCustomizer.class)
@AggressiveCache
public class Produto implements Serializable {

    private static final long serialVersionUID = -4801725521366642420L;

    @Id @GeneratedValue(strategy=GenerationType.IDENTITY)
    private Long id;

    @Column(nullable=false, length=14)
    @NotEmpty(message="É obrigatório um código interno")
    @Length(max=14, message="O código interno não pode ultrapassar 14 digitos")
    private String codigoInterno;

    @Embedded
    private Combustivel combustivel = new Combustivel(); 
```

当我尝试“删除”这个实体时，我收到了这个错误：

```
Exception [EclipseLink-6002] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.QueryException
Exception Description: Aggregated objects cannot be written/deleted/queried independently from their owners. 
Descriptor: [RelationalDescriptor(br.com.germantech.ecf.dominio.modelo.produto.Combustivel --> [])]
Query: DeleteObjectQuery(br.com.germantech.ecf.dominio.modelo.produto.Combustivel@1a7cbdd) 
```

实际上，我不会从数据库中删除实体。如所见，我有一个定制器，它只是将产品设置为非活动状态，就像这样

```
public class ProdutoCustomizer implements DescriptorCustomizer {
    public void customize(ClassDescriptor descriptor) {
        descriptor.getQueryManager().setDeleteSQLString("update Produto set ativo = false where id = #ID");
    } 
```

那么，我在这里缺少什么？必须`Combustivel` **嵌入**，我无法改变

**编辑** 堆栈跟踪

```
[EL Warning]: 2013-03-21 10:59:34.659--UnitOfWork(12940738)--Thread(Thread[main,6,main])--Local Exception Stack: 
Exception [EclipseLink-6002] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.QueryException
Exception Description: Aggregated objects cannot be written/deleted/queried independently from their owners. 
Descriptor: [RelationalDescriptor(br.com.germantech.ecf.dominio.modelo.produto.Combustivel --> [])]
Query: DeleteObjectQuery(br.com.germantech.ecf.dominio.modelo.produto.Combustivel@d4ca28)
    at org.eclipse.persistence.exceptions.QueryException.aggregateObjectCannotBeDeletedOrWritten(QueryException.java:240)
    at org.eclipse.persistence.queries.ObjectLevelModifyQuery.prepare(ObjectLevelModifyQuery.java:205)
    at org.eclipse.persistence.queries.DeleteObjectQuery.prepare(DeleteObjectQuery.java:327)
    at org.eclipse.persistence.queries.DatabaseQuery.checkPrepare(DatabaseQuery.java:614)
    at org.eclipse.persistence.queries.DatabaseQuery.checkPrepare(DatabaseQuery.java:575)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:820)
    at org.eclipse.persistence.queries.DatabaseQuery.executeInUnitOfWork(DatabaseQuery.java:751)
    at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWorkObjectLevelModifyQuery(ObjectLevelModifyQuery.java:108)
    at org.eclipse.persistence.queries.DeleteObjectQuery.executeInUnitOfWorkObjectLevelModifyQuery(DeleteObjectQuery.java:119)
    at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWork(ObjectLevelModifyQuery.java:85)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2875)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1602)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1584)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1535)
    at org.eclipse.persistence.queries.DeleteObjectQuery.executeDatabaseQuery(DeleteObjectQuery.java:194)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:852)
    at org.eclipse.persistence.queries.DatabaseQuery.executeInUnitOfWork(DatabaseQuery.java:751)
    at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWorkObjectLevelModifyQuery(ObjectLevelModifyQuery.java:108)
    at org.eclipse.persistence.queries.DeleteObjectQuery.executeInUnitOfWorkObjectLevelModifyQuery(DeleteObjectQuery.java:119)
    at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWork(ObjectLevelModifyQuery.java:85)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2875)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1602)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1584)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1535)
    at org.eclipse.persistence.internal.sessions.CommitManager.deleteAllObjects(CommitManager.java:334)
    at org.eclipse.persistence.internal.sessions.CommitManager.deleteAllObjects(CommitManager.java:283)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabase(UnitOfWorkImpl.java:1422)
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitToDatabase(RepeatableWriteUnitOfWork.java:634)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabaseWithChangeSet(UnitOfWorkImpl.java:1509)
    at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitRootUnitOfWork(RepeatableWriteUnitOfWork.java:266)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitAndResume(UnitOfWorkImpl.java:1147)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commitInternal(EntityTransactionImpl.java:84)
    at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:63)
    at br.com.germantech.ecf.aplicacao.interceptors.TransactionInterceptor.invoke(TransactionInterceptor.java:61)
    at com.google.inject.internal.InterceptorStackCallback$InterceptedMethodInvocation.proceed(InterceptorStackCallback.java:72)
    at com.google.inject.internal.InterceptorStackCallback.intercept(InterceptorStackCallback.java:52)
    at br.com.germantech.ecf.infraestrutura.persistencia.repositorios.ProdutoRepositoryImpl$$EnhancerByGuice$$d68cdfa4.delete(<generated>)
    at br.com.germantech.ecf.infraestrutura.persistencia.repositorios.ProdutoRepositoryImpl.delete(ProdutoRepositoryImpl.java:1)
    at br.com.germantech.ecf.aplicacao.services.ProdutoService.delete(ProdutoService.java:66)
    at br.com.germantech.ecf.telas.editors.ProdutoEditor.excluirRegistro(ProdutoEditor.java:231)
    at br.com.germantech.ecf.telas.editors.GermantechEditor$2.widgetSelected(GermantechEditor.java:108)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:248)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at br.com.germantech.ecf.aplicacao.internal.Application.start(Application.java:39)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

# keyboard-hook - 全局键盘挂钩

> ID：15548016
> 
> 赞同：1
> 
> 时间：2013-03-21T12:47:48.607
> 
> 标签：keyboard-hook, setwindowshookex

我需要捕获全局键盘消息，所以我使用 SetWindowsHookEx() 和 WH_KEYBOARD_LL。但它仅在应用程序处于焦点时有效，并且不会全局触发回调。几乎相同的代码适用于 mouse_LL（具有另一个结构等）请帮助！

```
public const int WH_KEYBOARD_LL = 13;
public const int VK_INSERT = 0x2D;
public delegate int HookProc(int nCode, IntPtr wParam, IntPtr lParam);
HookProc KeyboardHookProcedure;

[DllImport("user32.dll", CharSet = CharSet.Auto,
   CallingConvention = CallingConvention.StdCall)]
  public static extern int SetWindowsHookEx(int idHook, HookProc lpfn,
  IntPtr hInstance, int threadId);

[DllImport("user32.dll", CharSet = CharSet.Auto,
   CallingConvention = CallingConvention.StdCall)]
  public static extern bool UnhookWindowsHookEx(int idHook);

[DllImport("user32.dll", CharSet = CharSet.Auto,
   CallingConvention = CallingConvention.StdCall)]
  public static extern int CallNextHookEx(int idHook, int nCode,
  IntPtr wParam, IntPtr lParam);

[DllImport("kernel32.dll", CharSet = CharSet.Auto, SetLastError = true)]
  private static extern IntPtr GetModuleHandle(string lpModuleName);

[StructLayout(LayoutKind.Sequential)]
  private struct KBDLLHOOKSTRUCT
  {
     public uint vkCode;
     public uint scanCode;
     public uint flags;
     public uint time;
     public IntPtr dxExtraInfo;
  }

private void SetHookKeyboard()
  {
     if (kHook == 0)
     {
        KeyboardHookLL();

        //If the SetWindowsHookEx function fails.
        if (kHook == 0)
        {
           MessageBox.Show("SetWindowsHookEx Failed");
           return;
        }
        button1.Text = "UnHook Windows Hook";
     }
     else
     {
        bool ret = UnhookWindowsHookEx(kHook);
        //If the UnhookWindowsHookEx function fails.
        if (ret == false)
        {
           MessageBox.Show("UnhookWindowsHookEx Failed");
           return;
        }
        kHook = 0;
        this.Text = "Keyboard Hook";
     }
  }

private void KeyboardHookLL()
  {
     KeyboardHookProcedure = new HookProc(MainForm.KeyboardHookProc);
     kHook = SetWindowsHookEx(WH_KEYBOARD_LL, KeyboardHookProcedure,   GetModuleHandle("user32"), 0);
  }

public static int KeyboardHookProc(int nCode, IntPtr wParam, IntPtr lParam)
  {
     KBDLLHOOKSTRUCT MyKeyboardHookStruct = (KBDLLHOOKSTRUCT)Marshal.PtrToStructure(lParam, typeof(KBDLLHOOKSTRUCT));
     if (nCode < 0)
     {
        return CallNextHookEx(hHook, nCode, wParam, lParam);
     }
     else
     {
        Form tempForm = Form.ActiveForm;
        tempForm.Text = MyKeyboardHookStruct.vkCode.ToString();
        if (MyKeyboardHookStruct.vkCode == VK_INSERT)
        {
           MainForm.botAlive = false;
           MessageBox.Show(MainForm.botAlive.ToString());
        }
        return CallNextHookEx(hHook, nCode, wParam, lParam);
     }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-23T20:43:55.103

这里归功于乔恩：

[当您有句柄时，int vs IntPtr？](https://stackoverflow.com/questions/4316550/int-vs-intptr-when-you-have-a-handle)

我知道这是一篇旧帖子，我有点离题了，但我注意到原始代码中有一个险恶的缺点，它可能会在适当的时候转过来咬你非常非常糟糕（我知道在我的情况下确实如此）：

```
 [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
  public static extern int SetWindowsHookEx(int idHook, HookProc lpfn, IntPtr hInstance, int threadId); 
```

应该更优选的是：

```
 [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
   static extern IntPtr SetWindowsHookEx(HookType hookType, HookProc lpfn, IntPtr hMod, uint dwThreadId); 
```

其他签名也应该进行类似的更改。**即使 microsoft 本身有资源显示 SetwindowsHookEx 以 int 作为返回类型 ( [https://support.microsoft.com/en-us/kb/318804](https://support.microsoft.com/en-us/kb/318804) )，您也不应该轻松地将 'IntPtr' 替换为其他类型**。在这种情况下，'int' 仅在 32 位操作系统中等同于 'IntPtr'。在 64 位平台中，'IntPtr' 是 64 位，而 'int' 继续只有 32 位，这会打开一整罐蠕虫。使用 'int' 最糟糕的方面之一是，如果 SetWindowsHookEx 的返回值不适合它，那么您很可能最终会得到一个损坏的 int 句柄（它很少见，但并非不可想象）。

**这意味着如果您的应用程序的生命周期超过了您取消挂钩/处置挂钩的时间点（并不是说取消挂钩调用将从...开始工作），那么您最终可能会完全冻结鼠标和/或键盘直到宿主进程被杀死。**大多数人会在那时简单地重新启动机器并完全丢弃您的应用程序。所有这些“键盘/鼠标冻结”的事情发生是因为未处理的钩子需要到达主机应用程序的消息泵，这显然不可能发生，因为它所属的组件在处理过程中已经崩溃 - 哇哦！

TL;DR：请注意您正在使用的 p/invoke 方法的签名，尤其是 IntPtrs。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T07:56:47.847

问题出在“调试”功能中。

```
Form tempForm = Form.ActiveForm; 
```

# javascript - JavaScript 正则表达式首先找到不等于

> ID：15548017
> 
> 赞同：0
> 
> 时间：2013-03-21T12:47:53.850
> 
> 标签：javascript, regex, indexof

我有一个简单的正则表达式来获取任何不是（字母）、（数字）或（%）的东西

```
str.indexOf(/[^a-zA-Z0-9%]/); 
```

但是，我总是得到`-1`.

这是一个例子`str`：

```
Check out this awesome video! 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:50:50.540

您不能将正则表达式放入 indexOf。改用搜索。

有关更多信息，请参阅此内容：[是否有 JavaScript 的 String.indexOf() 版本允许使用正则表达式？](https://stackoverflow.com/questions/273789/is-there-a-version-of-javascripts-string-indexof-that-allows-for-regular-expr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:20:27.163

```
"Check out this awesome video!".replace(/./g,function(match){
  return '0x'+match.charCodeAt(0).toString(16);
}); 
```

返回字符串的十六进制表示。如果您只想转换字母数字字符，请将`.`正则表达式中的替换为`\w`.

# json - Struts2 Json 插件响应定制

> ID：15548020
> 
> 赞同：2
> 
> 时间：2013-03-21T12:48:01.097
> 
> 标签：json, struts2, struts2-json-plugin

我有一些具有属性的bean。json响应是例如

```
bean:[{"id":"1", "name":"Jack", "lastname":"Poter"}] 
```

struts-json-plugin 中有什么方法可以像这样转换响应吗？

```
bean:[{"id":"id", "value":"1"}, {"id":"name", "value":"Jack"},...] 
```

非常感谢！

# javascript - JQuery 的错误 - 但我不知道如何解决

> ID：15548022
> 
> 赞同：0
> 
> 时间：2013-03-21T12:48:02.610
> 
> 标签：javascript, jquery

[文件位于：www.maharrington.co.uk/click](http://www.maharrington.co.uk) 为我们的学生广播电台建立网站 - 此代码在 Firefox 中有效，但由于某种原因在 Chrome 中无效。我读过以前的帖子，他们有类似的错误，这是由于 JavaScript 没有放在页面顶部 - 但是，将所有 JavaScript 移到标题中，我不明白为什么仍然有很多页面错误（在 Chrome 调试控制台中运行）。

```
 <!-- the jScrollPane script -->
            <script type="text/javascript" src="js/jquery.mousewheel.js"></script>      
            <script type="text/javascript" src="js/jquery.contentcarousel.js"></script>
        <script type="text/javascript">
                    $('#ca-container').contentcarousel();
        </script>       
        <script type="text/javascript">
            var aImages = [ "images/banner/banner1.jpg" , "images/banner/banner2.jpg", "images/banner/banner3.jpg", "images/banner/banner4.jpg",];
            var oImage = null;
            var iIdx = 0;

    function play(){
    try{
            //look only once in DOM and cache it
            if(oImage===null){
            oImage = window.document.getElementById("imgHolder");
            }
            oImage.src = aImages[(++iIdx)%(aImages.length)];
        setTimeout('play()',10000);
        }catch(oEx){
        //some error handling here
        }
        }
        </script>       
</head>
    <body onload="play()">
<section id="content">
    <section id="headerArea">
        <section id="mainHeader">
            <section id="leftHeader">
                <a href="index.php"> <img src="images/clicklogowb.png" height="200px" width="330"> </a>
            </section>          
            <section id="rightHeader">
                <section id="rightTop">
                    <img src="images/header.png">
                </section>
        </section>
    <style type="text/css"> #mainContent {margin-top:-16%;} </style>
<link href="css/presenters.css" rel="stylesheet">
<!-- the jScrollPane script -->
        <script type="text/javascript" src="js/jquery.mousewheel.js"></script>
        <script type="text/javascript" src="js/jquery.contentcarousel.js"></script>
        <script type="text/javascript">
            $('#ca-container').contentcarousel();
        </script>
<section id="mainContent">
        <section id="blocks">
                <section id="topBlocks">

  <br>
    <h5>Presenters</h5>
            <div id="ca-container" class="ca-container">
                <div class="ca-wrapper">
                    <div class="ca-item ca-item-1">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Priscilla</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>The greatness of a nation and its moral progress can be judged by the way in which its animals are treated.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">

                                <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>
                                                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-2">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Lucy</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>I hold that the more helpless a creature, the more entitled it is to protection by man from the cruelty of man.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-3">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Nat</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>I feel that spiritual progress does demand at some stage that we should cease to kill our fellow creatures for the satisfaction of our bodily wants.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>
                                                    </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-4">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Katya</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A man is but the product of his thoughts what he thinks, he becomes.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-5">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Rebecca</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A weak man is just by accident. A strong but non-violent man is unjust by accident.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                                <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-6">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Dan</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>An error does not become truth by reason of multiplied propagation, nor does truth become error because nobody sees it.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">

                                <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-7">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Rebecca</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A small body of determined spirits fired by an unquenchable faith in their mission can alter the course of history.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">

                                <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-8">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Diarmuid</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A nation's culture resides in the hearts and in the soul of its people.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-9">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Sian</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A nation's culture resides in the hearts and in the soul of its people.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-10">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Etienne</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A nation's culture resides in the hearts and in the soul of its people.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-11">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Matthew</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A nation's culture resides in the hearts and in the soul of its people.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-12">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Alex</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A nation's culture resides in the hearts and in the soul of its people.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-13">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Jamie</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A nation's culture resides in the hearts and in the soul of its people.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-14">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Matt</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A nation's culture resides in the hearts and in the soul of its people.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-15">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Sam</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A nation's culture resides in the hearts and in the soul of its people.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-16">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Stefan</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A nation's culture resides in the hearts and in the soul of its people.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-17">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>George</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A nation's culture resides in the hearts and in the soul of its people.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    </div>
                </div> 
```

如果您更容易查看，我可以通过电子邮件/其他方式提供代码文件吗？

* * *

以下是错误：

```
Uncaught ReferenceError: jQuery is not defined jquery.mousewheel.js:78
Uncaught ReferenceError: jQuery is not defined jquery.contentcarousel.js:257
Uncaught ReferenceError: $ is not defined shows.php:34
[blocked] The page at scm-intranet.tees.ac.uk/users/l1009357/click_new/shows.php ran insecure content from ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js
Uncaught ReferenceError: jQuery is not defined jquery.easing.1.3.js:39
Uncaught ReferenceError: jQuery is not defined jquery.mousewheel.js:78
Uncaught ReferenceError: jQuery is not defined jquery.contentcarousel.js:257
Uncaught ReferenceError: $ is not defined shows.php:267 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:54:14.473

您提到问题出在您的 jQuery 代码中。我看到的唯一 jQuery 调用是这个：

```
$('#ca-container').contentcarousel(); 
```

如果这不能正常工作，很有可能是因为您需要等待执行该操作，直到加载文档：

```
$(document).on('ready', function() {
    $('#ca-container').contentcarousel();
}); 
```

否则`ca-container`执行 jQuery 代码时该元素不存在。

* * *

***更新：***

您还忘记将 jQuery 库包含在`<head>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:53:31.947

试试这个，也许它的工作：

```
$(document).ready(function(){
   $('#ca-container').contentcarousel();
}); 
```

调用`contentcarousel()`完全加载后的窗口

您还需要在另一个 js 库之前包含 jquery：

```
 <script type="text/javascript" src="js/jquery.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:56:06.923

将您的轮播 jQuery 代码从 body 移动到 head 元素并在 document.ready 事件上调用它，还包括对 jQuery 库本身的引用：

```
<head>
<script src="http://code.jquery.com/jquery-latest.min.js"
    type="text/javascript"></script>
 <style type="text/css"> #mainContent {margin-top:-16%;} </style>
<link href="css/presenters.css" rel="stylesheet">
<!-- the jScrollPane script -->
        <script type="text/javascript" src="js/jquery.mousewheel.js"></script>

            <script type="text/javascript" src="js/jquery.contentcarousel.js"></script>
        <script type="text/javascript">
                    $(document).ready(function(){
                        $('#ca-container').contentcarousel();
                    });
        </script>       
        <script type="text/javascript">
            var aImages = [ "images/banner/banner1.jpg" , "images/banner/banner2.jpg", "images/banner/banner3.jpg", "images/banner/banner4.jpg",];
            var oImage = null;
            var iIdx = 0;

    function play(){
    try{
            //look only once in DOM and cache it
            if(oImage===null){
            oImage = window.document.getElementById("imgHolder");
            }
            oImage.src = aImages[(++iIdx)%(aImages.length)];
        setTimeout('play()',10000);
        }catch(oEx){
        //some error handling here
        }
        }
        </script>   

</head>
    <body onload="play()">
<section id="content">
    <section id="headerArea">
        <section id="mainHeader">
            <section id="leftHeader">
                <a href="index.php"> <img src="images/clicklogowb.png" height="200px" width="330"> </a>
            </section>          
            <section id="rightHeader">
                <section id="rightTop">
                    <img src="images/header.png">
                </section>
        </section>

<section id="mainContent">
        <section id="blocks">
                <section id="topBlocks">

  <br>
    <h5>Presenters</h5>
            <div id="ca-container" class="ca-container">
                <div class="ca-wrapper">
                    <div class="ca-item ca-item-1">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Priscilla</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>The greatness of a nation and its moral progress can be judged by the way in which its animals are treated.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">

                                <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>
                                                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-2">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Lucy</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>I hold that the more helpless a creature, the more entitled it is to protection by man from the cruelty of man.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-3">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Nat</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>I feel that spiritual progress does demand at some stage that we should cease to kill our fellow creatures for the satisfaction of our bodily wants.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>
                                                    </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-4">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Katya</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A man is but the product of his thoughts what he thinks, he becomes.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                            <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-5">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Rebecca</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>A weak man is just by accident. A strong but non-violent man is unjust by accident.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">
                                                                <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                                    <p>When, while the lovely valley teems with vapour around me, and the meridian sun strikes the upper surface of the impenetrable foliage of my trees, and but a few stray gleams steal into the inner sanctuary, I throw myself down among the tall grass by the trickling stream;</p>
                                    <p>She packed her seven versalia, put her initial into the belt and made herself on the way.</p>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="ca-item ca-item-6">
                        <div class="ca-item-main">
                            <div class="ca-icon"></div>
                            <h3>Dan</h3>
                            <h4>
                                <span class="ca-quote">&ldquo;</span>
                                <span>An error does not become truth by reason of multiplied propagation, nor does truth become error because nobody sees it.</span>
                            </h4>
                                <a href="#" class="ca-more">more...</a>
                        </div>
                        <div class="ca-content-wrapper">
                            <div class="ca-content">

                                <a href="#" class="ca-close">close</a>
                                <div class="ca-content-text">
                                    <p>I am so happy, my dear friend, so absorbed in the exquisite sense of mere tranquil existence, that I neglect my talents. I should be incapable of drawing a single stroke at the present moment; and yet I feel that I never was a greater artist than now.</p>
                   ---------------- TRUNCATED 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T12:58:36.310

你遇到了什么错误？

您是否忘记在片段中包含 Jquery？

您在页面中包含以下脚本两次（在头部和正文中）。

```
<script type="text/javascript" src="js/jquery.mousewheel.js"></script>      
<script type="text/javascript" src="js/jquery.contentcarousel.js"></script> 
```

这可能是问题所在，请确保您在 document.ready 中添加插件代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T12:58:51.807

你收到错误`Uncaught ReferenceError: jQuery is not defined`

确保您在任何其他脚本之前引用了 jQuery。您甚至包含 jquery.js 吗？

在包含任何其他脚本之前尝试将其添加到 head 部分

`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>`

# clang - Clang 优化级别

> ID：15548023
> 
> 赞同：120
> 
> 时间：2013-03-21T12:48:03.177
> 
> 标签：clang, compiler-optimization, user-manual

对于 gcc，[手册](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html#Optimize-Options)解释了`-O3`,`-Os`等根据特定优化参数 ( , 等) 翻译`-funswitch-loops`的`-fcompare-elim`内容

*我正在寻找 clang 的相同信息*。

我在[网上查看](http://clang.llvm.org/docs/UsersManual.html)过，`man clang`其中仅提供一般信息（`-O2`优化比 更积极`-O1`，`-Os`优化大小，...），并且还查看了 Stack Overflow 并找到[了这个](https://stackoverflow.com/questions/13924136/what-optimization-passes-are-done-for-o4-in-clang)，但我在引用的源文件中没有找到任何相关内容.

**编辑：**我找到了答案，但*如果*有人有指向用户手册的链接，该用户手册记录了所有优化过程和. 目前我刚刚找到[了这个](http://llvm.org/docs/Passes.html)通行证列表，但没有关于优化级别。`-O*x*`

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2013-03-21T12:55:19.560

我发现[了这个](https://stackoverflow.com/questions/7796151/where-to-find-the-optimization-sequence-for-clang-ox)相关的问题。

综上所述，了解编译器优化通道：

```
llvm-as < /dev/null | opt -O3 -disable-output -debug-pass=Arguments 
```

*正如Geoff Nixon*的回答 (+1)中所指出的，`clang`还运行了一些更高级别的优化，我们可以通过以下方式检索：

```
echo 'int;' | clang -xc -O3 - -o /dev/null -\#\#\# 
```

个人通行证的文档可[在此处](http://llvm.org/docs/Passes.html)获得。

您可以比较更改高级标志的效果，`-O`如下所示：

```
diff -wy --suppress-common-lines  \
  <(echo 'int;' | clang -xc     - -o /dev/null -\#\#\# 2>&1 | tr " " "\n" | grep -v /tmp) \
  <(echo 'int;' | clang -xc -O0 - -o /dev/null -\#\#\# 2>&1 | tr " " "\n" | grep -v /tmp)
# will tell you that -O0 is indeed the default. 
```

* * *

对于**6.0 版**，通行证如下：

*   基线（`-O0`）：

    *   *`opt`设置*：-tti -verify -ee-instrument -targetlibinfo -assumption-cache-tracker -profile-summary-info -forceattrs -basiccg -always-inline -barrier
    *   *`clang`添加*：-mdisable-fp-elim -mrelax-all
*   **`-O1`**是根据`-O0`

    *   *`opt`添加*：-targetlibinfo -tti -tbaa -scoped-noalias -assumption-cache-tracker -profile-summary-info -forceattrs -inferattrs -ipsccp -称为值传播 -globalopt -domtree -mem2reg -deadargelim -basicaa -aa -loops -lazy -branch-prob -lazy-block-freq -opt-remark-emitter -instcombine -simplifycfg -basiccg -globals-aa -prune-eh -always-inline -functionattrs -sroa -memoryssa -early-cse-memssa -speculative-execution -lazy-value-info -jump-threading -correlated-propagation -libcalls-shrinkwrap -branch-prob -block-freq -pgo-memop-opt -tailcallelim -reassociate -loop-simplify -lcssa-verification -lcssa -scalar-evolution -loop-rotate -licm -loop-unswitch -indvars -loop-idiom -loop-deletion -loop-unroll -memdep -memcpyopt -sccp -demanded-bits -bdce -dse -postdomtree -adce -barrier -rpo-functionattrs -globaldce -float2int -loop-accesses -loop-distribute-loop-vectorize -loop-load-elim -alignment-from-assumptions -strip-dead-prototypes -loop-sink -instsimplify -div-rem-pairs -verify -ee-instrument -early-cse -lower-expect
    *   *`clang`添加*：-momit-leaf-frame-pointer
    *   *`clang`滴*：-mdisable-fp-elim -mrelax-all
*   **`-O2`**是根据`-O1`

    *   *`opt`添加*：-inline -mldst-motion -gvn -elim-avail-extern -slp-vectorizer -constmerge
    *   *`opt`滴*：-总是内联
    *   *`clang`添加*：-vectorize-loops -vectorize-slp
*   **`-O3`**是根据`-O2`

    *   *`opt`添加*：-callsite-splitting -argpromotion
*   **`-Ofast`**基于`-O3`, 有效`clang`但不在`opt`

    *   *`clang`添加*：-fno-signed-zeros -freciprocal-math -ffp-contract=fast -menable-unsafe-fp-math -menable-no-nans -menable-no-infs -mreassociate -fno-trapping-math -ffast-math -仅有限数学
*   **`-Os`**类似于`-O2`

    *   *`opt`滴*：-libcalls-shrinkwrap 和 -pgo-memopt-opt
*   **`-Oz`**是根据`-Os`

    *   *`opt`滴*：-slp-vectorizer

* * *

对于**3.8 版**，通行证如下：

*   基线（`-O0`）：

    *   *`opt`设置*：-targetlibinfo -tti -verify
    *   *`clang`添加*：-mdisable-fp-elim -mrelax-all
*   **`-O1`**是根据`-O0`

    *   *`opt`添加*：-globalopt -demanded-bits -branch-prob -inferattrs -ipsccp -dse -loop-simplify -scoped-noalias -barrier -adce -deadargelim -memdep -licm -globals-aa -rpo-functionattrs -basiccg -loop-idiom -forceattrs -mem2reg -simplifycfg -early-cse -instcombine -sccp -loop-unswitch -loop-vectorize -tailcallelim -functionattrs -loop-accesses -memcpyopt -loop-deletion -reassociate -strip-dead-prototypes -loops -basicaa -correlated -传播 -lcssa -domtree -always-inline -aa -block-freq -float2int -lower-expect -sroa -loop-unroll -alignment-from-assumptions -lazy-value-info -prune-eh -jump-threading -loop -rotate -indvars -bdce -scalar-evolution -tbaa -assumption-cache-tracker
    *   *`clang`添加*：-momit-leaf-frame-pointer
    *   *`clang`滴*：-mdisable-fp-elim -mrelax-all
*   **`-O2`**是根据`-O1`

    *   *`opt`添加*：-elim-avail-extern -mldst-motion -slp-vectorizer -gvn -inline -globaldce -constmerge
    *   *`opt`滴*：-总是内联
    *   *`clang`添加*：-vectorize-loops -vectorize-slp
*   **`-O3`**是根据`-O2`

    *   *`opt`添加*：-argpromotion
*   **`-Ofast`**基于`-O3`, 有效`clang`但不在`opt`

    *   *`clang`添加*：-fno-signed-zeros -freciprocal-math -ffp-contract=fast -menable-unsafe-fp-math -menable-no-nans -menable-no-infs
*   **`-Os`**是相同的`-O2`

*   **`-Oz`**是根据`-Os`

    *   *`opt`滴*：-slp-vectorizer
    *   *`clang`滴*：-矢量化循环

* * *

----------

对于**3.7 版**，通行证如下（上面命令的解析输出）：

*   默认（-O0）：-targetlibinfo -verify -tti

*   -O1 基于 -O0

    *   *添加*：-sccp -loop-simplify -float2int -lazy-value-info -correlated-propagation -bdce -lcssa -deadargelim -loop-unroll -loop-vectorize -barrier -memcpyopt -loop-accesses -assumption-cache-tracker -reassociate -loop-deletion -branch-prob -jump-threading -domtree -dse -loop-rotate -ipsccp -instcombine -scoped-noalias -licm -prune-eh -loop-unswitch -alignment-from-assumptions -early-cse -inline -cost -simplifycfg -strip-dead-prototypes -tbaa -sroa -no-aa -adce -functionattrs -lower-expect -basiccg -loops -loop-idiom -tailcallelim -basicaa -indvars -globalopt -block-freq -scalar-evolution -memdep -总是内联
*   -O2 基于 -01

    *   *添加*：-elim-avail-extern -globaldce -inline -constmerge -mldst-motion -gvn -slp-vectorizer
    *   *删除*：-always-inline
*   -O3 基于 -O2

    *   *添加*：-argpromotion -verif
*   -Os 与 -O2 相同

*   -Oz 基于 -Os

    *   *删除*：-slp-vectorizer

* * *

----------

对于**3.6 版**，通行证记录在 GYUNGMIN KIM 的帖子中。

* * *

----------

对于**3.5 版**，通行证如下（上面命令的解析输出）：

*   默认（-O0）：-targetlibinfo -verify -verify-di

*   -O1 基于 -O0

    *   *添加*：-correlated-propagation -basiccg -simplifycfg -no-aa -jump-threading -sroa -loop-unswitch -ipsccp -instcombine -memdep -memcpyopt -barrier -block-freq -loop-simplify -loop-vectorize -inline-cost -branch-prob -early-cse -lazy-value-info -loop-rotate -strip-dead-prototypes -loop-deletion -tbaa -prune-eh -indvars -loop-unroll -reassociate -loops -sccp -always-inline -basicaa -dse -globalopt -tailcallelim -functionattrs -deadargelim -notti -scalar-evolution -lower-expect -licm -loop-idiom -adce -domtree -lcssa
*   -O2 基于 -01

    *   *添加*：-gvn -constmerge -globaldce -slp-vectorizer -mldst-motion -inline
    *   *删除*：-always-inline
*   -O3 基于 -O2

    *   *添加*：-argpromotion
*   -Os 与 -O2 相同

*   -Oz 基于 -Os

    *   *删除*：-slp-vectorizer

* * *

----------

对于**3.4 版**，通行证如下（上面命令的解析输出）：

*   -O0：-targetlibinfo -preverify -domtree -verify

*   -O1 基于 -O0

    *   *添加*：-adce -always-inline -basicaa -basiccg -correlated-propagation -deadargelim -dse -early-cse -functionattrs -globalopt -indvars -inline-cost -instcombine -ipsccp -jump-threading -lazy-value-info -lcssa -licm -loop-deletion -loop-idiom -loop-rotate -loop-simplify -loop-unroll -loop-unswitch -loops -lower-expect -memcpyopt -memdep -no-aa -notti -prune-eh -reassociate -scalar -evolution -sccp -simplifycfg -sroa -strip-dead-prototypes -tailcallelim -tbaa
*   -O2 基于 -01

    *   *添加*：-barrier -constmerge -domtree -globaldce -gvn -inline -loop-vectorize -preverify -slp-vectorizer -targetlibinfo -verify
    *   *删除*：-always-inline
*   -O3 基于 -O2

    *   *添加*：-argpromotion
*   -Os 与 -O2 相同

*   -Oz 基于 -O2

    *   *删除*：-barrier -loop-vectorize -slp-vectorizer

* * *

----------

对于**3.2 版**，通行证如下（上面命令的解析输出）：

*   -O0：-targetlibinfo -preverify -domtree -verify

*   -O1 基于 -O0

    *   *添加*：-sroa -early-cse -lower-expect -no-aa -tbaa -basicaa -globalopt -ipsccp -deadargelim -instcombine -simplifycfg -basiccg -prune-eh -always-inline -functionattrs -simplify-libcalls -lazy-value -info -jump-threading -correlated-propagation -tailcallelim -reassociate -loops -loop-simplify -lcssa -loop-rotate -licm -loop-unswitch -scalar-evolution -indvars -loop-idiom -loop-deletion -loop-unroll -memdep -memcpyopt -sccp -dse -adce -strip-dead-prototypes
*   -O2 基于 -01

    *   *添加*：-inline -globaldce -constmerge
    *   *删除*：-always-inline
*   -O3 基于 -O2

    *   *添加*：-argpromotion
*   -Os 与 -O2 相同

*   -Oz 与 -Os 相同

* * *

-------------

**编辑** *[2014 年 3 月]*从列表中删除了重复项。

**编辑** *[2014 年 4 月]*添加了 3.4 的文档链接 + 选项

**编辑** *[2014 年 9 月]*添加了 3.5 的选项

**编辑** *[2015 年 12 月]*添加了 3.7 的选项并提及 3.6 的现有答案

**编辑** *[2016 年 5 月]*为 opt 和 clang 添加了 3.8 的选项，并提到了 clang 的现有答案（相对于 opt）

**编辑** *[2018 年 11 月]*添加 6.0 的选项

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-12-20T04:09:50.313

@Antoine 的回答（以及链接的其他问题）准确地描述了启用的*LLVM*优化，但还有一些其他特定于 Clang 的选项（即影响降低到 AST 的选项）受`-O[0|1|2|3|fast]`标志影响。

你可以看看这些：

`echo 'int;' | clang -xc -O0 - -o /dev/null -\#\#\#`

`echo 'int;' | clang -xc -O1 - -o /dev/null -\#\#\#`

`echo 'int;' | clang -xc -O2 - -o /dev/null -\#\#\#`

`echo 'int;' | clang -xc -O3 - -o /dev/null -\#\#\#`

`echo 'int;' | clang -xc -Ofast - -o /dev/null -\#\#\#`

例如，`-O0`启用`-mrelax-all`、`-O1`启用`-vectorize-loops`和、`-vectorize-slp`以及`-Ofast`启用`-menable-no-infs`、、、和。`-menable-no-nans``-menable-unsafe-fp-math``-ffp-contract=fast``-ffast-math`

* * *

@Techogrebo：

是的，不一定需要其他 LLVM 工具。尝试：

`echo 'int;' | clang -xc - -o /dev/null -mllvm -print-all-options`

此外，您可以单独使用 Clang 检查/修改许多更详细的选项……您只需要知道如何找到它们！

尝试几个：

`clang -help`

`clang -cc1 -help`

`clang -cc1 -mllvm -help`

`clang -cc1 -mllvm -help-list-hidden`

`clang -cc1as -help`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-07T07:14:50.990

**LLVM 3.6** **-O1**

通过参数：-targetlibinfo -no-aa -tbaa -scoped-noalias -assumption-cache-tracker -basicaa -notti -verify-di -ipsccp -globalopt -deadargelim -domtree -instcombine -simplifycfg -basiccg -prune-eh -inline-cost -always -inline -functionattrs -sroa -domtree -early-cse -lazy-value-info -jump-threading -correlated-propagation -simplifycfg -domtree -instcombine -tailcallelim -simplifycfg -reassociate -domtree -loops -loop-simplify -lcssa -loop -rotate -licm -loop-unswitch -instcombine -scalar-evolution -loop-simplify -lcssa -indvars -loop-idiom -loop-deletion -function_tti -loop-unroll -memdep -memcpyopt -sccp -domtree -instcombine -lazy-value -info -jump-threading -correlated-propagation -domtree -memdep -dse -adce -simplifycfg -domtree -instcombine -barrier -domtree -loops -loop-simplify -lcssa -branch-prob -block-freq -scalar-evolution -loop -vectorize -instcombine-simplifycfg -domtree -instcombine -loops -loop-simplify -lcssa -scalar-evolution -function_tti -loop-unroll -alignment-from-assumptions -strip-dead-prototypes -verify -verify-di

**-O2 基于 -O1**

添加：-inline -mldst-motion -domtree -memdep -gvn -memdep -scalar-evolution -slp-vectorizer -globaldce -constmerge

并删除：-always-inline

**-O3 基于 -O2**

添加：-argpromotion

# c++ - 没有 typedef 的结构 - 不能在指向成员的指针中使用

> ID：15548025
> 
> 赞同：1
> 
> 时间：2013-03-21T12:48:06.320
> 
> 标签：c++, types, casting, pointer-to-member

我有一个简单的结构，我想要一个指向成员 c 的指针。我正在使用 MSVC2012，如果我不将 struct abc 声明为类型定义（typedef），我就不能使用它.. 怎么会？

```
struct abc
{
    int a;
    int b;
    char c;
};

char (struct abc)::*ptt1 = &(struct abc)::c; // Error: error C2144: syntax error : 'abc' should be preceded by ')'

typedef struct abc;
char abc::*ptt1 = &abc::c; // Compiles just fine 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T12:50:32.697

> 如果我不将 struct abc 声明为类型定义（typedef），我就不能使用它.. 怎么会？

你可以，而且你不需要`struct`关键字，也不需要`typedef`. 只需这样做：

```
char abc::*ptt1 = &abc::c; 
```

# ios - 收到内存警告的未知原因

> ID：15548033
> 
> 赞同：1
> 
> 时间：2013-03-21T12:48:20.020
> 
> 标签：ios, xcode, uiimage, instruments, nsmutabledictionary

让我快点来发。到目前为止，我的代码没有问题。我唯一关心的是内存管理。让我让我的应用程序逻辑清晰。

1.  当应用程序全局启动时，声明了 NSmutableDictionary 并将近 300 个图像添加到该字典中，并使用 pathForResource:ofType 方法添加了各种键和图像。

2.  在我的 rootViewController 加载后，我的 35 个自定义 UIView 被添加到具有另一个键的同一个全局字典中。（这个 rootViewController 不会经常使用）

3.  我有 4 个 ViewControllers，我将在其中使用这个 UIViews 和图像到全局字典中的所有 ViewControllers。

4.  当移动到另一个视图控制器时，我释放视图并使其为零。

5.  我的问题是当我在 ViewControllers 之间快速移动（ 1 --> 2 --> 3 --> 4 -->1 ）。如果我这样做 4 - 6 次，它就会崩溃。

6.  如果我慢慢移动，它会在 10 到 15 次后崩溃。

即使我的 Live 字节最大为 5 MB，我也不知道它崩溃的原因。我从控制台和设备日志中得到的只是接收到的内存警告。使用仪器时无泄漏和无脏尺寸或常驻尺寸。

在模拟器中运行时，我仅在多个设备上才遇到此问题，但我遇到了此问题。

我有以下疑问

*   在全局字典中添加所有内容是否好。我的想法是减少每个 ViewControllers 的加载时间

*   为了重用相同的图像，我们可以使用 pathForResource 或图像命名方法..

提前致谢 ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T13:00:13.990

所以你的问题：

> 收到内存警告的未知原因

第一个原因：

> 当应用程序全局启动时，声明了 NSmutableDictionary 并 **将近 300 个图像添加到该字典**中，并使用 pathForResource:ofType 方法添加了各种键和图像。

第二个原因：

> 在我的 rootViewController 加载后，我的**35 个自定义 UIView 被添加到具有另一个键的同一个全局字典中。**（这个rootViewController不会经常使用）

其他问题：

> 在全局字典中添加所有内容是否好。我的想法是减少每个 ViewControllers 的加载时间

不，这不是......[延迟初始化](http://en.wikipedia.org/wiki/Lazy_initialization)？

> 为了重用相同的图像，我们可以使用 pathForResource 或图像命名方法..

你可以使用任何你想要的东西，只要你真正需要它时使用它。

# c# - 绑定后图像不显示在列表框中

> ID：15548038
> 
> 赞同：0
> 
> 时间：2013-03-21T12:48:36.377
> 
> 标签：c#, xml, windows-phone-7

我有一个问题，在列表框中显示绑定文本但没有绑定图像。我很好地下载并解析了一个 xml 文件并显示我想要的文本，但随后想根据状态显示图像。`Linename`并`Service`显示 OK 但绑定图像根本不显示。Atype 仅用于调用 GetImage 方法（我知道不整洁）。然后它应该根据状态设置 ImageSource 但根本不显示图像。

```
 XElement XmlTweet = XElement.Parse(e.Result);
 var ns = XmlTweet.GetDefaultNamespace();

 listBox1.ItemsSource = from tweet in XmlTweet.Descendants(ns + "LineStatus")
                                   select new FlickrData
   {

 Linename = tweet.Element(ns + "Line").Attribute("Name").Value,                                     
 Service = tweet.Element(ns + "Status").Attribute("Description").Value,
 Atype = GetImage(tweet.Element(ns + "Status").Attribute("Description").Value)

    };

     public String GetImage(String type)
    {
      FlickrData f = new FlickrData();
        switch(type)
    {

        case "Good Service":
            f.Type = new BitmapImage(new Uri("/Images/status_good.png", UriKind.Relative));
            break;
        case "Minor Delays":
            f.Type = new BitmapImage(new Uri("/Images/status_minor.png", UriKind.Relative));
            break;
        case "Severe Delays":
            f.Type = new BitmapImage(new Uri("/Images/status_severe.png", UriKind.Relative));
            break;
        case "Planned Closure":
            f.Type = new BitmapImage(new Uri("/Images/status_minor.png", UriKind.Relative));
            break;
       }
      return "anything";
    } 
```

在 FlickrData 中，这是一个`Type`不显示图像源的简单设置。

```
 public class FlickrData

    {
        public string Linename { get; set; }
        public string Service { get; set; }
        public string Detail { get; set; }
        public ImageSource Type { get; set; }
        public string Atype { get; set; }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:51:52.100

在这种情况下，转换器就派上用场了。

首先，您在 XAML 中的图像应该这样定义

```
<Image Source="{Binding Path=Atype, Converter={StaticResource AtypeToImageConverter}}" Width="100" Height="100"/> 
```

然后在项目中创建一个转换器类。（右键单击项目名称 -> 选择 Add -> 选择 Class ）

将类命名为“AtypeToImageConverter”

```
public class AtypeToImageConverter: IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (targetType != typeof(ImageSource))
            throw new InvalidOperationException("The target must be an ImageSource");

        BitmapImage result = null;
        int type = value.ToString();

        switch (type)
        {
            case "Good Service":
                result = new BitmapImage(new Uri("/Images/status_good.png", UriKind.Relative));
                break;

            case "Minor Delays":
                result = new BitmapImage(new Uri("/Images/status_minor.png", UriKind.Relative));
                break;

            //other cases
        }

        return result;
    }

    public object ConvertBack(object value, Type targetType, object parameter,
        System.Globalization.CultureInfo culture)
    {
        throw new NotSupportedException();
    }

} 
```

它会变魔术。您可以从 FlickrData 类中删除类型。有任何疑问，只是谷歌如何在 C# 中使用转换器

# asp.net - 如何使复选框列表的行为类似于 Vb.net 中的单选按钮？

> ID：15548041
> 
> 赞同：0
> 
> 时间：2013-03-21T12:48:40.447
> 
> 标签：asp.net, vb.net

让我解释一下我自己在 VB.net asp.net 中做一个应用程序，我想放置一个复选框列表而不是单选按钮，因为我的客户希望它是方形的而不是圆形的。我得到的唯一问题是当我选中一个复选框时，另一个没有被选中。我不确定我是否足够清楚，请随时问我问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:11:24.907

如上所示，不建议这样做。但是，如果你必须这样做，这是我在 jQuery 中制作的方法：

创建您的复选框并为其分配类

```
<input type="checkbox" class="cbr"/>CB 1
<input type="checkbox" class="cbr"/>CB 2
<input type="checkbox" class="cbr"/>CB 3
<input type="checkbox" class="cbr"/>CB 4
<input type="checkbox" class="cbr"/>CB 5 
```

和 jQuery

```
$(".cbr").click(function() {
    $(".cbr").prop("checked", false);
    this.checked = true;
}); 
```

这是一个演示：http: [//jsfiddle.net/g2YMs/](http://jsfiddle.net/g2YMs/)

此外，如果您使用 ASP.NET 控件创建复选框，则应使用以下方法选择它们：

```
$("#<%=IdOfControl.ClientID%>") 
```

当然，如果您决定采用 jQuery 方式，这是当然的。

# c# - 使用定时器更新标签

> ID：15548044
> 
> 赞同：2
> 
> 时间：2013-03-21T12:48:56.210
> 
> 标签：c#, string, visual-studio, timer

我有一个`label`充满两个的`strings`，彼此非常短，所以只有最后一个在中`string`可见。`.Text property``label`

我想在它们之间暂停 1.5 秒`strings`，例如：

```
string strMessage1 = "ONE";

string strMessage2 = "TWO";

Label.Text = strMessage1;
//Pause of 1.5 seconds
Label.Text = strMessage2; 
```

现在我尝试通过以下方式设置一个`timer`：

```
private void FillString()
{
     stringTimer = new System.Timers.Timer();
     stringTimer.Interval = 1500;
     stringTimer.Elapsed += new System.Timers.ElapsedEventHandler(OnStringTimerElapsed);

     Label.Text = strMessage1;
     stringTimer.Start();
}

private void OnStringTimerElapsed(object sender, EventArgs e)
{
     Label.Text = strMessage2;
} 
```

但它只显示第一个`string`，`label`对第二个没有任何作用。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T20:34:29.233

分配第二个字符串值后，使标签对象无效。

```
Label1.Invalidate(); 
```

# javascript - RequireJS 和函数

> ID：15548046
> 
> 赞同：0
> 
> 时间：2013-03-21T12:49:01.757
> 
> 标签：javascript, requirejs

my 的一部分`main.js`包含以下功能：

```
function isTrue(x){...}
function resizeEditors() {...}
function updateLayout() {...}
function prettify() {...}
function setTheme(theme) {...}
function themedLayout(isDark){...}
function enablePanel(panel) {...}
function disablePanel(panel) {...}
function enableDefaultPanels() {...}
function toggleFullscreen() {...}
function toggleEditorFullscreen(selected) {...} 
```

有没有办法让这些函数对我`main.js`的文件的依赖项可用？

例如，在`editors.js`我正在使用该`isTrue`函数但 editors.js 模块当前无法找到`isTrue`，因为它在`main.js`文件中

```
editors.setShowPrintMargin( isTrue( settings.showPrintMargin ) ); 
```

* * *

**编辑**：

项目的样子：

`main.js`：

```
require(['jquery', 'appSession', 'editors'], function ($, appSession, editors) {
    function isTrue(x){...}
    function resizeEditors() {...}
    function updateLayout() {...}
    function prettify() {...}
    function setTheme(theme) {...}
    function themedLayout(isDark){...}
    function enablePanel(panel) {...}
    function disablePanel(panel) {...}
    function enableDefaultPanels() {...}
    function toggleFullscreen() {...}
    function toggleEditorFullscreen(selected) {...}
}); 
```

`editors.js`：

```
define(['jquery', 'appSession'], function($, appSession){
    ...
    editors.setShowPrintMargin( isTrue( settings.showPrintMargin ) );
    ...
    return editors;
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:01:15.287

是的，您可以退货。

```
define(function () {
    return {
        isTrue: function() {
            // Code
        },
        otherFunction: function() {
            // Code
        }
    }
}); 
```

然后用他们的屁股

```
require(["main"], function(main) {

    main.isTrue(false);

}); 
```

[您可以在网站](http://requirejs.org/docs/api.html#define)上了解有关定义模块的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:04:02.543

您可以创建一个包含共享/全局功能的模块，并使其成为需要它的模块的依赖项：

globals.js：

```
define([], function() {
    function isTrue(x){}
    // rest of functions...
    function toggleEditorFullscreen(selected) {}

    return { // return functions... };
}); 
```

然后使用它：

```
require(["globals", "editors"], function(globals, editors) {
    // ...
    editors.setShowPrintMargin(globals.isTrue(settings.showPrintMargin));
    // ...
}); 
```

或者如果你想在 editors 模块中使用它，你的 editors.js 看起来像：

```
define(["globals"], function(globals) {
    // ...
    setShowPrintMargin(globals.isTrue(settings.showPrintMargin));
    // ...
}); 
```

或者，如果您真的希望它们是全球性的，您应该能够：

```
window.isTrue = function(valueToCheck) {
    // implementation ...
}; 
```

# ruby-on-rails - Rails 在视图中关联记录计数

> ID：15548047
> 
> 赞同：2
> 
> 时间：2013-03-21T12:49:10.150
> 
> 标签：ruby-on-rails, ruby, activerecord

我有两个模型，故事和投票。我有一个用户可以投票的文章列表，该列表作为单独的投票存储在投票模型中。

故事模型有很多投票，story_id 与投票记录一起存储。

目前，在我对故事视图的索引操作中，我只是想简单地计算一下给定故事有多少票，我正在使用以下代码实现这一点。

```
<%= @total_votes = Vote.where(:story_id => story.id).count %> 
```

但是我想从我的故事索引操作视图中删除它，但不确定是否要存储它？有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:04:59.040

似乎关系是故事有很多选票。因此，您可以简单地执行以下操作：

```
<%= story.votes.count %> 
```

如果您担心数据库性能，您可能需要添加一个[计数器缓存](http://railscasts.com/episodes/23-counter-cache-column)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:04:34.583

你说你想存储总票值：

```
$~ rails g migration add_total_votes_to_stories total_votes:integer

class Story
  after_save, :update_total_votes

  private

  def update_total_votes
    write_attribute :total_votes, votes.count
  end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:58:19.290

在模型内部，您可以定义一个方法并在控制器中使用它。

```
def total_votes(sid)
  where(:story_id => sid ).count
end 
```

然后在控制器中：

```
@total_votes = Vote.total_votes(story_id) 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-21T12:51:39.813

这应该进入控制器

```
def index
  @total_votes = Vote.where(:story_id => story.id).count
end 
```

# c# - 从 excel 中获取价值并将其加载到字典中的性能问题

> ID：15548048
> 
> 赞同：0
> 
> 时间：2013-03-21T12:49:11.963
> 
> 标签：c#, .net

```
private void btnImportFromxls_Click(object sender, RoutedEventArgs e)
    {
        Excel.Application myapp = new Excel.Application();
        Excel.Workbook wb = myapp.Workbooks.Open(@"D:\MyExcel.xls");
        Excel.Worksheet sheet = (Excel.Worksheet)wb.Worksheets.get_Item(1);
        Dictionary<object, object> dictionary = new Dictionary<object, object>();
        for (int i = 1; i < sheet.UsedRange.Rows.Count; i++)
        {
            object key = ((Excel.Range)sheet.Cells[i, 1]).Value2;
            object value = ((Excel.Range)sheet.Cells[i, 2]).Value2;

            dictionary.Add(key,value);
        }
    } 
```

具有 8,000 行数据的 excel 文件（MyExcel.xls）。当我尝试使用上述代码将数据加载到字典中时，将 excel 数据加载到字典中需要很长时间。有没有其他方法可以加快将数据加载到字典中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:01:19.287

比遍历范围内的所有单元格更快的是：

```
using XLS = Microsoft.Office.Interop.Excel;

object[,] arrWks;
object objKom;
string strKom;

arrWks = (object[,])sheet.UsedRange.get_Value(XLS.XlRangeValueDataType.xlRangeValueDefault);

for (int intRow=arrWks.GetLowerBound(0); intRow<=arrWks.GetUpperBound(0); intRow++)
{
    for (int intCol=arrWks.GetLowerBound(1); intCol<=arrWks.GetUpperBound(1); intCol++)
    {
        objKom = arrWks[intRow, intCol];
        strKom = objKom == null ? "" : objKom.ToString();       

        //do rest of your logic here
    }
} 
```

您也可以只遍历指定的列，而不是迭代整个 arrWks。

# c# - ASP.NET MVC - 如何在文件位于另一个站点时返回 FileResult？

> ID：15548050
> 
> 赞同：3
> 
> 时间：2013-03-21T12:49:14.883
> 
> 标签：c#, asp.net, asp.net-mvc

我正在编写 url 重定向器。现在我正在努力解决这个问题：

假设我有这个方法：

```
public FileResult ImageRedirect(string url) 
```

我将此字符串作为输入传递：`http://someurl.com/somedirectory/someimage.someExtension` .

现在，我希望我的方法从 下载该图像`someurl`，并将其作为`File()`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T12:52:26.770

使用[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx)class从远程url下载文件，然后使用`Controller.File`方法返回。[`DownLoadData`](http://msdn.microsoft.com/en-us/library/xz398a3f%28v=vs.80%29.aspx)WebClient 类中的方法将为您解决问题。

所以你可以写一个像这样的动作方法，它接受文件名（文件的url）

```
public ActionResult GetImage(string fileName)
{
    if (!String.IsNullOrEmpty(fileName))
    {
        using (WebClient wc = new WebClient())
        {                   
            var byteArr= wc.DownloadData(fileName);
            return File(byteArr, "image/png");
        }
    }
    return Content("No file name provided");
} 
```

所以你可以通过调用来执行这个

```
yoursitename/yourController/GetImage?fileName="http://somesite.com/logo.png 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-12T14:16:18.470

因为您**可能允许**用户让您的服务器下载网络上的任何文件，所以我认为您希望限制最大下载文件大小。

为此，您可以使用以下代码：

```
public static MemoryStream downloadFile(string url, Int64 fileMaxKbSize = 1024)
{
    try
    {
        HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(new Uri(url));
        webRequest.Credentials = CredentialCache.DefaultCredentials;
        webRequest.KeepAlive = true;
        webRequest.Method = "GET";

        HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse();
        Int64 fileSize = webResponse.ContentLength;
        if (fileSize < fileMaxKbSize * 1024)
        {
            // Download the file
            Stream receiveStream = webResponse.GetResponseStream();
            MemoryStream m = new MemoryStream();

            byte[] buffer = new byte[1024];

            int bytesRead;
            while ((bytesRead = receiveStream.Read(buffer, 0, buffer.Length)) != 0 && bytesRead <= fileMaxKbSize * 1024)
            {
                m.Write(buffer, 0, bytesRead);
            }

            // Or using statement instead
            m.Position = 0;

            webResponse.Close();
            return m;
        }
        return null;
    }
    catch (Exception ex)
    {
        // proper handling
    }

    return null;
} 
```

在你的情况下，像这样使用：

```
public ActionResult GetImage(string fileName)
{

    if (!String.IsNullOrEmpty(fileName))
    {
        return File(downloadFile(fileName, 2048), "image/png");
    }
    return Content("No file name provided");
} 
```

*fileMaxKbSize*表示允许的最大大小，以 kb 为单位（默认为 1Mb）

# sql - 将行数据分组和汇总到 MS-SQL 中的列中？

> ID：15548055
> 
> 赞同：2
> 
> 时间：2013-03-21T12:49:29.360
> 
> 标签：sql, sql-server-2008, append, pivot

[原始问题](https://stackoverflow.com/questions/15395776/create-append-table-with-sum-of-values-grouped-in-different-categories)

我不知道我应该打开一个新问题还是取消标记最后一个问题！所以，我想做的是：

```
WorkWeek  Catg  Item    Cost
WorkWeek1 Cat1  Item1   Price
WorkWeek1 Cat1  Item2   Price
WorkWeek1 Cat2  Item3   Price
WorkWeek1 Cat3  Item4   Price
WorkWeek1 Cat3  Item1   Price
WorkWeek2 Cat1  Item1   Price
WorkWeek2 Cat2  Item2   Price
WorkWeek3 Cat1  Item1   Price
WorkWeek4 Cat1  Item2   Price
.
.
WorkWeekA CatB  ItemC   Price 
```

我想创建一个新表，列出每个工作周，然后列出该工作周内每个 catg 的总价格。这就是我现在正在做的事情，但是查询只是将每个 ww 的所有内容相加，给我所有工作周的相同总和：

```
select
    workweek
    ,(select sum(cost) from DataTable where Catg = 'Cat1') as Cat1TotalCost
    ,(select sum(cost) from DataTable where Catg = 'Cat2') as Cat2TotalCost
    ,(select sum(cost) from DataTable where Catg = 'Cat3') as Cat3TotalCost
    .
    .
    .
    .
from DataTable
group by Workweek 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:38:50.233

你也可以像这样做枢轴：

```
select workweek,
       sum(case when Catg = 'Cat1' then cost end) as Cat1TotalCost,
       sum(case when Catg = 'Cat2' then cost end) as Cat2TotalCost,
       sum(case when Catg = 'Cat3' then cost end) as Cat3TotalCost
from DataTable
group by Workweek 
```

您不应该为每个值执行单独的子查询。

该`pivot`声明也是一个非常合理的选择。我倾向于坚持使用显式版本（上图），因为它让我在添加列时更加灵活。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T12:53:53.197

您可以使用[**`PIVOT`**](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)table 运算符来代替：

```
SELECT *
FROM
(
  SELECT workweek, catg, cost
  FROM datatable
) AS t
PIVOT
(
  SUM(cost)
  FOR catg IN (Cat1, Cat2, Cat3)
) AS p; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!3/83383/5)

* * *

如果您不想`catg`手动列出值，并且希望为`catg`表中的所有值动态地执行此操作，则可以使用动态 SQL 动态地执行此操作。就像是：

```
DECLARE @cols AS NVARCHAR(MAX);
DECLARE @query AS NVARCHAR(MAX);

select @cols = STUFF((SELECT distinct ',' +
                        QUOTENAME(catg)
                      FROM datatable                      
                      FOR XML PATH(''), TYPE
                     ).value('.', 'NVARCHAR(MAX)') 
                        , 1, 1, '');

SELECT @query = 
    'SELECT 
      *
    FROM 
    (
      SELECT workweek, catg, cost
      FROM datatable
    ) AS t
    PIVOT
    (
      SUM(cost)
      FOR catg IN ( ' + @cols + ')
    ) AS p';

EXECUTE( @query); 
```

[**更新的 SQL Fiddle 演示**](http://www.sqlfiddle.com/#!3/83383/8)

# c# - 访问 ListView 中的项目

> ID：15548057
> 
> 赞同：-2
> 
> 时间：2013-03-21T12:49:35.370
> 
> 标签：c#, android, visual-studio-2012, xamarin

我正在编写一个语音识别程序，它将结果显示在`ListView`. 我想要完成的是允许点击一个项目（识别结果）向谷歌翻译引擎发出请求，并取回翻译结果。

我不确定的是如何制作`ListView`可点击，以便我可以添加翻译代码。

这是我到目前为止所拥有的：

```
IList<String> matches = data.GetStringArrayListExtra(RecognizerIntent.ExtraResults);
voice_list.Adapter = new ArrayAdapter<String>(this, Android.Resource.Layout.SimpleListItem1, matches); 
```

为了使项目`ListView`可点击，我需要添加什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:57:04.037

在java中我会写

```
voice_list.setOnItemClickListner(...) 
```

所以在xamaring这个方法也应该存在。

但是还有更多 C#-ish 方式：

```
voice_list.ItemClick += delegate(object sender, ItemEventArgs args)
       {
        // When clicked, show a toast with the TextView text  
        // do what you want
       }; 
```

# mono - 最新的单声道发行说明在哪里

> ID：15548065
> 
> 赞同：4
> 
> 时间：2013-03-21T12:49:48.220
> 
> 标签：mono

我正在尝试查找单声道版本 2.10.11 和 2.10.12 的发行说明，但似乎找不到它们。我能找到的最新版本是 2.10.9。 [http://www.mono-project.com/Release_Notes_Mono_2.10.9](http://www.mono-project.com/Release_Notes_Mono_2.10.9)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:08:33.437

Mono 更新到版本 3。

查看最新的单声道发行说明：

[http://www.mono-project.com/Release_Notes_Mono_3.0#New_in_Mono_3.0](http://www.mono-project.com/Release_Notes_Mono_3.0#New_in_Mono_3.0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T07:21:40.007

MAC OS X、Windows 和 openSUSE 的实际 Mono 版本是 3.2：

[http://www.mono-project.com/Release_Notes_Mono_3.2](http://www.mono-project.com/Release_Notes_Mono_3.2)

# c# - 如何在 mvc 控制器中创建确认框？

> ID：15548073
> 
> 赞同：15
> 
> 时间：2013-03-21T12:49:52.880
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, messagebox

我需要在 mvc 控制器中创建确认框吗？使用这个“是”或“否”值，我需要在我的控制器中执行操作。我们如何做到这一点？

示例代码：

```
 public ActionResult ActionName(passing value)
        {
             // some code 
             message box here
               if (true)
                     { true code}
              else { else code}
       } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T13:03:45.343

您可以使用 ActionLink 做到这一点

```
@Html.ActionLink(
    "Delete", 
    "DeleteAction", 
    "Product", 
    new { confirm = true, other_parameter = "some_more_parameter" }, 
    new { onclick = "return confirm('Do you really want to delete this product?')" }) 
```

如果用户确认，则链接参数将传递给控制器​​操作方法。

```
public ActionResult DeleteAction(bool confirm, string other_parameter)
{
    // if user confirm to delete then this action will fire
    // and you can pass true value. If not, then it is already not confirmed.

    return View();
} 
```

**更新**

您不能在控制器端显示消息框。但你可以这样做

```
public ActionResult ActionName(passing value)
{
     // some code 
     message box here
     if (true){ ViewBag.Status = true }
     else { ViewBag.Status = false}

     return View();
} 
```

并查看

```
<script type="text/javascript">
function() {
    var status = '@ViewBag.Status';
    if (status) {
        alert("success");
    } else {
        alert("error");
    }
}
</script> 
```

但是这些所有代码都不是优雅的方式。这是您的场景的解决方案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T13:04:27.630

`@Html.ActionLink`是的，正如 AliRıza Adıyahşi 所评论的那样，您可以这样做。

订阅该`onclick`事件`@Html.ActionLink`

这是实现：

```
@Html.ActionLink("Click here","ActionName","ControllerName",new { @onclick="return Submit();"}) 
```

并在 javascript 中编写该`confirm`框。

```
<script type="text/javascript">
function Submit() {
        if (confirm("Are you sure you want to submit ?")) {
            return true;
        } else {
            return false;
        }
    }
</script> 
```

**编辑**

试试这样：

```
<script type="text/javascript">
    function Submit() {
            if (confirm("Are you sure you want to submit ?")) {
                document.getElementById('anchortag').href += "?isTrue=true";
            } else {
                document.getElementById('anchortag').href += "?isTrue=false";
            }
            return true;
        }
</script>

@Html.ActionLink("Submit", "Somemethod", "Home", new { @onclick = "return Submit();", id = "anchortag" }) 
```

现在在您的控制器中根据`isTrue`查询字符串执行一些操作

```
public ActionResult Somemethod(bool isTrue)
        {
            if (isTrue)
            {
                //do something
            }
            else
            {
                //do something
            }
            return View();
        } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T12:57:11.523

您不会在控制器中创建确认框，而是在视图中使用 JQuery 对话框创建确认框。控制器已经在服务器内部，因此您没有在那里进行用户交互。另一方面，您的视图是用户选择选项、键入信息、单击按钮等的地方...您可以拦截按钮单击以显示该对话框，并且仅在选项“是”时提交帖子"被点击。

JQuery Dialog 需要在您的页面中引用的*jquery.js*、*jquery-ui.js*、*jquery.ui.dialog.js*脚本。

例子：

```
$(function(){
    $("#buttonID").click(function(event) {
        event.preventDefault();
        $('<div title="Confirm Box"></div>').dialog({
            open: function (event, ui) {
                $(this).html("Yes or No question?");
            },
            close: function () {
                $(this).remove();
            },
            resizable: false,
            height: 140,
            modal: true,
            buttons: {
                'Yes': function () {
                    $(this).dialog('close');
                    $.post('url/theValueYouWantToPass');

                },
                'No': function () {
                    $(this).dialog('close');
                    $.post('url/theOtherValueYouWantToPAss');
                }
            }
        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-23T01:04:04.423

我可以确认 AliRıza Adıyahşi 的解决方案效果很好。

您还可以自定义消息。就我而言，我们使用的是 MVC 和 Razor，所以我可以这样做：

```
<td>
@Html.ActionLink("Delete", 
    "DeleteTag", new { id = t.IDTag }, 
    new { onclick = "return confirm('Do you really want to delete the tag " + @t.Tag + "?')" })
</td> 
```

其中显示了一个对话框，其中包含指定的特定记录。也可以给确认对话框一个标题，还没有尝试过。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-31T09:59:54.007

```
 <a href="@Url.Action("DeleteBlog", new {id = @post.PostId})" class="btn btn-sm btn-danger" onclick="return confirm ('Are you sure want to delete blog?');">
                                <i class="glyphicon glyphicon-remove"></i> Delete 
```

# android - 告诉智能手机浏览器对 CSS 媒体查询使用实际分辨率

> ID：15548075
> 
> 赞同：2
> 
> 时间：2013-03-21T12:49:58.153
> 
> 标签：android, media-queries

我有一个书签网站，它适用于所有带有 CSS 媒体查询的分辨率。如果我缩小我的 Firefox 窗口，它工作得很好：

[http://wstaw.org/m/2013/03/21/Bookmarks_-_Mozilla_Firefox_001.png](http://wstaw.org/m/2013/03/21/Bookmarks_-_Mozilla_Firefox_001.png)

[http://wstaw.org/m/2013/03/21/Bookmarks_-_Mozilla_Firefox_002.png](http://wstaw.org/m/2013/03/21/Bookmarks_-_Mozilla_Firefox_002.png)

然而，在我的带有股票浏览器的 Android 4.0 手机上，它显示了一个更广泛的网站版本，但缩小了。这种方式非常不可用：

[http://wstaw.org/m/2013/03/21/Screenshot_2013-03-21-13-36-57.png](http://wstaw.org/m/2013/03/21/Screenshot_2013-03-21-13-36-57.png)

有没有办法告诉浏览器使用实际设备分辨率进行媒体查询，而不是它组成的某些分辨率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:11:14.463

这个标签应该可以帮助你：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5"> 
```

在哪里：

initial-scale=x - 在打开期间将比例设置为 x

maximum-scale=y - 允许缩放最多 y 次

# wix - 自定义属性为空

> ID：15548076
> 
> 赞同：1
> 
> 时间：2013-03-21T12:50:02.447
> 
> 标签：wix, windows-installer

我有自定义操作，可在即时阶段将文件位置存储到属性中。然后我在延迟阶段有另一个动作，它读取这个属性并创建文件：

```
String configFilePath = session.CustomActionData["configPath"];
String configFileName = session.CustomActionData["configFile"];
... 
```

到目前为止一切正常。卸载时我想删除这个文件，所以我有另一个延迟操作，它在删除文件后执行。动作有效，问题是属性为空（session.CustomActionData 为空）。为什么？当卸载发生时，我也将其设置为即时阶段。如果我可以在自定义 setUpConfig 操作中读取它，为什么我不能在自定义 removeConfig 操作中读取它？我想一个选择是在安装阶段将此值存储到注册表中，然后在卸载时从那里读取它。但是我想知道为什么我可以在安装程序时设置该属性，以及为什么在卸载时不设置它。在这两种情况下都会执行设置属性的操作。

```
<CustomAction Id="ConfigFileLocation" Property="setUpConfig" Execute="immediate" 
Value="configPath=[WEBSITE];configFile=config_template.asp" />

<CustomAction Id="setUpConfig" BinaryKey="MyCustomAction" DllEntry="configFile"  
Execute="deferred" Impersonate="no"  Return="check" />

<CustomAction Id="removeConfig" BinaryKey="MyCustomAction"  
DllEntry="removeCustomFile"  Execute="deferred" Impersonate="no"  Return="check" />

<InstallExecuteSequence>
<Custom Action="ConfigFileLocation" After="LaunchConditions" />
<Custom Action="setUpConfig" Before="InstallFinalize"><![CDATA[NOT REMOVE="ALL"]] />
<Custom Action="removeConfig" After="RemoveFiles"><![CDATA[REMOVE="ALL"]] />
</InstallExecuteSequence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:15:49.787

要将数据传递给延迟的自定义操作，您必须设置`Property`一个名称与`CustomAction/@Id`. 您正在`setUpConfig`通过即时`ConfigFileLocation`自定义操作正确地为自定义操作执行此操作。

但是，`removeConfig`自定义操作没有立即自定义操作设置为`Property`命名`removeConfig`。

因此`removeConfig`自定义操作的`CustomActionData`属性为空白。

# sql - 在我的 oracle 查询中遇到“ORA-00923：FROM 关键字未在预期的地方找到”

> ID：15548077
> 
> 赞同：-2
> 
> 时间：2013-03-21T12:50:02.757
> 
> 标签：sql, oracle, ora-00923

```
 SELECT TITLE, CONCAT(TO_CHAR(SUM((COST-RETAIL)/COST)*100), '100'), '%') 
      AS "Markup"
      FROM BOOKS
      GROUP BY TITLE; 
```

::THE GOAL::
我正在尝试计算我的产品（书籍）的加价。

::ZE PROBLEM::
当我尝试运行所述 SQL 时，出现错误

> *ORA-00923: 在预期的地方找不到 FROM 关键字*

预先感谢您对我的问题的任何和所有意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:55:32.383

你的括号不平衡，我数左数 4，右数 5。当存在阻止到达 FROM 子句的格式错误（缺少/多余的逗号、不平衡的括号等）时，通常会发生此错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:00:56.380

```
 SELECT TITLE, TO_CHAR( SUM( COST-RETAIL )/ SUM( COST )) || '%'
      AS "Markup"
      FROM BOOKS
      GROUP BY TITLE; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:01:37.767

有一个额外的右括号，这就是它的样子。

```
SELECT TITLE, CONCAT(TO_CHAR(SUM((COST-RETAIL/COST)*100), '100'), '%') 
AS "Markup"
FROM BOOKS
GROUP BY TITLE; 
```

# azure - 将文件从 Team Foundation Service 发布到 Azure 云存储 Blob？

> ID：15548082
> 
> 赞同：0
> 
> 时间：2013-03-21T12:50:25.887
> 
> 标签：azure, azure-blob-storage, azure-devops

是否可以在构建期间自动将（静态）文件从 Team Foundation Service 发布到 Azure 云存储 Blob？

更新：如果无法*直接*发布到 blob，也许有一个很好的解决方法来*间接*发布？我还将另一个项目发布到 azure 网站，因此一种方法是将文件发布到该网站，然后使用[WebActivator](https://github.com/davidebbo/WebActivator)我可以在第一次激活时将文件移动到 blob。但我希望有更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:25:15.340

我*认为*您需要能够自定义构建过程才能做到这一点，而我认为您现在无法使用 Team Foundation Service 进行自定义。如果使用 Team Foundation Server，则可以。

# php - 使用 FPDF 在所有页面中添加子标题

> ID：15548083
> 
> 赞同：1
> 
> 时间：2013-03-21T12:50:28.183
> 
> 标签：php, fpdf

我有一个生成 PDF 文件的简单脚本。我正在从数据库中获取我需要的信息并使用 a`foreach`创建 PDF 文件的页面，最后一页我有一些图表和其他未从 DB 检索的信息。除了最后一个之外，所有页面都必须有一个副标题。

我目前的代码是：

```
foreach ($sql as $key => $value) 
{
    $pdf->Cell(20, $line_height, $value['sale_id'], '', '', 'L');
    $pdf->Cell(90, $line_height, $value['product'], '', '', 'L');
    $pdf->Cell(90, $line_height, $value['ammount'], '', '', 'L');
    $pdf->Cell(90, $line_height, $value['value'], '', '', 'L');
} 
```

基本上，我需要有描述每一行的子标题。但是如果我这样做，所有的行都会有子标题：

```
foreach ($sql as $key => $value) 
{
    $pdf->SetFont('Arial', 'B', $font_size);
    $pdf->Ln(2 * $line_height);

    $pdf->Cell(20, $line_height, 'Number', '', '', 'L');
    $pdf->Cell(120, $line_height, 'Product', '', '', 'L');
    $pdf->Cell(40, $line_height, 'Ammount', '', '', 'L');
    $pdf->Cell(40, $line_height, 'Value ($)', '', '', 'L');

    // 

    $pdf->SetFont('Arial', 'B', $font_size);
    $pdf->Ln(2 * $line_height);

    $pdf->Cell(20, $line_height, $value['sale_id'], '', '', 'L');
    $pdf->Cell(120, $line_height, $value['product'], '', '', 'L');
    $pdf->Cell(40, $line_height, $value['ammount'], '', '', 'L');
    $pdf->Cell(40, $line_height, $value['value'], '', '', 'L');
} 
```

我在每一页都需要这个子标题，除了最后一个。我试图用`pageNo()`函数做一些疯狂的代码，但没有奏效。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T18:36:16.623

好的，伙计们，我解决了我的问题。对于正在寻找类似内容的任何人，这就是我所做的：该`GetY()`函数返回该行的 Y 位置，因此当它是页面的第一行时，该值将为 0（或常数，取决于您的布局）。我已经做了：

```
foreach ($sql as $key => $value) 
{

    if ($pdf->GetY() == 0)
    {
        $pdf->SetFont('Arial', 'B', $font_size);
        $pdf->Ln(2 * $line_height);

        $pdf->Cell(20, $line_height, 'Number', '', '', 'L');
        $pdf->Cell(120, $line_height, 'Product', '', '', 'L');
        $pdf->Cell(40, $line_height, 'Ammount', '', '', 'L');
        $pdf->Cell(40, $line_height, 'Value ($)', '', '', 'L');
    }

    $pdf->SetFont('Arial', 'B', $font_size);
    $pdf->Ln(2 * $line_height);

    $pdf->Cell(20, $line_height, $value['sale_id'], '', '', 'L');
    $pdf->Cell(120, $line_height, $value['product'], '', '', 'L');
    $pdf->Cell(40, $line_height, $value['ammount'], '', '', 'L');
    $pdf->Cell(40, $line_height, $value['value'], '', '', 'L');
} 
```

谢谢你们！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-04T05:43:03.013

在您的类中覆盖FPDF 的方法**header** **() 。**

 **```
class PDF extends FPDF
{
    public function Header() {
        $this->Cell(0, 8, "HEADER TEXT", 0, 0, 'R');
    }
} 
```

FPDF 将在添加新页面时***自动***调用此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T00:45:10.057

我在尝试在每一页上获取标题时遇到了同样的问题。这也连接到 MySql 数据库。这就是最终为我工作的东西。

```
<?php
//PDF USING MULTIPLE PAGES
//FILE Originally CREATED BY: Carlos José Vásquez Sáez
//I fixed this on May 3/2013 as it was not working correctly for me.

define('FPDF_FONTPATH', '/font/');
require('fpdf.php');

//Connect to your database
$link = mysql_connect("localhost","","") or die ('Could not select database.');
$db_select = mysql_select_db("", $link) or die ('Could not select database.');

//Create new pdf file
$pdf=new FPDF();

//Open file
$pdf->Open();

//Disable automatic page break
$pdf->SetAutoPageBreak(false);

//Add first page
$pdf->AddPage();

//set initial y axis position per page
$y_axis_initial = 10;

//Set Row Height
$row_height = 8;

//print column titles for the actual page
$pdf->SetFillColor(232, 232, 232);
$pdf->SetFont('Arial', 'B', 11);
$pdf->SetY($y_axis_initial);
$pdf->SetX(10);
$pdf->Cell(80, $row_height, 'Products', 1, 0, 'C', 1);
$pdf->Cell(20, $row_height, 'Price', 1, 0, 'C', 1);
$pdf->Cell(30, $row_height, 'Customer', 1, 0, 'C', 1);

//Select the Products you want to show in your PDF file
$result=mysql_query('SELECT Product,Price,Customer FROM your_table ORDER BY Product', $link);

//initialize counter
$i = 0;

//Set maximum rows per page
$max = 30;

//Data Table y axis position starting point
$y_axis = $y_axis_initial + $row_height;

while($row = mysql_fetch_array($result))
{
    //If the current row is the last one, create new page and print column title
    if ($i == $max)
    {
        $pdf->AddPage();

        //print column titles for the current page
        $pdf->SetY($y_axis_initial);
        $pdf->SetX(10);
        $pdf->Cell(80, $row_height, 'Product', 1, 0, 'C', 1);
        $pdf->Cell(20, $row_height, 'Price', 1, 0, 'C', 1);
        $pdf->Cell(30, $row_height, 'Customer', 1, 0, 'C', 1);

        //Set $i variable to 0 (first row)
        $i = 0;
    //Reset the y axis value
    $y_axis = $y_axis_initial + $row_height;;
    }

    $Product = $row['Product'];
    $Price = $row['Price'];
    $Cust = $row['Customer'];

    $pdf->SetY($y_axis);
    $pdf->SetX(10);
    $pdf->Cell(80, $row_height, $Product, 1, 0, 'L', 1);
    $pdf->Cell(20, $row_height, $Price, 1, 0, 'L', 1);
    $pdf->Cell(30, $row_height, $Cust, 1, 0, 'L', 1);

    //Go to next row
    $y_axis = $y_axis + $row_height;
    $i = $i + 1;
}

mysql_close($link);

//Create file
$pdf->Output(); 
```**

# ios6 - Iphone5 中的 PayPal 集成

> ID：15548088
> 
> 赞同：-2
> 
> 时间：2013-03-21T12:50:42.020
> 
> 标签：ios6, payment-gateway, iphone-5, xcode4.6

我正在使用 PayPal 支付网关在 iPhone 中开发餐厅应用程序以购买特定菜单项。Apple 会批准这个餐厅申请吗？任何人都建议一些指导方针来解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:57:35.297

是的，苹果会批准它。[应用商店审核指南](https://developer.apple.com/appstore/resources/approval/guidelines.html#purchasing-currencies)

# intuit-partner-platform - Intuit Anywhere 开发与生产认证/授权

> ID：15548092
> 
> 赞同：1
> 
> 时间：2013-03-21T12:50:51.917
> 
> 标签：intuit-partner-platform, quickbooks-online

我在开发模式下成功使用了 OpenID 和 OAuth。一旦我准备好转移到生产环境，流程是否会以身份验证/授权流程不需要人工干预的方式发生变化？今天我点击“登录”按钮使用 OpenID 进行身份验证。然后我单击“授权 Quickbooks”按钮以授权使用 OAuth。在这两个过程中，我被重定向到 Intuit，单击按钮以允许身份验证/授权。我能通过代码实现这个过程吗？我正在开发 SaaS 应用程序，需要在代码中进行身份验证/授权，因为手动步骤不适用于我正在开发的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:37:05.630

您的应用程序在开发中的工作方式应该与在生产中的工作方式相同。

确保您已完成要求清单 - [http://docs.developer.intuit.com/0025_Intuit_Anywhere/0010_Getting_Started/0040_Publishing_Your_App/0010_Reviewing_the_Requirements_Checklist](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0010_Getting_Started/0040_Publishing_Your_App/0010_Reviewing_the_Requirements_Checklist)

如果您只是在执行连接到 QuickBooks 流程或者您还希望在 Appcenter 上列出，则有不同的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:12:23.973

对应用中心的几个应用进行免费试用，看看它们在做什么。我试用了 eBillity，他们的应用在订阅过程中无需用户交互即可获取 OpenID 和 OAuth。

基于此，是的，我认为您可以在代码中实现这一切。就我个人而言，如果没有用户干预，我无法获得 OAuth 令牌。

更新：在订阅过程中使用此 JS 方法进行 OAuth 授权：http: [//docs.developer.intuit.com/0025_Intuit_Anywhere/0060_Reference/JavaScript_Functions/directConnectToIntuit](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0060_Reference/JavaScript_Functions/directConnectToIntuit)

# android - Android 休息架构

> ID：15548097
> 
> 赞同：2
> 
> 时间：2013-03-21T12:51:24.543
> 
> 标签：android

我的 android 应用程序需要与几个 Rest 服务通信。现在我决定避免为此使用 AsyncTasks。我的架构将基于一个服务和几个意图服务。我的每个活动都会向单个服务发送一个包含参数的意图。基于这些参数，Service 将调用各种 IntentService。然后，意图服务将执行网络操作并将结果广播回调用活动。这种方法正确吗？可能是 Activity 直接调用 IntentService 的想法？这种方法有什么缺点？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:59:10.353

使用机器人 :)

动机： [http ://thumbnails.visually.netdna-cdn.com/RoboSpice_508a372b320e5.png](http://thumbnails.visually.netdna-cdn.com/RoboSpice_508a372b320e5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:08:28.990

即`WebApp`REST 服务*应该*非常快速地回答`response`（因此客户端应用程序不会锁定）。如果您的请求需要一些时间来处理，则`response`应该是`202`. 因此，您可能必须再次查找该资源，这对于`AsyncTasks`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-13T09:27:40.217

您可以使用[RESTDroid](https://github.com/PCreations/RESTDroid)，它实现了 Virgil Dobjanschi 在 Google IO 视频中设计的服务模式

# java - 在独立 Java 中将 XA 事务与 WebSphere MQ 一起使用

> ID：15548102
> 
> 赞同：1
> 
> 时间：2013-03-21T12:51:31.687
> 
> 标签：java, ibm-mq, aix, xa, xlc

为了在独立 Java 中将 XA 事务与 WebSphere MQ 一起使用，我正在执行以下步骤并收到错误消息`xlc not found`

*第 1 步 - 准备 XA 开关文件*

用于将目标文件链接到其相应的数据库。我正在执行以下命令

```
install path of websphere MQ/java/lib/jdbc>make oracle 
```

我得到以下错误

```
xlc: not found 
```

我不确定我的机器上是否安装了 xlc。我的机器是 AIX 6.1。但我可以在我的机器上找到 xlcpp。如何进行？有没有办法创建开关文件？

如果我执行 $ /usr/ccs/lib/cpp -help

我正进入（状态

```
1506-173 (W) Option help is not valid. Enter xlc for list of valid options. 
```

参考： [http ://www.ibm.com/developerworks/websphere/library/techarticles/0601_ritchie/0601_ritchie.html](http://www.ibm.com/developerworks/websphere/library/techarticles/0601_ritchie/0601_ritchie.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:11:44.957

Dwayne 基本上是对的，但我相信 xlc++ 也有一个 xlc 版本。我在你的另一个问题中看到你有 xlcpp 所以也许你需要做的就是将 /usr/vacpp/bin 添加到你的 PATH 中。

我也倾向于将 grep 与 lslpp 一起使用：

```
lslpp -ch | grep vac 
```

应该告诉你安装了哪些 xlc、xlcpp 等。

高温高压

# optimization - 编码 UI 测试 PC\Server 规范要求

> ID：15548106
> 
> 赞同：0
> 
> 时间：2013-03-21T12:51:38.937
> 
> 标签：optimization, visual-studio-2012, coded-ui-tests, automated-tests

几个月来我一直在开发 Coded UI 测试，并且在我的知识允许的范围内对它们进行了优化。我发现了一些关于测试运行时间的性能问题。

目前我有 91 个测试，每个测试都很小并且使用多个 UI Maps。运行每个测试所需的时间从 1 到 5 分钟不等，有些测试运行超过 20 分钟。我看过它们中的一些运行，并注意到需要一段时间才能找到 UI 控制器（有时不会）。

我想这里有两个问题：

1) PC\Server 是否有最佳要求（RAM、HD 空间、CPU 等）以获得最佳运行时间结果？

2) 有没有办法优化编码的 UI 测试以提高运行时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T16:35:00.927

Jack Zhai 对我的问题的回答 - MSFT 可以在[MSDN 论坛上找到 - 优化编码的 UI 测试和 PC\Server 规范要求](http://social.msdn.microsoft.com/Forums/en-US/vstest/thread/7ff0ee7a-0ee7-4c39-a158-23332e7e9e59)

# javascript - Jasmine 测试失败 EmberJS 需要 API

> ID：15548109
> 
> 赞同：1
> 
> 时间：2013-03-21T12:51:43.230
> 
> 标签：javascript, unit-testing, ember.js, jasmine

我正在使用 Jasmine 对 EmberJS 项目进行单元测试，但我遇到了 Ember 需求 API 的问题。

当我尝试运行 jasmine 测试时，如果有问题的控制器具有“需要”以及调用的 init 函数，它们将无法创建控制器实例

> this._super()

我收到此控制台错误

> “不能调用方法‘有’为空”

当我尝试调试时，将我一路带入了 Ember 的内部，但我却一无所获。

任何人都知道我做错了什么

```
Application.SearchPendingController = Ember.ObjectController.extend({
    needs: ['searchResults', 'search'],
    shouldDisable: false,
    searchResultsController: null,
    init: function () {
        this._super();

        this.set('searchResultsController', this.controllerFor('searchResults'));

        this.get('controllers.search.content').reload();

        this.get('controllers.searchResults').set('content', this.get('controllers.search.content.results'));

    },
    transitionToResults: function () {
        console.log('yay');
    }.observes('this.searchResultsController.content')
}); 
```

当我尝试创建此控制器时，茉莉花测试会引发错误

```
var searchPendingController = Application.SearchPendingController.create(); 
```

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T13:13:42.580

当您创建控制器时，Ember.js 会检查`needs`init 方法中的依赖项 ()。检查依赖项假设您有一个 Ember.js 应用程序，并且该应用程序的容器位于`container`控制器的属性中。如果 Ember.js 为您创建了控制器，这一切都很好。

您的错误发生[在这里](https://github.com/emberjs/ember.js/blob/master/packages/ember-application/lib/ext/controller.js#L36)，在`verifyDependencies`函数中。

如果您不希望 Ember.js 为您创建控制器并希望手动创建它（这就是您在此处所做的），您将需要手动将控制器的`container`属性设置为应用程序的容器。

```
Application.SearchPendingController.reopen({
  container: Application.__container__
}); 
```

单元测试控制器很棘手，需要您深入了解 Ember.js 的内部结构。我的建议是，让 Ember.js 为您创建控制器，并使用集成测试而不是单元测试它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T23:29:37.507

更好的是，如果您的控制器需要访问另一个控制器以计算某些属性，则让容器为您创建控制器。

```
Application.SearchPendingController = Ember.ObjectController.extend({
  needs: ['searchResults', 'search'], 
```

测试

```
 var searchModel = something, 
    searchResultsModel = something, 
    searchPendingModel = something;

var container = Application.__container__,
  searchController = container.lookup('controller:search'),
  searchResultsController = container.lookup('controller:searchResults'),
  searchPendingController = container.lookup('controller:searchPending'),
  searchController.set('model', searchModel),
  searchResultsController.set('model', searchResultsModel ),
  searchPendingController.set('model', searchPendingModel ); 
```

# excel - 使用 vb-script 从 csv 转换为 excel 后 Decimalseperator 丢失

> ID：15548119
> 
> 赞同：0
> 
> 时间：2013-03-21T12:52:08.563
> 
> 标签：excel, csv, vbscript

我有一个带有分号分隔符的 CSV，我想将其转换为常规 Excel 工作表。我设法用下面的代码做到了这一点，但我一定犯了一个错误，因为原始文件中不以零开头的带小数的数字在 Excel 中显示为没有小数分隔符的数字。当我在 Excel 中手动打开 CSV 时，结果会很好，因此它必须是使用脚本执行此操作的副作用。

例如：

在 CSV 中有一行：

> 2013-03-10 17:00:15; 闲置的; 2,272298;; 0,121860

在 Excel 工作表中，这变为：

> 2013-03-10 17:00 | 闲置 | 2.272.298| | 0,121860

在 excel 中手动打开会给出：

> 2013-03-10 17:00 | 闲置 | 2,272298| | 0,121860

有人可以告诉我我可以/应该改变什么以将小数保留为 Excel 中的小数吗？可能是一种告诉 Excel 哪个符号代表小数分隔符或强制它使用欧洲格式的参数的方法？

亲切的问候，尼科

这是我目前拥有的脚本，其中`csvFile`是一个字符串，其中包含原始文件的完整路径，并且`excelFile`是一个字符串，其中包含我要存储新 Excel 工作表的位置的完整路径。

```
Set objExcel = CreateObject("Excel.Application")                   'use excel  
objExcel.Visible = true                                            'visible  
objExcel.displayalerts=false                                       'no warnings 

objExcel.Workbooks.Open(csvFile)                                   'open the file  
objExcel.ActiveWorkbook.SaveAs excelFile, -4143, , , False, False  'save as xls  
objExcel.Quit                                                      'close excel 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:02:45.767

在您的 csvFile 所在的文件夹中创建一个**schema.ini**文件，并根据[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms709353%28v=vs.85%29.aspx)给出的规则对其进行描述。

进一步阅读：[导入](http://www.aspdotnetcodes.com/Importing_CSV_Database_Schema.ini.aspx)，[文本文件](http://msdn.microsoft.com/en-us/library/ms974559.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:06:33.060

有几种可能的方法，我将介绍一种我喜欢的方法：

1.  开始录制宏
2.  创建新工作簿
3.  从该工作簿转到数据 > 从文本，然后选择 CSV 文件，然后您可以进行有关值分隔符、小数分隔符、千位分隔符的所有必需设置。也可以为每一列选择特定的数据类型。
4.  添加 CSV 内容后，转到数据 > 连接并删除连接。数据将保留在工作表中，但不再有活动连接。
5.  以 xls 名称保存工作簿
6.  停止录制

现在根据自己的喜好调整脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:24:38.127

一般来说，Excel 尊重系统的区域设置。然而，CSV 导入有时对“正确”格式有自己的想法，特别是当导入的文件具有扩展名`.csv`.

我会尝试以下。将文件重命名为`.txt`or`.tsv`并像这样导入它：

```
objExcel.Workbooks.OpenText csvFile, , , 1, 1, False, False, True 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T09:28:08.873

我做了一个工作。我现在创建 CSV 文件的副本，在其中替换所有逗号，后跟一个数字。虽然不是很有效，但它确实为 Excel 提供了它想要的东西，而且对于像我这样没有经验的程序员来说，它足够简单。这样做时，一所大学要求我也删除第一列中具有重复值的空格和条目（在这种情况下为时间戳）。

结果是这个脚本

```
 'csvFile   is a string with the full path to the file. e.g. "C:\\Program Files\\Program\\data.csv"
    'tempFile  is a string with the full path to the file. e.g. "C:\\Temp\\temp.csv"
    'excelfile is a string with the full path to the file. e.g. "D:\\Data\\sheet.xls"

    Set fs=CreateObject("Scripting.FileSystemObject")
    Set writeFile = fs.CreateTextFile(tempFile,True)
    Set readFile = fs.OpenTextFile(csvFile)

    ' regular expression to remove leading whitespaces
    Set regular_expression = New RegExp
        regular_expression.Pattern = "^\s*"
        regular_expression.Multiline = False

    ' regular expression to change the decimal seperator into a point        
    Set regular_expression2 = New RegExp
        regular_expression2.Global = True
        regular_expression2.Pattern = ",(?=\d)"
        regular_expression2.Multiline = False

    'copy the original file to the temp file and apply the changes
    Do Until readFile.AtEndOfStream
        strLine= readFile.ReadLine
        If (StrComp(current_timestamp,Mid(strLine, 1, InStr(strLine,";")),1)<>0) Then
        If (Len(previous_line) > 2) Then
            previous_line = regular_expression2.replace(previous_line,".")
            writeFile.Write regular_expression.Replace(previous_line, "") & vbCrLf
        End if
        End if
        current_timestamp = Mid(strLine, 1, InStr(strLine,";"))
        previous_line = strLine
    Loop
    readFile.Close
    writeFile.Close

    Set objExcel = CreateObject("Excel.Application")    ' use excel
    objExcel.Visible = true                             ' visible
    objExcel.displayalerts=false                        ' no warning pop-ups
    objExcel.Workbooks.Open(tempFile)                   ' open the file
    objExcel.ActiveWorkbook.SaveAs excelfile, -4143, , , False, False   'save as excelfile
    fs.DeleteFile tempFile                              ' clean up the temp file 
```

我希望这对其他人也有用。

# javascript - 如何从外部源加载 javascript 并在 Google Apps 脚本中执行

> ID：15548124
> 
> 赞同：3
> 
> 时间：2013-03-21T12:52:21.597
> 
> 标签：javascript, google-apps-script

我正在构建一些 google 应用程序脚本，并希望加载位于我的一台服务器上的 javascript 文件，并能够在 Google Apps 脚本中执行它的功能。

通过这种方式，我可以与人们共享一个 google 应用程序脚本并更新 javascript，而无需他们付出任何努力。（我只会更新我服务器上的版本，然后将其加载到他们的 Google Apps 脚本中。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T13:38:06.247

你可以这样做：

```
eval(UrlFetchApp.fetch("my url").getContentText()) 
```

尽管将代码缓存在 ScriptDb 或 CacheService 中并且每 15 分钟左右才重新获取它会更快/更有效。

# c++ - 转换 boost::variant 类型的 std::vector

> ID：15548125
> 
> 赞同：4
> 
> 时间：2013-03-21T12:52:25.567
> 
> 标签：c++, boost, c++98

我如何实现下面的函数以从 vector of 转换`Value`为 a `Container`？我想断言是否所有成员`values`都属于同一类型，即向量是否包含字符串和整数的混合。这是因为函数的返回值是 a`std::vector<int>`或 a `std::vector<std::string>`。

```
typedef boost::variant<int, std::string> Value;
typedef boost::variant<std::vector<int>, std::vector<std::string> > Container;

Container valuesToContainer(const std::vector<Value>& values) 
{
    return Container();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:13:24.943

```
 struct converter_visitor : public boost::static_visitor<Container>
  {

         const std::vector<Value> & _cont;
         converter_visitor(const std::vector<Value> &r) : _cont(r) {}

         template<class T>
         Container operator()(const T &) const {
                  std::vector<T> ans;
                  ans.reserve(_cont.size());
                  for (int i=0;i < _cont.size();++i)
                         ans.push_back( boost::get<T>(_cont[i]));
                  return ans;
         }
   };

   Container valuesToContainer(const std::vector<Value> & values) {
         //assuming !values.empty()
         return boost::apply_visitor( converter_visitor(values),values.front());
   } 
```

`bad_get`如果不是所有元素`values`都属于同一类型，这将抛出一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:21:48.447

这可能会派上用场，也许：

```
template <typename... T> using VariantVector = std::vector<boost::variant<T...>>;
template <typename... T> using VectorPack    = std::tuple<std::vector<T>...>;

template <typename... T>
    VectorPack<T...> splitVectors(VariantVector<T...> const &values); 
```

与 OP 请求的函数的不同之处在于，当并非所有元素类型都同意时，它不会“出错”，而是返回一个向量*元组*（“VectorPack”），您可以简单地选择您想要的那个。

演示程序：

```
#include <boost/variant.hpp>
#include <boost/variant/static_visitor.hpp>
#include <tuple>
#include <vector>

using std::get;

template <typename... T> using VariantVector = std::vector<boost::variant<T...>>;
template <typename... T> using VectorPack    = std::tuple<std::vector<T>...>;

namespace detail
{
    template <typename T>
    struct VectorSplitterMixin {
        void operator()(T const& v) { _bucket.push_back(v); }
        std::vector<T> _bucket;
    };

    template <typename... T>
        struct VectorSplitter : boost::static_visitor<>, VectorSplitterMixin<T>...
    {
        typedef VectorPack<T...> product_t;
        product_t product() {
            return product_t { std::move(static_cast<VectorSplitterMixin<T>*>(this)->_bucket)... };
        }
    };
}

template <typename T> struct X;

template <typename... T>
    VectorPack<T...> splitVectors(VariantVector<T...> const &values)
{
    auto splitter = detail::VectorSplitter<T...>();
    for (auto& val : values)
        boost::apply_visitor(splitter, val);
    return splitter.product();
}

int main()
{
    typedef boost::variant<int, std::string> Value;
    typedef boost::variant<std::vector<int>, std::vector<std::string> > Container;

    const std::vector<Value> vec { 42, "hello world", 1, -99, "more" };

    auto vectorPack = splitVectors<int, std::string>(vec);

    for (auto i : get<0>(vectorPack))
        std::cout << "int:" << i << ", ";
    std::cout << "\n";

    for (auto& s : get<1>(vectorPack))
        std::cout << "string:" << s << ", ";
    std::cout << "\n";
} 
```

印刷：

```
int:42, int:1, int:-99, 
string:hello world, string:more, 
```

# javascript - 在鼠标上发送 xmlhttpRequest / 需要双击

> ID：15548134
> 
> 赞同：0
> 
> 时间：2013-03-21T12:52:33.680
> 
> 标签：javascript, xmlhttprequest

我用鼠标向上发送一些 X 和 Y 坐标，但它只在我双击 div 时发送请求。

我有这个功能。

```
that.parentNode.style.left = (evt.clientX - diffX) + 'px'; 
```

如果我发送`that.parenNode.style.left`请求它实际上在鼠标上工作，但问题是它不会从保存协调的 XML 文件中读回它。如果我发送`evt.clientX`它会发送协调并将其读回httprequest，但是我需要双击发送。

哗哗哗哗。有什么好建议吗？

这是我的代码。

```
 var draggableWindow = document.getElementsByClassName('sticker-drag'),
        windowCount = draggableWindow.length,
        x, windZ = 1;

    function startDrag(evt) {
        var diffX = evt.clientX - this.parentNode.offsetLeft,
            diffY = evt.clientY - this.parentNode.offsetTop,
            that = this;

        this.style.zIndex = windZ++;

        function moveAlong(evt) {
            that.parentNode.style.left = (evt.clientX - diffX) + 'px';
            that.parentNode.style.top = (evt.clientY - diffY) + 'px';
        }

      document.addEventListener("mouseup",
function(e){

var xmlhttp;
 xmlhttp=new XMLHttpRequest();

xmlhttp.open("POST","/project2/php/corrdination.php",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("textBoxID="+e.target.parentNode.id+"&clientY="+(evt.clientY - diffY)+"&clientX="+(evt.clientX - diffX) );

//console.log(e.target.parentNode.id)
console.log((evt.clientY - diffY))

}); 

        function stopDrag() {
            document.removeEventListener('mousemove', moveAlong);
            document.removeEventListener('mouseup', stopDrag);
            windowClass();
        }

        function windowClass() {
            var windowClass = document.getElementsByClassName("sticker");
            for (var i = 0; i < windowClass.length; i++) {
                windowClass[i].style.opacity="1";
            }       
        }

        document.addEventListener('mouseup', stopDrag);
        document.addEventListener('mousemove', moveAlong);

    }

    for (x = 0; x < windowCount; x += 1) {    
        draggableWindow[x].addEventListener('mousedown', startDrag);
    } 
```

# java - ls 过滤通道ftp

> ID：15548135
> 
> 赞同：1
> 
> 时间：2013-03-21T12:52:41.587
> 
> 标签：java, sftp, ls

有没有办法使用这个api过滤要列出的文件？例如：

```
 ChannelSftp sftpChannel;
    sftpChannel.ls(path); 
```

这列出了所有，但我想过滤以 AAA 开头的文件，例如

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:47:31.793

假设您使用[JSch](http://www.jcraft.com/jsch/)`*`，您应该能够`?`在`path`. 至少[这个非官方的 JavaDoc](http://epaul.github.com/jsch-documentation/simple.javadoc/com/jcraft/jsch/ChannelSftp.html#ls%28java.lang.String%29)提到了这一点：

> 该模式可以在最后一个组件中包含全局模式通配符（`*`或`?`）（即在最后一个之后`/`）。

所以试试

```
sftpChannel.ls(path + '/AAA*'); 
```

# asp.net - MVC：Visual Studio 发布 Web 对话框找不到我的应用程序的视图

> ID：15548136
> 
> 赞同：3
> 
> 时间：2013-03-21T12:52:43.600
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2010, deployment, publishing

我正在使用[这些步骤在](http://msdn.microsoft.com/en-us/library/dd410407%28v=vs.90%29.aspx)*64 位 Windows 7 Professional*机器上运行的*IIS 7.5*上使用*Visual Studio 2010*发布我的*ASP.NET MVC 4*应用程序。

 ***当我在输入值后单击向导上的**发布**按钮时，它会报告一个错误，内容如下：

```
Copying file Views\Shared\Error.cshtml 
to obj\Debug\Package\PackageTmp\Views\Shared\Error.cshtml failed. 
Could not find file 'Views\Shared\Error.cshtml'. 
```

我查看了向导转储部署应用程序所需文件的目标文件夹。事实证明，该文件夹有 Views 文件夹，该文件夹只有根 Views 文件夹的 _ViewStart.cshtml，但没有其他 View。我的应用程序至少有 20 个视图，也许更多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:22:29.583

我意识到这是我的错。我的项目的本地副本在 Views\Shared 文件夹中有文件 Error.cshtml。但是，项目文件的 TFS 副本没有。显然，该文件已在某个阶段从项目中排除。

我从本地项目中排除了该文件并运行了构建并且它有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-05T11:19:57.023

就我而言，问题是该文件在解决方案中，但实际上并不存在于本地文件系统中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T09:59:32.923

对我来说，当我将文件（通过资源管理器）从共享文件夹移动到另一个文件夹时，就会出现这个问题。

我在 Visual Studio 中添加了该文件，但没有从共享文件夹中“删除”该文件（就 Visual Studio 而言）。

出于某种原因，Visual Studio 没有放置一个小标志或警告标志来告诉我预期的文件丢失（即使在刷新之后），所以我没有注意到（尽管试图打开丢失的文件会发现问题）。

错误消息很清楚，并且不言自明。我只是出于某种原因无法理解。***

# arm - 嵌入式系统位数

> ID：15548139
> 
> 赞同：1
> 
> 时间：2013-03-21T12:52:47.843
> 
> 标签：arm, avr, robotics

## 如果这是重复的，我深表歉意，即使我确实在这里搜索了一个类似的问题，但我只找到了一个。

因此，我的工程课程中的编程团队目前使用 32 位 72MHz ARM Cortex-M3 微处理器。我们都是高中生，我们都在努力使用图书馆等等，主要是因为我们正在使用的 Bioloid Premium 制造商的文档很差。然而，我们即将购买 8 位 16MHz AVR 微控制器，因为它具有更广泛的在线支持和更易于使用的库 + 更多文档。我的问题是，减少的位数以及较低的处理器速度对我们真的很重要吗？我们不会进行大量流程密集型编程，而更像是一个基本的机器人课程。那么，8 位 16MHz AVR 微处理器和 32 位 72MHz ARM Cortex-M3 微处理器之间的主要区别是什么？此外，（如果它具有任何相关性）：

1.  我们正在使用带有 CM530 (ARM) 的 Robotis 的 Bioloid Premium，即将切换到 CM510 (AVR)。
2.  我们将使用 Embedded C 而不是 Robotis 的 RoboPlus IDE 作为我们的指令集。

*我搜索了一下，发现了比特数是什么，以及更多关于它对处理器速度的影响，但没有很多关于它的文件给出一个清晰简洁的答案，这就是我来这里的原因，因为它是为了清晰简洁答案。（所以请不要告诉我在过去二十分钟里用谷歌搜索它。）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T06:32:17.843

> 我们正在使用带有 CM530 (ARM) 的 Robotis 的 Bioloid Premium，即将切换到 CM510 (AVR)。我们将使用 Embedded C 而不是 Robotis 的 RoboPlus IDE 作为我们的指令集。

我环顾了您所指的产品，您的问题似乎缺少您真正应该关注的问题。

Bioloid Premium 套件看起来非常漂亮，所有部件都已经组装好并为您配置好了。许多机器人课程通常与硬件设计有关。你不会做任何这些。因此，您的任务实际上归结为对您提供的硬件进行编程。

也就是说，看起来类似于 Lego Mindstorms 拖放界面的 RoboPlus IDE 与使用 AVR Studio 用 C 语言编写代码之间存在天壤之别！

我以前使用过 AVR Studio，但最近版本发生了重大变化。您可能需要修改示例程序以在最新版本中工作，并且您可能需要一些帮助。

看起来他们为您提供了足够的示例代码来使用外围设备，但我没有立即看到如何编写 main() 函数来执行诸如遵循计划之类的事情。也许，网上有一些例子。

但是要回答您的问题，您可能不会在处理器容量方面遇到任何限制。他们改用更便宜、更强大的处理器来编写更新版本的控制软件，但旧硬件也会很棒。在 C 语言中工作，您将熟悉如何实际使用 MCU，并且这些知识将转移到其他芯片。AVR 系列是一个很好的开始。它具有许多功能，并且在工作方式上非常明智，并具有大量文档和第三方支持。绝对从 Atmel 下载您正在使用的芯片的[数据表，尽管它是一个密集且难以阅读的数据表。](http://www.atmel.com/devices/atmega2561.aspx?tab=documents)您只需要阅读其中的一部分。另外，请查看[AVR Freaks](http://www.avrfreaks.net/)论坛。

这听起来像是一门很棒的高中课程。玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T14:32:06.320

> 我的问题是，减少的位数以及较低的处理器速度对我们真的很重要吗？[...] 那么，8 位 16MHz AVR 微处理器和 32 位 72MHz ARM Cortex-M3 微处理器之间的主要区别是什么？

多么酷的项目！这是了解处理器如何工作以及位宽和时钟速度意味着什么的绝佳机会。

时钟速度在概念上是最容易理解的。AVR 和 ARM 等微控制器使用时钟晶体来设置电路运行的速度。使用更快的时钟，处理器可以在相同的时间内执行更多的指令。72MHz 时钟是 16MHz 时钟的 4 倍以上，因此 ARM 处理器的运行速度将比 AVR 快 4 倍。但“跑得更快”的真正含义是什么？处理器执行*指令*。在基本层面上，这些指令类似于“添加两个数字”和“使该引脚上的电压变高”。ARM 处理器在这里会快很多，但考虑一下它将与什么硬件对话：伺服系统。伺服电机监听一个相当低速的 PWM 信号，所以在那个速度下，72MHz 和 16MHz 之间的差异是'

但是位宽呢？这个有点棘手。它不会真正影响处理器的运行速度，但会影响它执行的指令的*复杂性。*假设您想将两个非常大的数字相加。像 100,000 和 200,000 这样的数字。当我们在纸上将它们加在一起时，这只是一步。但是像 AVR 这样的 8 位处理器只能处理 65,536 这样大的数字。因此，为了对这么大的数字进行操作，需要将加法分解为几个较小的步骤。另一方面，32 位 ARM*可以*处理这么大的数字。所以它一步完成了加法。我希望这是有道理的。

无论如何，我已经在比你的 16MHz AVR 更慢的处理器上使用伺服系统做了很多工作。它很可能适合您想做的事情，并且就像您发现它有一个更加活跃的爱好者社区一样。如果您正在寻找代码的快速示例，[Cornell 4760 页面](http://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/)有一些很棒的项目可供您学习。

# php - PHP按属性值对多维对象进行排序

> ID：15548141
> 
> 赞同：1
> 
> 时间：2013-03-21T12:52:51.757
> 
> 标签：php

经过数小时的研究，我决定问这个问题，因为到目前为止还没有找到解决方案。我需要按属性值对多维对象进行排序，对象是多维 json 的 json_decode() 的结果，所以我需要按`order`属性对以下对象进行排序：

```
 stdClass Object
(
    [main] => stdClass Object
        (
            [order] => 1
            [size] => 100
            [child] => stdClass Object
                (
                    [c1] => stdClass Object
                        (
                            [order] => 2 // must be second item
                            [size] => 100
                            [child] => stdClass Object
                                (
                                    [d1] => stdClass Object
                                        (
                                            [order] => 1
                                            [size] => 100
                                        )
                                )
                        )
                    [c2] => stdClass Object
                        (
                            [order] => 1, // must be first item
                            [size] => 100,
                            [child] => stdClass Object
                                (
                                    [d2] => stdClass Object
                                        (
                                            [order] => 1
                                            [size] => 100
                                        )
                                )                           
                        ) 
```

谢谢！

# workflow-foundation-4 - WF 4.x 接收活动 - TrackingParticipant & 如何获取内容参数

> ID：15548146
> 
> 赞同：0
> 
> 时间：2013-03-21T12:53:08.347
> 
> 标签：workflow-foundation-4

我正在使用带有自定义跟踪系统的 WF 4.5。跟踪系统将在自定义数据库中创建任务记录。每当接收活动进入“执行”状态时，跟踪参与者将在数据库中创建一个任务。每当接收活动进入“关闭”状态时，跟踪参与者将在数据库中将任务标记为已完成。

完成任务时，我需要填写执行任务的用户。接收活动将有一个自定义类，其中包含用户属性（内容参数）。我想从跟踪参与者那里获取这个用户属性。

我该怎么做？

```
public class WorkflowSystemTrackingParticipant : TrackingParticipant
{
     protected override void Track(TrackingRecord record, TimeSpan timeout)
     {
           ActivityStateRecord aRecord = record as ActivityStateRecord;
           ... // get the parameters values send to the receive activity
     }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:10:56.883

就像您跟踪状态和变量一样，您也想跟踪参数。

在您的特定情况下，您将跟踪`InArgument<string>`哪个持有您想要的用户。

```
new ActivityStateQuery
{
    Variables = { * },
    States = { "Executing", "Closed" },
    Arguments = { "UserArgument" }
} 
```

现在您可以获得*UserArgument*，它在以下位置可用`ActivityStateRecord`：

```
protected override void Track(TrackingRecord record, TimeSpan timeout)
{
    var aRecord = record as ActivityStateRecord;

    var userName = aRecord.Arguments["UserArgument"] as string;

    // do whatever you want with 'username'
} 
```

# c# - 无法从已加载的输入文档中去除空白。将输入文档作为 XmlReader 提供

> ID：15548147
> 
> 赞同：3
> 
> 时间：2013-03-21T12:53:13.970
> 
> 标签：c#, .net, c#-4.0

我想转换一个 XML 文档，但是遇到了问题。

我的 XSLT 看起来像这样：

```
<?xml version="1.0" encoding="iso-8859-1" ?> 
<xsl:stylesheet version="1.0"xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" /> 
    <xsl:strip-space elements="*" /> 

    <xsl:template match="/">
        <xsl:apply-templates select="address" /> 
    </xsl:template>

    <xsl:template match="address">
        <xsl:value-of select="@street" /> 
        <xsl:value-of select="@housenr" /> 
        <xsl:value-of select="@zipcode" /> 
        <xsl:value-of select="@city" /> 
        <xsl:value-of select="@country" /> 
    </xsl:template>
</xsl:stylesheet> 
```

我要转换的 XML 文档如下所示：

```
<address id="4" type="1" 
    typename="Postadres" 
    street="pak street" 
    housenr="420" 
    zipcode="42000" 
    city="Nill" 
    country="Lahore" 
    kix="" /> 
```

这是我写的代码：

```
public static string Transform(XmlDocument doc, XmlDocument stylesheet)
{
    var transform = new System.Xml.Xsl.XslCompiledTransform();
    XmlDocument domOutput = new XmlDocument();

    stylesheet.PreserveWhitespace = false;
    transform.Load(stylesheet);    // compiled stylesheet

    MemoryStream oStream = new MemoryStream();
    var writer = new System.IO.StringWriter();

    transform.Transform(doc, (XsltArgumentList)null, oStream);

    domOutput.Load(oStream);

    return writer.ToString();
} 
```

以下行引发异常

```
transform.Transform(doc, (XsltArgumentList)null, oStream); 
```

异常消息：

> 无法从已加载的输入文档中去除空白。改为将输入文档作为 XmlReader 提供。

你能告诉我我做错了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T12:49:40.100

我解决了。实际上“XslCompiledTransform.Transform”将 XmlReader 作为第一个参数，我在第一个参数中传递了 XmlDocument。这是代码。

```
public static string Transform(XmlDocument doc, XmlDocument stylesheet)
    {
        try
        {
            System.Xml.Xsl.XslCompiledTransform transform = new System.Xml.Xsl.XslCompiledTransform();
            transform.Load(stylesheet); // compiled stylesheet
            System.IO.StringWriter writer = new System.IO.StringWriter();
            XmlReader xmlReadB = new XmlTextReader(new StringReader(doc.DocumentElement.OuterXml));
            transform.Transform(xmlReadB, null, writer);
            return writer.ToString();
        }
        catch (Exception ex)
        {
            throw ex;
        }

    } 
```

# php - Joomla 隐藏“文章”

> ID：15548156
> 
> 赞同：-2
> 
> 时间：2013-03-21T12:53:38.447
> 
> 标签：php, html, joomla

我正在使用Joomla，我有一个小问题......当我点击主菜单中的文章链接时，该部分的标题变成了“文章”一词。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:58:56.637

Joomla 内置了这个。由于您没有发布您的版本，因此很难确定，但它可能会在全局文章选项中（内容 > 文章管理器 > 选项）或菜单设置中（菜单 > your_menu > your_menu_item > 文章选项）。

您不需要修改模板文件或编写 CSS。这是最后的手段，可能会使以后撤消这些更改更加困难。

# javascript - 如何在点击或没有单独的“谢谢”页面时实施 Facebook 转化跟踪

> ID：15548157
> 
> 赞同：5
> 
> 时间：2013-03-21T12:53:41.087
> 
> 标签：javascript, ajax, facebook, onclick, tracking

尝试在 Facebook 选项卡中实现 Facebook 转化跟踪。您可以在此处查看页面[http://www.facebook.com/StChristophersFellowship/app_366591783429546](http://www.facebook.com/StChristophersFellowship/app_366591783429546)问题是提交表单后不会运行单独的页面。我可以让一段 javascript 运行，但只有 onclick 提交按钮，我认为它也被注入到 HTML 文档的头部。我找到了从链接或单击运行 Javascript 的答案 - 如果我从单独的 JS 文档调用跟踪/转换代码，此方法是否有效？

任何帮助将不胜感激 - 谢谢！

“我必须同意上面的评论，你不能调用文件，但你可以加载这样的 JS 文件，我不确定它是否回答了你的问题，但它可能会有所帮助......哦，我已经在我的示例中使用了链接而不是按钮...

```
<a href='linkhref.html' id='mylink'>click me</a>

<script type="text/javascript">

var myLink = document.getElementById('mylink');

myLink.onclick = function(){

var script = document.createElement("script");
script.type = "text/javascript";
script.src = "Public/Scripts/filename.js."; 
document.getElementsByTagName("head")[0].appendChild(script);
return false;

}

</script>" 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-11T14:46:37.857

**我尝试使用 Nicolás 解决方案，但从未验证转换。**

但是，我发现[一篇文章（存档版本）](https://web.archive.org/web/20140122142123/http://flashfotoincblog.com/2013/04/25/using-facebook-conversion-tracking-pixels-in-a-dynamic-web-application/)描述了一种立即起作用的技术，使用来自`<noscript><img src="..." /></noscript>`.

在您的页面上放置一个元素，例如：

```
<div id="fb_pixel"></div> 
```

然后为您的转化声明这些 CSS 规则，更改在您自己的跟踪代码中找到`background-image`的URL。`<noscript>`

```
#fb_pixel { display:none; }
.fb_conversion
{
    background-image: url('https://www.facebook.com/offsite_event.php?id=33333333333&value=0&currency=USD');
} 
```

当您希望进行跟踪时（例如，在提交 AJAX 表单时），您可以将`fb_conversion`类添加到`<div>`使用 JavaScript。例如，使用 jQuery：

```
$("#fb_pixel").addClass("fb_conversion"); 
```

这将使浏览器加载图像，从而跟踪您的转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-26T20:56:49.293

我有一个类似的问题，我解决了它把 AJAX 调用放在跟踪回调上。如下：

```
$(function () {
    $('#btnSend').click(facebookTrackingSendClick);
});

function facebookTrackingSendClick(e) {
    e.preventDefault();
    var clickedElement = this;
    var fb_param = {};
    fb_param.pixel_id = '123';
    fb_param.value = '0.00';
    fb_param.currency = 'BRL';
    (function () {
        var fpw = document.createElement('script');
        fpw.async = true;
        fpw.src = '//connect.facebook.net/en_US/fp.js';
        fpw.onload = function () {
            // Callback here.
        };
        var ref = document.getElementsByTagName('script')[0];
        ref.parentNode.insertBefore(fpw, ref);
    })();
} 
```

# python - Python - 检查用户输入以确保它是一个整数 - 没有字母等

> ID：15548161
> 
> 赞同：0
> 
> 时间：2013-03-21T12:54:13.527
> 
> 标签：python

此代码是来自 picoctf.com 即将举行的比赛的预览。我修改了提供的原始代码，以便允许用户输入，但我无法让测试#2 工作。当输入包含至少一个字母的 10 个字符的字符串时，我希望它打印只能使用数字。目前它尝试将用户输入转换为整数值以将其与实际序列进行比较，但如果存在字母，则测试失败，因为字母无法转换为整数值：

123456789a 产生“invalid literal for int() with base 10 ...”

如何修复这段代码以便正确测试？

**

```
if int(serial) != serial:
            print ("only numbers allowed")
            print ('Failed Test 2') 
```

**

```
#!/usr/bin/env python
# Your goal is to find the input that will verify your robot's serial number
#solution to keep it handy = 0933427186

serial = input ("Please enter a valid serial number from your RoboCorpIntergalactic purchase")

def check_serial(serial):
    if len(serial) != 10:
        print ('Failed Test 1')
        return False
    if int(serial) != serial:
        print ("only numbers allowed")
        print ('Failed Test 2')
        return False
    if int(serial[0])+int(serial[1]) != 9:
        print ('Failed Test 3')
        return False
    if int(serial[2])*int(serial[3]) != 9:
        print ('Failed Test 4')
        return False
    if int(serial[4])-int(serial[5]) != 2:
        print ('Failed Test 5')
        return False
    if int(serial[5])%int(serial[4]) != 2:
        print ('Failed Test 6')
        return False
    if int(serial[6])/int(serial[7]) != 7:
        print ('Failed Test 7')
        return False
    if int(serial[8])-int(serial[9]) != 2:
        print ('Failed Test 8')
        return False
    if int(serial[7])*int(serial[1]) != 9:
        print ('Failed Test 9')
        return False
    if int(serial[2]) + int(serial[3]) != int(serial[9]):
        print ('Failed Test 10')
        return False
    return True

if check_serial(serial):
    print ("Thank you! Your product has been verified!")
else:
    print ("I'm sorry that is incorrect. Please use a valid RoboCorpIntergalactic serial number") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T12:55:41.500

用于[`str.isdigit()`](http://docs.python.org/3/library/stdtypes.html#str.isdigit)测试所有字符是否都是数字：

```
>>> 'a1'.isdigit()
False
>>> '11'.isdigit()
True
>>> '1a'.isdigit()
False 
```

您*可能*希望将`serial`字符串转换为整数序列，以使您的所有测试更容易：

```
s_int = [int(d) for d in serial] 
```

然后

```
if s_int[0] + s_int[1] != 9: 
```

等等

您可以使用索引、运算符和预期结果轻松构建一系列测试：

```
import operator

tests = (
    (0, 1, operator.add, 9),
    (2, 3, operator.mul, 9),
    (4, 5, operator.sub, 2),
    (5, 4, operator.mod, 2),
    (6, 7, operator.truediv, 7),
    (8, 9, operator.sub, 2),
    (7, 1, operator.mul, 9),
)

for i, (a, b, op, res) in enumerate(tests, 3):
    if op(s_int[a], s_int[b]) != res:
        print("Failed test {}".format(i))
        return False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:56:39.827

采用**[`str.isdigit()`](http://docs.python.org/2/library/stdtypes.html#str.isdigit)**

> 如果字符串中的所有字符都是数字并且至少有一个字符，则返回 true，否则返回 false。

您也可以使用正则表达式：

```
import re;
if(re.match('\D', serial)):
    print ('Failed Test 2') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:00:45.910

```
try:
    int(serial)
except ValueError:
    print ("only numbers allowed")
    print ('Failed Test 2') 
```

或遵循 Martijn 的建议

```
try:
    s_int = [int(d) for d in serial]
except ValueError:
    s_int = None
    print ("only numbers allowed")
    print ('Failed Test 2') 
```

# matplotlib - 线图上的水平标记线

> ID：15548165
> 
> 赞同：0
> 
> 时间：2013-03-21T12:54:17.807
> 
> 标签：matplotlib

我有两个相同功能的表示。一个显示它是电压的函数，另一个显示为深度的函数（一个单调但复杂的函数）。深度可以表示为电压的函数。我想在深度表示中添加电压轴之类的东西，但这似乎是不可能的。

如何在深度图上以 -0.5、-1.0、-1.5、... 等电压的增量添加垂直线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:26:48.080

我发现确实可以在顶部创建自定义第二轴。结果如下所示：[https ://dl.dropbox.com/u/226980/solved.jpg](https://dl.dropbox.com/u/226980/solved.jpg)

这通过使用[FixedLocator 起作用](http://matplotlib.org/api/ticker_api.html#matplotlib.ticker.FixedLocator)。

整个代码如下所示：

```
f = subplot(111)
p1 = plot(depth_samples,NtNdbulk, label = "relative concentration")
xlabel("depth [um]")
ylabel("N_trap/N_bulk")

twinx()
p2 = plot(depth_samples,Nt, color='r', label = "absolute concentration")   

p = p1 + p2
ylabel("N_trap")

labs = [l.get_label() for l in p]
legend(p, labs, loc=0)

ax2 = twiny()
p1 = plot(depth_samples,NtNdbulk, alpha = 0) #invisible

l = matplotlib.ticker.FixedLocator(tick_depth*1e4) # Positions of the ticks
ax2.get_xaxis().set_major_locator(l)
ax2.get_xaxis().set_ticklabels(ticks) # Voltages as displayed
xlabel("DLTS voltage during pulse")

show() 
```

# c# - 表单上的自动调整面板大小

> ID：15548172
> 
> 赞同：1
> 
> 时间：2013-03-21T12:54:41.837
> 
> 标签：c#, forms, panel

我在一个表格上有两个面板。我想要其中一个，当用户最大化表单时，面板也会最大化，具体取决于表单。我试过了，面板显示在整个表单上，隐藏了另一个面板。这是我的代码：

```
public MainForm()
{
  InitializeComponent();

  panel2.Anchor = (AnchorStyles.Bottom | AnchorStyles.Right);
  panel2.Dock = DockStyle.Fill;
  TaskControl t = new TaskControl();
  int x, y;
  x = 0;
  y = 0;
  t.Location = new Point(x, y);
  panel2.Controls.Add(t);
  t.BringToFront();

} 
```

* * *

我设法做到了。我从属性更改了锚的值。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:31:10.590

听起来你想要一个`splitcontainer`. 使用此控件，您可以获得两个面板。将“fixedpanel”属性设置为您不想调整大小的面板。另一个面板将随着表单的大小调整（或最大化）而调整

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:55:56.267

您不仅应该在初始化时这样做，还应该在 Form_Resize 事件等中这样做。例如，您可以处理`Form.ResizeEnd`事件，请参阅参考资料[here](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.resizeend.aspx)。

# eclipse - 在 Eclipse 中更改 github 标识符

> ID：15548173
> 
> 赞同：0
> 
> 时间：2013-03-21T12:54:44.613
> 
> 标签：eclipse, github, egit

我正在做一个通过 github 和 eclipse 共享的项目，我可以毫无问题地提交，但是我的伙伴在他第一次远程推送时输入了错误的标识符（用户名和密码）。因此，每次他尝试在存储库上推送和提交时，eclipse 都会使用那些错误的标识符登录到 github，但它会失败。有没有办法改变这些标识符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:59:29.887

如果他输入了错误的用户名，他可以继续`Window/Preferences/`搜索`git`和`Configuration`部分，他可以更改它。否则如果输入了错误的密码，他可以在该部分
搜索和，在选项卡上，他可以在 git 部分更改密码`secure``Secure storage``Contents`

# java - Spring DI 声明和实例化 Arraylist 的方法？

> ID：15548175
> 
> 赞同：1
> 
> 时间：2013-03-21T12:54:48.773
> 
> 标签：java, spring, dependency-injection

从春天开始。而且，我听到有人说它会阻止使用“新”关键字。所以，我很想知道如何在 Spring DI 方式下编写代码？

```
private ArrayList<String> arrayMan;

public SpringDI() {
arrayMan = new ArrayList<String>();

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:05:13.757

这就是如何使用弹簧来完成的。

```
<bean id="arrayMan" class="java.util.ArrayList">
    <constructor-arg>
        <list>
            <ref bean="one"/>
            <ref bean="two"/>                
        </list>
    </constructor-arg>
</bean> 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T12:59:37.953

就弹簧 DI 而言，这完全没问题。

如果它是变量的默认值，那么用`new`.

但是如果你仍然想注入一个列表，你可以使用

```
<list>
    <value>...</value>
</list> 
```

# oracle - PL/SQL Oracle 错误处理

> ID：15548176
> 
> 赞同：1
> 
> 时间：2013-03-21T12:54:48.903
> 
> 标签：oracle, error-handling, plsql

我创建了一个触发器，它只允许用户拥有 10 个当前已下订单。因此，现在当客户尝试下订单号 11 时，oracle 数据库会返回一个错误。那么3个错误。

> ORA-20000：您当前有 10 个或更多订单正在处理。
> 
> ORA-06512：在“C3283535.TRG_ORDER_LIMIT”，第 12 行
> 
> ORA-04088: 执行触发器“C3283535.TRG_ORDER_LIMIT”期间出错

最重要的错误是我使用以下方法创建的：

> raise_application_error(-20000, '您当前有 10 个或更多订单正在处理。');

我只是想知道在搜索并尝试了多种方法后如何更改其他两个错误的错误消息，甚至不将它们全部显示给用户？

这是我用过的代码

```
 create or replace trigger trg_order_limit
    before insert on placed_order for each row  
    declare
    v_count number;
    begin
   -- Get current order count
   select count(order_id)
   into   v_count
   from   placed_order
   where  fk1_customer_id = :new.fk1_customer_id;

   -- Raise exception if there are too many
   if v_count >= 10 then
   EXCEPTION
   WHEN OTHERS THEN
    raise_application_error(-20000, 'You currently have 10 or more orders  processing.');
   end if;
   end; 
```

非常感谢理查德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:00:44.653

异常传播从内部到外部块，而不是从外部到内部块的变量范围。有关这方面的更多参考，请阅读 McLaughlin 的“使用 PL/SQL 编程”，第 5 章。

你在这里得到的是一个异常堆栈——从最里面的块到最外面的块引发的异常。

当您从触发器引发异常时，您的`raise_application_error`语句会返回错误。

然后它被传播到触发块，上面写着`ORA-06512: at "C3283535.TRG_ORDER_LIMIT", line 12`。这是因为触发器将引发的异常视为错误并停止继续。

然后将错误传播到引发`ORA-04088: error during execution of trigger 'C3283535.TRG_ORDER_LIMIT'`. 该错误向我们报告了在程序的哪个部分引发了错误。

如果您使用的是 Java Server Pages 或 PHP 等前端程序，您将首先捕获引发的错误 - 20000。因此，您可以向最终用户显示相同的内容。

**编辑 ：**

关于第一个错误 - `ORA-20000`，您可以在`RAISE_APPLICATION_ERROR`语句本身中更改它。

如果您想处理`ORA-06512`，您可以使用 Uday Shankar 的答案，这有助于处理此错误并显示适当的错误消息。

但是，你仍然会得到最后一个`ORA-04088`。如果我在你的位置，我就不会担心，因为在收到后，`ORA-20000`我会在前端本身引发应用程序错误，同时向用户隐藏所有其他细节。

其实这*就是*Oracle异常栈的本质。从最内层到最外层的所有错误都会被引发。这在很多时候对我们确定错误的确切来源很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:03:36.693

在触发器中可以添加异常处理部分，如下图：

```
EXCEPTION
    WHEN OTHERS THEN
        raise_application_error(-20000, 'You currently have 10 or more orders processing.'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T12:00:16.823

我看到这是一篇相当老的帖子，但我认为读者应该意识到

1.  这并没有真正执行业务规则（最多 10 个订单）。如果它只是“一些”数字以避免过多的数量，并且您不在乎有时人们是否有 12 个订单，那么这可能没问题。但如果没有，请考虑一个场景，您已经有 9 个订单，然后同时从 2 个不同的会话/交易中插入同一客户的订单。在这种情况下，您将得到 11 个订单，而不会检测到这种溢出情况。所以你实际上不能依赖这个触发器。
2.  除此之外，如果 fk1_customer_id 可能被更新，您可能也需要在更新时触发此触发器（我已经看到首先将 NULL 放入 FK 列，然后更新为实际值的实现）。您可能需要考虑这种情况是否现实。
3.  触发器存在根本缺陷。您在事务中，并且在当前正在执行但尚未完成的语句中。那么，如果插入不是单行插入，而是 `insert into placed_order (select ... from waiting_orders ...)` 您希望触发器看到的内容呢？

这种业务规则不容易执行。但是，如果您选择在触发器中执行此操作，则最好在后语句触发器中执行（因此，而不是在前行触发器中）。语句后触发器仍然不会看到其他未提交事务的结果，但至少当前语句处于定义状态。

事实上，业务规则基本上只能在提交时执行；但在 Oracle 数据库中没有像 ON-COMMIT 触发器这样的东西。您可以做的是将记录计数非规范化到客户表中（添加列 ORDER_COUNT），并在该表中放置延迟约束（ORDER_COUNT <= 10）。但是您仍然依赖于在整个代码中正确维护此字段。

一个完全可靠但有点麻烦的替代方法是创建一个物化视图（类似于`SELECT fk_customer_id, count(*) order_count from placed_orders group by fk_customer_id`, 在`FAST REFRESH ON COMMIT`放置的订单表上，并在物化视图上创建一个检查约束 order_count <= 10。这是可靠地执行这种类型的唯一方法约束，而不必考虑所有可能的情况，例如并发会话、更新等。但是请注意，FAST REFRESH ON COMMIT 会减慢您的提交速度；因此该解决方案不适用于大容量（叹息……为什么 Oracle 不提供一个 ON COMMIT 触发器...）

# php - 条纹连接和 PHP / Magento

> ID：15548178
> 
> 赞同：3
> 
> 时间：2013-03-21T12:54:59.183
> 
> 标签：php, magento, stripe-payments

我使用 Incho 的扩展来连接 Magento 和 Stripe 支付。Inchoo 组件很简单，它基于[https://github.com/stripe/stripe-php](https://github.com/stripe/stripe-php)。当我将它用于测试付款时，它可以正常工作。

但是由于“application_fee”，我需要条带连接，现在我遇到了问题。

根据教程 stripe.com/docs/connect/oauth 我使用[https://gist.github.com/afeng/3507366](https://gist.github.com/afeng/3507366)

一切仍然很好。

根据 stripe.com/docs/connect/collecting-fees ：

我们有以下代码 -

```
// Get the credit card details submitted by the form

$token = $_POST['stripeToken'];

// Create the charge on Stripe's servers - this will charge the user's card
$charge = Stripe_Charge::create(array(
  "amount" => 1000, // amount in cents
  "currency" => "usd",
  "card" => $token,
  "description" => "payinguser@example.com"),
  "application_fee" => 123 // amount in cents
  ),
  **ACCESS_TOKEN** // user's access token from the Stripe Connect flow
); 
```

但是 ACCESS_TOKEN 是个问题，因为我使用的是我在上一步中得到的那个'stripe.com/docs/connect/oauth'

并得到错误：

**基于 OAuth 的请求必须使用来自 Stripe.js 的卡令牌，但直接提供卡详细信息。**

为什么以及在哪里应该使用 Stripe.js？在请求“ACCESS_TOKEN”之前一切正常，它说：//来自 Stripe Connect 流程的用户访问令牌 - 我已经有了 ACCESS_TOKEN

来自（stripe.com/docs/connect/oauth）{“token_type”：“bearer”，“stripe_publishable_key”：PUBLISHABLE_KEY，“scope”：“read_write”，“livemode”：“false”，“stripe_user_id”：USER_ID，“ refresh_token”：REFRESH_TOKEN， **“access_token”：ACCESS_TOKEN** }

问题 w

# jsf-2 - 错误 FacesContext 已释放

> ID：15548184
> 
> 赞同：1
> 
> 时间：2013-03-21T12:55:08.557
> 
> 标签：jsf-2, message, facescontext, view-scope

以下代码正在使用**请求范围**的托管 Bean，并且消息显示在`p:messages`标记中：

```
FacesContext context = FacesContext.getCurrentInstance();

public void addAction() {
    if(commande.exists()) {
                context.addMessage("Commande", new FacesMessage(
                        FacesMessage.SEVERITY_ERROR,"Error Message : commande exists", null));
    } else {
        commandeService.create(commande);
    }
} 
```

当我尝试在**视图范围**的托管 Bean 中使用它时，它会在记录器中显示一条错误消息：

```
Error the FacesContext is already released! 
```

并且 JSF 页面挂起而不显示面孔消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:58:09.293

您**永远不**应该将 的当前实例`FacesContext`或其任何属性分配为托管 bean 的属性。当前实例仅在当前 HTTP 请求中有效，在 HTTP 请求结束时被销毁，在任何后续 HTTP 请求中不再有效。

您应该始终在方法本地范围内获取当前实例。

```
public void addAction() {
    if (commande.exists()) {
        FacesContext.getCurrentInstance().addMessage("Commande", new FacesMessage(
            FacesMessage.SEVERITY_ERROR, "Error Message : commande exists", null));
    } else {
        commandeService.create(commande);
    }
} 
```

# vbscript - VBS 语句结束预期错误

> ID：15548185
> 
> 赞同：0
> 
> 时间：2013-03-21T12:55:09.577
> 
> 标签：vbscript

```
strCode = "Private Sub AcclvsTime() " & vbCr _
 & "Set myChtObj = oExcelWriteWorkSheet.ChartObjects.Add(100,375,75,225) "& vbCr _
 & "myChtObj.Chart.ChartType = 4 " & vbCr _
 & "myChtObj.Chart.SetSourceData  objWriteWorkbook.Sheets("sheet2").Range("A1:B15")" & vbCr _
& "End Sub"
objWriteExcel.VBE.ActiveVBProject.VBComponents.Item("Sheet1").CodeModule.AddFromString(strCode) 
```

当我执行此代码时，我收到错误“第 4 行中预期的语句结束”（`& "myChtObj.Chart.SetSourceData objWriteWorkbook.Sheets("sheet2").Range("A1:B15")" & vbCr _`）

任何人都可以帮助我错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:08:12.247

@paxdiablo：我会发表评论，但看不到评论按钮。

但是请注意，`Range("A1:B15")"`& vbCr 的第二个引号是从`"myChtObj.Chart.SetSourceData`

拥有完整的代码块会更好，因为我们无法确定您需要什么样的结束语句。即，你的`"End Sub"`是双引号。如果这是潜艇的尽头，你需要把它们拿出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:58:29.197

```
" ... Range("A1:B15")" & vbCr 
```

请注意第四行引号中的那些引号（对于两者`"sheet2"`和`"A1:B15"`） - 您需要修复它。

如果你想在引号内加上引号，你可以这样做，通过转义。双引号字符串中的两个连续`"`字符将被转换为一个`"`.

```
"the word ""xyzzy"" is quoted" 
```

或者，您也可以使用`chr(34)`来获取报价：

```
"the word " & chr(34) & "xyzzy" & chr(34) & " is quoted" 
```

这在更复杂的情况下可能更可取，尽管我很少需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:26:22.647

通过连接构建字符串既麻烦又容易出错。特别是，如果结果是多行字符串，请使用 Join：

```
strCode = Join( Array( _
        "Private Sub AcclvsTime()" _
      , "  Set myChtObj = oExcelWriteWorkSheet.ChartObjects.Add(100,375,75,225)" _
      , "  myChtObj.Chart.ChartType = 4" _
      , "  myChtObj.Chart.SetSourceData objWriteWorkbook.Sheets(""sheet2"").Range(""A1:B15"")" _
      , "End Sub" _
), vbCrLf)
WScript.Echo strCode 
```

输出：

```
Private Sub AcclvsTime()
  Set myChtObj = oExcelWriteWorkSheet.ChartObjects.Add(100,375,75,225)
  myChtObj.Chart.ChartType = 4
  myChtObj.Chart.SetSourceData objWriteWorkbook.Sheets("sheet2").Range("A1:B15")
End Sub 
```

减少由`&`重复的东西引起的噪音`vbCr(Lf)`。这将提高您发现问题/错误的机会。（正好**两个**文字 - “sheet2”，“A1:B15” - 引用）。

**补充说明：**

鉴于罪魁祸首是：

```
"whatever("sheet2").Range("A1:B15")" 
```

很明显，该补救措施

```
"whatever(""sheet2"").Range(""A1:B15"")" 
```

比阅读/检查/写入更容易，更不容易出错

```
"whatever(" & Chr(24) & "sheet2" & Crh(34) & ").Range(" & Chr(34) + "A1:B15" & Chr(32) & ")" 
```

通过在 s 中拼接来避免文字中的 ""`& Chr(34) &`是一个**糟糕**的策略。

# math - 结合 X 和 Y 加速度来计算合成角度和加速度

> ID：15548197
> 
> 赞同：1
> 
> 时间：2013-03-21T12:55:42.983
> 
> 标签：math, angle, acceleration

从 x 和 y 计算合成加速度。计算合成加速度的角度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:58:50.310

您可以使用向量数学来计算向量的长度和角度：

```
length = sqrt(x * x + y * y)
angle = atan2(y, x) //this might be changed depending on your angle definitions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:28:00.667

您不需要 x 和 y 加速度，只需将加速度计算为每次速度变化即可。
对于 Gps，我建议使用位置的速度属性，这比位置更准确。
如果您没有速度，则将速度计算为每次距离。

距离：使用您找到的任何距离公式来计算两个纬度/经度坐标之间的距离。

如果要使用从加速度传感器获得的值，则应使用 3 轴加速度矢量：
另请参阅[how-do-i-get-the-total-acceleration-from-3-axes](https://physics.stackexchange.com/questions/41653/how-do-i-get-the-total-acceleration-from-3-axes)

检查实施是否合理的另一个提示：
总结所有（一维）加速度，它们应该接近 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T23:37:57.393

如果您想要相对于世界坐标系**的加速度方向**`TYPE_ACCELEROMETER`，那么您必须同时注册和`TYPE_MAGNETIC_FIELD`。使用您调用的结果`getRotationMatrix`，然后将**加速度计**值乘以该**矩阵**，将为您提供世界坐标系中的**加速度**坐标。前 2 个坐标是**x**和**y**坐标。
实际上，您最好也注册`TYPE_GRAVITY` 并将结果与**​​磁场**结果一起传递给`getRotationMatrix`，这样您就不必自己过滤**加速度计**值。

# git - 使用命令行克隆 git repo 成功，但使用 git GUI 客户端（例如 SourceTree）失败

> ID：15548200
> 
> 赞同：1
> 
> 时间：2013-03-21T12:55:48.967
> 
> 标签：git, atlassian-sourcetree

我在`git`Mac OSX 10.7 系统上设置了一个用户。在 git 用户的根目录中，我创建了一个`repositories` 文件夹并初始化了一个名为`test`.

到目前为止，一切都很好。现在，我从与 Mac 位于同一网络上的 PC 克隆 repo

```
git clone git@mac:repositories/test.git 
```

这成功了。然后，我可以从这个 repo 中推拉。一切看起来都不错。

但是，当尝试使用 Atlassian SourceTree（一个 GUI git 客户端）做同样的事情时，**这会失败**：

```
This is not a valid source path / URL 
```

![Atlassian SourceTree](../Images/942d8429e02aa1d448a34d08e1d21de2.png)

**有人知道我可能做错了什么吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:10:59.227

在这种情况下，您不需要用户名，因此“源路径/URL”条目就是路径`repositories/test.git`。您可以通过点击右侧的按钮来查看此信息，该按钮会提供一个打开的文件对话框。

URL 可能有效，但它的格式为 protocol::user@address/path 并且您必须在机器上运行服务器才能响应请求（在本例中为 git 或 http 服务器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-21T03:29:45.010

您可能需要在源路径/URL 中查找端口。我通过添加类似这样的端口来纠正我的问题.. xxxxxxxx.com:YYYY/xxxxx

其中 xxx... 是通常的源路径，YYYY 是端口号。

# java - 使用 java 和 ApacheClient 触发结束页面

> ID：15548202
> 
> 赞同：0
> 
> 时间：2013-03-21T12:55:54.053
> 
> 标签：java, apache-httpclient-4.x

首先，我对网页设计不太熟悉。

我正在尝试使用 java 读取 HTML 页面。在某些站点上，每次我到达页面末尾时，都会显示新信息。

当我使用 Apache 的 HttpClient 收到一个 html 时，我只得到页面的第一部分。有没有办法发送一些结束页面信号并获取页面的其余部分，只有当我在普通浏览器中到达页面末尾时才会出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T15:28:05.967

您描述的行为取决于浏览器。有一些基于 JavaScript 的触发器会根据您在页面中的视觉位置被触发。

您必须确定触发器和随后的 AJAX 调用是什么，才能尝试从源收集更多信息。

# java - 字符串转换为 int 然后更改背景

> ID：15548209
> 
> 赞同：-1
> 
> 时间：2013-03-21T12:56:09.387
> 
> 标签：java, string

我需要一些关于我的颜色选择器的帮助。好吧，我要做的是在 3 个文本字段中输入 rgb color lite 255,255,0。然后我需要将它们转换为 int 并最后更改背景颜色。现在的问题是当我点击确定按钮时我得到了一些错误。

```
public void actionPerformed(ActionEvent e) {
    if(e.getSource()==ok){
        int rgb = Integer.parseInt (text1.getText());
        int rgb1 = Integer.parseInt (text2.getText());
        int rgb2 = Integer.parseInt (text3.getText());
        v.setBackground(new Color(rgb, rgb1, rgb2));
} 
```

这会产生：*线程“AWT-EventQueue-0”中的异常 java.lang.NumberFormatException：对于输入字符串：“”在 java.lang.NumberFormatException.forInputString(Unknown Source)*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:09:31.877

您的 logcat 清楚地表明您正在尝试将空字符串转换为整数。

```
AWT-EventQueue-0" java.lang.NumberFormatException: For input string: "" 
```

即你正在通过

```
int color=Integer.parseInt("");  // this cause exception. 
```

**确保您的文本字段中有数字。** ，为他们提供验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:38:10.380

尝试调试 text1/text2/text3 文本变量并查看它们在运行时保存的内容。如果这无济于事，请尝试设置变量并查看 SetBackground 是否按预期工作。

# qt - 如何将qmap从qt传递到javascript？

> ID：15548215
> 
> 赞同：0
> 
> 时间：2013-03-21T12:56:22.917
> 
> 标签：qt, qt4, qt5, qmap

我找不到关于在 qt 中将 qmap 传递给 javascript 的示例代码。

我做了什么 ？

我已将 QObject 连接到 javascript，并且可以从 qt 应用程序发出信号，该信号由 javascript 捕获。

```
emit mydata(mapVariable); 
```

在 JavaScript 中：在我试图打印的警报中：

```
function myslot(mapVar) {
    alert (" map variable " + mapVar);
 } 
```

问题：

它没有打印任何东西。这从根本上表明我在这里犯了一个大错误。请建议我如何解决这个问题？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:09:11.827

好，

我找到了解决方案，QVariantMap是可以传递给java脚本的数据结构，在java脚本端可以被视为JSON。

# c# - 从c#执行cmd中的命令

> ID：15548216
> 
> 赞同：1
> 
> 时间：2013-03-21T12:56:23.913
> 
> 标签：c#, cmd

我想从 C# 应用程序运行多个 CMD 命令。

cmd 上的命令类似于“C:\Users\Sara Mamdouh\Desktop\New folder> hvite -T 01 -C hcon.con -w net dict hmm_list Ann.wav”。

我的问题是如何从 C# 应用程序调用此命令并接收字符串中的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:57:53.610

首先，您应该将其写入`bat`文件并将其另存为 like `bat.bat`。

```
cd \
cd C:\Users\Sara Mamdouh\Desktop\New folder
exit 
```

之后就可以使用[`Process.Start()`](http://msdn.microsoft.com/en-us/library/h6ak8zt5.aspx)方法了。

> 通过指定应用程序的名称和一组命令行参数来启动进程资源，并将资源与新的进程组件相关联。

```
Process p = new Process();
ProcessStartInfo ps = new ProcessStartInfo();
ps.FileName = "path to bat.bat";
ps.RedirectStandardInput = true;
ps.RedirectStandardOutput = true;
ps.UseShellExecute = false;
p.StartInfo.Arguments = "hvite -T 01 -C hcon.con -w net dict hmm_list Ann.wav";
p.StartInfo = ps;
p.Start();
string output = p.StandardOutput.ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:58:02.133

阅读该课程的[文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)`Process`。

由于`C:\Users\Sara Mamdouh\Desktop\New folder>`您在控制台窗口中看到的信息输出可能不是您发出的命令的一部分，因此您需要将绝对路径名添加到命令中，以便可以找到文件：

```
var cmd = @"\"<path to hvite>\hvite\" -T 01 -C hcon.con -w net dict hmm_list \"C:\Users\Sara Mamdouh\Desktop\New folder\Ann.wav\"";
System.Diagnostics.Process.Start("CMD.exe", cmd); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T12:58:26.660

[`Process.Start`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)如果您只需要启动一个进程，您可以使用该方法：

```
System.Diagnostics.Process.Start("cmd" "whatever parameters"); 
```

要阅读输出，请查看 MSDN 页面上的示例`Process.StandardOutput`：

[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standardoutput.aspx)

基本上，您不只是调用 ，而是使用所需参数`Process.Start`创建一个新对象，调用它，然后读取示例中的输出。`Process``Start()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T12:58:32.540

```
var cmd = @"hvite -T 01 -C hcon.con -w net dict hmm_list Ann.wav";
System.Diagnostics.Process.Start("CMD.exe", cmd); 
```

# java - Scala：“val”作为可能的标识符？链接到 java 库需要它

> ID：15548219
> 
> 赞同：6
> 
> 时间：2013-03-21T12:56:37.383
> 
> 标签：java, scala, scala-java-interop

在我的 scala 代码中，我使用了一个 java 库，它定义了一个具有名为“val”的公共属性的对象：

```
public class XYZ {
    public int val=...
} 
```

有没有办法在scala中获得这个属性？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-21T12:59:04.757

您可以使用反引号。*它们删除任何*Scala 关键字（或符号）的保留状态。

```
val foo = new XYZ
foo.`val` 
```

请参阅[Scala 互操作性常见问题解答](https://wiki.scala-lang.org/display/SYGN/Interoperability+FAQs)。

# ios - 核心数据 - 通过组合两个表的数据来获取结果

> ID：15548221
> 
> 赞同：0
> 
> 时间：2013-03-21T12:56:38.437
> 
> 标签：ios, core-data, nsfetchedresultscontroller

我有三个表：作业、问题、作业-问题

分配表将包含与分配相关的信息，例如其 id、标题等。

问题表将保存作业问题，并具有问题 ID、问题标题、问题文本等属性。

问题表没有作业 ID 作为属性，因为为了避免问题表中出现重复条目​​，因为多个作业可以共享同一个问题。

作业和问题通过一个名为 Assignment-Questions 的表相关联，该表具有作业 ID 和问题 ID。

例如：假设作业 1 有 3 个问题，ID 为 1、2 和 3

在这种情况下，Questions 和 Assignment-Questions 表都有 3 个条目

接下来，作业 2 有 3 个问题，ID 为 4、5 和 1（与作业 1 相同）

在这种情况下，Questions 表将有 5 个条目（1 个问题在作业 1 和 2 中都很常见），Assignment-Questions 将有 6 个条目。（作业 1 和 2 各 3 个）

在这种情况下，我想创建一个 fetch 控制器，按照添加到 Assignment-Questions 表的顺序来获取与作业 2 相关的所有问题。

我不太确定如何编写谓词和排序描述符，其中结果是通过维护 oder 来组合两个表。我尝试了一些排列和组合，但似乎没有什么对我有用。请帮我提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T15:54:39.993

@MartinR 说得对。您对连接表进行操作。我已经猜到了一些字段名称等，当然代码未经测试，但它应该让你继续前进：

```
fetchRequest = [NSFetchRequest fetchRequestWithEntityName:@"AssignmentQuestion"];
fetchRequest.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:@"question.order" ascending:YES]];
fetchRequest.predicate = [NSPredicate predicateWithFormat:@"assignment = %@", assignment];
fetchRequest.relationshipKeyPathsForPrefetching = @[@"question"]; 
```

然后在您的 VC 中，您可以对 AssignmentQuestion 对象的 FRC 进行操作：

```
- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    Question* question = [[_fetchedResultsController objectAtIndexPath:indexPath] question];
    ...
} 
```

# java - 如何获取SVN所有页面的历史记录

> ID：15548223
> 
> 赞同：0
> 
> 时间：2013-03-21T12:56:40.113
> 
> 标签：java, eclipse, svn

我正在从 SVN 服务器检查我的整个代码并将其导出到 eclipse 中。如果我对页面进行历史记录检查（通过右键单击 -> 团队 -> 显示历史记录），它将向我显示该页面的所有用户的历史记录。

我想要所有页面的历史记录。我不能一一做，因为有大量的页面。有什么捷径可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:58:31.180

显示任何版本控制的根（即您的项目）的历史记录。这应该给你所有的变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T19:16:17.103

我猜你的页面是指文件。您可以显示项目根目录的历史记录。如果您想查看一个文件的全部历史记录，请转到 Window-Preference-Team-SVN-Default number of log messages。将其提高到更高的数字...

# xml - 使用 XML 和 XSLT 格式化我的学习笔记

> ID：15548224
> 
> 赞同：0
> 
> 时间：2013-03-21T12:56:45.067
> 
> 标签：xml, xslt

我想要一种格式化学习笔记的方法，获取输入文件并输出干净的 HTML 文件。我今天自学了基本的 XML 和 XSTL（并且具备 HTML 和 CSS 的先验知识）来完成此任务。所以我会有一个带有注释内容的简单 XML 文件，如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="stylesheet.xsl"?> 
<root>
  <heading>Programming Fundamentals 48023</heading>
  <section>
    <subheading>Classes and Objects</subheading>
    <point>Something about classes</point>
    <point>Some else about classes</point>
    <codeBlock>
      <text>How to create an instance of a class</text>
      <code>Class class = new Class();</code>
    </codeBlock>
    <point>Something about objects</point>
    . . .
  </section>
  <section>
    <subheading>Methods</subheading>
    <point>Something about methods</point>
    <codeBlock>
      <text>How to define a method</text>
      <code>modifiers returnType methodName() { . . . }</code>
    </codeBlock>
    . . .
  </section>
  . . .
</root> 
```

XML 文档应该将我的笔记分成任意数量的部分，每个部分都有一个副标题，以及任意数量的点和具有不同格式代码块的点。

然后，为了格式化 XML 文档，有一个 XSLT 样式表（带有 HTML 和 CSS 等），看起来有点像这样：

```
<?xsl version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="/">
<html>
  <head>
    <title><xsl:value-of select="root/heading" /></title>
    <style>
      body {font-family:Tahoma; }
      div {width:800px; margin-left:auto; margin-right:auto; }
      h1 {color:#6FA5FD; border-bottom: 1px dotted #333333; text-indent:64px; }
      h2 {color:#6FA5FD; border-bottom: 1px dotted #333333; text-indent:96px; }
      pre {width:640px; border-style:dotted; border-width:1px; border-color:#333333; background-color:#CCCCFF; }
      ul {list-style-type:square; color:#6FA5FD; }
      li span {color:#000000; font-size:10; }
    </style>
  </head>
  <body>
    <div>
<!-- - - - - - - - - CONTENT STARTS HERE - - - - - - - - -->

<h1><xsl:value-of select="root/heading" /></h1>
<xsl:for-each select="root/section">
  <h2><xsl:value-of select="subheading" /></h2>
  <xsl:for-each select="point">
      <ul>
        <li><span>
          <xsl:value-of select="." />
        </span></li>
      </ul>
  </xsl:for-each>
  <xsl:for-each select="codeBlock">
      <ul>
        <li><span> <xsl:value-of select="./text" />
          <pre> <xsl:value-of select="./code" /> </pre>
        </span></li>
      </ul>
  </xsl:for-each>
</xsl:for-each>

<!-- - - - - - - - - CONTENT ENDS HERE - - - - - - - - -->
    </div>
  </body>
</html>
</xsl:template>
</xsl:stylesheet> 
```

所以 XML 元素变成了格式化的 HTML 元素，XML 元素变成了格式化的 HTML 元素。这很棒。然后 XML 标记将点点和代码块组合在一起，点点就变成了带有蓝色项目符号和黑色文本的列表项，并且代码块被格式化为 HTML 元素。

不过，我遇到了一些问题：
-我没有办法让点点具有不同的缩进水平。所以我不能有一个点，比如说，“类”，然后在那个点下面有几个点，稍微缩进，在一个点上讨论什么是类，在另一个点上命名约定，等等。我猜该解决方案与制作一些新的 XML 元素有关，例如 point2，其格式为：

*   观点

代替

*   观点

（导致缩进的额外 HTML 元素）。
- 如果在我的 XML 文档中，我以特定的顺序定义了各种点和代码块（例如，点、点、代码块、点、代码块、点），那么在 XSLT 样式表完成其工作后生成的 HTML 文件将包含所有内容这些点聚集在一起，然后是所有代码块（例如，点、点、点、点、代码块、代码块）。我明白为什么会这样；我的 XSLT 文档循环遍历所有 XML 元素，然后遍历所有 XML 元素。我猜这个解决方案与循环遍历一个元素的所有子节点有关，如果下一个元素是一个元素，则输出一件事，如果下一个元素是一个元素，则输出另一件事。

有任何想法吗？随意建议对 XML 或 XSLT 文档进行重组。也许我应该使用属性进行缩进或区分点和代码块？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:14:51.620

您遇到的捆绑是避免`for-each`和使用模板的一个很好的理由，如下所示：

```
<?xsl version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:strip-space elements="*" />
  <xsl:output indent="yes" omit-xml-declaration="yes" />
  <xsl:template match="/">
    <html>
      <head>
        <title>
          <xsl:value-of select="root/heading" />
        </title>
        <style>
          body {font-family:Tahoma; }
          div {width:800px; margin-left:auto; margin-right:auto; }
          h1 {color:#6FA5FD; border-bottom: 1px dotted #333333; text-indent:64px; }
          h2 {color:#6FA5FD; border-bottom: 1px dotted #333333; text-indent:96px; }
          pre {width:640px; border-style:dotted; border-width:1px; 
               border-color:#333333; background-color:#CCCCFF; }
          ul {list-style-type:square; color:#6FA5FD; }
          li span {color:#000000; font-size:10; }
        </style>
      </head>
      <body>
        <div>
          <!-- - - - - - - - - CONTENT STARTS HERE - - - - - - - - -->

          <h1>
            <xsl:value-of select="root/heading" />
          </h1>
          <xsl:apply-templates select="root/section" />

          <!-- - - - - - - - - CONTENT ENDS HERE - - - - - - - - -->
        </div>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="section">
    <h2>
      <xsl:value-of select="subheading" />
    </h2>

    <xsl:apply-templates select="." mode="list" />
  </xsl:template>

  <xsl:template match="*[point or codeBlock]" mode="list">
    <ul>
      <xsl:apply-templates select="point | codeBlock" />
    </ul>
  </xsl:template>
  <xsl:template match="*" mode="list" />

  <xsl:template match="point">
    <li>
      <span>
        <xsl:apply-templates select="text()" />
      </span>
      <xsl:apply-templates select="." mode="list" />
    </li>
  </xsl:template>

  <xsl:template match="codeBlock">
    <li>
      <span>
        <xsl:value-of select ="text" />
        <pre>
          <xsl:value-of select ="code" />
        </pre>
      </span>
    </li>
  </xsl:template>
</xsl:stylesheet> 
```

我还包括上面的更改以处理多级点，因此您可以这样做：

```
<point>
  I have a point.
  <point>
    This is a sub point
    <point>With a sub-sub point beneath it</point>
  </point>
  <point>This is just a sub point</point>
</point> 
```

并且生成的 XML 将具有嵌套的 LI 和 UL：

```
<li>
  <span>
    I have a point.
  </span>
  <ul>
    <li>
      <span>
        This is a sub point
      </span>
      <ul>
        <li>
          <span>With a sub-sub point beneath it</span>
        </li>
      </ul>
    </li>
    <li>
      <span>This is just a sub point</span>
    </li>
  </ul>
</li> 
```

# java - getRootPane() 默认按钮 - 这是一个错误吗？

> ID：15548238
> 
> 赞同：0
> 
> 时间：2013-03-21T12:57:21.033
> 
> 标签：java, swing, jbutton, defaultbutton

我做了一个SSCCE。请注意，它必须是 Windows Look&Feel。

```
import java.awt.*;
import javax.swing.*;

public class DefaultButtonBug {
private static final String LAF_WINDOWS = "com.sun.java.swing.plaf.windows.WindowsLookAndFeel";

public static void main(String[] args) {

    try {
        UIManager.setLookAndFeel(LAF_WINDOWS);
    } catch (Exception ex) {
        System.out.println("Setting the L&F failed so I cannot reproduce the bug.");
        System.exit(1);
    }

    EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            JPanel content = new JPanel();
            JButton defaultButton = new JButton("Default");

            content.add(defaultButton);

            JFrame frame = new JFrame();

            frame.getRootPane().setDefaultButton(defaultButton);
            frame.setContentPane(content);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.pack();
            frame.setVisible(true);                
        }
    });
}
} 
```

*   启动这个
*   按钮应该是焦点。如果没有，请单击它。
*   单击任何其他窗口，以确保当前窗口失去焦点
*   即使此窗口不再有焦点，该按钮仍以蓝色调显示动画！

按钮“脉冲”动画在标准 Java L&F 中是不存在的。

注意当这个按钮不再是默认按钮时（去掉代码中的相应行），窗口失去焦点后按钮会变灰，没有任何动画。

我的问题是：这被认为是一个错误吗？因为当窗口也隐藏在另一个窗口后面时，这使得 EDT 继续做事而不是空闲（我做了一些分析）。事实上，这是最困扰我的事情：隐藏窗口不会让 EDT 闲置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:19:13.427

> getRootPane() 默认按钮 - 这是一个错误吗？

*   不像@Guillaume Polet 的评论中描述的那样

*   但我倾向于使用 KeyBindings，因为`ENTER`对于所有 JButtons

*   焦点可以通过`getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT/*.WHEN_FOCUSED*/)`

*   注意 (Win OS) JButton 也将 TAB 实现为 KeyBindings 中的加速器。

从代码

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class DefaultButtonBug {

    private static final String LAF_WINDOWS = "com.sun.java.swing.plaf.windows.WindowsLookAndFeel";

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel(LAF_WINDOWS);
        } catch (Exception ex) {
            System.out.println("Setting the L&F failed so I cannot reproduce the bug.");
            System.exit(1);
        }
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                JPanel content = new JPanel();
                JButton focusedButton1 = new JButton("Focused");
                focusedButton1.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        System.out.println("Focused pressed");
                    }
                });
                content.add(focusedButton1);
                final JButton defaultButton2 = new JButton("Default");
                defaultButton2.setIcon(UIManager.getIcon("OptionPane.informationIcon"));
                defaultButton2.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        System.out.println("Default pressed");
                    }
                });
                defaultButton2.getModel().addChangeListener(new ChangeListener() {
                    @Override
                    public void stateChanged(ChangeEvent e) {
                        ButtonModel model = (ButtonModel) e.getSource();
                        if (model.isRollover()) {
                            defaultButton2.setIcon(UIManager.getIcon("OptionPane.errorIcon"));
                        } else {
                            defaultButton2.setIcon(UIManager.getIcon("OptionPane.informationIcon"));
                        }
                    }
                });
                content.add(defaultButton2);
                JFrame frame = new JFrame();
                frame.getRootPane().setDefaultButton(defaultButton2);
                frame.getRootPane().getInputMap(
                        JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT/*.WHEN_FOCUSED*/)
                        .put(KeyStroke.getKeyStroke("ENTER"), "clickButton");
                frame.getRootPane().getActionMap().put("clickButton", new AbstractAction() {
                    private static final long serialVersionUID = 1L;

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        defaultButton2.doClick();
                    }
                });
                frame.getRootPane().setDefaultButton(defaultButton2);
                frame.setContentPane(content);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

一天的学习项目

*   在 Win7/8 (Java6/7) 上允许在 un_focused Java 窗口上发生鼠标事件（对于所有标准 L&F），可以从添加到 ButtonModel 的 ChangeListener 监听

*   在 WinXP 上不起作用

专注

![在此处输入图像描述](../Images/86050707f5a01122180e9119111156c0.png)

![在此处输入图像描述](../Images/081a57b3831f9418ab2c6a9554313cdf.png)

un_fosused 触发相同的事件

![在此处输入图像描述](../Images/49ddda5d752f0a1e44be2fb7b3df148b.png)

编辑

在 JDK7_011 编译的 Win7 中以蓝色闪烁 JButtons（集中在 Java 窗口中）

*   在第二个周期以蓝色闪烁

![在此处输入图像描述](../Images/a44fc0ee6e31911ba308c112131b063e.png)

和

![在此处输入图像描述](../Images/a22c63dc6a2032210cc5acff02648176.png)

# javascript - 在弹出窗口中访问 DOM。如果页面位于不同的服务器上，这可能吗？

> ID：15548239
> 
> 赞同：0
> 
> 时间：2013-03-21T12:57:21.633
> 
> 标签：javascript, popup

嘿，我正在尝试在页面中打开一个弹出窗口，并从打开页面中的 JavaScript 访问打开的弹出窗口中的 DOM。但是我无法这样做。

我在做

```
myWindow=window.open(url,'','width=200,height=100'); 
```

然后尝试访问弹出窗口的正文

```
myWindow.document.body 
```

我对此感到不确定。

请注意，正在打开的弹出窗口位于打开页面的另一台服务器中。

是我做错了什么还是不可能这样做？

# vb.net - FindInfiles pdf 怪癖

> ID：15548241
> 
> 赞同：0
> 
> 时间：2013-03-21T12:57:28.223
> 
> 标签：vb.net

我刚刚意识到 FileSystem.FindInFiles 报告成功，即使它在 .pdf 文件的文档属性中找到 containsText 也是如此。这很烦人，因为最终用户在文档中查找字符串却没有找到（在这种情况下，字符串只出现在文档属性的 Title 字段中）。

请让我知道是否有解决此问题的方法。

或者，任何人都可以推荐一个可靠、快速的搜索 VB 兼容的 api/library/method 以在 windows 文件共享上使用吗？

# android - 在android中使用smtp附加文件和发送邮件

> ID：15548246
> 
> 赞同：2
> 
> 时间：2013-03-21T12:57:43.897
> 
> 标签：android, gmail, image-file

在我的应用程序中，我正在使用 smtp 发送邮件。我想将图像文件附加到邮件中。我该如何附加它？我试过了。但没有在邮件中获取图像。它给出了小图标。请帮助。在此先感谢。下面是邮件代码和邮件的外观 -

```
 public class MailImageFile extends javax.mail.Authenticator {

public MailImageFile(){

}
public void Mail(String user, String pass) {    

    Properties props = new Properties();
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.socketFactory.port", "465");
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.port", "465");

    Session session = Session.getDefaultInstance(props, new javax.mail.Authenticator() {
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(USERNAME, PASSWORD);
        }
        });
    try {

        Message message = new MimeMessage(session);
        message.setFrom(new InternetAddress(USERNAME));
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(TO));
        message.setSubject("Testing Subject");     
       Multipart multipart = new MimeMultipart();

        MimeBodyPart messageBodyPart = new MimeBodyPart();
        DataSource source = new FileDataSource(new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/wallpaper.jpg"));
        messageBodyPart.setDataHandler(new DataHandler(source));
        messageBodyPart.setFileName("image.png");
        messageBodyPart.setDisposition(MimeBodyPart.ATTACHMENT);
        messageBodyPart.setHeader("Content-ID","<vogue>");
        multipart.addBodyPart(messageBodyPart);

                  message.setContent(multipart);

        Transport.send(message);
    } catch (MessagingException e) {
        throw new RuntimeException(e);
    }           
}   
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:09:04.703

你可以像这样附加文件

在那个 n 中指定路径，它将附加该文件

编辑：

```
Multipart _multipart; = new MimeMultipart();

BodyPart messageBodyPart = new MimeBodyPart();

File sdCard =Environment.getExternalStorageDirectory();     

String path=sdCard.getAbsolutePath() + "/AttendanceSystem/MonthlyReport.xls";

messageBodyPart.setFileName(path);

_multipart.addBodyPart(messageBodyPart);

// Put parts in message 

msg.setContent(_multipart) 
```

按照上述方式做我刚刚在我的设备上测试了它的工作n附加chk它`enter code here`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:38:36.437

转念一想：

利用`javax.mail.util.ByteArrayDataSource:`

```
Multipart multipart = new MimeMultipart();
DataSource source = new ByteArrayDataSource(imageFile, "image/bmp");

// creates body part for the message
MimeBodyPart messageBodyPart = new MimeBodyPart();
messageBodyPart.setContent("Hi...", "text/html; charset=utf-8");

MimeBodyPart attachPart;
attachPart = new MimeBodyPart();
attachPart .setDataHandler(new DataHandler(source));
attachPart .setFileName(filename);

multipart.addBodyPart(messageBodyPart);
multipart.addBodyPart(attachPart);

message.setContent(multipart); 
```

[ByteArrayDataSource](http://docs.oracle.com/javaee/5/api/javax/mail/util/ByteArrayDataSource.html)的构造函数需要一个字节数组或一个 InputStream 作为参数。所以，如果你在变量 bmp 中有你的位图，你会像这样把它放到 byteArray 中：

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

并会像这样在 ByteArrayDataSource 中使用它：

```
DataSource source = new ByteArrayDataSource(byteArray, "image/png"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:15:07.840

试试这个代码：

```
public class Mail extends javax.mail.Authenticator { 
private String _user; 
private String _pass; 

private String[] _to; 
private String _from; 

private String _port; 
private String _sport; 

private String _host; 

private String _subject; 
private String _body; 

private boolean _auth; 

private boolean _debuggable; 

private Multipart _multipart; 

public Mail() { 
    _host = "smtp.gmail.com"; // default smtp server 
    _port = "465"; // default smtp port 
    _sport = "465"; // default socketfactory port 

    _user = ""; // username 
    _pass = ""; // password 
    _from = ""; // email sent from 
    _subject = ""; // email subject 
    _body = ""; // email body 

    _debuggable = false; // debug mode on or off - default off 
    _auth = true; // smtp authentication - default on 

    _multipart = new MimeMultipart(); 

    // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
    MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap(); 
    mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html"); 
    mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml"); 
    mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain"); 
    mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
    mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822"); 
    CommandMap.setDefaultCommandMap(mc); 
} 

public Mail(String user, String pass) { 
    this(); 

    _user = user; 
    _pass = pass; 
} 

public boolean send() throws Exception { 
    Properties props = _setProperties(); 

    if(!_user.equals("") && !_pass.equals("") && _to.length > 0 && !_from.equals("") && !_subject.equals("") && !_body.equals("")) { 
        Session session = Session.getInstance(props, this); 

        MimeMessage msg = new MimeMessage(session); 

        msg.setFrom(new InternetAddress(_from)); 

        InternetAddress[] addressTo = new InternetAddress[_to.length]; 
        for (int i = 0; i < _to.length; i++) { 
            addressTo[i] = new InternetAddress(_to[i]); 
        } 
        msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 

        msg.setSubject(_subject); 
        msg.setSentDate(new Date()); 

        // setup message body 
        BodyPart messageBodyPart = new MimeBodyPart(); 
        messageBodyPart.setText(_body); 
        _multipart.addBodyPart(messageBodyPart); 

        // Put parts in message 
        msg.setContent(_multipart); 

        // send email 
        Transport.send(msg); 

        return true; 
    } else { 
        return false; 
    } 
} 

@Override 
public PasswordAuthentication getPasswordAuthentication() { 
    return new PasswordAuthentication(_user, _pass); 
} 

private Properties _setProperties() { 
    Properties props = new Properties(); 

    props.put("mail.smtp.host", _host); 

    if(_debuggable) { 
        props.put("mail.debug", "true"); 
    } 

    if(_auth) { 
        props.put("mail.smtp.auth", "true"); 
    } 

    props.put("mail.smtp.port", _port); 
    props.put("mail.smtp.socketFactory.port", _sport); 
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory"); 
    props.put("mail.smtp.socketFactory.fallback", "false"); 

    return props; 
} 

// the getters and setters 
public String getBody() { 
    return _body; 
} 

public void setBody(String _body) { 
    this._body = _body; 
} 

public void setTo(String[] toArr) {
    this._to = toArr;
}

public void setFrom(String string) {
    this._from = string;
}

public void setSubject(String string) {
    this._subject = string;
}

// more of the getters and setters ….. 
} 
```

对于附加文件，添加以下代码：

```
public void addAttachment(String filename) throws Exception { 
    BodyPart messageBodyPart = new MimeBodyPart(); 
    DataSource source = new FileDataSource(filename); 
    messageBodyPart.setDataHandler(new DataHandler(source)); 
    messageBodyPart.setFileName(filename); 

    _multipart.addBodyPart(messageBodyPart); 
} 
```

# c++ - 提升特殊字符的正则表达式模式

> ID：15548248
> 
> 赞同：0
> 
> 时间：2013-03-21T12:57:49.737
> 
> 标签：c++, regex, boost

有谁知道如何为 c++ 中的特殊字符制作增强模式？

这意味着不仅`("[A-Za-z0-9 \\s]*")`

但是`_ + - \ ) \\ ( . | ]`等等，例如这样的字符串：

`"hello world \\has (special.characters) + defined_with[boost]"`已验证

但

`"!hello world \\has (special.characters) + defined_with[boost]"`无效

更具体地说，是这样的：

```
string input;

getline(cin,input);

boost::regex pattern1 ("[a-zA-Z0-9 \\s \\_ \\+ \\- \\\ \\) \\\\ \\( \\. \\| ]*");

if (!regex_match (input, pattern1))
    {
    cout << "invalid input" << endl;
    }
    else
        cout << input << " - is valid" << endl; 
```

* * *

我将不胜感激您可以提供的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:28:47.580

到目前为止，我没有使用 Boost:regex，但我对 Regex 有所了解。我假设您仅在至少存在一个“特殊字符”时才想匹配。此外，我假设您只希望字母数字字母有效，其余字母无效。像“Good String”和“\Bad.String)”。请尝试更具体地说明这一点。

首先，据我所知，仅匹配一个具有零个或多个“*”的类将始终返回 true。仅当您至少有一个类实例时，才尝试使用“+”来匹配。

其次，您可以尝试使用像 [^a-zA-Z0-9 ] 这样的类，如果有任何东西不在您的类中，则结果为真。

为了进一步阅读，我建议文档（是的，我知道，正则表达式语法非常糟糕）： http: [//www.boost.org/doc/libs/1_53_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax .html](http://www.boost.org/doc/libs/1_53_0/libs/regex/doc/html/boost_regex/syntax/perl_syntax.html) 或我最喜欢的正则表达式语法 [http://en.wikipedia.org/wiki/Regular_expression](http://en.wikipedia.org/wiki/Regular_expression)

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:05:33.500

我建议做一个不包括不会像那样通过的字符的集合，例如：

`[^\\!\\?]+`, 然后测试是否匹配

# json - 如何在发送回客户端之前修改 json 结果

> ID：15548254
> 
> 赞同：2
> 
> 时间：2013-03-21T12:58:05.020
> 
> 标签：json, asp.net-mvc-4

我的控制器返回一个像这样的 JsonResult：

```
return Json(model); 
```

如何在将 json 数据发送回客户端之前动态修改它。我想为我的模型添加验证属性，所以我最终得到了类似的东西：

```
{"Label": "Test", 
  "ValidationRules":[{"data-val-required":"This field is required.", "data-val-length-max":25, "data-val-length":"Max 25 chars." }]} 
```

**更新**

```
public class Product
{
  [Required]
   String Label {get; set;}
} 
```

当调用 Json(model) 并且 model 是 Product 的实例时，我想在返回之前修改 json 字符串，以便它包含验证属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T16:29:32.227

为什么不创建一个名为 ValidatableBase 的具有 ValidationRules 属性的基类：

```
public class Product : ValidatableBase
{
    public string Label { get; set; }
}

public abstract class ValidatableBase
{
    public ValidatableBase()
    {
        this.ValidationRules = new Dictionary<string, string>();
    }
    public Dictionary<string, string> ValidationRules { get; set; }
}

public ActionResult GetProduct()
{
    var product = new Product();
    product.Label = "foo";
    product.ValidationRules.Add("data-val-required", "this field is required");

    return Json(product);
} 
```

从这个类继承并序列化。

或者，如果您使用 DataAnnotations，为什么不使用 ASP.NET MVC 提供的默认 jQuery 验证和 HtmlHelper 方法？

# xcode - 可可忽略点击但仍然注册它们？

> ID：15548256
> 
> 赞同：0
> 
> 时间：2013-03-21T12:58:12.413
> 
> 标签：xcode, cocoa, onclick, mouseevent, event-propagation

是否有可能在 cocoa 中有一个点击窗口（如 中`_window.ignoreMouseEvents = TRUE`），但仍然找出鼠标在窗口上方点击的时间？或者，不是忽略事件，注册它们，然后以某种方式转发它们，将它们传播到窗口后面的任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:55:06.070

我猜你正在寻找的是 NSView 方法 hitTest。当收到鼠标点击时，在每个视图上调用此方法。

```
- (NSView*)hitTest:(NSPoint)aPoint
{
    return self;
} 
```

返回 self 意味着点击不会转发到下一个子视图。

返回 [super hitTest] 只会将点击转发到视图层次结构的父视图。使用它，您可以简单地注册点击，而不会发生任何其他事情。

所以像：

```
- (NSView*)hitTest:(NSPoint)aPoint
{
    [self propagateEventToNextApplication];
    return [super hitTest:aPoint];
} 
```

希望这可以帮助！

# jquery-ui - Jquery自动完成选择不起作用

> ID：15548258
> 
> 赞同：1
> 
> 时间：2013-03-21T12:58:16.270
> 
> 标签：jquery-ui, jquery

我想选择自动完成框项目列表。但它不工作。我已经编写了这段代码来获取该项目。每当我使用 `self._renderItemData = function (ul, item)`此功能自定义方式选择停止时，当我评论此功能时，我的代码工作正常。请帮助我知道我错在哪里。我使用 jquery ui 1.9 来编写代码。

```
$(document).ready(function () {
    var term = "";
    var type = "";
    var key = "";
    $("#searchTextBox").autocomplete({
        minLength: 2,
        autoFocus: true,
        source: function (request, response) {
            $.ajax({
                url: "../CustomHandlers/SearchHandler.ashx",
                dataType: "json",
                contentType: 'application/json; charset=utf-8',
                data: { term: request.term },
                success: function (data) {
                    if (!data || data.length == 0) {
                        response([{
                            label: "noMatched",                               
                            hcount:0,
                            type: "noResult",
                            key: "noResult"                             
                        }]);                            
                    }
                    else {
                        response($.map(data, function(item) {
                            return {
                                label: item.label,                                   
                                hcount:item.record,
                                type: item.type,
                                key: item.key
                            }
                        }))
                    }                    
                }                   
            });

            $.ui.autocomplete.prototype._renderMenu=function (ul, items) {
                var self = this;
                currentType = "";
                $.each(items, function (index, item) {
                    if (item.type != currentType) {
                        ul.append("<li class='ui-autocomplete-type'>" + item.type + "</li>");
                        currentType = item.type;
                    }

                    self._renderItemData(ul, item);

                });
                self._renderItemData = function (ul, item) {
                    var searchhtml = "<a class='autocomplitList'>" + item.label + "<span>" + "(" + item.hcount + ") " + "</span>" + "</a>";
                    return $("<li></li>")
                            .data("item.autocomplete", item)
                            .append(searchhtml)
                            .appendTo(ul);
                };
            }

        }

        , select: function (event, ui)
        {  
                term = ui.item.label;
                type = ui.item.type;
                key = ui.item.key;
               // ui.item.option.selected = true;

               //  $("#searchTextBox").val(ui.item.label);
                // return false;
                //var selectedObj = ui.item.key;
             //   alert("Selected: " + selectedObj);  
        }
        ,open: function (event, ui) {
                //event.addClass("nodis");
        }
        ,close: function () {
            // event.removeClass("nodis")
            this._trigger("close");
            }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:18:25.383

试试这个

```
$(document).ready(function() {
    var term = "";
    var type = "";
    var key = "";

    $.ui.autocomplete.prototype._renderMenu = function(ul, items) {
        var self = this;
        currentType = "";
        $.each(items, function(index, item) {
                    if (item.type != currentType) {
                        ul.append("<li class='ui-autocomplete-type'>"
                                + item.type + "</li>");
                        currentType = item.type;
                    }

                    self._renderItemData(ul, item);

                });
        self._renderItemData = function(ul, item) {
            var searchhtml = "<a class='autocomplitList'>" + item.label
                    + "<span>" + "(" + item.hcount + ") " + "</span>" + "</a>";
            return $("<li></li>").data("item.autocomplete", item)
                    .append(searchhtml).appendTo(ul);
        };
    }

    $("#searchTextBox").autocomplete({
                minLength : 2,
                autoFocus : true,
                source : function(request, response) {
                    response([{
                                label : "Value 1",
                                hcount : 0,
                                type : "t1",
                                key : "v1"
                            }, {
                                label : "Value 2",
                                hcount : 0,
                                type : "t1",
                                key : "v2"
                            }, {
                                label : "Value 3",
                                hcount : 0,
                                type : "t2",
                                key : "v3"
                            }, {
                                label : "Value 4",
                                hcount : 0,
                                type : "t3",
                                key : "v4"
                            }]);
                }

                ,
                select : function(event, ui) {
                    term = ui.item.label;
                    type = ui.item.type;
                    key = ui.item.key;
                    // ui.item.option.selected = true;

                    // $("#searchTextBox").val(ui.item.label);
                    // return false;
                    // var selectedObj = ui.item.key;
                    // alert("Selected: " + selectedObj);
                },
                open : function(event, ui) {
                    // event.addClass("nodis");
                },
                close : function() {
                    // event.removeClass("nodis")
                    this._trigger("close");
                }

            });

    $("#searchTextBox").data('autocomplete')._renderMenu = function(ul, items) {
        var that = this;
        var currentType = "";
        $.each(items, function(index, item) {
                    if (item.type != currentType) {
                        ul.append("<li class='ui-autocomplete-type'>"
                                + item.type + "</li>");
                        currentType = item.type;
                    }
                    $("<li></li>").addClass('newp').append($("<a></a>")
                            .text(item.label)).appendTo(ul).data(
                            "ui-autocomplete-item", item);;
                });
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/pFXQB/)

# matlab - 在 matlab M 文件中使用嵌套函数

> ID：15548261
> 
> 赞同：0
> 
> 时间：2013-03-21T12:58:25.493
> 
> 标签：matlab

我有一个问题，我对此非常感兴趣，假设我在 matlab 中有两个 M 文件，在第一个文件中，我描述了以下用于计算峰值和峰值指数的函数

```
function [peaks,peak_indices] = find_peaks(row_vector)
    A = [0 row_vector 0];
    j = 1;
    for i=1:length(A)-2
        temp=A(i:i+2);
        if(max(temp)==temp(2))
            peaks(j) = row_vector(i);
            peak_indices(j) = i;
            j = j+1;
        end
    end
end 
```

在第二个 M 文件中，我有用于描述给定数据样本的正弦模型的代码

```
function [ x ]=generate(N,m,A3)

f1 = 100;
f2 = 200;
T = 1./f1;
t = (0:(N*T/m):(N*T))';
wn = rand(length(t),1).*2 - 1;
x = 20.*sin(2.*pi.*f1.*t) + 30.*cos(2.*pi.*f2.*t) + A3.*wn;

end 
```

我的问题是如何将它组合在一起？一个解决方案是在文件夹中创建两个 M 文件，然后从一个 M 文件调用函数并对给定向量进行操作并获得结果，然后从另一个 M 文件调用第二个函数给定结果并最终得到我们想要的，但我想在一个大的 M 文件中构建它，在 c++ 中，在 java 中，我们可以创建类，但我不确定我们是否也可以在 matlab 中做同样的事情，请帮助我澄清一切并使用 find_peaks 函数生成函数

**更新：** 好的，现在我想展示我在代码中所做的简单更改

```
function [ x ] = generate(N,m,A3)
f1 = 100;
f2 = 200;
T = 1./f1;
t = (0:(N*T/m):(N*T))'; %'
wn = rand(length(t),1).*2 - 1;
x = 20.*sin(2.*pi.*f1.*t) + 30.*cos(2.*pi.*f2.*t) + A3.*wn;
[pks,locs] = findpeaks(x);
end 
```

我在 matlab 中使用 findpeaks 内置函数，但出现以下错误

```
generate(1000,50,50)
Undefined function 'generate' for input arguments of type 'double'. 
```

我也很感兴趣避免混叠的有效采样率是多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:05:30.057

您可以简单地将两者放在一个文件中。该文件必须与其中的第一个函数同名，您将无法从该文件外部访问随后定义的函数。请参阅有关函数的 MATLAB 文档[http://www.mathworks.co.uk/help/matlab/ref/function.html](http://www.mathworks.co.uk/help/matlab/ref/function.html)（尤其是示例部分）。

另请注意，MATLAB 有一个内置函数 findpeaks()。

（顺便说一句，您仍然以太低的频率进行采样，并且肯定会出现混叠 - 请参阅[http://en.wikipedia.org/wiki/Aliasing#Sampling_sinusoidal_functions](http://en.wikipedia.org/wiki/Aliasing#Sampling_sinusoidal_functions)）

编辑：根据您的要求，这里有一些关于采样定理的更多信息。这些基础知识的简单介绍是[http://www.dspguide.com/ch3/2.htm](http://www.dspguide.com/ch3/2.htm)，为了进一步阅读，您应该搜索香农/奈奎斯特采样定理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:18:35.213

在单个**MATLAB**脚本中尝试此操作

```
function test()
clc, clear all, close all
x = generate(1000,50,50);
[p,i] = find_peaks(x)
end

function x = generate(N,m,A3)
f1 = 100;
f2 = 200;
T = 1./f1;
t = (0:(N*T/m):(N*T))'; %'
wn = rand(length(t),1).*2 - 1;
x = 20.*sin(2.*pi.*f1.*t) + 30.*cos(2.*pi.*f2.*t) + A3.*wn;
end

function [peaks,peak_indices] = find_peaks(row_vector)
    A = [0;row_vector;0];
    j = 1;
    for i=1:length(A)-2
        temp=A(i:i+2);
        if(max(temp)==temp(2))
            peaks(j) = row_vector(i);
            peak_indices(j) = i;
            j = j+1;
        end
    end
end 
```

# java - 读取格式不一致的文本文件的建议方法

> ID：15548266
> 
> 赞同：3
> 
> 时间：2013-03-21T12:58:31.283
> 
> 标签：java

我正在尝试将数字文本文件作为双精度数组读取，并且经过各种方法（通常会导致输入格式异常），我得出的结论是，我尝试读取的文本文件与其分隔符不一致。

大多数文本格式是“0.000,0.000”的形式，所以我一直在使用扫描仪和 useDelimiter(",") 来读取每个值。

事实证明（这是一个大的数字文件），一些格式是“0.000 0.000”的形式（我假设在一行的末尾），这当然会产生输入格式异常。

这确实是一个悬而未决的问题，我是一个非常基础的 Java 程序员，所以我想看看是否有任何建议/方法来执行此操作。Scanner 是正确的课程吗？

感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:01:39.160

逐行读取文件作为文本。然后将行分成几部分：

`String[] parts = line.split("[ ,]");`

现在遍历零件并调用`Double.parseDouble()`每个零件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:06:32.727

Scanner 允许任何 Java正则[表达式模式](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)用作分隔符。通过执行以下操作，您应该能够使用任意数量的分隔符：

```
scanner.setDelimiter("[,\\s]");  // Will match commas and whitespace 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:10:36.590

我想对此发表评论，而不是将其作为单独的答案，但我的声誉太低了。抱歉，亚历克斯。

您提到*在不同的实例中使用两个不同的定界字符*，而不是将两者组合为单个定界符。您可以在正则表达式中将竖线用作逻辑 OR。

```
scanner.setDelimiter("[,|\\s]"); //Will match commas or whitespace as appropriate 
```

逐行：

```
String[] parts = line.split("[,|\\s]"); 
```

# servlets - Web 服务器上的错误=====>java.lang.NullPointerException

> ID：15548272
> 
> 赞同：0
> 
> 时间：2013-03-21T12:58:38.253
> 
> 标签：servlets, jboss

我用一些 html 页面创建了一个简单的 servlet 动态项目，......

由于单击表单上的提交按钮应该将控件转移到servlet，我不知道是什么问题，它显示“HTTP status 500”错误....它显示错误为：

浏览器出现异常：java.lang.NullPointerException controller.Trafcontrol.doGet(Trafcontrol.java:48) javax.servlet.http.HttpServlet.service(HttpServlet.java:690) javax.servlet.http.HttpServlet.service(HttpServlet .java:803) org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)

使用的应用服务器：JBOSS AS 4.2.2，Eclipse：Helios 3.6..

我需要将我的控制权传递给 servlet，以便我可以进一步处理我的项目。

我还包括“控制台”窗口内容：

```
 `Servlet.service() for servlet servname threw exception
  java.lang.NullPointerException
at controller.Trafcontrol.doGet(Trafcontrol.java:48)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
at   org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
at 
```

org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583) 在 org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446) 在 java.lang.Thread。运行（未知来源）`

请任何人帮助解决这个问题，thx.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:29:23.220

错误非常明显。你`Trafcontrol.java`在第 48 行有一个 NullPointerException。你必须检查你自己的代码，也许使用 Eclispe 调试功能来单步调试你的代码。

# linux - 从字符串中获取子字符串的最后一个索引之后的字符

> ID：15548277
> 
> 赞同：29
> 
> 时间：2013-03-21T12:58:53.943
> 
> 标签：linux, bash, unix

我有一个字符串，它是另一个命令的输出。我只需要显示这个字符串的结尾。分隔符字符串是“ `.`”（点和空格），我需要“ `.`”的最后一个索引之后的字符串。

我怎样才能在 Bash 中做到这一点？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-21T13:15:36.727

如果字符串在变量中：

```
$ foo="header. stuff. more stuff"
$ echo "${foo##*. }"
more stuff 
```

如果有多个“。”实例（如我的示例），并且您想要*第一次*出现之后的所有内容，而不是最后一次，只需使用一个`#`：

```
$ echo "${foo#*. }"
stuff. more stuff 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-21T13:04:10.620

试试这个：

```
your cmd...|sed 's/.*\. //' 
```

无论您的输入中有多少“点”或“点和空格”，这都有效。它采用**最后一个**“点和空格”之后的字符串

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-05-04T17:34:59.430

awk 是优雅的武器......对于更文明的时代：

```
[cpetro01@h ~]$ echo "this. is. my. string. of. some. arbitrary. length" | awk -F'. ' ' { print $NF } '
length
[cpetro01@h ~]$ echo "this. is. my. string. of. some" | awk -F'. ' ' { print $NF } '   
some 
```

在这种情况下，NF 是“字段数”的 awk 变量，并且此构造表示“在找到的最多字段中打印条目”，因此如果输入的大小从一行更改为下一行，您仍然会得到最后一个。

你也可以做数学：

```
[cpetro01@h~]$ echo "this. is. my. string. of. some. arbitrary. length" | awk -F'. ' ' { print $(NF-2) } '
some
[cpetro01@h~]$ echo "this. is. my. string. of. some. arbitrary. length" | awk -F'. ' ' { print $(NF-3) } '
of
[cpetro01@h~]$ 
```

（是的，这对于 OP 来说已经晚了 3 年，但是我的一位同事今天将我指向了这个页面，因为我们正在做一些事情，所以我想我会把它放在这里以防其他人也在寻找。）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-21T13:04:49.147

试试这个：

```
echo "This is a sentence. This is another sentence" | rev | cut -d "." -f1 | rev 
```

`rev`反转输出。指定分隔符，将`-d`所有内容分解为字段。`-f`指定要使用的字段。 我们可以选择f1，因为我们颠倒了数据。我们不需要知道总共有多少个字段。我们只需要知道第一个。最后，我们再次反转它，以正确的顺序放回它。

# plugins - 如何转换插件的配置文件以用于更新的 cakephp 版本

> ID：15548283
> 
> 赞同：0
> 
> 时间：2013-03-21T12:59:03.450
> 
> 标签：plugins, config, cakephp-2.1

在寻找一种使用 Google 日历提供 cakestrap 应用程序的方法时，我遇到了一篇较早的帖子，其中提到了这个插件： http: [//www.neilcrookes.com/2009/09/27/get-google-analytics-data-in -你的蛋糕PHP/](http://www.neilcrookes.com/2009/09/27/get-google-analytics-data-in-your-cakephp/)

在尝试添加对谷歌日历的支持时，结果发现这个插件与我必须使用的 cakeStrap 不兼容。我已经重构了模型、视图和控制器，但我不知道如何转换 gdata-config 以便可以使用它：

```
 <?php
    /**
     * Coniguration options for Gdata API
     */
    class GDATA_CONFIG {

      var $analytics = array(
        'datasource' => 'gdata',
        'driver' => 'analytics',
        'email' => '',
        'passwd' => '',
        'profileId' => '',
        'source' => 'CakePHP',
      );

      var $youtube = array(
        'datasource' => 'gdata',
        'driver' => 'youtube',
        'email' => '',
        'passwd' => '',
        'source' => 'CakePHP',
      );

        var $picasa = array(
            'datasource' => 'gdata',
            'driver' => 'picasa',
            'email' => '',
            'passwd' => '',
            'source' => 'CakePHP',
            'cache' => true,
            'cacheDuration' => '+1 hours'
        );

      var $calendar = array(
        'datasource' => 'gdata',
        'driver' => 'calendar',
        'email' => '',
        'passwd' => '',
        'source' => 'CakePHP',
      );

    }
    ?> 
```

这是我第一次使用 cakePHP，因此感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:14:34.393

自定义配置格式（使用 PHP 阅读器）如下：

```
<?php
$config = array('youtube' => 
    'datasource' => 'gdata',
    'driver' => 'youtube',
    'email' => '',
    'passwd' => '',
    'source' => 'CakePHP'
)); 
```

您可以使用`Configure::load('configuration_file_name.php')`加载配置文件和`Configuration::read('configuration_array_key')`读取配置变量。

有关详细信息，请参阅[http://book.cakephp.org/2.0/en/development/configuration.html#configure-class](http://book.cakephp.org/2.0/en/development/configuration.html#configure-class)。

# sql - 在 DB2 更新中重复子查询

> ID：15548289
> 
> 赞同：0
> 
> 时间：2013-03-21T12:59:14.467
> 
> 标签：sql, db2, subquery, updates

我目前正在创建一个更新语句，它将更新一个双时态表。它执行以下操作：

为每个 ID 更新每一行，并将 RELATION_ID 设置为最新行的 RELATION_ID。

在此查询中，有一个重复的子查询（因为我首先使用它来获取用于更新的值）并且（我不想更新已经具有此 RELATION_ID 的行）

有没有办法重用第一个查询的值或任何替代方法？（无需编程，需要纯 SQL）

```
UPDATE TBL_CLIENT UPD
SET RELATION_ID = (
                  SELECT RELATION_ID FROM TBL_CLIENT SUBQ
                  WHERE  UPD.ID = SUBQ.ID AND
                         UPDATE_TIMESTAMP =    (
                                            SELECT MAX(UPDATE_TIMESTAMP) FROM TBL_CLIENT SUBSQ
                                            WHERE  SUBSQ.ID = SUBQ.ID
                                           )
                 )               
WHERE ID IN  ( 
                    SELECT ID
                    FROM TBL_CLIENT QU
                    GROUP BY ID
                    HAVING COUNT(DISTINCT(RELATION_ID)) > 1
                   ) AND         
      RELATION_ID <> (
                        SELECT RELATION_ID FROM TBL_CLIENT SUBQ2
                        WHERE  UPD.ID = SUBQ2.ID AND
                               UPDATE_TIMESTAMP =    (
                                                  -- Update mit STID des neusten Eintrages
                                                  SELECT MAX(UPDATE_TIMESTAMP) FROM TBL_CLIENT SUBSQ2
                                                  WHERE  SUBSQ2.ID = SUBQ2.ID
                                                 )
                      ) 
```

例子：

ID / RELATION_ID / UPDATE_TIMESTAMP

*   1 / 10 / 1.1.2000
*   1 / 12 / 5.1.2002
*   1 / 15 / 28.3.2008

更新后：

*   1 / 15 / 1.1.2000
*   1 / 15 / 5.1.2002
*   1 / 15 / 28.3.2008

最后一行是最近的行，因此它的关系 id 被采用（并且行本身没有更新！，对于此处未包含的查询的其他部分很重要）

感谢您的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:45:37.433

这可能对你有用-（我不知道确切的语法。我在 sybase 上工作，所以这是根据 sybase）

```
UPDATE TBL_CLIENT AA
    SET RELATION_ID = BB.RELATION_ID
FROM
   TBL_CLIENT AA,
   TBL_CLIENT BB
WHERE
   AA.ID=BB.ID
   AND BB.UPDATE_TIMESTAMP=(SELECT MAX(UPDATE_TIMESTAMP) FROM TBL_CLIENT CC WHERE CC.ID=BB.ID) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:43:24.120

您可以更新视图：

```
UPDATE 
  ( SELECT t.id, t.update_timestamp, ...      --- all the PK columns
           t.relation_id, 
           m.relation_id AS new_relation_id
    FROM 
        TBL_CLIENT AS t
      JOIN
        ( SELECT id, relation_id,
                 ROW_NUMBER() OVER (PARTITION BY id
                                    ORDER BY update_timestamp DESC)
                   AS rn
          FROM TBL_CLIENT
        ) AS m
        ON  m.id = t.id
    WHERE m.rn = 1
      AND m.relation_id <> t.relation_id
  ) AS upd
SET 
    relation_id = new_relation_id ; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T16:13:45.917

可能您可以在更新之后/之前使用触发器。

# c# - 如何不允许用户每天注册一次以上？

> ID：15548290
> 
> 赞同：0
> 
> 时间：2013-03-21T12:59:22.207
> 
> 标签：c#, sql, tsql

我正在创建一个用户记录“滴答声”的小型服务。我遇到了一些问题，我的用户应该不能每天登录一次以上。这是我用于该检查的 SQL：

```
using (SqlCommand cmd = new SqlCommand())
                    {
                        cmd.Connection = conn;
                        cmd.CommandText = "SELECT * FROM TickLog WHERE Username = @username AND DATEPART(year, Inserted) = DATEPART(year, @date) AND DATEPART(month, Inserted) = DATEPART(month, @date) AND DATEPART(day, Inserted) = DATEPART(day, @date)";
                        cmd.Parameters.AddWithValue("@username", username);
                        cmd.Parameters.AddWithValue("@date", DateTime.Now);

                        int affectedRows = cmd.ExecuteNonQuery();

                        if (affectedRows > 0)
                            throw new Exception("allready registered");
                    } 
```

表的结构很简单：

*   标识，整数
*   用户名，字符串
*   已插入，日期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:07:12.357

`ExecuteNonQuery()`返回受 UPDATE、INSERT 或 DELETE 影响的行数。由于您只是在进行选择，因此它将始终返回 0 个受影响的行。尝试使用`ExecuteReader()`并检查返回结果是否有任何值。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx) [http://msdn.microsoft.com/en-us/library/9kcbe65k.aspx](http://msdn.microsoft.com/en-us/library/9kcbe65k.aspx)

或者，您可以将查询更改为`SELECT COUNT(*)...`并使用`ExecuteScalar()`，这将返回找到的行数（`Object`您可以将其转换为`int`）。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:36:16.873

这有效，并且性能略好：

```
using (var cmd = new SqlCommand())
{
    cmd.CommandText = @"CASE
        WHEN EXISTS (
            SELECT
                *
            FROM
                TickLog TL
            WHERE
                TL.Username = @username
                AND TL.Inserted BETWEEN @date AND DATEADD(DAY, 1, DATEADD(MILLISECOND, -3, @date))
            ) THEN 1
        ELSE 0
    END";

    cmd.Parameters.AddWithValue("@username", username);
    cmd.Parameters.AddWithValue("@date", DateTime.Date);

    var exists = cmd.ExecuteScalar();

    if (exists != 0)
    {
        throw new Exception("already registered");
    }
} 
```

解释：

*   `EXISTS`是最好的选择，您不需要从数据库中获取整个记录。
*   `TL.Inserted`应该是一个索引列，但是当你使用时`DATEPART`你不会使用任何索引。

有关使用 -3 毫秒的原因，请参阅[此](https://stackoverflow.com/a/167350/158074)StackOverflow 答案和[此](http://musingmarc.blogspot.com.br/2006/07/more-on-dates-and-sql.html)博客文章。

# java - 我是否需要删除以编程方式添加的片段

> ID：15548291
> 
> 赞同：3
> 
> 时间：2013-03-21T12:59:23.510
> 
> 标签：java, android, android-activity, android-fragments

我以编程方式添加了在活动的**onCreate()**调用上创建的片段，如下所示：

```
 mFragment = (MyFragment) pFm.findFragmentByTag(TAG);

    if (mFragment == null) {         
        mFragment = MyFragment.newInstance();
        pFm.beginTransaction().add(mFragment, MyFragment.class.getSimpleName()).commit();
    } 
```

片段的生命周期是不确定的。问题是，我是否必须在某个时候删除它？例如在**onDestroy()**，如果**isFinishing()**返回**true**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:02:56.383

不，你不必。以编程方式添加 Fragment 不会使该 Fragment 与通过使用`<fragment>`XML 中的标记添加的 Fragment 不同。调用Fragment 的[生命周期方法](http://developer.android.com/guide/components/fragments.html#Lifecycle)的方式与调用 Activity 的生命周期方法的方式大致相同。当应用程序退出时，他们将处理 Fragment。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:03:25.467

简单的回答：不，您不需要删除它。附加的片段在与活动分离或活动结束时被销毁。有关更多信息，请参见[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)。

# java - Selenium 问题/java 小程序

> ID：15548293
> 
> 赞同：1
> 
> 时间：2013-03-21T12:59:31.260
> 
> 标签：java, selenium, applet

我正在尝试自动化网站的测试并遇到了问题。发生的情况是，在搜索字段中输入了 url 地址，但网页每次都没有完全加载。这个问题似乎是一个没有完全加载的java应用程序。如果我稍微移动鼠标或按一个键，它将继续完全加载。这意味着我必须坐下来观看我的测试，如果他们卡住了，我会移动鼠标以便他们继续。

发生这种情况时如何避免移动鼠标？因为如果您必须观察它们，就没有理由拥有自动化测试用例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:15:14.683

你使用哪个 selenium IDE 或 RC ？

我想也许你可以通过使用 moveToElement 在脚本上模拟鼠标移动，或者输入 rand inpuText 来模拟按键。

# openxml - 在 OpenXml 中为表格或图形添加标题

> ID：15548298
> 
> 赞同：0
> 
> 时间：2013-03-21T12:59:40.757
> 
> 标签：openxml, caption

我正在尝试在 OpenXml 中创建这个结构：

```
<P>
 <Table />
 <Caption>Table 1 - Some Text 1 </Caption>
 <Picture />
 <Caption>Figure 1 - Some Text 2 </Caption>
</P> 
```

就代码而言，我有：

```
var currentLine = new Paragraph();
currentLine.AppendChild(new Run(elem));  -> Where the elem is Table
...
currentLine.AppendChild(new Run(elem2)); -> Where the elem2 is Drawing 
```

所以我只是想念添加标题的方式，我可以在 MS Word References-> Insert Caption 中做同样的标题。

一些如何实现这一点的信息将不胜感激。

瑞

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-23T21:34:09.917

这是我用来创建字幕的方法。基本上，创建一个 SimpleField 并将其附加到段落中。

```
public Paragraph CreateCaption( string caption, string name )
        {
            Run run = new Run( new Text() { Text= name + " ", Space = SpaceProcessingModeValues.Preserve } );
            SimpleField simpleField = new SimpleField( new Run( new RunProperties( new NoProof() ), new Text() { Text= " ", Space = SpaceProcessingModeValues.Preserve } ) );
            simpleField.Instruction = @"SEQ " + name;
            Run runLabel = new Run( new Text() { Text= " " + caption, Space = SpaceProcessingModeValues.Preserve } );

            ParagraphProperties captionPr = new ParagraphProperties( new ParagraphStyleId() { Val = "Caption" } );
            Paragraph paragraph = new Paragraph();
            paragraph.ParagraphProperties = captionPr;
            paragraph.Append( run );
            paragraph.Append( simpleField );
            paragraph.Append( runLabel );
            return paragraph;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:56:13.073

使用这个：[http ://www.microsoft.com/en-us/download/details.aspx?id=5124](http://www.microsoft.com/en-us/download/details.aspx?id=5124)

（生产力工具） - 检查word文档并查看它们的组成。

放这里是代码：

```
 SimpleField sf = new SimpleField(new Run(new Text("Figure 1"))); 
```

要实际链接任何内容，您需要设置`sf`'`instruction`属性。

# regex - grep 正则表达式匹配随机中间字符

> ID：15548303
> 
> 赞同：1
> 
> 时间：2013-03-21T13:00:02.103
> 
> 标签：regex, grep, fedora

我正在尝试查找是否在 Fedora 64 位下安装了某个 32 位软件包。问题是该软件包的 64 位是默认安装的。

例如，如果我`rpm -qa | grep libXrandr`在安装 32 位软件包后执行操作，我会得到两个输出：

`libXrandr-1.2.99.4-3.fc11.i586`

`libXrandr-1.2.99.4-3.fc11.x86_64`

我需要修改 grep，使其返回以 libXrandr 开头并以 .i586 结尾的字符串，以便仅`libXrandr-1.2.99.4-3.fc11.i586`作为搜索的输出返回。

我尝试使用正则表达式来解决这个问题，但由于某种原因，我似乎找不到有效的模式。

我使用的一些选项是`rpm -qa | grep libXrandr[0-9A-Za-z]\.i586`和`rpm -qa | grep libXrandr[0-9A-Za-z]*\.i586`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:05:02.073

想了很久才发现

`rpm -qa | grep ^libXrandr.*\.i586$`

这将搜索以 libXrandr 开头并以 .i586 结尾的字符串，中间有许多字符。

# c# - C# LINQ Distinct 和 ADO.NET EF

> ID：15548306
> 
> 赞同：0
> 
> 时间：2013-03-21T13:00:09.563
> 
> 标签：c#, linq, entity-framework

我正在使用 ADO.NET EF 和 Code First 方法。我在用 ：

```
IList<SoleColor> soleColors = SoleColorService.All().ToList(); 
```

获取我表中所有记录的`SoleColor`列表。剩下的就是区分这些结果，因为有这一列 -`SoleCode`对于表中使用相同的每组记录，我只需要一条记录`SoleCode`。我浏览了很多关于这个主题的文章，但这是我最后一次尝试找到我认为必须存在的解决方案。明显地

```
IList<SoleColor> soleColors = SoleColorService.All().Distinct.ToList(); 
```

由于各种原因不起作用，但仍然 -`soleColors`保存我需要的所有记录/数据。我只需要多一步来过滤这些记录/数据，以便我只为每个`SoleCode`. 我不知道它是否可以通过普通的 LINQ 或其他方式来实现。我认为（作为新手）这似乎是一项非常标准的工作，并且不需要像我在各个地方看到的解决方案那样实施或重写现有方法。

所以 - 有没有标准的方法来做到这一点。如果不是，至少在我看来，这并不罕见，所以我想在这种情况下有一种通用的方法可以处理。

附言

这是与此相关的我的实体的代码：

```
public class SoleColor : Entity
    {
        [Required]
        public long SoleID { get; set; }
        public virtual Sole Sole { get; set; }
        //Some code..
        [NotMapped]
        public string SoleCode
        {
            get
            {
                if (Sole == null)
                    return string.Empty;

                return Sole.Code;
            }
        }
        //Some code... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:04:04.473

您可以通过分组来实现：

```
SoleColorService.All()
                .GroupBy(x => x.SoleCode)
                .Select(g => g.First())
                .ToList(); 
```

OP编辑后更新：

因为`SoleCode`未映射，您将不得不使用以下代码：

```
SoleColorService.All()
                .GroupBy(x => x.Sole == null ? string.Empty : x.Sole.Code)
                .Select(g => g.First())
                .ToList(); 
```

这基本上重复了`SoleCode`查询中属性的代码。那不是很干净，因为它违反了[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。
不违反 DRY 的替代方案如下所示：

```
SoleColorService.All()
                .AsEnumerable()
                .GroupBy(x => x.SoleCode)
                .Select(g => g.First())
                .ToList(); 
```

但是，这样做的缺点是它会首先将数据库中的*所有*行提取到应用程序的内存中并在那里执行分组。

您必须决定选择哪种解决方案。正如我所展示的，两者都有缺点。

# asp.net - 多个搜索条件 asp.net vb

> ID：15548314
> 
> 赞同：0
> 
> 时间：2013-03-21T13:00:27.503
> 
> 标签：asp.net, sql, vb.net

我正在写信寻求有关在 asp.net webform 中实现多条件搜索功能的帮助。
我是 asp.net 的新手用户，并使用示例 C# 代码实现了以下 vb 代码，但我无法让它显示任何输出。

任何帮助将不胜感激。感谢您的时间。

**aspx**

```
 <div class = "hideSkiplink">
  <asp:Label ID="Label1" runat="server" Text="Name" ForeColor="White"></asp:Label>
  <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
  <asp:Label ID="Label2" runat="server" Text="Cusip/Isin" ForeColor="White">         </asp:Label>
   <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
  <asp:Button ID="Button1" runat="server" Text="Search" OnClick = "btnSearch_Click" />
  </div>
       <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
       ConnectionString="<%$ ConnectionStrings:bwic testConnectionString %>" 
       SelectCommand="SELECT [Deal_name], [Cusip], [Isin], [Original_size], [Price],_
       [Price_recieved], [Deal_type], [Price_type], [Date] FROM [Price]">   </asp:SqlDataSource>
     <div>
    <asp:GridView ID="GridView1" runat="server">
    </asp:GridView>

     </div> 
```

**aspx.vb**

```
 Imports System.Data
 Imports System.Web.Services
 Imports System.Configuration
 Imports System.Data.SqlClient

 Partial Class _Default
Inherits System.Web.UI.Page

Protected Sub btnSearch_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click

    SqlDataSource1.SelectCommand = "select * from Price where Deal_name like '%" + TextBox1.Text + "%' or Cusip and Isin like '%" + TextBox2.Text + "%'"
    SqlDataSource1.DataBind()

 End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:06:48.290

看起来你想分别做一个或`Cusip`两者`Isin`：

```
SqlDataSource1.SelectCommand = _
"SELECT * FROM Price " + _
"WHERE Deal_name like '%" + TextBox1.Text + _
      "%' AND (Cusip like '%" + TextBox2.Text + 
      "%' OR  Isin like '%" + TextBox2.Text + "%')" 
```

这将选择`Deal_name`匹配`TextBox1`和`Cusip`或`Isin`匹配的记录`TextBox2`。如果这不是您所追求的，请澄清。

编辑：

你`GridView`需要`DataSourceID`在它上面设置一个，否则它不知道它的数据来自哪里。看看下面的示例，[取自此处](http://www.vkinfotek.com/gridview/bind-gridview-sqldatasource-control.html)，不需要单击按钮即可进行绑定。

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
     ConnectionString="<%$Connectionstrings:ERPConnectionString%>"
     SelectCommand="SELECT * FROM AccountsTable">
</asp:SqlDataSource>  
<asp:GridView ID="GridView1"  DataSourceID="SqlDataSource1"  
     AutoGenerateColumns="true" runat="server">
</asp:GridView> 
```

# git - Fabric：当前主机名作为变量

> ID：15548315
> 
> 赞同：1
> 
> 时间：2013-03-21T13:00:35.323
> 
> 标签：git, fabric

我想在本地结构命令中使用远程主机的名称

```
$ fab -H my_servername,my_secondserver do_setup 
```

并且在`fabfile.py`

```
from fabric.api import local, lcd, run, sudo, put
def do_setup():
    # ... set up remote repository
    lcd('/local/dev_directory/')
    local('git remote add %{remote_name}s %{remote_user}s@%{remote_ip}s' % ???) 
```

有什么方法可以获取当前的连接详细信息（`my_servername`以及`my_secondserver`反过来）？我`my_servername`在/etc/hosts中定义了实际的ip地址，用户和本地用户一样。

# r - R (2.15.2) 的 twitteR 包中的 searchTwitter() - 大量重复推文

> ID：15548316
> 
> 赞同：0
> 
> 时间：2013-03-21T13:00:38.360
> 
> 标签：r, twitter

尝试通过从 Twitter REST API 中提取来创建与关键字相关联的 Twitter 用户名数据框。但是`searchTwitter()`在许多搜索词（例如`#rstats`）上使用的查询，即使对于像 之类的大样本，也会`n = 1000`返回高度（>90%）的重复推文。

一个具体的例子是：

```
tweets <- searchTwitter("#rstats", n = 1000)
tweets.df <- do.call("rbind", lapply(tweets, as.data.frame))

df.undup <- df[duplicated(tweets.df) == FALSE,]
dim(df.undup) 
```

我想知道如果搜索词相对稀缺，这是否是由分页限制引起的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:27:12.607

首先，您的代码中的第 3 行应该是`df.undup <- tweets.df[duplicated(tweets.df) == FALSE,]`？

我猜你得到少于 1000 条推文，当你运行上面的代码时（我得到了 604，结果 `dim(df.undup)`是`604 10`）。所以我猜，问题不在于重复出现，而是推文的数量少于 1000 条。

如果您查看创建日期，最早的推文来自 3 月 14 日（一周前）。Twitter API 通常不允许访问超过 7-9 天的推文。我想这就是为什么您收到的推文数量较少的原因。

要检查，看看是否`dim(tweets.df)`并`dim(undup.df)`返回相同的东西。

# pseudo-class - 使用 :before 创建包含链接的图标

> ID：15548318
> 
> 赞同：0
> 
> 时间：2013-03-21T13:00:43.787
> 
> 标签：pseudo-class

如何使用`content`with`:before`创建一个也可作为页面链接的图标？

例如，我目前有：

```
.basketBtn a:before 
  {
   content:url('/images/mobile/basketIcon.png');
   position:absolute;
   left:9px;
   top:9px;
  } 
```

现在需要使图像 basketIcon 可点击，但这不起作用：

```
.basketBtn a:before {
   content:<a href="/pages/basket/basket.aspx">url('/images/mobile/basketIcon.png')</a>;
   position:absolute;
   left:9px;
   top:9px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T12:04:44.787

按照[规范](http://www.w3.org/TR/CSS21/generate.html#propdef-content)的定义，内容只生成**文本内容**，不处理 HTML。这是有道理的，因为您不希望 CSS 生成 HTML，对吗？

> 生成的内容不会改变文档树。特别是，它不会被反馈给文档语言处理器（例如，用于重新解析）。

将 CSS 用于它的用途，**presentation**。

但是，在您的特定情况下，我没有看到太多问题，因为`::before`伪元素创建的元素是父元素的第一个子元素。这意味着，如果您将正确分配`href`给您的父锚点，那么您的`::before`元素也应该是完全可点击的，无论它是否绝对定位。

`[Working demo](http://jsbin.com/izafij/1)`

# android - Android SurfaceView onDraw 停止 Thread.join()

> ID：15548319
> 
> 赞同：2
> 
> 时间：2013-03-21T13:00:43.770
> 
> 标签：android, multithreading, join, surfaceview, ondraw

我正在尝试使用`SurfaceView`. 问题是，当我想用​​应用程序停止`thread`的方法销毁它时，但如果不在该方法中绘制画布（），一切正常。如何绘制画布并调用？`surfaceDestroyed()``thread.join()``canvas.drawColor(Color.GREEN);``onDraw()``thread.join()`

（我测试了许多来自互联网的示例游戏，它们都有相同的问题，例如，当你点击返回按钮时，你会得到一个，`FATAL EXCEPTION`因为`thread`它仍在运行）

这是尽可能简单的代码。谢谢

```
public class GameView extends SurfaceView implements SurfaceHolder.Callback {

    private SurfaceHolder holder;
    private GameLoopThread gameLoopThread;

    public GameView(Context context) {
        super(context);
        holder = getHolder();
        holder.addCallback(this);
    }

    @Override
    public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
    }

    @Override
    public void surfaceCreated(SurfaceHolder arg0) {
        if (gameLoopThread == null) {
            gameLoopThread = new GameLoopThread(this);
            gameLoopThread.setRunning(true);
            gameLoopThread.start();
            Log.e("thread", "iniciado");
        }
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder arg0) {
        gameLoopThread.setRunning(false);
        boolean retry = true;
        while (retry) {
            try {
                gameLoopThread.join();
                retry = false;
            } catch (InterruptedException e) {
            }
        }
        Log.e("thread", "finalizado");
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawColor(Color.GREEN);
    }

    public static class GameLoopThread extends Thread {
        private static final int FPS = 20;
        private GameView view;
        private boolean running;

        public GameLoopThread(GameViwe gameView) {
            this.view = gameView;
        }

        public void setRunning(boolean run) {
            running = run;
        }

        @Override
        public void run() {
            long ticksPS = 1000 / FPS;
            long startTime;
            long sleepTime;
            while (running) {
                Canvas c = null;
                startTime = System.currentTimeMillis();
                try {
                    c = view.getHolder().lockCanvas();
                    synchronized (view.getHolder()) {
                        view.onDraw(c);
                    }
                } finally {
                    if (c != null) {
                        view.getHolder().unlockCanvasAndPost(c);
                    }
                }
                sleepTime = ticksPS - (System.currentTimeMillis() - startTime);
                try {
                    if (sleepTime > 0)
                        sleep(sleepTime);
                    else
                        sleep(10);
                } catch (Exception e) {
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T14:38:20.207

所以我给这个问题的解决方案是改变它说的地方：

```
try {
    c = view.getHolder().lockCanvas();
    synchronized (view.getHolder()) {
        view.onDraw(c);
    }
    } finally {
        if (c != null) {
           view.getHolder().unlockCanvasAndPost(c);
        }
} 
```

在 GameLoopThread 类的 run() 方法上：

```
try {
    c = view.getHolder().lockCanvas();
    synchronized (view.getHolder()) {
        if(c != null)
            view.onDraw(c);
    }
    } finally {
        if (c != null) {
           view.getHolder().unlockCanvasAndPost(c);
        }
} 
```

为了完成这个活动并调用另一个活动，我添加了一个名为 GameOver 的方法，该方法运行良好：

```
private void GameOver() {
    gameLoopThread.setRunning(false);
    Context c = getContext();
    c.startActivity(intent); //intent must be declared
    ((Activity) Pruebas.this.getContext()).finish();
} 
```

我希望这可以帮助别人。

# css - 移动设备和桌面设备的不同 Wordpress 图库缩略图大小？

> ID：15548320
> 
> 赞同：0
> 
> 时间：2013-03-21T13:00:44.643
> 
> 标签：css, wordpress, mobile

有没有一种方法可以使用内置的 Wordpress Gallery 功能，并为移动设备和桌面提供不同大小的缩略图。目前我正在使用媒体查询来确定视口大小并提供不同的样式表，但我不知道如何确定要为移动设备和桌面显示什么缩略图大小？

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:21:41.833

根据原始图像大小，您可以将其缩放为可用视口的百分比宽度。您是否计划为您的移动用户提供完全不同的体验？您似乎已经在使用正确的技术

# android - 在 Jquery mobile 的一页中包含几页

> ID：15548326
> 
> 赞同：9
> 
> 时间：2013-03-21T13:00:59.900
> 
> 标签：android, jquery, jquery-mobile, webview, include

我正在使用 jquery mobile 开发一个应用程序。在最终提交表单之前，我需要在一个预览页面中包含几页。

这是关于我的应用程序的基本想法。它需要至少 10-15 个表格来收集用户的数据。我的 html 看起来像这样：

```
<html>
    <head>
        <title>Title</title>
    </head>
    <body>    
        <div data-role="page" id="login-page">

        </div>

        <div data-role="page" id="form1-page">
            <!-- CONTENT -->
        </div>

        <div data-role="page" id="form2-page">
            <!-- CONTENT -->
        </div>

        <div data-role="page" id="preview-page">
            <!-- CONTENT -->
        </div>
    </body>
</html> 
```

我已将我的预览按钮链接到预览页面。问题是，我想在预览页面中动态包含所有带有填充值的表单页面。

任何人都可以帮助我吗？

PS：我已经尝试谷歌了。我找到[了这个](https://stackoverflow.com/a/8161840)答案。但可能是我误解了一些东西，因为它在我的情况下不起作用。

注意：我在 android webview 中渲染这个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T12:11:37.783

最后，我实现了我想要的。这并不难。我不明白为什么有人不能给出任何提示！:(

我在这里发布我的答案，以便将来可以帮助某人解决类似问题。

首先，我在 .js 文件中添加了以下内容。

```
$("#preview-page").live('pageinit', function() {
    $('#divPage1Preview').html($('#page1-content').clone());
        $('#divPage2Preview').html($('#page2-content').clone());
}); 
```

这里, `divPage1Preview`,是在表单中`divPage2Preview`定义的空白 div 。`preview-page`和是和`page1-content`中`page2-content`内容 div 的 id 。`form1-page``form2-page`

由此，我可以获得所有字段，但不能获得其中的值。所以我改变了我的html有点像：

```
<div data-role="content" id ="page1-content" data-dom-cache="true">
<div data-role="content" id ="page2-content" data-dom-cache="true"> 
```

所以现在它按照我的要求工作。

希望这对将来的人有所帮助。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:14:50.870

也许将表格分成更小的部分是最好的。每个页面都有一个 ID 为 form-part-# 的表单。当每个表单提交时，它会验证当前表单，将表单数据作为隐藏元素添加到最后一个表单中，然后调用 $.mobile.changePage();

# php - 如何为 html 选择下拉菜单设置“php setcookie”

> ID：15548328
> 
> 赞同：1
> 
> 时间：2013-03-21T13:01:05.380
> 
> 标签：php, html, codeigniter, select, cookies

我有一个带有输入类型的 jquery ui 对话框，我在其中放置了一个邮政编码，以便人们可以使用他们的邮政编码进行搜索。

现在我想做一个半径从 5 到 25 公里的下拉菜单。

我怎样才能做到这一点？因为我是 setcookie 选项的新手。

我的下拉代码

```
<select>
    <option disabled selected>Afstand</option>
    <option>5km</option>
    <option>10km</option>
    <option>15km</option>
    <option>25km</option>
</select> 
```

这是我的 cookie 代码 + 对话框 div：

```
<div id="dialog" class="hidden" title="Welkom bij OostWestRegioBest.nl">

    Zoeken in uw regio.

    <br/><br/>

    <form method="post" action"">
        <input type="text" name="postcode" placeholder="postcode">
        <br/><br/>
            // 
            **// Here will be my select dropdown**
            //
        <input type="submit" value="Opslaan">
        <input type="hidden" name="submitted" value="true">
        <input type="hidden" name="afstand" value="true" />
    </form>

<?php

    if(isset($_POST['postcode']))
    {
        setcookie('postcode', $_POST['postcode'], time() + (20 * 365 * 24 * 60 * 60));
        header("location: {$_SERVER['PHP_SELF']}");
    };

?> 
```

在这里我的代码显示邮政编码的cookie：

```
<input type="text" name="postcode" value='<?php echo isset($_COOKIE['postcode']) ? $_COOKIE['postcode'] : '' ?>'> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:09:47.727

您可以尝试使用 Javascript 而不是 PHP 来设置 cookie，因此您无需重新加载任何页面。

编辑：

如果您以相同的形式提交两个值（邮政编码和半径），您可以添加

```
setcookie('radius', $_POST['radius'], time() + (20 * 365 * 24 * 60 * 60)); 
```

在你的第一个之后`setcookie()`。您的下拉菜单应命名为半径，因此：`<select name="radius">`

# matlab - 神经计算 - 在没有反向传播的情况下训练 MLP

> ID：15548329
> 
> 赞同：0
> 
> 时间：2013-03-21T13:01:05.913
> 
> 标签：matlab, neural-network

我是神经计算的新手，可以理解反向传播的概念。我的问题是，你能在没有反向传播的情况下训练 MLP 来拟合函数吗？说，我需要拟合一个正弦函数。在不使用反向传播分配权重的情况下如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:11:26.797

```
can you train an MLP without back-propagation to fit a function? 
```

是的。反向传播是一种寻找神经元权重的优化算法。您可以使用任意数量的不同算法来找到这些权重，从而训练您的神经网络。

例子包括

*   [遗传算法](http://ieeexplore.ieee.org/xpls/abs_all.jsp?arnumber=1176129)
*   [模拟退火](http://www.complex-systems.com/pdf/02-6-2.pdf)
*   [粒子群优化](http://www.eit.uni-kl.de/koenig/deutsch/Neucom_Project_Peters.pdf)
*   ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T21:44:22.153

有一个训练神经网络的最佳选择，它是粒子群优化，因为 pso 提供全局最佳值，并且与其他算法相比，它的空间复杂度最好。有很多研究论文，你可以搜索并与BP算法进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:15:39.393

我不相信它们是在没有反向传播（[维基百科](https://en.wikipedia.org/wiki/Multilayer_perceptron)）的情况下训练 MLP 的常用方法，它只是一种应用于权重的直接梯度方法。有一些修改使用例如动量项，或者在不同点进行训练。

但是，还有许多其他机器学习算法，它们使用不同的成本函数或架构，例如[粒子群优化](https://en.wikipedia.org/wiki/Particle_swarm_optimization)和[进化优化](https://en.wikipedia.org/wiki/Evolutionary_computation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T21:00:28.810

使用反向传播训练神经网络的想法特别有趣，因为它允许您更新中间权重，而无需这些权重的直接输出。所以这是一个有用的想法！大多数时候，人们将反向传播算法与梯度下降算法结合起来。但是，梯度下降算法有时很慢，但您可以用另一种“聪明”算法（例如 levenberg-marquardt 或扩展卡尔曼滤波器）替换梯度下降算法（仅使用误差导数的信息）......有其中很多。在这些情况下，您仍在使用反向传播算法和另一种优化算法。

有时，神经网络的收敛问题不是由于优化算法质量不好，而是由于初始化，“起始权重”。有大量文献可以帮助您如何“巧妙地”初始化神经网络的权重。

正如您所问的并且@Atilla_Ozgur 得到了适当的回答，您可以使用其他算法来处理这个问题。例如，您可以创建一组神经网络，并尝试使用一种遗传算法通过变异和复制等操作来选择最佳网络。

让我告诉你一些事情。sin 函数是一个特别有趣的例子，有时它需要一段时间才能收敛。然而，它可以通过组合反向传播+梯度下降来训练。我很久以前做过这个。您必须确保隐藏层中有足够的神经元（如果您在 [0,2pi] 区间内训练 NN，通常需要 5 个具有激活函数 tanh 的神经元）。

# sql - 在存储过程中使用事务时出现的问题

> ID：15548330
> 
> 赞同：2
> 
> 时间：2013-03-21T13:01:06.147
> 
> 标签：sql, sql-server, stored-procedures, transactions, sqltransaction

我遇到了一个与 SQL 相关的问题，现在让我很*生气*：p。这是我的设置：

我有 2 个存储过程：

父存储过程被调用`GenerateAnnualPenalty`。

`GenerateAnnualPenalty`其中有一个 SELECT CURSOR，它遍历一系列名为 的对象`Properties`，并且对于每个`Property`，它确定是否`Penalty`需要应用 a 。这存储在一个名为 的布尔变量中`@ApplyPenalty`，以及它的`0`or 或`1`。此外，在`GenerateAnnualPenalty`.

其次，对于每个`Property`迭代`GenerateAnnualPenalty`，它调用一个名为的子存储过程`GenerateAnnualPenaltyForProperty`。`@ApplyPenalty`作为输入传递给`GenerateAnnualPenaltyForProperty`。`GenerateAnnualPenaltyForProperty`确实使用 SQL 事务（提交/回滚）。

我在名为 的表中输入条目`DebugLog`，以标记代码中是否已到达特定点。

这是孩子的骨架`GenerateAnnualPenaltyForProperty`：

```
ALTER PROCEDURE [RTS].[GenerateAnnualPenaltyForProperty]
@PROPERTY_ID numeric(18,0),
@ApplyPenalty int
AS

insert into DebugLog (DebugMessage1, DebugMessage2, DebugMessage3, DebugMessage4)
values
('Checkpoint 1 for Property:', @PROPERTY_ID, 'Apply Penalty:', @ApplyPenalty)

DECLARE @TRANSACTION_NAME varchar(50)
SET @TRANSACTION_NAME = 'GenerateAnnualPenaltyForProperty'

BEGIN TRANSACTION @TRANSACTION_NAME

BEGIN TRY

    insert into DebugLog (DebugMessage1, DebugMessage2, DebugMessage3, DebugMessage4)
    values
    ('Checkpoint 2 for Property:', @PROPERTY_ID, 'Apply Penalty:', @ApplyPenalty)

    IF @ApplyPenalty = 1
    BEGIN
        -- All main logic here !!!
    END

    COMMIT TRANSACTION @TRANSACTION_NAME
    RETURN 0
END TRY
BEGIN CATCH
    ROLLBACK TRANSACTION @TRANSACTION_NAME
    RETURN -1
END CATCH 
```

## 问题（简介）：

假设以这个特定的顺序`GenerateAnnualPenalty`迭代 4 `Properties`（利用了这个问题）：

要迭代的第一个属性：`@PROPERTY_ID = 1`

要迭代的第二个属性：`@PROPERTY_ID = 2`

要迭代的第三个属性：`@PROPERTY_ID = 3`

要迭代的第四个属性：`@PROPERTY_ID = 4`

假设对于属性 1、3 和 4，`ApplyPenalty = 1`，而对于属性 2，`ApplyPenalty = 0`

## 问题（主要症结）：

当`GenerateAnnualPenaltyForProperty`调用属性 1 时，一切都很好：我在表中看到了检查点 1 和检查点 2 条目`DebugLog`。

当`GenerateAnnualPenaltyForProperty`调用属性 2 时，一切都恢复正常：我在表中同时看到检查点 1 和检查点 2 条目`DebugLog`。

当`GenerateAnnualPenaltyForProperty`调用属性 3 时，会出现不正确的情况：我只看到表中的检查点 1 条目`DebugLog`，而“检查点 2”条目也应该是可见的！

当`GenerateAnnualPenaltyForProperty`调用属性 4 时，它再次正确：我再次在表中看到检查点 1 和检查点 2 条目`DebugLog`。

因此，问题仅发生在 的 属性中`ApplyPenalty = 1`，前提是在之前的迭代中，`ApplyPenalty = 0`。在这种情况下，带有的属性`ApplyPenalty = 1`会被视为`ApplyPenalty = 0`

## 禁用 SQL 事务代码可以解决问题，但为什么？：

如果我禁用所有`GenerateAnnualPenaltyForProperty`与 SQL 事务相关的代码，一切正常！纠正了上述有问题的情况。这是一个框架`GenerateAnnualPenaltyForProperty`，其中已取出 SQL 事务代码，它适用于：

```
ALTER PROCEDURE [RTS].[GenerateAnnualPenaltyForProperty]
@PROPERTY_ID numeric(18,0),
@ApplyPenalty int
AS

insert into DebugLog (DebugMessage1, DebugMessage2, DebugMessage3, DebugMessage4)
values
('Checkpoint 1 for Property:', @PROPERTY_ID, 'Apply Penalty:', @ApplyPenalty)

BEGIN TRY
    insert into DebugLog (DebugMessage1, DebugMessage2, DebugMessage3, DebugMessage4)
    values
    ('Checkpoint 2 for Property:', @PROPERTY_ID, 'Apply Penalty:', @ApplyPenalty)

    IF @ApplyPenalty = 1
    BEGIN
        -- All main logic here !!!
    END

    RETURN 0
END TRY
BEGIN CATCH
    RETURN -1
END CATCH 
```

## 问题（？？？）：

为什么会出现这种行为？为什么当我使用 SQL Transaction commit/rollback into`GenerateAnnualPenaltyForProperty`时，存储过程不适用于有问题的情况？

## 实际代码：

如果有人希望查看子存储过程的完整代码，则可在此处获得：[https ://gist.github.com/anonymous/5214236](https://gist.github.com/anonymous/5214236)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:48:27.690

一个可能的解释是您有嵌套事务 - 例如，如果主逻辑调用一个存储过程，该过程也执行 BEGIN TRAN...COMMIT/ROLLBACK TRAN。如果内部事务执行 ROLLBACK，它将回滚到最外面的事务，因此在 Penalty 3 的情况下，代码似乎失败。当您删除最外面的事务时，它只会回滚内部事务，使其看起来已经工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:24:32.830

您可以尝试将代码更改为：

```
BEGIN TRY

    -- Your code

END TRY

BEGIN CATCH

    DECLARE @ErrorMessage NVARCHAR(MAX);
    DECLARE @ErrorSeverity INT;
    DECLARE @ErrorState INT;
    SELECT @ErrorMessage = ERROR_MESSAGE(), @ErrorSeverity = ERROR_SEVERITY(), @ErrorState = ERROR_STATE();
    RAISERROR(@ErrorMessage, @ErrorSeverity, @ErrorState)

END CATCH 
```

如果在事务期间确实发生了错误，并且完成了回滚，您将看到导致它的错误。

# objective-c - hidesBackButton 不起作用

> ID：15548331
> 
> 赞同：0
> 
> 时间：2013-03-21T13:01:07.550
> 
> 标签：objective-c, xcode4.5

```
[BGFacebookDelegateSingleton.singleton logoutFacebook];
BGLogin * login = [[BGLogin alloc]init];
UINavigationController * nav= self.navigationController;
[nav pushViewController:login animated:YES];
login.navigationItem.hidesBackButton=YES;//Button doesn't go out
PO(@(login.navigationItem.hidesBackButton)); //Confirm it's YES
while (false); 
```

我想知道这可能有什么问题。它适用于其他地方但不适用于之后

```
[BGFacebookDelegateSingleton.singleton logoutFacebook]; 
```

[BGFacebookDelegateSingleton.singleton logoutFacebook]的内容；

只是：[FBSession.activeSession closeAndClearTokenInformation]；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:13:55.603

尝试`[self.navigationItem setHidesBackButton:YES];`在登录名中写入`viewDidLoad()`

希望这可以帮助。

# unit-testing - RazorViewEngine 和单元测试

> ID：15548332
> 
> 赞同：2
> 
> 时间：2013-03-21T13:01:11.413
> 
> 标签：unit-testing, razor, asp.net-mvc-4

我正在为 ASP.NET MVC 4 编写一个自定义 RazorViewEngine 并且我很难对它进行单元测试，因为基类正在调用向上到 BuildManager 和 VirtualPathProvider 的东西，它们会抛出各种异常，所以在我进行的每一个新测试中，我都需要存根其他东西，因为底层机制正在调用我没有存根的对象并抛出“对象引用未设置为对象的实例”。

所以我所做的是编写一个与此类似的接口，它允许我包装对引擎基类的调用。

```
internal interface IViewEngineDelegate
{
    Func<ControllerContext, string, IView> CreatePartialView { get; set; }

    Func<ControllerContext, string, string, IView> CreateView { get; set; }

    Func<ControllerContext, string, bool> FileExists { get; set; }

    Func<ControllerContext, string, bool, ViewEngineResult> FindPartialView { get; set; }

    Func<ControllerContext, string, string, bool, ViewEngineResult> FindView { get; set; }
} 
```

现在，我可以在我的生产代码中执行以下操作。

```
public class CsEmbeddedRazorViewEngine : RazorViewEngine
{
    private readonly IViewEngineDelegate _viewEngineDelegate;

    public CsEmbeddedRazorViewEngine()
    {
        _viewEngineDelegate = new ViewEngineDelegate
        {
            CreatePartialView = base.CreatePartialView, 
            CreateView = base.CreateView, 
            FileExists = base.FileExists, 
            FindPartialView = base.FindPartialView, 
            FindView = base.FindView
        };
    }

    internal CsEmbeddedRazorViewEngine(IViewEngineDelegate viewEngineDelegate)
    {
        _viewEngineDelegate = viewEngineDelegate;
    }

    protected override IView CreatePartialView(ControllerContext controllerContext, string partialPath)
    {
        // TODO: Do something.

        return _viewEngineDelegate.CreatePartialView(controllerContext, partialPath)
    }
} 
```

最后，我可以通过 stubing 调用来测试它，就像这样。

```
ViewEngineDelegate engineDelegate = new ViewEngineDelegate
{
    CreatePartialView = (controllerContext, partialPath) => FakeViewFactory.Instance.Create(controllerContext, partialPath),
};

CsEmbeddedRazorViewEngine engine = new CsEmbeddedRazorViewEngine(engineDelegate); 
```

经过一番思考，我想到了这样做，因为我认为我过度设计了设计，所以我决定采用更直​​接的方法。

```
public class CsEmbeddedRazorViewEngine : RazorViewEngine
{
    protected sealed override IView CreatePartialView(ControllerContext controllerContext, string partialPath)
    {
        // TODO: Do something.

        return default(IView);
    }

    protected virtual IView CreatePartialViewCore(ControllerContext controllerContext, string partialPath)
    {
        return base.CreatePartialView(controllerContext, partialPath);
    }
} 
```

我对这些方法中的任何一种都不太满意，这就是我发布它的原因，我想知道是否有更好的方法来做到这一点或更好，也许只有我，这些都是可以接受/合理的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:05:24.333

我终于用下面的方法做到了。

这是我想测试的 ViewEngine 示例。

```
public class CsEmbeddedRazorViewEngine : RazorViewEngine
{
    protected override IView CreateView(ControllerContext controllerContext, string viewPath, string masterPath)
    {
        viewPath = GetViewPath(controllerContext, viewPath);

        masterPath = GetViewPath(controllerContext, masterPath);

        return base.CreateView(controllerContext, viewPath, masterPath);
    }

    private static string GetAssemblyName(ControllerContext controllerContext)
    {
        return Path.GetFileNameWithoutExtension(controllerContext.Controller.GetType().Assembly.Location);
    }

    private static string GetViewPath(ControllerContext controllerContext, string virtualPath)
    {
        string asmName = GetAssemblyName(controllerContext);

        return virtualPath.Replace("%Assembly%", asmName);
    }
} 
```

我在大多数测试中都使用工厂来创建对象（通常用于复杂对象），因此这是负责创建使用分流器的 ViewEngine 的工厂（有关更多信息，请参见“自分流器”测试模式） .

```
public sealed class CsEmbeddedRazorViewEngineFactory : SingleFactory<CsEmbeddedRazorViewEngineFactory>
{
    public CsEmbeddedRazorViewEngine Create(bool fileExists)
    {
        return new CsEmbeddedRazorViewEngineShunt(fileExists);
    }

    private class CsEmbeddedRazorViewEngineShunt : CsEmbeddedRazorViewEngine
    {
        private readonly bool _fileExists;

        private readonly IViewEngine _viewEngine;

        public CsEmbeddedRazorViewEngineShunt(bool fileExists)
        {
            _fileExists = fileExists;

            _viewEngine = FakeViewEngineFactory.Instance.Create();
        }

        public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string masterName, bool useCache)
        {
            IView view = CreateView(controllerContext, viewName, masterName);

            return new ViewEngineResult(view, _viewEngine);
        }

        public override ViewEngineResult FindPartialView(ControllerContext controllerContext, string partialViewName, bool useCache)
        {
            IView view = CreatePartialView(controllerContext, partialViewName);

            return new ViewEngineResult(view, _viewEngine);
        }

        protected override bool FileExists(ControllerContext controllerContext, string virtualPath)
        {
            return _fileExists;
        }
    }
} 
```

这是我为 ViewEngine 进行的实际测试。

```
internal class CsEmbeddedRazorViewEngineTests
{
    public class FindView
    {
        [Theory,
         InlineData("~/%Assembly%/Views/{1}/{0}.cshtml", "~/Lynx.Tests.Framework.Web.Mvc/Views/{1}/{0}.cshtml"),
         InlineData("~/%Assembly%/Areas/{2}/Views/{1}/{0}.cshtml", "~/Lynx.Tests.Framework.Web.Mvc/Areas/{2}/Views/{1}/{0}.cshtml")]
        public void Should_prefix_the_virtual_path_with_the_assembly_name_for_normal_views(string viewPath, string expectedViewPath)
        {
            // Arrange
            const bool FILE_EXISTS = true;

            CsEmbeddedRazorViewEngine engine = CsEmbeddedRazorViewEngineFactory.Instance.Create(FILE_EXISTS);

            ControllerBase controller = new ControllerStub();

            ControllerContext controllerContext = FakeControllerContextFactory.Instance.Create(controller);

            // Act
            ViewEngineResult result = engine.FindView(controllerContext, viewPath, string.Empty, false);

            RazorView razorView = (RazorView)result.View;

            string actualViewPath = razorView.ViewPath;

            // Assert
            actualViewPath.Should().Be(expectedViewPath);
        }

        [Theory,
         InlineData(@"Views\DummyView.cshtml", "~/%Assembly%/Views/Shared/{0}.cshtml", "~/Lynx.Tests.Framework.Web.Mvc/Views/Shared/{0}.cshtml"),
         InlineData(@"Views\DummyView.cshtml", "~/%Assembly%/Areas/{2}/Views/Shared/{0}.cshtml", "~/Lynx.Tests.Framework.Web.Mvc/Areas/{2}/Views/Shared/{0}.cshtml")]
        public void Should_prefix_the_virtual_path_with_the_assembly_name_for_layout(string viewPath, string layoutPath, string expectedLayoutPath)
        {
            // Arrange
            const bool FILE_EXISTS = true;

            CsEmbeddedRazorViewEngine engine = CsEmbeddedRazorViewEngineFactory.Instance.Create(FILE_EXISTS);

            ControllerBase controller = new ControllerStub();

            ControllerContext controllerContext = FakeControllerContextFactory.Instance.Create(controller);

            // Act
            ViewEngineResult result = engine.FindView(controllerContext, viewPath, layoutPath, false);

            RazorView razorView = (RazorView)result.View;

            string actualLayoutPath = razorView.LayoutPath;

            // Assert
            actualLayoutPath.Should().Be(expectedLayoutPath);
        }
    }

    private class ControllerStub : ControllerBase
    {
        protected override void ExecuteCore()
        {
        }
    }
} 
```

# forms - 表单验证 yml

> ID：15548334
> 
> 赞同：1
> 
> 时间：2013-03-21T13:01:16.877
> 
> 标签：forms, validation, symfony

我想知道是否可以在validation.yml 文件中定义条件...

```
vendor\MyBundle\Entity\Image:
  properties:
   color:
      - NotBlank: ~
   name:
      - NotBlank: ~ 
```

例如：如果字段 yyyy = true，则字段 xxx 为 NotBlank

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:03:16.303

您需要使用`Callback`验证：

[http://symfony.com/doc/2.1/reference/constraints/Callback.html](http://symfony.com/doc/2.1/reference/constraints/Callback.html)

然后，基本上，您定义验证规则......

# c++ - 如何在 Visual Studio 中知道项目是 C 还是 C++？

> ID：15548337
> 
> 赞同：5
> 
> 时间：2013-03-21T13:01:20.773
> 
> 标签：c++, c, visual-studio, compiler-construction

Visual Studio 如何知道项目是 C 还是 C++？是否有任何配置或构建参数表明这一点？

VS 对 C 使用 C 编译器，对 C++ 使用 C++ 编译器吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T13:04:11.467

> VS 对 C 使用 C 编译器，对 C++ 使用 C++ 编译器吗？

# 不

编译器足够聪明，`cl`可以知道（基于文件扩展名）文件是文件`.cpp`还是`.cc`文件 - 它认为是 C++ 文件。并且`cl`编译器会将`.c`文件视为 C 程序源文件，并进行相应的编译。虽然它确实加载了一个单独的`dll`文件进行编译`C`和`C++`归档。但这是实现定义的。

但是，有一个开关可以覆盖`cl`基于文件扩展名的行为。

要编译为 C++ 源文件（即使扩展名为`.c`），命令为： `cl /TP yourfile.c` **但是请注意，该文件应包含有效的 C++ 代码。**

并且要编译为 C 源文件（扩展名为`.cpp`），命令为： `cl /TC yourfile.cpp` **但是请注意，该文件应包含有效的 C 代码。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:07:19.340

除了扩展，如果你去`File Properties->Advanced`，还有一个`Compile As`选项，可以用来明确地将代码视为 C 代码。

它`/TP`为 C++ 和 C生成`/TC`。

然而，正如 Joachim 在评论中指出的那样，VC++ 并不是地球上最符合标准的编译器，因此选择“任何可行的”实际上可能是一个合理的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:48:29.833

没有 C 或 C++ 项目。任何项目都可以混合有 C、C++ 和其他语言文件。

目前尚不清楚您期望的第二个问题的答案是什么。C 语言使用 C 编译器编译，C++ 语言使用 C++ 编译器编译。很难想象还有什么其他情况是可能的。这两个编译器可能会或可能不会被实现为单个可执行程序，但这是一个相当无趣的微小细节。

# c# - 使用名称为“class”的项目

> ID：15548338
> 
> 赞同：1
> 
> 时间：2013-03-21T13:01:22.367
> 
> 标签：c#, asp.net-mvc, razor

我需要知道如何解决以下问题：

我有以下代码的剃刀视图：

```
@foreach (var item in Model.MyItems)
{
    <option value="@item.id">@item.class</option>
} 
```

问题，我收到消息：

> "class" 是保留字，不能在隐式表达式中使用。必须使用显式表达式 ("@()")。

如何避免这种情况？MyItem Class 有一个名为“class”的元素，我不允许更改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:05:21.463

将@字符放在保留字前面：

```
@foreach (var item in Model.MyItems)
{
     <option value="@item.id">@(item.@class)</option>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:05:36.450

如果它们像这样转义，则可以使用保留字：`@(class)`

[这里](https://stackoverflow.com/questions/4338627/razor-reseverd-words)有一篇文章列出了所有这些词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-16T01:53:45.520

我收到了同样的错误消息，但我的解决方案是删除一个关闭的剃刀评论标签`*@`，该标签在没有匹配的打开标签的情况下被留下。

这是在 ASP.NET MVC Razor 视图中。

# ruby-on-rails-3 - kaminari/will_paginate 都在应用程序中损坏

> ID：15548339
> 
> 赞同：0
> 
> 时间：2013-03-21T13:01:22.577
> 
> 标签：ruby-on-rails-3, pagination, will-paginate

当我只使用 kaminari 时，will_paginate 和 kaminari 出现以下错误。除了 kaminari 之外，Will paginate 刚刚安装，无论有没有它，错误都会持续存在。

> # < ActiveRecord::Relation:0x6e629c8 > 的未定义方法“分页”

我也在使用活动管理员，并将以下代码添加到初始化程序中的 kaminari.rb

```
Kaminari.configure do |config|
  config.page_method_name = :per_page_kaminari
end 
```

错误行：

```
@bookings = current_user.bookings.paginate(page: params[:page]) 
```

# gwt - 将小部件添加到尚不属于 DOM 结构的纯 html 中

> ID：15548341
> 
> 赞同：3
> 
> 时间：2013-03-21T13:01:24.337
> 
> 标签：gwt, extjs

好的，这真的很烦人，因为我确信 GWT 应该支持我想做的事情。我已经问了两次，我搜索了网络，但我找不到解决问题的方法。

我想要做的是从服务器加载一个文本文件，例如看起来像这样：

```
<!-- linear_regression.txt -->
<h1>Linear Regression</h1>
Welcome to this chapter. Here, have a graph:
<div id="whatever"></div>
Alright, now have some math stuff: 
```

并将一个`Widget`- 在我的例子中是一个折线图 - 放入 div `<div id="whatever">`。我尝试了几件事..

* * *

在`onSuccess()`RPC 的方法中，我想做这样的事情：

```
public void onSuccess(String result) {

    HTMLPanel tmp = new HTMLPanel(result);
    Element el = tmp.getElementById("whatever");

    el.appendChild(new LineChart().asWidget().getElement());

    contentRoot.add(tmp);
} 
```

如果我这样做，我的结果如下所示：

```
<div id="whatever">
    <!-- Here I want the chart to be placed but all I get is this: -->
    <div></div> 
</div> 
```

* * *

另一种方法如下所示：

```
 HTMLPanel tmp = new HTMLPanel(result);
    contentHome.add(tmp);

    Element el = RootPanel.get("whatever").getElement();
    el.appendChild(new LineChart().asWidget().getElement()); 
```

但在这里我得到一个未捕获的异常：

```
java.lang.AssertionError: A widget that has an existing parent widget 
may not be added to the detach list
    at com.google.gwt.user.client.ui.RootPanel.detachOnWindowClose(RootPanel.java:136)
    at com.google.gwt.user.client.ui.RootPanel.get(RootPanel.java:211)
    at ew.client.layout.MainLayout$1.onSuccess(MainLayout.java:95)
    at ew.client.layout.MainLayout$1.onSuccess(MainLayout.java:1)
    ... 
```

* * *

我真的厌倦了这个问题。有谁知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T13:26:30.897

包裹`div`在一个[`HTLMPanel`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/HTMLPanel.html)

```
LineChart lineChart = new LineChart();
HTMLPanel panel = new HTMLPanel(result);
panel.add(lineChart, "whatever"); 
```

# api - 是否可以使用 Foursquare API 在场所获取最近的签到？

> ID：15548343
> 
> 赞同：-3
> 
> 时间：2013-03-21T13:01:31.370
> 
> 标签：api, foursquare

checkins/recent 端点只返回授权用户的朋友。我想知道是否有任何方法可以在特定地点为所有用户获取最近的签到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:58:50.963

出于隐私考虑，这通常是不允许的。但是，如果您正在为场地管理员构建应用程序，您可以订阅[场地推送 API](https://developer.foursquare.com/overview/realtime)，您的用户将看到他们管理的场地的签到。

# iphone - 如何使某些视图不旋转？

> ID：15548349
> 
> 赞同：0
> 
> 时间：2013-03-21T13:02:01.540
> 
> 标签：iphone, ios, objective-c, uiviewcontroller

我有一些视图控制器。

我需要旋转它的所有子视图，除了一个。

可能吗？我应该使用 apply`CGAffineTransformMakeRotate`来保持它不可旋转吗？

或者我可以实现这样一个视图控制器，以这样一种方式在另一个上添加一个视图控制器，这样父级不会对旋转做出反应，而孩子会做出反应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:07:19.220

看我对这个问题的回答：

[仅旋转视图而不旋转其子视图](https://stackoverflow.com/questions/15546510/rotate-only-view-and-not-its-subviews/15546561#15546561)

这几乎是同一个问题。我的任何一种方法在理论上都行得通。

# html - 具有定义的 css 类的导航菜单，当我将 ID 属性添加到 li 标签时会中断

> ID：15548354
> 
> 赞同：1
> 
> 时间：2013-03-21T13:02:20.007
> 
> 标签：html, css

我有一个导航菜单，在我的网站上显示一个无序的 <ul> 列表。我试图向它添加一些额外的参数，以便我可以通过 js 控制它的输出，因为我希望有时显示一些东西而不是其他时间隐藏它们。

问题是，只要我没有在 <li> 标签上应用任何 id 属性，输出就会非常好，一旦我这样做，它就会使布局拉伸并似乎自动为其添加填充。

```
<div id="navigation">
<ul id="jsddm" class="dbtree">
    <li class="is-current" id="SHOP">
        <a href="...">SHOP</a>
        <ul>
            <li id="JEWELLERY">
                <a href="...">JEWELLERY</a>
                <ul>
                    <li id="NECKLACES"><a href="...">NECKLACES</a></li>
                </ul>
                <ul>
                    <li id="RINGS"><a href="...">RINGS</a></li>
                </ul>
                <ul>
                    <li id="EARRINGS"><a href="...">EARRINGS</a></li>
                </ul>
                <ul>
                    <li id="FRIENDSHIP BRACELETS"><a href="...">FRIENDSHIP BRACELETS</a></li>
                </ul>
                <ul>
                    <li id="CHARM BRACELETS"><a href="...">CHARM BRACELETS</a></li>
                </ul>
            </li>
        </ul>
        <ul>
            <li id="BESPOKE"><a href="...">BESPOKE</a>
                <ul>
                    <li id="MAKE YOUR BESPOKE "><a href="...">MAKE YOUR BESPOKE</a></li>
                </ul>
                <ul>
                    <li id="CHAINS"><a href="...">CHAINS</a></li>
                </ul>
                <ul>
                    <li id="LETTERS"><a href="...">LETTERS</a></li>
                </ul>
                <ul>
                    <li id="CRYSTALS"><a href="...">CRYSTALS</a></li>
                </ul>
                <ul>
                    <li id="GEMSTONES"><a href="...">GEMSTONES</a></li>
                </ul>
                <ul>
                    <li id="CHARMS"><a href="...">CHARMS</a></li>
                </ul>
                <ul>
                    <li id="COLOURED CORD"><a href="...">COLOURED CORD</a></li>
                </ul>
            </li>
        </ul>
        <ul>
            <li id="KA FINES (coming soon)"><a href="...">KA FINES (coming soon)</a></li>
        </ul>
        <ul>
            <li id="GIFT VOUCHER"><a href="...">GIFT VOUCHER</a></li>
        </ul>
        <ul>
            <li id="MY DETAILS"><a href="...">MY DETAILS</a></li>
        </ul>
        <ul>
            <li id="MY HISTORY"><a href="...">MY HISTORY</a></li>
        </ul>
        <ul>
            <li id="LOGOUT"><a href="...">LOGOUT</a></li>
        </ul>
    </li>
</ul>
<ul>
    <li id="BESPOKE">
        <a href="...">BESPOKE</a>
        <ul>
            <li id="ABOUT"><a href="...">ABOUT</a></li>
        </ul>
        <ul>
            <li id="LOOKBOOK "><a href="...">LOOKBOOK</a></li>
        </ul>
        <ul>
            <li id="MAKE YOUR BESPOKE"><a href="...">MAKE YOUR BESPOKE</a></li>
        </ul>
    </li>
</ul>
<ul>
    <li id="LOOKBOOK "><a href="...">LOOKBOOK</a>
        <ul>
            <li id="BESPOKE LOOKBOOK"><a href="...">BESPOKE LOOKBOOK</a></li>
        </ul>
        <ul>
            <li id="SOMETHING LIKE PARADISE"><a href="...">SOMETHING LIKE PARADISE</a></li>
        </ul>
    </li>
</ul>
<ul>
    <li id="OUR STORY"><a href="...">OUR STORY</a></li>
</ul>
<ul>
    <li id="PRESS"><a href="...">PRESS</a></li>
</ul>
<ul>
    <li id="BLOG"><a href="...">BLOG</a></li>
</ul>
</div> 
```

一旦我添加`id="SHOP"`到第一个 <li> ( `<div id="navigation"><ul id="jsddm" class="dbtree"><li class="is-current" id="SHOP">`)，它就会通过添加额外的填充来破坏它，就像它忽略了样式表中的原始规则一样。

CSS：-

```
<style>
   #navigation
   {
    width:160px;
    float:left;
    font-weight:normal;
    font-family:'BulmerMTStd-Regular';
    line-height:18px;
    padding-bottom:10px;
    font-size:12px; 
    }
    #navigation ul{margin-left:0px; padding-left:0px;}
    #navigation li{text-align:left; margin:0px; padding:0px;}
    #navigation ul li{color:#000000; list-style:none; margin-left:0px; padding-left:0px; margin-top:0px;}
    #navigation li ul{margin-left:0px; padding-left:0px; display:none;}
    #navigation li a{color:#000000;font-family:'BulmerMTStd-Regular'; text-decoration:none; line-     height:18px; padding-bottom:10px;}
    #navigation li a:hover{color:#8a8888;}
    #navigation li ul li ul{padding-left:10px; color:#8a8888;}
    #navigation li ul li ul a{color:#8a8888;}
    #navigation li ul li ul a:hover{color:#000000;}
    #navigation{z-index:0}
    </style> 
```

我确定这可能是一个非常简单的问题......但我似乎无法解决它..任何帮助都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:42:31.750

在 html 代码的第二部分中，您添加了 id="SHOP"。然后 li 标签首先选择 id="SHOP"。当且仅当 id="SHOP" 中存在不同的属性时，li 标签才会使用 id="jsddm" 中的任何属性。如果这两个属性相同ids 然后将应用来自 id="SHOP" 的那个。

通常，尽量不要在行内元素中混合大量的类和 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T00:58:14.997

正如@Dchris 所说，两者之间的唯一变化是添加`id="SHOP"`，正如@smclark 所说，如果您在某处为#SHOP 定义了一些样式，它只会影响事情。

当我们这样做时，您的列表不必要地嵌套得很深。您可以通过更改使 HTML 更清晰、更易读（在您的示例中更短）

```
<li>
    asfasf
    <ul>
        lkhlkhlkh
    </ul>
</li> 
```

到

```
<li>asfasf</li>
<ul>
    lkhlkhlkh
</ul> 
```

结果是

```
 <div id="navigation">   
    <ul id="jsddm" class="dbtree">
        <li class="is-current" id="SHOP"><a href="...">SHOP</a></li>
        <ul>
            <li id="JEWELLERY"><a href="...">JEWELLERY</a></li>
            <ul>
                <li id="NECKLACES"><a href="...">NECKLACES</a></li>
                <li id="RINGS"><a href="...">RINGS</a></li>
                <li id="EARRINGS"><a href="...">EARRINGS</a></li>
                <li id="FRIENDSHIP BRACELETS"><a href="...">FRIENDSHIP BRACELETS</a></li>
                <li id="CHARM BRACELETS"><a href="...">CHARM BRACELETS</a></li>
            </ul>
            <li id="BESPOKE"><a href="...">BESPOKE</a></li>
            <ul>
                <li id="MAKE YOUR BESPOKE "><a href="...">MAKE YOUR BESPOKE</a></li>
                <li id="CHAINS"><a href="...">CHAINS</a></li>
                <li id="LETTERS"><a href="...">LETTERS</a></li>
                <li id="CRYSTALS"><a href="...">CRYSTALS</a></li>
                <li id="GEMSTONES"><a href="...">GEMSTONES</a></li>
                <li id="CHARMS"><a href="...">CHARMS</a></li>
                <li id="COLOURED CORD"><a href="...">COLOURED CORD</a></li>
            </ul>
            <li id="KA FINES (coming soon)"><a href="...">KA FINES (coming soon)</a></li>
            <li id="GIFT VOUCHER"><a href="...">GIFT VOUCHER</a></li>
            <li id="MY DETAILS"><a href="...">MY DETAILS</a></li>
            <li id="MY HISTORY"><a href="...">MY HISTORY</a></li>
            <li id="LOGOUT"><a href="...">LOGOUT</a></li>
        </ul>
        <li id="BESPOKE"><a href="...">BESPOKE</a></li>
        <ul>
            <li id="ABOUT"><a href="...">ABOUT</a></li>
            <li id="LOOKBOOK "><a href="...">LOOKBOOK</a></li>
            <li id="MAKE YOUR BESPOKE"><a href="...">MAKE YOUR BESPOKE</a></li>
        </ul>
        <li id="LOOKBOOK "><a href="...">LOOKBOOK</a></li>
        <ul>
            <li id="BESPOKE LOOKBOOK"><a href="...">BESPOKE LOOKBOOK</a></li>
            <li id="SOMETHING LIKE PARADISE"><a href="...">SOMETHING LIKE PARADISE</a></li>
        </ul>
        <li id="OUR STORY"><a href="...">OUR STORY</a></li>
        <li id="PRESS"><a href="...">PRESS</a></li>
        <li id="BLOG"><a href="...">BLOG</a></li>
    </ul>
</div> 
```

当然，您需要调整 CSS，但这也会清理干净 - 不再需要`ul li li ul ul`-type 定义。同样，当我们使用它时，可以清理和修剪 CSS。一些提示：`#navigation li`样式将针对#navigation 中的*所有*<li>，例如，它们应用于`#navigation ul li`. 像这样的东西应该给你相同的结果（可能有一个错字和/或意外删除的定义或两个）。缩进只是为了帮助您可视化级联（CSS 通常不会像这样呈现，但它并没有什么区别）。请注意，这是针对 <li> 结构中的深度嵌套的 <ul> 的。

```
<style type="text/css">
#navigation {
    width:160px;
    float:left;
    font-weight:normal;
    font-family:'BulmerMTStd-Regular';
    line-height:18px;
    padding-bottom:10px;
    font-size:12px;
    z-index: 0;}

    #navigation ul{margin-left:0px; padding-left:0px;}

        #navigation ul li{color:#000000; list-style:none;}

    #navigation li{text-align:left; margin:0px; padding:0px;}

        #navigation li ul{display:none;}
        #navigation li a{color:#000000; text-decoration:none;}
        #navigation li a:hover{color:#8a8888;}

            #navigation li ul li ul{padding-left:10px; color:#8a8888;}

                #navigation li ul li ul a{color:#8a8888;}
                #navigation li ul li ul a:hover{color:#000000;}
</style> 
```

# zend-framework - pagodabox 上的 Zend 应用程序显示错误？

> ID：15548359
> 
> 赞同：-1
> 
> 时间：2013-03-21T13:02:32.397
> 
> 标签：zend-framework, frameworks

我以前使用 Zend 框架，我的应用程序运行良好。当我将它移到宝塔盒时，它给了我这个奇怪的错误

[应用链接](http://stores.rocxial.com/public/Index)

如果有人遇到过这个问题……zend 在 Pagoda 盒子上可以正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:18:51.293

不要忘记将名为**Boxfile**的文件添加到项目文件夹（但不是*/public*文件夹）。

*运行 ZendFramework Hello World*应用程序所需的**Boxfile**的最小内容是：

 *```
web1:
    document_root: public 
```

`web1`实例名称在哪里。

`.htaccess`此外，您的应用程序*/public*文件夹中应该有一个通用 ZF ：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```*

# php - PHP 命名空间语法：带大括号和不带大括号的区别是什么？

> ID：15548360
> 
> 赞同：14
> 
> 时间：2013-03-21T13:02:37.773
> 
> 标签：php, namespaces

PHP 提供了两种声明命名空间的语法。您可以使用不带大括号或带大括号的命名空间，如下所示。

**没有大括号**

```
namespace foo/bar;
class Any{} 
```

**带大括号**

```
namespace foo/bar {
   class Any{}
} 
```

这两种使用命名空间的方式的功能或行为是否存在差异，或者它们的工作/功能是否相同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T13:05:49.133

每种情况都有不同的原因，[PHP 网站上有一个很好的例子](http://www.php.net/manual/en/language.namespaces.definitionmultiple.php)。

您在命名空间周围使用大括号的原因是，如果一个文件中有多个命名空间，或者您需要在同一个文件中包含全局非命名空间代码作为命名空间中包含的代码。

此外，如果一个文件中有多个命名空间，则也允许使用非括号语法。

根据 php 指南，不建议这样做，如果可以，请将其保留在每个文件的一个命名空间中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T13:06:05.033

~~在第一个变体中，每个文件只能使用一个命名空间，而第二个变体允许多个命名空间。~~它们可以互换使用，并且可以在单个文件中多次出现以定义多个命名空间。在这种情况下，使用花括号的唯一原因是：

```
namespace {
    // code is in global scope
} 
```

除了上面的例子，在单个文件中拥有多个命名空间的潜在缺点是自动加载器使用目录和文件名来解析要加载的类；因此，不建议每个文件有多个命名空间，*除非*您将多个脚本文件合并为一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-11T13:16:38.303

如何设置没有括号的全局命名空间？

```
<?php
declare(encoding='UTF-8');
namespace MyProject {

const CONNECT_OK = 1;
class Connection { /* ... */ }
function connect() { /* ... */  }
}

namespace { // global code
session_start();
$a = MyProject\connect();
echo MyProject\Connection::start();
}
?> 
```

只是尝试以非括号样式编写此代码

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-21T13:06:41.950

我认为第一个只包括“任何”类。但第二个包括大括号之间的所有类。

# c# - 跨应用域访问 Console.Out

> ID：15548364
> 
> 赞同：3
> 
> 时间：2013-03-21T13:02:46.953
> 
> 标签：c#, appdomain

我需要读取在同一进程中但在不同 appDomain 中运行的应用程序（Core.exe）的标准输出。当处理进程时重定向输出很容易，但 appDomains 概念对我来说是新的。

所以..我像这样在孤立的appDomain中启动应用程序

```
new HostedApp("core", "Core.exe").Run();

class HostedApp
{
    internal string DomainName;
    internal string AssemblyName;
    internal AppDomain Ad;
    internal Thread AppThrd;

    public HostedApp(string a_domain, string a_assemblyName)
    {
        DomainName = a_domain;
        AssemblyName = a_assemblyName;
        Ad = AppDomain.CreateDomain(a_domain);
    }

    public void Run()
    {
        AppThrd = new Thread(RunApp);
        AppThrd.Start();
    }

    private void RunApp()
    {
        try
        {
            Ad.ExecuteAssembly(AssemblyName);
        }
        catch(Exception _ex)
        {
            MessageBox.Show("Unhandled exception\n" + _ex);
        }
    }
} 
```

我已经尝试将 Console.Out 重定向到当前进程，假设如果应用程序共享相同的进程，则会有单个标准输出。

但它只显示默认的 appDomain 标准输出。

所以，总而言之，我需要访问另一个 appDomain 应用程序标准输出。或者可能有一种方法可以从“核心”appDomain 调用位于默认 appDomain 中的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T16:22:12.120

也许这可以帮助你。我使用这些类能够监听远程 AppDomains Trace.(Write/WriteLine) 调用。

第一个类是允许我将 TraceListen Write/WriteLine 方法重定向到自定义委托的类。

```
 public delegate void TraceWriterHandler(string message);

    internal class SynchronizedTraceListener : TraceListener
    {
        private TraceWriterHandler messageHandler;

        public SynchronizedTraceListener(TraceWriterHandler writeHandler)
        {
            messageHandler = writeHandler;
        }

        public override void Write(string message)
        {
            messageHandler(message);
        }

        public override void WriteLine(string message)
        {
            messageHandler(message + System.Environment.NewLine);
        }
    } 
```

然后是我的远程 AppDomain 跟踪侦听器类的核心。这是棘手的部分。我会尽量不混淆解释。这对我来说很棘手，但它就在这里。

1.  （本地）CrossDomainTracer 对象在远端 AppDomain 上创建（远端）CrossDomainTracer 对象。
2.  （本地）CrossDomainTracer 对象调用（远）CrossDomainTracer 对象 .StartListening 并将其自身作为参考发送（本地）。
3.  （远）CrossDomainTracer 对象开始侦听（远）他的域中的任何 Trace.Write/WriteLine 调用。
4.  当进行（远）Trace.Write/WriteLine 调用时，它会从（本地）远程 AppDomain 调用 .RemoteWrite 方法。
5.  （本地） .RemoteWrite 调用它自己的 AppDomain 范围 Trace.Write 以便（本地）侦听器可以正确显示消息。

**笔记：**

*   AssemblyResolve 确保在尝试引用包含此代码的程序集时出错。
*   此代码必须存在于两个进程中并共享相同的命名空间。我在库中使用它并将程序集引用添加到两个应用程序。
*   还要注意 Serializable 属性和 MarshalByRefObject 继承。这是框架要求在 AppDomain 之间正确编组对象的要求。

```
 [Serializable]
    public sealed class CrossDomainTracer : MarshalByRefObject
    {
        private CrossDomainTracer remoteTracer;
        private SynchronizedTraceListener remoteListener;

        public CrossDomainTracer()
        {
        }

        public CrossDomainTracer(AppDomain farDomain)
        {
            AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(CurrentDomain_AssemblyResolve);
            this.remoteTracer = farDomain.CreateInstanceFrom(Assembly.GetExecutingAssembly().Location, typeof(CrossDomainTracer).FullName).Unwrap() as CrossDomainTracer;
            AppDomain.CurrentDomain.AssemblyResolve -= new ResolveEventHandler(CurrentDomain_AssemblyResolve);
            if (remoteTracer != null)
            {
                remoteTracer.StartListening(this);
            }
        }

        public void StartListening(CrossDomainTracer farTracer)
        {
            this.remoteTracer = farTracer;
            this.remoteListener = new SynchronizedTraceListener(new TraceWriterHandler(Write));
            Trace.Listeners.Add(this.remoteListener);
        }

        public void Write(string message)
        {
            this.remoteTracer.RemoteWrite("AppDomain(" + AppDomain.CurrentDomain.Id.ToString() +") " + message);
        }

        public void RemoteWrite(string message)
        {
            Trace.Write(message);
        }

        Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
        {
            try
            {
                Assembly assembly = System.Reflection.Assembly.Load(args.Name);
                if (assembly != null)
                {
                    return assembly;
                }
            }
            catch { }

            // Try to load by assembly fullname (path to file)
            string[] Parts = args.Name.Split(',');
            string File = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) + "\\" + Parts[0].Trim() + ".dll";

            return System.Reflection.Assembly.LoadFrom(File);
        }
    } 
```

最后，您可以将所有这些整齐地打包在一个静态类中。

```
 public static class CrossDomainTrace
    {
        public static void StartListening(AppDomain remoteDomain)
        {
            new CrossDomainTracer(remoteDomain);
        }
    } 
```

通过在将注册远 Trace 按摩的应用程序中执行此操作。

```
 CrossDomainTrace.StartListening(theFarAppDomain); 
```

剩下的唯一事情就是将 TraceListner 添加到这一侧的 Trace.Listeners 集合中，以对消息执行任何您想要的操作。

希望能帮助到你。

# java - 在单节点集群上使用分布式缓存和 FileReader

> ID：15548365
> 
> 赞同：0
> 
> 时间：2013-03-21T13:02:49.233
> 
> 标签：java, hadoop, mapreduce

是需要多节点集群还是单节点集群就足以使用分布式缓存。FileReader 是否可以通过给出文件路径直接打开存储在 HDFS 中的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T20:32:09.257

这实际上不是必须的。使用分布式缓存的主要目的是使资源可用于在整个集群的所有节点上运行的所有映射器或减速器，这在单台机器上没有多大意义。在单节点 hadoop 集群上，您可以在 mapreduce 代码中有一个全局变量，这样就可以了。

# ios - 如何在 iPhone 中检查有效的 URL 架构？

> ID：15548369
> 
> 赞同：0
> 
> 时间：2013-03-21T13:03:08.673
> 
> 标签：ios, iphone, mobile

我有一个项目，我必须从另一个应用程序中打开一个应用程序。我可以通过 URL 架构打开另一个应用程序，但现在我必须添加一个功能，如果手机中没有安装另一个应用程序，那么它应该将用户重定向到该应用程序的 AppStore 链接。

```
NSString *appLink = @"otherApp://";

[[UIApplication sharedApplication] openURL:[NSURL URLWithString:appLink]]; 
```

上面的代码打开了另一个应用程序，但是我如何检查该应用程序是否已安装在手机中，以便如果未安装，我可以将用户重定向到另一个应用程序的 AppStore 链接。

虽然我知道如何从应用程序内打开应用程序商店，但问题是如何检查应用程序是否已安装。在应用商店打开应用的网址是：itms://itunes.apple.com/in/app/otherApp/id134567414?mt=8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:06:14.323

是的，这实际上很容易。利用：

```
NSString *appLink = @"otherApp://";

if ([[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:appLink]]) {
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:appLink]];
} else {
    [[UIApplication sharedApplication] openURL:[NSURL @"itms://itunes.apple.com/in/app/otherApp/id134567414?mt=8"]];
} 
```

# java - 如何在特定时间自动启动 AlarmActvity

> ID：15548379
> 
> 赞同：1
> 
> 时间：2013-03-21T13:03:38.120
> 
> 标签：java, android

我的数据库包含 7 天的餐桌时间，例如：星期五：上午 8 点、上午 10 点、下午 12 点、下午 14 点。星期一：早上 7 点，早上 9 点......

等等 。

现在我想让我的活动警报在那些特定时间自动从睡眠中上升。

我想为同一活动自动创建每日警报。但是在这一天的最后一个闹钟之后应该删除所有的闹钟。

我的代码：

```
 Calendar cur_cal = new GregorianCalendar();
  cur_cal.setTimeInMillis(System.currentTimeMillis());

  Calendar cal = new GregorianCalendar();
   cal.add(Calendar.DAY_OF_YEAR, cur_cal.get(Calendar.DAY_OF_YEAR));
   cal.set(Calendar.HOUR_OF_DAY, 14);
   cal.set(Calendar.MINUTE, 54);
   cal.set(Calendar.SECOND, cur_cal.get(Calendar.SECOND));
   cal.set(Calendar.MILLISECOND, cur_cal.get(Calendar.MILLISECOND));
   cal.set(Calendar.DATE, cur_cal.get(Calendar.DATE));
    cal.set(Calendar.MONTH, cur_cal.get(Calendar.MONTH));

    //Create a new PendingIntent and add it to the AlarmManager
     Intent intent = new Intent(this, AlarmReceiverActivity.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(this,
     12345, intent, PendingIntent.FLAG_CANCEL_CURRENT);
     AlarmManager am =
     (AlarmManager)getSystemService(Activity.ALARM_SERVICE);
     am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
      pendingIntent);
         } 
```

# c# - 如何从数组中获取文件上传属性

> ID：15548382
> 
> 赞同：0
> 
> 时间：2013-03-21T13:03:47.623
> 
> 标签：c#, asp.net

我将上传的文件保存在数组中，并显示在网格视图中。现在我在从数组中获取文件名、文件大小、文件类型、文件数据（二进制）等值时遇到问题。在定义数组并将上传的文件添加到之后，我尝试使用下面的代码，但它没有显示文件变量的属性。例如，我喜欢`prjd.Data = file.FileBytes;` 使用以下代码获取上传文件 ( ) 的二进制数据，但它不起作用。

```
public static ArrayList Files = new ArrayList();
foreach (var file in Files)
{

    ProjDocAttach prjd = new ProjDocAttach();
    prjd.ProjDocID = _Projectid;

    prjd.Data = file.FileBytes;

    _DataContext.ProjDocAttaches.InsertOnSubmit(prjd);
    _DataContext.SubmitChanges();
} 
```

添加到文件数组的另一部分代码：

```
dt = new DataTable();

DataColumn dc1 = new DataColumn("File Name", typeof(string));

DataColumn dc2 = new DataColumn("File Size", typeof(string));

DataColumn dc3 = new DataColumn("Content Type", typeof(string));

dt.Columns.Add(dc1);

dt.Columns.Add(dc2);
dt.Columns.Add(dc3);

dr = dt.NewRow();

dr["File Name"] = FileName;

if (size > 0)
    dr["File Size"] = size.ToString() + " KB";
else
{ dr["File Size"] = fileObj.Length.ToString() + " Bytes"; }

dr["Content Type"] = contenttype;
//  dr["Bytes"] = bytes;
// var x = bytes;
//  var y = dr["Bytes"];
dt.Rows.Add(dr);
GridViewEfile.DataSource = dt;
GridViewEfile.DataBind();
Files.Add(FileUpload1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:26:52.810

`ArrayList`是一个对象数组，因此如果不`file`将循环转换为 a `System.IO.File`，您将无法访问这些属性。您没有提及您使用的是哪个版本的 .NET，但假设它是最近的东西，那么我建议使用泛型，替换`ArrayList`为`List<System.IO.File>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:48:09.960

通过查看您的代码，我可以推断您正在将整个文件上传控件添加到数组中。不要那样做！

您可以修复您的代码，方法是仅将您真正需要检索的属性添加到数组中（至少您向我们展示您正在检索的内容），即文件字节。

通过执行以下操作，我可以使其工作：

首先，我将集合类型更改为 a `List<byte[]>`，这个集合是强类型的，在这种情况下使用更好：

```
 public static List<byte[]> files = new List<byte[]>(); 
```

发布文件后，将 FileBytes 属性添加到列表中：

```
// FileUpload1 is the File Upload control declared at the aspx  
files.Add(FileUpload1.FileBytes); 
```

要检索文件内容，请执行以下操作：

```
foreach (byte[] bytes in files)
{
    ProjDocAttach prjd = new ProjDocAttach();
    prjd.ProjDocID = _Projectid;
    prjd.Data = bytes;
    // Save to database
} 
```

最后，我必须警告您使用公共静态属性来处理上传的文件。当您这样做时，您将在应用程序级别创建一个变量，因此所有用户都可以修改该列表，因为它是共享的。我不知道您要完成什么，但这似乎是非常错误的。

# java - 从PhoneGap Plugin获取返回值

> ID：15548383
> 
> 赞同：6
> 
> 时间：2013-03-21T13:03:54.467
> 
> 标签：java, android, cordova, phonegap-plugins

我构建了一个非常简单的`PhoneGap`插件来开始测试我将在 Android 上构建一些本机操作的方式。

JavaScript：

```
 function callNativePlugin() {
            cordova.exec(nativePluginResultHandler, nativePluginErrorHandler, "Database", "saveAdvertencia", [ 1, "TesteAdv" ]);
        }

    function nativePluginResultHandler(result) {
        alert("SUCCESS: \r\n" + result);
    }

    function nativePluginErrorHandler(error) {
        alert("ERROR: \r\n" + error);
    } 
```

爪哇：

```
@Override
public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {
    if (action.equals("saveAdvertencia")) {
        advertenciaDS = new AdvertenciaDS(cordova.getActivity());
        callbackContext.sendPluginResult(new PluginResult(Status.OK, new JSONArray("test")));
        return true;
    }
    return false;
} 
```

我需要的是一种以相同方法从操作中检索结果的方法。当您无法真正控制何时调用它们时，始终处理 3 种方法（1 执行操作。1 定义成功操作。1 定义错误操作）是非常复杂的，因为`PhoneGap`动作完成后调用它们。

如果我需要从 Android Native 数据库中检索一些数据：

1.  在 JavaScript 中调用“cordova.exec”。
2.  PhoneGap 会调用你的插件。
3.  您的插件将返回 2 件事：PhoneGap 的布尔值，定义它一切是否按预期工作。将传递给成功方法的数据。
4.  这对我来说是棘手的部分。如果成功与否，您必须创建 2 个您无法控制何时调用它们的方法，因为 PhoneGap 将决定这一点。我该如何改变？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T21:00:02.767

我使用这种模式对插件提供的函数只有一个回调：

```
function callNativePlugin(callback) {
   cordova.exec(function(result) {
       callback(null, result);
   }, function(result) {
       callback("myerror");
   }, "Database", "saveAdvertencia", [ 1, "TesteAdv" ])
}; 
```

通过这种方式，您可以获得 node.js 样式的回调，其中第一个参数是错误，第二个是结果：

```
//define the callback function
var callbackFunction = function(err, result) {
    if (err) {
        console.log("there was an error");
    } else {
        console.log("success", result);
    }
};

//call the plugin
callNativePlugin(callbackFunction); 
```

您无法避免在您的插件中有两个回调，因为这是由 cordova API 强制要求的，但您不必将其公开给您的插件用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-13T03:57:51.160

如果您正在寻求一种将`cordova.exec()`异步调用转换为返回值的同步调用的方法，那么简短的回答是您不能。（长答案是你可以使用循环或超时来伪造它，但你不应该这样做。）

正如 Vlad 解释的那样，您可以创建自己的界面，因此您只有一个函数可以调用，但我使用类似这个更简单的版本（在[http://htmlpresenter.com/api.html](http://htmlpresenter.com/api.html)中）：

```
var Database = {
  saveAdvertencia: function(args, callback) {
    cordova.exec(callback,
      function(error) { console.log("Error calling Database.saveAdvertencia: " + error); },
      "Database", "saveAdvertencia", args)
  }
} 
```

如果您需要结果，然后像这样调用它，提供内联回调：

```
Database.Advertencia([1, "TesteAdv"], function(result) { alert(result); }); 
```

当然，如果（似乎是这样）你根本不需要结果，你可以使用这个版本：

```
function saveAdvertencia() {
  log = function(message) { console.log(message) };
  cordova.exec(log, log, "Database", "saveAdvertencia", arguments);
}

saveAdvertencia(1, "TesteAdv"); 
```

（编辑：）此外，这个挑战可能与这个更好的问题有关：

*   [同步调用异步 Javascript 函数](https://stackoverflow.com/questions/9121902/call-an-asynchronous-javascript-function-synchronously)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-02T20:19:03.303

在 JavaScript 中，我只用一种易于控制的递归方法就能够检索到 PhoneGap 插件的值：

```
function callNativePlugin(result, error, service, action, json) {
    if (result != null) {
        //alert("SUCCESS: \r\n" + result);
        return result;
    } else if (error != null) {
        //alert("ERROR: \r\n" + error);
        return error;
    }
    return cordova.exec(function(result) {callNativePlugin(result, null, null, null);}, function(error) {callNativePlugin(null, error, null, null);}, service, action, json);
} 
```

# javascript - 检查文件是否存在并返回 mime 类型

> ID：15548384
> 
> 赞同：0
> 
> 时间：2013-03-21T13:04:00.153
> 
> 标签：javascript, jquery, ajax, html, html5-audio

首先请记住以下几点：我无法访问 PHP 或任何服务器端编程语言，相信我，我真的希望我这样做，因为使用 php 会很容易。现在谈这个问题。

好的，所以我的用户可以输入自己的 mp3 文件路径，例如他们可以输入

```
- Music/F07/CTDV.mp3
- Music/F12/VTGH.mp3
- Songs/rock your world.mp3 
```

此信息存储在单独的变量中，例如`song1` `song3` `song2` 我要检查并确保这些文件存在并且它们是 mp3 文件。

我在读到我可以使用 ajax 来完成这个，但我不知道如何。

请记住，这是一个问题，我理解这是不可能的，我接受这一点，如果你投反对票，请告诉我为什么，这样我就明白了。谢谢你。

**所以问题是：**我可以使用 ajax/javascript 不仅检查文件是否存在，而且检查它是否是 mp3？（文件位于服务器而不是本地）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:11:44.553

SO上有一个类似的问题可能会有所帮助。

[如何检查文件是否存在于 jQuery 或 JavaScript 中？](https://stackoverflow.com/questions/3646914/how-do-i-check-if-file-exists-in-jquery-or-javascript)

我没有对此进行测试，我不确定它是否真的能找到该文件，但值得一试。

# python - 从 python 脚本中获取 shell 脚本“读取”值

> ID：15548393
> 
> 赞同：1
> 
> 时间：2013-03-21T13:04:15.687
> 
> 标签：python, bash, shell

外壳脚本：Hello.sh

```
#!/bin/bash
echo "Enter your name: "
read name
echo "Hello $name" 
```

我想从 python 中调用 Hello.sh 并以非交互方式填充变量“name”。怎么做到呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:22:35.193

不知道如何阅读您的问题。

编辑：OP添加了评论： *从python中调用Hello.sh并以非交互方式“填充”名称*

这改变了事情，所以这里是新问题的不同答案：

```
import subprocess
cmd = '/home/user1/Hello.sh'
proc = subprocess.Popen(cmd, stdin=subprocess.PIPE)
proc.communicate("Fred Bloggs") 
```

我使用了脚本的完整路径，这样更安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:07:15.853

```
name = raw_input('Enter your name: ')
print 'Hello ', name 
```

# ajax - 跨域ajax jsonp请求在IE8中不起作用

> ID：15548403
> 
> 赞同：0
> 
> 时间：2013-03-21T13:04:23.937
> 
> 标签：ajax, jquery, cross-domain, xdomainrequest

使用 jquery-1.9.1 ，我启用了 CORS 支持。

```
$.support.cors = true; 
```

然后我发出如下所示的 ajax 请求，我还从服务器端启用了 jsonp 回调支持。

```
$.ajax({
            type: 'GET',
            url: url,
            async: false,
            contentType: "application/json",
            jsonpCallback: 'jsonCallback',
            dataType: 'json',
            success: function(data) {
               var featureJSON = data.feature;

            },
            error: function(e) {

            },
            complete: function () {

            }
        }); 
```

我已经在 jboss 中部署了它并从另一台计算机（不同的域/IP 地址）访问了该页面。此 ajax 调用适用于另一台计算机和同一台计算机的 FF 和 Chrome。

**它也适用于 IE，但在同一台计算机上。**

**当从我部署的计算机以外的其他计算机访问时，将无法在 IE 中工作。**

谷歌搜索后，**我了解到 IE* 不允许由 jquery 进行的跨域 ajax 调用。而且 jquery 不支持 IE 的 XDomain 对象。**

总而言之，如何让 jquery 使用 IE 的 XDomain 对象？，我几乎完成了应用程序（我的错，我没有检查 XDomain 的事情）。我无法再次重建代码。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:24:08.763

您不能“启用” CORS ...$.support 应该是当前浏览器支持的唯一表格。将 false 值更改为 true 不会神奇地将不支持的功能添加到旧浏览器！

```
if ($.support.cors) {
// your code
} else {
    $.ajax({
        type: 'GET',
        url: url,
        dataType: 'jsonp',
        data: {
          callback : '?'
        },
        success: function(data) {
           var featureJSON = data.feature;

        },
        error: function(e) {

        },
        complete: function () {

        }
   });
} 
```

# c# - jQuery 将数据发布到 WCF Web 服务

> ID：15548409
> 
> 赞同：0
> 
> 时间：2013-03-21T13:04:37.303
> 
> 标签：c#, jquery, wcf, web-services, post

我开发了一个 WCF Webservice，由 jQuery 调用。WCF Web 服务和启用 WCF Web 服务的 AJAX 客户端运行在不同的 Web 服务器上。

这是Web服务的定义。

```
[ServiceContract]
 interface IPersonService
 {
   [OperationContract]
   Person InsertPerson(Person person);
 }

[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class PersonService : IPersonService
{
  ...

  [WebInvoke(UriTemplate = "/POST/PersonPost", Method = "POST", BodyStyle =           WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json)]
  public Person InsertPerson(Person person)
  {
      Debug.WriteLine("POST:[PersonId = {0} PersonName = {1}]", person.Id, person.Name);
             return new Person(person.Id, person.Name);
  }

}
[DataContract]
public class Person
{
    [DataMember]
    private string id;
    [DataMember]
    private string name;

    public Person(string id, string name)
    {
        this.id = id;
        this.name = name;
    }

    public string Id { get; set; }
    public string Name { get; set; }

    public override string ToString()
    {
        var json = JsonConvert.SerializeObject(this);
        return json.ToString();
    }
} 
```

这是客户端：

```
$.ajax({
  type: "POST",
  data: { "id": "Mehrere ;;; trennen", "name": "GetPerson" },
  contentType: "application/json; charset=utf-8",
  dataType: "jsonp",
  processData: false,
  crossDomain: true,
  url: "http://localhost:59291/Person/POST/PersonPost",
  success: function (data) {
    alert("Post erfolgreich: ");
  },
  error: function (xhr, ajaxOptions, thrownError) {
    alert("Fehler Post: Status " + xhr.status + " AntwortText " + xhr.responseText);
  }
}); 
```

我得到 HTTP 代码 200。这还不错吧？但是有人可以告诉我，我怎样才能访问 jQuery 客户端发送到 WCF 服务的数据？？？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:41:16.963

1.  你的 JSON 数据对我来说有点奇怪。我不是 JSON 专家。但如果我要写它，我会有类似的东西：

    ```
    var body = '{"person":{';
    body = body + '"id":"' + '"abc123"' + '",'
    body = body + '"name":"' + '"john"' + '"'
    body = body + '}}'; 
    ```

然后将“data:”值设置为等于“body”变量

```
 dataType: "json",
            data: body, 
```

注意，这样我可以添加一个调试行

```
alert(body); 
```

在代码中（在我创建它之后）查看数据（在我通过请求发送它之前）。

…………

第二。

在这里查看我的旧对话：

[WCF REST 服务中的 CORS 支持](https://stackoverflow.com/questions/7234599/cors-support-within-wcf-rest-services/7770206#7770206)

为什么？

因为我遇到了一些问题，当你遇到

```
"http://localhost:59291/" 
```

触发了那段记忆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:11:11.907

如果您使用 jsonp 数据类型，则必须在返回数据时处理 json 回调...

```
jsonCallback(Your json response goes here); 
```

前任：

```
 jsonCallback(
    {
        "sites":
        [
            {
                "siteName": "JQUERY4U",
                "domainName": "http://www.jquery4u.com",
                "description": "#1 jQuery Blog for your Daily News, Plugins, Tuts/Tips &amp; Code Snippets."
            },
            {
                "siteName": "BLOGOOLA",
                "domainName": "http://www.blogoola.com",
                "description": "Expose your blog to millions and increase your audience."
            },
            {
                "siteName": "PHPSCRIPTS4U",
                "domainName": "http://www.phpscripts4u.com",
                "description": "The Blog of Enthusiastic PHP Scripters"
            }
        ]
    }
); 
```

# intellij-idea - 如何在 IntelliJ 中正确显示项目结构？

> ID：15548411
> 
> 赞同：0
> 
> 时间：2013-03-21T13:04:42.910
> 
> 标签：intellij-idea

你知道如何正确显示项目结构吗？

我的项目结构无法显示我的所有文件。

我不知道如何解决它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:23:02.550

确保模块的内容根位于项目的根级别（在项目设置中）。然后将任何包含源代码的文件夹标记为 Sources（类似地，将包含测试的文件夹标记为 Test Sources）。

# c# - 如何将 SoapHttpClientProtocol 转换为 HTTPS

> ID：15548415
> 
> 赞同：3
> 
> 时间：2013-03-21T13:04:48.473
> 
> 标签：c#, web-services, https

我可以转换从 WSDL 自动创建的 SoapHttpClientProtocol 类以使用 HTTPS 协议而不是 HTTP 吗？（如果，如何？）

只需将 Web 服务的 URL 访问权限从 更改`http://`为 会`https://`导致异常：

> 由于意外的数据包格式，握手失败

我的问题是，这个类非常大（想想 10k SLOC），我不确定我需要如何在这里更改协议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T20:47:38.563

根据我从搜索新事物中可以得出的结论，您应该可以通过添加行来做到这一点

```
this.Url = "https://example.com:443/servlet_path";
this.Credentials = System.Net.CredentialCache.DefaultCredentials; 
```

到派生`SoapHttpClientProtocol`类的构造函数和

```
[System.Web.Services.Protocols.SoapDocumentMethodAttribute(
  "http://example.com/servlet_path",
  RequestNamespace="http://example.com/",
  ResponseNamespace="http://example.com/",
  Use=System.Web.Services.Description.SoapBindingUse.Literal,
  ParameterStyle=System.Web.Services.Protocols.SoapParameterStyle.Wrapped)] 
```

到你的函数的定义。他们在一页中提到，如果目标机器没有来自执行机器接受的 CA 的证书，您可能需要覆盖默认证书验证器。

# codeigniter - $_POST 带剥离的 html

> ID：15548418
> 
> 赞同：0
> 
> 时间：2013-03-21T13:05:01.510
> 
> 标签：codeigniter, post, pyrocms

我在我的本地机器上使用 pyrocms，我尝试在我的 post-data 中提交一些 html 到自定义模块控制器。我使用 CKEditor 添加一些内容。

我使用 jquery.post，只是为了一些测试：

```
$('#ticket-form').submit(function(){
    console.warn(CKEDITOR.instances.message.getData());
    $.post("admin/tickets/playground", { message: CKEDITOR.instances.message.getData() } );
    return false;
}); 
```

我点击了提交按钮，控制台说：

```
<span style="font-size:14px;">Test</span> 
```

看起来不错。

在后端，我的控制器看起来像：

```
public function playground(){
    log_message('error',$_POST['message']);
    var_dump($_POST);
} 
```

两个转储的结果是：

```
<span >Test</span> 
```

我的控制器中没有其他内容。没有 html 剥离等...

pyrocms 有一个博客模块，如果我发布博客帖子，html 将不会被剥离。所以 CKEditor 的价值很好，我发布的数据也很好。我不使用xss等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:21:23.300

你试过设置

```
$config['global_xss_filtering'] = FALSE; 
```

在控制器的构造函数中？

# shell - 自动化二进制文件的输入过程

> ID：15548424
> 
> 赞同：0
> 
> 时间：2013-03-21T13:05:16.443
> 
> 标签：shell, ant, input, automated-tests

我在 UNIX 上有一个二进制文件，执行时会询问用户输入。这个二进制文件的输入是手动给出的。

我想自动化该过程，因为我已经知道输入。我无法修改二进制文件。我怎样才能做到这一点？这可能通过目标`shell script`甚至是`ant`目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:20:27.420

简单的输入重定向可能会起作用：

```
$ binaryFile <<EOF
input line 1
input line 2
input line 3
EOF 
```

如果您需要更复杂的东西，请查看[expect](http://www.nist.gov/el/msid/expect.cfm)包。

# android - 在 Prespetive、SDK Manager 和 AVD Manager 中看不到 Android。

> ID：15548425
> 
> 赞同：1
> 
> 时间：2013-03-21T13:05:17.260
> 
> 标签：android, eclipse, sdk, upgrade, ubuntu-12.04

我刚刚将我的 Ubuntu 升级到 12.04，现在当我运行我的 eclipse 时它会运行文件，但问题是我在任何地方都找不到 android。即使我尝试更新 ADT 等，但它表明一切都已安装。卡得很厉害，任何人都可以提供帮助。我在 Prespetive 中看不到 Android，它是 SDK 管理器和 AVD 管理器，甚至在新项目中我也找不到 android 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:38:36.990

打开你的 eclipse/plugins 目录。你能看到 com.android.ide.eclipse.{adt,base,ddms,etc...}.version_number.jar 文件吗？如果没有，那么您需要重新安装 eclipse ADT 插件。

# php - 防止邮件进入垃圾邮件的最佳 SMTP 配置

> ID：15548431
> 
> 赞同：0
> 
> 时间：2013-03-21T13:05:32.913
> 
> 标签：php, email, swiftmailer

我想使用 swiftmailer 通过我的 php 应用程序发送邮件。但我很困惑。我不想让我的邮件进入垃圾邮件文件夹。因此，有人告诉我正确配置 STMP。我进行了很多搜索，但找不到解决方案。我想知道 STMP 配置与发送到垃圾邮件箱的邮件是否有任何联系。使用 swiftmailer 发送邮件时是否应该使用自己的 Web 服务器 STMP 设置？或者我应该使用其他一些技术来防止邮件进入垃圾邮件箱。实际上，我不会发送这么多邮件。当用户注册时，我只需要发送一封确认邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:32:47.703

您无法保证任何事情，但您可以做一些事情来提供帮助：

*   确保您的 DNS 和反向 DNS 准确无误。
*   用 签署您的消息[`DKIM`](http://www.dkim.org/)。
*   为您的域配置[`SPF`](http://en.wikipedia.org/wiki/Sender_Policy_Framework)。
*   在本地安装[`SpamAssassin`](http://spamassassin.apache.org/)，并通过它运行您的消息样本，以查看它是否（以及如何）标记事物。调整您的消息内容以消除这些标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:42:55.460

谷歌一下，这里有一个关于Serverfault的链接，里面有很好的信息。[https://serverfault.com/questions/48428/how-to-send-emails-and-avoid-them-being-classified-as-spam](https://serverfault.com/questions/48428/how-to-send-emails-and-avoid-them-being-classified-as-spam)

这是一张支票：[http ://www.brandonchecketts.com/emailtest.php](http://www.brandonchecketts.com/emailtest.php)

和[http://blog.sendgrid.com/10-tips-to-keep-email-out-of-the-spam-folder/](http://blog.sendgrid.com/10-tips-to-keep-email-out-of-the-spam-folder/)

和[http://isnotspam.com/](http://isnotspam.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:28:54.190

您需要为发送电子邮件的域创建发件人策略框架 (SPF) 记录。这是为了防止垃圾邮件发送者伪造看似来自您的域的电子邮件，因为电子邮件收件人将查看此记录以确定它是否来自授权的邮件服务器。未经授权的电子邮件通常被视为垃圾邮件。

您可以使用 Microsoft 的[Sender ID Framework SPF Record Wizard](http://www.microsoft.com/mscorp/safety/content/technologies/senderid/wizard/)创建一个（如果有人知道更好的工具，请说）。为您的域配置 SPF 记录后，您可以从您的邮件服务器发送一封测试电子邮件到[check-auth@verifier.port25.com](http://www.port25.com/support/authentication-center/email-verification/)以测试您的配置。请注意创建这些记录时所犯的[常见错误。](http://www.openspf.org/FAQ/Common_mistakes)

# loops - 更少的循环变量总是设置为最后一个值

> ID：15548435
> 
> 赞同：1
> 
> 时间：2013-03-21T13:05:45.450
> 
> 标签：loops, less

我有 .less 文件：

```
@flag1: fr;
@flag2: en;
@flag3: ru;

@iterations: 3;

.loopingClass (@index, @difference: 0) when (@index < @iterations) {
    @idx: (@index + 1);
    @diff: (@difference - 32);

    (~".my-class-@{index}") {
        my-idx: @idx;
        my-diff: @diff;
        my-index: @index;
        my-difference: @difference;
    }

    .loopingClass(@idx, @diff);
}

.loopingClass (@iterations) {}
.loopingClass (0); 
```

它怎么会在哪里生成我 .css`@idx`并且`@diff`始终是循环的最后一个值？

```
.my-class-0 {
  my-idx: 3;
  my-diff: -96;
  my-index: 0;
  my-difference: 0;
}
.my-class-1 {
  my-idx: 3;
  my-diff: -96;
  my-index: 1;
  my-difference: -32;
}
.my-class-2 {
  my-idx: 3;
  my-diff: -96;
  my-index: 2;
  my-difference: -64;
} 
```

我不太擅长使用更少，但我尽了最大努力并尝试了很多方法来让这个循环正常工作。我需要`@idx`并且`@diff`成为 1、2、3 和 -32、-64、-96。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:45:11.720

我正在尝试一些疯狂的方法来使其工作并意识到，在循环完成后（或类似的东西）解析所有内容可能更少。所以我想，也许我应该尝试在循环`@idx`之外设置`@diff`。现在我的代码看起来像这样，它按预期工作：

```
.classOutput(@index, @difference){
    @idx: (@index + 1);
    @diff: (@difference - 32);

    (~".my-class-@{index}") {
        my-idx: @idx;
        my-diff: @diff;
        my-index: @index;
        my-difference: @difference;
    }
}
.loopingClass (@index, @difference: 0) when (@index < @iterations) {
    .classOutput(@index, @difference);
    .loopingClass((@index + 1), (@difference - 32));
} 
```

* * *

因此，使用新版本的 LESS`(~".my-class-@{index}")`会引发错误。这些更改应该会有所帮助，尽管没有对其进行测试：`.my-class-@{index}`

# java - Eclipse插件中是否需要dispose资源

> ID：15548440
> 
> 赞同：0
> 
> 时间：2013-03-21T13:06:00.093
> 
> 标签：java, eclipse-plugin

我是 eclipse 开发的新手，在学习 SWT 时，我知道我需要处理`display`下面的片段：

```
while (!shell.isDisposed ()) {
    if (!display.readAndDispatch ()) display.sleep ();
}
display.dispose (); 
```

因此它会处理所有显示获取的操作系统资源。我的问题是我应该在 Eclipse 插件中做同样的事情吗？考虑我们有这样的`createPartControl()`代码：

```
public void createPartControl(Composite parent) {
      //Other codes
      parent.dispose(); //Shoud I compulsory do this in eclipse plugin?
} 
```

或者eclipse会自动处理资源吗？我的假设是我应该手动处理。如果我错了，你能纠正我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:42:03.740

`parent.dispose()`是错误的做法。您应该清理在合成中创建的资源。不要处置父对象，因为它不是由您的视图/合成创建的。

监听 Widget 上的 dispose 事件并进行必要的清理。假设您在视图中创建了颜色、字体、图像等资源，并且您不想重复使用它们，请在合成上监听 dipose 事件并处理它们。

```
yourComposite.addListener(SWT.dispose, new Listener(){

    public void handleEvent(Event e){
            image.dispose(); 
            font.dipose();  
            color.dipose()

    }

}); 
```

# matlab - 在向量中找到局部最大值

> ID：15548441
> 
> 赞同：1
> 
> 时间：2013-03-21T13:06:00.133
> 
> 标签：matlab

有人可以帮助我。我使用 Matlab 程序。

假设，我有向量 A，

```
A = [0 0 1 2 3 5 0 0 0 0 0 2 3 6 7 0 0 0 0 1 1 2 3 4 1] 
```

我想从向量 A 中获取局部最大值和位置。所以，我想得到的答案如下。

**最大值 = 5、7 和 4；**

**最大位置 = 6、15 和 24；**

谢谢你的好意。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T13:21:56.467

如果您有信号处理工具箱，那么`findpeaks`应该是您想要的：

```
[pks,locs] = findpeaks(A) 
```

为了将来参考，您应该知道您想要找到的是局部最大值。说你想找到最大值会让你看起来好像想要全局最大值（在这种情况下是 7）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:22:54.987

你需要更清楚你的目标。看起来您希望在向量中找到局部最大值。

你是否总是有你希望找到的具有局部最大值的向量（不是真正的数组，通常是一个表示具有两个非单位维度的事物的词）？你会选择找到所有的局部最大值吗？如果是这样，那么这将工作......

```
A = [0 0 1 2 3 5 0 0 0 0 0 4 5 6 7 0 0 0 0 1 1 2 3 4 1];

n = numel(A);
ind = 2:(n-1);

maxLoc = ind(find((diff(ind-1) > 0) & (diff(ind) < 0)));

% in case the max occurs at an end
if A(2) < A(1)
  maxLoc = [1,maxLoc];
end
if A(n) < A(n-1)
  maxLoc = [maxLoc,n];
end

maxVal = A(maxLoc); 
```

但是向量呢

```
A = [0 1 2 2 1 0]; 
```

你现在想看什么？

同样，您需要考虑您的要求。你有什么需求。目标是什么？

一旦你这样做了，那么你的问题将更容易解决，也更容易有人回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T13:48:38.873

我假设您正在寻找局部最大值 - 即大于它们周围的值。

我的解决方案是这样的：

```
Loc = find(diff(A)(2:end)<0 & diff(A)(1:(end-1))>0)+1;
Val = A(Loc); 
```

Loc 将包含局部最大值的位置，而 Val 将包含那些局部最大值处的值。请注意，它不会像所写的那样在边缘找到最大值。如果你也想检测这些，你必须稍微修改一下：

```
Loc = find([A(1)>A(2),(diff(A)(2:end)<0 & diff(A)(1:(end-1))>0),A(end)>A(end-1)]);
Val = A(Loc); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-21T13:22:01.097

你想找到 4,5 和 7 的每一次出现吗？尝试：

```
Output = find(A>3) 
```

这将返回一个 1xN 向量，其位置超过 3...虽然不确定这是否是您想要的

# java - 如何提高 RabbitMQ 发送/接收速度

> ID：15548444
> 
> 赞同：3
> 
> 时间：2013-03-21T13:06:05.197
> 
> 标签：java, multithreading, rabbitmq

我有一个使用 RabbitMQ 的项目。在最好的情况下，它每秒可以接收 3000 条消息。这是我的消费者代码：

```
package com.mdnaRabbit.worker;

import java.io.IOException;
import java.math.RoundingMode;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

import com.rabbitmq.client.ConnectionFactory;
import com.rabbitmq.client.Connection;
import com.rabbitmq.client.Channel;
import com.rabbitmq.client.QueueingConsumer;
import com.mdnaRabbit.worker.data.Data;
import org.apache.commons.lang.SerializationUtils;

public class App {

    private static final String TASK_QUEUE_NAME = "task_queue";
    private static int i = 0;
    private static long timeStart;
    private static long timeFinish;
    private static long messPerSec;
    public static void main (String[] argv) throws IOException,InterruptedException{

        ExecutorService threader = Executors.newFixedThreadPool(20);
        ConnectionFactory factory = new ConnectionFactory();

        factory.setHost("localhost");

        Connection connection = factory.newConnection(threader);
        final Channel channel = connection.createChannel();

        channel.queueDeclare(TASK_QUEUE_NAME, true, false, false, null);
        System.out.println(" [*] Waiting for messages. To exit press CTRL+C");

        channel.basicQos(50);

        final QueueingConsumer consumer = new QueueingConsumer(channel);
        channel.basicConsume(TASK_QUEUE_NAME, false, consumer);

        timeStart = System.currentTimeMillis();

        try {

            while (i<100000) {

                try {QueueingConsumer.Delivery delivery = consumer.nextDelivery();
                    Data mess = Data.fromBytes(delivery.getBody());

                    System.out.println(" [" + (i++) +"] Received " + mess.getHeader());

                    channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);
                }catch (Exception e){
                }
            }
        } catch (Exception e){
            e.printStackTrace();
        }

        timeFinish = System.currentTimeMillis();
        messPerSec = Math.round ((i*1000)/(timeFinish - timeStart));

        System.out.println( "receives " + messPerSec + " per second");

        channel.close();
        connection.close();
    }
} 
```

如您所见，我正在使用 ExecutorService 来提高速度和 channel.basicQos()，但这对我没有多大帮助。有没有办法提高接收/发送速度（发送速度增加我认为与接收速度相同）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-23T16:15:55.973

我以前没有使用过 RabbitMQ，但我可以从其他消息中间件分享我的经验。毕竟他们面临同样的挑战。

通过调整 MQ 服务器，您可以增加每秒的消息数量，但您必须放弃某种功能，例如保证交付。如果您使用单个队列，则添加的线程越多，队列锁的争用就越多。

我过去所做的并设法将性能提高到 x300 倍是增加消息大小，即增加可以由单个线程原子完成的工作。我将尝试在下面描述我的算法（如果有人知道它的名称，我将不胜感激）。

1.  创建一个`threadLocal`接收消息的集合
2.  通过计时器线程提供对这些集合的（线程安全的）访问
3.  设置时间和批量大小限制
4.  当您传递消息时，请检查大小是否已达到适当的批量大小。如果有，则刷新集合（即打包所有消息并一次性发送）
5.  为了满足时间问题，让计时器线程定期检查从传递第一条消息开始经过的时间。如果它超过了您的阈值，则按上述方式收集。（刷新/检查时不要忘记同步）

(4)。不仅消除了网络延迟，还消除了磁盘 IO 时间，因为普通 HDD 将花费相同的时间来写入 1byte 和大约 1.5MB。

`*`在我的情况下，这更复杂，因为应该保证每个交付线程。为了支持这一点，您需要实现某种 a`Barrier`以便交付线程将阻塞，直到主线程收到 ACK

`**`您可能还希望在一条消息失败的情况下实施备份策略，这意味着整个批次都将失败。如果批处理失败，我建议作为单独的消息发送。

`***`在其他 MQ 中，有各种设置可能会阻碍您的表现。这些包括节流，将生产者限制在一定大小的队列之上，批量消费者消息，多级保证模式。（请参阅下面的潜在组合）

`****`可能会降低性能的组合如下：队列的最大大小为 10MB，消费者预取 1000 个消息。举例来说，假设每条消息的大小为 10K。此示例将导致（在某些 MQ 中）单个消费者线程获取所有消息（即使您有 100 个消费者线程）。另一方面，生产者将受到限制，不允许添加任何超过 10MB 限制的消息。这里的解决方案是增加队列 MaxSize 并减少预取大小。监控/分析/记录始终是您的朋友。

希望这可以更好地理解您的问题。（顺便说一句，持久模式下的 3000msgs/sec 还不错。）

# android - 包括 没有这样的文件或目录

> ID：15548446
> 
> 赞同：1
> 
> 时间：2013-03-21T13:06:07.183
> 
> 标签：android, c++, curl, cross-compiling

我想将一个 c++ 库交叉编译到 android 平台，因为我在扫描我的库的依赖项时使用 NDK 独立工具链，我发现它依赖于 libcurl。

我已经为 android 构建了 libcurl 我现在的问题是当我尝试构建我的库时我得到不包含这样的文件或目录

知道我已经在我的 CMakeLists.txt 中添加了这些行

```
include_directories(libcurl/include)
link_directories (${PROJECT_SOURCE_DIR}/../../../../neededLibs) 
```

其中 .../neededLibs 包含为 android 编译的 libcurl.a。

我必须做什么才能让我的交叉编译器识别？提前致谢！

# vhdl - 如何将 VHDL 项目放在 Spartan 6 FPGA 上

> ID：15548454
> 
> 赞同：1
> 
> 时间：2013-03-21T13:06:28.213
> 
> 标签：vhdl, fpga, xilinx, spartan

我正在开发一个 VHDL 项目，该项目将被放置到 spartan 6 fpga 上。代码已准备好，但我不确定如何继续将其放到 fpga 上。

我可以访问另一个项目，并注意到该项目中有一个 Microblaze 处理器 (.xmp) 文件和一个定义所有“NET”接口的 ucf 文件。

最终，我将使用 FPGA 和附加板连接器与硬件进行通信，但我需要将所有东西都移到 FPGA 上。

一些资源和教程会很棒，特别是如何将 microblaze 处理器放入我的项目中，如果我什至需要它的话。

谢谢

更新：我开始模拟我的项目并出现错误。

第 214 行：语句不可综合，因为它在 NOT(clock-edge) 条件下不保持其值

我在 ana if 语句中的一个项目文件中得到了这个

```
if rising_edge(clk) then
-- other if statements that assign output values
end if 
```

我尝试更改代码，但如果我这样做了，它就不再起作用了。

不确定错误的确切含义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:42:11.477

UCF 文件应包含属于每个信号的管脚的约束以及任何时序条件。“最简单”的方法是阅读编写此类文件的指南，或使用可帮助您正确处理它们的内置工具

[这](http://www.xilinx.com/support/documentation/sw_manuals/xilinx14_2/cgd.pdf)是赛灵思指南。

这是最重要的限制之一：

> TIMESPEC “TSidentifier”=PERIOD “TNM_reference” 周期 {HIGH | LOW} [high_or_low_time] INPUT_JITTER 值；（从上面的文件中截取）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T16:33:41.967

对于新的 VHDL 开发人员来说，最好的教程之一是简短的教程“Spartan 3E FPGA 和 VHDL 简介，作者是 Mike Field。您可以从他的[GitHub 帐户](https://github.com/hamsternz/IntroToSpartanFPGABook)下载 PDF 和所有源代码，或者浏览[他的书的章节网站](http://hamsterworks.co.nz/mediawiki/index.php/FPGA_course#Modules)。

您将在几个小时内从 FPGA 中的简单 Hello World 等价物转变为使用 DCM 并生成 VGA 信号。

Mike 在书中同时使用了 Papilio One 和 Digilent Basys2 开发板，但是您可以轻松地将这些示例调整到您正在使用的任何开发板上。您只需要相应地调整 UCF 文件。他使用 Spartan-3 而你使用 Spartan-6 的事实应该没有任何区别。

UCF 或用户约束文件是告诉您的 FPGA 与外部世界的连接的文件。UCF 高度依赖于您的特定硬件，因为每块板都有一组不同的引脚。您可能正在使用流行制造商之一提供的电路板，因此您只需检查特定硬件的文档即可。

在为您的特定板找到原始 UCF 文件后，建议您删除所有不使用的行（意思是：所有未连接到 vhdl 代码中的任何内容的节点），否则编译器会发出警告或错误。

这应该足以让你开始。

ps：如果你没有任何使用MicroBlaze的具体原因，你可以暂时忽略它。

# ruby-on-rails-3 - 乘客总是从 database.yml 读取生产设置

> ID：15548455
> 
> 赞同：1
> 
> 时间：2013-03-21T13:06:31.247
> 
> 标签：ruby-on-rails-3, nginx, passenger

我已经在我的测试服务器上使用 nginx 和乘客部署了我的 rails 3 应用程序，其中 RAILS_ENV 设置为测试。我还在`rails_env test;`我的 nginx.conf 中添加了服务器块。但是 passeneger 仍然从我的 database.yml 中读取生产设置。我怎样才能解决这个问题 ？

谢谢你

# gwt - GWT：如何将 UiBinder xml 布局添加到我的 Widget？

> ID：15548465
> 
> 赞同：0
> 
> 时间：2013-03-21T13:07:13.663
> 
> 标签：gwt

我有一个按钮，它是 GWT 的直接后代`PushButton`。我想将 UiBInder xml 布局添加到我的按钮以简化其设计。我创建`MyButton.ui.xml`了以下内容`MyButton`：

```
class MyButton extends PushButton 
{

interface UI extends UiBinder<Widget, MyButton>
{
}

private static final UI ui = GWT.create(UI.class);

@UiConstructor
public MyButton() {
        super();
        ui.createAndBindUi(this);
}

(...)

} 
```

问题是我的按钮没有呈现。GWT 创建了一些 div 并将输入元素放置在其中，但是我在 uibinder xml 文件中创建的布局没有应用。我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:23:46.590

我不太确定，但是，可能是因为您没有实现 asWidget() 方法：

```
@Override
public Widget asWidget() {
    return widget;
} 
```

声明小部件的位置：

```
private final Widget widget; 
```

并在您的构造函数中初始化为：

```
widget = ui.createAndBindUi(this); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T23:48:47.430

要直接回答您的问题，xml 必须看起来像（进行必要的调整）：

```
<ui:image field='downButton'/>
<g:PushButton ui:field='pushButton' enabled='true'>
  <g:upFace>
    <b>click me</b>
  </gwt:upFace>
  <g:upHoveringFace>
    <b>Click ME!</b>
  </gwt:upHoveringFace>

  <g:downFace image='{downButton}'/>
  <g:downHoveringFace image='{downButton}'/>
</g:PushButton> 
```

有关语法，请参阅[http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/CustomButton.html](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/user/client/ui/CustomButton.html)。然后进入你的`MyButton`你应该使用一个标记为的方法`@UiFactory`来获取正确的实例来提供`UiBinder` `GWT.create()`.

```
@UiFactory
DialogBox thatsJustMe() {
  // UiBinder will call this to get a PushButton instance.
  return this;
} 
```

无论如何，您无法更改小部件的结构。你必须遵守它的定义。

# javascript - X和Y到某个目的地如何动画

> ID：15548467
> 
> 赞同：1
> 
> 时间：2013-03-21T13:07:16.203
> 
> 标签：javascript, html, canvas, kineticjs

我正在使用 Javascript、Canvas 和 KineticJS 制作一个小练习脚本，我想在其中向鼠标光标射击一些子弹。

唯一的问题是我真的找不到让子弹直接射向我的鼠标的方法。它似乎总是对角线而不是直接指向我的鼠标。现在我知道我的代码不是现在。我只是想问我如何才能让我的对象移动到我的鼠标而不是对角线。

我试过将 X 和 Y 分开设置。但这使它首先对角线跳跃，最后几个像素跳到正确的 X，这显然是不正确的。

这是一个小提琴（子弹功能在第166行）：http: [//jsfiddle.net/eRQ3P/](http://jsfiddle.net/eRQ3P/)（注意：子弹现在没有处理；所以它会在几颗子弹后滞后！）（注2：射击到左上角，看看子弹是怎么飞的）

尽管如此; 这是我的项目符号函数，它获取目标 X 和 Y（它是鼠标 X 和 Y 的 X 和 Y 单击时）

```
function Bullet(destinationX, destinationY) {
    this.x = sprite.getX()+(sprite.getWidth()/2);
    this.y = sprite.getY()+(sprite.getHeight()/2);

    this.destinationX = destinationX;
    this.destinationY = destinationY;    

    this.finished = false;

    this.projectile = new Kinetic.Circle({
        x: this.x,
        y: this.y, 
        radius: 5,
        fill: 'pink',
        name: 'projectile'
    });

    this.draw = function(index) {
        var mayDelete = true;
        if (this.headingY == 'north') {
            if (this.projectile.getY() > this.destinationY) {
                this.projectile.setAbsolutePosition(this.projectile.getX() - (2*speed), this.projectile.getY() - (2*speed));
                //this.projectile.setX(this.projectile.getX() - (2*speed));
                mayDelete = false;
            }

        }

        if (mayDelete == true) {
            this.projectile.remove();
            bullets.splice(index, 1);
        }

        ammoLayer.draw();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:07:29.027

我以前从未使用过 Kinect.js，所以我不知道我是否以“Kinect”的方式进行了所有操作。但这基本上是我所做的。

首先你在第 110 行有一个错误

`bullet = new Bullet(cursor.getX() + (cursor.getWidth() / 2), cursor.getY() + (cursor.getHeight() / 2));`

你错过了括号`getWidth`

现在开始计算拍摄地点。

```
 this.x = sprite.getX() + (sprite.getWidth() / 2);
    this.y = sprite.getY() + (sprite.getHeight() / 2);

    var targetX = destinationX - this.x,
        targetY = destinationY - this.y,
        distance = Math.sqrt(targetX * targetX + targetY * targetY);

    this.velX = (targetX / distance) * speed;
    this.velY = (targetY / distance) * speed;
    this.finished = false; 
```

我们需要做的是获得子弹所需的速度。我们通过获取目标和原点之间的距离来做到这一点。然后我们需要将该数字除以目标 x 和 y。为了使子弹以我们需要的速度移动，我们只需将该数字乘以您的速度变量。每次调用 draw 时，都会将速度添加到对象 x 和 y 坐标。

代码本身非常解释，希望对您有所帮助。

**[现场演示](http://jsfiddle.net/eRQ3P/3/)**

# android - 如何将自定义值与每个通讯簿联系人关联

> ID：15548468
> 
> 赞同：1
> 
> 时间：2013-03-21T13:07:16.720
> 
> 标签：android

我希望有一个布尔值与通讯簿中的所有联系人相关联。此布尔值将指示联系人是否属于我的团队。如果没有与联系人关联的布尔值，则该值将默认为“假”。我还想在列表视图中显示我的所有联系人，并带有与布尔值关联的复选标记（如果没有值，则默认为“假”）。

问题：存储与每个联系人关联的布尔值的好方法是什么，我可以创建一个光标，其中包含所有联系人以及与每个联系人关联的布尔值。

由于有很多联系人，我想确保创建此光标（显示在列表视图中）所花费的时间尽可能少。我一直在寻找联系人内容提供商，但到目前为止我还没有想出一个好的方法。

谢谢！普拉萨纳

# ios - 是否可以在 Interface Builder 中将 UIImageView 设置为原型 UITableViewCell 的背景？

> ID：15548473
> 
> 赞同：0
> 
> 时间：2013-03-21T13:07:20.533
> 
> 标签：ios, xcode, cocoa-touch, cocoa, interface-builder

如果我在 Interface Builder 中将 a 设置为`UIImageView`a`backgroundView`的**原型单元格**`UITableView`，然后使用原型创建一个包含多行的表，那么只有最后创建的单元格将其`backgroundView`设置为`UIImageView`实例。

我假设这样做的原因是，当我将 Interface Builder 中原型单元的出口连接到**UIImageView**`backgroundView`时，我实际上是将其连接到. 因此，随着新单元的创建，每个新单元都将其设置为实例，从先前创建的单元中窃取它。**`UIImageView``backgroundView``UIImageView`**

 **有什么方法可以配置 Interface Builder，以便从原型创建的每个新单元格都能`backgroundView`正确设置？如果只有一个单元可以使用该视图，IB 让您将原型单元的`backgroundView`出口连接到一个似乎很奇怪。`UIImageView`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:35:35.230

最简单的方法是继承 UITableViewCell。使您的原型单元格成为您的自定义单元格的实例，并将原型中的 imageView 连接到 customCell 类中的插座。对于 tableView 中的每个单元格，实例化 customCell 的一个实例，并设置它的 imageView。**

# html - div 与 fixed 左对齐，另一个 div 与 100%

> ID：15548474
> 
> 赞同：1
> 
> 时间：2013-03-21T13:07:23.127
> 
> 标签：html, css, css-float

我想让一个 div 与左侧固定对齐。我希望另一个 div 占用 100% 的大小 restante.quero 使 div 与左侧固定对齐。我希望另一个 div 占据剩余大小的 100%。

但是，第二个 div 总是下降，但第二个 div 总是下降。

这个怎么做？这个怎么做？

演示 em jsFiddle：

[http://jsfiddle.net/jxt4V/1/](http://jsfiddle.net/jxt4V/1/)

```
.coluna2
{
    height:auto;
    width:100%;    
    float : left;        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:30:42.823

将您的以下 CSS 更改为：（`#principal`和`.coluna2`）

```
#principal 
{
    width:100%;
    background:#babaca; 
    float : left;   
    word-wrap: break-word;
    position:relative;   /* adding Position: relative; here */   
}

.coluna2
{
    height:auto;
    position:absolute;
    top:0;
    left:150px;   /* giving the value of the adjacent element ie width: 150px */
    bottom:0;
    right:0;        
} 
```

**[工作小提琴](http://jsfiddle.net/jxt4V/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:58:36.193

[http://jsfiddle.net/joeframbach/YLCLZ/](http://jsfiddle.net/joeframbach/YLCLZ/)

```
img {
    width: 100px;
    float: left;
}
div {
    margin-left: 120px;
}

<img src="http://www.poundland.co.uk/images/4414/original/filler-2.jpg" />
<div>This text is on the right</div>
<div>This is also on the right</div> 
```

# html - 为什么是 标签在网站上不可见？

> ID：15548475
> 
> 赞同：0
> 
> 时间：2013-03-21T13:07:23.643
> 
> 标签：html, css, web

hr 标签非常好，然后即使标签在 html 代码中，它也突然消失了。所有页面都是这样，但我的 Dreamweaver 模板页面中没有任何 hr 标签 css 代码。下面是发生这种情况时我正在处理的 jsfiddle 页面代码。

```
<hr>

http://jsfiddle.net/DuDjK/1/ 
```

完整代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/template.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>OBDKey</title>
<style type="text/css">
#footer {
    color: #5A87B4;
}
</style>
</head>

<style type="text/css">

    *{
        margin:0;
        padding:0;
        border:0;
        font-family: Helvetica, sans-serif;
        -webkit-text-size-adjust:none;
    }

#menubar * { padding: 0; margin: 2; }
        body {font-family: Helvetica, Arial, sans-serif; width:100%; font-size:12px}
        #menubar ul{
text-align:center;
}
        #menubar ul li { display:inline-block; padding: 2px;  position: relative; margin-left:-10px; margin-right:-20px; margin:invisible; }
        #menubar ul a { display: table-cell; vertical-align: middle; width: 80px; height: 30px; text-align:center; background: #FFF; color:#000; border-style: solid; border-width:2px; border-color:#1570a6; text-decoration: none; }
#menubar li:after{
     border-left:50px solid black;
   border-right:60px solid black;
   content:"";
   position:relative;
   left:-12px;
   top:-18px;  
   z-index:-1;
   display:block;
   height:1px;
}

#cssmenu {
    background: #E6E6E6;
    list-style: none;
    margin: 0;
    padding: 0;
    width: 100%;
}
#cssmenu li {
    font: 100% 'Helvetica', 'Bitstream Vera Sans', 'Trebuchet Unicode MS', 'Lucida Grande', Verdana, Helvetica, sans-serif;
    margin: 0;
    padding: 0;
       list-style: none;
}
#cssmenu a {
    background: #E6E6E6;
    border-bottom: 1px solid #F2F2F2;
    color: #000;
    display: block;
    margin: 0;
    padding: 8px 12px;
    text-decoration: none;
    font-weight:normal;
}
#cssmenu a:hover {
    background: #E6E6E6 url(images/menuhover.png) left center no-repeat;
    color: #1570A6;
    padding-bottom: 8px;
}

    #header {
    text-align: center;
    background: #FFA500;
    height: inherit
    padding: 15px 0;
    border: 0;
    }

    #footer {
    background:#5A87B4;
    padding:20px 0;
    text-align:center;
    }

#footer {
    color: #5A87B4;
}
#footer {
    color: #FFFFFF;
    font-size: 12px;
}
.footertextsize {
    font-size: 10px;
}
.font-color {
    color: #5A87B4;
}
heading {
    color: #000;
}

#header #checkout p {
    color: #FFF;
}
</style>

<body>

<div id="header"  >
    <div id="checkout">
      <p align="right"><a href="Home.html"><img src="images/obdlogo.png" align="left" /></a></p>
  <p align="right"><strong><a href="Order%20Online.html">BUY </a></strong></p>
  <p align="right"><a href="Order%20Online.html"><strong>NOW</strong></a></p>
  <p align="right">&nbsp;</p>
  <p align="right">&nbsp;</p>
  </div>
  <hr style="height:5px; background-color:#FFF; solid #FFF; border:0"  />
  <hr style="height:5px; background-color:#1570a6; solid #1570a6; broder:0"  />
  <hr style="height:5px; background-color:#FFF; solid #FFF; border:0"  />
  <hr style="height:5px; background-color:#1570a6; solid #1570a6; broder:0"  />
  <hr style="height:5px; background-color:#FFF; solid #FFF; border:0"  />
  <hr style="height:5px; background-color:#1570a6; solid #1570a6; broder:0"  />
</div>
<div id="menubar"> 
    <ul>
    <li>
      <a href="Software.html" ><strong>SOFTWARE</strong></a>
    </li>
      <li><a href="Products.html"><strong>PRODUCTS</strong></a></li>
    <li>
    <a href="FAQ.html"><strong>FAQ</strong></a></li>
    </ul>
</div>

<p>&nbsp;</p>
<p>&nbsp;</p>
<!-- InstanceBeginEditable name="EditRegion1" -->
<p><strong>Press Information, News and Reviews</strong></p>
<p>&nbsp;</p>
<p class="font-color">&nbsp;</p>
<p class="font-color"><strong>January 2012: New OBDKey Interface Distributor for Germany, Austria and Switzerland</strong></p>
<p class="font-color">&nbsp;</p>
<p class="font-color">From January 2012 OBDKey units are available to purchase from our new distributor for German speaking countries: <strong>Electronic-Fuchs</strong>.</p>
<p class="font-color">&nbsp;</p>
<p class="font-color"><img src="images/Fuchs_Banner.jpg" width="296" height="77" alt="fuchs" longdesc="file:///C|/Users/Production/Desktop/Mobile Website/Mobile Website/images/Fuchs_Banner.jpg" /></p>
<p class="font-color">&nbsp;</p>
<p class="font-color">&nbsp;</p>
<hr>
<p>
<p>
<p class="font-color"><strong>November 2011: OBDKey Recieves &quot;Recommended&quot; Award from Car Mechanics Magazine</strong></p>
<p class="font-color">&nbsp;</p>
<p class="font-color"><img src="images/carmechmagrec.jpg" alt="carmechmagrec" width="120" height="128" longdesc="images/carmechmagrec.jpg" align="left" />&quot;The Bluetooth in the name gives it away - here's a package that means you don't have to be permanently connected to your car during diagnostics session. But, as handy as that is, the real bonus of the Bluetooth is that this package can be run on a plethora of mobile phones and personal organisers, instead of just a laptop.<img src="images/carmechmag.jpg" alt="carmechmag" width="100" height="139" longdesc="images/carmechmag.jpg" align="right" /></p>

<p class="font-color">&nbsp;</p>
<p class="font-color">&nbsp;</p>
<p class="font-color"><em>The bundled programme is businesslike, works works well and even goes beyond-OBD on VAG cars&quot;</em></p>
<p class="font-color">&nbsp;</p>
<p class="font-color"><em><strong>&quot;Value for money 6/6&quot;</strong></em></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>
<hr />
<p>
<p>
<p class="font-color"><strong>September 2011: OBDKey WLAN Shipping in smaller Casing</strong>
<p class="font-color">
<p class="font-color">
<br />
<p class="font-color"><img src="images/obdkeywifism.jpg" alt="wlansm" width="112" height="88" longdesc="images/obdkeywifism.jpg" align="right" />
<p class="font-color">From September 2011 all OBDKey WLAN units will be shipped in the standard OBDKey case with dimensions 62x45x24 mm (65x45x24 mm including accessory loop).
<p class="font-color">
<p class="font-color">Approved for connection to wireless LAN devices and fully tested on OBD-II compatible vehicles and systems.
<p>
<br />
<p>
<p class="font-color"><strong><a href="obdkeywlanpressrelease.pdf">Press release</a></strong>
<p><br />
<p class="font-color"><strong><a href="WLAN.html">More information</a></strong>
<p class="font-color">
<p class="font-color">
<hr />
<p class="font-color"><!-- InstanceEndEditable -->
<p class="font-color">&nbsp;</p>
<p class="font-color">&nbsp;</p>
<p class="font-color">&nbsp;</p>
<div id='cssmenu'>
  <ul>
    <li><a href="#">Contact Us<strong></strong></a></li>
    <li><a href="About%20Us.html">About Us</a></li>
    <li><a href="Support.html">Get Support</a></li>
    <li><a href="#">Press</a></li>
  </ul>
</div>
<p class="font-color"><br />
</p>

<div class="footertextsize" id="footer">
  <p>&nbsp;</p>
  <p><strong><a href="http://www.obdkey.com">View Desktop Site</a></strong></p>
  <p>&nbsp;</p>
  <p><strong>Copyright © Copyright (C) 2011 KBM Systems Ltd.</strong></p>
  <p>&nbsp;</p>
  <p><strong>OBDKey is a registered  trademark of KBM Systems Ltd.</strong></p>
  <p>&nbsp;</p>
</div>
<p>&nbsp;</p>
<div id='cssmenu'>
  <ul>
    <li><a href="Copyright%20Notice.html">Copyright Notice </a></li>
    <li></li>
    <li></li>
    <li></li>
  </ul>
</div>
<p>&nbsp;</p>
</body>
<!-- InstanceEnd --></html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:09:55.760

由于这个通用选择器，它选择了每个元素：

```
* {
margin:0;
padding:0;
border:0;
font-family: Helvetica, sans-serif;
-webkit-text-size-adjust:none;
} 
```

这只是从`<hr>`

# android - Android文本到图像问题

> ID：15548479
> 
> 赞同：1
> 
> 时间：2013-03-21T13:07:29.087
> 
> 标签：android, textview, imageview

我在 android 应用程序中有文本到图像的代码，它成功地将文本转换为图像并保存到 SD 卡中的本地位置。我面临的问题是它没有将完整的文本转换为图像。这是我提供给 textview 的文本“这是 t ashdf asdhfj sdhkfh shd jshd hsdhfsdjkhfksdjfhsdlhfksldhfklh shdkfjhsdkj hfsdjk kdjhfsk djhfskldh shdjkfhk sjhdfkh”。这是它转换为图像的内容![在此处输入图像描述](../Images/591a67f95bd5d1b2a71f811dcf79d59d.png)

这是我的代码

```
 RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, 60);

    tv.setLayoutParams(layoutParams);

    tv.setText("this is t ashdf asdhfj sdhkfh shd jshd hsdhfsdjkhfksdjfhsdlhfksldhfklh shdkfjhsdkj hfsdjk kdjhfsk djhfskldh shdjkfhk sjhdfkh ");
    tv.setTextColor(Color.BLACK);
    tv.setBackgroundColor(Color.WHITE);

    Bitmap testB;
    timer = new Timer();
    timer.schedule(new TickerTask(), 1000,25);
    testB = Bitmap.createBitmap(tv.getText().length(), 20, Bitmap.Config.ARGB_8888);
    Canvas c = new Canvas(testB);

    tv.layout(0, 0, 800, 30);
    tv.draw(c);
    iv = (ImageView) findViewById(R.id.menuIcon);
    x=40;
    iv.setPadding(x, 0, 0, 0);
    iv.setLayoutParams(layoutParams);
    iv.setBackgroundColor(Color.GREEN);
    iv.setImageBitmap(testB);
    iv.setDrawingCacheEnabled(true);
    BitmapDrawable drawable = (BitmapDrawable) iv.getDrawable();
    Bitmap bitmap = drawable.getBitmap();
    //Bitmap bitmap = testB;
    File sdCardDirectory = Environment.getExternalStorageDirectory();
    File image = new File(sdCardDirectory, "test.png");

    boolean success = false;

    // Encode the file as a PNG image.
    FileOutputStream outStream;
    try {

        outStream = new FileOutputStream(image);
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, outStream); 
        /* 100 to keep full quality of the image */

        outStream.flush();
        outStream.close();
        success = true;
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    if (success) {
        Toast.makeText(getApplicationContext(), "Image saved with success"+tv.getText().length(),
                Toast.LENGTH_LONG).show();
    } else {
        Toast.makeText(getApplicationContext(),
                "Error during image saving", Toast.LENGTH_LONG).show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:12:13.300

更改此行：

```
 RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, 60); 
```

对此：

```
 RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT); 
```

要直接绘画，你可以试试这个：

```
Paint paint = new Paint();
paint.setStyle(Paint.Style.FILL);
paint.setAntiAlias(true);
paint.setTextSize(30);
canvas.drawText("Style.FILL", 75, 110, paint); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:15:49.107

我想问题出在您的宽度上。您的`TextView`方法将视图的绘图区域转换为位图。如果隐藏了部分文本，则实际上没有在绘图区域中绘制。为什么不从画布中获取文本`TextView`并将其写入画布？您可以使用此方法：

```
canvas.drawText(); 
```

示例代码：

```
Paint paint = new Paint();
paint.setColor(Color.RED);
paint.setStyle(Paint.Style.FILL);

paint.setAntiAlias(true);

paint.setTextSize(20);

canvas.drawText("Hello Android! Fill...", 50, 230, paint); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T05:48:55.173

要将完整的文本转换为图像，您必须获取 textview 内的文本宽度，而不是 textview 本身。因此，这是获取文本宽度的方法。

```
 string texting="Some Text";
    Rect bounds = new Rect();
    Paint textPaint = tv.getPaint();
    textPaint.getTextBounds(texting,0,texting.length(),bounds);
    int heights= bounds.height();
    int widths = bounds.width(); 
```

现在您可以使用上面的宽度和高度来创建位图，并将完整的文本（无论多长或小）转换为图像。

# javascript - 如何将 html5 视频拉伸到宽度：600 和高度 200？

> ID：15548480
> 
> 赞同：2
> 
> 时间：2013-03-21T13:07:30.980
> 
> 标签：javascript, css, html, video-player

如何将 html5 视频拉伸到宽度：600 和高度 200？

当我尝试时，导航栏的大小会增加，但视频仍然很小

代码：

```
<!DOCTYPE html>
<html>
<body>

<video width="600" height="200" controls>
  <source src="http://media.w3.org/2010/05/sintel/trailer.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>

</body>
</html> 
```

jsfiddle：http: [//jsfiddle.net/ke8HX/1/](http://jsfiddle.net/ke8HX/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:13:51.477

尝试将宽度和高度属性放在源标签上：

[http://jsfiddle.net/ke8HX/8/](http://jsfiddle.net/ke8HX/8/)

HTML

```
<video class="vid" controls=true>
  <source src="http://media.w3.org/2010/05/sintel/trailer.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video> 
```

CSS

```
.vid {}
.vid source { width:600px; height:200px;  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:25:35.390

这有点工作......我不认为你将能够只用 CSS 修改实际的播放器控制栏。它甚至没有显示在我的 Chrome 开发者工具版本中作为要修改的 HTML 层。但是视频确实重新调整了！

CSS：

```
#vid, #vid source { width:600px !important; height:200px !important;} 
```

的HTML：

```
<video id="vid" controls=true>
  <source src="http://media.w3.org/2010/05/sintel/trailer.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video> 
```

[演示](http://jsfiddle.net/ke8HX/29/)

# awk - 使用 awk 列出两个文件中的差异

> ID：15548484
> 
> 赞同：0
> 
> 时间：2013-03-21T13:07:41.680
> 
> 标签：awk, diff

假设我有两个文件 -

### 文件1：

```
1|abc
2|cde
3|pkr 
```

### 文件2：

```
1|abc
2|cde
4|lkg 
```

如何使用 列出两个文件中的真正差异`awk`？如果第二个文件是第一个文件的子集，我可以执行以下操作 -

```
awk -F"|" 'NR==FNR{a[$1]=$2;next} !($1 in a)' file{1,2} 
```

但这会给我

```
4|lkg 
```

我想得到如下输出，因为这是真正的区别。差异应该被视为：

```
3|pkr
4|lkg 
```

**差异标准：**

*   字段 1 存在于文件 1 中，但不存在于文件 2 中。
*   字段 1 存在于文件 2 中，但不存在于文件 1 中。
*   字段 1 存在于两个文件中，但具有不同的值。

**一些背景：**

文件 1 和文件 2 是从不同数据库导出的表。它有两个由管道分隔符分隔的字段。字段 1**始终**是唯一的。字段 2 可能相同。

我的意图是`awk`在它上面运行一个班轮以找到真正的差异。如果我两次运行上述命令（第一次运行时首先传递文件 1，第二次运行时首先传递文件 2），我会得到两个都缺少的记录。但是，我想一次性完成。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:22:27.357

如果你真的想使用 awk：

```
$ cat f1
a|1
b|2
c|1
$ cat f2
b|2
c|1
d|0
$ awk '{ h[$0] = ! h[$0] } END { for (k in h) if (h[k]) print k }' f1 f2
a|1
d|0
$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T13:33:28.187

这是做什么`comm`的：

```
$ comm -3 <(sort file1) <(sort file2) 
```

如果 say`a|1`在`file1`一次和`file2`两次中出现，那么`a|1`将在输出中出现一次，因为在 中只有一个`file2`匹配项`file1`。如果您不希望这种行为，并且因为`a|1`在每个中至少出现一次，则不应在输出中看到，然后使用`-u`选项`sort`

```
$ comm -3 <(sort -u file1) <(sort -u file2) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:33:22.290

```
diff file1 file2 | perl -lne 'if(/^[<>]/){s/^..//g;print}' 
```

下面是测试：

```
> cat file1
a|1
b|2
c|1
> cat file2
b|2
c|1
d|0
> diff file1 file2 | perl -lne 'if(/^[<>]/){s/^..//g;print}'
a|1
d|0
> 
```

# c# - 从 .pst 文件中提取所有 .msg 文件

> ID：15548485
> 
> 赞同：1
> 
> 时间：2013-03-21T13:07:50.730
> 
> 标签：c#, mfc

注意：我被要求创建一个从 .pst 文件中提取 .msg 文件的应用程序，最好是在 MFC 中。我被告知他们曾尝试使用其他 3rd 方应用程序，但他们都失败了（不要问我怎么做的），所以这就是他们要求我创建一个应用程序来执行此操作的原因。

第一个问题：有人告诉我 MFC 是首选语言，那么是否有 MFC 库支持在 MFC 中实现这一点？如果没有，C#可以吗？

第二个问题：如果是，使用哪些库？如果没有，使用哪些 C# 库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T06:19:28.047

[味精 .NET](http://www.independentsoft.de/msg)（C# 库）。
它完全符合您的需要，从 .pst 文件中将所有消息提取为 .msg 文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T13:11:00.850

如果您真的需要编写自己的应用程序，那么您*必须*从搜索和下载 PST 规范开始。LMGTFY...啊，你可以在 MSDN 上找到它：

> [[MS-PST]：Outlook 个人文件夹 (.pst) 文件格式](http://msdn.microsoft.com/en-us/library/ff385210%28v=office.12%29.aspx)。

只有这样，您才能确定您需要哪些工具来完成这项工作，以及哪些编程语言最能帮助您。

* * *

它看起来像一个明确指定的二进制格式。因此，任何允许您读取二进制文件的语言（MFC 和 C# 都可以很好地做到这一点）都可以完成这项工作。可能有可用于读取 .PST 文件的第三方库，但您确实必须自己搜索这些库并根据您的标准对其进行评估。例如：

*   [NMapi - C# MAPI 库](https://stackoverflow.com/a/4007209/146622)

# extjs - Sencha Touch 中选项卡面板上的 BadgeCls

> ID：15548490
> 
> 赞同：3
> 
> 时间：2013-03-21T13:08:09.167
> 
> 标签：extjs, touch, sencha-touch-2, tabpanel, badge

有史以来第一个问题在这里！由于某种原因，我无法在 Sencha Touch 中使用 badgeCls 选项。我正在尝试更改徽章的颜色，但我通过的课程在渲染时并未显示在实际徽章上。

我在这里做了一个简单的例子：http: [//jsfiddle.net/goatkarma/vv66Z/11/](http://jsfiddle.net/goatkarma/vv66Z/11/)

并将标签项的标记类设置为“绿色”（在 CSS 中定义）。

```
badgeCls: 'green' 
```

呈现应用程序时，该类中缺少“green”类：

```
<span style="" class="x-badge" id="ext-element-20">!!</span> 
```

在检查器中的类中添加“绿色”确实会改变颜色，所以看起来我使用了“badgeCls”不正确，或者它只是坏了！有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T15:36:08.963

我为`Ext.tab.Panel`. 我希望这可以帮助你。

## 更新

*   *现在像预期的那样工作:)*
*   *badgeCls 不能将数组作为参数*（如果您想要此功能，请告诉我；））

覆盖：

```
Ext.define('My.tab.Panel', {
    override: 'Ext.tab.Panel',

    onItemAdd: function(card) {
        var me = this;
        if (!card.isInnerItem()) {
            return me.callParent(arguments);
        }
        var tabBar = me.getTabBar(),
            initialConfig = card.getInitialConfig(),
            tabConfig = initialConfig.tab || {},
            tabTitle = (card.getTitle) ? card.getTitle() : initialConfig.title,
            tabIconCls = (card.getIconCls) ? card.getIconCls() : initialConfig.iconCls,
            tabHidden = (card.getHidden) ? card.getHidden() : initialConfig.hidden,
            tabDisabled = (card.getDisabled) ? card.getDisabled() : initialConfig.disabled,
            tabBadgeText = (card.getBadgeText) ? card.getBadgeText() : initialConfig.badgeText,
            tabBadgeCls = (card.getBadgeCls) ? card.getBadgeCls() : initialConfig.badgeCls,
            innerItems = me.getInnerItems(),
            index = innerItems.indexOf(card),
            tabs = tabBar.getItems(),
            activeTab = tabBar.getActiveTab(),
            currentTabInstance = (tabs.length >= innerItems.length) && tabs.getAt(index),
            tabInstance;
        if (tabTitle && !tabConfig.title) {
            tabConfig.title = tabTitle;
        }
        if (tabIconCls && !tabConfig.iconCls) {
            tabConfig.iconCls = tabIconCls;
        }
        if (tabHidden && !tabConfig.hidden) {
            tabConfig.hidden = tabHidden;
        }
        if (tabDisabled && !tabConfig.disabled) {
            tabConfig.disabled = tabDisabled;
        }
        if (tabBadgeText && !tabConfig.badgeText) {
            tabConfig.badgeText = tabBadgeText;
        }
        if (tabBadgeCls && !tabConfig.badgeCls) {
            tabConfig.badgeCls = Ext.baseCSSPrefix + 'badge ' + tabBadgeCls;
        }
        //<debug warn>
        if (!currentTabInstance && !tabConfig.title && !tabConfig.iconCls) {
            if (!tabConfig.title && !tabConfig.iconCls) {
                Ext.Logger.error('Adding a card to a tab container without specifying any tab configuration');
            }
        }
        //</debug>
        tabInstance = Ext.factory(tabConfig, Ext.tab.Tab, currentTabInstance);
        if (!currentTabInstance) {
            tabBar.insert(index, tabInstance);
        }
        card.tab = tabInstance;
        me.callParent(arguments);
        if (!activeTab && activeTab !== 0) {
            tabBar.setActiveTab(tabBar.getActiveItem());
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T23:25:11.673

我认为这是一个在 ExtJS 6.2.x 中仍然存在的疏忽，但似乎有一种更简单的方法，而不是猴子修补和/或覆盖类的默认行为（升级到未来版本时往往会中断）。

线索在这里：

```
tabConfig = initialConfig.tab || {},
...
tabInstance = Ext.factory(tabConfig, Ext.tab.Tab, currentTabInstance); 
```

`tab`如果您使用要添加到选项卡面板的任何组件指定配置对象，它会从该配置对象开始实例化，`Ext.tab.Tab`而不是默认为空 dict 并将其从其他选项拼凑在一起。

```
tab: {
  badgeText: 'My text',
  badgeCls: 'x-badge green'
} 
```

请注意，如果要保留默认样式，您仍然必须指定“x-badge”类。

# mysql - MySQL 创建函数失败

> ID：15548492
> 
> 赞同：2
> 
> 时间：2013-03-21T13:08:23.230
> 
> 标签：mysql, sql, function

这

```
CREATE FUNCTION getTagID(tag VARCHAR(100)) RETURNS BIGINT

BEGIN
DECLARE tagID BIGINT;
            SET tagID = (SELECT id FROM tags WHERE text = tag);
IF tagID IS NULL
THEN
            (INSERT INTO tags (text) VALUES (tag));
            SET tagID = (SELECT LAST_INSERT_ID());
END IF;
RETURN tagID;
END 
```

失败了

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 4 行的 '' 附近使用正确的语法

为什么？

此功能与此处的问题有关：

[如果连接表上不存在mysql插入](https://stackoverflow.com/questions/15519975/mysql-insert-if-not-exists-on-joined-tables/15526382?noredirect=1#15526382)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:09:25.267

尝试更改并删除语句`DELIMITER`周围的括号。`INSERT`

```
DELIMITER $$
CREATE FUNCTION getTagID(tag VARCHAR(100)) 
RETURNS BIGINT
BEGIN
    DECLARE tagID BIGINT;
    SET tagID = (SELECT id FROM tags WHERE text = tag);
    IF tagID IS NULL THEN
        INSERT INTO tags (text) VALUES (tag); -- don't put inside parenthesis
        SET tagID = (SELECT LAST_INSERT_ID());
    END IF;
    RETURN tagID;
END $$
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:11:04.350

键入以将分隔符设置为`;;`：

```
DELIMITER ;;

CREATE FUNCTION getTagID(tag VARCHAR(100)) RETURNS BIGINT
BEGIN
  DECLARE tagID BIGINT;
  SET tagID = (SELECT id FROM tags WHERE text = tag);
  IF tagID IS NULL
  THEN
    INSERT INTO tags (text) VALUES (tag);
    SET tagID = (SELECT LAST_INSERT_ID());
  END IF;
  RETURN tagID;
END;;

DELIMITER ; 
```

MySQL客户端（不是服务器）使用分隔符将输入拆分为单独的查询。默认分隔符是`;`MySQL 客户端向服务器发送以下查询：

```
CREATE FUNCTION getTagID(tag VARCHAR(100)) RETURNS BIGINT

BEGIN
DECLARE tagID BIGINT 
```

这是不完整的，因此不正确。

# iphone - 在 iPhone 应用程序中以丹麦语设置输入位置时，Google API 出错

> ID：15548495
> 
> 赞同：9
> 
> 时间：2013-03-21T13:08:28.457
> 
> 标签：iphone, ios, localization, google-api

我正在使用 Google API 从地址位置查找纬度经度。并且它在英语语言设置中工作正常。但是当在国际化中选择丹麦语设置时，它会从“谷歌”给出一个服务器错误。正如我认为可能需要在应用程序中进行本地化，但如何？

![当语言选择为丹麦语并由 Google API 给出响应时](../Images/548931b0258e7f5c8cdf7f9e0b55f973.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T10:44:08.500

我不确定 AFNetworking，但我会使用 Apple 的 NSURL 进行如下操作。

假设你的 URL 是一个名为“googlapiurl”的字符串，你的 NSURL 应该被初始化为：

```
[NSURL URLWithString:[googlapiurl stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]]; 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-17T10:42:25.743

穆罕默德在上面给出了答案，但我会借此机会解释（我认为）问题是什么，因为几周前我在实时生产代码中遇到了这个问题。

`NSURL`对于带有“特殊”内容（例如 UTF）的未转义字符串来说，这是完全糟糕的。我要做的第一件事是检查`NSURL`您是否返回`nil`。

做`NSURL`字符串的方法是`stringByAddingPercentEscapesUsingEncoding`在传入字符串之前使用。

这个简单的例子说明了这一点：

```
NSString *string = @"http://test.com/teståäötest";

NSLog(@"url with string! %@", [NSURL URLWithString:string]);
NSLog(@"url with escaped string! %@", [NSURL URLWithString:
  [string stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]); 
```

带输出

```
url with string! (null)
url with escaped string! http://test.com/test%C3%A5%C3%A4%C3%B6test 
```

# grammar - Xtext：使用令牌系列的布尔功能

> ID：15548500
> 
> 赞同：1
> 
> 时间：2013-03-21T13:08:40.400
> 
> 标签：grammar, xtext

如您所知，可以制作一个布尔功能，例如

```
tokenExist ?= 'TOKEN'? 
```

我怎么知道消耗了多个这样的令牌：

```
tokensExist ?= ('TOKENONE' 'TOKENTWO')? 
```

这在 Xtext 中无效。

我当前的解决方案方法如下所示：

```
(tokensExist ?='TOKENONE' 'TOKENTWO')? 
```

有效，但并未真正表达其含义

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:23:05.667

你的方法没问题。您将序列中第一个（或任何其他）标记的存在保存到`tokensExist`布尔字段。解析器保证其他标记的存在和顺序。

# python - 使用networkx的节点标签

> ID：15548506
> 
> 赞同：15
> 
> 时间：2013-03-21T13:09:08.070
> 
> 标签：python, matplotlib, networkx

我正在根据给定的 Y 值序列创建一个图表`curveSeq`。（自动枚举 X 值：0,1,2...）

即对于`curveSeq = [10,20,30]`，我的图表将包含以下点：

```
<0,10>, <1,20>, <2,30>. 
```

`nx.Graph`为了在一张图片中呈现所有内容，我在同一上面绘制了一系列图表。

我的问题是：

*   每个节点都显示其位置。即 location 中的节点`<0,10>`显示其各自的标签，我不知道如何删除它。
*   我想向某些特定节点添加标签，但我不知道如何。

例如，对于序列：

```
[0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1,1] 
```

收到的图表是：

![图形](../Images/d83c054a684dc01b7e7963b7f8229e36.png)

代码是：

```
for point in curveSeq:
                cur_point = point
                #assert len(cur_point) == 2
                if prev_point is not None:
                    # Calculate the distance between the nodes with the Pythagorean
                    # theorem
                    b = cur_point[1] - prev_point[1]
                    c = cur_point[0] - prev_point[0]
                    a = math.sqrt(b ** 2 + c ** 2)
                    G.add_edge(cur_point, prev_point, weight=a)
                G.add_node(cur_point)
                pos[cur_point] = cur_point
                prev_point = cur_point
            #key:
            G.add_node((curve+1,-1))
            pos[(curve+1,-1)] = (curve+1,-1)

            nx.draw(G, pos=pos, node_color = colors[curve],node_size=80)
            nx.draw_networkx_edges(G,pos=pos,alpha=0.5,width=8,edge_color=colors[curve])

     plt.savefig(currIteration+'.png') 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-21T14:11:40.507

您可以添加`with_labels=False`关键字来禁止使用 绘制标签`networkx.draw()`，例如

```
networkx.draw(G, pos=pos, node_color=colors[curve],
    node_size=80, with_labels=False) 
```

然后绘制特定标签

```
networkx.draw_networkx_labels(G,pos, labels) 
```

其中标签是将节点ID映射到标签的字典。

看看这个例子：[https ://networkx.org/documentation/stable/auto_examples/drawing/plot_labels_and_colors.html](https://networkx.org/documentation/stable/auto_examples/drawing/plot_labels_and_colors.html)

# php - 使用 PHP 的 SOAP 请求不起作用 - PHP getLastRequest 没有回答

> ID：15548507
> 
> 赞同：0
> 
> 时间：2013-03-21T13:09:09.080
> 
> 标签：php, soap, soap-client

我们正在将 Web 服务写入 UNIFACE 9.3。我们的服务提供 WSDL。我们使用 SOAPUi 进行第一次测试，我们想使用 PHP 进行更多测试，但是 PHP 什么也没给我们！为什么？

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"    xmlns:urn="urn:uniface:applic:wrapped:services:WEBSOAPWSV">
<soapenv:Header/>
<soapenv:Body>
    <urn:INFO>
        <urn:SP_IN>OCCURRENCE=TEST</urn:SP_IN>
    </urn:INFO>
</soapenv:Body>
</soapenv:Envelope> 
```

这是我们的 PHP 测试集：

```
$client = new SoapClient("http://patch-server:8080/uniface/services/websoapwsvdlw?wsdl");
var_dump($client->__getFunctions());
$args = array('OCCURRENCE', 'TEST');
$result = $client->__soapCall('INFO', $args);
echo "Request:\n" . $client->__getLastRequest() . "\n"; 
```

PHP-getFunctions 提供了这个：

```
array(6) {
[0]=> string(41) "ACCEPTResponse ACCEPT(ACCEPT $parameters)"
[1]=> string(35) "EXECResponse EXEC(EXEC $parameters)"
[2]=> string(35) "INFOResponse INFO(INFO $parameters)"
[3]=> string(41) "INSERTResponse INSERT(INSERT $parameters)"
[4]=> string(35) "QUITResponse QUIT(QUIT $parameters)"
[5]=> string(41) "UPDATEResponse UPDATE(UPDATE $parameters)" } 
```

答案是什么都没有！为什么？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T13:47:34.830

```
$client = new SoapClient($url, array("trace" => 1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T08:15:36.740

我真的不知道 SOAP，我刚刚自己在这里问了一个关于 SOAP 调用的问题，但是如果您将该代码稍微更改为：

```
// change here
$options        = array( 'trace' => 1, 'exceptions' => 1);

$client = new SoapClient("http://patch-server:8080/uniface/services/websoapwsvdlw?wsdl", $options);

var_dump($client->__getFunctions());
$args = array('OCCURRENCE', 'TEST');

// change here..
$result = $client->INFO($args);
echo "Request:\n" . $client->__getLastRequest() . "\n"; 
```

# php - php邮件功能在yii中不起作用

> ID：15548513
> 
> 赞同：1
> 
> 时间：2013-03-21T13:09:27.930
> 
> 标签：php, yii

PHP 邮件功能在 yii 框架中不起作用 www.test.com/index.php?r=Email

```
class EmailController extends Controller {
    public function actionIndex(){
       $this->sendEmail();
    }
    public function sendEmail(){
        mail('test@gmail', 'hello', 'today i am very unhappy');
    } 

} 
```

但是邮件功能在简单的文件示例 www.test.com/email-test.php 中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:06:35.747

好的，如果您的电子邮件功能不适用于 www.test.com/index.php?r=Email 但适用于 www.test.com/email-test.php 而不是与主配置中的 URL 规则有关文件。

尝试以下操作；

```
'urlManager'=>array(
        'urlFormat'=>'path',
                    'showScriptName'=>false,
                    'caseSensitive'=>false,
        'rules'=>array(
                        'gii'=>'gii',
                   '<controller:\w+>/<id:\d+>'=>'<controller>/view',
                        '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>', 
                        '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
                        '<action>'=>'site/<action>',
        ),
    ), 
```

或试试这个

```
'urlManager'=>array(
        'urlFormat'=>'path',
        'rules'=>array(
            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
        ),
    ), 
```

这在受保护的主配置文件中。

# telerik-reporting - Telerik Report Viewer 页码框采用字母而不是数字

> ID：15548514
> 
> 赞同：0
> 
> 时间：2013-03-21T13:09:30.487
> 
> 标签：telerik-reporting

我正在使用 Telerik 报告 2012 年第三季度。在我们可以手动输入页码的报告查看器中，该页码框采用字母，而它应该只采用数字。

如何将输入限制为仅数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T20:41:44.343

Talal，看起来 2013 年第一季度的版本修复了这个问题。我创建了一个 WinForms 应用程序，但无法在页码框中输入数字。

# php - 标头已在远程服务器上发送，而不是在本地

> ID：15548517
> 
> 赞同：0
> 
> 时间：2013-03-21T13:09:35.623
> 
> 标签：php, cookies, http-headers

我已经实现了“记住我的功能”，`$_COOKIE`并在我开发它的 LAMP 机器上运行良好。

但是后来我将代码上传到远程服务器，它给了我这个错误

```
Warning:  Cannot modify header information - headers already sent 
```

执行时

```
setcookie('_temp',$val, time()+$cookie_time); 
```

我不明白为什么它在我的机器上工作，但不在远程服务器上......

谢谢！

PS我已经仔细检查了所有代码似乎都一样......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:15:48.720

Cookie 是通过 HTTP 标头设置的，因此 setcookie() 必须在发送标头之前发生（这意味着在任何输出之前）。你得到的警告应该告诉你输出开始的确切行。

# windows-runtime - 如何更改windows 8 rt中应用程序的图标？

> ID：15548518
> 
> 赞同：1
> 
> 时间：2013-03-21T13:09:39.930
> 
> 标签：windows-runtime, icons, winrt-xaml

我想在windows 8 rt应用程序中更改应用程序的默认图标，在应用程序的属性页面中，图标源被禁用，如何将其更改为新图片？ ![在此处输入图像描述](../Images/f037647797eb2fe40dd38fcf181f447a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:13:49.353

转到解决方案资源管理器。在解决方案资源管理器中找到您的项目文件夹。然后找到“Package.appxmanifest”那下。您可以在 Package.appxmanifest 中编辑您想要的所有内容。

# bash - 解压 tgz 文件后重命名目录

> ID：15548525
> 
> 赞同：1
> 
> 时间：2013-03-21T13:09:56.580
> 
> 标签：bash, shell, gzip, tar

我有一堆 *.tgz 文件，当我解压它们时，目录名称与 tgz 文件的名称有何不同。示例：我有 ab.tgz 文件，它被更改为 2012_test_ab 之类的东西，我感觉会发生这种情况，因为在压缩文件期间必须重命名此压缩文件位于父目录等中。

但我想要做的是将目录重命名为文件的原始名称。

我有以下一行脚本可以在终端上运行，但是如何重命名？

```
for i in *.tgz; do tar xvf $i -C ../stats/; done 
```

如何修改它以重命名正在解压缩的目录。

示例：当我解压缩`ab.tgz`它时，它被提取到目录名称 is`2013_03_12_18_26_ab`和该目录中的文件，但我想要做的是将目录名称保留为 ab 而不是`2013_03_12_18_26_ab`

我想`ab.tgz`提取到`../stats/ab`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:20:37.547

这样的事情可能会奏效。不过现在还早，所以我的语法可能有点不对劲。

```
for i in *.tgz
do 
NEWDIR=`tar -tf $i | head -1 | cut -d/ -f2 | cut -d_ -f6` 
mkdir ../stats/$NEWDIR 
tar xvf $i -C ../stats/$NEWDIR/ 
done 
```

或者

```
for i in *.tgz; do NEWDIR=`tar -tf $i | head -1 | cut -d/ -f2 | cut -d_ -f6`; mkdir ../stats/$NEWDIR; tar xvf $i -C ../stats/$NEWDIR/; done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:57:31.653

假设您所有的 tar 档案都以 .tgz 扩展名结尾，并且原始文件名中可能有多个点，那么：

```
for i in *.tgz; do tname=$(echo $i | sed -e 's/.tgz//') ; tar xvf $i -C ../stats/$tname; done 
```

# sql - 适用于 MS Access 开发人员的 Oracle 提示/原则/进一步阅读

> ID：15548531
> 
> 赞同：1
> 
> 时间：2013-03-21T13:10:05.917
> 
> 标签：sql, oracle, ms-access, plsql

我的任务是将我创建的成熟的 MS Access 应用程序转换为 Oracle 应用程序。Access 数据库包括大约十几个表和另外十几个查询，其中包括一些我必须用来有效地对事物进行排名的 VBA 逻辑。我也有带有 VBA 的表单来运行查询。我的目标是在 Oracle 服务器上重新创建此应用程序，设置相同类型的表和查询，并使用 Application Express 进行用户输入。这不会是一个有很多用户的环境，但有时可能有 2-3 个人访问同一个数据库。

我的问题是：作为 MS Access 应用程序的开发人员，您能否推荐任何可以让我了解开发 Oracle 应用程序的设计和方法的主要差异的快速指南（而不是完整的书籍）？我正在考虑诸如存储过程、视图、事务之类的东西，以及在 MS Access 中不可用的东西。最后，我需要知道如何让不同的用户根据需要使用表单来编辑和导入数据到数据库，并运行相同的查询并生成特定于每个用户的输出表（所以不要写入相同的每次表）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T13:53:41.457

那么这里要做的就是搭建一个Oracle Application Express 系统，没有Oracle 的经验？这真是个大问题。

像 MS Access 这样的基于文件的系统和像 Oracle 这样的“适当的” RDBMS 之间的差异足以让您长时间学习。

如果您要做好这方面的工作，那么您必须从了解 Oracle 开始，我建议您从文档开始：[http ://www.oracle.com/pls/db112/homepage](http://www.oracle.com/pls/db112/homepage)

具体来说，从头到尾阅读概念指南：[http ://www.oracle.com/pls/db112/to_toc?pathname=server.112/e25789/toc.htm](http://www.oracle.com/pls/db112/to_toc?pathname=server.112/e25789/toc.htm)

然后至少好好看看SQL Reference，因为数据类型，表和索引类型，以及SQL函数与MS Access有很大不同： [http ://www.oracle.com/pls/db112/to_toc?pathname= server.112/e26088/toc.htm](http://www.oracle.com/pls/db112/to_toc?pathname=server.112/e26088/toc.htm)

然后在为期 2 天的 Apex 开发人员指南中试一试：[http ://www.oracle.com/pls/db112/to_toc?pathname=appdev.112/e11946/toc.htm](http://www.oracle.com/pls/db112/to_toc?pathname=appdev.112/e11946/toc.htm)

祝你好运！

# asp.net - 验证视图状态 MAC 失败错误。

> ID：15548532
> 
> 赞同：1
> 
> 时间：2013-03-21T13:10:06.433
> 
> 标签：asp.net, webforms, viewstate, auto-generate, machinekey

我用一些 ASPX-C# 页面构建了一个网站，我添加了一个带有表单的新页面。问题是当我单击提交时，我收到以下错误：

> 视图状态 MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保配置指定相同的 validationKey 和验证算法。AutoGenerate 不能在集群中使用。

所有其他页面中的表单都可以正常工作，但是在此特定页面中提交后 - 表单无法正常工作，并且所有表单都出现此错误。我试图在网上搜索解决方案，但我找到的解决方案似乎不起作用。:(

**更新** 我把这段代码放在网页配置页面中，问题解决了：

```
<pages enableViewStateMac="false" /> 
```

**但是**PostBack 命令现在不能正常工作。

我的问题是为什么，我该如何解决？

请帮助我，我必须尽快解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:24:42.053

对于初学者来说，添加这个`web.config`并检查它是否工作：

```
<machineKey decryptionKey="A4B12CCDD50E95F8GB9GFH6JKAT4Y0U0I2OF2DF2AAFE5AB46189C,IsolateApps" 
            validation="AES" 
            validationKey="480CDF2AS9S9AS5CFDGF0GHFH9JJH4KHKAKLJ2L9F3SAS82A6C16911A29EF48903783F94529C21570AACB72766FB38CD4CE7B85B0ACE3149DC5FC1CCF1AA1CECE3579659996593B06,IsolateApps"/> 
```

检查[此](https://stackoverflow.com/questions/5647525/validation-of-viewstate-mac-failed)以获取更多详细信息

# perl - Perl：如何捕获 Expect.pm 的输出？

> ID：15548535
> 
> 赞同：0
> 
> 时间：2013-03-21T13:10:13.000
> 
> 标签：perl, glob

我编写了一段 perl 代码来使用 Expect.pm 生成 ssh 密钥。该代码可以按预期创建密钥。但我不知道如何从输出中捕获**指纹**。

```
use Expect;

my $passwd = "abcdefg";
my $keyFile = './mykey';
my $cmd = qq/ssh-keygen -t rsa -b 2048 -C "my comments" -f $keyFile/;
print "\nCMD: $cmd\n\n";
my @output;
my $session=Expect->spawn($cmd) or die "Error calling external program:  $!\n";
unless ($session->expect(5,"Enter passphrase \(empty for no passphrase\): ")) {};
print $session "$passwd\r";
unless (@output = $session->expect(5,"Enter same passphrase again: ")) {}; # Capture the output
print $session "$passwd\r";
$session->soft_close();
my $i = 1;
foreach my $e (@output) {
    if($e) {
        print "\$i = $i, Type of \$e: #". ref($e) . "#, Value of \$e: #$e#\n";
    }
    else {
        print "$i, NULL Element!\n";
    }
    $i++;
}
exit; 
```

下面是输出：

```
% ./test.pl

CMD: ssh-keygen -t rsa -b 2048 -C "my comments" -f ./mykey
Generating public/private rsa key pair.
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in ./mykey.
Your public key has been saved in ./mykey.pub.
**The key fingerprint is:
df:aa:35:19:28:06:0e:97:ec:6d:83:26:b9:01:4f:50** my comments
The key's randomart image is:
+--[ RSA 2048]----+
|..E              |
| . . .           |
|. o =            |
| + * +   .       |
|  = = * S .      |
|   = o o . +     |
|  .       = .    |
|         . o     |
|        ...      |
+-----------------+
$i = 1, Type of $e: ##, Value of $e: #1#
2, NULL Element!
$i = 3, Type of $e: ##, Value of $e: #Enter same passphrase again: #
$i = 4, Type of $e: ##, Value of $e: #
#
5, NULL Element!
$i = 6, Type of $e: #Expect#, Value of $e: #Expect=GLOB(0x1e74b38)# 
```

我猜信息在 Glob 中？但是如何解析 Glob？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T09:50:51.510

以下应该可以工作，或者至少您应该能够根据您的需要对其进行修改。我正在等待指纹后打印的字符串“我的评论”，然后使用 *exp_before* 方法读取指纹。

```
use strict;
use Expect;

my $passwd = "abcdefg";
my $keyFile = './mykey';

my $cmd = qq/ssh-keygen -t rsa -b 2048 -C "my comments" -f $keyFile/;

my $session=Expect->spawn($cmd) or die "Error calling external program:  $!";    

my $output;        
$session->expect(10,
  [ qr/passphrase/i, sub { my $self = shift;
      $self->send("$passwd\n");
      exp_continue; }],
  [ qr/my comments/i, sub { my $self = shift;
      $output = $self->exp_before;
      exp_continue; }],
);

      print $output;

$session->soft_close; 
```

# mysql - 使用映射器错误从电梯应用程序连接数据库

> ID：15548541
> 
> 赞同：0
> 
> 时间：2013-03-21T13:10:25.797
> 
> 标签：mysql, database, scala, lift, mapper

我正在尝试将我的电梯应用程序连接到数据库。我有以下代码来执行操作。我已经下载了 lift-mapper_2.9.1 并将其包含到我的应用程序中，并且我在 boot.scala 中给出了以下代码

```
import net.liftweb.mapper.{DB,Schemifier,DefaultConnectionIdentifier,StandardDBVendor,MapperRules}

class boot{
  def boot{
    ......
    .......
   }
      object Database extends StandardDBVendor(
    Props.get("db.class").openOr("com.mysql.jdbc.Driver"),
    Props.get("db.url").openOr("jdbc:mysql://localhost/scalatest"),
    Props.get("db.user"),
    Props.get("db.pass"))
 } 
```

我已经在 src/main/resources/props/default.props 文件中设置了 db.class 和其他属性。但是这里的第一行显示了一个错误，

```
 Multiple markers at this line
- bad symbolic reference. A signature in package.class refers to term db in package net.liftweb which is not available. It may be completely 
 missing from the current classpath, or the version on the classpath might be incompatible with the version used when compiling package.class.
- too many arguments for constructor Object: ()Object 
```

我不知道我做错了什么。可以给个建议。提前谢谢。

# xml - 测试 XML 元素时如何让 XSL 忽略 xmlns 前缀

> ID：15548544
> 
> 赞同：2
> 
> 时间：2013-03-21T13:10:28.870
> 
> 标签：xml, xslt, xml-namespaces

我创建了一个与各种服务器上的 Web 服务对话的客户端，并尝试使用 XSL 格式化 XML。这些服务都是根据相同的规范创建的，因此它们发出的 XML 具有相同的格式和 xmlns 命名空间名称。我的 XSL 需要测试特定类型的元素以了解如何格式化它们。问题是在服务器之间，它们使用不同的 xmlns 前缀。我一直在使用的测试是纯字符串比较，并没有将前缀扩展为完整的 xmlns，因此比较失败。我的问题是，有没有办法扩展前缀以便字符串比较起作用？

这是一个简化的例子来说明问题。在“xsl:if test”行中，我需要将“r0”和“xx”扩展为“ [http://www.foo.com/2.1/schema](http://www.foo.com/2.1/schema) ”，以便它们测试相同：

XSL：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:r0="http://www.foo.com/2.1/schema"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsl:template match="/">
<html>
<head>
  </head>
     <body >
        <xsl:for-each select="MyResp/r0:creditVendReceipt/r0:transactions/r0:tx">
          <xsl:if test="@xsi:type='r0:CreditTx'">
                <xsl:value-of select="r0:amt/@value"/>(CR)
          </xsl:if>
          <xsl:if test="@xsi:type='r0:DebitTx'">
                <xsl:value-of select="r0:amt/@value"/>(DB)
          </xsl:if>
        </xsl:for-each>
      </body>
    </html>
  </xsl:template>
</xsl:stylesheet> 
```

XML（这有效）：

```
<?xml version="1.0" encoding="unicode"?>
<MyResp xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns:r0="http://www.foo.com/2.1/schema" 
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<r0:creditVendReceipt receiptNo="1234567890">
    <r0:transactions>
        <r0:tx xsi:type="r0:CreditTx">
            <r0:amt value="100" />
        </r0:tx>
        <r0:tx xsi:type="r0:DebitTx">
            <r0:amt value="50" />
        </r0:tx>
    </r0:transactions>
</r0:creditVendReceipt>
</MyResp> 
```

XML（失败）：

```
<?xml version="1.0" encoding="unicode"?>
<MyResp xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns:xx="http://www.foo.com/2.1/schema" 
xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<xx:creditVendReceipt receiptNo="1234567890">
    <xx:transactions>
        <xx:tx xsi:type="xx:CreditTx">
            <xx:amt value="100" />
        </xx:tx>
        <xx:tx xsi:type="xx:DebitTx">
            <xx:amt value="50" />
        </xx:tx>
    </xx:transactions>
</xx:creditVendReceipt>
</MyResp> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:02:41.713

在 XSLT 2.0 中你可以做

```
<xsl:if test='resolve-QName(@xsi:type, .) = 
              QName("http://www.foo.com/2.1/schema", "CreditTx")'> 
```

一个比 JLRishe 的 XSLT 1.0 更完整的解决方案是这样的

```
<xsl:if test="substring-after(@xsi:type, ':') = 'CreditTx' and 
                 namespace::*[name()=substring-before(@xsi:type, ':')] =     
                    'http://www.foo.com/2.1/schema'"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:57:49.177

在 XSLT 2.0 中你可以做

```
<xsl:if test='resolve-QName(@xsi:type, .) = 
              QName("http://www.foo.com/2.1/schema", "CreditTx")'> 
```

# git - 在 Windows 上使用 git 发布多模块 maven 项目

> ID：15548545
> 
> 赞同：3
> 
> 时间：2013-03-21T13:10:35.687
> 
> 标签：git, maven, maven-2, maven-release-plugin, git-bash

`pom.xml`我为多模块 maven 项目配置了 maven2 发布插件。该项目位于单个 git 存储库中。释放过程在 Windows 上不起作用。

在*git bash*下，我总是收到`fatal: 'C:\<PATH>\pom.xml' is outside repository`parent 的错误消息`pom.xml`。已`pom.xml`到位，并且之前已添加到存储库中。我认为由于反斜杠路径分隔符，git 无法找到它。

我还尝试在默认*cmd*下使用发布插件。在发布过程结束时 git push 挂起。我想，它正在等待*ssh*密码。在*cmd*下我无法配置*ssh*代理，因此我必须以交互方式输入每种类型的密码。我还尝试将密码添加为命令行参数，没有任何改变。

我还尝试设置`pushChanges`选项以`false`防止自动推送，它也挂了。

父母的相关部分`pom.xml`：

```
<properties>
    <maven.build.timestamp.format>yyyy-MM-dd</maven.build.timestamp.format>
    <timestamp>${maven.build.timestamp}</timestamp>
</properties>

<scm>
    <connection>scm:git:ssh://<host>/<project>.git</connection>
    <url><gitweb url></url>
</scm>

<!-- more here -->

        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-release-plugin</artifactId>
          <version>2.4</version>
          <configuration>
              <tagNameFormat>
                  release-${timestamp}-v@{project.version}
              </tagNameFormat>
              <autoVersionSubmodules>true</autoVersionSubmodules>
              <pushChanges>false</pushChanges>
           </configuration>
           <executions>
              <execution>
              <id>default</id>
              <goals>
                <goal>prepare</goal>
              </goals>
           </execution>
          </executions>
        </plugin> 
```

我运行这个命令：

```
mvn release:prepare -B 
```

有没有机会在 Windows 上使用带有 git 的发布插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:45:59.883

请尝试`<developerConnection>scm:git:ssh://<host>/<project>.git</developerConnection>`

# jquery - cfajax jquery javascript

> ID：15548548
> 
> 赞同：-1
> 
> 时间：2013-03-21T13:10:44.277
> 
> 标签：jquery, coldfusion, cfml

我在很多文本输入字段上使用 Jquery datepicker。它不工作。我在一个包含文件中有我的 javascrippt 并做一个 savecontent 以便我可以使用 cfhtmlhead。开发工具控制台显示错误；

```
<script type="text/javascript">/* <![CDATA[ */
ColdFusion.Event.registerOnLoad(initCandidateScript,null,false,true);
// Uncaught ReferenceError: initCandidateScript is not defined  <---------console error
/* ]]> */
</script>

<cfajaximport tags="cfgrid,cfform,cfinput-autosuggest,cfinput-  datefield,cftextarea,cfwindow">
<style>
#ui-datepicker-div { z-index:10000; } 
</style>
<cfsavecontent variable="JobAdScript">
<script language=JavaScript src="picker.js"></script> 
<script language=JavaScript src="JobAdsJavascript.js"></script> 
</cfsavecontent>
<cfhtmlhead text="#JobAdScript#" />
<cfset ajaxOnLoad("initCandidateScript")> 
```

这段代码在include js文件中；

```
$(document).ready(function () {
    function initCandidateScript() {
        $(function () {
            alert('starting');
            $('input.datestuff').datepicker({
                dateFormat: 'yy/mm/dd'
            });
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:12:16.527

您需要将`initCandidateScript`定义移到文档就绪事件回调之外。在 DOM 准备好之前延迟函数*定义*是没有意义的。

除此之外，CF JavaScript 框架似乎会延迟该函数的执行，直到一切准备就绪并加载。

因此，只需在 .js 文件中定义这样的函数 - 无需使用 DOM 就绪事件包装它。

```
function initCandidateScript() {
    $(function() {
        alert('starting');
        $('input.datestuff').datepicker({
            dateFormat: 'yy/mm/dd'
        });
    });
} 
```

实际上，您可以进一步简化它，因为现在您的函数中有*另一个*DOM 就绪回调，您不需要它：

```
function initCandidateScript() {
    $('input.datestuff').datepicker({
        dateFormat: 'yy/mm/dd'
    });
} 
```

# c# - 装配的配置文件

> ID：15548549
> 
> 赞同：-1
> 
> 时间：2013-03-21T13:10:46.763
> 
> 标签：c#, .net, dll, configuration

我的类库程序集有一个配置文件。

我知道这是错误的，但它必须是这样的。

当我构建类库项目时，配置文件被复制到输出目录。但是，当我使用我正在使用此库的项目构建整个解决方案时，它不会将`.dll.config`文件复制到主项目。

也许有人知道如何强制 Visual Studio 将其复制`.dll.config`到正在执行程序集的主项目中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:15:44.887

要将任何文件复制到输出目录，您需要编辑文件属性并设置`Copy To Output Directory`为`Copy always`或`Copy if newer`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:48:39.063

即使您将 .dll.config 文件复制到输出目录，它仍然不会被应用程序使用。

这里唯一的解决方案是将该文件中的配置设置合并到您的主项目配置文件中。

您可以将 .dll.config 文件视为必须复制到调用应用程序配置文件中的配置设置集合。有点像留给在项目中使用该程序集的其他开发人员的便条。

# c++ - 使用 sub str 在 C++ 中搜索向量

> ID：15548552
> 
> 赞同：0
> 
> 时间：2013-03-21T13:10:50.350
> 
> 标签：c++, visual-studio-2010

仔细查看该网站，似乎无法找到我正在寻找的具体答案。我需要读入一个包含几行不重要文本的文本文件。这是逐字存储在向量中的。我有另一个文本文件，其中包含我也存储到向量中的单词列表。

我要做的任务是浏览第一个文本文件并用 4 个问号“????”替换第二个文件中的单词。

出现的问题是第一个文件中的某些单词包含标点符号，当我将这些单词与第二个单词文件进行比较时，由于这个标点符号，它没有找到它。

根据我的研究，使用子字符串似乎是消除标点符号问题的最佳选择。

我以前没有一起使用子字符串和向量的经验，我真的无法理解所需的代码。下面的代码：

```
 infile.open ( "textone.txt" );
infile2.open ( "listofwords.txt" );

vector <string> unfiltered; 
vector <string> abbrevi;
ReadAbbreviations( infile , abbrevi ); 

string words; 
while ( infile2 >> words) 
{
    int index;
    unfiltered.push_back( words ); 
}
for ( int i = 0; i < abbrevi.size(); i++)
{
    for (int j = 0; j < unfiltered.size(); j++)
    {
        if ( abbrevi[i] == unfiltered[j] )
        {
            unfiltered[j] = "????";
        }
    }
for ( int i = 0; i < unfiltered.size(); i++ )
{
    cout << unfiltered[i] << ' ';
}
cout << endl;

infile.close();
infile2.close();
system ( "Pause" ); 
```

# c# - 是否可以在深度嵌套字典上使用 TryGetValue？

> ID：15548558
> 
> 赞同：0
> 
> 时间：2013-03-21T13:11:05.780
> 
> 标签：c#, json, dictionary, json.net, trygetvalue

我想使用 TryGetValue 方法访问字典保险箱上的某个属性。

例如，我将直接访问这样的条目：

```
jsonObject[prop1][prop2][0][prop3] 
```

有什么方便的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:18:28.737

这是一个想法（未经测试）。它确实假设嵌套`IDictionary`的深度至少与指定的键数一样深，并且可以在其中工作`object`（您当然可以做一些事情来使它成为通用的）：

```
bool TryGetNestedValue (this IDictionary dict, out object value, 
    params object[] keys)
{
    for(int i = 0; i < keys.Length; i++)
    {
        var key = keys[i];

        if (!dict.Contains(key))
        {
            value = null;
            return false;
        }

        if (i == keys.Length - 1)
        {
            value = dict[key];
            return true;
        }

        dict = dict[key];
    }

    throw new ArgumentException("keys");
} 
```

# javascript - 每 10 秒执行一次代码，但也从 0 秒开始

> ID：15548559
> 
> 赞同：8
> 
> 时间：2013-03-21T13:11:07.147
> 
> 标签：javascript, setinterval

我想每 10 秒执行一次代码，也想在页面加载时执行一次。我的意思是我希望代码在页面最初加载时执行，然后每 10 秒执行一次。以下代码仅在 10 秒后开始执行代码。

```
window.setInterval(function(){
  /// call your function here
}, 10000); 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T13:11:59.727

你可以这样做 ：

```
(function(){
   var f = function() {
     // do something
   };
   window.setInterval(f, 10000);
   f();
})(); 
```

此处使用[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)是为了避免污染封闭的命名空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T13:12:30.973

首先执行函数，`$.ready`然后使用相同的函数开始间隔。

类似于以下内容：

```
$(function() {
    var f = function() { };

    f();
    window.setInterval(f, 10000);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:12:47.337

不要内联函数，然后立即调用它：

```
window.setInterval(foo, 10000);
foo();

function foo()
{
    //Do Stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T13:12:56.837

我创建[LINK](http://jsfiddle.net/k7dC3/)试试这个

```
functionCall();
function functionCall(){

window.setInterval(function(){
  /// call your function here
}, 10000);
} 
```

# ruby - 怎么形容属于多？

> ID：15548560
> 
> 赞同：1
> 
> 时间：2013-03-21T13:11:08.827
> 
> 标签：ruby, mongoid

我有三个模型类用户、产品和购买。采购描述了订购产品的数量。所以一个购买有一个产品，一个产品可能属于多个购买。但是关于问题的 Mongoid 消息：

```
Mongoid::Errors::InverseNotFound (
Problem:
  When adding a(n) Product to Purchase#product, Mongoid could not determine the inverse foreign key to set. The attempted key was 'purchase_id'.
Summary:
  When adding a document to a relation, Mongoid attempts to link the newly added document to the base of the relation in memory, as well as set the foreign key to link them on the database side. In this case Mongoid could not determine what the inverse foreign key was.
Resolution:
  If an inverse is not required, like a belongs_to or has_and_belongs_to_many, ensure that :inverse_of => nil is set on the relation. If the inverse is needed, most likely the inverse cannot be figured out from the names of the relations and you will need to explicitly tell Mongoid on the relation what the inverse is.

 Example:
   class Lush
     include Mongoid::Document
     has_one :whiskey, class_name: "Drink", inverse_of: :alcoholic
   end

   class Drink
     include Mongoid::Document
     belongs_to :alcoholic, class_name: "Lush", inverse_of: :whiskey
   end): 
```

但是 mongoid 的例子并没有涵盖我的情况，因为我有“属于许多”的关系。

这是我的模型：

```
class Purchase
  include Mongoid::Document

  field :quantity, text: String
  has_one :product
  belongs_to :user
end

class Product
  include Mongoid::Document
  belongs_to :purchases
end

class User
  include Mongoid::Document

  has_many :purchases
end 
```

如何恰当地描述关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T22:27:31.823

@Ajcodez 是对的，您的关系倒退了。但是，如果您实际上是在寻找 belongs_to_many 关系（一个仅在关系的一侧存储 id 的 HABTM），可以通过以下方式实现：

`has_and_belongs_to_many :name, inverse_of: nil`

见：[https ://github.com/mongoid/mongoid/issues/2473](https://github.com/mongoid/mongoid/issues/2473)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:43:23.033

我认为你的关系倒退了。您需要每个`Purchase`文档都包含一个产品的 ID，这意味着`Purchase`属于一个产品。因此`Product`有很多购买。

请记住，每次写入`belongs_to`时，父级的 ID 都会进入文档。你真的不能`belong_to <plural>`。

# dynamics-crm-2011 - 如何将日期转换为 CRM 日期格式？

> ID：15548562
> 
> 赞同：0
> 
> 时间：2013-03-21T13:11:16.337
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm

在使用日期字段时，我得到了一个日期值，例如`/Date(1360879200000)/`. 所以我使用了一些代码来获取日期值：

```
var mills = parseInt(rowDate.substring(6, 19));
    var date = new Date(mills); 
```

在这里`rowDate="/Date(1360879200000)/"`，使用此代码后，我得到了一个日期值，例如`date="Fri Feb 15 03:30:00 UTC+0530 2013"`。

我已将此值添加到文本框。

现在，如果我在此字段中进行一些值更改，如何将此日期值转换为 CRM 支持的值。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:16:37.883

我刚刚完成了我的 CRM，我正在对我的*联系*表单执行以下操作（根本没有转换为整数）。我出生在二月，但希望成为一月的孩子。

```
var control = Xrm.Page.getAttribute("birthdate");
var birthDate;
if(control){
  control.getValue();
}
alert(birthDate);

var fakeDate = new Date(birthDate.toString().replace("Feb", "Jan"));
alert(fakeDate); 
```

编辑：

您可以`Xrm.Page`通过`window.parent.Xrm.Page.etc`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:18:14.103

我找到了一个工作...我有时间从 CRM`/Date(1360879200000)/`中获得了年、月、日、小时、分钟和秒的值。使用这些值，我将日期分隔为`"-"`. 现在在编辑时，我已将日期值发送到以下函数。我开始知道 CRM 将日期格式排除在外，例如：`2011-07-20T16:30:00Z`. 它为我工作。

```
function dateToCRMFormat(date) {
    ///<summary>
    /// function to formate normal date value to CRM supported value
    ///</summary>

    //debugger;

    if (date!="") {
        var DateArray = date.split("-");
        var year = DateArray[0];

        var monthInt = parseInt(DateArray[1], 10);
        var month = "";
        if (monthInt < 10) {
            month = "0" + monthInt.toString();
        } else {
            month = monthInt.toString();
        }

        var dayInt = parseInt(DateArray[2], 10);
        var day = "";
        if (dayInt < 10) {
            day = "0" + dayInt.toString();
        } else {
            day = dayInt.toString();
        }
        if (DateArray[3].length == 1) {
            DateArray[3] = "0" + DateArray[3];
        }
        if (DateArray[4].length == 1) {
            DateArray[4] = "0" + DateArray[4];
        }
        if (DateArray[5].length == 1) {
            DateArray[5] = "0" + DateArray[5];
        }
        var fullDate = year + "-" + month + "-" + day + "T" + DateArray[3] + ":" + DateArray[4] + ":" + DateArray[5] + "Z";
        return fullDate;

    }

} 
```

无论如何，我仍在等待真正的解决方案。

# jquery - jQuery查找选择器未选择数组项

> ID：15548568
> 
> 赞同：1
> 
> 时间：2013-03-21T13:11:46.900
> 
> 标签：jquery

我正在尝试使用 jQuery 查找选择器访问照片列表，但由于某种原因，它似乎无法正常工作。我正在使用 jQuery 1.8。

理想代码：

```
$(this).siblings(images_container).find(photo); 
```

当前代码：

```
$(this).siblings(images_container).children().find(".photo"); 
```

当前的代码也不起作用。选择喜欢的孩子：

```
$(this).siblings(images_container).children() 
```

专辑 ID_3 是 $this

HTML

```
<div class="photo_wrap">
  <a href="#" id="album_id_3">
    <div class="photo_img_wrap">
      <img src="/assets/img/user_images/2_4.jpg">
      <div class="album_photo_count">
        1
      </div>
    </div>
  </a>
  <div class="album_name">
    Untitled
  </div>
  <div style="display: none;" class="images_container">
    <div class="album_description_hidden">
      test
    </div>
    <div class="city_id">
      2
    </div>
    <div class="photo">
      <div class="desc">
      </div>
      <div class="image_id">
        4
      </div>
      <div class="name">
        /assets/img/user_images/2_4.jpg
      </div>
      <div class="status">
         1
      </div>
      <div class="time">
        1363005386
      </div>
    </div>
  </div> 
```

退货

```
jQuery(div.album_description_hidden, div.city_id, div.photo) 
```

但是，当我尝试将 find 添加到它以专门仅抓取带有“.photo”的元素时，jQuery 将返回空。你知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:14:58.787

这是因为`.find()`仅在您正在搜索的元素的子元素中找到。因此，由于 div.photo 是您正在搜索的元素之一，因此它不会出现在结果中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:17:26.067

我会做类似的事情：

```
$(".photo", $(this).parent()) 
```

jQuery 函数可以传递第二个参数，它是一个 Dom 元素，或者选择器来查找下面的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:20:10.933

来自 jQuery API 文档::

> 描述：获取当前匹配元素集中每个元素的后代，由选择器、jQuery 对象或元素过滤。

因此，使用您的代码，您可以获得图像容器的正确子级，然后使用 .. 在它们内部进行搜索。您`.photo`应该对子级本身而不是在它们内部进行过滤。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T13:14:14.567

如果您正在搜索 div.photo 是图像容器的子项，那么您可以这样做..

```
$(this).siblings(images_container).children('div.photo') 
```

无需使用`find()`

**更新**

我想你错过了 images_container 中的课程

```
 $(this).siblings(".images_container").children('div.photo') 
```

或者

你可以做

```
 $(this).parent().find('div.photo'); //parent takes you to `photo_wrap` and find will search `div.photo` inside photo_wrap which it will find 
```

# entity-framework-5 - 将字段映射到 EntityFramework 5 Code First 中的枚举

> ID：15548569
> 
> 赞同：9
> 
> 时间：2013-03-21T13:11:49.163
> 
> 标签：entity-framework-5

所以，我有一堂课如下：

```
public class Message {

        public enum MessageType {
            Text = 0,
            Audio = 1,
            Image = 2
        }

        public int Uid { get; set; }
        public MessageType Type { get; set; }
        public String Text { get; set; }

} 
```

如您所见，Type 字段是一个枚举。我将数据与此类匹配的映射定义如下：

```
public class MessagesMap : EntityTypeConfiguration<Message> {

    public MessagesMap() {

        // Primary Key
        this.HasKey(t => t.Uid);

        // Properties
        this.Property(t => t.Text)
            .HasMaxLength(1000);

        // Table & Column Mappings
        this.ToTable("wc_messages");
        this.Property(t => t.Uid).HasColumnName("UID");
        this.Property(t => t.Type).HasColumnName("Type");
        this.Property(t => t.Text).HasColumnName("Text");

    }
} 
```

但是当我运行代码时，我收到以下错误：

> 属性“类型”不是类型“消息”的声明属性。使用 Ignore 方法或 NotMappedAttribute 数据注释验证该属性是否已从模型中显式排除。确保它是有效的原始属性。

我知道我收到了错误，因为 Type 属性不是原语，而是枚举。但是，如果我理解正确，EF5 支持枚举（并且我的目标是 .NET 4.5 框架），所以我认为我在映射中遗漏了一些没有解释如何转换为枚举的内容，但我不知所措至于那是什么。如果我将字段改回 int 一切正常，只有当字段类型是枚举时，我才会收到错误。

我错过了什么？提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-22T21:00:17.350

所以事实证明我只是愚蠢并且在 POCO 类中声明了我的枚举块并且完全没有注意到它。多亏了@overmachine 的忍者评论（后来消失了），我意识到了这一点，并且将声明移出我的班级导致一切再次正常工作。感恩去他，所到之处，吸取教训要更用心*感叹*

# php - 如何在包含逗号的基础上过滤从数据库中获取的值？

> ID：15548578
> 
> 赞同：2
> 
> 时间：2013-03-21T13:12:16.213
> 
> 标签：php, mysql, sql, magento

我有一些值存储在我的数据库中的“”列中，就像我在下面给定的图片中显示的那样，

![在此处输入图像描述](../Images/edaafe490d92e1cd04b383bcfc5a3e0a.png)

现在，如果您能注意到在第三个位置上我们的值是 Italian,Pizzeria(Pizza)，可能还有更多的值可以包含 COMMA (,) LIKE Italian,Pizzeria(Pizza) 我们可以看到在下面的图片中，

现在我想通过 php 获取所有值（从表名中选择 *），但如果该值包含 COMMA，那么我希望排除该值，有什么方法可以过滤列内容？我只想选择没有任何逗号的值，提前谢谢？直到据我所知可能预匹配，或者数组过滤器可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:17:57.170

正如我从问题中了解到的那样，您只想获取列中不包含逗号符号的`merchant_cuisine`行。然后试试这个查询：`SELECT * FROM tablename WHERE merchant_cuisine NOT LIKE '%,%'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:14:21.393

使用`NOT LIKE`谓词：

```
select *
from tablename
WHERE merchant_cuisine NOT LIKE '%,%'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:15:55.853

您可以在 MySQL 中执行此操作：

```
select * from tablename
where locate(',', merchant_cuisine) = 0 
```

也可以看看：[`LOCATE()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_locate)

# java - junit找不到类

> ID：15548580
> 
> 赞同：0
> 
> 时间：2013-03-21T13:12:18.300
> 
> 标签：java, junit4

1.  我能够运行 junit 提供的示例测试（从任何目录）。我认为这表明我安装的 junit 非常好。

2.  我假设，要编译一个junit测试，它与任何其他java文件没有什么不同，即：javac fileName.java

3.  我的测试文件（.java 和生成的 .class）位于：c:\parent\child。显然，为了编译 .java 文件，我在第一行有一个包语句：package parent.child，然后是最重要的：import junit.framework.TestCase; 在此之后，有一个 public class fileName 定义 extends TestCase {}。该文件编译时没有任何警告或错误。

4.  当我尝试时（在文件名存在的 c:\parent\child 目录中，.java 和 .class ）：

> java org.junit.runner.JUnitCore parent.child.fileName，我得到以下信息：JUnit 版本 4.1 找不到类：parent.child.fileName 时间：0 OK（0 次测试）

5.  即使我从命令中完全删除 parent.child，也没有什么区别。

6.  我的 CLASSPATH 环境变量设置为：c:\parent\junit\junit-4.1.jar;c:\parent\junit;。

7.  如果我尝试使用 -cp c:\ 或 c:\parent\child 或其他任何东西运行，我仍然会收到错误消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:15:55.527

Java 包名实际上是类名的一部分，它们还以特定方式用于查找`*.class`文件。如果 Java 想要找到一个名为 的类`parent.child.fileName`，它会寻找一个名为的文件——也就是说，它会在一个名为的目录中的一个`parent/child/fileName.class`名为的目录中寻找该文件。您必须指定类路径才能找到目录，例如`child``parent``parent`

```
 java -cp "c:/junit/junit.jar;c:/" org.junit.runner.JUnitCore parent.child.fileName 
```

类路径 (-cp) 参数必须指定 Java 应该查找类的所有位置，包括 jar 文件`junit.jar`，我想象它位于一个名为`junit`. 分号“;” 用于分隔类路径上的条目（假设您使用的是 Windows；在真实计算机上，它是一个“：”。）类路径中的“c：/”条目将用于查找`parent`目录因此你的班级。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T13:16:33.083

您应该使用 JUnit Runner 在 IDE 之外运行测试，而不仅仅是编译它。

```
java -cp lib/junit.jar;sw.jar org.junit.runner.JUnitCore your.package.fileName 
```

将此行更新为您的项目结构。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-21T13:18:07.040

一般来说，使用 ant/maven/gradle 等构建系统或在 IDE (IntelliJ/eclipse/Netbeans) 中运行单元测试要容易得多

# php - 飞镖游戏计算

> ID：15548583
> 
> 赞同：3
> 
> 时间：2013-03-21T13:12:25.943
> 
> 标签：php, permutation

我找不到任何飞镖的脚本或代码，所以我一直在写我自己的，如果有人知道有这些的网站，请告诉我（我已经搜索了多种方法，但没有运气）。

我正在尝试为飞镖游戏 (301/501) 制作一个脚本，该脚本将计算完成游戏的射击目标。当您用飞镖（3、2 或 1）击中准确分数且最后一镖为双镖时，游戏结束（例如分数为 170，可能击中 2 个三倍 20（2*60）和双靶心(2*25)。

我开始编写一个脚本，循环遍历这些值并提取第一个相加的值。我写得不正确/效率低下，因为 1\. 我循环了 3 次（即使可能只需要 1 或 2 个飞镖），以及 2\. 我只输出了要射击的第一组值，而不是所有值。

```
Example:
Score 50
 1\. double bull (25)
 2\. 20 + double 15
 3\. 20 + 20 + double 5
 4\. 16 + 8 + double 13
 5\. double 12 + double 12 + double 1
 6\. triple 15 + 1 + double 2
 7\. etc. 
```

这是我开始的：

```
$score = $_GET['score'];
if ($score > 170) {
    die('No Outs');
}
$possdarts = array();
$possdartstext = array();
for ($x = 0; $x < 2; $x++) {
    for ($a = 0; $a < 60; $a++) {
        if (($score - $a) >= 0)  {
            $possdarts[] = $a;
            if(($x == 2) && ($a % 2 == 0)) {
                $outs[] = $a;
            }
        }
    }
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:26:15.870

我会尝试做这样的事情：（你也必须添加三元组，但这就是我要开始的方式......）你必须有很多可用的内存来使用数组......它吃掉了很多。我尝试了 170 并且 php 已经筋疲力尽了......内存限制。你应该**意识到**这一点。如果您的服务器允许，这不是真正的问题。

```
<?php
$score = 50;

if ($score >170 || $score <=1 ) { 
        $message = 'No outs possible';
    } else {

        $outs = array();

        //Create an array with values from 0 to {value of $score}
        for($v=0;$v<$score;$v++) {
            $outs[] = $v;
        }

        // Get combinations of values (like 0 0 1, 0 0 2, 0 0 3 etc with space between values)
        $combinations = getCombinations($outs,3);

        //Create an array when combinations are equal to set score

        $ascArr = array();      
        $possibleOuts = array();
        foreach($combinations as $key=>$c) {
            $tmpArr = explode(' ', $c);             //Create array of each combination (value1, value2, value3)

            //Value3 has to be a double
            $tmpArr[2] *= 2;            

            //Get ascii-value of whole string (without spaces)
            $tc = trim($c);
            $ascValue = getAsciiValueOfString($tc);

            //If sum of array-values is the same as score, add it to outs array
            //Also make sure that ascii-value of string occurence cannot be repeated ('0 1 49' or '0 49 1' is actually same)
            if (array_sum($tmpArr) == $score && !in_array($ascValue, $ascArr)) {        
                $possibleOuts[] = $c . ' double';
                $ascArr[] = $ascValue;
            }

        }

        //Could some more part of outs array (besides last) be a double?
        $doubleOuts = array();
        $do = array();

        foreach($possibleOuts as $value) {
            $tmpArr = explode(' ', $value); 
            $do[0] = $tmpArr[0];
            $do[1] = $tmpArr[1];
            $do[2] = $tmpArr[2];
            $do[3] = $tmpArr[3];

            //Check first value. If first value can be divided into 2 and the second value as well
            //then set double on first value, and reduce second value
            if ($tmpArr[0] % 2 === 0 && $tmpArr[0]>0 && $tmpArr[1] % 2 === 0) {
                $do[0] = $tmpArr[0] . ' double';
                $do[1] = $tmpArr[1] - $tmpArr[0];
            }

            $doubleOuts[] = implode(' ', $do);

        }

        //Merge outs and doubleouts-array
        $posOuts = array_merge($possibleOuts, $doubleOuts);

    // Print it out
    foreach($posOuts as $value) {
        echo $value . ' <br />';
    }

}

//Function for getting value of chars
function getAsciiValueOfString($string)
{
    $ascii = 0;

    for ($i = 0; $i < strlen($string); $i++) 
    { 
        $ascii += ord($string[$i]); 
    }

    return($ascii);
}

//Recursive functions for getting differet combinations
function getCombinations($arr,$n)
{
     $res = array();

     foreach ($arr as $w)
     {
           if ($n==1) $res[] = $w;
           else
           {
                 $perms = getCombinations($arr,$n-1);

                 foreach ($perms as $p)
                 {
                      $res[] = $w." ".$p;
                 } 
           }
     }

     return $res;
}

?> 
```

输出：

```
0 0 25 double
0 2 24 double
0 4 23 double
0 6 22 double
0 8 21 double
0 10 20 double
0 12 19 double
0 14 18 double
0 16 17 double
0 18 16 double
0 20 15 double
0 22 14 double
0 24 13 double
0 26 12 double
0 28 11 double
0 30 10 double
0 32 9 double
0 34 8 double
0 36 7 double
0 38 6 double
0 46 2 double
0 48 1 double
1 19 15 double
1 39 5 double
3 9 19 double
3 19 14 double
3 29 9 double
3 39 4 double
5 19 13 double
5 29 8 double
5 39 3 double
7 19 12 double
7 29 7 double
7 39 2 double
9 19 11 double
9 29 6 double
10 10 15 double
10 12 14 double
10 14 13 double
10 16 12 double
10 18 11 double
10 20 10 double
10 40 0 double
11 19 10 double
13 19 9 double
15 19 8 double
17 19 7 double
19 19 6 double
19 29 1 double
0 0 25 double
0 2 24 double
0 4 23 double
0 6 22 double
0 8 21 double
0 10 20 double
0 12 19 double
0 14 18 double
0 16 17 double
0 18 16 double
0 20 15 double
0 22 14 double
0 24 13 double
0 26 12 double
0 28 11 double
0 30 10 double
0 32 9 double
0 34 8 double
0 36 7 double
0 38 6 double
0 46 2 double
0 48 1 double
1 19 15 double
1 39 5 double
3 9 19 double
3 19 14 double
3 29 9 double
3 39 4 double
5 19 13 double
5 29 8 double
5 39 3 double
7 19 12 double
7 29 7 double
7 39 2 double
9 19 11 double
9 29 6 double
10 double 0 15 double
10 double 2 14 double
10 double 4 13 double
10 double 6 12 double
10 double 8 11 double
10 double 10 10 double
10 double 30 0 double
11 19 10 double
13 19 9 double
15 19 8 double
17 19 7 double
19 19 6 double
19 29 1 double 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T14:23:09.217

这非常接近，尽管它不是按顺序排列的，并且会发生重复。

```
$score = $_GET['score'];
if ($score >170 || $score <=1 ) { 
        $message = 'No outs possible';
    } else {
        for ($x=60; $x >= 0; $x--) {
            if (
                $x <= 20 || 
                $x == 50 || 
                $x == 25 || 
                ($x % 3 == 0) || 
                ($x <= 40 && 
                ($x % 2 == 0)
                )
                ) {
                /*
                if it is less than 20 or equal to, because 20 - 1 on board, 
                if it is less than or equal to 40 and divisible by 2 because it could be a double
                if it is divisible by 3 because it could be a triple
                if it is a double or single bull, no point in checking the double for 60-51 
                */
                for ($xx=60; $xx >= 0; $xx--) {
                    if (
                            $x <= 20 || 
                            $x == 50 || 
                            $x == 25 || 
                            ($x % 3 == 0) || 
                            ($x <= 40 && 
                            ($x % 2 == 0)
                            )
                        ) {
                        for ($xxx=50; $xxx > 0; $xxx = $xxx - 2) {
                            if ($xxx == 48) {
                                $xxx = 40;
                            }
                            $xxxdis = ($xxx / 2) . ' Double';
                            if (($xxx + $xx + $x) == $score) {
                                echo $x . ', ' . $xx . ', ' . $xxxdis . "\n";
                            }
                        }
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-09T04:45:56.943

这是我几年前的帐户。如果有人偶然发现了这个，我最终完成了这个代码，就在这里。

1.  根据@bestprogrammerintheworld 的建议更新了变量名
2.  允许用户放入他们喜欢的整理飞镖。
3.  删除重复项（例如 '45, 30, double 2' 和 '30, 45, double 2' 只会显示一次）。

（编辑器不会在没有任何内容的情况下从代码中断开列表）。

```
<?php
$score =$_GET['score'];
$finaldart = $_GET['out'] * 2;
if ($score >170 || $score <=1 ) {
    die('No outs possible');
} else {
    for ($firstdart=60; $firstdart >= 0; $firstdart--) {
        if (
            $firstdart <= 20 || 
            $firstdart == 50 || 
            $firstdart == 25 || 
            ($firstdart % 3 == 0) || 
            ($firstdart <= 40 && $firstdart % 2 == 0)
        ) {
            /*
            if it is less than 20 or equal to, because 20 - 1 on board, 
            if it is less than or equal to 40 and divisible by 2 because it could be a double
            if it is divisible by 3 because it could be a triple
            if it is a double or single bull, no point in checking the double for 60-51 
            */
            for ($seconddart=60; $seconddart >= 0; $seconddart--) {
                if (
                    $seconddart <= 20 || 
                    $seconddart == 50 || 
                    $seconddart == 25 || 
                    ($seconddart % 3 == 0) || 
                    ($seconddart <= 40 && $seconddart % 2 == 0)
                    ) {
                    for ($thirddart=50; $thirddart > 0; $thirddart = $thirddart - 2) {
                        if ($thirddart == 48) {
                            $thirddart = 40;
                        }
                        $outstring = 'Double ' . ($thirddart / 2);
                        if (($thirddart + $seconddart + $firstdart) == $score && (@!in_array($seconddart . ', ' . $firstdart . ', ' . $outstring . "<br />\n", $pouts) && @!in_array($seconddart . ', ' . $firstdart . ', ' . $outstring . "<br />\n", $everyotherout))) {
                            if ($thirddart == $finaldart) {
                                $pouts[] = $firstdart . ', ' . $seconddart . ', ' . $outstring . "<br />\n";
                            } else {
                                $everyotherout[] = $firstdart . ', ' . $seconddart . ', ' . $outstring . "<br />\n";
                            }
                        }
                    }
                }
            }
        }
    }
}
if(!empty($finaldart)) {
    if(!empty($pouts)){
        foreach($pouts as $out) {
            echo $out;
        }
        echo "<br />\n" . 'Every Other Out' . "<br /><br />\n";
    } else { 
        echo 'No preferred outs avaliable.' . "<br />\n";
    }
}
if(!empty($everyotherout)){
    foreach($everyotherout as $out) {
        echo $out;
    }
} else if(empty($pouts)){
    echo 'No outs avaliable.';
}
?> 
```

# python - 通过 DLNA/UPnP 流式传输媒体文件

> ID：15548586
> 
> 赞同：16
> 
> 时间：2013-03-21T13:12:27.307
> 
> 标签：python, streaming, upnp, dlna

我目前在我的 Raspberry Pi 上运行 Raspbmc 并激活了 UPnP 流式渲染。

我的目标是编写一个简单的 Python 来流式传输视频或音乐播放列表。

我已经尝试过[Coherence](https://github.com/coherence-project/Coherence)，但它抛出了一堆异常，我并没有真正理解这一点，因为[文档非常混乱](http://coherence-project.org/wiki/DocumentationDepartment)。所以我正在寻找一种更简单的方法/库。

使用 Python 将媒体文件流式传输到电视的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-10-13T09:26:56.873

有一个轻量级的纯 python 库[dlnap](https://github.com/cherezov/dlnap)，它允许在同一本地网络中的 DLNA/UPnP 设备上播放媒体

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-21T09:51:14.443

**仅对于音频，** 我用 rygel 得到了很好的结果。棘手的部分是在 .config/rygel.conf 中配置 GstLaunch pulseaudio 连接器。这是我的部分，但您可以使用以下命令获取正确的脉冲音频源：

```
pactl list | egrep -A2 '^(\*\*\* )?Source #' | grep 'Name: .*\.monitor$' | awk '{print $NF}' | tail -n1 
```

这是我的 GstLaunch 部分：

```
[GstLaunch]
enabled=true
launch-items=myaudiowav;myaudiompeg

myaudiowav-title=WAV audio on @HOSTNAME@
myaudiowav-mime=audio/x-wav
myaudiowav-launch=pulsesrc device=alsa_output.pci-0000_00_14.2.analog-stereo.monitor ! audio/x-raw,channels=2 ! wavpackenc

myaudiompeg-title=MPEG audio on @HOSTNAME@
myaudiompeg-mime=audio/mpeg
myaudiompeg-launch=pulsesrc device=alsa_output.pci-0000_00_14.2.analog-stereo.monitor ! audio/x-raw,channels=2 ! lamemp3enc target=quality q
uality=6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-13T02:20:13.253

您可以通过 gi.repository 为 python 使用 GUPnP[绑定](https://wiki.gnome.org/action/show/Projects/PyGObject?action=show&redirect=PyGObject)。搜索GUPnP 和 GSSDP、GUPnP AV的[文档。](http://lazka.github.io/pgi-docs/)

您可以将它们与运行 django+SQLite 数据库的迷你网络服务器相结合，以定义一种内容目录服务 (CDS)，也可以使用 Gstreamer（存在称为 Gst 的 Python 绑定）。使用这些元素，您可以使用 SSDP 为发现的内容构建自定义服务器；您可以从 gstreamer 获取有关每个媒体项目的元数据，还可以使用 gstreamer 的“rtspsrc”进行流式传输。

# android - 尝试在模拟器上获取 Android 应用程序

> ID：15548590
> 
> 赞同：0
> 
> 时间：2013-03-21T13:12:32.660
> 
> 标签：android, http, android-emulator

我正在尝试开发一个可以连接到 Internet 并从指定网站读取数据的 Android 应用程序。但是，当我在模拟器上运行程序时，什么也没有发生。有人可以帮我指导我需要做什么吗？这是我的代码

```
public class HttpExaplme extends Activity {
TextView httpStuff;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.httpex);
    httpStuff = (TextView) findViewById(R.id.tv_http);
    GetHttpEx test = new GetHttpEx();
    String returned;
    try {
        returned = test.getInternetData();
        httpStuff.setText(returned);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public class GetHttpEx {

public String getInternetData() throws Exception
{
    BufferedReader in = null;
    String data = null;
    try{
        HttpClient client = new DefaultHttpClient();
        URI website = new URI("http://www.mybringback.com");
        HttpGet request = new HttpGet();
        request.setURI(website);
        HttpResponse response = client.execute(request);
        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String l ="";
        String nl= System.getProperty("line sperator");
        while((l = in.readLine())!=null)
        {
            sb.append(l + nl);
        }
        in.close();
        data = sb.toString();
                return data;
       }
    finally
    {
        try{
            if(in != null)
                {
                    in.close();
                    return data;
                }
        }
        catch(Exception e){
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:14:45.730

您正在崩溃，因为您在 UI 线程上执行 HTTP 请求。这是不允许的——你会让你的应用程序没有响应，所以它会抛出一个异常。所有 HTTP 请求都必须在线程或 AsyncTask 中进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:26:36.853

首先，检查模拟器是否连接到[http://www.mybringback.com](http://www.mybringback.com)。通过在 android 浏览器中打开此站点来执行此操作。默认情况下，公司防火墙可能会阻止模拟器请求。

其次，正如@Gabe 所说，将您的网络请求包装在 AsyncTask 中。这里：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

完成这些步骤后回到这里。请发布堆栈跟踪。您可以在 logcat 中查看它（命令行上的 adb -e logcat）。

高温高压

编辑：您是否在清单中设置了 android.permission.INTERNET？

# jquery - 输入元素显示的东西不是它的值

> ID：15548592
> 
> 赞同：1
> 
> 时间：2013-03-21T13:12:35.420
> 
> 标签：jquery, html, jquery-plugins, input, jquery-ui-autocomplete

我试图让自己成为一个基于 jQueryUI 的自动完成功能的小 jQuery 插件，因为我有很多不同的自动完成字段，我想以不同的方式对待它们。

尽管我的插件的所有其他部分都工作正常，但它做了一件我不明白的事情。尽管 onSelect 函数明确定义了这一点：

```
box.val(ui.item.nazev); // item name
boxID.val(ui.item.value); 
```

我可以通过在完成后列出这些元素值来确认，对于用户，框元素以某种方式显示 ui.item.value

我尝试了所有我能想到的可能性，但都没有奏效……我很绝望。

插件包含在这里：http: [//jsfiddle.net/meridius/AVA6M/](http://jsfiddle.net/meridius/AVA6M/)

* * *

**编辑：**

好的，它又快又脏，但我设法让它在没有 AJAX 的 jsfiddle.net 中工作。它并不完美（结果不会被过滤为打字），但是当您选择一些结果时，您可以明白我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T16:05:41.960

![在此处输入图像描述](../Images/892107cac4e720e9fe7b19bb90c7af40.png)

使用 Chrome (F12) 调试你的小提琴我在第 2257 行 o jquery-1.9.1.js 发现了你的问题。这是事件传播的问题，因此以下代码应该可以解决您的问题。

```
select: function (event, ui) {
            o.onSelect(event, ui, box, boxID);
            return false; //This line stops event propagation solving the problem.
}, 
```

注意：有关如何停止事件传播的详细信息，请参阅这篇文章。[event.preventDefault() 与返回 false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

# java - GUI 上的滚动条

> ID：15548593
> 
> 赞同：0
> 
> 时间：2013-03-21T13:12:36.480
> 
> 标签：java, swing, user-interface, scroll, scrollbar

如何将垂直滚动条添加到此 JTextArea 框？

```
b6 = new JTextArea (); 
b6.setBounds(210,100, 170, 240); 
```

我试图做一些或多或少这样的事情：

```
b6 = new JTextArea (); 
b6.setBounds(210,100, 170, 240);
JScrollPane scroller = new JScrollPane(b6);
add(scroller); 
```

使用时：

```
JScrollPane scroll = new JScrollPane(b6);
scroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
panel.add(scroll); 
```

添加（滚动）；add 带有下划线，并说 Create a new method 'add(JScrollPane)'...

主要代码：

```
import java.awt.Color;
import java.awt.Container;
import java.awt.Point;
import java.awt.Window;
import java.awt.event.*; 
import java.util.Random;

import javax.swing.*;

public class RoPaSgame {

    private static final int DISPOSE_ON_CLOSE = 0;
    static int humanWon; // use for statistic
    static int win=0;
    static int total=0;
    static int tie=0;
    static String userName;
    static JTextArea b6;
    static JTextField b7;
    static JButton quitFrame;
    static Container panelAns, panel;
    static JFrame frameAns, frame;
    public static void main(String[] args){ // main
        gamePanel();// launch main game
        introductionPanel(); // launch instruction
    }

    private static void introductionPanel(){ // give the instruction to the game
        String text="RoPaS Game is a strategic game played between\ntwo people. The choices are rock, paper or scissors\ngesture with the hand. Paper covers rock, rock\ncrushes scissors,scissors cuts paper.";
        JOptionPane.showMessageDialog(null,text, "Introduction", 0, new ImageIcon(System.getProperty("user.dir")+"/image/5.jpg"));
    }

    private static void gamePanel(){ // the main game panel

        frame = new JFrame("RoPaS Game");  //the main frame of the game 

        panel = frame.getContentPane();  // creating a container panel, so we can place buttons where we pleased
        panel.setLayout(null); 

        String[] iconString= new String[3]; // creating icon string name so we can place the directory in with little effort
        int[] boundInt= new int[3]; // same idea

        for(int i=0; i<=2; i++){ // creating the conditions
            iconString[i]=System.getProperty("user.dir")+"/image/"+i+".jpg";
            boundInt[i]=60+110*i;
        }

        JButton b1 = new JButton (" ", new ImageIcon(iconString[0]));
        b1.setBackground(Color.white);
        b1.setBounds(10,boundInt[0],150,100);

        JButton b2 = new JButton (" ", new ImageIcon(iconString[1]));
        b2.setBackground(Color.white);
        b2.setBounds(10,boundInt[1],150,100);

        JButton b3 = new JButton (" ", new ImageIcon(iconString[2]));
        b3.setBackground(Color.white);
        b3.setBounds(10,boundInt[2],150,100);//creating three buttons

        JLabel l1 = new JLabel(new ImageIcon(System.getProperty("user.dir")+"/image/3.jpg"));
        l1.setBounds(0, 0, 400, 50);
        panel.add(l1);//creating a question button

        JButton b4 = new JButton("Cheat");
        b4.setBackground(Color.DARK_GRAY);
        b4.setForeground(Color.WHITE);
        b4.setBounds(210, 350, 80, 30); //create a code button, this button will give you an automatic win

        JButton b5 = new JButton("Quit"); //quit
        b5.setBackground(Color.DARK_GRAY);
        b5.setForeground(Color.WHITE);
        b5.setBounds(300, 350, 80, 30);

        b6 = new JTextArea (); 
        b6.setBounds(210,100, 170, 240);

        JScrollPane mySchroll = new JScrollPane(b6, ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,ScrollPaneConstants.HORIZONTAL_SCROLLBAR_NEVER);
        panel.add(mySchroll);

        Random ran = new Random();
        int ranName = ran.nextInt(99999);

        b7 = new JTextField("Guest " + ranName);
        b7.setBounds(260,60, 120, 25);

        JLabel name = new JLabel("Name: ");
        name.setBounds(210,60, 120, 25);

        //place button on panel
        panel.add(b1);
        panel.add(b2);
        panel.add(b3);
        panel.add(b4);
        panel.add(b5);
        panel.add(b6);
        panel.add(b7);
        panel.add(name);

        b1.addActionListener( //next three button will listen for which play pick and calculate the win in computeWinner

                new ActionListener() {
                    public void actionPerformed( ActionEvent event ) {
                        computeWinner(1);
                    }});

        b2.addActionListener(

                new ActionListener() {
                    public void actionPerformed( ActionEvent event ) {
                        computeWinner(2);
                    }});

        b3.addActionListener(

                new ActionListener() {
                    public void actionPerformed( ActionEvent event ) {
                        computeWinner(3);
                    }});

        b4.addActionListener(

                new ActionListener() {//cheat button, hit the guy and get a win
                    public void actionPerformed( ActionEvent event ) {
                        win=win+1;
                        total=total+1;

                        JOptionPane.showMessageDialog(null,"You WIN again :)"+"\nWin/Loss rate: " + win+"/"+total+"\nTie: "+tie,"Cheater do prosper", 0, new ImageIcon(System.getProperty("user.dir")+"/image/4.jpg"));

                    }});

        b5.addActionListener( //quit the game and show three beat up guys

                new ActionListener() {
                    public void actionPerformed( ActionEvent event ) {
                        String text=" Joke:\n Ok, so in rock, paper, scissors \n I get howscissors beats paper and \n rock beats scissors butI don't get\n how paper beats rock is it supposed \n to magically wrap around rocks?\n why doesn't it do that to scissors?\n actually forget scissors why doesn't\n it do that to people? Paper should\n  be able to suffocate us when we take\n notes and use daily contact with it\n if so we should be living in fear\n with our contact to it but we're not\n know why paper can't hurt us\n I always pick rock when I play\n when someone picks paper and says\n they beat me...I punch them in the face\n 'Oh, I'm sorry. I thought paper would\n protect you.' loser. \n\n Thank You for using RoPaS Game\n See you soon";  
                        JOptionPane.showMessageDialog(null,text, "Thank You, Goof Bye", 0, new ImageIcon(System.getProperty("user.dir")+"/image/6.gif"));
                        System.exit(0);
                    }
                });

        frame.setSize(400, 420); 
        frame.getContentPane().setBackground(Color.LIGHT_GRAY);
        frame.setVisible(true); 
        frame.setResizable(false);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); //set frame size and the game begins!     
    }

    public static void computeWinner(int x){ // computing the winner
        int computerChoice=computerRandomChoice();
        int humanChoice=x;
        String text,text1="";
        String winningCombination= ""+Math.min(computerChoice, humanChoice)+Math.max(computerChoice, humanChoice);

        switch(Integer.parseInt(winningCombination)){

        case 12:
            text = "Paper wins";
            if(humanChoice==2) humanWon=1;
            break;
        case 13:
            text = "Rock wins";
            if(humanChoice==1) humanWon=1;
            break;
        case 23:
            text = "Scissors wins";
            if(humanChoice==3) humanWon=1;
            break;
        default: text="DRAW";
        humanWon=2;
        tie=tie+1;
        }

        if(humanWon==1){
            text1="Human wins: ";
            humanWon=0;
            win=win+1;
            total=total+1;
        }else if(humanWon==2){
            text1="";
            humanWon=0;     
        }else{
            text1="Computer wins: ";
            total=total+1;
        }

        frameAns = new JFrame("RoPaS Game");
        Point MainLoc = frame.getLocation();
        frameAns.setLocation(410 + (int)MainLoc.getX(), 0 + (int)MainLoc.getY());
        panelAns = frameAns.getContentPane(); 
        panelAns.setLayout(null); 

        JLabel l0 = new JLabel(text1+text);
        b6.append(b7.getText() + "\n" +text1+text+"\n\n");
        l0.setBounds(10, 10, 300, 15);
        panelAns.add(l0);

        JLabel l01 = new JLabel("________________________________________________");
        l01.setBounds(0, 10, 350, 25);
        panelAns.add(l01);
        //show the result in a new splash screen

        JLabel l1 = new JLabel("| USER |");
        l1.setBounds(60, 35, 150, 35);
        panelAns.add(l1);

        JLabel l2 = new JLabel("| COMPUTER |");
        l2.setBounds(165, 35, 150, 35);
        panelAns.add(l2);

        JLabel l3 = new JLabel(new ImageIcon(System.getProperty("user.dir")+"/image/"+(humanChoice-1)+".jpg"));
        l3.setBounds(0, 70, 170, 80);
        panelAns.add(l3);

        JLabel l4 = new JLabel(new ImageIcon(System.getProperty("user.dir")+"/image/"+(computerChoice-1)+".jpg"));
        l4.setBounds(115, 70,170, 80);
        panelAns.add(l4);

        JLabel l015 = new JLabel("________________________________________________");
        l015.setBounds(0, 10, 350, 280);
        panelAns.add(l015);

        JLabel l5 = new JLabel("Win/Loss rate: " + win+"/"+total);
        l5.setBounds(5, 25, 150, 290);
        panelAns.add(l5);

        JLabel l6 = new JLabel("Tie: "+tie);
        l6.setBounds(5, 30, 125, 310);
        panelAns.add(l6);

        quitFrame = new JButton("Quit"); //quit
        quitFrame.setBackground(Color.DARK_GRAY);
        quitFrame.setForeground(Color.WHITE);
        quitFrame.setBounds(210, 165, 80,30);

        panelAns.add(quitFrame);

        quitFrame.addActionListener( //quit the game and show three beat up guys

                new ActionListener() {
                    public void actionPerformed( ActionEvent event ) {
                        frameAns.setVisible(false);
                    }
                });

        frameAns.setSize(300, 230); 
        frameAns.getContentPane().setBackground(Color.LIGHT_GRAY);
        frameAns.setVisible(true);
        frameAns.setResizable(false);
        frameAns.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

    }

    public static int computerRandomChoice(){// creating a random choice of rock paper or scissors by the computer
        int result=(int)(Math.random()*3)+1;        
        return result;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:16:14.940

尝试这个：

```
JScrollPane scroll = new JScrollPane(b6);
scroll.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
panel.add(scroll); 
```

工作示例：

```
JFrame frame = new JFrame();
JPanel middlePanel = new JPanel();
frame.add(middlePanel);
final JTextArea display = new JTextArea(16, 58);
display.setEditable(true); // set textArea non-editable
JScrollPane scroll = new JScrollPane(display);
scroll.setVerticalScrollBarPolicy(ScrollPaneConstants.
                                   VERTICAL_SCROLLBAR_ALWAYS);

// Add Textarea in to middle panel
middlePanel.add(scroll); 
```

# php - 删除多个 标签到单个标签

> ID：15548597
> 
> 赞同：0
> 
> 时间：2013-03-21T13:12:45.910
> 
> 标签：php, regex

我需要全部替换：

```
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p> 
```

和

```
<p>&nbsp;</p> 
```

使用正则表达式我将如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:19:54.353

如果这是一个有界的情况，您可以使用以下方法`preg_replace()`来实现：

正则表达式：`(<p>&nbsp;<\/p>\s*)+`
替换：`\1`

解释演示：[http ://regex101.com/r/vB5sZ0](http://regex101.com/r/vB5sZ0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:20:07.513

尽管一些评论正确指出使用正则表达式解析 HTML 是危险的，但在受控环境中或不需要解析时（我相信你的情况，因为你似乎只想替换一些东西）我认为它是最优化的解决方案（尽管不完美）。

无论哪种方式，如果我正确理解了您的问题，您想用单个实例替换多个重复项吗？在这种情况下，它可以通过正则表达式简单地实现，如下所示：

```
 "<br><br>a<br><br><br>b".replace(/(<br>){2,}/g, '<br>'); 
```

该示例在 javascript 中（因为我可以从浏览器控制台对其进行测试），但是 php 中的正则表达式和基本概念是相同的：匹配两个或多个您感兴趣的字符串实例并将其替换为单个实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:21:06.563

您应该使用**html 解析器**而不是正则表达式。

但是如果`p`标签没有嵌套，你可以使用这个正则表达式

```
/<p>&nbsp;</p>/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T13:21:44.753

干得好 ：

```
"<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>"

    .replace(/(<p>&nbsp;<\/p>\n?)+/, "<p>&nbsp;</p>"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T13:26:02.417

如果您不想使用正则表达式，请使用`str_replace`.

将所有替换`<p>&nbsp;</p><p>&nbsp;</p>`为一个并执行此操作，直到没有更改为止。

```
$input2 = $input_text;
$end = false;

while(!$end){
  $temp_text=str_replace("<p>&nbsp;</p><p>&nbsp;</p>","<p>&nbsp;</p>", $input2);
  if($temp_text == $input2){
    $end = true;
    }
  else{
    $input2 = $temp_text;
  }
} 
```

`str_replace()`您可能需要添加换行符 ( )`\n`和/或换行符 ( `\r`)。

# c# - HtmlDecode 在 html 属性中使用 Razor MVC 不起作用

> ID：15548599
> 
> 赞同：2
> 
> 时间：2013-03-21T13:12:51.237
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, html-entities

我正在尝试使用 MVC4 / Razor 在 html 中编写单词**Márcia ，但结果是错误的，例如：**

```
<span title="M&#225;rcia">Márcia</span> 
```

注意：标签*SPAN*中的单词打印输出正确，但模型（@Model.Name）**相同属性中的单词显示为字符编码**`&#225;`

已经尝试了下面的所有命令，但是在 html 属性中应用时任何人都可以工作：

```
@Html.Raw(model.Name)

@Html.Raw(HttpUtility.HtmlDecode(model.Name))

@Html.Raw(Server.HtmlDecode(model.Name))

@HttpUtility.HtmlDecode(model.Name)

@Server.HtmlDecode(model.Name) 
```

为什么在 html 属性中使用时 html 解码不起作用？如何让它发挥作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T18:20:46.940

这对我有用。这是我的`HomeController`代码：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new HomeModel();
        model.Name1 = "Márcia";
        model.Name2 = "M&#225;rcia";
        return View(model);
    }
} 
```

这是我的主页索引视图：

```
@model mvctestappweb.Models.HomeModel

@{
    ViewBag.Title = "Index";
}

@Model.Name1
<br />
@Html.Raw(Model.Name2) 
```

视图上的输出如下所示：

```
Márcia
Márcia 
```

* * *

**编辑**：我明白了。问题是，只要将 RAW 放入 HTML`<span>`标记中，它就会将 á 转换为`&#225;`无论如何。我玩得很好，但无法找到阻止这种情况发生的方法。因此，这里有两个可能对您有用的解决方法：

（我知道这并不理想，但这是我能找到的最好的工作。）

我的控制器代码：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new HomeModel();
        model.Name = "Márcia";
        model.SpanHtml = "<span title='Márcia'>Márcia</span>";
        return View(model);
    }
} 
```

这是我的看法：

```
@model mvctestappweb.Models.HomeModel

@{
    ViewBag.Title = "Index";
}

1: @Html.Raw("<span title=\"" + @Html.Raw(Model.Name) + "\">" + @Model.Name + "</span>")
<br />
2: @Html.Raw(@Model.SpanHtml) 
```

视图上的输出如下所示：

```
1: Márcia
2: Márcia 
```

我的 HTML 源代码如下所示：

```
1: <span title="Márcia">Márcia</span>
<br />
2: <span title='Márcia'>Márcia</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T11:40:14.037

您可以将属性名称与值放在一起。

```
@{  
    var title = "title='Márcia'";  
}  

<span @Html.Raw(title)>Márcia</span> 
```

# html - 需要有关如何创建批处理文件来编辑多个 html 文件的信息

> ID：15548607
> 
> 赞同：0
> 
> 时间：2013-03-21T13:13:17.633
> 
> 标签：html, image, batch-file, edit

我的文件结构和程序是这样的：http: [//i.imgur.com/R7P7HQI.jpg](http://i.imgur.com/R7P7HQI.jpg)

*   我有一个名为“Project_ID”的文件夹。

*   在该文件夹中，我有我的 html 文件和另一个文件夹，其中包含我的设计模板，名为 01.jpg、02.jpg、03.jpg 等等......

*   在这些 html 文件中，我对每张照片进行预览，例如 01.html、02.html、03.html 等等...

*   如果单击并打开 01.html，您会看到第一张图片 01.jpg。如果您单击该图像，它会将您发送到打开 02.jpg 的文件“02.html”中的同一文件夹，依此类推，直到您到达再次打开 01.html 的最后一个 html。

--------------------------------------------------……</p>

我想用批处理文件“自动化”的事情是：

每次我有一个新项目时，我都必须使用记事本进入每个 .html 文件，更改 Profile 中的值“Profile”，并使用我的初始文件夹的确切名称（Project_ID）。

然后，我必须将宽度（在我的示例 1920 中）和高度（在我的示例 2394 中）替换为图像文件夹中 01.jpg 的确切尺寸。

当然，我想让我的批处理从头开始使用记事本创建所有这些 .html 文件，方法是首先查看“初始文件夹的名称 (Project_ID)”、“图像文件夹中我的 .jpg 文件的数量”和然后创建我在开始时解释的功能所需的确切数量的 html 文件。我想仅使用批处理文件会有点困难。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:19:52.337

这样做很痛苦。考虑其他方法：

*   编写一个 HTML 页面，使用 javascript 加载和显示不同的图像。然后，除了项目名称之外，您无需更改任何内容。
*   编写一个返回不同图像的 PHP 脚本，然后像这样调用它：`display.php?project=MyProject&img=1`
*   至少，使用一些合理的东西，比如 python。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:54:50.610

如果你想做的是创建一个照片库，我强烈建议你看看[jAlbum](http://jalbum.net/en/)。只需单击几下，它就会生成您的网络相册，拥有大量[社区开发的模板](http://jalbum.net/en/skins/new;jsessionid=1iae70brab19w1gdon3ije6eo2)，您甚至可以使用它生成幻灯片。如果防止右键单击保存图像是您的主要目标，我认为有些模板可以使用 Flash Player 显示图像。

查看一些[样本专辑](http://jalbum.net/en/explore/featured)，看看你的想法。

* * *

如果您坚持使用自己的模板，请查看使用[GnuWin32 sed](http://gnuwin32.sourceforge.net/packages/sed.htm)进行内联流编辑。您可以使用正则表达式在所有 html 页面中更改您的项目，如下所示：

```
sed -i -r -e "s/Profile/Project_ID/g" *.html 
```

并对您的图像宽度进行类似的修改。

但是， GnuWin32的内联编辑在使用开关`sed`时往往会留下带有随机生成名称的垃圾临时文件。`-i`使用`for`循环并重定向这样的输出可能会更好`sed`：

```
for %%I in (*.html) do (
    sed -r -e "s/Profile/Project_ID/g" %%I >%%I.temp
    move /y %%I.temp %%I
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T15:47:53.253

```
@ECHO OFF
SETLOCAL
:: Get directory from cmdline
SET sourcedir=%~1
IF NOT DEFINED sourcedir ECHO Require source directory&GOTO :EOF 
IF NOT exist "%sourcedir%\*.jpg" ECHO No JPGs found IN %sourcedir%&GOTO :EOF
::
:: get name of project (last element in path)
::
FOR %%i IN ("%~1") DO SET project=%%~ni
ECHO project is %project%
:: Create subdir for HTMLs
SET "newhtmls=%sourcedir%\newhtmls"
MD "%newhtmls%" 2>NUL
::
:: %2 is the name of a file containing .jpg names in the order
:: in which they are to appear. 
::
:: If %2 is missing, create a list file
SET imgseqlist=%2
IF DEFINED imgseqlist GOTO haveseq
SET imgseqlist=%temp%\htmlfilelist.txt
SET dellist="%imgseqlist%"
DIR /b /a-d /ON "%sourcedir%\*.jpg" >"%imgseqlist%"
:haveseq
::
:: Build file of image details
:: I use IRFANVIEW
::
SET imgdetails=%temp%\imagedetails.txt
SET dellist=%dellist% "%imgdetails%"
"C:\Program Files (x86)\irfanview\i_view32.exe" "%sourcedir%\*.jpg" /info="%imgdetails%"
::
:: Now let's process
::
(SET firstimg=)
FOR /f "usebackqdelims=" %%i IN ("%imgseqlist%") DO (
IF DEFINED firstimg (SET nextimg=%%i&CALL :generate) ELSE (SET firstimg=%%i)
(SET currimg=%%i)
)
:: Do the last one...
SET nextimg=%firstimg%
CALL :generate

:: And finally delete the tempfile
DEL %dellist%

GOTO :EOF 

:generate
:: output filename=current imagename -last 4 chars (.jpg)
SET outfile=%currimg:~0,-4%.html
SET nexthtml=%nextimg:~0,-4%.html
::
:: Look up the details of your image.
:: using IRFANVIEW format
::
(SET setdetails=)
FOR /f "usebackq tokens=1,2,4,6" %%d IN ("%imgdetails%") DO (
IF DEFINED setdetails IF "%%e"=="dimensions" (SET width=%%f&SET height=%%g&SET setdetails=)
IF /i %%d==[%nextimg%] SET setdetails=Y
)
:: I'd have filled out these details if you'd posted them
:: rather than just a picture :(
>%newhtmls%\%outfile% (
ECHO ^<!DOCTYPE...transitional.dtd"^>
ECHO ^<html...xthml"^>
ECHO ^<head^>
ECHO ^<meta...-8" /^>
ECHO ^<title^>%project^</title^>
ECHO ^<...and so ON...^>
ECHO         background-image:url(images/%currimg%^);
ECHO ^<...and so ON...^>
ECHO ^</head^>
ECHO.
ECHO ^<body^>
ECHO ^<a href="%nexthtml%"^>^<img src="images/blank.gif" width="%width%" height="%height%" /^>^</a^>
ECHO ^</body^>
ECHO ^</html^>
)
GOTO :eof 
```

# printing - POS打印机发布方法

> ID：15548611
> 
> 赞同：1
> 
> 时间：2013-03-21T13:13:37.383
> 
> 标签：printing, release, opos

我正在开发一个通过 POS 打印机打印收据的应用程序。我的应用程序必须能够从我的应用程序的多个实例与 POS 打印机进行通信。我的 POS 打印机适合网络，我希望能够从我的应用程序的每个实例进行打印。这工作正常，但在打印方法之前，我必须声明打印机，这需要 0.8 秒（太长），在打印方法之后，我需要释放打印机，这需要 3.1（！！！！！！）秒。

任何人都可以帮助我更快地提出索赔和释放吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:08:29.260

询问您的打印机供应商（或为您的打印机提供服务对象的任何人。）

您的服务对象可能会在 ClaimDevice() 初始化期间做一些额外的事情，例如将徽标位图上传到打印机以确保它从一致的状态开始。如果您为打印机的 SO 配置了徽标，请尝试删除它们以查看这是否会加快 ClaimDevice()。

它也可能会进行某种延迟以确保在报告设备关闭之前打印缓冲区为空。在设备端口上调用 ReleaseDevice() 会告诉 SO 关闭设备。关闭端口可能会使其立即停止打印，这将使其跳过最后几个打印命令，例如“进纸和切纸”。我希望这不是你的情况，因为它可能需要更新设备固件来修复它。

# c# - 带计时器的动画框更快

> ID：15548615
> 
> 赞同：2
> 
> 时间：2013-03-21T13:13:46.057
> 
> 标签：c#, compact-framework

我在 Compact framework 2.0 C# 中有一个项目我在 Form 中使用了很多图片框，并且有一个计时器可以每秒更改图片框的位置，但是移动速度非常慢我怎样才能让它更快？

定时器间隔为 100

```
private void timer1_Tick(object sender, EventArgs e)
{
  picust.Location = new Point(picust.Location.X, picust.Location.Y + 10);
  picx.Location = new Point(picx.Location.X, picx.Location.Y + 10);
  picy.Location = new Point(picy.Location.X, picx.Location.Y + 10);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:21:07.270

由于您使用的是 NET Compact Framework 2.0，因此您可以使用 2.0 版开始支持的[`SuspendLayout`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.suspendlayout.aspx)和[`ResumeLayout`](http://msdn.microsoft.com/en-us/library/y53zat12.aspx)方法来改进您的代码。将这些方法放在您的代码周围，如示例中所示：

```
//assuming that this code is within the parent Form

private void timer1_Tick(object sender, EventArgs e)
{
  this.SuspendLayout();
  picust.Location = new Point(picust.Location.X, picust.Location.Y + 10);
  picx.Location = new Point(picx.Location.X, picx.Location.Y + 10);
  picy.Location = new Point(picy.Location.X, picx.Location.Y + 10);
  this.ResumeLayout();
} 
```

这将防止表单的三个重绘，而是只执行一个。

# c - 两次调用 fgets() 会导致第二次调用未完成

> ID：15548619
> 
> 赞同：1
> 
> 时间：2013-03-21T13:13:50.460
> 
> 标签：c, fgets

我已经用谷歌搜索这个问题几个小时了，到目前为止我还没有看到任何提及它。

```
int getInt()
{
    char* rawin = (char*)malloc(100);
    printf("How big should the secret code be?\n(Input number of elements):\n");

    while(fgets(rawin, 100, stdin) != NULL)
    {
        if (sscanf(rawin,"%d") == 1)
        {
          break;
        }
        printf("Numbers only please.\n");
    }
    int in = atoi(rawin);
    free(rawin);
    return in;
} 
```

如果我两次调用此函数，无论我第一次调用哪个都可以正常工作，但第二个会表现得很奇怪。与进入 while 循环不同，程序的行为就像在 fget 上无限循环一样。fgets 的第二次调用永远不会完成，因此永远不会返回任何内容。调试时，永远不会到达“while(fgets...”之后任何位置的断点，包括循环之后。我尝试将“\n”、“\0”和“\n\0”附加到标准输入的末尾，它什么也没做。我尝试通过读出每个不是“\n”或\0'的字符来“刷新”标准输入，这也没有做任何事情。

编辑：为了澄清，“if”语句中的条件是一个占位符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:33:44.023

您需要将数据存储在某个地方：

```
if (sscanf(rawin,"%d") == 1) 
```

也就是说，您`sscanf()`需要第三个参数：指向要存储此转换结果的整数的指针：

```
int in;
if (sscanf(rawin,"%d",&in) == 1) 
```

你不需要`atoi()`在这之后打电话。

* * *

作为旁注，您的示例中不需要动态分配的内存。一个简单的数组就足够了：

```
char rawin[100]; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-21T13:26:00.807

尝试使标准输入非阻塞。

```
#include <unistd.h>
#include <fcntl.h>

fcntl(0, F_SETFL, fcntl(fd, F_GETFL) | O_NONBLOCK); 
```

或者使用非阻塞`recv`而不是 fgets：

```
#include <sys/socket.h>

while(recv(0, inputString, 100, MSG_DONTWAIT) > 0) 
```

# ruby-on-rails - 必应搜索 API 结果随着 web.offset(skip) 值的增加而减少

> ID：15548625
> 
> 赞同：4
> 
> 时间：2013-03-21T13:14:10.553
> 
> 标签：ruby-on-rails, api, bing, bing-api

我正在使用 Bing 服务资源管理器测试一个查询，该查询将记录数返回到大约 600k，但是在导航到下一页时，结果不断减少并最终归零。

我同时使用**Bing Search API**和**Bing Search Web Results only API**目前我每月使用免费的 5000 个请求。

我在 Bing 的服务资源管理器中测试的示例查询是

```
https://api.datamarket.azure.com/Bing/SearchWeb/v1/Web?Query=%27xbox%27&Market=%27en-US%27&$skip=1300 
```

我需要捕获尽可能多的记录（> = 10k），但这将我限制在大约 700 或 800 条记录。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-22T05:23:55.703

我在必应搜索论坛上发布了这个问题，这就是他们所说的希望对某人有所帮助！

搜索结果仅限于前 1,000 个结果。这意味着 &top 加上 $skip 的总和不能大于 1,000。&top 的最大值是 100 用于网络、图像和视频，15 用于新闻，$skip 的最大值是 1000

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-08T07:27:00.213

`$skip`表示您在指定可用的必应数据后请求结果/图像。例如，如果您指定`50`为`$skip`值，则意味着它将忽略第一个`50`数据并开始从`51`订单数据中请求结果。

必应限制`50`每个请求的最大结果。如果要设置要请求的图像数量，可以使用`$top`. 其实现与`$skip`. 把你想要的数字放在后面`$top`。示例：`$top=33`。

如果您想获取的图片不止一次`50`点击**怎么**办？您可以将请求与 php`for`循环相乘以增加该`$skip`值并将该`$top`值保持为允许的最大数量，以防止每个请求跳过数据。

# ios - UITableView 方法没有触发

> ID：15548629
> 
> 赞同：0
> 
> 时间：2013-03-21T13:14:15.140
> 
> 标签：ios, objective-c, cocoa-touch

我有一个带有 UITableView 控件的简单表视图控制器。我已经在我的头文件中实现了 UITableViewDelegate 和 UITableViewDatasource 。我已将数据源和委托指定为包含 UITableView 的 ViewController。但是，没有一个表视图方法被触发。我已经发布了精简的源代码和显示委托/数据源的屏幕截图。为什么事件没有连接的可能原因是什么？

（仪表是一个包含值对象的 NSArray 的模型）

标题

```
#import <UIKit/UIKit.h>
#import "GaugeList.h"

@interface SitePickerViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>

@property (nonatomic,strong) GaugeList *gauges;

@end 
```

执行

```
#import "SitePickerViewController.h"

@interface SitePickerViewController ()

@end

@implementation SitePickerViewController
@synthesize gauges;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {

    }
    return self;
}
-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    NSInteger rowCount = [gauges.gaugeList count];
    NSLog(@"numberOfRowsInSection called: %i\n", rowCount);
    return rowCount;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    NSLog(@"cellForRowAtIndexPath\n");
    UITableViewCell *cell = [[UITableViewCell alloc] init];
    return cell;
}

-(void)loadView{
    gauges = [[GaugeList alloc] initWithStateIdentifier:@"WV" andType:nil];
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Do any additional setup after loading the view.
    NSLog(@"viewDidLoad called: %i\n", [gauges.gaugeList count]);
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:16:35.637

在 viewDidLoad

放

`tableView.delegate = self;`

如果您不使用 XIB，还要分配 tableView。或者，如果 ut 使用 xib 将代表和数据源映射到文件所有者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:30:32.307

使 SitePickerViewController 成为委托和数据源还不够。您还必须将该类设置为数据源和委托。确保也连接到该 IBOutlet。

```
@interface <UITableViewDataSource, UITableViewDelegate>
@property (weak, nonatomic) IBOutlet UITableView *functionTableView;
@end

@implementation
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.functionTableView.delegate = self;
    self.functionTableView.dataSource = self;
}

//Delegate and datasource methods down here
@end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T22:03:33.677

问题在于您的`loadView`. 的任何实现都`loadView`必须实际为控制器创建主视图并将其分配给`self.view`. 正如您所拥有的，最终不会为您的视图控制器创建任何视图。

移动必须的方法调用`viewDidLoad`。

```
- (void)viewDidLoad {
    [super viewDidLoad];

    gauges = [[GaugeList alloc] initWithStateIdentifier:@"WV" andType:nil];

    // Do any additional setup after loading the view.
    NSLog(@"viewDidLoad called: %i\n", [gauges.gaugeList count]);
} 
```

# database - 如何创建一个允许用户离线工作的 Windows 窗体应用程序？

> ID：15548635
> 
> 赞同：0
> 
> 时间：2013-03-21T13:14:33.737
> 
> 标签：database, sync, local, offline

我想创建一个 Windows 窗体应用程序，当有连接时，它应该能够在服务器数据库上添加/编辑/删除记录，但如果有任何连接问题，用户仍然应该能够脱机工作，然后将其同步回服务器当连接恢复时。

我阅读了有关 Microsoft Sync Framework 和本地数据库缓存的信息，但在 Visual Studio 2012 中找不到本地数据库缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:17:14.270

您可以拥有自己的数据集，可以离线更新。唯一的事情就是将数据集写入 XML 文件，当用户更改时，更新数据集并使用 ds.writexml 和 ds.writexmlschema 方法重写相应的数据集 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:01:35.380

本地数据库缓存在 VS 2012 中被取出。

但是，您可以将 SQL Server Compact Toolbox 用于类似的东西，请参阅：[SQL SERVER COMPACT TOOLBOX SYNC FRAMEWORK SUPPORT](http://jtabadero.wordpress.com/2012/05/02/sql-server-compact-toolbox-sync-framework-support/)

也不会阻止您使用 Sync Fx 对同步进行手动编码。

# twitter-bootstrap - 使用 bootstrap + font-awesome 减少 CSS “别名”

> ID：15548636
> 
> 赞同：7
> 
> 时间：2013-03-21T13:14:38.053
> 
> 标签：twitter-bootstrap, less, font-awesome

我的网站使用`bootstrap`+`font-awesome`并且我正在尝试在我的`site.less`文件中创建一个“别名”：

```
.icon-domain { .icon-fire; }
.icon-group  { .icon-tags; } 
```

我这样做的原因是因为我的网站上有一个“域”实体，将来我可能会更改图标，所以我不想直接使用 HTML 中的“火”图标。

该`icon-group`课程适用于我的代码，但`icon-domain`没有。据我所知，这是因为 font-awesome 实际上`icon-group`在其代码中有一个类。据我了解，`lesscss`我可以在另一个类中包含一个类，以将它们组合成一个新类，但它在这里根本不起作用。

如果我在我的`site.less`：

```
.icon-domain { &:before { content: "\f06d"; } } 
```

但这并不理想，因为我必须自己定义内容并且使用`.icon-domain { .icon-fire; &:before; }`是语法错误。有没有办法使这项工作正常进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T17:28:59.910

您需要将 Font Awesome CSS 导入您的 LESS 文件并[让 LESS 处理它](http://lesscss.org/#-importing)。

没有它，LESS 将无法检测到您尝试使用的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T09:01:31.723

您需要包含足够的引导依赖项：

```
@import "bootstrap/variables.less";
@import "bootstrap/mixins.less";
@import "bootstrap/sprites.less";

.icon-domain { .icon-fire; }
.icon-group  { .icon-tags; } 
```

# html - 优化 CSS：Sprite 还是重复背景图像？

> ID：15548639
> 
> 赞同：2
> 
> 时间：2013-03-21T13:14:51.097
> 
> 标签：html, css, performance, css-sprites

所以我的任务是优化网站的 CSS。目前，他们的按钮都是使用图像精灵完成的，如下所示：

![图像按钮精灵](../Images/fb590d0fa42394836b30b7b919fe8102.png)

这些精灵都被放入一个大的 .png 文件中（上面有 40 个左右不同的按钮）。

如果我将按钮作为 HTML 而不是图像，我想它会类似于以下内容：

```
<style type="text/css">
  a.button
  {
    display: block;
    width: 175px;
    height: 35px;
    background: url("../images/green-gradient.jpg");
    background-repeat: repeat-x;
  }

  a.button:hover
  {
   background: url("../images/green-gradient-hover");
  }
</style>

<a href="#" class="button">Arrange Demo</a> 
```

将这些按钮作为上面详述的 HTML （重复 1 像素 x 35 像素的重复背景图像）或像现在这样的精灵会更优化吗？

如果我确实像上面那样按照 HTML 进行操作，那么在悬停时使用不同的重复背景是否会对性能产生影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:24:06.793

你上面的方法肯定会更有效，因为你正在加载一个较小的文件并重新使用它。也就是说，如果可能的话，使用 CSS3 渐变可能会更有效。您还可以使用一些 javascript 使其对浏览器更加友好，例如modernizr。

请参阅[Google PageSpeed Insights](https://developers.google.com/speed/pagespeed/insights#)以分析您的网站加载时间。

请参阅[Can I Use It](http://caniuse.com/css-gradients)查看浏览器对 CSS3 渐变的支持。

# php - 需要帮助修改 javascript（将 php 值插入其中）

> ID：15548641
> 
> 赞同：1
> 
> 时间：2013-03-21T13:14:52.017
> 
> 标签：php, javascript, jquery

得到这个从 txt 文件读取数据（url）的 javascript，然后将每个 url 放入一个框架中，计算在 iframe 中加载该 url 所需的时间，然后将结果显示为 html `div`。

这是代码：

```
<script type="text/javascript">
   $.get("imones.txt", function (data) {
        var array = data.split(/\r\n|\r|\n/);
        var beforeLoad = (new Date()).getTime(); 
        var loadTimes = []; 
            var beforeTimes = [];               
        $('#frame_id').on('load', function () {                                 
            beforeTimes.push(beforeLoad);
            loadTimes.push((new Date()).getTime()); 
            $('#frame_id').attr('src', array.shift());
                try {
                $.each(loadTimes, function (index, value) { 
                    var result = (value - beforeTimes[index]) / 1000; 
                        if (result < 0) { 
                            result = result * (-1);
                        }
                    $("#loadingtime" + [index]).html(result);                       
                    beforeLoad = value; 
                });
                } catch(ex) {}
        }).attr('src', array.shift()); 
    });
</script> 
```

imones.txt 有这样的数据写入其中 -`example1.com, example2.com`等等。而不是读取这个`imones.txt`文件，我想用一个 php 数组替换它：

```
$url_array = array();
$url_array[] = 'example1.com';
$url_array[] = 'example2.com'; 
```

`$("#loadingtime" + [index]).html(result);`然后我不想将结果显示到 html div ( ) 中，而是将该结果放入另一个 php 数组中：

```
$php_array[] = $("#loadingtime" + [index]).html(result); 
```

有人可以帮我这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:56:56.210

解决这个想法：

```
// frontend
$.get(
    "path_to_get_url_array", // server function
    function(url_array){ // this receive your $url_array data
        $.each(url_array, function(i, item) {
            // run your code over item to calculate time

            // save loadingtime
            var loadingtime = '';
            $.post(
                    "path_to_save_loadingtime", // server function
                    {
                        loadingtime = $("#loadingtime" + [index]).html(result);
                    }
            });
    }, 'json');

// backend get_url_array
function get_url_array()
{
    // get $url_array from somewhere
    echo json_encode($url_array);
    exit;
}

// backend save_loadingtime
function save_loadingtime()
{
    $loadingtime = $_REQUEST['loadingtime'];
    // save $loadingtime to db
}

// when you want acess you data get it 
function create_array()
{
    // read all $loadingtime values from db     
    // populate $php_array
    return $php_array;
} 
```

# django - 关系中的 Django 和站点框架链接

> ID：15548642
> 
> 赞同：0
> 
> 时间：2013-03-21T13:14:53.933
> 
> 标签：django, django-models

关于最有用的 django 框架之一的一个小问题：

```
django.contrib.sites
```

假设我有一个模型：

```
class MyModel(models.Model):
    info = models.TextField()
    site = models.ManyToManyField(Site)
    objects = models.Manager()
    on_site = CurrentSiteManager() 
```

和另一个模型，它链接到上面给出的：

```
class MyModelSupplement(models.Model):
    info = models.TextField()
    parent_model = models.ForeignKey(MyModel) 
```

Scheme 规定，MyModelSupplement 不能属于站点，它的父级不属于。

有了这个结构，我可以简单地通过调用来访问给定站点上的**MyModel**对象

```
MyModel.on_site.all()
```

代码。**在MyModelSupplement**模型上实现相同目标的最佳方法是什么？

我可以想出几种方法来解决这个问题：

1.  将相同的**站点**字段放在 MyModelSupplement 中并定义相同的 CurrentSiteManager（这不会有点多余吗？）
2.  利用`MyModelSupplement.objects.filter(parent_model__site__id = some_site_id)`
3.  `MyModel.on_site.all().values_list('mymodelsupplement')`
4.  甚至去这个变种：

```
my_models = MyModel.on_site.all()      
my_models_supplements = MyModelSupplements.objects.filter(parent_model__in=my_models).select_related()
```

有没有更好的方法来完成上述任务？请注意，我需要同时和单独访问这两个模型，试图检索给定站点尊重的实例？

也许有一种方法可以说：所有来自的 SiteID 值`MyModel`都应该在`MyModelSupplement`. 如果 SiteID 值已从`MyModel`实例中删除，则应从所有与具有多对多关系`MyModelSupplements`的受尊重实例相关的所有实例中删除。`MyModel`

这是可以实现的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T05:11:53.550

我能够通过以下方式解决此问题：

这发生在一切发生之前：

```
from django.conf import settings 
```

之后，我们创建一个自定义管理器：

```
class OnSiteMyModelSupplementManager(models.Manager):
    def get_query_set(self):
        return super(OnSiteMyModelSupplementManager, self).get_query_set().filter(parent_model__sites=settings.SITE_ID) 
```

并简单地将两行代码放入 MyModelSupplement 类中：

```
objects = models.Manager()
on_site = OnSiteMyModelSupplementManager() 
```

现在我能够检索仅属于当前网站的 MyModelSupplements，就像父母一样。

# google-apps-script - 获取从 StartDate 到 EndDate 的日期列表并将其放在其他工作表中

> ID：15548643
> 
> 赞同：0
> 
> 时间：2013-03-21T13:14:55.153
> 
> 标签：google-apps-script, google-sheets

我喜欢有一个脚本，列出从开始到结束日期的日期并将其放在 sheet2 中。添加新的结束日期和开始日期时，脚本会自动添加日期。日期格式 dd-mm-yy

我希望你能提供帮助，我已经搜索了很多我无法使用的脚本。谢谢。

### 表 1

```
A         B

startDate endDate

5-4-13    12-4-13

19-4-13   26-4-13 
```

### 结果在 Sheet2

```
A

Dates

5-4-13
6-4-13
7-4-13
8-4-13
9-4-13
10-4-13
11-4-13
12-4-13
19-4-13
20-4-13
21-4-13
22-4-13
23-4-13
24-4-13
25-4-13
26-4-13 In column A 
```

感谢大家的回复。我已经用谷歌搜索了很多，并且我已经将一些东西粘贴在一起几乎可以工作。该脚本不打印最后一天，有时它从开始日期的前一天开始。这可能与日期困难和 setValue 有关吗？

```
 function getDates() {
var sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Sheet1");
var export = SpreadsheetApp.getActiveSpreadsheet().getSheetByName("Sheet2");
var startRow = 2;  // First row of data to process
var numRows = sheet.getLastRow()-1;   // Number of rows to process
// Fetch the range of cells A:B
var dataRange = sheet.getRange(startRow, 1, numRows, sheet.getLastColumn());
// Fetch values for each row in the Range.
var data = dataRange.getValues();

for (var i=0; i < data.length; i++) {

var row = data[i];
var startDate = row[0]   //get start date
var endDate = row[1];    //get the end Date
endDate.setHours(0);

var e = Utilities.formatDate(endDate,'GMT+0100','d-M-yyyy');
//Logger.log(endDate+" "+e);      
//Logger.log(date+" ");

startDate.setHours(0);

for (var k=0; k<9; k++) {  

var date=new Date(startDate.getYear(),startDate.getMonth(),startDate.getDate() + k);

//Logger.log(d+" "+date);
var d = Utilities.formatDate(date,"GMT+0100","d-M-yyyy");

var last_row = export.getLastRow();
export.insertRowAfter(last_row);      
var target_range = export.getRange("A"+(last_row + 1));
target_range.setValue(d);

  if (e == d) break;
}
}
} 
```

我找到了解决方案，但我认为这不是最好的解决方案。我希望有更好的解决方案。所以我在 GMT 时间上增加了 11 个小时。并且输出没问题

我改变了; var e = Utilities.formatDate(endDate,'GMT+0100','dM-yyyy'); 至; var e = Utilities.formatDate(endDate,'GMT+1200','dM-yyyy');

和; var d = Utilities.formatDate(date,"GMT+0100","dM-yyyy"); 至; var d = Utilities.formatDate(date,"GMT+1200","dM-yyyy");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-18T13:02:20.000

Try this. You may want to play with the date formats on the way out.

```
function genDates() {

  var ss = SpreadsheetApp.getActiveSpreadsheet();

  // get the dates from sheet 1
  var dates = ss.getSheetByName('Sheet1')
    .getDataRange()
    .getValues()
    .reduce(function(p,c) {
      var startDate = new Date (c[0]);
      var endDate = new Date (c[1]);
      while (startDate.getTime() <= endDate.getTime() ) {
        p.push ( [new Date(startDate)] );
        startDate.setDate( startDate.getDate() +1);
      }
      return p;
    }, []);

  // write the expanded dates to sheet 2
  ss.getSheetByName ('Sheet2')
    .clear()
    .getRange(1,1,dates.length,dates[0].length)
    .setValues (dates);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T01:58:25.957

查找 google 提供的示例。像谷歌驱动器新文件脚本电子表格示例......然后谷歌“日期添加谷歌电子表格”......在手机上......糟糕的拇指打字机......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T02:55:29.293

[https://developers.google.com/apps-script/articles](https://developers.google.com/apps-script/articles)

更好的？我用谷歌搜索给你了......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-14T19:28:25.093

我起草了一个适合我的解决方案，尽管 Google 表格格式化日期的方式可能有点棘手。但是，您可以为整个工作表设置一个时区，这可以解决您的部分问题。请注意，Google 推荐 appendRow() 而不是 setValue()，并且如果需要，此代码不会插入新行。当然，您可以轻松地添加它。我使用 onEdit() 触发器而不是菜单函数来完成此操作。考虑到您的要求，这似乎是明智的。

```
// assumes columns are already set to display dates in dd-mm-yy format
ss = SpreadsheetApp.getActiveSpreadsheet();
ss.setSpreadsheetTimeZone("Etc/GMT-1"); // set spreadsheet timezone to +1:00 (see http://joda-time.sourceforge.net/timezones.html for other values)
sheet1 = ss.getSheetByName("Sheet1");
sheet2 = ss.getSheetByName("Sheet2");

Date.prototype.isEqualTo = function(date) {
  return date.getDate() === this.getDate() && date.getMonth() === this.getMonth() && date.getYear() === this.getYear();
};

function updateValues(start, end) {
  var dateList = makeDateList(start, end);
  dateList.forEach( function(date) {
    sheet2.appendRow(date);
  });
}

function makeDateList(start, end) {
  var newDate = new Date(start.getYear(), start.getMonth(), start.getDate());
  var dateList = [];
  do {
    var date = newDate.getDate();
    var month = newDate.getMonth();
    var year = newDate.getYear();
    var dateString = [date, month, year].join("-");
    dateList.push([dateString]);
    newDate = new Date(year, month, (date + 1));
  } while (newDate.isEqualTo(end) === false);
  return dateList;
}

function onEdit(e) {
  if (ss.getActiveSheet().getName() === "Sheet1") {
    var range = e.range; // you could also rewrite this function to accept ranges of dates instead of just one cell at a time
    var row = range.getRow();
    var column = range.getColumn();
    var adjacentRange = sheet1.getRange(row, 1);
    if (column === 2 && e.range.isBlank() === false && adjacentRange.isBlank() === false) {
      var start = adjacentRange.getValue();
      var end = e.range.getValue();
      updateValues(start, end);
    }
  }
} 
```

# winapi - 需要win32 API和windows store app API之间的映射

> ID：15548645
> 
> 赞同：1
> 
> 时间：2013-03-21T13:14:57.593
> 
> 标签：winapi, windows-8, windows-store-apps

我想将我的旧 Windows 应用程序转换为 Windows 8 商店应用程序，因为 Windows 8 不支持 win32 api，它使用 Windows 应用程序商店 API（win32 api 的包装器），所以我想知道这两个 api 之间是否有映射? 例如，我使用 GetClientRect 在我的旧应用程序中获取窗口的客户区，Windows 8 api 中的等价物是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:44:22.030

有关Windows 应用商店应用程序[中支持的 Win32 功能的参考，](http://msdn.microsoft.com/en-us/library/windows/apps/br205757.aspx)请参阅此列表。除此之外的任何东西都不一定与新功能有 1:1 的映射关系，因此正如@mydogisbox 建议的那样，您必须学习新的 API。

# gwt - 使用 Ant 编译 Vaadin 插件

> ID：15548646
> 
> 赞同：0
> 
> 时间：2013-03-21T13:14:58.467
> 
> 标签：gwt, ant, vaadin

我正在使用名为 ICEPush 的插件将数据异步推送到客户端。顺便说一句，我正在使用 vaadin 7。当我打开页面时，它会抛出以下错误

```
Widgetset does not contain implementation for org.vaadin.artur.icepush.ICEPush. Check its component connector's @Connect mapping, widgetsets GWT module description file and re-compile your widgetset. In case you have downloaded a vaadin add-on package, you might want to refer to add-on instructions. 
```

我使用 ant 作为我的构建脚本。你能帮我完成编译插件的步骤吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-03T09:49:27.127

它很长，但迟到总比永远好。

我创建了一个依赖于我的来源的新任务。

```
<target name="build-widgetset" if="widgetset">
        <java classname="com.google.gwt.dev.Compiler" failonerror="yes"
            fork="yes">
            <arg value="-war" />
            <arg value="${webroot}/VAADIN/widgetsets" />
            <arg value="${widgetset}" />
            <arg value="-logLevel" />
            <arg value="DEBUG" />
            <arg value="-strict" />
            <jvmarg value="-Xmx1024M" />
            <jvmarg value="-Djava.awt.headless=true" />
            <classpath>
                <pathelement path="${sources}" />
                <pathelement path="${workdir}" />
                <path refid="classpath" />
            </classpath>
            <sysproperty key="vFailIfNotSerializable" value="true" />
        </java>

        <!-- cleanup -->
        <delete dir="${webroot}/VAADIN/gwt-unitCache" />
        <delete dir="${webroot}/VAADIN/widgetsets/WEB-INF" />
    </target> 
```

`Classpath`- 所有 Vaadin 库的类路径
`widgetset`- 需要编译的小部件集 - 类似于`com.vaadin.mywidgetset`
`webroot`- 放置已编译源的 Web 目录的根目录，在 Eclipse 中，它将是`WebContent`目录
`sources`- 对源目录的引用
`workdir`- 临时放置已处理文件的临时目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T16:50:27.397

我想你需要调试这个问题。您对小部件集编译有多熟悉？您是否正确设置了 AppWidgetSet.gwt.xml？您是否从 src 目录中清除了所有以前的 widgetset 中间工件？

（这在过去给我带来了痛苦，尤其是从 Vaadin 6 迁移到 7 时。我有一个特定的 maven clean 目标，我在移动 Vaadin 版本时取消注释，以便删除`/src/main/webapp/VAADIN/widgetsets`和`/src/main/webapp/VAADIN/gwt-unitCache`目录。否则它不会完全重新编译小部件集.)

最后，您是否运行了特定于 Ant 的命令来重新编译 Vaadin 小部件集？

我讨厌用这种类型的答案来回答，但是您使用 Ant 是否有特定的原因？如果没有，您可以使用以下说明生成 Vaadin 7 项目时创建的 maven pom：[来自 wiki](https://vaadin.com/wiki/-/wiki/Main/Creating%20a%20Maven%20project)。

将以下插件命令添加到 pom.xml：

```
<plugin>
    <artifactId>maven-clean-plugin</artifactId>
    <version>2.4.1</version>
     <configuration>
         <filesets>
             <fileset>
                 <directory>${basedir}/src/main/webapp/VAADIN/widgetsets</directory>
                 <directory>${basedir}/src/main/webapp/VAADIN/gwt-unitCache</directory>
             </fileset>
         </filesets>
     </configuration>
</plugin> 
```

然后运行：`mvn clean vaadin:clean package`你会没事的。

# unique - 如何在 Dart 中生成唯一 id

> ID：15548652
> 
> 赞同：93
> 
> 时间：2013-03-21T13:15:09.363
> 
> 标签：unique, dart, identity, uuid, uniqueidentifier

我写 websocket 聊天。如何为用户生成唯一ID？

现在我使用这段代码：

```
id = new DateTime.now().millisecondsSinceEpoch; 
```

有没有更简洁的解决方案？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-03-21T13:49:51.587

**1.**有一个UUID的pub包：

[http://pub.dartlang.org/packages/uuid](http://pub.dartlang.org/packages/uuid)

示例用法：

```
import 'package:uuid/uuid.dart';

// Create uuid object
var uuid = Uuid();

// Generate a v1 (time-based) id
uuid.v1(); // -> '6c84fb90-12c4-11e1-840d-7b25c5ee775a'

// Generate a v4 (random) id
uuid.v4(); // -> '110ec58a-a0f2-4ac4-8393-c866d813b8d1'

// Generate a v5 (namespace-name-sha1-based) id
uuid.v5(uuid.NAMESPACE_URL, 'www.google.com'); // -> 'c74a196f-f19d-5ea9-bffd-a2742432fc9c' 
```

**2.**这个src有一个dart GUID生成器

[https://github.com/MikeMitterer/AndroidIconGenerator.DART/blob/445884924/lib/src/model/communication/GUIDGen.dart](https://github.com/MikeMitterer/AndroidIconGenerator.DART/blob/445884924/lib/src/model/communication/GUIDGen.dart)

由于没有明显的许可证，所以我不会直接在此处发布函数 src，但示例用法如下：

```
final String uuid = GUIDGen.generate(); 
```

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2020-02-16T12:30:00.417

在 2020 年，您可以执行`UniqueKey();`内置类：

[https://api.flutter.dev/flutter/widgets/UniqueKey-class.html](https://api.flutter.dev/flutter/widgets/UniqueKey-class.html)

**笔记**

仅与自身相等的密钥。

这不能用 const 构造函数创建，因为这意味着所有实例化的键都是同一个实例，**因此不是唯一的。**

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2021-04-11T07:07:46.537

除了来自 uuid，你还可以尝试这个来生成小的唯一键：

[https://pub.dev/packages/nanoid](https://pub.dev/packages/nanoid)

他们甚至有一个碰撞计算器：

[https://zelark.github.io/nano-id-cc/](https://zelark.github.io/nano-id-cc/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-15T12:59:04.837

如果你喜欢 MongoDB 风格的 id，你可以考虑这个有助于创建对象 id 的小包：

[https://pub.dev/packages/crossplat_objectid](https://pub.dev/packages/crossplat_objectid)

```
import 'package:bson_objectid/bson_objectid.dart';

main() {
  ObjectId id1 = new ObjectId();
  print(id1.toHexString());

  ObjectId id2 = new ObjectId.fromHexString('54495ad94c934721ede76d90');
  print(id2.timestamp);
  print(id2.machineId);
  print(id2.processId);
  print(id2.counter);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-21T17:42:30.533

还有[https://pub.dev/packages/xid](https://pub.dev/packages/xid)，它是无锁的，保证每秒和每个主机/进程有 16,777,216（24 位）唯一 ID

```
import 'package:xid/xid.dart';

void main() {
  var xid = Xid();
  print('generated id: $xid');

}
```

# linux - 如何从“lsof”输出中排除库？

> ID：15548653
> 
> 赞同：0
> 
> 时间：2013-03-21T13:15:12.860
> 
> 标签：linux, lsof

我想借助`lsof`有关已打开资源的信息在日志中打印，但我不希望客户看到使用了哪些库。我浏览了 lsof 手册页，但我无法掌握如何从输出中仅排除库。有没有简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:23:06.097

您可以使用 sed、awk、cut 来解析 lsof 的输出，只显示那些在其第 4 个字段中没有 Lnn 和 ltx 的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-09T15:06:41.577

**您可以使用它的-d**标志及其否定字符**^**从 lsof 的输出中排除内容

 **例如，以下将阻止lsof 显示**txt**文件描述符。

`lsof -d '^txt'`**

# mysql - 删除重复的行并需要在mysql中的所有行中保留一个

> ID：15548655
> 
> 赞同：8
> 
> 时间：2013-03-21T13:15:25.680
> 
> 标签：mysql, sql, sql-delete

我想删除基于两列的重复行，但需要全部保留 1 行。

重复的行可以多于两行，例如，

```
ID  NAME PHONE
--  ---- ----
1   NIL  1234 
2   NIL  1234 
3   NIL  1234 
4   MES  5989 
```

我想从 3 行以上删除 2 行中的任何一行并保留 1 行。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-21T13:17:05.857

```
DELETE  a
FROM    tableA a
        LEFT JOIN
        (
            SELECT MIN(ID) ID, Name, Phone
            FROM    TableA
            GROUP   BY Name, Phone
        ) b ON  a.ID = b.ID AND
                a.NAme = b.Name AND
                a.Phone = b.Phone
WHERE   b.ID IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/87018/1)

执行删除语句后，对列强制执行唯一约束，这样您就不能再次插入重复记录，

```
ALTER TABLE TableA ADD CONSTRAINT tb_uq UNIQUE (Name, Phone) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:18:34.727

```
DELETE
FROM Table
WHERE Table.id NOT IN  (  
    SELECT MIN(idTable) idtable
    FROM idTable
    GROUP BY name, phone) 
```

# c# - 将两个字符串连接成一个十进制值

> ID：15548657
> 
> 赞同：2
> 
> 时间：2013-03-21T13:15:32.047
> 
> 标签：c#, floating-point, decimal

`500.45`我想从两个字符串中获取一个十进制值，例如。如何实现这个操作？

```
decimal value; //like 500.45

string txt1, txt2;
txt1 = "500";
txt2 = "45";

value = Convert.ToDecimal(txt1) + Convert.ToDecimal(txt2); //500.45 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:17:23.357

```
string txt1, txt2;
txt1 = "500";
txt2 = "45";

decimal value = Convert.ToDecimal(string.Format("{0}.{1}", txt1, txt2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:20:39.027

```
value = Convert.ToDecimal(txt1 + "." + txt2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:18:20.167

尝试这个：

```
decimal val;
string txt1 = "500";
string txt2 = "45";
string textValue = txt1 + "." + txt2;
decimal.TryParse(textValue, 
                 NumberStyles.AllowDecimalPoint, 
                 CultureInfo.InvariantCulture, 
                 out val); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T13:29:12.207

显然，每个人都能想出的唯一答案是微不足道的（在中间用一个点连接并解析它）。但是，请*做正确*的事！（我给了足够的提示！）例如，在我的系统上，小数点分隔符是逗号，因此您的所有代码都将不起作用。您必须在中立文化中进行，例如：

```
string integerPart = "500";
string fractionalPart = "45";

decimal result = Decimal.Parse(
    // Combine the strings to a new string "500.45"
    String.Format("{0}.{1}", integerPart, fractionalPart),
    // We allow a leading sign "-500.45", and a decimal point
    NumberStyles.AllowLeadingSign | NumberStyles.AllowDecimalPoint,
    // We use a neutral culture in which the decimal separator is a dot (.)
    CultureInfo.InvariantCulture); 
```

如果字符串是用户输入，则应`TryParse`改用并处理由于用户输入错误而导致失败的情况：

```
decimal result;
if (!Decimal.Parse(
    String.Format("{0}.{1}", integerPart, fractionalPart),
    NumberStyles.AllowLeadingSign | NumberStyles.AllowDecimalPoint,
    CultureInfo.InvariantCulture,
    out result))
{
    // Handle invalid user input.
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-03-21T13:25:05.777

您也可以使用该`string.Join()`方法来完成此操作

```
string txt1, txt2;
txt1 = "500";
txt2 = "45";
var valueJoin = Convert.ToDecimal(string.Join(".", txt1,txt2)); 
```

`Output 500.45`

# amazon-web-services - 亚马逊网络服务：将脚本上传到云端

> ID：15548658
> 
> 赞同：0
> 
> 时间：2013-03-21T13:15:33.683
> 
> 标签：amazon-web-services, amazon-s3, amazon-ec2

我是亚马逊网络服务的新用户。我使用 Rackspace 进行 PHP 托管，切换到 Amazon 对我来说有点混乱。

我已将所有脚本上传到 Amazon S3，但似乎仅用于存储。我已经在 Amazon RDS 上创建了我的数据库，对我来说似乎很好。

**但我不知道在哪里上传我的 PHP 脚本。我主要阅读了有关 EC2 的内容。我已经通过 SSH 设置了环境并创建了实例，但是我应该在哪里上传我的程序代码？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T19:33:43.107

查看**/var/www/html/**是否存在，如果存在，请将文件放在那里。在许多情况下，这将是您的默认 DocumentRoot，只要您有一个安装了 Apache 模块的 PHP 解释器，PHP 就会与您的 Apache Web 服务器一起执行。您可能会使用 SFTP 或 SCP 客户端上传文件，但很可能您必须先上传到您的“普通用户”（例如不是 root）然后移动它们，并为 Web 服务器用户设置权限（可能是 apache或万维网）。

如果您详细说明您正在使用的 AMI 和/或您部署的 Linux 发行版，这可能会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:21:48.813

Amazon S3 只能服务器静态文件。它没有运行php的能力。为了让您的 php 运行，您的一个实例需要安装并运行一个网络服务器，可能是 apache。

您需要查看您的实例并查看哪个实例安装了 apache。它将需要分配一个公共 IP 地址，以便外部世界能够访问它。

如果您使用的是 apache，那么您需要找出它被配置为从哪里为您的站点提供服务。我的配置为使用 /var/www，这是在

```
/etc/apache2/sites-available/default 
```

在名为 DocumentRoot 的设置中。

# c# - WPF 数据网格 [System.Windows.Data 错误：4]

> ID：15548662
> 
> 赞同：4
> 
> 时间：2013-03-21T13:15:39.800
> 
> 标签：c#, wpf, datagrid

我有一个 WPF 应用程序，`DataGrid`如下所示：

数据网格（*简化*）：

```
<DataGrid x:Name="CoreServiceLogDataGrid"
Grid.Row="0"
Height="auto"
ItemsSource="{Binding Source={StaticResource CoreServiceCollection}}"
AutoGenerateColumns="False"
CanUserReorderColumns="True"
CanUserSortColumns="True"
IsReadOnly="True">

    <DataGrid.Columns>
        <DataGridTextColumn x:Name="ID"
            Header="ID"
            Binding="{Binding ID}" />

        <DataGridTextColumn Binding="{Binding Timestamp}"
            Header="Timestamp" />

    </DataGrid.Columns>

</DataGrid> 
```

加载数据时；我收到以下错误（多次）：

```
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.DataGrid', AncestorLevel='1''. BindingExpression:Path=AreRowDetailsFrozen; DataItem=null; target element is 'DataGridDetailsPresenter' (Name=''); target property is 'SelectiveScrollingOrientation' (type 'SelectiveScrollingOrientation')
System.Windows.Data Error: 4 : Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.DataGrid', AncestorLevel='1''. BindingExpression:Path=HeadersVisibility; DataItem=null; target element is 'DataGridRowHeader' (Name=''); target property is 'Visibility' (type 'Visibility') 
```

我不知道为什么会发生这种情况以及如何解决这个问题。

编辑：（有关 CoreServiceLogViewCollection 的信息）

CoreServiceCollection 只是一个 ListCollectionView。

```
 public static ListCollectionView CoreServiceLogViewCollection {
        get {
            if (_coreServiceCollection == null) {
                _coreServiceCollection =
                    new ListCollectionView(LogSession.CoreServiceLogCollection);
            }

            return _coreServiceCollection;
        }
    } 
```

该参数只是一个`ObservableCollection`包含`ID`和`Timestamp`其他属性

EDIT2：实例化在 App.xaml 中完成：

```
 <ResourceDictionary>
       <x:Static Member="vm2:CoreServiceLogView.CoreServiceLogViewCollection"
                          x:Key="CoreServiceCollection" />
   </ResourceDictionary> 
```

编辑 3（风格...）

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                mc:Ignorable="d">

<!-- #columnHeaderDGStyle -->

<!-- Datagrid -->
<Style x:Key="Log4NetDataGridStyle"
       TargetType="DataGrid">

    <Setter Property="ColumnHeaderStyle"
            Value="{DynamicResource DatagridColumnHeaderCustomTemplateStyle}" />

    <Setter Property="RowStyle"
            Value="{DynamicResource Log4NetRowStyle}" />

    <Setter Property="RowDetailsTemplate"
            Value="{DynamicResource RowDetailsTemplate}" />

    <Setter Property="MaxHeight"
            Value="1600">
    </Setter>
    <Setter Property="MaxWidth"
            Value="2560">
    </Setter>

</Style>

<Style x:Key="DataCommuGridStyle"
       TargetType="DataGrid">

    <Setter Property="ColumnHeaderStyle"
            Value="{DynamicResource DatagridColumnHeaderCustomTemplateStyle}" />

    <Setter Property="RowStyle"
            Value="{DynamicResource CommuRowStyle}" />

    <Setter Property="RowDetailsTemplate"
            Value="{DynamicResource RowDetailsTemplate}" />

    <Setter Property="MaxHeight"
            Value="1600">
    </Setter>
    <Setter Property="MaxWidth"
            Value="2560">
    </Setter>

</Style>

<!-- ************************* Row Style ************************* -->
<Style x:Key="Log4NetRowStyle"
       TargetType="DataGridRow">

    <Setter Property="FontSize"
            Value="14" />

    <Setter Property="Background"
            Value="{Binding Path=LogColour.ColorName}" />

    <Setter Property="Height"
            Value="Auto">
    </Setter>

    <Style.Triggers>
        <DataTrigger></DataTrigger>
    </Style.Triggers>

</Style>

<Style x:Key="CommuRowStyle"
       TargetType="DataGridRow">

    <Setter Property="FontSize"
            Value="14" />

    <Setter Property="Background"
            Value="Azure" />

    <Setter Property="Height"
            Value="Auto">
    </Setter>

    <Style.Triggers>
        <DataTrigger></DataTrigger>
    </Style.Triggers>

</Style>

<DataTemplate x:Key="RowDetailsTemplate">
    <Border BorderThickness="0"
            Padding="5" >

        <Border.Background>
            <LinearGradientBrush StartPoint="0,0"
                                 EndPoint="0,1" Opacity="0.2">
                <GradientStop Color="White"
                              Offset="0" />
                <GradientStop Color="Black"
                              Offset="1" />
            </LinearGradientBrush>

        </Border.Background>

        <!-- alternative with Expancer -->
        <Expander IsExpanded="True"
                  HorizontalAlignment="Left"
                  BorderThickness="1,1,1,5"
                  MaxHeight="300"
                  MaxWidth="900">

            <Expander.Header>
                <DockPanel>
                    <TextBlock FontSize="12"
                               Text="LoggingMessage: "
                               VerticalAlignment="Center" />
                </DockPanel>
            </Expander.Header>

            <Expander.Content>
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                              HorizontalScrollBarVisibility="Auto"
                              CanContentScroll="True"
                              Style="{StaticResource LeftScrollViewer}">
                    <StackPanel Orientation="Vertical">

                        <TextBox FontSize="16"
                                 BorderThickness="0"
                                 IsReadOnly="True"
                                 Background="Transparent"
                                 Foreground="Black"
                                 TextWrapping="Wrap"
                                 Text="{Binding LoggingMessage, Mode=OneWay}" />
                    </StackPanel>
                </ScrollViewer>
            </Expander.Content>
        </Expander>

    </Border>

</DataTemplate>

<Style x:Key="GroupHeaderStyle"
       TargetType="{x:Type GroupItem}">
    <Setter Property="Margin"
            Value="0,0,0,5" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type GroupItem}">
                <Expander IsExpanded="False"
                          Background="#FF112255"
                          BorderBrush="#FF002255"
                          Foreground="Black"
                          BorderThickness="1,1,1,5">
                    <Expander.Header>
                        <DockPanel>
                            <TextBlock FontWeight="Bold"
                                       Foreground="White"
                                       Text="{Binding Path=Name}"
                                       Margin="5,0,0,0"
                                       Width="100" />
                            <TextBlock FontWeight="Bold"
                                       Foreground="White"
                                       Text="{Binding Path=ItemCount}" />
                        </DockPanel>
                    </Expander.Header>

                    <Expander.Content>
                        <ItemsPresenter />
                    </Expander.Content>
                </Expander>

            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<!-- ******************** DataTemplate ******************** -->

</ResourceDictionary> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T14:20:56.013

不久前我写了一个关于[如何阅读 WPF 绑定错误](https://stackoverflow.com/questions/14510931/is-there-a-way-to-determine-where-is-a-wpf-binding-declared-created/14523290#14523290)的答案。基本上，在分号上分解你的错误并从下到上开始阅读它，它应该让你知道绑定错误在哪里：

*   System.Windows.Data 错误：4：
    *   无法通过引用“RelativeSource FindAncestor，AncestorType='System.Windows.Controls.DataGrid'，AncestorLevel='1'”找到绑定源。绑定表达式：路径=AreRowDetailsFrozen；
*   数据项=空；
*   目标元素是'DataGridDetailsPresenter'（名称=''）；
*   目标属性是“SelectiveScrollingOrientation”（输入“SelectiveScrollingOrientation”）

和

*   System.Windows.Data 错误：4：
    *   无法通过引用“RelativeSource FindAncestor，AncestorType='System.Windows.Controls.DataGrid'，AncestorLevel='1'”找到绑定源。BindingExpression:Path=HeadersVisibility;
*   数据项=空；
*   目标元素是'DataGridRowHeader'（名称=''）；
*   目标属性是“可见性”（类型“可见性”）

从下往上看，第一个错误告诉你

*   包含导致错误的绑定的属性是`SelectiveScrollingOrientation`
*   包含有问题的属性的 UI 对象是 a `DataGridDetailsPresenter`，没有指定名称
*   UI对象的`DataContext`背后是`null`
*   绑定试图找到一个`RelativeSource`类型`DataGrid`，以便它可以绑定到该`AreRowDetailsFrozen`属性，但它未能找到`RelativeSource`

因此，请查看您的代码以查找类似于以下内容的内容：

```
<DataGridDetailsPresenter SelectiveScrollingOrientation="{Binding 
    Path=AreRowDetailsFrozen, 
    RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}" /> 
```

第二个错误告诉你

*   包含导致错误的绑定的属性是`Visibility`
*   包含有问题的属性的 UI 对象是 a `DataGridRowHeader`，没有指定名称
*   UI对象的`DataContext`背后是`null`
*   绑定试图找到一个`RelativeSource`类型`DataGrid`，以便它可以绑定到该`HeadersVisibility`属性，但它未能找到`RelativeSource`

因此，请查看您的代码以查找类似于以下内容的内容：

```
<DataGridRowHeader Visibility="{Binding 
    Path=HeadersVisibility, 
    RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}" /> 
```

根据您发布的代码，第一个可能是您的`LeftScrollViewer`风格，第二个可能是您的`DatagridColumnHeaderCustomTemplateStyle`

如果在 XAML 中查找错误时遇到问题，可以尝试运行应用程序并使用[Snoop](http://snoopwpf.codeplex.com/)之类的工具检查它，它可以让您在 WPF 应用程序运行时查看它的 VisualTree，您应该能够找到确切的那里的绑定错误，因此您可以将其追溯到 XAML 中的源

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-19T13:54:28.707

此错误发生在 DataGridRow 的 ControlTemplate 中，其中包含具有上述绑定的 DataGridRowHeader 和 DataGridDetailsPresenter。对于 .NET 4.5 DataGrid，我遇到了同样的问题。似乎这两个错误仅在 DataGrid 对其项目使用虚拟化时发生，您可以尝试在 DataGrid 中禁用它。在我看来，当 DataGridRow 在虚拟化过程中以某种方式从它的 DataGrid 附加/分离时会发生这种情况，然后绑定会丢失或仍然找不到与 DataGrid 的相对绑定目标。

# html - TinyMCE 在 MVC4 中无法正常工作

> ID：15548664
> 
> 赞同：1
> 
> 时间：2013-03-21T13:15:41.593
> 
> 标签：html, asp.net-mvc-4, tinymce

我在这里有点束缚。我正在尝试在我的 MVC4 项目中使用 TinyMCE 作为文本编辑器。

到目前为止这很简单，我只需要能够正确显示编辑器。

我有 2 类的重要性。

控制器：

```
public class RapportController : Controller
{
    ImageHandler handler = ImageHandler.Instance;
    IDictionary<string, System.Drawing.Image> pics = ImageHandler.Instance.SharedCollection.GetCollection();

    public ActionResult Index()
    {
        return View(handler.SharedCollection.GetCollection().Values.ToList());
    }

    public void GetImage(string name)
    {
        using (MemoryStream s = new MemoryStream())
        {
            pics[name].Save(s, System.Drawing.Imaging.ImageFormat.Png);
            System.Web.Helpers.WebImage webImg = new System.Web.Helpers.WebImage(s);
            webImg.Write();
        }
    } 
```

然后是视图，这是我试图让 TinyMCE 工作的地方：

```
@model IList<System.Drawing.Image> 
```

@{ ViewBag.Title = "索引"; }

关系

tinyMCE.init({ mode: "textareas", theme: "advanced", plugins: "emotions,spellchecker,advhr,insertdatetime,preview", // 主题选项 - button# 表示行# only theme_advanced_buttons1: "newdocument,|,粗体，斜体，下划线，|，左对齐，居中对齐，右对齐，字体选择，字体大小选择，格式选择”，theme_advanced_buttons2：“剪切，复制，粘贴，|，bullist，numlist，|，outdent，缩进，|，撤消，重做，|，链接，取消链接，锚点，图像，|，代码，预览，|，前景色，背景色”，theme_advanced_buttons3：“插入日期，插入时间，|，拼写检查器，advhr，，removeformat，|，sub，sup，|，charmap，情绪”， theme_advanced_toolbar_location：“顶部”，theme_advanced_toolbar_align：“左”，theme_advanced_statusbar_location: "底部", theme_advanced_resizing: true });

这是一些可以用 TinyMCE 编辑的内容。

```
<div class="float-right">
    <ul id="images">
        @foreach (System.Drawing.Image item in Model) 
        {
            MemoryStream stream = new MemoryStream();    
            item.Save(stream, System.Drawing.Imaging.ImageFormat.Png);
            stream.Seek(0, SeekOrigin.Begin);
            string base64 = Convert.ToBase64String(stream.ToArray());
            <li>                 
                <a href="JavaScript:newPopup('data:image/gif;base64,@base64');"><img height="100" width="200" src="data:image/gif;base64,@base64"/></a>             
            </li>
        }
    </ul>
</div> 
```

// 弹窗代码 function newPopup(url) { popupWindow = window.open( url, 'popUpWindow', 'height=600,width=1100,left=10,top=10,resizable=no,scrollbars=no,toolbar=否，菜单栏=否，位置=否，目录=否，状态=是') }

出于某种原因，最终看起来像这样： [它看起来如何](http://imageshack.us/photo/my-images/138/failyj.jpg/)

知道为什么我没有从 TinyMCE 获得任何功能吗？

先感谢您 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:03:33.927

弄清楚了。在定义 TinyMCE 的位置时，不允许使用本地路径。

# c# - 如何设置我的 Windows azure 帐户以支持节点 js 脚本？

> ID：15548665
> 
> 赞同：1
> 
> 时间：2013-03-21T13:15:42.327
> 
> 标签：c#, node.js, azure, iisnode

多亏了 iisnode，我已经能够在本地模拟器上运行节点 js 脚本。但是当我将我的项目发布到 Windows azure 时，节点 js 脚本不起作用。我是否必须在我的天蓝色上设置一些东西才能运行节点 js 脚本，比如在天蓝色上安装 iisnode 或节点 js？我猜他们会默认安装。我对 Windows azure 很陌生，请指导我如何在我的 azure 云平台上运行节点 js 脚本。

编辑： [https ://www.windowsazure.com/en-us/develop/nodejs/tutorials/create-a-website-(mac)/](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/create-a-website-(mac)/)

上面的文章说该平台应该有 Node.js 和适用于 Node.js 的 Windows Azure SDK 的有效安装，所以我猜想它们在 azure 上默认没有安装？关于如何检查的任何想法？甚至我如何安装它们？通过 RDP 进入我的角色实例还是通过 azure 管理门户的某种方式？

# javascript - Javascript分配多个数组

> ID：15548666
> 
> 赞同：0
> 
> 时间：2013-03-21T13:15:42.813
> 
> 标签：javascript, variables, variable-assignment

我需要在特定函数中使用各种数组，但我不禁认为我这样做的效率非常低：

```
function GetTimeLeft(){
var TimeUnformatted = document.querySelectorAll('[id="SomeIdName"]')[0].innerText.match(/\d{1,}d\s\d{1,}h/ig);
var i;
if (TimeUnformatted){
    var Daysunformatted = [];
    var Hoursunformatted = [];
    var DaysFormatted = [];
    var HoursFormatted = [];
    var DaysToSeconds = [];
    var HoursToSeconds = [];
    var TimeInSeconds = [];
    for (i=0;i<TimeUnformatted.length;i++){
        Daysunformatted[i]  = TimeUnformatted[i].match(/\d{1,}d/)[0];
        Hoursunformatted[i] = TimeUnformatted[i].match(/\d{1,}h/)[0];
        if (Daysunformatted[i])  DaysFormatted[i]  = Number(Daysunformatted[i].match(/\d{1,}/)[0]);
        if (Hoursunformatted[i]) HoursFormatted[i] = Number(Hoursunformatted[i].match(/\d{1,}/)[0]);

        if (DaysFormatted[i])  DaysToSeconds[i]  = DaysFormatted[i]*24*60*60;
        if (HoursFormatted[i]) HoursToSeconds[i] = HoursFormatted[i]*60*60;

        if (DaysToSeconds[i] && HoursToSeconds[i]) TimeInSeconds[i] = DaysToSeconds[i] + HoursToSeconds[i];
    }
    return TimeInSeconds;//an Array.
} else {
    return [0];
} 
```

}

编辑：说清楚，因为我表达得很糟糕。我尝试“随时随地分配”，没有最初的 var 语句，但 javascript 大喊大叫并告诉我他没想到“[”：

```
function GetTimeLeft(){
var TimeUnformatted = document.querySelectorAll('[id="SomeIdName"]')[0].innerText.match(/\d{1,}d\s\d{1,}h/ig);
var i;
if (TimeUnformatted){
    for (i=0;i<TimeUnformatted.length;i++){
        var Daysunformatted[i]  = TimeUnformatted[i].match(/\d{1,}d/)[0];
        var Hoursunformatted[i] = TimeUnformatted[i].match(/\d{1,}h/)[0];
        if (Daysunformatted[i])  var DaysFormatted[i]  = Number(Daysunformatted[i].match(/\d{1,}/)[0]);
        if (Hoursunformatted[i]) var HoursFormatted[i] = Number(Hoursunformatted[i].match(/\d{1,}/)[0]);

        if (DaysFormatted[i])  var DaysToSeconds[i]  = DaysFormatted[i]*24*60*60;
        if (HoursFormatted[i]) var HoursToSeconds[i] = HoursFormatted[i]*60*60;

        if (DaysToSeconds[i] && HoursToSeconds[i]) var TimeInSeconds[i] = DaysToSeconds[i] + HoursToSeconds[i];
    }
    return TimeInSeconds;//an Array.
} else {
    return [0];
} 
```

我知道我可以做多项任务，但仍然没有更好的方法来做我想做的事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:17:46.303

那行代码的问题是var。删除`var`它，它就像你上面的代码一样工作。

```
Daysunformatted[i]  = TimeUnformatted[i].match(/\d{1,}d/)[0]; 
```

我能看到改进代码的唯一方法是将 reg exp 移到 for 循环之外。

```
var reDays = /\d{1,}d/;
var reHours = /\d{1,}h/;
for (i=0;i<TimeUnformatted.length;i++){
        Daysunformatted[i]  = TimeUnformatted[i].match(reDays)[0];
        Hoursunformatted[i] = TimeUnformatted[i].match(reHours)[0]; 
```

并且您可以使用捕获组来获取小时数，因此您不必进行第二次降低 d/h 的匹配。

```
var reDays = /(\d{1,})d/;
var TimeUnformatted = "10d 1h";
 Daysunformatted[i]  = (TimeUnformatted[i].match(reDays) || [,])[1]; 
```

# iphone - 如何在 ios 6 的 facebook 和 twitter 上自动分享？

> ID：15548670
> 
> 赞同：1
> 
> 时间：2013-03-21T13:15:48.187
> 
> 标签：iphone, facebook, twitter, share

我在我的应用程序中使用 facebook 和 twitter 共享，在这里我想共享默认链接和文本而不显示共享窗口，我尝试了很多方法但我仍然没有得到解决方案。

这是我的代码：

```
 NSString *str_face=[NSString stringWithFormat:@"Another insta from Dealnabit just claimed now, Got yours now"];
 SLComposeViewController *facebookPostVC =[SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook ];

[facebookPostVC addImage:[UIImage imageNamed:@"Default.png"]];

[facebookPostVC setInitialText:str_face];

[self presentViewController:facebookPostVC animated:YES completion:Nil];` 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T13:37:02.530

1.Facebook 使用 Accounts Framework 和 Social Framework 的 SLRequest 没有对话

```
-(void)Post
{
ACAccountStore *accountStore = [[ACAccountStore alloc] init];

ACAccountType *facebookAccountType = [self.accountStore 
    accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

// Specify App ID and permissions
NSDictionary *options = @{
      ACFacebookAppIdKey: @"my app id",
      ACFacebookPermissionsKey: @[@"publish_stream", @"publish_actions"],
      ACFacebookAudeinceKey: ACFacebookAudienceFriends
};

[accountStore requestAccessToAccountsWithType:facebookAccountType 
      options:options completion:^(BOOL granted, NSError *e) {
        if (granted) {
            NSArray *accounts = [self.accountStore 
                    accountsWithAccountType:facebookAccountType];
            facebookAccount = [accounts lastObject];
        }
        else
        {
            // Handle Failure
        }
}];

NSDictionary *parameters = @{@"message": @"test post"};

NSURL *feedURL = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"];

SLRequest *feedRequest = [SLRequest 
        requestForServiceType:SLServiceTypeFacebook
        requestMethod:SLRequestMethodPOST 
        URL:feedURL 
        parameters:parameters];

    feedRequest.account = self.facebookAccount;

    [feedRequest performRequestWithHandler:^(NSData *responseData, 
           NSHTTPURLResponse *urlResponse, NSError *error)
    {
        // Handle response
    }];
} 
```

1.  Twitter 发布 iOS6 没有对话

    ```
     -(void)PostToTwitter
      {

     ACAccountStore *account = [[ACAccountStore alloc] init];
     ACAccountType *accountType = [account accountTypeWithAccountTypeIdentifier:   
    ACAccountTypeIdentifierTwitter];

    [account requestAccessToAccountsWithType:accountType options:nil 
           completion:^(BOOL granted, NSError *error)
      {
     if (granted == YES)
     {
          NSArray *arrayOfAccounts = [account 
                 accountsWithAccountType:accountType];

          if ([arrayOfAccounts count] > 0)
          {
            ACAccount *twitterAccount = [arrayOfAccounts lastObject];

            NSDictionary *message = @{@"status": @”Test Twitter post from iOS 6”};

            NSURL *requestURL = [NSURL 
             URLWithString:@"http://api.twitter.com/1/statuses/update.json"];

            SLRequest *postRequest = [SLRequest 
                requestForServiceType:SLServiceTypeTwitter
                       requestMethod:SLRequestMethodPOST
                       URL:requestURL parameters:message];
          }
     }];
      }
       } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-15T20:15:28.773

我认为 Twitter 示例帖子缺少执行请求：

```
 // Post the request
 [postRequest setAccount:twitterAccount];

 // Block handler to manage the response
 [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error)
      {
       NSLog(@"Twitter response, HTTP response: %i", [urlResponse statusCode]);
      }]; 
```

我会使用最新版本的 API 和 https：

```
NSURL *requestURL = [NSURLURLWithString:@"https://api.twitter.com/1.1/statuses/update.json"]; 
```

# opengl - 使用 glTranslate 的 OpenGL 动画

> ID：15548675
> 
> 赞同：1
> 
> 时间：2013-03-21T13:15:59.090
> 
> 标签：opengl, translation

我正在尝试使用`glTranslate`.

我使用以下代码使用 OpenGL 绘制正方形：

```
 void drawEnemy (RECT rect){
    glPushMatrix();

    //move enemy left then right
    glTranslatef(+right, 0.0, 0.0); //animate right
    glTranslatef(-left, 0.0, 0.0); //animate left

    glBegin(GL_QUADS);
    glColor3f(238, 0.0, 0.0);
        glVertex3f(rect.x, rect.y, 0.0);
    glColor3f(128, 0.0, 128);
        glVertex3f(rect.x, rect.y+rect.h, 0.0);
    glColor3f(238, 0.0, 0.0);
        glVertex3f(rect.x+rect.w, rect.y+rect.h, 0.0);
    glColor3f(128, 0.0, 128);
        glVertex3f(rect.x+rect.w, rect.y, 0.0);
        glEnd();
    glPopMatrix();
    } 
```

我正在尝试控制沿 x 轴覆盖的长度，然后使用此代码以相反的方向返回：

```
 void timer(int t)
    {   
    right +=0.5f;
    if(right>=platform1.x+platform1.w)
        right-=0.5f;

    left+=0.5f;
    if(left<=platform1.x)
        left-=0.5f;

    glutPostRedisplay();
    glutTimerFunc(25,timer,0);
    } 
```

我知道 Opengl 只是一个图形包，不一定用于动画，但出于自学的目的，我真的很想尽可能简单地实现这一点。

目前，该程序使广场永远正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:19:21.820

你为什么将你的动作表达为两个（`left`和`right`）的组合？这似乎过于复杂。

只需使用单个`posX`变量，并根据按键增加/减少它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:19:46.510

看这行代码：

```
if(left<=platform1.x)
    left-=0.5f; 
```

如果`left = 0`和会发生什么`platform1.x = 1`？

**编辑：**

听起来您想要跟踪当前位置和移动方向，如下所示：

```
double dir = 1;
double x = platform1.x;

void timer(int t) { 
   x += dir;
   if(x < platform1.x || x > platform1.x + platform1.w) {
      dir = -dir;
      x += dir;
   }
   ...
}

void drawEnemy(RECT rect) {
   ...
   glTranslatef(x, 0.0, 0.0);
   ...
} 
```

# jquery - 在 IE 中附加了一些奇怪的 jquery 的 div 类

> ID：15548676
> 
> 赞同：2
> 
> 时间：2013-03-21T13:16:08.070
> 
> 标签：jquery, html

该代码 `<div class="clickplus"></div>`在 chrome/FF 中运行良好

但在 IE 8 中，我明白它`<div class="clickplus" jQuery164045256094993473433="37">`实际上是什么意思？

我以前在IE中从未见过这种行为。它是新添加的吗？有一件事是 clickplus 类在 jQuery 中有一个 onclick 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T22:45:11.423

声明以下文档类型：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

# javascript - Windows 8 FlipView 中的垂直滚动

> ID：15548681
> 
> 赞同：1
> 
> 时间：2013-03-21T13:16:20.953
> 
> 标签：javascript, html, windows, windows-store-apps, winjs

是否可以在 WinJS FlipView 中进行垂直滚动？似乎 FlipView 阻止了滚动事件？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:42:46.067

如果您将内容放入需要滚动的 FlipView 控件，但 FlipView 的方向是水平的，您可能需要查看[平移指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh465310.aspx)以确保您的交互模式与建议一致，并且不会导致混乱或困难使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:49:44.800

我已经确认 win-interactive css 类将允许在 FlipView 中垂直滚动。要进行测试，您可以设置一个 FlipView 并使用以下内容作为它的 itemTemplate：

```
<div id="simple_ItemTemplate" data-win-control="WinJS.Binding.Template" style="display: none">
    <div class="overlaidItemTemplate">
        <div style="height: 100%; overflow-y: scroll">
            <div class="win-interactive" style="height: 1000px; background: -ms-linear-gradient(top, #1e5799 0%,#ffffff 100%)">
            </div>
        </div>
    </div>
</div> 
```

# ruby-on-rails-3 - 使用sql插入时触发after_save回调的干净方法

> ID：15548682
> 
> 赞同：0
> 
> 时间：2013-03-21T13:16:26.087
> 
> 标签：ruby-on-rails-3, controller

在我的控制器上的创建操作中，我使用 sql 查询来插入父记录和所有子记录。但它不会触发我需要的 after_save 回调。有没有一种干净的方法来触发这个？我尝试显式调用@record.save，但这会减慢表单的提交速度。谢谢

**编辑1：添加相关模型/控制器代码**

**模型**

```
after_save { do_some_stuff } 
```

**控制器**

```
def create
  insert_query = "SELECT fn_insert_order_all('#{param1}', '#{param2}', '#{param3}', #{param4});"
  new_record = ActiveRecord::Base.connection.execute(insert_query)

  respond_to do |format|
    if new_record[0]["fn_insert_order_all"] != false
      @record = Order.find_by_id((new_record[0]["fn_insert_order_all"]).to_i)
      # @record.save # I can trigger the after_save callback here, but it results in slower performance
      format.json { render json: @record, status: :created }
    else
      error = { message: "record not saved" }
      format.json { render json: error, status: :unprocessable_entity }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T17:56:52.370

check in your model if you call after_create instead of after_save.

In the model the call to the triggered method should be something like:

```
after_create :your_func 
```

In a model with a trigger I have working it looks like this:

```
class Mymodel < ActiveRecord::Base
    {attributes}
    after_create :your_func
        private
            def your_func
                {do the stuff}
            end
end 
```

I hope that helps :)

# javascript - 为什么JS中0.35+0.05等于0.39999999999999997（循环数）？

> ID：15548691
> 
> 赞同：0
> 
> 时间：2013-03-21T13:16:45.557
> 
> 标签：javascript, numbers, sum

在我的 Javascript 代码中，我注意到**0.35+0.05**的结果是**0.39999999999999997**这是一个循环小数，为什么？

# java - Android Drive Api 收到 400 错误请求

> ID：15548692
> 
> 赞同：0
> 
> 时间：2013-03-21T13:16:45.957
> 
> 标签：java, android, google-drive-api, google-oauth

我长期努力尝试将 Google Drive 集成到 android 应用程序中。但这是一个陷阱——谷歌一如既往地感到惊讶——从不好的意义上来说。这一切都始于我依赖谷歌的指示（[第一](https://developers.google.com/drive/quickstart-android)，[第一）这一事实。](https://developers.google.com/drive/quickstart-java)我满足了所有条件 - 创建了 OAuth 2.0，为应用程序创建了一个密钥，应用程序注册，导入的库......通常做了他们要求的所有事情并重新检查了 100 次。但正如预期的那样没有工作 - 在第一种情况下，所有的例子，我收到一个**“403 Forbidden Access Not Configured”**，第二个无法实现，因为谷歌还没有发布密钥。整整一周，我一直在寻找解决这个问题的替代方案——大量检查信息、花费大量精力和时间——但结果是 0。希望的曙光来自于[ArtOfWarfare](https://stackoverflow.com/questions/12164024/android-open-and-save-files-to-from-google-drive-sdk)的一般性问题。但是他提出的代码，据称他工作的代码，我不工作 - 我允许应用程序使用该帐户，然后由于“与 Google 的通信错误”而导致其连接失败，重复尝试产生相同的结果。结果，我画了“他们的”代码只是为了尝试与驱动器通信。因为我在这里写 - 因此它不起作用。下面显示的代码返回**“400 Bad Request Invalid Upload Request”，“**. 您对如何通过授权解决此问题有任何想法，或者有其他成功登录的方法吗？我会很高兴进行建设性的对话。

```
package com.example.hiv;

import java.io.IOException;

import android.accounts.AccountManager;
import android.accounts.AccountManagerCallback;
import android.accounts.AccountManagerFuture;
import android.accounts.OperationCanceledException;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

import com.google.api.client.extensions.android.http.AndroidHttp;
import com.google.api.client.googleapis.auth.oauth2.GoogleCredential;
import com.google.api.client.googleapis.extensions.android.gms.auth.UserRecoverableAuthIOException;
import com.google.api.client.googleapis.services.GoogleKeyInitializer;
import com.google.api.client.http.FileContent;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.json.JsonFactory;
import com.google.api.client.json.gson.GsonFactory;
import com.google.api.services.drive.Drive;

public class ActivityStart extends Activity {

  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout_activity_start);
    String AUTH_TOKEN_TYPE = "oauth2:https://www.googleapis.com/auth/drive";
    AccountManager accountManager = AccountManager.get(this);
    accountManager.invalidateAuthToken(accountManager.getAccounts()[0].type, null);
    accountManager.getAuthToken( accountManager.getAccountsByType("com.google")[0], AUTH_TOKEN_TYPE, null, this,
            new AccountManagerCallback<Bundle>() {

                public void run(final AccountManagerFuture<Bundle> future) {
                    try {
                        String authToken = future.getResult().getString(
                                AccountManager.KEY_AUTHTOKEN);

                            final HttpTransport transport = AndroidHttp.newCompatibleTransport();
                            final JsonFactory jsonFactory = new GsonFactory();
                            GoogleCredential credential = new GoogleCredential();
                            credential.setAccessToken(authToken);
                            final Drive drive = new Drive.Builder(transport, jsonFactory, credential)
                                    .setApplicationName("HIV")
                                    .setGoogleClientRequestInitializer(new GoogleKeyInitializer("*****yDaPx1EtTHpMMMULzYlxjc3xdwsf******"))
                                    .build();

                            Thread t = new Thread(new Runnable() {
                                @Override
                                public void run() {
                                  try {
                                    final com.google.api.services.drive.model.File body = new com.google.api.services.drive.model.File();
                                    body.setTitle("My Test File");
                                    body.setDescription("A Test File");
                                    body.setMimeType("text/plain");

                                    java.io.File fileContent = new java.io.File("data/data/com.example.hiv/document.txt");
                                    FileContent mediaContent = new FileContent("text/plain", fileContent);

                                    com.google.api.services.drive.model.File file = drive.files().insert(body, mediaContent).execute();

                                  } catch (UserRecoverableAuthIOException e) {
                                    e.printStackTrace();
                                  } catch (IOException e) {
                                    e.printStackTrace();
                                  }
                                }
                              });
                              t.start(); 

                    } catch (OperationCanceledException exception) {
                        // TODO
                    } catch (Exception exception) {
                        Log.d(this.getClass().getName(), exception.getMessage());
                    }
                }
            }, null);       
  } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T08:53:09.263

**已解决**：我正在尝试发送大小为 0 kB 的文件。

# php - linkedin + file_get_contents() 无法打开流：HTTP 请求失败！HTTP/1.1 400 错误请求

> ID：15548693
> 
> 赞同：0
> 
> 时间：2013-03-21T13:16:58.417
> 
> 标签：php, linkedin

我正在尝试通过php文件在linkedin组中发布（实际上我想通过cron来做这件事）

错误是：file_get_contents( [https://api.linkedin.com/v1/groups/group_id/posts?oauth2_access_token=xxxxxxx&format=json&content=%7B%22title%22%3A%22my+title+%22%2C%22summary%22% 3A%22my+夏天++%22%7D](https://api.linkedin.com/v1/groups/group_id/posts?oauth2_access_token=xxxxxxx&format=json&content=%7B%22title%22%3A%22my+title+%22%2C%22summary%22%3A%22my+Summery++%22%7D) )

：打开流失败：HTTP 请求失败！第 161 行 /var/www/html/linkedin_update/xyz.php 中的 HTTP/1.1 400 错误请求

请指导我如何解决这个问题......

感谢和问候

# ios - 如何在 iOS 6 中禁用 UITableView 水平滚动？

> ID：15548694
> 
> 赞同：3
> 
> 时间：2013-03-21T13:16:59.950
> 
> 标签：ios, uitableview, ios6, screen-rotation

旋转屏幕后横向打开viewController，UITableView水平滚动如何禁用UITableView水平滚动？我也尝试使用以下代码

```
self.tableView.contentSize = CGSizeMake(self.tableView.frame.size.width, self.tableView.contentSize.height); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T03:38:07.750

粘贴相同的代码

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation    
    {            
 self.tableViewProductChild.contentSize = CGSizeMake(self.tableViewProductChild.frame.size.width, self.tableViewProductChild.contentSize.height);
 } 
```

它现在工作了谢谢你的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:25:35.347

在界面生成器->实用程序->滚动视图部分中，您可以禁用“显示水平滚动条”选项，或在代码中

```
self.tableView.showsHorizontalScrollIndicator = NO; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:32:36.220

试试这个：

```
self.tableView.contentSize = CGSizeMake(self.tableView.frame.size.width, self.tableView.contentSize.height);
[self.tableView reloadData]; 
```

# javascript - 在javascript中引发用户定义的错误

> ID：15548697
> 
> 赞同：-1
> 
> 时间：2013-03-21T13:17:20.893
> 
> 标签：javascript

我试图在javascript中抛出一个异常，我试图给异常一个数字以及消息，但我只得到消息而不是数字为什么？我究竟做错了什么？我的代码是：

```
function ain()
{
    var e = new Error("hello guys" ,12345);
    throw e;
}

(function() {
    try {
       ain();
    }
    catch(e) {
        alert(e.number+"     "+e.message);
    }
}()); 
```

输出是：

```
undefined     hello guys 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:26:17.870

构造[`Error`函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Error)不采用“数字”属性。它只需要一个字符串消息（其他两个参数是非标准的，所以我不会提及它们）。

如果你真的需要使用一个完全自定义的错误对象，你可以只抛出一个对象字面量而不是一个错误：

```
try {
    throw { message: 'hello world', number: 12345};
} catch(e) {
    console.log(e.number + ': ' + e.message);
} 
```

[http://jsfiddle.net/FHc7v/1/](http://jsfiddle.net/FHc7v/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:37:04.207

如果你想传递一个不是行号的数字作为第二个参数，你可能需要考虑创建一个新的错误类型，它继承自主`Error`原型：

```
function MyError(msg, num)
{
    this.name = 'MyError';
    this.message = msg;
    this.number = num || 0;
}
MyError.prototype = new Error;
MyError.prototype.constructor = MyError;
//and if you want:
MyError.prototype.alertMsg = function()
{
    alert(this.name + ': ' + this.message + ' -- ' + this.number);
}; 
```

可以根据需要使用此增强的错误对象：

```
function iThrow()
{
    throw new MyError('I throw errors with numbers', 123);
}
try
{
    iThrow();
}
catch(e)
{
    e.alertMsg();//alerts "MyError: I throw errors with numbers -- 123"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:22:43.627

在这里您可以找到更多信息，它也是特定于浏览器的：

[http://help.dottoro.com/ljfhismo.php](http://help.dottoro.com/ljfhismo.php)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T13:21:48.707

如果您查看此方法的说明，您将看到第二个参数是文件名而不是编号，第三个选项是错误的行号而不是错误代码。

```
new Error([message[, fileName[, lineNumber]]]) 
```

# linux-kernel - 为什么在 linux 上下文切换期间将 $1 保存在 task_struct 中？

> ID：15548700
> 
> 赞同：1
> 
> 时间：2013-03-21T13:17:26.677
> 
> 标签：linux-kernel

Linux 2.6.11 的核心上下文切换可以简化如下：

mov prev,%eax //eax指向prev
mov next,%edx //edx指向next
pushfl //满足编译器 pushl %ebp //满足编译器
movl %esp,484(%eax) //保存esp in prev
movl 484(%edx), %esp //从下一个
movl 加载 esp $1f, 480(%eax) //将 1f 保存在 prev
pushl 480(%edx) //push 1f
jmp __switch_to
1: popl %ebp
popfl

现在，让我们看一下__switch_to中的相关代码。它从 eax 和 edx 寄存器中获取 prev_p 和 next_p 参数。做了很多工作，并以

movl %edi,%eax ret

我的问题是：为什么需要通过指令 movl $1f, 480(%eax) 节省 $1f ？？？据我所知，地址 $1f 是一个常量，由编译器固定，在执行过程中不会改变。因此，保存它没有意义。此外，最重要的是，afaik switch_to 宏仅在源代码中的一处使用。

第二个问题是：为什么在通过 pushl 480(%edx) 推入 $1 后跳转到 __switch_to 是必要的？如果我们只是通过调用指令定期调用它，__switch_to 将返回到 $1 好吧。

# web-services - Glassfish v3 + SOAP，现有 Web 服务未启动

> ID：15548702
> 
> 赞同：0
> 
> 时间：2013-03-21T13:17:30.143
> 
> 标签：web-services, soap, jax-ws, glassfish-3

我没有编写代码，我只是被要求帮助找到问题。我对 SOAP 一无所知。

从 WSDL 生成的 WebService 在旧 Glassfish v2 上运行。

没问题，服务在 portName 和 serviceName 端点上都公开。

然后将该应用程序移至 Glassfish v3。现在只能访问 portName 端点。serviceName 不是。

有没有人有解决这个问题的 5-6 步指南。我没有心情阅读另一份 50 页的 Oracle 文档，承诺帮助解决问题，然后……没有。我涉水过网，已经太久了，坦率地说，我已经束手无策了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:52:56.750

在实现 SOAP 类中，将 wsdlLocation 添加到 @WebService 注释。删除 sun-web.xml 和 sun-jaxws.xml，以及从 web.xml 中删除侦听器 com.sun.xml.ws.transport.http.servlet.WSServletContextListener。最后添加一个基本的 glassfish-web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE glassfish-web-app PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN" "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app error-url="">
  <context-root>/</context-root>
  <class-loader delegate="true"/>
  <jsp-config>
    <property name="keepgenerated" value="true">
      <description>Keep a copy of the generated servlet class' java code.</description>
    </property>
  </jsp-config>
</glassfish-web-app> 
```

之后，服务器现在定位服务本身，并将它们放置在 WebService 注释指定的位置。

# sql - 报告时间表

> ID：15548703
> 
> 赞同：1
> 
> 时间：2013-03-21T13:17:30.473
> 
> 标签：sql, sql-server, reporting-services, ssrs-2008

我需要在 SSRS 2008 R2 中创建一个报告，其中显示培训课程的“日历”。

让我举个例子：

我有一个会话，它有一个开始日期和一个结束日期，并且有一个开始时间和一个结束时间。我想创建一个表格，其中的列是一个月中的几天，而行是小时，在我的情况下，上午 8 点，上午 9 点......

目标是这样的：

![例子](../Images/e9ad6061b145094ba8236c74e6dcbe37.png)

我有一张桌子，我可以在其中获取所有会话，包括开始日期、开始时间和结束时间。

我的担忧再次出现在以下几个方面：

*   您需要一张带有年、月、日的表格吗？
*   王牌时间呢？我也应该有一些桌子吗？还是直接在报表中创建表格？

我没有解决这个问题的想法，想知道一些意见，如果可能的话，请在 Reporting Services 中这样做。

问候。

**第一次编辑：**

我有这张带有数据会话的表：

```
idSession  | nameSession | startDate  |        startTime      |        endTime       | 
    1      |   module 1  | 2013-01-01 | 2013-01-01 09:00:00   |  2013-01-01 09:00:00 |
    2      |   module 2  | 2013-01-01 | 2013-01-01 14:00:00   |  2013-01-01 18:00:00 |
    3      |   module 3  | 2013-01-02 | 2013-01-01 09:00:00   |  2013-01-02 09:00:00 | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:17:24.600

我创建了一个类似的报告，这是一场斗争。最终，我为列和行标题（小时和天）创建了一个主报告，并带有一个子报告来显示详细信息。所以我创建了一个数据集来列出每个小时的值（选择'8:00' union select'8:30' union...等）并将其用作我的行值。列标题是根据提示的日期计算的——所以第一列是选择的日期，第二列是选择的日期加上一天，等等，总共有 6 列，因为我们通常在星期一运行报告-星期六。嵌套详细报告根据从主报告传递的小时和日期值从 db 表中进行选择。

# javascript - 在上面显示 input.focus()

> ID：15548704
> 
> 赞同：0
> 
> 时间：2013-03-21T13:17:37.733
> 
> 标签：javascript, jquery

当我尝试`input.focus();` 输入错误的表单时。光标指向该输入，但由于我有一个高度约为 100 像素的固定标题，因此输入字段不可见。

有没有办法让我超越输入字段之类的`input.focus(-100);`？

我也尝试过`input.scrollTop();`，但它在该输入附近没有任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:27:28.647

这是一些想法。

```
var top = input.offset().top - 100;  // or input.position().top + 100;
$(document).scrollTop(top); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:28:56.030

像这样的东西：http: [//jsfiddle.net/AzRwm/](http://jsfiddle.net/AzRwm/)

```
 <style>
#h{

background:black;
height:100px;
position:fixed;
width:100%;
}
#s{
height:800px;
}
  </style>
  <header id='h'></header>
  <div id="s"></div>
  <input id="i" value='test' />
  <script>
      var i = document.getElementById('i');

     window.scrollTo(0,i.offsetTop + 100);
  </script> 
```

# ajax - 使用 h:commandButton 进行 Ajax 更新和提交

> ID：15548707
> 
> 赞同：6
> 
> 时间：2013-03-21T13:17:44.993
> 
> 标签：ajax, jsf, jsf-2, primefaces

如何更新 div 并使用 进行部分提交`<h:commandButton>`，我以前`<p:commandButton>`通过将 ajax 属性设置为 true 并将更新属性设置为 :statusBlock 来进行部分提交，其中 id`<h:panelGroup>`为 statusBlock。我有一些设计问题，`<p:commandButton>`所以我不能使用它，所以我必须使用`<h:commandButton>`.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-21T13:20:01.523

这是通过在其中嵌套 a 来完成的[`<f:ajax>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/ajax.html)。

在效果上，

```
<p:commandButton ... process="@form" update=":statusBlock" /> 
```

完全一样

```
<h:commandButton ...>
    <f:ajax execute="@form" render=":statusBlock" />
</h:commandButton> 
```

请注意，与 PrimeFaces 等效项的细微差别在于 PrimeFaces 默认为`@form`在进程/执行中，而`<f:ajax>`一个默认为`@this`，因此您可能需要明确指定在 PrimeFaces 组件`execute="@form"`中未指定`process`属性的所有位置。

### 也可以看看：

*   [JSF 2.0 中的通信 - Ajax（异步）POST 表单](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html#AjaxPOSTForm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T13:20:48.330

您可以在 f:ajax 旁边使用标准组件，例如

```
<h:form id="myForm">       
  <h:commandButton value="Push Me">
     <f:ajax execute="myForm" render="statusBlock" />
  </h:commandButton>
  <h:panelGroup id="statusBlock">
  </h:panelGroup> 
</h:form> 
```

# c++ - CppCMS 模板教程：控制器应该在哪里？

> ID：15548708
> 
> 赞同：2
> 
> 时间：2013-03-21T13:17:45.430
> 
> 标签：c++, cppcms

来自[http://cppcms.com/wikipp/en/page/cppcms_1x_tut_hello_templates](http://cppcms.com/wikipp/en/page/cppcms_1x_tut_hello_templates)

控制器是：

```
virtual void main(std::string /*url*/)
{
    content::message c;
    c.text=">>>Hello<<<";
    render("message",c);
} 
```

它说：

> 但在此之前，我们包括我们的`content.h`标题

意味着它在不同的文件中，但我不知道它应该在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:21:19.923

> 在此之前，我们包含我们的 content.h 标头

仅表示控制器需要标头`content.h`才能使用：（本教程开头使用的命名空间）`content::message c;`。`content`这只是意味着您应该添加：`#include "content.h"`在控制器文件的顶部。

控制器文件可以任意命名。但是，本教程希望您`hello.cpp`在教程快结束时调用它。因此，您应该这样称呼它（至少在遵循本教程时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:22:31.187

你可以把它放在一个你喜欢的文件中。但是，下面的编译器命令假定您调用了它`hello.cpp`。这`hello.cpp`应该`#include "content.h"`在它的顶部。

# android - 广播接收

> ID：15548711
> 
> 赞同：0
> 
> 时间：2013-03-21T13:17:55.220
> 
> 标签：android, service, android-broadcast

如何从 Android 设备发送广播消息，以便 vincity 中的另一台 Android 设备可以接收消息并执行适当的操作并回复发件人。怎么办？我应该使用服务还是广播接收器？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T13:25:13.260

更好的选择是使用 android GCM 在向特定设备发送广播时，您必须实现推送通知

看到这个

[http://developer.android.com/google/gcm/index.html](http://developer.android.com/google/gcm/index.html)

# c# - C# 将 Excel 2007 (xlsx) 文件转换为 Excel 2003 (xls) 文件

> ID：15548713
> 
> 赞同：6
> 
> 时间：2013-03-21T13:17:57.663
> 
> 标签：c#, excel, interop, excel-2007

我正在开发一个控制台应用程序，它将 xlsx 文件转换为 xls 文件。我不想将它从 xlsx 重命名为 xls，因为它将在 excel 2007 中打开，但它会在 excel 2003 中显示为损坏的文件。寻找一种加载文档的方法，然后将其保存为 xls 格式.

我当前的代码只是将 xlsx 重命名为 xls

```
string fileName = @"C:\Users\L-3\Desktop\my.xlsx";
string svfileName = @"C:\Users\L-3\Desktop\ssc\my1.xls";
object oMissing = Type.Missing;
var app = new Microsoft.Office.Interop.Excel.Application();
var wb = app.Workbooks.Open(fileName, oMissing, oMissing,
                oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing);
wb.SaveAs(svfileName, XlFileFormat.xlOpenXMLTemplate, Type.Missing, Type.Missing, Type.Missing, Type.Missing, XlSaveAsAccessMode.xlExclusive, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);
app.Quit(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:22:10.477

你的枚举是错误的，而不是 **XlFileFormat.xlOpenXMLTemplate**你想要 **XlFileFormat.xlExcel8**，所以你的代码会是这样的：

```
string fileName = @"C:\Users\L-3\Desktop\my.xlsx";
string svfileName = @"C:\Users\L-3\Desktop\ssc\my1.xls";
object oMissing = Type.Missing;
var app = new Microsoft.Office.Interop.Excel.Application();
var wb = app.Workbooks.Open(fileName, oMissing, oMissing,
                oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing, oMissing);
wb.SaveAs(svfileName, XlFileFormat.xlExcel8, Type.Missing, Type.Missing, Type.Missing, Type.Missing, XlSaveAsAccessMode.xlExclusive, Type.Missing, Type.Missing, Type.Missing, Type.Missing, Type.Missing);
app.Quit(); 
```

更多信息[在这里](https://stackoverflow.com/q/12159513/969613)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:28:15.297

尝试使用 保存`XlFileFormat.xlExcel9795`。你也可以使用`XlFileFormat.xlWorkbookNormal`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:23:05.840

我从[这里](http://www.gemboxsoftware.com/support/articles/convert-xls-xlsx-ods-csv-html-net)找到了以下片段：

```
// Create new XLSX file.
var xlsxFile = new ExcelFile();

// Load data from XLSX file.
xlsxFile.LoadXlsx(fileName + ".xls", XlsxOptions.PreserveMakeCopy);

// Save XLSX file to XLS file.
xlsxFile.SaveXls(fileName + ".xls"); 
```

它使用[这个组件](http://www.gemboxsoftware.com/spreadsheet/overview)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T13:26:27.240

我认为这有您正在寻找的答案：

[Excel 97-2003 的正确“XlFileFormat”枚举是什么](https://stackoverflow.com/questions/12159513/what-is-the-correct-xlfileformat-enumeration-for-excel-97-2003)

您正在使用文件格式`xlOpenXMLTemplate`。尝试`xlExcel8`改用？那应该是 97-2003 Workbooks 的文件格式。

# login - ios6 - 如何在 uisplitviewcontroller 之前显示登录屏幕？

> ID：15548715
> 
> 赞同：1
> 
> 时间：2013-03-21T13:18:12.607
> 
> 标签：login, ios6, uisplitviewcontroller

我正在开发一个带有 UISplitViewController 的应用程序。但是，我需要在 UISPlitViewController 之前显示一个登录屏幕。我创建了一个简单的 UIViewController，并创建了从 DetailViewController 到新 UIViewController 的 segue。我还在 DetailViewController 中创建了一个调用 segue 的 ViewDidAppear。

```
- (void)viewDidAppear:(BOOL)animated 
```

{ [超级 viewDidAppear:animated];

```
 [self performSegueWithIdentifier:@"loginSegue" sender:self]; 
```

}

我收到此错误：“没有标识符为'loginSegue'的segue”

有什么好方法可以做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:53:39.340

我自己找到了解决方案。解决办法是：在AppDelegate中的applicationDidBecomeActive里面调用一个modal。例子：

```
static dispatch_once_t onceToken;

dispatch_once( &onceToken, ^
              {
                  UIStoryboard *storyboard = self.window.rootViewController.storyboard;
                  LoginViewController* launchViewController = [storyboard instantiateViewControllerWithIdentifier:@"LoginViewController"];
                  [self.window.rootViewController presentViewController:launchViewController animated:NO completion:NULL];

                  launchViewController.managedObjectContext = self.managedObjectContext;
              } ); 
```

# php - 如果用户登录，PHP 更改菜单链接

> ID：15548723
> 
> 赞同：1
> 
> 时间：2013-03-21T13:18:30.477
> 
> 标签：php

我需要一些帮助，让我的导航栏替换登录链接以注销已登录的用户。我试过这段代码：

```
<?php   
    if(isset($_SESSION['username'])) {
        echo '<li><a href="logout.php"><span>Log Out</span></a></li>';
    } else {
        echo '<li><a href="login.php"><span>Log In</span></a></li>';
    } 
?> 
```

但它不起作用。它仍然在我的导航栏上显示登录按钮。
我已经在我的 nav.php 中插入了代码 我的 nav.php 中
的代码看起来像这样

```
<div id='cssmenu'>
    <ul>  

        <?php include('include\menuspace.php'); ?>  

        <li><a href='index.php' id='framside' onclick='changeDiv('1')'><span>Framsida</span></a></li>  

        <li><a href='skolen.php' id='skulen'><span>Skulen</span></a></li>  

        <?php include('include\ifnotie.php'); ?>
        <?php include('include\ifie.php'); ?>  

        <li><a href='elevar.php' id='elevrådet' onclick='changeDiv('3')'><span>Elevrådet</span></a></li>  

        <li><a href='ledelsen.php' id='ledelse' onclick='changeDiv('4')'><span>Ledelse</span></a></li>  

        <li><a href='kontakt.php' id='kontakt' onclick='changeDiv('5')'><span>Kontakt</span></a></li>  

        <?php if(isset($_SESSION['username'])) {
        echo '<li><a href="logout.php"><span>Log Out</span></a></li>';
        } else {
        echo '<li><a href="login.php"><span>Log In</span></a></li>';
        } ?>  

    </ul>
</div> 
```

nav.php 是单个文件，我使用`<?php include'(include/nav.php)'; ?>`
每个需要导航栏的 php 文件中的代码。

这是 [访问控制页面的打印屏幕](http://i.stack.imgur.com/rLTMi.png) ，需要您登录才能查看。

- -编辑 - -

我确实像 LotusH 说的那样， `if(isset($_SESSION['username']))`改为 `if(isset($_SESSION['name_of_user']))`

它一直有效，直到我单击注销按钮。然后它不会变回登录。

---EDIT-19.04.2012----

修复了logout变成login的问题，不得不放一个session_destroy()；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:04:58.677

根据输出`var_dump($_SESSION)`

```
array(3) { 
   ["name_of_user"]=> string(13) "Administrator" 
   ["email_of_user"]=> string(19) "ikt-kons-ost@hfk.no" 
   ["usr_7fe2869648"]=> string(13) "Administrator" 
} 
```

在您的评论中，您应该重写`if(isset($_SESSION['username']))`为`if(isset($_SESSION['name_of_user']))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:27:12.690

首先检查你有`start`没有`session`？如果没有，那么写`session_start();`在顶部

然后试试这个代码：

```
<?php   
    if(isset($_SESSION['username']) and $_SESSION['username']!='') {
        echo '<li><a href="logout.php"><span>Log Out</span></a></li>';
    } else {
        echo '<li><a href="login.php"><span>Log In</span></a></li>';
    } 
?> 
```

# windows-phone-7 - WP中静态对象的生命周期

> ID：15548726
> 
> 赞同：1
> 
> 时间：2013-03-21T13:18:38.773
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone, lifecycle

在 WP 应用程序中，我需要在页面导航之间保存授权 cookie。但我担心垃圾收集器可以`static System.net.CookieCollection`在用户在应用程序页面之间导航时抓取我的对象，或者如果用户最小化应用程序或其他东西。

有人可以描述`static objects`Windows Phone 的生命周期吗？

我不想为 cookie 创建数据库，但我需要保存它们以防止每次重新授权。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:37:15.323

我认为您可以使用 Singleton 来存储您的 cookie。这是与模式完全不同的策略，`static`但它可能对您有用。

如果您想更深入地了解单例模式，请查看[http://msdn.microsoft.com/en-us/library/ff650316.aspx 。](http://msdn.microsoft.com/en-us/library/ff650316.aspx)[您可以在http://www.dotnetperls.com/singleton-static](http://www.dotnetperls.com/singleton-static)找到静态类和单例模式之间的有用比较。

无论如何，您必须记住，`static`对象的生命周期和`singleton`它的生命周期完全相同，并且它们的应用程序域也相同。这意味着在用户或操作系统终止应用程序之前，它们的价值不会丢失。

如果您想在应用程序的不同*实例*之间共享 cookie ，即如果应用程序关闭（*由用户或操作系统在后台*关闭），您必须将其值保存在隔离存储中。你可以在`Application_Closing`和`Application_Deactivated`; 前者在应用关闭时调用，后者在应用进入后台时调用。

# javascript - 如何使用带有我们自己的扩展名的驱动器 api 在谷歌驱动器中创建空白文件

> ID：15548729
> 
> 赞同：0
> 
> 时间：2013-03-21T13:18:53.987
> 
> 标签：javascript, google-drive-api

我想创建一个扩展名为 .h 的空白文件并存储在谷歌驱动器中。请让我知道如何使用谷歌驱动器的 api 创建一个空白文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T11:27:14.160

答案不多，但我会尝试使用以下参数创建文件：

1.  标题->（文件名）.h
2.  哑剧类型->“文本/纯文本”

# r - 随机森林对不平衡数据的回归

> ID：15548731
> 
> 赞同：2
> 
> 时间：2013-03-21T13:18:55.833
> 
> 标签：r, regression, sampling, random-forest, cross-validation

我正在使用随机森林的 r 包根据氨基酸序列预测蛋白质对之间的距离，主要兴趣是接近的蛋白质（距离更小）。我的训练数据集由 10k 对蛋白质和它们之间的实际距离组成。然而，很少有蛋白质对（小于 0.2%）之间的距离很小，问题是经过训练的随机森林在预测距离较大的蛋白质之间的距离时变得非常准确，而对于距离较小的蛋白质则非常不利。他们。我尝试对训练数据中距离较远的蛋白质进行下采样，但结果仍然不好。我对紧密的蛋白质（它们之间距离小的那些对）更感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:49:48.047

几个建议：

1) 查看`gbm`包装中的 GBM。

2) 创建更多功能以帮助 RF 了解驱动距离的因素。

3) 绘制误差与单个变量的图，以寻找驱动关系的因素。（ggplot2 非常适合，尤其是使用`colour`and`size`选项。）

4) 您还可以根据距离将 1 或 0 分配给 y 变量（即，如果距离 < x；设置为 1 / 如果距离 >= x；设置为 0）。一旦你有了两个类，你就可以使用 RF 中的 strata 参数来创建均匀平衡的样本，并使用 RF 的importance() 和 varImpPlot() 函数查看哪些变量导致了距离的差异。

5）尝试使用距离相关变量的日志。RF 通常可以很好地补偿非线性，但尝试一下也无妨。

我的猜测是，#2 是你想花时间的地方，尽管它也是最难的，需要最多的思考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-19T06:28:50.040

我认为考虑到您的问题可能会对您有所帮助的是 Synthetic Minority Over-Sampling Technical for Regression (SMOTER)。有一些关于这个主题的研究。但是，与您可能遇到的分类对应物 (SMOTE) 相比，它的探索程度仍然较低。

我可能会建议下面引用的论文，具体取决于您从研究角度理解它的兴趣程度。我非常感谢在生成合成观测值时引入高斯噪声。

如果您对实际解决方案更感兴趣，第一作者在她的 Github 页面上提供了一个 R 实现。[https://github.com/paobranco/SMOGN-LIDTA17](https://github.com/paobranco/SMOGN-LIDTA17)

如果 Python 更能说服你，我最近发布了一个 SMOGN 算法的完全 Pythonic 实现，该算法现在可用并且目前正在单元测试中。[https://github.com/nickkunz/smogn](https://github.com/nickkunz/smogn)

Branco, P.、Torgo, L.、Ribeiro, R. (2017)。“SMOGN：一种不平衡回归的预处理方法”。机器学习研究论文集，74:36-50。[http://proceedings.mlr.press/v74/branco17a/branco17a.pdf](http://proceedings.mlr.press/v74/branco17a/branco17a.pdf)。

# javascript - jQuery 获取 html 选择

> ID：15548737
> 
> 赞同：1
> 
> 时间：2013-03-21T13:19:17.287
> 
> 标签：javascript, jquery, html, selection

我一直在网上搜索一段时间，试图找到解决这个问题的方法。我想要做的是将文本选择的起点和终点转换为它们等效的 html 选择值。

例子：

```
HTML: test text **some <span style="color:red">te**st t</span>ext
TEXT: test text **some te**st text 
```

所以说用户选择了上面**包围的部分。获取文本选择的位置没有问题：开始：10，结束：17。但我想要得到的是选择的位置，包括 html 元素：开始：10，结束：41

任何人都可以为此提出解决方案吗？

编辑：根据要求，我附上了我现有的代码，它获取所选文本的起点和终点。我想要得到的是所选 HTML 的起点和终点。

```
 var start = 0, end = 0;
        var sel, range, priorRange;
        if (typeof window.getSelection != "undefined") {
                range = window.getSelection().getRangeAt(0);
                priorRange = range.cloneRange();
                priorRange.selectNodeContents(el[ 0 ]);
                priorRange.setEnd(range.startContainer, range.startOffset);
                start = priorRange.toString().length;
                end = start + range.toString().length;
        } else if (typeof document.selection != "undefined" &&
                (sel = document.selection).type != "Control") {
                range = sel.createRange();
                priorRange = document.body.createTextRange();
                priorRange.moveToElementText(el[ 0 ]);
                priorRange.setEndPoint("EndToStart", range);
                start = priorRange.text.length;
                end = start + range.text.length;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:55:26.260

好的，这是我想出的解决方案。它获取正常的文本选择点，然后原始转换为 html 点。这可能只适用于基本情况，但这是我的应用程序所需要的。

```
 // this gives me a cross browser start and end position
        // for the text selection
        var start = 0, end = 0;
        var sel, range, priorRange;
        if( typeof window.getSelection != "undefined" ){
                range = window.getSelection( ).getRangeAt( 0 );
                priorRange = range.cloneRange( );
                priorRange.selectNodeContents( el[ 0 ] );
                priorRange.setEnd( range.startContainer, range.startOffset );
                start = priorRange.toString( ).length;
                end = start + range.toString( ).length;
        }
        else if( typeof document.selection != "undefined" && ( sel = document.selection ).type != "Control" ){
                range = sel.createRange( );
                priorRange = document.body.createTextRange( );
                priorRange.moveToElementText( el[ 0 ] );
                priorRange.setEndPoint( "EndToStart", range );
                start = priorRange.text.length;
                end = start + range.text.length;
        }

        // now, get this in terms of html selection
        var html = el.html( ), text = 1, htmlstart = 0, htmlend = 0;
        for( var i = 0, t = 0; i < html.length; ++i ){
                if( html[ i ] == '<' || html[ i ] == '>' ){
                        text = text ? 0 : 1;
                        continue;
                }
                if( text )
                        t++;
                if( t == start )
                        htmlstart = i + 1;
                if( t == end ){
                        htmlend = i + 1;
                        break;
                }
        } 
```

# php - 反序列化 cookie 变量

> ID：15548739
> 
> 赞同：0
> 
> 时间：2013-03-21T13:19:25.163
> 
> 标签：php, arrays, serialization, cookies, setcookie

感谢您查看我的问题。

编码：

```
$array = array("zero","one","true","three");
echo $beforecookie = serialize($array); //<<-- IT WORKS;
print_r(unserialize($beforecookie)); //<<--IT WORKS

setcookie('mycookie', $beforecookie, time()+3600);
echo $aftercookie = $_COOKIE['mycookie']; // <<-- it works perfectly same with $beforecookie

$data = unserialize($aftercookie);
print_r($data); //<<--RETURN NOTHING (the problem)
var_dump($data); //<<-- RETURN bool(false); 
```

我从 cookie 中得到的字符串（从数组中序列化）不能被反序列化；为什么？使用 serialize() 将数组设置为 cookie 后如何取回数组？或者我错过了什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:27:07.320

这段代码：

```
setcookie('mycookie', $beforecookie, time()+3600);
echo $aftercookie = $_COOKIE['mycookie'] // <<-- it works perfectly same with $beforecookie 
```

在浏览器刷新页面之前，您设置的 cookie 对代码不可用。

此外，如果您真的想这样做，请确保将校验和添加到基于服务器端机密的 cookie 和您保存到 cookie 中的数据内容。调查`hash_hmac()`。盲目地反序列化您从不受信任的来源收到的值是不负责任的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T08:46:17.263

需要使用`base64_encode()`后功能`serialize()`。

放：

```
setcookie('name', base64_encode( serialize( $arr ) ) ); 
```

得到：

```
unserialize( base64_decode( $_COOKIE['name']) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:22:48.687

脚本执行后设置的 Cookie 以及标题，因此您无法在页面重新加载之前访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T13:58:09.827

如果您想让您的 cookie 立即可用（而不是像其他人所说的那样在页面刷新后），只需添加

```
$_COOKIE['mycookie'] = $beforecookie; 
```

就在这条线之后

```
setcookie('mycookie', $beforecookie, time()+3600); 
```

您的 cookie 将立即可用 :-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T13:25:41.960

您只能更改这部分代码：

```
if(!$_COOKIE['mycookie']){
setcookie('mycookie', $beforecookie, time()+3600);
} 
```

然后重新加载页面...

# c# - 将下拉列表绑定到从函数返回的数据集

> ID：15548740
> 
> 赞同：1
> 
> 时间：2013-03-21T13:19:31.800
> 
> 标签：c#, asp.net, drop-down-menu, dataset

我编写了以下将下拉列表绑定到数据集的方法。我需要在我的项目中的不同页面上调用此方法两次。所以我创建了一个类并将方法放入其中，我试图通过创建一个对象来访问这个方法。这样做有困难...

```
 public void bind()
    {
        DataSet ds1 = new DataSet();
        SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["ConnectionString"]);
        con.Open();
        string strQuery = "SELECT CountryName + '(+' + CountryCode + ')' As CountryName,CountryCode from ACountry";
        SqlCommand cmd = new SqlCommand(strQuery, con);
        using (SqlDataAdapter da = new SqlDataAdapter(cmd))
        da.Fill(ds1, "AUser");
        ddlCountryCode.DataSource = ds1.Tables["AUser"];
        ddlCountryCode.DataTextField = "CountryCode";

        //ddlCountryCode.SelectedValue = "India(+91)";
        ddlCountryCode.DataBind();
        ddlCountryCode.SelectedIndex = ddlCountryCode.Items.IndexOf(ddlCountryCode.Items.FindByText("India(+91)"));
        con.Close();
    } 
```

如果我在新类中编写此完整方法，它无法识别其中使用的控件（下拉列表），因此会引发错误。所以我只包括了以下部分：

```
 public void bindddl()
    {
        DataSet ds1 = new DataSet();
        SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["ConnectionString"]);
        con.Open();
        string strQuery = "SELECT CountryName + '(+' + CountryCode + ')' As CountryName,CountryCode from ACountry";
        SqlCommand cmd = new SqlCommand(strQuery, con);
        using (SqlDataAdapter da = new SqlDataAdapter(cmd))
        da.Fill(ds1, "AUser");

        con.Close();
    } 
```

现在这将返回一个数据集，我需要将其与另一个表单 (.aspx) 上的下拉列表绑定。我怎么做？

```
protected void Page_Load(object sender, EventArgs e)
    {
        Bind objbind = new Bind();
        ddlCountryCode.DataSource = objbind.---->?????????;
        ddlCountryCode.DataTextField = "CountryCode";

        //ddlCountryCode.SelectedValue = "India(+91)";
        ddlCountryCode.DataBind();
        ddlCountryCode.SelectedIndex = ddlCountryCode.Items.IndexOf(ddlCountryCode.Items.FindByText("India(+91)"));
    } 
```

还有，我还能做什么？这里还有更好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:23:37.090

使您的函数返回 DataSet 然后将其分配给您想要的任何内容

```
 public DataSet bindddl()
    {
        DataSet ds1 = new DataSet();
        SqlConnection con = new SqlConnection(System.Configuration.ConfigurationManager.AppSettings["ConnectionString"]);
        con.Open();
        string strQuery = "SELECT CountryName + '(+' + CountryCode + ')' As CountryName,CountryCode from ACountry";
        SqlCommand cmd = new SqlCommand(strQuery, con);
        using (SqlDataAdapter da = new SqlDataAdapter(cmd))
        da.Fill(ds1, "AUser");

        con.Close();

        return ds1;
    } 
```

然后按如下方式分配它们。

```
Bind objbind = new Bind();
ddlCountryCode.DataSource = objbind.bindddl().Tables["AUser"]; 
```

# c++ - 土耳其字母的凯撒密码解密

> ID：15548742
> 
> 赞同：2
> 
> 时间：2013-03-21T13:19:35.257
> 
> 标签：c++, character-encoding

我在互联网上找到了很多示例，但找不到土耳其字母表的 Ceaser 密码解密。大多数字母与英文字母相似，但也有一些区别这里是土耳其字母：

`A B C Ç D E F G Ğ H I İ J K L M N O Ö P R S Ş T U Ü V Y Z`

`a b c ç d e f g ğ h i ı j k l m n o ö p r s ş t u ü v y z`

我找到了这个英文字母代码，它没有像 İ,Ö,Ü,Ş,ç,ğ,ı,ö,ş,ü 之类的字母：

```
#include <iostream>
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <conio.h>
using namespace std;

int main()
{
    char code[501];
    int shift, len, i=0, j=0;

    cout << "Caesar Cipher Decoder " << endl;
    cout << "\nThis program will decrypt the entered text using Caesar Cipher." << endl;
    cout << "\nPress any key to continue...";
    _getch();

    system("cls");
    cout << "Enter the text that has to be decrypted (max 500 characters):" << endl;
    cin.getline(code, 501);
    len = strlen(code);

    while (j < len)
    {
        if(code[j] == 32)
        {
            code[j] = code[j];
        }

        j++;
    }

    po:
    cout << "\nEnter the amount of Caseser Shift in numbers: ";
    cin >> shift;
    if ((shift > 26) || (shift < 0))
    {
        cout << "\nShift value should be less than or equal to 26\. Type again." << endl;
        goto po;
    }

    while (i < len)
    {

        code[i] = tolower(code[i]);
        code[i] = code[i] - shift;

        if (code[i] + shift == 32)
        {
            code[i] = code[i] + shift;
        }

        else if(
                ((code[i] + shift > 31) && (code[i] + shift < 65)
                || ((code[i] + shift > 90) && (code[i] + shift < 97))
                || ((code[i] + shift > 122) && (code[i] + shift < 128)))
                )
                {
                    code[i] = code[i] + shift;
                }

        else if (code[i] < 97)
        {
            if (code[i] == 32 - shift)
            {
                code[i] = code[i] + shift;
            }
            else
            {
                code[i] = (code[i] + 26);
            }
        }
        i++;
    }
    system("cls");
    cout << "\nYour deciphered code is: \"" << code << "\"" << endl;

    cout << "\nYour text has been decrypted." << endl;
    cout << "\nPress any key to end." << endl;
    _getch();

    return 0;
} 
```

请帮助我为土耳其字母表做这项工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:32:51.583

您发布的示例代码依赖于标准拉丁字母是 ASCII 表中的一个连续块这一事实。土耳其字母表并非如此，因此您必须以不同的方式解决问题。

我建议您使用替换表。创建一个包含 256 个字符的数组（字符编码表中的每个代码点一个），并用应该用来代替它的字母填充每个代码点。然后迭代输入文本并通过在该数组中查找来替换每个字符。

# inheritance - symfony2 关系在子类中未正确映射

> ID：15548746
> 
> 赞同：1
> 
> 时间：2013-03-21T13:19:49.700
> 
> 标签：inheritance, symfony, doctrine, foreign-keys, entity-relationship

这是我的问题：

我有一个类物种女巫是抽象的，我有另一个类“Raie”扩展了物种。我在物种和类型物种之间有一个多对一的关系，因为每个物种都有一个类型。

当我使用教义生成数据库时，它会生成一个表种类（因为它是抽象的而奇怪）和一个表 Raie。

为了避免生成物种表，我应该`@ORM\Table()`从实体定义中删除吗？够了吗？

主要问题是 Raie 表具有在种类中定义的**所有**属性，除了与**typeSpecies**实体的关系！

以下是我的两个类的定义，以帮助您理解：

```
<?php

namespace Ailerons\BackendBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;

/**
 * Species
 *
 * @ORM\Table()
 * @ORM\Entity
 */
abstract class Species
{
    /**
    * @var integer
    *
    * @ORM\Column(name="id", type="integer")
    * @ORM\Id
    * @ORM\GeneratedValue(strategy="AUTO")
    */
    private $id;

    /**
    * @var Type
    * 
    * @ORM\ManyToOne(targetEntity="TypeSpecies", inversedBy="species")
    */
    private $type;

    /**
    * @var string
    *
    * @ORM\Column(name="remarque", type="text")
    */
    private $remarque;

    /**
    * @var boolean
    *
    * @ORM\Column(name="sexe", type="boolean")
    */
    private $sexe;

    /**
    * @var float
    *
    * @ORM\Column(name="length", type="float")
    */
    private $length;

    /**
    * @var Observation
    * 
    * @ORM\ManyToMany(targetEntity="Observation", inversedBy="species")
    */
    private $observations;

    /**
    * Constructor
    */
    public function __construct()
    {
       $this->observations = new ArrayCollection();
    }

    /**
    * Get id
    *
    * @return integer 
    */
    public function getId()
    {
       return $this->id;
    }

    /**
    * Set remarque
    *
    * @param string $remarque
    * @return Species
    */
    public function setRemarque($remarque)
    {
       $this->remarque = $remarque;

       return $this;
    }

    /**
    * Get remarque
    *
    * @return string 
    */
    public function getRemarque()
    {
       return $this->remarque;
    }

    /**
    * Set sexe
    *
    * @param boolean $sexe
    * @return Species
    */
    public function setSexe($sexe)
    {
       $this->sexe = $sexe;

       return $this;
    }

    /**
    * Get sexe
    *
    * @return boolean 
    */
    public function getSexe()
    {
       return $this->sexe;
    }

    /**
    * Set length
    *
    * @param float $length
    * @return Species
    */
    public function setLength($length)
    {
       $this->length = $length;

       return $this;
    }

    /**
    * Get length
    *
    * @return float 
    */
    public function getLength()
    {
       return $this->length;
    }

    /**
    * Add observations
    *
    * @param \Ailerons\BackendBundle\Entity\Observation $observations
    * @return Species
    */
    public function addObservation(\Ailerons\BackendBundle\Entity\Observation $observations)
    {
       $this->observations[] = $observations;

       return $this;
    }

    /**
    * Remove observations
    *
    * @param \Ailerons\BackendBundle\Entity\Observation $observations
    */
    public function removeObservation(\Ailerons\BackendBundle\Entity\Observation $observations)
    {
       $this->observations->removeElement($observations);
    }

    /**
    * Get observations
    *
    * @return \Doctrine\Common\Collections\Collection 
    */
    public function getObservations()
    {
       return $this->observations;
    }

    /**
    * Set type
    *
    * @param \Ailerons\BackendBundle\Entity\TypeSpecies $type
    * @return Species
    */
    public function setType(\Ailerons\BackendBundle\Entity\TypeSpecies $type = null)
    {
       $this->type = $type;

       return $this;
    }

    /**
    * Get type
    *
    * @return \Ailerons\BackendBundle\Entity\TypeSpecies 
    */
    public function getType()
    {
       return $this->type;
    }
} 
```

雷类

```
 <?php

namespace Ailerons\BackendBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Raie
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Raie extends Species
{
    /**
    * @var integer
    *
    * @ORM\Column(name="id", type="integer")
    * @ORM\Id
    * @ORM\GeneratedValue(strategy="AUTO")
    */
    private $id;

    /**
    * @var float
    *
    * @ORM\Column(name="wingspan", type="float")
    */
    private $wingspan;

    /**
    * Get id
    *
    * @return integer 
    */
    public function getId()
    {
       return $this->id;
    }

    /**
    * Set wingspan
    *
    * @param float $wingspan
    * @return Raie
    */
    public function setWingspan($wingspan)
    {
       $this->wingspan = $wingspan;

       return $this;
    }

    /**
    * Get wingspan
    *
    * @return float 
    */
    public function getWingspan()
    {
       return $this->wingspan;
    }
} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:41:26.817

您可能需要更改抽象类的继承类型。[在Doctrine 文档](http://docs.doctrine-project.org/en/2.0.x/reference/inheritance-mapping.html)中阅读有关 Doctrine 2 和继承映射的更多信息

# php - PHP循环遍历嵌套数组..但是：

> ID：15548751
> 
> 赞同：2
> 
> 时间：2013-03-21T13:19:56.547
> 
> 标签：php

我有一个包含 3 个值的数组：时间、传感器 1、传感器 2

这 3 个中的每一个都包含完全相同数量的附加值。

我想遍历一个特定的值，例如时间并且只获取这些值。

我与 foreach 侦察我将不得不经历所有 3？像这样的东西（它似乎没有用，这就是我问的原因）：

```
foreach($datacollection as $valuearray)
    {
    $string .= "'" . $valuearray['time'] . "',";
    } 
```

我希望你明白我想做什么！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T13:21:27.530

尝试：

```
foreach ($datacollection['time'] as $value) {
    echo 'value is ' . $value;
} 
```

那是你想要达到的目标吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:25:39.923

试试这个，

```
foreach($datacollection as $value)
{ 
    $string[]= $value['time'];
}
print_r($string); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:32:07.330

```
foreach ($datacollection['time'] as $valuearray) {

    foreach ($valuearray as $value){
        echo 'value: '.$value;
    }

} 
```

# c# - 从其他程序集实例化 ResourceDictionary xaml

> ID：15548769
> 
> 赞同：5
> 
> 时间：2013-03-21T13:21:04.473
> 
> 标签：c#, wpf, xaml, resourcedictionary

我在包含颜色和画笔的 WPF 类库中定义了一个资源字典，称为 BrushResources.xaml。

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Lots of Colors and Brushes here>
</ResourceDictionary> 
```

我想在另一个程序集中的代码中使用一些画笔，它引用了这个库项目。如何获得它的实例`ResourceDictionary`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T14:57:13.927

您要问的是在应用程序中提供真正皮肤所需的功能组件。从单独的程序集中获取资源涉及从其他程序集中读取已编译的 XAML 或[BAML](https://stackoverflow.com/questions/634121/what-is-baml-file)。这是我在皮肤库中用于从程序集中检索 BAML 的方法：

```
//Relevant Namespaces:
//using System.Windows.Baml2006;
//using System.Xaml;

public static List<Stream> GetBamlStreams(AssemblyName skinAssemblyName) 
{ 
    List<Stream> bamlStreams = new List<Stream>(); 
    Assembly skinAssembly = Assembly.Load(skinAssemblyName); 
    string[] resourceDictionaries = skinAssembly.GetManifestResourceNames(); 
    foreach (string resourceName in resourceDictionaries) 
    { 
        ManifestResourceInfo info = skinAssembly.GetManifestResourceInfo(resourceName); 
        if (info.ResourceLocation != ResourceLocation.ContainedInAnotherAssembly) 
        { 
            Stream resourceStream = skinAssembly.GetManifestResourceStream(resourceName); 
            using (ResourceReader reader = new ResourceReader(resourceStream)) 
            { 
                foreach (DictionaryEntry entry in reader) 
                { 
                    //TODO: Figure out if this is a ResourceDictionary I care about
                    //Key will be name of the RD (BrushResources.baml, in your case)
                    if (IsRelevantResource(entry)) 
                    { 
                         bamlStreams.Add(entry.Value as Stream); 
                    } 
                } 
            } 
        } 
    } 
    return bamlStreams; 
} 
```

然后，要将 BAML 转换为特定资源，请执行以下操作：

```
//If .NET 3.5, need this initialization:
//Type xamlType = typeof(System.Windows.Markup.XamlReader);
//LoadBamlMethod = xamlType.GetMethod(LOAD_BAML_METHOD, BindingFlags.NonPublic | BindingFlags.Static);

public static T LoadBaml<T>(Stream stream) 
{ 
    //For .net 3.5: 
    //ParserContext parserContext = new ParserContext(); 
    //object[] parameters = new object[] { stream, parserContext, null, false }; 
    //object bamlRoot = LoadBamlMethod.Invoke(null, parameters); 
    //return (T)bamlRoot; 

    //For .net 4.0
    var reader = new Baml2006Reader(stream); 
    var writer = new XamlObjectWriter(reader.SchemaContext); 
    while (reader.Read()) 
            writer.WriteNode(reader); 
    return (T)writer.Result; 
} 
```

为了将来自其他程序集的资源合并到当前程序集中：

```
private void LoadResources() 
{ 
    List<Stream> bamlStreams = GetBamlStreams(FullName); 
    foreach (Stream stream in bamlStreams) 
    { 
        ResourceDictionary rd = LoadBaml<ResourceDictionary>(stream);
        Application.Current.Resources.MergedDictionaries.Add(rd)
    } 
} 
```

此示例以非常通用的方式完成蒙皮的工作，但如有必要，您可以对其进行简化以实现您的特定目标。[您可以在 github 上](https://github.com/brschwalm/Muren)看到一个使用此方法的皮肤库，并提供一些示例进行演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:27:56.017

您不必将 ResourceDictionary 放在“App.xaml”中。如果你有一个 UserControl 或 Window，你可以链接到你的 ResourceDictionary。

```
<UserControl.Resources>
 <ResourceDictionary>
  <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="/MyProjectName;component/BrushResources.xaml" />
  </ResourceDictionary.MergedDictionaries>
 </ResourceDictionary>
</UserContro.Resources> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:42:15.030

为什么不在其他程序集中使用 MergedDictionaries？

```
 <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="pack://application:,,,/BrushesLib;Component/BrushResources.xaml" />
</ResourceDictionary.MergedDictionaries> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-15T12:41:35.423

如果您知道其他`assembly`结构，请使用以下代码： ***XAML 解决方案***

```
 ResourceDictionary dictionary = new ResourceDictionary();
 dictionary.Source = new Uri("pack://application:,,,/WpfControlLibrary1;Component/RD1.xaml", UriKind.Absolute);
 foreach (var item in dictionary.Values)
 {
    //operations
 } 
```

**输出：**如果我们想使用`ResourceDictionary` `RD1.xaml`Project`WpfControlLibrary1` 进入`StackOverflowApp`项目。

**项目结构：**

[![项目结构](../Images/217e80d4e206c5aa09403a5c21d1fc38.png)](https://i.stack.imgur.com/kcKn2.jpg)

**资源字典**

[![资源字典](../Images/582bcddce86ef94d85cfdfddab5a60ef.png)](https://i.stack.imgur.com/uujvi.jpg)

**代码输出：**

[![输出](../Images/9a672b3f51175758269bec5f2255d5ff.png)](https://i.stack.imgur.com/WAtsF.jpg)

***c#解决方案：***

使用[这个](https://stackoverflow.com/questions/36675366/resourcedictionary-from-external-assembly-read-object-from-unmanagedmemorystrea)链接。

# csv - sed（或 awk）对 csv 文件中的值求和

> ID：15548771
> 
> 赞同：2
> 
> 时间：2013-03-21T13:21:07.040
> 
> 标签：csv, sed, awk

我有一个 csv 文件，其中的行如下所示：

```
foo,bar,baz,5,6,8
zab,rab,oof,2,2,3 
```

我需要一个命令来对其进行转换，并对最后 3 个值求和：

```
foo,bar,baz,19
zab,rab,oof,7 
```

如果可能的话，我需要一个班轮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:29:00.890

试试这个固定长度：

```
awk -F, '{print $1,$2,$3,$4+$5+$6}' OFS=, file 
```

对于不固定的长度：

```
awk -F, '{for(i=1;i<NF-2;i++)printf("%s,", $i)}{print $NF+$(NF-1)+$(NF-2)}' file 
```

[sed](/questions/tagged/sed "显示标记为“sed”的问题")不是算术的正确工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:51:17.180

```
perl -F, -lane '$a+=$_ for(@F[3..5]);print join ",",@F[0..2],$a' your_file 
```

下面的小测试：

```
> echo "foo,bar,baz,5,6,8" | perl -F, -lane '$a+=$_ for(@F[3..5]);print join ",",@F[0..2],$a'
foo,bar,baz,19 
```

# asp.net - ASP.NET MVC - 重定向到外部页面？

> ID：15548773
> 
> 赞同：2
> 
> 时间：2013-03-21T13:21:07.423
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有这个：

```
public RedirectResult LinkRedirect(string url)
{
    return Redirect(url);
} 
```

它所做的只是将我重定向到[http://mysite.com/www.externalsite.com](http://mysite.com/www.externalsite.com)。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:26:23.197

您需要传递一个带有`http://`前缀的 url。然后它会工作

前任：`http://www.google.com`

因此，如果您想让您的操作方法接受所有类型的链接（带和不带`http`前缀），您需要编写一点代码来检查传递的 url 参数值是否具有`http`前缀，如果没有，则附加它。

# ios - 在上传网络更改期间，iOS

> ID：15548774
> 
> 赞同：0
> 
> 时间：2013-03-21T13:21:16.817
> 
> 标签：ios, objective-c, video, upload

我正在开发一个 iOS 应用程序，用户将能够将电影上传到 vimeo。我不知道如何处理在上传过程中网络从 wifi 变为 3G（或 GPRS）或反之亦然的情况。

是否可以正确处理上传而无需暂停或杀死它并且不必编写“丑陋”的代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:22:40.040

iPhone 可以无缝地处理这些网络切换，无需来自应用程序的交互。换句话说，它发生在较低级别，因此您无需担心。

# c++ - 渲染引擎设计 - 抽象出资源的 API 特定代码

> ID：15548776
> 
> 赞同：16
> 
> 时间：2013-03-21T13:21:18.840
> 
> 标签：c++, opengl, graphics, rendering

我的渲染代码中有一个很大的设计绊脚石。基本上这是什么，不需要特定于 API 的代码（例如 OpenGL 代码或 DirectX）。现在我想了很多方法来解决这个问题，但是我*不确定*使用哪一种，或者我应该如何改进这些想法。

举一个简单的例子，我将使用一个纹理作为例子。纹理是在 GPU 内存中表示纹理的对象，在实现方面，它可以以任何特定方式相似，即实现是否使用纹理`GLuint`或`LPDIRECT3DTEXTURE9`类似于纹理。

现在这里是我想到的实际实现这一点的方法。我很不确定是否有更好的方法，或者哪种方法比另一种更好。

* * *

## 方法一：继承

我可以使用继承，这似乎是这件事最明显的选择。但是，此方法*需要*虚函数，并且需要 TextureFactory 类才能创建 Texture 对象。这将需要调用`new`每个`Texture`对象（例如`renderer->getTextureFactory()->create()`）。

这是我在这种情况下考虑使用继承的方式：

```
class Texture
{
public:

    virtual ~Texture() {}

    // Override-able Methods:
    virtual bool load(const Image&, const urect2& subRect);
    virtual bool reload(const Image&, const urect2& subRect);
    virtual Image getImage() const;

    // ... other texture-related methods, such as wrappers for
    // load/reload in order to load/reload the whole image

    unsigned int getWidth() const;
    unsigned int getHeight() const;
    unsigned int getDepth() const;

    bool is1D() const;
    bool is2D() const;
    bool is3D() const;

protected:

    void setWidth(unsigned int);
    void setHeight(unsigned int);
    void setDepth(unsigned int);

private:
    unsigned int _width, _height, _depth;
}; 
```

然后为了创建 OpenGL（或任何其他特定于 API）的纹理，必须创建一个子类，例如`OglTexture`.

## 方法 2：使用“TextureLoader”或其他类

这个方法听起来很简单，我使用另一个类来处理纹理的加载。这可能会或可能不会使用虚拟功能，这取决于情况（或者我是否觉得有必要）。

例如多态纹理加载器

```
 class TextureLoader
 {
 public:

      virtual ~TextureLoader() {}

      virtual bool load(Texture* texture, const Image&, const urect2& subRect);
      virtual bool reload(Texture* texture, const Image&, const urect2& subRect);
      virtual Image getImage(Texture* texture) const;
 }; 
```

如果我要使用它，`Texture`对象将只是 POD 类型。*但是*，为了使其工作，类中必须存在句柄对象/ID `Texture`。

例如，[这就是我很可能实现它](http://ideone.com/fGeejl)的方式。虽然，我可以使用基类来概括整个 ID 事物。例如`Resource`基类，在这种情况下保存图形资源的 ID。

## 方法 3：Pimpl 成语

我可以使用 pimpl idiom，它实现了如何加载/重新加载/等。纹理。这很可能需要一个抽象工厂类来创建纹理。我不确定这比使用继承更好。这个 pimpl 习惯用法可以与方法 2 结合使用，即纹理对象将具有指向其加载器的引用（指针）。

## 方法4：使用概念/编译时多态

另一方面，我可以使用编译时多态性并基本上使用我在继承方法中介绍的内容，除非不声明虚函数。这可行，但如果我想从 OpenGL 渲染动态切换到 DirectX 渲染，这不是最好的解决方案。我只是将 OpenGL/D3D 特定代码放在 Texture 类中，其中会有多个纹理类具有一些相同的接口（load/reload/getImage/etc.），包装在某个命名空间中（类似于它使用的 API，例如`ogl`,`d3d`等）。

## 方法 5：使用整数

我可以只使用整数来存储纹理对象的句柄，这看起来相当简单，但可能会产生一些“混乱”的代码。

* * *

其他 GPU 资源（例如 Geometry、Shaders 和 ShaderPrograms）也存在此问题。

我还想过让 Renderer 类处理图形资源的创建、加载等。但是，这将违反[SPR](http://en.wikipedia.org/wiki/Single_responsibility_principle)。例如

```
Texture* texture = renderer->createTexture(Image("something.png"));
Image image = renderer->getImage(texture); 
```

有人可以指导我吗，我想我想太多了。我尝试观察*各种*渲染引擎，例如 Irrlicht、Ogre3D 以及我在网上找到的其他引擎。Ogre 和 Irrlicht 使用继承，但我不确定这是最好的方法。正如其他一些人只是使用 void*、整数，或者只是将特定于 API（主要是 OpenGL）的代码放在他们的类中（例如 GLuint 直接放在 Texture 类中）。我真的无法决定哪种设计最适合我。

我要定位的平台是：

*   Windows/Linux/Mac
*   iOS
*   可能是安卓

我考虑过只使用 OpenGL 特定的代码，因为 OpenGL 适用于所有这些平台。但是，我觉得如果我这样做，如果我希望移植到其他不能使用 OpenGL 的平台，例如 PS3，我将不得不更改我的代码。任何关于我的情况的建议将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-23T11:21:52.523

从高层次的角度考虑。您的渲染代码将如何与您的其他游戏/应用程序模型一起使用？换句话说，您打算如何在场景中创建对象以及模块化程度如何？在我之前使用引擎的工作中，精心设计的引擎的最终结果通常具有遵循模式的逐步过程。例如：

```
//Components in an engine could be game objects such as sprites, meshes, lights, audio sources etc. 
//These resources can be created via component factories for convenience
CRenderComponentFactory* pFactory = GET_COMPONENT_FACTORY(CRenderComponentFactory); 
```

获得组件后，通常可以使用各种重载方法来构造对象。以 sprite 为例，a`SpriteComponent`可以包含子组件形式的 sprite 可能需要的所有内容；比如一个`TextureComponent`。

```
//Create a blank sprite of size 100x100 
SpriteComponentPtr pSprite = pFactory->CreateSpriteComponent(Core::CVector2(100, 100));

//Create a sprite from a sprite sheet texture page using the given frame number.
SpriteComponentPtr pSprite = pFactory->CreateSpriteComponent("SpriteSheet", TPAGE_INDEX_SPRITE_SHEET_FRAME_1);

//Create a textured sprite of size 100x50, where `pTexture` is your TextureComponent that you've set-up elsewhere.
SpriteComponentPtr pSprite = pFactory->CreateSpriteComponent(Core::CVector2(100, 50), pTexture); 
```

然后只需将对象添加到场景中即可。这可以通过创建一个实体来完成，它只是一个通用的信息集合，其中包含场景操作所需的一切；位置、方向等。对于场景中的每个实体，`AddEntity`默认情况下，您的方法会将该新实体添加到渲染工厂，从子组件中提取其他与渲染相关的信息。例如：

```
//Put our sprite onto the scene to be drawn
pSprite->SetColour(CColour::YELLOW);
EntityPtr pEntity = CreateEntity(pSprite);
mpScene->AddEntity(pEntity); 
```

然后，您拥有的是一种创建对象的好方法和一种对应用程序进行编码的模块化方法，而无需引用“绘图”或其他特定于渲染的代码。一个好的图形管道应该是这样的：

![在此处输入图像描述](../Images/1bc492a0a0d5c004e54cee38467e5685.png)

[这](http://www.cg.tuwien.ac.at/research/publications/2007/bauchinger-2007-mre/bauchinger-2007-mre-Thesis.pdf)是渲染引擎设计的一个很好的资源（也是上图的来源）。跳转到第 21 页并继续阅读，您将看到关于场景图如何操作和一般引擎设计理论的深入解释。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T13:29:53.940

我认为这里没有一个正确的答案，但如果是我，我会：

1.  计划仅使用 OpenGL 开始。

2.  将渲染代码与其他代码分开（这只是好的设计），但不要试图将其包装在额外的抽象层中——只要做对 OpenGL 最自然的事情。

3.  假设当我移植到 PS3 时，我会更好地掌握我需要我的渲染代码做什么，所以**这**将是重构和提取更抽象接口的正确时机。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T10:51:37.953

我决定采用混合方法，将来使用方法 (2)、(3)、(5) 和可能的 (4)。

我基本上做的是：

每个资源都有一个附加的句柄。此句柄描述对象。每个句柄都有一个与之关联的 ID，它是一个简单的整数。为了与每个资源的 GPU 对话，为每个句柄创建了一个接口。这个接口目前是抽象的，但如果我将来选择这样做，可以使用模板来完成。资源类有一个指向接口的指针。

简单地说，句柄描述了实际的 GPU 对象，资源只是句柄的包装器和将句柄和 GPU 连接在一起的接口。

这基本上是这样的：

```
// base class for resource handles
struct ResourceHandle
{  
   typedef unsigned Id;
   static const Id NULL_ID = 0;
   ResourceHandle() : id(0) {}

   bool isNull() const
   { return id != NULL_ID; }

   Id id;
};

// base class of a resource
template <typename THandle, typename THandleInterface>
struct Resource
{
    typedef THandle Handle;
    typedef THandleInterface HandleInterface;

    HandleInterface* getInterface() const { return _interface; }
    void setInterface(HandleInterface* interface) 
    { 
        assert(getHandle().isNull()); // should not work if handle is NOT null
        _interface = interface;
    }

    const Handle& getHandle() const
    { return _handle; }

protected:

    typedef Resource<THandle, THandleInterface> Base;

    Resource(HandleInterface* interface) : _interface(interface) {}

    // refer to this in base classes
    Handle _handle;

private:

    HandleInterface* _interface;
}; 
```

这使我可以很容易地扩展，并允许使用以下语法：

```
Renderer renderer;

// create a texture
Texture texture(renderer);

// load the texture
texture.load(Image("test.png"); 
```

从哪里`Texture`派生`Resource<TextureHandle, TextureHandleInterface>`，以及渲染器在哪里具有加载纹理句柄对象的适当接口。

[我在这里](http://ideone.com/SOd79Q)有一个简短的工作示例。

希望这可行，我将来可能会选择重新设计它，如果是这样，我会更新。批评将不胜感激。

**编辑：**

我实际上已经改变了我再次这样做的方式。我使用的解决方案与上述解决方案非常相似，但不同之处如下：

1.  API 围绕“后端”展开，这些对象具有通用接口并与低级 API（例如 Direct3D 或 OpenGL）进行通信。
2.  句柄不再是整数/ID。后端对每种资源句柄类型（例如`texture_handle_type`, `program_handle_type`）都有特定的 typedef `shader_handle_type`。
3.  资源没有基类，只需要一个模板参数 (a `GraphicsBackend`)。资源存储句柄和对其所属图形后端的引用。然后资源有一个用户友好的 API 并使用句柄和图形后端公共接口与“实际”资源进行交互。即资源对象基本上是允许 RAII 的句柄的包装器。
4.  引入了 graphics_device 对象以允许构造资源（工厂模式；例如，`device.createTexture()`或`device.create<my_device_type::texture>()`，

例如：

```
#include <iostream>
#include <string>
#include <utility>

struct Image { std::string id; };

struct ogl_backend
{
    typedef unsigned texture_handle_type;

    void load(texture_handle_type& texture, const Image& image)
    {
        std::cout << "loading, " << image.id << '\n';
    }

    void destroy(texture_handle_type& texture)
    {
        std::cout << "destroying texture\n";
    }
};

template <class GraphicsBackend>
struct texture_gpu_resource
{
    typedef GraphicsBackend graphics_backend;
    typedef typename GraphicsBackend::texture_handle_type texture_handle;

    texture_gpu_resource(graphics_backend& backend)
        : _backend(backend)
    {
    }

    ~texture_gpu_resource()
    {
        // should check if it is a valid handle first
        _backend.destroy(_handle);
    }

    void load(const Image& image)
    {
        _backend.load(_handle, image);
    }

    const texture_handle& handle() const
    {
        return _handle;
    }

private:

    graphics_backend& _backend;
    texture_handle _handle;
};

template <typename GraphicBackend>
class graphics_device
{
    typedef graphics_device<GraphicBackend> this_type;

public:

    typedef texture_gpu_resource<GraphicBackend> texture;

    template <typename... Args>
    texture createTexture(Args&&... args)
    {
        return texture{_backend, std::forward(args)...};
    }

    template <typename Resource, typename... Args>
    Resource create(Args&&... args)
    {
             return Resource{_backend, std::forward(args)...};
        }

private:

    GraphicBackend _backend;
};

class ogl_graphics_device : public graphics_device<ogl_backend>
{
public:

    enum class feature
    {
        texturing
    };

    void enableFeature(feature f)
    {
        std::cout << "enabling feature... " << (int)f << '\n';
    }
};

// or...
// typedef graphics_device<ogl_backend> ogl_graphics_device

int main()
{
    ogl_graphics_device device;

    device.enableFeature(ogl_graphics_device::feature::texturing);

    auto texture = device.create<decltype(device)::texture>();

    texture.load({"hello"});

    return 0;
}

/*

 Expected output:
    enabling feature... 0
    loading, hello
    destroying texture

*/ 
```

现场演示：http: [//ideone.com/Y2HqlY](http://ideone.com/Y2HqlY)

这个设计目前正在与我的库[rojo 一起](https://github.com/miguelishawt/rojo)使用（**注意：**这个库仍在大力开发中）。

# objective-c - 保持数组排序 - 在设置、获取或稍后？

> ID：15548779
> 
> 赞同：2
> 
> 时间：2013-03-21T13:21:25.990
> 
> 标签：objective-c, arrays, oop, nsmutablearray, sorting

作为学习目标 c/oop 的辅助工具，我正在设计一个 iOS 应用程序来存储和显示定期体重测量值。我有一个单例，它返回测量对象共享存储的可变数组。每次测量都至少有一个日期和体重，我希望能够添加历史测量。

我想按日期顺序显示测量值。最好的方法是什么？据我所见，选项如下：1）添加测量时 - 每次添加测量后，我都会覆盖 addobject 以对共享存储进行排序，2）在检索 mutablearray 时对它进行排序，或者 3）我检索可变数组以它碰巧在共享存储中的任何顺序，然后在显示表格/图表时对其进行排序。

与添加新数据相比，检索数据的频率可能更高，因此选项 1 将减少共享存储的冗余排序 - 所以这是最好的方法，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:35:44.140

您可以使用 (1) 的修改版本。您无需在每次插入新对象时对完整数组进行排序，而是使用此处描述的方法：[https](https://stackoverflow.com/a/8180369/1187415) ://stackoverflow.com/a/8180369/1187415将新对象插入到数组中的正确位置。

然后对于每个插入，您只有一个二进制搜索来找到新对象的正确索引，并且数组始终处于正确的顺序。

由于您说数据的检索频率高于添加新数据的频率，因此这似乎更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:49:26.327

如果我忘记了你的特殊情况，这个问题就不那么容易回答了。有两个基本的解决方案：

1.  保持数组未排序，当您尝试访问元素并且数组未排序时，请对其进行排序。我们称之为“惰性排序”。

2.  插入元素时保持数组排序。请注意，这不是在末尾添加新元素然后对整个数组进行排序。这是关于找到元素应该在哪里（二进制搜索）并将其放置在那里。我们称之为“排序插入”。

这两种技术都是正确且有用的，决定哪一种更好取决于您的用例。

例子：

1.  您想在数组中插入数百个元素，然后访问这些元素，然后再次插入数百个元素，然后访问。总之，您将以大块的形式插入值。在这种情况下，惰性排序会更好。

2.  您经常会插入单个元素，并且会经常访问这些元素。然后排序插入将具有更好的性能。

3.  中间的东西（在插入 1 和插入数十个元素之间）。您可能不在乎将使用哪种方法。

（请注意，您还可以使用专门的结构来保持数组排序，而不是基于`NSArray`，例如基于平衡树的结构，同时保持子树中的元素数量）。

# c# - 写入 .txt 文件而不擦除以前的数据 C#

> ID：15548782
> 
> 赞同：0
> 
> 时间：2013-03-21T13:21:34.280
> 
> 标签：c#

我正在尝试通过逗号 ( )将`.txt`-file中的字符串拆分为 a ，然后将其中的每个项目替换为另一个公式，例如：`,``string[]``string[]`

```
"Marko Kostic, Faculty of Technical Sciences, University of Novi Sad,
Trg D. Obradovica 6, 21125 Novi Sad, Serbia" 
```

我想在单词之间用逗号分隔这个字符串，然后我想把每个值放在单独的行中，就像一个列表一样，然后用另一个值更改每个`"Marko Kostic"`值

```
<addr-line>Marko Kostic<\addr-line> 
```

问题是作者只写了最后一个值`string[]`并删除了以前的值。

有什么建议么？

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Text.RegularExpressions;
using Microsoft.Office.Interop;
using Microsoft.Office.Interop.Word;
using System.Diagnostics;
using System.Reflection;
using System.Collections;
using System.Runtime.InteropServices;

namespace AffiliationParser
{
    class Program
    {
        static void Main(string[] args)
        {

            Microsoft.Office.Interop.Word.Application oWord = new Microsoft.Office.Interop.Word.Application();
            object missing = System.Reflection.Missing.Value;
            object isVisible = false;
            using (StreamReader batch = new StreamReader(@"D:\Developing\REF\AffiliationParser\AffiliationParser\AffiliationParser\bin\Debug\Run.bat"))
            {
                string bat;
                while (!batch.EndOfStream)
                {
                    bat = batch.ReadLine();
                    // do your processing with batch command

                    if (bat == "pause")
                    {
                        continue;
                    }
                    string fpath = bat.Substring(bat.IndexOf(" \""));

                    string path = fpath.Replace("\"", "").Replace(" ","");

                    string[] name = Directory.GetFiles(path, "*.txt");

                    string words = name.Min();

                    string word = words.Substring(words.LastIndexOf("\\")).Replace("\\", "");

                    Console.WriteLine("Processing........");
                    Console.WriteLine(word);

                    string Npath = path + @"\Arr" + word;
                    if (File.Exists(Npath))
                    {
                        System.Windows.Forms.MessageBox.Show("The file Arr" + word + " alredy exist in " + path);
                        continue;
                    }

                    else
                    {
                        File.Copy(words, Npath);
                        StreamReader temp = new StreamReader(Npath, Encoding.UTF8);
                        string tempstring = temp.ReadToEnd();
                        string[] temp3 = tempstring.Split(',');

                        temp.Close();

                        foreach (string item in temp3)
                        {
                          string Nitem = item.TrimStart().TrimEnd();

                            //Match MatchCont = Regex.Match(Nitem, @"Afganistan|Albania|Algeria|American\s+Samoa|Andorra|Angola|Anguilla|Antarctica|Antigua\s+and\s+Barbuda|Argentina|Armenia|Aruba|Australia|Austria|Azerbaijan|Bahamas|Bahrain|Bangladesh|Barbados|Belarus|Belgium|Belize|Benin|Bermuda|Bhutan|Bolivia|Bosnia\s+and\s+Herzegovina|Botswana|Bouvet\s+Island|Brazil|British\s+Indian\s+Ocean\s+Territory|Brunei\s+Darussalam|Bulgaria|Burkina\s+Faso|Burundi|Cambodia|Cameroon|Canada|Cape\s+Verde|Cayman\s+Islands|Central\s+African\s+Republic|Chad|Chile|China|Christmas\s+Island|Cocos\s+\(Keeling\)\s+Islands|Colombia|Comoros|Democratic\s+People's\s+Republic\s+of\s+Korea|Democratic\s+Republic\s+of\s+Congo|Cook\s+Islands|Costa\s+Rica|Cote\s+D'Ivoire|Croatia|Cuba|Cyprus|Czech\s+Republic|Republic\s+of\s+Korea|Denmark|Djibouti|Dominica|Dominican\s+Republic|East\s+Timor|Ecuador|Egypt|El\s+Salvador|Equatorial\s+Guinea|Eritrea|Estonia|Ethiopia|Falkland\s+Islands\s+\(Malvinas\)|Faroe\s+Islands|Fiji|Finland|France\s+Metropolitan|France|French\s+Guiana|French\s+Polynesia|French\s+Southern\s+Territories|Gabon|Gambia|Georgia|Germany|Ghana|Gibraltar|Greece|Greenland|Grenadaf|Guadeloupe|Guam|Guatemala|Guinea|Guinea\-Bissau|Guyana|Haiti|Heard\s+Island\s+and\s+McDonald\s+Island|Honduras|Hong\s+Kong|Hungary|Iceland|India|Indonesia|Iran|Iraq|Ireland|Northern\s+Ireland|Isle\s+Of\s+Man|Israel|Italy|Jamaica|Japan|Jordan|Kazakhstan|Kenya|Kiribati|Kuwait|Kyrgyzstan|Lao\s+People'S\s+Democratic\s+Republic|Latvia|Lebanon|Lesotho|Liberia|Libya|Liechtenstein|Lithuania|Luxembourg|Macau|Macedonia|Madagascar|Malawi|Malaysia|Maldives|Mali|Malta|Marshall\s+Islands|Martinique|Mauritania|Mauritius|Mayotte|Mexico|Micronesia|Moldova|Monaco|Mongolia|Montserrat|Morocco|Mozambique|Myanmar|Namibia|Nauru|Nepal|Netherlands\s+Antilles|New\s+Caledonia|New\s+Zealand|Nicaragua|Nigeria|Niger|Niue|Norfolk\s+Island|Northern\s+Mariana\s+Islands|Norway|Oman|Pakistan|Palau|Palestine|Panama|Papua\s+New\s+Guinea|Paraguay|Peru|Philippines|Pitcairn|Poland|Portugal|Puerto\s+Rico|Qatar|Reunion|Romania|Russia|Rwanda|Saint\s+Kitts\s+and\s+Nevis|Saint\s+Lucia|Saint\s+Vincent\s+and\s+The\s+Grenadines|Samoa|San\s+Marino|Sao\s+Tome\s+and\s+Principe|Saudi\s+Arabia|Scotland|Senegal|Serbia|Kosovo|Montenegro|Seychelles|Sierra\s+Leone|Singapore|Slovakia|Slovenia|Solomon\s+Islands|Somalia|South\s+Africa|South\s+Georgia\s+and\s+The\s+South\s+Sandwich\s+Islands|Spain|Sri\s+Lanka|St.\s+Helena|St.\s+Pierre\s+and\s+Miquelon|Sudan|Suriname|Svalbard\s+and\s+Jan\s+Mayen\s+Islands|Swaziland|Sweden|Switzerland|Syria|Taiwan|Tajikistan|Tanzania|Thailand|The\s+Netherlands|Togo|Tokelau|Tonga|Trinidad\s+and\s+Tobago|Tunisia|Turkey|Turkmenistan|Turks\s+and\s+Caicos\s+Islands|Tuvalu|Uganda|Ukraine|United\s+Arab\s+Emirates|UAE|UK|United\s+States\s+Minor\s+Outlying\s+Islands|Uruguay|USA|Uzbekistan|Vanuatu|Vatican\s+City\s+State\s+\(Holy\s+See\)|Venezuela|Vietnam|British\s+Virgin\s+Islands|USA\s+Virgin\s+Islands|Wallis\s+and\s+Futuna\s+Islands|Western\s+Sahara|West\s+Indies|Yemen|Zambia|Zimbabwe|Abkhazia|Afghanistan|Akrotiri\s+and\s+Dhekelia|Aland|Ascension\s+Island|The\s+Bahamas|Brunei|Central\s+Africa|Cocos|Congo|Cote\s+d'lvoire|Czech|Dominican|Falkland\s+Islands|Cambia,\s+The|Grenada|Guemsey|Isle\s+of\s+Man|Jersey|Korea|Laos|Macao|Nagorno\-Karabakh|Netherlands|Northern\s+Cyprus|Pitcaim\s+Islands|Sahrawi\s+Arab\s+Democratic|Saint\-Barthelemy|Saint\s+Helena|Saint\s+Martin|Saint\s+Pierre\s+and\s+Miquelon|Saint\s+Vincent\s+and\s+Grenadines|Samos|Somaliland|South\s+Ossetia|Svalbard|Transnistria|Tristan\s+da\s+Cunha|United\s+Kingdom|Vatican\s+City|Virgin\s+Islands|Wallis\s+and\s+Futuna|Espa�a|Witsch|United\s+States|Prague\s+Czech\s+Republic", RegexOptions.Singleline | RegexOptions.Compiled | RegexOptions.ExplicitCapture | RegexOptions.IgnoreCase);
                            //if (MatchCont.Success==true)
                            //{
                            //    MatchCont.Result(@"<country>" + Nitem + @"<\country>");   
                            //}

                        }
                    }

                }

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:36:57.440

尝试在您的问题中包含代码，简单地分发答案并不是最佳做法。话虽如此，您将要查看`String.Split`方法`String.Trim`和`File.AppendText`方法。

执行此操作的简单方法：

```
string[] stuff = data.Split(',');
StreamWriter sW = File.AppendText(pathToFile);

foreach(string parts in stuff)
{       

    sW.WriteLine(parts.Trim());
} 
```

非常非常基本，如果您没有做一些工作，就不会给您答案。祝你好运！

这里有一些参考：[File.AppendText](http://msdn.microsoft.com/en-us/library/system.io.file.appendtext.aspx)和[String.Trim](http://msdn.microsoft.com/en-us/library/t97s7bs3.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:25:40.947

```
string input="a,b,c,d";
string [] parts=input.Split(",",StringSplitOptions.RemoveEmptyEntries);
List<string> output=new List<string>();
foreach(string s in parts)
{
   // do sth you like;
   var newStr="<abc>"+s+"</abc>";
   output.Add(newStr);
}
return output.ToArray(); 
```

# html - 使用 xslt 键查找唯一值

> ID：15548783
> 
> 赞同：5
> 
> 时间：2013-03-21T13:21:34.190
> 
> 标签：html, xml, xslt, xpath

```
<ROOT>
<AA Aattr="xyz1">
    <BB bAttr1="firefox"  bAttr2="aaa" >
    </BB>   
    <BB bAttr1="chrome"   bAttr2="aaa" >
    </BB>
    <BB bAttr1="firefox"  bAttr2="bbb" >
    </BB>
    <BB bAttr1="chrome"   bAttr2="bbb" >
    </BB>
</AA>
<AA Aattr="xyz2">
    <BB bAttr1="firefox"  bAttr2="aaa" >
    </BB>   
    <BB bAttr1="chrome"   bAttr2="ccc" >
    </BB>
    <BB bAttr1="firefox"  bAttr2="ddd" >
    </BB>
</AA> 
```

我想从节点'AA'中选择节点'BB'中的属性'bAttr2'的不同\唯一值，其中属性'Aattr'是xyz1

说给定的xml，我需要输出为“aaa”，“bbb”

我使用key尝试了以下逻辑。但没有奏效。请帮忙

```
<xsl:key name="nameDistinct" match="BB" use="@bAttr1"/>
<xsl:template match="/">
<xsl:for-each select="ROOT/AA[@Aattr='xyz1']">
    <xsl:for-each select="BB[generate-id()=generate-id(key('nameDistinct',@bAttr2)[1])]">
    <xsl:value-of select="@bAttr2"/>            
    </xsl:for-each>
</xsl:for-each>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T13:36:39.173

您在这里有两个选择：

定义键时过滤键可用的项目：

```
 <xsl:key name="nameDistinct" match="AA[@Aattr = 'xyz1']/BB" use="@bAttr2"/>

  <xsl:template match="/">
    <xsl:for-each 
      select="ROOT/AA/BB[generate-id() =
                         generate-id(key('nameDistinct', @bAttr2)[1])]">
      <xsl:value-of select="@bAttr2"/>
    </xsl:for-each>
  </xsl:template> 
```

或在分组表达式中过滤：

```
 <xsl:key name="nameDistinct" match="BB" use="@bAttr2"/>

  <xsl:template match="/">
    <xsl:for-each 
      select="ROOT/AA/BB[generate-id() =
                         generate-id(key('nameDistinct', @bAttr2)
                                       [../@Aattr = 'xyz1']
                                       [1])]">
      <xsl:value-of select="@bAttr2"/>
    </xsl:for-each>
  </xsl:template> 
```

前一种方法不那么混乱，效率略高，而后者允许您对分组进行参数化（即对未硬编码为“xyz1”的值进行分组），例如：

```
 <xsl:key name="nameDistinct" match="BB" use="@bAttr2"/>

  <xsl:template match="/">
    <xsl:for-each select="ROOT/AA">
      <xsl:for-each
        select="BB[generate-id() =
                   generate-id(key('nameDistinct', @bAttr2)
                                    [../@Aattr = current()/@Aattr]
                                    [1])]">
        <xsl:value-of select="@bAttr2"/>
      </xsl:for-each>
    </xsl:for-each>
  </xsl:template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T03:34:42.443

**This transformation**:

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kCompoundAttribs" match="BB"
  use="concat(generate-id(..), '+', @bAttr2)"/>

 <xsl:template match="/">
  <xsl:copy-of select=
   "/*/*[1]/*
     [generate-id()
     =
      generate-id(key('kCompoundAttribs',
                      concat(generate-id(..),'+', @bAttr2)
                      )[1]
                  )
     ]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**when applied on the provided XML document:**

```
<ROOT>
    <AA Aattr="xyz1">
        <BB bAttr1="firefox"  bAttr2="aaa" ></BB>
        <BB bAttr1="chrome"   bAttr2="aaa" ></BB>
        <BB bAttr1="firefox"  bAttr2="bbb" ></BB>
        <BB bAttr1="chrome"   bAttr2="bbb" ></BB>
    </AA>
    <AA Aattr="xyz2">
        <BB bAttr1="firefox"  bAttr2="aaa" ></BB>
        <BB bAttr1="chrome"   bAttr2="ccc" ></BB>
        <BB bAttr1="firefox"  bAttr2="ddd" ></BB>
    </AA>
</ROOT> 
```

**produces two `BB` elements, whose `bAttr2` attributes have the desired set of distinct values** (if you want just the string values of the attributes, just use `xsl:apply-templates` or `xsl:for-each` for that expression):

```
<BB bAttr1="firefox" bAttr2="aaa"/>
<BB bAttr1="firefox" bAttr2="bbb"/> 
```

**Do note**:

This solution is simpler and more easier to understand and more efficient than "filtering" :)

# selenium - Selenium java driver.close 给出错误以生成万无一失的报告

> ID：15548787
> 
> 赞同：0
> 
> 时间：2013-03-21T13:21:45.860
> 
> 标签：selenium, maven-2, selenium-webdriver, maven-surefire-plugin

我正在使用 selenium webdriver maven 设置。

因此，如果我`driver.close(`在代码中使用 )，我会收到如下错误，为什么任何人都可以帮助解决这个问题。

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.10:test (default-test) on project MavenSelenium: There are test failures.
[ERROR] 
[ERROR] Please refer to C:\Users\D23450277\workspace\MavenSelenium\target\surefire-reports for the individual test results.
[ERROR] -> [Help 1]
[ERROR] 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:19:24.757

Close 将关闭当前活动窗口，如果是最后一个窗口，则执行 quit()。

然而，它确实需要有一个有效的活动会话才能做到这一点。如果您的测试失败，则该会话可能已死，因此当您调用 close 时，它​​不知道将命令发送到何处并且不执行任何操作。

如果没有活动会话，Quit 将关闭所有客户端，因此如果您发送退出并且没有活动会话，它只会清理，所以总而言之，我建议将 driver.close() 的所有实例更改为 driver.quit()除非您要关闭在测试期间打开的附加窗口。

# autocomplete - 无法让自动完成搜索表单工作

> ID：15548791
> 
> 赞同：0
> 
> 时间：2013-03-21T13:21:50.430
> 
> 标签：autocomplete, search-form

我正在实现一个搜索表单，它会在您开始输入时显示建议但无法使其正常工作..问题是当您开始输入时它不会显示任何建议。你能帮我把代码弄对吗？非常感谢！

这是代码：

```
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
<div><input id="autocomplete" type="text"></div>

<script>
$("input#autocomplete").autocomplete({
source: [ 
{ id : "Google", value : "Google"},
{ id : "Yahoo", value : "Yahoo"},
],
minLength: 1,
open: function(event, ui) { 
$("ul.ui-autocomplete").unbind("click");
var data = $(this).data("autocomplete");
console.log(data);
for(var i=0; i<=data.options.source.length-1;i++)
{
                                    var s = data.options.source[i];
                                    $("li.ui-menu-item a:contains(" + s.value + ")").attr("href", "/" + s.id);
                                  }

                                } 

    });

    /*
    $("input#autocomplete").bind("autocompleteselect", function(event, ui) { 
        //alert(ui.item.id + ' - ' +  ui.item.value); 
        //document.location.href = ui.item.id + '/' + ui.item.value;
        //event.preventDefault; 
        } );
    */
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-20T13:46:41.340

这是代码：

```
<div id="search">
  <input list="results" id="project" onkeydown="if (event.keyCode == 13) { checkInput(this.value); return false; }" />
</div> 
```

可用的结果...

```
<datalist id="results">
  <option>Demo</option>    
  <option>Example</option>
  <option>pizza</option>
</datalist> 
```

最后是javascript

```
function checkInput(searchQuery)
{
if(searchQuery=="Home")
{
    window.location = "Home.html";
}
else if(searchQuery == "Contact")
{
    window.location = "Contact.html";
}
else if(searchQuery == "Sitemap")
{
    window.location = "Sitemap.html";
}
else
{
    window.location = "noresult.html";
}
} 
```

因此，当有人去搜索时，他们在预填充列表中的选项数量有限，而他们选择的任何一个选项都会将他们引导到您的目标页面！我不能接受所有的功劳，但我希望这会有所帮助！

# php - 计算人类可读经过时间的最佳方法

> ID：15548792
> 
> 赞同：0
> 
> 时间：2013-03-21T13:21:50.517
> 
> 标签：php, algorithm, elapsedtime

我想知道在给定一定的秒数的情况下，计算人类可读的经过时间的最优雅的方法是什么。我想用 PHP 写这个。

这是所需的输出：

*   elapsedTimeInSeconds > 一年，输出“#years, #months”
*   elapsedTimeInSeconds > 1 个月，输出“#months,#days”
*   elapsedTimeInSeconds > 一天，输出“# days, # hours”
*   elapsedTimeInSeconds > 一小时，输出“# hours, # minutes”
*   elapsedTimeInSeconds > 一分钟，输出“# minutes, # seconds”

我尝试了不同的解决方案，这些解决方案很尴尬并且充满了条件语句，但我希望有一种更递归和“干净代码”的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:33:11.560

我认为这更灵活，因为您可以轻松添加十年、世纪等新单位，并且代码不会更改：

```
$names = array("seconds", "minutes", "hours", "days", "months", "years");
$values = array(1, 60, 3600, 24 * 3600, 30 * 24 * 3600, 365 * 24 * 3600);

$time = ...elapsedTimeInSeconds...;
for($i = count($values) - 1; $i > 0 && $time < $values[$i]; $i--);
if($i == 0) {
    echo intval($time / $values[$i]) . " " . $names[$i];
} else {
    $t1 = intval($time / $values[$i]);
    $t2 = intval(($time - $t1 * $values[$i]) / $values[$i - 1]);
    echo "$t1 " . $names[$i] . ", $t2 " . $names[$i - 1];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:34:44.933

谢谢你的建议。

对于这种方法，我主要使用了 Waygood 和 ChrisForrence 的建议。我试图让它尽可能简单，并引入了简单的参数，例如细节级别和分隔符（用于字符串输出）。

```
public function elapsedTimeHumanReadable($date = null, $detailLevel = 2, $delimiter = ' et ')
{
    if($date === null)
    {
        $date = self::now();
    }

    $sec = $this->elapsedSecond($date);

    $a_sec = 1;
    $a_min = $a_sec * 60;
    $an_hour = $a_min * 60;
    $a_day = $an_hour * 24;
    $a_month = $a_day * 30;
    $a_year = $a_day * 365;

    $text = '';
    $resultStack = array();
    if($sec >= $a_year)
    {
        $years = floor($sec / $a_year);
        $text .= $years . $this->plural($years, ' an');
        $sec = $sec - ($years * $a_year);
        array_push($resultStack, $text);
    }

    if($sec >= $a_month)
    {
        $months = floor($sec / $a_month);
        $text = $months . ' mois';
        $sec = $sec - ($months * $a_month);
        array_push($resultStack, $text);
    }

    if($sec >= $a_day)
    {
        $days = floor($sec / $a_day);
        $text = $days . $this->plural($days, ' jour');
        $sec = $sec - ($days * $a_day);
        array_push($resultStack, $text);
    }

    if($sec >= $an_hour)
    {
        $hours = floor($sec / $an_hour);
        $text = $hours . $this->plural($hours, ' heure');
        $sec = $sec - ($hours * $an_hour);
        array_push($resultStack, $text);
    }

    if($sec >= $a_min)
    {
        $minutes = floor($sec / $a_min);
        $text = $minutes . $this->plural($minutes, ' minute');
        $sec = $sec - ($minutes * $a_min);
        array_push($resultStack, $text);
    }

    if($sec >= $a_sec)
    {
        $seconds = floor($sec / $a_sec);
        $text = $sec . $this->plural($seconds, ' seconde');
        $sec = $sec - ($sec * $a_sec);
        array_push($resultStack, $text);
    }

    $result = $resultStack[0];
    for($i = 1; $i <= $detailLevel - 1; $i++)
    {
        if(!empty($resultStack[$i]))
        {
            $result .= $delimiter . $resultStack[$i];
        }
    }

    return $result;
} 
```

我还添加了一个非常简单的复数函数以正确的语法方式返回时间单位：

```
public function plural($value, $unit)
{
    if($value > 1)
    {
        return $unit . 's';
    }
    else
    {
        return $unit;
    }
} 
```

我对 for 循环不是很满意，但它实际上运行良好。

无论如何，非常感谢您的帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:25:36.170

我用这个：

```
function durationFormat($time)
{
    if(gmdate("Y", $time)>1970) return (1970-gmdate("Y",$time)).gmdate(" \y\r\s ", $time).(gmdate("n",$time)-1).gmdate(" \m\o\n\t\h\s ", $time).(gmdate("j",$time)-1).gmdate(" \d\a\y\s H:i:s", $time);
    if(gmdate("n", $time)>1) return (gmdate("n",$time)-1).gmdate(" \m\o\n\t\h\s ", $time).(gmdate("j",$time)-1).gmdate(" \d\a\y\s H:i:s", $time);
    if(gmdate("j", $time)>1) return (gmdate("j",$time)-1).gmdate(" \d\a\y\s H:i:s", $time);
    return gmdate("H:i:s", $time);
} 
```

它有点快速和肮脏，但可以完成工作

或者

```
function durationFormat2($seconds)
{
    $a_sec=1;
    $a_min=$a_sec*60;
    $an_hour=$a_min*60;
    $a_day=$an_hour*24;
    $a_week=$a_day*52;
    //$a_month=$a_day*(floor(365/12));
    $a_month=$a_day*30;
    $a_year=$a_day*365;

    $params=2;
    $text='';
    if($seconds>$a_year)
    {
        $years=floor($seconds/$a_year);
        $text.=$years.' years ';
        $seconds=$seconds-($years*$a_year);
        $params--;
    }
    if($params==0) return $text;
    if($seconds>$a_month)
    {
        $months=floor($seconds/$a_month);
        $text.=$months.' months ';
        $seconds=$seconds-($months*$a_month);
        $params--;
    }
    if($params==0) return $text;
    if($seconds>$a_week)
    {
        $weeks=floor($seconds/$a_week);
        $text.=$weeks.' weeks ';
        $seconds=$seconds-($months*$a_week);
        $params--;
    }
    if($params==0) return $text;
    if($seconds>$a_day)
    {
        $days=floor($seconds/$a_day);
        $text.=$days.' days ';
        $seconds=$seconds-($days*$a_day);
        $params--;
    }
    if($params==0) return $text;
    $H=gmdate("H", $seconds);
    if($H>0)
    {
        $text.=$H.' hours ';
        $params--;
    }
    if($params==0) return $text;
    $M=gmdate("i", $seconds);
    if($M>0)
    {
        $text.=$M.' minutes ';
        $params--;
    }
    if($params==0) return $text;
    $S=gmdate("s", $seconds);
    $text.=$S.' seconds ';

    return $text;
} 
```

# ruby-on-rails - 试图避免将不必要的 user_id 字段添加到 rails db schema

> ID：15548796
> 
> 赞同：0
> 
> 时间：2013-03-21T13:22:02.180
> 
> 标签：ruby-on-rails, relationships

所以我有 3 个模型：订单、项目和用户。

```
User
has_many :items

Order
has_many :items

Item
belongs_to :user
belongs_to :order 
```

我的问题是：我还想关联 User 和 Order 模型（比如有一个关联：Order :belongs_to :user，User has_many :orders）。我想在包含 :user_id 的 Order 模型中创建一个新列。但这是不正确的，因为 Item 已经与用户关联了吗？是否有一种奇特的关系可以让我得到我需要的东西，而无需在数据库中添加额外的 user_id 字段？

我可以从技术上说：

```
User 
has_many :orders, :through => :items

Order
has_many :users, :through => :items 
```

但这对我来说就像一个黑客。为了让用户与订单相关联，我不得不说 order.users.first （订单 has_many :items，但所有项目都只有一个用户）

另外顺便说一句，我无法摆脱项目与用户的关联，因为在一段时间内创建了项目并且与订单无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:33:44.887

如果你同时保持这两种联想，从长远来看，你会给自己带来麻烦。我认为您最好现在正确设置并使用 rake 任务使旧数据符合您的新模式。

因此，`User -> Order -> Item`为前进做好准备，然后创建一个 rake 任务来更新您的数据库：

1.  对于 item.order == nil # legacy 记录的所有项目
2.  创建新订单
3.  将新的 order.user_id 设置为 item.user_id 并保存
4.  将 item.order_id 设置为新的 order.id 并保存
5.  冲洗并重复

现在您的架构已正确设置，并且您的所有旧数据都已迁移到新格式。最重要的是，您不会拘泥于尝试遵守传统格式。

抱歉伪代码，但我今天病了。:)

# asp.net - 如何在 ASP.NET MVC 中呈现 HTML 字符串？

> ID：15548797
> 
> 赞同：60
> 
> 时间：2013-03-21T13:22:02.647
> 
> 标签：asp.net, asp.net-mvc-3, razor

在我的主页上，我有 code `@{Html.RenderPartial("_Partial1.cshtml");}`，在我的 Partial 上，我有一个 HTML 字符串：

```
@{ 
    // The string is actually dynamic, not static. This is here for simplicity
    string abc="<div class=\"error\">abc</div>";
} 
@abc 
```

我想输出`abc`一些 CSS 错误样式，但实际上我得到了`<div class="error">abc</div>`- 当然，那里没有样式。如何将其解释为 HTML 源代码而不是字符串？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2013-03-21T13:24:14.157

您可以使用该`Html.Raw()`方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-13T09:46:42.807

如果您在视图中使用模型而不是使用：

```
@model YourApp.Models.YourModel
....

@Html.Raw(@Model.NameOfYourProperty) 
```

# regex - 将模式线与之前的线合并

> ID：15548800
> 
> 赞同：0
> 
> 时间：2013-03-21T13:22:17.903
> 
> 标签：regex, sed, awk

我需要打印所有将以空格“^”开头的行与之前的行合并的行。使用 awk 或 sed 将是完美的。

从：

```
ext_bus     3  0/1/1/0/1/1    c8xx           CLAIMED
                             /dev/c8xx3
target      4  0/1/1/0/1/1.0  tgt            CLAIMED
disk        4  0/1/1  sdisk          CLAIMED
                             /dev/c3t0   /dev/c2t0
                             /dev/c4t0 
```

至：

```
ext_bus     3  0/1/1/0/1/1    c8xx           CLAIMED /dev/c8xx3                          
target      4  0/1/1/0/1/1.0  tgt            CLAIMED
disk        4  0/1/1  sdisk          CLAIMED /dev/c3t0   /dev/c2t0 /dev/c4t0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:45:10.450

使用[perl](/questions/tagged/perl "显示标记为“perl”的问题")（在您的情况下比[Suhas 的`sed`答案](https://stackoverflow.com/a/15548941/465183)更便携）：

```
perl -0777 -pe 's/\n\s+/ /gms' 
```

`-0777`读取字符串中的整个文件

[替换修饰符](http://perldoc.perl.org/perlre.html#Modifiers)在那里是强制性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:01:28.260

sed 是在单行上进行简单替换的出色工具。对于其他任何事情，只需使用 awk：

```
$ awk '{printf "%s%s", (gsub(/^[[:space:]]+/,"")?" ":nl), $0; nl="\n"} END{print ""}' file
ext_bus     3  0/1/1/0/1/1    c8xx           CLAIMED /dev/c8xx3
target      4  0/1/1/0/1/1.0  tgt            CLAIMED
disk        4  0/1/1  sdisk          CLAIMED /dev/c3t0   /dev/c2t0 /dev/c4t0 
```

上面一次处理每个输入行，并且不会将整个文件读入内存，但如果这是可以接受的，那么这里是 GNU awk（用于`RS='\0'`将整个文件作为字符串读取）相当于@sputnik 的 perl 脚本，如果有人关心的话：

```
$ gawk -v RS='\0' -v ORS= '{gsub(/\n\s+/," ")}1' file
ext_bus     3  0/1/1/0/1/1    c8xx           CLAIMED /dev/c8xx3
target      4  0/1/1/0/1/1.0  tgt            CLAIMED
disk        4  0/1/1  sdisk          CLAIMED /dev/c3t0   /dev/c2t0 /dev/c4t0 
```

在非 gawk awks 中，只需将 RS 设置为一些未出现在输入文件中的控制字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:28:20.713

尝试这个：

```
sed -e :a -e '$!N;s/\n\s/ /;ta' -e 'P;D' <filename> 
```

# c# - Linq RemoveAll 删除所有项目

> ID：15548808
> 
> 赞同：0
> 
> 时间：2013-03-21T13:22:36.333
> 
> 标签：c#, linq

我有一个包含几条记录的数据行的 newLinks 集合。这是表结构

```
LinkSysId | LinkId | Col1 | Col2
1           1        str    str1
2           1        str5   str4 
3           2        str2   str3
4           2        str6   str7 
```

我想做一个 linq 查询，它会迭代集合并只留下前 1 个不同的 LinkId 记录：

```
LinkSysId | LinkId | Col1 | Col2
1           1        str    str 
3           2        str3   str3 
```

我试着做这样

```
newLinks.RemoveAll(rowComp => newLinks.Any(rowDel => 
                   rowComp["linkId"].ToString() == rowDel["linkId"].ToString() 
                   &&  rowComp["linkSysId"].ToString() != rowDel["linkSysId"].ToString())); 
```

但它会从集合中删除所有项目？谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:34:39.397

有实现 DistinctBy() 的 LINQ 扩展库，这正是您正在寻找的。然而，这个小片段利用了这样一个事实：如果已经添加了相同的项目，则 hashset 上的 Add() 方法返回 false：

```
var foundIds = new HashSet<int>();
var FirstLinkId = newLinks.Where(row=>foundIds.Add(row.LinkId)).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:56:25.250

正如 Tormod 所说，最好的方法是使用`DistinctBy()`实​​现。

（特别是，看看 Tormod 的实现，你会发现它实际上与下面的 DistinctByImpl() 方法相同，所以这个答案应该被认为是他的扩展。）

如果使用 DistinctBy()，则解决方案变得如此简单：

`var uniques = list.DistinctBy(item => item.LinkId);`

[在Jon Skeet 的](http://code.google.com/p/morelinq/)[库](http://code.google.com/p/morelinq/)`DistinctBy()`中可以找到一个很好的实现，该库也[可以在 NuGet 上找到](https://www.nuget.org/packages/MoreLinq.Source.MoreEnumerable.DistinctBy/)。[`MoreLinq`](http://code.google.com/p/morelinq/)

例如，这是一个使用来自 MoreLinq 的 DistinctBy() 实现的副本的实现。不过不要使用此代码 - 使用 NuGet 下载原始注释代码。

```
using System;
using System.Linq;
using System.Collections.Generic;

namespace Demo
{
    public static class Program
    {
        public static void Main(string[] args)
        {
            List<Test> list = new List<Test>
            {
                new Test(1, 1),
                new Test(2, 1),
                new Test(3, 2),
                new Test(4, 2)
            };

            var uniques = list.DistinctBy(item => item.LinkId);

            foreach (var item in uniques)
            {
                Console.WriteLine(item);
            }
        }
    }

    public class Test
    {
        public Test(int linkSysId, int linkId)
        {
            LinkSysId = linkSysId;
            LinkId = linkId;
        }

        public override string ToString()
        {
            return string.Format("LinkSysId = {0}, LinkId = {1}", LinkSysId, LinkId);
        }

        public int LinkSysId;
        public int LinkId;
    }

    static class EnumerableExt
    {
        public static IEnumerable<TSource> DistinctBy<TSource, TKey>
            (this IEnumerable<TSource> source, Func<TSource, TKey> keySelector)
        {
            return source.DistinctBy(keySelector, null);
        }

        public static IEnumerable<TSource> DistinctBy<TSource, TKey>(this IEnumerable<TSource> source,
            Func<TSource, TKey> keySelector, IEqualityComparer<TKey> comparer)
        {
            if (source == null) throw new ArgumentNullException("source");
            if (keySelector == null) throw new ArgumentNullException("keySelector");
            return DistinctByImpl(source, keySelector, comparer);
        }

        private static IEnumerable<TSource> DistinctByImpl<TSource, TKey>(IEnumerable<TSource> source,
            Func<TSource, TKey> keySelector, IEqualityComparer<TKey> comparer)
        {
            var knownKeys = new HashSet<TKey>(comparer);
            return source.Where(element => knownKeys.Add(keySelector(element)));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:27:00.663

“创造新”的方法：

```
DataTable keepTheseRows = table.AsEnumerable()
    .GroupBy(r => r.Field<int>("LinkId"))
    .Select(g => g.First())  // takes the first of each group arbitrarily
    .CopyToDataTable(); 
```

# c++ - int() 是 0 在哪里定义的？

> ID：15548813
> 
> 赞同：0
> 
> 时间：2013-03-21T13:22:45.033
> 
> 标签：c++, standards

```
#include <iostream>
#include <string>

int main() {
    std::pair<std::string, int> s;
    std::cout << s.second << std::endl;
} 
```

在这个例子`s.second`中`0`虽然它没有被初始化。您能否提供指向 C++ 标准的链接，其中定义了为什么`0`。我知道这是因为`s.second`被初始化`int()`，但无法找到标准中声明的`int()`行`0`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T13:24:45.833

它是

### 8.5 初始化器 [dcl.init]

> 10) 初始化器为空括号集的对象，即 ()，应进行值初始化。

和

> 7) 对 T 类型的对象进行值初始化意味着：
> — 如果 T 是具有用户提供的构造函数 (12.1) 的（可能是 cv 限定的）类类型（第 9 条），则调用 T 的默认构造函数（并且如果 T 没有可访问的默认构造函数，则初始化格式错误）；
> — 如果 T 是没有用户提供的构造函数的（可能是 cv 限定的）非联合类类型，则该对象是零初始化的，如果 T 的隐式声明的默认构造函数是非平凡的，则调用该构造函数。
> — 如果 T 是一个数组类型，那么每个元素都是值初始化的；
> **— 否则，对象被零初始化。**

我猜

> 5) 对 T 类型的对象或引用进行零初始化意味着：
> — 如果 T 是标量类型 (3.9)，则将对象设置为值 0（零），作为整数常量表达式，转换为 T；[...]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-21T13:25:34.830

> 我知道这是因为 s.second 由 int() 初始化，但在标准中找不到规定 int() 为 0 的行。

这是您在 C++11 标准中必须遵循的路径 - 此答案使用[Draft n3485](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2012/n3485.pdf)作为参考，它比当前的官方标准更新。

根据 C++11 标准的第 8.5/11 段：

> 初始化器是一组空括号的对象，即 ()，应进行**值初始化**。[...]

此外，根据 C++11 标准的第 8.5/8 段：

> 对T 类型的对象进行**值初始化**意味着：
> 
> — 如果 T 是（可能是 cv 限定的）类类型（第 9 条），没有默认构造函数（12.1）或用户提供或删除的默认构造函数，则对象被默认初始化；
> 
> — 如果 T 是（可能是 cv 限定的）非联合类类型，没有用户提供或删除的默认构造函数，则该对象为零初始化，如果 T 具有非平凡的默认构造函数，则默认初始化；
> 
> — 如果 T 是一个数组类型，那么每个元素都是值初始化的；
> 
> —**否则，对象是零初始化的**。

最后（尽管这很直观），根据第 8.5/6 段：

> 对T 类型的对象或引用进行**零初始化意味着：**
> 
> —**如果 T 是标量类型（3.9），则将对象设置为值 0（零）**，作为整数常量表达式，转换为 T；
> 
> — [...]

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T13:30:07.277

> 我知道这是因为 s.second 由 int() 初始化

该标准实际上并没有说`second`是用`int()`. 它只是给出了`std::pair`使用默认构造函数创建 a 的效果（第 20.3.2 节）：

> *效果*：值初始化第一个和第二个。

值初始化定义为（§8.5）：

> 对类型对象进行*值初始化*`T`意味着：
> 
> *   if`T`是（可能是 cv 限定的）类类型（第 9 条）[...]
>     
>     
> *   if`T`是（可能是 cv 限定的）非联合类类型 [...]
>     
>     
> *   如果`T`是数组类型，[...]
>     
>     
> *   否则，对象被零初始化。

Whcih 导致`second`被零初始化，因为它是`int`（§8.5）：

> 对类型的对象或引用进行*零初始化*`T`意味着：
> 
> *   如果`T`是标量类型（3.9），则将对象设置为值0（零），取整型常量表达式，转换为T；
>     
>     
> *   [...]

# php - 如何在cakephp的分页中传递参数？

> ID：15548814
> 
> 赞同：3
> 
> 时间：2013-03-21T13:22:47.513
> 
> 标签：php, cakephp, pagination, cakephp-2.0

我想在 cakephp 中传递参数，当我搜索排序结果然后单击分页的 2 页时，我该怎么做？我的控制器代码中的分页参数是

```
 $membershipType = '';
    $status         = '';
    $timeSpan       = '';

    $fieldName = 'membership_Type';
    if(!empty($this->params->named["fieldName"])){
        $this->request->data['associations']["fieldName"] = $this->params->named["fieldName"];
    }
    $fieldName = 'statuses';
    if(!empty($this->params->named["fieldName"])){
        $this->request->data['associations']["fieldName"] = $this->params->named["fieldName"];
    }

    $fieldName = 'time_Span';
    if(!empty($this->params->named["fieldName"])){
        $this->request->data['associations']["fieldName"] = $this->params->named["fieldName"];
    } 
```

我想在分页中传递字段名称的值，我该如何传递这些？在我看来，代码是

```
 echo $this->PaginatorManager->options(); 
```

我真的被困在这里两天了，我不知道我现在该怎么办？请帮助我，将不胜感激，在此先感谢一吨。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T15:15:02.500

您可以将“url”选项传递给视图中的分页，如下所示：

```
$url = array_merge($this->request->pass, $this->request->named);
unset($url['page']);
$parts = explode('?', $_SERVER['REQUEST_URI'], 2);
if (count($parts) == 2) {
    $url['?'] = $parts[1];
}
$this->Paginator->options(array(
    'url' => $url,
)); 
```

更多在这里：[http](http://api.cakephp.org/2.2/class-PaginatorHelper.html) ://api.cakephp.org/2.2/class-PaginatorHelper.html 在这里：http: [//book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html#PaginatorHelper::选项](http://book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html#PaginatorHelper::options)

如果您广泛使用过滤器和其他 url 参数 - 制作一个将为您处理它的元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T19:36:56.293

这对我有用：

我在 app.Config.routes.php 中定义了参数：

```
Router::connect('/my_account/*', array('controller' => 'ads', 'action' => 'my_account'), array(
'pass' => array('status')
)); 
```

然后在视图文件中：

```
$this->Paginator->options(array(
'url' => $this->request->pass
)); 
```

# php - Wordpress - 致命错误：在非对象 $wpdb 上调用成员函数 get_var()

> ID：15548816
> 
> 赞同：3
> 
> 时间：2013-03-21T13:22:50.807
> 
> 标签：php, wordpress

[[s_ha_dum 在 http://wordpress.stackexchange.com 上的解决方案]](https://wordpress.stackexchange.com/questions/91848/storing-password-functions-php)

我正在尝试根据在帖子设置中输入的密码将用户引导至某个帖子。我几乎有工作代码：

页面表格：

```
<form method="post" action="">
  <input type="password" name="passwordfield">
  <input type="hidden" name="homepagepassword" value="1">
  <input type="submit" value="Submit">
</form> 
```

functions.php 中的代码

```
function doPasswordStuff(){
    if(isset($_POST['homepagepassword'])){
    $post_password = $_POST['passwordfield'];
    $post_id = $wpdb->get_var( $wpdb->prepare("SELECT ID FROM $wpdb->posts WHERE post_password = %s", $post_password) );
    $q = new WP_Query( 'p=$post_id' );
    if($q->have_posts()){
        while($q->have_posts()){
            $q->the_post();
            wp_redirect(get_permalink());
            die();
        }
    } else {
        // oh dear, there isnt a post with this 'password', put a redirect to a fallback here
        wp_redirect('http://www.google.com');
        die();
    }
    wp_reset_query();
    }
}
add_action('init','doPasswordStuff'); 
```

但是我在这一行遇到致命错误（致命错误：调用非对象上的成员函数 get_var()）：

> $post_id = $wpdb->get_var( $wpdb->prepare("SELECT ID FROM $wpdb->posts WHERE post_password = %d", $post_password) );

如果有人愿意看一下真的很感激:)谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T13:35:00.510

在此之前全球化 $wpdb

`global $wpdb`

`$post_id = $wpdb->get_var( $wpdb->prepare("SELECT id FROM $wpdb->posts WHERE post_password = %s", $post_password) ); $q = new WP_Query( 'p=$post_id' );`

此外，最好使用小写的表/列名

然后像这样重定向

`<?php if ( $q->have_posts() ) : while ( $q->have_posts() ) : $q->the_post(); ?>`

`wp_redirect( the_permalink() );`

`<?php endif;?>`

还使用 http 状态代码作为 wp_redirect() 的第二个参数 这可能会有所帮助 [HTTP STATUS CODES](http://www.w3.org/Protocols/HTTP/HTRESP.html)

# jsf - Richfaces inputNumberSlider 不调用setter

> ID：15548817
> 
> 赞同：1
> 
> 时间：2013-03-21T13:22:52.730
> 
> 标签：jsf, richfaces, setter

以下 inputNumberSlider 不调用我的设置器：

```
<rich:inputNumberSlider 
         value="#{skinningBean.currentSkin.button.backgroundColor_focussedAlpha}"
         maxValue="1" step="0.1">
         <a4j:ajax event="change" render="preview" oncomplete="initSlider()" />
</rich:inputNumberSlider>

public float getBackgroundColor_focussedAlpha() {
    return backgroundColor_focussedAlpha;
}

public void setBackgroundColor_focussedAlpha(float backgroundColor_focussedAlpha) {
    this.backgroundColor_focussedAlpha = backgroundColor_focussedAlpha;
} 
```

我还尝试制作一个将字符串作为参数的设置器，但它也没有被调用。Ans 是的，它在表单中！我究竟做错了什么？

**编辑：**似乎我不是唯一一个有这个问题的人：http: [//osdir.com/ml/java-jsf-richfaces-issues/2010-10/msg00073.html](http://osdir.com/ml/java-jsf-richfaces-issues/2010-10/msg00073.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:21:17.430

这可能是由您的 bean 的范围引起的。

我发现如果它来自`javax.faces.bean`包中的任何内容，则组件不起作用，但它可以与`javax.enterprise.context`包一起使用。范围命名相同，但`javax.faces.bean.@ViewScoped`您可以更改为`javax.enterprise.context.@ConversationScoped`

# python - 欧拉计划 #82 (Python)

> ID：15548820
> 
> 赞同：-2
> 
> 时间：2013-03-21T13:23:00.880
> 
> 标签：python

首先这是问题所在：[https](https://projecteuler.net/problem=82) ://projecteuler.net/problem=82 。这是我的代码：

```
# https://projecteuler.net/problem=82

matrice = open('matrix3.txt','r').read().split('\n')
m = []
for el in matrice:
    if el=='':
        continue
    tmp = el.split(',')
    m.append(tmp)
matrix = [[0 for i in range(80)]for j in range(80)]
x,y = 0,0
while(True):
    matrix[x][y]=int(m[x][y])
    y+=1
    if y==80:
        y=0
        x+=1
        if x==80:
            break 
tmp = [0]*80
x,y = 0,78
while(True):
    if x==0:
        tmp[x]=min(matrix[x][y+1],matrix[x+1][y]+matrix[x+1][y+1])
    if x==79:
        tmp[x]=min(matrix[x][y+1],matrix[x-1][y]+matrix[x-1][y+1])
    else:
        tmp[x]=min(matrix[x][y+1],matrix[x-1][y]+matrix[x-1][y+1],matrix[x+1][y]+matrix[x+1][y+1])
    x+=1
    if x==80:
        for e in range(80):
            matrix[e][y]+=tmp[e]
        tmp = [0]*80
        x=0
        y+=-1
        if y<0:
            break
minimo = 10**9
for e in range(80):
     if matrix[e][0]<minimo:
        minimo=matrix[e][0]
print(minimo) 
```

这段代码背后的想法如下：我从第 79 列（如果从 0 开始计数，则为第 78 列）开始计算从该列中的任何给定条目到右侧列的最佳（最小）方法。当列结束时，我将其替换为我找到的最小结果，并开始对左侧的列执行相同的操作。

有谁可以帮助我理解为什么我得到错误的答案？（我得到 262716）

相同的代码适用于示例中的矩阵（当然，如果您更改索引，它会起作用）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T21:22:40.013

如果我正确理解了问题、代码和算法，那么看起来您实际上并没有计算从一列到下一列的最佳方式，因为您只考虑了几种可能的方式来获得下一栏。例如，考虑第一次迭代（何时`y=78`）。那么我认为你想要的是在第 79 列中`tmp[0]`保持从`matrix[0][78]`到任何地方的最小总和，但你只考虑两种可能性：向右走，或者向下走然后向右走。如果从`matrix[0][78]`下一列进入的最佳方法是向下 6 个条目然后向右移动怎么办？您的代码永远不会考虑这种可能性。

您的代码可能适用于小示例，因为碰巧最小路径在每列中仅上升或下降一次。但我认为这是一个巧合（也可能是一个选择不当的例子）。

解决此问题的一种方法是使用以下方法。当输入为 NxN 矩阵时，定义一个 NxN 数组`min_path`。我们将要填写，`min_path`这`min_path[x][y]`是从输入矩阵的第一列中的任何条目开始并在 结束的最小路径和`[x][y]`。我们一次填写一列`min_path`，从最左边的一列开始。为了计算`min_path[i][j]`，我们查看 的第 (j-1) 列中的所有条目`min_path`，以及从每个条目到 (i, j) 的成本。这是一些显示此解决方案的 Python 代码：[https](https://gist.github.com/estark37/5216851) ://gist.github.com/estark37/5216851 。这是一个 O(N^4) 解决方案，但它可能会更快！（也许通过预先计算`sum_to`调用的结果？）

# css - Span 的伪元素覆盖元素本身

> ID：15548825
> 
> 赞同：0
> 
> 时间：2013-03-21T13:23:13.957
> 
> 标签：css, pseudo-element

当我试图对按钮的背景进行风格化时，我被CSS 伪元素`:before`所困扰。`:after`问题是这样的：当我只使用正 z 索引将`span`自身及其伪元素以正确的顺序放置时，`:before`并且`:after`总是与元素重叠。当我使用负 z-indices 时，没关系，但我不想更改其他底层元素的 z-indices 只是为了使按钮工作。

所以[这就是](http://jsfiddle.net/VLLjc/)问题所在，[这就是](http://jsfiddle.net/pLQNv/1/)除了负 z 指数之外要实现的目标。

问题代码：

```
.button {
    display: inline-block;
    z-index:3;
    position: relative;
    left: 25px;
    top: 25px;
    height: 60px;
    padding-left: 20px;
    padding-right: 20px;
    background: rgb(96,96,100);
    border: 1px solid #202020;
    color: #dddddd;
}

.button:before {
    content: "";
    width: 100%;
    height: 100%;
    z-index: 2;
    position: absolute;
    background: rgba(85,85,90, .7);
    padding: 10px;
    left: -10px;
    top: -10px;
}

.button:after {
    content: "";
    width: 100%;
    height: 100%;
    z-index: 1;
    position: absolute;
    background: rgba(85,85,90, .4);
    padding: 20px;
    left: -20px;
    top: -20px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:42:07.963

去边界！:)

[http://jsfiddle.net/RwGV9/1/](http://jsfiddle.net/RwGV9/1/)

基本上

```
border:solid 10px rgba(85,85,90, .7);
left: -10px;
top: -10px; 
```

另一个右左，顶部和填充的东西也一样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:30:43.943

[http://jsfiddle.net/D8gDK/](http://jsfiddle.net/D8gDK/)

```
.button {
display: inline-block;
position: relative;
left: 25px;
top: 25px;
width: 100px;
    height: 60px;
padding-left: 20px;
padding-right: 20px;
background: rgb(96,96,100);
border: 1px solid #202020;
color: #dddddd;
}
.button:before {
content: "";
display: block;
width: 140px;
height: 60px;
position: relative;
background: rgba(85,85,90, .7);
border: 10px solid rgba(85,85,90, .4);
padding: 10px;
left: -40px;
top: -20px;
} 
```

我摆脱了第二个伪元素并将之前放在按钮后面。可能需要对颜色进行一些处理...

仅当您知道按钮的宽度时才有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:33:05.423

如果您不介意在 html 中添加属性，您可以这样做：

[http://jsfiddle.net/RwGV9/](http://jsfiddle.net/RwGV9/)

在 HTML 中：

```
<span data-text='button !' class="button">button</span> 
```

在 CSS 中：

```
.button:before {
content: attr(data-text); 
```

基本上使用内容按钮将文本放在最高层：attr(); 并使您的文本消失在最深处（bg color = type color 不是很优雅，但它使按钮的文本可供用户选择！）

# c# - 如何使用 linq 读取 xml 文件

> ID：15548829
> 
> 赞同：1
> 
> 时间：2013-03-21T13:23:26.920
> 
> 标签：c#, xml, winforms, linq, class

我有这个 db.xml 文件

```
<items>
 <item>
  <title>Title1</title>
  <year>2013</title>
  <categories>
   <category>Category1</category>
   <category>Category2</category>
   <category>Category3</category>
  </categories>
  <count>10</count>
 </item>
 (and so on)
</items> 
```

我是这样读的：

```
var items = from item in xdoc.Descendants("item")
               select new
               {
                   Title = item.Element("title").Value,
                   Year = item.Element("year").Value,
                   Categories = item.Element("categories").Value, // I know this is wrong 
                   Count = item.Element("count").Value
           }; 
```

问题是我如何阅读类别并将它们添加到列表中？

```
foreach (var item in items)
{
    book.Title = item.Title;
    book.Year = item.Year;
    foreach (var Category in Categories)
    {
        book.Categories.Add(Category);
    }
    book.Count = item.Count;
    books.Add(book);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T13:27:32.010

最好使用强制转换 (to `string`， to`int`等，然后直接读取元素的值。这里是返回整数值的查询`Year`和`Count`属性。`Categories`是`IEnumerable<string>`：

```
var items = from item in xdoc.Descendants("item")
            select new {
               Title = (string)item.Element("title"),
               Year = (int)item.Element("year"),
               Count = (int)item.Element("count"),
               Categories = from c in item.Element("categories").Elements()
                            select (string)c                   
            }; 
```

如果你想`Categories`这样`List<string>`解析类别：

```
 Categories = item.Element("categories")
                  .Elements()
                  .Select(c => (string)c)
                  .ToList() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T13:27:31.993

您可以获取其元素列表

**已编辑**

```
var items = from item in xdoc.Descendants("item")
       select new
       {
           Title = item.Element("title").Value,
           Year = item.Element("year").Value,
           Categories = item.Descendants("categories").Descendants().Select(x=>x.Value).ToList(),
           Count = item.Element("count").Value
       }; 
```

# excel - excel Visual Basic 命令按钮链接

> ID：15548831
> 
> 赞同：0
> 
> 时间：2013-03-21T13:23:34.123
> 
> 标签：excel, spreadsheet, vba

我使用以下代码从代码内部创建了一个命令按钮：

```
Public Sub createForm(label As String)
Dim control As control
Dim controlbutton As CommandButton

'set control for the first label on the page
Set control = UserForm1.Controls.Add("Forms.Label.1", "Text", True)
With control
    .Caption = label
    .Left = 25
    .Top = 10
    .Height = 20
    .Width = 200
    .Visible = True
End With

'set control for the enter button
Set controlbutton = UserForm1.Controls.Add("Forms.CommandButton.1", "Enter", True)
With controlbutton
    .Caption = "Enter"
    .Name = "Enter"
    .Left = 45
    .Top = 80
    .Height = 30
    .Width = 50
    .Visible = True
End With

'set control for the cancel button
Set controlbutton = UserForm1.Controls.Add("Forms.CommandButton.1", "CancelButton", True)
    With controlbutton
        .Caption = "Cancel"
        .Left = 105
        .Top = 80
        .Height = 30
        .Width = 50
        .Visible = True
    End With

    'UserForm1.Controls.Add "Forms.TextBox.1", "Name1", True
    'UserForm1!Name1.Text = "Hi"
End Sub 
```

但是我希望能够在单击按钮时做一些事情。我这样做了：

```
Sub CancelButton_Click()

    UserForm1.Name = "Closed"

End Sub 
```

这不起作用，因为该事件从未运行过。所有这些都在表单代码中运行。我有初始化等，但这是一个自定义函数。它创建并显示按钮，但不会让我在单击时运行事件。

我所追求的是当单击取消按钮时它会关闭表单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:04:13.727

首先，您需要将代码放入`UserForm`. 然后你需要添加一个类来处理所有的按钮点击事件。如果您搜索“vba userform add controls runtime”，您会找到一些很好的答案，甚至在 SO 上也有一些答案。以下是您针对特定情况所做的事情：

首先在 VBE 中插入一个新的`Class module`并将其命名为“ **clsButton** ”。在此模块中，您将添加以下代码：

```
Public WithEvents btn As MSForms.CommandButton
Private Sub btn_Click()
If btn.Caption = "Cancel" Then
    MsgBox "Cancel"
ElseIf btn.Caption = "Enter" Then
    MsgBox "Enter"
End If
End Sub 
```

WithEvents 关键字声明了一个`btn`在单击时触发事件的对象。您可以使用`Caption`上面的属性，或者使用`Tag`属性来区分哪个按钮实际触发了事件。

现在您需要将修改后的代码添加到用户窗体：

```
Public cButton As clsButton
Public coll As New Collection

Private Sub UserForm_Activate()
Dim controlbutton As CommandButton
Set controlbutton = Me.Controls.Add("Forms.CommandButton.1", "Enter", True)
With controlbutton
    .Caption = "Enter"
    .Name = "Enter"
    .Left = 45
    .Top = 80
    .Height = 30
    .Width = 50
    .Visible = True
    Set cButton = New clsButton
    Set cButton.btn = controlbutton
    coll.Add cButton
End With

Set controlbutton = Me.Controls.Add("Forms.CommandButton.1", "CancelButton", True)
With controlbutton
    .Caption = "Cancel"
    .Left = 105
    .Top = 80
    .Height = 30
    .Width = 50
    .Visible = True
    Set cButton = New clsButton
    Set cButton.btn = controlbutton
    coll.Add cButton
End With
End Sub 
```

我们声明了两个公共变量，一个用于保存我们刚刚创建的类的实例，另一个用于在用户窗体的生命周期中保存类实例。在 UserForm_Activate 事件中，我们为每个按钮实例化一个新的类实例并将其添加到集合中。

然后只需运行表单并单击按钮。

编辑：这是对您将 a 添加到组合中的请求的回应`ComboBox`。此代码添加一个 ComboBox`clsButton`并更改`Enter`按钮以显示 ComboBox 的当前值：

```
Public WithEvents btn As msforms.CommandButton
Public cbo As msforms.ComboBox

Private Sub btn_Click()
If btn.Caption = "Cancel" Then
    MsgBox "Cancel"
ElseIf btn.Caption = "Enter" Then
    MsgBox cbo.Value
End If
End Sub 
```

更改表单代码以创建 ComboBox，用一些值填充它，并将选择设置为其项目。然后在`Enter`创建按钮时`cbo`为其类实例设置属性。取消按钮代码不变：

```
Public cButton As clsButton
Public coll As New Collection

Private Sub UserForm_Activate()
Dim controlButton As msforms.CommandButton
Dim controlCombo As msforms.ComboBox
Dim i As Long

Set controlCombo = Me.Controls.Add("Forms.ComboBox.1", "Combo", True)
With controlCombo
    For i = 1 To 10
        .AddItem i
    Next i
    .ListIndex = 0
End With

Set controlButton = Me.Controls.Add("Forms.CommandButton.1", "Enter", True)
With controlButton
    .Caption = "Enter"
    .Name = "Enter"
    .Left = 45
    .Top = 80
    .Height = 30
    .Width = 50
    .Visible = True
    Set cButton = New clsButton
    Set cButton.btn = controlButton
    Set cButton.cbo = controlCombo
    coll.Add cButton
End With

Set controlButton = Me.Controls.Add("Forms.CommandButton.1", "CancelButton", True)
With controlButton
    .Caption = "Cancel"
    .Left = 105
    .Top = 80
    .Height = 30
    .Width = 50
    .Visible = True
    Set cButton = New clsButton
    Set cButton.btn = controlButton
    coll.Add cButton
End With
End Sub 
```

因此，总而言之，我们在类中添加了一个 ComboBox，并将其添加到 Enter 按钮的类实例中，以便 btn 可以与它​​“对话”。

# php - 在 CodeIgniter 中绕过控制器会被认为是一种好的做法吗？

> ID：15548836
> 
> 赞同：-2
> 
> 时间：2013-03-21T13:23:50.133
> 
> 标签：php, codeigniter

直接调用 View 内的 Model 类是否是最佳实践？目前我正在使用 CodeIgniter 开发应用程序。在我的应用程序的不同视图中，我包含了我想从数据库中提取的菜单。事情是目前我正在通过控制器将值传递给菜单。如果我创建一个通用模型类并从视图中调用它并通过控制器。这样就会有一个对 Model 的调用，它会立即从数据库中加载菜单并通过控制器。这样做会有什么好处和坏处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:44:52.657

使用 codeigniter，您的视图不应该关心数据来自哪里，只关心它是否存在。只有您的控制器应该与您的模型直接接触。

听起来您有一个想要在视图中加载的通用菜单，并且您不想在所有控制器中复制该代码。

为了解决这个问题，您需要创建一个通用控制器，您的主控制器从该控制器中继承一个获取菜单的方法。

`My_Controller`需要保存到`core`目录中的文件夹中`application`。

```
class MY_Controller extends CI_Controller
{
    protected function get_menu()
    {
        // Load your menu here
        $this->load->model('menu_model');
        return $this->menu_model->get_menu();
    }
} 
```

您所有的主控制器都将继承`MY_Controller`

```
class Home_Controller extends MY_Controller
{
    public function index()
    {
        $page_data = array('menu' => $this->get_menu());
        $this->load->view('home/index', $page_data);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:34:24.767

这是最糟糕的做法。那么为什么我们有 MVC 的控制器概念。:) 主要是所有逻辑都进入模型，所以直接调用模型不好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:28:30.580

在我看来，不，这不是最佳实践。视图应该联系控制器，控制器应该从模型中检索数据，其中模型完成所有逻辑。控制器假设是视图和模型的粘合剂或中间人。

控制器将返回的数据传递给 View，然后你执行你的 foreach 循环或任何显示它的操作。

视图不应该做任何逻辑。从数据库中检索数据有点逻辑。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-21T13:37:23.740

不会有任何问题，因为您使用的是通用控制器。

注意：您不应该直接从视图中调用模型。

# c++ - 受保护的数据设计模式

> ID：15548840
> 
> 赞同：3
> 
> 时间：2013-03-21T13:24:03.377
> 
> 标签：c++, design-patterns, concurrency, mutex, guard

在我们的应用程序中，我们处理在工作线程中处理并在显示线程中访问的数据，并且我们有一个负责关键部分的互斥锁。没什么特别的。

现在我们考虑重新编写我们的代码，其中当前锁定由持有和处理数据的一方明确完成。我们想到了一个单一的实体来保存数据，并且只以受保护的方式访问数据。

为此，我们有一个名为 GuardedData 的类。调用者可以请求这样一个对象，并且应该在本地范围内只保留很短的时间。只要对象存在，它就会保持锁定。一旦对象被销毁，锁就会被释放。数据访问与锁定机制相结合，调用者无需进行任何明确的额外工作。班级的名字让来电者想起了现在的守卫。

```
template<typename T, typename Lockable>
class GuardedData {
    GuardedData(T &d, Lockable &m) : data(d), guard(m) {}
    boost::lock_guard<Lockable> guard;
    T &data;

    T &operator->() { return data; }
}; 
```

同样，一个非常简单的概念。operator-> 模仿 STL 迭代器的语义来访问有效负载。

现在我想知道：

*   这种方法众所周知吗？
*   是否可能已经有这样的模板类，例如在 boost 库中？

我问是因为我认为这是一个相当通用且可用的概念。我找不到类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:02:00.943

根据它的使用方式，您几乎可以保证在某些时候最终会出现死锁。如果您想对两条数据进行操作，那么您最终会锁定互斥锁两次并死锁（除非每条数据都有自己的互斥锁 - 如果锁定顺序不一致也会导致死锁 - 您无法控制用这个方案而不使它变得非常复杂）。除非您使用可能不需要的递归互斥锁。

另外，您的 GuardedData 对象是如何传递的？boost::lock_guard 是不可复制的——它会引发互斥体的所有权问题，即释放的位置和时间。

在需要时将所需的部分数据复制到读取器/写入器线程可能更容易，同时保持关键部分简短。作者将类似地一次性提交数据模型。

本质上，您的查看器线程会在给定时间获取所需数据的快照。这甚至可能完全适合位于运行线程的核心附近的 cpu 缓存，并且永远不会进入 RAM。编写器线程可以在阅读器处理底层数据时修改它（但这应该使视图无效）。然而，由于查看器有一个副本，它可以继续并在它与数据同步的那一刻提供数据视图。

另一种选择是给视图一个指向数据的智能指针（应该被视为不可变的）。如果作者希望修改数据，它会在此时复制它，修改副本，完成后，将指针切换到模型中的数据。这将需要在处理时阻止所有读取器/写入器，除非只有 1 个写入器。下次阅读器请求数据时，它会获得新的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:53:59.583

众所周知，我不确定。但是，我在 Qt 中使用了一种类似的机制，通常称为[QMutexLocker](http://harmattan-dev.nokia.com/docs/library/html/qt4/qmutexlocker.html)。区别（一个次要的，恕我直言）是您将数据与互斥锁绑定在一起。与您描述的机制非常相似的机制是 C# 中的线程同步规范。

您的方法非常适合一次保护一个数据项，但如果您需要保护更多数据项，则会变得很麻烦。此外，您的设计看起来不会阻止我在共享位置创建此对象并尽可能频繁地访问数据，认为它的保护非常好，但实际上递归访问场景没有得到处理，也没有多线程访问场景，如果它们发生在同一范围内。

这个想法似乎有点脱节。它的使用向我传达了访问数据始终是线程安全的，因为数据受到保护。通常，这不足以确保线程安全。对受保护数据的操作顺序通常很重要，因此锁定实际上是面向范围的，而不是面向数据的。您可以在模型中通过保护一个虚拟对象并将保护对象包装在一个临时范围内来解决这个问题，但是为什么不只使用现有的互斥体实现呢？

确实，这不是一个坏方法，但您需要确保了解其预期用途。

# javascript - Alfresco 将带有 js 的类别应用于 doc

> ID：15548844
> 
> 赞同：0
> 
> 时间：2013-03-21T13:24:13.943
> 
> 标签：javascript, alfresco

如何使用 javascript 将类别应用于 Alfresco 中的文档？

像这样尝试：

```
document.properties["cm:categories"] = "testCat"; 
```

更新：

像这样我可以获得“根类别”但不能获得“子类别”：

```
var rootCats =  classification.getRootCategories("cm:generalclassifiable");
document. properties["cm:categories"] = rootCats[3]; 
```

这不起作用：

```
document. properties["cm:categories"] = rootCats[3][1]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T11:26:28.867

我发现了，如果有人需要它，这就是它的完成方式

获取所有根类别 [audio, video, image, ...]

```
var rootCats =  classification.getRootCategories("cm:generalclassifiable"); 
```

从所需的根类别中获取子类别 -> 从“视频”[恐怖、喜剧、...] 中获取子类别

```
var singleCat = rootCats[1].subCategories; 
```

将类别应用于文档 -> 将“恐怖”应用于文档

```
doc. properties["cm:categories"] = singleCat[0]; //app 
```

保存

```
doc.save(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:45:07.297

首先确保文档具有可分类的方面（即具有 cm:generalClassifiable 方面）。

然后查找您要添加的类别，即：

更新：查找某个名称的类别类型节点的示例查询：

例如，像这样搜索您的类别，您也可以添加一个 PATH 子句以确保您在正确的层次结构中。

`var nodes = var categories= search.luceneSearch('+TYPE:"http://www.alfresco.org/model/content/1.0}category" +@name:testCat');`

然后从返回的数组中取出元素...

获取节点的现有类别：

`categories= document.properties["cm:categories"];`

将新类别推送到数组中：

`categories.push(categoryToAdd);`

将此分配给文档：

`document.properties["cm:categories"] = categories;`

`document.save();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T02:16:21.567

We had a similar requirement, and although slightly different to OP question, it is close enough to warrant inclusion here we feel.

We occasionally have a need to bulk apply categories. ie:new business acquired, migrate all their docs in, add categories to match existing content.

Adding categories to large numbers of documents is tedious in the interface. It needs to enable the aspect (classifiable), then edit properties to select the categories required. For every document individually. Worse, the add aspect isn't available for documents from the explorer view in share, so entering the preview is required. For large docs, entering the preview is itself a few more seconds delay.

So we built a simple script that applies the categories of the **parent folder** to everything placed under it. Then we only need to set the categories of that folder and start moving content through it (ie:move content in to obtain the category/ies, then move back to where it came, but now all have aspect and category/ies applied).

Actually we have 2 at the moment:

1.  The first folder/rule overrides whatever categories the objects had and replaces them with just those from the parent folder - we name this folder BulkCategorise
2.  The 2nd is cumulative, so it keeps existing categories and only adds those from the parent folder, which we name AccumulateCategories

We will create a third to selectively remove them when time permits.

A couple of notes:

*   adding the classifiable aspect is not actually required to be done manually or in code, it "Just Works" - at least in 5.1.
*   this may not be the best way to do this
*   accumulating a category that is already applied doesn't appear to cause any issues, they appear to coalesce/merge automatically

To use these scripts, create 2 folders and apply a rule to each to run the associated script.

The 1st script completely replaces the categories of the object with those of the parent folder and is trivially simple [Set the @name and SITE to match your installation]:

```
var inheritFromDir = search.luceneSearch('TYPE:"http://www.alfresco.org/model/content/1.0}folder" +@name:BulkCategorise +SITE:YOUR_SITE_NAME');
// We need to deref the array of noderefs result using inheritFromDir[0]
document.properties["cm:categories"] = inheritFromDir[0].properties["cm:categories"];
document.save(); 
```

The 2nd script is a bit more involved - we left the logging code in (commented out) for an example to see how to do that, because it took some time to figure out also (and is an extremely useful feature). As before update the @name and SITE on the first line to match your system.

```
var inheritFromDir = search.luceneSearch('TYPE:"http://www.alfresco.org/model/content/1.0}folder" +@name:AccumulateCategories +SITE:YOUR_SITE_NAME');
// We need to deref the single array result using inheritFromDir[0] to get categories from topmost parent (folder) node
var parentCatArray = inheritFromDir[0].properties["cm:categories"];
//and any existing categories of the doc, or null if none exist
var thisCatArray = document.properties["cm:categories"];
var thisLen = 0;

if (thisCatArray != null) {
   thisLen = thisCatArray.length;
} else {
   thisCatArray = new Array();
}

// Some logging to find out what  is going on...
//var logFile = space.childByNamePath("log.txt");

// If the log file does not already exist, create it in current folder.
//if (logFile == null) {
//    logFile = space.createFile("log.txt");
//}

//if (logFile != null) {
//    logFile.content += new Date().toGMTString() + "\tRun started. Length of existing array is: " + thisLen + "\r\n";
//    logFile.content += new Date().toGMTString() + "\tFound parent node categories:\r\n";
      for (var i=0; i < parentCatArray.length; i++)
      {
         thisCatArray[thisLen]=parentCatArray[i];
         thisLen += 1;
      }
//}

// Push the new array of categories to the document
thisCatArray.push(document);
// apply and save the doc
document.properties["cm:categories"] = thisCatArray;
document.save(); 
```

Et Voila! In a similar way we have implemented BulkTag and BulkAccumulateTags. Now adding arbitrary categories is as simple as applying them to the folder and moving the content through with drag and drop.

# sql - SQL - 选择 - 外键

> ID：15548846
> 
> 赞同：1
> 
> 时间：2013-03-21T13:24:15.483
> 
> 标签：sql, select, left-join

```
VISITSEXIT              VISITSENTRY               VISITOR
idvisitsexit            idvisitsentry             idvisitor 
idvisitsentry           idvisitante               visitor 
idvisitor               visitor
visitor
dateexit
timeexit 
```

我需要选择表格VISITSEXIT，当她带上VISITSENTRY 时也会带上idvisitor 和idvisitor（访问者）的描述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:26:57.603

一个简单的直接[`JOIN`](http://en.wikipedia.org/wiki/Join_%28SQL%29)会给你你想要的：

```
SELECT
  t.idvisitor,
  t.visitor,
  t.dateexit,
  t.timeext,
  ... -- the rest of the columns you want to select 
FROM VISITSEXIT       AS t
INNER JOIN VisitEntry AS e ON t.idvisitentry = e.visitentry
INNER JOIN Visitor    AS v ON e.idvisitante  = v.idvisitor; 
```

`LEFT JOIN`如果您想包含其他表中那些不匹配的行，您可能还需要使用。有关`JOIN`类型的更多信息，请参阅此帖子：

*   [SQL 连接的可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# php - 我的“购物车”中有商品编号 如何显示商品名称？

> ID：15548849
> 
> 赞同：0
> 
> 时间：2013-03-21T13:24:29.037
> 
> 标签：php, sql, database

我在这里学习 php 并且有一个基本的购物车功能，它显示我选择时购物车中有什么物品，但它只显示 'productid' 的值，它是一个 4 位数字，即 '0001'

我也希望它显示项目描述，我的代码是

```
<?php
   session_start();
$cart=$_SESSION["cart"];

   extract($_POST);
   if (IsSet($productid)||IsSet($_SESSION["notempty"])) $empty=false;
   else $empty=true;

   if (!$empty)
   {
      if (IsSet($cart[$productid])) $cart[$productid]+=$quantity;
      else $cart[$productid]=$quantity;
      $_SESSION["notempty"]=true;
   }

   $_SESSION["cart"]=$cart;
?> 
```

产品也存储在数据库中，我需要从数据库中调用相同的 ID 吗？

谢谢

好的，这就是我现在所拥有的

```
<?php
$con=mysqli_connect({dbhost},{dbusername},{dbpassword},{dbname});
// Check connection

if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

$result = mysqli_query($con,"SELECT name, price FROM products = ".$var." WHERE productid = ".$i) ;

while($row = mysqli_fetch_array($result))
  {
  echo $row['name'];
  echo $row['price'];
  echo "<br>";
  }
?> 
```

但我得到一个错误

警告：mysqli_fetch_array() 期望参数 1 为 mysqli_result，布尔值在 .../cart.php 第 12 行给出

和

警告：在第 54 行的 .../cart.php 中为 foreach() 提供了无效参数

我可能做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:19:09.757

您需要在 POST 方法中将产品名称与产品 ID 一起传递，或者您需要在产品 ID 存在时运行 SQL 查询并返回产品名称，其中数据库表中的产品 ID 等于您拥有的产品 ID在您的购物车中。

可以使用类似于以下查询的内容。

```
SELECT {product_name} FROM {product_table} WHERE id={product_id} LIMIT 1; 
```

更新的代码示例：

```
$con = mysqli_connect({dbhost},{dbusername},{dbpassword},{dbname});
// Check connection

if(mysqli_connect_errno()) {
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
}

$result = mysqli_query($con, "SELECT name, price FROM products WHERE productid = $i;") ;

while($row = mysqli_fetch_array($result)) {
    echo $row['name'];
    echo $row['price'];
    echo "<br>";
} 
```

# silverlight - 在 TFS 构建的后期构建事件中签署 xap 文件

> ID：15548867
> 
> 赞同：0
> 
> 时间：2013-03-21T13:25:22.740
> 
> 标签：silverlight, tfs, continuous-integration, code-signing

我们有一个 silverlight(5) 项目，TFS (2010) 和持续集成构建中的源代码已经设置好并且运行良好。但是，我们现在正处于尝试将其发布给一些用户以让他们使用它并提供反馈的阶段。我已经设置了代码，以便它检查更新，如果有更新，它会下载最新的 xap 文件。但是，这需要对 xap 文件进行签名。在我们的开发机器上执行此操作时没有问题，但是当涉及到自动构建时，它会失败，并显示消息

> Xap 打包失败。找不到签名工具 SignTool.exe。

我已经尝试了很多方法来让 signtool 被识别并且不能。然而，在 CI 构建中我们实际上并不需要这个，所以我尝试了第二个策略，即使 postbuild 事件以在 VisualStudio 中运行为条件。在 SO 上遵循了各种建议，但无法让它们工作。

构建后事件是

```
 if "$(BuildingInsideVisualStudio)" == "true" (
"C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\signtool.exe" sign /f "$(SolutionDir)castle.pfx" "$(TargetDir)Castle.xap"
copy "$(TargetDir)Castle.xap" "$(SolutionDir)Castle.Web\ClientBin"
) 
```

仍然没有喜悦。已经尝试了多种变体，但始终从自动构建中获得相同的消息。

那么任何人都可以帮助a）在构建服务器上识别签名工具或b）让自动构建跳过postbuild事件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:42:47.580

最后发现了问题...我一直在放置一些功能，以便应用程序下载并安装最新的 xap 文件。这需要签名。由于这不起作用，我遵循了一些关于签署 xap 文件的说明，没有意识到这里的其他开发人员之一已经在构建后事件中放置了我上面描述的代码。我错误地认为这是由于我选中了“签署 Xap 文件”复选框而创建的。

所以第一个问题是其他开发人员没有与我们共享他的 pfx 文件以添加到我们的证书存储中。其次，也是主要问题，我们随后进行了两次签约尝试。一个通过复选框，一个通过构建后事件。我删除了复选框，它工作正常。该复选框的问题在于它希望 SignTool.exe 位于特定位置。在我们带有完整 VS 的开发盒上，它正在寻找它，但在构建服务器上却不是。认为它也可能与 64 位机器有关。通过仅使用构建事件（一旦您安装了正确的证书），您可以明确指定 signtool 的位置，并在必要时将 windows sdk 安装到该位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-31T15:33:44.743

这是此错误在 Google 中的最高结果，因此请使用我的解决步骤对其进行更新。

以上对我不起作用，但执行以下步骤应该可以解决它。

1.  在构建服务器上安装 Windows 8.1 SDK（对我来说是 Windows 2008 R2）
2.  将 Windows SDK BIN 目录（在我的服务器上包含 signtool.exe）添加到 Environment PATH 变量中 - 例如 c:\program files (x86)\Windows Kits\8.1\bin - 注意：不要在此周围添加引号
3.  将文件路径添加到 PATH 变量后，重新启动 services.msc 中的所有 Visual Studio Team Foundation 服务，因为它需要在构建之前重新加载这些服务

# javascript - Flask 中的异步页面处理示例

> ID：15548869
> 
> 赞同：0
> 
> 时间：2013-03-21T13:25:25.983
> 
> 标签：javascript, jquery, ajax, flask

我正在处理一个使用大量图形的应用程序（库[Raphael](http://raphaeljs.com/reference.html)和[graphdracula](http://graphdracula.net/)）。基本上，应用程序正在绘制不同的图形。假设我们有 3 个页面正在绘制图表：

1.  图1
2.  图2
3.  图3

假设我们有以下 URL：

```
www.someurl.com/graph1 
```

现在，这个 URL 将加载页面和*graph1*的绘图算法。我的应用程序现在的工作方式是：如果我想更改布局（例如，更改为 graph2），我将不得不重新加载整个页面：

```
www.someurl.com/graph2 
```

我想做的是：把它做成一个单页应用程序（SPA）。当我们加载应用程序时，我希望加载所有图表，但只有一个是可见的（我想这是这样做的方法）。当我点击一个按钮时，只是为了加载我需要的东西，而不是整个页面。就像，当我们打开应用程序的关于图表的页面时，是：

```
www.someurl.com/graph#1 -> for the first graph
www.someurl.com/graph#2 -> for the second graph
www.someurl.com/graph#3 -> for the third graph 
```

我想要这个异步。我试图为 Flask 找到一些东西，但没有成功。有人能指出我正确的方向吗？我该怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:30:29.127

如果这对您支持 IE<10 并不重要 - 而不是旧式 #hash-navigation，您可以使用 jquery-pjax 插件通过 AJAX 加载页面部分：[https ://github.com/defunkt/jquery-pjax](https://github.com/defunkt/jquery-pjax)

在 Flask 方面 - 您将不得不通过它们的标头或一些额外的参数（如 &ajax=1）来区分 AJAX 请求。

另请参阅此问题与 history.js 的比较：[jQuery-pjax vs history.js to load specific content when clicked](https://stackoverflow.com/questions/6244780/jquery-pjax-vs-history-js-to-load-specific-content-when-clicked)

# birt - 使用多选列表框时出现 BIRT 问题

> ID：15548870
> 
> 赞同：1
> 
> 时间：2013-03-21T13:25:29.120
> 
> 标签：birt

我应该使用多选列表框（动态之一），用户可以在其中选择多个值（通过按住 Ctrl 键）来查看报告。

因此，在实现时，我尝试在**BeforeOpen**方法中获取参数值并将其传递给 DataSet ，然后使用 IN 运算符将其附加到 where 子句。**我在屏幕上出现 SQL 错误**。因此，当我打印参数值时，它类似于**[Ljava.lang.Object;@26ba26ba]**导致查询错误。我以为我无法在脚本中处理该多选参数值并将其传递给查询。所以放弃了这个想法。

现在我**在 Data set 中使用 BIRT 的内置过滤器功能**。我在**Beforeopen 方法**中使用脚本在 SQL 中做的事情现在我在数据集过滤器中做同样的事情。我使用**了 row["dataColumn"]IN param["param"].value**，它工作正常。我可以从过滤屏幕中选择一个或多个值，执行报告并获得正确的结果。

现在我需要实现的另一件事是过滤器列表框中应该有全选，这样用户就可以选择全选并为所有数据带来报告，而不是选择任何其他值。我正在通过**“%”**反对全选。由于我使用的是 IN 运算符，因此我无法在 Report 上获取任何数据。

我想提供全选功能以及多选功能，但由于上述限制无法做到这一点。或者，我可以使用 Ctrl+A 来全选并且它正在工作我也可以这样做，但这是根据我需要实现的要求。

我正在使用**BIRT 版本="3.2.17"**

任何想法都会受到赞赏..提前谢谢..:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T16:21:21.090

您是否可以在参数选择中添加“全选”选项？我已经使用与我的参数查询的联合来完成此操作，并且只是将“全选”添加到我的查询结果中。

通常我要做的是在我的查询中添加一些东西，让我可以轻松地替换参数。就像是：

```
SELECT myStuff
FROM myTables
/**where**/ 
```

然后，您可以在 beforeOpen 语句中修改 DataSet 查询。

类似于以下内容：

```
if(params["myParam"]!='Select All'){
    this.queryText=this.queryText.replace("/**where**/","WHERE myStuff IN ('" + params["myParams"].join("','") + "')");
} 
```

这显然非常简化，但是您应该能够使用某种形式来允许您提出要求。

# html - 未能填充影子 DOM（以下教程）

> ID：15548871
> 
> 赞同：0
> 
> 时间：2013-03-21T13:25:33.287
> 
> 标签：html, web-component, shadow-dom

我正在 html5rocks 上玩[Shadow DOM 101 教程](http://www.html5rocks.com/en/tutorials/webcomponents/shadowdom/)。我正在使用 Chrome 25.0.1364.172，当我尝试访问`appendChild`Shadow DOM 根目录（如教程中所示）时，我得到一个 `Uncaught Error: NotFoundError: DOM Exception 8`. 我想我错过了一些明显的东西，但我不知道是什么。这是代码：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Test the shadow dom</title>

    </head>
    <body>
        <div id="myName">Alon</div>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script id="myNameTemplate" type="text/x-tmpl-template">
            <style>
                .outer {
                    border:2px solid brown;
                    border-radius: 1em;
                    background: red;
                    font-size: 28pt;
                    width: 12em;
                    height:2em;
                    text-align: center;
                }
                .boilerplate {
                    color:white;
                    font-family: sans-serif;
                    padding:0.5em;
                }
                .name {
                    color:black;
                    background: white;
                    font-family: "Marker Felt", cursive;
                    font-size: 45pt;
                    padding-top:0.2em;
                }
            </style>
            <div class="outer">
                <div class="boilerplate">
                    Hi! my name is
                </div>
                <div class="name">
                    alon
                </div>
            </div>
        </script>
        <script>
            $(document).ready(function(){
                var shadow = document.querySelector("#myName").webkitCreateShadowRoot();
                console.log(shadow);// I get #shadow-root in the console
                var template = $("#myNameTemplate").html();//also tried text(), without jQuery with innerHTML and other options
                console.log(template);//I get the content of the template in the console
                shadow.appendChild(template); //this part breaks
             });
        </script>
    </body>
</html> 
```

由于我的浏览器不支持`<template>`教程中显示的新标签，因此我将其更改为`<script type="text/x-tmpl">`.

**编辑：**当我尝试时，我从控制台收到同样的错误：

```
shadow.appendChild('<div></div>')
Error: NotFoundError: DOM Exception 8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T20:44:06.403

`appendChild()`从来没有那样工作过

`document.body.appendChild('<div></div>')`会给你同样的错误。

你想要的是`shadow.innerHTML = template;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-20T14:25:44.587

您有一些标记错误，并且脚本中选择模板的几行不正确。我已经修改了代码，所以它可以工作。

```
<script id="myNameTemplate" type="text/x-tmpl-template">
...
</script> 
```

对此

```
<template id="myNameTemplate">
...
</template> 
```

在页面底部的脚本中，我修改了您的模板变量，它出于某种原因使用了 jQuery 而不是`querySelector()`. 所以下面这段代码

```
$(document).ready(function(){
    var shadow = document.querySelector("#myName").webkitCreateShadowRoot();
    console.log(shadow);// I get #shadow-root in the console
    var template = $("#myNameTemplate").html();//also tried text(), without jQuery with innerHTML and other options
    console.log(template);//I get the content of the template in the console
    shadow.appendChild(template); //this part breaks
}); 
```

变成这个

```
$(document).ready(function(){
    var shadow = document.querySelector("#myName").webkitCreateShadowRoot();
    var template = document.querySelector("#myNameTemplate");
    shadow.appendChild(template.content);
}); 
```

这是完整的标记

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Test the shadow dom</title>

</head>
<body>
    <div id="myName">Alon</div>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <template id="myNameTemplate">
        <style>
            .outer {
                border:2px solid brown;
                border-radius: 1em;
                background: red;
                font-size: 28pt;
                width: 12em;
                height:2em;
                text-align: center;
            }
            .boilerplate {
                color:white;
                font-family: sans-serif;
                padding:0.5em;
            }
            .name {
                color:black;
                background: white;
                font-family: "Marker Felt", cursive;
                font-size: 45pt;
                padding-top:0.2em;
            }
        </style>
        <div class="outer">
            <div class="boilerplate">
                Hi! my name is
            </div>
            <div class="name">
                alon
            </div>
        </div>
    </template>
    <script>
        $(document).ready(function(){
            var shadow = document.querySelector("#myName").webkitCreateShadowRoot();
            console.log(shadow);// I get #shadow-root in the console
            var template = document.querySelector("#myNameTemplate");//also tried text(), without jQuery with innerHTML and other options
            console.log(template);//I get the content of the template in the console
            shadow.appendChild(template.content); //this part breaks
         });
    </script>
</body> 
```

除了模板 AFAIK 之外，您不能使用任何其他内容`.content`，因为模板是一个[文档片段](http://ejohn.org/blog/dom-documentfragments/)，并且要访问该片段，您需要选择 HTML5 元素的内部内容`<template>`。

我的看法是，`<template>`标记基本上是一种静态 HTML 方法，用于创建可以使用 javascript 方法获取的文档片段`querySelector()`。如果您想通过扩展或其他方式附加 DOM，则可以使用创建片段`createDocumentFragment()`，但那是另一桶青蛙。

# jquery - 避免ajax重定向

> ID：15548872
> 
> 赞同：0
> 
> 时间：2013-03-21T13:25:34.160
> 
> 标签：jquery, ajax, redirect, asp-classic

感谢您抽出宝贵时间帮助我。

尽管我肯定不是第一个遇到这个问题的人，但到目前为止我找不到任何好的答案，所以就这样了。

假设我有两个 ASP（经典）页面。

**Target1.asp**使用 response.redirect(url)重定向到**Target2.asp**

现在，我必须使用异步方法获取 Target1.asp，您可能已经发现我正在使用*AJAX*来执行此操作。

问题是当我使用*$.ajax('method':'GET', [...])*或简单地使用*$.get('Target1.asp')*并让“完成”回调用响应内容填充 div 时，它将整个页面重定向到 Target2.asp 而不是填充 div。

原因很简单：这个div里面确实是Target1.asp的内容。浏览器仍然需要重定向，因为 div 根本不像 iframe，所以整个页面都会被重定向。

我几乎可以肯定你不能直接从 javascript (?) 控制重定向。

有没有办法在不使用 iframe 的情况下处理这个问题？

这就是我想要做的：使用 ajax 的 GET 方法请求 Target1.asp，处理重定向（或类似的东西），以便 ajax 请求 Target2.asp，然后用最终结果填充 div。

谢谢你。

早期编辑：如果您需要一个编码示例，我可以写一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:38:31.770

是的，

将 response.redirect(url) 替换为[server.execute(url)](http://msdn.microsoft.com/en-us/library/ms525849%28v=vs.90%29.aspx)或[server.transfer(URL)](http://msdn.microsoft.com/en-us/library/ms525800%28v=vs.90%29.aspx)。
这将保持对服务器上导航的控制，并且不会让浏览器重定向。
[以下是不同之处](http://blog.gfader.com/2008/09/responseredirect-vs-servertransfer-vs.html)（在 .NET 中，但它是同一个 IIS 对象，因此经典 ASP 也是如此）

高温下，

埃里克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:52:06.650

您应该注意在问题标题中注意您正在使用 jQuery。虽然，是的，您正在调用 Ajax 方法，但您并没有手动执行它，而是依赖于您正在使用的库可能显式的功能。

简短的回答是，不，您可能无法阻止重定向透明地发生，因为这通常是由浏览器本身自动完成的。更长的答案是您可能应该尝试做一些事情来检查您从 ajax 响应中返回的数据，看看它是否符合您的预期。当然，这可能非常依赖于您是否有任何机制来处理您返回的数据，或者您是否可以控制服务器端响应。

以下有关 stackoverflow 的文章更详细：

[如何使用 jQuery 防止 ajax 请求跟随重定向](https://stackoverflow.com/q/8238727/964043)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:06:18.090

您有一个满意的答案，但您可能还想尝试

```
myurl = "http://(a full external url)" 
set xmlhttp = Server.CreateObject("Msxml2.ServerXMLHTTP.6.0") 
xmlhttp.open "GET", myurl, false 
xmlhttp.send "" 
Response.write xmlhttp.responseText 
set xmlhttp = nothing 
```

这就是我运行一个asp页面并包含输出的意思，这与包含文件语句略有不同

# windows - BAT 文件 – 使用括号作为分隔符

> ID：15548885
> 
> 赞同：1
> 
> 时间：2013-03-21T13:25:46.447
> 
> 标签：windows, for-loop, batch-file, cmd

我正在尝试在 BAT 文件循环中使用括号（和空格字符）作为分隔符，但结果只是命令行上的错误消息 –`^(^)"" was unexpected at this time.`

```
for /f "tokens=1,2 delims=" ^(^)"" %%a in ('status') do if "%%b"=="my_text" echo %%a 
```

有人可以详细说明如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:35:52.890

试试这个：

```
for /f "tokens=1,2 delims=() " %%a in ('status') do if "%%b"=="my_text" echo %%a 
```

# python - 如何让类方法返回自身的新实例？

> ID：15548886
> 
> 赞同：6
> 
> 时间：2013-03-21T13:25:47.507
> 
> 标签：python

我有一个 python 类，它有一些列表和变量（在 中初始化`__init__`）。

我希望有一个方法可以对这个特定的实例数据进行操作并返回一个新实例（新数据）。最后，这个方法应该返回一个带有修改数据的新实例，同时保持原始实例的数据完好无损。

什么是pythonic方式来做到这一点？

编辑：

我在类中有一个方法，`complement()`它以特定的方式修改数据。我想添加一个`__invert__()`方法，该方法返回带有`complement()`ed 数据的类的实例。

示例：假设我有一个类A。a
=A()
a.complement() 将修改实例 a 中的数据。
b = ~a 将使实例 a 中的数据保持不变，但 b 将包含补码（）数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T13:39:07.330

我喜欢实现一个`copy`创建对象的相同实例的方法。然后我可以随意修改那个新实例的值。

```
class Vector:
    def __init__(self, x, y):
        self.x, self.y = x, y

    def copy(self):
        """
        create a new instance of Vector,
        with the same data as this instance.
        """
        return Vector(self.x, self.y)

    def normalized(self):
        """
        return a new instance of Vector,
        with the same angle as this instance,
        but with length 1.
        """
        ret = self.copy()
        ret.x /= self.magnitude()
        ret.y /= self.magnitude()
        return ret

    def magnitude(self):
        return math.hypot(self.x, self.y) 
```

所以在你的情况下，你可以定义一个方法，如：

```
def complemented(self):
    ret = self.copy()
    ret.__invert__()
    return ret 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T13:45:44.023

[复制](http://docs.python.org/2/library/copy.html)模块可以完全按照您的意愿复制实例：

```
def __invert__(self):
    ret = copy.deepcopy(self)
    ret.complemented()
    return ret 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:42:03.727

[我认为您的意思是在 Python示例](http://www.linuxtopia.org/online_books/programming_books/python_programming/python_ch23.html#objects.creation.factory)中实现工厂设计模式

# vim - Vim 和 iTerm2 上的 Solarized 颜色设置 - 非文本字符突出显示颜色不正确

> ID：15548896
> 
> 赞同：0
> 
> 时间：2013-03-21T13:26:21.100
> 
> 标签：vim, highlight, color-scheme, iterm2

我在 OS X 10.7.5 上使用 iTerm2（Build 1.0.0.20130319）和 Vim（MacVim Snapshot 66 的 bin）作为我的 CLI 编辑团队。

iTerm2：

*   配色方案：晒黑
*   终端类型：xterm
*   最低对比度：最低
*   透明度：无
*   调光：禁用
*   背景图片：无

维姆：

```
set t_Co=16
set background=dark
colorscheme solarized 
```

`echo &t_Co`返回 16。一般来说，我似乎对基本设置没有任何问题。但另外我尝试为“NonText”和“SpecialKey”字符提供可从日晒调色板中获得的颜色值（调色板可以在[此处](https://github.com/altercation/vim-colors-solarized)找到）。

```
highlight NonText ctermfg=0
highlight NonText guifg=#073642

highlight SpecialKey ctermfg=0
highlight SpecialKey guifg=#073642 
```

奇怪的是，当“SpecialKey”组正确显示“cterm”颜色值时，“nonText”组却没有。它似乎显示了“ctermbg”使用的值 8。因此，所有“非文本”字符都不再可见。两组都接受“guifg”值顺便说一句。

我是否遗漏了一些可能会干扰我的设置的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T14:48:32.963

我[在 solarized bugtracker 上](https://github.com/altercation/solarized/issues/53#issuecomment-992941)找到了解决方案。

此配置允许为某些元素和组分配颜色：

```
highlight CursorLineNr cterm=none ctermfg=0 guifg=#073642
highlight NonText cterm=none ctermfg=0 guifg=#073642
highlight SpecialKey cterm=none ctermfg=0 guifg=#073642 ctermbg=8 guibg=#002b36 
```

注意

> cterm=无

这解决了这个问题。

# algorithm - 点到区域的最小距离

> ID：15548905
> 
> 赞同：4
> 
> 时间：2013-03-21T13:26:49.730
> 
> 标签：algorithm, graphics, computational-geometry

我试图在一个封闭区域中找到一个点（P2），它与点（P1）的距离最小。该区域由同质像素构成，形状不完美，也不一定是凸的。这基本上是从最短路径到达某个区域的问题。

整个空间以位图的形式存储在内存中。找到 P2 的最佳方法是什么？我应该使用随机搜索（优化）方法吗？优化方法没有给出确切的最小值，但它们比强制该区域的每个像素更快。我需要在几秒钟内执行数千个这样的决定。

该区域的 MinX,MinY,MaxX,MaxY 可用。

![问题](../Images/709609be4bbc25a4de001946c9e89d49.png)

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:58:52.453

这是我的代码，它是使用离散坐标的离散版本：

提示：我用来求区域周长的方法很简单，就像你如何从陆地上知道海滩？答案：海滩从一侧被海覆盖，所以在我的图形矩阵中，NULL 参考是海，点是土地！

上课点：

```
class Point
{
    public int x;
    public int y;

    public Point (int X, int Y)
    {
        this.x = X;
        this.y = Y;
    }
} 
```

课区：

```
class Area
{
    public ArrayList<Point> points;

    public Area ()
    {
        p = new ArrayList<Point>();
    }
} 
```

离散距离实用程序类：

```
class DiscreteDistance
{

    public static int distance (Point a, Point b)
    {
        return Math.sqrt(Math.pow(b.x - a.x,2), Math.pow(b.y - a.y,2))
    }

    public static int distance (Point a, Area area)
    {
        ArrayList<Point> cir = circumference(area);
        int d = null;

        for (Point b : cir)
        {
            if (d == null || distance(a,b) < d)
            {
                d = distance(a,b);
            }
        }

        return d;
    }

    ArrayList<Point> circumference (Area area)
    {
        int minX = 0;
        int minY = 0;
        int maxX = 0;
        int maxY = 0;

        for (Point p : area.points)
        {
            if (p.x < minX) minX = p.x;
            if (p.x > maxX) maxX = p.x;
            if (p.y < minY) minY = p.y;
            if (p.y > maxY) maxY = p.y;
        }

        int w = maxX - minX +1;
        int h = maxY - minY +1;

        Point[][] graph = new Point[w][h];

        for (Point p : area.points)
        {
            graph[p.x - minX][p.y - minY] = p;
        }

        ArrayList<Point> cir = new ArrayList<Point>();

        for (int i=0; i<w; i++)
        {
            for (int j=0; j<h; j++)
            {
                if ((i > 0 && graph[i-1][j] == null)
                  || (i < (w-1) && graph[i+1][j] == null)
                  || (j > 0 && graph[i][j-1] == null)
                  || (i < (h-1) && graph[i][j+1] == null))
                {
                    cir.add(graph[i][j]);
                }
            }
        }

        return cir;
    }    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T14:38:13.600

我们必须假设您知道或可以轻松地在该区域内找到至少一个像素地址 (x0,y0)。最快的解决方案肯定是从该像素沿直线搜索，例如在加 x 方向上。或者，由于您有一个边界框，请选择指向最近边界的指南针点并朝该方向移动。

当你找到区域的边缘时，首先沿着边界搜索深度。 *对于具有自相交和/或孔的一般多边形，这必须是一个完整且精心实施的 DFS，维护一组已访问的顶点。* 只有当多边形很简单时，只记住最后访问的像素就足够了，以避免重复搜索已经搜索过的像素。

在 DFS 期间，计算每个边界像素的距离平方 p1 并跟踪最小值。

请注意，如果您真的迫切需要性能，这个距离平方可以增量更新，以用加法代替乘法。即，如果您知道`d2=(x2-x1)^2+(y2-y1)^2`然后递增`x2`1 以围绕边界进行下一步，则新的平方距离为

```
((x2+1) - x1)^2 + (y2-y1)^2 = d2 + 2(x2 - x1) + 1 
```

所以你可以`d2`用`d2 += 2(x2 - x1) + 1`. 乘以 2 当然只是左移，所以这很便宜。每个方向的步骤都有类似的非常便宜的更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:03:31.783

一种方法可能是通过首先计算该区域的三角剖分来设置近似解；之后，只需检查三角形的角。这种方法可能是有益的，特别是如果在您计划的许多评估中，外点发生变化但形状本身没有变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T08:18:19.987

您可以找到该区域矩形的中心，并使用两点之间的三角形来找到角度，然后使用函数 f(x) = mx + b 进行像素遍历，直到找到面积计算距离，然后旋转角度，直到找到最短路径。

# c++ - 使用 CImg 在 C++ 中进行光谱残余显着性检测

> ID：15548906
> 
> 赞同：0
> 
> 时间：2013-03-21T13:26:50.013
> 
> 标签：c++, cimg

我正在尝试实施用于显着性检测的光谱残差方法，如本文所述： [http ://www.klab.caltech.edu/~xhou/papers/cvpr07.pdf](http://www.klab.caltech.edu/~xhou/papers/cvpr07.pdf)

Matlab 代码中有一个参考实现，取自他们的网站： [http ://www.klab.caltech.edu/~xhou/projects/spectralResidual/spectralresidual.html](http://www.klab.caltech.edu/~xhou/projects/spectralResidual/spectralresidual.html)

```
clear
clc
%% Read image from file
inImg = im2double(rgb2gray(imread('yourImage.jpg')));
inImg = imresize(inImg, 64/size(inImg, 2));
%% Spectral Residual
myFFT = fft2(inImg);
myLogAmplitude = log(abs(myFFT));
myPhase = angle(myFFT);
mySpectralResidual = myLogAmplitude - imfilter(myLogAmplitude, fspecial('average', 3),'replicate');
saliencyMap = abs(ifft2(exp(mySpectralResidual + i*myPhase))).^2;
%% After Effect
saliencyMap = mat2gray(imfilter(saliencyMap, fspecial('gaussian', [10, 10], 2.5)));
imshow(saliencyMap); 
```

我试图用 CImg 将它翻译成 C++。我失败的地方在这里：

```
myPhase = angle(myFFT); 
```

和这里

```
saliencyMap = abs(ifft2(exp(mySpectralResidual + i*myPhase))).^2; 
```

这是我的代码：

```
#include <CImg.h>
#include <iostream>
using namespace cimg_library;

int main() {

  CImg<unsigned char> image("img2.jpg");

  CImg<float> mask(3,3,1,1,1.0/9.0);

  image.resize(64,64);

  CImgList<float> myFFT = image.get_FFT();

  const CImg<float> MyLogAmplitude = ((myFFT[0].get_pow(2) +  myFFT[1].get_pow(2)).get_sqrt()).get_log(); //Magnitude

  const CImg<float> MyPhase = myFFT[0].get_atan2(myFFT[1]);

  const CImg<float> A = MyLogAmplitude.get_convolve(mask);

  const CImg<float> MySpectralResidual = MyLogAmplitude-A;

  CImgList<float> tmp = CImgList<float>(MyResidual.get_exp(),MyPhase);

  CImgList<float> MySaliencyMap = tmp.get_FFT(true);

  CImgDisplay  draw_disp0(MySaliencyMap,"Image");

  while (!draw_disp0.is_closed()) {

    draw_disp0.wait();

  }
  return 0;
} 
```

有人看到明显的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T08:57:57.027

我想我可以在您的代码中看到两个错误：

*   首先，对 MyPhase 的 atan2() 调用具有倒置的参数。应该写成

    const CImg MyPhase = myFFT[1].get_atan2(myFFT[0]);

（但这在这里可能不是什么大问题）。

*   其次，更严重的是，您正在对编码为（幅度，相位）的一对复数值进行逆 FFT，这不是 CImg 所期望的，因为 FFT() 函数假设您输入一个（实数，虚数) 对图像。这可能会对结果产生巨大影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-25T15:54:28.207

其实我也有同样的问题。这是解决问题的代码。我编辑了一些以围绕对象显着创建一个矩形。这段代码对我有用。

```
#include "highgui.h"
#include "opencv2/imgproc/imgproc.hpp"
#include "cv.h"
#include <stdlib.h>
#include <stdio.h>
#include <string>
#include <iostream>

using namespace cv;
using namespace std;

// function Fourier transform 
void fft2(IplImage *src, IplImage *dst);

int main()
{

           string imagePath = "inputgambar/34.jpg";
              //string imageSave = "saliency/42.jpg";
    //string imageRectangular = "rectangular/42.jpg";

    IplImage *ImageAsli, *ImageSaliency, *src, *ImageRe, *ImageIm, *Fourier, *Inverse, *LogAmplitude, *Sine, *Cosine;
    IplImage *Saliency, *Residual;
    IplImage *tmp1, *tmp2, *tmp3;
    Mat gambarSave, threshold_output;
    vector<vector<Point> > contours;
    vector<Vec4i> hierarchy;
    double minNum = 0, maxNum = 0, scale, shift, rata2, nilaiThreshold, Lebar, gantiPixel;

    // load image Asli
    ImageAsli = cvLoadImage(imagePath.c_str());
    cvNamedWindow("ImageAsli", CV_WINDOW_NORMAL);
    cvShowImage("ImageAsli", ImageAsli);
    cvMoveWindow("ImageAsli",0,100);

    // Load image, jadikan single channel/gray
    //inputImage = cvLoadImage(imagePath.c_str());
    src = cvLoadImage(imagePath.c_str(),0);
    Lebar = src->width;
    gantiPixel = 64/Lebar; 

    // Fourier , punya 2 channel, Real dan Imajiner
    Fourier = cvCreateImage(cvGetSize(src), IPL_DEPTH_64F, 2);
    Inverse = cvCreateImage(cvGetSize(src), IPL_DEPTH_64F, 2);
    // Real , Imajiner spektrum
    ImageRe = cvCreateImage (cvGetSize (src), IPL_DEPTH_64F, 1);
    ImageIm = cvCreateImage (cvGetSize (src), IPL_DEPTH_64F, 1);
    // log amplitude 
    LogAmplitude = cvCreateImage (cvGetSize (src), IPL_DEPTH_64F, 1);
    // Sinus, Cosinus spektrum
    Sine = cvCreateImage (cvGetSize (src), IPL_DEPTH_64F, 1);
    Cosine = cvCreateImage(cvGetSize(src), IPL_DEPTH_64F, 1);

    // spectral residual
    Residual = cvCreateImage (cvGetSize (src), IPL_DEPTH_64F, 1);
    // Saliency
    Saliency = cvCreateImage (cvGetSize (src), src-> depth, src-> nChannels);

    // Temporary space
    tmp1 = cvCreateImage(cvGetSize(src), IPL_DEPTH_64F, 1);
    tmp2 = cvCreateImage(cvGetSize(src), IPL_DEPTH_64F, 1);
    tmp3 = cvCreateImage(cvGetSize(src), IPL_DEPTH_64F, 1);

    // 
    scale = 1.0/255.0;
    cvConvertScale (src, tmp1, 1, 0);

    //
    fft2 (tmp1, Fourier);

    // Real dan Imajiner ditaruh di ImageRe ImageIm
    cvSplit (Fourier, ImageRe, ImageIm, 0, 0);

    // Magnitude/Amplitudo Fourier di tmp3
    cvPow( ImageRe, tmp1, 2.0);
    cvPow( ImageIm, tmp2, 2.0);
    cvAdd( tmp1, tmp2, tmp3);
    cvPow( tmp3, tmp3, 0.5 );

    // logAmplitude , sin, cosin 
    cvLog (tmp3, LogAmplitude);
    cvDiv (ImageIm, tmp3, Sine);
    cvDiv (ImageRe, tmp3, Cosine);

    // smoothing (1/(3×3)) * ones(3), mean filter pada logAmplitude ditempatkan pada tmp3
    cvSmooth (LogAmplitude, tmp3, CV_BLUR, 3, 3);

    // Spectral Residual = LogAmp-tmp3
    cvSub (LogAmplitude, tmp3, Residual);

    /************************************************************************ /
   inverse Fourier Transform --> exp (Residual + i * Phase)

    Euler's formula:
    exp(r + i * T) = exp(r) * (cos(T) + i * sin(T)) = exp(r) * cos(T) + i * exp(r) * sin(T)

    Sin (T) = ImageIm / LogAmplitude;  cos(T) = ImageRe / LogAmplitude;
    /************************************************************************/
    cvExp(Residual, Residual);
    cvMul(Residual, Cosine, tmp1);
    cvMul(Residual, Sine, tmp2);

    // Merging Residual, Saliency 1 channel => Fourier 2 channel
    cvMerge (tmp1, tmp2, 0, 0, Fourier);

    // Inverse Fourier transform
    cvDFT (Fourier, Inverse, CV_DXT_INV_SCALE);

    cvSplit (Inverse, tmp1, tmp2, 0,0);

    // tmp3 = kuadrat akar tmp1 tmp2
    cvPow (tmp1, tmp1, 2);
    cvPow (tmp2, tmp2, 2);
    cvAdd (tmp1, tmp2, tmp3);

    // Gaussian filter 7x7 kernel
    cvSmooth (tmp3, tmp3, CV_GAUSSIAN, 7, 7);
    //CoreCVminmaxloc
    cvMinMaxLoc (tmp3, & minNum, & maxNum, NULL, NULL);

    scale = 255 / (maxNum - minNum);
    shift =-minNum * scale;

    // End of Saliency
    cvConvertScale(tmp3, Saliency, scale, shift);

    //deteksi proto objek
    CvScalar rataan = cvAvg(Saliency);
    nilaiThreshold = 3* (rataan .val[0]);
    //cout << nilaiThreshold ;
    gambarSave = Mat(Saliency);
    //imwrite(imageSave.c_str(), gambarSave);
    //resize(gambarSave, gambarSave, Size(), gantiPixel, gantiPixel, CV_INTER_AREA);
    //ImageSaliency = cvCreateImage(cvSize(Saliency-> width * gantiPixel, Saliency-> height *gantiPixel), Saliency -> depth, Saliency -> nChannels);
    //cvResize(Saliency, ImageSaliency, CV_INTER_AREA);
    cvNamedWindow("Saliency", CV_WINDOW_NORMAL);
    cvShowImage("Saliency", Saliency);
    cvMoveWindow("Saliency",0,500);

  /// Detect edges using Threshold
  threshold( gambarSave, threshold_output, nilaiThreshold, 255, THRESH_BINARY );
  /// Find contours
  findContours( threshold_output, contours, hierarchy, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE, Point(0, 0) );

  /// Find the rotated rectangles 
  vector<RotatedRect> minRect( contours.size() );

  for( int i = 0; i < contours.size(); i++ )
    { minRect[i] = minAreaRect( Mat(contours[i]) );
    }
  /// Draw rotated rects 
  for( int i = 0; i< contours.size(); i++ )
     {
       // rotated rectangle
       Point2f rect_points[4]; minRect[i].points( rect_points );
       for( int j = 0; j < 4; j++ )
          line( gambarSave, rect_points[j], rect_points[(j+1)%4], Scalar(100), 2, 8 );
     }

  //imwrite(imageRectangular.c_str(), gambarSave);
  /// Show in a window
  namedWindow( "Rectangular", CV_WINDOW_AUTOSIZE );
  imshow( "Rectangular", gambarSave );
  cvMoveWindow("Rectangular",480,100);

    cvWaitKey(0);

    //Release images
    cvReleaseImage(&src);
    cvReleaseImage(&ImageIm);
    cvReleaseImage(&ImageRe);
    cvReleaseImage(&Fourier);
    cvReleaseImage(&Inverse);
    cvReleaseImage(&LogAmplitude);
    cvReleaseImage(&Sine);
    cvReleaseImage(&Cosine);
    cvReleaseImage(&Saliency);
    cvReleaseImage(&Residual);
    cvReleaseImage(&tmp1);
    cvReleaseImage(&tmp2);
    cvReleaseImage(&tmp3);
    cvReleaseImage(&ImageAsli);

    cvDestroyAllWindows();

    return 0;
}

//Fourier transform
void fft2(IplImage *src, IplImage *dst)
{   
    IplImage *image_Re = 0, *image_Im = 0, *Fourier = 0;

    //1 channel ImageRe, ImageIm
    image_Re = cvCreateImage(cvGetSize(src), IPL_DEPTH_64F, 1);  
    image_Im = cvCreateImage(cvGetSize(src), IPL_DEPTH_64F, 1);  

    //2 channels (image_Re, image_Im)
    Fourier = cvCreateImage(cvGetSize(src), IPL_DEPTH_64F, 2);

    /************************************************* ***********************/
    // isi nilai image_Re 
    cvConvertScale(src, image_Re, 1, 0);
    // nilai initial Imajiner di Set 0
    cvZero(image_Im);
    // Join real and imaginary parts and stock them in Fourier image
    cvMerge(image_Re, image_Im, 0, 0, Fourier);
    // forward Fourier transform
    cvDFT(Fourier, dst, CV_DXT_FORWARD);
    cvReleaseImage(&image_Re);
    cvReleaseImage(&image_Im);
    cvReleaseImage(&Fourier);
} 
```

![这是程序输出](../Images/259588e43da18ca60925a12f5de03649.png) [http://i60.tinypic.com/5xvmhi.png](http://i60.tinypic.com/5xvmhi.png)

# c# - 模型在 MVC4 中绑定接口

> ID：15548907
> 
> 赞同：1
> 
> 时间：2013-03-21T13:26:50.797
> 
> 标签：c#, asp.net-mvc, model-binding

我已经看过这篇关于如何创建模型绑定器提供程序来支持接口的博客文章。

[http://www.matthidinger.com/archive/2011/08/16/An-inheritance-aware-ModelBinderProvider-in-MVC-3.aspx](http://www.matthidinger.com/archive/2011/08/16/An-inheritance-aware-ModelBinderProvider-in-MVC-3.aspx)

但是我不知道如何处理实际的模型活页夹。

我知道我可以继承，`DefaultModelBinder`但是我如何在自定义模型绑定器中计算出相关的具体类，你在 CreateModel 函数中这样做吗？如果是这样，你怎么做？

我的界面和一些类的示例结构：

```
public interface IAnswerControlViewModel : IQuestionAnswerControl
{
...
}

public class AnswerControl<T> : IAnswerControlViewModel
{
..
}

public class AnswerCheckBox : AnswerControl<bool>
{

}

public class AnswerMultiLineText : AnswerControl<string>
{
    [DataType(DataType.MultilineText)]
    public override string Value { get; set; }
}

public class AnswerCheckBoxListModal: AnswerControl<AnswerMultiSelectListValueType>
{
    public string ModalName { get; set; }
} 
```

这是我使用博客文章中的示例在 Global.asax 中获得的模型绑定：

```
ModelBinders.Binders.Add(typeof(IAnswerControlViewModel), new AnswerControlModelBinder());

var answerControlBinderProvider = new InheritanceAwareModelBinderProvider
{
    { typeof (IAnswerControlViewModel), new AnswerControlModelBinder() }
};
ModelBinderProviders.BinderProviders.Add(answerControlBinderProvider); 
```

目标是让 MVC 知道如何在发布到操作的过程中对此进行建模：

```
public IList<IAnswerControlViewModel> AnswerControls { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:07:03.590

如果我解决了您的问题，您的解决方案可能是使用像 Ninject 这样的依赖注入/控制反转框架[，](http://www.palmmedia.de/Blog/2011/8/30/ioc-container-benchmark-performance-comparison)[但](http://www.ninject.org/)还有[很多](http://unity.codeplex.com/) [其他](http://code.google.com/p/autofac/) [的](http://caliburnmicro.codeplex.com/) 。根据框架，您可以配置从接口到具体类的映射。

然后您所要做的就是使用以下命令解析具体类：

```
var concrete = IoCContainer.Resolve<IAnswerControlViewModel>(); 
```

或者如果类型存储在变量中：

```
var concrete = IoCContainer.Resolve(ModelBindingContext.ModelType); 
```

一切都会自动运行。

# php - 日期过滤在 mysql、php 中不起作用

> ID：15548910
> 
> 赞同：1
> 
> 时间：2013-03-21T13:26:54.843
> 
> 标签：php, mysql, sql, date

我有一个网站，我想在其中显示过去 24 小时发布的文章。我认为这很容易，但我无法理解我做错了什么。

让我们从头开始，在 mysql 中我有这张表：

```
id | editor | article | date
-----------------------------
128|   8    |  ....   | 2013-03-20 01:01:26
129|   8    |  ....   | 2013-03-20 01:03:24 
```

日期字段是 TIMESTAMP。

现在在php中我有这个代码：

```
$date = date('Y-m-d H:i:s', strtotime('-1 day')); //24 hours ago
$articles = mysql_query("SELECT * FROM articles WHERE editor=8 AND 'date' > '".$date."' ORDER BY id DESC"); 
```

如果我现在运行此代码，因为我的本地时间戳是“2013-03-21 15:20:07”（比文章时间戳多 24 小时）我仍然会收到文章，尽管我不应该因为 2013-03-20 01:01:26（第 128 条时间戳）< 2013-03-20 15:20:07（现在 - 1 天）。我还通过 phpmyadmin 运行代码，结果相同。

我看不出我做错了什么，我尝试尝试使用我的数据库中具有日期字段的其他表，但我仍然无法让它工作。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T13:28:34.753

它不起作用的原因是因为您用单引号将列名括起来。它的效果是将列名更改为字符串，因此您将日期与字符串文字*date*进行比较。删除它周围的单引号，它将起作用。

```
$articles = mysql_query("SELECT * FROM articles WHERE editor=8 AND date > '".$date."' ORDER BY id DESC"); 
```

请记住，`single quotes`as`double quotes`用于字符串文字，而`backtick`s 用于标识符。

作为旁注，[`SQL Injection`](http://bobby-tables.com/)如果变量的值（*s*）来自外部，则查询很容易受到攻击。请看下面的文章，了解如何预防。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

*   [如何*防止*PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T10:49:12.057

我知道问题已经回答并解决了，但我只想说下一句话：

你为什么不让 mysql 做数学，它更短更容易阅读:)？

```
SELECT * FROM articles WHERE editor=8 AND 'date' > DATE_ADD(NOW(), INTERVAL -1 DAY) ORDER BY id DESC ; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-21T13:36:01.147

最好的解决方案是将数据库中的时间存储转换为秒，然后使用您的查询

例如：日期（'H：i：s'）；

转换为秒 => 变量=(3600* date('H') + 60*date('i') + date('s'));

现在用几秒钟做任何事情

# python - Python中XML文件的值比较

> ID：15548916
> 
> 赞同：1
> 
> 时间：2013-03-21T13:27:05.620
> 
> 标签：python, list, python-2.7, xml-parsing, uml

我的 UML 图是这样的：

```
rootNode
   |
Book (attribute:name)
   |
Table (attribute: Name)
   |
TableEntry(attribute: Field, Value) 
```

当我使用此代码时：

```
for Book in rootNode.getBooks():
    print Book.getName()
    for Table in Book.getTables():
        print Table.getName()
        for TableEntry in Table.getTableEntrys():
            print TableEntry.getField(), TableEntry.getValue() 
```

输出如下：

```
Document
T1
F1  V1
F2  V2
F3  V3
F4  V4
F5  V5
F6  V6
T2
F1 V1
F2 V2
F3  V3
F4  V4
F5  V5
F6  V6
Document
T2
F2 V2
F3  V3
F4  V4
F5  V5
F6  V6 
```

我想为每个字段和值比较文档（第一）中的字段和值 ex-F1 和值 V1 与文档（第二）中的 F1 V1。我的两个文件都有相同的书名，即“文档”。我还想在两个文件中找到丢失的字段或附加字段，例如在 T2 中我的 F1 和 V1 丢失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:50:23.637

最好的解决方案是“==”来比较值

```
 and 
```

如果要与实体进行比较，请使用 ' is '

例如 =>

a=123；b=123；

> > > > a 是 b

输出：

真的

# android - 如何从图像的缩略图路径中获取图像路径？

> ID：15548922
> 
> 赞同：3
> 
> 时间：2013-03-21T13:27:22.733
> 
> 标签：android

我正在尝试基于缩略图路径获取图像路径，我已经尝试了来自 [android-getting-path-to-image-from-thumbnail 的](https://stackoverflow.com/questions/9279553/android-getting-path-to-image-from-thumbnail)解决方案，但它基于 gridview 位置，我只是检索特定图像。我还从 SO 中找到了一个示例代码，代码是

```
private String getImagePathFromThumbPath(String thumbPath)
    {
        String imgPath=null;

//      String[] projection = new String[] {MediaStore.Images.Thumbnails._ID, MediaStore.Images.Thumbnails.IMAGE_ID};
        String[] imagesDataPath={ MediaStore.Images.Media.DATA ,MediaStore.Images.Media._ID};
            //mResolver.query() requires android API 16
        Cursor thumbnails = mResolver.query(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, imagesDataPath,MediaStore.Images.Thumbnails.DATA+"=?",new String[]{thumbPath}, null, null);

        String[] filePathColumn = {MediaStore.Images.Media.DATA};

        Cursor imageCursor = mResolver.query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, filePathColumn, MediaStore.Images.Media._ID + "=?", new String[] {thumbId}, null);

        if (imageCursor != null && imageCursor.moveToFirst()) {
            // Your file-path will be here
            imgPath= imageCursor.getString(imageCursor.getColumnIndex(filePathColumn[0]));
        }
        return imgPath;
    } 
```

上面的方法稍作修改以适应我的需要，它在 Toasting 时没有返回任何内容，请告诉如何使用缩略图路径检索图像路径？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T17:06:51.417

经过长时间和不懈的尝试，解决方案就在这里

**1.**你需要从缩略图表中的images表中找到图像唯一id，如果你不明白，请查询缩略图提供者（ [MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI ），参考](http://developer.android.com/reference/android/provider/MediaStore.Images.Thumbnails.html#EXTERNAL_CONTENT_URI)[这里](http://developer.android.com/reference/android/provider/MediaStore.Images.Thumbnails.html)，特别是[IMAGE_ID](http://developer.android.com/reference/android/provider/MediaStore.Images.Thumbnails.html#IMAGE_ID)，

**第 1 步**是获取`retrievedImageId`.

```
retrievedImageId = Long.parseLong(cursor.getString(imageIdInImages)); 
```

**2.**现在使用`retrievedImageId`获取图像路径，通过再次查询内容提供者，仅这次查询图像媒体提供者（[MediaStore.Images.Media.EXTERNAL_CONTENT_URI](http://developer.android.com/reference/android/provider/MediaStore.Images.Media.html#EXTERNAL_CONTENT_URI)）

```
String getImagePathFromThumbPath(String thumbPath)
    {
        String imagePath = null;

        if(thumbPath != null )
        {
            String[] columns_to_return = {MediaStore.Images.Thumbnails.IMAGE_ID};
            String where = MediaStore.Images.Thumbnails.DATA+" LIKE ?";
            long retrievedImageId = -1;
            String valuesAre[] = {"%"+thumbPath};
            Cursor cursor = getContentResolver().query(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, columns_to_return, where, valuesAre, null);
            if(cursor != null)
            {           
                int imageIdInImages = cursor.getColumnIndex(MediaStore.Images.Thumbnails.IMAGE_ID);

                for (cursor.moveToFirst();!cursor.isAfterLast(); cursor.moveToNext()) 
                {
                       //STEP 1 to retrieve image ID
                   retrievedImageId = Long.parseLong(cursor.getString(imageIdInImages));
                }

                if(retrievedImageId != -1)
                {
                    // STEP 2 Now
                    Log.i(TAG, "imageId-" + retrievedImageId);
                    String[] columnsReturn = {MediaStore.Images.Media.DATA};
                    String whereimageId = MediaStore.Images.Media._ID+" LIKE ?";
                    String valuesIs[] = {"%" + retrievedImageId};
                    Cursor mCursor = getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columnsReturn, whereimageId, valuesIs, null);
                    int rawDataPath= mCursor.getColumnIndex(MediaStore.Images.Media.DATA);
                    for (mCursor.moveToFirst();!mCursor.isAfterLast(); mCursor.moveToNext()) 
                    {
                        imagePath = mCursor.getString(rawDataPath);
                    }
                }
            }
        }   

        return imagePath;
    } 
```

如果您仍有疑问或错误/异常，请发表评论！

# c# - c# 获取客户端用户名

> ID：15548924
> 
> 赞同：0
> 
> 时间：2013-03-21T13:27:26.513
> 
> 标签：c#, asp.net, login

我正在尝试获取我的客户端登录用户名，但我仍然得到服务器信息。这是我的尝试：

```
Environment.UserName;
System.Security.Principal.WindowsIdentity.GetCurrent().User;
System.Security.Principal.WindowsIdentity.GetCurrent().Name;
System.Net.Dns.GetHostName();
Request.ServerVariables["REMOTE_ADDR"];
Request.UserHostAddress; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:46:12.143

通常我使用 User.Identity.Name，它返回访问应用程序的用户输入的登录名。

例如`var loginName = User.Identity.Name;`

# php - Joomla!2.5 ACL 不显示选项

> ID：15548933
> 
> 赞同：0
> 
> 时间：2013-03-21T13:27:51.903
> 
> 标签：php, joomla2.5, access-control

谈到 Joomla，我是个业余爱好者，因为我上周才开始使用这个框架进行开发。截至目前，我正在阅读官方的 Joomla 教程，可以在他们的官方 Wiki 中找到。但是要么我做错了什么，要么我忘记了一些东西，或者说教程中没有提到。

我经历的最后一步是开发访问控制列表；但是，维护按钮未显示。

这是我到目前为止的代码：

管理员/视图/helloworld/view.html.php

```
class HelloWorldViewHelloWorld extends JView {
protected $form;
protected $item;
protected $script;
protected $canDo;

public function display($tpl = NULL){
    $this->form = $this->get('Form');
    $this->item = $this->get('Item');
    $this->script = $this->get('Script');
    $this->canDo = HelloWorldHelper::getActions($this->item->id);   
    if(count($errors = $this->get('Errors'))){
        JError::raiseError(500, implode('<br />', $errors));
        return false;
    }
    $this->addToolBar();
    parent::display($tpl);
    $this->setDocument();
}

protected function addToolBar(){
    $input = JFactory::getApplication()->input;
    $input->set('hidemainmenu', true);
    $isNew = ($this->item->id == 0);
    JToolBarHelper::title($isNew ? JText::_('COM_HELLOWORLD_MANAGER_HELLOWORLD_NEW') : JText::_('COM_HELLOWORLD_MANAGER_HELLOWORLD_EDIT'), 'helloworld');
    if($isNew){
        if($this->canDo->get('core.create')){
            JToolBarHelper::apply('helloworld.apply', 'JTOOLBAR_APPLY');
            JToolBarHelper::save('helloworld.save', 'JTOOLBAR_SAVE');
            JToolBarHelper::custom('helloworld.save2copy', 'save-new.png', 'save-new_f2.png', 'JTOOLBAR_SAVE_AS_COPY', false);
        }
        JToolBarHelper::cancel('helloworld.cancel', 'JTOOLBAR_CANCEL');
    } else {
        if($this->canDo->get('core.edit')){
            JToolBarHelper::apply('helloworld.apply', 'JTOOLBAR_APPLY');
            JToolBarHelper::save('helloworld.save', 'JTOOLBAR_SAVE');
            if($this->canDo->get('core.create')){
                JToolBarHelper::custom('helloworld.save2copy', 'save-new.png', 'save-new_f2.png', 'JTOOLBAR_SAVE_AND_NEW', false);
            }
        }
        if($this->canDo->get('core.create')){
            JToolBarHelper::custom('helloworld.save2copy', 'save-new.png', 'save-new_f2.png', 'JTOOLBAR_SAVE_AS_COPY', false);
        }
        JToolBarHelper::cancel('helloworld.cancel', 'JTOOLBAR_CLOSE');
    }
}
protected function setDocument(){
    $isNew = ($this->item->id < 1);
    $document = JFactory::getDocument();
    $document->setTitle($isNew ? JText::_('COM_HELLOWORLD_HELLOWORLD_CREATING') : JText::_('COM_HELLOWORLD_HELLOWORLD_EDITING'));
    $document->addScript(JURI::root() . $this->script);
    $document->addScript(JURI::root() . "/administrator/components/com_helloworld/views/helloworld/submitbutton.js");
    JText::script('COM_HELLOWORLD_HELLOWORLD_ERROR_UNACCEPTABLE');
}
} 
```

admin/helpers/helloworld.php（部分）

```
abstract class HelloWorldHelper {
[...]
public static function getActions($messageId = 0){
    jimport('joomla.access.access');
    $user = JFactory::getUser();
    $result = new JObject;
    if(empty($messageId)){
        $assetName = 'com_helloworld';
    } else {
        $assetName = 'com_helloworld.message.' . (int) $messageId;
    }
    $actions = JAccess::getActions('com_helloworld', 'component');
    foreach($actions as $action){
        $result->set($action->name, $user->authorise($action->name, $assetName));
    }
    return $result;
}
} 
```

我试图调试这个使用`var_dump($this->canDo)`，但我没有得到任何回应。我可能错过了什么？

* * *

**更新：** 在 views/HelloWorlds/view.html.php 中返回`var_dump`：`$this->canDo`

```
object(JObject)#43 (1) { ["_errors":protected]=> array(0) { } } 
```

这是在views/HelloWorlds/view.html.php中对上述函数的调用：

```
function display($tpl = NULL){
    $this->items = $this->get('Items');
    $this->pagination = $this->get('Pagination');
    $this->canDo = HelloWorldHelper::getActions();
    if(count($errors = $this->get('Errors'))){
        JError::raiseError(500, implode('<br />', $errors));
        return false;
    }
    $this->addToolBar($this->pagination->total);
    parent::display($tpl);
    $this->setDocument();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:59:51.943

问题解决了，这是一件愚蠢的事情，我为自己感到羞耻，我没有意识到这一点。只是`admin/access.xml`没有在中描述`helloworld.xml`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:50:38.833

据我了解，您遵循[本教程](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_ACL)。您能否再检查一次您的代码和创建的文件？因为我 100% 确定本教程的步骤是正确的（我自己做了很多次）。您缺少某些东西或在某处犯了一个小错误。

# android - 在 Android 中创建目录

> ID：15548934
> 
> 赞同：-6
> 
> 时间：2013-03-21T13:27:53.440
> 
> 标签：android

这是将资产复制到 SD 卡的[代码](http://www.codeofaninja.com/2013/01/copy-files-from-assets-folder-to-sd.html)：

但是，它只是将文件复制到根目录。如果我将代码更改为此，则文件将被复制到 mydirectory，但条件是必须先手动创建“mydirectory”：

```
Environment.getExternalStorageDirectory() + "/mydirectory/"
                                    + files[i]); 
```

我的问题是我应该如何修改代码以便可以创建一个新目录？我发现[了这个](https://stackoverflow.com/questions/2130932/how-to-create-directory-automatically-on-sd-card)并遇到了创建文件对象并使用`mkdirs()`

但是我真的不知道该怎么做，因为我是 android 开发的新手并且没有编程方面的先验知识。

如果有人可以逐步指导我如何实现这一点，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:29:47.227

您必须在开始添加文件之前创建目录（显然）。

在您尝试复制所谓的“资产”的文件中使用它。见评论：

```
String filename = Environment.getExternalStorageDirectory() + "/mydirectory/"); // this sets the filename of the new dir
File newDir = new File (filename); // this creates the File object (no directory yet)
if (!newDir.exists ())  // here we check whether the dir is already there
    newDir.mkdirs ()   // if not, then create all necessary directories and subdirectories to our new dir 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:33:59.037

它可能会帮助你..

```
boolean success = (new File("/sdcard/dirname")).mkdir(); 
if (!success)
{
    Log.w("directory not created", "directory not created");
} 
```

# javascript - 替换字符串中的onclick

> ID：15548935
> 
> 赞同：0
> 
> 时间：2013-03-21T13:27:55.377
> 
> 标签：javascript, jquery, string, replace

我有一个包含多个图像的文本区域。所有图像都有一个 id，我想遍历所有这些图像并检查是否需要 onclick 事件（取决于 id）如果不需要 onclick 事件，我需要检查是否有一个并将其删除。如果需要II仍然需要删除它并添加另一个（因为onclick的值可以更改）

我怎样才能做到这一点？

```
<img id="slideShowImage_3" style="border: 1px solid black; cursor: pointer;" title="3" onclick="loadSlideShow('7','open','3','','2')" src="uploads/nieuws/7/1363788115.jpg" alt="3" />
<img id="slideShowImage_3" style="border: 1px solid black; cursor: pointer;" title="3" src="uploads/nieuws/7/1363788115.jpg" alt="3" /> 
```

[http://jsfiddle.net/wmrqk/4/](http://jsfiddle.net/wmrqk/4/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:35:08.067

对于一个非常简单的 HTML，比如你在这里的 HTML，你可以这样做：

```
$('#text2').html($('#text1').html().replace(/onclick="[^"]*"/g,'')); 
```

但要非常小心：在一般情况下，在正则表达式中解析 HTML 会失败，因此只有在知道 HTML 来自哪里以及它是什么样子的情况下才能这样做。

如果您的 HTML 格式正确，您也可以这样做：

```
var e = $('<div>'+$('#text1').val()+'</div>');
e.find('img').attr('onclick','');
$('#text2').html(e.html()); 
```

[示范](http://jsfiddle.net/xwJr2/)

无论如何，请注意这不能用作安全措施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:36:26.640

可能不酷，但你可以做类似的事情

```
function cleanCode() {
    var els = $($('#text1').val());
    els.each(function(i, v){
        var $this = $(this);
        if($this.attr('id') == 'slideShowImage_1'){
            $this.removeAttr('onclick')
        }
    });
    console.log($('<div></div>').append(els).html())
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/bwBcL/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:48:37.517

试试这个：

```
function cleanCode() {
    var container = $('<div>' + $('#text1').val() + '</div>');
    container.find('img').removeAttr('onclick');
    $('#text2').html(container.html());
} 
```

[演示](http://jsfiddle.net/cEHbb/)

# java - 无法获取 ITranslationUnit 以在 Eclipse 插件中创建 C 文件的 AST

> ID：15548938
> 
> 赞同：0
> 
> 时间：2013-03-21T13:28:08.520
> 
> 标签：java, eclipse, plugins, eclipse-cdt, abstract-syntax-tree

我正在尝试借助 CDT Eclipse 框架从我工作区中生成的项目的 C 文件中生成 AST。但是每次我尝试通过 TranslationUnit

```
ICElement ice = CoreModel.getDefault().create(file);
ITranslationUnit tu= (ITranslationUnit) ice; 
```

ice 和 tu 为空，我收到以下错误

```
java.lang.NullPointerException
at org.eclipse.cdt.internal.core.pdom.TeamPDOMImportOperation.expandLocation(TeamPDOMImportOperation.java:135)
at org.eclipse.cdt.internal.core.pdom.TeamPDOMImportOperation.getImportLocation(TeamPDOMImportOperation.java:126)
at org.eclipse.cdt.internal.core.pdom.TeamPDOMImportOperation.run(TeamPDOMImportOperation.java:92)
at org.eclipse.cdt.internal.core.pdom.PDOMManager.createIndexer(PDOMManager.java:600)
at org.eclipse.cdt.internal.core.pdom.PDOMSetupJob.run(PDOMSetupJob.java:58)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

我有一个实现 IApplication 扩展的 Eclipse 插件。在运行方法中，我有以下代码。

```
 IProgressMonitor progressMonitor = new NullProgressMonitor();
    IWorkspaceRoot root = ResourcesPlugin.getWorkspace().getRoot();
    IProject project = root.getProject("NewProject");
    try {
        if(project.exists()){
            if(project.isOpen())
                project.close(null);
            project.delete(false, false, progressMonitor);
            project.create(progressMonitor);
            project.open(progressMonitor);
        }
        else{
            project.create(progressMonitor);
            project.open(progressMonitor);
        }           

        if(!project.isNatureEnabled(org.eclipse.cdt.core.CProjectNature.C_NATURE_ID)){
            CProjectNature.addCNature(project, null);
        }

        project.close(null);
        project.open(null);

    } catch (CoreException e1) {
        e1.printStackTrace();
    }

    IFile file = project.getFile("stub.c");           
    try {
        IPath workspacerawlocation = ResourcesPlugin.getWorkspace().getRoot().getRawLocation();
        FileInputStream fileStream = new FileInputStream(workspacerawlocation.append("stub.h").toString());
        if(!file.exists())
            file.create(fileStream, false, null);

        ICElement ice = CoreModel.getDefault().create(file);
        if(ice == null)
            System.out.println("ice is null");
        ITranslationUnit tu= (ITranslationUnit) ice;
        if(tu == null){
            System.out.println("tu is null");
        }
        else{
            IASTTranslationUnit ast =  tu.getAST();
        }

    } catch (CoreException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }       
} 
```

任何人都可以帮忙吗？我错过了一些插件依赖或初始化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:13:44.167

跟进我的评论：为了进行一些代码操作，您必须让 CDT 索引器按照 C 模型/AST 的要求工作。我建议创建 C 项目配置的两种可能方法：

1][在此处](http://wiki.eclipse.org/CDT/Developer/FAQ#How_can_I_programmatically_create_a_new_CDT_project.3F)查找创建 CDT 项目的**org.eclipse.cdt.core.tests**中的测试列表。这些项目包含非常简单的 .cproject 配置，但可能需要对您的需求进行一些更改。

2]从某个工作的C项目中保存一个.cproject，在创建项目时，只需将其复制到。您可能需要以某种方式刷新项目或关闭/重新打开它，以便 CDT 重新加载配置。

# excel - 通过 VBA 在弹出警报窗口上按 OK

> ID：15548939
> 
> 赞同：0
> 
> 时间：2013-03-21T13:28:12.393
> 
> 标签：excel, vba, automation

遇到问题，我编写了一个每 2 分钟刷新一次的宏，用于从网页上传数据，我的宏的最后一步是使用“文本到列”功能，以便很好地将其拆分为列。

每次执行此“文本到列”时，问题都会出现在这里，它会询问我是否要覆盖列（并且我愿意），但我需要手动按下确定。

有没有办法让 VBA 在警报中按下这个 OK 按钮？

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:33:58.933

只需`Application.DisplayAlerts = False`在调用之前添加，然后将其设置回`True`之后。

[http://msdn.microsoft.com/en-us/library/office/aa175241%28v=office.11​​%29.aspx](http://msdn.microsoft.com/en-us/library/office/aa175241%28v=office.11%29.aspx)

* * *

更新：我刚刚进行了测试，默认情况下它不会提示我。你可以发布你正在使用的代码吗？我只是做了：

```
Public Sub Test()
    Dim r As Range
    Set r = ActiveWorkbook.Sheets(1).Columns("A:A")
    r.TextToColumns Destination:=Range("B1")
End Sub 
```

[此链接](http://www.excelforum.com/excel-programming-vba-macros/592379-eliminate-text-to-columns-prompt.html)表示该`DisplayAlerts`解决方案已对其他人有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:32:57.223

您可以`DoCmd.SendKeys`在生成对话框的指令之前添加一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-30T13:46:17.910

您应该在最大化窗口之前使用鼠标单击功能，以便确定按钮的 x、y 坐标保持不变使用 windows lib 32

# android - 调用startActivity()后不调用父Activity的onDestroy()？

> ID：15548942
> 
> 赞同：4
> 
> 时间：2013-03-21T13:28:21.880
> 
> 标签：android, android-intent, android-activity

我有一个 Activity，里面有很多碎片交易，有时我的用户需要打开首选项 Activity 几秒钟。我这样做：

```
Intent preferencesIntent = new Intent(this, PreferencesView.class);     
this.startActivity(preferencesIntent); 
```

每次我这样做时，我的主要活动的 onDestroy() 都会被调用。因此，当我的用户回来时，主要活动处于初始阶段。但我希望主要活动在他们离开时像这样。

我知道我应该保存/恢复我的数据，让 Activity 重新创建自己。但这会非常复杂，而且我的用户大部分时间都在我的主要活动中。

那么有没有办法告诉Android不要在我的主要活动不可见时杀死它？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T13:33:58.373

你已经写了答案：保存/恢复状态。这就是安卓的工作原理。

您的活动可以被破坏配置更改或其他东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:33:14.083

您无法阻止 Android 停止 Activity。我看到的唯一方法是将首选项加载到主 Activity 的片段中。

# multithreading - 功能完成后杀死 node.js 工作人员

> ID：15548943
> 
> 赞同：7
> 
> 时间：2013-03-21T13:28:23.290
> 
> 标签：multithreading, node.js, multiprocessing

我是一个刚刚开始修改它的 node.js 新手。我有一段代码执行一个处理所有 cpu 内核上的字符串的函数，我希望确定哪个工作人员首先通过它的 id 完成了该函数，然后杀死每个工作人员（或只是退出节点）。

这是我的程序的简化代码：

```
var cluster = require('cluster'),
    cpus = require("os").cpus().length, // 4 cores
    myArray = ["foo","bar","baz","qux"]; // 1 string per core

if (cluster.isMaster) {
    for (var i = 0; i < cpus; i++) {
        var worker = cluster.fork();
    }
    cluster.on('exit', function(worker, code, signal) {
        console.log('worker ' + worker.process.pid + ' died');
    });
} else if (cluster.isWorker) {
    computeString(myArray[cluster.worker.id]);
}

function computeString() {
    // Code to compute...
} 
```

此代码有效，并且 computeString() 函数完成比在外部执行它快得多

```
else if (cluster.isWorker) {} 
```

所以问题是，在一个工作人员/进程完成该功能后，节点会等待，直到每个进程都完成了他们的工作，并且在这些工作之后也不会终止，每个进程都保持空闲状态，直到我按下 ctrl+c。

我的方法是：

```
function computeString() {
    // Code to compute...
    if (done) {
         console.log("Worker #" + cluster.worker + " completed the task!");
         for (var id in cluster.workers) {
            cluster.workers[id].kill();
         }
     }
} 
```

但是既然我在这里问，它显然不起作用:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T14:11:40.737

所以你想在第一个工人完成工作后杀死所有工人？

```
...
cluster.on('exit', function(worker, code, signal) {
  console.log('worker ' + worker.process.pid + ' died');
  // kill the other workers.
  for (var id in cluster.workers) {
    cluster.workers[id].kill();
  }
  // exit the master process
  process.exit(0);
});
...
function computeString() {
  // Code to compute...
  if (done) {
    process.exit(0); // exit the worker process cleanly, triggering the 'exit' event
  }
}; 
```

# html - Flash 和“206 部分内容”http 状态码

> ID：15548945
> 
> 赞同：3
> 
> 时间：2013-03-21T13:28:30.997
> 
> 标签：html, flash, h.264, jwplayer

我使用 JWPlayer 从服务器播放视频。视频使用 h.264 编解码器进行编码。如果我在支持 h.264 的浏览器中打开它们 - 视频播放效果很好，我可以寻找它，因为服务器返回 206 标头浏览器理解它的部分内容。但是，如果我尝试在 Opera 上播放相同的视频，例如，正在使用 flash 播放器，它会收到 200 OK！这里有2个问题：

1.  *我无法搜索视频，直到下载了部分视频*
2.  *如果视频没有“正确”编码，播放器甚至无法开始播放，直到文件完全下载。*

flash 正确询问/理解 http 标头有什么问题吗？（我以前从未使用过 flash，所以也许我的问题有点愚蠢，我只是不知道 flash 的局限性）..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:00:43.077

1）您需要为 Flash 启用伪流 - [http://www.longtailvideo.com/support/jw-player/28855/pseudo-streaming-in-flash](http://www.longtailvideo.com/support/jw-player/28855/pseudo-streaming-in-flash)，如果您可以提供链接，我会采取看看这里到底发生了什么，我或多或少在猜测这个。不过，HTML5 不需要在服务器端安装伪流模块。在 Flash 中，默认是渐进式下载，所以只能寻找下载的部分，而在 html5 中，则不是这样。

2）是的，那是因为编码。如果您的 MP4 文件在完全下载之前无法搜索，则必须修复位于视频末尾的 MOOV atom（它包含搜索信息）。使用这个小应用程序来解析您的视频并添加必要的提示点 - [http://renaun.com/blog/2010/06/qtindexswapper-2/](http://renaun.com/blog/2010/06/qtindexswapper-2/)

此外，通过 HandBrake - [http://handbrake.fr/](http://handbrake.fr/)进行编码也可以解决此问题，因此不需要上述工具。您可以使用 HandBrake 进行编码，并启用“网络优化”，这与索引交换工具相同。HandBrake 也有命令行编码选项。

# svn - svnX - 添加带有@字符的文件名

> ID：15548947
> 
> 赞同：0
> 
> 时间：2013-03-21T13:28:35.217
> 
> 标签：svn

我发现使用 svnX 时无法添加名称中包含 @ 字符的文件。我该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:30:52.113

我使用的是 0.9.13 版本。[https://code.google.com/p/svnx/downloads/list](https://code.google.com/p/svnx/downloads/list)的最新版本没有这个问题。

# php - ${$} 构造是什么意思？

> ID：15548950
> 
> 赞同：-1
> 
> 时间：2013-03-21T13:28:48.543
> 
> 标签：php

我是 PHP 新手，所以如果这个问题是菜鸟，我很抱歉。我不知道它的名字所以找不到它。我在这段代码中读到了它。这是什么意思？

第 5 行：`${$key}`

```
<?php
    $expected = array( 'carModel', 'year', 'bodyStyle' );

    foreach( $expected AS $key ) {
        if ( !empty( $_POST[ $key ] ) ) {
            ${$key} = $_POST[ $key ];
        } else {
            ${$key} = NULL;
        }
    } 
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:30:25.600

这与`$$key`并且表示一个名为的 var`$key`

IE

```
$test = "foo"; 
```

是相同的

```
$a = "test";
$$a = "foo"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:30:08.760

它是一个变量变量。请在此处阅读更多信息：http: [//php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:32:26.297

符号是用于[变量变量](http://php.net/manual/en/language.variables.variable.php)`${$key}`的简单书写风格的另一种书写风格。`$$key`

您可以使用该符号的一种特殊情况是当您执行以下技巧时：

```
$var = 'foo_x';
$key = 'x';
${'foo_' . $x} = 'hello';

echo $foo_x; // hello 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T13:30:36.857

设置名称为 $key 的变量。

```
$var = NULL;

$name = 'var';

${$name} = TRUE;

var_dump($var); // TRUE 
```

也：

```
$$name = TRUE; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T13:32:02.270

这是一种使用动态变量名称的方法。见这里： http: [//php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T13:33:26.763

它允许使用复杂的表达式。

它被称为复杂（卷曲）语法，您可以在[http://php.net/manual/en/language.types.string.php#language.types.string.parsing.complex找到更多信息](http://php.net/manual/en/language.types.string.php#language.types.string.parsing.complex)

# sencha-touch-2 - Sencha Touch 2：给嵌套列表叶节点一个不同的 itemTpl

> ID：15548958
> 
> 赞同：2
> 
> 时间：2013-03-21T13:29:21.140
> 
> 标签：sencha-touch-2, nested-lists

在我的嵌套列表中，我有 2 个级别。目前它显示一个标准列表。当您单击一个项目时，它会将您带到该项目的子项列表。这些孩子是叶节点。因此，当您点击其中一个时，它会将您带到该项目的详细信息卡。我想为子项使用与父项不同的列表项模板。有没有办法使用 Ext.XTemplate 来检查一个项目是否是叶节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:01:55.317

想通了：只需更新**x-list-item-leaf**类

```
.x-list-item-leaf{
    color:red !important;
} 
```

# asterisk - Asterisk 1.6.2.1 及更多版本中的实时架构（ARA）？

> ID：15548959
> 
> 赞同：0
> 
> 时间：2013-03-21T13:29:23.930
> 
> 标签：asterisk

目前我正在使用 Asterisk 版本 1.6.2.1。所有设置都是默认设置（我根据不同论坛中的教程安装和配置它）。所以在控制台中我使用以下命令：-

```
astrisk -r
core show settings 
```

然后我发现 Realtime Architecture (ARA): Disabled So

1.如何启用？

2\. ARA 是在 Asterisk 1.6.X 及以上版本中默认启用还是默认禁用并且我们必须启用它？

```
 app_set=1.6 
```

3.我尝试在asterisk.conf中有一行

`pbx_realtime=1.6`

`res_agi=1.6`

`app_set=1.6`

我转换为1.4，但没有用。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T02:31:49.203

确保您已查看： [https ://wiki.asterisk.org/wiki/display/AST/Realtime+Database+Configuration](https://wiki.asterisk.org/wiki/display/AST/Realtime+Database+Configuration) [http://www.voip-info.org/wiki/view/Asterisk+RealTime](http://www.voip-info.org/wiki/view/Asterisk+RealTime) [http:// www.asteriskdocs.org/en/3rd_Edition/asterisk-book-html-chunk/I_section12_tt1465.html](http://www.asteriskdocs.org/en/3rd_Edition/asterisk-book-html-chunk/I_section12_tt1465.html)

您使用什么数据库访问方法？ODBC？MySQL？您可以通过您提供给 Asterisk 的连接器凭据访问数据库吗？您是通过软件包还是通过自定义编译安装 Asterisk？

您确实提供的信息太少，以至于很难猜测您的问题可能是什么。

# c - mac的c编译器不是xcode

> ID：15548961
> 
> 赞同：0
> 
> 时间：2013-03-21T13:29:27.497
> 
> 标签：c, compiler-construction, download

我正在尝试在 mac 上编译一个简单的 C 程序但是我似乎永远无法让 Xcode 工作，所以我想要别的东西。我还想在运行代码时检查代码是否有错误，有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T13:36:25.297

打开`Terminal`，`cd`到您的源目录，

然后输入`gcc -Wall yourProgram.c -o YourProgram`，如果一切正常，您将能够执行程序输入`./YourProgram`

此外，如果您只是学习 C，那么暂时不要使用 IDE。习惯终端，随着经验的积累，转移到 IDE。]

还有类似的工具`lint`可以静态分析您的代码。使用 gdb，如果可用，也使用 valgrind 进行运行时调试。我不确定 valgrind 在 mac 上是否可用。看看`dtrace`以及如何使用它。

# css - css 水平居中

> ID：15548962
> 
> 赞同：0
> 
> 时间：2013-03-21T13:29:28.453
> 
> 标签：css

我在使用 css 时遇到问题。

```
.ventabotones div{
    float:left;
    margin-right: 3%;
}

.ventabotones{
    overflow:hidden;
}
.ventabotones{
    height:80px;
    border: 1px solid;
    border-radius: 10px;
} 
```

如何水平居中#ventabotones 内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:31:27.873

只需将其添加到您的 CSS 中。

```
.ventabotones{
  text-align:center;
} 
```

如果它仍然没有进入中心，可能的原因

*   您的容器没有足够的宽度在中心显示内容
*   一些全局 CSS 类覆盖了本地 CSS 类

不用看你的 html 标记就可以这么说

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T13:34:47.327

在您希望以分页为中心的 css div 中使用此代码

```
margin : 0 auto; 
```

# php - 在 Codeigniter 中上传 svg 文件

> ID：15548964
> 
> 赞同：1
> 
> 时间：2013-03-21T13:29:33.783
> 
> 标签：php, codeigniter

我正在尝试在 Codeigniter 中上传 svg 类型的文件。但是我无法使用上传库中内置的 codeigniters 来做到这一点。我试图通过在 conig > mimes.php 文件中添加这一行来做到这一点

```
'svgz' => 'image/svg+xml',
'svg' => 'image/svg+xml', 
```

但仍然没有解决方案。我收到此错误 -

```
The filetype you are attempting to upload is not allowed. 
```

这是我的代码

```
 $dir = 'uploads/svg/';
                    $this->load->library('upload');

                    $config['file_name'] = $result . '.svg';
                    $config['upload_path'] = $dir;
                    $config['allowed_types'] = 'image/svg+xml';

                    $this->load->library('upload');
                    $this->upload->initialize($config);
                    $this->upload->do_upload(); 
```

任何人都可以帮助我吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2021-03-25T12:06:47.510

首先，在[此处检查图像的 MIME 类型](https://htmlstrip.com/mime-file-type-checker)

然后，从 config 文件夹中打开**mimes.php**，然后从数组中找到与您的图像扩展名相同的索引数组元素，将图像的 mime 类型添加到数组中

就我而言，我添加了“图像/svg”：

```
'svg'   =>  array('image/svg+xml', 'application/xml', 'text/xml', 'image/svg') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:48:21.053

您需要将允许的文件扩展名列表放在 中`$config['allowed_types']`，用 分隔`|`，而不是 MIME 类型。尝试这个 -

```
$config['allowed_types'] = 'svg'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T13:48:16.503

```
$config['allowed_types'] = 'image/svg+xml'; 
```

这应该是：

```
$config['allowed_types'] = 'svg'; 
```

# cxf - CXF WebClient 获取响应对象

> ID：15548971
> 
> 赞同：0
> 
> 时间：2013-03-21T13:29:53.650
> 
> 标签：cxf, webclient

我有一个返回对象的休息 API。在我的代码中，我试图创建一个 WebClient 并获取 API 响应，API 正在正确返回对象，但我的客户端无法将它与 POJO 映射。它的一些抛出错误。请在下面找到代码和例外情况。

API 响应

* * *

```
{
    "responseParameters":{
    "responseCode":200,
    "responseText":"responseText",
    "authId":"authId",
    "transactionId":"transactionId"
},
"accountNo":"Dummy_accountNo",
"error":[

]
} 
```

我的访问 api 的代码

* * *

```
WebClient client = WebClient.create(url);
client.type("application/json").accept("*/*");
AccountResponse rs = client.get(AccountResponse.class); 
```

抛出异常

* * *

```
javax.ws.rs.WebApplicationException: javax.ws.rs.WebApplicationException
at org.apache.cxf.jaxrs.client.WebClient.handleResponse(WebClient.java:637)
at org.apache.cxf.jaxrs.client.WebClient.doChainedInvocation(WebClient.java:622)
at org.apache.cxf.jaxrs.client.WebClient.doInvoke(WebClient.java:596)
at org.apache.cxf.jaxrs.client.WebClient.invoke(WebClient.java:324)
at org.apache.cxf.jaxrs.client.WebClient.get(WebClient.java:391)
at com.service.delegate.CardManagementDelegate.addCard(CardManagementDelegate.java:94)
at com.service.rest.impl.CardManagementImpl.createCard(CardManagementImpl.java:36)
at com.service.rest.impl.CardManagementImpl$$FastClassByCGLIB$$9a9a93c6.invoke(<generated>)
at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.aop.framework.adapter.MethodBeforeAdviceInterceptor.invoke(MethodBeforeAdviceInterceptor.java:50)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:161)
at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
at com.service.rest.impl.CardManagementImpl$$EnhancerByCGLIB$$93e60e95.createCard(<generated>)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:173)
at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:89)
at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:133)
at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:82)
at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37)
at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:106)
at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:243)
at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:110)
at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:98)
at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:423)
at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:139)
at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:142)
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:330)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:118)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:84)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at com.oauth.CustomProtectedResourceFilter.doFilter(CustomProtectedResourceFilter.java:74)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:103)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:279)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T20:19:22.177

由于您没有提供有关您的 wadl 的大量信息，因此如果您有请求，我会说尝试关注

```
WebClient client = WebClient.create(url);

client.reset();

AccountResponse accountResponse= client.path("rest-uri-String",parameters).accept("application/json").get(AccountResponse.class); 
```

# java - 同步和静态同步

> ID：15548974
> 
> 赞同：2
> 
> 时间：2013-03-21T13:29:56.457
> 
> 标签：java, synchronized

我试图了解同步和静态同步方法之间的主要区别。

例如考虑一个`Employee`有几个实例的类`e1`，`e2`.

```
synchronized method1() {
    //--- blah blah---
} 
```

当通过获取对象级锁`e1`执行时，将等待由 hwld 释放的锁。`method1()``e2``e1`

在静态同步的情况下，`e1`在类级别持有锁时，`e2`也无法进入该块。

```
static synchronized method1() {
    //--- blah blah---
} 
```

这两种情况有什么不同？我看不出静态和非静态同步方法访问有什么区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:45:11.823

在您的第一个示例中，同步是在实例级别操作的，因此如果您同时调用`e1.method1()`和`e2.method1()`，它们可以并行运行。

在您的第二个示例中，同步是在类级别操作的，因此如果您同时调用`e1.method1()`和`e2.method1()`，它们将不会并行运行。

# java - Akka - 重新启动受监督的演员

> ID：15548976
> 
> 赞同：1
> 
> 时间：2013-03-21T13:29:59.900
> 
> 标签：java, akka, akka-supervision

我在我的项目中使用 Akka (Java) 来提供重试方案。所以我有一个主管演员，它在收到消息时将其委托给受监督的演员。我对主管有一个一对一的策略来重启（无条件地）。

受监督的 Actor 有一个 preRestart 钩子，它将消息发送给自己。

```
@Override
    public void preRestart(Throwable reason, Option<Object> message){
        //send it to the supervisor so that it can be enqueued once again to retry
        if(reason.getCause() instanceof SQLException){
              log.error("Not retrying since there seems to be a problem with the SQL itself!");
              super.preRestart(reason, message);

        }
        else{
            log.warn(""+state+" Trying to redo a processing: "+((RecordData)message.get()).getRecord());

            getSelf().tell(message.get(), getSender());
            super.preRestart(reason, message);
        }
    } 
```

现在我也想保留失败演员的内部状态！我知道只有当我的策略是“恢复”时才会保留状态，但在这种情况下不会调用 onRestart 钩子并且消息会丢失。

问题：

1.实现这一点的唯一方法是在消息本身中设置状态并重新启动吗？

2.如果状态保持顺序，那么我需要提供一个“有序”的邮箱实现（基于dequeue）。这是正确的理解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T16:25:01.760

我怀疑您是否可以向处于 preRestart 阶段的 Actor 发送消息。

您的策略应该是在崩溃/重启时重置参与者。如果要保留内部状态，则必须将其传递给其他地方（其他参与者，数据库），以便在新参与者启动时再次询问它。

为什么不在主管中实现更多的逻辑呢？

如果我知道你使用的是什么版本的 Akka，我会在这里发布一些示例代码。

# ios - iOS - 从代码到故事板

> ID：15548977
> 
> 赞同：1
> 
> 时间：2013-03-21T13:30:02.633
> 
> 标签：ios, xcode, storyboard

我可以从现有代码自动生成故事板吗？

如果没有，是否有人知道在当前代码和新故事板之间建立联系的好方法？

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:34:03.380

```
can i generate automatically storyBoard from existing code? 
```

不，你不能。

您必须分析代码的作用，并将其转换为新的故事板。或者您可以简单地使用 XIB 文件，这样不同的人可以处理应用程序的不同部分，而不会在提交代码时冒太多冲突的风险。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T13:37:31.697

为您的项目添加一个新的故事板，如下图所示：

![在此处输入图像描述](../Images/1bb2e529748d5b4216fd2c26a606f459.png)

然后从 Summary -> iPhone/iPodDeployment Info 设置它的目标：

![在此处输入图像描述](../Images/7e1508406b34349bd91d5a849bb2e733.png)

然而，这只是为您的应用程序制作一个新的 MainStoryBoard。

# embedded - VHDL 模拟得很好，但在硬件中的作用不一样

> ID：15548981
> 
> 赞同：0
> 
> 时间：2013-03-21T13:30:14.910
> 
> 标签：embedded, vhdl, fpga

我编写了一些组件来前后移动步进电机。我已经在 modelsim 中对其进行了模拟，它可以按预期工作，但它在硬件中的工作方式完全不同。

基本上我有一个电机驱动组件，它接受步数、保持时间和速度的命令，然后执行运动。然后我有 control_arbiter，它只是一个中间桥，连接想要访问电机的组件和电机驱动组件。最后我有一个“搜索模式”组件，它基本上发出命令来来回移动电机。

我的问题是，当它在硬件中运行时，我似乎无法改变方向，无论它是否在模拟中工作。

对此的任何帮助将不胜感激

电机驱动器：

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.std_logic_unsigned.all;

entity motor_ctrl is

port(   clk: in std_logic;

        -- Hardware ports
        SCLK, CW, EN: out std_logic;    -- stepper driver control pins

        -- Soft ports
        Speed, steps: in integer;   
        dir: in std_logic;          -- 1 = CW; 0 = CCW;
        hold_time: in integer;      -- if > 0, steppers will be held on for this many clock periods after moving
        ready: out std_logic;       -- indicates if ready for a movement
        activate: in std_logic;     -- setting activate starts instructed motion. 
        pos_out: out integer            -- starts at 2000, 180deg = 200 steps, 10 full rotations trackable
        );

end motor_ctrl;

architecture behavioural of motor_ctrl is

type action is (IDLE, HOLD, MOVE);
signal motor_action: action := IDLE;

signal clk_new: std_logic;
signal position: integer := 2000;

signal step_count: integer := 0;
signal drive: boolean := false;

begin

-- Clock divider
clk_manipulator: entity work.clk_divide port map(clk, speed, clk_new);

-- Drive motors
with drive select
    SCLK <= clk_new when true,
                    '0' when false;

pos_out <= position;

process(clk_new)
    -- Counter variables
    variable hold_count: integer := 0;      
begin

    if rising_edge(clk_new) then
        case motor_action is

            when IDLE =>
                -- reset counter vars, disable the driver and assert 'ready' signal
                hold_count := 0;
                step_count <= 0;
                drive <= false;
                EN <= '0';
                ready <= '1';

                -- When activated, start moving and de-assert ready signal
                if(activate = '1') then
                    motor_action <= MOVE;
                end if;

            when HOLD =>
                -- Stop the step clock signal
                ready <= '0';
                drive <= false; 
                -- Hold for given number of clock periods before returning to idle state
                if(hold_count = hold_time) then
                    motor_action <= IDLE;
                end if;
                -- increment counter
                hold_count := hold_count + 1;

            when MOVE =>                    
                -- Enable driver, apply clock output and set direction
                ready <= '0';
                EN <= '1';
                drive <= true;
                CW <= dir;      

                -- track the position of the motor
                --if(dir = '1') then    
                --  position <= steps + step_count;
                --else
                --  position <= steps - step_count;
                --end if;

                -- Increment count until complete, then hold/idle
                if(step_count < steps-1) then
                    step_count <= step_count + 1;
                else
                    motor_action <= HOLD;
                end if;

        end case;
    end if;

end process;

end behavioural; 
```

控制仲裁器：

```
entity Control_arbiter is

port (clk: in std_logic;
        EN, RST, CTRL, HALF, SCLK, CW: out std_logic_vector(2 downto 0)
        -- needs signals for levelling and lock
        );

end Control_arbiter;

architecture fsm of Control_arbiter is

type option is (INIT, SEARCH);
signal arbitration: option := INIT;

-- Motor controller arbiter signals
-- ELEVATION
signal El_spd, El_stps, El_hold, El_pos: integer;
signal El_dir, El_rdy, El_run: std_logic;

-- Search signals
signal search_spd, search_stps, search_hold: integer; 
signal search_dir, search_Az_run, search_El_run: std_logic := '0';
-- status
signal lock: std_logic := '0';

begin

-- Motor controller components
El_motor: entity work.motor_ctrl port map(clk, SCLK(0), CW(0), EN(0),
                                                        El_spd, El_stps, El_dir, El_hold, El_rdy, El_run);                                                      

-- Search component
search_cpmnt: entity work.search_pattern port map(  clk, '1', search_dir, search_stps, search_spd, search_hold, 
                                                                    El_rdy, search_El_run);

process(clk, arbitration)

begin

    if rising_edge(clk) then

        case arbitration is

            when INIT =>
                -- Initialise driver signals
                EN(2 downto 1) <= "11";
                CW(2 downto 1) <= "11";
                SCLK(2 downto 1) <= "11";
                RST  <= "111";
                CTRL <= "111";
                HALF <= "111";
                -- Move to first stage
                arbitration <= SEARCH;

            when SEARCH =>
                -- Map search signals to motor controllers
                El_dir  <= search_dir;
                El_stps <= search_stps;
                El_spd  <= search_spd;
                El_hold <= search_hold;
                El_run  <= search_El_run;
                -- Pass control to search
                -- Once pointed, begin search maneuvers
                 -- map search signals to motor controllers
                 -- set a flag to begin search
                 -- if new pointing instruction received, break and move to that position (keep track of change)
                 -- On sensing 'lock', halt search
                 -- return to holding that position

        end case;

    end if;

end process;

end fsm; 
```

搜索模式：

```
entity search_pattern is

generic (step_inc: unsigned(7 downto 0) := "00010000"
            );
port (clk: in std_logic;
        enable: in std_logic;
        dir: out std_logic;
        steps, speed, hold_time: out integer;
        El_rdy: in std_logic;
        El_run: out std_logic
        );

end search_pattern;

architecture behavioural of search_pattern is

type action is (WAIT_FOR_COMPLETE, LATCH_WAIT, MOVE_EL_CW, MOVE_EL_CCW);
signal search_state: action := WAIT_FOR_COMPLETE;
signal last_state: action := MOVE_EL_CCW;

begin

hold_time <= 1; 
speed <= 1;
steps <= 2;

process(clk)

begin

    if rising_edge(clk) then

        -- enable if statement

            case search_state is

                when LATCH_WAIT =>
                    -- Make sure a GPMC has registered the command before waiting for it to complete
                    if(El_rdy = '0') then       -- xx_rdy will go low if a stepper starts moving
                        search_state <= WAIT_FOR_COMPLETE;      -- Go to waiting state and get ready to issue next cmd
                    end if;

                when WAIT_FOR_COMPLETE =>

                    -- Wait for the movement to complete before making next
                    if(El_rdy = '1') then       
                        -- Choose next command based on the last
                        if last_state = MOVE_EL_CCW then
                            search_state <= MOVE_EL_CW;
                        elsif last_state = MOVE_EL_CW  then
                            search_state <= MOVE_EL_CCW;
                        end if;
                    end if;             

                when MOVE_EL_CW =>
                    dir <= '1';
                    El_run <= '1';
                    last_state <= MOVE_EL_CW;
                    search_state <= LATCH_WAIT;

                when MOVE_EL_CCW =>
                    dir <= '0';
                    El_run <= '1';
                    last_state <= MOVE_EL_CCW;
                    search_state <= LATCH_WAIT;

                when others =>
                    null;
            end case;

        -- else step reset on not enable

    end if;

end process;

end behavioural; 
```

辛：http: [//i.imgur.com/JAuevvP.png](http://i.imgur.com/JAuevvP.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:57:12.567

快速浏览您的代码，您应该更改一些内容以进行综合：

1）时钟分频器：使您的motor_driver进程对clk而不是clk_new敏感。要对时钟进行分频，每 n 个时钟产生一个 1 个时钟周期的使能信号。该过程的开始可能如下所示：

```
 process(clk)
        ... 
    begin

    if rising_edge(clk) then
        if enable='1' then
            case motor_action is
             ... 
```

2) 表单的初始化

```
 signal position: integer := 2000; 
```

仅适用于模拟，但不适用于合成。对于综合中的初始化，在过程中使用复位信号。

3) 向所有状态机添加“当其他人”子句，其中状态设置为定义的值（例如 search_state<=INIT）。

# date - DataJS 渲染日期为 /Date(1363708765000)/

> ID：15548982
> 
> 赞同：2
> 
> 时间：2013-03-21T13:30:15.417
> 
> 标签：date, sharepoint-2010, datajs

我正在通过 DataJS 访问 SharePoint 2010 List WCF 数据服务并取回日期字段，因为`/Date(1363708765000)/`有人知道如何处理它以显示正确的日期吗？

注意：我在这里摆姿势是因为我怀疑这是一个 DataJS 问题，而不是`ListData.svc`SharePoint 中的一个特性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:16:02.943

您收到的是一个[Unix epoch](http://en.wikipedia.org/wiki/Unix_time)，它表示自 1970 年 1 月 1 日以来经过的毫秒数。幸运的是，JavaScript 也使用它作为它的 epoch，这意味着您可以使用经过的毫秒作为输入来创建一个新的 Date 对象范围：

```
var myDate = new Date(1363708765000);
console.log("UTC:" + myDate.toUTCString());
// outputs UTC: Tue, 19 Mar 2013 15:59:25 GMT 
```

当然，您必须先解析出返回的日期值的整数部分，然后才能使用它来初始化日期。可重用函数可能如下所示：

```
function parseJsonDate( sDate ) {
    var b, e, i;
    b = sDate.indexOf('(');
    e = sDate.indexOf(')');
    i = sDate.substring(b+1,e);

    if (isNaN(i)) { return null };
    return new Date(parseInt(i));
} 
```

# windows - 在 Windows 7 上使用 Apache 加载 wsgi_mod

> ID：15548984
> 
> 赞同：0
> 
> 时间：2013-03-21T13:30:27.687
> 
> 标签：windows, apache, mod-wsgi

我已经多次看到这个问题被问过，并且我已经尝试了所描述的解决方案 - 不幸的是，这些解决方案对我不起作用，所以我想问我自己的问题。我希望它没有被标记为欺骗或类似的。

我的问题是，在 Windows 7 上，我无法让 Apache 2.0 加载运行 Django 项目所需的 WSGI 模块。让我先描述一下我的环境，以及我是如何到达那里的。

**Windows**：我使用的是带有 Service Pack 1 的 Windows 7 64 位企业版。

**Python**：我已经安装了 python 2.7.3 32 位并将它放在我的路径上。当我`python`在 PowerShell 中输入时，我会看到以下消息：

```
C:\ $ python
Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

我已经安装了 32 位 python，因为 Windows 没有 64 位版本的 WSGI 模块。我确保为所有用户安装它（我在其他问题上看到，为所有用户安装解决了加载 WSGI 模块的问题，但它并没有解决我的问题）。我已经通过以下步骤安装了 python：

1.  以管理员身份启动 PowerShell（右键单击 ->“以管理员身份运行”）
2.  运行以下命令：（`msiexec /i python-2.7.3.msi ALLUSERS=1`如此处所述：http: [//www.python.org/getit/releases/2.4/msi/](http://www.python.org/getit/releases/2.4/msi/)）

**Apache**：我已经安装了 Apache 2.0 32 位（因此 Apache 的位版本与 Python 的位版本以及 WSGI 模块的位版本相匹配）。当我进入`services.msc`“运行”对话框 (Win+r) 并标记 Apache 时，我可以在左侧的描述中看到以下内容：

```
Description:
Apache/2.0.64 (Win32) 
```

Apache 安装在此目录中：`C:\Program Files (x86)\Apache Group\Apache2`. 在我安装 mod_wsgi 之前，Apache 启动得很好。

**mod_wsgi**：我已经从这里下载了适用于 Windows 和 Python 2.7 的二进制文件：[https](https://code.google.com/p/modwsgi/wiki/DownloadTheSoftware?tm=2) ://code.google.com/p/modwsgi/wiki/DownloadTheSoftware?tm= 2（该文件名为“mod_wsgi-win32-ap22py27-3.3。所以”），然后我将其重命名为并将其`mod_wsgi.so`复制到`C:\Program Files (x86)\Apache Group\Apache2\modules`. 最后，我把这一行放在 Apache 的 httpd.conf:`LoadModule wsgi_module modules/mod_wsgi.so`中。

现在，当我尝试启动 Apache 时，我遇到了这个错误：

```
Syntax error on line 174 of C:/Program Files (x86)/Apache Group/Apache2/conf/httpd.conf:
Cannot load C:/Program Files (x86)/Apache Group/Apache2/modules/mod_wsgi.so into server:
The specified module could not be found. 
```

我几乎被困在这里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:30:27.687

[橡皮鸭](http://www.codinghorror.com/blog/2012/03/rubber-duck-problem-solving.html)在这里帮了我很大的忙。在校对我的问题时，我发现 mod_wsgi 的文件名表明它适用于 Apache 2.2。我还发现我已经安装了 Apache 2.0。

升级到 Apache 2.2 解决了我的问题。希望它会帮助那里的人。

# scala - 如何将对象详细信息打印到文件中？

> ID：15548996
> 
> 赞同：0
> 
> 时间：2013-03-21T13:30:54.293
> 
> 标签：scala

要将每个对象打印到文件中，我使用以下代码：

```
def printToFile(f: java.io.File)(op: java.io.PrintWriter => Unit) {
  val p = new java.io.PrintWriter(f)
  try { op(p) } finally { p.close() }
}

printToFile(new java.io.File("c:\\csvfiles\\clean.csv"))(p => {
    myObjectList.foreach(p.println)
}) 
```

如何访问 myObjectList 中的对象并打印它们的属性值？我需要覆盖对象的 toString 方法还是有替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:10:15.310

你可以

```
myObjectList.foreach{ ob => p.println({
  /* Do whatever you need to do with ob that produces a string */
})} 
```

只要您正在做的任何事情都适用于集合认为它包含的类型。否则，覆盖`toString`可能是最好的解决方案。