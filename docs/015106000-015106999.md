# StackOverflow 问答 15106000-15106999

# ruby-on-rails - 路线在本地运行良好但在生产中运行良好

> ID：15106002
> 
> 赞同：0
> 
> 时间：2013-02-27T06:58:46.687
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我目前正在尝试让我的 Ruby on Rails 应用程序在生产环境中运行。它工作正常，但是当我在嵌套命名空间下添加路由时，它给了我错误提示

> ActionController::RoutingError（未初始化常量 Agent::Clients::AccountController）

**这条路线在我的本地机器上运行良好**，路线看起来像这样

```
namespace :agent do
root                     :to => redirect('url')
match 'dashboard',       :to => 'dashboard#index'
match 'account',         :to => 'account#edit'
match 'account/update',  :to => 'account#update'

namespace :clients do
  root              :to => redirect('url')

**# This part I added and is giving routing error**   
  match 'accounts/invite', :to => 'clients/account#invite'
  match 'accounts/sendinvite', :to => 'clients/account#send_invitation' 
```

我的 rake 路线正确地给出了路线。任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:59:48.307

所以你要么想做

```
match 'accounts/invite', :to => 'clients/accounts#invite'
match 'accounts/sendinvite', :to => 'clients/accounts#send_invitation' 
```

或者

```
match 'accounts/invite', :to => 'agent/account#invite'
match 'accounts/sendinvite', :to => 'agent/account#send_invitation' 
```

# python - 如何从python文件执行系统命令

> ID：15106004
> 
> 赞同：0
> 
> 时间：2013-02-27T06:58:52.663
> 
> 标签：python, operating-system, command, execute

我正在使用 python 并尝试执行如下系统命令

**代码.py**

```
import commands
import os

os.system('updatedb') 
```

**结果：**

```
sh-4.2$ python code.py
updatedb: can not open a temporary file for `/var/lib/mlocate/mlocate.db' 
```

那么如何从 python 模块执行上述所有系统命令呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:07:40.867

这几乎可以肯定只是一个权限问题。如果您可以信任您的脚本以 root 身份运行：

```
$ sudo python code.py 
```

# ios - 定期移动 UIView 和子视图

> ID：15106005
> 
> 赞同：0
> 
> 时间：2013-02-27T06:59:01.597
> 
> 标签：ios, core-animation, uiviewanimation

我正在构建一个类似俄罗斯方块的应用程序。现在我必须根据时间将包含 8 个 uibuttons 的 Uiview 移动到屏幕底部，并在用户点击指定按钮时跟踪 uibuttons 的位置。我想使用基于块的动画或核心动画来完成任务。目前，如果我正在为超级视图的框架和中心设置动画，似乎我必须对块内的子视图执行相同的操作。任何输入都会很方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T21:42:28.883

您可以使用 UIView 块动画来为视图设置动画，并且它的子视图非常简单。

但是，UIView 动画和核心动画都不会让用户在制作动画时单击按钮。按钮动作在“飞行中”动画上根本不起作用。没有自动的方法可以做到这一点。（至少我不知道。）

相反，您必须向父视图添加点击手势识别器，并在父视图的表示层上进行点击测试，以查看表示层的哪个子层被点击。

# iphone - How to encrypt the sqlite file in IOS and which one is good method?

> ID：15106007
> 
> 赞同：1
> 
> 时间：2013-02-27T06:59:11.743
> 
> 标签：iphone

Hi I would like to encrypt my database(sqlite) file and which encryption method is good for IOS development. Thank's in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:50:34.433

you use [SQLCipher](http://sqlcipher.net/) fencrypt my database(sqlite) file.It's a build of SQLite that provides transparent, page-level encryption of the entire DB. There's a tutorial over on [Mobile Orchard](http://mobileorchard.com/tutorial-iphone-sqlite-encryption-with-sqlcipher/) for using it in iPhone apps.

# php - postgresql：从 php 读取二进制 blob

> ID：15106012
> 
> 赞同：2
> 
> 时间：2013-02-27T06:59:39.493
> 
> 标签：php, postgresql, pdo, blob

当我尝试从数据库中读取 blob 数据时，我有这样的事情：

```
xffd8ffe000104a46494600010201006000600000... 
```

它只在 Windows 操作系统上，在 linux 上它可以正常工作

sql：

```
select lob from table where id = ... 
```

尝试使用`::bytea`，没有任何改变

在 php 中只需使用 PDO 获取和`file_put_contents`

我可以使用 xml 转换数据`convert_from(lob, 'UTF8')`，但我需要二进制数据的解决方案（例如 zip）

更新：php代码

```
$db = new PDO('pgsql:...');
$pds = $db->prepare("select lob from table where id = :id");
$pds->bindParam('id', $id);
$pds->execute();
$r = $pds->fetch(PDO::FETCH_ASSOC);
file_put_contents('Chrysanthemum.jpg', $r['lob']); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:11:41.403

当`bytea_output`参数设置为时，问题中显示的十六进制字符串是由 PostgreSQL 9.0 或更高版本生成的`hex`。

该问题的一个合理原因是您在 Windows 上的 PHP 与 9.0 之前的版本相关联`libpq`。这些旧版本不会解码这些内容。

您可以升级到更新的`libpq`，或者作为一种解决方法，您可以在选择任何 bytea 值之前执行以下操作：

```
$db->query("SET bytea_output=escape"); 
```

这将（对于当前会话）将 bytea 文本表示恢复为旧版本和新版本都`libpq`可以解码的旧方式。

# c# - 代表用户发送电子邮件

> ID：15106022
> 
> 赞同：4
> 
> 时间：2013-02-27T07:00:30.963
> 
> 标签：c#, .net, smtp

所以我在我们的 web 应用程序中实现了一个邮件服务，用户可以利用它向某个列表上的人发送电子邮件。现在我需要知道如何最好地使用 System.Net.Mail 对象代表用户发送邮件。我已经尝试了一段时间，但没有正确的结果。

我希望邮件阅读“代表用户 1 的我们的系统”，并且对地址的回复应该是用户 1 在我们系统中的地址，以便当联系人想要回复邮件时，他应该得到用户 1 的地址， 不是我们的。我怎样才能做到这一点？

我需要申报哪些字段以及如何申报？这就是我现在设置的方式，但是对这些设置的回复会将邮件发送回 noreply@oursystem.com

```
from = 'noreply@oursystem.com'
replyTo = 'user1@privateaddress.com'
to = 'user1@privateaddress.com'
sender  = 'user1@privateaddress.com'
cc  = '' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:37:43.180

**回复**是`obsolete`。你应该使用**ReplyToList**

例子：

```
MailAddress mailFrom = new MailAddress("noreply@oursystem.com");
MailAddress mailTo = new MailAddress("user1@privateaddress.com");
MailAddress mailReplyTo = new MailAddress("user1@privateaddress.com");

MailMessage message = new MailMessage();
message.From = mailFrom;
message.To.Add(mailTo); //here you could add multiple recepients
message.ReplyToList.Add(mailReplyTo); //here you could add multiple replyTo adresses 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:40:29.150

这是由接收端的编程错误引起的。正确的解决方案是如上所述设置 from 和 replyto。这将得到正确的行为。

# iphone - 如何将视图覆盖在另一个视图之上？

> ID：15106024
> 
> 赞同：1
> 
> 时间：2013-02-27T07:00:37.107
> 
> 标签：iphone, ios, uiview

正如[jjv360](https://stackoverflow.com/users/1008736/jjv360)在我的另一个问题中所建议的那样，为 scrollView 自定义分页宽度的一种方法是使 scrollView 成为分页的大小，然后在其上覆盖一个透明的 UIView 并为 [overlayView addGestureRecognizer:scrollView.panGestureRecognizer]触摸事件。

这听起来是个好主意，这是我的快速问题：

只是叠加`[view addsubview OLvier]`吗？什么是视图覆盖方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:09:19.080

是的...使用 CGRectMake 设置视图框架并使用覆盖

[滚动视图添加子视图：view1]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:09:33.963

```
UIView *yourView = [UIView alloc]init];
yourView.frame = CGRectMake(x,y,width,height)//whatever values work for you
[self.view addSubview: yourView]; 
```

# python - Scrapy爬取的网址如何存储？

> ID：15106029
> 
> 赞同：4
> 
> 时间：2013-02-27T07:00:55.523
> 
> 标签：python, scrapy, web-crawler

我有一个网络爬虫，可以爬取网页上的新闻报道。

我知道如何使用 XpathSelector 从页面中的元素中抓取某些信息。

但是我似乎无法弄清楚如何存储刚刚抓取的页面的 URL。

```
class spidey(CrawlSpider):
    name = 'spidey'
    start_urls = ['http://nytimes.com'] # urls from which the spider will start crawling
    rules = [Rule(SgmlLinkExtractor(allow=[r'page/\d+']), follow=True), 
        # r'page/\d+' : regular expression for http://nytimes.com/page/X URLs
        Rule(SgmlLinkExtractor(allow=[r'\d{4}/\d{2}/\w+']), callback='parse_articles')]
        # r'\d{4}/\d{2}/\w+' : regular expression for http://nytimes.com/YYYY/MM/title URLs 
```

我想存储通过这些规则的每个链接。

我需要添加什么到 parse_articles 以将链接存储在我的项目中？

```
def parse_articles(self, response):
    item = SpideyItem()
    item['link'] = ???
    return item 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T07:05:15.777

response.url 是您要查找的内容。

请参阅有关响应对象的[文档](http://doc.scrapy.org/en/latest/topics/request-response.html#response-objects)并检查[这个](https://github.com/alecxe/broken-links-checker/blob/master/broken_links_spider.py)简单的示例。

# python - NLTK 情绪分析只返回一个值

> ID：15106032
> 
> 赞同：3
> 
> 时间：2013-02-27T07:00:59.127
> 
> 标签：python, twitter, nltk, sentiment-analysis

我非常讨厌发布关于整个代码块的问题，但在过去的 3 个小时里我一直在研究这个问题，我无法理解正在发生的事情。我从 CSV 文件中检索到大约 600 条推文，这些推文具有不同的分值（介于 -2 到 2 之间），反映了对总统候选人的情绪。

但是，当我在任何其他数据上运行此训练样本时，只返回一个值（正值）。我已经检查了分数是否被正确添加并且它们是正确的。对我来说，从 600 条不同的训练集中将 85,000 条推文都评为“正面”，这对我来说是没有意义的。有人知道这里发生了什么吗？谢谢！

```
import nltk
import csv

tweets = []
import ast
with open('romney.csv', 'rb') as csvfile:
    mycsv = csv.reader(csvfile)
    for row in mycsv:
        tweet = row[1]
        try:
            score = ast.literal_eval(row[12])
            if score > 0:
                print score
                print tweet
                tweets.append((tweet,"positive"))

        elif score < 0:
            print score
            print tweet
            tweets.append((tweet,"negative"))
    except ValueError:
        tweet = ""

def get_words_in_tweets(tweets):
    all_words = []
    for (words, sentiment) in tweets:
      all_words.extend(words)
    return all_words

def get_word_features(wordlist):
    wordlist = nltk.FreqDist(wordlist)
    word_features = wordlist.keys()
    return word_features

def extract_features(document):
    document_words = set(document)
    features = {}
    for word in word_features:
    features['contains(%s)' % word] = (word in document_words)
    return features

word_features = get_word_features(get_words_in_tweets(tweets))
training_set = nltk.classify.apply_features(extract_features, tweets)
classifier = nltk.NaiveBayesClassifier.train(training_set)
c = 0
with open('usa.csv', "rU") as csvfile:
    mycsv = csv.reader(csvfile)
    for row in mycsv:
        try:
            tweet = row[0]
            c = c + 1
                    print classifier.classify(extract_features(tweet.split()))                                                                                                                                                                                     
        except IndexError:
            tweet = "" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T20:49:56.507

朴素贝叶斯分类器通常在评估文档中出现的单词时效果最好，忽略单词的缺失。既然你用

```
features['contains(%s)' % word] = (word in document_words) 
```

每个文档主要由值为 False 的特征表示。

试试类似的东西：

```
if word in document_words:
   features['contains(%s)' % word] = True 
```

（您可能还应该更改*for*循环以获得比循环遍历词典中的所有单词更有效的方法，而不是循环遍历文档中出现的单词）。

# python - 卸载 32 位 MySQL 并在 virtualenv 上重新安装为 64 位

> ID：15106037
> 
> 赞同：0
> 
> 时间：2013-02-27T07:01:30.430
> 
> 标签：python, mysql, django, virtualenv, x86-64

我目前正在我的 Mac OS X 10.8.2 上设置 python/django virtualenv，我正在尝试将其与 MySQL 一起使用。但是，当我运行“$ python manage.py syncdb”时，我收到一条错误消息，上面写着（已剪辑）：

```
"....
....
....no suitable image found.  Did find:
            /Users/jb/.virtualenvs/MGV/lib/python2.7/site-packages/_mysql.so: mach-o, but wrong architecture" 
```

运行“$ file $(which mysql)”和“$ file $(which python)”后，我发现这个问题是由于我的virtualenv的Python版本是x86_64而它的MySQL版本是i386（另见：[http:// sourceforge.net/p/mysql-python/discussion/70460/thread/43053990/](http://sourceforge.net/p/mysql-python/discussion/70460/thread/43053990/)）。所以我试图通过卸载 32 位 MySQL 并用 64 位替换它来解决这个问题。我找到了许多在我的 Mac 上卸载 MySQL 的解决方案，但找不到任何关于如何在 virtualenv 上卸载和重新安装 MySQL 的解决方案。我是一个相对较新的程序员，因此非常感谢明确的说明！:)

# android - 使用 TabHost 包含其他布局

> ID：15106039
> 
> 赞同：0
> 
> 时间：2013-02-27T07:01:55.853
> 
> 标签：android, user-interface, android-tabhost

我有一个 TabHost 布局（下面的代码）

```
<TabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myTabHost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="65dp" >
    </TabWidget>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:paddingTop="65dp" >

        <LinearLayout
            android:id="@+id/content"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >
        </LinearLayout>
    </FrameLayout>
</TabHost> 
```

我在 TabHost 中加载了一些活动，关于活动的一切都正常。但我的问题是关于通过包含标签在 TabHost 顶部加载另一个布局，在其他布局（如 LinearLayout）中，我在其中放置了一个包含标签，这没关系，但在 TabHost 中我不能这样做，因为在添加包含 TabHost UI 之后被损坏
。请告诉我如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:09:51.417

`TabHost`用另一个标签包装你的标签，`LinearLayout`如下所示：

```
<LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >
            <!-- inclde goes here -->
            <TabHost
                android:id="@+id/myTabHost"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >
                        <!-- Other tags as you have already. -->
            </TabHost>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:07:32.097

然后将其`LinearLayout`作为父级`TabHost`并`LinearLayout`使用 include 标记将其包含在 other`layouts`中，如下所示：

```
 <LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@+id/myLinearLayout"
         android:layout_width="match_parent"
         android:layout_height="match_parent" >
    <TabHost
        android:id="@+id/myTabHost"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="65dp" >
    </TabWidget>
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:paddingTop="65dp" >

    <LinearLayout
        android:id="@+id/content"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >
    </LinearLayout>
    </FrameLayout>
    </TabHost>
 </LinearLayout> 
```

# ruby-on-rails - 在 Rails.cache.fetch 中调试

> ID：15106044
> 
> 赞同：1
> 
> 时间：2013-02-27T07:02:16.273
> 
> 标签：ruby-on-rails, debugging

我想调试/打印代码块内的值

```
Rails.cache.fetch(some values) do
 #want to get the values from this blocks.

end 
```

尝试使用 Rails.logger.ap、puts、调试器。什么都没解决。我假设这只是由于缓存提取吗？

请建议我一些解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:05:51.383

只是为了解释一下apneadiving 的评论。

由于您使用缓存，Rails 只会运行该块一次，直到您删除内容。看看下面的代码会发生什么

```
>> Rails.cache.fetch(:foo) { 'bar' } # writes 'foo' to cache with value 'bar' since this is the first time you run the command
>> Rails.cache.fetch(:foo) { 'bar' } # fetches 'foo' from cache since it's already in the cache so the block is not executed 
```

如果要调试块内部的内容，可以先删除对缓存的调用（始终评估块）或`Rails.cache.delete(:foo)`在块之前添加。

# magento - 如何在 magetno 中根据产品 ID 保存属性值

> ID：15106047
> 
> 赞同：0
> 
> 时间：2013-02-27T07:02:46.677
> 
> 标签：magento, magento-1.7

如何根据产品 ID 添加产品属性值。我想使用代码为特定产品 ID 添加属性值。我的产品属性代码是

```
$attr_model = Mage::getModel('catalog/resource_eav_attribute');

//Load the particular attribute by id
//Here 73 is the id of 'manufacturer' attribute
$attr_model->load(73);

//Create an array to store the attribute data
$data = array();

//Create options array
$values = array(
    //15 is the option_id of the option in 'eav_attribute_option_value' table
    15 => array(
            0 => 'Apple'    //0 is current store id, Apple is the new label for the option
        ),
    16 => array(
            0 => 'HTC'
        ),
    17 => array(
            0 => 'Microsoft'
        ),
);

//Add the option values to the data
$data['option']['value'] = $values;

//Add data to our attribute model
$attr_model->addData($data);

//Save the updated model
try {
    $attr_model->save();
    $session = Mage::getSingleton('adminhtml/session');
    $session->addSuccess(
        Mage::helper('catalog')->__('The product attribute has been saved.'));

    /**
     * Clear translation cache because attribute labels are stored in translation
     */
    Mage::app()->cleanCache(array(Mage_Core_Model_Translate::CACHE_TAG));
    $session->setAttributeData(false);
    return;
} catch (Exception $e) {
    $session->addError($e->getMessage());
    $session->setAttributeData($data);
    return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:18:40.017

嗨，搜索后我发现一些代码可以保存我的属性值，然后我将它们存储在产品中。这是我的代码：

```
public static function getAttributeOptionId($arg_attribute, $arg_value,$id)
     {
        $id = $id;
        //load the attribute by attribute code
    $entityTypeID = Mage::getModel('eav/entity')->setType('catalog_product')->getTypeId();
    $attribute_model        = Mage::getModel('eav/entity_attribute');
    $attribute_options_model= Mage::getModel('eav/entity_attribute_source_table') ;

    $attribute_code         = $attribute_model->getIdByCode('catalog_product', $arg_attribute);
    $attribute              = $attribute_model->load($attribute_code);

    $attribute_table        = $attribute_options_model->setAttribute($attribute);
    $options                = $attribute_options_model->getAllOptions(false);
    $type =  $attribute->getBackendType();

 foreach($options as $option) {
        if ($option['label'] == $arg_value) {
           $arrk[] = $option['label'];
        }
    }

$optiont = self::getAttributeOptionValue($arg_attribute, $arg_value);

if(!$optiont){
    $value['option'] = array($arg_value,$arg_value);
    $result = array('value' => $value);
    $attribute->setData('option',$result);
    $attribute->save();
    $product = Mage::getModel('catalog/product')->load($id);
    $product->setMyAttribute($arg_attribute)->save();

 }
    return 0;

    }
    public function getAttributeOptionValue($arg_attribute, $arg_value) {
    $attribute_model        = Mage::getModel('eav/entity_attribute');
    $attribute_options_model= Mage::getModel('eav/entity_attribute_source_table') ;

    $attribute_code         = $attribute_model->getIdByCode('catalog_product', $arg_attribute);
    $attribute              = $attribute_model->load($attribute_code);

    $attribute_table        = $attribute_options_model->setAttribute($attribute);
    $options                = $attribute_options_model->getAllOptions(false);

    foreach($options as $option) {
        if ($option['label'] == $arg_value) {
            return $option['value'];
        }
    }

    return false;
}. 
```

其中 $arg_attribute 是属性代码，$arg_value 是他的值。Id 是特定 sku 的产品 ID。我将记录保存在我的自定义模块中。如果有人知道此代码的问题，请通知我。谢谢

# c - 如何在读取之前刷新串行端口？

> ID：15106049
> 
> 赞同：2
> 
> 时间：2013-02-27T07:03:06.370
> 
> 标签：c, windows, serial-port

我正在尝试让微控制器通过串行端口与 Windows PC 进行通信。

在我看来，Windows 正在缓冲 COM1 上的输入，因此如果我停止两个程序的运行，则仅重新启动 Windows 程序，它仍会从微控制器程序的上一次运行中接收一些输出。

在我打开 COM1 之后，我可以在开始读取之前如何刷新它的接收缓冲区吗？是否有函数调用来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T07:10:26.573

我相信您正在寻找的功能是[PurgeComm](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363428%28v=vs.85%29.aspx)，当您打开端口时，您将从 CreateFile() 获得的 HANDLE 传递给它。我不确定，但我相信每次打开它都会自动刷新串口。

但是，更好的方法是使用 ReadFile（或 ReadFileEx），直到遇到有意义的事情。为此目的，串行协议总是设计有一个或多个同步字节。除非您正在编写终端程序或类似程序，否则无论如何您都必须这样做，因为 Windows PC 将永远不会与微控制器同步。

# joomla - 如何制作安装在 joomla 1.5、joomla2.5 和 joomla3.0 上的单个 zip

> ID：15106055
> 
> 赞同：1
> 
> 时间：2013-02-27T07:03:36.773
> 
> 标签：joomla

我很沮丧。我没有得到任何关于如何为每个版本的 Joomla 制作单个 zip 文件的文档。

我想将我的组件保存在单个 zip 文件中，该文件也安装在 1.5、2.5 和 3.0 的任何 joomla 版本上。

请帮忙

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:59:35.623

您应该避免所有版本的软件包。但是如果你真的想要一个包，你可以在[Joomla 上找到更多信息！文档](http://docs.joomla.org/Making_single_installation_packages_for_Joomla!_1.5_and_2.5_series)。

# .htaccess - 使用分页系统在 htaccess 中重写 mod

> ID：15106056
> 
> 赞同：2
> 
> 时间：2013-02-27T07:03:37.367
> 
> 标签：.htaccess, mod-rewrite

我有以下代码可以正常工作

```
RewriteRule ^articles/([^/\.]+)/?$ articles.php?pid=$1 [L]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+articles\.php\?pid=([^\s&]+) [NC]
RewriteRule ^ http://www.mydomain.com/articles/%1? [R=301,L] 
```

问题是我有一个分页系统，我为我的分页系统向该页面发送了另一个变量，看起来像这样

```
&pageNum_getArticles=1#1 
```

我已经尝试过执行以下操作，但对我认为的哈希感到困惑

```
RewriteRule ^articles/([^/\.]+)/?$ articles.php?pid=$1&pageNum_getArticles=$2 [L]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+articles\.php\?pid=([^\s&]+)&pageNum_getArticles=([^\s&]+) [NC]
RewriteRule ^ http://www.mydomain.com/articles/%1/%2? [R=301,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:31:57.827

> 谢谢（你的）信息。那么是否有解决方案或者我必须更改寻呼系统？

是的。

您有 2 组可以协同工作的重写规则。第一条规则采用没有任何查询字符串的漂亮 URL，并在内部将其重写为 php 脚本。第二条规则采用丑陋的 php 脚本 URI 并将浏览器重定向到使用更好看的 URI。第一组是正确的。但是第二组使用相同的规则来路由到脚本。您需要为分页创建另一个分组，因为`$2`不会反向引用任何匹配项。

尝试：

```
# second match here---------------v
RewriteRule ^articles/([^/.]+)/([^/.]+)/?$ articles.php?pid=$1&pageNum_getArticles=$2 [L]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+articles\.php\?pid=([^\s&]+)&pageNum_getArticles=([^\s&]+) [NC]
RewriteRule ^ http://www.mydomain.com/articles/%1/%2? [R=301,L] 
```

请注意，如果您仍然想使用不使用分页的规则，则需要在有分页的规则**之后**有非分页规则。

此外，如果由于某种原因您的分页在没有 URL 片段的情况下无法工作，*并且如果该片段总是与分页号码相同*，您可以将其添加到重定向的末尾。但是你需要一个像faa建议的NE：

```
RewriteRule ^ http://www.mydomain.com/articles/%1/%2#%2? [R=301,L,NE] 
```

# javascript - javascript for循环的问题不是每次都执行

> ID：15106061
> 
> 赞同：2
> 
> 时间：2013-02-27T07:04:00.717
> 
> 标签：javascript, arrays

我正在使用此 JavaScript 代码来计算页面数组中的警报计数。

urls 是一个页面名称数组，count 是计数值。

我想提醒数组 url 的每一页中的计数值。

但是 for 循环并非一直在执行。我不知道会发生什么...任何人请帮我找出错误..

我`echo $_POST['suggest'];`在页面数组中使用。但我想使用 JavaScript 代码来接收建议的值并提醒它。如何使用 JavaScript 接收价值？

```
<script>
        $(document).ready(function () {
            var count = document.getElementById('display_visitor_number').innerHTML; //count
            var urls = document.getElementById('display_visitor_urls').innerHTML; //array of page names
            var myarr = urls.split(",");

            for (var i=1;i<myarr.length;i++)
            { 
                $.post(myarr[i],{suggest:count}, function(data) {
                    alert(data);
                });
            }

        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:16:19.060

如果字符串 urls 以 开头，在拆分之前它将有一个空字符串作为第一个值（这将导致 jquery 对当前页面进行 ajax 调用），您可能需要检查它并以 0 开头

```
<script>
        $(document).ready(function () {
            var count = document.getElementById('display_visitor_number').innerHTML; //count
            var urls = document.getElementById('display_visitor_urls').innerHTML; //array of page names
            var myarr = urls.split(",");

            for (var i=0;i<myarr.length;i++)
            { 
                if(myarr[i] !== '')$.post(myarr[i],{suggest:count}, function(data) {
                    alert(data);
                });
            }

        });
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T21:41:55.917

而不是使用`split`函数，你最好尝试正则表达式并匹配所有非空格字符序列。代替

```
var myarr = urls.split(","); 
```

和

```
var myarr = urls.match(/[^ ,]+/g) 
```

然后你应该开始`for`循环`var i=0`。

# timeout - 在 UAC 上调用 NSIS 中的嵌入式安装程序并超时

> ID：15106062
> 
> 赞同：0
> 
> 时间：2013-02-27T07:04:00.967
> 
> 标签：timeout, nsis, uac

我有一个具有“RequestExecutionLevel 用户”的 NSIS 安装程序。该安装程序包含一个具有“RequestExecutionLevel admin”的嵌入式 NSIS 安装程序。此子安装程序仅在某些情况下被调用。这样做是为了让某些管理员操作可以包含在子安装程序中，并且只有在必要时才会提示用户进行 UAC 批准。

我的问题是，我如何调用子安装程序，以便：
a）将提示用户使用 UAC 对话框（如果启用了 UAC），并且
b）如果用户不单击是或否，子安装程序将被终止在给定的时间段内。

我一直在使用 ShellExecWait ( [http://nsis.sourceforge.net/ShellExecWait](http://nsis.sourceforge.net/ShellExecWait) )，它运行良好，但不提供指定超时值的选项（即它将永远等待）。

请注意，我已经尝试过使用以下 NSIS 函数：
* ShellExecWait - 不允许超时
* ExecWait - 子安装程序失败，因为它继承了父安装程序的执行级别。
* ExecShell - 不允许超时
* nsExec::Exec - 子安装程序失败，因为它继承了父安装程序的执行级别。

我在这里变得非常绝望 - 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T17:24:42.687

UAC 并不是为了支持这一点而设计的，任何这样做的尝试都应该被视为 hack！

部分问题是您的进程中的 ShellExecuteEx 是提升操作的一部分，因此如果不终止线程或进程就无法终止它。为了解决这个问题，我允许设置充当我们可以杀死的中间人。这种设计的一个缺陷是 UAC 对话框在超时终止进程后仍然存在（UAC GUI 在以系统身份运行的许可.exe 中）这意味着用户可以在主安装程序消失后提升子安装程序！我只在 Win7 上对此进行了测试，如果父级消失了，UAC 不会启动新进程，但这可能是一个错误，或者至少该行为没有记录在 AFAIK 中，并且可能不应该在生产代码中使用！

```
Outfile "test.exe"
RequestExecutionlevel User

!include LogicLib.nsh
!include WinMessages.nsh
!include FileFunc.nsh

Page Instfiles

!macro ElevateWithTimeout_OnInit
${GetParameters} $0
${GetOptions} $0 '--ExecTimer' $1
${If} $1 != ""
    StrCpy $1 $0 "" 12
    ExecShell 'runas' $1 ;RunAs is not really required as long as the .exe has a manifest that requests elevation...
    Quit
${EndIf}
!macroend
Function ElevateWithTimeout
InitPluginsDir
System::Call '*(&i60,tsr1)i.r0'
StrCpy $1 "--ExecTimer $1"
System::Call '*$0(i 60,i 0x40,i $HwndParent,i0,t"$ExePath",tr1,to,i1)i.r0'
System::Call 'shell32::ShellExecuteEx(ir0)i.r1'
System::Call '*$0(i,i,i,i,i,i,i,i,i,i,i,i,i,i,i.r2)'
System::Free $0
Pop $0 ; Timeout (MS)
${If} $1 <> 0
    System::Call 'kernel32::WaitForSingleObject(ir2,ir0)i.r0'
    ${If} 0x102 = $0 ;WAIT_TIMEOUT
        System::Call 'kernel32::TerminateProcess(ir2,i666)'
    ${EndIf}
    System::Call 'kernel32::CloseHandle(ir2)'
${EndIf}
FunctionEnd

Function .onInit
!insertmacro ElevateWithTimeout_OnInit
FunctionEnd

Section
Push 30000
Push "regedit.exe"
call ElevateWithTimeout
SectionEnd 
```

为了创建一个更安全、更强大的解决方案，子安装程序必须在游戏中并知道如果父项不在，何时中止自己，但是在纯 NSIS 代码中这样做是太多的工作。

我可能会建议您放弃超时要求并`RequestExecutionlevel highest`在外部安装程序中使用，并且仅在您是管理员（）时才运行子程序`UserInfo::GetAccountType`。

# java - 如何在 Sybase 中使用通用连接池 (UCP)？

> ID：15106063
> 
> 赞同：0
> 
> 时间：2013-02-27T07:04:01.093
> 
> 标签：java, database, jdbc, connection-pooling, sap-iq

尝试在独立 Java 应用程序中配置连接池。使用 UCP 和 Sybase DB。我被困在用于 Sybase 的连接工厂类名上。

尝试使用 com.sybase.jdbc4.jdbc.SybConnectionPoolDataSource 但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T05:59:43.913

这就像从某个 props 文件中使用连接一样，只是您首先创建一个 DataSource 对象，然后从 DataSource 中检索您的连接。我不能给你一个比这里的 Sybase 文档更好的例子了......

[Jconnect 7 (Jconn4) 文档...滚动到第 9 页](http://infocenter.sybase.com/help/topic/com.sybase.infocenter.dc39001.0700/pdf/prjdbc0700.pdf)

# jsf - 在鼠标悬停时渲染一个 jsf 元素

> ID：15106068
> 
> 赞同：0
> 
> 时间：2013-02-27T07:04:12.613
> 
> 标签：jsf, jsf-2

我有一个`<h:panelGrid>`和一个`h:commandLink`（链接基本上是一个图像）。现在我想要在 mouseover 事件上，然后链接应该是渲染`(render='true')`和 mouseout 事件，它被删除`render='false'`。
但是我无法创建如何使用这些事件执行此操作的逻辑，因为我使用的方法是设置 bean`true`和`false`此事件的值。
这是我的代码

```
<h:form>
        <h:panelGrid mouseover='** we cannot call a bean method here which changes the bean value **'>

        This is the Div On which I want to apply mouseover event
        </h:panelGrid>

        <h:commandLink id="btn" render={renderBean.renderLink}>
        <h:graphicImage url="image.jpg"/>
        </h:commandLink>

    </h:form> 
```

`renderLink`属性的默认值为`renderBean`false。*现在我想知道如何将其值更改为`true`鼠标悬停事件？*可能吗？**或**JSF 中的任何其他解决方案都符合此要求

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:15:32.630

您必须记住，在 JSF 中，页面将首先由 Web 服务器中的 JSF 引擎在服务器端进行处理。那时所有的 JSF 标记都将被转换成它们的 HTML 等价物。该`render`属性告诉服务器端引擎是否输出 HTML `a`（锚）链接来代替`<h:commandLink>`元素。

您正在寻找的行为，即响应鼠标事件，是客户端功能。它发生在浏览器中，而不是 Web 服务器中，因此不涉及 JSF。解决方案是在 JavaScript 而不是 JSF 中处理鼠标事件。您通常会`display:none`在被调用的 id 上设置（或删除）CSS 属性`btn`（不幸的是，它稍微复杂一些，因为 JSF 会稍微破坏元素 id）。StackOverflow 上有很多关于如何在 JavaScript 中处理客户端事件的帖子。例如，使用 jQuery 是一种非常常见的方法。

我建议您首先查看我们最好的 JSF 资源之一和 StackOverflow 长期用户 BalusC 的博客：http: [//balusc.blogspot.com](http://balusc.blogspot.com)。

有很多东西要学，首先去那里（并在 SO 上搜索他的帖子）你会得到一个好的开始。

祝你好运。

# extjs - extjs 4 html 编辑器提交问题

> ID：15106071
> 
> 赞同：2
> 
> 时间：2013-02-27T07:04:25.263
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我的 extjs 表单中有一个 html 编辑器 我用于 html 编辑器的代码是

```
{
                                  xtype: 'htmleditor',
                                  enableColors: false,
                                  enableAlignments: false,
                                  fieldLabel: 'Test',
                                  name      : 'test'
                            }, 
```

但是当我尝试提交它时，不要提交并给出下面的错误，

```
 TypeError: this.iframeEl is undefined
    [Break On This Error]   

    try { 
```

在 extjs-debug.js 下。什么是克服它的解决方案。

* * *

下面是我的提交代码。

```
form.submit({
                url: 'some url',
                success: function(fp, o) {

                    Ext.Msg.alert('Status', 'Success');
                    window.location.reload();
                },
                failure: function(fp, o) {
                    Ext.Msg.alert('Status', 'Failed');
                }  
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:37:07.253

此 TypeError 通常在对象为`undefined`. 在您的情况下`this`，没有`iframeEl`属性的对象。

库中抛出的错误有 99% 是您自己的错；）

# objective-c - 通过单击停靠栏中的应用程序图标打开登录窗口

> ID：15106073
> 
> 赞同：0
> 
> 时间：2013-02-27T07:04:29.687
> 
> 标签：objective-c, cocoa

关闭应用程序后，当我单击 Dock 上的应用程序图标时，我需要它来打开登录窗口。我用过，

```
 -(BOOL)applicationShouldHandleReopen:(NSApplication *)sender hasVisibleWindows:(BOOL)flag
  {
  return YES;
  }

 - (BOOL)windowShouldClose:(id)sender {
   [[NSApplication sharedApplication] hide:self];
   // [NSBundle loadNibNamed:@"MainMenu" owner:self];
   return YES;
  } 
```

但是当我点击停靠栏上的图标时，登录窗口没有被加载。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:44:28.520

要在登录窗口关闭时关闭应用程序（假设它是应用程序中唯一打开的窗口），您可以[`applicationShouldTerminateAfterLastWindowClosed:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSApplicationDelegate/applicationShouldTerminateAfterLastWindowClosed%3a) 在应用程序的委托中实现：

```
- (BOOL)applicationShouldTerminateAfterLastWindowClosed:(NSApplication *)app 
{
    return YES;
} 
```

# ios - iOS，尝试使用 UIGraphicsGetImageFromCurrentImageContext 呈现“变换缩放”视图时出现意外结果

> ID：15106089
> 
> 赞同：1
> 
> 时间：2013-02-27T07:05:49.280
> 
> 标签：ios, uiview, uiimageview, render

我正在尝试使用 UIGraphicsGetImageFromCurrentImageContext 进行转换后呈现视图及其内容。即使视图按比例缩小，当我渲染它时，图像大小是正确的，但内容会以其原始大小渲染（在这种情况下，它们被裁剪而不是按预期适合视图。

![在此处输入图像描述](../Images/6e08b2505cb12c310e6df428a941857f.png)

这是一个简单的示例项目： http: [//owolf.net/uploads/StackOverflow/ParentChildTransformTester.zip](http://owolf.net/uploads/StackOverflow/ParentChildTransformTester.zip)

进一步解释：我创建了一个父视图和一个子视图，将子视图添加为子视图。然后我转换缩放父视图，它也调整了子视图的大小（就像我想要的那样）。然后我以父视图的当前帧大小创建一个图像上下文，并进行渲染。代码如下。

```
//create views
UIView *parentView = [[UIView alloc]initWithFrame:self.view.bounds];
[parentView setBackgroundColor:[UIColor orangeColor]];
[self.view addSubview:parentView];

UIView *childView = [[UIView alloc]initWithFrame:CGRectMake(10, 10, 100, 100)];
[childView setBackgroundColor:[UIColor redColor]];
[parentView addSubview:childView];

//log parent view size : result is device screen size
NSLog(@"parentView.frame.size, BEFORE tran: %f x %f", parentView.frame.size.width, parentView.frame.size.height);

float scaleFactor = 0.2;
CGAffineTransform trans = CGAffineTransformScale(CGAffineTransformIdentity, scaleFactor, scaleFactor);
parentView.transform = trans;

//log parent view size after transform :  result is device screen size * 0.2
NSLog(@"parentView.frame.size, AFTER tran: %f x %f", parentView.frame.size.width, parentView.frame.size.height);

//attemt to render and save scaled parent view.
CGSize renderSize = CGSizeMake(parentView.frame.size.width, parentView.frame.size.height);
UIGraphicsBeginImageContext(CGSizeMake(renderSize.width, renderSize.height));

[[parentView layer] renderInContext:UIGraphicsGetCurrentContext()];

UIImage *renderedImage;
renderedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIImageWriteToSavedPhotosAlbum(renderedImage, self, @selector(image:didFinishSavingWithError:contextInfo:), nil); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:20:26.087

在渲染图层之前，您需要将转换应用于当前转换矩阵：

```
...
CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextConcatCTM(ctx, [[parentView layer] affineTransform]);

[[parentView layer] renderInContext:ctx];
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:29:31.543

这有效：根据上面 Graver 的回答进行了修改。

```
UIGraphicsBeginImageContext(parentView.frame.size);
CGContextRef ctx = UIGraphicsGetCurrentContext();
CGContextConcatCTM(ctx, [[parentView layer] affineTransform]);
[[parentView layer] renderInContext:UIGraphicsGetCurrentContext()];
renderedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(renderedImage, self, @selector(image:didFinishSavingWithError:contextInfo:), nil); 
```

# java - 如何使用单击按钮打印页面内容（div、form、jqgrid）？

> ID：15106092
> 
> 赞同：0
> 
> 时间：2013-02-27T07:06:16.610
> 
> 标签：java, javascript, jquery

即当我从我的页面单击按钮时，所需的页面内容应该打印在一张纸上。这里的主要目标是，它不应该向我显示要求确定或取消按钮的页面的打印对话框/打印预览，我们还可以在其中选择特定页面的多个打印。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:18:52.363

Create a print.js file by this code :

```
// -----------------------------------------------------------------------

(function($) {
    var opt;

    $.fn.jqprint = function (options) {
        opt = $.extend({}, $.fn.jqprint.defaults, options);

        var $element = (this instanceof jQuery) ? this : $(this);

        if (opt.operaSupport && $.browser.opera) 
        { 
            var tab = window.open("","jqPrint-preview");
            tab.document.open();

            var doc = tab.document;
        }
        else 
        {
            var $iframe = $("");

            if (!opt.debug) { $iframe.css({ position: "absolute", width: "0px", height: "0px", left: "-600px", top: "-600px" }); }

            $iframe.appendTo("body");
            var doc = $iframe[0].contentWindow.document;
        }

        if (opt.importCSS)
        {
            if ($("link[media=print]").length > 0) 
            {
                $("link[media=print]").each( function() {
                    doc.write("");
                });
            }
            else 
            {
                $("link").each( function() {
                    doc.write("");
                });
            }
        }

        if (opt.printContainer) { doc.write($element.outer()); }
        else { $element.each( function() { doc.write($(this).html()); }); }

        doc.close();

        (opt.operaSupport && $.browser.opera ? tab : $iframe[0].contentWindow).focus();
        setTimeout( function() { (opt.operaSupport && $.browser.opera ? tab : $iframe[0].contentWindow).print(); if (tab) { tab.close(); } }, 1000);
    }

    $.fn.jqprint.defaults = {
        debug: false,
        importCSS: true, 
        printContainer: true,
        operaSupport: true
    };

    // Thanks to 9__, found at http://users.livejournal.com/9__/380664.html
    jQuery.fn.outer = function() {
      return $($('').html(this.clone())).html();
    } 
})(jQuery);

```

And then include your print.js on an html page and see the demo of this :

```
<script>
jQuery(document).ready(function () {
    jQuery("#printBtn").click(function(){
    jQuery("#print").jqprint();
    });
});
</script>
<input type="button" id="printBtn" value="Print" />
<div id="print">
This will print this content.
</div>

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:16:18.350

您的目标浏览器是什么？有一些浏览器特定的方法可以做到这一点。

对于 IE：

```
<script language='VBScript'>
Sub Print()
       OLECMDID_PRINT = 6
       OLECMDEXECOPT_DONTPROMPTUSER = 2
       OLECMDEXECOPT_PROMPTUSER = 1
       call WB.ExecWB(OLECMDID_PRINT, OLECMDEXECOPT_DONTPROMPTUSER,1)
End Sub
document.write "<object ID='WB' WIDTH=0 HEIGHT=0 CLASSID='CLSID:8856F961-340A-11D0-A96B-00C04FD705A2'></object> 
</script>

window.print(); 
```

参考：[msdn 博客](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/86eaeda9-c868-4d20-95b8-3b9bc2e19cc6/)

# linux - 为什么 Doxygen 会创建这么多空文件夹？

> ID：15106093
> 
> 赞同：3
> 
> 时间：2013-02-27T07:06:37.180
> 
> 标签：linux, hash, filesystems, directory, doxygen

在我的代码库上运行[Doxygen](http://www.doxygen.nl/index.html)
`html`后，它创建了两个新目录：和`latex`.

两者都包含文档文件，以及许多这些空文件夹：

```
/html
├── d0
│   ├── d00
│   ├── d01
│   ├── d02
│   ├── d03
│   ├── d04
│   ├── d05
│   ├── d06
|   ├── ...
├── d1
│   ├── d00
│   ├── d01
│   ├── d02
│   ├── d03
│   ├── d04
│   ├── d05
│   ├── d06
|   ├── ... 
```

好吧..并非所有人都是空的..里面很少有文件。

```
│   ├── d3a
│   ├── d3b
│   │   └── solarpower_8h_source.html
│   ├── d3c
│   ├── d3d 
```

这一切是什么？某种目录哈希表？为什么？
我认为它不是特定于 Doxygen 的，因此将不胜感激任何与实践的链接。

**编辑：**
找到了。
[http://www.doxygen.nl/manual/config.html#cfg_create_subdirs](http://www.doxygen.nl/manual/config.html#cfg_create_subdirs)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:58:27.587

`CREATE_SUBDIRS`在 doxygen 的配置文件中启用时会发生这种情况。如果您有一个包含数万个输出文件的大型项目，这可以帮助避免在某些文件系统上缓慢的目录访问。

# android - 后退按钮上的片段导航

> ID：15106094
> 
> 赞同：0
> 
> 时间：2013-02-27T07:06:40.450
> 
> 标签：android, android-layout, android-intent

我有一个片段，它有一个上下文菜单，它又调用另一个片段：

```
switch (item.getItemId())
            {
 case MENU_EDIT:
                 FragmentTransaction ft =getActivity().getFragmentManager().beginTransaction();
                 PlayListDetailsView fragment=new PlayListDetailsView();
                 //fragment.getArguments().putLong("id", (Long)info.id);
                 ft.add(android.R.id.content, fragment);
                 ft.attach(fragment);
                 ft.commit();
} 
```

新片段可以正常打开，但是一旦我按下应用程序就会完全退出，而我们不会返回调用它的片段。此外，尝试添加捆绑信息的注释行失败，无法在名为 Suggest a fix please 的片段中检索 :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:13:54.347

您必须在调用提交之前调用[addToBackstack()](http://developer.android.com/reference/android/app/FragmentTransaction.html#addToBackStack%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T07:19:30.300

首先片段应该通过活动进行通信，而不是直接：http: [//developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

至于你的问题：

1.  为了使返回键正常工作，您应该将事务添加到返回堆栈，将其放在提交之前：

    ```
    ft.addToBackStack("playlistdetails"); 
    ```

2.  应该像这样添加参数：

    ```
    Bundle args = new Bundle();
    args.putLong("id", (Long)info.id);
    fragment.setArguments(args); 
    ```

# python - 如何使用 IEHtmlWindow 小部件更改 html 表单

> ID：15106096
> 
> 赞同：0
> 
> 时间：2013-02-27T07:06:43.397
> 
> 标签：python, wxpython

全部

我想用 wx.lib.iewin 开发一个软件。该软件包括一个ie框架和三个按钮。当我单击一个按钮时，ie 框架可以单击“google.com”之类的 url，然后单击另一个按钮可以在 google.com 的搜索输入表单中设置一些值。最后一个按钮可以点击 google.com 的搜索按钮。

我知道如何浏览谷歌网址。

```
 self.ie = iewin.IEHtmlWindow(self.panel_left,pos=wx.DefaultPosition, size=(465,560),style=wx.html.HW_SCROLLBAR_AUTO)
    self.ie.AddEventSink(self.panel_left)
    self.ie.Navigate('http://google.com') 
```

但是'我怎样才能得到 ie 的文件。并更改 dom 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:42:39.643

文档对象应该可以作为`self.ie.ctrl.Document`.

# c# - websocket / stomp 连接到 ActiveMQ

> ID：15106097
> 
> 赞同：1
> 
> 时间：2013-02-27T07:06:45.433
> 
> 标签：c#, websocket, activemq, stomp

我正在尝试通过 websockets / stomp 功能将网页与 ActiveMQ 连接起来。我正在使用 stomple.js，但在 google chrome 控制台中出现以下错误：

WebSocket 连接到“ws://localhost:61614/stomp”失败：意外响应代码：500

ActiveMQ 配置如下：

```
 <transportConnectors>
        <transportConnector name="openwire" uri="tcp://0.0.0.0:61616"/>
    <transportConnector name="stomp" uri="stomp://0.0.0.0:61613?transport.closeAsync=false"/>
    <transportConnector name="websockets" uri="ws://0.0.0.0:61614"/>
    <transportConnector name="stomp+nio" uri="stomp+nio://0.0.0.0:61615?transport.closeAsync=false"/>
    </transportConnectors> 
```

我正在使用的javascript：

```
<script type="text/javascript">
$(document).on("pageinit", "#myActiveGamesPage", function () {
        function begin() {
            client.begin({});
        }
        function commit() {
            client.commit({});
        }
        function abort() {
            client.abort({});
        }
        function disconnect() {
            client.disconnect({ success: function () { console.log("dis"); }, failure: function () { console.log(42); } });
        }
        function reset() {
        }
        function sendMsg() {
            var message = 'hola mundo';
            client.send({
                body: client.session + ": " + message,
            });
        }
        if(!Stomple){
            console.log("NO STOMPLE");
        }else{
            console.log("STOMPLE");
            Stomple.debug = true;
            var client = Stomple.create_client({
                url: "ws://localhost:61614/stomp",
                destination: "XXXXXXXXXXXXXXX",
                login: "guest",
                passcode: "guest",
                socketOpen: function() {
                    console.log("socket opened");
                },
                socketMessage: function(msg) {
                    console.log("socket msg");
                    console.log(msg);
                },
                socketClose: function(e) {
                    console.log("socket close");
                    console.log(e);
                },
                socketError: function() {
                    console.log("socket error");
                    console.log(client.websocket);
                    return false;
                }
            });
            var msgHandler = {
                fn: function(msg) {
                    alert(msg.body);
                }
            };
            client.subscribe({
                handler: msgHandler.fn,
                thisObj: msgHandler,
                success: function() {//did subscription succeed?
                    console.log("sub ok..");
                },
                failure: function(reason) {//did subscription fail?
                    console.log(reason);
                }
            });
        }
}); 
```

我无法检查客户端向服务器发送的内容（标头），因为它使用二进制格式，并且 chrome 开发工具的网络选项卡显示为空。

我还尝试以相同的结果禁用 Windows 防火墙。

我没有找到这方面的任何文档，并且我认为没有必要在服务器中开发任何额外的东西，因为 ActiveMQ 提供端点并支持协议。

有人有这个工作的详细例子或可能的原因吗？

# python - 为 python 安装 pyquery

> ID：15106098
> 
> 赞同：0
> 
> 时间：2013-02-27T07:06:52.267
> 
> 标签：python, windows, versioninfo

我想安装 pyquery 我有 lxml-2.2.2 文件夹我不知道如何继续我已经尝试过

```
 setup.py install 
```

在 cmd 提示符下

```
 C:\Python27\Scripts>setup.py install
  Traceback (most recent call last):
  File "C:\Python27\Scripts\setup.py", line 27, in <module>
  import versioninfo
  ImportError: No module named versioninfo 
```

我收到此错误，任何人都可以指导我安装 pyquery 提前谢谢

# java - 将桌面应用程序转换为服务器+浏览器应用程序

> ID：15106100
> 
> 赞同：2
> 
> 时间：2013-02-27T07:07:00.427
> 
> 标签：java, json, jquery, web-applications, desktop-application

我对 Web 开发比较陌生，但我有一些 C++/Java 经验。我有以下转换要做：

**当前：** 使用 C# 开发的桌面应用程序（自动化软件），使用 Web 上的 TCP 套接字与远程 PLC（实时俯瞰不同传感器的控制器）进行通信。

**我的想法：** 将应用程序转换为服务器端软件，该软件仍将通过 TCP/Socket 与 PLC 通信。并使用浏览器进行操作，这样远程站点就可以从我们内网中的任何一台计算机（未来可能是平板电脑）上进行监控和控制。

**这样做的动机：** 我们遇到了计算机故障，导致操作员无法控制。

**新应用：**

我计划使用 Java 和 OOP 编写服务器应用程序（到目前为止没问题）。并为 WebApp 和 AJAX 使用 HTML/CSS/Javascript 来更新页面。但是我仍然迷失在如何以适当和体面的方式在它们之间传输所有这些数据。我在这篇[文章](https://stackoverflow.com/questions/4532566/to-soap-or-not-to-soap-that-is-the-question)中阅读了有关 SOAP 和 JSON 的内容。虽然，我不确定是否需要使用它们，但使用 JSON 或 SOAP 是否是一个好的解决方案？或者您还有其他可以推荐的解决方案吗？

干杯，狮子座

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-02-11T19:17:11.260

如果您考虑跳过开发工作将您的应用程序转换为服务器端软件而只寻求第三方解决方案，我建议您看看 Thinfinity VirtualUI。

“...为内部 Windows 桌面开发提供 GUI 远程处理解决方案，只需添加一行代码即可将它们作为 Windows/HTML5 双平台应用程序交付。这些 Windows 应用程序可以保持其标准桌面环境行为，并且，或者，当托管在 Thinfinity VirtualUI Server 环境中时，可以从任何现代 Web 浏览器以多用户、多实例方式远程访问。”

[https://www.cybelesoft.com/docs/thinfinity_virtualui_whitepaper.pdf](https://www.cybelesoft.com/docs/thinfinity_virtualui_whitepaper.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:24:12.237

SOAP 用于定义在 Internet 上发布以供其他人使用的公共 API，这看起来不像您的用例。尽管有 javascript SOAP 客户端库，但必须从浏览器内部处理它也不是特别棒。与 JSON 和 POJO 之间的反序列化/序列化相比，服务器端解析和验证 XML 的开销也会更多。

JSON 在浏览器中更容易处理，可以被原生理解等等。您需要的一切都内置在 jQuery 的核心中，不依赖于未来可能具有未知支持级别的插件。

# google-chrome - 改进 Chrome 上的触摸屏处理

> ID：15106101
> 
> 赞同：1
> 
> 时间：2013-02-27T07:07:00.573
> 
> 标签：google-chrome, windows-8

我正在开发一个 Web 应用程序，它将在 Chrome 上的 Windows 8 上的本地服务器上运行。不幸的是，Chrome 似乎不能很好地处理触摸事件。例如，通常不是单击按钮，而是选择它。有什么办法可以让它表现得更像原生触摸屏应用程序吗？

我不能让它成为 Metro 应用程序，因为我需要与 Python 服务通信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:26:32.317

我已经在带有触摸屏的 Chrome 中进行了一些测试，但似乎没有遇到这个问题（当然不怀疑你是！）。如果您有网站，我会非常乐意查看。

一种选择是尝试将内容缩放得更大，我想知道您的触摸表面是否对触摸时的微小移动非常敏感，并将其视为触摸/滚动，即选择。在尝试任何 css 缩放转换之前在浏览器中尝试一个简单的测试，首先增加大小（我不确定这种方法的效果如何）

它在什么类型的硬件上进行测试？

你能详细说明一下python服务吗？服务的哪一部分使它无法与它交互？它只是一个http服务对象还是其他东西？

# c++ - 如何使用具有类似 printf 格式的 C++ std::ostream？

> ID：15106102
> 
> 赞同：50
> 
> 时间：2013-02-27T07:07:00.870
> 
> 标签：c++, formatting, printf, ostream

我正在学习 C++。`cout`是`std::ostream`类的一个实例。如何用它打印格式化的字符串？

我仍然可以使用`printf`，但我想学习一种可以利用所有 C++ 优点的正确 C++ 方法。我认为这应该是可能的`std::ostream`，但我找不到正确的方法。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-27T07:13:56.093

您唯一可以`std::ostream`直接使用的是众所周知的`<<`- 语法：

```
int i = 0;
std::cout << "this is a number: " << i; 
```

并且有各种[*IO 操纵器*](http://en.cppreference.com/w/cpp/header/iomanip)可用于影响整数、浮点数等的格式、位数等。

但是，这与`printf`. C++11 不包括任何允许您以与使用它的方式相同的方式使用字符串格式的工具`printf`（除了`printf`它本身，如果您愿意，您当然可以在 C++ 中使用它）。

就提供`printf`-style 功能的库而言，有[`boost::format`](http://www.boost.org/doc/libs/1_53_0/libs/format/doc/format.html)，它启用了这样的代码（从概要复制）：

```
std::cout << boost::format("writing %1%,  x=%2% : %3%-th try") % "toto" % 40.23 % 50; 
```

另请注意，在标准的未来版本中提出了包含 -style 格式的[建议。](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3716.html)`printf`如果这被接受，可能会出现如下语法：

```
std::cout << std::putf("this is a number: %d\n",i); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2020-12-07T16:33:42.703

在 C++20 中，您将能够使用类似[`std::format`](https://en.cppreference.com/w/cpp/utility/format)安全`printf`的格式：

```
std::cout << std::format("The answer is {}.\n", 42); 
```

除此之外，基于[{fmt} 库](https://github.com/fmtlib/fmt)，`std::format`还提供了`print`结合格式化和输出的功能：

```
fmt::print("The answer is {}.\n", 42); 
```

**免责声明**：我是 {fmt} 和 C++20 的作者`std::format`。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2020-01-27T17:14:05.753

这是我习以为常的成语。希望它有所帮助：

```
// Hacky but idiomatic printf style syntax with c++ <<

#include <cstdlib> // for sprintf

char buf[1024]; sprintf(buf, "%d score and %d years ago", 4, 7);
cout << string(buf) <<endl; 
```

&

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2018-09-05T11:33:36.463

我建议使用 ostringstream 而不是 ostream 请参见以下示例：

```
#include <vector>
#include <string>
#include <iostream>
#include "CppUnitTest.h"

#define _CRT_NO_VA_START_VALIDATION

std::string format(const std::string& format, ...)
{
    va_list args;
    va_start(args, format);
    size_t len = std::vsnprintf(NULL, 0, format.c_str(), args);
    va_end(args);
    std::vector<char> vec(len + 1);
    va_start(args, format);
    std::vsnprintf(&vec[0], len + 1, format.c_str(), args);
    va_end(args);
    return &vec[0];
} 
```

示例用法：

```
std::ostringstream ss;
ss << format("%s => %d", "Version", Version) << std::endl;
Logger::WriteMessage(ss.str().c_str()); // write to unit test output
std::cout << ss.str() << std::endl; // write to standard output 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-12-02T22:49:50.960

要实现 printf，可以使用 c++11 模板参数：

```
#include <iostream>
#include <string>

inline std::ostream & mprintf(std::ostream & ostr, const char * fstr) throw()
{
    return ostr << fstr;
}

template<typename T, typename... Args> 
std::ostream & mprintf(std::ostream & ostr, 
        const char * fstr, const T & x) throw()
{
    size_t i=0;
    char c = fstr[0];

    while (c != '%')
    {
        if(c == 0) return ostr; // string is finished
        ostr << c;
        c = fstr[++i];
    };
    c = fstr[++i];
    ostr << x;

    if(c==0) return ostr; // 

    // print the rest of the stirng
    ostr << &fstr[++i];
    return ostr;
}

template<typename T, typename... Args> 
std::ostream & mprintf(std::ostream & ostr,
        const char * fstr, const T & x, Args... args) throw()
{
    size_t i=0;
    char c = fstr[0];

    while (c != '%')
    {
        if(c == 0) return ostr; // string is finished
        ostr << c;
        c = fstr[++i];
    };
    c = fstr[++i];
    ostr << x;

    if(c==0) return ostr; // string is finished

    return mprintf(ostr, &fstr[++i], args...);
}

int main()
{
    int c = 50*6;
    double a = 34./67.;
    std::string q = "Hello!";

    // put only two arguments
    // the symbol after % does not matter at all
    mprintf(std::cout, "%f + %f = %a \n", c, a);

    // print string object: for real printf one should write q.c_str() 
    mprintf(std::cout, "message: \"%s\". \n", q);

    // the last argument will be ignored
    mprintf(std::cout, "%z + %f\n", (long)a, 12, 544 );

} 
```

**输出**

```
300 + 2 = %a 
message: "Hello!". 
2 + 12 
```

这是一个非常简单的代码，可以改进。

1）优点是它使用<<将对象打印到流中，因此您可以放置​​可以通过<<输出的任意参数。

2）它忽略格式化字符串中参数的类型：在 % 之后可以代表任意符号甚至是空格。输出流决定如何打印相应的对象。它还与 printf 兼容。

3) 缺点是不能打印百分号'%'，需要稍微改进一下代码。

4) 无法打印格式化数字，如 %4.5f

5) 如果参数的数量少于格式化字符串所预测的数量，则该函数只打印字符串的其余部分。

6) 如果参数的数量大于格式化字符串预测的数量，则忽略剩余的参数

可以改进代码以使 2)-6) 完全模仿 printf 行为。但是，如果您遵循 printf 的规则，则基本上只需要修复 3) 和 4)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-23T18:26:03.053

> # 场宽
> 
> 设置字段宽度非常简单。对于每个变量，只需在其前面加上“setw(n)”。像这样：
> 
> ```
> #include <iostream>
> #include <iomanip>
> 
> using namespace std;
> 
> int main()
> {
>   const int max = 12;
>   const int width = 6;
>   for(int row = 1; row <= max; row++) {
>       for(int col = 1; col <= max; col++) {
>           cout << setw(width) << row * col;
>       }
>       cout << endl;
>   }
>   return 0;
> } 
> ```
> 
> 请注意“setw(n)”如何控制字段宽度，因此每个数字都打印在一个保持相同宽度的字段内，而不管数字本身的宽度如何。

- 来自[P. Lutus 的“编程/C++ 教程”](https://arachnoid.com/cpptutor/student3.html)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-09-01T14:28:29.050

我独立编写但想出了类似于 user3283405 的答案

我的解决方案使用 vasprintf() 来实现格式化，并使用 std::ostream 的 << 运算符重载在正确的位置释放内存。

用法：

```
std::cout << putf(const char *format, ...); //Same format as C printf(3) 
```

代码：

```
#define _GNU_SOURCE
#include <cstdarg>
#include <iostream>
#include <cstdio>

struct putf_r{
        char *s;
};

putf_r putf(const char *fmt, ...){
        va_list ap;
        va_start(ap, fmt);
        putf_r a;
#pragma GCC diagnostic push
#pragma GCC diagnostic ignored "-Wformat-nonliteral"
        vasprintf(&a.s, fmt, ap);
#pragma GCC diagnostic pop
        va_end(ap);
        return a;
}

std::ostream& operator<<(std::ostream& os, putf_r a){
        os<<a.s;
        free(a.s);
        return os;
}

int main(){
        std::cout << putf("%3d\n", 23) << putf("%a\n", 256.);
} 
```

请注意，编译器不会检查 putf() 中的格式，因此编译器标志 -Wformat-nonliteral 不会警告 putf() 中的可疑代码，您需要自己处理[不受控制的格式字符串](https://en.wikipedia.org/wiki/Uncontrolled_format_string)问题。
详细信息可以在[GitHub上找到](https://github.com/WingTillDie/CxxPrintf)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-12-20T15:12:37.177

样本输出：

```
2017-12-20T16:24:47,604144+01:00 Hello, World! 
```

代码（在 put_timestamp 中演示了 put_printf 的用法）：

```
#include <assert.h>
#include <chrono>
#include <iomanip>
#include <iostream>

class put_printf {
    static constexpr size_t failed = std::numeric_limits<size_t>::max(); // for any explicit error handling
    size_t stream_size; // excluding '\0'; on error set to 0 or to "failed"
    char buf_stack[2048+1]; // MAY be any size that fits on the stack (even 0), SHOULD be (just) large enough for most uses (including '\0')
    std::unique_ptr<char[]> buf_heap; // only used if the output doesn't fit in buf_stack
public:
    explicit put_printf(const char *format, ...)
            #if __GNUC__
            __attribute__ ((format (printf, 2, 3))) // most compelling reason for not using a variadic template; parameter 1 is implied "this"
            #endif
            {
        va_list args;
        va_start(args, format);
        const int res = vsnprintf(buf_stack, sizeof(buf_stack), format, args);
        va_end(args);
        if (res < 0) { // easily provoked, e.g., with "%02147483646i\n", i.e., more than INT_MAX-1 significant characters (only observed, no guarantee seen)
            stream_size = failed;
        } else if (res < sizeof(buf_stack)) { // preferred path
            stream_size = res;
        } else { // not artificially constrained
            try {
                const size_t buf_size = static_cast<size_t>(res) + 1; // avoids relying on "res < INT_MAX" (only observed, no guarantee seen)
                buf_heap.reset(new char[buf_size]); // observed to work even beyond INT_MAX=2^32-1 bytes
                va_start(args, format);
                if (vsnprintf(buf_heap.get(), buf_size, format, args) == res) stream_size = res;
                else stream_size = failed; // can't happen
                va_end(args);
            } catch (const std::bad_alloc&) { // insufficient free heap space (or an environment-specific constraint?)
                stream_size = failed;
            }
        }
    }
    friend std::ostream& operator<<(std::ostream& os, const put_printf& self) {
        if (self.stream_size == failed) {
            // (placeholder for any explicit error handling)
            return os;
        } else {
            // using write() rather than operator<<() to avoid a separate scan for '\0' or unintentional truncation at any internal '\0' character
            return os.write((self.buf_heap ? self.buf_heap.get() : self.buf_stack), self.stream_size);
        }
    }
};

class put_timestamp {
    const bool basic = false;
    const bool local = true;
public:
    friend std::ostream& operator<<(std::ostream& os, const put_timestamp& self) {
        const auto now = std::chrono::system_clock::now();
        const std::time_t now_time_t = std::chrono::system_clock::to_time_t(now);
        struct tm tm; if ((self.local ? localtime_r(&now_time_t, &tm) : gmtime_r(&now_time_t, &tm)) == nullptr) return os; // TODO: explicit error handling?
        static_assert(4 <= sizeof(int), "");
        const int microseconds = std::chrono::duration_cast<std::chrono::microseconds>(now.time_since_epoch() % std::chrono::seconds(1)).count();
        assert(0 <= microseconds && microseconds < 1000000); // TODO: (how) do we know?
        // TODO: doesn't "point" in "decimal_point()" imply "dot"/"full stop"/"period", unlike an obviously neutral term like "mark"/"separator"/"sign"?
        const char decimal_sign = std::use_facet<std::numpunct<char>>(os.getloc()).decimal_point() == '.' ? '.' : ','; // full stop accepted, comma preferred
        // TODO: all well and good for a locale-specific decimal sign, but couldn't the locale also upset microseconds formatting by grouping digits?
        os << std::put_time(&tm, self.basic ? "%Y%m%dT%H%M%S" : "%FT%T") << put_printf("%c%06i", decimal_sign, microseconds);
        if (! self.local) return os << "Z";
        const int tz_minutes = std::abs(static_cast<int>(tm.tm_gmtoff)) / 60;
        return os << put_printf(self.basic ? "%c%02i%02i" : "%c%02i:%02i", 0 <= tm.tm_gmtoff ? '+' : '-', tz_minutes / 60, tz_minutes % 60);
    }
};

int main() {
    // testing decimal sign
    ///std::cout.imbue(std::locale("en_GB"));
    ///std::cout.imbue(std::locale("fr_FR"));

    std::cout << put_timestamp() << " Hello, World!\n";
    #if 0
    typedef put_printf pf; // just to demo local abbreviation
    std::cout << "1: " << pf("%02147483646i\n"  , 1     ) << std::endl; // res < 0
    std::cout << "2: " << pf("%02147483643i%i\n", 1, 100) << std::endl; // res < 0
    std::cout << "3: " << pf("%02147483643i%i\n", 1,  10) << std::endl; // works
    std::cout << "4: " << pf("%02147483646i"    , 1     ) << std::endl; // works
    #endif
    return 0;
} 
```

关于 put_printf 的评论：

```
// Reasons for the name "put_printf" (and not "putf" after all):
// - put_printf is self-documenting, while using the naming pattern also seen in std::put_time;
// - it is not clear whether the proposed std::putf would support exactly the same format syntax;
// - it has a niche purpose, so a longer name is not an objection, and for frequent local uses
//     it is easy enough to declare an even shorter "typedef put_printf pf;" or so.
// Evaluation of delegating to vsnprintf() with intermediate buffer:
// (+) identical result without implementation and/or maintenance issues,
// (?) succeeds or fails as a whole, no output of successful prefix before point of failure
// (-) (total output size limited to INT_MAX-1)
// (-) overhead (TODO: optimal buf_stack size considering cache and VM page locality?)
// Error handling (an STL design problem?):
// - std::cout.setstate(std::ios_base::failbit) discards further std::cout output (stdout still works),
//     so, to be aware of an error in business logic yet keep on trucking in diagnostics,
//     should there be separate classes, or a possibility to plug in an error handler, or what?
// - should the basic or default error handling print a diagnostic message? throw an exception?
// TODO: could a function "int ostream_printf(std::ostream& os, const char *format, ...)"
//           first try to write directly into os.rdbuf() before using buf_stack and buf_heap,
//           and would that significantly improve performance or not? 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-02-07T10:24:14.983

当我需要 cout 的类型安全性和 printf() 简单变量的快速简便格式化时，我会像这样混合两者。这是一个丑陋的修复，但是当我需要输出诸如“02/07/2014 10:05am”之类的内容以及一些更复杂的实体时，它可以为我完成任务：

```
#include <stdio>
#include <stdarg>
#include <stdlib>
#include <iostream>

#pragma hdrstop

using namespace std;

char* print(char* fmt, ...)
{
    static char buffer[80] = "";

    va_list argptr;
    va_start(argptr,fmt);

    vsprintf(buffer, fmt, argptr);

    va_end(argptr);

    return buffer;
}

#pragma argsused
int main(int argc, char* argv[])
{

cout << print("\n%06d\n%6d\n%6d\n%010.3f",1,12,123,123.456);

system("PAUSE>NUL");

return 0;

} 
```

# php - php clearstatcache

> ID：15106103
> 
> 赞同：0
> 
> 时间：2013-02-27T07:07:11.280
> 
> 标签：php, file-exists

我正在测试 PHP clearstatchache 函数，如下所示：

```
//[1] First attempt to access non-existent file
 var_dump(file_exists("gates.txt")); 
```

返回假

```
//[2] Now manually create the file in the directory.
//[3] Run the script again. 
```

它返回真。

```
//[4] manually delete the file
//[5] run script once again 
```

返回假

现在根据我对 [http://www.php.net/manual/en/function.clearstatcache.php的以下行的理解](http://www.php.net/manual/en/function.clearstatcache.php)

“您还应该注意，PHP 不会缓存有关不存在文件的信息。因此，如果您对不存在的文件调用 file_exists()，它将返回 FALSE，直到您创建文件。如果您创建文件，即使您随后删除该文件，它也会返回 TRUE。”

手动删除文件后，该函数应返回 true。

任何解释都会有所帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:09:09.997

缓存只是**每个脚本运行**。

# ios - iOS：如何更改视频中的图片？

> ID：15106121
> 
> 赞同：0
> 
> 时间：2013-02-27T07:08:15.700
> 
> 标签：ios, video, uiimage, avfoundation

想把图片改成动画视频，但是不知道怎么做视频，不知道有什么好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:18:19.650

例如，将您的图像名称设为 xxxx-1.png、xxxx-2.png ...... xxxx-80.png。并粘贴下面的代码..然后图像将像视频一样动画。

```
NSMutableArray* imgArray = [[NSMutableArray alloc] init];

        for (int i=1; i <= 80; i++) {
            [imgArray addObject:[UIImage imageNamed:[NSString stringWithFormat:@"xxxx-%d.png",i]]];
        }
    UIImageView* imgView = [UIImageView alloc] initWithFrame:(x,y,a,b)];
    imgView.animationImages = imgArray;
    imgView.animationDuration = 0.25;
    imgView.animationRepeatCount = 0;
    [imgView startAnimating];
    [self.view addSubview:imgView];
    [imgView release]; 
```

# c# - 设置 Gridview 控件的背景色，当它被启用或禁用时

> ID：15106123
> 
> 赞同：0
> 
> 时间：2013-02-27T07:08:34.457
> 
> 标签：c#, asp.net, gridview, page-lifecycle

在我的 gridview 控件中，根据用户角色启用或禁用。我想将启用控件的背景颜色更改为黄色。我已尝试`RowCreated`按如下方式进行操作，但当时所有单元格均已启用。

```
protected void begv_OrderDetail_RowCreated(object sender, GridViewRowEventArgs e)
{
     foreach (TableCell cell in e.Row.Cells)
     {
          if (cell.Enabled == true)
          {
          }
          else
          {
             //Never enters this area
          }

     }
} 
```

这是我在网格视图中启用或禁用控件的示例字段。

```
 <asp:TemplateField HeaderText="ReasonCode" SortExpression="ReasonCode">
        <HeaderTemplate>
            <asp:Label ToolTip="ReasonCode" runat="server" Text="RC"></asp:Label>
        </HeaderTemplate>
        <EditItemTemplate>
            <asp:TextBox ID="txt_ReasonCode" onchange="disableNextStatusButtons()" runat="server" Text='<%# Bind("ReasonCode") %>'
                Enabled='<%# (Roles.IsUserInRole("İhracat Uzmanı") && Session["Status"].ToString()=="3") %>'
                Width="40px"></asp:TextBox>
        </EditItemTemplate>
    </asp:TemplateField> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:25:12.837

您可以通过以下步骤

1.  检查 RowDatabound 上的用户角色
2.  在 RowDatabound 上更改行的颜色

    ```
    protected void RowDataBound(Object sender, GridViewRowEventArgs e)
    {
        if(e.Row.RowType == DataControlRowType.DataRow)
        {
            //check role
             if (condition)
               e.Row.BackColor = Color.Red;
             else
               e.Row.BackColor = Color.Green;  
            //or set you individual control background 
             //get any control
              var chk = (CheckBox)e.Row.FindControl("chkb");
             //set background
              chk.BackColor = Color.Red;//etc
         }
    } 
    ```

您可以将 css 动态设置为文本框`CssClass="yourcss"`

```
 <asp:TextBox ID="txt_ReasonCode" onchange="disableNextStatusButtons()" runat="server" Text='<%# Bind("ReasonCode") %>'
                Enabled='<%# (Roles.IsUserInRole("İhracat Uzmanı") && Session["Status"].ToString()=="3") %>'
                CssClass='<%# (Roles.IsUserInRole("İhracat Uzmanı") && Session["Status"].ToString()=="NormalCss").ToString()=="true"?"yellowcss":"othercss"  %>'
                Width="40px"></asp:TextBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:53:14.233

您也可以`BackColor`使用数据绑定语法设置

```
<asp:TextBox ID="txt_ReasonCode" 
             onchange="disableNextStatusButtons()" 
             runat="server"
             Text='<%# Bind("ReasonCode") %>'
             Enabled='<%# (Roles.IsUserInRole("İhracat Uzmanı") && Session["Status"].ToString()=="3") %>'
             BackColor='<%# (Roles.IsUserInRole("İhracat Uzmanı") && Session["Status"].ToString()=="3") ? System.Drawing.Color.Red: System.Drawing.Color.Green %>'
             Width="40px">
</asp:TextBox> 
```

有点难看，但会工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:13:12.963

> 在 Gridview 的 RowDataBound 事件中尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T07:14:08.000

尝试使用 DataBound 事件遍历所有单元格并更新 bg。

# python - 使用 hive 转换功能时遇到错误

> ID：15106127
> 
> 赞同：3
> 
> 时间：2013-02-27T07:08:59.977
> 
> 标签：python, transform, hive

`java.lang.RuntimeException: Hive Runtime Error while closing operators at org.apache.hadoop.hive.ql.exec.ExecMapper.close(ExecMapper.java:226) at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57) at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:436) at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372) at org.apache.hadoop.mapred.Child$4.run(Child.java:255) at java.security.AccessController.doPrivileged(Native Method) at javax.security.auth.Subject.doAs(Subject.java:396) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1136) at org.apache.hadoop.mapred.Child.main(Child.java:249) Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: [Error 20003]: An error occurred when trying to close the Operator running your custom script. at org.apache.hadoop.hive.ql.exec.ScriptOperator.close(ScriptOperator.java:486) at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:567) at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:567) at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:567) at org.apache.hadoop.hive.ql.exec.ExecMapper.close(ExecMapper.java:193) ... 8 more` HQL 脚本如下：

```
SELECT
  TRANSFORM (userid, movieid, rating)
  USING 'python /home/daxingyu930/test_data_mapper2.py'
  AS userid, movieid, rating
; 
```

python脚本很简单，`\t`用来分割线。

我已经使用以下 shell 脚本在 Linux 中测试了 python 脚本：

```
cat test_data/u_data.txt | python test_data_mapper2.py 
```

请给我一些关于这个问题的想法，它让我发疯，让我无法入睡。非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T10:27:54.223

在使用您的自定义脚本之前，您应该将您的脚本添加到分布式缓存中。

例如。

```
add file  /home/daxingyu930/test_data_mapper2.py;

SELECT
    TRANSFORM (userid, movieid, rating)
    USING 'python test_data_mapper2.py'
    AS userid, movieid, rating
; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-08T10:37:38.150

chmod +x test_data_mapper2.py。

然后从 hiveCl1 运行以下命令添加文件 /home/daxingyu930/test_data_mapper2.py ；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-11T07:33:32.063

您不应在 USING 子句中提供脚本的完整路径。只需使用 python 脚本 (.py) 名称。

# android - Android TextView 分配

> ID：15106128
> 
> 赞同：0
> 
> 时间：2013-02-27T07:09:08.420
> 
> 标签：android, textview

我`TextView`在活动 1 中有 5 - 6 个，如下所示：

```
textChallenge = new TextView(context.getApplicationContext());
    textChallenge.setTypeface(fontJoan);
    textChallenge.setTextColor(Color.WHITE);
    textChallenge.setText("99");
    textChallenge.measure((int)Define.getScreenWidth(), (int)Define.getScreenHeight());
    textChallenge.layout(0, 0, 200, 200);
    textChallenge.setTextSize(TypedValue.COMPLEX_UNIT_PX, 20);
    textChallenge.setDrawingCacheEnabled(true);
    textChallenge.buildDrawingCache(); 
```

我有 textChallenger、textUser、textBestScore 等。当我开始活动 2 并返回

活动 1\. 我使用 . 检查我的分配`(Debug.getNativeHeapAllocatedSize() / 1048576L)`。

我发现每次回到活动 1 时分配大小都会增加一点。

我怎么能想释放这些`TextView`分配？我尝试`setText("")`但我得到了

`NullPointerException`. 我必须以编程方式创建，所以我不能使用`findViewByID`.

我尝试`textChallenge.getDrawingCache().recycle(); textChallenge = null;`。

但是，我的堆分配大小仍在增加。请给我一些建议，谢谢。

# python - 如何修复python构建错误“ValueError：没有这样的测试方法 列出了我的 python 脚本： =========================================== class ExampleTestCase(unittest.TestCase): capabilities = None def setUp(self): 问问题 问问题 2013-02-27T07:09:16.487 1433 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 列出了我的 python 脚本： =========================================== class ExampleTestCase(unittest.TestCase): capabilities = None def setUp(self): self.driver = webdriver.Remote(desired_capabilities={ "browserName": broswer, "platform": platform, "node": node }) def test_example(self): self.driver.get("www.360logica.com") self.assertEqual(self.driver.title, "360logica") def tearDown(self): self.driver.quit() if __name__ == "__main__": #unittest.main() args = sys.argv port = args[1] platform = args[2] broswer = args[3] suite = unittest.TestSuite() suite.addTest(ExampleTestCase("test_example")) runner = XMLTestRunner(file('results_ExampleTestCase_%s.xml' % (broswer), "w")) runner.run(suite) =============================================== 运行命令为： $ ./python.exe Grid_1.py 5555 WINDOW firefox =============================================== 构建错误日志是： $ ./python.exe Grid_1.py 5555 WINDOW firefox Traceback (most recent call last): File "Grid_1.py", line 31, in <module>suite.addTest(ExampleTestCase("test_example")) File "C:\Python27\Lib\unittest\case.py", line 191, in __init__ (self.__class__, methodName)) ValueError: no such test method in <class '__main__.exampletestcase'="">: test_example ==================================================== = 请帮我。我对那个构建错误感到非常头疼，不知道如何修复它。 将带有正则表达式的 Javascript 转换为 C# 我正在尝试将一段 Javascript 转换为 .NET，但我似乎无法完全正确。 这是一个在 Express for NodeJs 中调用的方法。它将路径转换/test/:value1/:value2为可以在 URL 的一部分上使用的正则表达式。 /** * Normalize the given path string, * returning a regular expression. * * An empty array should be passed, * which will contain the placeholder * key names. For example "/user/:id" will * then contain ["id"]. * * @param {String|RegExp|Array} path * @param {Array} keys * @param {Boolean} sensitive * @param {Boolean} strict * @return {RegExp} * @api private */ exports.pathRegexp = function(path, keys, sensitive, strict) { if (path instanceof RegExp) return path; if (Array.isArray(path)) path = '(' + path.join('|') + ')'; path = path .concat(strict ? '' : '/?') .replace(/\/\(/g, '(?:/') .replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?(\*)?/g, function(_, slash, format, key, capture, optional, star){ keys.push({ name: key, optional: !! optional }); slash = slash || ''; return '' + (optional ? '' : slash) + '(?:' + (optional ? slash : '') + (format || '') + (capture || (format && '([^/.]+?)' || '([^/]+?)')) + ')' + (optional || '') + (star ? '(/*)?' : ''); }) .replace(/([\/.])/g, '\\$1') .replace(/\*/g, '(.*)'); return new RegExp('^' + path + '/class>, sensitive ? '' : 'i'); } 我尝试将其转换为： private Regex ConvertPathToRegex(string path, bool strict, out List <string>keys) { keys = new List<string>(); List <string>tempKeys = new List<string>(); string tempPath = path; if (strict) tempPath += "/?"; tempPath = Regex.Replace(tempPath, @"/\/\(", delegate(Match m) { return "(?:/"; }); tempPath = Regex.Replace(tempPath, @"/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?(\*)?", delegate(Match m) { string slash = (!m.Groups[1].Success) ? "" : m.Groups[1].Value; bool formatSuccess = m.Groups[2].Success; string format = (!m.Groups[2].Success) ? "" : m.Groups[2].Value; string key = m.Groups[3].Value; bool captureSuccess = m.Groups[4].Success; string capture = m.Groups[4].Value; bool optional = m.Groups[5].Success; bool star = m.Groups[6].Success; tempKeys.Add(key); string expression = "/"; expression += (optional ? "" : slash); expression += "(?:"; expression += (optional ? slash : ""); expression += (formatSuccess ? format : ""); expression += (captureSuccess ? capture : (formatSuccess ? format + "([^/.]+?" : "([^/]+?)")) + ")"; expression += (star ? "(/*)" : ""); return expression; }); tempPath = Regex.Replace(tempPath, @"/([\/.])", @"\$1"); tempPath = Regex.Replace(tempPath, @"/\*", "(.*)"); tempPath = "^" + tempPath + "$"; keys.AddRange(tempKeys); return new Regex(tempPath, RegexOptions.Singleline | RegexOptions.IgnoreCase); } 但问题是，这种方法不能正常工作。由于我不是正则表达式的超级明星，我想知道是否可以得到一些帮助。 当您还添加?param=1. 编辑：当我第一次从路径中删除查询参数时，它实际上工作得很好。 抱歉，问题的答案是从 URL 中删除查询参数。 pythonunit-testingpython-2.7 4 1 回答 1 This answer is useful 0 You have suite.addTest(ExampleTestCase("test_example")), but your def is outside the scope of the class (if it is indeed your indentation). Make sure that test_example is part of the class. class ExampleTestCase(unittest.TestCase): capabilities = None def setUp(self): self.driver = webdriver.Remote(desired_capabilities={ "browserName": broswer, "platform": platform}) def test_example(self): self.driver.get("www.360logica.com") self.assertEqual(self.driver.title, "360logica") def tearDown(self): self.driver.quit() if __name__ == "__main__": #unittest.main() args = sys.argv port = args[1] platform = args[2] broswer = args[3] suite = unittest.TestSuite() suite.addTest(ExampleTestCase("test_example")) runner = XMLTestRunner(file('results_ExampleTestCase_%s.xml' % (broswer), "w")) runner.run(suite) python substring.py 5555 WINDOW firefox This ends up dumping the results (as expected) as results_ExampleTestCase_firefox.xml 于 2013-02-27T07:21:07.743 回答 Related 5 java - 我不明白“this”与超类一起使用 1 iphone - 工具栏隐藏iOS时出现黑条 5 c# - “底层提供者在打开时失败” 3 c++ - 自动修复 C++ 代码库中的文件名大小写？ 1 audio - 使用 GLSL 进行频率调制？ 2 javascript - .isNumber 如何在 underscore.js 中工作？ 1 ios - 分离 NSData 对象 2 php - 在 PHP 中从文本文件创建 html 表 2 php - MySQL：插入、更新和签入单个查询 1 javascript - 添加画廊图片的链接 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</string></string></string></string></class></module>

> ID：15106130
> 
> 赞同：2
> 
> 时间：
> 
> 标签：python, unit-testing, python-2.7

列出了我的 python 脚本：

===========================================

```
class ExampleTestCase(unittest.TestCase):
    capabilities = None

def setUp(self):
    self.driver = webdriver.Remote(desired_capabilities={ "browserName": broswer,      "platform": platform, "node": node })

def test_example(self):
    self.driver.get("www.360logica.com")
    self.assertEqual(self.driver.title, "360logica")

def tearDown(self):
    self.driver.quit()

if __name__ == "__main__":
    #unittest.main()
    args = sys.argv
    port = args[1]
    platform = args[2]
    broswer = args[3]
    suite = unittest.TestSuite()
    suite.addTest(ExampleTestCase("test_example"))
    runner = XMLTestRunner(file('results_ExampleTestCase_%s.xml' % (broswer), "w"))
    runner.run(suite) 
```

===============================================

运行命令为：

```
$ ./python.exe Grid_1.py 5555 WINDOW firefox 
```

===============================================

构建错误日志是：

```
$ ./python.exe Grid_1.py 5555 WINDOW firefox
Traceback (most recent call last):
      File "Grid_1.py", line 31, in <module>
        suite.addTest(ExampleTestCase("test_example"))
      File "C:\Python27\Lib\unittest\case.py", line 191, in __init__
        (self.__class__, methodName))
ValueError: no such test method in <class '__main__.ExampleTestCase'>: test_example 
```

==================================================== =

请帮我。我对那个构建错误感到非常头疼，不知道如何修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:21:07.743

You have `suite.addTest(ExampleTestCase("test_example"))`, but your `def` is outside the scope of the class (if it is indeed your indentation). Make sure that test_example is part of the class.

```
class ExampleTestCase(unittest.TestCase):
    capabilities = None

    def setUp(self):
        self.driver = webdriver.Remote(desired_capabilities={ "browserName": broswer, "platform": platform})

    def test_example(self):
        self.driver.get("www.360logica.com")
        self.assertEqual(self.driver.title, "360logica")

    def tearDown(self):
        self.driver.quit()

if __name__ == "__main__":
    #unittest.main()
    args = sys.argv
    port = args[1]
    platform = args[2]
    broswer = args[3]
    suite = unittest.TestSuite()
    suite.addTest(ExampleTestCase("test_example"))
    runner = XMLTestRunner(file('results_ExampleTestCase_%s.xml' % (broswer), "w"))
    runner.run(suite) 
```

python substring.py 5555 WINDOW firefox This ends up dumping the results (as expected) as results_ExampleTestCase_firefox.xml

# windows-8 - 我应该如何为 CredentialPickerOptions.PreviousCredential 保留 CredentialPickerResults.Credential？

> ID：15106131
> 
> 赞同：2
> 
> 时间：2013-02-27T07:09:18.553
> 
> 标签：windows-8

我想使用 a`CredentialPicker`来提示输入用户名和密码。当我配置这个类的一个实例时，我可以设置`CredentialPickerOptions.PreviousCredential`为以前通过`CredentialPickerResults.Credential`. 我相信这会导致对话框预填充凭据。

但是，保持这个值似乎并不简单。它是一个`IBuffer`，其成员似乎不包含相关凭据。[使用 HTML、CSS 和 JavaScript 编程 Windows 8 应用程序](http://blogs.msdn.com/b/microsoft_press/archive/2012/10/29/free-ebook-programming-windows-8-apps-with-html-css-and-javascript.aspx)，第 657 页，暗示这应该是可能的：

> 包含凭证的`IBuffer`不透明字节数组。如果需要，您可以将其保存在自己的持久状态中，并在以后传递回选择器；我们很快就会看到。

不幸的是，*我们很快就会看到，它*似乎只是指该值可以*从内存*中传回`PreviousCredential`;的事实。我没有发现任何关于它是如何持续存在的提及。

另外，我想使用推荐的方法来保存凭据，我相信这是使用`PasswordVault`，但是，这似乎只允许我将凭据保存为用户名和密码字符串，而不是 IBuffer。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T05:54:38.413

感谢您花时间提问，我当然同意我可以在本书的那部分更清楚。诚然，我花在第 14 章上的时间比我希望的要少，但我会在下一版中尝试弥补这一点。像您这样的反馈对于了解我需要改进的地方非常有价值，所以我很感激。

无论如何，将缓冲区写入文件是在第 8 章中提到的（并且可以在这里再次提到......第 325 页，尽管它没有明确提到 IBuffer）。使用 Windows.Storage.FileIO 类是一项简单的工作，如下所示（承诺！）。

首先，澄清一下。您有两种方法可以保存输入的凭据。如果要保存纯文本凭据，请绝对使用 Credential Locker。这样做的好处是，如果在 PC 设置中启用了漫游密码（默认情况下），这些凭据可以与用户一起自动漫游。否则，您可以将不透明的 CredentialPickerResults.credential 属性直接保存到文件中。它已经加密和加扰，因此在这种情况下您不需要使用凭证储物柜。

现在用于保存/加载凭据属性，它是一个 IBuffer。为此，您使用 FileIO.writeBufferAsync 保存并使用 FileIO.readBufferAsync 重新加载。

我修改了 Credential Picker 示例，场景 3 来演示这一点。为了保存凭证属性，我在 pickAsync 的已完成处理程序的末尾添加了以下代码：

```
//results.credential will be null if the user cancels
if (results.credential != null) {
    //Having retrieved a credential, write the opaque buffer to a file
    var option = Windows.Storage.CreationCollisionOption.replaceExisting;

    Windows.Storage.ApplicationData.current.localFolder.createFileAsync("credbuffer.dat", option).then(function (file) {
        return Windows.Storage.FileIO.writeBufferAsync(file, results.credential);
    }).done(function () {
        //No results for this operation
        console.log("credbuffer.dat written.");
    }, function (e) {
        console.log("Could not create credbuffer.dat file.");
    });
} 
```

然后，如果可能，我创建了一个新函数来加载该凭据。这在单击 Launch 按钮而不是 launchCredPicker 时调用：

```
//In the page ready method:
document.getElementById("button1").addEventListener("click", readPrevCredentialAndLaunch, false);

//Added
function readPrevCredentialAndLaunch() {
    Windows.Storage.ApplicationData.current.localFolder.getFileAsync("credbuffer.dat").then(function (file) {
        return Windows.Storage.FileIO.readBufferAsync(file);
    }).done(function (buffer) {
        console.log("Read from credbuffer.dat");
        launchCredPicker(buffer);
    }, function (e) {
        console.log("Could not reopen credbuffer.dat; launching default");
        launchCredPicker(null);
    });
}

//Modified to take a buffer
function launchCredPicker(prevCredBuffer) {    
    try {
        var options = new Windows.Security.Credentials.UI.CredentialPickerOptions();

        //Other options omitted

        if (prevCredBuffer != null) {
            options.previousCredential = prevCredBuffer;
        }

    //... 
```

就是这样。我将修改后的 JS 示例放在[http://www.kraigbrockschmidt.com/src/CredentialPickerJS_modified.zip](http://www.kraigbrockschmidt.com/src/CredentialPickerJS_modified.zip)上。

.克雷格

作者，*[用 HTML、CSS 和 JavaScript 编写 Windows 8 应用程序](http://aka.ms/BrockschmidtBook)*（免费电子书）

# c# - 将带有正则表达式的 Javascript 转换为 C#

> ID：15106139
> 
> 赞同：-1
> 
> 时间：2013-02-27T07:09:56.397
> 
> 标签：c#, javascript, regex, node.js

我正在尝试将一段 Javascript 转换为 .NET，但我似乎无法完全正确。

这是一个在 Express for NodeJs 中调用的方法。它将路径转换`/test/:value1/:value2`为可以在 URL 的一部分上使用的正则表达式。

```
/**
* Normalize the given path string,
* returning a regular expression.
*
* An empty array should be passed,
* which will contain the placeholder
* key names. For example "/user/:id" will
* then contain ["id"].
*
* @param {String|RegExp|Array} path
* @param {Array} keys
* @param {Boolean} sensitive
* @param {Boolean} strict
* @return {RegExp}
* @api private
*/

exports.pathRegexp = function(path, keys, sensitive, strict) {
  if (path instanceof RegExp) return path;
  if (Array.isArray(path)) path = '(' + path.join('|') + ')';
  path = path
    .concat(strict ? '' : '/?')
    .replace(/\/\(/g, '(?:/')
    .replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?(\*)?/g, function(_, slash, format, key, capture, optional, star){
      keys.push({ name: key, optional: !! optional });
      slash = slash || '';
      return ''
        + (optional ? '' : slash)
        + '(?:'
        + (optional ? slash : '')
        + (format || '') + (capture || (format && '([^/.]+?)' || '([^/]+?)')) + ')'
        + (optional || '')
        + (star ? '(/*)?' : '');
    })
    .replace(/([\/.])/g, '\\$1')
    .replace(/\*/g, '(.*)');
  return new RegExp('^' + path + '$', sensitive ? '' : 'i');
} 
```

我尝试将其转换为：

```
private Regex ConvertPathToRegex(string path, bool strict, out List<string> keys) {

    keys = new List<string>();

    List<string> tempKeys = new List<string>();

    string tempPath = path;

    if (strict)
        tempPath += "/?";

    tempPath = Regex.Replace(tempPath, @"/\/\(", delegate(Match m) {
        return "(?:/";
    });

    tempPath = Regex.Replace(tempPath, @"/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?(\*)?", delegate(Match m) {

        string slash = (!m.Groups[1].Success) ? "" : m.Groups[1].Value;
        bool formatSuccess = m.Groups[2].Success;
        string format = (!m.Groups[2].Success) ? "" : m.Groups[2].Value;
        string key = m.Groups[3].Value;
        bool captureSuccess = m.Groups[4].Success;
        string capture = m.Groups[4].Value;
        bool optional = m.Groups[5].Success;
        bool star = m.Groups[6].Success;

        tempKeys.Add(key);

        string expression = "/";
        expression += (optional ? "" : slash);
        expression += "(?:";
        expression += (optional ? slash : "");
        expression += (formatSuccess ? format : "");
        expression += (captureSuccess ? capture : (formatSuccess ? format + "([^/.]+?" : "([^/]+?)")) + ")";
        expression += (star ? "(/*)" : "");

        return expression;
    });

    tempPath = Regex.Replace(tempPath, @"/([\/.])", @"\$1");
    tempPath = Regex.Replace(tempPath, @"/\*", "(.*)");
    tempPath = "^" + tempPath + "$";

    keys.AddRange(tempKeys);

    return new Regex(tempPath, RegexOptions.Singleline | RegexOptions.IgnoreCase);
} 
```

但问题是，这种方法不能正常工作。由于我不是正则表达式的超级明星，我想知道是否可以得到一些帮助。

当您还添加`?param=1`.

**编辑**：当我第一次从路径中删除查询参数时，它实际上工作得很好。

抱歉，问题的答案是从 URL 中删除查询参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:35:27.600

我已经在 PHP 中创建了这个端口，也许它可以以某种方式帮助您更好地理解 express 的作用，它返回一个正则表达式来匹配参数。

```
<?php
public static function pathRegexp($path, array &$keys, $sensitive = false, $strict = false)
{
    if (is_array($path)) {
        $path = '(' . implode('|', $path) . ')';
    }

    $path = (($strict === true) ? $path : (rtrim($path, '/ ') . '/?'));
    $path = preg_replace('/\/\(/', '(?:/', $path);
    $path = preg_replace_callback('/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?(\*)?/', function($matches) use(&$keys) {
                $slash = (isset($matches[1]) ? $matches[1] : "");
                $format = (isset($matches[2]) ? $matches[2] : false);
                $key = (isset($matches[3]) ? $matches[3] : null);
                $capture = (isset($matches[4]) ? $matches[4] : false);
                $optional = (isset($matches[5]) ? $matches[5] : false);
                $star = (isset($matches[6]) ? $matches[6] : false);

                array_push($keys, array("name" => $key, "optional" => (!!$optional)));

                return ''
                        . ($optional ? '' : $slash)
                        . '(?:'
                        . ($optional ? $slash : '')
                        . ($format ? $format : '')
                        . ($capture ? $capture : ($format ? '([^/.]+?)' : '([^/]+?)')) . ')'
                        . ($optional ? $optional : '')
                        . ($star ? '(/*)?' : '');
            }, $path);
    $path = preg_replace('/([\/.])/', '\\/', $path);
    $path = preg_replace('/\*/', '(.*)', $path);
    $path = '/^' . $path . '$/' . ($sensitive ? '' : 'i');
    return $path;
} 
```

# sql-server-2005 - 在 Sql Server 2005 中添加检查日期重叠的表级 Contraint

> ID：15106144
> 
> 赞同：1
> 
> 时间：2013-02-27T07:10:26.143
> 
> 标签：sql-server-2005, check-constraints

我在 Sql Server 中有一个表，其中有列：UserId、RoleId、FromDate 和 Todate。我想写一个检查相同的 RoleId 和 UserId 在同一日期不存在的约束。

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:27:55.080

如果您没有时间部分或所有记录中的时间部分都相同，则可以使用`UNIQUE`约束：

```
ALTER TABLE yourSchema.yourTable 
ADD CONSTRAINT uniqueConstraint1 UNIQUE (RoleId, UserId, FromDate); 
```

这样 date、RoleId 和 UserId 的组合只能在表中出现一次，其他插入相同组合的尝试将失败。

请注意，如果您的日期字段的时间部分的值在每条记录中都相同（例如 0），或者该字段的数据类型是`DATE`（消除了时间部分），这将起作用。

**如果您的日期字段的时间部分因记录而异**，请尝试以下方法之一：

A）添加定义的计算列

```
ALTER TABLE yourSchema.yourTable 
ADD constraintCheckDate AS CAST(FromDate AS DATE) 
```

并添加`UNIQUE`定义约束

```
ALTER TABLE yourSchema.yourTable 
ADD CONSTRAINT uniqueConstraint1 UNIQUE (RoleId, UserId, constraintCheckDate) 
```

B）在插入数据之前使用触发器验证数据，只有当数据不存在时才会输入数据：

```
CREATE TRIGGER trig1 ON yourSchema.yourTable
INSTEAD OF INSERT
AS
BEGIN

    IF NOT EXISTS
    (
        SELECT  *
        FROM    yourSchema.yourTable t
        JOIN    inserted i ON 
                CAST(t.FromDate AS DATE) = CAST(i.FromDate AS DATE) 
        AND     t.RoleId =  i.RoleId 
        AND     t.UserId =  i.UserId
    )
        INSERT  yourTable(RoleId, UserId, FromDate, ToDate)
        SELECT  RoleId, UserId, FromDate, ToDate
        FROM    inserted
    ELSE
        RAISERROR('Error', 16, 0)

END
GO 
```

# java - Java Eclipse“进程”在关闭应用程序后没有结束

> ID：15106150
> 
> 赞同：0
> 
> 时间：2013-02-27T07:10:33.540
> 
> 标签：java, swing, opencv, jframe, webcam

我正在编写一个显示连接到我的计算机的网络摄像头的应用程序。我将在这里编写代码，因为代码非常简单。

```
public static void main(String[] args) {
    JFrameImageDisplayer _window = new JFrameImageDisplayer();
    //webcamGrabber _wg = new webcamGrabber(); 
    //commented out because I am having trouble with this class.
} 
```

JFrameImageDisplayer 打开一个框架，几乎就是它所做的一切。当我运行这段代码时，我打开了一个框架中带有 JLabel 的简单应用程序。如果我关闭应用程序，则整个进程终止（Windows 任务管理器进程选项卡中的进程也会终止）。

但是，一旦我创建了 _wg，即使在我关闭应用程序之后任务管理器中的进程也不会终止，最终只会消耗处理能力，直到我手动转到进程栏以结束它。

下面是 webcamGrabber 的构建代码。

```
{
    OpenCVFrameGrabber _grab = new OpenCVFrameGrabber(0);
    try{
        _grab.start();

    } catch (Exception e){
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:02:50.047

好吧，我不太确定该怎么做。所以我手动释放了资源。

```
protected void processWindowEvent(WindowEvent e){
    if(e.getID() == WindowEvent.WINDOW_CLOSING) {
        try{_wg._grab.release();}
        catch(Exception ee){}
    }
    super.processWindowEvent(e);
} 
```

不是最漂亮的方法，但它有效。

# google-analytics - 转化跟踪：GoogleAdwords 跟踪像素与 Google-Analytics + GoogleAdowords + Goal-Import

> ID：15106154
> 
> 赞同：0
> 
> 时间：2013-02-27T07:10:46.557
> 
> 标签：google-analytics, tracking, google-ads-api

我有点困惑。是否有两种不同的方法可以在我的网站上跟踪转化？首先，我发现只能使用我的 AdWords 工具和[http://support.google.com/adwords/answer/1722054?hl=en](http://support.google.com/adwords/answer/1722054?hl=en)上的代码来跟踪转化：

```
<script type="text/javascript">
/* <![CDATA[ */
var google_conversion_id = 1234567890;
var google_conversion_format = "1";
var google_conversion_color = "666666";
var google_conversion_label = "Purchase";
if (10.0) {
var google_conversion_value = 10.0
}
/* ]]> */ 
</script> 
```

但是我认为如果您只是在您的 Google-Analytics-Account 中设置目标，将您的 Google-Analytics-Accoutn 链接到您的 AdWords-Account 并将目标从 Google-Analytics 导入到 GoogleAdwords，这会容易得多？（因为您的网站中只有谷歌的跟踪代码）

你两个都需要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:56:43.343

> 你两个都需要吗？

不，你不需要两者。如果您使用的是 GA，第二种方法是最好的；第一个是如果您有不同的分析提供商。

# c# - 将两个项目放在一起

> ID：15106156
> 
> 赞同：-1
> 
> 时间：2013-02-27T07:10:54.720
> 
> 标签：c#, winforms

我正在启动一个简单的窗口应用程序，并且我得到了另一个我想带入新项目的文件。我如何将它们放在一起作为一个文件工作？

**新项目**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

        }
    }
} 
```

**其他**

```
using System;
using System.Text;
using System.IO;
using System.Net;

namespace CaptchaClient
{

    public static class SampleUse
    {

        public static void SampleSolve()
        {

        }
    }
    public class CaptchaSolver
    {

    }
    public enum ResponseState
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:16:29.930

![检查这张图片](../Images/bd396f9543e4d99eb6dbe52e56359795.png) 此屏幕截图显示了您的程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:13:59.553

在解决方案资源管理器中右键单击您的项目，然后单击`Add Existing Item`。然后浏览到另一个类文件。导入后，您可能希望将其命名空间更改为您在项目中使用的命名空间。

# javascript - UserAgent 切换器到移动网络

> ID：15106159
> 
> 赞同：1
> 
> 时间：2013-02-27T07:11:02.163
> 
> 标签：javascript, mobile, web, user-agent, detect

我使用 javascript 作为用户代理将主网站重定向到移动网站。但我无法在移动设备中切换到桌面视图。

有什么方法可以通过链接“完整网站”重定向到移动设备上的主网站？

这是我正在使用的javascript：

```
<script type="text/javascript">// <![CDATA[ 
var mobile = (/iphone|ipad|ipod|android|blackberry|mini|windowssce|palm/i.test(navigator.userAgent.toLowerCase())); 
if (mobile) { 
document.location = "/mobile"; 
} 
// ]]>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:28:50.133

将此添加为链接：

`<a href="#" onclick="goToDesktopVersion()">Desktop version</a>`

和javascript（您需要实现作为注释提到的代码）：

```
function goToDesktopVersion(){
    // 1.) set a cookie to remember you want the deskop version
    // 2.) set window.location to your desktop version
} 
```

并考虑检测代码中的 cookie（实现注释代码）：

```
function keepDeskopVersionCookieIsSet(){
    // find out if the cookie is set and return true or false
}

...

var mobile = ... 
if (mobile && !keepDeskopVersionCookieIsSet() ) { 
    document.location = "/mobile"; 
} 
```

需要 cookie 以便在单击“桌面版本”链接后移动客户端不会再次重定向到移动版本。

cookie 是存储在客户端浏览器上的[一小段数据，用于保存一些信息。](http://en.wikipedia.org/wiki/HTTP_cookie)在这种情况下，这是用户希望保留页面的桌面版本的信息。Cookie 总是在服务器和客户端之间相互发送，因此您可以在客户端（浏览器）或服务器上设置。在浏览器中，您可以使用 Javascript 设置 cookie。我建议不要从头开始编写保存 cookie 所需的所有代码，而是[使用一些现有的帮助代码](http://techpatterns.com/downloads/javascript_cookies.php)来为您完成工作。

# css - Firefox 19 中的 CSS 按钮大小不同（适用于 chrome 和 IE9）

> ID：15106161
> 
> 赞同：1
> 
> 时间：2013-02-27T07:11:04.987
> 
> 标签：css, forms

Firefox 版本 19 给我输入字段和按钮之间的间距问题。我希望输入按钮出现在表单背景内，并且垂直居中，但 Firefox 中的按钮比 Chrome 或 IE9 中的大，因此它与表单背景的底部接触。我在 1600x900 显示器上看到了这个。在 Chrome 和 IE9 上看起来不错。这是jsfiddle [http://jsfiddle.net/gyFS4/1/](http://jsfiddle.net/gyFS4/1/)

HTML

```
<div id="signUp">
    <form action="" method="post" id="signup">
        <input type="text" class="left" id="email" name="email" placeholder="Enter your email address" value="">
        <input type="submit" id="notify-me" class="button" value="Sign me up!">    
    </form>
</div> 
```

CSS

```
form {
    width: 406px;
    margin: 0px auto;
    margin-top: 32px;
    background: #ffffff;
    height: 46px;
    border-radius: 22px;
    -moz-box-shadow:    0px 0px 0px 6px rgba(255, 255, 255, 0.4);
    -webkit-box-shadow: 0px 0px 0px 6px rgba(255, 255, 255, 0.4);
    box-shadow:         0px 0px 0px 6px rgba(255, 255, 255, 0.4);
}

#email {
    margin-left: 16px;
    margin-right: 16px;
    height: 36px;
    width: 240px;
    font-size: 1em;
    color: #202020;
    background: transparent;
    border: none;
}

#email:focus {
    outline: none;
}

.button {
    margin-top: 3px;
    background-color: #c3d753;
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #c3d753), color-stop(100%, #a7ba3f));
    background-image: -webkit-linear-gradient(top, #c3d753, #a7ba3f);
    background-image: -moz-linear-gradient(top, #c3d753, #a7ba3f);
    background-image: -ms-linear-gradient(top, #c3d753, #a7ba3f);
    background-image: -o-linear-gradient(top, #c3d753, #a7ba3f);
    background-image: linear-gradient(top, #c3d753, #a7ba3f);
    -moz-border-radius:20px;
    -webkit-border-radius:20px;
    border-radius:20px;
    border:1px solid #82922d;
    display:inline-block;
    color:#ffffff;
    font-family: Open Sans, sans-serif; 
    font-size:1em;
    font-weight: 400;
    padding:8px 16px;
    text-decoration:none;
    text-shadow: 0px 1px 1px rgba(0, 0, 0, 0.5);
}

.button:hover {
    background-color: #daf159;
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #daf159), color-stop(100%, #a7ba3f));
    background-image: -webkit-linear-gradient(top, #daf159, #a7ba3f);
    background-image: -moz-linear-gradient(top, #daf159, #a7ba3f);
    background-image: -ms-linear-gradient(top, #daf159, #a7ba3f);
    background-image: -o-linear-gradient(top, #daf159, #a7ba3f);
    background-image: linear-gradient(top, #daf159, #a7ba3f);
}
.button:active {
    background-color: #c3d753;
    background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #a7ba3f), color-stop(100%, #c3d753));
    background-image: -webkit-linear-gradient(top, #a7ba3f, #c3d753);
    background-image: -moz-linear-gradient(top, #a7ba3f, #c3d753);
    background-image: -ms-linear-gradient(top, #a7ba3f, #c3d753);
    background-image: -o-linear-gradient(top, #a7ba3f, #c3d753);
    background-image: linear-gradient(top, #a7ba3f, #c3d753);
    -moz-box-shadow:inset       0px 1px 3px rgba(0, 0, 0, 0.7);
    -webkit-box-shadow:inset    0px 1px 3px rgba(0, 0, 0, 0.7);
    box-shadow:inset            0px 1px 3px rgba(0, 0, 0, 0.7);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:44:50.630

您需要在`.button`类上指定高度和宽度。

```
.button {
    ...
    width:125px;
    height:40px;
} 
```

以上对我来说看起来不错。适应你的口味。

[http://jsfiddle.net/gyFS4/10/](http://jsfiddle.net/gyFS4/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:37:46.660

尝试：

```
@-moz-document url-prefix() {
    form {
    padding: 0px 0px 3px;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:43:00.250

我刚刚在 Firefox 19 中查看了您的网站，看起来还不错。但这可能是因为我的浏览器选择了一种字体，因为我的计算机上没有“Open sans”字体。

通常您所描述的问题是由父元素宽度太小引起的。确保添加每个子元素的宽度以及所有边距、边框和填充的两侧。由于按钮会根据字体自动调整大小，因此您可能需要使用 firebug 的“布局”选项卡来查看按钮的实际大小。此外，为了避免字体问题，请使用所有计算机上的字体，或使用“@font-face”为访问者计算机提供它需要使用的字体（只要该字体不受版权保护）。

# java - Spring - 使用 @Configurable 和 @Value 注释使用 new 运算符创建对象

> ID：15106163
> 
> 赞同：6
> 
> 时间：2013-02-27T07:11:14.623
> 
> 标签：java, spring, properties, dependency-injection, aspectj

是否可以在使用 AspectJ 编织的类上使用 @Configurable 并让 Spring 加载使用 @Value 注释的字段/方法上的值？

我知道@Autowired 和@Resource 等是可能的……还有其他的吗？

例如

```
@Configurable
public Class MyObj{
 @Value("$(my.prop)")
 private String aField;

 public String getAField(){
   return aField;
 }
} 
```

然后有类似的东西

```
public aMethodSomewhereElse(){
   MyObj obj = new MyObj()
   assertNotNull(obj.getAField());
} 
```

有没有其他方法可以`MyObj`使用`new`操作员创建并且仍然可以让 spring 来处理注释？

**- 编辑： -**

**`new`在使用 @Autowired 时可以做到这一点**，看看一些带有 Spring 和 AOP 的 Hibernate 和 JPA 的东西......我过去用它来做一些 Java 代码的分析。但我真的想在模拟一个完整的例子之前使用 SPEL 和 @Value，我希望在这里找到答案。仅供参考-如果您不相信我，Spring手册甚至说可以这样做，我想知道的是是否可以在同一范围内使用**@Value注释...**

> Spring 容器实例化和配置应用程序上下文中定义的 bean。给定包含要应用的配置的 bean 定义的名称，也可以要求 bean 工厂配置预先存在的对象。**spring-aspects.jar 包含一个注释驱动的方面，它利用此功能允许对*任何*对象进行依赖注入。**

和...

> 当然，单独使用注解什么也没做。作用于注解存在的是 spring-aspects.jar 中的 AnnotationBeanConfigurerAspect。本质上，该方面说“在从使用 @Configurable 注释的类型的新对象的初始化返回后，根据注释的属性使用 Spring 配置新创建的对象”。在此上下文中，初始化指的是新实例化***的对象（例如，使用'new' 运算符实例***化的对象）以及正在进行反序列化的可序列化对象（例如，通过 readResolve()）。

[http://static.springsource.org/spring/docs/3.0.0.RC2/reference/html/ch07s08.html](http://static.springsource.org/spring/docs/3.0.0.RC2/reference/html/ch07s08.html)

干杯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T13:52:47.923

你是绝对正确的——假设你有一个 AspectJ 基础设施，即使在 Spring 容器之外，`@Autowired`字段也会被连接到一个带注释的类中。`@Configurable`

您已经注意到一个很好的问题，`@Value`字段由 Spring bean 后处理器 (AutowiredAnnotationBeanPostProcessor) 处理，它解析带`@Value`注释的字段。虽然它不会作用于在容器外部实例化的对象 - 所以简而言之，@Autowired 字段应该被连接，但`@Value`属性不会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T07:50:56.760

正在做

```
MyObj obj = new MyObj() 
```

表示 obj 不是由 spring 管理的，所以它不会进行自动装配。唯一的方法是从应用程序上下文中获取实例。例如：

```
ClassPathXmlApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml");
MyObj obj = context.getBean("myBean"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T08:15:20.140

我认为不可能使用`new`运算符并要求 spring 自动装配属性。我认为解决这个问题的一种方法是获取一个静态引用`applicationContext`并创建一个原型作用域 bean。

```
@Component
public class ApplicationContextLocator {
    private static ApplicationContext applicationContext;

    public static ApplicationContext getApplicationContext() {
        return applicationContext;
    }

    public ApplicationContextLocator() {
        super();
    }

    @Autowired
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {
        ApplicationContextLocator.applicationContext = applicationContext;
    }

}

@Scope(BeanDefinition.SCOPE_PROTOTYPE)
@Component
public class MyObj {
    .....
}

public aMethodSomewhereElse(){
   MyObj obj = ApplicationContextLocator.getApplicationContext().getBean(MyObj.class)
   assertNotNull(obj.getAField());
} 
```

# mysql - html中的unicode乱码字符

> ID：15106165
> 
> 赞同：0
> 
> 时间：2013-02-27T07:11:23.227
> 
> 标签：mysql, codeigniter, unicode

我正在尝试在 codeigniter 中重写旧的 php mysql 网站，该网站是 unicode，数据库中的文本是这样存储的

```
&#2348;&#2375;&#2354;&#2366;&#2351;&#2340;&#2350;&. 
```

当我从数据库中提取数据并以 html 显示时，它看起来像这样

```
à¤¸à¤°à¥à¤µà¥‹à¤šà¥à¤šà¤•à¥‹ à 
```

在旧站点中很好，我在 html 中使用与旧站点完全相同的标题

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

我在敲我的头如何更正文字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T17:11:18.000

应该有问题，您使用的html代码是正确的，以防万一检查您是否可以在此网站上看到正确的字符： [http ://www.unicodeblocks.com/block/Devanagari](http://www.unicodeblocks.com/block/Devanagari)

并确保您使用的是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

请仔细检查 - 在您的页面上使用“查看页面源代码”并检查，也许您两次使用不同变量的元标记？

还有一个……如果您使用的是 db，请执行以下操作：

```
$mysqli->query('set character set utf8'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-20T11:18:34.120

尝试这个

```
<meta charset='utf-8'> 
```

# c# - 如何删除备份文件

> ID：15106169
> 
> 赞同：0
> 
> 时间：2013-02-27T07:11:37.037
> 
> 标签：c#, file, delete-file

我需要删除带有“.bak”和“.csv.bak”扩展名的文件。我使用.net c#。

我试过这样：

```
 string srcDir = @"D:\Backup";

        string[] bakList = Directory.GetFiles(srcDir,".bak");

        if (Directory.Exists(srcDir))
        {
            foreach (string f in bakList)
            {
                File.Delete(f);
            }
        } 
```

但是在调试的时候，bakList 数组是空的。

`Directory.GetFiles()`没有加载数组中的文件名。我无法弄清楚我的编码有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:14:54.970

您需要在输入之前`*`添加`.bak``GetFiles()`

```
string srcDir = @"D:\Backup";
string[] bakList = Directory.GetFiles(srcDir,"*.bak");

if (Directory.Exists(srcDir))
{
    foreach (string f in bakList)
    {
        File.Delete(f);
    }
} 
```

如果您需要搜索这两种类型，它可能会更好

```
var files = Directory.GetFiles(srcDir, "*.*")
            .Where(s => s.EndsWith(".bak")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T04:54:38.240

如果你的文件名是

“Data Logger[2].csv.bak”，转到属性并检查文件类型。会是这样的

"1 File (.1)" 文件以数字作为结尾扩展名。所以我就这样用了。

string[] bk = Directory.GetFiles(srcDir, " *** *.bak.* *** ");

foreach（bk 中的字符串 f）{ File.Delete(f); }

它的工作...

# vba - 即使单元格有公式，如何检查单元格是否为空白

> ID：15106172
> 
> 赞同：0
> 
> 时间：2013-02-27T07:11:56.287
> 
> 标签：vba, excel

```
 Application.WorksheetFunction.SumIf(_
     sht_store.Range(Cells(k, 12), (k, lcol)),_
     "       <>",_
     sht_store.Range(Cells(5, 12), Cells(5, lcol))) 
```

如果单元格是非空白的，我编写了这段代码来总结这些值。但是这不起作用，因为单元格可能是空白的，但仍然可能有公式。

我无法更改模块中的任何其他代码。有什么方法可以给出其他条件来总结非空白（而不是“<>”）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:01:46.567

在 VBA 中，您可以使用

*   [`IsEmpty`](http://office.microsoft.com/en-sg/access-help/isempty-function-HA001228864.aspx)对于空单元格
*   要检查单元格是否有公式，

代码：

```
Option Explicit 

Function IsFormula(ByRef wscell As Range) As Boolean 
    IsFormula = wscell.HasFormula 
End Function 
```

在 Excel 中，您可以使用

*   [`IsBlank`](http://www.techonthenet.com/excel/formulas/isblank.php)对于空单元格

因此，在您的情况下，请检查一下：

1.  检查单元格是否有公式
2.  然后检查它是否为IsNull，没有空格。

之后，您可能会开始使用您的`SumIF`. 无论公式如何，如果单元格是否真的为空/空，这将返回。

```
Function izNull(ByRef rng As Range) As Boolean
 If Trim(rng.Value) = "" Then
    izNull = True
 End If
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-02T12:43:10.823

我让它与使用`.Text`属性一起工作：

**`Cells([rowindex],[columnindex]).Text = ""`**

# parallel-processing - OpenAcc：如何并行化函数调用

> ID：15106174
> 
> 赞同：0
> 
> 时间：2013-02-27T07:12:07.900
> 
> 标签：parallel-processing, openacc

我正在做一个项目，我正在尝试并行化应用程序。我正在尝试并行化一些函数，但问题是这些函数非常频繁地调用其他函数。循环仅用于计算，一个函数体中有许多循环。我知道 OpenACC 在其指令中不支持函数调用（仅内联调用），所以我想出了两种方法：a）要么将 OpenAcc 指令放在循环周围并获得所需的并行性并忽略函数调用（不仅仅是忽略它只是保持原样）（在每个函数体中都这样做）b）或者我可以将被调用的函数体放在调用函数中，然后在输入 acc 指令时多次创建线程的开销被最小化（通过包括一个块中的大量循环）。

我不知道如何处理这种情况。

总之，我需要找到一种有效的方法来并行化 OpenACC 中的函数调用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-16T17:32:24.147

正如一些[Mark Ebersole](https://stackoverflow.com/users/1313383/mark-ebersole)所说，OpenACC 2.0 就是解决方案。[2.0](http://www.openacc.org/sites/default/files/OpenACC%202%200.pdf)中的*routine*指令允许将函数标记为设备目标。

# c# - 基类中的派生实例

> ID：15106178
> 
> 赞同：4
> 
> 时间：2013-02-27T07:12:25.693
> 
> 标签：c#, .net, inheritance, polymorphism

```
class baseClass
{
    derivedClass nm = new derivedClass();
}

class derivedClass : baseClass
{
} 
```

此代码构建良好。C# 允许`derivedClass`在`baseClass`. 你能想到这样做的任何具体原因吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-27T07:15:22.597

> 此代码构建良好。

是的 - 为什么你认为它不会？

> C# 允许在 baseClass 中创建派生类对象的可能原因是什么。

因为没有理由禁止它？

> 你能想到这样做的任何具体原因吗？

例如静态工厂方法？

```
// BaseClass gets to decide which concrete class to return
public static BaseClass GetInstance()
{
    return new DerivedClass();
} 
```

这实际上是一个很常见的模式。我们[在野田时代](http://noda-time.googlecode.com)经常使用它，例如，哪里`CalendarSystem`是公共抽象类，但所有具体派生类都是内部的。

当然，拥有您给出的确切示例真是太疯狂了-实例字段通过创建派生类的实例来初始化自身-因为它会由于递归而炸毁堆栈-但这与派生无关班级。*通过初始化同一个*类，你会得到同样的结果：

```
class Bang
{
    // Recursively call constructor until the stack overflows.
    Bang bang = new Bang();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:27:21.890

我曾经合作过的一位开发人员在我们的代码库中生成了这段代码。我个人同意它很有用。

```
public class Foo
{
    public static Foo MagicalFooValue
    {
        get { return Bar.Instance; }
    }

    private class Bar : Foo
    {
        //Implemented as a private singleton
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:15:45.503

一个明显的情况是在基类中有一个工厂方法，它会根据某些条件返回适当的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T07:15:55.563

`derivedClass`可以实例化，`baseClass`因为它是一个可访问的类。c# 没有理由限制你这样做。`baseClass`同样，您可以在其内部创建一个实例`baseClass`。

# java - 将进程附加到调试会话：未显示 javaw.exe

> ID：15106181
> 
> 赞同：3
> 
> 时间：2013-02-27T07:12:46.817
> 
> 标签：java, c, eclipse, debugging, eclipse-juno

遵循以下线程中提到的步骤，

[将进程附加到调试会话：空进程列表](https://stackoverflow.com/questions/13123019/attaching-a-process-to-a-debug-session-empty-process-list)

现在我可以获得进程列表。但是进程列表缺少任务管理器中显示的“javaw.exe”。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T07:30:18.303

输入要附加到的进程的进程 ID。

您可以通过在任务管理器中查找进程的图像名称来获取进程ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-16T13:22:22.230

我首先遇到了这个问题，但在名称“程序”下找到了该进程。记下可执行文件的名称。

![Eclipse 附加到进程对话框](../Images/c8113e9149f0662a4660318cd1ae84c7.png)

# javascript - 玩家在第一次点击时播放两次

> ID：15106182
> 
> 赞同：0
> 
> 时间：2013-02-27T07:12:50.440
> 
> 标签：javascript, html

我很难过 我有一个代码，您可以在其中单击图像，如果可以将其移动到下一个单元格，则它应该移动

```
function changecell(a){
    var moved=false;
    if(a%3 !=0) {
      if(ij[a-1]==0) {
         moved=true;
         if(moved==true) {
                no=firstmove++;                 
            move.innerHTML = no;
            playTick();
            }
            swap(a-1,a);
      }
   }

    if((a+1)%3 !=0 && moved==false) {
      if(ij[a+1]==0) {
            moved=true;
         if(moved==true) {
            no=firstmove++;                  
            move.innerHTML = no;
            playTick();
            }
            swap(a+1,a);
      }
   }
}

function playTick() {
    document.getElementById('tickSound').play();
}

function swap(x1,x2) {
    var temp=ij[x1];
   ij[x1]=ij[x2];
   ij[x2]=temp;
   var p = eval("document.images.i"+x1);
   p.src="images1/"+ij[x1]+".png";
   p = eval("document.images.i"+x2);
   p.src="images1/"+ij[x2]+".png";
} 
```

我的问题是首先单击声音播放两次，然后按预期播放一次。

有人对此有任何想法吗？

**编辑：**

我确实`alert()`在`if(moved==true)`循环中放了一个警报，警报只显示一次，但声音播放了两次。假设`if(moved==true)`再次被执行，我不会得到另一个`alert()`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:07:12.267

我认为这两个`if`条件在第一次运行时都得到了满足，因此该`playTick()`方法被调用了两次。在不知道 的值的情况下`a`，我无法确定。

# entity-framework-5 - Entity Framework 5 / Firebird / Code first 数据库创建

> ID：15106186
> 
> 赞同：1
> 
> 时间：2013-02-27T07:13:14.113
> 
> 标签：entity-framework-5, firebird2.5

我正在尝试使用 Entity Framework 5（代码优先）来使用 Firebird 提供程序创建数据库，但出现以下错误：

> 无法检查模型兼容性，因为数据库不包含模型元数据。只能检查使用 Code First 或 Code First 迁移创建的数据库的模型兼容性。

Firebird 不支持使用代码优先模型创建数据库吗？

# objective-c - NSKeyedArchiver 无法归档 NSString

> ID：15106187
> 
> 赞同：0
> 
> 时间：2013-02-27T07:13:29.763
> 
> 标签：objective-c, cocoa-touch

我想要做的只是：

```
NSArray *dirs = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
NSString *d = [dirs[0] stringByAppendingPathComponent:@"test.archive"];
BOOL r = [NSKeyedArchiver archiveRootObject:d toFile:d];
NSLog(@"%d", r); 
```

并且代码每次都失败（意思是log显示为0，对应的文件路径没有创建文件）。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:27:54.620

```
NSArray *dirs = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES); 
```

我想你的意思是`NSDocumentsDirectory`，不是`NSDocumentationDirectory`。尝试记录`d`以及`r`查看您要写入的路径。正如我认为你会得到的那样`(null)`。

# asp.net-mvc - 使用 ASP.NET MVC 将文件上传到数据库

> ID：15106190
> 
> 赞同：19
> 
> 时间：2013-02-27T07:13:45.610
> 
> 标签：asp.net-mvc, asp.net-mvc-scaffolding

我想在我的表单上为用户上传文件并保存在数据库中提供便利。这是如何在 ASP.NET MVC 中完成的。

在我的模型类中写什么数据类型。我尝试使用`Byte[]`，但在搭建脚手架期间，解决方案无法在相应的视图中为其生成适当的 HTML。

这些案件如何处理？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-27T07:31:58.650

您可以`byte[]`在模型上使用 a ，`HttpPostedFileBase`在视图模型上使用 a 。例如：

```
public class MyViewModel
{
    [Required]
    public HttpPostedFileBase File { get; set; }
} 
```

进而：

```
public class HomeController: Controller
{
    public ActionResult Index()
    {
        var model = new MyViewModel();
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        if (!ModelState.IsValid)
        {
            return View(model);
        }

        byte[] uploadedFile = new byte[model.File.InputStream.Length];
        model.File.InputStream.Read(uploadedFile, 0, uploadedFile.Length);

        // now you could pass the byte array to your model and store wherever 
        // you intended to store it

        return Content("Thanks for uploading the file");
    }
} 
```

最后在你看来：

```
@model MyViewModel
@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div>
        @Html.LabelFor(x => x.File)
        @Html.TextBoxFor(x => x.File, new { type = "file" })
        @Html.ValidationMessageFor(x => x.File)
    </div>

    <button type="submit">Upload</button>
} 
```

# java - 页面刷新后或导航到同一页面后，Applet 无法重新加载，第二次获取 classNotFoundException（页面刷新后）

> ID：15106192
> 
> 赞同：2
> 
> 时间：2013-02-27T07:13:52.663
> 
> 标签：java, jar, applet, japplet

小程序第一次加载并成功运行，但是当我们离开页面并再次尝试导航到同一页面时，找不到类异常。

# 使用 jnlp

```
exception: JNLP file error: applet-test-applet.jnlp. Please make sure the file exists and check if "codebase" and "href" in the JNLP file are correct..
java.io.FileNotFoundException: JNLP file error: applet-test-applet.jnlp. Please make sure the file exists and check if "codebase" and "href" in the JNLP file are correct.
    at sun.plugin2.applet.JNLP2Manager.loadJarFiles(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Exception: java.io.FileNotFoundException: JNLP file error: applet-test-applet.jnlp. Please make sure the file exists and check if "codebase" and "href" in the JNLP file are correct. 
```

# 使用罐子

```
load: class com.*.*.uidai.auth.*.class not found.
java.lang.ClassNotFoundException: com.*.cpos.uidai.auth.*.class
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Exception: java.lang.ClassNotFoundException: 
```

请提供解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T17:08:16.123

我有同样的问题，但在我的情况下是关于从 location.href 捕获 URL。使用 JSF 时，第一次访问并没有带来真正的页面 URL，但巧合的是，小程序就在那里。第二次点击后，会显示真实的页面URL，并且找不到applet jar。我通过放置一个相对于基本 URL 的固定 jar 位置来解决，而不是当前页面的位置。

# javascript - Grails：如何将 javascript/ajax 放入 taglib 中？

> ID：15106199
> 
> 赞同：4
> 
> 时间：2013-02-27T07:14:08.290
> 
> 标签：javascript, ajax, grails, taglib

如何将javascript代码放入grails taglib中？例如我有 grails taglib：

```
def ajaxSelect = { attrs ->
        out << """
            <script type="text/javascript"> 
        $(document).ready(function(){
        $.ajax({
                ....
        });
        });         
        </script>
        """ 
```

我收到以下错误：

> 要么转义文字美元符号 "\$5"，要么将值表达式 "${5}" 括起来

我想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T08:37:11.720

所以，转义它:)在你的多行字符串中的`\`every 之前添加一个。`$`

# c - OpenSSL 中 EVP_PKEY_RSA 和 EVP_PKEY_RSA2 的区别？

> ID：15106201
> 
> 赞同：2
> 
> 时间：2013-02-27T07:14:19.203
> 
> 标签：c, cryptography, openssl

OpenSSL 中的两种密钥类型有什么区别：

1) EVP_PKEY_RSA

2) EVP_PKEY_RSA2

在库中，2 定义为：

```
#define EVP_PKEY_RSA    NID_rsaEncryption
#define EVP_PKEY_RSA2   NID_rsa 
```

此外，NID 定义为：

```
#define NID_rsaEncryption       6
#define NID_rsa             19 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:18:34.967

两者都是 EVP_PKEY_RSA 类型，然后覆盖相同的 rsa 密钥对，但在不同的上下文中使用不同的对象标识符，PKCS1 或 X509 证书。

**从*crypto/objects/obj_dat.h***中提取的代码行

 **对于 EVP_PKEY_RSA NID_rsaEncryption ：

```
0x2A,0x86,0x48,0x86,0xF7,0x0D,0x01,0x01,0x01,/* [ 38] OBJ_rsaEncryption */    
{"rsaEncryption","rsaEncryption",NID_rsaEncryption,9,&(lvalues[38]),0}, 
```

这是PKCS1 RSA加密**1.2.840.113549.1.1.1**

对于 EVP_PKEY_RSA2 NID_rsa

```
0x55,0x08,0x01,0x01,                         /* [104] OBJ_rsa */
{"RSA","rsa",NID_rsa,4,&(lvalues[104]),0}, 
```

这是 X.500 定义的算法**id-ea-rsa 2.5.8.1.1 的 rsa 加密****

# asp.net-mvc - 在 Aviary 编辑器中加载作为 FileContentResult 返回的图像

> ID：15106203
> 
> 赞同：1
> 
> 时间：2013-02-27T07:14:33.493
> 
> 标签：asp.net-mvc, aviary, filecontentresult

我目前在 MVC 项目中工作，我目前的要求是在 Aviary 图片编辑器中加载图像。我遇到的问题是，我使用输入类型“文件”选择的图像使用 FileContentResult 渲染到视图，我想在 Aviary 编辑器中加载这个选择的图像。

在视图上呈现所选图像的图像标签是这样的，

```
<img id="imgTest" src="<%: Url.Content("~/[Controller]/[Action]/?a=" + Model.a + "&b=" + Model.b + "&c=" + Model.c) %>" alt="example" /> 
```

我将获取图像的 id 和 src 以在 aviary 中启动它，但由于这是作为操作结果返回的 FileContentResult，它不会在编辑器中加载，我不确定如何从中获取真实图像. 如何在 Aviary 中加载该图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T08:16:36.103

您可以定义一个返回**FileContentResult**的操作，例如：

```
public FileContentResult getImage(int id)
{
    byte[] byteArray = DbContext.Persons.Find(id).Image;
    if (byteArray != null)
    {
        return new FileContentResult(byteArray, "image/jpeg");
    }
    else
    {
        return null;
    }
} 
```

在剃刀

```
<img src="@Html.Action("getImage", "Person", new { id = item.Id })" alt="Person Image" /> 
```

# actionscript-3 - 从圆形动作脚本中获取角度？

> ID：15106204
> 
> 赞同：0
> 
> 时间：2013-02-27T07:14:33.927
> 
> 标签：actionscript-3, actionscript, geometry, actionscript-2

我找到了这个答案（[ActionScript 3 中的圆形滑块](https://stackoverflow.com/questions/13220832/circular-slider-in-actionscript-3)），它在圆圈上创建了一个可拖动的点。在答案中有 CircleSlider 类中的代码。

```
 private function mouseUpEventHandler(event:MouseEvent):void
    {
        mThumb.removeEventListener(Event.ENTER_FRAME, enterFrameEventHandler);
        stage.removeEventListener(MouseEvent.MOUSE_UP, mouseUpEventHandler);
        stage.removeEventListener(Event.MOUSE_LEAVE, mouseUpEventHandler);

        trace(mAngle);           
    } 
```

当我放置跟踪代码时，它会显示当我在圆上滑动点时的角度。我想在主脚本中的文本框中获得该角度。（框架脚本）。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:34:19.423

使用 TextField 对象的 text 属性。像这样：TEXT_FIELD_NAME.text = String(mAngle); 如果您使用 1 帧并且文本字段 obj 在此帧中，则可以使用此关键字，否则您必须处理包含文本字段对象的正确帧/位置。

# labview - 时间戳控制值不正确

> ID：15106210
> 
> 赞同：2
> 
> 时间：2013-02-27T07:15:09.890
> 
> 标签：labview

在我的面板上放置 Timestamp 控件后，我将其属性更改为仅显示时间，因为我不需要日期部分。

正如预期的那样，此控件上显示的值是 ，`00:00:00`但是如果我按下向上按钮，我会得到`01:00:01`，`01:00:02`，...，或者如果我按下按钮，我会得到`00:59:59`，`00:59:58`依此类推。如果我在控件的文本框内书写`01:00:00`，它会自动切换回`00:00:00`. 如果我将时间戳值更改为双倍，我会得到`0`for `00:00:00`、`-1`for`00:59:59`和`1`for `1:00:01`。

因此，该控件似乎使用 01:00:00 作为基准时间。在它的属性里面，我发现了最小值`01:00:00,000 1600-01-01`。将其更改为`00:00:00`不会产生预期的结果。

有没有办法让这个控件像正常的时间跨度控件一样正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T08:49:29.723

我不知道这种行为是否正确，但我可以解释一下。

问题是您使用的是绝对时间。在绝对时间中，LV 使用 1904 UTC 的第一个午夜作为纪元（零值），当您拥有该值时，它会将其显示为全零。更改后，显示将恢复正常。您将 1:00:00 视为基准的原因是因为您处于 GMT+1 时区，当值不为零时，LV 会自动修复显示。

我的建议是用数字控件替换时间戳控件，转到属性中的格式页面并更改控件以显示相对时间。或者，如果您确实希望时间是绝对的，则在开始之前使用局部变量将控件的值设置为正确的时间戳。

# oop - 使用 WoodChair、WoodTable 等类设计家具类

> ID：15106211
> 
> 赞同：0
> 
> 时间：2013-02-27T07:15:11.933
> 
> 标签：oop, design-patterns, decorator, builder

这是一个基于OOD的面试问题：

有一个家具类，并有像 WoodChair、WoodTable、SteelChair、SteelTable 这样的派生类。面试官想增加更多的类，比如ironchair，irontable等；我们应该怎么做。该设计尚未发布，我们可以自由修改给出的整个 sutff。

我认为既然我们基本上是在构建家具类型，我们应该在这里使用具有诸如类型（椅子/桌子）和制造（铁/木）等属性的家具类的构建器模式。然后我们将有一个具有功能的接口构建器例如：buildLegs(..)、buildSurface(..) 和子类，如 ChairBuilder、TableBuilder 和 Director 类来实例化所有这些。我们可以在不影响现有设计的情况下添加尽可能多的任何品牌的新家具类型并为它们构建构建器类。

在阅读了[Builder Vs Decorator 模式](https://stackoverflow.com/questions/4768349/builder-vs-decorator-pattern)之后，我确信我不应该在这里使用 Decorator 模式。但是Builder也可以吗？是不是矫枉过正？

另外，我不知道如何处理家具的品牌。为 make 添加枚举类型的功能就足够了吗？[钢、铁、木] 制造并没有真正为家具物品添加任何新的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:47:17.210

看起来需要在现有类中重构一些东西，这也可能有助于避免为将来出现的每一个需求创建一个新类。但这完全取决于上下文：库存应用程序需要完全不同的椅子模型，而不是需要以 3d 显示椅子的软件。你怎么知道的？问面试官，然后你就会知道他们想让你去哪里。

无聊的案例：椅子有一些常见的行为/数据可以在不同的类中重构出来，对于桌子也是如此。现在你如何选择表示材料？同样，这取决于领域，问面试官。这也是您使用的语言的问题：您选择的语言是否支持多重继承？您是否*需要*（或*想要*）使用多重继承？支持组合而不是继承可能是有意义的。为什么你会选择一种方式或另一种方式？你甚至需要一个类来表示这条信息吗？

> 我们应该怎么做。

问面试官，他们会引导你找到解决方案。对于如此宽泛的问题，没有单一的正确答案，他们希望您提出问题并了解您的想法。也就是说，尽管问题很广泛，但它的表述方式可能暗示你应该重构一些东西，以避免必须为每个新的家具和材料组合创建一个类。

可能的解决方案：

*   Table/Chair/Bed 不需要从 Furniture 继承：Furniture 类具有家具的属性和材料的属性。
*   桌子、椅子、床的类，以及任何具有材料属性的类。材料表示方式的复杂性取决于必须如何对这些信息进行建模：它可以是字符串，也可以是实现 IMaterial 接口的类（木、铁、钢）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:21:52.497

Probably, i was use Abstract Factory: WoodFurntiture, SteelFurniture, IronFurniture. Each Factory know How to make chair, table. Inside you can use (if you need) other DP, but for a now, i do not see any needs for it

Code:

```
 namespace Furniture
    {
        class Program
        {
            static void Main(string[] args)
            {
                IFurnitureFactory factory = new WoodFurnitureFactory();
                IFurniture chair = factory.GetChair();
            }
        }

        public interface IFurniture { }
        public class WoodChair : IFurniture { }
        public class WoodTable : IFurniture { }
        public class SteelChair : IFurniture { }
        public class SteelTable : IFurniture { }
        public class IronChair : IFurniture { }
        public class IronTable : IFurniture { }

        public interface IFurnitureFactory
        {
            IFurniture GetChair();
            IFurniture GetTable();
        }

        public class WoodFurnitureFactory : IFurnitureFactory
        {
            public IFurniture GetChair()
            {
                return new WoodChair();
            }

            public IFurniture GetTable()
            {
                return new WoodTable();
            }
        }

        public class IronFurnitureFactory : IFurnitureFactory
        {
            public IFurniture GetChair()
            {
                return new IronChair();
            }

            public IFurniture GetTable()
            {
                return new IronTable();
            }
        }

        public class SteeFurniturelFactory : IFurnitureFactory
        {
            public IFurniture GetChair()
            {
                return new SteelChair();
            }

            public IFurniture GetTable()
            {
                return new SteelTable();
            }
        }
    } 
```

# wcf - WcfTestClient 的 Oracle.DataAccess 问题

> ID：15106219
> 
> 赞同：0
> 
> 时间：2013-02-27T07:15:29.087
> 
> 标签：wcf, oracle, wcftestclient

我在 Win 7 - 64 位机器上运行 Visual Studio 2010。我创建了一个 WCF 服务项目。我对其进行了调试，并按预期加载了 WCF 测试客户端。我运行了 GetData 操作，然后得到这个

```
Assembly Oracle.DataAccess was not found. Reinstall the assembly or Visual Studio 
```

我从未为 dot net 安装过 Oracle 适配器。所以我搜索了各种 machine.config 文件（框架的 32 位和 64 位版本，以及框架的多个版本），果然，有 Oracle 数据适配器的条目。我将它们全部删除，但仍然出现错误。

想法？？？

# xml - 如何将xml子节点映射到jqgrid

> ID：15106221
> 
> 赞同：0
> 
> 时间：2013-02-27T07:15:34.960
> 
> 标签：xml, jqgrid, xml-parsing

```
<ProtoRequest
        No = "84P6-11-00023"
        Requestor = "Daniel Frank(E677648)"
        CustomerName = "TLV BMW"
        CustomerOrder = ""
        MWO = "4601302"
        PartNumber = ""
        ProductType = ""
        CreationDate = "24-Jun-2011"
        ABCClasification = ""
        ProtoStatus = "Closed"
        UsageType = "Component Request"
        BOMAvailabilityDate = ""
        BOMCommitedDate = ""
        Technology = ""
        Plant = "84P6-Thaon Les Vosges"
        EstimatedBudget_USD = "0.00">
        <LineItem
            PartNumber = "805069-009A"
            Description = "Hsg-Comp retouche"
            RequestQty = "1"
            Supplier = ""
            RequestedDeliveryDate = "29-Jun-2011"
            LineStatus = "Closed"
            SalesOrder = "1654130"
            Item = "10"
            StandardLeadTime = "23"
            ABCClassification = "-1"
            AgreedDate = ""
            EstimatedCost_USD = "0.0"/>
        <LineItem
            PartNumber = "811352-006A"
            Description = "hsg comp retouche"
            RequestQty = "1"
            Supplier = ""
            RequestedDeliveryDate = "28-Jun-2011"
            LineStatus = "Partially Closed"
            SalesOrder = "1654130"
            Item = "20"
            StandardLeadTime = "23"
            ABCClassification = "-1"
            AgreedDate = ""
            EstimatedCost_USD = "0.0"/>
        <LineItem
            PartNumber = "811352-006A"
            Description = "Hsg-Comp retouche"
            RequestQty = "1"
            Supplier = ""
            RequestedDeliveryDate = "28-Jun-2011"
            LineStatus = "Partially Closed"
            SalesOrder = "1654130"
            Item = "20"
            StandardLeadTime = "23"
            ABCClassification = "-1"
            AgreedDate = ""
            EstimatedCost_USD = "0.0"/>
    </ProtoRequest> 
```

以上是我想映射到 jqGrid 的 xml 结构。

我的 xmlReader 是：

```
xmlReader: { 
     root:"ProtoRequestInfo",
     row:"ProtoRequest",
     repeatitems:false
      } 
```

现在我需要在主网格本身而不是子网格中使用此信息创建 4 个（“LineItemNo”标记的编号）行。

预期输出：

```
No              Requestor               PartNumber     Description
____________________________________________________________________________
84P6-11-00023   Daniel Frank(E677648)   805069-009A    Hsg-Comp retouche
84P6-11-00023   Daniel Frank(E677648)   811352-006A    hsg comp retouche
...........
........... 
```

colmodel应该如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:47:40.843

您可以使用`row:"ProtoRequest>LineItem"`inside of`xmlReader`并按照[我](https://stackoverflow.com/a/15090067/315935)对上一个问题的回答：使用`xmlmap`定义为函数。要阅读您可以`Requestor`在函数内部使用[jQuery.parent](http://api.jquery.com/parent/)方法。`ProtoRequest``xmlmap`

# php - 查找最后一个值等于 0 的数组

> ID：15106225
> 
> 赞同：0
> 
> 时间：2013-02-27T07:15:51.463
> 
> 标签：php, arrays

在给定的数组中，我想找到从该键到数组末尾具有零值的第一个键。例如：

```
$data1 = array(
        '1 Jan|8:30' => '12.6',
        '2 Feb|8:30' => '250',
        '3 Mar|8:10' => '0',
        '4 Apr|23:30' => '7',
        '5 Apr|23:30' => '80',
        '6 Apr|23:30' => '67',
        '7 r|23:30' => '0',
        '8 Ap|23:30' => '0',
        '9 Lr|23:30' => '0',
        '10 Apr|23:30' => '0'
);

// outcome should: be '7 r|23:30' => '0' 
```

和：

```
$data2 = array(
    '1 Jan|8:30' => '12.6',
    '2 Feb|8:30' => '250',
    '3 Mar|8:10' => '0',
    '4 Apr|23:30' => '7',
    '5 Apr|23:30' => '80',
    '6 Apr|23:30' => '67',
    '7 r|23:30' => '0',
    '8 Ap|23:30' => '0',
    '9 Lr|23:30' => '1',
    '10 Apr|23:30' => '0'
);

// outcome should be: '10 Apr|23:30' => '0' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:53:40.467

您可以向后迭代数组，直到值不再是`'0'`：

```
$key = null;

for ($value = end($arr); $value !== false && $value == '0'; $value = prev($arr)) {
    $key = key($arr); // keep track of current key
}

if ($key !== null) {
    echo $key, ' = ', $arr[$key];
} 
```

# android - Adding link to json object in android

> ID：15106226
> 
> 赞同：3
> 
> 时间：2013-02-27T07:15:55.017
> 
> 标签：android, json, creation

```
 JSONArray albumarray=new JSONArray();
   JSONObject imgobj=new JSONObject();
    imgobj.put("thumb", filepath.get(i));
    imgobj.put("main", filepath.get(i));
    albumarray.put(imgobj);
    JSONObject albumjson=new JSONObject();
   albumjson.put(albumname,albumarray); 
```

When I convert albumjson to string using

```
albumjson.toString() 
```

I am getting output as below.

```
{\"test2\":\"[{\\\"thumb\\\":\\\"http:\\\\\\/\\\\\\/dev.mysite.in\\\\\\/mysite\\\\\\/sites\\\\\\/default\\\\\\/files\\\\\\/512da541b31fe.jpg\\\",\\\"main\\\":\\\"http:\\\\\\/\\\\\\/dev.mysite.in\\\\\\/mysite\\\\\\/sites\\\\\\/default\\\\\\/files\\\\\\/512da541b31fe.jpg\\\"}]\"} 
```

the correct format i need is

```
{"test2":[{"thumb":"http://dev.mysite.in/mysite/sites/default/files/512d9bdced1f2.jpg","main":"http://dev.mysite.in/mysite/sites/default/files/512d9bdced1f2.jpg"},{"thumb":"http://dev.mysite.in/mysite/sites/default/files/512d9be134cb8.jpg","main":"http://dev.mysite.in/mysite/sites/default/files/512d9be134cb8.jpg"}]} 
```

How to replace additional slashes.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:18:46.363

PLease use `JSONObject.getString('keyName')` method instead of `toString()`

**EDIT:**

You should first understand why those extra `\\` are showing up.It is an escape character for `"`.Hence,it is very much required there and is a *part of JSON encoding* .Hence,one should always use the above method to get values of keys whenever needed.

apart from that you can try :

`JSONObject.toString(4)` where `4` is actually indent spaces and see whether it helps.Otherwise there's simply no other option than to replace those extra `\\` like

```
myJsonString.replaceAll("\\",""); 
```

or

```
 myJsonString=myJsonString.replaceAll("\\\\",""); 
```

**SECOND EDIT:**

The string you are sending is perfect to send to any server.You need to `decode` that string at the server end to JSON and then utilise it.

If you are using .NET you can see [this](http://james.newtonking.com/projects/json-net.aspx). Or if you are on some other platform you need to find out how to decode to JSON on that platform.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T08:24:17.470

There are two things going on here:

1.  Your tools are confusing you. When it shows the output:

    ```
    "{\"test2\":\"[{\\\"thumb\\\":\\\"http:\\\\\\/\\\\\\/dev.lrcdn.in\\\\\\/shiaspark\\\\\\/sites\\\\\\/default\\\\\\/files\\\\\\/512da541b31fe.jpg\\\",\\\"main\\\":\\\"http:\\\\\\/\\\\\\/dev.lrcdn.in\\\\\\/shiaspark\\\\\\/sites\\\\\\/default\\\\\\/files\\\\\\/512da541b31fe.jpg\\\"}]\"}" 
    ```

    It is telling you that the result is a string containing:

    ```
    {"test2":"[{\"thumb\":\"http:\\\/\\\/dev.lrcdn.in\\\/shiaspark\\\/sites\\\/default\\\/files\\\/512da541b31fe.jpg\",\"main\":\"http:\\\/\\\/dev.lrcdn.in\\\/shiaspark\\\/sites\\\/default\\\/files\\\/512da541b31fe.jpg\"}]"} 
    ```

2.  Taking that string and formatting it:

    ```
    {"test2":
     "[{\"thumb\":\"http:\\\/\\\/dev.lrcdn.in\\\/shiaspark\\\/sites\\\/default\\\/files\\\/512da541b31fe.jpg\",\"main\":\"http:\\\/\\\/dev.lrcdn.in\\\/shiaspark\\\/sites\\\/default\\\/files\\\/512da541b31fe.jpg\"}]"
    } 
    ```

    We can see that you've constructed a json object containing a json-encoded string, rather than a nested jsonobject. For whatever reason, your code is having the effect of:

    ```
    JSONArray albumarray=new JSONArray();
    JSONObject imgobj=new JSONObject();
    imgobj.put("thumb", filepath.get(i));
    imgobj.put("main", filepath.get(i));
    albumarray.put(imgobj);

    JSONObject albumjson = new JSONObject();
    albumjson.put(albumname, albumarray.toString()); 
    ```

    That sounds like a bug in your json library

# configuration - 有没有办法在运行 64 位的 IE10 中默认设置 Quirks Mode

> ID：15106228
> 
> 赞同：1
> 
> 时间：2013-02-27T07:15:57.337
> 
> 标签：configuration, 64-bit, default, internet-explorer-10, quirks-mode

我想知道是否有办法让我的 IE10 浏览器在打开时自动设置为 Quirks 模式？我正在使用 Windows 8 64 位。我正在访问一个需要处于 Quirks 模式的站点，当我打开浏览器时，我仍然需要将其更改为 quirks 模式才能正确访问该站点。当我重新启动计算机并再次打开浏览器时，我必须再次将其设置为怪癖模式。而这真的很累。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T00:01:32.117

IE 渲染模式的规范也适用于 IE5 Quirks Mode。要在 IE5 Quirks 模式下运行 WebBrowser 控件的实例，请将以下值插入注册表：

```
[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_NATIVE_DOCUMENT_MODE]

"iexplore.exe"=dword:C350 

[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BROWSER_EMULATION]

"iexplore.exe"=dword:C350 
```

**参考**

*   [了解 Internet Explorer 中的兼容模式](http://blogs.msdn.com/b/askie/archive/2009/03/23/understanding-compatibility-modes-in-internet-explorer-8.aspx)

*   [过时的功能控件](http://msdn.microsoft.com/en-us/library/ee330738)

# node.js - 如何使用 node.js 中的事件流将可读流通过管道传输到 child_process.exec 命令？

> ID：15106236
> 
> 赞同：1
> 
> 时间：2013-02-27T07:16:25.920
> 
> 标签：node.js, event-stream

我有以下（无效）代码：

```
var es = require('event-stream');
var cp = require('child_process');

es.pipeline(
    es.child(cp.exec("ls")),
    es.split(/[\t\s]+/),
    es.map(function(data,cb){
        if ( /\.txt$/.test(data) ) cb(null, data);
        else cb();
    }),
    es.child(cp.exec("cat "+data)) // this doesn't work
) 
```

问题在于最后一个流是从流`es.child(cp.exec("cat "+data))`中`data`写入的块`map()`。如何实现这一目标？另请注意，“ls”和“cat”不是我使用的实际命令，但执行动态生成的 unix 命令和流式输出的原理是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-18T01:01:13.543

我不会使用`event-stream`，它基于较旧的流 API。

对于故障线路，我会使用`through2`

```
var thr = require('through2').obj
var es = require('event-stream');
var cp = require('child_process');

function finalStream (cmd) {
  return thr(function(data, enc, next){
    var push = this.push

    // note I'm not handling any error from the child_process here
    cp.exec(cmd +' '+ data).stdout.pipe(thr(function(chunk, enc, next){
      push(chunk)
      next()
    }))
    .on('close', function(errorCode){
      if (errorCode) throw new Error('ops')
      next()
    })

  })
}

es.pipeline(
    es.child(cp.exec("ls")),
    es.split(/[\t\s]+/),
    es.map(function(data,cb){
        if ( /\.txt$/.test(data) ) cb(null, data);
        else cb();
    }),
    finalStream('cat') 
    thr(function(chunk, enc, next){
      // do stuff with the output of cat.
    }
) 
```

我没有对此进行测试，但这就是我解决问题的方法。

# web-hosting - 超出 max_user_connections 或 ip 连接限制

> ID：15106238
> 
> 赞同：-1
> 
> 时间：2013-02-27T07:16:35.627
> 
> 标签：web-hosting, php

我收到以下“PHP 错误消息”：

用户******在 /home/ 中已经有超过 'max_user_connections' 个活动连接*******/***/* *****在第 6 行或**

 **对于我的网站 www。*** *.com，并且在重新加载页面 3-4 次后出现此错误。早些时候，这个错误没有出现。那么有人可以告诉我这个错误是否与 PHP 或 DB 有关。

我正在使用像 1freehosting.com 或 000webhost.com 这样的免费主机

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:39:47.813

当允许连接服务器的最大用户数已经存在时，您会收到 max_user_connections 消息。

以下是您的参考链接
[http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_max_user_connections](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_max_user_connections)
[http://dev.mysql.com/doc/refman/5.5/ zh/too-many-connections.html](http://dev.mysql.com/doc/refman/5.5/en/too-many-connections.html)

您可以增加允许的连接数，也可以
不为每个人打开新连接。为什么不对所有查询使用相同的连接。**

# conditional - ANTLR 将 1 对 1 语法规则链接在一起以解决条件

> ID：15106240
> 
> 赞同：4
> 
> 时间：2013-02-27T07:16:54.200
> 
> 标签：conditional, antlr4

如果您查看 ObjectiveC antlr v3 语法（[http://www.antlr3.org/grammar/1212699960054/ObjectiveC2ansi.g](http://www.antlr3.org/grammar/1212699960054/ObjectiveC2ansi.g)）和许多其他流行的语法，它们会采用与此类似的结构来解决条件

```
conditional_expression : logical_or_expression 
  ('?' logical_or_expression ':' logical_or_expression)? ;

constant_expression : conditional_expression ;

logical_or_expression : logical_and_expression 
  ('||' logical_and_expression)* ;

logical_and_expression : inclusive_or_expression 
  ('&&' inclusive_or_expression)* ;

inclusive_or_expression : exclusive_or_expression 
  ('|' exclusive_or_expression)* ;

exclusive_or_expression : and_expression ('^' and_expression)* ;

and_expression : equality_expression ('&' equality_expression)* ;

equality_expression : relational_expression 
  (('!=' | '==') relational_expression)* ;

relational_expression : shift_expression
 (('<' | '>' | '<=' | '>=') shift_expression)* ;

shift_expression : additive_expression (('<<' | '>>') additive_expression)* ;

additive_expression : multiplicative_expression
  (('+' | '-') multiplicative_expression)* ;

multiplicative_expression : cast_expression 
  (('*' | '/' | '%') cast_expression)* ;

cast_expression : '(' type_name ')' cast_expression | unary_expression ;

unary_expression 
  : postfix_expression
  | '++' unary_expression
  | '--' unary_expression
  | unary_operator cast_expression
  | 'sizeof' ('(' type_name ')' | unary_expression) ;

unary_operator : '&' | '*' | '-' | '~' | '!' ; 
```

如果您阅读它，您会注意到他们执行了非常长的 1 对 1 条件链 from `conditional_expression`to `logical_or_expression`to `logical_and_expression`to `inclusive_or_expression`to `exclusive_or_expression`。

现在，当谈到 ANTLR 时，我很天真，但这让我觉得这是一种奇怪的解析条件的方式。将logical_or_expression 的定义扭曲到所有其他条件表达式类型似乎非常复杂。毕竟，逻辑的定义`OR`与左移位有什么关系？

是否有更好的方法，或者是否有特定的原因需要这种方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T22:15:13.717

如前所述，需要“链”来正确处理运算符优先级。没有它，输入 like`1+2*3`将被解析为：

```
 *
    / \
   +   3
  / \
 1   2 
```

代替：

```
 +
 / \
1   *
   / \
  2   3 
```

由于 ANTLR 4 支持直接左递归规则：

```
foo
 : foo '?' foo
 | TOKEN
 ; 
```

所以不是间接左递归规则：

```
foo
 : bar
 | TOKEN
 ;

bar
 : foo '?' foo
 ; 
```

您可以按如下方式重写这些规则：

```
expression
 : '-' expression
 | '(' type_name ')' expression
 | expression ('*' | '/' | '%') expression
 | expression ('+' | '-') expression
 | expression ('<<' | '>>') expression
 | expression ('<' | '>' | '<=' | '>=') expression
 | expression ('!=' | '==') expression
 | expression '&' expression
 | expression '^' expression
 | expression '|' expression
 | expression '&&' expression
 | expression '||' expression
 | expression '?' expression ':' expression
 | IDENTIFIER
 | NUMBER
 ; 
```

如果解析器现在偶然`expression`发现 ，它将首先查找`('*' | '/' | '%')`，如果不存在，它将查找`('+' | '-')`，等等。换句话说，放在规则中的第一个替代项将优先于规则中位于较低位置的替代项。

现在我从您之前的问题中知道，[一旦语法完成，遍历 ANTLR v4 树的最佳方法是什么？](https://stackoverflow.com/questions/15050137/once-grammar-is-complete-whats-the-best-way-to-walk-an-antlr-v4-tree)，您正在使用侦听器“行走”树。如果您像我刚刚展示的那样创建`expression`规则，则需要在您的`enterExpression(...)`和`exitExpression(...)`方法中进行大量手动检查，以找出哪些替代方案与`expression`. 这就是“标签”派上用场的地方。您只需在`expression`规则中标记每个备选方案：

```
expression
 : '-' expression                                  #unaryExpr
 | '(' type_name ')' expression                    #castExpr
 | expression ('*' | '/' | '%') expression         #multExpr
 | expression ('+' | '-') expression               #addExpr
 | expression ('<<' | '>>') expression             #...
 | expression ('<' | '>' | '<=' | '>=') expression 
 | expression ('!=' | '==') expression
 | expression '&' expression
 | expression '^' expression
 | expression '|' expression
 | expression '&&' expression
 | expression '||' expression
 | expression '?' expression ':' expression
 | IDENTIFIER
 | NUMBER
 ; 
```

（请注意，当您标记一个时，您*必须*将它们全部标记！）

然后基础侦听器类将具有`enter`- 以及`exit`所有替代方案的方法：

```
public void enterUnaryExpr(...)
public void exitUnaryExpr(...)

public void enterCastExpr(...)
public void exitCastExpr(...)

public void enterMultExpr(...)
public void exitMultExpr(...)

... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T17:04:45.507

这样做有一个很好的理由：运算符优先级。以逻辑 OR 和左移位为例，考虑类似

```
if (a << b || c) 
```

Objective-C 优先规则说 '<<' 具有优先权，因此评估它的正确方法是

```
(a << b) || c 
```

解析器规则通过使用您提到的链来管理它，因为 '||' 的规则 在链中较高的位置，解析正确地给出了一个 << b 作为 || 的子表达式 操作员。

在 Antl3 中没有更好的方法，但是在 Antlr4 中，有，因为 Antlr4 允许直接左递归规则。我强烈推荐“Definitive Antlr4 reference”，因为它对这个问题有很好的解释。

# javascript - 使用表单输入更新 d3 图表

> ID：15106241
> 
> 赞同：5
> 
> 时间：2013-02-27T07:16:58.883
> 
> 标签：javascript, d3.js

已经广泛搜索了这方面的帮助，但似乎找不到任何足够接近的东西。

简而言之，我正在尝试使用与图表在同一页面上的表单中的数据更新我使用 d3.js 生成的图表。即我显示一个包含 3 列的柱形图，并希望能够通过图表旁边的简单输入来调整第三列的高度。到目前为止，我正在通过 d3 的 csv 方法加载数据，所以这可能不是最好的操作方式。

如果有人可以提供帮助，我将不胜感激！如果您愿意，我可以发布代码，但我认为一般解释可能是可以实现的。

干杯，艾伦

这是我让它工作后的样子：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <style>
            body {
                font: 10px sans-serif;
            }
            .axis path,
            .axis line {
              fill: none;
              stroke: #000;
              shape-rendering: crispEdges;
            }

            .bar {
              fill: steelblue;
            }

            .x.axis path {
              display: none;
            }
        </style>
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="http://d3js.org/d3.v3.min.js"></script>
    </head>
    <body>
        <div id="chart"></div>
        <div>
            <form>
                A: <input class="fields" id="a" type="float"/>
                B: <input class="fields" id="b" type="float"/>
                C: <input class="fields" id="c" type="float"/>
                <input type="submit" />
            </form>
        </div>
        <!--d3 code-->
        <script>
            var data = [10,50,200];
            var margin = {top: 20, right: 20, bottom: 30, left: 40},
                width = 960 - margin.left - margin.right,
                height = 500 - margin.top - margin.bottom;
            var formatPercent = d3.format(".0%");

            var x = d3.scale.ordinal()
                .rangeRoundBands([0, width], .1);

            var y = d3.scale.linear()
                .range([height, 0]);

            var xAxis = d3.svg.axis()
                .scale(x)
                .orient("bottom");

            var yAxis = d3.svg.axis()
                .scale(y)
                .orient("left")

            var svg = d3.select(document.getElementById("chart")).append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
              .append("g")
                .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

            svg.selectAll(".bar")
                .data(data)
              .enter().append("rect")
                .attr("x", function(d, i) { return i * 200; })
                .attr("width", function(d) {return 100;})
                .attr("y", function(d) { return height - d;})
                .attr("height", function(d) { return d; });
        </script>
        <!--on form submit-->
        <script type="text/javascript">
            $("form").submit(function() {
                var newA = document.getElementById("a").value;
                var newB = document.getElementById("b").value;
                var newC = document.getElementById("c").value;

                svg.selectAll("rect")
                    .data([newA, newB, newC])
                    .attr("y", function(d) { return height - d;})
                    .attr("height", function(d) { return d; });

                return false;
            });
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T09:20:07.897

基本模式是您从`onclick`表单的处理程序中调用一个函数来更新数据。因此，在您使用 3 列的情况下，前两个数据点将保持不变，第三个数据点将根据输入值进行更新（您可以使用 d3 或 jquery 或类似的东西从表单中获取）。

`d3.csv`只要您使用 d3 的选择模式，通过加载初始数据应该不是问题——请参阅[圆教程](http://mbostock.github.com/d3/tutorial/circle.html)了解更多关于一般概念的背景知识。因此，在您的处理程序中，您将根据新数据调整高度，这应该与您最初用于创建图表的代码相同。

# c# - 读取印地语 excel 文件

> ID：15106244
> 
> 赞同：0
> 
> 时间：2013-02-27T07:17:02.473
> 
> 标签：c#

我有一个 excel 文件，其中有印地语字体的文本和图像。现在，我的要求是读取 excel 文件并将二进制数据存储在数据库中或以后可以转换为相同字体的任何内容中。

当我通过 C# 以正常方式读取 excel 时，它会获得一些用于印地语字体的罗马字符，而无需进行任何编码或解码。

我使用此代码读取 excel 文件：

```
string fileName = string.Format("{0}", Directory.GetCurrentDirectory()); 
var connectionString = string.Format("Provider=Microsoft.Jet.OLEDB.4.0; data source={0}; Extended Properties=Excel 8.0;", fileName); 
var adapter = new OleDbDataAdapter("SELECT * FROM [workSheetNameHere$]", connectionString);
var ds = new DataSet(); 
adapter.Fill(ds, "anyNameHere");
DataTable data = ds.Tables["anyNameHere"]; 
```

编辑：我使用此代码来读取 excel 文件

```
string fileName = string.Format("{0}", Directory.GetCurrentDirectory()); 
var connectionString = string.Format("Provider=Microsoft.Jet.OLEDB.4.0; 
data source={0};    
Extended Properties=Excel 8.0;", fileName);
var adapter = new OleDbDataAdapter("SELECT * FROM [workSheetNameHere$]",
                                                        connectionString); 
var ds = new DataSet(); 
adapter.Fill(ds, "anyNameHere"); 
DataTable data = ds.Tables["anyNameHere"]; 
```

# java - 在 JSP 中的时间选择器组件中显示日期和时间

> ID：15106245
> 
> 赞同：0
> 
> 时间：2013-02-27T07:17:02.800
> 
> 标签：java, javascript, jsp, struts2

嗨，我正在开发 Struts 2 web 项目。我在网页中使用 jQuery 时间选择器。但是现在我的客户需要从系统时钟和日历中选择要选择的日期和时间（独立于操作系统 Windows、Mac、Linux、IOS 等）。有没有办法调用系统时钟和日历来选择日期和时间？提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:38:18.830

试试[这个](http://trentrichardson.com/examples/timepicker/)..看来，这就是你要找的..

取自[jQuery 日期/时间选择器](https://stackoverflow.com/questions/1245245/jquery-date-time-picker)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T07:28:45.157

您可以使用 HTML5 的日期类型。这将显示弹出日历。[http://www.w3schools.com/html/html5_form_input_types.asp](http://www.w3schools.com/html/html5_form_input_types.asp)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-27T07:22:02.393

In javascript

```
new Date() 
```

always picks date from the System clock and calendar

# sql - 使用 REGEXP_SUBSTR(AGGREGATOR,'[^;]+',1,LEVEL) 的 oracle 查询速度很慢

> ID：15106247
> 
> 赞同：3
> 
> 时间：2013-02-27T07:17:18.783
> 
> 标签：sql, oracle

我正在使用查询来获取不同的行而不是分号分隔的值。

该表如下所示：

```
row_id  aggregator
1       12;45
2       25 
```

使用查询我希望输出看起来像：

```
row_id  aggregator
1       12
1       45
2       25 
```

我正在使用以下查询：

```
SELECT
DISTINCT ROW_ID,
REGEXP_SUBSTR(AGGREGATOR,'[^;]+',1,LEVEL) as AGGREGATOR
FROM DUMMY_1
CONNECT BY REGEXP_SUBSTR(AGGREGATOR,'[^;]+',1,LEVEL) IS NOT NULL; 
```

即使是 300 条记录也很慢，我必须处理 40000 条记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:30:52.160

有时流水线表可以更快，试试这个：

```
create or replace type t is object(word varchar2(100), pk number);
/
create or replace type t_tab as table of t;
/

create or replace function split_string(del in varchar2) return t_tab
  pipelined is

  word    varchar2(4000);
  str_t   varchar2(4000) ;
  v_del_i number;
  iid     number;

  cursor c is
    select * from DUMMY_1; 

begin

  for r in c loop
    str_t := r.aggregator;
    iid   := r.row_id;

    while str_t is not null loop

      v_del_i := instr(str_t, del, 1, 1);

      if v_del_i = 0 then
        word  := str_t;
        str_t := '';
      else
        word  := substr(str_t, 1, v_del_i - 1);
        str_t := substr(str_t, v_del_i + 1);
      end if;

      pipe row(t(word, iid));

    end loop;

  end loop;

  return;
end split_string; 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/75df1/2)

[这是另一个演示](http://www.sqlfiddle.com/#!4/08d40/1)，其中包含 22 行，每行在聚合器中包含 3 个 val - 请参阅第一个和第二个查询之间的区别..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T09:55:54.877

`CONNECT BY`众所周知，正则表达式是昂贵的函数，因此当性能至关重要时（例如在子句中使用标准函数），您应该尽量减少它们的使用。

使用标准函数 ( `INSTR`, `SUBSTR`, `REPLACE`) 会更有效，但生成的代码将难以阅读/理解/维护。

我忍不住写了一个递归 QTE，它比正则表达式和标准函数都高效得多。此外，递归 QTE 查询可以说有一些优雅。您需要 Oracle 11.2：

```
WITH rec_sql(row_id, aggregator, lvl, tail) AS (
SELECT row_id, 
       nvl(substr(aggregator, 1, instr(aggregator, ';') - 1), 
           aggregator),
       1 lvl,
       CASE WHEN instr(aggregator, ';') > 0 THEN
          substr(aggregator, instr(aggregator, ';') + 1)
       END tail
  FROM dummy_1 initialization
UNION ALL
SELECT r.row_id, 
       nvl(substr(tail, 1, instr(tail, ';') - 1), tail), 
       lvl + 1, 
       CASE WHEN instr(tail, ';') > 0 THEN
          substr(tail, instr(tail, ';') + 1)
       END tail
  FROM rec_sql r
 WHERE r.tail IS NOT NULL
)
SELECT * FROM rec_sql; 
```

您可以在[SQLFiddle](http://www.sqlfiddle.com/#!4/08d40/25)上看到该解决方案非常高效，并且与[@ABCade 的解决方案](https://stackoverflow.com/a/15106432/119634)相当。（感谢 ABCade 的测试用例）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-25T13:35:07.370

您`connect by`产生的记录比需要的多得多，这就是性能很差的原因，您需要使用它`distinct`来限制记录数。一种确实需要的方法`distinct`是：

```
select row_id, regexp_substr(aggregator,'[^;]+',1,n) aggregator
  from dummy_1, (select level n from dual connect by level < 100)
 where n <= regexp_count(aggregator,';')+1 
```

如果分号数小于 99，则上述方法有效。以下解决方案没有此限制，如果最大分号数较低，则速度更快：

```
with dummy_c as (select row_id, aggregator, regexp_count(aggregator,';')+1 c from dummy_1)
select row_id, regexp_substr(aggregator,'[^;]+',1,n) aggregator
  from dummy_c, (select level n from dual connect by level <= (select max(c) from dummy_c))
 where n <= c 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-27T20:35:07.740

我认为 DISTINCT 可能是问题所在。此外，我不明白您为什么需要 CONNECT BY REGEXP_SUBSTR(AGGREGATOR,'[^;]+',1,LEVEL) IS NOT NULL。您在选择和连接方式中使用正则表达式。您可以使用 where AGGREGATOR IS NOT NULL 代替 connect by 吗？找到一种方法来摆脱差异并修改您的查询。您可以使用 EXISTS 而不是 distinct... 为了帮助您更多，我需要表格和数据。

```
SELECT * FROM
(
 SELECT REGEXP_SUBSTR(AGGREGATOR ,'[^;]+',1,LEVEL) as AGGREGATOR                      
   FROM your_table
)
WHERE AGGREGATOR IS NOT NULL
/ 
```

# regex - Perl 中的模式匹配是如何工作的？

> ID：15106250
> 
> 赞同：1
> 
> 时间：2013-02-27T07:17:33.567
> 
> 标签：regex, perl, pattern-matching

我想知道模式匹配在 Perl 中是如何工作的。

我的代码是：

```
my $var = "VP KDC T. 20, pgcet. 5, Ch. 415, Refs %50 Annos";

if($var =~ m/(.*)\,(.*)/sgi)
{
    print "$1\n$2";
} 
```

我了解到应该匹配第一次出现的逗号。但这里最后一次匹配。我得到的输出是：

```
VP KDC T. 20, pgcet. 5, Ch. 415
 Refs %50 Annos 
```

有人可以解释一下这种匹配是如何工作的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T07:23:54.653

来自[文档](http://perldoc.perl.org/perlre.html#Regular-Expressions)：

> 默认情况下，量化的子模式是“贪婪的”，也就是说，它会尽可能多地匹配（给定一个特定的起始位置），同时仍然允许模式的其余部分匹配

因此，首先`(.*)`将尽可能多地占用。

简单的解决方法是使用非贪婪量词：`*?`. 或者不是匹配每个字符，而是除逗号之外的所有字符：`([^,]*)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T07:33:37.420

**贪心和不贪心匹配**

Perl 正则表达式通常匹配可能的最长字符串。

例如：

```
my($text) = "mississippi";
$text =~ m/(i.*s)/;
print $1 . "\n"; 
```

运行前面的代码，你会得到：

```
ississ 
```

它匹配第*一个 i、最后一个 s 以及它们之间的所有内容*。但是，如果您想将第一个 i 与最接近它的 s 匹配怎么办？使用此代码：

```
my($text) = "mississippi";
$text =~ m/(i.*?s)/;
print $1 . "\n"; 
```

现在看看代码产生了什么：

```
is 
```

显然，问号的使用使匹配变得不贪心。但是还有一个问题是正则表达式总是尽可能早地匹配。

资料来源：[http ://www.troubleshooters.com/codecorn/littperl/perlreg.htm](http://www.troubleshooters.com/codecorn/littperl/perlreg.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T07:23:56.600

在您的正则表达式中使用问号：

```
if($var =~ m/(.*?)\,(.*)/sgi)
{
    print "$1\n$2";
} 
```

所以：

*   (.*)\, 意思是：“匹配尽可能多的字符，只要后面有逗号”
*   (.*?)\, 意思是：“匹配任何字符，直到你偶然发现一个逗号”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T07:41:10.817

`(.*)\,`- 你可能期望它会匹配到第一个逗号。但是它足够贪婪地匹配它遇到的所有 xcharacters，直到最后一个逗号而不是第一个逗号。所以它匹配到最后一个命令。第二场比赛是剩下的比赛。

避免贪婪模式匹配 adda`?`之后`*`

# jquery - MVC3 通过检查 DB 来显示验证消息

> ID：15106255
> 
> 赞同：0
> 
> 时间：2013-02-27T07:18:10.700
> 
> 标签：jquery, asp.net-mvc-3, validation

因为我是这个 MVC3 的新手，所以无法弄清楚这一点。情况如下——

我有一个表格。当客户输入电子邮件地址时，onkeyup 会检查电子邮件地址在数据库中已存在的位置。如果是，我想在文本框旁边显示验证错误消息“数据库中已存在电子邮件”，并且我想阻止用户提交表单，直到客户尝试使用新的电子邮件地址。我在模型中设置的其余验证规则。但这需要检查 DB 。

问题是我不知道如何覆盖 jquery 验证并在文本框旁边显示特定的验证错误消息。

有人可以帮我吗？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:20:09.643

您可以使用[`[Remote]`](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx)允许您通过向服务器发送 AJAX 请求来执行此验证的属性。这个想法是用 Remote 属性装饰视图模型上的 Email 属性，该属性指示将被调用以验证的控制器操作：

```
[Remote("IsEmailAvailable", "Validation")]
public string Email { get; set; } 
```

然后编写一个控制器操作来执行此验证：

```
public ActionResult IsEmailAvailable(string email)
{
    if (CheckEmailAvailability(email))
    {
        return Json(true, JsonRequestBehavior.AllowGet);
    }

    return Json("Sorry, the specified email is already taken", JsonRequestBehavior.AllowGet); 
} 
```

然后在您的视图中，您将拥有相应的字段：

```
<div>
    @Html.LabelFor(x => x.Email)
    @Html.EditorFor(x => x.Email)
    @Html.ValidationMessageFor(x => x.Email)
</div> 
```

重要的是要提到您需要在您提交表单的控制器操作中执行相同的检查，因为在用户最后一次验证电子邮件是否可用和提交表单的时间之间电子邮件可能已被其他人占用：

```
[HttpPost]
public ActionResult ProcessFormSubmit(MyViewModel model)
{
    // Warning this will not call the validation controller action specified
    // by the Remote attribute
    if (!ModelState.IsValid)
    {
        return View(model);
    }

    // now make sure you check for the email
    if (!CheckEmailAvailability(email))
    {
        // the email is already taken
        return View(model);
    }

    // at this stage the model is valid => you could process it
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:22:48.840

您可以使用**[Remote]**轻松提供用于验证项目的 URL。否则，您可以在 其中编写自定义逻辑的**自定义数据注释。**

当您在文本框中输入内容时，远程属性验证将在 ajax 的帮助下触发，但是当您提交内容并调用**Model.IsValid()**方法时，将触发自定义属性验证。快乐编码

[如何使用远程属性的链接](http://msdn.microsoft.com/en-us/library/gg508808%28v=vs.98%29.aspx)

# php - 过滤表列并查看另一列中的数据

> ID：15106262
> 
> 赞同：-9
> 
> 时间：2013-02-27T07:18:37.083
> 
> 标签：php, mysql, sql, pivot

表'acad_concerns'

```
id  student_name    start_date  end_date    concern         comments

 1  Anne Curtis     2013-02-27  2013-02-28  Academics       this acad.. 
2   benedict grey   2013-02-27  2013-02-28  Academics       also acad..
3   Anne Curtis     2013-02-27  2013-02-28  Accomodation    this is aco
4   benedict grey   2013-02-27  2013-02-28  Accomodation    also accomo 
```

我想这样查看：

```
 student_name    Accademics   Accomodation   

    Anne Curtis     this acad..  this is accom..
    benedict grey   also acad..  also accom.. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T07:21:37.957

> **我无法解释这个**

让我为你解释一下。

您正在寻找*旋转*每个学生的`comments`值。`concern`不幸的是，MySQL 没有数据透视表操作符。

但是，您可以使用`CASE`表达式来执行此操作。像这样：

```
SELECT 
  student_name,
  MAX(CASE WHEN concern = 'Academics'   THEN comments END) AS 'Accademics',
  MAX(CASE WHEN concern = 'Accomodation' THEN comments END) AS 'Accomodation'
FROM acad_concern    
GROUP BY student_name; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/0d022/2)

这会给你：

```
|  STUDENT_NAME |  ACCADEMICS | ACCOMODATION |
----------------------------------------------
|   Anne Curtis | this acad.. |  this is aco |
| benedict grey | also acad.. |  also accomo | 
```

对于多个`concern`s 并且您不需要手动编写它们，您必须使用动态 SQL 动态执行此操作，如下所示：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(concern = ''',
      concern, ''', comments, NULL)) AS ', '''', concern , '''')
  ) INTO @sql
FROM acad_concern;

SET @sql = CONCAT('SELECT student_name, ', @sql , '
    FROM acad_concern    
    GROUP BY student_name;');

prepare stmt 
FROM @sql;

execute stmt; 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/0d022/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:22:21.443

```
 SELECT distinct student_name
        (SELECT comments FROM acad_concern where student_name=student.student_name where concern='Accademics') 
    as Accademics,
        (SELECT comments FROM acad_concern where student_name=student.student_name where concern='Accomodation')
     as Accomodation  
        FROM acad_concern student 
```

# java - MobileNo 验证错误和日期时间验证技术

> ID：15106267
> 
> 赞同：2
> 
> 时间：2013-02-27T07:18:47.600
> 
> 标签：java, javascript, jsp, struts2, struts-validation

我正在开发 Struts 2 应用程序，试图为 10 位数的手机号码提供验证。

我只允许 10 位数字，但即使我输入 10 位数字，它仍然显示验证错误消息，并且还想知道有什么方法可以购买我们可以对日期时间选择器 DOJO 标签执行验证。

**Empaction-validation.xml**

```
<!DOCTYPE validators PUBLIC
"-//OpenSymphony Group//XWork Validator 1.0.2//EN"
"http://www.opensymphony.com/xwork/xwork-validator-1.0.2.dtd">

<validators>
   <field name ="firstname">
     <field-validator type="requiredstring">
      <message key="requiredstring"/>
    </field-validator>
  </field>

       <field name ="email">
        <field-validator type = "email">
        <message>provide valid Email</message>

        </field-validator>

       </field> 

   <field name ="mobileno">

    <field-validator type="long">
            <param name="min">10</param>
            <param name="max">10</param>

            <message key="stringlength" />
    </field-validator>

</field>

</validators> 
```

**注册表单是**

```
<%@ page language ="java" contentType ="text/html; charset=ISO-8859-1" pageEncoding ="ISO-8859-1"%>
<%@ taglib uri="/struts-tags" prefix="s"%>
<%@ taglib uri="/struts-dojo-tags" prefix="sx" %> 
 <html>
    <head>
       <sx:head/>
    <script type="text/javascript"  src ="script.js"></script>

    </head>  

      <body>
        <div align="center"> <h1 style="color: red">  ENPLOYEE REGISTRATION FORM</h1>
       <s:form  action="emplogin"  method="post" >

      <s:textfield name="firstname" label="Employee Firstname"/>
      <s:textfield name ="lastname" label ="Last name"/>  
      <s:textfield name ="id"  label="Id"/>
      <s:radio name ="gender"   list="{'male', 'female'}" label = "Gender"/>
    <sx:datetimepicker name="dob" displayFormat="dd-MMM-yyyy"  label="DOB"></sx:datetimepicker> 
      <s:radio  name ="maritalstatus" list="{'singale','married'}" label="Marital Status" />

      <s:textfield name ="email" label ="Email"/>
 <sx:datetimepicker name ="joiningdate" displayFormat="dd-MMM-yyyy" label="Joining Date"></sx:datetimepicker>

      <s:textfield name= "designation" label = "Designation"/>
      <s:textarea name ="address" label ="Address" />
      <s:textfield name = "country" label ="Country" />     
      <s:textfield name  ="state" label = "State" />
      <s:textfield name  ="city" label ="City"/> 
      <s:textfield name ="pincode" label ="Pincode"/>
      <s:textfield name ="mobileno" label="Mobile No"/>
      <s:select   name ="groups" list="{'group 1', 'group 2', 'group 3'}"  label ="Group"  cssStyle="{width:184px"/>
     <tr><td>&nbsp;</td></tr>
        <tr>
    <td>&nbsp;</td>
      <s:submit align="center"></s:submit>
      </s:form>
       </div>
    </body>
 </html> 
```

**在我的 bean 类中它是`long`类型**

```
package model;

public class Empmodel {
private String firstname;
private String lastname;
private String id;
private String gender;
private String dob;
public String getDob() {
    return dob;
}
public void setDob(String dob) {
    this.dob = dob;
}
private String maritalstatus;
private String email;
private String joiningdate;
private String designation;
private String address;
private String country;
private String state;
private String city;
private int  pincode;
private long mobileno;
private String groups;
public String getFirstname() {
    return firstname;
}
public void setFirstname(String firstname) {
    this.firstname = firstname;
}
public String getLastname() {
    return lastname;
}
public void setLastname(String lastname) {
    this.lastname = lastname;
}
public String getId() {
    return id;
}
public void setId(String id) {
    this.id = id;
}
public String getGender() {
    return gender;
}
public void setGender(String gender) {
    this.gender = gender;
}

public String getMaritalstatus() {
    return maritalstatus;
}
public void setMaritalstatus(String maritalstatus) {
    this.maritalstatus = maritalstatus;
}
public String getEmail() {
    return email;
}
public void setEmail(String email) {
    this.email = email;
}
public String getJoiningdate() {
    return joiningdate;
}
public void setJoiningdate(String joiningdate) {
    this.joiningdate = joiningdate;
}
public String getDesignation() {
    return designation;
}
public void setDesignation(String designation) {
    this.designation = designation;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}
public String getCountry() {
    return country;
}
public void setCountry(String country) {
    this.country = country;
}
public String getState() {
    return state;
}
public void setState(String state) {
    this.state = state;
}
public String getCity() {
    return city;
}
public void setCity(String city) {
    this.city = city;
}

public long getMobileno() {
    return mobileno;
}
public void setMobileno(long mobileno) {
    this.mobileno = mobileno;
}
public String getGroups() {
    return groups;
}
public void setGroups(String groups) {
    this.groups = groups;
}
public int getPincode() {
    return pincode;
}
public void setPincode(int pincode) {
    this.pincode = pincode;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:49:50.037

使用`stringlenth`验证器可以验证字符串的长度。检查[字符串长度验证器](https://struts.apache.org/core-developers/stringlength-validator.html)。

并且使用`date`验证器可以验证日期格式。检查[日期验证器](https://struts.apache.org/core-developers/date-validator.html)。

如果您想使用验证日期时间选择器，`validate()`您应该使用解析选择器返回的值的逻辑，`SimpleDateFormat`如果您不使用其他日期时间库（如[JODA）](http://joda-time.sourceforge.net/)并且不关心时区，那么您应该`ThreadLocal`为日期时间创建解析器。

**编辑：**

**验证器.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE validators PUBLIC
        "-//OpenSymphony Group//XWork Validator Config 1.0//EN"
        "http://www.opensymphony.com/xwork/xwork-validator-config-1.0.dtd">

<validators>
  <validator name="longlength" class="jspbean.struts.vaidators.LongLengthFieldValidator"/>
</validators> 
```

**LongLengthFieldValidator.java**

```
public class LongLengthFieldValidator extends FieldValidatorSupport {

  private boolean doTrim = true;
  private int maxLength = -1;
  private int minLength = -1;

  public void setMaxLength(int maxLength) {
    this.maxLength = maxLength;
  }

  public int getMaxLength() {
    return maxLength;
  }

  public void setMinLength(int minLength) {
    this.minLength = minLength;
  }

  public int getMinLength() {
    return minLength;
  }

  public void setTrim(boolean trim) {
    doTrim = trim;
  }

  public boolean getTrim() {
    return doTrim;
  }

  public void validate(Object object) throws ValidationException {
    String fieldName = getFieldName();
    String val = getFieldValue(fieldName, object).toString();

    if (val == null || val.length() <= 0) {
      // use a required validator for these
      return;
    }
    if (doTrim) {
      val = val.trim();
      if (val.length() <= 0) {
        // use a required validator
        return;
      }
    }

    if ((minLength > -1) && (val.length() < minLength)) {
      addFieldError(fieldName, object);
    } else if ((maxLength > -1) && (val.length() > maxLength)) {
      addFieldError(fieldName, object);
    }
  }
} 
```

**XXX-validation.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE validators PUBLIC "-//OpenSymphony Group//XWork Validator 1.0.2//EN" "http://www.opensymphony.com/xwork/xwork-validator-1.0.2.dtd">
<validators>

  <validator type="longlength">
                <param name="fieldName">mobileno</param>
                <param name="minLength">10</param>
               <param name="maxLength">10</param>
               <param name="trim">true</param>
               <message>Your mobileno number needs to be 10 characters long</message>
  </validator>
</validators> 
```

# java - how to cache data when using quartz scheduler with spring

> ID：15106269
> 
> 赞同：1
> 
> 时间：2013-02-27T07:19:02.520
> 
> 标签：java, spring, quartz-scheduler

I am using quartz + spring for scheduling. If I want to store some static data in memory and use it for every iteration of the job, how can that be possible.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T11:05:47.237

我假设您使用的是 Quartz 1.8。Quartz 2.x 提供了注释，使实现更加方便，但是一旦你有了 1.8 的代码，用这些注释替换它就不难了。

1.  确保你的工作实现了`StateFulJob`接口。如果您使用 Quartz 2.x，请`Job`改为实现接口并使用`@PersistJobDataAfterExecution`.
2.  从作业上下文中，检索`JobDataMap`with `context.getJobDetail().getJobDataMap()`。
3.  现在，您可以获取值并将其放入该映射中，并且您放入映射中的每个值都可用于作业的后续运行。

确保您放入的所有对象`JobDataMap`都是可序列化的。还要将 Quartz 配置为不同时运行作业以防止出现竞争条件。

# wireless - ns2 projects in wireless networks

> ID：15106271
> 
> 赞同：-1
> 
> 时间：2013-02-27T07:19:11.390
> 
> 标签：wireless, ns2

how to construct tree in ns2 and how to write routing protocol in ns2? clustered nodes to be arranged in tree structure and code for deflection routing in ns2. I also need to know how to increase the energy of a node and how to make a node inactive.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T10:50:07.123

为了模拟节点的能量，示例`tcl/ex/wireless-newnode-energy.tcl`

此外，要查看在模拟期间更改节点能量的可用命令，请参见`mac/wireless-phy.cc`方法中的源文件`int WirelessPhy::command(int argc, const char*const* argv)`

要在 ns2 中实现自己的路由协议，请阅读[这篇文章](http://imtl.skku.ac.kr/~hjlim99/ns2/%5b%BB%F5%B7%CE%BF%EE%20%B6%F3%BF%EC%C6%C3%20%C7%C1%B7%CE%C5%E4%C4%DD%20%B1%B8%C7%F6%5d/Implementing%20a%20New%20Manet%20Unicast%20Routing%20Protocol%20in%20ns2.pdf)

我没有完全理解关于树结构和偏转的部分。

# mysql - MySQL - DATETIME 字段的约束未返回预期结果

> ID：15106276
> 
> 赞同：1
> 
> 时间：2013-02-27T07:19:35.187
> 
> 标签：mysql, sql, datetime

这是我的测试表：

```
CREATE TABLE `test` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `thetime` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

INSERT INTO `test` (`thetime`) VALUES ('2013-02-26 18:07:00');
INSERT INTO `test` (`thetime`) VALUES (NULL);
INSERT INTO `test` (`thetime`) VALUES (NULL); 
```

从测试中选择 *：

```
id | thetime
------------------------
1  | 2013-01-01 00:00:00
2  | null
3  | null 
```

SELECT * from test where thetime <> '2013-01-01 00:00:00':

```
id | thetime
------------------------
empty result set 
```

我预计会`null`在该字段中获得 2 条具有值的记录`thetime`

```
id | thetime
------------------------
2  | null
3  | null 
```

我想知道为什么我没有得到这个结果的值 null 与 '2013-01-01 00:00:00' 不同

有谁知道？

干杯，马克西姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T07:20:58.367

你得到空结果的原因是因为`null`没有定义。

当您想比较空值时，请使用`IS NULL`

```
SELECT * 
from   test 
where thetime IS NULL OR
      thetime <> '2013-01-01 00:00:00' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T07:22:30.177

试试这样：

```
SELECT * 
FROM test 
WHERE thetime <> '2013-01-01 00:00:00' 
   OR thetime IS NULL 
```

请参阅文档以进一步阅读：

*   [使用 NULL 值](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)
*   [NULL 值的问题](http://dev.mysql.com/doc/refman/5.0/en/problems-with-null.html)

# mongodb - ReactiveMongo 插件播放框架似乎在每次查询时都会重新启动

> ID：15106280
> 
> 赞同：0
> 
> 时间：2013-02-27T07:19:52.483
> 
> 标签：mongodb, scala, playframework-2.0

我正在努力写剧本！使用 ReactiveMongo 的 framework 2.1 应用程序，遵循[此示例](https://github.com/sgodbillon/reactivemongo-demo-app)。但是，每次调用插件时，似乎应用程序在操作完成后挂起，而不是插件关闭并重新启动，我们继续前进。功能有效，但我不确定它是否不会崩溃并在此过程中重新启动。

代码：

```
 def db = ReactiveMongoPlugin.db
  def nodesCollection = db("nodes")

  def index = Action {implicit request =>
    Async {
      Logger.debug("serving nodes list")
      implicit val nodeReader = Node.Node7BSONReader
      val query = BSONDocument(
        "$query" -> BSONDocument()
      )
      val found = nodesCollection.find(query)   
      found.toList.map { nodes =>
        Logger.debug("returning nodes list to requester")
        Ok(views.html.nodes.nodes(nodes))
      }
    }
  }

  def showCreationForm = Action { implicit request =>
    Ok(views.html.nodes.editNode(None, Node.nodeCredForm))
  }

  def create = Action { implicit request =>
    Node.nodeCredForm.bindFromRequest.fold(
      errors => {
        Ok(views.html.nodes.editNode(None, errors))
      },
      node => AsyncResult {
        Node.createNode(node._1, node._2, node._3) match { 
          case Right(myNode) => {
            nodesCollection.insert(myNode).map { _ =>
            Redirect(routes.Nodes.index).flashing("success" -> "Node Added")
          }
        }
        case Left(message) => {
          Future(Redirect(routes.Nodes.index).flashing("error" -> message))
        }
      }
    }
  )
} 
```

记录：

```
[debug] application - in Node constructor
[debug] application - done inseting, redirecting to nodes page

--- (RELOAD) ---

[info] application - ReactiveMongoPlugin stops, closing connections...
[info] application - ReactiveMongo stopped. [Success(Closed)]
[info] application - ReactiveMongoPlugin starting... 
```

这张照片有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:39:19.747

那张照片似乎没有任何问题。如果您只向我显示该日志输出，我会说您会更改播放应用程序中的文件。这将导致应用程序重新加载。

我想情况并非如此，因此您的数据库可能位于您的应用程序目录中，导致应用程序在每次更改时重新加载。你的数据库在哪里？

# ios - NSNotificationCenter observer is not getting removed?

> ID：15106281
> 
> 赞同：2
> 
> 时间：2013-02-27T07:19:59.120
> 
> 标签：ios, cocoa-touch, nsnotificationcenter

I have added `NSNotificationCenter` in `viewDidLoad` method and removed in `viewDidUnload` but it's not getting removed. I am following ARC. I have followed few answer but I didn't get luck. I dont have reputation for give comments so posting some thing looks like duplicate. Please don't -ve votes.

Sample code:

```
- (void)viewDidLoad
{     
    [[NSNotificationCenter defaultCenter ] addObserver:self.containerView
                                              selector:@selector(loadInitialScreen)
                                                  name:CLEARSCREEN_DEPOSIT  
                                                object:NULL];
}

- (void)viewDidUnload
{
    [[NSNotificationCenter defaultCenter] removeObserver:self.containerView
                                                    name:CLEARSCREEN_DEPOSIT 
                                                  object:nil];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:29:11.780

根据您的需要，您应该在 或 方法`-viewWillDisappear:`中删除观察者`-viewDidDisappear:`。`-dealloc`原因是`-viewDidUnload`在 iOS6+ 中不再被调用，而在 iOS6 之前，它在收到内存警告时被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:23:09.610

Try to use `viewDidDisappear` instead `viewDidUnload` :

```
-(void)viewDidDisappear:(BOOL)animated
{
    [[NSNotificationCenter defaultCenter] removeObserver:self.containerView
                                                    name:CLEARSCREEN_DEPOSIT object:nil];
    [super viewDidDisappear:animated];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:34:17.287

当应用程序/视图控制器收到内存警告时，会调用 viewDidUnload（对于 < iOS 6.0）。删除视图时不会调用它，因为调用了 dealloc。但是当你使用 ARC 时，你不能实现 dealloc 方法。

最好的办法是删除方法中的观察者`loadInitialScreen`，如果它只需要调用一次的话。

如果你的通知可以多次发布，最好在 viewDidDisappear 中移除观察者，然后在 ViewWillAppear 中为通知添加观察者

# c# - 如何控制 MVVM WinRT/XAML Windows Store 应用程序中 ListView 的滚动位置？

> ID：15106290
> 
> 赞同：1
> 
> 时间：2013-02-27T07:20:41.723
> 
> 标签：c#, mvvm, windows-runtime, windows-store-apps, winrt-xaml

[这与如何在 MVVM WPF 应用程序中控制 ListBox 的滚动位置中](https://stackoverflow.com/questions/2292360/how-to-control-the-scroll-position-of-a-listbox-in-a-mvvm-wpf-app)提出的问题类似，但相反，我试图从 Windows 应用商店应用程序中实现类似的效果：我想知道如何从 MVVM 风格的应用程序的视图模型中滚动 a`ListView`到当前（或任意）项目。

与 WPF 相比，WinRT 存在一些限制：

*   该`IsSynchronizedWithCurrentItem`属性在或相关类上不受支持`ListView`（该属性存在但使用它会引发运行时异常，表明当前不支持该属性）；
*   仅部分支持`ICollectionView`,`CollectionViewSource`和其他相关类型。

幸运的是，Bernardo Castilho 在 CodeProject ( [http://www.codeproject.com/Articles/527686/A-WinRT-CollectionView-class-with-Filtering-and-So](http://www.codeproject.com/Articles/527686/A-WinRT-CollectionView-class-with-Filtering-and-So) )`CollectionViewSource`的解决方案优雅地解决了这个问题。不幸的是，缺乏对 的支持使得解决问题的其余部分变得棘手。`IsSynchronizedWithCurrentItem`

已经有几个类似的问题（例如[Windows 8 Metro 风格 ListView auto scroll](https://stackoverflow.com/questions/12038022/windows-8-metro-style-listview-auto-scroll/12038266#12038266)），但它们没有从 MVVM 的角度解决问题，也不允许我在项目中使用最少的代码隐藏来维护干净的 MVVM 架构.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:33:05.310

您可以从 WinRT XAML 工具包中检查[`ListViewExtensions.ItemToBringIntoView`](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/2ca90eed485f#WinRTXamlToolkit/Controls/Extensions/ListViewExtensions.cs)附加属性，它的工作方式应该与您绑定`SelectedItem`属性的方式类似，但它会将项目显示在视图中。

# git - Why git fetch didn't fetch one of my remote branch reference

> ID：15106291
> 
> 赞同：0
> 
> 时间：2013-02-27T07:20:43.667
> 
> 标签：git, git-branch, remote-branch

I have one remote repository and two working dirs. Both are setup with this one remote repository.

From working DIR_1 I make push from branch dev like that:

```
git push origin dev 
```

Next when I'm on working DIR_2 I would like to get the reference to this new remote branch dev. So I enter the following:

```
git fetch origin # To update and fetch new remote branches
git branch -a # To list all branches (local and remote) that my local git see 
```

Now I have problem because git fetch didn't see the new remote dev branch. Can somebody help me with that. I'am doing something wrong. When I switch to remote machine and execute command:

```
git branch 
```

Then I see this dev branch. What to do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:25:34.737

如果`git push`在本地存储库 1 中成功，那么远程应该在远程存储库上。在本地存储库 2 中获取后，该分支应以`git branch -r`（或`git branch -a`）作为远程分支出现在分支列表中，名为`origin/dev`. 如果不是这种情况，那么您要么没有正确获取，要么远程存储库实际上没有该分支。

您是否有权访问远程存储库（Web 界面、shell 访问等）以确认该分支确实存在？

# google-app-engine - App Engine 实例 ID

> ID：15106292
> 
> 赞同：3
> 
> 时间：2013-02-27T07:20:46.403
> 
> 标签：google-app-engine

是否可以获得有关您正在运行的实例的信息？我只想输出一个简单的标识符，用于记录当前正在运行代码的实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T11:48:14.670

由于没有语言标签，并且查看您的个人资料历史记录，我假设您使用的是 GAE/J？

在这种情况下，实例 ID 信息嵌入在您可以通过`ApiProxy.getCurrentEnvironment()`方法获取的环境属性之一中。然后，您可以使用 key 从结果映射中提取实例 ID `BackendService.INSTANCE_ID_ENV_ATTRIBUTE`。

即使密钥存储在 BackendService 中，这种方法也适用于前端实例。总而言之，以下代码将为您获取实例 ID：

```
String tInstanceId = ApiProxy.getCurrentEnvironment()
                             .getAttributes()
                             .get( BackendService.INSTANCE_ID_ENV_ATTRIBUTE )
                             .toString(); 
```

请记住，这种方法并未被 Google 记录在案，并且将来可能会在没有警告的情况下进行更改。但是由于您的用例仅用于日志记录，我认为现在就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T21:47:10.860

随着[Modules的出现，您可以](https://developers.google.com/appengine/docs/java/modules/)[以更优雅的方式](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/modules/ModulesService#getCurrentInstanceId%28%29)获取当前实例 id ：

`ModulesServiceFactory.getModulesService().getCurrentInstanceId()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-05T20:44:29.567

更好的是，您应该将调用包装在 try catch 中，以便它也可以在本地正常工作。

导入这个

```
import com.google.appengine.api.modules.ModulesException;
import com.google.appengine.api.modules.ModulesServiceFactory; 
```

然后你的方法可以运行这个

```
String instanceId = "unknown";
try{
    instanceId = ModulesServiceFactory.getModulesService().getCurrentInstanceId();
} catch (ModulesException e){
    instanceId = e.getMessage();
} 
```

如果没有 try catch，在本地运行时会出现一些令人讨厌的错误。

我发现当使用与 pub-sub 和其他位混合的端点来尝试确定某些事情为何不同地工作并确定它是否与新实例相关时，这对于调试非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-21T04:23:26.203

以前不确定，但在 2021 年的今天，系统环境变量`GAE_INSTANCE`似乎包含实例 ID：

```
instanceId = System.getenv("GAE_INSTANCE") 
```

# powershell - Powershell：如何授予对用户“每个人”具有完全控制权的文件夹的权限？

> ID：15106299
> 
> 赞同：1
> 
> 时间：2013-02-27T07:21:03.137
> 
> 标签：powershell

我有一个文件夹

```
C:\TEMP 
```

里面有子文件夹

`C:\TEMP\a` `C:\TEMP\b`和一个文件名`apple.txt`

如何使用 powershell 脚本将所有权限更改为具有完全控制访问权限的所有人？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T07:37:10.600

```
$user = "domain\user"
$Folders = Get-childItem c:\TEMP\
$InheritanceFlag = [System.Security.AccessControl.InheritanceFlags]::ContainerInherit -bor [System.Security.AccessControl.InheritanceFlags]::ObjectInherit
$PropagationFlag = [System.Security.AccessControl.PropagationFlags]::None
$objType = [System.Security.AccessControl.AccessControlType]::Allow 

$Folders | %{
    $Folder = $_

    $acl = Get-Acl $Folder
    $permission = $user,"Modify", $InheritanceFlag, $PropagationFlag, $objType
    $accessRule = New-Object System.Security.AccessControl.FileSystemAccessRule $permission

    $acl.SetAccessRule($accessRule)
    Set-Acl $Folder $acl
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-27T21:44:05.560

## 感谢您的回答。我做了一些更正和增强（关键字/预期模式）

```
$user = "everyone"
$Folders = Get-childItem -Directory F:\SITE\
$InheritanceFlag = [System.Security.AccessControl.InheritanceFlags]::ContainerInherit -bor [System.Security.AccessControl.InheritanceFlags]::ObjectInherit
$PropagationFlag = [System.Security.AccessControl.PropagationFlags]::None
$objType = [System.Security.AccessControl.AccessControlType]::Allow 
$keyword = "PublicTempStorage"

$Folders | %{
    $Folder = $_

    $acl = Get-Acl $Folder.FullName
    $permission = $user,"Modify", $InheritanceFlag, $PropagationFlag, $objType
    $accessRule = New-Object System.Security.AccessControl.FileSystemAccessRule $permission

    $acl.SetAccessRule($accessRule)
    if ($Folder -match $keyword) 
    {
        Set-Acl -AclObject $acl -Path $Folder.FullName
    }
} 
```

# asp.net-mvc - ASP.NET MVC 3 中的下拉菜单

> ID：15106301
> 
> 赞同：0
> 
> 时间：2013-02-27T07:21:08.667
> 
> 标签：asp.net-mvc, drop-down-menu

我是 MVC 的新手，所以可能很困惑。有人可以解释一下razor中的下拉菜单吗？我的问题是-

*   dropdownlist 和 dropdownlistfor 有什么区别
*   我如何将我的数据库表的 ID 列作为值传递，将 NAME 列作为文本传递。
*   如何将“其他”添加到下拉列表中。
*   我如何在后面的代码中访问 selectedlistitem。

如果可能，请举例说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:39:10.707

1.  DropDownList 由如下代码生成：

    ```
    @Html.DropDownList("PersonId", new SelectList(Model.People, "Id", "Text");
    ```

    另一方面， DropDownListFor 是这样生成的：

    ```
    @Html.DropDownListFor(m => m.PersonId, new SelectList(Model.People, "Id", "Text")
    ```

    DropDownList 的问题在于它有一个魔术字符串，如果您决定稍后重构模型，那么您也会忘记更改魔术字符串。
2.  您可以像这样执行 LINQ 查询：

    ```
    var datalist = New SelectList(from x in _peopleService
                                  select new SelectListItem { Text = x.Name, Value = x.Id});
    ```

    如果您之间没有服务或 ORM，则需要将其应用于您的情况，但您可以生成这样的列表。
3.  在 nr 2 之后，您可以

    ```
    datalist.Add(new SelectListItem() { Text = "Other", Value = "-1"});
    ```

    此外，您必须将该数据列表放入传递给视图的视图模型/模型中，以便您可以使用它生成一个选择列表项。在这种情况下，您可以这样做：

    ```
    @Html.DropDownListFor(x => x.PersonId, Model.PersonList);
    ```

    如果您将列表存储为模型中的 PersonList。
4.  在您的 Viewmodel（好吧，mvc 中的模型）中，您有一个将存储所选项目的属性，请查看第一个问题 - 在这种情况下，所选项目的 id 将存储在 PersonId 属性中。

# bigcommerce - How to change custom panel text in bigcommerce store?

> ID：15106305
> 
> 赞同：1
> 
> 时间：2013-02-27T07:21:24.417
> 
> 标签：bigcommerce

I have login with Bigcommerce control panel and try this for manage custom panel under bigcommerce store --

```
Go to 'Design' then open 'Design Mode' double click the text and you can change it. 
```

but no there is no way to change the text under this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T15:29:58.520

我认为使用设计模式，您可以更改布局。但是，它似乎不适用于文本。如果您要更改显示文本 - 您应该能够在设置 -> 商店下更改商店名称等内容。

如果您考虑一下 - 类别名称、产品等来自您的库存数据，来自您的数据库。如果您想编辑产品名称或类似的东西，您需要使用您的商店数据并从您的控制面板编辑内容。

希望这可以帮助！干杯。

# android - 单击文件时如何从 sd 列表中读取 txt 文件？安卓

> ID：15106306
> 
> 赞同：0
> 
> 时间：2013-02-27T07:21:30.580
> 
> 标签：android, listview, filter

我正在尝试制作一个显示 sd 卡上指定文件夹中的文件的应用`list`程序`.txt`。当用户选择一个文件时，我希望应用程序打开它并读取它的内容。

`.txt`有没有办法只在 my上显示带有扩展名的文件`list`？

这是我用来打开文件并在用户选择文件时读取文本的代码：

```
public class TxtView extends ListActivity {

private File currentDir;
private FileArrayAdapter adapter;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    currentDir = new File("/sdcard/Txt");
    fill(currentDir);
}

private void fill(File f)
{
    File[]dirs = f.listFiles();
     this.setTitle("Current Dir: "+f.getName());

     List<Option>dir = new ArrayList<Option>();
     List<Option>fls = new ArrayList<Option>();
     try{
         for(File ff: dirs)
         {
            if(ff.isDirectory())
                dir.add(new Option(ff.getName(),"Folder",ff.getAbsolutePath()));
            else
            {
                fls.add(new Option(ff.getName(),"File Size: "+ff.length(),ff.getAbsolutePath()));
            }
         }
     }catch(Exception e)
     {

     }
     Collections.sort(dir);
     Collections.sort(fls);
     dir.addAll(fls);
     if(!f.getName().equalsIgnoreCase("Txt"))
         dir.add(0,new Option("..","Parent Directory",f.getParent()));
     adapter = new FileArrayAdapter(TxtView.this,R.layout.file_view,dir);
     this.setListAdapter(adapter);
}
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    Option o = adapter.getItem(position);
    if(o.getData().equalsIgnoreCase("folder")||o.getData().equalsIgnoreCase("parent directory")){
            currentDir = new File(o.getPath());
            fill(currentDir);
    }
    else
    {

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T05:21:31.450

您可能希望使用 ListView 或 GridView 来显示所有文件选项。无论哪种情况，您都可以使用 ArrayAdapter 或扩展 BaseAdapter，它们用于包含填充视图的数据。我不会发布所有代码，因为它很多，但[这里有一个示例](http://www.vogella.com/articles/AndroidListView/article.html)。关于获取您想要的文件，假设您的位置是 sdcard/yourdir，而不是：

```
String path = Environment.getExternalStorageDirectory()+"/yourdir/";
File f = new File(path);
ArrayList<String> allTxtFiles = new ArrayList<String>();
try{
  for(File tmp : files.listFiles() ){
    if(tmp.toString().matches(".*\\.txt"))
        allTextFiles.add(path+tmp.toString());
  }
}catch{
} 
```

您可能不想使用确切的代码，但应该将您带到您需要到达的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:53:28.317

我猜您正在使用 android，
1 - 使用过滤器读取目录中的所有文件以仅允许 .txt 文件
2 - 在 ListView 上显示列表
3 - 单击时，将绝对文件路径发送到您的文本文件阅读器功能

# java - 创建递归树时出现运行时错误（空点异常）

> ID：15106311
> 
> 赞同：0
> 
> 时间：2013-02-27T07:22:08.947
> 
> 标签：java, json, jtree

我想将以下内容作为 Json 输入并将其转换为 java 中的树数据结构。

```
 {
                    "component": "A",
                    "status": 0,
                    "children": [
                        {
                            "component": "AA",
                            "status": 0,
                            "children": [
                                {
                                    "component": "AAA",
                                    "status": 0,
                                    "children": []
                                },
                                {
                                    "component": "AAB",
                                    "status": 0,
                                    "children": []
                                }
                            ]
                        },
                        {
                            "component": "AB",
                            "status": 0,
                            "children": [
                                {
                                    "component": "ABA",
                                    "status": 0,
                                    "children": []
                                },
                                {
                                    "component": "ABB",
                                    "status": 0,
                                    "children": []
                                }
                            ]
                        }
                } 
```

我编写了以下代码，但如果有人能找到错误，它会显示运行时错误。当它应该返回显示空指针异常的位置时，for循环正在执行直到通过递归没有节点的子节点

```
 import java.io.FileNotFoundException;
            import java.io.FileReader;
            import java.io.IOException;
            import java.util.List;
            import java.io.BufferedReader;
            import org.json.*;

            public class Sample {

                public static void main(String[] args) {

                        BufferedReader in = new BufferedReader( new FileReader("json.txt") );
                        StringBuilder builder = new StringBuilder();
                        String line;
                        while ( ( line = in.readLine() ) != null ) {
                            builder.append(line);

                        object = new JSONObject( builder.toString() );
                        imlementation im = new imlementation();
                        im.createnode(object);                                                      
                }                   
            }
            public class node {
                    public String component;
                    public int status;
                    public List<node> children;
            }

            import org.json.JSONArray;
            import org.json.JSONException;
            import org.json.JSONObject;

            public class imlementation {

                public node createnode(JSONObject ob)
                {
                    node n = new node();
                    try
                    {
                        JSONArray children = ob.getJSONArray("children");
                        String component = ob.getString("component");
                        int status = ob.getInt("status");

                        n.component = component;
                        n.status = status;
                        n.children=null;
                        System.out.println( "component " + component + "status " + status );

                        int i;
                        for(i=0;i<children.length();i++)
                        {
                            n.children.add( createnode( children.getJSONObject( i ) ) );
                        }
                        return n;

                    }
                    catch ( JSONException ex ) 
                    {
                        ex.printStackTrace();
                    }

                }

                } 
```

堆栈跟踪是

```
 java.lang.NullPointerException
                at imlementation.createnode(imlementation.java:30)
                at imlementation.createnode(imlementation.java:30)
                at SampleSample.main(SampleSample.java:45)
            java.lang.NullPointerException
                at imlementation.createnode(imlementation.java:30)
                at SampleSample.main(SampleSample.java:45) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:47:14.760

你已经设置

```
n.children=null; 
```

然后在你正在做的for循环中

```
n.children.add(....) 
```

这可能导致空指针异常。

你可能需要做

```
n.children = new List<Node>() 
```

在添加之前。

另一个潜在原因是子变量在某些递归调用期间可能为空。children.length 将导致空指针异常。

# c# - 从日期时间只得到一个小时

> ID：15106312
> 
> 赞同：3
> 
> 时间：2013-02-27T07:22:16.710
> 
> 标签：c#, datetime

如何从日期和时间中仅提取小时并将其转换为整数以便我可以与整数进行比较？

例如

datetime = 2013-02-01 10:24:36.000 即日期和时间数据类型

然后

小时 = 只需要一小时，即 10

然后

比较小时 = Convert.ToInt32(time);

**我已经尝试过 item.StartTime ，它是日期和时间：**

```
var time = String.Format("{HH}", (DateTime)item.StartTime);
var hour = Convert.ToInt32(time); 
```

**错误：**

```
Input string was not in a correct format. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:24:18.870

我想你只是在寻找[`DateTime.Hour`](http://msdn.microsoft.com/en-us/library/system.datetime.hour.aspx)：

```
int hour = item.StartTime.Hour; 
```

...但它的值是 10，而不是 24。（`item.StartTime.Minute`会给你 24。）

根据经验，避免字符串转换，除非它们是您要完成的任务的*固有部分。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T07:24:41.543

这个怎么样？

```
DateTime dt = DateTime.Now;
int hour = dt.Hour; 
```

习惯于在 MSDN 文档中查找这些内容是值得的。一旦你习惯了它就很好。对于`DateTime`成员列表，我只需 google System.DateTime 并点击顶部的 MSDN 链接（通常是第一个链接）。

[http://msdn.microsoft.com/en-us/library/system.datetime.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T07:26:05.457

如果您想将此与另一个日期进行比较，您也许可以省去头疼，只需使用`DateTime.Compare`.

```
public static int Compare(
    DateTime t1,
    DateTime t2
) 
```

[http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-02T05:38:16.800

//单行

整数时间 = 日期时间.现在.小时；

# c# - WPF中的正则表达式问题？

> ID：15106317
> 
> 赞同：0
> 
> 时间：2013-02-27T07:22:31.143
> 
> 标签：c#, wpf, regex

```
private void TxtName_TextChanged(object sender, TextChangedEventArgs e)
    {
            string getString = Regex.Replace(TxtName.Text, @"[a-z, A-z, 0-9]", string.Empty);

    } 
```

使用上面的代码，我可以替换与模式@“[az，Az，0-9]”**匹配的字符串。**但我需要的是，我想替换与模式@“[az，Az，0-9]”**不匹配的字符串。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T07:26:01.983

将 a`^`放入方括号中。而且我认为你应该替换逗号并使第二个`z`大写字母`@"[^a-zA-Z0-9]"`匹配所有非字母和数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:14:38.480

如果你想匹配所有不是单词的东西，你可以简单地使用元字符`\W`，它相当于`[^A-Za-z0-9_]`.

# c++ - 访问多图值

> ID：15106319
> 
> 赞同：0
> 
> 时间：2013-02-27T07:22:50.897
> 
> 标签：c++, stl, stdmap

假设我创建一个多图为

```
std::multimap<int, string> mm;
mm[1] = "name1";
mm[1] = "name2";

mm[2] = "name3"
mm[2] = "name4" 
```

在这里，我确信每个键都有两个值，并且值的顺序很重要，因为 name1 在 mm[1] 中排在第一位，而 name2 在 mm[1] 中排在第二位。

任何人都可以建议在不使用计数的情况下访问 mm 值的方法，例如 mm[1]{first value}。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:25:41.877

```
auto range = mm.equal_range(1);
std::for_each(range.first, range.second,
[](const std::pair<const int, std::string>& p)
{
   std::cout << p.second << std::endl;
}); 
```

只是一个更正：`multimap`没有`operator []`. 改为使用`insert`。

# infopath - How to bind Repeating Section from One List depending on DropdownList Selected Value in InfoPath?

> ID：15106320
> 
> 赞同：0
> 
> 时间：2013-02-27T07:22:55.413
> 
> 标签：infopath, infopath2010, infopath-forms-services

Hello I am new to Infopath! I have Two Share point Lists:

```
 1\. ClientList(ClientID,ClientName,Title,ID)
 2\. ClientDocuments(DocumentID,RelatedClient,DocumentName,Title,ID etc)

"RelatedClient" field is **LookUp** Value which refers "Title" Field from **ClientLis**t. 
```

I have populated ClientList using Client DataSource Connection which displays ClientNames and have Inserted Repeated section(data section) from ClientDocuments Data Connection.

On selection of DropDownList which contains ClientNames the Repeating Section must display Documents Related to that Specific Client.

Help Appreciated! Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:22:14.793

为此，您可以将条件格式添加到重复部分：

> 条件：**RelatedClient**不等于***下拉字段***
> 
> 格式化：隐藏此控件

# ruby-on-rails - Rails 控制器未初始化常量

> ID：15106322
> 
> 赞同：0
> 
> 时间：2013-02-27T07:23:04.090
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

这个问题与这个问题[有关](https://stackoverflow.com/questions/15102941/rails-controller-path-not-found)：

我的表格：

```
</br>
<%= form_tag view_all_rater_path, :method => 'get' do %>
  <p>
    <%= text_field_tag :search, params[:search], :placeholder => 'Search by Set # or date' %></br>
    <%= submit_tag "Search", :class => "btn btn-link", :name => nil %>
  </p>
<% end %> 
```

我的路线：

```
 resource :rater, :only => [] do
    collection do
      get :rater_csv
      get :view_all
    end
  end 
```

我的控制器：

```
class RaterController < ApplicationController
  def index
  end

  def view_all
    if params[:search]
      @ratings = RatingSet.find(:all, :conditions => ['id = ? or rating_date like ?', "#{params[:search]}", "%#{params[:search]}%"])
    else
      @ratings = RatingSet.all
    end
  end
end 
```

我的路线具有单一资源：

```
 rater_csv_rater GET    /rater/rater_csv(.:format)    raters#rater_csv
   view_all_rater GET    /rater/view_all(.:format)     raters#view_all 
```

我的具有复数资源的路线：

```
 rater_csv_rater GET    /rater/rater_csv(.:format)    rater#rater_csv
   view_all_rater GET    /rater/view_all(.:format)     rater#view_all 
```

我真的很困惑为什么要定义一个单一的资源`raters#view_all`。

当我定义一个单数资源时：`uninitialized constant RatersController` 当我定义一个复数资源时：`undefined local variable or method`view_all_rater_path'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:27:12.187

在您的路线中添加。

```
resources : raters 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:34:53.707

将您的路线更改为

```
resources :rater, :only => [] do
  collection do
    get :rater_csv
    get :view_all
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:13:34.130

使用单一资源，您仍然需要一个复数控制器，所以`RatersController`就像错误所说的那样。

有了多元化的资源，它将是`view_all_raters_path`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T08:19:53.760

为什么不使用命名空间，因为您在 rater 中不使用任何路由

```
namespace :raters do
  get 'rater_csv'
  get 'view_all'
end 
```

并将您的控制器重命名`Raters`为`Rater`

# java - 如何获得 40 倍响应的正文？

> ID：15106324
> 
> 赞同：1
> 
> 时间：2013-02-27T07:23:09.693
> 
> 标签：java, apache-httpclient-4.x

我的代码是

```
HttpClient client = new DefaultHttpClient();
URI uri = URIUtils.createURI(SCHEME, HOST, PORT, path, formatedParams, null);
HttpGet get = new HttpGet(uri);
ResponseHandler<String> responseHandler = new BasicResponseHandler();
String responseBody = client.execute(get, responseHandler); 
```

当我执行此代码并且响应状态为`400`时，最后一行会引发错误，我无法获得里面应该包含的内容`responseBody`。如果我通过浏览器 ( *Chrome* ) 执行相同的请求，我可以看到响应内容。

**我希望能够在我的 java 代码中看到响应正文。**响应为 200 或 400。

万一，错误是

```
org.apache.http.client.HttpResponseException：错误请求
    在 org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:68)
    在 org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:54)
    在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:1070)
    在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:1044)
    在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:1035)
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:27:17.350

看起来 BasicResponseHandler 无法处理 400。也许可以尝试：

```
 HttpResponse response = client.execute(get);
  InputStream inputStream = response.getEntity().getContent();
  // TODO Stream to String 
```

# asp.net-mvc - 从 ASP MVC 4 视图访问 MEF 部分

> ID：15106327
> 
> 赞同：0
> 
> 时间：2013-02-27T07:23:25.870
> 
> 标签：asp.net-mvc, mef

我们正在使用 ASP MVC 4 构建 Web 应用程序。我们有一个共享部分，它包含告诉应用程序其余部分是否当前请求是“测试”请求的逻辑。我们这样做是为了让我们的端到端测试不会中断我们正常的站点活动。

在控制器上，我们只需在 ctor 中获取该部分的接口，我们就可以访问它。

问题是如何允许视图也访问它。有一次，我们有一个部分视图，我们将其放入添加谷歌分析代码的 _Layout.cshtml 文件中，如果我们正在测试中，我们不想发出该代码。

是否有一种干净的方法可以让剃刀视图访问 MEF 部件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:01:24.267

我不知道在视图中直接进行导入的方法；我通常使用 Import 属性，而那些不能在视图中使用。您可以在另一个类中进行组合，然后在视图中创建对该类的引用，但我不知道您可以称之为“干净”。

如果我了解您的具体情况，在返回具有 Google Analytics 业务的部分视图的操作中似乎更容易解决这个问题。当控制器导入的 MEF 部分说请求是“测试”请求时，该操作只会返回一个空白视图。

# android - 通过 telnet 保存 Android 模拟器快照在“KO：没有块设备可以接受快照”上失败

> ID：15106335
> 
> 赞同：3
> 
> 时间：2013-02-27T07:23:56.600
> 
> 标签：android, android-emulator, telnet, avd

我启动了安卓模拟器。我使用`telnet localhost 5554`.

当我尝试使用 保存快照时`avd snapshot save foo`，我得到`KO: No block device can accept snapshots`.

当我尝试使用 列出可用快照时`avd snapshot list`，我得到`KO: No available block device supports snapshots`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-17T02:53:41.197

“没有可用的块设备”的主要原因是您没有将快照文件分配给模拟器。您可以使用以下参数重新启动模拟器：

```
emulator -snapstorage path/to/data/dir/snapshots.img 
```

您可以从“emulator -help”中参考更多信息。

PS：snapshots.img 使用特定格式，不能只使用空白文件作为快照存储。您可以在此处查看有关创建快照映像的更多信息：

[如何从控制台创建 snapshots.img？](https://stackoverflow.com/questions/12896388/how-to-create-the-snapshots-img-from-console)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:23:56.600

为您的虚拟设备启用快照。

在 Eclipse 中：Window > Android Virtual Device Manager > select device > Edit > 勾选 Snapshots:Enabled 复选框

# c# - Windows 窗体 C# 中的分页

> ID：15106340
> 
> 赞同：1
> 
> 时间：2013-02-27T07:24:13.250
> 
> 标签：c#, winforms, datatable, datasource, paging

我有一个名为 A 的表，有 15 行。我使用**分页概念**在初始加载时仅显示 5 行。一旦用户单击下一步，它将向我显示另外 5 行。现在我要选择任何一两行，从表'A'到表'B'。现在我需要在表 B 中实现相同的分页概念，即如果用户从表“A”中选择超过 5 行的任何东西，它应该将显示限制为表“B”中的 5 行，并且用户应该只能查看第 6 行单击下一步按钮。

我尝试了不同的可能方法，但我未能实现它有人可以帮助我吗？

我已经放置了我的代码片段，用于通过选择一行并将其显示在表 B 中来从表 A 中选择一行

```
 private void btnSelect_Click(object sender, EventArgs e)
    {
        DataGridViewSelectedRowCollection selectedRows = dgvFormFieldsView.SelectedRows;
        dgvFormFieldsView.ClearSelection();

          if (selectedRows.Count == 0)
          {
            MessageBox.Show("No rows selected!", "PDF Perform Warning");
            return;
          }
          for (int i = selectedRows.Count - 1; i >= 0; i--)
          {
                string fieldLabel = null;
                string fieldType = null;
                string tabOrder = null;

                tabOrder = (string)selectedRows[i].Cells[0].Value;
                fieldLabel = (string)selectedRows[i].Cells[1].Value;
                fieldType = (string)selectedRows[i].Cells[2].Value;

                DataRow newRow = selectedFieldsTable.NewRow();
                newRow["Field Name"] = fieldLabel;
                newRow["Field Type"] = fieldType;

                if (!selectedFieldsTable.Rows.Contains(new System.Object[] { fieldType, fieldLabel }))
                {
                    selectedFieldsTable.Rows.Add(newRow);

                }
                else
                {
                    MessageBox.Show("Form Field :" + fieldLabel + " already selected", "PDF Perform Info");
                }
            }
            dgvSelectedFieldsView.DataSource = selectedFieldsTable;
            dgvSelectedFieldsView.ClearSelection();
            applyFormattingSelectedFieldsTable();

            foreach (DataGridViewRow row in dgvSelectedFieldsView.Rows)
            {
                row.Cells[2].Style.BackColor = fieldValueDefaultBackColor;
                row.Cells[2].Style.SelectionBackColor = fieldValueSelectionBackColor;
            }
            if (ConfigParams.mode == Mode.Extract || ConfigParams.mode == Mode.Compare)
                dgvSelectedFieldsView.Columns["Field Value"].ReadOnly = true;
    } 
```

任何人都可以帮助我吗？谢谢！！！！！！

# bash - shell脚本中通配符*的奇怪行为

> ID：15106347
> 
> 赞同：5
> 
> 时间：2013-02-27T07:24:55.083
> 
> 标签：bash, shell, echo, wildcard, zsh

在我的 shell 脚本中，我有以下代码

```
echo * | tr ' ' '\n' 
```

在这里我注意到虽然我使用 * ，但它正在跳过隐藏文件（。*）之后我尝试了一个明显的改变

```
echo .* | tr ' ' '\n' 
```

这解决了我的隐藏文件问题。但我只是对 * 的这种奇怪行为感到好奇

因为 .* 是 * 的子
集

1.  echo * -> 所有文件，包括隐藏文件

2.  echo .* -> 所有隐藏文件

3.  echo [^.]* -> 所有非隐藏文件（当前 echo *）

因此 echo * 的行为类似于 echo [^.]*

如何使用 echo 获取整个文件列表，包括隐藏文件。ls 和 dir 的输出类似，尽管 ls -a 给出了理想的输出

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T07:27:17.390

shell glob`*`被定义为忽略隐藏文件，因此按预期工作。并且*只会*`.*`扩展到隐藏文件。

 *一些 shell 允许通过一个选项来改变这种行为。例如，默认情况下`zsh`允许`setopt dotglob`变得不符合（POSIX）以及全局点文件。对于 bash，您可以使用`shopt -s dotglob`. 但请注意，脚本可能会出现故障，因为它们通常假定 POSIX 行为进行通配。

获取所有文件的最佳选择是不要将 echo 与 glob 一起使用，但是例如`find . -maxdepth 1`（如果您对 echo 感到绝望，也许`echo * .*`会这样做，但如果任一 glob 与任何文件都不匹配，则会出现问题，在这种情况下 glob 模式可以保留）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T07:31:15.497

这在[文件名扩展中有所介绍](http://www.gnu.org/software/bash/manual/bashref.html#Filename-Expansion)

> 当模式用于文件名扩展时，字符 '.' 除非设置了 shell 选项 dotglob，否则必须显式匹配文件名的开头或斜杠之后。匹配文件名时，斜杠字符必须始终显式匹配。在其他情况下，“。” 字符没有特殊处理。

如果要与`.*`一起包含`*`，则必须将两个参数都提供给 echo

```
echo .* * | tr ' ' '\n' 
```

或使用`dotglob`

```
shopt -s dotglob
echo * | tr ' ' '\n' 
```

仍然排除`.`和`..`虽然。*

# cakephp - ACL 行为有什么用？

> ID：15106360
> 
> 赞同：0
> 
> 时间：2013-02-27T07:25:56.563
> 
> 标签：cakephp, acl

不知道 cakePHP 中 ACL 行为的使用？我已经阅读了文档，但仍然不明白我们什么时候可以使用它以及为什么。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:38:37.237

我希望这两个链接可以帮助你。这些都用例子来解释。

[http://book.cakephp.org/1.3/en/The-Manual/Tutorials-Examples/Simple-Acl-controlled-Application.html](http://book.cakephp.org/1.3/en/The-Manual/Tutorials-Examples/Simple-Acl-controlled-Application.html)

和

[http://junalontherun.com/2010/11/27/a-simple-cakephp-access-control-list-acl-tutorial/](http://junalontherun.com/2010/11/27/a-simple-cakephp-access-control-list-acl-tutorial/)

# jquery - 如何使用 jquery 在引导弹出窗口中委托（） HTML 元素

> ID：15106363
> 
> 赞同：0
> 
> 时间：2013-02-27T07:26:01.850
> 
> 标签：jquery, jquery-plugins, twitter-bootstrap

我正在尝试通过单击编辑按钮来启用、禁用控件，但我无法使用 jQuery 委托函数访问它。这里是代码：

```
$('#table-view-task').delegate('tr:not(:first)','click', function(){
    var id = $(this).find('td:first').text();
    var task = $(this).find('td:eq(1)').text();
    $(this).popover({
        html: true,
        delay: { show: 0, hide: 0 },
        title: function () {
                return '<div>'+task+'</div>';
        },
        content: function () {
                return  '<div id="pop-container">'+
                        '<label>ID</label>'+
                        '<input type="text" value="'+id+'" id="txt-edit-id" disabled/>'+
                        '<label>Task</label>'+
                        '<input type="text" value="'+task+'" id="txt-edit-task" disabled/>'+
                        '<a href="#" class="btn" id="btn-edit-task">Edit</a>'+
                        '<a href="#" class="btn" id="btn-save-task">Save</a>'+
                        '</div>';
        }
    });  
}); 
```

这将使用所有 html 元素正确打印弹出框。如何使用 jquery 访问这些元素。那么如何访问编辑链接。这是我尝试这样做的方法：

```
$('#pop-container').delegate('a','click', function(){
    alert('editing');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:36:05.093

您需要取消链接 [EDIT: 的默认操作并收听`body`而不是`#pop-container`]。尝试

```
$('body').delegate('#btn-edit-task, #btn-save-task','click', function(e){
    e.preventDefault();
    alert('editing');
}); 
```

如果您不取消链接的默认操作，它们只会将您带到由其`href`属性指定的 URL。

请注意，由于`.delegate()`已被`.on()`jQuery 1.7 及更高版本的方法所取代，这样做会更好：

```
$('body').on('click', '#btn-edit-task, #btn-save-task', function(e) {
    e.preventDefault();
    alert('editing');
}); 
```

# c - 指向 uint 数组的指针

> ID：15106367
> 
> 赞同：1
> 
> 时间：2013-02-27T07:26:17.420
> 
> 标签：c, arrays, pointers

我正在用 C 语言编写一个算法，它将指向无符号整数数组的指针作为输入进行某种过滤并将结果返回到相同的指针数组。我这样做了：

```
static void Filtering(Inst_t *psStruct, uint8 *arraypointer)
{
    uint8 *arrayFilter; 
    uint32 i, n = 0, uCount;
    uCount = psStruct->uCount;   

    for (i = 0; i < uCount; i++)
    {        
       arraypointer[i]  = (arraypointer[i] + arraypointer[i - 1] +  arraypointer[i + 1])/3;     
    }
} 
```

这样做会覆盖数据。但我不希望这种情况发生。所以想要制作指针指向的数组数据的本地副本，然后使用它来计算平均值并将计算值传回。

我正在考虑分配一个 *arraypointer 大小的数组，并用指针数组值初始化它，并改用这个本地副本。从理论上讲，这对我来说很有意义，但不确定这是否是最好的方法。

非常感谢任何解决此问题的指针/代码。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:30:13.260

当然。这是实现返回新数组的函数的完全合法的方式。

您可以这样做以快速复制元素：

```
uint8 *newarray = malloc(uCount * sizeof(uint8));
memcpy(newarray, arraypointer, uCount * sizeof(uint8));

/* do work on newarray */
return newarray; 
```

请务必记录您的函数返回一个动态分配的数组，并确保在完成后释放它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:10:23.910

如果您不想修改数据，那么为什么要让函数这样做呢？与其试图发明方法来躲避自己的程序设计，不如改变函数的定义并以不同的方式实现它。

```
static void Filtering (Inst_t *psStruct, 
                       const uint8_t* source, 
                       uint8_t* result) 
```

然后在调用者中：

```
uint8_t* filtered_buf = malloc (sizeof(buf));

Filtering(some_struct, buf, filtered_buf);

free(filtered_buf); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:30:24.730

由于您似乎拥有该`uCount`字段中可用的元素数量，因此您当然可以创建一个本地副本。

如果您只想计算平均值（只读操作），我不明白为什么需要本地副本。

要创建副本，您需要执行以下操作：

```
const size_t num_bytes = psStruct->uCount * sizeof *local;
uint8 *local = malloc(num_bytes);
memcpy(local, arraypointer, num_bytes); 
```

您当然应该在使用之前检查它`local`，并且在从函数返回之前检查它（除非您想要新数组作为结果，在这种情况下，完成后它成为调用者的责任）。`NULL``free()``return``free()`

# iphone - UITableViewCell 复用的好习惯

> ID：15106373
> 
> 赞同：4
> 
> 时间：2013-02-27T07:26:36.540
> 
> 标签：iphone, ios, uitableview

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"NotificationViewCell";
    CardViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell==nil){

        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CardViewCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];

        cell.contentView.backgroundColor=[UIColor clearColor];
        [ModelClass addSublayer:cell.contentView];

        cell.cellbg.layer.cornerRadius = 8;
        cell.cellbg.layer.masksToBounds = YES;

         cell.cellbg.layer.borderWidth = 1;
         cell.cellbg.layer.borderColor = [[UIColor grayColor] CGColor];

        cell.logoImage.layer.cornerRadius = 8;
        cell.logoImage.layer.masksToBounds = YES;

        cell.logoImage.layer.borderWidth = 1;
        cell.logoImage.layer.borderColor = [[UIColor grayColor] CGColor];

        Merchant *merchantList= [self.cardListArr objectAtIndex:indexPath.row];

        cell.nameLab.text=merchantList.name;

        NSLog(@"merchantList.myloyalty.points=%@",merchantList.myloyalty.points);
    //    NSLog(@"memberNO=%@",merchantList.myloyalty.memberNO);
        cell.integralLab.text=[NSString stringWithFormat:NSLocalizedString(@"points_dot", @"") ,[merchantList.myloyalty.points intValue]];

        cell.cardNumberLab.text=[NSString stringWithFormat:@"%@%@",NSLocalizedString(@"ID", nil), merchantList.myloyalty.memberNO];

        if(![ModelClass isBlankString:merchantList.introPic])
        {
              NSLog(@"merchantList.introPic=%@",merchantList.introPic);

            [cell.logoImage setImageUrl:merchantList.introPic];

        }
    }

    return cell;

} 
```

1.  我想使用上面的代码来重用 UITableViewCell，我不知道它是否正确，我想得到一些建议。
2.  你可以看到我使用的代码 if(cell==nil)，我想知道我应该写什么代码 if(cell!=nil)(if(cell==nil) else{ 我应该做些什么可以提高细胞的重用性})

3.  如果每个单元格有相同的视图，但高度不同，例如imageview有时是20或者是40等等，如何处理这种情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T07:59:53.893

1.不正确，因为你的cell是复用的，而且创建的时候不会进去`if-statement`，所以，在里面`if-statement`你只需要初始化cell，setText和setImage你应该在外面编码`if-statement`. _

如 ：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"NotificationViewCell";
    CardViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell==nil){

        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CardViewCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];

        cell.contentView.backgroundColor=[UIColor clearColor];
        [ModelClass addSublayer:cell.contentView];

        cell.cellbg.layer.cornerRadius = 8;
        cell.cellbg.layer.masksToBounds = YES;

         cell.cellbg.layer.borderWidth = 1;
         cell.cellbg.layer.borderColor = [[UIColor grayColor] CGColor];

        cell.logoImage.layer.cornerRadius = 8;
        cell.logoImage.layer.masksToBounds = YES;

        cell.logoImage.layer.borderWidth = 1;
        cell.logoImage.layer.borderColor = [[UIColor grayColor] CGColor];

        }

        Merchant *merchantList= [self.cardListArr objectAtIndex:indexPath.row];

        cell.nameLab.text=merchantList.name;

        NSLog(@"merchantList.myloyalty.points=%@",merchantList.myloyalty.points);
    //    NSLog(@"memberNO=%@",merchantList.myloyalty.memberNO);
        cell.integralLab.text=[NSString stringWithFormat:NSLocalizedString(@"points_dot", @"") ,[merchantList.myloyalty.points intValue]];

        cell.cardNumberLab.text=[NSString stringWithFormat:@"%@%@",NSLocalizedString(@"ID", nil), merchantList.myloyalty.memberNO];

        if(![ModelClass isBlankString:merchantList.introPic])
        {
              NSLog(@"merchantList.introPic=%@",merchantList.introPic);

            [cell.logoImage setImageUrl:merchantList.introPic];

        }

        return cell;

    } 
```

2 大多数人的代码是这样的：

```
if(cell==nil)
{
    //init code
}

// setting code 
```

3.如果要设置单元格高度，则不能在`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath`

你应该在 dataSource 的方法中编码：`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`

像这样的代码：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (index.row % 2)
        return 20.0f;
    return 40.0f;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:02:38.147

我通常将单元的创建和配置分为两个逻辑部分：

1.  *创建单元格并为每个单元格*设置相同的所有属性（即布局、层）
2.  编写一个单独的`-(void)configureCell:(UITableViewCell*)cell;`函数，在其中设置数据源中特定单元格的所有特定内容（即标签和图像视图的值）。

然后在`cellForRowAtIndexPath`：

```
-(UITableViewCell *)tableView:(UITableView *)tableView 
        cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"NotificationViewCell";
    CardViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell==nil){
       [self createCell:&cell];
    }

    Mercant* mercantList = [self.cardListArr objectAtIndex:indexPath.row];

    [self configureCell:cell withMercant:mercantList];

    return cell;
}

-(void)createCell:(CardViewCell**)cellPtr
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CardViewCell" 
                                                 owner:self 
                                               options:nil];
    *cellPtr = [nib objectAtIndex:0];

    CardViewCell* cell = *cellPtr;

    cell.contentView.backgroundColor=[UIColor clearColor];
    [ModelClass addSublayer:cell.contentView];

    cell.cellbg.layer.cornerRadius = 8;
    cell.cellbg.layer.masksToBounds = YES;

    cell.cellbg.layer.borderWidth = 1;
    cell.cellbg.layer.borderColor = [[UIColor grayColor] CGColor];

    cell.logoImage.layer.cornerRadius = 8;
    cell.logoImage.layer.masksToBounds = YES;

    cell.logoImage.layer.borderWidth = 1;
    cell.logoImage.layer.borderColor = [[UIColor grayColor] CGColor];
}

-(void)configureCell:(CardViewCell*)cell withMercant:(Mercant*)mercantList
{
    cell.nameLab.text=merchantList.name;

    NSLog(@"merchantList.myloyalty.points=%@",merchantList.myloyalty.points);
//    NSLog(@"memberNO=%@",merchantList.myloyalty.memberNO);
    cell.integralLab.text=[NSString stringWithFormat:NSLocalizedString(@"points_dot", @"") ,[merchantList.myloyalty.points intValue]];

    cell.cardNumberLab.text=[NSString stringWithFormat:@"%@%@",NSLocalizedString(@"ID", nil), merchantList.myloyalty.memberNO];

    if(![ModelClass isBlankString:merchantList.introPic])
    {
          NSLog(@"merchantList.introPic=%@",merchantList.introPic);

        [cell.logoImage setImageUrl:merchantList.introPic];

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-05T17:58:33.100

Guo Luchuan 的上述答案工作正常，但问题是每次向上和向下滚动时它都会重新创建单元格，如果您的 UIComponents 具有不同的状态，您可能很容易丢失这些状态。此外，我建议您缓存所有创建的单元格并重复使用它们以避免这种情况。

这是缓存如何工作的示例。

```
var mockCells = [QuestionsCell](repeating: QuestionsCell(), count: 1000) 
```

*在你的 cellForRowAtIndexPath 里面放以下 *

```
 if cell == indexPath.row {
            //if cell exists in our list we reuse
            cell = mockCell
        } else {
            //here we store/cache each created cell 
                mockCells[indexPath.row] = cell
            }
        } 
```

# c - 对于大多数数据包，我的 TCP 校验和函数返回 0

> ID：15106377
> 
> 赞同：1
> 
> 时间：2013-02-27T07:26:59.323
> 
> 标签：c, tcp, checksum

我正在编写一个小程序来嗅探流量并重新计算 TCP 校验和以进行验证。对于大多数 HTTP 数据包，我的程序将校验和返回为零。

我所做的是通过 PSEUDO_TCP_HEADER | 构造一个缓冲区。TCP_HEADER | TCP_PAYLOAD。Pseudo TCP Header 是一个由以下内容定义的结构：

```
struct pseudo_tcp
{
    unsigned long saddr, daddr;
    unsigned char mbz;
    unsigned char ptcl;
    unsigned short tcpl;
}; 
```

然后我调用这个函数来计算校验和（我相信这个函数做得对，因为它已经被很多项目使用了）：

```
unsigned short in_cksum(unsigned short *addr,int len)
{
    register int sum = 0;
    u_short answer = 0;
    register u_short *w = addr;
    register int nleft = len;

        /*!
    * Our algorithm is simple, using a 32 bit accumulator (sum), we add
    * sequential 16 bit words to it, and at the end, fold back all the
    * carry bits from the top 16 bits into the lower 16 bits.
    */
    while (nleft > 1)  {
        sum += *w++;
        nleft -= 2;
    }

    /*! mop up an odd byte, if necessary */
    if (nleft == 1) {
        *(u_char *)(&answer) = *(u_char *)w ;
        sum += answer;
    }

    /*! add back carry outs from top 16 bits to low 16 bits */
    sum = (sum >> 16) + (sum & 0xffff);     /*! add hi 16 to low 16 */
    sum += (sum >> 16);                     /*! add carry */
    answer = ~sum;                          /*! truncate to 16 bits */
    return(answer);
} 
```

为了更容易测试，我设法将缓冲区转储到文件中，这里有两个缓冲区样本导致校验和为 0：

```
$ hexdump -C buffer.out
00000000  c0 a8 01 2c ad c2 26 92  00 06 00 a5 d5 90 00 50  |...,..&........P|
00000010  fa 2a 96 7b 56 9c 7c 27  50 18 40 00 ab 9f 00 00  |.*.{V.|'P.@.....|
00000020  47 45 54 20 2f 20 48 54  54 50 2f 31 2e 31 0d 0a  |GET / HTTP/1.1..|
00000030  55 73 65 72 2d 41 67 65  6e 74 3a 20 63 75 72 6c  |User-Agent: curl|
00000040  2f 37 2e 32 34 2e 30 20  28 78 38 36 5f 36 34 2d  |/7.24.0 (x86_64-|
00000050  61 70 70 6c 65 2d 64 61  72 77 69 6e 31 32 2e 30  |apple-darwin12.0|
00000060  29 20 6c 69 62 63 75 72  6c 2f 37 2e 32 34 2e 30  |) libcurl/7.24.0|
00000070  20 4f 70 65 6e 53 53 4c  2f 30 2e 39 2e 38 72 20  | OpenSSL/0.9.8r |
00000080  7a 6c 69 62 2f 31 2e 32  2e 35 0d 0a 48 6f 73 74  |zlib/1.2.5..Host|
00000090  3a 20 77 77 77 2e 67 6f  6f 67 6c 65 2e 63 6f 6d  |: www.google.com|
000000a0  0d 0a 41 63 63 65 70 74  3a 20 2a 2f 2a 0d 0a 0d  |..Accept: */*...|
000000b0  0a                                                |.|
000000b1

$ hexdump -C buffer1.out 
00000000  c0 a8 01 2c c7 3b 96 07  00 06 00 a2 de 35 00 50  |...,.;.......5.P|
00000010  a1 95 ce 03 c4 f9 f0 1a  50 18 ff ff e7 7a 00 00  |........P....z..|
00000020  47 45 54 20 2f 20 48 54  54 50 2f 31 2e 31 0d 0a  |GET / HTTP/1.1..|
00000030  55 73 65 72 2d 41 67 65  6e 74 3a 20 63 75 72 6c  |User-Agent: curl|
00000040  2f 37 2e 32 34 2e 30 20  28 78 38 36 5f 36 34 2d  |/7.24.0 (x86_64-|
00000050  61 70 70 6c 65 2d 64 61  72 77 69 6e 31 32 2e 30  |apple-darwin12.0|
00000060  29 20 6c 69 62 63 75 72  6c 2f 37 2e 32 34 2e 30  |) libcurl/7.24.0|
00000070  20 4f 70 65 6e 53 53 4c  2f 30 2e 39 2e 38 72 20  | OpenSSL/0.9.8r |
00000080  7a 6c 69 62 2f 31 2e 32  2e 35 0d 0a 48 6f 73 74  |zlib/1.2.5..Host|
00000090  3a 20 74 77 69 74 74 65  72 2e 63 6f 6d 0d 0a 41  |: twitter.com..A|
000000a0  63 63 65 70 74 3a 20 2a  2f 2a 0d 0a 0d 0a        |ccept: */*....|
000000ae 
```

在第一个缓冲区中，前四个字节表示源 IP 地址（c0 a8 01 2c -> 192.168.1.44），接下来的四个字节表示目标 IP 地址（ad c2 26 92 -> 173.194.38.146）等等......

计算或构建缓冲区的方式有什么问题吗？

**更新**：这是我用来从文件中读取并计算 TCP 校验和的测试代码

```
 int c,i=0;
  char buffer[1000];
  FILE *file; 
  file = fopen("buffer.out", "r");
  if (file) 
  {
    while ((c = getc(file)) != EOF)
        buffer[i++] = c;
    fclose(file);
  }
  printf("CSUM = %hu\n", in_chksum((unsigned short *  ) buffer, i)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T13:35:46.620

代码看起来是正确的，只是我没有看到您将标头中的校验和归零。这是来自 winpcap 邮件列表的一些代码，您可以在 TCPCheckSum() 函数中看到它们首先将 tcp 标头校验和字段清零`tcph->Chksum=0`：：

[[Winpcap-users] TCP校验和计算](http://www.winpcap.org/pipermail/winpcap-users/2007-July/001984.html)

# pyside - 使用py2app打包pyside程序报错include imageformats plugins

> ID：15106383
> 
> 赞同：1
> 
> 时间：2013-02-27T07:27:22.053
> 
> 标签：pyside, py2app

安装程序.py

```
APP = ['systray.py']
DATA_FILES = []
OPTIONS = {'argv_emulation': True,
           'includes': ['djmemori.settings'],
           'packages': ['django', 'south'],
           'qt_plugins': 'imageformats' # if I comment out this line, python setup.py py2app will success
           }

setup(
    app=APP,
    data_files=DATA_FILES,
    options={'py2app': OPTIONS},
    setup_requires=['py2app'],
) 
```

python setup.py py2app

```
...
copying file /Users/teamx/workspace/env-memori-pkg/lib/python2.7/site-packages/py2app/recipes/qt.conf -> /Users/teamx/workspace/memori_pc/src/djmemori/dist/systray.app/Contents/Resources/qt.conf
copying file /Developer/Applications/Qt/plugins/imageformats/libqgif.dylib -> /Users/teamx/workspace/memori_pc/src/djmemori/dist/systray.app/Contents/Resources/qt_plugins/imageformats/libqgif.dylib
copying file /Developer/Applications/Qt/plugins/imageformats/libqico.dylib -> /Users/teamx/workspace/memori_pc/src/djmemori/dist/systray.app/Contents/Resources/qt_plugins/imageformats/libqico.dylib
copying file /Developer/Applications/Qt/plugins/imageformats/libqjpeg.dylib -> /Users/teamx/workspace/memori_pc/src/djmemori/dist/systray.app/Contents/Resources/qt_plugins/imageformats/libqjpeg.dylib
copying file /Developer/Applications/Qt/plugins/imageformats/libqmng.dylib -> /Users/teamx/workspace/memori_pc/src/djmemori/dist/systray.app/Contents/Resources/qt_plugins/imageformats/libqmng.dylib
copying file /Developer/Applications/Qt/plugins/imageformats/libqsvg.dylib -> /Users/teamx/workspace/memori_pc/src/djmemori/dist/systray.app/Contents/Resources/qt_plugins/imageformats/libqsvg.dylib
copying file /Developer/Applications/Qt/plugins/imageformats/libqtiff.dylib -> /Users/teamx/workspace/memori_pc/src/djmemori/dist/systray.app/Contents/Resources/qt_plugins/imageformats/libqtiff.dylib
copying file /.dbfseventsd -> /Users/teamx/workspace/memori_pc/src/djmemori/dist/systray.app/Contents/Resources/qt_plugins/imageformats/.dbfseventsd
error: /.dbfseventsd: Operation not supported on socket 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:41:20.860

更改代码 py2app/recipes/pyside.py:21

```
 if '*' in item:
        for path in glob.glob(os.path.join(plugin_dir, item)):
            resources.append((os.path.dirname('qt_plugins' + path[len(plugin_dir):]), [path]))
        else:
            resources.append((os.path.dirname(os.path.join('qt_plugins', item)), os.path.join(plugin_dir, item))) 
```

到

```
 if '*' in item:
        for path in glob.glob(os.path.join(plugin_dir, item)):
            resources.append((os.path.dirname('qt_plugins' + path[len(plugin_dir):]), [path]))
    else:
        resources.append((os.path.dirname(os.path.join('qt_plugins', item)), os.path.join(plugin_dir, item))) 
```

可以解决这个问题。

代码缩进问题会导致py2app添加资源：

('qt_plugins/imageformats', u'/Developer/Applications/Qt/plugins/imageformats/*') # 注意元组的第二项应该是列表，但这里是字符串

然后在 py2app/build_app.py:598

```
def iter_data_files(self):
    dist = self.distribution
    allres = chain(getattr(dist, 'data_files', ()) or (), self.resources)
    for (path, files) in (normalize_data_file(fn) for fn in allres):
        path = fsencoding(path)
        for fn in files:                      # <-- this line
            fn = fsencoding(fn)
            yield fn, os.path.join(path, os.path.basename(fn)) 
```

files 应该是一个列表，但现在，它是一个字符串：u'/Developer/Applications/Qt/plugins/imageformats/*' 这将导致 py2app 复制路径中的文件：'/'、'D'、'e'、 'v', ...所以py2app开始迭代根路径'/'，当它遇到/.dbfseventsd时，它崩溃了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:22:06.263

这看起来像 py2app 中的一个错误。您能否帮我检查一下“/Developer/Applications/Qt/plugins/imageformats”中是否有一个名为“.dbfseventsd”的文件（或指向该文件的符号链接）？

另外，请在[https://bitbucket.org/ronaldoussoren/py2app](https://bitbucket.org/ronaldoussoren/py2app)提出问题，以确保我不会忘记实际解决问题。

# jquery - 如何删除 IE 中的必需属性？

> ID：15106387
> 
> 赞同：0
> 
> 时间：2013-02-27T07:27:52.450
> 
> 标签：jquery, html, internet-explorer

如果用户选择#no-nonp-reg 单选按钮，则#tax-num 应该被隐藏，而不是必需的。以下是相关的代码片段：

HTML5：

```
<label>Is your group registered as a nonprofit/tax-exempt?</label>
    <input type="radio" id="yes-nonp-reg" name="nonpReg" value="yesNonpReg"  checked>Yes
    <input type="radio" id="no-nonp-reg" name="nonpReg" value="noNonpReg">No<br>

    <span class="no-break" id="tax-num-spn">
        <label for="tax-num">Please enter either a Federal EIN or State ID #:</label>
    <input id="tax-num" name="taxNum" type="text" pattern="[0-9]{8,}" required>
    </span><br> 
```

JS：

```
$('#no-nonp-reg').click(function(){
    "use strict";
    $('#tax-num-spn').addClass('hidden');
    $('#tax-num').prop('required', false);
    $('#tax-num').val("");
}); 
```

我也试过：

```
$('#tax-num').removeAttr('required'); 
```

我也试过：

```
$('#tax-num').attr('required', false); 
```

通常情况下，与 Chrome 和 FF 一起工作得很好。IE仍然坚持要求该字段并且不会接受提交，尽管它确实隐藏了它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:00:24.693

嘿检查[这个](https://github.com/jzaefferer/jquery-validation/issues/301)链接，你可能会得到帮助，

```
 if ($.browser.msie && $.browser.version < 10) {
    $('#form_to_validate [required]').addClass('required').removeAttr('required');
 } 
```

# javascript - 如何阻止 ColdFusion 目标在 Safari 中打开？

> ID：15106394
> 
> 赞同：0
> 
> 时间：2013-02-27T07:28:03.730
> 
> 标签：javascript, jquery, ios, web-applications, jquery-events

我无法弄清楚这一点，我已经尝试了我能找到的每一个 Javascript 片段，这些片段据说会阻止在移动 Safari 中打开链接，但它们都不能在我的coldfusion webapp 中以独立模式运行。在网络模式下，一切正常。

关联

```
<a class="button" href="rptSectors_bar.cfm" target="mainwindow"> 
```

我试过的代码：

```
 <script>

    function init() {
    $("a").click(function(e) { $("#content").load(e.target.href);return false; });
    }

    $(document).ready(init);

    </script> 
```

第二个：

```
<script>
if (window.navigator.standalone) {

$(document).on(
"click",
"a",
"button,"
function (event) {

    event.preventDefault();

    var aurl = $(event.target).attr("href");
    if (aurl) {
        location.href = $(event.target).attr("href");
    }
    else {
        location.href = this;
        alert(this);
    }
}
);
}
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:47:30.510

我真的不明白你在这里做什么，但如果我是正确的，你能不能只从 DOM 中删除属性本身？

```
$("a").removeAttr("target"); 
```

*假设您在应用程序中使用 jQuery。*

显然，这将基于`if () {} else {}`您已有的一些逻辑。

希望有帮助。如果我完全不正确地理解你，请告诉我！

# android - 应用内结算 V3

> ID：15106396
> 
> 赞同：2
> 
> 时间：2013-02-27T07:28:10.977
> 
> 标签：android, in-app-billing

我是谷歌应用内计费的新手，我从谷歌下载示例并获得了 TrivialDrive 项目。我只是将 SKU_GAS 更改为`"android.test.purchased"`，但在我成功购买燃料后，我得到了结果：

```
02-27 14:24:40.882: D/TrivialDrive(11805): Consumption finished. Purchase: PurchaseInfo(type:inapp):   
{"packageName":"com.example.android.trivialdrivesample","orderId":"transactionId.android.test.purchased","productId":"android.test.purchased","developerPayload":"","purchaseTime":0,"purchaseState":0,"purchaseToken":"inapp:com.example.android.trivialdrivesample:android.test.purchased"}, result: IabResult: Successful consume of sku android.test.purchased (response: 0:OK) 
```

我的问题为什么 purchaseTime = 0 ？什么是`developerPayload`？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:36:07.037

你得到了`purchaseTime=0`，因为你正在使用 android 测试产品：`android.test.purchased`。关于`developerPayload`这里是api解释：

```
A developer-specified string that contains supplemental information about an order. You can specify a value for this field when you make a getBuyIntent request. 
```

在这里您可以找到更多信息[Android In-App Billing](http://developer.android.com/google/play/billing/billing_reference.html)。

# actionscript-3 - 错误 2025 更正让我有点困惑

> ID：15106398
> 
> 赞同：0
> 
> 时间：2013-02-27T07:28:13.787
> 
> 标签：actionscript-3

```
package 
{
    import flash.display.*;
    import flash.events.*;
    import flash.utils.Timer;
    import flash.text.TextField;
    import flash.ui.Mouse;
    import flash.geom.Point;
    import flash.media.Sound;
    import flash.net.*;
    import scripts.player.*;
    import scripts.bullets.*;
    import scripts.enemy.*;
    import scripts.enemyDead.*;
    import scripts.maskmc.torch;

    public class Main extends MovieClip
    {
        // ***********  Player Variables *************
        private var player:MovieClip;
        private var bunker_mc:MovieClip;
        private var life_mc:MovieClip;
        private var bg_mcX = 0;
        private var bg_mcY = 0;
        // ***********  Bullet var & Array ************
        private var b:MovieClip;
        private var bullets:Array;
        private var gunFire:Boolean = false;
        private var isLoaded:Boolean = true;
        private var reloadGun:Timer;
        private var reloadSpeed:Number = 250;
        private var sniper_mc:MovieClip;
        // *******  Enemies & their Dead Animation Arrays And Variables  ***********

        // *******  For Enemy type 1  *******************
        private var enemy1:MovieClip;
        private var tempEnemy1:MovieClip;
        private var dead1:MovieClip;
        private var deadArray1:Array;
        private var enemies1:Array;

        // *******   Score & other Helper var
        private var hit:int = 2;
        private var hit1:int = 3;
        private var hit2:int = 5;
        private var hit3:int = 8;
        private var hit4:int = 10;
        private var Level:int = 1;
        private var MGun:int;
        private var MGun1:int;
        private var powerPlayer:int = 1;
        private var power:MovieClip;
        private var power2_mc:MovieClip;
        private var Score:int;
        private var HighScore:int;
        private var mouseSpeed:Number = 25;
        private var PD1:MovieClip;
        private var PD2:MovieClip;
        private var PD3:MovieClip;
        private var h1:MovieClip;
        private var tym:int;
        private var eneCount:int = 0;
        private var saveData:SharedObject;

        private var GameLevelTimer:Timer;
        private var Timer1:Timer;
        private var PowerTimer:Timer;
        private var HelpTimer:Timer;
        private var lvl:MovieClip;
        private var flag:int = 0;

        public function startMain()
        {
            // ******* Sniper stuff ******************
            var sniper_mc:sniper = new sniper();

            //............. setting the X Y co ordinates of Background .......
            bg_mc.x = 400;
            bg_mc.y = 300;
            //............. Player and Bunker initialisation and display on screen...............
            bunker_mc = new bunker();
            life_mc = new life();
            bunker_mc.x = bg_mcX;
            bunker_mc.y = bg_mcY;
            life_mc.x = 339;
            life_mc.y = 590;
            stage.addChild(life_mc);
            bg_mc.addChild(bunker_mc);
            //.............. Player Power display..................................
            PD1 = new Pd1();
            PD1.x = 50;
            PD1.y = 580;

            // ............. Defining Events................
            stage.addEventListener(MouseEvent.MOUSE_UP,mouseUpFun);
            stage.addEventListener(MouseEvent.MOUSE_DOWN,mouseDownFun);
            stage.addEventListener(Event.ENTER_FRAME,updateCollission);
            stage.addEventListener(Event.ENTER_FRAME,updateStage);
            //.............. Calling Enemy spawning timer function...............
            timeStart();
            //.............. Calling Player creating function..................
            createPlayer();
            //.............. Adding Mask i.e. Night Effect for Level 8,9..............
            if (Level == 8 || Level == 9)
            {
                torch_mc = new torch(bg_mcX,bg_mcY,bg_mc);
                dark_mc = new dark();
                bg_mc.addChild(dark_mc);
                bg_mc.addChild(torch_mc);
            }
            //.............. Initialising Enemy Objects arrays.................
            bullets = new Array();
            enemies1 = new Array();
            deadArray1 = new Array();
            dustArray = new Array();

            // ............. Initialisng Score & level variables............
            Score = 0;
            tym = 60;
            eneCount = 0;
            saveData = SharedObject.getLocal("test");
            Lvl_txt.text = String(Level);
            Scr_txt.text = String(Score);
            Time_txt.text = String(tym);
        }
        //.............. Timer for Enemy Spawning ................
        private function timeStart():void
        {
            Timer1 = new Timer(1000,60);
            Timer1.addEventListener(TimerEvent.TIMER,TimerStart);
            Timer1.start();
            Timer1.addEventListener(TimerEvent.TIMER_COMPLETE,TimerEnd);
            if (Level == 3)
            {
                var powerDelay:int = Math.random() * 8;
                if (powerDelay == 0)
                {
                    powerDelay = 5;
                }
                PowerTimer = new Timer(1000,powerDelay);
                PowerTimer.addEventListener(TimerEvent.TIMER_COMPLETE,powerFun);
                PowerTimer.start();
            }
            if (Level == 5)
            {
                var powerDelay1:int = Math.random() * 8;
                if (powerDelay1 == 0)
                {
                    powerDelay1 = 5;
                }
                PowerTimer = new Timer(1000,powerDelay1);
                PowerTimer.addEventListener(TimerEvent.TIMER_COMPLETE,powerFun2);
                PowerTimer.start();
                MGun1 = 1;
            }
        }
        //............. Player Creating Function.......................
        private function createPlayer():void
        {
            if (powerPlayer == 1)
            {
                player = new Player(bg_mcX,bg_mcY,bg_mc);
                bg_mc.addChild(player);
                reloadSpeed = 250;
            }
        }
        //............ Mouse Event Handlers...........................
        private function mouseUpFun(event:MouseEvent):void
        {
            gunFire = false;
        }
        //Mouse Down Event Handler
        private function mouseDownFun(event:MouseEvent):void
        {
            gunFire = true;
        }
        private function reloadGunHandler(e:TimerEvent):void
        {
            // stop timer
            e.target.stop();

            // clear timer var
            reloadGun = null;

            reloadWeapon();
        }
        //.............. Enemy spawning Timer Function..................
        private function TimerStart(e:TimerEvent):void
        {
            eneCount += 1;
            tym -= 1;
            Time_txt.text = String(tym);
            if (Level == 1)
            {
                createEnemy(enemy1,Enemy1,enemies1);
            }
        }
        //............. Function Creating Enemy .....................
        private function createEnemy(enemy:MovieClip,enemyClass:Class, enemyArray:Array)
        {
            enemy = new enemyClass(bg_mc);
            enemyArray.push(enemy);
            bg_mc.addChild(enemy);
        }
        //............. Function Creating dead Animation................
        private function createDead(Dead:Class,DeadArray:Array,xx:Number,yy:Number,rr:Number):void
        {
            dead1 = new Dead(xx,yy,rr);
            DeadArray.push(dead1);
            bg_mc.addChild(dead1);
        }
        // .............Function that remove the initial type of Player.......
        private function modifyPlayer():void
        {
            bg_mc.removeChild(player);
        }

        private function powerFun(e:TimerEvent):void
        {
            power = new power1();
            addChild(power);
            power.x = 500;
            power.y = 100;
            stage.addEventListener(KeyboardEvent.KEY_DOWN,KeyboardDown);
            MGun = 1;
        }
        private function powerFun2(e:TimerEvent):void
        {
            power = new power2();
            addChild(power);
            power.x = 500;
            power.y = 100;
            MGun1 = 1;

        }
        private function KeyboardDown(e:KeyboardEvent)
        {
            flag = 0;
            if (e.keyCode == 49)
            {
                powerPlayer = 1;
                modifyPlayer();
                createPlayer();
            }

        }
        //................ Function that updates Bullet and Stageon EnterFrame Event..........;
        private function updateCollission(e:Event):void
        {
            if(Level == 1)
            {
                collideEnemy(deadArray1,enemies1,0.00025);
            }

        }
        //................ Function that updates Bullet and Stageon EnterFrame Event..........;
        private function updateStage(e:Event):void
        {
            // ............. Updating Stage according mouse co-ordinates...........
            if (mouseX <= 200 || mouseX >= 600)
            {
                bg_mc.x +=(bg_mc.x - mouseX)/mouseSpeed;
                if (bg_mc.x <= 210)
                {
                    bg_mc.x = 210;
                }
                if (bg_mc.x >= 590)
                {
                    bg_mc.x = 590;
                }
            }

            if (mouseY <= 200 || mouseY >= 400)
            {
                bg_mc.y +=(bg_mc.y - mouseY)/mouseSpeed;
                if (bg_mc.y <= 150)
                {
                    bg_mc.y = 150;
                }
                if (bg_mc.y >= 440)
                {
                    bg_mc.y = 440;
                }
            }
            // ..............Calling Function for fire........
            fire();
            var i:int;
            var tempBullet:MovieClip;

            // ........... loop for _bullets array ...........
            for (i = 0; i < bullets.length; i++)
            {
                //.... save a reference to current bullet.....
                tempBullet = bullets[i];

                //.... check for collision with Enemies.......
                if (checkCollision(tempBullet))
                {
                    destroyBullet(tempBullet);
                    eneCount -= 1;
                }
            }
        }
        //........... Function Defination of Fire...............
        private function fire():void
        {
            // check if firing
            if (! gunFire)
            {
                return;
            }
            // check if reloaded
            if (! isLoaded)
            {
                return;
            }
            // create bullet function.
            fireBullet();

            // start reload timer
            reloadGun = new Timer(reloadSpeed);
            reloadGun.addEventListener(TimerEvent.TIMER, reloadGunHandler);
            reloadGun.start();

            // set reload flag to false;
            isLoaded = false;
        }
        //............. Function Creating the Bullet.........
        private function fireBullet():void
        {
            var gunSnd:deagle = new deagle();
            player.play();
            if (powerPlayer == 1)
            {
                b = new Bullet(mouseX,mouseY,player.rotation,300);
                bullets.push(b);
                bg_mc.addChild(b);
                var f1:Fire1 = new Fire1();
                f1.x = b.x;
                f1.y = b.y;
                f1.rotation = b.rotation;
                bg_mc.addChild(f1);
            }

        }
        // ......... Function that Gives Delay in Firing the Bullets............
        private function reloadWeapon():void
        {
            isLoaded = true;
        }
        // ......... Function for Checking the Collision between Bullet And Enemy...........
        private function checkCollision(mc:MovieClip):Boolean
        {
            var test:Point = mc.localToGlobal( new Point());
            for (var i = 0; i < enemies1.length; i++)
            {
                tempEnemy1 = enemies1[i];
                if (tempEnemy1.hitTestPoint(test.x,test.y,true))
                {
                    enemies1.splice(i, 1);
                    bg_mc.removeChild(tempEnemy1);
                    createDead(Dead1,deadArray1,tempEnemy1.x,tempEnemy1.y,tempEnemy1.rotation);
                    Score +=  10;
                    Scr_txt.text = String(Score);
                    return true;
                }
            }
            return false;
        }
        //............. Function that destroy the Bullet...........
        private function destroyBullet(bullet:MovieClip):void
        {
            var tempBullet:MovieClip;
            for (var i = 0; i<= bullets.length; i++)
            {
                tempBullet = bullets[i];
                if (tempBullet == bullet)
                {
                    dust = new dust_mc();
                    dust.x = bullet.x;
                    dust.y = bullet.y;
                    dust.rotation = (Math.random() * 360);
                    // remove from array
                    bullets.splice(i, 1);
                    bullet.parent.removeChild(bullet);
                    dustArray.push(dust);
                    bg_mc.addChild(dust);
                    return;
                }
            }
        }
        private function removeElement(removeList:Array):void
        {
            for (var i = 0; i < removeList.length; i++)
            {
                bg_mc.removeChild(removeList[i]);
            }
        }
        //...........Function Checking the Collission Between Bunker And Enemy..............
        private function collideEnemy(deadArray:Array,enemyArray:Array,rate:Number):void
        {
            var enemy:MovieClip;
            for (var i = 0; i < enemyArray.length; i++)
            {
                enemy = enemyArray[i];
                if (enemy.hitTestObject(bunker_mc))
                {
                    if (life_mc.scaleX <= 0.1)
                    {
                        Timer1.stop();
                        stage.removeEventListener(MouseEvent.MOUSE_DOWN,mouseDownFun);
                        stage.removeEventListener(KeyboardEvent.KEY_DOWN,KeyboardDown);
                        stage.removeEventListener(Event.ENTER_FRAME,updateCollission);
                        bg_mc.removeChild(player);
                        bg_mc.removeChild(bunker_mc);
                        stage.removeChild(life_mc);
                        EndFun();
                        gotoAndStop("end");
                        Level = 1;
                        powerPlayer = 1;
                    }
                    life_mc.scaleX -=  rate;
                }
            }
        }
        //...........function of Timer Complete Event.....................
        private function TimerEnd(e:TimerEvent):void
        {
            HelpTimer = new Timer(1000,eneCount);
            HelpTimer.addEventListener(TimerEvent.TIMER_COMPLETE,HelpFun);
            HelpTimer.start();
            function HelpFun(Event:TimerEvent)
            {
                stage.removeEventListener(MouseEvent.MOUSE_DOWN,mouseDownFun);
                stage.removeEventListener(KeyboardEvent.KEY_DOWN,KeyboardDown);
                bg_mc.removeChild(player);
                bg_mc.removeChild(bunker_mc);
                stage.removeChild(life_mc);
                EndFun();
                Score = 0;
                Level +=  1;
            }
        }
        //..................Function for ending the Game And removing the Reamining Enemies.................
        private function EndFun():void
        {
            stage.removeEventListener(Event.ENTER_FRAME,updateStage);
            removeElement(bullets);
            removeElement(dustArray);
            if (Level == 1)
            {
                removeChild(PD1);
                removeElement(enemies1);
                removeElement(deadArray1);
                gotoAndStop("level2");
            }
            HighScore +=  Score;
            if(saveData.data.savedScore == null )
            {
                saveData.data.savedScore = HighScore;
                saveData.flush();
            }
            if(saveData.data.savedScore > HighScore)
            {
                HighScr_txt.text = String(saveData.data.savedScore);
            }
            else
            {
                HighScr_txt.text = String(HighScore);
            }
        }
    }
} 
```

ArgumentError：错误 #2025：提供的 DisplayObject 必须是调用者的子对象。在 flash.display::DisplayObjectContainer/removeChild() 在 Main/collideEnemy() 在 Main/updateCollission()

你好..提前谢谢..我检查了关于我的问题的可用建议，但我无法解决我的问题..这个错误让我有点困惑。我已经多次查看我的代码，但我不明白我是如何得到这个错误的..请提出更正建议..请帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:39:00.770

此错误在尝试时显示[`removeChild()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#removeChild%28%29)不是`DisplayObjectContainer`.

我想，理性`stage.removeChild(life_mc);`在`collideEnemy()`起作用。你必须检查`life_mc`父母是否`stage`。我想，父母`bg_mc`。看了上面两行代码，好像是问题所在。

尝试转换`stage.removeChild(life_mc);`为`bg_mc.removeChild(life_mc);`. 如果不工作。检查所有对象的父级。你知道父母，并尝试从父母中删除。

```
trace(life_mc.parent);
trace(player.parent);
trace(bunker_mc.parent); 
```

* * *

或者简单地说，运行以下代码。也许它运作良好。

```
(player.parent).removeChild(player);
(bunker_mc.parent).removeChild(bunker_mc);
(life_mc.parent).removeChild(life_mc); 
```

# html - Opera 12.14 边界半径开启不工作

> ID：15106401
> 
> 赞同：2
> 
> 时间：2013-02-27T07:28:24.790
> 
> 标签：html, css, input, opera, textinput

我正在尝试制作一个简单的登录类型的页面并尝试使其跨浏览器，虽然我还处于起步阶段，但我已经发现了一个我找不到任何答案的问题。我正在尝试进行一些文本输入并提交带有圆角的输入按钮，但它不会让我这样做，我不知道为什么而且它根本不适用于 `<input />`标签。

我简单地尝试了两个border-radius，因为opera已经内置了标准化参数，甚至是-o-border-radius，但它不会以任何方式工作。我正在使用`em`而不是`px`，但我都尝试了，因为我认为这可能是问题所在，但事实并非如此。

所以我真的有点无能为力；歌剧在标签上不支持它？

除此之外，它还可以在以下浏览器中运行：Internet Explorer 9（`<meta http-equiv="X-UA-Compatible" content="IE=edge" />`在 html/php 文件的头部插入了行）、Mozzila Firefox 19.0、Google Chrome 25.0、Safari 5.1、Maxthon Cloud Browser 4.0

我还尝试使用干净的代码来制作它，这意味着只有一些`<input />`标签和 css 文件，但它不起作用。

我希望有人能给我一个合理的回应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:45:34.947

边框样式是**必需**的！

添加：

```
.textBox {
   border-style: solid;
} 
```

我的建议是使用速记属性`border`：

例子：`border: 3px solid #cc0000;`

有关`border`属性的更多信息，请访问：[w3schools.com](http://www.w3schools.com/css/css_border.asp)。

# vim - 在 VIM 中自动插入之前

> ID：15106402
> 
> 赞同：4
> 
> 时间：2013-02-27T07:28:30.343
> 
> 标签：vim

我想快速修改文档

```
00
01
10
11 
```

看起来像

```
000
001
010
011
100
101
110
111 
```

当然，我可以蛮力（如上所示）但我想快速完成，因为我发现我正在做很多这样的事情。到目前为止，我的方法是 yank 和 paste 4Y 4j 4P

```
00
01
10
11
00
01
10
11 
```

那么是否有一个命令在每行之前插入 0 4 次？我知道它类似于 4, 0, i, 0, esc ~~ 我希望它是 4 轮 0（移动到行的左侧），插入模式，插入 0，reinter 命令模式。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T08:10:26.337

*   使用视觉块模式：

    ```
    y3j
    <C-v>3j
    I0<Esc>
    '>
    p
    <C-v>3j
    I1<Esc> 
    ```

    可以从`1`填充开始并使用`P`跳过`'>`：

    ```
    y3j
    <C-v>3j
    I1<Esc>
    P
    <C-v>3j
    I0<Esc> 
    ```

*   仅使用 Ex 命令：

    ```
    :,+3y<CR>
    :,+3norm! I0<CR>
    :put
    :<Up> "use commandline history to save some typing
    <Backspace>1<CR> 
    ```

*   混合使用替换和正常模式命令：

    ```
    y3j
    :,+3s/^/0<CR>
    p
    :<Up>
    <Backspace>1<CR> 
    ```

如果您经常这样做，那么将其记录在宏中可能是最好的策略。那时，实际填充的完成方式并不真正相关，因为您所做的唯一输入是`@x`并且宏可能无论如何都是即时的。

你在录制过程中做了什么并不重要，这里有一个例子：

```
qx
y3j
:,+3s/^/0<CR>
p
:,+3s/^/1<CR>
q 
```

假设你有这个：

```
[0]0
01
10
11 
```

击中`@x`将上述变为：

```
000
001
010
011
100
101
110
111 
```

您的宏已保存到寄存器`x`中，并且仍可用于您的下一个 Vim 会话。

而且我敢肯定，有人会想出一个不错的单班轮。

***编辑***

上面宏的逐步解释：

*   `qx`，开始在寄存器中录制`x`（它可以是任何可用的寄存器）。

*   `y3j`，拉出当前行和接下来的三个。

*   `:`，无需解释。

*   `,+3`，这是我们正在研究的范围。定义此范围的更正确方法是`.,+3`. 范围的开始行和结束行用逗号分隔。

    起始行是当前行，我们可以省略它以节省一些输入，所以我们留下逗号，然后是结束行，相对于当前行表示，`+3`.

*   `s/^/0<CR>`，这是一个简单的替换。

    搜索模式中的`^`表示“行首”。它与第一个字符不匹配，因此它非常适合像这样的情况，我们想在一行中添加一些东西。

    所以，基本上我们在该行前面加上`0`. 它可以是你想要的任何东西。

    当您对范围执行替换时，将在范围的每一行上执行替换。在这里，我们有四行，所以每行都以`0`.

*   `<CR>`, 是，嗯……`<Enter>`用于执行替换的键。

*   `p`，将我们之前拉出的四行粘贴到当前行下方。

*   `:,+3s/^/1<CR>`, 和以前一样，但带有`1`.

*   `q`, 结束录音。

而且，为了回答您的评论，您可以这样做：

```
00
01
10
11 
```

进入那个：

```
00 0.0
01 0.0
10 0.0
11 0.0 
```

您需要使用另一个“锚”。`^`是“行首”，`$`是“行尾”，所以替换变成：

```
:,+3s/$/ 0.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T08:10:04.187

相信你指的是`<c-v>(motion)I`。

```
CTRL-V      Start Visual mode blockwise.  Note: Under Windows
            CTRL-V could be mapped to paste text, it doesn't work
            to start Visual mode then, see |CTRL-V-alternative|.

I           Insert text before the first non-blank in the line
            [count] times.
            When the 'H' flag is present in 'cpoptions' and the
            line only contains blanks, insert start just before
            the last blank. 
```

对于光标位于顶部/左侧的示例，这可能会变成这样

```
<c-v>3jI0<esc> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T08:14:36.223

您可以创建宏`q``a``I``0``Esc``j`然后运行它`4``@``a`。

但是你想要实现的是格雷码。搜索一下，也许有一些已经写好的脚本（我找不到）。

**编辑：**如果你可以使用 not-only-vim 那么你可以，即这样做：

```
:%!ruby -e 'puts (0..7).map { |i| i.to_s(2).rjust(3, "0") }' 
```

这将用生成的数字替换所有文档。您还可以更改长度和范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T09:39:49.680

您也可以使用[此处](https://groups.google.com/forum/?fromgroups=#!topic/vim_use/9_9uya7hz_Q)建议的[visincr 插件](http://www.vim.org/scripts/script.php?script_id=670)来完成此操作。在这种情况下，你会这样做：

1.  在空行上插入 0。
2.  制作一个跨越 8 行的可视块，包括 0。
3.  运行`:IIB 1 0`。

结果：

```
000
001
010
011
100
101
110
111 
```

# javascript - @的javascript代码

> ID：15106404
> 
> 赞同：0
> 
> 时间：2013-02-27T07:28:36.227
> 
> 标签：javascript, jquery, regex, validation, asp.net-mvc-4

我正在尝试验证我的电子邮件地址。为了得到这个，我已经在网上找到了这些用于验证电子邮件的正则表达式-

```
\b[A-Z0-9._%+-]+@(?:[A-Z0-9-]+\.)+[A-Z]{2,4}\b 
```

可以说互联网上的正则表达式没有限制。

你如何`@`在javascript代码中编码？当用户按键时- `shift`+ `2`= `@`。

我们可以这样做吗？

```
\b[A-Z0-9._%+-]+(keycode==64)(?:[A-Z0-9-]+\.)+[A-Z]{2,4}\b 
```

我想写 key 而不是写简单`@`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:39:22.893

我找到了一种方法，只需输入 @-Sign 的 HEX-Code

这是一个小例子（在 Javascrip 中）

```
"@".replace(/\x40/,".") // Result --> "." 
```

你的代码看起来像这样

```
var reg = /\b[A-Z0-9._%+-]+\x40(?:[A-Z0-9-]+\.)+[A-Z]{2,4}\b/i
 "ccc@er.at".match(reg) // Result => ["ccc@er.at"] 
```

*=> Chrome 25+ 中的代码测试组*

# c# - 带有 linq 到实体匿名类型的 Datagridview

> ID：15106406
> 
> 赞同：1
> 
> 时间：2013-02-27T07:28:43.767
> 
> 标签：c#, linq-to-entities

我正在努力了解如何从使用 linq 到实体的 linq 查询填充的 datagridview 更新 SQL 数据库。

我从三个表中提取数据；具有以下查询的项目、任务和链接任务项：

```
var itemList = from x in me.LinkMissionItem
    join i in me.items on x.itemID equals i.itemID
    join m in me.Missions on x.missionID equals m.MissionID
    where m.MissionNo == selectedMission
    orderby i.categoryID, i.name
    select new { i.itemID, 
                 i.name, 
                 x.Role, 
                 i.Type.typeName, 
                 i.Category.categoryName, 
                 i.model, 
                 i.serialNo, 
                 i.Origin.originCountry, 
                 i.cost, 
                 x.Packaging }; 
```

我知道查询提供了一个匿名类型，从所有三个表中提取一些列并将其绑定到 datagridview，如下所示：

```
dgvMissionItems.DataSource = itemList.ToList(); 
```

使 datagridview 只读。顺便说一句，我目前以编程方式更新 Packaging 字段，没问题。

但是拥有 datagridview 的好处是通过编辑单个单元格来添加或更改其中的数据。我需要允许用户从 linkMissionItem 表中编辑 Role 字段。如果我只用实体 LinkMissionTable 填充数据网格视图（使其可修改），则用户的信息不友好且不清楚。

我误解或正在以错误的方式解决这个问题，我迫切需要一些关于如何完成工作的建议。我还没有在互联网上或在我所拥有的关于这个主题的书中找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:40:46.770

您应该检索整个实体（以及所需的相关实体），但禁用`AutoGenerateColumns`DataGridView 的功能。然后只定义要向用户显示的列，而不是通过将实体和网格数据源重新打包到新对象中来断开它们之间的链接。

# javascript - 如何阻止网站在 Firefox UI 中破坏搜索键（“/”）？

> ID：15106407
> 
> 赞同：1
> 
> 时间：2013-02-27T07:28:56.717
> 
> 标签：javascript, firefox, firefox-addon

这个问题是另一个问题的对立面：

[如何绕过快速搜索 Firefox 功能并捕获正斜杠按键](https://stackoverflow.com/questions/7797937/how-to-bypass-quick-search-firefox-feature-and-capture-forward-slash-keypress)

Firefox 支持`/`用作搜索热键。（在内部，这似乎是`cmd_findTypeText`。）这是我见过的最有用的页内搜索/导航实现——我可能每天使用它一百次。然而，近年来，许多 web 应用程序已经特别重载/破坏/用他们自己的劣质、adhoc 搜索 UI 替换了此功能（例如 google.com 和大多数运行 Atlassian Confluence 的网站）。对于在 Firefox 中使用此功能的人来说，它会中断 Web 浏览的“流程”。

似乎可以修补 Firefox 以分配不同的键（例如，修改`platformHTMLBindings.xml`in`toolkit.jar`以指定“ `Cmd`+ `/`”或`[`）——但该解决方案在 Firefox 频繁升级期间将无法维护。

注意：一些替代搜索相关的热键可用（例如“ `Ctrl`+ `F`”/“ `Cmd`+ `F`” `,`、或“ `Ctrl`+ `K`”/“ `Cmd`+ `K`”），但它们提供不同的功能。

如何（可维护地）阻止网站重载“/”（`cmd_findTypeText`）？或者，如何（可维护地）将其分配给不同的键？

# c# - MVC 中的 Gridview 或类似功能

> ID：15106408
> 
> 赞同：1
> 
> 时间：2013-02-27T07:29:03.023
> 
> 标签：c#, asp.net-mvc-3, razor

目前正在从数据库中获取用户输入的评论并在视图中显示如下

```
foreach (var item in Model.lstCommet)
                                    {
        <span class="comment_time">@Html.formattedDateTime(item.dTime.Value) </span>
        <span> : </span>
         <span class="comment_body">@item.displayComments</span> 
         <br />
        } 
```

并计划为每个项目添加编辑和删除功能。我怎么能在 MVC 中做到这一点？

就像用户单击编辑一样，它应该创建一个文本框，并在编辑后提交。

在 asp.net 中，我们使用 gridview 或其他东西并捕获。我在这里怎么办？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:38:10.700

欢迎来到 MVC。首先，您必须自己在这里完成所有 html 部分。这就是 MVC 的全部意义所在

1）您可以使用 Jquery 来完成，创建一个表单使其隐藏，然后单击编辑按钮将值加载到文本框等并使表单可见

2）创建一个单独的视图进行编辑，并在编辑时单击转到具有所需ID等的视图并在编辑模式下加载表单并进行保存等。

您也可以使用[WebGrid](http://msdn.microsoft.com/en-us/magazine/hh288075.aspx)，这将帮助您创建网格，而不是您需要的所有东西，但它的东西

# namespaces - Rake 默认任务和命名空间

> ID：15106414
> 
> 赞同：6
> 
> 时间：2013-02-27T07:29:16.513
> 
> 标签：namespaces, rake, task, default

我已经阅读了文档并查看了很多示例，但我不清楚默认值和命名空间。（使用 rake，版本 10.0.3）

首先，尽管我不记得明确地看到这一点，但似乎只有一个默认任务，无论定义了多少。显然加载顺序（PROJECT_NAME::Application.load_tasks）决定了获胜者。当我努力创建命名空间默认值时，我发现我有时会覆盖 Rails 应用程序的正常默认值，其中：

```
rake 
```

默认运行测试。

首先是“rake -T”命令：

```
$ rake -T a_name
rake a_name:a_task_1         # a_task_1
rake a_name:a_task_2         # a_task_2
rake a_name:b_name:b_task_1  # b_task_1
rake a_name:b_name:b_task_2  # b_task_2
rake a_name:default          # This is hopefully a namespaced default 
```

当我只运行我希望是“默认”的命名空间时，我得到：

```
$ rake a_name
rake aborted!
Don't know how to build task 'a_name'

(See full trace by running task with --trace) 
```

我期待它在 b_name 命名空间中运行 b_task_1 因为我已将其声明为默认值

但是，如果我明确加上“默认”这个词，我会得到：

```
$  rake a_name:default
a_task_1 
```

无论如何，我完全糊涂了。谁能帮我澄清一下...

```
namespace :a_name do

  desc "a_task_1"
  task :a_task_1 do
    puts "a_task_1"
  end

  desc "a_task_2"
  task :a_task_2 do
    puts "a_task_2"
  end

  namespace :b_name do

    desc "b_task_1"
    task :b_task_1 do
      puts "b_task_1"
    end

    desc "b_task_2"
      task :b_task_2 do
    puts "b_task_2"
    end

  end

  desc "This is hopefully a namespaced default"
  task :default => 'b_name:b_task_1'
end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-04T23:44:15.580

您可以定义与命名空间同名的任务。我认为它不如在命名空间本身内定义默认任务那么漂亮。

```
desc "runs bar & baz in foo"
task foo: ["foo:bar", "foo:baz"]

namespace :foo do
  desc "bar in foo"
  task :bar do
    puts "bar"
  end

  desc "baz in foo"
  task :baz do
    puts "baz"
  end
end 
```

这就是它们被列出的方式：

```
rake foo                               # runs bar & baz in foo
rake foo:bar                           # bar in foo
rake foo:baz                           # baz in foo 
```

# android - ADK ATmega Arduino 板的 ADB 在电源故障和恢复时断开连接

> ID：15106420
> 
> 赞同：2
> 
> 时间：2013-02-27T07:30:00.227
> 
> 标签：android

在我基于**ATmega 2560 Arduino ADK 板**的 Android 项目中。ADB 连接用于与 Android 设备进行通信。它工作正常，但问题是**电源中断后（故障和恢复）ADB 没有自动连接**，为了获得 ADB 连接，我必须重新插入（移除并再次插入）USB 电缆。这对我的项目不实用.如果有人有想法请指导我。

提前致谢。

# vba - 线系列可以绘制为半实线，半虚线吗？

> ID：15106422
> 
> 赞同：4
> 
> 时间：2013-02-27T07:30:08.687
> 
> 标签：vba, excel, excel-2010

在一个 Excel 工作表中包含一个图表，该图表绑定了另一个工作表中的数据。图表系列都是线系列。我需要线系列的一半作为实线，另一半作为虚线。这可以手动选择点改变线条样式，这不是我需要的方式，我需要的方式是来自 vba 代码，我们可以像半线一样用实线和另一个用虚线。

![在此处输入图像描述](../Images/c02d356ff36f7f59b605dcafc2e33852.png)

上面的图像我需要从 vba 代码中执行此操作。我搜索了我的网站并应用了提供的解决方案，但这些解决方案正在应用。非常感谢提供的任何解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-14T10:29:20.847

你应该可以这样做：

```
ActiveChart.SeriesCollection(1).ChartType = xlLineStacked
ActiveChart.SeriesCollection(1).Points(14).Format.Line.DashStyle = 3 
```

所以在我的例子中，第一个数据系列是一条普通的线，但最后一点（此图中的 14 点）的格式更改为破折号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:06:58.737

简短的回答是**否定**的。

更长更有用的答案是您必须将系列分成两部分，因为这不能用于单个系列。该行是属于`SeriesCollection`其格式化属性下的对象的单个对象，如非常hacky代码所示，该代码用于演示底层对象模型：

```
Sub editChart()

    Dim cO As Chart
    Set cO = ActiveChart
    Dim s As Series

    Set s = cO.SeriesCollection(1)
    s.Format.Line.DashStyle = msoLineDash

    Set s = cO.SeriesCollection(2)
    s.Format.Line.DashStyle = msoLineSolid

End Sub 
```

您可能会对 的自定义格式感到困惑`Points`，其中可能有许多附加到 a `SeriesCollection`，因为它们可以单独格式化。

请注意，如果您希望这些线连接起来，它们必须共享一个数据点（而不是第一个`Series`在点停止，`n`第二个`Series`在点开始`n+1`）。

# php - 显示不同服务器上不同行为的指数

> ID：15106429
> 
> 赞同：0
> 
> 时间：2013-02-27T07:30:44.887
> 
> 标签：php, mysql

我的问题反映了几乎没有变化的旧问题。我正在从 MySQL db 表数据类型中获取值，该字段是 varchar(32)，它存储的值如下：

```
1.497e-05 and so on. 
```

我想展示`1.497e-05 as 0.00001497`

我试过这里提到的[将作为字符串表示的指数数转换为小数](https://stackoverflow.com/questions/5340283/convert-exponential-number-presented-as-string-to-a-decimal)但失败了。

还有一件事我试图插入`0.00001497`到表中，但它存储为`1.497e-05`它虽然字段数据类型是 varchar(32)

# php - Magento 获取要显示在购物车上的缩略图 url

> ID：15106434
> 
> 赞同：12
> 
> 时间：2013-02-27T07:30:58.873
> 
> 标签：php, magento, e-commerce, magento-1.7

我在获取 Magento 购物车上的项目的缩略图 url 时遇到问题

这是我的代码：

```
$quote = Mage::getSingleton('checkout/session')->getQuote();
$cartItems = $quote->getAllVisibleItems();
foreach ($cartItems as $item) {
echo $item->getThumbnail();
} 
```

有谁知道为什么它总是返回空白。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-27T08:01:12.123

```
Mage::helper('catalog/image')->init($item->getProduct(), 'thumbnail'); 
```

会成功的

# c - 在c中将字符串传递给printf

> ID：15106436
> 
> 赞同：0
> 
> 时间：2013-02-27T07:31:05.287
> 
> 标签：c, string, printf

将字符串传递给 printf 无法正常工作代码：

```
char p[50];
scanf("%s", p); 
printf(p, 10); 
```

输入：`value:%d\n`

预期输出：`value:10`

输出：`value:10\n`

另外，我在不同的时间得到了不同的输出。3 次连续执行时相同 a.out 的输出：

$./a.out

```
value: %d\n
value: 
```

$./a.out

```
value:%d\n\n
value:10\n\n 
```

$./a.out

```
value:%d\n
value:10\n 
```

在上面，`value: %d\n`是由于scanf，而下一行是printf

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:37:48.930

将用户提供的文本作为第一个参数传递给 时要**非常**`printf`小心，否则您将遇到*格式字符串漏洞*。此外，通过使用 bare `scanf`，您也容易受到*缓冲区溢出*的影响。（仅三行代码中的两个漏洞！）

也就是说，您`\n`在输出中获得文字的原因是，当您`\n`在控制台输入时，您会得到一个带有文字反斜杠的字符串，后跟一个`n`，而不是换行符。

另外，请注意，它会在*任何*`scanf`空白处停止，因此输入只会导致进入缓冲区。如果你想读一整行，你应该使用类似的函数。*`value: xxx``value:``fgets`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:40:21.863

您的代码的行为完全符合预期。在您的第一个示例中，您在“10”之前传递了空格，因此它没有被打印出来。

最简单的解决方法是使用 fgets() 而不是 scanf()：

```
#include <stdlib.h>
#include <stdio.h>

void main () {
  char p[50];
  fgets(p, 50, stdin);
  //scanf("%s", p);
  printf(p, 10);
} 
```

原因是 fgets() 只从标准输入中获取一行，它不关心该行中有什么字符。另一方面，scanf() 要求您准确指定哪些字符将以何种顺序出现。

有关更多信息，请参阅[scanf](http://www.manpagez.com/man/3/scanf/)和[fgets的手册页。](http://www.manpagez.com/man/3/fgets/)*

# android - 使用标签 singleLine 的按钮文本旋转不正确

> ID：15106437
> 
> 赞同：3
> 
> 时间：2013-02-27T07:31:06.573
> 
> 标签：android, button, canvas, rotation

我有一个按钮：

```
public class MyButton extends Button{
       private float degrees;
       public MyButton(Context context) {
           super(context);
       }

       public MyButton(Context context, AttributeSet attrs, int defStyle) {
           super(context, attrs, defStyle);
       }

       public MyButton(Context context, AttributeSet attrs) {
           super(context, attrs);
       }

       @Override
       protected void onDraw(Canvas canvas) {
           canvas.save();
           canvas.rotate(degrees, this.getWidth()/2, this.getHeight()/2);
           super.onDraw(canvas);
           canvas.restore();
       }

       protected void rotateTextInButton(float degrees){
           this.degrees = degrees;
       }
} 
```

然后我创建一个按钮`MyButton mBtn = new MyButton(this)`，当我使用时，`mBtn.setSingleLine(true)`方法`rotateTextInButton()`仅适用于度数。`0``360`

如果`mBtn.setSingleLine(true)`从代码中删除 - 一切正常。

有可能解决这个问题吗？

PS 我必须在按钮处使用单行并且能够在按钮内旋转文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:35:23.897

而不是使用`mBtn.setSingleLine(true)`，使用`mBtn.setHorizontallyScrolling(true)`。希望，这会帮助你...

# java - 将类的self实例传递给另一个类，从那个类，java

> ID：15106438
> 
> 赞同：2
> 
> 时间：2013-02-27T07:31:09.167
> 
> 标签：java, class, parameter-passing, instance

如何将我所在的类的实例传递给另一个类？我想做的不是工作，必须有更好的方法。

```
 public class MainExample{

      // constructor
      public MainExample(){

      }

      public static void main(String[] args) {

      MainExample mainCl = // how to get instance of this class?

      NextClass nextCl = new NextClass(mainCl);  // not working, what to pass?           

      }

 }

 public class NextClass {

      MainExample mainEx;

      // constructor
      public NextClass(MainExample me){
      mainEx = me;

      }
 } 
```

<<< 编辑 >>>

这样做的原因是我必须将 MainExample 类的当前实例传递给 NextClass，以便我可以将观察者附加到可观察对象。使用观察者模式。NextClass 将启动多个线程，每个套接字连接一个线程。多个客户。所以我必须要;

```
 observable <-- (class instance of class that extends observable class)
  obsever <-- (class instance of class implementing observer)

  using the addObserver method;

  observable.addObserver(observer) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T07:32:35.037

像这样：`MainExample mainCl = new MainExample();`

您的`NextClass`构造函数需要一个`MainExample`引用。

该行`NextClass nextCl = new NextClass(mainCl);`现在应该编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T07:35:01.183

在`main`方法中，在创建之前没有实例，因为它*是*`MainClass`一个`static`方法。

在您可以使用的*实例*`this`方法中，但在您的情况下，您只需`MainExample`要先创建一个实例：

```
MainExample mainCl = new MainExample();
NextClass nextCl = new NextClass(mainCl); 
```

在实例方法中，您将执行以下操作：

```
public NextClass createNextClass() {
    return new NextClass(this);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T07:39:11.800

我希望当你的意思是`MainClass`你指的是类`MainExample`

如果是这种情况，您不能通过 JVM 隐式使用实例，则必须显式创建一个

```
MainExample mainCl = new MainExample();
NextClass nextCl = new NextClass(mainCl); 
```

# image - 以最佳分辨率调整图像大小

> ID：15106440
> 
> 赞同：0
> 
> 时间：2013-02-27T07:31:17.243
> 
> 标签：image, resize, photoshop, image-resizing

嗨，我有一张 1000x662px 的 jpeg 格式图像，我想以最佳分辨率将图像大小调整为 1536x200px。我用 Photoshop CS4 试过，但分辨率很差，而且越来越小。请帮助我以最佳分辨率调整图像大小。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:50:06.897

很抱歉对您的问题的回复很晚。通常对我有用的是通过单击“图像>图像大小”或按 CTRL+ALT+I 来更改图像大小

输入您想要的图片分辨率，在本例中为 1536xvariable，并确保在底部勾选“resample image”，选择“Bicubic Smoother”并点击“Enter”，我们开始了！

# c++ - 传递类/对象/数据？两种形式之间

> ID：15106446
> 
> 赞同：0
> 
> 时间：2013-02-27T07:31:57.377
> 
> 标签：c++, .net, c++-cli

我目前正在从事一个 C++ 项目，该项目需要我将数据从一种形式传递到另一种形式。`Create_Account.h`在这种情况下，用户将使用用户名和密码在 CreateAccount Form ( ) 上创建一个帐户。这个用户名和密码将被存储为一个对象的私有属性（让我们称之为`user`），他将进入一个登录表单（`Login.h`）。但是，我无法让系统将在此表单上输入的密码与之前的密码进行验证。我已经知道我必须将 object( `user`) 传递给这个登录表单，以便我可以使用 object( `user`) 的私有属性验证输入的用户名和密码。但是，我不太确定如何将对象传递给表单的语法。（我只熟悉通过函数传递对象）

我是这门语言的新手，非常感谢你的帮助。

下面是我写的代码。

```
**//CreateAccount.h**

#pragma once
#include "user2.h"
#include <stdlib.h>
#include "ExpenseTracker.h"
#include "User_Login.h"
#include <string>
#include <msclr/marshal_cppstd.h>

namespace EzXpns2 {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;

    /// <summary>
    /// Summary for Create_Account
    /// </summary>
    public ref class Create_Account : public System::Windows::Forms::Form
    {
    public:
        Create_Account(void)
        {
            InitializeComponent();
            //
            //TODO: Add the constructor code here
            //
        }

    protected:
        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        ~Create_Account()
        {
            if (components)
            {
                delete components;
            }
        }
    private: System::Windows::Forms::Button^  btnCreateNewAccount;
    protected: 

    protected: 
    private: System::Windows::Forms::TextBox^  txtBxPassword;
    private: System::Windows::Forms::Label^  lblPassword;
    private: System::Windows::Forms::TextBox^  txtBxUsername;
    private: System::Windows::Forms::Label^  lblUsername;
    private: System::Windows::Forms::TextBox^  txtBxReenterPassword;

    private: System::Windows::Forms::Label^  label1;
    //private: System::Windows::Forms:User_Login^ userlogin; 
    //private User_Login^ UserLogin;

    private:
        /// <summary>
        /// Required designer variable.
        /// </summary>
        System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        void InitializeComponent(void)
        {
            this->btnCreateNewAccount = (gcnew System::Windows::Forms::Button());
            this->txtBxPassword = (gcnew System::Windows::Forms::TextBox());
            this->lblPassword = (gcnew System::Windows::Forms::Label());
            this->txtBxUsername = (gcnew System::Windows::Forms::TextBox());
            this->lblUsername = (gcnew System::Windows::Forms::Label());
            this->txtBxReenterPassword = (gcnew System::Windows::Forms::TextBox());
            this->label1 = (gcnew System::Windows::Forms::Label());
            this->SuspendLayout();
            // 
            // btnCreateNewAccount
            // 
            this->btnCreateNewAccount->Location = System::Drawing::Point(147, 147);
            this->btnCreateNewAccount->Name = L"btnCreateNewAccount";
            this->btnCreateNewAccount->Size = System::Drawing::Size(126, 23);
            this->btnCreateNewAccount->TabIndex = 3;
            this->btnCreateNewAccount->Text = L"Create New Account";
            this->btnCreateNewAccount->UseVisualStyleBackColor = true;
            this->btnCreateNewAccount->Click += gcnew System::EventHandler(this, &Create_Account::btnCreateNewAccount_Click);
            // 
            // txtBxPassword
            // 
            this->txtBxPassword->Location = System::Drawing::Point(147, 68);
            this->txtBxPassword->Name = L"txtBxPassword";
            this->txtBxPassword->Size = System::Drawing::Size(126, 20);
            this->txtBxPassword->TabIndex = 1;
            this->txtBxPassword->UseSystemPasswordChar = true;
            // 
            // lblPassword
            // 
            this->lblPassword->AutoSize = true;
            this->lblPassword->Location = System::Drawing::Point(26, 73);
            this->lblPassword->Name = L"lblPassword";
            this->lblPassword->Size = System::Drawing::Size(56, 13);
            this->lblPassword->TabIndex = 12;
            this->lblPassword->Text = L"Password:";
            // 
            // txtBxUsername
            // 
            this->txtBxUsername->Location = System::Drawing::Point(149, 27);
            this->txtBxUsername->Name = L"txtBxUsername";
            this->txtBxUsername->Size = System::Drawing::Size(126, 20);
            this->txtBxUsername->TabIndex = 0;
            // 
            // lblUsername
            // 
            this->lblUsername->AutoSize = true;
            this->lblUsername->Location = System::Drawing::Point(24, 29);
            this->lblUsername->Name = L"lblUsername";
            this->lblUsername->Size = System::Drawing::Size(86, 13);
            this->lblUsername->TabIndex = 10;
            this->lblUsername->Text = L"Enter Username:";
            // 
            // txtBxReenterPassword
            // 
            this->txtBxReenterPassword->Location = System::Drawing::Point(147, 100);
            this->txtBxReenterPassword->Name = L"txtBxReenterPassword";
            this->txtBxReenterPassword->Size = System::Drawing::Size(126, 20);
            this->txtBxReenterPassword->TabIndex = 2;
            this->txtBxReenterPassword->UseSystemPasswordChar = true;
            // 
            // label1
            // 
            this->label1->AutoSize = true;
            this->label1->Location = System::Drawing::Point(26, 105);
            this->label1->Name = L"label1";
            this->label1->Size = System::Drawing::Size(100, 13);
            this->label1->TabIndex = 15;
            this->label1->Text = L"Re-enter Password:";
            // 
            // Create_Account
            // 
            this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
            this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
            this->ClientSize = System::Drawing::Size(309, 188);
            this->Controls->Add(this->txtBxReenterPassword);
            this->Controls->Add(this->label1);
            this->Controls->Add(this->btnCreateNewAccount);
            this->Controls->Add(this->txtBxPassword);
            this->Controls->Add(this->lblPassword);
            this->Controls->Add(this->txtBxUsername);
            this->Controls->Add(this->lblUsername);
            this->Name = L"Create_Account";
            this->Text = L"Welcome to EzXpns -Create Account";
            this->ResumeLayout(false);
            this->PerformLayout();

        }
#pragma endregion

private: System::Void btnCreateNewAccount_Click(System::Object^  sender, System::EventArgs^  e) {

                 ExpenseTracker *myTracker  = new ExpenseTracker();
                 string strUsername, strPassword, strReenterPassword; 
                 bool checkPassword = false;

                 System::String^ str1 = txtBxUsername->Text;
                 strUsername = marshal_as<string>(str1);
                 //convert system string to string

                 System::String^ str2 = txtBxPassword->Text;    
                 strPassword = marshal_as<string>(str2);

                 System::String^ str3 = txtBxReenterPassword->Text; 
                 strReenterPassword = marshal_as<string>(str3);

                 if (strPassword  == strReenterPassword) 
                     checkPassword = true;

                 if (checkPassword)
                 {
                     User *newUser = new User(strUsername, strReenterPassword);
                     (*myTracker).addUser(newUser);
                     this->Hide();
                     User_Login^ testDialog = gcnew User_Login;
                     testDialog->Show();
                 }
                 else
                    MessageBox::Show("Please re-enter your password.\n\nThe password you entered do not match.\nPlease try again.",
         "Create User Failure", MessageBoxButtons::OK, MessageBoxIcon::Warning);
         }
};
}

//UserLogin.h
#pragma once
#include "user2.h"
#include <stdlib.h>
#include "ExpenseTracker.h"
#include "Create_Account.h"
#include "Login.h"
#include <string>
#include <msclr/marshal_cppstd.h>

namespace EzXpns2 {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;
    using namespace msclr::interop;

    /// <summary>
    /// Summary for User_Login
    /// </summary>
    public ref class User_Login : public System::Windows::Forms::Form
    {
    public:
        User_Login(void)//ExpenseTracker *myPtrTracker)
        {
            InitializeComponent();
            //
            //TODO: Add the constructor code here
            //
            //CreateAccountForm = CreateAcct;
            //ExpenseTracker *myTracker = myPtrTracker;
        }

    protected:
        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        ~User_Login()
        {
            if (components)
            {
                delete components;
            }
        }
    private: System::Windows::Forms::Button^  btnLogin;
    protected: 
    private: System::Windows::Forms::TextBox^  txtBxPassword;
    private: System::Windows::Forms::Label^  lblPassword;
    private: System::Windows::Forms::TextBox^  txtBxUsername;
    private: System::Windows::Forms::Label^  lblUsername;
    private: System::Windows::Forms::Form^ CreateAccountForm;

    private:
        /// <summary>
        /// Required designer variable.
        /// </summary>
        System::ComponentModel::Container ^components;

#pragma region Windows Form Designer generated code
        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        void InitializeComponent(void)
        {
            this->btnLogin = (gcnew System::Windows::Forms::Button());
            this->txtBxPassword = (gcnew System::Windows::Forms::TextBox());
            this->lblPassword = (gcnew System::Windows::Forms::Label());
            this->txtBxUsername = (gcnew System::Windows::Forms::TextBox());
            this->lblUsername = (gcnew System::Windows::Forms::Label());
            this->SuspendLayout();
            // 
            // btnLogin
            // 
            this->btnLogin->Location = System::Drawing::Point(80, 110);
            this->btnLogin->Name = L"btnLogin";
            this->btnLogin->Size = System::Drawing::Size(126, 23);
            this->btnLogin->TabIndex = 9;
            this->btnLogin->Text = L"Login";
            this->btnLogin->UseVisualStyleBackColor = true;
            this->btnLogin->Click += gcnew System::EventHandler(this, &User_Login::btnLogin_Click);
            // 
            // txtBxPassword
            // 
            this->txtBxPassword->Location = System::Drawing::Point(80, 65);
            this->txtBxPassword->Name = L"txtBxPassword";
            this->txtBxPassword->Size = System::Drawing::Size(126, 20);
            this->txtBxPassword->TabIndex = 8;
            this->txtBxPassword->UseSystemPasswordChar = true;
            this->txtBxPassword->TextChanged += gcnew System::EventHandler(this, &User_Login::txtBxPassword_TextChanged);
            // 
            // lblPassword
            // 
            this->lblPassword->AutoSize = true;
            this->lblPassword->Location = System::Drawing::Point(20, 68);
            this->lblPassword->Name = L"lblPassword";
            this->lblPassword->Size = System::Drawing::Size(56, 13);
            this->lblPassword->TabIndex = 7;
            this->lblPassword->Text = L"Password:";
            this->lblPassword->Click += gcnew System::EventHandler(this, &User_Login::lblPassword_Click);
            // 
            // txtBxUsername
            // 
            this->txtBxUsername->Location = System::Drawing::Point(82, 24);
            this->txtBxUsername->Name = L"txtBxUsername";
            this->txtBxUsername->Size = System::Drawing::Size(126, 20);
            this->txtBxUsername->TabIndex = 6;
            this->txtBxUsername->TextChanged += gcnew System::EventHandler(this, &User_Login::txtBxUsername_TextChanged);
            // 
            // lblUsername
            // 
            this->lblUsername->AutoSize = true;
            this->lblUsername->Location = System::Drawing::Point(18, 24);
            this->lblUsername->Name = L"lblUsername";
            this->lblUsername->Size = System::Drawing::Size(58, 13);
            this->lblUsername->TabIndex = 5;
            this->lblUsername->Text = L"Username:";
            this->lblUsername->Click += gcnew System::EventHandler(this, &User_Login::lblUsername_Click);
            // 
            // User_Login
            // 
            this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
            this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
            this->ClientSize = System::Drawing::Size(231, 155);
            this->Controls->Add(this->btnLogin);
            this->Controls->Add(this->txtBxPassword);
            this->Controls->Add(this->lblPassword);
            this->Controls->Add(this->txtBxUsername);
            this->Controls->Add(this->lblUsername);
            this->Name = L"User_Login";
            this->Text = L"Welcome to EzXpns";
            this->Load += gcnew System::EventHandler(this, &User_Login::User_Login_Load);
            this->ResumeLayout(false);
            this->PerformLayout();

        }
#pragma endregion
    private: System::Void btnLogin_Click(System::Object^  sender, System::EventArgs^  e) {

                 //User myUser;
                 //ExpenseTracker myTracker;

                 System::String^ str1 = txtBxUsername->Text;
                 string strUsername = marshal_as<string>(str1);
                 //convert system string to string

                 System::String^ str2 = txtBxPassword->Text;    
                 string strPassword = marshal_as<string>(str2);
                 bool success = false;
                 success = (*myTracker).login(strUsername, strPassword);
                 if (success)
                 {
                        this->Hide();
                        Login^ testDialog = gcnew Login;
                        testDialog->Show();
                 }
                 else
                 {
                      MessageBox::Show("Please re-enter your password.\n\nThe password you entered is incorrect.\nPlease try again (make sure your caps lock is off).",
         "Login Failure", MessageBoxButtons::OK, MessageBoxIcon::Warning);
                 }
             }
private: System::Void lblUsername_Click(System::Object^  sender, System::EventArgs^  e) {
             }
private: System::Void lblPassword_Click(System::Object^  sender, System::EventArgs^  e) {
             }
private: System::Void txtBxPassword_TextChanged(System::Object^  sender, System::EventArgs^  e) {
             }
private: System::Void txtBxUsername_TextChanged(System::Object^  sender, System::EventArgs^  e) {
             }
private: System::Void User_Login_Load(System::Object^  sender, System::EventArgs^  e) {

         }
};
}

//ExpenseTracker.h 
#ifndef _EXPENSETRACKER_H
#define _EXPENSETRACKER_H

#include <string>
#include <vector>
//#include <iostream>
#include "user2.h"

using namespace std;

class ExpenseTracker
{
private:
    vector<User*> allMyUsers;

public:
    ExpenseTracker(); //empty constructor
    void addUser(User*);
    int findUser(string);
    bool login(string, string);
};

#endif; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:12:42.417

如何将数据从一种形式传递到另一种形式取决于应用程序的层次结构。它将是实例化您的两个表单的“父”类，它从第一个接收数据并将其发送到第二个。它可以通过构造函数或访问函数来完成，这并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T10:20:06.280

通常在使用表单 (OOP) 时，您应该真正将表单视为类（就像您为帮助应用程序任务而创建的类）。因此，在这种特殊情况下，当我必须通过表单传递数据时，我通常会创建属性。你应该只决定把它放在哪里以及如何使用它。

例如：如果我在主窗体中并且将调用登录窗体，因此它必须将用户名和密码返回到主窗体，那么我将在登录窗体中创建两个属性，称为用户名和密码（可能是字符串） . 您还可以创建公共字符串，以便您可以直接从外部（从主窗体）访问，但从 OOP 的角度来看这不是很好，因为您可以将 Username 和 Password 视为 Login 类的 2 个数据属性。

最后，使用公共属性，您可以轻松地从登录表单中检索这些信息。我认为这应该适用于您的需求。

```
public ref class Login {
    private string username, password;
    public string Username { get { return username; } }
    public string Password { get { return password; } }

    public void Show {
        //Do your stuff and then user clicks OK
        username = ...//soemthing like Textbox1.Text
        password = ...//same here
    }
}
public ref class Main{

    public void method {
         Login frmLogin = new Login();
         frmLogin.Show();
         MessageBox.Show("User: " + frmLogin.Username + " and Password: " + frmLogin.Password);
    }
} 
```

我没有测试或编写有效的东西（使用从 Forms 和 ShowDialog() 的继承类），但这是非常基本的想法，你应该明白。

# entity-framework - 实体框架加入卡住

> ID：15106449
> 
> 赞同：1
> 
> 时间：2013-02-27T07:32:01.363
> 
> 标签：entity-framework, join

我想通过使用实体框架加入 Northwind 数据库中的 Customer 和 Orders 表，但在“DataBind”上出现错误。

```
 public void CustomerJoin()
    {
        using (var ctx = new northwindContext())
        {
            var found = from mycust in ctx.Customers
                        join cust in ctx.Orders on mycust.CustomerID equals cust.CustomerID
                        select new { Customer = mycust, Order = cust }; ;
            grdEmployees.DataSource = found.ToList();
            grdEmployees.DataBind();
        }
    } 
```

grdEmployees.DataBind(); 的错误消息：ID 为“grdEmployees”的 GridView 的数据源没有用于生成列的任何属性或属性。确保您的数据源有内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:55:42.070

绑定时您可能做错了

```
grdEmployees.DataSource = found.ToList(); 
```

您应该为要显示的所有列创建一个具有属性的类

并遍历发现这样的东西

```
list<newClassToShow> itemsToBind = new <newClassToShow>();
foreach(var item in found.ToList())
{
   newClassToShow it = new newClassToShow()
it.property1 = item.column1;//do this for all item
itemToBind.add(it);
} 
```

现在将列表绑定到 gridEmployee

# r - 批量正态分布检验

> ID：15106450
> 
> 赞同：0
> 
> 时间：2013-02-27T07:32:04.520
> 
> 标签：r, normal-distribution

我正在尝试进行批量正态分布测试。

我的数据看起来像：

```
"Date","Department","Discipline","Employee ID","SumOfBillable Hrs"
"10/09/2012","D","B",50084.00,8.00
"10/09/2012","D","C",51870.00,10.00
"10/09/2012","D","E",50216.00,10.00
"10/09/2012","D","E",53422.00,9.00
"10/09/2012","D","E",53765.00,10.00
"14/01/2013","E","Y",53146.00,9.00
"14/01/2013","E","Y",53202.00,9.00
"14/01/2013","E","Y",54470.00,9.00
"14/01/2013","SITE","0",54525.00,9.00
"14/02/2013","D","C",51870.00,10.00
"14/02/2013","D","E",50029.00,8.50
"14/02/2013","D","E",50216.00,9.00
"14/02/2013","D","E",53422.00,4.00 
```

我想检查每个`Employee_ID`.

有批处理方法吗？我有80多`IDs`。因此，单独获取每个`ID`并为其绘制/创建描述性统计数据将相当乏味。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:49:02.660

你可以从这样的事情开始。如果你想要一些不同的东西，你必须提供更多关于你想用它做什么的信息。

```
data <- read.table(header=T, sep=",", 
 text='"Date","Department","Discipline","Employee ID","SumOfBillable Hrs"
"10/09/2012","D","B",50084.00,8.00
"10/09/2012","D","C",51870.00,10.00
"10/09/2012","D","E",50216.00,10.00
"10/09/2012","D","E",53422.00,9.00
"10/09/2012","D","E",53765.00,10.00
"14/01/2013","E","Y",53146.00,9.00
"14/01/2013","E","Y",53202.00,9.00
"14/01/2013","E","Y",54470.00,9.00
"14/01/2013","SITE","0",54525.00,9.00
"14/02/2013","D","C",51870.00,10.00
"14/02/2013","D","E",50029.00,8.50
"14/02/2013","D","E",50216.00,9.00
"14/02/2013","D","E",53422.00,4.00')

# Means:
aggregate(SumOfBillable.Hrs ~ Employee.ID, data=data, FUN=mean)

# Standard Deviations:
aggregate(SumOfBillable.Hrs ~ Employee.ID, data=data, FUN=sd)

# Or a Shapiro normality test: (only works if you have more than 3 observations per Employee.ID
aggregate(SumOfBillable.Hrs ~ Employee.ID, data=data, FUN=shapiro.test) 
```

# c - 子进程对来自父进程的输入进行排序，通过管道发送输出。为什么我得到重复的单词？

> ID：15106454
> 
> 赞同：1
> 
> 时间：2013-02-27T07:32:23.767
> 
> 标签：c, loops, pipe, children, fork

这可能是一个相当复杂的问题。情况如下：

我正在尝试编写一个带有两个命令行参数的程序：要生成的孩子的数量，以及用空格分隔的单词的文件名。

该程序获取文件，解析单词，必须使用 fputs 将每个单独的单词以循环方式放入管道（如第一个单词进入第一个管道，第二个单词进入第二个管道等）并附加这些管道到正确的产生的孩子。

在解析器解析单词并填充管道之后，产生 # 个子子进程，每个子进程从解析器接收一个管道，其中包含单词。然后将管道映射到标准输入以与 sort() 进程一起使用，然后将 sort() 进程的 stdout 输出附加到第二组管道（再次 #children *2）。这些来自孩子的输出管道然后被带到程序的抑制器部分，然后必须从每个管道的顶部取出一个单词，必须使用 fgets，找到最小的，打印它，丢弃它，然后替换它丢弃该管道中的第二个单词，再次查找最小的单词，直到所有管道都为空。

我知道可能有一种更简单的方法，但我决定创建一个长度为#children 的 char* 数组，因此从每个管道中，当我拉出一个单词时，我可以将它放入数组中循环并比较。当找到最小的单词时，最小单词的索引处的内容在打印该单词后设置为 NULL，并且整个 WHILE 循环的下一次迭代确保用数组中的下一个单词填充该数组的索引。对应的管道。WHILE 应该一直运行，直到数组中的所有单元格都为 NULL（不再有来自任何管道的单词）。

到目前为止，我只让 WHILE 循环迭代了 3 次，并且发现单词数组得到了它的第一组单词，它找到了最小的单词，打印它，将它设置为 NULL，但是在第二次迭代期间 NULL 内容数组的 被一个不是新词的新词替换。它是另一个管道的副本。

我不认为解析单词并将其放入管道中存在问题。我已经对其进行了广泛的测试，并且在 sort() 过程之前它似乎还不错。在排序过程之后，我恐怕只能猜测出了什么问题。我花了很多时间试图解决它，但无济于事。

所以，现在一些代码。我将发布儿童产卵部分，然后是抑制器。由于这仍在进行中，因此有点混乱，并且有几个变量仅在调试中真正使用。我提前道歉！！

子项的产生（将管道映射到标准输入/标准输出并创建 sort() 进程）：

```
//Collection of children need to be created specified by numChildren
int count;
for(count = 0; count < numChildren; count++){
    printf("Count: %d\n", count);

    switch((p = fork())){

    case -1:
        perror("Could not create child");
        exit(-1);

    case 0:
        printf("Entering child\n");
        close(0);
        close(1);
        dup(pipefds[count*2]);
        dup(pipefds_two[(count*2)+1]);
        execlp("/bin/sort", "sort", (char*)NULL); // (char*)NULL
        break;

    default:
        //parent case -- p holds pid of child
        printf("I am the parent, PID: %d\n", getpid());
        child = wait(&status);
        printf("pipefds_two: %d\n", pipefds_two[count*2]);
        printf("Waited on child %d\n", child);

        break;
    }

} 
```

最后，抑制器：

```
//Suppressor - Reads one word from each pipe, compares, prints largest.  Gets next word from that one pipe, compares, prints largest.  
//Suppressor deletes duplicate words
//Reads from pipefds_two[count*2] position
char* words[numChildren];
int index, cont=1;
char* smallest; 
int smallestIndex;
int checker;
int duplicateCount = 0;
int kindex;
char* temptwo;
int length;
int nullCount = 0;
int counter = 0;

for(kindex = 0; kindex < numChildren; kindex++){ //Initializes array with beginning values
    FILE* sortOutput = fdopen(pipefds_two[kindex*2], "r");
    fgets(buffer, PIPE_BUF, sortOutput);
    words[kindex] = strdup(buffer);
    fflush(sortOutput);
    close(pipefds_two[(kindex*2)+1]);
}
while(counter < 3){ //This is where it prints out lowest values each "round", gets new words, and gets rid of duplicates
    for(index = 0; index < numChildren; index++){
        if(words[index] != NULL){ //Searches for first value in array that's not null to be "lowest" value
            smallest = words[index];
            smallestIndex = index;
            break;
        }
    }
    printf("Suppressor WHILE \n");
    nullCount = 0;
    printf("smallest word assigned: %s\n", smallest);
    printf("smallest index %d\n", smallestIndex);
    for(index = 0; index < numChildren; index++){ //need to loop through each pipe and pull a word, THEN compare them all!
    printf("Suppressor FOR (index: %d word:%s)\n", index, words[index]);
        if(words[index] == NULL){ //Fills in a NULL gap in the array with a new word from the corresponding pipe
            FILE* sortOutput = fdopen(pipefds_two[index*2], "r");
            fgets(buffer, PIPE_BUF, sortOutput);
            words[index] = strdup(buffer);
            fflush(sortOutput);
            printf("the word which replaces a NULL: %s\n", words[index]);
        }
    }
    for(index = 0; index < numChildren; index++){ //COMPARE ALL VALUES NOW THAT IT IS POPULATED
    printf("compare FOR loop index: %d\n", index);
        if((index != numChildren) && (words[index] != NULL) && (index != smallestIndex)){
            printf("IF statement, (current arrayWord: %s)(smallest: %s)\n", words[index], smallest);
            checker = strcmp(smallest, words[index]); 
            //printf("checker\n");
            if(checker > 0){
                smallest = words[index];
                smallestIndex = index;
                printf("New smallest assigned: %s\n New Smallest Index: %d\n", smallest, smallestIndex);
            }else if(checker == 0){
                printf("Same word\n");
                words[index] = NULL;
                duplicateCount++;
            }else{
                printf("ArrayWord is larger, smallest staying the same\n");
            }

        } if(index == numChildren-1){ //reached the end of the list
            printf("The smallest this round is: %s\n", smallest);
            words[smallestIndex] = NULL;
        }
    }
    for(index = 0; index < numChildren; index++){ //Check for removed words!
    printf("Checking if entries are null in array: index %d\n", index);
        if(words[index] == NULL){
            nullCount++;
            printf("words at index null num: %d\n", nullCount);
        }
    }
    //check to see if everything is null
    counter++;
} 
```

无论如何，如果你已经读到这里，我真诚地感谢你。这个问题困扰了我至少一个星期，任何建议/评论都非常感谢！

编辑：

据我所知，解析器将其正确拆分，并且我已经看到单词正确到达子进程。另外我昨晚做了更多的测试，抑制器首先拉出的单词是正确的单词。例如，如果您的单词列表是

关于沙发胡须的相机是伏特加裁判价格收益率

然后，假设您有 3 个孩子，当它进入管道时，它将是：第一个是相机胡须裁判，第二个是大约是的价格，第三个是沙发伏特加和产量。

当这些被排序时，第一个输出管道应该包含相机裁判须，第二个是大约价格，第三个是沙发产量伏特加。然后抑制器拿出相机，左右，沙发，并比较它们。在那之前它似乎运行良好，通过测试我发现它确实从排序列表中提取了正确的第一个单词。最小的将是 about，然后抑制器在比较数组中将其设置为 null，但这就是问题发生的地方。

问题出现在第二次迭代中。从每个管道中提取一个单词并进行比较后，然后将一个单词设置为 NULL，以便下一次迭代它被正确管道中的一个新单词替换。无论出于何种原因，在这一步，当 about 被（应该是）price 取代时，它实际上被 couch（这是第三个管道中的单词）所取代。

似乎它是从错误的管道中提取的，但根据我的代码，我看不出这是怎么可能的。

编辑2！！

我已经大大缩小了范围。通过使用 bzero(buffer, PIPE_BUF) 清除缓冲区；在从管道读取其他内容之前（在抑制器部分中，在检测到数组内容是否为 NULL 之后），以及我的 FILE* sortOutput 声明方式的一些更改（一个全局变量，而不是通过循环每次迭代重新定义它) 它现在抓取新单词。但是，当管道用完单词时，它仍然出于某种原因将空索引内容与单词进行比较（这意味着空索引内容是最小的！）

我该如何防止呢？

# php - PHP：从网站中提取 HTML 数据

> ID：15106456
> 
> 赞同：0
> 
> 时间：2013-02-27T07:32:31.993
> 
> 标签：php, web-scraping

我想从网站中提取 NAME、ADDRESS 和 EMAIL

`http://agentquery.com/agent.aspx?agentid=13`

如何在 PHP 中使用 file_get_contents() 执行此操作

例如

`$abc = file_get_content("http://agentquery.com/agent.aspx?agentid=13");`

现在如何从中提取 NAME、EMAIL 和 ADDRESS ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T07:39:20.973

这可以通过`file_get_contents()`一些正则表达式处理来完成。您必须确保在 PHP.ini 中启用了[fopen URL 包装器](http://php.net/manual/en/filesystem.configuration.php)

您需要抓取页面，然后找到要解析的唯一字符串。这是为了获得名称：

```
<?php

$page = file_get_contents('http://agentquery.com/agent.aspx?agentid=13');

// name will be inside a span ctl00_Agent1_lblName, store it in $agent_name
preg_match("/<span id=\"ctl00_Agent1_lblName\".*span>/", $page, $agent_name);

// display agent name matches
print_r($agent_name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:41:03.430

只需使用简单的 html dom 类就很容易，如果您知道 css、jQuery 中的选择器，您可以获得所需的值

[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

# jquery - 用 bindTo 传递 bindData 的木偶

> ID：15106458
> 
> 赞同：0
> 
> 时间：2013-02-27T07:32:38.593
> 
> 标签：jquery, bind, marionette, jquery-events

有没有办法将 bindData 传递给 Marionette's `bindTo`，类似于 jQuery 的绑定？

我在 jQuery 的网站上读到，您可以执行以下操作来传递 bindData：

```
function myFunction(event){
    console.log(event.data.foo); // output "bar"
};
$(".some-element").bind("click", {foo:"bar"}, myFunction); 
```

我想这样做的原因是因为我将多个函数绑定到一个路由。

第一个函数只是使用路由中的参数，没什么特别的。
第二个函数需要将自定义数据传递给它，这就是 bindData 的用武之地。

***控制器和路由器***

```
var Controller = {
    page1: function(itemId){
        Vent.trigger('openPageOne', itemId);
    }
};

var AppRouter = Marionette.AppRouter.extend({
    controller: Controller,
    appRoutes: {
        "page1/:itemid" : "page1"
    },
    start: function() {
        Backbone.history.start();
    }
}); 
```

***首先绑定***
这很好用，当导航到该路线时，我在控制台上打印了 itemId。

```
var MyLayout = Marionette.Layout.extend({
    initialize: function(){
        _.bindAll(this);
    },
    myFunction: function(itemId){
        console.log(itemId);
    }
});

var myLayout = new MyLayout();
myLayout.bindTo(Vent, "openPageOne", myLayout.myFunction); 
```

***第二个绑定***
这是我失败的地方:(
我想将自定义数据对象传递给函数。
在另一个函数中，我想显示 foo 的值。

```
var AnotherLayout = Marionette.Layout.extend({
    initialize: function(){
        _.bindAll(this);
    },
    anotherFunction: function(event){
        // Here is where I want to use foo
        console.log(event.data.foo);
    }
});

var anotherLayout = new AnotherLayout();
anotherLayout.bindTo(Vent, "openPageOne", {foo:"bar"}, anotherLayout.anotherFunction); 
```

更具体地说，第一个函数应该改变我页面的内容。第二个功能应该突出显示我的导航菜单中的一个项目。我想发送给我的函数的自定义对象基本上是菜单项的元素 ID，因此我可以向它添加一个类。

我只是以错误的方式接近这个吗？任何输入都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:49:35.633

不确定这是否会有所帮助，但我倾向于在 Marionette 中使用 Vent。

```
var app = new Backbone.Marionette.Application(); 
```

然后我使用listenTo（替换bindTo）事件触发，当它触发时我触发，

```
app.vent.trigger('App:openPageOne', { 'foo': 'bar'}); 
```

然后在你的发泄监听器中

```
app.vent.on('App:openPageOne', function(data) {
} 
```

您的数据被发送到数据参数：data.foo

您还可以在对象内发送更多数据 { 'foo1': 'bar1', 'foo2': 'bar2' }

我喜欢使用应用事件管理器。

# c# - C# 中的桌面邮件客户端应用程序出错 | SMTP 错误

> ID：15106460
> 
> 赞同：-4
> 
> 时间：2013-02-27T07:32:47.130
> 
> 标签：c#, .net, smtp, gmail, smtpclient

我正在使用 C# 构建一个桌面邮件客户端 这个应用程序在我朋友的电脑上运行良好，但在我的电脑上不工作。它向我展示了一个例外列表。请帮助我。

System.Net.WebException：无法解析远程名称：'smtp.gmail.com'

例外列表在这里 [http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvcs/thread/7781fb98-9c5e-4b3c-b699-e9ff92da75eb/](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvcs/thread/7781fb98-9c5e-4b3c-b699-e9ff92da75eb/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:42:04.093

如果你使用代理，你应该像这样配置你的*app.config*文件：

```
<system.net>
    <defaultProxy>
        <proxy usessystemdefault="False" 
            proxyaddress="http://your-proxy-name.domain.com:port-number-if-any"
            bypassonlocal="True"
            autoDetect="False" />
   </defaultProxy> 
</system.net> 
```

# iphone - 如何从包含特定键的 NSmutablearray 中删除所有字典？

> ID：15106461
> 
> 赞同：1
> 
> 时间：2013-02-27T07:32:51.463
> 
> 标签：iphone, ios, ipad

我有一个 iPhone 应用程序，其中有一个`NSMutableArray`字典。选择表格的每一行时，我正在使用删除字典

```
if (indexPath.row <[self.newmessagearrays count])
{
     [messagearrays removeObjectAtIndex:indexPath.row];
} 
```

我有一个场景，当点击该行时，我想删除我的“from id”键相同的所有字典。我试过这样，但没有效果：

```
 NSPredicate * pr = [NSPredicate predicateWithFormat:@"userid == %@",fromidstring];
[messagearrays filterUsingPredicate:pr]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:58:08.257

您可以使用以下方法过滤数组`NSPredicate`：

```
NSPredicate * pr = [NSPredicate predicateWithFormat:@"containsKey == SOME_KEY"];
[messageArrays filterUsingPredicate:pr]; 
```

**更新**

回应编辑/澄清：

```
NSPredicate * pr = [NSPredicate predicateWithBlock:
  ^(id dictionary, NSDictionary * bindings) {
    return (BOOL)![[dictionary objectForKey:@"fromid"] isEqual:@"190"];
}];
[messageArrays filterUsingPredicate:pr]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:47:08.137

数组将对象保存在某个索引处，字典保存对象和键，因此您的算法应该是这样的

使用循环从数组中一一获取对象（字典），检查您的字典是否具有该特定键。
如果是，则使用函数从数组中删除该对象`removeObjectAtIndex`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:51:23.180

```
NSMutableIndexSet *discardedItems = [NSMutableIndexSet indexSet];
NSDictionary *item;
NSUInteger index = 0;

for (item in yourArrayOfNSDictionaries) {
    if ([dictionary objectForKey:theKeyYouWantToCheckFor] != nil) [discardedItems addIndex:index];
    index++;
}

[originalArrayOfItems removeObjectsAtIndexes:discardedItems]; 
```

# android - 微调模式不起作用

> ID：15106464
> 
> 赞同：1
> 
> 时间：2013-02-27T07:33:08.467
> 
> 标签：android, android-widget, android-spinner

我有两个微调器，一个带有

```
android:spinnerMode="dialog" 
```

还有一个

```
android:spinnerMode="dropdown" 
```

现在，当我单击任一微调器时，我发现它们之间没有区别。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T07:52:33.053

![mode_dialog](../Images/9420db5495808da701630db9e83f61dc.png)![mode_dropdown](../Images/ba6b9786993f86edf5bbf8693985ae46.png)这很奇怪。添加 android:prompt="@string/app_name" 时显示对话框和下拉样式略有不同。否则两者几乎相同。尝试使用下拉和对话框的属性来区分两者。

# magento - magento FRONTEND 的事件观察者

> ID：15106466
> 
> 赞同：1
> 
> 时间：2013-02-27T07:33:17.727
> 
> 标签：magento

我正在尝试捕获仅在前端范围内有效的事件，但我为此目的正在观察的事件

> “controller_front_init_routers”

仅适用于全局范围而不是前端。我试图通过在页面加载时打印（在 Mage.php dispatchEvent 方法内）每个调度的事件名称来找到一个，但这些事件都没有在前端范围内起作用。我需要一个在前端页面加载时被激活的事件。请指教。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:58:34.810

为了使您的任务更可模块化和更高效，我建议使用此事件：

controller_action_layout_generate_blocks_after

在您的功能中，您可以做一些更精确的事情，这要归功于：

```
public function yourEvent($event) {
$controller = $event->getAction();
$action = $event->getFullActionName();
if ($action == 'catalog_product_view') //DO SOMETHING SPECIFIC TO PRODUCT PAGE
elseif ($action == 'catalog_category_view') //DO SOMETHING SPECIFIC TO CATEGORY
... 
```

问候，

# android - Android在可扩展列表视图中禁用自动滚动

> ID：15106471
> 
> 赞同：3
> 
> 时间：2013-02-27T07:33:22.590
> 
> 标签：android, scrollview, expandablelistview

我在可扩展的列表视图中使用，当我在列表视图中打开其中一个项目时，我的滚动会自动聚焦在打开的项目上，我可以阻止列表专注于新项目并留在同一个地方吗？我试图从打开的视图中删除可聚焦的，但它没有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-20T14:48:01.063

您需要覆盖 OnGroupClickListener 并使用该事件。这将避免 ExpandableListView 执行默认操作，至少在针对 4.3 进行编译时会平滑滚动到该位置。

这是一个实现示例：

```
 expandableListView.setOnGroupClickListener(new ExpandableListView.OnGroupClickListener() {
        @Override
        public boolean onGroupClick(ExpandableListView parent, View v, int groupPosition, long id) {
            if(parent.isGroupExpanded(groupPosition)){
                parent.collapseGroup(groupPosition);
            }else{
                boolean animateExpansion = false;
                parent.expandGroup(groupPosition,animateExpansion);
            }
            //telling the listView we have handled the group click, and don't want the default actions.
            return true;
        }
    }); 
```

如果您使用该事件，则需要在需要时复制一些默认行为。这包括播放音效和调用展开/折叠侦听器。

为了参考默认行为，我将发布它，取自 Android 源代码 (4.3)

```
 //in ExpandableListView.java 
    boolean handleItemClick(View v, int position, long id) {
    final PositionMetadata posMetadata = mConnector.getUnflattenedPos(position);

    id = getChildOrGroupId(posMetadata.position);

    boolean returnValue;
    if (posMetadata.position.type == ExpandableListPosition.GROUP) {
        /* It's a group, so handle collapsing/expanding */

        /* It's a group click, so pass on event */
        if (mOnGroupClickListener != null) {
            if (mOnGroupClickListener.onGroupClick(this, v,
                    posMetadata.position.groupPos, id)) {
                posMetadata.recycle();
                return true;
            }
        }

        if (posMetadata.isExpanded()) {
            /* Collapse it */
            mConnector.collapseGroup(posMetadata);

            playSoundEffect(SoundEffectConstants.CLICK);

            if (mOnGroupCollapseListener != null) {
                mOnGroupCollapseListener.onGroupCollapse(posMetadata.position.groupPos);
            }
        } else {
            /* Expand it */
            mConnector.expandGroup(posMetadata);

            playSoundEffect(SoundEffectConstants.CLICK);

            if (mOnGroupExpandListener != null) {
                mOnGroupExpandListener.onGroupExpand(posMetadata.position.groupPos);
            }

            final int groupPos = posMetadata.position.groupPos;
            final int groupFlatPos = posMetadata.position.flatListPos;

            final int shiftedGroupPosition = groupFlatPos + getHeaderViewsCount(); 
            smoothScrollToPosition(shiftedGroupPosition + mAdapter.getChildrenCount(groupPos),
                    shiftedGroupPosition);
        }

        returnValue = true;
    } else {
        /* It's a child, so pass on event */
        if (mOnChildClickListener != null) {
            playSoundEffect(SoundEffectConstants.CLICK);
            return mOnChildClickListener.onChildClick(this, v, posMetadata.position.groupPos,
                    posMetadata.position.childPos, id);
        }

        returnValue = false;
    }

    posMetadata.recycle();

    return returnValue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-13T10:49:12.453

一种 hacky 方式，但您可以扩展`ExpandableListView`和覆盖它的 ] 平滑滚动方法而不做任何事情。代码在 C# 中，但您了解基本概念：

```
{
    public class NonSmoothScrollExpandableListView: ExpandableListView
    {
        public NonSmoothScrollExpandableListView(Context context): base(context)
        {

        }

        public NonSmoothScrollExpandableListView(Context context, IAttributeSet attrs) :
            base(context, attrs)
            {
        }

        public NonSmoothScrollExpandableListView(Context context, IAttributeSet attrs, int defStyle) :
            base(context, attrs, defStyle)
            {
        }

        public override void SmoothScrollByOffset(int offset)
        {
        }

        public override void SmoothScrollBy(int distance, int duration)
        {
        }

        public override void SmoothScrollToPosition(int position)
        {
        }

        public override void SmoothScrollToPosition(int position, int boundPosition)
        {
        }

        public override void SmoothScrollToPositionFromTop(int position, int offset)
        {
        }

        public override void SmoothScrollToPositionFromTop(int position, int offset, int duration)
        {
        }
    }
} 
```

# teamcity - env.TEAMCITY_PROJECT_NAME 和 system.teamcity.projectName 之间的区别

> ID：15106474
> 
> 赞同：3
> 
> 时间：2013-02-27T07:33:45.567
> 
> 标签：teamcity

在 TeamCity 中有两个包含相同值的变量：`env.TEAMCITY_PROJECT_NAME`和`system.teamcity.projectName`。这些有区别吗？或者类似的东西（不推荐，推荐）？在文档中我没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:52:27.723

根据[TeamCity Server Build Properties](http://confluence.jetbrains.com/display/TCD7/Predefined+Build+Parameters)其相同。

但是`TEAMCITY_PROJECT_NAME`是环境变量。

Environment Varialbe 功能于[2007](http://youtrack.jetbrains.com/issue/TW-1643#comment=27-2050)年添加，以便将构建文件全名作为系统属性传递给构建。

# wpf - 我可以在 Syncfusion GridDataControl 中旋转列标题吗？

> ID：15106475
> 
> 赞同：2
> 
> 时间：2013-02-27T07:33:55.813
> 
> 标签：wpf, syncfusion

我正在使用 SyncFusion WPF 控件；我需要旋转 GridDataControl 的一些列标题以最小化列的宽度，因为这些列中的数据只有一个字符长。我找不到办法，我也看了演示，但没有任何收获，有人可以帮我吗？在这个网格中甚至有可能吗？我可以在 DevExpress XtraGrid 中使用，但他们的 WPF 网格对我没有用，所以我不得不转向其他开发人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T05:40:35.193

旋转列标题是什么意思？为什么不尝试使用 ColumnSizer for GridDataControl to Auto/SizeToCell/SizeToHeader 来最小化列宽？

```
 <syncfusion:GridDataControl x:Name="dataGrid"
                                    ItemsSource="{Binding OrderList}"
                                    ColumnSizer="Auto"
                                    VisualStyle="Metro"> 
```

# java - 没有获取特定语言环境的货币符号

> ID：15106484
> 
> 赞同：23
> 
> 时间：2013-02-27T07:34:20.903
> 
> 标签：java, localization, locale, currency

我正在尝试根据语言环境获取货币符号。但不是返回符号，而是返回代码。我有一个片段：

```
import java.util.Currency;
import java.util.Locale;

public class CurrencyFormat
{
  public void displayCurrencySymbols() 
  {
   Currency currency = Currency.getInstance(Locale.US); 
   System.out.println("United States: " + currency.getSymbol());
  } 
  public static void main(String[] args)
  {
    new CurrencyFormat().displayCurrencySymbols();
  }
} 
```

对于**Locale.US**它给出了符号`$`，但如果我替换

```
Currency currency = Currency.getInstance(Locale.US); 
```

和

```
Currency currency = Currency.getInstance(Locale.GERMANY); 
```

然后它不是符号，而是给出国家代码。为什么会这样以及我们如何获得符号？

**编辑：**看了一些答案后，我想明确设置一些特定的默认本地不是解决方案，因为**我需要一次显示所有可用的标志**。

例如

```
 Locale.setDefault(Locale.UK); 
```

会给我欧元符号，但对于doller，它将给出代码而不是doller符号（$）。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-11T16:30:29.407

嗨，请尝试以下代码

```
import java.text.NumberFormat;
import java.util.Comparator;
import java.util.Currency;
import java.util.Locale;
import java.util.SortedMap;
import java.util.TreeMap;

public class CurrencyExample
{
    public static void main(String[] args) 
    {
         Utils.getCurrencySymbol( Currency.getInstance(Locale.US).getCurrencyCode());
         Utils.getCurrencySymbol(Currency.getInstance(Locale.JAPAN).getCurrencyCode());
         Utils.getCurrencySymbol(Currency.getInstance(Locale.UK).getCurrencyCode());
         Utils.getCurrencySymbol("INR");
    }
}

class Utils{
      public static SortedMap<Currency, Locale> currencyLocaleMap;
      static {
          currencyLocaleMap = new TreeMap<Currency, Locale>(new Comparator<Currency>() {
            public int compare(Currency c1, Currency c2){
                return c1.getCurrencyCode().compareTo(c2.getCurrencyCode());
            }
        });
        for (Locale locale : Locale.getAvailableLocales()) {
             try {
                 Currency currency = Currency.getInstance(locale);
             currencyLocaleMap.put(currency, locale);
             }catch (Exception e){
         }
        }
    }

    public static String getCurrencySymbol(String currencyCode) {
        Currency currency = Currency.getInstance(currencyCode);
        System.out.println( currencyCode+ ":-" + currency.getSymbol(currencyLocaleMap.get(currency)));
        return currency.getSymbol(currencyLocaleMap.get(currency));
    }
} 
```

上面程序的输出是这样的：

```
USD:-$
JPY:-￥
GBP:-£
INR:-Rs. 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-27T07:46:47.730

您将看到 Java 认为默认语言环境中的用户*期望*看到的货币符号。Javadocs 也证实了这一点`getSymbol()`：

> 获取默认语言环境的此货币的符号。例如，对于美元，如果默认语言环境是美国，则符号是“$”，而对于其他语言环境，它可能是“US$”。如果无法确定符号，则返回 ISO 4217 货币代码。

通过更改您的默认语言环境：

```
Locale.setDefault(Locale.UK); // e.g. 
```

你可以通过实验来证明这一点。（*注意：我并不是说这是一个解决方案，只是让您有机会检查其他语言环境看到的内容*）。

我建议您坚持使用 Java 认为适合您的默认语言环境的任何内容 - 我相信您的用户可以理解它。

* * *

为每种货币寻找“正常”货币符号似乎很有吸引力，但请查看以下货币列表：[http](http://www.xe.com/symbols.php) ://www.xe.com/symbols.php 。

看看有多少国家用`$`符号来识别他们的货币。埃及也使用英镑符号 ( `£`)。语言环境货币符号背后的整个想法是为您提供一个*您所在地区*的用户可以理解的字符串。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-01T07:39:21.020

一个更简单的解决方案，基于[Amrit Raj Sharma](https://stackoverflow.com/users/2153710/amrit-raj-sharma)的回答：

只需将语言环境作为参数添加到`getSymbol()`方法中即可。

因此，将您的代码更改为：

```
import java.util.Currency;
import java.util.Locale;

public class CurrencyFormat
{
  public void displayCurrencySymbols() 
  {
   Currency currency = Currency.getInstance(Locale.US); 
   System.out.println("United States: " + currency.getSymbol(Locale.US));
  } 
  public static void main(String[] args)
  {
    new CurrencyFormat().displayCurrencySymbols();
  }
} 
```

# ruby-on-rails - 根据 I18n 标准的中文语言环境

> ID：15106485
> 
> 赞同：3
> 
> 时间：2013-02-27T07:34:27.580
> 
> 标签：ruby-on-rails, locale, rails-i18n

我想知道`Chinese language`可用的标准语言环境中的标准代码`I18n`。例如`:en`英语。还告诉我如何为中文命名`yml`文件（英文为en.yml）。

添加`zh.yml`并`/config/locales/`指定中文的代码`:zh`不起作用。

rails 控制台中的 I18n.available_locales 仅提供以下几行。

```
irb(main):022:0> I18n.available_locales
=> [:ar, :en, :de] 
```

我在里面看不到 :zh。我们如何在其中包含中文翻译代码？

谢谢 ：）-

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T10:04:43.840

如果您正在寻找简体中文，它是`zh-CN`。对于传统的`zh-TW`.

# jsp - 当索引是变量时，如何在jsp中访问arraylist的元素？

> ID：15106486
> 
> 赞同：7
> 
> 时间：2013-02-27T07:34:41.680
> 
> 标签：jsp, arraylist, springsource

我正在访问数组列表中的元素。由于所需元素的索引是一个变量，因此出现了问题。任何人都可以帮助我吗？

例如`<td><c:out value="${PARENT_MODULE[module.moduleId]}"> </c:out></td>`

这里 module.moduleId 是一个变量。

我已经试过了

```
<c:out value="${PARENT_MODULE[${module.moduleId}]}"> 
```

然而，这给出了一个错误。

> org.apache.jasper.JasperException: /WEB-INF/jsp/showModules.jsp(40,20) "${PARENT_MODULE[${module.moduleId}]}" 包含无效表达式：javax.el.E​​LException:错误解析：${PARENT_MODULE[${module.moduleId}]}

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T10:09:52.770

就像`module.moduleId`在 EL 表达式中一样，它将被评估。因此，您无需将其包含在额外的 ${} 中。

`<c:out value="${PARENT_MODULE[module.moduleId]}">`将工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T01:58:52.277

假设`PARENT_MODULE`是你给数组的别名`modules` 假设`module`是对象并且`moduleId`是模块对象中的一个属性

试试这个：

```
< c:out value="${PARENT_MODULE[num].moduleId}"/> 
```

哪里`num`是一个数字。`PARENT_MODULE[num]`将返回数组`module`中“ **num** ”位置的对象。之后，您所要做的就是访问该`moduleId`属性。

# python - 如何将 str、UTF-8 和 int 的混合输出到文本文件？

> ID：15106489
> 
> 赞同：0
> 
> 时间：2013-02-27T07:34:50.103
> 
> 标签：python, python-2.7

我有一个包含字符串数据 (UTF-8)、二进制 (true/false/1/0) 和整数数据的元组，我想在输出文件中作为一行输出。我的部分代码是：

```
###  Python 2.73

import fileinput
import re
import time
import codecs

uIDfile = '\Python\Fav Test\ppl.ttxt'

InFile = open(uIDfile)
OutFile = codecs.open('C:\Python\Fav Test\S2.ttxt', encoding='utf-8', mode='w')

for user in InFile:
    user = user [:-1]
#   user = unicode(user, 'utf-8').encode('utf-8')

    if 'NNNN' in user:
        break
    else:
        if '@N' in user:
            try:
                Grp = people_getGroups(user_id = user)
                g = 0
                if GetAll:
                    for group in Grp.find('groups').findall('group'):

                        g += 1
                        fErr = ''
                        uID  = user
                        gID  = group.get('ID')
                        gName  =  group.get('name')
                        tup = '\"{0}\"\t\"{2}\"\t\"{1}\"\t''\t{3}\t{4}\t{5}\t{6}\n'.format(uNSID, gNSID, gName, bin1, bin2, int1, int2)
                        OutFile.write(tup.encode('utf-8')) 
```

我尝试了几种不同版本的“OutFile.write()”语句。下面列出了每个错误。

```
OutFile.write(codecs.utf_8_decode(tup.encode('utf-8')))
    TypeError: coercing to Unicode: need string or buffer, tuple found

OutFile.write('\t'.join(codecs.utf_8_decode(tup.encode('utf-8'))))
    TypeError: sequence item 1: expected string or Unicode, int found

OutFile.write('\t'.join(map(str, codecs.utf_8_decode(tup.encode('utf-8')))))
    tup = '\"{0}\"\t\"{2}\"\t\"{1}\"\t""\t\"{3}\"\t\"{4}\"\t\"{5}\"\t\"{6}\"\n'.format(uNSID, gNSID, gName, str(bin1), str(bin2), str(int1), str(int2))
    UnicodeEncodeError: "'ascii' codec can't encode characters in position 0-2: ordinal not in range(128)"

OutFile.write('\t'.join(map(str, codecs.utf_8_decode(tup.encode('utf-8')))))
    tup = '\"{0}\"\t\"{2}\"\t\"{1}\"\t""\t\"{3}\"\t\"{4}\"\t\"{5}\"\t\"{6}\"\n'.format(uNSID, gNSID, gName, bin1, bin2, int1, int2)
    UnicodeEncodeError: "'ascii' codec can't encode characters in position 0-2: ordinal not in range(128)" 
```

真诚感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:28:22.493

如果你想在文件中输出行，我建议你使用[csv 模块](http://docs.python.org/release/2.7.3/library/csv.html)。这是如何使用它的示例：

```
#-*- coding: utf-8 -*-
import csv
# Use of tempfile instead of hard-coded path, to be cross-platform :)
import tempfile
_, tmppath = tempfile.mkstemp()
out = open(tmppath, 'w')
writer = csv.writer(out)
input = "Te×t Ðåtå".decode('utf-8')
tup = (input.encode('utf-8'), 42, False)
tup
# OUT: ('Te\xc3\x97t \xc3\x90\xc3\xa5t\xc3\xa5', 42, False)
writer.writerow(tup)
out.close()
print(u"Look at me : {}".format(tmppath)) 
```

您可以使用[方言和格式参数](http://docs.python.org/release/2.7.3/library/csv.html#csv-fmt-params)来精确定义输出文件的格式。

为避免 UTF8 干扰，这些[好幻灯片](http://farmdev.com/talks/unicode/)中解释的良好做法是：

*   尽早解码
*   Unicode 无处不在
*   编码晚

# jquery - jquery 代码不工作代码是完美的不知道什么是错的

> ID：15106490
> 
> 赞同：1
> 
> 时间：2013-02-27T07:34:50.760
> 
> 标签：jquery

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script>
<script>
$(document).ready(function(){
  $("p").click(function(){
    $(this).hide();
  });
});
</script>
</head>
<body>
<p>If you click on me, I will disappear.</p>
<p>Click me away!</p>
<p>Click me too!</p>
</body>
</html> 
```

上面写的是我用来测试jquery的代码..

当我运行 html 文件时，它在我的浏览器中不起作用。

当我从 w3schools.com 运行这段代码时，它在我的浏览器中运行良好。

请让我知道这段代码不能正常工作的原因是什么。在我的浏览器中启用了 java 脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:45:16.157

您的代码按预期工作。

但。**你是怎么打开文件的？**通过文件浏览器，还是您将文件托管在本地网络服务器上？

第一个不起作用，后者会，因为您执行 jQuery 脚本文件路径的方式。通过省略协议，您可以使其继承页面的协议。如果是`http`或`https`，那很好。但是，如果是`file`，那么您可能在该位置没有文件。所以**如果**你在本地加载它（例如，你`file://`在 URL 的开头看到），你需要`http:`在你的脚本路径前面放一个。

或者，如果您正在寻找一个易于在 Windows 上设置的网络服务器（这样您就可以使用`http`URL 打开文件并且您的脚本路径有效），我对[QuickPHP](http://www.zachsaw.com/?pg=quickphp_php_tester_debugger)相当满意。Linux/Windows/Mac 都有很多选择。只要问谷歌。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:46:58.377

只有当您的文件在服务器上时，您的 jQuery 路径才能工作。如果没有，则使用此路径：

[http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-27T07:38:58.937

`<script>`来源是错误的

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script> 
```

# android - 为 Android 构建社交通知系统的标准设计模式 -

> ID：15106491
> 
> 赞同：1
> 
> 时间：2013-02-27T07:34:53.437
> 
> 标签：android, push-notification, server-side, google-cloud-messaging, polling

开发具有许多标准社交网络功能的社交应用程序，例如好友请求、私人消息和评论，并且我需要实时或接近实时的通知系统。我已经研究了 GCM 并做了一些 tuts。

我的问题是我的服务器端应该如何构建？实现近乎实时的社交通知系统的标准模式是什么？我发现了很多专注于 GCM 启动和运行的 tuts，但是系统整体应该如何构建仍然是模糊的。为简单起见，让我们以私人消息系统为例，从我收集的信息来看，它的方式似乎是：

*   用户 A 类型消息 >>
*   用户A点击提交>>
*   消息从客户端发送到服务器以供 API 处理 >>
*   消息到达使用 sendMessage 函数处理的 API >>
*   在 sendMessage 函数中，消息被验证并写入数据库 >>
*   在 sendMessage 函数内部 if(message_inserted_into_db){ 向 GCM 发送通知}
*   在 Android 客户端设置代码以从 GCM 检索通知

我是否缺少任何其他步骤？还有其他应该触发发送通知的事情吗？我应该只使用推送还是推送和轮询的组合？

我想非常清楚，我对如何在技术层面实施 GCM 并不感到困惑……所以请不要发布指向谷歌文档的链接。

# iphone - 仅将标题提供给指定的表

> ID：15106496
> 
> 赞同：0
> 
> 时间：2013-02-27T07:35:20.253
> 
> 标签：iphone, xcode, ipad, uitableview

我的项目中有两个 UITableView ，我使用以下方法为一个表提供自定义标题：

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    if(tableView.tag == 3)
    {
    SectionInfo *array  = [self.sectionInfoArray objectAtIndex:section];
    if (!array.sectionView)
    {
        NSString *title = array.groupdeck.groupTitle;
        array.sectionView = [[SectionView alloc] initWithFrame:CGRectMake(0, 0, tblData.bounds.size.width, 45) WithTitle:title Section:section delegate:self];
    }
    return array.sectionView;
    }
    else{
        return 0;
    }

return 0;
} 
```

它为带有标签 3 的表提供标题，例如：

![在此处输入图像描述](../Images/6ed100c81b7efc5c9fade45b58affdf5.png)

但它也将默认标题提供给其他表，甚至`return 0`还有其他条件，例如：

![在此处输入图像描述](../Images/240c710cd24b614357d40a4a61299716.png)

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:39:35.030

它可能默认为默认标头，因为您返回了`0`. 尝试返回`nil`。

来自：[tableView:viewForHeaderInSection：默认值？](https://stackoverflow.com/questions/1552725/tableviewviewforheaderinsection-default-value)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T07:57:13.623

尝试 ：

```
otherTable.sectionHeaderHeight = 0.0; 
```

你不必做任何其他事情。

或者：

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section 
 { 
      if(tableView.tag == 3)
      {
          //Required height.
      }
      else
      {
          return 0.0; 
      }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:19:19.323

参考 Apple 文档中所写的

```
 // custom view for header. will be adjusted to default or specified header height
    - (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section; 
```

它显示默认标题，**分组表的高度为 22，非分组表的高度**为**10**。

此外，如果您要显示的视图的高度`UITableView` 大于上述值，那么您还必须使用`UITableView`Delegate 方法

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section; 
```

# jdbc - Elasticsearch jdbc 河吃掉了整个内存

> ID：15106498
> 
> 赞同：1
> 
> 时间：2013-02-27T07:35:25.537
> 
> 标签：jdbc, lucene, elasticsearch, elasticsearch-jdbc-river

我正在尝试将 mysql 表中的 1600 万个文档（47gb）索引到 elasticsearch 索引中。我正在使用[jparante 的 elasticsearch jdbc River](https://github.com/jprante/elasticsearch-river-jdbc)来执行此操作。但是，在创建河流并等待大约 15 分钟后，整个堆内存被消耗殆尽，没有任何河流运行或文档被索引的迹象。当我有大约 10-1200 万条记录要索引时，这条河过去运行良好。我曾尝试过河流 3-4 次，但徒劳无功。

`Heap Memory pre allocated to the ES process = 10g`

弹性搜索.yml

```
 cluster.name: test_cluster

 index.cache.field.type: soft
 index.cache.field.max_size: 50000
 index.cache.field.expire: 2h

 cloud.aws.access_key: BBNYJC25Dij8JO7YM23I(fake)
 cloud.aws.secret_key: GqE6y009ZnkO/+D1KKzd6M5Mrl9/tIN2zc/acEzY(fake)
 cloud.aws.region: us-west-1

 discovery.type: ec2
 discovery.ec2.groups: sg-s3s3c2fc(fake)
 discovery.ec2.any_group: false
 discovery.zen.ping.timeout: 3m

 gateway.recover_after_nodes: 1
 gateway.recover_after_time: 1m

 bootstrap.mlockall: true

 network.host: 10.111.222.33(fake) 
```

河流.sh

```
curl -XPUT 'http://--address--:9200/_river/myriver/_meta' -d '{
    "type" : "jdbc",
    "jdbc" : {
        "driver" : "com.mysql.jdbc.Driver",
        "url" : "jdbc:mysql://--address--:3306/mydatabase",
        "user" : "USER",
        "password" : "PASSWORD",
        "sql" : "select * from mytable order by creation_time desc",
        "poll" : "5d",
        "versioning" : false
    },
    "index" : {
        "index" : "myindex",
        "type" : "mytype",
        "bulk_size" : 500,
        "bulk_timeout" : "240s"
    }
}' 
```

系统属性：

```
16gb RAM
200gb disk space 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T15:20:44.587

根据您的 elasticsearch-river-jdbc 版本（使用 查找`ls -lrt plugins/river-jdbc/`），此错误可能已关闭（[https://github.com/jprante/elasticsearch-river-jdbc/issues/45](https://github.com/jprante/elasticsearch-river-jdbc/issues/45)）

否则在 Github 上提交错误报告。

# git - Git 致命的模棱两可的参数 'HEAD' 修订版和文件名都使用 - 将路径与修订版分开，如 git [....]--[...]

> ID：15106499
> 
> 赞同：7
> 
> 时间：2013-02-27T07:35:29.467
> 
> 标签：git

*   我的 git 版本是 1.8.0 mysysgit0。

*   -linux 服务器上的远程仓库。

*   本地存储库 - Windows 7。

当我尝试提交本地更改时，它会在下面显示致命错误：

```
fatal ambiguous argument 'HEAD' both revision and file name use -- to separate paths from revision like  git [....]--[...] 
```

任何人都可以提出问题所在吗？解决方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T08:37:49.590

您的存储库中必须有一个名为 的文件`HEAD`，这很令人困惑`git`，因为这`HEAD`也是当前活动分支的习惯名称。

您可以使用双破折号来消除歧义，如下所示：

```
git log -- HEAD 
```

这将显示有关名为`HEAD`.

避免使用这些特殊名称的文件以避免这些问题可能是明智的。

# python - 包装器方法的意义是什么？

> ID：15106500
> 
> 赞同：1
> 
> 时间：2013-02-27T07:35:29.537
> 
> 标签：python, decorator

```
def decorator(func):
   def wrapper(func):
     do something before
     func()
     do something later

   return wrapper 
```

func = decorator(func) ----> 这是我的 decoarated 函数 func() 做装饰的东西并给我输出。

**为什么不简单地装饰一下呢？**

```
def decorator(func):

    do something before
    func()
    do something later

decorator(func) 
```

我能看到的唯一优点是，在一种情况下，我获得了用于分配和重用的 func 对象。我想这个问题有点含糊，但我在想，如果我们的目的只是装饰，为什么我们需要返回一个函数对象？我的意思是有什么好处？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:38:44.017

如果您想在多个地方使用修饰函数，则必须返回一个函数对象以重复使用*。*

在您的第二个示例中，调用`decorator(func)`calls `func`。这意味着如果你想要装饰器的行为（即“之前的东西”和“之后的东西”），你必须`decorator(func)`每次都调用。

装饰器的重点是您可以有效地执行`func = decorator(func)`，然后，当您调用`func`它时，它会自动调用装饰器行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:40:42.123

考虑装饰器语法的含义。这个：

```
@decorator
def say_hi():
    print "Hello!" 
```

是语法糖：

```
def say_hi():
    print "Hello!"
say_hi = decorator(say_hi) 
```

因此，装饰器基本上接受一个函数，并返回一个新的、修改后的函数。换句话说，在装饰之前，`say_hi`是一个功能；之后，它仍然是一个函数……尽管是一个修改过的函数。

如果装饰器是这样写的：

```
def decorator(fn):
  return "Something else" 
```

然后，在装饰之前，`say_hi`它将是一个函数，但之后，它将具有值“Something else”（一个字符串）而不是 - 现在它不再是可调用的！

# java - Netbeans 中的 Jaxb 错误

> ID：15106504
> 
> 赞同：1
> 
> 时间：2013-02-27T07:35:45.860
> 
> 标签：java, netbeans, xsd, jaxb

我正在尝试从指定 url 处可用的 Xml Schema 创建一个 java 类。我正在使用 netbeans Jaxb 绑定来实现这一点。

我收到错误消息：

```
 [ERROR] Property "Title" is already defined. Use &lt;jaxb:property> to resolve this conflict.
 line 481 of file:/C:/Users/Documents/NetBeansProjects/JavaApplication1/xml-resources/jaxb/newbinding/tims.cisco.com/xsd/T2.xsd

[ERROR] The following location is relevant to the above error
line 38 of file:/C:/Users/Documents/NetBeansProjects/JavaApplication1/xml-  resources/jaxb/newbinding/tims.cisco.com/xsd/xlink.xsd

failure in the XJC task. Use the Ant -verbose switch for more details
  C:\Users\Documents\NetBeansProjects\JavaApplication1\nbproject\xml_binding_build.xml:15: unable to parse the schema. Error messages should have been provided 
```

我还检查了一些帖子，这些帖子告诉我要更改但我不知道如何在 netbeans 中做到这一点。如果有人能给我一个示例 XML Schema 并解释如何克服 netbeans 中的这个错误，那将会很有帮助。

我的示例架构将是这样的：

```
 <xs:schema xmlns="http://someurl" xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:xlink="http://www.w3.org/1999/xlink" targetNamespace="http://nsurl"   
elementFormDefault="qualified" attributeFormDefault="unqualified" version="3.7">
 <xs:include schemaLocation="./something.xsd" /> 
 <xs:import namespace="http://www.w3.org/1999/xlink" schemaLocation="./xlink.xsd" /> 
 <xs:element name="elename">
<xs:annotation>
  <xs:documentation>Root element</xs:documentation> 
 </xs:annotation>
<xs:complexType>
 <xs:sequence>
 <xs:element ref="element1" minOccurs="0" /> 
<xs:choice maxOccurs="unbounded">
<xs:element ref="Element2" maxOccurs="unbounded" /> 
<xs:element ref="element3" maxOccurs="unbounded" /> 

<xs:element ref="element4" /> 
<xs:element ref="element5" /> 
<xs:element ref="element6" maxOccurs="unbounded" /> 
<xs:element ref="Elemnt7" maxOccurs="unbounded" />  
<xs:element name="Member" type="MemberType" /> 
<xs:element ref="Path" /> 
</xs:choice>
<xs:element name="Timestamp" type="xs:dateTime" minOccurs="0" /> 
<xs:element name="ExecutionTime" type="xs:double" minOccurs="0" /> 
</xs:sequence>
<xs:attribute name="msgID" type="xs:NMTOKEN" use="optional" /> 
<xs:attributeGroup ref="xlink:simpleLink" /> 
</xs:complexType>
</xs:element>
</xs:schema> 
```

我也是 xml 的新手。有人可以帮助我使用 jaxb 在 netbeans 中创建类或发布指针来手动为这个模式创建一个 java 类。

结果应该类似于链接中给出的内容： [http ://www.java2s.com/Code/Java/JDK-6/GenerateJavaSourceFromXMLSchemaXSD.htm](http://www.java2s.com/Code/Java/JDK-6/GenerateJavaSourceFromXMLSchemaXSD.htm)

我正在使用如下外部绑定文件

```
 <jxb:bindings xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
               xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
               jxb:version="2.0">
      <jxb:bindings [schemaLocation="T2.xsd" node="/xs:schema">
      <jxb:bindings node=".//xs:element[@name='Title']">
       <jxb:property name="TitleElement"/>
      </jxb:bindings>
      </jxb:bindings>
      </jxb:bindings> 
```

我在 Netbeans 中创建 jaxb 绑定时使用了这个外部绑定文件，但它仍然显示相同的错误。如果你能说出我做错了什么我需要立即帮助，请抽出时间来解决这个问题。提前致谢.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:28:53.543

您的问题可以通过更改架构来解决，例如[如何解决重复变量](http://www.xenta.nl/blog/2011/06/28/jaxb-and-how-to-work-around-duplicate-variables/)中所示的方式。

# iphone - Dropbox 是否提供通过 IOS 应用中的 SDK 创建新帐户？

> ID：15106507
> 
> 赞同：1
> 
> 时间：2013-02-27T07:36:09.630
> 
> 标签：iphone, dropbox-api

嗨朋友们，我必须在我的项目中实现 Drop box API。Dropbox 是否提供通过 IPHONE 应用程序中的 SDK 创建新帐户？或仅已签名用户通过 IOS 应用程序访问 Dropbox。请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:08:00.337

不，Dropbox API 目前不提供创建帐户的调用。如有必要，用户可以通过网站或官方应用程序创建帐户。

# android - 从自定义 ListView Android 中删除行

> ID：15106508
> 
> 赞同：0
> 
> 时间：2013-02-27T07:36:11.730
> 
> 标签：android, listview, adapter

好的，所以我在 SO 上搜索了一段时间，但似乎无法找到工作的答案。这个很接近，但它删除了列表中的最后一项，然后在我删除最后一个值时崩溃。我只想让列表行内部的按钮根据列表中的内容执行操作，然后从列表中删除该行。谢谢！

```
public class CitrusListAdapter extends ArrayAdapter<CitrusList>
{

//Globals
Context context;
int layoutResourceId;
ArrayList<CitrusList> data = null;

//Create the list item row
public CitrusListAdapter(Context context, int layoutResourceId, ArrayList<CitrusList> listItems)
{
    super(context, layoutResourceId, listItems);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = listItems;
}

//Expand and place items for List View onto calling page in ListView
@Override
public View getView(final int position, View convertView, ViewGroup parent)
{
    View row = convertView;
    CitrusListHolder holder = null;

    if(row == null)
    {
        LayoutInflater inflater = ( (Activity) context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);
        holder = new CitrusListHolder();

        //holder.txtTitle = (TextView)row.findViewById(R.id.CitrusListTitle);
        holder.colorSpinner = (Spinner)row.findViewById(R.id.color_spinner);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(getContext(),
                R.array.colors_array, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        holder.colorSpinner.setAdapter(adapter);

        holder.textureSpinner = (Spinner)row.findViewById(R.id.texture_spinner);
        ArrayAdapter<CharSequence> texture_adapter = ArrayAdapter.createFromResource(getContext(),
                R.array.texture_array, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        holder.textureSpinner.setAdapter(texture_adapter);

        holder.soliditySpinner = (Spinner)row.findViewById(R.id.solidity_spinner);
        ArrayAdapter<CharSequence> solidity_adapter = ArrayAdapter.createFromResource(getContext(),
                R.array.solidity_array, android.R.layout.simple_spinner_item);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        holder.soliditySpinner.setAdapter(solidity_adapter);

        Button rateButton = (Button) row.findViewById(R.id.rate_button);
        rateButton.setTag(position);
        rateButton.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                Integer index = (Integer) v.getTag();
                data.remove(index.intValue());
                notifyDataSetChanged();
            }
        });

        row.setTag(holder);
    }
    else
    {
        holder = (CitrusListHolder)row.getTag();
    }

    CitrusList SingleLine = data.get(position);
    //holder.txtTitle.setText(SingleLine.title);
    return row;
}

//Stores the values of the items in the list view
static class CitrusListHolder
{
    //TextView txtTitle;
    Spinner colorSpinner;
    Spinner textureSpinner;
    Spinner soliditySpinner;
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T07:41:53.620

您可以通过使用方法从数组列表中删除该项目`remove()`，然后调用`notifyDataSetChanged()`适配器的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T07:40:49.790

我认为你应该试试这个

```
rateButton.setOnClickListener(new OnClickListener()
    {
        @Override
        public void onClick(View v)
        {
            int index = Integer.parseInt(v.getTag().toString())
            data.remove(index);
            notifyDataSetChanged();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T07:43:22.997

要从 ListView 中删除一行，您需要修改控制 ListView 的 Adapter 持有的数据。如果适配器是`ArrayAdapter`，请调用`remove()`并`ArrayAdapter`给它您需要删除的任何项目的位置。然后使用`notifyDataSetChanged()`. 适配器将刷新 ListView 并且您的违规行将被删除。

在您的代码中，您没有将当前项目的位置存储在视图持有者中。将其更改为：

```
static class CitrusListHolder
{
    //TextView txtTitle;
    Spinner colorSpinner;
    Spinner textureSpinner;
    Spinner soliditySpinner;
    int currentPosition;
} 
```

然后在支架中设置位置

```
Button rateButton = (Button) row.findViewById(R.id.rate_button);
        rateButton.setTag(position); //delete this line
        holder.currentPosition = position; //storing current position in holder
        rateButton.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                CitrusListHolder currHolder = (CitrusListHolder) v.getParent().getTag(); //get button's parent which is the row
                data.remove(currHolder.currentPosition);  //get the stored position and remove the corresponding row
                notifyDataSetChanged();
            }
        }); 
```

那应该行得通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T07:48:44.067

您没有将实际位置设置为`Button`.

将您的`Button.setTag()`行从设置文本和其他数据`if`的条件的内部移到外部。`if-else`因此，在滚动或刷新之后，它应该在每次调用时获得真实位置，`getView()`如下所示：

```
public View getView(final int position, View convertView, ViewGroup parent)
{
    View row = convertView;
    CitrusListHolder holder = null;

    if(row == null)
    {
        //your implementation
    }
    else
    {
        //your implementation
    }

    CitrusList singleLine = data.get(position);
    //holder.txtTitle.setText(singleLine.title);
    rateButton.setTag(String.valueOf(position));  //<==== place it here, so it'll get the real/update position as tag, Convert it to String.
    return row;
} 
```

并在获得它的同时`onClick()`。将其转换为`String`然后将其转换为`Integer`这样的：

```
int position = Integer.parseInt(v.getTag().toString()); 
```

# php - Smarty 对象数组访问

> ID：15106509
> 
> 赞同：0
> 
> 时间：2013-02-27T07:36:24.963
> 
> 标签：php, loops, foreach, smarty

我从一个 pdo 对象获取所有结果作为 std 对象结果，我正在像这样低谷。

```
{foreach from=$users key=userID item=row}
                            <tr>  
                                <td>
                                    {$row->name}
                                </td>
                               {foreach from=$regions key=regionId item=region}
                                    <td>
                                    {assign var=id value=$row->id}{assign var=cid value=$region->id}  <input type="checkbox" name="regionChecked[{$region->id}][]" value="{$row->id}" {if $assighnedUsers.$id.$cid eq 1}checked="checked"{/if}>
                                    </td>

 {/foreach}
                                <td>
                                 {$row->id|@var_dump}   <input type="checkbox" name="regionDefault" value="{$row->id}" {if $loleq $row->id}checked="checked"{/if} >
                                </td>
                                <td data-user="{$userID}">
                                    {$deleteButton}
                                </td>
                            </tr>
                        {/foreach} 
```

现在我的问题是我可以避免

```
{assign var=id value=$row->id}{assign var=cid value=$region->id} 
```

不知何故？我尝试了各种组合，但没有一个有效。

像 $region.$row->id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:40:02.757

而不是`->`使用`.`和尝试

```
{assign var=id value=$row.id}{assign var=cid value=$region.id} 
```

# php - 使用cookie获取id，对匹配的字段进行inner join

> ID：15106511
> 
> 赞同：0
> 
> 时间：2013-02-27T07:36:37.013
> 
> 标签：php, sql, cookies, inner-join

这是我的第一篇文章，但我发现这个论坛非常有用！我希望你能帮助我。

我的难题是：我让用户登录然后互相评分。用户登录后，我希望他们能够看到他们所做的评分（这是我开始工作的——我可以通过表单生成的唯一 ID 选择的评论），并且还可以看到他们的评分摘要已收到。这就是它似乎变得棘手的地方。我尝试了内部连接，但没有产生任何结果。

现在我把这部分放在我的html上面

```
<?php 
    include "connect.php";
    if(isset($_COOKIE['ID_my_site'])) 
    { 
        $username = $_COOKIE['ID_my_site']; 
        $pass = $_COOKIE['Key_my_site']; 
        while($info = mysql_fetch_array( $check ))   
        { 
            //if the cookie has the wrong password, they are taken to the login page 
            if ($pass != $info['password']) 
            {
                header(""); 
            } 
            //otherwise they are shown the admin area    
            else 
            {
                echo ""; 
                echo ""; 
            } 
        } 
    } 
     else 
    //if the cookie does not exist, they are taken to the login screen 
    {            
        header(""); 
    } 
include "settings.php";
?> 
```

这部分在我的html之后

```
<?php
    include('connect.php');
    $result = mysql_query("SELECT r.user, r.rating1, r.rating2, r.rating3, u.username
                             FROM reviews r INNER JOIN users u ON r.user=u.username
                            WHERE r.user='$userid' ORDER BY r.user DESC") 
                or die(mysql_error()); 

        echo "<table border='1' cellpadding='10'>";
        echo "<tr>
                  <th></th>
                  <th>View Comments</th>
                  <th>Rating 1</th>
                  <th>Rating 2</th>
                  <th>Rating 3</th>
              </tr>";

        while($row = mysql_fetch_array( $result )) {
               echo "<tr>";
               echo '<td><a href="showit.php?id=' . $row['id'] . '">View/Print</a></td>';
               echo '<td>' . $row['rating1'] . '</td>';
               echo '<td>' . $row['rating2'] . '</td>';
               echo '<td>' . $row['rating3'] . '</td>';
               echo "</tr>"; 
        } 
        echo "</table>";
?> 
```

不幸的是，我根本没有得到任何结果，尽管我在 sql 表中看到了这个人的大约 20 个评分。

它还抛出“警告：mysql_fetch_array()：提供的参数不是第 19 行的 reviews.php 中的有效 MySQL 结果资源”错误。

那里可能有一个愚蠢的错误，但我越来越盲目和沮丧。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:24:06.493

如果这是第 19 行：

```
while($row = mysql_fetch_array( $result )) {
               echo "<tr>";
               echo '<td><a href="showit.php?id=' . $row['id'] . '">View/Print</a></td>';
               echo '<td>' . $row['rating1'] . '</td>';
               echo '<td>' . $row['rating2'] . '</td>';
               echo '<td>' . $row['rating3'] . '</td>';
               echo "</tr>"; 
        } 
```

您应该使用数组中值的位置，例如 1,2,3 .. 等等，而不是 ratings1 ,ratings2 .. 等等。

# api - 如何设计我的 Node.js API，以便我也可以从服务器端使用它？

> ID：15106515
> 
> 赞同：0
> 
> 时间：2013-02-27T07:37:05.697
> 
> 标签：api, node.js, mongodb, express, api-design

我有一个从 mongodb 返回一些 JSON 的 API：

```
// In router.js
var api = require('api') 
app.get('/lists', api.lists);

// In api.js
var db = require('db')
exports.lists = function(req, res) {
  db.lists.find({}, function(err, lists) {
    res.send(lists);
  });
}; 
```

有没有办法设计 API，以便我也可以在我的 Node.js 应用程序中使用它？我试图避免在 API 之外复制任何数据库代码。我基本上有一个可以在服务器端呈现数据的控制器：

```
// In controller.js
var api = require('api')
exports.page = function(req, res) {
  res.send(api.lists()); // This won't work
}; 
```

我找到了一个 hacky 解决方案，它是将回调函数传递给 api.lists()，但我觉得这是实现此目的的“错误”方法：

```
// In api.js
exports.lists = function(req, res, callback) {
  db.lists.find({}, function(err, lists) {
    if(callback){
       callback(lists);
    } else {
       res.send(lists);
    }
  });
}; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:24:37.070

我认为问题在于，在您当前的代码中，您将 API 耦合到响应对象。您可以通过以下方式将它们解耦：

**在 router.js**中，不要使用 api.lists 作为回调，而是定义一个函数，该函数将调用 api.lists 并带有一个连接到响应对象的回调。在这种情况下， api.list 不需要知道响应对象，但我们正在创建的函数需要。

```
// In router.js
var api = require('api');
app.get('/lists', function(req, res) {
  api.lists(function(err, lists) {
    if(err) {
      res.send('error page');
      return;
    }
    res.send(lists);
  });
}); 
```

**在 api.js**中，我们删除了对响应对象的引用。现在它将使用适当的数据（错误 + 列表）调用它收到的任何回调。由回调来做任何它喜欢的结果。

```
// In api.js
var db = require('db')
exports.lists = function(callback) {
  db.lists.find({}, function(err, lists) {
    callback(err, lists);
  });
}; 
```

# bash - 参数检查控制逻辑和语法混乱

> ID：15106517
> 
> 赞同：0
> 
> 时间：2013-02-27T07:37:05.837
> 
> 标签：bash

我正在尝试验证用户对我正在编写的一个小脚本的输入，该脚本检查是否应该有：2 个参数，第一个参数应该是“mount”或“unmount”

我有以下内容：

```
if [ ! $# == 2 ] || [ $1 != "mount" -o $1 != "unmount" ]; then 
```

然而，在满足我想要的条件时似乎有点过分。例如与当前 || 运算符，没有任何东西可以通过验证器，但是如果我使用 && 运算符，一切都可以。

```
if [ ! $# == 2 ] && [ $1 != "mount" -o $1 != "unmount" ]; then 
```

有人可以帮我解决这个问题吗？

这是整个块和预期用途

```
if [ ! $# == 2 ] || [ $1 != "mount" -o $1 != "unmount" ]; then
  echo "Usage:"
  echo "encmount.sh mount remotepoint       # mount the remote file system"
  echo "encmount.sh unmount remotepoint   # unmount the remote file system"
  exit
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:10:47.083

你可以这样做：

```
if [ "$#" -ne 2 ] || [ "$1" != "mount" -a "$1" != "unmount" ]; then
    echo "Usage:"
    echo "encmount.sh mount remotepoint       # mount the remote file system"
    echo "encmount.sh unmount remotepoint   # unmount the remote file system"
    exit -1
fi
echo "OK" 
```

您的测试中有一个小的逻辑错误，因为如果`$1`不等于`"mount"`和，您应该进入使用分支`"unmount"`。`-eq`此外，您应该使用and运算符比较数字`-ne`（[请参阅此处](http://tldp.org/LDP/abs/html/comparison-ops.html)），或使用`((` `))`.

请注意，您应该在`test`( `[` `]`)中引用变量

您还可以像这样组合这两个表达式：

```
if [ "$#" -ne 2 -o \( "$1" != "mount" -a "$1" != "unmount" \) ]; then 
```

如果你有 bash，你也可以使用以下`[[` `]]`语法：

```
if [[ $# -ne 2 || ( $1 != "mount" && $1 != "unmount" ) ]]; then 
```

# python - Python，如何将读取语句编码到多行？

> ID：15106520
> 
> 赞同：0
> 
> 时间：2013-02-27T07:37:10.477
> 
> 标签：python, python-2.7

我正在使用 Python 2.7.3，这是我的代码来解析读入“文件”的网站：

```
list = re.findall(r'<span info=".+</span>| \
          Name: .+<br>| \
          <span id="Phone" info="phonenumber">.+</span>| \
          ',file) 
```

我的实际代码超过 4 行，但这应该能说明问题。我正在尝试将其写在单独的行上，以便我更容易阅读/调试，但就目前而言，没有任何内容存储到列表中。

我尝试将前几个表达式移到一行上，效果很好。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:42:32.123

使用多行字符串并使正则表达式变得冗长：

```
mylist = re.findall(r'''(?x)                    # verbose mode
                        <span\ info=".+</span>| # allows you to comment the regex
                        Name:\ .+<br>|          # for even better readability
                        <span\ id="Phone"\ info="phonenumber">.+</span>''', file) 
```

但是，您将不得不转义空格，因为在冗长的正则表达式中会忽略空格。

您的解决方案失败了，因为缩进引入的空格成为正则表达式的一部分（并且由于它不是冗长的正则表达式，因此它是重要的空格）。

# php - 文件未在 codeigniter 中上传

> ID：15106522
> 
> 赞同：2
> 
> 时间：2013-02-27T07:37:19.530
> 
> 标签：php, html, css, codeigniter

这是文件上传的codeigniter函数

```
public function doctor_signup()
{ 
    $this->load->library('encrypt');
    $rand = time() . rand(0, 9999);

    if($_FILES["file"]["name"]!="") 
    {
        $config['upload_path'] = realpath(dirname(__FILE__)). '/uploads/';
        $config['max_size'] = '100';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';
        $config['name']=$rand;
        print_r($config);

        $this->load->library('upload', $config);

        if ( ! $this->upload->do_upload()) 
        {
            echo $error = array('error' => $this->upload->display_errors());
            exit;
        }
    }   

    $data = array(
        'username' => $_POST['username'],
        'password' => $this->encrypt->encode($_POST['password']),
        'name' => $_POST['name'],
        'address' => $_POST['address'],     
        'city' => $_POST['city'],       
        'state' => $_POST['state'],                                                 
        'photo'=> $rand,
        'email' => $_POST['email'],
        'date_of_join'=>date('Y-m-d H:m:s'),
        'landline' => $_POST['landline'],
        'mobile' => $_POST['mobile'],
        'specialist' => $_POST['specialist'],
        'comments' => $_POST['comments'],
        'degree' => $_POST['degree']
    );

    if( $this->db->insert('doctor_user', $data)) 
    {
        $this->load->view('header', $data);
        $this->load->view('user_created', $data);
        $this->load->view('footer', $data);
    }
} 
```

但是文件没有上传到上传目录，也没有给出任何错误。主目录下的上传文件夹。任何建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:46:43.150

我认为这可能是因为 $config['name'] 应该是

```
$config['file_name'] 
```

尝试重命名它，看看它是否有效。此外，您没有使用 $config['allowed_types'] 来指定可以上传哪些文件。否则有什么办法阻止某人上传讨厌的文件？

# javascript - 如何使缩略图幻灯片仅显示缩略图图片

> ID：15106524
> 
> 赞同：1
> 
> 时间：2013-02-27T07:37:26.487
> 
> 标签：javascript, jquery, html

我需要用缩略图滑块制作一些简单的 JavaScript 图库。

我制作了滑块，当我单击向左或向右箭头时，margin-right 更改并添加或删除 570px。但我想让它变得更好，当画廊加载时，取消向右滚动选项，因为实际上有图片，最后一张图片也是如此。

HTML 结构如下所示：

```
<div class="tumbNavigation">
    <div class="right_nav"></div>
    <div class="thumbnails">
        <div class="thumbnailsWrapper">
            <div class="thumbItem"></div>
            <div class="thumbItem"></div>
            <div class="thumbItem"></div>
            <div class="thumbItem"></div>
            <div class="thumbItem"></div>
            <div class="thumbItem"></div>
            <div class="thumbItem"></div>
            <div class="thumbItem"></div>
            <div class="thumbItem"></div>
            <div class="thumbItem"></div>
            <div class="thumbItem"></div>
            <div class="thumbItem"></div>
        </div>
    </div>
    <div class="left_nav"></div>
</div> 
```

JavaScript 代码如下所示：

```
 var pos = 0;
        var width = 570;
  $('.left_nav').click(function(){
        pos = pos - width;
        $('.thumbnailsWrapper').stop(true).animate({ marginRight: pos + "px"}, 500);
    });

  $('.right_nav').click(function(){

        pos = pos + width;
        $('.thumbnailsWrapper').stop(true).animate({ marginRight: pos + "px"}, 500);
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:45:46.943

你在正确的轨道上，但没有必要在这里重新发明轮子。像这样的轮播是最常开发的小部件之一，以至于您一定会找到比您可以快速构建的任何东西更好、更稳定并且具有更多功能的东西。这是 55 个轮播 javascript 插件的列表：[http](http://www.tripwiremagazine.com/2012/12/jquery-carousel.html) ://www.tripwiremagazine.com/2012/12/jquery-carousel.html 。我相信其中一个对你来说会很好用，或者它足够接近你可以修改它以使其完美。

# java - mongo db中的别名

> ID：15106525
> 
> 赞同：0
> 
> 时间：2013-02-27T07:37:27.193
> 
> 标签：java, mongodb

我已经开始摆弄 mongo db 并提出了一个问题。说，我有一个带有 id 字段（例如，名为“ID”）的对象（PO​​JO），我想用 JSON 表示并在 Mongo DB 中存储/加载/加载。据我了解，任何对象总是有 _id 字段（带下划线，小写）。我想做的是：在查询期间，我希望 mongo db 返回我的带有字段 ID 而不是 _id 的 JSON。在 SQL 中，我会使用类似的东西

`SELECT _id as ID ...`

我的问题是是否可以在 mongo db 中执行此操作，如果可以，基于 Java 的示例将不胜感激:)

我知道可以迭代记录并手动将 _id 替换为 ID，但我不想要这个 O(n) 循环。我也不想复制这些行并存储“id”和“_id”所以我正在寻找查询级别的解决方案，或者可能是Java驱动程序。

提前致谢，祝您有美好的一天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:23:11.767

我最终在 Java 驱动程序中使用了以下方法：

```
DBCursor cursor = runSomeQuery();
try {
        while(cursor.hasNext()) {
            DBObject dbObject  = cursor.next();
            ObjectId id = (ObjectId) dbObject.get("_id");
            dbObject.removeField("_id");
            dbObject.put("ID", id.toString());
            System.out.println(dbObject);
        }

    }   finally {
        cursor.close();
    } 
```

我想知道这是最好的解决方案还是我有其他更好的选择马克

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T23:18:31.987

这是我在 Javascript 中所做的一个示例。它可能对您有帮助。在我的例子中，我删除了 _id 字段并为这两个非常嵌套的字段设置别名以显示更简单的名称。

```
db.players.aggregate([
  { $match: { accountId: '12345'}},
  { $project: {
    "_id": 0,
    "id": "$id",
    "masterVersion": "$branches.master.configuration.player.template.version",
    "previewVersion": "$branches.preview.configuration.player.template.version"
    }
  }
]) 
```

我希望你觉得这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:43:28.493

Mongodb 不使用 SQL ，它更像是对象查询语言和集合。

您可以尝试的是，类似于下面使用 Mongo Java 驱动程序的代码

```
Pojo obj = new PojoInstance();
obj.setId(id);
db.yourdb.find(obj); 
```

# java - （数据结构）Java LinkedList 对象到树

> ID：15106531
> 
> 赞同：0
> 
> 时间：2013-02-27T07:37:48.297
> 
> 标签：java, jsp, recursion, tree, linked-list

我有一个像这样的A类：

```
class A {
    Long id;
    String name;
    Long parentId; // refers to another A object's id
} 
```

现在我得到了 A 对象的列表，我想将它们全部放入 PC 中的“文件夹树”之类的数据结构中，然后使用 JSP 在 GUI 上查看该树，但我不知道如何实现这一点。那么您能否帮助解决这两个问题：
1\. 如何从给定的对象列表中构建“文件夹树”？有任何可用的 API 支持吗？
2\. 我们如何在不使用递归的情况下浏览整个数据树并将其作为文件夹树在 JSP 上查看？（我的意思是显示它们的最佳方式是什么）
非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:22:31.630

根据您的评论，我假设您可以将您的`A`课程更改为如下所示：

```
class A {
    Long id;
    String name;
    Long parentId; // refers to another A object's id
    List<A> childrenNodes = new ArrayList();
} 
```

现在，假设您已经`List<A> lstData`填充了所有数据并且想要将其转换为树，您可以使用以下代码/算法：

```
public List<A> convertIntoTree(List<A> lstData) {
    for(A parentA : lstData) {
        //setting the children nodes for parentA
        for(A childA : lstData) {
            if (childA.getParentId() == parentA.getId()) {
                parentA.getChildrenNodes().add(childA);
            }
        }
    }
    //the main tree
    List<A> lstParents = new ArrayList<A>();
    //filling the tree
    for(A parentA : lstData) {
        //change this for your check if parent function or another rule
        if (parentA.getParentId() == 0) {
            lstParents.add(parentA);
        }
    }
    return lstParents;
} 
```

# mysql - 获取其他表中不存在的记录

> ID：15106532
> 
> 赞同：1
> 
> 时间：2013-02-27T07:37:48.763
> 
> 标签：mysql, sql, select

我有两张桌子：

所有国家

```
╔════╦═════════════╗
║ ID ║   COUNTRY   ║
╠════╬═════════════╣
║  1 ║ USA         ║
║  2 ║ China       ║
║  3 ║ India       ║
║  4 ║ France      ║
║  5 ║ UK          ║
║  6 ║ Australia   ║
║  7 ║ Philippines ║
╚════╩═════════════╝ 
```

支持的国家

```
╔════════════╦═══════════╦═══════════╗
║ COUNTRY_ID ║  COUNTRY  ║ FILTER_ID ║
╠════════════╬═══════════╬═══════════╣
║          1 ║ USA       ║         1 ║
║          2 ║ China     ║         1 ║
║          3 ║ India     ║         1 ║
║          4 ║ France    ║         2 ║
║          1 ║ USA       ║         2 ║
║          6 ║ Australia ║         2 ║
╚════════════╩═══════════╩═══════════╝ 
```

询问：

```
SELECT a.* 
FROM all_countries a
LEFT JOIN supported_countries s
  ON a.id = s.country_id
WHERE s.country_id IS NULL; 
```

所以按照上面的例子我应该得到。

```
UK
Philippines 
```

它工作正常，但是如果我过滤国家示例，我选择过滤 = 2。我得到零结果。

```
SELECT a.* 
FROM all_countries a
LEFT JOIN supported_countries s
  ON a.id = s.country_id
WHERE s.filter = 2 AND s.country_id IS NULL; 
```

应该是我想得到这个结果，如果过滤器 = 2。

```
╔════╦═════════════╗
║ ID ║   COUNTRY   ║
╠════╬═════════════╣
║  2 ║ China       ║
║  3 ║ India       ║
║  5 ║ UK          ║
║  7 ║ Philippines ║
╚════╩═════════════╝ 
```

我在做正确的查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:39:21.877

`ON`在子句上添加条件，

```
SELECT  a.* 
FROM    all_countries a
        LEFT JOIN supported_countries s
           ON a.id = s.country_id AND 
              s.filter_ID = 2        -- <<=== HERE
WHERE   s.country_id IS NULL; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1102e/2)

结果：

```
╔════╦═════════════╗
║ ID ║   COUNTRY   ║
╠════╬═════════════╣
║  2 ║ China       ║
║  3 ║ India       ║
║  5 ║ UK          ║
║  7 ║ Philippines ║
╚════╩═════════════╝ 
```

# backbone.js - 主干js中的set和save方法有什么区别？

> ID：15106534
> 
> 赞同：3
> 
> 时间：2013-02-27T07:37:56.033
> 
> 标签：backbone.js, backbone-model

Backbone js模型集和保存方法有什么区别？

```
var book = new Backbone.Model({
           title: "The Rough Riders",
           author: "Theodore Roosevelt"
});

book.save({author: "Teddy"}); 
```

* * *

```
book.set("title", "A Scandal in Bohemia"); 
```

根据官方骨干 js 文档页面，它被描述为通过委托 Backbone.sync 将模型保存到数据库中。这是这些方法之间的唯一区别吗？

谢谢，
斯里尼瓦斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T08:28:01.270

是的，通过使用，`save`您将委托给 Backbone.Sync 并将模型数据保存在数据库或本地存储中，例如，这取决于您使用什么来持久化数据。另一方面，`set`您只需更新模型的属性，触发“更改”事件等等......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T09:31:28.513

```
book.set("title", "A Scandal in Bohemia"); 
```

该代码将从**DOM**更改*book*。 *保存*功能将从**数据库**更改，如果您第一次使用将*创建*的对象，第二次将*更新*。

# forms - 通过 POST 为表单上的每个输入更改发送值是否错误？

> ID：15106535
> 
> 赞同：0
> 
> 时间：2013-02-27T07:37:56.287
> 
> 标签：forms, post

我正在开发一个网上商店，如果客户的输入在结账过程中没有丢失，那就太好了。
我正在制作一个表单，为了确保在刷新后保留数据，我现在在 onchange 事件中通过 post 发送输入值。我将它存储在代表表单的会话对象中。我使用这个对象在页面加载/刷新时填写表单。
这确实会导致大量的后请求，一个用于填充的每个输入，而不是一个用于整个表单。我可以想象这会影响性能。这是我应该担心的事情吗？如果是这样，我如何在没有所有请求的情况下执行相同类型的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:44:17.393

这取决于，如果您期望大量的客户:)

除了在每次更改后发布，您还可以将这些数据存储在客户端的 cookie 中，并在完成提交之前完全忽略发布。或者在每次更改后不发布，而是在执行某些更改后进行一些有意义的超时后发布......

# eclipse - arduino +odroid (linaru ubuntu with eclipse and opencv) + usb camera

> ID：15106537
> 
> 赞同：1
> 
> 时间：2013-02-27T07:38:04.390
> 
> 标签：eclipse, serial-port, arduino, odroid

我希望你能帮助我。我正在尝试构建一个机器人，但我有点卡住了。Arduino Mega 正在控制机器人的步进电机驱动器。odroid-x 是单板机，安装了linaro ubuntu 和eclipse c++。所有的编程都是用 C++ 完成的，OpenCV 是一个图像处理库。

odroid-x 只有一个彩色相机作为输入。因此，来自摄像头的信息被接收并在eclipse中进行处理。然后，根据收到的信息，odroid-x 应该向 arduino 发送不同的整数。arduino 本身应该已经上传了一个程序，因此它将等待一个整数，该整数将确定 arduino 将发送给驱动程序的内容。

我的问题如下：

1.  如何在 arduino 和 odroid-x 之间进行串行通信？
2.  如何通过串行连接将信息从 eclipse 发送到 arduino？

非常感谢你能给我的任何指导

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:14:10.140

首先，要非常、非常、非常小心。ODROID 板使用 1.8V 信号，因此将 3.3V 或 5V Arduino 连接到预计不超过 1.8V 的引脚会烧毁 ODROID-X。如果您在它们之间放置一个电平转换器，则可以将这两个板连接在一起，Sparkfun 和 Adafruit 有一些可用的转换器。甚至还有一个可用的 1.8V 参考电压引脚……连接 LCD 面板 RGB 至 LVDS 转换器板的引脚之一输出恒定的 1.8V。

您可以将白色小连接器的四个引脚或 UART1 用作串行端口，也可以将 50 引脚 GPIO 模块中的一些引脚用作 UART4。Hardkernel 的网站上有电路板原理图。这两个 UART 显示为 /dev/ttySAC0 (UART1) 和 /dev/ttySAC3 (UART4)。

我个人不知道如何通过程序与那些 UART 交谈，但我知道有可用于 python 的串行通信库，可以通过查看 ODROID 论坛上弹出的线程来实现。

# python - 通过 Python。用不同的图表制作标准差和平均线

> ID：15106538
> 
> 赞同：-1
> 
> 时间：2013-02-27T07:38:09.807
> 
> 标签：python, standards, deviation

也许标题看起来有点混乱。

例如，有 sin(x)、3 sine(x) 和 sin(x)+1 三个函数。X 将从 1 到 100。如何为这三个函数值绘制具有标准偏差（+ 和 -）的均值线。我认为也许我应该计算每个 x 处的三个函数值（sin(x)、3 sin(x) 和 sin(x)+1）的均值和标准差。但是，我不确定如何使用 python 来做到这一点。我知道 Scipy 中有一些标准差和平均值的函数。这适用于这种情况吗？也许这是个愚蠢的问题。但是，我很新手。我真的很感激任何帮助。

此致，

艾萨克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:43:18.007

我不完全确定您的意思，但也许以下是一个有用的示例：

```
>>> import numpy as np
>>> x = np.arange(1,100)
>>> m = (sin(x)+1).mean()
>>> s = (sin(x)+1).std()
>>> print m, s
1.00383024876 0.710743876537 
```

*[在进一步澄清后编辑]*

但是，如果您想要各种函数的每个 x 点的平均值，则可以使用以下方法：

```
>>> y = np.array([sin(x), 3*sin(x), sin(x)+1])
>>> m = y.mean(axis=0)
>>> s = y.std(axis=0) 
```

这将为您提供 100 个手段和 100 个标准开发者。

如果你想要组合函数的平均值，你基本上回到第一个例子：

```
>>> m = (sin(x) + 3*sin(x) + sin(x)+1).mean()
>>> s = (sin(x) + 3*sin(x) + sin(x)+1).std()
>>> print m, s
1.01915124381 3.55371938269 
```

哪个选项适用于您取决于您​​的问题的上下文；我对此一无所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:37:59.473

```
import numpy as np

def function_1(X):
    return np.sin(X) 

def function_2(X):
    return 3\. * np.sin(X) 

def function_3(X):
    return np.sin(X + 1.) 

X = np.arange(100)

# mean
print function_1(X).mean()

# std dev
print function_1(X).std()

# to plot
from matplotlib import pyplot as mp
mp.plot(X, function_1(X))
mp.hlines(function_1(X).mean(), 0, 100)
mp.show() 
```

等等...但是您真的需要绘制正弦函数的“平均值”吗？想一想...

# android - Android：滚动ListView后，onItemClick()调用了一个false item

> ID：15106543
> 
> 赞同：0
> 
> 时间：2013-02-27T07:38:23.050
> 
> 标签：android, listview, scroll

这是我的列表视图：

![在此处输入图像描述](../Images/e972d983c9e695e1b3132a7f2bdf6391.png)

在我滚动此列表视图并单击例如“隐藏”后，将调用“收藏夹”操作（以及类似的错误 - 如果我按“压缩”，则会调用其他内容）。

这只发生在滚动之后。如果我不滚动 ListView，则永远不会。

这是我的适配器：

```
package com.landa.adapter;

import java.util.ArrayList;

import com.example.fileexplorermanager.R;
import com.landa.dialog.OperationsDialogFragment;

public class OperationsAdapter extends ArrayAdapter<String> {
  private final Context context;
  private final ArrayList<String> data;

  public OperationsAdapter(Context context, ArrayList<String> values) {
    super(context, R.layout.operations_list_item, values);
    this.context = context;
    this.data = values;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    //View rowView = inflater.inflate(R.layout.operations_list, parent, false);
    View rowView = inflater.inflate(R.layout.operations_list_item, parent, false);

    TextView textView = (TextView) rowView.findViewById(R.id.operation_name);

    String temp = data.get(position);
    String op_name = temp;
    textView.setText(op_name);

    ImageView imageView = (ImageView) rowView.findViewById(R.id.operation_image);

    return rowView;

  }
  public int getCount() {
      return data.size();
  }

} 
```

这是对话框（ListView 在对话框内）：

```
public class OperationsDialogFragment extends DialogFragment {

// operation names
public static final String OP_CUT = "Cut";
public static final String OP_COPY = "Copy";
public static final String OP_RENAME = "Rename";
public static final String OP_DELETE = "Delete";
public static final String OP_SELECT_ALL = "Select all";
public static final String OP_SELECT_INVERSE = "Select inverse";
public static final String OP_CREATE_SHORTCUT = "Create shortcut";
public static final String OP_FAVORITE = "Favorite";
public static final String OP_HIDE = "Hide";
public static final String OP_COMPRESS = "Compress";
public static final String OP_SET_AS_HOME = "Set as home";
public static final String OP_PROPERTIES = "Properties";

ArrayList<String> operationsInfo = new ArrayList<String>();

private OperationsHandler opHandler;
private File f;

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {

    opHandler = OperationsHandler.getInstance();

    final String operation_type = getArguments().getString("operation_type");
    final String file_absolute_path = getArguments().getString("file_absolute_path");

    if(file_absolute_path != null)
        this.f = new File(file_absolute_path);

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

    ArrayList<String> operationsList;
    if (operation_type.equals("single_file")) {
        setSingleFileDialogTitle(builder);
        operationsList = getSingleFileOperationsList();
    } else if (operation_type.equals("multiple_files")) {
        setDefaultDialogTitle(builder);
        operationsList = getMultipleFilesOperationsList();
    } else {
        setDefaultDialogTitle(builder);
        operationsList = getDefaultOperationsList();
    }

    OperationsAdapter adap = new OperationsAdapter(getActivity(),
            operationsList);

    // upon operation click, execute operation
    builder.setAdapter(adap, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {

            String op_name = getOperationName(((AlertDialog) dialog)
                    .getListView().getChildAt(whichButton));
            if (operation_type.equals("single_file")) {
                executeSingleFileOperation(op_name);
            } else {
                executeMultipleFilesOperation(op_name);
            }
        }
    });

    return builder.create();
} 
```

有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:49:07.020

通过获取项目来`onClick`实现项目，而不是. 我认为这就是问题所在。`ListView``position``ListView``Dialog` `OnClick`

# php - 由于限制错误，无法达到 Amazon SES 发送限制

> ID：15106558
> 
> 赞同：3
> 
> 时间：2013-02-27T07:39:15.893
> 
> 标签：php, amazon-ses, throttling

我们使用 SES API 通过 Amazon SES 发送消息。我们的发送速率现在是每秒 90 条消息。但是即使我们没有达到这个限制而只是试图接近它，我们也会遇到[限制异常。](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/ses-errors.html#throttling)

现在我们可以稳定地以每秒 30 条消息的速度发送。问题是如何发送更快。

让我深入了解更多细节并澄清问题。

*   完成单个 API 发送请求可能需要 0.3 到 3 秒。这就是为什么如果我们按顺序发送消息，我们几乎不会获得每秒 1 条消息的速度。
*   幸运的是，我们可以并行发送消息，这就是我们正在做的事情。
*   对于每个线程，我们检查它每秒发送的消息数量是否超过允许的数量。例如，如果我们有 40 个线程，那么我们不允许每个线程每秒发送超过 2 条消息。是的，这不是最优的。
*   我们记录每条消息发送和 API 请求完成的时间（当我们从 API 获得响应时）。这允许获得一些统计数据。
*   当我们将发送限制限制为小于允许的限制（如 60 而不是 90）时，一切正常。
*   当我们尝试以最大限制发送时，我们开始遇到限制错误。就像当达到每秒 80 个请求的速度时，我们开始收到异常。

这让我可以提出以下问题：

# 问：如何以允许的最高速度发送消息？

让我们从另一个问题开始——“SES 如何计算消息数量以检查发送率？”

让我猜猜。当我们提交一个新请求时，他们会查看从当前时刻起最后一秒提交的请求数量，如果这个数量小于我们的限制，那么请求就会被接受。

可是等等。如果我们有 40 个线程并且每个线程每秒不能发送超过 2 条消息，那么我们永远无法达到限制。但我们确实得到了例外。

# 研究

Amazon SES 博客上有一篇关于处理限制的精彩[博文。](http://sesblog.amazon.com/post/TxKR75VKOYDS60/How-to-handle-a-quot-Throttling-Maximum-sending-rate-exceeded-quot-error)我们正在尝试采用这种方法，但尚未成功。

我们在我们的应用程序和 PHP SES SDK 中使用 PHP。

我想这是很常见的任务，但出于某种原因，我并不幸运地找到了完整的解决方案。

* * *

任何帮助或想法将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T04:07:52.473

关键是：

> 多种因素会影响您的发送速率，例如消息大小、网络性能或 Amazon SES 可用性。

根据您所说的，您似乎正在使用一些模糊逻辑来尝试计算您发送的消息数量。这并不完美，因此如果您的 AWS 限制为 90p/s，那么将代码设置得更低，例如 60p/s 是有意义的（这再次取决于您的估计有多准确）。

您应该考虑您提到的其他方法，例如您提供的链接中描述的“指数退避”。

您可以考虑的另一件事是利用队列，例如 SQS。通过这种方式，您可以尽快从列表中选择任务，如果您有点太快，您可以随时退出，然后尽快跳回队列。

# ios - Objective C - 从另一个类调用方法

> ID：15106562
> 
> 赞同：4
> 
> 时间：2013-02-27T07:39:21.487
> 
> 标签：ios, objective-c

我有 2 节课`geoViewController`和`geoMainViewController`

我在被`geoMainViewController`调用中有一个方法`getFoo`

它看起来像这样：

```
- (NSString *)getFoo
{

NSString* foo = @"This is foo";

return foo;

} 
```

我正试图`getFoo`从`geoViewController`课堂上打电话。

我`#import "geoMainViewController.h"`在我的`geoViewController`m 文件中。

我正在尝试实例化该类并从我的类中的 viewDidLoad`geoMainViewController`调用该方法，如下所示：`getFoo``geoViewController`

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    geoMainViewController* mainVC = [[geoMainViewController alloc] init];

    NSString* myFoo = [mainVC getFoo];    

} 
```

似乎可以`geoMainViewController`很好地实例化该类，但我遇到了错误`NSString* myFoo = [mainVC getFoo];`

错误是 - 'geoMainViewController' 没有可见的@interface 声明选择器'getFoo'

我确定我错过了一步，因为我对 Objective C 很陌生。我只是不确定我做错了什么。

对此的任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T07:41:15.670

在你的`geoMainViewController.h`你应该声明选择器是可见的：

```
-(NSString *)getFoo; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:43:34.100

你放进`- (NSString *)getFoo`去了`geoMainViewController.h`吗？您必须通过 .h 文件使这些方法在对象外部可见，以便其他对象知道它们响应哪些选择器。自动完成是否每次都填写了消息？

```
#import <Foundation/Foundation.h>

@interface 
{

}

@property (nonatomic,strong) ;
@property (nonatomic,strong) ;
@property (nonatomic, strong) ;

- (NSString *)getFoo
@end 
```

编辑：（顺便说一句，您也可以将 Foo 设为属性）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T07:44:24.327

你在头文件中声明了吗？

头文件包含 .h 文件中的所有函数声明，您只在类中包含 .h 文件。所以它取决于 .h 文件。.h 文件将具有 .m 文件的所有功能。

希望它可以帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T07:45:16.790

您误解了如何使用视图控制器。虽然您可以在技术上创建视图控制器的实例以调用其方法之一，但您不应该这样做。通常的方法是视图控制器是视图层次结构的一部分，当您有权访问该实例时，您可以在其上调用方法。你在这里缺少一些基本的东西。

我怀疑你的实际错误是一个missinh方法声明，但你首先要解决更大的问题。

# c# - 行为类似于 iphone 主屏幕的 WPF 面板

> ID：15106566
> 
> 赞同：1
> 
> 时间：2013-02-27T07:39:24.130
> 
> 标签：c#, wpf

在开始编码之前，只是想知道那里是否有某个地方。我正在寻找一个行为类似于 iphone 主屏幕的 WPF 面板（我需要以下功能）

*   通过拖放重新排序项目
*   将 1 个项目拖动到另一个项目将它们都加入一个文件夹
*   单击文件夹会打开一个包含所有项目的弹出窗口
*   将项目拖动到文件夹中会将其移动到文件夹中
*   与iphone中类似的动画会很好

在此先感谢，本尼

# java - 从何处获取有关 JavaFX 2 和 8 之间 API 更改的信息？

> ID：15106574
> 
> 赞同：3
> 
> 时间：2013-02-27T07:39:36.010
> 
> 标签：java, javafx-2

我在哪里可以找到有关 JavaFX 2.x 和 JavaFX 8 之间 API 更改的信息？当我尝试让我的项目在 JDK 8 预览版上运行时，我发现有些东西坏了——即使其中一些可能是因为预览版的不成熟，我也想知道 API 和两个版本之间的 CSS 更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T09:19:22.190

一旦 JDK8 发布，很可能会发布“JavaFX 兼容性指南”，类似于[JDK one](http://www.oracle.com/technetwork/java/javase/compatibility-417013.html)。

但无论如何，JavaFX 8 预计将向后兼容 JavaFX 2。如果您遇到任何问题，请将它们提交到[http://javafx-jira.kenai.com](http://javafx-jira.kenai.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:07:45.717

*   所有重要的（新闻、路线图、发布候选人）都在[FX Experience上](http://fxexperience.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T09:34:48.280

除了浏览 jira 并检查 Lombard (= JavaFX 8) 的目标功能以及 FX Experience 之外，您还可以[在 wiki](https://wikis.oracle.com/display/OpenJDK/OpenJFX)上找到有关新功能的一些信息，例如：

*   3D 功能
*   富文本 API
*   树表视图

# android - 在操作栏中刷新状态 Sherlock

> ID：15106577
> 
> 赞同：0
> 
> 时间：2013-02-27T07:39:52.183
> 
> 标签：android, android-actionbar, actionbarsherlock

我想在 actionbarsherlock 中旋转刷新。以前我正在使用 actionbar 并且正在执行 setRefreshActionItemState。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:45:04.960

对于刷新状态，您可以尝试此链接以获取答案[Refresh menu item animation in ActionBarSherlock](https://stackoverflow.com/questions/13539359/refresh-menu-item-animation-in-actionbarsherlock) ..

```
case R.id.refreshMenuItem:
    isRefreshing = true;
    item.setActionView(R.layout.action_bar_indeterminate_progress);
    ImageView iv = (ImageView) item.getActionView().findViewById(R.id.loadingImageView);
    ((AnimationDrawable) iv.getDrawable()).start(); 
```

# nginx - 必须手动加载 PHP ActiveRecord 模型

> ID：15106580
> 
> 赞同：1
> 
> 时间：2013-02-27T07:40:00.117
> 
> 标签：nginx, php, phpactiverecord

我在画一个空白。我有在本地工作的代码（即 MAMP）。当移动到 nginx ubuntu 机器（运行 php-fpm）时，由于某种原因，phpactiverecord 正在运行。

我终于把它追溯到这个 - 我所有的模型类，我必须手动加载。如果我在我的代码下面添加一个 require_once() ，那么它工作正常。如果我不这样做，那么我会收到如下错误：

PHP 致命错误：在我创建的模型上找不到类...

有谁知道我可以在哪个方向解决这个问题？我检查了对模型文件夹（不在公共根目录中）的权限，回显了发送到 cfg->set_model_directory 的路径是否正确，等等。

这听起来像一个 nginx 或 php 的东西？我猜是 nginx，因为这适用于我的 MAMP？

不起作用：

```
ActiveRecord\Config::初始化（
    功能（$cfg）{
        $cfg->set_model_directory(BASE_PATH . '/models');
        $cfg->set_connections(
            大批（
                '发展' => 'mysql://blah:removed@localhost/com_dbname'
            )
        );
    }
);

```

作品：

```
ActiveRecord\Config::初始化（
    功能（$cfg）{
        $cfg->set_model_directory(BASE_PATH . '/models');
        $cfg->set_connections(
            大批（
                '发展' => 'mysql://blah:removed@localhost/com_dbname'
            )
        );
    }
);

require_once(BASE_PATH . '/models/model1.php');
require_once(BASE_PATH . '/models/model2.php');

```

**更新**

添加实际代码以帮助识别问题：

```
require_once ('../lib/php-activerecord/ActiveRecord.php');

ActiveRecord\Config::初始化（
    功能（$cfg）{
        $cfg->set_model_directory('/var/www/uc1/models');
        $cfg->set_connections(
            大批（
                '发展' => 'mysql://test_usr:test_pwd@localhost/test_db'
            )
        );
    }
);
require_once ('/var/www/uc1/models/ucurls.php'); //模型文件的名称。必须手动包含才能使其在我的 nginx 服务器上工作。
$_record = UCUrls::find_by_urlkey('example.com/123');
回声“urlkey=”。$_record->urlkey;

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-09T20:22:09.123

我在 Windows 中解决了这个问题，在文件**ActiveRecord.php**中添加了一行，

`activerecord_autoload($class_name)` 在第39 或 40 行的函数中

```
 $file = "$root/$class_name.php";
    //add this line
   $file = strtolower($file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T20:49:33.287

在 ActiveRecord.php 中设置跟踪也可以查看 ActiveRecord 在哪里搜索模型。但是我认为您的问题出在文件系统中-Mac OS X 默认使用不区分大小写的文件系统，而 Ubuntu 的区分大小写的文件系统。

所以你的模型 UCUrls 应该在文件 /var/www/uc1/models/UCUrls.php 中，而不是 /var/www/uc1/models/ucurls.php

# jquery - Keith Wood JQuery SVG：clone() 后跟 change() 不起作用

> ID：15106583
> 
> 赞同：2
> 
> 时间：2013-02-27T07:40:03.667
> 
> 标签：jquery, svg, settings, clone, jquery-svg

在[这个 JSFiddle](http://jsfiddle.net/fpnq6/2/)中，（下面的代码），我只是试图克隆一个路径并更改它的设置。但是，当我运行代码时，它给出了 rect2 没有`setAttribute()`定义方法的错误。

但是，相反，当我`change()`在 rect1 上运行该方法时，它不会产生错误，就像在[这个 JSFiddle](http://jsfiddle.net/5Dyc7/2/)中一样。所以我怀疑这是克隆方法的问题，因为它不会产生完整的克隆。

我究竟做错了什么？如果扩展有问题，有什么好的解决方法？谢谢

```
$('body').svg({onLoad: function(svg){
    var path = svg.createPath();
    var rect1 = svg.path(
        path.move( 50, 50 )
        .line( 200, 0, true )
        .line( 0, 200, true )
        .line( -200, 0, true )
        .close(),
        {
            fill: 'none', 
            stroke: '#00f', 
            strokeWidth: 30
        }
    );
    var rect2 = svg.clone(null, rect1);
    svg.change(rect2, {
            fill: 'none', 
            stroke: '#f00', 
            strokeWidth: 10
    });
}}); 
```

到目前为止我的努力：

*   如果我在克隆之前执行 alert(rect1)，它会显示“[object SVGPathElement]”。
*   如果我在克隆后执行 alert(rect2) ，它还会显示“[object SVGPathElement].
*   如果我做 alert(rect1.setAttribute) 它说“function setAttribute() {[native code]}”
*   如果我做 alert(rect2.setAttribute) 它说“未定义”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:45:51.357

我不确定您到底要做什么，但我遇到了类似的问题，我无法操作克隆的 SVG 对象的属性。

我的解决方案是使用我的初始对象作为我的工作区并对其进行修改。然后我会克隆初始对象（并根据需要定位/移动克隆），然后返回到我的初始对象并在再次克隆之前再次调整它......冲洗并重复......

它既笨拙又笨拙，甚至可能不符合您的要求，但这是我解决克隆问题的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:53:45.247

clone 函数返回一个克隆节点的数组。所以我改变了

```
var rect2 = svg.clone(null, rect1); 
```

到

```
var rect2 = svg.clone(null, rect1)[0]; 
```

我不明白为什么返回的数组似乎是 SVGPathElement 类型！我在 jquery.svg.js 源代码中看不到任何类型的转换。

# python - 多字字符串的子字符串搜索 - Python

> ID：15106584
> 
> 赞同：1
> 
> 时间：2013-02-27T07:40:05.787
> 
> 标签：python, string, nlp, mwe

我想检查一组句子，看看句子中是否出现了一些种子词。但我想避免使用`for seed in line`，因为那样会说种子词`ring`会出现在带有这个词的文档中`bring`。

我还想检查`word with spaces`文档中是否出现多字表达式（MWE）。

我已经尝试过了，但这太慢了，有没有更快的方法呢？

```
seed = ['words with spaces', 'words', 'foo', 'bar', 
        'bar bar', 'foo foo foo bar', 'ring']

 docs = ['these are words with spaces but the drinks are the bar is also good', 
    'another sentence at the foo bar is here', 
    'then a bar bar black sheep, 
    'but i dont want this sentence because there is just nothing that matches my list',
    'i forgot to bring my telephone but this sentence shouldn't be in the seeded docs too']

docs_seed = []
for d in docs:
  toAdd = False
  for s in seeds:
    if " " in s:
      if s in d:
        toAdd = True
    if s in d.split(" "):
      toAdd = True
    if toAdd == True:
      docs_seed.append((s,d))
      break
print docs_seed 
```

所需的输出应该是这样的：

```
[('words with spaces','these are words with spaces but the drinks are the bar is also good')
('foo','another sentence at the foo bar is here'), 
('bar', 'then a bar bar black sheep')] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:10:16.687

考虑使用正则表达式：

```
import re

pattern = re.compile(r'\b(?:' + '|'.join(re.escape(s) for s in seed) + r')\b')
pattern.findall(line) 
```

`\b`匹配“单词”（单词字符序列）的*开头*或*结尾*。

例子：

```
>>> for line in docs:
...     print pattern.findall(line)
... 
['words with spaces', 'bar']
['foo', 'bar']
['bar', 'bar']
[]
[] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:07:25.250

这应该工作并且比您当前的方法更快：

```
docs_seed = []
for d in docs:
    for s in seed:
        pos = d.find(s)
        if not pos == -1 and (d[pos - 1] == " " 
               and (d[pos + len(s)] == " " or pos + len(s) == len(d))):
            docs_seed.append((s, d))
            break 
```

`find`给我们`seed`值在 doc 中的位置（如果未找到则为 -1），然后我们检查值之前和之后的字符是否为空格（或字符串在子字符串之后结束）。这也修复了您的原始代码中的错误，即多字表达式不需要在单词边界上开始或结束 - 您的原始代码将匹配`"words with spaces"`输入，例如`"swords with spaces"`.

# wpf - 列表框的 SelectionChanged 和 MouseLeftButtonDown 事件的排序

> ID：15106592
> 
> 赞同：1
> 
> 时间：2013-02-27T07:40:31.620
> 
> 标签：wpf, listbox, mouseevent, selectionchanged

我已经处理了 WPF 列表框上的 SelectionChanged 和 MouseLeftButtonDown 事件。我需要确保在 MouseLeftButtonDown 事件之前触发 SelectionChanged 事件。

尽管事件确实以所需的顺序发生，但有什么方法可以强制执行吗？

谢谢

# ios - 把我的标签和按钮放在前面

> ID：15106597
> 
> 赞同：0
> 
> 时间：2013-02-27T07:40:43.000
> 
> 标签：ios, ipad, ios4, subview

我的主视图中有一个 TableView。此表视图在主视图中隐藏了一些标签和按钮。从 TableView 表中选择一行后，`removeFromSuperView`必须和按钮必须可见。

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
          UITableViewCell *selectedCell = [tableView cellForRowAtIndexPath:indexPath];
          txtsearch.text = selectedCell.textLabel.text;
           [viewForautoCompleteTableView removeFromSuperview];
            [self.view sendSubviewToBack:autocompleteTableView];
           } 
```

我的标签仍然不可见，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:47:09.580

最好隐藏和显示视图，而不是删除和添加视图以达到您想要的效果。

确保所有视图都已正确添加到 self.view。要隐藏它们，请使用：

```
viewForautoCompleteTableView.hidden = YES;
autocompleteTableView.hidden = YES; 
```

要使它们显示，您可以使用：

```
viewForautoCompleteTableView.hidden = NO;
autocompleteTableView.hidden = NO; 
```

# android - 是否所有片段都是在 FragmentActivity 的 onCreate() 上创建的？

> ID：15106601
> 
> 赞同：1
> 
> 时间：2013-02-27T07:40:49.333
> 
> 标签：android, android-fragments

我有一个有 2 个选项卡的`FragmentActivity`类，其中这 2 个选项卡的内容是从 2 个不同的 Fragment 类创建的。我发现当`FragmentActivity` `onCreate()`被调用时，它正在创建我的两个选项卡。当我单击/切换到第二个选项卡时，是否可以创建第二个选项卡？我正在使用一个`FragmentPagerAdapter`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:21:56.583

如果您是动态添加它们，那么它们将在添加时创建。如果将它们添加到 xml 中，则 FragmentActivity 生命周期将链接到其片段的生命周期。它们将根据父片段活动的生命周期创建。但是，您可以选择使它们可见或不可见。

Fragment 和 FragmentActivity 回调关系：

![Fragment 和 FragmentActivity 回调关系](../Images/056855d484d03d5d19f04415d28714b9.png)

有关详细信息，请参阅[官方文档。](http://developer.android.com/guide/components/fragments.html)

# android - Android AudioTrack Mixing 的示例代码

> ID：15106603
> 
> 赞同：6
> 
> 时间：2013-02-27T07:40:56.970
> 
> 标签：android, audiotrack

我在资源文件夹中有两个 PCM 声音文件。我使用了输入流并将它们转换为字节数组。

然后我通过归一化和添加music1和music2来处理它们并输出到字节数组输出。最后，放置输出数组并将其提供给 AudioTrack。

显然，我什么也没听到，而且有什么地方不对劲。

```
 private void mixSound() throws IOException {

    InputStream in1=getResources().openRawResource(R.raw.cheerapp2);      
    InputStream in2=getResources().openRawResource(R.raw.buzzer2);

     byte[] music1 = null;
     music1= new byte[in1.available()]; 
     music1=convertStreamToByteArray(in1);
     in1.close();

     byte[] music2 = null;
     music2= new byte[in2.available()]; 
     music2=convertStreamToByteArray(in2);
     in2.close();

     byte[] output = new byte[music1.length];

     audioTrack.play();

     for(int i=0; i < output.length; i++){

         float samplef1 = music1[i] / 128.0f;      //     2^7=128
         float samplef2 = music2[i] / 128.0f;

         float mixed = samplef1 + samplef2;
         // reduce the volume a bit:
         mixed *= 0.8;
         // hard clipping
         if (mixed > 1.0f) mixed = 1.0f;
         if (mixed < -1.0f) mixed = -1.0f;
        byte outputSample = (byte)(mixed * 128.0f);
         output[i] = outputSample;
         audioTrack.write(output, 0, i);
      }   //for loop

      public static byte[] convertStreamToByteArray(InputStream is) throws IOException {

    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    byte[] buff = new byte[10240];
    int i = Integer.MAX_VALUE;
    while ((i = is.read(buff, 0, buff.length)) > 0) {
        baos.write(buff, 0, i);
    }

    return baos.toByteArray(); // be sure to close InputStream in calling function

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-27T21:53:59.020

我尝试了您的代码（替换为我自己的一些音频文件）。我像这样初始化了一个 AudioTrack 实例，希望这与您的操作方式相似：

```
AudioTrack audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, 44100, AudioFormat.CHANNEL_OUT_STEREO, AudioFormat.ENCODING_PCM_16BIT, 44100, AudioTrack.MODE_STREAM); 
```

并尝试运行它。它发出尖锐的声音，随着时间的推移声音越来越小。我检查了代码，问题是您在 mixSound() 方法的每次循环迭代中都将整个输出字节数组写入 audioTrack。

线

```
 audioTrack.write(output, 0, i); 
```

需要移出循环并更改为

```
 audioTrack.write(output, 0, output.length); 
```

因此，您将两个文件混合到输出字节数组中，然后一次写入整个内容。

因此，工作 mixSound 方法的代码如下所示：

```
private void mixSound() throws IOException {
    AudioTrack audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, 44100, AudioFormat.CHANNEL_OUT_STEREO, AudioFormat.ENCODING_PCM_16BIT, 44100, AudioTrack.MODE_STREAM);

    InputStream in1=getResources().openRawResource(R.raw.track1);      
    InputStream in2=getResources().openRawResource(R.raw.track2);

    byte[] music1 = null;
    music1= new byte[in1.available()]; 
    music1=convertStreamToByteArray(in1);
    in1.close();

    byte[] music2 = null;
    music2= new byte[in2.available()]; 
    music2=convertStreamToByteArray(in2);
    in2.close();

    byte[] output = new byte[music1.length];

    audioTrack.play();

    for(int i=0; i < output.length; i++){

        float samplef1 = music1[i] / 128.0f;      //     2^7=128
        float samplef2 = music2[i] / 128.0f;

        float mixed = samplef1 + samplef2;
        // reduce the volume a bit:
        mixed *= 0.8;
        // hard clipping
        if (mixed > 1.0f) mixed = 1.0f;

        if (mixed < -1.0f) mixed = -1.0f;

        byte outputSample = (byte)(mixed * 128.0f);
        output[i] = outputSample;

    }   //for loop
    audioTrack.write(output, 0, output.length);

} 
```

# c# - 使用 Regex 捕获 Xpath 条件

> ID：15106605
> 
> 赞同：0
> 
> 时间：2013-02-27T07:41:10.040
> 
> 标签：c#, regex, xpath

我想在 Xpath 表达式中捕获条件。例如在如下表达式中：

```
loan:_applicant/base:_entity/person:_phones/base:SmartRefOfPhoneeJDvviUx[base:_entity/contact:_category/base:_underlyingValue='Personal' and base:_entity/contact:_isMobile/base:_underlyingValue!='true']/base:_entity 
```

我想抓住：

```
base:_entity/contact:_category/base:_underlyingValue='Personal' 
```

和

```
base:_entity/contact:_isMobile/base:_underlyingValue!='true' 
```

运算符**和**示例中的 Xpath 可以是**或**

是否可以使用正则表达式获取条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:30:27.100

Xpath 谓词用方括号括起来，所以

```
string regex=@"\[.*\]";
string predicate=Regex.Match(input, regex).Value;//assuming there is a match
regex=@"\s(and|or)\s";
string[] conditions=Regex.Split(predicate, regex); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:32:07.723

XPath 2.0 具有用于正则表达式匹配的函数，例如matches()、replace() 和tokenize()。这些在 XPath 1.0 中不可用。

# php - 实现电子邮件发送的最佳方式是什么？

> ID：15106607
> 
> 赞同：1
> 
> 时间：2013-02-27T07:41:14.030
> 
> 标签：php, web-applications, architecture, swiftmailer

我有网络应用程序，我想实现电子邮件系统。我的 Web 应用程序是一个社交网络：当用户更新状态并且任何其他用户对其状态发表评论时，用户都会收到电子邮件。

实现它的最佳方法是什么？在用户发表评论后，我一直在实施电子邮件系统，然后我同时向他们的用户发送电子邮件。使用计划发送电子邮件的第二个选项。

我正在使用 PHP 和 SwiftMailer。

澄清一下：我应该直接向用户发送电子邮件，还是应该使用数据库来排队邮件并通过 cron 发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:52:04.223

我的建议是使用带有 API 的邮件服务，例如[Sendgrid](http://sendgrid.com/)来处理大量邮件（每天超过 100 封邮件），否则只需使用您选择的 php 邮件程序。

通过您自己的服务器发送邮件有几个缺点，主要与被列入黑名单或标记为垃圾邮件有关。这是因为其他邮件服务器并不真正了解您的邮件，如果突然出现大量邮件，您看起来就像一个垃圾邮件机器人。

为了避免一次发送大量邮件，您还必须以某种方式通过批处理发送发送，为此您需要 cron 作业等。不被列入黑名单也不是很容易，简单的域名更改可能会让您重新识别

邮寄服务确实为您解决了大部分这些问题，而且总体而言相当便宜。对于单个项目而言，了解内部邮件解决方案的缺陷通常太多了，因为它是一个相当大的话题。

免责声明：我不为任何邮件发送服务工作，我只是碰巧在一个最近因为糟糕的电子邮件发送习惯而将他们的域列入黑名单的地方工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:59:13.577

请尝试 phpmailer 库函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:02:43.853

你也可以试试 PostageApp。

[http://postageapp.com/](http://postageapp.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T08:18:40.183

您可以使用内置的 php 函数。请访问以下链接。 [http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

# ruby-on-rails - 如何自定义 Devise_invitable 生成的表单？

> ID：15106611
> 
> 赞同：3
> 
> 时间：2013-02-27T07:41:32.583
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, devise, devise-invitable

表单路径是`user/invitations/invitations/edit.html.erb`和`new.html.erb`

编辑.html.erb

```
 <h2><%= t 'devise.invitations.edit.header' %></h2>
    <%= form_for resource, :as => resource_name, :url => invitation_path(resource_name),  :html => { :method => :put } do |f| %>
    <%= devise_error_messages! %>
    <%= f.hidden_field :invitation_token %>

    <p><%= f.label :username %><br />
    <%= f.text_field :username %></p>

    <p><%= f.label :password %><br />
    <%= f.password_field :password %></p>

    <p><%= f.label :password_confirmation %><br />
    <%= f.password_field :password_confirmation %></p>

    <p><%= f.submit t("devise.invitations.edit.submit_button") %></p>
    <% end %> 
```

我自己添加了以下内容，`edit.html.erb`但表单未显示字段

```
 <p><%= f.label :username %><br />
    <%= f.text_field :username %></p> 
```

请让我知道如何处理这个问题。并为 devise_invitable 定制表单

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:47:58.740

我通过以下命令再次生成视图：

```
 rails generate devise_invitable:views users 
```

然后发现嵌套done users/invitations/invitaions/edit.html.erb是错误的。

它应该像views/users/invitations/edit.html.erb

这解决了我的问题，现在我可以自定义 devise_invitable 表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:53:10.423

您的替换表格应该放在这里

```
app/views/devise/invitations/edit.html.erb 
```

# performance - 是否有一种技术可以预测应用程序的性能影响

> ID：15106612
> 
> 赞同：0
> 
> 时间：2013-02-27T07:41:36.730
> 
> 标签：performance

客户在相当大的负载下运行集群 Web 应用程序服务器。他想知道即将推出的尚未实施的应用程序是否仍可通过他当前的设置进行管理。是否有一种既定的方法可以基于现有的需求规范（或者可能是功能设计规范）来预测概念状态下应用程序的性能影响。首要任务是预测对 CPU 资源的影响。

有可能得到相当准确的结果吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:35:53.400

我会说规范的答案是否定的。您*始终*必须对部署在其目标架构上的实际应用程序进行基准测试。

为什么？软件和软件开发是不可预测的。而且系统更加不可预测。

即使您现在知道需求并进行了深入分析，如果出现以下情况会发生什么：

*   该程序有一个**性能错误**（或两个......） - 这甚至可能是第三方库中的错误
*   添加新要求或**更改要求**
*   分析和设计没有发现组件之间所有**隐藏的相互关系**
*   添加负载会产生**非线性影响**，并且新负载可能会使硬件超过临界阈值（这个阈值现在并不明显）。

这些担忧不是理论上的。如果是这样，软件开发将是微不足道的，项目将始终按时交付并符合预算。

但是，您可以应用一些我个人使用的启发式方法。首先，您需要对当前系统有一个非常好的了解：

*   将现有系统的功能分解为小型、中型和大型，并在您的硬件上进行基准测试
*   对这些单独的函数执行负载测试，并尽可能多地捕获事务/秒、CPU 成本、网络流量和磁盘 I/O 数据的吞吐量，确保您有小型、中型和大型的表示。此负载测试应使系统达到额外负载将减少事务/秒的程度
*   获取当前系统的最大事务数/秒的数据
*   了解此应用程序的增长率并做出相应的计划

执行分析以获得 CPU、RAM、磁盘和网络方面的“平均”小型、中型和大型“成本”。这将是以下形式：

*   小额交易
    *   CPU利用率：10ms
    *   RAM 开销 5MB（缓存）
    *   RAM 工作：100kb（例如 10 个并发线程 = 1MB，100 个线程 = 10MB）
    *   磁盘 I/O：5kb（数据库）
    *   网络应用<->数据库：10kb
    *   网络应用<->浏览器：40kb

从这个分析中，您应该了解您有多少余量——当然是 CPU，但请检查是否有足够的 RAM、网络和磁盘容量。例如，小事务所需的 CPU 是每秒小事务的数量乘以小事务的 CPU 成本。加上中型交易和大型交易的 CPU 成本，您就有了 CPU 预算。

确保 DBA 参与其中。他们需要在数据库上做同样的事情。

现在您需要分析即将到来的应用程序：

*   将每个特征分配到相同的小、中、大桶中，尽可能确保同类匹配
*   询问有关每个功能在高峰期将经历多少事务/秒的深入探究性问题
*   谈谈应用程序的预期增长率
*   不要忘记系统可能会随着数据库大小的增加而变慢

就个人而言，您被要求预测不可预测的事情 - 将您的名字和声誉置于危险之中。如果您说它适合，**那么您**将承担大型软件开发项目的风险。如果您被迫说是，您需要确保与您的姓名一起涉及许多其他人的姓名 - 并且这些姓名都应该在“去/不去”决定中可见。这不仅更有可能确保考虑到所有因素，并且分析是合理的，而且还将确保该项目有许多参与其中的个人与其成功保持一致。

# android - 获取没有响应代码的 Android HttpResponse 消息

> ID：15106613
> 
> 赞同：0
> 
> 时间：2013-02-27T07:41:48.633
> 
> 标签：android

我收到这样的回复：

```
HttpResponse response = httpclient.execute(httpget);
response.getStatusLine().toString()); 
```

在这种情况下，响应是：

```
HTTP/1.1 500 invalid user credentials 
```

何我只收到消息，没有代码？

```
**invalid user credentials** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:09:47.507

尝试这个：

```
HttpResponse response = httpclient.execute(httpget);
StatusLine statusLine = response.getStatusLine();

String messageOnly = statusLine.getReasonPhrase();
int codeOnly = statusLine.getStatusCode(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:52:52.033

很简单，这样做

```
String responseStr = EntityUtils.toString(response.getEntity()); 
```

这会奏效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T09:44:00.143

使用 StatusLine 接口的 getReasonPhrase() 方法。例如

```
HttpResponse response = httpclient.execute(httpget);
StatusLine statusLine = response.getStatusLine();
 statusLine.getReasonPhrase() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T07:54:08.050

你可以简单地得到这样的消息

```
 String message = response.getStatusLine().toString().substring(12); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T07:56:00.520

使用看[这个](http://developer.android.com/reference/java/net/HttpURLConnection.html#getResponseMessage%28%29)`HttpURLConnection`_`getResponseMessage()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T08:15:15.017

尝试这个 ：

```
HttpResponse response = client.execute(httpGet);
HttpEntity entity = response.getEntity();
InputStream content = entity.getContent(); 
```

然后把这个输入流转换成字符串......

# android - android拖放列表项

> ID：15106614
> 
> 赞同：0
> 
> 时间：2013-02-27T07:41:48.800
> 
> 标签：android, drag-and-drop, android-listview, android-arrayadapter

我是Android开发的初学者。我想拖放我的列表（我正在使用`ArrayAdapter`s。值存储在`Sqlite DataBase`）。我看到的示例是针对`ListView`事物中的字符串的。但我有清单项目。

按照[https://github.com/terlici/DragNDropList](https://github.com/terlici/DragNDropList)进行拖放。但不知道如何处理我的列表和处理数据库（拖放后如何保存以及如何获取项目名称和 ID）。

我试着为我的清单做，但我的项目崩溃了！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T15:10:00.457

要将数据保存到数据库中，您需要使用[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)创建表，并使用[SQLiteDatabase](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)向表中插入记录。

之后，您可以使用这两个对象获取数据。

# entity-framework - 使用实体框架，如何选择一列的数据长度加上其他列数据

> ID：15106616
> 
> 赞同：1
> 
> 时间：2013-02-27T07:41:58.043
> 
> 标签：entity-framework, select, datalength

如果我有一个包含 A 列和 B 列的 SQL 表 X，并且我想选择 B 的 DATALENGTH 以及 A 列，如何在单个表达式中执行此操作？例如：

```
var results = dc.X.Select(x => SqlFunctions.DataLength(x.B)) 
```

将返回包含等于 B 长度的单列的结果。如果我想将 A 包含在同一结果集中，该语句会是什么样子？我试过这个，但它显然不会编译：

```
var results = dc.X.Select(x => new { SqlFunctions.DataLength(x.B), x.A }); 
```

出现错误：

错误 CS0746：无效的匿名类型成员声明符。必须使用成员分配、简单名称或成员访问来声明匿名类型成员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:09:27.107

尝试显式指定匿名类型的成员名称：

```
var results = dc.X.Select(x => 
    new { Length = SqlFunctions.DataLength(x.B), A = x.A }); 
```

# ruby-on-rails - ruby on rails 中的下拉列表表单验证警报

> ID：15106619
> 
> 赞同：2
> 
> 时间：2013-02-27T07:42:19.453
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我在一个表单中有下拉列表和两个单选按钮。这是代码。我不知道如何在控制器中设置验证。当不从下拉列表和单选按钮之一中选择值时，我必须显示警告消息'请从下拉列表中选择值并选中一个单选按钮已提交。提交表单时如何在 ruby​​ on rails 中进行操作。

```
<%= form_tag :action => 'show' do %>
    <strong>Select device: </strong> <%= collection_select(:device, :id, @devices, :id, :name, options ={:prompt => "-Select a device"}) %>
    <br></br>
    <strong>Chose: </strong><%=  radio_button_tag :name,:time, false, :onclick => "this.parentNode.submit();"%>Time
    <%=  radio_button_tag :name,:graph%>Graph
    <% end %> 
```

在 device.rb 我设置以下但不显示任何消息。

```
 class Device < ActiveRecord::Base
   attr_accessible :name
   validates_presence_of :name
   has_many :properties

   def validate
     if name == 'None'
       errors.add_to_base("You must select a device name")
     end
   end
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:48:17.167

为什么不使用 validates_exclusion_of ？（或 Rails 3 中的等价物）

[http://apidock.com/rails/v2.3.8/ActiveModel/Validations/ClassMethods/validates_exclusion_of](http://apidock.com/rails/v2.3.8/ActiveModel/Validations/ClassMethods/validates_exclusion_of)

# jquery - 使用 HTML 和 jQuery 的水印文本框

> ID：15106621
> 
> 赞同：0
> 
> 时间：2013-02-27T07:42:35.303
> 
> 标签：jquery, html, watermark

我想使用 HTML 和 jQuery 制作一个水印文本框，但问题是当我转到另一个页面并再次返回水印文本框页面时，水印文本以普通文本显示。

下面是我的 jQuery 代码：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js">
</script>
<script type="text/javascript">

    (function ($) {
        $.fn.extend({
            inputWatermark: function () {
                return this.each(function () {
                    // retrieve the value of the ‘placeholder’ attribute
                    var watermarkText = $(this).attr('placeholder');
                    var $this = $(this);
                    if ($this.val() === '') {
                        $this.val(watermarkText);
                        // give the watermark a translucent look
                        $this.css({ 'opacity': '0.65' });
                    }

                    $this.blur(function () {
                        if ($this.val() === '') {
                            // If the text is empty put the watermark
                            // back

                            $this.val(watermarkText);
                            // give the watermark a translucent look
                            $this.css({ 'opacity': '0.65' });
                        }
                    });

                    $this.focus(function () {
                        if ($this.val() === watermarkText) {
                            $this.val('');
                            $this.css({ 'opacity': '1.0' });
                        }
                    });
                });
            }
        });

    })(jQuery);
</script> 
```

这是我的 HTML 代码：

```
<body>
<input id="input1" placeholder="Placeholder here..." />
<input id="input2" placeholder="2nd Placeholder" />
<a href="../../back.htm">google</a>
<script type="text/javascript">

    $(document).ready(function () {
        $(':input').inputWatermark();
    });

</script></body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:52:57.943

尝试改变：

```
if ($this.val() === '') { 
```

至

```
var txtVal = $.trim( $this.val() );
if ( txtVal === '') { 
```

添加颜色，例如

```
...
$this.css({ 'opacity': '0.65' });
$this.css({ 'color': '#a8a8a8' }); 
```

# menu - 在 IE 8/7 中创建网格时 dijit.Menu 的奇怪行为

> ID：15106623
> 
> 赞同：0
> 
> 时间：2013-02-27T07:42:44.953
> 
> 标签：menu, dojo

我有一个带有 BorderContainer 的简单页面。顶部区域是一个简单的 ContentPange，中心区域是一个 TabContainer。在顶部区域有一个按钮，用于创建 dijit.Menu 并将其绑定到顶部区域。还有另一个按钮可以创建 EnhancedGrid 并将其添加到 TabContainer。问题如下：

场景 1) 如果您创建菜单，然后单击鼠标右键，菜单将正确显示，只要在第一次显示菜单之前没有创建网格。

场景2）任何其他选项（创建菜单，网格，然后右键单击，或创建网格，菜单，然后右键单击）都会在页面中引起闪烁，（就像页面是调整大小）。滚动条将在主体右侧显示一秒钟，菜单将出现一秒钟，然后消失。如果再次点击会出现菜单，但打开子菜单会关闭主菜单，子菜单中的选项将不起作用。

我已经能够创建一个小测试用例。使用 1.8 之前的任何版本的 dojo 都可以重现该行为。我还看到，如果边框容器的高度不同于 100%（宽度不影响），菜单就可以正常工作

我相信这个问题与那个眨眼有关。似乎在显示菜单的那一刻，布局正在调整大小，在那一刻，菜单失去了焦点并自行关闭。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - demo</title>

<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/dojo/1.7.4/dojo/dojo.js' djConfig="parseOnLoad: true, locale: 'en-us'"></script>

<script>
 dojo.require("dijit.layout.TabContainer");
dojo.require("dijit.layout.ContentPane");
dojo.require("dojox.grid.EnhancedGrid");
dojo.require("dojo.data.ItemFileWriteStore");
dojo.require("dojox.grid.enhanced.plugins.NestedSorting");
dojo.require("dojox.grid.enhanced.plugins.Menu");
dojo.require("dijit.Menu");
dojo.require("dijit.layout.BorderContainer");
dojo.require("dojox.layout.ContentPane");
</script>    

<style type='text/css'>
@import url('http://ajax.googleapis.com/ajax/libs/dojo/1.7.4/dojox/grid/enhanced/resources/tundra/EnhancedGrid.css');
@import url('http://ajax.googleapis.com/ajax/libs/dojo/1.7.4/dijit/themes/tundra/tundra.css');
</style>

<style type="text/css">
    html, body { overflow: auto; width: 100%; height: 100%; margin: 0; }
</style>

<script>
    function createMenu(){
        var sMenu = new dijit.Menu({});
        var pSubMenu = new dijit.Menu();
        // Para enviar por mail
        pSubMenu.addChild(new dijit.MenuItem({
            label: "email 1",
            onClick: function(e){
                alert(1)
            }
        }));

        pSubMenu.addChild(new dijit.MenuItem({
            label: "email 2",
            onClick: function(e){
                alert(2)
            }
        }));

        // Añadimos el submenu a la entrada de SendTo
        sMenu.addChild(new dijit.PopupMenuItem({
            label: "SendTo",
            popup: pSubMenu
        }));

    sMenu.addChild(new dijit.MenuItem({
        label: "Open"
    }))
    sMenu.startup();
    return sMenu;
}
</script>
   </head>
 <body class="tundra eco">

  <div id="BorderContainerLevel1" dojoType="dijit.layout.BorderContainer" style="width: 100%; height: 100%; background: none; border:none; padding:10px 0px 0px 0px;">
   <div id="pane-test-1" dojoType="dijit.layout.ContentPane" region="top" style="height: 105px; "><!-- z-index:10-->
    La cabecera
    <button dojoType="dijit.form.Button" type="button" onclick='launch()'>Create grid</button>
    <button dojoType="dijit.form.Button" type="button" onclick='launchMenu()'>Create Menu</button>
   </div>
    <script>

function launch(){
    var layout = [[
        {
        name: '&nbsp;',
        hidden: true,
        field: 'idDocument'},
    {
        name: '&nbsp;',
        field: 'contentType',
        width: '8%'},
    {
        name: "Name",
        field: 'name',
        width: '62%'},
    {
        name: "Date",
        field: 'date',
        width: '20%'},
    {
        name: "Size",
        field: 'size',
        width: '10%'}
    ]];
    var i = 0;

    var gridId = "grid_" + i

    var grid = new dojox.grid.EnhancedGrid({
        id: gridId,
        query: {
            idDocument: '*'
        },
        title:"titulo",
        structure: layout
    })
    bankerTabContainer.addChild(grid)
    grid.startup();

    var myJson = {"identifier":"idDocument","items":[{"contentType":"pdf","date":"2011-10-26T16:10:45","documentType":"USERDOCUMENT","documentTypeDescription":"User Document","idDocument":534044,"idUser":"OFFMARA","name":"test II Modules.pdf","size":15704}]}
        grid.setStore(new dojo.data.ItemFileWriteStore({
                data: myJson
            }));

}
  </script>
<div dojoType="dijit.layout.TabContainer" id="bankerTabContainer" jsId="bankerTabContainer" style="height: 100%;width: 100%; border: 0px; padding: 0px;" region="center"></div>

  </div>

<script>
function launchMenu(){
    dijit.byId('BorderContainerLevel1').resize();
    var menu1 = createMenu();
    menu1.bindDomNode(dojo.byId("pane-test-1"));
}
</script>
 </body>
</html> 
```

# regex - 使用正则表达式在纯文本中搜索重复的中文字符？

> ID：15106625
> 
> 赞同：0
> 
> 时间：2013-02-27T07:43:14.787
> 
> 标签：regex, unicode, textmate

首先我知道匹配中文 unicode 应该使用

```
[\x{4e00}-\x{9fa5}] 
```

然后我使用组和反向引用

```
([\x{4e00}-\x{9fa5}])\1 
```

但结果是邻接，如“中中”。

我需要在文本中任何地方**多次出现的所有字符**。像

```
中国保持中立
^      ^ 
```

PS.我使用 textmate 编辑器。

有什么帮助吗？蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:18:43.957

你可以做：

1.  匹配所有内容，直到该字符最后一次出现

    ```
    ([\x{4e00}-\x{9fa5}]).*\1 
    ```

    [在 Regexr 上](http://regexr.com?33u82)查看

2.  匹配所有内容，直到该字符下一次出现

    ```
    ([\x{4e00}-\x{9fa5}]).*?\1 
    ```

    [在 Regexr 上](http://regexr.com?33u7s)查看

3.  如果您只想匹配文本中稍后出现的字符，并且您不想匹配其间的所有内容，并且**是否支持[前瞻](http://www.regular-expressions.info/lookaround.html)**

    ```
    ([\x{4e00}-\x{9fa5}])(?=.*\1) 
    ```

    [在 Regexr 上](http://regexr.com?33u88)查看

    这将不匹配最后一次出现！（因为文本中不再跟随该字符。）

# jpa - 持久性上下文使查询为空

> ID：15106627
> 
> 赞同：0
> 
> 时间：2013-02-27T07:43:19.060
> 
> 标签：jpa, hibernate-mapping, apache-tomee

我最近为此更改了我的 JPA 设计：

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="flightfaq" transaction-type="JTA">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.archive.autodetection" value="class, hbm" />
            <property name="hibernate.connection.username" value="root" />
            <property name="hibernate.connection.password" value="password" />
            <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/flightfaq" />
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver" />
            <property name="hibernate.hbm2ddl.auto" value="update" />
            <property name="hibernate.c3p0.min_size" value="5" />
            <property name="hibernate.c3p0.max_size" value="20" />
            <property name="hibernate.c3p0.timeout" value="300" />
            <property name="hibernate.c3p0.max_statements" value="50" />
            <property name="hibernate.c3p0.idle_test_period" value="3000" />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.format_sql" value="true" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLInnoDBDialect"/>
            <property name="use_sql_comments" value="true" />
            <property name="jadira.usertype.autoRegisterUserTypes"
                value="true" />
        </properties>
    </persistence-unit>
</persistence> 
```

道氏

```
@Singleton
@LocalBean
@Startup
public class AircraftTypeDaoImpl implements AircraftTypeDao {

    @PersistenceContext
    private EntityManager em;

    /** JPQL query to find a {@link AircraftType} given its OACI name */
    private static final String JPQL_FIND_BY_TYPE = "SELECT a FROM AircraftType a WHERE a.typeOACI=:typeOACI";

    /** JPQL query to find all {@link AircraftType} */
    private static final String JPQL_FIND_ALL = "SELECT a FROM AircraftType a";

    public AircraftType find(String typeOACI) throws DAOException {
        AircraftType aircraftType = null;
        Query findQuery = em.createQuery(JPQL_FIND_BY_TYPE).setParameter(
                "typeOACI", typeOACI);
        aircraftType = (AircraftType) findQuery.getSingleResult();
        return aircraftType;
    }

    @SuppressWarnings("unchecked")
    public List<AircraftType> findAll() throws DAOException {
        return em.createQuery("SELECT a FROM AircraftType a").getResultList();
    }

} 
```

托管 bean 简化

```
@ManagedBean
@ViewScoped
public class MissionHandler implements Serializable {

    private static final long serialVersionUID = 2462652101518266609L;

    private Mission mission;

    private List<FlightFeasibilityException> exceptions;

    @EJB
    private AircraftTypeDaoImpl aircraftTypeDao;

    public MissionHandler() {
    }

    @PostConstruct
    public void init() {
        /** Create an empty mission */
        mission = new Mission();
        /** Create an empty list of exceptions */
        exceptions = new ArrayList<FlightFeasibilityException>();
        /** get aircraft types from the database */
        aircraftTypes = aircraftTypeDao.findAll();
        System.out.println("dump types");
        for (AircraftType type : aircraftTypes) {
            System.out.println(type.getTypeOACI());
        }
        System.out.println("init done");
    }

} 
```

与我的[其他帖子](https://stackoverflow.com/questions/15096099/good-way-of-managing-database-entity-manager/15097274#15097274)相反，Web 服务器加载完美。（我正在关闭另一个，我不知道发生了什么）但是在我的托管 bean 的 @PostConstruct 方法中（在加载应用程序的第一个 xhtml 页面时称为直接），`aircraftTypes`列表是空的！我知道 JPQL 查询没问题，因为它相当简单，并且在此设计更改之前就可以工作。我的猜测是创建的 entitymanager 没有查询我的“flightfaq”数据库。我真的不明白，因为我只有一个持久性单元。

下面是 TomEE 在启​​动时显示的日志 查询飞机类型时会看到休眠日志，但之后打印列表内容时什么也没有

```
27 févr. 2013 08:22:11 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: .:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java
27 févr. 2013 08:22:12 org.apache.tomcat.util.digester.SetPropertiesRule begin
ATTENTION: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:FlightFAQ' did not find a matching property.
27 févr. 2013 08:22:12 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
27 févr. 2013 08:22:12 org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
27 févr. 2013 08:22:13 org.apache.openejb.util.OptionsLog info
INFO: Using 'openejb.jdbc.datasource-creator=org.apache.tomee.jdbc.TomEEDataSourceCreator'
27 févr. 2013 08:22:13 org.apache.tomee.catalina.TomcatLoader optionalService
INFO: Optional service not installed: org.apache.tomee.webservices.TomeeJaxRsService
27 févr. 2013 08:22:13 org.apache.tomee.catalina.TomcatLoader optionalService
INFO: Optional service not installed: org.apache.tomee.webservices.TomeeJaxWsService
27 févr. 2013 08:22:13 org.apache.openejb.OpenEJB$Instance <init>
INFO: ********************************************************************************
27 févr. 2013 08:22:13 org.apache.openejb.OpenEJB$Instance <init>
INFO: OpenEJB http://openejb.apache.org/
27 févr. 2013 08:22:13 org.apache.openejb.OpenEJB$Instance <init>
INFO: Startup: Wed Feb 27 08:22:13 CET 2013
27 févr. 2013 08:22:13 org.apache.openejb.OpenEJB$Instance <init>
INFO: Copyright 1999-2012 (C) Apache OpenEJB Project, All Rights Reserved.
27 févr. 2013 08:22:13 org.apache.openejb.OpenEJB$Instance <init>
INFO: Version: 4.5.1
27 févr. 2013 08:22:13 org.apache.openejb.OpenEJB$Instance <init>
INFO: Build date: 20121209
27 févr. 2013 08:22:13 org.apache.openejb.OpenEJB$Instance <init>
INFO: Build time: 08:47
27 févr. 2013 08:22:13 org.apache.openejb.OpenEJB$Instance <init>
INFO: ********************************************************************************
27 févr. 2013 08:22:13 org.apache.openejb.OpenEJB$Instance <init>
INFO: openejb.home = /Users/valentine/apache-tomee-webprofile-1.5.1
27 févr. 2013 08:22:13 org.apache.openejb.OpenEJB$Instance <init>
INFO: openejb.base = /Users/valentine/jbossworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0
27 févr. 2013 08:22:13 org.apache.openejb.cdi.CdiBuilder initializeOWB
INFO: Created new singletonService org.apache.openejb.cdi.ThreadSingletonServiceImpl@65450f1f
27 févr. 2013 08:22:13 org.apache.openejb.cdi.CdiBuilder initializeOWB
INFO: Succeeded in installing singleton service
27 févr. 2013 08:22:13 org.apache.openejb.config.ConfigurationFactory init
INFO: openejb configuration file is '/Users/valentine/jbossworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/conf/openejb.xml'
27 févr. 2013 08:22:13 org.apache.openejb.util.OptionsLog info
INFO: Using 'openejb.provider.default=org.apache.tomee'
27 févr. 2013 08:22:13 org.apache.openejb.config.ConfigurationFactory configureService
INFO: Configuring Service(id=Tomcat Security Service, type=SecurityService, provider-id=Tomcat Security Service)
27 févr. 2013 08:22:13 org.apache.openejb.config.ConfigurationFactory configureService
INFO: Configuring Service(id=Default Transaction Manager, type=TransactionManager, provider-id=Default Transaction Manager)
27 févr. 2013 08:22:13 org.apache.openejb.config.ConfigurationFactory configureService
INFO: Configuring Service(id=My DataSource, type=Resource, provider-id=Default JDBC Database)
27 févr. 2013 08:22:13 org.apache.openejb.config.ConfigurationFactory configureService
INFO: Configuring Service(id=My Unmanaged DataSource, type=Resource, provider-id=Default JDBC Database)
27 févr. 2013 08:22:13 org.apache.openejb.config.ConfigurationFactory configureService
INFO: Configuring Service(id=My Singleton Container, type=Container, provider-id=Default Singleton Container)
27 févr. 2013 08:22:13 org.apache.openejb.config.ConfigurationFactory configureService
INFO: Configuring Service(id=My Stateful Container, type=Container, provider-id=Default Stateful Container)
27 févr. 2013 08:22:13 org.apache.openejb.config.ConfigurationFactory configureService
INFO: Configuring Service(id=My Stateless Container, type=Container, provider-id=Default Stateless Container)
27 févr. 2013 08:22:13 org.apache.openejb.config.DeploymentsResolver loadFrom
ATTENTION: <Deployments dir="null"> - Does not exist: /Users/valentine/jbossworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/apps
27 févr. 2013 08:22:13 org.apache.openejb.util.OptionsLog info
INFO: Using 'openejb.system.apps=true'
27 févr. 2013 08:22:14 org.apache.openejb.config.ConfigurationFactory configureApplication
INFO: Configuring enterprise application: null
27 févr. 2013 08:22:14 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Using openejb.deploymentId.format '{ejbName}'
27 févr. 2013 08:22:14 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb openejb/User: EjbDeployment(deployment-id=openejb/User)
27 févr. 2013 08:22:14 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb openejb/Deployer: EjbDeployment(deployment-id=openejb/Deployer)
27 févr. 2013 08:22:14 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb openejb/ConfigurationInfo: EjbDeployment(deployment-id=openejb/ConfigurationInfo)
27 févr. 2013 08:22:14 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb MEJB: EjbDeployment(deployment-id=MEJB)
27 févr. 2013 08:22:14 org.apache.openejb.config.AppInfoBuilder build
INFO: Enterprise application "openejb" loaded.
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.Assembler createRecipe
INFO: Creating TransactionManager(id=Default Transaction Manager)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.Assembler createRecipe
INFO: Creating SecurityService(id=Tomcat Security Service)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.Assembler createRecipe
INFO: Creating Resource(id=My DataSource)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.Assembler createRecipe
INFO: Creating Resource(id=My Unmanaged DataSource)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.Assembler createRecipe
INFO: Creating Container(id=My Singleton Container)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.Assembler createRecipe
INFO: Creating Container(id=My Stateful Container)
27 févr. 2013 08:22:14 org.apache.openejb.core.stateful.SimplePassivater init
INFO: Using directory /var/folders/UO/UOQ3IO17G+0yGL13ChYWzU+++TI/-Tmp- for stateful session passivation
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.Assembler createRecipe
INFO: Creating Container(id=My Stateless Container)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Assembling app: openejb
27 févr. 2013 08:22:14 org.apache.openejb.util.OptionsLog info
INFO: Using 'openejb.jndiname.format={deploymentId}{interfaceType.openejbLegacyName}'
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=openejb/UserBusinessRemote) --> Ejb(deployment-id=openejb/User)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=global/openejb/openejb/User!org.apache.openejb.assembler.util.User) --> Ejb(deployment-id=openejb/User)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=global/openejb/openejb/User) --> Ejb(deployment-id=openejb/User)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=openejb/DeployerBusinessRemote) --> Ejb(deployment-id=openejb/Deployer)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=global/openejb/openejb/Deployer!org.apache.openejb.assembler.Deployer) --> Ejb(deployment-id=openejb/Deployer)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=global/openejb/openejb/Deployer) --> Ejb(deployment-id=openejb/Deployer)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=openejb/ConfigurationInfoBusinessRemote) --> Ejb(deployment-id=openejb/ConfigurationInfo)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=global/openejb/openejb/ConfigurationInfo!org.apache.openejb.assembler.classic.cmd.ConfigurationInfo) --> Ejb(deployment-id=openejb/ConfigurationInfo)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=global/openejb/openejb/ConfigurationInfo) --> Ejb(deployment-id=openejb/ConfigurationInfo)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=MEJB) --> Ejb(deployment-id=MEJB)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=global/openejb/MEJB!javax.management.j2ee.ManagementHome) --> Ejb(deployment-id=MEJB)
27 févr. 2013 08:22:14 org.apache.openejb.assembler.classic.JndiBuilder bind
INFO: Jndi(name=global/openejb/MEJB) --> Ejb(deployment-id=MEJB)
27 févr. 2013 08:22:14 org.apache.openejb.cdi.CdiBuilder initSingleton
INFO: Existing thread singleton service in SystemInstance() org.apache.openejb.cdi.ThreadSingletonServiceImpl@65450f1f
27 févr. 2013 08:22:14 org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container is starting...
27 févr. 2013 08:22:14 org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [CdiPlugin]
27 févr. 2013 08:22:14 org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [OpenWebBeansJsfPlugin]
27 févr. 2013 08:22:14 org.apache.openejb.cdi.BeansDeployer validateInjectionPoints
INFO: All injection points are validated successfully.
27 févr. 2013 08:22:14 org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container has started, it took 109 ms.
27 févr. 2013 08:22:15 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Created Ejb(deployment-id=openejb/Deployer, ejb-name=openejb/Deployer, container=My Stateless Container)
27 févr. 2013 08:22:15 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Created Ejb(deployment-id=MEJB, ejb-name=MEJB, container=My Stateless Container)
27 févr. 2013 08:22:15 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Created Ejb(deployment-id=openejb/ConfigurationInfo, ejb-name=openejb/ConfigurationInfo, container=My Stateless Container)
27 févr. 2013 08:22:15 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Created Ejb(deployment-id=openejb/User, ejb-name=openejb/User, container=My Stateless Container)
27 févr. 2013 08:22:15 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Started Ejb(deployment-id=openejb/Deployer, ejb-name=openejb/Deployer, container=My Stateless Container)
27 févr. 2013 08:22:15 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Started Ejb(deployment-id=MEJB, ejb-name=MEJB, container=My Stateless Container)
27 févr. 2013 08:22:15 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Started Ejb(deployment-id=openejb/ConfigurationInfo, ejb-name=openejb/ConfigurationInfo, container=My Stateless Container)
27 févr. 2013 08:22:15 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Started Ejb(deployment-id=openejb/User, ejb-name=openejb/User, container=My Stateless Container)
27 févr. 2013 08:22:15 org.apache.openejb.assembler.classic.Assembler deployMBean
INFO: Deployed MBean(openejb.user.mbeans:application=openejb,group=org.apache.openejb.assembler.monitoring,name=JMXDeployer)
27 févr. 2013 08:22:15 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Deployed Application(path=openejb)
27 févr. 2013 08:22:15 org.apache.openejb.server.SimpleServiceManager start
INFO:   ** Bound Services **
27 févr. 2013 08:22:15 org.apache.openejb.server.SimpleServiceManager printRow
INFO:   NAME                 IP              PORT  
27 févr. 2013 08:22:15 org.apache.openejb.server.SimpleServiceManager start
INFO: -------
27 févr. 2013 08:22:15 org.apache.openejb.server.SimpleServiceManager start
INFO: Ready!
27 févr. 2013 08:22:15 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 4212 ms
27 févr. 2013 08:22:15 org.apache.tomee.catalina.OpenEJBNamingContextListener bindResource
INFO: Importing a Tomcat Resource with id 'UserDatabase' of type 'org.apache.catalina.UserDatabase'.
27 févr. 2013 08:22:15 org.apache.openejb.assembler.classic.Assembler createRecipe
INFO: Creating Resource(id=UserDatabase)
27 févr. 2013 08:22:15 org.apache.catalina.core.StandardService startInternal
INFO: Démarrage du service Catalina
27 févr. 2013 08:22:15 org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat (TomEE)/7.0.34
27 févr. 2013 08:22:15 org.apache.tomee.catalina.TomcatWebAppBuilder init
INFO: -------------------------
TomcatWebAppBuilder.init 
27 févr. 2013 08:22:15 org.apache.openejb.config.ConfigurationFactory configureApplication
INFO: Configuring enterprise application: /Users/valentine/jbossworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/ROOT
27 févr. 2013 08:22:15 org.apache.openejb.config.AppInfoBuilder build
INFO: Enterprise application "/Users/valentine/jbossworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/ROOT" loaded.
27 févr. 2013 08:22:15 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Assembling app: /Users/valentine/jbossworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/ROOT
27 févr. 2013 08:22:15 org.apache.openejb.cdi.CdiBuilder initSingleton
INFO: Existing thread singleton service in SystemInstance() org.apache.openejb.cdi.ThreadSingletonServiceImpl@65450f1f
27 févr. 2013 08:22:15 org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container is starting...
27 févr. 2013 08:22:15 org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [CdiPlugin]
27 févr. 2013 08:22:15 org.apache.webbeans.plugins.PluginLoader startUp
INFO: Adding OpenWebBeansPlugin : [OpenWebBeansJsfPlugin]
27 févr. 2013 08:22:15 org.apache.openejb.cdi.BeansDeployer validateInjectionPoints
INFO: All injection points are validated successfully.
27 févr. 2013 08:22:15 org.apache.openejb.cdi.OpenEJBLifecycle startApplication
INFO: OpenWebBeans Container has started, it took 3 ms.
27 févr. 2013 08:22:15 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Deployed Application(path=/Users/valentine/jbossworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/ROOT)
27 févr. 2013 08:22:16 org.apache.myfaces.ee6.MyFacesContainerInitializer onStartup
INFO: Added FacesServlet with mappings=[/faces/*, *.jsf, *.faces]
27 févr. 2013 08:22:16 org.apache.myfaces.config.DefaultFacesConfigurationProvider getStandardFacesConfig
INFO: Reading standard config META-INF/standard-faces-config.xml
27 févr. 2013 08:22:17 org.apache.myfaces.config.DefaultFacesConfigurationProvider getClassloaderFacesConfig
INFO: Reading config : jar:file:/Users/valentine/apache-tomee-webprofile-1.5.1/lib/omnifaces-1.3.jar!/META-INF/faces-config.xml
27 févr. 2013 08:22:17 org.apache.myfaces.config.DefaultFacesConfigurationProvider getClassloaderFacesConfig
INFO: Reading config : jar:file:/Users/valentine/apache-tomee-webprofile-1.5.1/lib/openwebbeans-jsf-1.1.7.jar!/META-INF/faces-config.xml
27 févr. 2013 08:22:17 org.apache.myfaces.config.LogMetaInfUtils logArtifact
INFO: Artifact 'myfaces-api' was found in version '2.1.10' from path 'file:/Users/valentine/apache-tomee-webprofile-1.5.1/lib/myfaces-api-2.1.10.jar'
27 févr. 2013 08:22:17 org.apache.myfaces.config.LogMetaInfUtils logArtifact
INFO: Artifact 'myfaces-impl' was found in version '2.1.10' from path 'file:/Users/valentine/apache-tomee-webprofile-1.5.1/lib/myfaces-impl-2.1.10.jar'
27 févr. 2013 08:22:17 org.hibernate.validator.internal.util.Version <clinit>
INFO: HV000001: Hibernate Validator 4.3.1.Final
27 févr. 2013 08:22:17 org.apache.myfaces.util.ExternalSpecifications isBeanValidationAvailable
INFO: MyFaces Bean Validation support enabled
27 févr. 2013 08:22:17 org.apache.myfaces.application.ApplicationImpl getProjectStage
INFO: Couldn't discover the current project stage, using Production
27 févr. 2013 08:22:17 org.apache.myfaces.config.FacesConfigurator handleSerialFactory
INFO: Serialization provider : class org.apache.myfaces.shared_impl.util.serial.DefaultSerialFactory
27 févr. 2013 08:22:17 org.apache.myfaces.config.annotation.DefaultLifecycleProviderFactory getLifecycleProvider
INFO: Using LifecycleProvider org.apache.myfaces.config.annotation.Tomcat7AnnotationLifecycleProvider
27 févr. 2013 08:22:17 org.apache.myfaces.webapp.AbstractFacesInitializer initFaces
INFO: ServletContext initialized.
27 févr. 2013 08:22:17 org.apache.myfaces.util.ExternalSpecifications isUnifiedELAvailable
INFO: MyFaces Unified EL support enabled
27 févr. 2013 08:22:17 org.apache.tomee.catalina.TomcatWebAppBuilder init
INFO: -------------------------
TomcatWebAppBuilder.init /FlightFAQ
27 févr. 2013 08:22:19 org.apache.openejb.config.ConfigurationFactory configureApplication
INFO: Configuring enterprise application: /Users/valentine/jbossworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/FlightFAQ
27 févr. 2013 08:22:22 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb AircraftTypeDaoImpl: EjbDeployment(deployment-id=AircraftTypeDaoImpl)
27 févr. 2013 08:22:22 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb MissionDaoImpl: EjbDeployment(deployment-id=MissionDaoImpl)
27 févr. 2013 08:22:22 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb AirportDaoImpl: EjbDeployment(deployment-id=AirportDaoImpl)
27 févr. 2013 08:22:22 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb LegDaoImpl: EjbDeployment(deployment-id=LegDaoImpl)
27 févr. 2013 08:22:22 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb VariantDaoImpl: EjbDeployment(deployment-id=VariantDaoImpl)
27 févr. 2013 08:22:22 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb CustomerDaoImpl: EjbDeployment(deployment-id=CustomerDaoImpl)
27 févr. 2013 08:22:22 org.apache.openejb.config.InitEjbDeployments deploy
INFO: Auto-deploying ejb FlightFaqUserDaoImpl: EjbDeployment(deployment-id=FlightFaqUserDaoImpl)
27 févr. 2013 08:22:22 org.apache.openejb.config.AutoConfig deploy
INFO: Configuring PersistenceUnit(name=flightfaq, provider=org.hibernate.ejb.HibernatePersistence)
27 févr. 2013 08:22:22 org.apache.openejb.config.AutoConfig setJtaDataSource
INFO: Adjusting PersistenceUnit flightfaq <jta-data-source> to Resource ID 'My DataSource' from 'null'
27 févr. 2013 08:22:22 org.apache.openejb.config.AutoConfig setNonJtaDataSource
INFO: Adjusting PersistenceUnit flightfaq <non-jta-data-source> to Resource ID 'My Unmanaged DataSource' from 'null'
27 févr. 2013 08:22:22 org.apache.openejb.config.AppInfoBuilder build
INFO: Enterprise application "/Users/valentine/jbossworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/FlightFAQ" loaded.
27 févr. 2013 08:22:22 org.apache.openejb.assembler.classic.Assembler createApplication
INFO: Assembling app: /Users/valentine/jbossworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/FlightFAQ
27 févr. 2013 08:22:22 org.hibernate.annotations.common.Version <clinit>
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
27 févr. 2013 08:22:22 org.hibernate.Version logVersion
INFO: HHH000412: Hibernate Core {4.1.9.Final}
27 févr. 2013 08:22:22 org.hibernate.cfg.Environment <clinit>
INFO: HHH000206: hibernate.properties not found
27 févr. 2013 08:22:22 org.hibernate.cfg.Environment buildBytecodeProvider
INFO: HHH000021: Bytecode provider name : javassist
27 févr. 2013 08:22:22 org.hibernate.ejb.Ejb3Configuration configure
INFO: HHH000204: Processing PersistenceUnitInfo [
    name: flightfaq
    ...]
27 févr. 2013 08:22:23 org.hibernate.service.jdbc.connections.internal.ConnectionProviderInitiator instantiateExplicitConnectionProvider
INFO: HHH000130: Instantiating explicit connection provider: org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider
27 févr. 2013 08:22:46 com.sun.faces.mgbean.BeanManager addBean
ATTENTION: JSF1074 : Le bean géré nommé «startup» a déjà été enregistré.  Remplacement du type de classe du bean géré existant java.util.Date par java.util.Date.
27 févr. 2013 08:22:46 com.sun.faces.mgbean.BeanManager addBean
ATTENTION: JSF1074 : Le bean géré nommé «now» a déjà été enregistré.  Remplacement du type de classe du bean géré existant java.util.Date par java.util.Date.
Wed Feb 27 08:22:48 MacBook-Pro-de-Valentine-Calloud.local java[323] <Error>: kCGErrorIllegalArgument: CGSOrderWindowList
Wed Feb 27 08:22:48 MacBook-Pro-de-Valentine-Calloud.local java[323] <Error>: kCGErrorFailure: Set a breakpoint @ CGErrorBreakpoint() to catch errors as they are logged.
27 févr. 2013 08:22:48 org.richfaces.application.InitializationListener logWarningWhenConnectionFactoryPresent
ATTENTION: JMS API was found on the classpath; if you want to enable RichFaces Push JMS integration, set context-param 'org.richfaces.push.jms.enabled' in web.xml
Hibernate: 
    select
        aircraftty0_.id as id12_,
        aircraftty0_.massChild as massChild12_,
        aircraftty0_.massFemale as massFemale12_,
        aircraftty0_.massMale as massMale12_,
        aircraftty0_.postFlightShowUp as postFlig5_12_,
        aircraftty0_.preFlightShowUp as preFligh6_12_,
        aircraftty0_.typeOACI as typeOACI12_ 
    from
        AircraftType aircraftty0_
dump types
init done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:02:11.360

您是否尝试过为持久性单元提供显式名称？曾经有人告诉我，即使你只有一个名字，最好还是提供这个名字是由 TomEE 的开发者之一 David Blevins 提供的；-)

虽然我实际上怀疑它会解决你的问题。

顺便说一句，如果您将查询的创建更改为添加结果类型的类，则可以省略强制转换

```
em.createQuery("SELECT a FROM AircraftType a", AircraftType.class).getResultList(); 
```

这些方法总是返回 `TypedQuery<AircraftType>`

然后你可以避免警告信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T10:26:52.587

我发现了问题。这与我的 TomEE Web 服务器配置有关。我需要在 tomee.xml 文件中描述我的数据源（我这样做了），并将这些定义复制到部署在 TomEE 部署 webapps 和其他东西的硬盘目录中的 openejb.xml 文件中。我以为这个副本是自动完成的（从 tomee.xml 到 openejb.xml）

[这个线程](http://openejb.979440.n4.nabble.com/Empty-queries-even-if-database-is-populated-td4661074.html)中的所有内容都非常详细

请注意，现在的行为与预期的一样，使用：

*   @ManagedBean/@ViewScoped
*   @Singleton/@Startup/@LocalBean

# c# - 动态生成链接的点击事件按钮

> ID：15106630
> 
> 赞同：0
> 
> 时间：2013-02-27T07:43:26.270
> 
> 标签：c#, asp.net

我创建了一个简单的注册页面，其中包含名称、用户名和密码字段。实际上正在使用数据库检查用户名，无论该用户名是否已经存在...

![在此处输入图像描述](../Images/0a4a4c911e08f3feaeb533493fd74fd6.png)

假设如果该用户名已经被使用，那么我在标签中显示“用户名已经被使用”消息，并且我动态创建 4 个链接按钮用于用户名建议，例如

![在此处输入图像描述](../Images/7475257b9bb9beb801b8e0d23a2be61e.png)

现在当我点击链接按钮时，绑定到用户名文本框..这是我的代码

![在此处输入图像描述](../Images/b1d251aa40990f713130c3bfcc5616d9.png)

给我一些想法如何将该链接按钮绑定到文本框..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:23:06.653

您应该尽量减少来自客户端的服务器请求，尤其是在您想要更新 UI 控件时。我建议使用 java 脚本来更新具有新值的文本框。

```
for (int i = 0; i < 4; i++)
{
   LinkButton lbtn = new LinkButton();
   lbtn.OnClientClick = "document.getElementById('" + txtuname.ClientID + "').value = '"+txtuname.Text + i+"'; return false;";
   lbtn.Text = txtuname.Text + i;
   phlinks.Controls.Add(lbtn);
   phlinks.Controls.Add(new LiteralControl("   "));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:51:10.757

试试这个

```
for (int i = 0; i < 4; i++)
{
   LinkButton lbtn = new LinkButton();
   lbtn.OnClientClick = "document.getElementById('" + txtuname.ClientID + "').value = this.innerText; return false;";
   lbtn.Text = i.ToString();
   phlinks.Controls.Add(lbtn);
} 
```

# java - 如何避免 java.lang.NoClassDefFoundError

> ID：15106636
> 
> 赞同：6
> 
> 时间：2013-02-27T07:43:54.980
> 
> 标签：java, apache-poi, noclassdeffounderror, doc

我有一个用于将文本添加到现有 .doc 文件的代码，它会使用 apache POI 将其另存为另一个名称。

以下是我到目前为止尝试过的代码

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import org.apache.poi.xwpf.model.XWPFHeaderFooterPolicy;
import org.apache.poi.xwpf.usermodel.XWPFDocument;
import org.apache.poi.xwpf.usermodel.XWPFFooter;
import org.apache.poi.xwpf.usermodel.XWPFTable;

public class FooterTableWriting {

    public static void main(String args[])
    {
        String path="D:\\vignesh\\AgileDocTemplate.doc";
        String attch="D:\\Attach.doc";
        String comment="good";
        String stat="ready";
        String coaddr="xyz";
        String cmail="abc@gmail.com";
        String sub="comp";
        String title="Globematics";
        String cat="General";
        setFooter(path, attch, comment, stat, coaddr, cmail, sub, title, cat);
    }
    private static  void setFooter(String docTemplatePath,String attachmentPath,String comments,String status,String coAddress,String coEmail,String subject,String title,String catagory)
    {
          try{

                    InputStream input = new FileInputStream(new File(docTemplatePath));
                    XWPFDocument document=new XWPFDocument(input);
                    XWPFHeaderFooterPolicy headerPolicy =new XWPFHeaderFooterPolicy(document);
                    XWPFFooter footer = headerPolicy.getDefaultFooter();
                    XWPFTable[] table = footer.getTables();

                    for (XWPFTable xwpfTable : table)
                       {
                           xwpfTable.getRow(1).getCell(0).setText(comments);
                           xwpfTable.getRow(1).getCell(1).setText(status);
                           xwpfTable.getRow(1).getCell(2).setText(coAddress);
                           xwpfTable.getRow(1).getCell(3).setText(coEmail);
                           xwpfTable.getRow(1).getCell(4).setText(subject);
                           xwpfTable.getRow(1).getCell(5).setText(title);
                           xwpfTable.getRow(1).getCell(6).setText(catagory);

                       }

                  File f=new File (attachmentPath.substring(0,attachmentPath.lastIndexOf('\\')));

                  if(!f.exists())
                      f.mkdirs();

                  FileOutputStream out = new FileOutputStream(new File(attachmentPath));
                  document.write(out);
                  out.close();

                  System.out.println("Attachment Created!");

         }
          catch(Exception e)
          {
              e.printStackTrace();
          }

    }

} 
```

以下是我得到的

```
 org.apache.poi.POIXMLException: org.apache.xmlbeans.XmlException: error: The document is not a document@http://schemas.openxmlformats.org/wordprocessingml/2006/main: document element mismatch got themeManager@http://schemas.openxmlformats.org/drawingml/2006/main
    at org.apache.poi.xwpf.usermodel.XWPFDocument.onDocumentRead(XWPFDocument.java:124)
    at org.apache.poi.POIXMLDocument.load(POIXMLDocument.java:200)
    at org.apache.poi.xwpf.usermodel.XWPFDocument.<init>(XWPFDocument.java:74)
    at ext.gt.checkOut.FooterTableWriting.setFooter(FooterTableWriting.java:32)
    at ext.gt.checkOut.FooterTableWriting.main(FooterTableWriting.java:25)
Caused by: org.apache.xmlbeans.XmlException: error: The document is not a document@http://schemas.openxmlformats.org/wordprocessingml/2006/main: document element mismatch got themeManager@http://schemas.openxmlformats.org/drawingml/2006/main
    at org.apache.xmlbeans.impl.store.Locale.verifyDocumentType(Locale.java:458)
    at org.apache.xmlbeans.impl.store.Locale.autoTypeDocument(Locale.java:363)
    at org.apache.xmlbeans.impl.store.Locale.parseToXmlObject(Locale.java:1279)
    at org.apache.xmlbeans.impl.store.Locale.parseToXmlObject(Locale.java:1263)
    at org.apache.xmlbeans.impl.schema.SchemaTypeLoaderBase.parse(SchemaTypeLoaderBase.java:345)
    at org.openxmlformats.schemas.wordprocessingml.x2006.main.DocumentDocument$Factory.parse(Unknown Source)
    at org.apache.poi.xwpf.usermodel.XWPFDocument.onDocumentRead(XWPFDocument.java:92)
    ... 4 more 
```

我已经添加了与此相对应的所有 jar 文件，但仍然找不到解决方案。我是这个 apache poi 的新手，所以请帮助我提供一些解释和示例。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-27T08:04:32.590

从我对问题的评论中复制：

看起来您需要 Apache POI 发行版中的 poi-ooxml-schemas.jar。仅仅添加一个 jar 并不意味着你拥有了框架的所有类。

* * *

根据我的评论（或其他人的回答）解决问题后，你有这个新的异常

```
org.apache.xmlbeans.XmlException: error: The document is not a document@http://schemas.openxmlformats.org/wordprocessingml/2006/main: document element mismatch got themeManager@http://schemas.openxmlformats.org/drawingml/2006/main 
```

阅读[Apache POI - HWPF - Java API to Handle Microsoft Word Files](http://poi.apache.org/hwpf/index.html)，看起来您使用错误的类来处理 2003-word 文档：*HWPF 是我们的 Microsoft Word 97(-2007) 文件格式端口的名称纯 Java* ... *HWPF 的新 Word 2007 .docx 格式的合作伙伴是 XWPF。*. 这意味着您需要`HWPFDocument`上课来处理文档或将文档从 Word 2003- 更改为 Word 2007+。

IMO 我发现 Apache POI 是处理 Excel 文件的一个很好的解决方案，但我会寻找另一种处理 Word 文档的选项。检查[此问题](https://stackoverflow.com/q/203174/1065197)以获取更多相关信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-27T07:54:26.350

这是`poi-ooxml-3.9.jar`.

![在此处输入图像描述](../Images/850e2efa93b05a58fe76042896112a4e.png)

这意味着它们中的任何一个都可以在*运行时*使用，即使它们没有在编译时使用。

确保在项目的类路径中拥有所有 jar。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-03-21T10:16:50.280

**在您的配置文件中添加此依赖项：**

```
<dependency>
    <groupId>org.apache.poi</groupId>
    <artifactId>ooxml-schemas</artifactId>
    <version>1.3</version>
</dependency> 
```

或者

```
System couldn’t find the 
```

> poi-ooxml-schemas-xx.xx.jar

**请将库添加到您的类路径中。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T07:52:02.247

该类`org.openxmlformats.schemas.wordprocessingml.x2006.main.DocumentDocument.Factory` 位于 jar ooxml-schemas-1.0.jar 中，可在[此处下载](http://mirrors.ibiblio.org/pub/mirrors/maven2/org/apache/poi/ooxml-schemas/1.0/ooxml-schemas-1.0.jar)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-01T00:29:53.780

您收到该错误是因为您没有适当的 XWPFDocument 依赖项。ooxml-schemas 需要 xmlbeans，ooxml 需要 poi 和 ooxml-schemas 等等...

在这里查看：http: [//poi.apache.org/overview.html#components](http://poi.apache.org/overview.html#components)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-09T16:44:55.220

以为我会报告我遇到此错误的经验。我开始突然发现它，并且没有改变我的工作区中的任何东西。事实证明，它发生在尝试读取具有超过 1 张工作表的 Excel 文件时（第二张工作表是数据透视表，大量数据。不确定是否是由于数据的大小造成的（我怀疑是这样，因为我已阅读包含超过 1 个工作表的 Excel 文件）。当我删除第二张工作表时，它起作用了。无需更改类路径。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-10T05:04:35.983

org.apache.poi.POIXMLException: org.apache.xmlbeans.XmlException: Element themeManager@ [http://schemas.openxmlformats.org/drawingml/2006/main](http://schemas.openxmlformats.org/drawingml/2006/main)不是有效的工作簿@ [http://schemas.openxmlformats.org/电子表格ml/2006/main](http://schemas.openxmlformats.org/spreadsheetml/2006/main)文档或有效替换。

**解决方案**：- 使用 .xlsx 格式而不是 .xls

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-07T20:24:19.207

FWIW我不得不添加这个：

```
compile 'org.apache.poi:ooxml-schemas:1.3' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-23T07:09:03.303

就我而言，我有不同版本的 poi(s)。poi-scratchpad 为 3.9，所有其他 - poi、poi-ooxml、poi-ooxml-schemas 为 3.12。我也将 poi-scratchpad 的版本更改为 3.12，一切都开始工作了。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-27T05:12:56.030

如果您的项目依赖项没有使用 maven。您的类路径中应该有以下 jar [![在此处输入图像描述](../Images/ab19ae88a4eeb1a0a574f636148056c7.png)](https://i.stack.imgur.com/sM9WQ.png)

# xcode - 添加到导航栏到所需位置

> ID：15106637
> 
> 赞同：0
> 
> 时间：2013-02-27T07:43:55.477
> 
> 标签：xcode, ipad, uibutton, uinavigationbar

我有应用程序我希望导航栏上的按钮应该位于所需位置但它没有完成我找到了 rightBarButton 和 leftBarButton 的方法但我希望它位于导航栏的中心

```
 UIButton *settingsView = [[UIButton alloc] initWithFrame:CGRectMake(0,0,40,40)];
[settingsView addTarget:self action:@selector(SettingsClicked) forControlEvents:UIControlEventTouchUpInside];
[settingsView setBackgroundImage:[UIImage imageNamed:@"login btn.png"] forState:UIControlStateNormal];
UIBarButtonItem *settingsButton = [[UIBarButtonItem alloc] initWithCustomView:settingsView];
[self.navigationItem setRightBarButtonItem:settingsButton]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:09:40.513

```
NSMutableArray *arrayOfItems = [[NSMutableArray alloc] init];

UIBarButtonItem *flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil]

[arrayOfItems addObject:flexibleSpace];
[arrayOfItems addObject:theItemYouWantCentered];
[arrayOfItems addObject:flexibleSpace];

self.navigationItem.leftBarButtonItems = arrayOfItems; 
```

# c# - c# xmldocument加载访问冲突

> ID：15106638
> 
> 赞同：0
> 
> 时间：2013-02-27T07:43:58.397
> 
> 标签：c#, xml, winforms, visual-studio, code-behind

我正在尝试在 Windows 窗体应用程序的代码中从 c# 加载 xml 文件。这是我使用的代码：

```
 XmlDocument xdoc = new XmlDocument();
        xdoc.Load("file.xml");

        foreach (XmlNode obj in xdoc.SelectNodes("/enabledobjects/object/*"))
        {
            RadListDataItem item = new RadListDataItem();

            item.Text = obj["objectname"].InnerText;
            item.Value = obj["value"].InnerText;

            DropDownList.Items.Add(item);
        } 
```

当我运行调试程序时，我没有错误。程序按应有的方式启动了几秒钟。然后它carashes并完成调试。Visual Studio 显示以下消息：

```
The program '[6728] Daten Archivar.vshost.exe: Managed (v4.0.30319)' has exited with code -1073741819 (0xc0000005) 'Access violation'. 
```

我有完全的管理员权限。该文件保存在与 exe 相同的文件中，每个人都可以完全访问。我不知道为什么我无法访问它。

xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<enabledobjects>
    <object>
      <objectname>John</objectname>
      <value>Carter</value>
    </object>
</enabledobjects> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:45:57.280

好吧，这确实是一个严重的错误。发生错误是因为 xpath 错误：

```
foreach (XmlNode obj in xdoc.SelectNodes("/enabledobjects/object/*"))
    {

     RadListDataItem item = new RadListDataItem();
     item.Text = obj["objectname"].InnerText; 
```

通过像这样循环，我们尝试使用`obj["objectname"].InnerText`来访问`<objectname>John</objectname>`.

这个问题的解决方法很简单：

```
foreach (XmlNode obj in xdoc.SelectNodes("/enabledobjects/object"))
    {

     RadListDataItem item = new RadListDataItem();
     item.Text = obj["objectname"].InnerText; 
```

通过删除 /* 我们定义`<object>`为 xmlNode 对象。

所以创建访问冲突是因为孩子，我们想读出 innerText，从来不存在。希望这对某人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:54:02.890

确保您没有在代码中松散引用。以防万一您尝试打开已锁定的文件。否则，只需在 Visual Studio 中尝试“清洁解决方案”，然后“重建”，然后再试一次。

# mysql - MySQL 中优化的 SELECT 查询

> ID：15106639
> 
> 赞同：1
> 
> 时间：2013-02-27T07:44:11.467
> 
> 标签：mysql, sql

我的表中有大量行，`table_1`. 有时我只需要检索特定的行。

我假设，当我使用带有 WHERE 子句的 SELECT 查询时，它会遍历第一行，直到它符合我的要求。

有没有办法让查询跳转到特定的行，然后从该行开始？

例子：

假设有 50,000,000 行，我要搜索的 id 是 53750。我需要的是：搜索可以从 50000 开始，这样可以节省搜索 49999 行的时间。

我不知道确切的术语，因为我不是 SQL 专家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:48:03.533

您需要创建一个索引：[http ://dev.mysql.com/doc/refman/5.1/en/create-index.html](http://dev.mysql.com/doc/refman/5.1/en/create-index.html)

```
ALTER TABLE_1 ADD UNIQUE INDEX (ID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:47:05.913

我理解它的方式，你想选择一个 id 为 53750 的行。如果你有一个名为 id 的字段，你可以这样做：

```
 SELECT * FROM table_1 WHERE id = 53750 
```

连同索引 id 字段。这是最快的方法。我所知道的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:51:58.590

我很确定任何对自己有一点尊重的 SQL 数据库都不会从第一行开始循环以获得所需的行。但我也不确定它们是如何工作的，所以我不能给出确切的答案。

您可以查看 WHERE 子句中的内容以及表的索引方式。你有正确的主键吗？就像为此使用数字数据类型一样。您是否在查询中使用了更多列的索引？

安装数据库服务器时还有很多需要考虑的问题，比如数据和日志文件放在哪里，给服务器多少内存以及设置增长。您可以做很多事情来调整服务器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T07:49:45.500

```
 ALTER table_1 ADD UNIQUE INDEX (<collumn>) 
```

如果它没有自动生成，那将是一个很好的第一步。您还可以使用：

```
 EXPLAIN <your query here> 
```

看看在这种情况下哪种查询效果最好。请注意，如果您想更改 where 语句（将来的任何地方），但在那里看到一个返回值，那么最好在其上放置一个索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T07:50:07.450

在要执行的列上创建索引`SELECT`：

```
CREATE INDEX index_1 ON table_1 (id); 
```

然后，像以前一样选择行。

而且，请阅读数据库、数据库设计和优化。你的问题充满了错误的假设。不要只是逐字复制和粘贴我们的答案。接受教育！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T07:50:17.573

[关于优化选择查询，如Range](http://dev.mysql.com/doc/refman/5.0/en/range-optimization.html)和[Where 子句](http://dev.mysql.com/doc/refman/5.0/en/where-optimizations.html)优化，有几件事需要了解，有关此问题的文档非常有用，请阅读以下部分：[优化 SELECT 语句](http://dev.mysql.com/doc/refman/5.0/en/select-optimization.html)。[在您评估的列上创建索引](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)对性能也很有帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-27T07:50:20.720

一种可能的解决方案您可以创建视图，然后从视图中查询。这是创建视图和从视图获取数据的详细信息

[http://www.w3schools.com/sql/sql_view.asp](http://www.w3schools.com/sql/sql_view.asp)

现在您只需将大量行拆分为多个视图（即一个视图中的第 1-10000 行，然后另一个视图中的 10001-20000 行）

然后从视图中查询。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-27T09:10:45.520

您可以尝试将表拆分为[分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning-overview.html)

[有关更改表以添加分区的更多信息](http://dev.mysql.com/doc/refman/5.1/en/alter-table-partition-operations.html)

[从特定分区中选择](http://dev.mysql.com/doc/refman/5.6/en/partitioning-selection.html)

在您的情况下，您可以为每 50.000 行在 ID 上创建一个分区，当您想跳过前 50.000 行时，您只需从分区 2 中选择。如何做到这一点在 MySQL 文档中得到了很好的解释。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-02-27T07:53:09.090

你可以试试这个简单的。

```
query = "SELECT * FROM tblname LIMIT 50000,0 
```

我刚刚用 phpmyadmin 试了一下。其中“50,000”是要查找的起始行。

编辑：但如果我是你，我不会使用这个，因为它会使 1 - 49999 记录失效。

# shell - 每次执行 shell 脚本时生成一个新的日志文件，其中包含 shell 脚本执行的完整输出

> ID：15106653
> 
> 赞同：0
> 
> 时间：2013-02-27T07:45:24.160
> 
> 标签：shell

我有一个执行一组命令的 shell 脚本。我想将每次由 shell 脚本生成的输出保存在一个新的日志文件中。日志文件名应该类似于“HealthCheckLogs_date_time”。其中 date = shell 脚本执行的日期 time = 当前时间，格式为 HH:MM:SS

请帮我生成这样一个日志文件来执行我的 shell 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:53:19.503

只需调用 shell 脚本，并将输出重定向到日志文件。

```
#!/bin/sh
datestr=$(date +%Y%m%d_%H%M%S)
./your_shell_script > HealthCheckLogs_$datestr 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T09:52:34.043

或者没有必要

```
 #!/bin/bash   
 datestr=$(date +%Y%m%d_%H%M%S)   
 echo "Start of the log" > HealthCheckLogs_$datestr  
 ls -la #do something which is not logged.  
 read -p "Input: " -e input  
 echo Your name was $input. > HealthCheckLogs_$datestr  
 echo "End of the log" > HealthCheckLogs_$datestr 
```

# database - 在 Liferay 中部署 portlet 后自动填充表

> ID：15106654
> 
> 赞同：1
> 
> 时间：2013-02-27T07:45:25.397
> 
> 标签：database, service, liferay, portlet, populate

我需要一种方法来自动填充由部署在 liferay 中的 portlet 的服务构建器创建的表。我怎样才能做到这一点？我正在考虑一个启动挂钩，但我将无法访问特定 portlet 的服务。那么有没有办法通过 portlet 本身来填充它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T09:28:28.603

如果您设法不使更改具有破坏性（例如，注意不要在每次启动时填充），您可以在 StartupAction（或启动挂钩）中进行。您可以将这个钩子添加到您的 portlet 项目中——这很好用。或者，您可以在 liferay-plugin-package.properties 中声明一个挂钩依赖于 portlet（反之亦然）——这将使服务可用。但是为了这个目的，我只是将所有东西都打包在一个 portlet 插件中。

如果您可能在其中进行破坏性更改，升级操作将是一个更安全的选择：这保证只运行一次。

示例请参见旧的 Sevencogs 示例（如果您需要指针，请告诉我，然后我会把它们拿出来）

*更新*：要在 portlet 项目中包含这样的钩子，请添加具有以下内容的 WEB-INF/liferay-hook.xml（或使用 Liferay IDE 的向导将钩子添加到项目中）

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hook PUBLIC "-//Liferay//DTD Hook 6.1.0//EN" "http://www.liferay.com/dtd/liferay-hook_6_1_0.dtd">

<hook>
    <portal-properties>portal.properties</portal-properties>
</hook> 
```

此外，使用以下选项创建 WEB-INF/src/portal.properties

```
application.startup.events=com.example.MyStartupAction 
```

当然，创建提到的启动操作，扩展`com.liferay.portal.kernel.events.SimpleAction`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-17T12:18:25.083

尝试从 servicecomponent 表中删除一个条目。并重新部署您的 portlet。

```
delete FROM servicecomponent where buildNamespace="<your table namespace>" 
```

# javascript - CoffeeScript 中是否有类似于 NumPy 的重复功能？

> ID：15106657
> 
> 赞同：0
> 
> 时间：2013-02-27T07:45:27.007
> 
> 标签：javascript, coffeescript

在 NumPy 中，您可以轻松创建重复值的数组。像下面这样。

```
>> print np.arange(3).repeat(2)
[0 0 1 1 2 2] 
```

有没有办法在 CoffeeScript 中做到这一点？

更新：按照 Marius 在他的回答中提出的建议，我创建了一个简单的函数来自动执行重复操作。这适用于将来遇到相同问题的任何人。

```
repeat = (arr, repeats) ->
    newArr = for a in arr
        a for [0...repeats]
    return [].concat.apply [], newArr 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:51:35.457

不是直接的。这很丑陋，但有效：

```
arr = for a in [0..2]
  a for [0..1]

console.log arr
console.log [].concat.apply [], arr 
```

输出：

```
[ [ 0, 0 ], [ 1, 1 ], [ 2, 2 ] ]
[ 0, 0, 1, 1, 2, 2 ] 
```

第一个块创建嵌套数组，concat.apply (javascript) 方法将其展平。

为了完整起见（见评论），这是一个 CS“漂亮”版本，但请注意它创建了另一种数组（它以不同的顺序执行循环）：

```
arr = (a for a in [0..2] for [0..1])

console.log arr
console.log [].concat.apply [], arr 
```

输出：

```
[ [ 0, 1, 2 ], [ 0, 1, 2 ] ]
[ 0, 1, 2, 0, 1, 2 ] 
```

最后一个示例不能与您的代码直接比较，但无论如何都可能可用，具体取决于您真正想要完成的任务。

关于 CS 有很多值得喜爱的地方，但我讨厌的两件事是 1) 总是必须为块使用空格（无法使我的第一个示例成为单线），以及 2) 没有对象理解（与此无关例子）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T13:13:58.760

CoffeeScript 是关于*语言*本身的。您正在寻找的是图书馆支持。没有任何东西像 NumPy 那样全面，它仍然没有一个`repeat()`函数，但你至少可以在 Underscore.js 中找到几个（有点）相关的[函数](http://documentcloud.github.com/underscore/)。[Lemonad](https://github.com/fogus/lemonad)对于一些相关任务看起来也很有希望。

# c# - 混合 C# 和 HTML Helper 标签

> ID：15106658
> 
> 赞同：0
> 
> 时间：2013-02-27T07:45:29.877
> 
> 标签：c#, asp.net-mvc, razor, html-helper

我需要使用`IF-ELSE`条件来检查这个人是否被命名`Perry`。如果是这样，我需要执行该`IF`语句，否则如果人名不是`Perry`，那么我将执行 else 块。

即使他们说我们可以`C#`与`HTML helper`标签混合，我也不能`IF-ELSE`像这样使用条件。显示`IF-ELSE`为文本。我怎样才能更正我的代码？

```
if(person == "Perry") 
{
    <div class="content">
    @using (Html.BeginForm("Go", "MyPro", new { }, FormMethod.Post, new { }))
    {
         @Html.TextBoxFor(mod => mod.id, new { id = "nameid" }) 
         <input type="text" id="name" name="name" /> 
         <input type="submit" value="send" class="send"/>    
        </div>
   }
}else {
    <div class="content1">
        @using (Html.BeginForm("Come", "MyPro", new { }, FormMethod.Post, new { }))
        {
            @Html.TextBoxFor(mod => mod.id, new { id = "schoolid" }) 
            <input type="submit" value="Send School" class="submitschool"/>
        }
    </div>
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:54:10.183

只需将`@`HTML 标记中的 C# 代码放在前面，仅此而已……

```
@{var person = "text";}

@if(person == "Perry") 
{
    <div class="content">
        @using (Html.BeginForm("Go", "MyPro", new { }, FormMethod.Post, new { }))
        {
            @Html.TextBoxFor(mod => mod.id, new { id = "nameid" }) 
            <input type="text" id="name" name="name" /> 
            <input type="submit" value="send" class="send"/>    
        }
    </div>
}
else 
{
    <div class="content1">
        @using (Html.BeginForm("Come", "MyPro", new { }, FormMethod.Post, new { }))
        {
            @Html.TextBoxFor(mod => mod.id, new { id = "schoolid" }) 
            <input type="submit" value="Send School" class="submitschool"/>
        }
    </div>
} 
```

[剃刀语法示例](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:50:03.933

需要在前面加上一个`@`，`if`否则 Razor 视图引擎不知道你想切换到“代码模式”。

# php - 控制器内部的类初始化

> ID：15106660
> 
> 赞同：0
> 
> 时间：2013-02-27T07:45:40.277
> 
> 标签：php, controller, parent-child

我有一个模型-

```
class Model{
    public $childModel;
     public function getModel($url){
     $this->childModel = 'model/'.$url;
     include($this->childModel);
     new ModelHomeHome();
     }
    } 
```

这是儿童模型-

```
class ModelHomeHome extends Model{
    function __construct(){
        echo 'This is Home Model.';
    }

} 
```

控制器类 -

```
class Controller{
public $model;
 function __construct(){
  $this->model = new Model();
 }
} 
```

这是子控制器 -

```
class ControllerHomeHome extends Controller{
 function help(){
 $this->model->getModel('home/home.php');
 }
} 
```

在一个页面中 -

```
include(controller.php);
include(model.php); 
```

问题是子模型类没有初始化。**致命错误：在非对象 ... 上调用成员函数 getModel()**。

如果我将子控制器`$this->model = new Model();`的`help()`功能放在内部而不是放在父控制器内部，它就可以工作。但我想在父控制器的构造函数中初始化模型。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:01:38.767

你确定这是你的文件的路径。我见过的大多数框架通常都有文件，所以我尝试使用常量来确保我在检索文件时位于正确的父目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:03:03.450

当我包含模型和控制器类并运行以下代码时，这对我来说很好

```
include('controller.php');
include('model.php');

$home = new ControllerHomeHome();
$home->help(); 
```

输出：

```
This is Home Model. 
```

# forms - 在 codeigniter 中动态加载表单

> ID：15106665
> 
> 赞同：0
> 
> 时间：2013-02-27T07:46:20.563
> 
> 标签：forms, codeigniter-2

我是 codeigniter 的新手，尝试一些简单的页面。我已成功连接到数据库以进行插入和更新。但现在我想从数据库中填充字段以进行更新。也就是说，当用户从下拉列表中选择名称时，相应的值应该出现在其他字段中，以便用户可以轻松更新。

我已经在没有 ajax 或 jquery 的情况下完成了这项工作。它对我有用，但有一些警告消息 - 使用未定义的常量。

我是通过 mvc 给的。帮我清除这个。

控制器：

```
public function update()
{
$this->load->helper('form');
$this->load->library('form_validation');
$data['title'] = 'Update Type';
$data['product_type'] = $this->editType_model->get_product_type();
    $data['row'] = $this->editType_model->get_row();

$this->form_validation->set_rules('productype', 'productype', 'required');

if ($this->form_validation->run() === FALSE)
{
    $this->load->view('templates/header', $data);   
    $this->load->view('cm/update', $data);
    $this->load->view('templates/footer');

}
else
{
        $data['title']= 'Updation';
        $data['message']= 'Updation succeeded';
    $this->editType_model->update_news();
    $this->load->view('cm/success', $data);
}
} 
```

模型：

```
public function get_product_type() {
    $data = array();
            $this->db->order_by("product_type_name", "desc"); 
    $query = $this->db->get('product_type');
    if ($query->num_rows() > 0) {
        foreach ($query->result_array() as $row){
                $data[] = $row;
            }
    }   
    $query->free_result();
    return $data;   
}
public function get_row() {
    $data = array();
                $id= $_POST[product_type_id];
    $query = $this->db->get_where('product_type', array('product_type_id' => $id));
            if ($query->num_rows() > 0) {
        foreach ($query->result_array() as $row){
                $data[] = $row;
            }
    }   
    $query->free_result();
            return $data;   

}
public function update_news()
{
$this->load->helper('date');
$Product = $this->input->post('product_type_id');
$data = array(
    'product_type_name'=>($_POST['productype']),
    'rank'=>($_POST['rank'])        
            );
$this->db->where('product_type_id',$Product);
return $this->db->update('product_type', $data);
} 
```

看法：

```
<?php $productType = 0;
if(isset($_POST['product_type_id'])){
$productType = $_POST['product_type_id'];
}?>
<div id="Content"><div>
<form action="" method="post" name="f1">
<table ><tr><td>Select Product Type Name:</td>
    <td><Select id="product_type_id" name="product_type_id" onChange="document.f1.submit()">
            <option value="0">--SELECT</option>
            <?php if (count($product_type)) {
                              foreach ($product_type as $list) { ?>
            <option value="<?php echo $list['product_type_id']; ?>" 
            <?php if($productType==$list['product_type_id']) echo     "Selected" ?> >
            <?php echo $list['product_type_name'];  ?></option>
            <?php }} ?></Select></td></tr></table></form>
<?php   if($productType){
            if (count($row)) {
        foreach ($row as $faProductType) { ?>
    <div > <form action="" method="post" class="form-Fields" >
    <input type="hidden" name="product_type_id" id="product_type_id" value="<?php echo     $faProductType['product_type_id']; ?>" >
    <table border="0" cellpadding="8" cellspacing="0" >
    <tr><td>Product Type <font color="red">*</font></td><td style="width: 10px;"> :         </td>
     <td><input name="productype" type="text" value="<?php echo     $faProductType['product_type_name']; ?>" style=" width:300px;" /></td>
            <td><span class="err" id="productTypeDesc1Err"></span></td></tr>
         <tr><td >Rank</td><td style="width:10px;"> : </td>
            <td ><input type="text" name="rank" id="rank" value="<?php echo     $faProductType['rank']; ?>" size="39" />&nbsp;&nbsp;<span class="err"     id="productTypeNameErr"></span></td>
            <td ></td></tr><tr><td></td><Td colspan="2" align="center">
            <input type="submit" value="Update" class="buttonimg"      name='cm/editType/update' style="width:100px"
            onClick="return validEditProductType();">
            </Td><td></td></tr></table></form></div></div></div>
<?php }}} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:29:18.607

你可以使用 Ajax 来
改变你的选择框，用表单填充一个 div。

控制器方法

```
function getUserdata(){
    $where['username'] = $this->input->post('username');
    $this->load->model('users_model');
    $data['user'] = $this->users_model->getUser($where);
    $this->load->view('userform',$data);
} 
```

你建模方法

```
function getUser($where){
    return $this->db->where($where)->get('usertable')->row()
} 
```

阿贾克斯

```
$(function(){
    $('#selecttion').change(function(){
         var username = $(this).val();
         $.ajax({
            url : '<?php 'echo url to controller method'?>',
            type : 'POST'  ,
            data : 'username='+username,
            success : function(data){
                $('#dividtofill').html(data);
            }
         }); 

    });
}) 
```

编辑 ：

调用 ajax 很容易
，因为这个在你的标题中包含 jquery 库。
这是您的下拉菜单

注意：将上面的 ajax 代码放在脚本的 head 部分

```
<select name="user" id="selecttion">
    <option value="John">John</option>
    <option value="Sam">Sam</option>
    <option value="David">David</option>
</select> 
```

现在，当更改此下拉值时，将调用上面定义的 ajax 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T11:32:50.687

我终于清除了错误。我通过一个简单的 if isset 循环完成了这项工作。

现在我的模型中的 get_row() 看起来像这样。

```
public function get_row() {
            $data = array();
$id= 0;
if(isset($_POST['product_type_id'])){
$id = $_POST['product_type_id'];
}
$query = $this->db->get_where('product_type', array('product_type_id' => $id));
if ($query->num_rows() > 0) {
foreach ($query->result_array() as $row){
$data[] = $row;
}
}
    $query->free_result();
    return $data;   
} 
```

# python - 使用 Python 发送 XMPP 消息

> ID：15106681
> 
> 赞同：3
> 
> 时间：2013-02-27T07:47:22.193
> 
> 标签：python, xmpp, sendmessage

我正在尝试使用 Python 发送 XMPP 消息，但无法正常工作。它似乎在身份验证步骤失败。我从上一个问题中获取了这个示例，并设置了一个 gmail 帐户进行测试。

```
import xmpp

username = 'randomtest603@gmail.com'
passwd = 'ThePass123'
to='randomtest604@gmail.com'
msg='hello :)'

client = xmpp.Client('gmail.com')
client.connect(server=('talk.google.com',5223))
client.auth(username, passwd, 'botty')
client.sendInitPresence()
message = xmpp.Message(to, msg)
message.setAttr('type', 'chat')
client.send(message) 
```

有很多调试输出，但这是告诉我它失败的部分

```
DEBUG: socket       sent  <auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" mechanism="PLAIN">cmFuZG9tdGVzdDYwM0BnbWFpbC5jb21AZ21haWwuY29tAHJhbmRvbXRlc3Q2MDNAZ21haWwuY29tAFRoZVBhc3MxMjM=</auth>
DEBUG: socket       got   <failure xmlns="urn:ietf:params:xml:ns:xmpp-sasl">
  <invalid-authzid/>
  </failure>
  </stream:stream>
DEBUG: dispatcher   ok    Got urn:ietf:params:xml:ns:xmpp-sasl/failure stanza
DEBUG: dispatcher   ok    Dispatching failure stanza with type-> props->  [u'urn:ietf:params:xml:ns:xmpp-sasl'] id->None
DEBUG: sasl         error Failed SASL authentification: <invalid-authzid /> 
```

但是最后我也得到了这个

```
DEBUG: socket       sent  <presence id="2" />
DEBUG: socket       sent  <message to="randomtest604@gmail.com" type="chat" id="3">
  <body>hello :)</body>
  </message> 
```

我试过这个 xmpppy 和 slimxmpp，结果是一样的。这个领域对我来说是新的，所以我可能会犯一个新手错误，有人有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:42:57.130

您的问题不是特定于 python 的，也不是特定于库的。当您打电话时，`xmpp.Client('gmail.com')`您将用户名的域部分指定为“gmail.com”。因此，您应该从您使用的用户名中省略它。

将您的第三行修改为：

```
username = 'randomtest603' 
```

它应该可以工作（我在为此测试生成应用程序特定密码后用我自己的帐户尝试过它，只有当我从用户名中省略'@gmail.com'时它才有效，否则我会遇到与你相同的错误）。

# ios - 将图像添加到 NSObject - 可能吗？

> ID：15106683
> 
> 赞同：1
> 
> 时间：2013-02-27T07:47:36.663
> 
> 标签：ios, objective-c, nsobject

稍后，我将拥有从包含文件名的 .csv（逗号分隔文件）读取的对象。这就是为什么我要这样做。

我想要完成的是让按钮从 csv 中的文件名中获取图像。

到目前为止我尝试过的是：对象：

```
@interface question : NSObject
{
@private
UIImage *imageName;
}
@property (nonatomic, retain)UIImage *imageName; 
```

（我已经尝试过使用 NSString 和 UIImage，两者都不像我想要的那样工作）

视图控制器：

```
- (void)viewDidLoad
{
[super viewDidLoad];
question *question1 = [[question alloc]init];
[question1.imageName initWithContentsOfFile:@"Default.png"];//Will be read from a csv later on, just typing it in manually for a test
testImage = question1.imageName;

}

-(void)imageshow
{
//(UIImage *)testImage;(NSString *)imageNameString; Didnt work
//[self.testImage initWithContentsOfFile:@"%@",questiont.imageName]; - Doesnt work either

[testButton setImage:testImage forState:UIControlStateNormal];

}
-(IBAction)test:(id)sender
{
[self imageshow];
} 
```

此代码失败的地方是当我按下测试按钮时，什么也没有发生（不是崩溃）

我怎样才能正确地做到这一点？（将带有文本文件名的图像添加到 NSObject，然后在按钮/图像视图中显示它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:04:13.297

```
 question1.img = [UIImage imageNamed:@"Default.png"]; 
    [testButton setImage:question1.img forState:UIControlStateNormal]; 
```

是的，您可以尝试以下动态图像

```
 question1.img = [UIImage imageNamed:[NSString stringWithFormat:"%@",imgName]]; 
```

imgName => 是图像的名称而不是图像示例：“abc.png”或“123.png”等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:12:36.157

如果您的属性被命名`imageName`，访问器变量将自动命名`_imageName`。

您在代码中使用了两个不同的变量。

```
@interface question : NSObject
{
   @private
   UIImage *_imageName;
}
@property (nonatomic, retain)UIImage *imageName; 
```

imageName 不是包含图像的属性的好名称。它更适合字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T08:18:13.093

有一些事情需要改变。

仅出于常规原因，所有类名的开头都使用大写字母。它简化了阅读、论坛中的交流和避免错误。第二个名称变量，无论是口语还是抽象，最好是口语。但是不要选择像 imageName 这样的误导性名称。该变量中应该有一个名称，而不是图像，或者可能是显示名称的图形。:)

`imageWithContentsOfFile`需要一个完全限定的文件名。如果`"Default.png`" 是你的边界的一部分，正如我猜的名字一样，那么`imageNamed:@"Default.png"`就可以了。

你`setImage`看起来几乎不错。当您的图像是 时，它当然不能工作`(null)`。但是，此时直接访问 iVar 并不是一个好的商业实践。你应该使用它的 setter/getter。改用：

```
[self.testButton setImage:self.testImage forState:UIControlStateNormal]; 
```

在你的情况下，它并没有太大的区别。但与其他约定类似，当您将代码与您在网络上找到的一些代码混合或在团队中工作时，它有助于避免错误。

# c++ - 函数声明的返回类型中的 & 符号如何工作？

> ID：15106690
> 
> 赞同：26
> 
> 时间：2013-02-27T07:48:09.843
> 
> 标签：c++, function, function-declaration

在这段代码中，为什么 f() 被声明为“double & f(...”？它是什么意思，它是如何工作的？我什至不知道用什么谷歌来找到我的问题的答案。请帮忙。

```
double a = 1, b = 2;
double & f (double & d) {
    d = 4;
    return b;
} 
```

我知道＆符号表示变量或函数的地址，但我不明白为什么在声明函数时编写它是有意义的。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-27T08:03:22.513

考虑这两个函数：`power2()`和`add()`：

```
void power2 (double& res, double x) {
    res = x * x;
}

double& add (double& x) {
    return ++x;
} 
```

第一个计算 的幂`x`并将结果存储在第一个参数 ,`res`中 - 它不需要返回它。

第二个返回一个引用，这意味着以后可以为这个引用分配一个新值。

例子：

```
 double res = 0;

    power2(res, 5);
    printf("%f\n", res);

    printf("%f\n", ++add(res)); 
```

输出：

```
25.000000
27.000000 
```

请注意，第二个输出是`27`，而不是 26 - 这是因为`++`在调用内部使用了`printf()`。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-27T08:03:13.527

当`&`在声明形式中使用运算符时，前面有一个类型，它并不意味着“地址”而是“引用”，它本质上是一个带有禁用指针算法的自动取消引用的指针。

C 中没有引用，所以如果你想通过引用传递或返回，你必须传递一个 const 指针并取消引用它以访问指向的值。C++ 添加了引用以使这个概念更容易，以防止使用指针算术意外离开地址，并节省取消引用指针的需要。这使得使用它变得更加容易，并产生更清晰、更易读的语法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-27T07:51:27.313

在这种情况下，与号并不*意味着*获取地址，而是表示引用。这里，`f`是一个函数，它将对 double 的引用作为参数并返回对 double 的引用。

您可能想在您选择的教科书中阅读有关 C++ 的参考资料，因为它们是该语言的一个非常基本的部分。

# c - 无法访问数组元素？

> ID：15106691
> 
> 赞同：-1
> 
> 时间：2013-02-27T07:48:12.633
> 
> 标签：c

我有这个数组，我试图通过递增 ptr 来访问它的元素，如此处所建议的~~[尝试找到访问数组元素的不同方法？](https://stackoverflow.com/questions/15104339/trying-to-find-different-methods-of-accessing-array-elements)~~...我一定是在做一些愚蠢的事情...请帮助我！

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
   int i;

   char *p1 = "Cnversions";  
   char *p2 = "Divided";  
   char *p3 = "Plain";  
   char *p4 = "Solid";  

   char *arr[3];

   arr[0] = p1;
   arr[1] = p2;
   arr[2] = p3;
   arr[3] = p4;

   for(i=0;i<=3;i++)
   {

      printf("string at arr[%d] is: %s\n",i,*arr);

     arr++;
    }

   return 0;

  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T07:52:03.553

像这样的数组`arr`位于内存中的*特定*位置，因此递增没有意义`arr`（递增数组意味着什么？）

相反，您需要创建一个指向数组开头的指针并递增指针：

```
char **ptr = arr;
for(i=0; i<4; i++) {
    printf("arr[%d] = %s\n", i, *ptr);
    ptr++;
} 
```

（另请注意，您需要使`arr`四个元素变大，即`char *arr[4]`，以容纳您放入其中的四个字符串指针。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-27T08:24:17.933

请记住，尽管我们倾向于将双指针视为数组，但所有编译器都将它们视为指针。当您增加一个指针时，它会向指针的地址添加一个值，该值等于它指向的数据类型的大小。例如：

```
int *p;
p = (int *) malloc(sizeof(int)); 
```

`p`指向 a `int`，因此 的`p`指向数据的大小（通常）为 4 个字节。这意味着当您增加 时`p`，它将指向比以前大 4 个字节的位置。

的类型`arr`是 a `char**`，这意味着它是指向 a 的指针的指针`char`。现在大多数机器上的指针都是 8 个字节。因此，当您增加 时`arr`，您实际上是在告诉计算机设置`arr`为指向比以前高 8 个字节的地址。在 的情况下`arr`，这是一个非法地址，因此您会遇到某种崩溃。

# ruby-on-rails - 将数据从分析引擎发送到 Rails 服务器

> ID：15106692
> 
> 赞同：1
> 
> 时间：2013-02-27T07:48:30.937
> 
> 标签：ruby-on-rails

我有一个分析引擎，它定期以 JSON 格式打包一堆统计数据。我想将这些包发送到 Rails 服务器。当一个包到达时，Rails 服务器应该检查它，从中生成一个模型实例（出于历史目的），然后将内容显示给用户。我想到了两种方法。

1) 有一个与 Rails 服务器位于同一主机上的小应用程序来监听这些包（使用 ZeroMQ）。收到包后，应用程序将通过 CURL 调用 Rails 操作，将包作为参数传递。我对这种方法的担忧是我的 Rails 服务器会检查是否只有登录用户才能访问影响模型的操作。通过创建此侦听应用程序（以及其他实体）可访问的操作，我是否将自己暴露于重大安全漏洞？

2) 第二种方法是让监听应用程序将包转储到一个特殊的数据库表中。Rails 服务器会定期检查该表是否有新的包。一旦检测到一个或多个，它将​​处理它们并将它们从表中删除。

这是我第一次做这样的事情，所以如果你有技术或经验可以分享以获得更好的解决方案，我很乐意学习。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:48:06.853

您可以通过限制 routes.rb 中请求允许的主机名来限制对某个调用的访问

```
post "/analytics" => "analytics#create", :constraints => {:ip => /127.0.0.1/} 
```

如果您希望用户看到更新，您可以使用轮询每隔一分钟左右刷新一次页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:33:42.867

1) 是的，您正在暴露重大安全漏洞，除非：

1.  您的 zeroMQ 应用程序提供了在 rails 端进行身份验证和授权所需的数据
2.  您的 rails 应用程序配置为仅侦听 127.0.0.1 接口，因此无法从外部访问
3.  就像本杰明建议的那样，您将特定路由限制为特定 IP

2) 这种方法看起来很像delayed_job 所做的。您可能想看看那里：[https](https://github.com/collectiveidea/delayed_job) ://github.com/collectiveidea/delayed_job并使用 rake 任务添加新工作。

简而言之，您的监听应用程序将调用一个 rake 任务，该任务将在接收数据包时添加一个自定义的延迟作业。然后让delayed_job 处理负载。您受益于delayed_job 的优点（不同的队列、扩展......）。困难的部分是得到结果。

一种想法是将唯一的 ID 与每个作业相关联，并让 delay_job 任务将结果输出到数据存储中，该数据存储将作业 ID 与结果相关联。这个数据存储可以是一个简单的关系表

```
+----+--------+
| ID | Result |
+----+--------+ 
```

或 memecache/redis/任何实例。您只需轮询该数据存储以查找与作业 ID 关联的结果。并在完成向用户显示后删除所有内容。

3）为什么不直接将数据发布到rails服务器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T14:00:06.847

在 Benjamin 的带领下，我为这个特定的动作实现了一个过滤器。

```
def verify_ip
  @ips = ['127.0.0.1']
    if not @ips.include? request.remote_ip
    redirect_to root_url
  end
end 
```

localhost 上的监听应用程序现在调用该操作，将从分析引擎接收到的 JSON 包作为参数传递。谢谢你。

# ios - AFNetworking POST 无法返回 json 数据

> ID：15106693
> 
> 赞同：1
> 
> 时间：2013-02-27T07:48:35.273
> 
> 标签：ios, networking, post, response, afnetworking

我想用 POST 方法发出请求，然后我希望他们返回 json 数据或`NSDictionary`，但他们只能在成功时返回字符串

像 `NSString *response = [operation responseString];`

任何人都知道如何让他们返回`NSdictionary`而不是`NSString`？

```
-(IBAction)SubmitLogin:(id)sender{
    NSLog(@"Login");
   // NSLog(@"%@",username);

    //START FUNGSI UNTUK POST, PUT, DELETE

    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:signinUrl];
    [httpClient defaultValueForHeader:@"Accept"];

    NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                            @"someuser", @"username",
                            @"somepassword",@"password",
                            nil];

    NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST"
                                                            path:@""
                                                      parameters:params];

 AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [httpClient registerHTTPOperationClass:[AFHTTPRequestOperation class]];

    [operation setCompletionBlockWithSuccess:
     ^(AFHTTPRequestOperation *operation,
       id responseObject) {
         NSString *response = [operation responseString];
         NSLog(@"response: %@",response);
     } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
         NSLog(@"error: %@", [operation error]);
     }];

    //call start on your request operation
    [operation start]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T06:45:02.547

我试图发送 JSON 对象并取回 JSON 数据并解析它

```
NSURL *url = [NSURL URLWithString:@"https://MySite.com/"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc]initWithBaseURL:url];
//[httpClient setParameterEncoding:AFJSONParameterEncoding];
//[httpClient registerHTTPOperationClass:[AFJSONRequestOperation class]];

NSDictionary *params = [NSDictionary dictionaryWithObjectsAndKeys:
                        @"Ans", @"name",
                        @"29",  @"age", nil];
NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST"
                                                        path:@"/testJSONReturn.php"
                                                  parameters:params];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"DATA: %@", [JSON valueForKeyPath:@"data"]);
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Request Failure Because %@",[error userInfo]);
}];

[operation start]; 
```

可能有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:57:07.900

这是我使用的，请随意满足您的需求：

```
-(void) loginWithUserID:(NSString*)usrID User:(NSString*)usr Password:(NSString *)psw Sender:(id)sender
{
    if ([sender respondsToSelector:@selector(startLoading)]){
        [sender performSelector:@selector(startLoading)];
    }

    baseURL = [NSString stringWithFormat:
                  @"http://xxx.xxx.xxx.xxx/test/service.svc/weblogin"];
    NSString* serviceURL = [NSString stringWithFormat:
                           @"%@?userID=%@&user=%@&password=%@",baseURL,usrID,usr,psw;

    NSURL *url = [NSURL URLWithString:[serviceURL stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]];

    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        self.LoginOK = [JSON valueForKeyPath:@"LoginOK"];
        if (LoginOK.intValue == 1) {
            NSDictionary *usrData = [JSON valueForKeyPath:@"userData"];
            userData = [[UserData alloc]init];
            [userData readFromJSONDictionary:usrData];
            NSLog(@"Userdata: %@",userData);
            if ([sender respondsToSelector:@selector(loginSuccessful:)])
            {
                [sender performSelector:@selector(loginSuccessful:)];
            }
        }else{
            UIAlertView *alertView = [[UIAlertView alloc]initWithTitle:@"Error" message:@"No Correct Login Credentials" delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];
            [alertView show];
            ;}

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        if ([sender respondsToSelector:@selector(stopLoading)]){
            [sender performSelector:@selector(stopLoading)];
        }
        [[[UIAlertView alloc] initWithTitle:@"Error"
                                    message:@"Loginservice not available! Check your connection!"
                                   delegate:nil
                          cancelButtonTitle:@"OK"
                          otherButtonTitles: nil] show];
        NSLog(@"Error: %@", error);

    }];

    [operation start];
    }; 
```

编辑：哦，使用

```
-(void)readFromJSONDictionary:(NSDictionary *)d
{

    [self setProperty1:[d objectForKey:@"property1"]];
} 
```

方法将该字典中的所有属性获取到自定义类中。

# wpf - 本地 WPF C# 编程

> ID：15106696
> 
> 赞同：2
> 
> 时间：2013-02-27T07:48:49.943
> 
> 标签：wpf, local

我有一个关于 C# WPF 的项目，我只是按照说明复制和粘贴指令中的代码。我在最后一部分，但不幸的是我在这部分收到了错误：

```
<local:SearchPanel Grid.Column="1" Grid.Row="1"
Visibility="{Binding ElementName=MyMovieDatabaseWindow, Path=IsSearchPaneVisible, Converter={StaticResource VisibilityConverter}}"/> 
```

错误是：

`Error 1 ''local' is an undeclared prefix. Line 138, position 10.' XML is not valid. C:\Documents and Settings\xxxxx\Desktop\WPF Training Lab 1\WPF Training Lab 1\WPF Training Lab 1\MainWindow.xaml 138 10 WPF Training Lab 1`

`Error 2 The type 'local:SearchPanel' was not found. Verify that you are not missing an assembly reference and that all referenced assemblies have been built. C:\Documents and Settings\xxxx\Desktop\WPF Training Lab 1\WPF Training Lab 1\WPF Training Lab 1\MainWindow.xaml 138 10 WPF Training Lab 1`

这是完整的代码：

主窗口.xaml

```
 <Window x:Class="WPF_Training_Lab.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="My Movie Database" Height="Auto" Width="Auto" 
       Icon="Res\Reel.png"
       Background="{x:Static SystemColors.ControlDarkDarkBrush}"
       x:Name="MyMovieDatabaseWindow" xmlns:local="clr-namespace:WPF_Training_Lab_1">
    <Window.Resources>
        <ControlTemplate x:Key="NavButtonTemplate" TargetType="{x:Type Button}">
            <Label Content="{TemplateBinding Property=Content}">
                <Label.Resources>
                    <Style TargetType="{x:Type Label}">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type Label}">
                                    <TextBlock>                        <TextBlock.Resources>
   <Style TargetType="{x:Type TextBlock}">
<Setter Property="TextDecorations" Value="Underline"/>
<Setter Property="FontSize" Value="14"/>
<Setter Property="FontWeight" Value="Bold"/>
   </Style>
</TextBlock.Resources>
<ContentPresenter/>
                                    </TextBlock>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsEnabled" Value="false">
                                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="TextBlock.TextDecorations" Value="Underline" />
                    </Style>
                </Label.Resources>
            </Label>
        </ControlTemplate>
        <!-- Custom Commands -->
        <RoutedUICommand x:Key="Command_NavigateToSearch" Text="Search"/>
        <RoutedUICommand x:Key="Command_NavigateToReview" Text="Review"/>
        <RoutedUICommand x:Key="Command_NavigateToMaintain" Text="Maintain"/>
        <!-- Shared ToolTips-->
        <ToolTip x:Key="TT_NavigateToSearch" Content="Navigate to the Search screen"/>

        <ToolTip x:Key="TT_NavigateToReview" Content="Navigate to the Review screen"/>

        <ToolTip x:Key="TT_NavigateToMaintain" Content="Navigate to the Maintain screen"/>

        <!-- Images/Icons -->
        <Image x:Key="Image_Cut" Source="Res\Cut.png" Height="12" Width="12"/>

        <Image x:Key="Image_Copy" Source="Res\Copy.png" Height="12" Width="12"/>

        <Image x:Key="Image_Paste" Source="Res\Paste.png" Height="12" Width="12"/>

    </Window.Resources>
    <Window.CommandBindings>
        <CommandBinding x:Name="CommandBinding_Close" Command="Close" CanExecute="CommandBinding_Close_CanExecute" Executed="CommandBinding_Close_Executed"/>

        <CommandBinding x:Name="CommandBinding_NavToSearch" Command="{StaticResource Command_NavigateToSearch}" CanExecute="CommandBinding_NavToSearch_CanExecute" Executed="CommandBinding_NavToSearch_Executed"/>

        <CommandBinding x:Name="CommandBinding_NavToReview" Command="{StaticResource Command_NavigateToReview}" CanExecute="CommandBinding_NavToReview_CanExecute" Executed="CommandBinding_NavToReview_Executed"/>

        <CommandBinding x:Name="CommandBinding_NavToMaintain" Command="{StaticResource Command_NavigateToMaintain}" CanExecute="CommandBinding_NavToMaintain_CanExecute" Executed="CommandBinding_NavToMaintain_Executed"/>
    </Window.CommandBindings>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="115"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="25"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Menu Bar -->
        <Menu Height="25" Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="0">
            <MenuItem Header="_File">
                <MenuItem  Command="{StaticResource Command_NavigateToSearch}" Header="{Binding RelativeSource={RelativeSource Self}, Path=Command.Text}" ToolTip="{StaticResource TT_NavigateToSearch}" />
            </MenuItem>
            <MenuItem Header="_Edit">
                <MenuItem Command="{StaticResource Command_NavigateToSearch}" Header="{Binding RelativeSource={RelativeSource Self}, Path=Command.Text}" ToolTip="{StaticResource TT_NavigateToSearch}"/>
                <MenuItem Command="{StaticResource Command_NavigateToSearch}" Header="{Binding RelativeSource={RelativeSource Self}, Path=Command.Text}" ToolTip="{StaticResource TT_NavigateToSearch}"/>
                <MenuItem Command="{StaticResource Command_NavigateToSearch}" Header="{Binding RelativeSource={RelativeSource Self}, Path=Command.Text}" ToolTip="{StaticResource TT_NavigateToSearch}"/>
            </MenuItem>
            <MenuItem Header="_Navigate">
                <MenuItem Command="{StaticResource Command_NavigateToSearch}" Header="{Binding RelativeSource={RelativeSource Self}, Path=Command.Text}" ToolTip="{StaticResource TT_NavigateToSearch}"/>
                <MenuItem Command="{StaticResource Command_NavigateToSearch}" Header="{Binding RelativeSource={RelativeSource Self}, Path=Command.Text}" ToolTip="{StaticResource TT_NavigateToSearch}"/>
                <MenuItem Command="{StaticResource Command_NavigateToSearch}" Header="{Binding RelativeSource={RelativeSource Self}, Path=Command.Text}" ToolTip="{StaticResource TT_NavigateToSearch}"/>
            </MenuItem>

        </Menu>

        <Border Background="AliceBlue" CornerRadius="5" Grid.Column="0"    Grid.Row="1" HorizontalAlignment="Stretch" Margin="4,4,2,4">

            <StackPanel HorizontalAlignment="Stretch">

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0" Cursor="Arrow" Background="Transparent">

                    <Image Source="Res\search.png" Height="14" Width="14" Margin="0,0,5,0"/>
                    <Button  Template="{StaticResource NavButtonTemplate}" HorizontalAlignment="Center" Command="{StaticResource Command_NavigateToSearch}" 
Content="{Binding RelativeSource={RelativeSource Self}, Path=Command.Text}"
ToolTip="{StaticResource TT_NavigateToSearch}"
 />
                </StackPanel>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0" Background="Transparent" Cursor="Arrow">

                    <Image Source="Res\settings_32.png" Height="14" Width="14" Margin="0,0,5,0"/>
                    <Button Template="{StaticResource NavButtonTemplate}" HorizontalAlignment="Center" Command="{StaticResource Command_NavigateToReview}" 
Content="{Binding RelativeSource={RelativeSource Self}, Path=Command.Text}"
ToolTip="{StaticResource TT_NavigateToReview}" />
                </StackPanel>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0" Cursor="Hand" Background="Transparent">

                    <Image Source="Res\gear.png" Height="14" Width="14" Margin="0,0,5,0"/>
                    <Button Template="{StaticResource NavButtonTemplate}" HorizontalAlignment="Center" Command="{StaticResource Command_NavigateToMaintain}" 
Content="{Binding RelativeSource={RelativeSource Self}, Path=Command.Text}"
ToolTip="{StaticResource TT_NavigateToMaintain}" />
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- User controls representing each of the panes the user can navigate to. -->
        <local:SearchPanel Grid.Column="1" Grid.Row="1" Visibility="{Binding ElementName=MyMovieDatabaseWindow, Path=IsSearchPaneVisible, Converter={StaticResource VisibilityConverter}}"/>

    </Grid>

</Window> 
```

SearchPanel.xaml

```
 <UserControl x:Class="WPF_Training_Lab_1.SearchPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             xmlns:converters="clr-namespace:WPF_Training_Lab_2.Converters"
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <RoutedUICommand x:Key="Command_Search" Text="Search"/>
        <BooleanToVisibilityConverter x:Key="boolToVisibilityConverter"/>
        <converters:NotBooleanToVisibilityConverter x:Key="notTheBoolConverter"/>
        <converters:ThumbnailConverter x:Key="thumbnailConverter"/>
        <converters:TextConverter x:Key="textConverter" />
        <converters:TmdbImageConverter x:Key="tmdbImageConverter" />
        <converters:CastMemberConverter x:Key="castMemberConverter"/>

        <!-- Template defining the appearance of each item in the results listbox -->
        <DataTemplate x:Key="SearchResultTemplate">
            <DataTemplate.Resources>
                <ToolTip x:Key="tooltip">
                    <ToolTip.Content>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Click to see details for the movie "/>
                            <TextBlock Text="{Binding DbMovie.Name}"/>
                        </StackPanel>
                    </ToolTip.Content>
                </ToolTip>
            </DataTemplate.Resources>
            <Border CornerRadius="5" Background="LightSteelBlue" BorderBrush="SteelBlue" BorderThickness="1" Margin="2,2,5,2"
MinWidth="285" ToolTip="{StaticResource tooltip}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Image Grid.RowSpan="2" Margin="3" VerticalAlignment="Top" Width="92">
                        <Image.Source>
                            <BitmapImage UriSource="{Binding DbMovie.Images, Converter={StaticResource thumbnailConverter}, ConverterParameter='poster'}"
DecodePixelWidth="92"/>
                        </Image.Source>
                    </Image>
                    <TextBlock Margin="3" Grid.Column="1" Grid.Row="0" Text="{Binding DbMovie.Name}" FontWeight="Bold" TextWrapping="Wrap" />
                    <TextBlock Margin="5,3,3,3" Grid.Column="1" Grid.Row="1" TextWrapping="Wrap" Text="{Binding DbMovie.Overview, Converter={StaticResource textConverter}}" VerticalAlignment="Top" />
                </Grid>
            </Border>
        </DataTemplate>

    </UserControl.Resources>
    <UserControl.CommandBindings>
        <CommandBinding x:Name="CommandBinding_Search" Command="{StaticResource Command_Search}" CanExecute="CommandBinding_SearchCanExecute"
Executed="CommandBinding_SearchExecuted"/>

   </UserControl.CommandBindings>

    <Grid>
        <!-- Search pane at top -->
        <Border x:Name="SearchPane" HorizontalAlignment="Stretch" Margin="2,4,4,4">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="4"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Border Grid.Column="0" Grid.Row="0" HorizontalAlignment="Stretch" CornerRadius="5" Background="AliceBlue" Padding="5">
                    <Grid>
                        <Image Source="Res\Search.png" Height="48" Width="48" HorizontalAlignment="Left"/>
                        <StackPanel Margin="0,0,0,5" HorizontalAlignment="Center">
                            <StackPanel Orientation="Horizontal" Margin="5">
                                <Label Content="Title: " FontWeight="Bold"/>
                                <TextBox x:Name="txtTitleSearch" Width="150" KeyUp="txtTitleSearch_KeyUp" ToolTip="Enter a movie title to search for"  />
                                <Label Content="Year: " FontWeight="Bold" Margin="15,0,0,0"/>
                                <TextBox x:Name="txtYearFilter" Width="50" KeyUp="txtTitleSearch_KeyUp" ToolTip="Enter a year to narrow search results"/>
                            </StackPanel>
                            <Button x:Name="btnSearch" Content="Search" Margin="0,10,0,0" Width="75" Command="{StaticResource Command_Search}"
ToolTip="Click to perform the search"/>
                        </StackPanel>
                        <Image Source="Res\Search.png" Height="48" Width="48" HorizontalAlignment="Right"/>
                    </Grid>
                </Border>
            </Grid>
        </Border>

        <Border Grid.Row="2" CornerRadius="5" Background="AliceBlue" Padding="3">
            <Grid VerticalAlignment="Stretch">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="300" MinWidth="300"/>
                    <ColumnDefinition Width="3"/>
                    <ColumnDefinition Width="0.7*"/>
                </Grid.ColumnDefinitions>
                <Border CornerRadius="5" BorderBrush="LightSteelBlue" BorderThickness="1" Margin="0,0,3,0" Grid.Column="0"
Visibility="{Binding HasSearchResults, Converter={StaticResource boolToVisibilityConverter}}">

                    <ListBox ItemsSource="{Binding SearchResults}" ItemTemplate="{StaticResource SearchResultTemplate}" Grid.Column="0" Margin="-5" MinHeight="250" MinWidth="250" Width="Auto" Background="Transparent" x:Name="lstSearchResults" Padding="5"
BorderBrush="Transparent" ScrollViewer.HorizontalScrollBarVisibility="Disabled" HorizontalContentAlignment="Stretch"/>
                </Border>

                <Border CornerRadius="5" BorderBrush="LightSteelBlue" BorderThickness="1" Margin="0,0,3,0"  Grid.Column="0"
Visibility="{Binding HasSearchResults, Converter={StaticResource notTheBoolConverter}}">
                    <Label VerticalAlignment="Center" HorizontalAlignment="Center" FontWeight="Bold" FontSize="16">No Results</Label>
                </Border>

                <GridSplitter Grid.Column="1" Grid.Row="2" Height="Auto" Width="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"                 Background="LightSteelBlue" />
            </Grid>
        </Border>

    </Grid>
</UserControl> 
```

我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T07:51:55.667

您在 XAML 文件的顶部缺少“xmlns:local”属性。这应该类似于：

```
xmlns:local="clr-namespace:YourAppNamespace" 
```

`YourAppNamespace`包含类的命名空间在哪里`SearchPanel`。

# visual-studio-2010 - 安装项目有空的属性窗口

> ID：15106700
> 
> 赞同：2
> 
> 时间：2013-02-27T07:49:03.300
> 
> 标签：visual-studio-2010, properties, setup-project

嗨，我正在使用 Visual Studio 2010，并且我有一个设置项目。这个项目的属性窗口是空的，我需要它！我尝试了一切，但仍然没有出现。注意：我可以看到窗口，但它是空的。非常感谢！

![在此处输入图像描述](../Images/88c50176d870fa5631eea0357da440c2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-27T01:40:33.347

最初关闭所有窗口会再次显示属性。

然后我注意到单击控件并没有更改属性，尽管选择属性下拉列表来更改控件有效。

重新启动（远程）Windows 7 PC 为我解决了这个问题。

其他要尝试的事情包括：删除 suo 文件、清理项目、重置 VS。

# javascript - 使用 javascript 清除动态创建的组合框选项

> ID：15106703
> 
> 赞同：0
> 
> 时间：2013-02-27T07:49:10.873
> 
> 标签：javascript, dynamic, combobox, options

*   我有一个带有硬编码选项的组合框。
*   我将动态添加剩余的选项

带有硬编码选项的组合框：

```
<select id="connectionname" class="connectionname" onchange="display();"><option>---Select---</option></select> 
```

用于动态创建组合框选项的 Javascript 函数：

```
function showDbDlg(){
    var newar=new Array();
    try{
        var xhrArgs = {
                url: "./ReadDBDetails",
                content: {MODE:"DBNAMES"}, 
                handleAs: "text",
                load: function(response) {
                    var dbNames = response.trim();
                    dbNames=dbNames.substring(0,dbNames.length-1);
                    dbArray=dbNames.split(",");
                    /*var selectValue = document.getElementById("connectionname").value;
                    alert(selectValue);*/
                    document.getElementById("connectionname").options.length = 0;
                    for(var i=0;i<dbArray.length;i++){
                        var newValue = document.getElementById("connectionname").appendChild(document.createElement('option'));
                        newValue.text = dbArray[i];
                    }
                    formDialog.show();
                },
                error: function(error) {
                    alert("An unexpected error occurred: " + error);
                }
        };
        var deferred = dojo.xhrPost(xhrArgs);
    }catch(e){alert(e);}

} 
```

*   在动态创建选项之前，每次都使用下面的行来清除现有选项。
*   `document.getElementById("connectionname").options.length = 0;`
*   它也清除了硬编码选项。
*   我的需要是，我想单独清除动态创建的选项..而不是硬编码的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:59:46.493

你试过这个吗？

```
document.getElementById("connectionname").options.length = 1; 
```

# iphone - 无法通过在 UIPickerView 中选择特定行来获取值

> ID：15106710
> 
> 赞同：0
> 
> 时间：2013-02-27T07:49:50.877
> 
> 标签：iphone, objective-c, uipickerview

我有一个包含国家/地区数组的选择器视图，我的观点是，当用户点击特定行时，我将编写一些代码取决于用户选择的元素，但是，不知何故它不起作用，请看这个：

```
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{

   if ([countries objectAtIndex:0]){
        NSLog(@"You selected USA");
    } 
} 
```

但问题是，在 NSLog 中总是“你选择了美国”，不管我选择了哪一行。但是，当我把那行代码放在这里时：

```
 NSLog(@"You selected this: %@", [countries objectAtIndex:row]); 
```

它在控制台中显示我选择了哪个国家/地区。但是当用户点击特定行时我需要做一些事情，我无法理解如何做到这一点，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:52:31.807

快速回答：你应该使用

`if ([[countries objectAtIndex:row] isEqualToString:@"USA"]) ...`

不错的答案：

定义一个枚举并使用 switch-case 结构：

```
// put this in the header before @interface - @end block

enum {
    kCountryUSA     = 0, // pay attention to use the same 
    kCountryCanada  = 1, // order as in countries array
    kCountryFrance  = 2,
    // ...
    };

// in the @implementation:

-(void)pickerView:(UIPickerView *)pickerView
     didSelectRow:(NSInteger)row
      inComponent:(NSInteger)component
{
    switch (row) {
        case kCountryUSA:
            NSLog(@"You selected USA");
            break;

        case kCountryCanada:
            NSLog(@"You selected Canada");
            break;

        case kCountryFrance:
            NSLog(@"You selected France");
            break;

            //...

        default:
            NSLog(@"Unknown selection");
            break;
    }
} 
```

# wordpress - 如何使我的自定义 wordpress 主题在所有页面上保持一致？

> ID：15106712
> 
> 赞同：0
> 
> 时间：2013-02-27T07:49:52.833
> 
> 标签：wordpress

如何使我的自定义 wordpress 主题在所有页面上保持一致？主页看起来不错，但是当我转到其他页面时，标题和布局已经不像主页了。

截图。主页

[http://i.imgur.com/hkXZV0u.jpg](http://i.imgur.com/hkXZV0u.jpg)

当我转到其他页面时

[http://i.imgur.com/m5n3QqU.jpg](http://i.imgur.com/m5n3QqU.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:04:20.157

文档是您的朋友：[http](http://codex.wordpress.org/Main_Page) ://codex.wordpress.org/Main_Page 。硒部分`Learn How to Use WordPress`和`Working With Themes`:)

您必须了解起始页通常总是有一个模板。一个页面和一个帖子也是如此。

当你打开一个页面时，`page.php`被触发，当你打开一个帖子时，`post.php`被触发。他们可能都有不同的布局。

# python - 非常非常大的数 Python

> ID：15106713
> 
> 赞同：3
> 
> 时间：2013-02-27T07:49:56.037
> 
> 标签：python, biginteger

我搜索了数据库和食谱，但似乎找不到正确的答案。我有一个非常简单的 python 代码，它总结了一个范围内的自我权力。我需要这个非常非常大的数字的最后十位，我已经尝试了 getcontext().prec 但是我仍然遇到了限制。

这是代码：

```
def SelfPowers(n):
      total = 0
      for i in range(1,n):
          total += (i**i)
      return(total)

print SelfPowers(n) 
```

我怎样才能看到所有这些漂亮的数字？它在我的四核上打印速度相对较快。这只是为了 ProjectEuler 的乐趣，问题 #48，请不要剧透我不想要解决方案，我不希望为我完成工作，所以如果你能指出我正确的方向吗？

谢谢，议员

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T07:54:54.220

如果你想要一个数字的*最后十位*，不要计算整个数字（这会占用太多的内存和时间）。

取而代之的是，考虑使用“三参数”的形式`pow`来计算特定基数的幂，您会发现问题要容易得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T07:55:01.937

在 Python 3.2 上测试我能够

```
print(SelfPowers(10000)) 
```

虽然花了几秒钟。你想的是多大的数字？

**编辑：**看起来你想使用`1000`？在这种情况下，升级到 Python 3 就可以了。

# jquery - 第二个 td 中的 jQuery div 文本

> ID：15106714
> 
> 赞同：0
> 
> 时间：2013-02-27T07:49:59.283
> 
> 标签：jquery, html-table

我想在 tr 中的第二个 td 中获取 div 中的文本（在我的示例中为 firstName）。这是我尝试过的，但它给了我空值。

我在下面尝试了所有但没有人在工作..这是完整的代码（此表在弹出窗口中）：

```
$(document).ready(function() {
$('#listings_row_landlord').dataTable();
}); 
```

这个警报代码：

```
var first_name  = $('#'+value).find("td:eq(1) div").html(); 

<table width="100%" cellspacing="0" cellpadding="0" align="center" style=" border-radius:0px;" id="listings_row_landlord" class="display">
  <thead bgcolor="#E5E5E5" align="left" style="font-size:12px;" class="listing_headings">
  <tr><th width="20" style="text-align:center; width:20px;" class="sorting_desc" rowspan="1" colspan="1"></th><th class="sorting" rowspan="1" colspan="1" style="width: 94px;">First Name</th><th class="sorting" rowspan="1" colspan="1" style="width: 92px;">Last Name</th><th class="sorting" rowspan="1" colspan="1" style="width: 86px;">Mobile No</th><th class="sorting" rowspan="1" colspan="1" style="width: 83px;">Phone No</th><th class="sorting" rowspan="1" colspan="1" style="width: 50px;">Email</th><th class="sorting" rowspan="1" colspan="1" style="width: 95px;">Created By</th><th class="sorting" rowspan="1" colspan="1" style="width: 108px;">Assigned To</th><th class="sorting" rowspan="1" colspan="1" style="width: 59px;">Listed</th></tr></thead>

<tbody>
<?php
             while ( $rw = $oAppl->row($rs) ) {
             ?>

<tr id="<?php echo $rw["id"]; ?>" class="listing_rows odd"><td class=" sorting_1"><div id="item_action" style="text-align:center; width:22px;"><input type="radio" value="<?php echo $rw["id"]; ?>" id="checkbox_<?php echo $rw["id"]; ?>" name="select_landlord"></div></td>

<td>

<div style="width:100px;"><?php echo $rw["fname"]; ?> </div></td>

<td><div style="width:100px;"><?php echo $rw["lname"]; ?></div></td><td><div style="width:160px;"><?php echo $rw["mobile"]; ?></div></td><td><div style="width:150px;"><?php echo $rw["phone"]; ?></div></td><td><div style="width:180px;"><?php echo $rw["email"]; ?></div></td><td><div style="width:100px;">Admin Admin</div></td><td><div style="width:100px;">Admin Admin</div></td><td><div style="width:80px;"><?php echo $rw["created_date"]; ?></div></td></tr>
 <?php
               }
               ?>
</tbody></table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T07:52:00.750

使用[**eq()**](http://api.jquery.com/eq/)这是`zero-based`索引，因此您需要将索引 1 用于第二个 td 而不是 2。

**[现场演示](http://jsfiddle.net/JdUqR/1/)**

```
var first_name  = $('#'+value).find("td:eq(1) div").html(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:52:06.713

```
 $('#listings_row_landlord #'+value).find("td:eq(1)").text(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T07:56:22.877

这有点短，但是 adil 和 adeneo 非常简洁，恕我直言。

```
var first_name  = $('#'+value).find("td:eq(1) > div").html(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T08:03:57.253

试试这样的东西，也检查一下这个[小提琴](http://jsfiddle.net/ams4y/)

**HTML 代码**

```
 <table>
    <tr id="1" class="listing_rows odd">
       <td class=" sorting_1">
          <div id="item_action" style="text-align:center; width:22px;">
           <input type="radio" value="1" id="checkbox_1" name="select_landlord" />
          </div>
      </td>
      <td>
          <div style="width:100px;">firstName </div>
     </td>
  </tr>
</table> 
```

**JS代码**

```
 $(function(){
    alert($('#1 td:nth-child(2) div').html());
  }) 
```

用你的代码检查这个[小提琴](http://jsfiddle.net/CHke3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T08:26:37.940

我解决了这个问题。静态地它运行良好，但动态地它不是......我只是给 div 动态 id 并获取它的 html......它工作得很好......谢谢大家的支持

# mysql - Delphi + Zeos上的临时自增列，多次查询失败？

> ID：15106721
> 
> 赞同：1
> 
> 时间：2013-02-27T07:50:16.467
> 
> 标签：mysql, delphi, zeos

假设我有一个非常简单的表：

```
CREATE TABLE Bands (Name VARCHAR(20) NOT NULL) ENGINE = INNODB;
INSERT INTO Bands VALUES ('Hammerfall'), ('Helloween'), ('Haggard'),
                         ('Therion'), ('Tarja'); 
```

并运行查询：

```
SET @i := 0;
SELECT @i := @i + 1 No, Name
FROM Bands
WHERE Name LIKE 'H%' 
```

在 HeidiSQL 和 PhyMyAdmin 上运行良好：

```
1 Hammerfall
2 Helloween
3 Haggard 
```

但在 Delphi 2009 中失败并出现错误

> SQL 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'SELECT @i := @i + 1 No, Name FROM Bands WHERE Name LIKE 'H%' 附近使用正确的语法

我在 TZQuery.SQL 框中编写查询，*Query* .SQL.Text 和*Query* .SQL.Add()。都失败了。

有没有办法运行该查询？

我将使用的真正查询是加入一些 20 多列的表以生成一些报告。但我什至不能让这个小东西起作用~~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T18:45:25.343

正如评论者所说，问题是双重的。

1.  您不能在单个 SQL 中执行 2 条语句（这是对 SQL 注入的保护）。

2.  你不能使用`:`if `TQuery.CheckParams = true`。

请注意，让 InnoDB 表没有显式主键是一个坏主意。
问题是，如果您不创建 PK，MySQL 将为您创建一个隐藏的 PK，这会降低连接性能。

如果您希望 InnoDB 高效运行，建议创建

```
integer primary key auto_increment 
```

每个表中的字段。

# batch-file - 批处理文件夹创建并命名

> ID：15106729
> 
> 赞同：1
> 
> 时间：2013-02-27T07:50:40.827
> 
> 标签：batch-file, directory

我正在尝试创建一个 bat 文件来创建文件夹。这是我需要增强的脚本的当前版本。

```
md Project
md Project\Work
md Project\Deliver 
```

这是我的问题：

当我运行 bat 时，它当前会创建一个文件夹作为“项目”。相反，脚本应该询问我需要创建的文件夹的名称。我的命名约定是：YYAADD_projectname

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:02:42.990

您可以使用以下 bat 脚本执行此操作。让我知道它是否不起作用。

反正我不知道你YYAADD_的肉。如果 YEAR MONTH 和 DATE 是 YYMMDD_，则必须相应地更改脚本。

```
@echo off
set /p dname= Enter Directory Name?
md YYAADD_%dname%
md YYAADD_%dname%
md YYAADD_%dname%\Work
md YYAADD_%dname%\Deliver 
```

以下是您稍后在评论中提到的 YYMMDD 部分。

```
@echo off
FOR /F "TOKENS=1* DELIMS= " %%A IN ('DATE/T') DO SET CDATE=%%B
FOR /F "TOKENS=2,3 DELIMS=/ " %%A IN ('echo %CDATE%') DO SET yy=%%B
FOR /F "TOKENS=1,2 eol=/ DELIMS=/ " %%A IN ('DATE/T') DO SET mm=%%B
FOR /F "TOKENS=1,2 DELIMS=/ eol=/" %%A IN ('echo %CDATE%') DO SET dd=%%B
SET SUBSTRING=%yy:~2,2%
SET date=%SUBSTRING%%mm%%dd%

set /p dname= Enter Directory Name?
md %date%_%dname%
md %date%_%dname%
md %date%_%dname%\Work
md %date%_%dname%\Deliver 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:57:57.153

试试这个 ：

```
@echo off

set /p id="Enter Project Name: " %=%
md "Project"\%id% 
```

# certificate - 我可以将公司的时间戳服务器与自签名证书一起使用吗？

> ID：15106734
> 
> 赞同：2
> 
> 时间：2013-02-27T07:50:57.350
> 
> 标签：certificate, self-signed, silverlight-oob, out-of-browser, timestamping

我有兴趣使用自签名证书签署我的 Silverlight XAP，以便它可以自动更新。我还没有尝试过，但我想我可以用[我在 StackOverflow 上找到的这个问题/答案](https://stackoverflow.com/questions/84847/how-do-i-create-a-self-signed-certificate-for-code-signing-on-windows)轻松地创建一个证书。

但是我不清楚时间戳服务器的作用，我可以使用公司的时间戳服务器（例如[Comodo 的那个](http://timestamp.comodoca.com/authenticode)），即使我没有从他们那里购买证书，而是自签名我的证书？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T09:15:00.077

将点点滴滴放在一起，我找到了[BruceCran](https://stackoverflow.com/users/76093/brucecran)[的以下答案](https://stackoverflow.com/questions/2872105/alternative-timestamping-services-for-authenticode)：

> 可以使用任何时间戳服务器：我最近从发行人的时间戳服务器切换到 Verisign，因为我发现 GlobalSign 的服务器不可靠。此外，Thawte 不运行自己的时间戳服务器，但建议人们使用 Verisign 的。

所以，是的，我假设我可以使用任何时间戳服务器。

至于时间戳服务器的作用，[Comodo 对此进行了解释](http://www.instantssl.com/code-signing/code-signing-faq.html)：

> 由于密钥对基于可以通过大量时间和精力破解的数学关系，因此数字证书应过期是一项公认的安全原则。您的数字身份证将在签发一年后过期。但是，大多数软件的使用寿命都超过一年。为了避免每次证书过期时都必须退出软件，公司引入了时间戳服务。当您签署代码时，您的代码的哈希将被发送到证书颁发机构以加盖时间戳。一旦您的软件被加盖时间戳，您就无需担心在您的数字 ID 过期时退出代码。Microsoft Authenticode 允许您对已签名的代码进行时间戳记，以便在您的证书过期时签名不会过期。

所以你的证书过期了，但你的代码没有。

# python - 带有 Jinja2 (Flask) 模板引擎的参数化可重用块

> ID：15106741
> 
> 赞同：8
> 
> 时间：2013-02-27T07:51:14.957
> 
> 标签：python, flask, jinja2

在 Jinja2 模板引擎（使用 Flask）中，我想实现这样的目标：

```
{% reusable_block avatar(user) %}
     <img src='{{ user.avatar }}' title='{{ user.name }}'/> 
{% reusable_block %} 
```

然后在各个地方：

```
{% for u in users %}
    {% call avatar(u) %}
{% endfor %} 
```

`reusable_blocks`但是我在 Jinja 文档中找不到这样的功能（我弥补了这个问题）。我需要的基本上是可以带参数的可重用块。有什么想法知道我怎么能用 Jinja2 做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-27T08:30:50.423

您可以使用宏。

```
{% macro input(name, value='', type='text', size=20) -%}
    <input type="{{ type }}" name="{{ name }}" value="{{value|e }}" size="{{ size }}">
{%- endmacro %}

<p>{{ input('username') }}</p>
<p>{{ input('password', type='password') }}</p> 
```

更多文档[在这里](http://jinja.pocoo.org/docs/templates/#macros)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T08:28:58.207

我认为您正在寻找[宏](http://jinja.pocoo.org/docs/templates/#macros)

# php - 实时 HTML/AJAX/PHP 聊天的最佳方式

> ID：15106745
> 
> 赞同：4
> 
> 时间：2013-02-27T07:51:24.723
> 
> 标签：php, ajax, real-time, comet

我必须在我的 Web 应用程序中创建一个小 AJAX 聊天，并且我正在处理 javascript 客户端和 PHP 服务器之间的实时通信问题。我希望我的 js 客户端能够尽快从服务器捕获新消息。我的第一个想法是例如每 5 秒创建一次 AJAX 请求。查看是否有新消息。但是，我不确定如果我的应用程序使用例如 1000 人会发生什么，这对 Apache httpd 来说一定是巨大的负载。我也知道称为“长轮询”请求的技术，但是当我在我的服务器上本地尝试时，我已经完全关闭了我的 Apache（我已经阅读了有关 apache 和长轮询问题的信息）。我知道的下一个方法是 WebSocket。但是，我必须能够在网络服务器上打开端口才能使用它吗？因为在常规的虚拟主机上，我认为这是不可能的，我无法更改主机上的任何 Apache/PHP 设置。你对如何解决它有什么建议吗？

谢谢你，请原谅我的英语，我不是本地人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:09:09.740

它是实时评论系统。您可以将其用作聊天 [实时聊天](http://tutorialzine.com/2010/06/simple-ajax-commenting-system/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:34:21.300

您应该使用 php comet 并从服务器推送而不是执行请求。

[也看看这个问题](https://stackoverflow.com/questions/1320542/simple-comet-example-using-php-and-jquery)

# android - 如何覆盖短信铃声

> ID：15106748
> 
> 赞同：0
> 
> 时间：2013-02-27T07:51:32.357
> 
> 标签：android, notifications, sms, ringtone

我想做的事：将我的铃声设置为来电，`SMS`即使`SMS app`.

我尝试了什么： 在`SMS reciever`中，我设置了音量，`STREAM_NOTIFICATION to 0`然后尝试通过 将我的铃声作为媒体播放`MediaPlayer`。

所以基本上是这样的：

```
am.setStreamVolume(AudioManager.STREAM_NOTIFICATION, 0, 0);
MediaPlayer mp = MediaPlayer.create(context, notifUri);
mp.start();
int duration = mp.getDuration() + 3000;  //Margin
try {
   Thread.sleep(duration);
 } catch (InterruptedException e) {
 }
am.setStreamVolume(AudioManager.STREAM_NOTIFICATION, beforOverrideNotifVol, 0); 
```

发生了什么：我的自定义铃声播放了，但在此之后，`sms-app`声音也响了。我尝试向线程添加更多睡眠（让短信应用在后台播放），但它只是等待音量恢复然后播放铃声。

起初我试过这个：

```
 RingtoneManager.setActualDefaultRingtoneUri(...) 
```

但它不会覆盖应用程序设置，它只会在短信应用程序中选择铃声时覆盖通知声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:14:15.973

对我来说 Ringtonemanger.setDefaultRingtoneUri 工作

尝试使用它来选择铃声然后设置它

```
 private void chooseTone(int Id) {
    Intent intent = new Intent(RingtoneManager.ACTION_RINGTONE_PICKER);
    intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TYPE,
            RingtoneManager.TYPE_RINGTONE);
    intent.putExtra(RingtoneManager.EXTRA_RINGTONE_TITLE, "Select Tone");
    intent.putExtra(RingtoneManager.EXTRA_RINGTONE_EXISTING_URI, (Uri) null);
    MainActivity.this.startActivityForResult(intent, NotificationId);
}

@Override
protected void onActivityResult(int requestCode, int resultCode,
        Intent intent) {
    if (resultCode == Activity.RESULT_OK) {
        Uri uri = intent
                .getParcelableExtra(RingtoneManager.EXTRA_RINGTONE_PICKED_URI);
        Log.d(TAG, "Notification Tone: " + uri);

            if (uri != null)
                this.chosenRingtone = uri;
    }} 
```

然后最后设置铃声 RingtoneManager.setActualDefaultRingtoneUri(MainActivity.this, RingtoneManager.TYPE_RINGTONE, selectedRingtone);

# asp.net - ASP.NET 渐进式页面加载

> ID：15106750
> 
> 赞同：1
> 
> 时间：2013-02-27T07:51:38.193
> 
> 标签：asp.net, pageload

我正在开发一个 ASP.NET 网站，我创建了一个加载大量数据的新页面，因此加载整个页面需要一些时间，但我将逐步加载我的页面，这样每当用户下线时，就会加载更多页面细节（例如谷歌图片搜索或 Facebook 页面），我有什么选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:56:24.917

严格来说，您所描述的不是渐进式页面加载-实际上是指浏览器在页面完成下载之前（即在它到达`</html>`结束标记之前）呈现页面的能力。

无论如何，显然 jQuery 是您的第一个也是最明显的解决方案 - 定义一个简单的 Web 服务方法（我强烈建议使用 ASP.NET MVC 而不是 WebForms），它是来自您的 jQuery 代码的 AJAX 调用。我建议返回 JSON，它可以让您更灵活地控制客户端呈现。

我强烈建议不要在窗口滚动事件上加载更多数据——这是一种非常糟糕的用户体验（即用户希望到达页面底部，而不是让它跳开）。相反，我建议使用一个大按钮，上面写着“加载更多”）。

为了不支持脚本和任何爬虫的客户端，我还建议在 ASP.NET 返回的初始 HTML 中返回第一批结果。另外，这意味着用户不必等待页面返回，然后再次等待 AJAX 调用完成。

# java - java中的mysql转储不起作用

> ID：15106751
> 
> 赞同：0
> 
> 时间：2013-02-27T07:51:39.123
> 
> 标签：java, mysql

我在java中尝试这个命令

```
executeCmd = DBConfig.dbLocation + "\\mysqldump -u " + mysqlUser +
    " -p"+DBConfig.dbPass + " " + DBConfig.dbName + 
    " -r -opt>supervisorDbBkup.sql"; 
```

它给了我代码 1 而不是 0

```
 String executeCmd = "";
    executeCmd = DBConfig.dbLocation+"\\mysqldump -u"+mysqlUser+
            " -p"+DBConfig.dbPass+" "+DBConfig.dbName+" -r -opt>supervisorDbBkup.sql";

    Process runtimeProcess =Runtime.getRuntime().exec(executeCmd);
    int processComplete = runtimeProcess.waitFor();
    if(processComplete == 0){
        return "Backup taken successfully";
    } else {
        return "Could not take mysql backup";
    } 
```

这是我正在运行的命令：

```
 E:\program file\MySQL\MySQL Server 5.5\bin\mysqldump -uroot -p0502 dashboardsupervisor -r -opt>supervisorDbBkup.sql 
```

任何的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:58:49.787

您需要做的是`executeCmd`在构建它之后打印出它的内容，以查看它包含的内容，例如：

```
Console.Out.WriteLine (executeCmd); 
```

如果该命令不能在命令行中完全按照您构建它的方式工作，那么它不太可能在您的程序中工作。*完全*按照输出的内容复制和粘贴命令，并尝试从`cmd`shell 执行它。

我怀疑您的问题在于可执行文件的路径或选项之一。

如果不是这种情况，则需要注意重定向。重定向是一种*外壳*功能，可能对呼叫不可用`Runtime.exec()`。您会发现重定向位被作为参数传递给`mysqldump`完全无法理解的可执行文件。

执行此操作的常用方法是使用参数调用 shell 本身，告诉它如何运行命令和正确重定向，例如：

```
String[] cmd = {"/bin/sh", "-c", "/path/to/mysqldump blah blah >/tmp/tempout"};
Process p = Runtime.getRuntime().exec(cmd); 
```

（或 Windows 的等效`cmd /c`项）。

这确保了重定向被正确处理（由 shell 本身）并且`mysqldump`可执行文件只获取它理解的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:59:27.843

尝试以下

```
executeCmd = "<Absolute Path to MYSQL>\bin" + "\\mysqldump -u " + mysqlUser +
    " -p"+DBConfig.dbPass + " " + DBConfig.dbName + 
    " -r --opt > supervisorDbBkup.sql"; 
```

**更新：**

-opt 不是 mysqldump 的选项，以下是

```
--opt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T18:02:20.137

尝试使用此命令“C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqldump -u username -pPASS_WORD database_name -r backup.sql”

注意 -u 和用户名以及 -p 和密码之间的空格（-p 和密码之间应该没有空格）。它对我有用。

# xpages - Xpages：响应文档的奇怪行为

> ID：15106765
> 
> 赞同：0
> 
> 时间：2013-02-27T07:52:21.560
> 
> 标签：xpages, xpages-ssjs

我有 2 个按钮，button1（为新的主文档创建响应文档）和 button2（为现有的主文档创建响应文档）当我第一次创建新的主“MyBirthday”文档并创建响应时，只有 1即使我尝试创建更多响应文档，也会创建响应文档。这是我隐藏 button1 的时候，它在调用 create-responseDoc 函数之前保存主文档。

对于响应文档的第二个或更多条目，我创建了 button2 直接调用 create-responseDoc 函数，因为我的主文档已经保存。单击 button2 不会影响任何内容。它不会创建响应。但是，如果我关闭并重新打开文档.. 同样的事情可以正常工作。我发现很难理解幕后实际发生的事情！

这应该很简单，但我被困在代码或我的理解中。我的问题在这里：我有一个主文档“MyBirthday”。我想创建链接到 MyBirthday 的响应文档“MyFamily Birthday”。我想要这个而不提交我的主文档（我可以保存它）。

我做了什么：我为家庭生日创建了生日 xpage 和 2 个字段。单击“创建响应文档 1”按钮后，首先我使用简单的操作保存主文档。然后我通过 SSJS 中的函数创建响应文档。

我创建了 2 个类似的按钮（第一个用于新文档，第二个用于现有文档）：1 个位于上方，它将首先保存主文档，然后调用此函数，另一个按钮不会保存主文档，但会调用并创建响应。

功能如下：

```
function fncCreateResponseDoc(currDoc:NotesDocument)
{
    var name = sessionScope.get("FNAME")
    var Bday = sessionScope.get("FBIRTH")
    var respDoc:NotesDocument = database.createDocument()
    respDoc.replaceItemValue("Form","rfFamily") 
    respDoc.replaceItemValue("FName",name)
    respDoc.replaceItemValue("FBirthday",Bday)
    respDoc.makeResponse(currDoc)
    respDoc.save()
    respDoc = null
} 
```

然后就在下面，我重复查看这些响应文档。重复的数据绑定公式如下 ->`currentDocument.getDocument().getResponses()`

在保存主文档之前，我设置了 sessionScope 变量：

```
sessionScope.put("FNAME",currentDocument.getItemValueString("FName"))
sessionScope.put("FBIRTH",currentDocument.getItemValueDateTime("FBirthday")) 
```

然后在这个document1的postSaveDocument事件中：

```
var currDoc:NotesDocument = currentDocument.getDocument(true)
fncCreateResponseDoc(currDoc) 
```

请帮忙 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:43:22.800

Ravi，很可能您的 currDoc 没有 docid，因为它尚未保存。添加一个 currDoc。`save();`一开始你的功能。`respDoc.recyle();`在将其设置为空之前还要添加。此外，为您遗漏的每一个都烧一个 jostick `;`（不要试图争论那个 <vbg>）。

让我们知道怎么回事。

# forms - 教义约束：自定义验证器是否也在 JavaScript 中实现？

> ID：15106767
> 
> 赞同：0
> 
> 时间：2013-02-27T07:52:25.610
> 
> 标签：forms, symfony, validation

我在文件中创建了自己的 Form 类`src/HQF/Bundle/PizzasBundle/Form/Type/VilleType.php`

真的很短：

```
<?php

namespace HQF\Bundle\PizzasBundle\Form\Type;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;

class VilleType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {   
        $builder->add('cp', 'text', array('max_length' => 5));
    }
    public function getDefaultOptions(array $options)
    {   
        return array(
            'data_class' => 'HQF\Bundle\PizzasBundle\Entity\Ville',
        );
    }
    public function getName()
    {   
        return 'ville';
    }
} 
```

现在我已经在文件中创建了我的验证器`src/HQF/Bundle/PizzasBundle/Validator/Constraints/FrenchPostalCodeValidator.php`。它可以工作，所以，简而言之，这里是验证器类的代码：

```
<?php

namespace HQF\Bundle\PizzasBundle\Validator\Constraints;

use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;

class FrenchPostalCodeValidator extends ConstraintValidator
{
    public function validate($value, Constraint $constraint)
    {   
        if (!preg_match('/^([0-9]{5}|2[A|B])$/', $value, $matches)) {
            $this->context->addViolation(
                $constraint->message,
                array('%string%' => $value)
            );  
        }   
    }   
} 
```

这只是一个简单的正则表达式。当在表单中，我说`array('max_length' => 5)`在客户端添加了一些 JavaScript 验证。这很好。有没有办法添加自定义验证器，以便它们也被添加到客户端。我猜是`array('max_length' => 5, 'FrenchPostalCode')`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:08:53.137

Symfony2 中没有内置的 JavaScript 验证。您所说的是浏览器直接支持的[HTML5 表单验证——不涉及 JavaScript。](http://www.w3.org/html/wg/drafts/html/master/forms.html#the-maxlength-attribute)

There is the [`pattern` attribute](http://www.w3.org/html/wg/drafts/html/master/forms.html#the-pattern-attribute) you could try to use to implement the validation you need. If it doesn't solve the problem, you'll have to use JavaScript.

# android - 在没有用户交互的情况下在 Android 中发送电子邮件

> ID：15106774
> 
> 赞同：9
> 
> 时间：2013-02-27T07:52:56.727
> 
> 标签：android, email

我想使用用户已经设置的任何默认邮件提供商在我的应用程序中发送电子邮件。必须能够在不需要任何用户交互的情况下发送电子邮件。如果我可以避免显示任何 UI，那将是最好的解决方案。不可接受的一件事是硬编码或要求用户输入他们的电子邮件凭据。用户必须已经使用他们的凭据设置了他们的帐户，例如 Gmail。我的应用程序所做的只是使用已设置的现有电子邮件提供商。

我在这里找到的大多数帖子都使用 Intent，但据我了解，这将显示电子邮件 UI 并要求用户按下发送按钮。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T08:54:22.333

After some more digging around, I think there is a solution. Google has now added support for Gmail authentication using OAuth 2.0 which avoids the need to access the user's username and password. Since my app will require the user to have a Gmail account, this might be the solution. Of course this won't work for any other e-mail provider that doesn't support OAuth but since Google is concerned about protecting username/passwords, this approach seems to be right. Need to look into how to use OAuth from within my app, but theoretically it should be possible. Once a user grants permission to a Google service, the app receives a token that is used for the lifetime that the permission remains. The question that is still unresolved is whether Gmail supports sending an e-mail using OAuth:

[Google Brings OAuth 2.0 Support To Gmail And Google Talk To Make Third-Party Apps More Secure](http://techcrunch.com/2012/09/17/google-oauth-2-0-for-gmail-and-talk/)

[OAuth2 Support for Gmail](https://developers.google.com/google-apps/gmail/oauth_overview)

[Google's sample code for Gmail support and OAuth2](https://developers.google.com/google-apps/gmail/xoauth2_libraries)

[Android app demonstrating how to send e-mail using OAuth](https://play.google.com/store/apps/details?id=com.tinywebgears.gmailoauth)

[YouTube video showing how a mobile app uses 2 step verification in an app](http://www.youtube.com/watch?v=zMabEyrtPRg&t=2m13s)

[Android docs on using OAuth 2.0](http://developer.android.com/training/id-auth/authenticate.html)

[Code sample to send e-mail using OAuth2](https://stackoverflow.com/questions/12503303/javamail-api-in-android-using-xoauth)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T04:55:32.583

试试这个代码...

```
public class SendAttachment{
                        public static void main(String [] args){ 
                 //to address
                        String to="abc@abc.com";//change accordingly
                        //from address
                        final String user="efg@efg.com";//change accordingly
                        final String password="password";//change accordingly 
                         MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap();
                       mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");
                      mc.addMailcap("text/xml;; x-java-content-handler=com.sun.mail.handlers.text_xml");
                      mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");
                      mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed");
                      mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");
                      CommandMap.setDefaultCommandMap(mc); 
                      //1) get the session object   
                      Properties properties = System.getProperties();
                      properties.put("mail.smtp.port", "465"); 
                      properties.put("mail.smtp.host", "smtp.gmail.com");
                        properties.put("mail.smtp.socketFactory.port", "465");
                        properties.put("mail.smtp.socketFactory.class",
                                "javax.net.ssl.SSLSocketFactory");
                        properties.put("mail.smtp.auth", "true");
                        properties.put("mail.smtp.port", "465");

                      Session session = Session.getDefaultInstance(properties,
                       new javax.mail.Authenticator() {
                       protected PasswordAuthentication getPasswordAuthentication() {
                       return new PasswordAuthentication(user,password);
                       }
                      });

                      //2) compose message   
                      try{ 
                        MimeMessage message = new MimeMessage(session);
                        message.setFrom(new InternetAddress(user));
                        message.addRecipient(Message.RecipientType.TO,new InternetAddress(to));
                        message.setSubject("Hii"); 
                        //3) create MimeBodyPart object and set your message content    
                        BodyPart messageBodyPart1 = new MimeBodyPart();
                        messageBodyPart1.setText("How is This"); 
                        //4) create new MimeBodyPart object and set DataHandler object to this object    
                        MimeBodyPart messageBodyPart2 = new MimeBodyPart();
                    //Location of file to be attached
                        String filename = Environment.getExternalStorageDirectory().getPath()+"/R2832.zip";//change accordingly
                        DataSource source = new FileDataSource(filename);
                        messageBodyPart2.setDataHandler(new DataHandler(source));
                        messageBodyPart2.setFileName("Hello"); 
                        //5) create Multipart object and add MimeBodyPart objects to this object    
                        Multipart multipart = new MimeMultipart();
                        multipart.addBodyPart(messageBodyPart1);
                        multipart.addBodyPart(messageBodyPart2); 
                        //6) set the multiplart object to the message object
                        message.setContent(multipart ); 
                        //7) send message 
                        Transport.send(message); 
                       System.out.println("MESSAGE SENT....");
                       }catch (MessagingException ex) {ex.printStackTrace();}
                      }
                    } 
```

# neural-network - 为神经网络中的前馈算法优化我的 Verilog 代码

> ID：15106775
> 
> 赞同：1
> 
> 时间：2013-02-27T07:52:56.967
> 
> 标签：neural-network, verilog

编辑：

感谢所有的建议。我应该更好地把这个放在我原来的问题中，很抱歉不清楚。行 prod[0] <= prod[0] + input[0] x weight1[i]; 最多 prod[25] 被执行超过 200 个时钟周期。但是，这 26 次乘法确实是并行发生的。一次太多了，还是我需要在一个时钟周期内进行 1 次乘法（32 位 x 32 位），这意味着在 200 x 26 时钟周期内进行所有 200 x 26 次乘法？

此外，我有 6 个阶段来完成整个过程：

1.  26 个并行矩阵乘法重复 200 次（200 个时钟周期）。

2.  设置一个控制标志，以便由具有大约 200 个元素的 LUT 组成的激活模块可以执行其操作并发送结果。每个神经元重复 25 次（超过 25 个时钟周期）。

3.  重置标志以停止激活功能。重置计数器和一切为下一部分做准备。

4.  3 次并行矩阵乘法重复 25 次（25 个时钟周期）。

5.  再次调用激活函数。

6.  找出从 6 中获得的三个值的最大值，以确定输出应该是什么（这是一个分类问题）。

上述阶段和每个时钟周期的乘法次数（阶段 1 为 25，阶段 2 为 3）是否可以？

或者我应该重做它以在 200x25 时钟周期内执行第 2 阶段，并在 10x3 时钟周期内执行第 4 阶段？

非常感谢所有帮助和建议的家伙，

费萨尔

原来的：

我已经为人工神经网络中的前馈算法编写并模拟了一个模块。综合工具需要很长时间（Synopsys DCS 和 Xilinx ISE 14.4）……它已经运行了 9 多个小时，所以我对此感觉非常糟糕！但模拟结果是正确的。

我有一个新设计的想法（在消息末尾），但想由有经验的人运行它，看看这是否比我当前的实现更有效（见下文）或更糟，如果更糟，我该怎么做许多算术运算更有效？

一些网络背景：

输入层有 200 个输入，

隐藏层有 25 个神经元，

输出层有 3 个输出。

Verilog 代码理念：我只有一个实现整个算法的模块。

1.  第一步是将输入（其中 200 个）乘以每个神经元（并且有 25 个神经元）的权重（其中 200 个）它计算

`prod[0] <= prod[0] + input[0] x weight1[i]; i = 0 to 200-1`

`.......`

`prod[25] <= prod[25] + input[25] x weight1[i]; i = 0 to 200-1`

并为 200 个输入中的每一个重复上述内容 200 次。它同时对所有 25 个神经元进行计算。

1.  接下来，对上述结果调用 ANN 激活函数。这是通过使用具有近 200 个元素的 LUT 来完成的（我使用了 case 语句）。为此，我编写了另一个 activation.v 文件，并且必须为每个神经元实例化 25 次！

2.  接下来，它将上述结果与最后 3 个神经元的权重相乘：

`prod_2[0] <= prod_2[0] + prod[0]*weight2[i]; i = 0 to 25-1;`

`prod_2[1] <= prod_2[1] + prod[0]*weight2[i]; i = 0 to 25-1;`

`prod_2[2] <= prod_2[2] + prod[0]*weight2[i]; i = 0 to 25-1;` 并对 25 个 prod 输入中的每一个重复上述 25 次。它同时对所有 3 个输出神经元进行计算。

1.  最后一步是在 prod_2[0 到 2] 上调用 sigmoid。为此，我不得不再实例化 3 个激活模块。

模拟结果很棒。但可能非常低效！！！！

所以，我想知道这是否是一个更好的主意？

Top_Module -> 神经元 -> 乘法和激活

顶部模块调用神经元函数（为此需要实例化 28 个神经元！）并将相关的输入和权重传递给它。神经元函数调用乘法模块（第一部分需要 200 个，第二部分需要 25 个）。神经元函数接下来将上述 200 个结果（以及第 2 部分中的 25 个）相加并调用激活函数。输出最终返回到 Top_Module。

我的问题：

1.  这是否比在一个模块中执行所有操作的早期实现更有效？

2.  实例化 28 个神经元，每个神经元实例化 200 个乘法模块是**好**是**坏**？

***   有没有其他想法可以让我的代码高效，从而使 Synopsys 设计编译器不需要 12 小时？！！

    *   如果我这样做，每个神经元都有 200 个输入和 200 个权重，这将是它的输入端口。我不认为 Verilog 模块可以在彼此之间传递数组。如果没有，我是否必须手动写出所有 400 个端口而不是传递数组？** 

 **对不起一个奇怪的问题，但我对整个综合概念还是陌生的，想知道这些工具如何实例化模块？

谢谢，

费萨尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:46:04.987

听起来您正在尝试并行执行所有这些操作，这意味着大量路由和大量乘法器。

您可能需要重新工作，以便每次只为每个神经元更新一个输入*权重，因此您的 0..200 循环需要 200 个滴答声才能完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T21:26:22.997

> 有没有其他想法可以让我的代码高效，从而使 Synopsys 设计编译器不需要 12 小时？！！

以前的建议很好，虽然我看不到您当前的所有设计，但请确保您的模块之间有足够的流水线阶段。如果您的关键路径对于时序来说真的很长，那么概要将在很长一段时间内试图调整您的乘数以满足可能不可能的时序约束。

降低所需的时钟频率也可以通过放宽路径限制使合成更容易。

此外，如果您确实保留了 200 个乘法器（并不是说您应该这样做），那么查看“综合分区”会很有用，但如何做到这一点取决于您使用的综合工具。本质上，您合成一个模块/分区，然后根据需要多次复制该分区，而不是尝试一次合成所有模块。由于您的设计可能试图通过所有 200 个乘法单元独立优化该路径，而实际上您可以为每个乘法单元使用相同的综合网表。xilinx 的一些信息在这里：[http ://www.xilinx.com/support/documentation/application_notes/xapp918.pdf](http://www.xilinx.com/support/documentation/application_notes/xapp918.pdf)**

# fpdf - FPDF 图像错误：不支持的图像类型：tif

> ID：15106778
> 
> 赞同：1
> 
> 时间：2013-02-27T07:53:04.660
> 
> 标签：fpdf

我需要解决这个错误：

```
File Type Not Supported! FPDF error: Unsupported image type: tif 
```

我已经上传了一个类型为 tiff ( image/tiff ) 的图像，但我收到了这个错误。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T14:24:13.287

[FPDF.org](http://www.fpdf.org)说：图像支持（JPEG、PNG 和 GIF）。

此外，如果您想使用 PHP 将 .TIFF 转换为 .JPEG，您需要安装和使用[ImageMagick](https://stackoverflow.com/questions/1973719/how-to-convert-tiff-to-png-jpg-bmp-in-php)

# javascript - 在javascript中插入一个包含单引号的值

> ID：15106782
> 
> 赞同：-2
> 
> 时间：2013-02-27T07:53:13.083
> 
> 标签：javascript

```
document.execCommand('insertHTML', false, 'Hello this is Veena's message'); 
```

我如何插入包含单引号的文本而不是用双引号传递它

```
document.execCommand('insertHTML', false, "Hello this is Veena's message"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:55:31.373

与几乎所有其他具有类似语法的语言（B、C、C++、C#、Java...）一样，您可以`'`使用反斜杠转义：

```
document.execCommand('insertHTML', false, 'Hello this is Veena\'s message'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T07:57:31.423

您应该使用 \ 转义单引号

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T07:55:35.450

转义引号：

```
document.execCommand('insertHTML', false, 'Hello this is Veena\'s message'); 
```

更多信息：[http ://www.quackit.com/javascript/tutorial/javascript_escape_characters.cfm](http://www.quackit.com/javascript/tutorial/javascript_escape_characters.cfm)

另一种选择是使用 html 字符代码。

```
document.write('veena&#39s'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-27T07:55:44.360

```
document.execCommand('insertHTML', false, 'Hello this is Veena\'s message'); 
```

在它之前使用反斜杠。这将起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T07:56:30.660

逃避报价：

```
'Hello this is Veena\'s message' 
```

# java - 公交线路-Google Maps Android API v2

> ID：15106784
> 
> 赞同：2
> 
> 时间：2013-02-27T07:53:15.790
> 
> 标签：java, android, google-maps, google-maps-android-api-2

如何使用 Google Maps android API v2 使用公交线路层？

我已经阅读并测试过，如果您使用，您可以使用、、和;`setMapType`选项切换地图类型 并且使用另一种称为的方法，您还可以打开流量层。是否有可能做到这一点？`MAP_TYPE_HYBRID``MAP_TYPE_NORMAL``MAP_TYPE_NONE``MAP_TYPE_TERRAIN``setTrafficEnabled()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-10T15:52:21.573

似乎不可能，我也在寻找，但找不到怎么做

# php - .htaccess 和 WAMP 的问题

> ID：15106790
> 
> 赞同：0
> 
> 时间：2013-02-27T07:53:41.857
> 
> 标签：php, .htaccess, rewrite, wamp

好的，所以我已经尝试了好几个小时找到解决这个问题的方法。基本上我有一个名为 view_app.php 的脚本，它接受一个 get 变量。我想通过使用 .htaccess 来制作 url mydomain.com/a/VARIABLE 让它更漂亮，但我似乎无法让它工作。这是我的 .htaccess 文件：

```
RewriteEngine On
RewriteBase /Site/
RewriteRule ^a/(.*)/$ /Site/view_app.php?a=$1 [QSA,L] 
```

我也进入了 httpd.conf 并将 AllowOveride 设置为 All 但我仍然遇到它没有重写并且只是抛出 404 错误的问题。任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:22:54.657

试试这个 ：

```
RewriteEngine On
RewriteBase /Site/
RewriteRule a/(.*)/$ view_app.php?a=$1 [QSA,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:09:57.937

使用 RewriteRule 时，不应在该行中包含基本名称或域名。另外，请确保打开 RewriteEngine。像这样：

```
RewriteEngine On
RewriteBase /Site/
RewriteRule ^([^/]+)/([^/]+)$  index.php?$1=$2 
```

它将重写为 domain/a/1

# c# - 使用当前上下文测试 WCF 服务

> ID：15106791
> 
> 赞同：1
> 
> 时间：2013-02-27T07:53:45.793
> 
> 标签：c#, unit-testing, nunit, moq, integration-testing

我正在对 WCF 双工服务进行单元测试。下面是实现服务接口和回调合约接口的部分代码。在测试中，ServiceHost.Open 监听来自客户端调用 EmailRequest 方法的传入消息。我需要保存传入的当前上下文以回复而不是我的测试断言。我遇到的问题是在测试中我尝试了许多不同的方法，我无法保存传入消息的当前上下文以发回给他们。它总是为 NullRefrence 抛出异常。它让我发疯。如何在测试中保存 OperationContext.Current？

```
[ServiceContract]
Name="Email",
CallbackContract=typeof(IEmailCallbackcontract),
SeeionMode=SessionMode.Allowed)]
public interface IEmail
{
[OperationContract(IsOneWay=true, Name="Message")]
Void EmailRequest(string request, int MssgID);
}

[ServiceContract(Name="EmaiCallbackcontract")]
public interface IEmailCallbackcontract
{
[OperationContract(IsOneWay=true, Name="ResMessage")]
void EmailResponse(string response);
}

[ServiceBehavior(InstanceConextMode=InstanceContextMode.Single)]
public class Email:IEmail
{
public void EmailRequest(string message, int MssgID)
{
IEmailCallbackcontract   callbak=OperationContect.Current.GetCallbackChannel<IEmailCallbackcontract>();
Console.Write("Message Recieved");
callback.EmailResponse("I got the message");
}
} 
```

我是 NUnit 测试

```
[Test]
public void TestEmail()
{
//I create a servicehost based on binding information
Servicehost.Open();
OperationContext.Current.GetCallbackChannel<IEmailCallbackcontract>();
//I want to post message back using OperationContext but keep getting Nullrefrence error 
//for some reason test wont save the Current context of incoming messages. 
} 
```

# google-app-engine - 在前端实例终止之前运行代码

> ID：15106792
> 
> 赞同：3
> 
> 时间：2013-02-27T07:53:53.033
> 
> 标签：google-app-engine

如何在 GAE 前端实例终止之前运行一段代码？

我正在查看 Servlet.destroy() 中正在运行的代码，但这实际上是在实例脱机之前被调用的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:21:03.780

您可以使用[LifecycleManager](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/LifecycleManager)类为您的 Java 运行时注册一个关闭挂钩：

```
LifecycleManager.getInstance().setShutdownHook( new ShutdownHook()
{
    @Override
    public void shutdown()
    {
        // do your stuff here
    }
} ); 
```

您可以使用[ServletContextListener](https://developers.google.com/appengine/docs/java/config/appconfig#Using_a_ServletContextListener)为您的 servlet 添加启动钩子，并将上面的代码放入`contextInitialized(ServletContextEvent event)`方法中。

`contextDestroyed(ServletContextEvent event)`从上面链接中有关 ServerContextListener 的文档中，目前看来，AppEngine在实例关闭时不会调用该方法。

# jquery - Jquery、Onclick 和 Ajax

> ID：15106793
> 
> 赞同：1
> 
> 时间：2013-02-27T07:53:59.397
> 
> 标签：jquery

我一直在摆弄这个，绝对没有进展或运气。如果我取出 .ajax 它可以正常工作，但使用 .ajax 不会触发任何事件，甚至不会触发随机测试警报。你能看出我做错了什么吗？我试图遵循 Jquery 文档。PHP 工作。

```
<script type="text/javascript">
jQuery(document).ready(function ($) { // wait until the document is ready
$('div#chatroom').click(function(){
$.ajax({
    type: 'GET',
    url: 'chatget.php',
    data: { chatroomid: = '<?php echo $chatroomid; ?>'},
    datatype: 'html',
    cache: 'false',
    success: function(response) {
        $('#chatroom').append(response);
        alert('Load was performed.');
    },
    error: function(){
        alert('Fuuuuuuuuuuuuuu');
    }
}); // End Ajax  

alert('Fail');

}); // End onclick
});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:57:32.873

只是看着它..你有一个额外`=`的数据对象

```
data: { chatroomid: = '<?php echo $chatroomid; ?>'},
              ------^^--- here 
```

应该

```
 data: { chatroomid: '<?php echo $chatroomid; ?>'}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T07:57:52.317

```
<script type="text/javascript">
jQuery(document).ready(function ($) { // wait until the document is ready
$('div#chatroom').click(function(){
$.ajax({
    type: 'GET',
    url: 'chatget.php',
    data: { chatroomid: '<?php echo $chatroomid; ?>'},
    datatype: 'html',
    cache: 'false',
    success: function(response) {
        $('#chatroom').append(response);
        alert('Load was performed.');
    },
    error: function(){
        alert('Fuuuuuuuuuuuuuu');
    }
}); // End Ajax  

alert('Fail');

}); // End onclick
});

</script> 
```

你能试试这个代码吗

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T07:59:58.217

在我看来错误在这里：一个额外的“=”

```
chatroomid: = '<?php echo $chatroomid; ?>'}, 
```

当出现这样的错误时，我通常使用[jslint测试代码](http://www.jslint.com/)

# html - Fancybox 的多个实例不起作用

> ID：15106797
> 
> 赞同：0
> 
> 时间：2013-02-27T07:54:13.770
> 
> 标签：html, css, fancybox

我是 HTML 和 CSS 的新手。我使用 Fancybox 创建了一个页面（同一页面上有 2 个实例），它在我的本地机器上以及在我的托管服务器上运行良好。但是，一旦我迁移到客户的服务器，缩略图就会消失。这是两个链接 -

[http://intelliassist.in/susheeljangiraapproved/photos.html](http://intelliassist.in/susheeljangiraapproved/photos.html)（工作正常）[http://susheeljangira.com/photos.html](http://susheeljangira.com/photos.html)（缺少缩略图）。

谁能推荐一下可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:00:48.933

似乎您没有在客户端服务器上上传所有图片，http 请求中缺少大约 39 张图片。脚本工作正常，只是找不到图像。

# .htaccess - 仅将目录及其子目录中的 .php 重写为 .xml

> ID：15106798
> 
> 赞同：0
> 
> 时间：2013-02-27T07:54:13.847
> 
> 标签：.htaccess, mod-rewrite

我想将 .php 文件重写为目录`rss/index.php`及其子目录中的 .xml 文件`rss/all/index.php`，仅此而已，我不想使用此规则影响站点中的其他目录`rss/main/index.php`。`sub directories`

IE

```
root/rss/index.php to root/rss/index.xml 
```

和

```
root/rss/all/index.php to root/rss/all/index.xml 
```

我不太了解mod rewrite，我尝试过这种方式，但它什么也没做。

```
RewriteRule   ^/rss/.xml$     $1.php [L]
also tried like this
RewriteRule   ^(rss).xml$     $1.php [L] 
```

请查看并建议任何可能的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:07:11.300

尝试：

```
RewriteRule ^/?Site/rss/(.*)\.xml$ /Site/rss/$1.php [L] 
```

这将使得当有人请求时`/rss/something.xml`，他们将得到任何服务`/rss/something.php`。这些规则必须位于文档根目录的 htaccess 文件中。

# ios - iOS - YouTube JSON-C 解析

> ID：15106799
> 
> 赞同：0
> 
> 时间：2013-02-27T07:54:20.953
> 
> 标签：ios, json, listview, youtube

我一直在尝试从 YouTube V2 API 解析 JSON，但它一直在崩溃，我不知道为什么......我只是 Android 上的 iOS 新手。

代码

```
- (void)viewDidLoad
{
[super viewDidLoad];

self.title = NSLocalizedString(@"Videos", @"Videos");

if ([self.navigationController.parentViewController   respondsToSelector:@selector(revealGesture:)] &&   [self.navigationController.parentViewController respondsToSelector:@selector(revealToggle:)])
{
    UIPanGestureRecognizer *navigationBarPanGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self.navigationController.parentViewController action:@selector(revealGesture:)];
    [self.navigationController.navigationBar addGestureRecognizer:navigationBarPanGestureRecognizer];

    UIImage *backImage=[UIImage imageNamed:@"NavBarIconLauncher.png"];
    self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithImage:backImage style:UIBarButtonItemStylePlain target:self.navigationController.parentViewController action:@selector(revealToggle:)];

    //self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemRefresh target:self action:@selector(revealToggle:)];

}

[SVProgressHUD showWithStatus:@"Loading Videos..." maskType:SVProgressHUDMaskTypeClear];

[UIApplication sharedApplication].networkActivityIndicatorVisible = YES;

NSURL *url = [NSURL URLWithString:@"http://gdata.youtube.com/feeds/api/users/YOUTUBE USERNAME/uploads?v=2&alt=jsonc"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];
[[NSURLConnection alloc] initWithRequest:request delegate:self ];
NSLog(@"JSON REQUESTED");

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
return (toInterfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
data = [[NSMutableData alloc] init];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)theData
{
[data appendData:theData];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
NSLog(@"JSON RECEIVED");
[SVProgressHUD dismiss];
[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;

videos = [NSJSONSerialization JSONObjectWithData:data options:nil error:nil];
[mainTableView reloadData];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
[SVProgressHUD dismiss];
[SVProgressHUD showErrorWithStatus:error.localizedDescription];
[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return [[videos valueForKeyPath:@"data.items.title"] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];

if(cell == nil){

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MainCell"];
    cell.textLabel.numberOfLines = 1;
    cell.selectionStyle = UITableViewCellAccessoryDisclosureIndicator;
    cell.accessoryType= UITableViewCellAccessoryDisclosureIndicator;
    cell.textLabel.lineBreakMode = UILineBreakModeTailTruncation;

}

NSDictionary *datas = [videos objectForKey:@"data"];
NSDictionary *items = [datas objectForKey:@"items"];
NSArray *announcements = [items objectForKey:@"title"];

// NSDictionary* announcement = [announcements objectAtIndex:0];

cell.textLabel.text = [[announcements objectAtIndex:indexPath.row]valueForKey:@"title"];

return cell;
}

- (void)viewDidUnload
{
[super viewDidUnload];

} 
```

堆栈跟踪

```
2013-03-29 18:35:42.212 SJRC[2818:907] -[__NSCFArray objectForKey:]: unrecognized selector   sent to instance 0x2025d290
2013-03-29 18:35:42.215 SJRC[2818:907] *** Terminating app due to uncaught exception   'NSInvalidArgumentException', reason: '-[__NSCFArray objectForKey:]: unrecognized selector  sent to instance 0x2025d290'
*** First throw call stack:
(0x326922a3 0x3a30597f 0x32695e07 0x32694531 0x325ebf68 0x107633 0x344e554d 0x344ca313   0x344e17cf 0x3449d803 0x34247d8b 0x34247929 0x3424885d 0x34248243 0x34248051 0x34247eb1  0x326676cd 0x326659c1 0x32665d17 0x325d8ebd 0x325d8d49 0x361892eb 0x344ee301 0xe52d5 0xdd788)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:06:15.950

你的一个对象`videos`，`datas`或者`items`是一个数组，而不是一个字典，所以你不能调用`objectForKey:`它。

我已经检查了来自 YouTube 的响应 JSON，并且可以肯定地说这`items`是一个数组。

因此，将项目转换为 NSArray:`NSArray *itemsArray = (NSArray*)items`并迭代`itemsArray`：

```
for (NSDictionary *item in itemsArray) {
   NSString *title = [item objectForKey: @"title"];
} 
```

你需要这个，因为物品上可以有多个视频

# php - DOM 解析器动态 id

> ID：15106800
> 
> 赞同：0
> 
> 时间：2013-02-27T07:54:25.650
> 
> 标签：php, dom

id-任意号码

```
<div id="news-id-1" style="display:inline;"></div>
<div id="news-id-31" style="display:inline;"></div>
<div id="news-id-320" style="display:inline;"></div> 
```

如何使它工作？（谷歌翻译）

> ```
> foreach ($html->find('div[id=news-id-?????]', 0)  as $e2) {     
>         echo $e2;
> } 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:56:23.967

```
$html->find("div[id^='news-id-']", 0) 
```

应该管用。

# installation - 错误：在 WinXP-SP3 上安装 Visual Studio 2010.ULTIMATE.RTM.X86

> ID：15106802
> 
> 赞同：1
> 
> 时间：2013-02-27T07:54:31.363
> 
> 标签：installation

我正在尝试在 WinXP-SP3 上安装 Visual Studio 2010.ULTIMATE.RTM.X86。它在安装和退出期间出现错误。

**错误**：“安装过程中出现错误。虽然某些组件已成功安装，但检测到错误。”

安装“Microsoft Windows Installer 4.5 Update(x86)”时出现错误

# android - Android Service - BindService 与 startService 一起使用时出现问题

> ID：15106805
> 
> 赞同：1
> 
> 时间：2013-02-27T07:54:46.617
> 
> 标签：android, service, android-service

我是android平台的新手。目前正在开发流媒体广播应用程序。

我想制作应用程序，开始音频播放并继续播放，即使应用程序进入后台。

我已经使用**startService()**创建了一个服务，因此即使应用程序进入后台，播放也会继续。我还使用**了 bindService()**来获取 serviceConnection 引用来执行带有服务的 RPC 调用。

应用程序启动服务并正确启动播放，并且 bindService 能够获取引用并能够进行 RPC 调用，一切正常，直到应用程序进入后台。

我在主要活动的**onResume()**和**onPause()中调用****bindService()**和**unBindService()**调用。

 ****> 当应用程序进入后台时，播放继续没有任何问题。**unBindservice()**调用分离服务连接，并且在 Service 类中调用了**onUnbind(Intent)方法。**到目前为止没有问题。
> 
> 当应用程序进入前台时（当服务正在运行并且播放继续时），我没有得到服务连接引用（**onServiceConnected()**没有被调用），即使在活动**onResume()**方法中调用了**bindService() 。**我还验证了服务类**onBind(Intent)**方法也没有被调用。

 ****在过去的几天里，我一直在努力解决这个问题。

**将startService()**和**bindService()**与用户定义的 Android 服务一起使用的推荐方法是什么。

任何帮助解决此问题，高度赞赏。

活动 onResume/onPause 代码。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    Log.d(TAG, "onCreate => " + getIntent());
    super.onCreate(savedInstanceState);

    // set the default network preference, if it is not already set
    setDefaultNetwork();

    // initialize the navigation tab bars
    initializeTabBar();

    mPlayerController = AudioPlayerController.getInstance(this);

    mActionBar.setDisplayShowHomeEnabled(true);
    mActionBar.setDisplayShowTitleEnabled(true);

    mRemoteControlReceiver = new RemoteControlReceiver();
    IntentFilter filter = new IntentFilter(
            "android.intent.action.MEDIA_BUTTON");
    registerReceiver(mRemoteControlReceiver, filter);

    setVolumeControlStream(AudioManager.STREAM_MUSIC);
}

@Override
public void onResume() {
    super.onResume();
    Log.d(TAG,"onResume");
    mPlayerController.bindService();
    restoreAppState();
}

@Override
public void onPause() {
    super.onPause();
    Log.d(TAG,"onPause");
    mPlayerController.unBindService();
    storeAppState();
} 
```

控制器类具有服务相关的启动/停止/绑定/取消绑定方法

```
 public void bindService() {
    Intent intent = new Intent();
    intent.setClassName("com.vikkrithik.radio.indradio",
            "com.vikkrithik.radio.indradio.AudioPlayerService");
    Log.d(TAG, "bindService Context " + mPlayerContext
            + " serviceConnection => " + audioServiceConnection);
    mPlayerContext.bindService(intent, audioServiceConnection, 0);
}

public void unBindService() {
    mPlayerContext.unbindService(audioServiceConnection);
    Log.d(TAG, "unBindService done context => " + mPlayerContext
            + " serviceConnection => " + audioServiceConnection);
}

private ServiceConnection audioServiceConnection = new ServiceConnection() {
    public void onServiceConnected(ComponentName name, IBinder service) {
        Log.d(TAG, "onServiceConnected " + name);
        mAudioService = AudioPlayerServiceInterface.Stub
                .asInterface(service);
    }

    public void onServiceDisconnected(ComponentName name) {
        Log.d(TAG, "onServiceDisconnected " + name);
        mAudioService = null;
    }
};
/**
 * Start the AudioService
 * 
 */
public void startAudioService(Station station) {
    Intent intent = new Intent();
    intent.setClassName("com.vikkrithik.radio.indradio",
            "com.vikkrithik.radio.indradio.AudioPlayerService");

    Bundle extras = new Bundle();
    extras.putString("station_url", station.getUrl());
    extras.putString("station_name", station.getStationName());
    intent.putExtras(extras);
    mCurrentStation = station;
    mPlayerContext.startService(intent);
    bindService();
    Log.d(TAG, "startService called");
}

public void stopAudioService() {
    //
    // Check if AudioService is already created
    //
    if (null == mAudioService)
        return;

    Intent intent = new Intent();
    intent.setClassName("com.vikkrithik.radio.indradio",
            "com.vikkrithik.radio.indradio.AudioPlayerService");
    mPlayerContext.stopService(intent);
    Log.d(TAG, "stopAudioService done");
} 
```

服务类方法

```
@Override
public IBinder onBind(Intent arg0) {
    Log.d(TAG, "onBind invoked");
    return audioServiceStub;
}

@Override
public boolean onUnbind(Intent intent) {
    Log.d(TAG,"onUnbind invoked");
    return super.onUnbind(intent);
}

@Override
public void onCreate() {
    super.onCreate();
    Log.d(TAG, "onCreate");
    audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

    mNetworkStatusReceiver = new NetworkStatusReceiver();
    IntentFilter filter = new IntentFilter(
            ConnectivityManager.CONNECTIVITY_ACTION);
    registerReceiver(mNetworkStatusReceiver, filter);

    PreferenceManager.getDefaultSharedPreferences(this)
            .registerOnSharedPreferenceChangeListener(
                    mNetworkStatusReceiver);
}

@Override
public void onDestroy() {
    Log.d(TAG, "onDestory");
    stopPlayback();

    PreferenceManager.getDefaultSharedPreferences(this)
            .unregisterOnSharedPreferenceChangeListener(
                    mNetworkStatusReceiver);
    unregisterReceiver(mNetworkStatusReceiver);
    cancelNotification();
    audioServiceStub = null;
    super.onDestroy();
} 
```

**日志输出**

> **应用启动时**

TabbarMainActivity(15432): onResume AudioPlayerController(15432): bindService 上下文 com.vikkrithik.radio.indradio.TabbarMainActivity@4150fdb8 serviceConnection => com.vikkrithik.radio.indradio.AudioPlayerController$1@418a2d30

> **按下播放按钮时**

AudioPlayerController(15432): bindService 上下文 com.vikkrithik.radio.indradio.TabbarMainActivity@4150fdb8 serviceConnection => com.vikkrithik.radio.indradio.AudioPlayerController$1@418a2d30

AudioPlayerController(15432): 调用 startService

AudioPlayerService（15432）：onCreate

AudioPlayerService(15432)：onBind 调用**onBind() 调用**

AudioPlayerService(15432): onStartCommand with IndetntIntent { cmp=xxxx (has extras) }

AudioPlayerController(15432)：onServiceConnected ComponentInfo{com.vikkrithik.radio.indradio/com.vikkrithik.radio.indradio.AudioPlayerService} **onServiceConnected 调用**

> **按下后退按钮时，应用程序进入后台**

TabbarMainActivity(15432)：完成调用

TabbarMainActivity（15432）：onPause

AudioPlayerController(15432): unBindService done context => com.vikkrithik.radio.indradio.TabbarMainActivity@4150fdb8 serviceConnection => com.vikkrithik.radio.indradio.AudioPlayerController$1@418a2d30 **onPause() 调用 unBindService()**

AudioPlayerService(15432): onUnbind 调用 **unBind 在服务中调用**

TabbarMainActivity（15432）：onDestroy

> **应用程序进入前台**

TabbarMainActivity(15432): onCreate => Intent { cmp=xxxx }

TabbarMainActivity(15432)： **从 onResume 调用 onResume bindService**

AudioPlayerController(15432): bindService 上下文 com.vikkrithik.radio.indradio.TabbarMainActivity@4150fdb8 serviceConnection => com.vikkrithik.radio.indradio.AudioPlayerController$1@418a2d30

> **播放停止后**

音频播放器服务（15432）：停止

AudioPlayerService(15432)：重置

AudioPlayerController(15432): stopAudioService 完成

AudioPlayerFragment(15432): 移除可视化器

AudioPlayerService(15432): onDestory

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T12:30:16.380

我无法仅仅“看到”问题，所以我创建了一个应用程序，它可以完成您需要的大部分事情，作为解决方案的基础。它不做网络或使用真正的 MediaPlayer，但该服务有一个后台线程来输出音频。您可以从两个按钮开始和停止音频。我能够点击后退按钮，并继续听到服务，然后从图标启动应用程序并停止并重新开始音频播放。我认为您可能可以按照我的步骤进行操作，如果它适用于您的设备，则开始将 MediaPlayer 和网络代码添加到功能服务中。

我使用以下[教程](http://www.techotopia.com/index.php/Android_Remote_Bound_Services_%E2%80%93_A_Worked_Example)作为服务代码的基础，它使用消息而不是服务的存根/接口。

它基于 Eclipse 中的一个新 Android 项目，然后我只添加了两个按钮并为它们提供了新的文本和 Id。其余的在这里：

首先是我在 Eclipse 创建的 MainActivity 中放入的内容：

```
private final static String TAG = "MainActivity";
// Service stuff
Messenger myService = null;
boolean isBound;
private Button startBut;
private Button stopBut;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    startBut = (Button) findViewById(R.id.startAudio);
    startBut.setOnClickListener(new Button.OnClickListener(){
        public void onClick(View v){
            try
            {
                if (myService != null && isBound)
                {
                    Log.d(TAG, "Service Connected! sending start request");
                    Message msg = Message.obtain();
                    Bundle bundle = new Bundle();
                    bundle.putString("MyString", "start");

                    msg.setData(bundle);
                    myService.send(msg);
                }
            }
            catch (Throwable th)
            {
                Log.d(TAG, "error sending start", th);
            }
        }
    });

    stopBut = (Button) findViewById(R.id.stopAudio);
    stopBut.setOnClickListener(new Button.OnClickListener(){
        public void onClick(View v){
            try
            {
                Log.d(TAG, "Service Connected! sending stop request");

                Message msg = Message.obtain();
                Bundle bundle = new Bundle();
                bundle.putString("MyString", "stop");

                msg.setData(bundle);
                myService.send(msg);
            }
            catch (Throwable th)
            {
                Log.d(TAG, "error sending start", th);
            }
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected void onPause()
{
    super.onPause();

    unBindService();
}

@Override
protected void onResume()
{
    super.onResume();
    Log.d(TAG, "Resuming: binding to service");
    Intent intent = new Intent("com.example.audioservice.AudioPlayerService");

    // Start the service ourselves because we don't want it to stop when the activity/application does.
    startService(intent);
    bindService(intent, myConnection, 0);
}

private ServiceConnection myConnection = new ServiceConnection() 
{
    public void onServiceConnected(ComponentName className, IBinder service) {
        myService = new Messenger(service);
        isBound = true;
        Log.d(TAG, "Service Connected!");
    }

    public void onServiceDisconnected(ComponentName className) {
        myService = null;
        isBound = false;
    }
};

public void unBindService() 
{
    this.unbindService(myConnection);
    Log.d(TAG, "unBindService done context => " 
            + " serviceConnection => " + myConnection);
} 
```

接下来，在 Manifest 文件中插入一小段内容：

```
<service android:enabled="true"  android:name="com.example.audioservice.AudioPlayerService"
         android:process=":my_process" >
         <intent-filter>
            <action android:name="com.example.audioservice.AudioPlayerService" >
         </action>
      </intent-filter>
    </service> 
```

最后是AudioPlayerService类的内容：

```
public class AudioPlayerService extends Service
{
private static final String TAG = "AudioPlayerService";
AudioManager audioManager;
private boolean playing = false;
private Player player;

class IncomingHandler extends Handler
{
    @Override
    public void handleMessage(Message msg)
    {
        Bundle data = msg.getData();
        String dataString = data.getString("MyString");
        if ("start".equalsIgnoreCase(dataString))
        {
            Log.d(TAG, "Got a start request");
            // Start playing
            playing = true;
        }
        else if ("stop".equalsIgnoreCase(dataString))
        {
            Log.d(TAG, "Got a stop request");
            // Stop playing
            playing = false;
        }
    }
}

@SuppressLint("HandlerLeak")
final Messenger myMessenger = new Messenger(new IncomingHandler());

@Override
public IBinder onBind(Intent arg0)
{
    Log.d(TAG, "onBind invoked");
    return myMessenger.getBinder();
}

@Override
public boolean onUnbind(Intent intent)
{
    Log.d(TAG, "onUnbind invoked");
    return super.onUnbind(intent);
}

@Override
public void onCreate()
{
    super.onCreate();
    Log.d(TAG, "onCreate");
    audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    audioManager.loadSoundEffects();
    player = new Player();
    player.start();
}

@Override
public void onDestroy()
{
    Log.d(TAG, "onDestory");
    stopPlayback();

    super.onDestroy();
}

private void stopPlayback()
{
    playing = false;
}

// Pointless Thread to let us know the service is still doing its thing
class Player extends Thread
{
    public void run()
    {
        int x = 7;
        while (1 < x)
        {
            try
            {
                if (playing)
                {
                    Thread.sleep(10000);
                    Log.d(TAG, ".");
                    audioManager.playSoundEffect(AudioManager.FX_KEY_CLICK);
                }
            }
            catch (Throwable th)
            {
                Log.d(TAG, "error in Player", th);
            }
        }
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T15:52:37.280

为了能够重新绑定，请`onUnbind`确保您从.`onRebind``Service``bindService``Activity`

### `Service.java`

```
@Override
public boolean onUnbind(Intent intent) {
        super.onUnbind(intent);
        /* logic */
        return true; // future binds from activity will call onRebind
}

@Override
public void onRebind(Intent intent) {
    // Is called when activity issues a `bindService` after an `undbindService`
    super.onRebind(intent);
    /*logic*/
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T01:24:33.997

我看到这些问题与运行使用 GPS 记录车辆行程的服务的应用程序有关。只需按一下按钮，服务就会启动并继续录制，如果需要，可以持续数小时。按下停止按钮，服务终止。在录制过程中，有一个界面可以传达显示在 UI 上的某些实时数据，因此绑定/取消绑定处理由于旋转、后台/恢复应用程序等引起的中断/重新连接周期。

只要服务运行就没有问题。但是当我停止录制意味着我停止服务但继续保持与服务类的绑定/解除绑定解决方案时，会出现服务泄漏消息。我可能会尝试做的是重新设计一些东西，以便我（1）只在服务运行时关心绑定取消绑定，或者（2）在应用程序生命周期的任何时候运行服务并添加方法来告诉它开始或停止录制并让它在其他时间“空闲”。也许（1）是要走的路，而维持与非运行服务的服务连接的方法可能不是这样做的方法。********

# css - CSS背景图像未显示在DIV中

> ID：15106808
> 
> 赞同：3
> 
> 时间：2013-02-27T07:54:54.733
> 
> 标签：css, html, background-image

如果我这样做：

```
.floatingBox div div {
   text-align: center;
   position: relative;
   background-image: url('../images/car.png');
   background-repeat: no-repeat;
   background-position: center;
}

<div class='floatingBox'>
    <div class='effect2'>
        <a href=/Devis/moto><div class='motorbike'></div></a>
    </div>
</div> 
```

然后背景图像显示正常。

但是，如果我这样做：

```
.floatingBox div div {
   text-align: center;
   position: relative;
   background-repeat: no-repeat;
   background-position: center;
}

.motorbike {
    background-image: url('../images/moto.png');
} 
```

然后，背景图像不再显示。

怎么会 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T08:08:55.327

尝试将您的 html 更改为

```
<div class='floatingBox'>
    <div class='effect2'>
        <a href='/Devis/moto' class='motorbike'></a>
    </div>
</div> 
```

和你的CSS

```
.motorbike {
    display: block;
    position: relative;
    background-image: url('../images/car.png');
    background-repeat: no-repeat;
    background-position: center;

    width: /* put a non-zero width value here */ ;
    height: /* put a non-zero height value here */ ;
} 
```

**说明：**如果您将其显示属性设置为阻止，则标签可以代替标签。（`<a>`默认为）`<div>``<a>``display:inline`

您还想设置宽度和高度，因为该 div 内没有内容。

一般来说，避免在您的 css 样式中**级联**是一个好主意。有关详细讨论，请参见[此处](https://stackoverflow.com/questions/15043976/oocss-separation-of-container-and-content/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-27T07:58:53.047

您不应该将 div 放在链接标签内。放在外面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T08:11:42.467

乍一看，您的锚点和链接似乎没有任何内容，因此隐含的宽度和高度为 0px。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T08:03:55.227

首先，你的 div 结束标签在锚标签内。其次，在您的锚标签内没有显示任何内容（它只是空标签，所以它没有尺寸等），这意味着就像您的链接标签中没有文本一样 - 使其隐藏（因为没有任何内容可显示)

# asp.net - 由于以下错误，检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80070005

> ID：15106809
> 
> 赞同：0
> 
> 时间：2013-02-27T07:54:57.307
> 
> 标签：asp.net, reporting-services, windows-server-2008-r2

我在 IIS 上有一个 ASP.NET 网站，它会自动生成 Excel 文件，问题是我不断收到此错误：

> “由于以下错误，检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80070005。”

我已经尝试了网上几乎所有的方法来解决这个问题，但我不能：我已经为用于网站的用户更改了 Excel 的 DCOM 配置，在 System32 和 SysWOW64 中创建了桌面文件夹，并为同一用户完全控制，我甚至将 Miscrosoft Office 安装文件夹的安全设置更改为同一用户，但没有运气。

在我的情况下，我的网站使用 SQL Server Reporting Service 连接到另一台服务器以检索一些报告，因此如果我将网站使用的用户更改为“LocalSystem”用户，我无法从第二台服务器获取报告，但我可以生成 Excel 文件。

所以解决方案可能是以下两种之一：我可以使用该用户创建 Excel 文件，或者作为“LocalSystem”用户从第二台服务器检索报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:15:32.067

我有同样的问题。这是相同的解决方案。

转到您的 IIS 管理器。→ ApplicationPools → AdvancedSettings → Enable32BitApplication → True。

还可以完全访问您的文件夹。

它可能对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T01:00:00.660

尝试执行以下操作：

1.  确保已安装 Office 互操作程序集。
2.  检查开发和生产中的程序集版本。
3.  在 systemprofile 下创建 Desktop 文件夹。
4.  为服务用户显式设置 DCOM 安全性。

[**你可以在这里**](http://waheedrous.wordpress.com/2014/01/26/error-office-interop-assemblies/)找到更多细节[](http://waheedrous.wordpress.com/2014/01/26/error-office-interop-assemblies/)

# asp.net - 如何验证两个 ASP.NET 页面是否具有相同的输出 HTML？

> ID：15106825
> 
> 赞同：1
> 
> 时间：2013-02-27T07:55:53.403
> 
> 标签：asp.net, unit-testing, refactoring, nunit, legacy-code

我正在为一个 ASP.NET 网站处理遗留代码，我想重构。

我得出的结论是，测试中断的最简单方法是将最终的 HTML 与旧页面进行比较，尤其是因为无论如何都对 UI 有太多依赖。（如果这是一个不好的方法，请批评）

该页面是从查询字符串动态创建的，因此我需要使用所有不同的组合生成测试。

我该如何运行这个测试，理想情况下我还想将它集成到 NUnit 等工具中，可以这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:08:55.903

即使添加像 Panel 这样的单个容器控件也会完全破坏您的逻辑，因为这会更改为旧版 asp.net 生成的 ClientID。

您一定会得到太多误报，而页面并没有真正损坏。

此外，asp.net 不会呈现任何设置为`Visible`false 的内容。除非您的项目没有在按钮单击（回发）时可见的代码，否则您不应该遵循这种方法。您会错过对隐藏部分的任何更改。

用户对重构、迁移后的最终页面的接受；最好手动完成。
您可以自动化数据和业务逻辑层的测试，但是使用传统的 asp.net 自动化 UI 测试似乎会占用太多时间并且几乎没有收益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:02:36.813

如果您拥有测试版或终极版，Visual Studio 中有一些选项，而[Selenium](http://docs.seleniumhq.org/)可能是另一个选项。

关于测试 UI 并且您仍然在 web 表单中，它总是非常复杂，因此根据您的场景，有些东西很容易在代码中测试（在 UI 之前），而其他东西可以只看，直到最后用您的 HTML呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T07:39:34.860

我偶然发现了一个有趣的工具，它似乎可以做到这一点，名为 Llewellyn Falco 的 Approval Tests。

[http://www.youtube.com/watch?v=52YouQkd-f8](http://www.youtube.com/watch?v=52YouQkd-f8)

# c# - 在 WPF 中使用 ListViewItem

> ID：15106829
> 
> 赞同：-3
> 
> 时间：2013-02-27T07:56:04.467
> 
> 标签：c#, wpf, listviewitem

```
foreach (string file in files)
{

      string fileName = System.IO.Path.GetFileNameWithoutExtension(file);
      ListViewItem item = new ListViewItem(fileName);
      item.Tag = file;

      lb.Items.Add(item);
} 
```

此代码收到错误消息，指出 ListViewItem 不包含采用 1 个参数的构造函数。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T07:59:01.750

阅读文档。`ListeViewItem`在其构造函数中不接受任何参数

```
 ListViewItem l = new ListViewItem();
 l.Content = filename; 
```

见[这里](http://msdn.microsoft.com/en-us/library/system.windows.controls.listviewitem.aspx)。

# php - 如何在按钮单击时调用 PHP 函数？

> ID：15106830
> 
> 赞同：0
> 
> 时间：2013-02-27T07:56:04.947
> 
> 标签：php, function, textbox, steam

我正在尝试设置一个将 Steam 用户 ID 转换为身份验证 ID 的网站。它会要求访问者输入他们的常规 Steam ID，然后点击按钮将其转换为身份验证 ID。Steam 为我们提供了从一种类型到另一种类型的 ID 转换功能。

**用于转换 ID 的 Steam 功能：**

```
function convert_steamid_to_accountid($steamid) 
     { 
        $toks = explode(":", $steamid); 
        $odd = (int)$toks[1];   
        $halfAID = (int)$toks[2]; 

        $authid = ($halfAID*2) + $odd;
        echo $authid;
      } 
```

下面是我尝试设置一个基本的 HTML 页面，该页面获取用户输入，然后使用该函数将该输入转换为其他内容。

```
 <INPUT TYPE = "Text" VALUE ="ENTER STEAM:ID" NAME = "idform">

<?PHP
$_POST['idform'];
$steamid = $_POST['idform'];
?> 
```

此外，这是默认 Steam 用户 ID 的样子：

> STEAM_0:1:36716545

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:21:35.500

如果你可以把它分成两个单独的文件，那么就这样做。

foo.html

```
<form method="POST" action="foo.php">
  <input type="text" value="ENTER STEAM:ID" name="idform" />
  <input type="submit" />
</form> 
```

foo.php

```
<?php
  function convert_steamid_to_accountid($steamid) 
  { 
    $toks = explode(":", $steamid); 
    $odd = (int)$toks[1];   
    $halfAID = (int)$toks[2]; 

    $authid = ($halfAID*2) + $odd;
    echo $authid;
  }

  $id = $_POST['idform'];
  convert_steamid_to_accountid($id)
?> 
```

如果您没有制作两个单独文件的选项，您可以将 php 代码添加到“foo.html”文件并让表单提交到同一个文件。但是，如果您这样做，请在调用 convert_steamid_to_accountid() 函数之前检查文件是否是第一次被请求，或者是因为提交了表单而被请求。您可以通过以下方式做到这一点：

```
if ($_SERVER['REQUEST_METHOD']=='POST'){
  // your php code here that should be executed when the form is submitted.
} 
```

# html - 如何通过 getElementById 选择“td 标签”

> ID：15106835
> 
> 赞同：0
> 
> 时间：2013-02-27T07:56:22.547
> 
> 标签：html

```
<script>

    alert(document.getElementById('a'));

</script>
<html>
    <table>
    <tr>
     <td id='a' class="test">test</td>
    </tr>
    </table>
</html> 
```

我试过这个，但结果是“null”。有人可以帮忙吗？谢谢~

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T07:57:27.960

试试这个

```
<html>
    <table>
    <tr>
     <td id='a' class="test">test</td>
    </tr>
    </table>

<script>

    alert(document.getElementById('a'));

</script>
</html> 
```

在 .下方有脚本标记`<td>`。Null 是因为您试图让脚本执行时不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:04:58.680

```
<html>
<head>
    <script>
        var readyStateCheckInterval = setInterval(function() {
            if (document.readyState === "complete") {
                alert(document.getElementById('a'));
                clearInterval(readyStateCheckInterval);
            }
        }, 10);
    </script>
    </head>
    <body>
        <table>
        <tr>
         <td id='a' class="test">test</td>
        </tr>
        </table>
    </body>
</html> 
```

这`document.readyState`是所有浏览器中内置的一个属性，用于检查页面是否已加载。

`readyState`有关该物业的更多信息：

*   [歌剧](http://dev.opera.com/articles/view/extensions-api-tab-readystate/)
*   [Mozilla](https://developer.mozilla.org/en-US/docs/DOM/document.readyState)
*   [IE浏览器](http://msdn.microsoft.com/en-in/library/ie/ms534359%28v=vs.85%29.aspx)

# iphone - 使用 GraphAPI 或 FQL Query 或 HTTP Post 方法为 Facebook 帖子点赞

> ID：15106841
> 
> 赞同：1
> 
> 时间：2013-02-27T07:56:39.880
> 
> 标签：iphone, ios, facebook-graph-api, facebook-fql

我想喜欢 Facebook 中的帖子，我有 post_id，但我无法从 IOS SDK 的 Facebook 开发人员页面中找到喜欢特定帖子的 FQL 查询。

在 Facebook 开发者页面上，它说您可以使用 HTTP POST 方法点赞帖子，这意味着我们不能使用 GraphAPI 或 fql.query 来点赞帖子。

任何人都可以分享 HTTP POST URL 来点赞 Facebook 中的帖子。

是否有人在这里使用 iOS 中的自定义按钮为 Facebook 帖子开发类似按钮功能。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:04:10.907

如果您在 iOS 中使用 Facebook SDK，以下是一个示例：

```
[FBRequestConnection startWithGraphPath:[NSString stringWithFormat:@"%@/likes", post_id]
                             parameters:[NSDictionary dictionary]
                             HTTPMethod:@"POST"
                      completionHandler:^(FBRequestConnection *connection,
                                          id result,
                                          NSError *error) 
                          {
                              if (error)
                              {
                                  NSLog(@"Error: %@", [error localizedDescription]);
                              }
                              else
                              {
                                  NSLog(@"Result: %@", result);           
                              }
                          }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:08:13.567

我看到您正在询问 HTTP POST URL 的字段（参数）。HTTP POST 请求（通常）不包含您在经典 GET 请求中传递参数时可能习惯使用的参数，例如某些 URL 中脚本名称后的**?param1=value¶m2=value 。**

POST 请求将数据发送到消息正文中的服务器，查看：[http://en.wikipedia.org/wiki/POST_(HTTP)](http://en.wikipedia.org/wiki/POST_(HTTP))

既然你知道了，这就是你可以做的：

您可以通过经典的 GET 请求获取喜欢的数量，该请求可以粘贴到任何 Web 浏览器并获取响应的 URL，例如：

```
https://graph.facebook.com/260895413924000_605362559477282/likes?access_token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx 
```

此网址将为您提供所有喜欢该帖子/照片的人的回复。

如果您知道帖子/照片是公开的，则可以省略 ?access_token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx （[https://www.facebook.com/photo.php?fbid=605362542810617&set=a.260905783922963.82517.260895413924000](https://www.facebook.com/photo.php?fbid=605362542810617&set=a.260905783922963.82517.260895413924000)）。如果不是，您需要生成一个实际的 access_token（也用于发布您需要生成一个）并进行测试，您可以在这里进行：[https ://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

现在，如果你想真正喜欢这张照片，你不能简单地形成一个 URL，你可以在浏览器中复制/粘贴它，这会触发点赞操作。这是因为浏览器不执行 POST 请求，您需要按照**Ivo Patrick Tudor Weiss**的建议通过代码来完成，或者最终出于测试目的，您可以使用控制台中的 curl 实用程序来完成，如下所示：

```
curl --data "access_token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" https://graph.facebook.com/260895413924005362559477282/likes 
```

并且您可以使用 HTTP DELETE ... 撤消类似操作，如下所示：

```
curl --data "access_token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" -X DELETE https://graph.facebook.com/260895413924000_605362559477282/likes 
```

**- 更新，关于 OP 在评论中提出的其他问题：**

当然可以使用 ASIHTTPRequest 发出 GET、POST 和 DELETE HTTP 请求。但是，我不建议在您的情况下使用该库。一个原因是 ASIHTTPRequest 的作者已经停止在这个库上工作，另一个原因是 Facebook SDK for iOS 是一个更好的选择，因为有了它，你已经处理了许多其他事情。这里说的是例子：

首先根据您的需要键入这三种组合中的一种：

*获取所有喜欢特定帖子的人：（*
为简单起见，我在这里省略了 access_token，但如果需要，您可以将其附加到 URL 中）

```
NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/260895413924000_605362559477282/likes"];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url]; 
```

*喜欢自己的具体帖子：*

```
NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/260895413924000_605362559477282/likes"];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request appendPostData:[@"access_token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" dataUsingEncoding:NSUTF8StringEncoding]];
//[request setRequestMethod:@"POST"]; // <--- NOT NEEDED since it is the default if you previously called appendPostData 
```

*与帖子不同：*

```
NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/260895413924000_605362559477282/likes"];
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
[request appendPostData:[@"access_token=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" dataUsingEncoding:NSUTF8StringEncoding]];
[request buildPostBody];
[request setRequestMethod:@"DELETE"]; 
```

然后执行实际的请求：

```
[request startSynchronous];
NSString *response = [request responseString];
NSLog(@"Response: %@", response); 
```

请记住，同步请求可以用于测试，但如果您在实际应用程序的主线程上使用它，您的 GUI 将无响应。在此处了解如何执行异步请求：http: [//allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

至于您的 iOS 示例。把所有的代码都写在这里就太过分了。您已经从 Ivo Patrick Tudor Weiss 那里得到了完全正确的答案。唯一缺少的是您需要在 Facebook 上进行身份验证并建立 FBSession 的样板代码。

我建议您在这里查看此材料：[https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/)

Download the latest SDK which contains also the sample code, and follow the tutorial on Facebook web. Then when you get the basics configured, get back to the answer you got from Ivo.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T11:27:40.457

您可以使用 Graph API 在 Facebook 帖子中发布点赞。正如这里的文档中所说：http: [//developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)

要创建一个赞，您需要向具有权限的连接发出`HTTP POST`请求。您可以通过传递值为 的参数来禁止在喜欢 Post 时创建的通知。`POST_ID/likes``publish_stream``notify``false`

# java - Java 日期转换

> ID：15106842
> 
> 赞同：-2
> 
> 时间：2013-02-27T07:56:44.743
> 
> 标签：java

我想将此传入日期“962409600000”转换为日期。我首先尝试将其转换为日期时间格式“2000-07-01T05:45:00.000+05:45”，然后将其转换为 2000-07-01。但我成功转换为日期时间格式。请帮助我如何做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:59:41.003

将它作为一个`Date`，只需使用：

```
Date date = new Date(962409600000L); 
```

如果您希望将其作为*字符串*表示，请使用：

```
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd", Locale.US);
format.setTimeZone(TimeZone.getTimeZone("Etc/UTC"));
String text = format.format(date); 
```

请注意将时区设置为 UTC 的部分 - 您给出的值是 7 月 1 日午夜 UTC。如果您应用默认时区，您将在夏季时间落后于 UTC 的任何地方结束前一天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:07:04.007

首先将String解析为Long格式

```
 Long inComingDate = Long.parseLong("962409600000");//parse the string to long 
```

构造 Date 对象并使用[SimpleDateFormat对其进行格式化](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

```
 Date date = new Date(inComingDate); //Convert the java.util.Date
  SimpleDateFormat format = new SimpleDateFormat("dd-MM-yyyy");  //convert it format you desire
  String dateInString = format.format(date); 
```

# javascript - 使用 id 数组过滤和排序主干集合

> ID：15106843
> 
> 赞同：4
> 
> 时间：2013-02-27T07:56:48.353
> 
> 标签：javascript, backbone.js, underscore.js, sorting

我对 Backbone 很陌生，所以我遇到了一些我无法弄清楚的问题。

我有一个包含 100 多个项目的 Backbone 集合。我想用一组 id 过滤这些，这工作正常，但我希望项目的顺序也基于这个数组的项目顺序。那是行不通的。其他排序方法似乎是基于 asciibetical 的，这也不是我需要的。是否可以使用此过滤器获取项目，然后按照我定义的顺序将它们放入集合中？

我有一个用于过滤的 id 数组，该数组如下所示：

```
var dDefaultItems = ['1','2','146','3','4','9','26','8','96','10','11','54','145','273','38']; 
```

收集和过滤的代码如下所示：

```
var ChannelCollection = Backbone.Collection.extend({        
    fetch : function() {
       var params = _.extend({}, arguments, { 
            data : { 
                "groupnumber" : "1000"
            }
        });
        this.constructor.__super__.fetch.apply(this, [params]);

    },

    model : Channel,

    url : function () {
        return utility.apiUrl('/myurl/tothething');  
    },

    filterData: function(params) {

        this.originalModels = this.models.slice();

        _.each(params, function(val, key){
            if (typeof val !== 'object') val = [ val ];
            this.models = _.filter(this.models, function(model){
                return _.indexOf(val, model.get(key)) !== -1;
            }, this);
        }, this);
        return this.reset(this.models).toJSON();
    },

    parse : function(json) {            

        return json.channelInfoList;
    }

 }); 
```

然后我用这段代码在视图中渲染它（还有其他一些代码用于定义模型和其他我认为不相关的属性，我可能错了，但我想有人会知道我需要什么这个。）

```
var ChannelListView = Backbone.View.extend({

    initialize: function() {
       var _this = this;

        currentChannelList = new ChannelCollection();

        currentChannelList.once("sync", function() {
           _this.render();
        });

        currentChannelList.fetch();
    },
    render : function() {
      var _this = this;

      $(_this.el).empty();

     dust.render("list-channels", { channelList : currentChannelList.filterData({id: dDefaultItems})} , function(err, html) {

        var $el = $(html).appendTo($(_this.el));
      });  
    }
 }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-27T09:18:34.990

除非您实现`Collection#comparator`. 问题是您的过滤算法没有产生有序的输出。

如果仅在按 id 过滤时需要维护有序集合，我建议实现一个单独的方法，因为与按任意属性搜索相比，按 id 搜索要快得多：

```
filterById: function(idArray) {
  return this.reset(_.map(idArray, function(id) { return this.get(id); }, this));  
} 
```

用法：

```
collection.filterById(['1', '2', '146', '3', '4', '9', '26', '8', '96', '10', '11', '54',' 145', '273', '38']); 
```

# java - 以编程方式将多个 jpeg 图像嵌入到 EXCEL 中？

> ID：15106844
> 
> 赞同：2
> 
> 时间：2013-02-27T07:56:48.027
> 
> 标签：java, python, ruby, image, excel

亲爱的 Stackoverflowers，

输出带有图像的 Excel 电子表格是我正在做的一个项目的要求。我做了一些研究，发现了以下（可能是不正确的）共识：

*   用于创建 excel 表的各种 python 库运行良好
*   可以插入图像（但只能在 bmp 中）
*   excel 文件中使用的图像的“内部格式”很复杂，这可能就是为什么没有第三方库支持插入普通格式（如 jpeg）的原因。

我不想使用或转换为 bmp。为什么？BMP 没有很好地压缩，并且这些将是**大**张，所以我想尽可能地减轻图像的大小影响（每行 1 个）。

我的理想答案来自真正做到这一点的人。建议的方法可以是 Java、Ruby、Python（但不是 .NET）或其他一些创造性的方法。

我真的希望有人有一个解决方案，因为我预计这可能是一个棘手的领域（可能类似于玩 PDF 的复杂性）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:20:22.743

Perl 模块[Excel::Writer::XLSX](http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX.pm)可以将[JPEG、PNG 和 BMP 图像](http://search.cpan.org/~jmcnamara/Excel-Writer-XLSX/lib/Excel/Writer/XLSX.pm#insert_image%28_%24row,_%24col,_%24filename,_%24x,_%24y,_%24x_scale,_%24y_scale_%29)插入到新的 Excel 工作簿中。

我目前正在将它移植到一个名为[XlsxWriter](https://xlsxwriter.readthedocs.org/en/latest/)的 Python 模块中，该`inset_image()`函数位于 TODO 列表的顶部附近。

**更新**：从 XlsxWriter 的 0.1.6 版开始，现在可以添加 PNG/JPEG 图像。请参阅[文档中的示例](https://xlsxwriter.readthedocs.org/en/latest/example_images.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:08:58.410

正如上面评论中所说，[Apache POI](http://poi.apache.org/)可以解决您的问题。

我做了一些研究，这个例子应该很有用[Apache POI Excel 插入图像](http://www.mysamplecode.com/2012/06/apache-poi-excel-insert-image.html)

# c++ - Qt 中缺少链接器

> ID：15106845
> 
> 赞同：0
> 
> 时间：2013-02-27T07:56:53.627
> 
> 标签：c++, qt, qt4, fedora, owncloud

我已经下载了这个项目[https://github.com/owncloud/sync-qt](https://github.com/owncloud/sync-qt) 接下来我对它做了一些修改。由于缺少库，我已添加此文件[https://github.com/frankosterfeld/qtkeychain和 sqlite3.h](https://github.com/frankosterfeld/qtkeychain)

现在的问题是我遇到了这些问题：

*   错误：找不到-lqtkeychain
*   错误：找不到-lsqlite3
*   错误：找不到-lkparts
*   错误：找不到-lkdeui
*   错误：找不到-lkdecore
*   错误：collect2：错误：ld 返回 1 退出状态

我的操作系统是 Fedora 18 64bit 我正在使用基于 Qt 4.8.2（64 位）的 Qt Creator 2.5.0

我认为这个错误是我缺少一些链接器！但我不知道如何解决这个问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:32:58.980

缺少的不是“链接器”，而是链接最终可执行文件所需的一些（开发）*库*（链接器获取从您的源生成的目标文件和所有必需的库并将它们链接在一起以生成最终的可执行文件）。

您需要确保安装了必要的 -devel 包 - 例如对于 kde 库，您需要安装`kdelibs4-devel`. 由于您已经能够*编译* 源代码，因此这些软件包似乎已经在您的系统上可用（它们还包含`#include`文件，因此如果没有它们，编译就会失败）。

似乎fedora 将这些库存储在/usr/lib/kde4/devel/（或/usr/lib64/kde4/devel/）下面——检查这些文件是否存在（例如`/usr/lib64/kde4/devel/libkdecore.so`）。如果没有，请安装相应的 -devel 包，例如

```
# yum install kdelibs4-devel 
```

# php - (CURL, PHP) 使用 PUT 请求上传文件，我该如何处理？

> ID：15106849
> 
> 赞同：2
> 
> 时间：2013-02-27T07:57:19.990
> 
> 标签：php, curl, upload, put

这就是我在 process.php 中的内容

```
parse_str(file_get_contents("php://input"),$upload_data);
if (isset($upload_data)) {
   print_r($upload_data);
   exit;
} 
```

这就是我使用 curl 查询服务器的方式。

```
weldan@prindu:~$ curl -X PUT -H "X-TOKEN: test123" -F filedata=@/home/weldan/Pictures/Cool-Pictures1.jpg  http://host.tld/process.php
Array
(
    [------------------------------22031b6e799c
Content-Disposition:_form-data;_name] => "filedata"; filename="Cool-Pictures1.jpg"
Content-Type: image/jpeg

���
) 
```

这样我怎么知道那里有上传的文件。

当前的问题是，如何像 $_FILES 变量一样处理这个文件？

也开放其他方式来实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:07:17.873

在 PUT 请求上填充 $_FILES 数组。这是因为 PUT 请求会在 url 中指定文件名，在正文中指定文件内容。而已。

您必须`php://input`按照您已经建议的方式使用。

*上传.php*

```
<?php
/* PUT data goes to php://input */
echo file_get_contents("php://input"); 
```

然后使用以下 curl 命令行：

```
curl --upload -H "X-TOKEN: test123" a.txt  http://localhost/upload.php 
```

*评论后更新*：使用 --upload 选项应该适合您的需要。与 -X PUT 和 -F 不同的是，数据将被原始发送并且*不会被*多部分/表单数据编码.. curl 的隐藏宝藏之一；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-23T06:37:29.230

### 简短的回答

在您的情况下，唯一的方法是手动解析原始请求（看看[这个要点](https://gist.github.com/jas-/5c3fdc26fedd11cb9fb5)）

### 想法

*   PUT 请求只能用于上传一个文件（不是来自 html 上传表单，而是使用自定义请求）。在服务器上，您只需获取原始文件内容并将其写入某个文件。
*   使用不带文件的 PUT (application/x-www-form-urlencoded) 并使用解析原始请求`parse_str(file_get_contents("php://input"), $_PUT);`
*   使用 POST 上传文件（multipart/form-data）。

# php - bryntum 组件集成

> ID：15106856
> 
> 赞同：0
> 
> 时间：2013-02-27T07:57:41.880
> 
> 标签：php, extjs, schedule, zoho

我正在尝试将 bryntum 组件（计划）集成到 php 中。我对 ext js 不太了解。请在[此处查看图片](http://fgtpl.com/fugenx1/public_html/stackoverflow/bryntum.png)

在这里，名称字段正在正确获取，而容量没有访问。这些值来自 Zoho CRM。我的代码类似于[Click](http://fgtpl.com/fugenx1/public_html/stackoverflow/demo.zip)，而 r-read.php 文件是负责从 CRM 获取记录并将其存储为 json 格式的文件。它像是

```
{
    "success": true,
    "total": 9,
    "root": [{
        "Id": 1,
        "Name": "Sri Test",
        "Capicity": "190.0"
    }, {
        "Id": 2,
        "Name": "tester_test01",
        "Capicity": "500.0"
    }, {
        "Id": 3,
        "Name": "Tesing room 23",
        "Capicity": "5000.0"
    }, {
        "Id": 4,
        "Name": "Test for 6th product",
        "Capicity": "5000.0"
    }, {
        "Id": 5,
        "Name": "Banquet hall test-01",
        "Capicity": "500.0"
    }, {
        "Id": 6,
        "Name": "test room",
        "Capicity": "1000.0"
    }, {
        "Id": 7,
        "Name": "Grande Ballroom",
        "Capicity": "4000.0"
    }, {
        "Id": 8,
        "Name": "Cedar Room",
        "Capicity": "1400.0"
    }, {
        "Id": 9,
        "Name": "Maple Room",
        "Capicity": "1200.0"
    }]
} 
```

在容量列中，它将像名称列一样显示 190.0、500.0、5000.0 等。

请让我知道您是否清楚。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:40:26.060

I'm not familier with the Bryntum schedular component, but most of the time when you have problems like these it's because you didn't define the `Capacity` field in your model.

I saw you used the following model: `Sch.model.Resource`. Can it be that is only has the `Name` field and not `Capacity`? Your JSON response looks fine to me.

# github - 如何在 jekyll 中运行两个独立的站点

> ID：15106857
> 
> 赞同：2
> 
> 时间：2013-02-27T07:57:51.543
> 
> 标签：github, jekyll, github-pages

我有两个不同设计的不同静态站点！我想在 1 个 Jekyll 服务器下运行它们.. 怎么做？

具体来说：这是我的情况：

我的 github 仓库有一个 gh-pages 分支。现在，我的项目需要两个不同的站点（当然在具有子文件夹的同一根目录下运行）。

1.  文档站点 - 应该在 username.github.com/repo/doc/ 运行
2.  测试站点 - 应该在 username.github.com/repo/test/ 运行

这两个站点中的每一个都有自己的 _includes、_layouts、静态文件等。这两个站点完全不同。

我如何设置这样的项目..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T02:15:54.427

如果您愿意通过首先运行 Jekyll 在本地构建站点，然后将其内容推`_site`送到 repo 的 gh-pages 分支上的相应目录，这很简单。

在名为“repo”的 github 存储库中，只需使用目录 doc 和 test 创建一个 gh-pages 分支。`_site`将通过在每个单独的 Jekyll 项目（可以放在任何地方）上运行 Jekyll 生成的内容复制到`doc/`和`test/`瞧。

我不相信你可以欺骗 github 在同一个 repo 上运行 jekyll 两次以将不同的站点编译为子文件夹。但是，只需在 _layouts 中使用不同的布局（指向不同的 css 文件等），您就可以使两个完全独立的网页按您希望的方式显示——我不明白为什么它是绝对必要的（除了简单的偏好）将它们作为单独的 Jekyll 项目进行维护。（这种方法将允许您只推送您的更改并让 github 运行 Jekyll 并构建站点）。

# java - Selenium IDE 不会更改 PrimeFaces 控件

> ID：15106861
> 
> 赞同：2
> 
> 时间：2013-02-27T07:58:09.223
> 
> 标签：java, selenium, primefaces, selenium-ide

我们有一个由 Java 和 PrimeFaces 框架开发的 web 表单。在这种形式中，我们有一个称为滑块的 ui 控件。它在水平线上包含一个按钮。当我们移动按钮时，它会给我们一个 [50,99] 范围内的数字。

问题是当我使用 Selenium IDE 记录测试用例时，Selenium 无法移动滑块控件。我怎样才能做到这一点？

这是我的滑块的样子：

![在此处输入图像描述](../Images/91eba8175410ea7a2bd7d5575c8550d0.png)

# java - 每个选项卡是否有不同的会话 bean（Java/JSF 托管 bean，而不是浏览器会话）

> ID：15106865
> 
> 赞同：0
> 
> 时间：2013-02-27T07:58:33.573
> 
> 标签：java, jsf, jsf-2, scope, javabeans

我想要的是每个选项卡/窗口不同的会话 bean。我知道会话 bean 有效，但我想为新选项卡创建新的会话 bean。以下是我想要新会话 bean 的原因。

假设在 page1，我有用户列表。单击用户时，我会在 page2 中获取用户的详细信息。

现在假设我有两个标签。在这两个页面中，我都有 page1.xhtml。在 tab1 上，我单击了用户 A。我在 page2.xhtml 上看到了用户 A 的详细信息现在我来到 tab2。在 tab2 上，我单击了用户 B。我在 page2.xhtml 上看到了用户 B 的详细信息 现在问题就在这里。现在我回到 tab1 并刷新 page2.xhtml，我看到了用户 B 的详细信息，这是不正确的，因为之前我看到的是用户 A 的详细信息。

因此，我想要的是每个新选项卡/窗口的新会话bean。

有没有办法为每个选项卡/窗口创建新的 sessionbean？也许在 primefaces 或 icefaces 中？

* * *

我认为 ViewScope 是解决方案，但事实并非如此。参考[BalusC 文章](http://balusc.blogspot.com/2011/09/communication-in-jsf-20.html)。

**@ViewScoped：****只要您与** ***浏览器 window/tab 中的同一个 JSF 视图***交互，这个范围内的 bean就会存在。它是根据 HTTP 请求创建的，并在您回发到不同的视图后被销毁。

* * *

**对于 SessionBean，我指的是 Java/JSF 托管会话托管 bean，而不是浏览器会话（历史）。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:54:22.093

If you are using CDI Conversation scope could help.

From the Java EE docs: [ConversationScoped](http://docs.oracle.com/javaee/6/api/javax/enterprise/context/ConversationScoped.html)

These tutorials might help.

1.  [CDI Conversations Part 1](http://www.andygibson.net/blog/article/cdi-conversations-part-1/)
2.  [CDI Conversations Part 2](http://www.andygibson.net/blog/tutorial/cdi-conversations-part-2/)

Hope this helps !!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T16:16:12.923

`@ViewScoped`确实是这个问题的解决方案。问题似乎是您在`UserX`从 page1.xhtml 导航时将数据（id、详细信息或其他内容）设置到会话中，然后在 page2.xhtml 中加载此会话数据。因此，如果这是您目前的情况，甚至 CDI`@ConversationScoped`都不会帮助您（因为它使用`cid`查询字符串参数）。

为了解决这个问题，您应该对 page2.xhtml 发出 GET 请求并发送 userId（或其他有用的参数）以恢复 UserX 的详细信息。

更多信息：

*   [如何选择合适的bean范围？](https://stackoverflow.com/q/7031885/1065197)
*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/q/6377798/1065197)

请注意，您可以加密参数（比方说，ID）来为您的参数添加一些安全性。请参阅第二个建议的链接以实现此目的。

# json - 如何在 Windows Phone 中将有效负载中的 Json 数据作为 Toast 或 Tile 通知发送

> ID：15106868
> 
> 赞同：1
> 
> 时间：2013-02-27T07:58:42.250
> 
> 标签：json, push-notification, windows-phone-7.1, mpns

我想在 Windows Phone 中将有效负载中的 Json 数据作为 Toast 或 Tile Notification 发送，如下所示：

```
string msg =
    "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
    "<wp:Notification xmlns:wp=\"WPNotification\">" +
       "<wp:Toast>" +
       "<wp:Text1><string></ltwp:Text1>" +
       "<wp:Text2><string></wp:Text2>" +
       "<wp:Json><data></wp:Json>" +
       "</ltwp:Toast>" +
    "</wp:Notification>"; 
```

如果可能，我能否在 ShellToastNotificationReceived 事件处理程序中接收 Json？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T13:45:23.610

您可以发送具有如下值的参数：

```
string msg =
  "<?xml version=\"1.0\" encoding=\"utf-8\"?>" +
  "<wp:Notification xmlns:wp=\"WPNotification\">" +
  "<wp:Toast>" +
  "<wp:Text1><string></ltwp:Text1>" +
  "<wp:Text2><string></wp:Text2>" +
  "<wp:Param>/Home.xaml?NavigatedFrom=Toast Notification</wp:Param>" +
  "</ltwp:Toast>" +
  "</wp:Notification>";` 
```

*   如果您的应用程序在前台运行，则会`PushChannel_ShellToastNotificationReceived(object sender, NotificationEventArgs e)`被触发，`e.Collection[key]`您可以在其中找到您发送的消息。
*   如果您的应用程序未在前台运行，则点击 toast 通知应用程序将启动并导航到指定页面（此处`/Home.xaml`）。在`OnNavigatedTo(NavigationEventArgs e)`页面事件中，您可以找到您传递的参数并可以使用它们。

因此，您可以通过在参数值中发送 json 字符串来尝试一下，并可以在您的应用程序中使用它们。我没有尝试过。这些信息可能对您有用。

一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T11:24:23.893

如果你想发送通用内容，你应该使用[Raw Notification](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202977%28v=vs.105%29.aspx)。这可以包含您想要的任何内容。

原始通知的限制是，如果您的应用程序未运行，则无法接收它，因此您可能希望向设备发送 Toast（或磁贴）通知，然后在随后启动应用程序时触发原始通知的发送通知。
当然，如果您正在发出 Web 请求以触发发送单个原始消息，那么仅发送有效负载以响应触发请求可能会更好。

# mongodb - 使用索引的 Mongodb MapReduce 性能

> ID：15106869
> 
> 赞同：2
> 
> 时间：2013-02-27T07:58:49.147
> 
> 标签：mongodb

我在 mongodb 中有一个示例文档（而且我还是 mongodb 的新手）

```
{
    "ID": 0,
    "Facet1":"Value1",
    "Facet2":[
        {
            "Facet2Obj1":{
                "Obj1Facet1":"Value11",
                "Obj2Facet1":"Value21",
                "Obj3Facet1":"Value31"
            }   
        },
        {
            "Facet2Obj2":{
                "Obj1Facet2":"Value12",
                "Obj2Facet2":"Value22",
                "Obj3Facet2":"Value32"
            }
        },
        {
            "Facet2Obj3":{
                "Obj1Facet3":"Value13",
                "Obj2Facet3":"Value23",
                "Obj3Facet3":"Value33"
            }
        }
    ],
    "Facet3":"Value3"
    "Facet4":{
        "Facet4Obj1":{
            "Obj1Facet1":"Value4111"
        }
    }
} 
```

Mapreduce 有点复杂，它提供以下输出（对于 30,000 个文档）：

```
{
    "_id" : "Facet1",
    "value" : [
        {
            "value" : "Value1",
            "count" : 30000,
            "ID" : [
                0,
                1,
            .
                .
                .
            ]
        }
    ]
}
{
    "_id" : "ID",
    "value" : [
        {
            "value" : 0,
            "count" : 1,
            "ID" : [
                0
            ]
        },
        {
            "value" : 1,
            "count" : 1,
            "ID" : [
                1
            ]
        },
        .
        .
        .
    ]
}
{
    "_id" : "Facet2",
    "value" : [
        {
            "value" : "Facet2Obj1",
            "count" : 30000,
            "ID" : [
                0,
                1,
                .
                .
                .
            ]
        },
        {
            "value" : "Facet2Obj2",
            "count" : 30000,
            "ID" : [
                0,
                1,
                .
                .
                .
            ]
        },
        {
            "value" : "Facet2Obj3",
            "count" : 30000,
            "ID" : [
                0,
                1,
                .
                .
                .
            ]
        }
    ]
}
{
    "_id" : "Facet3",
    "value" : [
    {
            "value" : "Value3",
        "count" : 30000,
            "ID" : [
                0,
                1,
                2,
                .
                .
                .
            ]
        }
    ]
} 
{
    "_id" : "Facet4",
    "value" : [
        {
            "value" : "Facet4Obj1",
            "count" : 30000,
            "ID" : [
                0,
                1,
                2,
                .
                .
                .
            ]
        }
    ]
} 
```

我将使用格式（具有不同 ID）的 30,000 个文档插入到 mongodb 中，然后我做了一个 map-reduce，但速度很慢。使用 30,000 个文档大约需要 30 分钟，但随后我将带有构面的索引放入它变得更快一点，就像需要 350 秒一样，但使用 50,000 个文档又需要大约 30 分钟。`db.collection.getIndexes()`当我使用mongodb检查索引时，将返回此输出：

```
{
    "v" : 1,
    "key" : {
        "_id" : 1
    },
    "ns" : "database.collection",
    "name" : "_id_"
},
{
    "v" : 1,
    "key" : {
        "ID" : 1,
        "Facet1" : 1,
        "Facet2" : 1,
        "Facet3" : 1,
        "Facet4" : 1
    },
    "ns" : "database.collection",
    "name" : "ID_1_Facet1_1_Facet2_1_Facet3_1_Facet4_1"
} 
```

我对map-reduce仍然不够快的索引做错了什么吗，因为索引必须在战略上放置，否则性能输出将相反

非常感谢您的回答，并在此先感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T11:56:31.557

MapReduce 将集合中的每个文档都传递给 map 函数，*除非*您传递它 {query: } 选项，它将用于“预”过滤发送到 MapReduce 的文档。您还可以将 {sort:} 选项传递给 mapReduce，它会将文档发送到按该字段排序的 map 函数。

这是唯一使用索引的两个地方 - 之后一切都发生在为工作而产生的 Javascript 线程中。

# javascript - IOS中的HTML5音频当前时间

> ID：15106874
> 
> 赞同：1
> 
> 时间：2013-02-27T07:59:01.373
> 
> 标签：javascript, html5-audio

我想播放声音，在某些情况下我正在更改当前时间，但在 IOS 中它很少工作正常（它从零秒开始或在我更改当前时间时继续！）

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T01:41:23.017

看看这个，很有帮助。[http://remysharp.com/2010/12/23/audio-sprites/](http://remysharp.com/2010/12/23/audio-sprites/)

我跑了这个，看看它是否可以播放：

```
 try {
                audio.pause();
                audio.currentTime = $( "#sliderOfTrack"+trackid).slider( "values", 0);
            } catch (e) {
              // what now?
            } 
```

# ckeditor - 在 CKEDITOR 4.0 中捕获已删除的字母

> ID：15106876
> 
> 赞同：0
> 
> 时间：2013-02-27T07:59:03.857
> 
> 标签：ckeditor, range, nodes, onkeydown

我需要捕捉删除/退格按钮的 keydown 事件。问题是插入符号位于标记/块的开头或结尾时。在这一刻，我需要抓住前一个/下一个块/标签的字母。

但是首先我不知道如何将我的范围移动到前一个块的最后一个字母？我已经尝试使用以下方法移动它：

```
var element = range.getPreviousNode(); // This returns a Text-Node
range.moveToElementEditablePosition(element,true); // This gives a error 
```

错误 sais: TypeError: h is null ckeditor.js(line 364) 但我认为这是因为你不能将焦点移到文本节点上？

问题是，如何才能捕捉到即将删除的字母？无需中断 CKEDITOR 工作流程。这样我就不必构建在块/标签之间切换的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T09:53:33.527

存储`editor.edtaible().getText()`在每个`key`事件上，并使用一些 diff 算法将其与先前的值进行比较。这个感觉不错：[https ://code.google.com/p/google-diff-match-patch/](https://code.google.com/p/google-diff-match-patch/)

原因是在某些情况下，退格/删除会删除多个字母，例如当插入符号位于某个块元素之后（整个块将消失）或选择了很多文本。此外，CKEditor 中的插入符号定位系统是不可预测的（浏览器是错误的和不可预测的），您的方式可能会导致您陷入困境。

# c - 如何在 C 中实现 printf 风格的函数

> ID：15106880
> 
> 赞同：-2
> 
> 时间：2013-02-27T07:59:17.403
> 
> 标签：c, printf

如何在 C 中实现 printf 样式函数。我需要在我的 C 代码中实现 printf 样式函数。否则请任何人都可以给我在 C 中的函数重载的好例子。谢谢:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:01:00.393

您使用[可变参数列表](http://linux.die.net/man/3/stdarg)来执行此操作。

需要一个初始参数，该参数包含正确解码其他参数的类型和顺序所需的信息，这是`printf()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:14:19.663

您说的是可变参数函数（又名“可变参数函数”）。如果你想很好地了解如何用 C 编写一个，我建议这个链接，它专门讨论 printf：[http ://c-faq.com/~scs/cclass/int/sx11b.html](http://c-faq.com/~scs/cclass/int/sx11b.html)

# web-services - 在 CRM 2011 中创建 Web 服务

> ID：15106884
> 
> 赞同：2
> 
> 时间：2013-02-27T07:59:43.773
> 
> 标签：web-services, dynamics-crm-2011, crm

如何在 CRM 2011 中创建 Web 服务？我知道 organizationData.svc WS 显示所有实体，但我想创建一个只显示一个实体的新 WS，我该如何创建它？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T09:31:18.630

您不会在 CRM 2011 中创建 Web 服务。您必须使用系统维护的 CRM Web 服务。当您添加或更改新实体时，系统将更新 Web 服务。您可以在 CRM Web 服务之上创建 Web 服务，但这是一种常见的 WCF 服务。在此处查看如何连接[CRM 2011](http://msdn.microsoft.com/en-us/library/gg334689.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T20:16:35.913

简短的回答：你不能。

长答案：您不能对 CRM 进行添加，而只是应用您自己的 Web 服务。你在这里留下了三个选择。

1.  忘记它并与它一起生活。
2.  设计一个模仿这种行为的外部 Web 服务。
3.  从完全不同的角度处理您的任务。

(1) 缺乏野心，所以我根本不会推荐它。

(2) 对我来说似乎没有必要。无论如何，您都无法阻止原始服务提供信息，并且您想要公开的内容已经包含在其中。

(3) 我对手头的任务一无所知，但我的猜测是，无论您希望实现什么，都可以通过不同的方法和重新设计解决方案来完成。

# c# - 异步等待 web api 文件 io

> ID：15106888
> 
> 赞同：0
> 
> 时间：2013-02-27T07:59:51.913
> 
> 标签：c#, asp.net-web-api, asp.net-4.5

我在 Web api 控制器中使用以下异步代码来处理 XML 文件。一切都按预期工作，但是这是 async/await 方法的正确使用。我基本上是从 XML 文件中提取所有图像，然后将它们保存到磁盘。我想尝试最小化文件 io 的影响。

```
public async Task<HttpResponseMessage> PostFile()
{
    await Task.WhenAll(this.ProcessProofOfPressenceImages(address, images, surveyReference), this.ProcessSketchImages(propertyPlans, images, surveyReference), this.ProcessExteriorImages(exteriorSketch, images, surveyReference));
    //db code
}

private async Task ProcessProofOfPressenceImages(Dictionary<object, object> container, List<Dictionary<string, string>> images, string surveyReference)
{
    if(images != null)
    {
        await Task.WhenAll(this.ProcessImagesHelper(container, images, surveyReference, "propertyImage"));
    }
}

private async Task ProcessSketchImages(Dictionary<object, object> container, List<Dictionary<string, string>> images, string surveyReference)
{
    if(images != null)
    {
        await Task.WhenAll(this.ProcessImagesHelper(container, images, surveyReference, "sketchPlanImage"), this.ProcessImagesHelper(container, images, surveyReference, "sketchFrontImage"), this.ProcessImagesHelper(container, images, surveyReference, "sketchRearImage"), this.ProcessImagesHelper(container, images, surveyReference, "sketchLeftSideImage"), this.ProcessImagesHelper(container, images, surveyReference, "sketchRightSideImage"));
    }
}

private async Task ProcessExteriorImages(Dictionary<object, object> container, List<Dictionary<string, string>> images, string surveyReference)
{
    List<Task> tasks = new List<Task>();

    if(images != null)
    {
        await Task.WhenAll(this.ProcessImagesHelper(container, images, surveyReference, "image1"), this.ProcessImagesHelper(container, images, surveyReference, "image2"), this.ProcessImagesHelper(container, images, surveyReference, "image3"), this.ProcessImagesHelper(container, images, surveyReference, "image4"), this.ProcessImagesHelper(container, images, surveyReference, "image5"), this.ProcessImagesHelper(container, images, surveyReference, "image6"));
    }
}

private async Task ProcessImagesHelper(Dictionary<object, object> container, List<Dictionary<string, string>> images, string surveyReference, string image)
{
    if(container.ContainsKey(image) && !String.IsNullOrEmpty(container[image].ToString()))
    {
        using(MemoryStream memoryStream = new MemoryStream((byte[])container[image]))
        {
            string url = String.Format(@"{0}{1}{2}_{3}.jpg", EcoConfiguration.Instance.RootUrl, EcoConfiguration.Instance.SurveyImageRootUrl, surveyReference, image.SplitOnCapital("_"));

            using(FileStream fileStream = new FileStream(url, FileMode.Create, FileAccess.Write))
            {
                Dictionary<string, string> imageDetails = new Dictionary<string, string>();
                imageDetails.Add("TypeId", ((int)SurveyImageType.Exterior).ToString());
                imageDetails.Add("ImageUrl", url);
                if(container.ContainsKey(image + "Description"))
                {
                    imageDetails.Add("Description", container[image + "Description"].ToSafeString());
                }
                images.Add(imageDetails);
                await memoryStream.CopyToAsync(fileStream);
            }
        }
    }
} 
```

非常欢迎任何意见/建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T13:55:11.617

文件流的棘手之处在于您需要传递`isAsync: true`或传递`FileOptions.Asynchronous`给构造函数/工厂方法才能获得真正的异步流。如果你不这样做，那么底层文件流实际上是阻塞的，异步方法只是使用线程池来*伪造*异步操作。

在你的代码中让我印象深刻的另一件事是你有一些不必要的使用`async`. `async`只应在*需要*时使用。例如，这种方法：

```
private async Task ProcessProofOfPressenceImages(Dictionary<object, object> container, List<Dictionary<string, string>> images, string surveyReference)
{
  if(images != null)
  {
    await Task.WhenAll(this.ProcessImagesHelper(container, images, surveyReference, "propertyImage"));
  }
} 
```

可以写成：

```
private Task ProcessProofOfPressenceImages(Dictionary<object, object> container, List<Dictionary<string, string>> images, string surveyReference)
{
  if(images != null)
  {
    return Task.WhenAll(this.ProcessImagesHelper(container, images, surveyReference, "propertyImage"));
  }

  return Task.FromResult<object>(null);
} 
```

这为您节省了不必要的状态机。同样的建议也适用于`ProcessSketchImages`和`ProcessExteriorImages`。

关于`ProcessImagesHelper`，它看起来相当不错，但我不确定你为什么需要`MemoryStream`. （异步）将字节数组写入磁盘同样容易。

如果您对`async`性能提示感兴趣，[Stephen Toub 有一个很棒的视频](http://channel9.msdn.com/Events/Build/BUILD2011/TOOL-829T)。

# sql-server-2008 - 在 SQL 中找出表中所有具有 Null 值的列

> ID：15106891
> 
> 赞同：0
> 
> 时间：2013-02-27T07:59:57.350
> 
> 标签：sql-server-2008, null

我正在使用 Sql Server 2008。在我的表的一个列中具有空值。现在我想使用查询找出表中所有具有空值的列。

那么如何在SQL中找出表中所有具有空值的列呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:11:03.963

假设你的桌子是

```
CREATE TABLE T
(
A INT PRIMARY KEY,
B CHAR(1000) NULL,
C CHAR(1000) NULL
) 
```

一种方法是

```
SELECT 
    MAX(CASE WHEN B IS NULL THEN 1 ELSE 0 END) AS B,
    MAX(CASE WHEN C IS NULL THEN 1 ELSE 0 END) AS C
FROM T 
```

这很简单，但最终可能会不必要地扫描整个表。即使扫描的第一行包含`NULL`两列。

一个可能避免这种情况的查询是

```
SELECT DISTINCT TOP 2 NullExists
FROM test T 
CROSS APPLY (VALUES(CASE WHEN b IS NULL THEN 'b' END),
                   (CASE WHEN c IS NULL THEN 'c' END)) V(NullExists)
WHERE NullExists IS NOT NULL 
```

执行计划和一些替代方法在[我的问题](https://dba.stackexchange.com/questions/19344/how-to-efficiently-check-exists-on-multiple-columns)中。

# iphone - 在其他视图控制器下面创建一个视图控制器

> ID：15106893
> 
> 赞同：1
> 
> 时间：2013-02-27T08:00:07.900
> 
> 标签：iphone, ios, objective-c, view, uiviewcontroller

我想创建一个要在其中翻转的 ios 应用程序`uiviewcontrollers`。我想使用滑动手势在`uiviewcontrollers`.

我有2个`uiviewcontrollers`，其中我想将一个视图控制器设置在`uiviewcontroller`封面顶部，将一个视图控制器设置在底部，然后制作一个动画，让顶部`uiviewcontroller`向左滑动到屏幕外，底部`uiviewcontroller`将逐步出现.

做这个的最好方式是什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:03:43.133

*   使用容器视图创建一个 RootViewController。
*   将子视图控制器添加到根视图控制器。
*   添加手势识别器来操作视图。
*   使用 iOS5 的“视图控制器容器”功能，可以更轻松地管理生命周期调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T11:48:44.067

正如 Jasper 所写，您应该创建新的`UIViewController`- “root”，它将容纳孩子`UIViewControllers`- “bottom”和“top”。它还将显示他们的观点。要实现“底部”在下方的效果，您应该首先将其视图添加为子视图。

看看[http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)它可能会让你知道如何处理孩子`UIViewControllers`

# php - 是否可以访问 iframe 外部的 html（来自 iframe）？

> ID：15106894
> 
> 赞同：0
> 
> 时间：2013-02-27T08:00:12.187
> 
> 标签：php, javascript, jquery, html, iframe

像这样：

```
<!DOCTYPE html>
<html>
<meta><script type="text/javascript" src="jquery1.x.js"></script></meta>
<body>
<iframe src="myiframe.html">
</iframe>
<div class="dialog" style="display:none;">
 Hello world!
</div>
</body>
</html> 
```

(myiframe.html)

```
<script type="text/javascript">
$('.dialog').show();
</script> 
```

也许使用 AJAX？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:08:56.773

你可以这样访问

```
var parentBody = window.parent.document.body;
$(".dialog", parentBody).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:14:01.350

如果 iframe 和页面具有相同的域（这实际上意味着遵守相同的域策略[https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)），那么您可以通过以下方式轻松访问页面窗口对象

```
var parentPage = window.parent; 
```

然后打电话

```
parentPage.$('.dialog').show(); 
```

但是，如果域不匹配，您将在此处获得安全异常。

# windows-phone-7 - 如何在Windows Phone中将单例对象从一个页面传递到另一个页面

> ID：15106895
> 
> 赞同：0
> 
> 时间：2013-02-27T08:00:13.307
> 
> 标签：windows-phone-7, navigation

我在 page1.xaml 中创建了一个单例类对象。我需要在 page2.xaml 中发送和访问这个对象。我的代码如下

```
private void Login_Button_Click(object sender, RoutedEventArgs e)
    {
       myClient credentials = Credentials_Config.CreateInstance(accesskey_Textbox.Text,secretkey_Textbox.Password);

    } 
```

其中 Credentials_Config.CreateInstance() 是单例类方法。凭据接收单例对象。如何将此对象传递给 page2.xaml？谁能帮我实现这一目标？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:16:58.563

您在 Credentials_Config 中支持的属性应该是静态的（如果它是正确的单例实现）。因此，只需在程序的任何位置/页面中使用它。您可以修改 CreateInstance 方法以返回已初始化的实例（如果存在）或将其初始化然后返回。

```
public static Credentials_Config
{
    private static myClient _client;
    public static myClient CreateInstance (string key, string pass)
    {
        if (_client == null)
        {
            _client = new myClient();
            // some init stuff
        }
        return _client;
    }
} 
```

如果您需要线程安全的单例，则必须在创建 myClient 实例时设置锁定。

# blackberry - 在后台运行 BlackBerry PhoneGap 应用程序

> ID：15106897
> 
> 赞同：1
> 
> 时间：2013-02-27T08:00:22.240
> 
> 标签：blackberry, blackberry-webworks

我正在科尔多瓦的 PhoneGap 开发一个 BlackBerry 应用程序。我需要在后台运行应用程序以每隔 15 分钟发送一次短信。

这在 PhoneGap 项目中可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T16:02:07.210

如果您正在为基于 BBOS 的设备（6.0、7.0）制作项目，则可以通过在 config.xml - [http://developer.blackberry.com/html5/documentation/rim_background_element_1265316_11.html](http://developer.blackberry.com/html5/documentation/rim_background_element_1265316_11.html)中添加一个条目来完成。

如果您希望应用程序在用户关闭应用程序时继续在后台运行，则需要捕获 back 事件。

# c# - ExecuteReader 不返回存储过程返回的所有记录

> ID：15106900
> 
> 赞同：0
> 
> 时间：2013-02-27T08:00:30.607
> 
> 标签：c#, sql-server

我正在使用`ExecuteReader`of`Microsoft.Practices.EnterprizeLibrary`从数据库中获取数据。我创建的存储过程返回了两条记录，但`ExecuteReader`给了我一条记录。我很困惑为什么会这样。我正在使用以下代码行。

```
public List<Products> GetProductsData(Products p)
    {

        List<Products> productList = new List<Products>();
        using (IDataReader rdr = dbt.ExecuteReader("pGetProducts",p.productType))
        while (rdr.Read())
            {
                Products obj= new Products();
                {
                    obj.Id = Common.CheckIntegerNull(rdr["id"]);
                    obj.AId = Common.CheckIntegerNull(rdr["aid"]);
                    obj.Name = Common.CheckStringNull(rdr["name"]);
                    obj.Price = Common.CheckDecimalNull(rdr["amt"]);

                }
                productList.Add(obj);
            }
        return productList;
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:04:11.937

要使用执行的所有结果集，您需要调用它，[`NextResult()`](http://msdn.microsoft.com/en-us/library/system.data.idatareader.nextresult.aspx)直到它返回 false。

```
public List<Products> GetProductsData(Products p)
{

    List<Products> productList = new List<Products>();
    using (IDataReader rdr = dbt.ExecuteReader("pGetProducts",p.productType))
    {
       do
       {
          while (rdr.Read())
          {
            Products obj= new Products();
            {
                obj.Id = Common.CheckIntegerNull(rdr["id"]);
                obj.AId = Common.CheckIntegerNull(rdr["aid"]);
                obj.Name = Common.CheckStringNull(rdr["name"]);
                obj.Price = Common.CheckDecimalNull(rdr["amt"]);

            }
            productList.Add(obj);
          }
        } while (rdr.NextResult());
      return productList;
    }
} 
```

# php - authorize.net 显示加密数据警报

> ID：15106901
> 
> 赞同：0
> 
> 时间：2013-02-27T08:00:30.297
> 
> 标签：php, payment-gateway, authorize.net

我正在使用 authorize.net 进行付款。但是当我的任何客户从我的网站付款时，发生错误说，

您请求了一个包含一些未加密信息的加密页面。您在此页面上看到或输入的信息很容易被第三方读取。

并从后端减少客户帐户的金额，但不返回结果，这就是为什么我的网站再次向他显示付款表格

# android - 在android中一段时间 后创建媒体播放器

> ID：15106902
> 
> 赞同：1
> 
> 时间：2013-02-27T08:00:33.763
> 
> 标签：android

我是 android 新手，需要在声音结束后播放声音和显示图像。

下面提到的代码告诉你，声音完成后显示下一个图像并播放与之相关的声音

代码：

```
mymediaplayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {

            @Override
            public void onCompletion(MediaPlayer mp) {
                // TODO Auto-generated method stub
                //mymediaplayer=null;
                //mymediaplayer.reset();
                mseekbar.setProgress(0);
                count++;
                Toast.makeText(getApplicationContext(), "SONG PLAYING OVER", 0).show();
                changeImage(count);
                playsound(count);

            }
        }); 
```

所以对于某些图像它可以，但是在某些图像之后它会抛出异常，说**无法创建媒体播放器**，然后强制关闭应用程序。

下面是 playsound 方法的代码。

```
private void playsound(int soundindex) {
        // TODO Auto-generated method stub
        if(mymediaplayer!=null)
            mymediaplayer.release();
        Toast.makeText(getApplicationContext(), "SOUND"+soundindex, 0).show();
        if(souncollect.getlengthofsoundfile_array()>=count)
        {
            try
            {
            mymediaplayer=MediaPlayer.create(MainActivity.this, souncollect.capture_sound.get(soundindex));

            mymediaplayer.seekTo(0);
            mymediaplayer.start();
            new Thread(this).start();
            }
            catch(Exception ex)
            {
                Toast.makeText(getApplicationContext(), "ERROR WHILE PLAYING SOUND", Toast.LENGTH_LONG).show();
            }
        }
        else
        {
            Toast.makeText(getApplicationContext(), "NO SOUND TO PLAY", Toast.LENGTH_SHORT).show();
        } 
```

所有声音和图像的东西都在一些arraylist中的其他类上定义。在arraylist中我有18个声音和18个图像。

下面提到异常的日志文件

```
02-27 13:06:00.908: D/dalvikvm(1503): GC_EXTERNAL_ALLOC freed 87K, 52% free 2615K/5379K, external 2112K/2137K, paused 53ms
02-27 13:06:10.928: D/dalvikvm(1503): GC_EXTERNAL_ALLOC freed 23K, 52% free 2621K/5379K, external 2289K/2613K, paused 42ms
02-27 13:06:15.488: D/dalvikvm(1503): GC_EXTERNAL_ALLOC freed 14K, 52% free 2631K/5379K, external 7212K/8760K, paused 264ms
02-27 13:06:21.039: D/dalvikvm(1503): GC_EXTERNAL_ALLOC freed 10K, 52% free 2634K/5379K, external 7015K/8761K, paused 42ms
****02-27 13:06:27.098: E/MediaPlayer(1503): Unable to to create media player
02-27 13:06:27.098: D/MediaPlayer(1503): create failed:
02-27 13:06:27.098: D/MediaPlayer(1503): java.io.IOException: setDataSourceFD failed.: status=0x80000000****
02-27 13:06:27.098: D/MediaPlayer(1503):    at android.media.MediaPlayer.setDataSource(Native Method)
02-27 13:06:27.098: D/MediaPlayer(1503):    at android.media.MediaPlayer.create(MediaPlayer.java:666)
02-27 13:06:27.098: D/MediaPlayer(1503):    at com.goutam.imageandplaysound.MainActivity.playsound(MainActivity.java:85)
02-27 13:06:27.098: D/MediaPlayer(1503):    at com.goutam.imageandplaysound.MainActivity.access$3(MainActivity.java:76)
02-27 13:06:27.098: D/MediaPlayer(1503):    at com.goutam.imageandplaysound.MainActivity$1.onCompletion(MainActivity.java:117)
02-27 13:06:27.098: D/MediaPlayer(1503):    at android.media.MediaPlayer$EventHandler.handleMessage(MediaPlayer.java:1316)
02-27 13:06:27.098: D/MediaPlayer(1503):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-27 13:06:27.098: D/MediaPlayer(1503):    at android.os.Looper.loop(Looper.java:123)
02-27 13:06:27.098: D/MediaPlayer(1503):    at android.app.ActivityThread.main(ActivityThread.java:3683)
02-27 13:06:27.098: D/MediaPlayer(1503):    at java.lang.reflect.Method.invokeNative(Native Method)
02-27 13:06:27.098: D/MediaPlayer(1503):    at java.lang.reflect.Method.invoke(Method.java:507)
02-27 13:06:27.098: D/MediaPlayer(1503):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-27 13:06:27.098: D/MediaPlayer(1503):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-27 13:06:27.098: D/MediaPlayer(1503):    at dalvik.system.NativeStart.main(Native Method)
02-27 13:06:27.218: D/AndroidRuntime(1503): Shutting down VM
02-27 13:06:27.218: W/dalvikvm(1503): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-27 13:06:27.228: E/AndroidRuntime(1503): FATAL EXCEPTION: main
02-27 13:06:27.228: E/AndroidRuntime(1503): java.lang.NullPointerException
02-27 13:06:27.228: E/AndroidRuntime(1503):     at com.goutam.imageandplaysound.MainActivity.playsound(MainActivity.java:106)
02-27 13:06:27.228: E/AndroidRuntime(1503):     at com.goutam.imageandplaysound.MainActivity.access$3(MainActivity.java:76)
02-27 13:06:27.228: E/AndroidRuntime(1503):     at com.goutam.imageandplaysound.MainActivity$1.onCompletion(MainActivity.java:117)
02-27 13:06:27.228: E/AndroidRuntime(1503):     at android.media.MediaPlayer$EventHandler.handleMessage(MediaPlayer.java:1316)
02-27 13:06:27.228: E/AndroidRuntime(1503):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-27 13:06:27.228: E/AndroidRuntime(1503):     at android.os.Looper.loop(Looper.java:123)
02-27 13:06:27.228: E/AndroidRuntime(1503):     at android.app.ActivityThread.main(ActivityThread.java:3683)
02-27 13:06:27.228: E/AndroidRuntime(1503):     at java.lang.reflect.Method.invokeNative(Native Method)
02-27 13:06:27.228: E/AndroidRuntime(1503):     at java.lang.reflect.Method.invoke(Method.java:507)
02-27 13:06:27.228: E/AndroidRuntime(1503):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-27 13:06:27.228: E/AndroidRuntime(1503):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-27 13:06:27.228: E/AndroidRuntime(1503):     at dalvik.system.NativeStart.main(Native Method)
02-27 13:11:27.292: I/Process(1503): Sending signal. PID: 1503 SIG: 9 
```

正如你所看到的一些图像和声音它运行正常，但一段时间后它无法创建媒体播放器。所以很困惑，不知道如何实现媒体播放器来逐个播放声音。它在图像编号 7 后失败。

代码中也提到了onpause状态

```
@Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        if(!mymediaplayer.isPlaying())
        {
            mymediaplayer=null;
            mymediaplayer.release();
        }
    } 
```

所以请建议什么是更好的方式。感谢您的回复

# c# - 同时更新两个数据库

> ID：15106904
> 
> 赞同：0
> 
> 时间：2013-02-27T08:00:47.587
> 
> 标签：c#

我有一个 SQL Server 实例，其中连接了两个数据库。一个是 MS SQL 数据库，另一个是链接服务器 (ODBC)，它是一个索引文件系统 (Vision)。假设客户表存在于两个数据库中并且应该保持相同。我将从链接服务器填充我的应用程序中的字段，如果进行了任何更改，则应将它们写入两个数据库。两个数据库中的字段名称也可能不同。我在应用程序中使用 ADO 连接，如果我只使用一个 db，通常会使用 adapter.Update。因为我将在整个应用程序中进行大量的数据库调用，所以我更愿意创建一种数据处理类来处理这个问题，并让我对这个类进行简单的调用。我还在考虑进行某种 db-transaction 以确保两个系统保持相同。有人对如何解决这个问题有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:04:12.097

我认为您可以有 2 个单独的项目来处理 DataLayer（每个 db 一个）并通过 Facade/Adapter 公开它们，该 Facade/Adapter 将处理将 CRUD 操作委托给它们，同时处理必要的转换（您提到了字段名称不同）。

在 Facade/Adapter 中，您还可以实现重试逻辑和事务以确保两个数据源同步。

# javascript - 如何摆脱包装 '\n' 得到 $(element).html()

> ID：15106915
> 
> 赞同：1
> 
> 时间：2013-02-27T08:01:51.730
> 
> 标签：javascript, jquery, html, dom

当我`$(eventObject.target).parent.html()`收到这样的字符串时

```
'\n    <img alt="" src="/..." ">\n  ' 
```

而我只需要

```
'<img alt="" src="/..." ">' 
```

如何获得正确的方法或如何从 '\n' 和空格中清除 html？

ps

目标是 div 内的图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:05:24.740

1) jQuery parent 是一个方法：

```
$(eventObject.target).parent().html(); 
```

2）您可以通过以下方式清理空间：

```
$(eventObject.target).parent().html().replace(/\s|\n|\r/g, ''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:07:09.840

采用

```
 $(eventObject.target).parent().html().replace(/(\r\n|\n|\r)/gm,""); 
```

# jquery - 取消绑定特定函数 jQuery

> ID：15106918
> 
> 赞同：7
> 
> 时间：2013-02-27T08:02:06.160
> 
> 标签：jquery, function, scrolltop, unbind

我要做的是在运行一次后取消绑定特定功能。在下面的代码中，它是窗口滚动。

```
 $(window).scroll(function(){
     if($(window).scrollTop() == viewportheight ){
          $("#landing_page").fadeOut(function() { $(window).scrollTop(0); $(window).unbind("scroll");});
     }
 }); 
```

基本上，当#div 淡出时，我希望它滚动到顶部（0）。滚动顶部后，我需要解除绑定整个函数。

有没有办法给这个函数一个特定的名字，然后回调那个名字？因为此代码有效，所以只有它删除了所有滚动功能。（当然我不想要）我在想这样的事情：

```
 $(window).scroll(function(FUNCTION NAME HERE){
     if($(window).scrollTop() == viewportheight ){
          $("#landing_page").fadeOut(function() { $(window).scrollTop(0); $(window).unbind("FUNCTION NAME HERE");});
     }
 }); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-27T08:07:07.143

杰斐逊之类的...

```
$(window).bind("scroll.myScroll", function(){
     // stuff
  }) 
```

现在，取消绑定滚动 - 我有一个唯一标识符，以防万一您有其他窗口滚动事件，您不想弄乱。

```
$(window).unbind('.myScroll'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:04:16.417

您可以使用 **jquery.unbind**函数取消绑定元素的任何特定事件

# memory - 当 CPU 写入不在缓存中的内存位置时，它会做什么？

> ID：15106919
> 
> 赞同：1
> 
> 时间：2013-02-27T08:02:06.660
> 
> 标签：memory, ram

`long pointer`假设我的程序的物理内存中的内存位置有 8 个字节。我的程序很小，可以完全放入缓存中。程序很简单。它只是映射（通过 mmap() 调用）从物理内存 in 的任意内存位置`/dev/mem`，通过该 8 字节长的指针读取和写入该位置。但是，该位置离我的程序在物理内存中的位置非常远，因此，L1/L2 缓存无法覆盖该地址。

根据文章 Getting Physical With Memory（由 Gustavo Duarte 撰写，我无法链接），仅当具有该内存位置的缓存线准备好写入 RAM 时才会发生内存写入：

> 通常，内核将所有 RAM 内存视为回写，这会产生最佳性能。在回写模式下，内存访问的单位是高速缓存行，在核心 2 中为 64 字节。如果程序读取内存中的单个字节，处理器会将包含该字节的整个高速缓存行加载到 L2 和 L1 高速缓存中。当程序写入内存时，处理器只修改缓存中的行，而不更新主存。稍后，当需要将修改后的行发布到总线时，会立即写入整个缓存行

但是如果目标内存位置不在缓存中（如上所述），它会立即被写入吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:42:29.030

您引用的参考资料解释了在这种情况下会发生什么 - 如果内存地址最近没有被访问，并且尚未加载到缓存行中，那么您对该位置的读取将导致该内存位置的内容 - 并且可能周围的位置 - 被读入高速缓存行。一旦在缓存中写入相关的内存地址，就会发生在这个缓存行中，直到某个时候主内存被修改后的缓存行更新。

# angularjs - 我如何在角度服务中传递参数

> ID：15106920
> 
> 赞同：-2
> 
> 时间：2013-02-27T08:02:12.840
> 
> 标签：angularjs

我在我的角度应用程序中有这个作为 serices.js

```
angular.module('services', [])
.factory('studentService', ['$http', function($http){
  return{
   getStudentDetail: function(callback, pid){
        $http.get('/api/student/'+pid+'/?format=json').success(function(data) {
        // prepare data here
        callback(data);
      });
    }

  };
}]); 
```

这是在我的控制器中

```
studentService.getStudentDetail(function(data, pid){
    $scope.student = data;
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:05:56.390

很难说这里的问题是什么，你还没有真正提出问题或描述你的问题。但从它的外观来看，这是：

```
studentService.getStudentDetail(function(data, pid){
    $scope.student = data;
}); 
```

应该：

```
studentService.getStudentDetail(function(data){
    $scope.student = data;
}, pid); 
```

# java - Java，连接到没有服务器的mysql文件

> ID：15106923
> 
> 赞同：3
> 
> 时间：2013-02-27T08:02:40.950
> 
> 标签：java, mysql, file

我想知道是否可以在不运行服务器的情况下使用 mysql 中的数据库文件。只需复制 db 文件并将其放置在某处，然后使用`"jdbc:mysql://localhost:3306/table";` 并将其更改为类似`"jdbc:mysql://C:/Users/me/Desktop/table";`

这会起作用还是有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:05:54.220

您可能正在寻找嵌入式数据库，即您所说的库，它能够在没有服务器的情况下访问文件上的数据库。

MySQL 有一个嵌入式版本：[http ://www.mysql.com/oem/](http://www.mysql.com/oem/)

您可能还想检查 H2：[http ://www.h2database.com/](http://www.h2database.com/)

或 Apache Derby：[http ://db.apache.org/derby/](http://db.apache.org/derby/)

或 HSQLDB： http: [//hsqldb.org/](http://hsqldb.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:06:02.357

简短的回答：没有。

长答案：您必须基本上用 Java 重新创建 MySQL 守护程序。特别是，JDBC 必须知道文件内部的结构。这些文件非常复杂，这将是一件很痛苦的事情。

这意味着您基本上必须编写自己的代码来解析和操作 MySQL 文件。这将是一项极其复杂的任务。

* * *

是的，有更好的方法。如果要使用 MySQL，请*使用 MySQL*。

另一种选择是使用 MySQL 的嵌入式版本，或类似 SQLite 的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:06:50.967

这是不可能的`Mysql`。[`Sqlite`](http://www.sqlite.org/docs.html)是`Serverless`为此目的而设计的数据库。

# php - 如何停止ajax请求？

> ID：15106928
> 
> 赞同：0
> 
> 时间：2013-02-27T08:02:46.413
> 
> 标签：php, jquery, ajax, clearinterval

我有多个 ajax 请求，当其中一个无法获取我想要的数据时，我会重新发送它，直到它可以获取数据为止。获取数据后无法停止的问题。ajax 中是否有中断或类似的东西？我尝试了 clearinterval 但它不起作用这是我的功能：

```
 function ajaxGetServerDatabase(Div,val,interval){
       console.log(val);
       dbs[val]=new Array();
        $('#bck_action').val('get_DB');
        $('#server_ip').val(val);
        post_data = $('#'+Div+' *').serialize();
        $.ajax({
            type: "POST",
            url: document.URL,
            data: post_data,

            dataType: "text",
            success: function(response) {

                if (response!='no_connection'){
                    dbs[val]=JSON.parse(response)
                    clearInterval(this.interval);  // ???? 
                }

            }
        });
        return false;
    }

  function ajaxGetDatabase(Div,ips,interval){
    $.each(ips,function(i,val){
       dbs[val]=new Array();
        $('#bck_action').val('get_DB');
        $('#server_ip').val(val);
        post_data = $('#'+Div+' *').serialize();
        //    console.log(post_data);
        $.ajax({
            type: "POST",
            url: document.URL,
            data: post_data,

            dataType: "text",
            success: function(response) {

                if (response!='no_connection'){
                    dbs[val]=JSON.parse(response)
                }
                else
               {
                   setInterval("ajaxGetServerDatabase('"+Div+"','"+val+"','"+interval+"')", interval);
               }
            }
        });
    });

    return false;
} 
```

我称之为：

```
 ajaxGetDatabase('tab_backup',ips,3000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:07:15.193

```
var timer = null;
function ajaxGetServerDatabase(Div,val,interval){
   //...
   if (response!='no_connection'){
                dbs[val]=JSON.parse(response)
                clearInterval(timer);  // ???? 
            }
   //....
   else
           {
               timer = setInterval("ajaxGetServerDatabase('"+Div+"','"+val+"','"+interval+"')", interval);
           } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:15:16.803

`clearInterval`无关`ajax`。它只是一个定时器功能，其作用域是清除之前用 设置的定时器`setInterval`。如果您真的想使用计时器功能，您需要将一个变量附加到该`setInterval`函数，您可以通过`clearInterval`将之前定义的 id 设置为参数来清除`setInterval`。

```
var id = " ";
success: function(response) {

   if (response!='no_connection'){
       dbs[val]=JSON.parse(response)
       clearInterval(id);
   }
   else                   
       id= setInterval("ajaxGetServerDatabase('"+Div+"','"+val+"','"+interval+"')", interval);
} 
```

或者您可以使用 ajax 中止代码`abort`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T08:34:44.463

也许接近这个？

```
...
var stopAjax = 0;  //switch is on
if(stopAjax == 0){

  $.ajax({
    ...
    success: function(response) {
    if (response!='no_connection'){
       dbs[val]=JSON.parse(response);
       stopAjax = 1; //switch is off
    }
    else{
        setInterval("ajaxGetServerDatabase('"+Div+"','"+val+"','"+interval+"')", interval);
      }
    }
  });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T08:57:27.793

这是答案：在 ajaxGetDatabase 中：

```
 success: function(response) {

                if (response!='no_connection'){
                    dbs[val]=JSON.parse(response)

                }
                else
                {
                 id=setInterval("ajaxGetServerDatabase('"+Div+"','"+val+"')", interval);
            } 
```

在 ajaxGetServerDatabase 中：

```
 success: function(response) {
            if (response!='no_connection'){
                dbs[val]=JSON.parse(response)
                clearInterval(id);
            }

        } 
```

没有范围参数

```
 var id; 
```

为了使其通用并为多个服务器停止工作（多个 ajax 请求失败），我使用了一个数组来保存这样的 id：

```
 var ids=new Array();

   ids[val]=setInterval("ajaxGetServerDatabase('"+Div+"','"+val+"')", interval);

   clearInterval(ids[val]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T15:52:58.200

您是否正在寻找`timeout`设置？例如

```
$.ajax({
    timeout: 10000,
    ...
}); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# android - FQL/Graph API 中的 Facebook 主页

> ID：15106930
> 
> 赞同：1
> 
> 时间：2013-02-27T08:03:01.417
> 
> 标签：android, facebook, facebook-graph-api, facebook-fql

`FQL`我在我的 android 应用程序中获取主页提要时遇到问题。当我提出请求时，它似乎缺少帖子（通常是图片和其他一些东西）。

我的有什么问题`FQL`还是隐私设置有限制？

我的最终目标是从我的个人资料中获取新闻提要，所以我真的不在乎它是否带有`FQL`or `Graph API`，因为我知道 FQL 对我来说似乎更直接`SQL`

编辑：抱歉忘了提到这是在 Android SDK (java)

```
 String q = "SELECT post_id, source_id, actor_id, attachment, created_time, target_id, message, app_data, description, permalink FROM stream WHERE filter_key in " +
        "(SELECT filter_key FROM stream_filter WHERE uid=me()) AND is_hidden = 0 LIMIT " + limit;
 Bundle params = new Bundle();
 params.putString("q", q);
 Session session = Session.getActiveSession();
 Request request = new Request(session,
     "/fql",                         
     params,                         
     HttpMethod.GET,                 
     new Request.Callback(){         
         public void onCompleted(Response response) {
             Log.i(TAG, "Result: " + response.toString());
         }                  
 }); 
 Request.executeBatchAsync(request); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:50:18.223

看起来您的请求中有一个或两个过滤器可能会弄乱您的结果。如果您对“我/家”进行 Graph API 请求，请查看所有内容。使用[Graph Explorer API](http://developers.facebook.com/tools/explorer/)可以帮助确保您获得所有信息。我认为 Graph 似乎是 Facebook 投入更多资源的地方，因此如果您愿意，从 FQL 迁移可能是个好主意。

# objective-c - NSSplitView 子视图折叠时如何隐藏分隔线？

> ID：15106936
> 
> 赞同：0
> 
> 时间：2013-02-27T08:03:27.427
> 
> 标签：objective-c, macos, cocoa, nsview, nssplitview

好的，这是我的问题：

我一直在使用**[DMSplitView](https://github.com/malcommac/DMSplitView)**进行一些`NSSplitView`操作。然而，当最右边的视图折叠时，分隔线（即使它被推到右边）仍然可见（是的，你可能认为它有点夸张，但我仍然注意到窗口右侧的 1px 线）。

有什么办法让它消失吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:57:32.243

解决方案相当简单。

只需`- (BOOL)splitView:(NSSplitView *)splitView shouldHideDividerAtIndex:(NSInteger)dividerIndex`在内部某个地方实现`DMSplitView.m`并确保它的行为如您所愿。

# c - 所有 gcc 版本都支持 gcc 的 @file 选项吗？

> ID：15106937
> 
> 赞同：0
> 
> 时间：2013-02-27T08:03:29.117
> 
> 标签：c, gcc, linker, option

据我记得一些较旧的 gcc 版本不支持 @file 选项。我不太确定。有人可以提供与此相关的任何指示吗？

以供参考

```
 @file
   Read command-line options from file.  The options read are inserted
   in place of the original @file option.  If file does not exist, or
   cannot be read, then the option will be treated literally, and not
   removed.

   Options in file are separated by whitespace.  A whitespace
   character may be included in an option by surrounding the entire
   option in either single or double quotes.  Any character (including
   a backslash) may be included by prefixing the character to be
   included with a backslash.  The file may itself contain additional
   @file options; any such options will be processed recursively. 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T01:03:04.537

这是在此处提交给 gcc 源的：

```
2005-11-23  Mark Mitchell  <mark@codesourcery.com>

    * doc/invoke.texi: For man pages, include gcc-vers.texi.
    List @file in the option summary.  Include the libiberty
    documentation for @file.
    * gcc.c (main): Call expandargv.
    * Makefile.in (gcc-vers.texi): Define srcdir. 
```

根据发布[历史](http://www.gnu.org/software/gcc/releases.html)，这应该已经进入 GCC 4.1

# c# - .NET 4.0 System.Collections.Concurrent 集合向 .NET 3.0 SynchronizedCollection 添加了哪些功能？

> ID：15106938
> 
> 赞同：10
> 
> 时间：2013-02-27T08:03:40.043
> 
> 标签：c#, multithreading, collections, concurrency, thread-safety

.NET 4.0 引入了[System.Collections.Concurrent](http://msdn.microsoft.com/en-us/library/system.collections.concurrent(v=vs.100).aspx)命名空间：

> “ [System.Collections.Concurrent](http://msdn.microsoft.com/en-us/library/system.collections.concurrent(v=vs.100).aspx)命名空间提供了几个线程安全的集合类，当多个线程同时访问集合时，应使用这些类代替[System.Collections](http://msdn.microsoft.com/en-us/library/system.collections.aspx)和 [System.Collections.Generic命名空间中的相应类型”](http://msdn.microsoft.com/en-us/library/system.collections.generic.aspx)

*   [`BlockingCollection<T>`](http://msdn.microsoft.com/en-us/library/dd267312.aspx)班级
*   [`ConcurrentBag<T>`](http://msdn.microsoft.com/en-us/library/dd381779.aspx)班级
*   [`ConcurrentQueue<T>`](http://msdn.microsoft.com/en-us/library/dd267265(v=VS.100).aspx)班级
*   [`ConcurrentDictionary<TKey, TValue>`](http://msdn.microsoft.com/en-us/library/dd287191(v=VS.100).aspx)班级
*   [`OrderablePartitioner<TSource>`](http://msdn.microsoft.com/en-us/library/dd394988(v=vs.100).aspx)班级
*   [`Partitioner`](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.partitioner(v=vs.100).aspx)班级
*   [`IProducerConsumerCollection<T>`](http://msdn.microsoft.com/en-us/library/dd287147%28v=vs.100%29.aspx)界面

该类[`SynchronizedCollection<T>`](http://msdn.microsoft.com/en-us/library/ms668265%28v=vs.100%29.aspx)（自 .NET 3.0 起可用）：

> “提供一个线程安全的集合，其中包含由泛型参数指定的类型的对象作为元素”

...在`System.Collections.Generic`命名空间中。

~~那么，为什么[`SynchronizedCollection<T>`](http://msdn.microsoft.com/en-us/library/ms668265%28v=vs.100%29.aspx)类是线程安全的但不是并发的呢？~~

是什么使[`SynchronizedCollection<T>`泛型类](http://msdn.microsoft.com/en-us/library/ms668265%28v=vs.85%29.aspx)与 中的集合不同且不兼容[`System.Collections.Concurrent`](http://msdn.microsoft.com/en-us/library/system.collections.concurrent%28v=vs.100%29.aspx)？

**更新：** 让我重新表述这个问题：属于命名空间的所有泛型集合中的共同点和区别新特性是什么，这在[泛型类](http://msdn.microsoft.com/en-us/library/ms668265%28v=vs.85%29.aspx)[`System.Collections.Concurrent`](http://msdn.microsoft.com/en-us/library/system.collections.concurrent%28v=vs.100%29.aspx)中不存在（并且在使用时是不可能的）？[`SynchronizedCollection<T>`](http://msdn.microsoft.com/en-us/library/ms668265%28v=vs.85%29.aspx)

我将标题更改为“`System.Collections.Concurrent`向 .NET 3.0 添加了哪些 .NET 4.0 集合的功能`SynchronizedCollection`？”。 **但大多数情况下，我很想知道是什么使得在 .NET 3.0 的基础上无法做到这一点**

**更新2**：关于注释：

> “这个问题在这里可能已经有了答案：
> 
> [SynchronizedCollection 和其他并发集合有什么区别？](https://stackoverflow.com/a/4655236/2031316)"

[就我的问题而言](https://stackoverflow.com/questions/15110860/how-is-net-4-0-spinwait-method-different-to-pre-4-0-spinwait)，答案令人困惑——新功能是进化的（使用 .NET 4.0 之前的功能）还是革命性的（在 .NET 4.0 之前的版本中不可用）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T12:14:18.203

以前的线程安全集合类有一个相当大的缺陷，它们不能以线程安全的方式迭代。迭代通常很难使线程安全，没有干净的方法可以使使用迭代器的代码在代码迭代集合*时*知道添加到集合中或从集合中删除的项目。唯一真正安全的方法是在迭代发生时锁定对集合的访问。这是非常不可取的，这样的锁通常会被持有很长时间。下一个最好的方法是制作集合的副本，一个不会被修改的副本，因此可以始终安全地迭代。没有人喜欢该解决方案的 O(n) 存储要求。

.NET 1.0 集合类中的 Synchronized() 方法特别麻烦。微软并没有将迭代不是线程安全的作为秘密。他们甚至添加了代码来检测事故，当线程修改集合时会引发异常。然而，这种异常发生的频率并不高，而且困惑的 .NET 程序员没有阅读警告标签，只是断然假设，无论您做什么，线程安全的集合都是安全的。好吧，当对集合的最基本操作不是线程安全的时候，调用集合“线程安全”当然是个问题。微软的*意思*是“它是线程安全的，因为使用线程不会破坏集合”。程序员*读什么*是“它是线程安全的”。Microsoft 没有在 .NET 2.0 通用集合类中重复同样的错误。

这已在 .NET 4 中解决，迭代新集合不会引发异常。他们不会做任何事情来防止您的代码行为不端，因为它正在读取陈旧的数据。这是一个无法解决的问题，你必须自己解决。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-27T11:07:56.877

.NET 4.0 的主要焦点是并发性。Microsoft 在 .NET 4.0 中引入了[System.Threading.Tasks](http://msdn.microsoft.com/en-us/library/system.threading.tasks.aspx)命名空间，因此添加 System.Collections.Concurrent 命名空间也是有意义的。如[其他地方](https://stackoverflow.com/a/15109287/64161)所述，System.Collections.Concurrent 中的集合具有高性能，因为它们以无锁方式实现。这不是一件容易的事，我认为这就是为什么微软认为它属于一个新的主要 .NET 版本而不是 .NET 3.x 的更新。AFAIK 无锁行为是使用通用版本的[Interlocked.CompareExchange](http://msdn.microsoft.com/en-us/library/bb297966.aspx)实现的，这也是 .NET 4.0 的新功能。

如果您对如何实现 System.Collections.Concurrent 的类感兴趣，我建议您阅读 Joe Duffy在 .NET 4.0 发布之前撰写的[《Windows 上的并发编程》一书。](http://www.bluebytesoftware.com/books/winconc/winconc_book_resources.html)这本书展示了一些并发集合是如何实现的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T10:06:55.847

链接的副本回答了您问题的“新功能”部分。我将在这里谈谈这个笔记：

> 是什么使得在 .NET 3.0 的基础上无法做到

我的猜测是**没有**什么不可能的。我怀疑，如果您对 .NET 4.0 中的新类进行反编译，并且（根据需要进行语法更改）自己针对 .NET 3.5 创建此类类，它们会很好地工作。

这与[`Enumerable.Zip`在 .NET 3.5 中手动实现](http://www.blackwasp.co.uk/LinqZip35.aspx)的方式相同，如果 .NET 4.0 不可用。事实上，我记得在某处看到过针对 .NET **2.0**的类似 LINQ 的库的实现（当然没有 C# 语言功能！）。

一般来说，对于 .NET，除非库依赖于新的**CLR**功能，否则没有什么可以阻止针对早期版本重新实现库。这种情况的一个值得注意的例子是泛型：在 .NET 2.0 之前，如果不手动处理每个不同的类，可能使用[CodeSmith之类的代码生成工具，就无法获得](http://www.codesmithtools.com/)*类型安全*的集合支持。

因此，如果没有什么阻止`Concurrent`.NET 3.5 中类的存在，那么微软为什么不创建它们呢？简单来说就是时间和预算——发货是一个功能，有些功能没有那么重要，所以他们必须等到更高版本。

# windows - Windows 进程的确切代码段大小

> ID：15106945
> 
> 赞同：0
> 
> 时间：2013-02-27T08:04:00.370
> 
> 标签：windows, process, operating-system

我们知道，linux 文件 proc/{pid}/status 为我们提供了特定进程的一些细粒度内存占用。它抛出的参数之一是“VmExe”或进程文本段的大小。我对这个领域特别感兴趣，但我被困在一个没有 proc 文件系统来帮助我的 Windows 环境中。cygwin 模仿了大多数 procfs，但 {pid}/* 文件似乎是 cygwin 忽略的那些部分之一。我尝试在 Windows sysinternals 上使用 VmMap 工具，但我得到的最接近的字段是私有工作集上的“私有数据大小”。我不确定这是否是我要找的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:55:53.670

我会查看 sysinternals 中的[vmmap.exe](http://technet.microsoft.com/en-us/sysinternals/dd535533.aspx)，看看它是否显示给定进程的您正在寻找的信息。如果那里显示了您要查找的信息，您可以查看应用程序使用的 api 调用，或在 msdn 上的 sysinternals 论坛上询问。我知道这并不是您在答案中所要寻找的，但希望它能为您指明正确的方向。

如果您谈论的是 PE 本身中的 :text 段，您可以从 debughlp 库和许多其他方式获取该信息（有一些库用于二进制分析）。

# python - Flask jsonify：以数字开头的键

> ID：15106946
> 
> 赞同：1
> 
> 时间：2013-02-27T08:04:01.353
> 
> 标签：python, json, flask, naming-conventions

假设我想在 Flask 中创建以下 JSON 文档：

```
{"1": {"name": "Tom"}} 
```

我不能只调用`return jsonify(**kwargs)`，因为 Python 禁止命名以数字开头的变量，例如`1`.

是否可以使用 Flask 创建这样的 JSON 文档`jsonify`？如果没有，我的解决方法是什么？

**澄清：**我想创建一个 JSON 文档，其中包含由 ids 索引的 dicts，并且 ids 具有 24 个十六进制值的形式（来自 MongoDB的[ObjectId ）。](http://docs.mongodb.org/manual/core/object-id/)这意味着大多数时候 id 将以数字开头。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T08:07:57.833

方便，您可以使用... `**kwargs`！

```
>>> def echo(**kwargs):
...     print kwargs
...
>>> echo(**{"1":{"name": "Tom"}})
{'1': {'name': 'Tom'}} 
```

是的，您不能手动指定名为`1`... 的单个关键字参数，但您*可以*传递`1`通过`**`关键字扩展运算符命名的关键字参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-27T08:17:29.920

由于`flask.jsonify`采用与 Python 相同的参数`dict`，因此您可以将其 a`dict`作为参数并让它整理其余部分：

```
@app.route('/')
def hello_world():
    # note key is an int, not just a string with leading digits
    # in your case this could be a mongodb object
    return jsonify({1: {'name': 'bob'}}) 
```

回报：

```
{
  "1": {
    "name": "bob"
  }
} 
```

# z3 - 计算 Z3 中的绝对值

> ID：15106947
> 
> 赞同：1
> 
> 时间：2013-02-27T08:04:04.630
> 
> 标签：z3

我有 3 个变量`a`和. 我需要计算。`b``c``c = absolute(b-a)`

我在 Z3 中将此语句编码为

```
(assert (>= c 0))
(assert (or (= c (- a b) (= c (- b a)))) 
```

我在想，有没有更有效的方法在 Z3 中编写它？
Z3内部是否支持计算绝对值？
另外，我希望编写这样的代码不会有任何性能损失，而不是使用其他方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:43:08.773

您的编码是正确的。然而，用户通常使用编码绝对值函数

```
(define-fun absolute ((x Int)) Int
  (ite (>= x 0) x (- x))) 
```

然后，他们可以编写约束，例如：

```
(assert (= c (absolute (- a b)))) 
```

这是完整的示例（也可以[在rise4fun 在线获得](http://rise4fun.com/Z3/9QIf)）：

```
(define-fun absolute ((x Int)) Int
  (ite (>= x 0) x (- x)))

(declare-const a Int)
(declare-const b Int)
(declare-const c Int)

(assert (= a 3))
(assert (= b 4))

(assert (= c (absolute (- a b))))

(check-sat)
(get-model) 
```

# android - 浏览器刷卡

> ID：15106950
> 
> 赞同：0
> 
> 时间：2013-02-27T08:04:12.920
> 
> 标签：android, android-viewpager, text-to-speech, swipe

下面的代码正在从左到右滑动，现在我想`the`从右到左设置相同的东西。滑动正在工作，但是发言正在与 position.in pageAdapter 向前滑动工作良好。向后滑动也在工作很好，但 Textto 语音无法正常工作

下面是代码：

```
 public Object instantiateItem(ViewGroup container, int position) {
                ImageView image=new ImageView(context);
               image.setImageResource(fruits[position]);
              ((ViewPager) container).addView(image);
              if(position>=1){
                  image.setImageResource(fruits[position]);
                  speakOut(names[position-1]);
              }
              return image;
            } 
```

在这里它不起作用。谁能给我建议并让我摆脱这个问题

```
 public class Learn extends Activity implements TextToSpeech.OnInitListener{
        private TextToSpeech tts;
        private ViewPager pic;
        private Button next,back;
        private TextView text;
        private Context context;
        private int i=0;
        public Integer[] fruits={R.drawable.apple1,R.drawable.banana1,R.drawable.grapes1,R.drawable.cherry1,R.drawable.lemon1,
                R.drawable.orange1,R.drawable.strwberry1,R.drawable.water1};
        public String [] names={"Apple","Banana","Grapes","Cherry","Lemon","Orange","Strawberry","Water melon"};

        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.learn);
            tts = new TextToSpeech(this, this);
            pic=(ViewPager)findViewById(R.id.view_pager);
            next=(Button)findViewById(R.id.button1);
            back=(Button)findViewById(R.id.button2);
            text=(TextView)findViewById(R.id.text);
            ImagePageAdapter adapterpic=new ImagePageAdapter(this);
            pic.setAdapter(adapterpic);

        }
        private class ImagePageAdapter extends PagerAdapter {

            public ImagePageAdapter(Context learn) {
                // TODO Auto-generated constructor stub
                context=learn;
            }

            @Override
            public int getCount() {
                // TODO Auto-generated method stub
                return names.length;
            }

            @Override
            public boolean isViewFromObject(View view, Object object) {
              return view == ((ImageView) object);
            }

            @Override
            public Object instantiateItem(ViewGroup container, int position) {
                ImageView image=new ImageView(context);
               image.setImageResource(fruits[position]);
              ((ViewPager) container).addView(image);
              if(position>=1){
                  image.setImageResource(fruits[position]);
                  speakOut(names[position-1]);
              }
              return image;
            }
            @Override
            public void destroyItem(ViewGroup container, int position, Object object) {
              ((ViewPager) container).removeView((ImageView) object);
            }

        }
        private void speakOut(String text) {
            // TODO Auto-generated method stub
             tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);
        }
        @Override
        public void onDestroy() {
            // Don't forget to shutdown tts!
            if (tts != null) {
                tts.stop();
                tts.shutdown();
            }
            super.onDestroy();
        }

        @Override
        public void onInit(int status) {

           if (status == TextToSpeech.SUCCESS) {

                int result = tts.setLanguage(Locale.US);

                if (result == TextToSpeech.LANG_MISSING_DATA
                        || result == TextToSpeech.LANG_NOT_SUPPORTED) {
                    Log.e("TTS", "This Language is not supported");
                } else {
                    pic.setEnabled(true);

                    //speakOut("apple");
                }

            } else {
                Log.e("TTS", "Initilization Failed!");
            }

        }
    }
    Here is stack trace

02-27 16:39:00.994: I/TTS received:(2369): Apple
02-27 16:39:05.144: I/TTS received:(2369): Banana
02-27 16:39:06.534: I/TTS received:(2369): Grapes
02-27 16:39:24.273: I/TTS received:(2369): Banana
02-27 16:39:25.355: I/TTS received:(2369): Grapes
02-27 16:39:26.593: I/TTS received:(2369): Cherry
02-27 16:39:28.624: I/TTS received:(2369): Apple 
```

请给我建议以摆脱这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T09:36:37.060

你为什么不尝试放置对象的声音而不是将它们转换为文本到语音.. 你可以试试这个代码

```
public class Learn extends Activity {

    MediaPlayer mp;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_numbers);
        ViewPager viewPager = (ViewPager)findViewById(R.id.view_pager);
        ImagePagerAdapter adapter = new ImagePagerAdapter();
        viewPager.setAdapter(adapter);
     }

private class ImagePagerAdapter extends PagerAdapter {
private int[] mImages = new int[] {R.drawable.no1,R.drawable.no2,R.drawable.no3,R.drawable.no4,R.drawable.no5,R.drawable.no6,R.drawable.no7,R.drawable.no8,R.drawable.no9,R.drawable.no10,R.drawable.bg2};

private int[] mAudio = new int[]{R.raw.one,R.raw.two,R.raw.three,R.raw.four,R.raw.five,R.raw.six,R.raw.seven,R.raw.eight,R.raw.nine,R.raw.ten,R.raw.one};

         @Override
         public int getCount() {
         return mImages.length;
         }

         @Override
         public boolean isViewFromObject(View view, Object object) {
         return view == ((ImageView) object);
         }

         @Override
         public Object instantiateItem(ViewGroup container, int position) {
            Context context = Numbers.this;
            ImageView imageView = new ImageView(context);
            int padding =context.getResources().  
            getDimensionPixelSize(R.dimen.activity_vertical_margin);
            imageView.setPadding(padding, padding, padding, padding);
            imageView.setScaleType(ImageView.ScaleType.CENTER);
            imageView.setImageResource(mImages[position]);
            ((ViewPager) container).addView(imageView, 0); 
            if(position>=1){
            mp = MediaPlayer.create(Numbers.this, mAudio[position-1]);
            mp.start();
            }
            return imageView;
         }

          @Override
         public void destroyItem(ViewGroup container, int position, Object object) {
           ((ViewPager) container).removeView((ImageView) object);
         }
     }
     } 
```

这里的值你可以根据你的要求改变。

# java - 在节点和关系中添加非原始类型数据作为属性值

> ID：15106952
> 
> 赞同：0
> 
> 时间：2013-02-27T08:04:13.480
> 
> 标签：java, properties, neo4j, primitive-types

在 neo4j 中，我们可以使用各种属性添加节点和关系

```
node.setProperty("NodePropertyName",NodePropertyValue)
relationship.setProperty("EdgePropertyName",EdgePropertyValue) 
```

有什么方法可以使用非原始数据类型，如 MAP 、 Array 或用户定义的对象 as`NodePropertyValue`和`EdgePropertyValue`？

或者我是否需要将所有值`MAP<>`单独作为`Node`or的单独属性提供`Relationship`？

我尝试使用

```
node.setProperty("USER_PROPERTIES", GraphNode.getNodeproperties());
where,
GraphNode.getNodeproperties() returns MAP<String,Double> 
```

但这给了我一个错误：

```
 java.lang.IllegalArgumentException: Unknown property type on: {Property1=0.0, Property2=0.0, Property3=0.0, Property4=0.0, Property5=0.0, Property6=0.0, Property7=0.0} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T09:25:19.043

> 有什么方法可以使用非原始数据类型，如 MAP 、 Array 或用户定义的对象作为 NodePropertyValue 和 EdgePropertyValue ？

Neo4J 允许您存储一个数组`String`，或者一个原始数据类型的数组。

不支持地图（尚），但另一种方法是将地图存储为 JSON 结构（使用[GSON](https://code.google.com/p/google-gson/)或[Jackson](http://jackson.codehaus.org/)），甚至使用[XStream](http://xstream.codehaus.org/)存储为 XML 结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:47:37.883

您确实只能将原始值存储为属性。如果您想存储一组值（并且如果您使用的是 Spring），那么[DynamicPropertiesContainer](http://static.springsource.org/spring-data/neo4j/docs/2.1.0.RC1/api/org/springframework/data/neo4j/fieldaccess/DynamicPropertiesContainer.html)可能是一种选择。如果要存储自定义对象，可能需要创建一些相关节点。使用[createRelationshipTo(Node otherNode,RelationshipType type)](http://api.neo4j.org/current/org/neo4j/graphdb/Node.html#createRelationshipTo%28org.neo4j.graphdb.Node,%20org.neo4j.graphdb.RelationshipType%29)来完成此操作。

# php - 如何在没有表单的情况下将输入字段值发送到另一个页面？

> ID：15106955
> 
> 赞同：-2
> 
> 时间：2013-02-27T08:04:21.933
> 
> 标签：php, html

如何通过foreach循环将输入字段值发送到另一个没有PHP表单的页面？

```
<input type="text" size="3" name="quantity" id="quantity" value="<?php echo $product_quantity; ?>" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:07:31.387

**在赛季**中保存值，然后您可以将其获取到其他页面，或者如果您使用 foreach 循环，您可以将值保存在数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T08:09:39.707

将值放入**Session Array**并在应用程序的任何位置使用它。例如。

```
$_SESSION['valuesArray'] = array();

foreach($values as $value) {

         $_SESSION['valuesArray'] = $value;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T08:17:29.453

为此，您可以使用 cookie 或会话

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-27T08:14:11.880

```
header("Location: index.php?id=".$product_quantity); 
```

**确保在header**函数之前不会使用**print 或 echo**

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-27T08:19:01.640

您可以只使用 JavaScript 将输入值作为新参数放入其他页面的 url。

```
<script>
function clickMe() {
    window.location.href="otherpage.php?param=<?php echo $product_quantity; ?>";
}
</script>
<input type="text" size="3" name="quantity" id="quantity" value="<?php echo $product_quantity; ?>" onclick=clickMe() /> 
```

在另一个页面“otherpage.php”你可以使用 $_GET 来读取参数。

这只是一个快速而肮脏的解决方案......无论如何它展示了如何使用 JavaScript 来做到这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T08:20:23.637

简单地

***1.php 用于重定向的标头***

```
header('Location: newpage.php?quantity=' $qty  ); 
```

***2.javascript：***

```
document.location.href = 'newpage.php?quantity=' + $('#quantity').val(); 
```

***3.会话***

```
session_start(); $_SESSION['qty']=1; 
```

***4.cookie***

```
$expire=time()+60*60*24*30;

setcookie("user", "Alex Porter", $expire); 
```**

# javascript - 如何在 gmaps v0.3 中自动打开 infoWindow

> ID：15106956
> 
> 赞同：9
> 
> 时间：2013-02-27T08:04:28.637
> 
> 标签：javascript, jquery, html, google-maps, google-maps-api-3

我有一个关于 gmaps v0.3 的问题，当我 addMarker 如何让 infoWindow 自动打开时。不是当您单击打开时。

```
<script type="text/javascript">
var map;
$(document).ready(function(){
    map = new GMaps({
        div: '#map',
        lat: 39.908403,
        lng: 116.397529,
        zoom: 1,
    });
    var marker = new google.maps.Marker();
    marker = {
        lat: 39.908403,
        lng: 116.397529,
        title: 'Lima',
        //map: map.map,
        //animation: google.maps.Animation.BOUNCE,
        //shape: {coords: [0,0,50,50], type: "rect"},
        infoWindow: {
          content: '<font color="red">hello world</font>'
        }
    }
    map.addMarker(marker);
 }); 
```

我想当 addMarker 自动打开 infoWindow 没有点击时，我该怎么办。请帮我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T08:47:41.523

您可以使用以下`.open`函数打开 infoWindow：

```
// Create map
var map = new GMaps({
    div: '#map',
    lat: 39.908403,
    lng: 116.397529,
    zoom: 1,
});

// Create infoWindow
var infoWindow = new google.maps.InfoWindow({
    content: 'Content goes here..'
});

// Create marker
var marker = new google.maps.Marker({
    lat: lat,
    lng: lng,
    title: 'Lima',
    map: map.map,
    infoWindow: infoWindow
});

// This opens the infoWindow
infoWindow.open(map, marker); 
```

[您可以在 Google 地图网站https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows](https://developers.google.com/maps/documentation/javascript/overlays#InfoWindows)上阅读有关 infoWindow 的信息

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-09-14T12:48:26.847

添加到 Gmaps.map 实例的每个标记都有自己的 InfoWindow 存储到标记对象中。我们需要该特定标记的数组索引键。地址按索引键右边的InfoWinow o 被打开。您可以通过执行以下操作打开 GMaps.js 特定标记：

```
(map.markers[index].infoWindow).open(map.map,map.markers[index]); 
```

将 [index] 替换为您希望 InfoWindow 打开的标记的索引。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-18T00:46:20.307

使用来自[google.maps.Marker 的事件（“事件”部分）](https://developers.google.com/maps/documentation/javascript/reference#Marker)

例子：

```
map.addMarker({
    lat: 50.17222520000001,
    lng: 12.196652600000002,
    infoWindow: {
        content: '<p>Foobar</p>'
    },
    mouseover: function(){
        (this.infoWindow).open(this.map, this);
    },
    mouseout: function(){
        this.infoWindow.close();
    }
}); 
```

# android - onTabSelected() 和 onTabReselected() 有什么区别？

> ID：15106959
> 
> 赞同：5
> 
> 时间：2013-02-27T08:04:35.563
> 
> 标签：android, android-fragments

我正在创建一个应用程序，其中使用`FragmentPagerAdapter`. 默认情况下，第一次加载选项卡时，将选择第一个选项卡。但是在切换到另一个选项卡后，当用户再次返回第一个选项卡时，它将检查数据库中的一些数据，并根据数据在第一个选项卡上显示内容。所以我不确定我应该在哪里调用该函数来检查数据库？`onTabSelected()`还是`onTabReselected()`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T08:36:23.120

> onTabReselected ：当用户再次选择已选择的选项卡时调用。某些应用程序**可能会使用此操作返回到类别的顶层。**

和

> onTabSelected : is called when a tab enters the selected state (it's previous state was unselected).

您应该只保留一个成员变量作为计数器，并在第二次选择指定选项卡时在 onTabSelected 中执行您想要的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T08:10:37.883

`onTabSelected()`是当您选择一个选项卡，但它还没有被选中。

`onTabReselected()`表示该选项卡已被选中并再次被选中。

在大多数情况下，您需要`onTabSelected()`. `onTabReselected()`类似于双击，如果您的屏幕空间不足并且想将其用作后退/刷新按钮或其他东西，这可能会很有用。

# actionscript-3 - 错误 #2044：未处理的 IOErrorEvent：。文本=错误 #2032：流错误

> ID：15106960
> 
> 赞同：0
> 
> 时间：2013-02-27T08:04:57.007
> 
> 标签：actionscript-3, audio, air-native-extension, filestreams

美好的一天，我使用 AIR 3.5 在 Android/IOS 应用程序中工作。在这个项目中，我下载 ZIP 文件并提取到特定文件夹中，然后使用资产（IMG、XML 和声音），一切正常，但是当我加载声音时，它一直显示此错误。 **> 错误 #2044：未处理的 IOErrorEvent：。文本=错误 #2032：流错误。** 我试图在 android 驱动器中为其提供静态位置，但发生了同样的错误。我尝试使用 URLRequest、FileStream、URLStream 并且发生了同样的事情。我跟踪了文件夹中的所有文件浴，它给了我所有正确的浴。这是代码。

```
trace('AliSoundFile/' + ob.sound);          
var soundFile:File = File.documentsDirectory.resolvePath('AliSoundFile/'+ob.sound);
var files:Array = soundFile.getDirectoryListing();
            trace((File.documentsDirectory.resolvePath('AliSoundFile/'+ob.sound).nativePath) );
//sound = new Sound( new URLRequest ('AliSoundFile/1.mp3'));
sound.addEventListener(IOErrorEvent.IO_ERROR, sound_ioError);
for ( var i:uint = 0 ; i < files.length ; i++)
{
      if (files[i].isDirectory )
    {
       var arr:Array = files[i].getDirectoryListing();
        for ( var j:uint = 0 ;  j <  arr.length ; j++)
        trace('J:-> ',arr[j].nativePath);
    }
    trace('I:-> ',files[i].nativePath);
}
soundStreen = new FileStream();
soundStreen.openAsync(soundFile, FileMode.READ);
soundStreen.addEventListener( Event.COMPLETE, soundStreen_complete); 
soundStreen.addEventListener( IOErrorEvent.IO_ERROR, soundStreen_ioError); 
trace('end');
    private function soundStreen_complete(e:Event):void 
    {
        var ba:ByteArray = new ByteArray(); 
        soundStreen.readBytes( ba );
        _loadSound = new Loader();
        _loadSound.contentLoaderInfo.addEventListener( Event.COMPLETE, soundLoadbytesComplete );
        _loadSound.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, loadSound_progress);
        _loadSound.loadBytes( ba );
    }

    private function soundLoadbytesComplete(e:Event):void 
    {
        sound.play();
        sound = e.currentTarget.content as Sound;
        soundStreen.close();
    } 
```

任何人都可以帮助我解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:23:33.493

首先：要处理此未处理的异常，请将 IOErrorEvent.IO_ERROR 的 addEventListener 添加到 contentLoaderInfo 第二：Loader 类用于加载 SWF 文件或图像（JPG、PNG 或 GIF）文件（请参阅[http://help.adobe.com/en_US/ FlashPlatform/reference/actionscript/3/flash/display/Loader.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)）所以问题在于您传递了无效的流（Sound streem ）。要播放文件，请检查：[http ://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d25.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d25.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:45:09.277

我们有类似的 2032 问题，是由于 Apache 2.4 升级而被发现的。我们已经回滚了 Apache，一切都很好！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T21:23:00.607

即使我正在处理 IOErrorEvent，我也遇到了这个错误...或者我是这么想的，但结果是在 IOError 事件之前触发了 HTTPStatusEvent（在我的情况下为 500），并且我正在删除我的 HTTPStatusEvent 中的事件侦听器IOError 事件之前的处理程序。卧槽！

# ios - 在nsurlconnection中使用类方法时如何取消unsurlconnection

> ID：15106963
> 
> 赞同：1
> 
> 时间：2013-02-27T08:05:05.273
> 
> 标签：ios, nsurlconnection

我正在使用`sendAsynchronousRequest:queue:completionHandler:`nsurlconnection 的类功能。如何取消此连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:24:44.160

你不能。如果您需要取消 URL 请求的选项，您必须使用基于委托的方法`NSURLConnection`，例如`connectionWithRequest:delegate:`.

# web-services - 无法在 iOS 中访问 Web 服务

> ID：15106968
> 
> 赞同：0
> 
> 时间：2013-02-27T08:05:41.067
> 
> 标签：web-services, ios6, info-plist

我想从我的 iOS 应用程序连接到 Web 服务。以前我的网址是`http://<domain name>/mobilews/mobilews.asmx`. 最近我改为`http://<domain name>/mobilewstest/mobilews.asmx`

我已将我的 URL 放入 info plist 文件中。但是在我将其更改为新 URL 后，我无法登录。

```
NSString *urlString = [NSString stringWithFormat:@"%@%@",serverURL,[queryString  stringByAddingPercentEscapesUsingEncoding:NSASCIIStringEncoding]]; 

NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"GET"];

NSHTTPURLResponse *response ;

NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:nil];

int statusCode = [((NSHTTPURLResponse *)response) statusCode];` 
```

这里`returnData`变成`nill`和`statusCode`是0。但是`urlString`当它在浏览器中给出时，它已成功登录到Web服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:17:46.753

```
 NSURL *url = [NSURL URLWithString:@"YOUR URL HERE"];
    NSError *connectionError = nil;
    NSData *inData = [NSData dataWithContentsOfURL:url options:NSDataReadingUncached error:&connectionError];
    NSInteger code = [connectionError code];
    if (code != 0)
    {
        NSString *locDesc = [NSString stringWithString:[connectionError localizedDescription]];
        NSString *locFail = [NSString stringWithString:[connectionError localizedFailureReason]];
        NSLog(@"Error: %d %@ %@", code, locDesc, locFail);
    }
    else if ([inData length] == 0)
    {
        NSLog(@"No data");
    }
    else{
    NSData *resultData  = [NSData dataWithContentsOfURL:url];
    NSString *responseString = [[NSString alloc]initWithData:resultData encoding:NSUTF8StringEncoding];
    } 
```

我看到你发送了一个同步请求......试试这个更简单的方法。

# asp.net-mvc - CacheFilterAttribute MVC /什么是缓存

> ID：15106971
> 
> 赞同：1
> 
> 时间：2013-02-27T08:05:52.917
> 
> 标签：asp.net-mvc, attributes

假设我正在使用`CacheFilterAttribute`

见[http://weblogs.asp.net/rashid/archive/2008/03/28/asp-net-mvc-action-filter-caching-and-compression.aspx](http://weblogs.asp.net/rashid/archive/2008/03/28/asp-net-mvc-action-filter-caching-and-compression.aspx)

假设我要返回部分视图，其中填充了来自控制器的数据。

如果数据库中的数据更新了，我会得到更新的数据吗？

缓存了什么，是总响应还是只是文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T10:54:05.667

> 如果数据库中的数据更新了，我会得到更新的数据吗？

不。

> 缓存了什么，是总响应还是只是文件？

在缓存之前最后一次呈现给客户端的 HTML 标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:58:14.007

我同意@Darin 的评论。您可以使用 OutputCache，而不是使用 CacheFilterAttribute。

```
namespace MvcApplication1.Controllers
{
    [HandleError]
    public class HomeController : Controller
    {
        [OutputCache(Duration=10, VaryByParam="none")]
        public ActionResult Index()
        {
            return View();
        }

    }
} 
```

或者您可以创建输出缓存配置文件并指定此 web.config 文件。

请参阅[http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute(v=vs.108).aspx)

# java - 由于路径差异 java、spring mvc、velocity 找不到 JS/CSS 文件

> ID：15106978
> 
> 赞同：1
> 
> 时间：2013-02-27T08:06:30.673
> 
> 标签：java, tomcat, spring-mvc, velocity

我有这个目录结构：

```
webapp
 - resources
   - custom.js
   - base.css
 - WEB-INF
 - views
   - layout.vm
   - top.vm
   - footer.vm
   - index.vm
   - FolderA
     - restricted.vm 
```

我的 layout.vm 是：

```
#parse('top.vm')
$screen_content
#parse('footer.vm') 
```

我的 top.vm 包括这些 JS 和 CSS 文件：

```
<link href="resources/base.css" rel="stylesheet">
<script src="resources/custom.js"></script> 
```

现在，当我访问[http://www.example.com:8080/index](http://www.example.com:8080/index)页面时，我看到找到了 JS 和 CSS 文件。但是当我访问[http://www.example.com:8080/FolderA/restricted](http://www.example.com:8080/FolderA/restricted)时，找不到 JS 和 CSS 文件。它在我改变它的顶部时有效

但是随后索引页被破坏了。

我正在使用弹簧控制器返回适当的视图。例如，以下返回索引页面：

```
@RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Model model) {       
    return "index";
} 
```

这将返回受限视图：

```
@Controller
@RequestMapping(value = "/FolderA")
public class SomeController {

    @RequestMapping(value = "", method = RequestMethod.GET)
    public String secured(Model model) {

        return "FolderA/restricted";
    } 
```

关于如何解决此问题的任何建议？

附带说明一下，我在使用常规 jsp 文件时也遇到了这个问题，但我设法使用`<c:url ..>`. 我不知道这如何以速度解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T08:13:20.587

那是因为您声明的资源与用于访问视图的 url 相关。您必须将所有静态资源 url 更改为绝对您可以使用[标记执行此操作](http://www.tutorialspoint.com/jsp/jstl_core_url_tag.htm)

从此改变

```
<script src="resources/custom.js"></script> 
```

到

```
<script src="<c:url value="/resources/custom.js"/>"></script> 
```

这应该在 HTML 中生成类似这样的内容

```
<script src="<c:url value="http://www.example.com:8080/FolderA/resources/custom.js"/>">
</script> 
```

注意但是为了让这个工作你应该添加 `%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>`到你的jsp并将[jst标签库](http://jstl.java.net/)包含到webapp中

**编辑 - - -**

对于JS和CSS文件里面提到的路径，有一个变通办法。使用[base标签](http://www.w3schools.com/tags/tag_base.asp)来定义HTML中需要使用的绝对路径标签

```
<base href="http://www.example.com:8080/FolderA/"> 
```

# php - 无法在写入上下文中使用函数返回值，PHP 无法弄清楚原因

> ID：15106980
> 
> 赞同：0
> 
> 时间：2013-02-27T08:06:39.443
> 
> 标签：php, sql

这是我的代码：

PHP：

```
 if(isset($_COOKIE("cookie_roof_angle")) && isset($_COOKIE("cookie_roof_direction")))
    {
        $roof_angle                     = intval($_COOKIE("cookie_roof_angle"));
        $roof_direction                 = $_COOKIE("cookie_roof_direction");
        $solarsell_page05_rendement    = mysql_query("SELECT value FROM solarsell_page05_pvgis WHERE angle = $roof_angle AND azimut = " . $roof_direction. "  ");
        echo $solarsell_page05_rendement;
    }

    else
    {
        echo "no values";
    } 
```

我收到此错误消息：

**致命错误：无法在第 19 行 C:\xampp\htdocs\Development\phpFunctions.php 的写入上下文中使用函数返回值**

在网上和stackoverflow.com上搜索了一下，我发现它可能是由这个`isset`功能引起的，谁能解释一下这是不是问题，为什么？如果这不是问题，也许我的代码部分做错了，但我不知道为什么。

当我收到错误时，两者都设置了 Cookie。

此致，哈门·布林克曼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T08:08:10.100

语法错误：

`$_COOKIE["cookie_roof_angle"]`代替`$_COOKIE("cookie_roof_angle")`

# php - MySQL 选择位（1）显示为字符串（3）

> ID：15106985
> 
> 赞同：4
> 
> 时间：2013-02-27T08:06:59.210
> 
> 标签：php, mysql, bit

我有一个包含一列`bit(1)`和以下查询的表：`SELECT my_bit FROM my_table`.

当我`echo`在`php`页面上显示结果时，该值显示为`string(3)` `%qu` **列上的位值是 0 还是 1**。这怎么可能？

以下查询解决了`echoing`在网页上时的问题：`SELECT CAST(my_bit AS UNSIGNED) AS my_bit FROM my_table`.

但是，上述两个查询都在命令行工具上工作。那里没有`string(3)`。

选择数据时一切正常，之间没有区别

1.  SELECT * FROM my_table WHERE my_bit=0
2.  SELECT * FROM my_table WHERE my_bit=(0)

使用命令行工具或 Web 界面`php`页面时。[（此处](https://stackoverflow.com/questions/839596/mysql-how-to-query-a-column-whose-type-is-bit)建议使用后者。）`Echoing`必须使用`CAST`函数完成，但`WHERE`不受括号影响：返回正确的行。

## 主要问题

1.  为什么返回的`bit`类型值无论是 0 还是 1都`echoed`一样？`string``bit`
2.  `bit(1)`使用类型列插入/选择数据时，是否有任何特殊问题需要考虑？（快速测试表明一切都按预期工作：0 插入为 0，1 插入为 1，但我可能遗漏了一些东西。）

我正在使用 MAMP 进行本地测试：PHP 5.3.2 和 MySQL 5.1.44。命令行工具指的是 Sequel Pro（不是 MAMP 的 PhpAdmin）。`Php`页面`utf-8`和查询使用`SET NAMES 'utf8'`.

* * *

## 更新：代码

```
CREATE TABLE `my_table` (
  `id` smallint(5) unsigned NOT NULL AUTO_INCREMENT,
  `my_bit` bit(1) NOT NULL,
  PRIMARY KEY (`id`,`lto_muu`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_swedish_ci;

INSERT INTO `my_table` (`id`, `my_bit`) VALUES (null, 0), (null,1)

//php page
//query option 1
SELECT `id`, `my_bit`  FROM `my_table`
//query option 2
SELECT `id`, CAST(`my_bit` AS UNSIGNED) AS `my_bit`  FROM `my_table`

$mysqli = new mysqli("localhost", "root", "root","my_db");
$q = "SELECT `id`, `my_bit`  FROM `my_table`";//returns 2 rows

$r = $mysqli->query($q);

while($row = mysqli_fetch_array($r,MYSQLI_ASSOC)){
echo 'id: ' . $row['id'] . ' - bit: ' . $row['my_bit'] . '<br />';
} 
```

查询选项 1 打印出：

```
id: 1 - bit: %qu
id: 2 - bit: %qu 
```

查询选项 2 打印出：

```
id: 1 - bit: 0
id: 2 - bit: 1 
```

* * *

## 更新 2：Álvaro 的代码

```
$conn = new mysqli('localhost', 'root', 'root','test');
//$mysqli->set_charset('utf8');
$conn->query('DROP TABLE IF EXISTS bit_test');
$conn->query('CREATE TABLE bit_test (
    my_bit BIT(1) NULL,
    my_multiple_bit BIT(8) NULL
)');
$conn->query("INSERT INTO bit_test (my_bit, my_multiple_bit) VALUES (b'0', b'111')");
$conn->query("INSERT INTO bit_test (my_bit, my_multiple_bit) VALUES (b'1', b'10000000')");

//opt 1
$q = 'SELECT cast(my_bit as unsigned) as my_bit, my_multiple_bit FROM bit_test';
//opt2 
//$q = 'SELECT my_bit, my_multiple_bit FROM bit_test';
$r = $conn->query($q);
while($row = mysqli_fetch_array($r, MYSQLI_ASSOC)){
    echo bin2hex($row['my_bit']) . '<br />';
    echo bin2hex($row['my_multiple_bit']) . '<br />';
    var_dump($row);
    echo '<br /><br />';
} 
```

使用**PHP 5.2.12 选项**1 和 2 都打印：

```
30
07
array(2) {
  ["my_bit"]=>
  string(1) "0"
  ["my_multiple_bit"]=>
  string(1) ""
}
31
80
array(2) {
  ["my_bit"]=>
  string(1) "1"
  ["my_multiple_bit"]=>
  string(1) "�"
} 
```

使用**PHP 5.3.2** opt 1 打印：

```
30
257175
array(2) {
  ["my_bit"]=>
  string(1) "0"
  ["my_multiple_bit"]=>
  string(3) "%qu"
}
31
257175
array(2) {
  ["my_bit"]=>
  string(1) "1"
  ["my_multiple_bit"]=>
  string(3) "%qu"
} 
```

并选择 2：

```
257175
257175
array(2) {
  ["my_bit"]=>
  string(3) "%qu"
  ["my_multiple_bit"]=>
  string(3) "%qu"
}
257175
257175
array(2) {
  ["my_bit"]=>
  string(3) "%qu"
  ["my_multiple_bit"]=>
  string(3) "%qu"
} 
```

PHP 5.3.2 允许打印`%qu`。这有道理吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T10:40:47.147

# 简短的回答

好的，这是我自己问题的简短答案。如果您想确保`bit(1)`以整数形式检索该列，请在检索`bit(1)`值时使用以下查询：

`$q = 'SELECT (my_bit + 0) AS my_bit, (my_multiple_bit + 0) AS my_multiple_bit FROM bit_test';`

如果不使用“+ 0”，则将`bit(1)`列的值视为`binary string`。 [这是我对自己说“RTM”的那一刻......](https://dev.mysql.com/doc/refman/8.0/en/bit-value-literals.html)

[通过谷歌的魔力在这里找到了类似的东西......](http://ellislab.com/forums/viewthread/157028/#758144)

**如果您对快速解决方案感到满意，请立即停止阅读。**

# 现在是凌乱/冗长的答案（让我们使用 Álvaro 的代码）

让我们创建表并使用四个不同的查询以及我的 MAMP 安装中可用的两个 PHP 版本：5.3.2 和 5.2.12。

```
$conn = new mysqli('localhost', 'root', 'root','my_db');

$conn->query('DROP TABLE IF EXISTS bit_test');
$conn->query('CREATE TABLE bit_test (
    my_bit BIT(1) NULL,
    my_multiple_bit BIT(8) NULL
)');

$conn->query("INSERT INTO bit_test (my_bit, my_multiple_bit) VALUES (b'0', b'111')");
$conn->query("INSERT INTO bit_test (my_bit, my_multiple_bit) VALUES (b'1', b'10000000')");

//q1
$q = 'SELECT (my_bit + 0) AS my_bit, (my_multiple_bit + 0) AS my_multiple_bit FROM bit_test';
//q2
//$q = 'SELECT cast(my_bit as unsigned) as my_bit, my_multiple_bit FROM bit_test';
//q3
//$q = 'SELECT HEX(my_bit) AS my_bit , HEX(my_multiple_bit) AS my_multiple_bit FROM bit_test';
//q4
//$q = 'SELECT my_bit, my_multiple_bit FROM bit_test';

$r = $conn->query($q);

//let's echo a few options
//plain gives unaltered result
//bin2hex gives hexadecimal number of an ASCII string (since) the values are treated as strings
//base16to10 gives decimal representation of hexadecimal value
//yes, the two functions are contradictionary (dependable of the query in use)
//but I'll echo their result anyway
while($row = mysqli_fetch_array($r, MYSQLI_ASSOC)){
  echo 'plain: ' . $row['my_bit'] . '<br />';
  echo 'plain: ' . $row['my_multiple_bit'] . '<br />';
  echo 'bin2hex: ' . bin2hex($row['my_bit']) . '<br />';
  echo 'bin2hex: ' . bin2hex($row['my_multiple_bit']) . '<br />';
  echo 'base16to10: ' . base_convert($row['my_bit'],16,10) . '<br />';
  echo 'base16to10: ' . base_convert($row['my_multiple_bit'],16,10) . '<br />';
  var_dump($row);
  echo '<br /><br />';
} 
```

## 以下是不同查询的结果

我真正感兴趣的是普通输出 and `var_dump`，但是您也可以检查`bin2hex`and`base16to10`输出在查找数字是否与其对应值有一些链接时会很有用：数字 0、7、1 和 128（存储的值表的四`bit`列）。

### q1——安全的赌注——输出在 PHP 5.3.2 和 5.2.12 中是相同的

```
plain: 0
plain: 7
bin2hex: 30
bin2hex: 37
base16to10: 0
base16to10: 7
array(2) { ["my_bit"]=> string(1) "0" ["my_multiple_bit"]=> string(1) "7" }

plain: 1
plain: 128
bin2hex: 31
bin2hex: 313238
base16to10: 1
base16to10: 296
array(2) { ["my_bit"]=> string(1) "1" ["my_multiple_bit"]=> string(3) "128" } 
```

### q2 – 输出的一些差异

可以正常工作，`bit(1)`但输出有些问题`my_multiple_bit`。

PHP 5.2.12：

```
plain: 0
plain: 
bin2hex: 30
bin2hex: 07
base16to10: 0
base16to10: 0
array(2) { ["my_bit"]=> string(1) "0" ["my_multiple_bit"]=> string(1) "" }

plain: 1
plain: �
bin2hex: 31
bin2hex: 80
base16to10: 1
base16to10: 0
array(2) { ["my_bit"]=> string(1) "1" ["my_multiple_bit"]=> string(1) "�&quot; } 
```

PHP 5.3.2

```
plain: 0
plain: %qu
bin2hex: 30
bin2hex: 257175
base16to10: 0
base16to10: 0
array(2) { ["my_bit"]=> string(1) "0" ["my_multiple_bit"]=> string(3) "%qu" }

plain: 1
plain: %qu
bin2hex: 31
bin2hex: 257175
base16to10: 1
base16to10: 0
array(2) { ["my_bit"]=> string(1) "1" ["my_multiple_bit"]=> string(3) "%qu" } 
```

### q3 – PHP 5.3.2 和 5.2.12 中的输出相同

这也是一个可以安全使用的查询。只需记住将检索到的十六进制数转换为十进制数。

```
plain: 0
plain: 7
bin2hex: 30
bin2hex: 37
base16to10: 0
base16to10: 7
array(2) { ["my_bit"]=> string(1) "0" ["my_multiple_bit"]=> string(1) "7" }

plain: 1
plain: 80
bin2hex: 31
bin2hex: 3830
base16to10: 1
base16to10: 128
array(2) { ["my_bit"]=> string(1) "1" ["my_multiple_bit"]=> string(2) "80" } 
```

### q4 – 输出很奇怪

PHP 5.2.12 可以正常工作，`bit(1)`但如果对正在使用的 PHP 版本或其行为有任何疑问，我不会使用此查询。

PHP 5.2.12

```
plain:
plain: 
bin2hex: 00
bin2hex: 07
base16to10: 0
base16to10: 0
array(2) { ["my_bit"]=> string(1) "" ["my_multiple_bit"]=> string(1) "" }

plain: 
plain: �
bin2hex: 01
bin2hex: 80
base16to10: 0
base16to10: 0
array(2) { ["my_bit"]=> string(1) "" ["my_multiple_bit"]=> string(1) "�&quot; } 
```

PHP 5.3.2

```
plain: %qu
plain: %qu
bin2hex: 257175
bin2hex: 257175
base16to10: 0
base16to10: 0
array(2) { ["my_bit"]=> string(3) "%qu" ["my_multiple_bit"]=> string(3) "%qu" }

plain: %qu
plain: %qu
bin2hex: 257175
bin2hex: 257175
base16to10: 0
base16to10: 0
array(2) { ["my_bit"]=> string(3) "%qu" ["my_multiple_bit"]=> string(3) "%qu" } 
```

## 最后的想法和自我说明

RTM，测试再测试。

也很高兴知道这个`%qu`输出是否是 PHP 5.3.2 独有的错误。（或者还有哪些其他 PHP 版本受到影响。）

因此，Álvaro 的答案在使用`CAST`或`HEX`从 DB 检索值的意义上是正确的。[该手册](https://dev.mysql.com/doc/refman/8.0/en/bit-value-literals.html)揭示了额外的“+0”方法，这似乎消除了不同 PHP 版本行为的痛苦。因此，简短的回答是最重要的......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-27T09:07:32.287

这是有关如何检索`BIT`列类型的完整示例：

```
<?php

$conn = new PDO('mysql:host=test;dbname=test', 'test', 'test');
$conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$conn->query('DROP TABLE IF EXISTS bit_test');
$conn->query('CREATE TABLE bit_test (
    my_bit BIT(1) NULL,
    my_multiple_bit BIT(8) NULL
)');
$conn->query("INSERT INTO bit_test (my_bit, my_multiple_bit) VALUES (b'0', b'111')");
$conn->query("INSERT INTO bit_test (my_bit, my_multiple_bit) VALUES (b'1', b'10000000')");

$res = $conn->query('SELECT my_bit, my_multiple_bit FROM test');
while($row = $res->fetch(PDO::FETCH_ASSOC)){
    var_dump($row);
} 
```

...打印：

```
array(2) {
  ["my_bit"]=>
  string(1) "0"
  ["my_multiple_bit"]=>
  string(1) "7"
}
array(2) {
  ["my_bit"]=>
  string(1) "1"
  ["my_multiple_bit"]=>
  string(3) "128"
} 
```

**编辑＃1：**

这是我以前的代码，适用于 mysqli：

```
<?php

$conn = new mysqli('localhost', 'test', 'test','test');

$conn->query('DROP TABLE IF EXISTS bit_test');
$conn->query('CREATE TABLE bit_test (
    my_bit BIT(1) NULL,
    my_multiple_bit BIT(8) NULL
)');
$conn->query("INSERT INTO bit_test (my_bit, my_multiple_bit) VALUES (b'0', b'111')");
$conn->query("INSERT INTO bit_test (my_bit, my_multiple_bit) VALUES (b'1', b'10000000')");

$res = $conn->query('SELECT my_bit, my_multiple_bit FROM test');
#while($row = mysqli_fetch_array($res, MYSQLI_ASSOC)){
while($row = $res->fetch_array(MYSQLI_ASSOC)){
    var_dump($row);
} 
```

我得到了一个额外的数组项，所有值都设置为`NULL`（我不熟悉 mysqli，所以这可能是我的错），但输出在其他方面是相同的。我已经在 PHP/5.3.0 和 PHP/5.4.5 中对其进行了测试。

我建议您逐字尝试我的代码并验证您是否仍然得到`%qu`或奇怪的东西。我有一种强烈的感觉，这样的`%qu`绳子可能会从其他地方泄漏……

**编辑#2：**

从附加信息中，我认为我们可以得出以下结论：

*   早期的 PHP 版本按原样检索`BIT`列，作为原始二进制字符串（`0x07`并且`0x80`是正确的数字，`7`并且`128`是十进制）。

*   在某些时候，添加了自动编码，并`BIT`开始以小数形式检索列。

*   OP 使用的 PHP 版本可能在编码代码中有一个错误：`%qu`让我想起了 C printf 修饰符（尽管我找不到它的确切定义）。

鉴于不同的行为，需要一种解决方法来确保一致的输出：

*   `CAST(my_bit AS UNSIGNED)`生成一个十进制数
*   `HEX(my_bit)`生成一个十六进制数

# django - 我可以帮助我如何在模型中保存外键吗？

> ID：15106987
> 
> 赞同：0
> 
> 时间：2013-02-27T08:06:59.690
> 
> 标签：django, foreign-keys

我有两个模型`Order`和`OrderItem`.

下订单的过程从`OrderItem`模型开始。

```
 class OrderItem(SmartModel):
        shopping_id = models.CharField(max_length=50,db_index=True)
        quantity = models.IntegerField(default=0)
        item = models.ForeignKey(Item)
        order = models.ForeignKey(Order,null=True,blank=True) 
```

`OrderItem`代表一个项目并且是一个模型表单，其中一个字段是`quantity`其他字段是`excluded` 我验证表单并像这样创建项目，

```
def show_item(request,id):
    # need to evaluate the HTTP method
    if request.method == 'POST':
        a = Item.objects.get(pk=id)
        form = PartialOrderItemForm(request.POST,instance=a)
        # check validation of posted data
        if form.is_valid():
            order.add_to_order(request,a)
            # if test cookie worked, get rid of it
            if request.session.test_cookie_worked():
                request.session.delete_test_cookie()
            url =urlresolvers.reverse('order_index')
            # redirect to order page
            return HttpResponseRedirect(url)
    else:
        form = PartialOrderItemForm()
    request.session.set_test_cookie()
    context={

        'form':form,

    }
    return render_to_response('item.html',context,context_instance=RequestContext(request)) 
```

`is_valid`在ie`order.add_to_order`创建并保存项目之后调用的函数。

```
def add_to_order(request,obj):  
    postdata = request.POST.copy()
    #get quantity added, return 0 if empty
    quantity = postdata.get('quantity',0)
    # fetch the item or return  missing page error_message
    i = get_object_or_404(Item,pk=obj.id)
    # get items in order
    order_items = get_order_items(request)
    item_in_orders = False
    # check to see if item is already in order
    for order_item in order_items:
        if order_item.item.id == i.id:
            #update the quantity if found
            order_item.augment_quantity(quantity)
            item_in_orders = True
    if not item_in_orders:
        # creat and save a new order item
        anon_user = User.objects.get(id=settings.ANONYMOUS_USER_ID)
    oi=OrderItem.objects.create(shopping_id=_shopping_id(request),
                                          quantity=quantity,
                                          item=i,
                                          created_by=anon_user,
                                          modified_by=anon_user)
    oi.save() 
```

当客户完成创建项目（在数据库中）时，他们填写的表格是`Order`

```
class Order(SmartModel):
    #each individual status
    SUBMITTED = 1 # the credit card was valid or mobilemoney was recieved.It is ready for us to process the order
    PROCESSED = 2 # After submitted orders are reviewed, we can mark them as processed, letting deliverers know order is ready to be shipped
    DELIVERED = 3 # the order has been processed and approved by the adminstrator(in this case us), it is delivered.
    PICKED_UP =4 # the order has been processed and is picked up by customer
    CANCELLED = 5 # Customer called the company and decided they didnt want to go through with the order either by phone or email.

    # SET OF POSSIBLE STATUSES
    ORDER_STATUSES = ((SUBMITTED,'Submitted'),(PROCESSED,'Processed'),(DELIVERED,'Delivered'),(PICKED_UP,'picked_up'),(CANCELLED,'Cancelled'),)
    #Order info
    date = models.DateTimeField(auto_now_add=True)
    status = models.IntegerField(choices=ORDER_STATUSES, default=SUBMITTED)
#   customer = models.ForeignKey(Customer,null=True,blank=True,help_text="The customer who made this order",default=None,)
    restaurant = models.ForeignKey(Restaurant,null=True,blank=True,default = None,help_text="The restaurant the customer order from")
    #contact info
    email = models.EmailField(max_length=50,help_text="Needed as alternative")
    mobile = PhoneNumberField(max_length=20,default='+25078######',help_text="Needed to communicate and confirm payment from mobile money")

    #billing information
    billing_name= models.CharField(max_length=50,help_text="Needed so we can deliver to the right individual")

    billing_address= models.CharField(max_length=50,help_text="Needed for delivery purposes, should be office address.")    
    billing_city = models.CharField(max_length=50,help_text="F4L services are only in selected cities.") 
```

`Order`是我这样验证和保存的模型形式。

```
def show_checkout(request):
    if order.is_empty(request):
        cart_url = urlresolvers.reverse('order_index')
        return HttpResponseRedirect(cart_url)
    if request.method == 'POST':
        postdata = request.POST.copy()
        form = forms.CheckoutForm(request.POST,postdata)
        if form.is_valid():
            anon_user = User.objects.get(id=settings.ANONYMOUS_USER_ID)
            obj = form.save(commit=False)
            obj.created_by = anon_user
            obj.modified_by = anon_user
            obj.save()
            if postdata['submit'] == 'place order':
                reciept_url = urlresolvers.reverse('checkout_reciept')
                return HttpResponseRedirect(reciept_url)
    else:
        form = forms.CheckoutForm
    context = {
        'form':form,
    }
    return render_to_response('checkout/checkout.html',context,context_instance=RequestContext(request)) 
```

我应该指出，它`OrderItem`是在 .. 之前调用`Order`的 .. 大部分混淆来自于返回与我`OrderItem`相关的所有对象，正如 django 文档[https://docs.djangoproject.com/en/dev/topics/db/所建议的那样](https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward)[查询/#following-relationships-backward](https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward)`Order`

```
>>> from orders.models import OrderItem,Order
>>> a = Order.objects.get(id=1)
>>> a
<Order: blah blah blahbaah@blahblah.com +250780000000 1 2013-02-26 17:25:23.138738+00:00>
>>> a.orderitem_set.all()
[] 
```

我认为它是空的，因为我没有保存外键，但我真的很困惑如何去做。任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:19:54.260

您只需要传入（或以某种方式获取）订单的对象。

假设订单的 PK 在您的 POST 变量中，您可以这样做：

```
def add_to_order(request,obj):  
    postdata = request.POST.copy()
    order = Order.objects.get(pk=postdata.get('order_id'))
    …
        oi=OrderItem.objects.create(order=order, shopping_id=_shopping_id(request), …) 
```

不过，根据您在下面的评论，您是在创建`order`AFTER 之后创建的`orderitem`，这使得上面的代码毫无意义。

如果尚未创建订单，则绝对无法将订单项与订单绑定。至少不是不做其他事情。

这就是我要做的。

1.  向您的 OrderItem 添加一个新字段：

    ```
    order_uuid = models.CharField(max_length=25, blank=False, null=True) 
    ```

2.  当您开始您的订单流程时（无论您从哪里开始），使用 python 的`uuid`包创建一个 UUID：

    ```
    import uuid
    temporary_order_uuid = uuid.uuid4() 
    ```

3.  通过您的每个订单步骤传递此值，最终将其保存到`orderitem`您创建它的时候。

    ```
    oi=OrderItem.objects.create(order_uuid=temporary_order_uuid, …) 
    ```

4.  创建您的 后`order`，返回并`orderitems`使用订单的 pk 更新所有包含该 uuid 的内容：

    ```
    order_items = OrderItems.objects.get(order_uuid=temporary_order_uuid)
    for oi in order_items:
        oi.order = order
        oi.save() 
    ```

5.  一个更清洁的解决方案是在您`orderitems`在数据库中创建订单之后创建您的，但我不知道您的应用程序的所有各种要求。

# razor - mvc4 中动态生成的@html.dropdown 控件的工具提示

> ID：15106996
> 
> 赞同：1
> 
> 时间：2013-02-27T08:07:23.843
> 
> 标签：razor, asp.net-mvc-4

我正在`MVC 4`使用`Razor`和`C#`. 我已经`@Html.DropDownList`动态地使用了该显示项目。

我想`ToolTip`为`@Html.DropDownList`. 这是我的代码：

```
@Html.DropDownList("Config_Industry", ViewBag.Industry as IEnumerable<SelectListItem>, "Please Choose Item", new
{
    @class = "drpDownCustomEngineered",
    @style = "width: 258px;"                                               
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:13:20.517

据此，没有这样的机会[，](http://www.mikesdotnetting.com/Article/128/Get-The-Drop-On-ASP.NET-MVC-DropDownLists)`DropDownList`但是

你可以使用`jQuery`：

```
<script type="text/javascript">

  $(function() {
  $("#CategoryID option").each(function() {
      $(this).attr({'title': $(this).html()});
    });
  });
</script> 
```