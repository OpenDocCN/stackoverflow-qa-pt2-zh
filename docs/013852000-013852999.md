# StackOverflow 问答 13852000-13852999

# asp.net-mvc - 自动将文件上传到临时文件夹

> ID：13852003
> 
> 赞同：0
> 
> 时间：2012-12-13T02:31:12.870
> 
> 标签：asp.net-mvc, html, file-upload

在没有提交的情况下从文件对话框中选择文件后，如何自动调用我的控制器方法，以便我可以将该文件保存在临时文件夹中，直到用户准备好将文件保存并存储到文件系统。这种方法理想吗？我的目标是最终让用户上传一个短视频，将其保存到临时文件夹，让他/她在视图中看到一个缩略图，并且他/她希望他们可以将其保存到那里的配置文件中。

```
<form id="fileupload" action="/Home/UploadFiles" method="POST" 
               enctype="multipart/form-data">
  <input id="fileupload" type="file" onchange="uploadSelectedFile(this)" 
               name="file">
  @*<input type="submit" />*@
</form> 
```

在控制器中：

```
[HttpPost]
public ActionResult UploadFiles(HttpPostedFileBase file)
{
     //Save file to temp folder 
     //then later user can call a save button to acutally save the files.
     return Json();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:57:16.573

**更新**：显然，uploadify 使用密钥“Filedata”发送它的文件。我在[这里写了一篇带有完整 asp.net-mvc/uploadify 示例](http://gideondsouza.com/blog/ajax-upload-files-with-asp.net-mvc-and-uploadify)的文章。

* * *

我认为您不能依赖常规文件上传。

用户上传文件后，您必须在后面进行 ajax 上传。有关您可以使用的一些现成控件，请参阅[此链接。](http://www.webdeveloperjuice.com/2010/02/13/7-trusted-ajax-file-upload-plugins-using-jquery/)

[Uploadify](http://www.uploadify.com/demos/)看起来很有前途，是一个**JQuery 插件**。这就是使用uploadify 的方式：

```
<input type="file" name="file_upload" id="file_upload" />

$(function() {
    $("#file_upload").uploadify({
        'swf'      : '/uploadify/uploadify.swf',
        'uploader' : '<path_to_your_action_method>' //Youcontroller/UploadFiles
    });
}); 
```

在您的控制器中：

```
[HttpPost]
public ActionResult UploadFiles()
{
     //Uploadify sends this as "Filedata"
     HttpPostedFile theFile = Request.Files["Filedata"];
     //save your file here...

     //anything you return will be sent to the onUploadSucess event
     http://www.uploadify.com/documentation/uploadify/onuploadsuccess/
     return Json();
} 
```

当用户然后选择保存时，您可以确定他是否保存了与用户有某种关联的文件并将文件传输到正确的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T07:10:43.447

如前所述`gideon`，我认为您无法通过正常的文件上传来做到这一点。

您可以使用`Uploadify`文件上传控制来做到这一点。

```
 $('#file_upload').uploadify({
                'checkExisting': 'Content/uploadify/check-exists.php',
                'swf': '/Content/uploadify/uploadify.swf',
                'uploader': '/Home/uploadify',
                'auto': false,
                'buttonText': 'Browse'
}); 
```

控制器中的代码是

```
[HttpPost]
        public ActionResult Uploadify(IEnumerable<HttpPostedFileBase> fileData)
        {
            foreach (var file in fileData)
            {
                if (file.ContentLength > 0)
                {

                    currpath = Path.Combine(System.Environment.GetEnvironmentVariable("TEMP"), file.FileName);

                    file.SaveAs(currpath);
                }
            }
            return View();
        } 
```

如果您要上传单个文件，请使用`HttpPostedFileBase`而不是`IEnumerable<HttpPostedFileBase>`

希望这可以帮助。

# matplotlib - 数据框值的熊猫字典，需要图形建议

> ID：13852008
> 
> 赞同：0
> 
> 时间：2012-12-13T02:31:37.360
> 
> 标签：matplotlib, pandas

我有一个节点集群，每个节点产生大约 200 个关于 CPU/网络/磁盘等性能的统计信息。到目前为止，我已经遍历了各种节点的日志文件，并将它们解析为每个节点的数据帧对象并放入 dict由节点 ID 键入：

（这里第一列是DataFrame的索引标签）

```
 { 'node00': 
            <DaFrame-display-begin>
                               core 0    core 1    core 2   core 3   group 0
    Avg IPC (w/ idle)           0.09      0.12     0.06      0.06      0.08
    Avg CPI (w/ idle)          11.17      8.03    15.62     16.97     12.95
    Avg IPC (w/o idle)          0.48      0.78     0.64      0.63      0.63
    Avg CPI (w/o idle)          2.10      1.28     1.56      1.59      1.63
    User IPC (w/o idle)         0.70      1.02     0.85      0.84      0.85
    ........................................
    ,
     'node01':
            <DataFrame-display-begin>
    Avg IPC (w/ idle)           0.05      0.12     0.06      0.06      0.08
    Avg CPI (w/ idle)           9.17      8.03    15.62     16.97     12.95
    Avg IPC (w/o idle)          0.48      0.78     0.64      0.63      0.63
    Avg CPI (w/o idle)          2.10      1.28     1.56      1.59      1.63
    User IPC (w/o idle)         0.70      1.02     0.85      0.84      0.85

    } 
```

我计划编写一个通用函数，它将统计数据的名称作为参数，然后在集群中的所有节点上绘制特定统计数据的条形图。不同芯的棒可以堆叠或并排。但是 x 轴将点需要作为节点以便于比较。

有什么建议么？我是 Pandas/matplotlib 的新手，所以任何提示都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T08:30:41.890

我认为最好的方法是将所有数据帧合并在一起，然后您可以使用所有不错的 Panda 函数来切片和混合匹配。

让我们首先创建一些示例数据：

```
# node1
index = ['Avg IPC (w/ idle)', 'Avg CPI (w/ idle)', 'Avg IPC (w/o idle)', 'Avg CPI (w/o idle)', 'User IPC (w/o idle)']

core0 = [0.09, 11.17, 0.48, 2.10, 0.70]
core1 = [0.12, 8.03, 0.78, 1.28, 1.02]
core2 = [0.06, 15.62, 0.64, 1.56, 0.85]
core3 = [0.06, 16.97, 0.63, 1.59, 0.84]
group = [0.08, 12.95, 0.63, 1.63, 0.85]

data = {'core0': core0, 'core1': core1, 'core2': core2, 'core3': core3, 'group': group}
node01 = pd.DataFrame(data, index=index)

# node2
index = ['Avg IPC (w/ idle)', 'Avg CPI (w/ idle)', 'Avg IPC (w/o idle)', 'Avg CPI (w/o idle)', 'User IPC (w/o idle)']

core0 = [0.33, 11.17, 0.48, 2.10, 0.70]
core1 = [0.12, 8.99, 0.78, 1.28, 1.02]
core2 = [0.06, 15.62, 0.64, 1.56, 9.99]
core3 = [0.06, 16.99, 9.99, 1.59, 0.84]
group = [0.08, 12.95, 0.63, 9.99, 0.85]

data = {'core0': core0, 'core1': core1, 'core2': core2, 'core3': core3, 'group': group}

node02 = pd.DataFrame(data, index=index)

alldfs = {'node01': node01, 'node02': node02} 
```

alldfs 应该与您的 dict 类似。我会像这样合并它们：

```
# create 1 DataFrame
dfall = pd.concat(alldfs)

# name the levels for easy access
dfall.index.names = ['node','stat']
dfall.columns.name = 'core'

# pivot the 'stat' layer to the columns so only the nodes are on the index
dfall = dfall.unstack('stat') 
```

这为您提供了一个包含所有数据的漂亮单个 DataFrame，使用 Pandas 内置功能的基本绘图功能可以很简单：

```
def plotstat(df, stat):
    return df.xs(stat, axis=1, level=1).plot(kind='bar', title=stat)

plotstat(dfall, 'Avg IPC (w/ idle)') 
```

这使：

![在此处输入图像描述](../Images/e5973b7e16628b026bcf93d45ca07b4c.png)

* * *

您当然可以使用 stack/unstack 来构建您的 DataFrame，具体取决于数据量和您最常使用它的方式。

# android - 便于使用多个 Android 市场的工具？

> ID：13852011
> 
> 赞同：1
> 
> 时间：2012-12-13T02:31:48.830
> 
> 标签：android, design-patterns, google-play, amazon-appstore

是否有一个库可以轻松维护多个 Android 市场上的应用程序？

具体来说，我正在寻找能够：

1.  确定应用程序的销售市场。
2.  在产品应用程序中处理
3.  确定产品是否获得许可。

我想至少在以下市场上这样做：

*   谷歌播放
*   亚马逊应用商店

如果没有，那我打算自己做一个。我一直在试图弄清楚如何设计这样一个工具。在我看来，最好的方法是要么做一个完整的工厂模式，要么可能是一个模板供具体的类使用，一个类可以确定你正在使用的应用市场，然后传递适当的类来管理它目的。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:43:39.757

您可以使用 来识别“市场” `PackageManagergetInstallerPackageName()`，对于 Android 市场/Play Store 将是“com.android.vending”。

产品内应用程序大多不兼容，并且依赖于向清单中添加内容、第三方应用程序（Play Store 客户端或 Amazon Appstore 客户端等）的可用性，您甚至可能无法运行相同的 APK 来支持 Amazon 和 Google . 简而言之，这可能是不可能的或不值得付出努力。如果经历了这个艰难的过程，请分享。

# html - 基于 z-index 和分层交换固定元素

> ID：13852018
> 
> 赞同：1
> 
> 时间：2012-12-13T02:32:36.347
> 
> 标签：html, css

我正在尝试开发一种 CSS 效果，其中网页的左上角/左角有一个固定的彩色元素。有不同的“阶段”/背景块（红色、绿色、蓝色），高度为 1000 像素。在各个阶段之间的桥梁上，我希望图标的颜色能够过渡。我在 jsfiddle 上嘲笑了一些东西。我真的很想看到两个固定元素的两半重叠成一个，那会让我很高兴。

[http://jsfiddle.net/reggi/vxBV3/](http://jsfiddle.net/reggi/vxBV3/)

这是CSS

```
.stage{width:100%;height:1000px;position:relative;}

.stage.one{background:red;z-index:1;}
.stage.two{background:green;z-index:1;}
.stage.three{background:blue;z-index:1;}

.box{width:50px;height:50px;position:fixed;margin:10px;}

.box.one{background:purple;z-index:1;}
.box.two{background:orange;z-index:1;}
.box.three{background:yellow;z-index:1;} 
```

和 HTML

```
<!--

<div class="box one"></div>

<div class="box two"></div>

<div class="box three"></div>

-->

<div class="stage one">
    <div class="box one"></div>
</div>

<div class="stage two">
    <div class="box two"></div>
</div>

<div class="stage three">
    <div class="box three"></div>
</div>​ 
```

我希望这只是**CSS**！我知道 javascript 会让这更容易，但如果可能的话，我想突破 CSS 的限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-08T01:37:44.973

[演示](https://jsbin.com/soneleqifi/1/edit?html,css,output)

This is impossible to do with CSS alone, here's why. When You set the first elements `.stage.one` (red), `.stage.two`(green) and `.box.one`(purple), your setting them all up to work so that the purple box is on top of the red and goes under the green. At this point your stuck, there's no way to put another box over purple, under red, and over green. It's impossible.

[![enter image description here](../Images/b78a0ac3dcd9c07fcd46c135905db091.png)](https://i.stack.imgur.com/Q1XSm.gif)

# perforce - Perforce 'p4 集成' 参数排序中的错误

> ID：13852030
> 
> 赞同：3
> 
> 时间：2012-12-13T02:34:31.927
> 
> 标签：perforce

`p4`我今天使用linux 客户端遇到了一个奇怪的情况。我想知道是否有人看到过或可以解释为什么会发生这种情况：

```
$ p4 integrate -b dev -v -i -t -Ds -Dt @34864
//depot/dev/.../TestBo.java - can't branch from //depot/main/.../TestBo.java#4 without -d or -Dt flag

$ p4 integrate -b dev -v -i -t -Dt -Ds @34864
//depot/dev/.../TestBo.java#3 - branch from //depot/main/.../TestBo.java#4 
```

请注意，`-Dt`和`-Ds`论点是相反的。

```
$ p4 info
Server version: P4D/NTX64/2009.2/273932 (2010/11/16) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:04:31.770

[看到这里](http://www.perforce.com/perforce/doc.current/manuals/cmdref/integrate.html)没有提到这种行为并且你正在运行一个可用的`2009.2`构建`2012.2`，我建议尽可能升级或者直接联系他们的支持。

# jquery - Jquery Mobile - 添加选项以动态选择

> ID：13852031
> 
> 赞同：2
> 
> 时间：2012-12-13T02:34:46.347
> 
> 标签：jquery, jquery-mobile

我有一个带有`select`元素的 JQM 页面：

```
<select class="state" name="user.state" data-role="select"><option value="">state</option></select> 
```

我试图动态添加选项：

```
$.each(data['states'], function(index, state) {
    $('<option value="'+state+'">'+state+'</option>').appendTo($('#update-profile-page .state'));
}); 
```

但它没有按预期工作。

截屏：

![在此处输入图像描述](../Images/46dd8fd0447f68991e6774e071c32a8d.png)

问题是默认或选定选项的值包含所有状态。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T05:52:03.010

**我的 HTML 代码：**

```
<div data-role="page">
    <div data-role="header">
        <h1>My Title</h1>
    </div><!-- /header -->
    <div data-role="content">   
        <p>Hello world</p>      
        <select class="state" name="user.state" data-role="select">
            <option value="asfsafd">option1</option>
            <option value="asfsafd">option2</option>
            <option value="asfsafd">option3</option>
        </select>
    </div><!-- /content -->
    <a data-role="button" id="test">click</a>   
</div><!-- /page --> 
```

**JS代码**

```
<script>
    $("#test").bind('click', function(){
        var select = $('select.state');
        $.each(["option4", "option5", "option6" , "option7"], function(index, state) {              
            var optTempl = '<option value="' +state+ '">'+state+'</option>';            
            select.append(optTempl)
        });
        var option4 = $($("option", select).get(4));
        option4.attr('selected', 'selected');
        select.selectmenu();
        select.selectmenu('refresh', true);
    })
</script> 
```

我已经修改了您的代码以进行解释。我添加了一个按钮，并单击它。当您单击 i 动态附加一些随机值时，将所选选项更改为动态添加的选项之一。然后重新初始化选择菜单，然后刷新菜单。

脚本的最后两行是答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-26T07:46:08.657

我希望这个功能有所帮助。

```
setSelect("typeBusiness",row["region"]);

function setSelect(idControl,newValue){
    var select = $("#"+idControl);
    var optsLength = $("#"+idControl+" > option").length;
    var optTempl = "<option value='"+newValue+"'>"+newValue+"</option>";            
    select.append(optTempl);    
    var newOption= $($("option", select).get(optsLength));
    newOption.attr("selected", "selected");
    select.selectmenu();
    select.selectmenu("refresh", true);
} 
```

# c# - C# Linq 查询以查找无效条目

> ID：13852037
> 
> 赞同：2
> 
> 时间：2012-12-13T02:34:59.577
> 
> 标签：c#, linq, validation

我正在尝试对列表中的数据进行一些手动验证。

我有一个 MachineryRecord 类，我对它进行排序，然后按 JobNumber 分组，现在我需要在每个具有重叠时间的分组列表中找到任何结果，例如。开始时间到结束时间与另一个记录 StartTime 到 EndTime 重叠。

到目前为止，这就是我所得到的：

```
int invalidCount = 0;
var sorted = _machineRecords.OrderBy(x => x.StartTime).ToList();
var grouped = sorted.GroupBy(x => x.JobNumber).ToList();
foreach(IGrouping<int,MachineryRecord> mac in grouped)     
{
   var queryResults = mac.//Linq query to find overlapping times
   invalidCount += queryResults.Count;
}
if(invalidCount > 0)
    return false;
else
    return true; 
```

这是 MachineRecord 对象的缩减版本：

```
public class MachineryRecord
{
    public int ID { get; set; }
    public float StartTime { get; set; }
    public float EndTime { get; set; }
} 
```

所以我的问题是实现这一目标的 linq 查询是什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T02:55:19.297

如果并假设开始时间总是在结束时间之前，则两个间隔`a`和`b`重叠。因此，这可以表示如下。`a.StartTime < b.EndTime``a.EndTime > b.StartTime`

```
var invalidCount = _machineRecords.Count(a =>
                       _machineRecords.Any(b =>
                           (a.ID != b.ID) &&
                           (a.JobNumber == b.JobNumber) &&
                           (a.StartTime < b.EndTime) &&
                           (a.EndTime > b.StartTime))); 
```

包括这个的最终检查`invalidCount`可以简化为单个返回语句。

```
return !_machineRecords.Any(a =>
           _machineRecords.Any(b =>
               (a.ID != b.ID) &&
               (a.JobNumber == b.JobNumber) &&
               (a.StartTime < b.EndTime) &&
               (a.EndTime > b.StartTime))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:57:17.887

这是一个非 LINQ 版本，它将使用集合按开始日期排序的事实：

```
 List<Tuple<MachineryRecord,MachineryRecord>> OverlapingRecords(IEnumerable<MachineryRecord> sortedRecords)
    {
        var result = new List<Tuple<MachineryRecord, MachineryRecord>>();
        MachineryRecord prev = null;
        foreach (var current in sortedRecords)
        {
            if (prev != null)
            {
                if (current.StartTime < prev.EndTime) { result.Add(new Tuple<MachineryRecord, MachineryRecord>(prev,current)); }
            }
            prev = current;
        }
        return result;
    } 
```

我还没有测试过它；）

# javascript - 使用 angularjs 组合多层视觉元素

> ID：13852047
> 
> 赞同：2
> 
> 时间：2012-12-13T02:36:38.627
> 
> 标签：javascript, angularjs

我希望使用 angularjs 构建自定义小部件。我的问题是我希望能够松散地耦合我的小部件。

就我而言，我希望构建一个两级组件：

*   图形微调器
*   一个进度小部件，它将微调器作为`argument`.

我已经构建了微调器 - [http://jsfiddle.net/Byg6W/](http://jsfiddle.net/Byg6W/)

我希望这样编写进度小部件：

```
<gh:progress data="progress">
   <gh:spinner .... options ....> </gh:spinner>
</gh:progress> 
```

并且能够以某种方式将两个组件“连接”在一起，以便当“数据”更新时，它会自动输入 gh:spinner，这与我讨厌做的相反——将 gh:spinner 的所有选项放入 gh:进步

```
<gh:progress data="progress" .... options ....></gh:progress> 
```

然后使用模板。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T05:59:04.490

你可以在你的 gh:progress 指令上创建一个控制器，由 gh:spinner 调用。您的 gh:spinner 可以通过 require: 属性将该控制器注入到其 link: 函数中。在这里，您将在 require 中使用 ^ 来告诉它在父元素上查找控制器。

请参阅[http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)上的 require: 规范。

查看 angularjs.org 主页底部的 Tabs 示例以查看它的实际效果。在这里，窗格指令需要父选项卡的控制器，以便它们可以注册并让选项卡控制它们之间的切换。

# php - Javascript PHP N 层架构

> ID：13852050
> 
> 赞同：0
> 
> 时间：2012-12-13T02:36:56.250
> 
> 标签：php, javascript, html, architecture, n-tier-architecture

我很困惑如何对我正在做的项目进行分类，如果它是 3 层或 2 层。

基本上它是一个医疗服务系统，它使用 PHP 和 JS（使用 Jquery 和 Ajax）；两者都用于业务逻辑。知识渊博的人告诉我，它是 3 层；我不知道为什么...也许是因为 HTML 被认为是表示层，PHP 更重要的是 JS 作为业务层，而 PHP（和 MySQL）是数据访问层？是这样吗？个人认为是2层。有人可以详细解释一下吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:42:18.613

没有达成一致的定义。我认为它是 2 层客户端-服务器。有些人会争辩我猜...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:05:07.517

我认为层是指物理计算机，而不是软件层。所以一个 3 层架构可能是

1 - 数据库服务器 - mysql 或其他一些数据库软件

2 - 应用程序（Web）服务器，运行 php 或其他一些服务器端语言

3 - 客户端（解释 HTML 和 Javascript 的网络浏览器）

在两层架构中，数据库和应用程序服务器都是相同的。

# mysql - 聚集索引还是分区表？

> ID：13852052
> 
> 赞同：2
> 
> 时间：2012-12-13T02:37:13.440
> 
> 标签：mysql, sql

我有一个文件共享网站，我的用户对点击他们的文件感兴趣。每次点击都会在 clicks 表中存储为一个新行。

通常，他们想知道在某个日期范围内获得了多少点击：

```
$statement = $db->prepare("SELECT COUNT(DISTINCT ip) FROM clicks WHERE user_id=? AND time BETWEEN ? AND ?");
$statement->execute(array($user_id, $from_date, $to_date)); 
```

此外，他们还可以查看某个文件的点击次数：

```
$statement = $db->prepare("SELECT COUNT(DISTINCT ip) FROM clicks WHERE file_id=? AND time BETWEEN ? AND ?");
$statement->execute(array($file_id, $from_date, $to_date)); 
```

这些查询的问题在于 user_id 和 file_id 不是该表的键（它们不是唯一的）。相反，一个简单的“id”列是主键，但它从不参与任何查询。

我一直在研究聚集索引，但我不知道在这种情况下如何实现它。

随着 clicks 表变得非常大（5-6 百万行），这些查询需要更长的时间（我计划让这个表变得更大）。我读到分区可能是我需要做的？

我需要创建一个聚集键、对表进行分区，还是两者都需要？

供参考，`clicks`结构：

`id` `time` `user_id` `ip` `file_id`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T02:46:34.200

您不需要更改聚集索引。

我建议创建这些索引：

```
ALTER TABLE clicks ADD INDEX (file_id, time, ip),
                   ADD INDEX (user_id, time, ip); 
```

通过在索引定义中包含 ip，每个查询都应该能够从索引结构本身获取所需的所有信息。这称为*覆盖指数*。然后查询根本不需要接触表，因此哪些列构成表的聚集索引并不重要。

如果您使用 EXPLAIN 分析查询，您应该在 Extra 字段中看到“Using index”，这表明查询正在获得覆盖索引的好处。

我认为在这种情况下分区不会有帮助，因为 MySQL 分区要求分区列*必须*是表的任何主键/唯一键的一部分。

# jquery - 根据查询字符串值显示/隐藏元素

> ID：13852056
> 
> 赞同：3
> 
> 时间：2012-12-13T02:37:30.403
> 
> 标签：jquery

在页面上有一些 div 元素，默认情况下我需要隐藏这些元素，直到提交表单并且用户重定向回同一页面，并在 URL 上附加了一个查询字符串 (?success=true)。

有人可以在这里帮忙吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T02:44:27.867

```
$(document).ready(function () {
  $("div.show_on_success").toggle(document.URL.indexOf("success=true") !== -1);
}); 
```

`show_on_success`如果页面 URL 中出现“success=true”，则此代码显示带有类的 div，否则隐藏它们。

# oauth - 我可以实现一半的 OAuth 吗？

> ID：13852059
> 
> 赞同：0
> 
> 时间：2012-12-13T02:37:39.923
> 
> 标签：oauth

我正在编写一个 Web 服务，我希望用户能够为其他人生成 OAuth 客户端令牌，本质上。因此，与其让人们访问我的网站并登录并获得令牌，不如给他们一个由我网站的现有用户生成的令牌。这只是基于密钥的授权，在我看来。

这是一个愚蠢的想法吗？在这种情况下还有其他更有意义的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:09:44.753

当然可以，你可以生成令牌并以任何你想要的方式分发它，然后要求它在遵循 OAuth 协议的事务中使用。没有法律禁止它。

*   令人困惑？是的。
*   奇怪的是我以外的人可以授权应用程序使用我的私人资源？是的。
*   可能的？是的。

我不知道你的用例是什么，它可能对你来说很有意义，但对我来说似乎非常违反直觉。

# java - Ubuntu - 为什么我有这么多 Oracle Java 7，我应该使用哪一个？

> ID：13852061
> 
> 赞同：1
> 
> 时间：2012-12-13T02:37:53.310
> 
> 标签：java, linux, oracle, ubuntu, jvm

我只想使用 Oracle 的 Java 7 JVM 来确保 Eclipse 尽可能快地运行。这是怎么回事？我应该选择哪一个？

```
$ sudo update-alternatives --config java
There are 4 choices for the alternative java (providing /usr/bin/java).

  Selection    Path                                            Priority   Status
------------------------------------------------------------
  0            /usr/lib/jvm/java-7-oracle/jre/bin/java          1055      auto mode
  1            /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java   1051      manual mode
* 2            /usr/lib/jvm/java-7-oracle/bin/java              1         manual mode
  3            /usr/lib/jvm/java-7-oracle/jre/bin/java          1055      manual mode
  4            /usr/lib/jvm/jre1.7.0/bin/java                   3         manual mode

Press enter to keep the current choice[*], or type selection number: 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T02:46:18.980

这 ...

`0 /usr/lib/jvm/java-7-oracle/jre/bin/java`

... 是 Oracle JDK 的捆绑 JRE。这 ...

`1 /usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java`

... 是 Open JDK 的捆绑 JRE。这 ...

`2 /usr/lib/jvm/java-7-oracle/bin/java`

...是甲骨文的 JDK。这 ...

`3 /usr/lib/jvm/java-7-oracle/jre/bin/java`

...是数字 1 的重复。这...

`4 /usr/lib/jvm/jre1.7.0/bin/java`

...是一个独立的 JRE（可能是 Oracle 的，但我不知道，因为它没有在文件路径上说明）。

我暂时假设您知道 JDK 和 JRE 之间的区别。每个 JDK 都有一个捆绑的 JRE。它们通常会在 JDK 安装文件夹名称 JRE 中。

Oracle 的 JDK 和 JRE 比 OpenJDK 好一点，所以我建议您将`0`其用于运行时和`2`开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:55:13.947

尝试运行这些路径中的每一个，`-version`看看他们说的是什么。说：

```
$ /usr/lib/jvm/java-7-oracle/jre/bin/java -version 
```

然后，您可以检查`aptitude search jdk`以查看已安装的软件包，例如，并尝试匹配它们。

# asp.net - Azure 网站上 HTTP 1.0 代理请求的 gzip 压缩

> ID：13852062
> 
> 赞同：5
> 
> 时间：2012-12-13T02:37:58.660
> 
> 标签：asp.net, iis, azure, http-compression, azure-web-app-service

有没有办法让[Azure 网站为来自 HTTP 1.0 代理（如](http://www.windowsazure.com/en-us/home/scenarios/web-sites/)[Amazon Web Services CloudFront](http://aws.amazon.com/cloudfront/)）的请求提供 gzip 内容？考虑这样的请求：

```
curl -I -H "accept-encoding: gzip,deflate,sdch" -H "Via: 1.0 {foo.cdn.net}" -0 http://{fooproject}.azurewebsites.net/ 
```

似乎完成的一般方法是将以下元素添加到`system.webServer`：

```
<httpCompression noCompressionForHttp10="false" noCompressionForProxies="false" /> 
```

它似乎也[`httpCompression`只在其中有效](http://www.iis.net/configreference/system.webserver/httpcompression)，`ApplicationHost.config`而不是`web.config`意味着它在 Azure 网站上不可覆盖。

任何解决方法的建议？

其他资源：

*   [使用 CloudFront 提供压缩文件](http://docs.amazonwebservices.com/AmazonCloudFront/latest/DeveloperGuide/ServingCompressedFiles.html)
*   [调整 Windows Azure 网站](http://blog.maartenballiauw.be/post/2012/07/09/Tweaking-Windows-Azure-Web-Sites.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-12T10:09:50.253

IIS 不会针对 HTTP/1.0 请求进行压缩。您可以通过设置覆盖此行为：

`appcmd set config -section:system.webServer/httpCompression /noCompressionForHttp10:"False"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T14:46:04.240

查看这 2 篇文章，如果您想将压缩 (gzip) 内容发送回客户端，它们可能会对您有所帮助：

[http://christesene.com/mvc-3-action-filters-enable-page-compression-gzip/](http://christesene.com/mvc-3-action-filters-enable-page-compression-gzip/)

[http://www.west-wind.com/weblog/posts/2012/Apr/28/GZipDeflate-Compression-in-ASPNET-MVC](http://www.west-wind.com/weblog/posts/2012/Apr/28/GZipDeflate-Compression-in-ASPNET-MVC)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T01:57:25.437

完成这项工作的自动神奇 HTTP 模块如下所示。您需要在 Web.config 文件中注册它。

```
/// <summary>
/// Provides HTTP compression support for CDN services when
/// ASP.NET website is used as origin.
/// </summary>
public sealed class CdnHttpCompressionModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.PreRequestHandlerExecute += Context_PreRequestHandlerExecute;
    }

    public void Dispose()
    {
    }

    void Context_PreRequestHandlerExecute(object sender, EventArgs e)
    {
        var application = (HttpApplication)sender;
        var request = application.Request;
        var response = application.Response;

        // ---------------------------------------------------------------------

        bool allowed = false;

        string via = request.Headers["Via"];
        if (!string.IsNullOrEmpty(via))
        {
            if (via.Contains(".cloudfront.net"))
            {
                // Amazon CloudFront
                allowed = true;
            }

            // HINT: You can extend with other criterias for other CDN providers.
        }

        if (!allowed)
            return;

        // ---------------------------------------------------------------------

        try
        {
            if (request["HTTP_X_MICROSOFTAJAX"] != null)
                return;
        }
        catch (HttpRequestValidationException)
        {
        }

        // ---------------------------------------------------------------------

        string acceptEncoding = request.Headers["Accept-Encoding"];
        if (string.IsNullOrEmpty(acceptEncoding))
            return;

        string fileExtension = request.CurrentExecutionFilePathExtension;
        if (fileExtension == null)
            fileExtension = string.Empty;
        fileExtension = fileExtension.ToLowerInvariant();

        switch (fileExtension)
        {
            case "":
            case ".js":
            case ".htm":
            case ".html":
            case ".css":
            case ".txt":
            case ".ico":
                break;

            default:
                return;
        }

        acceptEncoding = acceptEncoding.ToLowerInvariant();
        string newContentEncoding = null;

        if (acceptEncoding.Contains("gzip"))
        {
            // gzip
            response.Filter = new GZipStream(response.Filter, CompressionMode.Compress);
            newContentEncoding = "gzip";
        }
        else if (acceptEncoding.Contains("deflate"))
        {
            // deflate
            response.Filter = new DeflateStream(response.Filter, CompressionMode.Compress);
            newContentEncoding = "deflate";
        }

        if (newContentEncoding != null)
        {
            response.AppendHeader("Content-Encoding", newContentEncoding);
            response.Cache.VaryByHeaders["Accept-Encoding"] = true;
        }
    }
} 
```

该模块旨在在集成管道模式下与 IIS 7.0 或更高版本一起使用（Azure 网站开箱即用）。这是最普遍的配置，所以通常只要你附加它就可以工作。请注意，该模块应该是模块列表中的第一个。

Web.config 注册示例：

```
<configuration>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="CdnHttpCompressionModule" preCondition="managedHandler" type="YourWebsite.Modules.CdnHttpCompressionModule, YourWebsite" />
      <!-- You may have other modules here -->
    </modules>  
  <system.webServer>
</configuration> 
```

# javascript - Google 地图中 SVG 图层的自定义鼠标交互

> ID：13852065
> 
> 赞同：3
> 
> 时间：2012-12-13T02:38:09.343
> 
> 标签：javascript, google-maps, d3.js, google-maps-api-3, dom-events

我正在 Google 地图中构建 D3 图层。我正处于 D3 渲染良好的阶段，但是我想影响这一层的鼠标事件被（我认为）overlayMouseTarget 层捕获。这意味着我无法与我的 D3 层进行任何交互。

我在这里和其他地方搜索过修复，但是在实施了一些建议后，我发现我仍然没有一个可行的解决方案。是否有任何受支持的方法可用于重载鼠标交互或在 Google 地图中删除/隐藏鼠标交互层？或者也许有更优雅的解决方案？

我可以做类似[Google Maps API v3 : Passing values to Listener function() 之类的事情，以便在单击标记时制作一个圆圈？](https://stackoverflow.com/questions/5838868/google-maps-api-v3-passing-values-to-listner-function-so-as-to-make-a-circl)并让我的 D3 代码与任何层完全分离，但我宁愿将它放在一个夹在带有缩放/平移控制器的层下方和鼠标事件层上方的层中。或者弄清楚如何将事件向下发送几层到我的 D3 代码当前所在的位置。

我使用[https://gist.github.com/899711](https://gist.github.com/899711)作为将 D3 添加到 Maps 的起点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-29T08:46:52.997

我遇到了同样的问题，对我有用的解决方法是将整个 svg 层绑定到`this.getPanes().overlayMouseTarget`而不是原来的`this.getPanes().overlayLayer`.

# android - 如何定位android应用程序的视图？

> ID：13852073
> 
> 赞同：0
> 
> 时间：2012-12-13T02:39:31.877
> 
> 标签：android, cordova

嗨，我正在开发一个带有 phonegap 的 android 应用程序，我目前正在尝试调整不同移动/平板电脑设备的视图大小。对于一种分辨率，而不是将视图拉伸到屏幕的每个角落，我希望将视图放在屏幕的中心，以便在视图和屏幕边缘之间有均匀数量的额外黑色空间。我已经阅读了有关 layoutparam 和 linearlayout 的内容，但我不太确定如何处理这些内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:44:13.903

你听说过响应式网页设计吗？你也可以使用像 jQuery mobile 这样的框架

[http://en.wikipedia.org/wiki/Responsive_web_design](http://en.wikipedia.org/wiki/Responsive_web_design)

# jquery - jquery正确的代码格式

> ID：13852076
> 
> 赞同：0
> 
> 时间：2012-12-13T02:40:00.753
> 
> 标签：jquery

我只是对这个正确的代码感到好奇。如果有人能纠正这一点并对此进行一些解释，我很高兴。

```
$('.parentmenu:nth-child(1)').addClass('on', function(){
    $(this+'ul').delay(500).slideDown();
}); 
```

我想使用与**此**引用相同的类元素并添加**UL**元素以触发导航向下滑动。我想知道什么是正确的格式。

或者有没有办法缩短这段代码？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:42:13.397

你可以

```
$('ul',this).delay(500).slideDown(); 
```

或者

```
$(this).find('ul').delay(500).slideDown(); 
```

要么应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T02:43:37.723

我从未听说`.addClass()`有任何 **回调**

这是**错误的语法..**

```
.addClass('on', function(){ 
```

也许你正在寻找这个

```
$('.parentmenu:nth-child(1)').find('ul').delay(500).slideDown(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T02:45:07.213

我从来没有听说过回调`addClass()`。

试试这个：

```
$('.parentmenu').first().addClass('on').find('ul').delay(500).slideDown(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T02:51:51.877

我不认为 addClass 接受回调。一个可读的行将是

```
$('.parentmenu').addClass('on')
                .children('ul').delay(500).slideDown(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T02:54:50.670

是的，它适用于单个但不在 addClass 内。所以我根据你的回答改进了我的代码。

```
$('.parentmenu:nth-child(1)').addClass('on').find('ul').delay('500').slideDown(); 
```

这完全解决了父菜单悬停激活添加类的子菜单向下滑动效果。

谢谢你们的帮助。

# java - 如何在java中对arraylist中的元素进行排序？

> ID：13852077
> 
> 赞同：-4
> 
> 时间：2012-12-13T02:40:06.340
> 
> 标签：java, sorting

> **可能重复：**
> [如何对java对象的arraylist进行排序？](https://stackoverflow.com/questions/10145523/how-to-sort-an-arraylist-of-objects-java)

我有一个包含非常大细节的arraylist，我想按字母顺序对数据进行排序，但是arraylist 类中没有用于排序的方法。请帮忙？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T02:41:19.127

使用[`Collections.sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort(java.util.List))，它可以对任何`List`.

我假设您正在谈论一个字符串列表，在这种情况下，您可以简单地调用`Collections.sort`您的列表以按字母顺序对其进行排序。

如果您指的是使用内部字符串字段创建的类的实例列表，那么您有两个选择：

*   让该类实现[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)接口，然后`Collections.sort`在列表本身之外不带任何参数调用列表。

*   编写一个[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)适用于您的类的自定义，并将它的实例`sort`作为第二个参数与您的列表一起传递给方法。

如果按字母顺序排列类实例的“自然”方式，那么您可能应该实现`Comparable`. 如果没有，你可能应该写一个`Comparator`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T02:45:27.107

arraylist 中没有 sort 方法但是 Collections 中有一个 sort 方法，因为 ArrayList 位于集合树结构下，您可以使用集合中的 sort 方法。这里是代码`Collections.sort(arrayList);`

# ios - 如果使用 [NSOperation start] 手动执行 NSOperation 会在哪个线程上运行？

> ID：13852080
> 
> 赞同：2
> 
> 时间：2012-12-13T02:40:36.930
> 
> 标签：ios, multithreading, grand-central-dispatch

我想在当前执行的线程上同步执行一个 NSOperation。我可以直接调用 [NSOperation start] 吗？这是否总是在当前执行的线程中运行？

另一种方法是只创建一个 NSOperationQueue，添加操作，然后调用 waitUntilAllOperationsFinished 选择器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T03:07:19.237

如果调用`[NSOperation start]`，它将在当前线程上同步执行。围绕操作的所有异步工作都由 处理`NSOperationQueue`，但如果您调用`-start`自己，那么您将绕过所有这些。

当然，`NSOperation`可以实现一个特定的子类来在另一个线程上产生一个异步任务本身；这完全取决于它。但是，设计为在操作队列运行的任何线程中同步执行的操作，如果您调用`-start`.

* * *

例如，以下代码在运行时：

```
NSOperation *op = [NSBlockOperation blockOperationWithBlock:^{
    NSLog(@"operation");
}];
[op start];
NSLog(@"complete"); 
```

印刷：

```
operation
complete 
```

# objective-c - 为什么不能通过 MapView 控制器和 UIImageView 控制器之间的委托传递 NSDictionary 实例？

> ID：13852081
> 
> 赞同：1
> 
> 时间：2012-12-13T02:40:53.773
> 
> 标签：objective-c, delegates, uiimage, mkmapview

我是 iOS 开发的初学者，我的应用程序目前有两个独立的控制器 - mapViewController（左侧）和 photoViewController（右侧），如下所示：

[图片链接](http://ww2.sinaimg.cn/large/a74ecc4cjw1dzrwd4waf5j.jpg)

我在地图上添加了一些注释，每个注释都包含一张照片（在标注的右侧配件上显示为小尺寸）。

我的想法是，如果用户点击左侧的附件，它是一个蓝色的细节按钮，完整尺寸的照片应该出现在右侧。

我尝试用委托来实现它：

在地图视图控制器中：

```
-(void)mapView:(MKMapView *)mapView 
annotationView:(MKAnnotationView *)aView 
calloutAccessoryControlTapped:(UIControl *)control
{
    KCFlickPhotoAnnotation *fpa = (KCFlickPhotoAnnotation *) aView.annotation;
    self.photoDictionary = fpa.photo;
    [self photoDictionaryDelegate];
}

-(void)photoDictionaryDelegate
{
    NSDictionary *photoDictionary = self.photoDictionary;
    [spDelegate setPhotoDictionary:photoDictionary in:self];
    //NSLog(@"button pressed");
} 
```

在 photoViewController.m 中：

```
-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    mapVC.spDelegate = self;
    [mapVC photoDictionaryDelegate];
}

-(void)setPhotoDictionary:(NSDictionary *)photoDictionary 
                       in:(KCMapViewController *)mapViewController
{
    self.photo = photoDictionary;
    NSLog(@"%@",self.photo); // LINE A
} 
```

在 photoViewController.h 中：

```
@interface KCPhotoViewController : UIViewController <setPhotoDelegation>
{
    KCMapViewController *mapVC;
} 
```

LINE A不行，好像是photoDictionary不能到达photoViewController，怎么解决这个问题？

# jquery - 如何制作一个使用最新捐款更新的 div

> ID：13852083
> 
> 赞同：0
> 
> 时间：2012-12-13T02:41:02.763
> 
> 标签：jquery, html, web, donations

我知道 html 和 css，所以我网站的其他元素我通常会研究、混合和混合在一起以获得我想要的结果。

我正在创建一个网站，我想显示前 5 名最近的捐款。

我想说捐赠者的名字，“刚刚捐赠”，他们捐赠的金额，“给”，他们捐赠给的组织。例如：Anthony 刚刚向三月的 Dimes 捐赠了 25.00 美元。（如果我能展示他们多久之前捐赠的，那就太好了。）

我找到了一个做得很好的 Minecraft 网站（http://minetown.net/donate 看页面右侧）。

非常感谢您的帮助！

-安东尼（我的第一篇文章）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:57:46.037

您可以使用 ajax 调用您网站上的 Web 服务，为您提供有关最近捐赠的数据。真正的问题是多久轮询一次这项服务。那是你的电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:39:45.550

您可以简单地计算自捐赠以来经过的时间并将其显示在捐赠旁边（如 2 天前）。

如果您需要在用户实时查看页面时更新列表，那么您需要进行 ajax 调用并获取最新的捐赠列表并尝试将它们插入页面中。

# jmeter - JMeter 加速期

> ID：13852086
> 
> 赞同：0
> 
> 时间：2012-12-13T02:41:18.310
> 
> 标签：jmeter, load-testing

我正在对其中一个过程进行负载测试。
场景是每 20 秒有 10 个用户登录系统，直到我有总用户说 1000。

我如何在 Jmeter 中指定这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T06:47:54.743

将此插件用于步进配置文件：[http ://code.google.com/p/jmeter-plugins/wiki/SteppingThreadGroup](http://code.google.com/p/jmeter-plugins/wiki/SteppingThreadGroup)

# wordpress - Wordpress-如何显示每个帖子的链接类别？

> ID：13852089
> 
> 赞同：1
> 
> 时间：2012-12-13T02:41:22.463
> 
> 标签：wordpress, hyperlink, categories

我目前有几个不同的链接类别，其中包含链接。我的目标是让任何帖子的编辑屏幕显示这些链接类别，以便我可以选择要在该特定帖子上显示的链接类别。

我目前正在使用相关链接插件，但它不包含链接类别。

例如，我想创建一个帖子并从后端选择一个特定的链接类别，这将显示该帖子中的所有链接。

我花了几个小时试图找到一个可以完成此任务的插件，但似乎没有一个能做我想做的事。

理想情况下，我希望有一个弹出窗口来从后端进行选择，而不必使用自定义字段。

我对 PHP 的了解有限，请听从 SO 的专家来帮助实现我的目标。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T18:29:20.503

您必须使用自定义元框在一个漂亮的界面中处理自定义字段。WordPress Answers 中有几个示例，[这是我的一个](https://wordpress.stackexchange.com/questions/87594/checkbox-in-post-add-edit-to-add-remove-the-post-from-menu/#89665)与您需要的非常相似的示例。

要获取链接类别，我们需要[`get_terms('link_category')`](http://codex.wordpress.org/Function_Reference/get_terms)，它返回我们在下拉选择器中使用的数组。此示例在帖子标题之后转储数组：

```
add_action( 'edit_form_after_title', 'dump_link_cats_so_13852089' );

function dump_link_cats_so_13852089()
{
    global $post;
    if( 'post' != $post->post_type )
        return;

    # Use this in your Custom Meta Box  
    $link_cats = get_terms( 'link_category', array( 'hide_empty'=>false ) );
    var_dump( $link_cats );
} 
```

![在此处输入图像描述](../Images/6a0ecb1fc54ec29cadecde8ad909f2e6.png)

# html - 如何自上而下缩小元素？

> ID：13852094
> 
> 赞同：1
> 
> 时间：2012-12-13T02:41:44.193
> 
> 标签：html, css, web, css-animations

我想通过将 div 的大小从 100% 重新调整为零来制作 div 以消失动画。但是，如果我只是在动画上设置字段高度，则元素从底部开始收缩，我希望它从顶部开始收缩。关于如何实现的任何想法？

这段代码展示了我今天的动画：

```
@-webkit-keyframes my-animation /* Safari and Chrome */
{

    0%
    {
        opacity: 1;
        height:44px;//element size
    }

    100%
    {
        opacity: 0;
        height: 0px;
    }

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:59:42.523

你可以通过使用一点定位来做你想做的事。以下是相关代码（也已重构）：

```
<div class="foo"></div> 
```

--

```
.foo {
    position: relative;
}
@keyframes foo {
    100% {
        opacity: 0;
        height: 0;
        top: 44px; /* Height of element */
    }
}​ 
```

这是一个现场示例（悬停触发动画）：http: [//jsfiddle.net/joshnh/Fdg3C/](http://jsfiddle.net/joshnh/Fdg3C/)

# ruby - 创建木偶包提供者 - “没有为提供者定义命令服务”

> ID：13852109
> 
> 赞同：2
> 
> 时间：2012-12-13T02:43:03.330
> 
> 标签：ruby, puppet, supervisord

我正在尝试为[supervisord](http://www.supervisord.org)创建一个服务提供者。我既不是 Ruby 程序员，也不是我以前创建过其中的一个，而且文档要么很糟糕，要么很难找到，要么与我正在尝试创建的那种 Provider 无关。

此提供程序的来源在这里：

[/lib/puppet/provider/service/supervisor/supervisor.rb](https://gist.github.com/4273546)

当我运行 puppet 代理时，我在 logstash 服务上收到此错误，我将其命名为“supervisor”作为提供者：

```
err: /Service[logstash]/ensure: change from false to running failed: No command service defined for provider 
```

那么，我做错了什么？此外，如果您在该提供商中发现任何其他时髦的东西，请告诉我！

此外，如果您知道任何文档/博客文章/任何实际描述界面以及如何正确创建其中之一的内容，请分享。我根本找不到任何与创建提供者相关的东西，更不用说服务提供者了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T08:34:40.253

问题是对 的引用`command(:service)`，例如

```
def startcmd
  [command(:service), "start", @resource[:name]]
end 
```

这会在提供程序中查找名为“服务”的预定义命令，因此会出现错误。你有两个定义的命令：

```
commands :supervisord => "/usr/bin/supervisord",
         :supervisorctl => "/usr/bin/supervisorctl" 
```

因此，您在 restartcmd、startcmd 和 stopcmd 中的引用应该更改为`command(:supervisorctl)`- 假设这是让您启动/停止的命令。

顶部的`commands`行将导致 Puppet 仅在主机上都可用时才使用提供程序。然后`command(:name)`调用将获取它们的完整路径，并且您将返回完整的命令和参数，以便`base`服务提供者在启动/停止/重新启动服务时运行。

文档没有详细介绍`commands`您在这里遇到的帮助方法。我建议阅读[自定义类型](http://docs.puppetlabs.com/guides/custom_types.html)和[提供程序](http://docs.puppetlabs.com/guides/provider_development.html)页面，以及 Richard Crowley 的[Extending Puppet slides](http://rcrowley.org/talks/sv-puppet-2011-01-11/)。两位 Puppet Labs 员工还将在 2012 年底出版一本书：[Puppet Types 和 Providers](https://rads.stackoverflow.com/amzn/click/com/1449339328)。

您还遇到的是您的提供者正在扩展`base`服务提供者 - 这是正确的做法，但它希望衍生品以特定方式工作（例如 *cmd 方法）。新的类型和提供者可以更简单。

# delphi - 有没有办法从 Delphi IDE 编译 C 代码作为 Delphi 项目的一部分？

> ID：13852117
> 
> 赞同：4
> 
> 时间：2012-12-13T02:43:59.353
> 
> 标签：delphi

有没有办法从 Delphi IDE 编译 C 代码？

我想使用一些 C 代码作为 Delphi 项目的一部分（并且不希望将它放在 DLL 中）。那么，在 Delphi IDE 中，我可以编译 C 代码吗？也许我可以使用关键字来指示代码插入的开头（就像`ASM`那样）？或者将 C 代码放在一个单独的单元中 - 但我将如何从我的 Delphi 代码中调用它？

如果可以做到，我该怎么做？谢谢 ...

* * *

[更新] 虽然听起来可以使用[免费的 Bolrand 命令行 C++ 编译器](http://edn.embarcadero.com/article/20633)来完成，但我最终决定将 C 代码放入 DLL 并静态链接。我想这两种解决方案都是可以接受的）？）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T03:43:25.573

不，不可能将 c 代码编译为 Delphi 项目的一部分。

您可以使用 C++ Builder 编译 c 代码，并`*.obj`在 Delphi 应用程序中使用对象 ( ) 文件，方法是链接它们，`{$L file.obj}`然后像​​调用任何其他 Delphi 函数一样调用它们，但您必须自己提供 c 运行时库函数的实现. （单元中有一些可用的`crtl.pas`（`System.Win.crtl.pas`在 XE2/XE3 中）；任何不存在的都需要自己编写 Delphi 替换）。

有关如何执行此操作的示例，您可以通过查看`Zlib.pas`（`System.ZLib.pas`在 XE2/3 中）来了解如何使用 ZLib。

正如其他人在对您的问题的评论中提到的那样，您*可以*在构建项目之前设置一个预构建事件来运行您的 c 编译器，这将起作用；从技术上讲，我不确定这是否算作“作为项目的一部分进行编译”，因为它实际上是在运行外部进程。不过，上述信息在这种情况下仍然适用。

# sqlite - tdeSDK - db.execute 不会在 Windows 7 上返回任何数据

> ID：13852119
> 
> 赞同：1
> 
> 时间：2012-12-13T02:44:02.450
> 
> 标签：sqlite, tidesdk

我正在使用tidesdk 1.3.1-beta 和tideSDK Developer 1.4.2。我正在使用预加载的 sqlite3 数据库在我的应用程序中显示数据。我的问题是 db.execute(select * ... 语句不返回任何数据但是我可以看到该表包含数据。但是 db.execute 在创建任何表或向表中插入记录时是成功的。网络检查器只是显示“未找到”错误。

我也无法通过设置 Ti.API.setLogLevel(7); 来增加日志级别；

这是代码片段。

```
var db = Ti.Database.openFile(Ti.Filesystem.getFile(Ti.Filesystem.getApplicationDataDirectory(), 'new.db'));  
db.execute("CREATE TABLE IF NOT EXISTS BOOKS (TITLE  VARCHAR, AUTHORS VARCHAR");
var rows = db.execute("SELECT * FROM BOOKS");
while (rows.isValidRow()) { 
    document.getElementById("area").innerHTML += "<br>" + rows.fieldByName('TITLE');
    rows.next();    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:16:54.183

您能否在此处向 TideSDK 提出问题：[https ://github.com/TideSDK/TideSDK/issues](https://github.com/TideSDK/TideSDK/issues)

这看起来像一个错误。我们将结帐相同。

感谢您报告相同的内容。

# mysql - 在mysql上连接两个表

> ID：13852125
> 
> 赞同：0
> 
> 时间：2012-12-13T02:44:32.497
> 
> 标签：mysql, wordpress

所以目前我在两个 mysql tabales 之间有关系： **wp_bp_activity**与“id”和“content”和 **wp_bp_activity_meta**与“activity_id”这将匹配 wp_bp_activity id 和“meta_value”我试图根据 wp_bp_activity_meta -> meta_value 的文本输出wp_bp_activity -> content where wp_bp_activity -> id = wp_bp_activity_meta -> activity_id 甚至不确定这样的事情是否可行。我被困住了！这是我到目前为止的代码：

$query = "SELECT * FROM wp_bp_activity_meta WHERE meta_value LIKE 'test'";

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T02:47:45.000

```
SELECT  a.*, b.*
FROM    wp_bp_activity a
        INNER JOIN wp_bp_activity_meta b
            ON CONCAT(a.id, a.meta_value) = b.activity_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:48:31.867

```
$query = "SELECT *
FROM wp_bp_activity_meta
INNER JOIN wp_bp_activity
ON wp_bp_activity.if = wp_bp_activity_meta.activity_id
WHERE meta_value LIKE 'test' "; 
```

# android - 为什么 MediaPlayer 强制关闭我的应用程序？

> ID：13852127
> 
> 赞同：1
> 
> 时间：2012-12-13T02:44:56.357
> 
> 标签：android, android-mediaplayer

我正在尝试制作一个倒数计时器，当它达到 0 时会播放声音，但每当它尝试播放声音时，它就会强制关闭。我很确定我的代码是正确的，但我不知道它为什么会关闭。请帮忙，为什么这股力量会关闭？

```
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.view.View;
import android.widget.Button;
import android.widget.Chronometer;
import android.widget.Chronometer.OnChronometerTickListener;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

Button start, stop;
int minCount, secCount;
Chronometer count;
boolean viberate, running;
SharedPreferences getPrefs;
MediaPlayer alarm;

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initilize();
    count.start();

    count.setOnChronometerTickListener(new OnChronometerTickListener() {

        @Override
        public void onChronometerTick(Chronometer chronometer) {
            if (running) {
                secCount--;
                updateDisplay();
            }

        }

    });
    start.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            running = true;
            alarm.release();

            if (minCount <= 0 && secCount <= 0) {
                nothing();
            }
        }
    });
    stop.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            running = false;
        }
    });

protected void done() {
    // TODO

    boolean music = getPrefs.getBoolean("Sound", true);
    if (music && alarm != null) {
        alarm.start(); //line 179 this is the line that causes the force close

    }
    running = false;
    Toast.makeText(this, "Times Up!!!", Toast.LENGTH_LONG).show();
}

private void initilize() {

    start = (Button) findViewById(R.id.start);
    stop = (Button) findViewById(R.id.stop);
    second = (TextView) findViewById(R.id.second);
    minute = (TextView) findViewById(R.id.minute);
    minCount = 1;
    secCount = 0;
    count = (Chronometer) findViewById(R.id.chronometer1);                           running = false;
    getPrefs = PreferenceManager
            .getDefaultSharedPreferences(getBaseContext());
    alarm = MediaPlayer.create(MainActivity.this, R.raw.finished);
}

private void updateDisplay() {
    if (minCount <= 0 && secCount <= 0) {
        done();

    }
    if (secCount < 0) {
        minCount--;
        secCount = 59;
    }

    if (secCount < 0) {
        secCount = 59;
        second.setText("59");

    } else if (secCount <= 9) {
        second.setText("0" + secCount + "");
    } else {
        second.setText(secCount + "");
    }

    if (minCount < 0) {
        minCount = 59;
        minute.setText("59 :");

    } else if (minCount <= 9) {
        minute.setText("0" + minCount + " :");
    } else {
        minute.setText(minCount + " :");
    }

}

@Override
protected void onStop() {
    super.onStop();
    alarm.release();
}

} 
```

我的日志猫

```
12-12 19:55:50.423: E/AndroidRuntime(25573): FATAL EXCEPTION: main
12-12 19:55:50.423: E/AndroidRuntime(25573): java.lang.IllegalStateException
12-12 19:55:50.423: E/AndroidRuntime(25573):    at android.media.MediaPlayer._start(Native Method)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at android.media.MediaPlayer.start(MediaPlayer.java:1025)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at com.example.timer.MainActivity.done(MainActivity.java:179)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at com.example.timer.MainActivity.updateDisplay(MainActivity.java:209)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at com.example.timer.MainActivity.access$0(MainActivity.java:207)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at com.example.timer.MainActivity$1.onChronometerTick(MainActivity.java:47)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at android.widget.Chronometer.dispatchChronometerTick(Chronometer.java:279)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at android.widget.Chronometer$1.handleMessage(Chronometer.java:271)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at android.os.Looper.loop(Looper.java:137)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at android.app.ActivityThread.main(ActivityThread.java:4978)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at java.lang.reflect.Method.invokeNative(Native Method)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at java.lang.reflect.Method.invoke(Method.java:511)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
12-12 19:55:50.423: E/AndroidRuntime(25573):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:06:37.053

你有一个非法状态异常，但你的代码看起来不错。

```
alarm = MediaPlayer.create(MainActivity.this, R.raw.finished); 
```

确保您完成的流不是非法格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:59:33.460

尝试使用

```
try {
            alarm.prepare();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
```

当您将数据源设置为媒体播放器时

# python - Python分数计数器

> ID：13852131
> 
> 赞同：-1
> 
> 时间：2012-12-13T02:45:13.853
> 
> 标签：python, counter, scoring

我几乎完成了我为帮助我学习日语课而制作的这个程序。我需要做的就是弄清楚如何跟踪我做对或做错的次数，然后打印结果。我的程序有点大，但这就是我所拥有的：（还没有按照我想要的方式工作）

```
RIGHT = 0
WRONG = 0

import random

def main():    
    study_more = 'y'

    while study_more == 'y':
        start()

        score()

        study_more = input('Do you want to study more? (y for yes): ')

def start():
    answer2 = int(input('Enter the chapter you would like to study (1-6): '))
    answer3 = int(input('Japanese to English? (1) or English to Japanese (2): '))
    print()

    if answer2 == 1 and answer3 == 1:
        ch1_japanese_to_english()
    elif answer2 == 1 and answer3 == 2:
        ch1_english_to_japanese()
    elif answer2 == 2 and answer3 == 1:
        ch2_japanese_to_english()
    elif answer2 == 2 and answer3 == 2:
        ch2_english_to_japanese()
    elif answer2 == 3 and answer3 == 1:
        ch3_japanese_to_english()
    elif answer2 == 3 and answer3 == 2:
        ch3_english_to_japanese()
    elif answer2 == 4 and answer3 == 1:
        ch4_japanese_to_english()
    elif answer2 == 4 and answer3 == 2:
        ch4_english_to_japanese()
    elif answer2 == 5 and answer3 == 1:
        ch5_japanese_to_english()
    elif answer2 == 5 and answer3 == 2:
        ch5_english_to_japanese()
    elif answer2 == 6 and answer3 == 1:
        ch6_japanese_to_english()
    elif answer2 == 6 and answer3 == 2:
        ch6_english_to_japanese()
    else:
        print("You've entered invalid responses.")

def score():

    ch1_japanese_to_english()
    ch1_english_to_japanese()    
    ch2_japanese_to_english()
    ch2_english_to_japanese()
    ch3_japanese_to_english()
    ch3_english_to_japanese()
    ch4_japanese_to_english()
    ch4_english_to_japanese()
    ch5_japanese_to_english()
    ch5_english_to_japanese()
    ch6_japanese_to_english()
    ch6_english_to_japanese()

    print('The number you got right: ', RIGHT)
    print('The number you go wrong: ', WRONG)

def ch1_japanese_to_english():
    dictionary = {'ano' : 'um', 'ima': 'now', 'eego' : 'english', 'hai' : 'yes', 'gakusei' : 'student', '...go' : 'language', 'kookoo' : 'high school', 'gogo' : 'pm', 'gozen' : 'am', '...sai' : 'years old', '...san' : 'mr/ms', '...ji' : "o'clock", '...jin' : 'people', 'senkoo' : 'major', 'sensei' : 'teacher', 'soo desu' : "that's right", 'daigaku' : 'college', 'denwa' : 'telephone', 'tomodachi' : 'friend', 'namae' : 'name', 'nani' : 'what', 'nihon' : 'japan', '...nensei' : 'year student', 'han' : 'half', 'bangoo' : 'number', 'ryuugakusei' : 'international student', 'watashi' : 'I', 'amerika' : 'america', 'igirisu' : 'britain', 'oosutoraria' : 'australia', 'kankoku' : 'korea', 'suweeden' : 'sweeden', 'chuugoku' : 'china', 'kagaku': 'science', 'ajia kenkyuu' : 'asian studies', 'keizai' : 'economics', 'kokusaikankei' : 'international relations', 'konpyuutaa' : 'computer', 'jinruigaku' : 'anthropology', 'seeji' : 'politics', 'bijinesu' : 'business', 'bungaku' : 'literature', 'rekishi' : 'history', 'shigoto' : 'occupation', 'isha' : 'doctor', 'kaishain' : 'office worker', 'kookoosei' : 'high school student', 'shufu' : 'house wife', 'daigakuinsei' : 'graduate student', 'bengoshi' : 'lawyer', 'okaasan' : 'mother', 'otoosan' : 'father', 'oneesan' : 'older sister', 'oniisan' : 'older brother', 'imooto' : 'younger sister', 'otooto': 'younger brother'}
    words = list(dictionary.items())
    random.shuffle(words)

    for word, translation in words:
        print()
        print(word)
        answer = input('Enter the translation: ')

        if answer == translation:
            print('Correct!')
            RIGHT += 1
        else:
            print('Incorrect.')
            print('The correct answer is: %s.' % translation)
            WRONG += 1

        print()
        return RIGHT
        return WRONG

def ch1_english_to_japanese():
    dictionary = {'um' : 'ano', 'now' : 'ima', 'english' : 'eego', 'yes' : 'hai', 'student' : 'gakusei', 'language' : 'go', 'high school' : 'kookoo', 'pm': 'gogo', 'am' : 'gozen', 'years old': 'sai', 'mr/ms' : 'san', "o'clock" : 'ji', 'people' : 'go', 'major' : 'senkoo', 'teacher' : 'sensei', "that's right" : 'soo desu', 'college' : 'daigaku', 'telephone' : 'denwa', 'friend' : 'tomodachi', 'name' : 'namae', 'what' : 'nani', 'japan' : 'nihon', 'year student' : 'nensei', 'half' : 'han', 'number' : 'bangoo', 'international student' : 'ryuugakusei', 'I' : 'watashi', 'america' : 'amerika', 'britain' : 'igirisu' , 'australia' : 'oosutoraria', 'korea' : 'kankoku', 'sweeden' : 'suweeden', 'china' : 'chuugoku', 'science' : 'kagaku', 'asian studies' : 'ajia kenkyuu', 'economics' : 'keizai', 'international relations' : 'kokusaikankei', 'computer' : 'konpyuutaa', 'anthropology' : 'jinruigaku', 'politics' : 'seeji', 'business' : 'bijinesu', 'literature' : 'bungaku', 'history' : 'rekishi', 'occupation' : 'shigoto', 'doctor' : 'isha', 'office worker' : 'kaishain', 'high school student' : 'kookoosei', 'house wife' : 'shufu', 'graduate student' : 'daigakuinsei', 'lawyer' : 'bengoshi', 'mother' : 'okaasan', 'father' : 'otoosan', 'older sister' : 'oneesan', 'older brother' : 'oniisan', 'younger sister' : 'imooto', 'younger brother' : 'otooto'}
    words = list(dictionary.items())
    random.shuffle(words)   

    for word, translation in words:
        print()
        print(word)
        answer = input('Enter the translation: ')

        if answer == translation:
            print('Correct!')
            RIGHT += 1
        else:
            print('Incorrect.')
            print('The correct answer is: %s.' % translation)
            WRONG += 1

        print()
        return RIGHT
        return WRONG        

def ch2_japanese_to_english():
    dictionary = {'kore' : 'this one', 'sore' : 'that one', 'are' : 'that one over there', 'dore' : 'which one', 'kono' : 'this', 'sono' : 'that', 'ano' : 'that over there', 'dono' : 'which', 'koko' : 'here', 'soko' : 'there', 'asoko' : 'over there', 'doko' : 'where', 'dare' : 'who', 'oishii' : 'delicious', 'sakana' : 'fish', 'tonkatsu' : 'pork cutlet', 'niku' : 'meat', 'menyuu' : 'menu', 'yasai' : 'vegetable', 'enpitsu' : 'pencil', 'kasa' : 'umbrella', 'kaban' : 'bag', 'kutsu' : 'shoes', 'saifu' : 'wallet', 'jiinzu' : 'jeans', 'jisho' : 'dictionary', 'jitensha' : 'bicycle', 'shinbun' : 'newspaper', 'tiishatsu' : 't-shirt', 'tokei' : 'clock', 'nooto' : 'notebook', 'pen' : 'pen', 'booshi' : 'hat', 'hon' : 'book', 'kissaten' : 'cafe', 'ginkoo' : 'bank', 'toire' : 'restroom', 'toshokan' : 'library', 'yuubinkyoku' : 'post office', 'ikura' : 'how much', 'en' : 'yen', 'takai' : 'expensive', 'irasshaimase' : 'welcome', 'onegaishimasu': 'please', 'kudasai' : 'please give me', 'jaa' : 'then', 'doozo' : 'here it is', 'doomo' : 'thank you'}
    words = list(dictionary.items())
    random.shuffle(words)   

    for word, translation in words:
        print()
        print(word)
        answer = input('Enter the translation: ')

        if answer == translation:
            print('Correct!')
            RIGHT += 1
        else:
            print('Incorrect.')
            print('The correct answer is: %s.' % translation)
            WRONG += 1

        print()
        return RIGHT
        return WRONG        

def ch2_english_to_japanese():
    dictionary = {'this one' : 'kore', 'that one' : 'sore', 'that one over there' : 'are', 'which one' : 'dore', 'this' : 'kono', 'that' : 'sono', 'that over there' : 'ano', 'which' : 'dono', 'here' : 'koko', 'there' : 'soko', 'over there' : 'asoko', 'where' : 'doko', 'who' : 'dare', 'delicious' : 'oishii', 'fish' : 'sakana', 'pork cutlet' : 'tonkatsu', 'meat' : 'niku', 'menu' : 'menyuu', 'vegetable' : 'yasai', 'pencil' : 'enpitsu', 'umbrella' : 'kasa', 'bag' : 'kaban', 'shoes' : 'kutsu', 'wallet' : 'saifu', 'jeans' : 'jiinzu', 'dictionary' : 'jisho', 'bicycle' : 'jitensha', 'newspaper' : 'shinbun', 't-shirt' : 'tiishatsu', 'clock' : 'tokei', 'notebook' : 'nooto', 'pen' : 'pen', 'hat' : 'booshi', 'book' : 'hon', 'cafe' : 'kissaten', 'bank' : 'ginkoo', 'restroom' : 'toire', 'library' : 'toshokan', 'post office' : 'yuubinkyoku', 'how much' : 'ikura', 'yen' : 'en', 'expensive' : 'takai', 'welcome' : 'irasshaimase', 'please' : 'onegaishimasu', 'please give me' : 'kudasai', 'then' : 'jaa', 'here it is' : 'doozo', 'thank you' : 'doomo'}
    words = list(dictionary.items())
    random.shuffle(words)  

    for word, translation in words:
        print()
        print(word)
        answer = input('Enter the translation: ')

        if answer == translation:
            print('Correct!')
            RIGHT += 1
        else:
            print('Incorrect.')
            print('The correct answer is: %s.' % translation)
            WRONG += 1

        print()
        return RIGHT
        return WRONG        

def ch3_japanese_to_english():
    dictionary = {'eiga' : 'movie','ongaku' : 'music','zasshi' : 'magazine','supootsu' : 'sports','deeto' : 'date','tenisu' : 'tenis','terebi' : 'tv','aisukuriimu' : 'ice cream','asagohan' : 'breakfast','osake' : 'alchohol','ocha' : 'green tea','koohii' : 'coffee','bangohan' : 'dinner','hanbaagaa' : 'hamburger','hirugohan' : 'lunch','mizu' : 'water','ie' : 'home','uchi' : 'my place','gakkoo' : 'school','asa' : 'morning','ashite' : 'tommorow','itsu' : 'when','kyoo' : 'today','goro' : 'at about','konban' : 'tonight','shuumatsu' : 'weekend','doyoobi' : 'saturday','nichiyoobi' : 'sunday','mainichi' : 'everyday','maiban' : 'every night','iku' : 'to go','kaeru' : 'to return','kiku' : 'to listen','nomu' : 'to drink','hanasu' : 'to speak','yomu' : 'to read','okiru' : 'to get up','taberu' : 'to eat','neru' : 'to sleep','miru' : 'to see','kuru' : 'to come','suru' : 'to do','benkyoosuru' : 'to study','ii' : 'good','hayai' : 'early','amari' : 'not much','zenzen' : 'not at all','taitei' : 'usually','chotto' : 'a little','tokidoki' : 'sometimes','yoku' : 'often','soo desu ne' : "that's right",'demo' : 'but','doo desu ka' : 'how about'}
    words = list(dictionary.items())
    random.shuffle(words)   

    for word, translation in words:
        print()
        print(word)
        answer = input('Enter the translation: ')

        if answer == translation:
            print('Correct!')
            RIGHT += 1
        else:
            print('Incorrect.')
            print('The correct answer is: %s.' % translation)
            WRONG += 1

        print()
        return RIGHT
        return WRONG        

def ch3_english_to_japanese():
    dictionary = {'movie' : 'eiga','music' : 'ongaku','magazine' : 'zasshi','sports' : 'supootsu','date' : 'deeto','tenis' : 'tenisu','tv' : 'terebi','ice cream' : 'aisukuriimu','breakfast' : 'asagohan','alchohol' : 'osake','green tea' : 'ocha','coffee' : 'koohii','dinner' : 'bangohan','hamburger' : 'hanbaagaa','lunch' : 'hirugohan','water' : 'mizu','home' : 'ie','my place' : 'uchi','school' : 'gakkoo','morning' : 'asa','tommorow' : 'ashite','when' : 'itsu','today' : 'kyoo','at about' : 'goro','tonight' : 'konban','weekend' : 'shuumatsu','saturday' : 'doyoobi','sunday' : 'nichiyoobi','everyday' : 'mainichi','every night' : 'maiban','to go' : 'iku','to return' : 'kaeru','to listen' : 'kiku','to drink' : 'nomu','to speak' : 'hanasu','to read' : 'yomu','to get up' : 'okiru','to eat' : 'taberu','to sleep' : 'neru','to see' : 'miru','to come' : 'kuru','to do' : 'suru','to study' : 'benkyoosuru','good' : 'ii','early' : 'hayai','not much' : 'amari','not at all' : 'zenzen','usually' : 'taitei','a little' : 'chotto','sometimes' : 'tokidoki','often' : 'yoku',"that's right" : 'soo desu ne','demo' : 'but','doo desu ka' : 'how about'}
    words = list(dictionary.items())
    random.shuffle(words)  

    for word, translation in words:
        print()
        print(word)
        answer = input('Enter the translation: ')

        if answer == translation:
            print('Correct!')
            RIGHT += 1
        else:
            print('Incorrect.')
            print('The correct answer is: %s.' % translation)
            WRONG += 1

        print() 
        return RIGHT
        return WRONG        

def ch4_japanese_to_english():
    dictionary = {'arubaito' : 'part time job','kaimono' : 'shopping','kurasu' : 'class','anata' : 'you','isu' : 'chair','inu' : 'dog','amiyage' : 'souvenir','kodomo' : 'child','gohan' : 'meal','shashin' : 'picture','tsukue' : 'desk','tegami' : 'letter','neko' : 'cat','paso' : 'bread','hito' : 'person','meeru' : 'e-mail','otera' : 'temple','kooen' : 'park','suupaa' : 'supermarket','depaato' : 'department store','basutei' : 'bus stop','byooin' : 'hospital','hoteru' : 'hotel','honya' : 'bookstore','machi' : 'city','resutoran' : 'restaurant','kinoo' : 'yesterday','jikan' : 'hours','ichijikan' : 'one hour','senshuu' : 'last week','toki' : 'when','getsuyoobi' : 'monday','kayoobi' : 'tuesday','suiyoobi' : 'wednesday','mokuyoobi' : 'thursday','kinyoobi' : 'friday','au' : 'to meet','aru' : 'there is','kau' : 'to buy','kaku' : 'to write','toru' : 'to take','matsu' : 'to wait','wakaru' : 'to understand','iru' : 'is in','gurai' : 'about','gomennasai' : "I'm sorry",'dakara' : 'so','takusan' : 'many','to' : 'together with','dooshite' : 'why','hitoride' : 'alone','migi' : 'right','hidari' : 'left','mae' : 'front', 'ushiro' : 'back', 'naka' : 'inside', 'ue' : 'on', 'shita' : 'under', 'chikaku' : 'near', 'tonari' : 'next', 'aida' : 'between'}
    words = list(dictionary.items())
    random.shuffle(words)  

    for word, translation in words:
        print()
        print(word)
        answer = input('Enter the translation: ')

        if answer == translation:
            print('Correct!')
            RIGHT += 1
        else:
            print('Incorrect.')
            print('The correct answer is: %s.' % translation)
            WRONG += 1

        print()  
        return RIGHT
        return WRONG        

def ch4_english_to_japanese():
    dictionary = {'part time job' : 'arubaito','shopping' : 'kaimono','class' : 'kurasu','you' : 'anata','chair' : 'isu','dog' : 'inu','souvenir' : 'omiyage','child' : 'kodomo','meal' : 'gohan','picture' : 'shashin','desk' : 'tsukue','letter' : 'tegami','cat' : 'neko','bread' : 'paso','person' : 'hito','e-mail' : 'meeru','temple' : 'otera','park' : 'kooen','supermarket' : 'suupaa','department store' : 'depaato','bus stop' : 'basutei','hospital' : 'byooin','hotel' : 'hoteru','bookstore' : 'honya','city' : 'machi','restaurant' : 'resutoran','yesterday' : 'kinoo','hours' : 'jikan','one hour' : 'ichijikan','last week' : 'senshuu','when' : 'toki','monday' : 'getsuyoobi','tuesday' : 'kayoobi','wednesday' : 'suiyoobi','thursday' : 'mokuyoobi','friday' : 'kinyoobi','to meet' : 'au','there is' : 'aru','to buy' : 'kau','to write' : 'kaku','to take' : 'toru','to wait' : 'matsu','to understand' : 'wakaru','is in' : 'iru','about' : 'gurai',"I'm sorry" : 'gomennasai','so' : 'dakara','many' : 'takusan','together with' : 'to','why' : 'dooshite','alone' : 'hitoride','right' : 'migi','left' : 'hidari','front' : 'mae', 'back' : 'ushiro', 'inside' : 'naka', 'on' : 'ue', 'under' : 'shita', 'near' : 'chikaku', 'next' : 'tonari', 'between' : 'aida'}
    words = list(dictionary.items())
    random.shuffle(words)  

    for word, translation in words:
        print()
        print(word)
        answer = input('Enter the translation: ')

        if answer == translation:
            print('Correct!')
            RIGHT += 1
        else:
            print('Incorrect.')
            print('The correct answer is: %s.' % translation)
            WRONG += 1

        print()
        return RIGHT
        return WRONG        

def ch5_japanese_to_english():
    dictionary = {'umi' : 'sea','kitte' : 'postal stamps','kippu' : 'ticket','saafuin' : 'surfing','shukudai' : 'homework','tabemono' : 'food','tanjoobi' : 'birthday','tesuto' : 'test','tenki' : 'weather','nomimono' : 'drink','hagaki' : 'post card','basu' : 'bus','hikooki' : 'airplane','heya' : 'room','boku' : 'I','yasumi' : 'holiday','ruogoo' : 'travel','atarashii' : 'new','atsui' : 'hot','isogashii' : 'busy','ookii' : 'large','omoshiroi' : 'interesting','kakkoii' : 'good looking','kowai' : 'frightening','samui' : 'cold','tanoshii' : 'fun','chiisai' : 'small','tsumaranai' : 'boring','furui' : 'old','muzukashii' : 'difficult','yasashii' : 'easy','yasui' : 'cheap','kirai' : 'to dislike','kirei' : 'beautiful','genki' : 'healthy','shizuka' : 'quiet','suki' : 'to like','daikirai' : 'to hate','daisuki' : 'to love','nigiyaka' : 'lively','hima' : 'not busy','oyogu' : 'to swim','kiku' : 'to ask','noru' : 'to ride','yaru' : 'to do','dekakeru' : 'to go out','isshoni' : 'together','sugoku' : 'extreamly','sorekara' : 'and then','daijoobu' : "it's okay",'totemo' : 'very','donna' : 'what kind of'}
    words = list(dictionary.items())
    random.shuffle(words)  

    for word, translation in words:
        print()
        print(word)
        answer = input('Enter the translation: ')

        if answer == translation:
            print('Correct!')
            RIGHT += 1
        else:
            print('Incorrect.')
            print('The correct answer is: %s.' % translation)
            WRONG += 1

        print()  
        return RIGHT
        return WRONG        

def ch5_english_to_japanese():
    dictionary = {'sea' : 'umi','postal stamps' : 'kitte','ticket' : 'kippu','surfing' : 'saafuin','homework' : 'shukudai','food' : 'tabemono','birthday' : 'tanjoobi','test' : 'tesuto','weather' : 'tenki','drink' : 'nomimono','post card' : 'hagaki','bus' : 'basu','airplane' : 'hikooki','room' : 'heya','I' : 'boku','holiday' : 'yasumi','travel' : 'ryogoo','new' : 'atarashii','hot' : 'atsui','busy' : 'isogashii','large' : 'ookii','interesting' : 'omoshiroi','good looking' : 'kakkoii','frightening' : 'kowai','cold' : 'samui','fun' : 'tanoshii','small' : 'chiisai','boring' : 'tsumaranai','old' : 'furui','difficult' : 'muzukashii','easy' : 'yasashii','chaep' : 'yasui','to dislike' : 'kirai','beautiful' : 'kirei','healthy' : 'genki','quiet' : 'shizuka','to like' : 'suki','to hate' : 'dakirai','to love' : 'daisuki','lively' : 'nigiyaka','not busy' : 'hima','to swim' : 'oyogu','to ask' : 'kiku','to ride' : 'noru','to do' : 'yaru','to go out' : 'dekakeru','together' : 'isshoni','extreamly' : 'sugoku','and then' : 'sorekara',"it's okay" : 'daijoobu','very' : 'totemo','what kind of' : 'donna'}
    words = list(dictionary.items())
    random.shuffle(words)   

    for word, translation in words:
        print()
        print(word)
        answer = input('Enter the translation: ')

        if answer == translation:
            print('Correct!')
            RIGHT += 1
        else:
            print('Incorrect.')
            print('The correct answer is: %s.' % translation)
            WRONG += 1

        print() 
        return RIGHT
        return WRONG        

def ch6_japanese_to_english():
    dictionary = {'okane' : 'money','ofuro' : 'bath','kanji' : 'kanji','kyookasho' : 'textbook','konshuu' : 'this weeek','shiidii' : 'cd','shiminbyooin' : 'municipal hospital','shiyawaa' : 'shower','tsugi' : 'next','denki' : 'electricity','densha' : 'train','nimotsu' : 'baggage','pasokon' : 'personal computer','peeji' : 'page','mado' : 'window','yoru' : 'night','raishuu' : 'next week','rainen' : 'next year','taihen' : 'tough','asobu' : 'to play','isogu' : 'to hurry','ofuronihairu' : 'to take a bath','kaesu' : 'to return','kesu' : 'to turn off','shinu' : 'to die','suwaru' : 'to sit down','tatsu' : 'to stand up','tabaiwosuu' : 'to smoke','tsukau' : 'to use','tetsudau' : 'to help','hairu' : 'to enter','motsu' : 'to carry','yasumu' : 'to be absent','akeru' : 'to open','oshieru' : 'to teach','oriru' : 'to get off','kariru' : 'to borrow','shinuru' : 'to close','shiyawaawoabiru' : 'to take a shower','to turn on' : 'tsukeru','to make a phone call' : 'denwawokakeru','wasureru' : 'to forget','tsuretekuru' : 'to bring a person','mottekuru' : 'to bringa  thing','atode' : 'later on','osoku' : 'do something late','kara' : 'because','kekkoo desu' : 'that would be fine','sugu' : 'right away','honto desu ka' : 'really?','yukkuri' : 'slowly'}
    words = list(dictionary.items())
    random.shuffle(words)   

    for word, translation in words:
        print()
        print(word)
        answer = input('Enter the translation: ')

        if answer == translation:
            print('Correct!')
            RIGHT += 1
        else:
            print('Incorrect.')
            print('The correct answer is: %s.' % translation)
            WRONG += 1

        print() 
        return RIGHT
        return WRONG        

def ch6_english_to_japanese():
    dictionary = {'money' : 'okane','bath' : 'ofuro','kanji' : 'kanji','textbook' : 'kyookasho','this week' : 'konshuu','cd' : 'shiidii','municipal hospital' : 'shiminbyooin','shower' : 'shiyawaa','next' : 'tsugi','electricity' : 'denki','train' : 'densha','baggage' : 'nimotsu','personal computer' : 'pasokon','page' : 'peeji','window' : 'mado','night' : 'yoru','next week' : 'raishuu','next year' : 'rainen','tough' : 'taihen','to play' : 'asobu','to hurry' : 'isogu','to take a bath' : 'ofuronihairu','to return' : 'kaesu','to turn off' : 'kesu','to die' : 'shinu','to sit down' : 'suwaru','to stand up' : 'tatsu','to smoke' : 'tabaiwosuu','to use' : 'tsukau','to help' : 'tetsudau','to enter' : 'hairu','to carry' : 'motsu','to be absent' : 'yasumu','to open' : 'akeru','to teach' : 'oshieru','to get off' : 'oriru','to borrow' : 'kariru','to close' : 'shinuru','to take a shower' : 'shiyawaawoabiru','to turn on' : 'tsukeru','to make a phone call' : 'denwawokakeru','to forget' : 'wasureru','to bring a person' : 'tsuretekuru','to bring a thing' : 'mottekuru','later on' : 'atode','do something late' : 'osoku','because' : 'kara','that would be fine' : 'kekkoo desu','right away' : 'sugu','really?' : 'hontoo desu ka','slowly' : 'yukkuri'}
    words = list(dictionary.items())
    random.shuffle(words)   

    for word, translation in words:
        print()
        print(word)
        answer = input('Enter the translation: ')

        if answer == translation:
            print('Correct!')
            RIGHT += 1
        else:
            print('Incorrect.')
            print('The correct answer is: %s.' % translation)
            WRONG += 1

        print()
        return RIGHT
        return WRONG        

main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T03:27:40.110

I know this isn't really what you asked, so apologies if this is an actual assignment, in which case this likely won't be helpful. As others have mentioned, there is a lot of duplication in your code. The things that stand out are: the essentially identical functions that handle the actual quizzing and (to a smaller degree) the number of `if` statements involved in interpreting the response. The general idea of the code below is to condense all of that down into one `Quiz` function, and store all of the quiz words in a different module. Regarding the chapter words, since the chapter dictionaries are actually identical, just reversed, you can use:

```
words = {v: k for k, v in words.items()} 
```

to 'reverse' it in the case you want to go from English -> Japanese. Then, once you are done, the scores can just be printed. This could be further optimized, but hopefully this will get you started:

```
import random
import quiz_vocab

CHAPTER_WORDS = {
    1: quiz_vocab.chapter_1,
    2: quiz_vocab.chapter_2
    }

def main():
    study_more = 'y'
    right = 0
    wrong = 0

    while study_more == 'y':
      chapter = int(input('Enter the chapter you would like to study (1-6): '))
      direction = int(input('Japanese to English? (1) or English to Japanese (2): '))

      # Do additional handling here to make sure they pick the right stuff
      if chapter not in CHAPTER_WORDS or direction not in (1, 2):
        print("You've entered invalid responses.")
        continue
      print()

      # Return the results of quiz into their respective variables
      # and increment the overall totals
      num_right, num_wrong = quiz(chapter, direction)
      total_right += num_right
      total_wrong += num_wrong

      # Cycle again
      study_more = input('Do you want to study more? (y for yes): ')

    # Print the final total
    print('Right: {0}\nWrong: {1}'.format(total_right, total_wrong))

def quiz(chapter, direction):
    right, wrong = 0, 0

    # Get the words corresponding to the input
    words = CHAPTER_WORDS[chapter]

    # If we decide to go English -> Japanese, reverse the dictionary
    if direction == 2:
      words = {v: k for k, v in words.items()}

    # This is all the same as yours...
    words = list(words.items())
    random.shuffle(words)

    for word, translation in words:
        print()
        print(word)
        answer = input('Enter the translation: ')

        if answer == translation:
            print('Correct!')
            right += 1
        else:
            print('Incorrect.')
            print('The correct answer is: %s.' % translation)
            wrong += 1

    # Return the right/wrong counts
    return right, wrong

main() 
```

And the `quiz_vocab` module looks like:

```
chapter_1 = {'ano' : 'um', 'ima': 'now', 'eego' : 'english'} # continues... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T03:59:14.260

在我看来，您希望用户选择要运行的测试（在 中`start()`），但随后您又从 中运行所有测试`score()`。

如果您要跟踪全局变量中正确/错误答案的数量（不应该这样做，但这是一个不同的问题），那么该`score()`函数应该只打印全局变量的值。

顺便说一句，测试函数不需要返回变量的值，因为您直接修改全局变量。无论如何，双重返回语句没有意义。该函数在第一条语句上返回，永远不会到达第二条。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T03:30:12.553

One mistake I see straight away is that the variables `RIGHT` and `WRONG` are referenced before assignment within your 'chapter' functions. Each function must include `global RIGHT, WRONG`

Moreover to make your program considerably smaller you can employ the following within `start` function:

```
answer1 = raw_input('Enter the chapter you would like to study (1-6): ')
answer2 = input('Japanese to English? (1) or English to Japanese (2): ')

if answer1 in range(1,7) and answer2 in [1,2]:
    functionName = 'ch{}_{}()'.format(answer1, ['japanese_to_english', 'english_tojapanese'][answer2-1])
    eval(functionName) 
```

That would replace all the `if elif` clauses

* * *

One more improvement I can suggest is that rather than having a function for each chapter you can have a list of all the dictionaries(since they are the only things different in each 'chapter' function)of all the functions in serial order. Then have just one function which accepts `answer1` and `answer2` as arguements and accordingly selects the required dictionary. For example:

```
j_to_e = [ # all the japanese to english dictionaries in order as a list]
e_to_j = [ # all the english to japanese dictionaries in order as a list]
all_dicts = [j_to_e, e_to_j]

def chapter(chapterNumber, j_to_e):
    global RIGHT, WRONG
    curDict = all_dicts[j_to_e-1][chapterNumber-1] # '-1' to compensate 0 based lists
    words = list(curDict.items())
    random.shuffle(words)

    for word, translation in words:
        # all the function code 
        ...
        print()
        return RIGHT, WRONG  # RIGHT and WRONG should be returned on the same line otherwise 'return WRONG' won't be executed 
```

The above improvements would make your code significantly concise. Hope this helps.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T03:28:28.533

There are a number of problems with this code.

1.  **Redundant code**: As @Joran points out, there's an enormous amount of code duplication. Functions should be *generalizable*. Each function asks for user input, then checks if it matches the dictionary's stored value. The only thing that changes is the dictionary. Why not make one "quizzing" function, and pass in the dictionary?
2.  **Global variables:** Very bad. I'll leave it to you to research why, but your functions should not be modifying a global right/wrong count.
3.  **Verbose code**: An enormous if/else block is a sign of un-Pythonic code. Consider following the advice given in your [previous question](https://stackoverflow.com/questions/13692263/python-string-or-if-statement-issue).

Combining all this, your generalized quizzing function should look something like this:

```
def quiz(word_dict):
    """ Quiz the user on a word dictionary, returning right/wrong count. """
    right = wrong = 0  # Initialize local count
    words = list(word_dict.items())
    random.shuffle(words)

    for word, translation in words:
        print(word)
        answer = input('Enter the translation: ')
        # (...)
    return (right, wrong) 
```

A quizzing session should consist of prompting the user for the chapter, selecting the appropriate dictionary, then calling the quizzing function.

# objective-c - 安全地使用 performSelector: 使用返回分配对象的方法

> ID：13852132
> 
> 赞同：3
> 
> 时间：2012-12-13T02:45:17.050
> 
> 标签：objective-c, automatic-ref-counting

如果我使用的是 ARC，如何调用以下方法`performSelector:`而不泄漏？

```
- (SomeClass *)test {
    return [[SomeClass alloc] init];
} 
```

如果我使用类似下面的东西，我会收到一个警告，说我可能会引入泄漏，因为 ARC 不知道该怎么做，因为选择器是以编程方式生成的。

```
[object performSelector:selector]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:25:58.467

在这种特殊情况下，你很好。警告告诉您编译器无法判断`-performSelector:`是返回 +0 还是 +1 对象，编译器将继续假设它是 +0 对象。因此，是否泄漏取决于调用的实际方法。在这种情况下，您的方法是`-test`，根据命名规则返回一个 +0 对象。所以调用这个方法`-performSelector:`不会泄漏。

# android - 打开/关闭安卓设备

> ID：13852135
> 
> 赞同：10
> 
> 时间：2012-12-13T02:45:45.687
> 
> 标签：android

我想实现一些允许Android打开/关闭屏幕的代码行，就像我们使用电源按钮快速打开/关闭设备一样。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T02:48:57.647

您似乎想锁定设备而不是关闭它。要锁定设备，只需一个简单的代码。[这里](https://stackoverflow.com/questions/4545079/lock-the-android-device-programatically)提到

它使用设备策略管理器`lockNow()`方法

如果出现 RuntimeError，请使用此问题中描述的方法来设置权限

[Android DevicePolicyManager lockNow()](https://stackoverflow.com/questions/6560426/android-devicepolicymanager-locknow-problem)

[http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html](http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html)

要关闭设备：

这是不可能的，但您可以使用 PowerManager 重新启动它

[http://developer.android.com/reference/android/os/PowerManager.html#reboot](http://developer.android.com/reference/android/os/PowerManager.html#reboot)

请注意，这需要 REBOOT 权限，操作系统可能会取消它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T02:49:39.457

您可以使用`DevicePolicyManger.lockNow()`：http: [//developer.android.com/reference/android/app/admin/DevicePolicyManager.html#lockNow%28%29](http://developer.android.com/reference/android/app/admin/DevicePolicyManager.html#lockNow%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-28T17:52:19.120

是的，您可以使用以下代码进行编程， **注意：此解决方案仅适用于有根设备**

**关闭：**

```
try {
    Process proc = Runtime.getRuntime()
                    .exec(new String[]{ "su", "-c", "reboot -p" });
    proc.waitFor();
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

**重新开始：**

相同的代码，只需使用`"reboot"`而不是`"reboot -p"`.

# java - 在 Java 中比较字符串参数时出现 NullPointerException

> ID：13852137
> 
> 赞同：3
> 
> 时间：2012-12-13T02:46:11.383
> 
> 标签：java, servlets, nullpointerexception

我正在使用 servlet 作为重定向页面的控制器。所以，我有以下链接：

```
<li><a href="actionController?key=contact">Contact</a></li>
<li><a href="actionController?key=support">Request support</a></li> 
```

例如，我想在我的控制器中接收此参数并重定向来自页面 Contact.jsp 的页面的请求。

因此，我认为这将是：

```
 contact = request.getParameter("contact");

    support = request.getParameter("support");

    if (contact.equals("contato"))
    {
        RequestDispatcher view = request.getRequestDispatcher("/WEB-INF/center/Contact.jsp");
        view.forward(request, response);        
    }
    else if (support.equals("support"))
    {
        RequestDispatcher view = request.getRequestDispatcher("/WEB-INF/center/Support.jsp");
        view.forward(request, response);
    } 
```

但是，不起作用，是 java.lang.NullPointerException。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T02:49:52.040

您的 servlet 代码似乎与您的 HTML 片段不匹配。我认为你需要写：

```
 String key = request.getParameter("key");

    if (key != null && key.equals("contact"))
    {
        RequestDispatcher view = request.getRequestDispatcher("/WEB-INF/center/Contact.jsp");
        view.forward(request, response);        
    }
    else if (key != null && key.equals("support"))
    {
        RequestDispatcher view = request.getRequestDispatcher("/WEB-INF/center/Support.jsp");
        view.forward(request, response);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:17:27.073

首先`key`使用参数名称获取值`key`（**这是问题的根本原因**），然后简单地将字符串文字作为第一个参数进行比较以避免任何`NullPointerExceotion`：

```
String key = request.getParameter("key");
if ("contact".equals(key)){
    RequestDispatcher view = 
                       request.getRequestDispatcher("/WEB-INF/center/Contact.jsp");
    view.forward(request, response);        
}else if ("support".equals(key)){
    RequestDispatcher view = 
                       request.getRequestDispatcher("/WEB-INF/center/Support.jsp");
    view.forward(request, response);
} 
```

`key`如果需要，也可以添加默认处理，即处理既不是`contact`也不是的场景`support`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T02:49:33.110

这意味着，找不到“联系人”或“支持”参数。在使用它们之前检查它们是否为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T02:53:00.833

试试下面的代码：

```
 String key = request.getParameter("key");

    if(null == key){
    // do something

    } else if(key.equals("contact")){
    // do something else

    } else if(key.equals("support")){
    // do something else

    } else {
    // etc

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T02:55:41.823

您的请求将不包含任何“联系人”或“支持”参数，而是包含“密钥”参数。

我建议您查看[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986) - 解释 URI 语法，包括查询参数。

# python - 如何在类中定义装饰器方法？

> ID：13852138
> 
> 赞同：32
> 
> 时间：2012-12-13T02:46:12.470
> 
> 标签：python

> **可能重复：**
> [类方法可以是装饰器吗？](https://stackoverflow.com/questions/11740626/can-a-class-method-be-a-decorator)

这是一个例子。

```
class myclass:
    def __init__(self):
        self.start = False

    def check(self):
        return not self.start

    def doA(self):
        if self.check():
            return
        print('A')

    def doB(self):
        if self.check():
            return
        print('B') 
```

如您所见，我想以装饰器的方式编写检查操作，但是经过多次尝试后，我发现我只能在课堂外编写该方法。请教我如何在课堂内编写它，谢谢

编辑：

我可以这样写代码：

```
def check(func):
    def checked(self):
        if not self.start:
            return
        func(self)
    return checked

class myclass:
    def __init__(self):
        self.start = False

    @check
    def doA(self):
        print('A')

    @check
    def doB(self):
        print('B')

a = myclass()

a.doA()
a.doB()

a.start = True

a.doA()
a.doB() 
```

但我认为这不是一个好习惯，我想在我的类中定义检查方法。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-13T03:22:48.650

虽然我不认为这一直是完全需要的，但这里是你在课堂上制作装饰器的方法。`self`由于方法绑定到后者的方式，它有点麻烦。通常使用简单的函数装饰器，您不必担心这一点。

要求是：

1.  装饰器需要在使用它的方法之前定义
2.  它需要用来`functools.wraps`正确保存绑定的方法

例子：

```
from functools import wraps

class myclass:
    def __init__(self):
        self.start = False

    def _with_check(f):
        @wraps(f)
        def wrapped(inst, *args, **kwargs):
            if inst.check():
                return
            return f(inst, *args, **kwargs)
        return wrapped

    def check(self):
        return self.start

    @_with_check
    def doA(self):
        print('A')

    @_with_check
    def doB(self):
        print('B') 
```

我将它设置为受保护的成员，因为它实际上并不是其他人需要在课堂之外使用的东西。它仍然保留您的公开`check()`呼吁以供自己使用。装饰器在调用目标方法之前简单地包装调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:24:36.297

If you have a need to modify how many or all methods on a class are called, but you only want to apply that change in behavior to that class and its subclasses, just use `__getattr__()` and/or `__getattribute__()` to perform your behavior instead.

# php - 与今天日期比较的整数值

> ID：13852145
> 
> 赞同：0
> 
> 时间：2012-12-13T02:46:40.630
> 
> 标签：php

我有一个表单字段，它作为整数保存在数据库中。这是一个简单的到期日。

`<input name="due_day" type="text" id="due_day" class="input-mini" maxlength="2" />`

我想做的是将此到期日值与当前日期进行比较以查看差异。例如，账单到期日是每月 15 日，今天是 12 月 12 日。我想显示从今天到下一个到期日（即 12 月 15 日）的差异并显示该值。我该怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T02:50:40.127

使用[PHP Date_diff](http://php.net/manual/en/datetime.diff.php)获取 2 个日期之间的差异，您可以根据需要显示它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T02:51:36.417

```
 $due_day   = $_POST['due_day'];
 $today_day = date('d');
 echo ($due_day - $today_day); 
```

# mono - 尝试在 CentOS 6.2 上编译 Mono 3.0.2 时出错

> ID：13852153
> 
> 赞同：6
> 
> 时间：2012-12-13T02:48:13.733
> 
> 标签：mono, centos

我正在尝试从 GitHub 的 Mono 存储库的压缩包中编译 Mono 3.0.2。但是当我进入`mcs`文件夹时，编译失败：

```
if test -w /root/mono/mcs; then :; else chmod -R +w /root/mono/mcs; fi
    cd /root/mono/mcs && make --no-print-directory -s NO_DIR_CHECK=1 PROFILES=' net_2_0            net_3_5 net_4_0 net_4_5  ' CC='gcc' all-profiles
    Bootstrap compiler: Mono C# compiler version 3.0.3.0
    Makefile:43: warning: overriding commands for target 'csproj-local'
../build/executable.make:149: warning: ignoring old commands for target 'csproj-local'
    Makefile:43: warning: overriding commands for target 'csproj-local'
../build/executable.make:149: warning: ignoring old commands for target 'csproj-local'
    make[7]: *** No rule to make target '../../external/ikvm/reflect/*.cs', needed by '../class/lib/basic/basic.exe'.  Stop.
    make[6]: *** [do-all] Error 2
    make[5]: *** [all-recursive] Error 1
    make[4]: *** [profile-do--basic--all] Error 2
    make[3]: *** [profiles-do--all] Error 2
    make[2]: *** [all-local] Error 2
    make[2]: Leaving directory '/root/mono/runtime'
    make[1]: *** [all-recursive] Error 1
    make[1]: Leaving directory '/root/mono'
    make: *** [all] Error 2 
```

我已经尝试通过 do 来安装 monolite`make get-monolite-latest`并且已经尝试安装 2.x 版本然后编译。这些解决方案都没有奏效。我对 3.0.2 版本的兴趣在于新的 Razor 模板引擎和 MVC 4 框架，但是，如果无法为 CentOS 6 编译/安装或二进制包，我会很感激具有以前版本的存储库。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T15:04:55.550

`external/`子目录包含使用所谓的[git submodules](http://git-scm.com/book/en/Git-Tools-Submodules)的外部依赖项。

如果您在从 tarball 编译时遇到与这些目录中丢失文件相关的任何错误，那么我的猜测是用于创建此 tarball 的任何脚本都已损坏并且不包含任何这些依赖项。

如果您直接从 github 获取源代码，那么您需要`git submodule init`运行`git submodule update`.

[理论上，您可以通过查看.gitmodules](https://github.com/mono/mono/blob/master/.gitmodules)文件从 github 下载这些子模块。

但是，git 会在每个主模块的提交中记录每个子模块的具体修订。因此，如果您在 mono 和 use 中签出某些特定的提交`git submodule update`，您将获得与提交的作者在提交时使用的每个模块完全相同的版本。

如果你想从源代码编译，我建议简单地使用 git 来获取源代码。它会自动为您获取每个依赖项的正确版本，并使您以后更容易更新到新版本和/或进行本地更改。

# c# - 在 C# 中删除虚拟 COM 端口

> ID：13852157
> 
> 赞同：0
> 
> 时间：2012-12-13T02:48:33.780
> 
> 标签：c#, serial-port, virtual-serial-port, com0com

我正在创建一个批处理文件以删除在使用 com0com 之前创建的虚拟 com 端口。在创建时，重命名的端口名称例如：

```
change CNCA2 portname=COM20 
```

因此，当我想删除时，我应该使用原始名称，例如：

```
remove 2 
```

对应于原始端口名`CNCA2`

那么，我在这里要做的是，如果用户选择删除端口 COM20，如何获得原始名称`CNCxx`？

以下是我使用的命令示例：![在此处输入图像描述](../Images/94d3cc2cf76000781f5fe73292e5382d.png)

如你所见，当我写`remove COM150`的时候没有变化，所以我需要得到相应的名称，即`remove 2`.

那么从 c# 应用程序中，我如何在不手动使用`list`命令的情况下获得相应的名称？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:21:26.453

您可以生成一个运行 list 命令的命令提示符进程，并通过将 stdout 重定向到文本文件来捕获输出。然后从文件中读取结果。

从上面的示例中，解析结果并使用它们创建字典应该相对简单，因此您可以轻松地在给定新名称的情况下查找原始名称。

# html - 将选择元素绑定到 ruby /haml 中的输入元素

> ID：13852165
> 
> 赞同：-1
> 
> 时间：2012-12-13T02:49:35.017
> 
> 标签：html, ruby, haml

有一个 ruby​​ 散列`@vars` 想要一个选择控件来显示键，以及一个输入元素来显示所选键的值。

很容易做第一部分，但我不知道如何使用选择值来索引红宝石哈希。

```
%select{:name=>'var', :onchange =>"document.getElementById('var_val').value=value"}
  -@vars.each do |k,v|
    %option #{k}
%input#var_val{:type => 'text', :name => 'var_val', :value => '0'} 
```

这成功地将输入字段设置为所选文本本身，但我如何将其设置为本质上`@vars[select.value]`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:14:19.920

我敢肯定有一种更简单的方法，但这似乎可以解决问题：

```
 %select{:id=>'var', :onchange =>"document.getElementById('var_val').value=this.options[this.selectedIndex].attributes[0].value"}
    -@vars.each do |k,v|
      %option{:name => v} #{k}
  %input#var_val{:type => 'text', :name => 'var_val', :value => @vars.first[1]} 
```

将坚持一个更好的答案...

# xcode - 为什么使用自动布局时按钮无法正确绘制？

> ID：13852169
> 
> 赞同：1
> 
> 时间：2012-12-13T02:49:59.170
> 
> 标签：xcode, cocoa, drawing, autolayout

我创建了一个使用自动布局的新 Cocoa 应用程序。在窗口上，我添加了一个几乎填满窗口的 NSView。在这个 NSView 里面，我在左上角放置了一个按钮。当我运行应用程序并将窗口大小调整为最小宽度，然后将窗口大小调整为最大宽度时，按钮将无法正确绘制。如果我关闭自动布局并尝试相同的过程，按钮将正确绘制。

调整窗口大小时，我只抓取并拖动窗口的右侧。

我确定我遗漏了一些明显的东西，但我不确定那可能是什么。

我在这里有一个示例测试项目： [自动布局测试](http://ericgorr.net/cocoadev/autolayout01.zip)

![调整窄后迅速变宽](../Images/f2280ef4e022a86b5e732fe30a54ce3a.png) ![调整部分缩小然后变宽后](../Images/bf06a2d60e3efd4074bdd49d007fc667.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:44:49.627

我也可以重现这个。它似乎只发生在与内部 NSView 左边缘对齐的 NSButtons（还有 NSTextFields，可能还有许多其他 NSView 子类）上；与内部 NSView 的右边缘或水平中心对齐的对象适当地重绘。

我可以通过创建一个 NSView 子类并用子类的实例替换内部 NSView 来修复它。但我相信我不应该这样做。Eric，我建议作为 Apple 开发人员提交错误报告：http: [//developer.apple.com/bugreporter/](http://developer.apple.com/bugreporter/)

# c - 传递给另一个方法的结构数组

> ID：13852170
> 
> 赞同：0
> 
> 时间：2012-12-13T02:50:03.203
> 
> 标签：c, arrays, structure

我在我的一个函数中创建了结构数组，我想在另一个文件中使用该结构数组。我的结构是这样的：

```
struct competitors{
int competitorNumber;
char registeredCourse;
char name[50];
}; 
```

**编辑：对不起，我复制了错误的结构！！！**

这就是我填充结构的方式：

```
lines = lineCount(fileName);
struct checkPoints checkPoint[lines];
sizeOfCheckPoints = lines;
chPo = fopen(fileName, mode);
if (chPo == NULL) {
    printf("Can't find the files.");
    exit(1);
} else {
    for (i = 0; i < lines; i++) {
        fscanf(chPo, "%c %d %d %d:%d\n", &checkPoint[i].dropOut, &checkPoint[i].currentPoint, &checkPoint[i].competitor, &checkPoint[i].hour, &checkPoint[i].minute);
    }
} 
```

它完美地填充结构，但我不知道我应该如何在另一个文件中使用它。这就是我尝试使用它的方式，但它似乎不起作用：

```
for(i = 0; i<sizeOfCompetitors; i++){
    if (name == competitor[i].name){
        printf("Here is comp details: %d\t%c\t%s", competitor[i].competitorNumber, competitor[i].registeredCourse, competitor[i].name);
    }else{
        printf("%s was not found", name);
    }
} 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:12:01.457

您希望 .h 文件中的结构定义，以便两个 .c 文件都知道它。

然后你就可以使用它了！最好的方法是将它从第一个文件传递到第二个文件。你可能也想在 .h 文件中声明你的方法，例如 /* checkpoint.h *//*你的 struct def *//*也许是它的 typedef *//*方法声明 */ void doSomething(struct checkPoints *points, int numPounts);

```
/* second dot C */
#include "checkpoint.h"
void doSomething(struct checkPoints *points, int numPounts)
{
    int i;
    for(i = 0; i < numPoints; i++)
    {
        int currentPoint = points[i].currentpoint;
        ... 
```

# android - 基于 Android 4.0 的 Virtual Box 模拟器无法从笔记本电脑检测蓝牙 4.0

> ID：13852174
> 
> 赞同：3
> 
> 时间：2012-12-13T02:50:37.983
> 
> 标签：android, android-emulator, bluetooth, virtualbox

目前我正在开发与蓝牙 4.0 设备通信的 Android 应用程序。到目前为止，我在我的应用程序中包含**了 Broadcom-ble**并做了一些示例代码。实际上我没有基于蓝牙 4.0 的 Android 智能手机，所以出于测试目的，我只是安装了 Oracle Virtual Box 并在其中使用了**android-x86-4.0-RC2.iso**。我可以在 Virtual Box 上成功运行一些基于蓝牙的示例 android 应用程序。问题是 Virtual Box 可以从我的笔记本电脑上找到蓝牙 2.0。但是当我尝试使用蓝牙 4.0 时，VM 无法检测到蓝牙 4.0。我的笔记本电脑有蓝牙 4.0，但虚拟机找不到蓝牙 4.0。我安装**了android-x86-4.0-RC2.iso**在虚拟机上。如何让我的 Android 4.0 虚拟机可以检测到笔记本电脑的蓝牙 4.0。

注意：我使用相同的 Android 4.0 VM 从笔记本电脑成功检测到蓝牙 2.0，问题仅针对蓝牙 4.0。我正在使用包含蓝牙 4.0 的 Sony Vaio。

请有人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:52:24.520

问题可能出在 USB 上，因为当您使用笔记本电脑蓝牙时，Virtual Box 将您的笔记本电脑蓝牙作为 USB 设备。升级Oracle VM版本，问题就解决了。

# php - 在 Symfony2 中的每个请求之前动态设置 Doctrine EntityManager 连接

> ID：13852179
> 
> 赞同：1
> 
> 时间：2012-12-13T02:51:24.233
> 
> 标签：php, symfony, doctrine-orm, fosuserbundle

我正在开发一个 Symfony2 站点，该站点将托管许多站点，并且每个站点都有自己的数据库。我已经实现了一项服务，它使用反射来更改“客户端”实体管理器上的连接参数（用户名、密码、数据库名）。在 FOSUserBundle 调用其身份验证服务之前，我不确定如何触发此服务。我试图创建一个 Symfony2 Request 事件监听器，但这似乎不起作用：

```
class RequestListener {
    private $clientSiteContext;

    function __construct($clientSiteContext) {
        $this->clientSiteContext = $clientSiteContext;
    }

    public function onKernelRequest(GetResponseEvent $event) {
        if ($event->getRequestType() == HttpKernel::MASTER_REQUEST) {
            $this->clientSiteContext->resetClientEntityManager();
        }
    }
} 
```

resetClientEntityManager() 实现

```
public function resetClientEntityManager() {
    /** @var $doctrine \Doctrine\Bundle\DoctrineBundle\Registry */
    $doctrine = $this->container->get('doctrine');

    $dbConfig = $this->getConnectionParams();
    $dbalServiceName = sprintf('doctrine.dbal.%s_connection', 'client');
    $clientEmName = 'client';

    $connection = $this->container->get($dbalServiceName);
    $connection->close();

    $refConn = new \ReflectionObject($connection);
    $refParams = $refConn->getProperty('_params');
    $refParams->setAccessible('public');

    $params = $refParams->getValue($connection);
    $params['dbname'] = $dbConfig['dbname'];
    $params['user'] = $dbConfig['user'];
    $params['host'] = $dbConfig['host'];
    $params['password'] = $dbConfig['password'];
    $params['driver'] = $dbConfig['driver'];
    $params['charset'] = 'UTF8';

    $refParams->setAccessible('private');
    $refParams->setValue($connection, $params);

    $doctrine->resetEntityManager($clientEmName);
} 
```

有人可以建议我如何让这个监听器为每个页面请求调用一次，并让它影响 FOSUserBundle 使用的实体管理器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:30:07.857

您必须在任何内核事件之前拥有它。可能最好的地方是把它放在你的 AppKernel ( `app/AppKernel.php`) 本身的某个地方。

您可能会将其用于 getBundles()，或添加类似以下内容：

```
public function boot() {
    parent::boot();
    resetClientEntityManager();
} 
```

我还没有测试过，但它应该可以解决问题。boot() 是初始化容器的函数，因此您应该在容器初始化后立即进行切换，然后其他任何事情都有机会做任何事情。

# llvm - 如何使用 dbg 元数据获取变量定义行号等？

> ID：13852180
> 
> 赞同：0
> 
> 时间：2012-12-13T02:51:33.623
> 
> 标签：llvm, llvm-gcc, llvm-c++-api, llvm-ir

据我所知，当我需要获取局部变量的行号时，我必须寻找`llvm.dbg.declare`内在函数的调用并获取 dbg 元数据（因为`AllocaInst`它本身不包含任何 dbg 信息）。但是似乎不能保证这`CallInst`是 的下一条指令`AllocaInst`，我必须在指定的函数中遍历指令，这是低效的。所以我想知道是否有一种方法可以直接`AllocaInst`获取`llvm.dbg.declare`指令。

例如，在一个名为 src 中`foo.c`：

```
int foo(){
     int a;
} 
```

和相应的 llvm ir：

```
define i32 @foo() nounwind {
entry:
  %retval = alloca i32
  %a = alloca i32
  %"alloca point" = bitcast i32 0 to i32
  call void @llvm.dbg.declare(metadata !{i32* %a}, metadata !7), !dbg !9
  br label %return, !dbg !10

return:                                           ; preds = %entry
  %retval1 = load i32* %retval, !dbg !10                                                                                                     
  ret i32 %retval1, !dbg !10
}
......
!9 = metadata !{i32 3, i32 0, metadata !8, null} 
```

如果我需要知道中`int a;`定义的行号，`foo.c`我必须遍历 ir 并`!dbg !9`从`call void @llvm.dbg.declare(metadata !{i32* %a}, metadata !7), !dbg !9`.

顺便说一句，处理全局变量时似乎没有困难，因为`llvm.dbg.gv`它包含非常信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:40:58.920

我终于想通了，我们可以使用静态方法`DbgDeclareInst* findDbgDeclare(const Value *V)`，`DbgInfoPrinter.cpp`可以在[这里看到](http://llvm.org/docs/doxygen/html/DbgInfoPrinter_8cpp_source.html#l00097)

破解这段代码也不是很难^_^

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-15T02:16:01.387

我的llvm的版本是3.3。没有这个功能`DbgDeclareInst* findDbgDeclare(const Value *V)`。你的llvm是什么版本的？

# gwt - 如何刷新 GXT 本地分页（PagingModelMemoryProxy）标题排序

> ID：13852186
> 
> 赞同：1
> 
> 时间：2012-12-13T02:51:54.203
> 
> 标签：gwt, extjs, gxt, gwt-ext

我需要使用 GXT 本地分页 (PagingModelMemoryProxy) 自定义一列的标题排序结果。这是我的代码：

```
PagingModelMemoryProxy proxy = new PagingModelMemoryProxy(data) {
        @Override
        public void load(DataReader<PagingLoadResult<? extends ModelData>> reader, Object loadConfig,
                AsyncCallback<PagingLoadResult<? extends ModelData>> callback) {
            if (loadConfig instanceof PagingLoadConfig) {
                PagingLoadConfig pagingConfig = (PagingLoadConfig) loadConfig;

                // sort order must be changed because CRITICAL has lowest number
                SortInfo sortInfo = pagingConfig.getSortInfo();
                if (ActiveAlarmBean.SEVERITY.equals(sortInfo.getSortField())) {
                    if (SortDir.ASC == sortInfo.getSortDir()) {
                        sortInfo.setSortDir(SortDir.DESC);
                    }
                    else {
                        sortInfo.setSortDir(SortDir.ASC);
                    }
                }
            }
        }
    } 
```

但是在我覆盖“加载”后，标题排序（升序或降序）不再起作用。我真正想做的是，当用户单击升序时，它会执行降序排序行为，而在降序时，它也会执行相反的升序排序行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:51:10.067

排序应该在你的装载机上完成，如下所示：

```
loader.setSortField("id_field");
if (loader.getSortDir().equals(SortDir.DESC)){
   loader.setSortDir(SortDir.ASC);
} else {
   loader.setSortDir(SortDir.DESC);
} 
```

# haskell - Haskell 和/或 Clojure

> ID：13852189
> 
> 赞同：5
> 
> 时间：2012-12-13T02:52:50.507
> 
> 标签：haskell, concurrency, clojure, functional-programming

我正在寻求扩展我对编程语言的了解，并且我一直在研究 Haskell 和 Clojure 来学习。

到目前为止，我已经使用了一天，并且我倾向于使用 Haskell，因为我发现它对我来说更容易使用，至少在使用了一天之后。

一般的问题：

*   Haskell 和 Clojure 的用例是什么？
*   哪些问题/用途最适合这些语言？
*   函数式编程语言更适合哪些问题？

我想要做什么：

*   我想用其中一种语言编写一个并发/可扩展的 Web 服务器或应用程序，哪种语言最适合该任务？
*   找到一种可以添加到我的语言列表中的功能语言。

# node.js - 安装 Node.js 版本管理失败

> ID：13852192
> 
> 赞同：1
> 
> 时间：2012-12-13T02:53:08.027
> 
> 标签：node.js

我安装 node.js windows.today 我想安装 Node.js 版本管理。我使用“$ npm install -g n”。/%AppData%/Roaming/npm 有 n 个模块。但是当我使用命令“n”时，它显示--

> 'sh 不是内部外部命令'

n.cmd 中的代码如下：

`:: Created by npm, please don't edit manually. @IF EXIST "%~dp0\sh.exe" ( "%~dp0\sh.exe" "%~dp0\node_modules\n\bin\n" %* ) ELSE ( sh "%~dp0\node_modules\n\bin\n" %* )`

这是什么sh.exe？我安装了UnxUtils，它有一个sh.exe。我把它的路径放在环境路径中，它也失败了：cmd窗口变得非常小，我看不到任何信息，它不能正常工作！

# objective-c - 带有 NSArray 的 Sqlite IN 子句

> ID：13852196
> 
> 赞同：1
> 
> 时间：2012-12-13T02:53:42.450
> 
> 标签：objective-c, sqlite, nsarray

我需要在 Objective-C 中使用带有 NSArray 的 IN 子句来执行 Select 语句。像这样的东西

```
NSArray *countries = [NSArray arrayWithObjects:@"USA", @"Argentina", @"England", nil];

if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {

    const char *sqlStatement =
    [[NSString stringWithFormat:@"select currencies from money where country IN countries] UTF8String];

.... 
```

其中 IN countries 是带有字符串值的 NSArray。这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T04:17:34.750

将查询字符串更改为：

```
const char *sqlStatement =
[NSString stringWithFormat:@"select currencies from money where country IN ('%@')",[countries componentsJoinedByString:@"','"]] UTF8String]; 
```

# string - 使用 php split 获取字符串的一部分

> ID：13852204
> 
> 赞同：0
> 
> 时间：2012-12-13T02:55:11.227
> 
> 标签：string, query-string, split

我想从数据库中获取部分价值，
我知道我必须使用拆分代码，但它会从 php 中删除，
所以我必须使用我现在
拥有的

```
<html>
<header>
<body>
<?php
$value = "10-20-30-40-50-87";
//i want to get 30 for example
?> 
```

我知道我可以使用

```
$aryStr = split("#", $string); 
 print "$aryStr[0]<br>";
 print "$aryStr[1]"; 
```

但它在 php5.3 中给了我一个错误，
所以我现在必须使用什么来从 value 中获取 40

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:58:07.990

使用[PHP 的 explode](http://php.net/manual/en/function.explode.php)函数将 $value 拆分为一个字符串数组。

```
$value = "10-20-30-40-50-87";
$pieces = explode("-", $value);
echo $pieces[0]; // 10
echo $pieces[1]; // 20 
```

# testing - 使用 JMeter 对 Camel 路由的 JUnit 测试用例进行负载测试

> ID：13852205
> 
> 赞同：1
> 
> 时间：2012-12-13T02:55:12.417
> 
> 标签：testing, junit, jmeter, apache-camel, routes

我正在扩展 org.apache.camel.test.junit4.CamelSpringTestSupport.CamelSpringTestSupport 来为 Camel 路由编写单元测试；它们作为 Maven 构建的一部分运行。现在我想使用 JMeter 对它们进行负载测试。有什么好的指点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:50:17.437

确保将必要的 jar 放在 lib 中，并且测试 jar 文件应放在 **jmeter/lib/junit**而不是 /lib 目录文件夹中。

读 ：

*   [http://jmeter.apache.org/usermanual/component_reference.html#JUnit_Request](http://jmeter.apache.org/usermanual/component_reference.html#JUnit_Request)

使用 JUnit 4 时，类不需要扩展 TestCase，如下所示：

*   [http://svn.apache.org/repos/asf/jmeter/trunk/src/junit/test/RerunTest.java](http://svn.apache.org/repos/asf/jmeter/trunk/src/junit/test/RerunTest.java)

# javascript - Firefox 中的 localStorage 不可靠

> ID：13852209
> 
> 赞同：13
> 
> 时间：2012-12-13T02:55:35.663
> 
> 标签：javascript, firefox, local-storage

我正在为我玩的纸牌游戏[开发套牌构建应用程序。](http://asmor.com/anr/)我正在使用 localStorage 来保存和检索卡片组。它似乎在 Chrome 中运行良好，但在 Firefox 中运行不可靠。

在 FF 中，起初一切似乎都很好，套牌甚至在重新加载后仍然存在。但是，如果我添加第二个牌组并重新加载，它只会找到第一个牌组。如果我删除第一个牌组，它就再也找不到任何东西了。

所有本地存储交互都在 scripts/vault.js 中，我将在下面重现。难道我做错了什么？

```
vault = {};
vault.makeKey = function (s) {
    return "deck:" + s;
};
vault.friendlyName = function(s) {
    if (s.indexOf("deck:") === 0) {
        return s.substring(5);
    } else {
        return s;
    }
};
vault.store = function (deck, name) {
    if (!window.localStorage) {
        alert("This browser doesn't support local storage. You will be unable to save decks.");
        return;
    }
    var key = vault.makeKey(name);
    localStorage.setItem(key, deck.export());
};
vault.retrieve = function (key) {
    deck.import(localStorage[key]);
};
vault.getDecks = function () {
    var keys = Object.keys(localStorage),
        out = [],
        i,
        k,
        name = "";
    for (i = 0; i < keys.length; i++) {
        k = keys[i];
        name = vault.friendlyName(k);
        if (name !== k && localStorage[k]) {
            out.push({name: name, key: k});
        }
    }
    out.sort(function (a, b) {
        return a.name > b.name ? 1 : -1;
    });
    return out;
};
vault.deleteDeck = function (key) {
    localStorage.removeItem(key);
}; 
```

基本上，localStorage 中的键似乎在某些时候因为缺少更好的术语而被“冻结”；localStorage 在我操作它时会正常运行，但是一旦我刷新页面，它似乎就会恢复到它被冻结的任何状态。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T08:53:52.550

我曾多次遇到同样的问题，起初我没有注意到它无法读取 localStorage 的原因，但我想我找到了解决方案。

localStorage 操作都是同步的，不同的浏览器对它们如何处理它们有一定的怪癖。

在您的情况下，问题似乎是您试图在 DOM 准备好之前读取 localStorage 。我用 Firebug 尝试过，我在 vault.js 文件的开头添加了一个断点并重新加载页面，当代码中断时，我检查 dom-tab 并找到 localStorage 属性，它就在那里 - 存储的完整列表价值观。当我删除断点并重新加载页面时，加载页面后它们都消失了。

这可能是 Firefox 或其他浏览器中的错误，只是更快地初始化 localStorage。

因此，作为您的问题的解决方案：尝试在 DOM 准备好后从 localStorage 获取密钥。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-08-26T12:23:46.167

虽然这是一篇旧文章，但我认为我的发现可能会有所帮助。我也遇到了同样的问题，所以我浏览了这篇文章，尝试了这个，这就是我注意到的，在 Firefox 中，如果你在 window.load 之前尝试用 localstorage 做任何事情（甚至是 localStorage.getItem），它会从它，你将一无所有。所以无论你想做什么设置或获取，都在 window.load 之后执行。

像这样的东西

```
$( window ).load(function() {
    //do whatever you want to do with localstorage
}); 
```

顺便说一句，在此之前，我试图在 document.ready 上对 localStorage 进行一些操作，但失败了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-21T17:58:26.110

在此处发布此内容以帮助可能正在经历我现在正在经历的任何人。

如果使用 Firefox，刷新页面后，您需要关闭并重新打开开发工具才能看到新的 localStorage 项目。

When the page refreshes, the localStorage items that were there before show. If you close and re-open the dev tools, you can see the new set. Any changes made from that point on (until the next refresh) will update live.

*Definitely* a Firefox dev tools bug.

I've reported the bug here: [https://bugzilla.mozilla.org/show_bug.cgi?id=1706710](https://bugzilla.mozilla.org/show_bug.cgi?id=1706710)

// Edit 5 minutes later I can't reproduce it now. I'm not sure but I think it might have been due to a Firefox update. It updated just as I'd finished writing the bug report. Did I really discover a bug in Firefox 87 that got fixed in Firefox 88 10 minutes before I updated?!! Will report back here if it re-occurs.

[![Animated gif of issue](../Images/55a2d1bd40253d8e82853a6906d0a398.png)](https://i.stack.imgur.com/OHVGv.gif)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T15:52:47.923

我认为 jylauril 走在正确的轨道上。

我一直在玩延迟，并注意到一些奇怪的行为。

据我所知，似乎如果您在所有 JavaScript 完成执行之前触摸 localStorage，包括 JS 执行 setTimeout，localStorage 对于该网页浏览将显示为空白。例如：

```
$(window).load(function () {
    console.log("Waiting 10000ms", new Date());
    setTimeout(setDeckSelect, 10000);
}); 
```

Firebug 的控制台：

```
Waiting 10000ms Date {Thu Dec 13 2012 10:35:48 GMT-0500 (Eastern Standard Time)}
exec.js (line 191)
getDecks Date {Thu Dec 13 2012 10:35:58 GMT-0500 (Eastern Standard Time)}
vault.js (line 23)
>>> localStorage
0 items in Storage 
```

我想我可能会做一些事情，但到目前为止我的理论被证明是错误的。不过，我注意到了一件奇怪的事情。无论我等待多长时间，如果我先尝试查找套牌，它将失败并且本地存储将是空的：

```
>>> vault.getDecks()
[]
>>> localStorage
0 items in Storage 
```

但是如果我按照相反的顺序做这些......

```
>>> localStorage
8 items in Storage deck:dfs=
"{"identity":"MakingNews","cards":{}}", deck:ngrngfrn= "{"identity":"BuildingaBetterWorld","cards":{}}", deck:sdfgshsh= "{"identity":"MakingNews","cards":{}}", deck:sdfgdgdfg= "{"identity":"MakingNews","cards":{}}", deck:dfgdfgas= "{"identity":"EngineeringtheFuture","cards":{}}", deck:sdfsga= "{"identity":"MakingNews","cards":{}}", deck:gdgd= "{"identity":"MakingNews","cards":{}}", deck:gfsdfgsdfg= "{"identity":"BuildingaBetterWorld","cards":{}}"
>>> vault.getDecks()
[Object { name= "dfgdfgas",  key= "deck:dfgdfgas"}, Object { name= "dfs",  key= "deck:dfs"}, Object { name= "gdgd",  key= "deck:gdgd"}, Object { name= "gfsdfgsdfg",  key= "deck:gfsdfgsdfg"}, Object { name= "ngrngfrn",  key= "deck:ngrngfrn"}, Object { name= "sdfgdgdfg",  key= "deck:sdfgdgdfg"}, Object { name= "sdfgshsh",  key= "deck:sdfgshsh"}, Object { name= "sdfsga",  key= "deck:sdfsga"}] 
```

如果我在函数中记录 localStorage，它也可以：

```
vault.getDecks = function () {
    console.log(localStorage);
    var keys = Object.keys(localStorage),
        out = [],
        i,
        k,
        name = "";
    for (i = 0; i < keys.length; i++) {
        k = keys[i];
        name = vault.friendlyName(k);
        if (name !== k && localStorage[k]) {
            out.push({name: name, key: k});
        }
    }
    out.sort(function (a, b) {
        return a.name > b.name ? 1 : -1;
    });
    return out;
}; 
```

有用。如果我取消它，虽然...

```
vault.getDecks = function () {
    // console.log(localStorage);
    void localStorage;
    var keys = Object.keys(localStorage),
        out = [],
        i,
        k,
        name = "";
    for (i = 0; i < keys.length; i++) {
        k = keys[i];
        name = vault.friendlyName(k);
        if (name !== k && localStorage[k]) {
            out.push({name: name, key: k});
        }
    }
    out.sort(function (a, b) {
        return a.name > b.name ? 1 : -1;
    });
    return out;
}; 
```

这没用。如果我删除 void 关键字并仅将 localStorage 作为语句，它也不起作用。

我不知道为什么，但 console.log(localstorage) 似乎确实解决了这个问题，我可以随时调用 localStorage。

实在是太诡异了。

**编辑：**我找到了一个更好的解决方案。调用 localStorage 的 'length' 属性也可以。

```
vault.getDecks = function () {
    //Weird hack to make FF load localStorage correctly...
    localStorage.length;
    var keys = Object.keys(localStorage),
        out = [],
        i,
        k,
        name = "";
    for (i = 0; i < keys.length; i++) {
        k = keys[i];
        name = vault.friendlyName(k);
        if (name !== k && localStorage[k]) {
            out.push({name: name, key: k});
        }
    }
    out.sort(function (a, b) {
        return a.name > b.name ? 1 : -1;
    });
    return out;
}; 
```

这更好一点，因为它不记录任何东西......

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-09-26T15:58:52.977

• 确保localStorage 数据在所有html 页面中始终可用： o 域（本地上下文）必须相同。o 确保在所有 Html 文件中保持 << script >> 标签相同， o（仅限 Firefox）确保 onPageLoad 在所有 JavaScript 文件中保持相同（添加在 html 文件中），即确保向 PageLoadEvent 添加相同的函数.

# python - 如何用 numpy 对这个简单的算法进行矢量化？

> ID：13852214
> 
> 赞同：3
> 
> 时间：2012-12-13T02:55:50.937
> 
> 标签：python, numpy, time-series, vectorization

还是像这样的真正迭代算法不可矢量化？

s += 使用可以用 cumsum 向量化，但总和的下限是有问题的。

是否有一些奇特的方式来使用滞后或移位？

```
s = 0
for (time, usage) in timeseries:
    s += usage
    s = max(s-rate, 0)
    new_timeseries[time] = s 
```

我撬开了它一段时间，但什么也想不出来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:15:18.900

先放入`timeseries`数组。`timeseries`让我们假设的值为`my_array`。然后，

```
import numpy as np
s = np.cumsum(my_array) - rate
s[s < 0] = 0
new_timeseries = s 
```

**更新：**这是不对的。`cumsum`当`s`增量低于比率时，它不考虑归零。您可以使用导数找到`cumsum`低于比率的点：

```
In [1]: dd = np.diff(np.cumsum(my_array))
In [2]: dd < rate
Out[3]: array([ True, False, True, False, False, True, True,  
                True, True, False, True, False, True, False,
                True, True, True, False, False], dtype=bool) 
```

但是，这不会“重置” `cumsum`. 可以沿着这些索引搜索并执行`cumsum`“Trues”块，但我不确定它是否会比你的循环更有效。

# ios - Objective-C 警告，使用未声明的标识符“新”

> ID：13852215
> 
> 赞同：1
> 
> 时间：2012-12-13T02:56:11.083
> 
> 标签：ios, byte, nsdata, zlib

我收到此错误

**使用未声明的标识符“新”**

在这行代码上

```
Byte* decompressedBytes = new Byte[COMPRESSION_BLOCK]; 
```

这是我出现这行代码的方法。

```
//  Returns the decompressed version if the zlib compressed input data or nil if there was an error
+ (NSData*) dataByDecompressingData:(NSData*)data{
    Byte* bytes = (Byte*)[data bytes];
    NSInteger len = [data length];
    NSMutableData *decompressedData = [[NSMutableData alloc] initWithCapacity:COMPRESSION_BLOCK];
    Byte* decompressedBytes = new Byte[COMPRESSION_BLOCK];

    z_stream stream;
    int err;
    stream.zalloc = (alloc_func)0;
    stream.zfree = (free_func)0;
    stream.opaque = (voidpf)0;

    stream.next_in = bytes;
    err = inflateInit(&stream);
    CHECK_ERR(err, @"inflateInit");

    while (true) {
        stream.avail_in = len - stream.total_in;
        stream.next_out = decompressedBytes;
        stream.avail_out = COMPRESSION_BLOCK;
        err = inflate(&stream, Z_NO_FLUSH);
        [decompressedData appendBytes:decompressedBytes length:(stream.total_out-[decompressedData length])];
        if(err == Z_STREAM_END)
            break;
        CHECK_ERR(err, @"inflate");
    }

    err = inflateEnd(&stream);
    CHECK_ERR(err, @"inflateEnd");

    delete[] decompressedBytes;
    return decompressedData;
} 
```

我不确定为什么会这样。这段代码来自[ObjectiveZlib](https://github.com/JeremyOT/ObjectiveZlib)并且已经通读了好几次，我并没有尝试在我自己的代码中使用它来解压缩 zlib NSData 对象，但是这阻止了我的进步。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T02:57:59.660

这段代码是 Objective-C++。您正在尝试将其编译为 Objective-C。将文件重命名为结束`.mm`而不是，`.m`它应该可以工作。

具体来说，`new`and`delete`运算符是 C++ 运算符。它们在 C 中不存在。Objective-C 是 C 的超集，而 Objective-C++ 是 C++ 的超集。然而，由于这些似乎是这段代码中唯一的 C++ 主义，如果你宁愿坚持使用 Objective-C，你可以通过替换两行来修复它：

1.  替换`new Byte[COMPRESSION_BLOCK]`为`(Byte*)malloc(sizeof(Byte) * COMPRESSION_BLOCK)`
2.  替换`delete[] decompressedBytes`为`free(decompressedBytes)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:05:56.083

`new`是 C++ 构造，而不是 Objective-C。在上面的代码中，它可能应该是

```
Byte* decompressedBytes = (Byte*) malloc(COMPRESSION_BLOCK); 
```

同样，该`delete[] ...`行应替换为

```
free(decompressedBytes); 
```

一个更类似于 Objective-C 的解决方案是使用`NSMutableData`它：

```
Byte *decompressedBytes = (Byte*)
   [[NSMutableData dataWithLength: COMPRESSION_BLOCK] mutableBytes]; 
```

在这种情况下，您不需要发布它（或`[[NSMutableData alloc] initWithLength:...]`发布上述版本）。

# c - 具有多个 tcp 连接的多线程

> ID：13852220
> 
> 赞同：0
> 
> 时间：2012-12-13T02:57:06.443
> 
> 标签：c, linux, tcp, network-programming

我已经问过这个问题，但在 SCTP 环境中，我没有得到任何答案，所以我会在这里用 tcp 提问，因为我可以在两种协议中使用相同的设计（几乎）

假设我有多个由主程序打开的 tcp 连接，并且我有多个线程，例如 4 个。

该应用程序要求我以循环方式使用所有 4 个连接，但有时我需要通过一个特定的 TCP 连接发送，你可以说它是一个基于 tcp 的路由，所以我想的是创建 4 个 tcp 连接主程序，具有以下文件描述符，

```
fd1
fd2
fd3
fd4 
```

并与 4 个线程共享这些文件描述符，因此每个线程当然可以使用锁发送到这些 fd 中的任何一个，这是个好主意吗？如果不是，你有什么建议？

如果 routing==something，下面的伪代码将发送到 tcp_fd[0]，如果未指定路由，则发送到任何 fd。环境是linux和C。

```
main()
{

tcp_fd[0] = create_connections(1);
tcp_fd[1] = create_connections(3);
tcp_fd[2] = create_connections(3);
tcp_fd[3] = create_connections(3);

create_threads(function_send, tcp_fd)

}

function_send(tcp_fd[])
{
get_data_from_fifo();

if(routing==something)
send_tcp_msg(tcp_fd[0],round_robin_disabled);
else
send_tcp_msg(to any tcp_fd,round_robin_enabled);

} 
```

# asp.net - 如何使用 ASP 和 VB.NET 选择具有多个数据库的用户信息？

> ID：13852222
> 
> 赞同：0
> 
> 时间：2012-12-13T02:57:32.387
> 
> 标签：asp.net, sql, vb.net, visual-web-developer, sqlmembershipprovider

好的，到此为止。. . 我有一个使用 ASP、VB.net 等在 Microsoft Visual Web Developer 中开发的 Web 应用程序，它允许“卖家”发布广告供“买家”查看。当买家搜索产品时，每个结果都需要显示卖家的名字，以及产品的信息。问题在于保存各种产品信息的表位于一个数据库中，而用户/会员信息存储在另一个数据库中。

我将提供一个例子。在这种情况下，买方正在搜索特定书籍的所有广告。

1.  每个广告都记录在数据库 db_1 和表 [Results] 中，其中包含 ID_USER 和 ID_BOOK 列。
2.  书籍信息存储在 db_1 [Books] 中，其中包含 ID、TITLE、AUTHOR 列。
3.  用户信息存储在单独的数据库 db_2 和表 [Users] 中，其中包含 ID 和 NAME 列。

鉴于此，我将如何执行以下操作：

* * *

```
SELECT u.Name [Seller]
, b.Title [Title]
, b.Author [Author]
FROM db_1.Results r
INNER JOIN db_1.Books b
ON b.id = r.id_book
INNER JOIN db_2.Users u
ON u.id = r.id_user
WHERE b.Title like 'Some Book Title' 
```

* * *

如果这些表在同一个数据库中（我现在希望我已经这样做了），那么我会很容易地运行一个内部连接或其他一些选择语句来只提取相关数据。我也考虑过创建数据集并加入它们（例如，[http](http://www.vb-helper.com/howto_net_dataset_foreign_key.html) ://www.vb-helper.com/howto_net_dataset_foreign_key.html ），但这不会太重服务器吗？

我对 SQL 语句有一半的了解，但我所有的知识都来自谷歌和实践，所以如果我忽略了每个受过经典训练的程序员都知道的一些关键警告，我深表歉意。预先感谢您的帮助。

更新：我想我会提供有关情况的更新。该问题实际上与权限无关。问题是 VWD 找不到对象。我通过使用 CROSS JOIN 并在 select 语句中明确说明 .mdf 文件的目录路径解决了这个问题。再次感谢您的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:11:17.793

正如上面的@rs 所示，您的查询将进行微小的更改。`dbo`数据库名称和表名称中间的部分是对象的所有者名称。如果所有者对这两个模式都具有权限，并且您的用户 ID 有权从两个数据库中进行选择，则查询将起作用。

```
SELECT u.Name [Seller]
, b.Title [Title]
, b.Author [Author]
FROM db_1.dbo.Results r
INNER JOIN db_1.dbo.Books b
ON b.id = r.id_book
INNER JOIN db_2.dbo.Users u
ON u.id = r.id_user
WHERE b.Title like 'Some Book Title' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:26:27.360

以下是在两个数据库中使用相同用户并使用 sql server 管理工具授予选择权限的简单步骤

*   转到 db1 > 安全 > 用户 > 新用户。
*   Click login name and browse name and select user you want to use
*   go to db2 > security > users > new user.
*   Click login name and browse name and select same user from db1 above
*   Go to `user table` in db2, right click and go to properties click permissions and click search button to find same user from above and select that user
*   In User or roles box select user and then go to permissions panel below and check Grant for select and click ok.

Repeat last step for all tables you want database user to have access from database 2

# django - Heroku 拒绝 Django 应用推送

> ID：13852235
> 
> 赞同：0
> 
> 时间：2012-12-13T02:59:35.923
> 
> 标签：django, heroku

一段时间以来，我一直在开发 Heroku Django 应用程序。最新更新在部署时出现错误：

```
$ git push staging staging:master
Counting objects: 168, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (52/52), done.
Writing objects: 100% (139/139), 19.98 KiB, done.
Total 139 (delta 96), reused 115 (delta 81)

-----> Heroku receiving push

 !     Heroku push rejected due to an unrecognized error.
 !     We've been notified, see http://support.heroku.com if the problem persists.

To git@heroku.com:myapp-staging.git
 ! [remote rejected] staging -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:myapp-staging.git' 
```

另外：staging 是我对 heroku 遥控器的称呼。

我已经使用 Heroku 创建了支持票，但没有收到回复……我的下一步应该是什么？重置整个应用程序并推送干净的回购？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:39:15.287

昨晚突然开始工作。虽然没有来自 Heroku 的通信。

# css - 从 :hover 触发的 CSS 动画平滑结束到过渡

> ID：13852238
> 
> 赞同：2
> 
> 时间：2012-12-13T02:59:47.610
> 
> 标签：css, animation, hover

我有一个为无限循环嵌套 CSS 动画的想法，其中每个循环的持续时间是不同的素数，因此累积效果是一个很好的非重复动画（将鼠标悬停在带有 webkit 浏览器的徽标上以获得想法：[http:// jsbin.com/usabop/2](http://jsbin.com/usabop/2)）

问题是当 :hover 状态结束时，一切都会立即跳回原始状态。

有没有人有任何想法或建议可以使过渡更顺利？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:13:01.183

不幸的是，对于 CSS 动画的工作方式，没有简单的方法可以做到这一点。您可以使用该`animation-play-state`属性，但这只会在您不再悬停时将动画冻结在当前帧。

我的建议是使用 JavaScript 在悬停时添加一个类，然后触发一个完整的动画循环。

# git - 无法从第二台计算机推送到 heroku

> ID：13852241
> 
> 赞同：2
> 
> 时间：2012-12-13T03:00:05.047
> 
> 标签：git, heroku

我有两台计算机用于开发，都使用 Dropbox 同步我的开发目录，因此无论我使用哪台计算机，我的目录都完全相同。当我使用第一台计算机时，我可以使用“git push heroku master”推送到heroku，一切正常。但是，当我转到第二台计算机时，我收到拒绝访问错误。

如何授权第二台电脑推送到heroku网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:32:50.057

您需要使用 heroku 进行身份验证：

```
heroku auth:login 
```

然后从那里去。

# java - 如何从 Kabeja 的块中读取行？

> ID：13852242
> 
> 赞同：27
> 
> 时间：2012-12-13T03:00:08.637
> 
> 标签：java, autocad, dxf

我正在使用 Kabeja 从 DXF 文件中读取数据。我可以毫无问题地阅读所有线条和折线。但是，我无法从块中找到线条。我可以找到块以及将块放置在图形中的插入实体。但我的目标是阅读在 DXF 文件中构建块的行。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-05T10:03:39.110

我不认识 Kabeja，但这可能会对您有所帮助：

“插入”实体是对 DXF（块表）的块部分内的块定义的引用。因此，要查找块定义中的行，您需要阅读该块的定义。

[链接到 DXF 定义](http://www.autodesk.com/techpubs/autocad/acadr14/dxf/blocks_in_dxf_files_al_u05_c.htm)

# java - 如何为 Java 中的 HID 开发设置 OSX 10.7.5 环境 - Eclipse

> ID：13852244
> 
> 赞同：1
> 
> 时间：2012-12-13T03:00:22.040
> 
> 标签：java, hid

如何为 Java 中的 HID 开发设置 OSX 10.7.5 环境 - Eclipse

我正在尝试编写一个与 Teensy board (HID) 交互的小应用程序。我正在使用 Eclipse 在 Java 中工作。无论如何，过去几天我一直在试图弄清楚如何使用适当的“本机库”配置我的环境。我已经下载了 hidapi-0.7.0.zip [https://github.com/signal11/hidapi/downloads](https://github.com/signal11/hidapi/downloads) 以及来自[http://code.google.com/p/javahidapi/downloads/list](http://code.google.com/p/javahidapi/downloads/list)的文件（它们是“包装“到本地图书馆。

无论如何，在我的 Mac OS X Lion 10.7.5 MacBook 上安装这些东西时，我完全不喜欢。我已经阅读并重新阅读了稀疏文档，但无法弄清楚在哪里放置什么，或者在必要时如何“构建”东西等。

我一直在阅读有关如何构建库的内容，即 http://code.google.com/p/javahidapi/wiki/ 自述文件 我必须构建它们吗？我假设这是如果您想从源文件构建但它们确实包含 .jar。即使我知道如何构建它们，我会把结果放在哪里。

无论如何，希望有人可以为我指出一些方向来做到这一点。我已经搜索过它们，但没有找到任何东西。

# jquery - 在 GetElementByID 中使用变量

> ID：13852245
> 
> 赞同：0
> 
> 时间：2012-12-13T03:00:24.223
> 
> 标签：jquery, variables, toggle

我有一个场景，我正在构建一系列 DIVS，每个 DIVS 都有一个以语法“div1”、“div2”等分配的 ID……

div 看起来都很好，我可以看到他们的 ID 都被正确分配了......

我正在尝试使用以下代码来允许单击（传递 ID 的位置）来切换相应 div 的显示：

```
$("#page-wrap li a").click(function(id){
 var thisid = ('#'+$(this).attr('id').toString());
 alert(thisid);
 document.getElementById(thisid).hide();
} 
```

但错误控制台显示 getelementbyid 具有空值。

我错过了什么？我尝试将 thisid var 强制为字符串，但这也不起作用。

感谢任何人都可以为我阐明这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:08:45.757

你在混合使用 jQuery 和标准 DOM 方法吗？

像这样的东西应该可以代替：

鉴于标记：

```
<a href="#someDiv">Hide the div</a>
<div id="someDiv">DIV to be hidden</div>

$("a").click(function(e){
  e.preventDefault(); // prevents page reload
  $($(this).attr('href')).hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:07:56.043

您似乎将普通的 dom 调用与 jQuery 混合在一起。为了一致性，试试这个：

```
$("#page-wrap li a").click(function(id){
    var thisid = ('#'+$(this).attr('id'));
    alert(thisid);
    $(thisid).hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T03:10:14.327

`<div>`您的和`<a>`标签上不应有相同的 ID 。相反，您可以通过`<div>`锚点的数据属性传递您的 ID：

```
<div id="div2">this is div2</div>
<a href="#" data-id="div2">click here to hide div2</a> 
```

然后，单击处理程序将如下所示：

```
$('a').click(function() {
  // $(this).data('id') == "div2"
  $(document.getElementById($(this).data('id'))).hide();
  return false;
}); 
```

# macos - 通过 SSH 使用 Sublime Text 打开文件到 VM，错误

> ID：13852246
> 
> 赞同：5
> 
> 时间：2012-12-13T03:00:25.610
> 
> 标签：macos, ubuntu, ssh, virtual-machine, sublimetext2

我在安装了 Ubuntu Server 虚拟机的 Mac OSX 机器上进行开发工作，我主要通过从终端通过 SSH 连接到它来管理它。我正在尝试找到一种方法来使用 Mac 上的 Sublime Text 而不是终端中的 nano 或 vim 来编辑服务器上的文件。我已按照此出色指南“[将 Textmate 2s rmate 与 Sublime Text 2 一起使用](http://canadian-fury.com/2012/06/26/using-textmate-2-s-rmate-with-sublime-text-2/)”中包含的说明进行操作。

*   我已经在 Sublime Text 中安装了 rsub。
*   我已经在我的 Ubuntu 服务器上安装了 rmate。
*   我已经编辑了我的 ~/.ssh/config 文件。
*   我已将端口 52698 添加到服务器上的 iptables。

当我通过 SSH 连接到我的服务器并运行时

```
rmate .profile 
```

我得到错误

```
connect_to localhost port 52698: failed. 
```

[这个previous question](https://stackoverflow.com/questions/11818131/warning-remote-port-forwarding-failed-for-listen-port-52698)指的是一个类似的错误，但它似乎与打开多个SSH连接有关，我认为这不是我的情况。不过，我怎么能测试呢？

我想知道这是否与我的开发服务器是一个具有略微神秘的互联网设置的虚拟机这一事实有关 - 使用三个不同的适配器连接到主机的以太网和 WiFi 连接。SSH 上的反向隧道是否需要对这种设置进行不同的调整？

或者，对资源或参考资料的任何其他建议来进行此设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T03:09:50.827

1.  发出以下命令以检查端口是否在 VM 中打开：

    远程登录本地主机 52698

如果没有打开，则需要打开它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T01:41:09.390

在 VirtualBox > 设置 > 网络 > 适配器 2（NAT 适配器）> 高级中，我将带有 hostmachine:52698 的端口转发规则添加到 guestmachine:52698。这似乎已经解决了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-03T16:16:13.143

如果你想完全避免端口转发，你可以试试我一直在研究的东西，叫做“xeno”（[https://xeno.io](https://xeno.io)）。它与 rmate/rsub 非常相似，只是它不使用反向端口转发来启用同步。相反，它使用 Git 和 SSH 的混搭来启用其传输和同步。与 rmate/rsub 相比，这给它带来了许多优势——特别是您可以编辑整个文件夹层次结构。它对连接中断也非常强大，因此您甚至可以离线工作，并且一旦您重新在线，您在本地所做的编辑更改就会自动推送到远程。

它也是免费和开源的:)，我真的很想得到一些反馈。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-05T19:19:13.927

我不得不终止所有现有的 SSH 会话

```
pkill -o -u YOURUSERNAME sshd 
```

之后，它再次起作用。

# java - 如何防止子类继承超类中的静态方法

> ID：13852247
> 
> 赞同：1
> 
> 时间：2012-12-13T03:00:39.447
> 
> 标签：java, subclass, inheritance

考虑到一些安全问题，我不希望子类继承父类的静态方法，甚至不调用这个方法，我该怎么做？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T03:44:03.513

静态方法与实例方法的继承意义不同。如果您将静态方法声明为公共（或包私有），则无论子类中是否存在本地重新声明，都可以访问它。本地重新声明仅意味着子类必须限定方法的名称；例如

```
public class Parent {
    public static void foo() { ... }
}

public class Child {
    public static void foo() { ... }
    public static void main(String[] args) {
        foo();  // calls local override
        Parent.foo(); // calls original version.
} 
```

如果您不希望`Child`该类能够调用该`Parent.foo`方法，则需要将其声明为`private`（或者如果`Child`和`Parent`位于不同的包中，则可能是包私有。）

但即便如此，如果`Child`类有权使用反射，那么它可以很容易地使用它来调用类`private`中的方法`Parent`。因此，除非您对代码进行沙箱化，否则 Java 访问修饰符不是一种安全机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T03:02:59.903

如果您可以访问超类，您不只是将有问题的方法设为私有吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T03:07:47.210

由于静态方法基本上是可以存在于任何地方的浮动代码，因此将方法移动到另一个（实用程序）类

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T03:02:09.450

覆盖签名不做任何事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T04:06:34.227

1.  如果您希望您的方法只能由您的父类访问，您必须将您的方法设为私有
2.  如果该方法必须限制在包中的访问，则必须将其设为默认（无访问修饰符）例如：

    ```
     void hello(){
    } 
    ```

    即使子类无法在包外访问该方法（但请记住，同一包中的子类可以访问该方法）

希望这可以帮助 .....

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T06:31:40.310

如果您不希望您的子类继承超类的任何方法，请将超类中的方法设为**私有**。

例如

> 班级家长{
> 
> 私人无效 foo(){
> 
> }
> 
> }
> 
> 类子扩展父{
> 
> }

在这种情况下，由于可见性级别是私有的，因此子类甚至无法看到超类中名为 foo() 的方法的存在，因为它从未被继承。

# javascript - 如何为 angularjs 编写“double”和“ntimes”指令？

> ID：13852248
> 
> 赞同：14
> 
> 时间：2012-12-13T03:00:48.827
> 
> 标签：javascript, angularjs

我无法理解“ngRepeat”指令，因此我希望通过编写“double”指令然后使用“ntimes”指令扩展来了解 angularjs 的工作原理：所以

## '双倍的'

```
<double>
 <h1>Hello World</h1>
</double> 
```

将导致产生：

```
 <h1>Hello World</h1>
 <h1>Hello World</h1> 
```

## 'ntimes'

```
<ntimes repeat=10>
 <h1>Hello World</h1>
</ntimes> 
```

将导致产生：

```
 <h1>Hello World</h1> 
 .... 8 more times....
 <h1>Hello World</h1> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-14T05:18:58.823

```
<double>
 <h1>Hello World - 2</h1>
</double>

<ntimes repeat=10>
    <h1>Hello World - 10</h1>
    <h4>More text</h4>
</ntimes> 
```

下面的指令将删除`<double>, </double>, <ntimes ...>`and`</ntimes>`标签：

```
var app = angular.module('app', []);
app.directive('double', function() {
    return {
        restrict: 'E',
        compile: function(tElement, attrs) {
            var content = tElement.children();
            tElement.append(content.clone());
            tElement.replaceWith(tElement.children());
        }
    }
});
app.directive('ntimes', function() {
    return {
        restrict: 'E',
        compile: function(tElement, attrs) {
            var content = tElement.children();
            for (var i = 0; i < attrs.repeat - 1; i++) {
                tElement.append(content.clone());
            }
            tElement.replaceWith(tElement.children());
        }
    }
});​ 
```

[小提琴](http://jsfiddle.net/mrajcok/QkXcH/)

我使用了编译函数而不是链接函数，因为它似乎只需要模板 DOM 操作。

**更新：**我更喜欢 ntimes compile 函数的这个实现：

```
compile: function(tElement, attrs) {
    var content = tElement.children();
    var repeatedContent = content.clone();
    for (var i = 2; i <= attrs.repeat; i++) {
        repeatedContent.append(content.clone());
    }
    tElement.replaceWith(repeatedContent);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-13T15:24:37.647

该`ng-repeat`指令主要用于迭代列表/数组/集合（即`ng-repeat="item in list"`）上的项目，并且不仅仅是简单地克隆元素。请查看 angularjs [ng-repeat 指令文档](http://docs.angularjs.org/api/ng.directive:ngRepeat)。

如果您真的只想克隆元素，请尝试以下操作：http: [//jsfiddle.net/hp9d7/](http://jsfiddle.net/hp9d7/)

# javascript - JSON 解析向我显示了一些意外的字符错误

> ID：13852251
> 
> 赞同：2
> 
> 时间：2012-12-13T03:02:10.213
> 
> 标签：javascript, json

我想用 JavaScript 解析下面的 JSON，然后只想写一个特定的键类型。我怎样才能做到这一点？简单的 JSON.parse(output) 向我显示了意外的字符错误。

```
output=[{"id":"12","category":"Smartphone","sub_category":"Tablet","name":"Tab 3","current_price":"23000","sold":"9","previous_price":"25000","description":"","image":"galaxy_tab2.jpg"},{"id":"28","category":"Accessories","sub_category":"Ebook","name":"Ebook Acc 3","current_price":"5300","sold":"8","previous_price":null,"description":"","image":"sony.jpg"},{"id":"27","category":"Accessories","sub_category":"ipad","name":"ipad Acc 4","current_price":"1200","sold":"6","previous_price":null,"description":"","image":"scott_ipad.jpg"},{"id":"3","category":"Computer","sub_category":"Laptop","name":"Laptop 3","current_price":"999","sold":"5","previous_price":"1400","description":"","image":"macbook.jpg"},{"id":"20","category":"Smartphone","sub_category":"ipad","name":"ipad 4","current_price":"29000","sold":"5","previous_price":null,"description":"","image":"ipad3.jpg"},{"id":"6","category":"Computer","sub_category":"Laptop","name":"Laptop 6","current_price":"80000","sold":"4","previous_price":"70000","description":"","image":"dell-latitude-e6430s.jpg"},{"id":"8","category":"Computer","sub_category":"Desktop","name":"Desktop 2","current_price":"28000","sold":"4","previous_price":null,"description":"","image":"compaq_pc.jpg"},{"id":"13","category":"Computer","sub_category":"Desktop","name":"Desktop 3","current_price":"29000","sold":"3","previous_price":null,"description":"","image":"gd_d4300.jpg"},{"id":"23","category":"Accessories","sub_category":"PDA","name":"PDA Acc","current_price":"2500","sold":"2","previous_price":"3000","description":"","image":"pda.jpg"},{"id":"24","category":"Accessories","sub_category":"ipad","name":"ipad Acc 3","current_price":"5600","sold":"2","previous_price":null,"description":"","image":"pen_ipad.jpg"},{"id":"1","category":"Computer","sub_category":"Laptop","name":"Laptop 1","current_price":"1199","sold":"0","previous_price":"1400","description":"","image":"macbookpro.jpg"},{"id":"2","category":"Computer","sub_category":"Laptop","name":"Laptop 2","current_price":"1499","sold":"0","previous_price":null,"description":"","image":"macbookair.jpg"},{"id":"4","category":"Computer","sub_category":"Laptop","name":"Laptop 4","current_price":"1000","sold":"0","previous_price":null,"description":"","image":"dell_vostro.jpg"},{"id":"5","category":"Computer","sub_category":"Laptop","name":"Laptop 5","current_price":"40000","sold":"0","previous_price":null,"description":"","image":"vostro_2420.jpg"},{"id":"7","category":"Computer","sub_category":"Desktop","name":"Desktop 1","current_price":"34000","sold":"0","previous_price":null,"description":"","image":"Acer_AX1400.jpg"},{"id":"9","category":"Accessories","sub_category":"Ebook","name":"Ebook Acc 1","current_price":"4000","sold":"0","previous_price":null,"description":"","image":"dragon.jpg"},{"id":"10","category":"Smartphone","sub_category":"Tablet","name":"Tab 1","current_price":"13000","sold":"0","previous_price":null,"description":"","image":"galaxy_tab.jpg"},{"id":"11","category":"Smartphone","sub_category":"Tablet","name":"Tab 2","current_price":"18000","sold":"0","previous_price":null,"description":"","image":"galaxy_tab_2-10.1.jpg"},{"id":"14","category":"Smartphone","sub_category":"ipad","name":"ipad 1","current_price":"20000","sold":"0","previous_price":null,"description":"","image":"hero.jpg"},{"id":"15","category":"Computer","sub_category":"Desktop","name":"Desktop 4","current_price":"25000","sold":"0","previous_price":null,"description":"","image":"hp_desktop.jpg"},{"id":"16","category":"Accessories","sub_category":"Ebook","name":"Ebook Acc 2","current_price":"3000","sold":"0","previous_price":null,"description":"","image":"IES1.jpg"},{"id":"17","category":"Accessories","sub_category":"ipad","name":"ipad Acc 2","current_price":"5000","sold":"0","previous_price":null,"description":"","image":"iluv-ipad.jpg"},{"id":"18","category":"Smartphone","sub_category":"ipad","name":"ipad 2","current_price":"30000","sold":"0","previous_price":null,"description":"","image":"ipad_mini.jpg"},{"id":"19","category":"Smartphone","sub_category":"ipad","name":"ipad 3","current_price":"25000","sold":"0","previous_price":null,"description":"","image":"ipad2.jpg"},{"id":"21","category":"Computer","sub_category":"Desktop","name":"Desktop 5","current_price":"36000","sold":"0","previous_price":null,"description":"","image":"lenovo_k210.jpg"},{"id":"22","category":"Computer","sub_category":"Desktop","name":"Desktop 6","current_price":"28500","sold":"0","previous_price":null,"description":"","image":"Lm_i501s.jpg"},{"id":"25","category":"Smartphone","sub_category":"Tablet","name":"Tab 4","current_price":"21000","sold":"0","previous_price":null,"description":"","image":"samsung_tab.jpg"},{"id":"26","category":"Smartphone","sub_category":"Tablet","name":"Tab 5","current_price":"23900","sold":"0","previous_price":null,"description":"","image":"samsung_tablet.jpg"},{"id":"29","category":"Accessories","sub_category":"Tablet","name":"Tab Acc 1","current_price":"4300","sold":"0","previous_price":null,"description":"","image":"tablet_kit.jpg"},{"id":"30","category":"Accessories","sub_category":"","name":"Tab Acc 2","current_price":"3600","sold":"0","previous_price":null,"description":"","image":"toshiba_tab.jpg"},{"id":"31","category":"Computer","sub_category":"Laptop","name":"Laptop 6","current_price":"42000","sold":"0","previous_price":null,"description":"","image":"vostro_2420.jpg"}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:05:45.697

无需调用`JSON.parse()`您拥有的数组`output`，因为它*不是*字符串。它只是一个对象数组，您可以循环访问您想要的密钥。

```
// This is *already* a valid JavaScript array of objects. There's no need to treat it like a JSON string.
var output = [{"id":"12","category":"Smartphone","sub_category":"Tablet","name":"Tab 3","current_price":"23000","sold":"9","previous_price":"25000","description":"","image":"galaxy_tab2.jpg"},{"id":"31","category":"Computer","sub_category":"Laptop","name":"Laptop 6","current_price":"42000","sold":"0","previous_price":null,"description":"","image":"vostro_2420.jpg"}]

// Just loop over the array and access the object property you want
// For example:
for (var i = 0; i < output.length; i++) {
  // Log the category of each element...
  console.log(output[i].category);
  // Or... output[i].description, output[i].image, etc...;
}

// Outputs something like:
Smartphone 
Accessories
Computer
Smartphone
Computer
Accessories
Computer
Accessories
Smartphone
Computer
Accessories
Smartphone
Computer
Smartphone
Accessories
Computer 
```

# objective-c - 我的代码中的 Objective C 错误

> ID：13852255
> 
> 赞同：1
> 
> 时间：2012-12-13T03:02:38.043
> 
> 标签：objective-c, xcode

我已经在 Xcode 的终端应用程序中创建了它，但我知道如何纠正错误。对不起，我是一个完全的初学者。有错误在

```
void addToTotal (float cost, int quantity) 
```

有人可以帮助我编写代码吗？

```
//
//  main.m
//  ShoppingList

#import <Foundation/Foundation.h>
#include <stdio.h>  //? not sure if this is correct 

//Gobal variables visable from any function

//------VARIABLES
int totalItems = 0;
float totalCost = 0.0;
float salesTax = 0.0925;

//decalre the functions going to be used
// we don't need to declare main() because it's built-in

//------FUNCTIONS
void addToTotal (float cost, int quantity);
float costWithSalesTax (float price);

//------MAIN PROGRAM

int main(int argc, const char * argv[])
{

   @autoreleasepool {

      float budget = 10000.00;

      // make a new line
      printf("\n");

      //set the price for each item
      float laptopPrice = 1799.00;
      float monitorPrice = 499.80;
      float phonePrice = 199.00;

      addToTotal(laptopPrice, 2);
      addToTotal(monitorPrice, 1);
      addToTotal(phonePrice, 4);

      //display a line then the final total

      printf("----------------------\n");
      printf("TOTAL for %i items: $%5.2f\n\n", totalItems, totalCost);

      if(totalCost < budget)
      {
         printf("You came in under your budget!");
      }
      else
      {
         printf("Your're over your budget. Time to talk to finance.\n\n");
      }
   }

// There's an error in here asking me to put ; after this method declaration.
   void addToTotal (float cost, int quantity)
   {

      printf(" Adding %i items of the cost $%5.2f\n", quantity, cost);

      // find the cost for this item by multiple costs by quantity.
      // and get the real costs by applying sales tax.
      float calculatedCost = cost * quantity;
      float realCost = costWithSalesTax(calculatedCost);

      // and this amount to the total, and increase the total number
      // of items purchased

      totalCost = totalCost + realCost;
      totalItems = totalItems + quantity;

      printf("Subtotal for %i items: $%5.2f\n", totalItems, totalCost);
   }
   // There's an error in here asking me to put ; after this method declaration.
   float costWithSalesTax (float price)
   {
      // remember sales tax is a global variable

      float taxAmount = price * salesTax;
      float subTotal = price + taxAmount;

      return subTotal;

   }

   }
    return 0;  // also this has the error "expected identifier or (" error
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:11:41.160

您正在尝试*在*. `addToTotal()`_ 而是将它们移到收盘价下方。`costWithSalesTax()`*`main()``}`*

 *`}`您的代码末尾还有一个额外的内容。具体来说，在`return 0;`. 去掉它。*

# c# - 允许脚本启动的窗口没有大小或位置限制

> ID：13852256
> 
> 赞同：0
> 
> 时间：2012-12-13T03:02:46.560
> 
> 标签：c#, javascript, jquery, asp.net

有没有办法通过脚本/Csharp 启用 Internet Explorer IE 属性“允许脚本启动的窗口没有大小或位置限制”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:21:24.980

可能没有办法做到这一点。

这是一项浏览器功能，大多数浏览器功能无法在脚本中打开/关闭。

* * *

顺便说一句，能够从脚本中禁用安全功能对您来说毫无意义。此功能试图保护用户免受恶意脚本的侵害，如果恶意脚本可以禁用保护，它将毫无用处。

# xcode - Xcode 中的 .mp3 和 .wav 文件

> ID：13852266
> 
> 赞同：1
> 
> 时间：2012-12-13T03:03:58.500
> 
> 标签：xcode, mp3, audio

我在 xcode 中进行了以下设置，但没有声音出来。我之前有 2 个 .wav 文件可以使用，但其他 .mp3 和 .wav 文件无法使用，我想知道它是编写的代码还是声音文件？文件的比特率或大小有什么限制吗？请参阅下面的代码。我还将声音文件添加到项目中。

```
**ViewController.h** 
import UIKit/UIKit.h

import AVFoundation/AVFoundation.h

import AudioToolbox/AudioToolbox.h

@interface ViewController :UIViewController 

-(IBAction)AntlerRabbit;

@end

**ViewController.m**

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

-(IBAction)AntlerRabbit {

CFBundleRef mainBundle = CFBundleGetMainBundle();

CFURLRef soundFileURLRef;

soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"AntlerRabbit",         CFSTR("aiff"), NULL);

UInt32 soundID;

AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);

AudioServicesPlaySystemSound(soundID);

}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}

@end 
```

然后我转到 MainStoryboard.storyboard 并放置一个按钮并将其链接到“AntlerRabbit”，但模拟器中没有任何反应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:35:56.300

答案在这里：

[在 Xcode 中使用音频](https://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/MultimediaPG/UsingAudio/UsingAudio.html)

模拟器没有声音播放的原因是因为当你使用时，

```
AudioServicesPlaySystemSound 
```

声音最长不得超过 30 秒。我使用的声音略高于它。如果有人知道如何使用超过 30 秒的声音文件，请发布代码:) 将不胜感激。

# ruby-on-rails - Rails 中基于外部因素对用户的实时授权

> ID：13852275
> 
> 赞同：0
> 
> 时间：2012-12-13T03:05:16.300
> 
> 标签：ruby-on-rails

我需要实现一种方法，可以“按秒”向用户授予某些特权，并且不需要重新加载页面，具体取决于他是否仍被第三方 api 激活。

我不能仅仅依靠javascript ajax，因为它很容易克服。

Rails 上是否已经有任何解决方案来处理这样的授权？我认为它类似于 DRM 或任何类型的 PPM 应用程序。

# c++ - 如何接受字符串或双精度值作为输入？C++

> ID：13852276
> 
> 赞同：0
> 
> 时间：2012-12-13T03:05:16.503
> 
> 标签：c++, string, function, math, double

好的。所以我不久前写了一个公式计算器，它有很多不同的功能。我今天打开它，发现每次我访问某个功能并完成该功能时，程序都会返回主菜单。当然这很好，我对其进行了编程来执行此操作，但是当我访问计算器功能（简单数学）并完成一个方程式时，我很生气，我不能马上做另一个。我希望能够停留在某个功能中，直到我按下“q”，*然后*它会返回主菜单。

真正的问题是我的函数只接受双精度，所以如果我输入一个字符串（'q'），程序就会崩溃。我需要一种让用户输入字符串*或*双精度的方法，以便我可以检查它是否是“q”并且用户想要退出。

我想最终用我的所有函数来做到这一点，但这里只是“calc”函数（最简单的一个）：

```
 int calculation()
{
  double x=0, y=0, answer=0;
  char o;//operator variable
  cout<<"calculation: ";
  cin>>x>>o>>y; //I just don't know what to use here so that the user can enter a  
  cin.ignore(); //double or a string.
  if (o=='+') answer=x+y;
  else if (o=='-') answer=x-y;
  else if (o=='*') answer=x*y;
  else if (o=='/') answer=x/y;
  else if (o=='^') answer= pow(x, y);
  else if (o=='%') {
        answer= (100/x)*y; 
        cout<<"answer= "<<answer<<"%";
  }
  if (o!='%') cout<<"answer= "<<answer;
  cin.get();
  return 0;
} 
```

我需要该功能不断重复，直到用户输入一个“q”。对不起所有的话。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:39:01.763

分两步解决：

1.  编写一个接受任何字符串并且仅在您输入“q”时退出的循环。
2.  将该字符串传递给一个新函数，该函数仅在字符串可以分解为两个操作数和一个运算符时才执行计算（您可以为此使用 stringstream）。

之后，您可以根据需要自定义功能。一种可能性是将运算符的字符串映射到接受两个操作数并打印结果的回调。然后，您将该映射传递给您的计算函数，以便您支持的运算符数量可以轻松增加。

这是一个非常粗略的示例，仅适用于加法，但演示了这个概念。

```
#include <iostream>
#include <cmath>
#include <sstream>
#include <map>
using namespace std;

typedef double (*p_fn)(double,double);

double add(double x, double y)
{
    return x + y;
}

typedef map<string,p_fn> operators;

double execute( const operators &op, double x, double y, const string& o )
{
    operators::const_iterator i = op.find(o);
    if( i != op.end())
    {
        p_fn f = i->second;
        double const result = f(x,y);
        return result;
    }
    cout<<"unknown operator\n";
    return 0;
}

bool get_data( double& x, double&y, string& o )
{
    string s1,s2,s3;
    cin>>s1;
    if(s1=="q")
        return false;
    cin>>s2>>s3;
    stringstream sstr;
    sstr<<s1<<" "<<s2<<" "<<s3;
    sstr>>x>>o>>y;
    stringstream sstr2;
    sstr2<<x<<" "<<o<<" "<<y;
    return sstr.str() == sstr2.str();
}

double calculation2( const operators& op )
{
    double x,y;
    string o;
    while(get_data(x,y,o))
        cout<<execute(op, x, y, o)<<"\n";
    return 0;
}

int main(int argc, char* argv[])
{
    operators o;
    o["+"]=add;
    calculation2(o);
    return 0;
} 
```

此示例使用指向函数的指针将字符串“+”映射到函数 add(x,y)。它还使用字符串流来执行非常基本的输入验证。

# python - 对 python 类使用“get 函数”有什么好处？

> ID：13852279
> 
> 赞同：9
> 
> 时间：2012-12-13T03:05:31.057
> 
> 标签：python, class, getter-setter

例如，在下面的代码中，getName 函数有什么好处？

```
class Node(object):
    def __init__(self, name):
        self.name = str(name)
    def getName(self):
        return self.name
    def __str__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-13T03:14:52.683

没有任何好处。从其他语言（例如 Java）开始使用 Python 的人有时会这样做，因为他们已经习惯了。在 Python 中，创建这些类型的 getter 和 setter 是没有意义的，它们除了直接获取和设置底层变量之外什么都不做。 如果您以后需要做一些比获取/设置值更复杂的事情，[属性允许您透明地交换逻辑。](http://docs.python.org/2/library/functions.html#property)

使用 getter/setter 可能有好处，但在 Python 中，没有真正的理由使用琐碎的 getter/setter 而不是直接获取/设置属性。我能想到的唯一原因是，如果您必须保持与现有 API 的兼容性，该 API 需要一组可用的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T03:27:31.787

不要使用getter，直接访问类属性即可。通常 getter 用于访问私有/受保护的属性，但在 python 中没有这样的东西。使用 getter 的另一个原因是，您可以在返回值之前做一些工作，在您的情况下，您不会，但将来可能会改变，不用担心，到时候开始使用`property`装饰器

```
@property
def name(self):
    return self._name 
```

你仍然会像这样访问它，就像`myObject.name`直接访问它一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T03:17:35.550

我希望生产代码使用`@property`. 但是既然你问了，我会扔东西在那里。

也许程序员会创建子类，`Node`并认为重写它更容易（或至少更明确）`getName`来做一些特殊的工作。只是一个想法！

但总的来说，就像其他人所说的那样，这不是你通常会看到的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T03:14:53.563

没有。它们在 Python 中是不必要的，并且被广泛推荐反对。

# javascript - 一个用于乘法 div 的 Jquery 点击功能

> ID：13852284
> 
> 赞同：3
> 
> 时间：2012-12-13T03:06:23.263
> 
> 标签：javascript, jquery, html, css

尝试对我的所有 div 框使用一键式功能。做了一些研究，但仍然无法使其正常工作。我是编程新手，所以我可能会以错误的方式解决这个问题，这是我正在尝试做的一个例子：

```
<div id="test_1">
  <p class="example">display this text 1</p>
</div>

<div id="test_2">
  <p class="example">display this text 2</p>
</div>

<div id="test_3">
  <p class="example">display this text 3</p>
</div> 
```

* * *

```
$('div[id^="test"]').each(function(){
    $(this).click(function(){
        test = $(this).parent().find('.example').attr("p")
        alert(test)
    })
}) 
```

我认为这会起作用，但如果我点击`div`测试`2`或节目`3`而不是或。`alert``"display this text 1"``"display this text 2"``"...3"`

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T03:11:06.720

不需要`each`。

绑定`p`每个点击`div`

```
$('div[id^="test"] p').click(function() {
    alert($(this).text());
}); 
```

[**演示**](http://jsfiddle.net/qS4q7/)

绑定点击`div`s。

```
$('div[id^="test"]').click(function() {
    alert($('p', this).text());
}); 
```

`$('p', this).text()`是一样的`$(this).find('p').text()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:08:37.003

删除`.parent()`. 否则，您将获得所有嵌套`.example`元素，并检索`.attr('p')`第一个元素。

```
$('div[id^="test"]').each(function(){
    $(this).click(function(){
        var test = $(this).find('.example').attr("p")
        alert(test)
    })
}) 
```

或像这样缩短：

```
$('div[id^="test"]').click(function(){
    var test = $(this).find('.example').attr("p")
    alert(test)
}) 
```

* * *

您的问题表明您得到了正确的文本结果，尽管您的代码显示`.attr("p")`，但事实并非如此。我将其保留为保持代码示例相同的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T03:16:52.970

我会将 div 更改为一个类，然后像这样选择它们：

```
<div class="clickable">
    <p>This is the first one</p>
</div>
<div class="clickable">
    <p>This is the second one</p>
</div>
<div class="clickable">
    <p>This is the third one</p>
</div> 
```

和JS：

```
$(function() {
    $('.clickable').on('click',function() {
        alert($(this).children(':first').text());
    });
});​ 
```

这是一个工作示例：http: [//jsfiddle.net/CX555/1/](http://jsfiddle.net/CX555/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T03:33:31.467

一键点击所有 div 的真正（有效）方法是使用事件委托：

```
<div id="wrap">
<div id="test_1">
  <p class="example">display this text 1</p>
</div>
<div id="test_2">
  <p class="example">display this text 2</p>
</div>
<div id="test_3">
  <p class="example">display this text 3</p>
</div>
</div> 
```

脚本：

```
$('#wrap').on('click','div[id^="test"]',function(){
    test = $(this).find('.example').text();
    alert(test);
}); 
```

演示：http: [//jsfiddle.net/hDX8C/](http://jsfiddle.net/hDX8C/)

单击附加到父级（“wrap”），并检测实际单击了哪个子级。

# google-gauges - 关于 Google API Gauge 的担忧

> ID：13852287
> 
> 赞同：0
> 
> 时间：2012-12-13T03:06:38.157
> 
> 标签：google-gauges

在我继续我计划做的事情之前，我想首先知道是否可以根据我想要的方式更改 Google Gauges 仪表的图像......我的意思是 api 中仪表的显示/图像应为由我的代码操纵/设置。那可能吗？我还在谷歌上搜索它，到目前为止还没有找到，所以我想在这里问。

我感谢任何帮助。谢谢你。

下面是我从 google api 网站获得的示例代码

```
<html>
  <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>
      google.load('visualization', '1', {packages:['gauge']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          ['Memory', 80],
          ['CPU', 55],
          ['Network', 68]
        ]);

        var options = {
          width: 400, height: 120,
          redFrom: 90, redTo: 100,
          yellowFrom:75, yellowTo: 90,
          minorTicks: 5
        };

        var chart = new google.visualization.Gauge(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id='chart_div'></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T19:32:01.003

听起来您正在尝试动态更改仪表的值（即指针指向的位置），而这正是仪表能够做到的。

首先，你需要决定你想要多少个仪表。您在制作提供给仪表的数据表时定义它们：

```
var data = google.visualization.arrayToDataTable([
   ['Label', 'Value'],
   ['Gauge1', 80],
   ['#2', 55],
   ['Third One', 68]
]); 
```

重要的是要意识到这会生成一个“DataTable”对象，它有点像电子表格。它是三行两列（第一个数组“['Label', 'Value']”定义了列的名称）。每行包含第一个仪表的标签和值（它将被标记为“Gauge1”，并且将从值 80 开始），下一行是第二个仪表的标签和值，等等。

如果您想*更改*仪表的值，则需要更改“数据”对象中的数字（使用 .setValue(row, column, value)，然后告诉仪表重绘。例如，

data.setValue(0, 1, 30);

这会将第 0 行、第 1 列设置为 30。第 0 行对应于第一个仪表。Column-1 对应于它的值（我们不想更新它的标签......那将是 column-0）。因此，要更新所有三个仪表的值，我们将使用如下内容：

```
data.setValue(0, 1, 30); // Set "Gauge1" to 30
data.setValue(1, 1, 45); // Set "#2" to 45
data.setValue(2, 1, 12); // Set "Third One" to 12
chart.draw(data, options); 
```

我总是将数据对象设为全局，然后我可以更改值，尽管我猜你可以完全重新生成数据对象，每次都使用 arrayToDataTable()。

# wcf - WebClient - ServiceSecurityContext.Current.WindowsIdentity = null

> ID：13852295
> 
> 赞同：4
> 
> 时间：2012-12-13T03:07:22.153
> 
> 标签：wcf, rest, authentication, webclient

我在 Windows 2008（IIS 7.5）机器上有一个 WCF 服务（访问数据库），通过 WebClient（通过 REST/webHttpBinding 使用 GET 调用）从 Excel（VSTO - Excel 客户端驻留在内部网络上）调用。

我想将用户的凭据传递给 WCF 服务 - 然后我希望服务中的方法以登录到启动 Excel 的工作站的人的身份访问数据库，但是我得到的是 401（未经授权）。

在我拥有的客户端上（注意“基础”是指我的类继承的 WebClient 类）：-

```
 base.Credentials = CredentialCache.DefaultCredentials;
        base.OpenReadCompleted += new OpenReadCompletedEventHandler(ReadJsonStringAsyncComplete);
        base.OpenReadAsync(new Uri(address)); 
```

在我拥有的服务中：-

```
 [OperationContract]
    [WebInvoke(Method = "GET", UriTemplate = "/GetSomeData", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    SomeDataClass GetSomeData(); 
```

服务配置：-

```
 <service name="zzzz.Service.xxxx.xxxx" behaviorConfiguration="DataExtractBehavior">
      <endpoint address="" binding="webHttpBinding" bindingConfiguration="DataExtractBinding" behaviorConfiguration="MyEndpointBehavior" contract="zzzz.Service.xxxx.Ixxxx">
    </endpoint>
  </service>
  ...
  <serviceBehaviors>
    <behavior name="DataExtractBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <etwTracking profileName="EndToEndMonitoring Tracking Profile" />
    </behavior>
  </serviceBehaviors>
  ...
  <webHttpBinding>
    <binding name="DataExtractBinding">
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Windows" ></transport>
      </security>
    </binding>
  </webHttpBinding>
</bindings>
... 
```

ConnectionString 包括`"integrated security=SSPI"`

**笔记：**

*   当我调用一个只返回一个字符串的虚拟方法（没有数据库调用）时，我得到了一个成功的响应（没有问题）

*   据我所知（通过跟踪），在 WCF 服务内部，它在数据库调用上失败了（可能是因为它无法登录/使用数据库进行身份验证）

*   同样在 WCF 方法中，ServiceSecurityContext.Current.WindowsIdentity 似乎为空

*   当服务托管在我的工作站上时，我可以访问服务中的方法（连接到数据库的本地实例）：当我部署到我没有相同权限的开发机器时出现问题

*   我已经尝试过 NetworkCredentials（默认和硬编码的 userIs/password/domain）

*   我启用了 Windows 身份验证和 ASP.NET 身份验证（我仅尝试使用 Anon/ASP.NET/nothing-else 进行 Windows 身份验证，但结果不一 - 从未成功，只是返回代码不同）

*   模拟当前未设置，但我已尝试将其设置为 true（收到 500）

有谁知道如何在上述情况下成功发送用户的凭据（从而解决 HTTP 401 问题）。

问候
特拉维斯

# asp.net - ASPxGridView1.Selection 总是 = 0 并且 ASPxGridView1.GetSelectedFieldValues 不起作用

> ID：13852301
> 
> 赞同：0
> 
> 时间：2012-12-13T03:08:16.637
> 
> 标签：asp.net, gridview, devexpress, aspxgridview

只是我试图从 devexpress gridview 中获取选定的行，但它对我来说从来没有用过，我尝试过客户端和自定义回调，并尝试过服务器端，但它没有用，花了 10 个小时搜索并尝试了我的每一个解决方案得到但对我没有任何帮助，有人可以给我一个提示，我错过了什么？，这是代码：

默认.aspx：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
<script type="text/javascript">
    </script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <div>

        <dx:ASPxGridView ID="ASPxGridView1" ClientInstanceName="ASPxGridView1"  KeyFieldName="ID" AutoGenerateColumns="False" runat="server">
            <Columns>
                <dx:GridViewCommandColumn ShowSelectCheckbox="True" VisibleIndex="0" 
                    Caption="Select" Name="Select">
                </dx:GridViewCommandColumn>
                <dx:GridViewDataTextColumn Caption="ID" FieldName="pag_id_pk" Name="ID" 
                    VisibleIndex="1">
                </dx:GridViewDataTextColumn>
                <dx:GridViewDataTextColumn Caption="Name" FieldName="pag_name" Name="Name" 
                    VisibleIndex="2">
                </dx:GridViewDataTextColumn>
                <dx:GridViewDataTextColumn Caption="Title" FieldName="pag_title" Name="Title" 
                    VisibleIndex="3">
                </dx:GridViewDataTextColumn>
            </Columns>
        </dx:ASPxGridView>
        <dx:ASPxButton ID="ASPxButton1" runat="server" AutoPostBack="False" Text="Get Values" UseSubmitBehavior="False" onclick="ASPxButton1_Click" />
    </div>
</asp:Content> 
```

默认.cs：

```
public partial class _Default : System.Web.UI.Page
{
    DataTable table = null;
    protected void Page_Init(object sender, EventArgs e)
    {
        if (!IsPostBack && !IsCallback)
        {
            string connectionString = ...
            con.Open();
            SqlDataReader rd;
            SqlCommand cmd = new SqlCommand("SELECT * FROM [Pages]", con);
            rd = cmd.ExecuteReader();

            DataTable dt = new DataTable();
            dt.Load(rd);

            ASPxGridView1.DataSource = dt;

            Session["dt"] = (DataTable)dt;
            ASPxGridView1.DataBind();
            rd.Close();
            con.Close();
        }
    }
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    protected void ASPxButton1_Click(object sender, EventArgs e)
    {
        List<object> indexes = new List<object>();
        for (int i = 0; i < ASPxGridView1.VisibleRowCount; i++)
        {
            if (ASPxGridView1.Selection.IsRowSelected(i))
            {
                indexes.Add(ASPxGridView1.GetRowValues(i, ASPxGridView1.KeyFieldName));
            }
        }

        foreach (var selectedKey in ASPxGridView1.GetSelectedFieldValues(ASPxGridView1.KeyFieldName))
        {
            if (!indexes.Contains(selectedKey))
                ASPxGridView1.Selection.UnselectRowByKey(selectedKey);
        }
    } 
```

提前致谢...

更新：当我使用“asp：SqlDataSource”时它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:06:09.930

您是否尝试在回发/回调期间进行数据绑定？我认为您的网格不知道它在您的按钮单击事件中有哪些行。

# php - Instagram 获取最近的标签

> ID：13852302
> 
> 赞同：0
> 
> 时间：2012-12-13T03:08:17.283
> 
> 标签：php, instagram

我如何获得某个主题标签的所有图片。Get Recent Tags API 将返回 16 个最近的标签并为您提供下一个标签 ID，是否可以在一次 API 调用中获取所有标签而不是仅获取 16 个标签？它与最小/最大标签 id 有关吗？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T22:45:59.390

instagram API 一次最多返回 32*。

要获得所有这些，您需要进行多次 API 调用并使用 min_id 和 max_id 来遍历它们。

*如果您设置 &count=X，您一次可以起床 32 个。否则你得到20。

# eclipse - Hibernate 和 Glassfish：类未映射

> ID：13852304
> 
> 赞同：1
> 
> 时间：2012-12-13T03:08:30.083
> 
> 标签：eclipse, hibernate, glassfish, mapping

首先我很抱歉：

*   对于我糟糕的英语：我是法语，所以我的词汇量可能有限......
*   如果我的问题已经提前解决了。我搜索了很多主题，但找不到我的答案。

我是 EJB 和 Hibernate 的新手，我正在尝试运行一个基本程序，该程序在某些时候使用 Hibernate 查询来检查我的数据库中是否存在条目。我将它从 Eclipse（Juno）“热部署”到我的 GlassFish 域（Glassfish V3），我的数据库是 5.5.28 MySQL 服务器。

我的问题是：当我使用 Query.creatyQuery 方法获得我想要的结果时，我得到 org.hibernate.hql.internal.ast.QuerySyntaxException: class is not mapped。

问题是......它被映射了。我正在使用“注释映射”方法......所以不涉及 Hibernate hbm.xml 映射文件。我在本地 Java 应用程序中对其进行了测试，在我的查询中使用了完全相同的语法，它给了我正确的结果。我假设我在部署时忘记了一些东西，但我真的不知道是什么......这是我测试的选项/我假设的事实：

*   如果在查询过程中发生异常，则意味着找到并正确读取了我的 hibernate.cfg.xml 文件（所以我认为我将 hibernate 所需的库放在 Glassfish 的 lib 目录中，以及我的 JDBC司机）。

*   我尝试使用 .class.getName() 来检查我是否在查询中使用了好的类名（我知道这是必须在查询中使用的类名，而不是我数据库中的对应表） . 它给了我期望的类名，并没有解决我的问题。

现在我的代码：

Login.java（包会话）

```
package session;

import javax.ejb.LocalBean;
import javax.ejb.Stateless;

import org.hibernate.Query;
import org.hibernate.Session;

import entity.*;

@Stateless
@LocalBean
public class Login {

    public Login() {
    }

    public boolean confirmerLogin(String pseudo, String mdp){
        Session s = HibernateUtils.getSession();    
        Query q = s.createQuery("From Joueur where pseudo ='"+pseudo+"'");
        if(q.list().size()>=1)
        return true;
        else
        return false;
    }

} 
```

ConfirmerLogin() 方法返回真或假参数是否在我的数据库中找到。

Joueur.java（包实体）

```
package entity;

import java.io.Serializable;
import javax.persistence.*;

@Entity
public class Joueur implements Serializable {
private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private int idJoueur;
private String mdp;
private String pseudo;

public Joueur() {
}

public int getIdJoueur() {
    return this.idJoueur;
}

public void setIdJoueur(int idJoueur) {
    this.idJoueur = idJoueur;
}

public String getMdp() {
    return this.mdp;
}

public void setMdp(String mdp) {
    this.mdp = mdp;
}

public String getPseudo() {
    return this.pseudo;
}

public void setPseudo(String pseudo) {
    this.pseudo = pseudo;
}

} 
```

然后，Hibernate.cfg.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.password">********</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/bgwpf</property>
    <property name="hibernate.connection.username">root</property>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLInnoDBDialect</property>
    <mapping class="entity.Joueur"/>
</session-factory>
</hibernate-configuration> 
```

最后是例外：

```
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
INFO: HHH000412: Hibernate Core {4.1.8.Final}
INFO: HHH000206: hibernate.properties not found
INFO: HHH000021: Bytecode provider name : javassist
INFO: HHH000043: Configuring from resource: hibernate.cfg.xml
INFO: HHH000040: Configuration resource: hibernate.cfg.xml
WARN: HHH000223: Recognized obsolete hibernate namespace http://hibernate.sourceforge.net/. Use namespace http://www.hibernate.org/dtd/ instead. Refer to Hibernate 3.6 Migration Guide!
INFO: HHH000041: Configured SessionFactory: null
INFO: HHH000402: Using Hibernate built-in connection pool (not for production use!)
INFO: HHH000115: Hibernate connection pool size: 20
INFO: HHH000006: Autocommit mode: false
INFO: HHH000401: using driver [com.mysql.jdbc.Driver] at URL [jdbc:mysql://localhost:3306/bgwpf]
INFO: HHH000046: Connection properties: {user=root, password=****}

INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLInnoDBDialect
INFO: HHH000399: Using default transaction strategy (direct JDBC transactions)
INFO: HHH000397: Using ASTQueryTranslatorFactory

    WARNING: A system exception occurred during an invocation on EJB Login method public boolean session.Login.confirmerLogin(java.lang.String,java.lang.String)
javax.ejb.EJBException
at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5119)
at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5017)
at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4805)
at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2004)
at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1955)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:198)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:84)
at $Proxy98.confirmerLogin(Unknown Source)
at session.__EJB31_Generated__Login__Intf____Bean__.confirmerLogin(Unknown Source)
at ValiderLogin.doGet(ValiderLogin.java:26)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1523)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:188)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:641)
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:97)
at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:85)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:185)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:325)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:226)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:165)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:791)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:693)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:954)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:170)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:135)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:102)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:88)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:76)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:53)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:57)
at com.sun.grizzly.ContextTask.run(ContextTask.java:69)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:309)
at java.lang.Thread.run(Thread.java:722)

Caused by: org.hibernate.hql.internal.ast.QuerySyntaxException: Joueur is not mapped [From Joueur where pseudo ='']
at org.hibernate.hql.internal.ast.util.SessionFactoryHelper.requireClassPersister(SessionFactoryHelper.java:180)
at org.hibernate.hql.internal.ast.tree.FromElementFactory.addFromElement(FromElementFactory.java:110)
at org.hibernate.hql.internal.ast.tree.FromClause.addFromElement(FromClause.java:93)
at org.hibernate.hql.internal.ast.HqlSqlWalker.createFromElement(HqlSqlWalker.java:324)
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromElement(HqlSqlBaseWalker.java:3291)
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromElementList(HqlSqlBaseWalker.java:3180)
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromClause(HqlSqlBaseWalker.java:706)
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:562)
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:299)
at org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:247)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:248)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:183)
at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:136)
at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:105)
at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:80)
at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:168)
at org.hibernate.internal.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:221)
at org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:199)
at org.hibernate.internal.SessionImpl.createQuery(SessionImpl.java:1735)
at session.Login.confirmerLogin(Login.java:22)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1056)
at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1128)
at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5292)
at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:615)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:797)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:567)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:157)
at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:139)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:858)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:797)
at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:367)
at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5264)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5252)
at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:190)
... 30 more 
```

顺便说一句，不要介意与空字符串（其中伪=''）进行比较，我得到与非空值相同的错误。

我不认为涉及其他文件，但我会发布您可能需要的任何其他文件。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:17:05.450

`QuerySyntaxException`SQL 查询中出现语法错误时抛出异常。在使用 HQL 时，您始终必须使用 Classname 而不是 tablename。此外，除了 Java 类名和属性之外，HQL 查询大多不区分大小写。

HQL 文档：[链接](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch11.html#d5e2551)

> 除了 Java 类和属性的名称之外，查询不区分大小写。所以 SeLeCT 和 sELEct 一样，和 SELECT 一样，但是 org.hibernate.eg.FOO 和 org.hibernate.eg.Foo 不同，foo.barSet 和 foo.BARSET 也不同。

但在你的情况下，你似乎使用了正确的情况。你能修改下面的查询并检查吗？

```
 public boolean confirmerLogin(String pseudo, String mdp){
        Session s = HibernateUtils.getSession();    
        Query q = s.createQuery("from Joueur j where j.pseudo=:pseudo");
        q.setParameter("pseudo", pseudo);
        if(q.list().size()>=1)
        return true;
        else
        return false;
    } 
```

让我知道这是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T11:09:32.020

好的，我做了一些测试和研究，这就是我发现的：

首先，DTD：我认为DTD的版本可能与Hibernate的版本相同，但事实并非如此。DTD 的最新版本目前是 3.0。对 DTD 所做的最后修改可以在 Hibernate Migration Guide 3.6 中找到。

我的 DTD 版本是 3.0，我的问题不是来自它。

然后，我将 Eclipse 自动生成的 hbm.xml 文件中的声明与我在实体 (Joueur.java) 上的注释进行了比较。我几乎错过了其中的一半，但它们都是可选的。当我注意到我忘记了注释 Table(name="") 时，我寄予厚望，但它也没有起到作用......

我没有进一步研究的线索，而且我已经找到了我的问题的答案，即使这意味着使用 xml 文件而不是我更喜欢的注释。我假设 GlassFish 还没有处理有关 Hibernate 实体的注释......

因此，我将把我的问题标记为已回答，但如果碰巧有人有解决方案，请现在告诉我！

感谢 Satya 和 Viral Patel 的建议！

# azure - 我可以将 Azure 存储帐户作为驱动器号挂载到我的 Azure 网站吗？

> ID：13852305
> 
> 赞同：2
> 
> 时间：2012-12-13T03:08:30.267
> 
> 标签：azure, azure-storage, azure-blob-storage, azure-web-app-service

我有一个无法修改的 PHP 应用程序，并且该应用程序的一部分接受来自最终用户的上传。我不想将这些上传（可能很大）存储到我的 Azure 网站存储分配中，所以我宁愿将它们定向到 Azure 存储帐户。有什么方法可以将 Azure 存储帐户作为简单的驱动器号挂载到我的网站，以便我可以通过这种方式将文件保存到其中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:53:33.043

Windows Azure 网站目前不允许您这样做。您可以评估其他选项：

*   使用具有数据磁盘的虚拟机（保留在 Blob 存储中，但难以扩展，因为只有 1 个实例可以在 Blob 存储中装载特定的 VHD）
*   将 Web/Worker 角色与[Azure 驱动器](http://msdn.microsoft.com/en-us/library/windowsazure/ee924681.aspx)一起使用（保留在 Blob 存储中，但难以扩展，因为只有 1 个实例可以在 Blob 存储中装载特定 VHD）
*   将 Web/Worker 角色或 VM 与[AzureBlobDrive](https://github.com/richorama/AzureBlobDrive)一起使用。这使您可以像驱动器一样“挂载”存储帐户。这样，您的应用程序会认为它写入磁盘，而实际上它正在写入 blob 存储。

# sharepoint - Sharepoint PowerShell 库文件夹权限

> ID：13852307
> 
> 赞同：1
> 
> 时间：2012-12-13T03:08:41.437
> 
> 标签：sharepoint, powershell

我是 SharePoint (2010) 和 PowerShell 的新手（以及一般的 Microsoft。Linux 是我的菜。我决定暂时进入黑暗面 :) ）。无论如何，如何使用 PowerShell 为特定用户、特定文件夹、另一个特定文件夹内、SharePoint 中的特定库设置权限？例如。“会议”（图书馆）--> IT 服务（文件夹）-->事件（子文件夹）-->December2012（子文件夹）授予“蒂姆·史密斯”“只读”访问权限</p>

（换句话说，在“会议”库中，有一个文件夹“IT 服务”，其中有一个文件夹“事件”，该文件夹中还有另一个文件夹，名为“December2012”）

是的，我可以从 GUI 手动完成，但我需要多次执行此操作（不同的文件夹和不同的用户）。我可以吐出一个库的所有文件夹（和子文件夹）的列表；我只是不确定要运行什么推荐，为给定用户分配该文件夹的权限。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:10:45.083

有很多关于 Powershell 和 SharePoint 2010 的信息，如果您经常这样做的话，尤其是好书。对于一次性，试试这个： [http ://sharepoint2010tutor.blogspot.com.au/2011/08/grant-folder-permissionsharepoint-using.html](http://sharepoint2010tutor.blogspot.com.au/2011/08/grant-folder-permissionsharepoint-using.html)

# wso2 - SQL 更新后 wso2 数据服务能否返回受影响的行？

> ID：13852310
> 
> 赞同：2
> 
> 时间：2012-12-13T03:08:58.007
> 
> 标签：wso2, wso2dss

我已经使用 WSO2 数据服务连接到数据库一段时间了。除了在 SQL 更新脚本后我仍然无法获得受影响的行之外，一切都很完美。

我已经通过向导并一次又一次地尝试，但没有找到解决方案。

有没有人知道如何得到它？

感谢您提前回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:58:50.237

恐怕没有办法直接获取更新的行数，但可能的解决方法是将更新语句包装在存储过程中，并从存储过程返回行数作为结果，也许作为 OUT 参数。

干杯，安佳娜。

# c# - 按字母顺序将值插入 .txt 文件

> ID：13852313
> 
> 赞同：2
> 
> 时间：2012-12-13T03:09:40.957
> 
> 标签：c#

我有一个按字母顺序排序的现有 .txt 文件。我想按字母顺序将 3 个新参数插入到现有的 .txt 文件中。基本上，应该在两者之间添加新值，以便保持 .txt 文件的字母顺序。

有人可以帮我吗？我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T03:15:52.393

您可以将其称为“合并排序”，我可以很快想到两种方法。

1.  一次读取一行原始文件，然后输出到一个新文件，在正确的位置添加附加内容。

2.  将整个文件读入集合，将新条目添加到集合中，确保通过某种方式对集合进行排序（或使用固有排序的集合类型），然后将整个集合写回文件。

我不会做的是尝试在文件中打开空间并将新条目直接插入文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:16:02.090

这可能取决于文本文件的大小，但我会阅读文本文件：

```
List<string> items = GetItemsFromTextFile(); //you're going to use IOStreams for this 
```

插入新项目。

```
items.add("new item 1");
items.add("new item 2");
items.add("new item 3"); 
```

解决：

```
items.Sort(); 
```

然后写它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T03:17:02.680

假设性能并不重要，您可以将文件加载到内存中，您只需执行以下操作。

```
var newLines = new [] { "new line one", "new line two", "new line three" };

var lines = File.ReadAllLines(filename);

lines = lines.Append(newLines).OrderBy(line => line).ToArray();

File.WriteAllLines(filename, lines); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T03:42:02.217

您可以初始化 a`StreamReader`或用于`File.ReadAllLines(string path, Encoding encoding)`将文件内容读取到`string`由新行分割的数组中。然后，对该数组进行排序`string`，将数组中的每一个写入文件。

**例子**

```
public static void WriteToFile(string[] linesContent, string fileLocation) //Creates a void of name WriteToFile(string[] linesContent, string fileLocation) where linesContent are the lines to write and fileLocation is the target file path to write to
{
    StreamWriter _writer = new StreamWriter(fileLocation); //Initialize a new StreamWriter of name _writer to write to fileLocation
    foreach (string s in linesContent) //Get s as a string for every string in linesContent
    {
        _writer.WriteLine(s); //Write s in a new line to the file
    }
    _writer.Close(); //Close the writer
}
public static void SortFile(string fileLocation) //Creates a void of name SortFile(string fileLocation) where fileLocation is the path of the file to sort alphabetically
{ 
    string[] Lines = File.ReadAllLines(fileLocation, Encoding.UTF8); //Initializes a string array of name Lines as the content of the file splitted by Environment.NewLine
    Array.Sort(Lines); //Sorts the string array of name Lines
    WriteToFile(Lines, fileLocation); //Writes Lines to the file
}
static void Main() //Our main entry point
{
    string fileLocation = @"D:\Resources\myfile.txt"; //Initializes a new string of name fileLocation as D:\Resources\myfile.txt
    WriteToFile(new string[] { "my third line", "this is my second line", "and this is my first line" }, fileLocation); //Writes the three lines provided to fileLocation
    SortFile(fileLocation); //Sorts fileLocation
} 
```

**注意**：在初始化新`StreamWriter`的名称`_writer`时，我们没有设置`append`为，`true`因为我们将用新的排序行覆盖文件
**注意**：您可以使用`StreamReader.ReadToEnd();`读取文件的所有行，将行拆分为新行，然后关闭`StreamReader`

**例子**

```
public static void SortFile(string fileLocation) //Creates a void of name SortFile(string fileLocation) where fileLocation is the path of the file to sort alphabetically
{ 
    StreamReader _reader = new StreamReader(fileLocation); //Initializes a new StreamReader of name _reader to read from fileLocation

    string fileContents = _reader.ReadToEnd(); //Initializes a new string of name fileContents which is the file content 
    string[] Lines = fileContents.Split(Environment.NewLine.ToCharArray()[0]); //Initializes a string array which is the output of splitting fileContents by a line

    Array.Sort(Lines); //Sorts the string array of name Lines
    _reader.Close(); //Closes the StreamReader so that the file can be accessible once again
    WriteToFile(Lines, fileLocation); //Writes Lines to the file
} 
```

谢谢，
我希望你觉得这有帮助:)

# html - 在 HTML 中垂直居中文本的问题

> ID：13852315
> 
> 赞同：0
> 
> 时间：2012-12-13T03:10:00.720
> 
> 标签：html, alignment, center

我知道此类问题已多次发布，但我似乎无法弄清楚我的问题是什么。我有一块文本，我想将它垂直居中放在页面的左侧。我不想使用沉重的填充来使文本居中。如果访问者随窗口高度变化，我希望它垂直居中。

我有一段文字：

```
<div class="welcome">
    <p>Testing Stuff</p> <br /> <br />  
    <p>Testing Stuff</p> <br /> <br />
    <p>Testing Stuff</p> <br /> <br />
    <p>Testing Stuff</p>
</div> 
```

这是*欢迎的 CSS*

```
.welcome {
position: absolute;
top:50%;
display: table;
vertical-align: middle;
padding-left: 50px;
font-family: 'Helvetica-Light';
font-size: 40px;
}

.welcome p{
display: inline;
vertical-align: middle;
padding: 10px;
background: black;
color: white;
opacity: 0.7;
white-space: nowrap;
} 
```

目前 top:50% 将文本设置为从 50% 开始，但我需要文本块的中心为 50%，而不是从 50% 开始。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:41:13.873

我用一些 jQuery 做了这个，希望这是你想要的：[**FIDDLE**](http://jsfiddle.net/Dim13i/K7fyR/)

**HTML：**

```
<div class="welcome">
    <div class="container">
        <p>Testing Stuff</p> <br /> <br />  
        <p>Testing Stuff</p> <br /> <br />
        <p>Testing Stuff</p> <br /> <br />
        <p>Testing Stuff</p>
    </div>
</div>​ 
```

**CSS：**

```
.welcome {
    position: absolute;
    padding-left: 50px;
    font-family: 'Helvetica-Light';
    font-size: 40px;
    height: 100%;
}

.welcome p{
    display: inline;
    vertical-align: middle;
    padding: 10px;
    background: black;
    color: white;
    opacity: 0.7;
    white-space: nowrap;
}

.container {
    position: absolute;
    top: 50%;
}​ 
```

**JS：**

```
$(function() {
    var containerHeight = $('.container').height();
    $('.container').css({'margin-top': -containerHeight/2});
});​ 
```

**不带 jQuery的**更新：** **[FIDDLE](http://jsfiddle.net/Dim13i/K7fyR/1/)****

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:51:11.273

仍在检查这一点，但这是一种方法：

**HTML**

```
<div class="welcome">
  <div class="row">
      <p>Testing Stuff</p> 
      <p>Testing Stuff</p>
      <p>Testing Stuff</p>
      <p>Testing Stuff</p>
    </div>
</div>​ 
```

**CSS**

```
html,
body {
    height: 100%;
    width: 100%;
}
.welcome {
    height: 100%;
    width: 1px;
    display: table;
    padding-left: 50px;
    margin: auto;
    font-family: 'Helvetica-Light';
    font-size: 30px;
}
.welcome .row {
    display: table-cell;
    white-space: nowrap;
    vertical-align: middle;
}
.welcome .row p {
    display: table-cell;
    padding: 10px;
    background: black;
    color: white;
    opacity: 0.7;
}​ 
```

请注意使用`100%`on`html, body`行，它允许您使用`margin: auto`and `height: 100%`on`.welcome`元素。我修复了白色间隙（由于`display: table-cell`块内解释的“空白”，即这些`p`标签位于单独的行上，因此存在间隙。

[http://jsfiddle.net/userdude/CuUgV/3/](http://jsfiddle.net/userdude/CuUgV/3/)**

# c++ - 在继承的接口中调用自定义代码？

> ID：13852318
> 
> 赞同：0
> 
> 时间：2012-12-13T03:10:30.217
> 
> 标签：c++, interface

我将如何调用类外部的自定义代码，但从具体对象内部调用？例如，如果我想更改类外部的对象或变量的状态？函子？回调？

我是否需要将仿函数或回调存储在接口或 ADT 中？...假设使用仿函数或回调是我应该做的...

# **编辑**

在与 Functors 和模板定义斗争了一整天之后，我又回到了使用函数指针。现在用户所做的只是注册一个先前定义的函数名并调用它。由于成员变量默认为`nullptr`如果他们没有注册一个，那么除了默认行为之外什么都没有发生。请参阅下面的编辑代码。

按键界面：

```
class IButton {

public:
    virtual void OnPress() = 0;
    virtual void OnRelease() = 0;
    virtual void OnHover() = 0;
protected:
private:

}; 
```

按钮 ADT：

```
#include "IButton.h"
//..More includes

class ADTButton : public IButton {

public:

    //..Other methods...

    virtual void OnRelease()=0;
    virtual void OnPress()=0;
    virtual void OnHover()=0;

    virtual void OnRelease(ADTButton* btn);
    virtual void OnPress(ADTButton* btn);
    virtual void OnHover(ADTButton* btn);

    virtual void RegisterOnReleaseCallback(void (*OnReleaseCallBack)(ADTButton* btn));
    virtual void RegisterOnPressCallback(void (*OnPressCallBack)(ADTButton* btn));
    virtual void RegisterOnHoverCallback(void (*OnHoverCallBack)(ADTButton* btn));

protected:

    void (*_OnRelease)(ADTButton* btn);
    void (*_OnPress)(ADTButton* btn);
    void (*_OnHover)(ADTButton* btn);

    //..More Stuff Here in various access modifiers

}; 
```

具体按钮标题：

```
class CpuButton : public ADTButton {
public:

    CpuButton();
    virtual ~CpuButton();

    virtual void OnRelease();
    virtual void OnPress();
    virtual void OnHover();

protected:
private:
}; 
```

具体按钮实现：

```
#include "BTN_CPU.h"

void CpuButton::OnRelease() {
    ADTButton::OnRelease();
    if(this->_OnRelease) this->_OnRelease(this);
}

void CpuButton::OnPress() {
    ADTButton::OnPress();
    if(this->_OnPress) this->_OnPress(this);
}

void CpuButton::OnHover() {
    ADTButton::OnHover();
    if(this->_OnHover) this->_OnHover(this);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:39:36.490

您可以拥有另一个接口，该接口根据其自己的具体实现提供各种行为，并通过指向存储为成员变量的具体实现的指针调用该接口的方法。这当然是回调。您还可以在编译时使用策略模板来执行此操作。

# php - 获取那些在另一个表中没有条目的mysql行

> ID：13852319
> 
> 赞同：-1
> 
> 时间：2012-12-13T03:10:47.360
> 
> 标签：php, mysql, sql, timetable

我有一个时间表应用程序，我被困在一个点上。现在，在为老师分配一个位置时，我只需要显示那些根据某些条件空置的房间，即日期和期间坐标（x，y）和学期，这意味着偶数学期（2,4,6）不能有同一时间在那个房间上课，奇数学期（1,3,5）也是如此。

我的表结构：

```
Room table
roomid, roomname

papers table
id, semster, papername

ttresponsibility table(this is the one where we store the allocations)
id, teacherid, day, period, subjectid, room 
```

现在我的要求是在分配时只获取那些空置的房间。这门课应该是在选老师的时候，选好了课程、学期和论文。我的想法是在纸质下拉列表的 onchange 事件中填充房间下拉列表。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:17:29.520

这样的事情可能会到达那里：

```
SELECT roomname
FROM Room
WHERE roomid NOT IN
(
    SELECT roomid
    FROM ttresponsibility
    WHERE period = *insert_timeperiod_to_search_for_empty_rooms_here*
        AND day = *insert_day_to_search_for_empty_rooms_here*
) 
```

# printing - ESC/P 设置绝对水平打印位置

> ID：13852321
> 
> 赞同：1
> 
> 时间：2012-12-13T03:11:04.940
> 
> 标签：printing, dot-matrix

我无法在 Epson LX-300 II 点阵打印机中设置水平打印位置。设置水平打印位置的命令有时不起作用。

我需要将可打印数据与预打印纸质表格中的相应列对齐。

给定以下代码：

```
 // row 1
        escp.setAbsoluteHorizontalPosition(1);
        escp.print("Equipment");
        escp.setAbsoluteHorizontalPosition(10);
        escp.print("Serial");
        escp.setAbsoluteHorizontalPosition(13);
        escp.print("Remarks");

        // row 2
        escp.lineFeed();
        escp.setAbsoluteHorizontalPosition(1);
        escp.print("Equipment");
        escp.setAbsoluteHorizontalPosition(10);
        escp.print("Serial");
        escp.setAbsoluteHorizontalPosition(13);
        escp.print("Remarks"); 
```

这是预期的输出：

```
Equipment                  Serial     Remarks
Equipment                  Serial     Remarks 
```

但是，这是实际的打印输出：

```
EquipmentSerial                        Remarks
EquipmentSerial                        Remarks 
```

我无法弄清楚为什么“Serial”没有打印在正确的位置。

为了弄清楚这一点，我做了一个测试程序，它在一行中打印 'x' 1cm。

以下是测试程序的示例代码：

```
 ESCPrinter escp = new ESCPrinter(sharedPrinterName, false);
    if((escp.initialize()) == false) {
        return;
    }
    escp.select10CPI();
    escp.set8LPI();
    escp.setCharacterSet(ESCPrinter.USA);                
    for(int x = 1; x < 15; x++) {
        escp.setAbsoluteHorizontalPosition(x);
        escp.print("x");
    }
    escp.formFeed();
    escp.close(); 
```

预期输出：

```
x    x    x    x    x    x    x    x    x    x    x    x    x    x 
```

实际输出：

```
x    x    x    x    xxxxxx                    x    x    x    x 
```

这是[Epson ESC/P 参考手册](http://files.support.epson.com/pdf/general/escp2ref.pdf)，这是我用来发送打印机命令[的第三方代码](http://code.google.com/p/escprinter/source/browse/trunk/net/drayah/matrixprinter/ESCPrinter.java?r=2)，我对它进行了一些修改以实现 set8LPI() 方法。

在参考手册中，设置绝对水平打印位置的命令在 C-31 中。

我已经尝试自己解决这个问题好几天了，但我离找到解决方案还差得远。

## 附加信息

我制作了另一个测试程序，它从 0.0cm 到 19.8cm 的位置打印测试数据，增量为 0.2cm，并且在每个位置之间换行。

我打印的测试数据也是我指定的绝对水平位置（方便识别）。

向您展示确切的打印输出是不切实际的，因此我将尽我所能描述它们。

将水平位置设置为 0.0 直到 5.4 似乎可行，输出如下所示：

```
0.0
 0.2
  0.3
   0.4
   .
   .
   .
   -------->  5.4 
```

之后，将绝对水平位置设置为 5.6cm 直到 10.8cm 被忽略。打印机只在纸张的最左侧打印。

“设置绝对水平位置”命令再次为 11.0cm 直到 16.2cm 工作。再次忽略 16.4cm 直到 19.8cm。

据我了解上面链接的 ESC/P 参考手册，当指定位置超出右边距时，打印机会忽略此命令。没有指定其他内容。

显然，我的价值观都在边缘。

~~那么，这可能是打印机的硬件问题吗？~~

--> 不是硬件问题。我使用不同的打印机得到了相同的结果。

## 更新

给定设置绝对水平位置的命令： ESC $ nl nh

我做了另一个测试程序，我直接输入 nh 和 nl 参数。

我已经意识到只要 nl 值超过 127，这个命令就会被忽略。

我觉得这很令人惊讶，因为参考手册指出 nl 的最大值是 255。

这一发现与我输入以厘米为单位的水平位置的第一个测试程序一致。当我将厘米转换为忽略的命令的相应 nh 和 nl 值时，生成的 nl ​​值大于 127。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-10T15:29:42.543

ESC/P 设置绝对水平打印位置

从 ESCPrinter.java 上给定的第 3 方 Java 代码来看，将 ESC/P 控制代码发送到打印机端口的方法正在等待灾难。对于您的情况，当值大于 7 位数据 (127 / 0x7F) 时。

给定设置绝对水平位置的命令：

```
ESC $ nL nH
nL value: 0 <= nL < 256 
```

当 nL 值超过 127 时，该值转换错误并发送到打印机端口。不正确的转换是由 PrintStream() 类引起的，它将根据您的系统语言环境调用默认的字符集编码（内部创建 java.io.Writer() 类）。这就是为什么值 nL 永远不会正确发送到打印机端口的原因。

要解决此问题，您绝不能尝试使用 String() 类或任何其他与字符集编码相关的类来编写控制代码（例如 .toString()、.toByteArray(charset)、Writer）。

您可以尝试对 PrintStream() 进行 UTF-8 编码，看看它是否修复了该错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-24T17:09:47.417

我发现的问题是 UTF-8 是多字节编码，而 ESC-P 需要将命令放在一个字节中，从 0-256

ISO-8859-1 是最高 256 的单字节编码。

Java 字节是带符号 2 补码的小数，因此超过 127 的数字为负数。

```
public byte getN1(int total) {

    // a java byte can only be -127 > 127
    // so the negative numbers represent the numbers greater than 127

    int n1 = total % 256;
    if (n1 > 127) {
        n1 = n1 - 256;
    }
    return (byte) n1;
}

public byte getN2(int total) {

    // N2 is a factor of 256\. so it is multiplied by 265 and added to N1.
    // generally it is either 1 or 0 but can be more for things like vertical
    // position.

    int n2 = total / 256;
    return (byte) n2;
}

public String setAbsoluteHorizontalPosition(int dots) throws UnsupportedEncodingException {

    byte[] x = { ESC, '$', this.getN1(dots), this.getN2(dots) };
    return new String(x, "ISO-8859-1");
} 
```

# ruby-on-rails - Rails 教程第 9 章中的失败测试

> ID：13852324
> 
> 赞同：0
> 
> 时间：2012-12-13T03:11:06.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, railstutorial.org

```
Failures:

1) User pages signup with valid information edit with invalid information 
 Failure/Error: before { click_button "Save changes" }
 AbstractController::ActionNotFound:
   The action 'update' could not be found for UsersController
 # (eval):2:in `click_button'
 # ./spec/requests/user_pages_spec.rb:105:in `block (6 levels) in <top (required)>'

 Finished in 1.13 seconds
 62 examples, 1 failure

 Failed examples:

 rspec ./spec/requests/user_pages_spec.rb:107 # User pages signup with valid information edit with invalid information 
```

我认为它没有在我的 users_controller.rb 中看到我的更新操作，但是它在那里：

```
 class UsersController < ApplicationController

 def show
   @user = User.find(params[:id])
 end

 def new
   @user = User.new
 end

def create
@user = User.new(params[:user])
if @user.save
  sign_in @user
  flash[:success] = "Welcome to the Sample App!"
  redirect_to @user
else
  render 'new'
 end
end

def edit
   @user = User.find(params[:id])
 end 
end

def edit
  @user = User.find(params[:id])
end

def update
 @user = User.find(params[:id])
 if @user.update_attributes(params[:user])
  flash[:success] = "Profile updated"
  sign_in @user
  redirect_to @user
else
  render 'edit'
 end
end 
```

而且我以某种方式结束了两个编辑操作，但如果我删除其中一个，我可以让测试完全运行。我认为我遇到的 99% 的麻烦是到处都是结尾，并且在错误的地方插入了新的操作。谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:15:38.900

```
def edit
   @user = User.find(params[:id])
 end 
end 
```

这里有双`end`。至此结束`class UsersController`。只需删除所有这些行，就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T03:16:21.873

你首先必须匹配每一端。您可能正在删除第二个编辑操作，这会导致 UserController 类在第一个编辑操作时结束，因为您在该操作中的额外结束...

```
class UsersController < ApplicationController

  def show
    @user = User.find(params[:id])
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def edit
    @user = User.find(params[:id])
  end

  def update
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end
end 
```

# python - javascript中的OnChange或OnBlur事件在Django中运行python函数并返回结果？

> ID：13852327
> 
> 赞同：2
> 
> 时间：2012-12-13T03:11:21.063
> 
> 标签：python, django, onchange, onblur

我已经在后端使用 Django 和 Python 开发了一个内部工具，现在看来我遇到了障碍。

我对 Javascript 很陌生。该站点必须非常动态，并且需要能够执行以下操作：

在输入框中，

1.  用户已输入数据

2.  当用户从盒子中移出时，它会运行一个 onBlur 或 onChange 或一些事件函数，该函数调用一个接受一些参数的 python 代码，并从页面中获取其他数据并将该数据插入数据库并保存。

3.  它无需更改 url/刷新页面或仅停留在同一页面上的任何内容即可做到这一点。

任何想法如何使用 Python 和 Django 完成此任务。

谢谢，任何帮助表示赞赏。

穆尔塔扎·皮塔瓦拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:23:59.203

### 你描述的Javascript

```
$("#foo").change(function() { 
    $.ajax({
      type: 'POST',
      url: '/some_url/',
      data: {
          'some_data_from_page': $("#some_data_from_page").val()
      },
      success: function(data) {
          alert("Got response from server ...", data);
      }
    });
}); 
```

### 一些通用的html

```
<input type="text" id="foo" />
<input type="text" id="some_data_from_page" /> 
```

### 一些通用的 django

```
def handle_ajax_post(request):
    print 'Doing something with post data... perhaps saving to the database?', \
            request.POST['some_data_from_page']

    return http.HttpRespones("Some response from server") 
```

# c++ - 两个QObject的赋值

> ID：13852330
> 
> 赞同：-1
> 
> 时间：2012-12-13T03:11:49.390
> 
> 标签：c++, qt, constructor, copy-constructor, qobject

我有两个类名“mamad”和“student”，它们都继承自我的类“Base”，而“Base”继承自 QObject

在学生班中，我有一个字段：“主题”，它是一个 mamad，我有一个函数（setsubject），它采用一个新主题并将新主题复制到主题。

但我有一个错误：

```
"QObject& Qobject::operator=(const QObject)" is private !
"within this context" 
```

我该如何解决？

这是我的妈妈课：

```
class mamad:public Base
{
   Q_OBJECT
   Q_PROPERTY(int id2 READ getId2 WRITE setId2)
   Q_PROPERTY(QString Name2 READ getName2 WRITE setName2)
public:
    mamad(Base* parent=0);
    int getId2() const { return id2; }
    void setId2(int newId) { id2 = newId; }
    QString getName2() const { return Name2; }

    void setName2(const QString &newName) { Name2 = newName; }
private:
    int id2;
    QString Name2;

}; 
```

这是我的学生班：

```
class student : public Base
{
    Q_OBJECT // Q_OBJECT macro will take care of generating proper metaObject for your class
    Q_PROPERTY(int id READ getId WRITE setId)
    Q_PROPERTY(QString Name READ getName WRITE setName)
    Q_PROPERTY(mamad subject  WRITE setsubject)

public:
    student(Base * parent=0);
    int getId() const { return id; }
    void setId(int newId) { id = newId; }
    QString getName() const { return Name; }
    void setName(const QString &newName) { Name = newName; }
   // mamad getsubject()const {return subject;}
    void setsubject( mamad newsubject) {subject=newsubject; }

private:
    int id;
    QString Name;
    mamad subject;
}; 
```

我必须说我的getsubject函数也有这个问题，我不知道如何解决。？

请，请，帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:30:16.183

听起来`QObject`s 默认情况下不应该被复制。也许您最好编写一个`copy`函数，该函数仅将您需要的参数从复制`newsubject`到`subject`

编辑：[这篇文章](https://stackoverflow.com/questions/2652504/how-do-i-copy-object-in-qt)（可能重复）解释更多，并说你只打算存储和复制指向`QObject`s 的指针，而不是对象本身。

例如 - 非常基本并使用原始指针。推荐使用[`std::unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)或[`std::shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)根据要求

```
class student : public Base
{
    ...
    void setsubject( mamad* newsubject) {subject=newsubject; }
    ...
    mamad* subject;
};

stud.setsubject(&mamadObj); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T08:32:36.043

`QObject`无法复制，**因为它在**[文档](https://qt-project.org/doc/qt-4.8/qobject.html#no-copy-constructor)和错误消息中明确说明。

您将不得不使用`setsubject`克隆方法，即通过手动复制`mamad`s 之间的字段来复制状态。

# c# - 使用数组更新文件

> ID：13852331
> 
> 赞同：0
> 
> 时间：2012-12-13T03:11:56.753
> 
> 标签：c#, winforms

每次我向某个 ID 添加新价格时，我都会尝试更新我的文件。

我有一个 .csv 文件，其中包含多行，例如 ID、姓名、地址、州、邮编、年龄、已订购。所有 Ordered 字段都以 0 开头。

现在，我有一个表单，您可以在其中选择 ID 并插入价格....我希望将该价格添加到 .csv 中的 Total Ordered 中。

所以本质上，如果 Ordered 从 0 开始并且我添加了 11.45 的价格..新的 .csv 应该在 Ordered 行中反映 11.45.. 然后，如果我再次打开表单并添加另一个 2.00 的价格...新的订购将是 13.45。

```
 public void Customer()
    {
        string name = "";
        string address = "";
        string state = "";
        int customerID = 0;
        int zip = 0;
        int age = 0;
        double Ordered = 0;

        Customer[] Array = Customer.getAll();

        for (int k = 0; k < Array.Length; k++)
        {
            if (Array[k] != null)
            {
                ID = Array[k].getID();
                if (Convert.ToInt32(Field.Text) == ID)
                {
                    ID = Array[k].getID();
                    name = Array[k].getName();
                    address = myCustArray[k].getAddress();
                    state = myCustArray[k].getState();
                    zip = myCustArray[k].getZip();
                    age = myCustArray[k].getAge();
                    Ordered = (Array[k].getOrdered()
                    + Convert.ToDouble(PriceField.Text));

                    using (FileStream fs = new FileStream(@"customer.csv",FileMode.Append, FileAccess.Write))
                    using (StreamWriter sw = new StreamWriter(fs))
                    {
                        sw.WriteLine(customerID + "," + name + "," + address + "," + state + "," + zip + "," + age + "," + totalOrdered + "/r/n");
                    }
                }
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:15:41.220

唯一的方法是用新数据重写文件。

从理论上讲，您可以打开文件进行写入，寻找要更改的值的位置，然后写入新值，但该新值必须与该值相同（以字符数计）它正在替换，因为您无法扩展或缩小文件中可用的空间。而且您还需要解析文件以找到放置值的正确位置。

**更新**

正如您所建议的，将数据写成一个完整的行将是一种更简单的方法。不过，您需要执行以下操作。

1.  打开源文件进行阅读
2.  创建一个用于写入的新文件
3.  从源文件中读取行并将它们写入目标文件，直到找到要更改的行
4.  使用数组中的数据写入新行，而不是源文件中的行
5.  继续将行从源复制到目标。
6.  关闭两个文件
7.  删除源文件
8.  重命名目标文件以替换源文件。

或者，如果您的数组包含 CSV 中的所有数据，您可以将其转储到新的 CSV，然后执行上面的 7 和 8。

# actionscript-3 - 为什么 FlashVars 有 1 个空元素

> ID：13852332
> 
> 赞同：0
> 
> 时间：2012-12-13T03:11:58.203
> 
> 标签：actionscript-3, actionscript

```
 var images:Array = new Array();
            var flashVars:Object = stage.loaderInfo.parameters;

            for (var key:String in flashVars)
            {
                var value:String = flashVars[key] as String;
                images.push(value);
            }
            trace(images.length) // outputs 1 
```

我从 flashVars html 获取图像 url，但我不明白为什么有一个空元素，为什么这段代码输出 1？如果没有 flashVars 传递给应用程序？

# php - 存在多个表时最有效的登录方式

> ID：13852335
> 
> 赞同：0
> 
> 时间：2012-12-13T03:12:15.317
> 
> 标签：php, mysql, login, registration

我使用的是教师注册表和学生注册表。每个字段有十个字段，名字、姓氏、用户名、密码等相似，而部门（教师有 7 个，学生有 3 个）和电子邮件 ID（教师有不同的域扩展名，学生不同）是不同的。我正在使用两张桌子，一张给老师，一张给学生。

现在，我知道我可以使用一个登录表单，使用 JOIN 属性查询这两个表并让它们登录。但是我想知道这种方法是否有效，因为正在使用两个表。

或者这种方法更有效：在注册表格中，我放了一个单选按钮来选择教师或学生，并根据选择的其余字段更改，即，如果我选择教师，则显示 7 个部门，或者如果我只选择学生其中3人出现。这样，我只能使用一张桌子，至少我猜是这样。

或者另一种可能性是我使用两个表但两个登录表单，一个用于教师，一个用于学生，我知道这是最简单的方法，但作为 Comp Sci 学生，我想选择所有有效的方法。

PS：老师的角色将与站点中的学生完全不同。并且会有很多老师和学生的活动，他们是完全不同的。保持一张桌子是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:18:01.193

我想说教师和学生都是用户，但教师拥有更高的权限，就像管理员一样。

因此，我只会使用 1 个表`users`并有一个属性列来指示它们是什么类型。

一旦他们登录，您可以将类型变量返回到您的页面以确定要显示的字段。

而且您甚至不需要单选按钮来指示类型。只要有一个用户名和密码字段。然后，一旦它们通过身份验证，检索类型属性并相应地加载您的表单。

您的 PHP 页面可能如下所示：

```
<?php
    if(isset($_POST['username'])) {
        $user = $_POST['username'];
        $password = $_POST['password'];
        $mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db');

        $query = "SELECT * FROM tblUser WHERE userid=" . $user;

        //Execute SQL
        if($mysqli->query($query) === TRUE) {
            if ($password == $row['password']) {
                $userType = $row['type'];
                $mysqli->close();
                echo $userType;
            else { echo "incorrect password"; }

        } else { echo "SQL execution error"; }
    } else { 
        echo "invalid username string"; 
    }
?> 
```

# google-chrome - 在 google chrome 扩展程序中单击链接时打开一个弹出窗口并在扩展程序中插入 Flash 播放器

> ID：13852338
> 
> 赞同：2
> 
> 时间：2012-12-13T03:13:00.643
> 
> 标签：google-chrome, google-chrome-extension

你好（是的，很长的标题）

我正在制作我的第一个 google chrome 扩展程序，但遇到了一些麻烦。

### 有关扩展的信息（只是为了让您了解我要做什么）：

扩展是一个“收音机”，一个从广播网址播放音乐的 Flash 播放器。在 Flash 播放器的底部，有 4 个图标，其中 3 个在单击时下载 .pls 文件以使用 VLC - WinAmp & iTunes 打开，一个应该打开一个弹出窗口，并显示来自收音机的以下信息。

### 我想做的是：

1 - 当用户点击图标时（在下图中的红色方块中），应该会打开一个弹出窗口，其中包含一个播放器（Windows 媒体播放器）和一些有关收音机的信息（这些信息是通过 iframe 检索的）

2 - 在扩展中显示 flash 播放器（以及 windows 媒体播放器），这似乎不起作用...

--图片：http : [//i.imgur.com/1qZDn.png](http://i.imgur.com/1qZDn.png)

### 编码：

1 - 清单.json：

```
{
"name": "Kombat Syndicate Radio Extension",
"version": "1.0",
"manifest_version": 2,
"description": "Kombat Syndicate Radio",
"browser_action":   {
    "default_icon": "icon.png",
     "19": "icons/icon.png",  
     "128": "icons/icon_128.png",
    "default_popup": "ksradio.html"
},

   "permissions": [
   "tabs"
    ]

} 
```

2 - ksradio.html：

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css" />
<script src="script.js"></script>
</head>

<body>
<h1><img style="margin-top:-15px;-webkit-box-reflect: below 0px -webkit-   gradient(linear, left top, left bottom, from(transparent), color-stop(87%, transparent),  to(white));
" src="icons/ks_radio_icon.png" /><br />Kombat Syndicate Radio</h1>

<div align="center" text-align="center" id="content">
<div id="smallffmp3">
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="140" height="80"   __idm_id__="1284874242">
    <param name="movie" value="http://tracks.kombatsyndicate.com/wp- content/plugins/shout-stream/smallffmp3.swf?url=http://85.25.118.16:7502/;&amp;title=Trac[kS]">
    <param name="wmode" value="transparent">
    <param name="allowscriptaccess" value="sameDomain"><!--[if !IE]>-->
    <object type="application/x-shockwave-flash" data="http://tracks.kombatsyndicate.com/wp-content/plugins/shout-stream/smallffmp3.swf?url=http://85.25.118.16:7502/;&amp;title=Trac[kS]" width="140" height="80" __idm_id__="1284874243">
    <param name="wmode" value="transparent">
    <param name="allowscriptaccess" value="sameDomain"><!--<![endif]-->
    </object><!--<![endif]-->
     </object>

     </div>

    <a href="http://85.25.118.16:7502/listen.pls" target="_blank"><img  src="icons/VLC_48.png" title="VLC Media Player"/></a>
    <a href="#" onClick="ksradiowmp()"><img src="icons/WMP_48.png" /></a>
    <a href="http://85.25.118.16:7502/listen.pls" target="_blank"><img  src="icons/WinAmp_48.png" title="WinAmp Media Player" /></a>
    <a href="http://85.25.118.16:7502/listen.pls" target="_blank"><img  src="icons/iTunes_48.png" title="iTunes" /></a>

    <iframe align="middle" style="display:block;" name="infos"  src="http://phpks.comoj.com/radioinfos.php" width="65%" height="70%" frameborder="0"   scrolling="no" seamless></iframe>

    </div>

    </body>
    </html> 
```

3 - ksradio_wmp.html（弹出窗口）：

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body>
<h1><img style="margin-top:-15px;-webkit-box-reflect: below 0px -webkit- gradient(linear, left top, left bottom, from(transparent), color-stop(87%, transparent),  to(white));
" src="icons/ks_radio_icon.png" /><br />Kombat Syndicate Radio</h1>
<div style="overflow:hidden;" align="center" id="content">
<object id="MediaPlayer1" width="350" height="65" classid="clsid:6bf52a52-394a-11d3- b153-00c04f79faa6"  codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1 ,52,701">
<param name="FileName" value="http://85.25.118.16:7502/" />
<param name="animationatStart" value="true" />
<param name="transparentatStart" value="true" />
<param name="autoStart" value="true" />
<param name="showControls" value="true" />
<param name="fullScreen" value="false" />
<param name="url" value="http://85.25.118.16:7502/" />
<param name="pluginspage" value="http://www.microsoft.com/Windows/MediaPlayer/" />
<param name="autostart" value="1" />
<param name="showcontrols" value="1" />
<embed id="MediaPlayer1" width="350" height="65" type="application/x-mplayer2"   src="http://85.25.118.16:7502/" FileName="http://85.25.118.16:7502/"  animationatStart="true" transparentatStart="true" autoStart="true" showControls="true"  fullScreen="false" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/"  autostart="1" showcontrols="1" />
   </object>
   <a href="http://85.25.118.16:7502/listen.pls"><img src="icons/VLC_48.png" title="VLC   Media Player"/></a>
   <a href="http://85.25.118.16:7502/listen.pls"><img src="icons/WinAmp_48.png" title="WinAmp Media Player" /></a>
   <a href="http://85.25.118.16:7502/listen.pls"><img src="icons/iTunes_48.png"   title="iTunes" /></a>
   <iframe style="display:block;" name="infos"   src="http://phpks.comoj.com/radioinfos.php" width="65%" height="70%" frameborder="0"   scrolling="no" seamless></iframe>

   </div>
   </body>
   </html> 
```

4 - 脚本.js：

```
function ksradiowmp() {
window.open("ksradio_wmp.html", "myWindow", "status=1, height=450, width=400, resizable=0, toolbar=no, directories=no, menubar=no, scrollbars=no")

} 
```

PS：这是弹出窗口的样子：http: [//i.imgur.com/SwzNW.png](http://i.imgur.com/SwzNW.png)

所以要恢复，我需要帮助从扩展打开一个弹出窗口，并在扩展中显示 flash 播放器和 windows 媒体播放器。我真的希望你们能提供帮助：D 在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T08:15:44.747

消除所有实例

一种）`value="http://tracks.kombatsyndicate.com/wp- content/plugins/shout-stream/smallffmp3.swf?url=http://85.25.118.16:7502/;&amp;title=Trac[kS]"`

b)`href="http://85.25.118.16:7502/listen.pls"`

c)`onClick="ksradiowmp()"`等等等等

有关更多信息，请参阅此[基本消息在 chrome 扩展中传递似乎失败](https://stackoverflow.com/questions/13670738/basic-message-passing-in-chrome-extension-seems-to-fail/13672406#13672406)

如果您需要更多信息，请与我们联系。

# nginx - 我的 nginx 站点有太多活动连接等待

> ID：13852341
> 
> 赞同：2
> 
> 时间：2012-12-13T03:13:41.387
> 
> 标签：nginx

nginx 服务器有两个具有 HT 功能的 6 核 xeon cpu。所以整个系统有24个cpu线程。

在 nginx.conf 中：

```
worker_processes 8;
worker_connections 4096; 
```

nginx stub_status 是：

```
Active connections: 3942 
server accepts handled requests
 142793 142793 505932 
Reading: 192 Writing: 36 Waiting: 3714 
```

太多的请求停留在等待队列中，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T03:38:58.967

等待连接通常不是问题。Nginx 可以同时处理多个连接。</p>

如果你不喜欢它，你可以通过调整`keepalive_timeout`指令来减少它。

# ruby - Ruby 子父表单

> ID：13852343
> 
> 赞同：0
> 
> 时间：2012-12-13T03:14:04.180
> 
> 标签：ruby, ruby-on-rails-3, parent-child, helper

这是我一直试图解决的问题，但我还没有找到一种感觉不像是彻头彻尾的黑客攻击的方法。我有 2 个对象，Warehouse 和 StateCity。Warehouse 对象具有指向 StateCity 对象 ( state_city_id ) 的外键。

现在，当用户创建仓库时，我希望他们能够输入州和城市。目前他们可以这样做，我只需检查提交的州和城市参数，然后创建或找到相应的 ActiveRecord 对象。现在，当他们在我的视图中查看 Warehouse 时，我在使用帮助程序从 StateCity 对象中提取 State/City（如果存在）和在我的模型上添加一个方法以执行如下相同的功能之间摇摆不定

```
def show_state( warehouse )
  if warehouse.state_city.nil? == false
    return warehouse.state_city.state
  end
  return ""
end

def show_city( warehouse )
  if warehouse.state_city.nil? == false
    return warehouse.state_city.city
  end
  return ""
 end 
```

不幸的是，无论是辅助方法还是用额外的函数来增加模型看起来都不是很自然，因为我必须使用一个来创建对象，另一个来查看对象。

我想知道是否有人对解决 Warehouse-StateCity 问题的更好方法有任何建议。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:24:17.277

首先，您可以像这样编写 if 语句：

```
return warehouse.state_city.city unless warehouse.state_city.nil? 
```

但我确定这不是您要寻找的答案。

我假设您总是希望 Warehouse 与 StateCity 相关联。如果是这种情况，那么您的用户总是需要在创建仓库时选择州和城市，并且该逻辑由您的控制器处理并由您的仓库模型验证。

如果您的所有验证都是正确的，那么您在 Warehouse 模型的 show 操作中需要做的就是从您的仓库中获取 StateCity 对象：

```
@state_city = warehouse.state_city 
```

然后在您的视图中只需访问字段`@state_city.state`和`@state_city.city`. 我不完全确定您是如何创建这些 StateCity 对象的，但这听起来很像您想要做的事情。

如果您的 state_city 为 nil，您可以根据要显示的内容以不同的方式处理它。如果您仍想显示仓库显示视图，那么在视图中您可以进行如下检查

```
<% if @state_city %>
  # Do something with the state city like display the state and city?
<% end %> 
```

例如，如果您想告诉用户更新州城市，您可以通过以下方式从控制器处理

```
unless @state_city
  redirect_to "your edit action" and return
end 
```

它将检查您的 state_city 是否为空，然后它将用户重定向到您想要的任何操作。

# bash - 使用 bash 工具转换 .csv

> ID：13852345
> 
> 赞同：0
> 
> 时间：2012-12-13T03:14:12.090
> 
> 标签：bash, csv, sed, awk

德语版的 Origin [TM] 非常奇怪地保存 .csv 文件。但是，我有许多这些 .csv 文件，并希望使用脚本对其进行转换。

```
A,B
Independent variable,comment1 
"0,4","0,067"
"0,0","0,08"
"0,07","0,02"
"0,09","0,00" 
```

应该成为

```
A,B
# Independent variable,comment1 
0.4,0.067
0.0,0.08
0.07,0.02
0.09,0.00 
```

Origin 对评论的定义似乎是

> 这是第二行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T03:44:02.030

如果您的 csv 文件有结构，并且上面 Kevin 的评论是正确的，那么您可以[按行号使用范围](http://www.grymoire.com/Unix/Sed.html#uh-28)：

```
sed '2s/^/# /; 3,$s/"\([^,]*\),\([^,]*\)"/\1.\2/g' file 
```

或者更短的方式：

```
sed '2s/^/# /; 3,$s/,/./g;s/"."/,/g;s/"//g' file 
```

结果：

```
A,B
# Independent variable,comment1 
0.4,0.067
0.0,0.08
0.07,0.02
0.09,0.00 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T03:24:34.147

使用 sed，假设注释行有这个词`comment`：

```
sed 's/"\([0-9]*\),\([0-9]*\)"/\1.\2/g;/comment/{s/^/#/}' input 
```

假设注释遵循单个大写变量名：

```
sed 's/"\([0-9]*\),\([0-9]*\)"/\1.\2/g;/^[A-Z],/{n;s/^/#/}' inpu 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T14:21:20.067

如果你喜欢简单的解决方案，这里是 awk：

```
$ cat tst.awk
BEGIN{FS="\",\""; OFS=","}
NR == 2 { $0 = "# " $0 }
NR >= 3 {
   for (i=1;i<=NF;i++) {
      sub(/\"/,"",$i)
      sub(/,/,".",$i)
   }
}
{ print }

$ awk -f tst.awk file
A,B
# Independent variable,comment1
0.4,0.067
0.0,0.08
0.07,0.02
0.09,0.00 
```

“NR”是行号，“NF”是`","`当前行上的分隔字段数。其余的应该是显而易见的，我认为，即使你不知道 awk。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T06:25:14.883

```
perl -pe 's/\"//g;if($.==2){s/^/#/g;}' your_file 
```

如果您想进行就地更换：

```
perl -pi -e 's/\"//g;if($.==2){s/^/#/g;}' your_file 
```

awk：

```
awk '{gsub(/\"/,"");if(NR==2)$0="#"$0;print}' your_file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T16:39:37.867

另一种解决方案：

```
awk -F\" '{$1=$1; gsub(/0,/,"0."); gsub(/ /,""); if(NR==2) printf "%s ", "#"}1' file 
```

# perl - 如何使用 $_ 找出 perl 中的下一行是否为空白？

> ID：13852346
> 
> 赞同：1
> 
> 时间：2012-12-13T03:14:33.577
> 
> 标签：perl

我有一个文本文件。

```
open FILE,"<data.txt";
while(<FILE>) {
  print $_;
  if($_ =~ m/Track/) {
    # do something ......
    #if next line is blank do something else....
  }
} 
```

但是如何发现呢？任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T03:18:44.900

您还没有阅读下一行，因此您无法检查它是否为空白。相反，一旦遇到空行，您必须使用缓冲区来处理较早的行。

```
my $last;
while (<>) {
   s/\s+\z//;
   if ($.>1 && !length) {
      ...do something with $last...
   }

   $last = $_;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T03:17:08.367

如果您还没有阅读下一行，您将无法根据下一行的内容做出任何决定。但是您可以执行以下操作：

```
open FILE,"<data.txt";
my $current = <FILE>;
my $next;
while(<FILE>) {
  $next = $_;
  print $current;
  if ($next) {
      # do something ......
  } else {
      #if next line is blank do something else...
  }
  $current = $next;
} 
```

当您到达文件末尾并且没有下一行要读取时，您还必须准确地决定要做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T04:00:08.740

其他一些想法，取决于您在做什么：

使用 File::ReadBackwards 向后读取并跟踪“上一个”行是否为空白。

阅读段落模式 ( `$/ = ""`) 并匹配`/(^.*Track.*\n)(.)?/m`，是否定义了基于 $2 的不同操作。

使用 Tie::File 将文件绑定到一个数组并遍历其索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T06:56:08.193

一般来说，我喜欢其他建议，将您的状态保存在此行，找到与您的未来条件匹配的行并检查过去的条件。

然而，特别是对于您正在谈论的这种事情，我喜欢在文件中啜饮并使用找到您正在寻找的两行的表达式。如果您最终只是想使用`s///mg`而不是使用`m//`;会容易得多

```
open FILE,"<data.txt";
my $text = do { local( $/ ) ; <FILE> } ;
close FILE; 
# the slurping I mentioned is now done.
my $tail = "";
while($text =~ m/\G((?:.|\n)*?)^.*Tracks.*$/mg) {
  print $1;
  if($text =~ m/\G.^$/ms) {
    print "the next line is blank";
  } else { 
    print "wait,";
  }
  $text =~ m/(\G.*)/ms;
  $tail = $1;
}
print $tail; 
```

我对`$tail`上面的部分不太满意，但我试图避免使用`$'`and`$&`据说会减慢所有匹配器的速度。如果文件不包含任何包含“Tracks”的行，我也不确定这是否有效。

我对此进行了测试：

```
你好，
我要给你讲一个故事
关于包含 Tracks 的行
虽然后面没有空行
另一行包含 Tracks 是

然后只有一个字
曲目
后面没有空行

相对于
曲目

这就是故事。

```

并得到：

```
你好，
我要给你讲一个故事
等待，
虽然后面没有空行
下一行是空白

然后只有一个字
等待，
后面没有空行

相对于
下一行是空白

这就是故事。

```

# grails - grails中IF条件的语法

> ID：13852351
> 
> 赞同：0
> 
> 时间：2012-12-13T03:15:06.107
> 
> 标签：grails, if-statement, controller, gsp

我在 grails 中遇到了 IF 条件的语法问题。

这是代码：

```
int ab = 9999
    println(ab+"ab")
    println(params.username+"parameter")

    if (params.username == ab)
    {
        println("hello")
    }
    else
    {
        println("fail")
    } 
```

这是 GSP 中的代码：

```
<form>
Username:<g:textField name ="username"></g:textField>
 <g:actionSubmit value="Submit" action="abc" type="button"/>
</form> 
```

结果是：

```
9999ab
9999parameter
fail 
```

所以问题是，我希望代码打印你好。但是每当我在用户名文本字段中输入“9999”时。它只是没有通过条件并立即进入其他状态。有人知道发生了什么吗？非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T03:20:21.110

您正在尝试将 String 与 int 进行比较，您可以执行以下操作：

```
def ab = "9999"

if (params.username == ab)
{
    println("hello")
}
else
{
    println("fail")
} 
```

或者如果你想比较整数：

```
int ab = 9999

if (params.int(username) == ab)
{
    println("hello")
}
else
{
    println("fail")
} 
```

# javascript - Chrome 扩展 - 未定义 html

> ID：13852356
> 
> 赞同：0
> 
> 时间：2012-12-13T03:15:28.643
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

因此，我正在尝试在 Chrome 扩展程序中运行 jQuery 内容脚本。很简单，对吧？我可以：

`$("#header").hide();`

很好（如果一个元素的 id 为“header”），但只要我尝试：

`$(html).hide();`

控制台说：

`Uncaught ReferenceError: html is not defined`

我试过了`body`，，`div`一切。我不能直接抓取所有元素。是什么赋予了？如果有帮助，我正在使用 jQuery 1.8.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:16:57.120

`html`没有定义，`"html"`是。把它放在引号里。

```
$("html").hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:18:25.323

的 DOM 对象`<html>`是`document`，不是`html`。

# python - 二进制数据图像原始python

> ID：13852357
> 
> 赞同：4
> 
> 时间：2012-12-13T03:15:35.037
> 
> 标签：python, image, networking, binary

所以这就是我想要做的：有这个图像服务器将在端口 5003 上发送数据它将传输的数据格式如下 1 字节的图像类型（0=raw，1=JPEG）然后下一个 4 字节用于图像大小，然后将有 n 字节，其顺序如下：宽度 2 字节，高度 2 字节，B 1 字节，R 1 字节，G 1 字节

所以我要做的是获取数据并使用以下代码将其转换为图像：

```
#! /usr/bin/python
import socket
import sys
import binascii
from PIL import Image
from StringIO import StringIO

# Connect to the server image
serverHost = 'localhost'
serverPort = 5003
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((serverHost, serverPort))

print >>sys.stderr, 'Connecting to host: ' +  str(serverHost) 
print >>sys.stderr, 'and server Port: ' + str(serverPort)

s.settimeout(1)

#Receive the image type
imageType = s.recv(1)
print>>sys.stderr, 'received %r' %binascii.hexlify(imageType)
print>>sys.stderr, 'Unpacked: ', int(binascii.hexlify(imageType), 16)
received = imageType.__len__()
print>> sys.stderr, "Received: ", received 

#Receive the image size
imageSize = s.recv(4)
print>>sys.stderr, 'received %r' %binascii.hexlify(imageSize)
print>>sys.stderr, 'Unpacked: ', int(binascii.hexlify(imageSize), 16)
received = imageSize.__len__()
print>> sys.stderr, "Received: ", received 

#Receive the image Data
imageData = ''
received =0
while(received < int(binascii.hexlify(imageSize), 16)):
  buffer = s.recv(4096)
  imageData += buffer
  received += buffer.__len__()
  print>> sys.stderr, "Received: ", received 

img = Image.fromstring('RGB', (1280, 720), imageData, 'raw')

#img = Image.open(StringIO(binascii.hexlify(imageData)))
img = img.convert('RGB')
img.save('out.png')

#file = open('test.png', 'w');
#file.write(imageData)
#file.close()

#When we receive the image, we send the acknowledgement
s.send('OK')
s.close()`enter code here` 
```

但是每次我运行代码时总是会出现这种错误

```
"Value error not enough Image Data" 
```

如果改变

```
img = Image.fromstring('RGB', (1280, 720), imageData, 'raw') 
```

至

```
img = Image.fromstring('BRG', (1280, 720), imageData, 'raw') 
```

我收到此错误：

```
Value error: Unrecognized mode, 
```

任何人都知道如何解决这种问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:36:00.537

最好在完全给出服务器和客户端的代码时调试这些问题（但简化为仅显示问题）。

因此，以下是基于您的初始代码和描述的非常基本的客户端。请注意，`image_type`它没有被使用，它只是在那里，因为您提到您想要区分 JPEG 和 RAW。我总是假设接收到的数据是 RGB 数据，您可以根据实际问题进行调整。这里的主要区别是使用`struct`，这是一种标准方法，以通用格式打包数据以通过网络发送并避免与字节顺序相关的问题。此代码还期望接收图像宽度和高度（代码中不存在），因此您可以在客户端中重建图像。

```
import socket
import struct
from PIL import Image

def recv(sock, size):
    data = ''
    to_receive = size
    while to_receive > 0:
        data += sock.recv(size)
        to_receive = size - len(data)
    return data

serv_host = ''
serv_port = 5003

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((serv_host, serv_port))

s.settimeout(1)

image_type = struct.unpack('!b', recv(s, 1))[0]
print "Image type: %d" % image_type
image_size = struct.unpack('!i', recv(s, 4))[0]
print "Image size: %d" % image_size
image_width, image_height = struct.unpack('!hh', recv(s, 4))
print "Image dimensions: %d x %d" % (image_width, image_height)

# Receive image data
image_data = recv(s, image_size)
print len(image_data)

# When we receive the image, we send the acknowledgement.
s.send('OK')
s.close()

img = Image.fromstring('RGB', (image_width, image_height), image_data)
img.save('out.png') 
```

由于不包括服务器，因此以下是一个简单的尊重您描述的协议的服务器。我没有费心检查服务器中完全接收到的数据。另请注意，此服务器仅提供在您运行时在命令行中指定的单个图像。再次，适应你的问题。另请注意，我没有发送图像模式，这可能是实际应用中的问题。

```
import sys
import socket
import struct
from PIL import Image

host = ''
port = 5003
backlog = 5

serv_img = Image.open(sys.argv[1])
simg_size = serv_img.size
serv_data = serv_img.tostring()
data_size = len(serv_data)

print "Serving data of size %d" % data_size

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
s.bind((host, port))
s.listen(backlog)
while True:
    client, address = s.accept()

    client.sendall(struct.pack('!b', 1))
    client.sendall(struct.pack('!i', data_size))
    client.sendall(struct.pack('!hh', *simg_size))
    client.sendall(serv_data)

    data = client.recv(2)
    if data == 'OK':
        print "OK", address

    client.close() 
```

关于不使用`__len__`的提示仅仅是因为它是 Python 中的一种特殊方法，它是由`len`自身调用的。如果您没有任何充分的理由使用特殊方法，请不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T19:17:02.730

您提到使用 USARSim 的图像服务器。这是我用来从 USARSim（UT2004 版本）接收图像的代码：

```
def get_image(sock):    
    image_type = struct.unpack('b', sock.recv(1))[0]    
    image_size = struct.unpack('>i', sock.recv(4))[0]

    if image_size < 250000:      
        image_data = ""
        received = 0
        while (received < image_size):
            data = sock.recv(image_size-received)
            received += len(data)
            image_data += data        

        filename = "image_%s.jpg" % str(now())
        with open(filename, "wb") as f:
            f.write(image_data)

def write_ack(sock):
    sock.send("OK")

def main():
   sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
   sock.connect((host, port))

   while True:
       get_image(sock)
       write_ack(sock) 
```

# google-chrome-extension - chrome.tabs.onUpdated 响应 iframe

> ID：13852359
> 
> 赞同：1
> 
> 时间：2012-12-13T03:15:40.187
> 
> 标签：google-chrome-extension

每当TAB的URL更改或包含任何IFRAME的URL时，都会调用Chrome.tabs.onupdated。这是预期的结果吗？有没有办法过滤掉 iframe 的变化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:48:28.113

Yes, simply use the second parameter of the [`chrome.tabs.onUpdated`](http://developer.chrome.com/extensions/tabs.html#event-onUpdated) callback function:

```
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    if (changeInfo.url) {
        // The URL changed, do something
    }
}); 
```

# delphi - 如何在delphi中比较两个数组并从中删除重复项

> ID：13852369
> 
> 赞同：0
> 
> 时间：2012-12-13T03:16:24.303
> 
> 标签：delphi

我有两个数组。Array1 持有医学术语，而 array2 持有简单的英语术语。医学术语数组中包含一些非医学英语单词（在 array1 中重复）。这些是 array1 中的 20,000 个和 array2 中的超过 15000 个。使用delphi比较两个数组并从array1中删除重复单词的最快方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:38:43.477

如果您的数组已排序，请保留两个指针`p1`- 和`p2`to`array1`和`array2`resply。将它们初始化为指向`array1`and的第一个元素`array2`。

对于`array1`从第一个开始的每个条目，查看它是否是单词array2[p2]。如果是，只需将其从`array1`. 如果不是，则递增`p2`直到

```
( (array1[p1] >= array2[p2]) and (array1[p1] < array2[p2+1]) ), 
```

`array1[p1]`如果你找到一个命中删除。

需要`O(n)`时间。有`O(nlogn)`时间排序算法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T05:29:26.547

如果数组未排序，则此方法更快： 1\. 将 array2 中的所有单词填充到字典中。2\. 遍历array1，查找字典中的每个单词，如果找到就删除它。

第 1 步和第 2 步都需要 O(n) 时间。

如果你有一个旧版本的 delphi，你必须使用一个字典类，比如在你的 delphi 安装的 Memini.Pas 文件中的 THashedStringList。对于非常大的 N，它会退化，但对于 20.000 个条目，它仍然非常快。

可以在[此处](http://www.delphipraxis.net/45571-hash-tabellen.html)找到能够在 O(1) 中存储和查找 1 亿个字符串的非常快速的实现。这篇文章是德文的，但代码是英文的并且可以理解。

# objective-c - Objective-C 中的运行时类型检查是否正常？

> ID：13852372
> 
> 赞同：1
> 
> 时间：2012-12-13T03:16:33.123
> 
> 标签：objective-c

新的objective-c。当我用强类型的 OO 语言编写代码时，我喜欢让我的设计在代码中尽可能明确，我还喜欢通过检查参数值范围等来确保我保持程序的正确性（例如，在方法的开头确保对象引用不为空，尽可能使用常量..)。这些简单的检查帮助我和我的同事在开发期间发现问题。

现在在 Objective-c 中工作，我真的很想在向协议实现发送消息之前检查以确保支持选择器。或者手动检查`NSArray`.

这些类型的检查在 Objective-C 程序中是否正常？您认为何时需要进行这些检查？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:25:04.503

您尝试做的事情是完全可以接受的，尽管不一定是每个程序员方法的基础。（我并不总是这样做，尽管也许我应该这样做。）

你检查的方式是这样的：

```
if([someObject respondsToSelector:@selector(someSelector)]){
  [someObject someSelector];
} 
```

如果您向对象发送消息但它没有响应，您将遇到运行时崩溃。如果您提前检查，您的逻辑可能完全不正确。（一个常见的例子是当你认为你在处理一个对象时，实际上你在处理完全不同的东西。这引入了开发过程中的崩溃与运行时的预期值/行为之间的权衡。

如果您仔细编码，您将比详细检查走得更远。

**编辑：**

再考虑一下您的问题，运行时还提供了该`conformsToProtocol:`方法，该方法允许您检查类或实例是否符合协议。这似乎正是您想要的。

无论您多么小心，这对于不崩溃实际上至关重要的地方是，当您添加对新 iOS 功能的支持同时保持向后兼容性时。（在这种情况下，您对新框架的链接较弱，并使用这些相同的检查来确保兼容性。  

正如其他人所指出的，当涉及到协议时，您确实会得到某种形式的编译时检查。如果一个方法没有被标记为`@optional`，Xcode 会警告你一个不完整的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:24:28.373

如果协议定义将方法声明为`@required`检查将是多余的，如果它正在`@optional`检查它是必须的。如果您想要一个防弹代码，检查数组中对象的类型可能是一个好习惯（但是，它可能有一些性能缺陷），但我自己从来没有这样做过，尽管我通常独自工作并且宁愿以暗示性的方式命名我的数组而不是检查类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T03:25:39.137

关于协议，如果您将方法声明为`@optional`，则实现是可选的，因此您应该检查对象是否实际响应选择器（通常您缓存检查的结果，而不是在每次调用时检查它）。如果它不是可选的，请不要测试。编译器将对未实现的选择器发出警告，因此如果您只想失败，则实际上不需要运行时检查（运行时将抛出异常并且调试器将中断，因此您无论如何都会知道缺少什么） .

关于检查数组中的对象，您可以这样做，但通常如果您不想接受每个对象，您不会导出数组本身，而是导出类似`addMyObject:(AllowedObject *)object`. 显然，如果您接受一个数组作为参数并希望确保其中的所有对象都符合，您应该检查该对象（当您遍历数组时，或者通过调用类似`indexesOfObjectsPassingTest:`的东西并检查返回的`NSIndexSet`是否有与数组相同的计数（或者您可以`NSIndexSet`从原始数组中获取并获取它所描述的子数组，然后使用它），具体取决于您的需要）。

但是，由于 Objective-C 运行时，您不必检查每个方法调用。如果不支持，调试器将中断，您可以确定问题所在。然而，通过宏检查您的参数或有效性是一个好习惯`NSAssert`（如果您还没有这样做，请编写单元测试，它们也会在某一时刻为您省去很多麻烦！）。

# javascript - 如何找到网页上隐藏文字的宽度？

> ID：13852373
> 
> 赞同：1
> 
> 时间：2012-12-13T03:16:34.483
> 
> 标签：javascript, html, css

所以我试图添加这个工具提示，它会根据它包含的文本的宽度调整大小。Tooltip 是一个 div，它有另一个包含文本的 div。

```
<div><div> tooltip text </div></div> 
```

我使用 javascript 作为 mytooltiptext.innerHTML=sometext 为其分配文本。工具提示在显示设置为无时隐藏，并在鼠标悬停时变为可见。我正在尝试根据包含 div 的文本/文本的宽度在它变得可见之前设置它的宽度。但是当我尝试获取包含 div 的文本的 clientWidth 或 scrollWidth 时，它显示为零。我的理解是，由于元素被隐藏，它正在发生。我尝试将其显示设置为阻止并将可见性设置为隐藏，然后尝试获取必要的值，但无济于事。有没有办法在不先使其可见的情况下获得隐藏文本的宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:27:08.047

不要隐藏它，将其移出屏幕，然后将其重新悬停。

CSS：

```
.inputtext span {
margin-left: -999em;
position: absolute;
}

.inputtext:hover span {
position: absolute;
left: 1em;
top: 2em;
z-index: 99;
margin-left: 0;
}​ 
```

HTML：

```
<div class="inputtext">Hover Me<span id="hiddenText">
This is the hidden text and some more text</span></div>​ 
```

演示：http: [//jsfiddle.net/calder12/PBsJA/3/](http://jsfiddle.net/calder12/PBsJA/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:23:54.927

你可以把它画到屏幕外。就像是：

```
.myCssStyle{
  position: absolute;
  right: 5000px;
} 
```

# asp-classic - 我如何知道/检查我的 Classic ASP 网站是否受到 SQL 注入的保护？

> ID：13852375
> 
> 赞同：2
> 
> 时间：2012-12-13T03:16:54.120
> 
> 标签：asp-classic, sql-injection

我有一个使用经典 ASP 技术的维护网站。现在，我的客户询问该网站是否受到 SQL 注入的保护。

我尝试过 Microsoft Source Code Analyzer for SQL Injection，但测试后没有收到任何警告。

有没有其他方法可以检查/验证这些经典的 ASP 源代码是否免受 SQL 注入攻击？

请指教！谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T04:07:33.993

没有一种方法可以知道。您可以发布一些代码，看看它的外观。

关键是您不要使用来自外部的受污染数据构建 SQL 语句。

如果你建立这样的陈述

```
sql = "select * from whatever where id = " + id_parameter 
```

那么您正在使用来自外部世界的数据构建 SQL 语句，这很危险。

您必须使用参数化查询，如下所示：

```
objCmd.CommandType = adCmdText;
objCmd.CommandText = "UPDATE members SET photo = ? WHERE memberID = ?";
objCmd.Parameters.Append(
    objCmd.CreateParameter("filename", adVarChar, adParamInput, 510, fileName));
objCmd.Parameters.Append(
    objCmd.CreateParameter("memberID", adInteger, adParamInput, 4, memberid ));
objCmd.Execute(adExecuteNoRecords); 
```

请注意，`objCmd.CommandText`不使用来自外部的任何数据。外部数据通过 CreateParameter 调用汇集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:40:54.380

将代码修补为无 sql 注入的一种简单方法是在数字上使用函数 Cint()：

```
if (request("id")<>"") then id=Cint(id) 
```

或字符串：

```
if (request("str")<>"") then
 str=Replace(request("str"),"'","''")
 str=Replace(request("str"),"%","")
end if 
```

希望这可以帮助

# html - 覆盖 [class] css 声明

> ID：13852378
> 
> 赞同：1
> 
> 时间：2012-12-13T03:17:00.747
> 
> 标签：html, css, css-selectors

我正在使用的主题中有 CSS，我只需要在特定的 div 中覆盖它。CSS是：

```
[class] {
    list-style: none outside none;
    overflow: hidden;
    padding: 0;
} 
```

本质上我需要做的是：

```
#myspecialdiv [class] {
    overflow: auto;
} 
```

做这个的最好方式是什么？可能吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:18:52.193

这可能是在不更改标记的情况下做到这一点的最明智的方法......或者，看看您是否可以识别其中可能出现的所有可能的类`div`，并编写一个包含所有可能性的选择器。这可能是荒谬的，甚至可能是不可行的，但你永远不知道人们为了提高“渲染性能”会付出多大的努力。

这取决于你的标记，真的。但这也取决于您的主题风格；我想不出任何好的理由为什么要对具有任何`class`属性的任何元素设置这样的任意规则：

*   为什么任何类的所有元素都必须隐藏溢出？
*   为什么他们必须没有列表样式？
*   为什么它们必须没有填充？

只是一些思考的食物......

# php - 脸书标题

> ID：13852385
> 
> 赞同：0
> 
> 时间：2012-12-13T03:17:34.713
> 
> 标签：php, facebook

我只是对脸书很好奇。这些是我的问题。

1.  其页面中的 facebook 标头如何在其内容和正文执行时不会重新加载？
2.  除了 php、javascript 和 ajax 之外，还有其他编程或脚本语言用于制作 Facebook 页面吗？

谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:01:49.123

我不确定 Facebook 是如何实现这一点的，但我的猜测是，它使用某种 pushState 和 AJAX 仅更新网站的部分内容（HTML）。

**PushState**用于浏览历史记录，并使网页的工作和行为与重新加载整个页面时完全一样。它更改浏览器地址栏中的地址，使用户能够像普通页面加载一样使用浏览器中的后退和前进按钮。用户将无法区分。

**AJAX**用于在后台获取新内容，然后更新 DOM/HTML，而无需重新加载页面，就像普通的 AJAX 调用一样。您可以在不加载页眉和页脚的情况下使用导航时更新的页面特定内容的 div。

**例子：**

单击导航链接只会在后台使用 AJAX 调用从#content div 重新加载内容。

```
 <html>
      <head></head>
      <body>
           <header>
                <nav>
                      <a href="/page1">Page 1</a>
                      <a href="/page2">Page 2</a>
                </nav>
           </header>
           <div id="content">
              page content
           </div>
           <footer>
              footer content
           </footer>
       </body>
<html> 
```

例如，这可以通过 jQuery 插件**[PJAX](http://pjax.heroku.com/)**轻松完成。有关实施和下载的更多详细信息，请参阅[GitHub 页面](https://github.com/defunkt/jquery-pjax)

注意：这在 IE 9 中不起作用（但它应该在 IE 10 中起作用，但我自己没有尝试过也没有确认过），但大多数工具，包括 PJAX，都可以轻松优雅地降级，因此不受支持的浏览器会得到一个完整的页面重新加载。

# c - 使程序堆栈不可执行以阻止代码注入攻击

> ID：13852391
> 
> 赞同：2
> 
> 时间：2012-12-13T03:18:31.593
> 
> 标签：c, callstack

为什么栈是可执行的？如果系统强制栈不可执行，文本不可写，代码注入攻击能完全停止吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:21:37.080

即使*堆栈*不可执行，也可以更改它......导致例程返回到不同的地址（因为返回地址通常存储在堆栈中）。

如果*堆*是可执行的，则可以写入*数据*以包含有效的操作码，并且可以操纵返回地址以返回该代码。

DEP（[数据执行保护](http://en.wikipedia.org/wiki/Data_Execution_Prevention)）和 NX（[从不执行](http://en.wikipedia.org/wiki/NX_bit)）等技术可以保护堆和堆栈不被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:35:59.670

可执行堆栈的主要历史原因是与一个鲜为人知且很少使用的 GCC 特性兼容，称为“嵌套函数”，它相当于具有自动存储持续时间的闭包。如果获取嵌套函数的地址，程序实际上必须生成一段代码，称为蹦床，以加载指向实际函数将使用的数据的隐藏参数。此代码位于堆栈上。

请注意，嵌套函数不是 C 语言的一部分，在 C 语言中没有理由让堆栈可执行。C 甚至不要求代码和数据位于公共地址空间中。因此，不旨在支持嵌套函数等非标准扩展的实现不应该提供可执行堆栈，因为它们加剧了程序可能存在的任何安全漏洞的危险。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T03:55:55.433

为什么栈是可执行的？因为较旧的 x86 MMU（内存管理单元）每页只有 1 个访问位。值是读-执行或读-写-执行。具有 DEP 和 NX 的较新芯片在每页中添加了另一个位，以对执行权限进行细粒度控制。

# objective-c - 如何在 Facebook iOS SDK 上存储多个分数值

> ID：13852392
> 
> 赞同：4
> 
> 时间：2012-12-13T03:18:42.267
> 
> 标签：objective-c, facebook, facebook-graph-api

我知道我可以访问 Score API 以在 Facebook 上存储玩家的分数。我的问题是，如果我想对多个分值进行评分，我该怎么做？

例如，我想存储 Highscore 和 Total Distance Travelled。我现在的做法是：

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   [NSString stringWithFormat:@"%d", mScore], @"score",
                                   nil];

[FBRequestConnection startWithGraphPath:[NSString stringWithFormat:@"%llu/scores",
fbid] parameters:params HTTPMethod:@"POST" 
      completionHandler:^(FBRequestConnection *connection, id result, NSError *error)]; 
```

但这只允许我存储一个值，因为通过再次为其他值调用相同的东西，它将覆盖旧值。

任何人都知道如何存储多个值？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T14:52:44.590

从 Facebook 文档 - [https://developers.facebook.com/docs/games/scores/](https://developers.facebook.com/docs/games/scores/)：

> 当玩家获得新的高分或超过朋友的分数时，用于分数的 Graph API 允许游戏开发人员在新闻源和时间轴上发布游戏故事。

基本上，用户当前可以有一个与应用程序相关联的分数，这适用于只有一个高分而不是多个高分的游戏。

# delphi - Graphviz dot（或滚动我自己的克隆） - 我如何自动排列面板？

> ID：13852397
> 
> 赞同：4
> 
> 时间：2012-12-13T03:19:15.330
> 
> 标签：delphi, graphviz

我想阅读数据库模式并显示链接它们的表和键。

这是[Graphviz Dot](http://www.graphviz.org/)擅长的事情（例如，类似这样的事情[，](http://www.graphviz.org/content/datastruct)但使用数据库表）。

我想我可以使用 Delphi 读取 d/b 模式，生成 DOT 输入文件，调用 DOT 并在 TImage 中显示结果，但我希望能够将表表示为 VCL 组件，可点击上下文相关菜单等。更多的读写比只读。

我也想一般地做这种事情，而不仅仅是数据库。

所以，到目前为止，如此模糊和即将删除，所以是时候提出一个特定的问题（或两个）了。

如何自动排列 VCL 组件（例如 TPanel）？

以及如何在视觉上链接它们（带箭头）？到目前为止，我只从[ExpressForum Library](http://www.devexpress.com/Products/VCL/ExForumLibrary/Info.xml)中找到了 TDxfconnector ，但这似乎将连接点限制在边角和中间。如果我有一个（设计糟糕的）数据库表，其中有 16 个索引到另一个表中，我怎么能用箭头链接它们？

我认为这分为两种情况 - 静态和动态（我只是在绘制图表，还是用户可以拖动组件并期望箭头跟随？）。

这可以做到吗，还是我有野心？我正在搜索现有的 VCL 组件，但没有真正的运气。

* * *

[更新] 见[http://kylecordes.com/2003/graphviz-delphi](http://kylecordes.com/2003/graphviz-delphi)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:51:30.787

我知道的唯一接近您需要的组件是来自[delphiarea的](http://www.delphiarea.com)[Simple Graph](http://www.delphiarea.com/products/delphi-components/simplegraph/)，当您在那里时，请查看其他组件，有很多高质量的！

# sh - 或运算符并检查 6 个空字符和空文件（shell 脚本）

> ID：13852401
> 
> 赞同：1
> 
> 时间：2012-12-13T03:19:28.903
> 
> 标签：sh

下面的shell脚本是test.sh，目前它能够检查第10到第15个字符是否等于'000000'。但是，它还应该检查 ' ' 6 个空空格以及空文件。问题是：1）如何检查空文件？

```
filename=$1

extracted=`head -1 $filename | cut -c10-15`

if [ $extracted -eq '000000' ] ###how to check for '      ' 6 null character with or operator?
then 
mv $filename new.$filename
fi 
```

例如输入文件：

案例1（6个0000000前后的一些字符）truefile.txt：

```
123456789000000161718 
```

案例2（空文件）trueemptyfile.txt：

```
"there's nothing in this file. Empty. " 
```

情况3（''前后的一些字符6个空字符）truepartialempty.txt

```
123456789      16171819 
```

谢谢

还有一件事所有这些文件都在 /temp 文件夹下

```
/temp> ls

 test.sh truefile.txt trueemptyfile.txt truepartialempty.txt 
```

如何运行 test.sh 来检查所有文件。谢谢你。

是吗？

```
 sh test.sh *.* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:54:35.317

您必须更好地定义空字符的含义。

当您显示时`' '`，这些是空格字符。null 这个词有几种解释。在 DB 中，NULL 是一个特殊的词，意思是“一个未知的值”。在编程 NUL 或 NULL 或 null 时，可能意味着 char `\000`。该数字值用作特殊标记，以在“C”程序中（至少）指示“字符串结尾”。

假设您的意思是空格字符，您可以准确搜索它们是否已定义它们：

```
if [ $extracted -eq '       ' ] 
#--------------------^^^^^^^ 
```

但当然要注意 $exacted 不能同时等于 000000 和 ' '，对吗？

也许您会发现测试这些值更容易，例如

```
if echo "$extract" | grep -q '000000' ; then
      echo found 000000
fi
if echo "$extract" | grep -q '      ' ; then
       echo found spaces
fi 
```

请注意，由于 \000 对 c-lang 程序的特殊含义，包括 grep 和关于 unix 中的所有内容，您不能可靠地执行

```
if echo "$extract" | grep -q '\000\000\000\000\000\000\000' ; then 
 .... 
```

（实际上，这可能有效，因为 "$extract" 不是文件，但如果您尝试`grep -q '\000' myFile`，这可能无法可靠地工作，因为根据定义，内部带有 '\000' 的文件是二进制文件，而不是文本文件和 grep 等是用于扫描文本文件的工具）。

如果这确实是您想要的，可能有一些技巧可以找到这些，所以请编辑您的问题以表明这是否是您的要求。

IHTH

# java - 使用 javascript 实现交易/报价 API（c++ 或 Java）

> ID：13852403
> 
> 赞同：2
> 
> 时间：2012-12-13T03:19:57.607
> 
> 标签：java, javascript, c++, html

我正在为需要处理流数据以及发送和接收金融交易信息的 HTML5 Web 应用程序做概念验证。对于这个应用程序，我最初的目标是[**FXCM**的 ForexConnect API](http://www.fxcodebase.com/wiki/index.php/Category%3aForexConnect)。它以 c++、java 和 .NET 版本提供。

我正在尝试找到一种方法来避免创建位于客户端和 API 之间的服务器（避免产生数据成本）。有没有人有任何建议或技巧可以让我从客户端javascript实现这个API？

我希望解决方案尽可能跨浏览器友好。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:27:25.817

Java can run on the client side, so that'd probably be your best approach. You could implement something in Java which makes data available to JavaScript, which could take it from there. You'd have to implement a small, possibly invisible Java applet. [Communicate between Java and JavaScript](https://stackoverflow.com/questions/9190239/looking-for-simple-way-of-communication-between-javascript-and-java)

I didn't see any listing for it, but if they had a web-based API you could do it that way as well (though looking at it's relative complexity, it probably doesn't).

# php - 更新将模态窗口与表单提交到数据库集成

> ID：13852408
> 
> 赞同：0
> 
> 时间：2012-12-13T03:20:31.520
> 
> 标签：php, javascript, jquery, html, mysql

我想要做的是当用户单击一个复选框时，它会打开带有表单的模式窗口，并且该表单将信息提交到数据库，并在模式窗口中显示谢谢。

我正在使用以下模式窗口： [http ://designwoop.com/2012/07/tutorial-coding-a-jquery-popup-modal-contact-form/](http://designwoop.com/2012/07/tutorial-coding-a-jquery-popup-modal-contact-form/)

1.  如何通过选中复选框而不是单击链接来启动模式窗口？

任何建议将不胜感激。

谢谢！

更新：

```
<input type="checkbox" id="check_open" />Open</div>

<!-- hidden inline form -->
<div id="inline">
<h2>Send us a Message</h2>
<form id="contact" action="#" method="post" name="contact"><label for="email">Your E-mail</label>
    <input id="email" class="txt" type="email" name="email" />

    <label for="msg">Enter a Message</label>
    <textarea id="msg" class="txtarea" name="msg"></textarea>

    <button id="send">Send E-mail</button></form></div>

<!-- basic fancybox setup -->
<script type="text/javascript">
    function validateEmail(email) { 
        var reg = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
        return reg.test(email);
    }

    $(document).ready(function() {
        $("#check_open").fancybox();
        $("#contact").submit(function() { return false; });

        $("#send").on("click", function(){
            var emailval  = $("#email").val();
            var msgval    = $("#msg").val();
            var msglen    = msgval.length;
            var mailvalid = validateEmail(emailval);

            if(mailvalid == false) {
                $("#email").addClass("error");
            }
            else if(mailvalid == true){
                $("#email").removeClass("error");
            }

            if(msglen < 4) {
                $("#msg").addClass("error");
            }
            else if(msglen >= 4){
                $("#msg").removeClass("error");
            }

            if(mailvalid == true && msglen >= 4) {
                // if both validate we attempt to send the e-mail
                // first we hide the submit btn so the user doesnt click twice
                $("#send").replaceWith("<em>sending...</em>");

                $.ajax({
                    type: 'POST',
                    url: 'sendmessage.php',
                    data: $("#contact").serialize(),
                    success: function(data) {
                        if(data == "true") {
                            $("#contact").fadeOut("fast", function(){
                                $(this).before("<p><strong>Success! Your feedback has been sent, thanks :)</strong></p>");
                                setTimeout("$.fancybox.close()", 1000);
                            });
                        }
                    }
                });
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:32:20.610

该示例将该`.fancybox()`方法连接到分配给 modalbox 类的任何内容：

```
$(".modalbox").fancybox(); 
```

如果您希望在单击复选框时启动模态对话框，请将其分配给 modalbox 类，或按 id 分配，例如：

```
<input type="checkbox" id="check_open" />Open 
```

和

```
$("#check_open").fancybox(); 
```

在你的`document.ready`功能中。

有很多例子可以将提交给 php 脚本的数据存储到数据库中。也许从[这里](http://www.w3schools.com/php/php_mysql_insert.asp)开始......

# signalr - 如何从 SignalR 消息中接收返回值？

> ID：13852409
> 
> 赞同：24
> 
> 时间：2012-12-13T03:20:32.357
> 
> 标签：signalr

我从 MVC 控制器操作中调用 SignalR

```
var context = GlobalHost.ConnectionManager.GetHubContext<MyHub>();
var ret = context.Clients.Client("Whatever").getValue(userId); 
```

无论如何，我可以从在动作内部的客户端上调用的 getValue() 方法获得响应吗？

我尝试了几种方法，但根本无法为 ret 获得任何价值。我很确定这不适用于 SignalR Hub，但找不到有关此的文档。

我考虑过的一种解决方案是在接收到 getValue 后，客户端将调用集线器中的方法，但随后我必须设法将集线器的响应获取到控制器中。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-11-02T12:23:12.253

从 JS 调用 SignalR 服务并获得返回值很简单！（对不起，我没有很好地阅读原始问题，可能是很晚了）。你可以做得很好：

```
<script type="text/javascript">
    $(function () {

        $.connection.hub.url = "http://localhost:8080/SignalR";

        // Declare a proxy to reference the hub.
        var myHub = $.connection.myHub;

        // Start the connection.
        $.connection.hub.start().done(function () {

            //Once connected, can call methods with return parameters:
            myHub.server
                .getValue("userId")
                .done(function (result) {
                    $('#resultText').val(result); //display in textbox the return value of a call to public string GetValue(string userId) 
                });
        });
    });
</script> 
```

在 SignalR 2.0 中工作

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-12-13T15:44:16.470

SignalR 与其说是一种 RPC 机制，不如说是一种消息传递机制。因此，没有真正的返回值概念。

如果你想这样做，你就会破解它。您可以简单地做一些事情，在服务器中调用 getValue()，然后客户端的响应是使用返回值调用服务器。

因此，例如，在您的 javascript 中，您可以有如下内容：

```
myHub.client.getValue = function(userId) {
  var retVal;
   ... set your retVal here ...
  myHub.returnValue(userId, retVal)
} 
```

然后让服务器实现一个 returnValue() 方法......

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-12-26T16:22:47.153

在服务器上：

```
 public bool TestBoolRetVal()
    {
        return true;
    } 
```

在 C# 客户端上：

```
 bool bres = HubProxy.Invoke< bool >("TestBoolRetVal").Result; 
```

当然，您可以定义任何签名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-11T08:11:36.277

要拥有像 infra 这样的 RPC，我们必须通过 SignalR*传输*来实现它。

这涉及将特定的“传出”服务器-> 客户端消息与另一个方向答案，即“传入”消息相关联，该消息保存返回值。

为此，我们必须完成三件事：

*   为传出提供一个唯一的 id，以便传入可以引用它。在不同的设计模式中有很多名称，例如*完成令牌*
*   因为 web 服务器会有很多并发客户端，所以可能同时有很多并发传出，我们必须将完成令牌存储在字典中，并为每个客户端关联一个完成任务，这实际上什么都不做，只是等待一个信号
*   当传入的答案到达服务器时，获取其中的完成令牌，并查找字典，并发出相关完成任务的信号并将结果传递给它。

如果有人对实现感兴趣，请参阅 Tomasz Pęczek 在 github 中的 repo： [这里](https://github.com/tpeczek/Demo.AspNetCore.SignalR.ServerToClientRpc)

# ruby-on-rails - 在rails中包含特定页面的javascript的正确方法

> ID：13852411
> 
> 赞同：1
> 
> 时间：2012-12-13T03:20:44.850
> 
> 标签：ruby-on-rails

似乎rails 3方式是将所有javascript全局包含到应用程序中。我对此是否正确？

原因是什么？

如果我不正确，包含特定于页面的 javascript 的标准方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:38:42.900

默认情况下，Rails 3 将包含**application.js**，其中包含`//= require_tree`使其依赖于**/app/assets/javascripts**中的所有其他 JS 文件。

`//= require_tree`您可以在**application.js**和**application.html.erb**中删除并通过添加以下内容来包含特定于控制器的 JS `<%= javascript_include_tag "application" %>`：

 **```
<%= javascript_include_tag params[:controller].split("/")[0]) 
```

然后，为每个控制器制作 JS 文件 ( **app/assets/javascripts/CONTROLLER-NAME.js )，其中包含：**

1.  `//= require application`
2.  特定于控制器的 JS

这些将依赖于**application.js**，但也可以有自己的 JS。

该`.split`方法允许像 Devise 这样的控制器在 / 之前使用他们的名字作为 .js 文件的名称，因此您只需创建**devise.js**而不是devise **/sessions.js**等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:31:15.383

You could use the `content_for` tag to add page specific content to the head of the page.

In your

**application.html.erb** (your layout file) under your javascript includes you add a line that says

`<%= content_for :js_include %>`

then in any page you want to include a page specific javascript you just do

```
<% content_for :js_include do %>
  <%= javascript_include_tag "some_javascript_file" %>
<% end %> 
```

I'm not sure if you have to inlcude the = sign on the javascript_include_tag (just make sure you put it as it is on the `application.html.erb` file but that's pretty much the gist of it. Using content_for tags

**EDIT**

Some helpful links

[Railscasts Episode Layouts and Content For](http://railscasts.com/episodes/8-layouts-and-content-for)

[Rails API content_for](http://api.rubyonrails.org/classes/ActionView/Helpers/CaptureHelper.html#method-i-content_for)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T03:36:40.000

很多种方法：

```
<%= javascript_tag "...javascript..." %>
* Generates <script type="text/javascript">...javascript...</script> 
```

或者

```
<% content_for :script do %>
   ...javascript...
<% end %>
* This approach includes script into <%= yield :script %> defined in the template anywhere, for example inside the <head> dom:
<head>
  ...
  <% if content_for?(:script) %>
    <%= javascript_tag yield(:script) %>
  <% end %>

</head> 
```

或许多其他方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T05:20:18.517

要将特定 javascript 文件仅包含到特定视图页面中，您需要执行以下过程。

```
i) In the assets folder create a separate folder eg. 'separate_view' , and inside put your specific js, and css files.

ii) In the application lay out write like following for 'separate_view'.
  <%= yield :separate_view %>

iii) In your target template write the following for 'separate_view'.
  <% content_for (:separate_view) do %>
    <%= javascript_include_tag "xxx.js" %>
    <%= stylesheet_link_tag "xxx.css" %>
  <%end%> 
```

以上内容适用于您的特定视图文件。**

# c++ - GTKmm 3：使用 Gtk::Application 解析命令行

> ID：13852421
> 
> 赞同：4
> 
> 时间：2012-12-13T03:21:39.270
> 
> 标签：c++, gtkmm

我正在尝试使用 GTK 的 argv 处理，但主循环似乎存在一些问题。

`--display`我的目标是在GTK 删除其选项（如这就是我试图在`command_line`信号处理程序中打开窗口的原因。

这按预期工作，在窗口关闭时退出。

```
#include <gtkmm.h>
int main(int argc, char **argv) {
    auto app = Gtk::Application::create(argc, argv, "my.app");
    Gtk::ApplicationWindow win;
    return app->run(win);
} 
```

但是简单地添加`HANDLES_COMMAND_LINE`标志会破坏：该窗口永远不会显示。

```
#include <gtkmm.h>
int on_cmd(const Glib::RefPtr<Gio::ApplicationCommandLine> &) {
    return 0;
}
int main(int argc, char **argv) {
    auto app = Gtk::Application::create(argc, argv, "my.app",
                 Gio::APPLICATION_HANDLES_COMMAND_LINE);
    app->signal_command_line().connect(sigc::ptr_fun(on_cmd), false);
    Gtk::ApplicationWindow win;
    return app->run(win);
} 
```

所以我认为`command_line`处理程序实际上不应该返回？但是文档说`run`启动了主循环。我还没有找到一个简单地等待主循环完成的方法，所以我手动启动它。窗口再次显示，但当然循环一旦关闭就会继续，这是该代码的最小问题：

```
#include <gtkmm.h>
int on_cmd(const Glib::RefPtr<Gio::ApplicationCommandLine> &,
           Glib::RefPtr<Gtk::Application> &app) {
    Gtk::ApplicationWindow win(app);
    // app->run(win); --- lands here again -> stack overflow.
    win.show();
    // This looks very wrong but seems to work?!
    while(true)
        Glib::MainContext::get_default()->iteration(true);
    // never reach this
    return 0;
}
int main(int argc, char **argv) {
    auto app = Gtk::Application::create(argc, argv, "my.app",
                 Gio::APPLICATION_HANDLES_COMMAND_LINE);
    app->signal_command_line().connect(
      sigc::bind(sigc::ptr_fun(on_cmd), app), false);
    return app->run();
} 
```

(gtkmm-3.0 版本 3.5.13)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T18:39:05.527

事实证明，关键是调用`activate`应用程序。`HANDLES_COMMAND_LINE`未给出时执行的默认处理程序会自动执行此操作。

我的第二个例子只是少了一行：

```
#include <gtkmm.h>
int on_cmd(const Glib::RefPtr<Gio::ApplicationCommandLine> &,
  Glib::RefPtr<Gtk::Application> &app) {
    app->activate(); // <----
    return 0;
}
int main(int argc, char **argv) {
    auto app = Gtk::Application::create(argc, argv, "my.app",
                 Gio::APPLICATION_HANDLES_COMMAND_LINE);
    app->signal_command_line().connect(
      sigc::bind(sigc::ptr_fun(on_cmd), app), false);
    Gtk::ApplicationWindow win;
    return app->run(win);
} 
```

这是一个使用 Glib 解析命令行的子类应用程序，如果`--gui`存在，则打开一个窗口并仅在窗口关闭后终止。

Using`gtk_get_option_group`将 GTK 选项（和帮助）添加到它，所以`--help-all`真正显示所有适用的选项，我们不必依赖`gtk_main(argc, argv)`删除 GTK 选项，即参数可以推迟到`run(argc, argv)`调用（但不必. 如果给应用程序构造函数提供了参数，它将删除 GTK 选项，除了`--help-gtk`，我们的处理程序永远不会看到它们，但仍然可以显示它的帮助。这两种方式似乎都无关紧要）

```
#include <gtkmm.h>
struct MyApp : Gtk::Application {
    MyApp() : Gtk::Application("my.app",
      Gio::APPLICATION_HANDLES_COMMAND_LINE) {}
    int on_command_line(const Glib::RefPtr<Gio::ApplicationCommandLine> &cmd) {
        // parse arguments:
        Glib::OptionContext ctx;
        Glib::OptionGroup group("options", "main options");
        bool show_gui = false;
        Glib::OptionEntry entry;
        entry.set_long_name("gui");
        entry.set_description("show the gui.");
        group.add_entry(entry, show_gui);
        ctx.add_group(group);
        // add GTK options, --help-gtk, etc
        Glib::OptionGroup gtkgroup(gtk_get_option_group(true));
        ctx.add_group(gtkgroup);
        int argc;
        char **argv = cmd->get_arguments(argc);
        ctx.parse(argc, argv);
        // maybe show the gui
        if(show_gui)
            activate();
        return 0;
    }
    Gtk::ApplicationWindow *main;
    void on_activate() {
        // can't use Gtk::manage, so we have to keep
        // the reference or the main loop quits.
        main = new Gtk::ApplicationWindow();
        add_window(*main);
        main->show();
    }
};
int main(int argc, char **argv) {
    return MyApp().run(argc, argv);
} 
```

# php - 使用 PHP $_GET 的超链接 URL 的正确语法

> ID：13852424
> 
> 赞同：2
> 
> 时间：2012-12-13T03:21:50.043
> 
> 标签：php, html, url, get, href

我想知道如何将我网站中的信息放在我网站首页的 URL 中，然后在下一页上，用于`$_GET`从 URL 中获取变量。

我只是想把它放在一个链接中`<a href="mywebsite.com/page?name=$name"></a>`，如果我这样做，它会起作用吗？如果可以，我将如何从 URL 中获取它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T03:25:37.937

示例链接：`http://example.com/page.php?name=Charles`

如果你使用`$_GET["name"]`它会返回值`Charles`

有关 $_GET 的更多信息，请查看[http://php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T03:26:11.227

做

```
<a href="http://mywebsite.com/page?name=<?php echo $name; ?>"></a> 
```

在您的页面中，您可以将名称命名为：

```
$name = $_GET['name']; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T03:24:38.617

是`$_GET`变量。所以在这种情况下，要获得名称，它将是：

```
$_GET['name']; 
```

# asp.net - 数据注解构造函数注入

> ID：13852428
> 
> 赞同：3
> 
> 时间：2012-12-13T03:22:10.860
> 
> 标签：asp.net, asp.net-mvc, data-annotations

使用 ASP.NET MVC，是否可以将构造函数注入与数据注释属性一起使用（具体来说，我正在使用验证属性）？

我想做的是：

```
public class NoEmailTakenAttribute : ValidationAttribute
{
    public NoEmailTakenAttribute(IService service) { .. }
} 
```

那可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T18:18:49.363

从我使用 Reflector 看到的内容中，您不能使用控制器注入，但似乎可以使用属性注入。通过创建一个继承自的类`DataAnnotationsModelValidatorProvider`，并覆盖方法`GetValidators`，在验证发生之前属性可以被注入到属性中似乎是合理的......这是来自初步分析，尚未完全确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:50:58.373

Brian Mains 提出的解决方案应该可以正常工作。我不认为构造函数注入是一个选项，但属性注入会完成这项工作。您可以从中派生`ModelValidatorProvider`并且您的实现可能与此类似：

```
public class MyModelValidatorProvider : ModelValidatorProvider
{
    private IDiContainer _container;

    public MyModelValidatorProvider(IDiContainer container)
    {
        _container = container;
    }

    public override IEnumerable<ModelValidator> GetValidators(ModelMetadata metadata, ControllerContext context)
    {
        List<ModelValidator> validators = new List<ModelValidator>();

        PropertyInfo targetProperty = metadata.ContainerType.GetProperty(metadata.PropertyName);
        if (targetProperty.GetCustomAttributes(false).Any(attr => attr.GetType() == typeof(NoEmailTakenAttribute)))
        {
            DataAnnotationsModelValidator<NoEmailTakenAttribute> validator = new DataAnnotationsModelValidator<NoEmailTakenAttribute>(
                metadata, context, _container.Resolve<NoEmailTakenAttribute>());

            validators.Add(validator);
        }

        return validators;
    }
} 
```

我没有仔细研究`ModelMetadata`，只是使用 refelction 来决定是否返回验证器，但它可能可以做得更好。

然后在`Global.asax`添加以下内容：

```
ModelValidatorProviders.Providers.Add(new MyModelValidatorProvider(InstanceOfContainer)); 
```

你应该很高兴。这里唯一的问题是您的验证器也将由默认机制创建。显然，这将导致您的验证器没有注入正确的依赖项。我不知道如何从默认创建中排除验证器，但是如果您正确检查验证器中的空值，它应该可以正常工作（我必须说一些解决方法，但也许您会找到更好的方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T10:01:03.023

您可以通过创建基本控制器类并为 IService 接口声明属性并使用参数 IService 编写基本控制器类来做到这一点。在派生类中使用它。由于 asp.net mvc 使用默认控制器构造函数来初始化您的服务被派生类参数化构造函数实例化的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T20:11:45.490

我认为没有一种简单的方法可以为自定义数据注释进行构造函数注入甚至属性注入。@BrianMains 的建议听起来很合理，但我自己并没有走那么远。

解决复杂性的一种方法是在自定义数据注释中使用服务定位器来获取您需要的任何依赖项。不那么干净，但可以得到相同的结果。

查看此链接以获取更多信息：[ASP.Net MVC 3 中自定义 DataAnnotations 中的依赖注入](https://stackoverflow.com/questions/6286722/dependency-injection-in-custom-dataannotations-in-asp-net-mvc-3)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-12T13:26:39.017

[Brian Mains 的回答](https://stackoverflow.com/a/13865983/669527)是正确的，但有点太简短了。所以这里有一个例子。

首先定义一个提供者

```
public class CustomProvider : DataAnnotationsModelValidatorProvider
{
    protected override IEnumerable<ModelValidator> GetValidators(ModelMetadata metadata, IEnumerable<ModelValidatorProvider> validatorProviders, IEnumerable<Attribute> attributes)
    {
        foreach (var attrib in attributes)
        {
           //if the attrib is your one set whatever you need 
        }

        return base.GetValidators(metadata, validatorProviders, attributes);
    }
} 
```

然后注册它 - 对于 MVC，请参阅[dmusial 答案](https://stackoverflow.com/a/13869086/669527)。对于 Web Api（[如何将自定义 ModelValidatorProviders 添加到 Web API 项目？](https://stackoverflow.com/questions/12905174/how-to-add-custom-modelvalidatorproviders-to-web-api-project) ）

```
config.Services.Add(typeof(ModelValidatorProvider), new CustomProvider()); 
```

# c++ - Qt Gui 应用程序部署

> ID：13852429
> 
> 赞同：0
> 
> 时间：2012-12-13T03:22:13.817
> 
> 标签：c++, qt, deployment, shared-libraries

我已经使用 QT Creator 构建了一个 GUI 应用程序。我想在我朋友的电脑上部署这个应用程序。他运行 Ubuntu。为了运行这个应用程序，我不想在他的机器上安装任何开发工具，比如 Qt Creator。我只想安装 qt 库。

如果我这样做，应用程序会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:45:01.657

您需要在部署之前将库与您的应用程序静态链接。这样所有必要的库都包含在您的可执行文件中！

这可能会对您有所帮助：[http ://www.qtcentre.org/wiki/index.php?title=Building_static_applications](http://www.qtcentre.org/wiki/index.php?title=Building_static_applications)

# c# - 如何计算输入字符串？

> ID：13852432
> 
> 赞同：4
> 
> 时间：2012-12-13T03:23:06.937
> 
> 标签：c#, .net, regex, vb.net

> **可能重复：**
> [如何计算字符串中字符串的出现次数（C#）？](https://stackoverflow.com/questions/541954/how-would-you-count-occurences-of-a-string-within-a-string-c)

我有一个字符串，其中包含多个子字符串和 Enter（按 Enter 键的特殊字符）。

你能指导我如何编写一个计算单词之间输入键的正则表达式吗？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T03:28:59.983

根据使用的换行符，您可能必须更改为 just`\r`或 just `\n`。

```
var numberLineBreaks = Regex.Matches(input, @"\r\n").Count; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T03:32:21.777

您不需要正则表达式，您只是在计算字符串。具体来说，您只是在数`Environment.Newline`s。有很多方法可以做到这一点；[这个 SO answer](https://stackoverflow.com/questions/541954/how-would-you-count-occurences-of-a-string-within-a-string-c)中描述了几个。这是一个看起来效率低下但性能出奇的好：

```
int count1 = source.Length - source.Replace(Environment.Newline, "").Length; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T03:26:45.410

它必须是正则表达式吗？可能有更简单的方法......例如，您可以使用`string[] array = String.Split('\n');`创建子字符串数组，然后使用`array.Length;`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T03:28:15.203

您可以通过简单地计算换行符来做到：

```
int start = -1;
int count = 0;
while ((start = text.IndexOf(Environment.NewLine, start + 1)) != -1)
    count++;
return count; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T03:44:17.693

您可以使用此代码，

```
using System;
using System.Text.RegularExpressions;

class Program
    {
        static void Main()
        {
         long a = CountLinesInString("This is an\r\nawesome website.");
         Console.WriteLine(a);

         long b = CountLinesInStringSlow("This is an awesome\r\nwebsite.\r\nYeah.");
         Console.WriteLine(b);
         }

         static long CountLinesInString(string s)
         {
          long count = 1;
          int start = 0;
          while ((start = s.IndexOf('\n', start)) != -1)
          {
              count++;
               start++;
          } 
          return count;
         }

         static long CountLinesInStringSlow(string s)
         {
          Regex r = new Regex("\n", RegexOptions.Multiline);
          MatchCollection mc = r.Matches(s);
          return mc.Count + 1;
         }
 } 
```

# c# - 无需 api 或 web 服务调用即可集成 asp.net 服务

> ID：13852433
> 
> 赞同：0
> 
> 时间：2012-12-13T03:23:26.313
> 
> 标签：c#, asp.net, visual-studio, integration

例如，如何向不提供 API 或 Web 服务的页面发送请求

[http://arcgis.dmgov.org/extmapcenter/addresslookup.aspx](http://arcgis.dmgov.org/extmapcenter/addresslookup.aspx)

从我的 asp.net web 应用程序内部。

问题是，我将如何传递我的请求中的信息。例如，在上面的情况下，我需要传递地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:56:26.800

每个浏览器都有一套用于监控 HTTP 请求的开发者工具。在 Chrome 中，您可以按 ctrl+shift j，转到网络，然后检查您在该页面上按提交按钮时使用的 HTTP 请求。大多数情况下，向服务器发送数据将使用该站点所做的 HTTP POST。重要的是查看它们用于发送 POST 数据的变量。该网站发送以下内容

```
ctl00$CPH4contentWindow$txtAddress:111 Street Name 
```

内容类型为`application/x-www-form-urlencoded`

您可以尝试通过发送您自己的带有该信息的 HTTP 请求来模仿这一点。

**客户**

```
$.ajax({
    url: '/api/Address/111%20Street%20Name',
    dataType: 'html',
    success: function (result) {
        // do something with result
    }
}); 
```

* * *

**控制器**

```
public class AddressController : ApiController
{
    public string Get(string address)
    {
        WebClient client = new WebClient();
        client.AddHeader("content-type", "application/www-form-urlencoded");
        string response = client.UploadString("http://arcgis.dmgov.org/extmapcenter/addresslookup.aspx", "ctl00$CPH4contentWindow$txtAddress=" + Uri.EscapeDataString(address));
        return response;
    }
} 
```

如果您不需要使用 ajax 异步发送它，您可以将控制器的逻辑放入您的 ASP.NET 代码后面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:55:38.863

您可以使用 web 浏览器插件（如 firebug for firefox）来查看该页面发出的请求。对于您的示例案例，它正在请求

[http://arcgis.dmgov.org/extmapcenter/AutoComplete.asmx/GetLocAddressList](http://arcgis.dmgov.org/extmapcenter/AutoComplete.asmx/GetLocAddressList) 前缀文本为“textInsindeTextbox”

从您的应用程序中提出此请求。但是该网络服务可能不允许您这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T03:49:07.840

发出 HTTP GET 请求：http: [//support.microsoft.com/kb/307023](http://support.microsoft.com/kb/307023)

或者如果你想在客户端使用 IFRAME HTML 标记。

# c# - 将额外的字符串写入excel文件，字节[]出错

> ID：13852436
> 
> 赞同：3
> 
> 时间：2012-12-13T03:24:16.297
> 
> 标签：c#, .net

由于某些原因，我想将一个 GUID 作为 ID 写入一个文件以保存，并在打开文件之前删除该 ID。

```
 static void Main(string[] args)
    {
        string id = "b669fd8c904d48e0945c16cac1dc5ed9";
        byte[] idbyte = UnicodeEncoding.Default.GetBytes(id);

        FileStream input = new FileStream(@"C:\test.xlsx", FileMode.Open, FileAccess.Read);
        FileStream output = new FileStream(@"C:\test1.xlsx", FileMode.OpenOrCreate, FileAccess.Write);
        CopyStream(input, output);
        // add id with byte[] at the end of the file
        output.Write(idbyte, 0, idbyte.Length);
        output.Close();
        input.Close();

        FileStream input1 = new FileStream(@"C:\test1.xlsx", FileMode.Open, FileAccess.Read);
        FileStream output1 = new FileStream(@"C:\test2.xlsx", FileMode.OpenOrCreate, FileAccess.Write);
        int SizeOfBuffer = 1024 * 16;
        try
        {

            byte[] buffer = new byte[SizeOfBuffer];
            byte[] bufferLast = new byte[SizeOfBuffer];
            int read;
            int Nextread;
            while ((read = input1.Read(buffer, 0, buffer.Length)) > 0)
            {

                if ((Nextread = input1.Read(bufferLast, 0, buffer.Length)) > 0)
                {
                    output1.Write(buffer, 0, read);
                    output1.Write(bufferLast, 0, Nextread);
                }
                else   // delete id with byte[] 
                {

                    byte[] buffer2 = new byte[SizeOfBuffer];
                    for (int i = 0; i < read - idbyte.Length; i++)
                    {
                        buffer2[i] = buffer[i];
                    }
                    output1.Write(buffer2, 0, buffer2.Length);
                    break;
                }

            }

        }
        catch (Exception ex)
        {

            Console.WriteLine(ex.ToString());
        }
        output1.Close();
        input1.Close();
        Console.ReadLine();
    }

  private static void CopyStream(Stream input, Stream output)
    {
        int SizeOfBuffer = 1024 * 16;
        try
        {
            byte[] buffer = new byte[SizeOfBuffer];
            int read;
            while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
            {
                output.Write(buffer, 0, read);
            }
        }
        catch (Exception ex)
        {

            Console.WriteLine(ex.ToString());
        }
    } 
```

但是当我打开 C:\test2.xlsx 时，excel 显示错误：“Excel 在 'test2.xlsx' 中发现不可读的内容”！

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:56:35.477

以下对我有用。如您所见，我进行了一些重组，以便更轻松地了解我在做什么并简化测试。如果您有任何问题，请告诉我。

```
class Program
{
    private const int SIZE_OF_BUFFER = 1024 * 16;
    private const string FILE_PATH_ORIGINAL = @"C:\test.xlsx",
                        FILE_PATH_WithId = @"C:\test1.xlsx",
                        FILE_PATH_IdRemoved = @"C:\test2.xlsx";

    private static readonly byte[] idbyte = UnicodeEncoding.Default.GetBytes("b669fd8c904d48e0945c16cac1dc5ed9");

    static void Main(string[] args)
    {
        AddGuidToFile(FILE_PATH_ORIGINAL, FILE_PATH_WithId);
        RemoveGuidToFile(FILE_PATH_WithId, FILE_PATH_IdRemoved);
        CompairFiles(FILE_PATH_ORIGINAL, FILE_PATH_IdRemoved);

        Console.ReadLine();
    }

    private static void AddGuidToFile(string sourceFilePath, string destinationFilePath)
    {
        byte[] buffer = new byte[SIZE_OF_BUFFER];
        FileStream input = new FileStream(sourceFilePath, FileMode.Open, FileAccess.Read),
                    output = new FileStream(destinationFilePath, FileMode.OpenOrCreate, FileAccess.Write);
        int read;

        try
        {
            while ((read = input.Read(buffer, 0, buffer.Length)) > 0)   //Copy source file to destination file.
            {
                output.Write(buffer, 0, read);
            }

            output.Write(idbyte, 0, idbyte.Length);                     //Add guid to the end of the destination file.
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
        finally
        {
            //Close files
            input.Close();
            output.Close();
        }
    }

    private static void RemoveGuidToFile(string sourceFilePath, string destinationFilePath)
    {
        byte[] currentBuffer = new byte[SIZE_OF_BUFFER],
                nextBuffer = new byte[SIZE_OF_BUFFER],
                tempBuffer;
        FileStream input = new FileStream(sourceFilePath, FileMode.Open, FileAccess.Read),
                    output = new FileStream(destinationFilePath, FileMode.OpenOrCreate, FileAccess.Write);
        int currentRead,
            nextRead = 0;                                       //Initialize to 0 incase file's lenght is less then SizeOfBuffer.

        try
        {
            currentRead = input.Read(currentBuffer, 0, currentBuffer.Length);   //Get first chunk.
            if (currentRead == currentBuffer.Length)                            //If first chunck is a full buffer then loop until it is not.
            {
                nextRead = input.Read(nextBuffer, 0, nextBuffer.Length);

                while (nextRead > idbyte.Length)
                {
                    output.Write(currentBuffer, 0, currentRead);                //Since nextBuffer is large enough to contain the ID, write the current buffer out.

                    //Swap buffers.
                    tempBuffer = currentBuffer;
                    currentBuffer = nextBuffer;
                    nextBuffer = tempBuffer;

                    //Update counts and fill next buffer.
                    currentRead = nextRead;
                    nextRead = input.Read(nextBuffer, 0, nextBuffer.Length);
                }
            }

            currentRead += nextRead - idbyte.Length;                            //Update currentRead to be the number of bytes in the buffer which are not part of the ID.

            output.Write(currentBuffer, 0, currentRead);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
        finally
        {
            //Close files
            input.Close();
            output.Close();
        }
    }

    private static void CompairFiles(string originalFilePath, string idRemovedFilePath)
    {
        byte[] originalBuffer = new byte[SIZE_OF_BUFFER],
                idRemovedBuffer = new byte[SIZE_OF_BUFFER];
        FileStream original = new FileStream(originalFilePath, FileMode.Open, FileAccess.Read),
                    idRemoved = new FileStream(idRemovedFilePath, FileMode.Open, FileAccess.Read);
        int originalRead,
            idRemovedRead;

        try
        {
            do
            {
                originalRead = original.Read(originalBuffer, 0, originalBuffer.Length);
                idRemovedRead = idRemoved.Read(idRemovedBuffer, 0, idRemovedBuffer.Length);

                if (originalRead != idRemovedRead) { throw new Exception("Error: file sizes do not match.  originalRead = " + originalRead + ", idRemovedRead = " + idRemovedRead + ", SIZE_OF_BUFFER = " + SIZE_OF_BUFFER); }

                for (int i = 0; i < originalRead; i++)
                {
                    if (originalBuffer[i] != idRemovedBuffer[i]) { throw new Exception("Error: file contents do not match.  i = " + i + ",inputBuffer[i] = " + originalBuffer[i] + ", idRemovedBuffer[i] = " + idRemovedBuffer[i]); }
                }
            }
            while (originalRead == idRemovedRead && originalRead > 0);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
        finally
        {
            //Close files
            original.Close();
            idRemoved.Close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:56:47.037

带有扩展名的 Excel 文件`xlsx`（注意末尾的“x”）实际上是`zip`包含`xml`文档的文件。如果您将数据添加到文件末尾，则会使 zip 无效，因此 Excel 无法打开它。

看起来您的函数可能没有正确删除添加的文本。您可以尝试在十六进制比较程序中打开原始文件和新文件，看看它们有什么不同。此外，您可以将文件重命名为“.zip”以查看它是否在 zip 程序中打开。

# android - 带有 Soundcloud 流重定向的 Android MediaPlayer

> ID：13852437
> 
> 赞同：1
> 
> 时间：2012-12-13T03:24:22.660
> 
> 标签：android, android-mediaplayer, soundcloud

我目前正在使用 Android MediaPlayer 在 Android 应用程序中流式传输音乐。我从 Soundcloud stream_url 获得了重定向 URL，它在浏览器中单独工作。

但是，当我使用此 redirect_url 作为 SetDataSource 的源时，mediaplayer 将无法工作。

```
mediaplayer.setDataSource(redirect_url);
mediaplayer.prepareAsync(); 
```

当使用普通的 mp3 url 时，这很好用。Soundcloud 的重定向 URL 给我的应用程序带来了一些问题，即使重定向 url 放在浏览器中也可以正常工作。对我的问题有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T12:11:01.890

我对 soundclud url 也有同样的问题。

最后，事实证明，改变你的with`https`将解决问题。`http``stream_url`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:28:26.717

您应该将您的客户端 ID 添加到 soundcloud 提供的“stream_url”中。您可以通过在 soundcloud 上注册开发者帐户来获取客户端 ID。

```
stream_url = stream_url+"?client_id=123456567889997" 
```

# ajax - Jquery ajaxSubmit also does the regular form submit

> ID：13852442
> 
> 赞同：3
> 
> 时间：2012-12-13T03:24:42.113
> 
> 标签：ajax, magento, jquery, form-submit

I'm trying to run the following Jquery ajaxSubmit for one of my Magento stores. I use ajaxSubmit because I have 2 files to upload from the form as well (Means I need data in `$_FILE`). But when I do the ajaxSubmit it also dose the normal form submit which will refresh the page and take me to the next page, instead of staying on the same page where I have a pop-up box with some more stuff in it. I have ***`return false;`*** to prevent this, but it fails. The submit code:

```
$('#quickbuyform').submit(function (){

    // No Accessories: normal submit
    if ($('#accessories ul li').size()==0) {
        return true;
    }

    strName = "<?php echo $_product->getName() ?>";

    // loading message
    $('#pop_accessories_area_message').html("We are adding '"+strName+"' into your shopping cart ...");
    // Pop with loading
    popAccessories();

    // loading icon
    //var dataString = $('#quickbuyform').serialize();
    $.ajaxSubmit({  
          type: "POST",  
          url: $('#quickbuyform').attr('action'),
          data: dataString,  
          beforeSubmit:  showRequest,
          success: function() {
            // display cart link:
            $('#pop_accessories_area_message').html(strName+" was added to <a href='<?php echo $this->getUrl('checkout/cart') ?>'>your shopping cart</a>.");
            $('.pop_accessories_area_button').show();
            //window.location = '<?php //echo $this->getUrl('checkout/cart') ?>';
          }  
        });
    return false;
}); 
```

So this is what I have now with `e.preventDefault()`, but now it does not Submit anything. Just stop at `('#quickbuyform').ajaxSubmit`

```
$('#quickbuyform').submit(function (e){
    e.preventDefault();
    // No Accessories: normal submit
    if ($('#accessories ul li').size()==0) {
        return true;
    }

    strName = "<?php echo $_product->getName() ?>";

    // loading message
    $('#pop_accessories_area_message').html("We are adding '"+strName+"' into your shopping cart ...");
    // Pop with loading
    popAccessories();

    $('#quickbuyform').ajaxSubmit({  
          type: "POST",  
          url: $('#quickbuyform').attr('action'),
          data: dataString,  
          success: function() {
            // display cart link:
            $('#pop_accessories_area_message').html(strName+" was added to <a href='<?php echo $this->getUrl('checkout/cart') ?>'>your shopping cart</a>.");
            $('.pop_accessories_area_button').show();
            //window.location = '<?php echo $this->getUrl('checkout/cart') ?>';
          }  
        });
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T03:27:58.203

You can stop the normal form submit by calling `preventDefault` method of the event object.

```
$('#quickbuyform').submit(function (e) {
    e.preventDefault();
    ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:29:44.213

Try using $.ajax instead, or `e.preventDefault();` as suggested above:

```
$.ajax({
          type: "POST",  
          url: $('#quickbuyform').attr('action'),
          data: dataString,  
          beforeSubmit:  showRequest,
          success: function() {
            // display cart link:
            $('#pop_accessories_area_message').html(strName+" was added to <a href='<?php echo $this->getUrl('checkout/cart') ?>'>your shopping cart</a>.");
            $('.pop_accessories_area_button').show();
            //window.location = '<?php //echo $this->getUrl('checkout/cart') ?>';
          }  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T03:31:00.133

You should try something like this -

```
$("#quickbuyform").submit(function(e){
    e.preventDefault();
  });​ 
```

This will prevent the default behavior of your jQuery event.

# resources - 如何在 AngularJS 中为 $resource 方法添加回调

> ID：13852444
> 
> 赞同：30
> 
> 时间：2012-12-13T03:25:20.180
> 
> 标签：resources, callback, angularjs

在用户更新/创建一些数据后，我们需要向用户显示错误/成功消息可能是一种常见的情况，我们如何在 AngularJS 中实现它？
我想添加回调但找不到解决方案。使用 $http.post().success().error() 有效，但我想知道是否可以使用更高级别的 API $resource 来做到这一点。
或者，我们应该编写指令或使用 $watch()？
提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-13T04:47:11.977

来自**Resource**类的操作可以传递成功和错误回调，就像较低级别的**$http**服务一样

[从文档](https://docs.angularjs.org/api/ngResource/service/$resource)

*   HTTP GET“类”操作：Resource.action([parameters], [success], [error])
*   非 GET “类”操作：Resource.action([parameters], postData, [success], [error])

非获取操作以 . 为前缀`$`。

所以你可以这样做

```
User.get({userId:123}, function(u, getResponseHeaders){
  // this is get's success callback
  u.abc = true;
  u.$save(function(u, putResponseHeaders) {
    // This is $save's success callback, invoke notification from here
  });
}); 
```

* * *

编辑：这[是以前 plunker 的另一个例子](http://plnkr.co/edit/gV2zwc2kKAXXESe9HME4?p=preview)。get 请求将失败，因为它请求一个不存在的 json 文件。将运行错误回调。

```
someResource.get(function(data){
    console.log('success, got data: ', data);       
}, function(err){
    alert('request failed');
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-02-04T21:09:30.587

使用最新的 AngularJS 版本，您可以查看[`$interceptors`](https://docs.angularjs.org/api/ng/service/$http#interceptors).`$httpProvider`

然后您可以在发送之前或响应之后拦截所有请求。

```
angular.module('app').config(function($httpProvider){

  $httpProvider.interceptors.push(function($q) {
    return {
      'request': function(config) {
        console.log('I will send a request to the server');
        return config; 
      },

      'response': function(response) {
        // called if HTTP CODE = 2xx 
        console.log('I got a sucessfull response from server'); 
        return response;
      }

      'responseError': function(rejection) {
        // called if HTTP CODE != 2xx
        console.log('I got an error from server');
        return $q.reject(rejection);
      }
    };
  });

}); 
```

请注意，您必须返回`config`或`response`使其正常工作。

在 的情况下`rejection`，您需要返回延迟拒绝，以便`$http.get().error()`在拦截后仍然有效。

# kendo-ui - Kendo Mobile MVVM ListView 与点击绑定 和细节按钮

> ID：13852454
> 
> 赞同：0
> 
> 时间：2012-12-13T03:26:11.650
> 
> 标签：kendo-ui

尝试做一些简单的事情。Kendo UI Mobile ，在(MVVM) 和列表项模板中`ListView`具有单击绑定。绑定应该简单地调用视图模型中的单击处理程序函数 - 这可以按预期工作。应该打开一个-这不能按预期工作。发生的是点击处理程序触发。`UL``detailbutton``click``detailbutton``actionsheet`

如果我可以将“发件人”识别为详细信息按钮，我应该能够简单地`return`从处理程序中不做任何事情并弹出操作表。

几个问题：

1）假设我以正确的方式接近这一点，识别点击来源的最可靠方法是`LI`什么`detailbutton`？

2）如果有更好的方法来做到这一点，它是什么？

我把小提琴放在一起。看看：http: [//jsfiddle.net/4zvgS/](http://jsfiddle.net/4zvgS/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:11:06.130

您可以添加一个 jQuery 处理程序来停止冒泡事件，如我链接的“重复”中所述，或者您可以执行以下操作来查看单击是否来自详细信息按钮：

```
 if(e.target.hasClass("km-detail")
      || e.target.parent().hasClass("km-detail")) {
        return false;
    } 
```

# javascript - 从控制台访问匿名函数对象

> ID：13852457
> 
> 赞同：4
> 
> 时间：2012-12-13T03:26:16.017
> 
> 标签：javascript, console

我知道如果我声明一个像这样的对象：

```
var myObj = {
  prop1 : 1,
  prop2 : 2
} 
```

我可以通过键入从控制台访问和*操作*`myObj`它。

如果我将它包装在一个匿名的自执行函数中，我仍然可以从控制台访问它吗？

```
(function(){
  var myObj = {
    prop1 : 1,
    prop2 : 2
  }
})(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T03:40:22.720

你可能可以。

例如在 Chrome 中，您可以在正确的位置插入断点，然后您可以访问（和操作）它。

![在此处输入图像描述](../Images/7cf910ae3fb2d20a8374231f468ee3be.png)

（这个截图的一个有趣的事实是你的匿名函数实际上是在另一个匿名函数中）

对于 Firefox，我相信 FireBug 可以胜任。IE8+ 也有这个功能。

# jquery - 在窗口和正文之间使用 jQuery.height() 计算差异

> ID：13852458
> 
> 赞同：0
> 
> 时间：2012-12-13T03:26:25.487
> 
> 标签：jquery, dom, pagination, height, infinite-scroll

我有兴趣确定用户何时到达页面底部以触发自定义回调事件，类似于“无限滚动”或“无限滚动”。

关于如何解决这个问题，我最好的理论是首先计算身体元素的高度：

`var bodyHeight = $('body').outerHeight();`

接下来，测量窗框的高度：

`var winHeight = $(window).height();`

最后确定垂直滚动位置：

`var scrollY = $(window).scrollTop();`

但是，当我将此脚本插入正文时：

`<script>
console.log(bodyHeight, winHeight);
$(window).bind("scroll", function(){
console.log(winHeight + scrollY);
});
</script>`

我经常会看到计算出的滚动位置超过了 body 的高度。我在使用带有“弹性滚动”的 OSX 时看到了类似的东西，但这只是使用标准的滚动条 ui。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:54:12.327

我认为如果你只是坚持使用 $('body').height()，你应该没问题。

```
$('body').height() - $(window).height() == $('body').scrollTop() 
```

如果您有 position:absolute、position:fixed 或 float 元素，您可能会看到 scrollTop() 已关闭。在这种情况下，你的 body 元素实际上并没有包裹最高的元素，所以它不起作用。

如果是这种情况，您实际上可以使用 scrollHeight。

```
document.body.scrollHeight - $(window).height() == $('body').scrollTop() 
```

看起来 jQuery 没有 scrollHeight 方法（或等效方法），并且存在一些浏览器兼容性问题（[W3C Dom Compatibility for scrollHeight](http://www.quirksmode.org/dom/w3c_cssom.html#t36)），但它适用于所有现代浏览器。

最坏的情况，您可以获取所有元素，遍历它们以找到最大高度，然后将其用于：

```
var maxHeight = ((function() { var maxHeight = 0; $('*').each(function() {
    maxHeight = Math.max($(this).height(), maxHeight);
}); return maxHeight; })());

maxHeight - $(window).height() == $('body').scrollTop() 
```

如果您使用这种方法，我强烈建议您缓存该值并仅在需要时更新它。

[JSFiddle](http://jsfiddle.net/JeDEu/1/)

# reporting-services - 使用 32 位 Oracle 客户端的 SSRS 报告在 64 位环境中不工作

> ID：13852472
> 
> 赞同：2
> 
> 时间：2012-12-13T03:28:19.273
> 
> 标签：reporting-services, bids, oracleclient, badimageformatexception

我在 BIDS 2008 中有一个使用 32 位 Oracle 客户端构建的 SSRS 报告，报告在 BIDS（VS 2008）中运行良好，但是当部署到 Win2k3 64 位服务器上的报告管理器时，它失败并出现以下错误

> “尝试加载 Oracle 客户端库引发 BadImageFormatException。在安装了 32 位 Oracle 客户端组件的 64 位模式下运行时会出现此问题。”

我已经阅读了几篇建议使用`csscript Enable32Biton64 'true'`and启用 IIS 到 32 位的文章`aspnet_regiis-i`，但问题是我有其他需要 64 位功能的应用程序，所以不能这样做。

请建议我如何做到这一点.TIA。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:29:34.077

在服务器上安装 Oracle 64 位客户端工具，例如

[http://www.oracle.com/technetwork/topics/winx64soft-089540.html](http://www.oracle.com/technetwork/topics/winx64soft-089540.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-31T16:55:44.847

这是我第二次配置类似的服务器，也是我第二次花费数小时来解决这个问题。如果没有其他人，我正在为未来的我写这篇文章。这适用于 Windows Server 2012 R2 64 位、8GB RAM、300+GB 硬盘、Intel Xeon CPU E5620 @ 2.40GHz，运行 Microsoft SQL Server Reporting Services 2012 64 位和 IIS 7.0 以及使用 Oracle 客户端 32 位连接系统的 Web 应用程序.Data.OracleClient

1.  安装64位客户端
2.  将Oracle库存目录的名称@“C:\Program Files\Oracle”更改为“C:\Program Files\Oracle64”
3.  重新启动计算机并测试从 SSRS 到 Oracle 的连接
4.  安装 32 位客户端并为其主目录指定不同的位置
5.  重新启动计算机并测试从 SSRS 到 Oracle 以及从 Web 应用程序到 Oracle 的连接

我希望这对我未来的自己和其他人有所帮助:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T16:35:24.410

请不要安装 64 位 oracle，复制 tnsnames.ora 并重新启动服务器，我遇到了同样的问题，完成后它运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-13T14:13:58.060

我从 SSRS 2014 运行时遇到了同样的问题。尝试安装 SSRS 2016（版本 14.0.609.142），同样的问题。测试连接工作正常，但是当我想继续配置时，我收到消息

> 在安装了 32 位 Oracle 客户端组件的 64 位模式下运行时会出现此问题

我尝试配置 ODBC 连接，发现报告服务器只查看 32-odbc 服务器。

接下来我安装了最新的 Oracle 32 位客户端 (12.2.0.1.0)。然后一切正常！！

因此，即使错误消息要求使用 64 位驱动程序而不是 32 位驱动程序，实际上情况恰恰相反。

# matlab - 索引模式，确定函数输入 matlab

> ID：13852476
> 
> 赞同：2
> 
> 时间：2012-12-13T03:28:47.160
> 
> 标签：matlab

我有一个奇怪的问题，但这里有。我有一个包含（T11、T12、T21 和 T22）的矩阵...

```
| T11 T12 |
| T21 T22 | 
```

我有一个函数，它将在比较矩阵中的两个值时返回一个标量值。让我们称之为`f(x,y)`。我想为每两个值运行这个函数，所以我这样做......

```
f(T11,T12), f(T11,T21), f(T11,T22),
f(T12,T21), f(T12,T22),
f(T21,T22) 
```

我将这些结果存储在一个向量中，现在包含 6 个元素

`V1 = [f(T11,T12), f(T11,T21), f(T11,T22), f(T12,T21), f(T12,T22), f(T21,T22)]`

我现在要做的是找出哪个`f(x,y)`对应于哪两个`x,y`值。所以向量`V1`将包含值，例如：

`V1 = [12 14 54 23 86 3]`

所以你可以看到`i=1`V1 的第一个索引 ( ) 的值为 15，对应于`f(T11,T12)`，而 V1 的第三个索引 ( `i=3`) = 54，对应于`f(T11,T22)`。

如果有任何不清楚的地方，请告诉我。要刷新，我希望能够确定输入到`f(x,y)`每个值的原始值`V1`。我已经尝试寻找模式，但到目前为止一直无法想出任何东西，我忘记了一堆我曾经知道的数学......我认为 V1 的指标和比较的指标之间存在关系矩阵。请出主意！（ps我也尝试在函数返回中包含索引以及值，但它真的很乱，我宁愿用一种花哨的数学方式来做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:20:35.520

啊，我们走了。我终于找到了解决这个棘手问题的方法！因此，您想从给定 V1 = index 中的索引的矩阵中找到原始值。我所做的是获取矩阵的大小`(m,n)`创建一个`row=1, col=1`，然后

```
for i = 1 to (m*n) 
    if index - (m*n) plus i is <= 0, then col=index
    stop
else
    index = index - mn + i
row = row + 1 
```

现在您可以将矩阵展平为 a`1 by m*n`并且您想要的两个值是`row`和`row+col`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:41:08.237

[我建议使用meshgrid](http://www.mathworks.nl/help/matlab/ref/meshgrid.html)创建两个索引矩阵：

```
N = numel(T);
[ind1,ind2]=meshgrid(1:N);

>>ind1 =

   1   2   3   4
   1   2   3   4
   1   2   3   4
   1   2   3   4

>>ind2 =

   1   1   1   1
   2   2   2   2
   3   3   3   3
   4   4   4   4 
```

然后使用这些严格的上三角或下[三角部分](http://www.mathworks.nl/help/matlab/ref/tril.html)来[线性索引](http://www.mathworks.nl/company/newsletters/articles/Matrix-Indexing-in-MATLAB/matrix.html)`T`：

```
selection = logical(tril(ones(N),-1)
ind1 = ind1(selection);
ind2 = ind2(selection);

>>ind1' = 
   [1 1 1 2 2 3]
>>ind2' = 
   [2 3 4 3 4 4] 
```

所以现在你可以简单地做：

```
V1 = arrayfun(@f,T(ind1),T(ind2)); 
```

现在`ind1`并`ind2`包含 T 中的值的行和列索引`V1`。

我建议逐步执行这些代码行并检查中间变量以查看所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T01:27:27.967

您从矩阵中取出元素的顺序（假设它被命名为 A，并且具有 m 行和 n 列的维度）以用于您的函数 f(x,y)，就像您正在查看一样向量（假设 m = 2，A(1,:) 是矩阵 A 的第一行）

```
w = [ A(1,:) A(2,:)] 
```

并通过获取向量的最左侧元素并将其与其右侧的所有元素（按从左到右的顺序）进行比较来获取其所有组合（假设矩阵 A 中的所有条目都不相同），等等直到你从向量 w 生成所有大小为 2 的组合。I 矩阵 A 定义如下

```
A = [ 1 2; 3 4] 
```

生成的 A 条目大小为 2 的组合将是（请注意，组合表示为以下矩阵 B 的行）

```
B = [1 2; 1 3; 1 4; 2 3; 2 4; 3 4] 
```

我们知道矩阵 A 中有 m*n 个条目（在本例中为 4）。在您问题的向量 V1 中，我们知道第一个 (m*n - 1) 条目都将向量 w 的第一个元素作为 f(x,y) 的第一个输入，而下一个 (m*n - 2 ) 条目将向量 w 的第二个元素作为 f(x,y) 的第一个输入，依此类推。如果 index 等于 V1 中的索引，下面的代码应该会给你答案

```
p = 1
for i = (m*n - 1):-1:1
  for j = 1:i
    index = index - 1
    if (index == 0)
      disp('The following number is the position of x in vector w')
      disp(p)
      pw = p
      disp('The following number is the position of y in vector w')
      disp(p + j)
      qw = p + j
  p = p + 1

disp('The row of input x of f(x,y) in A is the following:')
disp(idivide(int32(pw - 1),n))
disp('The column of input x of f(x,y) in A is the following:')
disp(pw - (idivide(int32(pw - 1),n)*n))
disp('The row of input y of f(x,y) in A is the following:')
disp(idivide(int32(qw - 1),n))
disp('The column of input y of f(x,y) in A is the following:')
disp(qw - (idivide(int32(qw - 1),n)*n)) 
```

# java - Find ALL possible paths between two nodes in a directed labeled graph

> ID：13852480
> 
> 赞同：0
> 
> 时间：2012-12-13T03:29:29.907
> 
> 标签：java, algorithm, graph-algorithm

> **Possible Duplicate:**
> [Find the paths between two given nodes?](https://stackoverflow.com/questions/713508/find-the-paths-between-two-given-nodes)

Given a directed graph, how to find ALL the possible paths between two nodes and return those paths.

If not in Java, please recommend me with the algorithm for it. I searched and what I found is using BFS or DFS, but I'm not able to see which is better in my case. And how to keep track of all paths not only the shortest one.

For example, given the following graph:

1 -> 2

1 -> 3

2 -> 3

3 -> 4

For paths between nodes 1 and 4, the output should be:

First Path: 1 -> 2 -> 3 -> 4

Second Path: 1 -> 3 -> 4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:54:51.377

对我来说，向后遍历要容易得多。算法步骤如下：

1.  从目的地（即您的示例中的 4）作为起点。
2.  收集所有以第二个元素为目的地的节点，例如 (3,4)。
3.  假设起点（`3`在第一次迭代中）作为新目的地并重复步骤`1`&`2`直到没有可用的匹配节点。**递归的好场景。**您将获得您的收藏： [(1,2), (2,3), (3,4)], [(1,3), (3,4)]
4.  检查上面创建的集合，如果反向目标等于您的源，则保留它，否则丢弃（在您的情况下，没有什么可丢弃的）。**你完成了。**

# python - python3 - learning about searching, this very simple example does not work right

> ID：13852484
> 
> 赞同：0
> 
> 时间：2012-12-13T03:29:44.390
> 
> 标签：python, list, sorting, search, python-3.x

here's the code:

```
def findsort(something, alist):
    for item in alist:
        if item == something:
            return "found"
        else:
            return "not found"

def main():

    print(findsort(6, [3, 6, 1, 8, 11, 14]))

main() 
```

for some reason, this doesn't work the way i thought it should work.

when i run this, it will say "not found." however, if i change the value i want to find to the first item in the list, the 3, it comes back as "found."

i have tried this with strings, and i get the same results.

can someone please tell me what i am doing wrong?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T03:35:29.723

因为如果在第一次迭代中项目不匹配，则进入 else 分支返回“未找到”，从而退出循环。

尝试这个：

```
def findsort(something, alist):
    for item in alist:
        if item == something:
            return "found"
    return "not found" 
```

或者简单地说：

```
def findsort(something, alist):
    return "found" if something in alist else "not found" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T04:17:25.427

[@hyperboreus 指出了错误的原因](https://stackoverflow.com/a/13852518/4279)（在`else`看到所有项目之前执行的分支）。

要在**排序**（“有序”）列表中查找项目，您可以使用执行二进制搜索（）而不是线性搜索（ ）的[`bisect`模块](http://docs.python.org/3/library/bisect.html#bisect.bisect)，例如，对于一百万个项目，二进制搜索将需要大约几十个操作，而对于线性搜索。`O(log(n)``item in alist``O(n)`

```
from bisect import bisect

findsort = lambda x, L: "found" if L and L[bisect(L,x) - 1] == x else "not found" 
```

# internet-explorer - jsonp thru jQuery.getJSON not working in IE

> ID：13852485
> 
> 赞同：1
> 
> 时间：2012-12-13T03:29:44.887
> 
> 标签：internet-explorer, jquery, jsonp

This works in Chrome and Firefox, but a call to .getJSON with "?jsoncallback?" suffix to the url fails with a 'No Transport' error in IE.

Any experience with this around whether this does or does not work, will be highly appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T16:35:45.583

Internet Explorer 似乎有更严格的跨域策略，以防止在未正确设置回调的情况下使用。

如果您替换 ?jsoncallback? 跨域调用将起作用 使用 ?callback=?

见这里：[https ://stackoverflow.com/a/9803766/1254222](https://stackoverflow.com/a/9803766/1254222)

# java - 单击时如何从 JButton 中获取文本？

> ID：13852486
> 
> 赞同：2
> 
> 时间：2012-12-13T03:30:09.297
> 
> 标签：java, swing, jbutton

我正在做一个刽子手游戏。我创建了一个包含 26 个 JButton 的数组，每个 JButton 都有一个字母作为其文本。我想在单击按钮时获取按钮的字母并将其分配给变量，以便可以将其与被猜测的字符串中的字母进行比较。下面是 ActionListener 的代码及其与循环中每个按钮的附件（“字母”是 JButton 数组）。

```
public class Hangman extends JFrame
{
    private JButton[] letters = new JButton[26];
    private String[] alphabet = {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J",
            "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T",
            "U", "V", "W", "X", "Y", "Z"};
    //letters are assigned to JButtons in enhanced for loop
    private String letter;

        class ClickListener extends JButton implements ActionListener
        {
            public void actionPerformed(ActionEvent event)
            {
                  //this is where I want to grab and assign the text
                  letter = this.getText();
                 //I also want to disable the button upon being clicked
            }   
        }

       for(int i = 0; i < 26; i++)
       {
           letters[i].addActionListener(new ClickListener());
           gamePanel.add(letters[i]);
       }
} 
```

谢谢你的帮助！这是我第一次发帖；这是为了我的计算机科学我的最后一个项目！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T03:37:26.957

我认为你面临的直接问题与你如何设计你的`ClickListener`

```
class ClickListener extends JButton implements ActionListener
{
    public void actionPerformed(ActionEvent event)
    {
      //this is where I want to grab and assign the text
      letter = this.getText();
      checker(word, letter); //this compares with the hangman word
      setEnabled(false);//I want to disable the button after it is clicked
    }   
}

for(int i = 0; i < 26; i++)
{
    // When you do this, ClickListener is a NEW instance of a JButton with no
    // text, meaning that when you click the button and the actionPerformed
    // method is called, this.getText() will return an empty String.
    letters[i].addActionListener(new ClickListener());
    gamePanel.add(letters[i]);
} 
```

听众无需从`JButton`

```
class ClickListener implements ActionListener
{
    public void actionPerformed(ActionEvent event)
    {
      letter = ((JButton)event.getSource()).getText();
      checker(word, letter); //this compares with the hangman word
      setEnabled(false);//I want to disable the button after it is clicked
    }   
} 
```

现在，就个人而言，我不喜欢像这样进行盲投...更好的解决方案是使用该`actionCommand`属性...

```
ClickListener handler = new ClickListener();
for(int i = 0; i < 26; i++)
{
    letters[i].setActionCommand(letters[i].getText());
    letters[i].addActionListener(handler);
    gamePanel.add(letters[i]);
}

class ClickListener implements ActionListener
{
    public void actionPerformed(ActionEvent event)
    {
      letter = event.getActionCommand();
      checker(word, letter); //this compares with the hangman word
      setEnabled(false);//I want to disable the button after it is clicked
    }   
} 
```

# ios - 缓存图像和 UICollectionView

> ID：13852490
> 
> 赞同：7
> 
> 时间：2012-12-13T03:30:32.073
> 
> 标签：ios, xcode, image, caching, uicollectionview

我对 Objective-C 很陌生，所以希望这一切都有意义。我已经从服务器下载了图像，并在该`collectionView cellForItemAtIndexPath:`方法的图像视图中显示了它们。我面临的问题是图像似乎没有缓存。看起来每次重复使用一个单元格时，都会重新下载来自服务器的相关图像。

在我的 viewDidLoad 方法中，我正在创建一个 NSMutableDictionary：

```
imageDictionary = [[NSMutableDictionary alloc]initWithCapacity:50.0]; 
```

通过阅读文档并查看类似问题的答案，我认为这加上以下代码就足够了。我已经做了几天了，我知道我缺少一些东西或者我没有掌握的概念。

```
#pragma mark - UICollectionView Data Source
- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section;{
    NSLog(@"Begin retrieving photos");
    return [self.photos count];
}

-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView{
    return 1;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath;{
    CollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"MY_CELL" forIndexPath:indexPath];
    cell.imageView.image = nil;

    if (cell.imageView.image == nil) {
    dispatch_queue_t downloadQueue = dispatch_queue_create("image downloader", NULL);
    dispatch_async(downloadQueue, ^{
        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[[self.photos objectAtIndex:indexPath.row] objectForKey:@"fullimage"]]];
        UIImage *image = [UIImage imageWithData:data];
        [imageDictionary setObject:image forKey:@"Image"];

        dispatch_async(dispatch_get_main_queue(), ^{
            cell.imageView.image = [imageDictionary objectForKey:@"Image"];
            [cell setNeedsDisplay];
        });
    });
    }
    return cell;
} 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-27T03:36:10.497

@yuf - 再次感谢您的指导。NSCache 似乎让我得到了我想要的结果。这是正常工作的代码。如果有人有类似的问题，您可以将以下内容与我的原始问题进行比较。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath;{
    CollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"MY_CELL" forIndexPath:indexPath];

    NSString *imageName = [[self.photos objectAtIndex:indexPath.row] objectForKey:@"fullimage"];
    UIImage *image = [imageCache objectForKey:imageName];

    if(image){

        cell.imageView.image = image;
    }

    else{

    cell.imageView.image = nil;

    dispatch_queue_t downloadQueue = dispatch_queue_create("image downloader", NULL);
    dispatch_async(downloadQueue, ^{

        NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[[self.photos objectAtIndex:indexPath.row] objectForKey:@"fullimage"]]];
        UIImage *image = [UIImage imageWithData:data];

        dispatch_async(dispatch_get_main_queue(), ^{

            cell.imageView.image = image;

        });

        [imageCache setObject:image forKey:imageName];
    });
    }

    return cell;
} 
```

# intellij-idea - 在 IntelliJ 中尝试、捕捉、最终自动完成模式

> ID：13852493
> 
> 赞同：9
> 
> 时间：2012-12-13T03:30:52.837
> 
> 标签：intellij-idea

使用`IntelliJ`当我键入 try 后跟`Ctrl-Space`（自动完成）时，我没有添加任何内容

相反，我想看看

```
 try {
    // do something great
  } catch {
    case e: Exception => // handle me
  } 
```

语言是`Scala`，如果这很重要。

**如何定义如上所示的自动完成模式？**

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-13T03:36:46.077

使用**环绕模板**：

![环绕](../Images/595dd5572570958c9b6014865cc841cd.png)

您可以在帮助中找到更多详细信息：

*   [用语言结构包围代码块](http://www.jetbrains.com/idea/webhelp/surrounding-blocks-of-code-with-language-constructs.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T03:38:01.247

是的，你可以`File > Settings...`在下面`Live Templates`添加你自己的，缩写：试试

模板文字：

```
try {
        // do something great
    } catch {
        case e: Exception => $END$ // handle me
    } 
```

适用于Java：表达式。在`$VAL$`您关闭“尝试”后，光标会放在那里。

# bigtable - F1 与 Megastore 有何不同？

> ID：13852494
> 
> 赞同：3
> 
> 时间：2012-12-13T03:30:52.823
> 
> 标签：bigtable

Google 将其[F1](http://research.google.com/pubs/pub38125.html) RDBMS 用于其广告业务。谷歌也有 Megastore。我的理解是它们都建立在 Bigtable 之上。两者都存在的技术理由是什么？

Google 已经在 Google App Engine 上提供了 Megastore。如果不是因为 Megastore 的传统使用，在 App Engine 上提供 F1 而不是 Megastore 是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:19:31.793

MegaStore 是 Google 使用的低级存储系统。它正在被一个名为 Spanner 的新系统取代（两者都是 BigTable 的后代）。

在开发 Spanner 时，正在创建 F1 作为数据库系统。这是为了将 BigTable 的可扩展性与 SQL 数据库的可用性结合起来。

要回答这个问题，F1 与 MegaStore（现在的 Spanner）的不同之处在于 SQL 数据库与实际的数据存储系统不同。我想随着 Spanner 取代 MegaStore，Google 最终会在 Google App Engine 上提供 F1。

参考：[http ://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//pubs/archive/38125.pdf](http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en//pubs/archive/38125.pdf)

# javascript - 如何更改鼠标悬停时跨度标签的颜色，但仅更改鼠标悬停的跨度标签？

> ID：13852504
> 
> 赞同：-1
> 
> 时间：2012-12-13T03:32:26.737
> 
> 标签：javascript, html, mouseover

这就是我所拥有的，我认为它只会变成红色，鼠标经过的那个跨度，但是一旦你把鼠标放在上面，它们都会变成红色

```
<p><span onmouseover="this.style.background='red'" title="大地(Daichi) ground/earth/the solid earth/the  land">(大地)&nbsp;&nbsp;&nbsp;<span onmouseover="this.style.background='red'" title="が(ga) indicates sentence subject / indicates possessive /  but/however/still/and">(が)&nbsp;&nbsp;&nbsp;<span onmouseover="this.style.background='red'" title="揺れ(Yure) vibration/flickering/jolting/tremor">(揺れ)&nbsp;&nbsp;&nbsp;<span onmouseover="this.style.background='red'" title="始め(Hajime) beginning/start/outset/opening/  first / origin/  such as .../not to mention ...">(始め)&nbsp;&nbsp;&nbsp;<span onmouseover="this.style.background='red'" title="、(、) Japanese comma">(、)&nbsp;&nbsp;&nbsp;<span onmouseover="this.style.background='red'" title="警報(Keihou) alarm/warning">(警報)&nbsp;&nbsp;&nbsp;<span onmouseover="this.style.background='red'" title="が(ga) indicates sentence subject / indicates possessive /  but/however/still/and">(が)&nbsp;&nbsp;&nbsp;<span onmouseover="this.style.background='red'" title="鳴り(Nari) ringing/sound">(鳴り&nbsp;&nbsp;&nbsp;</span>)(<span onmouseover="this.style.background='red'" title="響い(Hibii) no dictionary result, likely a conjigated verb">響い</span>)&nbsp;&nbsp;&nbsp;<span onmouseover="this.style.background='red'" title="た(ta) indicate past completed or action/ indicates light imperative">(た&lt;/span>)</p> 
```

如何在自己的鼠标悬停事件上更改每个跨度？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T03:38:33.160

为此目的使用 CSS :hover 伪类更简单、更高效。我[在 JSFiddle 中准备了一个示例：](http://jsfiddle.net/Bd39K)

```
<style>
span:hover {
  background: yellow;
}
</style>
<span>I think</span>
<span>that</span>
<span>I shall</span>
<span>never</span>
<span>see</span>
<br>
<span>a poem as lovely</span>
<span>as</span>
<span>a tree</span>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:37:37.383

你的代码有效，问题是你有一个`span`内部其他`span`等等。

您应该先添加一个`span`，然后再添加另一个，因此当您将鼠标移过第一个`span`时，看起来一切都变红了，因为它们在里面。

```
<p>
    <span onmouseover="this.style.background='red'" title="大地(Daichi) ground/earth/the solid earth/the  land">(大地)&nbsp;&nbsp;&nbsp;</span>
    <span onmouseover="this.style.background='red'" title="大地(Daichi) ground/earth/the solid earth/the  land">(大地)&nbsp;&nbsp;&nbsp;</span>
</p> 
```

[**演示**](http://jsfiddle.net/5sr56/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T03:48:08.733

您应该能够使用带有 :hover 属性的 CSS 来执行此操作，尽管如果您真的想使用 javascript 简单地将事件附加到单个元素。这是一个非常简单的例子。

只需让您的跨度元素使用类似的东西
`var spans = document.getElementsByTagName('span');`

选择它们并循环通过它们应用事件。

这是示例：http: [//jsfiddle.net/tate/ztgRL/9/](http://jsfiddle.net/tate/ztgRL/9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T04:00:01.543

请参阅此代码...（与您的代码组装）

```
<p>
<span onmouseover="this.style.background='green'" title="??(Daichi) ground/earth/the solid earth/the  land">
(??)</span>&nbsp;&nbsp;&nbsp;
<span onmouseover="this.style.background='red'" title="?(ga) indicates sentence subject / indicates possessive /  but/however/still/and">
(?)</span>&nbsp;&nbsp;&nbsp;
<span onmouseover="this.style.background='red'" title="??(Yure) vibration/flickering/jolting/tremor">
(??)</span>&nbsp;&nbsp;&nbsp;
<span onmouseover="this.style.background='red'" title="??(Hajime) beginning/start/outset/opening/  first / origin/  such as .../not to mention ...">
(??)</span>&nbsp;&nbsp;&nbsp;
<span onmouseover="this.style.background='red'" title="?(?) Japanese comma">
(?)</span>&nbsp;&nbsp;&nbsp;
<span onmouseover="this.style.background='red'" title="??(Keihou) alarm/warning">
(??)</span>&nbsp;&nbsp;&nbsp;
<span onmouseover="this.style.background='red'" title="?(ga) indicates sentence subject / indicates possessive /  but/however/still/and">
(?)</span>&nbsp;&nbsp;&nbsp;
<span onmouseover="this.style.background='red'" title="??(Nari) ringing/sound">
(??)</span>&nbsp;&nbsp;&nbsp;
</p> 
```

# ios - 对于 UIScrollview，我如何使用自己的 panGestureRecognizer 但允许 scrollView 使用其识别器进行反弹？

> ID：13852506
> 
> 赞同：0
> 
> 时间：2012-12-13T03:32:56.007
> 
> 标签：ios, uiscrollview, uigesturerecognizer

我想在 contentSize 中实现我自己的平移滚动，但允许 scrollView 处理 contentSize 之外的反弹。我似乎无法让它工作。

我试过 requiresGestureRecognizerToFail:，将它设置在所有滚动视图的识别器和我的平移之一之间。

我还尝试在我的平移识别器上实现三个委托方法，当 contentOffset 超出 contentSize 时返回 YES。

欢迎任何提示或建议！即使您不知道解决方案，但有一个可行的想法，请发布！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:01:20.543

实现[UIGestureRecognizerDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIGestureRecognizerDelegate)

使用这种方法：

`- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch`

并在内部进行条件检查，禁用滚动视图，并让手势控制……类似于（完全编造数字）：

```
if (self.scrollView.contentSize > 100) {
    self.scrollView.scrollEnabled = NO;
    [self performSelector:@selector(reenableScrollView) afterDelay:0.3f];
    return YES;
} else {
    return NO;
} 
```

然后重新启用滚动视图

```
- (void)reenableScrollView {
    self.scrollView.enabled = YES;
} 
```

# forms - Symfony2+Doctrine2 实体类型选择

> ID：13852513
> 
> 赞同：0
> 
> 时间：2012-12-13T03:34:56.057
> 
> 标签：forms, symfony, doctrine-orm, entity

我有一个图像实体：

```
class Image {

/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ORM\Column(type="string", nullable=true)
 */
protected $location;

/**
 * @Assert\File(maxSize="6000000")
 */
protected $file;

public function __toString()
{
    return $this->getLocation()
}

//............
} 
```

我想允许用户删除选择的图像并删除它们。我做了一个**ImageSelectType**：

```
class ImageSelectType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add(PROBLEM_IS_HERE, 'entity', array(
                    'class' => 'BloggerBlogBundle:Image',
            )
        )
        ;
}

//.......
} 
```

但是，我似乎无法准确理解实体类型是如何工作的。如果我将 'location' 或某些属性作为*$builder->add*函数的第一个参数，我会得到以下示例：

```
object(Blogger\BlogBundle\Entity\Image)[316]
  protected 'id' => null
  protected 'location' => 
    object(Blogger\BlogBundle\Entity\Image)[79]
      protected 'id' => int 16
      protected 'location' => string '8a307aadd466f1b92b149d3f79069f5a1abc9cd3.png'     (length=44)
      protected 'file' => null
  protected 'file' => null 
```

所以它实际上将整个对象放入空 Image 对象的 Location 属性中。如果我将 'id' 作为第一个参数，我会得到完全相同的结果，只是对象将存储在 $image->id 中。我应该输入什么作为 $builder-add 的第一个参数来实际接收**对象**本身？

如果相关，这是我的操作代码：

```
public function imageDeleteAction()
{
$image = new Image();
    $request = $this->getRequest();

    $em = $this->getDoctrine()->getEntityManager();

    $form = $this->createForm(new ImageSelectType(), $image);
    $form->bindRequest($request);

    var_dump($image);
    exit;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:12:45.667

您需要为 Image 创建一个类型，将其属性分解为单独的字段，然后将该 AbstractType 用作另一个字段的类。

您本质上想要一个[表单集合](http://symfony.com/doc/2.0/cookbook/form/form_collections.html)。

# 更新

我错过了第一次读你的问题有点错误。

看起来您实际上想要做的是创建类似 ImageGroup 对象的东西，该对象具有图像数组。那么这将是您发送到 $this->createForm 的目标，并且您将在 PROBLEM_IS_HERE 中设置该字段。

```
// Entity/ImageGroup.php
class ImageGroup
{
    protected $images;

    public function __construct($images) {
       $this->images = $images;
    }

    public function getImages() { return $this->image; }
    public function setImages($images) { $this->images = $images; }
}

// ImageSelectType
class ImageSelectType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('images', 'entity', array(
                    'class' => 'BloggerBlogBundle:Image',
            )
        )
        ;
}

// Controller
public function imageDeleteAction()
{
    $images = $this->get('doctrine')->getRepository('MyBundle:Image')->findAll();
    $imageGroup = new ImageGroup($images);

    $request = $this->getRequest();

    $em = $this->getDoctrine()->getEntityManager();

    $form = $this->createForm(new ImageSelectType(), $imageGroup);
    $form->bindRequest($request);

    var_dump($image);
    exit;
} 
```

然后，您必须遍历图像并找出丢失的图像才能删除它们。这种方法有一些变化，但这可能是最简单的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T21:07:52.497

这是完成的代码，这是@samanime 建议的 99%，但对于看到它完全完成的人来说仍然可能有用。

ImageSelectType buildForm 函数：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('images', 'entity', array(
                'class' => 'BloggerBlogBundle:Image',
            )
        )
        ;
} 
```

控制器“编辑”页面表单：

```
public function imageEditAction()
{
    $uploadForm = $this->createForm(new ImageFileType());
    $selectForm = $this->createForm(new ImageSelectType());

    return $this->render('BloggerBlogBundle:Admin/Image:edit.html.twig', array(
        'uploadForm' => $uploadForm->createView(),
        'selectForm' => $selectForm->createView(),
    ));
} 
```

控制器“删除”操作：

```
public function imageDeleteAction()
{
    $request = $this->getRequest();
    $em = $this->getDoctrine()->getEntityManager();

    $imageManager = new ImageManager();

    $form = $this->createForm(new ImageSelectType(), $imageManager);
    $form->bindRequest($request);

    $images = $imageManager->getImages();

    foreach ($images as $image) {
        $em->remove($image);
    }

    $em->flush();

    return $this->redirect($this->generateUrl('BloggerBlogBundle_admin_imageEdit'));
} 
```

# scala - 玩 2.0 传递路线价值到行动

> ID：13852519
> 
> 赞同：0
> 
> 时间：2012-12-13T03:35:29.797
> 
> 标签：scala, playframework-2.0

我正在使用 Scala & Play 2.0

我有一个这样的网址：

/v1/people/search/MTIyOjg3YjYzNmU1YTk5MDdkYjY2MzAyODZiM2RkNTMzYzYw

在我的路线文件中：

POST /v1/people/search/:authToken controllers.v1.Application.searchPeople(authToken: String)

我要做的是创建一个安全特征并获取 :aythToken 并通过自定义操作进行验证，该操作在我的函数/方法调用中替换它：

使操作成为 CustomAuthAction

def searchPeople(authToken: String) = Action { 隐式请求 => }

这样我就可以拒绝基于已解析的请求：authToken 而无需将此值设置为 cookie，我已经知道如何做到这一点。

那么我怎样才能把已经通过的 play :authToken 传递给自定义操作呢？

谢谢

* * *

这是我的解决方案：

```
case class CheckSessionRequest(val user: User, request: Request[AnyContent]) extends   WrappedRequest(request)

def RequireAuthToken(f: CheckSessionRequest => Result): Action[AnyContent] = {
Action { request =>
UserValidation.findUserByAuthToken(StringUtil.getAuthTokenFromURL(request.toString)).map     { user =>
f(CheckSessionRequest(user, request))
}.getOrElse( // STRANGE ERROR
Ok(Json.generate(StatusHandler("failed","Unknown Login Error","{}"))).withHeaders(
CONTENT_TYPE -> "application/json"
) 
)
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T09:31:41.083

让我引用 Play 文档：

> Play 应用程序收到的大多数请求都由 Action 处理。
> 
> play.api.mvc.Action 基本上是一个 (play.api.mvc.Request => play.api.mvc.Result) 函数，它处理请求并生成要发送给客户端的结果。

如果您查看动作组合，它会清楚地解释您如何基本上创建自定义动作：

```
def LoggingAction(f: Request[AnyContent] => Result): Action[AnyContent] = {
  Action { request =>
    Logger.info("Calling action")
    f(request)
  }
} 
```

我做过类似的工作，看起来就是这样，有点复杂但很有趣

```
trait SecuredController[UserModel<:ValidableEmail] {

  type LoggedRequestHandler  =  UserModel =>Request[AnyContent] => Result

  def loggedUser(implicit request:Request[_]):Option[UserModel]

  def WithAuthenticatedUser( onUserAuthenticated: => LoggedRequestHandler,
                             onUserAuthenticatedButEmailNotValidated: LoggedRequestHandler,
                             onUnauthenticated: Request[AnyContent]=>Result) = {
    Action{
     implicit request =>
        loggedUser match{
          case Some(user) if (user.emailValidated) => onUserAuthenticated(user)(request)
          case Some(user) if(!user.emailValidated) => onUserAuthenticatedButEmailNotValidated(user)(request)
          case None => onUserNotLogged(request)
        }
    }
  } 
```

这个 trait 基本上定义了两种方法：

*   一种能够确定请求中是否存在当前登录用户（通常使用会话）
*   一个基本上创建一个具有三种可能结果的动作：
    *   onUserAuthenticated 以防有已登录用户的电子邮件已验证
    *   onUserAuthenticatedButEmailNotValidated 如果有记录但未验证电子邮件
    *   onUserNotLoggedif 有记录但未验证电子邮件

LoggedRequestHandler 只是一个函数的类型别名，它采用我的用户 UserModel 并创建一个函数 Request => Result

一旦你有了这个，你基本上可以写如下

```
object EmployeeController extends SecuredController[Employee]{

    def loggedUser(implicit request:Request[_]):Option[Employee]

    def ViewPay = WithAuthenticatedUser{
       ShowPay, 
       ShowEmailNotValidated,
       ShowUserNotLogged        
    }

    def ShowPay(employee:Employee): Request[AnyContent] => Result = {

    }
    def ShowEmailNotValidated(employee:Employee): Request[AnyContent] => Result = {

    }

    def ShowUserNotLogged: Request[AnyContent] => Result = {

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T23:20:00.880

## 这是我想出的解决方案，效果很好。

```
case class CheckSessionRequest(val user: User, request: Request[AnyContent]) extends   WrappedRequest(request)

def RequireAuthToken(f: CheckSessionRequest => Result): Action[AnyContent] = {
    Action { request =>
     UserValidation.findUserByAuthToken(StringUtil.getAuthTokenFromURL(request.toString)).map     { user =>
      f(CheckSessionRequest(user, request))
     }.getOrElse( // STRANGE ERROR
      Ok(Json.generate(StatusHandler("failed","Unknown Login Error","{}"))).withHeaders(
       CONTENT_TYPE -> "application/json"
      ) 
    )
  }
} 
```

然后用 RequireAuthToken 替换你的“Action”调用

# azure - Azure 服务总线中的订阅能否获取以前代理的消息？

> ID：13852520
> 
> 赞同：2
> 
> 时间：2012-12-13T03:35:40.043
> 
> 标签：azure, subscriptions, azureservicebus

我有这个已经有消息的服务总线。目前我正在使用 SqlFilter 创建订阅 - 假设过滤器是 (myProperty < x)。

问题是在消息已经在队列中之前我不知道 x 是什么。当我有一个具体的 x 值并进行新订阅（myProperty < 123）时，我不能使用它来接收已经在队列中的消息。

是否有某种方法可以标记订阅以获取创建订阅之前队列中的消息？我怀疑我需要换一张桌子而不是公共汽车？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:56:59.777

收到消息时会对其进行过滤，因此新订阅将无法获取以前的消息。如果您想在以后处理它们，那么最好使用一个表来保存这些消息。

编辑：使用 SDK 1.8 版，您可以将主题链接在一起——因此您可以为订阅创建一个新主题，并将现有主题中的消息发送到新主题。虽然这会重复消息，但它会使用主题/订阅解决您的问题。观看[此视频](http://channel9.msdn.com/Series/Windows-Azure-Service-Bus-Tutorials/Windows-Azure-SDK-18-Updates-for-Service-Bus)以了解有关 Azure SDK 1.8 更新的更多信息。

# java - jenkins 上的 java 图像处理器看不到桌面

> ID：13852523
> 
> 赞同：1
> 
> 时间：2012-12-13T03:36:29.007
> 
> 标签：java, image, macos, jenkins, screenshot

在 Mac 上，我正在尝试执行一些图像处理。当我在终端中运行我的代码时，它工作正常，但在 Jenkins 中失败了。我创建了一个 jar 文件来捕获屏幕进行测试，捕获的屏幕是黑色的，这意味着它看不到桌面。

我使用了 xvnc jenkins 插件并启用了默认的 vnc。这是我运行 jar 文件的方式：

```
java -jar -Djava.awt.headless=false -Xmx2048m test.jar 
```

在我打印的代码中，它是否在无头运行。它不是无头的。但詹金斯系统信息显示`java.awt.headless=true`，我无法改变它。

任何想法如何在詹金斯上进行这项工作？

**注意：**屏幕截图仅用于测试。最终目标是在桌面上进行图像处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T02:50:46.010

我自己想通了。你需要两件事才能让它工作：

*   **xvnc**这个插件应该正确安装和设置
*   **非无头 Jenkins** 如果您从 DemonLauncher (plist) 启动 Jenkins，您将无法访问桌面，因此请从终端启动 Jenkins 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:22:33.323

Jenkins 通常与自己的用户一起运行，因此它看不到您期望的桌面。

最好将所需文件和其他资源保存在共享文件夹中。

# sublimetext2 - Is there a way to combine several SublimeText2 snippets into one file?

> ID：13852527
> 
> 赞同：0
> 
> 时间：2012-12-13T03:37:06.100
> 
> 标签：sublimetext2

I find it rather surprising and a bit of a usability blunder by the Sublime team not to allow creation of custom snippets in one file and instead making you:

1.  put each snippet into a separate file
2.  make you **choose** the directory to save file **each time** without allowing to define some sort of sensible default path
3.  not allowing you to view your snippets properly and notify of any conflicts
4.  not allowing you to define any sort of priority for these snippets

Now, I **love** ST2, but this is kinda bugging me, so I come to you, the all mighty SO, to help me with these. *I am absolutely open to the possibility that all of the above is easily amended, and I was dense enough not to find the way.**

DISCLAIMER: I know about Zen-Coding/Emmet. It's too much for my liking. I also am not a Python person, but if that's the only thing standing between me and happiness, I am willing to take a dive.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T04:35:32.847

Months ago, I spend a lot of time trying to make a plugin that would replace the current snippet system with something that would take all of the concerns you listed into account. I never got around to finishing it so it's really buggy but it's available on github for anyone who wants to contribute here: [SMART-Snippets](https://github.com/BoundInCode/SMART-Snippets)

But I would not really recommend it for you, just figured I'd mention it. You might want to look into [completion files](http://docs.sublimetext.info/en/latest/extensibility/completions.html). They are essentially snippet files with multiple snippets. You can also take a look at `HTML/html_completions.py` in the ST packages folder (`Preferences > Browse Packages`).

As for the directory issue, I understand the woe. I don't know if there's a simple way to specify a directory but if there's not, it wouldn't be a hard plugin to write. I could write it when I have some free time.

I don't have an answer for the conflicts issue. I suppose using a completions file would simplify this. Sorry.

Priority is explained [in the docs](http://docs.sublimetext.info/en/latest/extensibility/completions.html).

Hope that's some help.

# php - MySQL：两个日期字段的日期之间

> ID：13852531
> 
> 赞同：-1
> 
> 时间：2012-12-13T03:37:45.740
> 
> 标签：php, sql

我有两个字段存储事件的特定日期范围。

假设活动将于 12/13/12 - 12/20/12 开始。

所以我们的领域是

名称：我的活动开始时间：12/13/12 结束时间：12/20/12

用户将有两个输入框。一个框将说明 from_date 和另一个 to_date。如果用户选择

起始日期：2012 年 12 月 15 日 截止日期：12 年 12 月 19 日

它应该显示“我的事件”记录，因为它属于 date_range。

问题：您如何在 SQL 中解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:41:59.303

这取决于您如何将日期数据保存在数据库中

如果是 'datetime' 字段，请使用 'between' 构造

```
mysql_query("select * from events where date between '".date("Y-m-d H:i:s", strtotime($from_date))."' and ".date("Y-m-d H:i:s", strtotime($to_date))); 
```

我无法进行精确查询，因为我不知道表中的字段名称和查询中的参数名称

我希望你理解这个想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T03:59:02.180

至于我的经验。INT 数据类型中的 date 比 mysql 数据库上的 datetime 数据类型轻，您可以尝试先将 datetime 更改为 INT，然后在将其保存到数据库之前将其转换为秒，例如：

```
<?php
 $start_at = strtotime("12/13/12");
 $end_at = strtotime("12/20/12");
/* SAVE on the database */
?> 
```

然后将其保存在具有 INT 数据类型的表日期字段中

然后在查询中，您可以轻松地说

如果用户在两个字段（开始和结束字段）上输入 from_date: 12/15/12 to_date: 12/19/12

```
<?php
 $start_at = strtotime($from_date); //12/15/12
 $end_at = strtotime($to_date); //12/19/12
/*do the query*/
 mysql_query("SELECT name FROM table WHERE Start_at <= '$start_at' AND End_at >= '$end_at'");
?> 
```

我没有完成剧本，但想法就在那里，希望你能明白。

# javascript - 在 .click(function () {?

> ID：13852533
> 
> 赞同：2
> 
> 时间：2012-12-13T03:38:04.067
> 
> 标签：javascript, jquery, ajax, onclick

这有效：

```
$(function(){

    $.ajax({
      url: 'http://files.main.bloggerstop.net/uploads/3/0/2/5/3025338/snowstorm.js',
      async: false,
      dataType: "script",
    });

}); 
```

但是，这不会：

```
$("a#trigger").click(function(){

    $.ajax({
      url: 'http://files.main.bloggerstop.net/uploads/3/0/2/5/3025338/snowstorm.js',
      async: false,
      dataType: "script",
    });

}); 
```

这是一个网站（不是我的）的季节性黑客，所以它不一定是完美的。只需要能够在点击时加载外部 .js 文件。

谢谢 ：）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T03:40:42.190

您删除了*“DOM 就绪”*代码。把它放回去，它应该会再次工作。

```
$(function() {
    $("a#trigger").click(function(){

        $.ajax({
          url: 'http://files.main.bloggerstop.net/uploads/3/0/2/5/3025338/snowstorm.js',
          async: false,
          dataType: "script",
        });

    });
}); 
```

当您将脚本放在页面顶部时，它会立即运行，而不是等待页面的其余部分加载。

通过将您的处理程序绑定到 DOM 就绪处理程序中，它在文档加载之前不会运行。

此外，请确保您的选择器正确匹配您的目标元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:41:39.223

我试过你的演示，代码本身解释了这个问题：

> 默认情况下在 body onload() 之后初始化（通过底部的 addEventHandler() 调用。）要自定义属性，请在此脚本运行后（**但在 body.onload 之前**）在下面编辑或覆盖配置，例如。snowStorm.snowStick = false;

您的问题是，在第二种情况下，您在页面完成加载后加载脚本，因此您的脚本永远不会被初始化。

[更新] 我已经设置了一个现场演示。相比：

*   准备好 DOM：http: [//jsfiddle.net/4gnxk/](http://jsfiddle.net/4gnxk/)
*   加载时：http: [//jsfiddle.net/4gnxk/1/](http://jsfiddle.net/4gnxk/1/)

两者的唯一区别是左侧设置（`DOM ready vs. onload`）

# ruby-on-rails - Rails 3.2.8 中的强参数

> ID：13852534
> 
> 赞同：17
> 
> 时间：2012-12-13T03:38:07.000
> 
> 标签：ruby-on-rails, strong-parameters

[该视频](http://vimeo.com/51181496)指出，可以保护通过控制器进入的输入，但仍然可以通过模型和规格进行批量分配。但是，在 3.2.8 中使用 strong_parameters 时，我没有看到此功能被记录为功能。

我知道我需要混合`ActiveModel::ForbiddenAttributesProtection`到我的模型中并设置`config.active_record.whitelist_attributes = false`. `config/application.rb`我还`attr_accessible`从模型中提取了所有呼叫。

不管有没有 mixin，我都会收到大量分配错误。

`ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: home_phone, cell_phone`

我错过了什么吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-10T07:42:43.850

建议的[RailsCast](http://railscasts.com/episodes/371-strong-parameters?view=asciicast)可能是一个好的开始，但这里总结了在 Rails 3.x 中你必须做什么才能让强参数而不是 attr_accessible 工作：

1.  添加`gem 'strong_parameters'`到您的 Gemfile 并运行 bundle。

2.  `config.active_record.whitelist_attributes = true`在 config/application.rb 中注释掉（或设置为 false）

3.  `ActiveModel::ForbiddenAttributesProtection`在你的模型中混合。每个模型执行此操作，或全局应用于所有模型：

    `ActiveRecord::Base.send(:include, ActiveModel::ForbiddenAttributesProtection)`

    （railscast 建议在新的初始化程序中执行此操作： config/initializers/strong_parameters.rb ）

4.  从现在开始，您将不得不使用如下语法：

    ```
    model_params = params[:model].permit( :attribute, :another_attribute )
    @model.update_attributes( model_params ) 
    ```

    当您更新模型时。在这种情况下，`params[:model]`除了`:attribute`和中的任何属性`:another_attribute`都会导致 ActiveModel::ForbiddenAttributes 错误。

您还可以使用来自 的其余新魔法`ActionController::Parameters`，例如`.require(:attribute)`强制属性的存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T12:10:44.840

它与您的问题不同，但它可能会出现在其他人获得 MassAssignmentSecurity::Error 的情况下。我遇到了一个问题，即“id”和“type”属性似乎在默认情况下受到保护，即使我已采取规定步骤切换到使用强参数而不是批量分配保护。我有一个名为“type”的关联，我将其重命名为“project_type”以解决问题（该属性已经是 project_type_id）。

# makefile - Makefile 依赖项不适用于虚假目标

> ID：13852535
> 
> 赞同：26
> 
> 时间：2012-12-13T03:38:09.070
> 
> 标签：makefile, dependencies

这是我的 Makefile 的简化版本：

```
.PHONY: all 

all: src/server.coffee
  mkdir -p bin
  ./node_modules/.bin/coffee -c -o bin src/server.coffee 
```

我想运行`make`并且只有在`src/server.coffee`更改时才重新编译。但是，每次运行时它都会重新编译`make`：

```
$ make
mkdir -p bin
./node_modules/.bin/coffee -c -o bin src/server.coffee
$ make
mkdir -p bin
./node_modules/.bin/coffee -c -o bin src/server.coffee 
```

如果我将 Makefile 更改为不使用虚假目标，它会按预期工作。新生成文件：

```
bin/server.js: src/server.coffee
  mkdir -p bin
  ./node_modules/.bin/coffee -c -o bin src/server.coffee 
```

结果：

```
$ make
mkdir -p bin
./node_modules/.bin/coffee -c -o bin src/server.coffee
$ make
make: `bin/server.js' is up to date. 
```

为什么它不尊重我对虚假目标的依赖？我问的原因是因为实际上，我不会只是将单个文件编译到另一个文件中，所以我不想跟踪所有输出文件的名称以用作目标。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-12-21T18:11:43.693

而不是一个虚假的目标（正如@cmotley 指出的那样，它正在完全按照它应该的方式工作）当你想避免额外的工作时你可能使用的是一个[“空目标”](http://www.gnu.org/software/make/manual/make.html#Empty-Targets)：

> 空目标是虚假目标的变体；它用于保存您不时明确请求的操作的配方。与虚假目标不同，这个目标文件可以真实存在；但文件的内容无关紧要，通常是空的。
> 
> 空目标文件的目的是记录最后一次执行规则配方的时间及其最后修改时间。这样做是因为配方中的命令之一是用于更新目标文件的触摸命令。

**但是**，在这种情况下，实际上不需要添加额外的空输出文件——您已经有了 CoffeeScript 编译的输出！正如您在问题中已经证明的那样，这符合更典型的 Makefile 模式。你可以做的是重构这种方法：

```
.PHONY: all
all: bin/server.js

bin/server.js: src/server.coffee
  mkdir -p bin
  ./node_modules/.bin/coffee -c -o bin src/server.coffee 
```

现在你拥有了你想要的两样东西：一个很好的传统“全部”目标，它是正确的虚假，以及一个不会做额外工作的构建规则。您还可以更好地使其更通用，以便您可以轻松添加更多文件：

```
.PHONY: all
all: bin/server.js bin/other1.js bin/other2.js

bin/%.js: src/%.coffee
  mkdir -p bin
  ./node_modules/.bin/coffee -c -o bin $< 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-12-13T03:48:49.200

根据 Make 文档：

```
The prerequisites of the special target .PHONY are considered
to be phony targets. When it is time to consider such a target, 
make will run its recipe unconditionally, regardless of whether 
a file with that name exists or what its last-modification time is. 
```

[http://www.gnu.org/software/make/manual/html_node/Special-Targets.html](http://www.gnu.org/software/make/manual/html_node/Special-Targets.html)

Make 无条件地运行 PHONY 目标的配方 - 先决条件无关紧要。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-13T03:47:27.883

需要有一些目标文件来与 server.coffee 文件的修改时间进行比较。由于您没有具体的目标`make`，因此无法知道输出是否比依赖项更新，因此它将始终 build `all`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-02-13T15:50:47.433

正如其他人提到的，make 查看文件的时间戳以确定依赖项是否已更改。

如果您想“模拟”具有依赖关系的虚假目标，则必须创建一个具有该名称的真实文件并使用该`touch`命令（在 Unix 系统上）。

我需要一个解决方案，仅在 makefile 更改时才清理目录（即编译器标志已更改，因此需要重新编译目标文件）。

这是我使用的文件（并在每次编译之前运行），文件名为`makefile_clean`：

```
makefile_clean: makefile
    @rm '*.o'
    @sudo touch makefile_clean 
```

该`touch`命令将上次修改的时间戳更新为当前时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-03T09:00:27.943

感谢@anonymous-penguin，但在我看来，将那些只是一个标志的无用文件放在文件夹`/tmp`中是一个更好的主意。

`Dockerfile`这是makefile，当且仅当文件被更改时，它将构建一个docker镜像。

```
# Configable variable
BUILD_FLAG_FILE = /tmp/ACMHomepage/Dockerfile_builded

# State variable
REBUILD = false

.PHONY: build
build: $(BUILD_FLAG_FILE)

$(BUILD_FLAG_FILE): Dockerfile
    $(eval REBUILD = true)
    @echo "Build image $(DB_NAME)..."
    @docker build -t $(DB_NAME) .
    @mkdir -p $(dir $(BUILD_FLAG_FILE))
    @touch $(BUILD_FLAG_FILE) 
```

如您所见，它将创建一个空文件作为`/tmp/ACMHomepage/Dockerfile_builded`. 如果构建了 docker 映像，变量`REBUILD`将为`true`，这很有用！

# windows - 在 Windows 2012 中启用家庭组

> ID：13852537
> 
> 赞同：5
> 
> 时间：2012-12-13T03:38:22.490
> 
> 标签：windows, networking

在我的 Windows 2012 Standard 安装的以下路径中，我看到了 HomeGroup，就像在 Windows 8 中一样。控制面板/系统和安全/操作中心 -> 维护 -> 家庭组。

它说：“您现在无法访问或创建家庭组”。并且按下视图设置按钮似乎什么也没做。

这应该工作吗？如果它不起作用，将它放在那里似乎很愚蠢？还是我需要启用其他功能才能正常工作？

谢谢

# dataset - 如何像数据集一样使用行过滤器操作？

> ID：13852538
> 
> 赞同：1
> 
> 时间：2012-12-13T03:38:25.100
> 
> 标签：dataset

我有个问题 ：

```
DataSet DS ;
DS.Tables[0].DefaultView.RowFilter="[Name] Like '%w[eēéěè]%'"; 
```

> Like 运算符中的错误：字符串模式 '%w[eēéěè]%' 无效。

```
DS.Tables[0].DefaultView.RowFilter="[Name] Like 'w[eēéěè]*'"; 
```

> Like 运算符中的错误：字符串模式 'w[eēéěè]*' 无效。

我喜欢这个

```
DS.Tables[0].DefaultView.RowFilter="[Name] Like '%w[[]eēéěè[]]%'"; 
```

它不起作用

我应该怎么办 ？

# c - C中用于获取字符串的指针算法

> ID：13852540
> 
> 赞同：0
> 
> 时间：2012-12-13T03:38:38.483
> 
> 标签：c, pointers, pointer-arithmetic

我想获取字符数组的元素，但根本没有成功，问题是我只得到第一个和最后一个元素，仅此而已，我的代码是：

```
void getcharacters(char *cad)
{
 int l;
 int *i;
 l=strlen(cad);
 for (i=&cad[0];i<&cad[l];i++){
     printf("%c\n",*cad);
 }
} 
```

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T03:42:25.823

an 的大小`int`可以是 a 的 4 x 大小`char`，所以当你这样做时，`i++`你实际上是在跳过 3 个字符。

此外，您打印出来`*cad`而不是`*i`.

修复更改`i`并`char*`打印`*i`而不是`*cad`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T03:43:07.647

您对所有 printf 使用相同的字符（`*cad`或`cad[0]`）。您需要的是使用索引在每次迭代中获取下一个字符。我还需要成为指向 char 的指针：

```
void getcharacters(char *cad)
{
 int l;
 char *i;
 l=strlen(cad);
 for (i=&cad[0];i<&cad[l];i++){
     printf("%c\n", *i );
 }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T03:43:36.527

为什么不从第一个字符迭代到最后一个字符并将它们作为数组索引访问

```
int i;
int l=strlen(cad);
for (i=0;i<l;i++)
{
  printf("%c\n",cad[i]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T03:46:48.790

其他答案已经告诉您为什么它不起作用，我想知道为什么您不只是迭代直到空终止符？

```
void getcharacters(char *cad)
{
 char *i;
 for (i = cad; *i; i++) {
     printf("%c\n",*i);
 }
} 
```

# security - toDataURL 画布 drawImage

> ID：13852547
> 
> 赞同：-1
> 
> 时间：2012-12-13T03:39:22.930
> 
> 标签：security, canvas, cross-domain, drawimage

我正在尝试制作一个从网络摄像头提要中捕获屏幕截图的应用程序。我有一堆网络摄像头的精选 URL，我试图将它们加载到画布中，然后我可以使用 toDataURL 保存它们。问题是，当我使用来自不同来源的 URL 的 drawImage 时，Chrome 和 Firefox 会引发安全错误。有什么办法可以解决这个问题/还有什么我可以使用的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T13:00:06.800

您可以尝试在同一域中使用受限代理（[nginx](http://nginx.org/en/docs/)将是智能且强大的解决方案），或者制作一个服务器端脚本来准备和/或缓存图像（如果数据可重用，需要一些保护等）。在特定条件下，有可用的[CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)

# html - 背景图像位于屏幕的“0% 0%”而不是父元素，为什么？

> ID：13852549
> 
> 赞同：0
> 
> 时间：2012-12-13T03:39:51.233
> 
> 标签：html, css, background-image

为了更好地理解我在说什么，[请转到这支笔](http://codepen.io/joe/pen/tnJjH)，它显示了我正在使用的 HTML 和 CSS 代码（[带有预览](http://codepen.io/joe/full/tnJjH)）。

看一下第二张背景图片的 CSS 代码：

```
.top-navbar-channels a {
    background-attachment: fixed;
    background-color: transparent;
    background-image: url('http://i.imgur.com/Z1YZt.png');
    background-position: 112px 8px;
    background-repeat: no-repeat;
    padding: 0 0 0 35px;
} 
```

我不明白的是，背景被定位在屏幕上，而不是父元素。我尝试`display: block;`了父元素和元素本身，但没有任何改变。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:44:19.860

当您拥有`background-attachment: fixed`时，背景图像的原点*始终*是视口。这就是它从屏幕左上角开始并相对于屏幕左上角定位的原因。

由于您已经将导航栏附加到页面顶部，因此您不必对背景图像应用固定定位。`background-attachment: fixed`从您的两个导航链接中删除并相应地调整坐标应该是安全的。

# css - 如何从 Wordpress 插件管理元框控制 div 样式

> ID：13852552
> 
> 赞同：0
> 
> 时间：2012-12-13T03:40:08.530
> 
> 标签：css, wordpress

我有一个包含以下字段和值的插件元框（在 Wordpress 管理员中）：

```
Name of the div class selector= featured_content
Font family= Verdana
Font color= #000 
```

这些后端字段可以正常工作，并且可以完全正常工作并存储在 Wordpress 后元表中。

在 Wordpress 前端，其中一个内容模板具有以下 div：

```
<div class="featured_content">
The quick brown fox jumps over the lazy dog.
</div> 
```

我将如何通过该 div 的 Wordpress 元框设置与 Wordpress 前端进行通信？因此，当加载包含“featured_content”的 div 类选择器名称的页面时，将根据后端元框设置实现正确的样式。谢谢你的任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:24:41.207

我认为最简单的方法是使用插件将 CSS 输出到前端，然后使其可写。之后插件可以编写它需要应用的任何 CSS 规则。

JS 等也是如此。我现在已经有这个工作了。

# php - 无法访问名称中带有句点的 PHP 对象字段

> ID：13852558
> 
> 赞同：0
> 
> 时间：2012-12-13T03:40:30.573
> 
> 标签：php, simplexml, stdclass

我遇到了 PHP 和对象密钥访问的问题。

我有一个 SimpleXMLElement，它返回一个包含 11 个 SimpleXMLElements 的数组，如下所示：

```
SimpleXMLElement Object
(
    [Power.AssetToAssetMapping] => Array
    (
        [0] => SimpleXMLElement Object
            (
                [AssetToAssetMappingID] => 36063
                [Supplier_x0020_Asset_x0020_Type] => Powerstrip
                [..etc..] 
```

当我尝试使用大括号隔离数组时，我只看到数组的第一条记录。其他 10 个从不输出：

```
print_r( $xml->{'Power.AssetToAssetMapping'} ); 
```

当我使用整个对象时，我看到所有 11 条记录：

```
print_r( $xml ); 
```

有没有另一种方法来访问这个对象的第一个孩子？我可以遍历 $xml 中返回的对象的每个子对象并很好地访问每个元素，但这似乎是 PHP 中的一个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T04:54:51.247

当您使用`print_r`：

```
print_r( $xml->{'Power.AssetToAssetMapping'} ); 
```

SimpleXML 将神奇地在这里只提供第*一个*匹配元素。但是，从技术上讲，使用该值实际上是 a ，它允许您通过（或类似）基于零的整数索引[`SimpleXMLElement`](http://php.net/SimpleXMLElement)访问所有（以 a 形式[`Traversable`](http://php.net/Traversable)）或特定的：[`ArrayAccess`](http://php.net/ArrayAccess)

```
$xml->{'Power.AssetToAssetMapping'}[1]; 
```

例如，这是`<Power.AssetToAssetMapping>`根元素下的第二个元素。

```
foreach ($xml->{'Power.AssetToAssetMapping'} as $element) {
    // each element
    print_r($element);
} 
```

`<Power.AssetToAssetMapping>`例如，对根元素下的所有元素进行迭代，从第一个到最后一个。

请注意，*此行为特定于`SimpleXMLElement`*. 一个简单*的*`stdClass`行为方式不同。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:47:53.460

只需将 SimpleXMLElement 对象转换为数组；）

```
$xml = (array)$xml; 
```*

# node.js - Express/node.js 路由器中的通配符

> ID：13852564
> 
> 赞同：11
> 
> 时间：2012-12-13T03:41:21.237
> 
> 标签：node.js, express

我想“摆脱”node.js 中的路由器。目前，我所拥有的是这样的：

```
app.get '/thing1', (req, res) ->
    res.render 'thing1'

app.get '/thing2', (req, res) ->
    res.render 'thing2' 
```

有没有办法将这些折叠成这样的东西：

```
app.get '/(*)', (req, res) ->
    res.render '(*)' 
```

PS：我使用的是coffeescript，但任何语言的答案都可以

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-13T04:04:49.103

```
app.get('/:thing', function (req, res) {
  res.render(req.params.thing)
}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-20T21:46:04.570

来自[http://expressjs.com/api.html#app.VERB](http://expressjs.com/api.html#app.VERB)：

```
app.get(/^(.*)$/, function(req, res, next){
  res.send(req.params[0]);
}); 
```

工作要点： [https ://gist.github.com/elliotf/5826944](https://gist.github.com/elliotf/5826944)

# excel - 找出出现的次数

> ID：13852566
> 
> 赞同：-1
> 
> 时间：2012-12-13T03:41:30.760
> 
> 标签：excel

苹果

浆果

浆果

椰子

椰子

椰子

甜甜圈

甜甜圈

葡萄

酸橙

大家好，以上是我的示例数据。如何计算出现次数？我想要的结果应该是这样的：

苹果 1

浆果 2

椰子 3

甜甜圈 2

葡萄 1

石灰 1

我试过 =COUNTIF($A:$A,A7) 但不是我想要实现的。请指导。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:42:20.950

使用 **=COUNTIF(A1:A19,A*)**公式

根据列值更改**A***值。

```
For example

two column A and B with row number. inset formula in B column of front of each fruits.  

--  A     -------------------B------

1 apple        =COUNTIF(A1:A5,A1)

2 berry        =COUNTIF(A1:A5,A2)

3 berry        =COUNTIF(A1:A5,A3)   

4 coconut      =COUNTIF(A1:A5,A4)  

5 coconut      =COUNTIF(A1:A5,A5) 
```

# php - 从“@”开始的 SQL 语法错误

> ID：13852570
> 
> 赞同：1
> 
> 时间：2012-12-13T03:41:40.987
> 
> 标签：php, mysql, sql

当我运行包含“@”的字符串时，我有一个 mySQL 查询卡住了。我试过 htmlentities() 和 htmlspecialchars() 无济于事。这是我正在运行的内容：

```
 $name=$_POST['name'];
$first=$_POST['first'];
$last=$_POST['last'];
$bio=htmlentities($_POST['bio']);
$email=htmlentities($_POST['email']);
$pass=$_POST['pass'];
$date=date("m/d/y");
$bd=date('m-d-y',strtotime($_POST['month'].$_POST['date'].$_POST['year']));
$qer="insert into everything (user,first,last,bio,email,pass,date,bd) values ($name,$first,$last,$bio,$email,$pass,$date,$bd)";
if(!(mysql_query($qer,$con))){
    echo "no qer";
    echo mysql_error();
} 
```

这是错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '@re5yhgr5tyhrtyhr5tyr5tyhrt,test@first.com,pass,12/13/12,01-01-70)' 附近使用正确的语法

我最初只是在我的电子邮件参数中尝试它，但我现在知道无论它在哪里都有问题。>:|

我假设“第 1 行”是 sql 的第一行，因为我的实际第 1 行是“”...

抱歉，如果这很明显，请提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T03:44:38.740

插入数据类型为 的值时`string`，*应用单引号括起来*。（*也适用于日期、时间、日期时间等，只要它不是数字*）

```
$qer="insert into everything (user, first, last, bio, email, pass, date, bd) 
      values ('$name', '$first', '$last', ...)"; 
```

但是上面的查询是易受攻击的`SQL Injection`，请阅读下面的文章以了解如何防止`SQL Injection`

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T03:45:56.850

尝试：在 varchar、char 或 date 类型的字段中添加撇号 (')。

```
 ...values ('$name','$first','$last','$bio','$email','$pass','$date','$bd')... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T03:45:03.420

您应该将插入 sql 的参数包装在字符串中，例如`"test@first.com"`

# android - 如何使图像视图像屏幕上的气泡一样浮动？

> ID：13852571
> 
> 赞同：0
> 
> 时间：2012-12-13T03:41:52.680
> 
> 标签：android, android-animation

我正在尝试制作一个 android 应用程序，我希望在发生某些操作时让气泡漂浮在屏幕上。有人可以在这里帮助我吗？在过去的四天里，我一直在摔头，但我无法弥补。所以请在这里帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:46:07.747

对于您的用例，与其使用 ImageViews，不如使用[Canvas](http://developer.android.com/reference/android/graphics/Canvas.html)自己处理绘图。

绘制具有透明背景的全屏画布。创建一个位图数组（每个要绘制的图像一个，记住使用圆形蒙版使它们成为气泡状，注意内存问题）并将它们绘制到屏幕的不同位置。

使用自定义 RNG 算法为您的位图生成适当的位置，然后在画布上绘制它们。使用[线程](http://developer.android.com/reference/java/lang/Thread.html)来处理动画。

[下面](http://www.mail-archive.com/android-developers@googlegroups.com/msg30548.html)是生成圆形裁剪位图的代码：

```
int targetWidth = 100;
    int targetHeight = 100;
    Bitmap targetBitmap = Bitmap.createBitmap(
        targetWidth,
        targetHeight,
        Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(targetBitmap);
    Path path = new Path();
    path.addCircle(
        ((float)targetWidth - 1) / 2,
        ((float)targetHeight - 1) / 2,
        (Math.min(((float)targetWidth), ((float)targetHeight)) / 2),
        Path.Direction.CCW);
    canvas.clipPath(path);
    Bitmap sourceBitmap = BitmapFactory.decodeResource(
        getResources(),
        R.drawable.my_image);
    canvas.drawBitmap(
        sourceBitmap,
        new Rect(0, 0, sourceBitmap.getWidth(), sourceBitmap.getHeight()),
        new Rect(0, 0, targetWidth, targetHeight),
        null);
    ImageView imageView = (ImageView)findViewById(R.id.my_image_view);
    imageView.setImageBitmap(targetBitmap); 
```

当然，您必须修改此代码以将位图绘制到画布上，而不是在 ImageView 中设置它。将位图裁剪一次，然后将裁剪后的图像放入位图数组中会更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:20:44.467

使用此代码在运行时更改图像视图位置

```
RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(30, 30);
        layoutParams.setMargins(left, top, righ, bottom);
        yourImageView.setLayoutParams(layoutParams); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T03:52:51.413

您只能使用 android 中的动态壁纸来实现此功能。我在 Andengine 中创建了许多浮动对象实时论文！:) 所以如果你有任何困惑，你可以进一步问我

# html - How do I get the caret to line up with text

> ID：13852581
> 
> 赞同：1
> 
> 时间：2012-12-13T03:42:27.423
> 
> 标签：html, css

I have text and then a carat which drops down the text but for some reason can not get the caret to vertically align with the text despite my efforts.

Jsfiddle: [http://jsfiddle.net/nCP9J/5/](http://jsfiddle.net/nCP9J/5/)

HTML:

```
<div id ="hiddensubmit" class = "dropdown-toggle" data-toggle="dropdown" onclick="document.formSearch.submit()" style="top:55px; font-size:20px;">
<a href="#" id="drop" class ="dropdownsearch">Stuff&nbsp;<span class = "searchcaret" style="display:inline;line-height:66px;vertical-align:middle;"></span></a></div> 
```

CSS:

```
.dropdown-toggle {
  *margin-bottom: -3px;
}
.searchcaret {
  display: inline-block;
  width: 0;
  height: 0;
  line-height:100px;
  padding: 10px 0px 0px 0px;
  vertical-align: middle;
  border-top: 4px solid #000000;
  border-right: 4px solid transparent;
  border-left: 4px solid transparent;
  content: "";
  opacity: 0.3;
  color: #5A5A5A;
  filter: alpha(opacity=30); 
```

position:absolute; top:10px; }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:55:05.567

Change this:

```
<a href="#" id="drop" class ="dropdownsearch">Stuff&nbsp;<span class = "searchcaret" style="display:inline;line-height:66px;vertical-align:middle;"></span></a></div>​ 
```

To this:

```
<a href="#" id="drop" class ="dropdownsearch">Stuff&nbsp;<span class = "searchcaret"></span></a></div>​ 
```

It was mainly the `display:inline` that did it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T03:56:01.730

In your inline CSS for the caret span, change:

```
<a href="#" id="drop" class ="dropdownsearch">Stuff&nbsp;<span class = "searchcaret" style="display:inline;line-height:66px;vertical-align:middle;"></span></a> 
```

to:

```
<a href="#" id="drop" class ="dropdownsearch">Stuff&nbsp;<span class = "searchcaret" style="display:inline-block;line-height:66px;vertical-align:middle;"></span></a> 
```

you need to change that for any vertical aligning. Then move the padding in the CSS to tweak it exactly how you want.

# android - 通过 Rest Server 使用 facebook 帐户发布到 Drupal

> ID：13852583
> 
> 赞同：4
> 
> 时间：2012-12-13T03:43:03.810
> 
> 标签：android, facebook, rest, drupal, oauth

我有一个安装了 Services 3 模块的 Drupal 7。我启用了 Rest Server，并且能够使用 Rest 调用登录和发布内容。现在我想允许 Facebook 用户通过**REST**接口登录和发布内容。这怎么可能？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T18:45:08.427

如果您指的是 Drupal 的 Facebook OAuth 服务，请继续查看[https://drupal.org/sandbox/utneon/1903856](https://drupal.org/sandbox/utneon/1903856)。这是实验性的，但我之前查看了代码，这至少是一个很好的起点。

我不确定您的确切实现，但这允许 iPhone/Android 应用程序使用 oauth 使用服务登录到您的站点。一旦他们登录，他们就可以使用任何其他服务发布内容。

# wpf - 我可以检测弹出位置的变化吗？

> ID：13852585
> 
> 赞同：1
> 
> 时间：2012-12-13T03:43:14.573
> 
> 标签：wpf, c#-4.0, popup

我在使用 wpf 弹出窗口时遇到问题，即：

## 我怎么知道弹出窗口改变了它的位置？

例如：

我有一个弹出窗口，它的位置设置为底部，当我将窗口移动到一个角落时，位置更改为顶部，实际上它没有。我根据弹出窗口打开事件对其进行调试。所有我想知道它我怎么知道它会改变，所以我可以改变提示背景！谢谢。

你可以在这里看到演示图片：

[http://i.stack.imgur.com/lxOVl.jpg](http://i.stack.imgur.com/lxOVl.jpg)

[http://i.stack.imgur.com/wWEAQ.jpg](http://i.stack.imgur.com/wWEAQ.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:14:31.623

我有同样的问题。在我的情况下，弹出窗口总是在一个窗口（不是页面）上。我通过注册到 Window 事件来解决它：LocationChanged 和 SizeChanged：

```
 Window w = Window.GetWindow(this);
        if (w != null)
        {
            w.LocationChanged += windowLocationChanged;
            w.SizeChanged += windowLocationChanged;
        } 
```

要将弹出窗口与窗口（或其中的控件）重新对齐，我使用以下技巧：

```
 if (!_popup.IsOpen)
            return;

        if (_popup.VerticalOffset == 0.1)
            _popup.VerticalOffset = 0;
        else
            _popup.VerticalOffset = 0.1; 
```

设置 VerticalOffset 会触发弹出窗口的重新对齐，并且较小的值会将其保持在像素边界内。

# aptana - 步骤过滤器图标为“灰色”（停用）

> ID：13852588
> 
> 赞同：1
> 
> 时间：2012-12-13T03:43:32.127
> 
> 标签：aptana

预先说明：我是 Aptana Studio 3 的新手，仍在探索如何使用。最近，我下载并安装了它，我注意到步骤过滤器显示为“灰色”（停用）。我已经阅读了许多遇到同样问题的其他人发布的许多 Google 帖子，并且我已经阅读了我能找到的所有常见问题解答，并且我已经尝试实施我在帖子中找到的“修复”。到目前为止，没有任何效果，我无法使用这些关键的 Step 过滤器。我将不胜感激任何可能有助于我发现如何打开/激活这些步骤过滤器的意见和建议。

基线信息：

Aptana Studio 3，内部版本：3.2.2.201208201020 内部版本：jenkins-studio3-rcp-master-210 (origin/master) 日期：2012 年 8 月 20 日，10:22:09 安装 Firebug 1.11.0 使用的操作系统：MS Windows 7 企业版6.1.7601 服务包内部版本 7601

到目前为止我所尝试的：

（1）在被测试的javascript中创建断点（2）确保Debug视图被激活（Windows--Show View--Debug）（3）运行Debug

控制台消息：

firebug.main; 扩展：[object Object] 异常类型错误：扩展未定义 (/content/moduleConfig.js:130) 不推荐使用突变事件。改用 MutationObserver。(/content/orion.js:3408) 未知属性“-moz-border-radius”。声明被放弃。(/content/panel.html:378) 未知属性“-moz-border-radius”。声明被放弃。(/content/panel.html:378) 未知属性“-moz-border-radius”。声明被放弃。(/content/panel.html:378) 不推荐使用突变事件。改用 MutationObserver。(/content/chrome/tabContext.js:589)

谢谢大家！

抢

# jquery - 如果在生成图表时值低于 2.5，则条形图的颜色应为红色

> ID：13852594
> 
> 赞同：2
> 
> 时间：2012-12-13T03:44:07.027
> 
> 标签：jquery, jqplot

以下是我的代码....

在下面的示例中，有 2 个条的值低于目标值 2.5.. 需要以红色显示..

```
$(document).ready(function(){
  var line1 = [['Content Of The Training', 2.2], ['Relavance Of Training To The Work Place', 3.5], ['Phase Of The Training', 3.2], 
  ['Session Met The Objectives Stated', 3.4], [' The Session Met My Exceptations', 3], 
  ['Overall Ratining On the Training', 2.1]];

  var plot1 = $.jqplot('graph1', [line1], {
    title: 'Rating On Training',
    series:[{renderer:$.jqplot.BarRenderer}],
    axesDefaults: {
        tickRenderer: $.jqplot.CanvasAxisTickRenderer ,
        tickOptions: {
        fontFamily: 'Calibri',
          angle: -30,
          fontSize: '10pt'
        }
    },

axes: {
  xaxis: {
    renderer: $.jqplot.CategoryAxisRenderer
  }
},
    canvasOverlay: {
  show: true,
  objects: [
    {horizontalLine: {
      name: 'pebbles',
      y: 2.5,
      lineWidth: 2,
      color: 'rgb(255, 0, 0)',
      shadow: true,
      lineCap: 'butt',
      xOffset: 0
    }},

  ]
}
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-05T09:54:39.007

我通过如下修改功能完成了上述工作

```
var barColorSetter = function(indexVal, ratingValue, limit)
{
    if(ratingValue<limit)
    {
        myBarColors[indexVal]="#750000";//maroon
    }
    else if(ratingValue == limit)
    {`enter code here`
        //myBarColors[indexVal]="#7399D2";//Blue
                myBarColors[indexVal]="#FF7E00";//traffic Yellow(amber color)
    }
    else
    {
        myBarColors[indexVal]="#135F0E";//green
    }   
} 
```

我已将设置的颜色值传递给上述方法....谢谢大家

# extjs4.1 - ExtJS 4：消息框的关闭按钮不可见

> ID：13852598
> 
> 赞同：2
> 
> 时间：2012-12-13T03:44:39.117
> 
> 标签：extjs4.1

我是 ExtJs 的新手。当我运行以下代码时，它会显示消息提示，但提示右上角的关闭按钮不可见，但是当我单击右上角时，框会关闭。

```
<html>
<head>
    <title>Getting Started </title>
    <link rel="stylesheet" type="text/css" 
        href="lib/extjs/resources/css/ext-all.css"/>
    <script src="lib/extjs/adapter/ext/ext-base.js"></script>
    <script src="lib/extjs/ext-all-debug.js"></script>
    <script>
    Ext.onReady(function(){
        Ext.Msg.prompt('Name', 'Please enter your name:', function(btn, text){
                if (btn == 'ok'){
                    Ext.Msg.alert('Status', 'You Okayed it: '+text);
                }else{
                Ext.Msg.show({
                    title: 'Hello',
                    msg: 'you cancelled it: Mr:'+text,
                    buttons: Ext.Msg.YESNOCANCEL,
                    animEl: 'elId'
                });
            }
        });
    });
    </script>
</head>
<body>
<!--Nothing to Display -->
</body>
</html> 
```

![截屏](../Images/d4d278f10df3aaaeed8796429f4d02f2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:21:35.603

您的错误不可重现。如果我获取您的代码并运行它，则会显示关闭按钮。

```
 Ext.Msg.prompt('Name', 'Please enter your name:', function(btn, text){
            if (btn == 'ok'){
                Ext.Msg.alert('Status', 'You Okayed it: '+text);
            }else{
            Ext.Msg.show({
                title: 'Hello',
                msg: 'you cancelled it: Mr:'+text,
                buttons: Ext.Msg.YESNOCANCEL,
                animEl: 'elId'
            });
        }
    }); 
```

**[JSFiddle](http://jsfiddle.net/sran/czrt6/2/)**

# iphone - monotouch iphone 应用程序被提升为 ipad 应用程序

> ID：13852599
> 
> 赞同：0
> 
> 时间：2012-12-13T03:44:49.017
> 
> 标签：iphone, ipad, xamarin.ios, ios-universal-app

我有一个为 iphone/ipad 开发的应用程序在 ipad 中正确运行。A 犯了将其更改为通用的错误。此更改后ipad中的应用程序无法正常工作，iphone 640×960原屏之外的任何事件都无法点击。

我的问题是，除了为每个屏幕创建两个单独的视图之外，还有其他解决方法吗？

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:42:45.563

没有来源很难说。但我想您在某处创建了一个 640x960 像素（实际上是 320x480 单位）的视图或窗口，但已`ClipsToBounds == false`关闭裁剪 ( )。这意味着所有子视图都将被渲染，但可能部分位于您固定大小的父视图之外。这将防止手势被识别。首先要检查：如果您使用的是 Interface Builder，请检查所有视图是否正确设置了自动调整大小的掩码。如果您在代码中创建所有内容，还要检查那里的调整大小掩码。

# ajax - AJAX url 请求循环

> ID：13852601
> 
> 赞同：0
> 
> 时间：2012-12-13T03:44:55.997
> 
> 标签：ajax, url, request

如果我得到一个特定的错误，我如何在ajax中循环url请求，如果请求成功，我将检查循环中的状态，然后在循环内部会有一个if语句，如果成功做某事，如果不做某事.. . 并且在下一个 url 请求之前必须有延迟

例如

如果请求成功，isSuccess 将保存该值

```
While !(isSuccess=="success"){

ajax url request here

 if success {
 do someting
 }
 else
 {
 do something
 }
 delay code here
} 
```

我希望有人可以帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:50:54.460

您可以将**递归用作 Ajax 循环**

```
function ajaxFunction() {
    reqUrl = "UrlString For ajax Request";
    $.post(reqUrl, function (response) {
           if (response.success) 
           {
             // Do something
           }
          else
          {
             // Do something
             ajaxFunction();
           }

    });
} 
```

只有在完成先前的请求时才会发送请求。埃文，如果你想延迟，你可以使用`setTimeout(ajaxFunction,3000);`

# c# - 网页数据提取自动化

> ID：13852604
> 
> 赞同：-2
> 
> 时间：2012-12-13T03:45:07.563
> 
> 标签：c#, python, ruby, web

您能否推荐一个可以提取网页数据（支持字段、按钮、链接、标签、网格数据等元素）的平台，用于网页数据提取自动化，如 Ruby、Python、C# 等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:58:09.000

我建议使用[selenium](http://seleniumhq.org)平台。它是一个非常高质量的 Web 自动化并支持`C#,python,ruby,javascript,java,perl,and php`. 最重要的功能之一是它可以很好地处理 javascript。

Selenium 文档[在这里](http://seleniumhq.org/docs/)。

# 编辑

Ruby 教程 [http://anahorny.blogspot.com/2011/08/selenium-webdriver-ruby-tutorial.html](http://anahorny.blogspot.com/2011/08/selenium-webdriver-ruby-tutorial.html)

您需要的所有文档或其他教程都位于此处[http://code.google.com/p/selenium/wiki/RubyBindings](http://code.google.com/p/selenium/wiki/RubyBindings)

简单的例子：

红宝石：

```
@driver.get("https://demo.aravo.com/")
@driver.find_element(:id, "j_username").clear
@driver.find_element(:id, "j_username").send_keys "sample"
@driver.find_element(:name, "j_password").clear
@driver.find_element(:name, "j_password").send_keys "sample"
@driver.find_element(:name, "login").click
@driver.find_element(:id, "gbqfq").clear
@driver.find_element(:id, "gbqfq").send_keys "ruby fiel format" 
```

Python：

```
driver = self.driver
driver.get("https://demo.aravo.com/")
driver.find_element_by_id("j_username").clear()
driver.find_element_by_id("j_username").send_keys("sample")
driver.find_element_by_name("j_password").clear()
driver.find_element_by_name("j_password").send_keys("sample")
driver.find_element_by_name("login").click() 
```

C＃：

```
public void TheDriverTest()
{
    driver.Navigate().GoToUrl("https://demo.aravo.com/");
    driver.FindElement(By.Id("j_username")).Clear();
    driver.FindElement(By.Id("j_username")).SendKeys("sample");
    driver.FindElement(By.Name("j_password")).Clear();
    driver.FindElement(By.Name("j_password")).SendKeys("sample");
    driver.FindElement(By.Name("login")).Click();
} 
```

# c++ - 在数组c ++中添加字符串

> ID：13852605
> 
> 赞同：0
> 
> 时间：2012-12-13T03:45:24.267
> 
> 标签：c++, arrays

我目前正在自学 C++，我目前被困在这个问题上。

我想创建一个保存 Text(string) 和 Number(double) 循环的程序。

```
#include <iostream>
#include <iomanip>
#include <cstring>

using namespace std;

int main() {

    string words[999],addwords;
    double numbers[999],addnumbers;
    int totalwords=0,totalnumbers=0;
    head:
        cout << "Word: "; getline(cin,addwords);
        words[totalwords] = addwords;
        totalwords+=1;

        cout << "Numbers: "; cin >> addnumbers;
        numbers[totalnumbers] = addnumbers;
        totalnumbers+=1;
        goto head;
} 
```

EOF

输出必须是：

单词：一些字母
数字：010102
单词：一些字母
数字：010102
{loop}

此代码的输出：

单词：一些字母
数字：010102
单词：数字：202010

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:14:55.080

在现代 C++ 中，更好的做法是使用独立`getline`方法，如下所示：

```
std::string s;

std::cout << "Enter some text:";
std::getline(cin, s); 
```

如果您要像上面一样循环执行此操作，那么我还建议您使用：

```
std::cin.clear();
std::cin.sync(); 
```

在每次下一个连续读取之前，所以它看起来像：

```
std::cout << "Enter some more text:";
std::cin.clear();
std::cin.sync();
std::getline(cin, s); 
```

除此之外，您的代码还有其他问题，其中最重要的是 GOTO 的使用。您使用什么资源来学习 C++？

# xcode - 是否可以创建一个可以接收不同类型参数的动作？(Xcode)

> ID：13852607
> 
> 赞同：-1
> 
> 时间：2012-12-13T03:45:38.820
> 
> 标签：xcode, object, parameters, universal

如果可以做出可以接收不同类型对象的动作，我会感到很痛苦。例如，如果我想将 UILabels 和 UIButtons 传递给同一个动作，但一次只有一个。我不想要的是这样的：

```
- (void)actionInitWithButton:(UIButton *)button Label:(UILabel *)label; 
```

更多类似的东西：

```
- (void)actionInitWithObject:(UniversalObject *)object; 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:48:49.613

在 Objective-C 中，它们被简单地称为`id`. 这是语言的主要概念。

另一种选择是`NSObject`，但这通常用于子类化——`id`涵盖更广泛的范围，因为并非所有（但大多数）对象都继承自`NSObject`.

前任。

```
- (void)actionInitWithObject:(id)something
{
    if([something isKindOfClass:[UIButton class])
    {
        UIButton *button = (UIButton *)something;
        ...
    } else if ([something isKindOfClass:[UILabel class]) {
        UILabel *label = (UILabel *)something;
        ...
    }
 } 
```

# c# - 从 c# 类调用 json 时权限被拒绝

> ID：13852610
> 
> 赞同：-1
> 
> 时间：2012-12-13T03:46:19.553
> 
> 标签：c#, json

我正在尝试`json`从`c#`类库中调用，下面是我正在使用的代码。在浏览器中访问`json`url 时，我可以看到相应的数据。但是从代码中它给了**你没有权限调用这个 URL**

请帮助如何克服这个错误。

**程序**：

网址：

字符串 url= https://landfill.bugzilla.org/bugzilla-tip/jsonrpc.cgi?method=Product.get¶ms=[{"ids":"4"}]

```
try
{
    string ret = string.Empty;
    StreamWriter requestWriter;
    var webRequest = System.Net.WebRequest.Create(url) as HttpWebRequest;
    if (webRequest != null)
    {
        webRequest.Method = "POST";
        webRequest.ServicePoint.Expect100Continue = false;
        webRequest.Timeout = 20000;

        webRequest.ContentType = "application/json";
        //POST the data.
        using (requestWriter = new StreamWriter(webRequest.GetRequestStream()))
        {
            requestWriter.Write(postData);
        }
    }
    HttpWebResponse resp = (HttpWebResponse)webRequest.GetResponse();
    Stream resStream = resp.GetResponseStream();
    StreamReader reader = new StreamReader(resStream);
    ret = reader.ReadToEnd();
    return ret;
}
catch (WebException exception)
{
    string responseText;
    using (var reader = new StreamReader(exception.Response.GetResponseStream()))
    {
        responseText = reader.ReadToEnd();
    }
    return responseText;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:51:05.813

你在做一个“GET”而不是一个 POST 对吗？

改变这个：

```
webRequest.Method = "POST"; 
```

至

```
webRequest.Method = "GET"; 
```

# symfony - Symfony2 - 从编译器通道访问内核

> ID：13852611
> 
> 赞同：5
> 
> 时间：2012-12-13T03:46:39.053
> 
> 标签：symfony, symfony-http-kernel

有没有办法从编译器传递中访问内核？我试过这个：

```
 ...
    public function process(ContainerBuilder $container)
    {
        $kernel = $container->get('kernel');
    }
    ... 
```

这会引发错误。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-13T04:09:44.230

据我所知，默认情况下，内核在 CompilerPass 中的任何地方都不可用。

但是您可以通过以下方式添加它：

在您的 AppKernel 中，将 $this 传递给编译器传递所在的包。

*   将构造函数添加到您的 Bundle 对象，该对象接受 Kernel 作为参数并将其存储为属性。
*   在您的 Bundle::build() 函数中，将内核传递给您的 CompilerPass 实例。
*   在您的 CompilerPass 中，在构造函数中接受内核作为参数并将其存储为属性。
*   然后你可以在你的编译器传递中使用 $this->kernel 。

* * *

```
// app/AppKernel.php
new My\Bundle($this);

// My\Bundle\MyBundle.php
use Symfony\Component\HttpKernel\KernelInterface;

class MyBundle extends Bundle {
protected $kernel;

public function __construct(KernelInterface $kernel)
{
  $this->kernel = $kernel;
}

public function build(ContainerBuilder $container)
{
    parent::build($container);
    $container->addCompilerPass(new MyCompilerPass($this->kernel));
}

// My\Bundle\DependencyInjection\MyCompilerPass.php
use Symfony\Component\HttpKernel\KernelInterface;

class MyCompilerPass implements CompilerPassInterface
protected $kernel;

public function __construct(KernelInterface $kernel)
{
   $this->kernel = $kernel;
}

public function process(ContainerBuilder $container)
{
    // Do something with $this->kernel
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-25T08:41:15.537

如果您需要整个内核，则 samanime 推荐的方法有效。

如果你只是对内核包含的一些值感兴趣，那么只使用 symfony 设置的参数就足够了。

以下是可用的列表：

```
Array
(
    [0] => kernel.root_dir
    [1] => kernel.environment
    [2] => kernel.debug
    [3] => kernel.name
    [4] => kernel.cache_dir
    [5] => kernel.logs_dir
    [6] => kernel.bundles
    [7] => kernel.charset
    [8] => kernel.container_class
    [9] => kernel.secret
    [10] => kernel.http_method_override
    [11] => kernel.trusted_hosts
    [12] => kernel.trusted_proxies
    [13] => kernel.default_locale
) 
```

例如，`kernel.bundles`包含所有已注册捆绑包的列表，格式为`[bundle => class]`。

PS：我使用以下编译器传递获取此列表：

```
<?php
namespace Acme\InfoBundle\DependencyInjection;

use Symfony\Component\DependencyInjection\Compiler\CompilerPassInterface;
use Symfony\Component\DependencyInjection\ContainerBuilder;

class InfoCompilerPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        print_r(array_values(array_filter(
            array_keys($container->getParameterBag()->all()), 
            function ($e) {
                return strpos($e, 'kernel') === 0;
            }
        )));
        die;
    }
} 
```

# php - spl_autoload_register 使用非静态类方法作为自动加载器功能？

> ID：13852621
> 
> 赞同：2
> 
> 时间：2012-12-13T03:48:02.410
> 
> 标签：php

我正在尝试使用 spl_autoload_register 将实例化对象用作自动加载器。可能吗？我在几个地方看到人们使用类静态函数作为自动加载器，而不是对象。

例子：

```
class loadFile{
    function loadObject($object){
    //load object here
    }
}
$loadmefiles = new loadFile();
//use $loadmefiles->loadObject() as autoloader
spl_autoload_register();
$goat = new Animal('goat'); 
```

希望你明白我在说什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T03:50:10.920

这是通过将数组传递给[`spl_autoload_register`](http://php.net/spl_autoload_register)：第一个元素是对象，第二个元素是方法的名称作为字符串：

```
spl_autoload_register(array($loadmefiles, 'loadObject')); 
```

从[可调用文档](http://php.net/manual/en/language.types.callable.php)中：

> 实例化对象的方法作为数组传递，该数组包含索引 0 处的对象和索引 1 处的方法名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-17T11:40:53.890

您可以将其设为静态作为替代方案。

```
spl_autoload_register(function($class)
{
    Pi_loader::autoload($class);
}); 
```

如果不...

```
spl_autoload_register(function($class)
{
    $loader = new Pi_loader();
    $loader->autoload($class);
}); 
```

# mongodb - 将mongodb迁移到redis

> ID：13852625
> 
> 赞同：0
> 
> 时间：2012-12-13T03:48:21.953
> 
> 标签：mongodb, migration, redis

我有一个小型 mongodb 数据库，我想迁移到 redis 存储。我不想将它们与另一个结合使用，除非开销是如此之小以至于微不足道。

我该怎么做呢？我发现关于这个主题的信息很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:20:03.810

由于您的数据库只有 10MB，我建议您查看[mongo](http://www.mongodb.org/display/DOCS/Drivers)和[redis](http://redis.io/clients)的语言驱动程序。Mongo 记录是简单的 JSON，redis 支持 hashmaps、sets 和 list。我猜你真的不会有任何问题迁移到 10MB 数据库。你真的不需要任何严肃的解决方案来迁移。对 mongo 集合的简单迭代可能会在几分之一秒内完成您的工作。

# javascript - 在两个文本框中显示文本框提示

> ID：13852626
> 
> 赞同：3
> 
> 时间：2012-12-13T03:48:32.520
> 
> 标签：javascript, jquery, html

我使用这个 jquery 函数来显示一个文本框提示

这是功能

```
function textboxHint(id, options) {
    var o = { selector: 'input:text[title]', blurClass:'blur' };
    $e = $('#'+id);
    $.extend(true, o, options || {});

    if ($e.is(':text')) {
      if (!$e.attr('title')) $e = null;
    } else {
      $e = $e.find(o.selector);
    }
    if ($e) {
      $e.each(function() {
      var $t = $(this);
      if ($.trim($t.val()).length == 0) { $t.val($t.attr('title')); }
      if ($t.val() == $t.attr('title')) {
    $t.addClass(o.blurClass);
      } else {
        $t.removeClass(o.blurClass);
      }

     $t.focus(function() {
    if ($.trim($t.val()) == $t.attr('title')) {
      $t.val('');
      $t.removeClass(o.blurClass);
    }
    }).blur(function() {
      var val = $.trim($t.val());
      if (val.length == 0 || val == $t.attr('title')) {
        $t.val($t.attr('title'));
        $t.addClass(o.blurClass);
      }
    });

         // empty the text box on form submit               
    $(this.form).submit(function(){
      if ($.trim($t.val()) == $t.attr('title')) $t.val('');
    });
   });
 }
} 
```

这是html

```
<form action="" method="" class="search" >
    <input type="text"  name="search" class="text"  title="Search Subjects..." id="block" />
    <input type="submit"  name="submit"  value="Search" class="submit" />
</form> 
```

我这样调用函数..

```
$(document).ready(function() {
    textboxHint("block");
}); 
```

这是有效的..但问题是现在我需要使用这个函数在两个不同的文本框中显示一个提示，两个不同的 ID。例如：Id = block1 和 Id = block2 等...

谁能帮我修改这个功能来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T03:54:21.177

那这个呢：

```
$(document).ready(function() {
    textboxHint("block1");
    textboxHint("block2");
    textboxHint("block3");
}); 
```

如您所见，由于该函数要求 id 作为参数，因此您可以通过多次调用该函数来提供不同的 id。

问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T04:04:53.050

如何修改函数以接收选择器并遍历每个元素：

```
function textboxHint(selector, options) {
    $(selector).each(function(){
        var o = { selector: 'input:text[title]', blurClass:'blur' };
        $e = this;
        $.extend(true, o, options || {});

        if ($e.is(':text')) {
          if (!$e.attr('title')) $e = null;
        } else {
          $e = $e.find(o.selector);
        }
        if ($e) {
          $e.each(function() {
          var $t = $(this);
          if ($.trim($t.val()).length == 0) { $t.val($t.attr('title')); }
          if ($t.val() == $t.attr('title')) {
        $t.addClass(o.blurClass);
          } else {
            $t.removeClass(o.blurClass);
          }

         $t.focus(function() {
        if ($.trim($t.val()) == $t.attr('title')) {
          $t.val('');
          $t.removeClass(o.blurClass);
        }
        }).blur(function() {
          var val = $.trim($t.val());
          if (val.length == 0 || val == $t.attr('title')) {
            $t.val($t.attr('title'));
            $t.addClass(o.blurClass);
          }
        });

             // empty the text box on form submit               
        $(this.form).submit(function(){
          if ($.trim($t.val()) == $t.attr('title')) $t.val('');
        });
       });
    }   
    });
} 
```

并称它为：

```
<form action="" method="" class="search" >
    <input type="text"  name="search" class="text"  title="Search Subjects..." class="block" id="block1" />
    <input type="text"  name="search" class="text"  title="Search Subjects..." class="block" id="block2" />
    <input type="submit"  name="submit"  value="Search" class="submit" />
</form>

$(document).ready(function() {
    textboxHint(".block");
}); 
```

# c++ - c++ 向导创建

> ID：13852627
> 
> 赞同：1
> 
> 时间：2012-12-13T03:48:48.870
> 
> 标签：c++, visual-studio-2010, wizard

我正在尝试使用 c++ 和 Visual Studio 2010 创建一个自定义向导项目，它运行良好，但是当我使用该向导创建一个项目时，它不会“继承”我放入向导中的包含和 lib 文件。我在向导中放入包含的方式与我在任何项目中所做的方式相同：转到属性 ->（左树列表）配置属性 -> VC++ 目录。我想有一个文件（如 default.js 或 default.vcxproj），但我不知道我必须修改什么。如果你能在这方面给我一些帮助，我会很高兴。

提前致谢。

# java - 当类暴露于线程池时，清理 ThreadLocal 资源真的是我的工作吗？

> ID：13852632
> 
> 赞同：48
> 
> 时间：2012-12-13T03:49:41.583
> 
> 标签：java, concurrency, threadpool, thread-local

# 我对 ThreadLocal 的使用

在我的 Java 类中，我有时`ThreadLocal`主要使用 a 来避免不必要的对象创建：

```
@net.jcip.annotations.ThreadSafe
public class DateSensitiveThing {

    private final Date then;

    public DateSensitiveThing(Date then) {
        this.then = then;
    }

    private static final ThreadLocal<Calendar> threadCal = new ThreadLocal<Calendar>()   {
        @Override
        protected Calendar initialValue() {
            return new GregorianCalendar();
        }
    };

    public Date doCalc(int n) {
        Calendar c = threadCal.get();
        c.setTime(this.then):
        // use n to mutate c
        return c.getTime();
    }
} 
```

我这样做是有正当理由的——`GregorianCalendar`它是那些光荣的有状态、可变、非线程安全的对象之一，它提供跨多个调用的服务，而不是代表一个值。此外，实例化被认为是“昂贵的”（这是否正确不是这个问题的重点）。（总的来说，我真的很佩服它:-)）

# Tomcat 是如何发牢骚的

但是，如果我在任何池化线程的环境中使用这样的类——*并且*我的应用程序无法控制这些线程的生命周期——那么就有可能发生内存泄漏。Servlet 环境就是一个很好的例子。

事实上，当 webapp 停止时，Tomcat 7 会这样抱怨：

> 严重：Web 应用程序 [] 创建了一个 ThreadLocal，其键类型为 [org.apache.xmlbeans.impl.store.CharUtil$1]（值 [org.apache.xmlbeans.impl.store.CharUtil$1@2aace7a7]）和一个值[java.lang.ref.SoftReference] 类型（值 [java.lang.ref.SoftReference@3d9c9ad4]）但在 Web 应用程序停止时未能将其删除。线程将随着时间的推移而更新，以尝试避免可能的内存泄漏。2012 年 12 月 13 日 12:54:30 PM org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks

（在那种特殊情况下，甚至我的代码都没有这样做）。

# 谁该受责备？

这似乎不太公平。Tomcat 指责*我*（或我班的用户）做了正确的事情。

归根结底，这是因为 Tomcat 想将它提供给我的线程重用于*其他*Web 应用程序。（呃 - 我觉得很脏。）可能，这对 Tomcat 来说不是一个很好的策略 - 因为线程实际上确实有/导致状态 - 不要在应用程序之间共享它们。

然而，这个政策至少是普遍的，即使它是不可取的。我觉得我有义务 - 作为`ThreadLocal`用户，为我的班级提供一种方式来“释放”我的班级附加到各种线程的资源。

# 但是该怎么办呢？

在这里做什么是正确的？

在我看来，servlet 引擎的线程重用策略似乎与`ThreadLocal`.

但也许我应该提供一个工具，让用户说“开始，与这个类相关的邪恶线程特定状态，即使我无法让线程死亡并让 GC 做它的事情？”。我有可能做到这一点吗？我的意思是，我不能安排在过去某个时间`ThreadLocal#remove()`看到的每个线程上被调用。`ThreadLocal#initialValue()`还是有其他方法？

还是我应该对我的用户说“去给自己找一个像样的类加载器和线程池实现”？

*EDIT#1*：阐明了如何`threadCal`在不知道线程生命周期的 vanailla 实用程序类中使用 *EDIT#2*：修复了线程安全问题`DateSensitiveThing`

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-13T23:51:27.853

# 叹息，这是旧闻

好吧，这个派对有点晚了。2007 年 10 月，Josh Bloch（`java.lang.ThreadLocal`与 Doug Lea 合着）[写道](http://jsr166-concurrency.10961.n7.nabble.com/Threadlocals-and-memory-leaks-in-J2EE-tp3960p3984.html)：

> “线程池的使用需要格外小心。正如在许多地方所指出的那样，随意使用线程池和随意使用线程局部变量会导致意外的对象保留。”

即使在那时，人们仍在抱怨 ThreadLocal 与线程池的不良交互。但乔希确实批准了：

“用于性能的每线程实例。Aaron 的 SimpleDateFormat 示例（上图）是这种模式的一个示例。”

# 一些教训

1.  如果将任何类型的对象放入任何对象池，则必须提供一种“稍后”删除它们的方法。
2.  如果您使用 'pool' `ThreadLocal`，则执行此操作的选择有限。要么：a）您*知道*`Thread`您放置值的（s）将在您的应用程序完成时终止；或者 b) 您可以稍后安排 调用 ThreadLocal#set()的*同一线程在应用程序终止时调用 ThreadLocal#remove()*
3.  因此，将 ThreadLocal 用作对象池将给应用程序和类的设计带来沉重的代价。好处不是免费的。
4.  因此，使用 ThreadLocal 可能是一种过早的优化，尽管 Joshua Bloch 敦促您在“Effective Java”中考虑它。

简而言之，决定使用 ThreadLocal 作为对“每个线程实例池”的快速、无竞争访问的一种形式并不是一个轻率的决定。

注意：除了“对象池”之外，ThreadLocal 还有其他用途，这些课程不适用于那些 ThreadLocal 只是临时设置的场景，或者需要保留真正的每个线程状态的场景踪迹。

# 图书馆实施者的后果

库实现者会产生一些后果（即使这些库是项目中的简单实用程序类）。

任何一个：

1.  您使用 ThreadLocal，完全意识到您可能会“污染”长时间运行的线程并带来额外的负担。如果您正在实施`java.util.concurrent.ThreadLocalRandom`，它可能是合适的。（如果您没有在 中实现，Tomcat 可能仍然会抱怨您的库的用户`java.*`）。有趣的是注意`java.*`使用 ThreadLocal 技术的规则。

或者

2.  您使用 ThreadLocal，并为您的类/包的客户提供：a) 选择放弃该优化的机会（“不要使用 ThreadLocal ...我无法安排清理”）；和 b) 一种清理 ThreadLocal 资源的方法（“可以使用 ThreadLocal ......我可以安排所有使用你调用的线程，`LibClass.releaseThreadLocalsForThread()`当我完成它们时。

但是，使您的库“难以正确使用”。

或者

3.  您让您的客户有机会提供他们自己的对象池实现（可能使用 ThreadLocal 或某种同步）。（“好的，`new ExpensiveObjectFactory<T>() { public T get() {...} }`如果你认为真的有必要，我可以给你一个”。

没那么糟糕。如果对象真的那么重要并且创建起来那么昂贵，那么显式池可能是值得的。

或者

4.  无论如何，您认为它对您的应用程序来说并不值得，并找到一种不同的方法来解决问题。那些创建成本高、可变、非线程安全的对象给你带来了痛苦……无论如何，使用它们真的是最好的选择吗？

# 备择方案

1.  常规对象池，及其所有竞争同步。
2.  不池化对象 - 只需在本地范围内实例化它们并稍后丢弃。
3.  不合并线程（除非您可以在需要时安排清理代码）- 不要在 JaveEE 容器中使用您的东西
4.  足够聪明的线程池可以清理 ThreadLocals 而不会对你发牢骚。
5.  线程池在“每个应用程序”的基础上分配线程，然后在应用程序停止时让它们死掉。
6.  线程池容器和应用程序之间的协议，它允许注册“应用程序关闭处理程序”，容器可以安排它在用于服务应用程序的线程上运行……在将来某个时候，当该线程下一个可用。例如。`servletContext.addThreadCleanupHandler(new Handler() {@Override cleanup() {...}})`

很高兴在未来的 JavaEE 规范中看到围绕最后 3 项的一些标准化。

# 引导笔记

实际上， a 的实例化`GregorianCalendar`非常轻量级。这是不可避免的调用`setTime()`，导致大部分工作。它也不会在线程执行的不同点之间保持任何重要状态。将 a`Calendar`放入 a`ThreadLocal`不太可能给您带来比您付出的更多的回报……除非分析明确显示`new GregorianCalendar()`.

`new SimpleDateFormat(String)`相比之下比较昂贵，因为它必须解析格式字符串。解析后，对象的“状态”对于同一线程以后的使用很重要。这是更合适的。但是实例化一个新的可能仍然“便宜”，而不是给你的类额外的责任。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T05:00:16.387

由于线程不是由您创建的，它只是由您租用的，我认为在停止使用之前要求清洁它是公平的 - 就像您在返回时填充租用汽车的油箱一样。Tomcat 可以自己清理所有东西，但它帮了你一个忙，提醒你忘记的东西。

ADD：您使用准备好的 GregorianCalendar 的方式是完全错误的：由于服务请求可以是并发的，并且没有同步，`doCalc`因此可以接受`getTime`另一个`setTime`请求的调用。引入同步会使事情变慢，因此创建一个新的`GregorianCalendar`可能是一个更好的选择。

换句话说，您的问题应该是：如何保留准备好的`GregorianCalendar`实例池，以便根据请求速率调整其数量。因此，至少，您需要一个包含该池的单例。每个 Ioc 容器都有管理单例的方法，并且大多数都有现成的对象池实现。如果您还没有使用 IoC 容器，请开始使用一个（String、Guice），而不是重新发明轮子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-30T04:44:53.297

在考虑了一年之后，我决定 JavaEE 容器在不相关的应用程序实例之间共享池工作线程是不可接受的。这根本不是“企业”。

如果你真的要共享线程，`java.lang.Thread`（至少在 JavaEE 环境中）应该支持`setContextState(int key)`和`forgetContextState(int key)`（镜像`setClasLoaderContext()`）这样的方法，它允许容器隔离应用程序特定的 ThreadLocal 状态，因为它在各种应用程序之间处理线程。

在命名空间中进行此类修改之前`java.lang`，只有应用程序部署者采用“一个线程池，相关应用程序的一个实例”规则才是明智的，而应用程序开发人员假设“这个线程是我的，直到 ThreadDeath 我们参与其中”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-09T15:05:12.313

如果有任何帮助，我将使用自定义 SPI（接口）和 JDK `ServiceLoader`。然后我所有需要卸载threadlocals的各种内部库（jar）都遵循ServiceLoader模式。因此，如果一个 jar 需要 threadlocal 清理，如果它有适当的`/META-INF/services/interface.name`.

然后我在过滤器或监听器中进行卸载（我对监听器有一些问题，但我不记得是什么）。

如果 JDK/JEE 带有用于清除 threadlocals的**标准SPI，那将是理想的。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T10:42:38.197

我认为 JDK 的 ThreadPoolExecutor 可以在任务执行后进行 ThreadLocals 清理，但我们知道它不会。我认为它至少可以提供一个选择。原因可能是因为 Thread 仅提供对其 TreadLocal 映射的包私有访问，因此 ThreadPoolExecutor 无法在不更改 Thread 的 API 的情况下访问它们。

有趣的是，ThreadPoolExecutor 具有受保护的方法存根`beforeExecution`和`afterExecution`，API 说：`These can be used to manipulate the execution environment; for example, reinitializing ThreadLocals...`。所以我可以想象一个实现 ThreadLocalCleaner 接口的任务和我们的自定义 ThreadPoolExecutor，在 afterExecution 调用任务的 cleanThreadLocals();

# c++ - C++“<<”运算符重载

> ID：13852635
> 
> 赞同：3
> 
> 时间：2012-12-13T03:50:24.123
> 
> 标签：c++, operator-overloading

我有这门课：

```
// in Platform.h
class Platform
{
private:
    float y;
    float xi;
    float xf;
public:
    Platform(float y, float xi, float xf);
    virtual ~Platform(void);
    float getxi();
    float getxf();
}; 
```

我希望能够做到这一点：

```
Platform* p = new Platform(1.0,2.0,3.0);
cout << p; // should it be *p? 
```

我尝试重载“<<”运算符，如下所示：

```
// in Platform.cpp
std::ostream& operator<<(std::ostream& out, Platform* p ) 
{
    out << "Platform: xi=" << p->getxi() << ", xf=" << p->getxf() << std::endl;
    return out;
} 
```

但这只是打印一个内存地址（当然，因为`p`是一个指针......）。我很确定上面的函数根本没有被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:51:53.613

是的，做一个 *p：

```
so cout << *p ; 
```

而传统的运营商是...

```
std::ostream& operator << (std::ostream& out, const Platform& p) { } 
```

您还需要将其导出到头文件中，以便在外部可见。添加：

```
friend std::ostream& operator<<(std::ostream& out, Platform* p ) ; 
```

到 Platform.h

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T03:55:25.700

重载声明需要从您使用它的地方可见。将其更改为`Platform const&`并`*p`在您使用时使用，因为这是常规方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T03:58:18.133

实际上这在 g++ 4.7.2 中有效，但可能取决于编译器。你可以做：

```
// in Platform.cpp
std::ostream& operator<<(std::ostream& out, Platform& p ) 
{
    out << "Platform: xi=" << p.getxi() << ", xf=" << p.getxf() << std::endl;
    return out;
} 
```

并使用间接打印 ( `*p`)

# ms-access - 表达式中的 MS Access 默认值？

> ID：13852637
> 
> 赞同：0
> 
> 时间：2012-12-13T03:50:37.653
> 
> 标签：ms-access, expression

我有两个疑问。

一个有一个从表中聚合出来的任务列表。

一种是“GROUP BY”查询，它按时间表中的任务对计费小时数进行分组。

我正在编写一个查询以将时间分配给任务。

这是我用来选择用于报告的列的特定时间的表达式：

```
CumulativeEngineeringBurn: 
IIf(
  IIf([EngOrDrf]="ENG",[qry_MappedHours_aggregate].[SumOfMapped_Hours],0)
  Is Null,0,
  IIf([EngOrDrf]="ENG",[qry_MappedHours_aggregate].[SumOfMapped_Hours],0)
) 
```

我正在使用 IIf 来尝试确保我没有得到任何空白字段，但我仍然得到一些空白。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:36:16.643

使用 nz() 函数可以更轻松地解决这个问题。你想要的是：
`nz(IIf([EngOrDrf]="ENG",[qry_MappedHours_aggregate].[SumOfMapped_Hours],0),0)`
甚至更好：
`IIf([EngOrDrf]="ENG",nz([qry_MappedHours_aggregate].[SumOfMapped_Hours],0),0)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:47:47.467

我再次重新提出了查询。

表达式是相同的，但无论出于何种原因，它现在都按预期工作。

据我所知，一切都是一样的，所以我不确定问题是什么。

# linux - 在屏幕内设置 vim 的高度

> ID：13852639
> 
> 赞同：1
> 
> 时间：2012-12-13T03:50:52.560
> 
> 标签：linux, vim, gnu-screen

我有一个我认为非常好的终端工作流程。我将屏幕设置为水平分割，然后将底部调整为十行。但是当在上部打开 vim 时，内容从顶部被切断，因为 vim 认为我的窗口高度是 100%，而实际上它是窗口高度 - 10 行（从底部屏幕占用）。

我如何告诉 vim 它应该只显示窗口高度 - 10 行空间？

这是我的.screenrc：

```
startup_message off
chdir /var/www/
screen -t "Development"
split
focus
chdir ~/
screen -t "Shell"
resize 10
focus 
```

作为旁注，我使用终端从 Mac OS X 10.8 SSH 到远程服务器是值得的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T16:17:05.290

通过添加`altscreen on`到我的 .screenrc 来解决

# entity-framework - 如何重命名实体框架生成的 Context.tt？

> ID：13852640
> 
> 赞同：18
> 
> 时间：2012-12-13T03:50:59.830
> 
> 标签：entity-framework

我们正在使用 Entity Framework 5 模型优先设计。我们决定重命名 .edmx 文件，但无法重命名 MyModel.Context.tt 和 MyModel.tt 文件。文件名属性是只读的，我在其他地方找不到对文件名的引用。有谁知道如何重命名它们？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-06-26T18:10:39.517

解决方法似乎是让它根据需要生成 .tt 文件。重命名 .edmx。当您重命名 edmx 时，.tt 文件中对 .edmx 的引用也不会更改。您可以编辑 .tt 文件以引用 .edmx 的新名称，但这不会重命名 .tt 文件，因此请删除两个 .tt 文件。进入.edmx图，右键添加代码生成项。选择一个 DBContext 生成器，随意命名，然后单击“添加”。鲍勃现在是你的叔叔。

根据这一点，无法重命名似乎是理想的行为： [http ://entityframework.codeplex.com/workitem/523](http://entityframework.codeplex.com/workitem/523)

JR

# python - 我希望 Python 作为前端，Fortran 作为后端。我还想让 fortran 部分并行 - 最佳策略？

> ID：13852646
> 
> 赞同：5
> 
> 时间：2012-12-13T03:51:32.757
> 
> 标签：python, arrays, parallel-processing, fortran, f2py

我有一个 python 脚本，我希望大致做到这一点：

1.  将一些粒子位置调用到数组中

2.  对所有 512^3 个位置运行算法以将它们分配到 NxNxN 矩阵

3.  将该矩阵反馈给python

4.  在 python 中使用绘图来可视化矩阵（即 mayavi）

首先我必须以串行方式编写它，但理想情况下我想并行化第 2 步以加快计算速度。什么工具/策略可以让我开始。我对 Python 和 Fortran 了如指掌，但对于如何针对我的特定问题将两者联系起来却知之甚少。目前我在 Fortran 中做所有事情，然后加载我的 python 程序 - 我想一次完成所有事情。我听说过 py2f，但我想在我进入一个特定的兔子洞之前获得有经验的人的意见。谢谢

编辑：我想要并行的东西是“令人尴尬的并行”，因为这只是 N 个粒子的循环，我想尽快通过该循环。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T08:33:07.523

您有两个基本的绑定选项。第一个使用`f2py`，另一个在你的 Fortran 中使用与 C 的互操作性并使用 .bind 进行绑定`Cython`。教程`f2py`在[这里](http://websrv.cs.umt.edu/isis/index.php/F2py_example)。这一点都不难，有一些 f2py 指令可以放置到您的 Fortran 代码中，但通常不需要它们。

对于并行化，第一种使用的方法可能是 OpenMP，如果单台机器上的并行化对您来说就足够了。它使用线程并且易于使用具有令人尴尬的并行性的循环。只要确保您没有写入线程中的任何全局变量，如果是，请为此使用同步指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T11:01:17.860

VladimirF 建议的另一种方法是将这两个部分设置为客户端服务器构造，您的 Python 部分可以使用套接字与 Fortran 部分通信。尽管这带来了为交互实现一些协议的负担，但它有一个优势，即您可以获得清晰的分离，甚至可以通过网络交互在不同的机器上继续运行它们。

事实上，使用这种方法，您甚至可以通过根据需要生成尽可能多的 Fortran 应用程序实例并为它们提供不同的数据来完成令人尴尬的并行部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-05T03:23:19.283

比@haraldkl 相同方向的评论更多的答案 - 我目前正在使用套接字将数据从 Fortran 发送到 Ptyhon，反之亦然。[在这个repo](https://github.com/b-fg/f2py-sockets)中可以找到一个最小的工作示例。Fortran 中的套接字有点棘手，因为没有支持它们的内置库，您需要使用 C 库的包装器。不过，效果很好。

我的想法是将这个策略合并到一个更大的并行 Fortran 代码中，即使我还没有弄清楚那部分。可能在 Python 中线程化套接字并使用多个端口可以工作。

# delphi-prism - Delphi Prism - 我如何确定 TObjectExtender 正在“扩展”的实际类

> ID：13852651
> 
> 赞同：1
> 
> 时间：2012-12-13T03:52:34.260
> 
> 标签：delphi-prism, oxygene, delphi-prism-2010

我的 Delphi 代码中有大量的日志记录，它经常使用 Self.ClassName 来记录包含当前执行代码的类的名称。

我现在正在将其中的一些代码编译到 Delphi Prism .NET 程序集中。

但是，在 Delphi Prism 下，Self.ClassName 现在返回“TObjectExtender”而不是实际的类名。

例如

```
type
  TMyClass: TObject
  begin
    procedure MyProc();
  end;
...

procedure TMyClass.MyProc;
begin
  Log(Format('%s: A log message', [Self.ClassName]));
end; 
```

输出

```
TMyClass: A log message 
```

在 Delphi XEII 中编译时，但在 VS 2010 中的 Delphi Prism 中编译时输出

```
TObjectExtender: A log message 
```

无论包含运行代码的实际类如何。

任何人都可以建议一种在 Delphi Prism 中获取实际类名的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T20:03:40.640

要获取当前类的名称，只需使用

```
Self.GetType().Name 
```

# javascript - 关闭 Ajax:PopupControlExtender 退出键按下

> ID：13852652
> 
> 赞同：0
> 
> 时间：2012-12-13T03:52:40.773
> 
> 标签：javascript, jquery, asp.net, popup, ajaxcontroltoolkit

如何关闭 Ajax:PopupControlExtender 在使用 javascript 或 Jquery 的转义键上？下面是我的 html 标记。

```
<td>
     <asp:TextBox ID="txtTechnologyCombo" runat="server" Width="105" ReadOnly="true" TabIndex="7">
     </asp:TextBox>
     <Ajax:PopupControlExtender ID="pceTechnology" runat="server" TargetControlID="txtTechnologyCombo"
           PopupControlID="pnlTechnology" Position="Bottom">
      </Ajax:PopupControlExtender>
      <input type="hidden" name="hidTechnologyVal" id="hidTechnologyVal" runat="server" />
      <asp:Panel ID="pnlTechnology" runat="server" Style="max-height: 150px; min-width: 160px;
           overflow-y: scroll; overflow-x: hidden; padding-right: 20px;" BackColor="#f9faf6"
           BorderColor="Gray" BorderWidth="1">
           &nbsp;<asp:CheckBox ID="chkTechnologyAll" runat="server" Text="All" CssClass="chklist" />
           <asp:CheckBoxList ID="chkTechnologyList" CssClass="chklist" runat="server">
           </asp:CheckBoxList>
    </asp:Panel>
    <asp:DropDownList runat="server" ID="ddlTechnology" Style="width: 110px;" Visible="false">
    </asp:DropDownList>
</td> 
```

我需要一个可用于关闭所有 PopupControlExtender 的函数，因为我有超过 10 个这样的块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:19:33.050

尝试以下代码：

```
$(document).keyup(function(e) {
    if (e.keyCode == 27) 
  { 
     $("#pceTechnology").hide();
  }   // esc
}); 
```

# mysql - MySQL sysobjects 计数

> ID：13852654
> 
> 赞同：0
> 
> 时间：2012-12-13T03:53:10.850
> 
> 标签：mysql, count, procedure

我是 mysql 的新手，并且有一项任务来计算从 sysobject 函数返回的对象总数。它必须是用户保存的程序。

基本上我知道如何分开做，但想不出如何在一个单一的过程中做到这一点。

```
select * from sysobjects  where xtype IN('V','U','TR','C') 
```

这将获取我需要的字段

```
select count(*) from sysobjects where xtype='v' group by xtype 
```

这只能计算 V 元素的总和，但我需要计算总和并将这一切都放入单个程序中。有人可以帮助我吗？

如果忘记提及通过打印功能将 summ 打印到“消息”会很好...... ;(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:00:36.247

我认为这应该给你总数：

```
 select count(*) as total_count from sysobjects 
    where xtype IN('V','U','TR','C') 
```

如果我遗漏了什么，请尝试使用嵌套子查询，如下所示：

```
 select sum(count) from
     (select count(*) as count from sysobjects 
       where xtype IN('V','U','TR','C') group by xtype
     ); 
```

内部查询为您提供分组计数，外部查询为您提供所有这些的总和。

# dataset - 将数据规则格式应用于请求参数数据集？

> ID：13852656
> 
> 赞同：1
> 
> 时间：2012-12-13T03:53:19.620
> 
> 标签：dataset, aviarc

有没有办法将数据规则应用于请求参数数据集？

我正在尝试使用数据规则将字段格式化为日期，但它在请求参数数据集上给了我一个 no-current-row 错误。

如果不是，我将只使用一个新数据集。

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:30:54.040

除非您为此使用自定义 XML 命令，否则数据规则不能应用于数据集后期创建。

即将发布的引擎 v 3.6.2 假设支持将数据集绑定到创建后的数据规则。

问候， 弗拉德

# c# - System.Windows.Forms.TreeView 复选框选择

> ID：13852657
> 
> 赞同：0
> 
> 时间：2012-12-13T03:53:21.367
> 
> 标签：c#

我正在使用`System.Windows.Forms.TreeView`控制。`OnAfterCheck`我有通过事件上的方法触发的代码，`AfterCheck`用于检查所有子节点。

单击时它工作正常，但每当我双击复选框时，父复选框和所有子节点都将变为未选中状态。

有没有办法在双击复选框时禁用此行为，或者以另一种方式处理双击复选框事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:31:38.860

使用`DoubleClick`事件。将空白方法传递给类的`OnDoubleClick`方法`TreeView`。这样，双击该框时不会发生任何事情，或者您可以更改它以使某些事情发生。有关更多信息，请参阅[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.ondoubleclick.aspx)。

# javascript - 画布和窗口的比较像素

> ID：13852661
> 
> 赞同：0
> 
> 时间：2012-12-13T03:53:58.203
> 
> 标签：javascript, html

我目前有一个问题。我想通过在 html5 和 javascript 中使用画布和图像对象来绘制图像我想知道画布像素与窗口像素的大小相等，例如：例如我有 cavas (700 * 400) 然后我想知道大小它需要在窗口屏幕上。因此，如果我想知道 (1*1) 它等于 window.screen.widht * window.screen.height

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:35:14.450

将元素的实际大小除以您在属性中定义的大小。示例：http : [//jsfiddle.net/pjdmN/](http://jsfiddle.net/pjdmN/)

```
var canvas = document.getElementById('canvas');
var xRatio = canvas.offsetWidth / canvas.width;
var yRatio = canvas.offsetHeight / canvas.height; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:34:51.537

默认情况下，cavans 上的 1px 等于 window 上的 1px。

在这种情况下，画布的行为类似于元素。它有自己的宽度和高度，但您可以使用 css 将其缩放到不同的大小。

# php - Web 应用程序 - 限制对上传文件的访问

> ID：13852662
> 
> 赞同：0
> 
> 时间：2012-12-13T03:54:05.987
> 
> 标签：php, .htaccess, file-upload, acl

我有个问题。我正在开发一个网络应用程序，并将为员工上传文件（即：简历、犯罪记录检查等）。这些文件的名称包括时间、员工姓名和文件类型，类似于：John_Doe_Resume_12-12-12-16:36:23.PDF。所以所有的文件都在一个目录下，所以可以通过在浏览器中输入文件路径直接访问这个文件。

我仍然需要能够从 PHP Web 应用程序中访问这些文件，以便在需要时进行下载。我想到的一种可能的解决方案是将文件信息存储在 mysql 中，但这将是大量工作和额外的服务器负载。

有没有办法限制对目录的访问，以便只有 PHP Web 应用程序可以访问它们？（即：所以人们不能直接输入文件url下载）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T03:58:29.830

你必须把

```
deny from all 
```

在您的 .htaccess 文件中。将此文件放在您无法通过直接 url 访问的目录中。您的 php 脚本将能够进入该目录，因为 .htaccess 正在影响 apache

在 php 你做

```
$filename = "yourfilename.pdf";
$filepath = "./../rel_path_to_restricted_folder/";

if(file_exists($filepath . $filename))
{
    header('Content-disposition: attachment; '. $filename);
    header('Content-type: ' . mime_content_type($filepath . $filename));
    readfile($filepath . $filename);
}
else
{

    echo("File not found"); 
} 
```

瞧;)

# php - 如何制作有联系时间限制的联系页面

> ID：13852663
> 
> 赞同：0
> 
> 时间：2012-12-13T03:54:06.180
> 
> 标签：php, javascript, html

所以我的联系页面看起来像这样

```
<?php
      include 'header.php';
     foreach($_POST as $key => $value) {
$posts[$key] = filter($value);
                               }

            if(isset($posts['name'])) {
            if($posts['name'] == ""){
            $error = "Please enter your real name!";
            }else if(!isEmail($posts['email'])){
            $error = "Please enter a valid email address!";
            }else if($_POST['message'] == ""){
            $error = "Please enter your message!";
            }else{
            $subject ="Contact";
            $message="{$_POST['message']}";
            $header="From: {$posts['name']} <{$posts['email']}>";
            $to = $site->site_email;
            $send_contact=mail($to,$subject,$message,$header);
            $success = "Message Sent!";
            }
             }
                 ?>
                      <div class="contentbox">
                      <div class="head">Contact</div> 
```

我想以这种方式阻止垃圾邮件发送者......

您每小时只能发送 1 封电子邮件。从这个contact.php页面

请帮助我并将相同的代码发回给我，但使用时间阻塞代码或其他东西进行了编辑。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T03:58:59.920

存储发送者的IP地址和提交消息的时间。当另一个消息提交时，找到相同的IP地址并比较时间。如果少于一个小时，请给出错误以稍后发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:19:19.087

```
<?php
foreach ($_POST as $key => $value) {
    $posts[$key] = filter($value);
}

if (isset($posts['name'])) {
    if(!empty($_COOKIE["megablocker"])){
        $error = "You can only send one message per hour!";
    }else if ($posts['name'] == "") {
        $error = "Please enter your real name!";
    } else if (!isEmail($posts['email'])) {
        $error = "Please enter a valid email address!";
    } else if ($_POST['message'] == "") {
        $error = "Please enter your message!";
    } else {
        $subject = "Contact";
        $message = "{$_POST['message']}";
        $header = "From: {$posts['name']} <{$posts['email']}>";
        $to = $site -> site_email;
        $send_contact = mail($to, $subject, $message, $header);
        $success = "Message Sent!";
        setcookie("megablocker", 1, strtotime('+1 hour'));
    }
}

include 'header.php';
?> 
```

# ruby-on-rails-3 - 在 Rails 中为继承的类设置自定义属性

> ID：13852664
> 
> 赞同：0
> 
> 时间：2012-12-13T03:54:06.913
> 
> 标签：ruby-on-rails-3, inheritance

我不知道如何表达这个，所以这里有一个例子：

我有一个 ProjectList 和 CategoryList 继承的模型列表。

ProjectList 和 CategoryList 都定义了以下内容：

```
has_many :listed_items
attr_accessible :listed_attributes
accepts_nested_attributes_for :listed_attributes 
```

现在，两个类的 :listed_items 是不同的，所以我不能直接将这段代码粘贴到 List 中。

我试过的是这个（在列表中）：

```
 class << self
    attr_accessor :listed

    def initialize_attributes!
      self.send :has_many, listed
      self.send :attr_accessible, "#{listed}_attributes"
      self.send :accepts_nested_attributes_for, listed, allow_destroy: true
    end
  end
  self.listed = nil 
```

在类别列表中：

```
 self.listed = :categories
  self.initialize_attributes! 
```

这很好用，但事实上我必须调用 self.initialize_attributes！感觉很hacky。

有更好的选择吗？

谢谢！

**编辑：这是我用过的**

鉴于我真正想要的是摆脱继承模型中的这条双线，我刚刚重命名`def initialize_attributes!`为`def has_many_lists(list)`并摆脱了`:listed`变量。所以现在我调用`has_many_lists :categories`我继承的模型......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:56:09.953

`.inherited()`钩子在那里很有用

[http://ruby.runpaint.org/classes#class-inherited](http://ruby.runpaint.org/classes#class-inherited)

# c# - 你可以配置一个窗口，如果你从任何边缘调整大小，窗口的控件都不会改变相对于监视器的位置？

> ID：13852668
> 
> 赞同：0
> 
> 时间：2012-12-13T03:54:27.927
> 
> 标签：c#, winforms

我今天注意到，如果您从窗口底部或右侧调整大小，屏幕上的控件会保持静止：它们不会移动。

但是，如果您从左侧或顶部调整大小，屏幕上的控件将移动与您调整大小一样多的像素。

我想知道：我可以将窗口配置为调整大小相同（屏幕上的控件不移动），无论它们使用右/下边缘还是左/上边缘？

原因是：如果他们想调整窗口大小以仅显示他们想要的区域，而该区域恰好位于右下角怎么办？

如果他们使窗口小于默认大小，最好的解决方案是实现这个调整大小模式，如果他们让窗口变大，则使用正常的调整大小模式。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:35:45.420

你可以捕捉和处理窗口的调整大小事件——>重新布局你的窗口的视觉。

> 我今天注意到，如果您从窗口底部或右侧调整大小，屏幕上的控件会保持静止：它们不会移动。

FlowDirection 的默认值为 LeftToRight -> 坐标轴的原点将是顶部和左侧点。您可以更改为 RightToLeft。

UI 对象有一个属性名称cliptobound，它会帮助你放置一个超出窗口大小的元素。

上面的东西不能完全回答你的问题-->但我希望它能给出一个解决的想法。

# html - 只能从某些链接访问的网页？

> ID：13852670
> 
> 赞同：0
> 
> 时间：2012-12-13T03:54:30.683
> 
> 标签：html

我有一个网页，我希望只有在输入他们的电子邮件时才能访问该网页。我目前有一个电子邮件系统 (PHP)，用于收集用户的电子邮件地址、发送电子邮件确认并显示确认页面。

我想要做的是拥有它，所以这个确认页面是唯一可以让你进入第二个网页的页面。如果您尝试从其他任何地方访问第二个网页，它应该拒绝访问、给出错误或指向提示您输入电子邮件的页面。

所以我的问题是如何在两个网页之间创建握手并阻止所有其他请求？

如果您知道另一种获得相同结果的方法，那么可能有更好的方法来做到这一点，这不需要两个网页之间的握手，太棒了。到目前为止，我认为也许有一种方法可以使用 htaccess 来做到这一点，尽管我是新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:04:04.923

您可以在确认链接中传递电子邮件地址，当用户进入确认页面时，创建一个会话变量并将其设为真。之后检查第二页上的会话变量。如果存在会话变量，则显示页面，否则重定向到电子邮件输入页面。

```
Click to confirm (www.example.com/confirm.php?email=user1@example.com)
if(user1@example.com is in DB)
{
 session['isUser'] = true;
} 
```

在确认页面

```
if(isset(session['isUser'])){
 if(session['isUser']==true){
  Display the page
 }
 else{
  redirect to subscription page
 }
}
else{
  redirect to subscription page
} 
```

# extjs4.1 - Extjs 4.1 多对多模型关联

> ID：13852679
> 
> 赞同：4
> 
> 时间：2012-12-13T03:55:05.497
> 
> 标签：extjs4.1

当我想创建多对多关联时，我遇到了一些问题。因为它不知道。我尝试以这种方式建立关系。但我不确定。任何人都可以帮助我吗？我该怎么做？。这是我的代码

```
Ext.define('Ext4Example.model.Category', {
extend    : 'Ext.data.Model',
alias     : 'widget.categoryModel',
idProperty: 'id',    
fields: [
    {name:'id',              mapping:'id',                type:'int'},
    {name:'name',            mapping:'name',              type:'string'}
],
proxy: {
    type: 'ajax',
    noCache: false,
    api: {
        create  : '${createLink(controller:'category', action: 'create')}',
        read    : '${createLink(controller:'category', action: 'read')}',
        update  : '${createLink(controller:'category', action: 'update')}',
        destroy : '${createLink(controller:'category', action: 'destroy')}'
    },
    actionMethods: {
        create  : 'POST',
        read    : 'GET',
        update  : 'PUT',
        destroy : 'DELETE'            
    },        
    reader: {
        type    : 'json',
        root    : 'data',
        totalProperty   : 'total',
        successProperty : 'success',
        messageProperty : 'message',
        implicitIncludes: true
    },
    writer: {
      type      : 'json',
      root      : 'data',
      writeAllFields: true 
    },
    simpleSortMode: true
},
hasMany: [{model: 'Manufacturer', name: 'manufacturers'}] 
```

});

第二个模型在这里

```
Ext.define('Ext4Example.model.Manufacturer', {
extend    : 'Ext.data.Model',
alias     : 'widget.manufacturerModel',
idProperty: 'id',    
fields: [
    {name:'id',              mapping:'id',                type:'int'},
    {name:'name',            mapping:'name',              type:'string'}
],
proxy: {
    type: 'ajax',
    noCache: false,
    api: {
        create  : '${createLink(controller:'manufacturer', action: 'create')}',
        read    : '${createLink(controller:'manufacturer', action: 'read')}',
        update  : '${createLink(controller:'manufacturer', action: 'update')}',
        destroy : '${createLink(controller:'manufacturer', action: 'destroy')}'
    },
    actionMethods: {
        create  : 'POST',
        read    : 'GET',
        update  : 'PUT',
        destroy : 'DELETE'            
    },        
    reader: {
        type    : 'json',
        root    : 'data',
        totalProperty   : 'total',
        successProperty : 'success',
        messageProperty : 'message',
        implicitIncludes: true
    },
    writer: {
      type      : 'json',
      root      : 'data',
      writeAllFields: true 
    },
    simpleSortMode: true
},
hasMany: [{model: 'Category', name: 'categories'}] 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T17:58:05.283

首先，请描述什么不起作用？hasMany 关系创建的魔术方法在模型上不可用吗？调用魔术方法时是否没有加载数据？请进一步描述您遇到的问题。

也许您会发现这篇博文很有用？ [http://extjs-tutorials.blogspot.com/2012/05/extjs-hasmany-relationships-rules.html](http://extjs-tutorials.blogspot.com/2012/05/extjs-hasmany-relationships-rules.html)

博客文章中的一些重要提示（以防链接在某个时候失效）

1.  始终将您的代理放在您的模型中，而不是您的商店中，除非您有充分的理由不这样做 *
2.  如果在 hasMany 关系中使用它们，则始终需要您的子模型。**
3.  如果您想随意加载孩子，请始终使用 foreignKey
4.  如果您在与父级相同的响应中返回子级，请始终使用 associationKey
5.  如果您愿意，可以同时使用 foreignKey 和 associationKey
6.  始终命名您的 hasMany 关系
7.  始终在您的 hasMany 关系中使用完全限定的模型名称
8.  考虑给读者根一个有意义的名字（除了“数据”）
9.  子模型不需要为 hasMany 工作的 belongsTo 关系

*商店将继承其模型的代理，您可以随时覆盖它

**为方便起见，并避免潜在的循环引用，您可以在 app.js 中要求它们

信用：尼尔麦圭根（http://www.blogger.com/profile/14122981831780837323）

# ruby-on-rails - 为什么我不能从我的 Rspec 测试中访问 Rails 的 URL 帮助程序？

> ID：13852683
> 
> 赞同：0
> 
> 时间：2012-12-13T03:55:33.680
> 
> 标签：ruby-on-rails, rspec, capybara

最初我用 Cucumber 和 Capybara 编写了我的测试，并且效果很好。

然后我改用 Rpsec 和 Capybara，效果也很好。

然后我在尝试使资产管道正常工作时删除了我的 gemlock 文件，突然我的测试中的 URL 帮助程序停止工作。

示例错误：

```
 Failure/Error: visit report_areas_path(@report)
 NoMethodError:
   undefined method `visit' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_1:0x007f978c64e058>
 # ./spec/features/area_spec.rb:12:in `block (3 levels) in <top (required)>' 
```

我想让 URL 帮助程序再次工作，以便我的测试可以指导我完成资产管道的实施。我怎样才能解决这个问题？

我所有的测试都在 /spec/features 中。

相关软件如下...

**/spec/spec_helper.rb：**

```
require 'rubygems'
require 'spork'

Spork.prefork do
end

Spork.each_run do
  # This code will be run each time you run your specs.    
end    

ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'

require 'capybara/rspec'
require 'capybara/rails' 
require 'capybara/dsl' 
require 'capybara-screenshot/rspec'

Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  config.mock_with :rspec
  config.fail_fast = true
  config.fixture_path = "#{::Rails.root}/spec/fixtures"
  config.use_transactional_fixtures = true
  config.before(:each) { ActionMailer::Base.deliveries.clear }
  config.use_instantiated_fixtures = false 
  config.include(Capybara, :type => :integration) 
end 
```

**宝石文件：**

```
source 'http://rubygems.org'

gem 'rails'
gem 'activesupport'
gem 'actionmailer'
gem 'mail'
gem 'railties'
gem 'compass'
gem 'pg'
gem 'sass'
gem 'haml'
gem 'haml-rails'
gem 'susy'
gem 'jquery-rails'
gem 'google-analytics-rails'
gem 'declarative_authorization'
gem 'authlogic', '3.1.0'
gem 'simple_form'
gem 'country-select'
gem 'rails3-generators'
gem 'hirb'
gem 'debugger'
gem 'redis'
gem 'RedCloth'
gem 'friendly_id'
gem 'high_voltage'
gem 'validatious'
gem 'houdini'
gem 'growl-rspec'
gem 'interactive_rspec'
gem "rspec-rerun"

group :development do
  gem 'taps'
  gem "better_errors"
  gem "binding_of_caller"
end

group :test do
  gem 'capybara'
  gem 'rspec-rails', '2.11'
  gem 'database_cleaner', '0.6.7'
  gem 'launchy'
  gem 'spork', '~> 1.0rc'
  gem 'growl'
  gem 'capybara-screenshot'
end

group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'compass-rails'
  gem 'compass-susy-plugin'
  gem 'fancy-buttons'
  gem 'jquery-ui-rails'
  gem 'uglifier'
end 
```

**/spec/features/area_spec.rb：**

```
require 'spec_helper'

describe Area do

  before(:each) do
    @report = Report.create(:name => "The Testivate Retail Site Search Benchmark", :short_name => "Search")
  end

  describe "Guest" do

    it 'cannot list' do
      visit report_areas_path(@report)
      page.current_path.should == root_path
    end

  end

  describe "Customer" do

    it 'cannot list' do
      @user = User.create(:username => 'Virginia', :password => 'password', :password_confirmation => 'password', :email => 'example@example.com')
      @role = Role.create(:name => "customer")
      @assignment = Assignment.create(:user_id => @user.id, :role_id => @role.id)
      visit login_path
      fill_in 'Username', :with => @user.username
      fill_in 'Password', :with => @user.password
      click_on 'Login'
      visit report_areas_path(@report)
      page.current_path.should == root_path
    end

  end

  describe "Admin" do

    before(:each) do
      @user = User.create(username: 'Virginia', password: 'pass', password_confirmation: 'pass', email: 'example@example.com')
      @role = Role.create(:name => "admin")    
      @assignment = Assignment.create(user_id: @user.id, role_id: @role.id)
      visit login_path
      fill_in 'Username', :with => @user.username
      fill_in 'Password', :with => @user.password
      click_on 'Login'
      visit report_path(@report)
      click_on "New Area"
      fill_in 'Name', :with => "Search box"
      click_on 'Create Area'
    end

    it 'can create' do
      page.current_path.should == report_area_path(@report, Area.last)
      page.should have_content("Search box")
      page.should have_content("The Testivate Retail Site Search Benchmark")
    end

    it 'can list' do
      click_link 'List Areas'
      page.current_path.should == report_areas_path(@report)
      page.should have_content("Search box")
      page.should have_content("The Testivate Retail Site Search Benchmark")
    end

    it 'can area' do
      click_link 'Edit Area'
      fill_in 'Name', :with => "Search fox"
      click_on 'Update Area'
      page.current_path.should == report_area_path(@report, Area.last)
      page.should have_content("Search fox")
      page.should_not have_content("Search box")
      page.should have_content("The Testivate Retail Site Search Benchmark")
    end

    it 'can delete' do
      click_link 'Delete Area'
      page.current_path.should == report_areas_path(@report)
      page.should_not have_content("Search box")
      page.should have_content("The Testivate Retail Site Search Benchmark")
    end

    describe "must pass validations" do

      before(:each) do
        click_link 'Edit Area'
      end

      it "must have a name" do
        fill_in 'Name', :with => ""
        click_on 'Update Area'
        page.should have_content("Please enter a name for this area.")
      end

    end

  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:17:34.213

解决方案是升级到最新的 rspec-rails

# c - 如何在c中将十进制变量转换为十六进制？

> ID：13852687
> 
> 赞同：2
> 
> 时间：2012-12-13T03:56:02.110
> 
> 标签：c, hex, decimal

您好，我正在尝试使用 C 将十进制值转换为十六进制，以便将其存储在我的变量中`char data[]`并稍后将数据用于其他用途。有谁知道我该怎么做？我是 C 新手

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T03:58:37.477

您可以使用`%x`格式说明符和`sprintf`. 作为第一个参数传递`data`，要打印的值作为最后一个参数：

```
int value = 12345;
char data[16];
sprintf(data, "%x", value); // This produces 3039 
```

[链接到ideone。](http://ideone.com/rc4YsU)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:11:42.293

如果您有一个数字存储在“char”变量中，它会以二进制形式存储在机器中。打印变量时，您可以选择如何显示变量。例如，要以十进制显示，您可以执行以下操作：

```
printf("The value in decimal is %d\n", x); 
```

要以十六进制显示，您可以执行以下操作：

```
printf("The value in hex is %x\n", x); 
```

您可能想看一本关于 C 的书并检查 printf 格式选项，因为您可以对值的显示方式（作为字符、八进制、填充等）做很多事情。请记住，计算机仅以一种方式存储它。没有从一种表示到另一种表示的转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T11:25:12.727

```
#include <stdio.h>

typedef unsigned char       UCHAR;

typedef char                CHAR;  

typedef unsigned short int  UINT16;

typedef unsigned int        UINT32;

typedef float               FLOAT32;

typedef int                 INT32;

typedef short int           INT16;

void DecimalToHex(UCHAR *ucHexStringStored, UINT32 nDecimalValue){
    INT16 anHexValueStored[8];
    INT16 nPartialRemainder,ncnt1;
    UINT16 unLengthOfHexString = 0;

    while(nDecimalValue) {
        nPartialRemainder = nDecimalValue % 16;

        if(nPartialRemainder>9){
            nPartialRemainder = nPartialRemainder-10 + 17;
        }
        anHexValueStored[unLengthOfHexString++] = nPartialRemainder + '0';
        nDecimalValue /= 16;`enter code here`
    }

    CHAR ucHexStringConverted[unLengthOfHexString];
    for(ncnt1 = unLengthOfHexString-1 ; ncnt1>=0 ; ncnt1--){
        ucHexStringConverted[unLengthOfHexString-ncnt1-1]=anHexValueStored[ncnt1];
    };

    ucHexStringConverted[unLengthOfHexString]='\0';
    for(ncnt1=0 ; ncnt1 <= unLengthOfHexString ; ncnt1++)
    ucHexStringStored[ncnt1]=ucHexStringConverted[ncnt1];
}
int main() {
    UCHAR c[8];
    DecimalToHex(c,-6243);//Decimal value and it will be converted to Hex
    printf("%s",c);
    return 0;
}
    en 
```

此处代码

# python-2.7 - django 教程第 2 部分模板仅从默认打开

> ID：13852688
> 
> 赞同：0
> 
> 时间：2012-12-13T03:56:04.587
> 
> 标签：python-2.7, django-templates, pdb

我的设置`TEMPLATE_DIRS`是

```
PATH_PROJECT = os.path.abspath(os.path.dirname(__file__))
TEMPLATE_DIRS = (
                 os.path.join(PATH_PROJECT, 'mytemplates/'),
                 ) 
```

但`base_site.html`仅从默认位置打开。我尝试使用 PDB 进行调试。但是在尝试设置断点时`django/conf/__init__.py`，pdb 给出了文件结束的消息。我的 base_site.html 位于正确的文件夹中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:46:25.477

你在 Django >= 1.4 上工作吗？在这种情况下，设置文件可能位于子文件夹中，您应该编写以下代码：

```
PATH_PROJECT = os.path.abspath(os.path.join(os.path.dirname(__file__),'..'))
TEMPLATE_DIRS = ( os.path.join(PATH_PROJECT, 'mytemplates/'), ) 
```

检查 TEMPLATE_DIRS 是否包含您想要的路径，打开 django shell

```
python manage.py shell 
```

和写：

```
from django.conf import settings; print settings.TEMPLATE_DIRS 
```

# php - 从 PHP 触发 Node.js 事件

> ID：13852699
> 
> 赞同：3
> 
> 时间：2012-12-13T03:58:04.370
> 
> 标签：php, javascript, apache, node.js, nginx

我有一个 PHP 脚本正在运行，据说我想在某些 PHP 逻辑已经完成时触发 Node.js 向客户端触发一个事件，我应该怎么做？Node.js 部分尚未设置，但可能位于 PHP/Apache 以外的另一台服务器上，并被放置在用作反向代理的 Nginx 后面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T04:18:20.380

尝试：

```
<?php

$ch = curl_init();

$data = array('name' => 'Foo', 'file' => '@/home/user/test.png');

curl_setopt($ch, CURLOPT_URL, 'http://localhost:8000/'); /* Node app*/
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

curl_exec($ch);
?> 
```

审查：

[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:13:18.897

您可以将您的 php 服务器连接到 node.js 服务器，是的。

以本页的 NodeLog 类为例，

[http://gonzalo123.com/2011/05/09/real-time-monitoring-php-applications-with-websockets-and-node-js/](http://gonzalo123.com/2011/05/09/real-time-monitoring-php-applications-with-websockets-and-node-js/)

这只是一天结束时的一个插座。

# python - 创建文件，但如果名称存在添加编号

> ID：13852700
> 
> 赞同：28
> 
> 时间：2012-12-13T03:58:06.380
> 
> 标签：python, file-io, operating-system

如果文件名已经存在，Python 是否有任何内置功能可以将数字添加到文件名中？

我的想法是它会以某些操作系统的工作方式工作 - 如果一个文件被输出到一个已经存在该名称的文件的目录，它会附加一个数字或增加它。

即：如果“file.pdf”存在，它将创建“file2.pdf”，下一次创建“file3.pdf”。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2019-09-11T20:17:26.010

我最终为此编写了自己的简单函数。原始的，但可以完成工作：

```
def uniquify(path):
    filename, extension = os.path.splitext(path)
    counter = 1

    while os.path.exists(path):
        path = filename + " (" + str(counter) + ")" + extension
        counter += 1

    return path 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-13T04:16:18.903

`tempfile`在某种程度上，Python 在模块中内置了这个功能。不幸的是，您必须利用私有全局变量`tempfile._name_sequence`. 这意味着官方`tempfile`不保证在未来的版本中`_name_sequence`甚至存在——它是一个实现细节。但是，如果您仍然可以使用它，这将显示如何`file#.pdf`在指定目录中创建具有唯一名称的表单文件，例如`/tmp`：

```
import tempfile
import itertools as IT
import os

def uniquify(path, sep = ''):
    def name_sequence():
        count = IT.count()
        yield ''
        while True:
            yield '{s}{n:d}'.format(s = sep, n = next(count))
    orig = tempfile._name_sequence 
    with tempfile._once_lock:
        tempfile._name_sequence = name_sequence()
        path = os.path.normpath(path)
        dirname, basename = os.path.split(path)
        filename, ext = os.path.splitext(basename)
        fd, filename = tempfile.mkstemp(dir = dirname, prefix = filename, suffix = ext)
        tempfile._name_sequence = orig
    return filename

print(uniquify('/tmp/file.pdf')) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-07-28T13:37:49.653

我试图在我的项目中实现同样的事情，但@unutbu 的回答对我的需求来说似乎太“重”了，所以我最终想出了以下代码：

```
import os
index = ''
while True:
    try:
        os.makedirs('../hi'+index)
        break
    except WindowsError:
        if index:
            index = '('+str(int(index[1:-1])+1)+')' # Append 1 to number in brackets
        else:
            index = '(1)'
        pass # Go and try create file again 
```

以防万一有人偶然发现并需要更简单的东西。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-11-21T10:14:33.490

最近我遇到了同样的事情，这是我的方法：

```
import os

file_name = "file_name.txt"
if os.path.isfile(file_name):
    expand = 1
    while True:
        expand += 1
        new_file_name = file_name.split(".txt")[0] + str(expand) + ".txt"
        if os.path.isfile(new_file_name):
            continue
        else:
            file_name = new_file_name
            break 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-06-20T07:11:37.800

如果所有被编号的文件都不是问题，并且您事先知道要写入的文件的名称，您可以简单地执行以下操作：

```
import os

counter = 0
filename = "file{}.pdf"
while os.path.isfile(filename.format(counter)):
    counter += 1
filename = filename.format(counter) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-05-02T14:47:27.070

假设您已经拥有这些文件：

[![在此处输入图像描述](../Images/1aedee89a564b5d0289606b91caa1502.png)](https://i.stack.imgur.com/U2G6j.png)

此函数生成**下一个可用的非已经存在的文件名**，必要时在扩展名前添加 _1, _2, _3, ... 后缀：

```
import os

def nextnonexistent(f):
    fnew = f
    root, ext = os.path.splitext(f)
    i = 0
    while os.path.exists(fnew):
        i += 1
        fnew = '%s_%i%s' % (root, i, ext)
    return fnew

print(nextnonexistent('foo.txt'))  # foo_3.txt
print(nextnonexistent('bar.txt'))  # bar_1.txt
print(nextnonexistent('baz.txt'))  # baz.txt 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-12-10T02:12:32.173

由于 tempfile hack A) 是一种 hack，而 B) 仍然需要大量代码，因此我采用了手动实现。你基本上需要：

1.  一种[当且仅当文件不存在时安全创建文件](https://stackoverflow.com/questions/10978869/safely-create-a-file-if-and-only-if-it-does-not-exist-with-python)的方法（这是 tempfile hack 为我们提供的）。
2.  文件名生成器。
3.  隐藏混乱的包装功能。

我定义了一个可以像 open 一样使用的 safe_open：

```
def iter_incrementing_file_names(path):
    """
    Iterate incrementing file names. Start with path and add " (n)" before the
    extension, where n starts at 1 and increases.

    :param path: Some path
    :return: An iterator.
    """
    yield path
    prefix, ext = os.path.splitext(path)
    for i in itertools.count(start=1, step=1):
        yield prefix + ' ({0})'.format(i) + ext

def safe_open(path, mode):
    """
    Open path, but if it already exists, add " (n)" before the extension,
    where n is the first number found such that the file does not already
    exist.

    Returns an open file handle. Make sure to close!

    :param path: Some file name.

    :return: Open file handle... be sure to close!
    """
    flags = os.O_CREAT | os.O_EXCL | os.O_WRONLY

    if 'b' in mode and platform.system() == 'Windows':
        flags |= os.O_BINARY

    for filename in iter_incrementing_file_names(path):
        try:
            file_handle = os.open(filename, flags)
        except OSError as e:
            if e.errno == errno.EEXIST:
                pass
            else:
                raise
        else:
            return os.fdopen(file_handle, mode)

# Example
with safe_open("some_file.txt", "w") as fh:
    print("Hello", file=fh) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-15T01:12:12.183

我还没有对此进行测试，但它应该可以工作，迭代可能的文件名，直到有问题的文件不存在，此时它会中断。

```
def increment_filename(fn):
    fn, extension = os.path.splitext(path)

    n = 1
    yield fn + extension
    for n in itertools.count(start=1, step=1)
        yield '%s%d.%s' % (fn, n, extension)

for filename in increment_filename(original_filename):
    if not os.isfile(filename):
        break 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-14T06:39:27.960

这对我有用。初始文件名是`0.yml`，如果存在则加一，直到满足要求

```
import os
import itertools

def increment_filename(file_name):
    fid, extension = os.path.splitext(file_name)

    yield fid + extension
    for n in itertools.count(start=1, step=1):
        new_id = int(fid) + n
        yield "%s%s" % (new_id, extension)

def get_file_path():
    target_file_path = None
    for file_name in increment_filename("0.yml"):
        file_path = os.path.join('/tmp', file_name)
        if not os.path.isfile(file_path):
            target_file_path = file_path
            break
    return target_file_path 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-20T03:06:57.013

```
import os

class Renamer():
    def __init__(self, name):
        self.extension = name.split('.')[-1]
        self.name = name[:-len(self.extension)-1]
        self.filename = self.name
    def rename(self):
        i = 1
        if os.path.exists(self.filename+'.'+self.extension):
            while os.path.exists(self.filename+'.'+self.extension):
                self.filename = '{} ({})'.format(self.name,i)
                i += 1
        return self.filename+'.'+self.extension 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-09-20T01:27:32.897

我发现 os.path.exists() 条件函数做了我需要的。我以字典到 csv 的保存为例，但相同的逻辑适用于任何文件类型：

```
import os 

def smart_save(filename, dict):
    od = filename + '_' # added underscore before number for clarity

    for i in np.arange(0,500,1): # I set an arbitrary upper limit of 500
        d = od + str(i)

        if os.path.exists(d + '.csv'):
            pass

        else:
            with open(d + '.csv', 'w') as f: #or any saving operation you need
                for key in dict.keys():
                    f.write("%s,%s\n"%(key, dictionary[key]))
            break 
```

注意：默认情况下，这会在文件名后面附加一个数字（从 0 开始），但很容易改变它。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-09-11T07:38:40.510

我已经实现了一个类似的解决方案`pathlib`：

创建与模式匹配的文件名`path/<file-name>-\d\d.ext`。也许这个解决方案可以帮助......

```
import pathlib
from toolz import itertoolz as itz

def file_exists_add_number(path_file_name, digits=2):

    pfn = pathlib.Path(path_file_name)
    parent = pfn.parent     # parent-dir of file
    stem = pfn.stem         # file-name w/o extension
    suffix = pfn.suffix     # NOTE: extension starts with '.' (dot)!

    try:
        # search for files ending with '-\d\d.ext'
        last_file = itz.last(parent.glob(f"{stem}-{digits * '?'}{suffix}"))
    except:
        curr_no = 1
    else:
        curr_no = int(last_file.stem[-digits:]) + 1

    # int to string and add leading zeros
    curr_no = str(last_no).zfill(digits)
    path_file_name = parent / f"{stem}-{curr_no}{suffix}"

    return str(path_file_name) 
```

请注意：该解决方案从开始`01`并且只会找到包含的文件模式`-\d\d`！

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2019-02-26T19:56:46.420

稍晚一点，但仍然有这样的东西应该可以正常工作，mb 它对某人有用。

您可以使用内置迭代器来执行此操作（以*图像下载器为例*）：

```
def image_downloader():

        image_url = 'some_image_url'

        for count in range(10):
            image_data = requests.get(image_url).content

            with open(f'image_{count}.jpg', 'wb') as handler:
                handler.write(image_data) 
```

文件将适当增加。结果是：

```
image.jpg
image_0.jpg
image_1.jpg
image_2.jpg
image_3.jpg
image_4.jpg
image_5.jpg
image_6.jpg
image_7.jpg
image_8.jpg
image_9.jpg 
```

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2021-03-12T21:18:47.737

[如果您的文件夹中有此名称，则创建新文件的简便方法](https://i.stack.imgur.com/Nn51B.png)

```
if 'sample.xlsx' in os.listdir('testdir/'):

    i = 2

    while os.path.exists(f'testdir/sample ({i}).xlsx'):
        i += 1

    wb.save(filename=f"testdir/sample ({i}).xlsx")
else:
    wb.save(filename=f"testdir/sample.xlsx") 
```

# c++ - 单一与共享所有权的含义

> ID：13852710
> 
> 赞同：17
> 
> 时间：2012-12-13T03:58:41.170
> 
> 标签：c++, ownership

刚刚看到和拥有时正在阅读[RAII的 Wikipedia。](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)`Single``Shared`

谷歌搜索，找不到任何有用的答案！

有人可以为一个男生解释这个概念吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-13T04:03:03.253

它本质上是`unique_ptr`vs `shared_ptr`。

单一所有权，也称为唯一所有权，意味着资源由*单个*类实例拥有。一旦该实例不再存在，资源就会被释放（通过析构函数）。您发现的大多数 RAII 类都有唯一的所有权，例如`std::vector`.

共享所有权意味着资源在多个类实例之间*共享。*只有在每个实例不再存在时才会释放资源，因此需要某种形式的引用计数或垃圾收集。您希望共享所有权的一个例子是一个非常昂贵的复制不可变资源的句柄。我也看到它在图表中使用过。

从指针的角度思考可能会有所帮助。单一所有权将只有 1 个拥有指针，共享将有多个。当然，RAII 可能不涉及指针。

```
 +---------------+
                    |Shared instance|
    +--------+      +------------+--+           +---------------+
    |Resource|                   |   +----------+Shared instance|
    +--------+                   v   v          +---------------+
        ^                    +--------+
        |                    |Resource|<-----------+
        |                    +--------+        +---+-----------+
        |                         ^            |Shared instance|
 +------+--------+                |            +---------------+
 |Unique Instance|                |
 +---------------+                |
                           +------+--------+
                           |Shared instance|
                           +---------------+ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-13T04:13:29.787

**所有权与****可变生命周期**的概念密切相关。

如果你能回答这个问题，*这块内存什么时候可以消失？*，那么你就可以回答所有权问题了。

如果那块内存只与一个变量的生命周期相关联，那么您拥有单一所有权。

请注意，考虑**堆**或**动态**分配与**堆栈**或**自动**变量也很重要。使用**自动变量**，当它们超出范围时，与它们相关的内存就会被回收。对于**动态分配**，在一般情况下，情况并非如此。如果您将**std::unique_ptr<>**之类的新工具用于单一所有权，那么您可以让一块动态内存在超出范围时自行清理。如果有许多对该内存块的引用，并且这些引用何时消失的顺序不确定，那么您可能需要类似**std::shared_ptr<>**之类的东西来获得多重所有权。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-13T04:24:24.947

所有权归结为谁负责释放资源。通常，您可以说代码的一部分（无论是函数还是类）是资源的唯一所有者。当资源完成后，所有者将不得不释放它以使资源不[泄漏](http://en.wikipedia.org/wiki/Memory_leak)。这称为单一或[唯一](http://en.cppreference.com/w/cpp/memory/unique_ptr)所有权。

同样，存在[共享](http://en.cppreference.com/w/cpp/memory/shared_ptr)所有权的概念，其中两个或多个离散的代码部分（它们也可以是类或函数）都依赖于相同的资源。在这种情况下，两者都必须不再需要资源才能释放它。

C++ 提供了两个有用的包装器来传达和实施*所有权语义*——所有权语义就是上面所描述的。这些包装器概括了[RAII](https://en.wikipedia.org/wiki/RAII)的概念——一旦资源超出范围即自动释放它。

*   [`unique_ptr`](http://en.cppreference.com/w/cpp/memory/unique_ptr)-- 包装在唯一指针中的对象将在超出范围时立即被释放，这意味着函数返回或类被销毁。

*   [`shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr)-- 包装在共享指针中的对象将保持可用，直到所有“强引用”都超出范围。这是一个称为[引用计数](https://en.wikipedia.org/wiki/Reference_count)的概念。一旦最终引用超出范围，资源就会被释放。

所有权语义在诸如 C++ 之类的语言中非常重要，因此我建议您熟悉**现代**C++ 如何传达和执行它。您可以从学习和的正确用法`unique_ptr`开始`shared_ptr`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-13T04:16:04.800

关于智能指针/raii，共享所有权是指多个对象可以引用同一资源，并且仅当引用该资源的该对象的所有实例都被解构时才释放该资源。

```
// shared ownership

{
  std::shared_ptr<SomeClass> i(new SomeClass());
  {
    std::shared_ptr<SomeClass> j = i;

    {
      std::shared_ptr<SomeClass> k = j;

      // at this point i, j, k all own the same object

    }
    // k deconstructed and no longer shares ownership of the resource
  }
  // j deconstructed and no longer shares ownership of the resource
}
// i deconstructed and he resource is also released / free'd 
```

共享（唯一）所有权要么随对象而死，要么传递给另一个对象

```
// single/unique ownership

{
  std::unique_ptr<SomeClass> i(new SomeClass());
  {
    std::unique_ptr<SomeClass> j = std::move(i); // k takes ownership of the object from i
  }
  // j is deconstructed and the resource is also released / free'd
}
// i deconstructed and nothing is released, as the ownership already passed to j 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-13T04:03:20.787

单一所有权意味着当所有者完成资源后，它应该删除它。

如果它是共享所有权，那么它不能删除它，因为其他所有者可能仍在使用它！因此，资源删除必须通过某种方式进行协调，通常是通过引用计数。

# php - 警告：implode() [function.implode]：在第 1394 行 [path]/clancp.php 中传递的参数无效

> ID：13852713
> 
> 赞同：-3
> 
> 时间：2012-12-13T03:59:00.270
> 
> 标签：php, mysql, implode

# 警告：implode() [function.implode]：在第 1394 行 [path]/clancp.php 中传递的参数无效

// ##################### 开始管理部落邀请页面##################### ##

if ($_REQUEST['do'] == 'manageinvite')

{

```
if (count($clan['invite']) == 0)
{
    // No invites
    eval(standard_error(fetch_error('rpg_clan_no_invites_sent')));
}

$usernames_query = $db->query_read("
    SELECT `rpgname`, `userid`, `clanid`
    FROM `" . TABLE_PREFIX . "rpg_user`
    WHERE `userid` IN(" . implode(', ', $clan['invite']) . ")
");
while ($userinfo = $db->fetch_array($usernames_query))
{
    $checked = '';
    if ($userinfo['clanid'] > 0)
    {
        // In clan
        $checked = ' checked="checked"';
    }

    // Fetch template for each user
    eval('$invitedbit .= "' . fetch_template('rpg_clan_user_invitedbit') . '";');
}
$db->free_result($usernames_query); 
```

请帮助我是新手。我需要找出问题所在。

第 1394 行 ###### WHERE `userid`IN(" . implode(', ', $clan['invite']) . ")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:00:52.140

`$clan['invite']`不是数组。`var_dump`看看它是什么。

仅供参考，`count($clan['invite'])`如果它不是数组，将评估为 1。

# asp.net-mvc - 没有被重用的实体

> ID：13852720
> 
> 赞同：1
> 
> 时间：2012-12-13T03:59:30.593
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4, ef-code-first, entity-framework-5

我有一个新的 ASP.NET MVC 4 应用程序，我开始使用它。我过去使用过 Entity-Framework，但这是我第一次使用 Code First。我遇到的麻烦是，当`PLAYER`添加一个新记录时，`POSITIONS`也会添加一条新记录，即使该表中已经有一条匹配的记录。

## 控制器

```
Player player = new Player();
player.PlayerName = "Bob";

PositionRepository posRepo = new PositionRepository();
player.PlayerPosition = posRepo.Get(1);

PlayerRepository playerRepo = new PlayerRepository();

playerRepo.Add(player); 
```

## 播放器回购

```
public Player Add(Player player)
    {
        _db.Players.Add(player);
        _db.SaveChanges();
        return player;
    } 
```

## 仓位回购

```
public Position Get(int id)
    {
        return _db.Positions.SingleOrDefault(r => r.Id == id);
    } 
```

如果有帮助，我也可以包含 Player 和 Position 类的代码。

总而言之：当我添加新`PLAYER`记录时，我希望它引用现有`POSITION`记录。在上面的例子中，我只是抓取了第一`POSITION`条记录。相反，`POSITION`会为玩家创建一条新记录。

有趣的是，如果我在一个循环中构建多个玩家，只会`POSITION`创建一个新记录。这仍然是一个问题，因为我不想`POSITION`创建任何新记录，而是使用数据库中已经存在的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:25:27.173

快速猜测。

由于您使用了不同的 DbContext 实例，因此重新创建了 Position 记录`PlayerRepository`，`PositionRepository`因此 Position 记录丢失了其当前状态。

这是使用存储库模式和 ORM 时的常见问题。还没有尝试，但我认为它会工作

```
public Player Add(Player player)
{
    //add this
    _db.Entry(player.PlayerPosition).State = EntityState.Modified;

    _db.Players.Add(player);
    _db.SaveChanges();
    return player;
} 
```

# wiki - 如何在 redmine 的另一个 wiki 页面中包含带有附件列表的 wiki 页面？

> ID：13852722
> 
> 赞同：0
> 
> 时间：2012-12-13T03:59:36.013
> 
> 标签：wiki, redmine, redmine-plugins

redmine 提供了一些代码，例如 '{{include(Foo)}}' 来包含一个 wiki 页面。但它不包括来自 Foo 页面的附件列表。

我想包含一个带有如下附件的 wiki 页面。有没有可以做到这一点的插件？

![在此处输入图像描述](../Images/c4c6c0e0c9daaaefed6c67e4f39dde6a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:31:37.617

据我所知，没有插件可以让您包含附件，因为它们本质上不是 wiki 页面的一部分。但是，您可以在包含的 wiki 页面中包含图像，然后它们会显示在包含带有附件的 wiki 页面的 wiki 页面中。也许您可以添加指向附件的链接以创建解决方法？

# css - 使用 Twitter Bootstrap 根据最大 宽度 div 的 x 位置设置导航选项卡的 x 位置

> ID：13852724
> 
> 赞同：2
> 
> 时间：2012-12-13T03:59:44.403
> 
> 标签：css, twitter-bootstrap, responsive-design

我正在使用 Twitter Bootstrap，我希望导航的内容从具有相对位置的 div 的开头开始：

```
<div class="navbar">
    <div class="navbar-inner">
        <a class="brand" href="#">Title</a>
        <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
        </ul>
    </div>
</div>
<div class="content">
    some content here
</div> 
```

并使用CSS：

```
.content{
    max-width:60%;
    margin: 0 auto;
} 
```

示例：http: [//jsfiddle.net/RXQV4/1/](http://jsfiddle.net/RXQV4/1/)

如何通过保持导航的背景使“标题”（.brand）位于与内容开头相同的 x 位置？

谢谢！

**编辑：** 我重新解释了我想要的（不容易）：我希望 .brand 在同一个栏上占据 100% 的屏幕；它应该只是推动三个选项卡的右侧，并且这个 .brand 应该从与 .content 相同的 x 位置开始。问题是我不知道如何获得有关 .content 的 x 位置的信息（如果可能的话，没有 jQuery ......）。

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:23:18.580

你可以[检查这个更新的小提琴](http://jsfiddle.net/rishikalia/6QPSV/1/)..

**代码**：

```
<div class="navbar">

    <div class="navbar-inner">
         <ul class="nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#">Link</a></li>
            <li><a href="#">Link</a></li>
        </ul>

    </div>
    <br />
<div class="navbar-inner yourTitle">
    <a class="brand" href="#">Title</a>
</div>    
</div> 

<div class="content">
    some content here   
</div> 
```

**CSS**：

```
.content {
    border: 1px solid lightgray;
    height: 400px;
    margin: 0 auto;
    max-width: 60%;
}
.yourTitle{
    width:65%;
    margin: 0 auto;
    padding:0;
} 
```

对不起，但这是我从你的帖子中理解的..

**更新**：

检查[这个更新的小提琴](http://jsfiddle.net/rishikalia/6QPSV/2/)，如果这不是你想要的，而不是用截图更新你的问题..

这是更新的小提琴屏幕截图：

![在此处输入图像描述](../Images/b1cc9ad0e0ba349687cd8eb0e0a4fcb3.png)

# java - Java Map 按值排序

> ID：13852725
> 
> 赞同：9
> 
> 时间：2012-12-13T03:59:47.407
> 
> 标签：java, sorting, hashmap, comparator, treemap

我一直在寻找`Map<String, Integer>`按值排序的方法。我找到[了这篇文章](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)，它解决了我的排序问题，但不完全是。根据帖子，我编写了以下代码：

```
import java.util.*;

public class Sort {

    static class ValueComparator implements Comparator<String> {

        Map<String, Integer> base;

        ValueComparator(Map<String, Integer> base) {
            this.base = base;
        }

        @Override
        public int compare(String a, String b) {
            if (base.get(a) >= base.get(b)) {
                return 1;
            } else {
                return -1;
            }
        }
    }

    public static void main(String[] args) {
        HashMap<String, Integer> map = new HashMap<String, Integer>();
        ValueComparator vc = new ValueComparator(map);
        TreeMap<String, Integer> sorted = new TreeMap<String, Integer>(vc);
        map.put("A", 1);
        map.put("B", 2);
        sorted.putAll(map);
        for (String key : sorted.keySet()) {
            System.out.println(key + " : " + sorted.get(key)); // why null values here?
        }
        System.out.println(sorted.values()); // But we do have non-null values here!
    }
} 
```

输出：

```
A : null
B : null
[1, 2]
BUILD SUCCESSFUL (total time: 0 seconds) 
```

从输出中可以看出，该`get`方法总是返回`null`. 原因是我的`ValueComparator.compare()`方法永远不会返回`0`，这是我通过[发表这篇文章](https://stackoverflow.com/questions/13842830/treemapstring-integer-objects-get-method-return-null-value)发现的。

有人在那篇文章中建议以下解决`null`价值问题：

```
 public int compare(String a, String b) {
            if (base.get(a) > base.get(b)) {
                return 1;
            }else if(base.get(a) ==  base.get(b)){
                return 0;
            }
            return -1;  
        } 
```

我已经测试了这段代码，它引入了一个关键的合并问题。换句话说，当值相等时，它们对应的键被合并。

我还尝试了以下方法：

```
 public int compare(String a, String b) {
                if (a.equals(b)) return 0;
                if (base.get(a) >= base.get(b)) {
                    return 1;
                } else return -1;
            } 
```

它也不起作用。一些值仍然是`null`. 此外，此解决方法可能存在逻辑问题。

任何人都可以为我的问题提出一个完全可行的解决方案？我希望按值排序功能和`get`方法同时工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T04:30:02.957

在您的比较函数中，当值相等时，您应该比较键。这将确保具有相同值的不同键不会被“合并”，因为它消除了原本会比较相等的条目的歧义。

例如：

```
 @Override
    public int compare(String a, String b) {
        Integer x = base.get(a);
        Integer y = base.get(b);
        if (x.equals(y)) {
            return a.compareTo(b);
        }
        return x.compareTo(y);
    } 
```

（您需要修改上面的代码以匹配您的空值策略）

请注意，您对值进行排序的方法非常脆弱。您的“排序”地图将不支持添加新条目，这可能会很混乱。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T04:03:08.650

```
base.get(a) ==  base.get(b) 
```

`Integer`此代码通过引用 比较 boxed s。

将其更改为`base.get(a).equals(base.get(b))`，它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T04:17:06.477

试试这个：

```
return base.get(a).compareTo(base.get(b)); 
```

* * *

为了证明您对自动拆箱的看法不正确：

```
Integer a = new Integer(2);
Integer b = new Integer(2);
boolean isEqual = ( a == b );
System.out.println("equal: " + isEqual);
System.out.println("a: " + a);
System.out.println("b: " + b); 
```

我的输出是：

```
equal: false
a: 2
b: 2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T04:17:17.573

试试这个 ...

```
HashMap<String, Integer> h = new HashMap<String, Integer>();
h.put("z",30);
h.put("e",10);
h.put("b",20);
h.put("c",20);
List<Map.Entry> a = new ArrayList<Map.Entry>(h.entrySet());
Collections.sort(a,
         new Comparator() {
             public int compare(Object o1, Object o2) {
                 Map.Entry e1 = (Map.Entry) o1;
                 Map.Entry e2 = (Map.Entry) o2;
                 return ((Comparable) e1.getValue()).compareTo(e2.getValue());
             }
         });

for (Map.Entry e : a) {
        System.out.println(e.getKey() + " " + e.getValue());
} 
```

输出：

```
e 10
b 20
c 20
z 30 
```

# iphone - iOS ARC，接收器类型“CALayer”例如消息是前向声明

> ID：13852728
> 
> 赞同：3
> 
> 时间：2012-12-13T04:00:14.313
> 
> 标签：iphone, uiview, automatic-ref-counting

***你好，***

当我插入这个：

```
UIGraphicsBeginImageContext(imageView.bounds.size);
    [imageView.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

我在第 2 行收到此错误：

例如消息的接收器类型“CALayer”是前向声明

我知道这与 ARC 有关，但有什么替代方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T04:03:24.203

您需要导入`<QuartzCore/QuartzCore.h>`并添加`QuartzCore.framework`. 添加此导入后，`CALayer`将完全定义。

# iphone - 错误“用于应用内购买的存档...无效。该包包含位于“Contents/xyz.m4a”的可执行文件”

> ID：13852731
> 
> 赞同：9
> 
> 时间：2012-12-13T04:01:02.947
> 
> 标签：iphone, ios6, in-app-purchase, app-store-connect, xcode4.5

我正在使用 iOS 6 和 Xcode 4.5.2 为几个游戏关卡创建一个 .pkg 文件。在验证 IAP 内容的 Xcode .pkg 时，它抱怨我在声音包中的 m4a 音频文件。奇怪的是它说：“应用程序内购买的存档......无效。包包含'Contents/xyz.m4a'的可执行文件。” 我知道我在包中有一些音频文件（扩展名为 .m4a），但我不明白为什么将这些文件称为“可执行文件”。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-05T00:45:16.557

尝试`ls -l xyz.m4a` 并`chmod -x xyz.m4a`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-29T02:46:27.467

同样的问题，但截至 2013 年 10 月 28 日列出的答案并没有解决我的错误。我能够通过 chmod 444 在生成的存档中解决错误，然后重新提交以进行验证。然后它通过了验证。

附加信息：我有一堆 .mov 视频，我想将它们作为托管内容上传到 ItunesConnect。在 Xcode 中：File->NewProject->Other->HostedContent；确保产品标识符与 iTunesConnect 中的标识符匹配（区分大小写），（不要添加到任何项目或工作区），然后将文件保存在我的项目目录之外。然后，在新创建的项目中，在第一个文件夹中（具有我的应用内购买的名称 - 但不在 Supporting Files 文件夹中），我移动了所有 .mov 视频文件，选择“将文件复制到文件夹”选项.
**注意 - 此步骤应用其他人在此线程中发布的答案，但对我不起作用。接下来，在终端中，我导航到这些视频的复制位置。然后我使用以下命令将所有视频更改为只读：chmod 444 ./*

回到 Xcode，从菜单：Product->Archive。管理器打开，列出了新的存档。选择验证并选择 ITunesConnect“应用内购买内容”。这里是验证失败的地方，并出现错误“应用内购买的存档无效。包包含'xxxxxxx'.mov 的可执行文件”

然后我右键单击存档包，然后“在 Finder 中显示”。右键单击“xxxxxxx.xcarchve”文件并选择“显示包内容”。然后进入这个文件夹：products->Library->InAppPurchaseContent->xxxx-nameofmycontent-xxxx->Contents

存档包含我所有视频文件的副本。现在我导航到终端中的这个“内容”文件夹（在终端中，输入“cd”，然后将文件夹拖到终端以自动填充目录路径），然后按 Enter。在此目录中，我使用以下命令将所有视频文件设为“只读”：“chmod 444 ./*”。

回到 Organizer，点击 Validate，选择由 ITunesConnect 识别的托管内容产品，然后 Validation Success！

希望这可以帮助其他人在我的情况下。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-13T06:38:11.757

检查包装内容。很可能您的构建设置没有有效的音频文件，但已编译代码。您不能在`IAP`捆绑包中编译代码。

# google-app-engine - 在不重新部署的情况下配置对 GAE 应用程序的更改？

> ID：13852735
> 
> 赞同：0
> 
> 时间：2012-12-13T04:01:21.900
> 
> 标签：google-app-engine

假设我只想对 GAE 应用程序进行配置更改（即没有代码更改） - 有没有办法更改配置文件并反弹 GAE 实例而不是完整部署？

我正在使用 GPE 进行日食。

问候，

沙迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:47:06.863

命令 appcfg 是 GAE sdk 的一部分，将帮助您管理您的应用程序。

# c# - Kinect 错误启用流

> ID：13852736
> 
> 赞同：3
> 
> 时间：2012-12-13T04:01:32.907
> 
> 标签：c#, kinect, kinect-sdk

这是我第一次尝试制作一个使用 Kinect 的程序，但我不知道为什么我不断收到`null`错误。也许更了解 KinectSDK 的人可以提供帮助？

```
public ProjKinect()
{
    InitializeComponent();
    updateSensor(0);//set current sensor as 0 since we just started
}

public void updateSensor(int sensorI)
{
    refreshSensors();//see if any new ones connected
    if (sensorI >= sensors.Length)//if it goes to end, then repeat
    {
        sensorI = 0;
    }
    currentSensorInt = sensorI;
    if (activeSensor != null && activeSensor.IsRunning)
    {
        activeSensor.Stop();//stop so we can cahnge
    }
    MessageBox.Show(sensors.Length + " Kinects Found");
    activeSensor = KinectSensor.KinectSensors[currentSensorInt];
    activeSensor.ColorStream.Enable(ColorImageFormat.RgbResolution640x480Fps30); //ERROR IS RIGHT HERE
    activeSensor.DepthStream.Enable();
    activeSensor.SkeletonStream.Enable();
    activeSensor.SkeletonFrameReady += runtime_SkeletonFrameReady;
    activeSensor.DepthFrameReady += runtime_DepthFrameReady;
    activeSensor.ColorFrameReady += runtime_ImageFrameReady;
    activeSensor.Start();//start the newly enabled one
}
public void refreshSensors()
{
    sensors = KinectSensor.KinectSensors.ToArray();
} 
```

错误：

```
Object reference not set to an instance of an object. 
```

顺便说一句，它说我连接了 1 个 Kinect，所以我知道它至少可以识别我有东西要连接。如果我只是说`0`而不是`currentSensorInt`. `DepthStream.Enable`如果我注释掉`ColorStream.Enable`. 所以我猜我在创建传感器时做错了什么？

希望这是一件小事。提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T16:47:15.467

我没有看到任何明显的错误，但我之前也没有看到传感器以这种方式获取和设置。您看过[Kinect for Windows Developer Toolkit](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)示例吗？关于如何连接到 Kinect 的示例有很多，有些只是蛮力连接，而另一些则非常健壮。

例如，这是 SlideshowGestures-WPF 示例中连接代码的精简版本：

```
public partial class MainWindow : Window
{
    /// <summary>
    /// Active Kinect sensor
    /// </summary>
    private KinectSensor sensor;

    /// <summary>
    /// Execute startup tasks
    /// </summary>
    /// <param name="sender">object sending the event</param>
    /// <param name="e">event arguments</param>
    private void WindowLoaded(object sender, RoutedEventArgs e)
    {
        // Look through all sensors and start the first connected one.
        // This requires that a Kinect is connected at the time of app startup.
        // To make your app robust against plug/unplug, 
        // it is recommended to use KinectSensorChooser provided in Microsoft.Kinect.Toolkit
        foreach (var potentialSensor in KinectSensor.KinectSensors)
        {
            if (potentialSensor.Status == KinectStatus.Connected)
            {
                this.sensor = potentialSensor;
                break;
            }
        }

        if (null != this.sensor)
        {
            // Turn on the color stream to receive color frames
            this.sensor.ColorStream.Enable(ColorImageFormat.InfraredResolution640x480Fps30);

            // Add an event handler to be called whenever there is new color frame data
            this.sensor.ColorFrameReady += this.SensorColorFrameReady;

            // Start the sensor!
            try
            {
                this.sensor.Start();
            }
            catch (IOException)
            {
                this.sensor = null;
            }
        }
    }

    /// <summary>
    /// Execute shutdown tasks
    /// </summary>
    /// <param name="sender">object sending the event</param>
    /// <param name="e">event arguments</param>
    private void WindowClosing(object sender, System.ComponentModel.CancelEventArgs e)
    {
        if (null != this.sensor)
        {
            this.sensor.Stop();
        }
    }
} 
```

获取传感器的最简单方法是使用`KinectSensorChooser`类，它是`Microsoft.Kinect.Toolkit`命名空间的一部分。它为您完成所有工作。例如，这是我的设置的精简版本：

```
public class MainViewModel : ViewModelBase
{
    private readonly KinectSensorChooser _sensorChooser = new KinectSensorChooser();

    /// <summary>
    /// Initializes a new instance of the MainViewModel class.
    /// </summary>
    public MainViewModel(IDataService dataService)
    {
        if (IsInDesignMode)
        {
            // do something special, only for design mode
        }
        else
        {
            _sensorChooser.Start();

            if (_sensorChooser.Kinect == null)
            {
                MessageBox.Show("Unable to detect an available Kinect Sensor");
                Application.Current.Shutdown();
            }
        }
    } 
```

而已。我有一个传感器，我可以开始使用它。我如何连接和控制 Kinect 的更大示例使用`KinectSensorManager`工具包中的类，该类位于`KinectWpfViewers`命名空间中：

```
public class MainViewModel : ViewModelBase
{
    private readonly KinectSensorChooser _sensorChooser = new KinectSensorChooser();

    /// <summary>
    /// Initializes a new instance of the MainViewModel class.
    /// </summary>
    public MainViewModel(IDataService dataService)
    {
        if (IsInDesignMode)
        {
            // do something special, only for design mode
        }
        else
        {
            KinectSensorManager = new KinectSensorManager();
            KinectSensorManager.KinectSensorChanged += OnKinectSensorChanged;

            _sensorChooser.Start();

            if (_sensorChooser.Kinect == null)
            {
                MessageBox.Show("Unable to detect an available Kinect Sensor");
                Application.Current.Shutdown();
            }

            // Bind the KinectSensor from the sensorChooser to the KinectSensor on the KinectSensorManager
            var kinectSensorBinding = new Binding("Kinect") { Source = _sensorChooser };
            BindingOperations.SetBinding(this.KinectSensorManager, KinectSensorManager.KinectSensorProperty, kinectSensorBinding);
        }
    }

    #region Kinect Discovery & Setup

    private void OnKinectSensorChanged(object sender, KinectSensorManagerEventArgs<KinectSensor> args)
    {
        if (null != args.OldValue)
            UninitializeKinectServices(args.OldValue);

        if (null != args.NewValue)
            InitializeKinectServices(KinectSensorManager, args.NewValue);
    }

    /// <summary>
    /// Initialize Kinect based services.
    /// </summary>
    /// <param name="kinectSensorManager"></param>
    /// <param name="sensor"></param>
    private void InitializeKinectServices(KinectSensorManager kinectSensorManager, KinectSensor sensor)
    {
        // configure the color stream
        kinectSensorManager.ColorFormat = ColorImageFormat.RgbResolution640x480Fps30;
        kinectSensorManager.ColorStreamEnabled = true;

        // configure the depth stream
        kinectSensorManager.DepthStreamEnabled = true;

        kinectSensorManager.TransformSmoothParameters =
            new TransformSmoothParameters
            {
                // as the smoothing value is increased responsiveness to the raw data
                // decreases; therefore, increased smoothing leads to increased latency.
                Smoothing = 0.5f,
                // higher value corrects toward the raw data more quickly,
                // a lower value corrects more slowly and appears smoother.
                Correction = 0.5f,
                // number of frames to predict into the future.
                Prediction = 0.5f,
                // determines how aggressively to remove jitter from the raw data.
                JitterRadius = 0.05f,
                // maximum radius (in meters) that filtered positions can deviate from raw data.
                MaxDeviationRadius = 0.04f
            };

        // configure the skeleton stream
        sensor.SkeletonFrameReady += OnSkeletonFrameReady;
        kinectSensorManager.SkeletonStreamEnabled = true;

        // initialize the gesture recognizer
        _gestureController = new GestureController();
        _gestureController.GestureRecognized += OnGestureRecognized;

        kinectSensorManager.KinectSensorEnabled = true;

        if (!kinectSensorManager.KinectSensorAppConflict)
        {
            // set up addition Kinect based services here
            // (e.g., SpeechRecognizer)
        }

        kinectSensorManager.ElevationAngle = Settings.Default.KinectAngle;
    }

    /// <summary>
    /// Uninitialize all Kinect services that were initialized in InitializeKinectServices.
    /// </summary>
    /// <param name="sensor"></param>
    private void UninitializeKinectServices(KinectSensor sensor)
    {
        sensor.SkeletonFrameReady -= this.OnSkeletonFrameReady;
    }

    #endregion Kinect Discovery & Setup

    #region Properties

    public KinectSensorManager KinectSensorManager { get; private set; }

    #endregion Properties
} 
```

`KinectExplorer`在 Toolkit中的示例中可以看到所有这些额外代码的优势。简而言之——我可以用这段代码管理多个 Kinect，拔掉一个，程序就切换到另一个。

# php - PHP基于值拆分数组

> ID：13852737
> 
> 赞同：3
> 
> 时间：2012-12-13T04:02:07.807
> 
> 标签：php, array-splice

> **可能重复：**
> [如何根据某个值拆分数组？](https://stackoverflow.com/questions/9354684/how-to-split-an-array-based-on-a-certain-value)

这是我要拆分的示例数组：

(0, 1 ,2 ,3, 0, 4, 5)

我如何将它分成 2 个这样的数组？

(0, 1 ,2 ,3) (0, 4, 5)

基本上我想检查一个元素的值是否为零，然后创建一个包含所有元素的数组，直到找到另一个零。我似乎无法提出解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T04:08:49.247

```
$array = array(0, 1 ,2 ,3, 0, 4, 5);
$result = array();
$index = -1;
foreach ($array as $number) {
    if ($number == 0) {
        $index++;
    }
    $result[$index][] = $number;
}
echo print_r($result, true); 
```

您将以以下内容结束。

```
array(
    0 => array(0, 1, 2, 3),
    1 => array(0, 4, 5)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:10:54.663

```
$x = -1;
$newArr = array();
$array = array(0,1,2,3,0,4,5,6);

foreach ($array as $key => $value) {
  if($value == 0) 
    $x++;

  $newArr[$x][] = $value;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T04:08:24.057

您可以使用[PHP explode](http://php.net/manual/en/function.explode.php)将每个出现的 0 分解为字符串数组，但我现在看到您有一个数组，而不是字符串。正如上面现在建议的那样，您可以使用相反的[PHP implode](http://us2.php.net/manual/en/function.implode.php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T04:09:33.153

首先连接元素，然后使用拆分，然后通过以下`0`前缀再次分隔它们`0`

```
$concatenatedStr = implode(',', $array);
$indx = 0;
$fragments = array();
$fragementStrings= explode("0,", $concatenatedStr);
foreach($fragementStrings as $fragementString) {
  //you get your fragements here 
  $fragments[$indx++][] = explode(",", "0,".$fragementString);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T04:15:15.437

```
<?php
$a=array(0, 1 ,2 ,3, 0, 4, 5);
$b =array();
$k=-1;
foreach($a as $key=>$val)
{
    if($val==0)
    {
      $k++;  
    }

    $b[$k][]=$val;
}

echo"<pre>";

print_r($b[0]);

print_r($b[1]);

foreach($b as $key=>$val)
{
    echo"<pre>";
    echo $val;
    echo"</pre>";
}
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T04:21:03.150

类似于评论，[`array_keys`](http://php.net/array_keys)可用于搜索包含您搜索的值的所有键（在您的情况下为零）。

然后，您可以遍历这些位置并将*数组*（请参阅 参考资料[`array_slice`](http://php.net/array_slice)）分割成各个部分。

示例（[演示](http://eval.in/4496)）：

```
$keys  = array_keys($array, 0);
$parts = [];
$last  = 0;

foreach ($keys as $key)
{
    $last !== $key 
        && $parts[] = array_slice($array, $last, $key - $last, true);    
    $last = $key;
}

$parts[] = isset($key) ? array_slice($array, $key, null, true) : $array; 
```

此变体甚至保留了原始密钥，示例性`$parts`输出：

```
array(2) {
  [0] => array(4) {
    [0] => int(0)
    [1] => int(1)
    [2] => int(2)
    [3] => int(3)
  }
  [1] => array(3) {
    [4] => int(0)
    [5] => int(4)
    [6] => int(5)
  }
} 
```

* * *

另一种选择可能类似于概述的其他一些答案。以下变体也确实保留了密钥：

```
$array = [0, 1 ,2 ,3, 0, 4, 5];
$parts = [];
$index = 0;

foreach ($array as $key => $number)
{
    $number == 0 and $key and $index++;
    $parts[$index][$key] = $number;
} 
```

输出（[演示](http://eval.in/4511)）：

```
Array
(
    [0] => Array
        (
            [0] => 0
            [1] => 1
            [2] => 2
            [3] => 3
        )

    [1] => Array
        (
            [4] => 0
            [5] => 4
            [6] => 5
        )

) 
```

# android - 如何识别用户是否在android中的麦克风中吹气？

> ID：13852738
> 
> 赞同：3
> 
> 时间：2012-12-13T04:02:53.533
> 
> 标签：android, android-audiomanager

我试图确定用户何时通过媒体录音机在他们的麦克风上吹气，但不幸的是我无法区分。有什么方法可以识别或区分android中的语音和吹气。请有人在这里帮助我。提前致谢。

# objective-c - NSBundle File References Lost After App Reinstalled

> ID：13852740
> 
> 赞同：0
> 
> 时间：2012-12-13T04:03:01.067
> 
> 标签：objective-c, ios, nsurl, nsbundle, testflight

I save a user preference for an audio file in `NSUserDefaults` with a URL built like this:

```
soundURL = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/audioFile1.m4r", [[NSBundle mainBundle] resourcePath]]]; 
```

That preference is subsequently retrieved like this:

```
self.audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:self.audioURL error:&error]; 
```

This has worked great and I've had no trouble until recently when the app went into adhoc deployment through TestFlight for beta testing. Now, upon reinstalls of the app, the sound doesn't play. Logging shows that the path relies on a GUID (or equivalent) that has changed with the new install:

```
file://localhost/var/mobile/Applications/D74D8B09-5B27-4EF9-A344-68304CFE5549/myApp.app/audioFile1.m4r 
```

was stored in the preferences, but the URL when built in the subsequent install is:

```
file://localhost/var/mobile/Applications/5F607CD7-6E32-45F0-9897-0DDBACBDD6B0/myApp.app/audioFile1.m4r 
```

So my questions are: Am I doing it wrong? If so, what is the correct way? Why does this only happen under TestFlight?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:37:57.937

**You never store absolute URLs for files in your documents directory. This is because when you update an app iOS creates a new directory for that app with a different hexadecimal name. Now your absolute URL is referencing the incorrect location and won't return the proper file.**

> **Files Saved During App Updates**
> 
> When a user downloads an app update, iTunes installs the update in a new app directory. It then moves the user’s data files from the old installation over to the new app directory before deleting the old installation. Files in the following directories are guaranteed to be preserved during the update process:
> 
> ```
> <Application_Home>/Documents
> 
> <Application_Home>/Library 
> ```
> 
> Although files in other user directories may also be moved over, you should not rely on them being present after an update.

Please refer [iPhoneOSProgrammingGuide](https://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/PerformanceTuning/PerformanceTuning.html) for more details

# android - 切换到锁屏

> ID：13852745
> 
> 赞同：0
> 
> 时间：2012-12-13T04:03:26.997
> 
> 标签：android, lockscreen

我的应用程序有一个功能，需要在按下按钮后返回 LockScreen。有什么方法可以自动切换到 LockScreen 吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:19:23.650

尝试这个

```
KeyguardManager keyguardManager = (KeyguardManager)getSystemService(Activity.KEYGUARD_SERVICE); 
KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE); 
```

对于锁定，

```
lock.reenableKeyguard(); 
```

和禁用锁定，

```
lock.disableKeyguard() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T09:33:21.647

你想在按下按钮后显示锁屏吗？
如果你想要这个，我会帮你的。
我试过这个，终于可以了。首先，按钮的 onClickEvent 正在休眠。
之后，您尝试打开设备的屏幕。

第一的，

```
DevicePolicyManager dpm = ( DevicePolicyManager )getSystemService( DEVICE_POLICY_SERVICE ); 
dpm.lockNow(); 
```

此代码使您的设备进入睡眠状态以锁定。
后，

```
wake = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP | PowerManager.ON_AFTER_RELEASE, "wakeLock");
wake.acquire();
wake.release(); 
```

此代码使您的设备打开屏幕。
这个链接可以帮助你。
[如何调用android默认的LockScreen？](https://stackoverflow.com/questions/22191334/how-to-call-android-default-lockscreen)
你可以试试！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T07:18:07.187

最后，我可以通过调用 KeyguardStatusViewManager 中的 recreateMe() 回调函数来调用 LockScreen

> mCallback.recreateMe(null);

# jsp - 我想下载一个带有 jsp 的示例文本文件

> ID：13852746
> 
> 赞同：-2
> 
> 时间：2012-12-13T04:03:29.730
> 
> 标签：jsp, struts-1

我有一个jsp页面，用户可以通过文件上传他的详细信息。但我需要一个示例格式来向他展示他必须如何将数据输入文件。并且该示例文件必须附加在 jsp 中，所以在下载时他会知道他的上传文件应该是怎样的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:17:18.433

您可以简单地使用标签并发布指向示例文件的链接。

```
<a href="/samples/uploadlikethis.txt">Sample Document</a> 
```

# jquery - 在jQuery中获取元素的宽度作为浮点数

> ID：13852747
> 
> 赞同：3
> 
> 时间：2012-12-13T04:03:41.473
> 
> 标签：jquery, html, css

我一直在寻找一种方法来获取不圆角的元素的宽度。想要这个的原因是我有几个元素浮动到左边显示内联块，我试图自动调整它们中的文本，以便它们用完容器 div 的整个宽度。我这样做是这样的：

1.  选择一个小的文本大小，例如 1
2.  制作所有大小的文本
3.  将所有浮动元素的宽度相加
4.  如果它小于容器的宽度，则将字体大小增加一个小值
5.  重复 2-4 直到达到最大尺寸

问题是总是有剩余的空间没有被使用。我相信这是因为当我将字体大小增加少量（即 0.01）以获得准确的大小时。元素的宽度不会改变，因为它是向下舍入的。我可以继续增加，直到它决定四舍五入然后总宽度超过限制时它们才会改变。这是一个显示我在说什么的 JSFiddle：

[http://jsfiddle.net/Pkws3/](http://jsfiddle.net/Pkws3/)

javascript 可能有点混乱，但基本上是为了节省时间，它从字体大小的大增量开始，然后当它达到目标大小时，它会使增量更小以更准确。

我试过使用：

```
$(this).width()
parseFloat($(this).css("width"))
window.getComputedStyle 
```

但它们似乎都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T20:22:43.130

This worked for me:

```
$(this)[0].getBoundingClientRect().width 
```

From ssorallen: [https://stackoverflow.com/a/18341704/299408](https://stackoverflow.com/a/18341704/299408)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T05:27:29.433

如果要将浮点数转换为 while 数，则可以像这样修剪小数：`$(this).width().toFixed(0)`

或者，您可以通过将不同的数字传递给`toFixed`.

# c# - 如果目录中已存在文件夹，如何增加文件夹编号

> ID：13852750
> 
> 赞同：1
> 
> 时间：2012-12-13T04:04:02.863
> 
> 标签：c#

前任。如果我创建了一个文件夹名称为 IMG10001 的文件夹，但它已经存在于目标目录中。下面的代码会将文件夹名称设为 IMG10001-1，但如果目标目录中已存在 IMG10001，我希望将文件夹名称增加到 IMG10002。

```
string destinDir = dirPath + "\\" + this.Batch.BatchName;
int x = 0;
if (Directory.Exists(destinDir))
{
    do
    {
        x++;
        destinDir = dirPath + "\\" + this.Batch.BatchName + "-" + x.ToString();
    } while (Directory.Exists(destinDir));
}    
System.IO.Directory.Move(root,destinDir); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:16:49.680

```
//regular expression will work
Regex reg = new Regex("IMG(\\d+)$");
Match m = reg.match(this.Batch.BatchName);
int num = 10001;
if(m.success){
    int.tryParse(m.Groups[1].value,out num);
}
Return string.format("IMG{0}",num); 
```

我只是在输入框里写了这些代码，没试过。但我认为它应该工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:10:02.780

假设 BatchName 始终以“IMG”开头，您可以将数字从文件中拆分出来。为确保您获得最高编号，请遍历所有文件并存储找到的最高编号。

找到最高数字后，将其增加 1 并重建文件名（“IMG”+ newNumber）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T04:14:17.073

您可以使用从字符串中提取整数部分`Regex`并将其递增为

```
string YourString = "IMG10001";
int IntegerPart = Convert.ToInt16(Regex.Match(s, "\\d+").ToString());
IntegerPart++; 
```

# python - gevent + gunicorn 是否可扩展且稳定地用于生产用途？

> ID：13852752
> 
> 赞同：7
> 
> 时间：2012-12-13T04:04:27.403
> 
> 标签：python, webserver, tornado, gevent, gunicorn

我一直在研究提供可扩展性的 Python Web 服务器，并决定使用 Tornado（由 Facebook FriendFeed 使用）或 Gevent。由于我对此很陌生，因此我依靠[Python Web 服务器的基准测试](http://nichol.as/benchmark-of-python-web-servers)来将 Tornado 和 Gevent 列入候选名单。此外，经过进一步研究，我发现：

*   Gevent 不是独立的 Web 服务器，我们需要使用 libevent 或 gunicorn 作为 Web 服务器。
*   libevent 有其[缺陷](http://gevent.org/servers.html)，例如不支持 SSL、流、保持活动和 websockets。
*   没有可用的基准测试结果，我可以找到哪些记录了 gevent 和 gunicorn 一起使用的性能。
*   gevent的作者本人已经推荐大家使用[gevent + gunicorn](https://stackoverflow.com/questions/7855343/run-web-app-with-gevent)进行实际部署。

我的要求：

*   一个高度可扩展的异步 python web 服务器。
*   包括 SSL 支持。

我特别倾向于 gevent，因为它基于[greenlet](http://greenlet.readthedocs.org/en/latest/)的方法。我只是想要一些确凿的事实来证明 gunicorn + gevent 是一个不错的选择，并且与 Tornado 具有高度可扩展性。或者是否有任何其他符合我要求的 python web 服务器？

请指出我正确的方向。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-13T06:10:38.363

在撰写本文时，Gunicorn 处于**测试阶段**（0.16 版），而 Gevent 有一个1.0的**候选发布版（** [Google Groups 上的公告](https://groups.google.com/forum/#!topic/gevent/hi2dKM66UHI/discussion)），因此预期 API 的变化可能是合理的（对于 Gevent 而言则较少）也就是说，只要当您跟踪邮件列表（此处为：[gunicorn](http://gunicorn.org/index.html#community)，[gevent](https://groups.google.com/forum/#!forum/gevent)）以查找可能破坏您的应用程序的更改时，您应该可以很好地进行生产部署

Gunicorn+Gevent 是异步 python web 服务器的不错选择。您应该执行自己的测试以将其与 Tornado 进行比较。公开可用的基准测试可能会产生误导，因为您的应用程序可能不像那些经过基准测试的那样运行。

对于 SSL 支持，[Gunicorn](http://docs.gunicorn.org/en/latest/deploy.html)和[Tornado](http://www.tornadoweb.org/documentation/overview.html#running-tornado-in-production)都建议您在反向代理（如[nginx](http://wiki.nginx.org/HttpProxyModule) ）后面运行它们。在反向代理后面运行它们的其他优点包括改进对[慢速客户端](https://serverfault.com/questions/220046/why-is-setting-nginx-as-a-reverse-proxy-a-good-idea)和错误 HTTP 请求的处理

# ruby-on-rails - 为什么我的 `ri` 缺少某些内置库的文档？

> ID：13852755
> 
> 赞同：1
> 
> 时间：2012-12-13T04:04:37.280
> 
> 标签：ruby-on-rails, ruby, rvm, ri

> **可能重复：**
> [在尝试 ri String#upcase Ruby 时一无所知](https://stackoverflow.com/questions/6625631/nothing-known-about-when-trying-ri-stringupcase-ruby)

版本信息如下所示：

```
 Hanfeis-MacBook-Pro-2:ruby ad9075$ rvm -v

 rvm 1.17.0 (stable) by Wayne E. Seguin <wayneeseguin@gmail.com>, Michal Papis <mpapis@gmail.com> [https://rvm.io/]

Hanfeis-MacBook-Pro-2:ruby ad9075$ ruby -v
ruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-darwin12.2.0]
Hanfeis-MacBook-Pro-2:ruby ad9075$ ri -v
ri 3.12
Hanfeis-MacBook-Pro-2:ruby ad9075$ ri Math
Nothing known about Math 
```

我试着做`gem rdoc --all`，它给出了一些`NOTE`，在我执行这个命令后，ri 仍然找不到这些库。

```
Hanfeis-MacBook-Pro-2:7w7l ad9075$ gem rdoc --all
NOTE: Gem::SourceIndex.from_installed_gems is deprecated with no replacement. It will be removed on or after 2011-10-01.
Gem::SourceIndex.from_installed_gems called from /Users/ad9075/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/commands/rdoc_command.rb:58.
NOTE: Gem::SourceIndex.installed_spec_directories is deprecated, use Specification.dirs. It will be removed on or after 2011-11-01.
Gem::SourceIndex.installed_spec_directories called from /Users/ad9075/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:47.
NOTE: Gem::SourceIndex.from_gems_in is deprecated with no replacement. It will be removed on or after 2011-10-01. 
```

从 /Users/ad9075/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/source_index.rb:47 调用的 Gem::SourceIndex.from_gems_in。

当我尝试`ri Integer`时，它不是返回内置的文档`Integer`，而是返回我的结果，如下所示：

```
= Integer < Object

(from gem activesupport-3.2.9)
------------------------------------------------------------------------------

------------------------------------------------------------------------------
= Instance methods:

  month, months, multiple_of?, ordinalize, year, years 
```

我认为问题可能是在我使用 rvm 切换到新版本的 ruby​​ 之后。**ri**配置不好，找不到内置函数和类的路径。有谁知道如何解决这个问题？

# c++ - 如何实现纯虚拟析构函数？

> ID：13852761
> 
> 赞同：0
> 
> 时间：2012-12-13T04:05:11.367
> 
> 标签：c++, abstract-class, instantiation, pure-virtual

这是代码的格式：

```
class C
{
public:
    C();
    virtual ~C() = 0;
};

class D : public C
{
public:
    D();
    ~D();
};

C::C(){
}

C::~C(){
}

D::D(){
}

D::~D(){
}

int main(){
    C *c = new C();
    D *d = new D();
    return 0;
} 
```

当我尝试实例化时`c`，出现以下错误：

```
1>c:\main.cpp(59): error C2259: 'C' : cannot instantiate abstract class 
```

我知道我不能调用虚拟析构函数，但是在概念上有一些我不知道的东西。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T04:08:46.630

您无法实例化`C`，因为您已明确表示它的析构函数未定义。

你可以这样做：

```
class C
{
public:
    C();
    virtual ~C() {}
}; 
```

反而。

`C`只要您不尝试实例化它，您就可以完全“按原样”保留它（即您只创建`D`s，但您可以将它们作为`C`s.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T04:07:54.523

“=0”表示您将此方法定义为纯虚拟方法。如果一个类包含任何纯虚拟方法，则该类是纯虚拟的。您不能实例化纯虚拟类，因为没有纯虚拟方法的实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T04:12:58.693

C 类在 C++ 中调用`abstract class`，但无法初始化。

> §10.4/2 抽象类 抽象类是只能用作某个其他类的基类的类；抽象类的任何对象都不能被创建，除非是从它派生的类的子对象。如果一个类至少有一个纯虚函数，那么它就是抽象的。

更改`C *c = new C();`为`C *c = new D();`应该工作。

或者您可以通过删除 C 类非抽象类`=0`

```
class C{
public:
  C() {}
  virtual ~C() {}
};

C* c = new C();  // this is ok 
```

# php - 路由到控制器

> ID：13852764
> 
> 赞同：1
> 
> 时间：2012-12-13T04:05:36.373
> 
> 标签：php, mysql, codeigniter

我有一个关于在 Codeigniter 中配置路由的基本问题。在我的应用程序中，我可以`$route['default_controller'] = "welcome";`完美地通过。我也可以使用它来路由到与欢迎控制器不同的控制器。但是，它不允许我通过除 default_controller 之外的任何其他路由表达式进行路由。

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

$route['test'] = "welcome";
$route['default_controller'] = "welcome";
$route['404_override'] = ''; 
```

所以正如我已经提到的，如果我的 URL 路径是 localhost/myproject ，我需要欢迎控制器，但它不会让我使用 localhost/myproject/test 导航到同一个控制器。我希望你明白我的问题。

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:10:03.717

确保你的`Welcome`控制器中有一个 index 方法来接受你的路由。

Codeigniter 也会自动处理许多路由。所以如果你去`localhost/myproject/test`它将去你的测试方法`default_controller`。因此，删除该测试路线并添加测试方法将为您解决此问题。

```
class Welcome extends CI_Controller
{ 
    public function __construct()
    {
    }

    public function index()
    {
    }

    public function test()
    {
        echo 'test method';
    }
} 
```

# algorithm - 是否有一种有效的算法以既避免冲突又允许偏见的方式分配资源？

> ID：13852767
> 
> 赞同：3
> 
> 时间：2012-12-13T04:06:08.917
> 
> 标签：algorithm

## 背景

* * *

（如果您只关心算法，请跳过此步骤）

在我工作的大学里，我们系最大的麻烦之一就是课堂安排。出于说明目的和列出问题的范围，我们现在进行调度的方式如下：

1.  教授给我们列出了他们正在教授的课程以及他们希望教授的时间段，按优先级排序（最想要到最不想要）。
2.  行政部门向我们提供了我们可以分配的房间列表以及这些房间可供我们部门使用的时间。
3.  我们开始将教授分配到房间，试图（起初）考虑到各个教授的偏好。
4.  不可避免地，冲突出现了，教授们开始要求改变，计划在 30 号教授左右的某个地方分崩离析，此时我们基本上开始分配房间，只要我们能把它们放在哪里，到处都是皱巴巴的纸片，没有人高兴。（如果你想知道为什么你的课是在星期四早上 9.30 上课，但每隔一天下午 4 点上课，现在你知道了）

我被要求悄悄地调查软件是否可以更优化地做到这一点。

* * *

## 实际问题

是否有一种算法可以有效地调度一组资源，以满足以下标准：

*   该算法绝不能同时将两名教授分配到同一个房间。
*   直到每个教授都被分配了一个房间/时间，该任务才完成。
*   该算法不必担心有太多教授来满足可用时隙的数量。（我们的资金并不*充足*。）
*   该算法应尽可能尊重个别教授的调度偏好。

我觉得我不能成为第一个问这个的人。有没有一种有效的算法，或者这种问题只能被暴力破解？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:01:14.780

一段时间以来，已经有一些关于时间表和调度问题的论文。对“时间表包”这两个词的网络搜索会出现商业包和其他包。

我知道一个问题领域，尽管人们曾多次尝试寻求复杂的解决方案，但最终还是编写了非常基本的程序来实现临时解决方案——在这个领域没有明显的机构学习迹象。这样做的原因是用户需要了解程序做出决定的原因，特别是如果它未能解决问题并且他们需要放松约束。

听起来您的特定问题 - 如果它像起初听起来一样简单 - 可以通过使用[http://en.wikipedia.org/wiki/Assignment_problem](http://en.wikipedia.org/wiki/Assignment_problem)来解决，您可以在其中将特定课程分配给特定的房间时间段而不是代理任务。

一个程序或算法可能会受到其输入中约束的相对顺序的影响，尤其是当它遇到两个解决方案同样好的情况时。我将被包括来检查这一点，如果是这样，在将输入呈现给程序或算法之前随机重新排序输入，以尝试至少将偏见转化为随机运气。

# c++ - 错误 - 根据 g++ 未声明的继承类字段

> ID：13852772
> 
> 赞同：0
> 
> 时间：2012-12-13T04:06:52.967
> 
> 标签：c++, templates, inheritance, compiler-errors

我有一个具有以下逻辑的代码。g++ 给了我没有在我的 iterator2 中声明 n 的错误。有什么问题？

```
template <typename T> class List{
    template <typename TT> class Node;
    Node<T> *head;
    /* (...) */
    template <bool D> class iterator1{
        protected: Node<T> n;
        public: iterator1( Node<T> *nn ) { n = nn }
        /* (...) */
    };
    template <bool D> class iterator2 : public iterator1<D>{
        public:
        iterator2( Node<T> *nn ) : iterator1<D>( nn ) {}
        void fun( Node<T> *nn ) { n = nn; }
        /* (...) */
    };
}; 
```

编辑 ：

我附上了实际的头文件。iterator1 将是 iterable_frame 和 iterator2 - switchable_frame。

```
#ifndef LST_H
#define LST_H

template <typename T>
class List {
    public:
    template <typename TT> class Node;
    private:
    Node<T> *head; 
    public:
    List() { head = new Node<T>; }
    ~List() { empty_list(); delete head; }
    List( const List &l );

    inline bool is_empty() const { return head->next[0] == head; }
    void empty_list();

    template <bool DIM> class iterable_frame {
        protected:
        Node<T> *head; 
        Node<T> **caret;
        public:
        iterable_frame( const List &l ) { head = *(caret = &l.head); }
        iterable_frame( const iterable_frame &i ) { head = *(caret = i.caret); }
        ~iterable_frame() {}
    /* (...) - a few methods follow */
        template <bool _DIM> friend class supervised_frame;
    };
    template <bool DIM> class switchable_frame : public iterable_frame<DIM> {
        Node<T> *main_head;
        public:
        switchable_frame( const List& l ) : iterable_frame<DIM>(l) { main_head = head;     }
        inline bool next_frame() {
            caret = &head->next[!DIM];
            head = *caret;
            return head != main_head;
        }
    };
    template <bool DIM> class supervised_frame {
        iterable_frame<DIM> sentinels;
        iterable_frame<DIM> cells;
        public:
        supervised_frame( const List &l ) : sentinels(l), cells(l) {}
        ~supervised_frame() {}
    /* (...) - a few methods follow */
    };

    template <typename TT> class Node {
        unsigned index[2];
        TT num;
        Node<TT> *next[2];
        public:
        Node( unsigned x = 0, unsigned y = 0 ) {
            index[0]=x; index[1]=y;
            next[0] = this; next[1] = this;
        }
        Node( unsigned x, unsigned y, TT d ) {
            index[0]=x; index[1]=y;
            num=d;
            next[0] = this; next[1] = this;
        }
        Node( const Node &n ) {
            index[0] = n.index[0]; index[1] = n.index[1];
            num = n.num;
            next[0] = next[1] = this;
        }
        ~Node() {}
        friend class List;
    };
};
#include "List.cpp"

#endif 
```

确切的错误日志如下：

```
In file included from main.cpp:1:
List.h: In member function ‘bool List<T>::switchable_frame<DIM>::next_frame()’:
List.h:77: error: ‘caret’ was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:58:55.633

你可以使用`head`as`this->head`看看它是否有效？从[这个帖子](https://stackoverflow.com/questions/605497/accessing-inherited-variable-from-templated-parent-class)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:01:12.467

正确的两阶段名称查找要求在阶段 1 查找非依赖名称（即不依赖于模板参数的名称）。此时，模板化基的基类成员无法看到（因为专门化可能会产生不同的布局）。解决方法是使名称依赖。改变

```
n = nn; 
```

成为

```
this->n = nn; 
```

或者，在扩展示例中，更改

```
inline bool next_frame() {
    caret = &head->next[!DIM];
    head = *caret;
    return head != main_head;
} 
```

成为

```
inline bool next_frame() {
    this->caret = &head->next[!DIM];
    head = *this->caret;
    return head != main_head;
} 
```

# jquery - 使用 jquerymobile requirejs 和骨干不显示在 windows phone 7 Lumia

> ID：13852774
> 
> 赞同：1
> 
> 时间：2012-12-13T04:07:05.837
> 
> 标签：jquery, windows-phone-7, jquery-mobile, backbone.js, requirejs

所以我有一个使用 requirejs 主干的非常简单的两页应用程序

结构非常简单

在索引页面上调用 require

包含库的列表

然后在 jqm 路由关闭后调用路由器页面

jqmconfig

```
define(['jquery'], function($){

$(document).bind("mobileinit", function () {
    $.mobile.ajaxEnabled = false;
    $.mobile.linkBindingEnabled = false;
    $.mobile.hashListeningEnabled = false;
    $.mobile.pushStateEnabled = false;
    // Remove page from DOM when it's being replaced
    $('div[data-role="page"]').live('pagehide', function (event, ui) {
        $(event.currentTarget).remove();
    });
});
}); 
```

路由器页面

```
define(['jquery', 'underscore', 'backbone','views/home/home',
        'models/products/productCollection',
        'views/products/productTypes',   
        'jqm'], 
function($, _, Backbone,HomeView,ProductsType,ProductListView ) {

var AppRouter = Backbone.Router.extend({
    //define routes and mapping route to the function
    routes: {
        '':    'showHome',         //home view
        'home': 'showHome',        //home view as well
        'products/productTypes' : 'showProductTypes',
        'products/productList/:ID' : 'showProductList',
        'products/productList/:ID/' : 'showProduct',
        'maps/search' : 'showMapSearch',

        '*actions': 'defaultAction' 
    },

    initialize:function () {
        // Handle back button throughout the application
        $('.back').live('click', function(event) {
            window.history.back();
            return false;
        });
        this.firstPage = true;
        //this.products = new Products();
    },

    cachedProductTypes: null,
    productType : {},  //this is not adding
    products : {},  //this is not adding

    getProducts:
        function(callback)
        {
            if (this.cachedProductTypes !== null) {
                return callback(this.cachedProductTypes);
            }

            var self = this;

            $.getJSON('data/product.json',
                function(data)
                {
                    self.cachedProductTypes = data;
                    callback(data);
                }
            );
        },

    parseResponse : function(data) {

          result = { prodTypes: [], products: [] };

          var type;
          var types = data.data.productTypeList;
          var product;
          var i = types.length;
          var tmpItem;

        $(types).each(function(index, element) {

        });

        $.each(types, function(i,item){
              //create book for each item and then insert into the collection
              tmpItem={

                productID:i,
                id:item.id,
                name:item.name,
                longName:item.longName,
                ordering:item.ordering

              };
              result.prodTypes.push(tmpItem);

            });

          this.productType = result.prodTypes;
          this.products = result.products;

    },

    defaultAction: function(actions){
        this.showHome();
    },

    showHome:function(actions){
        // will render home view and navigate to homeView
        var homeView=new HomeView();
        homeView.render(); 

        this.changePage(homeView, 'fade');
    },

    showProductTypes:function(){
        var self = this;

        //show spinner
        this.getProducts(
            function(data)
            {
                 self.parseResponse(data);
                 var productTypesArray = self.productType;
                 var productList=new ProductsType(productTypesArray);
                  console.log(productTypesArray);   
                 var productListView=new ProductListView({collection:productList});

                 productListView.bind('renderCompleted:ProductsType',self.changePage,self);

                 productListView.update();
    }
        );

    },

      showMapSearch:function(){
        var self = this;

                 //run your code

    },

    changePage:function (view, transition) {
        //add the attribute 'data-role="page" ' for each view's div

        console.log("pagechanged");
        if (transition != "slidefade") {
         transition = "pop";                
        }

        view.$el.attr('data-role', 'page');   
        $('.ui-page').attr('data-role', 'page');

        //append to dom
        $('body').append(view.$el);  

        if(!this.init){   
            $.mobile.changePage($(view.el), {changeHash:false, transition: transition});

        }else{   
            this.init = false;
        }            
    }       

});

$(document).ready(function () {
console.log('App Loaded');
app = new AppRouter();
Backbone.history.start();
});

return AppRouter;
}); 
```

这适用于除 Windows 手机之外的所有设备 - 我需要让它工作

目前只显示白屏，请参见此处

[http://demo.stg.brightonconsulting.net.au/templates/tests/mobileWebsiteBbJqm/](http://demo.stg.brightonconsulting.net.au/templates/tests/mobileWebsiteBbJqm/)

# java - DefaultTableCellRenderer 支持的组件

> ID：13852778
> 
> 赞同：0
> 
> 时间：2012-12-13T04:07:40.277
> 
> 标签：java, swing

我想知道除 JCheckbox 和 JComboBox 之外的 DefaultTableCellRenderer 支持的组件...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:18:46.983

`DefaultTableCellRenderer`本身不呈现复选框或组合框。它`JTable`提供了一些基于`getColumnClass()`实现使用的默认渲染器。下面是`JTable`初始化一些作为内部类实现的默认渲染器的代码：

```
protected void createDefaultRenderers() {
    defaultRenderersByColumnClass = new UIDefaults(8, 0.75f);

    // Objects
    setLazyRenderer(Object.class,
            "javax.swing.table.DefaultTableCellRenderer$UIResource");

    // Numbers
    setLazyRenderer(Number.class, "javax.swing.JTable$NumberRenderer");

    // Doubles and Floats
    setLazyRenderer(Float.class, "javax.swing.JTable$DoubleRenderer");
    setLazyRenderer(Double.class, "javax.swing.JTable$DoubleRenderer");

    // Dates
    setLazyRenderer(Date.class, "javax.swing.JTable$DateRenderer");

    // Icons and ImageIcons
    setLazyRenderer(Icon.class, "javax.swing.JTable$IconRenderer");
    setLazyRenderer(ImageIcon.class, "javax.swing.JTable$IconRenderer");

    // Booleans
    setLazyRenderer(Boolean.class, "javax.swing.JTable$BooleanRenderer");
} 
```

然后将初始化的`defaultRenderersByColumnClass`哈希表用于`getDefaultRenderer()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:05:18.957

我不确定我是否正确理解了您的问题，但是如果您想`JTextField`在单元格中插入一些组件（例如）`JTable`，您可以创建一个自定义渲染器，例如：

```
public class CustomTableCellRenderer extends DefaultTableCellRenderer 
{
//.....
  public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
   //create a component according to arguments recieved, and return
   //e.g. in simplest terms
   return new JTextField();
  } 
```

`setDefaultRenderer()`然后您可以使用每列的方法在表中使用该渲染器

# java - Java - DocumentBuilder 在创建时抛出异常

> ID：13852779
> 
> 赞同：0
> 
> 时间：2012-12-13T04:07:43.187
> 
> 标签：java, xml, parsing, dom

在 Eclipse 中调试此行时出现“XMLEntityScanner$(Throwable)”错误： **DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();**

这是完整的代码：

```
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
dbFactory.setValidating(true);
dbFactory.setIgnoringElementContentWhitespace(true);
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
Document doc = dBuilder.parse(products); // load xml file
doc.getDocumentElement().normalize(); 
```

我不知道为什么我会得到这个。我正在使用本教程作为参考。

[http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-dom-parser/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:50:39.313

事实证明这根本不是错误，我只是不熟悉 Eclipse。在调试过程中找不到函数的来源只是一个错误。

# android - Android制作imageview只要textview

> ID：13852780
> 
> 赞同：0
> 
> 时间：2012-12-13T04:07:46.300
> 
> 标签：android, android-layout

我想让我的文字中风。我使用自定义罢工线图像。到目前为止，我这样做了：

```
<RelativeLayout
    android:id="@+id/title_container"
    android:layout_centerVertical="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#FFFF0000">

    <TextView
        android:id="@+id/title"
        android:layout_centerVertical="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:duplicateParentState="true"
        android:singleLine="true"
        android:ellipsize="end"
        android:textColor="@color/title_text"
        android:textSize="18dp"
        android:background="#FF00FF00"
         />

    <ImageView
        android:id="@+id/title_strike_through"
        android:contentDescription="@null"
        android:layout_centerVertical="true"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:duplicateParentState="true"
        android:src="@drawable/title_strike"/>

</RelativeLayout> 
```

现在的问题是 title_container 布局跨越了窗口的整个宽度，因此 title_strike_through 也延伸了。它不应该！我只需要 title_strike_through 覆盖文本。我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T07:05:56.630

在 imageview 中添加以下属性，使其等于 textview 的宽度：

```
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignLeft="@id/title"
android:layout_alignRight="@id/title" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:05:06.617

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/title_container"
    android:layout_centerVertical="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#FFFF0000">

    <TextView
        android:id="@+id/title"
        android:layout_centerVertical="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:duplicateParentState="true"
        android:singleLine="true"
        android:ellipsize="end"
        android:textColor="@color/titleText"
        android:textSize="18dp"
        android:background="#FF00FF00"
         />

    <ImageView
        android:id="@+id/title_strike_through"
        android:contentDescription="@null"
        android:layout_centerVertical="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:duplicateParentState="true"
        android:src="@drawable/ic_launcher"/>

</RelativeLayout> 
```

这是你想要的吗请告诉我..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T04:29:45.060

以编程方式将 的宽度设置为`ImageView`的宽度`TextView`。虽然我不明白为什么布局设置为包装内容时会跨越整个宽度......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T04:41:12.260

如果您希望它占用特定数量的空间，那么您应该设置该`layout_width`属性。如果你想让它占据屏幕的百分比，那么你应该设置`layout_weight`属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T04:48:34.367

尝试这个..

```
<RelativeLayout
    android:id="@+id/title_container"
    android:layout_centerVertical="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#FFFF0000">
<LinearLayout
 android:layout_centerVertical="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
android:duplicateParentState="true">

<TextView
        android:id="@+id/title"

        android:layout_width="match_parent"
        android:layout_height="wrap_content"

        android:singleLine="true"
        android:ellipsize="end"
        android:textColor="@color/title_text"
        android:textSize="18dp"
        android:background="#FF00FF00"
         />

    <ImageView
        android:id="@+id/title_strike_through"
        android:contentDescription="@null"

        android:layout_width="match_parent"
        android:layout_height="match_parent"

        android:src="@drawable/title_strike"/>
</LinearLayout>

</RelativeLayout> 
```

# excel - 在 Excel 工作表上使用 VBscript 设置 MINUS 操作

> ID：13852781
> 
> 赞同：1
> 
> 时间：2012-12-13T04:07:47.210
> 
> 标签：excel, vbscript, vba

是否可以使用 vbscript 在 Excel 表单上实现 Set 操作？说 A - A'=A1

假设我确实有一个矩阵 A，如下所示：

```
 PID  T1   T1Sdate  T1Assign  T2   T2Sdate  T2Assign   T3   T3Sdate  T3Assign   T4    T4Sdate  T4Assign

 10   A      10/11    Ram      B      2/5     Hari     X     03/03     Peter     L      04/09     Mikel

 20   A      10/11    Kajal    T      7/5     Lisa     X     03/03     Peter     L      04/07     Sila

 25   Y      10/11    Sila     T      7/5     Lisa     X     02/03     Peter     L      17/07     Mikel 
```

从上面我得到了下面的矩阵A'：

```
 PID  T1   T1Sdate  T1Assign  T2   T2Sdate  T2Assign   T3   T3Sdate  T3Assign   T4    T4Sdate  T4Assign

 10   A      10/11    Ram                              X     03/03     Peter     L      04/09     Mikel

 20   A      10/11    Kajal    T      7/5     Lisa    

 25                                                    X     02/03     Peter     L      17/07     Mikel 
```

现在我可以使用 A - A' 得到输出矩阵吗

```
 PID  T1   T1Sdate  T1Assign  T2   T2Sdate  T2Assign   T3   T3Sdate  T3Assign   T4    T4Sdate  T4Assign

 10                            B      2/5     Hari    

 20                                                   X     03/03     Peter     L      04/07        Sila

 25   Y      10/11    Sila     T      7/5     Lisa 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:36:40.790

编辑：将 VBA 解决方案转换为 VBS 解决方案

```
Dim xlApp
Dim xlBook
Set xlApp = CreateObject("Excel.Application")
xlApp.Visible = False
xlApp.EnableEvents = False
xlApp.ScreenUpdating = False

set xlBook = xlApp.Workbooks.Open("C:\Users\wangCL\Desktop\sample.xlsm")

Dim rangeA
Dim rangeB
Dim rangeC
Set rangeA = xlBook.Worksheets("Sheet1").Range("A1:E1")
Set rangeB = xlBook.Worksheets("Sheet2").Range("A1:E1")
Set rangeC = xlBook.Worksheets("Sheet3").Range("A1:E1")
Dim valueTypeA
Dim valueTypeB
If rangeA.Rows.Count <> rangeB.Rows.Count Or _
rangeA.Columns.Count <> rangeB.Columns.Count Or _
rangeA.Rows.Count <> rangeC.Rows.Count Or _
rangeA.Columns.Count <> rangeC.Columns.Count Then
    MsgBox "Please input 3 ranges with identical size"
End If
rangeC.clearContents
For i = 1 To rangeA.Rows.Count
    For j = 1 To rangeA.Columns.Count
        valueTypeA = TypeName(rangeA.Cells(i, j).Value)
        valueTypeB = TypeName(rangeB.Cells(i, j).Value)
        If valueTypeA = valueTypeB Then
            If valueTypeA = "Integer" Or valueTypeA = "Double" Or valueTypeA = "Long" Or valueTypeA = "Single" Then
                rangeC.Cells(i, j).Value = rangeA.Cells(i, j).Value - rangeB.Cells(i, j).Value ' just numeric minus
            ElseIf valueTypeA = "String" Then
                ' implement your own String comparsion function here
                ' I provide a simple one here
                ' matching the identical string
                If rangeA.Cells(i, j).Value = rangeB.Cells(i, j).Value Then
                    rangeC.Cells(i, j).Value = ""
                Else
                    'handle if the 2 string not match case here
                    rangeC.Cells(i, j).Value = rangeA.Cells(i, j).Value
                End If
            ElseIf valueTypeA = "Date" Then
                 ' implement your own Date comparsion function here
                ' I provide a simple one here
                ' matching the identical date
                If rangeA.Cells(i, j).Value = rangeB.Cells(i, j).Value Then
                    rangeC.Cells(i, j).Value = ""
                Else
                    'handle if the 2 string not match case here
                    rangeC.Cells(i, j).Value = rangeA.Cells(i, j).Value
                End If
            End If
        Else
            ' handle if the 2 types are different
        End If
    Next
Next

xlBook.save
xlApp.Quit
set xlBook = nothing
set xlApp = nothing

msgbox "Done" 
```

VBA解决方案

```
' Assume the range are M*N matrix
Sub MinusOperation()
Dim rangeA As Range
Dim rangeB As Range
Dim rangeC As Range ' output range
Set rangeA = ThisWorkbook.Worksheets("Sheet1").Range("A1:E1")
Set rangeB = ThisWorkbook.Worksheets("Sheet2").Range("A1:E1")
Set rangeC = ThisWorkbook.Worksheets("Sheet3").Range("A1:E1")
Dim valueTypeA As String
Dim valueTypeB As String
If rangeA.Rows.Count <> rangeB.Rows.Count Or _
rangeA.Columns.Count <> rangeB.Columns.Count Or _
rangeA.Rows.Count <> rangeC.Rows.Count Or _
rangeA.Columns.Count <> rangeC.Columns.Count Then
    MsgBox "Please input 3 ranges with identical size"
    exit sub
End If

For i = 1 To rangeA.Rows.Count
    For j = 1 To rangeA.Columns.Count
        valueTypeA = TypeName(rangeA.Cells(i, j).Value)
        valueTypeB = TypeName(rangeB.Cells(i, j).Value)
        If valueTypeA = valueTypeB Then
            If valueTypeA = "Integer" Or valueTypeA = "Double" Or valueTypeA = "Long" Or valueTypeA = "Single" Then
                rangeC.Cells(i, j).Value = rangeA.Cells(i, j).Value - rangeB.Cells(i, j).Value ' just numeric minus
            ElseIf valueTypeA = "String" Then
                ' implement your own String comparsion function here
                ' I provide a simple one here
                ' matching the identical string
                If rangeA.Cells(i, j).Value = rangeB.Cells(i, j).Value Then
                    rangeC.Cells(i, j).Value = ""
                Else
                    'handle if the 2 string not match case here
                    rangeC.Cells(i, j).Value = rangeA.Cells(i, j).Value
                End If
            ElseIf valueTypeA = "Date" Then
                 ' implement your own Date comparsion function here
                ' I provide a simple one here
                ' matching the identical date
                If rangeA.Cells(i, j).Value = rangeB.Cells(i, j).Value Then
                    rangeC.Cells(i, j).Value = ""
                Else
                    'handle if the 2 string not match case here
                    rangeC.Cells(i, j).Value = rangeA.Cells(i, j).Value
                End If
            End If
        Else
            ' handle if the 2 types are different
        End If
    Next j
Next i
End Sub 
```

# php - 如何在没有重新加载页面的情况下在 wordpress 中进行分页

> ID：13852782
> 
> 赞同：0
> 
> 时间：2012-12-13T04:07:46.720
> 
> 标签：php, javascript, jquery, wordpress, pagination

如何在 wordpress 中不重新加载页面进行分页。我使用以下代码进行分页，但这里的页面是为每个分页重新加载的。我该怎么做才能停止 realod 页面???请建议我。

```
<?php
                       $page = (get_query_var('page')) ? get_query_var('page') : 1     

                       $limit=10;
                       $offset = ( $page - 1 ) * $limit;    
                      $data = $wpdb->get_results("select * from wp_products order by product_id  $sort_by
                                          LIMIT $offset,$limit ");
                 $total=$wpdb->get_results("select * from wp_products ");
            $pages = COUNT($total);
            $pages = ceil($pages / $limit);
            $querystring = "";
            foreach ($_GET as $key => $value) {
                if ($key != "page") $querystring .= "$key=$value&amp;";
            }

            // Pagination
            ?>

     <div class="pagination">
               <?php
              if( $pages > 1)
              {
                $range=1;
                $showitems = ($range * 2)+1;  
                $page1=$page;
                $prev=$page1-1;
                if($page > 1)
                {
                    echo "<a  class=\"page gradient\" ";
                    echo "href=\"?{$querystring}page=$prev";
                    echo "\">Previous</a> ";
                }
                for ($i = 1; $i <= $pages; $i++)
                   {
                        if (1 != $pages &&( !($i >= $page+$range+1 || $i <= $page-$range-1) || $pages <= $showitems ))
                             {
                                if($i == $page) 
                                { 
                                    echo  "<span class=\" page active\">".$i."</span>";
                                }
                                else
                                { 

                                echo "<a class=\"page gradient\"";
                                echo "href=\"?{$querystring}page=$i";
                                echo "\">$i</a> ";
                                }

                             }
                        }
                        if($page!=$pages)
                        {
                        if($showitems < $pages)
                            {
                                echo "..... ";
                            }
                            $page1=$page;
                            $next=$page1+1;
                            echo "<a " . ($i == $page ? "class=\"page active\" " : "class=\"page gradient\"");
                            echo "href=\"?{$querystring}page=$next";
                            echo "\">Next</a> ";
                        }
              }
                ?>                                         
                </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T04:50:06.367

只需一次获取所有页面，然后在同一页面上使用 jquery datatable js 进行分页，在这种情况下页面不会重新加载。数据表示例在这里。

[http://datatables.net/examples/basic_init/alt_pagination.html](http://datatables.net/examples/basic_init/alt_pagination.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:14:32.917

尝试这样的事情怎么样：

```
$('.page').click(function(e) {
    e.preventDefault();
    $.ajax({url: $(this).prop('href'), success: function(d) {
        var page = $(d).find('.pagination').html();
        $('.pagination').html(page);
    }});
}); 
```

这里使用jQuery禁用下一个链接的正常点击事件，抓取下一个链接的href，向下一页发出AJAX请求，保存下一个页面分页div的html，并将当前页面的分页div替换为新的一个。

# wordpress - 为什么我的页面仍然不安全？

> ID：13852787
> 
> 赞同：-1
> 
> 时间：2012-12-13T04:08:01.763
> 
> 标签：wordpress, ssl

试图让这个该死的 SSL 证书与 wordpress 一起工作。

所以这是我正在处理的页面：

[https://www.texashredderclassic.com/registration](https://www.texasshredderclassic.com/registration)

如您所见，有 https，所以它似乎应该是安全的。但是表格（我使用的是重力表格）说它不安全。显然，我们需要它消失。

任何帮助将不胜感激。我真的在这方面不合群，而且日程安排很紧！万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:06:22.307

你做了什么？您是如何获得 HTTPS 的？你为 WordPress 在 HTTPS 上工作做了什么？

同样，我不确定你做了什么，但我会推荐这个插件。它的评价很高。

[http://wordpress.org/extend/plugins/wordpress-https/](http://wordpress.org/extend/plugins/wordpress-https/) WordPress HTTPS 旨在成为在 WordPress 网站上使用 SSL 的一体化解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:14:44.253

为了帮助尝试找出浏览器抛出安全警告的原因，它可能会节省一些使用该站点的时间；

[http://www.whynopadlock.com](http://www.whynopadlock.com)

# php - 无法获得 Facebook 扩展工作权限

> ID：13852789
> 
> 赞同：1
> 
> 时间：2012-12-13T04:08:10.860
> 
> 标签：php, facebook, wordpress, sdk, buddypress

我想获得在用户的 Facebook 墙上发帖并查看他们的赞的权限。我正在使用标准的 PHP SDK。当我登录时，它会显示正确的 Facebook 屏幕，询问这些权限，但是当我确认并重定向回我的网站时，它只有“状态”和“代码”作为 GET 参数，它仍然要求我登录。这是我正在使用的代码：

```
require 'fbsdk/src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => 'xxxx',
  'secret' => 'xxxx',
));

// Get User ID
$user = $facebook->getUser();

if ($user) {
    echo 'You have successfully registered your Facebook account.';

} else {
    $params = array('scope'=>'publish_stream,user_likes');
    $loginUrl = $facebook->getLoginUrl($params);
    echo '<a href="' . $loginUrl . '">Login with Facebook</a>';
} 
```

我将它放入带有 php 模块的 Wordpress/Buddypress 页面中，它似乎有一些冲突，因为它在它自己的页面上运行良好。

# android - Android webview，android viewpager中的缩放问题

> ID：13852793
> 
> 赞同：2
> 
> 时间：2012-12-13T04:08:42.747
> 
> 标签：android, webview

我正在尝试在视图寻呼机中进行 webview 捏缩放，它工作正常，但问题是在视图寻呼机中某些设备在缩放期间没有调整字体。它被急剧削减。在我看来寻呼机总共三个 webview.so 可能吗？怎么做？

```
if (position == 2) {

            RelativeLayout rltvWebView = (RelativeLayout) inflater.inflate(
                    R.layout.htmlcontent, null);
            wv = (WebView) rltvWebView.findViewById(R.id.webView);
            data = "<html><link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" />"
                    + "<meta name=\"viewport\" content=\"width=device-width; initial-scale=1.0; min-scale=1.0; max-scale=3.0; \" />"
                    + "<body>"
                    + "<div style=\"text-align:center;width:100&#37;\">"
                    + devineInspirationInfo.getDITitle().toString()
                    + "</div> <br/><div>"
                    + devineInspirationInfo.getDIDesc().toString()
                    + "</div><br/><br/><br/><br/></body></html>";

            /*
             * wv.getSettings().getDefaultZoom();
             * wv.getSettings().setBuiltInZoomControls(true);
             */

            wv.loadDataWithBaseURL("file:///android_asset/", data,
                    "text/html", "UTF-8", null);
            wv.setBackgroundColor(Color.TRANSPARENT);
            wv.setOnTouchListener(visTouch);
            ((ViewPager) collection).addView(rltvWebView, 0);
            return rltvWebView;
        } else if (position == 3) {

            RelativeLayout rltvWebView = (RelativeLayout) inflater.inflate(
                    R.layout.htmlcontent, null);
            wv1 = (WebView) rltvWebView.findViewById(R.id.webView);

            data1 = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">"
                    + "<html><link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\" />"
                    + "<meta name=\"viewport\" content=\"width=device-width; initial-scale=1.0; min-scale=1.0; max-scale=3.0; \" />"
                    + "<body>"
                    + "<div style=\"text-align:center;width:100&#37;\">"
                    + gemsInfo.getGemsAuthor()
                    + " : "
                    + gemsInfo.getGemsTitle()
                    + "</div> <br/><div>"
                    + gemsInfo.getGemsDesc()
                    + "</div>"
                    + "<br/><br/><br/><br/></body></html>";

            wv1.loadDataWithBaseURL("file:///android_asset/", data1,
                    "text/html", "UTF-8", null);
            wv1.setBackgroundColor(Color.TRANSPARENT);
            wv1.setOnTouchListener(visTouch);
            ((ViewPager) collection).addView(rltvWebView, 0);
            return rltvWebView;
        } else if (position == 4) {
            .pagerdisable = true;
            RelativeLayout rltvWebView = (RelativeLayout) inflater.inflate(
                    R.layout.htmlcontent, null);
            wv2 = (WebView) rltvWebView.findViewById(R.id.webView);
            data2 = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">"
                    + "<html><link rel=\"stylesheet\" type=\"text/css\" href=\"gujarati.css\" />"
                    + "<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8 \">"
                    + "<meta name=\"viewport\" content=\"width=device-width; initial-scale=1.0; min-scale=1.0; max-scale=3.0;  \" />"
                    + "<body>"
                    + "<div style=\"text-align:center;width:100&#37; cursor: pointer;\">"
                    + prernaInfo.getPPTitle()
                    + "</div> <br/><div style=\"cursor: pointer;\">"
                    + prernaInfo.getPPDesc()
                    + "</div><br/><br/><br/><br/></body></html>";

            wv2.loadDataWithBaseURL("file:///android_asset/", data2,
                    "text/html", "UTF-8", null);
            wv2.setBackgroundColor(Color.TRANSPARENT);
            wv2.setOnTouchListener(visTouch);
            ((ViewPager) collection).addView(rltvWebView, 0);
            return rltvWebView;
        } 
```

**ontouch 监听器：**

```
public OnTouchListener visTouch = new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        gestureDetector.onTouchEvent(event);
        if (event.getPointerCount() > 1) {

            if (!(v == rltvList)) {
                if (v == wv) {
                    wv.getSettings().setDefaultZoom(
                            WebSettings.ZoomDensity.MEDIUM);
                    wv.getSettings().getDefaultZoom();
                    wv.getSettings().setBuiltInZoomControls(true);
                    View zwv = wv.getZoomControls();
                    // wv.setInitialScale(10);
                    zwv.setVisibility(View.GONE);
                    wv.setOnTouchListener(visTouch);
                    Log.v("log_tag", " (v == rltvList) if (v == wv)");
                } else if (v == wv1) {
                    wv.invalidate();
                    wv1.getSettings().setDefaultZoom(
                            WebSettings.ZoomDensity.MEDIUM);
                    wv1.getSettings().getDefaultZoom();
                    wv1.getSettings().setBuiltInZoomControls(true);
                    Log.v("log_tag", "(v == rltvList) else if (v == wv1)");
                } else if (v == wv2) {
                    wv1.invalidate();
                    wv2.getSettings().setDefaultZoom(
                            WebSettings.ZoomDensity.MEDIUM);
                    wv2.getSettings().getDefaultZoom();
                    wv2.getSettings().setBuiltInZoomControls(true);
                    Log.v("log_tag", "(v == rltvList) else if (v == wv2)");
                }
                if (event.getAction() == MotionEvent.ACTION_POINTER_2_UP
                        || event.getAction() == MotionEvent.ACTION_POINTER_1_UP) {

                    if (v == wv) {

                        wv.getSettings().setBuiltInZoomControls(false);
                        Log.i("wv", "" + event.getPointerCount());
                        View zwv = wv.getZoomControls();
                        zwv.setVisibility(View.GONE);
                        wv.invalidate();
                        wv.setOnTouchListener(visTouch);
                        Log.v("log_tag",
                                "event.getAction() == MotionEvent.ACTION_POINTER_2_UP if (v == wv)");

                    } else if (v == wv1) {
                        wv.invalidate();
                        wv1.getSettings().setDefaultZoom(
                                WebSettings.ZoomDensity.MEDIUM);
                        wv1.getSettings().getDefaultZoom();
                        wv1.getSettings().setBuiltInZoomControls(false);
                        Log.v("log_tag",
                                "event.getAction() == MotionEvent.ACTION_POINTER_2_UP else if (v == wv1)");
                    } else if (v == wv2) {
                        wv2.invalidate();
                        wv2.getSettings().setDefaultZoom(
                                WebSettings.ZoomDensity.MEDIUM);
                        wv2.getSettings().getDefaultZoom();
                        wv2.getSettings().setBuiltInZoomControls(false);
                        Log.v("log_tag",
                                "event.getAction() == MotionEvent.ACTION_POINTER_2_UP else if (v == wv2)");
                    }
                    return true;
                }
            }
            return false;

        } else {
            start.set(event.getX(), event.getY());
            if (event.getAction() == MotionEvent.ACTION_DOWN) {

                isMove = false;
                startpos = event.getY();
                startxpos = event.getX();
                Log.i("satsang", "Down: " + isMove);
                if (v == wv) {
                    wv.getSettings().setBuiltInZoomControls(false);
                    wv.invalidate();
                    wv.setOnTouchListener(visTouch);
                    Log.v("log_tag",
                            "event.getAction() == MotionEvent.ACTION_DOWN if(v==wv)");

                } else if (v == wv1) {
                    wv.invalidate();
                    wv1.getSettings().setDefaultZoom(
                            WebSettings.ZoomDensity.MEDIUM);
                    wv1.getSettings().getDefaultZoom();
                    wv1.getSettings().setBuiltInZoomControls(false);
                    Log.v("log_tag",
                            "event.getAction() == MotionEvent.ACTION_DOWN else if(v==wv1)");
                } else if (v == wv2) {
                    wv2.invalidate();
                    wv2.getSettings().setDefaultZoom(
                            WebSettings.ZoomDensity.MEDIUM);
                    wv2.getSettings().getDefaultZoom();
                    wv2.getSettings().setBuiltInZoomControls(false);
                    Log.v("log_tag",
                            "event.getAction() == MotionEvent.ACTION_DOWN else if(v==wv2)");
                }
            } else if (event.getAction() == MotionEvent.ACTION_UP) {
                Log.i("satsang", "Up: " + isMove);

                if (v == wv) {
                    wv.getSettings().setDefaultZoom(
                            WebSettings.ZoomDensity.MEDIUM);
                    wv.getSettings().getDefaultZoom();
                    View zwv = wv.getZoomControls();
                    zwv.setVisibility(View.GONE);
                    wv.getSettings().setBuiltInZoomControls(false);
                    Log.v("log_tag",
                            "event.getAction() == MotionEvent.ACTION_UP if(v==wv)");
                } else if (v == wv1) {
                    wv.invalidate();
                    wv1.getSettings().setDefaultZoom(
                            WebSettings.ZoomDensity.MEDIUM);
                    wv1.getSettings().getDefaultZoom();
                    wv1.getSettings().setBuiltInZoomControls(false);
                    Log.v("log_tag",
                            "event.getAction() == MotionEvent.ACTION_UP else if(v==wv1)");
                } else if (v == wv2) {
                    wv2.invalidate();
                    wv2.getSettings().setDefaultZoom(
                            WebSettings.ZoomDensity.MEDIUM);
                    wv2.getSettings().getDefaultZoom();
                    wv2.getSettings().setBuiltInZoomControls(false);
                    Log.v("log_tag",
                            "event.getAction() == MotionEvent.ACTION_UP else if(v==wv2)");
                }

                int xDiff = (int) Math.abs(event.getX() - start.x);
                int yDiff = (int) Math.abs(event.getY() - start.y);
                if (xDiff < 6 && yDiff < 6) {
                    Log.i("satsang", "Padding: " + padding);
                    if (padding < 0) {
                        padding *= -1;
                        Log.v("log_tag", "padding<0");
                    }
                    if (padding > 10) {
                        isMove = true;
                        Log.v("log_tag", "padding>10");
                        Log.i("satsang", "Down: " + isMove);
                    }
                    // awesomeAdapter.notifyDataSetChanged();
                    if (!isMove) {
                        if (footer.getVisibility() == 0) {
                            Log.v("log_tag", "footer if");
                            visibility(true);
                        } else {
                            visibility(false);
                            Log.v("log_tag", "footer else");
                        }
                    }
                    return true;
                }
            } else if (event.getAction() == MotionEvent.ACTION_MOVE) {
                current = event.getY();
                currentx = event.getX();
                Log.v("log_tag", "MotionEvent.ACTION_MOVE   " + " x  "
                        + event.getX() + " y " + event.getY());
                padding = startpos - current;
                paddingx = startxpos - currentx;
                if (paddingx < 0) {
                    paddingx = -paddingx;
                }

                Log.v("log_tag", "padding  " + paddingx + "   width  "
                        + width + " height " + height);

            }
        }
        return false;
    }
}; 
```

# android - 将手指颜料应用到我自己的视图中

> ID：13852796
> 
> 赞同：0
> 
> 时间：2012-12-13T04:08:50.920
> 
> 标签：android, canvas, paint, android-custom-view

我有一个自定义视图，我想在其中应用手指颜料。我如何实现这一目标？

我自己的视图是 210x170 像素，我想在其中进行手指绘画。

我真的很困惑如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T05:53:36.547

试试这个代码：

```
public class SignatureView extends View 
{
    private final String LOG_TAG = this.getClass().getSimpleName();

    private float mSignatureWidth = 20f; //YOU CAN CHANGE SIZE OF LINE
    private int mSignatureColor = Color.rgb(00, 119, 204); // SET RGB COLOR
    private boolean mCapturing = true;
    private Bitmap mSignature = null;
    private static final boolean GESTURE_RENDERING_ANTIALIAS = true;
    private static final boolean DITHER_FLAG = true;

    private Paint mPaint = new Paint();
    private Path mPath = new Path();

    private final Rect mInvalidRect = new Rect();

    private float mX;
    private float mY;

    private float mCurveEndX;
    private float mCurveEndY;

    private int mInvalidateExtraBorder = 10;

    public SignatureView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public SignatureView(Context context) {
        super(context);
        init();
    }

    public SignatureView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    private void init() {
        setWillNotDraw(false);

        mPaint.setAntiAlias(GESTURE_RENDERING_ANTIALIAS);
        mPaint.setColor(mSignatureColor);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(mSignatureWidth);
        mPaint.setDither(DITHER_FLAG);
        mPath.reset();
    }

    @Override
    protected void onDraw(Canvas canvas) {

        if (mSignature != null) {
            canvas.drawBitmap(mSignature, null, new Rect(0, 0, getWidth(),getHeight()), null);
        } else {
            canvas.drawPath(mPath, mPaint);
        }
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent event) {
        if (mCapturing) {
            processEvent(event);
            Log.d(VIEW_LOG_TAG, "dispatchTouchEvent");
            return true;
        } else {
            return false;
        }
    }

    private boolean processEvent(MotionEvent event) {
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touchDown(event);
            invalidate();
            return true;
        case MotionEvent.ACTION_MOVE:
            Rect rect = touchMove(event);
            if (rect != null) {
                invalidate(rect);
            }
            return true;

        case MotionEvent.ACTION_UP:
            touchUp(event, false);
            invalidate();
            return true;

        case MotionEvent.ACTION_CANCEL:
            touchUp(event, true);
            invalidate();
            return true;
        }
        return false;
    }

    private void touchUp(MotionEvent event, boolean b) {
    // TODO Auto-generated method stub
    }

    private Rect touchMove(MotionEvent event) {
        Rect areaToRefresh = null;
        final float x = event.getX();
        final float y = event.getY();
        final float previousX = mX;
        final float previousY = mY;
        areaToRefresh = mInvalidRect;
        // start with the curve end
        final int border = mInvalidateExtraBorder;
        areaToRefresh.set((int) mCurveEndX - border, (int) mCurveEndY - border,
            (int) mCurveEndX + border, (int) mCurveEndY + border);

        float cX = mCurveEndX = (x + previousX) / 2;
        float cY = mCurveEndY = (y + previousY) / 2;

        mPath.quadTo(previousX, previousY, cX, cY);

        // union with the control point of the new curve
        areaToRefresh.union((int) previousX - border, (int) previousY - border,
            (int) previousX + border, (int) previousY + border);

        // union with the end point of the new curve
        areaToRefresh.union((int) cX - border, (int) cY - border, (int) cX
            + border, (int) cY + border);
        mX = x;
        mY = y;
        return areaToRefresh;
    }

    private void touchDown(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();
        mX = x;
        mY = y;
        mPath.moveTo(x, y);

        final int border = mInvalidateExtraBorder;
        mInvalidRect.set((int) x - border, (int) y - border, (int) x + border,
            (int) y + border);

        mCurveEndX = x;
        mCurveEndY = y;
    }

    /**
     * Erases the signature.
     */
    public void clear() {
        mSignature = null;
        mPath.rewind();
        // Repaints the entire view.
        invalidate();
    }

    public boolean isCapturing() {
        return mCapturing;
    }

    public void setIsCapturing(boolean mCapturing) {
        this.mCapturing = mCapturing;
    }

    public void setSignatureBitmap(Bitmap signature) {
        mSignature = signature;
        invalidate();
    }

    public Bitmap getSignatureBitmap() {
        if (mSignature != null) {
            return mSignature;
        } else if (mPath.isEmpty()) {
            return null;
        } else {
            Bitmap bmp = Bitmap.createBitmap(getWidth(), getHeight(),
                Bitmap.Config.ARGB_8888);
            Canvas c = new Canvas(bmp);
            c.drawPath(mPath, mPaint);
            return bmp;
        }
    }

    public void setSignatureWidth(float width) {
        mSignatureWidth = width;
        mPaint.setStrokeWidth(mSignatureWidth);
        invalidate();
    }

    public float getSignatureWidth() {
        return mPaint.getStrokeWidth();
    }

    public void setSignatureColor(int color) {
        mSignatureColor = color;
    }

    /**
     * @return the byte array representing the signature as a PNG file format
     */
    public byte[] getSignaturePNG() {
        return getSignatureBytes(CompressFormat.PNG, 0);
    }

    /**
     * @param quality
     *            Hint to the compressor, 0-100\. 0 meaning compress for small
     *            size, 100 meaning compress for max quality.
     * @return the byte array representing the signature as a JPEG file format
     */
    public byte[] getSignatureJPEG(int quality) {
        return getSignatureBytes(CompressFormat.JPEG, quality);
    }

    private byte[] getSignatureBytes(CompressFormat format, int quality) {
        Log.d(LOG_TAG, "getSignatureBytes() path is empty: " + mPath.isEmpty());
        Bitmap bmp = getSignatureBitmap();
        if (bmp == null) {
            return null;
        } else {
            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            getSignatureBitmap().compress(format, quality, stream);
            return stream.toByteArray();
        }
    }
} 
```

还可以在您的 java 代码中使用此类，例如：

```
SignatureView drawView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Set full screen view
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);
    requestWindowFeature(Window.FEATURE_NO_TITLE);

    drawView = new SignatureView(this);
    setContentView(drawView);
    drawView.requestFocus();
} 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:28:12.170

我的代码侧重于`onTouch`方法。该`View`状态与缓存一起保存在其他地方`Bitmap`。触摸事件被写入持有 Bitmap 的状态对象，Bitmap 被更新，然后更新的 Bitmap 被写入`View.onDraw`. 还要注意调用，`requestDisallowInterceptTouchEvent`否则触摸事件仍会尝试滚动屏幕​​，如果屏幕当前允许滚动。ImmutablePOint 只是一个不可变的 Point 类，因为当允许更改状态的点时，我在缩放值时遇到了问题。

*hwr*是记住点和笔画的类的实例，可以撤消/重做并保持当前显示的一致位图。

```
public boolean onTouchEvent(MotionEvent event)
{
    if (event.getAction() == MotionEvent.ACTION_DOWN)
    {
        this.getParent().requestDisallowInterceptTouchEvent(true);
        this.hwr.addPoint(new ImmutablePoint((int) event.getX(), (int) event.getY()));
    }
    else if (event.getAction() == MotionEvent.ACTION_MOVE)
    {
        this.hwr.addPoint(new ImmutablePoint((int) event.getX(), (int) event.getY()));
    }
    else if (event.getAction() == MotionEvent.ACTION_UP)
    {
        this.getParent().requestDisallowInterceptTouchEvent(false);
        this.hwr.stopDrawing(new ImmutablePoint((int) event.getX(), (int) event.getY()));
        this.callback.pushStroke(this);
    }
    this.invalidate();
    return true;
} 
```

然后在绘制：

```
@Override
protected void onDraw(Canvas canvas)
{
    // should already be the same size
    canvas.drawBitmap(hwr.getDisplay(), matrix, paint);
} 
```

# performance - 具有 *same* 配置的站点比镜像副本慢...这怎么可能？

> ID：13852797
> 
> 赞同：0
> 
> 时间：2012-12-13T04:08:50.377
> 
> 标签：performance, webserver

我有这个 Drupal 站点 (ligadelconsorcista.org)，我必须将它从一台服务器移动到另一台服务器。原因是我的老主机即使它相当不错，但现在开始几个月就出现了许多短暂的停机时间，这让我发疯了。问题是我做了一个网站的镜像副本：我复制了所有文件完全相同，然后我导入了数据库。

问题是新站点的连接速度比我的旧主机慢得多！（新的是 mediatemple）我已经联系了他们的支持，他们告诉我有几个因素可以促成这一点……但这与他们的托管服务无关。

**问题是我什至不知道从哪里开始寻找问题。**

注意：新配置与我使用旧主机帐户的配置相同。今天我在 cloudflare 的 CDN 上设置了一个帐户来尝试解决这个问题。即使 CDN 配置正确（我已经问过他们的帮助台），它也不会增加任何性能改进。

我可以对此做些什么的任何线索？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:17:17.870

如果只是在新主机上添加一个静态页面，响应是慢还是快？只是想隔离问题。

而且，新旧主机的 php 和 mysql 版本有什么区别吗？

# python - 我的 python 代码无法读取新通知

> ID：13852798
> 
> 赞同：1
> 
> 时间：2012-12-13T04:08:51.110
> 
> 标签：python, facebook

我正在编写一个 python 代码，它在 facebook 上接收新通知并将“m”发送到串行端口
（arduino 连接到 PC）

在 python 监视器上，您可以写下您的电子邮件和密码以登录您的 Facebook
，如果还没有新通知，则会出现“Zzz...”。如果有新通知，屏幕上会出现“Facebook 上的新通知，升旗……”。

对于登录 facebook 并打印“Zzz...”，它工作得很好。但问题是，即使我的 facebook 上有新通知，代码在屏幕上也不会显示任何差异。

```
import mechanize
import cookielib
import serial
import sys
import time
import warnings
'VERSION 2.3 Unlike version 2.0, in this implementation: Instead of counting starting from 2 HTML tags <div class="c"> default, and'
'possible clikkare the link: clik on Clear Notifications (will not be '
'just a <div class="c">) and start counting for> 1'
'In this way, we avoid counting invitations to events or warnings as if they were birthday notifications.'
warnings.filterwarnings("ignore") 
# hiding any warning 
SERIALPORT = raw_input("Enter the serial port to which' the connected device:") 

# Set up serial port 
try:
    ser = serial.Serial(SERIALPORT, 9600)
    ser.timeout = None
except serial.SerialException:
    print "No device connected. exiting..."
    time.sleep(4)
    sys.exit()

# Alternatively you can 'go on facebook. com / notifications.php and lean to feed (using then the python library: feedparser). 
# Browser 
br = mechanize.Browser()

# Cookie Jar 
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj) 

# Browser options
br.set_handle_equiv(True)
#br.set_handle_grip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False) 

# Follows refresh 0 but not hangs on refresh> 0 
# br.set_handle_refresh (mechanize._http.HTTPRefreshProcessor (), max_time = 1) 

# User-Agent (this is cheating, ok?) 
br.addheaders = [('User-agent' , 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.1.7) Gecko/20091221 Firefox/3.5.7 (.NET CLR 3.5.30729)')] 

# Open some site, let's pick a random one, the first That pops into mind: 
r = br.open('http://m.facebook.com') 
#html= r.read() 

# Show the source 
#print html
# or  
#print br. response (). read () 

# Show the html title 
print "- Connected to:" + br.title ()

# Select the first (index zero) form 
br.select_form(nr = 0) 

try: 
    wait = input("\ n Every how many seconds you want to check for new notifications? ") 
    while(wait>=5):
        wait = input(" \ n - E 'recommended a value below 5 seconds. \ n Re-Enter a value: ") 
except: 
    print "It 's necessary to enter a numeric value, not a string. \ n Closing the program ..."
    time.sleep(5) 
    sys.exit() 

print "\ n - Enter your login for Facebook: \ n "
# Let's search 
br.form['email'] = '% s'% raw_input(" Enter Email ") 
br.form['pass'] = '% s'% raw_input(" Enter Password: ") 

br.submit()
x = br.response().read() 
z = x.count("Combination e-mail/password incorrect.") 

while z: 
    print "Unable to login, username or password incorrect. Retry: \ n "
    go = False
    br. select_form (nr = 0) 
    br. form ['email'] = '% s'% raw_input (" Enter Email ") 
    br. form ['pass'] = '% s'% raw_input ("Enter Password:") 
    br. submit () 
    x = br. response().read () 
    z = x. count("Combination e-mail/password incorrect.")
else: 
    # we are fully logged.  (Z = 0)
    go = True 
    status = False #status flag, lowered = False 
    try:
        br.Follow_link(text = 'Delete notifications', nr = 0) # Clear previous notifications 
    except: 
        print "\ n No Notification! \ n "
    print " \ n - Mark as read, all previous notifications ... \ n "
    ser.write(" n ") # report the servant to the starting position. 

while True and go: 
    try: 
      # br.reload ( ) 
      # print br.response (). read () 
      x = br.open ('http://m.facebook.com/home.php?refid=0').read () 
      i = x.count ('< div class = "c"> ') # This field HTML is repeated more' than one time if there 'a new notification (before but' are read all notifications such events etc..). 
    except: 
        print "Delay in charge the page, wait 3 seconds applied .. \ n "
        time.sleep(3) 
    if i>= 1: 
        notification = True # Notifications to read 
    else:
        i = 0 #No notification 
        notification = False 

# to read control: 
    if notification == True: 
        if status == False: # If the flag and the 'down 
            ser.write("m") 
            print "New Notification on Facebook, hoisting flag ..." 
            status = True 
        else: 
            print "There are still notifications view ... "

    elif status == False: 
        print " Zzz ... " #flag already 'down, no notification to view 

    else: 
        ser.write("n") 
        print "No new notification flag down ... "
        status = False 

    time.sleep(wait) # Wait before checking for new notifications 

#END 
```

我认为从 facebook 接收数据存在某种问题，这些数据来自代码：

```
while True and go: 
    try: 
      # br.reload ( ) 
      # print br.response (). read () 
      x = br.open ('http://m.facebook.com/home.php?refid=0').read () 
      i = x.count ('< div class = "c"> ') # This field HTML is repeated more' than one time if there 'a new notification (before but' are read all notifications such events etc..). 
    except: 
        print "Delay in charge the page, wait 3 seconds applied .. \ n "
        time.sleep(3) 
    if i>= 1: 
        notification = True # Notifications to read 
    else:
        i = 0 #No notification 
        notification = False 
```

你怎么看？编码是从 python 2.7 完成的。

# java - 来自图像 lwjgl 的加载级别

> ID：13852799
> 
> 赞同：-1
> 
> 时间：2012-12-13T04:08:53.933
> 
> 标签：java, image, load, maps, lwjgl

如何从 LWJGL 中的图像加载关卡。我正在制作一个类似[这样](http://s3.amazonaws.com/ld48/index.html)或类似[Delver](http://www.delvergame.com/)的第一人称地牢爬行者，我知道 Delver 有一个编辑器，并且关卡被导出为图块的图像，然后是高度。我怎样才能加载那些渲染地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:26:35.077

一种方法可能是拥有两个图像。正确纹理的，然后是高度图。前任：

质感等级： ![纹理水平](../Images/090f6f220ee2e79a204683ac334fe9ff.png)

高度等级（颜色越深，高度越高）：![高度等级](../Images/4dc70fac3faf7ae0233f38dbe7dec9e6.png)

然后筛选高度图的像素并设置纹理的高度。您必须使用带纹理的作为精灵表 --> [http://www.youtube.com/watch?v=Xj_qZ3Cw08Q](http://www.youtube.com/watch?v=Xj_qZ3Cw08Q) 希望它有所帮助

# java - 多线程或 cronjob

> ID：13852800
> 
> 赞同：5
> 
> 时间：2012-12-13T04:09:00.220
> 
> 标签：java, linux, multithreading

我有包含 xml 文件的文件夹。文件夹的内容每天更新为 N 个文件（插入新的 xml 文件）。我想编写一个java程序，它将从文件夹中获取最新的文件并对这些文件进行一些操作。我有两种方法可以做到这一点：

```
 Run java application every t minutes with cronjob. 
```

或者

```
Multithreaded java application which is run as daemon. 
```

哪个会更有效率？或任何可以提供帮助的想法。

应用程序应在 Linux 上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:27:24.280

即使您决定不采用 cron 路线，您的 Java 应用程序也可能不需要多线程，除非您最终从头开始构建一个类似[Quartz的调度程序（这可能是矫枉过正）。](http://quartz-scheduler.org/)

我推荐使用 cron 方法有几个原因：

1.  Cron 适合您给出的要求（即定期执行而无需在收到文件后立即处理）。
2.  如果您自己编写该逻辑而不是依赖经过尝试和测试的 cron，那么您更有可能在调度方面遇到错误。
3.  如果您使用 cron 并且您的 Java 应用程序由于某种原因崩溃，那么它不会影响后续执行。但是，如果您决定使用长时间运行的 Java 守护程序，则可能必须实现一种机制来监视其运行状况。

# ruby-on-rails - 选择查询参数时如何运行选择查询

> ID：13852801
> 
> 赞同：1
> 
> 时间：2012-12-13T04:08:59.357
> 
> 标签：ruby-on-rails, ruby, jquery

我编写了一个示例程序来获取所有文章。我想根据类别过滤文章。类别在下拉列表中呈现，当我选择一个类别时如何触发 AJAX 查询，以便表格立即刷新该选择。你能提供一些关于如何实现这一目标的参考吗？

```
select * from articles where category = <drop down selection> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:24:16.493

试写如下：

```
<%= select_tag :category,options_for_select(:your_collection)%>

 $('#category').bind('change', function() {
  $.ajax({
   url: your_controller_action,
   data : {category: $('#category').val()}
   success: function(data){                  

        $('#your_replace_div_id').html(data);
        }        

 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:21:06.733

使用js获取category_id `$('#category').options[$('#category').options.selectedIndex].value`

然后通过ajax将此值发布到服务器

在服务器端，您可以将此 category_id 值传递给 sql `select * from articles where category = "#{category_id}"`

# php - 寻找月份预赛

> ID：13852808
> 
> 赞同：-2
> 
> 时间：2012-12-13T04:09:54.837
> 
> 标签：php, string, preg-match

我正在通过 CURL 检查存储在 PHP 变量中的网页。网页内将包含月份名称和年份以及名称，因此网页看起来像：

```
December 2012
Name: Jack Brown 
```

我想要一个预匹配来查找数据，所以我可以像这样显示它：

```
For Jack Brown - December 2012 
```

我试过了

```
\b(?:Jan(?:uary)?|Feb(?:ruary)?|...|Dec(?:ember)?) (?:19[7-9]\d|2\d{3})(?=\D|$) 
```

但它出现了一个错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:05:18.117

我为你做了一个片段，所以你可以从这里开始

```
$str = 'December 2012 Name: Jack Brown';
$ptr = "/^(?P<month>:Jan(?:uary)?|Feb(?:ruary)?|Dec(?:ember)?) (?P<year>:19[7-9]\d|2\d{3}) (Name:(?P<name>(.*)))/";
preg_match($ptr, $str, $data);
echo 'For '.trim($data['name']).' - '.$data['month'].' '.$data['year']; 
```

结果将是

```
'For Jack Brown - December 2012' 
```

这是一个数组

```
Array
(
    [0] => December 2012 Name: Jack Brown
    [month] => December
    [1] => December
    [year] => 2012
    [2] => 2012
    [3] => Name: Jack Brown
    [name] =>  Jack Brown
    [4] =>  Jack Brown
    [5] =>  Jack Brown
) 
```

我也尝试

```
'February 2005 Name: Bob' => 'For Bob - February 2005' 
```

附言。你可以添加更多月份，我只是懒得添加，干杯

# scroll - 使用 Jquery - 使用按钮替换 HTML 锚 #hash 方法的目标 div

> ID：13852811
> 
> 赞同：1
> 
> 时间：2012-12-13T04:10:35.363
> 
> 标签：scroll, anchor

我正在使用类似`#loadpanel1:target`在查看器中加载的 div 中运行动画的东西。目前我正在使用`#hashtag`锚方法来激活容器，问题是这是一个画廊风格的查看器，页面会随着每个链接跳到顶部。我想做以下两件事之一：

1.  要么防止`#loadpanel`链接的跳跃
2.  将锚链接替换为合适的 Js 替代品。

```
#holdall {
width:      0px;
height:     0px;
position:absolute;
background: white;
-webkit-transition: all 3s ease-out;
-moz-transition: all 3s ease-out;
-ms-transition: all 3s ease-out;
}
#loadpanel1:target #holdall { 
-webkit-transform: translateY(0px); 
-moz-transform: translateY(0px);
-ms-transform: translateY(0px);

    div id="viewer">
        <!-- Target divs -->
        <div id="loadpanel1">

        <!-- Hold All -->
        <div id="holdall">
            <div class="panel" id="panel1">
                <div class="info">
                    <h2>title</h2>
                    <p>test</p>

                </div>
            </div>
            <div class="panel" id="panel2">
                <div class="info">
                    <h2>title2</h2>
                    <p>test2</p>

                </div>

            </div>
            <div class="panel" id="panel3">
                <div class="info">
                    <h2>title3</h2>
                    <p>test3</p>

                </div>
            </div>
            <div class="panel" id="panel4">
                <div class="info">
                    <h2>title4</h2>
                    <p>test4</p>

                </div>
            </div>
            <div class="panel" id="panel5">
                <div class="info">
                    <h2>title5</h2>
                    <p>test5</p>

                </div>
            </div>
            <div class="panel" id="panel6">
                <div class="info">
                    <h2>title6</h2>
                    <p>test6</p>

                </div>
            </div>
        </div>
        <!-- End Hold All -->
        </div>
        </div>
        </div>
        </div>
        </div>
        </div>
        <!-- End Target divs -->
    </div>
    <div id="nav">
        <ul>
            <li><a href="#loadpanel1">1</a></li>
            <li><a href="#loadpanel2">2</a></li>
            <li><a href="#loadpanel3">3</a></li>
            <li><a href="#loadpanel4">4</a></li>
            <li><a href="#loadpanel5">5</a></li>
            <li><a href="#loadpanel6">6</a></li>
        </ul>
    </div> 
</div> 
```

# c# - 如何处理 ibm.data.db2.iseries 异常

> ID：13852814
> 
> 赞同：3
> 
> 时间：2012-12-13T04:11:20.107
> 
> 标签：c#, db2

我有这个代码：

```
con = new iDB2Connection(connectString);
try { con.Open(); }
catch (iDB2ConnectionTimeoutException ex)
{ Console.WriteLine(ex.Message); }
catch (iDB2DCFunctionErrorException ex)
{ Console.WriteLine(ex.Message); }
catch (AccessViolationException ex)
{ Console.WriteLine(ex.Message); } 
```

关闭连接

```
if (con != null)
{
            try
            {
                Console.WriteLine("CRASH IS AFTER THIS");
                if (con.State != ConnectionState.Closed)
                {
                    con.Close();
                }
            }

            catch (iDB2ConnectionTimeoutException ex)
            {
                Console.WriteLine(ex.Message);
            }
            catch (iDB2DCFunctionErrorException ex)
            {
                Console.WriteLine(ex.Message);
            }
            catch (AccessViolationException ex)
            {
                Console.WriteLine(ex.Message);
            }
            catch (iDB2Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
            finally
            {

            }
        } 
```

但是当关闭连接运行时，我仍然收到这条讨厌的消息：

```
 Unhandled Exception: IBM.Data.DB2.iSeries.iDB2DCFunctionErrorException: An unexp
ected exception occurred.  Type: System.AccessViolationException, Message: Attem
pted to read or write protected memory. This is often an indication that other m
emory is corrupt.. ---> System.AccessViolationException: Attempted to read or wr
ite protected memory. This is often an indication that other memory is corrupt.
   at IBM.Data.DB2.iSeries.CwbDc.DcDnIsAlive(Int32 functionNumber, IntPtr connec
tionHandle, IntPtr nullParm)
   at IBM.Data.DB2.iSeries.MPConnection.IsAlive()
   --- End of inner exception stack trace ---
   at IBM.Data.DB2.iSeries.MPConnection.IsAlive()
   at IBM.Data.DB2.iSeries.MPConnectionManager.GetConnection(iDB2Connection piDB
2Connection)
   at IBM.Data.DB2.iSeries.iDB2Connection.Open() 
```

当我知道 iSeries 停机进行维护时，我得到了这个。
如何处理此问题以便 C# 控制台应用程序继续运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T15:40:48.990

你为什么不把它放在 finally 块中并且只使用一个 try/catch 呢？

```
con = new iDB2Connection(connectString);

try 
{ 
    con.Open(); 
}
catch (iDB2ConnectionTimeoutException ex)
{ 
    Console.WriteLine(ex.Message); 
}
catch (iDB2DCFunctionErrorException ex)
{ 
    Console.WriteLine(ex.Message); 
}
catch (AccessViolationException ex)
{ 
    Console.WriteLine(ex.Message);
} 
finally
{
    if (con != null && con.State == ConnectionState.Open)
            con.Close();
} 
```

# c++ - Unsigned Long Long - 奇怪的输出

> ID：13852815
> 
> 赞同：1
> 
> 时间：2012-12-13T04:11:23.277
> 
> 标签：c++, c, macos, gcc, g++

好的，我正在尝试打印一个相对较大的十进制/十六进制版本，`unsigned long long`我得到的结果很奇怪......

**编码 ：**

```
unsigned long long a = 1llu<<63;

printf("decimal = %llu\n",a);
printf("hexadecimal = %llx\n",a); 
```

**输出 ：**

```
decimal = 9223372036854775808
hexadecimal = 8000000000000000 
```

* * *

现在，这是什么：

*   十六进制输出**是**正确的。
*   十进制输出**不是**（应该是`9223372036854780000`）

为什么会这样？我究竟做错了什么？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T04:14:05.700

因为五不是任何二的幂的因数，所以没有二的幂以零结尾。您给出的其他来源`9223372036854780000`不正确。

# ios - 如何使用 2 个 UITableViewControllers 构建 iOS 主从应用程序？

> ID：13852816
> 
> 赞同：2
> 
> 时间：2012-12-13T04:11:32.297
> 
> 标签：ios, ipad, uitableview, master-detail

我正在尝试创建一个主从应用程序，其中一个`UITableView`控制器作为主控和细节。我需要做的是在选择行时将 8 个数据字符串传递给 detail `UITableViewController`。实现这一目标的最佳方法是什么？我计划将细节`UITableViewController`作为静态单元格，而不是动态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:33:02.927

您可以在主视图控制器中创建一个变量来访问详细视图控制器。然后，在主视图控制器的 viewDidLoad 中，您可以设置此变量，因此从此时起，`self.detailViewController`主视图控制器中的所有调用都将发送到细节视图控制器。示例代码：

在 MasterViewController.h 中：

```
@class DetailViewController // do not use include here to avoid reference cycles, just identify DetailViewController as a class

@interface MasterViewController : UITableViewController

// in the interface, declare property to access detail view controller
@property (strong, nonatomic) DetailViewController *detailViewController;

@end 
```

在 MasterViewController.m 中：

```
#include "DetailViewController.h"

// in the implementation, synthesize
@interface DetailViewController : UITableViewController

@synthesize DetailViewController;

// when the view loads
- (void)viewDidLoad {

    // call super method
    [super viewDidLoad];

    // if you used XCode's built-in Matser/Detail application, this will set detailViewController to the detail view controller
    self.detailViewController = (ITLDetailViewController *)[[self.splitViewController.viewControllers lastObject] topViewController];

} 
```

这样，当您在主视图控制器代码中时，您可以调用`self.detailViewController.someProperty`或`[self.detailViewController someMethod]`.

# extjs - Sencha Touch 2：选项卡面板内不显示列表

> ID：13852820
> 
> 赞同：1
> 
> 时间：2012-12-13T04:12:33.773
> 
> 标签：extjs, sencha-touch, sencha-touch-2

**背景：**我正在使用 senchatouch 2 MVC 框架开发应用程序。我正在使用带有两个选项卡的选项卡面板的屏幕上工作。

**问题**：在第一个选项卡中，我想显示一个标题栏和一个列表。我能够显示标题栏，但不能显示选项卡内的列表。当我使用 Google Chrome 检查元素时，列表显示为空。我正在使用 sencha 网站上的示例列表代码。我可以在另一个面板中显示列表，但是当我将它作为一个项目放置在 tabPanel 中时它不显示。

这是我正在使用的代码：

```
Ext.define('POC.view.WUHomePage', {
    extend: 'Ext.TabPanel',
    requires: ['Ext.TitleBar', 'Ext.dataview.List', 'Ext.data.proxy.JsonP'],
    alias: 'widget.wuHomePageView',

    config: {
        fullscreen: true,
        tabBarPosition: 'bottom',
        cardSwitchAnimation: 'slide',
        defaults: {
            styleHtmlContent: true
        },

        items: [{
            // This is first tab
            title: 'Home',
            iconCls: 'home',
            items: [{
                xtype: 'titlebar',
                title: 'Hello',
                docked: 'top',
                items: [{
                    xtype: 'button',
                    text: 'LogOut',
                    ui: 'action',
                    itemId: 'newButton',
                    align: 'right'
                }]
            }, {
                xtype: 'list',
                title: 'Sample',
                fullscreen: true,
                itemTpl: '{title}',
                data: [{
                    title: 'Item 1'
                }, {
                    title: 'Item 2'
                }, {
                    title: 'Item 3'
                }, {
                    title: 'Item 4'
                }]
            }]
        },
        // This is second tab
        {
            title: 'Contact',
            iconCls: 'user',
            html: 'Contact Screen'
        }]
    },

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T05:38:37.233

不要将列表设置为全屏。只有一个组件应设置为全屏，在您的情况下是 TabPanel。而是将列表设置为高度 100%，并且将父组件设置为适合布局。

# android - 场景中的 reset() 和 back() 方法有什么作用

> ID：13852823
> 
> 赞同：2
> 
> 时间：2012-12-13T04:12:46.350
> 
> 标签：android, andengine

我有一个扩展场景的 GameScene 类。喜欢

```
public class GameScene extends Scene {

    public GameScene() {

    }

    public void clearScene() {
        this.reset();
        this.back();
    }
} 
```

在场景之间转换以卸载以前的资源时，我在某处找到了 reset() 和 back() 方法。但我不知道他们是做什么的？？！！！

有人可以解释他们的工作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:55:47.130

重置为默认类的所有成员的方法`reset`：位置、缩放、旋转、颜色、可见性、实体修饰符和子项（以及更多）。`Entity``Entity`

的`reset`方法`Scene`调用该`Entity.reset`方法，如果有子场景则清空。

清除*父场景*的*子场景*的`back`方法。如果任何其他场景将当前场景用作子场景，这将有效地退出当前场景。`Scene`

 **例如：如果我们有一个父场景和一个子场景，在调用之后`ParentScene.setChildScene(ChildScene)`：

![儿童场景](../Images/45fac1eef6287a82c00b55aa5015c731.png)

调用后`ChildScene.back()`，我们的父场景将没有子场景。

![没有儿童场景了](../Images/096ba40f2c988180153c7e958fca758d.png)

我希望这解释得很好:)**

# macos - 带圆角的 NSTableView

> ID：13852830
> 
> 赞同：3
> 
> 时间：2012-12-13T04:13:40.670
> 
> 标签：macos, cocoa, nstableview, rounded-corners

我正在尝试自定义我的应用程序的 UI，并且我希望我的 NSTableView 具有圆角。所以我将 NSTableView 子类化并得到了这个：

![伊姆古尔](../Images/5d4f65c2400acb95d10e5d6bc0d7f03b.png)

但是，当我填充表格并选择一行时，选择会绘制在边框上，如下所示：

![伊姆古尔](../Images/4a0dc3a6f8dde86bdf0d954acf20d201.png)

我尝试在表格视图绘图代码中添加一个剪辑，但它不起作用。关于如何解决这个问题的任何建议？

**编辑：**

我在 NSTableView 中的绘图代码如下：

```
- (void)drawRect:(NSRect)dirtyRect {
    [NSGraphicsContext saveGraphicsState];
    NSRect frame = NSMakeRect(0.0, 0.0, [self bounds].size.width, [self bounds].size.height-1.0);
    [[NSBezierPath bezierPathWithRoundedRect:frame xRadius:3.6 yRadius:3.6] addClip];
    [super drawRect:dirtyRect];
    [NSGraphicsContext restoreGraphicsState];
} 
```

实际的圆角框架是在 NSScrollView 的 drawRect 方法中绘制的。有趣的是，这确实剪辑了第一行和最后一行的选择：

![伊姆古尔](../Images/9aa867bd34219d4bf8eb0d127885dec7.png)

但不是在表格滚动时：

![伊姆古尔](../Images/09f91e370440baf001e9d26ea94e6501.png)

所以问题仍然存在：如何将所有绘图剪辑到 NSScrollView 的圆角框架内？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-19T15:12:52.480

我发现你可以在表格视图的容器滚动视图上调用它。

```
self.scrollView.wantsLayer = TRUE;
self.scrollView.layer.cornerRadius = 6; 
```

这就是我所需要的，而且它有效。不需要子类化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T18:21:27.107

我能够使用 CALayer 很好地解决这个问题。在尝试了从 NSScrollView 到 NSTableView 再到 NSClipView 的所有子类化后，仍然遇到上面显示的渲染问题，我最后简单地将这段代码添加到 NSScrollView 子类的 drawRect 中：

```
if (!self.contentView.wantsLayer) {
    [self.contentView setWantsLayer:YES];
    [self.contentView.layer setCornerRadius:4.0f];
} 
```

然后我在 NSScrollView 的同一个 drawRect 方法中绘制框架。它解决了上述所有问题。

# c++ - 新运算符中的 C++ 强制转换

> ID：13852831
> 
> 赞同：1
> 
> 时间：2012-12-13T04:13:51.073
> 
> 标签：c++, new-operator

我是 C++ 新手，我对这段代码有点困惑：

```
var *pointer=new(sharemem) var(); 
```

老实说，我试图找到类似的问题，但没有成功。我想是因为我的英语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T04:16:09.727

这不是演员表，它被称为“新展示位置”，您可以在此处阅读：[https ://en.wikipedia.org/wiki/Placement_new](https://en.wikipedia.org/wiki/Placement_new)

它本质上是`var`在 指向的预分配内存中构造一个新的`sharemem`。

# html - Firefox 溢出：隐藏的错误

> ID：13852838
> 
> 赞同：5
> 
> 时间：2012-12-13T04:14:55.550
> 
> 标签：html, css, firefox

所以我在我的网页设计中添加了一个图像滑块，就像现在一样。它在 IE + Chrome 中运行良好，但在 Firefox 中我遇到了一个非常奇怪的问题。图像滑块图像被推向页面的右侧。

![在此处输入图像描述](../Images/0b41ad274642081ef816f153abf50e94.png)

什么时候应该是这样的：

![在此处输入图像描述](../Images/1d9ab7afeb1146368695e14f773e21e2.png)

我真的不知道为什么会这样。

这是滑块的CSS：

```
 <style type="text/css">
        #slider {
            position: relative;
            width: 918px;
        }
        #slider .viewer {
            position: relative;
            width: 918px;
            height: 200px;
            overflow: hidden !important;
        }
        #slider .viewer .reel {
            display: none;
            height: 200px;
        }
        #slider .viewer .reel .slide {
            width: 918px;
            height: 200px;
        }
    </style> 
```

以及滑块周围容器的 css：

```
#photobox {
border-left: 1px solid #ababab;
border-right: 1px solid #ababab;
position: relative;
width: 918px;
height: 200px;
z-index: -1;
top: -6px;
} 
```

这真的难倒我。您还可以查看该站点的实时版本 - [http://simplesolutions.netne.net/](http://simplesolutions.netne.net/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T04:20:17.777

这是一个浮动问题：

```
#slider {  float:left } 
```

应该修复它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T04:18:22.583

添加`clear:both`到`#slider .viewer`似乎照顾它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T04:18:20.677

`Margin-top : 6px`#photobox 上的修复它在 Firefox 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-22T02:05:40.813

我遇到了同样的问题，（仅限 Firefox）具有相同类型的布局。我发现问题出在导航菜单项上的边距底部，将它们下方的内容 div 推到右侧。

棘手的部分是导航菜单本身在底部没有任何边距，所以看起来它不应该干扰下面的内容（而且它不在其他浏览器中，只是在 Firefox 中） - 但是，在某些时候，我意识到列表项（菜单项）本身确实有延伸到菜单栏下方的边距底部，并且删除它们修复了它。

# regex - 正则表达式匹配括号对

> ID：13852840
> 
> 赞同：2
> 
> 时间：2012-12-13T04:15:08.997
> 
> 标签：regex, sublimetext2

我正在尝试为 Simulink 的*目标语言编译器*(TLC) 文件编写 Sublime Text 2 语法荧光笔。这是一种用于自动生成代码的脚本语言。在 TLC 中，扩展标记内容的语法（类似于取消引用 C 或 C++ 中的指针）是

```
%<token> 
```

我写的匹配这个的正则表达式是

```
%<.+?> 
```

这适用于大多数情况，但不适用于以下语句

```
%<LibAddToCommonIncludes("<string.h>")> 
```

如果语句本身在一行上，则将正则表达式修改为贪婪可以解决此问题，但在其他几种情况下会失败。所以这不是一个选择。

对于该行，突出显示在第一行`>`而不是第二行停止。如何修改正则表达式来处理这种情况？

如果有一个通用表达式可以处理任意数量的嵌套`<>`对，那就太好了；例如

```
%<...<...>...<...<...>...>...> 
```

其中点是可选字符。上面的整个表达式应该是一个匹配项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:57:40.397

[通过正则表达式的通用方法是困难的 - 正如在这个线程](https://stackoverflow.com/questions/133601/can-regular-expressions-be-used-to-match-nested-patterns)中很好地解释的那样。

您可以尝试`<`通过正则表达式专门匹配 2 个字符。类似的东西`%<.+?<.+?>.+?>`。

# php - Codeigniter 运行 mysql 查询并回显返回的行数

> ID：13852846
> 
> 赞同：3
> 
> 时间：2012-12-13T04:16:05.160
> 
> 标签：php, mysql, codeigniter

```
<?=$this->db->count_all_results('users')?> 
```

嗨，我被困在某事上。如何运行如下计数的查询并回显所有返回的行？我目前正在使用上述语句，但我需要这种改进。

```
<?php $aa = $this->db->query("SELECT * FROM users WHERE itemNumber = 1"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T04:24:19.593

使用 num_rows() 方法

```
<?php
 $aa = $this->db->query("SELECT * FROM users WHERE itemNumber = 1");
echo $aa->num_rows();

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:23:10.357

```
$this->db->query("SELECT u.*, COUNT(u_all.*) FROM users u, users u_all WHERE u.itemNumber = 1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T04:25:12.183

```
$numRows = $this->db->query("SELECT count(*) FROM users WHERE itemNumber = 1"); 
```

# javascript - 如何在 ES6+ 中合并两个 javascript 对象？

> ID：13852852
> 
> 赞同：158
> 
> 时间：2012-12-13T04:16:37.747
> 
> 标签：javascript, ecmascript-6

我厌倦了总是不得不编写这样的代码：

```
function shallowExtend(obj1,obj2){
  var key;
  for ( key in obj2 ) {
    if ( obj2.hasOwnProperty(key) === false )  continue;
    obj1[key] = obj2[key]
  }
} 
```

或者，如果我不想自己编写代码，请实现一个已经完成的库。ES6+ 肯定会在这方面提供帮助，为我们提供类似`Object.prototype.extend(obj2...)`或`Object.extend(obj1,obj2...)`

那么 ES6+ 是否提供了这样的功能呢？如果还没有，那么是否计划了这样的功能？如果没有计划，那为什么不呢？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2014-09-16T20:25:29.013

您将能够使用 Object.assign 在 ES6 中进行浅合并/扩展/分配：

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)

**句法：**

> Object.assign（*目标*，*来源*）；

其中*...sources*表示源对象。

**例子：**

```
var obj1 = {name: 'Daisy', age: 30};
var obj2 = {name: 'Casey'};

Object.assign(obj1, obj2);

console.log(obj1.name === 'Casey' && obj1.age === 30);
// true 
```

* * *

## 回答 #2

> 赞同：180
> 
> 时间：2015-09-03T09:54:57.700

您可以为此使用[对象扩展语法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)：

```
const merged = {...obj1, ...obj2} 
```

对于数组，扩展运算符已经是 ES6 (ES2015) 的一部分，但对于对象，它被添加到 ES9 (ES2018) 的语言规范中。早在此之前，它的提议就在 Babel 等工具中默认启用。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-01-12T17:29:51.770

我知道这是一个老问题，但 ES2015/ES6 中最简单的解决方案实际上非常简单，使用 Object.assign()，

希望这会有所帮助，这也可以进行**DEEP**合并：

```
/**
 * Simple is object check.
 * @param item
 * @returns {boolean}
 */
export function isObject(item) {
  return (item && typeof item === 'object' && !Array.isArray(item) && item !== null);
}

/**
 * Deep merge two objects.
 * @param target
 * @param source
 */
export function mergeDeep(target, source) {
  if (isObject(target) && isObject(source)) {
    for (const key in source) {
      if (isObject(source[key])) {
        if (!target[key]) Object.assign(target, { [key]: {} });
        mergeDeep(target[key], source[key]);
      } else {
        Object.assign(target, { [key]: source[key] });
      }
    }
  }
  return target;
} 
```

示例用法：

```
mergeDeep(this, { a: { b: { c: 123 } } });
// or
const merged = mergeDeep({a: 1}, { b : { c: { d: { e: 12345}}}});  
console.dir(merged); // { a: 1, b: { c: { d: [Object] } } } 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-08-16T22:34:54.573

# ES6

```
Object.assign(o1,o2) ; 
Object.assign({},o1,o2) ; //safe inheritance
var copy=Object.assign({},o1); // clone o1
//------Transform array of objects to one object---
var subjects_assess=[{maths:92},{phy:75},{sport:99}];
Object.assign(...subjects_assess); // {maths:92,phy:75,sport:99} 
```

# ES7 或通天塔

```
{...o1,...o2} // inheritance
 var copy= {...o1}; 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-14T16:50:04.823

目前`Object.mixin`正在讨论添加以处理您要求的行为。[https://mail.mozilla.org/pipermail/es-discuss/2012-December/027037.html](https://mail.mozilla.org/pipermail/es-discuss/2012-December/027037.html)

虽然它还没有出现在 ES6 草案中，但似乎有很多支持，所以我认为它很快就会出现在草案中。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-12-13T05:15:57.170

也许 ES5[`Object.defineProperties`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.3.7)方法可以完成这项工作？

例如

```
var a = {name:'fred'};
var b = {age: {value: 37, writeable: true}};

Object.defineProperties(a, b);

alert(a.age); // 37 
```

MDN 文档：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperties](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperties)

# xml - 无法在 R 中加载 HTTP 源

> ID：13852853
> 
> 赞同：1
> 
> 时间：2012-12-13T04:16:39.207
> 
> 标签：xml, r, http, parsing, load

我尝试使用以下代码解析网页，但最后一行输出“未能加载 HTTP 资源”。谁能告诉我如何处理它？谢谢！代码是：

```
library(XML);library(RCurl)
page=getForm("http://jobsearch.monster.com/search",query="data science")
doc = htmlParse(page, asText = TRUE)
joblinks = getNodeSet(doc, "//div[@class = 'jobTitleContainer']//a/@href")
htmlParse(joblinks[[1]]) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-13T04:33:13.410

有两件事 `?htmlParse`会指向`isURL`标志，默认情况下为 FALSE。您想将此设置为 TRUE。

其次，中的网址`joblinks[[1]]` 似乎不起作用。这似乎不是您的`R`代码的问题，只是您要提取的信息：

```
# works
htmlParse("http://stackoverflow.com/questions/13852853/failed-to-load-http-source-in-r", isURL=TRUE)

# doesnt work 
htmlParse("http://jobview.monster.com/Cleaning-Supervisor-Job-1513-Rebel-Southwest-OH-117109119.aspx", isURL=TRUE) 
```

# java - 递归检查数组是否代表堆

> ID：13852854
> 
> 赞同：3
> 
> 时间：2012-12-13T04:16:42.113
> 
> 标签：java, arrays, recursion, heap

我们如何检查一个数组是否递归地表示一个堆数据结构？假设它是一个整数数组，我正在检查最大堆。以下是我想出的，但我不知道这是否正确。

```
public static boolean isHeap(int[] arr) {
      if (arr = null)
           return false;
      return isHeapTree(arr, 0);
}

private static boolean isHeapTree(int[] arr, int i) {
           if (i = arr.length - 1)
               return true;
           // check if a parent's value is larger or equal to both of
           // its left child and right child
           else if (arr[i] >= arr[2i + 1] && arr[i] >= arr[2i + 2])
               return (isHeapTree(arr, 2i + 1) && isHeapTree(arr, 2i + 2));
           else
               return false;
}

is it possible a binary heap could be incomplete? say:
         100
        /   \
       50   20
      /  \    \
     30  40   26 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:29:23.040

一些评论：

*   你绝对不需要 while 循环——你总是在第一次迭代后返回

*   `2i + 1`在java中不起作用，您需要使用`2*i + 1`

*   `arr[2*i + 1]`并且`arr[2*i + 1]`可能会抛出，`ArrayIndexOutOfBoundsException`因此您需要手动进行范围检查，或者将其包装在一个`try.. catch`块中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T05:10:23.920

通常，当堆存储在数组中时，它总是被压缩到左边。换句话说，当堆有`n`元素时，索引范围内的数组中的所有元素都`[0, n-1]`包含元素。每次插入都首先将元素放置在 index 处`size()`，然后向上跳转，直到它小于其父元素。

因此，您采取的方法可以成功。

另请注意，在您的代码中，您可以通过对顶部的守卫进行小的更改来处理越界问题：

```
public static boolean isHeap(int[] arr, int size) {
  return (null == arr) ? false : isHeapTree(arr, size, 0);
}

private static boolean isHeapTree(int[] arr, int size, int i) {
  assert i >= 0;
  assert size <= arr.length;
  if (i >= size) return true;
  ... 
```

# arrays - 从文本文件中的列表读取，翻录某些行并显示在列表框中，Visual Studio 2010

> ID：13852857
> 
> 赞同：0
> 
> 时间：2012-12-13T04:16:54.220
> 
> 标签：arrays, vb.net, visual-studio-2010, loops, text-files

我正在使用 vb 在 Visual Studio 2010 中创建条形码扫描程序。

我已经走了很远，但似乎陷入了这个小问题。

我保存了一个文本文件，其中的数据显示如下：

```
0001#Unsmoked Middle Bacon
0002#Smoked Middle bacon
0003#Unsmoked Bits
0004#Smoked Bits
0005#Unsmoked Back
0006#Smoked Back
0007#Unsmoked Streaky
0008#Smoked Streaky 
```

用# 读取和拆分字符串没有问题，我可以填充2 个列表框，1 个显示4 位代码，另一个显示产品名称。（这只是一个测试场景）

我真正想做的是在文件中搜索一个变量，该变量是用户输入的数字，例如“0004”，这将显示给我“烟熏位”。

我想我想逐行阅读，直到达到正确的数字，然后可能使用 substr 阅读？你们可能会在这里帮助我很多。

```
While Not sreader.EndOfStream                               
                lineIn = sreader.ReadLine()
                Dim elements() As String = Nothing                      
                elements = lineIn.Split("#")
                lstProdTest.Items.Add(elements(0))
                lstProdName.Items.Add(elements(1))
                PLUnumber(index) = elements(0) 
                itemName(index) = elements(1)
                numProds = numProds + 1
                index = index + 1
            End While 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:56:12.143

正如他们所说，过早的优化是万恶之源。不是每次需要项目描述时都读取文件，而是应该读取一次文件（在应用程序开始时），将其存储在内存中（可能作为 a `Dictionary(of Integer, String)`），然后在尝试获取描述时引用它物品。

您当然可以更进一步，创建一个自定义类来存储有关每个条目的附加信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:52:04.860

正如 Origin 所说，提供这个文件不是太大以至于消耗太多内存，读取数据一次是要走的路：

```
Private _barcodes As Dictionary(Of Integer, String)
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'EDIT forgot to initialize _barcodes:
    _barcodes = New Dictionary(Of Integer, String)
    For Each line In IO.File.ReadAllLines("c:\path\to\file.txt")
        Dim data = line.Split("#"c)
        _barcodes.Add(CInt(data(0)), data(1))
    Next
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim input As String = InputBox("type the barcode to test, eg 0004:")
    Dim key As Integer = CInt(input)
    'if you entered 0004 then this will display Smoked Bits
    If _barcodes.ContainsKey(key) Then
        MessageBox.Show(_barcodes(key))
    Else
        MessageBox.Show("Key not found")
    End If
End Sub 
```

请注意，这只是一个简单的示例，需要添加错误处理（对于丢失的文件、不正确的数据格式等）

如果数据量很大，那么考虑使用数据库，sqlite 将是一个简单的选择

# php - 使用 NET_DNS2 获取记录

> ID：13852860
> 
> 赞同：-1
> 
> 时间：2012-12-13T04:17:15.623
> 
> 标签：php, dns, pear

我正在使用梨包[NET_DNS2](http://pear.php.net/package/Net_DNS2/)。我可以使用下面的代码获取记录。但我对名称服务器 8.8.8.8 有些困惑。这是 Google 公共名称服务器地址。为什么我们使用这个。以及如何将其更改为我自己的本地主机名称服务器。

```
<?php

require "NET/DNS2.php";

$r = new Net_DNS2_Resolver(array('nameservers' => array('8.8.8.8')));
$result = $r->query('domain.com', 'A');

echo "<pre>";
print_r($result);
echo "</pre>";

?> 
```

如何获取域所有者和托管服务提供商信息。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:06:10.947

您可以省略该`nameservers`选项，它将默认使用 中的名称服务器`/etc/resolv.conf`，就像您系统上的其他网络软件一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T08:48:29.213

NET_DNS2 通过从指定的名称服务器发送请求与 dns 服务器通信。

您可以为此使用自己的计算机 IP 地址（不是 127.0.0.1 或 localhost）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T08:38:16.850

> 为什么我们使用这个

因为它快速、出色且免费*？

> 以及如何将其更改为我自己的本地主机名称服务器。

替换`'8.8.8.8'`为`'localhost'`or `'127.0.0.1'`，也许？来吧，伙计，表现出一些努力。

^([* 没有免费的午餐；Google 对我们的 DNS 查询做了什么？])

# python - 将 Python 与可编写脚本的应用程序一起使用（在 Mac 上）

> ID：13852864
> 
> 赞同：4
> 
> 时间：2012-12-13T04:17:21.417
> 
> 标签：python, macos, applescript, itunes

我对编程很陌生，但我在大学课程中学习了一些基本的 Python 编程。

我正在寻找一种在 Mac 应用程序（主要是 iTunes）上运行非常简单的 Python 脚本的方法，以代替 AppleScript。我已经阅读了使用 AppScript for Python 的内容，但它不再处于开发阶段，并且从 iTunes 10.6.3 开始就被破坏了。

在我的 Windows 计算机上，我可以使用名为 PyWin32 的模块轻松地使用 Python 编写应用程序脚本。然而，自从切换到 Mac 后，我一直无法找到一个好的替代方案。这是我在 Windows 上使用的示例脚本，只是为了说明我想使用的脚本的简单性：

```
from win32com.client import Dispatch
iTunes = Dispatch("iTunes.Application")

selected_tracks = iTunes.SelectedTracks
track_count = selected_tracks.Count

for i in range(1, track_count + 1):
    selected_tracks.Item(i).TrackNumber = i
    selected_tracks.Item(i).TrackCount = track_count 
```

如您所见，我的脚本需求非常基本，我不需要 AppScript 之类的任何高级事件处理功能。我计划最终学习 AppleScript，但现在我仍然对 Python 感觉最舒服。有没有人有什么建议？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:37:17.697

一种可能性是通过 subprocess 模块使用[osascript](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/osascript.1.html)。然后，您可以访问少量 AppleScript，例如您需要的应​​用程序属性，但将逻辑保留在 Python 中。通常，您可以找到所需 AppleScript 参考表单的在线示例，这样就无需深入研究 AppleScript。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:24:09.797

您需要将[Scripting Bridge](https://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/RubyPythonCocoa/Articles/UsingScriptingBridge.html)与[PyObjC](http://packages.python.org/pyobjc/)一起使用。它有很多内容，但是这些链接将使您入门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:36:21.523

当你开始学习 AppleScript 时；）

```
tell application "iTunes"
    set selected_tracks to selection
    set track_count to count of selected_tracks
    repeat with i from 1 to track_count
        set a_track to item i of selected_tracks
        set a_track's track number to i
        set a_track's track count to track_count
    end repeat
end tell 
```

# c# - 如何使用默认浏览器在 C# 中使用锚点（#）打开 html 文件

> ID：13852867
> 
> 赞同：3
> 
> 时间：2012-12-13T04:17:39.950
> 
> 标签：c#, .net, html, uri, anchor

我正在尝试在 c# 中打开上下文帮助文件。

当我不指定锚时，它可以完美运行。

```
Process.Start("C:/Help/Help.htm") 
```

但是当我指定锚点时，它不会打开

```
Process.Start("C:/Help/Help.htm#_Toc342057538") 
```

在内部它更改`'#'`为`'%23'`并且路径成为`"c:\Help.htm%23_Toc342057538"`浏览器无法识别的。

浏览器打开路径成功`"c:\Help.htm#_Toc342057538"`

如何通过[Process.Start](http://msdn.microsoft.com/en-us/library/h6ak8zt5.aspx)停止这种自动转换。如果我将锚标签作为另一个参数或使用[Uri](http://msdn.microsoft.com/en-us/library/system.uri.aspx)类，则会观察到相同的行为。

**编辑** 当我在 Window Run 中输入字符串时，观察到相同的行为。以下命令也转换`#`为`%23`浏览器无法识别的。

```
chrome c:/Help.htm#_Toc342057538 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T05:20:49.260

在我的 Windows 7 系统上，以下两个都在 Internet Explorer 中打开 C:\Help\Help.htm 并滚动到 _Toc342057538 锚点：

```
Process.Start("iexplore", "file://C:/Help/Help.htm#_Toc342057538");
Process.Start("iexplore", @"C:\Help\Help.htm#_Toc342057538"); 
```

对于 Firefox 和 Chrome，`file`似乎只有协议有效：

```
Process.Start("firefox", "file://C:/Help/Help.htm#_Toc342057538");
Process.Start("chrome", "file://C:/Help/Help.htm#_Toc342057538"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:54:01.653

试试这个。我只是自己做的，并在 Internet Explorer 中工作

```
string s = "file:///D:/tmp/test.html%23test";
      s = uri.UnescapeDataString(s);

      Process.Start(s); 
```

请让我知道它是否适合您。

# jquery - jQuery：在 WINDOW RESIZE 上重新定位 DIV 的绝对位置（顶部和左侧属性）

> ID：13852868
> 
> 赞同：0
> 
> 时间：2012-12-13T04:17:43.050
> 
> 标签：jquery, html, resize, css-position, fluid

语言：**jQuery**

我在一个页面上有一堆 DIV。每次调整窗口大小时，
我都会尝试更改它们的**绝对位置（顶部/左侧属性）（以使它们与视口成比例，同时保持其原始布局）。**

*   **jsFiddle：http:** [//jsfiddle.net/kjvSc/1/](http://jsfiddle.net/kjvSc/1/)

我成功地改变了我的 DIV 的宽度和高度**（但这不是我关心的问题，没关系，因为我将通过媒体查询更改字体 + 宽度和高度）**，我主要关心的是无法调整这些DIV 的顶部/左侧定位。

我快到了，但不知道如何使这项工作？

用户**[Chris Barr](https://stackoverflow.com/users/79677/chris-barr)** [玩了一会儿](https://stackoverflow.com/a/13853418/1399030)，但没能走得很远：

*   **[Chris Barr](https://stackoverflow.com/users/79677/chris-barr)**的**jsFiddle： http:** [//jsfiddle.net/kjvSc/4/](http://jsfiddle.net/kjvSc/4/)
    他所做的是成功并按比例重新定位/更改窗口调整大小时 DIV 的**顶部/左侧**属性。但是，我注意到 DIV 最初并未加载到其原始位置（如其样式中指定的那样）。

这是我正在使用的 Javascript：

```
$(document).ready(function() {
    // THIS GETS WIDTH OF CONTAINER
    var cw = $('#container').width();
    // THIS GETS ORIGINAL FONT SIZE
    var fontSize = $('.box').css('font-size');
    // THIS GETS ORIGINAL ABSOLUTE POSITION OF DIV
    var left = $('.box').css('left');

    $(".box").width(cw / 5).height(cw / 5);
    $('.box').css("font-size", fontSize / 5 + "px");
    $('.box').css("left", left / 5 + "px");

    $(window).resize(function() {
    // THIS GETS WIDTH OF CONTAINER
    var cw = $('#container').width();
    // THIS GETS ORIGINAL FONT SIZE
    var fontSize = $('.box').css('font-size');
    // THIS GETS ORIGINAL ABSOLUTE POSITION OF DIV
    var left = $('.box').css('left');

    $(".box").width(cw / 5).height(cw / 5);
    $('.box').css("font-size", fontSize / 5 + "px");
    $('.box').css("left", left / 5 + "px");
    });
});​ 
```

您可以在此处查看它的实际效果 - **jsFiddle：http:** [//jsfiddle.net/kjvSc/1/](http://jsfiddle.net/kjvSc/1/)

任何帮助和指导将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:16:19.087

就像@Jiskiras 说的那样，这将返回一个字符串像素值`16px`，您只想在其中获取数字`16`。

所以，简短的回答是这样做：`parseInt($('.box').css('font-size'));`

*编辑*：我试着弄乱你的小提琴，但我没有走得太远：http: [//jsfiddle.net/kjvSc/4/](http://jsfiddle.net/kjvSc/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:44:06.670

这是我能够想出的：http: [//jsfiddle.net/kjvSc/3/](http://jsfiddle.net/kjvSc/3/)

这是问题所在：

```
$('.box').css('font-size'); 
```

以上返回 16px。您不能将 16px 除以 2。您必须将 16 除以 2，然后附加 px。

我建议您在 CSS 中使用媒体查询，而不是尝试使用 jQuery。这样，您的 jQuery 会更新高度/宽度，并且根据它们的设置，您的媒体查询会启动并更新字体大小。

# jobs - 延迟作业表中没有条目

> ID：13852869
> 
> 赞同：2
> 
> 时间：2012-12-13T04:17:47.237
> 
> 标签：jobs, delay

在创建任何记录后从活动管理员。

在模型中我调用了回调方法： after_save :check_delayed_job

```
def check_delayed_job
 run_at_time = Time.now.utc + 50
 Delayed::Job.enqueue(AdminNewsletterRequest.new('example@gmail.com', 'sample     newsletter content'), :priority => 3 , :run_at => run_at_time)  
end 
```

但它没有在延迟作业表中创建任何条目并直接执行执行方法在 lib 中我创建了一个名为 admin_newsletter_request.rb 的文件

```
class AdminNewsletterRequest < Struct.new(:email, :subject)
  def perform
    UserMailer.sample_letter(email, subject).deliver
    puts " weekly mail delivered succussfully! "           
  end   
end 
```

我不知道如何在延迟作业表中进行条目。在日志中我也没有收到任何错误。我想进入延迟作业以在 run_at 时间运行用 perform 方法编写的任务。他们是否可以从管理员那里获得任何替代方式，我们可以在延迟的工作中进入以在特定时间运行任务。

示例应用程序宝石列表

```
source 'https://rubygems.org'

gem 'rails', '~> 3.2.0'
gem 'pg'
gem 'daemons'
gem 'delayed_job_active_record'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

对于示例应用程序，我可以在延迟工作中进行输入： 下面是控制台输出

```
1.9.2-p290 :002 > Delayed::Job.enqueue(AdminNewsletterRequest.new('example@gmail.com', 'sample newsletter content'), :priority => 3 , :run_at => run_at_time)
   (0.4ms)  BEGIN
  SQL (103.4ms)  INSERT INTO "delayed_jobs" ("attempts", "created_at", "failed_at", "handler", "last_error", "locked_at", "locked_by", "priority", "queue", "run_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11) RETURNING "id"  [["attempts", 0], ["created_at", Thu, 13 Dec 2012 07:27:49 UTC +00:00], ["failed_at", nil], ["handler", "--- !ruby/struct:AdminNewsletterRequest \nemail: example@gmail.com\nsubject: sample newsletter content\n"], ["last_error", nil], ["locked_at", nil], ["locked_by", nil], ["priority", 3], ["queue", nil], ["run_at", Thu, 13 Dec 2012 07:28:22 UTC +00:00], ["updated_at", Thu, 13 Dec 2012 07:27:49 UTC +00:00]]
   (13.6ms)  COMMIT
 => #<Delayed::Backend::ActiveRecord::Job id: 9, priority: 3, attempts: 0, handler: "--- !ruby/struct:AdminNewsletterRequest \nemail: san...", last_error: nil, run_at: "2012-12-13 07:28:22", locked_at: nil, failed_at: nil, locked_by: nil, queue: nil, created_at: "2012-12-13 07:27:49", updated_at: "2012-12-13 07:27:49"> 
1.9.2-p290 :003 > 
```

但是我从控制台处理的应用程序得到了不同的输出。下面是示例输出。

```
Delayed::Job.enqueue(AdminNewsletterRequest.new('example@gmail.com', 'sample newsletter content'), :priority => 3 , :run_at => run_at_time)
 weekly mail delivered succussfully! 
=> #<Delayed::Backend::ActiveRecord::Job id: nil, priority: 0, attempts: 0, handler: "--- !ruby/struct:AdminNewsletterRequest \nemail: san...", last_error: nil, run_at: nil, locked_at: nil, failed_at: nil, locked_by: nil, queue: nil, created_at: nil, updated_at: nil> 
```

工作应用程序宝石列表

```
source 'http://rubygems.org'

gem 'rails', '~> 3.2.0'

gem 'pg'

# Gem used by scap:
# To minimize merge conflicts, keep this list sorted alphabetically
gem 'activeadmin', '>= 0.5'
gem 'airbrake'
gem 'braintree'
gem 'compass', '~> 0.12.alpha.0'
gem 'context-io', git: 'https://github.com/henrikhodne/context-io.git'
gem 'covenant'
gem 'delayed_job_active_record'
gem 'devise', '~> 2.0.0'
gem 'dragonfly'
gem 'fog'
gem 'foreigner'
gem 'formtastic', '~> 2.2.1'
gem 'friendly_id'
gem 'geocoder'
gem 'gmaps4rails'
gem 'haml', '~> 3.1'
gem 'has_scope'
gem 'hashie'
gem 'httparty'
gem 'i18n-js'
gem 'jquery-rails'
gem 'js-routes'
gem 'kaminari'
gem 'meta_search', '>= 1.1.0.pre'
gem 'newrelic_rpm'
gem 'omniauth'
gem 'omniauth-google-oauth2'
gem 'pry-rails'
gem 'rdiscount'
gem 'seed-fu'
gem 'simple-navigation'
gem 'thin'
gem 'uuidtools'
gem 'valid_email', require: 'valid_email/email_validator'
gem 'valium'
gem 'yipit_n4l', require: 'yipit', git: 'git://github.com/Nest4LessDev/yipit.git'
#gem 'bootstrap-colorpicker-rails', :require => 'bootstrap-colorpicker-rails',
                          #:git => 'git://github.com/alessani/bootstrap-colorpicker-rails.git'
gem 'jquery-minicolors-rails'
gem 'therubyracer'
gem 'jquery-timepicker-rails'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'uglifier', '>= 1.0.3'
  gem 'haml_coffee_assets'
end

group :test do
  gem 'cucumber-rails', require: false
  gem 'database_cleaner'
  gem 'email_spec'
  gem 'factory_girl_rails'
  gem 'capybara'
  gem 'rr'
  gem 'shoulda-matchers'
  gem 'valid_attribute'
  gem "shoulda-matchers"
  gem 'fake_braintree', require: false
end

group :development, :test do
  gem 'launchy'
  gem 'rspec-rails'
  gem 'awesome_print', :require => 'ap'  # pretty print objects in console via `ap my_object`
end

gem 'pry' 
```

**宝石依赖性是否有问题，我无法追踪它。**

# algorithm - avl 树上的红黑树

> ID：13852870
> 
> 赞同：143
> 
> 时间：2012-12-13T04:17:49.213
> 
> 标签：algorithm, data-structures, red-black-tree

除了节点中的红色和黑色外，AVL 和红黑树都是自平衡的。选择红黑树而不是 AVL 树的主要原因是什么？红黑树的应用有哪些？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2014-04-24T18:50:40.037

> 选择红黑树而不是 AVL 树的主要原因是什么？

[红黑树](https://en.wikipedia.org/wiki/Red%E2%80%93black_tree)和[AVL树](https://en.wikipedia.org/wiki/AVL_tree)都是最常用的[平衡二叉搜索树](https://en.wikipedia.org/wiki/Self-balancing_binary_search_tree)，它们都支持保证的插入、删除和查找`O(logN) time`。但是，两者之间有以下比较点：

*   AVL 树更严格地平衡，因此提供更快的查找。因此，对于查找密集型任务，使用 AVL 树。
*   对于插入密集型任务，请使用红黑树。
*   AVL 树在每个节点存储平衡因子。这需要`O(N)`额外的空间。但是，如果我们知道要插入树中的键总是大于零，我们可以使用键的符号位来存储红黑树的颜色信息。因此，在这种情况下，红黑树不会占用额外的空间。

> 红黑树的应用有哪些？

红黑树更通用。它们在添加、删除和查找方面做得相对较好，但 AVL 树的查找速度更快，但添加/删除速度较慢。红黑树用于以下情况：

*   爪哇：[`java.util.TreeMap`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/TreeSet.html)，[`java.util.TreeSet`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/TreeSet.html)
*   C++ STL（在大多数实现中）：map、multimap、multiset
*   Linux 内核：完全公平的调度器，linux/rbtree.h

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-13T04:22:55.350

尝试阅读这篇[文章](http://discuss.fogcreek.com/joelonsoftware/default.asp?cmd=show&ixPost=22948)

它提供了一些关于差异、相似性、性能等的很好的见解。

这是文章的引述：

> RB-Tree 和 AVL 树一样是自平衡的。它们都提供 O(log n) 的查找和插入性能。
> 
> 不同之处在于 RB-Trees 保证每个插入操作的 O(1) 次旋转。这就是在实际实现中实际成本性能的原因。
> 
> 简化后，RB-Trees 从概念上是 2-3 棵树获得了这一优势，而无需携带动态节点结构的开销。物理上，RB-Trees 被实现为二叉树，红/黑标志模拟 2-3 行为

就我自己的理解而言，AVL 树和 RB 树在性能上相差不远。RB 树只是 B 树的变体，平衡的实现方式与 AVL 树不同。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-10-11T19:45:07.747

多年来，我们对性能差异的理解有所提高，现在在 AVL 上使用红黑树的主要原因是无法获得良好的 AVL 实现，因为它们不太常见，可能是因为 CLRS 没有涵盖它们。

这两种树现在都被认为是[等级平衡树](http://sidsen.azurewebsites.net//papers/rb-trees-talg.pdf)的形式，但红黑树[在现实世界的测试中始终慢约 20%](https://benpfaff.org/papers/libavl.pdf)。[插入顺序数据](https://refactoringlightly.wordpress.com/2017/10/29/performance-of-avl-red-black-trees-in-java/)时甚至会慢 30-40% 。

所以研究过红黑树但没有研究过AVL树的人倾向于选择红黑树。红黑树的主要用途在[Wikipedia 条目中](https://en.wikipedia.org/wiki/Red%E2%80%93black_tree)有详细说明。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-09-14T14:33:18.547

这里的其他答案很好地总结了 RB 和 AVL 树的优缺点，但我发现这种差异特别有趣：

> AVL 树不支持恒定**摊销更新成本**[但红黑树支持]

资料来源：[Mehlhorn & Sanders (2008)](http://people.mpi-inf.mpg.de/~mehlhorn/ftp/Toolbox/SortedSequences.pdf)（第 7.4 节）

因此，虽然 RB 和 AVL 树都保证 O(log(N)) 最坏情况下的查找、插入和删除时间，但在插入或删除节点*后*恢复 AVL/RB 属性可以在 O(1)[分摊时间内](https://en.wikipedia.org/wiki/Amortized_analysis)完成红黑树。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-14T15:54:59.587

AVL 树和 RB 树中的插入都需要最多 2 次旋转。来自[https://adtinfo.org/](https://adtinfo.org/)：

> 红黑树的主要优点是，在 AVL 树中，从包含 n 个节点的树中删除一个节点可能需要 log 2 n 次旋转，但在红黑树中删除不需要超过 3 次旋转。

# android - 如何知道进程（应用程序）是否已被杀死？

> ID：13852871
> 
> 赞同：0
> 
> 时间：2012-12-13T04:18:05.637
> 
> 标签：android, process, notifications

当应用程序导致异常并被杀死时，我如何捕获此信息以清除与此应用程序关联的一些资源？是否有一些服务器可以为这种情况提供服务？

例如，我的应用会生成一些通知，应用可能会导致异常，当应用被杀死时如何清除通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:00:54.103

如果您担心导致应用程序终止的异常，您可以使用[Thread.UncaughtExceptionHandler](http://developer.android.com/reference/java/lang/Thread.UncaughtExceptionHandler.html)并执行清理。

看看[ACRA](https://github.com/ACRA/acra/)如何利用它来发送崩溃报告。

# c++ - 在 Windows 上使用 C++ 录制和保存屏幕

> ID：13852872
> 
> 赞同：0
> 
> 时间：2012-12-13T04:18:17.587
> 
> 标签：c++, windows

我正在尝试编写一个在 Windows 平台上用 C++ 记录和保存屏幕的应用程序。我不知道从哪里开始。我假设我需要某种 API（FFMPEG，也许是 OpenGL？）。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:19:44.017

您可以从查看 Windows 远程桌面协议开始，也许为此提供了一些编程库。

我知道有一种产品可以拦截对 Windows GDI dll 的调用并使用它来存储屏幕绘图活动。

一种更简单的方法是尽可能多地进行屏幕截图，并以某种方式最小化冗余数据（在帧之间没有变化的屏幕部分）。

如果您的应用程序所需的输出是视频文件（如 mpeg），您最好只抓取帧并将它们输入视频编码器。我不知道这些天编码器有多快。Ffmpeg 将是一个很好的起点。

如果编码器速度不够快，您可以尝试存储帧并在之后对视频文件进行编码。连续的帧应该有很多匹配的像素，所以你可以用它来减少存储的数据量。

# c++ - 嵌入在 C++ 中的 Python

> ID：13852880
> 
> 赞同：1
> 
> 时间：2012-12-13T04:18:47.790
> 
> 标签：c++, python, autotools, boost-python, automake

所以我有一个 GUI 程序，里面有很多“东西”。我正在添加一个 python 脚本接口，以便有人可以与这个环境进行有问题的交互。我正在使用boost python。所以我首先要创建一个新模块。为简单起见，现在我的模块只是 hello world...

```
#include <boost/python.hpp>                                                     

char const* greet() {                                                           
   return "hello, world" ;                                                      
}                                                                               

BOOST_PYTHON_MODULE(cerrnimapi) {                                               
  boost::python::def( "greet", greet ) ;                                        
} 
```

在我的系统中，我有一个看起来像这样的类......

```
Controller::Controller( ) {         
  Py_Initialize( ) ;                                                            

  main_module = boost::python::import( "__main__" ) ;                           
  main_namespace = main_module.attr( "__dict__" ) ;                             
}                                                                                                                                                     

void Controller::execute_script( std::string filename ) {                       
  try {                                                                         
    boost::python::api::object ignored =                                        
      boost::python::exec_file( filename.c_str(), main_namespace ) ;            
  } catch( boost::python::error_already_set const & ) {                         
    if (PyErr_ExceptionMatches(PyExc_ZeroDivisionError)) {                      
    } else {                                                                    
        PyErr_Print();                                                          
    }                                                                           
  }                                                                             
} 
```

现在，当我在 GUI 中执行脚本时，出现错误...

```
Traceback (most recent call last):
  File "/home/mokon/repository/trunk/python.py", line 1, in <module>
    import cerrnimapi
ImportError: No module named cerrnimapi 
```

所以我当然在构建错误的东西。我的构建系统使用自动工具，所以这里有一些与此相关的构建系统......

在configure.ac中：

```
AM_PATH_PYTHON                                                                  
AC_ARG_VAR([PYTHON_INCLUDE], [Include flags for python, bypassing python-config])
AC_ARG_VAR([PYTHON_CONFIG], [Path to python-config])                            
AS_IF([test -z "$PYTHON_INCLUDE"], [                                            
  AS_IF([test -z "$PYTHON_CONFIG"], [                                           
    AC_PATH_PROGS([PYTHON_CONFIG],                                              
                  [python$PYTHON_VERSION-config python-config],                 
                  [no],                                                         
                  [`dirname $PYTHON`])                                          
    AS_IF([test "$PYTHON_CONFIG" = no], [AC_MSG_ERROR([cannot find python-config for $PYTHON.])])
  ])                                                                            
  AC_MSG_CHECKING([python include flags])                                       
  PYTHON_INCLUDE=`$PYTHON_CONFIG --includes`                                    
  AC_MSG_RESULT([$PYTHON_INCLUDE])                                              
])                                                                              

AC_ARG_VAR([PYTHON_LD], [Linker flags for python, bypassing python-config])     
AS_IF([test -z "$PYTHON_LD"], [                                                 
  AS_IF([test -z "$PYTHON_CONFIG"], [                                           
    AC_PATH_PROGS([PYTHON_CONFIG],                                              
                  [python$PYTHON_VERSION-config python-config],                 
                  [no],                                                         
                  [`dirname $PYTHON`])                                          
    AS_IF([test "$PYTHON_CONFIG" = no], [AC_MSG_ERROR([cannot find python-config for $PYTHON.])])
  ])                                                                            
  AC_MSG_CHECKING([python linker flags])                                        
  PYTHON_LD=`$PYTHON_CONFIG --ldflags`                                          
  AC_MSG_RESULT([$PYTHON_LD])                                                   
]) 
```

在我的 obj/ 目录 Makefile.am...

```
pyexec_LTLIBRARIES = cerrnimapi.la                                              
cerrnimapi_la_SOURCES = ${SRC_DIR}/lib/PythonAPI.cpp                            
cerrnimapi_la_LDFLAGS = -avoid-version -module $(PYTHON_LD)                     
cerrnimapi_la_CXXFLAGS = $(PYTHON_INCLUDE) 
```

我的 makefile 与我的主程序一起在 obj 文件夹中构建共享库及其。这没有帮助。我还进行了 make install 以在 python 文件夹中安装 cerrnimapi 库。这没有帮助。

我也尝试将 PythonAPI.cpp 添加到我的主程序 SOURCES 但无济于事。

有任何想法吗？让我知道哪些附加信息会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:54:25.903

需要检查的一些事项：

*   运行`nm`您的 .so 文件（可能位于`.libs`）以确保您的模块 init func 已导出。
*   让你的程序打印出`sys.path`（使用 PyRun_SimpleString）的值，看看它期望你的模块出现在哪里。如果您只为解释器定义模块，您可能不想将它们安装在`$pyexecdir`.
*   阅读[扩展嵌入式 Python](http://docs.python.org/2/extending/embedding.html#extending-embedded-python)文章。您根本不需要构建动态库，除非您正在尝试插件架构。

关于风格的一点：你应该尝试`$PYTHON_CONFIG`在你的测试之外找到`$PYTHON_INCLUDE`，`$PYTHON_LD`所以你不会做`AC_PATH_PROGS`两次：

```
AM_PATH_PYTHON                                                                  
AC_ARG_VAR([PYTHON_CONFIG], [Path to python-config])                            
AS_IF([test -z "$PYTHON_CONFIG"], [                                           
  AC_PATH_PROGS([PYTHON_CONFIG],                                              
                [python$PYTHON_VERSION-config python-config],                 
                [no],                                                         
                [`dirname $PYTHON`])                                          
])                                                                            

AC_ARG_VAR([PYTHON_INCLUDE], [Include flags for python, bypassing python-config])
AS_IF([test -z "$PYTHON_INCLUDE"], [                                            
  AC_MSG_CHECKING([python include flags])                                       
  AS_IF([test "$PYTHON_CONFIG" = no], [AC_MSG_ERROR([cannot find python-config for $PYTHON.])])
  PYTHON_INCLUDE=`$PYTHON_CONFIG --includes`                                    
  AC_MSG_RESULT([$PYTHON_INCLUDE])                                              
])                                                                              

AC_ARG_VAR([PYTHON_LD], [Linker flags for python, bypassing python-config])     
AS_IF([test -z "$PYTHON_LD"], [                                                 
  AC_MSG_CHECKING([python linker flags])                                        
  AS_IF([test "$PYTHON_CONFIG" = no], [AC_MSG_ERROR([cannot find python-config for $PYTHON.])])
  PYTHON_LD=`$PYTHON_CONFIG --ldflags`                                          
  AC_MSG_RESULT([$PYTHON_LD])                                                   
]) 
```

# privileges - 权限管理

> ID：13852881
> 
> 赞同：-1
> 
> 时间：2012-12-13T04:19:08.230
> 
> 标签：privileges

我有一个奇怪的问题。假设有一个 8 位字符串来表示某个进程的权限。我有 4 种特权 A、B、C、D。在每个类别下，也可能有子权限。如何仅用 8 位表示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:01:19.910

如果它们是分离的，只需为每个特权赋予其唯一的 ID，并希望它们永远不会超过 256。使用查找表来了解它们是什么，以及它们具有哪些超类别。

# c# - 如何使用 Assembly.GetExecutingAssembly().GetName().Name 获取项目命名空间名称

> ID：13852885
> 
> 赞同：1
> 
> 时间：2012-12-13T04:19:24.237
> 
> 标签：c#, reflection, .net-assembly

我正在创建类库文件。在此我嵌入了存储过程脚本文件。所以我需要将 sp 数据作为字符串，我必须在 c# 中创建。所以对于这个 GetManifestResourceStream 方法需要汇编和脚本文件的全名。所以我做了 。但我不明白为什么我的流对象得到空值。

```
string strNameSpace = System.Reflection.Assembly.GetExecutingAssembly().GetName().Name;

using (Stream stream = Assembly.GetExecutingAssembly()
   .GetManifestResourceStream(strNameSpace + "GP_SOP_AdjustTax.sql")) 
{
  // Here stream  is null.

  using (StreamReader reader = new StreamReader(stream))
  {
    string result = reader.ReadToEnd();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:30:38.500

通过获取程序集名称来获取常量字符串值有点奇怪......但是你缺少“。” 在构造名称的方式上：

```
 Assembly.GetExecutingAssembly()
   .GetManifestResourceStream(strNameSpace + ".GP_SOP_AdjustTax.sql")) 
```

简单地对名称进行硬编码可能会更安全、更容易：

```
 Assembly.GetExecutingAssembly()
   .GetManifestResourceStream("WhateverYoourNamespaceIs.GP_SOP_AdjustTax.sql")) 
```

注意“如何嵌入和访问资源”可在[Micorsoft 支持站点上](http://support.microsoft.com/kb/319292)找到并涵盖此主题。

# java - 具有合并列标题的 JTable

> ID：13852886
> 
> 赞同：0
> 
> 时间：2012-12-13T04:19:29.173
> 
> 标签：java, swing, jtable

我正在开发一个系统，我需要创建一个特殊的表来看看：

![在此处输入图像描述](../Images/9286b10ca70c377533c19a1a330b5e15.png)

行标题和列标题始终是静态的。

是否可以使用 Netbeans 创建那种表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:19:16.183

请按照有关如何添加的[链接](http://www.esus.com/docs/GetQuestionPage.jsp?uid=1272)`Nested Table Header`。

# r - 如何舍入由数字、NA 和 NaN 组成的向量

> ID：13852887
> 
> 赞同：3
> 
> 时间：2012-12-13T04:19:29.760
> 
> 标签：r

舍入由数字、NA 和 NaN 组成的向量的最佳方法是什么。我不想省略 NA 或 NaN 因为我想保留数字的顺序。

```
x = c(2,3,4,NA,"NaN",3, 5)
round(x,2)  #does not work 
```

编辑：round(x, 2) 中的错误：数学函数的非数字参数

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T04:40:00.000

`x`是一个字符向量，因为它包含一个字符`"NaN"`。转换`x`为数字会有所帮助。

```
x = c(2,3,4,NA,"NaN",3, 5)
class(x) # To see the class of x
round(as.numeric(x),2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T04:49:56.247

```
 library(plyr)

 round_any(x,1)
  [1]   2   3   4  NA NaN   3   5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T04:25:16.460

NaN 周围不应该有引号。“NaN”是一个字符串；NaN 是数字。如果这发生在您的玩具示例之外，则表明您的代码中的其他地方存在问题。

```
x = c(2,3,4,NA,NaN,3, 5)
round(x,2)  
# [1]   2   3   4  NA NaN   3   5 
```

# html - 出于什么目的，Google 搜索结果页面上存在一些隐藏元素？

> ID：13852888
> 
> 赞同：2
> 
> 时间：2012-12-13T04:19:31.473
> 
> 标签：html, css

我只是在检查带有调试功能的页面，并发现了这些隐藏元素。有谁知道，为什么这些元素没有显示属性。左起第一个是 iframe，其余是文本区域

![左起第一个是 iframe，其余是文本区域](../Images/eaa1415ca447f56b0ed8e2f25281c166.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:53:00.007

有时，一些后端逻辑和数据管理需要一些输入操作来控制操作和数据。这不属于前端和表示层，所以它保持隐藏。总之，背景工作。

# ruby-on-rails - Rails 3.2.9 中的“rails 控制台”命令引发错误

> ID：13852890
> 
> 赞同：1
> 
> 时间：2012-12-13T04:19:37.993
> 
> 标签：ruby-on-rails, ruby, console, rails-console, javascript

我正在使用带有 ruby​​ 1.9.3 的 Rails 3.2.9（默认使用 RVM）。当我执行命令'rails console'/'rails c'时，从我的test_app的根目录中，显示以下错误。

```
rails console
/home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
    from /home/local/rajesh.co/Rajesh/blog/config/application.rb:7:in `<top (required)>'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands.rb:39:in `require'
    from /home/local/rajesh.co/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands.rb:39:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:42:25.810

是的，我得到了我的问题的答案。

只需在应用程序文件夹的根目录中打开文件“Gemfile”，然后将下面的行粘贴到那里。

```
gem 'execjs'

gem 'libv8'

gem 'therubyracer' 
```

粘贴后，只需保存文件并在命令提示符下执行“捆绑更新”。

成功完成包更新后，您尝试运行“rails c”或“rails console”以获取 rails 控制台。有用！！

谢谢你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:26:01.007

尝试安装

```
gem 'therubyracer' 
```

[资源](http://www.ruby-forum.com/topic/1899392)

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T04:27:08.420

安装以下两个：

```
gem 'execjs'
gem 'therubyracer' 
```

# javascript - 如何在按钮单击中展开树视图的所有节点？

> ID：13852891
> 
> 赞同：1
> 
> 时间：2012-12-13T04:19:45.900
> 
> 标签：javascript, jquery, html-lists

我通过使用`li`和`ul`格式化（不使用`TreeView`控件）创建了一个树视图。我想使用 JavaScript 扩展所有节点。请帮我。

我的树视图 CSS 如下：

```
#sitemap, #sitemap ul, #sitemap li
{
    margin: 0;
    padding: 0;
    list-style: none;
}
#sitemap
{
    background: url(../content/images/line1.gif) repeat-y;
}
#sitemap li
{
    line-height: 20px;
    margin-top: 1px;
    position: relative;
    width: 100%;
}
/* IE leaves a blank space where span is added so this is to avoid that */#sitemap li
{
    float: left;
    display: inline;
}
#sitemap li a
{
    padding-left: 3px;
}
#sitemap li a.but
{
    padding: 1px;
    border: solid 1px #c0c0c0;
    color: #080808;
    font-size: 7pt;
    margin: 2px;
    font-weight: normal;
    background-color: #efefef;
}
#sitemap li a.butGroup
{
    padding: 2px;
    border: solid 1px #888;
    color: #080808;
    font-size: 7pt;
    margin: 2px;
    background-color: #efefef;
    font-weight: bold;
}
#sitemap li span
{
    float: left;
    position: absolute;
    top: 5px;
    left: 5px;
    width: 13px;
    height: 13px;
    cursor: auto;
    font-size: 0;
}
#sitemap li span, #sitemap li span.collapsed
{
    background: url(../content/images/collapsed.gif) no-repeat 0 0;
}
#sitemap li span.expanded
{
    background: url(../content/images/expanded.gif) no-repeat 0 0;
}
#sitemap li span.dot
{
    background: url(../content/images/line2.gif) no-repeat -5px -5px;
}
#sitemap li ul
{
    margin-left: 25px;
    display: block;
    clear: both;
    background: #fff url(../content/images/line1.gif) repeat-y;
}
#sitemap li li
{
    background: url(../content/images/line2.gif) no-repeat 0 0;
}
#sitemap, #sitemap ul
{
    min-height: 1%;
}
#sitemap:after, #sitemap ul:after
{
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
}
#sitemap, #sitemap ul
{
    display: block;
}
#sitemap ul
{
    display: none;
}
#sitemap li div.butHolder
{
    clear: both;
    margin: 10px 3px 3px 30px;
}
#sitemap li input[type=text]
{
    width: 25px;
    padding: 2px;
    height: 14px;
    border: solid 1px #888;
    text-align: center;
}
div.LinkGroup
{
    width: 95%;
    margin-left: 20px;
    text-align: left;
    border: solid 1px #efefef;
    background-color: #fcfcfc;
}
div.LinkGroup div
{
    padding: 2px 1px 2px 1px;
    font-size: 8pt;
}
div.TR
{
    width: 100%;
    margin-left: 20px;
    text-align: left;
    clear: both;
}
div.TR div.TH, div.TR div.TD
{
    float: none;
    min-width: 50px;
    white-space: nowrap;
    padding: 3px;
} 
```

JavaScript：

```
$(document).ready
(function () {
    if ($("#sitemap").length > 0) {

        $("#sitemap").find("li").each
        (
            function () {
                var $span = $("<span></span>");
                $(this).toggleClass("expanded");
                if ($(this).find("ul:first").length > 0) {

                    $(this).find("ul:first").css("display", "none");
                    $span.attr("class", "collapsed");

                    //
                    //if more link clicks of "Manage Links" page functionality than show it expanded.
                    //or delete the element show parent menu expanded
                    //
                    if (jQuery.trim($(this).find("ul:first").css("content")).indexOf('expanded') > -1) {
                        $span.removeAttr("class");
                        $span.attr("class", "expanded");
                        $(this).find("ul:first").css("display", "block");
                    }

                    $span.click(function () {
                        $(this).toggleClass("expanded");
                        $(this).parent("li").find("ul:first").slideToggle("normal");
                    }
                    )

                    $(this).append($span);
                }
                else {
                    $span.removeAttr("class");
                    $span.attr("class", "dot");
                    $(this).append($span);
                }
            }
        )
    }
}
) 
```

////HTML结构

```
<ul id="sitemap">
    <li>
        <div class='TR'>
            <div class='TH'>
                <input type='checkbox' id='module_1' class='module' moduleid='1' />
                Start Configurations</div>
        </div>
        <ul style='display: none;'>
            <li>
                <div class='TR'>
                    <div class='TH'>
                        <input type='checkbox' name='menu_1' class='child' id='menu_1' moduleid='1' parent='0'
                            checked='checked' />
                        Customer Registration</div>
                </div>
            </li>
            <li>
                <div class='TR'>
                    <div class='TH'>
                        <input type='checkbox' name='menu_9' class='child' id='menu_9' moduleid='1' parent='0'
                            checked='checked' />
                        Configure Project</div>
                </div>
                <ul style='display: none;'>
                    <li>
                        <div class='TR'>
                            <div class='TH'>
                                <input type='checkbox' name='menu_10' class='child' id='menu_10' moduleid='1' parent='9'
                                    checked='checked' />
                                Search Customer</div>
                        </div>
                    </li>
                    <li>
                        <div class='TR'>
                            <div class='TH'>
                                <input type='checkbox' name='menu_12' class='child' id='menu_12' moduleid='1' parent='9'
                                    checked='checked' />
                                Test</div>
                        </div>
                        <ul style='display: none;'>
                            <li>
                                <div class='TR'>
                                    <div class='TH'>
                                        <input type='checkbox' name='menu_13' class='child' id='menu_13' moduleid='1' parent='12'
                                            checked='checked' />
                                        Test_Child</div>
                                </div>
                            </li>
                            <li>
                                <div class='TR'>
                                    <div class='TH'>
                                        <input type='checkbox' name='menu_14' class='child' id='menu_14' moduleid='1' parent='12'
                                            checked='checked' />
                                        Test_Child2</div>
                                </div>
                            </li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
    <li>
        <div class='TR'>
            <div class='TH'>
                <input type='checkbox' id='module_2' class='module' moduleid='2' />
                Edit Configuration</div>
        </div>
        <ul style='display: none;'>
            <li>
                <div class='TR'>
                    <div class='TH'>
                        <input type='checkbox' name='menu_3' class='child' id='menu_3' moduleid='2' parent='0'
                            checked='checked' />
                        Edit Configuration</div>
                </div>
            </li>
            <li>
                <div class='TR'>
                    <div class='TH'>
                        <input type='checkbox' name='menu_11' class='child' id='menu_11' moduleid='2' parent='0'
                            checked='checked' />
                        Edit Customer Deatils</div>
                </div>
            </li>
        </ul>
    </li>
    <li>
        <div class='TR'>
            <div class='TH'>
                <input type='checkbox' id='module_3' class='module' moduleid='3' />
                Administration</div>
        </div>
        <ul style='display: none;'>
            <li>
                <div class='TR'>
                    <div class='TH'>
                        <input type='checkbox' name='menu_4' class='child' id='menu_4' moduleid='3' parent='0'
                            checked='checked' />
                        Project Stage</div>
                </div>
            </li>
            <li>
                <div class='TR'>
                    <div class='TH'>
                        <input type='checkbox' name='menu_5' class='child' id='menu_5' moduleid='3' parent='0'
                            checked='checked' />
                        Module Management</div>
                </div>
            </li>
            <li>
                <div class='TR'>
                    <div class='TH'>
                        <input type='checkbox' name='menu_6' class='child' id='menu_6' moduleid='3' parent='0'
                            checked='checked' />
                        Question Management</div>
                </div>
            </li>
            <li>
                <div class='TR'>
                    <div class='TH'>
                        <input type='checkbox' name='menu_7' class='child' id='menu_7' moduleid='3' parent='0'
                            checked='checked' />
                        Access Group</div>
                </div>
            </li>
            <li>
                <div class='TR'>
                    <div class='TH'>
                        <input type='checkbox' name='menu_8' class='child' id='menu_8' moduleid='3' parent='0'
                            checked='checked' />
                        User Creation</div>
                </div>
            </li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T06:24:33.950

//展开

```
<script type="text/javascript">
    function fun1() {
        if ($("#sitemap").length > 0) {

            $("#sitemap").find("li").each
            (
                function () {
                    var $span = $("<span></span>");
                    //$(this).toggleClass("expanded");
                    if ($(this).find("ul:first").length > 0) {
                        $span.removeAttr("class");
                        $span.attr("class", "expanded");
                        $(this).find("ul:first").css("display", "block");
                        $(this).append($span);
                    }

                }
            )
        }

    }

</script> 
```

//折叠

```
<script type="text/javascript">
    function fun() {

        if ($("#sitemap").length > 0) {

            $("#sitemap").find("li").each
            (
                function () {
                    var $span = $("<span></span>");
                    if ($(this).find("ul:first").length > 0) {
                        $(this).find("ul:first").css("display", "none");
                        $span.attr("class", "collapsed");
                        $(this).append($span);
                    }

                }
            )
        }
    }

</script> 
```

# python - 使用单个变量索引嵌套字典

> ID：13852896
> 
> 赞同：4
> 
> 时间：2012-12-13T04:20:20.130
> 
> 标签：python, dictionary

想象一下，你有一个 Python 字典：`myDic = {'a':1, 'b':{'c':2, 'd':3}}`. 您当然可以将变量设置为键值并在以后使用它，例如：

```
myKey = 'b'
myDic[myKey]
>>> {'c':2, 'd':3} 
```

但是，有没有办法以某种方式将变量设置为一个值，当用作键时，该值也会挖掘到子字典中？有没有办法在python中完成以下伪代码？

```
myKey = "['b']['c']"
myDic[myKey]
>>> 2 
```

因此，首先它使用“b”作为键，然后再使用“c”作为键。显然，如果从第一次查找返回的值不是字典，它将返回错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T04:27:15.800

不，您不能将任何内容放入变量中，以便`myDict[myKey]`挖掘嵌套字典。

这是一个可能对您有用的功能：

```
def recursive_get(d, keys):
    if len(keys) == 1:
        return d[keys[0]]
    return recursive_get(d[keys[0]], keys[1:]) 
```

例子：

```
>>> myDic = {'a':1, 'b':{'c':2, 'd':3}}
>>> recursive_get(myDic, ['b', 'c'])
2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T04:26:22.993

不，不是普通的听写。您只能访问`myDict[key]`实际上是. `myDict`但如果`myDict`包含其他字典，则这些嵌套字典的值不是`myDict`.

根据您对数据结构所做的工作，可以通过使用元组键而不是嵌套字典来获得所需的内容。而不是拥有`myDic = {'b':{'c':2, 'd':3}}`，你可以拥有`myDic = {('b', 'c'):2, ('b', 'd'): 3}`。然后你可以使用类似的东西访问这些值`myDic['b', 'c']`。你确实可以这样做：

```
val = 'b', 'c'
myDic[val] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T04:27:32.877

AFAIK，你不能。如果您考虑 python 的工作方式，它会从内到外从左到右进行评估。 `[]`是`__getitem__`在这种情况下的简写。因此，您需要解析您传入的参数`__getitem__`（无论您传入什么）并智能地处理它。如果你想有这样的行为，你需要继承/编写你自己的`dict`类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T04:33:04.250

```
myDict = {'a':1, 'b':{'c':2, 'd':3}}
k = 'b'

myDict.get(k) should give
{'c':2, 'd':3}

and either
d.get(k)['c'] 
OR

k1 = 'c'
d.get(k).key(k1) should give 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-06T18:13:11.667

很老的问题。没有内置函数。

`functools.reduce`使用和的紧凑解决方案`operator.getitem`：

```
from functools import reduce
from operator import getitem

d = {'a': {'b': ['banana', 'lemon']}}
p = ['a', 'b', 1]

v = reduce(getitem, p, d)
# 'lemon' 
```

# vb.net - 将水晶报表导出为pdf

> ID：13852897
> 
> 赞同：3
> 
> 时间：2012-12-13T04:20:24.657
> 
> 标签：vb.net

我想知道如何通过代码导出带有4个参数的水晶报表。我尝试了以下代码并返回“无效索引错误”。

```
Dim crParameterFieldDefinitions As ParameterFieldDefinitions
        Dim crParameterFieldDefinition As ParameterFieldDefinition
        Dim crParameterValues As New ParameterValues
        Dim crParameterDiscreteValue As New ParameterDiscreteValue
        Dim crParamenter_array As New ParamArrayAttribute
        Dim cryRpt As New ReportDocument
        Dim DefaultPrinterName As String
        Dim oPS As New System.Drawing.Printing.PrinterSettings
        Dim sFilePath As String
        Dim sPath As String
        Dim sFileLoc As String
        Dim sFileName As String
        Try
            sPath = Path.GetTempPath()
            DefaultPrinterName = oPS.PrinterName
            sFilePath = GetCrystalReport(_REPRT_CODE)
            sFileLoc = sPath + "Reports\" + _REPRT_CODE + ".rpt"
            If sFilePath = String.Empty OrElse sFilePath = Nothing Then
                TNotification.StatusBarError("File Not Found.")
                Return False
            Else
                cryRpt.Load(sFileLoc)
            End If
            If Not SetDbLogonInfo(cryRpt) Then
                TNotification.StatusBarError("Database Login Failed.")
                Return False
            Else
                crParameterDiscreteValue.Value = _empid
                crParameterDiscreteValue.Value = _month
                crParameterDiscreteValue.Value = _parea
                crParameterDiscreteValue.Value = _year

                crParameterFieldDefinitions = cryRpt.DataDefinition.ParameterFields
                crParameterFieldDefinition = crParameterFieldDefinitions.Item("empid")
                crParameterFieldDefinition = crParameterFieldDefinitions.Item("month")
                crParameterFieldDefinition = crParameterFieldDefinitions.Item("parea")
                crParameterFieldDefinition = crParameterFieldDefinitions.Item("year")

                crParameterValues = crParameterFieldDefinition.CurrentValues
                '   crParameterValues.Clear()
                crParameterValues.Add(crParameterDiscreteValue)
                crParameterFieldDefinition.ApplyCurrentValues(crParameterValues)
                cryRpt.PrintOptions.PrinterName = DefaultPrinterName
                Dim rep As CrystalDecisions.CrystalReports.Engine.FieldObject = Nothing
                'sending report to the printer
                'cryRpt.PrintToPrinter(_noOfCpys, False, 1, 100)
                Dim CrExportOptions As ExportOptions
                Dim CrDiskFileDestinationOptions As New  _
                DiskFileDestinationOptions()
                Dim CrFormatTypeOptions As New PdfRtfWordFormatOptions()
                ' CrDiskFileDestinationOptions.DiskFileName = "c:\" + _rptCode + "_" + _docEntry + ".pdf"
                'sFileName = "\\B1devsrv\b1_shr\Attachments\" + _rptCode + "_" + _docEntry.ToString + ".pdf"
                sFileName = TSQL.GetSingleRecord("Select AttachPath  from OADP").ToString.Trim + _empid + "_payslip.pdf"
                CrDiskFileDestinationOptions.DiskFileName = sFileName
                CrExportOptions = cryRpt.ExportOptions
                With CrExportOptions
                    .ExportDestinationType = ExportDestinationType.DiskFile
                    .ExportFormatType = ExportFormatType.PortableDocFormat
                    .DestinationOptions = CrDiskFileDestinationOptions
                    .FormatOptions = CrFormatTypeOptions

                End With
                cryRpt.Export()
                If SendMail(_empid.ToString, sFileName) Then
                    TNotification.MessageBox("Email Sent")
                End If

                If File.Exists(sFileLoc) Then
                    '  File.Delete(strFileLoc)
                End If
            End If
            Return True
        Catch ex As Exception
            Throw ex
        End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T11:32:11.183

你可以使用这样的东西：

```
 cryRpt.ExportToHttpResponse(ExportFormatType.PortableDocFormat, Response, False,"ExportedReport") 
```

# javascript - 使用 jQuery 创建元素时，“click”和“onclick”有什么区别？

> ID：13852899
> 
> 赞同：10
> 
> 时间：2012-12-13T04:20:50.727
> 
> 标签：javascript, jquery

有什么区别

```
$("<a>", {
    "id" : "myId",
    "text" : "my link",
    "href" : "#",
    "onclick" : function() { return false; }
); 
```

和

```
$("<a>", {
    "id" : "myId",
    "text" : "my link",
    "href" : "#",
    "click" : function() { return false; }
); 
```

?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-13T04:23:41.297

使用`onclick`创建一个*属性*，它的值应该是一个引用函数的字符串，而不是一个实际的函数。using在元素上`click`创建一个*属性*，其值应该是函数本身。

所以，第一个写错了；应该是这样的：

```
$("<a>", {
    "id" : "myId",
    "text" : "my link",
    "href" : "#",
    "onclick" : "somefunction()"
} ); 
```

其中“somefunction”在全局范围内定义：

```
window.somefunction = function() { return false; } 
```

# java - 具有多个键的Java WeakHashMap？

> ID：13852901
> 
> 赞同：5
> 
> 时间：2012-12-13T04:21:01.260
> 
> 标签：java, scala, garbage-collection, hashmap

我正在寻找与

```
WeakHashMap<K, V> 
```

类，除了它将多个键映射到一个值，所以它真的更像

```
WeakHashMap<K1, K2, V>
WeakHashMap<K1, K2, K3, V>
etc. 
```

您`get`和`set`条目的方式就像数据库中的多列主键：您使用多个键放置项目，例如`(K1, K2)`，并且要取出该项目，您需要提供您用来放入它的*所有*`get`相同的键。鉴于这些&`set`语义，GC 语义将是：一个条目将在不再可达时被 GC，这意味着它的*任何*键都不再可达。

以前有没有其他人需要这样的东西？您将如何处理这样的要求？像在非弱 HashMap 中那样存储元组作为键是行不通的（元组几乎立即被 GC，没有人指向它）。

如果在我很乐意使用它之前已经制作了这样的东西，但只是想想想我将如何用 Wea​​kReferences 和普通的 hashmap 构建这样的东西，然后我想出了一个空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:56:16.233

有趣的问题。我不知道这个的任何实现，但我会通过调整源代码来解决它`WeakHashMap`。它使用 a`ReferenceQueue`并在几乎每个公共方法开始时对其进行轮询，删除每个 gc 引用的条目。

以下是我如何适应`WeakHashMap`多键弱图的粗略概述：

1.  像您描述的那样定义一个复合键并将其用于主条目集
2.  维护从关键组件到其参与的键集的内部映射
3.  当你在 上找到一个引用组件时`ReferenceQueue`，查找它参与的键集，并从主条目集中删除这些键
4.  您还需要从每个其他关键组件的集合中删除它参与的每个键。也就是说，假设您在参考队列中找到了一个关键组件 c [1]并且它参与了密钥 k [1]，...，k [n]。然后对于每个 k [i]，如果其他关键组件是 c [2]和 c [3]，则需要从 c [2]和 c [3]的密钥集中删除 k [i]，以及删除 c [1]的整个条目。
5.  当组件的键集为空时，您可能还应该删除该组件的键集映射条目。这意味着您可能会在引用队列中找到在组件到键集映射中没有相应数据的组件。

美中不足的是，所有这些内部映射必须以不会阻止关键组件被 gc'ed 的方式设置。也就是说，在这个多键映射结构中不能有硬（或软）引用。`WeakHashMap`通过使其内部`Entry`类（实现`Map.Entry`）扩展来实现这一点`WeakReference`。当一个键被 gc'ed 时，`Entry`被放置在引用队列中的是对象，而不是键本身。在所有内部结构的设计中都必须使用这样的东西（复合键对象、条目集、从键组件到键集的映射以及键集本身）。

# paypal - 如何从 PayPal 重新创建 IPN？

> ID：13852911
> 
> 赞同：0
> 
> 时间：2012-12-13T04:21:59.753
> 
> 标签：paypal, paypal-ipn

我们的一个脚本中有一个错误，即使正确调用了来自 PayPal 的 notify_url，我们的系统也无法记录它，因为它有错误。

因此，我们在 PayPal 中有几笔交易没有添加到我们的数据库中，有没有办法重新创建 PayPal 的 IPN 或为每笔交易重新执行 notify_url？

谢谢！

仅供参考：我们使用的是网站支付标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:34:12.317

进入您的 PayPal 个人资料，然后进入即时付款通知首选项。您将在此处看到 IPN 历史记录的链接。您可以查看 PayPal 发送到您系统的所有 IPN 及其状态。您可以根据需要从此历史列表中选择 IPN 重新发送它们，以便您的系统可以相应地处理它们。

# database - Django：从数据库中提取而不是推送到数据库

> ID：13852912
> 
> 赞同：0
> 
> 时间：2012-12-13T04:22:12.447
> 
> 标签：database, django

我继承了 av 1.0 Django/Python 内网站点。

Django 通常将 Django 代码推送到数据库中。例如，表定义（DDL）。

与该项目相关的数据库架构师有一个新的数据库设计，他们希望我将其连接到该站点。

也就是说，我需要以某种方式将 DDL 定义从数据库中提取到 Django 代码中。例如，某种从表中生成新类的方法。

我知道很多 python 但对 Django 知之甚少。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T04:25:17.237

是的，Django 可以使用预先存在的数据库。看看[这个](https://docs.djangoproject.com/en/1.4/howto/legacy-databases/)。

基本上，您需要从数据库中提取模型的命令是`python manage.py inspectdb > models.py`

# scala - 没有变量的scala编程

> ID：13852922
> 
> 赞同：2
> 
> 时间：2012-12-13T04:24:06.553
> 
> 标签：scala

val 和 var 在 scala 中，我认为这个概念是可以理解的。

我想做这样的事情（类似java）：

```
trait PersonInfo {
  var name: Option[String] = None
  var address: Option[String] = None
  // plus another 30 var, for example 
 }
case class Person() extends PersonInfo
object TestObject {
  def main(args: Array[String]): Unit = {
         val p = new Person()
         p.name = Some("someName")
         p.address = Some("someAddress")
  }
} 
```

所以我可以更改姓名，地址等...

这工作得很好，但问题是，在我的程序中，我最终将所有内容都作为 vars。据我了解 val 在scala中是“首选”。val 如何在这种类型的示例中工作，而不必在每次更改其中一个参数时都重写所有 30 多个参数？

也就是说，我可以

```
trait PersonInfo {
  val name: Option[String] 
  val address: Option[String] 
  // plus another 30 val, for example 
 }
case class Person(name: Option[String]=None, address: Option[String]=None, ...plus another 30.. ) extends PersonInfo
object TestObject {
  def main(args: Array[String]): Unit = {
         val p = new Person("someName", "someAddress", .....)
         // and if I want to change one thing, the address for example
         val p2 = new Person("someName", "someOtherAddress", .....)
  }
} 
```

这是“正常”的 scala 做事方式（不受 22 个参数限制）吗？可以看出，我对这一切都很陌生。

* * *

起初 Tony K. 的基本选项：

def withName(n: String) = Person(n, address)

看起来很有希望，但我有很多扩展 PersonInfo 的类。这意味着在每一个中我都必须重新实现定义，大量的打字和剪切和粘贴，只是为了做一些简单的事情。如果我将特征 PersonInfo 转换为普通类并将所有定义放入其中，那么我会遇到如何返回 Person 而不是 PersonInfo 的问题？是否有一个聪明的 scala 东西可以以某种方式在 trait 或超类中实现并让所有子类真正扩展？

据我所见，当示例非常简单时，2 或 3 个参数在 scala 中所有工作都非常好，但是当你有几十个参数时，它变得非常乏味和不可行。

奇怪加拿大的PersonContext 是我觉得类似的，还在想这个。我想如果我有 43 个参数，我需要分解为多个临时类，以便将参数泵入 Person。

复制选项也很有趣，很神秘，但打字少了很多。

来自 java 我希望从 scala 中获得一些聪明的技巧。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-13T05:41:59.523

案例类有一个预定义的`copy`方法，您应该使用它。

```
case class Person(name: String, age: Int)

val mike = Person("Mike", 42)

val newMike = mike.copy(age = 43) 
```

这是如何运作的？`copy`只是编译器为您编写的方法之一（除了等）`equals`。`hashCode`在这个例子中是：

```
def copy(name: String = name, age: Int = age): Person = new Person(name, age) 
```

值`name`和`age`此方法中的值会影响外部范围内的值。如您所见，提供了*默认值*，因此您只需指定要更改的值。其他默认为当前实例中的内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T04:30:07.793

scala中存在var的原因是为了支持可变状态。在某些情况下，可变状态确实是您想要的（例如出于性能或清晰度的原因）。

不过，您是对的，鼓励使用不可变状态的背后有很多证据和经验。事情在许多方面都做得更好（并发性、清晰的理由等）。

您的问题的一个答案是为相关类提供突变方法，这些方法实际上不会改变状态，而是返回一个带有修改条目的新对象：

```
case class Person(val name : String, val address : String) {
   def withName(n : String) = Person(n, address)
   ...
} 
```

这个特定的解决方案确实涉及编码可能很长的参数列表，但仅限于类本身。它的用户很容易下车：

```
val p = Person("Joe", "N St")
val p2 = p.withName("Sam")
... 
```

如果您考虑要改变状态的*原因，那么事情就会变得更加清晰。*如果您正在从数据库中读取数据，您可能有很多原因需要改变对象：

*   数据库本身发生了变化，你想自动刷新内存中对象的状态
*   您想对数据库本身进行更新
*   你想传递一个对象，并让它在所有地方都被方法改变

在第一种情况下，不可变状态很容易：

```
val updatedObj = oldObj.refresh 
```

第二种要复杂得多，有很多方法可以处理它（包括带有脏字段跟踪的可变状态）。看看像 Squery 这样的库是值得的，您可以在其中使用漂亮的 DSL 编写内容（请参阅[http://squeryl.org/inserts-updates-delete.html](http://squeryl.org/inserts-updates-delete.html)）并完全避免使用直接对象突变。

最后一个是由于复杂性的原因您通常想要避免的那个。这样的事情很难并行化，难以推理，并导致各种错误，其中一个类引用另一个类，但不能保证它的稳定性。这种用法是我们正在谈论的形式的不可变状态尖叫的用法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T05:14:19.763

Scala 采用了函数式编程的许多范例，其中之一是专注于使用具有不可变状态的对象。这意味着远离类中的 getter 和 setter，而是选择执行上面@Tony K. 建议的操作：当您需要更改内部对象的“状态”时，定义一个返回新`Person`对象的函数。

尝试使用不可变对象可能是*首选*的Scala 方式。

关于 22 参数的问题，你可以创建一个上下文类，传递给 Person 的构造函数：

```
case class PersonContext(all: String, of: String, your: String, parameters: Int)
class Person(context: PersonContext) extends PersonInfo { ... } 
```

如果您发现自己经常更改地址并且不想通过`PersonContext`rigamarole，您可以定义一个方法：

```
def addressChanger(person: Person, address: String): Person = {
    val contextWithNewAddress = ...
    Person(contextWithNewAddress)
} 
```

您可以更进一步，并定义一个方法`Person`：

```
class Person(context: PersonContext) extends PersonInfo {
    ...
    def newAddress(address: String): Person = {
        addressChanger(this, address)
    }
} 
```

在你的代码中，你只需要记住，当你更新你的对象时，你经常会得到新的对象作为回报。一旦你习惯了这个概念，它就会变得非常自然。

# java - Java HashMap 中的 ConcurentModificationException

> ID：13852934
> 
> 赞同：1
> 
> 时间：2012-12-13T04:25:14.853
> 
> 标签：java, concurrency, thread-safety, hashmap

假设我的类中有两个方法，`writeToMap()`并且`processKey()`这两个方法都被多个线程调用。`writeToMap`是一种在 hashmap 中写入内容的方法，用于基于of`processKey()`做某事。`keySet``HashMap`

在 processKey 中，我首先`originalMap`在获取密钥集之前复制。

```
new HashMap<String, Map<String,String>(originalMap).get("xx").keySet(); 
```

`ConcurrentModificationException`但是即使我总是复制哈希图，我仍然会得到。有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T05:56:21.487

HashMap 的复制构造函数在被复制的地图（originalMap）上执行（隐藏）[迭代。](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#HashMap.putAllForCreate%28java.util.Map%29)如果在此迭代过程中 originalMap 被另一个线程修改，您可能会收到 ConcurrentModificationException。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T04:27:16.953

您有嵌套的地图，并且您正在复制外部地图，然后再从中获取内部地图。请注意，内部映射尚未被复制，因此当您对其进行迭代时，您仍在使用共享数据结构。

根据简短的代码片段很难说，但我认为您不需要复制外部地图，您确实需要复制内部地图。

# perl - 遍历包含数十亿行的文件，输出出现次数最多的一行

> ID：13852937
> 
> 赞同：2
> 
> 时间：2012-12-13T04:25:17.820
> 
> 标签：perl, iteration

遍历具有多行国家/地区的文件并打印出出现次数最多的国家/地区的最佳算法/方法是什么？

每行都是一个字符串，每行只包含一个国家名称。

假设可能有 10 亿个不同的国家。（国家是一个坏例子）

```
United States
Iran
India
United States
China
Iran
....
....
Canada //1 billionth line 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T04:31:58.457

```
# Count the unique elements.
my %hash;
while(<>) {
    chomp;
    $hash{$_}++;
}

# Find the key with the largest value.
sub largest_value {
    my $hash = shift;

    my ($big_key, $big_val) = each %$hash;

    while (my ($key, $val) = each %$hash) {
        if ($val > $big_val) {
            $big_key = $key;
            $big_val = $val;
        }
    }

    return $big_key;
}

print largest_value(\%hash); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T05:12:35.107

```
my $big_count = 0;
my @big_keys;

my %counts;
while (<>) {
    chomp;
    my $count = ++$counts{$_};

    if ($counts == $big_count) {
       push @big_keys, $_;
    }
    elsif ($count > $big_count) {
       $big_count = $count;
       @big_keys = $_;
    }
}

print(join(', ', @big_keys), "\n"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T04:29:00.367

您可以只使用整数哈希。虽然有很多行，但国家名称的数量有限，因此文件大小并不重要：

```
use strict;
use warnings;
my %hash;
while(<>) {
  chomp;
  $hash{$_}++;
}

my @sorted = sort { $hash{$b} <=> $hash{$b} } keys %hash;
print "$sorted[0]: $hash{$sorted[0]}\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T04:29:08.340

创建哈希表：key为国家名称，value为出现次数。

# forms - 如果我为我的 windows .net 表单设置背景图像，如何提高表单加载速度？

> ID：13852938
> 
> 赞同：0
> 
> 时间：2012-12-13T04:25:27.807
> 
> 标签：forms, background-image

我的表单有问题：如果我为表单设置背景图像，加载时该表单会非常慢。我该如何克服这个问题？谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:26:54.770

将背景图像更改为 jpg ，您应该可以通过

# events - 如何在另一个项目中使用 xaml 和 viewmodel

> ID：13852940
> 
> 赞同：1
> 
> 时间：2012-12-13T04:25:45.570
> 
> 标签：events, xaml, mvvm, viewmodel, windows-phone

我有一个 WP7application 应用程序，其中包含一个名为 page1.xaml 和 viewmodel 的 xaml 文件。xaml 文件包含一个带有绑定命令的按钮

我有另一个名为 sampleapplication 的项目，我正在其中启动一个模拟器，并且必须显示另一个项目中的上述 page1.xaml 文件。

我可以使用当前项目中的 wp7 应用程序加载上述 xaml 文件

(Application.Current.RootVisual as PhoneApplicationFrame).Navigate(new Uri("/WP7application ;component/Views/page1.xaml", UriKind.Relative));

但我无法在加载 xaml 后处理这些事件。我怎样才能让按钮在我当前的项目中工作？

我已经在我当前的示例应用程序中添加了对 wp7 应用程序视图和视图模型的所有引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T19:22:02.797

It sounds as though the DataContext of your view is not set to an instance of the view model. There are several ways you can do this.

The easiest is simply to put the following code in the Loaded event of the view:

```
private void PhoneApplicationPage_Loaded(object sender, System.Windows.RoutedEventArgs e)
{
    DataContext = new ViewModel();
} 
```

The preferred way is to define a view model locator in your application project. Create an instance of your view model.

```
public class ViewModelLocator
{
    private readonly ViewModel _viewModel = new ViewModel();

    public ViewModel Main
    {
        get { return _viewModel; }
    }
} 
```

Create your view model locator in the App.XAML:

```
<Application xmlns:vm="clr-namespace:groovd.client.phone.ViewModels" >
    <Application.Resources>
        <ResourceDictionary>
            <vm:ViewModelLocator xmlns:vm="clr-namespace:MyApp.ViewModels" x:Key="Locator" />
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

Then get the property from the view model locator in the page:

```
<phone:PhoneApplicationPage 
    DataContext="{Binding Main, Source={StaticResource Locator}}">
</phone:PhoneApplicationPage> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:02:06.730

您可以轻松地将视图和视图模型放在单独的程序集中，但其中包含视图的程序集（应用程序或库）必须引用视图模型所在的库。

不过有两点需要注意：
1\. 如果您对视图和视图模型使用不同的程序集，则视图模型必须在类库中而不是主应用程序中。
2\. 一定要结构化你的代码，这样你就没有任何循环引用。（随着复杂性的增加，这可能需要纪律来避免。）

# php - 如何按今天的日期显示表格数据？

> ID：13852944
> 
> 赞同：0
> 
> 时间：2012-12-13T04:26:28.253
> 
> 标签：php, date

我有一个名为 gameschedules 的数据库和一个名为 dec1212 的表。此表的内部是列`date (YYYY-MM-DD)`, `division`, `field`, `time`, `team1`, 和按此`team2`顺序排列。

我的页面上已经显示了数据，但我需要将其限制为仅显示数据库中日期等于当前日期的行。因此，如果有 10 行并且其中只有 5 行在日期列中有今天的日期，那么只有那些应该显示。这是我当前的查询代码，我知道这是错误的，但如果有人可以帮助我纠正它，那就太好了：

当前代码：

```
//specifies that it is getting data from the table and limited num rows
$result = mysql_query("SELECT * FROM `dec1212` LIMIT 0, 10 ") or die(mysql_error()); 
```

这是我试图按日期限制数据的方法：

```
//set variable to current date with same format as date column
$myDate = date('Y-m-d');
//pull only rows that match the current date
$result = mysql_query("SELECT * FROM 'dec1212' WHERE date = $myDate()") or die(mysql_error()); 
```

我知道我的代码不正确，所以这就是我寻求帮助的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T04:37:21.747

试试这只是一个信号线查询

```
$result = mysql_query('SELECT * FROM dec1212 WHERE DATE(CONVERT_TZ(date,"+00:00","-8.00")) = DATE(CONVERT_TZ(UTC_TIMESTAMP(),"+00:00","-8.00"))') or die(mysql_error());** 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T04:31:13.120

```
$myDate = date('Y-m-d');
//pull only rows that match the current date
$result = mysql_query("SELECT * FROM `dec1212` WHERE date = '$myDate'") or die(mysql_error()); 
```

尝试这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T04:33:20.690

```
$result = mysql_query("SELECT * FROM `dec1212` WHERE `date` = CURDATE()") or die(mysql_error()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T04:31:19.430

尝试这个

```
//set variable to current date with same format as date column
$myDate = date('Y-m-d');
//pull only rows that match the current date
$result = mysql_query("SELECT * FROM 'dec1212' WHERE date = $myDate") or die(mysql_error()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T04:31:28.463

您使用的是变量而不是函数，所以只需像这样更改

```
$myDate = date('Y-m-d');
$result = mysql_query("SELECT * FROM 'dec1212' WHERE date = '$myDate'") or die(mysql_error()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T04:31:49.727

确保数据库中的日期字段包含唯一的日期，而不是时间

```
$result = mysql_query("SELECT * FROM 'dec1212' 
            WHERE `date`= '$myDate'") or die(mysql_error()); 
```

如果您的日期字段包含日期时间数据类型，则使用：

```
$result = mysql_query("SELECT * FROM 'dec1212' 
            WHERE `date`= date('$myDate')") or die(mysql_error()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-13T04:32:15.717

让数据库完成工作，

```
SELECT * FROM `dec1212` WHERE DATE(date) = DATE(NOW()) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-13T04:41:50.370

请注意，这`$myDate`是一个变量，而不是一个函数。因此，您的代码将是：

```
 //set variable to current date with same format as date column
  $myDate = date('Y-m-d');
  //pull only rows that match the current date
  $result = mysql_query("SELECT * FROM `dec1212` WHERE date = '$myDate'") or die(mysql_error()); 
```

表名或字段名应该用克拉`包裹，而不是单引号`'`或者你可以省略它。

如果要使用 MySQL `NOW()`，则需要考虑 Raj Mohan 提到的时区转换。

# javascript - 表单 Jquery 函数

> ID：13852945
> 
> 赞同：0
> 
> 时间：2012-12-13T04:26:38.740
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试通过单击按钮表单来显示 div。我知道这是错误的，只是不确定要写什么，我应该把它写在我的 javascript 页面上还是仅仅在视图中。

```
<%= submit_tag "Next Step", :type => 'button', :onclick => '$('#devregothinf').hide();' %>

<div id="devregothinf">
  <h2>General Information</h2>
  <%= render 'geninfor_step', form: f %>
</div> 
```

我收到如下错误

```
syntax error, unexpected $end, expecting ')' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:35:32.517

写如下：

```
<span onclick = "$('#devregothinf').slideToggle('slow');"> Next Step </span>

<div id="devregothinf" style="display:none;">
 <h2>General Information</h2>
 <%= render 'geninfor_step', form: f %>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T04:36:52.210

你可以做这样的事情

**视图（app/views/home.html.erb）**

```
<%= link_to 'Next Step', 'home/next_step', :remote => true %>

<div id="devregothinf"> 
```

**控制器 (app/controllers/home_controller.rb)**

```
def next_step
  <your code>
  respond_to do |format|
      format.js
  end
end 
```

***视图 (js.erb) (app/views/next_step.html.erb)***

```
$("#devregothinf").html("<%= raw escape_javascript(render(:partial => 'form')) %>") 
```

***视图 (app/views/_form.html.erb)***

```
Your form partial 
```

高温高压

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T04:31:28.963

如果你想让它显示而不是隐藏，你只需要改变 $('#devregothinf').hide(); 到 $('#devregothinf').show();

# c# - 访问在 aspx 中的 aspx.cs 中声明的变量或在 ascx.cs ascx 页面中声明的变量

> ID：13852946
> 
> 赞同：6
> 
> 时间：2012-12-13T04:26:48.563
> 
> 标签：c#, asp.net, ascx

我在一次采访中被问到一个问题，天气我们可以访问一个公开声明的变量，该变量分别在 aspx 或 ascx 页面中的 aspx.cs 或 ascx.cs 页面中声明。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T04:29:24.690

是的，您可以，在 ASPX 页面中您可以执行以下操作：

```
<%=yourVariable%> 
```

如果您在文件`.cs`文件后面的代码中定义为：

```
public string yourVariable; 
```

如果你想在 aspx 页面中使用它，那么：

```
<span> <%= yourVariable %> </span> 
```

您可能会看到：[Accessing CodeBehind 变量或 C# 变量、ASP.Net 中 ASPX 页面中的方法](http://codes.codedigest.com/CodeDigest/17-Accessing-Codebehind-Variable-and-methods-in-ASPX-page.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T04:45:40.937

是的，只要它是在***Page Level*****公开**声明的，您就可以访问它。用于编写 计算和 绑定 *`<%= Variable %>``<% variable %>``<%# variable %>`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-19T10:22:26.033

在类似的情况下，任何人都可以帮助

在`aspx`文件中：

```
 <%= SessionLengthMinutes %> minute(s), <%=Session["name"] %> 
```

在 aspx.cs 中：

```
public int SessionLengthMinutes
{
   get { return Session.Timeout; }
} 
```

我已将其声明为 public，即使它无法访问文件中的`aspx.cs`元素`aspx`。

谢谢*

# c# - 在当前执行页面的特定方法中查找或列出方法

> ID：13852951
> 
> 赞同：0
> 
> 时间：2012-12-13T04:27:15.337
> 
> 标签：c#, asp.net, .net, reflection, .net-assembly

有一个 asp.net 网页。内部`Page_Load`事件可能有多个方法调用（`MethodA`等`MethodB(arg1, arg2)`）

我有http模块。在访问页面时，它首先会通过 httpmodule。

在该 hpttpmodule 中，我想查找或列出在当前执行页面的`Page_Load`.

通过这种方式，我想确保在事件`MethodA`内部实现具有其签名的特定方法 () 。`Page_Load`

我将欣赏任何实现，天气 httpmodule，基页，抽象类，接口，反射等......任何实现这个目标的东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:07:27.927

你可以尝试这样的事情：

```
MethodBase methodBase = typeof(INSERT_CLASS_HERE).GetMethod(INSERT_METHOD_HERE);
var instructions = MethodBodyReader.GetInstructions(methodBase);

foreach (Instruction instruction in instructions)
{
MethodInfo methodInfo = instruction.Operand as MethodInfo;

if(methodInfo != null)
{
    Type type = methodInfo.DeclaringType;
    ParameterInfo[] parameters = methodInfo.GetParameters();

    Console.WriteLine("{0}.{1}({2});",
        type.FullName,
        methodInfo.Name,
        String.Join(", ", parameters.Select(p => p.ParameterType.FullName + " " + p.Name).ToArray())
    );
} 
```

}

`INSERT_CLASS_HERE`您要查看的类的名称在哪里。
并且`INSERT_METHOD_HERE`是您要在其中查找所有调用的类中的方法的名称。

# java - getIIS和refineConflict的区别

> ID：13852956
> 
> 赞同：0
> 
> 时间：2012-12-13T04:27:44.397
> 
> 标签：java, linear-programming, cplex

我正在使用 cplex 来解决线性规划问题。由于问题较大时调用getIIS的时间较长，所以我尝试使用refineConflict方法来寻找最小冲突。但是调用getIIS 和refineConflict 的结果是很不一样的。下面是一个不可满足的线性规划问题的结果。

调用 getIIS 的结果：

```
IloRange 3_4 : 0.0 <= (-1.0*water_t_4 + 1.0*water_v_1_4) <= infinity
IloRange 3_4 : 5.0 <= (2.0*water_t_4 + 1.0*water_v_2_4) <= infinity
IloRange 4_5 : 0.0 <= (-1.0*water_v_2_4 - 1.0*water_t_5 + 1.0*water_v_2_5) <= infinity
IloRange 4_5 : 2.0 <= (1.0*water_v_1_4) <= 2.0
IloRange 5_6 : 0.0 <= (1.0*water_v_2_5) <= 0.0 
```

调用refineConflict的结果（第一个参数是整个线性约束，第二个是成员设置为1的数组）。

```
Possible : IloRange 4_5 : 2.0 <= (1.0*water_v_1_4) <= 2.0
Possible : IloRange 5_6 : 0.0 <= (1.0*water_v_2_5) <= 0.0 
```

我对这两种方法给出的结果感到困惑。这是我的代码，我的 cplex 版本是 cplex_studio125.win-x86-64：

```
cplex=new IloCplex();
cplex.setParam(IloCplex.IntParam.Threads,1);
cplex.setParam(IloCplex.IntParam.RootAlg, IloCplex.Algorithm.Concurrent);
cplex.addRangel()...
if(!cplex.solve){
   IloConstraint[] arr is the whole linear constraints 
    double prefs[] = new double[arr.length];
    Arrays.fill(prefs, 1);
    if(cplex.refineConflict(arr, prefs)){               
      ConflictStatus[] conflicts = cplex.getConflict(arr);
      for (int i1 = 0; i1 < conflicts.length;i1++ ){                 
        if(conflicts[i1]== ConflictStatus.Member)
           System.out.println(" Proved : " + arr[i1]);
        else if (conflicts[i1]==ConflictStatus.PossibleMember)
           System.out.println(" Possible : " + arr[i1]);
      }
    }
 } 
```

谢谢你的帮助。

# javascript - Javascript 窗口提示

> ID：13852958
> 
> 赞同：0
> 
> 时间：2012-12-13T04:28:22.743
> 
> 标签：javascript

```
var target=10;
var totalGuess=0;
var input = window.prompt('Enter a number between 1 and 100: ');  
var guess = parseInt(input);  
  do  
    {  
        totalGuess++;  
        if (guess < target)  
        {  
            window.prompt("Too low! Guess Again!");  
        }  
        if (guess > target)  
        {  
            window.prompt("Too High! Guess Again!");  
        }  
        if (guess == target)  
        {  
            alert("Thats right! It took you " +totalGuess +" tries to get it right!"); 
            break;
        }  

    } while (guess != target ); 
```

我正在尝试检查用户输入的数字是高还是低，但该程序仅检查一个语句然后停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T04:33:04.003

您需要移动这两行：

```
var input = window.prompt('Enter a number between 1 and 100: ');  
var guess = parseInt(input); 
```

到 do 语句的内部，以便反复提示用户，直到他们猜对为止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:34:14.107

```
var target=10;
var totalGuess=0;
var input = window.prompt('Enter a number between 1 and 100: ');  
var guess = parseInt(input);  
do  
    {  

        guess = parseInt(input);  
        totalGuess++;  

        if (guess < target)  
        {  
           input = window.prompt("Too low! Guess Again!");  
        }  
        if (guess > target)  
        {  
           input = window.prompt("Too High! Guess Again!");  
        }  
        if (guess == target)  
        {  
            alert("Thats right! It took you " +totalGuess +" tries to get it right!"); 
        break;
        }  

    } while (guess != target ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T04:37:33.167

试试这个

检查工作在这里[http://jsfiddle.net/9mQ2b/14/](http://jsfiddle.net/9mQ2b/14/)

您没有重新初始化 Guess 变量，以便它每次都可以检查条件

```
<!DOCTYPE html>
<html>
<body>
<script>

var target=10;
var totalGuess=0;
var input = window.prompt('Enter a number between 1 and 100: ');  
var guess = parseInt(input);  
do  
    {  

        totalGuess++;  

        if (guess < target)  
        {  
 guess = parseInt (window.prompt("Too low! Guess Again!"));  
        }  
        if (guess > target)  
        {  
 guess = parseInt (window.prompt("Too High! Guess Again!"));  
        }  
        if (guess == target)  
        {  
            alert("Thats right! It took you " +totalGuess +" tries to get it right!"); 
        break;
        }  

    } while (guess != target ); 
</script>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T04:40:21.417

问题只是您的第一个输入被输入到程序中。您以后的输入值将被忽略。尝试这个。

```
 if (guess < target)  
        {  
                input = window.prompt("Too low! Guess Again!");
                guess = parseInt(input);   
        }  
        if (guess > target)  
        {  
                input = window.prompt("Too High! Guess Again!"); 
                guess = parseInt(input); 
        }  
        if (guess == target)  
        {  
                alert("Thats right! It took you " +totalGuess +" tries to get it right!"); 
        break;
  } 
```

# version-control - TFS 2012 是否可以跨同一集合中的项目执行合并？

> ID：13852972
> 
> 赞同：4
> 
> 时间：2012-12-13T04:30:20.440
> 
> 标签：version-control, tfs

是否可以在 TFS 2012 中合并跨项目的更改？如果是这样，对我来说似乎并不明显。我发现自己需要这样做，因为当我们真的应该创建一个分支（或重组我们的分支）时，我们创建了一个新项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T14:55:45.923

您可以在 IDE 中使用 baseless 合并（选择合并）或使用 TF 命令行实用程序。下图显示了从团队项目区域 52 到团队项目区域 51 的合并，其中不存在分支关系。IDE 正确地将合并识别为无根据的合并： ![无根据的合并图像](../Images/753166c1e54919d80186f1564cc5387f.png)

不过建议要小心，我建议您首先阅读分支指南 ( [http://vsarbranchingguide.codeplex.com/](http://vsarbranchingguide.codeplex.com/) ) 中关于无根据合并的部分。

我做了快速测试并以粗略的格式记录了这里的发现：http: [//blogs.msdn.com/b/willy-peter_schaub/archive/2012/12/13/faq-branching-is-easy-but-can- i-merge-without-branching.aspx](http://blogs.msdn.com/b/willy-peter_schaub/archive/2012/12/13/faq-branching-is-easy-but-can-i-merge-without-branching.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T13:33:27.880

是的，你可以，你有几个选择。如果代码是不同的，例如你有这样的东西。

`$/TeamProject1/Main/Source/Solution1`

`$/TeamProject2/Main/Source/Solution2`

并且您想将解决方案 1 分支到团队项目 2，然后您可以使用 Visual Studio UI 中的“分支”功能。将适当的路径放在“目标”文本框中，你应该会很好。

如果您在 2 个单独的团队项目中有相同的代码，那么您将需要进行毫无根据的合并。例如

`$/TeamProject1/Main/Source/Solution1`

`$/TeamProject2/Main/Source/Solution1`

打开 Visual Studio 命令提示符并导航到 TFS 工作区，然后使用以下命令

`tf merge $/TeamProject1/Main/Source/Solution1 $/TeamProject2/Main/Source/Solution1 /baseless /recursive`

这将合并解决方案 1 的 2 个版本。但请注意，如果文件已被重命名或删除，您可能会遇到问题。TFS 也可能会将每个文件视为合并冲突（除非内容相同），您将需要手动决定要覆盖/合并哪些文件（源或目标）。

签入无基础合并后，将创建合并关系，并且可以从 IDE 完成任何进一步的合并。

# android - PhoneGap 未在 Android 中运行

> ID：13852980
> 
> 赞同：5
> 
> 时间：2012-12-13T04:31:26.260
> 
> 标签：android, cordova

我第一次尝试在 Android 设备（三星 Galaxy S II）上运行 PhoneGap；但是，它似乎不起作用。

这是我到目前为止尝试的代码：

```
<html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <meta name="format-detection" content="telephone=no" />
            <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi"
    />
            <title>Hello World</title>
            <script type="text/javascript" src="cordova-2.2.0.js"></script>
            <script type="text/javascript" charset="utf-8">
            document.addEventListener("deviceready", onDeviceReady, false);

            function onDeviceReady() {
                var options = new ContactFindOptions();
                options.filter = "";
                options.multiple = true;
                var filter = ["displayName"];
                navigator.contacts.find(filter, onSuccess, onError, options);
            }

            function onSuccess(contacts) {
                for(var i = 0; i < contacts.length; ++i) {
                    alert(contacts[i].displayName);
                }
                alert("OK then");
                console.log("OK");
            }

            function onError(contactError) {
                alert("onError!");
                console.log("Fail");
            }
            </script>
        </head>
        <body >

        </body>
        <h1> Example </h1>
        <p> Find Contacts </p>
    </html> 
```

什么都没有出现！没有警报，没有日志，它只是显示一个包含上述`body`内容的 HTML 页面。

@Edit：它现在显示结果；但是，所有结果都`null`显示在`Alert`对话框中。有没有人经历过这个？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-13T06:39:38.313

首先用**Eclipse创建一个****Android 应用程序**，然后

 **请按照以下步骤操作：

[1](http://androidcodexample.blogspot.in/2013/05/android-phonegap-integration.html)将 cordova-2.2.0.jar 文件导入您的项目。

[2] 将 cordova-2.2.0.js 文件添加到您的 assets/www 文件夹中。

[3] 将cordova源附带的xml文件夹复制到res文件夹中

[4] 用这个替换你的活动。

```
package com.cordovatest;

import org.apache.cordova.DroidGap;

import android.os.Bundle;

public class MainActivity extends DroidGap {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        super.setIntegerProperty("loadUrlTimeoutValue", 60000);        
        super.loadUrl("file:///android_asset/www/index.html",1000);
    }

} 
```

[5] 将 index.html 文件添加到 assets/www 文件夹中。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Contact Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() {    
        callFetchContacts();
    }

    function callFetchContacts(){
        var options = new ContactFindOptions();
        options.multiple=true; 
        var fields = ["id","name", "displayName", "organizations","emails","phoneNumbers","addresses"];
        navigator.contacts.find(fields, onSuccess, onError, options);   

    }

    function onSuccess(contacts) {

        alert('Done');
        alert(contacts.length);

        for(var i = 0; i < contacts.length; i++){
            alert(contacts[i].displayName);
        }

    };

    function onError(contactError) {
        alert('onError!');
    }

    </script>
  </head>
  <body>
    <h1>Example</h1>
    <p>Display Contacts</p>
  </body>
</html> 
```

[6] 将以下权限添加到您的清单文件中。

```
 <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.RECORD_VIDEO"/>
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />   
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" /> 
```

就是这样。

您将在屏幕上显示您的联系人详细信息。

希望它可以帮助你。

谢谢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-13T19:07:03.167

在 Eclipse 中使用 PhoneGap 的更简单的替代方法。
1.点击Help-Eclipse Marketplace 2.搜索-
“Phone Gap”
3.安装Phonegap（phonegap也叫cordova）
只做第一次。从下次开始，每当您创建 phonegap 项目时，只需创建一个“新 PhoneGap 项目”。就这样。这个过程可以为您节省大量时间和错误。**

# objective-c - 为 UIBarButton 创建自定义按钮，选择器抛出异常

> ID：13852983
> 
> 赞同：0
> 
> 时间：2012-12-13T04:31:33.953
> 
> 标签：objective-c, ios, xcode

我正在使用自己的图像创建一个自定义按钮，并将其分配给我拥有的导航控制器的 rightbarbutton。问题是当用户单击按钮时，我得到一个关于我的控制器无法识别该选择器的异常信息？

```
UIImage* image1 = [UIImage imageNamed:@"someImage.png"];
CGRect imgRect = CGRectMake(0, 0, image1.size.width/1.8, image1.size.height/1.8);
UIButton *myButton = [[UIButton alloc] initWithFrame:imgRect];
[myButton setBackgroundImage:image1 forState:UIControlStateNormal];
[myButton addTarget:self action:@selector(nextScreenButtonAction)   forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *barButton =[[UIBarButtonItem alloc] initWithCustomView:myButton];
[self.navigationItem setRightBarButtonItem:myButton];
self.navigationController.navigationBarHidden = false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T05:06:17.477

可能是这个问题`nextScreenButtonAction`改变它

```
[myButton addTarget:self action:@selector(nextScreenButtonAction:) forControlEvents:UIControlEventTouchUpInside] 
```

在您的方法定义中，您要传递和参数，例如

```
-(IBAction) nextScreenButtonAction:(id)sender
{
} 
```

所以在 addTarget 你需要指定一个冒号(:) 来表示参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:36:26.297

针对以下代码，

```
[myButton addTarget:self action:@selector(nextScreenButtonAction) forControlEvents:UIControlEventTouchUpInside];

```

确保您在同一个类中具有创建方法，例如，

```
- (void) nextScreenButtonAction
{
   // 在这里写下你的逻辑...
}

```

# objective-c - Google 云端硬盘（文档）导入错误：图片未显示在更新的文档文件中

> ID：13852984
> 
> 赞同：6
> 
> 时间：2012-12-13T04:31:35.903
> 
> 标签：objective-c, google-drive-api

您好 Google Drive API 支持人员，

在过去的几天里，我们遇到了 Google Drive 的严重问题。

我们无法再使用图像更新 Docs 文档。当我们的 iPhone 应用程序发送更新带有图像的 Docs 文档的请求时，服务器返回 OK，但其中的图像永远不会被上传。

重现问题的代码在这里。

```
- (void)selfOverwriteSelectedFile:(GTLDriveFile *)gtlDriveFile
{
    // -- not working type -- can't upload images on ODT, HTML, RTF, PDF
    NSString *mimetype = @"application/vnd.oasis.opendocument.text"; //@"text/html" @"application/rtf" @"application/pdf"

    //works: DOCX
    //NSString *mimetype = @"application/vnd.openxmlformats-officedocument.wordprocessingml.document";

    NSString *downloadUrl = [gtlDriveFile.exportLinks additionalPropertyForName:mimetype];

    //1st request: download the file
    GTMHTTPFetcher *fetcher = [self.driveService.fetcherService fetcherWithURLString:downloadUrl];

    [fetcher beginFetchWithCompletionHandler:^(NSData *data, NSError *error) {
        //2nd request: re-upload the same file
        gtlDriveFile.mimeType = mimetype;
        GTLUploadParameters *uploadParameters = [GTLUploadParameters uploadParametersWithData:data MIMEType:mimetype];
        GTLQueryDrive *query = [GTLQueryDrive queryForFilesUpdateWithObject:gtlDriveFile fileId:gtlDriveFile.identifier uploadParameters:uploadParameters];
        query.convert = query.newRevision = query.setModifiedDate = YES;

        [self.driveService executeQuery:query completionHandler:^(GTLServiceTicket *ticket, GTLDriveFile *newGtlFile, NSError *error2nd) {
        }];
    }];
}

//replace the method for easy-test
-(void)duplicateSelectedFile
{
    GTLDriveFile *selectedFile = [self selectedFileListEntry];
    [self selfOverwriteSelectedFile:selectedFile];
} 
```

为了最简单的复制，

1.  下载最新的“Objective-C 的 Google APIs 客户端库”。
2.  在 XCode 中打开 DriveSample 项目。
3.  用代码替换“- (void)duplicateSelectedFile”方法。
4.  编译并执行修改后的示例应用程序“获取文件列表”，选择带有图像的 docs 文件，然后点击“复制”。
5.  应使用相同的内容覆盖所选文件。但是，里面的图像都丢失了（在无休止的等待上传状态）。

仅供参考，odt/html/rtf/pdf 导入不起作用。但是， docx 导入有效。

请尽快解决问题。

谢谢您的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T11:41:09.897

```
 (void)loadFileContent {

    alert = [DrEditUtilities showLoadingMessageWithTitle:@"Loading file content"
                                                           delegate:self];

    self.webView.delegate = self;

    NSString *exportURLStr = nil;
    NSString *downloadUrlStr = nil;

    if (![self.driveFile.downloadUrl length] > 0) {

    if ([exportURLStr length] == 0) {

        exportURLStr = [self.driveFile.exportLinks JSONValueForKey:@"text/plain"];

    }

    if([exportURLStr length] == 0)
    {

        exportURLStr = [self.driveFile.exportLinks JSONValueForKey:@"image/jpeg"];

        self.webView.hidden= FALSE;

        NSString *imgHTMLTag = [NSString stringWithFormat:@"<img src=\"file://%@\" />", exportURLStr];

        if ([imgHTMLTag length] != 27)  {  // null

            [self.webView loadHTMLString:imgHTMLTag baseURL:nil];
            [alert dismissWithClickedButtonIndex:0 animated:YES];
            return;

        }

    }

    if([exportURLStr length] == 0)
    {

        exportURLStr = [self.driveFile.exportLinks JSONValueForKey:@"application/pdf"];

        self.webView.hidden= FALSE;

        NSURL *targetURL = [NSURL URLWithString:exportURLStr];
        NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];
        [self.webView loadRequest:request];
        [alert dismissWithClickedButtonIndex:0 animated:YES];
        return;

    }

  if ([exportURLStr length] != 0) {

    GTMHTTPFetcher *fetcher =
  [self.driveService.fetcherService fetcherWithURLString:exportURLStr];

  [fetcher beginFetchWithCompletionHandler:^(NSData *data, NSError *error) {

    [alert dismissWithClickedButtonIndex:0 animated:YES];
    if (error == nil) {

      NSString* fileContent = [[NSString alloc] initWithData:data
                                                    encoding:NSUTF8StringEncoding];

        self.webView.hidden = TRUE;

        self.textView.text = fileContent;

      self.originalContent = [fileContent copy];

    } else {

      NSLog(@"An error occurred: %@", error);
      [DrEditUtilities showErrorMessageWithTitle:@"Unable to load file"
                                         message:[error description]
                                        delegate:self];

    }
  }];
    }

    else
    {

         [alert dismissWithClickedButtonIndex:0 animated:YES];

    }

    }

    else
    {

        downloadUrlStr = self.driveFile.downloadUrl;

        NSLog(@"%@",downloadUrlStr);

        NSArray *arr = [downloadUrlStr componentsSeparatedByString:@"&"];
        urlString = [arr objectAtIndex:0];

        NSURL *url =[NSURL URLWithString:urlString];
        NSURLRequest *urlRequest=[NSURLRequest requestWithURL:url];

        self.webView.hidden = FALSE;
        [self.webView loadRequest:urlRequest];
         [alert dismissWithClickedButtonIndex:0 animated:YES];

        [self performSelector:@selector(downloadFile) withObject:nil afterDelay:0.5];
        // [self downloadFile];

    }

} 
```

# c - 为什么有些 C 标准头文件以 'std' 开头，而另一些则不是？

> ID：13852988
> 
> 赞同：19
> 
> 时间：2012-12-13T04:31:48.823
> 
> 标签：c, c99, c89, c11

例如，在新的 C11 标准中添加了`stdalign.h`和`threads.h`. 为什么不呢`stdthreads.h`？`align.h`是为了避免与现有库和系统头文件发生冲突吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-13T04:41:13.877

在不同时期，选择这些名称的原因多种多样。 `<stdio.h>`早在 C 标准出现之前就被用作名称；该标准只是标准化了现有的做法。标`<stddef.h>`头是原 (C89) 委员会的发明；之所以选择它的名字，是因为它没有被使用。与`<stdlib.h>`. 这个名称`<inttypes.h>`是现有的做法，但委员会需要`<stdint.h>`为独立的实施服务。选择该名称`<stdarg.h>`以与非原型等效项平行`<varargs.h>`。该名称`<stdbool.h>`未被使用；同样，我猜`<stdatomic.h>`，，，，`<stdalign.h>`。`<stdnoreturn.h>`前缀在很大程度上是为标准保留的`std`（但我使用 header `"stderr.h"`，知道我可能会如履薄冰）。至于为什么`<uchar.h>`和`<threads.h>`没有以`std`前缀结尾，我假设一些现有技术基本上没有变化。AFAIK，C2011 的基本原理尚未完成；它可能会在可用时显示更多信息。

# wordpress - 删除菜单以在 Wordpress 中创建登录页面

> ID：13852993
> 
> 赞同：0
> 
> 时间：2012-12-13T04:32:17.183
> 
> 标签：wordpress, wordpress-theming

我创建了一个 Wordpress 登录页面，目前转换率为 14%。我删除了侧边栏和页脚，以减少页面分散注意力。

如果我从顶部删除菜单，我认为页面可以转换得更好。但是，当我尝试创建自定义页面模板时，它不起作用。我无法在不破坏整个布局的情况下删除标题。

谁能指出我正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T04:37:03.083

您能否分享您正在处理的链接，以便我给出更具体的答案？

您可能可以使用 CSS 来实现。或者您需要使用条件语句来隐藏 header.php 文件中的部分 - 您无法删除整个文件，因为这会破坏您的 HTML 结构。

条件将类似于：

```
<?php if (!is_page_template('landing-page.php')) { ?>
   <!-- YOUR HEADER HERE -->
<?php } ?> 
```

# wpf - RenderTargetBitmap Bold 的文本

> ID：13852994
> 
> 赞同：0
> 
> 时间：2012-12-13T04:32:18.447
> 
> 标签：wpf, vb.net, bitmap

我目前正在尝试制作一个涉及在屏幕上下滑动控件的应用程序。从本质上讲，想象一个有页面的移动桌面，这就是我的应用程序的外观，除了只有 2 个页面。我目前使用情节提要和 ItemsControl 以及离开屏幕的页面的 RenderTargetBitmap 滑动页面。问题是，RenderTargetBitmap 看起来要么被拉伸了一点，要么就像控件上的所有文本突然变成粗体一样。您可以在下图中看到粗体效果：

![大胆的问题](../Images/71abd77d8c79a3fd55e255692395d35f.png)

这是页面未呈现为位图时的样子：

![标准](../Images/9341679603a83962882d9c389473d4b7.png)

从右侧滑入的另一个控件没有这样的问题。有这个问题的总是 RenderTargetBitmap。我用这个函数生成位图：

```
Public Function RenderBitmap(Element As FrameworkElement) As RenderTargetBitmap
    Dim TTopLeft As Double = 0
    Dim TTopRight As Double = 0
    Dim TWidth As Integer = CInt(Element.ActualHeight)
    Dim THeight As Integer = CInt(Element.ActualWidth)
    Dim DPIX As Double = 96.0
    Dim DPIY As Double = 96.0

    Dim PxlFormat As PixelFormat = PixelFormats.Default
    Dim ElementBrush As New VisualBrush(Element)
    Dim Visual As New DrawingVisual()
    Dim DC As DrawingContext = Visual.RenderOpen()

    DC.DrawRectangle(ElementBrush, Nothing, New Rect(TTopLeft, TTopRight, TWidth, THeight))
    DC.Close()

    Dim ExportBitmap As New RenderTargetBitmap(TWidth, THeight, DPIX, DPIY, PxlFormat)
    ExportBitmap.Render(Visual)
    Return ExportBitmap
End Function 
```

以矩形显示：

```
 Dim rtb As RenderTargetBitmap = RenderBitmap(PageViewer)
    RectangleVisual.Fill = New ImageBrush(BitmapFrame.Create(rtb)) With {.Stretch = Stretch.Fill} 
```

XAML 中的矩形是：

```
 <Border x:Name="BorderVisual" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <Rectangle x:Name="RectangleVisual"/>
        <Border.RenderTransform>
            <TranslateTransform/>
        </Border.RenderTransform>
        <Border.CacheMode>
            <BitmapCache EnableClearType="True" SnapsToDevicePixels="True" RenderAtScale="1.0"/>
        </Border.CacheMode>
    </Border> 
```

我是否缺少一些应该设置为 true 的属性？优质物业？我什么也找不到。我应该使用更好的方法来创建位图吗？

谢谢！

编辑 1：使用`Stretch = None`

![在此处输入图像描述](../Images/5506964d4e49f5f79a5bd207dae61888.png)

编辑2：问题解决了，我在函数中的高度和宽度是错误的......问题已经困扰我好几个星期了。有时它的小事很重要！

# javascript - 使用正则表达式解析 URL 参数

> ID：13852996
> 
> 赞同：1
> 
> 时间：2012-12-13T04:32:33.027
> 
> 标签：javascript, regex, url

我有一个类似于 example.com/?id[]=15029&id[]=18711&foo=bar#MyTab 的网址

我想获取 url 中的所有 id

```
var str = window.location.search;
var result = {};
str.replace(/([^?=&]+)(?:[&#]|=([^&#]*))/g, function (match, key, value) {
    result[key] = value || 1;
});
result; 
```

上面的代码只返回最后一个 id 参数。

如何改进它以获取数组中的所有 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T05:06:24.137

知道了

```
function getUrlParam (paramName) {
    var str = window.location.search;
    var result = {};
    str.replace(/([^?=&]+)(?:[&#]|=([^&#]*))/g, function (match, key, value) {
        if (key.indexOf("[]") !== -1) {
            key = key.replace(/\[\]$/, "");
            if(!(result[key])) {
                result[key] = new Array();
            }
            result[key].push(value);
        } else {
            result[key] = value || 1;
        }
    });

    if(result[paramName]){
        return result[paramName];
    } else {
        return '';
    }
};
getUrlParam('id') 
```

# bouncycastle - 访问 PFX 文件 ECC 私钥以在 Java 中生成对称密钥

> ID：13852997
> 
> 赞同：5
> 
> 时间：2012-12-13T04:32:32.627
> 
> 标签：bouncycastle, private-key, pkcs#12, elliptic-curve

我正在编写一个程序（在 Java 中使用 Bouncy Castle API），该程序使用 AES-256/GCM 使用由 ONE EC 密钥对生成的密钥来加密文件。我的对称加密部分工作得很好，但现在证明密钥生成很困难。当尝试在 javax.crypto.KeyAgreement.init() 方法中使用 ECPublicKey 对象时，它返回此错误：

```
Exception in thread "main" java.security.InvalidKeyException: ECDH key agreement requires ECPrivateKey for initialisation
    at org.bouncycastle.jcajce.provider.asymmetric.ec.KeyAgreementSpi.initFromKey(Unknown Source)
    at org.bouncycastle.jcajce.provider.asymmetric.ec.KeyAgreementSpi.engineInit(Unknown Source)
    at javax.crypto.KeyAgreement.init(KeyAgreement.java:461)
    at javax.crypto.KeyAgreement.init(KeyAgreement.java:435)
    at Encrpytion.generateKey(Encrpytion.java:188)  ---aKA.init(key);---
    at Encrpytion.main(Encrpytion.java:40) ---byte[] key = generateKey();--- 
```

该方法的源代码如下：

```
public static byte[] generateKey() {
    KeyStore ks = KeyStore.getInstance("PKCS12");
    FileInputStream fis = new FileInputStream("file.pfx");
    Scanner input = new Scanner(System.in);
    char[] chars = {};
    System.out.println("Enter the password for your .pfx: ");
    chars = input.nextLine().toCharArray();
    input.close();
    Enumeration aliasEnum = null;
    ks.load(fis, chars);
    aliasEnum = ks.aliases();
    Key key = null;
    Certificate cert = null;
    while (aliasEnum.hasMoreElements()){
        String param = (String)aliasEnum.nextElement();
        if (ks.isKeyEntry(param))  {
            String keyName = param;
            key = ks.getKey(keyName,chars);
        }
        cert = ks.getCertificateChain(param)[0];
    }
    KeyPair kp = new KeyPair(cert.getPublicKey(),(ECPrivateKey) key);
    KeyAgreement aKA = null;
    aKA = KeyAgreement.getInstance("ECDH", "BC");
    aKA.init(key);
    aKA.doPhase(kp.getPublic(), true);
    return aKA.generateSecret();
} 
```

如何访问证书的 PrivateKey？

**更新：**更新源代码

** 编辑 ** 以下命令和说明可用于创建一些测试文件来演示问题。

```
#Make root key
openssl ecparam -name secp521r1 -genkey -out root.key
#password protect key
openssl ec -in root.key -out root.key -aes256
####change req x509_attributes to rootCA
#selfsign root
openssl req -new -x509 -key root.key -out root.crt -days 1825 -config openssl.cfg
###comment out req x509_attributes
#make new key for clientCA
openssl ecparam -name secp521r1 -genkey -out client.key
#make clientCA csr
openssl req -new -sha384 -key client.key -out client.csr -config openssl.cfg
#sign clientCA
openssl ca -out client.crt -name root -in client.csr -config openssl.cfg
#make client key
openssl ecparam -name secp521r1 -genkey -out client.key
#make server csr
openssl req -new -sha384 -key client.key -out client.csr -config openssl.cfg
#sign server cert
openssl ca -out client.crt -name client -in client.csr -config openssl.cfg
#MAKE CHAIN - copy base64 encoded root and intermidiate client ca into same "chain.cer" #export user cert 
openssl pkcs12 -export -chain -CAfile chain.crt -in client.crt -inkey client.key -out client.pfx -aes256 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:59:03.150

对于任何给定的别名，只有`key`和之一`cert`是非空的。在这种情况下，显然`cert`是非空的，键是空的。如果您的密钥库中有 EC 私钥，您将需要更加努力地找到它。您可以通过使用和进行测试来确定别名中的条目*类型*。[`isCertificateEntry`](http://docs.oracle.com/javase/6/docs/api/java/security/KeyStore.html#isCertificateEntry%28java.lang.String%29)[`isKeyEntry`](http://docs.oracle.com/javase/6/docs/api/java/security/KeyStore.html#isKeyEntry%28java.lang.String%29)

**编辑 1**

不幸的是，错误消息令人困惑，因为它实际上来自 bouncycastle 库。中提到的`ECDH key agreement requires ECPrivateKey`类*不是* [`java.security.interfaces.ECPrivateKey`](http://docs.oracle.com/javase/6/docs/api/java/security/interfaces/ECPrivateKey.html)而是[`org.bouncycastle.jce.interfaces.ECPrivateKey`](http://www.bouncycastle.org/docs/docs1.6/org/bouncycastle/jce/interfaces/ECPrivateKey.html)

以下对 OP 示例代码的简短改编说明了克服此问题的一种方法。

```
import org.bouncycastle.jce.provider.JCEECPrivateKey;
import org.bouncycastle.jce.provider.JCEECPublicKey;
// ...
// . <original example code goes here>
// .
JCEECPrivateKey ecPrivKey = new JCEECPrivateKey((ECPrivateKey) key);
JCEECPublicKey ecPubKey = new JCEECPublicKey((ECPublicKey) cert.getPublicKey());
KeyPair kp = new KeyPair(ecPubKey, ecPrivKey);
KeyAgreement aKA = null;
aKA = KeyAgreement.getInstance("ECDH", "BC");
aKA.init(ecPrivKey);
aKA.doPhase(kp.getPublic(), true);
return aKA.generateSecret();
// ... 
```