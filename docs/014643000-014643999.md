# StackOverflow 问答 14643000-14643999

# node.js - 仅在 Node.js 中完成所有 Web 抓取请求后，如何呈现页面？

> ID：14643001
> 
> 赞同：1
> 
> 时间：2013-02-01T09:16:47.230
> 
> 标签：node.js, asynchronous, callback, express, web-scraping

我正在使用**jsdom**（Node.js 的网络抓取库）发出 1 到 10 个 Web 请求。它是这样的：

```
app.get('/results', function(req, res) {

jsdom.env(
  "http://website1.com",
  ["http://code.jquery.com/jquery.js"],
  function (errors, window) {
    // scrape website #1
  }
);

jsdom.env(
  "http://website2.com",
  ["http://code.jquery.com/jquery.js"],
  function (errors, window) {
    // scrape website #2
  }
);

jsdom.env(
  "http://website3.com",
  ["http://code.jquery.com/jquery.js"],
  function (errors, window) {
    // scrape website #3
  }
);
}

res.render('results', { items: items });
} 
```

仅在完成所有**jsdom**请求并收集了所需的所有信息之后，如何运行**res.render() ？**在同步世界中，这显然不是问题，但由于 javascript 是异步的，因此 res.render() 将在任何**jsdom**回调完成之前运行。

 ***** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T10:42:24.067

## 天真的解决方案

对于少量刮擦，您可以采用的“幼稚”解决方案是嵌套所有内容（在最后一次刮擦的回调中开始每个刮擦，最后一次回调包含渲染方法。）

```
scrape
  cb: scrape
     cb: scrape
        cb: render all results 
```

当然，这变得乏味且难以辨认。（而且一切都是串联运行的，而不是并行运行的，这不会很快。）

## 更好的解决方案

更好的解决方案是编写一个函数来计算`render`所有返回结果和调用的数量。这是一种实现：

```
function parallel_cb(total, finalCallback) {
    var done = 0;
    var results = [];
    return function(result) {
        done += 1;
        results.push(result);
        if (total == done) finalCallback(results);
    }
} 
```

要在您的示例中使用它：

```
app.get('/results', function(req, res) {
    var myCallback = parallel_cb(
        sitesToScrape.count, // or 3 in this case
        function(items) {res.render('results', { items: items })});

    jsdom.env(
      "http://nodejs.org/dist/",
      ["http://code.jquery.com/jquery.js"],
      function (errors, window) {
        // do some scraping
        myCallback(result_from_scrape);
      }
    );

    jsdom.env(
      "http://nodejs.org/dist/",
      ["http://code.jquery.com/jquery.js"],
      function (errors, window) {
        // more scraping
        myCallback(result_from_scrape);
      }
    );

    jsdom.env(
      "http://nodejs.org/dist/",
      ["http://code.jquery.com/jquery.js"],
      function (errors, window) {
        // even more scraping
        myCallback(result_from_scrape);
      }
    );
}); 
```

## 最佳解决方案

您应该真正学习使用现有的并行/异步库，而不是自己编写，正如@almypal 在对您的问题的评论中所建议的那样。

`async`如文档中所述，您可以做一些更整洁的事情：https [://github.com/caolan/async#parallel](https://github.com/caolan/async#parallel)

或者，如果您的所有抓取实际上都在结果页面中寻找相同的元素，您甚至可以对要抓取的 URL 数组进行并行映射：[https ://github.com/caolan/async#maparr-iterator-callback](https://github.com/caolan/async#maparr-iterator-callback)

您的每个抓取都可以使用异步并行方法提供的回调函数来返回其抓取的结果。最后的 [可选] 回调将包含您对`render`所有项目的调用。

## 编辑：你要求的例子

这是您的代码，直接翻译到`async`库中：

```
var async = require("async");

app.get('/results', function(req, res) {
    async.parallel( // the first argument is an array of functions
      [
        // this cb (callback) is what you use to let the async
        // function know that you're done, and give it your result
        function (cb) { 
          jsdom.env(
            "http://nodejs.org/dist/",
            ["http://code.jquery.com/jquery.js"],
            function (errors, window) {
              // do some scraping      

              // async's callback expects an error for the first
              // param and the result as the second param
              cb(null, result_from_scrape); //No error
            }
          );
        },
        function (cb) { 
          jsdom.env(
            "http://nodejs.org/dist/",
            ["http://code.jquery.com/jquery.js"],
            function (errors, window) {
              // more scraping
              cb(null, result_from_scrape);
            }
          );
        },
        function (cb) { 
          jsdom.env(
            "http://nodejs.org/dist/",
            ["http://code.jquery.com/jquery.js"],
            function (errors, window) {
              // even more scraping
              cb(null, result_from_scrape);
            }
          );
        }
      ],
      // This is the "optional callback". We need it to render.
      function (err, results) {
        // If any of the parallel calls returned an error instead
        // of null, it's now in the err variable.
        if (err) res.render('error_template', {error: err});
        else res.render('results', { items: results });
      });
}); 
```****

# php - PHP错误使用未定义的常量包含-假定为“包含”

> ID：14643003
> 
> 赞同：-1
> 
> 时间：2013-02-01T09:16:54.030
> 
> 标签：php, smarty

我正在尝试推出自己的项目，但是遇到了一个错误，我发现这个错误有点古怪，而且我的 IDE 和 xDebug 并没有为像我这样的新手提供很多选择。

下面的代码有几个问题，但是使用未定义的常量包含 - 假设“包含”让我很烦，我不知道出了什么问题。

```
<?php

//Debug Error Reporting Configuration
error_reporting(E_ALL);

/*
    Do Not Change any of these items unless 
    you know what they do and you realy 
    have to change them
*/

//Global Function to return includes path
function includes($path, $location){
    return $_SERVER['DOCUMENT_ROOT']. "/" .$path. "/" .$location;
}

//Global Function to return single location path
function location($path){
    return $_SERVER['DOCUMENT_ROOT']. "/" .$path;
}

//Global Functions Include
require(includes(includes, 'functions.php'));

//Messaging Array
$messages=array();

//Database Configuration & Connection
$dbhost="localhost";
$dbuser="root";
$dbpass="SaltWater";
$dbname="platform";

connectToDB();

//Session Variable Registration
session_register("f_name");
session_register("user_id");
session_register("company_id");

//Smarty Template Engine Configuration
define('SMARTY_DIR',  includes(includes, smarty));
require(SMARTY_DIR . 'Smarty.class.php');

$smarty = new Smarty();
$smarty->setTemplateDir(location(templates));
$smarty->setCompileDir(location(cache));
$smarty->setCacheDir(location(cache));

function errorsys($type, $detail){

    $smarty->assign('type',$type);
    $smarty->assign('detail',$detail);
    $smarty->display('error.tpl');
}

?> 
```

编辑：有没有一种我还没有发现的更简单的方法来做一个聪明的方法来做我的包含，而不需要通常在文件夹中向下钻取，以防它被部署到不同的服务器上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:21:20.800

```
require(includes('includes', 'functions.php')); 
```

您需要确保传递给包含函数的路径是字符串。如果没有引号，PHP 会认为您正在传递一个从未声明过的常量。该代码仍然可以工作，因为 PHP 会假定您的意思是一个字符串，但它会发出警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:19:23.307

包含在某处定义为常量吗？也许你的意思是

```
require(includes(includes, 'functions.php'));  //if constant includes is defined 
```

或者

```
require(includes($includes, 'functions.php'));  //if path is stored in $includes 
```

或者你的意思是

```
require(includes('includes', 'functions.php')); //if path is 'includes/' 
```

# activemq - 将 Jmeter 中的 XML 消息泵送到 ActiveMQ？

> ID：14643006
> 
> 赞同：0
> 
> 时间：2013-02-01T09:16:58.850
> 
> 标签：activemq, jmeter, load-testing, performance-testing, mq

我是性能测试的新手。
在我即将进行的项目中，我必须通过 Jmeter 将 XML 消息发送到 ActiveMQ。
我该如何实施？
任何指向任何网站的指针都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T09:21:21.997

如果您正在查看 ActiveMQ 的性能测试，您应该查看[ActiveMQ 性能模块](http://activemq.apache.org/activemq-performance-module-users-manual.html)。有一个选项`producer.msgFileName`允许您定义一个包含正在发送的消息的文件。

# c# - 从多个数组生成所有可能的组合 (C#/VB.NET)

> ID：14643009
> 
> 赞同：0
> 
> 时间：2013-02-01T09:17:07.547
> 
> 标签：c#, vb.net

我有**n**个数组，每个数组可能包含**n**个元素。我必须通过从每个数组中获取一个元素来生成所有可能的值组合。

我需要 C#/VB.NET 语言方面的帮助。

下面是一个例子。

Arr1: (a, b, c) Arr2: (1, 2) Arr3: (x, y, z)

我希望组合为（将有 3*2*3 = 18 种组合） a1x a1y a1z a2x a2y a2z b1x b1y b1z b2x b2y b2z c1x c1y c1z c2x c2y c2z

如果我有 4 个数组，则将有 36 个组合。Arr1: (a, b, c) Arr2: (1, 2) Arr3: (x, y, z) Arr4: (m, n)

组合：

a1xm a1xn a1ym a1yn a1zm a1zn … … … … … … … … … … …</p>

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T09:25:31.943

基于[Eric Lippert的文章](http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx)

```
void Main()
{
    var set1 = new object[]{'a', 'b', 'c'};
    var set2 = new object[]{1,2,};
    var set3 = new object[]{'x', 'y', 'z'};

    string.Join(", ", new[] {set1, set2, set3}.CartesianProduct().Select(item => item.ToArray()).Select(item => string.Format("({0},{1},{2})", item[0], item[1], item[2]))).Dump();
}

public static class CartesianProductContainer
{
    public static IEnumerable<IEnumerable<T>> CartesianProduct<T>(this IEnumerable<IEnumerable<T>> sequences) 
    { 
        IEnumerable<IEnumerable<T>> emptyProduct = new[] { Enumerable.Empty<T>() }; 
        return sequences.Aggregate( 
            emptyProduct, 
            (accumulator, sequence) => 
                from accseq in accumulator 
                from item in sequence 
                select accseq.Concat(new[] {item})); 
    }
} 
```

输出：

```
(a,1,x), (a,1,y), (a,1,z), (a,2,x), (a,2,y), (a,2,z), (b,1,x), (b,1,y), (b,1,z), (b,2,x), (b,2,y), (b,2,z), (c,1,x), (c,1,y), (c,1,z), (c,2,x), (c,2,y), (c,2,z) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T10:22:28.460

**第一种方法**

您可以使用**[嵌套的 For 循环](http://www.sourceasp.net/post36/C-sharp-Nested-for-loops.aspx)**

```
for (int i=0; i < Arr1.Length ; i++)
{  
  for (int j=0; i < Arr2.Length ; j++)
  {  
     like this..............
  }  
} 
```

**第二种方法**

[C# - 遍历多个数组/列表的最有效方法](https://stackoverflow.com/questions/13655299/c-sharp-most-efficient-way-to-iterate-through-multiple-arrays-list)

# javascript - document.getElementById('button').click() 在我的电脑上工作但不在另一台电脑上工作

> ID：14643010
> 
> 赞同：0
> 
> 时间：2013-02-01T09:17:09.160
> 
> 标签：javascript, jquery

我有一个`DIV`当我点击它时，它会触发一个 javascript 点击文件上传按钮，它是`display:none`. 它可以在我的电脑上使用 Chrome、Firefox、Chromium。但我想知道为什么它在我朋友的电脑上不起作用。

> 是浏览器问题还是什么？我和我的朋友使用不同版本的 Ubuntu。当他们点击 DIV 时没有任何反应

这是我的代码

`<div onclick='uploadphoto()' title='Click to edit Profile Picture'></div>`

```
<form action="js/ajaxuploadprofile.php" method="post" name="sleeker" id="sleeker" enctype="multipart/form-data" style='display:none'>
    <input type="hidden" name="maxSize" value="2000000" />
    <input type="hidden" name="maxW" value="700" />
    <input type="hidden" name="fullPath" value="images/profilepic/" />
    <input type="hidden" name="relPath" value="../images/profilepic/" />
    <input type="hidden" name="colorR" value="255" />
    <input type="hidden" name="colorG" value="255" />
    <input type="hidden" name="colorB" value="255" />
    <input type="hidden" name="maxH" value="700" />
    <input type="hidden" name="filename" value="filename" />
    <input type="file" id='filename' name="filename" onchange="ajaxUpload(this.form,'js/ajaxuploadprofile.php?filename=name&amp;maxSize=2000000&amp;maxW=700&amp;fullPath=images/profilepic/&amp;relPath=../images/profilepic/&amp;colorR=255&amp;colorG=255&amp;colorB=255&amp;maxH=700','upload_area','File Uploading Please Wait...&lt;br /&gt;&lt;img src=\'images/loader_light_blue.gif\' width=\'128\' height=\'15\' border=\'0\' /&gt;','&lt;img src=\'images/error.gif\' width=\'16\' height=\'16\' border=\'0\' /&gt; Error in Upload, check settings and path info in source code.'); return false;" />
</form>

<script type='text/javascript'>
function uploadphoto()
{
    el = document.getElementById('filename');
    if (el.onclick) 
    {
       el.onclick();
    } 
    else if (el.click) 
    {
       el.click();
    }
//$('#filename').click(); // <-- this also works for me but not my friend
//document.getElementById('filename').click(); // <-- same
}
</script> 
```

**更新的解决方案**

最近我发现`style='display:none'`在某些浏览器中会出现一些问题（或者可能是由于浏览器的版本）。就我而言，我和我朋友的 Chrome 版本不同，因此它适用于我的电脑，但不适用于我朋友的电脑。但是，我可以通过替换`style='display:none'`为`style='visibility:hidden;height:0px'`. 现在的代码在任何电脑上都可以正常工作。

`visibility:hidden`只是隐藏内容的视图，它仍然会占用一些空间。因此我添加`height:0px`了它，以便它具有相同的效果`display:none`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T09:22:36.250

可能是浏览器问题。例如，它可能会导致 IE 出现问题。如果您使用的是 jQuery，您可以执行以下操作：

```
$('#button').trigger('click'); 
```

或者你可以尝试如下：

```
if( document.createEvent ) {
    var evt = document.createEvent("MouseEvents");  
    evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);  
    document.getElementById('button').dispatchEvent(evt);
} else if( document.createEventObject ) { // For IE 8 and below
    var evObj = document.createEventObject();
    document.getElementById('button').fireEvent('onclick', evObj);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:25:12.663

根据[这篇文章](http://www.javascript-coder.com/javascript-form/getelementbyid-form.phtml)，您可以使用以下内容创建一个版本`getElementById`，即使在非常旧的浏览器上也能正常工作：

```
function getElement (id)
{
    if (document.getElementById)
    {
        return document.getElementById(id);
    }
    else if (document.all)
    {
        return window.document.all[id];
    }
    else if (document.layers)
    {
        return window.document.layers[id];
    }
} 
```

# c++ - 为什么释放内存后使用的内存量会增加？

> ID：14643011
> 
> 赞同：0
> 
> 时间：2013-02-01T09:17:11.520
> 
> 标签：c++, windows, memory, new-operator

我发现即使在我的程序中释放内存后，使用的内存量也会增加。所以我写了两个简单的 C++ 测试程序来验证它。

```
#define NUM 1000000
void Test1()
{
    PrintMemory("Test1 Beginning");
    double* Data = new double[NUM];

    for(int i = 0; i < NUM; i++)
    {
        Data[i] = std::rand() % 1000;
    }

    double sum = 0;
    for(int i = 0; i < NUM; i++)
    {
        sum += Data[i];
    }

    delete [] Data;
    PrintMemory("end");
}

double* Data[NUM];
void Test2()
{
    PrintMemory("Test2 Beginning");

    for(int i = 0; i < NUM; i++)
    {
        Data[i] = new double;
        *(Data[i]) = std::rand() % 1000;
    }

    double sum = 0;
    for(int i = 0; i < NUM; i++)
    {
        sum += *(Data[i]);
    }

    for(int i = 0; i < NUM; i++)
    {
        delete Data[i];
    }
    PrintMemory("end");
}

void main()
{
    Test1();
    Test2();
} 
```

在函数中`PrintMemory`，我调用 API`GetProcessMemoryInfo`来获取有关已用内存的信息，即`PrivateUsage`结构的字段`PROCESS_MEMORY_COUNTERS_EX`。

输出如下：

> MemUsed：Test1 开始
> 时为 5544kb MemUsed：结束时
> 为 5568kb MemUsed：Test2 开始
> 时为 5568kb MemUsed：结束时为 6404kb

我无法弄清楚输出。我希望在`delete`调用之后，使用的内存量应该恢复到以前的值。使用的内存量与操作员的调用号`new`和`delete`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:48:32.843

对于一百万个`DOUBLE`值，仅负载所需的内存量就是 8 MB。您的打印显示私人使用量并没有增加那么多，那就是内存实际上已正确释放。

但是，您没有考虑到的是，`new`它不从裸内存分配，它从堆中获取块，当它们返回时，它们可能仍然 - 在某种程度上 - 归因于等待新分配“缓存”的进程。

这就是你所看到的：一次大的分配/释放内存使用量增加了一点。有了一百万个小分配，它增加了更多，但仍然比实际有效负载大小要小得多。如果您重复分配，您会发现在某些时候内存不会进一步增加，您看到的所有剩余物只是碎片和堆分配工件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:11:25.073

我希望额外的内存实际上与这里使用的堆数量没有直接关系。这可能是一些额外的内存管理开销和类似的，而不是实际的内存分配。正如 Roman 指出的那样，您分配了 8MB，这远远超过了打印输出中相当小的差异。相反，当您分配大量小块时，会使用更多开销来跟踪内存分配，这就是在第二种情况下占用更多内存的原因。当然，该内存不是您分配的直接一部分，因此当实际内存被释放时，它实际上并没有被释放。

我会把它归结为“就是这样”......

我希望如果您每次运行 test1 和 test2 50 次，内存使用量不会在某个时候继续上升 - 它可能不会立即发生，但经过几次运行后，它将达到“稳定状态”。

# sql-server - 为什么我需要两个 SQL Server Service Broker 队列来完成一个简单的任务？

> ID：14643015
> 
> 赞同：4
> 
> 时间：2013-02-01T09:17:27.683
> 
> 标签：sql-server, tsql, service-broker

我在网上找到的所有使用 SQL Server Service Broker 队列的示例似乎都有两个队列。我不明白为什么，每个例子似乎都认为这很明显，没有必要解释。

有几件事将写入我的队列，存储过程将从它读取并插入数据库。为什么我需要两个队列？

例如：[http ://www.techrepublic.com/article/use-service-broker-internal-activation-in-sql-server-2005/6156264#](http://www.techrepublic.com/article/use-service-broker-internal-activation-in-sql-server-2005/6156264#)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T11:31:44.163

从技术上讲，您可以在应用程序中使用一个使用 SSB 技术的队列。在这种情况下，这个队列有来自发起者的请求消息和来自目标的响应消息的混乱。你的存储过程应该实现一种机制来区分它们，对它们进行分类，决定哪个响应是针对哪个请求等等。还要记住，从这个队列中接收消息的顺序是准确的，你不能跳过其中的一些并留在队列中进行进一步处理。

在您的情况下，也许更好地遵循 Remus Rusanu 的回答并使用数据库表实现您的队列？

SSB 的想法很简单——发起者将请求消息放入 Target 的队列中，同时在自己的队列中等待来自 Target 的响应消息。是你的情况吗？如果没有，也许你根本不需要 SSB？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T11:33:03.097

Service Broker 基本上与队列无关。Service Broker 用于编写分布式应用程序，而不是用于排队。队列只是服务的消息存储，一个服务在一台机器上，而另一个服务在另一台机器上。为了简单起见，示例可能会在同一个数据库中显示两个服务，但该示例仍然是关于在分布式环境中进行通信的。

显示单个队列显然就足够的示例是错误地使用 Service Broker。这些示例应该更好地展示[如何将表用作队列](http://rusanu.com/2010/03/26/using-tables-as-queues/)。

# mysql - 关系弦图的表间连接

> ID：14643016
> 
> 赞同：1
> 
> 时间：2013-02-01T09:17:35.167
> 
> 标签：mysql, chord-diagram

我有一个问题。这对你来说可能很容易。

我正在尝试构建一个 d3js 和弦图 - 像这样（[http://bl.ocks.org/4062006](http://bl.ocks.org/4062006)）：

![在此处输入图像描述](../Images/17a44d6afa7528138a2e82957d58bb4f.png)

但是，我正在从我的 mysql 数据库中获取数据

我的表如下所示：

```
id gender_taker gender_giver
1     F            M
2     M            M
3     F            M
4     F            F 
```

我希望输出看起来像这样：

```
gender_giver gender_taker count(*)
M            F            2
M            M            1
F            F            1 
```

这很容易，可以通过以下方式产生：

```
SELECT gender_giver, gender_taker, COUNT(*) FROM data WHEREclauses GROUP BY gender_taker, gender_giver 
```

但我还有另一个问题，我还有两个看起来像这样的表： 表 1：

```
id entryid gender_taker
1   2       F
2   2       M
3   3       F 
```

表 2：

```
id entryid gender_giver
1   1       M
2   1       F
3   2       M 
```

entryid 基本上是第一个表的 id，表明 Table2 和 Table3 只是 table1 的子集

如果将这三个表结合起来，它可能看起来像：

```
id gender_taker gender_giver
1     F            M,M,F
2     M,F,M        M,M
3     F,F          M
4     F            F 
```

因此，对于和弦图，我希望将所有这些表格都考虑在内，最终给出如下内容：

```
gender_giver gender_taker count(*)
M            F            6           
M            M            4
F            F            2
F            M            0 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:32:48.083

```
DROP TABLE IF EXISTS core;
CREATE TABLE core
(entry_id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
,gender_taker CHAR(1) NOT NULL
,gender_giver CHAR(1) NOT NULL
);

INSERT INTO core VALUES
(1     ,'F','M'),
(2,'M','M'),
(3,'F','M'),
(4,'F','F');

DROP TABLE IF EXISTS table1;
CREATE TABLE table1
(id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
,entryid INT NOT NULL
,gender_taker CHAR(1) NOT NULL
);

INSERT INTO table1 VALUES
(1   ,2       ,'F'),
(2   ,2       ,'M'),
(3   ,3       ,'F');

DROP TABLE IF EXISTS table2;
CREATE TABLE table2
(id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
,entryid INT NOT NULL
,gender_giver CHAR(1) NOT NULL
);

INSERT INTO table2 VALUES

(1   ,1       ,'M'),
(2   ,1       ,'F'),
(3   ,2       ,'M');

SELECT entry_id
     , GROUP_CONCAT(gender_taker) gender_takers
     , GROUP_CONCAT(gender_giver) gender_givers
  FROM 
     ( SELECT * FROM core
       UNION
       SELECT entryid,gender_taker,NULL FROM table1
       UNION
       SELECT entryid,NULL,gender_giver FROM table2
     ) x
 GROUP 
    BY entry_id;
+----------+---------------+---------------+
| entry_id | gender_takers | gender_givers |
+----------+---------------+---------------+
|        1 | F             | M,M,F         |
|        2 | M,F,M         | M,M           |
|        3 | F,F           | M             |
|        4 | F             | F             |
+----------+---------------+---------------+

SELECT a.gender taker
     , b.gender giver
     , COUNT(*)
  FROM 
     (
       SELECT entry_id,'taker' role, gender_taker gender FROM core
       UNION ALL
       SELECT entry_id,'giver', gender_giver FROM core
       UNION ALL
       SELECT entryid,'taker',gender_taker FROM table1
       UNION ALL
       SELECT entryid,'giver',gender_giver FROM table2
     ) a
  JOIN
     (
       SELECT entry_id,'taker' role, gender_taker gender FROM core
       UNION ALL
       SELECT entry_id,'giver', gender_giver FROM core
       UNION ALL
       SELECT entryid,'taker',gender_taker FROM table1
       UNION ALL
       SELECT entryid,'giver',gender_giver FROM table2
     ) b
    ON b.entry_id = a.entry_id
   AND b.role = 'giver'
   AND a.role = 'taker'
 GROUP 
    BY taker
     , giver;
+-------+-------+----------+
| taker | giver | COUNT(*) |
+-------+-------+----------+
| F     | F     |        2 |
| F     | M     |        6 |
| M     | M     |        4 |
+-------+-------+----------+ 
```

# c - 要传递给 CreateDIBSection 函数的参数

> ID：14643020
> 
> 赞同：0
> 
> 时间：2013-02-01T09:17:58.323
> 
> 标签：c, image, winapi, bitmap

我有一个行数为 479 列数为 638 的彩色图像。我正在尝试将此图像保存为 BMP 文件。为此，我首先使用`CreateDIBSection`然后使用`CreateDIBitmap`. 对于`CreateDIBSection`我需要将 传递`BITMAPINFOHEADER`给函数。这里它有两个参数`biWidth`和`biSizeImage`。由于函数返回的内存应该是 DWORD 对齐的，并且`638`不是`4`我应该传递 638 或 640 作为宽度的倍数吗？假设我传递 638 作为宽度，函数返回的内存是 638 x 479 还是 640 x 479 ？我的观察是它是 640 x 479。在这种情况下，当我将文件另存为 BMP 时，每行的末尾会出现一条 2 像素宽的黑线。我该如何避免这种情况？我过去了`biCompression`，`BI_RGB`好像这很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:14:50.793

您应该将实际宽度作为位图宽度传递。然而，扫描线/步幅必须是双字对齐的。这意味着在计算步幅和内存缓冲区大小时，每行最多添加 3 个字节。

请注意，数据的实际宽度取决于每个像素的位数。如果您使用的是 32 位像素，那么它已经正确对齐。

# android - 如何以编程方式检索所有和正在运行的应用程序大小、CPU 使用率？

> ID：14643022
> 
> 赞同：13
> 
> 时间：2013-02-01T09:18:04.493
> 
> 标签：android, storage, cpu-usage, usage-statistics

我正在实现 android 应用程序以获取**所有应用程序**和正在**运行的应用程序** 及其**大小、使用情况和 CPU 使用情况**。

但我只得到所有和正在运行的应用程序**图标、标签和包名，**无法检索**大小、使用情况和 CPU 使用情况**。

我在 GooglePlayStore 中看到了一个应用程序，它是**AndroidSystem Info**。在该应用程序中给出了所有系统信息。

我想以编程方式检索该信息。

谁能帮我获取全部系统信息

提前致谢.................

这是我的代码：

**获取所有应用程序：**

```
ActivityManager am = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);
PackageManager pm = getPackageManager().getInstalledApplications(PackageManager.GET_META_DATA);
ApplicationInfo entry = (ApplicationInfo) mListAppInfo.get(position);
ImageView ivAppIcon = (ImageView) v.findViewById(R.id.ivIcon);
TextView tvAppName = (TextView) v.findViewById(R.id.tvName);
TextView tvPkgName = (TextView) v.findViewById(R.id.tvPack);

// set data to display
ivAppIcon.setImageDrawable(entry.loadIcon(mPackManager));
tvAppName.setText(entry.loadLabel(mPackManager));
tvPkgName.setText(entry.packageName); 
```

**用于运行应用程序**

```
ActivityManager activityManager = (ActivityManager)  getSystemService(Context.ACTIVITY_SERVICE);
List<ActivityManager.RunningAppProcessInfo> runAppList = am.getRunningAppProcesses();
int listsize = runAppList.size();
Log.v("tag", "listsize..." + listsize); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T06:53:34.010

您可以使用***IPackageStatsObserver.aidl***接口执行此操作。在您的应用程序 src 目录中创建包***android.content.pm***并实现以下代码它将返回所有应用程序大小。

```
Method getPackageSizedInfo =pm.getClass().getMethod("getPackageSizeInfo",String.class,IPackageStatsObserver.class);

getPackageSizedInfo.invoke(pm, pkgname,new IPackageStatsObserver.Stub() {
@Override 
public void onGetStatsCompleted(PackageStats pStats, boolean succeeded)throws RemoteException {double size=(double)pStats.codeSize+pStats.cacheSize+pStats.dataSize;}
}); 
```

# android - 如果服务没有与 AlarmManager 一起运行，则启动服务

> ID：14643028
> 
> 赞同：1
> 
> 时间：2013-02-01T09:18:21.987
> 
> 标签：android, service, alarmmanager

我有由 AlarmManager 启动的服务喜欢这个

```
Intent in = new Intent(SecondActivity.this,BotService.class);
                    PendingIntent pi = PendingIntent.getService(SecondActivity.this, 9768, in,PendingIntent.FLAG_UPDATE_CURRENT);

                    AlarmManager alarms = (AlarmManager) SecondActivity.this.getSystemService(Context.ALARM_SERVICE);
                    alarms.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),pi); 
```

当服务启动时，它会再次设置 AlarmManager，我这样做是因为我需要以随机间隔重复服务。

这是通过以下方式完成的：

```
Intent in = new Intent(BotService.this, BotService.class);
            PendingIntent pi = PendingIntent.getService(BotService.this, 9768,
                    in, PendingIntent.FLAG_UPDATE_CURRENT);

            AlarmManager alarms = (AlarmManager) BotService.this.getSystemService(Context.ALARM_SERVICE);
            alarms.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis()+ (attack_interval * MINS) + attack_interval_min, pi); 
```

我的服务可能会持续一段时间，如果服务没有运行，如何通过 AlarmManager 启动服务？

如果它正在运行，我需要再次设置 AlarmManager，因为否则我的服务将无法重新启动。谢谢您的回答。如果有什么不清楚的请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:27:02.413

您可能希望改为实现[IntentService](http://developer.android.com/reference/android/app/IntentService.html)；如果该方法适合您的需求，您将摆脱所有生命周期的麻烦。

另外，为什么不通过[setInexactRepeating](http://developer.android.com/reference/android/app/AlarmManager.html#setInexactRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)或 setRepeating 设置重复警报？当然，只有当您确定 IntentService 的运行时间不会超过警报间隔，或者您有其他合理的机制可以在 IntentService 仍在运行时忽略警报时，您才会这样做。

*更新：*如果您还询问如何最初启动您的服务......好吧，这取决于。许多人将`BOOT_COMPLETED`广播视为解决所有问题的方法。但是，它会阻止用户将您的应用程序移动到 SD 卡。如果您只能在应用程序运行后重复运行您的服务，那么您的应用程序可以启动此操作。`BOOT_COMPLETED`否则，如果您查看系统发送的哪些其他事件可能与您的服务相关，例如互联网连接的变化，您仍然可以避免陷阱。如果你决定，你可以[在这里](https://stackoverflow.com/questions/8277207/how-to-catch-the-system-broadcast-boot-completed-my-program-just-doesnt-work)`BOOT_COMPLETED`找到一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:20:36.610

如果您查看文档。当服务启动时，它有一个 startID，这可用于确定在给定时间运行的服务实例的数量。

参考：

```
public int onStartCommand (Intent intent, int flags, int startId)

Added in API level 5
Called by the system every time a client explicitly starts the service by calling startService(Intent), providing the arguments it supplied and a unique integer token representing the start request. Do not call this method directly.

For backwards compatibility, the default implementation calls onStart(Intent, int) and returns either START_STICKY or START_STICKY_COMPATIBILITY.

If you need your application to run on platform versions prior to API level 5, you can use the following model to handle the older onStart(Intent, int) callback in that case. The handleCommand method is implemented by you as appropriate: 
```

# javascript - IE8 没有在 jQuery 地址中执行子字符串

> ID：14643035
> 
> 赞同：2
> 
> 时间：2013-02-01T09:18:55.733
> 
> 标签：javascript, jquery, internet-explorer-8, jquery-address

jQuery 内的地址`target[1]`可以是`Films-by-Name-C7`. 我使用以下内容提取`7`

```
(target[1].lastIndexOf('?') > 0 ?target[1].slice(0, target[1].indexOf("?")).substr((target[1].lastIndexOf('C')+1)):target[1].substr(-(target[1].length-target[1].lastIndexOf('C')-1))) 
```

这适用于除 IE8 之外的所有浏览器。我不知道它为什么这样做。当我在 Fiddle 中尝试它时， [它也不起作用](http://jsfiddle.net/zR5NG/2/)。那么我如何`7`从`Films-by-Name-C7`ie8中提取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:37:00.367

IE<9 没有`.indexOf()`Array 的功能，要定义确切的规范版本，请在尝试使用之前运行它：

**[检查此链接](https://stackoverflow.com/questions/3629183/why-doesnt-indexof-work-on-an-array-ie8)**

由于您需要七个 **[，这可能是解决方案](http://jsfiddle.net/zR5NG/6/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:00:43.323

`substr`您的代码的问题是函数的负值

```
(target[1].lastIndexOf('?') > 0 ? 
    target[1].slice(0, target[1].indexOf("?")).substr((target[1].lastIndexOf('C')+1)) :
    target[1].substr(-(target[1].length - target[1].lastIndexOf('C')-1))) 
```

根据 W3C 标准，负值`substr`在浏览器 < IE9 中不起作用

# c# - 如何拆分复杂字符串以获取文件名和 base64 字符串

> ID：14643037
> 
> 赞同：-1
> 
> 时间：2013-02-01T09:19:02.207
> 
> 标签：c#, base64

嗨，我有一个来自 XML 节点的字符串，我需要拆分字符串并在一个字符串中获取“filename =”值，并在另一个字符串中获取所有 based64 块，以便能够对其进行解码并创建文件。

我正在使用 Split("\n") 但正在为每一行创建一行，这不是我需要的。有什么想法吗？

```
<Attachment>
      --boundaryfIudow==
      Content-Type: application/octet-stream;   name="IERL4-12-61.pdf"
      Content-Disposition: attachment; name="IERL4-12-61.pdf";
      filename="IERL4-12-61.pdf"
      Content-Transfer-Encoding: base64

      JVBERi0xLjUNJeLjz9MNCjI4MzQgMCBvYmoNPDwvTGluZWFyaXplZCAxL0wgMTAxNTkyOS9PIDI4
      MzcvRSAxMDIyOTMvTiA0Mi9UIDEwMTUxMjkvSCBbIDU4MiA1MDZdPj4NZW5kb2JqDSAgICAgICAg
      DQoyODU1IDAgb2JqDTw8L0RlY29kZVBhcm1zPDwvQ29sdW1ucyA1L1ByZWRpY3RvciAxMj4+L0Zp
      bHRlci9GbGF0ZURlY29kZS9JRFs8QTlCNjc4ODAwODkwODg0QjgyQURCRDk5N0U4OERERTY+PERD
      RDYyNDA0OTNDQUUyNDE5MjkwNzc4OEMyMUE1MEEyPl0vSW5kZXhbMjgzNCA3MF0vSW5mbyAyODMz
      IDAgUi9MZW5ndGggMTEwL1ByZXYgMTAxNTEzMC9Sb290IDI4MzUgMCBSL1NpemUgMjkwNC9UeXBl
      L1hSZWYvV1sxIDMgMV0+PnN0cmVhbQ0KaN5iYmRgEGBgYmBgMQCRDLtBJKMZmNwCIll3gkhmQbAI
      WA3LOjAJES8Gs0+ASUkQyTQJzJYDy64AkYaNQJKR6xGIrSIDNucVmBQFkv9LWBiYGBm4F4FtZ2Ac
      LKTAy0Hhkv8M3xVeAQQYAET0ENYNCmVuZHN0cmVhbQ1lbmRvYmoNc3RhcnR4cmVmDQowDQolJUVP
      Rg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgIA0KMjkwMyAwIG9iag08PC9DIDUzNS9GaWx0ZXIvRmxhdGVEZWNvZGUvSSA1NTcv
      TGVuZ3RoIDQxMC9PIDUxOS9TIDQzMz4+c3RyZWFtDQpo3mJgYGBiYGA2Z2BhYODLYRBkQABBBmYG
      VqA4xwcGBgETZ0MGBgUk2b1/mCIbzigELuC7wX2DxYbVfvNGh0NSr/TEfzImhL4R/iPyiZG1tfvQ
      LkU/h2iOoBKmByJ7WNNZ9RlzHCccSN6QeENrmoAnZ0CbGVOdY6HClA43HgU3wZtMx4Am79RUzt0e
      mxd2txRI7o7dAhRid/aWkmV3vBQly9soN0PWxaqjVOCVFU+JxAujni8S7UE9h1e0B/ItdngVOAMo
      oXjFeaVbIpQASaz2Zg/jW50FJNbIJl2/kLvg0XW+jdntYSAicquJzK0GxowG1owGBgbRBrYGwQYO
      Bihi7mBoYOoAMTsYJCBiHkAcgWCCcAMrUAlLB4MGmM8CUkq70AGCDAZu+UJwBDEwSINFXgHZqQyf
      D7g8YEkQU+C2YRViusc4vUGLIa1B+2HNHuUHbilAVaKrlzZIBkxmrPRg+BlyXyiIIYCBv+HAA4ih
      3GoMjF1lQAYjMDmoAukiBr4rRhAbpqXDo72fgb8qF6KK4TNAgAEAW6qi8w0KZW5kc3RyZWFtDWVu
      ZG9iag0yODM1IDAgb2JqDTw8L0xhbmcoZW4tVVMpL01hcmtJbmZvPDwvTWFya2VkIHRydWU+Pi9N
      ZXRhZGF0YSAxNDEgMCBSL09wZW5BY3Rpb24gMjgzNiAwIFIvT3V0bGluZXMgMjg4MCAwIFIvUGFn
      --boundaryfIudow==--
    </Attachment> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:28:01.110

给你（src 是你的源字符串）：

```
var split = src.Split('\n').Select(p => p.Trim()).ToList();

var filename = split.First(p => p.StartsWith("filename="));
filename = filename.Substring(10, filename.Length - 11);

var base64 = split[split.Count - 2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:40:23.117

如果您已经拥有 XMLNode，请使用它。将其解析为一个元素。

```
XmlElement attachment = (XmlElement)node; 
var filename = attachment.GetAttribute("filename").FirstOrDefault(); 
```

# javascript - 允许 window.open 打开新窗口而不弹出

> ID：14643040
> 
> 赞同：8
> 
> 时间：2013-02-01T09:19:09.173
> 
> 标签：javascript, jquery

我有这个JS代码：

```
window.open(loginurl, '_blank'); 
```

来自一个条件，例如：

```
if (userloggedin) {

//popup another page

} else {

window.open(loginurl, '_blank');

} 
```

“loginurl”是我想在新窗口中打开的登录 URL。

问题：这将在大多数浏览器（Firefox 和 Chrome）中被阻止，因为它的行为类似于弹出窗口。

我想要一个仍然使用我的登录 URL 变量（不更改 if else 语句）的解决方案，在新窗口中打开它，而不会发出任何被阻止弹出窗口的警告。

我正在寻找方法，但我从未找到解决方案。如果有人可以提供一些提示或见解。那将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T09:28:17.403

当函数在没有用户操作的情况下被触发时，打开的窗口`window.open`将始终被视为弹出窗口以被浏览器阻止。

这意味着例如这些不会被阻止：

```
$('a').on('click.open', function(e) { e.preventDefault(); window.open('http://disney.com') }); 
```

Chrome 甚至允许其他事件触发弹出窗口，而 firefox 不允许这样做：

```
$(document).on('keydown', function(e) { window.open('http://stackexchange.com') }); 
```

这将被阻止：

```
$(document).ready(function() { window.open('http://stackoverflow.com') }); 
```

因此，除非您触发`window.open`用户操作之后，否则您永远无法确定您的窗口不会被阻止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-07T16:24:52.150

这种方式不会阻止您的弹出窗口：

```
$.ajax({
    url:"url",
    dataType: "text",
    cache: false,
    success: function(data){
        window.open('url','_self');
   }
}); 
```

# asp.net - 表单身份验证注销

> ID：14643041
> 
> 赞同：0
> 
> 时间：2013-02-01T09:19:13.007
> 
> 标签：asp.net, asp.net-mvc-3, forms-authentication

我使用 ASP.Net MVC 开发了两个应用程序。我在两个应用程序中都使用表单身份验证。`cookieless="UseCookies"` `cookieName="ASP.NET_SessionId"`在 web.configs 我设置会话状态的以下属性

1.  我在同一浏览器的两个不同选项卡中同时访问了应用程序
2.  在一个应用程序中，我单击了注销。它已将我重定向到登录页面。
3.  这样做之后，当我尝试访问第二个应用程序时，它正在提供`Page Cannot be displayed Error`页面。

删除会话 Cookie 后即可访问。

请给我一些意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:49:48.847

之前我没有为 Auth cookie 指定任何名称。我通过为 Forms Authentication Cookie 提供不同的名称进行了测试。我的问题解决了。

# ruby-on-rails - 使用 amazon s3 使用回形针调整图像大小

> ID：14643048
> 
> 赞同：2
> 
> 时间：2013-02-01T09:19:34.410
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

我正在使用回形针 gem 将图像上传到 s3 amazone。三份图片正在上传 - 一份是真实的，两份是不同的分辨率，如 10x10,50x50。

现在我想上传 5 个图像副本，例如 10x10、20x20 ......这可以通过在模型中指定大小来完成。

但是 s3 上的现有图像呢？如何在 s3 上创建现有图像的副本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T11:01:47.140

您可以在模型中指定样式

```
styles => { :first=> "10x10", :second=> "20x20", :third=> "30x30", ....}, 
```

在你制作新样式后，只需使用回形针提供的 rake 任务

```
rake paperclip:refresh CLASS=User 
```

在这种情况下，用户是模型

这将对每个用户进行并重新生成图像

在这里查看更多 [https://github.com/thoughtbot/paperclip/wiki/Thumbnail-Generation](https://github.com/thoughtbot/paperclip/wiki/Thumbnail-Generation)

# sqlite - SQLite 无法将只读数据库从版本 2 升级到 3

> ID：14643049
> 
> 赞同：0
> 
> 时间：2013-02-01T09:19:46.750
> 
> 标签：sqlite

我的 SQLite 数据库中有一张表。

```
@Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL( "CREATE TABLE book1(_id INTEGER PRIMARY KEY AUTOINCREMENT,title TEXT, author TEXT,isbn TEXT);"); 
```

我正在表中添加新列并更改数据库的版本号。

```
@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("ALTER TABLE book1 ADD COLUMN Cost TEXT");
        Log.v("Alter Table", "Colunm Added enjoy"+db.getVersion());
        db.execSQL("INSERT into book1 (title,author,isbn,Cost,city) VALUES('php','Lioneworge',1111,1500)"); 
```

它在我的表中添加新列。

但是如果我想在我的这个表中再次添加新列。版本 2 到 3

```
@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("ALTER TABLE book1 ADD COLUMN Cost TEXT,city TEXT");

        db.execSQL("INSERT into book1 (title,author,isbn,Cost,city) VALUES('php','Lioneworge',1111,1500,'Hydrabad')"); 
```

它显示了这个

```
Caused by:  Can't upgrade read-only database from version 2 to 3 
```

> 我不想在升级时丢失我的数据，这就是我不使用删除查询的原因。

**更新**：-*我读到这个 ​​ALTER TABLE 在 sqlite 中是有限的，有人请告诉我你可以改变多少次来添加和重命名。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:49:57.107

您可以根据需要添加任意数量，但一次只能添加一个。见[http://www.sqlite.org/lang_altertable.html](http://www.sqlite.org/lang_altertable.html)

将 ALTER TABLE 拆分为两个，每个添加 1 列并尝试

**未测试**

# android - 如何将 Double 值从一个活动检索到另一个活动？

> ID：14643051
> 
> 赞同：3
> 
> 时间：2013-02-01T09:19:53.987
> 
> 标签：android, android-intent, casting, double

我制作了一个包含 2 个活动的应用程序，其中第一个活动包含一些 EditTexts（十进制数字），另一个 ractivity 还包含一些 Edtitexts（十进制），现在我想将一个 EditText 的值传递给另一个，但作为“双”而不是一个字符串。因为这些值将用于数学计算。我希望严格地说“双”值。我已经尝试如下：但不知道如何将字符串转换为“double”。

**活动1.java**

```
 final Double d1;
        final Double d2;
        final Double d3;
        final Double d4;
        final Double d5;
        final Double d6;
        final Double d7;
        final Double d8;
        d1=Double.parseDouble(et1.getText().toString());
        d2=Double.parseDouble(et2.getText().toString());
        d3=Double.parseDouble(et3.getText().toString());
        d4=Double.parseDouble(et4.getText().toString());
        d5=Double.parseDouble(et5.getText().toString());
        d6=Double.parseDouble(et6.getText().toString());
        d7=Double.parseDouble(et7.getText().toString());
        d8=Double.parseDouble(et8.getText().toString());
.
.
.
.
Intent ic = new Intent(Calculator_1Activity.this,Calculator2a.class);
        ic.putExtra("doubleValue_e1", d1);
        ic.putExtra("doubleValue_e2", d2);
        ic.putExtra("doubleValue_e3", d3);
        ic.putExtra("doubleValue_e4", d4);
        ic.putExtra("doubleValue_e5", d5);
        ic.putExtra("doubleValue_e6", d6);
        ic.putExtra("doubleValue_e7", d7);
        ic.putExtra("doubleValue_e8", d8);

        startActivity(ic); 
```

**Activity2.java**

```
Intent receiveIntent = this.getIntent();
        e1 = receiveIntent.getDoubleExtra("doubleValue_e1", 0.00);
        e2 = receiveIntent.getDoubleExtra("doubleValue_e2", 0.00);
        e3 = receiveIntent.getDoubleExtra("doubleValue_e3", 0.00);
        e4 = receiveIntent.getDoubleExtra("doubleValue_e4", 0.00);
        e5 = receiveIntent.getDoubleExtra("doubleValue_e5", 0.00);
        e6 = receiveIntent.getDoubleExtra("doubleValue_e6", 0.00);
        e7 = receiveIntent.getDoubleExtra("doubleValue_e7", 0.00);
        e8 = receiveIntent.getDoubleExtra("doubleValue_e8", 0.00);

        Calculator_1Activity cal1 = new Calculator_1Activity();
        et1.setText(cal1.et1.getText().toString()); 
```

我已经尝试过了，但仍然无法正常工作。我的项目意外停止了..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T09:30:21.163

**从第一个活动发送双倍：**

```
Intent sendingIntent = new Intent(this,SecondActivity.class);
intent.putExtra("doubleValue_e1", doubleData);
intent.putExtra("doubleValue_e2", doubleData);
intent.putExtra("doubleValue_e3", doubleData);
intent.putExtra("doubleValue_e4", doubleData);
startActivity(sendingIntent); 
```

**在第二个活动中获得双倍：**

```
double e1,e2,e3,e4;
Intent receiveIntent = this.getIntent();
e1 = intent.getDoubleExtra("doubleValue_e1", defaultValue)
e2 = intent.getDoubleExtra("doubleValue_e2", defaultValue)
e3 = intent.getDoubleExtra("doubleValue_e3", defaultValue)
e4 = intent.getDoubleExtra("doubleValue_e4", defaultValue) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:22:20.477

利用`Double.parseDouble(my_string);`

请参阅[http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:23:02.353

Double.parseDouble(String s) 使用 Bundle 将信息从一个活动传递到另一个活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:24:29.830

将您的 Double 解析为字符串，放入包中，然后在另一个活动中解析回字符串

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-27T19:41:50.380

1.  使用该方法将您的双精度转换`DATA`为字符串。`Double.toString()`
2.  通过意图发送此字符串。

    ```
    intent.putExtra("DoubleWhichNowIsAString", DATA); 
    ```

3.  在接收器处取回它

    ```
    getIntent().getStringExtra("DoubleWhichNowIsAString") 
    ```

4.  `Double.parseDouble()`使用函数将字符串解析回双精度。

# linux - 测试目录起诉 S_ISDIR，但它不起作用

> ID：14643054
> 
> 赞同：0
> 
> 时间：2013-02-01T09:19:57.203
> 
> 标签：linux, macros, posix, dir

我正在学习linux中的c编程，我写这个是为了输出文件和目录的信息，比如标准工具“ls”和“-l”，除了宏S_ISDIR，一切都很好，这是我的代码。此外，我的操作系统是 mint 14 x86_64。

```
#include<sys/types.h>
#include<time.h>
#include<string.h>
#include<dirent.h>
#include<stdio.h>
#include<sys/stat.h>
#include<unistd.h>
void do_ls(char []);
void show_file_info(struct stat *t){
    printf("mode:    %o\n",t->st_mode);
    if(S_ISDIR(t->st_mode)==0)
        printf("Is a dir\n");
    else
        printf("Is not a dir\n");
    printf("links:   %d\n",t->st_nlink);
    printf("group:   %d\n",t->st_gid);
    printf("user:    %d\n",t->st_uid);
    printf("size:    %d\n",t->st_size);
    printf("modtime: %s\n",ctime(&t->st_mtime));
}
int main(int num,char *a[]){
    if(num==1){
        do_ls(".");
    }
    else{
        while(--num){
            printf("%s :\n",*++a);
            do_ls(*a);
        }
    }
}
void do_ls(char dirname[]){
    DIR *tem=opendir(dirname);
    struct dirent *direntp;
    struct stat *buf;
    char t[256];
    if(tem==NULL){
        fprintf(stderr,"ls: cannot open %s\n",dirname);
    }
    else{
        while((direntp=readdir(tem))!=NULL){
            strcpy(t,dirname);
            printf("%s\n",direntp->d_name);
            strcat(t,"/");
            if(stat(t,buf)==-1){
                perror("");
                break;
            }
            else{
                show_file_info(buf);
            }
        }
        closedir(tem);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:41:52.730

关于user1198331的更正`stat`是正确的。通常检查所有系统调用返回值以防止错误是一个好习惯。

不过，在您的原始代码中，我认为这部分是错误的：

```
if(S_ISDIR(t->st_mode)==0)
    printf("Is a dir\n");
else
    printf("Is not a dir\n"); 
```

您认为如果 S_ISDIR(t->st_mode) 返回 0，则它是一个目录，但实际上，如果 t 指向的文件**不是**目录，则 S_ISDIR(t->st_mode) 返回 0。因此，您必须进行反向检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:44:18.683

系统调用

```
int stat(const char *path, struct stat *buf); 
```

不为 分配内存`*buf`。

要么你坚持你的声明

```
struct stat *buf; 
```

并手动分配内存

```
buf = (struct stat *) malloc(sizeof(struct stat)); 
```

并`free`在不再需要的地方释放`buf`内存

或者您将声明更改为

```
struct stat buf; 
```

让 c 为你分配内存。

此外，您应该按照手册中的建议测试`stat`with的失败。`if(stat(t,&buf) < 0)`

另一个错误是，您没有将文件名传递给`stat`目录名。

我附加了您的代码的更正版本。

* * *

```
#include<sys/types.h>
#include<time.h>
#include<string.h>
#include<dirent.h>
#include<stdio.h>
#include<sys/stat.h>
#include<unistd.h>

void do_ls(char []);

void show_file_info(struct stat *t){
    printf("mode:    %o\n",t->st_mode);
    if((t->st_mode & S_IFMT) == S_IFDIR)
        printf("Is a dir\n");
    else
        printf("Is not a dir\n");
    printf("links:   %d\n",t->st_nlink);
    printf("group:   %d\n",t->st_gid);
    printf("user:    %d\n",t->st_uid);
    printf("size:    %d\n",t->st_size);
    printf("modtime: %s\n",ctime(&t->st_mtime));
}

int main(int num,char *a[]){
    if(num==1){
        do_ls(".");
    }
    else{
        while(--num){
            printf("%s :\n",*++a);
            do_ls(*a);
        }
    }
}

void do_ls(char dirname[]){
    DIR *tem=opendir(dirname);
    struct dirent *direntp;
    struct stat buf;
    char t[256];

    if(tem==NULL){
        fprintf(stderr,"ls: cannot open %s\n",dirname);
    }
    else{
        while((direntp=readdir(tem))!=NULL){
            strcpy(t,dirname);
            printf("%s\n",direntp->d_name);
            strcat(t,"/");
            strcat(t,direntp->d_name);
            if(stat(t,&buf) < 0){
                perror("");
                break;
            }
            else{
                show_file_info(&buf);
            }
        }
        closedir(tem);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-21T09:17:52.693

尝试从此[链接](http:////https://www.linuxquestions.org/questions/programming-9/porting-to-win32-429334/)关注。

```
#ifndef S_ISDIR
#define S_ISDIR(mode)  (((mode) & S_IFMT) == S_IFDIR)
#endif 
```

# asp.net - 如何从 asp.net 中的 gridview 获取选定的行字段

> ID：14643067
> 
> 赞同：1
> 
> 时间：2013-02-01T09:21:01.310
> 
> 标签：asp.net, gridview

我正在开发一个带有 Gridview 控件的 aspx 页面。我在这里粘贴我的代码

```
 <Columns>

                     <asp:TemplateField HeaderText="Request">
                    <ItemTemplate>
                    <asp:LinkButton ID="sendrequest" runat="server" Text="SendRequest" CommandName="SendRequest"></asp:LinkButton>
                    </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="FirstName">
                    <ItemTemplate>
                    <asp:Label ID="fname" runat="server" Text='<%#Eval("fname") %>'></asp:Label>
                    </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="LastName">
                    <ItemTemplate>
                    <asp:Label ID="lname" runat="server" Text='<%#Eval("lname") %>'></asp:Label>
                    </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="EMailID">
                    <ItemTemplate>
                    <asp:Label ID="email" runat="server" Text='<%#Eval("email") %>'></asp:Label>
                    </ItemTemplate>
                    </asp:TemplateField>

                    <asp:TemplateField HeaderText="Image">
                    <ItemTemplate>
                    <asp:Image ID="img" runat="server" ImageUrl='<%#Eval("imagepath") %>' Width="100" Height="100" />
                    </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Request">
                    <ItemTemplate>
                    <asp:LinkButton ID="viewprofile" runat="server" Text="ViewFullProfile" CommandName="ViewProfile"
                    a href ='<%#"ViewProfile.aspx?email="+DataBinder.Eval(Container.DataItem,"email") %>'>
                    </asp:LinkButton>
                    </ItemTemplate>
                    </asp:TemplateField>

                    </Columns>

                </asp:GridView> 
```

我的问题是我需要哪个 LinkBut​​ton(SendRequest) 单击该行电子邮件值的电子邮件值

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:28:27.520

处理 GridView RowCommand 事件：

```
protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e) 
{ 
    if (e.CommandName.Equals("SendRequest")) 
    { 
       string strEmail = GridView1.DataKeys[Convert.ToInt32(e.CommandArgument)].Value.ToString();
       lbltest.Text = strEmail; 
    } 
} 
```

假设您将 DataKeyNames 设置为*email*。*您还必须将sendRequest*按钮的 CommandArgument 设置为

```
CommandArgument="<%# Container.DataItemIndex %> 
```

# graphics - 我在哪里可以找到适用于 Windows 的 tomesh.c？

> ID：14643068
> 
> 赞同：1
> 
> 时间：2013-02-01T09:21:02.840
> 
> 标签：graphics, 3d, sgi

它在许多论文中用作参考：

> K. Akeley、P. Haeberli 和 D. Burns。tomesh.c : SGI Developer's Toolbox CD 上的 C 程序，1990。

在 SGI 的官方网站上，我发现只有 UNIX 分发版。

但是我在哪里可以找到 Windows 操作系统所需的源代码和简短描述？

* * *

我找到了另一种线性速度缓存优化算法实现： [http](http://files.rsdn.ru/38429/ls_vcache_opt.zip) : //files.rsdn.ru/38429/ls_vcache_opt.zip 以及如何在 C++ 上使用代码示例的解释（但在俄语上）：[http://www.rsdn。 ru/forum/src/3076506.1](http://www.rsdn.ru/forum/src/3076506.1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T07:05:46.727

Here's a [link](http://steve.hollasch.net/cgindex/geometry/tomesh.c) to the source. It's straight "C", so it should compile on Windows simply.

# yii - 无法在 xampp 上打开 YII shell 命令行工具

> ID：14643078
> 
> 赞同：2
> 
> 时间：2013-02-01T09:21:31.220
> 
> 标签：yii

我的**yiic.bat**文件设置了以下内容

```
@echo off

rem -------------------------------------------------------------
rem  Yii command line script for Windows.
rem  This is the bootstrap script for running yiic on Windows.
rem -------------------------------------------------------------

@setlocal

set BIN_PATH=%~dp0

if "%PHP_COMMAND%" == "" set PHP_COMMAND=c:\xampp\php\php.exe

"%PHP_COMMAND%" "%BIN_PATH%yiic.php" %*

@endlocal 
```

现在我可以为 yii 创建任何 Web 应用程序

但是我无法打开 yii shell 命令行工具。

问题出现在我的 cmd 中

**错误：index.php 不存在或不是入口脚本文件**

我已经搜索了这个相关的问题。但我找不到合适的答案。请问，如何配置我的 MyAplication/protected/yiic.bat 文件？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:46:07.730

同样的问题，但刚刚解决！
您必须从您的 webapp 文件夹内输入，因为您的 index.php 就在那儿。
所以：
**1）**进入你的 htdocs 文件夹 [cd c:\xampp\htdocs]
**2**）安装你的“SomeName”应用程序直接输入：[Yii-1.1.13/framework/yiic webapp SomeName]
**3**）现在进入你的“SomeName” ' 文件夹 [cd somename] (所以你将在 c:\xampp\htdocs\somename 内)
**4** ) 从这里直接输入 yiic 执行： [c:\xampp\htdocs\yii-1.1.13\framework\yiic shell]
**5**）你会读到：“ **Yii Interactive Tool v1.1 Please type 'help' for help. type 'exit' to quit.** ” - （如果没有，好吧......对不起！！）

如果它有效，那是因为当您启动“yiic shell”命令（**4**）时，您必须在**c:\xampp\htdocs\somename 内**，因为这是您在其中找到“index.php”的文件夹！因此，例如，如果您在 [c:\xampp] 中并运行 [c:\xampp\htdocs\yii-1.1.13\framework\yiic shell] 您将失败，因为没有“index.php”文件在 [c:\xampp] 内！
我希望我很清楚！祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T02:53:23.420

为什么不直接从 PHP 运行 yiic？

```
C:\xampp\php\php.exe /path/to/yiic 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T17:46:00.423

在 cli 中移动到您的项目/受保护文件夹，然后：

yiic 外壳 ../index.php

在你的框架文件夹中使用 yiic 创建你的项目 在你的项目受保护的文件夹中使用 yiic 创建所有与项目相关的东西

# svn - 如何在 Windows 机器上设置 VisualSVN Server 主从（镜像）配置

> ID：14643079
> 
> 赞同：1
> 
> 时间：2013-02-01T09:21:35.237
> 
> 标签：svn, master, visualsvn-server, mirror, slave

我们在 Windows 机器上有三个 SVN 服务器。一个现场 (ON1) 和两个离岸 (OF1, OF2)。我想将现场 SVN 存储库作为主服务器，将离岸机器作为镜像。

用户将提交到离岸 svn 服务器（OF1、OF2 中的任何一个），内部将提交到现场服务器（ON1），并将 SVNSYNCd 到所有从服务器（OF1 和 OF2）。

我无法理解包括 svnbook.red-bean.com 在内的各种网站中提到的流程。任何人都可以帮助我逐步进行设置。我知道 httpd.conf 和各种 svn 钩子，但只是零碎的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T14:20:09.733

您可以使用多[站点存储库复制功能](http://www.visualsvn.com/server/features/multisite-replication/)或[配置直写代理](http://www.visualsvn.com/support/svnbook/serverconfig/httpd/#svn.serverconfig.httpd.extra.writethruproxy)。

# iphone - 触摸索引时显示 UITableView 的部分标题

> ID：14643090
> 
> 赞同：1
> 
> 时间：2013-02-01T09:22:03.917
> 
> 标签：iphone, ios, objective-c, uitableview

我正在编写一个字典应用程序来学习 iOS，并且我已经实现了一个`UITableView`以字母表作为部分标题和右侧所有字母的索引。它工作得很好，但是我可以在屏幕中央的一个框中显示选定的索引吗？我正在查看[UITableViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)参考，但看不到我可能覆盖的任何方法。帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:15:50.343

您必须手动创建一个`UIView`放在上面的`UITableView`，然后显示字母或您想要呈现的任何内容。确保不要将它添加到表视图本身，因为它是一个`UIScrollView`子类，并且您的视图会受到它的`contentOffset`.

当用户按下一个索引或将手指移到上面时，将调用此回调：

```
-tableView:sectionForSectionIndexTitle:title atIndex: 
```

使用它来更改视图的内容并使其可见并设置计时器以使其再次淡出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:59:39.527

您必须创建在单击单元格时显示的自定义视图，并且在该视图中您可以添加标签以显示您选择的字母表。

是的，如果你想在屏幕中心显示它而不是根据它给出它的 X 和 Y 坐标值。希望它有帮助......

# python - python：这是对类方法和方法使用相同函数名的好方法吗？

> ID：14643092
> 
> 赞同：1
> 
> 时间：2013-02-01T09:22:09.303
> 
> 标签：python, static-methods, class-method

```
class A(object):

    @classmethod
    def print(cls):
        print 'A'

    def __print(self):
        print 'B'

    def __init__(self):
        self.print = self.__print

a = A()
a.print()
A.print() 
```

我觉得太丑了，有没有其他方法可以实现相同的功能？不要说 combinemethod，因为它每次都会创建一个对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T09:48:41.873

最简单的解决方案是创建一个描述符装饰器，`classmethod`但它也将实例传递给方法：

```
from functools import partial
class descriptormethod(object):
    def __init__(self, fn):
        self.fn = fn
    def __get__(self, instance, owner):
        return partial(self.fn, instance, owner)

class A(object):
    @descriptormethod
    def print_(self, cls):
        print 'A' if self is None else 'B' 
```

不用担心描述符或部分对象的开销；这与您正常调用实例或类方法时发生的情况没有什么不同。

# php - 在 foreach 中进行 foreach 并通过它们进行过滤

> ID：14643093
> 
> 赞同：2
> 
> 时间：2013-02-01T09:22:16.603
> 
> 标签：php, wordpress, foreach

我正在尝试通过通过 wordpress 中的类别链接的帖子显示相关帖子，但我无法过滤结果。

这是我目前的代码：

```
 $current_post = $post->ID;
         $i = 0;
         $categories = get_the_category();
         foreach ($categories as $category) {            
            $posts = get_posts('numberposts=4&category='. $category->term_id . '&exclude=' . $post->ID);
                foreach($posts as $post) { 
                                     // DO BASIC ECHO POST CONTENT STUFF

                     $i++;
                     if ($i == 3) break;
                         }
           } 

wp_reset_query(); 
```

我的代码的问题是，当一个帖子属于 3 个类别时（即使这不是很好的网络实践），这个循环会回显 12 个帖子（每个类别 4 个帖子），如果另一篇文章属于相同的 3 个类别，它是显示 3 次（重复）。我想显示 MAX 4 个帖子，并且没有重复。

我以为 $i == 3 break; 将使其在第一个“全局”4 个结果之后停止。但它没有？我怎样才能做到这一点，所以结果中没有重复的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:40:26.897

您可以创建显示帖子的数组，然后检查帖子是否不在此数组中显示。

```
$show_array = array();

// ...

foreach($posts as $post) { 
   if (!in_array($post['id'], $show_array)) {
       // show post
       $show_array[] = $post['id'];
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:17:33.493

```
$current_post = $post->ID;
         $i = 0;
         $categories = get_the_category();
         foreach ($categories as $category) {            
            $posts = get_posts('numberposts=4&category='. $category->term_id . '&exclude=' . $post->ID);
                foreach($posts as $post) { 
                                     // DO BASIC ECHO POST CONTENT STUFF

                     $i++;
                     if ($i == 3) break 2;
                         }
           } 
```

wp_reset_query();

# java - GWT 客户端中的 Java 和 Json 哪个好？

> ID：14643096
> 
> 赞同：1
> 
> 时间：2013-02-01T09:22:22.550
> 
> 标签：java, json, gwt

我有一个 GWT 客户端项目，REST 是我的 Web 服务。我有一个学生班级，我想将其保存在 Web 服务中的数据库中。我正在将学生转换为 json 并发送到服务器。是正确的方法吗？我的疑问是在客户端我是否必须使用 Json 对象而不是 Student？（因为它不需要任何转换即可发送到服务器）如​​果我使用 Json，它会像 java 一样提供良好的性能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:33:51.123

Json（在这种情况下）用于序列化您的学生对象。这意味着它用于挑选学生对象中与其他对象（例如姓名、年龄、性别......）区分开来的部分，以便将此信息传输到其他地方。如果您不需要学生对象服务器端那么很好，只需将其转储到数据库中。但是，在客户端，您应该有一个类或方法，它可以从学生对象创建 json 对象，也可以从 json 对象创建学生对象。**不要将 json 对象视为学生对象**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:37:16.170

[JSON](http://en.wikipedia.org/wiki/JSON)或 JavaScript Object Notation，是一种基于文本的开放标准，专为人类可读的数据交换而设计。

因此，如果您使用它在您的休息服务和 GWT 前端之间传输数据，那么它很好。要保存学生 JSON 表示法，您可以使用许多可用的库（如[jersey](http://jersey.java.net/nonav/documentation/latest/json.html)或[GWTJsonizer）](http://code.google.com/p/acris/wiki/GWTJsonizer)将其转换为 POJO ，并且可以轻松地将其存储到 DB。

总结一下。JSON 和 Java 对象是两个不同的东西，使用 JSON 传输信息，将 JSON 转换为 java 对象并使用此 java 对象在您的 Web 服务中进行进一步处理

# gimp - 描边选择不会使用选定的颜色

> ID：14643098
> 
> 赞同：14
> 
> 时间：2013-02-01T09:22:29.787
> 
> 标签：gimp

我遇到了这个问题，笔画选择不会使用选定的颜色。所以我会选择一个区域并转到编辑-> 描边选择然后 Gimp 会自动将我选择的颜色更改为另一种颜色。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-22T16:52:42.407

终于想通了！您需要在打开“描边路径”（或“描边选择”）对话框后更改颜色。哇！我被这个问题发疯了。我不知道为什么很少有人遇到这个错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T22:52:52.127

user977151，使用“使用绘画工具描边”选项，如果您愿意，请选中“模拟画笔动态”选项。它将使用您的工具集。

# zend-framework2 - 扩展 ZfcUsers 用户控制器

> ID：14643102
> 
> 赞同：0
> 
> 时间：2013-02-01T09:22:34.843
> 
> 标签：zend-framework2, zfcuser

我想扩展`UserController`一个`setEventManager`实现，以显示另一个布局 - 只需使用登录掩码。

当我调用 url 时`www.example.com`，我得到了我的控制器，以及其他布局。但是，如果输入错误的用户名，我会重定向`to www.exmpale.com/user/login`并获得默认布局。

我如何覆盖所有路由`ZfcUser Module`并将它们重定向到我自己的控制器，以确保`UserController`不能直接调用。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T20:07:11.423

如果我正确理解您的问题，您可能只需要编辑文件`module.config.php`。它包含所有[路由定义](https://github.com/ZF-Commons/ZfcUser/blob/master/config/module.config.php)。

根据我对您的问题的理解，您有一个自己的控制器，称为`MyBetterUserController`？

您可以添加一个自己的模块作为模块的扩展`ZfcUser`，也许您想将其命名为`ZfcUserMod`. 这个新模块将只包含一个`Module.php`文件和一个包含`config`配置文件的文件夹。

然后你可以在这个**模块的配置文件**中定义你的路由并覆盖所有来自`ZfcUser`. 确保您使用完全相同的路由名称（数组中的键）`ZfcUser`（目前他们使用**zfcuser**作为路由名称）。否则路由不会被覆盖，UrlHelper 也不会使用你的路由。

然后添加`ZfcUserMod`到全局`application.config.php` **后** `ZfcUser`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-21T18:03:12.240

`controllers -> invocables pointing 'zfcuser' => 'namespace\your\extendedusercontroller'`只重写而不是重写所有路由不是更容易吗？

# c# - Web 服务 (ASMX) 代理创建和 reference.cs 文件未生成

> ID：14643105
> 
> 赞同：2
> 
> 时间：2013-02-01T09:22:44.330
> 
> 标签：c#, web-services, asmx

我使用 c# 4.0 版开发了一个 Web 服务（ASMX）。它只会将文件上传到我们的网络服务器。部署 Web 服务后，我使用 .net v4.0 创建了一个 win 表单项目，并在那里创建了我的 Web 服务的代理。之后我测试了文件上传过程，发现它正在工作。当我使用 .net v2.0 创建一个 win 表单应用程序时，问题就开始了，当我在那里创建一个具有相同 Web 服务的代理时，我看到创建的代理没有 Reference.cs 文件。这就是为什么我无法调用该 Web 服务的原因。当我尝试使用 dotnet 2.0 版创建代理时，我无法理解为什么没有创建 Reference.cs 文件。

所以告诉我是否存在特定于版本的问题。我猜出现问题是因为我在 dotnet v4.0 上开发此 Web 服务并在 dotnet v2.0 上创建代理。请解释为什么没有创建 Reference.cs 文件。也指导我如何解决这个问题。

我在这里发布我的网络服务代码。看看，告诉我有什么问题。

```
 [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    // [System.Web.Script.Services.ScriptService]
    public class FileUploader : System.Web.Services.WebService
    {

        [WebMethod]
        public string UploadFile(byte[] f, string fileName)
        {
            // the byte array argument contains the content of the file
            // the string argument contains the name and extension
            // of the file passed in the byte array
            string uploadFolder = HttpContext.Current.Request.PhysicalApplicationPath + @"UPS_New\LabelImages\" + fileName;
            try
            {
                // instance a memory stream and pass the
                // byte array to its constructor
                MemoryStream ms = new MemoryStream(f);

                // instance a filestream pointing to the
                // storage folder, use the original file name
                // to name the resulting file
                FileStream fs = new FileStream(uploadFolder, FileMode.Create);

                // write the memory stream containing the original
                // file as a byte array to the filestream
                ms.WriteTo(fs);
                // clean up
                ms.Close();
                fs.Close();
                fs.Dispose();
                // return OK if we made it this far
                return "OK";
            }
            catch (Exception ex)
            {
                // return the error message if the operation fails
                return ex.Message.ToString();
            }

        }

    } 
```

请指导我...我正在寻找建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:09:02.150

这是`version specific issue`，`when the client is build below the version of service then service cannot be accessed in the client`.为了使这项工作，`build the service in 2.0 framework and then do the reference`.it 将接受服务 dll，因为它是使用与客户端相同的版本构建的。

在您的情况下，首先在 2.0 中构建服务，然后在您的客户端中使用 2.0 中构建的代理。

# c# - 如何在 C# 中过滤数据表中的日期时间字段而不考虑它的时间值

> ID：14643107
> 
> 赞同：1
> 
> 时间：2013-02-01T09:23:00.807
> 
> 标签：c#, datetime, datagridview, datatable, datetimepicker

我试过这段代码：

```
(datagridview1.DataSource as DataTable).Select("date_time=" + Convert.ToDateTime(dtpDate.Text.ToString())); 
```

但我认为它仍然包含时间并让我出错“语法错误：'12' 运算符后缺少操作数。”

我真正想要发生的是过滤数据的日期时间字段而忽略它的时间，只是日期。

这是我的数据网格视图的样子：

```
1   1   1/24/2013 12:34 AM  
1   2   1/24/2013 12:34 AM  
2   3   1/24/2013 12:53 AM  
3       1/25/2013 12:30 AM  
4       1/25/2013 12:53 AM  
5   4   1/25/2013 2:10 AM   
6   5   1/25/2013 2:26 AM   
7   6   1/25/2013 2:39 AM   
8   7   1/25/2013 2:40 AM 
```

更新代码：

```
datagridview1.DataSource = (datagridview1.DataSource as DataTable).AsEnumerable()
            .Where(r => r.Field<DateTime?>("date_time").HasValue 
                    && r.Field<DateTime?>("date_time").Value.Date == dt.Date).CopyToDataTable(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:27:32.300

当你想比较日期时不要使用字符串。您可以使用`Linq-To-DataTable`强类型`DataRow`扩展方法`Field`。然后使用 的`Date`属性`DateTime`。

```
DateTime  dt = DateTime.Parse(dtpDate.Text);
DataTable filteredRows = table.AsEnumerable()
    .Where(r => r.Field<DateTime>("date_time").Date == dt.Date)
    .CopyToDataTable(); 
```

**编辑**（根据您的评论）

> “无法将 DBNull.Value 转换为类型 'System.DateTime'。请使用可为空的类型。

然后你`nulls`在这个领域。由于该[`Field`](http://msdn.microsoft.com/en-us/library/bb360891.aspx)方法支持[可空类型](http://www.dotnetperls.com/nullable-datetime)，因此您可以直接使用它。

```
DataTable filteredRows = table.AsEnumerable()
    .Where(r => r.Field<DateTime?>("date_time").HasValue 
            &&  r.Field<DateTime?>("date_time").Value.Date == dt.Date)
    .CopyToDataTable(); 
```

**编辑**因此，当表为空时会出现异常。是的，当源表为空时`CopyToDataTable`抛出一个。`InvalidOperationException`

请注意，也许您根本不需要将结果复制到新`DataTable`的。您可以将查询本身绑定到 datagridview 的数据源属性，因此请尝试简单地省略`CopyToDataTable`.

```
var filteredRows = table.AsEnumerable()
    .Where(r => r.Field<DateTime?>("date_time").HasValue 
            &&  r.Field<DateTime?>("date_time").Value.Date == dt.Date);

datagridview1.DataSource = filteredRows; 
```

否则，您还可以检查查询是否返回任何内容：

```
DataTable table = new DataTable();
if(filteredRows.Any())
{
    table = filteredRows.CopyToDataTable();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T09:12:22.697

```
 DataView dv = new DataView(Datatable1);
            dv.RowFilter = "StartDate >= #" + DtpDateRangeFrom.Value + "# AND StartDate <= #" + DtpDateRangeTo.Value + "#"; 
```

# php - Highstock - 如何使用 JSON-Array 添加多个系列

> ID：14643109
> 
> 赞同：3
> 
> 时间：2013-02-01T09:23:01.593
> 
> 标签：php, arrays, json, highstock

我的目标：我想绘制多个系列的 HighStock 图表。数据由 AJAX 从 data.php 加载。data.php 的输出是一个 JSON 数组

我的问题：我不知道如何从 JSON 数组中获取数据

输出是例如

**[[时间戳,value1,value2],[时间戳,value1,value2]]**

系列 1 应该是 -> 时间戳和 value1

系列 2 应该是 -> 时间戳和 value2

这是我的代码

```
// Draw the chart
$(function(){

        /* The chart is drawn by getting the specific data from "data.php".
         * The configuration settings are transmitted by GET-Method. The output is an JSON-Array.  */

        $.getJSON('data.php',
        function(data) {

        chart = new Highcharts.StockChart
        ({
        chart:  {  renderTo: 'chartcontainer', type: 'line'  },
        title:  { text: 'You see the data of the last hour!' },
        xAxis: {  type: 'datetime', title: { text: 'time'  } },
        yAxis: { title: { text: 'unit'  } },
        series: [{ name: 'series1', data: data },{ name: 'series2', data: data }],

        });
    });
}); 
```

我想我必须改变

```
series: [{ name: 'series1', data: data },{ name: 'series2', data: data }], 
```

但我不知道在做什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:40:29.723

遍历数组的所有项`data`，并填充两个单独的数组：

```
var series1 = [];
var series2 = [];
for (var i = 0; i < data.length; i++) {
  series1.push([data[0], data[1]);
  series1.push([data[0], data[2]);
} 
```

然后，您在每个系列数组中都有时间戳-值对。

在 php 中执行此操作可能更有效，特别是如果您可以替换当前的 json 创建。

# c++ - 为什么即使使用标头保护也会出现链接错误？

> ID：14643113
> 
> 赞同：1
> 
> 时间：2013-02-01T09:23:20.330
> 
> 标签：c++

> **可能重复：**
> [为什么这不能阻止多个函数声明？](https://stackoverflow.com/questions/14425262/why-does-this-not-prevent-multiple-function-declarations)

全球.h

```
#ifndef Global_h
#define Global_h

#include <iostream>

unsigned char exitStatus;

#endif 
```

输出处理程序.h

```
#ifndef OutputHandler_h
#define OutputHandler_h

#include "Global.h"

class OutputHandler {
private:
    static bool instanceExists;
// more code  

#endif 
```

根目录

```
#ifndef Root_h
#define Root_h

// declarations

OutputHandler *output;

#endif 
```

根.cpp

```
#include "Root.h"
// gets instance of OutputHandler
// more code 
```

我收到有关**exitStatus**、**static bool instanceExists**和**静态类输出**已由**OutputHandler.obj**中的**Root.obj**定义的错误。我认为问题在于将头文件**OutputHandler.h 包含**在**Root.h**和**OutputHandler.cpp**中。任何人都知道如何解决这个问题或如何更好地组织头文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T09:26:31.663

因为包含保护仅在翻译单元级别起作用（对于这种简单的情况，您可以将单个 C 文件视为一个翻译单元）。

这意味着单个 C 文件，如果它包含两次头文件，由于包含保护，将不会第二次处理它。

但是，如果您包含来自两个*不同*C 文件的标头，则它们中的*每*一个都将获得该标头中定义的变量的副本。

然后，当您将它们链接在一起时，您会得到重复项。

解决这个问题的最简单方法是永远不要在标题中定义东西，只声明它们。

因此，在标题（例如`xyzzy.h`）中，您有：

```
extern int xyzzy;  // declare but don't define. 
```

在所有想要使用它的 C 文件中，输入：

```
$include "xyzzy.h" 
```

并且，在*其中一个*C 文件中，还输入：

```
int xyzzy;        // define it here, once. 
```

您可以将声明视为简单的“我声明它存在于某个地方，只是不在这里”，而定义是“我在这里和现在创建它”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T09:26:00.237

`extern usigned char exitStatus`在*一个*实现文件中声明`Global.h`并定义它。

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T09:28:42.827

问题出在链接阶段；在标题中包含警卫对您没有帮助。

*在 C 中，声明*和*定义*是分开的概念。声明是放在标题中的；他们只是声明存在一个特定的变量。变量的*定义*是实际为其分配存储的位置。

例如，在您的 中`Global.h`，您有：

```
#ifndef Global_h
#define Global_h

#include <iostream>

usigned char exitStatus;

#endif 
```

这是*定义*一个名为 的变量`exitStatus`，链接器抱怨，因为任何给定的变量都应该只在程序中的一个地方定义。您需要做的是在标头中*声明*它，然后在源 (*.cpp) 文件中仅在一处*定义它。*例如，您的标头应*声明*exitStatus：

```
extern char exitStatus; 
```

并且只在一个源文件中*定义*它：

```
char exitStatus; 
```

`output`in的情况与`Root.h`您应该在头文件中声明变量的任何其他位置类似。

另见：[http ://www.cprogramming.com/declare_vs_define.html](http://www.cprogramming.com/declare_vs_define.html)*

# html-lists - ul li 标记后未继承样式到跨度文本

> ID：14643119
> 
> 赞同：1
> 
> 时间：2013-02-01T09:23:43.100
> 
> 标签：html-lists, html, inheritance

考虑以下 html 代码。父段落样式应该继承到最后一个文本。但是，段落样式不会继承到最后一个文本。标签引起了一些问题。如果没有标签，最后一个文本将按照段落类中的定义进行样式设置。

```
<body>
<p class="paragraph_class1">
    <span>Start paragraph.</span>
    <ul class="list_class3">
        <li class="paragraph_class1 list_detail_class4">
            <span class="text_class5">List item</span>
        </li>
    </ul>
    <span>End paragraph.</span>
</p></body>

    .paragraph_class1
{
color: #ff0000;
border-top-color: #0000ff;
border-left-color: #0000ff;
border-right-color: #0000ff;
border-bottom-color: #0000ff;
border-top-style: solid;
border-left-style: solid;
border-right-style: solid;
border-bottom-style: solid;
border-top-width: 2px;
border-left-width: 2px;
border-right-width: 2px;
border-bottom-width: 2px;
background-color: #000000;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:41:04.753

为什么不像这样将类添加到 span 标签：

`<span class="paragraph_class1">End paragraph.</span>`

并记住将您的 CSS 包含在样式标签中

通常你不应该在 p-tags 中嵌套 ul-tags

# c++ - 将指针分配给函数 指向函数对象的指针的地址

> ID：14643121
> 
> 赞同：5
> 
> 时间：2013-02-01T09:24:06.963
> 
> 标签：c++, pointers, function-pointers, functor

在 C++ 中可能吗？例如，我有一个指向不带参数的函数的指针，它的返回类型为 void：

```
void (*f)(); 
```

和一个函数对象：

```
class A
{
public:
    void operator()() { cout << "functor\n"; }
}; 
```

是否可以分配给对象`f`的地址`A`？当我打电话`f()`给`A`函子时？

我试过这个但它不起作用：

```
#include <iostream>
using namespace std;

class A
{
public:
    void operator()() { cout << "functorA\n"; }
};

int main()
{
    A ob;
    ob();
    void (*f)();
    f = &ob;
    f();       // Call ob();
    return 0;
} 
```

我明白了`C:\Users\iuliuh\QtTests\functor_test\main.cpp:15: error: C2440: '=' : cannot convert from 'A *' to 'void (__cdecl *)(void)' There is no context in which this conversion is possible`

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T09:35:27.453

您不能按照您指定的方式进行操作，因为：

1.  operator() 必须是非静态函数（标准要求）
2.  指向非静态函数的指针必须有一个隐式参数——指向类实例的指针
3.  您对 f() 的调用并没有说明您的函数被调用的对象 A 的哪个实例

正如 Stephane Rolland 所指出的，使用 C++11 和 std::function 可以解决问题 - 您将在绑定中指定指向对象的指针：

```
std::function<void(void)> f = std::bind(&A::operator(), &ob); 
```

（请参阅[有关](https://stackoverflow.com/questions/7582546/using-generic-stdfunction-objects-with-member-functions-in-one-class)在成员函数上使用 std::function 的问题）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T09:39:35.563

如果你使用 C++11，可以使用[std::function](http://en.cppreference.com/w/cpp/utility/functional/function)

```
#include <functional>

std::function<void()> f;

int main()
{
    A ob;
    ob();

    f = ob;    // f refers to ob
    f();       // Call ob();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T09:28:50.017

是的，使用 C++1/C++0x 功能是可能的，但要实现这一点，您应该使用**std::function**可以寻址两种类型，函数和对象函数。

```
#include <functional>

 class A
{
public:
    void operator()() { }
};

int main()
{
    std::function<void(void)> aFunction;
    A ob;

    aFunction = ob;

// or as another user said
// aFunction = std::bind(&A:operator(), &ob);

    aFunction();

    void (*f)();

    aFunction = f;

    aFunction();

    return 0;
} 
```

如果你坚持使用 C++03，你可以`std::mem_fun`玩`std::ptr_fun`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-01T10:24:57.897

像这样的一些解决方法怎么样：

基本上你希望有一种调用成员函数和函数的通用方式。然后也许你可以创建一个包装器来表示一个指向函数或成员函数的通用指针。假设您有`Base`类，并且希望能够调用`operator()`所有派生类。然后你也有一个`function()`你想要调用的：

```
class Base
{
public:
    virtual void operator()() = 0;
};

class A : public Base
{
public:
    void operator()(){ std::cout << "A()" << std::endl; }
};

void function()
{
    std::cout << "function" << std::endl; 
} 
```

如果您创建一个允许您构造自定义指针 ( `MyFncPtr`) 的包装器：

```
typedef void (Base::*BaseFncPtr)();
typedef void (*FncPtr)();

class MyFncPtr
{
public:
    MyFncPtr(FncPtr f) : fnc(f), baseObj(NULL), baseFnc(NULL) { }
    MyFncPtr(BaseFncPtr fPtr, Base* objPtr) : baseFnc(fPtr), baseObj(objPtr), fnc(NULL)  { }
    void invoke()
    {
        if (baseObj && baseFnc)
            (baseObj->*baseFnc)();
        else if (fnc)
            fnc();
    }

private:
    BaseFncPtr baseFnc;
    Base* baseObj;
    FncPtr fnc;
}; 
```

你可以像这样实现它：

```
A a;
MyFncPtr myPtr(&Base::operator(), &a);
myPtr.invoke();
MyFncPtr myPtr2(function);
myPtr2.invoke(); 
```

输出：

```
A()
function 
```

希望这可以帮助 ：）

# javascript - AppendChild 和 InsertBefore

> ID：14643123
> 
> 赞同：3
> 
> 时间：2013-02-01T09:24:16.170
> 
> 标签：javascript, dom

我对动态创建的层次结构元素有一点问题。
一直在尝试使用`insertBefore`，所以他们改变了位置，但没有运气，不会出现任何错误，但我仍然得到了另一个元素。

我有这个函数，它创建一个名为的类`dice-window-wrapper`并将其添加到`page-content-wrapper`.

```
var outerDiv = createElementWithClass('div', 'dice-window-wrapper'),
innerDiv = createElementWithClass('div', 'dice-menubar-wrapper');
outerDiv.appendChild(innerDiv);
document.getElementById("page-content-wrapper").appendChild(outerDiv); 
```

我得到了`<div class="dice-window-wrapper">...</div>`
这里的打印没问题。

然后我想`<li>`使用这个函数添加一个带有一些标签的无序列表：

```
icon_ul = createElementWithOutClass('ul');
var icon_ul = document.getElementById("page-menu-wrapper").appendChild(icon_ul);

icon_li = createElementWithId('li','icon-dice');
icon_ul.appendChild(icon_li);
document.getElementById("ul"); 
```

印刷品将是`<ul><li id="icon-dice"></li></ul>`

正如我所说的那样，问题`<div class="dice-window-wrapper">...</div>`应该在 string 之下`<ul><li id="icon-dice"></li></ul>`。

但即使我将`icon_ul`功能从更改`appendChild`为`insertBefore`，似乎也没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:30:06.403

试试这个：

```
document.getElementById("page-menu-wrapper").insertBefore(icon_ul, outerDiv); 
```

`insertBefore`需要 2 个参数：要添加的内容和要添加的内容之前。

请参阅[此处的文档](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore)：

```
var insertedElement = parentElement.insertBefore(newElement, referenceElement);
//   ^ returns         ^add to this element:      ^ this new element, ^ before this existing element. 
```

好的，所以这里的问题是，假设：

```
document.getElementById("page-menu-wrapper").insertBefore(icon_ul, outerDiv); 
```

在那里，`outerDiv`is not的父级`"page-menu-wrapper"`。将该行替换为：

```
document.getElementById("page-content-wrapper").insertBefore(icon_ul, outerDiv); 
```

或更换：

```
document.getElementById("page-content-wrapper").appendChild(outerDiv);
// With
document.getElementById("page-menu-wrapper").appendChild(outerDiv); 
```

# php - ZF2 Di 更新到 2.1.0 后出现致命错误

> ID：14643125
> 
> 赞同：-1
> 
> 时间：2013-02-01T09:24:17.740
> 
> 标签：php, dependency-injection, zend-framework2

将我的 ZF2 库更新到最新版本后，我的应用程序抛出了致命错误。在上一个。1.0.6 版一切正常。我正在寻找错误的来源，但我找不到它，我不知道。Module.Config 中的 DI 注入阵列可能有问题。希望有人知道这里发生了什么:)

当我在模块配置中删除我的孔 DI 设置时......我的应用程序将无法工作，因为 DI 不工作但致命错误消失了。：/

致命错误：

> 致命错误：在 ...\Zend\Di\Di.php 中未捕获的异常 'Zend\Di\Exception\MissingPropertyException' 带有消息 'Missing instance/object for parameter route for Zend\Mvc\Router\Http\Segment::__construct' :699

我的 DI 模块配置：

```
 'di'                 => array(
        'definition' => array(
           'class' => array(
                'Application\View\Helper\LastActions'               => array(
                    'setBenutzerMapper' => array(
                        'required' => true
                    ),
                 ),
                 [...]
           )
         )
     ), 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:43:22.330

在 github 上有一个问题，我今天早上遇到了同样的问题： [https ://github.com/zendframework/zf2/issues/3625](https://github.com/zendframework/zf2/issues/3625)

在补丁发布之前，快速修复是将您的路由器配置从使用像“Zend\Mvc\Router\Http\Segment”这样的长名称更改为“Segment”，如下所示：

```
'router' => array(
    'routes' => array(
        'restful' => array(
            'type' => 'Segment',
            ... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-06T07:43:26.300

我也遇到了同样的问题。[我使用来自https://github.com/Domi-cc/SmartyModule](https://github.com/Domi-cc/SmartyModule)的SmartyModule 。它在 module.config.php 上使用“di”，但我没有看到带有长名称的路由器配置

```
'di' => array(
    'instance' => array(
        'alias' => array(
            // entity manager
            'smarty_engine' => 'Smarty',
        ),

        'SmartyModule\View\Renderer\SmartyStrategy' => array(
            'parameters' => array(
                'smarty' => 'SmartyModule\View\Renderer\SmartyRenderer',
            ),
        ),
. . . 
```

# c++ - 使用 boost::thread 将 c++ 对象从一个线程传递到另一个线程的正确方法是什么？

> ID：14643126
> 
> 赞同：3
> 
> 时间：2013-02-01T09:24:19.737
> 
> 标签：c++, multithreading, thread-safety

将 C++ 对象（映射、向量等）从一个线程传递到另一个线程的正确方法是什么？我担心竞争条件、过时的值等。我正在使用增强线程。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:29:30.283

这完全取决于这个对象“做什么”。如果它是自包含的，即不包含指向可能在原始线程中使用的其他对象的指针/引用 - 似乎没有问题。如果 OTOH 它**确实**包含对某些仍可能在原始线程中使用的数据的引用 - 它的访问应该是同步的。

当然，应该避免按值传递复杂对象。

# python - 调用 PyMOL 向导

> ID：14643132
> 
> 赞同：0
> 
> 时间：2013-02-01T09:24:56.757
> 
> 标签：python, wxpython, pymol

我想在我的 python 脚本中从 PyMOL 菜单中调用其中一个向导。我的脚本是使用 wx 库的 python 代码。有谁知道是否可以这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T14:54:18.490

因此，根据您想要使用的向导，您最好简单地调用底层命令。

例如，如果您想使用距离向导，您最好直接调用该`distance`命令。见： http: [//www.pymolwiki.org/index.php/Distance](http://www.pymolwiki.org/index.php/Distance)

另一方面，要尝试直接使用向导，您可以调用 `pymol.cmd.wizard("annotation")`

其中 'annotation' 是您想要的向导的名称。有关详细信息，请参阅[http://www.pymolwiki.org/index.php/Annotation_wizard](http://www.pymolwiki.org/index.php/Annotation_wizard)

# iphone - ios 5故事板上的恢复标识符

> ID：14643134
> 
> 赞同：0
> 
> 时间：2013-02-01T09:24:58.507
> 
> 标签：iphone, ios, storyboard, identifier

我正在制作国家保存和恢复的示例应用程序。我已经阅读并在 ios 6 上做了一个演示。在 ios 6 中，我可以在身份检查器中为特定的 viewController 在情节提要上设置恢复标识符。

下图是ios6

![在此处输入图像描述](../Images/38af8207efe8e23c8d18fef2c5865320.png)

但是在 ios 5 中没有这样的工具可用。这意味着 viewController 的身份检查器中没有恢复标识符字段。然后现在我如何在 ios5 的情节提要上设置恢复标识符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:45:35.587

内置状态保存和恢复仅在 ios6 中可用。此功能在 ios5 中不可用。这就是为什么在 ios5 上没有任何可用的恢复标识符的原因。

# reporting-services - 使用 Active Directory 进行 SQL Reporting Services 权限管理

> ID：14643137
> 
> 赞同：0
> 
> 时间：2013-02-01T09:25:23.240
> 
> 标签：reporting-services

是否可以使用 Active Directory 管理报告权限？例如，我有一份员工绩效报告。员工可以通过从下拉参数中选择他/她的姓名来打开报告。此参数下拉列表列出所有员工姓名。但是，大多数员工必须在该下拉列表中看到他们的姓名。必须禁止看到其他员工的姓名。此外，部门负责人必须在该下拉列表中查看所有员工列表。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:36:51.237

最好的方法是使用内置的 User!UserID 字段，该字段返回运行报告的人员的凭据。如果您的用户使用他们的 Windows 域凭据访问 SSRS，则 User!UserID 将返回为类似于 DOMAIN\userid 的字符串。只要您在数据库中的某个位置可以将用户的 Windows 登录名链接到他们的姓名，那么您就可以使用它来限制返回参数下拉列表的数据集（作为 SQL 参数或作为 SSRS 数据集过滤器）。

# sql-server - 使用 DQS 清理数据时出现“值已作为更正值存在”错误

> ID：14643145
> 
> 赞同：1
> 
> 时间：2013-02-01T09:25:45.427
> 
> 标签：sql-server, data-quality-services

在 SQL Server 2012 Data Quality Services 中，我需要清理 Term Based Relation 中的数据，如下所示：

> **字符串替换****
> 
> 沃尔玛**
> 
> 沃尔玛沃尔玛**
> 
> 沃尔玛**
> 
> 沃尔玛

即“wal”、“wlr”和“wlt”必须替换为“walmart”，最后“walmart”替换为空白。

它显示错误为

```
SQL Server Data Quality Services
--------------------------------------------------------------------------------
2/1/2013 2:48:37 PM
Message Id: DataValueServiceTermBasedRelationCorrectedValueAlreadyCorrectingValue
Term Based Relation (walmart, ) cannot be added for domain 'keywordphrase' because 'walmart' value already exists as a correcting value.
--------------------------------------------------------------------------------
Microsoft.Ssdqs.DataValueService.Service.DataValueServiceException: Term Based Relation (walmart, ) cannot be added for domain 'keywordphrase' because 'walmart' value already exists as a correcting value.
   at Microsoft.Ssdqs.DataValueService.Managers.DomainTermBasedRelationManager.PreapareAndValidateRelation(DomainTermBasedRelation relation, IMasterContext context)
   at Microsoft.Ssdqs.DataValueService.Managers.DomainTermBasedRelationManager.Add(IMasterContext context, ServiceDefinitionBase data)
   at Microsoft.Ssdqs.DataValueService.Service.DataValueServiceConcrete.Add(IMasterContext context, ReadOnlyCollection`1 data) 
```

对解决方案的任何建议谢谢，

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-08-10T15:40:32.710

据我了解，DQS 不支持多级替换（即 a->b 然后 b->c）。为什么不直接在前三个学期做空呢？

# c# - 多个属性的快速内存搜索

> ID：14643146
> 
> 赞同：1
> 
> 时间：2013-02-01T09:25:50.237
> 
> 标签：c#, search, data-structures

我有一个内存对象列表（大约 50000-100 万个），它有 6-7 个属性（属性）。

要求是用多个属性过滤这个内存列表。线性搜索允许我对列表进行 O(N) 搜索。有没有比通用列表更快的方法来使用更好的数据结构？

我正在使用 C#.NET 4.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-13T17:35:01.363

您可以使用名为 IndexedList 的帮助程序库，您可以从[http://indexedlist.codeplex.com/](http://indexedlist.codeplex.com/)下载它。 使用此库，您可以在对象的任何字段上添加索引，然后在列表中执行快速搜索。默认索引实现使用 Dictionary 来存储索引数据，您也可以更改它。我为我自己的项目创建了这个库，然后我将它作为一个新的开源项目发布。我很高兴听到您对这个库的反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:27:39.023

就在几秒钟前，我读到了这个：[http ://blog.bodurov.com/Performance-SortedList-SortedDictionary-Dictionary-Hashtable/](http://blog.bodurov.com/Performance-SortedList-SortedDictionary-Dictionary-Hashtable/)

似乎随着搜索的进行，这`SortedDictionary`可能是您最好的选择，但是由于您想按多个属性进行搜索，所以如果您想在搜索和插入大量数据之间取得良好的平衡，那么可能`SortedList`会以内存使用为代价产生更好的结果.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:47:26.603

我能建议的最好的：

1.  为每个必需的属性制作字典（单独的字典）
2.  搜索时，分别逐一查找所需的每个字典并选择最小大小的列表
3.  迭代最小尺寸列表

如果属性值没有大量重复，这种方法将非常有用。但是，如果每个属性都有很多重复项，那么这种方法将非常糟糕。

**可能的改进**：每个列表进入字典可能的排序，并在使用它后按属性之一进行二进制搜索。

# asp.net - 在 SDL Tridion 2011 中上传 JSON 文件作为多媒体组件

> ID：14643149
> 
> 赞同：4
> 
> 时间：2013-02-01T09:26:05.180
> 
> 标签：asp.net, json, iis-7, mime-types, tridion

我正在尝试在 Tridion 中上传 JSON 文件并发布它们。我使用 MIME 类型为 JSON 文件创建了一个新的多媒体类型：application/json

然后我将文件作为多媒体组件上传并发布。我可以看到在交付服务器上创建的文件，但是当我尝试从 URL 读取文件时，它显示未找到文件。

我在带有 IIS 7.5 的 Delivery Server 上使用 ASP.NET 应用程序

我需要做一些其他的配置吗？请帮忙。

感谢和问候

沙拉德·库马尔·桑加尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T12:26:07.313

您需要将文件扩展名和 mime 类型添加到 IIS。如果您需要帮助，请查看此链接：

[http://www.iis.net/configreference/system.webserver/staticcontent/mimemap](http://www.iis.net/configreference/system.webserver/staticcontent/mimemap)

您需要的实际值可能`.json`是文件扩展名和 `application/json`MIME 类型。

# php - 2个用户之间的Paypal退款

> ID：14643151
> 
> 赞同：6
> 
> 时间：2013-02-01T09:26:08.263
> 
> 标签：php, paypal, paypal-ipn

目前，我有允许 user1 向 user2 付款的 PHP 代码。如果用户 2 登录到他/她的贝宝帐户，她/他将`refund`在 60 天的交易旁边看到一个按钮。

如果 user2 单击该`refund`按钮，我的 PHP 代码是否可以捕获和/或接收有关此退款事件的详细信息，即使所有这些都是直接从贝宝网站发生的？

我猜这是不可能的，但是我发布这个问题时认为我可能是错的，因为我不知道贝宝的 api 就像我的手背一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:29:47.740

将您的 IPN 侦听器的位置添加到您的帐户设置中。这样，所有通知都将发送到您的侦听器，无论它是否从您的代码启动。在 paypal.com，在您的 PayPal Business 或 Premier 帐户的配置文件 > 我的销售工具部分中指定您的 IPN 侦听器的通知 URL。

[https://www.x.com/developers/paypal/documentation-tools/ipn/ht_ipn](https://www.x.com/developers/paypal/documentation-tools/ipn/ht_ipn) [https://cms.paypal.com/cms_content/ES/es_ES/files/developer/IPNGuide.pdf](https://cms.paypal.com/cms_content/ES/es_ES/files/developer/IPNGuide.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:50:05.397

您应该能够通过在您的网站上为 paypal IPN 设置监听器来实现此目的。

[https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNReference](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNReference)

# c# - 使用资源字典作为所有图像的中心集合

> ID：14643153
> 
> 赞同：0
> 
> 时间：2013-02-01T09:26:22.303
> 
> 标签：c#, wpf, xaml, resources, resourcedictionary

我有一个包含很多程序集（> 100）的项目。其中许多程序集都有像“图像”这样的子文件夹。例如，许多 wpf-windows/user-controls 都有一个“\images\close.png”。这意味着我有许多“close.png”图片，而不仅仅是一张。

现在我想为所有图像/资源创建一个中心位置。我做了什么：

*   创建了一个名为“abcdeCore.Resources”的新类库/程序集
*   添加了一个名为“ImageDictionary.xaml”的资源字典
*   创建了一个子文件夹“图像”
*   将我的图像复制到此子文件夹。例如“abcdeCore.Resources\images\close.png”
*   将图像的内置属性设置为“资源”
*   像这样在“ImageDictionary.xaml”中声明图像“<ImageSource x:Key="Image_close">close.png</ImageSource>”
*   在我想像这样使用“close.png”图像的wpf窗口中使用字典

    <Window.Resources> <ResourceDictionary Source="pack://application:,,,/abcdeCore.Resources;component/Images/ImageDictionary.xaml"/></Window.Resources>

*   尝试像这样使用在中央资源字典“ImageDictionary.xaml”中声明的图像 <Button><Image Source="{StaticResource Image_close}"></Image></Button>

在 VS 的设计器模式下，图像正在显示，但是当我启动项目并打开我的 wpf 窗口时，我收到一个错误，例如

"{"找不到文件或程序集 \"abcdeCore.Resources, Culture=neutral\" 或其依赖项之一。系统找不到给定的文件。":"abcdceResources, Culture=neutral"} （我将错误消息从德语翻译成英语:)）

有谁知道我做错了什么以及为什么我不能让中央资源字典正常工作？感谢您的任何想法！！！

来自德国的问候

编辑：我的 wpf 窗口所在的程序集中也有对“abcdeCore.Resources”的引用

编辑 2： System.Windows.Markup.XamlParseException: Message=RowNumber "7" and RowPosition "10" of "Setting the Property "System.Windows.ResourceDictionary.Source" 导致异常"。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:00:19.230

[好的，我的第一个](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx#maxpath)想法是，由于`WinApi`. 我不确定，因为我对资源加载机制的内部一无所知。

请尝试从较短的路径启动程序。也许，它会解决问题。

**编辑**

只是一个想法，您是否被`ImageDictionary.xaml`声明为资源？如果没有，您应该将其构建步骤设置为“资源”。

**编辑2**

下一个想法。请`ImageDictionary.xaml`通过注释掉元素来清空。逐个元素地取消注释字典。也许，您会通过这种方式找到问题的原因。

# sql - 表内对象内的 Oracle 对象

> ID：14643154
> 
> 赞同：0
> 
> 时间：2013-02-01T09:26:22.587
> 
> 标签：sql, oracle, object, plsql

我对 oracle 对象有疑问。我正在写一个函数。其中有选择：

```
CURSOR cResultValues (p_vrc_mnemo VARCHAR2,
                      p_pdt_mnemo VARCHAR2,
                      p_table t_crt_list_prdt_conf_tab) IS
SELECT pdt_grp_mnemo,
       pdt_mnemo,
       pdt_variant,
  FROM TABLE(p_table)
 WHERE pdt_mnemo = p_pdt_mnemo AND
       pdt_variant = p_vrc_mnemo; 
```

并制作更清晰的全局类型：

```
CREATE OR REPLACE TYPE t_pdt_config_rec IS OBJECT( 
  pdt_grp_mnemo                VARCHAR2(30),
  pdt_mnemo                    VARCHAR2(30),
  pdt_variant                  VARCHAR2(30), 
/
CREATE OR REPLACE TYPE t_pdt_config_tab IS TABLE OF t_pdt_config_rec
/
-------------------------------------------------------------------------------------
CREATE OR REPLACE TYPE t_list_conf_rec IS OBJECT(
  pdt_conf   t_pdt_config_rec,  -- product info
  pdt_childs t_pdt_config_tab)  -- products compinations
/
CREATE OR REPLACE TYPE t_list_conf_tab IS TABLE OF t_list_conf_rec
/ 
```

等等。更改之前只有 t_pdt_config_tab，我没有问题。

我怎样才能获得 pdt_conf 对象内的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:23:20.693

目前尚不清楚您的问题是什么。我只能*猜测*您将过程参数的类型从`t_pdt_config_rec`更改为更复杂的对象类型`t_list_conf_rec`，现在您无法访问其中的值。

让我们构建一个类似的示例：

```
SQL> CREATE OR REPLACE TYPE t_pdt_config_rec IS OBJECT(
  2    pdt_mnemo                    VARCHAR2(30),
  3    pdt_variant                  VARCHAR2(30))
  4  /

Type created

SQL> CREATE OR REPLACE TYPE t_pdt_config_tab IS TABLE OF t_pdt_config_rec
  2  /

Type created

SQL> CREATE OR REPLACE TYPE t_list_conf_rec IS OBJECT(
  2    pdt_conf   t_pdt_config_rec,  -- product configuration and info
  3    pdt_childs t_pdt_config_tab)   -- similar or same products cobinations
  4  /

Type created

SQL> CREATE OR REPLACE TYPE t_list_conf_tab IS TABLE OF t_list_conf_rec
  2  /

Type created 
```

在 PL/SQL 中访问子对象与 java 没有什么不同：

```
SQL> SET SERVEROUTPUT ON
SQL> DECLARE
  2     l_conf_1     t_pdt_config_rec := t_pdt_config_rec('conf 1','A');
  3     l_conf_2     t_pdt_config_rec := t_pdt_config_rec('conf 2','B');
  4     l_child_1    t_pdt_config_rec := t_pdt_config_rec('conf 1 old', 'AA');
  5     l_child_2    t_pdt_config_rec := t_pdt_config_rec('conf 1 old old','AB');
  6     l_children_1 t_pdt_config_tab := t_pdt_config_tab(l_child_1, l_child_2);
  7     l_children_2 t_pdt_config_tab := t_pdt_config_tab();
  8     l_obj_1      t_list_conf_rec  := t_list_conf_rec(l_conf_1, l_children_1);
  9     l_obj_2      t_list_conf_rec  := t_list_conf_rec(l_conf_2, l_children_2);
 10     l_tab        t_list_conf_tab  := t_list_conf_tab(l_obj_1, l_obj_2);
 11  BEGIN
 12     FOR cc IN (SELECT o.pdt_conf.pdt_mnemo    pdt_mnemo, 
 13                       o.pdt_conf.pdt_variant pdt_variant 
 14                  FROM TABLE(l_tab) o
 15                 WHERE o.pdt_conf.pdt_mnemo = 'conf 1'
 16                   AND o.pdt_conf.pdt_variant = 'A') LOOP
 17        dbms_output.put_line('record found');
 18     END LOOP;
 19  END;
 20  /

record found

PL/SQL procedure successfully completed 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:24:00.447

> 更改之前只有 t_pdt_config_tab，我没有问题。

当然。

您现在有一个 NESTED 数组。所以你的外部`TABLE(p_table)`将选择行`t_crt_list_prdt_conf_tab`（不管是什么，你的意思是输入`t_list_conf_tab`？？）。

假设您的意思是`t_list_conf_tab`而不是`t_crt_list_prdt_conf_tab`。如果`t_crt_list_prdt_conf_tab`是包含 的类型`t_list_conf_tab`，那么您将需要另一个级别：

```
select list_conf.id list_conf_id, 
       list_conf.pdt_conf.pdt_grp_mnemo,
       list_conf.pdt_conf.pdt_mnemo,
       list_conf.pdt_conf.pdt_name,
       list_conf.pdt_conf.pdt_variant,
       list_conf.pdt_conf.det_info_xsr_id ,
       list_conf.pdt_conf.det_info_view_template_name ,
       list_conf.pdt_conf.det_info_download_xsl_id,
       list_conf.pdt_conf.det_info_ctrl_url,
       list_conf.pdt_conf.det_info_ctrl_action,
       list_conf.pdt_conf.create_ctrl_url,
       list_conf.pdt_conf.create_ctrl_action,
       list_conf.pdt_conf.change_contract_name_enabled,
       list_conf.pdt_conf.period_selector,
       list_conf.pdt_conf.period_selector_hide_all_opt,
       pdt_child.pdt_grp_mnemo,
       pdt_child.pdt_mnemo,
       pdt_child.pdt_name,
       pdt_child.pdt_variant,
       pdt_child.det_info_xsr_id,
       pdt_child.det_info_view_template_name,
       pdt_child.det_info_download_xsl_id,
       pdt_child.det_info_ctrl_url,
       pdt_child.det_info_ctrl_action,
       pdt_child.create_ctrl_url,
       pdt_child.create_ctrl_action,
       pdt_child.change_contract_name_enabled,
       pdt_child.period_selector,
       pdt_child.period_selector_hide_all_opt,
       pdt_child.downloads
  from (SELECT rownum id,
               pdt_conf,
               pdt_childs
          FROM TABLE(p_table)) list_conf,
       table(list_conf.pdt_childs) pdt_child; 
```

sql 小提琴示例：[http ://sqlfiddle.com/#!4/2eee6/1](http://sqlfiddle.com/#!4/2eee6/1)

# razor - 如何使用 MVC 3.0 Razor 视图？

> ID：14643157
> 
> 赞同：1
> 
> 时间：2013-02-01T09:26:57.387
> 
> 标签：razor

## 演示.chtml

```
 @if (Model.IsPersonal)
        {   
            @Html.TextBoxFor(model => model.FirstName, new { style = "width:70px;height:10px;" })
        }
        else
        {
            @Html.DisplayFor(model => model.FirstName)
            &nbsp;
            @Html.DisplayFor(model => model.LastName)
        } 
```

* * *

我在 MVC 3.0 razor 视图引擎空间中使用了上面的代码名字和姓氏但是 &nbps 不起作用请帮帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:33:35.453

解决它的一种方法：

```
<text>&nbsp;</text> 
```

即使您在代码块中，这也会告诉 Razor 引擎将其视为文字的、未处理的内容。

您还可以使用语法`@: &nbsp;`

另见：[http ://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx](http://weblogs.asp.net/scottgu/archive/2010/12/15/asp-net-mvc-3-razor-s-and-lt-text-gt-syntax.aspx)

您是否应该在此处实际使用不间断空格是一个[不同的问题](https://stackoverflow.com/questions/1357078/whats-the-difference-between-nbsp-and)。

# c# - 面板c#中的奇怪白色区域

> ID：14643161
> 
> 赞同：2
> 
> 时间：2013-02-01T09:27:01.967
> 
> 标签：c#, image, gdi, picturebox

我的面板和奇怪的区域有问题。我用许多 es 32x32px 填充我的面板`PictureBox`，并且这个面板的一小块区域被白色区域填充。

这是它的样子：

![在此处输入图像描述](../Images/b3b0a6426738f7e2aaa57ac753ad5949.png)

可以看到第一个`PictureBox`指定了草地图片，即32x32px，但是下面的PictureBox只有一半的图片。这很奇怪。

我还`onClick`为 es 指定了一个事件，`PictureBox`以将其背景更改为其他图像。如果我点击“工作” `PictureBox`，它的背景会发生变化，但是当我点击“损坏”时，它不会。

所以基本上，我的问题是 - 造成这种影响的原因是什么？是否可以在不分析代码的情况下找到它？我想避免在这里放代码，因为它非常复杂且冗长。

# 编辑

我使用了 WinSpy++，它是结果（红点是我悬停光标的地方）所以我们可以看到它`PictureBox`部分隐藏在这个白色区域后面。

![在此处输入图像描述](../Images/38fefc376ba26fcdf980c2750736806e.png)![在此处输入图像描述](../Images/d6d25df56471c0cddd576b51edd0b9bc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T23:19:05.510

我不知道这个问题是否仍然有效，但无论如何我都会尝试回复。更多的是对它的评论，但由于我不允许发表评论，所以我只会回答。

在使用事件处理程序实现某些`picutreBox`绘图时，我遇到了类似的问题。`onPaint`问题是我`pictureBox.Invalidate()`在此期间打电话`onPaint`，导致显示不需要的白色框。如果有，您可能希望避免使用`Invalidate()`or`Refresh()`在您的`onPaint`事件中。

如果不是这种情况，它也可能有助于刷新已损坏的`form`或`pictureBox`es。初始化`this.Refresh()`后尝试调用，最好在事件处理程序中调用。`form``onLoad``onShown`

如果它仍然没有帮助，那么问题出在其他地方，我猜想有一个隐藏在某处的控件会导致这种情况。但是我们需要查看一些代码才能提出任何其他建议。

# android - 如何在 ScrollView 中将 RelativeLayout 居中

> ID：14643170
> 
> 赞同：1
> 
> 时间：2013-02-01T09:27:34.040
> 
> 标签：android, android-layout

我想将`RelativeLayout`包含`TextViews`在 a 中的 a居中，`ScrollView`但是当我更改为横向模式甚至是带有小屏幕的纵向模式时，按钮会`RelativeLayout`被剪切...您有什么想法可以将其居中而不被剪切吗？

这是我的代码：

```
 <ScrollView
    style="@style/scroll"
    android:background="@drawable/first_body_shape" >

    <RelativeLayout style="@style/relativeLay"
        android:layout_gravity="center_vertical" >

        <TextView
            android:id="@+id/rg2"
            style="@style/verset"
            android:layout_below="@+id/rg1"
            android:text="@string/rg_2" />

        <TextView
            android:id="@+id/rg3"
            style="@style/textView_intro"
            android:layout_below="@+id/rg2"
            android:text="@string/rg_2_1" />

        <TextView
            android:id="@+id/rg4"
            style="@style/verset"
            android:layout_below="@+id/rg3"
            android:text="@string/rg_3" />

        <TextView
            android:id="@+id/rg5"
            style="@style/textView_intro"
            android:layout_below="@+id/rg4"
            android:text="@string/rg_3_1" />

        <TextView
            android:id="@+id/rg6"
            style="@style/verset"
            android:layout_below="@+id/rg5"
            android:text="@string/rg_4" />

        <TextView
            android:id="@+id/rg7"
            style="@style/textView_intro"
            android:layout_below="@+id/rg6"
            android:text="@string/rg_4_1" />

        <TextView
            android:id="@+id/rg8"
            style="@style/textView_intro"
            android:layout_below="@+id/rg7"
            android:text="@string/rg_5" />

        <TextView
            android:id="@+id/rg1"
            style="@style/textView_intro"
            android:layout_alignParentTop="true"
            android:layout_centerHorizontal="true"
            android:text="@string/rg_1" />
    </RelativeLayout>
</ScrollView> 
```

样式.xml

```
 <style name="scroll">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">fill_parent</item>
    <item name="android:layout_marginBottom">10sp</item>
    <item name="android:layout_marginLeft">10sp</item>
    <item name="android:layout_marginRight">10sp</item>
    <item name="android:layout_marginTop">50sp</item>
    </style>

     <style name="relativeLay">
    <item name="android:layout_width">fill_parent</item>
    <item name="android:layout_height">wrap_content</item>
</style>

 <style name="verset">
    <item name="android:layout_width">370sp</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_centerHorizontal">true</item>
    <item name="android:paddingTop">10sp</item>
    <item name="android:textSize">18sp</item>
    <item name="android:textStyle">bold</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T12:59:20.960

我不确定是否理解您的问题（我在您的代码中看不到任何按钮：o）。但是看看这个教程：

[http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/](http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/)

# c# - 更改 GroupBox 组件中的边框

> ID：14643174
> 
> 赞同：5
> 
> 时间：2013-02-01T09:27:46.397
> 
> 标签：c#, .net

> **可能重复：**
> [如何在 C# 中更改 Windows 窗体上 Groupbox 的边框厚度？](https://stackoverflow.com/questions/10997977/how-can-i-change-the-border-thickness-of-a-groupbox-on-a-windows-form-in-c)

伙计们

我在 Visual Studio 中使用 groupbox'。但是组框中的边框太小了。我想知道是否有办法通过给它一个颜色或者一个更厚的边缘来编辑边框？

![在此处输入图像描述](../Images/b58a174bd88f6be31a1c0f62419a9106.png)

正如您在图像中看到的那样，很难看到它周围的边界。

谁能帮我这个 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T09:52:33.410

你可以使用这个：

```
using System.Drawing; 
```

使用 System.Drawing.Drawing2D；

```
 private void Form1_Load(object sender, EventArgs e)
    {
        myGroupBox myGroupBox = new myGroupBox();
        myGroupBox.Text = "GroupBox1";

        this.Controls.Add(myGroupBox);

    }

    public static GraphicsPath CreatePath(float x, float y, float width, float height,
                                  float radius, bool RoundTopLeft, bool RoundTopRight, bool RoundBottomRight, bool RoundBottomLeft)
    {
        float xw = x + width;
        float yh = y + height;
        float xwr = xw - radius;
        float yhr = yh - radius;
        float xr = x + radius;
        float yr = y + radius;
        float r2 = radius * 2;
        float xwr2 = xw - r2;
        float yhr2 = yh - r2;

        GraphicsPath p = new GraphicsPath();
        p.StartFigure();

        //Top Left Corner

        if (RoundTopLeft)
        {
            p.AddArc(x, y, r2, r2, 180, 90);
        }
        else
        {
            p.AddLine(x, yr, x, y);
            p.AddLine(x, y, xr, y);

        }

        //Top Edge
        p.AddLine(xr, y, xwr, y);

        //Top Right Corner

        if (RoundTopRight)
        {
            p.AddArc(xwr2, y, r2, r2, 270, 90);
        }
        else
        {
            p.AddLine(xwr, y, xw, y);
            p.AddLine(xw, y, xw, yr);
        }

        //Right Edge
        p.AddLine(xw, yr, xw, yhr);

        //Bottom Right Corner

        if (RoundBottomRight)
        {
            p.AddArc(xwr2, yhr2, r2, r2, 0, 90);
        }
        else
        {
            p.AddLine(xw, yhr, xw, yh);
            p.AddLine(xw, yh, xwr, yh);
        }

        //Bottom Edge
        p.AddLine(xwr, yh, xr, yh);

        //Bottom Left Corner           

        if (RoundBottomLeft)
        {
            p.AddArc(x, yhr2, r2, r2, 90, 90);
        }
        else
        {
            p.AddLine(xr, yh, x, yh);
            p.AddLine(x, yh, x, yhr);
        }

        //Left Edge
        p.AddLine(x, yhr, x, yr);

        p.CloseFigure();
        return p;
    }

    class myGroupBox : GroupBox
    {
        public myGroupBox()
        {
            base.BackColor = Color.Transparent;

        }
        [Browsable(false)]
        public override Color BackColor
        {
            get
            {
                return base.BackColor;
            }
            set
            {
                base.BackColor = value;
            }
        }

        private Color backColor = Color.Transparent;

        public Color ActualBackColor
        {
            get { return this.backColor; }

            set { this.backColor = value; }
        }

        protected override void OnPaint(PaintEventArgs e)
        {

            Size tSize = TextRenderer.MeasureText(this.Text, this.Font);

            Rectangle borderRect = e.ClipRectangle;

            borderRect.Y += tSize.Height / 2;

            borderRect.Height -= tSize.Height / 2;

            GraphicsPath gPath = CreatePath(0, borderRect.Y, (float)(this.Width - 1), borderRect.Height - 1, 5, true, true, true, true);

            e.Graphics.FillPath(new SolidBrush(ActualBackColor), gPath);

            e.Graphics.DrawPath(new Pen(Color.Red), gPath);

            borderRect.X += 6;
            borderRect.Y -= 7;

            e.Graphics.DrawString(this.Text, this.Font, new SolidBrush(this.ForeColor), borderRect);
        }
    } 
```

# android - android在读取epub文件时内存不足

> ID：14643176
> 
> 赞同：-1
> 
> 时间：2013-02-01T09:27:57.723
> 
> 标签：android, exception, epub

在我的应用程序**`epub`**中，当大尺寸 epub 正在读取文件时，我正在读取文件，任何人都可以帮助我解决这个问题：

**错误：**

```
02-01 09:25:06.814: E/AndroidRuntime(26698): FATAL EXCEPTION: Background
02-01 09:25:06.814: E/AndroidRuntime(26698): java.lang.OutOfMemoryError
02-01 09:25:06.814: E/AndroidRuntime(26698):    at java.io.ByteArrayOutputStream.expand(ByteArrayOutputStream.java:93)
02-01 09:25:06.814: E/AndroidRuntime(26698):    at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:218)
02-01 09:25:06.814: E/AndroidRuntime(26698):    at nl.siegmann.epublib.util.IOUtil.copy(IOUtil.java:79)
02-01 09:25:06.814: E/AndroidRuntime(26698):    at nl.siegmann.epublib.util.IOUtil.toByteArray(IOUtil.java:43)
02-01 09:25:06.814: E/AndroidRuntime(26698):    at nl.siegmann.epublib.domain.Resource.<init>(Resource.java:114)
02-01 09:25:06.814: E/AndroidRuntime(26698):    at nl.siegmann.epublib.util.ResourceUtil.createResource(ResourceUtil.java:64)
02-01 09:25:06.814: E/AndroidRuntime(26698):    at nl.siegmann.epublib.epub.EpubReader.readResources(EpubReader.java:188)
02-01 09:25:06.814: E/AndroidRuntime(26698):    at nl.siegmann.epublib.epub.EpubReader.readEpub(EpubReader.java:94)
02-01 09:25:06.814: E/AndroidRuntime(26698):    at nl.siegmann.epublib.epub.EpubReader.readEpub(EpubReader.java:53)
02-01 09:25:06.814: E/AndroidRuntime(26698):    at nl.siegmann.epublib.epub.EpubReader.readEpub(EpubReader.java:37)
02-01 09:25:06.814: E/AndroidRuntime(26698):    at com.fastreader.TextReader.StringSpilitFunction(TextReader.java:362)
02-01 09:25:06.814: E/AndroidRuntime(26698):    at com.fastreader.TextReader$4$1$1.run(TextReader.java:126)
02-01 09:25:06.814: E/AndroidRuntime(26698):    at java.lang.Thread.run(Thread.java:1096) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-26T20:15:38.333

您似乎一次加载整个文件，这可能超过了您的应用程序内存限制。

尝试将文件的块加载到数组或类似的东西中，然后处理不需要的块。您肯定不需要一次使用整个文件，因为您无法将其全部显示在屏幕上。另一方面，一次加载一个页面对于大多数合理的目的（例如，在屏幕上显示它）应该足够了。

即使您从事更奇特的事情，例如语言分析，您也可以加载更小的文件块并一次分析它们。

您使用的 epub 库必须能够为您提供比整个文件更易于管理的内容。为了这个确切的目的，有这种`readEpubLazy`方法。

# html - 在运行时更改文本框边框样式

> ID：14643178
> 
> 赞同：0
> 
> 时间：2013-02-01T09:28:00.857
> 
> 标签：html, textbox, styles, border

在运行时更改文本框边框样式：

我试过这段代码

```
 <script type="text/javascript">
    function validate()
    {
       alert("hello");
       document.getElementById("emailid").border.style="1px solid green";
       document.getElementById('emailid').border.style="1px solid green";
    }
    <script>

    <td>Email:</td><td> <input type="text" name="emailid" id="emailid" value="" onblur="validate();"  maxlength=125 /><br></td> 
```

它向我显示了警报框，但文本框的边框并没有改变对工作测试代码的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:31:24.383

做这个

```
document.getElementById("emailid").style.border = "1px solid green";
document.getElementById("emailid").style.border = "1px solid green"; 
```

代替

```
document.getElementById("emailid").border.style = "1px solid green";
document.getElementById("emailid").border.style = "1px solid green"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:39:01.630

您的结束脚本标签`<script>`不是`</script>`- 这可能会影响事情。此外，我强烈建议您获取 JQuery 或其他一些库，因为使用它们可以消除任何跨浏览器的不一致（并使您必须编写的代码更短）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:40:20.760

```
please try this code

<script type="text/javascript">
function validate()
{
    alert("hello");
   document.getElementById('emailid').style.border="1px solid green";
}
</script> 
```

# mercurial - 将书签转换为 mercurial 的 mercurial 回购 - 没有书签？

> ID：14643179
> 
> 赞同：1
> 
> 时间：2013-02-01T09:28:06.653
> 
> 标签：mercurial, split, bookmarks

我有一个 mercurial 存储库，我需要将其拆分为多个部分。我把[`convert`它改成了 mercurial](http://mercurial.selenic.com/wiki/ConvertExtension#Converting_to_Mercurial)，一切都很好，但是新的存储库没有旧存储库的书签。

请问这个怎么解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:29:09.060

`hg`将您的书签存储在文件`.hg`夹中的两个文件中，即`bookmarks`和 `bookmarks.current`。

由于书签是使用变更集 id 哈希（在存储库之间保持相同）引用的，因此只需将两个文件复制到新版存储库中的`.hg`文件夹`convert`即可正确设置它们。

# cocoa - NSTextField 宽度和自动布局

> ID：14643180
> 
> 赞同：10
> 
> 时间：2013-02-01T09:28:07.200
> 
> 标签：cocoa, nstextfield, nstextview, autolayout

我正在尝试以`NSTextField`编程方式创建一个。

我想将此`NSTextField`与自动布局一起使用，因此将自动定义其宽度以显示整行（只有一行文本）。

问题是`textField.intrinsicContentSize`和`textField.fittingSize`的水平坐标都有 -1 和 0 值，因为下面代码的输出是： `textField.intrinsicContentSize={-1, 21}` `textField.fittingSize={0, 21}`

编码：

```
NSTextField* textField = [[NSTextField alloc] initWithFrame:NSMakeRect(0, 0, 10, 24)];    
NSString* str = @"One line of text here.";
[textField setStringValue: str];
[textField setTranslatesAutoresizingMaskIntoConstraints:NO];
[textField invalidateIntrinsicContentSize];

NSLog(@"textField.intrinsicContentSize=%@", NSStringFromSize(textField.intrinsicContentSize));
NSLog(@"textField.fittingSize=%@", NSStringFromSize(textField.fittingSize)); 
```

这使得文本字段具有由自动布局分配的零宽度。

`fittingSize`我应该怎么做才能为文本字段的和属性获取有意义的值，`intrinsicContentSize`以便它们反映文本字段的内容？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-07T20:04:55.763

另一种不使用计算文本字段最佳宽度的方法`fittingSize`是使用以下代码（替换 John Sauer 的 sizeTextFieldWidthToFit 方法）：

```
- (void) sizeTextFieldWidthToFit {
    [textField sizeToFit];
    CGFloat newWidth = NSWidth(textField.frame);
    textFieldWidthConstraint.constant = newWidth;
} 
```

您可以将 textFieldWidthConstraint 的优先级设置为低于另一个不等式的优先级，将表示您的要求的最小大小限制为 25。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T18:58:43.090

我无法解释为什么 NSTextField 的 intrinsicContentSize 的宽度为 -1，但我能够根据其属性字符串的大小来计算一个。以下是我创建 NSTextField 的方式：

```
// textField is an instance variable.
textField = [NSTextField new] ;
textField.translatesAutoresizingMaskIntoConstraints = NO ;
[view addSubview:textField] ;

NSDictionary* viewsDict = NSDictionaryOfVariableBindings(view, textField) ;
// textFieldWidthConstraint is an instance variable.
textFieldWidthConstraint  = [NSLayoutConstraint constraintsWithVisualFormat:@"H:[textField(==0)]"  options:0  metrics:nil  views:viewsDict] [0] ;
[view addConstraint:textFieldWidthConstraint] ;
NSNumber* intrinsicHeight = @( textField.intrinsicContentSize.height ) ;
[view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[textField(==intrinsicHeight)]"  options:0  metrics:NSDictionaryOfVariableBindings(intrinsicHeight)  views:viewsDict]] ;

// Position textField however you like.
[view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[textField]"  options:0  metrics:nil  views:viewsDict]] ;
[view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|-[textField]"  options:0  metrics:nil  views:viewsDict]] ;

[self sizeTextFieldWidthToFit] ;
// set textField's delegate so that  sizeTextFieldWidthToFit  is called when textField's text changes.
textField.delegate = self ; 
```

以下是在其文本更改时调整其大小的方法：

```
- (void) controlTextDidChange:(NSNotification*)aNotification {
    if ( aNotification.object == textField )
        [self sizeTextFieldWidthToFit] ;
}

- (void) sizeTextFieldWidthToFit {
    // I'd like the width to always be >= 25.
    CGFloat newWidth = 25 ;
    if ( ! [textField.stringValue isEqualToString:@""] ) {
        NSDictionary* attributes = [textField.attributedStringValue  attributesAtIndex:0  effectiveRange:nil] ;
        NSSize size = [textField.stringValue sizeWithAttributes:attributes] ;
        newWidth =  MAX(newWidth, size.width + 10) ;
    }
    textFieldWidthConstraint.constant  = newWidth  ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-12T13:58:49.050

我在这里添加这个是因为这些答案很旧，而且我找不到`NSTextField`在单个答案中使用自动布局和 NSConstraints 自动包装和播放良好所需的一切。

通过这些设置，文本将：

*   保持在约束设置的水平边界内。
*   在单词边界上自动换行。
*   根据需要自动调整其高度。
*   按下下面的任何东西（如果附加约束）。

这是使它正常工作的代码：

```
NSTextField *instructions = [NSTextField labelWithString:@"Some very long text..."];
instructions.translatesAutoresizingMaskIntoConstraints = NO;
instructions.autoresizesSubviews = YES;
instructions.usesSingleLineMode = NO;
instructions.lineBreakMode = NSLineBreakByWordWrapping;
[instructions cell].wraps = YES;
[instructions cell].scrollable = NO;
instructions.maximumNumberOfLines = 10;
instructions.preferredMaxLayoutWidth = 400.0;
[self addSubview:iCloudInstructions];

[self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[instructions]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(instructions)]];
[self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[instructions]-(20)-[button]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(instructions, instructions)]]; 
```

# c# - 将二进制字符串转换为十六进制

> ID：14643181
> 
> 赞同：4
> 
> 时间：2013-02-01T09:28:11.507
> 
> 标签：c#, binary, hex

> **可能重复：**
> [将二进制长字符串转换为十六进制 c#](https://stackoverflow.com/questions/5612306/converting-long-string-of-binary-to-hex-c-sharp)

ny我正在寻找一种将二进制字符串转换为十六进制字符串的方法。

二进制字符串有四个位置。二进制字符串看起来像这样

```
string binarystring= "1011"; 
```

输出字符串应该是这样的

```
output string="B"; 
```

有没有办法将二进制字符串转换为十六进制？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T09:31:11.003

```
Convert.ToInt32("1011", 2).ToString("X"); 
```

有关用作`ToString()`参数的字符串值的更多信息，请查看以下文档：

[https://msdn.microsoft.com/en-us/library/dwhawy9k(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/dwhawy9k(v=vs.110).aspx)

# session - Cookie 过期时间与服务器的 Session 过期时间有关吗？

> ID：14643182
> 
> 赞同：5
> 
> 时间：2013-02-01T09:28:12.383
> 
> 标签：session, cookies, session-cookies

我正在使用以下代码设置 Cookie，

`document.cookie = name+"="+value+ ";expires="+"domain=xyz.com;path=/";`

我的服务器中设置的会话到期时间是 15 分钟。如果客户端空闲 15 分钟，15 分钟后，会话将被销毁。这会破坏我的 Cookie 中设置的值吗？

我的意思是，cookie 过期设置是否`document.cookie`与服务器中设置的 cookie 过期相关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:45:52.073

我认为答案实际上**取决于浏览器如何处理 cookie 过期**。

当服务器发送 HTTP 响应时，客户端（浏览器）将`Set-Cookie`在响应中查找任何标头。如果找到，它将覆盖存储在浏览器上的 cookie。

[从持久客户端状态 HTTP Cookies](http://curl.haxx.se/rfc/cookie_spec.html)中引用：

> expires 标头让客户端知道何时可以安全地清除映射**，但客户端不需要这样做**。如果 cookie 的数量超过其内部限制，客户端也可以在 cookie 的到期日期到来之前删除它。

另外，请检查：

> 如果 CGI 脚本希望删除 cookie，**它可以通过返回具有相同名称的 cookie 和过去的过期时间来实现**。路径和名称必须完全匹配，以便过期 cookie 替换有效 cookie。这一要求使得除了 cookie 的创建者之外的任何人都很难删除 cookie。

这意味着如果网络服务器自动向您发送带有`Set-Cookie`标头的响应，它将覆盖您手动设置的 cookie。

**相关：**
[http ://www.superuser.com/questions/356265/what-do-browsers-do-with-expired-cookies](http://www.superuser.com/questions/356265/what-do-browsers-do-with-expired-cookies)
[http://www.stackoverflow.com/questions/1635909/how-do-i-remove -delete-expire-a-cookie-立即](http://www.stackoverflow.com/questions/1635909/how-do-i-remove-delete-expire-a-cookie-immediately)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T14:16:56.063

如果 cookie 被销毁，那么数据也将被销毁。

# iphone - iphone中的popview控制器时如何传递Uiimage

> ID：14643196
> 
> 赞同：0
> 
> 时间：2013-02-01T09:28:52.550
> 
> 标签：iphone, ios, objective-c, popviewcontroller

在 iPhone 中使用 popview 控制器时，任何人都有将图像从一个视图传递到另一个视图的精确解决方案。

请给我一些关于这个问题的指导方针。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:40:29.287

使用协议委托方法使用图像，或者将您的图像分配给另一个控制器图像对象并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:57:09.887

suppose your imageview is existingImageView;

.h

@interface SecondController : UIViewController

@property (retain, nonatomic) UIImageView *previousImageView;

.m

@interface SecondController ()

@end

@implementation SecondController @synthasize previousImageView;

Now in firstController while navigating use it like,

```
SecondController *second = [[SecondController alloc] init];
[self.navigationController pushViewController:second animated:YES];
[second setPreviousImageView:existingImageView];
[photoController release]; 
```

After Cropping Image it will reflect to existingImageView.

# java - Magento Rest Oauth API（签名无效）401

> ID：14643198
> 
> 赞同：1
> 
> 时间：2013-02-01T09:28:58.510
> 
> 标签：java, magento, oauth

当我尝试从 Java 中的 Magento 获取数据时出现签名无效问题。我的代码有什么问题：

```
public class MagentoFacade {

final String MAGENTO_API_KEY = "apikey";
final String MAGENTO_API_SECRET = "apisecret";
final String MAGENTO_REST_API_URL = "urlmagento/api/rest";

public void testMethod() {

    OAuthService service = new ServiceBuilder()
    .provider(MagentoThreeLeggedOAuth.class)
    .apiKey(MAGENTO_API_KEY)
    .apiSecret(MAGENTO_API_SECRET)
    .debug()
    .build();

    System.out.println("" + service.getVersion());

    // start
            Scanner in = new Scanner(System.in);
            System.out.println("Magento's OAuth Workflow");
            System.out.println();
            // Obtain the Request Token
            System.out.println("Fetching the Request Token...");
            Token requestToken = service.getRequestToken();
            System.out.println("Got the Request Token!");
            System.out.println();

             // Obtain the Authorization URL
            System.out.println("Fetching the Authorization URL...");
            String authorizationUrl = service.getAuthorizationUrl(requestToken);
            System.out.println("Got the Authorization URL!");
            System.out.println("Now go and authorize Main here:");
            System.out.println(authorizationUrl);
            System.out.println("And paste the authorization code here");
            System.out.print(">>");
            Verifier verifier = new Verifier(in.nextLine());
            System.out.println();

            System.out.println("Trading the Request Token for an Access Token...");
            Token accessToken = service.getAccessToken(requestToken, verifier);
            System.out.println("Got the Access Token!");
            System.out.println("(if your curious it looks like this: "
                    + accessToken + " )");
            System.out.println();

             OAuthRequest request = new OAuthRequest(Verb.GET, MAGENTO_REST_API_URL+ "/products?limit=2");
                service.signRequest(accessToken, request);
                Response response = request.send();
                System.out.println();
                System.out.println(response.getCode());
                System.out.println(response.getBody());
                        System.out.println();
}

public static void main(String[] args) {
    MagentoFacade mf = new MagentoFacade();
    mf.testMethod();
} 
```

}

```
public final class MagentoThreeLeggedOAuth extends DefaultApi10a {
private static final String BASE_URL = "urltoMagento/";

@Override
public String getRequestTokenEndpoint() {
    return BASE_URL + "oauth/initiate";
}

@Override
public String getAccessTokenEndpoint() {
    return BASE_URL + "oauth/token";
}

@Override
public String getAuthorizationUrl(Token requestToken) {
    return BASE_URL + "richard/oauth_authorize?oauth_token="
            + requestToken.getToken(); //this implementation is for admin roles only...
} 
```

}

signature is: NnRaB73FqCcFAAVB4evZtGkWE3k= appended additional OAuth parameters: { oauth_callback -> oob , oauth_signature -> NnRaB73FqCcFAAVB4evZtGkWE3k= , oauth_version -> 1.0 , oauth_nonce -> 753236685 , oauth_signature_method -> HMAC-SHA1 , oauth_consumer_key -> ptrij1xt8tjisjb6kmdqed2v4rpla8av , oauth_timestamp -> 1359710704 } using Http Header 签名发送请求... 响应状态代码：401 响应正文：oauth_problem=signature_invalid&debug_sbs=MCe/RB8/GNuqV0qku00ubepc/Sc= 线程“主”org.scribe.exceptions.OAuthException 中的异常：响应正文不正确。无法从中提取令牌和秘密： org.scribe.extractors.TokenExtractorImpl.extract(TokenExtractorImpl.java:41) 上的 org.scribe.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-04T14:44:25.200

我可能会为您提供答案，但它可能不适用于您的情况。我努力找出为什么我的本地机器上的签名无效。

事实证明，在 Mage_Oauth_Model_Server::_validateSignature() 中计算签名时，Magento 构建了请求 URI 部分**，并修剪了 URL 端口路径**：`$this->_request->getHttpHost()`

就我而言，本地网络服务器在端口 81 上运行，因此我的签名和 Magento 的签名不匹配。通过将`false`参数传递给`getHttpHost`方法，您可以防止端口修剪。

我知道这是非常具体的，但我失去了所有的头发弄清楚为什么所以我需要分享它。谁知道呢，也许这会有所帮助。

干杯布尼

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-15T14:13:14.667

我只想在 Postman 中添加它，我只是添加了另一个值为 false 的 getHttpHost url 参数，并且效果也很好。我为此奋斗了一整天。我希望这可以节省其他人的时间。

# objective-c - 用于 picasa 照片上传的 GData 客户端库

> ID：14643199
> 
> 赞同：0
> 
> 时间：2013-02-01T09:29:00.993
> 
> 标签：objective-c, gdata

添加 GData 客户端库以在 Picasa 上上传照片时出现错误错误日志如下

```
Ld /Users/Macintosh/Library/Developer/Xcode/DerivedData/PhotoYaar-ftppukpwhpkripftssebcboomfcx/Build/Products/Debug-iphonesimulator/PhotoYaar.app/PhotoYaar normal i386
cd "/Users/Macintosh/Desktop/Paras/Projects/Photo Yaary/01-02-2013/PhotoYar"
setenv MACOSX_DEPLOYMENT_TARGET 10.6
setenv PATH "/Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Volumes/Xcode/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Volumes/Xcode/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Volumes/Xcode/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk -L/Users/Macintosh/Library/Developer/Xcode/DerivedData/PhotoYaar-ftppukpwhpkripftssebcboomfcx/Build/Products/Debug-iphonesimulator "-L/Users/Macintosh/Desktop/Paras/Projects/Photo Yaary/01-02-2013/PhotoYar/../../Data_Photo_App/GData-iOS-Static-Library-1.12-master" "-L/Users/Macintosh/Desktop/Paras/Projects/Photo Yaary/01-02-2013/PhotoYar/../../../../.." -F/Users/Macintosh/Library/Developer/Xcode/DerivedData/PhotoYaar-ftppukpwhpkripftssebcboomfcx/Build/Products/Debug-iphonesimulator "-F/Users/Macintosh/Desktop/Paras/Projects/Photo Yaary/01-02-2013/PhotoYar" -filelist /Users/Macintosh/Library/Developer/Xcode/DerivedData/PhotoYaar-ftppukpwhpkripftssebcboomfcx/Build/Intermediates/PhotoYaar.build/Debug-iphonesimulator/PhotoYaar.build/Objects-normal/i386/PhotoYaar.LinkFileList -mmacosx-version-min=10.6 -Xlinker -objc_abi_version -Xlinker 2 -all_load -lxml2 -ObjC -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 /Users/Macintosh/Library/Developer/Xcode/DerivedData/PhotoYaar-ftppukpwhpkripftssebcboomfcx/Build/Products/Debug-iphonesimulator/libGPUImage.a -lGDataTouchStaticLib -framework Security -weak_library /Users/Macintosh/Library/Developer/Xcode/DerivedData/PhotoYaar-ftppukpwhpkripftssebcboomfcx/Build/Products/Debug-iphonesimulator/GData/GData -lxml2 -framework MobileCoreServices -framework CoreLocation -framework AddressBook -framework Accounts -framework CFNetwork -framework OpenAL -framework SystemConfiguration -lsqlite3.0 -framework ImageIO -framework CoreVideo -framework AssetsLibrary -framework CoreMedia -framework CoreMotion -framework MessageUI -framework Twitter -framework OpenGLES -framework AVFoundation -framework CoreImage -lz.1.1.3 -framework QuartzCore -framework UIKit -framework Foundation -framework CoreGraphics -o /Users/Macintosh/Library/Developer/Xcode/DerivedData/PhotoYaar-ftppukpwhpkripftssebcboomfcx/Build/Products/Debug-iphonesimulator/PhotoYaar.app/PhotoYaar

ld: file not found: /Users/Macintosh/Library/Developer/Xcode/DerivedData/PhotoYaar-ftppukpwhpkripftssebcboomfcx/Build/Products/Debug-iphonesimulator/GData/GData
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我该如何解决这个问题？我使用这个网址作为参考

```
 http://hoishing.wordpress.com/2011/08/23/gdata-objective-c-client-setup-in-xcode-4/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:13:44.060

警告是链接器没有找到要链接的库。

您需要修复您的项目，以便它可以链接到库框架。链接细节在[这里](http://code.google.com/p/gdata-objectivec-client/wiki/BuildingTheLibrary#Linking_to_the_Mac_OS_X_Framework)。

# python - How to render DateField with 3 selects

> ID：14643200
> 
> 赞同：4
> 
> 时间：2013-02-01T09:29:08.860
> 
> 标签：python, flask, wtforms, flask-wtforms

I'm looking for the simplest and cleanest way to render a basic DateField with 3 select.

```
<select>day</select><select>month</select><select>year</select> 
```

(and if possible use "format" to choose how to display the final render)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:25:25.867

You can take advantage of the fact that DateField will handle multiple-valued inputs and join them together with a space, so you can avoid a secondary form and instead just provide a sequence of inputs:

```
from wtforms.widgets.core import Select, HTMLString, html_params

class SelectDateWidget(object):
    FORMAT_CHOICES = {
        '%d': [(x, str(x)) for x in range(1, 32)],
        '%m': [(x, str(x)) for x in range(1, 13)],
        '%y': [(x, str(x)) for x in range(1950, 2014)],
    }

    def __call__(self, field, **kwargs):
        field_id = kwargs.pop('id', field.id)
        html = []
        for format in field.format.split():
            choices = self.FORMAT_CHOICES[format]
            id_suffix = format.replace('%', '-')
            params = dict(kwargs, name=field.name, id=field_id + id_suffix)
            html.append('<select %s>' % html_params(params))
            if field.data:
                current_value = int(field.data.strftime(format))
            else:
                current_value = None
            for value, label in choices:
                selected = (value == current_value)
                html.append(Select.render_option(value, label, selected))
            html.append('</select>')

        return HTMLString(''.join(html))

# Usage
class MyForm(Form):
    american_date = DateField(format='%m %d %y', widget=SelectDateWidget())
    european_date = DateField(format='%d %m %y', widget=SelectDateWidget()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T17:30:36.453

**Final widget:** (Support multiple format not only spaces)

```
class SelectDateWidget(object):
  FORMAT_CHOICES = {
    '%d': [(x, str(x)) for x in range(1, 32)],
    '%m': [(x, str(x)) for x in range(1, 13)]
  }

  FORMAT_CLASSES = {
    '%d': 'select_date_day',
    '%m': 'select_date_month',
    '%Y': 'select_date_year'
  }

  def __init__(self, years=range(1930, 2014)):
    super(SelectDateWidget, self).__init__()
    self.FORMAT_CHOICES['%Y'] = [(x, str(x)) for x in years]

  def __call__(self, field, **kwargs):
    field_id        = kwargs.pop('id', field.id)
    html            = []
    allowed_format  = ['%d', '%m', '%Y']

    for format in field.format.split():
      if (format in allowed_format):
        choices     = self.FORMAT_CHOICES[format]
        id_suffix   = format.replace('%', '-')
        id_current  = field_id + id_suffix

        kwargs['class'] = self.FORMAT_CLASSES[format]
        try: del kwargs['placeholder']
        except: pass

        html.append('<select %s>' % html_params(name=field.name, id=id_current, **kwargs))

        if field.data:
            current_value = int(field.data.strftime(format))
        else:
            current_value = None

        for value, label in choices:
          selected = (value == current_value)
          html.append(Select.render_option(value, label, selected))
        html.append('</select>')
      else:
        html.append(format)
        html.append('<input type="hidden" value="'+format+'" %s></input>' % html_params(name=field.name, id=id_current, **kwargs))

      html.append(' ')

    return HTMLString(''.join(html)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T20:25:43.167

I used a custom widget and it's working but it's not perfect yet. Other ideas to do this?

```
class SelectDateWidget(object):
    class SelectDateForm(Form):
      days   = [(x,x) for x in range(1,32)]
      months = [(x,x) for x in range(1,13)]
      years  = [(x,x) for x in range(1950,2014)]

      days_select  = SelectField(choices=days)
      month_select = SelectField(choices=months)
      year_select  = SelectField(choices=years)

    def __call__(self, field, **kwargs):
      kwargs.setdefault('id', field.id)

      date_form   = self.SelectDateForm(prefix=field.name)

      days_html  = date_form.days_select(class_="input-mini").__html__()
      month_html = date_form.month_select(class_="input-mini").__html__()
      year_html  = date_form.year_select(class_="input-small").__html__()

      widget_html = field.format
      widget_html = widget_html.replace('%d', days_html) 
      widget_html = widget_html.replace('%m', month_html) 
      widget_html = widget_html.replace('%Y', year_html) 

      return HTMLString(widget_html)

class SelectDateField(DateField):
  widget = SelectDateWidget()
  def __init__(self, label=None, validators=None, **kwargs):
    super(SelectDateField, self).__init__(label, validators, **kwargs)

  def pre_validate(self, extra):
    form   = SelectDateWidget.SelectDateForm(prefix=self.name)

    try:    
      date      = datetime.datetime.strptime(form.days_select.data+'-'+form.month_select.data+'-'+form.year_select.data, '%d-%m-%Y')
      self.data = date
    except: 
      raise StopValidation(gettext(u'Invalid date.'))

class MyForm(Form):
  date = SelectDateField(u'Date', validators=[Required(message=_(u'This field is required.'))], format='%d / %m / %Y') 
```

# wpf - C# - XAML 中的 WPF 反向绑定 ObservableCollection

> ID：14643207
> 
> 赞同：4
> 
> 时间：2013-02-01T09:29:32.957
> 
> 标签：wpf, xaml, combobox, observablecollection, reverse

我有一个 ObservableCollection，它作为 ItemSource 绑定到我的 ComboBox。它是一个 ComboBox，显示您所做的更改。我现在的问题是，最新的更改显示在列表的底部。我试图在属性中反转它，但是当我返回时，`ComboboxName.Reverse()`我得到一个**IEnumerable**回来。我也不想用反转的数据进行第二次收集。

另一种方法是在 XAML 中解决这个问题。有人知道我该怎么做吗？

我在这里找到了这个答案，但我不明白如何实现它。 [ObservableCollection 的逆序](https://stackoverflow.com/questions/10413535/reverse-order-of-observablecollection)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T09:52:57.473

scm 代表

```
xmlns:scm="clr-namespace:System.ComponentModel;assembly=WindowsBase" 
```

有一个适合我的解决方案。您必须根据您的情况对其进行调整：

```
<Window.Resources>
<CollectionViewSource x:Key="customerGroups" Source="{Binding Path=Customers}">
        <CollectionViewSource.GroupDescriptions>
            <PropertyGroupDescription PropertyName="IsCompany"></PropertyGroupDescription>
        </CollectionViewSource.GroupDescriptions>
        <CollectionViewSource.SortDescriptions>
            <scm:SortDescription PropertyName="IsCompany" Direction="Descending"/>
            <scm:SortDescription PropertyName="DisplayName" Direction="Ascending"/>
        </CollectionViewSource.SortDescriptions>
    </CollectionViewSource>
</Window.Resources> 
```

然后将此资源作为 ComboBox 的 ItemsSource 引用，并将内容绑定到所需的属性：

```
 <ComboBox ItemsSource="{Binding Source={StaticResource customerGroups}}">
        <DataTemplate>
            <TextBlock Text="{Binding Path= FirstName}"></TextBlock>
        </DataTemplate>
    </ComboBox> 
```

# unity3d - 在统一 3 D 中改变刚体.质量值

> ID：14643208
> 
> 赞同：0
> 
> 时间：2013-02-01T09:29:37.387
> 
> 标签：unity3d, rigid-bodies

我正在尝试以编程方式更改 3D 对象的质量。但是该物体最初并没有得到计算出的质量，而是一个 0 值。创建对象的预制件时，它会获取前一个对象的计算质量，而不是当前质量。此后创建的所有预制件都会重复该场景。我怎样才能解决这个问题？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-25T14:03:13.730

您可能错过了 get 组件调用：

```
using UnityEngine;
using System.Collections;

public class ExampleClass : MonoBehaviour {
    public float mass;
    public Rigidbody rb;
    void Start() {
        rb = GetComponent<Rigidbody>();
        rb.mass = 0.5f;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T08:26:21.980

为了给你的刚体一个质量，可以明智地使用以下脚本

```
using UnityEngine;
using System.Collections;

public class example : MonoBehaviour {
    void Example() {
        rigidbody.mass = 0.5F;
    }
} 
```

下次再做一些研究。 [http://docs.unity3d.com/Documentation/ScriptReference/Rigidbody-mass.html](http://docs.unity3d.com/Documentation/ScriptReference/Rigidbody-mass.html) 谷歌第一击。

# intellij-idea - Intellij 过滤 Find Usages/Call 层次结构

> ID：14643210
> 
> 赞同：1
> 
> 时间：2013-02-01T09:29:48.173
> 
> 标签：intellij-idea, structural-search

我需要在框架中进行重要的重构。我有一个方法从代码中的不同位置调用了大约 300 次（即 Find Usages 给了我大约 300 个结果）。

我想过滤这些结果，以便它只返回不在构造函数主体中的用法。

我尝试使用“查看调用层次结构”，它提供了更易读的结果（即更容易识别来自外部构造函数的调用）。但我想知道是否有一种方法可以排除从构造函数体内完成的自动调用？

我不习惯使用“结构搜索”，但这可能会有所帮助？

我正在使用 IDEA EAP 12

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:39:59.393

（回答我自己的问题）

我试图探索 SSR 的特性，最终找到了一个有用的模式。

我想要的是：找到所有`myMethod`已完成的方法调用，但不包括那些在构造函数体内完成的调用（即仅那些在常规实例方法中完成的调用）。

搜索模式：

```
class $Class$ { 
    $ReturnType$ $MethodName$($ParameterType$ $Parameter$) {$MethodCode$;}
} 
```

此模式将匹配所有非空方法。所以我仍然必须`$MethodCode$`使用正则表达式进行限制：

```
.*\.myMethod\(.* 
```

我认为应该可以改进 $MethodCode$ 正则表达式，但我没有得到任何错误匹配......所以我对此很满意。

# c# - 如何从 POCO 类生成编辑字段/CRUD 对话

> ID：14643211
> 
> 赞同：1
> 
> 时间：2013-02-01T09:29:56.500
> 
> 标签：c#, winforms, visual-studio-2010

在第2 分钟的[创建一对多数据输入表单视频](http://msdn.microsoft.com/en-us/vstudio/bb643827)`DataSet`中，a用于自动生成数据记录的详细字段 ( `Textboxes`, `Comboboxes`)。

与这个[问题](https://stackoverflow.com/questions/2511545/tool-to-generate-a-gui-winforms-or-wpf-from-a-class)或这个[问题](https://stackoverflow.com/questions/8131821/code-generating-a-winforms-form-from-a-c-sharp-poco-class)类似，我正在寻找一种方法来从 POCO 搭建 Windows 窗体 CRUD 对话框。

有谁知道在 Visual Studio 2010 中是否以及如何从 POCO 生成 CRUD 对话？

# javascript - 带有 PhoneGap 和 JavaScript 的 SQlite 数据库

> ID：14643214
> 
> 赞同：0
> 
> 时间：2013-02-01T09:30:03.160
> 
> 标签：javascript, html, sqlite, cordova

我正在使用 PhoneGap 和 SQLite 数据库。

我尝试这样的事情：

我有一个函数 useSavedThing()：

```
function useSavedThing() {

        alert("BEFORE getSavedThing()");    

    getSavedThing();

        alert("AFTER getSavedThing()");

} 
```

和一个函数 getSavedThing()：

```
function getSavedThing(){

        alert("ONE");
        var db = window.openDatabase("Database", "1.0", "Database", 200000);
    db.transaction(populateDB, errorCB, successCB);
        alert("TWO");
    function populateDB(tx) {

        alert("THREE");
    }

    function errorCB(tx, err) {
        alert("Error processing SQL: " + err);
    }

    function successCB() {
        alert("FOUR");
        db.transaction(getData);
    }

    function getData(tx) {
                alert("FIVE");
        tx.executeSql('SELECT * FROM SETTINGS', [], getIt, errorCB);
    }
    function getIt(tx, results) {
                   alert("SIX");
            var savedthing = results.rows.item(0).data;

    }

} 
```

问题是当函数 getSavedThing() 被调用时，只有前两个警报 (alert("ONE"), alert("TWO)) 发出但随后警报 ("AFTER getSavedThing ()") 被调用。

但是我希望所有费用警报（“ONE”），警报（“TWO”），警报（“THREE”）警报（“FOUR”）警报（“FIVE”），警报（“SIX”），在警报之前发出("在 getSavedThing() 之后"); 出现。

警报的顺序应该是：

1.  alert("在 getSavedThing() 之前");
2.  警报（“一个”）；
3.  警报（“两个”）；
4.  警报（“三个”）；
5.  警报（“四”）；
6.  警报（“五”）；
7.  警报（“六”）；
8.  alert("在 getSavedThing() 之前");

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:12:10.153

数据库操作是异步执行的。如果要`alert("AFTER getSavedThing()")`在最后一次数据库操作之后执行，则需要从回调函数中调用`getIt()`；

```
function useSavedThing() {
    alert("BEFORE getSavedThing()");
    var afterGet = function(){
        alert("AFTER getSavedThing()");
    }
    getSavedThing( afterGet ); /*pass the callback function to getSavedThing*/
}

function getSavedThing( callback ){

    alert("ONE");
    var db = window.openDatabase("Database", "1.0", "Database", 200000);
    db.transaction(populateDB, errorCB, successCB);
    alert("TWO");
    function populateDB(tx) {
        alert("THREE");
    }

    function errorCB(tx, err) {
        alert("Error processing SQL: " + err);
    }

    function successCB() {
        alert("FOUR");
        db.transaction(getData);
    }

    function getData(tx) {
        alert("FIVE");
        tx.executeSql('SELECT * FROM SETTINGS', [], getIt, errorCB);
    }

    function getIt(tx, results) {
         alert("SIX");
         var savedthing = results.rows.item(0).data;
         callback.call(); /*execute the callback function*/
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:51:12.253

你可以在PhoneGap中使用[这个框架](https://cordova.codeplex.com/wikipage?title=How%20to%20use%20nova.data)进行数据访问，你会发现它非常好用：

```
var db = new MyDB();
//query all users
var users = db.Users.toArrary(callback); 
```

# css - CSS - 我如何拉伸菜单的背景

> ID：14643215
> 
> 赞同：0
> 
> 时间：2013-02-01T09:30:02.987
> 
> 标签：css

你好，

有人可以帮我吗，我怎样才能拉伸菜单的背景（从左到右全宽）？我是初学者。

谢谢。

```
#menu, #menu ul {
    margin: 0;
    padding: 0;
    list-style: none;
}

#menu {
    width:100%;
    margin: 0px;
    background-color: #3d56ac;
    background-image: linear-gradient(#444, #111);

}

#menu:before,
#menu:after {
    content: "";
    display: table;
}

#menu:after {
    clear: both;
}

#menu {
    zoom:1;
}

#menu li {
    float: left;
    border-right: 1px solid #222;
    box-shadow: 1px 0 0 #444;
    position: relative;
}

#menu a {
    float: left;
    padding: 12px 30px;
    color: #FFF;
    text-transform: uppercase;
    font: bold 12px Arial, Helvetica;
    text-decoration: none;
    text-shadow: 0 1px 0 #111;
}

#menu li:hover > a {
    color: #fafafa;
}

*html #menu li a:hover { /* IE6 only */
    color: #fafafa;
}

#menu ul {
    margin: 20px 0 0 0;
    _margin: 0; /*IE6 only*/
    opacity: 0;
    visibility: hidden;
    position: absolute;
    top: 38px;
    left: 0;
    z-index: 1;    
    background: #444;   
    background: linear-gradient(#444, #111);
    box-shadow: 0 -1px 0 rgba(255,255,255,.3);  
    border-radius: 3px;
    transition: all .2s ease-in-out;  
}

#menu li:hover > ul {
    opacity: 1;
    visibility: visible;
    margin: 0;
}

#menu ul ul {
    top: 0;
    left: 150px;
    margin: 0 0 0 20px;
    _margin: 0; /*IE6 only*/
    box-shadow: -1px 0 0 rgba(255,255,255,.3);      
}

#menu ul li {
    float: none;
    display: block;
    border: 0;
    _line-height: 0; /*IE6 only*/
    box-shadow: 0 1px 0 #111, 0 2px 0 #666;
}

#menu ul li:last-child {   
    box-shadow: none;    
}

#menu ul a {    
    padding: 10px;
    width: 130px;
    _height: 10px; /*IE6 only*/
    display: block;
    white-space: nowrap;
    float: none;
    text-transform: none;
}

#menu ul a:hover {
    background-color: #0186ba;
    background-image: linear-gradient(#04acec, #0186ba);
}

#menu ul li:first-child > a {
    border-radius: 3px 3px 0 0;
}

#menu ul li:first-child > a:after {
    content: '';
    position: absolute;
    left: 40px;
    top: -6px;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-bottom: 6px solid #444;
}

#menu ul ul li:first-child a:after {
    left: -6px;
    top: 50%;
    margin-top: -6px;
    border-left: 0; 
    border-bottom: 6px solid transparent;
    border-top: 6px solid transparent;
    border-right: 6px solid #3b3b3b;
}

#menu ul li:first-child a:hover:after {
    border-bottom-color: #04acec; 
}

#menu ul ul li:first-child a:hover:after {
    border-right-color: #0299d3; 
    border-bottom-color: transparent;   
}

#menu ul li:last-child > a {
    border-radius: 0 0 3px 3px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:54:58.983

您需要修复图像的宽度...如果您想拉伸背景图像...

```
**CSS** 
    background-image: url("menu.png");
    background-size: 875px 125px;
    background-repeat: no-repeat; 
```

希望这会帮助你...

**或者你可以试试...**

/css

```
body{margin: 0 auto;}
    .menu100percent {
    background: #3584b4; /* Old browsers */
    background: -moz-linear-gradient(top, #3584b4 0%, #25567f 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#3584b4), color-stop(100%,#25567f)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #3584b4 0%,#25567f 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #3584b4 0%,#25567f 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top, #3584b4 0%,#25567f 100%); /* IE10+ */
    background: linear-gradient(to bottom, #3584b4 0%,#25567f 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3584b4', endColorstr='#25567f',GradientType=0 ); /* IE6-9 */
    color: white;
    font-size: 16px;
    height: 37px;
    width:100%;
}
    .menu{width:1000px; margin: 0 auto; }
    .menu a{color:#fff; font-size:12px; line-height:37px; font-family:Arial; text-decoration:none;} 
```

/html

```
<div class="menu100percent">
    <div class="menu">
        <a href="/Purchase.aspx">Shop</a>
    </div>
</div> 
```

[在这里演示](http://jsfiddle.net/kksW2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:36:23.190

这应该有效：

```
#menu {
  background-size: 100%;
} 
```

# noclassdeffounderror - 使用 IKVM 将 jar 转换为 C# dll - NoClassDefFoundError

> ID：14643219
> 
> 赞同：1
> 
> 时间：2013-02-01T09:30:18.300
> 
> 标签：noclassdeffounderror, ikvm

我正在使用 IKVM 将 java jar 文件转换为 ac# dll。这个 jar 文件有几个依赖项，我都是通过 -r:reference.dll 引用的。

我仍然收到以下警告，我不知道如何摆脱它：

```
IKVM.NET Compiler version 7.2.4630.5
Copyright (C) 2002-2012 Jeroen Frijters
http://www.ikvm.net/

warning IKVMC0111: Emitted java.lang.NoClassDefFoundError in "myproject.myclass.setFocus()V"
("org.eclipse.swt.widgets.Control") 
```

我正在转换 jarfile 的命令是：

```
ikvmc -target:library -debug -out:project.dll -r:org.eclipse.swt.win32.win32.x86_3.5.2.v3557f.dll -r:severalmoreherretofollow project.jar 2> project.log 
```

类“org.eclipse.swt.widgets.Control”在“org.eclipse.swt.win32.win32.x86_3.5.2.v3557f.dll”中声明，使用ikvm将其编译为dll时没有错误。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T16:11:17.853

如果您将多个 jar 文件编译为一个 jar 文件，则可以建议一步编译。有关更多详细信息，请参阅[wiki](http://sourceforge.net/apps/mediawiki/ikvm/index.php?title=Convert_a_jar_file_to_a_dll_and_use_it_as_library)。这可以防止您循环依赖项。

我认为您需要使用带有 -r 选项的完整限定文件名。

# java - 前置摄像头连接摄像头服务失败？

> ID：14643224
> 
> 赞同：2
> 
> 时间：2013-02-01T09:30:28.423
> 
> 标签：java, android, xml

我正在使用 Camera Api，因为当我启动应用程序时，它会显示后置摄像头，它工作正常，但是当我单击前置摄像头按钮时，它会得到运行时异常 无法连接摄像头服务

```
in  camera = Camera.open(cameraID);

in front camera button code :

if (cameraID == Camera.CameraInfo.CAMERA_FACING_BACK)
            {
                Toast.makeText(getApplicationContext(), "Front Camera", Toast.LENGTH_LONG).show();

                cameraID = Camera.CameraInfo.CAMERA_FACING_FRONT;

            }
            else if (cameraID == Camera.CameraInfo.CAMERA_FACING_FRONT)

            {
                Toast.makeText(getApplicationContext(), "Back Camera", Toast.LENGTH_LONG).show();

                cameraID = Camera.CameraInfo.CAMERA_FACING_BACK;

            }

            Intent intent = getIntent();

            finish();

            startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:52:51.607

您是否允许前置摄像头：

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature
        android:name="android.hardware.camera"
        android:required="false" />
<uses-feature
        android:name="android.hardware.camera.front"
        android:required="false" />
<uses-feature android:name="android.hardware.camera.autofocus" /> 
```

检查此[链接 1](https://stackoverflow.com/questions/7829162/failed-to-connect-to-camera-service)和[链接](https://stackoverflow.com/questions/6098729/android-front-camera)2一次。

# shell - shell脚本中的文件意外结束

> ID：14643226
> 
> 赞同：0
> 
> 时间：2013-02-01T09:30:29.900
> 
> 标签：shell

我有脚本：

```
#!/bin/sh
PSQLPATH=$1
USER=$2
if [ -z ${PSQLPATH} ]; then
   echo "incorrect path param"
   echo "Usage: $0 psqlpath username"
   exit 1
fi
if [ -z ${USER} ]; then
   echo "incorrect username param"
   echo "Usage: $0 psqlpath username"
   exit 1
fi
${PSQLPATH}/createdb -h localhost -U ${USER} highway2
${PSQLPATH}/psql -f createDatatable.sql -h localhost -d highway2 -U ${USER}
${PSQLPATH}/psql -f insertStatements.sql -h localhost -d highway2 -U ${USER}
echo "execute passed"
exit 0 
```

当我尝试像 ./script.sh 一样执行它时，出现错误第 19 行：文件意外结束。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:44:07.397

检查你的行尾。当我运行您的脚本（在 Cygwin 下）时，没有给出任何参数，如果我有 Windows 样式的行尾 ( `\r\n`)，我会收到您的错误。当我使用 Unix 风格的行结尾时，通过消除`\r`s，脚本运行，抱怨我没有给出正确的参数。

# linux - 在 localhost 的 Apache 设置上出现 Forbidden/Permissions 错误

> ID：14643231
> 
> 赞同：1
> 
> 时间：2013-02-01T09:30:51.560
> 
> 标签：linux, localhost, fedora, apache

出于纯粹的绝望，我在stackoverflow上问了这个问题。我已经在 serverfault.com 上发布了这个，但我认为那里的社区不够大，无法给我一个有效的答案。此外，这个问题[之前已经发布过，](https://stackoverflow.com/questions/12123533/you-dont-have-permission-to-access-index-html-on-this-server)但似乎它在没有解决方案的情况下消失了。所以这是我撤销问题并再次尝试......

[我遇到了用户Dmitry](https://stackoverflow.com/users/554217/dmitry-makovetskiyd)在上面链接的帖子中遇到的完全相同的问题。我正在运行 Fedora 18 64 位。我通过“httpd”安装了 apache。我可以在没有 html 页面的情况下访问 localhost 时很好地访问默认的 apache 页面，`/var/www/html/`但是一旦我将 html 文档粘贴到那里（名为 index.html）并点击 localhost，我就会收到一条错误消息：

```
Forbidden: You don't have permission to access /index.html on this server. 
```

index.html 上的文件权限是 755。如果还有什么，请告诉我！提前致谢。

# apache - Apache 下载具有特定扩展名的文件

> ID：14643232
> 
> 赞同：3
> 
> 时间：2013-02-01T09:31:05.907
> 
> 标签：apache, .htaccess, download

我在 apache 网络服务器上有下载目录。此目录中的文件具有特定的扩展名。例如 *.yyy 和 *.zzz。但是所有这些文件都重命名为 .zip 或 .tar.gz

我已经在不同的 brawsers 中进行了测试，并且没有遇到任何问题。

但是有些用户告诉他们他们获得了软件包的来源，而不是下载。

我已经创建了.htaccess

```
AddType application/zip .zzz
AddType application/x-gzip .yyy 
```

但是当我尝试在 MS Internet Explorer 中下载 aaa.yyy 时，它会尝试保存而不是 aaa。**yyy**但是aaa。**广州**

如何强制浏览器下载文件而不更改扩展名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T09:36:12.520

```
<FilesMatch "\.(zzz|yyy)$">
  ForceType application/octet-stream
  Header set Content-Disposition attachment
</FilesMatch> 
```

强制类型告诉浏览器您不知道文件类型。所以他们不会做任何愚蠢的事情。第二行会告诉他们下载这个文件。

# ios - NSDictionary 与。NSArray

> ID：14643237
> 
> 赞同：5
> 
> 时间：2013-02-01T09:31:12.463
> 
> 标签：ios, nsarray, nsdictionary

我正在阅读objective-c（一本书呆子牧场书），我不禁思考这个问题：我如何决定使用哪种集合类型，NSArray 或 NSDictionary（带有或不带有可变子类）从 URL 读取内容时？

假设我正在从 PHP 脚本（正在处理的场景）读取 JSON 数据，使用哪个？我知道在许多参考资料中都指出它取决于数据结构（即 JSON），但是可以概述这两种结构的清晰轮廓吗？

谢谢大家的帮助:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T09:41:46.473

`NSArray`基本上只是一个有序的对象集合，可以通过索引访问。
`NSDictionary`通过键提供对其对象的访问（通常是 NSStrings，但可以是任何对象类型，如哈希表）。

要从通过 URL 加载的 JSON 字符串生成对象图，请使用`NSJSONSerialization`，它会生成一个 Objective-C 对象结构。结果对象取决于 JSON 字符串。如果您的 JSON 中的顶级元素是一个数组（以 开头**`"["`**），您将获得一个 NSArray。如果顶级元素是 JSON 对象（以 开头**`"{"`**），您将获得一个 NSDictionary。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T09:34:13.023

您希望在`NSArray`拥有相同类型对象的集合以及在对象`NSDictionary`上具有属性时使用。

如果你有，假设一个`person`包含 a `name`、 a`phone number`和 an的对象，`email`你会将它放入字典中。

这样做允许值的顺序是随机的，并为您提供更可靠的代码。

如果您想拥有一个以上的人，则可以将人员对象放入一个数组中。

这样做允许您迭代用户对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-15T13:08:11.577

“withContentOfURL”或“withContentOfFile”要求 URL 或文件中的数据采用 Cocoa 要求的特定格式。JSON*不是*那种格式。如果您首先使用相同的数据将数据写入文件或 URL，则只能使用这些方法。如果你写一个 NSArray，你可以读一个 NSArray。如果你写一个 NSDictionary，你可以读一个 NSDictionary。其他一切都会失败。

# r - 从函数启动命名的 ESS R 进程

> ID：14643240
> 
> 赞同：2
> 
> 时间：2013-02-01T09:31:22.803
> 
> 标签：r, emacs, ess

我正在尝试创建一个小型交互式 elisp 函数，以便快速显示适合回答有关 R 的 Stackoverflow 问题的布局。这个想法是打开一个临时 R 文件，并在另一个框架中启动与其关联的 R 会话。

到目前为止，我写了这个非常简单的东西：

```
(defun jb-so ()
  "Start R for StackOverflow layout"
  (interactive)
  (find-file "/tmp/so.R")
  (new-frame)
  (R)) 
```

几乎没问题，除了两个细节：

*   有一个提示确认我要在`/tmp`. 有没有办法自动接受它？
*   默认情况下会调用会话`*R*`，但我想给它一个特定的名称，例如`*RSo*`为了避免与其他正在运行或将来的会话发生冲突。有没有办法直接从函数中做到这一点？

提前致谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T10:37:36.213

启动时有很多选择值得尊重。所以emacs动态范围在这里真的很有帮助：

```
(defun jb-so ()
  "Start R for StackOverflow layout"
  (interactive)
  (find-file "/tmp/so.R")
  (let ((ess-ask-for-ess-directory nil)
        (inferior-ess-same-window nil)
        (ess-gen-proc-buffer-name-function (lambda (nm) "*RSO*")))
    (R)
    (pop-to-buffer "so.R"))) 
```

请注意，这仅适用于提供为进程缓冲区设置自定义名称的工具的最新版本的 ESS（请参阅 参考资料`ess-gen-proc-buffer-name-function`）。您还可以使用 重命名劣质缓冲区`M-x` `rename-buffer`。

# java - 是否有可能在eclipse中有一个java程序来编译java以外的其他语言？

> ID：14643244
> 
> 赞同：2
> 
> 时间：2013-02-01T09:31:29.400
> 
> 标签：java, eclipse, compiler-construction, bnf, ebnf

我目前正在开发一个需要编译文件并对发现的错误（语法）进行诊断的项目。我已经能够让程序适用于 .java 文件。现在我必须对 .java 以外的文件（例如：.py 文件）做同样的事情，并将它与我当前的程序集成。我做了一些研究，发现 eclipse 可以支持 20 多种语言，并且可以下载插件。我不知道我是否可以调用“编译器”（python 的示例）并获得 .py 文件中发现的语法错误的诊断。我应该寻找语言的 bnf 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:22:11.907

如果我对您的理解正确，您想要的是从 Java 程序的“内部”编译 python 代码。

如果是这种情况，快速响应可能是使用 Runtime Java 类启动编译器。

这里有一个很好的答案： [getting output from execution a command line program](https://stackoverflow.com/questions/5711084/java-runtime-getruntime-getting-output-from-executing-a-command-line-program)

如果您想要从 Eclipse 运行编译器，正如您已经被告知的那样，PyDev 是一个不错的选择。

除了您可以通过这种方式在 eclipse 中配置任何外部工具外，这是为 windows 系统配置命令行的示例：

要在 Eclipse 中使用命令行控制台，只需按照以下步骤操作：

1.  转到菜单运行->外部工具->外部工具...</li>
2.  在“配置”（左）列中选择程序
3.  按新建按钮（或右键单击 -> 新建）
4.  在名称编辑框中输入此工具的名称（此名称将出现在运行->外部工具菜单中）
5.  在该位置添加 C:\WINNT\system32\cmd.exe *
6.  在工作区目录中添加 ${resource_loc}
7.  按关闭按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:35:54.330

你当然可以。我正在使用[PyDev](http://marketplace.eclipse.org/content/pydev-python-ide-eclipse)，它可以做所有事情（语法高亮、调试，甚至一些重构），而且你只需要高亮语法错误。在 Eclipse 下使用 Python 开发时，无需手动运行命令行工具。

# c# - c#：在设计时填充组合框

> ID：14643245
> 
> 赞同：1
> 
> 时间：2013-02-01T09:31:41.333
> 
> 标签：c#, combobox, populate, design-time

我已经知道如何使用 c# 代码填充组合框，但是，有没有办法在设计时使用设计器/属性填充组合框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:44:08.153

转到组合框的属性资源管理器或按 F4 找到 Items 属性。请参考下图。![组合框属性](../Images/e0fb706119224fc4df00960c010974d2.png)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:34:31.413

见[丹回答](https://stackoverflow.com/a/2729310/395659)：

```
var items = new BindingList<KeyValuePair<string, string>>();

items.Add(new KeyValuePair<string, string>("Mpost", "Posted"));
items.Add(new KeyValuePair<string, string>("Call", "Calling"));
items.Add(new KeyValuePair<string, string>("RScan", "Re-Scan"));

myComboBox.DataSource = items;
myComboBox.ValueMember = "Key";
myComboBox.DisplayMember = "Value"; 
```

# php - 从 HTML 文件中获取选定的代码并存储在 PHP 数组中

> ID：14643247
> 
> 赞同：0
> 
> 时间：2013-02-01T09:31:56.317
> 
> 标签：php, javascript, html, curl

我有一个包含 Javascript 代码的 HTML 文件：

```
<SCRIPT language="javascript" type="text/javascript">
var statList = new Array(
0, "192.168.1.179", "88-53-95-28-2B-AF", 194280, 101141053, 0, 0, 0, 0, 0, 0, 0, 0, 
1, "192.168.1.170", "60-C5-47-10-37-FD", 132316, 65860791, 0, 0, 0, 0, 0, 0, 0, 0, 
2, "192.168.1.151", "68-5D-43-21-76-95", 9887, 3898646, 0, 0, 0, 0, 0, 0, 0, 0, 
3, "192.168.1.134", "6C-3E-6D-8C-FF-62", 26405, 7521875, 0, 0, 0, 0, 0, 0, 0, 0, 
4, "192.168.1.124", "04-F7-E4-78-D3-D0", 6189, 1791672, 0, 0, 0, 0, 0, 0, 0, 0, 
5, "192.168.1.121", "60-C5-47-10-40-92", 122657, 91113301, 0, 0, 0, 0, 0, 0, 0, 0);
</SCRIPT> 
```

我想从此文件中获取内容。这是javascript中的一个数组，即“StatList”。我想在一个数组中选择所有 IP 地址，如（192.168.1.179），在另一个 PHP 数组中选择所有 Mac 地址，如（88-53-95-28-2B-AF）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:46:01.593

如果您将 HTML 作为字符串，您可以使用如下正则表达式来抓取它：

```
<?php

    $html = '<SCRIPT language="javascript" type="text/javascript">
    var statList = new Array(
    0, "192.168.1.179", "88-53-95-28-2B-AF", 194280, 101141053, 0, 0, 0, 0, 0, 0, 0, 0, 
    1, "192.168.1.170", "60-C5-47-10-37-FD", 132316, 65860791, 0, 0, 0, 0, 0, 0, 0, 0, 
    2, "192.168.1.151", "68-5D-43-21-76-95", 9887, 3898646, 0, 0, 0, 0, 0, 0, 0, 0, 
    3, "192.168.1.134", "6C-3E-6D-8C-FF-62", 26405, 7521875, 0, 0, 0, 0, 0, 0, 0, 0, 
    4, "192.168.1.124", "04-F7-E4-78-D3-D0", 6189, 1791672, 0, 0, 0, 0, 0, 0, 0, 0, 
    5, "192.168.1.121", "60-C5-47-10-40-92", 122657, 91113301, 0, 0, 0, 0, 0, 0, 0, 0);
    </SCRIPT>';
    $regex = '/\d+,\s+"(?P<ip>[\d\.]+)",\s+"(?P<mac>[\-\dA-F]+)",/';

    $matches = array();
    preg_match_all($regex, $html, $matches);
    echo "<pre>";
    print_r($matches['ip']);
    print_r($matches['mac']);

?> 
```

[工作示例](http://phpfiddle.org/main/code/ksf-mt9)

# linux - 为什么必须在边缘触发的 epoll 函数中使用非阻塞 fd？

> ID：14643249
> 
> 赞同：7
> 
> 时间：2013-02-01T09:32:01.740
> 
> 标签：linux, socket.io, nonblocking, epoll

我在 web 中阅读了文档 about 边缘触发的 epoll 函数，如下所示：

```
1\. The file descriptor that represents the read side of a pipe (rfd) is registered on the epoll instance.
2\. A pipe writer writes 2 kB of data on the write side of the pipe.
3\. A call to epoll_wait(2) is done that will return rfd as a ready file descriptor.
4\. The pipe reader reads 1 kB of data from rfd.
5\. A call to epoll_wait(2) is done.
.......
....... 
```

将 epoll 用作边缘触发 (EPOLLET) 接口的建议方法如下： i) 使用非阻塞文件描述符 ii) 仅在 read(2) 或 write(2) 返回 EAGAIN 后调用 epoll_wait 事件。

我理解了 2，但我不知道为什么要使用非阻塞文件描述符。

谁能解释使用非阻塞文件描述符的原因？为什么在级别触发的 epoll 函数中可以使用阻塞文件描述符？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T09:41:54.110

这个想法是当你有一个边缘触发的通知表明有数据需要时，尝试完全耗尽文件描述符。因此，一旦`epoll()`返回，您将遍历`read()`or`write()`直到`-EAGAIN`没有更多数据时它返回。

如果 fd 被打开阻塞，那么最后一个`read()`or`write()`也将阻塞，并且您将没有机会返回`epoll()`调用等待整个 fd 集。当以非阻塞方式打开时，最后一个`read()`/`write()`确实返回，并且您确实有机会返回轮询。

`epoll()`在以级别触发方式使用时，这不是什么大问题，因为在这种情况下`epoll()`，如果有*任何*数据需要，它将立即返回。所以一个（伪代码）循环，例如：

```
while (1) {
  epoll();
  do_read_write();
} 
```

`do_read_write()`会起作用，因为只要有数据，您就可以保证调用。当使用边缘触发的 epoll 时，如果新数据出现在完成`do_read_write()`和下一次调用`epoll()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T20:12:11.653

我想这是因为边缘触发的语义。根据语义，边缘触发器仅在收到 EAGAIN 后才会引发另一个事件。在阻塞套接字的情况下，没有 EAGAIN。你可以用其他方式定义它，但是 Linux 是这样定义它的。换句话说，如果你使用阻塞套接字，你不知道什么时候可以安全地调用 epoll_wait。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-17T10:56:51.100

epoll 的 ET 模式必须读取所有数据或写入所有数据，因为在 flag 更改后触发了一次 et 模式。当您读取所有数据后，如果您使用块读取或写入，则线程必须挂起。所以必须使用非阻塞。

# google-drive-api - 是否有一些关于高级谷歌驱动器的好电子书/教程？

> ID：14643250
> 
> 赞同：0
> 
> 时间：2013-02-01T09:32:15.813
> 
> 标签：google-drive-api

我试图搜索它，但根本没有找到任何东西。你有什么事情吗？我想要一些高级的东西，比如关于文件夹、脚本性、sdk 等的东西。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T05:22:35.170

所有文档都在[http://developers.google.com/drive](http://developers.google.com/drive)上。它包含有关您提到的所有这些事情的信息。如果您有任何具体问题，请询问他们？

据我所知，没有书。

# c++ - 如何使用客户端套接字绑定

> ID：14643252
> 
> 赞同：1
> 
> 时间：2013-02-01T09:32:24.600
> 
> 标签：c++, sockets, network-programming, winsock

我正在编写一个 Socket 库，但在绑定到特定地址和端口的客户端套接字上遇到了一些问题。我目前正在测试我的 winsock TCP 库，尽管我确信我没有理由在 *nix 上不会遇到同样的问题。到目前为止一切正常（如果我`connect()`没有先打电话，`bind()`我可以`send()`和`recv()`）。

我有一台服务器正在监听 192.168.1.99:XXXX （我的机器地址）。

然后我得到一个套接字并绑定到 192.168.1.99:0。`WSAEADDRNOTAVAIL`我尝试连接时收到套接字错误 10049 ( )。如果我尝试绑定到 0.0.0.0:0，也会发生同样的事情。

如果我尝试绑定到 127.0.0.1:0 或 localhost 或将主机名保留为 NULL（如果这甚至可能，我应该使用 AI_PASSIVE 标志吗？）然后连接我得到一个 10061 ( `WSACONNREFUSED`)。

有人知道在这里做这件事的正确方法吗？

**EDIT3：**原来问题是我在调用bind之前调用了socket，然后在调用connect之前再次调用它。在调用绑定之前，我将其切换为仅调用套接字。我不知道其他人是否对整个概念感到困惑，所以除非有人觉得它应该关闭，否则我会把它留在这里？

**编辑2：**是我两次调用套接字的问题吗？

**编辑：**这是一些功能

```
int main() {
    WSADATA wsaData;   // if this doesn't work

    if(WSAStartup(MAKEWORD(2,0), &wsaData) != 0) {
        cout << WSAStartup failed << endl;
        return -1;
    }

    ClientSocket* cs = new ClientSocket("192.168.1.99", "XXXX");

    cs->bind("", "0"); //error 10049 (WSAEADDRNOTAVAIL)
    //cs->bind("", "60000"); //error 10049 (WSAEADDRNOTAVAIL)

    //cs->bind("0.0.0.0", "0"); //error 10049 (WSAEADDRNOTAVAIL)
    //cs->bind("0.0.0.0", "60000"); //error 10049 (WSAEADDRNOTAVAIL)

    //cs->bind("192.168.1.99", "0"); //error 10061 (WSACONNREFUSED)
    //cs->bind("192.168.1.99", "60000"); //error 10061 (WSACONNREFUSED)

    //cs->bind("127.0.0.1", "0"); //error 10061 (WSACONNREFUSED)
    //cs->bind("127.0.0.1", "60000"); //error 10061 (WSACONNREFUSED)

    //cs->bind("localhost", "0"); //error 10061 (WSACONNREFUSED)
    //cs->bind("localhost", "60000"); //error 10061 (WSACONNREFUSED)

    cs->connect(); //connects to the info passed in ctor

    Socket* s = cs->getSocket();

    if(s == NULL) {
        cs->close();
        return -1;
    }

    .
    .
    .
    .
}

//these are the methods exposed by my API
int ClientSocket::bind(std::string hostname, std::string port) {
    if(bound) {
        return -1;
    }
    if(connected) {
        return -2;
    }

    //this defines what specialSockOp will do
    ssop = &ClientSocket::BaseDef::bind;

    info->hostname = hostname;
    if(hostname.compare("") == 0) {
        info->AI_FLAG_PASSIVE = true;
    }
    info->port = port;

    //calls SpecialSocket::socket()
    socket();

    bound = true;

    return 0;
}

int ClientSocket::connect() {
    if(connected) {
        return SOCKET_ERROR;
        //throw exception
    }
    if(bound) {
        ssop = &ClientSocket::BaseDef::connect;
    }
    socket();
    return 0;
}

void SpecialSocket::WinImp::socket() {
    struct addrinfo *results = NULL, *p = NULL, hints;
    int rv;

    ZeroMemory(&hints, sizeof(hints));
    hints.ai_family = (containerClass->info->ipType == IP_DUAL ? AF_UNSPEC :
        containerClass->info->ipType == IPV6 ? AF_INET6 : AF_INET);
    hints.ai_socktype = (containerClass->info->protocol == TCP ? SOCK_STREAM : 
        SOCK_DGRAM);
    hints.ai_protocol = 0;
    if(containerClass->info->AI_FLAG_PASSIVE) {
        hints.ai_flags |= AI_PASSIVE;
    }
    if(containerClass->info->AI_FLAG_CANONNAME) {
        hints.ai_flags |= AI_CANONNAME;
    }

    //cStringHostname returns NULL if an empty string has been passed in
    if((rv = getaddrinfo(containerClass->info->cStringHostname(),
         containerClass->info->cStringPort(), &hints, &results)) != 0) {
            //throw exception
    }

    for(p = results; p != NULL; p = p->ai_next) {
        if((containerClass->info->sock_fd = ::socket(p->ai_family,
                 p->ai_socktype, p->ai_protocol)) == INVALID_SOCKET) {
            closesocket(containerClass->info->sock_fd);
            continue;
        }

        //for a ClientSocket specialSockOp will call either bind or connect
        //corresponding to the function called by ClientSocket
        if(containerClass->specialSockOp(p->ai_addr) == SOCKET_ERROR) {
            closesocket(containerClass->info->sock_fd);
            continue;
        }

        break; //successfully connected
    }

    if(p == NULL) {
        //none of the connections in results were good
        //throw exception - could not connect
    }

    freeaddrinfo(results);
}

int SpecialSocket::WinImp::bind(const void* addr) {
    struct sockaddr* ai_addr = (struct sockaddr*)addr;

    return ::bind(containerClass->getSockFd(), ai_addr, sizeof(*ai_addr));

}

int ClientSocket::WinImp::connect(const void* addr) {
    struct sockaddr* ai_addr = (struct sockaddr*)addr;

    int result = ::connect(containerClass->getSockFd(), ai_addr, sizeof(*ai_addr));

    if(result == SOCKET_ERROR) {
        //these are where my errors are showing up
        cout << "error after connect() is - " << WSAGetLastError() << endl;
        return SOCKET_ERROR;
    }

    containerClass->servInfo->sock_fd = containerClass->getSockFd();

    //I separated the functionality here - Socket can only send/recv
    containerClass->s = new Socket();
    //I use getpeername here to get information about the remote socket

    //Long story but basically sets up the Socket
    containerClass->initRWSocket(containerClass->s, containerClass->servInfo);

    return result;
} 
```

然后用户可以调用`ClientSocket.getSocket()`它返回一个`Socket`他们然后能够`send/recv`打开的。在我的情况下，这是返回，`NULL`因为`Socket`从未实例化，因为`SpecialSocket::connect`在它执行之前返回。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T20:02:02.797

您必须绑定到能够连接到 connect 的目标地址的有效本地地址，即具有到它的路由。显然在这种情况下：

*   192.168.1.99 不是本地地址，而是远程地址
*   127.0.0.1 是本地地址，但您只能从它访问 127.0.0.1，不能访问任何远程地址
*   0.0.0.0 是监听套接字的有效绑定地址，但不是活动（出站）套接字。

这是绑定活动套接字是一个坏主意的几个原因之一：在多宿主主机中，您必须遍历本地地址以选择合适的地址，即复制 TCP 会自动为您执行的路由，如果您没有t 根本不做 bind()。

您在编辑中给出的解释与您遇到的错误不符。

# iphone - 扫描 NSMutableArray 以查找字符串的一部分

> ID：14643254
> 
> 赞同：0
> 
> 时间：2013-02-01T09:32:38.070
> 
> 标签：iphone, ios, objective-c, nsmutablearray

我是 iphone 编程新手，我有点坚持我目前的项目。我得到了一个包含大量数据的文本文件。数据排序如下：

```
51398030 10003254 80211593/94     1301281744 TOMTOM100  
51398030 10003254 80211593/94     1301281744 TOMTOM101  
51398030 10003254 80211593/94     1301281745 TOMTOM102  
51398030 10003254 80211593/94     1301281745 TOMTOM103  
51398033 10003254 80211595        1301281744 TOMTOM100  
51398033 10003254 80211595        1301281744 TOMTOM101  
51398033 10003254 80211595        1301281745 TOMTOM102  
51398033 10003254 80211595        1301281745 TOMTOM103  
51398029 10003254 80211597/98     1301281744 TOMTOM100  
51398029 10003254 80211597/98     1301281744 TOMTOM101  
51398029 10003254 80211597/98     1301281745 TOMTOM102  
51398029 10003254 80211597/98     1301281745 TOMTOM103 
```

我已经导入了这个 txt 文件并创建了一个包含每一行作为对象的 NSMutableArray。现在我有一个文本字段，用户可以在其中输入一个数字。应用程序现在应该通过文本文件查看并整理出包含此数字的行。

我已经看过[https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Strings/Articles/Scanners.html#//apple_ref/doc/uid/20000147-BCIEFGHC](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Strings/Articles/Scanners.html#//apple_ref/doc/uid/20000147-BCIEFGHC)

但我不知道如何开始。

这是我走了多远：

```
 NSData *tmpData = [NSData dataWithContentsOfURL:[NSURL       URLWithString:trackTraceFileUrlName] ];
    NSLog(@"%@",trackTraceFileUrlName);
    //convert data to string 
    NSString *tmpString = [[NSString alloc] initWithData:tmpData              encoding:NSUTF8StringEncoding];
    NSArray *piecesArray = [tmpString componentsSeparatedByString:@"\n"];
    NSMutableArray *trackTraceContent = [NSMutableArray arrayWithArray:piecesArray];
    NSLog(@"*%@*",trackTraceContent); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:41:25.157

试试下面的代码

```
NSString *str = <string on which you want to search>;

    NSRange r;
    if ((r = [str rangeOfString:@"the string you want to search"]).location != NSNotFound)
        //string found.. 
```

我认为您有一个数组，因此请尝试修改后的数组

```
for (NSString *str in <array>)
{
    NSRange r;
    if ((r = [str rangeOfString:@"the string you want to search"]).location != NSNotFound)
        //string found..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:45:39.853

由于您可能想要搜索数组中的所有行，并假设您的数组仅包含字符串作为 NSString 对象：

```
NSArray *stringArray; // assuming that you already have these variables
NSString *numberEnteredByUser;
NSPredicate *pred = [NSPredicate predicateWithBlock:^(id obj, NSDictionary *bindings) {
    NSString *str = (NSString *)obj;
    return [str rangeOfString:numberEnteredByUser].location != NSNotFound;
}];
NSArray *results = [stringArray filteredArrayUsingPredicate:pred]; 
```

当然，您也可以在不使用 NSPredicate 的情况下创建目标数组，只需迭代`stringArray`并将正确的对象添加到 NSMutableArray 即可`results`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:36:30.153

如果用户输入的数字是对您的数据的主要搜索，**并且它是唯一的**，那么将您的数据保存在字典中，而不是数组中，使用*数字*作为键：

```
NSMutableDictionary *dictionary = [[NSMutableDictionary alloc] init];
MyObject obj = ...;
[dictionary setObject:obj forKey:obj.number];
// etc. 
```

查找会**快得多**，因为这正是字典（哈希表）的用途。

注意：Objective-C 集合类只能保存对象，因此您需要使用对象而不是原始类型来表示*数字。*`NSNumber`

如果*数字*不是**唯一的**，那么您仍然可以使用这种技术，但是您需要保存一个数组字典，使用*数字*作为该数组的键，这会使事情变得有些复杂。但是，这样做您仍然可以获得性能优势。

# sql - 在单个查询中查找已读和未读消息的计数

> ID：14643257
> 
> 赞同：3
> 
> 时间：2013-02-01T09:32:57.547
> 
> 标签：sql, sql-server

我`Messages`在 SQL Server 2012 中有一个表。`three columns`表中有

```
ID which is an identity column, 
MessageID (int) which is a foreign key to other table and 
IsRead field which is a bit not null column. 
```

在给定的时间点，表可以包含大量具有`IsRead`列值的记录`1 or 0`。我想编写一个查询，在其中我在两个单独的列中找到已读和未读消息的计数。我正在尝试使用 SQL Server 2012 中引入的新 windows 功能来提高效率。我该怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T09:36:02.973

请检查这是否有帮助。

```
SELECT 
    IsRead, 
    COUNT(*) ReadCount 
FROM 
    YourTable 
GROUP BY IsRead 
```

或者您可以在两列中进行选择，例如：

```
SELECT  SUM(IsRead - 0) AS ReadCount,
        SUM(1 - IsRead) AS UnreadCount
FROM    YourTable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T09:38:03.643

```
SELECT  COUNT(CASE WHEN isRead = 1 THEN 1 END) AS read,
        COUNT(CASE WHEN isRead = 0 THEN 1 END) AS unread
FROM    mytable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T09:51:23.453

**@Quassnoi**提到的查询很简单......

这里还有另一种方法，你可以得到你的解决方案

```
SELECT (SELECT COUNT(isRead) FROM [mytable] WHERE isRead = 1) AS READDATA,
(SELECT COUNT(isRead) FROM [mytable] WHERE isRead = 0) AS UNREADDATA 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-01T09:35:42.540

选择 IsRead, count(*) from Messages Group by IsRead 但输出将是 2 行。

# php - zip 文件无法在 Mac OS 中打开

> ID：14643258
> 
> 赞同：0
> 
> 时间：2013-02-01T09:32:57.483
> 
> 标签：php, zip

在这里，我使用 PHP ZipArchive 让网站用户将一个 pdf 文件和一些文件夹组合成一个 zip 文件，然后下载它们。它在我正在运行它的 Windows、linux 计算机上完美运行。但是如果我使用我的 Mac 下载文件，文件将不会解压缩，双击会创建一个 cpgz 文件。

请问如何在MAC上解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:35:10.053

尝试从命令行解压缩它们。打开终端，导航到 zip 所在的文件夹，然后键入`unzip <zip_file>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:37:33.833

您可以使用[The Unarchiver](http://wakaba.c3.cx/s/apps/unarchiver.html)在 Mac 上解压缩 zip 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:52:42.410

如果你压缩它，那么显然你需要使用一些 3rd 方解压缩器来解压缩它。我之前在 Mac 上遇到过类似的问题。安装解压缩器后问题就解决了。Mac 默认没有这个问题。

# python - 将 OpenERP 与 Postgresql 同步？

> ID：14643259
> 
> 赞同：-1
> 
> 时间：2013-02-01T09:33:03.713
> 
> 标签：python, sql, postgresql, openerp

我直接在数据库上做了这个查询：

```
UPDATE product_template SET track_external_partners=True
WHERE name !~* 'BOX' 
```

因此，在此查询之后，它使用给定条件更新了该字段。如果我写查询如果 track_external_partners=True，它会给我想要的结果。

但是如果我连接到 openerp（连接到同一个数据库）并进入 product_templates，这里没有任何改变，看起来该命令由于某种原因没有影响 OpenERP？

每次进行此类更新时都需要某种同步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:00:29.277

发现了什么问题。我们有两个同名的数据库（在不同的端口上）。所以我连接到使用默认端口（5432）的旧数据库，但我们的新数据库使用端口 5433，所以我需要像这样指定端口：

```
psql dbname -p 5433 
```

现在一切都很好。

# android - 在启动画面之后，出现一个白色的空白屏幕，然后加载 webview

> ID：14643264
> 
> 赞同：2
> 
> 时间：2013-02-01T09:33:15.910
> 
> 标签：android, android-webview, splash-screen

在我的应用程序中，有两个活动。第一个是 Splashscreen，第二个是 Webview 活动。启动画面显示后，我想显示我的 webview 活动。但是在启动画面之后，2-3 秒出现一个空白的白色屏幕，然后加载 webview 活动。关于如何忽略这个白色屏幕的任何想法。我在许多帖子中研究了这个问题的解决方案，但没有成功。任何帮助将不胜感激。

添加代码：闪屏活动：

```
@Override
protected void onStart() {
    super.onStart();
    new Handler().postDelayed(new Runnable() {

        @Override
        public void run() {
            finish();
            startActivity(new Intent(SplashScreen.this,
                    WebViewActivity.class));
        }
    }, DELAY);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:33:48.030

**工作代码**

```
public class WebActivity extends Activity {

protected boolean _active = true;

protected int _splashTime = 3000;

Thread splashTread;

private boolean stop = false;

/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_web);

    splashTread = new Thread() {
        @Override
        public void run() {
            try {
                int waited = 0;
                while(_active && (waited < _splashTime)) {
                    sleep(100);
                    if(_active) {
                        waited += 100;
                    }
                }

            } catch(InterruptedException e) {
                // do nothing
            } finally {

                if(!stop){
                    startActivity(new Intent(WebActivity.this,Home.class));
                    finish();
                }
                else
                    finish();
            }
        }

    };
    splashTread.start();

}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {

        if(splashTread.isAlive())
            this.stop = true;
    }
    return true;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T09:05:32.197

创建两个类文件，如 WebActivity.java、home.java。

**WebActivity.java**

```
 Handler handler = new Handler();

    // run a thread after 2 seconds to start the home screen
    handler.postDelayed(new Runnable() {

        @Override
        public void run() {

            // make sure we close the splash screen so the user won't come
            // back when it presses back key

            finish();
            // start the home screen

            ProgressDialog pd = new ProgressDialog(WebActivity.this);

            //use this before calling intent
                          pd.setMessage("Processing...");

            pd.show();

            Intent intent = new Intent(WebActivity.this, Home.class);

            WebActivity.this.startActivity(intent);

        }

    }, 2000); // time in milliseconds (1 second = 1000 milliseconds) until the run() method will be called 
```

**主页.java**

```
 webview=(WebView)findViewById(R.id.webView1);
webview.setWebViewClient(new myWebClient());

webview.loadUrl("http://www.google.com");}

 public class myWebClient extends WebViewClient

 {

     @Override

        public boolean shouldOverrideUrlLoading(WebView view, String url) {

            // TODO Auto-generated method stub

            view.loadUrl(url);

            return true;

        }
 } 
```

**安卓清单**

只需添加活动类并设置互联网权限即可加载 webview

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:44:48.503

完成启动画面后，网页加载需要一些时间。这就是为什么您会看到出现空白屏幕的原因。一旦 web 视图开始加载进度条。试试这个链接。这将对您有所帮助。 [http://www.technotalkative.com/android-load-webview-with-progressbar/](http://www.technotalkative.com/android-load-webview-with-progressbar/)

# excel - 简单的 Excel SUMIF 不起作用？

> ID：14643268
> 
> 赞同：-1
> 
> 时间：2013-02-01T09:33:51.693
> 
> 标签：excel, formula

似乎太基本了。但是在网上花了很长时间之后，我看不出问题出在哪里......我有两列，O 和 S，有一些数值。只有当 O 列中的数据大于“-9999”时，我才想在 S 列中添加值。现在，公式应该是：

=SUMIF(O2:O23, ">-9999", S2:S23)

但是 Excel (Mac 2011) 告诉我这是错误的。问题出在哪里？

感谢您的任何提示！

编辑：[这](http://www.pic-upload.de/view-17952745/Screen-Shot-2013-02-01-at-10.54.25.png.html)是一个截图。这里是 Excel 文件[。](http://geodev.grid.unep.ch/download/GEO_Data_Portal__gdp_ppp__1359710118.xls)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:06:07.237

根据我的评论，您可能需要用分号替换公式中的逗号，即

`=SUMIF(O2:O23; ">-9999"; S2:S23)`

公式中使用的“分隔符”根据区域设置而变化 - 英国和美国使用逗号，欧洲大陆通常使用分号

# ios - 核心数据故障对象

> ID：14643271
> 
> 赞同：0
> 
> 时间：2013-02-01T09:34:01.193
> 
> 标签：ios, objective-c, core-data

我在我的项目中使用核心数据。

我遇到了一个问题，当我在代码中访问错误对象的关系后，它们的关系没有出错。

我的问题：是否有可能，该故障关系在访问它后仍然存在故障。

更新：

```
NSManagedObjectContext *context = self.context;

if (!context)
return nil;

    NSFetchRequest *request = NSFetchRequest.new;
request.entity = [NSEntityDescription entityForName:name inManagedObjectContext:context]; 
    request.predicate = predicate;

    if (sortDescriptors)
        [request setSortDescriptors:sortDescriptors];

    return [context executeFetchRequest:request error:nil]; 
```

context - 是主线程上的默认上下文。我在主线程上访问对象的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:44:24.867

不确定问题是什么/您想要实现什么。如果您的 fetch 请求返回错误而不是对象，请执行

```
request.returnsObjectsAsFaults = NO; 
```

如果您还希望获取获取的对象的某些属性/关系也被获取/不是错误，请执行

```
[request setRelationshipKeyPathsForPrefetching:@[@"someProperty1",@"someOtherPropertyInEntity"]]; 
```

最后一个有时会极大地帮助提高性能。

# c# - Visual Studio 2010 (C#)：乘法时 * 前后空白

> ID：14643273
> 
> 赞同：1
> 
> 时间：2013-02-01T09:34:06.003
> 
> 标签：c#, visual-studio-2010, formatting, settings, code-formatting

在编写 C# 时，我注意到 Visual Studio 2010 中有一个奇怪的行为。当我输入

```
var x = 2 * 5 
```

然后输入';' VS 将行更改为

```
var x = 2*5; 
```

所以它删除了空白。另一方面，如果我在该行中执行 CTRL+X 和 CTRL+V ，则会再次插入空白；

```
var x = 2 * 5; 
```

这在使用 SVN 之类的工具时非常烦人，因为它使跟踪代码中的**实际**更改变得更加困难。我在看

工具->选项->文本编辑器->C#->格式化->间距

但找不到合适的。你们中有人知道如何统一行为吗？

谢谢，

亨德里克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T09:38:04.197

在菜单中：

`Tools`> `Options`> `Text Editor`> `C#`> `Formatting`>`Spacing`

转到`Set spacing for operators`并选择`Insert space before and after binary operators`

![在此处输入图像描述](../Images/49bffb6d43f4903052bf46c181252b99.png)

此外，如果您使用[ReSharper](http://www.jetbrains.com/resharper/)之类的扩展，请确保它们的配置方式与 Visual Studio 本身相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:40:05.270

![在此处输入图像描述](../Images/12513c0f5ee49f1db9fddc4d28339674.png)

这是德文版本...但英文版：

工具->选项->文本编辑器->C#->格式化->间距

并为“设置运算符间距”设置第一个选项。

# java - 如何记录某些测试用例故意失败？

> ID：14643277
> 
> 赞同：2
> 
> 时间：2013-02-01T09:34:17.100
> 
> 标签：java, testing, junit, documentation

我目前正在调查我们遇到的 JPA 问题。针对这个问题，我想到了两种可能的解决方案。我编写了一组单元测试来展示每个解决方案如何解决问题。在测试每个解决方案期间，我发现其中一个不起作用。

现在我想记录一下**为什么**那个特定的解决方案不能完成这项工作。我可以重写我目前拥有的单元测试，以期待异常。然而，例外只是该解决方案潜在问题的症状。所以我创建了一个新的单元测试，清楚地表明了该解决方案与 JPA 规范冲突的地方。但是，我想保留那些其他失败的测试作为此类解决方案可能出现的症状的文档。所以我可以禁用它们并将 javadoc 放在它们上面，说它们是由于那个特定的测试用例而被禁用的。

请注意，我不想有一个失败的测试用例。否则我也可以使用[假设](https://github.com/junit-team/junit.contrib/tree/master/assumes)。

有没有其他方法可以记录不需要执行的许多测试，因为它们会由于另一个记录真正问题成功的测试而失败？

我的解决方案仅限于使用 junit。

**编辑：**
关于到目前为止的评论和答案，我更喜欢类别，因为如果有人希望执行测试，测试仍然可以执行而无需任何更改。我仍然关心的是代表问题症状的测试与真正原因的更强关联。这目前只是从症状测试到真正原因测试的 javadoc 链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:30:34.153

使用[@Ignore](https://github.com/KentBeck/junit/blob/master/src/main/java/org/junit/Ignore.java)，并带有一条消息：

```
@Test
@Ignore("This fails because of a problem with the specification")
public void testWhichFails() {
} 
```

此测试不会运行，您也会知道原因。

# python - 如何在 python 中以兼容 pgcrypto 的方式加密

> ID：14643282
> 
> 赞同：4
> 
> 时间：2013-02-01T09:34:30.917
> 
> 标签：python, postgresql, public-key-encryption, gnupg, pgcrypto

对于我正在从事的项目，我想在 python 中使用与 pgcrypto 兼容的加密。并具体公开密钥加密部分。

我遇到的问题是，大多数（所有）实现都使用类似子进程的方法来分叉 gpg，因为我必须加密大量数据（每个会话 50.000 多个条目），这种方法对我不起作用。

有人可以给我一些指示如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T09:43:44.700

看看 PyCrypto，它似乎没有使用分叉。pgcrypto 可以配置为适合大多数加密配置。

# .htaccess - 如何将 index.php?a=1 重写为 .htaccess 中的 a/1？

> ID：14643285
> 
> 赞同：0
> 
> 时间：2013-02-01T09:34:41.333
> 
> 标签：.htaccess

如何为 [http://www.laji.com/index.php?a=1](http://www.laji.com/index.php?a=1)编写规则 可以访问[http://www.laji.com/a/1](http://www.laji.com/a/1)

我已将 127.0.0.1 www.laji.com 添加到 hosts.etc 并在 httpd.conf
[http://www.laji.com/](http://www.laji.com/) == 'd:\phpnow\htdocs\laji'中设置了一些

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:12:10.467

您可以尝试以下方法：

```
RewriteEngine On
RewriteRule ^(/)?([^/]+)/([^/]+)(/)?$ index.php?$2=$3 
```

正则表达式中的每个括号都可以与`$N`反向引用一起使用，其中 N 是从左侧算起的括号数，如匹配正则表达式中一样。

此外，您可以在括号中更严格 - 只接受第一个参数中的字母和第二个参数中的数字 - 或者在`index.php`

# java - 更改 servlet 标头并重定向到过滤器中的其他 url

> ID：14643287
> 
> 赞同：2
> 
> 时间：2013-02-01T09:34:53.203
> 
> 标签：java, http, servlets, http-headers

我对 servlet 很陌生，我希望执行以下操作。

我在我的地方设置了一个过滤器：

```
void doFilter( ServletRequest request, 
               ServletResponse response, 
               FilterChain chain ) throws IOException, ServletException 
{
} 
```

当某些 url 与模式匹配时，将调用这些过滤器。

在这个方法中，我希望这样做：

1.  `request`通过放置我知道的身份验证密钥来更改传入的标头

2.  并使用该身份验证标头将其重定向`request`到其他 url，`www.test.com`以便该特定请求的响应将是`www.test.com`

有可能这样做吗？

我试过这些：

```
response.setHeader("WWW-Authenticate","Basic MyKey")
response.setHeader("Location","www.google.com") 
```

但是在这之后我该怎么办？如何将页面重定向到 google.com？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T01:50:37.713

（幸运的是）这是不可能的。如果您可以作为 Web 服务器控制 Web 客户端向任意域发出的 HTTP 请求的标头，那将是一个巨大的安全漏洞。这将使网络钓鱼变得非常容易。

为了实现您的需求，您最好的选择是充当代理。使用例如以编程方式创建并触发 HTTP 请求`URLConnection`，并将其响应通过管道传输到 servlet 响应。但是请注意，浏览器地址栏中的 URL 仍然是您的 Web 服务器的 URL。

这是一个使用的启动示例`URLConnection`：

```
URLConnection connection = new URL("http://other.com").openConnection();
// Set headers if necessary via setRequestProperty().

InputStream input = connection.getInputStream();
OutputStream output = response.getOutputStream();
// Copy response body from input to output. 
```

# php - phpmyadmin #2054 无法登录mysql服务器

> ID：14643288
> 
> 赞同：0
> 
> 时间：2013-02-01T09:34:56.223
> 
> 标签：php, mysql, apache, phpmyadmin

我是 MySQL、Apache、PHP 和 phpMyAdmin 的新手。我构建的第一台服务器是在 Windows Vista x32bit 上，它很成功。然后，我尝试在另一台笔记本电脑上构建第二台服务器，它是 Windows 7 x64bit，它卡在错误代码 #2054 中。我使用具有固定 IP 地址的“localhost”。我从 .msi 文件单独安装了服务器，而不是包安装程序。

输入“root”和“密码”后，点击“Go”，弹出两条错误消息，一条是“#2054 无法登录 MySQL 服务器”，另一条是“Connection for controluser as defined in您的配置失败。”

我在网上搜索了很多资源，但运气不好。

我该如何解决这两个错误？

任何有用的信息。提前致谢。

下面是我的 config.inc.php：

```
enter code here <?php
/* vim: set expandtab sw=4 ts=4 sts=4: */
/**
 * phpMyAdmin sample configuration, you can use it as base for
 * manual configuration. For easier setup you can use setup/
 *
 * All directives are explained in Documentation.html and on phpMyAdmin
 * wiki <http://wiki.phpmyadmin.net>.
 *
 * @package PhpMyAdmin
 */

 /*
  * This is needed for cookie based authentication to encrypt password in
  * cookie
  */
 $cfg['blowfish_secret'] = 'a8b7c6d'; /* YOU MUST FILL IN THIS FOR COOKIE AUTH! */

 /*
  * Servers configuration
  */
 $i = 0;

 /*
  * First server
  */
 $i++;
/* Authentication type */
$cfg['Servers'][$i]['auth_type'] = 'cookie';
/* Server parameters */
$cfg['Servers'][$i]['host'] = 'localhost';
$cfg['Servers'][$i]['connect_type'] = 'tcp';
$cfg['Servers'][$i]['compress'] = false;
/* Select mysql if your server does not have mysqli */
$cfg['Servers'][$i]['extension'] = 'mysqli';
$cfg['Servers'][$i]['AllowNoPassword'] = false;

/*
 * phpMyAdmin configuration storage settings.
 */

/* User used to manipulate with storage */
// $cfg['Servers'][$i]['controlhost'] = '';
$cfg['Servers'][$i]['controluser'] = 'phpmyadmin';
$cfg['Servers'][$i]['controlpass'] = 'johan1234';

/* Storage database and tables */
$cfg['Servers'][$i]['pmadb'] = 'phpmyadmin';
$cfg['Servers'][$i]['bookmarktable'] = 'pma_bookmark';
$cfg['Servers'][$i]['relation'] = 'pma_relation';
$cfg['Servers'][$i]['table_info'] = 'pma_table_info';
$cfg['Servers'][$i]['table_coords'] = 'pma_table_coords';
$cfg['Servers'][$i]['pdf_pages'] = 'pma_pdf_pages';
$cfg['Servers'][$i]['column_info'] = 'pma_column_info';
$cfg['Servers'][$i]['history'] = 'pma_history';
$cfg['Servers'][$i]['table_uiprefs'] = 'pma_table_uiprefs';
$cfg['Servers'][$i]['tracking'] = 'pma_tracking';
$cfg['Servers'][$i]['designer_coords'] = 'pma_designer_coords';
$cfg['Servers'][$i]['userconfig'] = 'pma_userconfig';
$cfg['Servers'][$i]['recent'] = 'pma_recent';
/* Contrib / Swekey authentication */
// $cfg['Servers'][$i]['auth_swekey_config'] = '/etc/swekey-pma.conf';

/*
 * End of servers configuration
 */

/*
 * Directories for saving/loading files from server
 */
$cfg['UploadDir'] = '';
$cfg['SaveDir'] = '';

/**
 * Defines whether a user should be displayed a "show all (records)"
 * button in browse mode or not.
 * default = false
 */
//$cfg['ShowAll'] = true;

/**
 * Number of rows displayed when browsing a result set. If the result
 * set contains more rows, "Previous" and "Next".
 * default = 30
 */
//$cfg['MaxRows'] = 50;

/**
 * Use graphically less intense menu tabs
 * default = false
 */
//$cfg['LightTabs'] = true;

/**
 * disallow editing of binary fields
 * valid values are:
 *   false  allow editing
 *   'blob' allow editing except for BLOB fields
 *   'all'  disallow editing
 * default = blob
 */
//$cfg['ProtectBinary'] = 'false';

/**
 * Default language to use, if not browser-defined or user-defined
 * (you find all languages in the locale folder)
 * uncomment the desired line:
 * default = 'en'
 */
//$cfg['DefaultLang'] = 'en';
//$cfg['DefaultLang'] = 'de';

/**
 * default display direction (horizontal|vertical|horizontalflipped)
 */
//$cfg['DefaultDisplay'] = 'vertical';

/**
 * How many columns should be used for table display of a database?
 * (a value larger than 1 results in some information being hidden)
 * default = 1
 */
//$cfg['PropertiesNumColumns'] = 2;

/**
 * Set to true if you want DB-based query history.If false, this utilizes
 * JS-routines to display query history (lost by window close)
 *
 * This requires configuration storage enabled, see above.
 * default = false
 */
//$cfg['QueryHistoryDB'] = true;

/**
 * When using DB-based query history, how many entries should be kept?
 *
 * default = 25
 */
//$cfg['QueryHistoryMax'] = 100;

/*
 * You can find more configuration options in Documentation.html
 * or here: http://wiki.phpmyadmin.net/pma/Config
 */
?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T09:52:34.347

尝试在 phpmyadmin/config.inc.php 中设置主机属性：

```
$cfg['Servers'][$i]['host'] = '127.0.0.1'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T18:51:04.247

我找到了。我找到了自己问题的答案。链接在这里：

[MySQL PHP 不兼容](https://stackoverflow.com/questions/1340488/mysql-php-incompatibility)

由马特回答，他写道：

> 我一直在尝试找到解决此问题的简单方法。试试这个方法。在 MySQL 类型中

```
SELECT Host, User, Password FROM mysql.user; 
```

> 如果您的密码是 16 个字符，这是因为您在用户的密码上使用了 OLD_PASSWORD 或运行的是旧版本的 MySQL。更新输入

```
UPDATE mysql.user SET Password=PASSWORD('newpass')
  WHERE User='root' AND Host='localhost';
FLUSH PRIVILEGES; 
```

> 分别为您的用户、主机和密码交换 root、localhost 和 newpass。现在当你重新输入

```
SELECT Host, User, Password FROM mysql.user; 
```

> 您的密码应该已更改。这为我修好了。

# javascript - 在 datepicker 中启用一天作为工作日

> ID：14643291
> 
> 赞同：0
> 
> 时间：2013-02-01T09:35:08.713
> 
> 标签：javascript, jquery, datepicker

以下是日期选择器代码。此处周日和周六被禁用。我尝试了很多来启用周日。要进行哪些更改以仅将周日启用为工作日。

```
<script>
      (function ($) {
    var disabledDays = ["5-28-2012","7-4-2012","7-5-2012","7-6-2012","9-3-2012","9-17-2012","9-26-2012","11-22-2012","11-23-2012","12-25-2012","1-1-2013"];
    function nationalDays(date) {
      var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();
      for (i = 0; i < disabledDays.length; i++) {
        if($.inArray((m+1) + '-' + d + '-' + y,disabledDays) != -1) {
          return [false];
        }
      }
      return [true];
    }
    function noWeekendsOrHolidays(date) {
      var noWeekend = jQuery.datepicker.noWeekends(date);
      return noWeekend[0] ? nationalDays(date) : noWeekend;
    }
    var fourWorkingDays = new Date();
    var adjustments = [0, 0, 2, 2, 2, 2, 1];
    fourWorkingDays.setDate(fourWorkingDays.getDate() + 1 + adjustments[fourWorkingDays.getDay()]);
    jQuery(document).ready(function() {
      jQuery('#cf3_field_10').datepicker({
        minDate: 0,
       //maxDate: new Date(2011, 11, 31),
        dateFormat: 'DD, MM, d, yy',
        constrainInput: true,
        beforeShowDay: noWeekendsOrHolidays
      });
      jQuery('#cf3_field_11').timepicker({
            showPeriod: true,
            onHourShow: OnHourShowCallback,
            onMinuteShow: OnMinuteShowCallback
    });
    function OnHourShowCallback(hour) {
        if ((hour > 18) || (hour < 9)) {
            return false; // not valid
        }
        return true; // valid
    }
    function OnMinuteShowCallback(hour, minute) {
        if ((hour == 18) && (minute >= 0)) { return false; } // not valid
        if ((hour == 9) && (minute < 30)) { return false; }   // not valid
        return true;  // valid
    }
    });
    })(jQuery);
      </script> 
```

我只想启用星期天作为已经禁用的工作日检查[www.jbediamonds.com/form.php](http://www.jbediamonds.com/form.php)，日期部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:54:24.730

您可以尝试向您的**js**添加一些日期选择属性，如下所示：

```
selectable_days: [0, 1, 2, 3, 4, 5, 6],
  non_selectable: [],
  rec_non_selectable: [],
  start_of_week: 1,
  show_week: 0,
  select_week: 0,
  week_label: "",
  date_min: "",
  date_max: "", 
```

或最简单的方法 - 使用另一个 jQuery DatePicker。

[这](http://jdpicker.paulds.fr/?)很容易实现，也很容易改变属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:58:15.723

这是日期选择器的文本框

```
<input id="txtDate" type="text" /> 
```

这是函数调用者：

```
 $(function () {
    $('#txtDate').datepicker({
        beforeShowDay: disabledays
    });
}); 
```

这是启用禁用功能：

```
 var unavailableDates = ["2013-3-31", "2013-3-24"];

function disabledays(date) {
    var ymd = date.getFullYear() + "-" + (date.getMonth() + 1) + "-" + date.getDate();
    if ($.inArray(ymd, unavailableDates) >= 0) {
        return [false, "", "Unavailable"];
    } else {
        //Show only sundays and thuersdays
        var day = date.getDay();
        return [(day == 0 || day == 1 || day == 4)]; // add here date you want to enable
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:57:37.803

您正在使用`jQuery.datepicker.noWeekends(date)`它将禁用周六和周日。

在这里查看如何仅禁用某些日期：[jquery ui date picker limit to Sundays](https://stackoverflow.com/questions/6154916/jquery-ui-date-picker-limit-to-sundays)

# c++ - Qt5 如何将 qDebug() 语句重定向到 Qt Creator 2.6 控制台

> ID：14643293
> 
> 赞同：13
> 
> 时间：2013-02-01T09:35:12.400
> 
> 标签：c++, qt, console, qt-creator, stderr

在搜索了 qDebug() 语句与 Qt 的标准消息处理程序一起工作但在我切换到自己的消息处理程序时失败的原因之后，我在这里呼吁看看是否有其他人对这个问题有任何经验。

我知道/尝试过的事情，什么都没做......

1)`CONFIG += console`

2)`DEFINES -= QT_NO_WARNING_OUTPUT QT_NO_DEBUG_OUTPUT`

3)`::fprintf(stderr, "ERROR\n"); ::fflush(stderr);`

4)`::fprintf(stdout, "OUTPUT\n"); ::fflush(stdout);`

5)`std::cerr << "CERROR" << std::endl; std::cerr.flush();`

但是，当使用内置处理程序时它可以正常工作（即，它将消息打印到 QtCreator 控制台）

```
int main(int argc, char *argv[]) {
    // Use my handler
    qInstallMessageHandler(MyCustomLogger);
    qDebug() << "Not Printed";

    // Use standard handler
    qInstallMessageHandler(0);
    qDebug() << "Correctly Printed";

    // Use my handler again
    qInstallMessageHandler(MyCustomLogger);
    qDebug() << "Not Printed Again...";
} 
```

最近的测试是使用 WinAPI 命令为自己分配一个控制台，这导致正确的行为所有输出到 stderr 和 stdout 在我创建的控制台上可见。但是，这不是我想要的行为，我希望能够在 QtCreator 中查看此输出。

关于标准消息处理程序如何打印到调试器的任何想法？我还没有设法在 Qt 源代码中找到它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-03T13:13:32.513

正如弗兰克奥斯特菲尔德在他的评论中提到的那样：

> 在 Windows 上，qDebug() 使用调试通道，而不是标准错误。

在深入研究 QDebug 代码和 QMessageLogger 之后，我找到了答案。方便的 WinAPI 函数`OutputDebugString`。

用法（修改自 peppe's）：

```
#include <QApplication>
#include <QtDebug>
#include <QtGlobal>

#include <stdio.h>
#include <stdlib.h>
#include <Windows.h>

void MyMessageOutput(QtMsgType Type, const QMessageLogContext& Context, const QString &Message)
{
    OutputDebugString(reinterpret_cast<const wchar_t *>(Message.utf16()));
}

int main(int argc, char **argv)
{
    // A GUI application
    QApplication app(argc, argv);

    // Custom handler
    qInstallMessageHandler(myMessageOutput);
    qDebug() << "Printed in the console using my message handler in a windows GUI application";

    // Default handler
    qInstallMessageHandler(0);
    qDebug() << "Also printed in the console!";

    // Show GUI here
    //MainForm *MF = new MainForm();
    //MF->show();

    return app.exec();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T09:54:48.547

我无法重现您的问题：这对我来说是正确的。

```
#include <QCoreApplication>
#include <QtDebug>
#include <QtGlobal>

#include <stdio.h>
#include <stdlib.h>

void myMessageOutput(QtMsgType type, const QMessageLogContext &context, const QString &msg)
{
    QByteArray localMsg = msg.toLocal8Bit();
    fprintf(stderr, "MESSAGE (%s:%u %s): %s\n", context.file, context.line, context.function, localMsg.constData());
    fflush(stderr);
}

int main(int argc, char **argv)
{
    QCoreApplication app(argc, argv);
    qInstallMessageHandler(myMessageOutput);
    qDebug() << "Printed in the console";
    qInstallMessageHandler(0);
    qDebug() << "Also printed in the console";
    return app.exec();
} 
```

# curl - 如何读取在 http 响应中发送的 GZip 内容

> ID：14643294
> 
> 赞同：0
> 
> 时间：2013-02-01T09:35:12.910
> 
> 标签：curl, gzip, attachment, content-disposition, libcurl.net

我已经尝试了一个多星期，以便能够阅读在 Http Respose 中发送的 gzip 压缩内容。

好的，让我更具体一点 - Web 服务器发送一个包含 Content-Disposition 标头和附件属性的响应，如下所示，

内容处置：附件，文件名=00011122.txt

我可以保存所有收到的“响应标题”，但是无法保存发送的 .txt 文件。此外，在收到所有标题后，我还收到了一些乱码，我假设是 .txt 文件。

但我完全不知道如何保存这个文件并解压缩它并将内容作为任何其他文本文件查看。

我搜索了互联网并尝试了很多东西，但似乎没有任何帮助。

我使用 cURL - libcurl.net、C# 作为我的编程语言。

任何帮助、建议、反馈将不胜感激。

问候，杰伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T02:36:02.790

该支持尚未添加到 cURL。见：[http ://curl.haxx.se/mail/tracker-2007-12/0008.html](http://curl.haxx.se/mail/tracker-2007-12/0008.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:55:12.043

我希望它像你提到的那样简单。不幸的是，这不是那么容易做到的。特别是当内容被 gzip 压缩时。

我在互联网上遇到了很多从响应中保存数据的示例。但是，没有一个示例显示如何保存作为 Content-Dispositon 标头的一部分发送的数据，尤其是在内容被 gzip 压缩时。

如果你知道怎么做，请告诉我。

问候，杰伊

# android - 在活动中保存实例布局

> ID：14643299
> 
> 赞同：0
> 
> 时间：2013-02-01T09:35:31.957
> 
> 标签：android, android-layout

我如何实现将在三个或四个活动中使用的部分布局，但我想保存这个布局。我的意思是在第一个布局中我将按钮添加到我的部分，在第二个活动中我将看到我的部分带有按钮。在第二个活动中，我添加了第二个按钮，在第三个活动中，我想查看两个按钮等。我想在代码中添加这个按钮，而不是在 xml 中。如何为所有活动做一个实例布局，以保留以前活动中添加的所有更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:20:15.600

理论上，您可以创建所有可用按钮的布局（如果它们只有几个），并`android:visibility="gone"`在 xml 中隐藏可选择的按钮。稍后，您将跟踪内部 Object 或 ArrayList 中的选择，并更改每个后续 Activity`onCreate`或中选定按钮的可见性`onResume`。

另一种解决方案是创建一个带有额外按钮的备用空间的 xml，并从代码中添加它们。在这种情况下，您必须跟踪有关代码中添加的按钮的所有信息，而不仅仅是状态，但理论是相同的。

如果您还想在应用程序重新启动时保存布局，则必须自己保存该信息，Android 没有此内置功能。

# android - 在运行时加载 CustomView 及其逻辑

> ID：14643301
> 
> 赞同：0
> 
> 时间：2013-02-01T09:35:38.553
> 
> 标签：android, android-custom-view, custom-view

我正在为 Android 应用程序创建一个自定义组件（恰好是混音器的音量推子）。它工作正常。

我想要的是在运行时加载这个组件的几个实例。我试过这个：

```
LinearLayout layout = (LinearLayout)findViewById(R.id.mixerContainer) //This layout
for(int i=0;i<8;i++){
  LayoutInflater l = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
  View v = l.inflate(R.Layout.MyVolumeFader, null);
  layout.add(v);
} 
```

这会正确添加视图，但不会附加我的组件的所有逻辑（包含在 MyVolumeFader 类中）。

我怎么解决这个问题？

--

代码如下所示：

**MyVolumeFader.java**

```
public class MyVolumeFader extends RelativeLayout{
 [...]

 private VerticalSeekBar volumeBar;

 [...]

 ->volumeBar handling<-
} 
```

**MyVolumeFader.xml**

```
<RelativeLayout...
Some TextViews, Buttons and a VerticalSeekBar are here... 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:41:01.223

你可以考虑使用 windowmanager 和它的 addview 方法来解决你的问题。

```
mWindowManager.addView(new ChartTools(this, a, list, "业务统计").getChart(),
        ParamTools.getChartParams()); 
```

# .net - 如何将 SSIS 或 .NET 创建的 Excel 文件上传到 SSRS 报表服务器？

> ID：14643304
> 
> 赞同：0
> 
> 时间：2013-02-01T09:36:02.537
> 
> 标签：.net, sql-server, ssis, reportingservices-2005

我的任务是为我们的业务生成许多 Excel 文件，作为一种交付方法，我正在考虑使用 SQL Server 2005 Reporting Services (SSRS)。

我想做的是从 SSIS 或 .Net (C#/VB) 应用程序生成 Excel 电子表格，然后以编程方式将文件上传到 SSRS 中的适当区域。

似乎没有任何文档，所以我不确定这是否受支持，但我确实看到了[这篇](https://stackoverflow.com/questions/7255428/load-ssrs-report-from-file-in-c-sharp-in-a-service)讨论报告执行的帖子，因此对其他方法感兴趣。

```
Microsoft.SqlServer.ReportExecution.ReportExecutionService rsExec = 
    new Microsoft.SqlServer.ReportExecution.ReportExecutionService();
    rsExec.Credentials = System.Net.CredentialCache.DefaultCredentials;
    rsExec.Url = @"http://<ServerName>/reportserver/ReportExecution2005.asmx"; 
```

有没有人有以编程方式将文件上传到 SSRS 的经验？你能指点我任何相关的文章吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:16:11.927

ReportingServices 对象模型中有一个 CreateResource 方法...请参阅[此处](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/794982e4-e9a2-4328-92cd-bb2248ddbb8c/)以编程方式上传 PDF 的描述。然后，您可以将其修改为您的要求。

# actionscript-3 - 限制在actionscript3中的数组中添加对象

> ID：14643306
> 
> 赞同：0
> 
> 时间：2013-02-01T09:36:08.947
> 
> 标签：actionscript-3, flash, flash-cs6

我只是 as3 的初学者，我对数组和对象（movieclip）没有什么问题。首先，如果您想将对象添加到数组`array.push(object)`中，不是吗？如果你想用`array.splice(index, 1)`. 那么如果我的代码就像这个一样，如果你只想要数组中的 10 个对象，那么停止向数组添加对象怎么样？

```
private function RandomEnemy():void {
    var enemy:Enemy = new Enemy(RandomRange(700, 1000), 350);
    enemy.addEventListener(Event.REMOVED_FROM_STAGE, RemoveFromArray);
    layerChar.addChild(enemy);
    enemies.push(enemy);
}

private var remaining:int = 10;
private function RemoveFromArray(e:Event):void {
    removeEventListener(Event.REMOVED_FROM_STAGE, RemoveFromArray);
    var index:int = enemies.indexOf(Enemy(e.currentTarget), 0);
    enemies.slice(index, 1);
    remaining--;
    trace(remaining);
    if (remaining==0) {
        //stop the adding object in array
    }
} 
```

对不起我的英语不好，我仍然不知道如何用 as3 和 flash 编程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:38:50.850

您可以检查数组的长度属性以查看其中有多少项。

```
enemies.length 
```

然后，您可以根据该值做任何您想做的事情。查看您的代码，您似乎应该将整个内容放在一个 if 块中，以检查数组中是否有任何项目，然后再尝试从中删除。

也许这样的东西是你想要的？

```
private function RemoveFromArray(e:Event):void {
    // not quite sure what you were trying to do with this line...
    removeEventListener(Event.REMOVED_FROM_STAGE, RemoveFromArray);

    // check to see if there are any items in the enemies array to remove
    if (enemies.length > 0){
        var index:int = enemies.indexOf(Enemy(e.currentTarget), 0);
        //enemies.slice(index, 1);
        // splice() is what you may actually want, as it adds/removes elements from the array
        enemies.splice(index, 1);
    } else {
        trace("No more items in enemies array.");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:55:34.850

1）您还可以在数组周围创建自定义包装器，在添加任何内容之前检查数组的长度

2）看一下Vector类，可以固定它的长度，在很多情况下比Arrays更有效。

3）如果要移除的对象位于数组的开头或结尾，不要使用拼接，使用弹出或移位，因为拼接非常昂贵

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T16:02:23.527

我想最简单的解决方案是在添加对象之前检查数组是否有 10 个元素：

```
if (enemies.length < 10){
    layerChild.addChild(enemy);
    enemies.push(enemy);
} 
```

此外，您似乎拼错`splice`了`enemies.slice(index, 1)`. 而且我知道您是新手，但最好还是坚持使用尽可能少的功能以避免混淆。

脱离 Neil 的观点，向量通常优于数组，但不要固定向量的长度，因为其中不会只有 10 个元素（除非你想偏离你的舒适区，但效率不是这里不是问题）。并且一定要使用拼接，因为在这种情况下效率又不是问题。

# git - Git：强制用户和密码提示

> ID：14643308
> 
> 赞同：93
> 
> 时间：2013-02-01T09:36:11.630
> 
> 标签：git, github

我最近将本地 Git 安装更新为`1.8.1`from `1.8.0.1`.

我注意到，当我在 GitHub 上工作时，它不再提示我在推送时输入用户名和密码。

这让我很困扰，因为我认为每次都必须输入用户名和密码是一种很好的安全措施。（如果其他人使用我的电脑怎么办？）

我检查了以下内容：

*   `1.8.0.1`在另一台计算机上仍然要求输入用户名和密码。
*   我在 github 上的帐户仍然强制执行私有/安全控制。
*   我使用的是 https 远程引用，而不是 ssh。
*   为了更好的衡量，我检查了我的`~/.ssh`情人。那里没有错。
*   我**没有**将登录详细信息存储在`~/.gitconfig`单个`<proj>/.git/config`文件中。
*   我也**没有**在`~/.netrc`.
*   我创建了一个新的虚拟存档：仍然没有提示我登录。

[我在 git发行说明存档](https://github.com/git/git/tree/master/Documentation/RelNotes)中找不到任何内容。

有谁知道这是否是一种新的 git 行为？如何恢复提示？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2016-02-19T10:18:40.600

使用 git 命令添加 -v 标志。例如 `git pull -v`

> v stands for verify .

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2019-06-12T20:52:19.307

This is most likely because you have multiple accounts, like one private, one for work with GitHub.

**SOLUTION On Windows**, go to Start > Credential Manager > Windows Credentials and remove GitHub creds, then try pulling or pushing again and you will be prompted to relogin into GitHub

**SOLUTION OnMac**, issue following on terminal:

```
git remote set-url origin https://username@github.com/username/repo-name.git 
```

by replacing 'username' with your GitHub username in both places and providing your GitHub repo name.

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-02-01T10:48:18.037

> 有了`git config -l`，我现在看到我有一个`credential.helper=osxkeychain`选择

这意味着**[凭证助手](https://stackoverflow.com/questions/6191985/git-http-securely-remember-credentials/12938677#12938677)**（最初在 1.7.10 中引入）现在生效，并将自动缓存通过 HTTP 访问远程存储库的密码。
（如“ [GIT: Any way to set default login credentials?](https://stackoverflow.com/a/13870717/6309) ”）

您可以完全禁用该选项，或[仅对单个 repo](https://stackoverflow.com/a/13203623/6309)禁用。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2018-09-29T23:38:00.500

None of those worked for me. I was trying to clone a directory from a private git server and entered my credentials false and then it wouldn't let me try different credentials on subsequent tries, it just errored out immediately with an authentication error.

What did work was specifying the user name (`mike-wise`)in the url like this:

```
 git clone https://mike-wise@collab.somewhere.net/someuser/somerepo.git 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-06-27T09:58:41.993

Since the question was labeled with `Github`, adding another remote like `https_origin` and add the `https` connection can force you always to enter the password:

```
git remote add https_origin https://github.com/.../... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-11T09:20:35.290

Addition to third answer: If you're using non-english Windows, you can find "Credentials Manager" through "Control panel" > "User Accounts" > "Credentials Manager" [Icon of Credentials Manager](https://i.stack.imgur.com/7g2Xi.png)

# selenium - 如何抑制在硒的testng报告中显示AssertionError

> ID：14643317
> 
> 赞同：1
> 
> 时间：2013-02-01T09:36:56.717
> 
> 标签：selenium, testng

我在控制台和报告中也收到以下错误。但我不希望此错误跟踪显示在报告中。如何抑制报告中显示的此错误？我使用自定义失败消息调用此函数 Library.Test()：我的代码是：

```
AssertJUnit.assertTrue("FAIL: Please check the logs in report. Either there are no more than 10 records and there is a problem in application.",Library.Test()); 
```

我的 AssertionError 跟踪如下：

```
FAILED: TC
java.lang.AssertionError: FAIL: Please check the logs in report. Either there are no more than 10 records and there is a problem in application.
  at org.testng.AssertJUnit.fail(AssertJUnit.java:59)
  at org.testng.AssertJUnit.assertTrue(AssertJUnit.java:24)
  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
  at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
  at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
  at java.lang.reflect.Method.invoke(Unknown Source)
  at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
  at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
  at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
  at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
  at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:128)
  at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
  at org.testng.TestRunner.privateRun(TestRunner.java:767)
  at org.testng.TestRunner.run(TestRunner.java:617)
  at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
  at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
  at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
  at org.testng.SuiteRunner.run(SuiteRunner.java:240)
  at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
  at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
  at org.testng.TestNG.runSuitesSequentially(TestNG.java:1203)
  at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)
  at org.testng.TestNG.run(TestNG.java:1036)
  at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
  at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
  at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:23:12.040

我发现直到现在似乎还没有办法通过 XML 文件配置记者。

现在，这只能通过将`-reporter`命令行参数传递给 TestNG 来实现：

`-reporter org.testng.reporters.XMLReporter:stackTraceOutputMethod=0[,additional=param]`

可以在 [TestNG Logger 配置文档](http://testng.org/doc/documentation-main.html#logging-xml-reports)中找到接受的参数。

默认情况下，它会输出完整的堆栈跟踪，但您可以在报告中配置任何长度的堆栈跟踪。将配置参数“stackTraceOutputMethod”设置为 0 将只输出异常类和消息，这听起来像您正在寻找的行为。

如果您需要更多地调整报告，您可以查看[Reporter API](http://testng.org/doc/documentation-main.html#logging-reporter-api)。

# jquery - Jquery 和 Bootstrap Button 值问题

> ID：14643322
> 
> 赞同：1
> 
> 时间：2013-02-01T09:37:14.203
> 
> 标签：jquery, button, twitter-bootstrap, asp.net-mvc-4

HTML 代码

```
@Html.HiddenFor(m => m.repDD.Type)
<button type="button" value="false" onclick="$('#CatD').hide();" class="btn@((!Model.repDD.Type) ? " active" : string.Empty )" data-toggle="button">blah1</button> 
```

jQuery

```
@section js {
   <script>
       $(document).ready(function() {            
           if (!$('#repDD_Type').attr('checked')) {
               $('#CatD').show();
           }
           else {
           $('#CatD').hide();
           }
       });
    </script>
} 
```

基本上，我试图根据传递给页面的按钮值的值隐藏一些 div，因为它是一个编辑页面，但无论它是什么值，当前代码总是显示 div，即使它不应该和使用 .val('true') 或 .val(true) 也不起作用，所以以前有没有人遇到过使用引导单选按钮的问题，因为普通单选按钮不受影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:12:26.630

引导按钮似乎需要不同的标准，在这种情况下我必须这样做，

```
if ($('#repDD_Type').val() == 'True') 
```

因为其他任何东西都不被接受。

# ios - 关闭推送通知呈现的 viewController

> ID：14643326
> 
> 赞同：0
> 
> 时间：2013-02-01T09:37:29.860
> 
> 标签：ios, objective-c, push-notification, viewcontroller

我将 a`testViewController`作为 a `rootViewController`in d呈现`idReceiveRemoteNotification`，效果很好。然后，当我按下`testViewController`（返回“mainViewController”，在这种情况下是 - `dismissViewController`-）的后退按钮时，什么也没有发生。我知道发生这种情况是因为它被呈现为 rootView.. 并且没有什么可以忽略的。我如何控制从何处或如何`testViewController`呈现，以便决定在按下后退按钮时如何进行？我希望你明白我想说什么。任何意见将是有益的。

先感谢您

```
ChatViewController *chat = [[ChatViewController alloc] initWithNibName:@"ChatViewController" bundle:nil];

        [_window.rootViewController presentViewController:chat animated:YES completion:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:41:17.250

您不应该将其设置为您的`rootViewController`，而是将`rootViewController`其作为模态视图控制器呈现：

```
[self.window.rootViewController presentViewController:testViewController animated:YES completion:nil] 
```

当您调用该`-dismissViewControllerAnimated:completion:`消息时，它应该返回到您的`rootViewController`.

# google-app-engine - 在 GQL 中为 GAE1.7.4 使用 DISTINCT 是否有任何先决条件？

> ID：14643331
> 
> 赞同：1
> 
> 时间：2013-02-01T09:37:46.560
> 
> 标签：google-app-engine, distinct, gql

我正在尝试通过 GQL 从我的数据存储区查询 ndb 模型上的不同属性列表。

我的 GQL 查询是：

```
SELECT DISTINCT property FROM AppUser ORDER BY property 
```

运行此程序后，我遇到以下错误：

```
BadQueryError: Parse Error: Expected no additional symbols at symbol SELECT 
```

检查文档后，我发现 DISTINCT 仅在 GAE 1.7.4 中引入，而我使用的包是 GAE 1.7.3。我升级到了正确的版本，并通过管理控制台确认我使用了正确的版本号。但是，我仍然收到完全相同的错误。

1) 我需要对我的应用程序进行某种先决条件更改以激活 DISTINCT 的使用吗？2）我的查询中是否还有其他一些错误导致它失败？

# html - Facebook 登录按钮渲染不正确

> ID：14643333
> 
> 赞同：1
> 
> 时间：2013-02-01T09:37:58.150
> 
> 标签：html, facebook

我正在使用以下内容在我的网站上添加带有 facebook 按钮的登录：

```
<div class="fb-login-button" data-show-faces="false" data-width="100"
    data-max-rows="2" data-size="large" data-scope="xxx">Start Here</div> 
```

这在 IE9 中运行良好，但在 Safari/Chrome 中不起作用。相反，我得到以下按钮：

![错误的脸书按钮](../Images/93fb162c0b1f257269961104ef56c87e.png)

请注意 Facebook 徽标是如何丢失的？这是因为在 webkit 中，facebook 生成了以下行：

```
<i class="pluginFaviconButtonIcon img sp_login-button sx_login-button_"></i> 
```

错误的部分是缺少大小说明符的“sx_login-button_”，在本例中为“大”。在 IE9 中，这是“sx_login-button_large”，它可以工作。

关于为什么这不起作用 webkit 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T20:58:06.650

我想我已经想通了。我安装了阻止 Facebook 活动的插件 Ghostery。我知道，很愚蠢，但我当时只是在看布局:)。但这就是为什么我的事情变得一团糟的原因。检查以确保您没有运行阻止程序。

# java - 数组 java:90 (ArrayIndexOutOfBoundsException)

> ID：14643337
> 
> 赞同：0
> 
> 时间：2013-02-01T09:38:10.670
> 
> 标签：java, arrays, indexoutofboundsexception

然后我做这个代码：

```
 private int[] getAmplitude(byte[] fft) {
        int[] amplitude = new int[fft.length/2-2] ;
        for (int i = 2; i <= fft.length/2-2;i+= 2) {
            for(int j=0;j<= fft.length/2-2;j++){
            amplitude[j]=(fft[i] * fft[i] + fft[i + 1] * fft[i + 1]);}
        }
        return amplitude; 
```

我懂了：

```
java.lang.ArrayIndexOutOfBoundsException
    at com.astroplayerbeta.gui.eq.EqVisualizerCaptureAudio.getAmplitude(EqVisualizerCaptureAudio.java:90)
    at com.astroplayerbeta.gui.eq.EqVisualizerCaptureAudio.onFftDataCapture(EqVisualizerCaptureAudio.java:67)
    at android.media.audiofx.Visualizer$NativeEventHandler.handleMessage(Visualizer.java:484)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3835)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:864)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:622)
    at dalvik.system.NativeStart.main(Native Method) 
```

那是我的麻烦吗？

fft[] 数组的长度为 1024。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:43:49.757

假设`fft.length/2-2`是 3。那么幅值是一个大小为 3 的数组。

现在你说

```
for(int j=0;j<= fft.length/2-2;j++){
    amplitude[j]=(fft[i] * fft[i] + fft[i + 1] * fft[i + 1]);
} 
```

如果我用英语写它会是：对于 j = 0 到 3，将 somthing 放在幅值 [j] 中。所以你将**4 个**值放入幅度中，这是一个大小为 3 的数组。所以你得到一个`ArrayIndexOutOfBoundsException`. 将行更改为

```
for(int j=0;j< fft.length/2-2;j++){
    amplitude[j]=(fft[i] * fft[i] + fft[i + 1] * fft[i + 1]);
} 
```

（<= 更改为 <），你应该设置。

请注意，您对 fft 及其 for 循环也有类似的问题。

# visual-c++ - 在 vc++ 应用程序中应用视觉样式

> ID：14643338
> 
> 赞同：0
> 
> 时间：2013-02-01T09:38:19.083
> 
> 标签：visual-c++, skin, visual-styles

我已经有一个 vc++ 应用程序，它看起来有点旧版本。

现在我想在该应用程序中应用视觉样式。谁能告诉我如何在[VisualStyler.Net的帮助下在我的 c# 应用程序中执行此操作](http://www.skin-soft.co.uk/products/visualstyler/overview.aspx)

但我不知道如何在 vc++ 中使用它。

# java - 在渲染之前从 webview 获取 Html

> ID：14643341
> 
> 赞同：0
> 
> 时间：2013-02-01T09:38:26.090
> 
> 标签：java, android, html, parsing, webview

我正在使用 android webview 我的目标是在渲染之前解析 html

为此，我在 pagefinish 事件中将以下 javascript 添加到 webview..

```
public void onPageFinished(WebView view, String url)
{
    view.loadUrl("javascript:varhtmlString=document.getElementsByTagName('html')[0].innerHTML;"
                 +"document.getElementsByTagName('html')[0].innerHTML=window.HTMLOUT.parseHTML(htmlString);");              
} 
```

但问题是在解析 html 之前出现闪回（原始 html）

然后我监控日志，发现javascript在pageFinish（异步）之后执行以使其同步我使用等待通知机制并确保javasript在页面完成之前运行

但在解析之前仍然出现相同的问题原始html

有没有办法在渲染之前更改html？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:54:35.070

你可以这样做：

```
String content = getContentForUrl(url);
String manipulateHTML  = manipulate(content); // your function to adjust the content.

webView.loadDataWithBaseURL(url, manipulateHTML, "text/html","UTF-8", null);

public String getContentForUrl(String url) {

    BufferedReader in = null;

    String content = "";

    try {
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet(url);
        HttpResponse response = client.execute(request);

        in = new BufferedReader(new InputStreamReader(response.getEntity()
                .getContent()));

        StringBuffer sb = new StringBuffer("");
        String line = "";
        String NL = System.getProperty("line.separator");

        while ((line = in.readLine()) != null) {
            sb.append(line + NL);
        }

        in.close();
        content = sb.toString();

        Log.d("MyApp", "url content for " + url + " " + content);

    } catch (Exception e) {

        Log.d("MyApp",
                "url content for " + url + " Exception :" + e.toString());

    } finally {
        if (in != null) {
            try {
                in.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }

    return content;
} 
```

# php - 在 php 中使用 getter 从父类调用受保护的变量

> ID：14643343
> 
> 赞同：1
> 
> 时间：2013-02-01T09:38:30.997
> 
> 标签：php, oop, variables, getter

我是 PHP 中 OOP 的新手。我有以下问题：我有 1 个名为“用户”的父类和 2 个子类“业务”和“标准”。

我的父类看起来像这样：

```
class User {    
protected $m_iId;
protected $m_iFoto;
protected $m_sEmail;

/*Constructor*/
public function __construct(){
    $this->Id = -1;
    $this->Foto = "";
    $this->Email = "";
} 

/*Setter*/                    
public function __set($p_sProperty, $p_sValue){
    switch($p_sProperty){
        case "Id":
            if(is_numeric($p_sValue) && $p_sValue !== -1){
                $iNumber = intVal($p_sValue);
                if($iNumber >= -1){
                    $this->m_iId = $p_sValue;
                }
                else{
                    echo("Not a valid id: ".$p_sValue);
                }
            }
            break;
        case "Foto":
            if(is_numeric($p_sValue) && $p_sValue !== -1){
                $iNumber = intVal($p_sValue);
                if($iNumber >= -1){
                    $this->m_iFoto = $p_sValue;
                }
                else{
                    echo("Not a valid Foto_id: ".$p_sValue);
                }
            }
            break;
        case "Email":
            $this->m_sEmail = $p_sValue;
            break;  
        default: echo("Unknown property: ".$p_sProperty);
    }
}

/*Getter*/
public function __get($p_sProperty){
    $vResult = null;
    switch($p_sProperty){
        case "Id";
            $vResult = $this->m_iId; 
            break;
        case "Foto";
            $vResult = $this->m_iFoto; 
            break;
        case "Email";
            $vResult = $this->m_sEmail; 
            break;
        default: echo("Unknown property: ".$p_sProperty);
    }
    return $vResult;
} 
```

}

一个孩子看起来像这样：

```
class UserStandaard extends User {

    //velden die bereikbaar zijn
    protected $m_sName;

    /*Constructor*/
    public function __construct(){
        parent::__construct();
        $this->Name = "";
    } 

    /*Setter*/                    
    public function __set($p_sProperty, $p_sValue){
        switch($p_sProperty){
            case "Name":
                $this->m_sName = $p_sValue;
                break;
            default: echo("Unknown property: ".$p_sProperty);
        }
    }

    /*Getter*/
    public function __get($p_sProperty){
        $vResult = null;
        switch($p_sProperty){
            case "Name";
                $vResult = $this->m_sName; 
                break;
            default: echo("Unknown property: ".$p_sProperty);
        }
        return $vResult;
        }
} 
```

我的问题如下：我如何申请身份证？我想做类似的事情：

```
$oUser = new UserStandaard();
echo $oUser->Id; 
```

但这不起作用......它一直在回响

```
Unknown property: Id 
```

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:49:13.497

The problem is that your derived class implementation of `__get` and `__set` do not call the base class implementation. This does not happen automatically, and you need to do it explicitly:

```
class UserStandaard extends User {

    /*Setter*/                    
    public function __set($p_sProperty, $p_sValue){
        parent::__set($p_sProperty, $p_sValue);
        // your current code follows
    }
} 
```

However, this will still not work because now your parent implementation will only recognize the three properties that it knows. There seems to be no direct way to handle this, which means your design is problematic and needs to be modified.

### Possible solution

Structure `__get` and `__set` to be more pluggable (example pending). By this I mean that the set of properties they recognize should not be hardcoded because this makes it very difficult to extend them. Ideally, you would want a different getter and setter for each property:

```
class User {
    public function getName() { ... }
    public function setName($name) { ... }
} 
```

This would let you keep the code nice, clean and separated. You can then wire up `__get` and `__set` to forward to these methods:

```
public function __get($name)
{
    $getter = 'get'.ucfirst($name);
    if (!method_exists($this, $getter)) {
        die("This object does not have a $name property or a $getter method.");
    }

    return $this->$getter();
}

public function __set($name, $value)
{
    $setter = 'set'.ucfirst($name);
    if (!method_exists($this, $setter)) {
        die("This object does not have a $name property or a $setter method.");
    }

    $this->$setter($value);
} 
```

This way you can break down each property into a getter and setter method as above, and also there is absolutely no need to override `__get` and `__set` in your derived classes. Simply declare additional getters and setters for the properties you are interested in and the base class `__get`/`__set` will correctly forward to these methods.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:48:04.370

`__get()`这是因为您的 UserStandaard 类中的覆盖方法中没有 Id 。

```
 /*Getter*/
    public function __get($p_sProperty){
        $vResult = null;
        switch($p_sProperty){
            case "Name";
                $vResult = $this->m_sName; 
                break;
            default: echo("Unknown property: ".$p_sProperty);
        }
        return $vResult;
    } 
```

但它在他的父母身上，你可能会想。

不，因为您已经覆盖了 parents 方法。

You are trying to overload properties with magic methods in your User class with __get and __set, but you **override** these functions in you UserStandaaard class. Both function only know their own properties from their own class because the Userstandaard's __get method, does not call it's parent method. But even if you do, it will fail because of the way how you implemented your magic methods with switch-cases and different property names.

So using the magic method in UserStandaard will only know 1 property, and if you call the parent method from User, it will only know the parents properties (like Jon mentioned).

I'd say change your design, this will not work.

Jon has an excellent example of how it could work!

Oh and a shoutout to you: Welkom bij stack-overflow ! ;)

# wpf-controls - 在 wpf 中以编程方式创建进度条

> ID：14643345
> 
> 赞同：0
> 
> 时间：2013-02-01T09:38:32.737
> 
> 标签：wpf-controls, progress-bar

我正在尝试在 wpf 中以编程方式创建进度条。到目前为止，这是我的代码

```
infoWindow = new Window();
infoWindow.WindowStartupLocation = WindowStartupLocation.CenterScreen;
infoWindow.SizeToContent = SizeToContent.WidthAndHeight;
infoWindow.Title = "Please wait...";

StackPanel stackPanel = new StackPanel();
stackPanel.Orientation = Orientation.Vertical;

ProgressBar progressBar = new ProgressBar();
progressBar.IsIndeterminate = true;
progressBar.Margin = new Thickness(10,0,10,10);
progressBar.Visibility = Visibility.Visible;
progressBar.Height = 25;
progressBar.FlowDirection = FlowDirection.LeftToRight;
progressBar.Foreground = System.Windows.Media.Brushes.Green;
progressBar.Background = System.Windows.Media.Brushes.Red;

stackPanel.Children.Add(progressBar);

infoWindow.Content = stackPanel;
infoWindow.Show(); 
```

我从中得到的是一个红色的进度条。但是没有动画像我们复制文件时那样发生。（我不想显示任何进展，只是以圆形方式穿过整个条带的光）。有什么想法我在这里想念的吗？

# c# - RangeValidator 货币值不能包含多于 2 位小数？

> ID：14643347
> 
> 赞同：3
> 
> 时间：2013-02-01T09:38:37.657
> 
> 标签：c#, asp.net, .net, vb.net

框架 4.0 Asp.net 应用程序

运行代码时出现错误“'RangeValidator' 的 MaximumValue 属性的值 '999.9999' 无法转换为类型 'Currency'。

下面是我的代码：

```
<asp:RangeValidator Runat='server' ControlToValidate='textEdit' 
    MinimumValue='0.0001'
    MaximumValue='999.9999' Type='Currency' 
    ErrorMessage='Should be between 0.0001 and 999.9999' id="idValidtor" 
 display='None' /> 
```

请解释一下，货币价值不能包含超过小数点后 2 位数字？除非我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T09:52:30.733

[`RangeValidator`](http://msdn.microsoft.com/en-us/library/vstudio/f70d09xt%28v=vs.90%29.aspx)使用该属性[`NumberFormatInfo.CurrencyDecimalDigits`](http://msdn.microsoft.com/en-us/library/vstudio/system.globalization.numberformatinfo.currencydecimaldigits%28v=vs.90%29.aspx)来确定字符串是否可以转换为货币，否则会抛出异常。来自[MSDN](http://msdn.microsoft.com/en-us/library/vstudio/f70d09xt%28v=vs.90%29.aspx)：

> 当 RangeValidator 控件的 Type 属性设置为“Currency”时，MinimumValue 和 MaximumValue 属性必须以 NumberFormatInfo.CurrencyDecimalDigits 中描述的格式提供，**否则会引发异常**。

大多数文化（包括`InvariantCulture`）的默认值为 2（阿拉伯国家有 3 但没有 4）。

那你用的是什么文化？如果在货币中存储多于两位的小数位很重要，那么您可以`NumberFormatInfo`在此页面中使用自定义：

```
protected void Page_PreInit(object sender, EventArgs e)
{
    var customCulture = (CultureInfo)CultureInfo.CurrentCulture.Clone();
    var nfi = (NumberFormatInfo)customCulture.NumberFormat.Clone();
    nfi.CurrencyDecimalDigits = 4;
    customCulture.NumberFormat = nfi;
    System.Threading.Thread.CurrentThread.CurrentCulture = customCulture;
} 
```

（请注意，您需要`using System.Globalization;`在顶部添加）

# magento - 如何在 Magento 中导入可配置产品？

> ID：14643354
> 
> 赞同：2
> 
> 时间：2013-02-01T09:38:54.030
> 
> 标签：magento, csv, import, dataflow, configurable

我正在制作服装网店，需要在导入过程中创建可配置的产品，以将尺寸链接在一起。

导入过程运行良好，简单产品和可配置产品都按预期创建。

然而，我的问题是，简单产品似乎并没有与可配置产品作为“关联产品”链接在一起</p>

我正在导入包含 2 个产品的 CSV。每个产品有 5 种尺寸 = 12 种产品（10 种简单，2 种可配置） - 请参阅此处： [https ://docs.google.com/spreadsheet/ccc?key=0Avt7PlGLhoRvdEhkMDR5X1FyYVgtVGhsdVlMZXdmMVE](https://docs.google.com/spreadsheet/ccc?key=0Avt7PlGLhoRvdEhkMDR5X1FyYVgtVGhsdVlMZXdmMVE)

我尝试添加列：“关联”=以逗号分隔的 SKU 和“config_attributes”=大小（关联简单产品的可配置属性）

但他们仍然没有联系在一起——我做错了什么？

作为记录，我正在使用 Magento Community 1.7。

# groovy - 如何在 groovy 中使用 docype 读取 XML？

> ID：14643359
> 
> 赞同：0
> 
> 时间：2013-02-01T09:39:16.420
> 
> 标签：groovy

我有编写以下代码来读取“struts.xml”（struts2 配置文件）。

```
static main(args) {
    String path = /struts.xml/
    String timestamp = new SimpleDateFormat("yyyy-MM-dd_HH-mm-ss").format(new Date())
    String csvName = "struts2-" + timestamp + ".csv"

    Node struts = new XmlParser().parse(new File(path))

    FileWriter writer = new FileWriter(new File(csvName))
    writer.write "#,package,extends,action,method,class\n"
    int counter = 1;
    struts.package.each { pck ->
        pck.action.each { action ->
            writer.write("${counter++},${pck.@name},${pck.@extends},${action.@name},${Utils.preventNull(action.@method)},${action.@class}\n")
        }
    }
    writer.close()
    println("File Processed")
} 
```

struts.xml 在其中定义了以下文档类型。

```
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
"http://struts.apache.org/dtds/struts-2.3.dtd"> 
```

当我从 struts.xml 中删除这一行时，代码运行完美。否则它会给出以下异常。

```
Exception in thread "main" java.net.UnknownHostException: struts.apache.org
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:234)
at java.net.Socket.connect(Socket.java:551)
at java.net.Socket.connect(Socket.java:501)
at sun.net.NetworkClient.doConnect(NetworkClient.java:180)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:403)
at sun.net.www.http.HttpClient.openServer(HttpClient.java:521)
at sun.net.www.http.HttpClient.<init>(HttpClient.java:246)
at sun.net.www.http.HttpClient.New(HttpClient.java:320)
at sun.net.www.http.HttpClient.New(HttpClient.java:337)
at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(HttpURLConnection.java:838)
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:790)
at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:715)
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:959)
at org.apache.xerces.impl.XMLEntityManager.setupCurrentEntity(Unknown Source)
at org.apache.xerces.impl.XMLEntityManager.startEntity(Unknown Source)
at org.apache.xerces.impl.XMLEntityManager.startDTDEntity(Unknown Source)
at org.apache.xerces.impl.XMLDTDScannerImpl.setInputSource(Unknown Source)
at org.apache.xerces.impl.XMLDocumentScannerImpl$DTDDispatcher.dispatch(Unknown Source)
at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
at groovy.util.XmlParser.parse(XmlParser.java:118)
at groovy.util.XmlParser$parse.call(Unknown Source)
at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:42)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
at demo.main(Struts2ConfigurationReader.groovy:14) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:36:04.557

我假设您在进行解析时没有互联网连接？

您可以通过解析器的功能将其关闭：

代替：

```
Node struts = new XmlParser().parse(new File(path)) 
```

和

```
XmlParser parser = new XmlParser()
parser.setFeature( "http://apache.org/xml/features/nonvalidating/load-external-dtd", false ) 
Node struts = parser.parse( new File( path ) ) 
```

* * *

PS：您还可以使用 groovy 执行以下操作：

*   删除`static main( args )`——假设这是一个脚本，它是不需要的
*   改变：

    ```
    String path = /struts.xml/
    String timestamp = new SimpleDateFormat("yyyy-MM-dd_HH-mm-ss").format(new Date())
    String csvName = "struts2-" + timestamp + ".csv" 
    ```

    到

    ```
    String path = 'struts.xml'
    String timestamp = new Date().format( 'yyyy-MM-dd_HH-mm-ss' )
    String csvName = "struts2-${timestamp}.csv" 
    ```

*   并且使用`File.withWriter`可能更容易阅读/编码。这：

    ```
    FileWriter writer = new FileWriter(new File(csvName))
    writer.write "#,package,extends,action,method,class\n"
    ....
    writer.close() 
    ```

    可以写成：

    ```
    new File(csvName).withWriter { writer ->
      writer.writeLine "#,package,extends,action,method,class"
      ....
    } 
    ```

# java - 重写构造函数

> ID：14643362
> 
> 赞同：6
> 
> 时间：2013-02-01T09:39:29.670
> 
> 标签：java, oop

我对重写构造函数感到非常困惑。构造函数不能被覆盖是我在谷歌搜索时得到的结果我的问题是

```
public class constructorOverridden {

    public static void main(String args[]) {
        Sub sub = new Sub();
        sub.test();
    }
}

class Super {
    Super() {
        System.out.println("In Super constructor");
        test();
    }

    void test() {
        System.out.println("In Super.test()");
    }
}

class Sub extends Super {
    Sub() {
        System.out.println("In Sub constructor");
    }

    void test() { // overrides test() in Super
        System.out.println("In Sub.test()");
    }
} 
```

当我运行它时，我得到的结果为

```
In Super constructor
In Sub.test()
In Sub constructor
In Sub.test() 
```

请注意子类中的测试方法已执行。是否表明超类构造函数已被覆盖。是否正确？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-01T09:42:45.317

构造函数不是多态的——你根本不会*覆盖*它们。您在子类中创建*新*的构造函数，并且每个子类构造函数都必须（可能间接地）链接到超类构造函数。如果您没有显式链接到构造函数，则会在子类构造函数主体的开头插入对无参数超类构造函数的隐式调用。

现在就覆盖*方法*而言- 一个对象从一开始就是它的“最终类型”，包括在执行超类构造函数时。因此，如果您`getClass()`在`Super`构造函数代码中打印，您仍然会`Sub`在输出中看到。其结果是调用了被覆盖的方法（即`Sub.test`），即使`Sub`尚未执行构造函数。

这基本上是一个坏主意，您几乎应该始终避免在构造函数中调用可能被覆盖的方法 - 或者**非常清楚地**记录这种情况（以便子类代码知道它不能依赖已被适当初始化等）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T09:44:51.550

您不能覆盖构造函数，因为构造函数是由它构造的类的名称调用的。如何使用相同的构造函数创建一些不同的类？此外，子类不会从其父类继承构造函数。

如果父构造函数做了一些重要的初始化，可以使用 super 从子构造函数调用它：

```
class Err extends Throwable {
   Err(String message) {
       super(message); // Call the constructor of Throwable.
        .. 
```

父类构造函数也总是被调用。如果您自己不调用任何构造函数，则在进入派生类的构造函数之前会自动调用不带参数的构造函数。如果父级没有无参数构造函数并且您没有调用任何构造函数，则会报告编译时错误。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T09:41:53.797

构造函数的第一行隐式调用是对`Super()`. 这就是你得到这些结果的原因。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-01T09:42:17.603

这是正确的。实例化子类时，首先调用超类构造函数，然后调用层次结构中的每个后续构造函数。

在上面的示例中，超类构造函数调用了一个被覆盖的方法 ( `test()`)。这可行，但有潜在危险，因为尚未调用子类构造函数，并且您的子类还没有完全初始化。出于这个原因，在构造函数中调用被覆盖（或可覆盖）的方法并不是一个好的做法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-01T09:44:17.460

它不是覆盖超类构造函数，并且构造函数不能被覆盖它可以被重载。

当您创建子类对象时，将首先实例化超类，然后再实例化子类。它就像*Child 不能没有 parent 存在*。

编译器会自动从子类构造函数调用超类构造函数。

```
Sub() {
    super();
    System.out.println("In Sub constructor");
} 
```

# android - 第一次在我的 GridView 中拖放时缺少 ImageView 源

> ID：14643367
> 
> 赞同：5
> 
> 时间：2013-02-01T09:39:43.127
> 
> 标签：android, gridview, drag-and-drop

我做了一个拖放GridView。除了第一次拖放之外，一切都完美无缺。我找不到它只发生第一次的原因。

我第一次将一个项目拖到 gridview 中的其他项目上时，项目的 imageview 源丢失了。当我放下它时，来源将被修复。之后，一切都会正常工作。知道如何解决这个问题或奇怪行为的原因吗？

这是我的 touchListener，它将处理拖放：

```
mGridView.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                GridView parent = (GridView) v;

                int x = (int) event.getX();
                int y = (int) event.getY();

                int position = parent.pointToPosition(x, y);
                if (position > AdapterView.INVALID_POSITION) {

                    int count = parent.getChildCount();
                    for (int i = 0; i < count; i++) {
                        View curr = parent.getChildAt(i);
                        curr.setOnDragListener(new View.OnDragListener() {

                            @Override
                            public boolean onDrag(View v, DragEvent event) {

                                boolean result = true;
                                int action = event.getAction();
                                switch (action) {
                                case DragEvent.ACTION_DRAG_STARTED:
                                    break;
                                case DragEvent.ACTION_DRAG_LOCATION:
                                    break;
                                case DragEvent.ACTION_DRAG_ENTERED:    
                                    setBlueFilterOnImageView((ImageView) v, getActivity());
                                    break;
                                case DragEvent.ACTION_DRAG_EXITED:
                                    clearColorFilterOnImageView((ImageView) v);
                                    break;
                                case DragEvent.ACTION_DROP:

                                    if (event.getLocalState() == v) {
                                        result = false;
                                    } else {

                                        View droped = (View) event.getLocalState();

                                        View target = v;

                                        app.myProfile().removeProfilePhotoAtIndex(((DragGridItemHolder) droped.getTag()).position);
                                        app.myProfile().insertProfilePhoto(((DragGridItemHolder) droped.getTag()).id, ((DragGridItemHolder) target.getTag()).position);

                                        mAdapter.notifyDataSetChanged();

                                    }
                                    break;
                                case DragEvent.ACTION_DRAG_ENDED:
                                    clearColorFilterOnImageView((ImageView) v);     
                                    break;
                                default:
                                    result = false;
                                    break;
                                }
                                return result;
                            }
                        });
                    }

                    int relativePosition = position - parent.getFirstVisiblePosition();

                    View target = (View) parent.getChildAt(relativePosition);

                    DragGridItemHolder holder = (DragGridItemHolder) target.getTag();
                    String text = holder.id;
                    ClipData data = ClipData.newPlainText("DragData", text);
                    target.startDrag(data, new View.DragShadowBuilder(target), target, 0);
                }
            }
            return false;
        }
    }); 
```

**编辑**

```
public static void setBlueFilterOnImageView(ImageView imageView, Context context){
    PorterDuffColorFilter blueFilter = new PorterDuffColorFilter(
            context.getResources().getColor(R.color.grid_state_focused),
            PorterDuff.Mode.SRC_ATOP);
    imageView.setColorFilter(blueFilter);
    imageView.setBackgroundColor(context.getResources().getColor(
            R.color.grid_state_pressed));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:37:08.277

我发现[这](https://stackoverflow.com/questions/10846240/drag-and-drop-images-in-gridview-in-android)与您的查询有关，可能会对您有所帮助。很难理解您的长代码，因此请尝试从此链接进行管理。

可能的问题是在`mGridView.setOnTouchListener(new View.OnTouchListener() ...`一次尝试做喜欢`mGridView.setOnTouchListener(new OnTouchListener() ...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T07:41:55.150

我认为您的代码中有几个问题：

一种。您的 onTouch 方法总是返回 false，这通常意味着侦听器尚未消费该事件。所以你应该在之后返回true

```
target.startDrag(data, new View.DragShadowBuilder(target), target, 0); 
```

湾。您将 onDragListener 注册放入 onTouch 事件的处理方法中，我认为这可能是导致此问题的主要原因。当你放下一个拖拽的项目时，onDragListener 可能没有被注册。由于你的监听器注册不依赖于源视图，你可以直接注册 onDragListener。并使代码如下所示：

```
mGridView.setOnTouchListener(new View.OnTouchListener() {

    @Override
    public boolean onTouch(View view, MotionEvent event) {
        if (motionEvent.getAction() == MotionEvent.ACTION_DOWN) {
            ClipData data = ClipData.newPlainText("", "");
            DragShadowBuilder shadowBuilder = new View.DragShadowBuilder(view);
            view.startDrag(data, shadowBuilder, view, 0);
            view.setVisibility(View.INVISIBLE);
            return true;
        } else {
            return false;
        }
    }

};

for(View view : ...){
    view.setOnDragListener(new View.OnDragListener() {
        //put your implementation here
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:25:58.723

我终于找到了解决办法。所以问题是当我在 DragEvent.ACTION_DRAG_ENTERED 中设置颜色过滤器时，ImageView 源将消失。为了避免这种情况，我在设置滤色器时重置了源。不是一个非常干净的解决方案，但它对我有用..谢谢所有的帮助

# google-search - 谷歌程序搜索。找不到区域参数

> ID：14643372
> 
> 赞同：0
> 
> 时间：2013-02-01T09:40:17.087
> 
> 标签：google-search

我有问题。我在谷歌中编写了一个搜索网站位置的程序。它是这样工作的：

从 url 字符串进行搜索。然后解析html页面的结果并找到站点位置。但我找不到在哪里处理区域参数。可能它在 url 字符串参数中。必须将内部 cookie 发送到服务器的可能。可能还有更多。我用于搜索 google.ru 网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:39:10.717

“查找在特定地区发布的页面”的查询字符串参数是 cr，该参数的可能值似乎是字符串“country”，后跟[2 个字母的 ISO 国家代码](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)。例如，要搜索在美国发布的页面，请添加`&cr=countryUS`到您的查询字符串；要搜索在俄罗斯发布的页面，请添加`&cr=countryRU`到您的查询字符串。

如需更多探索，请尝试使用 Google[高级搜索](https://www.google.com/advanced_search)页面或[高级搜索（俄语）](http://www.google.ru/advanced_search) ——输入一些搜索参数——并观察浏览器的地址栏以查看为您构建的 URL（及其查询字符串）。

**发布脚本**

您可能会发现有用的其他查询字符串参数是

1.  语言：限制为俄语页面，添加`&lr=lang_ru`
2.  站点/域：要限制在 .ru 域中的页面，请添加`&as_sitesearch=.ru`

**更多关于 &cr 参数**

尽管该参数被标记为“地区”，但它仅限于搜索源自特定国家/地区的页面。它不能用于搜索来自特定地区、州、省或俄罗斯等国家/地区的各种细分的页面。我怀疑谷歌使用“地区”这个词是为了避免一个地方的地位存在争议的政治分歧。有关更多信息，请参阅[Google 的 XML API](https://developers.google.com/custom-search/docs/xml_results?hl=en#crsp)文档（文档说它仅适用于 Google Site Search 客户，但我认为它适用于您的情况）。

# javascript - 玉包括和块

> ID：14643373
> 
> 赞同：1
> 
> 时间：2013-02-01T09:40:18.620
> 
> 标签：javascript, html, node.js, pug, template-engine

我有很多模板页面（`index.jade, catalog.jade, contacts.jade`等等），我在其中包含了一些额外的代码（比如`header_piece.jade`和`footer_piece.jade`）`include`。

我正在尝试做的事情 - 我想在代码中包含一些内容，这些内容包含在`include`. 希望可以用玉来完成。

这是我的代码：

```
index.jade:
body
  .wrapper
    include inc/header_piece

    append header
      .someextradiv
        | text

inc/header_piece.jade:
  block header
    .header
      a(href = '/') Home 
```

我期望得到的：

```
<div class="wrapper">
  <div class="header"><a href="/">Home</a>
    <div class="someextradiv">Text</div>
  </div>
</div> 
```

我真正得到的：

```
<div class="wrapper">
  <div class="header"><a href="/">Home</a></div>
  <div class="header"><a href="/">Home</a></div>
</div> 
```

我做错了什么以及如何获得理想的结果？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-02T05:32:25.943

通过执行以下操作，我能够获得您想要的结果：

index.jade:

```
body
  .wrapper
  include inc/header_piece

  append inc/header
    .someextradiv
    | text 
```

# php - 使用 php 创建一个临时 xml 文件

> ID：14643374
> 
> 赞同：0
> 
> 时间：2013-02-01T09:40:19.373
> 
> 标签：php, xml, dynamic-data, temporary-files

我正在尝试使用 php 创建一个包含测验问题列表的临时 xml 文件。随机列表是从 php 中的数据库生成的，我需要将其保存为可写的临时 xml 文件，直到测验完成。我不断收到以下错误：

> 警告：simplexml_load_file() [function.simplexml-load-file]：/tmp/quiz7YRGPo:1：解析器错误：需要开始标记，在 /home/dir/public_html/website.com/quiz/index 中找不到“<”。第 154 行的 php
> 
> 警告：simplexml_load_file() [function.simplexml-load-file]: quiz_data.xml 在 /home/dir/public_html/website.com/quiz/index.php 的第 154 行
> 
> 警告：simplexml_load_file() [function.simplexml-load-file]: ^ in /home/dir/public_html/website.com/quiz/index.php 第 154 行

这是代码：

```
// name of XMLPHP file which contains quiz data

$xml_file = 'http://website.com/quiz/dynamic_php_page_generates_xml.php?param=var&param2=var2';

// create randomXML file

$tempquiz = tempnam('/tmp','quiz');
$fp_tempquiz = fopen($tempquiz, "w");
fwrite($fp_tempquiz, $xml_file);
//CLOSE temp file
fclose($fp_tempquiz);

// create new SimpleXML object from XML file

$quiz = simplexml_load_file($tempquiz); 
```

如何使用 php 创建临时 xml 文件，以便每次加载页面时测验都是唯一的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:55:46.177

据我所知，您只是将其写入您的 XML 文件：

```
http://website.com/quiz/dynamic_php_page_generates_xml.php?param=var&param2=var2 
```

因为`fwrite($fp_tempquiz, $xml_file);` 不知道这是您要加载的链接。您需要加载 XML 数据，而不是指向它的链接。

请参考这篇文章：[XML Parser Error Start Tag Expected](https://stackoverflow.com/questions/12059873/xml-parser-error-start-tag-expected)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:57:52.023

它应该是

```
$xml_file = file_get_contents('http://website.com/quiz/dynamic_php_page_generates_xml.php?param=var&param2=var2'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:58:39.580

`$xml_file`包含文件的 URL，而不是实际的 XML 内容。您应该先阅读它，使用`file_get_contents`函数，例如：

```
$xml_content = file_get_contents($xml_file);
fwrite($fp_tempquiz, $xml_content); 
```

# android - 如何在 BroadcastReceiver 中更新 UI

> ID：14643385
> 
> 赞同：28
> 
> 时间：2013-02-01T09:41:02.477
> 
> 标签：android, broadcastreceiver

我创建了一个应用程序，在其中我在我的主类（）中注册了一个广播接收器`Main Activity`，每当我在我的主类中收到一些东西时，我`BroadcastReceiver`都想更新 UI，例如，我想显示一个警报框或设置我的`MainActivity`. 我收到接收器中的所有值但无法设置它们，有人可以帮助我，以便我可以在`BroadcastReceiver`.

我的 BroadcastReceiver 类是 MainActivity 的内部类，如下所示：-

```
public class MainActivity extends Activity {

   ..........

public static class NissanTabBroadcast extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            SharedPreferences shrd = context.getSharedPreferences("NissanGallery", context.MODE_WORLD_READABLE);
            type = shrd.getString("type", "null");
            badges = shrd.getString("badge_count", "null");

            //badge_tips_text.setText(badges);
            /*Editor edit =  shrd.edit();
            edit.remove("type");*/

            Toast.makeText(context, "" + type + "\n" + badge_tips_text.getText().toString(), Toast.LENGTH_LONG).show();
        }
    }
} 
```

任何帮助都将是可观的

谢谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-01T14:53:49.347

我建议你使用处理程序。

1.  在Activity中初始化一个Handler，例如：`handler = new Handler()`
2.  在构造函数中为 BroadcastReceiver 提供处理程序，就像我为上面的 NissanTabBroadcast 所做的那样
3.  在方法中使用`post()`你的 Handler 实例的`onReceive()`方法来提交更新 UI 的 Runnable

这是我能想象到的最干净的解决方案。

```
public class MainActivity extends Activity {

    private MyReceiver receiver;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        receiver = new MyReceiver(new Handler()); // Create the receiver
        registerReceiver(receiver, new IntentFilter("some.action")); // Register receiver

        sendBroadcast(new Intent("some.action")); // Send an example Intent
    }

    public static class MyReceiver extends BroadcastReceiver {

        private final Handler handler; // Handler used to execute code on the UI thread

        public MyReceiver(Handler handler) {
            this.handler = handler;
        }

        @Override
        public void onReceive(final Context context, Intent intent) {
            // Post the UI updating code to our Handler
            handler.post(new Runnable() {
                @Override
                public void run() {
                    Toast.makeText(context, "Toast from broadcast receiver", Toast.LENGTH_SHORT).show();
                }
            });
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-01-25T11:12:48.560

# 如何在任何 Activity 中重用 BroadcastReceiver？

[![在此处输入图像描述](../Images/5a40a5153f69e093ffc7597fa0d818a7.png)](https://i.stack.imgur.com/G2l7V.png)
**考虑以下情况，**

*   您想`BroadcastReceiver`在不同的活动中使用相同的
*   你已经写`BroadcastReceiver`在一个单独的文件中，并且想要访问`Activity`方法、UI 元素等。

在这些情况下，使用接口是一个好主意。我将更详细地解释优势和用例。但首先，让我们看看它是如何完成的。

**1) 创建接口**

```
public interface MyBroadcastListener{

    public void doSomething(String value);

} 
```

**2) 在您的 BroadcastReceiver 中初始化监听器**

```
public class MyReceiver extends BroadcastReceiver {

    private MyBroadcastListener listener;

    public MyReceiver(MyBroadcastListener listener){
        this.listener = listener;
    }

    @Override
    public void onReceive(Context context, Intent intent) {

        listener.doSomething("Some Result");

    }
} 
```

**3）在你的Activity中实现接口并覆盖方法**

```
 public MainActivity extends AppCompatActivity implements MyBroadcastListener{

      private BroadcastReceiver receiver;

      @Override
      public void onCreate(Bundle sis){

           // Related code 

           receiver = new MyReceiver(this);   // This is how you initialise receiver

          // Register receiver etc
      }

      public void updateUI(String msg) {
           TextView textView = (TextView) findViewById(R.id.textView);
           textView .setText(msg);
      }

      @Override
      public void doSomething(String result){
           updateUI(result);        // Calling method from Interface
      }

 } 
```

## 优势和用例？

> 使用接口方法使 BroadcastReceiver 独立于任何 Activity。假设将来您想将此 BroadCastReceiver 与另一个活动一起使用，该活动从 BroadcastReceiver 获取结果并启动一个 DetailActivity。
> 
> 请注意，这是一项**完全** **不同的任务**，但您可以使用**相同的 BroadcastReceiver**，甚至无需更改 BroadcastReceiver 内的任何代码。

**怎么做？**
简单的！实现接口中的`Activity`并重写方法。就是这样！

```
public ListActivity extends AppCompatActivity implements MyBroadcastListener{

      // Your Activity code goes here

     public void startDetailActivity(String title) {
         Intent i = new Intent(ListActivity,this, DetailActivity.class);
         i.putExtra("Title", title);
         startActivity(i);
     }

      @Override
      public void doSomething(String result){
           startDetailActivity(String title);    // Calling method from Interface
      }

} 
```

[![在此处输入图像描述](../Images/112a0cdd22b8bbf3e04042902d2fe3c2.png)](https://i.stack.imgur.com/JNxlE.png)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-08-14T02:22:47.953

我的案例是更新 MainActivity 托管的片段之一中的文本字段。我找到的最简单的解决方案是：-

在我的 MainActivity 类中检索到 MainActivtiy 的运行实例。这是我的 MAinActivity

```
private static MainActivity mainActivityRunningInstance;
    public static MainActivity  getInstace(){
        return mainActivityRunningInstance;
    }
  @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mainActivityRunningInstance =this;
----------
} 
```

现在在广播接收者的 onRecieve 方法中，获取该实例并调用更新方法

```
 @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().matches(Intents.PROVIDER_CHANGED_ACTION)) {
                String textValue="the text field value";
// the null check is for, if the activity is not running or in paused state, in my case the update was required onlyif the main activity is active or paused
            if(MainActivity.getInstace()!=null)
                MainActivity.getInstace().updateUI(textValue);
} 
```

现在对于我们需要在 UIThread 中运行更新的部分，MainActivity 的 updateUI 方法将调用片段更新方法。

```
 public void updateUI(final String str) {
        MainActivity.this.runOnUiThread(new Runnable() {
            public void run() {
     //use findFragmentById for fragments defined in XML ((SimpleFragment)getSupportFragmentManager().findFragmentByTag(fragmentTag)).updateUI(str);
            }
        });
    } 
```

最后一步是更新片段的文本字段

```
public void updateUI(String str){
        tv_content.setText(str);
    } 
```

和宾果游戏，它完成了。我参考[了这个](https://stackoverflow.com/questions/22869928/android-broadcastreceiver-onreceive-update-textview-in-mainactivity)链接来解决我的问题。希望对其他人有所帮助。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-01T09:43:13.097

使用`runOnUiThread`：

```
 MainActivity.this.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            // show alert

        }
    }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-01T10:13:56.970

我为此使用了完全不同的方法。通过将处理程序的实例放入意图中，将其传递给广播接收器。比在广播接收器中使用该处理程序向您的活动类发送消息，该活动类在您的自定义处理程序的 onHandleMessage 方法中更新 UI班级。

```
create handler class like

   public class MyHandler extends Handler{

onHandlerMessage(Message msg){//do whatever you want here after broadcast get fired}
} 
```

现在使用`Myhandler handler=new MyHandler();`在活动的全局级别范围内创建此处理程序对象。

现在将此处理程序放入您的意图中`putExtra`，然后通过发送此意图`sendBraodcast(intent)`。

`onReceive()`在广播接收器类中，通过 getExtras 获取此处理程序对象并在方法中使用它，如下所示

```
 handler.sendEmptyMessage(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-13T18:41:06.380

我使用 Intent 让 Broadcast Receiver 知道主 Activity 线程的 Handler 实例，并使用 Message 将消息传递给 Main Activity

我已经使用这种机制来检查广播接收器是否已经注册。有时，当您动态注册您的广播接收器并且不想让它两次或者您在广播接收器正在运行时向用户展示时，需要它。

主要活动：

```
public class Example extends Activity {

private BroadCastReceiver_example br_exemple;

final Messenger mMessenger = new Messenger(new IncomingHandler());

private boolean running = false;

static class IncomingHandler extends Handler {
    @Override
    public void handleMessage(Message msg) {
        running = false;    
        switch (msg.what) {
        case BroadCastReceiver_example.ALIVE:
    running = true;
            ....
            break;
        default:

            super.handleMessage(msg);
        }

    }
    }

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    IntentFilter filter = new IntentFilter();
        filter.addAction("pl.example.CHECK_RECEIVER");

        br_exemple = new BroadCastReceiver_example();
        getApplicationContext().registerReceiver(br_exemple , filter); //register the Receiver
    }

// call it whenever you want to check if Broadcast Receiver is running.

private void check_broadcastRunning() {    
        /**
        * checkBroadcastHandler - the handler will start runnable which will check if Broadcast Receiver is running
        */
        Handler checkBroadcastHandler = null;

        /**
        * checkBroadcastRunnable - the runnable which will check if Broadcast Receiver is running
        */
        Runnable checkBroadcastRunnable = null;

        Intent checkBroadCastState = new Intent();
        checkBroadCastState .setAction("pl.example.CHECK_RECEIVER");
        checkBroadCastState .putExtra("mainView", mMessenger);
        this.sendBroadcast(checkBroadCastState );
        Log.d(TAG,"check if broadcast is running");

        checkBroadcastHandler = new Handler();
        checkBroadcastRunnable = new Runnable(){    

            public void run(){
                if (running == true) {
                    Log.d(TAG,"broadcast is running");
                }
                else {
                    Log.d(TAG,"broadcast is not running");
                }
            }
        };
        checkBroadcastHandler.postDelayed(checkBroadcastRunnable,100);
        return;
    }

.............
} 
```

广播接收器：

```
public class BroadCastReceiver_example extends BroadcastReceiver {

public static final int ALIVE = 1;
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Bundle extras = intent.getExtras();
    String action = intent.getAction();
    if (action.equals("pl.example.CHECK_RECEIVER")) {
        Log.d(TAG, "Received broadcast live checker");
        Messenger mainAppMessanger = (Messenger) extras.get("mainView");
        try {
            mainAppMessanger.send(Message.obtain(null, ALIVE));
        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    .........

}

} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-13T20:17:18.933

在我的情况下，我想用传入的短信更新我的活动中的文本视图，我所做的是使用 putextra 添加所需的信息，然后从广播接收器开始活动：

```
Intent intentone = new Intent(context.getApplicationContext(), enroll.class);
intentone.putExtra("pinbody",message);
intentone.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(intentone); 
```

然后在接收端，即在注册活动中，我使用以下内容提取了该信息并更新了我的 textview：

```
Bundle extras = getIntent().getExtras();
String message = extras.getString("pinbody"); 
```

不确定它是否有帮助，但肯定会引导你找到你想要的。

干杯！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-12-21T07:42:55.227

使用 getter 和 setter 可以轻松解决这个问题。

只需如下声明一个类。

```
public class DetailsGetters {
    private View view;
    public View getview() {
        return view;
    }

    public void setview(View view) {
        this.view = view;
    }
} 
```

在您的主要活动或片段活动上，创建 DetailsGetters 类的实例。

```
DetailsGetters newdetailsinstance=new DetailsGetters(); 
```

在返回视图调用之前`newdetailsinstance.setview(view);`

在广播接收器上获取视图为 `newdetailsinstance.getview(view);`

以下可用于从片段中获取视图并使用 setText 等更新 Ui。

要在主要活动上更新 UI，请传递 Textview 并更改 DeailsGetters 类并为 Textview 创建 getter 和 setter。希望这对某人有所帮助。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-26T11:45:55.667

我使用了 Handler 及其 post() 方法。而不是 runOnUiThread()。无需将 Context 转换为 Activity。它是 runOnUiThread() 的替代方案

```
Handler handler = new Handler();
Runnable runnable = new Runnable() {
    private long startTime = System.currentTimeMillis();
    public void run() {
        while (gameState == GameState.Playing) {  
            try {
                Thread.sleep(1000);
            }    
            catch (InterruptedException e) {
                e.printStackTrace();
            }
            handler.post(new Runnable(){
                public void run() {
                   tvTime.setText("" + ((System.currentTimeMillis() - this.startTime) / 1000));
            }
        });
        }
    }
};
new Thread(runnable).start(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-03-01T11:16:49.247

您应该将广播接收器作为内部类，这样它就可以访问所有字段来更新 UI。

[请参阅 nick butcher Plaid- Nick Butcher(Github) 制作](https://github.com/nickbutcher/plaid/blob/master/app/src/main/java/io/plaidapp/ui/HomeActivity.java)的这款 Plaid 应用程序

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-03-13T12:42:49.467

**通过广播接收器获取当前日期时间和秒并在 UI 中更新**

```
 package com.keshav.broadcasttest;

    import java.util.Date;

    import android.app.Service;
    import android.content.Intent;
    import android.os.Handler;
    import android.os.IBinder;
    import android.util.Log;

    public class BroadcastService  extends Service {
       private static final String TAG = "BroadcastService";
       public static final String BROADCAST_ACTION = "com.keshav.broadcasttest.displayevent";
       private final Handler handler = new Handler();
       Intent intent;
       int counter = 0;

       @Override
       public void onCreate() {
          super.onCreate();

           intent = new Intent(BROADCAST_ACTION); 
       }

        @Override
        public void onStart(Intent intent, int startId) {
            handler.removeCallbacks(sendUpdatesToUI_Runnable);
            handler.postDelayed(sendUpdatesToUI_Runnable, 1000); // 1 second

        }

        private Runnable sendUpdatesToUI_Runnable = new Runnable() {
           public void run() {
              DisplayLoggingInfo();         
               handler.postDelayed(this, 10000); // 10 seconds
           }
        };    

        private void DisplayLoggingInfo() {
           Log.d(TAG, "entered DisplayLoggingInfo");

           intent.putExtra("time", new Date().toLocaleString());
           intent.putExtra("counter", String.valueOf(++counter));
           sendBroadcast(intent);
        }

       @Override
       public IBinder onBind(Intent intent) {
          return null;
       }

       @Override
       public void onDestroy() {     
            handler.removeCallbacks(sendUpdatesToUI_Runnable);
          super.onDestroy();
       }     
    }
    ============================================

    package com.keshav.broadcasttest;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.util.Log;
import android.widget.TextView;

public class BroadcastTest extends Activity {
    private static final String TAG = "BroadcastTest";
    private Intent intent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        intent = new Intent(this, BroadcastService.class);
    }

    private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            updateUI(intent);       
        }
    };    

    @Override
    public void onResume() {
        super.onResume();       
        startService(intent);
        registerReceiver(broadcastReceiver, new IntentFilter(BroadcastService.BROADCAST_ACTION));
    }

    @Override
    public void onPause() {
        super.onPause();
        unregisterReceiver(broadcastReceiver);
        stopService(intent);        
    }   

    private void updateUI(Intent intent) {
        String counter = intent.getStringExtra("counter"); 
        String time = intent.getStringExtra("time");
        Log.d(TAG, counter);
        Log.d(TAG, time);

        TextView txtDateTime = (TextView) findViewById(R.id.txtDateTime);   
        TextView txtCounter = (TextView) findViewById(R.id.txtCounter);
        txtDateTime.setText(time);
        txtCounter.setText(counter);
    }
}
    =============================

    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
        <TableLayout android:id="@+id/tableGPS"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="7px"
            android:stretchColumns="1">
            <TableRow
                android:layout_margin="1dip">
                <TextView android:layout_gravity="right"
                    android:text="Time:"
                    android:layout_marginRight="7px"
                    android:layout_width="130px" />
                <TextView android:id="@+id/txtDateTime"
                    android:gravity="left"
                    android:layout_span="2" />
            </TableRow>
            <TableRow
                android:layout_margin="1px">
                <TextView android:layout_gravity="right"
                    android:text="Counter:"
                    android:layout_marginRight="7px"
                    android:layout_width="160px" />
                <TextView android:id="@+id/txtCounter"
                    android:gravity="left" />
            </TableRow>
        </TableLayout>
    </LinearLayout>

    ===========================================

    <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.keshav.broadcasttest">

        <application
            android:allowBackup="true"
            android:icon="@mipmap/ic_launcher"
            android:label="@string/app_name"
            android:roundIcon="@mipmap/ic_launcher_round"
            android:supportsRtl="true"
            android:theme="@style/AppTheme">
            <activity android:name=".BroadcastTest">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />

                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>

            <service android:name=".BroadcastService" />
        </application>

    </manifest> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-04T07:47:08.287

BroadcastReceiver 的 onReceive() 方法在主线程中运行，因此您可以在此方法中修改 UI，也可以在主线程中运行 onReceive() 避免从这里执行长时间运行的操作。

**来自官方文档：**

因为接收者的 onReceive(Context, Intent) 方法在主线程上运行，所以它应该快速执行并返回。如果您需要执行长时间运行的工作，请注意生成线程或启动后台服务，因为系统可以在 onReceive() 返回后终止整个进程。有关更多信息，请参阅对进程状态的影响 要执行长时间运行的工作，我们建议：

在接收器的 onReceive() 方法中调用 goAsync() 并将 BroadcastReceiver.PendingResult 传递给后台线程。这在从 onReceive() 返回后保持广播活动。然而，即使采用这种方法，系统仍希望您很快完成广播（不到 10 秒）。它确实允许您将工作转移到另一个线程以避免主线程出现故障。使用 JobScheduler 调度作业。有关详细信息，请参阅智能作业计划。

# c# - 方法覆盖和方法隐藏

> ID：14643388
> 
> 赞同：-2
> 
> 时间：2013-02-01T09:41:06.687
> 
> 标签：c#, base, derived-class

> **可能重复：**
> [C#：新建与覆盖](https://stackoverflow.com/questions/1399127/c-new-versus-override)

```
class BaseAppXmlLogReaders
    {
        public virtual void WriteLog() { }
        public void Add()
        { 
        }
    }
    class DerivedAppXmlLogReaders : BaseAppXmlLogReaders
    {
        public override void WriteLog()
        {

        }
        public new void Add()
        { }
    }

    class Demo
    {
        public static void Main()
        {
            BaseAppXmlLogReaders obj = new DerivedAppXmlLogReaders();
            obj.Add();//Call base class method
            obj.WriteLog();//call derived class method          
        }
    } 
```

我有点困惑，但是它创建了 DerivedAppXmlLogReaders 的对象，但它调用了基类的 Add() 方法和派生类的 WriteLog() 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:49:44.460

如果您调用非虚拟方法，则在您的情况下，将调用您持有引用的类型的方法`BaseAppXmlLogReaders`。如果您正在调用一个`virtual`方法，框架会将调用指向“正确”的、被覆盖的方法。这就是为什么虚拟呼叫成本略高的原因，以及为什么在 99% 的情况下使用它是个坏主意`new`。我还没有看到合理使用`new`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:44:47.293

这是因为您将其处理为`BaseAppXmlLogReaders`. 如果您使用以下行，您将调用派生类的 Add 方法。

```
var obj = new DerivedAppXmlLogReaders(); // or DerivedAppXmlLogReaders obj = ... 
```

编辑：

但是，您仍然可以通过这种方式调用派生类的方法：

```
(obj as DerivedAppXmlLogReaders).Add(); 
```

# jquery - 白色背景闪烁

> ID：14643392
> 
> 赞同：0
> 
> 时间：2013-02-01T09:41:31.200
> 
> 标签：jquery

在这里摆弄这个 jquery 脚本几个小时：

[http://www.graphicbeacon.com/web-design-development/how-to-create-a-background-scrolling-effect-with-jquery/](http://www.graphicbeacon.com/web-design-development/how-to-create-a-background-scrolling-effect-with-jquery/)

为了摆脱页面加载之间出现的图像的白色背景，因为我将它用作网站的背景图像效果。

使用两个 .png 图像并使用 css 将背景颜色设置为透明，并添加了一个淡入淡出效果。

在 FF 和 Opera 中我看不到闪烁，但在 IE、Chrome 和 Safari 中切换页面时。

我敢肯定这里有一个（可能很简单）解决方案，但我只是无法找到它或自己弄清楚。

另外我想知道，是否有可能不需要在每次页面加载时加载脚本，即在页面之间切换时脚本应该继续运行？

请问有哪位大侠给我点建议吗？非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T09:16:38.630

我创建了一个带有一些链接的本地副本，可以看到你的意思。在页面重新加载或调用另一个链接时，它会很快刷新内容。这发生在我的计算机上的每个浏览器中。我在 Safari 6、Chrome 24 和 Firefox 18 中对其进行了测试。这是您无法解决的问题，因为每次都会重新渲染内容。但是您将通过关于如何在每次页面加载时不重新启动动画的附加问题来解决它。

当您希望动画继续运行并且想要切换页面内容时，请使用**AJAX**。AJAX 让您无需刷新整个页面即可发送请求并获得响应。一个例子：

**HML**

```
<!-- div that holds the content - use this in addition to your background divs -->
<div id="content"></div> 
```

**JavaScript**

```
$.ajax({
    // the page with the content, you could use a HTML file for every section on your page
    url: "content.html",
    cache: false
}).done(function( html ) {
        // .done() handles the response, this time we replace the content of our div
        $("#content").html(html);
}); 
```

**内容.html**

```
<!-- can be any valid HTML and JavaScript -->
<p>Hey, this is nice</p> 
```

**恢复**

使用它，您的动画将继续运行，重新渲染页面时不会闪烁，您可以加载所需的所有内容。

**阅读更多**

[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)

**笔记**

您使用的脚本从 2010 年开始在我的 Intel Core Duo i5 上引起了一些计算，并且不时出现滞后。您可以通过在现代浏览器上使用[CSS 过渡](http://www.w3.org/TR/css3-transitions/)来提高整体性能。它将使用更少的 CPU，因为它不需要执行大量的 JavaScript，并且看起来更流畅。

脚本也在使用`eval`. 阅读这篇[文章 为什么使用 JavaScript eval 函数是个坏主意？](https://stackoverflow.com/questions/86513/why-is-using-the-javascript-eval-function-a-bad-idea)得到一个想法并尝试重新编写正在使用它的部分。我想它可以很容易地完成（我没有深入研究代码）。

我希望这对您有所帮助，并为您带来一个不错的解决方案。

# javascript - knockoutjs：与 svg 元素的动态绑定

> ID：14643393
> 
> 赞同：0
> 
> 时间：2013-02-01T09:41:31.713
> 
> 标签：javascript, dom, svg, knockout.js, d3.js

`<svg></svg>`> 我正在创建新的 svg 元素并为它们动态设置绑定。但我不知道为什么它不起作用。我是 knockoutjs 的新手，所以请让我知道实际问题在哪里。这是问题（）的[jsFiddle链接](http://jsfiddle.net/sb2BX/12/)。让我知道是否需要任何澄清。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:49:36.163

您必须`ko.applyBindings`再次调用新注入的元素。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/8281875/knockout-js-update-bindings)。

# java - 是否有任何设计模式可以根据设备类型在数据之间切换？

> ID：14643396
> 
> 赞同：9
> 
> 时间：2013-02-01T09:41:42.897
> 
> 标签：java, design-patterns, spring-mvc, spring-mobile

我们有一个基于 Spring MVC 的 Web 应用程序。现在我们需要修改这个应用程序，以便它在智能手机上正确呈现。

为此，我们将为智能手机创建单独的 JSP。因此，如果请求来自浏览器，我们将检查请求是否来自桌面，然后我们将显示正常的 JSP，或者如果请求来自移动设备，那么我们将显示智能手机的 JSP。

我们将为此使用spring Mobile。

在某些情况下，我们还希望限制智能手机上的数据。我们可能不会显示 JSP 中的所有数据。

例如，我们可能只需要在菜单中显示几个项目。桌面 Web 应用程序将显示完整的菜单，而智能手机将显示较少的菜单项。尽管我们将有不同的 JSP 用于桌面菜单和移动菜单，但菜单项来自数据库。

有什么设计模式可以帮助我们吗？我们不想写那些 if else 条件来检查设备类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:54:16.860

如果您从 UI 的角度看到菜单问题，那么您可以使用[抽象工厂](http://en.wikipedia.org/wiki/Abstract_factory_pattern#Java)设计模式。通常，您将拥有一个生成菜单的通用界面：

```
interface MenuFactory {
    Object createMainMenu();
    Object createSomeOtherMenu();
} 
```

和两个实现：

```
public class DesktopAppMenuFactory implements MenuFactory {
    public Object createMainMenu() {
         ask dao for menus intended for desktop variant
         return ...
    }

    public Object createSomeOtherMenu() {
         ask dao for menus intended for desktop variant
         return ...
    }
}

public class MobileAppMenuFactory implements MenuFactory {
    public Object createMainMenu() {
         ask dao for menus intended for mobile variant
         return ...
    }

    public Object createSomeOtherMenu() {
         ask dao for menus intended for mobile variant
         return ...
    }
} 
```

然后编写一个方法，该方法将在给定客户端类型的情况下创建适当的工厂：

```
public static MenuFactory createMenuFactory(String clientType) {
    if( clientType is desktop.. ) {
        return new DesktopAppMenuFactory();

    } else if( clientType is mobile.. ) {
        return new MobileAppMenuFactory();
    }
} 
```

并在您的控制器和 JSP 中使用 MenuFactory，而不用担心它是哪个变体。这是唯一的 if 语句在 ebove 实用程序方法`createMenuFactory()`中。

另一方面，如果您从数据的角度来看问题，那么将[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)应用于服务层将是合适的。但是代码最终会与上面的代码非常相似，`*Factory`重命名为`*Service`并且实现被称为策略而不是工厂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T12:29:26.950

大多数其他建议的解决方案都是过度设计的，遵循保持简单的原则。

使用 JSP 在 XML 中生成页面的标准化抽象，该 JSP 根据客户端设备类型选择适当的不同样式表以包含在内。这保持了内容与演示的良好分离，而无需将自己绑定到特定设备。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T08:56:19.703

看看[Sitemesh 框架](http://wiki.sitemesh.org/display/sitemesh/Home)，*它是一个轻量级且灵活的 Java Web 应用程序框架，它应用了 Gang of Four 装饰器模式来实现内容与表示的清晰分离*。

下面是一个示例，向您展示如何使用它。

* * *

## 配置

*pom.xml*

```
<dependency>
    <groupId>opensymphony</groupId>
    <artifactId>sitemesh</artifactId>
    <version>2.4.2</version>
</dependency> 
```

*WEB-INF/web.xml*

```
<filter>
    <filter-name>sitemeshFilter</filter-name>
    <filter-class>com.opensymphony.module.sitemesh.filter.PageFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>sitemeshFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
</filter-mapping> 
```

*WEB-INF/sitemesh.xml*

```
<?xml version="1.0" encoding="UTF-8" ?>
<sitemesh>
    <property name="decorators-file" value="/WEB-INF/sitemesh-decorators.xml" />
    <excludes file="${decorators-file}" />
    <page-parsers>
       <parser content-type="text/html" class="com.opensymphony.module.sitemesh.multipass.DivExtractingPageParser"/>
    </page-parsers>
    <decorator-mappers>
        <mapper class="com.opensymphony.module.sitemesh.mapper.ParameterDecoratorMapper">
            <param name="decorator.parameter" value="decorator" />
        </mapper>
        <mapper
            class="com.opensymphony.module.sitemesh.mapper.PrintableDecoratorMapper">
            <param name="decorator" value="none" />
            <param name="parameter.name" value="printable" />
            <param name="parameter.value" value="true" />
        </mapper>
        <mapper class="com.opensymphony.module.sitemesh.mapper.PageDecoratorMapper">
            <param name="property.1" value="meta.decorator" />
            <param name="property.2" value="decorator" />
        </mapper>
        <mapper class="com.opensymphony.module.sitemesh.mapper.ConfigDecoratorMapper">
            <param name="config" value="${decorators-file}" />
        </mapper>
    </decorator-mappers>
</sitemesh> 
```

*WEB-INF/sitemesh-decorators.xml*

```
<?xml version="1.0" encoding="UTF-8" ?>
<decorators defaultdir="/WEB-INF/sitemesh">
    <decorator name="mobile" page="mobile.jsp" />
    <decorator name="tablet" page="tablet.jsp" />
    <decorator name="desktop" page="desktop.jsp" />
    <excludes>
        <pattern>*.html*</pattern>
        <pattern>*.json*</pattern>
        <pattern>*.xml*</pattern>
        <pattern>*.download*</pattern>
    </excludes>
</decorators> 
```

* * *

## 模板

*WEB-INF/sitemesh/mobile.jsp*

```
<%@ taglib prefix="decorator" uri="http://www.opensymphony.com/sitemesh/decorator" 
%><%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"
%><!DOCTYPE HTML>
<html>
    <head>
        <title>Mobile Template - <decorator:title /></title>
    </head>
    <body>        
        <nav class="mobile">
            <ul>
                <li>Menu 1</li>
                <li>Menu 2</li>
            </ul>
        </nav>
        <div id="wrapper">
            <decorator:body />
        </div>
    </body>
</html> 
```

*WEB-INF/sitemesh/tablet.jsp*

```
<%@ taglib prefix="decorator" uri="http://www.opensymphony.com/sitemesh/decorator" 
%><%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"
%><!DOCTYPE HTML>
<html>
    <head>
        <title>Tablet Template - <decorator:title /></title>
    </head>
    <body>        
        <nav class="tablet">
            <ul>
                <li>Menu 1</li>
                <li>Menu 2</li>
                <li>Menu 3</li>
                <li>Menu 4</li>
            </ul>
        </nav>
        <div id="wrapper">
            <decorator:body />
        </div>
    </body>
</html> 
```

*WEB-INF/sitemesh/desktop.jsp*

```
<%@ taglib prefix="decorator" uri="http://www.opensymphony.com/sitemesh/decorator" 
%><%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"
%><!DOCTYPE HTML>
<html>
    <head>
        <title>Desktop Template - <decorator:title /></title>
    </head>
    <body>        
        <nav class="desktop">
            <ul>
                <li>Menu 1</li>
                <li>Menu 2</li>
                <li>Menu 3</li>
                <li>Menu 4</li>
                <li>Menu 5</li>
                <li>Menu 6</li>
            </ul>
        </nav>
        <div id="wrapper">
            <decorator:body />
        </div>
    </body>
</html> 
```

* * *

## 映射

*家庭控制器.java*

```
@RequestMapping("/")
public String home(Device device) {
    if (device.isMobile()) {
        return "mobile/home/index";
    } else if (device.isTablet()) {
        return "tablet/home/index";
    } else {
        return "desktop/home/index";       
    }
} 
```

*WEB-INF/views/mobile/home/index.jsp*

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"
%><head>
    <meta name="decorator" content="mobile" />
    <title>Mobile Home Page</title>
</head>
<body>
    <p>Mobile Page Content</p>
</body> 
```

*WEB-INF/views/tablet/home/index.jsp*

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"
%><head>
    <meta name="decorator" content="tablet" />
    <title>Tablet Home Page</title>
</head>
<body>
    <p>Tablet Page Content</p>
</body> 
```

*WEB-INF/views/desktop/home/index.jsp*

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"
%><head>
    <meta name="decorator" content="desktop" />
    <title>Desktop Home Page</title>
</head>
<body>
    <p>Desktop Page Content</p>
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T16:57:03.517

如果您的主要目标是添加对移动网络的支持，我会考虑的另一种选择是只拥有一个响应式网站版本。

您可以使用许多 css 框架来实现这一点，其中最流行的框架之一是[Twitter 的 Bootstrap](http://twitter.github.com/bootstrap/)。

使用这种方法，屏幕将根据更小或更大的屏幕尺寸相应地调整大小。您可以通过以下示例查看流体布局：[Bootstrap Fluid](http://twitter.github.com/bootstrap/examples/fluid.html)。

这样，您的 Web 应用程序会调整其布局和内容（包括菜单和图像）的大小，以便在多种屏幕尺寸上使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T19:26:43.197

如果您使用的是 Spring 3 MVC，并且遵守让 Controller 方法返回 View 的正常模式，那么我认为最简单和最正确的方法是使用单独的方法来处理移动设备或使用相同的方法，但返回不同的视图（通过您的视图解析器）。

因此，例如，我的方法可能会执行以下操作：

```
@RequestMapping
public String default(Model uiModel, HttpServletRequest request) {
  // Do common stuff here, like load your model

  if(request.getHeader("User-Agent").indexOf("Mobile") != -1) {
    return "normalForm";
  } else {
    return "mobileForm";
  }
} 
```

您甚至可以根据一些预定义的模式获得幻想并动态构建名称，例如 iphone 获得“form_iphone”而 Chrome 获得“form_chrome”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T16:38:49.230

记住智能手机有多种尺寸，这意味着两个视图是不够的。看看 HTML5。您甚至可能不需要两个视图。有一个响应式网页。响应式页面会重新调整自身大小以适应大小尺寸。例如： http: [//twitter.github.com/bootstrap/index.html](http://twitter.github.com/bootstrap/index.html)。尝试重新调整以上链接中的页面大小。你可以有一个菜单，它会在较小的屏幕上自我压缩（或删除一些项目）。如果触摸在您的应用程序中很重要，请查看确实触摸的 java 脚本框架。另请参阅[http://verekia.com/initializr/responsive-template](http://verekia.com/initializr/responsive-template)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-04T17:16:42.130

假设您打算将您的支持扩展到任何类型的设备，我会创建某种支持来帮助实现这一点。我可以想到一个简单的方法，但我假设很多（您的菜单是根据示例的用户许可呈现的......）。

根据当前设备更改用户的权限（桌面用户可以看到所有内容，移动用户权限较少，因此无法在菜单上看到某些项目）。您可以登录用户，并根据设备对他的权限进行后期处理。

这可以通过在菜单表上添加一列或创建某种处理器来删除某些设备无法呈现的菜单元素来创建。

# c++ - 为什么来自 rvalued-stl-container 的元素获取器返回左值？

> ID：14643404
> 
> 赞同：1
> 
> 时间：2013-02-01T09:42:04.173
> 
> 标签：c++, c++11, std, rvalue

我有一个代码必须处理重新评估的 stl 容器。我的问题是：为什么从 rvalued-stl-container 返回元素的成员函数，例如：

```
vector<int>{1}.front() 
```

返回左值而不是右值？标准指定右值对象的成员是右值。我知道我可以用 . 显式移动返回的元素`std::move`。但是当返回值显然是右值时，具有左值返回类型的逻辑是什么？

如果您将这样的表达式用作某些值重载函数的参数，则会选择错误的重载并且被调用的函数将获得左值引用（很快就会变得悬空）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:17:50.970

出于入站右值和入站右值的精神，可能为出站右值添加`outplace_front()`和`outplace_back()`为更好的名称 。`emplace_front()``emplace_back()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:19:25.870

一旦编译器决定调用一个特定的成员函数（`int &std::vector<int>::front()`例如），类型系统只知道`int &`返回了 an，因此它必须将其视为左值，即使它的生命周期仅限于所有者临时的生命周期。

在 C++11 之前，不可能根据正在调用它的对象的值类别来重载成员函数（参见[什么是“*this 的右值引用”？](https://stackoverflow.com/questions/8610571/what-is-rvalue-reference-for-this)），仅在目的; 并且非常量临时显然不是`const`，因此非`const`重载必须可用。

除了您已经确定的潜在悬空左值引用之外，这在 C++03 中导致了可以使用（成员函数运算符）但不能使用（自由运算符）调用`operator<<`临时的情况；C++11 用右值引用的自由运算符重载和成员函数的右值重载解决了这个问题。`ostream``char``string``*this`

Rvalue`*this`允许三个重载`front`：

```
T &front() & { return data_[0]; }
const T &front() const & { return data_[0]; }
T &&front() && { return std::move(data_[0]); } 
```

右值重载的不同函数体有点笨拙。`*this`这是因为 ref 限定符对成员函数体内的访问成员没有影响。

# ios - 如何在 iOS 中获取复制的图像？

> ID：14643405
> 
> 赞同：1
> 
> 时间：2013-02-01T09:42:11.740
> 
> 标签：ios, objective-c, uiimage, uipasteboard

我知道当用户在相册或 Safari 中进行图像复制时。有没有办法以编程方式在我的应用程序中获取此图像？

请解释一下如何获取此复制图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:39:56.523

找到这样一个简单而有趣的解决方案给我留下了深刻的印象:)

```
UIImage *img = [UIPasteboard generalPasteboard].image; 
```

# c - 零元素的数组需要什么？

> ID：14643406
> 
> 赞同：130
> 
> 时间：2013-02-01T09:42:13.657
> 
> 标签：c, structure, flexible-array-member

在 Linux 内核代码中，我发现了以下我无法理解的内容。

```
 struct bts_action {
         u16 type;
         u16 size;
         u8 data[0];
 } __attribute__ ((packed)); 
```

代码在这里： http: [//lxr.free-electrons.com/source/include/linux/ti_wilink_st.h](http://lxr.free-electrons.com/source/include/linux/ti_wilink_st.h)

零元素数据数组的需求和目的是什么？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-02-01T09:49:40.223

这是一种具有可变数据大小的方法，而无需调用`malloc`（`kmalloc`在这种情况下）两次。你会像这样使用它：

```
struct bts_action *var = kmalloc(sizeof(*var) + extra, GFP_KERNEL); 
```

这曾经不是标准的，被认为是一种 hack（正如 Aniket 所说），但它**在 C99 中被标准化**。现在它的标准格式是：

```
struct bts_action {
     u16 type;
     u16 size;
     u8 data[];
} __attribute__ ((packed)); /* Note: the __attribute__ is irrelevant here */ 
```

请注意，您没有提及该`data`字段的任何大小。另请注意，此特殊变量只能出现在结构的末尾。

* * *

在 C99 中，这件事在 6.7.2.1.16 （强调我的）中进行了解释：

> 作为一种特殊情况，具有多个命名成员的结构的最后一个元素可能具有不完整的数组类型；**这称为灵活数组成员**. 在大多数情况下，灵活数组成员被忽略。特别是，结构的大小就像省略了柔性数组成员一样，只是它可能具有比省略所暗示的更多的尾随填充。然而，当一个 . （或->）运算符的左操作数是（指向）具有灵活数组成员的结构，右操作数命名该成员，它的行为就像该成员被替换为最长的数组（具有相同的元素类型) 不会使结构大于被访问的对象；数组的偏移量应保持灵活数组成员的偏移量，即使这与替换数组的偏移量不同。如果这个数组没有元素，

或者换句话说，如果你有：

```
struct something
{
    /* other variables */
    char data[];
}

struct something *var = malloc(sizeof(*var) + extra); 
```

您可以使用`var->data`中的索引进行访问`[0, extra)`。请注意，这`sizeof(struct something)`只会给出其他变量`data`的大小，即大小为 0。

* * *

值得注意的是，标准实际上是如何给出`malloc`这样一个构造的示例（6.7.2.1.17）：

```
struct s { int n; double d[]; };

int m = /* some value */;
struct s *p = malloc(sizeof (struct s) + sizeof (double [m])); 
```

标准在同一位置的另一个有趣的注释是（强调我的）：

> 假设对 malloc 的调用成功，p 指向的对象的行为，在大多数情况下，就好像 p 已被声明为：
> 
> ```
> struct { int n; double d[m]; } *p; 
> ```
> 
> （在某些情况下，这种等价性会被破坏；特别*是成员 d 的偏移量可能不一样*）。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-02-01T09:45:05.893

[实际上，对于GCC](http://en.wikipedia.org/wiki/GNU_Compiler_Collection) ( [C90](http://en.wikipedia.org/wiki/ANSI_C#C89_and_C90) )，这实际上是一个 hack 。

它也被称为[struct hack](http://www.geeksforgeeks.org/struct-hack/)。

所以下一次，我会说：

```
struct bts_action *bts = malloc(sizeof(struct bts_action) + sizeof(char)*100); 
```

这相当于说：

```
struct bts_action{
    u16 type;
    u16 size;
    u8 data[100];
}; 
```

我可以创建任意数量的此类结构对象。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-01T09:48:52.257

这个想法是允许在结构的末尾有一个可变大小的数组。据推测，`bts_action`是一些具有固定大小标头（`type`和`size`字段）和可变大小`data`成员的数据包。通过将其声明为长度为 0 的数组，它可以像任何其他数组一样被索引。然后，您将分配一个`bts_action`1024 字节`data`大小的结构，如下所示：

```
size_t size = 1024;
struct bts_action* action = (struct bts_action*)malloc(sizeof(struct bts_action) + size); 
```

另见：[http ://c2.com/cgi/wiki?StructHack](http://c2.com/cgi/wiki?StructHack)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-01T13:27:37.893

该代码是无效的 C（[见此](https://stackoverflow.com/questions/9722632/what-happens-if-i-define-a-0-size-array-in-c-c/9723093#9723093)）。由于显而易见的原因，Linux 内核根本不关心可移植性，因此它使用了大量非标准代码。

他们正在做的是一个数组大小为 0 的 GCC 非标准扩展。一个符合标准的程序会写`u8 data[];`出来，这意味着同样的事情。Linux 内核的作者显然喜欢让事情变得不必要的复杂和非标准，如果这样做的选项会显露出来的话。

在较早的 C 标准中，以空数组结束结构被称为“结构黑客”。其他人已经在其他答案中解释了它的目的。在 C90 标准中，struct hack 是未定义的行为，可能导致崩溃，主要是因为 C 编译器可以在结构末尾自由添加任意数量的填充字节。这样的填充字节可能会与您尝试在结构末尾“破解”的数据发生冲突。

GCC 很早就做了一个非标准的扩展，将其从未定义行为更改为明确定义的行为。C99 标准随后采用了这个概念，因此任何现代 C 程序都可以毫无风险地使用这个特性。在 C99/C11 中称为*灵活数组成员。*

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-15T17:53:05.567

零长度数组的另一种用法是作为结构内的命名标签，以帮助编译时结构偏移检查。

假设您有一些大型结构定义（跨越多个高速缓存行），您希望确保它们在开始和穿过边界的中间都与高速缓存行边界对齐。

```
struct example_large_s
{
    u32 first; // align to CL
    u32 data;
    ....
    u64 *second;  // align to second CL after the first one
    ....
}; 
```

在代码中，您可以使用 GCC 扩展来声明它们，例如：

```
__attribute__((aligned(CACHE_LINE_BYTES))) 
```

但是您仍然希望确保在运行时强制执行此操作。

```
ASSERT (offsetof (example_large_s, first) == 0);
ASSERT (offsetof (example_large_s, second) == CACHE_LINE_BYTES); 
```

这适用于单个结构，但很难涵盖许多结构，每个结构都有不同的成员名称要对齐。您很可能会得到如下代码，您必须在其中找到每个结构的第一个成员的名称：

```
assert (offsetof (one_struct,     <name_of_first_member>) == 0);
assert (offsetof (one_struct,     <name_of_second_member>) == CACHE_LINE_BYTES);
assert (offsetof (another_struct, <name_of_first_member>) == 0);
assert (offsetof (another_struct, <name_of_second_member>) == CACHE_LINE_BYTES); 
```

您可以在结构中声明一个长度为零的数组，作为具有一致名称但不占用任何空间的命名标签，而不是采用这种方式。

```
#define CACHE_LINE_ALIGN_MARK(mark) u8 mark[0] __attribute__((aligned(CACHE_LINE_BYTES)))
struct example_large_s
{
    CACHE_LINE_ALIGN_MARK (cacheline0);
    u32 first; // align to CL
    u32 data;
    ....
    CACHE_LINE_ALIGN_MARK (cacheline1);
    u64 *second;  // align to second CL after the first one
    ....
}; 
```

然后运行时断言代码将更容易维护：

```
assert (offsetof (one_struct,     cacheline0) == 0);
assert (offsetof (one_struct,     cacheline1) == CACHE_LINE_BYTES);
assert (offsetof (another_struct, cacheline0) == 0);
assert (offsetof (another_struct, cacheline1) == CACHE_LINE_BYTES); 
```

# hardware - 如何连接不同的 Verilog 模块？

> ID：14643408
> 
> 赞同：2
> 
> 时间：2013-02-01T09:42:23.180
> 
> 标签：hardware, verilog, fpga, hdl

我正在做一个反应计时器。我之前已经制作了单独的模块，现在剩下的就是集体使用它们。

在其他语言中，它们用作返回值的函数。在这里，我了解模块已实例化。我知道如何实例化，就像我为 LFSR 所做的那样，但对于 LED 多路复用器，我不知道该怎么做。

这是我的 LFSR 代码，它将被实例化到主模块中：

```
module LFSR(
    input clock,
    input reset,
    output [29:0] rnd
    );

wire feedback = rnd[29] ^ rnd[5] ^ rnd[3] ^ rnd[0]; 

reg [29:0] random;

always @ (posedge clock or posedge reset)
begin
    if (reset)
        random <= 30'hF;
    else
        random <= {random[28:0], feedback};
end

assign rnd = random;

endmodule 
```

这是主要模块。在某些地方，我必须调用 LED 电路来显示“Hi”，然后再显示秒表。我已经用评论标记了它们。我该怎么做？

```
module reaction(
    input clock,
    input reset,
    input start,
    input stop,
    output a,
    output b,
    output c,
    output d,
    output e,
    output f,
    output g,
    output h,
    output dp,
    output led
    );

reg [29:0] random;

LFSR random_gen(.clock(clock), .reset(reset), .rnd(random));

localparam [1:0]
                        idle = 2'b00,
                        start = 2'b01,
                        time_it = 2'b10,
                        stop = 2'b11;

reg state_reg, state_next;
reg [29:0] count_reg, count_next;

always @ (posedge clock or posedge reset)
begin
    if(reset)
        begin 
            state_reg <= idle;
            count_reg <= 0;
        end
    else
        state_reg <= state_next;
        count_reg <= count_next;
end

always @ (*)
begin
    state_next = state_reg; //default state stays the same
    count_next = count_reg;

    case(state_reg)
        idle:
                //"DISPLAY HI HERE .......... HOW??
                if(start)
                begin
                    count_next = random;
                    state_next = start;
                end

        start:
                if(count_next == 750000000) // 750M equals a delay of 15 seconds.
                begin
                    led = 1'b1;
                    state_next = time_it;
                end

                else
                    count_next = count_reg + 1;

        time_it:
                    //START STOPWATCH???????? 
```

现在我已经做了一个工作秒表。它写在下面：

```
module stopwatch(
    input clock,
    input reset,
    input start,
    output a, b, c, d, e, f, g, dp,
    output [3:0] an
    );

reg [3:0] reg_d0, reg_d1, reg_d2, reg_d3; //registers that will hold the individual counts
reg [22:0] ticker; //23 bits needed to count up to 5M bits
wire click;

//the mod 5M clock to generate a tick ever 0.1 second

always @ (posedge clock or posedge reset)
begin
    if(reset)

        ticker <= 0;

    else if(ticker == 5000000) //if it reaches the desired max value reset it
        ticker <= 0;
    else if(start) //only start if the input is set high
        ticker <= ticker + 1;
end

assign click = ((ticker == 5000000)?1'b1:1'b0); //click to be assigned high every 0.1 second

always @ (posedge clock or posedge reset)
begin
    if (reset)
        begin
            reg_d0 <= 0;
            reg_d1 <= 0;
            reg_d2 <= 0;
            reg_d3 <= 0;
        end

    else if (click) //increment at every click
        begin
            if(reg_d0 == 9) //xxx9 - the 0.1 second digit
            begin  //if_1
                reg_d0 <= 0;

                if (reg_d1 == 9) //xx99 
                begin  // if_2
                    reg_d1 <= 0;
                    if (reg_d2 == 5) //x599 - the two digit seconds digits
                    begin //if_3
                        reg_d2 <= 0;
                        if(reg_d3 == 9) //9599 - The minute digit
                            reg_d3 <= 0;
                        else
                            reg_d3 <= reg_d3 + 1;
                    end
                    else //else_3
                        reg_d2 <= reg_d2 + 1;
                end

                else //else_2
                    reg_d1 <= reg_d1 + 1;
            end 

            else //else_1
                reg_d0 <= reg_d0 + 1;
        end
end

//The Circuit for Multiplexing - Look at my other post for details on this

localparam N = 18;

reg [N-1:0]count;

always @ (posedge clock or posedge reset)
    begin
        if (reset)
            count <= 0;
        else
            count <= count + 1;
    end

reg [6:0]sseg;
reg [3:0]an_temp;
reg reg_dp;
always @ (*)
    begin
        case(count[N-1:N-2])

            2'b00 : 
                begin
                    sseg = reg_d0;
                    an_temp = 4'b1110;
                    reg_dp = 1'b1;
                end

            2'b01:
                begin
                    sseg = reg_d1;
                    an_temp = 4'b1101;
                    reg_dp = 1'b0;
                end

            2'b10:
                begin
                    sseg = reg_d2;
                    an_temp = 4'b1011;
                    reg_dp = 1'b1;
                end

            2'b11:
                begin
                    sseg = reg_d3;
                    an_temp = 4'b0111;
                    reg_dp = 1'b0;
                end
        endcase
    end
assign an = an_temp;

reg [6:0] sseg_temp;    
always @ (*)
    begin
        case(sseg)
            4'd0 : sseg_temp = 7'b1000000;
            4'd1 : sseg_temp = 7'b1111001;
            4'd2 : sseg_temp = 7'b0100100;
            4'd3 : sseg_temp = 7'b0110000;
            4'd4 : sseg_temp = 7'b0011001;
            4'd5 : sseg_temp = 7'b0010010;
            4'd6 : sseg_temp = 7'b0000010;
            4'd7 : sseg_temp = 7'b1111000;
            4'd8 : sseg_temp = 7'b0000000;
            4'd9 : sseg_temp = 7'b0010000;
            default : sseg_temp = 7'b0111111; //dash
        endcase
    end
assign {g, f, e, d, c, b, a} = sseg_temp;   
assign dp = reg_dp;

endmodule 
```

我希望我能够解释我的问题。

感谢您阅读

**更新代码：**

```
module reaction(
    input clock,
    input reset,
    input start,
    input stop,
    output a,
    output b,
    output c,
    output d,
    output e,
    output f,
    output g,
    output dp,
     output [3:0] an,
    output reg led
    );

wire [29:0] random;
reg go_hi, go_start;

//instantiate the random number generator
LFSR random_gen(.clock(clock), .reset(reset), .rnd(random));

//inistantiate module to display hi
say_hi sayhi(.clock(clock), .reset(reset), .go(go_hi), .a(a), .b(b), .c(c), .d(d), 
                    .e(e), .f(f), .g(g), .dp(dp), .an(an));

//instantiate the millisecond timer
stopwatch timer(.clock(clock), .reset(reset), .start(go_start), .a(a), .b(b), .c(c), .d(d), 
                    .e(e), .f(f), .g(g), .dp(dp), .an(an));

localparam [1:0]
                        idle = 2'b00,
                        starting = 2'b01,
                        time_it = 2'b10;
                        //stop = 2'b11;

reg state_reg, state_next;
reg [29:0] count_reg, count_next;

always @ (posedge clock or posedge reset)
begin
    if(reset)
        begin 
            state_reg <= idle;
            count_reg <= 0;
        end
    else
        state_reg <= state_next;
        count_reg <= count_next;
end

always @ (*)
begin
    state_next = state_reg; //default state stays the same
    count_next = count_reg;

    case(state_reg)
        idle:
            begin
                //DISPLAY HI HERE
                go_hi = 1;
                if(start)
                begin
                    go_hi = 0;  //dont display hi anymore
                    count_next = random;
                    state_next = starting;
                end
            end
        starting:
            begin
                if(count_next == 750) // 750M equals a delay of 15 seconds.
                begin                           //and starting from 'rand' ensures a random delay
                    led = 1'b1;
                    state_next = time_it;
                end

                else
                    count_next = count_reg + 1;
            end     
        time_it:
            begin
                    go_start = 1;
                    if(stop)
                        go_start = 0;
            end

        endcase

end

endmodule 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:15:15.413

> 在某些地方，我必须调用 LED 电路来显示“Hi”，然后再显示秒表。我已经用评论标记了它们。我该怎么做？

如果您想了解verilog，您必须打破“调用”模块的想法。模块不会仅在您希望它们存在时才存在。在您的情况下，您需要实例化一个秒表模块，并将端口连接起来（LFSR 实例化下方的行可能是执行此操作的合适位置）。

执行此操作时，请意识到您的秒表**始终在**驱动输出 LED，而不仅仅是在某些状态下。如果你想改变显示模式（显示像*Hi*这样的字符串，或者显示秒表时间），你应该有一个输入到你的秒表模块，告诉它应该显示什么。

也许`display_mode`可以使用类似的输入，其中 2'd0 表示显示“hi”，2'd1 表示显示秒表时间，2'd2 表示显示舞蹈模式等。

在您的主要反应模块中的适当位置，您可以更改 的值`display_mode`，这将更改`stopwatch`驱动返回的内容。

# sql-server - 将新行添加到表后动态创建视图

> ID：14643412
> 
> 赞同：0
> 
> 时间：2013-02-01T09:42:39.697
> 
> 标签：sql-server, view, database-trigger

我有一个包含 4 个表的数据库

-电池-电池-所有者

每个电池有多个电池和一个所有者。

单元格表将包含大量条目。我想要一个触发器，为每个显示电池信息及其电池信息的新电池创建视图。

我有一个运行良好的 postgre sql 触发器（感谢 stackoverflow :)）：

```
 BEGIN

EXECUTE $$CREATE OR REPLACE VIEW battery_vue
AS
SELECT * FROM cells WHERE battery_serial = $$ || NEW.battery_serial;

RETURN NEW;

END; 
```

但我无法将其转置到 SQL 服务器，而且我完全不知道该怎么做。

这是我的数据库的简单图表：

![数据库图](../Images/844b04664cdd72d45bd54a41f35ecfd6.png)

因此，最后对于每个新电池，我都需要查看它及其电池。

Ps：对不起，如果我的英语不流利：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:45:04.820

希望这会为您指明正确的方向...

```
 /*Create a test table*/
IF OBJECT_ID('TestBattery') IS NOT NULL
BEGIN
    DROP TABLE dbo.[TestBattery]
END
GO

CREATE TABLE dbo.[TestBattery]
(
id          INT
,owner_id    INT
,data_id     INT
)
GO

/*Create a test trigger*/
IF OBJECT_ID('trg_TestBattery_CreateView') IS NOT NULL
BEGIN
    DROP Trigger dbo.trg_TestBattery_CreateView
END
GO

CREATE TRIGGER [dbo].[trg_TestBattery_CreateView]
ON [dbo].[TestBattery] AFTER INSERT
AS
SET NOCOUNT ON 

DECLARE @BatteryID      INT
        ,@View          VARCHAR(200)
        ,@SQLCreateView VARCHAR(MAX)

SELECT @BatteryID = ID FROM INSERTED

/*Dynamically generate new view name based on BatteryID that was inserted*/
SELECT @View = 'TestBattery_'+CAST(@BatteryID AS VARCHAR)

/*Generate SQL to create the view*/
SELECT @SQLCreateView = 'CREATE VIEW '+@View+' AS SELECT [id],[owner_id],[data_id] FROM dbo.[TestBattery] WHERE ID = '+CAST(@BatteryID AS VARCHAR)

/*We create the view only if it doesn't exist*/
IF OBJECT_ID(@View) IS NULL
BEGIN

EXEC(@SQLCreateView)

END
GO

/*Testing your trigger*/
INSERT INTO TestBattery
(
id
,owner_id
,data_id
)
SELECT
'1'
,'2'
,'3'

SELECT * FROM TestBattery
SELECT * FROM TestBattery_1

/*Take out the trash*/
DROP TABLE TestBattery
DROP VIEW TestBattery_1 
```

# android - 2 Dropdowns State and City，根据选择的状态设置城市字符串数组

> ID：14643413
> 
> 赞同：0
> 
> 时间：2013-02-01T09:42:41.940
> 
> 标签：android, list, drop-down-menu

我正在构建一个出租车预订应用程序。此应用程序需要为出租车司机提供一项功能，以指定他将从哪个城市运营。为了增强体验，我需要先提供一个`Select State`下拉菜单，然后再提供一个`Select City`下拉菜单。

状态列在这样的字符串数组中。

```
<string-array name="stateArray">
    <item>Andaman and Nicobar Islands</item>
    <item>Andhra Pradesh</item>
    <item>Arunachal Pradesh</item>
    <item>Assam</item>
</string-array> 
```

城市列在这样的字符串数组中。

```
<string-array name="AndhraPradesh">
    <item>Adilabad</item>
    <item>Adoni</item>
    <item>Amadalavalasa</item>
    <item>Amalapuram</item>
</string-array> 
```

在我的听众中

在布局 xml 文件中设置状态非常容易`android:entries="@array/stateArray"`。

我已经看到许多其他推荐 ArrayList 和 setAdapter 的 stackoverflow 问题。我想知道是否有一种相对简单的方法来设置城市的条目，以编程方式取决于所选的州。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:53:15.523

使用 OnItemSelectedListener。我假设你有两个 Spinner。它会是这样的。

```
spinner1.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
    @Override
    onItemSelected(AdapterView<?> parent, View view, int position, long id) {
        YourAdapter adapter = (YourAdapter) spinner2.getAdapter();

        switch (position) {
            case COUNTRY_ONE:
                adapter.setData(resources.getArray(R.array.cities_you_need_1));
                break;

            case COUNTRY_TWO:
                adapter.setData(resources.getArray(R.array.cities_you_need_2));
                break;
        }
    }

    @Override
    onNothingSelected(AdapterView<?> parent) {
        ((YourAdapter) spinner2.getAdapter()).clear();
    }
}); 
```

请注意，方法 clear() 和 setData() 是自定义辅助方法。SpinnerAdapter 中没有这样的方法。或者，如果索引，您可以实现对象并比较 id。上面的代码没有经过测试，只是为了展示一个想法。

# objective-c - 如何使用 NSOperation 和调度队列

> ID：14643416
> 
> 赞同：-1
> 
> 时间：2013-02-01T09:42:51.660
> 
> 标签：objective-c, nsoperation, nsoperationqueue

我在向服务器发起请求时使用 NSoperation。Pullparser 将被调用，它将启动 ao/p 和 i/p 流。在 connecitonDidRecievedata 中，我正在将来自服务器的数据写入 oStream。我必须立即调用自定义方法而不是让解析器开始解析。如何处理这种情况。如何处理对解析器的ostream调用并首先处理我的自定义方法，然后在我的自定义方法中我必须调用解析器。

```
- (void)run
{     
    [gObjAppDelegatePtr displayActivityIndicator];
    self.m_cObjDownloadOprPtr = [[[NSInvocationOperation alloc]initWithTarget:self selector:@selector(requestToServer) object:nil]autorelease];

    if((NSOperationQueue *)nil == m_cObjDownloadOprQueuePtr)
    {
         m_cObjDownloadOprQueuePtr = [[NSOperationQueue alloc]init];
         [m_cObjDownloadOprQueuePtr setMaxConcurrentOperationCount:1];
    }
    [m_cObjDownloadOprQueuePtr addOperation:self.m_cObjDownloadOprPtr];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    //[self.m_cWebData setLength: 0];
    [self.m_cWebData appendData:data];    
    [self.m_cObjOriginalWebDataPtr appendData:data];
    [self attemptToWriteToStream];
}

- (void)attemptToWriteToStream 
{
    if([self.m_cWebData length] > 0) 
    {
        [self saveDownloadedData];
        NSUInteger written = [oStream write:(const uint8_t *)[m_cWebData bytes] maxLength:[m_cWebData length]];
        // NSLog(@"Rcvd Data=%d written = %d",[m_cWebData length],written);
        [m_cWebData replaceBytesInRange:NSMakeRange(0,written) withBytes:"" length:0];
        // NSLog(@"Rcvd Data after Reset =%d ",[m_cWebData length]);[self parseResponse];
    }
}

 self.m_cObjSAXHandler = [self createParser:(id)self];
 self.m_cCurrentDownloadInfo = pObjEntry;self.m_cObjConfig = (MobileCRMConfiguration*)super.m_cObjParent.m_cObjConfiguration;
 m_cIsSuccess = NO;

 self.m_cIsOrganizationMatches = NO;
 [self.m_cObjXmlParser ParseWithStream:iStream];

-(void)ParseWithStream:(NSInputStream *)pInputStream
{
    self.m_cObjXMLParser = [[NSXMLParser alloc] initWithStream:pInputStream];
    self.m_cObjXMLParser setDelegate:m_cObjSAXHandler];
    dispatch_block_t dispatch_block  = ^(void){
        [self.m_cObjXMLParser parse];
    };

    dispatch_queue_t dispatch_queue = dispatch_queue_create("parser.queue", NULL);
    dispatch_async(dispatch_queue, dispatch_block);
    dispatch_release(dispatch_queue);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:20:37.120

我已经完成了这个 pullparser 的事情。我必须处理解析器委托，并且当它完成解析并将剩余数据写入流时应该更新流数据。

# java - JQuery maven CodeAssist

> ID：14643418
> 
> 赞同：0
> 
> 时间：2013-02-01T09:43:05.240
> 
> 标签：java, jquery, eclipse, maven, autocomplete

如何使用 maven 在我的 Web 项目中为 JQuery 设置 CodeAssist？在普通的 web 项目中我知道如何解决这个问题，但在 maven 项目中是不同的。感谢帮助 ：）

# java - 在构造函数中加载图像代码工作，相同的代码在按钮和文件选择器操作中不起作用？

> ID：14643419
> 
> 赞同：0
> 
> 时间：2013-02-01T09:43:12.253
> 
> 标签：java, image, swing, load

我尝试加载图像，我找到了一个代码，它运行良好，加载图像的代码在构造函数中，我试图将它移动到[按钮](http://docs.oracle.com/javase/7/docs/api/javax/swing/JButton.html)操作，也移动到[filechooser](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFileChooser.html)。但永远不要加载图像。代码中没有错误，我使用 print 语句测试了子句，它们表明子句通过了。

这是一个SSCCE：

构造函数代码分为**上下**两**部分**。通过**注释**和取消注释*每个*.

下部将**起作用**；它从构造函数加载图像。
上**半**部分设置了从 Action 代码加载图像所需的 JPanel 和 JButton。

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import java.io.*;
import javax.imageio.*;
import javax.swing.*;

public class ImgLoadTest extends JPanel implements ActionListener
{

    File file;
    BufferedImage img;
    JButton fileChooserButton;
    JButton showImgButton;
    JPanel imgePanel;
    JPanel widgetPanel;
    JFileChooser fileChooser;

    @Override
    public void paintComponent(Graphics g)
    {
        g.drawImage(img, 0, 60, null);
    }

    public ImgLoadTest()
    {
           //Upper:

//        fileChooser = new JFileChooser();
//
//        fileChooserButton = new JButton("Browse");
//        fileChooserButton.addActionListener(this);
//        showImgButton = new JButton("Show Image");
//        showImgButton.addActionListener(this);
//
//        imgePanel = new JPanel();
//        widgetPanel = new JPanel();
//        this.setLayout(new BorderLayout());
//        widgetPanel.add(fileChooserButton);
//        widgetPanel.add(showImgButton);
//        this.add(imgePanel, BorderLayout.CENTER);
//        this.add(widgetPanel, BorderLayout.EAST);

        /*
         *  try alternating (comment/uncomment) between 
         *  the upper code (in this constructor)
         *  and the lower code below;
         */

          //Lower:

        try
        {
            img = ImageIO.read(new File("D:\\De.JPG"));
        } catch (IOException e)
        {
        }

    }

    @Override
    public void actionPerformed(ActionEvent e)
    {
        Object source = e.getSource();
        if (source == fileChooserButton)
        {
            int reternedValue = fileChooser.showOpenDialog(ImgLoadTest.this);

            if (reternedValue == JFileChooser.APPROVE_OPTION)
            {
                file = fileChooser.getSelectedFile();
                try
                {
                    img = ImageIO.read(file);
                    System.out.println("File chooser: Image accepted");
                    this.repaint();

                } catch (IOException err)
                {
                    System.out.println("error " + err);
                }
            } else
            {
                System.out.println("No Image");
            }
        }
        if (source == showImgButton)
        {
            try
            {
                System.out.println("button: Image accepted");
                img = ImageIO.read(new File("D:\\De.JPG"));
                repaint();
            } catch (IOException err)
            {
                System.out.println("No Image");
                System.out.println("error " + err);
            }
        }
    }

    public static void main(String[] args)
    {
        JFrame frame = new JFrame("Image load test");
        frame.setSize(new Dimension(400, 600));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        ImgLoadTest imgLoadTest = new ImgLoadTest();
        frame.add(imgLoadTest);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:02:39.970

只是分配`BufferedImage` `img`不会使图像出现。您可以添加一个`JLabel`包含图像的内容：

```
JLabel picLabel = new JLabel(new ImageIcon(img));
imgePanel.add(picLabel);
imgePanel.revalidate();
imgePanel.repaint(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:56:13.980

除了应该在 imgePanel 上完成paintComponent 代码这一事实之外，它应该可以工作。在分配新图像后，您可能希望重新验证并重新绘制它（就像 Reimeus 所做的那样），以确保它实际上被绘制在屏幕上。

# netbeans - Glassfish 登录服务器错误问题，

> ID：14643421
> 
> 赞同：5
> 
> 时间：2013-02-01T09:43:15.550
> 
> 标签：netbeans, glassfish, server-error

当我尝试登录 glassfish 服务器时出现登录错误。我在另一个系统上试过：它工作正常，但在我的笔记本电脑上不行。

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\Arwel>cd C:\Program Files\glassfish

C:\Program Files\glassfish>cd bin

C:\Program Files\glassfish\bin>asadmin start-domain
java.io.IOException: Couldn't get lock for C:\Program Files\glassfish\glassfish\
domains\domain1\logs\server.log
        at java.util.logging.FileHandler.openFiles(Unknown Source)
        at java.util.logging.FileHandler.<init>(Unknown Source)
        at com.sun.enterprise.admin.launcher.GFLauncherLogger.addLogFileHandler(
GFLauncherLogger.java:100)
        at com.sun.enterprise.admin.launcher.GFLauncher.setup(GFLauncher.java:18
9)
        at com.sun.enterprise.admin.cli.StartDomainCommand.createLauncher(StartD
omainCommand.java:209)
        at com.sun.enterprise.admin.cli.StartDomainCommand.executeCommand(StartD
omainCommand.java:107)
        at com.sun.enterprise.admin.cli.CLICommand.execute(CLICommand.java:264)
        at com.sun.enterprise.admin.cli.AsadminMain.executeCommand(AsadminMain.j
ava:306)
        at com.sun.enterprise.admin.cli.AsadminMain.main(AsadminMain.java:238)
Waiting for domain1 to start ...................................................
.............Error starting domain domain1.
The server exited prematurely with exit code 1.
Before it died, it produced the following output:

Launching GlassFish on Felix platform
ERROR: Unable to create cache directory: C:\Program Files\glassfish\glassfish\do
mains\domain1\osgi-cache\felix
ERROR: Error creating bundle cache. (java.lang.RuntimeException: Unable to creat
e cache directory.)
java.lang.RuntimeException: Unable to create cache directory.
        at org.apache.felix.framework.cache.BundleCache.<init>(BundleCache.java:
131)
        at org.apache.felix.framework.Felix.init(Felix.java:629)
        at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiFrameworkLauncher$1.r
un(OSGiFrameworkLauncher.java:88)
Exception in thread "Thread-1" java.lang.RuntimeException: org.osgi.framework.Bu
ndleException: Error creating bundle cache.
        at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiFrameworkLauncher$1.r
un(OSGiFrameworkLauncher.java:90)
Caused by: org.osgi.framework.BundleException: Error creating bundle cache.
        at org.apache.felix.framework.Felix.init(Felix.java:634)
        at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiFrameworkLauncher$1.r
un(OSGiFrameworkLauncher.java:88)
Caused by: java.lang.RuntimeException: Unable to create cache directory.
        at org.apache.felix.framework.cache.BundleCache.<init>(BundleCache.java:
131)
        at org.apache.felix.framework.Felix.init(Felix.java:629)
        ... 1 more
Exception in thread "main" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at com.sun.enterprise.glassfish.bootstrap.GlassFishMain.main(GlassFishMa
in.java:97)
        at com.sun.enterprise.glassfish.bootstrap.ASMain.main(ASMain.java:55)
Caused by: org.glassfish.embeddable.GlassFishException: java.lang.NullPointerExc
eption
        at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiGlassFishRuntimeBuild
er.build(OSGiGlassFishRuntimeBuilder.java:164)
        at org.glassfish.embeddable.GlassFishRuntime._bootstrap(GlassFishRuntime
.java:157)
        at org.glassfish.embeddable.GlassFishRuntime.bootstrap(GlassFishRuntime.
java:110)
        at com.sun.enterprise.glassfish.bootstrap.GlassFishMain$Launcher.launch(
GlassFishMain.java:112)
        ... 6 more
Caused by: java.lang.NullPointerException
        at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiGlassFishRuntimeBuild
er.newFramework(OSGiGlassFishRuntimeBuilder.java:230)
        at com.sun.enterprise.glassfish.bootstrap.osgi.OSGiGlassFishRuntimeBuild
er.build(OSGiGlassFishRuntimeBuilder.java:133)
        ... 9 more
Error stopping framework: java.lang.NullPointerException
java.lang.NullPointerException
        at com.sun.enterprise.glassfish.bootstrap.GlassFishMain$Launcher$1.run(G
lassFishMain.java:203)

Command start-domain failed.

C:\Program Files\glassfish\bin> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T10:05:20.653

您似乎没有写入该`Program Files`文件夹的权限。您可以使用管理员权限重试。

您可以像这样以管理员身份启动 cmd：

*   按开始
*   键入“命令”
*   点击`Ctrl`+ `Shift`+`Enter`

# html - Listitems 的行为真的很奇怪

> ID：14643428
> 
> 赞同：0
> 
> 时间：2013-02-01T09:43:42.197
> 
> 标签：html, css, list, alignment, listitem

我有一个网站，[http://www.veluwenkamp.nl](http://www.veluwenkamp.nl) 在主页底部，您可以找到 4 个列表项（图片），它们对齐不太好，必须在一条水平线上。

我尝试了一切，但我无法让它工作。大家能给我一些建议吗？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:50:52.063

请明确：都到 ul 类 .lijstul 并尝试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:46:40.030

利用`display:inline-block`

```
.lijstul li{display:inline-block} 
```

**[演示](http://jsfiddle.net/VEHaX/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:48:03.277

在列表前添加一个`<div style="clear:both"></div>`。

```
<div style="clear:both"></div><ul class="lijstul">
<li class="lijstil">
<div class="portfolio-blockimg3">
<div class="portfolio-imgbox3"><img class="boximg-pad" src="http://www.veluwenkamp.nl/wp-content/themes/veluwenk/timthumb.php?src=http://www.veluwenkamp.nl/vknieuw3/wp-content/uploads/2012/10/picisto-20121022090807-597254.jpg&amp;h=86&amp;w=196&amp;zc=1" alt=""></div>
</div>
</li>
<li class="lijstil">
<div class="portfolio-blockimg3">
<div class="portfolio-imgbox3"><img class="boximg-pad" src="http://www.veluwenkamp.nl/wp-content/themes/veluwenk/timthumb.php?src=http://veluwenkamp.nl/afbeeldingen/IMG_1359.jpg&amp;h=86&amp;w=196&amp;zc=1" alt=""></div>
</div>
</li>
<li class="lijstil">
<div class="portfolio-blockimg3">
<div class="portfolio-imgbox3"><img class="boximg-pad" src="http://www.veluwenkamp.nl/wp-content/themes/veluwenk/timthumb.php?src=http://www.veluwenkamp.nl/vknieuw3/wp-content/uploads/2012/11/sgfw-30.jpg&amp;h=86&amp;w=196&amp;zc=1" alt=""></div>
</div>
</li>
<li class="lijstil">
<div class="portfolio-blockimg3">
<div class="portfolio-imgbox3"><img class="boximg-pad" src="http://www.veluwenkamp.nl/wp-content/themes/veluwenk/timthumb.php?src=http://www.veluwenkamp.nl/vknieuw3/wp-content/uploads/2012/10/20090619_3844_6.jpg&amp;h=86&amp;w=196&amp;zc=1" alt=""></div>
</div>
</li>
</ul> 
```

你会得到对齐

![在此处输入图像描述](../Images/f75c1d90ea136b08f7e2b0ec9a864259.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:48:14.137

您可以通过`clear: both`在您的`ul`

```
.lijstul {
    clear: both;
    ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T09:48:25.230

```
ul.lijstul {
 width: 100%;
 overflow: hidden;
} 
```

# templates - 如何在 TYPO3 的默认模板中插入页面内容？

> ID：14643438
> 
> 赞同：0
> 
> 时间：2013-02-01T09:44:26.013
> 
> 标签：templates, content-management-system, typo3, wiki, typoscript

我想在我的 TYPO3 网站的所有页面中显示相同的页脚内容。紧随其后的是流体模板概念。我创建了 3 个模板。

```
 1.default template(main.html)
   2.content template
   3.allpage_content template(which need to show in all pages) 
```

还希望该内容在富文本编辑器中是可编辑的。所以我创建了一个名为页脚的页面并调用后端布局（allpage_content.html）。

为了那个原因 ：

```
 lib.footer = COA
  lib.footer {
         10 = CONTENT
         10 {
             table = tt_content
             select.where = colPos = 10
             select.orderBy = sorting
             select.pidInList = 15
            }

      }

page.100 = TEMPLATE
page.100.template = FILE
page.100.template.file = fileadmin/templates/main.html
page.100.workOnSubpart = DOCUMENT_BODY
page.100.marks.content < lib.footer 
```

除此之外，后端布局还与真正的前端模板连接

```
 footer_left < styles.content.get
 footer_left.select.where = colPos = 10 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:01:16.380

请尝试以下排版：

```
lib.footer = COA
lib.footer {
10 = RECORDS
 10{
  tables = tt_content
  source = 15 #footer page id
 }
} 
```

或者

```
lib.footer = COA
lib.footer {
 10 = CONTENT
 10 {
 table = tt_content
  select.where = colPos = 0     #column position - 0-normal, 1-left, 2-right, 3-border
  select.orderBy = sorting
  select.pidInList = 15  #footer page id
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-03T08:28:26.930

这是我的做法。您可以为此使用临时对象（它们不会持续存在）。在下面的示例中，仅使用了正文（RTE 字段），没有其他内容。内容通过 lib.parsefunc_RTE 渲染，所以 Links 被渲染。我选择只选择一个内容元素 (select.max)，但这取决于你

```
temp.footer_adr = CONTENT
temp.footer_adr {
   table = tt_content
   select.pidInList = 47
   select.languageField = sys_language_uid
   select.max = 1
   select.begin = 1
   select.selectFields = bodytext
   renderObj=TEXT
   renderObj{
      required=1
      wrap=|
      field=bodytext
      parseFunc = < lib.parseFunc_RTE
  }
}

page.70 = TEMPLATE
page.70 {
    template = FILE
    template.file = fileadmin/templates/main/tmpl/footer.html
    marks {
            FOOTER_ADR < temp.footer_adr
    }
} 
```

# web-applications - 如何避免重定向到 SSL 端口

> ID：14643441
> 
> 赞同：2
> 
> 时间：2013-02-01T09:44:35.517
> 
> 标签：web-applications, ssl, ssl-certificate, tomcat6, web.xml

我的 SSL 配置 Web 应用程序中的 Web.xml 配置（部署在 tomcat（8080 端口）上）如下

```
<security-constraint>
    <web-resource-collection>
        <web-resource-name>HTTPSOnly</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint> 
```

当我尝试[https://google.com](https://google.com)时，我正在获取页面当我尝试**[http://google.com](http://google.com)**时，它会自动重定向到[https://google.com:8443](https://google.com:8443)。所以我没有得到页面。

我希望它被重定向到[https://google.com](https://google.com)而不是[https://google.com:8443](https://google.com:8443)。

请帮助我。如果您需要任何进一步的细节，会让您知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:28:37.033

我得到了它。从 tomcat 的 server.xml 中删除 SSL redirectPort

```
<Connector port="8080" protocol="HTTP/1.1" 
connectionTimeout="20000" redirectPort="8443" /> 
```

像，

```
<Connector port="8080" protocol="HTTP/1.1" 
connectionTimeout="20000" /> 
```

# jquery - 当滚动到屏幕顶部时，获取具有类 .waypoint 的元素的 id

> ID：14643443
> 
> 赞同：0
> 
> 时间：2013-02-01T09:44:44.673
> 
> 标签：jquery, scroll

我有一个带有一堆链接的导航栏，这些链接将窗口滚动到页面上的各种锚点（或航点）。我还需要的是当手动滚动窗口时，我想根据哪个航路点到达屏幕顶部来切换导航栏中的链接类别（到.active）。我的航点基本上如下：

`<span class="waypoint" id="link1"></span>`

我目前正在为此使用 jQuery。

我希望这是有道理的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:10:04.187

你有没有考虑过使用这个？

[http://getbootstrap.com/javascript/#scrollspy](http://getbootstrap.com/javascript/#scrollspy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:12:09.200

Here you go

[DEMO](http://jsfiddle.net/mplungjan/ptzUV/)

```
$(window).scroll(function() {
    var waypoint = $(".waypoint").not(".seen").first();
    var scrollTop = $(window).scrollTop();

    // change to active 0-10 pixels 
    if (scrollTop >= waypoint.offset().top && scrollTop <= waypoint.offset().top+10) {
        waypoint.addClass("active");
    }
    if (scrollTop > waypoint.offset().top+10) {
        waypoint.addClass("seen");
        waypoint.removeClass("active");
    }
}); 
```

# ruby-on-rails - 尝试 CSV 导入时 nil:NilClass 的未定义方法“路径”

> ID：14643449
> 
> 赞同：3
> 
> 时间：2013-02-01T09:45:02.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, csv, import

我正在关注[Import CSV Railscast](http://railscasts.com/episodes/396-importing-csv-and-excel?view=asciicast)，它是直截了当的。

我添加`require 'csv'`到我的`config/application.rb`

在我的`BuildingsController`我创建了一个`import`像这样的新动作：

```
def import
  Building.import(params[:file])
  redirect_to root_url, notice: "Buildings imported."
end 
```

在我看来，我有这个：

```
<h2>Import Buildings</h2>
<%= form_tag import_buildings_path, multipart: true do %>
  <%= file_field_tag :file %>
  <%= submit_tag "Import" %>
<% end %> 
```

这是在我的`Building.rb`模型中：

```
def self.import(file)
  CSV.foreach(file.path, headers: true) do |row|
    building = find_by_name(row["name"]) || new
    building.attributes = row.to_hash.slice(*accessible_attributes)
    building.save!
  end
end 
```

在我的`routes.rb`，我有这个：

```
 resources :buildings do
    collection { post :import }
  end 
```

当我单击视图上的“导入”按钮时，出现此错误：

```
NoMethodError at /buildings/import

Message undefined method `path' for nil:NilClass
File    /myapp/app/models/building.rb
Line    23 
```

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:55:35.540

来自评论：您很可能是在不选择文件的情况下提交表单:)

# mysql - 在mysql中获取最近6个月的值

> ID：14643454
> 
> 赞同：4
> 
> 时间：2013-02-01T09:45:07.390
> 
> 标签：mysql

我需要从数据库中获取最近六个月的值。 **这是我的[小提琴](http://sqlfiddle.com/#!2/1f8029/8)**。我需要动态获取值。现在二月。所以我需要数据库中的八月到一月的值。如果是 3 月，则值应自动更改为 10 月到 2 月。所以我需要得到最后六个月的价值。

我的代码如下。

```
CREATE TABLE IF NOT EXISTS `ratepersqft` (
  `price_id` int(11) NOT NULL auto_increment,
  `project_id` int(11) default NULL,
  `date` varchar(255) default NULL,
  `rate_per_sqft` double default NULL,
  `common_location` varchar(255) default NULL,
  PRIMARY KEY  (`price_id`)
); 

INSERT INTO `ratepersqft` (`price_id`, `project_id`, `date`, `rate_per_sqft`, `common_location`) VALUES
    (1, 1, '2012-07-01 ', 2800, 'ECR'),
    (2, 2, '2012-07-02 ', 1550, 'ECR'),
    (3, 3, '2012-07-03 ', 1850, 'ECR'),
    (4, 4, '2012-07-04 ', 4425, 'ECR'),
    (5, 5, '2012-07-05 ', 2300, 'ECR'),
    (6, 1, '2012-08-01 ', 2900, 'ECR'),
    (7, 2, '2012-08-02 ', 1650, 'ECR'),
    (8, 3, '2012-08-03 ', 1950, 'ECR'),
    (9, 4, '2012-08-04 ', 4525, 'ECR'),
    (10, 5, '2012-08-05 ', 2200, 'ECR'),
    (11, 1, '2012-09-01 ', 3000, 'ECR'),
    (12, 2, '2012-09-02 ', 1450, 'ECR'),
    (13, 3, '2012-09-03 ', 2050, 'ECR'),
    (14, 4, '2012-09-04 ', 4625, 'ECR'),
    (15, 5, '2012-09-05 ', 2100, 'ECR'),
    (16, 1, '2012-10-01 ', 3100, 'ECR'),
    (17, 2, '2012-10-02 ', 2150, 'ECR'),
    (18, 3, '2012-10-03 ', 1850, 'ECR'),
    (19, 4, '2012-10-04 ', 4725, 'ECR'),
    (20, 5, '2012-10-05 ', 1900, 'ECR'),
    (21, 1, '2012-11-01 ', 3200, 'ECR'),
    (22, 2, '2012-11-02 ', 2250, 'ECR'),
    (23, 3, '2012-11-03 ', 1850, 'ECR'),
    (24, 4, '2012-11-04 ', 4825, 'ECR'),
    (25, 5, '2012-11-05 ', 2300, 'ECR'),
    (26, 1, '2012-12-01 ', 3300, 'ECR'),
    (27, 2, '2012-12-02 ', 2350, 'ECR'),
    (28, 3, '2012-12-03 ', 1850, 'ECR'),
    (29, 4, '2012-12-04 ', 4925, 'ECR'),
    (30, 5, '2012-12-05 ', 2400, 'ECR'),
    (31, 1, '2013-01-01 ', 3400, 'ECR'),
    (32, 2, '2013-01-02 ', 2000, 'ECR'),
    (33, 3, '2013-01-03 ', 2450, 'ECR'),
    (34, 4, '2013-01-04 ', 5025, 'ECR'),
    (35, 5, '2013-01-05 ', 2500, 'ECR'),
    (36, 1, '2013-02-01 ', 3500, 'ECR'),
    (37, 2, '2013-02-02 ', 2100, 'ECR'),
    (38, 3, '2013-02-03 ', 2550, 'ECR'),
    (39, 4, '2013-02-04 ', 5125, 'ECR'),
    (40, 5, '2013-02-05 ', 2600, 'ECR'),
    (41, 1, '2012-06-01 ', 1800, 'ECR'),
    (42, 2, '2012-06-02 ', 1150, 'ECR'),
    (43, 3, '2012-06-03 ', 1350, 'ECR'),
    (44, 4, '2012-06-04 ', 3425, 'ECR'),
    (45, 5, '2012-06-05 ', 2100, 'ECR'); 
```

我正在尝试这个查询，它给了我数据库中的所有值。

```
SELECT *
  FROM ratepersqft
 WHERE MONTH(date) < DATE_SUB(CURDATE(), INTERVAL 6 MONTH) 
```

希望我的问题很清楚。提前致谢！！！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-01T09:47:43.620

对于 MYSQL：您可以使用 `date_add`：

```
 SELECT * FROM ratepersqft 
WHERE date < Now() and date > DATE_ADD(Now(), INTERVAL- 6 MONTH); 
```

对于 SQL Server:, [`dateadd`](http://www.w3schools.com/sql/func_dateadd.asp):

```
 SELECT * FROM ratepersqft 
 WHERE date < Now() and date > DATEADD(Month, -6, Now()); 
```

[http://www.sqlfiddle.com/#!2/1f8029/48](http://www.sqlfiddle.com/#!2/1f8029/48)

**请用反引号括起您的日期列名称，因为它是保留的关键字。**

MYSQL 更新：

[SQLFIDDLE 演示](http://sqlfiddle.com/#!2/1f8029/67)

```
SELECT *
FROM ratepersqft 
WHERE date_format(date,'%Y-%m') < 
                     date_format(now(),'%Y-%m')
and date_format(date,'%Y-%m') >= 
                     date_format(now() - interval 6 month,'%Y-%m')
order by date desc; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T09:48:12.233

这将考虑将所有日期四舍五入到月初进行比较，并且将从今天的日期开始最近 6 个月：

```
SELECT *
FROM ratepersqft
WHERE date >= DATE_SUB(DATE_FORMAT(CURDATE(), '%Y-%m-01'), INTERVAL 6 MONTH)
  AND date <  DATE_FORMAT(CURDATE(), '%Y-%m-01') 
```

强制性[SQLFiddle](http://www.sqlfiddle.com/#!2/9d720/28)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T09:48:45.727

[SQLFiddle](http://sqlfiddle.com/#!2/1f8029/44/0)

如果你只想要整月

```
SELECT *
FROM ratepersqft
WHERE date between date_format(DATE_SUB(CURDATE(), INTERVAL 6 MONTH), '%Y-%m-01')
           and  date_sub(date_format(CURDATE(), '%Y-%m-01'), interval 1 day); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-04T07:03:55.637

当您的数据为 MM-YYYY 格式并且您想要在六个月之间获取数据时，此代码非常有用。享受。

```
SELECT * FROM demo WHERE attendance_year_month < SUBSTRING(CURRENT_TIMESTAMP,1,11) and attendance_year_month
>=DATE_SUB(SUBSTRING(CURRENT_TIMESTAMP,1,11), INTERVAL 6 MONTH) 
```

输出： [这里我正在处理我六个月前的数据](https://i.stack.imgur.com/Cr4fN.png)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-01-28T08:34:00.473

```
 SELECT
YEAR(DATE) AS YEAR,
SUM(MONTH(DATE) = 1) AS JAN ,
SUM(MONTH(DATE) = 2) AS FEB ,
SUM(MONTH(DATE) = 3) AS MAR ,
SUM(MONTH(DATE) = 4) AS APR,
SUM(MONTH(DATE) = 5) AS MAY ,
SUM(MONTH(DATE) = 6) AS JUNE ,
SUM(MONTH(DATE) = 7) AS JULY ,
SUM(MONTH(DATE) = 8) AS AUG,
SUM(MONTH(DATE) = 9) AS SEP ,
SUM(MONTH(DATE) = 10) AS OCTOBER ,
SUM(MONTH(DATE) = 11) AS NOV ,
SUM(MONTH(DATE) = 12) AS DECE
FROM ratepersqft
WHERE  DATE >= NOW() - INTERVAL 6 MONTH 
GROUP BY 1; 
```

# asp.net-mvc - 从当前动作导航到另一个控制器的动作并显示视图

> ID：14643455
> 
> 赞同：0
> 
> 时间：2013-02-01T09:45:07.920
> 
> 标签：asp.net-mvc

我有这个，产品控制器的一个动作：

```
public ActionResult SortedLists(List<string> items, string ShopID)
{
    //Do sth...

    db.SaveChanges();
    return RedirectToAction("Index", "ControlPanel", new {ID = ShopID });
} 
```

而 Index 是 ControlPanel Controller 的操作（视图）：

```
public ActionResult Index(int ID)
{
     ViewBag.theRelatedShopID = ID;     
     return View();
} 
```

我追踪了代码。索引页面呈现，但浏览器中没有显示任何内容。只是在 URL 中添加了一个“#”，如下所示：`http://localhost:55161/#`。为什么我看不到页面？

页面索引不是强类型的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T23:52:43.540

请尝试通过 TempData 传递值。TempData 与 ViewData 非常相似，但用于跨请求传递值

例如，尝试

```
TempData["ID"] = ShopID; 
```

！！**请注意**，在控制器操作中使用 TempData 会使单元测试更加困难

# objective-c - Objective-C：ARC中的块

> ID：14643456
> 
> 赞同：6
> 
> 时间：2013-02-01T09:45:26.150
> 
> 标签：objective-c, automatic-ref-counting, objective-c-blocks

我正在过渡到 ARC（自动引用计数），这份文档非常有帮助：[Transitioning to ARC Release Notes](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。它说：

> 块如何在 ARC 中工作？
> 
> 当您在 ARC 模式下将块向上传递到堆栈时，块“正常工作”，例如在返回中。您不必再调用 Block Copy。在将堆栈“向下”传递到 arrayWithObjects: 和其他执行保留的方法时，您仍然需要使用 [^{} copy]。

有人可以详细说明一下或举一些例子吗？我理解这意味着即使块在声明的范围之外使用，我通常也不需要再进行 [块复制]，因为 ARC 现在会更聪明地处理它，但是当我想复制它时我仍然需要复制它将块传递给保留它的函数。这个对吗？

实际上，我已经对其进行了一些试验，到目前为止，即使我将块传递给数组而不进行复制，它似乎也可以，所以这个问题。谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-02T03:13:30.120

让我们从 MRC（手动引用计数）的角度来考虑这个问题。当您从函数返回堆栈块时，返回它的副本*始终是正确*`[[ copy] autorelease]`的做法（通常使用）。这是因为堆栈块的生命周期是结束的函数调用。所以为了让返回的指针在返回后指向一个有效的块，当然要返回一个堆副本。

但是，如何将块作为参数传递给函数或方法。你应该传递它的副本吗？这有点复杂。我们知道，如果您需要将块存储在比函数调用寿命更长的地方（例如，在实例变量或全局变量中等），以供以后使用，您需要存储块的副本。但是我们怎么知道这是真的（如果是真的，哪个函数（调用者/被调用者）负责复制它）？

一般来说，当你将它传递给参数为块类型的函数或方法时，你不需要复制它，因为作为一个接受块参数的函数，如果需要，该函数负责复制它把它储存起来以备后用。

但是将块传递给参数是非块类型（如`id`）的函数或方法呢？然后那个函数不知道它的参数是一个块，所以它只会保留对象，如果它需要存储它以供以后使用，而不是复制它。在这种情况下，如果我们知道函数或方法将存储对象以供以后使用（例如 with `-[NSMutableArray addObject:]`），我们应该传递块的副本。我们应该总是传递一个副本吗？不必要。如果我们知道函数或方法不会为以后存储块（例如只打印对象），那么复制块是低效的。

在 ARC 中，编译器会尽力为您做尽可能多的事情。所以在返回一个堆栈块（“向上传递”）的情况下，编译器知道返回一个副本总是正确的，所以它隐式地这样做了。这就是为什么你不再需要自己做。

但是，对于将块传递给方法或函数（“向下传递”），并不总是可以自动确定是否需要复制，并且额外的复制可能效率低下，因此编译器不会自动执行任何操作; 你程序员需要弄清楚。

我注意到在最近版本的编译器中，ARC 在我认为的更多情况下复制块，所以也许他们将 ARC 的实现更改为几乎总是复制块，以便在谨慎方面犯错，并且他们认为性能成本并不那么重要。因此，它现在可能会直接将块传递给`addObject:`而无需显式复制。但我相信 ARC 并非总是如此，并且语言不能保证这一点，或者这种行为将来会继续存在。

# jquery - 使用 jQuery 取消选中单选按钮有点错误

> ID：14643459
> 
> 赞同：1
> 
> 时间：2013-02-01T09:45:35.820
> 
> 标签：jquery, radio-button

我需要能够取消选中一组 3 个中已选中的单选按钮。它在大多数情况下都有效，但它有点问题 - 有时当我想检查其他按钮时取消选中，有时不选中按钮当我取消选中另一个时第一次单击，单击不同的收音机几次后取消选中，等等。希望有人可以看看是什么原因造成的

CSS：

```
input[type="radio"] {   display: none;  }
input[type="radio"] + label {
    color:#f2f2f2;
    font-family:Arial, sans-serif;
    font-size:14px;
}
input[type="radio"] + label span {
    display:inline-block;
    width:19px;
    height:19px;
    margin:-1px 4px 0 0;
    vertical-align:middle;
    background:url(../images/check_radio_sheet.png) -38px top no-repeat;
    cursor:pointer;
}
input[type="radio"]:checked + label span {
    background:url(../images/check_radio_sheet.png) -57px top no-repeat;
} 
```

的HTML：

```
<form class="optionsfilter" action="#">
<ul style="list-style: none;">
<li>
<span style="color: #eee;">Smoking Inside?</span>
<div class="clear"></div>
<input type="radio" name="smokingoption" id="smoking" value="smoking"><label for="smoking" onclick=""><span></span>Yes</label>
<input type="radio" name="smokingoption" id="non-smoking" value="non-smoking"><label for="non-smoking" onclick=""><span></span>No</label>
<input type="radio" name="smokingoption" id="cigarsmoking" value="cigar"><label for="cigarsmoking" onclick=""><span></span>Cigars</label>
</li>
</ul>
</form> 
```

这是脚本：

```
$('input[type="radio"]').click(function() {
    var checked = $(this).attr('checked');
    if(checked){
        $(this).attr('checked', false);
    } else{
        $(this).attr('checked', true);
    }
}); 
```

这是一个包含所有代码的 jsFiddle：http: [//jsfiddle.net/RfDk6/](http://jsfiddle.net/RfDk6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:21:04.803

我不知道您要实现什么，但是从 jQuery 1.6 开始，用于修改表单元素的选中属性，`prop`应该使用方法而不是`attr`,`checked`是一个属性，并且通过设置 false/true`attr`不会改变`checked`收音机的属性纽扣。

```
$('input[type="radio"]').change(function() {
    $(this).prop('checked', function(i, checked){
       return !checked;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T15:22:50.953

这适用于 Chrome（我没有在其他地方测试过 - 抱歉）。

```
$("input:radio").removeAttr("checked"); 
```

该`.prop`功能仅消除了广播组的第一个实例，而`removeattr`对很多实例进行了核对。

# android - 调用另一个类失败

> ID：14643461
> 
> 赞同：0
> 
> 时间：2013-02-01T09:45:41.613
> 
> 标签：android, class, android-alertdialog

当用户想退出时，会弹出一个对话框，确定后，游戏将退出。我的代码没有调用另一个类。

```
private void giveup(){
    Context mcontext=this;      
    final AlertDialog.Builder alert = new AlertDialog.Builder(
                  mcontext);

    alert.setTitle("Are you sure to give up?");
    alert.setNegativeButton("Cancel",
        new DialogInterface.OnClickListener() {
              @Override
              public void onClick(DialogInterface dialog,
                  int which) {
                  click.start();   
                  dialog.cancel();                                            

              } });
        alert.setPositiveButton("OK",
              new DialogInterface.OnClickListener() {
                  @Override
                  public void onClick(DialogInterface dialog,
                           int which) {
                       click.start();                                           
                       dialog.cancel();
                       try{
                           Class<?> ourClass = Class.forName("com.ithinkDictionary.Gameover");
                           Intent ourIntent = new Intent(Playing.this, ourClass);
                           startActivity(ourIntent);
                       }catch(ClassNotFoundException e){
                            e.printStackTrace();
                  }
              } 
        });
        alert.show();   
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:49:56.927

你应该只使用

```
Intent ourIntent = new Intent(Playing.this, Gameover.class);
                            startActivity(ourIntent); 
```

假设 Playing 和 Gameover 都是活动。

# iphone - 全局声明 AppDelegate

> ID：14643463
> 
> 赞同：0
> 
> 时间：2013-02-01T09:45:46.603
> 
> 标签：iphone, appdelegate

我在 Appdelegate 中定义了一个全局变量。我想在其他控制器中使用。我可以这样使用：

```
AppDelegate *appDelegate=(AppDelegate *)[[UIApplication sharedApplication]delegate];
  appdelegate.name=[NSString stringwithFormat:@"%@",ename]; 
```

但是，无论我想在 viewController 中访问 appdelegates 变量的任何地方，我都必须 `AppDelegate *appDelegate=(AppDelegate *)[[UIApplication sharedApplication]delegate];`每次都使用它会给出警告消息，例如“AppDelgate 的本地声明隐藏实例变量”。那么有没有一种方法可以让我只在一次访问中多次声明它ViewController.我怎样才能摆脱这个警告？

编辑：

```
.h :
#import "AppDelegate.h"

@interface More : UIViewController
{

    AppDelegate *appdelegate;
}
.m:
- (void)viewDidLoad
{
    [super viewDidLoad];

    appDelegate=(AppDelegate *)[[UIApplication sharedApplication]delegate]; //error :Use of undeclared identifier appDelegate

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-24T10:07:45.150

从您在编辑下给出的发布代码看来，您的问题似乎是您刚刚声明了 AppDelegate *appdelegate; 在.h

并在 .m 中使用“appDelegate”而不是“appdelegate”。

它显然是一个未定义的变量，不是吗？！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:03:58.270

在 Appdelegate make 方法中。

```
+(AppDelegate*)sharedInstance
{
    return (AppDelegate*)[[UIApplication sharedApplication] delegate];
} 
```

然后只需在控制器头文件中导入 appdelegate 并使用

```
[AppDelegate sharedInstance]. name = [NSString stringwithFormat:@"%@",ename];; 
```

也许这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:53:56.823

为此，在要使用`AppDelegate`的对象的类中创建一个方法，

```
-(AppDelegate *)appdelegate
{
    (AppDelegate *)[[UIApplication sharedApplication]delegate];
} 
```

然后，无论你想`AppDelegate`在那个类中使用 object of 的任何地方，你都可以使用它，如`[self appdelegate].name`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:51:23.307

如果您的问题只是警告，请将指针的本地名称更改为您的 appDelegate：

```
AppDelegate *myLocalPointerToAppDelegate=(AppDelegate *)[[UIApplication sharedApplication]delegate];
  myLocalPointerToAppDelegate.name=[NSString stringwithFormat:@"%@",ename]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T12:13:46.220

或者您可以在 plist 文件中创建 AppDelegate 对象，然后您可以在每个控制器中使用它...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-16T22:08:02.003

非常糟糕的风格：实例变量应始终以下划线开头。例如，_appDelegate。在实例方法内部，使用实例变量的名称会自动引用 self->。例如，当你有一个实例变量“appDelegate”时写“appDelegate”实际上意味着self->appDelegate。这就是您收到警告的原因：引入名为 appDelegate 的变量意味着在源代码中使用“appDelegate”现在指的是局部变量，而不是实例变量。那是自找麻烦。（“自找麻烦”的意思是“任何有经验的程序员都会告诉你，这迟早会导致无法修复的错误”）。只需添加一个变量，您就可能改变了许多代码行的含义。

这正是编译器警告您的原因：编译器发现您只是给自己挖了一个最终会掉入的洞。

你有一个名为 appDelegate 或 _appDelegate 的实例变量也很奇怪，因为你应该通过调用 [[UIApplication sharedApplication]delegate] 来获取 appDelegate。

# c# - 如何在 C# 中以编程方式从 MailboxDatabase 获取 DatabaseCopies（在 c# 中包装 ExchangeMangementShell cmdlet）？

> ID：14643469
> 
> 赞同：0
> 
> 时间：2013-02-01T09:46:05.440
> 
> 标签：c#, powershell, powershell-2.0, exchange-server-2010, powershell-remoting

我在 C# 中包装 ExchangeManagementShell Cmdlet，以编程方式执行 cmdlet（请参阅 __http://social.msdn.microsoft.com/Forums/en-US/exchangesvrdevelopment/thread/155504b3-ffe3-4bdf-887a-1e61842a8697）

我知道邮箱数据库的“数据库副本”属性包含副本。但我不确定如何解析 deserilzied databasecopies 数据以获取属性。

请看下面的代码片段。我基本上是在解析 Get-MailboxDatabase cmdlet 结果以获取我们感兴趣的属性。不知道如何从中获取 DatabaseCopies。

```
foreach (PSObject cmdletResults in this.Execute("Get-MailboxDatabase"))
{
   MailboxDatabase mdb = new MailboxDatabase();
   mdb.ExchangeApplicationSystemGlobalId = this.ExchangeApplicationSystem.GlobalId;
   mdb.Name = cmdletResults.Properties["Name"].Value.ToString();
   mdb.MountedOnServer = cmdletResults.Properties["Server"].Value.ConvertToString();
   mdb.EdbFilePath = cmdletResults.Properties["EdbFilePath"].Value.ConvertToString();
   mdb.LogFolderPath = cmdletResults.Properties["LogFolderPath"].Value.ConvertToString();
   mdb.LogFilePrefix = cmdletResults.Properties["LogFilePrefix"].Value.ConvertToString();
   mdb.Guid = cmdletResults.Properties["Guid"].Value.ToString();
   string mt = cmdletResults.Properties["MasterType"].Value.ConvertToString();
   if (!string.IsNullOrEmpty(mt))
   {
      mdb.MasterType = mt.ToEnum(MasterType.Unknown);
   }
   mdb.MasterServerOrAvailabilityGroup = cmdletResults.Properties["MasterServerOrAvailabilityGroup"].Value.ConvertToString();
   PSObject pso = cmdletResults.Properties["Servers"].Value as PSObject;
   if (null != pso
          && null != pso.BaseObject)
   {
       ArrayList servers = pso.BaseObject as ArrayList;
       if (null != servers)
       {
           mdb.Servers = servers.ToArray().Where(server => null != server)
                                .Select(server => server.ToString())
                                .ToArray();
       }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T06:36:25.177

即使来自 PowerShell，它们也以纯字符串的形式出现。

PS C:> $md.type PS C:> $md.DatabaseCopies.gettype()

IsPublic IsSerial Name BaseType -------- -------- ---- -------- True True ArrayList System.Object

PS C:> $md.DatabaseCopies[0].gettype()

IsPublic IsSerial Name BaseType -------- -------- ---- -------- True True String System.Object

PS C:> $md.gettype() 方法调用失败，因为 [Deserialized.Microsoft.Exchange.Data.Directory.SystemConfiguration.MailboxDatabase] 不包含名为“gettype”的方法。在 line:1 char:12 + $md.gettype <<<< () + CategoryInfo : InvalidOperation: (gettype:String) [], RuntimeException + FullyQualifiedErrorId : MethodNotFound

所以，看起来我别无选择。我将为我的用例寻找解决方法。

问候，梦想家

# eclipse - 在 Ubuntu 12.04 LTS + Eclipse Juno 中运行/调试 Openerp7.0

> ID：14643472
> 
> 赞同：4
> 
> 时间：2013-02-01T09:46:15.093
> 
> 标签：eclipse, debugging, ubuntu-12.04, openerp

我正在犹豫是在这里还是在 Ubuntu 专用网站上问这个问题。但我认为这里会有更大的概率被回答。如果有人认为应该移动它，请建议这样做。

经过几天努力学习几个教程和答案，如[这个](http://www.theopensourcerer.com/2012/12/how-to-install-openerp-7-0-on-ubuntu-12-04-lts/)、[这个](http://www.ursainfosystems.com/1/category/openerp%207/1.html)、[这个](https://askubuntu.com/questions/186299/eclipse-juno-need-root-access-everytime-i-change-the-configuration/195372#195372)、[这个 SO 答案](https://stackoverflow.com/a/13704113/1297603)等等。我终于拥有了*Ubuntu 12.04 LTS*、*OpenERP 7.0*和*Eclipse Juno + PyDev + xml 模板*，这些模板都已启动、测试和运行。

**但**我无法使用 openerp 源文件夹添加新工作区，因此我也无法调试 OpenERP。我是在 Linux 中工作的新手，所以也许我遵循的一些步骤我认为是正确的，但事实并非如此。最后我有以下情况：

*   OpenERP 在位于*/opt/openerp*的文件夹上运行，我跑了`sudo chmod -R 777 openerp/*`
*   Eclipse 正在运行：*/home/eclipse/bin/*并执行`sudo chown -R myuser:myuser eclipse`

我通过指向我的 OpenERP 文件夹来创建一个新的工作区（参见第一个要点）。但是一旦添加并刷新它就不会显示里面的文件夹，*addons*，*server*和*web*。这是一个屏幕截图：

![在此处输入图像描述](../Images/d688b7af92fb4c443264a000f1805124.png)

所以，我也无法调试。打开此[视频](http://www.youtube.com/watch?feature=player_detailpage&v=RTg8VvyEVak#t=10s)将准确显示我无法复制的步骤。当我单击浏览以在新的调试配置上添加项目时，没有显示任何内容。我想这与工作区不工作有关。

关于我做错了什么的任何线索？我可以在其他地方寻找答案吗？还是我应该忘记这一套并重新开始清洁？

有几个与此类似的问题，我已经全部阅读，其中一些已关闭，希望我的不会走同样的路。

*   [如何在 Eclipse 中调试 OpenERP 代码 [关闭]](https://stackoverflow.com/q/12298811/1297603)
*   [Python & OpenERP 开发环境设置如何？](https://stackoverflow.com/q/9066774/1297603)
*   [如何为 Eclipse IDE 安装 OpenERP 插件？[关闭]](https://stackoverflow.com/q/13986014/1297603)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:56:18.143

呜呜！！像往常一样，问了这个问题，几分钟后发现问题出在哪里......这是一个非常愚蠢的问题，星期五让我白痴......如果有人在同一个问题上苦苦挣扎，我的回答是（重复一千次）：

> **创建项目时不要忘记取消选中“使用默认值”复选框**

我能够浏览到所需的文件夹并立即在我的工作区上创建项目。现在已经启动，正在运行，我可以毫无问题地进行调试。

![不要忘记取消选中使用默认复选框](../Images/5e9e672d89237f5dbc0d2471cc0e07eb.png)

# java - 某些文件的 MD5 校验和随 FTP 上传/下载而更改

> ID：14643474
> 
> 赞同：1
> 
> 时间：2013-02-01T09:46:19.337
> 
> 标签：java, php, ftp, md5, apache-commons-net

我正在使用[Apache Commons NET](http://commons.apache.org/net/)和他们的[FTPClient](http://commons.apache.org/net/api-3.2/org/apache/commons/net/ftp/FTPClient.html)。

现在我的情况是：我在服务器上有一个文件，并且在本地有相同层次结构中的相同文件。在服务器上，我使用 PHP 的[md5_file()](http://php.net/md5_file)生成文件的 MD5 校验和。在我的机器上，我正在使用 Apache Commons Digest Utils [md5hex()](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/digest/DigestUtils.html#md5Hex%28java.io.InputStream%29)生成 MD5 校验和。

那些 MD5 哈希实际上总是匹配的——除了某些文件。

其中一个文件是当前的 jQuery-Library。其中另一个文件是 .ttf 字体文件，另一个是常规 PHP 文件（来自[CodeIgniter](http://ellislab.com/codeigniter)的 system/libraries/Migration.php ）。

现在令人惊奇的部分：如果我看到那些 MD5 校验和不一样，我将本地文件上传到服务器（或者我将 FTP 文件下载到我的计算机，取决于哪个更新（时间戳））。但无论如何，在上传或下载之后，MD5 校验和仍然不一样——来自完全相同的文件。为什么？

正如我所想，时间戳可能是 md5 数据的一部分，但这实际上是不可能的，因为那样所有其他文件也会失败。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:17:07.097

正如 Jon Skeet 已经提到的，发生这种情况的通常原因是文件不是以二进制格式传输的，而是以 ASCII 模式传输的。

[FTPClient.setFileType()](http://commons.apache.org/net/api-3.2/org/apache/commons/net/ftp/FTPClient.html#setFileType%28int%29)的 FTPClient 文档支持这一点，其中指出：

> 如果从不调用此方法，则默认文件类型为 FTP.ASCII_FILE_TYPE。

要使用 FTPClient 以二进制模式传输文件，请`setFileType`在上传前调用：

```
FTPClient.setFileType(FTP.BINARY_FILE_TYPE); 
```

会话将保持二进制模式，直到您再次更改它。

顺便说一句，时间戳不是问题，它们不会影响 MD5 哈希。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:09:47.330

我没有评论previlleages，所以我发布作为答案。我早些时候在我的一个项目中遇到过这个问题，FTP 客户端用于在 ASCII 模式下添加换行符。

有关更多信息，请参阅以下链接 [https://superuser.com/questions/39520/downloading-files-with-filezilla-result-in-newline-rnn](https://superuser.com/questions/39520/downloading-files-with-filezilla-result-in-newline-r-n-n)

# asp.net - ASP.NET Web 应用程序不运行

> ID：14643480
> 
> 赞同：0
> 
> 时间：2013-02-01T09:47:03.777
> 
> 标签：asp.net, entity-framework, iis, ado.net, windows-server-2003

我使用 .net 框架 4 作为目标框架在 Visual Studio 2010 Professional 中制作了一个 Web 应用程序。数据库放置在 APP_DATA 文件夹中，并与我在应用程序中使用的 GridView 表建立了 ADO.net 连接。无论如何，当我从 Visual Studio 运行应用程序时，在本地主机上一切正常。

我使用发布工具将它发布到我的企业服务器上的网络共享，该服务器运行 Windows Server 2003 和 IIS 6。我在其上安装了 .NET 框架 4，并使用 aspnet_regiis 工具注册它，同时使用 -e 和 -i 参数。没有Framework64文件夹，所以我假设没有必要为64位版本注册它。

它仍然没有运行，而是显示以下两种情况之一：

1.页面未找到错误404...WTF！

1.  当我在服务器上打开 Web 应用程序目录时，我的所有 .aspx 文件都显示为记事本文件，而不是 Web 可浏览文件。当我在我的服务器（即 windows server 2003）目录上打开任何 aspx 文件时，它会打开记事本并显示源代码。

顺便说一句，它列在我服务器机器上 IIS 管理器的网站下。

请告诉我该怎么办。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:00:59.970

`404`意味着您实际上并没有使用正确的 url 访问应用程序。尝试`.html`在您的 Web 根目录中放置一个简单的页面，然后在浏览器中访问它。如果`IIS`仍然抱怨`404`意味着您的应用程序根 url 是错误的。否则我不能对您的框架配置说太多

*当我在服务器上打开 Web 应用程序目录时* 假设您在 Windows 资源管理器中打开 Web 应用程序目录而不是下面的浏览器是适用的

至于`.aspx`显示为文本文件的文件，这与`.Net framework`安装有关。这可能是由于`Visual studio`您的服务器机器上没有安装它。在您的开发机器上，您安装了 Visual Studio，它会自动为`.aspx`其他`.Net`文件注册自己类型，以便您在`.aspx`文件上看到 Visual Studio 图标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:04:00.927

在这种情况下，当您确定 aspx 页面在那里，但您收到类似的消息时`Page not found error 404`，99% 的情况是因为您`web.config`包含错误并且 asp.net 无法运行 - 通常 asp.net 可以运行不正常，您也可能将 web.config 放在错误的目录中并且找不到它，或者使用错误的版本配置它 - 与池不同。

您可以在 EventViewer 上查看真正的问题并获取此错误的详细信息。

# java - 扩展后ThreadPoolExecutor的使用

> ID：14643482
> 
> 赞同：2
> 
> 时间：2013-02-01T09:47:09.997
> 
> 标签：java, concurrency

根据 Java 并发实践，如果我们想在 ThreadPoolExecutor 中添加日志记录、计时、监控功能，那么我们应该对其进行扩展。假设如果我们像下面这样扩展它：

```
// code taken from java concurrency in practice

public class TimingThreadPool extends ThreadPoolExecutor 
{
private final ThreadLocal<Long> startTime
        = new ThreadLocal<Long>();
private final Logger log = Logger.getLogger("TimingThreadPool");
private final AtomicLong numTasks = new AtomicLong();
private final AtomicLong totalTime = new AtomicLong();

protected void beforeExecute(Thread t, Runnable r) {
    super.beforeExecute(t, r);
    log.fine(String.format("Thread %s: start %s", t, r));
    startTime.set(System.nanoTime());
}

protected void afterExecute(Runnable r, Throwable t) {
    try {
        long endTime = System.nanoTime();
        long taskTime = endTime - startTime.get();
        numTasks.incrementAndGet();
        totalTime.addAndGet(taskTime);
        log.fine(String.format("Thread %s: end %s, time=%dns",
                t, r, taskTime));
    } finally {
        super.afterExecute(r, t);
    }
}

protected void terminated() {
    try {
        log.info(String.format("Terminated: avg time=%dns",
                totalTime.get() / numTasks.get()));
    } finally {
        super.terminated();
    }
}
} 
```

我的疑问是你将如何使用这个类，因为如果你创建 ExecutorService，它总是返回一个 ThreadPoolExecutor 的实例。那么你将如何插入这个类来显示日志（需要客户端代码才能使用它）。

提前致谢！！！抱歉，如果我在提到问题时犯了任何错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:02:17.050

您的课程缺少构造函数，没有它们就无法工作

```
public class TimingThreadPool extends ThreadPoolExecutor {
    public TimingThreadPool(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit,
            BlockingQueue<Runnable> workQueue) {
        super(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue);
    }

    // ...
} 
```

此外，您可以查看`Executors`实现并在您的课程中做类似的事情

```
public static ExecutorService newFixedThreadPool(int nThreads) {
    return new TimingThreadPool(nThreads, nThreads,
            0L, TimeUnit.MILLISECONDS,
            new LinkedBlockingQueue<Runnable>());
} 
```

# xsd - JAXB XSD 元素（基本）

> ID：14643483
> 
> 赞同：1
> 
> 时间：2013-02-01T09:47:11.093
> 
> 标签：xsd, jaxb, uri

我想将传入的 XML 绑定到 JavaType

```
<?xml version="1.0" encoding="UTF-8"?>
<apiKeys uri="http://api-keys">
<apiKey uri="http://api-keys/1933"/>
<apiKey uri="http://api-keys/19334"/>
</apiKeys> 
```

我希望使用 JAXB，所以我定义了一个 XSD。我的 XSD 不正确，并且创建的对象（在创建时）是空的。

我的 XSD：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<xsd:element name="apiKeys" type="ApiKeysResponseInfo2" />

<xsd:complexType name="ApiKeysResponseInfo2">
<xsd:sequence>
<xsd:element name="uri" type="xsd:anyURI" minOccurs="1" maxOccurs="1">
</xsd:element>
<xsd:element name="apiKey" type="xsd:anyURI" minOccurs="1" maxOccurs="unbounded">
</xsd:element>
</xsd:sequence>
</xsd:complexType>  
</xsd:schema> 
```

显然我的元素定义是错误的。非常感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:02:52.873

> 我希望使用 JAXB，所以我定义了一个 XSD。

JAXB 不需要 XML 模式。我们将其设计为从 Java 对象开始，添加了从 XML 模式生成带注释模型的能力作为一种便利机制。

* * *

> 我想将传入的 XML 绑定到 JavaType

您可以使用下面的对象模型：

**ApiKeys**

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class ApiKeys {

    private String uri;
    private List<ApiKey> apiKey;

    @XmlAttribute
    public String getUri() {
        return uri;
    }

    public void setUri(String uri) {
        this.uri = uri;
    }

    public List<ApiKey> getApiKey() {
        return apiKey;
    }

    public void setApiKey(List<ApiKey> apiKey) {
        this.apiKey = apiKey;
    }

} 
```

**ApiKey**

```
import javax.xml.bind.annotation.XmlAttribute;

public class ApiKey {

    private String uri;

    @XmlAttribute
    public String getUri() {
        return uri;
    }

    public void setUri(String uri) {
        this.uri = uri;
    }

} 
```

**演示**

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(ApiKeys.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum14643483/input.xml");
        ApiKeys apiKeys = (ApiKeys) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(apiKeys, System.out);
    }

} 
```

# jquery - 如何自定义水平 jQuery-mobile 单选按钮

> ID：14643485
> 
> 赞同：2
> 
> 时间：2013-02-01T09:47:23.983
> 
> 标签：jquery, html, css, jquery-mobile, radio-button

我们的客户需要为 jQuery-mobile 定制设计单选按钮样式。实际上它与水平模式下默认的 jQuery-mobile 单选按钮设计非常相似。例如 jQuery-mobile 将水平单选按钮定义为

```
<fieldset data-role="controlgroup" data-type="horizontal">
    <legend>I like to buy and wear trendy must-haves</legend>
    <input type="radio" name="radio-choice" id="radio-choice-1" value="choice-1" checked="checked"  />
    <label for="radio-choice-1">1</label>

    <input type="radio" name="radio-choice" id="radio-choice-2" value="choice-2"  />
    <label for="radio-choice-2">2</label>

    <input type="radio" name="radio-choice" id="radio-choice-3" value="choice-3"  />
    <label for="radio-choice-3">3</label>

    <input type="radio" name="radio-choice" id="radio-choice-4" value="choice-4"  />
    <label for="radio-choice-4">4</label>

    <input type="radio" name="radio-choice" id="radio-choice-5" value="choice-5"  />
    <label for="radio-choice-5">5</label>
</fieldset> 
```

此外，我们的客户希望在`lablel`. 例如下图![自定义水平单选按钮](../Images/abb21672db5cc8b7b97edda85dc9534f.png)

我想知道 jQuery-mobile 是否允许我们显示默认单选按钮？如果可以，你能举个例子吗？

还是我们需要自定义这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:49:43.077

# 解决方案

首先，它不能通过 jQM 配置来完成。这必须通过 jquery 手动创建（与任何其他 jQM 小部件一样，包括字段集）。

我为您创建了一个工作示例：http: [//jsfiddle.net/Gajotres/779Kn/](http://jsfiddle.net/Gajotres/779Kn/)

您只需要再做一件事，我不想打扰自定义图像，所以我使用为我的另一个示例创建的图像：[https ://stackoverflow.com/a/13634738/1848600](https://stackoverflow.com/a/13634738/1848600)

这是需要的javascript：

```
$(document).on('pagebeforeshow', '#index', function(){     
    $('<div>').addClass('checkBox').appendTo('fieldset div div.ui-radio label');
    $('input[type="radio"]').each(function(){        
        ($(this).is(':checked')) ? $(this).next().find(".checkBox").addClass('checked') : $(this).next().find(".checkBox").addClass('not-checked');
    });

    $(document).on('click', '.ui-radio', function(){      
        $('input[type="radio"]').each(function(){  
            $(this).next().find(".checkBox").addClass('not-checked').removeClass('checked');
        }); 

        if($(this).find('input[type="radio"]').is(':checked')){
           $(this).find('label div.checkBox').removeClass('checked').addClass('not-checked'); 
           $(this).find('input[type="radio"]').attr('checked' , false);
        } else {
           $(this).find('label div.checkBox').removeClass('not-checked').addClass('checked');             
           $(this).find('input[type="radio"]').attr('checked' , true);
        }        
    });  
}); 
```

这是CSS：

```
.checkBox{
    width: 18px;
    height: 18px;
    background: #d9d9d9;
    border-radius: 3px;  
    margin: 0 auto;
    margin-bottom: 5px;
}

.not-checked, .checked {
    background-image: url("http://www.fajrunt.org/icons-18-white.png");
    background-repeat: no-repeat;
}

.not-checked {
    background-position: -18px 0;       
    background-color:#d9d9d9;
}

.checked {
    background-position: -720px 0;    
    background-color:#6294bc;
} 
```

如果你能等几个小时，我会更新一张图片，我不能从我现在的位置更新。

# 最后的笔记

如果您想了解更多关于如何自定义 jQuery Mobile 页面和小部件的信息，请查看这篇**[文章](http://www.gajotres.net/learn-how-to-customize-jquery-mobile-application/)**。它附带了许多工作示例，包括为什么 !important 对于 jQuery Mobile 是必需的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-14T05:32:31.880

无需 css 或 javascript；这是您使用哪些元素和类的问题，例如：

```
<div id="test_content" class="ui-content" data-role="main" data-theme="b">    
    <fieldset class="ui-controlgroup ui-corner-all">
      <div class="ui-grid-b ui-controlgroup-controls" style="width: 560px;">
        <div class="ui-block-a">
          <input name="invoicing_filter_type" id="invoicing_filter_tobeinvoiced"
            value="1|4" type="radio" data-mini="true" data-iconpos="bottom">
          <label for="invoicing_filter_tobeinvoiced">To be invoiced</label>
        </div>
        <div class="ui-block-b">
          <input name="invoicing_filter_type" id="invoicing_filter_pending" 
            value="9|5" type="radio" data-mini="true" data-iconpos="bottom">
          <label for="invoicing_filter_pending">Invoices pending</label>
        </div>
        <div class="ui-block-b">
          <input name="invoicing_filter_type" id="invoicing_filter_tobereleased" 
            value="9|6" type="radio" data-mini="true" data-iconpos="bottom">
          <label for="invoicing_filter_tobereleased">Invoices to be released</label>
        </div>
      </div>
     </fieldset>
</div> 
```

请注意，此处不使用数据角色。对应[的小提琴](http://jsfiddle.net/F8bvK/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:15:20.083

这是你想要的

使用 CSS

```
.myclass2 {
    background-color: yellow;
    float: left;
    margin-top: 11px;
}
.myclass {
    background-color: yellow;
    float: left;
    left: 13px;
    margin-top: 26px;
    padding-left: 22px;
    position: relative;
    top: 10px;
} 
```

**[JSFIDDLE](http://jsfiddle.net/eREux/1/)**

# c# - 使用实体框架而不使用语句的缺点？

> ID：14643491
> 
> 赞同：3
> 
> 时间：2013-02-01T09:47:57.630
> 
> 标签：c#, asp.net-mvc, entity-framework, using

有很多这样的代码块：

```
public class SomeController : Controller
{
    DbEntities entity = new DbEntities();

    public ActionResult Add()
    {
        entity.someOperations...
        return View();
    }

    public ActionResult Edit()
    {
        entity.someOperations...
        return View();
    }

    public ActionResult Detail()
    {
        entity.someOperations...
        return View();
    }

    public ActionResult Detail()
    {
        entity.someOperations...
        return View();
    }

    ..... 
```

我应该改变这样的方法吗？：

```
public class SomeController : Controller
{
    public ActionResult Add()
    {
        using(DbEntities entity = new DbEntities())
        {
            entity.someOperations...
        }

        return View();
    }
    ..... 
```

`using-statement`在 EF中不使用有什么问题？或者最好的方法是什么？此外，如果我们使用`using-statement`代码块会增长。

谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T10:10:37.040

**如果使用using 语句**，在上面的示例中没有大问题，但是当 dbContext 是局部变量时，很难为这样的代码编写单元测试。

如果您不遵循 Repository、Unit of Work 等任何设计模式，不想编写单元测试，那么在这种情况下将所有逻辑包装在**using 语句**中是最佳选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T10:06:01.947

`using`声明方法是您上面提出的两种方法中最好的。使用这种方法，您可以确保在`ObjectContext`使用后将其关闭并丢弃。

使用您的另一种方法，人们会假设`ObjectContext`可以保持未关闭状态，因此会占用与数据库的连接。要查看实际情况，请尝试使用其他方法创建示例应用程序，然后使用[EFProfiler](http://www.hibernatingrhinos.com/products/efprof)对其进行分析并观察`ObjectContext`打开的数量增加，而关闭的数量会明显减少。

[我最近参与了一个项目，该项目在采用您的第二种模式的高使用率下存在数据库问题（您可以在此处](https://stackoverflow.com/questions/12729429/entity-framework-closure-of-object-contexts)查看我的问题）。由于我没有足够的时间处理项目/代码库太大，因此我没有选择切换到`using`语句方法的选项。相反，我实现了以下手动强制处置in Global.asax （我在我的静态实例上有`ObjectContext`一个实例：`End_Request``DbContext``BusinessLayerService`

```
protected void Application_EndRequest(object sender, EventArgs e)
    {
        BusinessLayerService.Instance.Dispose();
        BusinessLayerService.Instance = null;
    } 
```

但是，如果您从项目开始就可以选择：**我强烈建议您使用该`using`模式**

# ruby-on-rails - RoR 控制器返回 404 错误

> ID：14643497
> 
> 赞同：0
> 
> 时间：2013-02-01T09:48:05.430
> 
> 标签：ruby-on-rails, ruby

你好，这是我的问题。

所有控制器在浏览器中总是返回 404 错误，但在日志中：

```
Processing PostController#index (for myip at 2013-02-01 13:33:02) [GET]
Rendering post/index
Completed in 2ms (View: 1, DB: 0) | 200 OK [http://site.com/] 
```

/public 中的文件加载正常。我的路线.rb：

```
map.connect ':controller/:action/:id'
map.connect ':controller/:action/:id.:format' 
```

希望得到您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:52:47.620

您的路线意味着您需要始终匹配以下`/controller/action/id`或`/controller/action/id.format`. 您应该使用像为新 Rails 项目生成的括号一样的括号。**记下关于为什么你不应该这样做的评论**

```
# This is a legacy wild controller route that's not recommended for RESTful  applications.
# Note: This route will make all actions in every controller accessible via GET requests.
# match ':controller(/:action(/:id))(.:format)' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:56:19.580

让控制器工作的一种简单方法是在路由中添加资源。这将映射所有控制器方法。

```
# app/controllers/controllernames_controller.rb
class ControllernamesController < ApplicationController
  def index
  end

  # and other methods you want...
end

# config/routes.rb
MyApp::Application.routes.draw do
   resources :controllername
end 
```

你的链接会变成`http://localhost/controllernames/methodname/id`

然后在您的视图文件中，您可以通过以下方式添加链接：

```
<%= link_to "whatever_your_like_to_name", controllernames_path %> 
```

如果您使用 Rails 提供的 RESTful 脚手架，您可以：

```
<%= link_to "whatever_your_like_to_name", new_controllername_path %>
# or
<%= link_to "whatever_your_like_to_name", edit_controllername_path(controllername) %>
# or 
etc... 
```

从控制器获取单个方法的另一种方法，您可以执行以下路由：

```
# config/routes.rb
MyApp::Application.routes.draw do
   get 'controllernames/methodname', to: 'controllernames#methodname', as: "whatever_you_want"
end 
```

在这种情况下，您在视图文件中的链接将是

```
<%= link_to "whatever_you_like_to_name", whatever_you_want_path %> 
```

# javascript - 无法在 javascript 中将 \" 替换为 "

> ID：14643506
> 
> 赞同：-1
> 
> 时间：2013-02-01T09:48:18.560
> 
> 标签：javascript, json, string, replace

在我的 .js 中有一个字符串

`var jdata ="[{\"name\":\"John\"}]"`

我想将其转换为 [{"name":"John"}]。

我尝试了以下但失败了

`jdata = jdata.replace("\"","\"")
jdata = jdata.replace("\\"","\"") jdata = jdata.replace("\\\"","\"")`

更换的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T09:51:22.863

`\`只是使用转义字符串内的双引号（因为您在外面使用双引号）。

实际上，您的字符串中没有`\`字符。

如果要将字符串转换为对象，请使用：

```
var obj = JSON.parse(jdata); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T09:53:09.407

如果您希望它成为一个对象，只需执行以下操作：

```
JSON.parse(jdata); 
```

结果将被`[{"name":"John"}]`客观化。

否则，您已经完成了工作。如果您尝试打印`"[{\"name\":\"John\"}]"`，您将看到没有`\`字符，因为它是转义字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T09:50:57.947

当您打印字符串时，您将看到转义字符`\`未显示。之所以需要它，是因为引号中的内容不能包含未转义的引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T09:55:33.120

如果您只想将其转换为 string `[{"name":"John"}]`，则可以使用正则表达式来做到这一点：

```
jdata = jdata.replace(/\\\"/,"\""); 
```

# c# - DateTime 格式返回奇怪的结果

> ID：14643508
> 
> 赞同：0
> 
> 时间：2013-02-01T09:48:23.203
> 
> 标签：c#, datetime

我有这个：

```
DateTime date = new DateTime(); 
```

然后我打印它。结果如下：

本地主机：

```
date: 1/1/0001 12:00:00 AM 
```

在服务器上：

```
date: 1-1-0001 0:00:00 
```

正确的方法是本地主机上的方法。如何解决这个问题，为什么会这样？这是相同的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T09:51:04.170

因为不同机器上的区域设置不同。要以相同的格式输出日期时间，您必须明确指定格式字符串：

```
date.ToString("yyyy-MM-dd HH:mm:ss"); 
```

同样正如约翰在下面的评论中推荐的那样，如果您希望在不同的机器上以相同的格式输出日期时间，尽管有本地区域设置，您可以使用[InvariantCulture](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)格式提供程序：

```
date.ToString(CultureInfo.InvariantCulture); 
```

[MSDN](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.invariantculture.aspx)：

> 不变的文化是文化不敏感的；它与英语相关，但与任何国家/地区无关

MSDN：

*   [标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)
*   [自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:54:13.183

您可以使用不变的文化来显示您的日期，如果您不太关心格式，只要它始终相同即可。

```
date.ToString(System.Globalization.CultureInfo.InvariantCulture.DateTimeFormat); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:55:13.297

要以您在此处显示的方式显示日期，您可以使用：

```
date.ToString("M/d/yyyy hh:mm:ss tt"); 
```

或者当使用格式字符串时：

```
string.Format("date: {0:M/d/yyyy hh:mm:ss tt}", date); 
```

# php - 开始使用的一般信息... 创建 SIP 客户端

> ID：14643513
> 
> 赞同：2
> 
> 时间：2013-02-01T09:48:40.500
> 
> 标签：php, client, sip, telecommunication

我正在尝试编写一个 PHP 脚本，该脚本从硬件交换机读取[SIP（​​会话启动协议）](https://www.rfc-editor.org/rfc/rfc3261)信号以获取特定详细信息，然后将一些数据返回给交换机。

作为这个 SIP 的新手，我不知道如何与发送 SIP 信号的交换机进行交互。我们是否需要向交换机发送一些消息以获得响应？我用谷歌搜索了 SIP，但只得到了关于 SIP 的一般信息，但没有任何程序化信息。

任何人都可以提供任何指向任何教程的指针，这些教程显示了如何以编程方式与 SIP 信号交互？

是否有任何免费的在线服务可以模拟 SIP 信号以进行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T10:49:06.453

web域需要注意，PHP主要用于创建动态XML内容，它的使用方式倾向于SIP与其他类型的脚本背景相同，用于增强呼叫路由和切换放置。欲了解更多详情，请查看我们的网站：- [https://www.true-telecom.com/sip](https://www.true-telecom.com/sip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T14:29:46.303

SIP 是一种协议，旨在建立和控制两个或更多人之间的数据流。（通常这意味着语音数据流。）

听起来您想向交换机（它是处理 SIP 呼叫的硬件吗？）询问信息，可能是关于交换机当前正在处理的呼叫数量或类似信息。

我认为您实际上并不想使用 SIP 与此设备通信。我建议告诉我们那个开关是什么，并找到它的参考手册。

# php - 使用查询路径获取 xml 文件中的命名空间

> ID：14643516
> 
> 赞同：1
> 
> 时间：2013-02-01T09:48:44.423
> 
> 标签：php, xml, cakephp, querypath

我正在使用查询路径来解析我的 xml 文件。它工作正常，但现在我的要求是我需要获取标签/命名空间的名称。前任：-

```
 <contact>
  <phone>738929238239</phone>
  <type>Mobile</type>
  </contact> 
```

现在我的要求是假设我不知道 xml 文件中存在的名称空间。我想首先从上面的示例中获取联系人、电话、类型等命名空间。然后我需要得到他们相应的元素。

我可以通过以下代码提及命名空间来获取元素名称。

```
<?php
require '../src/qp.php';
$xml ='test.xml';
echo "Printing individual Data<br />";
print qp($xml, 'phone')->text();
print qp($xml, 'type')->text();
echo "<br />Printing all the data<br />";
print qp($xml)->text();
?> 
```

但是如何在查询路径中显示标签名称？？？？

# vba - 使用 MS Word Mailmerge 宏丢失格式

> ID：14643524
> 
> 赞同：1
> 
> 时间：2013-02-01T09:49:18.087
> 
> 标签：vba, ms-word, ms-access-2010, mailmerge

使用 MS Word 2010 我希望 Mailmerge 使用宏运行，将每条记录保存为单独的文件，以 PDF 格式使用其中一个字段作为文件名。这将为我节省大量时间。

我遇到的问题是格式完全丢失了，就好像它只是复制文本并将其粘贴到新文档中一样。有什么办法可以保护格式，因为没有它它是徒劳的......

提前致谢。

```
Sub splitter()

Dim i As Integer
Dim Source As Document
Dim Target As Document
Dim Letter As Range
Dim oField As Field
Dim FileNum As String

Set Source = ActiveDocument

ActiveDocument.MailMerge.DataSource.ActiveRecord = wdLastRecord

For i = 1 To ActiveDocument.MailMerge.DataSource.ActiveRecord
    ActiveDocument.MailMerge.DataSource.ActiveRecord = i
    Set Letter = Source.Range
        For Each oField In Letter.Fields
        If oField.Type = wdFieldMergeField Then
            If InStr(oField.Code.Text, "INV_ID") > 0 Then
            FileNum = oField.Result
            End If
        End If
        Next oField
    Set Target = Documents.Add
    Target.Range = Letter
    Target.SaveAs2 "C:\BACS\INVOICING\INVOICES\Word Export\" & FileNum, 17
    Target.Close
    Next i
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:57:04.073

如何使用保存？

此示例代码循环遍历邮件合并文档中的每个邮件合并项目，将项目作为字母打开，并使用 DataSource 中的字段作为文件名将其保存为 PDF。没有错误编码，也没有尝试检查重复的文件名。这是一个片段。

```
Dim iRec As Integer
Dim docMail As Document
Dim docLetters As Document

Set docMail = ActiveDocument

''There is a problem with the recordcount property returning -1
''http://msdn.microsoft.com/en-us/library/office/ff838901.aspx
docMail.MailMerge.DataSource.ActiveRecord = wdLastRecord
iRec = docMail.MailMerge.DataSource.ActiveRecord

docMail.MailMerge.DataSource.ActiveRecord = wdFirstRecord

For i = 1 To iRec
    With docMail.MailMerge
        .Destination = wdSendToNewDocument
        .SuppressBlankLines = True
        With .DataSource
            .FirstRecord = i
            .LastRecord = i
            '' This will be the file name
            '' the test data source had unique surnames
            '' in a field (column) called Surname
            sFName = .DataFields("Surname").Value
        End With
        .Execute Pause:=False
        Set docLetters = ActiveDocument
    End With
    docLetters.ExportAsFixedFormat OutputFileName:= _
        "Z:\docs\" & sFName & ".pdf", ExportFormat:= _
        wdExportFormatPDF, OpenAfterExport:=False, OptimizeFor:= _
        wdExportOptimizeForPrint, Range:=wdExportAllDocument, From:=1, To:=1, _
        Item:=wdExportDocumentContent, IncludeDocProps:=True, KeepIRM:=True, _
        CreateBookmarks:=wdExportCreateNoBookmarks, DocStructureTags:=True, _
        BitmapMissingFonts:=True, UseISO19005_1:=False
    docLetters.Close False

    docMail.MailMerge.DataSource.ActiveRecord = wdNextRecord
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T12:16:47.117

首先让我在应得的地方给予赞扬，因为我对编写宏一无所知。事实上，这是我第一次尝试使用宏，更不用说修改代码了。[只有 24 岁的 Basic 知识（是原始知识，不是 Visual Basic）和 Fortran（不是穿孔卡 Fortan，但非常接近）我从http://raduner.ch/blog/microsoft-](http://raduner.ch/blog/microsoft-word-mail-merge-into-single-documents)获取了 Mr.Raduner 宏[word-mail-merge-into-single-documents](http://raduner.ch/blog/microsoft-word-mail-merge-into-single-documents)， Remou 用于生成上述 pdf 的宏代码，以及其他一些，并结合了不同方面和 PRESTO ！！！我显然很幸运，但它适用于 MS Word 2010。希望它也适用于其他所有人。我正在加载单个 pdf 创建者和单个 word 文件创建者。我希望了解 Visual Basic 的人能将其清理干净，并使其对其他人更加用户友好。

单个字文件宏（请注意，您的 Excel 数据源中必须有一个“文件名”列）：

```
Sub SaveIndividualWordFiles()
Dim iRec As Integer
Dim docMail As Document
Dim docLetters As Document
Dim savePath As String

Set docMail = ActiveDocument
''There is a problem with the recordcount property returning -1
''http://msdn.microsoft.com/en-us/library/office/ff838901.aspx

savePath = ActiveDocument.Path & "\"

docMail.MailMerge.DataSource.ActiveRecord = wdLastRecord
iRec = docMail.MailMerge.DataSource.ActiveRecord
docMail.MailMerge.DataSource.ActiveRecord = wdFirstRecord

For i = 1 To iRec
 With docMail.MailMerge
    .Destination = wdSendToNewDocument
    .SuppressBlankLines = True
    With .DataSource
        .FirstRecord = i
        .LastRecord = i
        '' This will be the file name
        '' the test data source had unique surnames
        '' in a field (column) called FileName
        sFName = .DataFields("FileName").Value
    End With
    .Execute Pause:=False
    Set docLetters = ActiveDocument
  End With

' Save generated document and close it after saving
        docLetters.SaveAs FileName:=savePath & sFName
        docLetters.Close False

  docMail.MailMerge.DataSource.ActiveRecord = wdNextRecord
Next
End Sub 
```

# android - Phonegap 和 Sencha Touch 的区别

> ID：14643527
> 
> 赞同：58
> 
> 时间：2013-02-01T09:49:34.080
> 
> 标签：android, cordova, sencha-touch

我阅读了很多关于 Phonegap 和 Sencha Touch 的文档。但是我仍然对这两个感到困惑。

我已经创建了一个原生 android 应用程序。现在，我想创建在多个设备上运行的相同应用程序。所以，我对这两个框架感到困惑。

*   **这两个中哪个是最好的，为什么？**

*   **Phonegap 和 Sencha Touch 有什么区别？**

*   **sencha touch 和 sencha touch 2 有什么区别？**

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-01T10:00:51.100

Sencha Touch 是一个 HTML5 移动框架。它将帮助您使用 HTML、JavaScript 和 CSS 开发 Web 应用程序。还有更多类似的框架，例如 jQuery Mobile 或 Lungojs。

另一方面，PhoneGap 是一个平台，允许您通过 JavaScript 接口使用移动设备功能，例如 GPS、相机等。

总之，要使用这些技术创建应用程序，您将在 HTML5 中实现设计和逻辑（如果您愿意，可以使用 Sencha Touch），将使用 PhoneGap 来利用设备功能并将应用程序包装为原生应用程序。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-02-01T11:31:45.207

我想在 Sencha touch 中补充一点，它可以使用一些设备功能。目前我正在开发构建到 android 设备的网络应用程序，并且我正在使用相机（[http://docs.sencha.com/touch/2-1/#!/api/Ext.device.Camera](http://docs.sencha.com/touch/2-1/#!/api/Ext.device.Camera)）。它工作得非常酷。

PhoneGap本身只是javascript和Devices之间的一层，一般是它唯一的浏览器，可以使用原生javascript操作DOM，也可以使用JqueryMobile等框架。

Sencha touch 是一个带有很棒的 js 层的 HTML5 框架。您不需要使用任何外部框架来制作应用程序（但如果您想确定可以这样做）。此外，从第 2 版开始，它们支持原生构建到 android、iOs，可能还有黑莓（但在这里我不确定我只看到了几篇文章）。在新的 alpha 版本中，有 winphone 和 IE10 的编译器。

对于我的项目，我使用 phonegap + jquery 制作了小应用程序，但我会说它看起来不像原生的，太慢了。现在我已经重写了 Sencha Touch，它真的很酷，因为我看不到任何速度问题，而且我有命令行来构建项目。另一方面，我有一个小问题，即 sencha touch 无法在 Prestigio 设备上运行，因此我将调查此问题是否在我的应用程序中或其 Sencha 触摸问题

哦，是的，对我来说最重要的问题。PhoneGap apk 文件接近 2mb，Sencha touch apk 为 600kb。功能完全一样。甚至在 sencha touch 中，我添加了更多文件 :)

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-09-12T07:47:44.607

**Phonegap 和 Sencha Touch 有什么区别？**

**煎茶触摸**是一个完整而丰富的框架，用于创建移动用户界面和相关的数据建模、服务器通信和业务逻辑。与桌面/平板应用程序的 Sencha ExtJS 一样，您使用基于 Javascript 类的干净 MVC 设计来编写大部分应用程序。HTML 由这些将 HTML 视为汇编语言的类生成。这抽象了各种移动平台浏览器和浏览器版本之间的差异/错误/qwerk，从而使开发人员免于基于 HTML 的解决方案所表现出的大部分痛苦。相反，开发人员组装了提供数据建模和集合绑定、拖放和 UI 动画等功能的更高级别的组件。您还可以平滑滚动和自动预取潜在无限数据集合的数据，同时通过 DOM 元素重用在内部提供优化的 DOM 性能。这之所以成为可能，是因为您不再直接编写 HTML 或 XML 代码，而是 Javascript 类为您创建/销毁/回收 DOM 元素。您仍然可以使用 HTML 模板自定义组件。

ExtJS 5 现在支持 ViewModels (MVVM)，因此预计 Sencha Touch 3.x 也将支持。

您可以使用 Sencha Touch 创建外观和感觉类似于移动应用程序的 Web 应用程序，或者您可以将它们编译成*原生*应用程序，这些应用程序附带 PhoneGap 原生包装器或 Sencha 自己的原生包装器。Sencha 将未来的工作重点放在PhoneGap 本地包装器上，它提供了几个与PhoneGap API 集成的设备相关类，有时在PhoneGap 未加载时提供这些API 的模拟（例如在桌面浏览器中进行测试）。

**PhoneGap**为 Javascript 代码调用原生设备功能（如数字罗盘、麦克风、相机、电池、设备功能/状态、文件系统等）提供了一个桥梁。这些是通过 PhoneGap**插件**提供的，这些插件在每个操作系统平台上使用相同的 Javascript 接口重新实现。插件可能会或可能不会与这些硬件或其他操作系统功能集成（例如，条形码扫描插件使用相机，而 SQLite 数据库引擎访问本地文件系统）。PhoneGap 附带了几个标准插件，但目前注册了 550 多个[Cordova 插件](http://plugins.cordova.io/#/)。

PhoneGap 团队展望了未来，其中一些硬件 API 正在进入浏览器 API，并寻求遵循新兴标准，以确保随着这种趋势的出现，开发人员尽可能顺利地过渡。

**这两个中哪个是最好的，为什么？**

希望您现在会看到它们不是相互竞争，而是经常一起使用的互补技术。

您可以开发不依赖任何其他框架的简单 PhoneGap 应用程序，但今天大多数移动开发人员会将 PhoneGap 与以下流行的相互竞争的 JavaScript 框架之一一起使用：AngularJS、Kendo UI、jQuery Mobile 或 Sencha Touch *。*

**Cordova 和 PhoneGap 有什么区别？**

你没有问这个，但它需要在这种情况下回答。最好的答案在[这里](http://phonegap.com/2012/03/19/phonegap-cordova-and-what%E2%80%99s-in-a-name/)。

**Sencha Touch 和 Sencha Touch 2 有什么区别？**

最初的 Sencha Touch 1.x 和 Sencha ExtJS 4.1 现在都已弃用，但都使用了早期的 Javascript 类模型。Sencha Touch 1.x 还缺少许多其他功能，包括与 PhoneGap 的集成和新的 Sencha Command 构建系统。

Sencha Touch 2.x 引入了一种新的更智能、更精简的类设计，最近被 ExtJS 5.x 完全采用。ExtJS 5.x 还带来了我们预计将出现在（尚未发布）Sencha Touch 3.x 中的 View Models（MVVM 代替 MVC）

如果您打算同时使用 PhoneGap 和 Sencha Touch，您可能还会对[Sencha Touch Live](https://github.com/tohagan/stlive)感兴趣，这是我创建的一个免费开源应用程序，它将显着提高您的工作效率。只需一条命令，它就可以在设备（或设备模拟器/模拟器）上创建、编译、部署和运行新应用程序。然后，您可以“实时编辑” Sencha Touch 代码一个或多个设备/模拟器。您只需保存文件，它就会将应用程序重新加载到设备上。它甚至会自动将您的 SCCS 文件编译成 CCS。因此，您很少需要重新编译/重新部署/重新运行或重新启动调试器，只需编辑并保存并立即在多个设备上查看结果。与它所基于的 PhoneGap Developer App 不同，您可以使用*任何*PhoneGap 插件。大量其他很酷的功能供您享用！

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-05-22T12:15:18.177

我们已经使用 Phonegap 和 jQueryMobile 进行了 5 个多月的开发。为了给这个讨论增加一些价值，我不得不说 Phonegap 在 iPhone 5 和新的 Android 4.x 设备上没有速度问题，因为它们非常快。如果您针对 iPhone 4 和旧设备，您可能会觉得应用程序有点慢。那是真实的。但是如果为未来开发，如果你不想进入 Objective-C 世界，Phonegap 是一个真正的选择。但不要忘记原生应用程序是真实的，其他框架不会相同......它们将非常接近。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T11:30:10.537

如果您是一个主要习惯于使用 HTML、CSS 和一些 JavaScript 构建网站的 Web 开发人员，您会发现 jQuery Mobile 比 Sencha Touch 更容易开发，因此开发速度更快。但如果你是一个专业的 JavaScript 程序员，喜欢“MVC 方式”做事，你会喜欢 Sencha Touch。

此外，jquery mobile 为您提供了很大的灵活性，这可能并不总是一件好事

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-23T13:45:34.160

为什么不兼得 ？Phonegap/Cordova 不是 ui 框架 PG/Cordova 介于原生函数和 ui 框架之间。所以你可以一起使用 Sencha 和 Phonegap

# linux - 通过 shell 脚本更改文件的内容

> ID：14643531
> 
> 赞同：22
> 
> 时间：2013-02-01T09:49:41.503
> 
> 标签：linux, bash, shell

我有一个要求，我需要更改文件的内容，比如 xyz.cfg。该文件包含以下值：

```
group address=127.8.8.8
port=7845
Jboss username=xyz_ITR3 
```

我想在需要时通过 shell 脚本更改此内容并保存文件。更改的内容可能如下所示：

```
group address=127.8.7.7  
port=7822
Jboss username=xyz_ITR4 
```

我如何通过获取用户输入或其他方式使用 shell 脚本来实现这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-01T10:04:25.710

怎么样：

```
#!/bin/bash

addr=$1
port=$2
user=$3

sed -i -e "s/\(address=\).*/\1$1/" \
-e "s/\(port=\).*/\1$2/" \
-e "s/\(username=\).*/\1$3/" xyz.cfg 
```

传递给脚本的参数在哪里`$1,$2`以及在哪里。`$3`将其保存为一个文件，`script.sh`并确保它可以执行，`chmod +x script.sh`然后您可以像这样运行它：

```
$ ./script.sh 127.8.7.7 7822 xyz_ITR4

$ cat xyz.cfg
group address=127.8.7.7
port=7822
Jboss username=xyz_ITR4 
```

这为您提供了基本结构，但是您需要考虑验证输入等。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-02-17T10:27:58.383

*

```
#! /bin/sh
file=xyz.cfg
addr=$1
port=$2
username=$3
sed -i 's/address=.*/address='$addr'/' $file
sed -i 's/port=.*/port='$port'/' $file
sed -i 's/username=.*/username='$username'/' $file 
```

*

我希望这对初学者来说更容易理解

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-01T09:58:44.053

```
sed -i 's/something/other/g' filename.txt 
```

将就地编辑 filename.txt，并将单词“something”更改为“other”

我认为 -i 可能是一个 GNU 扩展，但如果它适合你，你可以通过 find、xargs 等添加它。

如果您想在 shell 脚本中更改它，您可以在命令行上使用参数并按数字引用它们，例如 $1

编辑：

根据我的评论，下面 sudo_O 的答案正是您想要的示例。我要补充的是，您通常希望对多个文件、跨越子目录等进行此类匹配，因此了解 find/xargs，您可以将两者结合起来。在一堆 .cfg 文件中更改子网的简单示例可能是：

```
find -name '*.cfg' -print0 | xargs -0 -I {} sed -ie 's/\(192.168\)\.1/\1\.7/' {} 
```

注意 find/xargs 的 -print0/-0 参数（对于带空格的路径/文件名非常有用），并且由于外壳，您必须转义捕获括号（在 sudo 的示例中相同）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-24T07:22:34.343

除了上述解决方案外，您还应注意替换文本中的转义字符。

例如，如果您替换类似`/home/user/`then 的内容，您将无法获得想要的结果。

要解决此问题，您可以将分隔符从 更改`/`为`|`。请参阅下面的代码示例。

```
OLD="path/to/replace"
NEW="new/path"
file=file-to-search.log

sed "s|$OLD|$NEW|g" $file 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-04T05:41:40.883

```
sed -i "s/$name/$new_name/g" address.txt 
```

该命令也可用于修改数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-04T11:53:59.077

您可以按如下方式实现 -

文件**script.sh**：

```
while [ $# -gt 0 ]
do
 case "$1" in
     --group-address)
            export NEW_VAL1=$2
            shift 2
            ;;
     --port)
            export NEW_VAL2=$2
            shift 2
            ;;
     --username)
            export NEW_VAL3=$2
            shift 2
            ;;

    *)
    echo "Unrecognized option: $1"
    usage 1
    esac
done

sed -i 's/group address=.*/group address='$NEW_VAL1'/g' xyz.cfg
sed -i 's/port=.*/port=.'$NEW_VAL2'/g' xyz.cfg
sed -i 's/Jboss username=.*/Jboss username='$NEW_VAL3'/g' xyz.cfg 
```

您现在可以通过传递相应的参数来更新这些值 -

*   --组地址
*   - 港口
*   - 用户名

在此脚本的命令行上

例如 -

```
./script.sh --group-address 127.8.7.7 --port  7822 --username xyz_ITR4 
```

# php - PHP 下载文件到指定目录

> ID：14643534
> 
> 赞同：1
> 
> 时间：2013-02-01T09:49:53.540
> 
> 标签：php, download

我有允许用户下载文件的 php 脚本。默认情况下，当用户选择保存文件（不使用任何程序打开它）时，它会保存在浏览器的“下载”文件夹中。我的问题是我可以在用户计算机上设置应该保存文件的文件夹吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:51:14.320

不。

它是用户的计算机，因此用户决定将文件存储在哪里。你甚至不知道文件系统是如何组织的——它可能是 Unix 或 Windows，它们的路径会有很大的不同。

事实上，您可以使用一些客户端技术（例如[受信任的 Java 应用程序](http://www.developer.com/java/other/article.php/3303561/Creating-a-Trusted-Applet-with-Local-File-System-Access-Rights.htm)）来实现这一点。然后用户会收到一个安全警告，如果他决定接受，您的小程序就可以读写文件系统。但你肯定不想这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:51:50.827

由于您的 php 脚本在服务器端运行，因此您无法在客户端计算机中创建或读取文件夹，因此您无法将其下载到您指定的文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T14:19:22.940

我没有尝试过，但我认为它可以工作。

类似于从戴尔等公司下载驱动程序，而不是直接下载文件，而是让用户下载 ZIP 安装程序。

此 ZIP 安装程序将允许您指定默认提取路径。

然后，您的 PHP 服务器可以使用预设设置在原始文件上运行 zip 构建器工具。

看看[Nirsoft ZipInstaller](http://www.nirsoft.net/utils/zipinst.html)。

# python - 用 Python 修改二进制文件

> ID：14643538
> 
> 赞同：6
> 
> 时间：2013-02-01T09:50:06.100
> 
> 标签：python, file-io, binaryfiles

我正在尝试修补十六进制文件。我有两个名为“patch 1”和“patch 2”的补丁文件（十六进制）

要修补的文件是一个名为“file.bin”的 16 MB 文件。

在过去的 6 或 7 个小时里，我尝试了许多不同的方法来弄清楚如何去做。我可以整天将字符串写入文件，但我正在尝试执行以下操作：

用读取字节打开 patch1.bin 用读取字节打开 patch2.bin 用写入字节打开 file.bin

我想寻找位置 0xc0010 和 0x7c0010，并应用 patch1.bin 然后我想寻找到 0x040000 并应用 patch2.bin

所以总而言之，我将应用 3 个补丁，然后关闭“file.bin”

如果有人冷给我一个例子，我将非常感激:)

我首先尝试了这个：

```
patch1 = open("patch1", "r");
patch2 = open("patch2", "r");
main = open("file.bin", "w");

main.seek(0xC0010);
main.write(patch1);
main.seek(0x7C0010);
main.write(patch1);
main.seek(0x40000);
main.write(patch2);
main.close(); 
```

但被告知我正在尝试将字符串写入文件，当它确实不是我想要的时，大声笑然后我尝试了这个：

```
infile1 = open("patch1.bin", "rb") 
new_pos1 = int("0x00", 16)
infile1.seek(new_pos1, 0)
infile2 = open('file.bin', 'wb')
new_pos2 = int('0xc0010', 16)
infile2.seek(new_pos2, 0xc0010)
chunk1 = int("6FFFE0", 16)         #this is how long patch1 file is
data1 = infile1.read(chunk1)
with open("file.bin", "a") as outfile:
    outfile.write(data1) 
```

但它也不起作用，因为无论我尝试什么，我都无法让它以正确的偏移量写入数据。

我确实设法将patch1写入file.bin几次，但它没有在正确的偏移量处进行修补，事实上它删除了file.bin并只是将patch1复制到了它的位置。这当然是错的。

我必须提醒你，我是 python 和编程的新手，但我真的很想深入研究它并学习，所以任何好的例子都会被检查，希望对我来说是一个很好的学习课 :)

感谢伙计们帮助我弄清楚我做错了什么:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T09:58:22.733

您只需要使用`seek`和`write`。用于`seek`跳转到该位置并`write`覆盖现有数据。

```
with file('patch1.bin', 'rb') as fh:
    patch1 = fh.read()

with file('patch2.bin', 'rb') as fh:
    patch2 = fh.read()

with file('file.bin', 'r+b') as fh:
    # apply patch1
    fh.seek(0xc0010)
    fh.write(patch1)
    fh.seek(0x7c0010)
    fh.write(patch1)
    # apply patch2
    fh.seek(0x040000)
    fh.write(patch2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T10:14:02.750

1.txt：

```
asdf 
```

一个.py：

```
with open('1.txt','r+b') as f:
    f.seek(2)
    f.write('D') 
```

1.txt：

```
asDf 
```

这应该给你一个线索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:13:40.207

您需要使用`r+b`编辑目标文件的模式。`wb`是不更新的写入模式，将截断现有文件。查看[http://docs.python.org/2/library/functions.html#open](http://docs.python.org/2/library/functions.html#open)或您操作系统的 fopen 手册页以获取有关不同文件模式的详细信息。

# java - 在 DB 中插入冗余数据

> ID：14643542
> 
> 赞同：1
> 
> 时间：2013-02-01T09:50:23.610
> 
> 标签：java, mysql, swing, excel

我的任务是从 Excel 表中获取数据并在 MySQL 数据库中更新，该数据库有 2 列 USN 和 Name。问题是 USN 在行和名称中都打印。例如，如果我将它保存在数据库中时有 12 条记录，它将插入 24 条记录。我也在使用 Swing 概念。下面是我的代码。

```
class OpenClass implements ActionListener 
{

public void actionPerformed(ActionEvent e) 
{
    Workbook w ;
    chooser = new JFileChooser();
  JFileChooser chooser = new JFileChooser();

  int option = chooser.showOpenDialog(ExcelFileUploading.this);
  if(option == JFileChooser.APPROVE_OPTION) 
  {       
      try 
      {
        w = Workbook.getWorkbook(chooser.getSelectedFile());
        Sheet sheet = w.getSheet(0);
        for(int i = 0; i<sheet.getRows(); i++)
        {
            for(int j=0; j<sheet.getColumns();j++)
            {
                Cell cell = null;
                if(j==0)
                {
                    cell = sheet.getCell(j, i);
                    if(checkIfNumber(cell.getContents().toString())== false)
                    {
                        //System.out.print("\t\t");
                        continue;
                    }
                    System.out.print("\n");
                }
                cell = sheet.getCell(j, i);
                CellType type = cell.getType();

                if((type == CellType.LABEL)|| (type == CellType.NUMBER))
                {
                    try 
                    {
                        Class.forName(driver);
                        con = DriverManager.getConnection(url+dbName,username,password);
                        stmt = con.createStatement();
                        String query = "INSERT INTO student (USN,Name)"
                            +"VALUES('"+cell.getContents()+"','"+cell.getContents()+"')";
                        stmt.executeUpdate(query);

                    } catch (Exception exp) 
                     {
                        exp.printStackTrace();
                     }
                    finally
                    {
                        try 
                        {
                            stmt.close();
                            con.close();
                        } catch (SQLException exp) 
                        {
                        }
                    }
                }
            }
        }
      } catch (Exception exp)
    {
        exp.printStackTrace();
    }
      display.setText("Opened File : " +((chooser.getSelectedFile()!=null)?
              chooser.getSelectedFile().getName(): "nothing"));
  }

  if(option == JFileChooser.CANCEL_OPTION) 
  {
      display.setText("Open Operation Cancelled");
  }
}

private boolean checkIfNumber(String string) 
{
    try 
    {
        double d = Double.parseDouble(string);
        //System.out.print(d);
        return true;
    } catch (NumberFormatException ne) 
    {
        return false;
    }

}
 } 
```

由于我的 Db 表中有 2 列（USN，名称），我不得不放`cell.getContents()`两次。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T20:42:53.340

您遍历 excel 中的所有行，然后遍历 excel 中的所有列。您使用 2 列不需要第二个循环。此外，您只有一个 Cell 对象并且只保留一个对单元格的引用，但是当您创建插入语句时，您为 SQL 中的两个值分配了相同的单元格

因此，如果您有 2 行（用“，”字符分隔的列：

*   1,11
*   2,22

您的 SQL 语句是：

```
INSERT INTO student (USN,Name)VALUES('1','1')
INSERT INTO student (USN,Name)VALUES('11','11')

INSERT INTO student (USN,Name)VALUES('2','2')
INSERT INTO student (USN,Name)VALUES('12','12') 
```

你想要的是这样的，对于每一行，我们：

1.  检查第一个单元格以查看它是否是字符串，如果是，则分配给 cell1。
2.  检查第二个单元格以查看它是否适合类型。如果没有，请转到下一行和第 1 步。
3.  使用 Cell1 和 Cell2 创建 SQL 语句。

因此，如果没有实际的 mysql 连接/插入，我认为您更多地寻找这样的东西：

```
public class OpenClass {

    public static void main(String args[]) {
        new OpenClass().testIt();
    }

    public void testIt() {
        Workbook w;
        JFileChooser chooser = new JFileChooser();

        int option = chooser.showOpenDialog(null);

        //CREATE TWO CELL OBJECTS
        Cell cell1, cell2;
        if (option == JFileChooser.APPROVE_OPTION) {
            try {
                w = Workbook.getWorkbook(chooser.getSelectedFile());

                Sheet sheet = w.getSheet(0);

                //ITERATE BY ROWS
                for (int i = 0; i < sheet.getRows(); i++) {

                    //GET AND CHECK COLUMN1 VALUE
                    cell1 = sheet.getCell(0, i);
                    if (checkIfNumber(cell1.getContents().toString()) == false)
                        continue;

                    //GET CHECK COLUMN2 VALUE
                    cell2 = sheet.getCell(1, i);
                    CellType type = cell2.getType();

                    if ((type == CellType.LABEL) || (type == CellType.NUMBER)) {
                        String query = "INSERT INTO student (USN,Name)"
                                + "VALUES('" + cell1.getContents() + "','"
                                + cell2.getContents() + "')";
                        System.out.println(query);
                        //RUN YOUR QUERY HERE!
                    }
                }
            } catch (BiffException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }

    private boolean checkIfNumber(String string) {
        try {
            double d = Double.parseDouble(string);
            //System.out.print(d);
            return true;
        } catch (NumberFormatException ne) {
            return false;
        }

    }

} 
```

最后，由于开销增加，与数据库的连接应该只创建一次。jexcelapi 库代码与您的代码完美配合，因此您必须使用该库。

# android - 如何在我的网页上正确设置发布商代码？

> ID：14643545
> 
> 赞同：0
> 
> 时间：2013-02-01T09:50:39.453
> 
> 标签：android, html, css

我想将我的网站连接到它的谷歌页面，以在搜索排名中增加一些权威，并且此刻我有以下发布者标签

```
<a href="https://plus.google.com/xxxxxxx" rel="publisher"> 
```

现在该标签指向我在 Google 上的个人资料页面，但该网站也有一个专门用于该网站的 Google+ 页面。我想知道我是否应该将链接标签指向我的个人资料页面或我的 Google+ 页面，有人知道什么路线是正确的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:52:57.677

[来自谷歌](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1708844)自己的报价：

> 如果您创建了 Google+ 信息页，我们强烈建议您从该信息页链接到您的网站，反之亦然。像这样链接您的 Google+ 信息页和您的网站不仅可以帮助您与朋友和关注者建立关系，还可以提供 Google 信息，我们可以使用这些信息来确定您的网站与 Google 网页搜索中的用户查询的相关性。

# javascript - 延迟解决总是在 try catch

> ID：14643549
> 
> 赞同：2
> 
> 时间：2013-02-01T09:50:49.997
> 
> 标签：javascript, error-handling, jquery-deferred, deferred

我正在使用 jQuery Deferred 的独立实现（[git repo](https://github.com/wookiehangover/underscore.Deferred)）。保持问题简单，如果我在任何函数中创建`var status = _.Deferred()`并返回`status.promise()`，那么我是否必须为该函数中`reject`的所有步骤添加一个 try catch 到延迟错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:09:22.203

从返回承诺的函数内部抛出将在返回承诺之前发生，所以，不：

```
function foo() {
  var status = _.Deferred();

  throw 'DOH!';

  return status.promise();  // this will never execute
} 
```

如果在 promise-returning 函数中发起的异步调用可能会抛出：

```
function bar() {
  throw 'DOH!';
}

function foo() {
  var status = _.Deferred();

  setTimeout(function () {
    status.resolve(bar());
  }, 0);

  return status.promise();
}

foo().
  fail(function () {
    // *not* invoked when bar throws
  }); 
```

在这种情况下，您需要将调用包装到`bar`：

```
function bar() {
  throw 'DOH!';
}

function foo() {
  var status = _.Deferred();

  setTimeout(function () {
    try {
      status.resolve(bar());
    } catch (e) {
      status.reject(e);
    }
  }, 0);

  return status.promise();
}

foo().
  fail(function () {
    // invoked when bar throws
  }); 
```

但是，接受回调的异步函数应该捕获自己的错误，并将结果或错误传递给回调。

如果异步函数返回 Promise，你不需要 catch 并且实际上不需要创建你自己的`Deferred`：

```
function bar() {
  var d = _.Deferred();

  setTimeout(function () {
    d.resolve(42);
  }, 0);

  return d.promise();
}

function foo() {
  return bar().
    then(function (result) {
      return result * 2;
    }).
    then(function (result) {
      if (result === 84) { // true
        throw 'DOH!';
      }
    ));
}

foo().
  then(function (result) {
    // *not* invoked
  }).
  fail(function (e) {
    console.log(e.message); // 'DOH!'
  }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:44:40.373

在 javascript 中，try/catch 不像 Java 那样是一种生活方式。原因是 javascript 在避免可预测类型的错误方面相当丰富。

拒绝 Deferred 并不是绝对必要的。通常，如果您需要执行一些`fail`代码，或者如果您需要积极地阻止某些以后的事件解决 Deferred，则通常会这样做。

很容易认为未解决/未拒绝的 Deferreds 会永远挂起。情况不一定如此。Deferred 在任何范围内都不存在对它的引用（直接或通过其承诺）时可用于垃圾收集。

也很容易认为已解决/拒绝的 Deferred 会自动进行垃圾收集。这也是不真实的。如果对 Deferred 的引用在任何范围内仍然存在，那么它仍然会存在于内存中，并且考虑到观察者方法（例如 done/fail/always/then）可能稍后被调用（并且可能会立即触发），它仍然很有用）。

简而言之，就 GC 而言，Deferred 就像任何其他 js 对象一样，尽管通常使用它们的代码结构很难发现它们何时可用于 GC。

# php - 将php软件制作成.exe

> ID：14643557
> 
> 赞同：0
> 
> 时间：2013-02-01T09:51:15.030
> 
> 标签：php, windows, exe

> **可能重复：**
> [将 PHP 脚本转换为独立的 Windows 可执行文件](https://stackoverflow.com/questions/9046675/convert-a-php-script-into-a-stand-alone-windows-executable)

我想制作我的 ERP 的 .exe 文件。如何将我的软件转换为 .exe？我对此一无所知。它是用php编写的。如果您有任何相同的教程，有人可以指导我或提供我。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T09:54:48.407

[在将 PHP 脚本转换为独立的 windows 可执行文件](https://stackoverflow.com/questions/9046675/convert-a-php-script-into-a-stand-alone-windows-executable/9046775#9046775)的答案中有一个非常全面的 PHP 编译器列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:53:22.247

有可用的 PHP 编译器，但事实上，如果您想创建一个已编译的 Windows .exe 文件，PHP 是错误的语言选择。

确实存在的编译器（例如[HipHop](https://github.com/facebook/hiphop-php/wiki)）是针对 Web 服务器环境的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-01T09:57:35.583

随着 HTML5 和 JavaScript 的出现，可以通过使用 PHP、Ruby、Python 等语言创建应用程序。TideSDK 是使用您的 Web 开发技能创建美丽而独特的桌面应用程序的新标准。

你应该试试看

[潮汐之家](http://www.tidesdk.org/)

# mysql - 大表上的慢mysql查询

> ID：14643562
> 
> 赞同：0
> 
> 时间：2013-02-01T09:51:28.783
> 
> 标签：mysql, symfony, doctrine-orm, innodb

我有一个包含约 60 万条记录的统计表，我在该表上执行以下（原始 sql）查询以获取图表的统计数据：

```
SELECT 
(UNIX_TIMESTAMP(s.date)*1000+3600000) as time,
ROUND((s.loadtime / s.loadtimeMeasurements), 3) as loadtime 
FROM mw_statistics s 
WHERE s.type = 0 
    AND s.date >= '2013-02-01 07:52:06' 
    AND s.date <= '2013-02-01 11:52:06' 
    AND s.product_id IN (1,8,9,10,11) 
GROUP BY s.date 
```

此查询大约需要 1 秒才能完成。我希望它只需要几百毫秒。知道如何改进这个查询吗？我正在使用带有 mysql 数据库和 innodb 引擎的 Symfony2/Doctrine。

问候，贾斯珀

这是表的结构转储：

```
CREATE TABLE IF NOT EXISTS `mw_statistics` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`contentErrors` smallint(6) DEFAULT NULL,
`contentMeasurements` smallint(6) DEFAULT NULL,
`thirdpartyErrors` smallint(6) DEFAULT NULL,
`thirdpartyMeasurements` smallint(6) DEFAULT NULL,
`applicationErrors` smallint(6) DEFAULT NULL,
`applicationMeasurements` smallint(6) DEFAULT NULL,
`loadtime` double NOT NULL,
`loadtimeMeasurements` smallint(6) NOT NULL,
`unavailable` smallint(6) DEFAULT NULL,
`unavailableMeasurements` smallint(6) DEFAULT NULL,
`type` smallint(6) NOT NULL,
`step` smallint(6) DEFAULT NULL,
`date` datetime NOT NULL,
`status` smallint(6) DEFAULT NULL,
`url` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
`product_id` int(11) DEFAULT NULL,
`script_id` int(11) DEFAULT NULL,
PRIMARY KEY (`id`),
KEY `IDX_FC665E6F4584665A` (`product_id`),
KEY `IDX_FC665E6FA1C01850` (`script_id`),
KEY `date` (`date`) 
) ENGINE=InnoDB DEFAULT
  CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=2105417 ; 
```

请注意，组合是唯一的： (type=0, product_id, date) 或 (type=1, script_id, step, date)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:57:48.990

为日期和 ID 创建索引。我希望它应该使您`AND p.id IN (1,8,9,10,11)`的`s.type = 0`查询比以前更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:59:49.730

为了完全确定原因，我需要执行计划（通过 获得`EXPLAIN`）。

在紧要关头，我猜由于索引不正确/缺失，涉及一个或多个全表扫描。

您想要一个`mw_statistics`基于`type, date, product_id`以下顺序的索引：

```
 CREATE INDEX mw_ndx ON mw_statistics ( type, date, product_id ) 
```

您也可以尝试将条件`p.id`移至`s`：

```
WHERE s.type = 0
    AND s.date >= '2013-02-01 06:12:32' AND s.date <= '2013-02-01 10:12:30'
    AND s.product_id IN (1,8,9,10,11) 
```

...在这种情况下，您的索引可能会像这样表现更好：

```
 CREATE INDEX mw_ndx ON mw_statistics ( type, product_id, date ) 
```

# 仔细看看

您有一个名为 的列`date`，但您使用 a 对其进行范围`datetime`，并对其进行分组，*没有任何聚合函数*。可能是您总是想查询*一天*，`GROUP BY`然后 是多余的。如果该列包含 a `datetime`，那么您将拥有非常细化（可能无用）的非常少的项目组，在大多数情况下是单个项目。

然后，您要加载的所有数据都来自该`s`表。`product_id`通过实施约束来确保统计数据确实有产品并且后者确实有品牌，您可能会得到更好的服务。

您也可以事先检查 product_ids 在这方面是否合法。完成后，您的查询归结为

```
SELECT 
    (UNIX_TIMESTAMP(date)*1000+3600000) as time,
    ROUND((loadtime / loadtimeMeasurements), 3) as loadtime
FROM mw_statistics
WHERE type = 0
    AND product_id IN (1,8,9,10,11)
    AND date BETWEEN '2013-02-01 06:12:32' AND '2013-02-01 10:12:30'
; 
```

其中，索引在和上`type`，应该在*几十*毫秒内运行。`product_id``date`

 *# 具体尝试

```
CREATE INDEX mw_ndx ON mw_statistics (
          type, product_id, date, loadtime, loadtimeMeasurements
     );

SELECT
    (UNIX_TIMESTAMP(date)*1000+3600000) as time,
    ROUND((loadtime / loadtimeMeasurements), 3) as loadtime
FROM mw_statistics
WHERE type = 0
  AND product_id IN (1,8,9,10,11)
  AND date BETWEEN '2013-02-01 06:12:32' AND '2013-02-01 10:12:30'
; 
```

这样，通过精确选择 on`type`和设置选择 on可以快速减少必要的记录`product_id`。选择`date`也应该表现良好；在另一种情况下，您可能需要考虑分区或分片，但是如果记录数少于几百万，它就没有什么价值了。每个索引条目都用两个`smallint`s 加权，但是通过接受这个小开销，您实际上*根本就不会访问主表*。

查询运行时间将取决于列基数；但是在一个样本上，平均（实际上是*随机地*）填充了一百万行的样本表，我得到的往返时间在 8 到 90 毫秒之间，具体取决于缓存性能和实际检索的行数。

为了更精确的调整，我需要`EXPLAIN SELECT (UNIX_TIMESTAMP...`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:00:34.187

你真的需要加入 mw_brands 吗？您没有使用其中的任何数据，因此现在唯一的用途是确保 mw_statistics 与 mw_brands 相关（通过 mw_products）？

如果您不需要它，请删除两个连接并将 (1,8,9,10,11) 中的 p.id 更改为 (1,8,9,10,11) 中的 s.product_id。*

# android - 安卓错误：INSTALL_FAILED_TEST_ONLY

> ID：14643564
> 
> 赞同：3
> 
> 时间：2013-02-01T09:51:29.923
> 
> 标签：android, android-emulator

当我运行示例程序时出现以下错误

```
[2013-02-01 15:13:32 - webrowser] Performing sync
[2013-02-01 15:13:32 - webrowser] Automatic Target Mode: Preferred AVD 'androidDevice' is available on emulator 'emulator-5554'
[2013-02-01 15:13:32 - webrowser] Uploading webrowser.apk onto device 'emulator-5554'
[2013-02-01 15:13:32 - webrowser] Installing webrowser.apk...
[2013-02-01 15:13:36 - webrowser] Installation error: INSTALL_FAILED_TEST_ONLY
[2013-02-01 15:13:36 - webrowser] Please check logcat output for more details.
[2013-02-01 15:13:36 - webrowser] Launch canceled! 
```

有谁知道这个错误的原因以及如何解决它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-03-22T21:02:48.880

出于某种原因，您的项目正在构建一个仅用于测试的 APK。

几个可能的修复：

*   从清单中删除[test-only](https://developer.android.com/guide/topics/manifest/application-element.html#testOnly)属性
*   在 adb shell pm install 上提供[“-t”](https://developer.android.com/studio/command-line/adb.html)参数以允许安装测试包
*   就我而言，我使用的是 alpha 版本的 gradle 插件“com.android.tools.build:gradle2.4.0-alpha”。一旦我更改为稳定版本，问题就消失了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:06:44.663

尝试从清单中删除 android:test-only 属性，或者如果您没有声明它而不是尝试卸载应用程序而不是重新启动您的 Eclipse 和模拟器。尽管您遇到的问题比尝试删除您通过构建配置路径手动添加的所有外部库。

# list - Scala模式匹配：如何匹配列表中的元素？

> ID：14643567
> 
> 赞同：8
> 
> 时间：2013-02-01T09:51:41.113
> 
> 标签：list, scala, pattern-matching

是否可以使用 Scala 模式匹配重写以下代码？

```
val ls: List[String] = ??? // some list of strings

val res = if (ls.contains("foo")) FOO
     else if (ls.contains("bar")) BAR
     else SOMETHING_ELSE 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-01T09:59:02.640

您可以`if`向匹配项添加条件，如下所示：

```
ls match {
  case x if x.contains("foo") => // FOO
  case x if x.contains("bar") => // BAR
  case _ => // ELSE
} 
```

但是，这不是最好的方法，因为每个`if`检查都需要遍历列表，所以这不能很好地扩展。有多种不同的方法来处理这个问题，但我们需要更多地了解您的意图，因为通常运行时语义会与您的代码不同（例如，您可以递归遍历列表以查找“foo”或“ bar”，但这会假设您在列表中只有一个）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-01T15:16:52.413

您可以使用类似的函数来实现它

```
def onContains[T](xs: Seq[String], actionMappings: (String, T)*): Option[T] = {
  actionMappings collectFirst {
    case (str, v) if xs contains str => v
  }
} 
```

并像这样使用它：

```
val x = onContains(items,
  "foo" -> FOO,
  "bar" -> BAR
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T10:18:08.323

正如弗兰克的回答所说，如果你以肮脏的方式去做，这是可能的，但代价高昂。

这取决于你想做什么。你想返回那个“foo”或“bar”的索引（例如）吗？然后你会做这样的事情：

```
def indexOf[T]: (List[T], T) => Int = (ls, x) => ls match {
    case Nil => -1
    case e::es if( e.equals(x) ) => 0
    case e::es => val i = indexOf( es, x ); if( i < 0 ) i else i + 1
} 
```

此代码未经测试，但您明白了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T10:46:32.623

如果您需要的是某种*带有优先级的命令执行，*我可以建议

```
def executeCommand(input: List[String]): Option[Unit] = {

  val priorities = Map(
    "foo" -> 1,
    "bar" -> 2,
    "baz" -> 3) withDefault(_ => 4)

  def extractCommand(cmds: List[String]): Option[String] = 
    (cmds sortBy priorities).headOption

  extractCommand(input) map {
    case "foo" => println("found foo")
    case "bar" => println("found bar")
    case "baz" => println("found baz")
    case _     => println("no known command")
  }

} 
```

在这个特定的实现中，没有返回有意义的结果（你只考虑副作用），但如果你的案例应该返回一些值，你会发现它被包裹在一个`Option`方法结果中。

* * *

**根据**
*您的附加评论更新*

```
def execute(input: List[String]): Option[String] = {
  val commands: PartialFunction[String, String] = {
    case "foo" => "result for foo"
    case "bar" => "result for bar"
    case "baz" => "result for baz"
  }

  (input find commands.isDefinedAt) map commands

} 
```

这仅适用于您的命令是独占的，只有一个应该在`input`列表中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-28T20:49:37.483

```
val ls = List[String]("bar", "foo", "baz")  // stuff to check against
val mappy = Map[String, String]("foo" -> "FOO", "bar" -> "BAR")  // conversions go here

val res = ls.flatMap{
  case x: String => mappy.get(x)
} match {
  case Seq(y) => y
  case Nil => "SOMETHING_ELSE"  // the `else` case goes here
  case _ => new Exception("could be more than one thing")  // handle this however you want
} 
```

我相信这是最 Scalaesque 的方式。案例及其结果之间的关系简明扼要地在 中进行了说明`Map`，您可以选择根据需要处理多个结果。你确实说过

> 列表很短（最多 4 或 5 个项目），并且只能包含其中一个搜索值

但有些人可能需要处理这种可能性。如果你真的，真的不关心多个匹配，你可以做

```
val res = ls.flatMap(mappy.get).headOption.getOrElse("SOMETHING_ELSE") 
```

在任何一种情况下，它都只遍历列表一次。享受！

# python - 记录器是否可供父进程和子进程访问？

> ID：14643568
> 
> 赞同：3
> 
> 时间：2013-02-01T09:51:41.780
> 
> 标签：python, logging

在python中，如果在父进程中配置了一个记录器，那么子进程也会得到那个记录器吗？更清楚地说，在我的应用程序中，我通过执行`logger = logging.getlogger()`并向其添加处理程序来为父进程配置根记录器。现在当一个子进程被分叉并且它确实

```
logger = logging.getlogger()
logger.info("dfsdf") 
```

然后根据父级的根记录器处理所有日志。我没有为孩子配置根记录器。这怎么可能？它们是两个不同的进程，那么它们如何拥有相同的记录器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:00:15.900

当你 fork 一个进程时，它会“继承”父进程内存，包括记录器配置。

从[Fork 维基百科页面](http://en.wikipedia.org/wiki/Fork_%28operating_system%29)：

> fork 操作为孩子创建了一个单独的地址空间。子进程拥有父进程所有内存段的精确副本，但如果实现了写时复制语义，则可能不会分配实际的物理内存（即，两个进程可能暂时共享相同的物理内存段） . 父进程和子进程都拥有相同的代码段，但彼此独立执行。

这不是 Python 独有的。这发生在任何被派生的 UNIX 进程上，无论它是用 C、Perl 还是 Python 实现的。

该[`multiprocessing`模块](http://docs.python.org/2/library/multiprocessing.html)使用它（在支持它的平台上）快速启动新进程。

请注意，继承记录器可能会导致竞争条件；该`logging`模块只知道线程安全；它使用线程锁来序列化对处理程序的访问，但该锁不是跨进程共享的（子进程中的所有内容都是副本，而不是同一个对象）。

这意味着，当您同时记录来自父级和子级的消息时，当操作系统在将日志条目写入文件时在两个进程之间切换时，日志条目最终可能会混合在一起。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T10:13:25.117

有两件事可能会让你感到困惑。

1.  “同一个记录器对象。” 对象当然不一样，就像子进程中的所有对象都与父进程中的对象不一样。子进程是其父进程的完整副本，具有单独的地址空间。这意味着它们不共享任何内存。如果一个对象位于父进程中的某个内存地址，则在 fork 后子进程将有一个相同的对象位于同一地址。但是，地址在不同的地址空间，内存不共享，分叉完成后对象之间没有关联。因此，对您的问题的简短回答是：对象不一样。

2.  记录器对象可能在分叉完成之前打开了一个文件。打开的文件由子进程继承。这意味着这两个进程对单个文件有两个文件句柄。这是一个同步问题。

UPD：我查看了 Python 2.7 安装中的日志记录模块源。它用于`threading.RLock`同步日志访问。这意味着您不能在父进程和子进程中安全地使用相同的日志文件。您必须关心具有不同日志的子进程和父进程。它是一个守护程序吗？如果是，通常父进程不需要太多日志记录，可以使用单独的记录器。

# c# - AutoMapper MapFrom 用于计算？

> ID：14643569
> 
> 赞同：5
> 
> 时间：2013-02-01T09:51:45.373
> 
> 标签：c#, automapper

有人告诉我，对于 1 个属性<=>1 属性映射，我应该使用 MapFrom，但是当以某种方式计算或修改目标属性时，我应该使用 ResolveUsing。尽管如此，当我使用此映射时，它仍然有效：

```
.ForMember(item => item.Validity, record => record.MapFrom(r => new DateInterval(r.Start, r.End))) 
```

实际上，我什至找不到这两个功能的工作方式有什么不同。

有什么真正的区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T22:26:03.263

MapFrom 方法将执行空值检查等可以通过检查表达式树来完成的事情。ResolveUsing - 你并没有真正得到任何“额外”的东西。这个想法是 MapFrom 来自另一个属性，而 ResolveUsing 是你想要的任何东西。

# perl - 在 perl 中，我如何从通过文本文件并在 dd-Month-YYYY(01-jan-1990) 中输出的日期中减去 10 天

> ID：14643570
> 
> 赞同：4
> 
> 时间：2013-02-01T09:51:48.757
> 
> 标签：perl, datetime

在 perl 中，有一种方法可以从文本文件中传递的日期中减去 10 天，并且输出应为 01-jan-1999 格式。

我正在使用下面的代码来读取文件并获取日期，之后我对减去日期感到震惊。

## 日期.txt

2013 年 1 月 25 日

```
#!/usr/bin/perl
use warnings;
use strict;
use DateTime;

my $inp= "date.txt";
my $todate;
my $fromdate;

open(date,"$inp");
while(<date>)
{
$todate = $_ ;
print "$todate \n";
}

$fromdate = $todate - 10 days ; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T21:28:09.477

这是一个使用 DateTime 的答案。

```
#!/usr/bin/perl

use strict;
use warnings;
use 5.010;

use DateTime::Format::Strptime;
use DateTime;

my $parser = DateTime::Format::Strptime->new(
  pattern => '%d-%B-%Y'
);

my $input = '25-jan-2013';

my $todate = $parser->parse_datetime($input);

my $fromdate = $todate->clone;
$fromdate->subtract(days => 10);
say 'From: ', $fromdate->strftime('%d-%B-%Y');
say 'To: ', $todate->strftime('%d-%B-%Y'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-11T18:50:58.220

在过去，您会使用[Time::Local](http://perldoc.perl.org/Time/Local.html)将您的时间转换为自 Epoc 以来的秒数，减去十天的秒数 (10 * 24 * 60 * 60)，然后将其转换回使用[localtime](http://perldoc.perl.org/functions/localtime.html)的时间。这很有趣，很有教育意义，而且大多数情况下，它过于复杂且容易出错。

当我能够使用 Perl 5.10 或更高版本时，我更喜欢使用[Time::Piece](http://perldoc.perl.org/Time/Piece.html)，因为它使事情变得简单，而且最重要的是，它是一个标准的 Perl 模块。另外，它与另一个标准 Perl 模块[Time::Seconds配合得很好：](http://perldoc.perl.org/Time/Seconds.html)

```
use warnings;
use strict;
use autodie;
use feature qw(say);

use Time::Piece;
use Time::Seconds;

my $date = "25-jan-2013";

#Create the "date object". The `%d-%b-%Y" is format the date is in
my $my_date = Time::Piece->strptime($date, "%d-%b-%Y");  #

#Now subtract ten days from it
$my_date -= ( 10 * ONE_DAY );  #Constant from Time::Seconds

say $my_date;   #Prints out Tue Jan 15 00:00:00 2013

#Printing it out in dd-mmm-yyyy format you had
say $my_date->mday . "-" . $my_date->monname . "-" . $my_date->year; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:11:11.493

您可以使用[Date::Manip](http://p3rl.org/Date%3a%3aManip)：

```
#!/usr/bin/perl
use warnings;
use strict;

use Date::Manip;

my $todate  = '25-jan-2013';
my $newdate = DateCalc(ParseDate($todate), ParseDateDelta('- 10 days'));

print "$newdate\n"; 
```

# android - Android NDK 中与 Unix 域的 LocalSocket 通信

> ID：14643571
> 
> 赞同：10
> 
> 时间：2013-02-01T09:51:50.723
> 
> 标签：android, sockets, network-programming, android-ndk, unix-socket

我有 Android 应用程序，它需要与我们的 C++ 库建立 unix 域套接字连接（使用 Android NDK）

```
public static String SOCKET_ADDRESS = "your.local.socket.address"; // STRING 
```

java中有LocalSocket接受“字符串”（your.local.socket.address）

```
#define ADDRESS     "/tmp/unix.str" /* ABSOLUTE PATH */
  struct sockaddr_un saun, fsaun;
    if ((s = socket(AF_UNIX, SOCK_STREAM, 0)) < 0) {
        perror("server: socket");
        exit(1);
    }
    saun.sun_family = AF_UNIX;
    strcpy(saun.sun_path, ADDRESS); 
```

但是本机层的unix域套接字接受“绝对路径”。那么这两方如何相互沟通呢？

如果可能，请分享任何示例

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-14T12:58:19.170

LocalSocket 使用 Linux 抽象命名空间而不是文件系统。在 C 语言中，这些地址是通过在路径前加上 '\0' 来指定的。

```
const char name[] = "\0your.local.socket.address";
struct sockaddr_un addr;
addr.sun_family = AF_UNIX;

// size-1 because abstract socket names are *not* null terminated
memcpy(addr.sun_path, name, sizeof(name) - 1); 
```

另请注意，您不应传递`sizeof(sockaddr_un)`给 `bind`or`sendto`因为 '\0' 字符后面的所有字节都被解释为抽象套接字名称。计算并传递实际尺寸：

```
int res = sendto(sock, &data, sizeof(data), 0,
                 (struct sockaddr const *) &addr,
                 sizeof(addr.sun_family) + sizeof(name) - 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:09:57.967

[Pro Android C++ 与 NDK 书，第 10 章](http://books.google.co.in/books?id=LImysDUJDBUC&pg=PA260&lpg=PA260&dq=localsocketactivity.java&source=bl&ots=CAiQWdhdrO&sig=alyXWhYt3_EwN2pWgWpy_iwz_Zo&hl=en&sa=X&ei=W5MLUZzPEuuPiAeJw4DgAQ&ved=0CC8Q6AEwAA)帮助我开始使用它。

# javascript - 将字符串值从一个 html 传递到另一个 (Phonegap)

> ID：14643573
> 
> 赞同：4
> 
> 时间：2013-02-01T09:51:57.213
> 
> 标签：javascript, html, cordova

我是 Html 语言的新手，我正在尝试用它开发一个 PhoneGap 应用程序，我想在我的主菜单（索引）中有 4 个选项，并根据用户点击的选项从 xml 加载特定数据。为了加载该特定数据，我需要保存一个字符串来区分用户选择的选项并帮助我在 xml 中查找数据。

我怎样才能做到这一点？我还听说过一些关于 PhoneGap 为这种情况提供的内存，但找不到任何东西，谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T09:55:36.383

我们使用 localStorage 将值从一个页面传递到另一个页面

```
/* Page A */
window.localStorage.setItem("id", "stringValue");

/* Page B */
var stringValue = window.localStorage.getItem("id"); 
```

# android - Jetplayer 与 soundPool？

> ID：14643576
> 
> 赞同：1
> 
> 时间：2013-02-01T09:52:07.037
> 
> 标签：android, performance, android-widget

这是我的主要活动，我相信这就是你所需要的，看看是否有人可以帮助我......

```
package com.art.drumdrum;

import android.app.Activity;
import android.media.AudioManager;
import android.media.SoundPool;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {
SoundPool soundPool = null;
int kickId = 0;
int snareId = 0;
int crashhId = 0;
int crashlId = 0;
int muteId = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button kick = (Button) findViewById(R.id.kick);
    Button snare = (Button) findViewById(R.id.snare);
    Button crashh = (Button) findViewById(R.id.crashh);
    Button crashl = (Button) findViewById(R.id.crashl);

    kick.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN
                    || event.getAction() == MotionEvent.ACTION_POINTER_DOWN)
                soundPool.play(kickId, 1, 1, 0, 0, 1);
            return false;
        }
    });
    snare.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN
                    || event.getAction() == MotionEvent.ACTION_POINTER_DOWN)
                soundPool.play(snareId, 1, 1, 0, 0, 1);
            return false;
        }
    });
    crashh.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN
                    || event.getAction() == MotionEvent.ACTION_POINTER_DOWN)
                soundPool.play(crashhId, 1, 1, 0, 0, 1);
            return false;
        }
    });
    crashl.setOnTouchListener(new View.OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN
                    || event.getAction() == MotionEvent.ACTION_POINTER_DOWN)
                soundPool.play(crashlId, 1, 1, 0, 0, 1);
            return false;
        }
    });

}

protected void onResume() {
    super.onResume();
    if (soundPool == null) {
        soundPool = new SoundPool(20, AudioManager.STREAM_MUSIC, 0);
        kickId = soundPool.load(this, R.raw.kick, 1);
        snareId = soundPool.load(this, R.raw.snare, 1);
        crashhId = soundPool.load(this, R.raw.crashh, 1);
        crashlId = soundPool.load(this, R.raw.crashl, 1);
    }
}

protected void onPause() {
    super.onPause();
    if (soundPool != null) {
        soundPool.release();
        soundPool = null;
    }
}

} 
```

我想知道在我想做的情况下，使用 JetPlayer 是否会比 soundPool 更好。我有它，所以我可以同时按下多个按钮并播放声音，一切看起来都很好，但是从你按下按钮到它播放声音有一点延迟，使它听起来变得不自然......我'几天来一直在查找信息并没有找到任何帮助，是否有简单的答案，或者它是否需要更多代码甚至可能需要一些 c++？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T20:25:12.317

据我所知，JetPlayer 不适合这里，因为它的目标是 MIDI 音频同步。在 Jet 音频引擎中，当您​​按下按钮时，您无法正确播放声音，除非您停止所有先前播放的声音（通过[JetPlayer#clearQueue()](http://developer.android.com/reference/android/media/JetPlayer.html#clearQueue())）。

安卓音频延迟问题也没有简单的答案。可能您可以使用 C++ (OpenSL ES) 获得更好的延迟，但我对此知之甚少。请查看相关答案：[https ://stackoverflow.com/a/12309643](https://stackoverflow.com/a/12309643)

# sql - 具有自引用和不明确列的关系表

> ID：14643577
> 
> 赞同：0
> 
> 时间：2013-02-01T09:52:08.007
> 
> 标签：sql, relational, check-constraints

我正在为一个系统编写一个关系数据模型，该模型跟踪浏览器中呈现的一组框，每个框都包含渲染图像。

目前，只有一个表：Box。每行都有 x 和 y 坐标、宽度和高度列，以及用于图像内容类型（例如 mime 类型）和内容位置（例如文件路径或 URL）的列。

有些盒子有一层嵌套——即一个盒子可以包含另一个盒子。在这些情况下，内容类型列具有特殊值“box”，并且位置是对 Box 表的自引用。

某些内容类型（少数）具有与内容类型相关的额外值，例如，如果图像文件是更复杂的多页格式（例如 PDF），那么我需要存储将在框中呈现的页面。

*   我可以/应该在一张表中表示这个吗？在这种情况下，额外的参数可以（例如）作为查询字符串存储在文件 URL (/path/to/PDF.pdf?page=4) 中。

*   如何处理更新自引用 Box 行？即，如果我删除一个包含另一个框的框，则应删除两行。我不能在位置列上使用外键约束，因为它可以是 url（用于非嵌套框）或框行 ID（用于嵌套框）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:15:54.150

我将尝试提供一些想法-

*我可以/应该在一张表中表示这个吗？在这种情况下，额外的参数可以（例如）作为查询字符串存储在文件 URL (/path/to/PDF.pdf?page=4) 中。*

使用您解释的上述模型，有可能的机会
a。一个图像的多个框（单页格式） - 几个框包含相同的图像。
湾。一个图像的多个框（多页格式） - 几个框包含相同 PDF 的相同/不同图像。

为了使模型更通用，我们可以假设每个框都指向一个`image`可以容纳任何类型图像的表格。这有助于对表格进行规范化，并且在将来的扩展中也可能有用（具有向后兼容性选项）。

假设与图像相关，您想添加另一个字段（列） - 然后与其添加到主表，更改`image`表就足够了。

在多个框引用同一图像的情况下，只需一个引用计数器就足以将所有信息集存储在`image`表中而无需数据重复。

当然 - 额外的开销（我认为会很小）将引用另一个表。

*如何处理更新自引用 Box 行？即，如果我删除一个包含另一个框的框，则应删除两行。我不能在位置列上使用外键约束，因为它可以是 url（用于非嵌套框）或框行 ID（用于嵌套框）。*

使用外键约束限制，一个选项是在应用程序逻辑中，您需要遍历所有框，直到找到最派生的子（框）并首先删除它们。然后对所有的盒子做这样的事情。想法类似于删除复杂的树。但这会增加您实现删除框的应用程序逻辑。

！

# python - 在不初始化显示的情况下使用 pygames 碰撞模块

> ID：14643579
> 
> 赞同：0
> 
> 时间：2013-02-01T09:52:21.233
> 
> 标签：python, opengl, pygame

我正在编写一个有两个进程的游戏。一种用于使用 OpenGL 进行渲染。另一个用于碰撞检测。这样我就可以使用多个内核。

但是，在没有打开显示器的情况下，我不能使用任何 pygame 表面。所以我不能使用位掩码来进行像素完美碰撞或任何其他碰撞。

我试图简单地打开另一个窗口，看看我是否可以让 Surfaces 工作，但我无法在没有 OpenGL 函数错误的情况下打开第二个 pygame 窗口。

您可以在两个单独的进程中使用 pygame 打开两个非 OpenGL 窗口，但我使用的是 OpenGL。

我想可能在某个地方我可以插入一个指向显示器的指针，以使表面停止显示`Dead Display`。我可以在第二个过程中操纵某种 SDL 变量来表示“它不是死在这里”。或者其他使用像素完美碰撞的方式。

我对不使用 pygame 的像素完美替代品持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T02:38:01.533

200，渲染和碰撞相同的线程，相同的 cpu 应该没问题。此测试在没有四叉树的情况下循环，然后将其打开。

然后将阻塞代码（网络）移动到另一个线程。

引用运行示例：

> 发现高峰。这台电脑的性能不会比现在好。**通常会有 359400 次碰撞**检查，但这个四叉树**将其减少到大约 241**次碰撞检查

原文[是 pygame.org](http://www.pygame.org/project-Quadtree+test-1691-.html)但需要稍作修改：[http ://pastebin.com/U371LaLy](http://pastebin.com/U371LaLy)

![在此处输入图像描述](../Images/01d6864a694e4feed1ace254baef923f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T07:04:22.700

我将使用pymunk。花栗鼠的蟒蛇端口。

一年多前，当我第一次开始编程时，我做了一个愚蠢的实验。这很容易。我只是完全忘记了它。

我无法让 pybox2d 在任何 python 版本中工作。

# extjs - 如何水平对齐组件

> ID：14643580
> 
> 赞同：3
> 
> 时间：2013-02-01T09:52:27.807
> 
> 标签：extjs, extjs4

我将 ExtJS 用于网格视图，现在我需要网格上方的搜索选项。所以我创建了一个面板并向其中添加了诸如文本框和两个按钮之类的项目。除了布局之外，一切都很好。我需要文本框和两个按钮水平对齐而不是垂直对齐。我已经尝试注入 html 元素，如样式，但没有任何成功。

**如何在容器内水平对齐组件？**

```
 var formPanel=Ext.create('Ext.form.Panel', {
        title: 'Catalog Search',
        width:300,
        bodyPadding: 10,
        submitOnAction: true,
        activeItem: 1,
        items: [{
            xtype: 'textfield',
            name: 'Job Name',
            id:'JobName',
            fieldLabel: 'Job Name',
            allowBlank: false,

           }, {
            xtype: 'button',
            name: 'search',
            fieldLabel: 'Catalog Search',
            text: 'Search',
             html:'style=float:left',
            width:100,

            listeners:{
                click:function(){
                    var searchText=Ext.getCmp('JobName').getValue();
                    store.proxy.extraParams={
                        id: searchText
                    };
                    store.load();
                }
            }
        },
        {
            xtype: 'button',
            name: 'clear',
            fieldLabel: 'Clear',
            text: 'Clear',
            width:100,

            listeners:{
                click:function(){
                    Ext.getCmp('JobName').reset();
                     var searchText='';
                    store.proxy.extraParams={
                        id: searchText

                    };
                   store.load();
                }
            }
        }
        ]

    });
    formPanel.render('paging-grid'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:15:58.293

对于这种情况，您应该使用适当的布局，例如 hbox。

请参阅此工作示例（**[JSFiddle](http://jsfiddle.net/sran/Sj8zM/22/)**）

```
var formPanel=Ext.create('Ext.form.Panel', {
    title: 'Catalog Search',
    width:500,
    bodyPadding: 10,
    renderTo: 'paging-grid',
    submitOnAction: true,
    layout: 'hbox',

    items: [{
        xtype: 'textfield',
        name: 'Job Name',
        id:'JobName',
        fieldLabel: 'Job Name',
        allowBlank: false,
        flex: 1
       }, {
        xtype: 'button',
        name: 'search',
        fieldLabel: 'Catalog Search',
        text: 'Search',
        style: 'margin-left: 10px',
        width: 70
    },
    {
        xtype: 'button',
        name: 'clear',
        fieldLabel: 'Clear',
        text: 'Clear',
        style: 'margin-left: 10px',
        width: 70
    }
    ]
}); 
```

顺便说一句：按钮有一个`handler`属性，它是包装的`click`事件。您可以直接向该方法提供一个函数，而无需将自己注册到侦听器。

# c++ - 如何在没有boost的情况下在C++03中实现一个通用的回调机制？

> ID：14643581
> 
> 赞同：4
> 
> 时间：2013-02-01T09:52:30.230
> 
> 标签：c++, callback

我有一个 http 服务器，它有一个这样的请求处理程序：

```
bool handleRequest(const RequestObject& request, ResponseRequest& response); 
```

我正在尝试编写一个提供类似 API 的包装器：

```
addRouteHandler(GET, "/foo/bar", handler); 
```

可以`handler`是：

1.  一个功能：`bool handleFooBarRequest(const RequestObject& request, ResponseRequest& response);`
2.  现有对象的方法：`FooResourceInstance`+`bool FooResource::handleFooBarRequest(const RequestObject& request, ResponseRequest& response);`
3.  对象的静态方法：`static bool FooResource::handleFooBarRequest(const RequestObject& request, ResponseRequest& response);`

我坚持：C++03（gcc 4.1.2）并且没有Boost（原因不是重点）

到目前为止，我发现的技术要么使用 Boost、C++11 或第三方代码（[http://www.codeproject.com/Articles/136799/Lightweight-Generic-C-Callbacks-or-Yet-Another-Del](http://www.codeproject.com/Articles/136799/Lightweight-Generic-C-Callbacks-or-Yet-Another-Del) )

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:04:19.437

使用接口和派生的模板类。这种技术称为“类型擦除”。

```
class CallbackBase
{
public:
    virtual ~CallbackBase() = 0;
    virtual bool exec(const RequestObject& request, ResponseRequest& response) = 0;
};

template <typename F>
class CallbackImpl : public CallbackBase
{
public:
    CallbackImpl(F f) : f_(f) {}
    virtual bool exec(const RequestObject& request, ResponseRequest& response) {
        return f_(request, response);
    }
private:
    F f_;
};

template <typename F>
void CreateCallback(F f, std::auto_ptr<CallbackBase>& r) {
    r.reset(new CallbackImpl<F>(f));
}

// examples
std::auto_ptr<CallbackBase> my_callback;

CreateCallback(GlobalFooBarRequest, my_callback);
CreateCallback(&FooResource::staticFooBarRequest, my_callback);
// for member function, use std::mem_fun and std::bind1st
...

my_callback->exec(request, response); 
```

您可能想要使用 shared_ptr 或类似的而不是 auto_ptr，这一切都取决于您希望如何存储这些对象。

编辑：您可以编写自己的成员函数包装器/闭包/函数对象。代码如下所示（我没有尝试编译它，所以可能会出现一些错误）：

```
template <typename T>
class RequestWrapper
{
    typedef bool (T::*F)(const RequestObject&, ResponseRequest&);
    T* obj_;
    F f_;
public:
    RequestWrapper(T* obj, F f)
    : obj_(obj)
    , f_(f)
    {}

    bool operator()(const RequestObject& request, ResponseRequest& response) const {
        return (obj_->*f_)(request, response);
    }
};

template <typename T, typename F>
RequestWrapper<T> BindRequestMfn(T* obj, F mfn)
{
    return RequestWrapper<T>(obj, mfn);
}

CreateCallback(BindRequestMfn(foo, &FooResource::fooBarRequest), my_callback); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T12:29:31.273

此处描述的此解决方案完全有效： http: [//www.codeproject.com/Articles/11015/The-Impossibly-Fast-C-Delegates](http://www.codeproject.com/Articles/11015/The-Impossibly-Fast-C-Delegates)

只有3个标题。

C++03，gcc 4.1.2 OK，没有 Boost ；麻省理工学院执照

# asp.net - microsoft web 优化框架是否支持 css @import？

> ID：14643583
> 
> 赞同：1
> 
> 时间：2013-02-01T09:52:33.160
> 
> 标签：asp.net, .net, css, asp.net-mvc, web-optimization

在`BundleConfig`我定义 css 文件列表中。如果这些文件中的任何一个具有@import 规则（`@import url('/css/typography.css');`），那么该框架是否也会最小化目标 css 文件？

谢谢

# php - PHP 项目：包含和项目布局

> ID：14643588
> 
> 赞同：1
> 
> 时间：2013-02-01T09:52:44.503
> 
> 标签：php, project

我涉足 php 并在 Stack Overflow 和 php.net 文档中阅读了很多内容，但我担心我对以下内容的理解有错误的想法。

1.  包含的文件最好保存在包含文件夹中，这些东西就像特定于文件的函数，即：users.php 将保存此文件夹中与用户相关的项目的函数

2.  项目根目录会为 db root 和其他特定设置项等项目保存一个 config.php

3.  包括像这样向下钻取，但仅从项目根目录

`include('includes/user.php');`

这就是我的问题所在。

1.  我有一个大致的想法还是他们是一种更简单的方式来布局一个复杂的项目

2.  是一个类似的函数

    `function includes($path, $location){ return $_SERVER['DOCUMENT_ROOT']. "/" .$path. "/" .$location; }`

和用法一样

`require(includes('includes', 'functions.php'));`

是一个聪明的方式来完成包括根据项目

1.  joomla、phpbb 和 vbulletin 等主要项目是如何完成的，包括我已经看过了，但我完全不知道它们是如何完成的。

2.  项目布局需要考虑的其他任何事情，包括。我正在查看将一组函数放在他们自己的文件中

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:00:21.290

通常，对于大型项目，我的项目布局如下：

包含文件夹包含 - config.php（数据库连接） - init.php

控制器文件夹包含处理 $_POST 和数据验证的所有控制器

view 文件夹包含所有网页。这些是访问者会记住的 URL

实用程序文件夹包含所有 SQL 脚本 (INSERT/CREATE/DELETE)

当然，你有你的 js、css 文件夹

所以直观地说，一个**视图**将包含它自己的**控制器**。**控制器**将包含**init.php**，而**init.php**包含用于建立数据库连接和所有实用程序的**config.php**，因此您可以轻松地调用用于 CRUD 目的的方法...

其他人有他们的风格，但这是我的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:00:48.670

**如果您想为您和**其他开发人员都能理解的复杂项目创建布局，您应该考虑使用[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)框架。

PHP 框架包括：

*   [Symfony](http://symfony.com/)
*   [CakePHP](http://cakephp.org/)
*   [拉拉维尔](http://laravel.com/)
*   [代码点火器](http://ellislab.com/codeigniter)
*   [易](http://www.yiiframework.com/)

# c++ - 在并行运行中使用 gcov 的代码覆盖率

> ID：14643589
> 
> 赞同：9
> 
> 时间：2013-02-01T09:52:46.840
> 
> 标签：c++, parallel-processing, gcov

我为项目中的几个文件使用 gcov 设置了 C/C++ 代码覆盖率。可执行文件正在并行运行。这会导致一些共享的代码并行运行。

我收到损坏的 .da 文件或零大小的 .da 文件。这是并行运行的问题吗？

因为两个或多个可执行实例试图在同一个 .da 文件上写入执行中的每个语句的覆盖计数？

如果是这样，是否有任何解决方法？

正在使用的 Gcov 版本是 1.5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2019-06-20T08:34:56.520

我有类似的需求，我通过设置`GCOV_PREFIX`环境变量来解决它。

根据[文档](https://gcc.gnu.org/onlinedocs/gcc-5.2.0/gcc/Cross-profiling.html)：

> GCOV_PREFIX 包含要添加到目标文件中的绝对路径的前缀。前缀可以是绝对的，也可以是相对的。默认为无前缀。

设置`GCOV_PREFIX`为每个可执行文件+执行唯一的自定义目录将强制运行时*在指定目录中生成“.gcda”，而不是使用编译目录（“* .gcno”所在的位置）。

一旦所有执行完成，您就可以使用它们来生成合并运行报告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-03-10T08:29:32.423

好吧，您似乎已经找到了问题的根本原因并寻找解决方法。
我已经成功地为 gcov 的代码覆盖配置了几个项目。
我想为你澄清几件事：

*   我们在编译期间`.gcno`为每个带有`--coverage`选项的源文件获取文件。
*   并且在执行时，我们会`.gcda`为每个 gcno 文件获取文件。

`.gcno`文件只是相关源代码文件的流程图结构。
`.gcda`文件是执行时生成的实际覆盖率数据。

因此，在您的情况下`.gcda`（曾经`.da`在早期版本中）当两个或多个执行尝试同时写入同一个`.gcda`文件时会发生冲突。

最简单的解决方法是连续运行测试。（至少那是我所做的）
您不必担心丢失覆盖数据，因为每次执行`.gcda`都会**附加**并且不会被覆盖。请记住，您不必重新编译，因为它会更改`.gcno`文件并且`.gcda`之前的文件将变得无用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-03T13:23:46.700

较新（9+）版本的 GCC 支持模式的另一个[解决方案](https://gcc.gnu.org/git/?p=gcc.git&a=commit;h=97a53d1d04d5dc36f64c0897ff0c49c78ef83ffc)：`%p``-fprofile-dir`

```
-fprofile-dir=coverage.%p 
```

这允许人们避免`GCOV_PREFIX`每次都显式地重新生成环境变量。它还可以分析更复杂的用例，例如递归地运行相同的程序/库（`clang`就像`gcc`这样）。

收集覆盖范围后，您可以在[gcov-tool-many](https://github.com/yugr/maintainer-scripts/blob/master/gcov-tool-many)`gcov-tool`的帮助下将其组合起来（这是一个一次只能组合两个配置文件的包装器）：

```
# Combine coverages
$ scripts/gcov-tool-many merge coverage.*
# Get rid of mangled names like #home#user#myproject#bin#main.gcda
for f in `find -name '#*.gc[dn][ao]'`; do
  mv $f $(basename $f | tr \# /)
done
# Generate the report
gcov *.gcno 
```

# c++ - 为什么 cmath 不使用模板和/或重载

> ID：14643596
> 
> 赞同：4
> 
> 时间：2013-02-01T09:53:02.317
> 
> 标签：c++, templates, overloading, tr1, cmath

TR1 在 C++11 中引入的许多新函数都有丑陋的类似 C 的签名。例如，引用 Boost 的 TR1 文档（[http://www.boost.org/doc/libs/1_52_0/doc/html/boost_tr1/subject_list.html#boost_tr1.subject_list.special](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_tr1/subject_list.html#boost_tr1.subject_list.special)）：

```
// [5.2.1.1] associated Laguerre polynomials:
double assoc_laguerre(unsigned n, unsigned m, double x);
float assoc_laguerref(unsigned n, unsigned m, float x);
long double assoc_laguerrel(unsigned n, unsigned m, long double x); 
```

显然，人们会更喜欢一些模板化的实现（这实际上是 Boost 中这些函数的“本机”签名），或者至少是一些重载而不是几个标识符。

我可以理解，以 C 兼容性为目标意味着支持这些标识符，但这对于纯 C++ 使用者来说是一件麻烦事。除了`<cmath>`，可能还有一些`<math>`，具有更自然的界面。

我错过了什么（可能除了一些以前提出的问题）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:41:53.857

我不了解 Boost，但其中的所有标准函数 `<cmath>`都有三种标准类型的重载，所以你有例如：

```
double cos(double);
float cos(float);
long double cos(long double); 
```

代替C：

```
double cos(double);
float cosf(float);
long double cosl(long double); 
```

我不太清楚为什么你想要一个函数模板而不是重载。对于大多数数学函数，没有通用实现是可能的；正确的实现将取决于每种类型的精度、舍入规则等。因此，替代方案将是一个没有通用实现和三个专业化的模板函数。与“更简单”的重载功能相比，这能为您带来什么？

# android - 如何在我的 android 应用程序中获取 google play 商店的信息？

> ID：14643597
> 
> 赞同：9
> 
> 时间：2013-02-01T09:53:07.777
> 
> 标签：android, google-play-services

是否有任何用于 Google Play 商店的 API 用于获取应用程序名称、描述、图标、下载、评价？

我找到[了这个，](https://code.google.com/p/android-market-api/)但它是一个 Ruby 语言代码。找不到任何 android 示例。

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:59:06.827

我不知道有任何专门针对 Android 平台（或任何平台）的 Google Play Store API。谷歌当然没有正式的 API。但是[Andlytics](https://play.google.com/store/apps/details?id=com.github.andlyticsproject&hl=en)是 Google Play 商店中最受欢迎的同类应用之一，它也是一个开源应用。

它可以在 github 上找到：[Andlytics](https://github.com/AndlyticsProject/andlytics)。这应该有助于您入门。我认为它适用于报废数据。当然，这只是我个人的猜测。

**更新：**

> OP 重新查看链接显示该库已经在 J​​ava 中。
> 
> 网页引用： [https](https://code.google.com/p/android-market-api/) ://code.google.com/p/android-market-api/这不是官方 api。我不以任何方式隶属于谷歌。
> 
> 该库允许您直接向谷歌的官方 android 市场服务器询问信息，搜索应用程序，...
> 
> 主要目标是 java，但它可以很容易地适应其他语言，因为它是基于 Google ProtoBuf 的。
> 
> 这里有 jberkel 的 Ruby 端口和 splitfeed 的 PHP 端口。这些也是 Raunak Gupta 在此库之上的爬虫。

这是它的来源的链接：[https ://code.google.com/p/android-market-api/source/browse/#svn%2Ftrunk%2FAndroidMarketApi%2Fsrc%2Fcom%2Fgc%2Fandroid%2Fmarket%2Fapi](https://code.google.com/p/android-market-api/source/browse/#svn%2Ftrunk%2FAndroidMarketApi%2Fsrc%2Fcom%2Fgc%2Fandroid%2Fmarket%2Fapi)

也许，它也可以以某种方式在 Android 应用程序中使用。

希望能帮助到你。;-)

# angularjs - AngularJS - 如何拥有一个带有动态子指令的指令

> ID：14643601
> 
> 赞同：9
> 
> 时间：2013-02-01T09:53:15.443
> 
> 标签：angularjs

真的在为此苦苦挣扎 - 尝试了我能想到的所有方法。希望有人可以提供帮助。

我有一个指令可以为我创建自定义控件的轮廓。自定义控件的中心部分将由另一个动态生成的指令表示，该指令基于外部指令上的范围变量的值。范围变量包含内部指令的名称。我这样做是因为我的页面将有多个动态生成的元素，它们都有一个共同的布局但不同的内部内容。

即我的外部指令的一个例子：

```
<div data-inner="{{inner}}">
    <!-- div content here --->
<div {{inner}} /> 
```

`{{inner}}`设置为另一个指令的名称 - 在这种情况下`search`。因此，我的页面应变为：

```
<div data-inner="search">
    <!-- div content here --->
<div search /> 
```

在`search`较低的 div 上也被该指令的内容替换。

有任何想法吗？

**更新** 这是一个代表我遇到的问题的基本[jsFiddle](http://jsfiddle.net/jonathanwest/5wEjD/1/) - 注意第三个 div 没有显示。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-01T14:37:15.503

我在[这里](http://jsfiddle.net/xpKwb/2/)创建了一个小提琴。

这些是指令。

```
<script type="text/ng-template" id="one">
    <div class="one"></div>
</script>
<script type="text/ng-template" id="two">
     <div class="two"></div>
</script> 
```

在这里你做动态加载

```
<div ng-repeat='template in inner' ng-include='template'></div> 
```

看看这是否对您有帮助，并解决您的目的。我将每个指令制作成一个模板，然后使用 ng include

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-26T21:39:23.010

试试这个小提琴[http://jsfiddle.net/xpKwb/12/](http://jsfiddle.net/xpKwb/12/)

您可以使用 ngSwitch

```
<div ng-repeat='template in inner'>
    <div ng-switch on="template">
        <div ng-switch-when="one">
            <div class='one'></div>
        </div>
        <div ng-switch-when="two">
            <div class='two'></div>

        </div>
    </div> 
```

# asp.net - 试图找到用户的远程 IP 地址

> ID：14643604
> 
> 赞同：0
> 
> 时间：2013-02-01T09:53:27.993
> 
> 标签：asp.net, ip

我正在开发一个需要查找用户远程 IP 地址的 ASP.NET 项目。我四处寻找，我发现了这个：

```
Request.ServerVariables["REMOTE_ADDR"] 
```

问题是它只返回 "::1" 而不是 IP 地址。可能是因为我使用本地服务器而出现问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:57:01.733

是的，这是因为您使用的是本地服务器。

该地址`"::1"`是 的 IPv6 地址`localhost`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:03:44.257

获取用户 IP 地址没有万无一失的方法，因为沿途可能有很多代理服务器。您收到的结果对于 localhost 是正确的，但`REMOTE_ADDR`如果客户端来自外部，则会返回列表中的最后一个代理。有一个 HTTP 标头列表，其中可能包含实际的 IP 地址，但也可以伪造。您可以阅读以下博客文章了解更多详细信息（您还应该阅读评论）：

*   [尝试检索用户的真实 IP 地址](http://tpeczek.blogspot.co.uk/2010/09/attempting-to-retrieve-user-real-ip.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:01:03.200

尝试这个：

```
using System.Net;
string host = Dns.GetHostName();
IPHostEntry ip = Dns.GetHostEntry(host);
Console.WriteLine(ip.AddressList[1].ToString()); 
```

# javascript - 骨干包括在头部？

> ID：14643606
> 
> 赞同：1
> 
> 时间：2013-02-01T09:53:34.093
> 
> 标签：javascript, backbone.js

我一直在用头撞墙一个小时，试图弄清楚为什么我的主干代码不起作用。我终于通过切换使其工作：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>hello-backbonejs</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>

  <script src="js/application.js"></script>
</head>
<body>

</body>
</html> 
```

到：

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>hello-backbonejs</title>
</head>
<body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/underscore.js/1.1.6/underscore-min.js"></script>
  <script src="http://ajax.cdnjs.com/ajax/libs/backbone.js/0.3.3/backbone-min.js"></script>

  <script src="js/application.js"></script>
</body>
</html> 
```

基本上移动脚本包括从`head`到`body`. 有人可以向我解释为什么这会起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:56:58.440

如果您的`application.js`模块处理页面的元素，那么这是预期的行为，因为当您的脚本位于标记末尾时`body`，页面已经呈现并且您可以使用它的元素。并且当您的脚本包含在`head`元素中时，页面仍未呈现，但脚本将执行并尝试处理仍然不存在的元素。因此，您必须在标签末尾包含脚本或在事件处理程序`body`中开始执行。`window.onload``$(document).ready`

# liferay-6 - 如何在 Liferay 6.1 的“我的帐户”中隐藏“用户信息”选项？

> ID：14643607
> 
> 赞同：1
> 
> 时间：2013-02-01T09:53:38.413
> 
> 标签：liferay-6, liferay-ide

我正在尝试使用钩子在“我的帐户”中隐藏“用户信息”中的一些选项。我只想使用 CSS (style="display:none") 隐藏它。用户信息显示在“我的帐户”页面的右侧。我想知道，我应该在哪个页面进行更改？在创建挂钩时，我应该选择哪个页面来隐藏“组织、站点等”等链接。请帮忙...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-14T14:07:22.407

您必须通过在 portal-ext.properties 中编写它们来选择所需的选项卡，如下所示：

```
 #
# Input a list of sections that will be included as part of the user form
# when updating a user in the My Account portlet.

users.form.my.account.main=details,password,organizations,sites,user-groups,roles,personal-site,categorization
users.form.my.account.identification=addresses,phone-numbers,additional-email-addresses,websites,instant-messenger,social-network,sms,open-id
users.form.my.account.miscellaneous=announcements,display-settings,comments,custom-fields 
```

每个字段都将链接到它的 jsp。例如，“详细信息”将显示 details.jsp。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T12:20:59.647

由于您的问题是查找 jsp 文件，因此您应该执行以下操作：

1.  下载 Liferay 源代码，并在 Eclipse 中将门户主干添加为 Liferay 项目
2.  通过门户导航到您想要的文件（管理我的帐户），并从您的浏览器获取 url
3.  在 usl 中搜索“struts_action”属性。对于这种情况，它是“/my_sites/view”。这非常有用，因为第一个参数表示控制 jsp 页面的 portlet。第二个参数通常是你要搜索的jsp
4.  在门户主干中找到该文件并搜索要编辑的 html 组件。它可能在页面本身中，也可能在包含的页面或兄弟页面上（作为选项卡提供）

对于您的情况，它是“/portal-trunk/portal-web/docroot/html/portlet/users_admin/edit_user.jsp”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T05:27:57.577

无法使用 CSS 删除这些选项。我们可以执行以下简单的 Java 代码来删除这些选项卡...我们需要编辑的页面是“/portal-trunk/portal-web/docroot/html/portlet/users_admin/edit_user.jsp”。

```
List<String> identificationList = new ArrayList<String>();

for(String identificationItem : identificationSections){
    identificationList.add(identificationItem);
     System.out.println(identificationItem);
}
identificationList.remove("websites");
identificationList.remove("instant-messenger");
identificationList.remove("social-network");
identificationList.remove("sms");
identificationList.remove("open-id");

identificationSections = new String[identificationList.size()];
for(int i = 0; i < identificationList.size(); i++){
    identificationSections[i] =identificationList.get(i);
} 
```

使用上面编写的简单 java 代码很容易隐藏这些链接。

# database-connection - 什么是标准 ada 包含路径

> ID：14643609
> 
> 赞同：3
> 
> 时间：2013-02-01T09:53:55.280
> 
> 标签：database-connection, ada

我在使用 apt-get 安装的 Ubuntu 上使用 gnat4.6。我需要知道在哪里安装下载的库，如[APQ](http://sourceforge.net/projects/apq/)。我应该设置`ADA_INCLUDE_PATH`什么`ADA_OBJECTS_PATH`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T11:22:15.490

Debian（Ubuntu 所基于）中的 Ada 支持的美妙之处在于您无需`ADA_INCLUDE_PATH`与朋友混在一起；支持的库安装在 GNAT 项目管理器希望找到它们的位置。说`gnatls -v`要查看默认值。

要按预期使用系统，您会发现使用 GNAT 项目管理器要简单得多；你会说，在你的`my_project.gpr`文件中，

```
with "apq";
project My_Project is
   ... 
```

并建立

```
$ gnatmake -P my_project 
```

有[GPR 的在线文档](http://gcc.gnu.org/onlinedocs/gnat_ugn_unw/GNAT-Project-Manager.html)，但我不会称之为特别用户友好。有[一组 Youtube 视频](http://www.youtube.com/watch?v=o1cLLhtBNpk)（我没有详细查看它们；他们声称的兴趣是大型系统，但坚持下去）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T21:39:25.430

> 我使用 gnatmake 构建；如何以正确的方式引用我的构建路径？

相关选项在[*6.2 Switches for gnatmake: Source and library search pathswitches*](http://gcc.gnu.org/onlinedocs/gcc-4.6.3/gnat_ugn_unw/Switches-for-gnatmake.html#Switches-for-gnatmake)中显示。

附录：开发包是`libapq3.2.0-dev`.

*   手册在`/usr/share/doc/libapq3.2.0-dev/manual.pdf.gz`

*   一个示例和相应的`.gpr`文件位于`/usr/share/doc/libapq3.2.0-dev/examples`. 正如@Simon 建议的那样，`.gpr`文件开始：

    ```
    with "apq.gpr";
    project APQ.Samples is 
    ```

*   Ada 包含文件位于`/usr/share/ada/adainclude/apq`.

*   库位于`/usr/lib`.

```
$ dpkg -L libapq3.2.0-dev
/。
/usr
/usr/共享
/usr/share/ada
/usr/share/ada/adainclude
/usr/share/ada/adainclude/apq
/usr/share/ada/adainclude/apq/apq_helper.ads
/usr/share/ada/adainclude/apq/apq_helper.adb
/usr/share/ada/adainclude/apq/apq.adb
/usr/share/ada/adainclude/apq/apq.ads
/usr/share/ada/adainclude/apq.gpr
/usr/share/doc
/usr/share/doc/libapq3.2.0-dev
/usr/share/doc/libapq3.2.0-dev/copyright
/usr/share/doc/libapq3.2.0-dev/manual.pdf.gz
/usr/share/doc/libapq3.2.0-dev/examples
/usr/share/doc/libapq3.2.0-dev/examples/apq-samples.adb
/usr/share/doc/libapq3.2.0-dev/examples/apq-samples.ads
/usr/share/doc/libapq3.2.0-dev/examples/apq-samples.gpr
/usr/lib
/usr/lib/libapq.a
/usr/lib/ada
/usr/lib/ada/adalib
/usr/lib/ada/adalib/apq
/usr/lib/ada/adalib/apq/apq_helper.ali
/usr/lib/ada/adalib/apq/apq.ali
/usr/share/doc/libapq3.2.0-dev/changelog.Debian.gz
/usr/lib/libapq.so

```

# ruby-on-rails - 调用初始化时css丢失

> ID：14643612
> 
> 赞同：0
> 
> 时间：2013-02-01T09:54:02.470
> 
> 标签：ruby-on-rails

这是我的问题，我对rails很陌生。我有一个控制器。但是当我向该类添加一个 initialize() 方法时，所有的 css 都消失了。换句话说，我有一个 MovieController。一切都按预期工作，但是一旦我添加了一个新的初始化方法，页面的所有样式就消失了。任何想法。？

谢谢。乔西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:24:56.613

Rails 在内部使用初始化。如果覆盖默认行为将不会执行。所以使用`before_filter`在控制器中初始化一些东西示例：

```
 before_filter :my_initialization

  private
    def my_initialization
      #do here
    end 
```

# performance - 大规模 LP 的质量与不平等约束

> ID：14643614
> 
> 赞同：2
> 
> 时间：2013-02-01T09:54:13.197
> 
> 标签：performance, math, linear-programming

不平等与平等约束。在将问题传递给求解器而不是求解器为您执行之前，通过松弛变量将您的问题显式转换为标准形式，是否有很大的计算优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:19:50.320

我自己不会做任何改造。任何合理的实现都应该自动为您进行必要的转换，并以从实现的角度来看最好的方式进行。

简而言之，以对您来说自然的方式提出您的问题，并将其余的留给解决者。即使是求解器的性能也可能是最好的。

# ruby-on-rails - 访问嵌套属性

> ID：14643615
> 
> 赞同：2
> 
> 时间：2013-02-01T09:54:14.403
> 
> 标签：ruby-on-rails, param

这是我的参数哈希。我只想获取每个名称和 email_id 并想进一步处理这些。请告诉我我怎样才能得到这个。帮助我，因为我是 Rails 新手。

```
{
     "utf8"=>"✓",
     "_method"=>"put",
     "authenticity_token"=>"VBJ7NrYDzftlVMYdfNewxADAEGWE8ctau4Zpx3JcjbQ=",
     "game_school"=>{
          "game_school_invites_attributes"=>{
               "name"=>"AAA",
               "email"=>"aa@bb.com",
               "1359712354138"=>{
                    "name"=>"ABCD",
                    "email"=>"aaa@aaa.com"
               },
               "1359712366842"=>{
                    "name"=>"CC",
                    "email"=>"bbb.aa@gmail.com"
               }
          }
     },
     "commit"=>"invite",
     "model1_id"=>"5",
     "model2_id"=>"4"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:17:57.663

这是使用递归函数的一种方法

```
def return_name_and_email(hash)
  if hash['name'] && hash['email']
    puts "Name: #{hash['name']}"
    puts "Email: #{hash['email']}"
  end 

  hash.keys.each do |key|
    return_name_and_email(hash[key]) if hash[key].is_a?(Hash)
  end 
end

return_name_and_email params 
```

# javascript - 使用 Javascript 创建表

> ID：14643617
> 
> 赞同：126
> 
> 时间：2013-02-01T09:54:17.817
> 
> 标签：javascript, html-table

我有一个 JavaScript 函数，它创建一个包含 3 行 2 个单元格的表格。

谁能告诉我如何使用我的函数创建下表（我需要根据我的情况这样做）？

这是下面给出的我的javascript和html代码：

```
function tableCreate() {
  //body reference 
  var body = document.getElementsByTagName("body")[0];

  // create elements <table> and a <tbody>
  var tbl = document.createElement("table");
  var tblBody = document.createElement("tbody");

  // cells creation
  for (var j = 0; j <= 2; j++) {
    // table row creation
    var row = document.createElement("tr");

    for (var i = 0; i < 2; i++) {
      // create element <td> and text node 
      //Make text node the contents of <td> element
      // put <td> at end of the table row
      var cell = document.createElement("td");
      var cellText = document.createTextNode("cell is row " + j + ", column " + i);

      cell.appendChild(cellText);
      row.appendChild(cell);
    }

    //row added to end of table body
    tblBody.appendChild(row);
  }

  // append the <tbody> inside the <table>
  tbl.appendChild(tblBody);
  // put <table> in the <body>
  body.appendChild(tbl);
  // tbl border attribute to 
  tbl.setAttribute("border", "2");
}
```

```
<table width="100%" border="1">
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td rowspan="2">&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
  </tr>
</table>
```

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-02-01T10:38:45.683

[`insertRow`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableElement.insertRow)使用和略短的代码[`insertCell`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLTableRowElement.insertCell)：

```
function tableCreate() {
  const body = document.body,
        tbl = document.createElement('table');
  tbl.style.width = '100px';
  tbl.style.border = '1px solid black';

  for (let i = 0; i < 3; i++) {
    const tr = tbl.insertRow();
    for (let j = 0; j < 2; j++) {
      if (i === 2 && j === 1) {
        break;
      } else {
        const td = tr.insertCell();
        td.appendChild(document.createTextNode(`Cell I${i}/J${j}`));
        td.style.border = '1px solid black';
        if (i === 1 && j === 1) {
          td.setAttribute('rowSpan', '2');
        }
      }
    }
  }
  body.appendChild(tbl);
}

tableCreate();
```

另外，这并没有使用一些“坏习惯”，例如设置`border`属性而不是使用CSS，它访问的是`body`through`document.body`而不是`document.getElementsByTagName('body')[0]`;

* * *

## 回答 #2

> 赞同：121
> 
> 时间：2013-02-01T09:55:36.930

这应该可以工作（从上面对您的代码进行一些更改）。

```
function tableCreate() {
  var body = document.getElementsByTagName('body')[0];
  var tbl = document.createElement('table');
  tbl.style.width = '100%';
  tbl.setAttribute('border', '1');
  var tbdy = document.createElement('tbody');
  for (var i = 0; i < 3; i++) {
    var tr = document.createElement('tr');
    for (var j = 0; j < 2; j++) {
      if (i == 2 && j == 1) {
        break
      } else {
        var td = document.createElement('td');
        td.appendChild(document.createTextNode('\u0020'))
        i == 1 && j == 1 ? td.setAttribute('rowSpan', '2') : null;
        tr.appendChild(td)
      }
    }
    tbdy.appendChild(tr);
  }
  tbl.appendChild(tbdy);
  body.appendChild(tbl)
}
tableCreate();
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-06-03T10:02:30.713

```
function addTable() {
  var myTableDiv = document.getElementById("myDynamicTable");

  var table = document.createElement('TABLE');
  table.border = '1';

  var tableBody = document.createElement('TBODY');
  table.appendChild(tableBody);

  for (var i = 0; i < 3; i++) {
    var tr = document.createElement('TR');
    tableBody.appendChild(tr);

    for (var j = 0; j < 4; j++) {
      var td = document.createElement('TD');
      td.width = '75';
      td.appendChild(document.createTextNode("Cell " + i + "," + j));
      tr.appendChild(td);
    }
  }
  myTableDiv.appendChild(table);
}
addTable();
```

```
<div id="myDynamicTable"></div>
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-07-03T17:36:10.173

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>Insert title here</title>
    </head>
    <body>
        <table id="myTable" cellpadding="2" cellspacing="2" border="1" onclick="tester()"></table>
        <script>
            var student;
            for (var j = 0; j < 10; j++) {
                student = {
                    name: "Name" + j,
                    rank: "Rank" + j,
                    stuclass: "Class" + j,
                };
                var table = document.getElementById("myTable");
                var row = table.insertRow(j);
                var cell1 = row.insertCell(0);
                var cell2 = row.insertCell(1);
                var cell3 = row.insertCell(2);

                cell1.innerHTML = student.name,
                cell2.innerHTML = student.rank,
                cell3.innerHTML = student.stuclass;
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-12-17T16:39:37.287

`.map`这是在javascript中使用该函数的最新方法。

简单的表格代码..

```
 <table class="table table-hover">
        <thead class="thead-dark">
            <tr>
             <th scope="col">Tour</th>
             <th scope="col">Day</th>
             <th scope="col">Time</th>
             <th scope="col">Highlights</th>
             <th scope="col">Action</th>
           </tr>
        </thead>
      <tbody id="tableBody">

 </tbody>
</table> 
```

这是在表体中附加一些内容的javascript代码。

```
 const data = "some kind of json data or object of arrays"; // [{"Name:"Ali", "Day":"Monday"}]
                const tableData = data.map(function(value){
                    return (
                        `<tr>
                            <td>${value.Name}</td>
                            <td>${value.Day}</td>
                            <td>${value.Time}</td>
                            <td>${value.Highlights}</td>
                            <td class="text-center"><a class="btn btn-primary" href="route.html?id=${value.ID}" role="button">Details</a></td>
                        </tr>`
                    );
                }).join('');
            const tabelBody = document.querySelector("#tableBody");
                tableBody.innerHTML = tableData; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-29T10:38:18.203

```
<!DOCTYPE html>
<html>
    <body>
        <p id="p1">
            <b>Enter the no of row and column to create table:</b>
            <br/><br/>
            <table>
                <tr>
                    <th>No. of Row(s) </th>
                    <th>No. of Column(s)</th>
                </tr>
                <tr>
                    <td><input type="text" id="row" value="4" /> X</td>
                    <td><input type="text" id="col" value="7" />Y</td>
                </tr>
            </table>
            <br/>
            <button id="create" onclick="create()">create table</button>
        </p>
        <br/><br/>
        <input type="button" value="Reload page" onclick="reloadPage()">
        <script>
            function create() {
                var row = parseInt(document.getElementById("row").value);
                var col = parseInt(document.getElementById("col").value);

                var tablestart="<table id=myTable border=1>";
                var tableend = "</table>";
                var trstart = "<tr bgcolor=#ff9966>";
                var trend = "</tr>";
                var tdstart = "<td>";
                var tdend = "</td>";
                var data="data in cell";
                var str1=tablestart + trstart + tdstart + data + tdend + trend + tableend;
                document.write(tablestart);

                for (var r=0;r<row;r++) {
                    document.write(trstart);
                    for(var c=0; c<col; c++) {
                        document.write(tdstart+"Row."+r+" Col."+c+tdend);
                    }
                }

                document.write(tableend);
                document.write("<br/>");
                var s="<button id="+"delete"+" onclick="+"deleteTable()"+">Delete top Row </button>";
                document.write(s);
                var relod="<button id="+"relod"+" onclick="+"reloadPage()"+">Reload Page </button>";
                document.write(relod);
            }
            function deleteTable() {
                var dr=0;
                if(confirm("It will be deleted..!!")) {
                    document.getElementById("myTable").deleteRow(dr);
                }
            }
            function reloadPage(){
                location.reload();
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-05-30T08:59:42.020

我希望你觉得这有帮助。

HTML：

```
<html>
<head>
    <link rel = "stylesheet" href = "test.css">
<body>

</body>
<script src = "test.js"></script>
</head>
</html> 
```

JAVASCRIPT：

```
var tableString = "<table>",
    body = document.getElementsByTagName('body')[0],
    div = document.createElement('div');

for (row = 1; row < 101; row += 1) {

    tableString += "<tr>";

    for (col = 1; col < 11; col += 1) {

        tableString += "<td>" + "row [" + row + "]" + "col [" + col + "]" + "</td>";
    }
    tableString += "</tr>";
}

tableString += "</table>";
div.innerHTML = tableString;
body.appendChild(div); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-09-30T15:49:55.970

可能无法解决此特定问题中描述的问题，但可能对希望从对象数组创建表的人有用：

```
function createTable(objectArray, fields, fieldTitles) {
  let body = document.getElementsByTagName('body')[0];
  let tbl = document.createElement('table');
  let thead = document.createElement('thead');
  let thr = document.createElement('tr');
  fieldTitles.forEach((fieldTitle) => {
    let th = document.createElement('th');
    th.appendChild(document.createTextNode(fieldTitle));
    thr.appendChild(th);
  });
  thead.appendChild(thr);
  tbl.appendChild(thead);

  let tbdy = document.createElement('tbody');
  let tr = document.createElement('tr');
  objectArray.forEach((object) => {
    let tr = document.createElement('tr');
    fields.forEach((field) => {
      var td = document.createElement('td');
      td.appendChild(document.createTextNode(object[field]));
      tr.appendChild(td);
    });
    tbdy.appendChild(tr);    
  });
  tbl.appendChild(tbdy);
  body.appendChild(tbl)
  return tbl;
}

createTable([
  {name: 'Banana', price: '3.04'},
  {name: 'Orange', price: '2.56'},
  {name: 'Apple', price: '1.45'}
],
['name', 'price'], ['Name', 'Price']);
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2021-07-25T13:21:29.733

当您想要动态的行和列时，此解决方案将是完美的。您可以接受行和列作为参数。

```
function tableCreate(row, col){
    let body = document.body;
    let tbl  = document.createElement('table');
    tbl.style.width  = '200px';
    tbl.style.border = '1px solid black';

    for(let i = 0; i < row; i++){
        let tr = tbl.insertRow();
        for(let j = 0; j < col; j++){
                let td = tr.insertCell();
                td.appendChild(document.createTextNode(`${i},${j}` ));
                td.style.border = '1px solid black';
            }     
    }
    body.appendChild(tbl);
}

tableCreate(4,4); 
```

**输出**-

[![在此处输入图像描述](../Images/6a4fde88a118b64b82f559f76970e77f.png)](https://i.stack.imgur.com/VlkKG.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-02-05T06:53:25.043

```
<style>
    body{
        background: radial-gradient(rgba(179,255,0.5),rgba(255,255,255,0.5),rgba(0,0,0,0.2));
        text-align: center;
    }
    #name{
        margin-top: 50px;
    }
    .input{
        font-size: 25px;
        color: #004d00;
        font-weight: 700;
        font-family: cursive;
    }
    #entry{
        width: 150px;
        height: 40px;
        font-size: 23px;
        font-family:  cursive;
        background-color: #001a66;
        color: whitesmoke;
        box-shadow: 0 2px 2px 0 rgba(0,0,0,0.5);
        margin: 20px;
    }
    table{
        border-collapse: collapse;
        width: 50%;
        margin: 50px auto;
        background-color: burlywood;
    }
    table,th,td{
       border: 2px solid black;
       padding:5px;

    }
    th{
        font-size: 30px;
        font-weight: 700;
        font-family: Arial;
        color: #004d00;
    }
    td{
        font-size: 25px;
        color: crimson;
        font-weight: 400;
        font-family: Georgia;
    }
    .length{
        width: 20%;
    }
</style>
<body>
    <!-- Code to get student details -->
    <div id="container" >
        <div class="input">
             Name: <input type="text" id="name" class="length" placeholder="eg: Anil Ambani"/>
        </div>
        <div class="input">
             Email: <input type="text" id="mail" class="length" placeholder="eg: AnilAmbani@gmail.com"/>
        </div>
        <div class="input">
             Phone: <input type="text" id="phn"  class="length" placeholder="eg: 9898989898"/>
        </div>
        <div class="input">
             SLNO: <input type="number" id="sln" class="length" placeholder="eg: 1"/>
        </div>
        <br>
        <button id="entry"> I/P ENTRY</button>
    </div>
    <table id="tabledata">
       <tr>
          <th> Name</th>
          <th> Email</th>
          <th> Phone</th>
          <th> Slno</th>
       </tr> 
    </table>
</body>
<script>
    var entry = document.getElementById('entry');
    entry.addEventListener("click",display);
    var row = 1;
    function display(){
        var nam =  document.getElementById('name').value;
        var emal = document.getElementById('mail').value;
        var ph = document.getElementById('phn').value;
        var sl = document.getElementById('sln').value;
        var disp = document.getElementById("tabledata");
        var newRow = disp.insertRow(row);
        var cell1 = newRow.insertCell(0);
        var cell2 = newRow.insertCell(1);
        var cell3 = newRow.insertCell(2);
        var cell4 = newRow.insertCell(3);
        cell1.innerHTML = nam;
        cell2.innerHTML = emal;
        cell3.innerHTML = ph;
        cell4.innerHTML = sl;
        row++;
    }
</script> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-06-12T15:37:10.540

我编写了一个可以动态解析对象列表以将表创建为字符串的版本。我将其拆分为三个函数，用于编写标题列、正文行并将它们拼接在一起。我导出为字符串以在服务器上使用。我的代码使用[模板字符串](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)来保持优雅。

如果您想添加样式（如引导程序），可以通过向`HEAD_PREFIX`和`HEAD_SUFFIX`.

```
// helper functions
const TABLE_PREFIX = '<div><table class="tg">';
const TABLE_SUFFIX = '</table></div>';
const TABLE_HEAD_PREFIX = '<thead><tr>';
const TABLE_HEAD_SUFFIX = '</tr></thead>';
const TABLE_BODY_PREFIX = '<tbody><tr>';
const TABLE_BODY_SUFFIX = '</tr></tbody>';

function generateTableHead(cols) {
  return `
    ${TABLE_HEAD_PREFIX}
      <td>#</td>
    ${cols.map((col) => `<td>${col}</td>`).join('')}
    ${TABLE_HEAD_SUFFIX}`;
}

function generateTableBody(cols, data) {
  return `
    ${TABLE_BODY_PREFIX}
    ${data.map((object, index) => `
        <tr><td>${index}</td>
        ${cols.map((col) => `<td>${object[col]}</td>`).join('')}
      </tr>`).join('')}
    ${TABLE_BODY_SUFFIX}`;
}

/**
 * generate an html table from an array of objects with the same values
 *
 * @param {array<string>} cols array of object columns used in order of columns on table
 * @param {array<object>} data array of objects containing data in a single depth
 */
function generateTable(data, defaultCols = false) {
  let cols = defaultCols;
  if (!cols) cols = Object.keys(data[0]); // auto generate columns if not defined
  return `
    ${TABLE_PREFIX}
    ${generateTableHead(cols)}
    ${generateTableBody(cols, data)}
    ${TABLE_SUFFIX}`;
} 
```

这是一个使用示例：

```
const mountains = [
  { height: 200, name: "Mt. Mountain" },
  { height: 323, name: "Old Broken Top"},
]
const htmlTableString = generateTable(mountains ); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-07-07T06:46:52.790

```
var div = document.createElement('div');
            div.setAttribute("id", "tbl");
            document.body.appendChild(div)
                document.getElementById("tbl").innerHTML = "<table border = '1'>" +
              '<tr>' +
                '<th>Header 1</th>' +
                '<th>Header 2</th> ' +
                '<th>Header 3</th>' +
              '</tr>' +
              '<tr>' +
                '<td>Data 1</td>' +
                '<td>Data 2</td>' +
                '<td>Data 3</td>' +
              '</tr>' +
              '<tr>' +
                '<td>Data 1</td>' +
                '<td>Data 2</td>' +
                '<td>Data 3</td>' +
              '</tr>' +
              '<tr>' +
                '<td>Data 1</td>' +
                '<td>Data 2</td>' +
                '<td>Data 3</td>' +
              '</tr>' 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-12-16T07:49:20.517

这是使用 raphael.js 绘制表格的示例。我们可以使用 Raphael.js 直接在浏览器的画布上绘制表格 Raphael.js 是一个专为艺术家和平面设计师设计的 JavaScript 库。

```
<!DOCTYPE html>
<html>

    <head>
    </head>
    <body>
        <div id='panel'></div>
    </body>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"> </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<script>    
paper = new Raphael(0,0,500,500);// width:500px, height:500px

var x = 100;
var y = 50;
var height = 50
var width = 100;

WriteTableRow(x,y,width*2,height,paper,"TOP Title");// draw a table header as merged cell
y= y+height;
WriteTableRow(x,y,width,height,paper,"Score,Player");// draw table header as individual cells
y= y+height;
for (i=1;i<=4;i++)
{
var k;
k = Math.floor(Math.random() * (10 + 1 - 5) + 5);//prepare table contents as random data
WriteTableRow(x,y,width,height,paper,i+","+ k + "");// draw a row
y= y+height;
}

function WriteTableRow(x,y,width,height,paper,TDdata)
{ // width:cell width, height:cell height, paper: canvas, TDdata: texts for a row. Separated each cell content with a comma.

    var TD = TDdata.split(",");
    for (j=0;j<TD.length;j++)
    {
        var rect = paper.rect(x,y,width,height).attr({"fill":"white","stroke":"red"});// draw outline
        paper.text(x+width/2, y+height/2, TD[j]) ;// draw cell text
        x = x + width;
    }
}

</script>

</html> 
```

请查看预览图片：[https ://i.stack.imgur.com/RAFhH.png](https://i.stack.imgur.com/RAFhH.png)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-03-08T20:10:33.287

您可能会发现这很有帮助

```
<html>
 <head>
  <title>tABLE IN JS</title>
 </head>

 <body>
  <table border = "1">
     <tr>
        <th>Plug-in Name</th>
        <th>Filename</th>
        <th>Description</th>
     </tr>

     <script language = "JavaScript" type = "text/javascript">
        for (i = 0; i<3; i++) {
           document.write("<tr><td>");
           document.write("Hello world");
           document.write("</td><td>");
           document.write("Hello China");
           document.write("</td><td>");
           document.write("Hello USA");
           document.write("</td></tr>");
        }
     </script>
  </table>      
 </body>
</html> 
```

所以你根据你想要的列数创建表头，行数将取决于你在迭代中指定的数字.....**即这个将是 3。**

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-06-19T23:23:28.420

```
function creatTable(row = 10, col = 6) {
  var table = "<table style ='margin-left: auto;margin-right: auto; border-collapse: collapse; width: 70%; ' >";
  document.write(table);

  for (var h = 1; h < parseInt(col); h++) {

    th = "<th style='border: 3px solid #ddd;padding: 8px; padding-top: 12px;padding-bottom: 12px;text-align: center;background-color: #f5cf78;color: white;'>" + "I\'m Header";
    document.write(th);

    th += "</th>";

  }

  for (var i = 1; i < parseInt(row); i++) {

    tr = "<tr style='background: ; :hover{background: #ffff99}'>";
    document.write(tr);

    tr += "</tr>";

    for (var j = 1; j < parseInt(col); j++) {

      td = "<td style='border: 3px solid #ddd; padding: 8px;'>" + "I\'m cell no." + i + "," + j;
      document.write(td);

      td += "</td>";

    }

    tr += "</tr>";
  }

  table = "</table>";

}

console.log(creatTable())
```

```
<!DOCTYPE html>
<html>

<head>
  <title>JavaScript</title>
</head>

<body>

  <h1>JavaScript...</h1>
  <h2>Hello!</h2>
  <h3>This Table Created by JavaScript &copy;
    <font color=# ff0026>Geologist / Mohamed Yasser</font>
  </h3>

  <script src="main.js"></script>

</body>

</html>
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2017-09-26T11:40:21.590

```
var btn = document.createElement('button');
btn.innerHTML = "Create Table";
document.body.appendChild(btn);
btn.addEventListener("click", createTable, true);
function createTable(){
var div = document.createElement('div');
div.setAttribute("id", "tbl");
document.body.appendChild(div)
	document.getElementById("tbl").innerHTML = "<table border = '1'>" +
  '<tr>' +
    '<th>Header 1</th>' +
    '<th>Header 2</th> ' +
    '<th>Header 3</th>' +
  '</tr>' +
  '<tr>' +
    '<td>Data 1</td>' +
    '<td>Data 2</td>' +
    '<td>Data 3</td>' +
  '</tr>' +
  '<tr>' +
    '<td>Data 1</td>' +
    '<td>Data 2</td>' +
    '<td>Data 3</td>' +
  '</tr>' +
  '<tr>' +
    '<td>Data 1</td>' +
    '<td>Data 2</td>' +
    '<td>Data 3</td>' +
  '</tr>' 
};
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2019-02-10T14:28:20.727

这是如何遍历 javascript 对象并将数据放入表中，代码修改自 @Vanuan 的答案。

```
<body>
    <script>
    function createTable(objectArray, fields, fieldTitles) {
      let body = document.getElementsByTagName('body')[0];
      let tbl = document.createElement('table');
      let thead = document.createElement('thead');
      let thr = document.createElement('tr');

      for (p in objectArray[0]){
        let th = document.createElement('th');
        th.appendChild(document.createTextNode(p));
        thr.appendChild(th);

      }

      thead.appendChild(thr);
      tbl.appendChild(thead);

      let tbdy = document.createElement('tbody');
      let tr = document.createElement('tr');
      objectArray.forEach((object) => {
        let n = 0;
        let tr = document.createElement('tr');
        for (p in objectArray[0]){
          var td = document.createElement('td');
          td.setAttribute("style","border: 1px solid green");
          td.appendChild(document.createTextNode(object[p]));
          tr.appendChild(td);
          n++;
        };
        tbdy.appendChild(tr);    
      });
      tbl.appendChild(tbdy);
      body.appendChild(tbl)
      return tbl;
    }

    createTable([
                  {name: 'Banana', price: '3.04'}, // k[0]
                  {name: 'Orange', price: '2.56'},  // k[1]
                  {name: 'Apple', price: '1.45'}
               ])
    </script>
```

# php - 根据第一个子字符串和第二个子字符串拆分字符串

> ID：14643619
> 
> 赞同：0
> 
> 时间：2013-02-01T09:54:23.250
> 
> 标签：php, html, curl

我在一个字符串中有一个 HTML 文件代码，如下所示：

```
--- few lines of code ---------

<SCRIPT language="javascript" type="text/javascript">
var statList = new Array(
0, "192.168.1.179", "88-53-95-28-2B-AF", 194280, 101141053, 0, 0, 0, 0, 0, 0, 0, 0, 
1, "192.168.1.170", "60-C5-47-10-37-FD", 132316, 65860791, 0, 0, 0, 0, 0, 0, 0, 0, 
2, "192.168.1.151", "68-5D-43-21-76-95", 9887, 3898646, 0, 0, 0, 0, 0, 0, 0, 0, 
3, "192.168.1.134", "6C-3E-6D-8C-FF-62", 26405, 7521875, 0, 0, 0, 0, 0, 0, 0, 0, 
4, "192.168.1.124", "04-F7-E4-78-D3-D0", 6189, 1791672, 0, 0, 0, 0, 0, 0, 0, 0, 
5, "192.168.1.121", "60-C5-47-10-40-92", 122657, 91113301, 0, 0, 0, 0, 0, 0, 0, 0);
</SCRIPT>

---- Few other lines of code --------- 
```

我想提取`<script>`包含`Array`声明的块。

我可以用任何 PHP 函数做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:57:16.293

如果您能找到一个在字符串开头只出现一次的清晰分隔符，而另一个在结尾只出现一次的分隔符，则可以轻松使用 preg_match。否则，您仍然可以使用 preg_match，但编写一个好的 RegExp 会更加困难。如果要提取 IP/MAC 数据，可能需要直接从 RegExp 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:00:01.063

这段代码呢？

```
$content = file_get_contents('____URL_of_your_html____');
if(preg_match('/(var statList = new Array\(.*?\);)/si',$content,$matches)){
    echo $matches[1];
} 
```

# java - 标记 Eclipse RCP 应用程序

> ID：14643622
> 
> 赞同：3
> 
> 时间：2013-02-01T09:54:26.837
> 
> 标签：java, eclipse-rcp, branding

我有一个想要“品牌化”的 RCP 应用程序，即为带有构建 ID 的 about 框创建适当的文本。简单的东西。不幸的是，这并不像我希望的那么容易，现在我被困住了。

我的 RCP 项目是从项目配置启动的，而不是通过功能部署为插件。

我曾尝试直接在产品配置 -> 品牌选项卡中输入内容，但是当我这样做时，输入未格式化，这意味着我没有换行符，也无法像我想要的那样外部化字符串。我还尝试创建 about.ini、about.properties 和 about.mappings 以尝试使用 %<property>，但仍然没有运气。about 框是标准的 org.eclipse.ui.help.aboutAction。

网上的每个教程都说不同的东西，所以现在我感到很困惑。我还尝试在 Eclipse 存储库中复制品牌所做的工作，但没有任何运气。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:42:11.503

需要的是 MANIFEST.MF 文件中的这一行：

```
Bundle-Localization: plugin 
```

guido 对我的问题的评论也揭示了不同文件的用途。

# matlab - 如何将结构中的值绘制为不同的行，以便我可以控制它们的颜色 Matlab？

> ID：14643635
> 
> 赞同：2
> 
> 时间：2013-02-01T09:55:27.140
> 
> 标签：matlab, plot, structure, legend

### 我想要的是：

绘图上不同颜色的点，并在图例中使用各自颜色的点。

### 我试过这个：

我创建了一个结构，其中包含点的 x、y 值。有了这些点，我希望在图像上绘制点，这样我就可以看到它们在哪里。但是，由于我使用的是结构，因此无法绘制出不同颜色的点。通过 for 循环，我试图哄 matlab 创建多个绘图，并希望创建不同的线条，然后我可以将它们分配给我选择的不同颜色。

代码：

```
img = imread('retinotopische map V1M Base clean.bmp');            

hold on;                     
image([0.825 4.61],[-2.85 ,-8.25],img);

for A =  1:B
    plot( [c(A).Lateral],[c(A).Bregma],'o','MarkerSize',10);    
    plot( [c(A).Lateral],[c(A).Bregma],'.','MarkerSize',10);    
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:13:27.260

如果您只想要不同的颜色，则解决方案比您预期的要容易：

替换`hold on`为`hold all`，matlab 会自动使用下一种颜色。

`hold off`编辑：如果您开始一个新的情节，您可能需要`hold all`再次调用以获得正确的起始位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:03:46.930

您可以使用“颜色”选项更改颜色：

```
 img = imread('retinotopische map V1M Base clean.bmp');            

    hold on;                     
    image([0.825 4.61],[-2.85 ,-8.25],img);

    for A =  1:B
       plot( [c(A).Lateral],[c(A).Bregma],'o','MarkerSize',10, 'Color', [A/B, 0, 1 - A/B]);     
    end 
```

'Color' 让您可以指定一个[RGB 三元组](http://www.mathworks.com/help/matlab/ref/colorspec.html)，例如红色的 [1 0 0]。您可以使用它来绘制您想要的任何颜色。我的示例会将它们绘制成渐变，但您也可以使用完全不同`rand(1, 3)`的颜色来获取三元组？或者制作一个颜色矩阵，您可以在其中指定所需颜色的确切顺序，例如：

```
MyColours = [1 1 0;
             0 0 1;
             1 0 0;
             0.5 0.2 0.9]; %etc... 
```

然后在你的 for 循环中：

```
plot( [c(A).Lateral],[c(A).Bregma],'o','MarkerSize',10, 'Color', MyColours(A, :)); 
```

# rest - RESTful URI 结构

> ID：14643648
> 
> 赞同：1
> 
> 时间：2013-02-01T09:56:07.923
> 
> 标签：rest, path, uri, structure

我对这些 URL 结构有一个小问题。

我有 3 个资源人员、凭证和令牌。关系很简单。一个人具有与凭据的一对一映射，而凭据具有与令牌的一对多映射。

这些 uri 对我来说似乎很平静：

*   [http://somewhere.loc/persons](http://somewhere.loc/persons)
*   [http://somewhere.loc/persons/1](http://somewhere.loc/persons/1)
*   [http://somewhere.loc/persons/1/credentials](http://somewhere.loc/persons/1/credentials)
*   [http://somewhere.loc/persons/1/credentials/1/tokens](http://somewhere.loc/persons/1/credentials/1/tokens)
*   [http://somewhere.loc/persons/1/credentials/1/tokens/1](http://somewhere.loc/persons/1/credentials/1/tokens/1)

但是由于人员和凭据之间存在一对一的映射，因此[http://somewhere.loc/persons/1/credential/tokens/1](http://somewhere.loc/persons/1/credential/tokens/1)也被认为是安静的吗？我可以省略凭证的 id 并将其设为单数吗？

我知道例如 /books/pagenumbers 会返回所有书籍的所有页码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:20:33.080

正如您所说，它们是三个独立的资源，也许我会以不同的方式来做（但这也取决于您将如何管理这些资源）：

```
/persons/1
/credentials/1
/tokens/1 
```

正如你所说，如果获取一个人的凭证然后是令牌，你可以省略 id，因为它们引用的是同一个人。

```
/persons/1/credential
/persons/1/credential/token 
```

* * *

**编辑：**

可能我说的第一件事是不正确的，因为 id 应该引用资源，所以“credentialId”或“tokenId”。无论如何我都会离开它，只要小心它。:)

# c# - 带有数据集的水晶报表显示报表为空

> ID：14643651
> 
> 赞同：1
> 
> 时间：2013-02-01T09:56:17.063
> 
> 标签：c#, crystal-reports

嗨，我正在使用带有数据集的 Crystal Report，但是当我运行报表时，它显示空白记录，听到的是我的代码

```
 private void UpdateReport()
    {
        try
        {
            DateTime StDate = dtpFrom.Value;
            DateTime EdDate = dtpTo.Value;
            DataSet reportData = new DataSet();
            SqlConnection conn = new SqlConnection(DBConnect.CaptureManagerConnectionSting);
            conn.Open();
            SqlDataAdapter da = new SqlDataAdapter();
            SqlCommand cmd = new SqlCommand("SP_GetBountyModelGrouping", conn);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("@Region", SqlDbType.NVarChar).Value = cboRegion.Text;
            cmd.Parameters.Add("@Country", SqlDbType.NVarChar).Value = cboCountry.Text;
            cmd.Parameters.Add("@StDate", SqlDbType.NVarChar).Value = StDate.ToShortDateString();
            cmd.Parameters.Add("@EdDate", SqlDbType.NVarChar).Value = EdDate.ToShortDateString();
            da.SelectCommand = cmd;
            da.Fill(reportData, "DataTableBountyModelGrouping");
            conn.Close();
            crptBountyModelGrouping rptDoc = new crptBountyModelGrouping();
            rptDoc.SetDataSource(reportData.Tables[0]);
            crystalReportViewer1.ReportSource = rptDoc;
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    } 
```

请帮助我谢谢 VG .Salger

# iphone - IOS 6 在导航中，如何设置屏幕不突出显示选项卡？

> ID：14643653
> 
> 赞同：0
> 
> 时间：2013-02-01T09:56:19.177
> 
> 标签：iphone, ios6, tabs, navigation, highlight

请帮忙！我们的 IOS 应用程序底部有 4 个导航选项卡，其中应用程序上只有几个屏幕不需要突出显示。

我们怎么能不在 IOS 6 的特定屏幕上显示突出显示的选项卡？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:05:40.007

您可以使用“自定义 TabBar”开发来实现此目的。

在那里，您可以手动设置底部标签栏按钮，以及选择和取消选择的图像。

您可以创建一个示例函数，其中所有底部标签栏按钮都取消选择了图像，然后从您希望它不被突出显示的屏幕中调用该函数。

希望你有一个想法。

快乐编码！

干杯!

# python - Django 优化

> ID：14643654
> 
> 赞同：-1
> 
> 时间：2013-02-01T09:56:27.533
> 
> 标签：python, django, django-models

我在 Django 中用原始 sql 编写了查询。假设该查询的结果被分配给变量***queryResult***。

然后我循环这个***queryResult***，然后使用 django ORM 从几乎三个表中检索数据。

例如..

```
for item in queryResult:
   a=table1.objects.get(id=item[0])
   b=table2.objects.get(id=item[1])
   c=table2.objects.get(id=item[2])
   z=a.result
   x=a.result1
   v=c.result

   ####based on some condition check the data is stored into a list as dictionary.

   recentDocsList.append({'PurchaseType':item[0],
                           'CaseName':z,
                           'DocketNumber':x, 
                           'CourtID':item[2],                             
                           'PacerCmecf':v,                              
                           'DID':item[3]}) 
```

完成循环后，这个rec​​entDocsList 被返回了......但整个事情让我的页面呈现缓慢。任何人都有任何方法来解决这个问题。

PS：整个事情都在一个while循环中。一次只能检索 50 个结果。如果检索到的结果小于 50 或 **recentDocsList**长度等于 10，则控件退出 while 循环。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:03:22.793

### 不要过早优化——这会造成混淆和混乱。

即使使用 SQLite3，您也应该能够拉出 50 个链式查询集而不会对数据库征税（升级到像 PostgreSQL 这样的更高性能的数据库会进一步改善这一点）。这表明您的问题在其他地方，要调试此尝试调用您的模型/查询/视图

```
$ ./manage.py debugshell 
```

这将打印出您的 SQL 查询，以便您查看实际调用的内容。更好的是安装[django-debug-toolbar](http://pypi.python.org/pypi/django-debug-toolbar)，因为这会告诉你 SQL / 渲染速度下降的地方。

但！除非你有充分的理由这样做，否则**不要编写**要在 django 中执行的自定义 SQL——ORM 几乎可以处理所有事情。自定义 SQL 的一些危险包括糟糕的性能 - 正如您可能正在经历的那样。

此外 -`while`在性能敏感的地方（如页面渲染）中的循环听起来像是一场等待发生的灾难 - 你确定你不能以更安全的方式重写它吗？

如果没有看到更多代码，很难提供帮助 - 您的查询集有多大？他们有效率吗？你的表有索引吗？（如果您允许，Django 将提供这些，但听起来您正在做一些不同的事情）。

# mysql - 即使是解释计划，也要为长时间运行的查询而苦苦挣扎，这也花费了很多时间

> ID：14643655
> 
> 赞同：0
> 
> 时间：2013-02-01T09:56:32.437
> 
> 标签：mysql, sql, performance, query-performance

1.  我的查询需要很长时间，大约需要 1 小时。2.因此，它影响了数据库性能。3.即使是解释计划也需要很长时间。4.我的查询很大。

询问：

```
select count(*) from 
(
    select paid.keyword_id, paid.keyword_name, stat.orgEntrances,
    keyword.rank1, keyword.rank_check, 
    SUM(paid.clicks) as sumclick, 
    SUM(paid.clicks * paid.avg_position) as sumclickavgpos,
    SUM(paid.itemRevenue) as sumitem,
    SUM(paid.cost) as sumcost,  
    SUM(paid.transactions) as sumtrans,  
    SUM(paid.impressions) as sumimpress,  
    IF(SUM(paid.impressions) = 0, 0,
        SUM(paid.impressions * paid.avg_position) / SUM(paid.impressions))  
    as sumimpressavgrank,
    con.item_revenue,  con.transactions,  keyword.monthly_search_volume
    from `t_keyword_paid_analytics_google_ib` paid  
    left join
    (
        select outer_t.keyword_id, 
        sum(outer_t.item_revenue) as item_revenue, 
        sum(outer_t.transactions) as transactions
        from t_keyword_conversion_ga_ib outer_t  
        where outer_t.own_domain_id = 720  
        and outer_t.traffic_date >= '2012-12-01'
        and outer_t.traffic_date <= '2012-12-31'  
        group by outer_t.keyword_id  
    ) con
    on paid.keyword_id = con.keyword_id  
    left join
    (
        select outer_t.keyword_id, sum(outer_t.entrances) as orgEntrances  
        from t_keyword_stat_ga_ib outer_t  
        where outer_t.own_domain_id = 720
        and outer_t.traffic_date >= '2012-12-01'  
        and outer_t.traffic_date <= '2012-12-31'  
        and (outer_t.medium = 'organic' or outer_t.medium is null )
        group by outer_t.keyword_id  
    ) stat 
    on paid.keyword_id = stat.keyword_id
    left join `t_managed_keyword_ib` keyword on keyword.id = paid.keyword_id  
    where paid.own_domain_id = 720  and paid.traffic_date >= '2012-12-01'
    and paid.traffic_date <= '2012-12-31'  
    and (paid.channel is null or paid.channel = 'Google')
    group by paid.keyword_id  having paid.keyword_id is not null  
) tempt; 
```

表结构：

```
mysql> show create table t_keyword_paid_analytics_google_ib\G
*************************** 1\. row ***************************
Table: t_keyword_paid_analytics_google_ib
Create Table: CREATE TABLE `t_keyword_paid_analytics_google_ib` (
`keyword_name` varchar(255) DEFAULT NULL,
`id` int(11) NOT NULL,
`keyword_id` int(11) NOT NULL,
`target_url_id` int(11) DEFAULT NULL,
`own_domain_id` int(11) NOT NULL,
`log_date` date NOT NULL,
`traffic_date` date NOT NULL,
`impressions` int(11) DEFAULT NULL,
`clicks` int(11) DEFAULT NULL,
`entrances` int(11) DEFAULT NULL,
`match_type` int(11) DEFAULT NULL COMMENT '1: Phrase, 2: Exact, 3:Broad 4: etc',
`ad_group_name` varchar(200) DEFAULT NULL,
`ad_distribution_network` varchar(500) CHARACTER SET latin1 DEFAULT NULL,
`match_query` varchar(500) CHARACTER SET latin1 DEFAULT NULL,
`cost` decimal(10,2) DEFAULT NULL,
`cpm` decimal(10,2) DEFAULT NULL,
`ctr` decimal(10,2) DEFAULT NULL COMMENT 'percent',
`cpc` decimal(10,2) DEFAULT NULL,
`campaign` varchar(200) CHARACTER SET latin1 DEFAULT NULL,
`keyword_status` tinyint(4) DEFAULT NULL COMMENT '1: Active,2: Approved, 3: Disapproved, 4: Paused , 5:Pending, 6: Failed, 7:etc',
`ad_group_status` tinyint(4) DEFAULT NULL COMMENT '1:ELIGIBLE; 2=PAUSED;3=LOW_SEARCH_VOLUME;4 =LOW_QUALITY_SCORE; 5=DISAPPROVED; 6=AD_GROUP_PAUSED; 7=etc',
`max_cpc` decimal(10,2) DEFAULT NULL,
`quality_score` tinyint(4) DEFAULT NULL,
`channel` varchar(100) DEFAULT NULL,
`first_page_cpc` decimal(10,2) DEFAULT NULL,
`avg_position` decimal(10,2) DEFAULT NULL,
`itemRevenue` decimal(10,2) DEFAULT NULL,
`goal1value` decimal(10,2) DEFAULT NULL,
`goal2value` decimal(10,2) DEFAULT NULL,
`goal3value` decimal(10,2) DEFAULT NULL,
`goal4value` decimal(10,2) DEFAULT NULL,
`transactions` int(10) DEFAULT NULL,
`goal1completions` int(10) DEFAULT NULL,
`goal2completions` int(10) DEFAULT NULL,
`goal3completions` int(10) DEFAULT NULL,
`goal4completions` int(10) DEFAULT NULL
) ENGINE=BRIGHTHOUSE DEFAULT CHARSET=utf8
1 row in set (0.00 sec)

mysql> show create table t_keyword_conversion_ga_ib\G
*************************** 1\. row ***************************
Table: t_keyword_conversion_ga_ib
Create Table: CREATE TABLE `t_keyword_conversion_ga_ib` (
`keyword_name` varchar(255) COLLATE latin1_bin DEFAULT NULL,
`id` int(11) NOT NULL,
`own_domain_id` int(11) DEFAULT NULL,
`keyword_id` int(11) DEFAULT NULL,
`traffic_date` date DEFAULT NULL,
`targeturl_id` int(11) DEFAULT NULL,
`entrance` int(11) DEFAULT NULL,
`transactions` int(11) DEFAULT NULL,
`item_revenue` decimal(9,2) DEFAULT NULL,
`goal1completions` int(11) DEFAULT NULL,
`goal2completions` int(11) DEFAULT NULL,
`goal3completions` int(11) DEFAULT NULL,
`goal4completions` int(11) DEFAULT NULL,
`goal5completions` int(11) DEFAULT NULL,
`goal6completions` int(11) DEFAULT NULL,
`goal7completions` int(11) DEFAULT NULL,
`goal8completions` int(11) DEFAULT NULL,
`goal9completions` int(11) DEFAULT NULL,
`goal10completions` int(11) DEFAULT NULL,
`goal1Value` decimal(9,2) DEFAULT NULL,
`goal2Value` decimal(9,2) DEFAULT NULL,
`goal3Value` decimal(9,2) DEFAULT NULL,
`goal4Value` decimal(9,2) DEFAULT NULL,
`goal5Value` decimal(9,2) DEFAULT NULL,
`goal6Value` decimal(9,2) DEFAULT NULL,
`goal7Value` decimal(9,2) DEFAULT NULL,
`goal8Value` decimal(9,2) DEFAULT NULL,
`goal9Value` decimal(9,2) DEFAULT NULL,
`goal10Value` decimal(9,2) DEFAULT NULL,
`medium` varchar(255) COLLATE latin1_bin DEFAULT NULL,
`source` varchar(255) COLLATE latin1_bin DEFAULT NULL
) ENGINE=BRIGHTHOUSE DEFAULT CHARSET=latin1 COLLATE=latin1_bin
1 row in set (0.00 sec) 
```

请在这里帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:05:59.313

创建索引并更改 where 条件。放在`(outer_t.medium = 'organic' or outer_t.medium is null )`后面`outer_t.own_domain_id = 720`和`(paid.channel is null or paid.channel = 'Google')`后面`paid.own_domain_id = 720`。试试吧，我希望它能让你的查询更快。

# android - 卡在@SuppressLint("NewApi") (developer.android.com/training/basics/firstapp/starting-activity)

> ID：14643657
> 
> 赞同：15
> 
> 时间：2013-02-01T09:56:36.333
> 
> 标签：android

我是 Android 的初学者，目前仍坚持这个问题：http: [//developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)

在**Create the Second Activity**部分中，当我尝试使用代码时：

```
public class DisplayMessageActivity extends Activity {

    @SuppressLint("NewApi")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_display_message);

        // Make sure we're running on Honeycomb or higher to use ActionBar APIs
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            // Show the Up button in the action bar.
            getActionBar().setDisplayHomeAsUpEnabled(true);
        }
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }
} 
```

我收到以下错误：

**@SuppressLint("NewApi")** -> 未定义注解类型 SuppressLint 的属性值。

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES. **HONEYCOMB** ) -> HONEYCOMB 无法解析或不是字段。

**getActionBar** ().setDisplayHomeAsUpEnabled(true); -> 方法 getActionBar() 未为 DisplayMessageActivity 类型定义。

**NavUtils** .navigateUpFromSameTask(this); -> NavUtils 无法解决

有人让我知道如何解决吗？这是我导入的内容：

```
import android.app.Activity;
import android.os.Build;
import android.os.Bundle;
import android.view.MenuItem; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-05-26T11:34:50.407

[`SuppressLint`](http://developer.android.com/reference/android/annotation/SuppressLint.html)注释已在 API 级别 16 中添加。您需要：

*   将您的构建 SDK 设置为 16 或更高版本，或者
*   从您的 Android SDK复制`tools/support/annotations.jar`到项目`libs`。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-01T16:03:08.850

> 导入 android.annotation.SuppressLint；

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-10T19:30:49.733

我遇到了完全相同的问题。CTRL-SHIFT-o（组织导入）为我填写了缺少的导入。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-02-27T05:03:01.533

您的构建目标未设置为 API 级别 14 或更高。这不是错误，请关闭此问题。

**（在 Eclipse 中：项目 => 属性 => Android）**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-26T11:05:25.167

将光标移到“SuppressLint”上，它将带​​有红色下划线。选择修复选项“修复项目设置”。从弹出列表中选择“添加存档'annotations.jar'。祝你有快乐的一天。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-17T11:05:54.017

如果您`@SuppressLint("NewApi")` 在类声明上方设置该行，它就可以工作！（在 [本课](http://developer.android.com/training/basics/firstapp/starting-activity.html)中，这条线位于 内`onCreate`，这是行不通的！）

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-13T21:35:18.027

ctrl+shift+O 导入库和 ctrl+s 保存使错误消失了。

# sql - Order - OrderDetail 在不使用光标的情况下获取结果集

> ID：14643660
> 
> 赞同：1
> 
> 时间：2013-02-01T09:56:55.420
> 
> 标签：sql, sql-server, database

我有一个基本架构，如下所示

```
OrderTable
Id int

1
2

OrderDetailTable
Id int - OrderId int

1        1
2        1
3        1
4        1
5        2
6        2
7        2 
```

我想要一张桌子

```
OrderOrderDetailCombinationTable
Order int - OrderDetails varchar(100) 
```

例子

```
Order - OrderDetails
1       1,2,3,4
2       5,6,7 
```

[http://www.sqlfiddle.com/#!3/c617b/2](http://www.sqlfiddle.com/#!3/c617b/2)

我可以通过使用游标来获得此结果，但据我所知，游标会降低性能，那么获得此结果的更好方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:07:22.210

询问：

**[SQLFIDDLE示例](http://www.sqlfiddle.com/#!3/c617b/12)**

```
SELECT o.orderid AS [Order],
    STUFF((   SELECT ',' +CAST( x.id as varchar(2) )
        FROM orderdetail x
        WHERE o.orderid = x.orderid
        FOR XML PATH ('')
    ),1,1,'') as OrderDetails
FROM [orderdetail] o
INNER JOIN [order] oo
ON oo.id = o.orderid
GROUP BY o.orderid 
```

结果：

```
| ORDER | ORDERDETAILS |
------------------------
|     1 |      1,2,3,4 |
|     2 |        5,6,7 | 
```

# entity-framework - GenericRepository TEntity 更改属性值

> ID：14643661
> 
> 赞同：0
> 
> 时间：2013-02-01T09:56:57.597
> 
> 标签：entity-framework, repository-pattern, code-first

我正在使用 EF 5.0 和模型优先方法。我已经构建了一个 GenericRepository，它具有基本的 get、insert、delete 等语句。像：

```
public virtual void Insert(TEntity entity)
{
      dbSet.Add(entity);
} 
```

我的 EF 实体都具有属性 Modified 和 ModifiedBy。现在我想在每次保存实体时更改此值。是否可以在不一直编写特定实现的情况下修改这两个属性（设置值）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T22:18:02.317

我看到了两个选项供您执行此操作，但它们都需要为所有实体引入基本类型或接口，以在通用函数中覆盖它们。我更喜欢一个接口，尽管每个实体都必须一次又一次地实现它。

假设您创建

```
interface IAuditable
{
    DateTime Modified { get; set; }
    string ModifiedBy {get; set; } // User id?
} 
```

现在你可以这样做：

```
public virtual void Insert(TEntity entity)
   where TEntity : IAuditable
{
     entity.Modified = DateTime.Now;
     entity.ModifiedBy = ???? // Whatever you get the name from
     ...
} 
```

（编辑相同）

您还可以订阅上下文的[`SavingChanges`](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.savingchanges.aspx)事件：

```
// In the constructor:
context.SavingChanges += this.context_SavingChanges;

private void context_SavingChanges(object sender, EventArgs e)
{
    foreach (var auditable in context.ObjectStateManager
        .GetObjectStateEntries(EntityState.Added | EntityState.Modified)
        .Select(entry => entry.Entity)
        .OfType<IAuditable>)
    {
        auditable.Modified = DateTime.Now;
        auditable.ModifiedBy = ????;
    }
} 
```

如果您与您合作，`DbContext`您可以通过以下方式参加活动

```
((IObjectContextAdapter)this).ObjectContext.SavingChanges 
```

我想补充一点，数据库触发器可以（也许应该）实现更可靠的时间跟踪。现在你依赖于客户的时钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:02:26.607

您可以在您想要的所有存储库方法中使用以下代码来执行此操作。

```
 public virtual void Edit(TEntity entity)
     {
          entity.Modified=DateTime.Now;
          entity.ModifiedBy=User.Identity.Name;
          //Other saving to repository code
     } 
```

# visual-studio - 防止 Visual Studio 在按下 Ctrl A 时滚动到文件末尾（全选）

> ID：14643664
> 
> 赞同：15
> 
> 时间：2013-02-01T09:57:06.707
> 
> 标签：visual-studio

它基本上在标题中。

每当您在 Visual Studio 代码编辑器中“全选”时，编辑器都会向下滚动到文件底部。有没有办法防止这种情况？

我目前正在使用 Visual Studio 2008，但这适用于所有版本。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-11T14:38:10.740

不，您无法更改此行为。

微软至少从 VS 2010 开始就意识到了这一点，但要么不认为这是一个错误，要么认为它不够重要，无法修复。

从他们对 2010 年就该问题提交的错误报告的回复中：

> 很遗憾，我们目前不打算更改 Ctrl+A 的滚动，因此我们很遗憾地解决了这个问题，因为不会修复 VS 2010。但是，它将保留在我们的数据库中，以便在未来版本的 Visual Studio 中重新访问.

来源：[微软连接](http://connect.microsoft.com/VisualStudio/feedback/details/597742/ctrl-a-always-scrolls-to-the-bottom-of-the-document)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-03T22:50:34.717

快速的 Ctrl-Z-Ctrl-Y 会让你回到原来的位置。如果您经常使用 Ctrl-S Ctrl-A Ctrl-C，那么只需习惯整个链条：Ctrl-SACZY。或者，创建一个宏：[https ://msdn.microsoft.com/en-us/library/a0003t62%28v=vs.90%29.aspx](https://msdn.microsoft.com/en-us/library/a0003t62%28v=vs.90%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-22T21:08:02.967

我自己也在为此苦苦挣扎，但“撤消”的建议给了我一个想法，我觉得有点愚蠢，因为没有早点想到它。Visual Studio 包括“向后导航”和“向前导航”按钮（分别为`CTRL``-`和）。`CTRL``+`因此，在您完成选择和复制后，只需单击向后导航按钮或键入`CTRL``-`并瞧！你回到了原来的地方。

*我知道*它不会停止滚动开始，但至少它会让你的光标回到你离开它的地方！

# c# - C# 中的 Monitor.Pulse 出现次优：必须在锁定范围内

> ID：14643666
> 
> 赞同：2
> 
> 时间：2013-02-01T09:57:15.023
> 
> 标签：c#, performance, locking, monitor, condition-variable

剧透注：问题是最后一句话。

在 C# 中，使用条件变量的经典模式是这样的：

```
lock (answersQueue)
{
    answersQueue.Enqueue(c);
    Monitor.Pulse(answersQueue); // condition variable "notify one".
} 
```

和其他一些线程：

```
lock (answersQueue)
{
    while (answersQueue.Count == 0)
    {
        // unlock answer queue and sleeps here until notified.
        Monitor.Wait(answersQueue);
    }
    ...
} 
```

这是我的代码中的一个例子。如果我将 Pulse 放在锁定范围之外，它不会编译。但是，这是正确的方法：cf：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686903(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686903(v=vs.85).aspx) 和： http: [//www.installsetupconfig.com/win32programming/threadprocesssynchronizationapis11_7.html](http://www.installsetupconfig.com/win32programming/threadprocesssynchronizationapis11_7.html) （搜索“里面”）

实际上，当您仍处于关键部分时，向睡眠线程发出信号是愚蠢的。因为睡眠线程不能唤醒（不是立即），因为它也在一个关键部分中！

因此，我希望 .NET 或 C# Pulse 调用实际上只是标记锁定对象，以便当它超出范围时，此时它实际上“脉冲”条件变量。因为否则，它将有一个最优性问题。

那么，Monitor 对象的设计是如何选择的呢？

编辑：

我在这篇论文中找到了答案： [http](http://research.microsoft.com/pubs/64242/implementingcvs.pdf) ://research.microsoft.com/pubs/64242/implementingcvs.pdf 部分“优化信号和广播”以及上一节关于 NT 内核以及如何在信号量之上制作条件变量，这就是引入“该死的队列”的原因。现在，这让我成为了一名更好的工程师。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:08:44.997

您不了解同步的基本问题。什么是“监视器”，线程休眠是什么意思，即将被唤醒是什么意思？

监视器是一种中级同步结构。这不是带有总线停止 XCHG 操作的低级小易失性布尔标志，也不是需要数十种其他特殊机制的高级线程池处理程序。

在监视器上，**许多**线程可能会休眠。那里有**逻辑队列**，即进入睡眠/唤醒的保留顺序，或保证适当时间调度和公平的机制。我不会详细介绍，所有这些都在网络上，甚至在 wiki 上。

再加上操作是 PULSE。脉搏是瞬时的。它不会“粘”。脉冲会唤醒那些正在睡觉的人。如果在脉搏之后另一个人检查监视器，它将进入睡眠状态。

现在想象一下：你有一个包含 5 个休眠线程的队列。一个线程（第 6 个）现在想要给它们发送脉冲，而另一个线程（第 7 个）想要检查监视器。

6th 和 7th 并行运行，真正同时运行，因为你有四核 CPU。

那么，告诉我，如果第 6 个开始脉冲和唤醒并从队列中删除唤醒线程，同时第 7 个开始添加自身，队列的实现会发生什么？

为了解决这个问题，内部队列必须在内部同步和锁定，所以每次只有一个线程修改它们。

嗯等等。我们只是偶然发现了一个案例，我们想要同步某些东西，并且要正确地做到这一点，我们需要在另一件事上同步？不好。

因此，在您与监视器本身交谈之前，实际的 LOCK 是在外部完成的。这是为了实现SINGLE LOCKING，而不是引入几层分层锁。

这样一来，它更简单、更快、资源更友好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:07:20.403

> 实际上，当您仍处于关键部分时，向睡眠线程发出信号是愚蠢的。因为睡眠线程无法唤醒

`Pulse` *不期望*让线程运行；它只希望在 2 个队列（等待和就绪）之间移动一个线程。“不去做某事”是通过`Exit`（或 a 的结尾`lock`）释放锁的一部分。实际上，这不是问题，因为`Monitor.Pulse`通常发生在 a`Wait`或`Exit`.

> 因此，我希望 .NET 或 C# Pulse 调用实际上只是标记锁定对象，以便当它超出范围时，此时它实际上“脉冲”了条件变量。因为否则，它将有一个最优性问题。

再次; 这些是不同的问题：在等待和准备之间移动是一回事；退出锁*已经*拥有所有代码来实际激活下一个就绪线程。

# java - Java：通过反射调用第二个类的方法

> ID：14643674
> 
> 赞同：1
> 
> 时间：2013-02-01T09:57:37.830
> 
> 标签：java, reflection

我有一个关于 Java 反射的问题。

以下问题：根据配置，我想通过反射调用方法，但不仅是类**CLASS_A**，而且还来自**CLASS_A**引用的类**CLASS_B**。

但我想始终只使用类**CLASS_A**来访问该属性。

这是我的意思的一个例子：

```
public class Foo
{
   private String _name;
   private Bar _bar;
   public Foo(String name, Bar bar)
   {
      _name = name;
      _bar = bar;
   }

   public String getName()
   {
      return _name;
   }

   public Bar getBar()
   {
     return _name;
   }
}

public class Bar
{
   private String _name;

   public Bar(String name)
   {
     _name = name;
   }  

   public String getName()
   {
     return _name;
   }
} 
```

我想始终使用类的实例`Foo`来调用由`getMethod`... 返回的方法，无论是`Foo`应该调用的方法还是`Bar`.

```
public class Executor
{
   public static void main(String[] args)
   {
     Foo foo = new Foo("fooName", new Bar("barName"));
     String attribute = "barName";

     Method method = getMethod(Foo.class, attribute);

     try
     {
       System.out.println(String.valueOf(method.invoke(foo, new Object[]{})));
     }
    catch(Exception ex)
    {
       ex.printStackTrace();
    }
  }

 private static Method getMethod(Class< ? > clazz, String attribute)
 {
    try
    {
      if (attribute.equals("fooName"))
      {        
        return clazz.getDeclaredMethod("getName", new Class[] {});
      }
      else if (attribute.equals("barName"))
      {
        //Is that somehow possible?
        Method method = clazz.getDeclaredMethod("getBar.getName", new Class[] {});
        return method;
      }
    }
    catch (Exception ex)
    {
      ex.printStackTrace();
    }

    return null;
  }
} 
```

这样的事情可能吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:21:15.823

您可以使用 Apache BeanUtils 库。

[这](http://www.kodejava.org/examples/261.html)是一个很好的例子，说明如何使用它。

# sorting - 如何在java中对计算出的3维数组的平均值进行排序

> ID：14643680
> 
> 赞同：0
> 
> 时间：2013-02-01T09:58:07.860
> 
> 标签：sorting

我有这个程序及其输出：

```
 import java.util.Random;
    public class Grades {
    public static void main(String[] args) {
    Random random = new Random();
    int grades[][][] = new int[10][5][3];
    int i,j,k;
    int l;        

    System.out.println("\nGrades of all students in 3 subjects and their average:\n");
    for(i=0;i<10;i++)
    {
    for(j=0;j<5;j++)
    {
    int sum = 0;
    int ave = 0;
    System.out.print("{");
    for(k=0;k<3;k++)
    {
    l = random.nextInt(40)+60;
    grades[i][j][k] = l;
    sum += grades[i][j][k];
    ave = sum/3;
    System.out.print(l+",");
    }                                               
    System.out.print("}= "+ave);                
    }
    System.out.println();
    }
    }
    } 
```

输出：

所有学生在 3 个科目的成绩和他们的平均成绩：

```
 {80,83,75,}= 79{75,85,93,}= 84{93,91,76,}= 86{71,93,96,}= 86{60,60,67,}= 62
  {60,74,73,}= 69{85,87,93,}= 88{88,76,83,}= 82{80,96,95,}= 90{68,78,84,}= 76
  {77,87,85,}= 83{78,65,94,}= 79{72,88,78,}= 79{86,80,87,}= 84{81,85,94,}= 86
  {69,78,75,}= 74{71,97,91,}= 86{92,81,69,}= 80{89,62,85,}= 78{68,80,70,}= 72
  {82,70,98,}= 83{65,73,65,}= 67{96,90,96,}= 94{86,88,79,}= 84{94,77,96,}= 89
  {64,93,85,}= 80{69,93,69,}= 77{76,68,67,}= 70{60,88,97,}= 81{83,68,96,}= 82
  {78,94,77,}= 83{97,83,81,}= 87{90,81,92,}= 87{65,88,98,}= 83{96,92,79,}= 89
  {75,61,76,}= 70{61,73,89,}= 74{88,96,77,}= 87{60,64,82,}= 68{74,73,85,}= 77
  {98,70,99,}= 89{90,76,67,}= 77{84,99,90,}= 91{96,97,97,}= 96{99,72,73,}= 81
  {80,98,71,}= 83{84,93,99,}= 92{77,97,78,}= 84{94,96,95,}= 95{80,77,66,}= 74 
```

程序将计算 3 维数组的每 3 个值的平均值。我想对这些计算值进行排序，但我不知道该怎么做。我是java新手。谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:19:35.657

这看起来像一个家庭作业问题，所以你得到的是提示而不是代码。

*   开设一`Grade`门课程来保存您的成绩及其实施`java.lang.Comparable`（并有`compareTo`方法）的平均成绩。
*   创建一个对象数组`Grade`：`Grade[] grades`
*   用于`Arrays.sort(grades)`对它们进行排序。

如需更灵活的排序选项，请查看`java.util.Comparator`.

您也可以考虑使用 a`java.util.TreeSet`但您必须添加类似学生 ID 的内容，以便集合中的每个元素都是唯一的。

# html - 使用 CSS 的首字下沉

> ID：14643684
> 
> 赞同：3
> 
> 时间：2013-02-01T09:58:18.040
> 
> 标签：html, css

如何使每个段落的第一个字符如下所示：

![在此处输入图像描述](../Images/53ed1ef36fe56519cd8640723e0498dd.png)

我更喜欢只使用 CSS。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:09:51.707

```
p:first-letter {
    float: left;
    font-size: 5em;
    line-height: 0.5em;
    padding-bottom: 0.05em;
    padding-top: 0.2em;
} 
```

根据需要调整字体、填充、行高。

示例：http: [//jsfiddle.net/RLdw2/](http://jsfiddle.net/RLdw2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T09:59:23.683

添加这个 `p:first-letter{font-size:50px}`

**[演示](http://jsfiddle.net/7JTC7/)**

* * *

这是图像中显示的满足您要求的确切解决方案

[**演示 2**](http://jsfiddle.net/NPAX2/)

**[维基百科解释](http://en.wikipedia.org/wiki/Initial#Types_of_initials)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:08:48.800

[**在此处查看演示...**](http://jsfiddle.net/W3EkN/)

CSS///

```
p{ width:300px; border:1px solid #000;}
p:first-letter
{font-size:52px;color:#8A2BE2;font-weight:bold;float: left;margin-top:4px;} 
```

HTML///

```
<p>The first character of this paragraph will be 52px big
as defined in the CSS rule above. Rest of the
characters in this paragraph will remain normal. This example 
shows how to use :first-letter pseduo element to give effect to
the first characters  of any HTML element.</p>

<p>The first character of this paragraph will be 52px big
as defined in the CSS rule above. Rest of the
characters in this paragraph will remain normal. This example 
shows how to use :first-letter pseduo element to give effect to
the first characters  of any HTML element.</p> 
```

# c# - 为什么当连接实体为空时水晶报表不显示字段

> ID：14643690
> 
> 赞同：0
> 
> 时间：2013-02-01T09:58:34.957
> 
> 标签：c#, visual-studio-2010, crystal-reports

`SQL Server Database`在通过 a链接到 a 的水晶报表中`DataSet (*.xsd-File)`，我正在显示来自多个表格的数据。它也有一些子报告。

在主报告中，我显示来自两个表的数据。当两个表都有一条记录要显示时，它可以工作，但是当第一个表中只有一条记录并且另一个表中的相应记录为空（这没关系）时，它不显示任何数据。

例子：

假设我有一张桌子`Person`和`Address`. 一个人可以有一个地址，但它也可以是空的（null）。

当我想显示一个有一个的报告时`Person`，`Address`它会显示所有想要的`fields` `(like Person.Name, Person.Age, Address.Street etc.)`。

如果我想显示一个没有地址的人的报告，它显然无法显示任何地址数据，但它也不会显示该人的字段。

这可能是什么原因？

我可以改进我的问题以澄清一些事情吗？我正在使用VS2010。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:57:49.453

我发现了问题所在，并做了以下纠正：

在 Visual Studio 2010 中，当您打开 rpt-File 时，单击 Crystal Reports 上的菜单并打开 Database > Database Expert... 您必须切换到 Links 选项卡，然后我必须**反转**两个表之间的链接并在链接选项中将连接类型从“内连接”更改为“**左外连接**”。

在我这样做之后，它按我的预期工作。

# extjs - Ext JS loadRecord 进入表单组合框

> ID：14643691
> 
> 赞同：0
> 
> 时间：2013-02-01T09:58:34.617
> 
> 标签：extjs

我的应用程序中有一个网格，我想在更改网格选择后填充表单。我在我的表单上使用方法 loadRecord()，它对除组合框以外的所有字段都工作得很好。选择中的组合框 ID 以及组合框 ID 已正确附加。

组合框配置：

```
{ 
   xtype: 'combobox', 
   fieldLabel: this.T('dep_type'), 
   name: 'type_id', 
   displayField:'name', 
   valueField:'id', 
   editable: false, 
   forceSelection: true, 
   store: 'main.department.components.Types' 
} 
```

您能否就这个问题提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:24:29.377

首先为您的组合框分配一个 ID。

之后`Ext.getCmp('yourComboBoxId').getStore().load()`会有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:22:50.303

一些猜测：

1.  所选记录中此字段没有值
2.  所选记录中没有名为“type_id”的字段
3.  所选记录中的字段名称和表单字段的名称不匹配（与＃2相同）

# git - 没有强制推送的 Git 镜像

> ID：14643692
> 
> 赞同：5
> 
> 时间：2013-02-01T09:58:38.203
> 
> 标签：git

是否有可能以某种方式设置一个像往常一样工作的 git 存储库 --mirror 用于拉入它，但在*从*它推送到另一个 repo 时不强制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-22T20:13:22.463

您可以添加 --no-force 来禁用强制行为，如下所示：

```
git push --mirror --no-force 
```

这将禁用非快进更新（使用 git 1.8.0.2 测试）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-16T15:10:50.660

> I'd like to do a git push --mirror that will fail if a non-fast forward update is required.

A git push --mirror should fail if the upstream repo has its config set to `receive.denyNonFastForwards true`:

[`git config` man page](http://git-scm.com/docs/git-config):

```
receive.denyNonFastForwards 
```

> If set to `true`, `git-receive-pack` will deny a ref update which is not a fast-forward.
> Use this to prevent such an update via a push, **even if that push is forced**.
> This configuration variable is set when initializing a shared repository.

That means you wouldn"t have to "reproduce what `--mirror`" does: you could simply use it, and still have that push fail if any non-fastforward merge is involved.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-16T23:38:44.057

> 有没有办法重现 --mirror 对其他选项的作用？

镜像的某些功能可以通过多次推送来执行：

```
git push <remote> --all  # push all branches
git push <remote> --tags # push all tags
git push <remote> refs/remotes/* #push the remote refs 
```

# iphone - 在页面加载时显示 UItableview 滚动条几秒钟

> ID：14643703
> 
> 赞同：0
> 
> 时间：2013-02-01T09:58:56.477
> 
> 标签：iphone, ios, uitableview, xcode4

我在 UITableView 中有行数。为了让人们知道有很多项目我想在视图出现时显示几秒钟的 tableview 滚动条。有没有我错过的方法或委托？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:04:38.723

您可以使用：

```
[self.tableView flashScrollIndicators]; 
```

但是，除非用户滚动`UITableView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:04:49.280

因为 UITableView 是 UIScrollView 的一种，所以可以调用`flashScrollIndicators`

# vba - MS Office PowerPoint VBA 编程支持还是调试模式？

> ID：14643705
> 
> 赞同：1
> 
> 时间：2013-02-01T09:58:59.847
> 
> 标签：vba, debugging, powerpoint

我正在尝试使用 VBA 为 PowerPoint 开发一个小宏。然而，“开发环境”绝对是一场噩梦！

最糟糕的是：似乎没有真正好的方法来生成调试输出！我读到 Debug.Print 输出应该进入即时窗口，但那里什么也没有出现！所以我目前正在使用 MsgBox 来生成调试消息。:-(

真正糟糕的是，宏中的错误总是会导致 PPT 崩溃。因此，必须等待，直到它消失，然后必须再次重新启动它并摆脱所有恢复尝试。这总是需要很长时间！

如果我设置 On Error Resume Next 它不会崩溃 - 至少不会那么频繁 - 但是事情只是默默地不起作用，我看不出是什么以及为什么会出错（除非我用 MsgBox 调用粘贴代码，但这需要在每次执行期间点击 100'000 次）。

在调试器中运行代码并单步执行代码也不起作用，因为我的宏引用了当前的“ActivePresentation”，除非启动幻灯片模式，否则它似乎不存在。所以这个调试让我发疯了！

这真的是开发 VBA 代码的唯一可能性或环境吗？至少有一些想法。调试输出，有人吗？

M。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T16:59:33.467

> > 最糟糕的是：似乎没有真正好的方法来生成调试输出！我读到 Debug.Print 输出应该进入即时窗口，但那里什么也没有出现！

冒着听起来侮辱的风险（我不打算这样做！）您是否打开了立即窗口？在 IDE 中，按 Ctrl+G 以查看是否出现任何新内容。如果是这样，那就是立即窗口。

> > 真正糟糕的是，宏中的错误总是会导致 PPT 崩溃。

不是通常，没有。当然，它可能会以这种方式发生。您的代码可能会触发 PPT 中的错误。天知道，我在 PPT 2002 和 2007 中遇到了足够多的问题。如果您正在使用合理的错误处理并且仍然遇到导致 PPT 崩溃的错误，那么在代码运行时单步执行应该至少可以让您将其范围缩小到导致崩溃的一两行。

> > 在调试器中运行代码并单步执行代码也不起作用，因为我的宏引用了当前的“ActivePresentation”，除非启动幻灯片模式，否则它似乎不存在。

再次，不。ActivePresentation 指的是应用程序中具有焦点的任何演示文稿，无论是幻灯片放映还是任何其他视图。如果您的代码在一个演示文稿中并且它应该作用于另一个演示文稿，这可能会导致一些混乱，但您只需要切换到普通视图，确保您想要访问的演示文稿是可见的（我会确保不要有几个视图）然后 Alt+F11 返回 IDE 并运行您的代码。

所有这些建议都适用于任何 Windows 版本的 PPT，回到 Office 97（Mac？认为不同。如果您使用的是 Mac，请提及。有一些差异，但在大多数情况下，以上所有内容都适用，除了Alt+F11)。

如果这些似乎都对您的设置没有帮助，那么可能是时候修复 Office。

# java - 通过串口收到奇数字符 ☐[J

> ID：14643708
> 
> 赞同：1
> 
> 时间：2013-02-01T09:59:04.837
> 
> 标签：java, android, serial-port

我使用库创建了一个终端仿真器，使用另一个库连接到串行设备，这会将数据返回到我的终端。我可以在日志中看到，每次我在终端中写入一个字符并通过串行发送它时，都会返回以下三个字符以及正确的一个字符。☐[J. 当写入终端时，这些字符现在会显示出来。它们以某种方式在此代码中处理，但我不确定哪一部分，也许`doEscRightSquareBracket`：

```
 private void process(byte b, boolean doUTF8) {
        // Let the UTF-8 decoder try to handle it if we're in UTF-8 mode
        if (doUTF8 && mUTF8Mode && handleUTF8Sequence(b)) {
            return;
        }

        // Handle C1 control characters
        if ((b & 0x80) == 0x80 && (b & 0x7f) <= 0x1f) {
            /* ESC ((code & 0x7f) + 0x40) is the two-byte escape sequence
               corresponding to a particular C1 code */
            process((byte) 27, false);
            process((byte) ((b & 0x7f) + 0x40), false);
            return;
        }

        switch (b) {
        case 0: // NUL
            // Do nothing
            break;

        case 7: // BEL
            /* If in an OSC sequence, BEL may terminate a string; otherwise do
             * nothing */
            if (mEscapeState == ESC_RIGHT_SQUARE_BRACKET) {
                doEscRightSquareBracket(b);
            }
            break;

        case 8: // BS
            setCursorCol(Math.max(0, mCursorCol - 1));
            break;

        case 9: // HT
            // Move to next tab stop, but not past edge of screen
            setCursorCol(nextTabStop(mCursorCol));
            break;

        case 13:
            setCursorCol(0);
            break;

        case 10: // CR
        case 11: // VT
        case 12: // LF
            doLinefeed();
            break;

        case 14: // SO:
            setAltCharSet(true);
            break;

        case 15: // SI:
            setAltCharSet(false);
            break;

        case 24: // CAN
        case 26: // SUB
            if (mEscapeState != ESC_NONE) {
                mEscapeState = ESC_NONE;
                emit((byte) 127);
            }
            break;

        case 27: // ESC
            // Starts an escape sequence unless we're parsing a string
            if (mEscapeState != ESC_RIGHT_SQUARE_BRACKET) {
                startEscapeSequence(ESC);
            } else {
                doEscRightSquareBracket(b);
            }
            break;

        default:
            mContinueSequence = false;
            switch (mEscapeState) {
            case ESC_NONE:
                if (b >= 32) {
                    emit(b);
                }
                break;

            case ESC:
                doEsc(b);
                break;

            case ESC_POUND:
                doEscPound(b);
                break;

            case ESC_SELECT_LEFT_PAREN:
                doEscSelectLeftParen(b);
                break;

            case ESC_SELECT_RIGHT_PAREN:
                doEscSelectRightParen(b);
                break;

            case ESC_LEFT_SQUARE_BRACKET:
                doEscLeftSquareBracket(b); // CSI
                break;

            case ESC_LEFT_SQUARE_BRACKET_QUESTION_MARK:
                doEscLSBQuest(b); // CSI ?
                break;

            case ESC_PERCENT:
                doEscPercent(b);
                break;

            case ESC_RIGHT_SQUARE_BRACKET:
                doEscRightSquareBracket(b);
                break;

            case ESC_RIGHT_SQUARE_BRACKET_ESC:
                doEscRightSquareBracketEsc(b);
                break;

            default:
                unknownSequence(b);
                break;
            }
            if (!mContinueSequence) {
                mEscapeState = ESC_NONE;
            }
            break;
        }
    } 
```

这不是终端的问题，因为它正在过滤它。但现在我想将返回的数据写入 editText 并且正在写入奇数字符。他们是什么，我该如何阻止他们？它们一定是终端过滤掉它们时可能发生的一些正常情况？当我输入 exit 时，您可以在此处看到它，它应该在右侧镜像：

![在此处输入图像描述](../Images/1c6c7b37bbbcf1a8290a73528e71969c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:07:50.447

Esc-[-J 是一个[ANSI转义码](http://ascii-table.com/ansi-escape-sequences-vt-100.php)，它指示终端从光标向下清除屏幕。过滤掉它们的问题在于，在这些命令中，许多命令改变了可见文本的构造方式：它们可以移动光标、擦除部分等。因此，仅仅过滤掉它们可能不会得到想要的结果。但在这种情况下，确保您通常键入的区域被清除似乎只是一种预防措施。

我认为最好的解决方案，但在你的情况下很可能是矫枉过正，是在你的程序中集成一个 VT100 解释器（例如[这个](http://code.google.com/p/zterm/source/browse/trunk/org/zhouer/vt/VT100.java)），它将文本和命令代码流转换为屏幕的内存视图，并保存它记忆。这将是发送程序随时希望在屏幕上看到的完美表示。

# javascript - 在调整大小时保持 div 的位置与溢出相同？

> ID：14643719
> 
> 赞同：2
> 
> 时间：2013-02-01T09:59:54.790
> 
> 标签：javascript, jquery, html, css, positioning

我目前正在尝试调整我一直在研究的图像滑块。我要做的是在用户调整浏览器大小时保持滑块与浏览器左侧相遇的相同位置。检查下面的示例

```
 +------------------------+
            |          body          |
+--------------------------------------------------+
|           |                                      |
|           |<- Keep this aligned at the same      |
|           |    position on browser resize?       |
|           |                                      |
|           |                                      |
|           |                                      |
+--------------------------------------------------+
            |                        |
            +------------------------+

HTML:
<div id="scrollerWrapper">
    <div id="imageScroller">
        <img class="i" href="..." />
        <img class="i" href="..." />
        <img class="i" href="..." />
        <img class="i" href="..." />
    </div>
</div>

    browserHeight = parseInt($(window).height(), 10);

    galleryMargin = browserHeight * 0.025;
    imageHeight = browserHeight - 80 - (galleryMargin * 2);
    if (imageHeight < 250) {
        imageHeight = 250;
    }
    $(".i").css("height", imageHeight + "px"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T21:03:26.413

也许您可以更详细地了解您的问题，我从您解释的内容中了解到的内容看起来像这样并且不需要任何 javascript

小提琴在这里[http://jsfiddle.net/caramba/LzwUP/](http://jsfiddle.net/caramba/LzwUP/)

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
* { padding:0px; margin:0px; }
</style>
</head>
<body>
    <div style="position:absolute;width:100%;height:400px;background-color:orange;">
        <div style="position:relative;left:0px;top:100px;width:500px;height:200px;background-color:navy;"></div>
    </div>
</body>
</html> 
```

# ios - 音量关闭时播放音乐

> ID：14643723
> 
> 赞同：0
> 
> 时间：2013-02-01T10:00:06.897
> 
> 标签：ios, cocoa-touch, cocoa, core-audio, system-sounds

我有下一个问题：
我曾经`AudioServicesPlaySystemSound`在我的应用程序中播放短声音。但是发生了一些错误：当我关闭设备上的音量时 - 声音仍在播放。
我在 iOS 6.0 及更高版本的设备上发现了这个问题。在 iOS 5 设备上没问题。
谁能指出我做错了什么？谢谢。

# java - JLabel 不显示图像

> ID：14643724
> 
> 赞同：3
> 
> 时间：2013-02-01T10:00:07.653
> 
> 标签：java, image, jlabel

我不确定问题出在哪里。是在路上吗？尽管代码语法中完全没有错误，但图像未显示。我应该提供整个路径还是只将图像放在目录中并调用它的名称？谢谢你。

```
public class NetworkingGame {

private JFrame jfrm;

NetworkingGame(){
    jfrm = new JFrame("Angry Painters");
    jfrm.setSize(800, 480);
    jfrm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    jfrm.setVisible(true);

}// end of constructor

public void ImageLoading(){
    ImageIcon i = new ImageIcon("C:/Users/TOSHIBA/Documents/NetBeansProjects/NetworkingGame/build/classes/angry-painters.jpeg");
    JLabel jl = new JLabel(i);
    jfrm.add(jl);
}

public static void main(String[] args) throws Exception{

    SwingUtilities.invokeLater(new Runnable(){

        @Override
        public void run(){

            NetworkingGame ng = new NetworkingGame();
            ng.ImageLoading();
        } // end of run method
    }); // end of Runnable

   }//end of main method
}//end of class NetworkingGame 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:05:30.270

不要将文件路径用作图标位置，因为这仅适用于您的计算机。你真的不能指望世界上所有的机器都有 C:/Users/TOSHIBA ...angry-painters.jpeg 在正确的地方！

复制您使用的源代码 (.java) 类旁边的文件，然后调用

```
 new ImageIcon(getClass().getResource("angry-painters.jpeg")); 
```

构建器应将图像资源复制到类文件夹本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T10:14:24.737

尝试使用类似这样的路径：

```
jLabel1.setIcon(new ImageIcon("c:\\Users\\xyz\\Documents\\NetBeansProjects\\game\\src\\images.jpg")); 
```

**更新**

如果 dis 也不起作用，那么

```
 jLabel.setIcon(new ImageIcon(getClass().getResource("/image.jpg")));
    jLabel.setText("jLabel"); 
```

should.The`image.jpg`应该在您的项目文件夹中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:07:08.617

我认为您的代码不喜欢您绑定图像的方式。

假设您将图像/图标放在源文件夹中

```
ImageIcon i=new javax.swing.ImageIcon(getClass().getResource("myimage.jpeg")) 
```

或者如果您在源文件夹中创建一个文件夹

```
InputStream stream = this.getClass().getClassLoader().getResourceAsStream("/images/image.jpg");
BufferedImage bufferedImage=ImageIO.read(stream);
ImageIcon icon= new ImageIcon(bufferedImage); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-16T15:15:44.550

**在 IntellijIdea 中。2021** 就我而言，它只是没有读取图像文件。要解决这个问题：

**1.**在项目根目录下创建 res 文件夹（'src 的同级文件夹）

**2.**在文件->项目结构->工件中处理工件，按+，-

**3\. File->Project Structure->artifacts->output layout 选项卡**将最终 jar 的结构设置为“res”文件夹、应用程序根包文件夹（比如“com”）和“META-INF”文件夹。**用 yourapp/output 文件夹中的内容和1.**步骤“res”中提到的“res”内容填写它们。

**4.**之后在“项目结构”“模块”中右键单击“资源”并将其标记为资源。

**5.**像这样声明图像：

`ImageIcon loadingLcl = new ImageIcon(this.getClass().getResource("/res/32.gif"));` 在放入 JLabel 之前。

此外，最好在初始化应用程序时读取一次图像。否则有时它会抛出 IOException。因此，如果可能的话，在开始时处理它。就像他们在游戏制作中所做的那样。

# sql - Rails 控制器：更新操作未能执行 SQL 更新？

> ID：14643727
> 
> 赞同：0
> 
> 时间：2013-02-01T10:00:18.857
> 
> 标签：sql, ruby-on-rails, controller

在 Rails 应用程序中，我的用户可以在每个用户显示视图中创建注释。

从显示视图可以添加和编辑注释。编辑链接正确地路由到每个注释的编辑路径。单击保存以更新注释重定向回用户显示视图。

这是我的笔记控制器：

```
 def update
    @note = Note.find(params[:id])

    redirect_to user_path(@note.user)
  end 
```

但是，我正在尝试更新一个注释条目，并且在控制台中我看到它由于某种原因没有更新。BEGIN 和 COMMIT 之间应该有 UPDATE 步骤，但这里似乎没有。

```
Started PUT "/notes/2" for 127.0.0.1 at 2013-02-01 01:50:25 -0800
Processing by NotesController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Wr+urG+6QvsbPuFpVGUEEqc8QVYiu5q8j389YmOi6Zg=", "note"=>{"author"=>"MZ", "note"=>"Test"}, "id"=>"2"}
  Note Load (0.2ms)  SELECT "notes".* FROM "notes" WHERE "notes"."id" = $1 LIMIT 1  [["id", "2"]]
   (0.2ms)  BEGIN
   (0.1ms)  COMMIT
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Redirected to http://localhost:3000/users/1
Completed 302 Found in 37ms (ActiveRecord: 3.8ms) 
```

没有 UPDATE 步骤的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:05:23.243

您没有更新属性。您必须调用`update_attributes`并传递`params`要更新的。

```
def update
  @note = Note.find(params[:id])             #find the note
  if @note.update_attributes(params[:note])  #update the note
    redirect_to @note.user                   #if attributes updated redirect to @note.user
  else
    render :edit                             #if not, render the form
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:10:24.920

试试这个，你错过了 update_attributes。这是调用更新方法的正确方法。如果更新成功，您将收到一条闪烁消息。

```
def update
    @note = Note.find(params[:id])

    respond_to do |format|
      if @note.update_attributes(params[:note]) # you need to make sure about the :note
        format.html { redirect_to user_path(@note.user), notice: 'Notes was successfully updated.' }
      else
        format.html { render actino: "edit" }
      end
    end
end 
```

# c# - 如何生成 24 小时后过期的唯一令牌？

> ID：14643735
> 
> 赞同：49
> 
> 时间：2013-02-01T10:00:48.307
> 
> 标签：c#, asp.net, wcf, authentication, token

我有一个 WCF Webservice 来检查用户是否有效。

如果用户有效，我想生成一个 24 小时后过期的令牌。

```
public bool authenticateUserManual(string userName, string password,string language,string token)
{
    if (Membership.ValidateUser(userName,password))
    {
        //////////
        string token = ???? 
        //////////

        return true;
    }
    else 
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-02-01T10:34:11.267

有两种可能的方法；您可以创建一个唯一值并将其与创建时间一起存储在某个地方，例如在数据库中，或者您将创建时间放在令牌中，以便稍后对其进行解码并查看它的创建时间。

要创建唯一令牌：

```
string token = Convert.ToBase64String(Guid.NewGuid().ToByteArray()); 
```

创建包含时间戳的唯一令牌的基本示例：

```
byte[] time = BitConverter.GetBytes(DateTime.UtcNow.ToBinary());
byte[] key = Guid.NewGuid().ToByteArray();
string token = Convert.ToBase64String(time.Concat(key).ToArray()); 
```

要解码令牌以获取创建时间：

```
byte[] data = Convert.FromBase64String(token);
DateTime when = DateTime.FromBinary(BitConverter.ToInt64(data, 0));
if (when < DateTime.UtcNow.AddHours(-24)) {
  // too old
} 
```

注意：如果您需要带有时间戳的令牌是安全的，您需要对其进行加密。否则，用户可能会弄​​清楚它包含什么并创建一个错误的令牌。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2015-11-23T14:53:35.583

我喜欢 Guffa 的回答，由于我无法发表评论，我将在此处提供 Udil 的问题的答案。

我需要类似的东西，但我想在我的令牌中加入某些逻辑，我想：

1.  查看令牌的到期时间
2.  使用 guid 屏蔽验证（全局应用程序 guid 或用户 guid）
3.  查看令牌是否是为我创建它的目的而提供的（不重复使用..）
4.  查看我向其发送令牌的用户是否是我正在为其验证的用户

现在点 1-3 是固定长度的，所以很容易，这是我的代码：

这是我生成令牌的代码：

```
public string GenerateToken(string reason, MyUser user)
{
    byte[] _time     = BitConverter.GetBytes(DateTime.UtcNow.ToBinary());
    byte[] _key      = Guid.Parse(user.SecurityStamp).ToByteArray();
    byte[] _Id       = GetBytes(user.Id.ToString());
    byte[] _reason   = GetBytes(reason);
    byte[] data       = new byte[_time.Length + _key.Length + _reason.Length+_Id.Length];

    System.Buffer.BlockCopy(_time, 0, data, 0, _time.Length);
    System.Buffer.BlockCopy(_key , 0, data, _time.Length, _key.Length);
    System.Buffer.BlockCopy(_reason, 0, data, _time.Length + _key.Length, _reason.Length);
    System.Buffer.BlockCopy(_Id, 0, data, _time.Length + _key.Length + _reason.Length, _Id.Length);

    return Convert.ToBase64String(data.ToArray());
} 
```

这是我的代码，用于获取生成的令牌字符串并对其进行验证：

```
public TokenValidation ValidateToken(string reason, MyUser user, string token)
{
    var result = new TokenValidation();
    byte[] data     = Convert.FromBase64String(token);
    byte[] _time     = data.Take(8).ToArray();
    byte[] _key      = data.Skip(8).Take(16).ToArray();
    byte[] _reason   = data.Skip(24).Take(2).ToArray();
    byte[] _Id       = data.Skip(26).ToArray();

    DateTime when = DateTime.FromBinary(BitConverter.ToInt64(_time, 0));
    if (when < DateTime.UtcNow.AddHours(-24))
    {
        result.Errors.Add( TokenValidationStatus.Expired);
    }

    Guid gKey = new Guid(_key);
    if (gKey.ToString() != user.SecurityStamp)
    {
        result.Errors.Add(TokenValidationStatus.WrongGuid);
    }

    if (reason != GetString(_reason))
    {
        result.Errors.Add(TokenValidationStatus.WrongPurpose);
    }

    if (user.Id.ToString() != GetString(_Id))
    {
        result.Errors.Add(TokenValidationStatus.WrongUser);
    }

    return result;
}

private static string GetString(byte[] reason) => Encoding.ASCII.GetString(reason);

private static byte[] GetBytes(string reason) => Encoding.ASCII.GetBytes(reason); 
```

TokenValidation 类如下所示：

```
public class TokenValidation
{
    public bool Validated { get { return Errors.Count == 0; } }
    public readonly List<TokenValidationStatus> Errors = new List<TokenValidationStatus>();
}

public enum TokenValidationStatus
{
    Expired,
    WrongUser,
    WrongPurpose,
    WrongGuid
} 
```

现在我有一种简单的方法来验证令牌，无需将其保留在列表中 24 小时左右。这是我的好案例单元测试：

```
private const string ResetPasswordTokenPurpose = "RP";
private const string ConfirmEmailTokenPurpose  = "EC";//change here change bit length for reason  section (2 per char)

[TestMethod]
public void GenerateTokenTest()
{
    MyUser user         = CreateTestUser("name");
    user.Id             = 123;
    user.SecurityStamp  = Guid.NewGuid().ToString();
    var token   = sit.GenerateToken(ConfirmEmailTokenPurpose, user);
    var validation    = sit.ValidateToken(ConfirmEmailTokenPurpose, user, token);
    Assert.IsTrue(validation.Validated,"Token validated for user 123");
} 
```

可以轻松地为其他业务案例调整代码。

快乐编码

沃尔特

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T10:20:02.927

用于`Dictionary<string, DateTime>`存储带有时间戳的令牌：

```
static Dictionary<string, DateTime> dic = new Dictionary<string, DateTime>(); 
```

每当您创建新令牌时添加带有时间戳的令牌：

```
dic.Add("yourToken", DateTime.Now); 
```

有一个计时器正在运行以从 dic 中删除任何过期的令牌：

```
 timer = new Timer(1000*60); //assume run in 1 minute
 timer.Elapsed += timer_Elapsed;

 static void timer_Elapsed(object sender, ElapsedEventArgs e)
    {
        var expiredTokens = dic.Where(p => p.Value.AddDays(1) <= DateTime.Now)
                              .Select(p => p.Key);

        foreach (var key in expiredTokens)
            dic.Remove(key);
    } 
```

因此，当您验证令牌时，只需检查令牌是否存在于 dic 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T10:06:03.163

您需要在为第一次注册创建时存储令牌。当您从登录表中检索数据时，如果输入日期超过 1 天（24 小时），您需要将输入的日期与当前日期区分开来，您需要显示消息，例如您的令牌已过期。

要生成密钥，请参阅[此处](http://www.codeproject.com/Articles/14403/Generating-Unique-Keys-in-Net)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-19T20:15:38.160

我也有类似但略有不同的问题。我需要一个可以在 2 分钟内用在不同服务器上的令牌。ServerA 和 serverB 共享一个私钥。当然，在用户浏览器中，令牌是公开的。

[![在此处输入图像描述](../Images/e3be5f0a500573b81eb557cedf03ac6e.png)](https://i.stack.imgur.com/4X16N.png)

Web 服务器 A 创建一个包含日期时间的字符串。然后它对字符串进行哈希处理。浏览器中的用户使用令牌。当服务器 B 收到令牌时，会执行相同的哈希并比较结果。ServerA 和 serverB 运行 c# 代码。

问题相似但不一样，但也许代码无论如何都可以帮助某人......

```
public class TokenHelper
{

    private static byte[] GetHash(string inputString)
    {
        using (HashAlgorithm algorithm = MD5.Create())
            return algorithm.ComputeHash(Encoding.UTF8.GetBytes(inputString));
    }

    private static string GetHashString(string inputString)
    {
        StringBuilder sb = new StringBuilder();
        foreach (byte b in GetHash(inputString))
            sb.Append(b.ToString("X2"));

        return sb.ToString();
    }

    public static Guid GetTokenForGuest(EnumWebsiteName website, string privateKey)
    {            
        string datetime = DateTime.Now.ToString("dd/MM/yyyy hh:mm");
        var hashString = GetHashString($"{datetime}|{website}|{privateKey}");            
        return new Guid(hashString);
    }

    public static bool  CheckTokenForGuest(Guid token, EnumWebsiteName website, string privateKey)
    {
        string datetime = DateTime.Now.ToString("dd/MM/yyyy hh:mm");
        var hashString = GetHashString($"{datetime}|{website}|{privateKey}");
        var test1 = new Guid(hashString);
        if (test1.CompareTo(token)==0) {
            return true;
        }

        string datetime2 = DateTime.Now.AddMinutes(-1).ToString("dd/MM/yyyy hh:mm");
        var hashString2 = GetHashString($"{datetime2}|{website}|{privateKey}");
        var test2 = new Guid(hashString2);
        if (test2.CompareTo(token) == 0)
        {
            return true;
        }

        return false;
    }

} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-07-05T18:11:28.300

这样，令牌最多可以存在 24 小时。这是生成令牌的代码，有效期最长为 24 小时。我们使用此代码，但我没有编写它。

```
public static string GenerateToken()
{
    int month = DateTime.Now.Month;
    int day = DateTime.Now.Day;
    string token = ((day * 100 + month) * 700 + day * 13).ToString();
    return token;
} 
```

# php - 找不到类“XMLParser”

> ID：14643738
> 
> 赞同：1
> 
> 时间：2013-02-01T10:00:51.557
> 
> 标签：php, xml-parsing, runtime-error

我创建了一个名为 XMLParser 的类，它使用自动包含来包含，就像我正在使用的所有其他类一样。

当我尝试使用此类实例化对象时，标题中出现致命错误。

自动包含功能有效。更改类名使其工作，我也很肯定这在我设置它时一直在工作，否则依赖于这个类的单元测试永远不会通过。

是否存在可能与此冲突的内置 XMLParser 类？

当然，即使这不会有问题，因为我会收到声明错误，或者对象无论如何都会被实例化？

对此事的任何了解都会有帮助。至少可以说令人沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:27:56.300

有一个名为 XMLParser.php 的 PEAR 文件

该文件出现在我的类目录之前的 PHP 包含路径中。

当自动加载函数 requires_once XMLParser.php 时，它会找到该文件，该文件中没有定义 XMLParser 类。

这就是致命错误的根源。

为避免这种情况，可能应该命名他们的类。

为我感到羞耻，感谢您的所有反馈。

# php - mysql插入数据库没有值

> ID：14643746
> 
> 赞同：0
> 
> 时间：2013-02-01T10:01:21.903
> 
> 标签：php, mysql

我试图在表单提交上插入值，但没有任何结果在数据库中输入，甚至没有空值，

```
if(isset($_POST['signup'])) {  

    mysql_query("INSERT INTO user (fname, lname)
    VALUES ('Peter', 'Griffin')");
} 
```

我检查了是否有与数据库的连接并且它已连接。任何人 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:09:03.917

直接在查询浏览器或任何mysql编辑器中执行查询，检查是否插入。如果插入成功，就这样检查。

```
if(isset($_POST['signup'])) {  
    echo "Inside";
    exit;
    mysql_query("INSERT INTO user (fname, lname)
    VALUES ('Peter', 'Griffin')");
} 
```

如果它不显示**Inside**，那么问题出在`if(isset($_POST['signup']))`. 核实。

# google-app-engine - 使用测试数据初始化 Bigtable

> ID：14643748
> 
> 赞同：0
> 
> 时间：2013-02-01T10:01:30.790
> 
> 标签：google-app-engine, bigtable

我的应用程序有一个 Google App 引擎后端，它使用 BigTable 来实现它的持久性。我要运行一些功能测试，这些测试取决于数据库中预加载的现有测试数据。预加载此数据的最佳方法是什么，因为我希望每个测试都从已知状态开始。目前，每个测试都会清理数据库并调用一个加载测试数据的函数，但这不会很好地扩展，因为我打算进行 100 次测试，最终这些测试将依赖大量测试数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:43:40.147

通过管理控制台，您可以[备份和恢复数据存储](https://developers.google.com/appengine/docs/adminconsole/datastoreadmin#Backup_And_Restore)- 甚至从一个应用程序到另一个应用程序。您可以备份测试的初始状态，并在您想要通过测试的任何时候恢复该状态。

# java - Spring Request Mapping 调用一个函数来检查用户

> ID：14643749
> 
> 赞同：0
> 
> 时间：2013-02-01T10:01:30.420
> 
> 标签：java, spring, model-view-controller, request-mapping

我有不同的以\mobile 开头或包含\mobile 的映射。有没有办法捕捉所有这些映射？

我的映射是：

```
\mobile\login.mvc

\mobile\profile\details.mvc

\secure\mobile\profile\edit.mvc 
```

现在我希望对所有“\mobile”映射调用一个函数 oder 映射，然后调用映射。

背景：我想在每次通话时检查用户是否登录并在必要时给他签名。但是我不会在每次映射参数用户名和密码时都查询，而是在一个地方查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:17:19.407

如果您想在每个控制器中对用户进行身份验证，那么 Spring AOP 将是一个不错的选择。您可以编写单个身份验证方法并在使用 AOP 的控制器之前调用它。
这可能会有所帮助[http://tedone.typepad.com/blog/2011/05/using-aop-easily-with-aspectj-and-spring.html](http://tedone.typepad.com/blog/2011/05/using-aop-easily-with-aspectj-and-spring.html)

# c# - 在运行时在嵌入/链接资源之间添加/切换

> ID：14643754
> 
> 赞同：0
> 
> 时间：2013-02-01T10:01:54.243
> 
> 标签：c#, .net, visual-studio, properties

我`resources.resx`在我的 c# 代码中填充了一些字符串：

```
Text1,"Some Text" 
```

我可以在运行时调用它

```
Properties.Resources.Text1 
```

这导致

```
"Some Text" 
```

现在我想让 Text1 有一个不同的输出（例如另一种语言或其他东西），这样会`Properties.Resources.Text1`产生`"Different Text"`.

我怎样才能做到这一点？

EDIT1：我发现了[这一点](https://stackoverflow.com/questions/90697/how-to-create-and-use-resources-in-net)，但我正在寻找一种不同的资源文件方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:15:13.553

恐怕您必须为其他文化添加另一个资源文件。看看这个线程 [如何在 C# 中使用本地化](https://stackoverflow.com/questions/1142802/how-to-use-localization-in-c-sharp)

**参考评论：** 获取当前的文化信息并加载资源，如下所示：

```
Thread.CurrentThread.CurrentCulture.ClearCachedData();
CultureInfo currentCulture = Thread.CurrentThread.CurrentCulture;
if(currentCulture.Name == "en-US")
   Console.WriteLine(resources.Text1);
else if if(currentCulture.Name == "ja-JP")
   Console.WriteLine(resourcesJapan.Text1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:20:20.333

如果要使用不同的资源文件，可以使用 ResourceManager：

```
ResourceManager rm;
if (Configuration.Default.Culture == "en-US")
    rm = new ResourceManager(typeof(Resource1));
else
    // ...
String label = rm.GetString("Text1"); 
```

在用户设置中保存文化，添加配置文件并定义用户变量。

```
Configuration.Default.Culture= "en-US";
Configuration.Default.Save(); 
```

根据信息更新问题

# mysql - MySQL循环插入组合值

> ID：14643755
> 
> 赞同：1
> 
> 时间：2013-02-01T10:01:57.410
> 
> 标签：mysql, loops, combinations, insert-into

我有一个小问题，我想 INSERT INTO myTable (id_product, id_tag) 组合值

我知道方法是：

```
INSERT INTO myTable values (value1a, value1b),(value2a, value2b) 
```

但问题是我有 934 个产品和 5 个标签 = 4670 个组合。所以手动插入它需要很长时间！我知道 id 有什么产品：

```
SELECT id_product FROM prodTable 
```

那么任何人都可以指导我应该做什么（程序，功能 - 我以前使用过它，直到今天？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:07:55.530

您可以使用 CURSORS 或 LOOP。并将它们结合起来。

各有一个例子：

-环形

```
DECLARE y INT DEFAULT 2010;

cur_year_loop : LOOP
    IF y=2013 THEN
        LEAVE cur_year_loop;
    END IF;

    ...do things...

    SET y=y+1;
END LOOP cur_year_loop; 
```

-光标

```
DECLARE cur_percentages CURSOR FOR SELECT value FROM test_percentages;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done_perc = TRUE;
OPEN cur_percentages;
cur_percentages_loop : LOOP
    IF done_perc THEN
        CLOSE cur_percentages;
        LEAVE cur_percentages_loop;
    END IF;

    ...do things...
END LOOP cur_percentages_loop; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:22:37.793

我认为你需要一个笛卡尔连接：

```
insert into myTable
select id_product, id_tag
from products, tags 
```

SELECT 将选择所有产品 id，结合所有标签 id，并将行插入到 myTable 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:24:18.350

如果所有标签都应该出现在所有产品上，那就相当简单了（其中 1 到 5 是五个 tag_id）

```
INSERT INTO myTable (id_product, id_tag) SELECT id_product, 1 FROM prodTable;
INSERT INTO myTable (id_product, id_tag) SELECT id_product, 2 FROM prodTable;
INSERT INTO myTable (id_product, id_tag) SELECT id_product, 3 FROM prodTable;
INSERT INTO myTable (id_product, id_tag) SELECT id_product, 4 FROM prodTable;
INSERT INTO myTable (id_product, id_tag) SELECT id_product, 5 FROM prodTable; 
```

你可以在一个插入和一个联合中做到这一点，但这种方式可能是最清楚的。

[一个简单的 SQLfiddle](http://sqlfiddle.com/#!2/edbe8/1)。

当然，如果您在表格中有标签，@fthiella 的答案就更简单了。

# python - scipy.spatial.distance.squareform 的反函数

> ID：14643756
> 
> 赞同：3
> 
> 时间：2013-02-01T10:01:58.860
> 
> 标签：python, scipy

scipy.spatial.distance.squareform 是否有反函数？如果不是，那么编写它来处理巨大距离矩阵的最佳方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T13:44:09.243

根据文档，`squareform`是它自己的倒数：

[http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.squareform.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.distance.squareform.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:42:52.900

实际上，这个 lambda 非常有效：

```
In [1]: unsquareform = lambda a: a[numpy.nonzero(numpy.triu(a))] 
```

例如：

```
In [2]: scipy.spatial.distance.pdist(numpy.arange(12).reshape((4,3)))
Out[2]:
array([  5.19615242,  10.39230485,  15.58845727,   5.19615242,
        10.39230485,   5.19615242]) 
```

和

```
In [3]: unsquareform(scipy.spatial.distance.squareform(scipy.spatial.distance.pdist(numpy.arange(12).reshape((4,3)))))
Out[3]:
array([  5.19615242,  10.39230485,  15.58845727,   5.19615242,
        10.39230485,   5.19615242]) 
```

# javascript - 以编程方式创建手风琴的 Jquery-UI 的格式内容

> ID：14643757
> 
> 赞同：1
> 
> 时间：2013-02-01T10:01:59.163
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-accordion

我的应用程序从数据库中提取的数据以编程方式创建了一个手风琴（在另一个内）。我的问题是如何格式化所述数据，在文本中添加段落等 HTML：即使添加为变量，字段也会按字面意思打印。

```
$('#accordion2').append($('<h3>', {
    id: name,
    text: clientAddress,
    activate: function () {
        gev.trigger(marker, 'click');
    },
    mouseover: function () {
        gev.trigger(marker, 'click');
    },
    mouseout: function () {
        gev.trigger(marker, 'mouseout');
    },
}));

$('#accordion2').append($('<div>', {
    text: "Client Name: " + clientName + " Job Number: " + jobNo + " Property Type: " + propType
})).accordion('destroy').accordion({
    collapsible: true,
    heightStyle: "content"
}); 
```

提前感谢您的帮助，如果您对代码有任何疑问，请询问。

太古。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:32:57.150

您使用的附加错误。试试这个。

```
$('#accordion2').append("<div> Client Name: " + clientName + "<br/> Job Number: " + jobNo + " <br/>Property Type: " + propType + " </div>"})) 
```

代码在列表中的每个项目之间添加`br`标签，但显然您可以添加任何标记。

# php - 如何保存从 wysihtml5 生成的 HTML 或将其传递给 PHP 页面

> ID：14643758
> 
> 赞同：4
> 
> 时间：2013-02-01T10:01:59.217
> 
> 标签：php, twitter-bootstrap, wysihtml5

我正在使用[bootstrap-](http://jhollingworth.github.com/bootstrap-wysihtml5/) wysihtml5 在我的引导站点中实现 WYSIHTML 编辑器。但我不明白如何将 HTML 内容传递给 php 页面以便将内容保存在数据库中。虽然我已经为 textarea 使用了 ID（内容），但 php 页面没有获取数据。“Get”的 URL 在末尾显示“?_wysihtml5_mode=1”而不是“?content=...”

```
<form action="save.php" method="get">
   <textarea class="textarea" id="content" placeholder="Enter text ..."></textarea>
   <input type="submit" class="btn btn-primary" />
</form> 

<script>$('#content').wysihtml5(); </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:59:14.180

**编辑**：您需要将名称属性添加到您的文本区域，以便将其发布到您的 PHP。我完全忘记了这一点。所以忘记我所做的所有其他修改，只需在原始代码中对您的 textarea 执行此操作：

```
<textarea class="textarea" id="content" name="content" placeholder="Enter text ..."></textarea> 
```

您还应该通过 POST 请求发送值，因为在 URL 参数中发送 html 不是一个好主意。

*老答案：*

您还需要在提交表单时发布 html。有多种方法可以做到这一点，但作为一个例子，您可以添加一个隐藏的输入字段，您将在其中存储 html，然后再将其发送到 php。

首先，我对您的 html 进行了一些更改，现在表单是通过 POST 请求发送的，如果您想发送 HTML，这比通过 URL 参数更好：

```
<form id="myform" action="save.php" method="POST">
   <textarea class="textarea" id="content" placeholder="Enter text ..."></textarea>
   <input type="submit" class="btn btn-primary" />
   <input type="hidden" id="html" />
</form> 
```

添加 javascript 事件以在提交值之前更改隐藏字段值：

```
$("#myform").submit(function() {
   // Retrieve the HTML from the plugin
   var html = $('#content').val();
   // Put this in the hidden field
   $("#html").val(html);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:00:05.810

```
<script>
$('#content').wysihtml5();
$(document).ready(function() {
    $('.btn btn-primary').click(function() {
        var content = $('#content').html();
        $.ajax({
            url: 'update.php',
            type: 'POST',
            data: {
                content: content
            }
        });
    });
});
</script>

<form>
   <textarea class="textarea" id="content" placeholder="Enter text ..."></textarea>
   <input type="submit" class="btn btn-primary" />
</form> 
```

更新.php

```
<?php
DATABASE_CONNECTION

$GET_THE_CONTENT_HERE = $_POST[content];

INSERT TO DATABASE
?> 
```

# php - 使用 facebook graph api 在网页上发表评论

> ID：14643760
> 
> 赞同：2
> 
> 时间：2013-02-01T10:02:10.800
> 
> 标签：php, facebook-graph-api

关于 facebook graph api 的一个小问题。我一直在使用官方的[Facebook Graph API PHP SDK](https://github.com/facebook/facebook-php-sdk)。

我还在我的网页上包含了 facebook 社交评论插件小部件。是否可以使用 facebook 的 Graph api 在网页上发表评论？

用户将使用 facebook 登录到我的 Web 应用程序，然后他必须能够通过 API 在我的应用程序的网页上发布 facebook 评论。因此，小部件将显示所有直接发布在页面上的评论，以及通过 API 发布的评论。

到目前为止，我已经尝试过这个 AJAX 代码：

```
<?php 
$token = $facebook->getAccessToken(); 
?>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" 
type="text/javascript"></script>
<script type="text/javascript">
$.post('https://graph.facebook.com/comments/?ids=http://mywebsite.com/comments.php?id=123',{ name: 'John', message: 'Testing comments', 'method': 'POST', 'format': 'json', 'access_token': '<?php echo $token; ?>'},
function(data) {           
});
</script> 
```

但这是返回一个 OAUTH 异常：

```
{
   "error": {
      "message": "An unknown error has occurred.",
      "type": "OAuthException",
      "code": 1
   }
} 
```

我在设置登录 url 时请求足够的权限：

```
$loginUrl = $facebook->getLoginUrl(array(
               'scope' => 'email,publish_stream,publish_actions,read_stream,user_about_me,user_events,create_event'
            )); 
```

**注意：** 我在我的页面上包含了 facebook 小部件，使用以下代码：

```
<div class="fb-comments" data-href="http://www.mywebsite.com/comments.php?
id=<?php echo $_GET['id']; ?>" data-width="370" data-num-posts="5"></div> 
```

**脚本：**

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=xxxxxxxxxxxxxxx";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

  <div id='fb-root'></div>
    <script src='http://connect.facebook.net/en_US/all.js'></script>
    <!--<p><a onclick='postToFeed(); return false;'>Post to Feed</a></p>-->
    <p id='msg'></p>

    <script> 
      FB.init({appId: "xxxxxxxxxxxxxxx", status: true, cookie: true});

      function postToFeed() {

        // calling the API ...
        var obj = {
          method: 'feed',
          redirect_uri: 'http://www.mywebsite.com/comments.php?id=<?php echo $_GET['id']; ?>',
          link: 'https://developers.facebook.com/docs/reference/dialogs/',
          picture: 'http://fbrell.com/f8.jpg',
          name: 'Facebook Dialogs',
          caption: 'Reference Documentation',
          description: 'Using Dialogs to interact with users.'
        };

        function callback(response) {
          document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
        }
        FB.ui(obj, callback);
      }    
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:45:05.403

这不是发表评论的正确语法。至少缺少 postId：这里你如何通过 API (php sdk) 调用它

```
$facebook ->api('/'.$post_id.'/comments', 
 'post', 
   array(
      'message' => 'users comment',
   )
); 
```

您不能使用 JQuery $.post 来生成 APi 调用。使用 JQuery 调用 PHP 脚本，其中包含 API 调用。

# android - 如何计算android中某些操作的进度值

> ID：14643762
> 
> 赞同：1
> 
> 时间：2013-02-01T10:02:16.230
> 
> 标签：android

我正在执行读取 SD 卡文件的任务，并且我正在显示一个进度条，其中包含基于 SD 卡文件（如 Android 中的某些防病毒软件）的计算百分比。我不知道如何实现这个功能。我的 SD 卡读取文件代码如下所示：

```
File root = new File (Environment.getExternalStorageDirectory().getAbsolutePath());
scan(root); 
```

扫描功能码如下图：

```
 public void scan (File path) {

            for (File f : path.listFiles()) {
                if (f.isFile()) {
                   Toast.makeText(getApplicationContext(),f.getAbsoluteFile().toString(),Toast.LENGTH_SHORT).show();
                }
                else {

                }
            }
        } 
```

你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:04:56.803

我猜一个文件列表有一个长度。您可以在循环中使用此长度来计算到目前为止已完成文件数的百分比。也许是这样的：

```
File[] files = path.listFiles();
for (i=0; i<files.length; i++) {
    // Report i / files.length percent done
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:12:02.037

```
public void scan (final File path) {

         float progress = 0.0f;
         int count  = 0;
         for (File f : path.listFiles()) {
             if (f.isFile()) {
                Toast.makeText(getFragmentContext(),f.getAbsoluteFile().toString(),Toast.LENGTH_SHORT).show();
             }
             else {

             }
             count++;
             progress += ( (float)count / (float)path.listFiles().length ) * 100;
         }
     } 
```

希望这是你想要的。

# iphone - CLLocationmanager 中的 GPS 位置更新

> ID：14643765
> 
> 赞同：0
> 
> 时间：2013-02-01T10:02:27.850
> 
> 标签：iphone

我正在开发一个应用程序。我正在使用 CLLocation Manager 获取位置更新。我知道当我调用启动位置更新方法时 gps 已关闭，当我们调用停止位置更新时 gps 已关闭。但我想关闭gps，但我仍然想使用蜂窝塔或 wifi 获取位置更新。如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:43:13.683

您可以使用 的`desiredAccuracy`属性`CLLocationManager`来告诉系统位置需要有多准确。您无法控制 GPS 是否打开，但将其设置`desiredAccuracy`为较低的精度会消耗较少的电量。

从[CLLocationManager 类参考](https://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html "CLLocationManager 类参考")：

> 接收机尽最大努力达到要求的精度；但是，不能保证实际的准确性。
> 
> 您应该为此属性分配一个适合您的使用场景的值。换句话说，如果您只需要几公里范围内的当前位置，则不应该为精度指定 kCLLocationAccuracyBest。以更高的精度确定位置需要更多的时间和更多的力量。
> 
> 在请求高精度位置数据时，位置服务传递的初始事件可能没有您请求的准确性。定位服务尽快提供初始事件。然后，它会继续以您请求的准确性确定位置，并在数据可用时根据需要提供其他事件。

# java - 如何将 Eclipse Indigo 与 Java 通信 API 一起使用

> ID：14643767
> 
> 赞同：0
> 
> 时间：2013-02-01T10:02:36.200
> 
> 标签：java, serial-port

我正在使用 Eclipse 中的 Java 通信 API。这是我的示例程序，用于获取所有可用端口进行通信，但程序退出，因为`CommPortIdentifier.getPortIdentifiers()`不返回任何内容。`Enumeration enu_ports`为空并且程序退出。

我已经完成的步骤：

*   我已将我的智能希望者连接到主机。
*   将 win32com.dll 文件 system32 文件夹并添加到 eclipse 项目中
*   在eclipse项目中添加javax.comm.properties文件
*   将 com.jar 添加到构建路径中，我的系统是 32 位，操作系统是 windows 7

如果任何步骤不正确，请提供将 Eclipse Indigo 与 Java 通信 API 一起使用的步骤。

```
import java.util.Enumeration;

import javax.comm.CommPortIdentifier;

class GetAvailableComPorts {

    public static void getComPorts(){
        String     port_type;
        Enumeration  enu_ports  = CommPortIdentifier.getPortIdentifiers();

        while (enu_ports.hasMoreElements()) {
            CommPortIdentifier port_identifier = (CommPortIdentifier) enu_ports.nextElement();

            switch(port_identifier.getPortType()){
                case CommPortIdentifier.PORT_SERIAL:
                    port_type   =   "Serial";
                    break;
                case CommPortIdentifier.PORT_PARALLEL:
                    port_type   =   "Parallel";
                    break;

                default:
                    port_type   =   "Unknown";
                    break;
            }

            System.out.println("Port : "+port_identifier.getName() +" Port type : "+port_type);
        }
    }
    public static void main(String[] args) {
        getComPorts();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:19:14.810

这个问题肯定与 Eclipse 无关。你用的是什么串行库？好像不是RXTX。您是否尝试过替代库，例如[PureJavacomm](https://github.com/nyholku/purejavacomm)或[NrJavaSerial](http://code.google.com/p/nrjavaserial/)？这能解决你的问题吗？

# .net - 使用从 SQL 检索的数据创建气泡图

> ID：14643769
> 
> 赞同：0
> 
> 时间：2013-02-01T10:02:38.790
> 
> 标签：.net, teechart

我正在创建一个带有气泡系列的 TeeChart，我需要使用 SQL 数据库中的数据填充该系列。我正在编写以下代码来执行此操作。

```
DataSet dsPoolPivot = new DataSet();
//Fill the dataset with data from a stored procedure
Steema.TeeChart.Styles.Bubble Bubble1 = new Steema.TeeChart.Styles.Bubble(WebChart1.Chart);
Bubble1.XValues.DataMember = dsPoolPivot.Tables[0].Columns["PaymentAmount"].ToString();
Bubble1.YValues.DataMember = dsPoolPivot.Tables[0].Columns["AllocationAmount"].ToString();
Bubble1.LabelMember = dsPoolPivot.Tables[0].Columns["Product_Desc"].ToString();
Bubble1.DataSource = dsPoolPivot.Tables[0]; 
```

除此之外，我在数据集中还有一个“ContingencyAmount”参数，我需要将其设置为气泡图的大小参数，并且还想设置图表中气泡的透明度。

类似的代码适用于条形图，但如果使用此代码，则不会生成气泡系列。

关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T13:34:43.500

当您使用 Bubble Series 时，您必须添加的参数是 XValues、YValues 和 Radius，如果您不指定其中一个值，则图表绘制不正确。我建议你，在你的 dataSource 中添加一列，指示 Bubble 的半径，并使用与下一个类似的代码分配它：

```
Bubble1.RadiusValues.DataMember= dsPoolPivot.Tables[0].Columns["Radius"].ToString(); 
```

您能否告诉我们之前的建议是否可以帮助您解决问题？

谢谢，

# php - Mysql Alias 中的自定义数组索引

> ID：14643770
> 
> 赞同：0
> 
> 时间：2013-02-01T10:02:39.740
> 
> 标签：php, mysql

我想知道是否可以将 Mysql 查询的记录列出到自定义数组中，就像我做的那样

```
SELECT CAT.catgryname,count(JB.knifeid) AS total 
FROM jbs AS JB 
LEFT JOIN krgstrs AS KR ON KR.id = JB.knfid 
LEFT JOIN accnts AS ACC ON ACC.job_id = JB.id 
LEFT JOIN catgor AS CAT ON CAT.id = KR.subctid
WHERE JB.usrid =xxx  
GROUP BY CAT.catgryname 
```

它给了我

```
[0] => Array
        (
            [CAT] => Array
                (
                    [categoryname] => Fridge Magnet
                )

            [0] => Array
                (
                    [total] => 22
                    [MNTH] => Jan
                )

        ) 
```

我想为嵌套在里面的第二个数组使用自定义索引而不是 0

```
[0] => Array
        (
            [CAT] => Array
                (
                    [categoryname] => Fridge Magnet
                )

            [DET] => Array
                (
                    [total] => 22
                    [MNTH] => Jan
                )

        ) 
```

注意这里的 DET 而不是 0。

我试过

```
SELECT CAT.catname,count(cat.id) as DET.total 
```

但它会引发错误，因为我认为它将 DET 解释为此处的表格。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:30:38.887

我不会在 DB 端这样做。但是我不知道你如何获得数组（使用`mysqli`或`mysql`PHP 扩展）。无论如何，正如评论中所指出的，只需在 PHP 端执行此操作即可。

尝试使用这个（`$results`是你所描述的数组 - 带有索引`CAT`和 `0`）

```
$newArray = array();
foreach($results as $result) {
    $newArray[] = array(
        'CAT' => array(
            'categoryname' => $result["CAT"]["categoryname"]
        ),
        'DET' => array(
            'total' => $result[0]["total"],
            'MNTH' => $result[0]["MNTH"]
        )
    );
} 
```

你去吧`$newArray`

# java - 在 JAXWS Web 服务中使用 SAML 安全性

> ID：14643772
> 
> 赞同：2
> 
> 时间：2013-02-01T10:02:43.107
> 
> 标签：java, web-services, soap, saml, saml-2.0

我目前正在使用我的 SOAP Web 服务的基本 HTTP 身份验证。

我想使用 SAML 安全令牌进行身份验证和授权。

可以分享一些学习的指针。

谢谢。

# qt - 为什么 QProcess 信号 readyReadStandardOutput() 发出两次？

> ID：14643773
> 
> 赞同：3
> 
> 时间：2013-02-01T10:02:43.063
> 
> 标签：qt, signals, qprocess

我使用 QProcess 并将它的 readyReadStandardOutput 连接到插槽。但是在启动插槽后执行两次。请告诉我这是为什么？

```
{
    myProcess = new QProcess(parent);
    myProcess->start("mayabatch.exe -file "+scene);
    connect(myProcess, SIGNAL(readyReadStandardOutput()), this, SLOT(readOutput()));
}

void MainWindow::readOutput()
{
    qDebug()<<"Read";
    QByteArray outData = myProcess->readAllStandardOutput();
    qDebug()<<QString(outData);
} 
```

输出：

```
Read 
"File read in 0 seconds.
" 
Read 
"cacheFi" 
Read 
"le -attachFile -fileName "nClothShape1" -directory ... 
```

最后一根弦断了。“阅读”出现在单词之间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T10:18:41.860

从文档`QProcess::readyReadStandardOutput()`

> 当进程通过其标准输出通道 (stdout) 提供新数据时，会发出此信号。无论当前读取通道如何，都会发出它。

槽执行不止一次，原因很简单，即底层进程以单独和随机的方式刷新输出。你不应该关心这个，因为它取决于你无法控制的事情。

如果你想保存整个输出你应该做

```
void MainWindow::readOutput(){
   bigbuffer.append(myProcess->readAllStandardOutput();)
} 
```

如果你想逐行阅读，那么

```
void MainWindow::readOutput(){
   while(myProcess.canReadLine()){
       qDebug() << myProcess.readLine();
  }
} 
```

第二次调用会将数据留在进程缓冲区中，这样您就不会像`cacheFi`.

# android - 在这种情况下如何制作 CheckBox Click 事件

> ID：14643774
> 
> 赞同：1
> 
> 时间：2013-02-01T10:02:48.910
> 
> 标签：android, checkbox

我有针对特定情况的动态 MAde `CheckBox`，我想使用`CheckBox.OnCheckChanged` But it Showig me 错误，您可以在以下情况下使用 fthis`RadioGroup`

```
if(sQuestionId.toString()=="518" || "518".equals(sQuestionId.toString()){

                    llCheckBoxQuestion=new LinearLayout(this);
                    llCheckBoxQuestion.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
                    llCheckBoxQuestion.setOrientation(android.widget.LinearLayout.HORIZONTAL);

                    cb=new CheckBox(this);
                    cb.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
                    cb.setId(idCheckBox2);

                    String sQuestion=ele.getText(0);
                    tvQuestion=new TextView(this);
                    tvQuestion.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));

    tvQuestion.setText(sQuestion.replace("nbsp;","").replace("&amp;", "").replace("&gt;", "").replace("&lt;", "").replace("BR", "\n"));
                    //  tvQuestion.setText(sQuestion.replace("&amp;"," "));
                        tvQuestion.setTextColor(Color.WHITE);
                        tvQuestion.setTextSize(16);
                        tvQuestion.setGravity(Gravity.TOP);

                        llCheckBoxQuestion.addView(cb);
                        llCheckBoxQuestion.addView(tvQuestion);

                        ll.addView(tvTitle);
                        //ll.addView(tv);
                        ll.addView(llChild);
                      //ll.addView(tvQuestion);
                        ll.addView(llCheckBoxQuestion);

                        } 
```

我已将其用于 CheckBox Changed 事件

```
cb.setOnCheckedChangeListener(new OnCheckedChangeListener(){

            @Override
            public void onCheckedChanged(CompoundButton arg0,boolean arg1) {
                if(arg0.isChecked()){
                    fnCheckChanged(t1.getText().toString(),t3.getText().toString(),arg1,arg0);  
                }

            }
        }); 
```

错误 ：

```
The method setOnCheckedChangeListener(CompoundButton.OnCheckedChangeListener) in the type CompoundButton is not applicable for the arguments (new RadioGroup.OnCheckedChangeListener(){}) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:35:03.237

在 setOnCheckedChangeListener() 中，您需要将匿名类作为 CompoundButton.OnCheckedChangeListener()

# c++ - cpp 中的 socket connect(..) 函数只是挂起并且从不返回任何内容，但第二个请求成功

> ID：14643778
> 
> 赞同：1
> 
> 时间：2013-02-01T10:03:01.597
> 
> 标签：c++, connect

connect(..) 函数只是挂起并且永远不会返回错误/成功。因此，客户端正在等待很长时间才能建立连接。有什么方法可以至少为 connect() 函数设置超时或让它返回一些东西。

```
struct sockaddr_in server_in;
        server_in.sin_port = htons(port);
        server_in.sin_family = AF_INET;
        server_in.sin_addr.s_addr = resolveName(host);
        if(server_in.sin_addr.s_addr == 0) {
            log("Failed to resolve the host name %s\n"), host))
            return FAILURE;
        }
        // Create a socket of type stream
        int socketNumber = socket(AF_INET, SOCK_STREAM, 0);
        if (socketNumber < 0) {
            log("Failed creating socket"); 
            return FAILURE;
        }

        int retriesLeft = 3;
        bool connected = false;
        {
            string totalConnectTimeMsg = "Total time taken to connect to printer ";
            totalConnectTimeMsg += host;
            EggTimer totalConnectTime (0,0, totalConnectTimeMsg.c_str() ,0, 0); 
            while (retriesLeft > 0 && !connected) {
                // Set up a connection with the server.
                if (connect(socketNumber, (struct sockaddr *) &server_in, sizeof(server_in)) < 0) {
                    log("Failed conneting to the server(printer)\n"); 

                    retriesLeft--;
                    log("[%s:%u] sleeping for %d microseconds", __FUNCTION__, __LINE__, 5000000);
                    usleep(5000000);
                } else {
                    connected = true;
                }
            }
        } 
```

# php - 使 URL 区分大小写

> ID：14643779
> 
> 赞同：1
> 
> 时间：2013-02-01T10:03:02.913
> 
> 标签：php, apache, url

有人可以帮我解决这个问题。

我在带有 Apache 的 Linux 服务器上有一个网站。我们的客户希望网站中使用的 URL 应该区分大小写

IE。如果链接是[http://www.example.com/Product-Roadmap](http://www.example.com/Product-Roadmap)如果写成[http://www.example.com/product-roadmap](http://www.example.com/product-roadmap)，它应该给出 404 page not found

据我所知，linux 服务器中的链接区分大小写，但在我们的服务器中则不区分大小写。我应该怎么做才能使它们区分大小写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:07:24.570

URL 本身不能区分大小写（不区分大小写），而是它们的解释器。这意味着您需要更改它们在服务器端应用程序中的解释方式，并且由于我们不知道它是什么，因此我无法提供更多详细信息。

# c# - System.SecurityException 错误

> ID：14643780
> 
> 赞同：3
> 
> 时间：2013-02-01T10:03:09.190
> 
> 标签：c#, event-log, system.diagnostics

当我编译以下代码时，它将错误显示为 system.securityexception 错误。

```
using System;    
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;
using System.Threading;
namespace eventlog
{
   class MySample{

public static void Main(){

   if(!EventLog.SourceExists("MySource"))
    {            
        EventLog.CreateEventSource("MySource", "MyNewLog");
        Console.WriteLine("CreatedEventSource");
        Console.WriteLine("Exiting, execute the application a second time to use the source.");
        return;
    }        EventLog myLog = new EventLog();
    myLog.Source = "MySource";
   myLog.WriteEntry("Writing to event log.");

} 
```

} }

如何修复此错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:09:55.680

我认为您必须具有创建新事件日志的管理员权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T10:40:19.920

阅读这篇文章：http: [//msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.aspx)

这就是为什么每个人都说不要模拟写入事件日志的原因。您必须将用户或用户组放入本地管理员组，不建议这样做。服务用户可以拥有此特权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-21T08:04:05.560

更明确地说，右键单击应用程序（exe）并选择“以管理员身份运行”

# sql - 替换为 Sql（并非所有行都只是其中的特殊字母）

> ID：14643784
> 
> 赞同：1
> 
> 时间：2013-02-01T10:03:26.430
> 
> 标签：sql, replace

我是 SQL 的初学者。我总是使用`update`,`set`和`where`命令将值替换为其他值。例如：

`update _Items SET CodeName = 'ITEM_07_CH' where CodeName = 'ITEM_08_CH'`.

如果我只想像使用记事本++（ctrl + H）一样将小写字母替换为列怎么办？例如，找到 ( `_08_`) 并将其替换为 ( `_07_`)。我如何在 SQL 中执行此操作？

请注意，我的表中有大约 2000 个值，我无法一一进行。我只想在整个专栏中替换这封信。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:21:10.203

您可以执行以下操作：

```
update _Items SET CodeName = REPLACE(CodeName,'_08_','_07_') where CodeName like 'ITEM_??_CH' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:17:26.863

例如，在 MySQL（以及大多数 RDBMS）中，您可以使用[REPLACE](http://dev.mysql.com/doc/refman/5.0/en/replace.html)函数。

```
update _Items SET CodeName = REPLACE(CodeName,'_08_','_07_') 
where CodeName LIKE '%_08_%' 
```

# performance - 如何提高 perl 脚本的性能？

> ID：14643785
> 
> 赞同：1
> 
> 时间：2013-02-01T10:03:40.120
> 
> 标签：performance, perl, parallel-processing

我正在运行 ucm2.pl 脚本来扫描一个巨大的目录结构（目录是映射到本地的网络驱动器）。我有两个 perl 脚本 ucm1.pl 和 ucm2.pl。我正在为不同的参数并行运行 ucm2.pl，它是通过 ucm1.pl 调用的。

ucm1.pl -

```
 #!/usr/bin/perl
    use strict; 
    use warnings;
    use Parallel::ForkManager;

    my $filename ="intfSplitList.txt"; #(this will have list of all the input files. eg intfSplit_0....intfSplit_50)
     my $lines;
     my $buffer;
        open(FILE, $filename) or die "Can't open `$filename': $!";
        while (<FILE>) {
            $lines = $.;
        }
        close FILE;
    print "The number of lines in $filename is $lines \n";

    my $pm = Parallel::ForkManager->new($lines); #(it will set the no. of parallel processes)

    open (my $fh, '<', "intfSplitList.txt") or die $!;
    while (my $data = <$fh>) {
      chomp $data;

      my $pid = $pm->start and next;

     system ("perl ucm2.pl -iinput.txt -f$data");  
#(call the ucm2.pl) #(input.txt file will have search keyword and $data will have intfSplit_*.txt files)

      $pm->finish; # Terminates the child process
    } 
```

ucm2.pl 代码-

```
#!/usr/bin/perl
use strict;
use warnings;  
use File::Find;
use Getopt::Std;
#getting the input parameters
getopts('i:f:');

our($opt_i, $opt_f);
my $searchKeyword     = $opt_i;                               #Search keyword file.
my $intfSplit         = $opt_f;                               #split file
my $path              = "Z:/aims/";                           #source directory
my $searchString;                                             #search keyword

open FH, ">log.txt";                                          #open the log file to write

print FH "$intfSplit ". "started at ".(localtime)."\n";       #write the log file

open (FILE,$intfSplit);                                       #open the split file to read

while(<FILE>){

   my $intf= $_;                                             #setting the interface to intf
   chomp($intf);
   my $dir = $path.$intf;
   chomp($dir);
   print "$dir \n";                                              
   open(INP,$searchKeyword);                         #open the search keyword file to read

   while (<INP>){      

   $searchString =$_;                           #setting the search keyword to searchString
   chomp($searchString);
   print "$searchString \n";
   open my $out, ">", "vob$intfSplit.txt" or die $!; #open the vobintfSplit_* file to write

#calling subroutine printFile to find and print the path of element
find(\&printFile,$dir);                                       

#the subroutine will search for the keyword and print the path if keyword is exist in file.
sub printFile {
   my $element = $_;

   if(-f $element && $element =~ /\.*$/){ 

      open my $in, "<", $element or die $!;
      while(<$in>) {
         if (/\Q$searchString\E/) {
            my $last_update_time = (stat($element))[9];
            my $timestamp  = localtime($last_update_time);
            print $out "$File::Find::name". "     $timestamp". "     $searchString\n";
            last;
          }
        }
      }
    }
  }
}
print FH "$intfSplit ". "ended at ".(localtime)."\n";         #write the log file 
```

一切都运行良好，但对于单个关键字搜索也运行了很长时间。谁能建议一些更好的方法来提高性能。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:50:56.303

运行多个 Perl 实例会增加很多不必要的开销。你有没有看过[我对你之前的问题的回答](https://stackoverflow.com/a/14586742/1919238)，它建议改变这个？

同样正如我之前提到的，您在这里有一些不必要的重复：没有理由多次打开和处理您的搜索关键字文件。您可以制作一个打开关键字文件并将关键字放入数组的子程序。然后将这些关键字传递给另一个进行搜索的子。

通过一次搜索所有关键字，您可以更快地搜索多个关键字。做这样的事情来获取你的关键字：

```
my @keywords = map {chomp;$_} <$fh>;
my $regex = "(" . join('|', map {quotemeta} @keywords) . ")"; 
```

现在你有一个像这样的正则表达式：`(\Qkeyword1\E|\Qkeyword2\E)`. 您只需搜索一次文件，如果您想查看匹配的关键字，只需检查`$1`. 这不会加快单个关键字的速度，但搜索多个关键字几乎与搜索单个关键字一样快。

但是，最终，如果您在网络上搜索一个巨大的目录结构，那么您可以加快速度可能会受到限制。

**更新：**纠正了咀嚼。谢谢阿蒙。

# java - 运行弹簧安全

> ID：14643786
> 
> 赞同：0
> 
> 时间：2013-02-01T10:03:41.983
> 
> 标签：java, spring

我的第一篇文章是在这里[Spring security。不能自动运行](https://stackoverflow.com/questions/14633929/spring-security-cant-run-automaticly)。我的春季安全工作不好。我添加了redirect.jsp `<%response.sendRedirect("login.do");%>`，一切正常，但我可以随时进入`http://localhost:8081/test/index.do`，而且我没有使用登录页面。我的代码有什么问题？请帮帮我。

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/applicationContext.xml
            /WEB-INF/spring-security.xml 
        </param-value>      
    </context-param>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>        

    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>redirect.jsp</welcome-file>
    </welcome-file-list>   

</web-app> 
```

弹簧安全：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:security="http://www.springframework.org/schema/security"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">

    <security:http auto-config="true">
    <security:http-basic/>
        <security:intercept-url pattern="/welcome.do" access="ROLE_USER" />  
    <!--     <intercept-url pattern="/login*" access="isAnonymous()"/>  -->

        <security:form-login login-page="/login.do" default-target-url="/welcome.do"
            authentication-failure-url="/loginfailed.do" />
        <security:logout logout-success-url="/login.do" />
    </security:http>

    <security:authentication-manager>
       <security:authentication-provider>
        <jdbc-user-service data-source-ref="dataSource"

           users-by-username-query="
              select username,password, enabled 
              from users where username=?" 

           authorities-by-username-query="
              select u.username, ur.authority from users u, user_roles ur 
              where u.user_id = ur.user_id and u.username =?  " 

        />
       </security:authentication-provider>
    </security:authentication-manager>

</beans:beans> 
```

调度程序-servlet：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:tx="http://www.springframework.org/schema/tx"                                 
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd 
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

<!--  <bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" />    -->

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/WEB-INF/pages/</value>          
        </property>
        <property name="suffix">
            <value>.jsp</value>
        </property>
    </bean>

    <bean id="urlMapping"
        class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">

        <property name="urlMap">
            <map>
                <entry key="/index.do"> <ref bean="index" /></entry>      
                <entry key="/registration.do"> <ref bean="registration" /></entry>
                <entry key="/usertestlist.do"> <ref bean="usertest" /></entry>    
                <entry key="/showContacts.do"> <ref bean="contact" /></entry>
             <!--       <entry key="/add.html"> <ref bean="contact" /></entry>  --> 
                <entry key="/saveContact.do"> <ref bean="contact" /></entry>
                <entry key="/updateContact.do"> <ref bean="contact" /></entry>                    
                <entry key="/deleteContact.do"> <ref bean="contact" /></entry> 
                <entry key="/searchContacts.do"> <ref bean="contact" /></entry>
                <entry key="/login.do"> <ref bean="login" /></entry>
                <entry key="/loginfailed.do"> <ref bean="login" /></entry>
                <entry key="/logout.do"> <ref bean="login" /></entry>             
                <entry key="/welcome.do"> <ref bean="login" /></entry>       
                <!--    <entry key="/delete/*.html"> <ref bean="contact" /></entry>      -->                
            </map>
        </property>
    </bean>

    <bean id="index" class="pl.ivmx.web.IndexController"/>      

        <bean id="registrationValidator" class="pl.ivmx.validation.RegistrationValidator" />  
        <bean id="registration" class="pl.ivmx.web.RegistrationFormController" >                 
            <property name="commandName"><value>userTest</value></property> 
            <property name="commandClass"><value>pl.ivmx.model.UserTest</value></property> 
            <property name="validator"><ref local="registrationValidator"/></property>  
            <property name="formView"><value>registration</value></property> 
            <property name="successView"><value>registrationsuccess</value></property> 
            <property name="userTestDao"><ref bean="userTestDao"/></property>               
        </bean>     

        <bean id="usertest" class="pl.ivmx.web.UserTestController">                  
             <property name="userTestDao"><ref bean="userTestDao"/></property>          
        </bean>      

    <context:component-scan base-package="pl.ivmx" />

    <bean id="contact" class="pl.ivmx.contact.controller.ContactController"/>
    <bean id="login" class="pl.ivmx.service.servlet.LoginController"/>   

    <bean id="contactFormValidator" class="pl.ivmx.contact.validator.ContactFormValidator"/>

  <!--      <mvc:annotation-driven/>    --> 

</beans> 
```

应用程序上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:security="http://www.springframework.org/schema/security"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/security
        http://www.springframework.org/schema/security/spring-security-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
        http://www.springframework.org/schema/aop 
        http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
        <property name="defaultEncoding" value="UTF-8" />
    </bean> 

    <import resource="commonContext.xml" />

    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="${jdbc.driverClassName}" />
        <property name="url" value="${jdbc.url}" />
        <property name="username" value="${jdbc.username}" />
        <property name="password" value="${jdbc.password}" />
    </bean>

    <bean id="userTestDao" class="pl.ivmx.dao.impl.UserTestDaoImpl">
    <!--     <property name="dataSource" ref="dataSource" />   -->
        <property name="sessionFactory" ref="sessionFactory" />             
    </bean>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean" >  
    <!--    class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean"> -->
        <property name="dataSource" ref="dataSource" />                 
         <property name="configLocation" value="META-INF/hibernate.cfg.xml" />    
        <property name="configurationClass">
            <value>org.hibernate.cfg.AnnotationConfiguration</value>
        </property>
    <!--    <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>      
            </props>
        </property>         
        <property name="annotatedClasses">
            <list>
                <value>pl.ivmx.model.UserTest</value>
            </list>
        </property>    -->     
    </bean> 

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>  

    <context:annotation-config />    
    <tx:annotation-driven />

    <bean id="contactService" class="pl.ivmx.contact.service.ContactServiceImpl" />

    <bean id="contactDAO" class="pl.ivmx.contact.dao.ContactDAOImpl"/>

</beans> 
```

重定向.jsp：

```
<%
response.sendRedirect("login.do");
%> 
```

登录.jsp：

```
<%@ include file="header.jsp"%>

<div id="menu"></div>

<div id="subMenu"></div>

<div id="main">

    <c:if test="${not empty error}">
        <div class="errorblock">
            Your login attempt was not successful, try again.<br /> Caused :
            ${sessionScope["SPRING_SECURITY_LAST_EXCEPTION"].message}
        </div>
    </c:if>
             <!--    <form class="jqtransform" id="loginForm" action='/test/j_spring_security_check' method="POST">     -->
    <form name='f' action="<c:url value='j_spring_security_check' />"
        method='POST'>

        <table>
            <tr>
                <td>User:</td>
                <td><input type='text' name='j_username' value=''>
                </td>
            </tr>
            <tr>
                <td>Password:</td>
                <td><input type='password' name='j_password' />
                </td>
            </tr>
            <tr>
                <td colspan='2'><input name="submit" type="submit"
                    value="submit" />
                </td>
            </tr>
            <tr>
                <td colspan='2'><input name="reset" type="reset" />
                </td>
            </tr>
        </table>

    </form>

</div>

<%@ include file="footer.jsp"%> 
```

index.jsp：

```
<%@ include file="header.jsp"%>

<div id="menu">
    <div id="subMenu">
        <div class="menuDiv">Kliknij</div>
        <ul>
            <li><a href="registration.do">REJESTRUJ</a></li>
            <li><a href="usertestlist.do">lista uzytkownikow</a></li>
            <li><a href="showContacts.do">contact</a></li>
        </ul>
    </div>
</div>

<div id="main">

</div>

<%@ include file="footer.jsp"%> 
```

IndexController：包pl.ivmx.web；

```
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class IndexController {

    @RequestMapping(value = "/index")
    public ModelAndView index(){
    ModelAndView mav = new ModelAndView("index");

    return mav;
    } 
```

登录控制器：

```
package pl.ivmx.service.servlet;

import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.core.userdetails.User;
import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.multiaction.MultiActionController;

import pl.ivmx.contact.form.Contact;

@Controller
public class LoginController  {

//  public String login(HttpServletRequest request, HttpServletResponse response) {
//      return "login";
//  }

//  @RequestMapping(value="/index", method = RequestMethod.GET)
//  public String printWelcome(ModelMap model) {
// 
//      User user = (User)SecurityContextHolder.getContext().getAuthentication().getPrincipal();
//      String name = user.getUsername();       
//      model.addAttribute("username", name);
//      model.addAttribute("message", "Spring Security login + database example");
//      return "index";
//  }

    @RequestMapping(value="/welcome.do", method = RequestMethod.GET)
    public String printWelcome(Map<String, Object> map) {
        User user = (User)SecurityContextHolder.getContext().getAuthentication().getPrincipal();
        String name = user.getUsername();       
        map.put("username", name);      
        return "index";
    }

    @RequestMapping(value="/login.do", method = RequestMethod.GET)
    public String login(ModelMap model) {
        return "login"; 
    }

    @RequestMapping(value="/loginfailed.do", method = RequestMethod.GET)
    public String loginerror(ModelMap model) { 
        model.addAttribute("error", "true");
        return "login"; 
    }

    @RequestMapping(value="/logout.do", method = RequestMethod.GET)
    public String logout(ModelMap model) { 
        return "login"; 
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:25:39.600

快速浏览告诉我，请求`index.do`不是要求您登录，因为您没有要求它。事实上，您似乎需要 auth 的唯一 URL 是`welcome.do`;

```
<security:http auto-config="true">
  <security:http-basic/>
  <security:intercept-url pattern="/welcome.do" access="ROLE_USER" />  
  <security:form-login login-page="/login.do" default-target-url="/welcome.do"
        authentication-failure-url="/loginfailed.do" />
  <security:logout logout-success-url="/login.do" />
</security:http> 
```

你基本上有两个选择；

**默认要求对所有 URL 进行身份验证，然后手动指定那些不需要**

```
<security:http auto-config="true">
  <security:http-basic/>
  <security:intercept-url pattern="/css/**" filters="none"/>
  <security:intercept-url pattern="/img/**" filters="none"/>
  <security:intercept-url pattern="/jscript/**" filters="none"/>
  <security:intercept-url pattern="/login.do" filters="none"/>
  <security:intercept-url pattern="/loginfailed.do" filters="none"/>
  <security:intercept-url pattern="/**" access="ROLE_USER"/>
  <security:form-login login-page="/login.do" default-target-url="/welcome.do"
        authentication-failure-url="/loginfailed.do" />
  <security:logout logout-success-url="/login.do" />
</security:http> 
```

请注意，您必须告诉 spring css/img/script 资源不需要登录，登录页面也不需要。

**默认为不需要对任何 URL 进行身份验证，然后手动指定那些需要身份验证的 URL**

```
<security:http auto-config="true">
  <security:http-basic/>
  <security:intercept-url pattern="/welcome.do" access="ROLE_USER" />  
  <security:intercept-url pattern="/index.do" access="ROLE_USER" />  
  <security:form-login login-page="/login.do" default-target-url="/welcome.do"
        authentication-failure-url="/loginfailed.do" />
  <security:logout logout-success-url="/login.do" />
</security:http> 
```

请注意，您必须指定需要身份验证的*每个URL。*这可能是一个痛苦的维护。

# c# - 向下和向上箭头键不滚动 DataGridView 中的当前单元格

> ID：14643788
> 
> 赞同：1
> 
> 时间：2013-02-01T10:03:45.823
> 
> 标签：c#, winforms

我正在开发一个`windows form`包含两个控件`Textbox`和`Datagridview`.

现在，当我第一次打开表单时，焦点应该在文本框上，如果我输入一些内容，它应该附加在文本框中。

如果我按下`UP/Down arrow key`焦点应该在`DataGridview`并且`Highlight`应该移动到下一行。

但问题是它只将焦点设置为`gridview`但不选择下一行。它滚动`down/UP on next key press`。如果焦点在`GridView`and上也是一样的`if I start typing alphabets it should be appended to TextBox text`，但在这里它也只将焦点设置为`textbox`and 在另一个按键上它开始在其中输入文本。

如何实施？

我正在使用的代码是：

```
 if (e.KeyCode== Keys.Down)
            {
                this.DgAppDetails.Focus();
                int index = DgAppDetails.CurrentCell.RowIndex;
                if (index != DgAppDetails.Rows.Count - 1)
                {
                    if (i == 0)
                    {
                        DgAppDetails.CurrentCell = DgAppDetails.Rows[index+1].Cells[0];
                        i++;
                    }
                }
            }

            else if(e.KeyCode==Keys.Up)
            {
                this.DgAppDetails.Focus();
                int index = DgAppDetails.CurrentCell.RowIndex;
                if (index != 0)
                {
                    if (i == 0)
                    {
                      DgAppDetails.CurrentCell = DgAppDetails.Rows[index - 1].Cells[0];
                        i++;
                    }
                }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:54:27.790

您面临的问题是因为您正在更改`CurrentCell`，而**不是**`SelectedCells`

尝试这个：

```
DgAppDetails.SelectedCells.Clear();
DgAppDetails.SelectedCells.Insert(DgAppDetails.CurrentCell); 
```

# alfresco - 在 alfresco 4.2c 共享中显示显示时间计算字段

> ID：14643789
> 
> 赞同：0
> 
> 时间：2013-02-01T10:03:45.543
> 
> 标签：alfresco, alfresco-share

对于自定义模型类型，我需要在共享界面上显示一些显示时间计算字段。有没有办法在共享中显示信息而不将其链接到支持模型中的字段？

我尝试在字段可见性/外观共享配置中创建一个既空又填充 id 的字段，但两者似乎在渲染时都被忽略了。或者是将自定义模板添加到另一个字段/表单/集的唯一方法，只是为了能够添加我需要的额外字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T00:57:40.577

自定义模板是我过去使用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T16:40:18.243

您可以像 Jeff 所说的那样添加自定义模板 - 但您可以走另一条路。我不确定，但是根据您的问题，您正在尝试进行一些计算然后显示出来。

如果是这种情况，您可以执行以下操作：

1.  扩展元数据组件，特别是让它计算额外数据并将其放入模型中，用于您的自定义内容类型。
2.  然后，您还扩展了客户端 javascript，并通过创建标记使其显示这些额外信息。

这对你有用吗？

# c# - 创建新用户并保存到文本文件

> ID：14643796
> 
> 赞同：0
> 
> 时间：2013-02-01T10:04:02.733
> 
> 标签：c#, save

我对 C# 很陌生，这是我的第一个项目。

我需要在我的表单中创建一个新用户并将他的详细信息保存在普通文本文件（记事本）中。

我的问题是：

1.  程序是否应该是： 方法 1：首先我单击 CREATE 按钮 --> Enter All Details --> 单击 Save 按钮

    方法2：在文本框中输入详细信息，然后按创建按钮？

2.  任何人都可以帮助我创建这个新用户并将其保存在记事本文件中吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:06:20.420

如果您想在主页上提供 2 个按钮，例如**“创建”和“已存在”**，请使用第一种方法。如果没有，那么使用第二种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:09:19.730

使用方法 2，它对用户更友好，如果我使用应用程序来填写详细信息，我会期望什么。

要将其保存到记事本文件中，您可以使用

```
System.IO.File.AppendAllText(@"C:\UserDetails.txt", "Name" + Environment.NewLine);
System.IO.File.AppendAllText(@"C:\UserDetails.txt", "Address" + Environment.NewLine); 
```

`UserDetails.txt`然后看起来像

```
Name
Address 
```

# html - 表格单元格在连字符处换行

> ID：14643800
> 
> 赞同：0
> 
> 时间：2013-02-01T10:04:16.953
> 
> 标签：html, css

我有一些表格，其中包含一些很长的牢不可破的公式，我想将其设置为 100% 宽度，并且不会再向外延伸，如果需要，只需包装即可。我已经尝试过`word-wrap: break-word`结合，`width: 100%;`并且在大多数情况下，这工作正常，除了公式中有连字符（实际上是减号），在这里它会尝试只在连字符处打破它，而不是在单词中的任何其他地方打破它，即使这会导致当连字符相距很远时，表格布局会中断和扩展。

我可以通过使用来修复它，`table-layout: fixed;`但它会使每个表的所有列都具有相同的宽度，这使得它看起来很难看，因为我有一列有很多文本，而一列没有太多文本。

是否有一个属性可以禁用连字符的换行，甚至是我可以使用的看起来像连字符但不被视为连字符的字符？

这是一个问题公式（excel公式）的示例：

```
....
    <td>
      <p class="mono first">=IF(Case_Selected="MEDIUM - BASE CASE",EOMONTH(VLOOKUP(A3,ContractData,3,FALSE),60-1),IF(Case_Selected="LOW",EOMONTH(VLOOKUP(A3,ContractDataLow,3,FALSE),60-1),IF(Case_Selected="HIGH",EOMONTH(VLOOKUP(A3,ContractDataHigh,3,FALSE),60-1),0)))</p>
    </td>
.... 
```

该类`mono`只是使字体等宽并`first`删除文本缩进（这是电子书的一部分）。

这个细胞只会在`60-1`部分破裂，因为我认为它把它当作一个连字符的词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:21:59.350

每个字符之间的零宽度空格 ( `&#x200b;`) 可能会导致每个字符中断。但是，如果这对您很重要，您的文本可能不再可复制粘贴为有效的 excel 公式；这有点令人讨厌。

上面的 hack 没有显示换行的迹象。如果您希望在有换行符时出现连字符，请考虑软连字符, `&#xad;`，而不是零宽度空格。软连字符仅在换行之前可见。

最后，如果您只想避免对减号连字符进行特殊的换行处理，您可以改用减号： `&#x2212;`。尽管此符号不会导致中断，但它也不会*阻止*它周围（或其他地方）的空间导致中断，因此您可能需要将其替换`&nbsp;`为这样才能达到您的预期。此外，它的外观与连字符有些不同，它也可能不适用于复制粘贴。

我没有通过复制粘贴到各种 excel 版本中测试任何符号，所以如果这与您相关，您需要自己检查。

# magento - Magento - 商店搜索出错，总是不返回任何结果。

> ID：14643801
> 
> 赞同：0
> 
> 时间：2013-02-01T10:04:16.810
> 
> 标签：magento, search

我有一个模板文件和很长的一天。谁能看到我错过了什么。以下内容应该返回搜索结果，但始终返回没有要显示的产品。我正在使用 netbeans，这似乎与 getNoteMessages()): ?> 行有问题，说这是一个变量的意外分配，但我确信编写它的人这样做是有原因的。将其更改为 == 似乎无论如何都没有任何影响。想法？疲劳的...

```
<div class="page-head">
        <h3><?php echo ($this->getHeaderText() || $this->getHeaderText() === false) ? $this->getHeaderText() : $this->__("Search results for '%s'", $this->helper('catalogSearch')->getEscapedQueryText()) ?></h3>
    </div>
    <?php if($this->getResultCount()): ?>
    <?php echo $this->getMessagesBlock()->getGroupedHtml(); ?>
    <div class="page-head">
        <?php if ($this->helper('rss/catalog')->getTagFeedUrl()): ?>
            <a href="<?php echo $this->helper('rss/catalog')->getTagFeedUrl() ?>" class="nobr link-feed"><?php echo $this->__('Subscribe to Feed') ?></a>
        <?php endif; ?>
        <h4><?php echo $this->__("Products"); ?></h4>
    </div>
        <?php if ($messages = $this->getNoteMessages()):?>
            <div class="note-msg">
                <?php foreach ($messages as $message):?>
                <?php echo $message?><br />
                <?php endforeach;?>
            </div>
        <?php endif; ?>
        <?php echo $this->getProductListHtml() ?>
    <?php else: ?>
    <div class="page-head">
        <h4><?php echo $this->__("Products"); ?></h4>
    </div>
        <div class="note-msg">
            <?php echo ($this->getNoResultText()) ? $this->getNoResultText() : $this->__('There are no results.') ?>
            <?php if ($messages = $this->getNoteMessages()):?>
                <?php foreach ($messages as $message):?>
                <br /><?php echo $message?>
                <?php endforeach;?>
            <?php endif; ?>
        </div>
    <?php endif; ?>
    <div class="clear"><p></p></div>
    <?php if (Mage::helper('searchautocomplete')->isSearchCms()): ?>
        <div class="page-head">
            <h4><?php echo $this->__("CMS Pages"); ?></h4>
        </div>
        <?php if($this->getPageResultCount()): ?>
                <?php $pageCollection = $this->_getPageCollection(); ?>
                <ul>
                <?php foreach ($pageCollection as $page) : ?>
                                <li><a href="<?php echo rtrim(Mage::getUrl($page->getIdentifier() == Mage::getStoreConfig('web/default/cms_home_page') ? '/' : $page->getIdentifier()),'/') ?>"><?php echo $page->getTitle(); ?></a><p><?php echo $this->_sanitizeContent($page); ?></p></li>
                <?php endforeach; ?>
                </ul>
        <?php else: ?>
            <div class="note-msg">
                <?php echo $this->__('There are no results.') ?>
            </div>
        <?php endif; ?>
    <?php endif; ?>
    <?php if (Mage::helper('searchautocomplete')->isSearchBlog()): ?>
        <div class="page-head">
            <h4><?php echo $this->__("Blog Posts"); ?></h4>
        </div>
        <?php $blogCollection = $this->_getBlogCollection(); ?>
        <?php if(count($blogCollection)): ?>
                <ul>
                <?php foreach ($blogCollection as $post) : ?>
                                <li><a href="<?php echo rtrim(Mage::getUrl('blog/'.$post->getIdentifier()),'/') ?>"><?php echo $post->getTitle(); ?></a><p><?php echo $this->_sanitizeContent($post); ?></p></li>
                <?php endforeach; ?>
                </ul>
        <?php else: ?>
            <div class="note-msg">
                <?php echo $this->__('There are no results.') ?>
            </div>
        <?php endif; ?>
    <?php endif; ?>
    <?php if (Mage::helper('searchautocomplete')->isSearchCmspro()): ?>
        <div class="page-head">
            <h4><?php echo $this->__("News Pages"); ?></h4>
        </div>
        <?php $news = $this->_getNewsCollection(); ?>
        <?php if(count($news)): ?>
                <ul>
                <?php foreach ($news as $n) : ?>
                    <?php $url = Mage::getModel('core/url_rewrite')->load($n->getUrlRewriteId());?>
                    <li><a href="<?php echo Mage::getBaseUrl().$url->getRequestPath();?>"><?php echo $n->getTitle(); ?></a><p><?php echo $this->_sanitizeContent($n); ?></p></li>
                <?php endforeach; ?>
                </ul>
        <?php else: ?>
            <div class="note-msg">
                <?php echo $this->__('There are no results.') ?>
            </div>
        <?php endif; ?>
    <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:01:26.467

这条线没有问题：

```
<?php if ($messages = $this->getNoteMessages()):?> 
```

Netbeans 总是会抱怨这一点，因为它认为您在分配值而不是检查相等性方面犯了一个常见错误，而实际上您是在此处的同一语句中分配和检查相等性。

您是否刷新了 magento 中的索引？尝试这样做，然后再次搜索。

# ios - Offscreen iOS 6 MKMapViews 和 UIViewPrintFormatter——让它们及时渲染？

> ID：14643805
> 
> 赞同：2
> 
> 时间：2013-02-01T10:04:25.413
> 
> 标签：ios, mkmapview, mapkit, airprint, uiprintformatter

我有兴趣打印一些不属于视图层次结构的 MKMapView，并且仅在用户点击打印时创建。

似乎以下情况是正确的：

1.  屏幕外的 MKMapViews 根本不渲染。
2.  打印 MKMapView 会打印出它呈现的内容，但它目前是这样的。

所以似乎要打印我的地图视图，我需要将它们放入视图层次结构中。幸运的是，从实验来看，我似乎可以在屏幕上将一堆地图视图并排放置，它们仍然会渲染。

我的主要问题是我怎么知道他们已经渲染了？如果我在将地图视图放入视图层次结构后立即触发打印命令，它们将打印部分渲染，缺少位，如下所示。我想等到他们完成加载，然后运行打印作业。（如果他们可以在屏幕上显示打印表时在后台加载，那就更好了，然后我只是在用户点击打印后给用户一个进度条，直到地图完成加载。）

（下图显示了打印部分加载的地图视图时会发生什么。）

![打印](../Images/121205888979bab4403c11ad4c1c3f07.png)

我的第二个问题是：有没有更好的方法来打印多个地图视图？将所有内容都放入视图层次结构并不是很好——它限制了我可以使用的最大大小，这意味着我有很多笨拙的代码来处理子视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:27:49.300

您应该在地图视图上设置一个委托（*MKMapViewDelegate*）并实现*mapViewDidFinishLoadingMap:*，它将在地图视图完成加载必要的图块时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T04:47:20.877

当地图视图不一定在屏幕上可见时，我在将 MKMapView 渲染到图像时遇到了类似的问题。我发现以下解决方案对我有用。我希望这可以帮助别人。基本上，它确保地图有一个窗口。在 ios6.0 中，您需要给它一个窗口以使其加载地图，然后在完成加载时，您在渲染之前等待一段时间以使图块有机会加载。在 ios 5.0 中，您无需等待 didfinishload，您只需确保地图在渲染功能中有一个窗口并且图块可见。

```
{
      if ([@"5.9.9" compare:[UIDevice currentDevice].systemVersion options:NSNumericSearch] == NSOrderedAscending) {
          // actualVersion is lower than the requiredVersion 
          self.oldSuperview = nil;
          if (self.map.window == nil) {
        self.oldSuperview = self.map.superview;
              [[[[UIApplication sharedApplication] delegate] window] insertSubview:self.map atIndex:0];
          }
      } else { 
         [self performSelector:@selector(renderMap) withObject:nil afterDelay:0.10];
     }

}

-(void) renderMap {

    //map will only render tiles if it has a window, so we need to add it to
    //the main window if it does not have a window.

    if ([@"5.9.9" compare:[UIDevice currentDevice].systemVersion options:NSNumericSearch] != NSOrderedAscending) {
        if (self.map.window == nil) {
            self.oldSuperview = self.map.superview;
            [[[[UIApplication sharedApplication] delegate] window] addSubview:self.map];
        }
    }

    // Generate the image centred
    UIGraphicsBeginImageContextWithOptions(self.map.bounds.size, NO, 0.0);

    [self.map.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *theImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    // Save the image here

    if ([@"5.9.9" compare:[UIDevice currentDevice].systemVersion options:NSNumericSearch] != NSOrderedAscending) {

        if (self.oldSuperview) {
            [self.map removeFromSuperview];
            [self.oldSuperview addSubview:self.map];
            self.oldSuperview = nil;
        }

    }

}

}

-(void) cleanMap {
      if (self.map.superview == [[[UIApplication sharedApplication] delegate] window]) {

          if (oldSuperview) { 
              [oldSuperview addSubview:self.map];
              self.oldSuperview = nil;
          }
      }
 }
 -(void) mapViewDidFinishLoadingMap:(MKMapView *)mapView {

if ([@"5.9.9" compare:[UIDevice currentDevice].systemVersion options:NSNumericSearch] == NSOrderedAscending) { 
    if (oldSuperview) {

        [self performSelector:@selector(renderMap) withObject:nil afterDelay:1.10];
        [self performSelector:@selector(cleanMap) withObject:nil afterDelay:1.41];
    } else {
        [self renderMap];
    }
} else {
    [self renderMap];
}

 } 
```

# c# - 连接列的 DataColumn 表达式 - 返回空

> ID：14643808
> 
> 赞同：1
> 
> 时间：2013-02-01T10:04:30.023
> 
> 标签：c#, asp.net, datatable

我有一个 DataTable，有两列“FirstName”和“LastName”。

我创建了一个数据列来连接这两列的值。这是我的代码 -

```
DataColumn fullname = dt.Columns.Add("Full Name");
string fn = string.Format(string.Concat("'First Name - '+", "{0}", "+ ';<br />"), "FN");
string ln = string.Format(string.Concat("Last Name - '+", "{0}", "+ ';<br />"), "LN");
otherDetails.Expression = string.Concat(fn, ln); 
```

该代码运行良好，并连接了两个字段的值。但是，如果任何列值为 null，则表达式不起作用并返回为空。

例如，对于第 5 条记录，如果名字是“Tim”，第二个名字是 null，我希望将值显示为“Tim”。但是对于该记录，此表达式列的值为空。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:06:21.807

觉得你可以试试

```
string fn = string.Format(string.Concat("'First Name - '+", "{0}", "+ ';<br />"), "IsNull(FN, '')");
string ln = string.Format(string.Concat("Last Name - '+", "{0}", "+ ';<br />"), "IsNull(LN, '')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:14:25.970

尝试使用以下语法进行字符串实例化：

```
string  ln = string.Format(string.Concat("Last Name - '+", "{0}", "+ ';<br />"), "LN") ?? ""; 
```

这应该将任何空值设置为空字符串。

# java - text/csv 文件下载在百行时转为 text/plain

> ID：14643811
> 
> 赞同：1
> 
> 时间：2013-02-01T10:04:46.207
> 
> 标签：java, spring, csv, download, plaintext

我已使用以下代码下载 csv 文件

```
InputStream is = new ByteArrayInputStream(csv.toString().getBytes());
IOUtils.copy(is, response.getOutputStream());

response.setContentType("text/csv");
response.setHeader("Content-Disposition", "attachment; filename=mycsvfile.csv");
response.flushBuffer();
is.close(); 
```

它适用于数十条记录。我能够下载 *.csv 文件。但它会为数百条记录返回没有文件扩展名的文本/纯文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:09:31.813

在您已经将数据发送到响应流`response.setHeader()` *之后*，您正在调用。如果响应流缓冲区不够大，无法处理所有数据，则*必须*将标头写出才能写入内容。坦率地说，我很惊讶`setHeader`没有抛出异常说响应主体已经启动，但无论如何......

只需将标题设置部分移至调用`IOUtils.copy`.

我还*强烈*建议在`String.getBytes()`调用中指定字符编码，并在响应标头中指定相同的编码。（我通常使用 UTF-8。）

# ms-word - 根据第一个数字而不是减号对齐单词表中的数字

> ID：14643812
> 
> 赞同：0
> 
> 时间：2013-02-01T10:04:47.857
> 
> 标签：ms-word

我正在尝试在 word 中对齐表格中的列中的数字。但是，当我尝试将它们左对齐时，负数（以及带有 < 符号的数字）的对齐方式与正数不同。例如

```
-1.234
1.234
<0.001 
```

我想让它们像这样对齐：

```
-1.234
 1.234
<0.001 
```

空格或制表符没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:12:33.267

使用小数制表符对齐您的数字。

![在此处输入图像描述](../Images/a99e7fc6ede5baf2bc4e30623b0b02b1.png)

只需单击 `Top Rular`以添加选项卡并双击它。它将提示`Tabs`对话框，`Decimal`从`Alignment`部分中选择。

# ruby-on-rails - Phusion 乘客并使用 apache 运行多个 ruby 版本

> ID：14643815
> 
> 赞同：3
> 
> 时间：2013-02-01T10:04:55.663
> 
> 标签：ruby-on-rails, apache, passenger

我分别在 ruby​​ 1.8.x 和 ruby​​ 1.9.11 上建立了两个不同的 Rails 网站。我已经使用以下代码行配置了我的 /etc/httpd/conf/http.conf：

```
LoadModule passenger_module /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.18/ext/apache2/mod_passenger.so
PassengerRoot /opt/ruby-enterprise-1.8.7-2012.02/lib/ruby/gems/1.8/gems/passenger-3.0.18
PassengerRuby /opt/ruby-enterprise-1.8.7-2012.02/bin/ruby 
```

正如
**乘客安装apache2模块所建议的那样**

同样，我还添加了替换替代品的进一步必要代码：

> ```
> <VirtualHost *:80>
>       ServerName www.example.com
>       # !!! Be sure to point DocumentRoot to 'public'!
>       DocumentRoot /somewhere/public    
>       <Directory /somewhere/public>
>          # This relaxes Apache security settings.
>          AllowOverride all
>          # MultiViews must be turned off.
>          Options -MultiViews
>       </Directory>   
>  </VirtualHost> 
> ```

到目前为止一切正常，但是当我尝试为 ruby​​ 1.9.3 应用程序添加另一个配置并遵循上述相同的过程时，我无法同时运行 ruby​​ 1.8.7 应用程序和 1.9.3 应用程序。后者在前者产生错误的情况下成功运行。

我正在使用 rvm 来管理这两个应用程序，并为每个应用程序提供单独的 gemset。

所以，我的问题是，我**怎样才能同时运行我的两个应用程序。**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T16:16:01.150

乘客 4 允许`PassengerRuby`根据应用程序进行设置。

*   [http://blog.phusion.nl/2013/03/05/phusion-passenger-4-0-release-candidate-4/](http://blog.phusion.nl/2013/03/05/phusion-passenger-4-0-release-candidate-4/)

最终版本即将发布，但同时您可以通过`gem install passenger --pre`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:42:10.423

您不能在单个 phussion 乘客配置中同时运行多个 ruby​​ 版本。如果是这种情况，那么应该使用独立服务器运行（假设在端口 4000 上），并且您应该将 apache 配置为在该端口上作为代理运行。有关更多信息，请参阅[http://blog.phusion.nl/2010/09/21/phusion-passenger-running-multiple-ruby-versions/](http://blog.phusion.nl/2010/09/21/phusion-passenger-running-multiple-ruby-versions/)。

# rest - JBoss 域模式下的 Liferay JSON Web 服务可见性

> ID：14643819
> 
> 赞同：0
> 
> 时间：2013-02-01T10:05:04.123
> 
> 标签：rest, jboss, jboss7.x, liferay-6

我已经在域模式下在 JBoss 7.1.3 上部署了 Liferay 6.1.1GA2，它工作正常。但是现在，我遇到了 REST API 可见性（liferay_url/api/jsonws）的问题。

如果我在独立模式下启动 JBoss，我可以找到所有默认服务，但在域模式下，服务列表是空的。启动日志显示可以与此问题相关联的错误消息，因为 JSON 服务发现过程将 @JSONWebService 注释搜索到类路径中：

```
[Server:liferay] 10:30:14,466 INFO  [stdout] (MSC service thread 1-4) 10:30:14,464 ERROR [MSC service thread 1-4][ClassPathUtil:173] Class com.liferay.portal.servlet.MainServlet is not loaded from a standard location (/WEB-INF/classes) 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T20:14:51.007

我认为您的问题将与 jboss 在此模式下启动时的参数解析有关，可能是托管域中 jboss 服务器部署的 de 属性。我不知道真正的问题，但是您可以尝试在`host.xml`配置文件中按服务器定义一个jvm，或者在服务器规范中添加参数。

[您可以使用本文](https://docs.jboss.org/author/display/AS71/Command+line+parameters?_sscc=t)中描述的 java option element config 覆盖您需要的所有参数，尤其是与 jboss 服务器默认文件夹的部署和数据相关的参数。

一个可能的解决方案是这样的：

```
 <server name="server-one" group="main-server-group">
     <jvm name="default">
       <jvm-options>
         <option value="-Djboss.domain.deployment.dir=/opt/jboss-7.1.3/domain/servers/server-one/content"/>
       </jvm-options>
     </jvm>
  </server> 
```

在启动时，部署文件夹服务器的属性将附加绝对路径，请尝试使用此或其他参数。此解决方法将解决与此类问题相关的另一个问题。

# java - 关于 Servlet

> ID：14643822
> 
> 赞同：1
> 
> 时间：2013-02-01T10:05:20.903
> 
> 标签：java, servlets

我的问题是：- 在面试中面试官问我：在 servlet 中有一种方法，它有 10 个参数。并将请求发送到其他控制器或 servlet。在其他 servlet 中，我们只需要 6 个参数。我们必须做什么？

我回答：您可以在 OR 的帮助下`req.getParameters(1,2,3,4,5,..);` 为我可以编写的每个元素获取参数，或者我们可以在**会话**`req.getParameter(1);req.getParameter(2);...... (6);`范围内 设置所有必需的值，但面试官对我的回答不满意......

 **请告诉我相同的最佳答案是什么。

**提前致谢 ：）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:30:19.387

听起来面试官想听你谈论适配器模式，而不是你要写什么具体的代码。

从您的评论中，听起来您以前从未听说过模式。它们是针对特定问题的通用设计或方法，它们可以更容易地 1) 发现具有通用解决方案的特定问题，以及 2) 向其他开发人员描述设计或方法。

适配器模式将一个接口（具有 10 个参数的方法）转换为不同的接口（另一个具有 6 个参数的方法）

在这种情况下，代码解决方案可能涉及 req.getParameter 但面试官希望看到您可以将这种情况识别为您将使用适配器模式的情况。**

# linux - ubuntu linux中出现错误“无法解析'us.archive.ubuntu.com'”时如何更新apt-get？

> ID：14643826
> 
> 赞同：-3
> 
> 时间：2013-02-01T10:05:37.730
> 
> 标签：linux, ubuntu, updates, apt-get

当我尝试使用“apt-get update”进行更新时，使用 Linux 3.2.0-32-generic Ubuntu x86_64 我收到了几条错误消息，这些错误消息是针对美国 ubuntu 档案的多行请求。它显示“无法解析‘us.archive.ubuntu.com’”。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:09:11.997

通过编辑 /etc/resolv.conf 以删除名称服务器并替换为我喜欢的名称服务器，我能够连接到存储库并使用“apt-get update”命令进行更新。一个可以使用的示例条目是“nameserver 8.8.8.8”，它使用 google 名称服务器。保存文件后，所有进程都可以正常工作而不会引发错误。

# java - 以分层方法处理 JPA 提交异常

> ID：14643828
> 
> 赞同：0
> 
> 时间：2013-02-01T10:05:39.233
> 
> 标签：java, jpa, exception-handling, dao

在我们的应用程序中，这些是使用的层：

```
Rest Service Endpoint Layer --> Business Layer --> DAO --> ORM 
```

现在，每一层都适当地翻译其异常并将它们发送到下一层。例如，`DAO Layer`创建 a`DaoException`并 throws to `Business Layer`，`Bussiness Layer`将 this 转换为`BusinessException`throws 到`RestService Layer`由 cxf 映射器处理的位置（好吧，不是真的在 RestServiceLayer 中）。

我们已经把`@Transactional`方法放在了`Business Layer`。因此，如果在提交时发生异常，则`exception`只会在`Rest Service Endpoint Layer`. 现在，我必须在最*顶层`RollBackException etc.`（*`Rest Service Endpoint Layer`

处理这种情况的好方法是什么？我是否应该根本不翻译异常并仅在最顶层处理所有异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:23:46.040

如果您真的想翻译注释并将注释应用于业务层，请在抛出异常时编写注释驱动的 AOP 切入点并进行翻译。但我也建议不要翻译 - 你通过翻译获得了什么？

# php - PHP Paypal 集成测试环境

> ID：14643830
> 
> 赞同：1
> 
> 时间：2013-02-01T10:05:41.853
> 
> 标签：php, debugging, testing, paypal, integration

我正在研究与 PayPal 在线支付的网站集成。我以前做过，我知道这可能是一项繁琐的任务，尤其是调试和测试。

我正在本地主机（XAMPP，LAMPP）上进行开发，我需要每次都上传到测试服务器（在共享主机上），即使经过很小的更改才能对其进行测试。

我想知道是否有任何最佳实践或现成的环境、服务器、解决方案或 phpunits 来改进工作流程？

# class - Angular.js 中的动态类

> ID：14643836
> 
> 赞同：52
> 
> 时间：2013-02-01T10:05:57.500
> 
> 标签：class, dynamic, angularjs

我想动态地将一个 css 类添加到`<li>`我正在循环的元素中。循环是这样的：

```
<li ng-repeat="todo in todos" ng-class="{{todo.priority}}">
  <a href="#/todos/{{todo.id}}">{{todo.title}}</a>
  <p>{{todo.description}}</p>
</li> 
```

在我的待办事项模型中，我的属性优先级可以是“紧急”、“不那么重要”或“正常”，我只想为每个元素分配类。

我知道我可以为布尔值执行此操作，`ng-class="{'urgent': todo.urgent}"` 但我的变量不是布尔值，而是具有三个值。我该怎么做？另请注意，我不想使用`ng-style="..."`，因为我的课程会改变几个视觉事物。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-02-01T10:30:28.640

您可以简单地将函数分配为表达式并从那里返回适当的类。 **编辑：动态类也有更好的解决方案。请参阅下面的注释。**

视图片段：

`<div ng-class="appliedClass(myObj)">...</div>`

在控制器中：

```
$scope.appliedClass = function(myObj) {
    if (myObj.someValue === "highPriority") {
        return "special-css-class";
    } else {
        return "default-class"; // Or even "", which won't add any additional classes to the element
    }
} 
```

## 这样做的更好方法

我最近了解了另一种方法。您传入一个对象，该对象具有与您操作的类相对应的属性，并且值是表达式或布尔变量。一个简单的例子：

`ng-class="{ active: user.id == activeId }"`

在这种情况下`active`，只要与对象`user.id`匹配`activeId`，就会将类添加到元素中`$scope`！

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-02-20T12:10:24.983

如果您只想添加一个类，请使用`class`带有插值的属性：

```
class="priority-is-{{todo.priority}}" 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-12-13T15:49:55.850

你几乎明白了 :)
它应该没有插值标记（`{{`和`}}`）：

```
<li ng-repeat="todo in todos" ng-class="todo.priority">
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-18T17:02:21.360

您可以动态地使用三元组来执行此操作。

```
ng-class="service.Icon != '' ? service.Icon : 'fas fa-arrow-alt-circle-right'" 
```

上面的代码将注入存储在 Icon 中的类，如果它不为空，如果不包含它，则默认为第二个。

这将允许多个类。

如果状态发生任何变化，您在数据绑定实例中调用 function() 的上述答案可能会导致文档消费循环。如果您要在其中写入控制台，您可能会发现您的页面在停止循环之前被渲染了 100 次。

注意：使用三元时不要将对象 {} 放在它周围。你会得到错误。

# javascript - 如何刷新 Google AdSense 内容？

> ID：14643840
> 
> 赞同：2
> 
> 时间：2013-02-01T10:06:03.973
> 
> 标签：javascript, iframe, adsense

```
<div name="googleAd">
 <script type="text/javascript">
            google_ad_client = "ca-pub-xxxxxxxxxxxxx";
            <!--/* BottomRight */-->
            google_ad_slot = "1781127922";
            google_ad_width = 180;
            google_ad_height = 150;
          </script>

          <script name="test" type="text/javascript"
                 src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
          </script>
</div> 
```

我要将 Google AdSense 添加到我的页面，我想刷新它以查看其他广告。我怎样才能实现这一目标？我正在使用 XSLT。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-07-27T17:07:30.870

如果网页使用 jQuery，只需执行以下代码：

```
$(".adsbygoogle").each(function(i,e){$(e).html($(e).html())}); 
```

而且，如果您想每 60 秒刷新一次，可以尝试以下示例：

```
var ad_refresher = setInterval(function(){
        $(".adsbygoogle").each(function(i,e){
            $(e).html($(e).html())
        });
    }, 60000); 
```

如果实现了上面的代码，请停止刷新行为：

```
clearInterval(ad_refresher); 
```

**如果允许您刷新广告，我建议您查看 Google Adsense 文档。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T03:21:25.070

如果您检查带有 Adsense 广告的页面的 DOM，您会看到一个 iframe。您可以找到 iframe 然后重新加载它

```
iframe.contentWindow.location.reload(); 
```

您可能需要进行一些调整才能使其正常工作。

# ucma - 使用 ucma 3.0 设置、邀请和管理用户之间的视频会议会话

> ID：14643843
> 
> 赞同：0
> 
> 时间：2013-02-01T10:06:13.297
> 
> 标签：ucma

如何使用 UCMA 3.0 和 lync server 2010 设置、邀请和管理视频会议会话。示例代码会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T04:22:23.243

按着这些次序 ：

1.  启动协作平台
2.  创建一个本地端点。
3.  使用 LocalEndPoint 创建一个新的对话。
4.  在新创建的对话上安排会议。
5.  加入并升级到会议。
6.  向远程参与者发送邀请。

如果您探索 SDK 示例，您将获得每个步骤的代码。如果您在参考 SDK 示例时遇到困难，请告诉我。

# html - 使用 page-break-before 打印：总是。后续页面的上边距

> ID：14643845
> 
> 赞同：4
> 
> 时间：2013-02-01T10:06:18.560
> 
> 标签：html, css, printing

有点奇怪。

我有一个脚本可以为仓库生成许多拣货清单。在拣货清单的顶部，我正在输出客户地址。这在打印输出上的位置很重要，因为仓库将这些打印到穿孔的粘纸上，并且需要地址落在地址标签的特定边界内。

我已经设置好了，所以当他们选择要打印的 1 个拣货单时，它正好落在需要的地方。但是，在后续页面上，页面顶部的边距较小（见图 - 左侧是第一页......所有后续页面都采用右侧页面的格式）

![在此处输入图像描述](../Images/c40c33c0ebbf7b7d05c78e5684382b3a.png)

页面正文有 padding:0 和 margin:0

每个选择列表都包含在一个 div 中，并且在页面 >1 上有 page-break-before:always

```
<div style="page-break-before: always;">
    <table cellpadding='0' cellspacing='0' border='0' style='width:600px; margin:35px 0 0 22px;'>
       ......
       <!--picking list output in here-->
       ......
    </table>
</div> 
```

他们是从 IE8 打印的，但我在 Firefox 和 chrome 中遇到了同样的事情。

什么可能导致后续页面顶部的间距减小（或第一页顶部的额外空间）？

谢谢

# laravel - 在 Laravel 4 开发过程中自动调用asset:publish --bench="vendor/package"

> ID：14643852
> 
> 赞同：5
> 
> 时间：2013-02-01T10:06:35.477
> 
> 标签：laravel, laravel-4

我正在做一个包裹，我真的需要能够开火

```
php artisan asset:publish --bench="vendor/package" 
```

在开发过程中自动命令。

每次我对包中的 JavaScript 或 CSS 文件进行更改时，编写该命令非常耗时。

我试图在我的服务提供商中调用 Artisan

```
public function boot()
{       
    Artisan::call('asset:publish', array('--bench' => 'arni-gudjonsson/webber'));
    ...
} 
```

我有

```
ErrorException: Runtime Notice: Non-static method Illuminate\Foundation\Artisan::call() should not be called statically, assuming $this from incompatible context 
```

Artisan 不是为通过网络调用而设计的吗？有人有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T19:35:10.540

您可以将[Guard](https://github.com/guard/guard)用于此类任务。例如，这是我的 Guardfile 中的一部分，用于在更改包时自动发布包中的资产：

```
guard :shell do
    watch(%r{^workbench/vendor/package/public/.+\..+$}) {
        `php artisan asset:publish --bench="vendor/package"`
    }
end 
```

您还可以让它自动编译 Sass、设置 livereload 等。看看[Jeffrey Way 的截屏视频](http://net.tutsplus.com/tutorials/tools-and-tips/guard-is-your-best-friend/)即可开始使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-06T12:28:47.730

您可以使用带有 shell watch 命令的 Grunt 来实现此目的，例如：

```
$ npm install grunt-shell 
```

在 vendor/yourname/yourpackage/Gruntfile.js 中：

```
 shell: {                           
        assets: {                      
            options: {                 
                stdout: true
            },
            command: 'cd ../../..; php artisan asset:publish yourname/yourpackage'
        },
        views: {                      
            options: {                
                stdout: true
            },
            command: 'cd ../../..; php artisan view:publish yourname/yourpackage;'
        }
    },
    watch: {
        assets: {
            files: ['./public/**/*.js', './public/**/*.css'],
            tasks: ['shell:assets']
        },
        views: {
            files: ['./src/views/**/*.php', './src/views/**/*.md'],
            tasks: ['shell:views']                          
        }
    }

...

grunt.loadNpmTasks('grunt-shell');
grunt.loadNpmTasks('grunt-contrib-watch');

grunt.registerTask('default', ['watch']); 
```

然后启动手表：

```
$ grunt watch 
```

在诸如 less 或 uglify 等其他 grunt 命令将您的资产编译为公共后，这自然可以工作，从而更改它们并触发发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T19:29:12.850

这就是我正在做的事情：

```
<?php namespace Vendor\Package;

use \App;
use Illuminate\Filesystem\Filesystem;

class DecoyServiceProvider extends ServiceProvider {
    public function boot() {
        $this->package('bkwld/decoy');

        // Auto-publish the assets when developing locally
        if (App::environment() == 'local' && !App::runningInConsole()) {
            $workbench = realpath(base_path().'/workbench');
            if (strpos(__FILE__, $workbench) === false) App::make('asset.publisher')->publishPackage('vendor/package');
            else App::make('asset.publisher')->publishPackage('vendor/package', $workbench);
        }
    }   
} 
```

只要请求来自本地环境，无论捆绑包是否在工作台中，这都会自动发布资产。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-26T02:09:16.440

编辑 /workbench/yourappspace/yourapp/AppServiceProvider.php

```
<?php namespace YourAppSpace\YourApp;

use Illuminate\Support\ServiceProvider;
use Artisan; 
```

在 boot() 方法中，

```
public function boot()
{
$this->package('yourappspace/yourapp');
$app = $this->app;
include __DIR__.'/../../routes.php';

Artisan::call('asset:publish', array('--bench' => 'yourappspace/yourapp'));
} 
```

现在，每次更新代码和刷新浏览器时，您的资产都会通过 Artisan 发布。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-10T13:16:38.663

还有一个选项，您可以添加一个 composer 命令。例如，当使用 install 将项目部署到服务器时：

```
"post-install-cmd": [
    "php artisan clear-compiled",
    "php artisan optimize",
    "php artisan asset:publish vendor-name/package-name"
], 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-06T17:48:47.133

顺便说一句 5.1 正确的方式：

`\Artisan::call('vendor:publish', [ '--tag' => ['public'], '--provider' => 'Some\Your\ServiceProvider', '--force' => true ]);`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-04T13:05:02.693

试试直接编辑里面的css和js文件

> {app_root}/public/bundles/{bundle}/{css|js}

目录，完成后，只需将修改后的文件复制回包的公共目录。这可能是错误的方法，但是，嘿，它有效。另一种选择是创建一个任务并运行

> 命令::运行(数组('task_name'));

官方文档中有几个例子。

# php - 如果执行其中没有 html 的 php 文件，Internet Explorer 会失去连接？这可能吗？

> ID：14643855
> 
> 赞同：1
> 
> 时间：2013-02-01T10:06:46.317
> 
> 标签：php, internet-explorer

我在这里有一个 PHP 页面，它从目录中获取文件列表，然后根据它找到的内容进行标头重定向。此文件中没有 HTML。

得到这个：

在 Internet Explorer 中，该页面上的连接丢失。浏览器在没有重定向的情况下停止，并停留在这个 php 页面上，说连接丢失。

这在 Chrome 中不会发生。该页面最多需要大约 2 秒来重定向。

而且因为我在这个 php 文件的 php 脚本下面包含了一些 html，所以 IE 突然没有断开连接。php 页面执行其应有的功能，并重定向到与 Chrome 相同的适当页面。

这对任何人都有意义吗？如果在页面上找不到任何 HTML，IE 会失去与页面的连接吗？谁能解释发生了什么？

它是 Internet Explorer 8 和 Chrome 版本 24.0.1312.56 m

# nservicebus - NServiceBus log4Net 附加程序

> ID：14643856
> 
> 赞同：0
> 
> 时间：2013-02-01T10:06:46.543
> 
> 标签：nservicebus

我在使用 NServiceBus 进行自定义日志记录时遇到问题。

我已经按照描述设置了配置，当我得到我的记录器时，附加列表为空。有没有人知道我错过了什么/做错了什么？

干杯

我的终点是：

```
public void Init()
        {
            SetLoggingLibrary.Log4Net(log4net.Config.XmlConfigurator.Configure);

            Configure.With().DisableTimeoutManager();

        } 
```

我的 app.config：

```
<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,Log4net"/>

 <log4net>
    <appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
      <threshold value="DEBUG"/>
      <to value="test@test.com" />
      <from value="test@test.com" />
      <subject value="Error" />
      <smtpHost value="localhost" />
      <bufferSize value="512" />
      <lossy value="false" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="ConversionPattern" value="%d [%t] %-5p %c [%x] &lt;%X{auth}&gt; - %m%n"/>
      </layout>
    </appender>
    <root>
      <level value="DEBUG"/>
      <appender-ref ref="SmtpAppender" />
    </root>
  </log4net> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T23:46:07.847

尝试以下操作（假设您使用`AsA_Server`作为端点角色，否则更改它）：

```
public class EndpointConfig : IConfigureThisEndpoint, AsA_Server, IWantCustomLogging
{
    public void Init()
    {
        NServiceBus.SetLoggingLibrary.Log4Net(log4net.Config.XmlConfigurator.Configure);

        Configure.With()
                   .DisableTimeoutManager();
    }
} 
```

有关更多信息，请参阅[此示例项目](https://github.com/NServiceBus/NServiceBus/tree/master/Samples/GenericHost/LoggingFromAppConfig)

# javascript - 如何在初始化时使用字段名称作为哈希表键，在javascript中？

> ID：14643858
> 
> 赞同：0
> 
> 时间：2013-02-01T10:06:53.810
> 
> 标签：javascript, initialization, hashtable

我想在初始化时使用 field.name 作为哈希表的键，但我收到一条错误消息，说 init 行上缺少“：”，这是我尝试过的方法

```
var field1 = document.getElementById("PRES_BK_LANG");
var field2 = document.getElementById("PRES_BK_CORR_MED");
var fields = {field1.name:[field1,"P"],field2.name:[field2,"O"]}; 
```

可以这样做吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:08:24.467

不，对象文字符号仅在属性名称被硬编码时才可用。您必须将该对象用作地图来存储数据：

```
var fields = {};
fields[field1.name] = [field1,"P"];
fields[field2.name] = [field2,"O"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:10:31.040

你应该写这个。

```
var fields = {};
fields[field1.name] = [field1,"P"];
fields[field2.name] = [field2,"O"]; 
```

原因是这种对象构造（您所写的）将“键”视为字符串文字，而不是将其解析为真正的字符串。

# c# - 调用存储过程不会导致将行插入到表中

> ID：14643859
> 
> 赞同：1
> 
> 时间：2013-02-01T10:06:54.187
> 
> 标签：c#, sql, stored-procedures, store

我的存储过程是：

```
ALTER PROCEDURE [dbo].[ThemTram] 
(   
    @Ten nvarchar(50),
    @KhuVucID int,
    @TenTinh nvarchar(50),
    @TinhID int,
    @TenTram nvarchar(50)
)
AS
set @KhuVucID = (select KhuVuc.KhuVucID from KhuVuc where KhuVuc.Ten=@ten)
set @TinhID =(select Tinh.TinhID from Tinh Where (Tinh.TenTinh=@TenTinh and Tinh.KhuVucID=@KhuVucID))
if not exists (select Tram.TenTram from Tram where (Tram.TenTram=@TenTram and Tram.TinhID = @TinhID))
Begin
    insert into Tram(TenTram,TinhID) values (@TenTram,@TinhID)
end 
```

和我的 C# 程序：

```
 private void ThemTramBT_Click(object sender, EventArgs e)
    {
        string conn = "Data Source=USER-PC;Initial Catalog=NCKHmoi;Integrated Security=True";
        SqlConnection connect = new SqlConnection(conn);
        SqlCommand command = new SqlCommand();
        command.Connection = connect;
        connect.Open();
        command.CommandType = CommandType.StoredProcedure;
        command.CommandText = "ThemTram";
        command.Parameters.Add("@Ten", SqlDbType.NVarChar, 50).Value = KhuVucComboBox.Text;
        command.Parameters.Add("@TenTinh", SqlDbType.NVarChar, 50).Value = TinhComboBox.Text;
        command.Parameters.Add("@TenTram", SqlDbType.NVarChar, 50).Value = ThemTramTB.Text;
        command.Dispose();
        connect.Close();
    } 
```

但有一个问题。在 c# 代码中。我无法向其中插入新数据。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:11:37.250

您没有执行命令。顺便说一句，您应该真正使用`using`带有 and 的语句`SqlConnection`（不太重要）`SqlCommand`：

```
private void ThemTramBT_Click(object sender, EventArgs e)
{
    string conn = "Data Source=USER-PC;Initial Catalog=NCKHmoi;Integrated Security=True";
    using (SqlConnection connect = new SqlConnection(conn))
    {
        using (SqlCommand command = new SqlCommand("ThemTram", conn))
        {
            connect.Open();
            command.CommandType = CommandType.StoredProcedure;
            command.Parameters.Add("@Ten", SqlDbType.NVarChar, 50).Value = KhuVucComboBox.Text;
            command.Parameters.Add("@TenTinh", SqlDbType.NVarChar, 50).Value = TinhComboBox.Text;
            command.Parameters.Add("@TenTram", SqlDbType.NVarChar, 50).Value = ThemTramTB.Text;

            command.Parameters.AddWithValue("@KhuVucID", DBNull.Value); //need to pass even if not used
            command.Parameters.AddWithValue("@TinhID", DBNull.Value); //need to pass even if not used
            command.ExecuteNonQuery();
        }
    }
} 
```

编辑：

根据您的评论，尚不清楚为什么您的 sproc 是这样编码的。我建议你改变它如下：

```
ALTER PROCEDURE [dbo].[ThemTram] 
(   
    @Ten nvarchar(50),
    @TenTinh nvarchar(50),
    @TenTram nvarchar(50)
)
AS

declare @KhuVucID int
declare @TinhID int

select @KhuVucID = KhuVuc.KhuVucID from KhuVuc where KhuVuc.Ten = @ten
select @TinhID = Tinh.TinhID from Tinh Where Tinh.TenTinh = @TenTinh and Tinh.KhuVucID = @KhuVucID

if not exists (select Tram.TenTram from Tram where Tram.TenTram = @TenTram and Tram.TinhID = @TinhID)
begin
    insert into Tram(TenTram, TinhID) values (@TenTram, @TinhID)
end 
```

# python - 读取大输出时 Paramiko 通道卡住

> ID：14643861
> 
> 赞同：10
> 
> 时间：2013-02-01T10:07:09.520
> 
> 标签：python, paramiko

我有一个代码，我在远程 Linux 机器上执行命令并使用 Paramiko 读取输出。代码 def 如下所示：

```
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(IPAddress, username=user['username'], password=user['password'])

chan = self.ssh.get_transport().open_session()

chan.settimeout(10800)

try:
    # Execute thecommand
    chan.exec_command(cmd)

    contents = StringIO.StringIO()

    data = chan.recv(1024)

    # Capturing data from chan buffer.
    while data:
        contents.write(data)
        data = chan.recv(1024)

except socket.timeout:
    raise socket.timeout

output = contents.getvalue()

return output,chan.recv_stderr(600),chan.recv_exit_status() 
```

上面的代码适用于小输出，但对于较大的输出会卡住。

这里有任何与缓冲区相关的问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-12T12:55:49.727

我正在发布与布鲁斯韦恩（Bruce Wayne）的输入一起使用的最终代码（:)）

```
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(IPAddress, username=user['username'], password=user['password'])

chan = self.ssh.get_transport().open_session()
chan.settimeout(10800)

try:
    # Execute the given command
    chan.exec_command(cmd)

    # To capture Data. Need to read the entire buffer to capture output
    contents = StringIO.StringIO()
    error = StringIO.StringIO()

    while not chan.exit_status_ready():
        if chan.recv_ready():
            data = chan.recv(1024)
            #print "Indside stdout"
            while data:
                contents.write(data)
                data = chan.recv(1024)

        if chan.recv_stderr_ready():            
            error_buff = chan.recv_stderr(1024)
            while error_buff:
                error.write(error_buff)
                error_buff = chan.recv_stderr(1024)

    exit_status = chan.recv_exit_status()

except socket.timeout:
    raise socket.timeout

output = contents.getvalue()
error_value = error.getvalue()

return output, error_value, exit_status 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T10:14:59.573

我看不出与标准输出通道相关的问题，但我不确定您处理标准错误的方式。您能否确认，它不是导致问题的标准错误捕获？我会尝试你的代码并让你知道。

更新：当您执行的命令在 STDERR 中提供大量消息时，您的代码会冻结。我不确定为什么，但`recv_stderr(600)`可能是原因。因此，以与捕获标准输出相同的方式捕获错误流。就像是，

```
contents_err = StringIO.StringIO()

data_err = chan.recv_stderr(1024)
while data_err:
    contents_err.write(data_err)
    data_err = chan.recv_stderr(1024) 
```

您甚至可以先尝试更改`recv_stderr(600)`为`recv_stderr(1024)`或更高。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-13T03:29:42.313

其实我认为以上所有答案都不能解决真正的问题：

如果远程程序首先产生大量的**标准错误输出**然后

```
stdout.readlines()
stderr.readlines() 
```

会永远挂着。虽然

```
stderr.readlines()
stdout.readlines() 
```

将解决这种情况，但如果远程程序首先产生大量**标准输出输出**，它将失败。

我还没有解决办法...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T15:18:25.980

如果您使用开放 ssh 会话的高级表示，则更容易。由于您已经使用[ssh-client](http://www.lag.net/paramiko/docs/paramiko.SSHClient-class.html)打开您的频道，您可以从那里运行您的命令，避免额外的工作。

```
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(IPAddress, username=user['username'], password=user['password'])

stdin, stdout, stderr = ssh.exec_command(cmd)
for line in stdout.readlines():
    print line
for line in stderr.readlines():
    print line 
```

如果您之后收到其他数据，您将需要返回并再次从这些文件句柄中读取。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-07T21:00:48.453

**TL;DR：如果使用`stdout.readlines()`之前调用`stderr.readlines()``ssh.exec_command()`**

如果您使用@Spencer Rathbun 的回答：

```
sh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect(IPAddress, username=user['username'], password=user['password'])

stdin, stdout, stderr = ssh.exec_command(cmd) 
```

您可能想了解大量输出可能产生的限制。

实验上，`stdin, stdout, stderr = ssh.exec_command(cmd)`将无法立即将完整输出写入`stdout`和`stderr`。`2^21`更具体地说，缓冲区在填满之前似乎可以保存(2,097,152) 个字符。如果*任何*缓冲区已满，`exec_command`将阻止写入该缓冲区，并将保持阻塞状态，直到该缓冲区被清空到足以继续。这意味着如果你`stdout`的文件太大，你会一直挂在 read 上`stderr`，因为在它可以写入完整输出之前，你不会在任何一个缓冲区中收到 EOF。

解决此问题的简单方法是 Spencer 使用的方法 -`stdout.readlines()`在尝试读取之前通过获取所有正常输出`stderr`。仅当您在 中包含多个`2^21`字符时`stderr`，这才会失败，这在我的用例中是可以接受的限制。

I'm mainly posting this because I'm dumb and spent far, far too long trying to figure out how I broke my code, when the answer was that I was reading from `stderr` before `stdout` and my `stdout` was too big to fit in the buffer.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-15T20:25:34.410

要让 paramiko 命令表现得像 subprocess.call，您可以使用这段代码（使用 python-3.5 和 paramiko-2.1.1 测试）：

```
#!/usr/bin/env /usr/bin/python3                                                

import os                                                                  
import sys                                                                                                                    
from paramiko import SSHClient, AutoAddPolicy               
from socket import getfqdn                                       

class SecureSHell(object):                                                 
    reuser = os.environ['USER']                                            
    remote = ''                                                            
    def __init__(self, *args, **kwargs):                                   
        for arg in args:                                                   
            if hasattr(self, arg):                                         
                setattr(self, arg, True)                                   
        for (key, val) in kwargs.items():                                  
            if hasattr(self, key):                                         
                setattr(self, key, val)

    @staticmethod                                                          
    def _ssh_(remote, reuser, port=22):                                    
        if '@' in remote:                                                  
            _reuser, remote = remote.split('@')                            
        _fqdn = getfqdn(remote)                                            
        remote = _fqdn if _fqdn else remote                                
        ssh = SSHClient()                                                  
        ssh.set_missing_host_key_policy(AutoAddPolicy()) 
        ssh.connect(remote, int(port), username=reuser)                                                                     
        return ssh                                                         

    def call(self, cmd, remote=None, reuser=None):                         
        remote = remote if remote else self.remote                         
        reuser = reuser if reuser else self.reuser              
        ssh = self._ssh_(remote, reuser)                                   
        chn = ssh.get_transport().open_session()                           
        chn.settimeout(10800)                                              
        chn.exec_command(cmd)                                              
        while not chn.exit_status_ready():                                 
            if chn.recv_ready():                                           
                och = chn.recv(1024)                                       
                while och:                                                 
                    sys.stdout.write(och.decode())                         
                    och = chn.recv(1024)                                   
            if chn.recv_stderr_ready():                                    
                ech = chn.recv_stderr(1024)                                
                while ech:                                                 
                    sys.stderr.write(och.decode())                         
                    ech = chn.recv_stderr(1024)                            
        return int(chn.recv_exit_status())                                 

ssh = SecureSHell(remote='example.com', user='d0n')                       
ssh.call('find') 
```

# ipad - UIView 子类本身在视网膜中像素化

> ID：14643862
> 
> 赞同：3
> 
> 时间：2013-02-01T10:07:12.630
> 
> 标签：ipad, uiview, retina-display

我有一个 UIView 子类，它在需要时加载到 UIViewController 中。此视图在 iPhone 3/4/5 中运行良好，或者看起来运行良好。它在 iPad 1/2 中看起来也不错。但是对于 iPad 的视网膜屏幕，视图是像素化的。所有的标签、按钮、视图背景、文本都是像素化的。

之前我没有重写 drawRect 方法。但是有了其他一些提示，我做到了。但仍然没有解决问题。

任何想法，视网膜显示的问题在哪里？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T12:40:00.273

好的，我找出问题所在。

该视图使用一种嵌套视图，其中一个视图层被操作并调用

```
layer.shouldRasterize = YES; 
```

但是，如果我添加这一行，就可以解决问题。

```
layer.rasterizationScale = [UIScreen mainScreen].scale; 
```

在苹果 WWDC 2012 中，他们有一个关于此的视频。“抛光你的界面旋转”。他们在这里讨论了这个问题。 [https://developer.apple.com/videos/wwdc/2012/](https://developer.apple.com/videos/wwdc/2012/)

# css - css自定义字体不起作用

> ID：14643864
> 
> 赞同：1
> 
> 时间：2013-02-01T10:07:17.327
> 
> 标签：css, font-face

这是我的CSS的开始

```
@charset "utf-8";

@font-face {
    font-family: 'dax';
    src: url('font/Dax.eot');
src: url('font/Dax.eot?#iefix') format('embedded-opentype'), 
     url('font/Dax.woff') format('woff'), 
         url('font/dax-regular.ttf') format('truetype'), 
             url('font/Dax.svg') format('svg');
    font-weight: 300;
}

html, body {
font-family: "dax", Arial, serif;
.... 
```

这是我的字体文件，这是我的站点文件夹根目录的层次结构包含：index.html 和字体和....

字体包含：[屏幕](https://dl.dropbox.com/u/26009685/screen.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:17:35.060

试试 url('/font/dax-regular.ttf')

# heroku - 如何使用 Heroku CLI 管理我的独立 postgres

> ID：14643868
> 
> 赞同：0
> 
> 时间：2013-02-01T10:07:22.650
> 
> 标签：heroku, heroku-toolbelt

我是 Heroku 新手。我所做的是创建几个生产层数据库。然后我尝试了 Heroku 工具带。似乎它有很多有用的命令，我相信我可以用它来管理和监控我的数据库。此外，我创建了一个应用程序。似乎这对于能够执行以下命令很重要：

```
heroku pg:info 
```

这里的问题是我只能使用与我的应用程序关联的数据库（基本数据库）。我应该怎么做才能使用 Heroku 工具带 CLI 监控和使用我的生产数据库？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:16:24.730

第一个 Heroku Postgres 独立数据库实际上有一个为它们创建的幕后应用程序，因此我实际上鼓励您创建一个假应用程序放在数据库前面。这将允许您使用工具带来处理您的数据库，从而为您提供一些额外的工具。工具带中的 pg 命令将使您对数据库有基本的了解。除此之外，您还可以使用一个插件来告诉您缓存命中率和索引命中率等信息（[https://github.com/heroku/heroku-pg-extras/](https://github.com/heroku/heroku-pg-extras/)）。我还鼓励使用 Postgres 9.2，您可以在命令行配置时指定版本，这将为您提供 pg_stat_statements 这也将让您进一步了解（[http://craigkerstiens.com/2013/01/10/more-on-postgres-performance/](http://craigkerstiens.com/2013/01/10/more-on-postgres-performance/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:30:15.260

在 postgres.heroku.com 上创建的数据库不授予 CLI 访问权限。如果你想要 CLI 访问，你可以创建没有运行 dynos 的 Heroku 应用程序，只需将数据库计划附加到它们。

# php - 使用 PHP 将数据插入 MySQL 数据库时出错

> ID：14643872
> 
> 赞同：0
> 
> 时间：2013-02-01T10:07:45.640
> 
> 标签：php, mysql

我收到以下错误

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '16:45:40, 2012-12-18 16:45:40, Renovated Stone house in Perast, first line, 2012' at line 1 
```

这是问题所在的 SQL 查询

```
$sql =  "INSERT INTO `wp_posts` (`post_author`, `post_date`, `post_date_gmt`, `post_title`, `post_modified`, `post_modified_gmt`, `xml_id`)";
$sql .= " VALUES ({$postAuthor}, {$postDate}, {$postDate}, {$title}, {$postModified}, {$postModified}, {$xmlId});"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:11:21.610

这些值必须用引号引起来，并且您必须确保值中没有引号。

最好的方法是使用准备好的语句，例如使用[PHP 数据对象](http://php.net/manual/de/book.pdo.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T10:13:36.557

这一行：

```
$sql .= " VALUES ({$postAuthor}, {$postDate}, {$postDate}, {$title}, {$postModified}, {$postModified}, {$xmlId});"; 
```

应该：

```
$sql .= " VALUES ('$postAuthor', '$postDate', '$postDate', '$title', '$postModified', '$postModified', '$xmlId')"; 
```

删除包装的：'，其中列类型不是 varchar。

此外，您必须验证您正在转义变量中的特殊字符。[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:30:39.963

它应该工作

```
$sql =  "INSERT INTO `wp_posts` (`post_author`, `post_date`, `post_date_gmt`, `post_title`, `post_modified`, `post_modified_gmt`, `xml_id`)";
$sql .= " VALUES ('$postAuthor', '$postDate', '$postDate', '$title', '$postModified', '$postModified', '$xmlId')"; 
```

# database - 使用数组作为参数的存储查询

> ID：14643873
> 
> 赞同：1
> 
> 时间：2013-02-01T10:07:46.500
> 
> 标签：database, ms-access

我在 MS Access 数据库中有以下存储查询：

```
PARAMETERS pNumber Long;
SELECT *
FROM entries
WHERE id IN ([pNumber]); 
```

是否可以执行以下操作：

```
PARAMETERS pNumberArray Long Array;
SELECT *
FROM entries
WHERE id IN ([pNumberArray]); // pNumberArray = 33, 51, 84, 100 
```

该数组将由 VB6 提供

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:11:35.693

您需要一种稍微不同的方法：

```
SELECT *
FROM entries
WHERE InStr([pNumberArray],[ID])>0 
```

# django - 使用 django-tastypie 中相关资源的 POST 请求

> ID：14643877
> 
> 赞同：1
> 
> 时间：2013-02-01T10:07:56.450
> 
> 标签：django, tastypie

总的来说，我对 django-tastypie 和 django 还是很陌生。我在使用`tastypie`. 我有一个带有附加字段的配置文件，并与带有`OneToOneField`. 我的客户端表单将与所有必要的数据一起提交，以创建一个新的 User`POST`到`UserResource`.

模型.py

```
class Profile(models.Model):
    USER_TYPE_CHOICES = (
        ('A', 'Agent'),
        ('U', 'User'),
    )
    user = models.OneToOneField(User)
    type = models.CharField(max_length=1, choices=USER_TYPE_CHOICES, default='U')
    middle_name = models.CharField(blank=True, default='', max_length=100)
    created_on = models.DateTimeField(default=datetime.now())
    updated_on = models.DateTimeField(editable=False, auto_now=True, auto_now_add=True)

    def __unicode__(self):
        return '%s' % (self.username)

    def __save__(self, *args, **kwargs):
        self.updated_on = datetime.now()
        super(Profile, self).save()

def create_user_profile(sender, instance, created, **kwargs):
    if created:
        profile, created = Profile.objects.get_or_create(user=instance)

models.signals.post_save.connect(create_user_profile, sender=User) 
```

api.py

```
class ProfileResource(ModelResource):
    class Meta:
        queryset = Profile.objects.all()
        resource_name = 'profile'
        excludes = ['updated_on', 'created_on']
        filtering = {
            'email': ALL,
            'type': ALL,
        }

class UserResource(ModelResource):
    profile = fields.ToOneField(ProfileResource, 'profile', full=True)
    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'
        excludes = ['password', 'is_active', 'is_staff', 'is_superuser', 'date_joined', 'last_login']
        filtering = {
            'username': ALL,
            'email': ALL,
        } 
```

如何以填充`Profile`和的方式准备 POST 请求中的数据`User`？而且，模型与`ForeignKey`或`ManyToMany`关系如何？

# php - 尽管错误报告已关闭，但 PHP 警告

> ID：14643878
> 
> 赞同：3
> 
> 时间：2013-02-01T10:08:04.437
> 
> 标签：php, wordpress

我刚开始在我正在开发的网站的前端和后端（使用 Wordpress）收到一些警告。`error_reporting(0);`使用放在 wp-config.php 文件的开头来关闭错误报告。我也尝试将它放入主 index.php 文件中，但无济于事。

警告今天才开始出现，并且没有出现在网站的实时版本中，至少 99% 的代码相同，相同的数据库。

以下是错误（domain.com 的替换域名）：

> 警告：is_dir() [function.is-dir]：open_basedir 限制生效。文件（/）不在允许的路径内：/var/www/virtual/domain.com/htdocs/wp 中的 (/var/www/virtual/domain.com/:/usr/share/php/) -includes/functions.php 在第 2104 行
> 
> 警告：file_exists() [function.file-exists]：open_basedir 限制生效。文件（/）不在允许的路径内：/var/www/virtual/domain.com/htdocs/wp 中的 (/var/www/virtual/domain.com/:/usr/share/php/) -includes/functions.php 第 2095 行
> 
> 警告：is_dir() [function.is-dir]：open_basedir 限制生效。文件（/）不在允许的路径内：/var/www/virtual/domain.com/htdocs/wp 中的 (/var/www/virtual/domain.com/:/usr/share/php/) -includes/functions.php 在第 2104 行

为什么我会收到这些消息？不应该`error_reporting(0)`关闭所有警告吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:38:15.587

尝试：

```
ini_set("display_errors", "off"); 
```

但是，根据您的主机，您可能无法像这样动态更改 ini 设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:20:33.540

一些评论者似乎不知道 Wordpress 如何设置错误报告。他们像这样或那样说“应该做”之类的东西。但事实是在 Wordpress 中，您所要做的就是转到 wp-config.php 并将 WP_DEBUG 从 true 更改为 false。这将完全符合您的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T17:00:56.663

OK，所以最后我通过直接修改php.ini文件解决了这个问题。这是行：

```
php_admin_value open_basedir none 
```

谢谢，@halfer

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-05T18:54:23.053

在 wordpress 中，只需以下几行代码即可[打开错误报告：](http://www.themesrefinery.com/turn-wordpress-error-reporting/)

```
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
@ini_set('display_errors', 0); 
```

# php - 从 PHP 脚本发送电子邮件的最佳方式是什么？[2]

> ID：14643879
> 
> 赞同：5
> 
> 时间：2013-02-01T10:08:19.833
> 
> 标签：php, sendmail, spam-prevention

我希望这个问题不会太具体。但我真的需要问。我们都知道我们不能完全阻止我们的电子邮件进入垃圾邮件箱，对吗？但我想我们可以减少发送到那里的电子邮件数量。

到目前为止，我使用 PHP 的内置函数 mail() 但我想还有其他方法对吗？它们是什么，你对这个问题的最佳实践是什么？

摘自：[从 PHP 脚本发送电子邮件的最佳实践是什么？](https://stackoverflow.com/questions/5994732/what-is-the-best-practice-to-send-emails-from-php-script) 那是一年多了，因此是新问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:10:54.823

[斯威夫特梅勒](http://swiftmailer.org/)

这很棒！我在所有项目中都使用了它，效果很好！

关于垃圾邮件的邮件，我建议[这篇](http://emailmarketing.comm100.com/email-marketing-tutorial/emails-going-to-junk.aspx)文章

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-06T07:11:33.057

我喜欢 PHPMailer，它现在在 github 上维护。如果你愿意，你可以检查然后转到页面：[https ://github.com/Synchro/PHPMailer](https://github.com/Synchro/PHPMailer)

# linux - 关于shell变量和环境变量

> ID：14643882
> 
> 赞同：2
> 
> 时间：2013-02-01T10:08:29.317
> 
> 标签：linux, shell

我正在阅读 Wrox，开始 Linux 编程。但我有一个关于 shell 变量的问题。

这是一个名为 test.sh 的 shell 脚本：

```
#! /bin/bash
read test
echo $test
exit 0 
```

然后我 chmod 脚本：

```
$ chmod +x test.sh
$ ./test,sh 
```

当我输入“ok”时，它会回显“ok”。

但是当我回到 shell 界面时，我输入了：

```
$ echo $test 
```

它什么也没返回...

我不知道为什么 $test 不像脚本那样返回“ok”......而且这本书没有提到它......

提前致谢：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:16:49.370

这些变量仅存在于创建它们的进程中（如果它们被导出，也存在于子进程中）。运行脚本会创建一个新进程，脚本结束后，它的所有变量都会丢失。

您可以通过“采购”它来运行脚本而无需启动新进程：

```
. ./test.sh 
```

但是，您应该删除`exit`then，否则它将退出您当前的 shell。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T10:15:30.483

这是因为它们是不同的进程，要“包含”其他脚本运行的源

`. test.sh`

test.sh 应该没有退出：

```
#! /bin/bash
read test
echo $test 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:17:36.357

**进程位置**

> 环境变量的值是本地的，这意味着它们特定于正在运行的进程或为其设置它们的进程。这意味着如果我们打开两个终端窗口（这意味着我们有两个单独的 bash 进程正在运行），并在其中一个窗口中更改环境变量的值，则该更改将不会被另一个窗口中的 shell 或任何当前在桌面上的其他程序。

为了您的更多理解：[https ://help.ubuntu.com/community/EnvironmentVariables](https://help.ubuntu.com/community/EnvironmentVariables)

# python - Python：刽子手游戏，未在正确位置显示字母

> ID：14643886
> 
> 赞同：0
> 
> 时间：2013-02-01T10:08:44.247
> 
> 标签：python, string, replace

我正在用 Python 为 GCSE 计算任务制作一个刽子手游戏，我所要做的就是确保当有人输入正确的字母时，它将把它放在单词中的正确位置。代码如下：

```
def guess_part(word):
    lives = 6
    LetterCount = 0
    LetterMask = ""
    for x in range(len(word)): #run for loop for the amount of the length of word
        LetterMask = LetterMask + "*"
    print LetterMask
    while lives != 0 and LetterMask.find("*")!=-1: #while lives are not 0 and the amount of asterisks are not -1
        LetterGuess = raw_input("Enter a letter to guess?")
        LetterCount = 0
        for char in word:
            LetterCount = LetterCount + 1
        if LetterGuess not in word:
            lives = lives - 1
        else:
            if LetterGuess in word and lives != 0:
                print "Good Guess."
                LetterMask = list(LetterMask)
                LetterMask[LetterCount-1] = LetterGuess
                LetterMask = "".join(LetterMask)
                print LetterMask
            else:
                print "Incorrect."
    if lives == 0:
        print "You have ran out of lives, your word was: ", word
    else:
        print "You have correctly guess the word! Score: ", lives
        print "Play again?"
        again = raw_input("")
        again.lower()
        if again == "y":
            menu()
        elif again == "n":
            exit()
        else:
            exit()

def rand_word():
    from random import randrange
    random_words = ['extraordinary','happy','computer','python','screen','cheese','cabaret','caravan','bee','wasp','insect','mitosis','electronegativity','jumper','trousers']
    word = random_words[randrange(0, 15)] #pick a random number, and use this number as an index for the list, "random_words".
    guess_part(word) #call the function, "guess_part" with the parameter "word"

def user_word():
    print "All words will be changed to lowercase."
    print "Enter the word you would like to guess."
    print ""
    validation_input = False
    while validation_input == False: #while the validation input is not False, do below.
        word = raw_input("")
        if word.isalpha(): #If word contains only strings, no numbers or symbols, do below.
            word = word.lower() #set the string of variable, "word", to all lowercase letters.
            guess_part(word) #call the function, "guess_part" with the parameter, "word".
            validation_input = True #Break the while loop
        else:
            print "Word either contained numbers or symbols."

def menu():
    print "Hangman Game"
    print ""
    print "Ashley Collinge"
    print ""
    print "You will have 6 lives. Everytime you incorrectly guess a word, you will lose a life."
    print "The score at the end of the game, is used to determine the winner."
    print ""
    print "Would you like to use a randomly generated word, or input your own?"
    print "Enter 'R' for randomly generated word, or 'I' for your own input."
    decision_bool = False
    decision_length = False
    while decision_bool == False: #While decision_bool equals "False", do below.
        while decision_length == False: #While decision_length equals "False", do below.
            decision = raw_input("")
            if len(decision) == 1: #If the length of decision eqausl 1, do below.
                decision_length = True
                decision = decision.capitalize() #Capitalize the string value of decision.
                if decision == "R": #if the value of decision, eqauls "R".
                    print "You chose randomly generated word."
                    print ""
                    print "Forwarding..."
                    decision_bool = True
                    print ""
                    rand_word() #Call the function, rand_word()
                elif decision =="I": #If decision equals "I", do below.
                    print "You chose to input your own word."
                    print ""
                    print "Forwarding..."
                    decision_bool = True
                    print ""
                    user_word() #Call the function, user_word()
                else:
                    print "You entered an incorrect value for the question. Try again."
            else:
                print "You entered an incorrect value for the question. Try again."

menu() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:43:54.303

下面的代码可能会回答您的问题：
“我所要做的就是确保当有人
输入正确的字母时，它将把它放在单词中的正确位置。”
它不验证输入。
*提示*：如果您验证，我建议您查看`re`模块
由于`print`声明，如果您使用 python 3+，此代码将不起作用：

```
from random import choice

def found(s , v):  
    # returns a list of indexes if v is in s
    # else it returns None
    return [i for i in range(len(s))if s[i] == v]

def guess_word(word, mask, lives):  

    # returns a 2 tuple : lettermask and the lives left
    # just like  'guess_part' but with 2 more para's  
    # to increase flexibility.
    # Beware !!! this function does not check the para's

    lettermask=list(len(word)* mask)
    livesleft ='You have {} lives left .\n'
    guess='Plz type a char a-z.\n>:'
    print word # just for checking
    while mask in lettermask:   
        if lives < 1: break
        print 'lettermask= '+ ''.join(lettermask)
        p = livesleft.format(lives)
        letterguess= raw_input(p + guess)
        print 'letterguess= '+ letterguess
        result = found( word, letterguess)
        if result:  
            print 'Good guess :) '
            for i in result :
                lettermask[i]=word[i]
        else:   
            print 'Wrong guess :( '
            lives-=1
    return lettermask,lives

random_words = ['extraordinary','happy','computer',
'python','screen','cheese','cabaret',
'caravan','bee','wasp','insect','mitosis',
'electronegativity','jumper','trousers']

word=choice (random_words)
# or word= raw_intput('pls type a word')
mask='*'
lives= 6
resultS,lives = guess_word(word, mask, lives)
if mask in resultS:  
   print 'Your result: {}'.format("".join(resultS))
   print 'You have failed,the word was: {}'.format(word)
else:
   print 'Congrats !!! Your score is: {}'.format(lives) 
```

# xml - 将新元素插入 XML

> ID：14643888
> 
> 赞同：1
> 
> 时间：2013-02-01T10:08:45.247
> 
> 标签：xml, vb.net

我有一个将新课程插入课程 XML 的程序。这是 XML 文件：

```
Course.xml

<Courses>

   <Course>
      <Name>ABC course</Name>
      <Lessons>
         <Lesson>
           <Lesson_name>Learn ABC!</Lesson_name>
           <Lesson_date>XX/XX/XXXX</Lesson_date>
         </Lesson>

        'WANT TO ADD A LESSON HERE!!!

      </Lessons>
   </Course>

   <Course>
      <Name>DEF Course</Name>
      <Lesson>
        <Lesson_name>Learn DEF!</Lesson_name>
        <Lesson_date>XX/XX/XXXX</Lesson_date>
      </Lesson>
   </Course>

</Courses> 
```

我想在不影响现有课程和其他元素的情况下插入包含所有这些节点（例如 、 等`Lesson`）`Lesson_date`的课程。`Lesson_name`有什么简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:38:19.667

像这样的东西应该工作：

```
Dim xmlDoc As XmlDocument = New XmlDocument()
xmlDoc.Load("Course.xml")

Dim courseName = "ABC course"
With xmlDoc.SelectSingleNode("/Courses/Course[Name = '" & courseName & "']/Lessons").CreateNavigator().AppendChild()
    .WriteStartElement("Lesson")
    .WriteElementString("Lesson_name", "Learn something else!")
    .WriteElementString("Lesson_date", "YY/YY/YYYY")
    .WriteEndElement()
    .Close()
End With 
```

如果要修改实际文件，可以`xmlDoc.Save()`在此之后使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:13:55.237

通过使用**[DataSet.ReadXml 方法](http://msdn.microsoft.com/en-us/library/system.data.dataset.readxml%28v=vs.71%29.aspx)**，您可以做到这一点。更改 Dataset 表中的值并使用**[DataSet.WriteXml 方法](http://msdn.microsoft.com/en-us/library/system.data.dataset.writexml%28v=vs.71%29.aspx)。**

# c# - 通过电子邮件发送网页

> ID：14643890
> 
> 赞同：-2
> 
> 时间：2013-02-01T10:08:54.423
> 
> 标签：c#, asp.net, email, webpage

我需要在电子邮件中打开/加载/显示网页（而不是在电子邮件中发送页面的 html），例如 iframe（不是在电子邮件中工作）。也想启用`JS`它。

根据我的研究/知识，我没有找到任何可能的方法，但是是否有任何黑客可以实现这一点。

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:11:08.693

在此处查看我的答案-如何将网页作为电子邮件发送： [如何将网页作为电子邮件发送？](https://stackoverflow.com/questions/6881528/how-to-send-webpage-as-email-message/6881546#6881546)

您需要将您的样式内联或放在网页的头部。显然 javascript 也不起作用，如果您使用图像，则需要使用完整的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:17:59.497

不，不可能像您描述的那样在大多数电子邮件客户端中显示网站：

*   引用的资源 CSS 和图像在大多数电子邮件客户端中不可用
*   大多数电子邮件客户端不会运行 javascript

作为一种解决方法，您将能够发送嵌入样式的 html 电子邮件。一旦客户端下载了图像（主要是在要求用户这样做之后），您的 html 电子邮件将非常类似于电子邮件客户端中的网页。

# annotations - matplotlib的同一注释中的不同字体大小？

> ID：14643891
> 
> 赞同：30
> 
> 时间：2013-02-01T10:08:54.450
> 
> 标签：annotations, matplotlib, font-size, treemap, rectangles

我需要用几条*不同*长度的数据线来注释一个 pylab 矩形。通过 matplotlib 文档和谷歌搜索，我找不到给注释的不同部分不同大小的方法。

以下代码段演示了该问题：

```
import pylab
from matplotlib.patches import Rectangle
pylab.rcParams['verbose.level'] = 'debug-annoying' 

def draw_rectangle(lower, upper, entry):
    ax = pylab.subplot(111)
    r = Rectangle( lower, upper[0]-lower[0], upper[1] - lower[1],
            edgecolor='k')
    ax.add_patch(r)

    textRank = str(entry['rank'])
    textTeamName = entry['teamName']
    textSubmissionDate = entry['submissionDate']
    text = textRank + "\n" + textTeamName + "\n" + textSubmissionDate

    ax.add_artist(r)
    rx, ry = r.get_xy()
    cx = rx + r.get_width()/2.0
    cy = ry + r.get_height()/2.0

    ax.annotate(text, (cx, cy), color='w', weight='bold', ha='center', va='center', size=14)

if __name__ == '__main__':
    entry = {'rank': 22, 'submissionDate': '12/21/2012 4:58:45 AM', 'teamName': 'A very very very very very very very very very very long name'}
    lower = [0,0]
    upper = [1,1]
    draw_rectangle(lower, upper, entry)
    pylab.show() 
```

![一个具有不同长度数据的矩形](../Images/cb632096c782f96355aff710cbd7fcec.png) 例如，有没有办法让“teamName”的字体大小与“rank”的字体大小不同的注释？

*另一个问题*是我找不到字体大小与缩放相关的方法：
我正在创建一个树形图，即 pylab 窗口填充了不同大小的矩形。如果我想为不同的矩形创建注释，长数据需要非常小（保持在各自矩形的边界内）。但是，我希望长数据线的字体大小随着放大而**增大**。 ![带注释的树状图](../Images/447020158fc405c56e1e9e1fdfb3f9dd.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2020-08-17T11:13:33.397

首先制作你的情节，然后使用`ax.annotate`，迭代你的 x 坐标、y 坐标、标签和字体大小。

```
import matplotlib.pyplot as plt

X = [1,2,3,4,5]
Y = [1,1,1,1,1]
labels = 'ABCDE'
sizes = [10, 15, 20, 25, 30]

fig, ax = plt.subplots()

ax.scatter(X, Y)

for x, y, label, size in zip(X, Y, labels, sizes):
    ax.annotate(label, (x, y), fontsize=size)

plt.show() 
```

[![具有不同字体大小的绘图](../Images/6ed7af9291f26cc86ae4dd32f6c8364f.png)](https://i.stack.imgur.com/CavLX.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-02T07:55:46.953

我找不到使用不同字体创建注释的方法，因此我将创建一个辅助函数，该函数将计算注释每行使用的字体粗细，以及相关的 (cx, cy)，
然后调用ax.annotate 多次。

# android - Android：屏幕方向错误 + VM 不允许我们分配 x 字节

> ID：14643895
> 
> 赞同：1
> 
> 时间：2013-02-01T10:09:15.730
> 
> 标签：android, bitmap, camera, orientation

我在我的 android 应用程序中使用相机，并以纵向模式握住手机（cameraView 处于横向模式，这是第一件奇怪的事情），当我将手机置于横向模式时，出现错误。

```
VM won't let us allocate ... bytes 
```

显示的错误行是

```
setContentView(R.layout.gameactivity); 
```

这篇文章很有趣[原因是：java.lang.OutOfMemoryError：位图大小超出 VM 预算](https://stackoverflow.com/questions/10314527/caused-by-java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget) 但是我在我的活动中没有使用位图，所以我不知道为什么我会收到有关位图的错误

```
02-01 10:07:30.301: E/AndroidRuntime(5715): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
02-01 10:07:30.301: E/AndroidRuntime(5715):     at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
02-01 10:07:30.301: E/AndroidRuntime(5715):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:460)
02-01 10:07:30.301: E/AndroidRuntime(5715):     at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
02-01 10:07:30.301: E/AndroidRuntime(5715):     at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
02-01 10:07:30.301: E/AndroidRuntime(5715):     at android.content.res.Resources.loadDrawable(Resources.java:1709)
02-01 10:07:30.301: E/AndroidRuntime(5715):     at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
02-01 10:07:30.301: E/AndroidRuntime(5715):     at android.widget.ImageView.<init>(ImageView.java:118)
02-01 10:07:30.301: E/AndroidRuntime(5715):     at android.widget.ImageView.<init>(ImageView.java:108)
02-01 10:07:30.301: E/AndroidRuntime(5715):     ... 27 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:25:11.657

你有内存泄漏。
当设备更改布局时，将再次创建 Activity。很可能你得到了一些不会被释放的巨大静态变量等。
也许在 Manifest 中的 Activity 中添加“onConfigChanged:orientation”标签可以帮助您防止内存泄漏，但这并不是适用于所有情况的好解决方案。
还有几个站点向您展示如何找到内存泄漏，就像[这样](http://therockncoder.blogspot.de/2012/09/fixing-android-memory-leak.html)

# ruby-on-rails-3 - 轮胎通过参数建模并在搜索中使用此参数

> ID：14643899
> 
> 赞同：0
> 
> 时间：2013-02-01T10:09:25.987
> 
> 标签：ruby-on-rails-3, tire, param

我试图从我的轮胎搜索结果中排除 current_user.id，但不知道如何将参数传递给轮胎并使用它而不是固定值进行搜索。 **如何将 current_user.id 传递给模型并将其排除在搜索结果中？**

**主动记录方式：**

```
Profile.where("user_id != ?", current_user.id) 
```

**我的轮胎搜索块：**

```
if params['people']
  tire.search(load: true, page: params[:page], per_page: 20, :default_operator => 'AND') do
    query do
      boolean do
        must_not { string 'user_id: 1' } <== this works hardcoded
        must_not { string 'user_id: < instead of 1 user current_user.id pass in true params?' }          
      end
    end
    to_curl
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:47:27.500

您是否尝试过使用 README 在[https://github.com/karmi/tire](https://github.com/karmi/tire)上提到的“命令式风格” ？这是自述文件的直接引用：

```
search = Tire::Search::Search.new('articles')
search.query  { string('title:T*') }
search.filter :terms, :tags => ['ruby']
search.sort   { by :title, 'desc' }
search.facet('global-tags') { terms :tags, :global => true }
# ...
p search.results 
```

也许“声明式”样式会在彼此内部折叠成很多块，然后上下文（current_user）就丢失了。您究竟是如何在布尔条件中插入 current_user_id 的？

# php - array_map 导致服务器崩溃

> ID：14643901
> 
> 赞同：4
> 
> 时间：2013-02-01T10:09:33.327
> 
> 标签：php, windows, apache, codeigniter, crash

以下代码正在破坏我的 apache Web 服务器。当我从中删除数据库查询时`parse_service_rows()`，apache 不会崩溃。

我还尝试在没有帮助的情况下从查询中删除 WHERE 子句。

我的代码如下所示：

```
public function tab($tab_name = '') {
    /*
     * CODE TO GET ROWS
     */
    $service['rows'] = array_map(array($this, 'parse_service_rows'), $service['rows']);
}

private function parse_service_rows($row) {

    // This query causes apache to crash
    $order = $this->db->get_where('services', array(
            'service_user_id' => $this->user->get('user_id'),
            'service_firm_id' => $this->firm->id,
            'service_type' => $row['type'],
            'service_object_id' => $row['object_id']
    ), 1)->row_array();

    return $row;
} 
```

但是，当我尝试使用`foreach`而不是`array_map`：

```
foreach ($service['rows'] as $key => $row) {
    $service['rows'][$key] = $this->parse_service_rows($row);
} 
```

Windows 错误窗口提供以下信息：

```
Problem Event Name: APPCRASH
  Application Name: httpd.exe
  Application Version:  2.4.2.0
  Application Timestamp:    4fafa3e6
  Fault Module Name:    php5ts.dll
  Fault Module Version: 5.4.4.0
  Fault Module Timestamp:   4fd8f85c
  Exception Code:   c0000005
  Exception Offset: 000713cd
  OS Version:   6.1.7600.2.0.0.256.1
  Locale ID:    1061
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T21:49:42.873

您应该检查您的 IIS PHP 错误日志，您应该能够通过您的 IIS 管理员在 PHP 配置中找到它并从那里读取它。

确保您的 PHP 日志级别至少为 E_ALL 并且打开了 error_reporting，如果这是一个开发服务器，您可能也应该打开 display_errors。这些都是 PHP.ini 中的所有选项，您也可以从 IIS 管理控制台进行编辑。

如果这没有帮助，这里有一些你应该看看的地方；

*   在查询之前调用 $this->user->get('user_id') 并将结果设置为变量的实例。这将显示用户类是否已实例化，以及用户类中 get 函数的范围是否存在任何问题。
*   也可以在 get_where 之外调用它，$this->firm->id, id 可能不是公共属性，这也会导致 PHP 致命。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T18:04:00.490

@Kristian您是否尝试过在tab（）之前声明parse_service_rows（）？我记得在某处读过，如果在调用函数之后声明回调函数，则使用回调可能会出现问题。

# qt5 - QT5 和 QSqlResult.h

> ID：14643903
> 
> 赞同：0
> 
> 时间：2013-02-01T10:09:34.647
> 
> 标签：qt5, qsqltablemodel, qsqlquery

我正在尝试将我的代码从 Qt 4.8 移植到 Qt5。我发现枚举 VirtualHookOperation 未在第 128 行 QSqlResult.h 中填充。在 Qt5 中，枚举是空的。我在 changes-5.0.0 文档中的任何地方都没有发现此更改。我正在尝试构建 QSqliteSeeDriver.cpp 作为我项目的一部分。

请让我知道任何解决方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:11:31.423

来自 git 上 qt5 提交的评论：“ QSqlResult：用虚函数替换虚钩子

与会破坏二进制兼容性的虚拟函数不同，virtual_hook() 用于实现虚拟功能。现在，由于 Qt 5.0 允许破坏二进制兼容性，我们借此机会使用真正的虚函数来简化代码。

SetNumericalPrecision --> setNumericalPrecisionPolicy()

下一个结果 --> 下一个结果（）

DetachFromResultSet --> detachFromResultSet()

批处理操作 --> execBatch() "

# java - 停止在 ear-file 中部署重复 jar 的策略

> ID：14643905
> 
> 赞同：5
> 
> 时间：2013-02-01T10:09:40.623
> 
> 标签：java, jakarta-ee, package, ear

我对耳朵文件有问题，无法在多个地方获取相同的库，因此会产生冲突。问题是我们使用了很多我们根本无法控制的 3:rd 方库。所以，我们最终到处都抛出了很多排除项，这对我来说似乎不对，这很容易出错，而且我们也没有在本地安装的 jboss 上检测到问题。

所以，我想执行某种预打包步骤，简单地删除重复的 jar 文件。如果部署在两个地方，请删除依赖项目中的那些。例如 jboss-seam.jar 包含在我们使用的几个项目中。其中一些依赖项是通用的，包含在 parent.pom 中。一些依赖项是特定于 ejb 或特定于 web 的，因此包含在 ejb 和/或 web-project 中。在 ear 文件中，jboss-seam.jar 包含在三个地方，并弄乱了类加载器。所以应该有一些机制来简单地检查一些简单的规则，比如，如果在耳朵里，不应该在战争中，而不是必须创建带有排除项的 xml-hell。

有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:09:07.543

听起来您正在使用 maven 来构建您的工件？如果是这样，最好的办法是*标签*`<exclusions>`。

使用它的`mvn dependency:tree`自由应用程序`grep`可以快速找到导致传递依赖的冲突版本的第 3 方工件。

我理解你对它的看法*似乎不对*，在一个完美的世界里，每个人都应该更好地为他们发布的工件编写 POM，但这是一个不完美的世界......我什至不确定它是否能完美地适用于所有人情况，也许对maven有更好了解的人可以详细说明。

在相同的工件存在于例如的情况下。两者都`ear/lib/`可以`ear/webapp/WEB-INF/lib`在`<scope>provided</scope>`webapp 的 POM 中使用：

```
<dependency>
    <artifactId>spring-core</artifactId>
    ...
    <scope>provided</scope>
</dependency> 
```

至少在 Weblogic 上，如果您将 jar 放在`<earfile>/APP-INF/lib`文件夹中，默认情况下这是有效的，对于其他 EE 容器，我相信您可以实现相同的添加

```
<application>
    <library-directory>APP-INF/lib</library-directory>
</application> 
```

到`application.xml`描述符。

我希望这会有所帮助。

干杯，

# c# - 手动复制数组与 Array.CopyTo() 有何不同？

> ID：14643907
> 
> 赞同：0
> 
> 时间：2013-02-01T10:09:48.337
> 
> 标签：c#, asp.net, .net

**场景**：我即将实现一个缓存功能，我想缓存从 Web 服务接收到的序列化对象树。序列化对象以字节 [] 的形式出现，我基本上只想创建一个我想要存储的第二个字节 []，以防我想恢复原始数据而不再次查询 Web 服务。

**问题**：如果我使用简单的循环将源字节 [] 复制到目标字节 [] 中，例如：

```
for (int i = 0; i < source.Length - 1; i++)
   target[i] = source[i]; 
```

那么 BinaryFormatter 无法反序列化该新字节 []。异常说：

> 二进制流“0”不包含有效的 BinaryHeader。可能的原因是无效的流或序列化和反序列化之间的对象版本更改。

但是，如果我使用 Buffer.BlockCopy() 或 Array.CopyTo() 复制数组，则 BinaryFormatter 反序列化复制的字节 [] 没有问题。

所以我的问题是，有谁知道为什么以及如何在循环中复制该数组与使用这些函数不同？在第一种方法中，那个 byte[] 到底缺少什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T10:10:33.530

看这个：

```
for (int i = 0; i < source.Length - 1; i++) 
```

那就是复制*除了最后一个字节之外*的所有内容。你要：

```
for (int i = 0; i < source.Length; i++) 
```

只是调用会更简单`Clone()`：

```
byte[] target = (byte[]) source.Clone(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:29:26.117

**Array.CopyTo**和使用循环之间的主要区别在于， **Array.CopyTo**调用直接在 .NET CLR 中实现的本机 C++ 方法。它还执行更深入的错误检测。

如果您只需要将一个数组复制到另一个数组，请使用**Array.CopyTo**，因为它在处理大型数组时会稍微快一些。

# c# - WebGrid 不显示数据

> ID：14643909
> 
> 赞同：1
> 
> 时间：2013-02-01T10:09:52.797
> 
> 标签：c#, asp.net, webgrid

我正在使用 asp.net mvc3(c#) 中的 WebGrid。我已经完美地完成了所有编码，但我不知道为什么 WebGrid 没有在页面上呈现。我不知道我做错了什么。我已经调试了代码和数据在里面

```
var grid = new WebGrid(source: Model, defaultSort: "CRM_ID");%> 
```

但是，它没有显示。

这是我的 ASPX 页面代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<IEnumerable<CRMEvent.Models.CRM.DatabaseEntities.CRM_Dashboard_Requests>>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Dashboard
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<h2>Dashboard</h2>
    <%    
        var grid = new WebGrid(source: Model, defaultSort: "CRM_ID");%>
<div id="grid">

    <%
        grid.GetHtml(columns: grid.Columns(
          grid.Column(columnName: "CRM_ID",header: "CRM ID", canSort: true),
         grid.Column(columnName: "MDLNO", header: "MDLNO", canSort: true),
         grid.Column(columnName: "EMP_Name", header: "Employee", canSort: true),
         grid.Column(columnName: "SERVICE_TYPE", header: "Service Type", canSort: true),
         grid.Column(columnName: "Requested_Amount", header: "Requested Amount", canSort: true),
         grid.Column(columnName: "Created_Date", header: "Date", canSort: true)
         ));
   %>
    </div>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:23:07.307

试试这样。`<%=`

```
<%= grid.GetHtml(columns: grid.Columns(
          grid.Column(columnName: "CRM_ID",header: "CRM ID", canSort: true),
         grid.Column(columnName: "MDLNO", header: "MDLNO", canSort: true),
         grid.Column(columnName: "EMP_Name", header: "Employee", canSort: true),
         grid.Column(columnName: "SERVICE_TYPE", header: "Service Type", canSort: true),
         grid.Column(columnName: "Requested_Amount", header: "Requested Amount", canSort: true),
         grid.Column(columnName: "Created_Date", header: "Date", canSort: true)
         )); %> 
```

甚至`<%: %>`是 html 编码的这种语法。

# android - 如何在android中创建多窗格布局

> ID：14643910
> 
> 赞同：5
> 
> 时间：2013-02-01T10:09:53.057
> 
> 标签：android, android-fragments

我想制作使用多窗格布局的屏幕。在屏幕中，左侧显示自定义列表视图，右侧显示有关单击项目的详细信息。当我从该屏幕中仅显示单个屏幕（例如列表）中运行应用程序时。但是在屏幕上显示列表和详细信息页面的横向模式下。请建议我可以做什么或示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T10:13:30.907

[使用Fragments](http://developer.android.com/guide/components/fragments.html)相当容易

我认为这正是你想要的。

*Android 在 Android 3.0（API 级别 11）中引入了 Fragment，主要是为了在平板电脑等大屏幕上支持更动态和灵活的 UI 设计。*

![Android 开发者示例](../Images/5061b5ac6c92d581a0db0f070fd1a33d.png)

**小费：**

***如果您更新您的 SDK 和 Eclipse 的 ADT 插件（如果您正在使用它）。您甚至可以基于片段示例创建一个新项目！这是非常丰富且易于调整的。您的项目必须具有最低 SDK 版本 11。***

通常，如果您有一个小手机屏幕或一个大平板电脑屏幕，它会使用[配置限定符](http://developer.android.com/guide/practices/screens_support.html#qualifiers)进行检查，这个检查在您的示例项目中很容易找到（抱歉，我没有太多时间为您找到一个好的示例）。现在您可以将此配置限定符从 更改`large`为`large-landscape`，或任何您想要的。

# croogo - 克鲁戈地区

> ID：14643911
> 
> 赞同：0
> 
> 时间：2013-02-01T10:09:54.480
> 
> 标签：croogo

我在显示不同区域的元素时遇到了一些问题。

在安装和使用 Croogo 一段时间后，我尝试了几次添加自定义元素和自定义菜单。如果我选择“正确”区域（安装后 Croogo 使用的元素的默认区域），一切都很好，我可以毫无问题地添加任何我想要的东西。

无论如何，当我选择任何其他区域来显示我的元素（页眉、页脚、左侧）时，什么都不会显示（查看页面的源代码，我注意到该元素甚至没有呈现）。我错过了什么吗？我如何才能实际使用不同的区域来显示元素/块？

我对 9 个区域（名为 regionX，X=[1,..,9]）以及页眉、页脚、左、右可用也有点困惑。他们的目的是什么？它们实际上代表屏幕上的一个区域还是没有配置？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T06:51:46.727

您可能需要调整您的 theme.json 以便加载所需的区域。

# properties - SoapUI 服务模拟 - 如何在模拟响应之间传输值？

> ID：14643914
> 
> 赞同：1
> 
> 时间：2013-02-01T10:09:56.097
> 
> 标签：properties, scope, mocking, soapui

有没有办法将 groovy 脚本在 mockResponse1 上下文中生成的值传输到项目范围属性。那么我想在另一个脚本mockResponse2中使用这个值吗？我可以将值从 Request1 传输到 Request2（客户端）。似乎无法弄清楚如何为 mockResponses （服务器端）做这件事。

模型：mockResponse1.someVar -> project.Property -> mockResponse2.someOtherVar

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:07:25.453

我找到了解决方案。这适用于 mockResponse 脚本：

```
// get project scoped property
def a = mockResponse.mockOperation.mockService.project.getPropertyValue("someProjectProperty")
// set project scoped property
mockResponse.mockOperation.mockService.project.setPropertyValue("someProjectProperty", someVar) 
```

# ios - 如何在 iOS 上流式传输音频并控制音量？

> ID：14643916
> 
> 赞同：1
> 
> 时间：2013-02-01T10:10:01.797
> 
> 标签：ios, objective-c, avaudioplayer, avplayer

我开发了一个`iOS`应用程序，可以同时播放两个单独的音频流。为此，我正在使用`AVPlayer`：

```
//Use URL to set up the speech radio player.
NSURL *urlStreamSpeech = [NSURL URLWithString:self.urlAddressSpeech];
playerSpeech = [AVPlayer playerWithURL:urlStreamSpeech];

//Use URL to set up the music player.    
NSURL *urlStreamMusic = [NSURL URLWithString:self.urlAddressMusic];
playerMusic = [AVPlayer playerWithURL:urlStreamMusic]; 
```

我现在正在尝试实现音量控制，以便用户能够单独控制音频流的音量。正如我尝试过的那样，我得出的结论是 AVPlayer 类没有音量属性。我也看了`AVAudioPlayer`课程，但据我所知，该课程只能播放本地音频文件，不能播放音频。

所以我的问题是：如何控制流式音频的音量`iOS`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T00:14:14.650

```
MPMusicPlayerController* musicPlayer = [MPMusicPlayerController iPodMusicPlayer];
[musicPlayer setVolume:[SliderVolumen value]]; 
```

只在设备中工作，没有模拟器。

与 AVPlayer 兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:11:01.653

```
NSString* resourcePath = url; //your url
NSData *_objectData = [NSData dataWithContentsOfURL:[NSURL URLWithString:resourcePath]];
NSError *error;

app.audioPlayer = [[AVAudioPlayer alloc] initWithData:_objectData error:&error];
app.audioPlayer.numberOfLoops = 0;
app.audioPlayer.volume = 1.0f;
[app.audioPlayer prepareToPlay];

if (app.audioPlayer == nil)
    NSLog(@"%@", [error description]);
else
    [app.audioPlayer play]; 
```

查看[AVPlayer](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVPlayer_Class/Reference/Reference.html)类，它是 AVFoundation 框架的一部分……这是您用于流式传输音频的 Objective-c (iOS) 类。

看这个帖子[直播](http://www.cocoawithlove.com/2008/09/streaming-and-playing-live-mp3-stream.html)

# ios - 在 Xcode 中的 UIWebView 中更改内容背景颜色

> ID：14643918
> 
> 赞同：0
> 
> 时间：2013-02-01T10:10:19.583
> 
> 标签：ios, uiwebview, webview

我创建了一个简单的`UIWebview`控件，在其中我从 html 文件加载内容，但我想更改该 html 页面的背景而不是我的 web 视图。

对此有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:32:14.267

你有两个选择：

1.  修改 HTML 以使用您选择的背景颜色
2.  向 HTML 添加一个 javascript 函数，将背景颜色设置为传递的任何内容，然后使用[`stringByEvaluatingJavaScriptFromString`](http://developer.apple.com/library/IOs/documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006950-CH3-SW21)

示例 JS 函数：

```
function changeBackground(color){
document.getElementByName("body").style.background="#"+color;
} 
```

示例 ios 调用代码：

```
[self.webView stringByEvaluatingJavaScriptFromString([NSString stringWithFormat:@"changeBackground(\"%@\");",yourColor]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T10:18:28.823

设置`UIWebView`背景颜色和不透明：NO

```
[webView setBackgroundColor:[UIColor clearColor]];
[webView setBackgroundColor:[UIColor purpleColor]];

[webView setOpaque:NO]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:15:47.763

您需要在 html 正文中设置背景颜色。

# html - 将数据 Web 服务公共 URL 绑定到 excelcontentApp 中的下拉列表

> ID：14643921
> 
> 赞同：1
> 
> 时间：2013-02-01T10:10:24.730
> 
> 标签：html, web-services, jquery, office365

在这里，我创建了 Web 服务并提供了用于从数据中获取数据的公共 URL。我在 Office 365 开发人员预览（NAPA）default.htm 页面中编写了以下代码。

```
<!DOCTYPE html>
 <html>
 <head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<title>DemoApplication</title>
<link rel="stylesheet" type="text/css" href="../Content/Office.css" />
<!-- Add your CSS styles to the following file -->
<link rel="stylesheet" type="text/css" href="../Content/App.css" />
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.min.js"></script>
<script src="https://appsforoffice.microsoft.com/lib/1.0/hosted/office.js"></script>
<!-- Add your JavaScript to the following file -->
<script src="../Scripts/App.js"></script>
 </head>
 <body onload="GetData()">
    <select id="CbxArea" style="width: 200px">
    <option>Select Area</option>
    </select>
    <input type="button" value="submit" id="btnsubmit"/>        
</div>
  </body>
 </html> 
```

闲置代码写在 app.js 文件中

```
Office.initialize = function (reason) {    
};
function GetArea(){
var ddlArea = $("#CbxArea");
        $.ajax({
            type: "POST",
            url: "http://192.168.3.252:8081/HaraveerWCF/ExcelDataService.asmx/GetAreaNames",
            contentType: "application/json; charset=utf-8",
            //url:"ExcelDataService.asmx/GetAreaNames",
            dataType: "json",
            success: function (data) {
            for (i = 0; i < data.d.length; i++) {
                ddlArea.append($("<option></option>").val(data.d[i].AreaName).html(data.d[i].AreaName));
                }
            },
            failure: function (msg) {
                alert(msg);
            }
        });
} 
```

我在哪里写错了。请帮帮我。确保总代码只写在在线 Office 365 门户帐户中。不是在 Visual Studio 中编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:08:00.647

你已经做了一点点，我们可以说`override`选项 html。您正在放置每个选项的值和文本：

```
for (i = 0; i < data.d.length; i++) {
  ddlArea.append($("<option></option>").val(data.d[i].AreaName)
                                       .text(data.d[i].AreaName));
} 
```

您可以通过以下方式实现`$.each()`：

```
$.each(data.d, function(i, v){
  ddlArea.append("<option></option>").val(v[i].AreaName).text(v[i].AreaName);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:17:28.167

使用 jQuery 1.4+，你可以这样做

```
for (i = 0; i < data.d.length; i++) {
   ddlArea.append($('<option/>', { value : data.d[i].AreaName }).text(data.d[i].AreaName);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:29:34.877

在您尝试从 Office 365 预览版站点访问远程地址时，您可能遇到了 JavaScript 跨域数据访问问题。如果对远程地址的请求的返回类型是 JSONP，那么您也许可以覆盖跨域数据访问问题。

如果远程服务器 URL 返回任何 JSONP 数据，请检查您的浏览器开发工具（使用 F12 键盘快捷键调用它然后查看网络选项卡）或 Firefox Firebug。

# php - 重新打开现有的 FIFO 会出现错误“没有这样的文件或目录”

> ID：14643925
> 
> 赞同：0
> 
> 时间：2013-02-01T10:10:31.177
> 
> 标签：php, c++, file-io, fifo, mkfifo

我正在尝试实现 PHP 网站和 C++ 程序之间的非常简单的通信。选择的解决方案是使用 Linux fifo。

这适用于第一个命令，但是当我们尝试重新打开文件时，会返回错误。有关错误消息的更多信息，请参阅下面的代码。

C++ 应用程序：

```
string path = "/tmp/cmd.fifo";
__mode_t priv = 0666;
int fifo;

mkfifo(path.c_str(), priv); // returns 0, but privileges are not applied
chmod(path.c_str(), priv); // returns 0 as well, and now privileges are working
fifo = open(path, O_RDONLY); // blocks the thread 
```

PHP：

```
$fifoPath = "/tmp/cmd.fifo";
$fifo = fopen($fifoPath, 'w');
fwrite($fifo, "COMMAND");
fclose($fifo); 
```

C++ 应用程序：

```
// thread is unblocked. fifo==16
char in[20];
ssize_t r = read(fifo, in, sizeof(in)); // r == 7, in == "COMMAND"
// process the command. And read again:
ssize_t r = read(fifo, in, sizeof(in)); // r = 0, so EOF

// Let's reopen it so we can wait for the next command.
// tried using close() here, no success though.
open(path.c_str(), O_RDONLY); // returns -1! strerror(errno) == "No such file or directory"
mkfifo(path.c_str(), priv);  // returns -1! strerror(errno) == "File exists" 
```

上面的代码可能有什么问题？消息“没有这样的文件或目录”和“文件存在”是相当矛盾的。

顺便说一句：我对这种通信的另一种解决方案持开放态度，例如 C++ 解决方案或使用 boost 库的东西。

# gnuplot - 使用用户数据文件的 gnuplot 绘制 3D 锥体

> ID：14643926
> 
> 赞同：0
> 
> 时间：2013-02-01T10:10:30.767
> 
> 标签：gnuplot

我在 x、y、z 中有一个数据文件，并想使用该数据绘制一个 3D 圆锥。我试过 splot 但它只给出最后一个点圆。我的数据文件格式如下：

```
X   y   z 
0  18  18 
10  59  59     
20  80  80 
```

任何帮助表示赞赏。

在此先感谢-Abhi

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T12:17:41.580

在这一点上，我认为展示一个简单的脚本可能更容易，该脚本可用于生成 gnuplot 可用于绘制圆锥的格式的数据：

我将使用 python 有两个原因。首先，我非常了解它，其次，它读起来很像伪代码，所以即使你不了解 python，也应该很清楚发生了什么。

```
import math
h = 2
points_u = map(float,range(-h,h+1)) #[-2.,-1.,0.,1.,2.]

NTHETA = 12    #number of points in theta for the cone
dtheta = 2.*math.pi/NTHETA
points_theta = [dtheta*i for i in range(NTHETA+1)] #list of points in theta

with open('data.txt','w') as fout:  #open an output file for the data
    for theta in points_theta:
        for u in points_u:
            #This is how to plot a cone parametrically
            #Here I unravel the cone into it's x-y-z components
            #The important part is that within the inner loop,
            #we're writing data along a single theta.  In other words,
            #within the inner loop, we write a single straight line which
            #is on the surface of the cone.
            x = (h-u)/h*math.cos(theta)
            y = (h-u)/h*math.sin(theta)
            z = u
            fout.write('%f %f %f\n'%(x,y,z))

        #After the inner loop, you need to insert a blank line to let gnuplot know
        #that the particular "scan" is over and it is supposed to start a new "scan"
        #After all is said and done, gnuplot will connect the points.
        fout.write('\n') 
```

现在这会生成一个数据文件`data.txt`。要在 gnuplot 中绘制此数据文件，您可以简单地执行以下操作：

```
set surface
#set hidden3d  #This makes the object "non-transparent"
splot 'data.txt' using 1:2:3 with lines 
```

# jquery-ui - 跨窗口拖放

> ID：14643928
> 
> 赞同：0
> 
> 时间：2013-02-01T10:10:34.723
> 
> 标签：jquery-ui, yui

我有一个加载页面，然后该页面的 JavaScript 打开一个弹出窗口，该窗口将成为一个画廊。用户将使用作为弹出库窗口一部分的 JavaScript 和 PHP 上传图像，这些上传的图像将显示在我们弹出的库窗口中

一旦上传了几张图像并在图库窗口中显示，我想将它们拖放到主窗口中。实际上，我想将图像留在画廊中，然后将重影图像拖过并将其放在主窗口中，因此我们以两个窗口中的图像结束。

这似乎有点棘手，因为主窗口和弹出库窗口是不同的 JavaScript 执行上下文。如何实现从弹出窗口到主窗口的 jQuery（或 YUI）拖放？

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:15:45.450

也许这个插件可以帮助你：

[http://dragsort.codeplex.com/](http://dragsort.codeplex.com/)

# ios - CoreData 中的关系如何保存到持久存储中？

> ID：14643930
> 
> 赞同：2
> 
> 时间：2013-02-01T10:10:38.810
> 
> 标签：ios, core-data, persistent-storage

将 CoreData 与 UIManagedDocument 一起使用，持久存储是文档中保存文件路径的 SQLite 数据库。我读到 CoreData 产生自己的主键（整数值）。

关于 CoreData 中的关系，我有两个问题：

1.  由于 CoreData 是一个面向对象的关系数据库，我想知道实体中对象之间的关系是如何保存的？CoreData 是否使用外键（例如实体一使用实体二的主键作为外键）？
2.  关系如何保存到持久存储文档中？如果您保存例如 NSString 或 NSDictionary（到二进制数据），您可以在打开持久存储文档时看到这些对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:35:03.490

这取决于。

对于一对一关系，目标实体的主键作为外键存储在实体的表（行）中。

对于一对多关系，会创建一个单独的连接表，其中存储源实体和目标实体的主键。

FWIW 这很容易通过在命令行中使用 sqlite3 来探索。

```
$ sqlite3 cd.sqlite
$ (SQLite) .schema 
```

这将显示您的一对多关系的连接表，您将能够看到您的一对一关系的外键列。

数据/字符串列也是如此。SQLite 允许数据和字符串（varchar）存储。

# excel - 使用条件格式突出显示整行

> ID：14643931
> 
> 赞同：0
> 
> 时间：2013-02-01T10:10:42.157
> 
> 标签：excel

我查看了以下答案。当我使用大卫的答案时，它真的对我有用。但我有一点不同的问题。

当 A1 的条件为真时，我想突出显示 A1、B1、C1、D1 和 E1。根据以下答案，它仅突出显示 A 列中的值

[比较两列](https://stackoverflow.com/questions/10008678/excel-compare-two-columns-and-highlight-when-found)

问候， 拉马纳

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:23:50.223

假设您应该突出显示具有“abc”值的列`A:E`，`A1`您应该执行以下操作：

1.  选择所需的单元格范围（或者可能是整个列`A:E`）。
2.  添加基于公式的条件格式规则，输入以下代码：`=IF($A1="abc",1,0)=1`
3.  选择所需的突出显示并应用规则。

你完成了。`A:E`如果A 中的相应单元格具有“abc” ，上面的代码将突出显示列的任何行。根据需要修改条件。

示例文件：[https ://www.dropbox.com/s/eyx2un2v5r5z25w/CondFormatA-E.xlsx](https://www.dropbox.com/s/eyx2un2v5r5z25w/CondFormatA-E.xlsx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:30:24.800

如果您对 A 列使用此公式

`=NOT(ISNA(VLOOKUP(A1,$B:$B,1,FALSE)))`

然后只需将 $ 放在 A1 前面来修改它，即

`=NOT(ISNA(VLOOKUP($A1,$B:$B,1,FALSE)))`

并将该条件格式应用于所有 5 列 A 到 E

注意：使用 MATCH 可能更简单 - 这应该给出相同的结果

`=MATCH($A1,$B:$B,0)`

# c# - 从 RESX 文件动态加载多语言术语

> ID：14643937
> 
> 赞同：1
> 
> 时间：2013-02-01T10:11:11.570
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, resources, multilingual

我的项目要求我具有多语言功能，因此使用`Global.resx`我有一个英语术语列表，并且`Global.fr.resx`我有一个法语术语列表。这完美地工作。我可以使用@Resources.Global 调用我需要的术语。任何。

但是，我现在需要根据`foreach`从实体框架收集的值，从 RESX 文件中动态显示这些术语。任何想法？

更多信息：

代码很简单，我还在学习 C#，我在视图中工作，所以从字面上看，我有 @Resources.Global.Whatever 来显示静态术语，然后我有一个 foreach 循环：

`<ul>`

`@foreach (var category in Model.categories)`

`{ <li>@category.categoryName</li> }`

`</ul>`

我也希望从 @Resource.Global 调用 @category.categoryName 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:40:35.607

假设我对您的理解正确，您想根据**动态**键名（即变量中的某些内容？）从资源文件中检索项目。您可以为此创建一个扩展方法，如下所示（显然将命名空间替换为资源文件的命名空间）：

```
 public static string Resource(this string name)
 {
     return new ResourceManager(
             "YourApp.Namespace.Resources",
             Assembly.GetExecutingAssembly()
                .GetString(name) ?? name;
 } 
```

然后对于 a `foreach`，您可以这样做（假设`yourList`是字符串列表）：

```
foreach (string item in yourList)
{
    item = item.Resource();
} 
```

或者甚至只是使用Linq？

```
List<string> resourceStrings = yourList.Select(s => s.Resource()).ToList(); 
```

# cassandra - 如何在 cassandra1.1.9 中创建键空间

> ID：14643938
> 
> 赞同：3
> 
> 时间：2013-02-01T10:11:12.483
> 
> 标签：cassandra, cql

我正在尝试在 cassandra1.1.9 中创建密钥空间，并且我按照“帮助创建密钥空间”告诉我的方式进行了相同的操作。

> 使用 placement_strategy = 'org.apache.cassandra.locator.SimpleStrategy' 和 strategy_options = [{replication_factor:2}] 创建密钥空间测试密钥空间；
> 甚至尝试过创建密钥空间testkeyspace
> ；
> 使用 placement_strategy = 'org.apache.cassandra.locator.SimpleStrategy' 和 strategy_options = {replication_factor:3} 更新键空间 testkeyspace；
> 
> * * *
> 
> 我总是收到这个错误：
> java.lang.IllegalArgumentException: No enum const class org.apache.cassandra.cli.CliClient$AddKeyspaceArgument.STRATEGY_OPT:ONS

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-27T00:15:22.313

我使用的是 1.2.8 版本，但唯一对我有用的语法是：

```
create keyspace demo with replication = {'class':'SimpleStrategy', 'replication_factor':1} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T21:38:42.997

如果您使用的是 cassandra-cli，这是正确的语法：

```
CREATE KEYSPACE testkeyspace
with placement_strategy = 'org.apache.cassandra.locator.SimpleStrategy'
and strategy_options = {replication_factor:2}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-26T09:06:55.653

如果您在 cassandra 集群中有多个数据中心，并且想在每个数据中心存储一份副本，那么您可以使用以下命令：

以下命令用于 CLI 界面：

```
create keyspace KEY_SPACE  with placement_strategy = 'org.apache.cassandra.locator.NetworkTopologyStrategy' and strategy_options={DC1:1, DC2:1, DC3:1}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T06:27:50.077

这对我有用：

“创建键空间 #{keyspace} WITH strategy_class = 'SimpleStrategy' AND strategy_options:replication_factor = 3”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-04T10:46:50.063

```
cqlsh:CREATE KEYSPACE keyspace_name 
      WITH strategy_class='SimpleStrategy' AND strategy_options:replication_factor='1'; 
```

# php - Handsontable javascript - 从服务器加载数组

> ID：14643941
> 
> 赞同：1
> 
> 时间：2013-02-01T10:11:24.477
> 
> 标签：php, javascript, json, handsontable

我想使用服务器端存在的数组在 Javascript 中创建一个 Handsontable。该数组有一列：

```
$table[] = "a";
$table[] = "b"; 
```

要将其加载到 Handsontable 中，需要将其转换为：

```
var input = [["a"],["b"]];
$("#myTable").handsontable({
data: input,
startRows: 1,
startCols: 1
}; 
```

在 PHP 中，我首先使用 JSON 对其进行编码：

```
<?php echo json_encode($table); ?> 
```

然后 getJSON 或其他 ajax 函数以这种格式在客户端获取它，但我找不到正确的方法。希望有人可以提供帮助。

要发布它，我尝试过 1) 使用隐藏字段发布它

```
<input type="hidden" name="input_field" value=<?php echo json_encode($table); ?> > 
```

并通过以下方式进入 Ajax 部分：

```
var input = $('#input_field').val();
alert(input); 
```

但是警报返回：未定义，并且数组 {a,b} 未加载到 Handsontable 中。2) 或者我正在尝试使用 $.getJSON。在 PHP 中：

```
$table = array();  
$table[] = array("a");
$table[] = array("b");
echo json_encode($table); 
```

在阿贾克斯：

```
jQuery.getJSON('mypage.php',function(table){
    alert(!);
}); 
```

警报没有被触发，我认为 Ajax 代码有错误，因为 Handsontable 没有显示。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:40:09.490

在服务器端，您可以创建数组数组

```
$table[] = array("a");
$table[] = array("b");
echo 'var input = ' . json_encode($table) . ";\n"; 
```

这会给

```
var input = [["a"],["b"]]; 
```

不需要隐藏字段或`$.getJSON()`，因为这已经是一个 javascript 数组，可以提供给`handsontable`.

如果您想在客户端执行此操作，请遍历数组并从 JSON 条目构建新数组

```
var json = ["a", "b"];
var input = Array();
for (var i in json)
    input.push([json[i]]); 
```

[JSFiddle](http://jsfiddle.net/AWaep/)

您的问题中的隐藏字段有两个问题，首先是您必须`value="..."`在值内加上引号并转义引号。第二个问题是在 jQuery 选择器中。`#input_field`查找带有 a`id`但不带有 a的元素`name`。为此，您必须添加`id="input_field"`到隐藏输入。

# maven - gmaven-plugin 适用于 groovy 1.7.5 但不适用于 2.1.0

> ID：14643943
> 
> 赞同：3
> 
> 时间：2013-02-01T10:11:28.130
> 
> 标签：maven, groovy, gmaven-plugin

我有工作 maven 2 设置，它编译用 groovy 编写的 jUnit 测试。java 和 groovy 测试都位于 /src/test/java

查看 pom.xml 的快照

```
<plugin>
    <groupId>org.codehaus.gmaven</groupId>
    <artifactId>gmaven-plugin</artifactId>
    <version>1.3</version>
    <executions>
        <execution>
        <id>testCompile</id>
        <goals>
            <goal>testCompile</goal>
        </goals>
        <configuration>
            <sources>
                <fileset>
                    <directory>${pom.basedir}/src/test/java</directory>
                    <includes>
                        <include>**/*.groovy</include>
                    </includes>
                </fileset>
            </sources>
        </configuration>
        </execution>
    </executions>
</plugin>

<dependency>
    <groupId>org.codehaus.groovy</groupId>
    <artifactId>groovy</artifactId>
    <version>1.7.5</version>
    <scope>test</scope>
</dependency> 
```

当我升级到插件版本 1.5 和 groovy 2.1.0 时，* */* .groovy 文件被忽略。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-23T10:41:57.210

我找到了这个页面[https://confluence.atlassian.com/display/CLOVER/Compiling+Groovy+with+GMaven+plugin](https://confluence.atlassian.com/display/CLOVER/Compiling+Groovy+with+GMaven+plugin)

请注意，您必须将 Groovy 类和测试分别放在`src/main/groovy`和下`src/test/groovy`。

基于该页面的以下配置似乎有效：

```
 <!-- Groovy and Maven https://confluence.atlassian.com/display/CLOVER/Compiling+Groovy+with+GMaven+plugin -->
        <plugin>
            <groupId>org.codehaus.gmaven</groupId>
            <artifactId>gmaven-plugin</artifactId>
            <version>${gmaven.version}</version>
            <configuration>
                <providerSelection>2.0</providerSelection>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>org.codehaus.gmaven.runtime</groupId>
                    <artifactId>gmaven-runtime-2.0</artifactId>
                    <version>${gmaven.version}</version>
                </dependency>
                <dependency>
                    <groupId>org.codehaus.groovy</groupId>
                    <artifactId>groovy-all</artifactId>
                    <version>${groovy.version}</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <goals>
                        <goal>generateStubs</goal>
                        <goal>compile</goal>
                        <goal>generateTestStubs</goal>
                        <goal>testCompile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

当然还有依赖关系

```
 <dependency>
        <groupId>org.codehaus.groovy</groupId>
        <artifactId>groovy-all</artifactId>
        <version>${groovy.version}</version>
    </dependency> 
```

在属性中

```
<properties>
    <gmaven.version>1.5</gmaven.version>
    <groovy.version>2.1.8</groovy.version>
</properties> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:56:04.867

好的，此配置适用于 maven 2。

```
<plugin>
    <groupId>org.codehaus.gmaven</groupId>
        <artifactId>gmaven-plugin</artifactId>
        <version>1.4</version>
        <configuration>
            <providerSelection>2.0</providerSelection>
            <sourceEncoding>UTF-8</sourceEncoding>
        </configuration>
        <executions>
            <execution>
                <goals>
                    <goal>testCompile</goal>
                </goals>
                <configuration>
                    <sources>
                        <fileset>
                            <directory>${pom.basedir}/src/test/java</directory>
                            <includes>
                                <include>**/*.groovy</include>
                            </includes>
                        </fileset>
                    </sources>
                </configuration>
            </execution>
        </executions>
</plugin>

<dependency>
    <groupId>org.codehaus.groovy</groupId>
    <artifactId>groovy</artifactId>
    <version>2.0.0</version>
    <scope>test</scope>
</dependency> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-13T11:47:36.963

我遇到了同样的问题，但降级到 gmaven 1.4 解决了这个问题（使用 groovy-all 2.3.2）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-13T20:03:30.893

首先，每个 GMaven 提供程序都针对特定版本的 Groovy 进行编译，因此如果 Groovy 在点发布时破坏了某些东西，可能会出现问题。其次，不再维护 GMaven（这就是为什么您看不到任何更新 Groovy 版本的提供程序的原因）。我建议切换到[GMavenPlus](http://docs.codehaus.org/display/GMAVENPLUS/Home)或[Maven 的 Groovy-Eclipse 编译器插件](http://groovy.codehaus.org/Groovy-Eclipse+compiler+plugin+for+Maven)。

# asp.net-mvc-4 - ASP.NET MVC 4 加载查找数据

> ID：14643945
> 
> 赞同：0
> 
> 时间：2013-02-01T10:11:32.187
> 
> 标签：asp.net-mvc-4, html-select

我想知道应该如何加载下拉列表？人们通常是怎么做的？我的下拉列表中的数据与我的模型完全断开，因此它们不应该来自模型。

我应该使用新的 MVC web api 服务来返回所需的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:15:21.083

请参考本[教程](http://www.asp.net/mvc/tutorials/javascript/working-with-the-dropdownlist-box-and-jquery/using-the-dropdownlist-helper-with-aspnet-mvc)，它描述了在 asp.net mvc 中使用下拉列表的基本方法，它也很简单

# java - 在 Eclipse 中更改应用程序名称

> ID：14643946
> 
> 赞同：6
> 
> 时间：2013-02-01T10:11:32.840
> 
> 标签：java, android, eclipse

几天前我完成了我的测验应用程序。现在，我想发布第二个不同问题的测验。我在 Eclipse 中复制了项目并更改了问题。现在，在我的智能手机上安装它时，它告诉我这个应用程序已经存在。

那么在哪里可以更改两个应用程序不同的名称？还是我必须更改其他内容？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T10:13:54.810

您需要更改包名称：

```
 Right click on the project -> Android Tools -> Rename Application package 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-30T11:11:22.470

如果您还没有这样做...您需要像上面一样更改包名称，但只需更改在这种情况下表示您的应用程序名称的文本即可进入`strings.xml`并进行修改。`"<string name="app_name">your app name </string>"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:16:34.903

在测试时，您可以卸载一个并安装另一个。但是，如果您打算在 Google Play 上发布两个应用程序（或任意数量的应用程序），您应该始终为每个应用程序使用不同的包名称。

Google Play 机制的工作方式是不同的应用程序可以使用相同的名称。但是，它们通过包名称来区分。Google Play 商店中没有两个应用程序可以共享相同的包名。

这是一篇不错的文章，标题为*Dianne Hackborn*[无法改变](http://android-developers.blogspot.in/2011/06/things-that-cannot-change.html)的事情。

 *当然，使用这个（**正如 Nunu 已经回答的那样**）来更改您的第二个应用程序的包名称： **右键单击项目 - > Android 工具 - > 重命名应用程序包**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T10:13:37.633

它可能在 AndroidManifest.xml -> 应用程序中。请看看

```
 <application
        android:name="MyApplication"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" android:allowBackup="true">
        <activity 
```

也在 XML 中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T10:18:07.133

你的包名是一样的。1.尝试卸载旧的，然后重新安装 2.或者通过简单地更改你的包名来安装它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-01T10:21:38.507

您需要更改主包名称的名称，这里应用名称应该相同，但包名称不应该！*

# algorithm - 如何找到两个图的最大公共子图？

> ID：14643948
> 
> 赞同：5
> 
> 时间：2013-02-01T10:11:39.263
> 
> 标签：algorithm, graph-algorithm

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T10:22:17.970

**问题是[NP-Complete](http://en.wikipedia.org/wiki/NP-complete)** ¹。

来自[Clique 问题](http://en.wikipedia.org/wiki/Clique_problem)²的减少。给定 Clique Problem - a graph 的一个实例`G=(V,E)`，创建一个完整的[clique](http://en.wikipedia.org/wiki/Clique_%28graph_theory%29) `G'=(V,E')`使得`E' = {(u,v) | u != v, for each u,v in V)`.

最大团问题的解决方案与 G 和 G' 的最大子图问题的解决方案相同。由于 clique 问题是 NP-Hard，所以这个问题也是如此。

因此，这个问题**没有已知的多项式解决方案**。

如果您正在寻找一个精确的算法，您可以尝试[穷举搜索](http://en.wikipedia.org/wiki/Brute-force_search)方法和/或[分支定界](http://en.wikipedia.org/wiki/Branch_and_bound)方法来解决它。抱歉这个坏消息，但至少你知道不要寻找（可能）不存在的东西（除非[P=NP](http://en.wikipedia.org/wiki/P_versus_NP_problem)，当然）

* * *

**编辑：**问题的指数蛮力解决方案：
您可以检查所有可能的子集，并检查它是否是可行的解决方案。
伪代码：

```
findMCS(vertices,G1,G2,currentSubset):
  if vertices is empty: //base clause, no more candidates to check
      if isCommonSubgraph(G1,G2,currentSubset):
         return clone(currentSubset)
      else:
         return {}
  v <- vertices.pop() //take a look at the first element
  cand1 <- findMCS(vertices,G1,G2,currentSubset) //find MCS if it is NOT in the subset
  currentSubset.append(v)
  if isCommonSubgrah(G1,G2,currentSubset): //find MCS if it is in the subset
     cand2 <- findMCS(vertices,G1,G2,currentSubset)
  currentSubset.remvoe(v) //clean up environment before getting back from recursive call
  return (|cand1| > |cand2| ? cand1 : cand2) //return the maximal subset from all candidates 
```

上面的复杂性是`O(2^n)`（检查所有可能的子集），并调用它：（`findMCS(G1.vertices, G1, G2, [])`其中`[]`是一个空列表）。

**笔记：**

*   `isCommonSubgrah(G1,G2,currentSubset)`是一种易于计算的方法，当且仅当`currentSubset`是 G1 和 G2 的公共子图时才回答 true。
*   |cand1| 和 |cand2| 是这些列表的大小。

* * *

（1）假设最大子图是一个子集`U`，`V`使得对于每个`u1,u2`in`U` `(u1,u2)`都在`E1`当且仅当`(u1,u2)`在`E2`（直观地，在两个图中共享完全相同的边的顶点的最大子集）

`G=(V,E)`(2) 派系问题：给定一个在 中找到最大子集`U`的实例，`V`使得对于每个`u1,u2`in `U`:`u1 = u2`或`(u1,u2)`is in `E`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-02T02:45:55.380

[James J. McGregor](https://pdfs.semanticscholar.org/ed10/c6f788922cd5e7cb26c3d55f676979958852.pdf)提出的回溯搜索算法可用于识别两个图之间的 MCS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T23:25:13.077

主要问题是找到原始图中节点之间的对应关系（本质上是顶点的重新编号）。例如，如果我们在图*g1中有节点**p* ，在图*g2*中有节点*q* ，其中*p*和*q*是等价的，我们希望将它们映射到公共子图*c中的节点**s*。

 ***Clique Problem 之所以如此困难的原因在于，没有任何方法可以检查不同图中的两个节点是否实际上指向同一个节点，我们必须尝试所有可能的节点对组合，并检查每对节点是否一致并表示“最好的”通信。

由于这些图中的节点代表地理位置，我们应该能够提出一个合理的距离度量，告诉我们一个图中的节点与另一个图中的任何节点相同的可能性有多大。由于两个节点的 GPS 坐标可能不相同，我们需要根据问题做一些假设。

*   如果我们有一个数据点所在区域的地图，表示为图*m ，我们可以重新编号或重命名**g1*和*g2*中的节点以对应于它们在*m*中最接近的等价物。
*   距离（原始图与*m之间或**g1*和*g2*中的点之间）可以是欧几里得距离或曼哈顿距离，具体取决于对您的图更有意义的距离。
*   在决定两个节点可以相距多远并且仍然被认为是等效的时，您必须小心。太小，你不会得到任何匹配；太大，您的整个图形可能会压缩为一个节点。
*   原始图中的两个或多个节点可能都映射到*c*中的同一节点。例如，如果位置数据根据节点之间的距离频繁更新。
*   相反，如果更新频率相对于距离较低，则原始图中一对连续节点之间的边也可以映射到包含多条边的路径。因此，您必须弄清楚将这些中间节点引入公共图中是否有意义，或者将整个路径视为一条边。

对节点重新编号后，您可以使用 Jens 建议的方法来查找重新编号的图的交集。这一切都很笼统，因为我没有关于您的具体问题的很多细节，但希望这足以让您开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:07:21.147

您甚至无法检查一个图是否是另一个图的子图，这是已知为 NP 完全的[子图同构问题。](http://en.wikipedia.org/wiki/Subgraph_isomorphism_problem)因此，您无法找到最大子图，因为您无法检查同构属性（在多项式时间内）。***

# knockout.js - 我有两个带有敲除绑定的选择列表，但是当我更改视图模型的值时，选择不会正确更新

> ID：14643949
> 
> 赞同：1
> 
> 时间：2013-02-01T10:11:43.387
> 
> 标签：knockout.js

我有两个选择列表。我使用 ko.utils.arrayFilter 方法来更改我的选择列表。当我用它来做“添加字段”或“删除字段”时，一切都很好。

但是当我更改视图模型时，然后我单击“添加字段”或“删除字段”，选择列表将无法正确更新。

```
 self.test = function(){

            var idx =  self.rightSeleted();
            var selectedField = $.grep(self.availableFields(), function(n, i){
                return n.FieldNameId == idx;
            });
            debugger;
            var currentValue = selectedField[0].IsAsc();

        }; 
```

我的示例代码在这里[http://jsfiddle.net/knupA/](http://jsfiddle.net/knupA/)

绑定选择列表时我做错了吗？！

谢谢~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:46:39.317

我已经更新了你的[jsFiddle](http://jsfiddle.net/knupA/1/)，它似乎工作。我将您的方法更改为从数组中选择以使用 Knockout 方法，并且我删除了您的测试方法，因为当右侧下拉列表中没有任何内容被选择时会调用该方法，所以会爆炸。

```
var selectedField = ko.utils.arrayFirst(self.availableFields(), function(item){
                return item.FieldNameId == idx;
            }); 
```

# hibernate - Using hibernate3-maven-plugin to generate Sequence Scripts

> ID：14643950
> 
> 赞同：0
> 
> 时间：2013-02-01T10:11:49.877
> 
> 标签：hibernate, code-generation, sequence

I am using hibernate3-maven-plugin version 2.0 hbm2ddl to generate SQL scripts from code. I am using process-classes. I my Entity class I am using a sequence. @SequenceGenerator(name="sessionSeq", sequenceName="SESSION_SEQ", allocationSize=50, initialValue=1) When I run the Maven script, this generates create sequence hibernate_sequence; I wanted it to generate something like create sequence hibernate_sequence increment by 50;

Can someone help me?

I am using the following jars : hibernate-tools - 3.2.4.GA, hibernate-core - 3.6.1.Final, hibernate-entitymanager - 3.6.1.Final, hibernate-validator - 4.1.0.Final, hibernate-validator-legacy - 4.0.2.GA and DB related jars.

The hbm2ddl is not picking up the allocationSize=50 property of the @SequenceGenerator when I am trying to generate the .SQL file.

This is an extract of the code:

@Entity @SequenceGenerator(name="sessionInfoIdSeq", sequenceName="SESSIONINFO_ID_SEQ", allocationSize=50)

public class SessionInfo {

```
@Id  @GeneratedValue(strategy = GenerationType.AUTO, generator="sessionInfoIdSeq")
private Integer          id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:49:31.083

检查了 SchemaExport API 正在使用的 hibernate-core-3.6.1 Final 的 API。从此 jar 中调用的 SequenceGenerator.java 类使用了 Dialect 类中已弃用的方法，该方法正在生成序列定义。该方法是 public String[] getCreateSequenceStrings(String sequenceName)，而不是如果它使用来自 Dialect 类的 String getCreateSequenceString(String sequenceName, int initialValue, int incrementSize)，它会解决我的问题。

# java - how to prevent the graph from overwriting the previous plot using achartengine

> ID：14643953
> 
> 赞同：1
> 
> 时间：2013-02-01T10:11:53.747
> 
> 标签：java, android, eclipse, achartengine

I have made the plot to repaint the graph from the first once it reaches end. Now my problem is the graph gets overwritten. The previous plot remains as such. So, how should i repaint after clearing the previous plot? And by clearing i should not loose the previous data. It should remain as such when i scroll.Can someone help me with this pls?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:34:42.830

我将尝试回答我理解的问题：

*   您可以通过删除上一个系列中的数据来清除它
*   您可以使用`renderer.setXAxisMin()`和控制可见区域`renderer.setXAxisMax()`
*   当您希望将光标发送回开头时，您可以创建一个新系列并开始向该系列添加数据
*   如果不需要，可以通过调用隐藏图例`renderer.setShowLegend(false)`

调用后更改将显示在屏幕上`chartView.repaint()`。

# hadoop - Error while creating tables on Hive

> ID：14643954
> 
> 赞同：0
> 
> 时间：2013-02-01T10:11:55.017
> 
> 标签：hadoop, hive

I created this table in Hive:

```
hive> CREATE TABLE twitter_data(datePosted TIMESTAMP
  , userId BIGINT
  , userName STRING
  , tweets STRING)
ROW FORMAT DELIMITED
FIELDS TERMINATED BY '\t'; 
```

But it displays this error message:

> FAILED: Error in metadata: javax.jdo.JDOFatalInternalException: Error creating transactional connection factory NestedThrowables: java.lang.reflect.InvocationTargetException
> 
> FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask

Does anyone know what this error message means?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T18:47:59.320

我最近遇到了这个问题，这个问题与 Hive JDBC 驱动程序有关，该驱动程序在向 Hive 发出请求时对客户端不可用。这就是我为解决我的问题所做的：

1.  我确实验证了我的集群中安装了 Hive JDBC 连接器
2.  `hive-site.xml`我根据本地设置正确修改了以下设置：

```
<property>
  <name>javax.jdo.option.ConnectionURL</name>
  <value>jdbc:mysql://myhost/metastore</value>
  <description>the URL of the MySQL database</description>
</property>
<property>
  <name>javax.jdo.option.ConnectionDriverName</name>
  <value>com.mysql.jdbc.Driver</value>
</property>
<property>
  <name>javax.jdo.option.ConnectionUserName</name>
  <value>hive</value>
</property>
<property>
  <name>javax.jdo.option.ConnectionPassword</name>
  <value>mypassword</value>
</property> 
```

# grails - 找不到 com.vaadin.terminal.gwt.client.ui.dd.VerticalDropLocation

> ID：14643960
> 
> 赞同：0
> 
> 时间：2013-02-01T10:12:12.640
> 
> 标签：grails, vaadin, grails-plugin

我正在做一个概念证明，使用 Vaadin 7 插件评估 Grails (2.1.0)。我们正在评估不同的技术，共同的目标是从 grails 模型开始设置拖放树，通过拖放子更改树并将更改保存在数据库中。

我需要的正是这个，仅此而已：

[http://demo.vaadin.com/sampler#DragDropTreeSorting](http://demo.vaadin.com/sampler#DragDropTreeSorting)

不幸的是，当我将示例复制并粘贴到一个类中（我使用 IntelliJ 11.13）时，IDE 会抱怨，因为它找不到：

导入 com.vaadin.terminal.gwt.client.ui.dd.VerticalDropLocation；

这个类是从插件中排除的还是我错过了什么？如果是的话，我该如何重现这个例子？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T10:42:40.503

演示示例可能在 Vaadin 6 中，但您的项目使用的是 Vaadin 7（我想说...）。在 Vaadin 7 中重构了许多类。

这是 Vaadin 6 [VerticalDropLocation](https://vaadin.com/api/com/vaadin/terminal/gwt/client/ui/dd/VerticalDropLocation.html) 在这里重构了 Vaadin 7 中的[VerticalDropLocation](https://vaadin.com/download/prerelease/7.0/7.0.0/7.0.0.beta1/docs/api/com/vaadin/shared/ui/dd/VerticalDropLocation.html)。您可以看到它们位于不同的包中...尝试从 Vaadin 7 导入类：

`com.vaadin.shared.ui.dd.VerticalDropLocation`

# perl - What is wrong with my hash of hash code?

> ID：14643961
> 
> 赞同：0
> 
> 时间：2013-02-01T10:12:17.077
> 
> 标签：perl, hash

Can anyone tell me where I am wrong? I can't figure it out.... Basically what my code is trying to do is to read the files and create a hash for each file, these hashes are organized into on hash. The user would input two parameters, one is the key of the outer hash, and the other is for the one inside. The ones I input are city and PIT; the same as the parameter I wrote before the line that breaks down....

I tried thousands of times, I keep getting this error: Can't use an undefined value as a HASH reference I have commented that line out in the code. The two files are cities.txt; school.txt. Their content are just as below: PIT\tPittsburgh NY\tNewYork

```
#!/bin/perl -w
use strict;
use Data::Dumper;
our %hash_all = ();
sub readHash{
    my @vars = @_;
    my $filename = $vars[0];
    my %iptable = ();
    if(open(IN,$filename.".txt")) {
            while(<IN>) {   
            my @tmp = split(/\t/);
            $iptable{$tmp[0]} = $tmp[1];
        }
    }
    return %iptable;
}

sub loadAll{
        my %school = readHash("school");
    my %city = readHash("cities");
    $hash_all{school} = \%school;
    $hash_all{city} = \%city;
    print Dumper(\%hash_all);
}

 sub queryValue{
    my @pars = @_;
    my $key1 = $pars[0];
    my $key2 = $pars[1];

    print "key1".$key1;
    print "key2".$key2;
    print Dumper(\%hash_all);   
    my %temp = %{$hash_all{"city"}};#THIS LINE WORKS
    print $temp{"PIT"}; #THIS LINE WORKS
    my %temp2 = %{$hash_all{$key1}};#THIS LINE HAS AN ERROR
    print $temp2{$key2};
}

loadAll();
my $par1 = <>;
my $par2 = <>;
queryValue($par1,$par2); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:35:55.770

您的问题可能是当您阅读`$par1`and时`$par2`，它们在末尾包含换行符。因此，您最终会寻找与 .`"city\n"`不同的哈希键`"city"`。

确保`chomp`在输入参数上使用，例如`chomp($par1)`. 那应该照顾它。

# c++ - error C1189: #error : This file requires _WIN32_WINNT to be #defined at least to 0x0500\. Value 0x0501 or higher is recommended

> ID：14643962
> 
> 赞同：8
> 
> 时间：2013-02-01T10:12:20.173
> 
> 标签：c++, windows, visual-studio-2010, mfc

I create MFC project in VS2010(windows xp). And i take this error:

```
error C1189: #error : This file requires _WIN32_WINNT to be #defined at least to 0x0500\. Value 0x0501 or higher is recommended. 
```

if I added in `afxcomctl32.h`: `#define _WIN32_WINNT 0x0501`, i take 60+ errors. In project i dont added anything. Use such as Visual Studio created. What i need to do with this?

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-01T10:15:27.100

我认为 afxcomctl32.h 是一个错误的地方，要解决这个问题，让你的 stdafx.h 看起来像这样：

```
// Modify the following defines if you have to target a platform prior to the ones specified below.
// Refer to MSDN for the latest info on corresponding values for different platforms.
#ifndef WINVER                // Allow use of features specific to Windows 95 and Windows NT 4 or later.
#define WINVER 0x0501        // Change this to the appropriate value to target Windows 98 and Windows 2000 or later.
#endif

#ifndef _WIN32_WINNT        // Allow use of features specific to Windows NT 4 or later.
#define _WIN32_WINNT 0x0501        // Change this to the appropriate value to target Windows 98 and Windows 2000 or later.
#endif                        

#ifndef _WIN32_WINDOWS        // Allow use of features specific to Windows 98 or later.
#define _WIN32_WINDOWS 0x0501 // Change this to the appropriate value to target Windows Me or later.
#endif

#ifndef _WIN32_IE            // Allow use of features specific to IE 4.0 or later.
#define _WIN32_IE 0x0500    // Change this to the appropriate value to target IE 5.0 or later.
#endif 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-19T00:44:32.620

尝试将此添加到您的 StdAfx.h 文件的顶部：

```
#include <sdkddkver.h> 
```

在我的应用程序中，我正在定义

```
_WIN32_WINNT=_WIN32_WINNT_WINXP 
```

起初我有同样的问题。我发现，因为当你使用 MFC 时，你不能包含 windows.h，_WIN32_WINNT_WINXP*从未定义*，所以 _WIN32_WINNT 没有有效值。通过包含 windows.h 用于定义这些值的标头 (sdkddkver.h)，突然一切正常！

布莱赫。我讨厌为 Windows 编程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T10:30:49.447

您不需要修改 afxcomctl32.h。您只需要在此文件之前包含 Windows.h。

应该管用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T13:32:20.820

我解决了我的问题。事实是该文件`atmcore.h`与 VS2010 中的标准不同。

# wpf - WPF custom ComboBox initial value setting

> ID：14643963
> 
> 赞同：2
> 
> 时间：2013-02-01T10:12:20.190
> 
> 标签：wpf, combobox, custom-controls

I've built a custom ComboBox which shows as a TextBox when ReadOnly is set:

```
<local:BoolToVisibilityConverter FalseValue="Hidden" TrueValue="Visible" x:Key="BoolVis" />
<local:BoolToVisibilityConverter FalseValue="Visible" TrueValue="Hidden" x:Key="BoolVisRev" />

<Style TargetType="{x:Type local:ComboBoxG}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:ComboBoxG}">
                <Border Background="{TemplateBinding Background}"
                        BorderBrush="{TemplateBinding BorderBrush}"
                        BorderThickness="{TemplateBinding BorderThickness}">
                    <Grid>
                        <ComboBox ItemsSource="{TemplateBinding ItemsSource}"
                                  DisplayMemberPath="{TemplateBinding DisplayMemberPath}"
                                  SelectedValuePath="{TemplateBinding SelectedValuePath}"
                                  SelectedIndex="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=SelectedIndex, Mode=TwoWay}"
                                  Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsReadOnly, Converter={StaticResource BoolVisRev}}"
                                  IsDropDownOpen="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsDropDownOpen, Mode=TwoWay}"
                                  IsTabStop="False">
                        </ComboBox>
                        <TextBox Text="{TemplateBinding Text}" 
                                 Visibility="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=IsReadOnly, Converter={StaticResource BoolVis}}"
                                 IsTabStop="False">
                        </TextBox>
                    </Grid>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

It's working fine, other than if I instantiate and set a value all in one go. This doesn't work ...

```
private void One_OnClick(object sender, RoutedEventArgs e)
{
    cmb = new ComboBoxG();
    Stack.Children.Add(cmb);

    var dict = new Dictionary<int, string> { { 0, "aaa" }, { 1, "bbb" }, { 2, "ccc" }, { 3, "ddd" }, };
    cmb.ItemsSource = dict;
    cmb.DisplayMemberPath = "Value";
    cmb.SelectedValuePath = "Key";
    cmb.SelectedValue = 3;
} 
```

... whereas this does ...

```
private void One_OnClick(object sender, RoutedEventArgs e)
{
    cmb = new ComboBoxG();
    Stack.Children.Add(cmb);

    var dict = new Dictionary<int, string> { { 0, "aaa" }, { 1, "bbb" }, { 2, "ccc" }, { 3, "ddd" }, };
    cmb.ItemsSource = dict;
    cmb.DisplayMemberPath = "Value";
    cmb.SelectedValuePath = "Key";
    cmb.Loaded += cmb_Loaded;
}

private void cmb_Loaded(object sender, RoutedEventArgs e)
{
    cmb.SelectedValue = 3;
} 
```

So I can work around it but it is making it awkward for some uses of this control. Any suggestions, please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T00:23:18.807

我之前也遇到过这种情况，到目前为止，唯一一种半愉快的解决方法是让消息队列通过 Loaded 阶段排出。请注意，我对此并不感到自豪，但 WPF 分阶段进行，有时您希望将所有内容放在一起。我想您可以将 cmd.SelectedValue = 3 放入委托中，但这只是口味问题...

```
 cmb = new ComboboxG();
        theStack.Children.Add(cmb);

        var dict = new Dictionary<int, string> { { 0, "aaa" }, { 1, "bbb" }, { 2, "ccc" }, { 3, "ddd" }, };
        cmb.ItemsSource = dict;
        cmb.DisplayMemberPath = "Value";
        cmb.SelectedValuePath = "Key";

        Dispatcher.Invoke(new Action(() => { }), DispatcherPriority.Loaded);

        cmb.SelectedValue = 3; 
```

请注意，这将允许事件运行，因此请注意重入！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:48:07.973

尝试设置 SelectedItem 而不是 Index

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:24:31.333

您是否尝试过设置选定的索引？

```
private void One_OnClick(object sender, RoutedEventArgs e)
{
    cmb = new ComboBoxG();
    Stack.Children.Add(cmb);

    var dict = new Dictionary<int, string> { { 0, "aaa" }, { 1, "bbb" }, { 2, "ccc" }, { 3, "ddd" }, };
    cmb.ItemsSource = dict;
    cmb.DisplayMemberPath = "Value";
    cmb.SelectedValuePath = "Key";
    cmb.SelectedIndex = 3;
} 
```

# c# - Register a device/service with the COM UPnP lib

> ID：14643966
> 
> 赞同：2
> 
> 时间：2013-02-01T10:12:35.173
> 
> 标签：c#, .net, com, upnp

For an application, we use UPnP to discover and register devices/service(we have server and client part).

For the discovery, we used the [http://managedupnp.codeplex.com/](http://managedupnp.codeplex.com/) which worked very well.

To register, we did found some library, but they were VERY buggy(intel open source library), and we now want to use the COM component and make a small c# abstraction on it.

I found some documentation: [http://msdn.microsoft.com/en-us/library/windows/desktop/aa381805(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381805(v=vs.85).aspx) but I've got a problem.

This library contains only interfaces, and I can't see how I can get an instance of it. And I can't find any example/documentation.

So, does anybody knows how to register a device/service with this COM component?

Thank you!

**EDIT**:

I tried to generate a C# dll:

```
midl /target NT51 /tlb "C:\upnphost.tlb" "C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Include\upnphost.idl"
tlbimp upnphost.tlb 
```

But after importing this generated dll, I only got the same interface than before :/. Am I on the right way, how should I do that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:02:36.423

Once you've done the midl + tlbimp, you can just write this kind of code, as the tlbimp should have create a class (UPnPRegistrarClass) and an interface IUPnPRegistrar that the underlying COM class implements:

```
IUPnPRegistrar registrar = (IUPnPRegistrar)new UPnPRegistrarClass();
registrar.RegisterDevice(
    File.ReadAllText("DimmerDevice-Desc.xml"),
    "My.Class",
    "MyInitString",
    "MyContainerId",
    Path.GetFullPath("."),
    3200); 
```

Note: for this to work, download the [UPnP device registration sample](http://code.msdn.microsoft.com/windowsdesktop/Register-Device-d0cbfba2) on your disk, and copy the two XML description files to the current execution path. You also *must* implement a COM Object with a progid ("My.Class" that works because the RegisterDevice call will indeed instantiate this object to build an identifier. You can do that with .NET.

Device and service description formats are available here: [UPnP™ Device Architecture 1.1](http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v1.1.pdf). In the Windows world, there are some extra restrictions specified here: [Creating a Device Description (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381130%28v=vs.85%29.aspx)

# android - Android app for different screen size

> ID：14643969
> 
> 赞同：0
> 
> 时间：2013-02-01T10:12:38.923
> 
> 标签：android, android-layout

i'm an italian guy and i'm developing an android app for a course that i'm attending at Information and Communication Technologies university. This is my question: following android philosophy, it is right to create 12 folders for different values of hight and width (in dpi) in android?

I mean:

```
values-ldpi
values-mdpi
values-hdpi
values-xhdpi
values-small-ldpi
...
...
...
values-xlarge-hdpi
values-xlarge-xhdpi 
```

I can't use `"match_parent"` or `"wrap_content"` everywhere, so for some components i have to specify the size in dpi.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:19:26.697

这是正确的，但是您可以通过简单地巧妙地放置 XML 布局、使用片段并考虑允许使用一些相对位置描述的设计来获得完整的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:20:07.197

没有一个通用的规则可以一直有效。在某些情况下，您可能必须使用`values-land`, `values-v14`, `values-large-land-v14`, `values-sw720dp`....取决于您要实现的应用程序。

不要忘记**`values-xxhdpi`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:23:42.980

您的解决方案无疑是最详尽和彻底的。正如你所说，它不一定是“正确的”。

理想情况下，您将能够为屏幕尺寸/密度的每种可能组合创建值/布局/可绘制对象。在现实世界中，更常见的是关注特定的子集。

[例如，您可以在此处](http://developer.android.com/about/dashboards/index.html#Screens)查看最常用的屏幕密度（定期更新）。

详尽有一些特别的缺点，包括如果您正在处理可绘制对象，包括较大的 .apk 大小，因此您可以缩减您的方法并专注于其他地方，或者为您的应用程序发布多个 .apk。

[这里](http://developer.android.com/guide/practices/screens_support.html)有一篇关于在 Android上**支持多个屏幕**的深入文章，非常值得一读。

# .net - atabase Migrations has stopped working

> ID：14643970
> 
> 赞同：0
> 
> 时间：2013-02-01T10:12:47.633
> 
> 标签：.net, entity-framework, ef-code-first, database-migration

I am really stuck at the moment. When I put a Required attribute on a field, Update-Database did not work. I had to go to the database and drop a constraint and then it did work. So problem solved. However since then all the changes I have tried to make have been ignored. I get;

```
PM> Update-Database -Verbose
Using StartUp project 'SCD'.
Using NuGet project 'SCD.Model'.
Specify the '-Verbose' flag to view the SQL statements being applied to the target database.
Target database is: 'SherryGreenGroup' (DataSource: SQL_MULALLEY, Provider: System.Data.SqlClient, Origin: Configuration).
No pending code-based migrations.
Running Seed method.
PM> 
```

It simply ignores the change I am making and nothing I can do will change that. Why would this be and how do I fix it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:53:25.297

我发现的问题是我将我的数据库项目的 dll 移到了一个 lib 库中，这破坏了 Database Migrations 的工作方式。

# php - Return type of an included file

> ID：14643971
> 
> 赞同：2
> 
> 时间：2013-02-01T10:12:50.050
> 
> 标签：php, eclipse

Suppose I have a file called `routes.php` containing routes for my webapp:

```
use Symfony\Component\Routing;

$routes = new Routing\RouteCollection();
// Add routes here

return $routes;

```

This file is then included in my front controller as follows:

```
$routes = include 'routes.php';

```

Clearly this `$routes` object is of type `RouteCollection`. However, Eclipse doesn't seem to be aware of this, and as such I can't view the the object's methods when I start typing `$routes->` which makes it difficult to know what methods and parameters are available to me.

Is there any way for me to hint at the return type of my `routes.php` file? I've tried adding an annotation `@return \Symfony\Component\Routing\RouteCollection` at the top of the routes file, but this doesn't seem to make any difference.

I'm using Eclipse 4.2 with the Aptana Studio 3 plugin. If this is a limitation specific to Aptana, would PDT handle this differently?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:20:20.880

PHPDoc 中没有指定文件的返回类型，因此您必须定义包含它的类型：

```
/* @var $routes \Symfony\Component\Routing\RouteCollection */
$routes = include 'routes.php'; 
```

取决于 IDE `/** @var`（即 Zend Studio、Eclipse PDT）或`/* @var`（即 Aptana、NetBeans）

# sql - Query in MS Access

> ID：14643972
> 
> 赞同：1
> 
> 时间：2013-02-01T10:12:52.560
> 
> 标签：sql, ms-access

I have a problem with my query in MS Access 2000\. I need to select by the current date in database. I put either function `date()` or `now` and it doesn't work. Here is my query:

```
SELECT     TOP 100 PERCENT dbo.КАРНЕТ.НомКарнета, dbo.ФИРМА.НаимПредпр
 FROM         dbo.ФИРМА INNER JOIN
                  dbo.КАРНЕТ ON dbo.ФИРМА.КодПредпр = dbo.КАРНЕТ.КодПредпр
  WHERE     (dbo.КАРНЕТ.ДтСдачи = CONVERT(DATE, 'DATE()', 102))
  GROUP BY dbo.КАРНЕТ.НомКарнета, dbo.ФИРМА.НаимПредпр; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T10:47:12.490

您应该能够在[`Date()`](http://www.techonthenet.com/access/functions/date/date.php)没有单引号的情况下使用：

```
WHERE dbo.КАРНЕТ.ДтСдачи = Date() 
```

该`Date()`函数将返回当前系统日期。

如果您`dbo.КАРНЕТ.ДтСдачи`的时间包含在其中，那么您可能需要对其进行格式化，并且您也可以将`Date()`值格式化为相同：

```
WHERE Format(dbo.КАРНЕТ.ДтСдачи, "yyyy.mm.dd") = Format(Date(), "yyyy.mm.dd") 
```

*注意：我刚刚在 MS Access 2003 中测试了上述行，它返回了记录。MS Access 2000 的代码应该相同。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T10:14:58.247

尝试这个：

```
SELECT FORMAT(DATE(),'DD.MM.YYYY') 
```

在 MS Access 中的结果：

```
01.02.2013 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T10:40:16.057

1.  尝试使用`now()`或`today()`不`date()` **使用引号**。

2.  您可能没有当天的数据。

3.  还将您的字段转换为没有时间的日期格式，`convert(...)`或者`format()`在将其与`date()`函数进行比较之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-29T15:30:29.897

您可以通过多种方式格式化日期。

格式 (#17/04/2004#, "Short Date") 结果: '17/04/2004'

格式 (#17/04/2004#, "Long Date") 结果: 'April 17, 2004'

格式 (#17/04/2004#, "yyyy/mm/dd") 结果: '2004/04/17'

```
Sub Createdate()
myDate = Format(Date, "Short Date")
End Sub 
```

?myDate 12/29/2016

# css - Issue with textarea overflow:visible

> ID：14643973
> 
> 赞同：1
> 
> 时间：2013-02-01T10:12:53.567
> 
> 标签：css

i have a form with textareas like this:

```
<TEXTAREA NAME="tekniku_mesazh" id='tekniku_mesazh' COLS=40 ><pre><?php echo $row['tekniku_mesazh'];?></TEXTAREA> 
```

Now, what i need to do is, i want the text to be visible inside it, i've tried:

```
textarea {
    overflow:visible;
} 
```

But this won't work, why is that? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:16:27.090

您忘记了 a`<pre>`并且首先您必须检查 rows[] 是否包含某些东西

所以和你应该写的脚本的顶部

```
var_dump($row); // Just for Debugging

<textarea name="tekniku_mesazh" id='tekniku_mesazh' cols=40 ><pre><?php echo $row['tekniku_mesazh'];?></pre></textarea> 
```

您也可以将 id 用于 css

```
#tekniku_mesazh {
    overflow:visible;
} 
```

ps：你应该为css取一个简单的名字:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:24:07.917

可能出现的问题：

1) 如果您的 $row['tekniku_mesazh'] 字符串具有 html 特殊字符，则可能会隐藏文本。逃脱他们：

```
<TEXTAREA NAME="tekniku_mesazh" id='tekniku_mesazh' COLS=40 ><pre><?php echo htmlentities($row['tekniku_mesazh']);?></TEXTAREA> 
```

2）“pre”标签没有关闭，不会隐藏内容，但这也是一个错误：

```
<TEXTAREA NAME="tekniku_mesazh" id='tekniku_mesazh' COLS=40 ><pre><?php echo htmlentities($row['tekniku_mesazh']);?></pre></TEXTAREA> 
```

3）这只是一个小/完美主义的错误：使用小写的标签：

```
<textarea name="tekniku_mesazh" id='tekniku_mesazh' cols=40 ><pre><?php echo htmlentities($row['tekniku_mesazh']);?></pre></textarea> 
```

您还可以使用更短的 sintax 来简化 php（但这不是错误）：

```
<textarea name="tekniku_mesazh" id='tekniku_mesazh' cols=40 ><pre><?=htmlentities($row['tekniku_mesazh'])?></pre></textarea> 
```

我希望它对你有帮助。

最好的问候，阿德里安 M。

# internet-explorer - IE is aborting elements when the page is redirected

> ID：14643974
> 
> 赞同：1
> 
> 时间：2013-02-01T10:12:54.933
> 
> 标签：internet-explorer, redirect

I have something weird going on with IE (don't we all), in that when a page on my website is redirected via php header or javascript code it will abort one or two of the elements like a a js file, css or a ajax request and will cause the page to reload the elements again.

If I hit the same page direct, it will load as intended.

Has anyone else come across this error?

Thanks in advance for your input.

# java - MongoDB Java API 中 Lazy* 类的用途

> ID：14643985
> 
> 赞同：0
> 
> 时间：2013-02-01T10:13:30.890
> 
> 标签：java, mongodb

[包 org.bson](http://api.mongodb.org/java/current/org/bson/package-summary.html)的MongoDB Java 驱动程序文档提到了其他类的各种“懒惰”版本。不幸的是，这些类的 Javadocs 几乎不能称为文档。

他们的目的是什么，他们的行为与正常版本有何不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-02T12:59:33.427

在正常操作下，驱动程序使用类似于 DBObject Map 的接口创建和使用文档。插入文档时，它会遍历地图以将其转换为相应的 BSON 表示。查询时，它通过将键值对放入映射中来创建新文档。

但是有时您想使用原始 BSON 而不支付所有这些序列化和反序列化的成本。这就是惰性 DBObject 实现的目的。自定义编码器不将它们视为映射，而是将字节直接写入 BSON 流。同样，自定义解码器将原始字节直接写入惰性 DBObject。

在这种情况下，术语惰性的含义是，由于惰性等效项仍然必须实现 DBObject 接口，因此它们通过“惰性”解释它们包含的原始 BSON 字节数组来实现。

最后一点：惰性 DBObject 类很可能不会包含在即将发布的驱动程序 3.0 版本中，因为整个序列化正在以一种与惰性 DBObject 不兼容的方式发生变化。会有等效的功能，但不兼容 API。

# iphone - 我想在动画期间在图像上显示图像文件名

> ID：14643989
> 
> 赞同：2
> 
> 时间：2013-02-01T10:13:41.077
> 
> 标签：iphone, ios, uiimageview, uilabel

我是 iPhone 应用程序开发的新手。我创建了逐帧动画，动态显示文件夹中的所有图像。但是当特定图像在屏幕上显示到 UILabel 时，我也想显示图像文件名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:11:11.417

我也遇到过这种情况。在 xcode 中使用图像名称显示图像，这只是图像的参考，名称不会存储在任何地方。我认为您的所有图像名称都在数组中。为了显示具有特定图像的名称，只需按数组索引顺序加载图像，并将 label.text 设置为特定索引处的图像名称。使用这种方式我已经清除了我的情况。

# java - 如何在 jnlp 文件中区分 32 位和 64 位 java 版本

> ID：14643992
> 
> 赞同：11
> 
> 时间：2013-02-01T10:13:55.347
> 
> 标签：java, 32bit-64bit, jnlp, java-web-start

为了启动我们的遗留应用程序，我们通过 jnlp 使用 java WebStart。

我们希望支持 64 位 Java 客户端，但我们的库之一是依赖于体系结构的。

我们想过做类似的事情：

```
<resources>
  <j2se version="1.6+" sun.arch.data.model="64"/>
  <jar href="/apps/swt-3.7M5-win32-win32-x86_64_s.jar" download="eager" />
</resources>
<resources>
  <j2se version="1.6+" />
  <jar href="/apps/swt-3.7M5-win32-win32-x86_s.jar" download="eager" />
</resources> 
```

这不起作用，因为参数 sun.arch.data.model="64" 用于设置参数而不是对其进行测试。

有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-02T11:22:14.073

这在文档中进行了解释，此处：[http ://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html#resources](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html#resources)

但是，它并没有说明哪些`arch`值是有意义的。您会希望它适用于不同的 JVM 实现和版本。我用谷歌搜索了一段时间，这就是我最终使用的：

```
 <resources>
    <java version="1.6+"/>
    <jar href="lwjgl-2.8.4.jar"/>
    <jar href="lwjgl_util-2.8.4.jar"/>
  </resources>

  <!-- LWJGL Linux 64-bit native libraries -->
  <resources os="Linux" arch="amd64">
    <nativelib href="lwjgl-amd64-linux.jar"/>
  </resources>
  <resources os="Linux" arch="x86_64">
    <nativelib href="lwjgl-amd64-linux.jar"/>
  </resources>

  <!-- LWJGL Linux 32-bit native libraries -->
  <resources os="Linux" arch="x86">
    <nativelib href="lwjgl-x86-linux.jar"/>
  </resources>
  <resources os="Linux" arch="i386">
    <nativelib href="lwjgl-x86-linux.jar"/>
  </resources>

  <!-- LWJGL Windows 64-bit native libraries -->
  <resources os="Windows" arch="amd64">
    <nativelib href="lwjgl-amd64-win.jar"/>
  </resources>
  <resources os="Windows" arch="x86_64">
    <nativelib href="lwjgl-amd64-win.jar"/>
  </resources>

  <!-- LWJGL Windows 32-bit native libraries -->
  <resources os="Windows" arch="x86">
    <nativelib href="lwjgl-x86-win.jar"/>
  </resources>
  <resources os="Windows" arch="i386">
    <nativelib href="lwjgl-x86-win.jar"/>
  </resources>

  <!-- LWJGL MAC OS/X native libraries -->
  <resources os="Mac">
    <nativelib href="lwjgl-macosx.jar"/>
  </resources> 
```

# apache - .htaccess 中的 mod_rewrite 规则

> ID：14643994
> 
> 赞同：2
> 
> 时间：2013-02-01T10:13:56.813
> 
> 标签：apache, .htaccess

我想在我的 .htaccess 文件中使用重写规则来更改我的文档根目录，并将所有请求重定向到`index.php`静态资源除外

换句话说：

1.  如果路径前缀为`www`存在的文件（即`www/{%request_uri}`）： `http://domain.com/css/main.css`应重写为`http://domain.com/www/css/main.css`

2.  如果该文件不存在，则重定向到应用程序主入口点`www/index.php`：例如

    `http://domain.com`应该改写为`http://domain.com/www/index.php`

    `http://domain.com/hello`应该改写为`http://domain.com/www/index.php/hello`

    `http://domain.com/hello?a=1`应该改写为`http://domain.com/www/index.php/hello?a=1`

我尝试了变体，但是它要么给我们 500 内部服务器错误，要么给我们无限循环。这是一个给出 500 内部服务器错误：

```
# try to find it in www/
RewriteCond {%DOCUMENT_ROOT}/www%{REQUEST_URI} -f
RewriteCond {%DOCUMENT_ROOT}/www%{REQUEST_URI} -d
RewriteRule ^(.+) www/$1 [L]

RewriteRule ^(.*) www/index.php/$1 [L] 
```

这个还有：

```
RewriteCond %{REQUEST_URI} !www/
RewriteRule (.*) /www/$1

RewriteCond {%REQUEST_FILENAME} !-f
RewriteCond {%REQUEST_FILENAME} !-d
RewriteRule www/(.*) /www/index.php/$1 [PT,L] 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:58:47.780

我认为这是不可能的，`.htaccess`但有两个是可能的。

您的根目录中需要一个`/.htaccess`：

```
RewriteEngine on

RewriteBase /

# We don't want infinite rewriting.
RewriteCond %{REQUEST_URI} !www/.*$
RewriteRule ^(.*)$ www/$1 [L] 
```

在您的 www 目录中还有另一个`/www/.htaccess`：

```
RewriteEngine on

RewriteBase /www

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:19:37.850

好吧，实际上我犯了一个愚蠢的错误！`%`标志应该在括号`{}`之外！

这可以在根目录中的一个 .htaccess 中完成：

```
RewriteEngine on

RewriteCond %{REQUEST_URI} !www/ 
RewriteRule ^(.*)$ www/$1

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^www/(.*)$ www/index.php/$1 [L] 
```

# ios - 全屏显示多个图像

> ID：14643998
> 
> 赞同：0
> 
> 时间：2013-02-01T10:14:11.607
> 
> 标签：ios, image, fullscreen

我正在寻找Apple用来全屏显示许多图像的类的名称（类似于iPad上的AppStore-App，当您点击任何应用程序的预览图像时。在视图的底部是一个带有所有图像中的小预览图像）。

如果这是一个公共类，它是如何调用的，它是否也适用于 iPhone？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:49:48.093

好的，所以我创建了自己的`ImageFullScreenPresenter`. 对于任何试图构建自己的人来说，重要的`ImageFullScreenPresenter`是使其成为`UIViewController`.

```
 PKImageFullScreenPresenter *pkImageFullScreen = [[[PKImageFullScreenPresenter alloc] initWithNibName:@"PKImageFullScreenPresenter" bundle:nil imageArray:myImageArray] autorelease];
        AppDelegate *appDel = (AppDelegate *)[UIApplication sharedApplication].delegate;
        UIViewController     *rootViewController;
        if (DEVICE_IS_IPAD) {
            //since the splitviewcontroller is the rootviewcontroller on ipad i set it as my temporary rootViewcontroller for ipad
            rootViewController  = appDel.splitViewController;
        }
        if (DEVICE_IS_IPHONE) {
            //on iphone i need the tabbarcontroller as temporary rootviewcontroller
            rootViewController  = appDel.tabBarController;
        }
        //set the alpha to zero, so it can fade in animated
        pkImageFullScreen.view.alpha    = 0;
        //save the temporary rootViewController, so I can set it back when dissmissing the ImageViewController
        pkImageFullScreen.superViewController       = rootViewController;

        //hide the status bar
        [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationFade];

        //setting black backgroundcolor
        [UIApplication sharedApplication].keyWindow.backgroundColor = [UIColor blackColor];

        //init the fullscreencontroller as rootview
        [[UIApplication sharedApplication].keyWindow setRootViewController:[[[UINavigationController alloc] initWithRootViewController:pkImageFullScreen] autorelease]];
//smooth fade animation
        [UIView animateWithDuration:.5f
                         animations:^(void){
                             pkImageFullScreen.view.alpha = 1;
                         }]; 
```

这样做，`ImageFullScreenPresenter`无论您使用的是基于窗口的应用程序、iPad 上的 splitViewController 还是其他任何东西，我都可以在 iPhone 和 iPad 上展示它。关闭 ImageFullScreenPresenter 时，我将临时保存的 rootViewController 设置回动画：

```
- (void)closeView:(id)sender{
[UIView animateWithDuration:.5f
                     animations:^(void){
                         self.view.alpha = 0;
                     }completion:^(BOOL finished){
                         //show the statusbar again
                         [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationFade];
                         //setting the statusbarstyle
                         [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent];
                         //set the backgroundcolor for the window
                         [UIApplication sharedApplication].keyWindow.backgroundColor = GLOBAL_TINT_COLOR; //my custom color vor all GUI Objects
                         //set the temporary rootViewController back
                         [[UIApplication sharedApplication].keyWindow setRootViewController:superViewController];

                         //sometimes the navigationbar hides the statusbar, the following two lines help me out
                         [[UIApplication sharedApplication].keyWindow.rootViewController.navigationController setNavigationBarHidden:YES];
                         [[UIApplication sharedApplication].keyWindow.rootViewController.navigationController setNavigationBarHidden:NO];

                     }];

} 
```

我不知道这是否是正确的方法，但它对我来说非常好。我不必担心任何旋转问题，就像我直接将它添加到`[UIApplication sharedApplication].keyWindow`.

我希望这可以帮助其他尝试实现相同目标的人:)