# StackOverflow 问答 15924000-15924999

# jquery - 如何使用 jquery 制作可拖动和可排序的元素列表？

> ID：15924003
> 
> 赞同：0
> 
> 时间：2013-04-10T11:01:30.770
> 
> 标签：jquery, jquery-ui-sortable, jquery-draggable

我有一个元素列表，我想使用 Jquery 使其可排序和可拖动。但是当我们拖动特定元素时，它不应该与其他现有元素重叠。请任何人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:52:49.510

```
<script>
 $(function() {
$( ".abc" ).draggable({
connectToSortable: "#sortable",
revert: "invalid"
});
$( "#sortable" ).sortable({
   revert: true
});
 $( "#sortable" ).disableSelection();
});
</script>
<ul id="sortable">
<li class="abc"> 1 </li>
<li class="abc"> 2 </li>
<li class="abc"> 3 </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:13:49.160

```
<script>

 $(function() {

$( ".abc" ).draggable();

});

</script>
<ul>
<li class="abc"> 1 </li>
<li class="abc"> 2 </li>
<li class="abc"> 3 </li>
</ul> 
```

# javascript - 如何为 fullcalender jquery 构建自定义主题？

> ID：15924009
> 
> 赞同：2
> 
> 时间：2013-04-10T11:01:39.707
> 
> 标签：javascript, jquery, css, fullcalendar

我想为[http://arshaw.com/fullcalendar/](http://arshaw.com/fullcalendar/)构建自定义主题，是否有任何文档可以替换现有类并用新类覆盖。我不想使用 jquery UI 主题。

如何继续为 fullcalender 构建主题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:04:09.637

没有任何主题生成器。

虽然你可以自由地制作自己的 CSS 并让它看起来像你想要的那样。

我自己使用 fullcalendar，这是您可以设法获得的示例：

[http://cl.ly/image/2i3R170w080i](http://cl.ly/image/2i3R170w080i)

这是 CSS 的一部分。您可以在**fullcalendar.css**中编辑任何您想要的内容并覆盖它们的定义。

```
#calendar .icon-ok-sign {
    position: absolute;
    margin-left: 38px;
    margin-top: -42px;
}

#calendar .fc-header-left{
    height: 30px;
    border-right: solid 2px #DC9E0F;
    text-align:center;
    width: 50px;
    line-height: 30px;
}

#calendar .fc-header-center{
    height: 30px;
    line-height: 30px;
}

.rightArrow, .leftArrow {
    height:30px;
}

.leftArrow img, .rightArrow img{
    height:15px;
}

#calendar .fc-header-right{
    height: 30px;
    border-left: solid 2px #DC9E0F;
    text-align:center;
    width: 50px;
    line-height: 30px;
}

#calendar .fc-header-title h2 {
    line-height: 20px;
}

#calendar .fc-today {
    color:#FBB616;
}

#calendar .fc-today.selected {
    color:#FFF;
}

#calendar .selected {
    background-color: #FBB616;
} 
```

# javascript - javascript中事件处理程序的异步或同步调用

> ID：15924014
> 
> 赞同：20
> 
> 时间：2013-04-10T11:02:00.063
> 
> 标签：javascript, jquery, asynchronous, event-handling, synchronous

事件处理程序在 JavaScript 中是同步执行还是异步执行？这是[JS bin](http://jsbin.com/uvoqit/1/edit)，它显示事件处理程序是同步执行的。

代码：

```
$('#toclick').bind('custom', function() {
    for (var i=0; i<100000; i++) {}
    console.log('Inside click handler');
});

$('#toclick').trigger('custom');
console.log('Outside click handler'); 
```

输出：

```
Inside click handler
Outside click handler 
```

这意味着如果我们触发一个事件，它下面的代码将不会被执行，除非所有的事件处理程序都被执行。我对吗 ？

[带有多个事件处理程序的 Bin](http://jsbin.com/uvoqit/3/edit)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-10T11:03:45.560

这是正确的。所有事件处理程序都是按绑定顺序同步触发的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-01T15:56:51.357

一些事件处理程序是同步执行的，而另一些是异步执行的。请参阅[DOM-Level-3-Events](http://dev.w3.org/2006/webapi/DOM-Level-3-Events/html/DOM3-Events.html#sync-async)

# cordova - PhoneGap+Backbone.js：无法显示电话联系人列表

> ID：15924019
> 
> 赞同：0
> 
> 时间：2013-04-10T11:02:09.907
> 
> 标签：cordova, backbone.js

我有一个 PhoneGap 应用程序，我使用 Backbone js 来管理模型、视图和路由器。

我有一个显示电话联系人列表的视图。

使用 PhoneGap API 检索电话联系人。

**联系人视图模板**是这样的：

```
<script type="text/template" id="contacttemplate">
            <div>
            <dl>
                <dt><%= displayName %></dt>
            </dl>
            </div>
        </script> 
```

视图的**渲染**函数是这样的：

```
render: function () {
        var template = _.template($("#contacttemplate").html(), 
JSON.stringify(this.model));
        $(this.el).html(template);
        return this;
    } 
```

其中模型的类型为[Contact](http://docs.phonegap.com/en/1.4.1/phonegap_contacts_contacts.md.html#Contact)

但我收到以下错误

> ReferenceError:'displayName' 未定义

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:53:29.533

用于`model.toJSON()`获取模型属性的 json 数据。

```
var template = _.template($("#contacttemplate").html(), this.model.toJSON()); 
```

[http://backbonejs.org/#Model-toJSON](http://backbonejs.org/#Model-toJSON)

# c# - 构建表达式以检查 null

> ID：15924023
> 
> 赞同：0
> 
> 时间：2013-04-10T11:02:18.360
> 
> 标签：c#, lambda, expression

我很难弄清楚如何构建表达式树来确定属性是否为空。我有这样的事情：

```
public static Expression<Func<S, bool>> CreateFunc(QueryPiece<S> queryPc)
{
    //arg
    ParameterExpression argParam = Expression.Parameter(typeof(S));

    //property
    MemberExpression memberExpr = Expression.Property(argParam, "SomeProperty");

    //property type for constant conversion
    Type propType = memberExpr.Member is MethodInfo
        ? ((MethodInfo)memberExpr.Member).ReturnType
        : ((PropertyInfo)memberExpr.Member).PropertyType;

    //tried this ... unsuccessfully
    Expression func = Expression.Equal(memberExpr, Expression.Constant(null, propType));

    return Expression.Lambda<Func<S, bool>>(func, argParam);
} 
```

我的希望——无论多么徒劳；-)——我可以就好像成员属性等同于 null。

我已经看到一些关于如何使用 Expression.Coalesce 来实现这一点的提及，但我似乎无法让它发挥作用。作为记录，当我尝试使用返回的 Lambda 时引发的运行时错误是一个通用的 ArgumentNullException。

我发现了这个类似的帖子：[在 C# 中，我如何在动态快速代码中添加一个空检查](https://stackoverflow.com/questions/5608521/in-c-how-can-i-add-a-null-check-into-dynamic-express-code) - 我似乎不知道如何为我的场景重构它。

# ios - iOS - 从应用程序上传到 Vimeo

> ID：15924024
> 
> 赞同：1
> 
> 时间：2013-04-10T11:02:19.140
> 
> 标签：ios, video, vimeo

在我的 iOS 应用程序中，用户可以选择将视频上传到 Vimeo。
我遇到了一个框架' [https://github.com/eternalstorms/ESSVideoShare-for-OS-X-Lion](https://github.com/eternalstorms/ESSVideoShare-for-OS-X-Lion) '，它可以选择将视频上传到 Vimeo。
当我运行示例代码时，它会打开 Safari 进行 vimeo 身份验证。成功验证后，它不会返回应用程序。有人可以帮助我确定为什么它在授权后不返回应用程序的问题。
在 info.plist 文件中，包含 url 方案。
注册vimeo应用程序时，必须要有“回调URL”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:16:12.013

我找到了解决方案：在 vimeo 中创建应用程序时，将回调 url 设置为“myapp://something.com” 然后在应用程序的 urlscheme 中，您必须将 urlschemes 设置为“myapp” 注意：使用您自己的“myapp”的标签以将 url 方案与其他应用程序区分开来。

# c# - 使用 FileSystemWatcher 监视文件系统

> ID：15924025
> 
> 赞同：2
> 
> 时间：2013-04-10T11:02:26.163
> 
> 标签：c#

我`FileSystemWatcher`用于监视文件系统。它可以在特定的文件夹或驱动器上观看。

但我希望它在整个文件系统上意味着它应该在所有驱动器上观看。

对此有任何想法吗？

我做那么多。

```
public static void Run()
{
     string[] args = System.Environment.GetCommandLineArgs();

     if (args.Length < 2)
     {
          Console.WriteLine("Usage: Watcher.exe PATH [...] [PATH]");
          return;
     }
     List<string> list = new List<string>();
     for (int i = 1; i < args.Length; i++)
     {
          list.Add(args[i]);
     }

     foreach (string my_path in list)
     {
          WatchFile(my_path);
     }

     Console.WriteLine("Press \'q\' to quit the sample.");
     while (Console.Read() != 'q') ;
}
private static void WatchFile(string watch_folder)
{
    watcher.Path = watch_folder;

    watcher.NotifyFilter = NotifyFilters.LastWrite;
    watcher.Filter = "*.xml";
    watcher.Changed += new FileSystemEventHandler(convert);
    watcher.EnableRaisingEvents = true;
} 
```

使用[Filesystem Watcher - 多个文件夹](https://stackoverflow.com/questions/15635477/filesystem-watcher-multiple-folders)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:04:00.097

一种方法是枚举所有目录并通过`FileSystemWatcher`在每个目录上使用来查看所有目录。

但是会消耗大量资源。因此，您可以换个方式查看此链接：[Filewatcher for the entire computer (alternative?)](https://stackoverflow.com/questions/9196731/filewatcher-for-the-whole-computer-alternative)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-28T20:18:01.863

您可以使用 IncludeSubdirectories to Logical Drives 来监视整个系统。试试这个代码，

```
string[] drives = Environment.GetLogicalDrives();

foreach(string drive in drives)
{
   FileSystemWatcher watcher = new FileSystemWatcher();
   watcher.Path = drive;
   watcher.IncludeSubdirectories = true;
   watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
                   | NotifyFilters.FileName | NotifyFilters.DirectoryName;

   watcher.Filter = "*.txt";

   watcher.Changed += new FileSystemEventHandler(OnChanged);
   watcher.Created += new FileSystemEventHandler(OnChanged);
   watcher.Deleted += new FileSystemEventHandler(OnChanged);
   watcher.Renamed += new RenamedEventHandler(OnRenamed);

   watcher.EnableRaisingEvents = true;
} 
```

# javascript - 如何使用 children() 函数选择孩子？

> ID：15924028
> 
> 赞同：4
> 
> 时间：2013-04-10T11:02:28.390
> 
> 标签：javascript, jquery, function, children

我不明白如何在 jQuery 中使用 children() 函数，我有这段代码：

```
jQuery('#nav li.over a.level-top').css({'padding-bottom': '26px'}); 
```

我想替换`#nav li.over`为`var navLiOver = jQuery('#nav li.over');`

这不起作用：

```
navLiOver.children('a.level-top').css({'padding-bottom': '26px'}); 
```

任何人都可以向我解释该`children()`功能是如何工作的吗？

HTML 代码：

```
<ul id="nav">
    <li class="level-top over">
        <a class="level-top">Link1</a>
        <ul class="level0">
            <li>1</li>
            <li>2</li>
            <li>3</li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:05:36.567

相当于`$('#nav li.over a.level-top')`是`navLiOver.find('a.level-top')`

但是，要使您的`padding-bottom`代码产生任何效果，您需要确保锚点具有允许填充的显示模式，例如`block`或`inline-block`。无论您如何找到元素，这都是正确的。

[演示](http://jsfiddle.net/Aq54p/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:06:21.680

你可以使用 find()

```
navLiOver.find('a.level-top'); 
```

> .find() 和 .children() 方法是相似的，只是后者只沿着 DOM 树向下移动一层。

而查找（）

> 获取当前匹配元素集中每个元素的所有后代

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:11:51.970

和...之间的不同

```
jQuery('#nav li.over a.level-top') 
```

和

```
jQuery('#nav li.over').children('a.level-top') 
```

是后者只选择直接的孩子。对于您期望的行为，请改用 find()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T11:32:05.080

你的代码工作很好

```
navLiOver.children('a.level-top') 
```

不起作用的是`.css({'padding-bottom': '26px'});`

[**小提琴**](http://jsfiddle.net/mohammadAdil/AXNW9/)

`a`标签是`inline`默认的。您不能将顶部/底部填充应用于内联元素

如果你想在你周围有一些填充物，`<a>`你可以这样做

```
a { color: #fff; display: inline-block; text-decoration: none; padding: 0px 0px 26px 0px;} 
```

[**小提琴**](http://jsfiddle.net/mohammadAdil/AXNW9/2/)

# php - Facebook 页面提要和照片

> ID：15924031
> 
> 赞同：0
> 
> 时间：2013-04-10T11:02:36.983
> 
> 标签：php, facebook

我想在我的家中显示我的 Facebook 页面的最后一个提要，然后我在这个链接上挂钩： [https](https://www.facebook.com/feeds/page.php?id=204770913907&format=json) ://www.facebook.com/feeds/page.php?id=204770913907&format=json 问题是 facebook提供这种格式的图片： [https ://www.facebook.com/photo.php?fbid=10151523034618908&set=a.10150426023073908.381002.204770913907&type=1](https://www.facebook.com/photo.php?fbid=10151523034618908&set=a.10150426023073908.381002.204770913907&type=1)

然后我尝试将它们转换为直接 jpg 格式，但上面链接中列出的变量无助于弥补以下链接： [https ://fbcdn-sphotos-ga.akamaihd.net/hphotos -ak-ash3/733911_10151523034618908_777095662_n.jpg](https://fbcdn-sphotos-ga.akamaihd.net/hphotos-ak-ash3/733911_10151523034618908_777095662_n.jpg)

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:17:31.310

使用正则表达式从内容字段中获取图像

```
 preg_match('/.*(class="img" src=")([^"]+)(".*)/',$test,$matches);
echo $matches[2]; //img 
```

或使用 facebook api 获取您的图片

[http://developers.facebook.com/docs/reference/api/using-pictures/](http://developers.facebook.com/docs/reference/api/using-pictures/)

# css - 平板电脑最小分辨率和最大分辨率的媒体查询

> ID：15924032
> 
> 赞同：9
> 
> 时间：2013-04-10T11:02:37.377
> 
> 标签：css, responsive-design, media-queries

目前在做一个响应式设计网站。我使用媒体查询根据宽度和屏幕分辨率定位不同的设备。

1.  我有一个场景是我想使用屏幕分辨率来定位设备，但我不明白这是如何工作的。

2.  我想检查最小宽度和最大宽度，屏幕分辨率也可能从 97dpi 到 ipad 最大分辨率 264dpi。但这似乎不起作用。如果我为 hp 加载的平板电脑提供单一分辨率 min-width:155dpi 它可以工作。但是最小到最大分辨率条件似乎不起作用。你们能不能分享一下你的想法。

为此，我使用了如下代码

```
@media only screen and (min-width:768px) 
and (max-width:1024px) and (min-resolution:96dpi) and (max-resolution:264dpi){ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T05:29:22.427

`resolution`媒体查询[在 webkit 浏览器中还没有很好的支持，](https://developer.mozilla.org/en-US/docs/CSS/resolution#Browser_compatibility)所以你可能会更成功地使用它`device-pixel-ratio`。

[http://bjango.com/articles/min-device-pixel-ratio/](http://bjango.com/articles/min-device-pixel-ratio/)

`resolution`因此，我们可以使用那些能够理解它的浏览器（Firefox、IE9+、Opera）和`device-pixel-ratio`所有的 webkit（Chrome、Safari、iOS 和 Android）来重述您的媒体查询：

```
@media only screen and (min-resolution:96dpi) and (max-resolution:264dpi) and (min-width:768px) and (max-width:1024px),
       only screen and (-webkit-min-device-pixel-ratio: 1) and (-webkit-max-device-pixel-ratio:2) and (min-width:768px) and (max-width:1024px) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T21:12:02.900

这些 MQ 将处理 Windows8.1 模拟器中的预设设置：

```
@media screen and (resolution: 96dpi) and (max-width: 512px) and (device-aspect-ratio: 1024/768),
  screen and (resolution: 96dpi) and (max-width: 683px) and (device-aspect-ratio: 1366/768),
  screen and (resolution: 96dpi) and (max-width: 960px) and (device-aspect-ratio: 1920/1080),
  screen and (resolution: 96dpi) and (max-width: 1280px) and (device-aspect-ratio: 2560/1440) {
  body {
    background-color: red !important;
  }
}

@media screen and (min-resolution: 130dpi) and (max-resolution:140dpi) and (max-width: 960px) and (device-aspect-ratio: 1920/1200),
  screen and (min-resolution: 130dpi) and (max-resolution:140dpi) and (max-width: 720px) and (device-aspect-ratio: 1440/1080),
  screen and (min-resolution: 130dpi) and (max-resolution:140dpi) and (max-width: 960px) and (device-aspect-ratio: 1920/1080) {
  body {
    background-color: violet !important;
  }
}

@media screen and (max-resolution:  174dpi) and (min-resolution: 172dpi) and (max-width: 1280px) and (device-aspect-ratio: 2560/1440)  {
  body {
    background-color: purple !important;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-12T08:43:27.823

根据 Quirksmode [http://quirksmode.org/tablets.html的旧测量](http://quirksmode.org/tablets.html)

```
@media screen and (min-width: 37em) {
} 
```

但是，我猜这对于较新的平板电脑并不适用，因为我的手机有 37em 或更多。

关于什么：

```
@media screen and (min-width: 42em) {
} 
```

# java - 错误的字符串编码tomcat java linux

> ID：15924034
> 
> 赞同：0
> 
> 时间：2013-04-10T11:02:44.183
> 
> 标签：java, linux, tomcat, servlets, redhat

我开发了一个 Web 应用程序，它获取客户端的 txt 文件，读取文件内容并写入新创建的 txt 文件并将其保存到本地计算机，然后提供客户端链接以下载保存的文件。文件可能包含西里尔字符。Web 应用程序是使用 JSP 和 Servlet (jdk 6) 开发的，部署在 Windows 7 上的 Apache Tomcat 7 上。它可以正常工作，但是当我在 apache tomcat 7、OS redhat 5.5、jdk 7 上部署构建的 WAR 文件时，客户端下载保存的文件，西里尔字母显示为矩形。可能是什么原因？tomcat 配置相同，区别在于我的机器 jdk6、windows7 64 位操作系统和服务器 jdk7、redhat 32 位操作系统。

# iphone - How to get the alpha of an UIImage

> ID：15924036
> 
> 赞同：1
> 
> 时间：2013-04-10T11:02:46.610
> 
> 标签：iphone, ios, objective-c, xcode, uikit

I have a UIImage. I need to find out its alpha value. Can someone explain it to me in detail, providing links to any references and also source code of how to go about this. Please don't provide answers for finding out the alpha of the UIImageView because I do NOT need that. Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:08:34.857

您必须获得*CGImageRef*。一旦你有了它，你可以使用*CGImageGetAlphaInfo*方法返回图像的 alpha 通道信息。

# xml - 将 topMenu 移动到内容区域 magento

> ID：15924037
> 
> 赞同：1
> 
> 时间：2013-04-10T11:02:47.653
> 
> 标签：xml, magento, block

我在 magento XML 中创建了一个新的自定义块：

```
 <reference name="content">
        <block type="core/template" name="menu" template="page/html/menu.phtml"/>
    </reference> 
```

该块显示但是我无法显示目录/导航/top.phtml，我将此代码包含在自定义块中：

```
<?php echo $this->getChildHtml('topMenu') ?> 
```

但是菜单没有显示？我错过了什么？非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T07:55:25.140

您可以尝试使用代码显示块（menu.phtml）：

`echo $this->getParentBlock()->getParentBlock()->getChildHtml('header')->getChildHtml('topMenu');`

或者`echo $this->getParentBlock()->getParentBlock()->getChildHtml('topMenu');`

我试过了（但有另一个文件），它有效！

# jquery - 即使点击了子元素，如何获取父元素的数据属性

> ID：15924039
> 
> 赞同：5
> 
> 时间：2013-04-10T11:02:52.220
> 
> 标签：jquery, backbone.js

**在Backbone events(View)**中单击时，我试图获取 div 的数据属性。

如果我单击 div，我可以实现这一点，`listItem`但如果我要单击子元素跨度，它将失败，因为`$(e.target)`将是跨度。

那么如何获取父元素的data属性，即使子元素被点击了呢？

```
<div class="listItem" data-showInfo="true">
    <span class="arrow"></span>
</div>

events:{
  "click .listItem": function(e) {

    var $listItem= $(e.target);

    console.log($listItem.data('showInfo'));
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T12:13:47.703

使用`event.currentTarget`而不是`event.target`，它将被设置为`.listItem`独立于您单击的 DOM 节点的选择器

```
var V = Backbone.View.extend({
    events: {
        'click .listItem' : function(e) {
            console.log($(e.currentTarget).data('showinfo'));
        }
    }
}); 
```

还有一个演示[http://jsfiddle.net/nikoshr/QyP3Z/](http://jsfiddle.net/nikoshr/QyP3Z/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T11:09:29.040

你可以这样做：

```
$('.arrow').click(function(){
alert($(this).parent().attr('data-showInfo'));
}); 
```

你的例子在这个[JSFiddle](http://jsfiddle.net/6gQTA/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T11:48:29.340

```
events:{    
    "click .arrow": function(){
        console.log($(this).parent('.listItem').attr('data-showInfo'));
    };
} 
```

# android - Web Service SAP with Android: XmlPullParserException

> ID：15924041
> 
> 赞同：0
> 
> 时间：2013-04-10T11:02:53.410
> 
> 标签：android, web-services, sap, ksoap2, xmlpullparser

I have a problem trying to connect a Web Service made in SAP with Android. I know That are already a lot of questions with this Thread, but I tried a lot of solutions and nothing worked. I'm having this Exception in the androidHttpTransport.call:

```
org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <html>@1:7 in java.io.InputStreamReade 
```

And this is the code:

```
@SuppressLint("NewApi")
public class MainActivity extends Activity {

private String METHOD_NAME = "ZWS_NOMBRE_SOC";
// our webservice method name
private String NAMESPACE = "urn:sap-com:document:sap:rfc:function";
// Here package name in webservice with reverse order.
private String SOAP_ACTION = NAMESPACE + METHOD_NAME;
// NAMESPACE + method name
private static final String URL = "http://10.0.1.20:8000/sap/bc/srt/rfc/sap/zws_nombre_soci/100/zws_nombre_soci/zws_nombre_soci"; //"http://10.0.1.20:8000/sap/bc/srt/wsdl/srvc_E41F136236A01ED1A2AC083464D902B8/wsdl11/allinone/standard/document?sap-client=100";
private HttpTransportSE androidHttpTransport;

@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
            .permitAll().build();
    StrictMode.setThreadPolicy(policy);

    try {
        TextView lb = (TextView) findViewById(R.id.lb1);
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        request.addProperty("IV_BUKRS", "0001");
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                SoapEnvelope.VER11);
        envelope.dotNet = true;

        envelope.setOutputSoapObject(request);

        androidHttpTransport = new HttpTransportSE(URL);
        androidHttpTransport.debug = true; 

        androidHttpTransport.call(SOAP_ACTION, envelope);
        Object result = envelope.getResponse();
        ;
        lb.setText(result.toString());

    } catch (Exception e) {

        e.printStackTrace();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;

    }

} 
```

# emacs - Emacs - 禁用返回和退格键

> ID：15924043
> 
> 赞同：4
> 
> 时间：2013-04-10T11:03:02.077
> 
> 标签：emacs

我最近一直感觉 RSI 设置（我以前有过）。

我一直在关注我的手和右手弯曲按退格键和返回键的影响似乎导致了很多问题。

我已经将“Md”定义为向后删除，它工作正常，而且我知道“Cm”输入换行符，但我仍然不由自主地按下实际键，所以我想在 emacs 中禁用它们。

我试过这个：

```
(global-unset-key "\r") 
```

但这也打破了“厘米”所以我添加了这一行：

```
(global-set-key "\C-m" 'newline) 
```

但这也恢复了返回键。

请告诉我如何在保持其他绑定的同时仅取消绑定返回键和退格键

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T11:33:24.493

将 return 和 backspace 设置为什么都不做应该有效。也就是说，这两行就足够了：

```
(global-set-key (kbd "<return>") 'ignore)
(global-set-key (kbd "<backspace>") 'ignore) 
```

这将使击键像`C-m`操作一样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T11:33:40.847

我设法解决了。使用这个：

```
M-: (read-event "?") RET 
```

您可以找到一个键产生的事件。所以退格是“退格”，返回是“返回”（哎呀）。然后，您可以将其与 [return] 格式一起使用。所以我将这些行添加到我的 .emacs 文件中：

```
(global-set-key [backspace] 'other-window)
(global-set-key [return] 'other-window) 
```

现在，如果我能获得 emacs 来使用 SO 的快捷方式就好了！

# android - 如何使标记信息窗口中的内容在android中可点击

> ID：15924045
> 
> 赞同：4
> 
> 时间：2013-04-10T11:03:03.300
> 
> 标签：android, google-maps, google-maps-markers, infowindow

当单击 android 中的地图标记时，我正在使用自定义布局显示为 Infowindow。

![在此处输入图像描述](https://i.stack.imgur.com/UNpIs.png)

在上图中，当我在 EditText 上单击以输入名称时，我确实观察到 Edit Text 没有被编辑并且整个窗口被选中。使用自定义布局时如何使信息窗口中的字段可点击？

请建议我任何想法。请帮忙！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T11:12:08.647

快速回答：`you can't.`

谷歌地图将您自定义的内容呈现`InfoWindow`为图像，并将其作为图像显示给您。因此，您仅将单击侦听器设置为整个窗口，而不是其中的视图。

您唯一的选择是将其设置`ClickListener`为整体`InfoWindow`并弹出一个带有`EditText`您想要的视图的对话框，而不是直接在`InfoWindow`.

来自`Google Docs`：[https ://developers.google.com/maps/documentation/android/marker#info_windows](https://developers.google.com/maps/documentation/android/marker#info_windows)

> 注意：绘制的信息窗口不是实时视图。视图在返回时呈现为图像（使用`View.draw(Canvas)`）。这意味着对视图的任何后续更改都不会反映在地图上的信息窗口中。要稍后更新信息窗口（例如，加载图像后），请调用`showInfoWindow()`. 此外，信息窗口不会尊重任何普通视图的典型交互性，例如触摸或手势事件。但是，您可以在整个信息窗口上收听通用单击事件，如下节所述。

# php - Different loop count conditionals within same loop in PHP?

> ID：15924046
> 
> 赞同：0
> 
> 时间：2013-04-10T11:03:04.407
> 
> 标签：php, wordpress

![复杂的网格布局](https://i.imgur.com/2zHmeaf.jpg)

I'm currently trying to wrap the first 2 posts in a div with the video and then output the remaining posts with a div wrapped around every 3 posts, as per image.

the line

```
if( $wp_query->current_post < 2 ): 
```

i've also tried with

```
if($count < 2) 
```

heres a condensed version of what i have so far: Any suggesttions would be really appreciated.

```
<div class="row-fluid">
    <div class="span8">
        <video></video>
    </div>
    <?php $count = 1; ?>
    <?php if ( have_posts() ) : ?>
    <?php while ( have_posts() ) : the_post(); ?>
    <?php if( $wp_query->current_post < 2 ):?>
    <div class="span4">
                   // content
    </div>
    <?php if($count % 2 == 0) {
        echo '</div><div class="row-fluid">';
    }?>

    <?php else: ?>

    <div class="span4">
        //content
    </div>
    <?php if($count % 3 == 0) {
        echo '</div><div class="row-fluid">';
    }?>
    <?php $count++;?>
    <?php endif; ?>
    <?php endwhile; ?>
    <?php echo '</div>'; ?>
</div>
<?php else : ?>
<article>default wp stuff</article>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:18:15.530

我认为这是一个更简单的解决方案，只需回显所有内容并使用 css (float: left) 正确定位内容。

```
<div style="width: 900px;">
  <div style="float: left; width: 600px; height: 400px;">
      some content
  </div>
  <?php foreach($post_list as $post_item): ?>
    <div style="float: left; width: 300px; height: 200px;">
      <?= $post->getContent(); ?> or what ever you use
    </div>
  <?php endforeach; ?>
  <br style="clear: left; display: none;" />
</div> 
```

请注意，我对 CSS 的经验并不多，但我希望这可以为您指明正确的方向。

# python - 使用python进行opencv

> ID：15924060
> 
> 赞同：1
> 
> 时间：2013-04-10T11:03:52.793
> 
> 标签：python, opencv

OpenCV 2.4 中有许多功能无法使用 Python。请建议我如何转换 C++ 函数，以便我可以在 Python 2.7 中使用。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:22:34.127

你应该看看 Python Boost。这可能会帮助您将需要的 C++ 函数绑定到 python。

# php - 如何使用 symfony 1.4 获取无效表单的原因？

> ID：15924067
> 
> 赞同：0
> 
> 时间：2013-04-10T11:04:11.763
> 
> 标签：php, symfony1, symfony-1.4, symfony-forms

我是symfony的新手。我写了一个表单提交代码。

```
public function executeEdit(sfWebRequest $request)
    {
        $userId = $request->getParameter('id');
        $this->user = sfGuardUserTable::getUserById($userId);
        $this->form = new editOwnerForm($this->user);
        $this->paymentForm = new profilePaymentInfoForm($this->user->getPaymentInformation());

        if ($request->getMethod() == sfWebRequest::POST) {
            $this->form->bind($request->getParameter($this->form->getName()));
            if ($this->form->isValid()) {
                $this->form->save(); 
                $this->message = 'Successfully updated owner details';                               
            } else {
                var_dump($this->form->renderGlobalErrors()); die;
            }
        }
    } 
```

我的表格总是无效的。（总是运行表单的其他部分有效）但我找不到原因。`var_dump($this->form->renderGlobalErrors());`不要给任何消息。我该如何解决它。？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T14:48:18.370

您需要从表单提交中找到错误...

调试栏的视图部分应以橙色显示并突出显示表单中的任何错误 - 只需单击“查看”，然后单击突出显示的表单字段。

如果没有，您可以尝试将您的 catch 块更改为类似的内容以进行调试：

```
foreach ($this->form as $key => $field) {
  $message = $field->renderError();
  if ($message) echo 'Error with field ', $key, ':', $message;
} 
```

不包括 CSRF 字段是一个常见问题 - 您是否在部分表单中包含了对 $form->renderHiddenFields() 的调用？

# php - 从 Facebook 获取相册列表

> ID：15924077
> 
> 赞同：2
> 
> 时间：2013-04-10T11:04:28.483
> 
> 标签：php, facebook

我想获取相册列表。我使用了以下代码，但没有运气。

```
$user = $facebook->getUser();
        $albums_str = "Here goes: ";
        if ($user) {
            try {

                $albums = $facebook->api('/me/albums');

                foreach ($albums['data'] as $album) {

                    $cover = "https://graph.facebook.com/{$album['id']}/picture? type=album&access_token={$facebook->getAccessToken()}";

                    // echo $album['name'];

                    $albums_str .= $album['name'];
                    // echo "<img src='https://graph.facebook.com/cover_photo/picture?type=normal'/>";
                }
            } catch (FacebookApiException $e) {
                error_log($e);
                $user = null;
                $albums_str .= '--Errorr--';
            } 
```

我是否需要在身份验证 url 参数中附加一些照片访问代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:21:57.393

根据[专辑文档](http://developers.facebook.com/docs/reference/api/album/)，您需要`user_photos`许可。因此，您应该在验证新用户时提出这个要求。

PS 另外，如果您从 Facebook 收到任何错误，请添加，也许权限不是您问题的原因。

# mysql - mysql中两个表的计数问题

> ID：15924080
> 
> 赞同：0
> 
> 时间：2013-04-10T11:04:33.893
> 
> 标签：mysql, count

我想从两个少于 3 张图片的表中获取记录数。这是我尝试过的，但效果不佳

```
SELECT
    SUM(tot_rent) AS tot_rent
    FROM (
    SELECT
            COUNT(id) AS tot_rent
        FROM crm_rentals_images
        GROUP BY rentals_id
        HAVING COUNT(*) <3
    UNION
    SELECT
            COUNT(id) AS tot_rent
        FROM crm_sales_images
        GROUP BY rentals_id
        HAVING COUNT(*) <3
    ) s 
```

缺少什么？当我与真实数据进行比较时，它没有显示正确的结果

```
CREATE TABLE IF NOT EXISTS `crm_rentals_images` (
`id` int(11) NOT NULL AUTO_INCREMENT,
`image` varchar(22) NOT NULL,
`rentals_id` int(22) DEFAULT NULL,
 PRIMARY KEY (`id`)
 ) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=11 ;

INSERT INTO `crm_rentals_images` (`id`, `image`, `rentals_id`) VALUES
(1, 'a.jpg', 1),
(2, 'b.jpg', 1),
(3, 'a.jpg', 1),
(4, 'b.jpg', 1),
 (5, 'a.jpg', 2),
(6, 'b.jpg', 2),
(7, 'a.jpg', 4),
(8, 'b.jpg', 4),
(9, 'a.jpg', 3),
(10, 'b.jpg', 3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:09:03.400

尝试这样的查询

```
select
  count(id) as tot_rent
from (
    select
        count(id) as tot_rent
    from crm_rentals_images
    GROUP BY rentals_id
    HAVING tot_rent < 3 
    union ALL
    select
        count(id) as tot_rent
    from crm_sales_images
    GROUP BY rentals_id
    HAVING tot_rent < 3
    ) s
group by tot_rent 
```

# selenium-ide - 如何使用 selenium IDE 在 xpath 正在更改的文本框中键入单词？

> ID：15924084
> 
> 赞同：0
> 
> 时间：2013-04-10T11:04:37.770
> 
> 标签：selenium-ide

嗨，我正在测试一个旅游域网站，并且在预订详细信息页面上，如果搜索 3 名成人和 2 名儿童，我将根据我的搜索获得相同编辑框的不同 xpath，如果我搜索，成人 2 的 xpath 与儿童 1 相同1 个成人 1 个孩子，所以我的脚本失败了需要一些建议吗？？？我也在 selenium 中尝试了不同的目标下拉选项，但不起作用:(我的脚本是万一，如果我搜索 3 个成人 2 个孩子，我会得到第二个成人 xpath，如下所示

```
<tr>
    <td>type</td>
    <td>id=cphSiteContentView_cphContentPanel_ucBookingSummary_ucShoppingCart_rptProductList_ctl00_0_ucTravellersContactDetails_0_rptRoomsDetails_0_rptAdultDetails_2_txtLastName_4</td>
    <td>thfh</td>
</tr> 
```

如果搜索 1 个成人和 1 个孩子，我会得到相同的 xpath

```
<tr>
    <td>type</td>
    <td>id=cphSiteContentView_cphContentPanel_ucBookingSummary_ucShoppingCart_rptProductList_ctl00_0_ucTravellersContactDetails_0_rptRoomsDetails_0_rptAdultDetails_2_txtLastName_4</td>
    <td>thfh</td>
</tr> 
```

想要一些建议如何识别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:50:09.460

您可以为目标尝试以下操作：

xpath=//*[包含(@id,'cphSiteContentView_cphContentPanel_ucBookingSummary_ucShoppingCart_rptProductList_ctl00')]

诀窍是搜索 id 的一部分（如果它是动态的）。请记住，您需要使 id 足够独特，以至于您不会返回 2 个或更多元素，否则明智的 IDE 只会选择它遇到的第一个元素

您可以编辑引号内的任何内容，以使 xpath 足够独特，只能选择您想要的 id。

# spring-security - 如何捕获身份验证事件？

> ID：15924094
> 
> 赞同：3
> 
> 时间：2013-04-10T11:05:11.660
> 
> 标签：spring-security

我尝试了以下方法：

```
<bean id="authenticationManager" class="org.springframework.security.authentication.ProviderManager">

    <property name="providers">
        <list>
          <ref local="myAuthnProvider"/>
        </list>
      </property>

    <property name="authenticationEventPublisher">
        <bean class="myPublisher/>
    </property>
</bean>

<security:authentication-manager>
    <security:authentication-provider ref="authenticationManager" />
</security:authentication-manager> 
```

但是我在启动过程中遇到了异常。我还尝试了构造函数标记，结果相同：

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authenticationManager': Could not resolve matching constructor (hint: secify index/type/name arguments for simple parameters to avoid type ambiguities) 
at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:250) 
```

我正在使用弹簧 3.1.1。

任何想法为什么会引发此错误？或有关如何捕获身份验证事件的其他建议？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T13:01:52.390

如果您只想获得有关身份验证事件的通知，那么您不必自定义`AuthenticationManager`. `ApplicationListener`实现如下所示的接口就够了，把一个这种类型的bean放在同一个配置了安全性的spring上下文中。

```
public class AuthenticationEventListener 
        implements ApplicationListener<AbstractAuthenticationEvent> {

    @Override
    public void onApplicationEvent(AbstractAuthenticationEvent event) {
        // process the event
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T13:05:24.613

看看所涉及的基本 Java 接口。您正在创建一个类型为`Providermanager`(interface `AuthenticationManager`) 的 bean，并且您试图将其分配给应该是 type 的东西`AuthenticationProvider`，因此您会收到错误消息。

`authentication-manager`命名空间元素自己创建一个实例，因此`ProviderManager`您将在同一配置中拥有两个实例。

在最新版本的 Spring Security 中，您可以使用以下方式将自定义`AuthenticationManager`注入到 Web 配置中：

```
<http authentication-manager-ref="authenticationManager">
   ... 
```

并完全绕过使用命名空间`AuthenticationManager`。

# iphone - 如何更新uiview视图中的tableview数据

> ID：15924095
> 
> 赞同：0
> 
> 时间：2013-04-10T11:05:21.010
> 
> 标签：iphone, uiview, delegates, tableview

现在，我有一个 SubscribeViewController，它有 2 个视图，它们是 UIView 的子类。在这 2 个视图中，我为每个视图添加了一个表格视图。SubscribeViewController 符合一个委托，即当我选择一个品牌时，我希望这两个视图的 tableview 更新它们的数据。但是怎么做呢？像这样的代码：

```
SubscribeViewController.m

@interface SubscribeViewController () <BrandsViewDelegate>

#pragma mark - BrandsViewDelegate
- (void)didSelectBrand:(Brand *)abrand
{
    //right here. how to update these 2 views' tableview data?

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:21:44.770

**建议：**不要使用`UIView`然后添加`UITableView`它们；您可以直接添加 2 `UITableView`。

**回答您的问题：**使用如下`reloadData`方法`UITableView`：

```
[self.view1.tableView1 reloadData];
[self.view2.tableView2 reloadData]; 
```

**或者**，如果您同意我的建议，那么：

```
[self.tableView1 reloadData];
[self.tableView2 reloadData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:13:06.393

在视图的子类中使用

`@property`以及`synthesize`子类中的两个tableview。（要在里面访问它`SubscribeViewController`）

```
SubscribeViewController.m

@interface SubscribeViewController () <BrandsViewDelegate>

#pragma mark - BrandsViewDelegate
- (void)didSelectBrand:(Brand *)abrand
{
    View1 *view1Obj=[[View1 alloc]initWithFrame:_givesomeframe_];
    View2 *view2Obj=[[View1 alloc]initWithFrame:_givesomeframe_];

    [view1.tableView1 reloadData];
    [view2.tableView2 reloadData];

} 
```

# grails - 如何在android模拟器上检索grails服务器登录页面，有什么建议吗？

> ID：15924097
> 
> 赞同：0
> 
> 时间：2013-04-10T11:05:23.183
> 
> 标签：grails, android-emulator, spring-security

先生，我是 android 领域的新手，所以我无法在 android 模拟器上检索 grails 服务器登录页面。所以请建议我克服上述问题。任何建议将不胜感激。感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:16:56.990

如果您想访问您的语言环境 Grails 实例，请使用`10.0.2.2`Android 模拟器中的 IP。

[有关Android 模拟器网络地址](http://developer.android.com/tools/devices/emulator.html#networkaddresses)的更多信息。

# java - 检查手机是否可以发送短信

> ID：15924099
> 
> 赞同：5
> 
> 时间：2013-04-10T11:05:29.740
> 
> 标签：java, android

我已经阅读了一些相关的问题，但其中大多数是针对电话的，而不是短信。到目前为止我发现的是：

```
TelephonyManager manager = (TelephonyManager) context
        .getSystemService(Context.TELEPHONY_SERVICE);
if (manager.getPhoneType() == TelephonyManager.PHONE_TYPE_NONE) {
    // I guess here are devices that are unable to send SMS
} else {
    // can send SMS
} 
```

这是真的吗，带有 TelephonyManager.PHONE_TYPE_NONE 的设备无法发送短信？我不太明白 TelephonyManager.PHONE_TYPE_NONE 的描述，即“没有电话收音机”。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:29:31.100

是的，使用**TelephonyManager.PHONE_TYPE_NONE**您不能发送 SMS。因为发送 SMS 需要无线电网络。但是，您可以在它们上使用一些基于 IP 的信使，例如 whats app、ebuddy

如果您看到**[android.hardware.telephony](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)**（您在 Android 清单文件中使用**uses-feature**标签指定），您会注意到在此功能下提到了发送/读取/写入 SMS。

**[Galaxy TAB 示例，无法拨打电话，但电话类型为 PHONE_TYPE_CDMA](https://stackoverflow.com/questions/5196833/android-device-phone-call-ability)**，因此此类情况需要添加额外的**线路号**检查，如上链接所示

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-05T03:21:52.023

使用以下代码：

```
Boolean canSendSMS (Context context)
{
PackageManager pm = context.getPackageManager();
return (pm.hasSystemFeature(PackageManager.FEATURE_TELEPHONY) || pm.hasSystemFeature(PackageManager.FEATURE_TELEPHONY_CDMA))
} 
```

# excel - Excel 宏按字母顺序将 Sheet1 中的一列中的数据分配到 Sheet2 中的几列

> ID：15924105
> 
> 赞同：-2
> 
> 时间：2013-04-10T11:05:40.447
> 
> 标签：excel, vba

我们有两张工作簿：Sheet1 和 Sheet2。在 Sheet1 中，只有一列包含近 100 万个单元格（产品名称）的数据。Sheet2 具有现有数据（也是产品名称），其中第一行保留用于字母列标题；AZ 和 NUM（27 列）。我们需要的是一个宏，它将对 Sheet1 a-z0-9 中的数据进行排序，然后将 Sheet1 中的每个字母的数据块分配（移动）到 Sheet2 中字母的每个指定列的数据底部。我们实际上已经在许多论坛中搜索了我们可以采用和适应的类似解决方案，但我们基本上没有找到任何解决方案。有人可以帮助我们吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:54:17.143

这是一些可以玩的代码。只需将其放入一个空的工作簿中，然后：

*   运行 createRandomStrings()
*   *手动对 Sheet1.ColumnA 中的项目进行排序*
*   然后运行 ​​tmp()

它应该给你一个想法。

您可以轻松记录正在进行的排序以获取代码。

```
Sub createRandomStrings()
    Dim curRow, curStr, curLtr, i
    Application.ScreenUpdating = False
    For curRow = 1 To 50000
        curStr = ""
        For i = 0 To 10
            curChar = Int((Asc("Z") - Asc("A") + 1) * Rnd + Asc("A"))
            curStr = curStr + Chr(curChar)
        Next i
        Cells(curRow, 1) = curStr
    Next curRow
    Application.ScreenUpdating = True
End Sub

Function findFirstItemStartingWith(startLetter) As Integer
    Dim curRow, curStr ', startLetter ** EDIT ** this var commented-out

    For curRow = 1 To 50000
        curStr = Cells(curRow, 1)
        If Mid(curStr, 1, 1) = startLetter Then
            findFirstItemStartingWith = curRow
            Exit Function
        End If
    Next curRow
    findFirstItemStartingWith = -1
End Function

Sub tmp()
    aStart = findFirstItemStartingWith("A")
    bStart = findFirstItemStartingWith("B")
    If (aStart <> -1) And (bStart <> -1) Then
        MsgBox ("A found from Row: " + Str(aStart) + " to " + Str(bStart - 1))
    End If
End Sub 
```

# c# - 类属性，可在内部获取和设置，但只能在外部获取

> ID：15924108
> 
> 赞同：7
> 
> 时间：2013-04-10T11:05:46.747
> 
> 标签：c#, class, properties

我意识到这可能是非常基本的事情，但我不确定实现以下目标的最佳实践。

我有以下带有字符串属性的类`myString`：

```
public class MyClass
{
    public string myString
    {
        get {
            return myString;
        }
    }

    public void AFunction()
    {
        // Set the string within a function
        this.myString = "New Value"; // Error because the property is read-only
    }
} 
```

我希望以下内容适用于该`myString`物业：

*   可内部设置
*   内部可获取
*   不可在外部设置
*   可外部获取

所以我希望能够`myString`在类内设置变量，并使其值从类外只读。

有没有办法在不使用单独的 get 和 set 函数并使`myString`属性私有的情况下实现这一点，如下所示：

```
public class MyClass
{
    private string myString { get; set; }

    public void SetString()
    {
        // Set string from within the class
        this.myString = "New Value";
    } 

    public string GetString()
    {
        // Return the string
        return this.myString;
    }
} 
```

`myString`上面的示例允许我在内部设置变量，但不能从类外部对实际属性进行只读访问。

我试过`protected`了，但这并不能从外部访问该值。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T11:06:45.793

听起来你只是想要：

```
public string MyString { get; private set; } 
```

这是一个具有公共 getter 和私有 setter 的属性。

根本不需要额外的方法。

`internal`（请注意，鉴于C#中关键字的特定含义，此处使用“内部”一词可能会造成混淆。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-10T11:09:15.593

您可以只为类成员（通常是构造函数）允许设置器：

```
public class MyClass
{
    public string myString { get; private set; }
} 
```

或者您可以在内部/装配成员中允许设置器：

```
public class MyClass
{
    public string myString { get; internal set; }
} 
```

吸气剂将是公开的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T11:07:09.740

您可以在 get 和 set 上指定访问修饰符，例如：

```
public string MyString
{
    get;
    private set;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T11:07:20.077

```
public string myString { get; private set; } 
```

# php - MySQL 数据意外显示

> ID：15924111
> 
> 赞同：0
> 
> 时间：2013-04-10T11:05:49.637
> 
> 标签：php, mysql, wordpress

我正在努力寻找解决我遇到的这个小问题的方法。我使用[WordPress Custom Tables Plugin](http://wordpress.org/extend/plugins/custom-tables/)在 WordPress 中创建了一个新的自定义表，并且我来创建代码以向当前用户显示该信息，但是当我回显表的值时，它们带有一些我不需要或不想要的额外信息，奇怪。

示例：我假设它从数组中给我一些我不需要的信息，而不是只输出`Search Name`我得到的信息。`s:13:"Search Name";`

任何人都知道如何仅检索表数据的值？

作为参考，输出 this 的代码如下：

```
global $wpdb;
global $current_user;

$userID = $current_user->ID;
$searchIDs = $wpdb->get_results("SELECT * FROM wp_wct3 WHERE userid = $userID;");

foreach($searchIDs as $searchID) {

    echo '<a href="/results">
    <div class="search-summary working">
        <h2 class="h1 orange left padding-left-1-4">'.$searchID->searchid.'</h2>
        <h2 class="dark-orange">'.$searchID->searchname.'</h2>
        <p>
        Status: <span class="red">In Progress</span><br>
        Date Created: 15/11/12<br>
        Keywords: 20
        </p>
    </div>
    </a>';   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:12:42.930

啊! 我需要将数据作为转义字符串保存到表中，而不是序列化它！

在我使用将表单数据保存到表之前 `$searchname = serialize($_POST["searchname"]);`

但现在使用`$searchname = mysql_real_escape_string($_POST["searchname"]);`奏效了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:16:13.687

声明后试试这个`foreach`：

```
if(preg_match('/"([^"]+)"/', $searchID->searchname, $match))
{
    $searchName = $match;
}
else
{
    $searchName = $searchID->searchname;
} 
```

然后将第二个更改`<h2>`为：

```
<h2 class="dark-orange">'.$searchName.'</h2> 
```

# linux - 使用命令行对多个文件执行命令

> ID：15924113
> 
> 赞同：2
> 
> 时间：2013-04-10T11:06:04.400
> 
> 标签：linux, command-line, mingw, wildcard

假设我有以下文件：

```
myfile1_1.dat
myfile1_2.dat
myfile2_1.dat
myfile2_2.dat
... 
```

并且我想对它们中的每一个使用相同的命令（同时忽略目录中不以 开头的其他文件`myfile`）。有没有一种简单的方法可以做到这一点？

到目前为止，我一直在玩弄通配符：

```
mycommand myfile*.dat 
```

**编辑：** 我同时使用 Linux 和 MinGW

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:14:04.887

`mycommand myfile*.dat`仅在`mycommand`支持多个文件时才有效。如果没有，您可以使用`xargs`将单个文件传递给`mycommand`如下所示：

```
echo myfile*.dat | xargs -n 1 mycommand 
```

或者，使用循环：

```
for file in myfile*.dat; do
    mycommand "$file"
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:10:29.437

如果您在 Linux 中执行此操作，我通常使用`xargs -n1`

```
ls | xargs -n1 echo File: 
```

# android - phonegap 数据库-哪个是正确的方法？

> ID：15924116
> 
> 赞同：0
> 
> 时间：2013-04-10T11:06:12.233
> 
> 标签：android, database, sqlite, cordova, phonegap-plugins

我正在尝试在**Phonegap Android**中实现一个应用程序。在过去的两天里，我正在寻找访问数据库并从中检索数据库的正确方法。我没有找到问题的答案

我了解到 Phonegap 不支持 SQLLITE，但支持 W3C Web SQL 数据库规范和 W3C Web 存储。

同时我注意到Phonegap 1.5 的插件很少......现在不存在。同时我发现 W3c 数据库为**iOS**提供了 5MB 的有限存储空间。

我发现这个用于 Phonegap Android 的 SQL 插件 [**PhoneGap-SQLitePlugin-Android**](https://github.com/brodyspark/PhoneGap-SQLitePlugin-Android) 是否建议使用此方法或任何其他方法。请指导我。

因此，如果您有任何可以遵循的访问数据库的示例，请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T15:17:34.127

我已经在这里回答了类似的问题::

[Phonegap 离线数据库](https://stackoverflow.com/questions/12005042/phonegap-offline-database/15811728)

它概述了您可能需要的所有细节的步骤。我在这里重新发布答案。

**1.本地存储::**

检查本地存储

```
function supports_html5_storage() {
  try {
    return 'localStorage' in window && window['localStorage'] !== null;
  } catch (e) {
    return false;
  }
} 
```

将项目设置为 LocalStorage

```
localStorage.setItem("bar", foo); 
```

或者

```
localStorage["bar"] = foo; 
```

从 LocalStorage 获取项目

```
var foo = localStorage.getItem("bar"); 
```

或者

```
var foo = localStorage["bar"]; 
```

**2\. SQLite 数据库（更方便，更持久）**

设置你的数据库

```
var shortName = 'BHCAppDB'; 
var version = '1.0'; 
var displayName = 'BHCAppDB'; 
var maxSize = 65535; 
if (!window.openDatabase){ 
     alert('!! Databases are not supported in this Device !! \n\n We are sorry for the inconvenience and are currently working on a version that will work on your phone'); 
}
db = openDatabase(shortName, version, displayName,maxSize);
createAllTables(db); 
```

创建您的表格

```
function createAllTables(db){
    db.transaction(function(transaction){
        transaction.executeSql("CREATE TABLE IF NOT EXISTS Profile(id INTEGER PRIMARY KEY AUTOINCREMENT,name TEXT, gender TEXT,age INTEGER)");
} 
```

执行 SQL 查询

```
transaction(function(transaction){
        var rowCount = 'SELECT * FROM Profile';
        transaction.executeSql(rowCount,[],function(transaction,result){
            if(result.rows.length == 0){
                var sqlString = 'INSERT INTO Profile (name,gender,age) VALUES("自己","Female",18)';
                transaction.executeSql(sqlString);

            }
        });
    }); 
```

**3\. 所有设备上的原生存储**

这是Phonegap最好的部分。您可以使用 Phonegap 插件调用在所有设备上调用本机插件类。在调用过程中，您可以将参数传递给类，并且本机类可以将您的数据存储在操作系统本身中。

例如 :: 在 iOS 中，您创建一个插件 .h 和 .m 类并将其注册到 Cordova.plist 文件。完成后，您需要使用 Phonegap 从 JavaScript 向该类发送调用。一旦使用 NSDictionary 或任何其他 NSArray 类型接收到参数，您就可以调用 CoreData 类来存储无限量的数据。你永远不会耗尽内存。

这也可以对所有其他操作系统以类似的方式完成:)

对于加密，请尝试以下操作 :: SQLCipher

以下是有关使用现有 SQLite 数据库的一些附加信息。在此示例中，encrypted.db 是您创建和编译的全新数据库。

```
ATTACH DATABASE 'encrypted.db' AS encrypted KEY 'secret'; -- create a new encrypted database
CREATE TABLE encrypted.t1(a,b); -- recreate the schema in the new database (you can inspect all objects using SELECT * FROM sqlite_master)
INSERT INTO encrypted.t1 SELECT * FROM t1; -- copy data from the existing tables to the new tables in the encrypted database
DETACH DATABASE encrypted; 
```

# c# - 获取已安装的 .NET 框架版本的完整列表

> ID：15924118
> 
> 赞同：1
> 
> 时间：2013-04-10T11:06:20.967
> 
> 标签：c#, .net, frameworks

我需要获取计算机中安装的所有框架版本的列表，购买我需要全名，因为它在添加/删除程序中。喜欢：“Microsoft .NET Framework 3.5 SP1”或“Microsoft .NET Framework 2.0 Service Pack 2”

有没有办法获得该列表（在 Windows XP 和 7 中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:13:14.643

您可以从 Windows 注册表获取框架版本，包括它们的名称

请参阅以下链接以供参考：

[有没有一种简单的方法来检查 .NET Framework 版本？](https://stackoverflow.com/questions/951856/is-there-an-easy-way-to-check-net-framework-version-using-c)

[http://www.walkernews.net/2008/05/16/how-to-check-net-framework-version-installed/](http://www.walkernews.net/2008/05/16/how-to-check-net-framework-version-installed/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:47:25.567

谢谢，我使用这些链接来得到我的答案，这就是我所做的：

```
 string path = @"SOFTWARE\Microsoft\NET Framework Setup\NDP";
        List<string> display_framwork_name = new List<string>();

        RegistryKey installed_versions = Registry.LocalMachine.OpenSubKey(path);
        string[] version_names = installed_versions.GetSubKeyNames();

        for (int i = 1; i <= version_names.Length - 1; i++)
        {
            string temp_name = "Microsoft .NET Framework " + version_names[i].ToString() + "  SP" + installed_versions.OpenSubKey(version_names[i]).GetValue("SP");
            display_framwork_name.Add(temp_name);
        }

        return display_framwork_name; 
```

所以我的输出是：“Microsoft .NET Framework v3.5 SP1”“Microsoft .NET Framework v3.0 SP2”等等......

# android - Android ant，如果不支持“条件”属性的错误

> ID：15924127
> 
> 赞同：0
> 
> 时间：2013-04-10T11:06:31.183
> 
> 标签：android, ant

我正在使用 Ant 为 Android 项目制作 APK 文件。当我在做 ant 调试时...我有以下错误..

**ANDROID_HOME/tools/ant/build.xml:427：如果不支持“条件”属性。**

build.xml 文件的第 427 行是**`<if condition="${project.is.test}">`**.

我不知道为什么会出现此错误。

如果有人遇到过这种情况，请给我任何解决此问题的线索。

提前致谢。

编辑：

找到解决方案...[尝试使用 ant 编译 android 应用程序时出现编译错误](https://stackoverflow.com/questions/4464461/compile-error-while-trying-to-compile-android-app-with-ant?rq=1)

需要再次制作 build.xml .. :)

# iphone - iPhone - 水平滚动只出现在主页上

> ID：15924128
> 
> 赞同：0
> 
> 时间：2013-04-10T11:06:36.797
> 
> 标签：iphone, css, html, frontend

我一生都无法弄清楚这一点。

我正在开发一个非常简单的网站，当在 iPhone 上查看主页（仅限主页）时，有一个奇怪的水平滚动。

在其他页面上，这不会发生。

我已经通过萤火虫查看是否有任何东西比其他任何地方都愚蠢地宽……但事实并非如此。即使删除页眉和页脚等整个部分也没有什么区别。只有在删除主页上的*所有内容后，iPhone 才不会水平滚动。*

**有问题的网站：http:** [//bit.ly/YctLKP](http://bit.ly/YctLKP)

似乎主页比任何其他页面都“放大”了一些。那里有什么事情吗？如果是这样，为什么会发生这种情况？

我已经检查了桌面浏览器是否有任何迹象表明宽度存在差异......而且我根本看不出有任何问题。似乎只有在 iPhone 和主页上才会这样做。

我会很感激一些帮助。

我知道该网站本身不是“移动友好型”......但我希望这个特殊问题不会发生。

非常感谢，米奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:13:52.397

我认为问题在于您有固定宽度的元素，例如。990px​​ 宽度声明。

首先，尝试`<meta name="viewport" content="width=device-width" />`在您的头部内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:51:17.913

好的，几个小时后......我仍然无法弄清楚这一点。

**最后我不得不使用：**

```
<meta name="viewport" content="width=1030" /> 
```

1030 像素是该特定设计将/应该使用的最宽像素。

这似乎至少消除了水平滚动。至于为什么会发生这种情况，而且只发生在一个特定的页面上……我不知道。

希望这可以帮助某人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-05T13:56:12.020

您的标题已在 CSS 中固定为 990px​​。

此外，正如之前的评论所建议的，您必须更正视口以匹配设备宽度。

Safari 提供了很好的响应式设计工具供您使用。在 mac os x 上，从开发菜单打开响应式设计视图或按 alt-command-R。然后，您可以从移动浏览器的角度查看您的网页，并通过右键单击您可以检查网页的问题部分。

# vim - 在启用 vim 和自动格式化的情况下插入时奇怪的光标移动

> ID：15924129
> 
> 赞同：2
> 
> 时间：2013-04-10T11:06:37.093
> 
> 标签：vim, latex-suite

我正在使用 vim 和 latex-suite 来编辑 LaTeX 文档。我最近在我的格式选项中添加了“a”，因为我一直对我的段落感到恼火，`gwap`并注意到一些非常奇怪的行为。在 LaTeX 文件的某些行上（据我所知，它只是 LaTeX 文件），每个插入的字符都会产生两个向右移动。因此，如果该行包含：

```
abcdef 
```

我在“a”之前插入文本“123”，产生的行是：

```
a1bc2de3f 
```

所以这是插入角色*之前的一个正确动作，然后是一个之后的动作。*现在，据我所知，发生这种情况的行是：

1.  缩进
2.  从前一行包装。

自动格式化和我设置的其他各种东西之间肯定会发生一些奇怪的交互，但我无法准确地弄清楚它们是什么。首先，问题似乎不会发生在非 L​​aTeX 文件中，所以我怀疑 latex-suite 与它有关。其次，我正在使用`copyindent`，虽然这个问题仍然出现在带有 的乳胶文件中`nocopyindent`，但如果我打开一个新文件，启用 copyindent，创建一个换行并缩进它的行（因此第二行也缩进）例如：

```
 here is a super long line that we will pretend gets wrapped in my
    vim set-up 
```

然后在“vim”之前插入“123”，我得到：

```
 here is a super long line that we will pretend gets wrapped in my
v123im set-up 
```

也就是说，第二行没有缩进（错误地 - 执行 == 会重新缩进它），并且可能因此，文本已在我想要的位置右侧插入了一个字符。所以我的猜测是，乳胶文件中发生的事情是两个或多个格式化机制都试图用这条线做事，也许是先取消缩进然后再重新缩进，导致疯狂。

大概你会想看看[我的 vimrc](http://fishface.org.uk/static/stuff/.vimrc)并且想知道我正在使用 gvim 7.3 for windows，以及大约一年前的某个版本的 latex-suite（它似乎没有任何版本信息）

# spring - 在 Vaadin 中使用 REST Web 服务

> ID：15924130
> 
> 赞同：4
> 
> 时间：2013-04-10T11:06:37.533
> 
> 标签：spring, rest, vaadin

如何创建使用**Restful Web 服务**的 Vaadin 应用程序？

我的架构是：

```
.parent project
  .core-subProject (devlopped with spring )
  .ws-subProject (restful web service with jaxb annotation)
  .client-project (using vaadin) 
```

谢谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:04:59.667

Vaadin 是一个服务器端框架，因此这里没有什么特别之处，您可以像在任何其他 Java 应用程序中一样使用它。

例如，请参阅这个问题[如何在 Java 中使用 REST](https://stackoverflow.com/questions/12916169/how-to-consume-rest-in-java)或这个[Vaadin 论坛帖子](https://vaadin.com/forum#!/thread/79389)。

基本上，您需要创建一个 RESTful URI，打开一个流并解析它。如果输出是 XML，则可能带有[XStream](http://xstream.codehaus.org/)之类的东西。

# javascript - ASP.Net MVC Razor 引擎：让 javascript 函数知道用户是否输入了无效数据

> ID：15924133
> 
> 赞同：0
> 
> 时间：2013-04-10T11:06:48.610
> 
> 标签：javascript, asp.net-mvc, razor

我有一个视图，我想在用户发布到服务器之前使用基于用户输入的 javascript 生成一个实时图表，以便他可以更清楚地可视化他正在输入的数据。但是，我需要忽略任何包含无效数据的单元格。

我正在寻找可以包含在使用现有 ASP.Net MVC 客户端验证的 javascript 函数中的检查。

我在[这里](https://stackoverflow.com/questions/8599639/how-can-i-check-if-my-model-is-valid-from-inside-the-razor-view)读到：

```
if(!ViewData.ModelState.IsValid) {// Do something... 
```

应该可以工作，但我收到以下 JS 运行时错误：

```
'ViewData' is undefined 
```

提前致谢

乔波

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:08:34.427

您甚至无法在加载页面之前检查表单是否有效（没有 C# 脚本发送到客户端，它在服务器端执行）。因此，您应该使用 javascript 在客户端验证表单。例如，使用 jquery 验证它是这样完成的：

```
var form = $('form');
if(!form.valid()){
    // Do something...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:20:10.463

在 javascript 中使用 ViewData 时尝试放置 @ 符号。像这样的东西：

```
if (@ViewData.ModelState.IsValid == false) {//Do something... 
```

它可能会有所帮助。

# asp.net - 我们如何防止中继器中的标签被覆盖？

> ID：15924134
> 
> 赞同：0
> 
> 时间：2013-04-10T11:06:49.590
> 
> 标签：asp.net

我使用转发器控件来显示在 ItemDataBound 事件期间绑定了三个项目的数据，代码的问题是最后一条记录显示在转发器的所有行中，覆盖了已经存在的值，我该如何停止呢？我使用这样的代码

## *.aspx.cs 代码*

```
DataSet dsJobCardHistory =new DataSet();
double dcPriceIncl;
double dcPriceExcl; 
double dcTax;

protected void Job_History()
{ 
   dsJobCardHistory = objReportManager.Get_JobCard_History(strCustNo, strTranId);
}

protected void repJobCard_ItemDataBound(object sender, RepeaterItemEventArgs e)
{

  for (int i = 0; i < dsJobCardHistory.Tables[0].Rows.Count;i++)

   {
     dcPriceIncl = Convert.ToDouble(dsJobCardHistory.Tables[0].Rows[i][6].ToString());
     dcTax = dcPriceIncl * 0.14;
     dcPriceExcl = dcPriceIncl - dcTax;

      if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType==
                                ListItemType.AlternatingItem)
       {
            ((Label)e.Item.FindControl("lblRepPrice")).Text = 
             Convert.ToString(dcPriceExcl);
            ((Label)e.Item.FindControl("lblRepTax")).Text = 
             Convert.ToString(dcTax);
            ((Label)e.Item.FindControl("lblRepTotal")).Text = 
              Convert.ToString(dcPriceIncl);
       }                
    }

} 
```

## **.aspx 代码**

```
<asp:Repeater ID="repJobCard" runat="server" onitemdatabound="repJobCard_ItemDataBound">
     <td align="center" width="15%">                                   
          <font style="font-size:14px">
               <strong>
                   <asp:Label ID="lblRepPrice" runat="server" Text="">
                   </asp:Label>
               </strong>
          </font>
    </td>
    <td align="center" width="15%">                                   
        <font style="font-size:14px">
            <strong>
               <asp:Label ID="lblRepTax" runat="server" Text="">
               </asp:Label>
            </strong>
        </font>
    </td>
    <td align="center" width="15%">                                   
        <font style="font-size:14px">
              <strong>
                  <asp:Label ID="lblRepTotal" runat="server" Text="">
                  </asp:Label>
              </strong>
        </font>
   </td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:43:04.447

尝试这样的事情

```
protected void Job_History()
{ 
   dsJobCardHistory = objReportManager.Get_JobCard_History(strCustNo, strTranId);
   repJobCard.DataSource = dsJobCardHistory ;
   repJobCard.DataBind();
}

protected void repJobCard_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    string price = DataBinder.Eval(e.Item.DataItem, "dcPriceExcl").ToString(); // dcPriceExcl -- or whatever the column names are for your data.
    string tax = DataBinder.Eval(e.Item.DataItem, "dcTax").ToString();
    string total = DataBinder.Eval(e.Item.DataItem, "dcPriceIncl").ToString();

    Label lblRepPrice = e.Item.FindControl("lblRepPrice") as Label;
    Label lblRepTax = e.Item.FindControl("lblRepTax") as Label;
    Label dcPriceIncl = e.Item.FindControl("dcPriceIncl") as Label;

    lblRepPrice.Text = price;
    lblRepTax.Text = tax;
    dcPriceIncl.Text = total;
} 
```

和

```
<asp:Repeater ID="repJobCard" runat="server" onitemdatabound="repJobCard_ItemDataBound">
    <ItemTemplate>
        All of your HTML
    </ItemTemplate>
 </asp:Repeater> 
```

# java - 由于使用保留字作为列名，实体管理器提交日期类型错误

> ID：15924135
> 
> 赞同：1
> 
> 时间：2013-04-10T11:06:52.133
> 
> 标签：java, database, eclipselink, derby

我将 eclipseLink 与 derby DB 一起使用，当我使用 commit( `entityManager.getTransaction().commit();`) 时遇到以下错误，该字段**是**在日期为 java util 的实体中定义的。这里有什么问题？

输入数据的代码是：

```
Date date = new Date();
SimpleDateFormat parsedDate = new SimpleDateFormat("yyyy-mm-dd");
date = parsedDate.parse((String) memberValue); 
```

成员值包含具有以下值的日期

```
"from": "2012-12-03"
"to": "2012-12-03" 
```

实体如下

```
@Entity
@Table(name = "f1_LeaveRequest")
public class LeaveRequest {

    @Id
    @Column(name = "leaverequest_id")
    private String id;
    private String type;
    @Temporal(TemporalType.TIMESTAMP)
    private java.util.Date from;
    @Temporal(TemporalType.TIMESTAMP) 
```

错误是：

```
Exception in thread "main" javax.persistence.RollbackException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLSyntaxErrorException: Syntax error: Encountered "FROM" at line 1, column 47.
Error Code: 20000
Call: INSERT INTO f1_LeaveRequest (leaverequest_id, FROM, LENGTH, STATE, TO, TYPE) VALUES (?, ?, ?, ?, ?, ?)
    bind => [6 parameters bound] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:13:34.527

您可以使用注释标记字段`@Column`并为其提供不同的名称。

```
@Column(name ="from_timestamp")
@Temporal(TemporalType.TIMESTAMP)
private Date from; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:08:43.690

我想那是因为`FROM`是 SQL 中的保留关键字。尝试将您的字段重命名为`fromDate`or `fromTimestamp`or any，看看问题是否以这种方式解决。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T11:18:26.077

`FROM`是保留关键字。使用有意义的东西，例如`fromTime`.

# unit-testing - 用 Jasmine 测试 AngularJS 工厂函数

> ID：15924136
> 
> 赞同：15
> 
> 时间：2013-04-10T11:06:57.627
> 
> 标签：unit-testing, angularjs, jasmine, factory

我对此很陌生（angularjs，jasmine，testacular）并且我有这段代码（我简化了一点，只留下重要的部分）：

```
//my_module.js
angular.module('my_module', ['my_data'])
.config([...]);

.controller('my_controller', ['$scope', 'my_data',
    function($scope, my_data) {
        $scope.my_function = function() {
            return my_data.my_factory.save().then(function () {
                console.log('saved');
            },
            function() {                             
                console.log('Error');
            }); 
        }
    }
)

//my_data.js
angular.module('my_data', [])
.factory('my_factory', ['$q', '$rootScope',
    function($q, $rootScope) {
        var my_factory= function(my_data) {
            angular.extend(this, my_data);
        }
        my_factory.prototype.save = function() {
            var deferred = $q.defer();
            setTimeout(function() {
                deferred.resolve();
            $rootScope.$apply();
            }, 1000);

            return deferred.promise;
        }
        return my_factory;
    }
]) 
```

所以，我想做的是测试 my_data.my_factory.save 在 my_module.my_controller.my_function 被触发时是否被调用。

```
//my_test.js
describe('testing my_controller.my_function', function () {
    beforeEach(module('my_module'));

    var $rootScope, $controller;
    beforeEach(inject(function(_$rootScope_, _$controller_) {
        $rootScope = _$rootScope_;
        $controller = _$controller_;
    }));

    scope = $rootScope.$new();

    it('should call the save function', function() {
        scope.my_function();
        expect(my_data.save).toHaveBeenCalled();
    });
} 
```

我需要一点帮助。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-10T12:50:31.013

你离你需要的并不远。首先，正如您需要`my_data`的`my_module`依赖项，您不需要注入 `my_module`控制器，只需注入工厂（`my_factory`）；

其次，你想利用[ngMock](http://docs.angularjs.org/guide/dev_guide.unit-testing)。文档不是很完整，但给出了很好的见解。更多[here](http://docs.angularjs.org/api/angular.mock.inject)和一个[示例here](https://github.com/mhevery/foodme)（查找`test/unit/controllers`）。

基本上，您要做的是模拟该服务，以便确保它已被调用。要实现它，请注入`$provide`您的`angular.mock.module`调用并提供模拟`my_factory`服务。实现它的最佳方法是这样的：

```
describe('testing my_controller.my_function', function () {
  var mockedFactory, $rootScope, $controller;

  beforeEach(module('my_module', function($provide) {
    mockedFactory = {
      save: jasmine.createSpy()
    };

    $provide.value('my_factory', mockedFactory);
  }));

  beforeEach(inject(function(_$rootScope_, _$controller_) {
    $rootScope = _$rootScope_;
    $controller = _$controller_;
  }));

  scope = $rootScope.$new();

  it('should call the save function', function() {
    scope.my_function();
    expect(mockedFactory.save).toHaveBeenCalled();
  });
} 
```

这样你就可以覆盖`my_factory`依赖。

# php - 空查询验证的更好实践

> ID：15924137
> 
> 赞同：0
> 
> 时间：2013-04-10T11:07:04.483
> 
> 标签：php, mysql

在 MySQL 中查询后，为了避免`Warning: mysql_fetch_assoc() expects parameter 1 to be resource, boolean given`错误，我做了以下检查：

```
if($result != null){
    while($row = mysql_fetch_assoc($result)){
         //Do awesome things        
    }
} 
```

如果结果为空，我不想做任何事情，因此不需要 if()。我确信有可能以更好的方式进行检查。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:11:26.283

> 如果结果为空，我不想做任何事情

您已经在代码中涵盖*了该*部分（部分：“如果结果为空”）。

但是，如果没有结果可取（非结果），则不涵盖该部分。您需要检查`TRUE`/ `FALSE`：

```
if ($result) {
   # there was a database result - empty or not
} else {
   # there was no database-result to fetch from.
} 
```

顺便说一句，这是一个常见问题，因此在处理前一个函数的返回值时要小心。许多函数和库都存在返回不止一种类型的问题，因此在继续之前检查返回类型很重要。

# jenkins - Puppet 3 文件递归非常慢

> ID：15924138
> 
> 赞同：5
> 
> 时间：2013-04-10T11:07:05.920
> 
> 标签：jenkins, puppet

我在 Amazon Linux 2012.09 上使用 Puppet 3，我的清单之一设置并重新配置了一些目录。其中一项任务是将文件夹所有者和组 recursivelt 更改为另一个用户 - 但是，这需要 60 秒才能完成，并且目录中几乎没有任何内容 - 终端中的 chown myuser:myuser /var/lib/jenkins不到一秒钟。

我的问题是：有没有更好/更快的方法在 Puppet 中递归更改目录所有权？

谢谢

```
 file {'/var/lib/jenkins':
   ensure  => 'directory',
   owner   => myuser,
   group   => myuser,
   recurse => true,
   require => Package['jenkins'],
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T00:15:26.317

我也看到了这种缓慢，这似乎是由于 Puppet`/var/lib/jenkins`单独检查每个文件以确保它具有正确的所有者权限，这需要时间，因为`$JENKINS_HOME`.

我在我们的 Jenkins 服务器上解决了这个问题，只要顶层目录不属于所需的用户，而是运行一个简单的`chown -R`命令（带）：`exec`

```
define modify_owner() {
  exec { "modify_owner_${title}" :
    command => "/bin/chown -R ${user}:${user} '${title}'",
    onlyif => "/usr/bin/stat -c %U '${title}' | grep '^${default_user}$'"
  }
}

modify_owner { ['/var/lib/jenkins', '/var/log/jenkins', '/var/cache/jenkins']: } 
```

`$user`/是我*希望*这些目录拥有`$user`的所有者/组组合。这使我的 Puppet 时间恢复到正常水平。

 *（**注意**：我使用过`stat -c %U`，但您可能需要根据您的操作系统调整确切的格式选项。此命令打印所有者的文本名称并在 Linux 上为我工作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-25T23:33:52.483

@stuart-m 的解决方法是正确的基本结构。如果您需要深入，请使用 find 和 xargs。我没有幸运地拥有他的还原用例！

请注意，Puppet 的缓慢*不仅仅是*因为它必须检查的文件数量。这是 Puppet 在某些任务上的速度非常慢。

我在 wordpress 目录树（Debian 10）上对此进行了测试。

```
# time find /var/www/*/wordpress/wp-content/ -type f | wc -l
50661

real    0m0.148s
user    0m0.048s
sys     0m0.107s 
```

所以那里有五万个文件——这需要大约七分之一秒才能确定。现在我们检查实际的文件所有权属性：

```
# time find /var/www/*/wordpress/wp-content/ -not -group www-data | wc -l
38603

real    0m0.236s
user    0m0.056s
sys     0m0.188s 
```

更深入一点——这花了大约四分之一秒。

让我们全部更改：

```
time find /var/www/*/wordpress/wp-content/ -type f -exec chmod 0640 {} \; 

real    0m44.392s
user    0m29.520s
sys     0m14.729s

# time find /var/www/*/wordpress/wp-content/ -type d -exec chmod 2750 {} \; 

real    0m4.935s
user    0m3.288s
sys     0m1.666s 
```

好的，五十秒。其中有多少是 shell 调用？

```
# time bash -c "find /var/www/*/wordpress/wp-content/ -type f -print0 | xargs -0 chmod 0640"

real    0m0.452s
user    0m0.148s
sys     0m0.513s

# time bash -c "find /var/www/*/wordpress/wp-content/ -type d -print0 |xargs -0 chmod 2750 "

real    0m0.149s
user    0m0.024s
sys     0m0.158s 
```

好，天哪，几乎所有的都是贝壳叉子——实际上只花了大约一秒钟。

我在这里结束是因为`directory : recurse=>true`在同一棵树上的 a 大约需要 800 秒。这对于 shell 命令可以在一两秒内完成的事情来说太慢了。

我不喜欢浪费 I/O，但考虑到这方面的时间安排，如果你的文件系统是本地的（这只是一台 7 美元/月的主机，带有 spin-rust 驱动器），你可能有能力执行 find/xargs /ch[own/mod] 每次运行。

编辑：我编写了一个 puppet 函数来“完成它”，它在 2 秒内运行 18 个单独的实例，涵盖 50,000 个文件。让 Puppet 处理它的速度大约提高了 400 倍。第一部分，定义类型：

```
define my_class::permissions_tree (
                                    String $owner = 'root',
                                    String $group = 'root',
                                    String $fmode = '0644',
                                    String $dmode = '0755',
                                   ) {

  $path = $title

  case $os_family {
    'Debian' : {
      $find  = '/usr/bin/find'
      $xargs = '/usr/bin/xargs'
      $chmod = '/bin/chmod'
      $chown = '/bin/chown'
    }
  }

  $permissions_command_owner = "${find} $path \( -not -user ${owner} -or -not -group ${group} \) -print0 | $xargs -0 --replace=found $chown ${owner}:${group} found"
  $permissions_command_dirs  = "${find} $path \( -type d -and -not -perm ${dmode} \) -print0 | $xargs -0 --replace=found $chmod ${dmode} found"
  $permissions_command_files = "${find} $path \( -type f -and -not -perm ${fmode} \) -print0 | $xargs -0 --replace=found $chmod ${fmode} found"
  $permissions_command = join([$permissions_command_owner,$permissions_command_dirs,$permissions_command_files], ";")

  exec { "permissions_tree_${path}" :
    path     => [ '/sbin', '/bin', '/usr/sbin', '/usr/bin' ],
    command  => $permissions_command,
    provider => shell,
  }

} # permissions_tree 
```

第 2 部分，使用它，例如：

```
 my_class::permissions_tree { "$some_dir/subdir" :
    owner   => $my_owner,
    group   => $my_group,
    dmode   => '2750', 
    fmode   => '0640',
    require => File[$some_dir],
  } 
```

require 只是一个元参数，在那里使用你需要的任何东西。如果不是 Debian，请添加您的操作系统路径。

编辑 2：添加了 print0 布尔值所需的括号*

# bash - 在 bash 上对文件进行排序

> ID：15924141
> 
> 赞同：0
> 
> 时间：2013-04-10T11:07:11.940
> 
> 标签：bash, unix, sorting, cut

我有一堆文件，想根据文件名中表示的日期对它们进行排序，如“2013-03-29_13-56-30”。我正在使用`bash`.

```
myapplication-1.0-SNAPSHOT-V2013-03-29_13-56-30.jar
myapplication-1.0-SNAPSHOT-V2013-12-03_17-01-51.jar
myapplication-1.0-SNAPSHOT-V2013-04-04_13-49-58.jar
myapplication-1.0-SNAPSHOT-V2013-04-04_14-25-51.jar
myapplication-1.0-SNAPSHOT-V2013-04-05_10-06-33.jar
myapplication-1.0-SNAPSHOT-V2013-04-05_13-49-49.jar
myapplication-1.0-SNAPSHOT-V2013-08-09_17-48-54.jar
myapplication-1.0-SNAPSHOT-V2013-11-10_09-46-33.jar 
```

谢谢

* * *

我不确定，但`sort -n`似乎足够了，因为我所有文件中的前缀都相同。这个对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:20:02.150

如果您已经在文件中有文件名，并且它们是无序的，那么`sort`在 fedorqui 的答案中使用 as 就可以了。但是，如果您在文件系统上有文件，那么您用来枚举它们的任何工具都会为您排序：

```
$ echo *
myapplication-1.0-SNAPSHOT-V2013-03-29_13-56-30.jar myapplication-1.0-SNAPSHOT-V2013-04-04_13-49-58.jar myapplication-1.0-SNAPSHOT-V2013-04-04_14-25-51.jar myapplication-1.0-SNAPSHOT-V2013-04-05_10-06-33.jar myapplication-1.0-SNAPSHOT-V2013-04-05_13-49-49.jar myapplication-1.0-SNAPSHOT-V2013-08-09_17-48-54.jar myapplication-1.0-SNAPSHOT-V2013-11-10_09-46-33.jar myapplication-1.0-SNAPSHOT-V2013-12-03_17-01-51.jar
$ ls
myapplication-1.0-SNAPSHOT-V2013-03-29_13-56-30.jar
myapplication-1.0-SNAPSHOT-V2013-04-04_13-49-58.jar
myapplication-1.0-SNAPSHOT-V2013-04-04_14-25-51.jar
myapplication-1.0-SNAPSHOT-V2013-04-05_10-06-33.jar
myapplication-1.0-SNAPSHOT-V2013-04-05_13-49-49.jar
myapplication-1.0-SNAPSHOT-V2013-08-09_17-48-54.jar
myapplication-1.0-SNAPSHOT-V2013-11-10_09-46-33.jar
myapplication-1.0-SNAPSHOT-V2013-12-03_17-01-51.jar 
```

现在，可以影响这一点的一件事是`LC_COLLATE`环境变量。如果您不确定，请将其设置为`C`.

# android - 从其他片段更新 Listview

> ID：15924146
> 
> 赞同：2
> 
> 时间：2013-04-10T11:07:30.580
> 
> 标签：android, listview, fragment

我正在使用[Manishkpr](http://manishkpr.webheavens.com/android-viewpager-example/)上的教程创建一个应用程序，您可以在其中滑动 1）layoutOne：在这里创建一个文件和 2）layoutTwo：显示某个文件夹中所有创建文件的列表视图。

问题：如果您创建一个文件，它不会立即显示在列表视图中。我发现我应该在我的 LayoutOne.java 中使用这段代码：

```
 LayoutTwo fragment = (LayoutTwo) getFragmentManager().findFragmentByTag("TESTTWO");
            fragment.getAdapter().notifyDataSetChanged(); 
```

在 LayoutTwo.java 我添加了：

```
private static final String TAG = "TESTTWO";

//and the function getAdapter:

public CustomArrayAdapter getAdapter() {

        return adapter;
    } 
```

但是，我在`fragment.getAdapter().notifyDataSetChanged();`. 我该如何解决这个问题，这实际上是最好的方法吗？

**编辑**

```
myList = new ArrayList<RecordedFile>();

        File directory = Environment.getExternalStorageDirectory();
        file = new File(directory + "/test/");

        File list[] = file.listFiles();

        for (int i = 0; i < list.length; i++) {
            if (checkExtension(list[i].getName()) == true) {

                RecordedFile q = new RecordedFile();
                q.setTitle(list[i].getName());
                q.setFileSize(readableFileSize(list[i].length()));

                myList.add(q);
            }
        }

        adapter = new CustomArrayAdapter(myContext,
                R.layout.listview_item_row, myList);
        listView.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T17:44:07.457

> 我正在使用 Manishkpr 上的教程创建一个应用程序，您可以在其中滑动 1）layoutOne：在这里创建一个文件和 2）layoutTwo：显示某个文件夹中所有创建文件的列表视图。
> 
> 问题：如果您创建一个文件，它不会立即显示在列表视图中。

如果您只有两个布局可以滑动，这意味着两者都将在内存中拥有它们的视图并且可以访问。然后，您可以为 分配一个 id `ListView`，当需要刷新数据时，只需`ListView`在 中查找`Activity`它，获取它的适配器并更新它，如下所示：

```
ListView list = (ListView) getActivity().findViewById(R.id.theIdOfTheList);
((BaseAdapter)list.getAdapter()).notifyDataSetChanged(); 
```

无论您是否调用`notifyDataSetChanged()`适配器，ListView 都不会更新，因为它看不到新文件，从它的角度来看，数据集是完整的。根据您的适配器的外观，您有两种选择：

重建 的数据`ListView`，基本上重做第一次构建时所做的事情`ListView`：检查该目录并重新列出所有文件。

```
// create the new file
File directory = Environment.getExternalStorageDirectory();
file = new File(directory + "/test/");
File list[] = file.listFiles();
ListView list = (ListView) getActivity().findViewById(R.id.theIdOfTheList);
// I'm assuming your adapter extends ArrayAdapter(?!?)
CustomArrayAdapter caa = (CustomArrayAdapter) list.getAdapter();
caa.clear();
for (int i = 0; i < list.length; i++) {
     if (checkExtension(list[i].getName())) {
         RecordedFile q = new RecordedFile();
         q.setTitle(list[i].getName());
         q.setFileSize(readableFileSize(list[i].length()));
         caa.add(q);
     }
} 
```

或者您可以为新创建的文件手动创建一个`RecordFile`对象并将其添加到现有适配器：

```
ListView list = (ListView) getActivity().findViewById(R.id.theIdOfTheList);
(CustomArrayAdapter) caa = (CustomArrayAdapter) list.getAdapter();
File newFile = new File("directory" + "/test/theNewFileName.extension");
RecordFile rf = new RecordFile();
rf.setTitle(newFile.getName());
rf.setFileSize(readableFileSize(newFile.length()));
// have a method to return a reference of the data list(or a method
// to add the data directly in the adapter)
List<RecordFile> data = caa.getListData();
data.add(rf);
caa.notifyDataSetChanged(); 
```

我不知道你的适配器是什么样子的，所以试试我说的，如果它不起作用，请发布适配器的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:32:35.210

我认为这是因为 viewpager 加载了 layoutTwo，但是您没有使用 notifyDataSetChanged 刷新它。你只刷新了 LayoutTwo 的数据，但它并没有被刷新，因为 viewpager 有一个方法： `pager.setOffscreenPageLimit(1);`AFAIK 这是默认的，所以接下来的事情会在行中发生：加载 LayoutOne，加载 LayoutTwo，在 layoutOne 中做事情，做layoutTwo 中的东西。但正如您所见，之后将没有加载 layoutTwo。

我遇到了一个非常相似的问题，这是一种解决方法，但是重新启动了活动（和`pager.removeAllViews();`）并且它运行良好而不会打扰用户。

但要确定这会导致问题，请将其放入按钮点击侦听器的代码中：

```
viewPager.removeAllViews();
finish();
startActivity(new Intent(MyActivity.this, MyActivity.class)); 
```

这不会完全解决您的问题，但您将能够查看 layoutTwo 是否发生变化，从而找到问题的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T23:16:45.773

前段时间在一个项目中遇到了几乎相同的问题。

解决方案是将观察者模式添加到应用程序中。

查看有关该问题的官方文档：

[http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

发生的情况是您将不同`Fragments`的内容注册`Activity`到拥有`Fragments`. 每当一个人`Fragment`发生变化时，你就会`callback`对你的`Activity`人做一个，然后你会采取行动并将一些东西传递`message`给另一个人`Fragments`。

然后，您可以获得例如`ListView`特定的`Fragment`并更新它或您想做的任何事情。

它非常简单而强大;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-27T03:05:44.137

嗨，也许有点晚了，但我一直在努力做到这一点，这就是我设法做到的方式。

这绝对不是最好的方法，但它确实有效。

在开始时初始化您的片段，以便我们可以保存它们的每个实例，然后选择是否要实例化它们。

```
ExampleFragment searchFragment = null;
ExampleFragment fileListFragment = null; 
```

现在将其更改`FragmentStatePagerAdapter`为以下内容，以便我们使用之前初始化的片段

```
ExampleFragment searchFragment = null;
ExampleFragment fileListFragment = null; 
```

现在`PagerAdapter`上课：

```
class pagerAdapter extends FragmentStatePagerAdapter
{

    public pagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        // getItem is called to instantiate the fragment for the given page.
        // Return a PlaceholderFragment (defined as a static inner class
        // below).
        switch (position) {
        case 0:
            if (searchFragment != null) {
                return searchFragment;
            }
            return searchFragment = new ExampleFragment();
        case 1:
            if (downFragment != null) {
                return downFragment;
            }
            return downFragment = new ExampleFragment();
        }
        return null;
    }

    @Override
    public int getCount() {
        return 2;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        Locale l = Locale.getDefault();
        switch (position) {
        case 0:
            return getString(R.string.title_section1).toUpperCase(l);
        case 1:
            return getString(R.string.title_section2).toUpperCase(l);
        }
        return null;
    }

} 
```

`Main Activity`通过这种方式，我们可以调用每个片段内部的方法，并从没有任何视图或上下文问题的情况下与它们进行通信。

然后在`onTabSelected`操作栏的方法或您刚刚重置的任何其他`"onChangeTab"`类似方法上，从片段中调用您想要的方法。

```
@Override
public void onTabSelected(ActionBar.Tab tab,
        FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, switch to the corresponding page in
    // the ViewPager.
    if ((tab.getPosition()) == 1) {
        downFragment.yourMethod();
    }
    mViewPager.setCurrentItem(tab.getPosition());
} 
```

它并不优雅，但它就像一种魅力。

# java - 在java中替换JButton

> ID：15924149
> 
> 赞同：0
> 
> 时间：2013-04-10T11:07:36.860
> 
> 标签：java, swing, jbutton, jradiobutton

我不确定如何在单击`JButton`a`JRadioButton`时将 a 替换为 a `JButton`。假设我将 Jpanel 设置为布局 4 行（3 个 JLabels 和一个 JButton）的网格布局。因此，当用户单击 时`JButton`，该 JButton 将被替换为`JRadioButton`.

`CardLayout`我会为此目的使用 a ，还是有一种简单的方法来替换它`JButton`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T11:49:59.810

您可以做的是从面板中删除按钮并在其位置添加一个单选按钮

示例代码

```
 static JButton button1 = new JButton("Test");
  static JPanel panel1 = new JPanel():
  public static void main(String[] args{
  panel1.add(button1);
  }
  public void ActionListener(ActionEvent e){
  if(e.equals("Test"){
  panel1.remove(button1);
  panel1.add(radiobutton1);
  } 
```

从这里您可以添加您的单选按钮

# python - Arcpy：字典语法错误“无法分配给函数调用”

> ID：15924150
> 
> 赞同：3
> 
> 时间：2013-04-10T11:07:39.607
> 
> 标签：python, arcpy

我正在尝试使用以下代码找到“CrudeRate”的最大值及其关联的“State_name”：

```
import arcpy
arcpy.env.workspace = "C:\\"

shp = r"C:\\USCancer2000.dbf"
rows = arcpy.SearchCursor(shp)
CrudeRate= "CrudeRate"
State_name= "State_name"

out_dict = {}
for row in rows:
    for C in CrudeRate:
        lst = []
        if row.CrudeRate == C:
            lst.append(row.CrudeRate)
        out_dict(C) = max(lst)
del row,rows
for CrudeRate in out_dict:
    print CrudeRate, State_name 
```

但是当我运行它时，我得到：

> 语法错误：无法分配函数调用

有没有人看到问题以及如何解决它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T11:59:06.133

分配 dict 值时，您需要使用括号而不是括号。

```
out_dict[C] = max(lst) 
```

# sql - 错误：无法创建约束 SQL Server 2008

> ID：15924153
> 
> 赞同：2
> 
> 时间：2013-04-10T11:07:43.050
> 
> 标签：sql, sql-server-2008

我正在创建 6 个表。创建前 3 个表时，一切正常。但是，当我必须使用之前在创建另一个表时使用的外键时，系统会出现错误。

这些是前 3 个表：

```
CREATE TABLE Employee (
  EmployeeID INTEGER PRIMARY KEY NOT NULL,
  Name TEXT NOT NULL,
  Position TEXT NOT NULL,
  Salary REAL NOT NULL,
  Remarks TEXT
);

CREATE TABLE Planet (
  PlanetID INTEGER PRIMARY KEY NOT NULL,
  Name TEXT NOT NULL,
  Coordinates REAL NOT NULL
);

CREATE TABLE Has_Clearance (
  Employee INTEGER NOT NULL
    CONSTRAINT fk_Employee_EmployeeID REFERENCES Employee(EmployeeID),
  Planet INTEGER NOT NULL
    CONSTRAINT fk_Planet_PlanetID REFERENCES Planet(PlanetID),
  Level INTEGER NOT NULL,
  PRIMARY KEY(Employee, Planet)
); 
```

然后我创建第四个表：

```
CREATE TABLE Shipment (
  ShipmentID INTEGER PRIMARY KEY NOT NULL,
  Date TEXT,
  Manager INTEGER NOT NULL
    CONSTRAINT fk_Employee_EmployeeID REFERENCES Employee(EmployeeID),
  Planet INTEGER NOT NULL
    CONSTRAINT fk_Planet_PlanetID REFERENCES Planet(PlanetID)
); 
```

我收到以下错误：“数据库中已经有一个名为 'fk_Employee_EmployeeID' 的对象。无法创建约束。”

请让我知道如何在第四张表中创建 FK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:29:15.173

约束“fk_Employee_EmployeeID”首先在表“Has_Clearance”上创建，然后您尝试创建另一个具有相同名称的约束 - 这是不允许的。只需像这样重命名第 4 个表中的约束：

```
CREATE TABLE Shipment ( 
ShipmentID INTEGER PRIMARY KEY NOT NULL, 
Date TEXT, 
Manager INTEGER NOT NULL CONSTRAINT fk_Maneger_EmployeeID REFERENCES Employee(EmployeeID), 
Planet INTEGER NOT NULL CONSTRAINT fk_Planet_PlanetID REFERENCES Planet(PlanetID)
); 
```

# jquery - 更改 iframe 中的输入值，父输入更改

> ID：15924156
> 
> 赞同：5
> 
> 时间：2013-04-10T11:07:56.060
> 
> 标签：jquery, iframe, onchange

我的网站中有一个包含 iframe 的页面，iframe 内有许多输入框。我想要做的是，当有人在 iframe 输入框中输入一个值时，该值然后被写入父页面的输入框中。

我在这里找到了其他一些答案，但我无法让它们满足我的需要，到目前为止我有类似的东西

HTML - 为父母

```
<form method="post" id="presentation-form" action=”action.php”&gt;
  <input type="text" id="edit-title" name="title">
    <iframe id="upload_frame" src="upload.html" ></iframe>
  <input type="submit" id="edit-submit" name="op" value="Save">
</form> 
```

HTML - 为孩子

```
<form name="formUpload" id="formUpload" etc..> 
  <input id=”mytitle” type="text" size="50" name="title" value=""> 
  <input type="submit" name="submit" value="Upload File">
</form> 
```

我想要的是，当我在子表单中更改“mytitle”的值时，它会更改父表单中的“edit-title”

到目前为止，我的 Jquery 是

```
$('#upload_frame').contents().find("#formUpload").delegate('input', 'change', function(e){ 
  //code goes here
}); 
```

我遇到的问题是，即使我尝试发出警报或从该脚本中记录某些内容，也没有发生任何事情，我没有收到任何 javascript 错误，但是当我执行任何操作时没有收到任何警报

（在有人问之前，这个子页面是我同一个域中的一个页面）

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T16:42:40.083

对于未来的人，这是我最终使用的解决方案，它似乎工作正常

```
$('iframe').load(function(){
     $('iframe').contents().find('input#mytitle').bind('change',function(e) {
        title_name = $(this).val();
        $('input#edit-title').val(title_name);
     });
}); 
```

# mysql - MYSQL全文搜索数字和字符被忽略？

> ID：15924157
> 
> 赞同：3
> 
> 时间：2013-04-10T11:07:56.640
> 
> 标签：mysql

我正在尝试进行全文搜索，我正在查询的数据库有很多 LCD 屏幕尺寸。例如 32"。我需要进行全文搜索，因为搜索短语可能很复杂，我们从 LIKE 比较开始，但它没有削减它。

这就是我们所拥有的。

```
SELECT stock_items.name AS si_name,
       stock_makes.name AS sm_name,
       stock_items.id AS si_id
FROM stock_items
LEFT JOIN stock_makes ON stock_items.make = stock_makes.id
WHERE MATCH (stock_items.name,
             stock_makes.name) AGAINST ('+32"' IN BOOLEAN MODE)
  AND stock_items.deleted != 1 
```

通过此搜索，我们得到 0 个结果。虽然 32" 在字段中多次出现。我们修改了 mysql 配置以允许我们搜索 3 个或更多字符（而不是默认的 4 个），并且像 +NEC 这样的搜索工作正常。

我的猜测是a）mysql中的全文搜索忽略“字符或数字。

不幸的是，我无法控制数据库数据，否则我会用其他东西替换双引号。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:25:53.777

MySQL在索引时忽略某些字符，“我认为是其中之一。有几种方法可以更改默认字符设置，如此[处所述](http://dev.mysql.com/doc/refman/5.0/en/fulltext-fine-tuning.html)

*   修改 MySQL 源代码：在 myisam/ftdefs.h 中，查看 true_word_char() 和 misc_word_char() 宏。将“-”添加到这些宏之一并重新编译 MySQL。

*   修改字符集文件：这不需要重新编译。true_word_char() 宏使用“字符类型”表来区分字母和数字与其他字符。. 您可以在其中一个字符集 XML 文件中编辑数组的内容，以指定“-”是一个“字母”。然后为您的 FULLTEXT 索引使用给定的字符集。

*   为索引列使用的字符集添加新的排序规则，并更改列以使用该排序规则。

我使用了第二种方法，这对我们有用。[提供的页面](http://dev.mysql.com/doc/refman/5.0/en/fulltext-fine-tuning.html)在页面末尾的评论中有一个详细的示例（John Navratil 评论）。

在任何情况下，您都需要在更改设置后重建索引： `REPAIR TABLE tbl_name QUICK;`

# r - geom_line 中的平滑颜色

> ID：15924159
> 
> 赞同：1
> 
> 时间：2013-04-10T11:07:59.830
> 
> 标签：r, colors, ggplot2

使用`ggplot2`，我想在我只有很少数据点的图中“平滑”地着色线。照原样，我尝试过的比例（例如`scale_color_gradient2`）似乎没有插入颜色，而是单色的颜色段。

代码示例：

```
ggplot(data.frame(x=1:5)) + geom_line(aes(x=x, y=x, color=x), size=3) + 
   scale_color_gradient2() 
```

![在此处输入图像描述](https://i.stack.imgur.com/yaX8p.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:24:33.907

您可以增加 1 到 5 之间的点数：

```
df <- data.frame(x=seq(1,5,0.001))

ggplot(df) + geom_line(aes(x=x, y=x, color=x), size=3) + 
   scale_color_gradient2() 
```

# c - cmd 命令 'dir' 使用什么设备？

> ID：15924163
> 
> 赞同：0
> 
> 时间：2013-04-10T11:08:11.740
> 
> 标签：c, windows, device-driver, dir, rootkit

对不起，不清楚的问题！

您可能知道，命令提示符命令“dir”列出了目录中的所有文件和目录。

我现在正在阅读*“颠覆 Windows 内核：Rootkits”*。

书中的一个代码示例隐藏了 TCP 连接。它使用挂钩。它使用的部分方法通过使用与其关联的设备对象获取指向**TCPIP.sys的指针，** **“netstat”**用于查询当前 TCP 连接的驱动程序。

基本上有一个函数 ，`IoGetDeviceObjectPointer()`它接受一个设备名称（对于 TCPIP.sys，该设备是`\\DEVICE\\TCP`）并返回一个指向设备驱动程序的指针，在该示例中为 TCPIP.sys。

我想知道是否有人知道“ `dir`”命令是否使用设备驱动程序，如果是，设备名称是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:26:26.350

不，dir 命令不使用设备驱动程序。Dir commad 依赖于 FindFirstFile/FindNextFile API 函数，它在内部调用 Ntdll.dll 内核函数。如果我没记错的话 hookingNt/ZwQueryInformationFile 隐藏文件。

# wpf - WPF xaml 轨道动画不保持路径

> ID：15924165
> 
> 赞同：0
> 
> 时间：2013-04-10T11:08:19.270
> 
> 标签：wpf, xaml, animation

我正在尝试创建三个路径（轨道路径）并让三个椭圆（行星、环）沿着它们行进，我关注了一些不同的博客和论坛帖子，但我不明白为什么椭圆不在路径上行进。

这是xaml：

```
<Window     
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
ResizeMode="NoResize"
Title="Window2" Width="800" Height="600">
<Window.Resources>
    <PathGeometry x:Key="smallGeo" Figures="M 400,250C 427.614,250 450,272.386 450,300C 450,327.614 427.614,350 400,350C 372.386,350 350,327.614 350,300C 350,272.386 372.386,250 400,250"/>
    <PathGeometry x:Key="mediumGeo" Figures="M 400,245C 430.376,245 455,269.624 455,300C 455,330.376 430.376,355 400,355C 369.624,355 345,330.376 345,300C 345,269.624 369.624,245 400,245"/>
    <PathGeometry x:Key="largeGeo" Figures="M 400,240C 433.137,240 460,266.863 460,300C 460,333.137 433.137,360 400,360C 366.863,360 340,333.137 340,300C 340,266.863 366.863,240 400,240"/>
</Window.Resources>
<Grid Width="800" Height="600" HorizontalAlignment="Center" VerticalAlignment="Center">
    <Canvas>
        <Canvas.Triggers>
            <EventTrigger RoutedEvent="Canvas.Loaded">
                <BeginStoryboard>
                    <Storyboard>
                        <!-- Small orbit animation -->
                        <DoubleAnimationUsingPath 
                        Storyboard.TargetName="smallEllipse" 
                        Storyboard.TargetProperty="(Canvas.Left)" 
                        PathGeometry="{StaticResource smallGeo}" 
                        Duration="0:0:5" 
                        RepeatBehavior="Forever" 
                        Source="X"/>
                        <DoubleAnimationUsingPath 
                        Storyboard.TargetName="smallEllipse" 
                        Storyboard.TargetProperty="(Canvas.Top)" 
                        PathGeometry="{StaticResource smallGeo}" 
                        Duration="0:0:5" 
                        RepeatBehavior="Forever" 
                        Source="Y"/>
                        <!-- Medium orbit animation -->
                        <DoubleAnimationUsingPath 
                        Storyboard.TargetName="mediumEllipse" 
                        Storyboard.TargetProperty="(Canvas.Left)" 
                        PathGeometry="{StaticResource mediumGeo}" 
                        Duration="0:0:5" 
                        RepeatBehavior="Forever" 
                        Source="X"/>
                        <DoubleAnimationUsingPath 
                        Storyboard.TargetName="mediumEllipse" 
                        Storyboard.TargetProperty="(Canvas.Top)" 
                        PathGeometry="{StaticResource mediumGeo}" 
                        Duration="0:0:5" 
                        RepeatBehavior="Forever" 
                        Source="Y"/>
                        <!-- Large orbit animation -->
                        <DoubleAnimationUsingPath 
                        Storyboard.TargetName="largeEllipse" 
                        Storyboard.TargetProperty="(Canvas.Left)" 
                        PathGeometry="{StaticResource largeGeo}" 
                        Duration="0:0:5" 
                        RepeatBehavior="Forever" 
                        Source="X"/>
                        <DoubleAnimationUsingPath 
                        Storyboard.TargetName="largeEllipse" 
                        Storyboard.TargetProperty="(Canvas.Top)" 
                        PathGeometry="{StaticResource largeGeo}" 
                        Duration="0:0:5" 
                        RepeatBehavior="Forever" 
                        Source="Y"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Canvas.Triggers>
        <Ellipse x:Name="smallEllipse" Height="20" Stroke="Green" StrokeThickness="5" Width="20" RenderTransformOrigin="0.5,0.5"/>
        <Ellipse x:Name="mediumEllipse" Height="40" Stroke="Red" StrokeThickness="5" Width="40" RenderTransformOrigin="0.5,0.5"/>
        <Ellipse x:Name="largeEllipse" Height="60" Stroke="Blue" StrokeThickness="5" Width="60" RenderTransformOrigin="0.5,0.5"/>
        <Path Stroke="Green" Data="{StaticResource smallGeo}"/>
        <Path Stroke="Red" Data="{StaticResource mediumGeo}"/>
        <Path Stroke="Blue" Data="{StaticResource largeGeo}"/>
    </Canvas>
</Grid> 
```

我使用 MS 表达式设计来创建路径并使用 kaxaml 来预览 xaml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:09:35.830

我怀疑`Animation`没有考虑到`Size`作为`Ellipse`动画使用`Top/Left`的`Ellipse`不是中心的`Ellipse`

解决此问题的一种方法是将 的设置`Margin`为`Ellipse``Size`

例子：

```
 <Ellipse x:Name="smallEllipse" Margin="-10" Height="20" Width="20" ......./>
    <Ellipse x:Name="mediumEllipse" Margin="-20" Height="40" Width="40" ......./>
    <Ellipse x:Name="largeEllipse" Margin="-30" Height="60" Width="60" ......../> 
```

结果：

之前：![在此处输入图像描述](https://i.stack.imgur.com/pxTjK.png)之后：![在此处输入图像描述](https://i.stack.imgur.com/ozgpW.png)

# php - 带参数的 PHP SOAP 调用方法

> ID：15924166
> 
> 赞同：0
> 
> 时间：2013-04-10T11:08:20.407
> 
> 标签：php, soap, soap-client

我正在创建一个客户端来访问网络服务；网络服务工作正常。我需要访问一种方法来获取库存数据

```
 http://176.44:8080/wsLogo/wsLogo.asmx 
```

我正在使用这样的 getITEMS 方法：

```
 http://176.44:8080/wsLogo/wsLogo.asmx?op=getITEMS 
```

`code`是空白，`date`是 2013-04-10

我使用此代码来调用它

```
ini_set( "soap.wsdl_cache_enabled", 0 );

$client = new SoapClient("http://14:8080/wsLogo/wsLogo.asmx?WSDL");

$ourParamsArray=array('','2013-04-10');

$response=$client->__soapCall('getITEMS', array('parameters' => $ourParamsArray));

print_r($response); 
```

但我没有得到正确的结果：任何人都可以帮助我吗？

[这里][1]可以看到当前的输出

```
 [1]: http://onc/jumi/temst.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:56:41.613

我将数组更改为

```
$ourParamsArray=array('ITEM'=>'','DATE'=>'2013-04-10'); 
```

Web 服务识别参数的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:21:15.360

$yourParamsArray 未定义？您似乎将其声明为 $ourParamsArray ...

# joomla - 不带扩展名的下拉登录表单

> ID：15924167
> 
> 赞同：1
> 
> 时间：2013-04-10T11:08:22.220
> 
> 标签：joomla, joomla3.0

首先，我从 Joomla 3 开始。我有一个带有登录项的主菜单，并且我想在单击此项目时下拉登录表单，例如在 dropbox 站点上登录。

我尝试了热登录扩展，但对我来说效果不佳。

更新

我在我的 XML 文件中创建了一个名为“登录”的新职位

```
<positions>
  <position>login</position> 
```

并将其添加到 index.php

```
<div class="span7">
   <jdoc:include type="modules" name="menu" style="none" />
   <jdoc:include type="modules" name="login" style="none" />
</div> 
```

最后，在面板中，我将登录位置设置为登录表单模块。

现在，我的 DOM 看起来像这样：

```
<div class="span7">
   <ul class="nav menu">Menu itens...</ul>
   <form id="login-form">...</form>
</div> 
```

当用户单击其中一个菜单项时，如何将登录表单设置为打开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:17:15.390

根据模板，有不同的方法。例如使用 Yootheme 模板，您需要在模块管理器中打开登录模块并将位置设置为“**菜单**”。使用 Rockettheme，您可以通过菜单管理器将模块或模块位置设置为特定菜单项。

查看您下载的模板的演示站点并阅读任何文档，因为它会有所帮助。

# mongodb - 在 MongoDB 中查询查询结果

> ID：15924174
> 
> 赞同：0
> 
> 时间：2013-04-10T11:08:53.160
> 
> 标签：mongodb, database

我有一个 mongo 数据库和几个集合。我想从集合中删除所有匹配的条目，比如 target_id。诀窍是我还必须删除与 target_id 匹配的条目“连接”的条目。

例如

```
DB
Culture   (_id, owner_id)
Document  (_id, target_id)
Entity    (_id, target_id)
Field     (_id, entity_id)
Form      (_id, target_id)
Question  (_id, form_id)
Layout    (_id, question_id) 
```

现在，我可以通过以下方式轻松删除所有文档

```
db.Document.remove( {"_id": ObjectId(target_id)}); 
```

所以第一个棘手的部分是文化集合中的某些条目可能有 owner_id = document_id。因此，在删除实体条目之前，我还必须删除文化条目。

第二个问题是我不能通过字段集合中的target_id条目直接访问，因为这些字段可以通过entity_id找到。

因此，我想编写一个脚本/查询以从提供 target_id 的 mongo shell 运行，然后删除 target_id 直接或间接“引用”的所有条目。我没有通过 id 进行简单的查找/删除的经验，所以这个查询被卡住了。

据我了解，我可以一步一步地做到这一点，比如说，首先找到所有实体：

```
db.Entity.find({ "$where" : "{"target_id" : ObjectId(target_id)}" }); 
```

第二步是从上面的查询中删除所有拥有 owner_id = entity id 的每个实体的文化。我怎么能跑

```
db.Culture.find({ "$where" : "{"owner_id" : ObjectId(entity_id)}" }); 
```

entity_id 遍历所有实体的第一个查询在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:20:26.497

IIUC，您正在寻找[$in](http://docs.mongodb.org/manual/reference/operator/in/)运算符。

1.  set1 = 查找所有要删除的 id
2.  set2 = 查找 set1 中 id 的所有引用 id
3.  使用 set2 删除与 in 运算符匹配的所有文档
4.  使用 set1 删除与 in 运算符匹配的所有文档

在层次结构中重复执行此操作...

例子：

```
db.Culture.find({"owner_id" : {"$in":[set_of_entityids]" }}); 
```

请注意，您从查询中获取 bson id，因此您可能不需要使用 ObjectId 作为前缀

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:22:39.007

使用 findAndMondify 的一种方法。您可以在更新文档的同时获取 ID。因此，您将文档标记为 ACTIVE = FALSE ，然后在 findAndModify 中获取 Id。最后删除所有 ACTIVE = FALSE 的条目。您可以查看我在应用程序中的使用方式：http: [//devesh4blog.wordpress.com/2013/03/01/findandmodify-in-mongodb-a-practical-example/](http://devesh4blog.wordpress.com/2013/03/01/findandmodify-in-mongodb-a-practical-example/)

# javascript - 在 jQuery 1.7 之后不推荐使用 live() 和 bind() 的原因是什么

> ID：15924175
> 
> 赞同：2
> 
> 时间：2013-04-10T11:08:54.807
> 
> 标签：javascript, jquery-ui, javascript-events, jquery

从 jQuery 1.7 开始，`.live()`and`.bind()`已被弃用，取而代之的`.on()` 是使用。这两个都是很棒的功能，就像魅力一样。删除的目的是什么？这背后的技术原因是什么？

为什么`.on()`要使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:12:21.040

引用这篇[文章](http://www.ultimatewebtips.com/why-jquery-live-is-a-bad-option-to-use/)：

1.  您不能将 live 用于可重用的小部件。

2.  stopPropagate() 在现场不起作用

3.  直播比较慢

4.  Live 不可链接

# c++ - 错误：< 标记之前的预期模板名称

> ID：15924180
> 
> 赞同：1
> 
> 时间：2013-04-10T11:09:08.677
> 
> 标签：c++, templates

您好我收到以下错误

```
templateatt.cpp:4:32: error: expected template-name before ‘&lt;‘ token
templateatt.cpp:4:32: error: expected â{â before ‘&lt;‘ token
templateatt.cpp:4:32: error: expected unqualified-id before ‘&lt;‘ token 
```

当我编译以下 cpp 文件时：

```
 #include<iostream>

    template <class R, class T>
    class mem_fun_t: unary_function<T*, R> {
      R (T::*pmf)();
    public:
      explicit mem_fun_t(R (T::*p)()):pmf(p){}
      R operator() (T *p) const { return (p->*pmf()); }
    };

    int main() {
      return 0;
    } 
```

任何帮助都会很棒。我坚持这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T11:10:49.463

不要忘记`#include <functional>`获取`unary_function`，然后使用`std::unary_function`.

# regex - Visual Studio 2012 正则表达式

> ID：15924181
> 
> 赞同：1
> 
> 时间：2013-04-10T11:09:09.290
> 
> 标签：regex, visual-studio-2012

我读过了

1.  [有关正则表达式语法的 MSDN 文档](http://msdn.microsoft.com/en-us/library/2k3te2cs(v=vs.80).aspx)

2.  Stack Overflow 问题*[在 Visual Studio 中搜索和替换](https://stackoverflow.com/questions/7848329)*

但这些对我没有帮助。

我想匹配整个宇宙中最简单的字符串，“0:n”、“1:n”、“2:n”等。我尝试了以下[Visual Studio 2012](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2012)正则表达式。

```
{:d+}:n 
```

这不会返回任何结果（并且有结果）。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T11:13:45.543

您一直在查看 Visual Studio 过时版本的文档。

[从 VS 2012 开始](http://msdn.microsoft.com/en-us/library/2k3te2cs%28v=vs.110%29.aspx)，支持“标准”正则表达式语法，更准确地说是[.NET 风格](http://www.regular-expressions.info/dotnet.html)。

因此，对于您的示例，正​​则表达式将是`\d+:n\b`.

# c# - 修改t4模板，在两个文件中生成写文本

> ID：15924182
> 
> 赞同：1
> 
> 时间：2013-04-10T11:09:12.877
> 
> 标签：c#, entity-framework-5, t4

我的实体模型（MyModel）有 MyModel.tt。我需要修改 MyModel.tt 文件。我想要的是我的 simpleProperties 写在一个类中，而 navigationProperties 和 complexProperties 在另一个类中。我找到了这些行，但现在完全空白该怎么办。

这是（我认为）我必须编写将在不同类中编写属性的代码的代码。

```
<#
    }
    var simpleProperties = typeMapper.GetSimpleProperties(entity);
    if (simpleProperties.Any())
    {
        foreach (var edmProperty in simpleProperties)
        {
#>
    // TODO: Write this in entityName.cs
    <#=codeStringGenerator.Property(edmProperty)#>
<#
        }
    }
    if (complexProperties.Any())
    {
#>
<#
        foreach(var complexProperty in complexProperties)
        {
#>
    // TODO: Write this in entityNameComplex.cs
    <#=codeStringGenerator.Property(complexProperty)#>
<#
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T15:14:57.200

我不确定您是在问如何编写“codeStringGenerator”存根，还是只是将输出分成两个文件。如果您只是想将输出分成两个文件，那么下面的小片段应该可以工作。

```
<#
        relativeOutputFilePath = @"\Output\" + oneTable.Name + "_List.aspx";
        TemplateHelper.WriteTemplateOutputToFile(relativeOutputFilePath, Host, GenerationEnvironment);
        GenerationEnvironment = new System.Text.StringBuilder();
#> 
```

本质上，这一切都是抓取到目前为止由您的模板构建的字符串，将其写入您选择的文件，然后为下一个模板重置字符串。

这取自可能提供更多信息的 StackOverflow[帖子。](https://stackoverflow.com/questions/2223421/t4-template-to-create-multiple-html-for-example-output-files-per-table-from "邮政")

# ruby-on-rails - 轮胎弹性搜索：从模型中删除记录并立即重定向会引发错误

> ID：15924184
> 
> 赞同：0
> 
> 时间：2013-04-10T11:09:15.900
> 
> 标签：ruby-on-rails, tire

我有一个名为`User`. 当我销毁用户并重定向到用户的索引页面时，它会引发异常 `ActiveRecord::RecordNotFound: Couldn't find all Users with IDs (1, 200) (found 1 results, but was looking for 2)` 但是当我刷新页面时，页面会正确加载并显示所有用户。我猜的问题`Tire::Model::Callbacks after_destroy`是需要一些时间来执行，如果我`User.search_all`在那个时间段内调用，搜索结果包括被破坏的 id。我正在寻找一种干净的方法来克服这个问题。或者轮胎有任何选择来处理这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-20T21:36:27.983

在调用 User.search_all 之前向 Elasticsearch 发送刷新调用。Elasticsearch refresh_interval 默认为 1 秒，因此如果您从中删除并在一秒钟内进行搜索，它可能没有机会在将结果返回给您之前删除已删除的记录。

# google-maps-api-3 - 是否有完全可靠的方法来检查（同步/异步）谷歌地图是否已满载？

> ID：15924188
> 
> 赞同：2
> 
> 时间：2013-04-10T11:09:40.307
> 
> 标签：google-maps-api-3

我正在使用 Google Maps API v 3.11（截至目前最新）

*   即使由于互联网连接速度慢而导致某些图块未加载，事件“空闲”有时也会被触发。
*   事件 'tilesloaded' 不会一直被触发。只有在真正加载了一些图块时才会触发它。如果切片来自缓存，则根本不会触发此事件。所以你的听众可能会无休止地等待。

有人如何确保地图中的图块已完全加载？

有没有可以告诉我瓷砖是否完全加载的功能？在那种情况下，我可以收听“空闲”事件，然后检查这个 areTilesLoaded() 函数，然后收听另一个“tilesloaded”事件？

在此先感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:04:13.993

我用过

```
google.maps.event.addListener( map, 'idle', function() {
    // do cool stuff
}); 
```

当地图空闲并且（所以我认为）满载时发射一些东西。你能把你的用例扔进小提琴，或者提供一些东西给我们看吗？

# java - Java-3d 碰撞检测

> ID：15924191
> 
> 赞同：2
> 
> 时间：2013-04-10T11:09:46.130
> 
> 标签：java, 3d, collision-detection, java-3d

我刚刚开始使用 java 3-d，我正在尝试制作一个游戏，你可以在其中跳跃敌人以获得 ponts。我知道如何为游戏做所有事情，除了碰撞检测。当敌人的球接触它时，我需要移除玩家的球。我试图做一个看起来像这样的 id 语句，`if(sphere.getBounds().intersects(sphere2.getBounds())`但由于某种原因在游戏开始的同时触发它。我知道我可能需要使用 `WakeupOnCollisionEntry`该类，但我不知道如何正确使用它来移除球员球。我认为如果我将`WakeupOnCollisionEntry`类结合使用它会起作用，`objTrans.removeChild(sphere)`但我不知道如何将它们结合使用。

如果您需要查看我的代码以提供帮助，请查看以下代码：

```
package Game;

import com.sun.j3d.utils.geometry.*;
import com.sun.j3d.utils.universe.*;
import java.awt.*;
import java.awt.event.*;
import javax.media.j3d.*;
import javax.swing.JFrame;
import javax.swing.Timer;
import javax.vecmath.*;

public class PAPITest extends JFrame implements ActionListener,KeyListener{
    private TransformGroup objTrans,objTrans2;
    private Transform3D trans = new Transform3D();
    private BranchGroup objRoot;
    private Sphere sphere, sphere2;
    private float x, dx, height = 0.0f, sign = 1.0f, xloc = 0.0f;
    private Timer timer;

    public BranchGroup createSceneGraph(){
        objRoot = new BranchGroup();
        objTrans = new TransformGroup();
        objTrans.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot.addChild(objTrans);
        sphere = new Sphere(0.25f);
        sphere.setCollidable(true);
        objTrans = new TransformGroup();
        objTrans.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans.setTransform(pos1);
        objTrans.addChild(sphere);
        objRoot.addChild(objTrans);
        BoundingSphere bounds = new BoundingSphere
                (new Point3d(0.0,0.0,0.0),100.0);
        Color3f light1Color = new Color3f(0.2f,1.0f,1.0f);
        Vector3f light1Direction = new Vector3f(+4.0f,-7.0f,-12.0f);
        DirectionalLight light1 = new DirectionalLight
                (light1Color,light1Direction);
        light1.setInfluencingBounds(bounds);
        objRoot.addChild(light1);
        Color3f ambientColor = new Color3f(1.0f,1.0f,1.0f);
        AmbientLight ambientLightNode = new AmbientLight(ambientColor);
        ambientLightNode.setInfluencingBounds(bounds);
        objRoot.addChild(ambientLightNode);         
        return objRoot;
    }

    public BranchGroup createSceneGraph2(){
        objRoot = new BranchGroup();
        objTrans2 = new TransformGroup();
        objTrans2.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        objRoot.addChild(objTrans2);
        sphere2 = new Sphere(0.25f);
        sphere2.setCollidable(true);
        objTrans2 = new TransformGroup();
        objTrans2.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
        Transform3D pos1 = new Transform3D();
        pos1.setTranslation(new Vector3f(0.0f,0.0f,0.0f));
        objTrans2.setTransform(pos1);
        objTrans2.addChild(sphere2);
        objRoot.addChild(objTrans2);
        return objRoot;
    }

    public PAPITest(){
        setLayout(new BorderLayout());
        setTitle("PAPI");
        setVisible(true);
        setSize(505,525);
        setResizable(false);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        GraphicsConfiguration config = SimpleUniverse.getPreferredConfiguration();
        Canvas3D c = new Canvas3D(config);
        add("Center",c);
        c.addKeyListener(this);
        c.setSize(500,500);
        timer = new Timer(100,this);
        timer.start();
        BranchGroup scene = createSceneGraph();
        BranchGroup scene2 = createSceneGraph2();
        SimpleUniverse u = new SimpleUniverse(c);
        u.getViewingPlatform().setNominalViewingTransform();
        u.addBranchGraph(scene);
        u.addBranchGraph(scene2);
        for(float i = 0; i < .10f; i++){
            x = 1.5f;
            dx = -.05f;
        }
    }

    public void keyPressed(KeyEvent e){
        if(e.getKeyChar() == 'd'){
            xloc = xloc + .1f;
        }

        if(e.getKeyChar() == 'a'){
            xloc = xloc - .1f;
        }
    }

    public void keyReleased(KeyEvent e){

    }

    public void keyTyped(KeyEvent e){

    }

    public void actionPerformed(ActionEvent e){
        height += .1f * sign;
        if(Math.abs(height * 2) >= 1)
            sign = -1.0f * sign;
        if(height < -.4f){
          trans.setScale(new Vector3d(1.0,.8,1.0));
        }else{
          trans.setScale(new Vector3d(1.0,1.0,1.0));
        }
        trans.setTranslation(new Vector3f(xloc,height - .15f,0.0f));
        objTrans.setTransform(trans);
        if(height < -.4f){
          trans.setScale(new Vector3d(1.0,1.0,1.0));
        }
        trans.setTranslation(new Vector3f(x += dx,-.7f,0.0f));
        objTrans2.setTransform(trans);
    }

    public static void main(String[] args){
        System.out.println("Program Started");
        PAPITest pt = new PAPITest();
        pt.addKeyListener(pt);
    }
} 
```

**编辑：**现在我添加了一些我认为如果我能让它更准确的话会起作用的东西。我添加了这两种方法：

```
public void getSpherePosition(){
        positionX = (int) xloc;
        positionY = (int) height;
        position = positionX + positionY;
    }

    public void getSphere2Position(){
        positionX2 = (int) x;
        positionY2 = (int) -.7f;
        position2 = positionX2 + positionY2;
    } 
```

我在 actionPerformed 方法中添加了这个：

```
 getSpherePosition();
        getSphere2Position();
        if(position == position2){
            System.out.println("It Worked");
        } 
```

它有点工作，因为 It Worked 文本仅在玩家球靠近敌方球时出现，它也出现在我第一次启动程序时。

有没有更好的方法来做到这一点？如果是这样，我该怎么做？以及如何使我的方式更准确，并且在启动程序时不直接显示文本？

我知道它变得不准确，因为我只是将三个变量加在一起，所以即使玩家和敌人不相互接触，位置也可以等于位置2，但我不知道如何以不同的方式做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:42:52.100

很抱歉花了这么长时间才回复您。Java3d 已经内置了一些方法，这些方法似乎被埋在了所有知识中最黑暗的地方。我发现了一种粗糙但有效的碰撞检测方法。

这是一个可以调用以产生碰撞的方法的简单片段。

```
import java.util.Enumeration;
import javax.media.j3d.Behavior;
import javax.media.j3d.Bounds;
import javax.media.j3d.Node;
import javax.media.j3d.Shape3D;
import javax.media.j3d.WakeupCriterion;
import javax.media.j3d.WakeupOnCollisionEntry;
import javax.media.j3d.WakeupOnCollisionExit;
import javax.media.j3d.WakeupOnCollisionMovement;
import javax.media.j3d.WakeupOr;

/**
 *
 * @author sawyera.2016
 */
 public class Coll extends Behavior {
 /** The separate criteria used to wake up this beahvior. */
 protected WakeupCriterion[] theCriteria;

 /** The OR of the separate criteria. */
 protected WakeupOr oredCriteria;

 /** The shape that is watched for collision. */
  protected Shape3D collidingShape;

  /**
    * @param theShape
   *            Shape3D that is to be watched for collisions.
   * @param theBounds
   *            Bounds that define the active region for this behaviour
   */
  public Coll(Shape3D theShape, Bounds theBounds) {
   collidingShape = theShape;
   setSchedulingBounds(theBounds);
    }

  /**
   * This creates an entry, exit and movement collision criteria. These are
   * then OR'ed together, and the wake up condition set to the result.
   */
  public void initialize() {
    theCriteria = new WakeupCriterion[3];
    theCriteria[0] = new WakeupOnCollisionEntry(collidingShape);
    theCriteria[1] = new WakeupOnCollisionExit(collidingShape);
    theCriteria[2] = new WakeupOnCollisionMovement(collidingShape);
    oredCriteria = new WakeupOr(theCriteria);
    wakeupOn(oredCriteria);
  }

  /**
   * Where the work is done in this class. A message is printed out using the
   * userData of the object collided with. The wake up condition is then set
   * to the OR'ed criterion again.
   */
  public void processStimulus(Enumeration criteria) {
    WakeupCriterion theCriterion = (WakeupCriterion) criteria.nextElement();
    if (theCriterion instanceof WakeupOnCollisionEntry) {
      Node theLeaf = ((WakeupOnCollisionEntry) theCriterion)
          .getTriggeringPath().getObject();
      System.out.println("Collided with " + theLeaf.getUserData());
    } else if (theCriterion instanceof WakeupOnCollisionExit) {
      Node theLeaf = ((WakeupOnCollisionExit) theCriterion)
          .getTriggeringPath().getObject();
      System.out.println("Stopped colliding with  "
      + theLeaf.getUserData());
    } else {
      Node theLeaf = ((WakeupOnCollisionMovement) theCriterion)
      .getTriggeringPath().getObject();
  System.out.println("Moved whilst colliding with "
      + theLeaf.getUserData());
    }
    wakeupOn(oredCriteria);
  }
} 
```

我不能完全相信这一点，我确实从网上得到了一些关于它的信息，但是我从 java3d 的 1.2 版本制作了这个版本。

# javascript - JavaScript/jQuery：如何在旋转后获取元素 (DIV) 的实际原始位置

> ID：15924192
> 
> 赞同：0
> 
> 时间：2013-04-10T11:10:06.687
> 
> 标签：javascript, jquery, rotation, position, offset

我有一个使用 -webkit-transform:rotate(45deg) 旋转的 div 元素。如果我尝试像这样在旋转后访问它的当前位置

```
var x = $('#tap-area').offset().left;
var y = $('#tap-area').offset().top; 
```

它返回给我的不是原始左上角的实际值，而是整个 div 边界框的左上角在哪里（在 DIV 之外物理上最远的左上角）。

旋转后如何计算/获取div的原始左上角

例如：如果我将它旋转 90 度，我现在想要得到的值将是右上角。如果我将它旋转 180 度，我现在想要得到的值将是右下角。

我需要这个，所以我可以设置另一个 DIV 元素始终保持连接到元素的原始左上角，这样它就会根据它的旋转方式改变它的位置。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:45:59.563

You can always get the absolute position of an element using:

`<element>.getBoundingClientRect()`

This gives you the AABB (Axis Aligned Bounding Box, or Min-Max-Box) with the top left corner of the screen as origin. ([MDN](https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect))

If you need to access the position of the top left corner of your element you can rotate its original position vector too, what is a simple matrix multiplication. You should than keep in mind that the center of rotation is by default the element's center, but it also possible to set this to a different location with css.

Good Luck!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T06:50:15.907

这是我在遇到同样的问题后得出的解决方案：

```
// Initial data with TOP AND LEFT OF THE BOUNDING BOX (not x,y of top left point of     the box but left margin of the bounding box   and top margin of the bounding    box)

var top  = Math.ceil($('#' + id).position().top);
var left = Math.ceil($('#' + id).position().left);
var wi   = $('#' + id).css("width").replace("px","");
var he   = $('#' + id).css("height").replace("px","");
var rot  = $(this).data(id + ".ROTACION"); //There I have the applied rotation stored ...

// CALULATIONS

var swapheightwidth= false;

    //Let's keept it first cuad. 

if (rot > 270)
{
    rot = rot - 270;
    swapheightwidth= = true;
}
else if (rot > 180) 
{
    rot = rot - 180;
}
else if (rot > 90) 
{
    swapheightwidth= = true;
    rot = rot - 90;
}

if (swapheightwidth)
{
    var calculatedX=  left + (wi * sin(rot)); 
    var calculatedY=  top + (wi * cos(rot));
}
else
{
    var calculatedX=  left + (he * sin(rot)); 
    var calculatedY=  top + (he * cos(rot));
}

var xbott = left;
var ybott =  Math.ceil(calculatedY);

var xtop=  Math.ceil(calculatedX);
var ytop= top;

    // FINAL CALCULATED POINTS
// xtop  ytop  -> top left
// xbott  ybott   -> bottomleft 

function sin(x) {
    return Math.sin(x / 180 * Math.PI);
}

function cos(x) {
    return Math.cos(x / 180 * Math.PI);
} 
```

干杯

# javascript - Raphael Js 无法用图像填充路径

> ID：15924193
> 
> 赞同：0
> 
> 时间：2013-04-10T11:10:07.910
> 
> 标签：javascript, svg, raphael

我一直在尝试用图像模式填充路径，但徒劳无功。我有这个[小提琴](http://jsfiddle.net/bGrB7/11/)。我可以用图像填充像圆这样的对象，但不能填充任何路径。请单击红色区域标签，然后单击任何路径进行操作。

JS：

```
var paths = {
    path_1: {
        name: '1',
        path: 'M30.848,0.13 45.4,1.747 58.983,1.747 74.829,3.687   90.999,3.687 123.015,3.687 149.21,0.13 176.051,1.908 201.923,3.687 236.526,3.687 268.865,6.598 279.538,6.598 297.647,6.598   316.404,6.598 339.042,3.364 369.765,6.598 391.108,6.598 420.861,9.185 435.091,18.563 440.265,40.23 443.499,68.366   447.703,91.65 451.907,115.582 453.848,138.287 453.848,160.533 456.758,179.29 459.345,195.46 461.608,213.57 462.902,229.093   465.489,239.441 466.783,254.965 464.196,277.926 461.285,288.921 455.464,292.479 440.911,297.006 423.448,298.623   389.492,298.623 376.232,298.623 370.411,298.623 360.387,298.623 355.858,298.623 348.421,298.623 340.659,298.623   331.928,297.329 328.047,298.623 318.668,298.623 309.29,298.623 289.563,298.623 273.394,298.623 262.397,298.623 243.317,297.329   235.232,298.623 227.794,300.887 218.416,300.887 212.271,299.27 195.132,300.887 187.694,300.887 178.962,300.887 164.409,300.887   149.533,300.887 137.567,303.15 123.338,303.15 97.79,303.15 87.118,303.15 73.859,304.444 58.659,304.444 40.226,304.444   21.146,302.827 13.708,296.035 5.946,289.567 2.065,282.13 0.125,262.402 0.125,228.77 0.125,201.281 0.125,171.529 4.006,147.274   3.359,122.373 3.359,106.526 4.006,92.621 8.21,70.63 11.444,42.495 15.325,24.708 15.325,17.27 18.882,9.832 z'
    }

}
var colorAttributeMap = {};
var drawn = false;
var choosenColor;

    function drawOnPaper(r) {
       var cir = r.circle(50,50,10);
        cir.attr({
                cursor: 'pointer',
                fill: choosenColor
            })
        for (var country in paths) {
            var path = r.path(paths[country].path);
            path.node.id = country;
            if (drawn == false) {
                colorAttributeMap[country] = 'none';
            }

            $(path.node).click({
                rObj: path
            },

            function (e) {
                colorAttributeMap[path.node.id] = choosenColor;
                clearObjects(e.data.rObj.paper);
                drawOnPaper(e.data.rObj.paper);

            });
            console.log("Path " + country + " Color " + colorAttributeMap[country]);
            path.attr({
                cursor: 'pointer',
                fill: choosenColor
            })
        }
        if (drawn == false) {
            drawn = true;
        }

    }

function clearObjects(r){
           r.clear();
    }

jQuery(function($) {
        var r = Raphael(document.getElementById("map"), 1550, 750);
        r.setViewBox(0, 0, 612, 792);
        drawOnPaper(r);
        $('body').delegate( '.Color',"click",function(){
                var a=$(this).html();       
                choosenColor    = a;
        });

    }); 
```

HTML：

```
<body>
    <div id="main">
        <div id="left">
            <table id="table">
                <tr>
                    <td>Click on label of red area and then clcik on the path </td>
                </tr>
                <tr>
                    <td>Fill it with following image</td>
                    <td bgcolor="red"><a class="Color" value="url(http://media.balenciaga.com/images/10x10/SWATCH_D94J4_1000_A_10x10.jpg)">url(http://media.balenciaga.com/images/10x10/SWATCH_D94J4_1000_A_10x10.jpg)</a>

            </table>
        </div>
        <div id="map"></div>
    </div>
</body> 
```

CSS：

```
body {
    margin: 1em;
    text-align: center
}
svg {
    background: #ffc;
    height: 800px
}
path {
    fill: transparent;
    stroke: black;
    stroke-width: 3;
    stroke-linejoin: round;
    stroke-linecap: round;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:41:05.240

## 第一的

如果要点击路径，则需要填充，否则只能按描边。

```
var choosenColor = '#ffc'; 
```

## 第二

您需要为节点设置填充属性，而不是参考：

```
$(path.node).attr({
    cursor: 'pointer',
    fill: choosenColor
}) 
```

## 第三

从 css 中删除填充

```
path {
    fill: transparent;
} 
```

## 第四

在矩形之后画圆。你想在上面圈。

## 例子

[http://jsfiddle.net/bGrB7/14/](http://jsfiddle.net/bGrB7/14/)

我希望这是你想要的。

# windows-phone-7 - 如何在画布上实现捏合/缩放事件？

> ID：15924195
> 
> 赞同：0
> 
> 时间：2013-04-10T11:10:15.763
> 
> 标签：windows-phone-7, xaml

我在我的 xaml 页面中添加了一个 Canvas 并在其上绘制了一些正方形。现在我想要一个允许我放大和缩小画布的事件，使画布上的方块变得越来越小。

我猜我必须遍历画布的孩子并对它们进行数学魔术，但是我如何检测用户用两根手指进行缩放？似乎没有内置任何东西？

有人知道教程吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:26:36.970

你应该检查[操作](http://msdn.microsoft.com/en-us/magazine/ff898416.aspx)。它们是 .Net 中多点触控输入的表示，例如缩放、旋转等。您将不得不处理 3 个事件：

*   [操作开始](http://msdn.microsoft.com/en-us/library/system.windows.uielement.manipulationstarted(v=vs.110).aspx)
*   [操纵三角洲](http://msdn.microsoft.com/en-us/library/system.windows.uielement.manipulationdelta(v=vs.110).aspx)
*   [ManipulationCompleted](http://msdn.microsoft.com/fr-fr/library/system.windows.uielement.manipulationcompleted.aspx)（用于惯性）

使用`ManipulationDelta`，您将获得一个增量，您可以使用它根据用户的操作来转换您的控件。这是 MSDN 文档

您将对`DeltaManipulation.Scale`您的缩放属性感兴趣。

# javascript - iFrame 动态调整大小不显示整个页面

> ID：15924201
> 
> 赞同：0
> 
> 时间：2013-04-10T11:10:30.713
> 
> 标签：javascript, html

我正在使用此脚本根据内容高度大小设置 iframe 的高度，但我需要在菜单上单击两次才能显示整个内容。

看这里：[http ://www.luilui.com.br/inverno2013](http://www.luilui.com.br/inverno2013)

有谁知道为什么？

我的页面包含 iframe 脚本：

```
<iframe name="iframe_site" id="iframe_site" src="inicio.asp" width="100%" scrolling="no" height="100%" marginheight="0" frameborder="0" ></iframe> 
```

这是在 iframe 内的页面上：

```
<body id="size">
.
.
.
.
content
.
.
.
.

    <script language="Javascript" type="text/javascript">

      var _iframe = parent.document.getElementById("iframe_site"),
          _height = _iframe.contentDocument.getElementById("size").scrollHeight || _iframe.contentWindow.document.getElementById("size").scrollHeight;
          _iframe.height = _height + 40;
    </script>
</body> 
```

已编辑：我不知道这是否有帮助，但只有页面 inicio.asp 显示完整，即我在 iframe 标记中调用的页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:48:11.537

使用`window.setTimeout`我已经解决了这个问题....

```
<script language="Javascript" type="text/javascript">
    window.setTimeout( 

        function(){
            var _iframe = parent.document.getElementById("iframe_site"),
            _height = _iframe.contentDocument.getElementById("size").scrollHeight || _iframe.contentWindow.document.getElementById("size").scrollHeight;
            _iframe.height = _height;
        },

    2000);
</script> 
```

# powershell - 无法使用 powershell 调用命令从远程计算机获取所需信息

> ID：15924202
> 
> 赞同：0
> 
> 时间：2013-04-10T11:10:31.540
> 
> 标签：powershell, invoke-command

我正在开发一个工具，它使用 powershell 脚本来搜索机器的**新 Windows 更新**。目前，通过使用**“调用命令”，**我正在远程访问各种构建控制器、虚拟机和主机并运行这个 powershell 脚本。但是 invoke-command 每次执行时都无法获取更新详细信息。调用命令的用法如下：

**调用命令 -computername buildcontroller1 -filepath searchupdates.ps1 -credential $myceredential**

如果我运行这个命令，第一次我会得到输出，但是如果我在 2 到 3 小时或 1 天后再次运行这个命令，它不会检索更新详细信息。谁能告诉我这个的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:41:20.993

我不能告诉你这样做的原因。

我怀疑需要询问的原因是 searchupdates.ps1 脚本中没有错误处理。

# deployment - Websphere bat 文件退出批处理文件

> ID：15924205
> 
> 赞同：0
> 
> 时间：2013-04-10T11:10:38.797
> 
> 标签：deployment, batch-file, automation, websphere, websphere-7

我正在编写脚本来自动将耳朵部署到 websphere 并在应用程序上创建变量。

我的问题是 manageprofiles 和 startserver bat 文件退出了我的批处理并进入下一步我必须多次调用它

这是我的脚本

```
FOR /F "tokens=*" %%i in ('type params.properties') do SET %%i
REM SET PATH=%PATH%;%AppServerPath%\bin
REM CALL setupCmdLine.bat -create -profileName %profile% -profilePath "%AppServerPath%\profiles\%profile%" -templatePath "%AppServerPath%\profileTemplates\default"

"%AppServerPath%\bin\manageprofiles" -listProfiles | findstr -i %profile% > nul:
if %ERRORLEVEL%==1 (
  ECHO Creating profile %profile% on %AppServerPath%\profiles\%profile%
  "%AppServerPath%\bin\manageprofiles" -create -profileName %profile% -profilePath "%AppServerPath%\profiles\%profile%" -templatePath "%AppServerPath%\profileTemplates\default"
)

ECHO Getting profile path
FOR /F "delims=" %%a IN ('manageprofiles -getPath -profileName %profile%') DO @SET PROFILEPATH=%%a

REM SET PATH=%OLD_PATH%;%PROFILEPATH%\bin
FOR /F "tokens=7 delims= " %%H IN ('serverStatus server1 ^| findstr "Application Server"') DO (
    IF /I "%%H" NEQ "STARTED" (
v       ECHO Starting server1
        startServer server1
    )
)

"%PROFILEPATH%\bin\wsadmin" -lang jython -f EEDeployer.jy "%PROFILEPATH%" 
```

检查配置文件并在不存在时创建它然后在其上启动 server1 的任何想法或替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:17:01.930

您需要`CALL`一个批次以允许处理返回到主批次。

如果您只是从一个批次中执行一个批次，则控制权会转移，但不会记录返回。

```
CALL   "%AppServerPath%\bin\manageprofiles" ... 
```

应该可以解决您的问题。用 startserver 重复...

# xml - XSL - 删除重复节点但保留原始节点

> ID：15924211
> 
> 赞同：1
> 
> 时间：2013-04-10T11:10:51.267
> 
> 标签：xml, xslt, xslt-1.0, duplicate-removal

在使用 XSLT 从输入 xml 中删除重复节点时需要帮助

这就是我的 XML 的样子，

```
<?xml version="1.0"?>

<NodeA NodeAattr="123">

<NodeB NodeBattr="456"></NodeB>

<NodeC>
    <NodeD="ValueD">
       <NodeE Name="ValueABC">
          <NodeF Value="0"></NodeF >
       </NodeE >
       <NodeE Name="ValueABC">
          <NodeF Value="0"></NodeF >
       </NodeE>
  </NodeD>
</NodeC>
</NodeA> 
```

我的最终输出应该看起来像

```
<NodeA NodeAattr="123">

<NodeB NodeBattr="456"></NodeB>

<NodeC>
    <NodeD="ValueD">
       <NodeE Name="ValueABC">
          <NodeF Value="0"></NodeF>
       </NodeE >
    </NodeD>
</NodeC>
</NodeA> 
```

此处节点 E 的 Name 属性具有重复值。基于此属性，我需要消除重复项。

如果有人可以帮助我使用此处所需的 XSLT 来获得输出，那将非常有帮助。我只能使用 XSLT 1.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:03:08.493

如果两个`<NodeE>`元素只有在它们具有相同的父元素时才被认为是重复的，这可能是最简单的解决方案：

### 输入

```
<?xml version="1.0"?>

<NodeA NodeAattr="123">

  <NodeB NodeBattr="456"></NodeB>

  <NodeC>
    <NodeD Name="ValueD">
      <NodeE Name="ValueABC">
        <NodeF Value="0"></NodeF>
      </NodeE>
      <NodeE Name="ValueABC">
        <NodeF Value="0"></NodeF>
      </NodeE>
    </NodeD>
    <!-- Added another <NodeD> element for demonstration -->
    <NodeD>
      <NodeE Name="ValueABC">
        <NodeF Value="0"></NodeF>
      </NodeE>
      <NodeE Name="ValueDEF">
        <NodeF Value="0"></NodeF>
      </NodeE>
    </NodeD>
  </NodeC>
</NodeA> 
```

### 样式表 #1

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <!--
  Identity transform: copy elements and attributes from input file as is
  -->
  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>

  <!--
  Drop <NodeE> elements with a preceding <NodeE> sibling that has the same
  @Name attribute value as the current element
  -->
  <xsl:template
    match="NodeE[preceding-sibling::NodeE[@Name = current()/@Name]]"/>

</xsl:stylesheet> 
```

### 输出#1

```
<?xml version="1.0" encoding="utf-8"?>
<NodeA NodeAattr="123">
  <NodeB NodeBattr="456"/>
  <NodeC>
    <NodeD Name="ValueD">
      <NodeE Name="ValueABC">
        <NodeF Value="0"/>
      </NodeE>
    </NodeD>
    <NodeD>
      <NodeE Name="ValueABC">
        <NodeF Value="0"/>
      </NodeE>
      <NodeE Name="ValueDEF">
        <NodeF Value="0"/>
      </NodeE>
    </NodeD>
  </NodeC>
</NodeA> 
```

另一方面，如果`<NodeE>`元素应被视为在整个文档中重复，则可以使用 Muenchian 分组：

### 样式表 #2

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" version="1.0" encoding="utf-8" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:key name="kNode" match="NodeE" use="@Name"/>

  <!--
  Identity transform: copy elements and attributes from input file as is
  -->
  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>

  <!--
  Use Muenchian grouping to apply unique NodeE elements.
  See http://www.jenitennison.com/xslt/grouping/muenchian.html
  -->
  <xsl:template match="NodeE[generate-id() = 
                       generate-id(key('kNode', @Name)[1])]">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>

  <!-- Drop other <NodeE> elements -->
  <xsl:template match="NodeE"/>

</xsl:stylesheet> 
```

### 输出#2

```
<?xml version="1.0" encoding="utf-8"?>
<NodeA NodeAattr="123">
  <NodeB NodeBattr="456"/>
  <NodeC>
    <NodeD Name="ValueD">
      <NodeE Name="ValueABC">
        <NodeF Value="0"/>
      </NodeE>
    </NodeD>
    <NodeD>
      <NodeE Name="ValueDEF">
        <NodeF Value="0"/>
      </NodeE>
    </NodeD>
  </NodeC>
</NodeA> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T13:01:18.020

使用“deep-euql”函数比较两个 item()。检查这个：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xsl:output indent="yes"/>
  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="NodeE">
    <xsl:choose>
      <xsl:when test="deep-equal(self::NodeE, following-sibling::NodeE)"/>
      <xsl:otherwise>
        <xsl:copy>
          <xsl:apply-templates select="* | @*"/>
        </xsl:copy>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

</xsl:stylesheet> 
```

# entity-framework - 如何在 EF Code First 中为所有常见实体配置使用基类？

> ID：15924212
> 
> 赞同：1
> 
> 时间：2013-04-10T11:10:51.343
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

我正在尝试将我的实体配置（映射）类中常见的代码抽象为一个基类，如下所示：

```
public class EntityWithIdTypeConfig<T>: EntityTypeConfiguration<T> where T: class, IEntityWithId
{
    public EntityWithIdTypeConfig()
    {            
    }

    public EntityWithIdTypeConfig(string tableName, string schemaName)
    {
        ToTable(tableName, schemaName);
        HasKey(t => t.Id);
    }
} 
```

一个示例实体类如下所示：

```
public partial class Parkade: IEntityWithId
{  
    public Parkade()
    {
        this.Zones = new List<Zone>();
    }
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Zone> Zones { get; set; }
} 
```

这是由类映射的：

```
public class ParkadeConfig : EntityWithIdTypeConfig<Parkade> 
{
    public ParkadeConfig(string tableName, string schemaName):base(tableName, schemaName)
    {
        HasRequired(t => t.Zones)
            .WithMany();
        Property(t => t.Name)
            .IsRequired()
            .HasMaxLength(50);
    }
} 
```

当我运行查询时，我收到错误：

```
The key component 'Id' is not a declared property on type 'Parkade'. 
```

在 Parkade 上清楚地声明了 ID。这可能是因为`Id`是`IEntityWithId`? 我可能做错了什么？

# javascript - 将处理程序绑定到 IE 中的事件

> ID：15924218
> 
> 赞同：0
> 
> 时间：2013-04-10T11:11:08.453
> 
> 标签：javascript, jquery, internet-explorer, binding

我正在尝试将一些函数绑定到一个事件。以下代码在 Chrome 和 FF 中运行良好，但 IE 的相应代码是什么？

```
$this.mouseenter(function(){ 
    console.log("inside the mouse enter handler");
}); 
```

我试过这个，但它在 IE 中不起作用：

```
 $this.bind('mouseenter', function(){
        console.log("inside the mouse enter handler");
    }); 
```

我需要它至少在 IE 9 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:45:15.607

如果您的浏览器的控制台未打开，console.log 将返回一个 js 错误。它会发生在任何浏览器中，而不仅仅是 IE。可能您在浏览器控制台打开和 IE 未打开浏览器控制台的情况下尝试了 FF 和 chrome。尝试打开在 IE 中打开的浏览器控制台/通过使用 alert() 来测试您的功能/通过直接编写您需要的功能。

希望能帮助到你！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:16:11.553

`console.log`或者至少`console`会给你一个 IE 错误......因此，你的 javascript 将无法工作......尝试使用`alert`......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:10:42.067

无法理解@您的问题出了什么问题。我试过这个，它对我来说很好。

![在此处输入图像描述](https://i.stack.imgur.com/VwIPp.png)

# ruby-on-rails - Active Model Serializer 产生错误的 ID

> ID：15924219
> 
> 赞同：1
> 
> 时间：2013-04-10T11:11:08.987
> 
> 标签：ruby-on-rails, ruby, serialization

如果您使用`Active Model Serializers`Rails 中生成 JSON API，请参阅[RailsCast 409](http://railscasts.com/episodes/409-active-model-serializers)，并定义一个`serializer`这样的..

```
class ArticleSerializer < ActiveModel::Serializer
  attributes :id, :name, :content
end 
```

..并尝试序列化对象（通常通过`render :json => article`）：

```
ArticleSerializer.new(article).as_json
=>  {:id=>158655280, :name => "a name", :content => "article content"} 
```

然后它有时会产生非常奇怪的 ID 和警告：`Object#id will be deprecated; use Object#object_id`，至少对于 Ruby 1.8.7，Ruby 1.9.3 似乎可以工作。

**这是一个Ruby问题吗？**

如果更新到 Ruby 1.9.3 不是一个选项，你如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-07T22:18:57.297

我遇到过同样的问题。解决方案是在我的序列化程序中定义一个 id 方法：

```
def id
  object.id
end 
```

# java - 在 .properties 文件中添加注释

> ID：15924220
> 
> 赞同：39
> 
> 时间：2013-04-10T11:11:16.200
> 
> 标签：java, ant, properties-file

`build.xml`通过在文件中使用以下代码块

```
<propertyfile file="default.properties" comment="Default properties">
   <entry key="source.dir" value="1" />
   <entry key="dir.publish" value="1" />
   <entry key="dir.publish.html" value="1" />
</propertyfile> 
```

我能够生成`default.properties`具有以下文件内容的文件

```
source.dir=1
dir.publish=1
dir.publish.html=1 
```

我想知道如何在生成的文件中添加我的评论？例如生成的属性应该有以下内容：

```
# Default Configuration
source.dir=1
dir.publish=1
# Source Configuration
dir.publish.html=1 
```

如何使用 Ant 动态执行此操作`build.xml`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T14:00:21.673

属性文件任务用于*编辑*属性文件。它包含各种不错的功能，可让您修改条目。例如：

```
<propertyfile file="build.properties">
    <entry key="build_number"
        type="int"
        operation="+"
        value="1"/>
</propertyfile> 
```

我把我的加`build_number`了一个。我不知道值是多少，但现在比以前大一。

*   使用`<echo>`任务来构建属性文件，而不是`<propertyfile>`. 您可以轻松地布局内容，然后用于`<propertyfile>`稍后编辑该内容。

例子：

```
<echo file="build.properties">
# Default Configuration
source.dir=1
dir.publish=1
# Source Configuration
dir.publish.html=1
</echo> 
```

*   为每个部分创建单独的属性文件。您可以为每种类型添加一个注释标题。然后，使用将它们批处理到一个文件中：

例子：

```
<propertyfile file="default.properties"
    comment="Default Configuration">
    <entry key="source.dir" value="1"/>
    <entry key="dir.publish" value="1"/>
<propertyfile>

<propertyfile file="source.properties"
    comment="Source Configuration">
    <entry key="dir.publish.html" value="1"/>
<propertyfile>
<concat destfile="build.properties">
    <fileset dir="${basedir}">
        <include name="default.properties"/>
        <include name="source.properties"/>
    </fileset>
</concat>

<delete>
    <fileset dir="${basedir}">
         <include name="default.properties"/>
        <include name="source.properties"/>
    </fileset>
</delete> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-10T12:05:30.747

不支持编写具有多个注释的属性文件。为什么 ？

**属性文件.java**

```
public class PropertyFile extends Task {

    /* ========================================================================
     *
     * Instance variables.
     */

    // Use this to prepend a message to the properties file
    private String              comment;

    private Properties          properties; 
```

ant 属性文件任务由一个使用[store()](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html#store%28java.io.OutputStream,%20java.lang.String%29)方法`java.util.Properties`存储注释的类支持。仅从任务中获取一条注释并将其传递给类以保存到文件中。`Properties`

[解决这个问题的方法是编写由公共属性](http://commons.apache.org/proper/commons-configuration/howto_properties.html)支持的自己的任务，而不是`java.util.Properties`. 公共属性文件由[属性布局](http://commons.apache.org/proper/commons-configuration/apidocs/org/apache/commons/configuration/PropertiesConfiguration.html#getLayout%28%29)支持，该布局允许对属性文件中的[各个键进行设置注释](http://commons.apache.org/proper/commons-configuration/apidocs/org/apache/commons/configuration/PropertiesConfigurationLayout.html#setComment%28java.lang.String,%20java.lang.String%29)。[使用save()](http://commons.apache.org/proper/commons-configuration/apidocs/org/apache/commons/configuration/PropertiesConfiguration.html#save%28java.io.Writer%29)方法保存属性文件并修改新任务以通过`<comment>`元素接受多个注释 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T11:28:15.243

根据任务的[文档](http://ant.apache.org/manual/Tasks/propertyfile.html)，`PropertyFile`您可以将生成的属性附加到现有文件中。您可以拥有一个仅包含注释行的属性文件，并让 Ant 任务附加生成的属性。

# .net - 异步线程.Sleep()

> ID：15924221
> 
> 赞同：32
> 
> 时间：2013-04-10T11:11:16.590
> 
> 标签：.net, multithreading

我想在两个操作之间延迟而不让线程忙

```
 workA();
 Thread.Sleep(1000);
 workB(); 
```

线程必须在 workA 之后退出并在延迟一段时间后执行 workB（可能在新线程中）。

我想知道是否有可能与此伪代码等效

```
workA();
Thread.BeginSleep(1000, workB); // callback 
```

编辑我的程序在 .NET 2.0 中

编辑 2：System.Timers.Timer.Elapsed 事件将在 1000 毫秒后引发事件。我不知道计时器线程是否会忙 1000 毫秒。（所以我没有获得线程经济）

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-04-10T11:12:26.257

你的意思是：

```
Task.Delay(1000).ContinueWith(t => workB()); 
```

`Timer`或者，手动创建一个。

`async`请注意，这在代码中看起来更漂亮：

```
async Task Foo() {
    workA();
    await Task.Delay(1000);
    workB();
} 
```

编辑：随着您的 .NET 2.0 更新，您必须设置自己`Timer`的回调。有一个 nuget 包[System.Threading.Tasks](http://nuget.org/packages/System.Threading.Tasks/3.0.1)可以将`Task`API 降低到 .NET 3.5，但是 a：它不会转到 2.0，并且 b：我认为它不包含`Task.Delay`.

# javascript - 在纵向模式下关闭缩放

> ID：15924229
> 
> 赞同：0
> 
> 时间：2013-04-10T11:11:34.847
> 
> 标签：javascript, ipad

您好，我正在使用此缩放 javascript 代码来缩放我的 div，具体取决于屏幕尺寸它可以完美运行，但我想要它，所以当我将 ipad 设置为纵向模式时，它会停止缩放脚本的工作。这是脚本。

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript" language="javascript">

var minW = 1800;

$(function () {
CheckSizeZoom()
$('#divWrap').css('visibility', 'visible');
});
$(window).resize(CheckSizeZoom)

function CheckSizeZoom() {
if ($(window).width() < minW) {
var zoomLev = $(window).width() / minW;

if (typeof (document.body.style.zoom) != "undefined") {
$(document.body).css('zoom', zoomLev);
}
else {
// Mozilla doesn't support zoom, use -moz-transform to scale and compensate for lost width
$('#divWrap').css('-moz-transform', "scale(" + zoomLev + ")");
$('#divWrap').width($(window).width() / zoomLev + 10);
$('#divWrap').css('position', 'relative');
$('#divWrap').css('left', (($(window).width() - minW - 16) / 2) + "px");
$('#divWrap').css('top', "-19px");
$('#divWrap').css('position', 'relative');
}
}
else {
$(document.body).css('zoom', '');
$('#divWrap').css('position', '');
$('#divWrap').css('left', "");
$('#divWrap').css('top', "");
$('#divWrap').css('-moz-transform', "");
$('#divWrap').width("");
}
}
</script> 
```

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:21:23.217

检查是否`$(window).width()`确定`$(window).height()`设备方向。

另一个技巧是像这样链接你的 jQuery 调用`$('#divWrap').css('position', '').css('left', '').css('top', '');`以获得更好的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:33:36.797

检测纵向模式 WDever 已经给出了正确答案。然而，在这种情况下，我不鼓励使用 .css() 函数的两种方式中的任何一种。您可以将对象传递给此函数，例如：

```
$('#divWrap').css({
    position: '',
    left: '',
    top: ''
}); 
```

这样你就可以保持你的代码干净、简短并且易于阅读。

# python - 如何，何时以及在 python 中矢量化什么？

> ID：15924233
> 
> 赞同：5
> 
> 时间：2013-04-10T11:11:48.627
> 
> 标签：python, c, numpy, latitude-longitude, cython

是的，所以这基本上是我之前的问题的后续。我有一些浮点二进制格式的二进制数据。使用 C，这个过程***很快***，但我失去了 atof() 的一些精度。我尝试浏览论坛以及其他地方，但我的问题没有解决。因此，我转向了 python。啊快乐！该程序运行良好，但与 C 相比***非常慢***。我在 python 上查找了优化，这将我指向 Cython 和 Weave，但我有一些疑问。如果您遵循我的代码，我很困惑在哪里应用优化的 C 代码，因为我是从 numpy 对象中读取的。我的问题，是否可以使用 Cython 中的 numpy 函数读取数据，如果可以，请提供一个小例子。

*C 代码使用 PolSARpro 的头文件和 libbmp 来创建 .bmp 文件*

作为说明，我发布了我的两个代码。上帝知道我必须经历很多才能让公式起作用。这样，其他有需要的人也可以提出他们的想法和意见:)

C 代码（工作，但 atof() 失去精度，因此输出 lat long 略有偏差）

* * *

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <math.h>
#include <polSARpro/bmpfile.c>
#include <polSARpro/graphics.c>
#include <polSARpro/matrix.c>
#include <polSARpro/processing.c>
#include <polSARpro/util.c>
#define METAL_THRESHOLD 5.000000
#define POLARIZATION_FRACTION_THRESHOLD 0.900000
#define PI 3.14159265
#define FOURTHPI PI/4
#define deg2rad PI/180
#define rad2deg 180./PI

/*double PI = 3.14159265;
double FOURTHPI = PI / 4;
double deg2rad = PI / 180;
double rad2deg = 180.0 / PI;*/

FILE *L1,*PF,*SPF;
FILE *txt;
FILE *finalLocations;
long i=0,loop_end;
int lig,col;
float l1,pf,spf;
long pos;
int Nlig,Ncol;

float *bufferout;
float *bufferin_L1,*bufferin_L2;
float valueL1,valuePF,xx;
float sizeGridX, sizeGridY, startX, startY;
float posX,posY;
int ZONE;
char Heading[10];
char setZone[15];

int p[4][2];

int degree, minute, second;

void UTM2LL(int ReferenceEllipsoid, double UTMNorthing, double UTMEasting, char* UTMZone, double *Lat, double *Long)
{
//converts UTM coords to lat/long.  Equations from USGS Bulletin 1532
//East Longitudes are positive, West longitudes are negative.
//North latitudes are positive, South latitudes are negative
//Lat and Long are in decimal degrees.
    //Written by Chuck Gantz- chuck.gantz@globalstar.com

    double k0 = 0.9996;
    double a = 6378137;
    double eccSquared =  0.00669438;
    double eccPrimeSquared;
    double e1 = (1-sqrt(1-eccSquared))/(1+sqrt(1-eccSquared));
    double N1, T1, C1, R1, D, M;
    double LongOrigin;
    double mu, phi1, phi1Rad;
    double x, y;
    int ZoneNumber;
    char* ZoneLetter;
    int NorthernHemisphere; //1 for northern hemispher, 0 for southern

    x = UTMEasting - 500000.0; //remove 500,000 meter offset for longitude
    y = UTMNorthing;

    ZoneNumber = strtoul(UTMZone, &ZoneLetter, 10);
    if((*ZoneLetter - 'N') >= 0)
        NorthernHemisphere = 1;//point is in northern hemisphere
    else
    {
        NorthernHemisphere = 0;//point is in southern hemisphere
        y -= 10000000.0;//remove 10,000,000 meter offset used for southern hemisphere
    }

    LongOrigin = (ZoneNumber - 1)*6 - 180 + 3;  //+3 puts origin in middle of zone

    eccPrimeSquared = (eccSquared)/(1-eccSquared);

    M = y / k0;
    mu = M/(a*(1-eccSquared/4-3*eccSquared*eccSquared/64-5*eccSquared*eccSquared*eccSquared/256));

    phi1Rad = mu    + (3*e1/2-27*e1*e1*e1/32)*sin(2*mu)
                + (21*e1*e1/16-55*e1*e1*e1*e1/32)*sin(4*mu)
                +(151*e1*e1*e1/96)*sin(6*mu);
    phi1 = phi1Rad*rad2deg;

    N1 = a/sqrt(1-eccSquared*sin(phi1Rad)*sin(phi1Rad));
    T1 = tan(phi1Rad)*tan(phi1Rad);
    C1 = eccPrimeSquared*cos(phi1Rad)*cos(phi1Rad);
    R1 = a*(1-eccSquared)/pow(1-eccSquared*sin(phi1Rad)*sin(phi1Rad), 1.5);
    D = x/(N1*k0);

    *Lat = phi1Rad - (N1*tan(phi1Rad)/R1)*(D*D/2-(5+3*T1+10*C1-4*C1*C1-9*eccPrimeSquared)*D*D*D*D/24
                    +(61+90*T1+298*C1+45*T1*T1-252*eccPrimeSquared-3*C1*C1)*D*D*D*D*D*D/720);
    *Lat = *Lat * rad2deg;

    *Long = (D-(1+2*T1+C1)*D*D*D/6+(5-2*C1+28*T1-3*C1*C1+8*eccPrimeSquared+24*T1*T1)
                    *D*D*D*D*D/120)/cos(phi1Rad);
    *Long = LongOrigin + *Long * rad2deg;
}

void convertToDegree(float decimal)
{
    int negative = decimal < 0;
    decimal = abs(decimal);
    minute = (decimal * 3600/ 60);
    second = fmodf((decimal * 3600),60);
    degree = minute / 60;
    minute = minute % 60;
    if (negative)
    {
        if (degree > 0)
            degree = -degree;
        else if (minute > 0)
            minute = -minute;
        else
            second = -second;
    }
}

void readConfig(int *Row, int *Col)
{
    char tmp[70];
    int i=0;
    FILE *fp = fopen("config.txt","r");
    if(fp == NULL)
    {
        perror("Config.txt");
        exit(1);
    }
    while(!feof(fp))
    {
        fgets(tmp,70,fp);
        if (i==1)
            *Row = atoi(tmp);
        if(i==4)
            *Col = atoi(tmp);
        i++;
    }
    fclose(fp);
}

void readHDR(float *gridX,float *gridY,float *startXPos,float *startYPos)
{
    FILE *fp = fopen("PF.bin.hdr","r");
    int i=0;
    char tmp[255];
    char junk[255];
    memset(tmp,0X00,sizeof(tmp));
    memset(junk,0X00,sizeof(junk));
    if(fp==NULL)
    {
        perror("Please locate or create PF.bin.hdr");
        exit(0);
    }
    while(!feof(fp))
    {
        if(i==13)
            break;
        fgets(tmp,255,fp);
        i++;
    }
    fclose(fp);

    strcpy(junk,strtok(tmp,","));
    strtok(NULL,",");
    strtok(NULL,",");
    strcpy(tmp,strtok(NULL,","));
    //puts(tmp);
    *startXPos = atof(tmp);
    strcpy(tmp,strtok(NULL,","));
    //puts(tmp);
    *startYPos = atof(tmp);
    strcpy(tmp,strtok(NULL,","));
    //puts(tmp);
    *gridX = atof(tmp);
    strcpy(tmp,strtok(NULL,","));
    //puts(tmp);
    *gridY = atof(tmp);
    strcpy(tmp,strtok(NULL,","));
    ZONE = atoi(tmp);
    strcpy(tmp,strtok(NULL,","));
    strcpy(Heading,tmp);
}

int main()
{
    bmpfile_t *bmp;
    double Lat;
    double Long;
    int i;
    rgb_pixel_t pixelMetal = {128, 64, 0, 0};
    rgb_pixel_t pixelOthers = {128, 64, 0, 0};
    readConfig(&Nlig,&Ncol);
    readHDR(&sizeGridX,&sizeGridY,&startX,&startY);
    //startX = startX - (double) 0.012000;
    //startY = startY + (double)0.111000;
    printf("Enter the rectangle's top-left and bottom-right region of interest points as: x y\n");
    for(i=0;i<2;i++)
    {
        printf("Enter point %d::\t",i+1);
        scanf("%d %d",&p[i][0], &p[i][1]);
    }
    printf("Grid Size(X,Y)::( %f,%f ), Start Positions(X,Y)::( %f, %f ), ZONE::%d, Heading:: %s\n\n",sizeGridX,sizeGridY,startX,startY,ZONE,Heading);
    pixelMetal.red = 255;
    pixelMetal.blue = 010;
    pixelMetal.green = 010;
    pixelOthers.red = 8;
    pixelOthers.blue = 8;
    pixelOthers.green = 8;
    L1 = fopen("l1.bin","rb");
    PF =fopen("PF.bin","rb");
    SPF = fopen("SPF_L1.bin","wb");
    //txt = fopen("locations(UTM).txt","w");
    finalLocations = fopen("locationsROI.txt","w");
    if(L1==NULL || PF==NULL || SPF==NULL || finalLocations == NULL)
    {
        perror("Error in opening files!");
        return -1;
    }
    fseek(L1,0,SEEK_END);
    pos = ftell(L1);
    loop_end = pos;
    printf("L1.bin contains::\t%ld elements\n",pos);
    fseek(PF,0,SEEK_END);
    pos = ftell(PF);
    printf("PF.bin contains::\t%ld elements\n",pos);
    fseek(L1,0,SEEK_SET);
    fseek(PF,0,SEEK_SET);
    bmp = bmp_create(Ncol,Nlig,8); //width * height
    bufferin_L1 = vector_float(Ncol);
    bufferin_L2 = vector_float(Ncol);
    bufferout = vector_float(Ncol);
    printf("Resources Allocated. Beginning...\n");
    for (lig = 0; lig < Nlig; lig++) /* rows */
    {
        if (lig%(int)(Nlig/20) == 0)
        {
            printf("%f\r", 100\. * lig / (Nlig - 1));
            fflush(stdout);
        }
        fread(&bufferin_L1[0], sizeof(float), Ncol, L1);
        fread(&bufferin_L2[0], sizeof(float), Ncol, PF);
        for (col = 0; col < Ncol; col++) /* columns */
        {
            valueL1 = bufferin_L1[col];
            valuePF = bufferin_L2[col];
            if(valueL1 >= METAL_THRESHOLD && valuePF >= POLARIZATION_FRACTION_THRESHOLD)
            {
                if(col >= p[0][0] && col <= p[1][0] && lig >= p[0][1] && lig <= p[1][1])
                {
                    xx = fabs(valueL1 + valuePF);
                    bmp_set_pixel(bmp,col,lig,pixelMetal);
                    posX = startX + (sizeGridX * col);
                    posY = startY - (sizeGridY * lig);
                    //fprintf(txt,"%f %f %d %s\n",posX,posY,ZONE,Heading);
                    sprintf(setZone,"%d",ZONE);
                    if(strstr(Heading,"Nor")!=NULL)
                        strcat(setZone,"N");
                    else
                        strcat(setZone,"S");
                    UTM2LL(23, posY, posX, setZone, &Lat, &Long); // 23 for WGS-84
                    convertToDegree(Lat);
                    //fprintf(finalLocations,"UTM:: %.2fE %.2fN , Decimal: %f %f , Degree: %d %d %d, ",posX,posY,Lat,Long,degree,minute,second);
                    //fprintf(finalLocations,"%.2fE,%.2fN,%f,%f ,%d,%d,%d,",posX,posY,Lat,Long,degree,minute,second);
                    fprintf(finalLocations,"%.2f,%.2f,%f,%f ,%d,%d,%d,",posX,posY,Lat,Long,degree,minute,second);
                    convertToDegree(Long);
                    fprintf(finalLocations,"%d,%d,%d\n",degree,minute,second);
                }
                else
                {
                    xx = fabs(valueL1) ;
                    bmp_set_pixel(bmp,col,lig,pixelOthers);
                }
            }
            else
            {
                xx = fabs(valueL1) ;
                bmp_set_pixel(bmp,col,lig,pixelOthers);
            }
            bufferout[col] = xx;
        }
        fwrite(&bufferout[0], sizeof(float), Ncol, SPF);
    }
    free_vector_float(bufferout);
    fclose(L1);
    fclose(PF);
    fclose(SPF);
    //fclose(txt);
    fclose(finalLocations);
    printf("\n----------Writing BMP File!----------\n");
    bmp_save(bmp,"SPF_L1(ROI).bmp");
    bmp_destroy(bmp);
    printf("\nDone!\n");
} 
```

* * *

以及 Python 代码::

* * *

```
# -*- coding: utf-8 -*-
"""
Created on Wed Apr 10 10:29:18 2013

@author: Binayaka
"""
import numpy as Num;
import math;
import array;

class readConfiguration(object):  

    def __init__(self,x):
        self.readConfig(x);

    def readConfig(self,x):
        try:
            crs = open(x,'r');
            srs = open('config.txt','r');
        except IOError:
            print "Files missing!";
        else:
            rows = crs.readlines();                
            values = rows[12].split(',');
            rows = srs.readlines();                
            self.startX = float(values[3]);
            self.startY = float(values[4]);
            self.gridSizeX = float(values[5]);
            self.gridSizeY = float(values[6]);
            self.Zone = int(values[7]);
            self.Hemisphere = values[8];
            self.NRows = int(rows[1].strip());
            self.NCols = int(rows[4].strip());
            self.MetalThreshold = 5.000000;
            self.PFThreshold = 0.900000;
            self.rad2deg = 180/math.pi;
            self.deg2rad = math.pi/180;
            self.FOURTHPI = math.pi/4;
            crs.close();
            srs.close();

    def decdeg2dms(dd):
        negative = dd < 0;
        dd = abs(dd);
        minutes,seconds = divmod(dd*3600,60);
        degrees,minutes = divmod(minutes,60);
        if negative:
            if degrees > 0:
                degrees = -degrees;
            elif minutes > 0:
                    minutes = -minutes;
        else:
            seconds = -seconds;
        return (degrees,minutes,seconds);

    def UTM2LL(self,UTMEasting, UTMNorthing):
        k0 = 0.9996;
        a = 6378137;
        eccSquared =  0.00669438;
        e1 = (1-math.sqrt(1-eccSquared))/(1+math.sqrt(1-eccSquared));
        x = UTMEasting - 500000.0;#remove 500,000 meter offset for longitude
        y = UTMNorthing;
        if self.Hemisphere == "North":
            self.Hemi = 1;
        else:
            self.Hemi = -1;
            y -= 10000000.0;
        LongOrigin = (self.Zone - 1)*6 - 180 + 3;
        eccPrimeSquared = (eccSquared)/(1-eccSquared);
        M = y / k0;
        mu = M/(a*(1-eccSquared/4-3*eccSquared*eccSquared/64-5*eccSquared*eccSquared*eccSquared/256));
        phi1Rad = mu    + (3*e1/2-27*e1*e1*e1/32)*math.sin(2*mu) + (21*e1*e1/16-55*e1*e1*e1*e1/32)*math.sin(4*mu) +(151*e1*e1*e1/96)*math.sin(6*mu);
        #phi1 = phi1Rad*self.rad2deg;
        N1 = a/math.sqrt(1-eccSquared*math.sin(phi1Rad)*math.sin(phi1Rad));
        T1 = math.tan(phi1Rad)*math.tan(phi1Rad);
        C1 = eccPrimeSquared*math.cos(phi1Rad)*math.cos(phi1Rad);
        R1 = a*(1-eccSquared)/pow(1-eccSquared*math.sin(phi1Rad)*math.sin(phi1Rad), 1.5);
        D = x/(N1*k0);
        self.Lat = phi1Rad - (N1*math.tan(phi1Rad)/R1)*(D*D/2-(5+3*T1+10*C1-4*C1*C1-9*eccPrimeSquared)*D*D*D*D/24   +(61+90*T1+298*C1+45*T1*T1-252*eccPrimeSquared-3*C1*C1)*D*D*D*D*D*D/720);
        self.Lat = self.Lat * self.rad2deg;
        self.Long = (D-(1+2*T1+C1)*D*D*D/6+(5-2*C1+28*T1-3*C1*C1+8*eccPrimeSquared+24*T1*T1)*D*D*D*D*D/120)/math.cos(phi1Rad);
        self.Long = LongOrigin + self.Long * self.rad2deg;   

    def printConfiguration(self):        
        """ Just to check whether our reading was correct """
        print "Metal Threshold:\t" + str(self.MetalThreshold);        
        print "PF    Threshold:\t" + str(self.PFThreshold);
        print "Start         X:\t" + str(self.startX);
        print "Start         Y:\t" + str(self.startY);
        print "Grid size(X)   :\t" + str(self.gridSizeX);
        print "Grid size(Y)   :\t" + str(self.gridSizeY);

    def createROIfile(self,ROIFilename):
        firstPoint = raw_input('Enter topLeft point coord\t').split();
        secondPoint = raw_input('Enter bottomRight point coord\t').split();
        try:
            L1 = open('l1.bin','rb');
            PF = open('PF.bin','rb');
            SPF = open('pySPF_L1.bin','wb');
            targetFilename = open(ROIFilename,'w');
        except IOError:
            print "Files Missing!";
        else:
            L1.seek(0,2);
            elementsL1 = L1.tell();
            L1.seek(0,0);
            PF.seek(0,2);
            elementsPF = PF.tell();
            PF.seek(0,0);
            print "L1.bin contains\t" + str(elementsL1) + " elements";
            print "PF.bin contains\t" + str(elementsPF) + " elements";
            binvaluesL1 = array.array('f');
            binvaluesPF = array.array('f');
            binvaluesSPF = array.array('f');            
            for row in range(0,self.NRows):                                
                binvaluesL1.read(L1,self.NCols);
                binvaluesPF.read(PF,self.NCols);
                dataL1 = Num.array(binvaluesL1, dtype=Num.float);
                dataPF = Num.array(binvaluesPF, dtype=Num.float);
                dataSPF = dataL1 + dataPF;
                binvaluesSPF.fromlist(Num.array(dataSPF).tolist());                                
                for col in range(0,self.NCols):                     
                    if(dataL1[col] >= self.MetalThreshold and dataPF[col] >= self.PFThreshold):
                        if(col >= int(firstPoint[0]) and col <= int(secondPoint[0]) and row >= int(firstPoint[1]) and row <= int(secondPoint[1])):
                            posX = self.startX + (self.gridSizeX * col);                         
                            posY = self.startY - (self.gridSizeY * row);
                            self.UTM2LL(posY,posX);
                            tmp1 = self.decdeg2dms(posY);
                            tmp2 = self.decdeg2dms(posX);
                            strTarget = "Decimal Degree:: " + str(posX) + "E " + str(posY) + "N \t Lat long:: " + str(tmp1) + " " + str(tmp2) + "\n";
                            targetFilename.write(strTarget);
                binvaluesSPF.tofile(SPF);
            L1.close();
            PF.close();
            SPF.close();
            targetFilename.close();
            print "Done!";

dimensions = readConfiguration('PF.bin.hdr');
dimensions.printConfiguration();
dimensions.createROIfile('testPythonROI.txt'); 
```

* * *

它是需要优化的 Python 代码，因为 NRows 和 NCols 的值可以并且确实达到数千个数量级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T02:39:58.290

一些一般性评论：

1.  使用 python，出于多种原因，最好坚持使用[PEP8 。](http://www.python.org/dev/peps/pep-0008/)Python 程序员对可读性特别挑剔，并且基本上普遍遵守社区编码指南 (PEP8)。避免使用驼峰式，将行数保持在 80 列以下，不使用分号，并且偶尔忽略这些会降低可读性的指南。

2.  `array`如果您使用的是 numpy，则此处不需要内置类型。我很困惑为什么你不断地来回转换......

3.  使用投影库。指定您使用的基准面和椭球体，否则坐标（东/北或纬度/经度）绝对没有意义。

4.  不要将一个大类用作无关事物的包罗万象。仅仅拥有几个功能并没有错。除非这样做有意义，否则您无需将其纳入课程。

5.  对 numpy 数组使用矢量化操作。

这似乎是您的性能瓶颈：

```
 for row in range(0,self.NRows):                                
        binvaluesL1.read(L1,self.NCols);
        binvaluesPF.read(PF,self.NCols);
        dataL1 = Num.array(binvaluesL1, dtype=Num.float);
        dataPF = Num.array(binvaluesPF, dtype=Num.float);
        dataSPF = dataL1 + dataPF;
        binvaluesSPF.fromlist(Num.array(dataSPF).tolist());                                
        for col in range(0,self.NCols):                     
            if(dataL1[col] >= self.MetalThreshold and dataPF[col] >= self.PFThreshold):
                if(col >= int(firstPoint[0]) and col <= int(secondPoint[0]) and row >= int(firstPoint[1]) and row <= int(secondPoint[1])):
                    posX = self.startX + (self.gridSizeX * col);                         
                    posY = self.startY - (self.gridSizeY * row);
                    self.UTM2LL(posY,posX);
                    tmp1 = self.decdeg2dms(posY);
                    tmp2 = self.decdeg2dms(posX);
                    strTarget = "Decimal Degree:: " + str(posX) + "E " + str(posY) + "N \t Lat long:: " + str(tmp1) + " " + str(tmp2) + "\n";
                    targetFilename.write(strTarget);
        binvaluesSPF.tofile(SPF); 
```

您最大的问题之一是您读取数据的方式。你不断地把东西当作一件事来读，然后把它转换成一个列表，然后把它转换成一个 numpy 数组。绝对没有必要跳过所有这些障碍。Numpy 会像您一样为您解压缩二进制浮点数`array`。

做吧`grid = np.fromfile(yourfile, dtype=np.float32).reshape(ncols, nrows)`。（在循环之外。）

之后，您的嵌套循环只需几行代码即可轻松矢量化和表达。

以下是我将如何编写您的代码。这可能不会按原样运行，因为我无法使用您的数据对其进行测试。但是，它应该给你一些一般的想法。

```
import numpy as np
import pyproj

def main():
    config = Config('PF.bin.hdr')
    grid1, grid2 = load_data('l1.bin', 'PF.bin', config.nrows, config.ncols)

    spf = grid1 + grid2
    spf.tofile('pySPF_L1.bin')

    easting_aoi, northing_aoi = subset_data(grid1, grid2, config)
    save_selected_region(easting_aoi, northing_aoi, config.zone, 
                        'testPythonROI.txt')

def load_data(filename1, filename2, nrows, ncols):
    """It would really be good to use more descriptive variable names than "L1"
    and "PF".  I have no idea what L1 and PF are, so I'm just calling them
    grid1 and grid2."""
    grid1 = np.fromfile(filename1, dtype=np.float32).reshape(nrows, ncols)
    grid2 = np.fromfile(filename2, dtype=np.float32).reshape(nrows, ncols)
    return grid1, grid2

def subset_data(grid1, grid2, config):
    """Select points that satisfy some threshold criteria (explain??) and are
    within a user-specified rectangular AOI."""
    northing, easting = np.mgrid[:config.nrows, :config.ncols]
    easting = config.xstart + config.xgridsize * easting
    northing = config.ystart + config.ygridsize * northing

    grids = grid1, grid2, easting, northing
    grid1, grid2, easting, northing = [item[config.user_aoi] for item in grids]

    mask = (grid1 >= config.metal_threshold) & (grid2 >= config.pf_threshold)
    return easting[mask], northing[mask]

def save_selected_region(easting, northing, zone, filename):
    """Convert the given eastings and northings (in UTM zone "zone") to 
    lat/long and save to a tab-delimited-text file."""
    lat, lon = utm2geographic(easting, northing, zone)
    data = np.vstack([easting, northing, lat, lon]).T
    with open(filename, 'w') as outfile:
        outfile.write('Easting\tNorthing\tLatitude\tLongitude\n')
        np.savetxt(outfile, data, delimiter='\t')

def utm2geographic(easting, northing, zone):
    """We need to know which datum/ellipsoid the UTM coords are in as well!!!!
    I'm assuming it's a Clark 1866 ellipsoid, based on the numbers in your
    code..."""
    utm = pyproj.Proj(proj='utm', zone=zone, ellip='clrk66')
    geographic = pyproj.Proj(proj='latlong', ellip='clrk66')
    return pyproj.transform(utm, geographic, easting, northing)

class Config(object):
    """Read and store configuration values for (something?)."""
    config_file = 'config.txt'
    def __init__(self, filename):
        """You should add docstrings to clarify what you're expecting 
        "filename" to contain."""
        with open(filename, 'r') as infile:
            crs_values = list(infile)[12].split(',')
        crs_values = [float(item) for item in crs_values]
        self.xstart, self.ystart = crs_values[3:5]
        self.xgridsize, self.ygridsize = crs_values[5:7]
        self.zone = int(crs_values[7])

        with open(self.config_file, 'r') as infile:
            srs_values = list(infile)
        self.nrows, self.ncols = srs_values[1], srs_values[4]

        # It would be good to explain a bit about these (say, units, etc)
        self.metal_threshold = 5.0
        self.pf_threshold = 0.9

        self.user_aoi = self.read_user_aoi()

    def read_user_aoi(self):
        """Get an area of interest of the grids in pixel coordinates."""
        top_left = raw_input('Enter top left index\t')
        bottom_right = raw_input('Enter bottom right index\t')
        min_i, min_j = [int(item) for item in top_left.split()]
        max_i, max_j = [int(item) for item in bottom_right.split()]
        return slice(min_i, max_i), slice(min_j, max_j)

if __name__ == '__main__':
    main() 
```

# gmail - 任何体面的 IMAP 文档或教程或示例？

> ID：15924238
> 
> 赞同：1
> 
> 时间：2013-04-10T11:11:57.653
> 
> 标签：gmail, imap

是否有关于如何在 IMAP 中导航的好教程？例如，您如何从 gmail 收件箱中获取 20 条最新消息？

我正在尝试使用排序，但 GMail 服务器似乎不支持此命令。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T12:17:39.637

没有什么比阅读 RFC ( [RFC3501](https://www.rfc-editor.org/rfc/rfc3501) ) 更好的了。这听起来可能很重要，但 IMAP 确实是一个复杂的协议，并且 RFC 解释了所有规则。从那里，只需输入原始命令即可获得实践经验。您可以使用 telnet 在非 SSL 系统上乱搞。对于 Gmail，您需要像我的[IMAPTalk](http://gigi.nullneuron.net/gigilabs/projects/imaptalk/)客户端这样的东西。

您可以通过首先找出文件夹中最高的消息序列号来获取最近的 20 条消息，如下所示：

```
FETCH * (UID) 
```

这将为您提供括号中的 UID，但响应将在开头包含序列号。

然后，只需从该值中减去 20。例如，如果最高序列号是 88，那么就做

```
FETCH 68:* (BODY[]) 
```

这将检索消息。

# jsf - 如何在 portlet 中使用 HTTP 会话范围？

> ID：15924244
> 
> 赞同：0
> 
> 时间：2013-04-10T11:12:19.530
> 
> 标签：jsf, jsf-2

在我的应用程序中，有 5 个 portlet 访问会话范围内的同一个 bean 类。我的问题是，每当我打开一个 portlet 时，托管 bean 都会初始化。托管 bean 应该在会话中初始化一次。在我的例子中，bean 初始化了 5 次。谁能告诉我这个问题的根本原因是什么？

这是我的豆子：

```
@ManagedBean(name="userManagementBean")
@SessionScoped
public class UserManagementBean {

public UserManagementBean() {

    System.out.println("In getter setter bean");

    sName=userManagementHelper.findScreenName();  

    directReport=new DualListModel<String>();
    addUserToGroupDual=new DualListModel<String>();
    addUserToGroupDual.getSource().clear();
    addUserToGroupDual.getTarget().clear();
            ............ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:26:29.943

当您`@SessionScoped`在 Portlet 应用程序中注释您的 bean 时，它被映射到“Portlet Instance Session”之类的东西。这意味着这个 bean 将存在于该 portlet 的会话中，并且每个 portlet 都有自己的会话。有一种叫做“全局会话”的东西，它是所有 portlet 之间共享的会话，但据我所知，JSF 中没有这样的注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:05:05.643

JSR286 具有基于用户会话的作用域，但它取决于您的门户服务器是否将其实现为 JSF 的自定义作用域。

我确信 Websphere 门户 8.x 支持这一点。

在 Websphere 门户 8.x 中，您可以指定托管 bean，例如，

```
@ManagedBean(name="userManagementBean")
@CustomScoped("#{portletApplicationSessionScope}")
public class UserManagementBean {

...

} 
```

查看您的门户服务器文档，看看它是否支持。

您可以使用**Apache JSF portlet bridge**，因为您已更新您正在使用 liferay ，

它将应用程序会话范围公开为 EL，

将其添加到 portlet A 中的应用程序范围

```
PortletSession session = request.getPortletSession();
session.setAttribute("name",name.getValue().toString(),PortletSession.APPLICATION_SCOPE); 
```

并在 portlet B 中使用

```
PortletSession session = request.getPortletSession();
String value = session.getAttribute("name", PortletSession.APPLICATION_SCOPE).toString(); 
```

你的 xhtml ,

```
<h:inputText id="itName" 
                required="true" 
                value="#{httpSessionScope.name}"/> 
```

# php - 返回时间比日期晚 3 小时（'l dS \o\f FY h:i:s A'）

> ID：15924245
> 
> 赞同：0
> 
> 时间：2013-04-10T11:12:20.413
> 
> 标签：php, xampp

这里 php 函数`date('l dS \o\f F Y h:i:s A')`返回的时间比我的系统时间晚 3 小时。为什么会发生这种情况，请任何人回答...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:22:07.697

也许您的时区设置不正确，请阅读：[php手册](http://www.php.net/manual/en/function.date-default-timezone-set.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:59:26.960

`date_default_timezone_set('');`通过在我的日期函数上方添加函数，我得到了正确的答案`date('l dS \o\f F Y h:i:s A');`

# android - 安装后 2 个活动导致 2 个图标

> ID：15924248
> 
> 赞同：2
> 
> 时间：2013-04-10T11:12:29.867
> 
> 标签：android, android-intent

我通过按下按钮连接了 2 个活动，但是当我安装应用程序时，我得到了 2 个图标。

活动一

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_street_light_activity); 
```

活动二

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.droid_mode); 
```

我分别为打开各自的 xml 文件的两个活动获得了两个图标

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T11:14:59.860

消除

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

在您的清单中来自不应有单独符号的活动。这个意图过滤器定义了你的应用程序可能的入口点，通常你应该只定义一个。

# prestashop - PrestaShop 创建客户

> ID：15924253
> 
> 赞同：5
> 
> 时间：2013-04-10T11:12:50.040
> 
> 标签：prestashop

我有这段代码，我试图在我的网站上使用 prestashop 模式创建一个新客户。但我在回复中不断收到错误

```
NSString *xmlPath = [[NSBundle mainBundle] pathForResource:@"Login" ofType:@"xml"];

    NSString *xmlStr = [[NSString alloc] initWithContentsOfFile:xmlPath encoding:NSUTF8StringEncoding error:nil];

     NSString *encodedurlstring = (__bridge NSString*) CFURLCreateStringByAddingPercentEscapes (NULL, (__bridge CFStringRef) xmlStr, NULL, (CFStringRef)@"!*'();:@&=+$,/?%#[]",kCFStringEncodingUTF8);

    NSString *urlStr = [NSString stringWithFormat:@"http://passkey:@farma-web.it/api/customers/?Xml=%@",encodedurlstring];

    NSURL *webURL = [NSURL URLWithString:urlStr];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:webURL];

    [request setHTTPMethod:@"POST"];
    [request setValue: @"text/xml" forHTTPHeaderField: @"Content-Type"];

    NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
    NSString *response = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

    NSLog(@"response - %@",response); 
```

我附上的 XML 是

```
<prestashop>

<customers>

<customer>**I DO NOT KNOW WHAT TO WRITE HERE**</customer>

<email>abc@abc.com</email>

<passwd>12344321</passwd>

<firstname>ABC</firstname>

<lastname>DEF</lastname>

</customers>

</prestashop> 
```

我得到的回应是

```
<?xml version="1.0" encoding="UTF-8"?>
<prestashop xmlns:xlink="http://www.w3.org/1999/xlink">
<errors>
<error>
<message><![CDATA[Internal error. To see this error please display the PHP errors.]]></message>
</error>
</errors>
</prestashop> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-15T01:24:12.553

我遇到了类似的问题，这是我在 prestashop 版本 1.6.0.9 上发现的：

1）正如@adrien-g 指出的那样，从更改`define('_PS_MODE_DEV_', false);`为define('_PS_MODE_DEV_', true); [http://doc.prestashop.com/display/PS16/Setting+Up+Your+Local+Development+Environment#SettingUpYourLocalDevelopmentEnvironment-Displayingerrormessages](http://doc.prestashop.com/display/PS16/Setting+Up+Your+Local+Development+Environment#SettingUpYourLocalDevelopmentEnvironment-Displayingerrormessages)

2) 接下来，您将开始看到更有意义的错误，例如使用此 CURL 命令模拟的错误：

```
$ curl -kv https://myprestashop.bitnamiapp.com/prestashop/api/customers?ws_key=secret -d '
<?xml version="1.0" encoding="UTF-8"?><customer><lastname>blue</lastname><firstname>boy</firstname><email>boy@blue.com</email></customer>'
... 
<message><![CDATA[parameter "passwd" required]]></message>
... 
```

3) 然后进行一些实验，例如添加`passwd`and`prestashop`标签，最终将引导您走上成功创建客户的道路：

```
$ curl -kv https://myprestashop.bitnamiapp.com/prestashop/api/customers?ws_key=secret -d '
<?xml version="1.0" encoding="UTF-8"?>
  <prestashop xmlns:xlink="http://www.w3.org/1999/xlink">
    <customer><lastname>blue</lastname><firstname>boy</firstname><email>boy@blue.com</email>
      <passwd>mysecret</passwd>
    </customer>
  </prestashop>'
... 
<?xml version="1.0" encoding="UTF-8"?>
<prestashop xmlns:xlink="http://www.w3.org/1999/xlink">
<customer><id><![CDATA[3]]></id>...</customer></prestashop>
... 
```

值得注意：

*   使用`<?xml ...><prestashop></prestashop>`与**xml=**`<?xml ...><prestashop></prestashop>`对我玩过的版本没有任何影响。
*   使用`<prestashop>`vs 对`<prestashop xmlns:xlink="http://www.w3.org/1999/xlink">`我玩过的版本没有任何影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T07:11:49.853

“客户”不是一个独立的字段，而是所有其他字段（如名字、姓氏、电子邮件等）的容器。

创建客户的最佳方法是检索空白表并用您的数据填充它：http: [//your-prestashop.com/api/customers ?schema=blank](http://your-prestashop.com/api/customers?schema=blank)

# php - Magento soap api登录失败使用PHP

> ID：15924254
> 
> 赞同：3
> 
> 时间：2013-04-10T11:12:50.570
> 
> 标签：php, magento, soap

我正在使用 magento soap api，它在我的本地机器和开发服务器上运行良好，但是当我将代码移动到生产服务器时，我发现以下错误：

**致命错误：未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR：解析 WSDL：无法从“ [http://www.mydomain.com/magento/index.php/api/soap/index/?wsdl=1](http://www.mydomain.com/magento/index.php/api/soap/index/?wsdl=1) ”加载：未能加载外部实体“ [http://www.mydomain.com/magento/index.php/api/soap/index/?wsdl=1](http://www.mydomain.com/magento/index.php/api/soap/index/?wsdl=1) ”堆栈跟踪：#0 [内部函数]：SoapClient->__call（'登录'，数组）#1**

我还检查了服务器上的 SOAP 设置，一切正常，但仍然出现此错误。

请帮我...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-04T04:18:47.067

我遇到了同样的问题。我使用了 V2 肥皂。因此，要创建 SoapClient，请尝试 .../api/v2_soap/?wsdl=1 希望这对您有所帮助。

# c++ - 模板类中的迭代器

> ID：15924264
> 
> 赞同：-1
> 
> 时间：2013-04-10T11:13:21.127
> 
> 标签：c++, templates, stl, iterator

我有以下模板类。

```
template <typename _Type, typename _Comparator = equal_to<_Type> >
class CSearch
{
...
}; 
```

它应该存储 STL 的东西，如列表、集合或字符串。我将所有元素（例如字符串）存储在私有类成员中：

```
map<int,_Type> seqs; 
```

现在我想使用迭代器，但是 <_Type>::const_iterator 有问题。

```
template <typename _Type, typename _Comparator>
void CSearch<_Type,_Comparator>::Foo1(int id, const _Type & needle)
{
seqs.insert(make_pair(id,needle));

for(_Type::const_iterator it=seqs[0].begin();it!=seqs[0].end();it++)
cout<<*it<<" ";

cout<<endl;
} 
```

或类比

```
 for(map<int,_Type>::const_iterator it=seqs.begin();it!=seqs.end();it++)
 cout<<*it<<" "; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:15:53.263

`<_Type>::const_iterator`是依赖类型。

而是将其称为`typename <_Type>::const_iterator`。

# php - php 函数 fgetcsv 不适用于行有 \""

> ID：15924267
> 
> 赞同：0
> 
> 时间：2013-04-10T11:13:27.823
> 
> 标签：php, csv, fgetcsv

我在phpmyadmin中有数据，例如：（第一行是标题）

```
||from||to||messages||

||john||andy||meeting now||

||dony||sherly||Place in \"Jakarta\" , Indonesia, 15412 
```

当我通过 phpmyadmin 3.5.6 版导出到 csv 时，我得到了这个 csv 文件：

```
"from","to","messages"

"john","andy","meeting now"

"from","to","Place in \""Jakarta\"" , Indonesia, 15412" 
```

如果我使用此代码

```
<?php
// code start 

$file = fopen($path, 'r');

while (($line = fgetcsv($file)) !== FALSE) {

print_r($line);

}

fclose($file);

// code end
?> 
```

我希望得到这个

```
//output start

Array

(

[0] => from

[1] => to

[2] => messages

)

Array

(

[0] => john

[1] => andy

[2] => meeting now

)

Array

(

[0] => dony

[1] => sherly

[2] => Place in \"Jakarta\" , Indonesia, 15412

)

//output end 
```

但相反我得到

```
//output start

Array

(

[0] => from

[1] => to

[2] => messages

)

Array

(

[0] => john

[1] => andy

[2] => meeting now

)

Array

(

[0] => from

[1] => to

[2] => Place in \"Jakarta\"" 

[3] =>  Indonesia

[4] =>  15412"

)

//output end 
```

任何人都可以帮助这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:18:01.283

你有双双引号。

```
"from","to","Place in \""Jakarta\"" , Indonesia, 15412" 
```

应该

```
"from","to","Place in \"Jakarta\" , Indonesia, 15412" 
```

# c++ - 双指针的另一种选择

> ID：15924268
> 
> 赞同：0
> 
> 时间：2013-04-10T11:13:31.550
> 
> 标签：c++, pointers, double-pointer

我怎样才能发送一个指向函数的指针？我的意思是，我想更改指针在该函数中指向的位置。

我已经为此看到了双指针，例如：

```
Abc* p;
function(&p);

function(Abc** p){
  (*p) = 0;
} 
```

但是，有人告诉我，这不是解决问题的最佳方法。怎么可能更好？这行得通吗？：

```
Abc* p;
function(p);

function(Abc* p){
  p = 0;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:14:59.290

不，那是行不通的。这会将 的值复制`p`到函数中，然后只修改该副本。

在 C++ 中通过引用传递某些内容的最合适方法是使用引用类型。它们在类型中用 & 符号表示。您可以参考指针：

```
Abc* p;
function(p);

void function(Abc*& p){
  p = 0;
} 
```

这意味着，即使您`p`直接传递，它也*不会*复制到函数中。`p`参数是对传入对象的*引用*。

# iphone - XMPP Server for iPhone 中的好友列表问题

> ID：15924273
> 
> 赞同：0
> 
> 时间：2013-04-10T11:13:37.707
> 
> 标签：iphone, ios, xmpp, xmppframework

我可以连接到本地服务器，也可以连接到 google talk 并在 iphone 聊天客户端上显示好友和聊天，但是当我尝试获取本地服务器的好友列表时，它返回 0。

```
- (void)xmppStream:(XMPPStream *)sender didReceivePresence:(XMPPPresence *)presence {

// a buddy went offline/online

NSString *presenceType = [presence type]; // online/offline
NSString *myUsername = [[sender myJID] user];
NSString *presenceFromUser = [[presence from] user];

if (![presenceFromUser isEqualToString:myUsername]) 
{

 if ([presenceType isEqualToString:@"available"]) {

 [_chatDelegate newBuddyOnline:[NSString stringWithFormat:@"%@@%@", presenceFromUser, @"ip address"]];

} else if ([presenceType isEqualToString:@"unavailable"]) {

 [_chatDelegate buddyWentOffline:[NSString stringWithFormat:@"%@@%@", presenceFromUser, @"ip address"]];

}

}
} 
```

这里的ip地址是我的服务器名请帮忙！

请帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T09:37:12.243

它只告诉你某人何时上线或下线，根据此代码，任何好友何时上线 委托方法“newBuddyOnline”将被触发，当某人下线时，委托方法“buddyWentOffline”将被触发。您可以通过在连接到 xmpp 流后在线时将好友添加到数组来获取所有好友的列表

# grails - Grails - 子类中的唯一约束

> ID：15924279
> 
> 赞同：2
> 
> 时间：2013-04-10T11:13:47.160
> 
> 标签：grails, constraints, unique

假设我的应用程序中有这两个类：

```
 class User 
{
    static belongsTo = [company: Company]
    Address address
    Phone phone
    String name
    Integer salary
    Date birthDate
} 
```

和

```
class Company {

Boolean active = false

static hasMany = [users: User]
} 
```

一些非常基本的东西。我想在用户字段的 Company 类中进行约束。我不会在同一家公司拥有两个具有相同姓名地址和电话的用户。

我应该能够为不同的公司添加具有这三个匹配字段的另一个用户。而且，名称是一个可为空的字段，因此我应该能够为同一个公司 ID 的名称为空的相同地址和电话拥有几条记录。

有人可以帮我定义这样的约束吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:55:21.673

看看这是否是您正在寻找的东西，但请确保首先保存您的公司。

```
Company.withTransaction {
    def compnay= new Company (active:true)
    company.save(flush:true)

    def user = new User (...)
    compnay.addToUsers(user)
} 
```

/

```
class User 
{
    static belongsTo = [company: Company]
    Address address
    Phone phone
    String name
    Integer salary
    Date birthDate

    static constraints = {
      name  unique: ['company','address','phone']
   }
} 
```

/

```
class Company {

Boolean active = false

static hasMany = [users: User]
} 
```

# jquery - 如何在 jquery asmselect 中设置选择限制？

> ID：15924283
> 
> 赞同：0
> 
> 时间：2013-04-10T11:13:56.910
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在使用 jquery asmselect。我想设置选择限制。我不知道该怎么做。请有人帮我解决我的问题。我的html代码

我的页面运行正常，但我想给出一个用户可以选择的限制 4。请帮我............

```
enter code here

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <script type="text/javascript" src="jquery-1.8.3.min.js"></script>
        <script type="text/javascript" src="jquery.js"></script>
        <link rel="stylesheet" type="text/css" href="jquery.asmselect.css" />
        <script type="text/javascript" src="jquery.asmselect.js"></script>
        <script type="text/javascript">
                $(document).ready(function()
                    {
                         $("select[multiple]").asmSelect({
                       addItemTarget: 'bottom',
                       animate: true,
                           highlight: true,
                           sortable: true
                           });
                      }); 
          </script>
    </head>
    <body>
           <form action="">
               <select multiple="multiple" name="city" id="citty">
            <option value=""  selected="selected">-Select City-</option>
        <option value="1">Anugul</option>
        <option value="2">Asika</option>
        <option value="3">Balangir</option>
        <option value="4">Balasore</option>
        <option value="5">Barbil</option>
        <option value="6">Bargarh</option>
        <option value="7">Baripada</option>
        <option value="8">Basudebpur</option>
        <option value="9">Belpahar</option>
        </select>
           </form>
    </body>
 </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:24:57.143

看看这个[jsfiddle](http://jsfiddle.net/aUMBt/)

```
 $("select[multiple]").change(function(){
                var noOfItemsSelected = $("select[multiple] option:selected").length;
                if(noOfItemsSelected === 4){
                    $("select[class=asmSelect]").prop('disabled', true);
                }else{
                    $("select[class=asmSelect]").prop('disabled', false);
                }        
            }); 
```

# android - ACRA formkey 从哪里得到？

> ID：15924289
> 
> 赞同：0
> 
> 时间：2013-04-10T11:14:05.177
> 
> 标签：android, acra

因此，我尝试按照[https://github.com/ACRA/acra/wiki/BasicSetup](https://github.com/ACRA/acra/wiki/BasicSetup)的说明进行操作，但它太旧了。
使用我自己的 gmail 帐户，我确实导入了 csv 文件，但在工具菜单中没有“创建**传统**表单”选项，只有“创建表单”。如果我创建一个表单，则没有导入的 csv 文件的字段（就像我在 BasicSetup 文档的屏幕截图中看到的那样），但它会提示使用“添加项目”手动添加字段。并且周围没有任何表单键。表单的 http 链接如下所示：[https](https://docs.google.com/forms/d/1KNF_R4_Re0X0giFfEXwqXY50mpnFvQUvp0NLkKxyI/edit#) ://docs.google.com/forms/d/1KNF_R4_Re0X0giFfEXwqXY50mpnFvQUvp0NLkKxyI/edit#或者如果我选择“查看实时表单”它是[https://docs.google.com/forms/ d/1KNF_R4_Re0X0giFfEXwqXY50mpnFvQUvp0NLkKxyI/viewform](https://docs.google.com/forms/d/1KNF_R4_Re0X0giFfEXwqXY50mpnFvQUvp0NLkKxyI/viewform)
如您所见，没有包含表单键。
所以问题是我现在能找到那个fomkey吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T11:40:50.207

由于`Google Docs`不推荐使用 ，因此`ACRA`我建议您将其`BugSense`用作后端服务：

**1.**访问他们的网站并登录：[http ://www.bugsense.com/](http://www.bugsense.com/)

**2.**创建一个新项目以在`BugSense`现场监控，结果您将收到`API Key`此应用程序的一个。

**3.**最后将这一行添加到您项目中的应用程序类中：

```
@ReportsCrashes(formUri = "http://www.bugsense.com/api/acra?api_key=YOUR_API_KEY", formKey="") 
```

你也可以查看我写的这篇博文：

[崩溃报告和使用监控](https://blog-emildesign.rhcloud.com/?p=630)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:29:07.943

[ACRA](https://github.com/ACRA/acra/wiki/Notice-on-Google-Form-Spreadsheet-usage)不支持 Google 电子表格。请改用BugSense 之类的[第三方提供商，或者编写您自己的错误收集器。](http://www.bugsense.com/docs/android#acra)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:36:16.053

我已经使用我的自定义域尝试了 ACRA，该域由谷歌处理，当时我找不到任何创建选项

> 创建旧表单

然后在我尝试使用我的个人 gmail 帐户及其作品之后。

所以我得出的结论是：

> ACRA 不支持第三方域，即使他们提供了 google 。

# regex - 使用正则表达式在浮点数中用点替换逗号

> ID：15924290
> 
> 赞同：1
> 
> 时间：2013-04-10T11:14:11.537
> 
> 标签：regex, floating-point, replace, batch-processing

在大型数据文件中，我想用每个浮点数中的点替换逗号。

56,66 应该变成 55.66 等等。

该文件包含许多其他应保持不变的逗号。浮点数（并且只有那些）应该改变。

什么可能是相关信息：

*   逗号前的数字永远不会超过 3 位（不过，0、1、2 和 3 都会出现）
*   逗号后面永远不会超过 2 位数字（尽管 0、1 和 2 都会出现）

我可以在 Notepad++ 或 Eclipse 中触发正则表达式，这对我来说并不重要。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T11:19:13.430

只需替换`(\d),(\d)`为`\1.\2`

没有记事本++。在日食中它起作用了。

# clojure - 如何标记 Clojure 函数，以便我可以使用 Java 反射识别它

> ID：15924293
> 
> 赞同：8
> 
> 时间：2013-04-10T11:14:26.047
> 
> 标签：clojure, clojure-java-interop

我需要以某种方式将某些 Clojure 函数标记为“特殊”，以便 Java 代码可以使用反射来识别它们。我试图向函数添加注释，但显然不支持。我尝试过`reify`扩展接口`IFn`（以便 Java 代码可以识别函数对象），但这并不好，因为 Clojure 并没有直接使用 reified 方法作为代码实现`invoke`，而是间接调用`Afunction`实际上是实现方法（我需要`invoke`用实际的功能代码标记实际的方法）。

有任何想法吗？

编辑：即使以可以使用 ASM 库（而不是常规反射）访问的方式进行标记也可以，但我需要以某种方式标记实际`AFunction`对象或`invoke`方法。此外，我无法访问实际`AFunction`对象——我需要标签在类上可见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:19:34.693

您可以使用 clojure 元数据功能，该功能允许将元数据（地图）附加到任何实现[`IMeta`](https://github.com/clojure/clojure/blob/master/src/jvm/clojure/lang/IMeta.java)接口的对象（结果是每个对象，因为 IObj 扩展了 IMeta，每个对象都扩展了 IObj）

现在有2个选项。

1）您可以将元数据附加到var（var指向实际的IFn对象）

```
(defn hello {:name "hello"} [] 10) 
```

在 Java 端，您获取 var hello 并使用 IMeta 方法获取元数据并检测您的特定元数据是否存在。这个问题可能是您的 Java 代码直接访问/处理 IFn 对象而不是它们的变量（例如：匿名函数），要解决这个问题，请尝试第二个选项。

2）将元数据附加到函数对象本身：

```
(def hello (with-meta (fn [] 10) {:name "hello"})) 
```

您不能`defn`将元数据附加到 var。上面的示例代码将元数据附加到函数对象本身。在 Java 端，将函数对象类型化为 IMeta 并进行检查。上面的代码可以在`defn`作为练习的宏的帮助下变得更可爱:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:02:24.723

事实证明，如果用包含局部定义的 let 语句将函数体括起来，则该变量名称将出现在类文件中方法的局部表中。不过有点麻烦。还在寻找更好的方法。

# python - 传入popen参数

> ID：15924294
> 
> 赞同：1
> 
> 时间：2013-04-10T11:14:29.813
> 
> 标签：python, subprocess

我有如下代码：

```
proc = subprocess.Popen(["/path/to/program", '-c', '-', ran_opt_get_ap], stdout=subprocess.PIPE) 
```

我想提取`"/path/to/program", '-c', '-'`到一个变量，所以我可以很容易地改变它。我为 cmd_here 尝试了几种不同的语法，它们给出了各种错误，但正确的方法是什么？这是我试过的一个例子：

```
cmd_here = "/jffs2/usbflash0/ran/rancli -c -"
proc = subprocess.Popen([cmd_here, ran_opt_get_ap], stdout=subprocess.PIPE) 
```

这仅适用于`shell=True`我希望避免的情况，我应该使用什么语法？我有它在一个列表中，但它抱怨这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:19:39.373

应该工作的东西（虽然未经测试）：

```
constant_cmd_part = ["/path/to/program", "-opt", "-more_opt"]
proc = subprocess.Popen(constant_cmd_part + [variable_part],
                        stdout=subprocess.PIPE) 
```

基本上， subprocess.Popen 想要一个初始参数，它是 [binary, args...] 的列表，我们通过连接一个常量部分列表来构造一个，其中一个与我们的可变部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:20:03.823

您可以使用该`split`函数生成适当的列表：

```
cmd_here = "/jffs2/usbflash0/ran/rancli -c -"
# split string to a list
args = cmd_here.split()
args.append(ran_opt_get_ap)
proc = subprocess.Popen(args, stdout=subprocess.PIPE) 
```

**拆分命令的结果：**

```
cmd_here = "/jffs2/usbflash0/ran/rancli -c -"
In [2]: cmd_here.split()
Out[2]: ['/jffs2/usbflash0/ran/rancli', '-c', '-'] 
```

# jquery - 如何定义一个私人事件 [Port Mootools to jquery]

> ID：15924296
> 
> 赞同：1
> 
> 时间：2013-04-10T11:14:29.940
> 
> 标签：jquery, events, event-handling, mootools, mouseevent

我是 mootools 的忠实粉丝。但是现在我必须将 mootools-snipe 移植到 jquery，但我不明白。

我正在使用此代码：

```
var  prev_m_x = 0;
var  prev_m_y = 0;

window.addEvent('mousemove',function(e){
            prev_m_x=e.page.x;
            prev_m_y=e.page.y;
     });

Element.Events.enterfromleft ={
    base: 'mouseover',
    condition: function(event){
        var elpos = this.getPosition();
        if(prev_m_x<=elpos.x)  return true; return;
    }
};

Element.Events.enterfromright ={
    base: 'mouseover',
    condition: function(event){
        var elpos = this.getPosition();
        if(prev_m_x>=(elpos.x+this.getWidth())) return true; return;
    }
}; 
```

定义我的事件。

最后，我通过以下方式使用此事件：

```
el.addEvents({
    'enterfromleft':function(e){
          ...
    },
    'enterfromright':function(e){

    } ... 
```

我试图在 jquery 中做这样的事情，但没有成功。请看这里：http: [//jsfiddle.net/tFw89/33/](http://jsfiddle.net/tFw89/33/)

我必须在 jquery 中做什么来定义私人事件？感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:38:18.200

你可以[写一个插件](http://docs.jquery.com/Plugins/Authoring)

```
(function($) {

    var prev_m_x = 0;
    var prev_m_y = 0;

    $(document).on('mousemove', function(e) {
        prev_m_x = e.pageX;
        prev_m_y = e.pageY;
    });

    $.fn.mouseMove = function(type) {

        return this.each(function() {
            var $this = $(this);

            $this.on('mouseover', function(e) {
                if (prev_m_x <= e.pageX) {
                    $this.trigger('enterfromleft')
                } else {
                    $this.trigger('enterfromright')
                }
            });
        });

    };
})(jQuery);

$('#myButton').on('enterfromleft', function(){
    console.log('enterfromleft')
});
$('#myButton').on('enterfromright', function(){
    console.log('enterfromright')
});
$('#myButton').mouseMove() 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/mRnun/4/)

与跟踪鼠标移动相关的修复，在文档上注册鼠标移动事件，而不是在元素上。

# c# - 如何在 C# Metro 应用程序中停止异步任务

> ID：15924297
> 
> 赞同：3
> 
> 时间：2013-04-10T11:14:33.207
> 
> 标签：c#, microsoft-metro

我正在用 C# 开发 Metro 应用程序，我正在使用 async 和 await 关键字来创建使 Metro 异步操作（下载数据等）。我总是显示模态“请稍候”对话框。我想在此模式对话框中添加“取消”按钮以允许取消后台操作。但我不知道如何取消处理任务......有什么例子可以做到这一点吗？

这是我的任务示例：

```
// Starts task
public void StartTask()
{
    // show the modal dialog with progress
    _progressDialog.IsOpen = true;
    _progressDialog.CancelClick += ProgressDialog_CancelClick;
    await ToWork();
    _progressDialog.IsOpen = false;
}

// Task which takes some seconds
private async Task DoWork()
{
   await DownloadData();
   await ProcessData();
}

// Cancel task
private void CancelClick(object sender, RoutedEventArgs e)
{
    // hide the modal dialog with progress        
    _progressDialog.IsOpen = false;
    // TODO: Cancel task
    GoBack(this, e);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T11:16:55.573

您可以决定实施`DownloadData`，以便他们在您需要取消时将其传递给他们`ProcessData`。`CancellationToken`

```
public Task DownloadData(CancellationToken tok)
{
    tok.ThrowIfCancellationRequested();//check that it hasn't been cancelled.

   //while doing your task check

  if (tok.IsCancellationRequested)
    {
                    // whatever you need to clean up.
                    tok.ThrowIfCancellationRequested();
     }

} 
```

对于使用，您可以创建一个`CancellationTokenSource`并将令牌传递给该方法。

```
var source = new CancellationTokenSource();

await DownloadData(source.Token); 
```

当您需要取消时，您可以调用`Cancel()`源

```
source.Cancel(); 
```

# c# - 无法加载 .dll？

> ID：15924299
> 
> 赞同：0
> 
> 时间：2013-04-10T11:14:36.173
> 
> 标签：c#, winforms, visual-studio-2010, sqlite

我使用 c#.net 2.0 和 linq 制作了一个应用程序，但由于我们不能使用 Linq 因为它是在框架 3.5 中引入的，所以我添加了一些 3.5 版 dll 的引用，并且 linq 开始正常工作。

当我进行设置并安装它时，它在我的系统上运行良好，但在其他系统上显示错误

```
Unable to load System.Data.DatasetExtensions 
```

我不知道如果其他 dll 正在工作，那么为什么这个 dll 会产生问题？解决方案是什么？

需要帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T11:20:41.480

如果您受限于使用 .Net2.0，则不必费心尝试加载针对更高版本 .Net 的程序集。它注定要失败。如果要使用Linq，目标>=.Net3.5，如果需要目标.Net2.0，不要使用Linq。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:20:12.590

关于错误，您添加的程序集可能依赖于其他程序集。它没有在您的系统上出现错误，因为您已经安装了它。

但是你一般不应该做这样的事情。更好的方法是在安装程序中安装所需的框架版本作为先决条件。

# c++ - How to create a collection of stream objects

> ID：15924303
> 
> 赞同：4
> 
> 时间：2013-04-10T11:14:52.180
> 
> 标签：c++, iostream

As most know it's not possible to have a [standard collection of references](https://stackoverflow.com/questions/922360/why-cant-i-make-a-vector-of-references). It's also not possible to copy a stream object.

But what if I want to make a collection (say a `std::vector`) of stream objects or stream object references?

I know I can wrap the stream object reference in e.g. a structure, but then you either need to implement the complete interface (if you want to use the wrapper directly as a stream, which I would prefer), or use a public getter function and use that everywhere to get the actual stream.

Is there a simpler way? C++11 solutions are okay.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T11:18:38.477

You can't have a container of references, but you can have a container of [`std::reference_wrapper`](http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper). Perhaps you want something like:

```
std::vector<std::reference_wrapper<stream_type>> v; 
```

You can treat a `std::reference_wrapper` very much like a reference (in fact, it is implicitly convertible to a reference type), but it has the extra advantage of being an object type.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:55:06.863

You can use non-copyable objects in collections:

```
// this uses move constructors
std::vector<std::fstream> v {std::fstream{"file1.txt"}, std::fstream{"file2.txt"}};

// this doesn't require the type to even be movable
v.emplace_back("file3.txt"); 
```

Although avoiding pointer and reference-like types this way will only work if you don't need to use streams as polymorphic objects.

# ios - 以编程方式获取核心数据对象的大小（字节）

> ID：15924309
> 
> 赞同：1
> 
> 时间：2013-04-10T11:15:21.230
> 
> 标签：ios, objective-c, nsmanagedobject

有没有办法以编程方式获取核心数据对象的大小（以字节为单位）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:41:47.477

在这里，存在将[NSManagedObjectID 转换为 NSData的 SO 线程](https://stackoverflow.com/questions/516443/nsmanagedobjectid-into-nsdata)

```
NSURL * url = [[YOUROBJECT objectID] URIRepresentation];
NSData * urlData = [NSKeyedArchiver archivedDataWithRootObject:url];
NSLog(@"Data Length :%d",[urlData length]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T12:42:11.550

您可以使用下面的代码来计算单个 NSManagedObject 的数组和总和

```
- (void) calculateSize {

     NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:@"Event"];

     NSArray *data = [self.managedObjectContext executeFetchRequest:request error:nil];

     NSLog(@"Size of %@: %zd", NSStringFromClass([data class]), malloc_size((__bridge const void *) data));

     int totalSize = 0;
     for(NSManagedObject *object in data)
     {
        totalSize += malloc_size((__bridge const void *) object);
     }
     NSLog(@"Managed Object Size total:%d", totalSize);
} 
```

# php - 在 FASTCGI API 上设置 php 时如何更改每个文件夹的 php.ini memory_limit

> ID：15924310
> 
> 赞同：0
> 
> 时间：2013-04-10T11:15:21.630
> 
> 标签：php, fastcgi, memory-limit

您好我有一个网站需要为图像上传系统分配额外的内存。在开发服务器上更改 memory_limit 不是问题，但在实时服务器上，已使用 FASTCGI 作为 API 而不是 Apache 设置了 php。这现在给我带来了一个问题，因为我无法使用以下任何方法更改设置。有没有人遇到过这种情况并可以提供解决方案。

已尝试的方法： 脚本文件中的 ini_set('memory_limit', '250M') .htaccess php_value memory_limit 250M php.ini 添加到包含脚本文件的目录 memory_limit = 250M php.ini 整个文件的副本，内存限制已更改

非常感谢

# vba - 不同 Office 版本之间的 VBA 兼容性

> ID：15924311
> 
> 赞同：5
> 
> 时间：2013-04-10T11:15:29.387
> 
> 标签：vba, excel

对不起，如果这是一个愚蠢的问题。

如何使我的 VBA 代码在 Office 2003/2007/2010 上工作？

可以完成还是应该为每个创建不同的 VBA 代码？

我用

1.  WinHttp.WinHttpRequest.5.1
2.  进行大量 Windows API 调用
3.  对图书馆有五次引用
4.  wininet.dll
5.  内核32
6.  Outlook.Application
7.  InternetExplorer.Application

我在 Office 2007 上进行开发，但使用 Office 2010 的用户无法运行代码。不确定运行其他办公版本的用户。

我还看到可以在 Visual Studio 中创建 Excel-Addin，但我在该领域没有很多经验。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:54:31.373

对于不同版本的 Excel，您可以只使用条件编译，例如`#If Application.version>n then`

但是，对于任何拥有 Win64 系统的用户，您必须提供调用 API 函数的不同方法。

您最好的选择是尝试使用自动化从 .NET 使用 Office.Interop 或 VSTO 操作 Excel。

# listview - 如何将列表视图中的项目添加到列表框中？

> ID：15924315
> 
> 赞同：0
> 
> 时间：2013-04-10T11:15:46.420
> 
> 标签：listview, listbox, add

我想在有 4 列的 c# 列表视图中为项目创建收据。列表视图：![](https://i.imgur.com/PneyTrd.png)

我想将该视图中的项目添加到列表框中以生成收据。我的方法是否正确？老实说，我不知道如何将列表视图项目制作成收据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:25:51.707

使用[Jquery 网格](http://jquerygrid.net/)。查看和添加列很容易..

在此`onloadCompleteFunction`您可以将列相乘，它将在其他列中显示结果..

# ruby-on-rails - 如果参数存在不工作

> ID：15924316
> 
> 赞同：0
> 
> 时间：2013-04-10T11:15:50.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我的网址路径是这样的

```
/locale/country/
/locale/country/region/ 
```

楷模：

```
class Region
belongs: country
end

class Country
has_many: regions
end 
```

区域表中的外键 country_id

这是布局文件中导航部分的一部分。

```
//block region
    - if params[:region].present? 
       %ul.thumbnails
       - @region.tags.find_each(:conditions => "active_house = true") do |a|
          %li.span2
          .thumbnail
            - a.attachments.limit(1).each do |b|
              = image_tag(b.file.url)
            .caption
              %p 
                #{link_to a.h1, tag_country_region_houses_path(@country, @region, a.name), :class => 'btn-nav', class: active_class?(tag_houses_path(a.name))} 
//block country    
    - else
        %ul.thumbnails
        - @country.tags.find_each(:conditions => "active_house = true") do |a|
           %li.span2
            .thumbnail
              - a.attachments.limit(1).each do |b|
                = image_tag(b.file.url)
             .caption
              %p 
                #{link_to a.h1, tag_country_houses_path(@country,  a.name), :class => 'btn-nav', class: active_class?(tag_houses_path(a.name))} 
```

当访问者在路径 /local/country 上时，我想显示块国家，当访问者在 /locale/country/region 上时，我想显示块区域。

我想`if params[:region].present?`会成功的。但是没有....我怎么能意识到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:18:52.023

尝试这样做：

```
if params.has_key?(:region) 
```

或者如果它存在但包含一个 nil 你可以测试它：

```
unless params[:region].nil? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:41:37.307

难道不应该是

```
class Region
belongs_to: country
end 
```

代替

```
class Region
belongs: country
end 
```

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:28:40.493

行前

```
- if params[:region].present? 
```

在您看来，尝试对线条进行着色，

```
- p params[:region]
- p params[:region].present? 
```

这可以为您提供有关行为的一些线索。

# django - Pycharm 中的扩展嬉皮士补全？

> ID：15924320
> 
> 赞同：1
> 
> 时间：2013-04-10T11:16:03.883
> 
> 标签：django, pycharm

假设您创建了一个类 class `Story`，并且还为此创建了一个管理面板`StoryAdmin`。这是指制作 Django 应用程序的常见场景。

现在，在故事管理中，您想要分配要显示的某些字段。目前没有自动完成，但有嬉皮士完成。`ALT`+ `/`.

但这仅适用于当前页面中的建议。一个扩展嬉皮士如何完成扩展到一个已创建的其他文件？

此功能在 Sublime Text 2 中可用。如果需要演示我所说的更详细的示例，请在评论中说明。

*如果这个问题不适合 SO，请投票关闭它。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:56:15.560

PyCharm 尚不支持它，请[投票支持此功能请求](http://youtrack.jetbrains.com/issue/IDEA-57940)。

# jquery - Fancybox 父页面在打开时向右移动

> ID：15924324
> 
> 赞同：0
> 
> 时间：2013-04-10T11:16:09.560
> 
> 标签：jquery, popup, fancybox

我正在使用花式盒子最新版本。我也在弹出窗口中使用 iframe。在打开弹出窗口时，父页面向右移动大约 10 像素，在弹出窗口关闭时，父页面又回到正常位置。因为加载弹出窗口需要时间。父页面的移动清晰可见。

在打开弹出窗口时，已删除将“margin-right”添加到父正文标签。但是问题依然存在......

有什么办法可以避免？？？

# datetime - 如何将像 2013-04-09T08:08:59.320Z 这样的日期反序列化为来自 Json 的默认/自定义格式

> ID：15924328
> 
> 赞同：0
> 
> 时间：2013-04-10T11:16:17.387
> 
> 标签：datetime, serialization, deserialization

如何将像 2013-04-09T08:08:59.320Z 这样的日期反序列化为来自 Json 的默认/自定义格式，默认情况下我从服务器获取这种格式。现在我想在不使用第三方工具或 dll 的情况下以自定义或默认格式反序列化。我们该怎么做？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T06:08:54.023

以下是上述问题的解决方案。

```
DateTime dates = 2013-04-09T08:08:59.302Z ;
DateTime d2 = DateTime.Parse(abc.modifiedDate, null, DateTimeStyles.RoundtripKind);          
Console.WriteLine(d2.ToString()); 
```

# c# - 通过 C# 访问 Oracle 数据库而不强制用户安装 Oracle 客户端

> ID：15924329
> 
> 赞同：2
> 
> 时间：2013-04-10T11:16:18.540
> 
> 标签：c#, oracle

我在查询 Oracle 数据库时使用了 oracle.dataaccess.dll。但是如果用户没有在他的机器上安装 Oracle 客户端，它就不起作用。是否有可能以某种方式将 Oracle 客户端包含在 dll 中，这样用户就不必显式安装客户端？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T12:17:44.297

[托管的 ODP.net 客户端正](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html)是您想要的。现在已经发布了 12c 版本，它是一个简单的单一程序集，您可以随应用程序一起部署，而不必担心 Oracle 安装。

[如果您不想在系统上安装，也可以使用一个 nuget 包。](https://twitter.com/OracleDOTNET/status/556251239294332929)启动和运行非常轻松。这里有一些链接：

*   [主包](http://www.nuget.org/packages/Oracle.ManagedDataAccess/)
*   [使用 Entity Framework 6/Code First 的第二个包](http://www.nuget.org/packages/Oracle.ManagedDataAccess.EntityFramework/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T11:23:02.680

您可以将[Oracle Instant Client](http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html)与您的应用程序一起提供。

这是一个完整的Oracle客户端，但不需要安装，可以直接使用。

但是，您需要注意以下事项：

1.  即时客户端的大小超过 120 MB。
2.  您需要用于 x86 和 x64 的*不同*版本的即时客户端，使大小达到约 250 MB。

使用即时客户端的好处是您不必担心安装的 Oracle 客户端版本。即使计算机已经安装了不兼容的版本，您的应用程序也可以运行，因为它带有正确的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:41:52.930

如果您有能力付款，我已经使用 DevArt 的[DotConnect for Oracle](http://www.devart.com/dotconnect/oracle/ "用于 Oracle 的 DotConnect")作为 Oracle 提供的客户端的替代方案取得了相当大的成功。

它提供了一种完全托管的连接和查询 Oracle 的方式，以及实体框架和 nHibernate 支持和仿真`GUIDs`，`booleans`以及 Oracle 缺乏支持的一些其他数据类型（`GUID`在`raw(16)`Oracle 中）。

您所要做的就是为您的项目提供一个托管 DLL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-16T21:46:08.727

我终于通过在我的 app.config 中创建 Oracle 连接字符串并复制所有客户端 DLL 来让它工作，如下图所示：

[![我复制的DLL](https://i.stack.imgur.com/BG9S8.png)](https://i.stack.imgur.com/BG9S8.png)

# java - 在 Android 项目中使用 ListActivity 实现 onItemClickedListener？

> ID：15924333
> 
> 赞同：0
> 
> 时间：2013-04-10T11:16:27.290
> 
> 标签：java, android, android-listview

可以实现 onItemClickedListener() 而我无法通过 id 获取列表，因为我的 ListView 得到了 android:id="@android:id/list"？

我想检查是否单击了 ListItem 并突出显示它。现在我无法突出显示项目。

```
import android.app.ListActivity;
import android.os.Bundle;
import java.util.List;
import java.util.Random;
import android.view.View;
import android.widget.ArrayAdapter;

public class FirstGridPage extends ListActivity {
      private StolikiDataSource datasource;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_view_list_stoliki);

    datasource = new StolikiDataSource(this);
    datasource.open();

    List<Stoliki> values = datasource.getAllStoliki();

    // Use the SimpleCursorAdapter to show the
    // elements in a ListView
    ArrayAdapter<Stoliki> adapter = new ArrayAdapter<Stoliki>(this,
        android.R.layout.simple_list_item_1, values);
    setListAdapter(adapter);
  }

  // Will be called via the onClick attribute
  // of the buttons in main.xml
  public void onClick(View view) {
    @SuppressWarnings("unchecked")
    ArrayAdapter<Stoliki> adapter = (ArrayAdapter<Stoliki>) getListAdapter();
    Stoliki stolik = null;
    switch (view.getId()) {
    case R.id.add:
      String[] stoliki_numer = new String[] { "1", "2", "3" };
      String[] stoliki_opis = new String[] { "Czerwony", "Niebieski", "Zielony" };
      int nextInt = new Random().nextInt(3);
      // Save the new comment to the database
      stolik = datasource.createStolik(stoliki_numer[nextInt], stoliki_opis[nextInt]);
      adapter.add(stolik);
      break;
    case R.id.delete:
      if (getListAdapter().getCount() > 0) {
          stolik = (Stoliki) getListAdapter().getItem(0);
        datasource.deleteStolik(stolik);
        adapter.remove(stolik);
      }
      break;
    }
    adapter.notifyDataSetChanged();
  }

  @Override
  protected void onResume() {
    datasource.open();
    super.onResume();
  }

  @Override
  protected void onPause() {
    datasource.close();
    super.onPause();
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:19:13.530

`ListActivity`有一个[onListItemClick()](http://developer.android.com/reference/android/app/ListActivity.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)方法，你只需要重写它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:19:23.683

```
private class TestActivity extends ListActivity implements OnItemClickListener
{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        yourListView.setOnItemClickListener(this);
    }

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        // TODO Auto-generated method stub

    }
} 
```

# c# - 事件的内部存储机制

> ID：15924341
> 
> 赞同：1
> 
> 时间：2013-04-10T11:16:58.643
> 
> 标签：c#, events

```
class Control: Component
{
   // Unique keys for events
   static readonly object mouseDownEventKey = new object();
   static readonly object mouseUpEventKey = new object();
   // Return event handler associated with key
   protected Delegate GetEventHandler(object key) {...}
   // Add event handler associated with key
   protected void AddEventHandler(object key, Delegate handler) {...}
   // Remove event handler associated with key
   protected void RemoveEventHandler(object key, Delegate handler) {...}
   // MouseDown event
   public event MouseEventHandler MouseDown {
      add { AddEventHandler(mouseDownEventKey, value); }
      remove { RemoveEventHandler(mouseDownEventKey, value); }
   }
   // MouseUp event
   public event MouseEventHandler MouseUp {
      add { AddEventHandler(mouseUpEventKey, value); }
      remove { RemoveEventHandler(mouseUpEventKey, value); }
   }
   // Invoke the MouseUp event
   protected void OnMouseUp(MouseEventArgs args) {
      MouseEventHandler handler;
      handler = (MouseEventHandler)GetEventHandler(mouseUpEventKey);
      if (handler != null)
         handler(this, args);
   }
} 
```

> Control 类实现了事件的内部存储机制。AddEventHandler 方法将委托值与键关联，GetEventHandler 方法返回当前与键关联的委托，而 RemoveEventHandler 方法将委托作为指定事件的事件处理程序移除。据推测，底层存储机制的设计使得将空委托值与键关联起来是没有成本的，因此未处理的事件不会消耗存储空间。

这段代码和上一段中的解释对我来说没有任何意义。知道这个内部存储机制是什么吗？在上面的段落中，将代表与卑鄙的人联系起来是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:24:24.843

Windows 窗体控件公开大量事件。一个典型的 UI 将由大量这些控件组成。

当您使用标准事件语法时

```
public event MouseEventHandler MouseDown; 
```

编译器生成`add`和`remove`方法以及与委托相同类型的私有字段。

这意味着默认情况下会占用大量内存（即使没有订阅事件）。

Windows 窗体控件定义了自己的存储方法，这意味着内存仅用于实际订阅的事件（加上存储委托的对象，例如字典），从而减少了应用程序的整体内存占用。

委托与对象键相关联，例如，如果`Mousedown`事件发生，它可以查找适用于该事件的委托，以便可以调用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:27:58.993

据我了解，这种存储机制通常是为了维护弱参考模式而创建的。查看这篇文章以深入了解它[http://msdn.microsoft.com/en-us/library/aa970850.aspx](http://msdn.microsoft.com/en-us/library/aa970850.aspx)

# monitoring - 为什么zabbix agent和zabbix server在同一台机器上的UserParameter不起作用

> ID：15924342
> 
> 赞同：4
> 
> 时间：2013-04-10T11:16:59.640
> 
> 标签：monitoring, zabbix

感谢您查看此问题！

我使用[zabbix](http://en.wikipedia.org/wiki/Zabbix)来监控我的服务器；

共有15台服务器；

但是当代理与 zabbix 服务器进程在同一台机器上时，其中一个代理不适用于 UserParameter

架构如下：

![在此处输入图像描述](https://i.stack.imgur.com/blmWH.png)

如图所示，zabbix agentd与服务器部署在同一台机器上，UserParameter配置不好用

我添加的配置代码如下

```
UserParameter=mongo.queue[*],/home/admin/tool/queue_monitor.sh $1 | awk '{if($$2 ~  /^[0-9]+/){print $$2}}'
UserParameter=mongo.status[*],/home/admin/tool/mongo-serverStatus.sh $1 | awk '{if($$1 ~ /^[0-9]+/){ print $$1}}' 
```

和其他agentds的配置完全一样...

然后我测试它：

```
zabbix_agentd -t mongo.queue[delayQueue] 
```

它回应：

```
mongo.queue[delayQueue]                   [m|ZBX_NOTSUPPORTED] 
```

该测试在其他 agentds 机器上运行良好，并且会回复一个整数...

```
zabbix_agentd -t mongo.queue[delayQueue]
mongo.queue[delayQueue]                   [t|0] 
```

那么是不是我不应该在与zabbix服务器相同的机器上部署zabbix agentd呢？

但是该代理在其原始工具上运行良好，例如 CPU 负载、磁盘空间......

我的zabbix版本是v2.0.3

```
./zabbix_agentd -V
Zabbix Agent (daemon) v2.0.3 (revision 30485) (03 October 2012)
Compilation time: Dec  5 2012 17:11:46 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:14:45.847

你试图猜测问题是什么。查看代理的日志，对于 exec（脚本），答案很可能就在那里。如果不是，请禁用此代理的被动监控，启用完整调试输出（DebugLevel=4），然后运行参数的 zabbix_get 并再次查看日志。如果它仍然不存在，那么 strace 是你的朋友。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T06:00:28.240

最后我发现是人为的错误，我的同事在服务器上安装了另一个zabbix_agentd，所以上面有两个zabbix agentd。

虽然我用-c参数启动agentd进程，但是当我用-t测试用户参数时，配置文件默认链接到另一个文件，所以我在文件中配置的用户参数不起作用...

# android - 无法移除的Android活动边框？

> ID：15924345
> 
> 赞同：3
> 
> 时间：2013-04-10T11:17:03.473
> 
> 标签：android, android-activity, margin

所以我有这个

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"    
    android:id="@+id/mainParent"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bgdark"
    android:orientation="vertical" 
>
    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="76dp"
        android:src="@drawable/myheader_250x60" 
    />
    <ListView
        android:id="@+id/mainListview"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </ListView>
</LinearLayout> 
```

**注意**我现在已经编辑了这篇文章。我使用的是灰色背景图像，所以我认为这是在标题图像的右侧/左侧可见的内容。请参阅下面的显示问题的图像。

但是，将背景移动到列表视图并没有解决问题。因此，似乎是图像视图以某种方式具有灰色的左/右边框。由于我已将宽度设置为“match_parent”，因此它应该采用最大宽度。

![在此处输入图像描述](https://i.stack.imgur.com/bX4RM.png)

问题是标题的顶部/右侧有一个灰色像素边框？如果可能的话，我想删除它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:10:58.183

设置这个 scletype 属性

```
android:scaleType=fitXY 
```

并像这样将图像设置为图像视图

```
android:background="@drawable/myheader_250x60" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:24:04.983

为您的 ImageView尝试[scaleType 属性](http://developer.android.com/reference/android/widget/ImageView.html#attr_android%3ascaleType)。

另一种方法 - 替换

```
android:src="@drawable/myheader_250x60" 
```

为了

```
android:background="@drawable/myheader_250x60" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T12:03:42.833

尝试使用 fill_parent 而不是 match_parent 除了在 listView height 。在 listView 高度使用 wrap_content

# jquery - 左/右滑动菜单

> ID：15924346
> 
> 赞同：3
> 
> 时间：2013-04-10T11:17:04.160
> 
> 标签：jquery, menu, sliding

我有这个菜单，它基本上是一个水平项目滑动条。所有菜单项都有特定的默认 css 属性。我希望这些项目在它们到达主容器的中心时改变它们的大小和左右边距，并在它们离开它（或在它之外）时重置为默认值。看我的示意图。

![在此处输入图像描述](https://i.stack.imgur.com/oYChy.jpg)

有一个左/右按钮将触发它将滑动的方向。我知道有这类东西的库，但我真的想要最简单的东西。这是 HTML 标记：

```
<div id="leftBtn">Left</div>
<div id="rightBtn">Right</div>

<div id="centerArea">
    <div id="menuContainer">
        <div id="menuItem_1" class="menuItem"></div>
        <div id="menuItem_2" class="menuItem"></div>
        <div id="menuItem_3" class="menuItem"></div>
        <div id="menuItem_4" class="menuItem"></div>
    </div>
</div> 
```

...和[小提琴](http://jsfiddle.net/2Vngt/)。

谢谢你。

佩德罗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:52:38.923

试试这个[jsfiddle](http://jsfiddle.net/GEfLP/)

它遵循以下方法 * 将内容包含`.menuItem`在另一个容器中，`.container`以便它可以在其父容器内自由移动。* 使用`menuItem_place`来获取`.menuItem`位于中心的特定位置。

# android - 为什么只有 Linux Kernel 用于 android 而没有其他内核？

> ID：15924350
> 
> 赞同：0
> 
> 时间：2013-04-10T11:17:09.523
> 
> 标签：android, linux-kernel, kernel

刚在android上接受面试，回到家，只有一个问题我没有信心。面试官问我，为什么android的硬件和软件的集成只使用Linux内核，为什么没有其他内核。坦率地说，我是空白的，但我说它们都是开源的，他看着我笑了。我想知道真正的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:32:18.217

“Linux 是开源的”，即可以对 Linux 内核结构进行改进（维护 GNU 许可协议）。因此，Android 将 Linux 2.6 作为其底层内核并进行了增强以满足移动 O/S 要求，例如更好的内存管理、更好的处理器管理。

# python - gevent + redis-py: SystemError: NULL 结果在 PyObject_Call 中没有错误

> ID：15924353
> 
> 赞同：3
> 
> 时间：2013-04-10T11:17:18.537
> 
> 标签：python, python-2.7, redis, gevent

我将 redis-py 与 redish 与 gevent 一起使用，并且我有自己的 EventBot 类，它继承自 Greenlet。

在`__init__`这个类的方法中，我正在初始化与 redis 的连接

```
self._redis = Client(serializer=serialization.JSON(), **self.REDIS_CONFIG) 
```

有时当我尝试运行脚本时，它会抛出，`SystemError: NULL result without error in PyObject_Call`但有时它会正常启动。我也尝试将 redis 初始化移动到`_run()`方法中，但没有帮助。

这是我正在使用的简化类：

```
from gevent import monkey, Greenlet
monkey.patch_all()

from sleekxmpp import ClientXMPP
from redish import serialization
from redish.client import Client

class EventBot(ClientXMPP, Greenlet):
    REDIS_CONFIG = {
        'host': 'localhost',
        'port': 6379,
        'db': ""
    }

    def __init__(self, jid, password, redis_config=None):
        ClientXMPP.__init__(self, jid, password)
        Greenlet.__init__(self)

        # Redis init
        if redis_config is not None:
            self.REDIS_CONFIG.update(redis_config)
        self._redis = Client(serializer=serialization.JSON(), **self.REDIS_CONFIG)

        QUESTIONS_KEY = __name__ + '_questions'
        try:
            self._questions = self._redis[QUESTIONS_KEY]
        except KeyError:
            self._questions = self._redis[QUESTIONS_KEY] = {}

    ## Class simplified for better readability ##

    def _run(self):
        self.connect()
        self.process(block=False) 
```

这是完整的回溯：

```
Traceback (most recent call last):
  File "start.py", line 15, in <module>
    bot = EventBot('marie@xxx.com', 'XXXpasswordXXX')
  File "/tmp/sandbox/gmarie/gmarie/marie/eventbot.py", line 41, in __init__
    self._questions = self._redis[QUESTIONS_KEY]
  File "/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redish/client.py", line 196, in __getitem__
    value = self.api.get(name)
  File "/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/client.py", line 551, in get
    return self.execute_command('GET', name)
  File "/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/client.py", line 360, in execute_command
    connection.send_command(*args)
  File "/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/connection.py", line 301, in send_command
    self.send_packed_command(self.pack_command(*args))
  File "/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/connection.py", line 283, in send_packed_command
    self.connect()
  File "/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/connection.py", line 228, in connect
    sock = self._connect()
  File "/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/redis/connection.py", line 240, in _connect
    sock.connect((self.host, self.port))
  File "/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/gevent/socket.py", line 376, in connect
    wait_readwrite(sock.fileno(), event=self._rw_event)
  File "/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/gevent/socket.py", line 215, in wait_readwrite
    switch_result = get_hub().switch()
  File "/tmp/sandbox/gmarie/venv/lib/python2.7/site-packages/gevent/hub.py", line 164, in switch
    return greenlet.switch(self)
SystemError: NULL result without error in PyObject_Call
Exception KeyError: KeyError(21246672,) in <module 'threading' from '/usr/lib64/python2.7/threading.py'> ignored 
```

任何帮助将不胜感激。

* * *

**编辑：**

`gevent`使用和`greenlet`系统包（`python2-gevent`以及在 Arch Linux 中）时，问题似乎已得到解决`python2-greenlet`，但根据他们的 PKGBUILD，没有在那里进行额外的修补。（[gevent](https://projects.archlinux.org/svntogit/community.git/tree/trunk/PKGBUILD?h=packages/python2-gevent)，[greenlet](https://projects.archlinux.org/svntogit/community.git/tree/trunk/PKGBUILD?h=packages/python2-greenlet)）有人可以解释使用 pip 安装有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T14:41:50.280

`greenlet==0.4.0`使用的时候好像有问题`GCC 4.8`。

如果您没有较旧的 gcc 或其他可用的编译器，您可以通过使用`CFLAGS="-O0" pip install greenlet==0.4.0`或编辑 greenlet`setup.py`和调整来覆盖问题`os.environ["CFLAGS"]`。

其他解决方案可能是下载并使用二进制文件`greenlet.so`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-01T15:53:28.633

根据关于此主题[的 GitHub 问题](https://github.com/python-greenlet/greenlet/issues/28#issuecomment-16496238%20*the%20GitHub%20issue*)，您还可以使用`CFLAGS="-O2 -fno-tree-dominator-opts"`获得常规编译器优化但没有段错误。

# c++ - 包含 signals2 标头会导致编译错误

> ID：15924356
> 
> 赞同：0
> 
> 时间：2013-04-10T11:17:27.283
> 
> 标签：c++, boost, boost-signals2

我有一个编译得很好的项目，但我想使用信号2添加一些功能。

将 boost/signals2/signal.hpp 包含到我的一门课程中时，我收到以下两个错误：

> 错误 10 错误 C2338：找到 >= 对齐 d:\boost_1_53_0\boost\type_traits\type_with_alignment.hpp 206 1 TestProject
> 
> 错误 11 错误 C2338：找到 % Align == 0 d:\boost_1_53_0\boost\type_traits\type_with_alignment.hpp 207 1 TestProject

删除包含，一切都再次编译得很好。有人知道我为什么会收到此编译错误吗？由于错误消息非常有限，我对为什么会发生这种情况一无所知。

我正在使用 MSVC++ 2010

更新：将包含添加到 TestProject.cpp （我的主要功能在哪里，并且类被实例化）以及将其包含在类的头文件中解决了错误。通过从 TestProject.cpp 中删除包含，错误又回来了。

# android - tileMode在drawable中重复不起作用

> ID：15924359
> 
> 赞同：7
> 
> 时间：2013-04-10T11:17:28.263
> 
> 标签：android

我有这个可绘制资源：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/bg_stripe"
    android:tileMode="repeat"
    android:antialias="true"
    android:dither="false"
    android:filter="false"
    android:gravity="left"
/> 
```

在这里用作背景：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/bg_world_locked" > 
```

有时一切正常，有时则不行（可绘制资源以其真正的小尺寸出现并且不重复）。为什么？是安卓的bug吗？我在我的 HTC Desire Android 2.3 上运行它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T11:41:09.983

不幸的是-这是Android错误。检查这个答案

[平铺的drawable有时会延伸](https://stackoverflow.com/questions/4336286/tiled-drawable-sometimes-stretches/9500334#9500334)

简而言之：您应该在 Java 代码而不是 XML 中设置重复。

# android - 更快的数据库表创建

> ID：15924366
> 
> 赞同：3
> 
> 时间：2013-04-10T11:17:52.597
> 
> 标签：android, mysql, database

我的数据库中有一个表，它有 14 列和 125 行。当我启动我的应用程序来创建数据库时，肯定会花费太多时间（在我看来）：我做了 16 次尝试，这些就是结果。

```
===========================
 Average time:    12.715 s
 Minimum time:     8.486 s
 Maximum time:    21.159 s
=========================== 
```

这就是我创建表的方式：

```
private static final String DATABASE_RECIPES_CREATE = "CREATE TABLE IF NOT EXISTS "
    + MetaData.TABLE_RECIPES + " ("
    + MetaData.KEY_ID + " integer primary key autoincrement, "
    + MetaData.KEY_NEW + " integer not null, "
    + MetaData.KEY_TITLE + " text not null, "
    + MetaData.KEY_INGREDIENTS + " text not null, "
    + MetaData.KEY_TIME + " text not null, "
    + MetaData.KEY_PEOPLE + " text not null, "
    + MetaData.KEY_WINE + " text, "
    + MetaData.KEY_SUGGESTIONS + " text, "
    + MetaData.KEY_DIRECTIONS + " text not null, "
    + MetaData.KEY_AUTHOR + " text, "
    + MetaData.KEY_DIFFICULTY + " text not null, "
    + MetaData.KEY_CATEGORY + " text not null, "
    + MetaData.KEY_VEGETARIAN + " integer, "
    + MetaData.KEY_IMAGE + " text)"; 
```

这就是我将所有行值添加到表中的方式：

```
public long addRecipe(int _id, int _new, String _title, String _ingredients, String _time, String _people, String _wine, String _suggestions, 
        String _directions, String _author, String _difficulty, String _category, int _vegetarian, String _image) 
{
    ContentValues initialValues = new ContentValues();

    initialValues.put(MetaData.KEY_ID, _id);
    initialValues.put(MetaData.KEY_NEW, _new);
    initialValues.put(MetaData.KEY_TITLE, _title);
    initialValues.put(MetaData.KEY_INGREDIENTS, _ingredients);
    initialValues.put(MetaData.KEY_TIME, _time);
    initialValues.put(MetaData.KEY_PEOPLE, _people);
    initialValues.put(MetaData.KEY_WINE, _wine);
    initialValues.put(MetaData.KEY_SUGGESTIONS, _suggestions);
    initialValues.put(MetaData.KEY_DIRECTIONS, _directions);
    initialValues.put(MetaData.KEY_AUTHOR, _author);
    initialValues.put(MetaData.KEY_DIFFICULTY, _difficulty);
    initialValues.put(MetaData.KEY_CATEGORY, _category);
    initialValues.put(MetaData.KEY_VEGETARIAN, _vegetarian);
    initialValues.put(MetaData.KEY_IMAGE, _image);

    return mDb.insert(MetaData.TABLE_RECIPES, null, initialValues);
} 
```

**问题：**

由于我的最终表将包含至少 400 行，有什么方法可以加快它的创建速度？

**编辑 1：** 我再添加一个问题：对于某些列，根本不需要“text”或“int”类型。将它们更改为“tinytext”、“smallint”和“tinyint”（在可能的情况下）会产生任何性能差异吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:26:18.200

在您的 PC 上创建和填充数据库并将其放入应用程序的资产中。您只需在应用首次启动时将 db 文件从资产复制到应用的数据文件夹。

或者您可以使用事务来加速插入。如果您在 db 中有任何索引，请在插入所有数据后创建它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:45:18.400

> 更快的数据库表创建

您无需在 PC 上创建数据库。您所需要的只是使用`TRANSACTION`它来快速提高您的插入速度。

我做了一些测试，插入和不插入事务之间的区别是显着的：

*   插入 100 000 行大约**需要 55,015 秒**（有事务），而没有事务的插入则需要**6 分钟**以上。

另外值得一提的是，使用事务是非常好的做法。您对数据库的处理变得更加高效，并且主要更加安全。

但是现在，这里有一个问题。

由于您想改进表的创建，因此表中的行数可能更多。现在，将数据库存储在内部存储上是否既好又高效？

将数据库存储在外部存储上会更好吗？保存数据库敏感数据？如果没有，我应该将数据库存储在 SD 卡上，否则出于安全问题/原因，我应该将数据库存储在内部存储中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T19:54:06.703

据我了解，您的数据库在应用程序启动时已填充，然后您不再需要添加食谱，对吗？

[如果您按照官方文档的建议使用 SQLiteOpenHelper](http://developer.android.com/guide/topics/data/data-storage.html#db)，您可以调用将所有数据从 onCreate、onUpdate 和 onDownGrade 方法插入数据库的函数。

正如您[在此处](http://code.ohloh.net/file?fid=raAyL7dcRAF4dtLNBqAPvnn5qTs&cid=wuv_PIvpxK8&s=SQLiteOpenHelper&pp=0&fp=306234&fl=Java&fd=cdef&ff=1&filterChecked=true&mp=0&ml=1&me=1&md=1&browser=Default#L248)看到的那样，这些方法在事务之间被调用，因此您重构代码的努力就像将方法调用从一个类移到另一个类一样困难。

```
 db.beginTransaction();
       try {
            if (version == 0) {
                onCreate(db);
            } else {
                if (version > mNewVersion) {
                    onDowngrade(db, version, mNewVersion);
                } else {
                    onUpgrade(db, version, mNewVersion);
                }
            }
            db.setVersion(mNewVersion);
            db.setTransactionSuccessful();
        } finally {
            db.endTransaction();
        } 
```

如果你不是，我强烈建议你使用一个，它会使你的数据库在不同版本之间的升级更容易：

[这里的文档](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)

附加参考：

即使与 android 没有直接关系，这是一篇有趣的文章，它讨论了快速插入的优化。 [http://www.altdevblogaday.com/2012/05/16/sql-server-high-performance-inserts/](http://www.altdevblogaday.com/2012/05/16/sql-server-high-performance-inserts/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T11:30:22.657

您可以在 android 中使用[InsertHelper](http://developer.android.com/reference/android/database/DatabaseUtils.InsertHelper.html)。

通过使用这个类，您实际上可以在不到一秒的时间内完成插入操作。

:O

要知道如何实现这一点，请参阅：http: [//orange-coding.net/2012/04/13/inserthelperandroid/](http://orange-coding.net/2012/04/13/inserthelperandroid/)

[http://www.mysamplecode.com/2011/10/android-sqlite-bulk-insert-update.html](http://www.mysamplecode.com/2011/10/android-sqlite-bulk-insert-update.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T11:41:01.573

使用 pc 创建 sqlite 数据库并将该数据库运行时放在 android 数据文件夹中。使用下面的代码复制数据库。

我正在使用此代码，我正在我的电脑中创建数据库，并将该数据库放入资产文件夹中。

并且该数据库复制运行时并放入android中的数据文件夹中。

[在 android 数据文件夹中复制数据库 在](https://stackoverflow.com/questions/15897168/copy-data-base-in-android-data-folder/15897357?noredirect=1#15897357)[此处输入链接描述](https://stackoverflow.com/questions/15897168/copy-data-base-in-android-data-folder/15897357?noredirect=1#15897357)

# ios - iOS - NSArray indexOfObject 不调用自定义 isEqual

> ID：15924368
> 
> 赞同：3
> 
> 时间：2013-04-10T11:17:57.547
> 
> 标签：ios, objective-c

我有一个覆盖 isEqual 方法的人员类：

```
#import "People.h"

@implementation People
@synthesize name = _name;

-(BOOL)isEqual:(id)object {
    NSLog(@"A.isEqual called");

    if ([object isKindOfClass:[NSString class]]) {
        NSString *name = object;
        return [self.name isEqualToString:name];
    }
    return [super isEqual:object];
}

@end 
```

当我在数组中找到人时，它不会调用 isEqual 方法：

```
People* p1 = [People new];
        p1.name = @"A";

        People* p2 = [People new];
        p2.name = @"B";

        NSArray* peopleArray = [NSArray arrayWithObjects:p1, p2, nil];

        NSLog(@"find A %ld", [peopleArray indexOfObject:@"A"]);

        NSLog(@"isEqual A -> %@", [p1 isEqual:@"A"] ? @"Yes" : @"No"); 
```

这是输出：

```
2013-04-10 18:15:47.988 runone[6273:303] find A 9223372036854775807
2013-04-10 18:15:47.988 runone[6273:303] A.isEqual called
2013-04-10 18:15:47.989 runone[6273:303] isEqual A -> Yes 
```

你知道这是为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T12:00:51.403

尽管 Apple 的文档[说它](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)`isEqual:`被发送到数组中的每个对象，但它却反过来 - 发送到`isEqual:`您正在搜索的对象。

既然假设 ，`[a isEqual:b] == [b isEqual:a]`在大多数情况下它不应该有任何区别，但在你的情况下它会产生影响。

这是一个例子：

```
People* p1 = [People new];
p1.name = @"A";

People* p2 = [People new];
p2.name = @"B";

People* p3 = [People new];
p3.name = @"C";

NSArray* peopleArray = [NSArray arrayWithObjects:p1, p2, p3, nil];

NSLog(@"find A %ld", (unsigned long)[peopleArray indexOfObject:p3]); 
```

在 People 的 isEqual 方法中：

```
-(BOOL)isEqual:(id)object
{
    NSLog(@"A.isEqual called %@", [self name]);
    ...
} 
```

输出：

```
A.isEqual called C
A.isEqual called C
find A 2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T17:15:26.517

如果`a == b`，那么`b == a`。

或者，就 Objective-C 而言，如果`[a isEqual:b]`, then也**`[b isEqual:a]`**必须**为 true**。

您`-isEqual:`违反了该规则。

如何`NSArray`使用这些`isEqual:`方法完全是一个实现细节，除此之外*`isEqual:`将用于包含测试*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T03:41:54.850

As kovpas's answer, I change isEqual method to adapt with the new idea:

```
#import "People.h"

@implementation People
@synthesize name = _name, age = _age;

-(BOOL)isEqual:(id)object {
    NSLog(@"A.isEqual called");

    if ([object isKindOfClass:self.class]) {
        People *p = object;
        return [self.name isEqualToString:p.name];
    }
    return [super isEqual:object];
}

@end 
```

Then add desired String to compare into a people

```
 People* p1 = [People new];
        p1.name = @"A";

        People* p2 = [People new];
        p2.name = @"B";

        NSArray* peopleArray = [NSArray arrayWithObjects:p1, p2, nil];

        People* p3 = [People new];
        p3.name = @"A";

        NSLog(@"find A %ld", [peopleArray indexOfObject:p3]); 
```

It will work like a charm :)

```
2013-04-11 10:28:55.659 runone[1029:303] A.isEqual called
2013-04-11 10:28:55.659 runone[1029:303] find A 0 
```

# c - 列表前后的 C 枚举标签 - 类型或 var 名称？

> ID：15924377
> 
> 赞同：3
> 
> 时间：2013-04-10T11:18:13.407
> 
> 标签：c, enums

我看到很多场合（谷歌搜索）枚举声明如下：

`enum enum_tag {a = 0, b, c, d} tag_again;`

`enum enum_tag {a = 0, b, c, d};`

或者

`enum {a = 0, b, c, d} tag_again;`

有时似乎 enum_tag 是类型，而 tag_again 是变量名，但如果 enum_tag 不存在，则 tag_again 似乎有时被用作两者之一。这是什么？

如果我要编码 `enum {a = 0, b, c, d} tag_again;` tag_again 是枚举类型还是无名枚举类型的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:26:05.427

继续我的谷歌搜索，MSDN 给了我答案：[MSDN C Enum Declarations](https://docs.microsoft.com/en-us/cpp/c-language/c-enumeration-declarations)

`enum enum_tag {a = 0, b, c, d} tag_again;`定义枚举类型 enum_tag 并声明该类型的变量：tag_again。

`enum enum_tag {a = 0, b, c, d};`定义 enum_tag 的枚举类型

和

`enum {a = 0, b, c, d} tag_again;`声明一个无名枚举类型的变量 tag_again （如我所想）

# c# - 使用数组指向对象并打印到屏幕？

> ID：15924380
> 
> 赞同：0
> 
> 时间：2013-04-10T11:18:18.993
> 
> 标签：c#, arrays, object, pointers

我在使用数组指向一个对象然后将该对象的内容打印到屏幕上时遇到问题。

到目前为止，我的代码是：

```
 //Card
        Card cardPack = new Card();
        string[] myCard = new string[10];

        //card objects
        Card cardOne = new Card();
        {
            cardPack.name = "Vodka";
            cardPack.percentage = '5';
            cardPack.quality = '6';
            cardPack.quantity = '4';
            cardPack.taste = '3';
        } 
```

据我所知，这段代码有效，因为我没有任何类型的错误。

```
 //Card Array
        myCard[0] = Convert.ToString(cardOne); 
```

然后我用它来指向实际的对象，这又不会出错，所以我认为它工作正常。

```
 Console.WriteLine(myCard[0]); 
```

这也不会出错，但是当我尝试运行程序时，我得到的唯一输出是

```
 "Card" 
```

我很困惑！你能帮我么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:22:08.360

您需要覆盖`ToString()`方法才能做到这一点。

请参阅以下代码作为示例：

```
public override string ToString()
{
    string stringForm = string.Format("{0},{1},{2},{3},{4}", name,percentage, quality, quantity, taste);
    return stringForm;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:20:49.157

您正在创建一个对象并将其转换为 String 而不是使用名称。这导致输出对象类型的名称，即“卡片”。

试试这个：

```
//Card Array
myCard[0] = cardOne.name; 
```

更好的是改变你的数组：

```
//string[] myCard = new string[10];
Card[] myCard = new Card[10];
myCard[0] = cardOne;
Console.WriteLine(myCard[0].name); 
```

当然，您可以覆盖该`ToString()`方法，但我猜这不是您想要的。

编辑：阅读您对首选输出的评论后，此代码可能会按照您的意愿执行：

```
Console.WriteLine("Name: " + myCard[0].name);
Console.WriteLine("Percentage: " + myCard[0].percentage);
Console.WriteLine("Quality: " + myCard[0].quality);
Console.WriteLine("Quantity: " + myCard[0].quantity);
Console.WriteLine("Taste: " + myCard[0].taste);
Console.WriteLine(""); 
```

或者如你所说：

```
Console.Write("myCard[0].name);
Console.Write(" " + myCard[0].percentage);
Console.Write(" " + myCard[0].quality);
Console.Write(" " + myCard[0].quantity);
Console.Write(" " + myCard[0].taste);
Console.WriteLine(""); 
```

请注意，这仅在您将数组转换为卡片数组时有效`Card[] myCard = new Card[10];`（考虑将名称从“myCard”更改为“allCards”或类似的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T11:22:49.483

重写 Card 类的 ToString 方法。

```
 public class Card
 {
    public string Name { get; set; }
    public override string ToString()
    {
         return string.Format("CardName: {0}", Name);
    }
 } 
```

之后，您可以将 Card 对象存储在 Card 数组中，WriteLine 将在控制台上显示正确的值（在 ToString() 中设置）。

```
Card[] myCard = new Card[10];

Card cardOne = new Card();
cardOne.name = ...

 myCard[0] = cardOne;
 Console.WriteLine(myCard[0]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T11:21:56.587

Covert.ToString 将 CardOne 对象转换为字符串。这意味着转换类名。你应该在你的类中转换一个显式对象。

*   编辑 Joetjah 刚刚向您展示了我的意思。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T11:22:40.867

您不能按原样打印对象。

`Console.WriteLine(myCard[0]);`打印对象的类型，这就是它返回的原因`"Card"`。

所以你必须访问对象的每个成员然后打印它。

因此，要获得您必须使用的成员，`mycard[index].<member name>` 例如：`mycard[0].name`

我希望这对你有帮助，否则请告诉我。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T11:23:35.230

你可能想要的是：

```
Card[] myCard = new Card[10];

(...)

myCard[0] = cardOne; 
```

然后这个：

```
Console.WriteLine(myCard[0].ToString()); 
```

...将输出调用`ToString()`type/class 的 -method 的结果`Card`。

我假设这就是你想要的？

**更新**；将这样的内容添加到您的`Card`课程中

```
 public override string ToString()
    {
        return name + " " 
               + percentage + " "  
               + quality + " "  
               + quantity + " "  
               + taste + " " );
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-10T11:24:56.517

您得到的输出是您存储在 cardOne 中的对象的名称，即“卡片”对象。

如果您想要的是“伏特加”，您的代码应该类似于：

```
//Card Array
myCard[0] = Convert.ToString(cardOne.name); 
```

由于 name 已经是一个字符串，您可以将其简化为：

```
//Card Array
myCard[0] = cardOne.name; 
```

# javadoc - Javadoc 中的 ASCII 艺术

> ID：15924383
> 
> 赞同：3
> 
> 时间：2013-04-10T11:18:36.207
> 
> 标签：javadoc

我正在尝试在我的 javadoc 中添加一些 ascii 艺术。我正在尝试使用“pre”标签，但它对我不起作用。我仍然得到一些凌乱的灌木；/有人有类似的问题吗？

# ios - Xamarin Monotouch Google Conversion Tracking 以跟踪实际应用下载

> ID：15924391
> 
> 赞同：2
> 
> 时间：2013-04-10T11:19:09.407
> 
> 标签：ios, xamarin.ios, xamarin, google-ads-api

我们的 SEO 团队已要求我将 Google 转化跟踪添加到我们的应用程序中。

他们给我发了以下文字。任何知道如何通过 Monotouch 实现这一点的人？我并没有真正遵循片段的作用，所以不知道如何重写它？Google SDK 在 Obj C 中？

有任何想法吗 ？

以下是有关如何实施转化跟踪以跟踪实际应用下载的说明。应用程序开发人员必须实现这一点。

> *   第 1 步：下载此 SDK 并将其导入您的 Xcode 项目[http://dl.google.com/googleadmobadssdk/googleconversiontrackingsdkios.zip](http://dl.google.com/googleadmobadssdk/googleconversiontrackingsdkios.zip)
> *   第 2 步：通过您要跟踪的应用程序拨打电话。将以下代码添加到您的`application:didFinishLaunchingWithOptions:`方法中。
> 
> 了解详情： http:
> [//adwords.google.com/support/aw/bin/answer.py?answer](http://adwords.google.com/support/aw/bin/answer.py?answer=115794&hl=en_US) =115794&hl=en_US 。
> // Google iOS 下载跟踪代码段
> // 要跟踪您的应用程序的下载，请将此代码段添加到您的
> // 应用程序委托的`application:didFinishLaunchingWithOptions:`方法中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:31:28.643

出于某种原因，我最初的 Google 搜索一无所获，但更多的研究产生了以下代码，看起来很有希望。

[https://bitbucket.org/kirk/google-conversion-tracking-monotouch/commits/6f18a0a9555f93b868fa8f516df9c694](https://bitbucket.org/kirk/google-conversion-tracking-monotouch/commits/6f18a0a9555f93b868fa8f516df9c694)

# .net - 未处理的异常未停止执行

> ID：15924394
> 
> 赞同：1
> 
> 时间：2013-04-10T11:19:14.587
> 
> 标签：.net, vb.net, exception, exception-handling, unhandled-exception

我的应用程序中有以下代码，它正在处理以下`Load`事件 `System.Windows.Forms.Form`：

```
Private Sub frmBillingPoller_Load(ByVal eventSender As System.Object, ByVal eventArgs As EventArgs) Handles MyBase.Load

       Throw New Exception("I should be unhandled")

End Sub 
```

当我在方法签名上放置一个断点时，我可以看到调用堆栈中的任何地方都没有`Try...Catch`语句。据我所知，VB.NET 没有任何忽略未处理异常的属性或设置（尽管它不会让我感到惊讶）。

那么为什么在这种特殊情况下异常不会停止执行呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:30:53.100

我建议您阅读这篇文章，该文章解释了当您在 x64 位操作系统上的 form_load 事件发生异常并且您的应用程序针对 AnyCPU 编译时会发生什么（意味着您的代码作为 64 位代码执行）

[Visual Studio 调试器无法捕获 Windows 窗体或 WPF 应用程序的未处理异常](http://blogs.msdn.com/b/debugger/archive/2010/05/12/visual-studio-debugger-fails-to-catch-unhandled-exception-for-a-windows-form-or-wpf-application.aspx)

用我非常简单的话来说。在上面的场景中，OS64 捕获了异常并且调试器没有被告知这一点。所以你看不到任何异常，但是 form_load 事件停止运行。
如果您在异常之后编写一些其他代码，并且如果它位于 try/catch 块内，您将看到 catch 块代码未执行。控件返回到您显示表单的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:31:38.807

更改项目定义以编译 AnyCPU 或显式编译为 x86

如果您需要在 x64 中构建，那么一种方法是使用菜单 Debug -> Exceltions 并选中所有“Thrown”复选框。这使得程序在所有异常上都停止，即使它们是在 Try..Catch 块中处理的。

# rtc - RTC 代理服务器是只读的吗？

> ID：15924395
> 
> 赞同：1
> 
> 时间：2013-04-10T11:19:15.820
> 
> 标签：rtc, jazz, ibm-jazz

在 RTC 中，针对 Global Software 开发场景，有缓存代理的概念。
据我了解，它只是一个只读代理，有助于在远程位置加载组件。[scm 部分]
当更改传输到中央服务器时，所有提交和交付操作，更改直接通过 WAN 发送。因此，这些操作不会从代理中受益。这种理解正确吗？

或者代理是否有助于提高远程交付/提交操作的性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:33:19.103

缓存代理在：

*   “ [Rational Team Concert 是否支持 MultiSite？](https://jazz.net/blog/index.php/2010/10/04/does-rational-team-concert-support-multisite/) ”
*   "[使用 Jazz Source Control 的内容缓存代理](https://jazz.net/library/article/325)"

> 我们意识到仍然存在 WAN 连接无法满足 200 毫秒指导的情况。在这种情况下，我们利用 RTC 的 Web 架构来允许使用缓存代理。
> 基于标准的 Web 缓存技术，IBM 或 Apache HTTP Server 或 Squid，可以在与中央服务器连接不佳的位置部署缓存。
> 此缓存代理将缓存从服务器获取的 SCM 内容，从而大大提高 RTC 客户端的访问时间，并减少网络上的流量。

所以在RTC的情况下，更有针对性地加快“Load”和“Accept”和操作，而不是“Commit”和“Deliver”。
如果多个开发人员都从特定流加载，缓存代理将有助于减少网络流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-14T08:37:04.443

我们意识到仍然存在 WAN 连接无法满足 200 毫秒指导的情况。在这种情况下，我们利用 RTC 的 Web 架构来允许使用缓存代理。基于标准的 Web 缓存技术，IBM 或 Apache HTTP Server 或 Squid，可以在与中央服务器连接不佳的位置部署缓存。此缓存代理将缓存从服务器获取的 SCM 内容，大大提高 RTC 客户端的访问时间，并减少网络上的流量。所以在RTC的情况下，更有针对性地加快“Load”和“Accept”和操作，而不是“Commit”和“Deliver”。如果多个开发人员都从特定流加载，缓存代理将有助于减少网络流量。

# php - 使用 PHP 从数据库中检索数据

> ID：15924396
> 
> 赞同：0
> 
> 时间：2013-04-10T11:19:21.413
> 
> 标签：php, mysql

我正在尝试使用 PhP 从 mysql 检索数据。我只是在测试我的 PHP 文件。如果这可行，那么我将开始努力将这些结果发送到我的 Android 应用程序。

显示的 PHP 结果始终为空。我可以确认数据库中有可用的数据。

DATABASE 有一个名为：

人口 - 字段包括：id、性别、城市、州

结果总是：

{"成功":1,"数据":[{"id":null,"gender":null,"city":null,"state":null}]}

我不确定代码中有什么问题：

```
 <?php
  include("db_config.php");

  $response = array();

  $gender = 'Male';

  // get a product from products table
  $result = mysql_query("SELECT * FROM population WHERE gender = '$gender'");

  if (!empty($result)) 
   {
    // check for empty result
    if (mysql_num_rows($result) > 0) 
     {

        $result = mysql_fetch_array($result);

        $data = array();

        $data ["id"] = $row["id"];
        $data ["gender"] = $row["gender"];
        $data ["city"] = $row["city"];
        $data ["state"] = $row["state"];

        // success
        $response["success"] = 1;

        $response["data"] = array();
        array_push($response["data"], $data);
        echo json_encode($response);
       }
    else 
     {
        $response["success"] = 0;
        $response["message"] = "No data found";

        echo json_encode($response);
     }
    }
  else 
   {

    $response["success"] = 0;
    $response["message"] = "No data found";
    echo json_encode($response);
     } 
  ?> 
```

有人可以帮我解决这个 php 代码吗？我在过去三天一直在研究这个问题没有得到任何解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:23:09.103

现在就试试，

```
if (mysql_num_rows($result) > 0) 
     {

        $row = mysql_fetch_array($result);  // wrong initialize to the result value

        $data = array();

        $data ["id"] = $row["id"];
        $data ["gender"] = $row["gender"];
        $data ["city"] = $row["city"];
        $data ["state"] = $row["state"];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:25:14.313

改变这个

```
$result = mysql_fetch_array($result); 
```

至

```
$row = mysql_fetch_array($result); 
```

使用以下代码获取所有数据

```
while($row = mysql_fetch_array($result)) {
    $data = array();
    $data ["id"] = $row["id"];
    $data ["gender"] = $row["gender"];
    $data ["city"] = $row["city"];
    $data ["state"] = $row["state"];
    // success
    $response["success"] = 1;
    $response["data"][] = array();
    array_push($response["data"][], $data);
}
echo json_encode($response); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:23:29.480

PHP 中的变量放在单引号之间时不会被计算。

```
"SELECT * FROM population WHERE gender = '$gender'" 
```

尝试串联：

```
$query = "SELECT * FROM population WHERE gender = '" . $gender "'";
mysql_query($query); 
```

PS：除了这个错误，我要告诉你最好不要再使用mysql_*函数了，使用mysqli或者pdo！

# r - 在索引变量中使用 NA 子集 R 数据帧

> ID：15924398
> 
> 赞同：1
> 
> 时间：2013-04-10T11:19:31.467
> 
> 标签：r

我有一个包含流行病学数据（48232 行和 74 列）的大型数据框。我将它作为 .csv 文件读入 R 并使用命令 na.strings="NA"。我有几个二分变量，YES/NO 答案编码为 0=YES，1=NO。这些变量也包含 NA。我想创建一个包含所有列的新数据框，但删除那些具有 Diab=0 的样本，而**不是**删除 Diab=NA。我为此使用方括号。**这样做时，新数据框的维度是正确的，但是，对于新数据框中的所有**其他二分变量，所有 Diab=NA 的样本最终都为 NA ！我该如何解决这个问题？我试图生成一个小例子：

```
 Diab<-c(0,NA,1,1,1,0,0,NA, NA)
INF<-c(0,1,1,1,1,1,NA, 0,1)
HYP<-c(NA, 0,1,0,NA,1,1,1,1)

a<-data.frame(cbind(Diab, INF, HYP))
dim(a)
table(a$Diab,a$HYP, exclude=NULL, dnn=c("Diab", "HYP"))
#In total 2 persons HYP=0, 5 persons HYP=1, 2 persons HYP=NA. 

b<-a[!a$Diab==0,]
dim(b)
##When removing those Diab=0 I'm expecting to still have 2 persons HYP=0, 
#3 persons HYP=1 and 1 person HYP=NA, but not...

table(b$HYP, exclude=NULL, dnn="HYP")
#6 persons in total but those that were Diab=NA are now turned into HYP=NA??

#The same happens with the INF variable.
table(a$Diab,a$INF, exclude=NULL, dnn=c("Diab", "INF"))
table(b$INF, exclude=NULL, dnn="INF") 
```

我已经阅读了[关于神秘 NA 行的这个 SO 问题](https://stackoverflow.com/questions/14261619/subsetting-r-data-frame-results-in-mysterious-na-rows)和[关于子集与括号的邮件列表线程，](http://r.789695.n4.nabble.com/Inexplicably-different-results-using-subset-vs-bracket-notation-on-logical-variable-td4641497.html) 但不幸的是，即使它看起来有点熟悉，它也没有帮助我......

任何帮助我都会非常高兴！谢谢，夏洛塔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:45:34.250

问题在于您试图对包含`NA`. 您将必须制定一种更有效的方法来对数据集进行子集化。

正如你所写：

```
> a$Diab
[1]  0 NA  1  1  1  0  0 NA NA 
```

这些值中的哪一个不等于零？

```
> !a$Diab==0
[1]  TRUE    NA FALSE FALSE FALSE  TRUE  TRUE    NA    NA 
```

如你看到的。在评估 NA:s 时，您会得到 NA:s 作为答案。以同样的方式，您不能执行以下操作：

```
> c(NA,NA,3)+1
[1] NA NA  4 
```

您明白了。该脚本无法在数据框中选择正确的行，因为它返回`NA`s ，因此您在子集数据框中得到`NA`s 。

解决方案：要么将`NA`s 更改为您可以更轻松处理的内容（如果需要），要么调整脚本以对针对`NA`值调整的数据进行子集化。`is.na()`是可以用于这种情况的函数。因此，让我们选择所有不等于 0 的值或`NA`Diab 列中的值：

```
> a[(a$Diab != 0) | is.na(a$Diab),]
  Diab INF HYP
2   NA   1   0
3    1   1   1
4    1   1   0
5    1   1  NA
8   NA   0   1
9   NA   1   1 
```

有关缺失值的更多信息，[请查看此处](http://cran.r-project.org/doc/manuals/R-intro.html#Missing-values)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:27:54.810

我认为这可以满足您的要求：

```
> a[(a$Diab != 0) | is.na(a$Diab),]
  Diab INF HYP
2   NA   1   0
3    1   1   1
4    1   1   0
5    1   1  NA
8   NA   0   1
9   NA   1   1 
```

您需要找到`Diab`不等于零 ( `!= 0`) 或不等于`NA`( ) 的条目`is.na`。布尔运算符的`|`意思是`OR`。

# asp.net - 根据用户的访问权限显示网页内容

> ID：15924399
> 
> 赞同：0
> 
> 时间：2013-04-10T11:19:33.463
> 
> 标签：asp.net

我有几个具有相同行为的 ASP.NET 页面：

1.  每个页面都有自己的内容（例如表格和表格）
2.  每个页面链接到 2 个 web 用户控制文件以显示菜单框架
3.  在 上`Page_Init`，检查用户是否有权查看内容。如果他们无权访问，该页面将显示一条消息并且不会显示剩余内容。菜单框架仍将显示。

我是 ASP.NET 的新手，所以我只能考虑`<div>`根据访问权限来处理内容标签的可见性。我想知道是否还有其他方法可以解决它。我正在使用 VB 作为后面的代码。请建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:24:54.507

您可以将部分包装在 a 中`PlaceHolder`并简单地将其关闭，例如：

```
<asp:PlaceHolder ID="AuthUserStuff" runat="server">
    <div>
        ...
    </div>
</asp:PlaceHolder> 
```

在您的代码隐藏中，您可以简单地执行以下操作：

```
AuthUserStuff.Visible = User.IsAuthenticated; 
```

`PlaceHolder`具有额外的优势，即如果隐藏，内容将不会呈现给客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:24:51.350

使用您控制可见性的 div 标签是不好的，这意味着用户只需执行“查看源代码”并且所有内容都将在那里。

相反，您不应该将内容添加到您使用的任何控件（或使用@Lloyd 描述的控件）或[将他重定向](http://msdn.microsoft.com/en-us/library/ms524309%28v=vs.90%29.aspx)到自定义 403 页面（无访问权限）。

# asp.net-mvc - 将选定的列表框项目发送到控制器

> ID：15924404
> 
> 赞同：1
> 
> 时间：2013-04-10T11:19:54.437
> 
> 标签：asp.net-mvc, razor, listbox

我的场景是好的我有一个多选列表框，我想要的是当我们选择多个记录并按下按钮时，我应该在控制器的调用方法中选择项目列表。我的代码在下面

**csthml 代码：**

```
@{
 Layout = "";
}
@using Telerik.Web.Mvc.UI;
@using System.Web;
@using System.Web.UI.WebControls;
@using System.Web.Mvc;

@model Nop.Plugin.Import.Product.Models.ImportProductModel
<div>
<div class="section-header">
    <div class="options">            
    @using (Html.BeginForm("ImportSelected",  "ImportProduct"))
    {
        <button type="submit">OK</button>
    }
    </div>
 </div>

 <table>
    <tr>
        <td>
            @Html.ListBox("Items", Model.nopCommerceCategories);
        </td>

        <td>
            @Html.ListBox("Items", Model.ClockCategories);
        </td>
    </tr>
    <tr>
        <td>
                @using (Html.BeginForm("SaveMapping", "ImportProduct"))
                {
                    <button type="submit">Save</button>
                }
        </td>
    </tr>
  </table>        
 </div> 
```

**模型 ：**

```
using System.Collections.Generic;
using System.Web.Mvc;
using Nop.Core.Domain.Catalog;

namespace Nop.Plugin.Import.Product.Models
{
    public class ImportProductModel
    {        
        public List<SelectListItem> nopCommerceCategories { get; set; }
        public List<SelectListItem> ClockCategories { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:02:30.307

你的表单里面只有一个提交按钮，你应该把你的列表框放在一个表单中，当表单提交时，列表框的值和表单内的所有其他内容都将发送到表单指向的操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:00:12.210

注意：列表框的第一个参数是您要发送到控制器的名称！因此，您应该使用这样的代码：

```
@Html.ListBox("nopCommerceCategories", Model.nopCommerceCategories);
@* or this code :
@Html.ListBoxFor(model => model.nopCommerceCategories);
*@ 
```

然后当您使用以下签名调用您的控制器时：

```
 public ActionResult SaveMapping(ImportProductModel ipm) {
     // here you have access to ipm.nopCommerceCategories
 } 
```

此外，您必须将所有代码与您想要以一种形式获取的数据一起封装！如果您想提交多个操作，请添加一个 javascript 代码以检索正确的操作以提交您的数据...

# .net - 无法为 FilesResource 的任何请求解析符号“Fetch”

> ID：15924405
> 
> 赞同：1
> 
> 时间：2013-04-10T11:19:55.200
> 
> 标签：.net, google-drive-api

我正在尝试升级到[Google Drive .NET API 1.3](https://code.google.com/p/google-api-dotnet-client/wiki/ReleaseNotes#Version_1.3_%28beta%29)。但似乎他们已经删除了所有文件请求的 Fetch() 方法。所以，我在这样的代码中有“无法解析符号'Fetch'”错误：

```
DriveService service = GetDriveService();
var request = service.Files.Get(id);
var response = request.Fetch(); 
```

还有其他方法可以处理 Google Drive 文件和文件夹吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T21:53:09.310

最新版本的 Google APIs .NET 客户端库仍然实现了 Fetch 方法请求对象。以下代码段/您的代码段是有效示例：

```
DriveService service = GetDriveService();
request = service.Files.Get(id).Fetch(); 
```

# javascript - 将每一行包装成跨度标签（IE7）

> ID：15924407
> 
> 赞同：3
> 
> 时间：2013-04-10T11:20:02.807
> 
> 标签：javascript, html, css

我现在有一个适用于所有浏览器 GTE IE8 的脚本

我也需要它在 IE7 中工作，有人能告诉我我在这个脚本中做错了什么吗

![Chrome 向上，IE7 向下](https://i.stack.imgur.com/JMz1B.png)

在这张图片中，您会看到它在所有其他浏览器中的工作原理，并且您会看到 IE7 中的黑暗区域是错误区域，因为背景在 div 上而不是在线上

![IE7 向上，Chrome 向下](https://i.stack.imgur.com/UdMO8.png)

来自 IE7 和 Chrome 的 Kode

最后但并非最不重要的是我的脚本来实现这一点：

```
function padSubsequentLines(element) {
            var words = element.innerHTML.split(' ');
            element.innerHTML = '';
            for (var i = 0; i < words.length; i++) {
                element.innerHTML += '<span>' + words[i] + '</span> ';
            }
            var spans = element.childNodes;
            var currentOffset = spans[0].offsetTop;
            var html = '<span class="line">';
            for (var i = 0; i < spans.length; i++) {
                if (spans[i].nodeType === 3)
                    continue;
                if (spans[i].offsetTop > currentOffset) {
                    html += '</span><span class="line">';
                    currentOffset = spans[i].offsetTop;
                }
                html += spans[i].innerHTML + ' ';
            }
            html += '</span>';
            element.innerHTML = html;
    } 
```

正文标签 htmlscript

```
<body onload="padSubsequentLines(document.getElementById('question_heading'));"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:35:41.413

从这个问题中并不清楚你到底想要达到什么目的。通过阅读代码，您似乎将每个单词包装在一个跨度中，然后使用该跨度的位置来确定它是否在新行上，这会导致同一行上的每个单词在一个新的跨度，每个都有 class="line"。

虽然读取新形成的跨度的偏移位置（在同一代码块中形成）可能会导致您的 IE7 问题，因为它的位置信息可能还没有被重新计算......它确实提出了一个问题，即你为什么这样做这个？特别是如果您考虑到函数的名称`padSubsequentLines`。

如果您所做的只是在您应该`line-height:`在样式/css 中使用的单词行之间进行填充。

### 更新

我建议——假设你不能直接访问标记，这很有可能——你只坚持你的第一部分代码。这将是用跨度包装每个单词的部分。在这些跨度上，我会应用应用你想要的背景颜色的类，应该不需要将它们组合成它们的组成线。这将消除计算的需要`offsetTop`，甚至应该适用于 IE7。正如我之前所说，如果您需要行之间的填充，请使用`line-height`.

```
function padSubsequentLines(element) {
  var 
    words = element.innerHTML.split(' '),
    count = words.length,
    html = '',
    i
  ;
  for (i=0; i<count; i++) {
    html += '<span class="background">' + words[i] + ' </span>';
  }
  element.innerHTML = html;
} 
```

***注意**：您需要确保单词之间的空格保持在跨度内，以便背景颜色看起来无缝。*

在上述之后，如果您在 IE7 中拉伸背景色以填充空间方面仍有问题，我会查看您的 span 元素的 CSS 定义，并确保它们不是`overflow:hidden`,`zoom:1`或`display:block`.

# java - Wicket - 通过 LoginPage 传递 PageParameters

> ID：15924410
> 
> 赞同：1
> 
> 时间：2013-04-10T11:20:07.853
> 
> 标签：java, wicket, wicket-6

我想要做的是一个简单的页面，它获取一个参数，它是一个对象的*id*。

```
 @MountPath("share/${share_id}")
    public class IndexPage extends WebPage
    {
            public IndexPage(PageParameters parameters)
            {
                    String id = parameters.get("share_id").toString();
                    // etc...
            }
    } 
```

此页面必须防止未经授权的访问。我添加了*@AuthorizeInstantiation("user")*注释和托管标准 Wicket 安全支持，包括扩展*AuthenticatedWebApplication*的*MainApplication中的**getSignInPageClass()*。

 ****问题是当我需要在使用原始参数**授权后返回我的*IndexPage*时。我得到了一些解决方案，但我需要它更优雅、更常见（通用）。

 **1.  覆盖Application 类中的*restartResponseAtSignInPage()*方法
2.  *从RequestCycle*检索参数：

    ```
    final Request request = RequestCycle.get().getRequest();
    PageParametersEncoder encoder = new PageParametersEncoder();
    PageParameters parameters = encoder.decodePageParameters(request.getUrl()); 
    ```

3.  通过抛出*new RestartResponseAtInterceptPageException(getSignInPageClass(), newParameters);来传递它们*

我知道这不是一个好的解决方案，因为我需要确定我的 url 中参数的确切索引是什么（编码器只返回 indexedParameters，而不是 namedParameters - 或者我做错了什么？）。

也许有人以前遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:31:37.127

在您的 Siginpage 中，验证登录后，拨打`continueToOriginalDestination();`

这应该可以解决问题。****

# ios - UITableViewCell imageView padding

> ID：15924412
> 
> 赞同：9
> 
> 时间：2013-04-10T11:20:10.980
> 
> 标签：ios, cocoa-touch

我想为 UITableView 单元格 imageView 设置边距或填充，我该怎么做？我`heightForRowAtIndexPath`只能设置行高。如果我增加它，它只会放大单元格中的图像。

这是我的 cellForRow 方法

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellID = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellID] autorelease];
        cell.textLabel.numberOfLines = 1;
        cell.textLabel.font = [UIFont systemFontOfSize:kSystemFontSize];
        cell.accessoryType = UITableViewCellAccessoryNone;
        cell.textLabel.textColor = [UIColor whiteColor];
    }
    cell.textLabel.text = [_dataArray objectAtIndex:indexPath.row];
    cell.imageView.image = [UIImage imageNamed:[_imageArray objectAtIndex:indexPath.row]];
    cell.backgroundColor = [UIColor clearColor];

    return cell;
} 
```

目前我只知道一种方法可以做到这一点 - 使用 Photoshop 或类似程序缩小图像的图像内容，同时保持不变。但是这种方法会花费很多时间，我想应该有更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-10-28T10:28:46.613

没有子类化：

```
cell.imageView.transform = CGAffineTransformScale(CGAffineTransformIdentity, .5, .5); 
```

根据您的情况以正确的比例更改“.5”

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-10T11:27:15.817

这里最好的解决方案是创建您自己的单元格，在其中添加图像、标签`contentView`并根据需要调整它们。

但是还有另一种方法，您需要再次创建一个子类`UITableViewCell`并覆盖`layoutSubviews`选择器：

```
- (void)layoutSubviews
{
    [super layoutSubviews];
    self.imageView.frame = CGRectMake(10, 10, 50, 50);
    self.imageView.contentMode = UIViewContentModeCenter;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-17T06:19:14.873

这适用于 iOS 7：

```
- (void)layoutSubviews
{
    [super layoutSubviews];
    CGRect imageViewFrame = self.imageView.frame;
    imageViewFrame.origin.x = 10;
    imageViewFrame.origin.y += 5;
    imageViewFrame.size.height -= 10;
    imageViewFrame.size.width -= 10;
    self.imageView.frame = imageViewFrame;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-25T13:27:33.037

为 swift3 更新

```
cell?.imageView?.transform = CGAffineTransform(scaleX: 0.6, y: 0.6) 
```

# visual-studio-2012 - InstallShield(LE) - 传递可在自定义操作 exe 中使用的命令行参数

> ID：15924413
> 
> 赞同：2
> 
> 时间：2013-04-10T11:20:11.157
> 
> 标签：visual-studio-2012, installation, installshield-le

我正在使用`InstallShield(Limited Edition)`in创建一个设置`VS2012`。首先，我创建了一个安装文件。我还有一些事情要做，所以我创建了一个项目并将其添加`exe`为新的自定义操作`After Initialization(Before First Dialog)`。

![自定义操作 InstallShield 映像](https://i.stack.imgur.com/7NY2W.png)

现在我想从命令行运行这个设置并将参数传递给它。我尝试使用 %1 获取命令行输入的第一个参数，但它不起作用。请告诉如何使用命令行传递参数并在 exe 文件中使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:27:10.220

除非我遗漏了什么，否则 InstallShield Limited Edition 不支持此功能。

从 Windows Installer 的角度来看，您所指的内容称为安全自定义公共属性。（参见：[SecureCustomProperties 属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371571%28v=vs.85%29.aspx)）

考虑命令行：

msiexec /i foo.msi SERVERNAME=MyServer

SERVERNAME 大写的事实使其公开。它列在 SecureCustomProperties 属性中的事实将使其安全。只有在考虑 UAC 时，安全的公共财产才能发挥作用。如果该过程已经提升，那么它不一定是安全的，但它确实应该是安全的。

在自定义操作方面，您使用 [SERVERNAME] 来引用 SERVERNAME 属性的值。

当然，当有人只运行 MSI 但 InstallShield 限量版不支持此功能时，您当然可能希望自定义 UI 体验。

我可以考虑使用 WiX 合并模块和/或对构建的 MSI 应用转换来使其工作的方法，但所有这些都需要高级 MSI 知识，而且通常更容易升级到专业版。

# string - 长度无法解析或不是字段（ArrayList 获取函数）

> ID：15924416
> 
> 赞同：2
> 
> 时间：2013-04-10T11:20:23.220
> 
> 标签：string, arraylist, field

我的代码如下所示：

```
private ArrayList<Action> Actions;
private String Action;

Actions.get(Actions.length-1).getString(); 
```

我在最后一行不断收到错误（长度无法解析或不是字段）。目前这是我的方法的样子，由于这个错误，我无法真正继续：/

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T11:25:36.190

您正在使用 ArrayList，因此您需要使用 size() 而不是 length()。

此外，由于它是一个变量，它应该以小写字母开头：'actions'。否则人们会把它误认为是一个类。你可以在这里找到更多：

[http://www.oracle.com/technetwork/java/codeconv-138413.html](http://www.oracle.com/technetwork/java/codeconv-138413.html)

如果您的问题已得到解答，请在我的帖子旁边的支票上打票，让人们知道这个问题已经解决。花一些时间阅读[常见问题解答](https://stackoverflow.com/faq)以了解其工作原理并欢迎！

# php - 使用 php exec 运行 powershell 脚本时出现问题

> ID：15924417
> 
> 赞同：1
> 
> 时间：2013-04-10T11:20:25.613
> 
> 标签：php, windows, iis, powershell, exec

我在运行有效的 powershell 脚本时遇到了麻烦（从 cmd 测试）。我希望脚本测试用户是否存在于 office 365 上，但身份验证不会通过 php，而它在 cmd 中正常执行。

服务器是 windows 2008 R2、IIS 7.5、PHP 5.4 NTS。

我是一般的 linux 用户，我很难让这个 MS 的东西长时间工作，所以任何建议都非常感谢。

这是我的powershell脚本：

```
$username = "adminuser@my_domain"
$password = "password"
$secstr = New-Object -TypeName System.Security.SecureString
$password.ToCharArray() | ForEach-Object {$secstr.AppendChar($_)}
$cred = new-object -typename System.Management.Automation.PSCredential -argumentlist $username, $secstr

Import-Module MSOnline -force
Connect-Msolservice -Credential $cred

Get-MsolUser -UserPrincipalName student@my_domain 
```

和 php 部分：

```
exec("powershell -Command C:/inetpub/wwwroot/office365/test.ps1 < NUL", $output);
echo '<pre>';
print_r ($output);
echo '</pre>'; 
```

输出结果：

```
Array
(
    [0] => Connect-MsolService : Exception of type 'Microsoft.Online.Administration.Automa
    [1] => tion.MicrosoftOnlineException' was thrown.
    [2] => At C:\inetpub\wwwroot\office365\test.ps1:8 char:20
    [3] => + Connect-Msolservice <<<<  -Credential $cred
    [4] =>     + CategoryInfo          : OperationStopped: (:) [Connect-MsolService], Mic
    [5] =>    rosoftOnlineException
    [6] =>     + FullyQualifiedErrorId : 0x80070002,Microsoft.Online.Administration.Autom
    [7] =>    ation.ConnectMsolService
    [8] => 
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T00:35:12.930

我找到了解决办法。

尝试：

从源复制调用的文件`MSOnline`夹`MSOnline Extended`

> C:\Windows\System32\WindowsPowerShell\v1.0\Modules\

到文件夹

> C:\Windows\SysWOW64\WindowsPowerShell\v1.0\Modules\

然后在 PS 中运行 Import-Module MSOnline，它会自动获取模块：D

# java - 使用 Struts2 Dojo 插件在 Struts 2 中加载 Ajax 内容

> ID：15924419
> 
> 赞同：3
> 
> 时间：2013-04-10T11:20:30.623
> 
> 标签：java, jquery, ajax, jsp, struts2

我在通过 Struts 2 中的 Ajax 调用加载内容时遇到了一个简单的问题（使用 Struts2 Dojo 插件）。它正在正确加载页面中的所有 HTML 内容，但如果该页面内有任何内联 JavaScript 函数，则它不会全部加载。我不知道struts Ajax 是否有一些限制。

**这是我的`parent.jsp`：**

```
<s:head/>
<body>
<div id="casetab2" class="casetab_content">
  <sx:div href="LoadContent" delay="3000">
      Initial Content
  </sx:div>
</div>
</body> 
```

**这是我的`child.jsp`：**

```
<s:text name="name" label="NAME"/>
<script>alert("hello")</script> 
```

**这是我的`struts.xml`：**

```
<action name="LoadContent">
   <result>child.jsp</result>
</action> 
```

结果：`NAME:<textfield>`正在显示，但没有出现警报消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:28:39.980

这是一个已知问题...

从理论上讲，它应该通过简单地添加`executeScripts="true"`到 your 来工作`<sx:div/>`，但如果还不够，请尝试使用该`separateScripts`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:47:33.480

警报消息未发出，因为它未编译为有效的 javascript。如果你打开萤火虫，你会看到错误计数。使用更正的分号版本的代码

```
<script type="text/JavaScript">alert("hello");</script> 
```

其他错误修复：

1) 包括[头部](http://struts.apache.org/release/2.2.x/docs/dojo-head.html)标签

2）根据安德里亚的回答使用[标签属性](http://struts.apache.org/release/2.2.x/docs/ajax-tags.html)

```
<head>
  <sx:head/>
</head>
<body>
  <div id="casetab2" class="casetab_content">
    <sx:div href="LoadContent" delay="3000" separateScripts="false" executeScripts="true">
      Initial Content
    </sx:div>
  </div>
</body> 
```

# twitter-bootstrap - 使用 Bootstrap 创建响应式输入表单

> ID：15924422
> 
> 赞同：1
> 
> 时间：2013-04-10T11:20:37.890
> 
> 标签：twitter-bootstrap, responsive-design

![在此处输入图像描述](https://i.stack.imgur.com/1BHKP.png)

* * *

我正在尝试实现屏幕截图上显示的屏幕。但我无法控制元素之间的空间。我希望它具有响应性，但我想这次我无法管​​理高分辨率屏幕布局。代码如下，我添加了屏幕的线框。当添加一些带有 prepend 的元素时，它总是会破坏我的 deams :)

文件链接：[jsfiddle.net/AmhHf](http://jsfiddle.net/AmhHf)

```
![<div class="container-fluid">
  <div class="row-fluid">
    <div class="span8">
      <h1>Formulate</h1>
    </div>
    <div class="span4 pull-right">&nbsp;</div>
  </div>
  <div class="row-fluid">
    <form class="well span12">
      <div class="row-fluid">
        <div class="span12">
          <label>Formula Name</label>
          <input type="text" class="span8"> 
        </div>
        <div class="span8">&nbsp;</div>
      </div>
      <div class="row-fluid">
        <div class="span3">
          <label>My Label</label>
        </div>
        <div class="span3">
          <div class="input-prepend">
            <span class="add-on">@</span>
            <input type="text" class="input-medium"> 
          </div>
        </div>
        <div class="span3">+</div>
        <div class="span3">
          <select>
            <option>Option 1</option>
            <option>Option 2</option>
            <option>Option 3</option>
          </select>
        </div>
      </div>
      <div class="row-fluid">
        <div class="span3">
          <label>My Label</label>
        </div>
        <div class="span3">
          <div class="input-prepend">
            <span class="add-on">@</span>
            <input type="text" class="input-medium"> 
          </div>
        </div>
        <div class="span3">+</div>
        <div class="span3">
          <select>
            <option>Option 1</option>
            <option>Option 2</option>
            <option>Option 3</option>
          </select>
        </div>
      </div>
      <div class="row-fluid">
        <div class="span3">
          <label>My Label</label>
        </div>
        <div class="span3">
          <div class="input-prepend">
            <span class="add-on">@</span>
            <input type="text" class="input-medium"> 
          </div>
        </div>
        <div class="span3">+</div>
        <div class="span3">
          <select>
            <option>Option 1</option>
            <option>Option 2</option>
            <option>Option 3</option>
          </select>
        </div>
      </div>
      <div class="row-fluid"></div>
      <div class="row-fluid">
        <div class="span3">
          <label>My Label</label>
        </div>
        <div class="span3">
          <div class="input-prepend">
            <span class="add-on">@</span>
            <input type="text" class="input-medium"> 
          </div>
        </div>
        <div class="span3">+</div>
        <div class="span3">
          <select>
            <option>Option 1</option>
            <option>Option 2</option>
            <option>Option 3</option>
          </select>
        </div>
      </div>
      <div class="row-fluid">
        <div class="form-actions pull-right">
          <button type="submit" class="btn btn-primary">Submit</button>
          <input type="reset" class="btn" value="Reset"> 
        </div>
      </div>
    </form>
  </div>
</div>][3] 
```

编辑：

```
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pagetitle</title>
<link href="css/bootstrap.css" rel="stylesheet" type="text/css">
<link href="css/bootstrap-responsive.css" rel="stylesheet" type="text/css">
<!-- HTML5 shim for IE backwards compatibility -->
<!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:11:43.927

这似乎与将在 v3 中解决的[引导程序中的错误有关。](https://github.com/twitter/bootstrap/issues/6414)

根据该链接中的评论之一，现在您可以使用此 jQuery 片段来解决问题：

```
jQuery(function($) {
  $(window).resize(function() {
    $(".input-prepend, .input-append").each(function(index, group) {
      var input = $("input", group).css('width', '');
      $(".add-on, .btn", group).each(function() {
        input.css('width', '-=' + $(this).outerWidth());
      });
    });
  }).trigger('resize');
}); 
```

我建议您将输入的类别更改为`input-block-level`.

```
<div class="row-fluid">
  <div class="span3">
    <label>My Label</label>
  </div>
  <div class="span3">
    <div class="input-prepend">
        <span class="add-on">@</span>
        <input type="text" class="input-block-level"/> 
    </div>
  </div>
  <div class="span3">+</div>
  <div class="span3">
    <select class="input-block-level">
      <option>Option 1</option>
      <option>Option 2</option>
      <option>Option 3</option>
    </select>
  </div>
</div> 
```

请参阅此[更新的 jsfiddle](http://jsfiddle.net/nmather/kUaZV/1/)以及第一行输入现在如何正确调整大小。

# rest - 如何利用 WSDL 动态生成 REST 服务

> ID：15924423
> 
> 赞同：0
> 
> 时间：2013-04-10T11:20:40.467
> 
> 标签：rest, soap, wsdl

在我的项目中，我们有一个 WSDL(1.1) 文件（用于 REST 服务）。我们需要基于这个 WSDL 文件动态地构建基于 REST 的服务（应该处理 JSON 输入和输出）（我们正在尝试基于 WSDL 自动生成 REST 服务，这可能吗？？？）。此外，将来每当 WSDL 文件更改（意味着添加或删除任何新服务）时，我们应该能够通过仅公开最新服务来相应地重新配置我们的 REST 服务。

我们是否应该采用常规方法从 wsdl 文件生成存根类，然后在 REST 应用程序中使用这些类？

实现这一目标的最佳方法是什么？任何类型的评论都会有所帮助。

谢谢普拉莫德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:39:34.067

嗯……你没有。REST 服务不描述自己。有些人想要在这种情况下推动使用 WADL，但我不赞成。

WSDL 定义了可以在服务上执行的操作。REST 服务实际上并不是关于操作，而是关于调用 HTTP 动词以传达操作的资源。例如

```
GET /car?id=10&name='zonda'
POST /car 
```

`car`是一种资源。将操作映射到资源需要人工干预，并且并非所有操作都可以映射到资源。

您最好在考虑 REST 方法的情况下重新设计服务。

# javascript - 如何在svg元素上添加dragend事件

> ID：15924426
> 
> 赞同：3
> 
> 时间：2013-04-10T11:20:41.877
> 
> 标签：javascript, dom, svg, d3.js

我正在使用 D3.js 拖动 SVG 元素，使用[D3.js 拖动](https://github.com/mbostock/d3/wiki/Drag-Behavior#wiki-on)的概念。拖动工作正常，但我想在 dragend 上调用一个函数。怎么做？

这是[jsFiddle 链接](http://jsfiddle.net/sb2BX/20/)。我只是想在 dragend 上调用一个函数。

我应该尝试

```
var drop = d3.behavior.drag()
  .on("dragend", function () { alert(); }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T12:28:28.900

您似乎正在尝试进行某种嵌套拖动或其他操作，以下应该可以工作：

```
 var drag1 = d3.behavior.drag()
    .on("drag", dragmove)
    .on("dragend", function () { alert("drag ended"); }); 
```

完整示例：http: [//jsfiddle.net/xnjGD/](http://jsfiddle.net/xnjGD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-23T14:19:54.637

快速提及是否有人仍然需要这样的东西，`d3.behaviour`以及`dragend`. 如果您仍然需要该功能，它应该如下所示：

```
d3.drag().on("end", (_event, dimension) => {
    console.log("alert ended for : " dimension)
  }) 
```

（更多信息：[https](https://github.com/d3/d3/blob/master/CHANGES.md#dragging-d3-drag) ://github.com/d3/d3/blob/master/CHANGES.md#dragging-d3-drag ）

# php - PHP：如何在单个查询中优化这些 MySQL 查询？

> ID：15924430
> 
> 赞同：1
> 
> 时间：2013-04-10T11:20:52.430
> 
> 标签：php, mysql, sql

是否可以将以下内容优化为单个查询？

我在这里假设单个查询比使用临时表的多个查询更有效，所以如果我的假设不正确，请告诉我。

`$id`是当前的memberid。`$list`是要从最终结果中删除的 itemid 列表（例如，已下载的项目）。

这个查询应该做什么它找到前 500 名下载过类似项目的`$id`会员。然后找到这些会员下载的所有项目，根据每个会员的相似下载次数和每个项目的总下载次数按分数排名。因此，最终结果是针对该`$id`成员的推荐列表。

查询是：

```
mysql_query('CREATE TEMPORARY TABLE temp1 ENGINE=MEMORY AS
(SELECT a.memberid, COUNT(*) `score` FROM table_downloads a INNER JOIN
(SELECT itemid FROM table_downloads WHERE memberid='.$id.') b ON a.itemid = b.itemid
WHERE a.memberid!='.$id.' GROUP BY a.memberid HAVING score>0 ORDER BY score DESC LIMIT 500)');

$res=mysql_query('SELECT table_downloads.itemid,COUNT(table_downloads.itemid*temp1.score) AS score2
FROM table_downloads,temp1
WHERE table_downloads.memberid=temp1.memberid AND table_downloads.itemid NOT IN ('.$list.') 
GROUP BY table_downloads.itemid
ORDER BY score2 DESC LIMIT 30');

mysql_query('DROP TABLE temp1'); 
```

如果有几百万行，则此查询可能会花费太长时间而无法使用。任何有关确保它快速执行的建议也将不胜感激。

***我故意使用 mysql_query。请不要告诉我使用 mysqli.***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:24:04.113

1.  这是不可能的`mysql_query()`
2.  认为在这种情况下将 3 个调用合并为一个可以节省一些明显的东西是错误的

需要明确的是，这是一种非常常见的错觉——认为单个凌乱的查询会比多个查询运行得更快。它不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:57:18.853

出于兴趣，我玩了一场。

我认为这是可能的，虽然不是很漂亮，而且我怀疑比你当前的脚本慢。

```
SELECT table_downloads.itemid, COUNT(table_downloads.itemid * temp1.score) AS score2
FROM table_downloads
INNER JOIN (SELECT a.memberid, COUNT(*) `score` 
            FROM table_downloads a 
            INNER JOIN table_downloads b
            ON  a.itemid = b.itemid AND b.memberid='.$id.' AND a.memberid=b.memberid
            GROUP BY a.memberid 
            ORDER BY score DESC
            LIMIT 500) temp1
ON table_downloads.memberid = temp1.memberid 
WHERE table_downloads.itemid NOT IN ('.$list.') 
GROUP BY table_downloads.itemid
ORDER BY score2 DESC 
LIMIT 30 
```

虽然没有真正测试过（不知道你的表格布局）

# ios - PhoneGap 上页眉和页脚的最佳实践

> ID：15924431
> 
> 赞同：0
> 
> 时间：2013-04-10T11:20:55.313
> 
> 标签：ios, cordova, jquery-mobile

我是 PhoneGap 的新手（我使用的是 Cordovar 2.5）。我想开发一个简单的应用程序，它在底部有一个标签栏，在屏幕顶部有一个标题栏。页脚和页眉可以轻松自定义。我曾尝试使用[iOS-Tabbar-Plugin](https://github.com/AndiDog/phonegap-ios-tabbar-plugin)，但似乎无法自定义 UI。我也尝试使用 jQueryMobile 固定工具栏，但是当用户关注文本输入（并且软键盘显示）时，它们会跳来跳去。

这可能是一个愚蠢的问题，但我想知道 phonegap 应用程序的页眉和页脚栏的最佳做法是什么？有什么推荐给我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T06:36:54.840

看看[这个](https://github.com/frequent/bartender/)页眉页脚栏

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:18:42.053

一个好的起点是看[Ratchet](http://maker.github.io/ratchet/)。Is 是一个简约（但功能强大！）的库，可让您快速开发 iOS 应用程序。

# menu - 在带有子菜单的控件数组中加载新的菜单控件

> ID：15924438
> 
> 赞同：1
> 
> 时间：2013-04-10T11:21:35.353
> 
> 标签：menu, vb6, submenu

我有一个`Mnu1`包含两个子菜单的菜单。此菜单项是控件数组的数组部分 - 我已将索引条目添加`Mnu1`为零。现在，当我使用 Load 语句在数组中创建更多菜单时`Mnu1`，它们会被创建，但它们不包含`Mnu1(0)`. 如何`Mnu1()`使用这些子菜单自动加载更多实例？

当前菜单结构为：

```
Mnu

---Mnu1     (with index=0)

-------Mnu1a

-------Mnu1b

---Mnu2

---Mnu3 
```

使用后`Load (mnu(1))`

```
Mnu

---Mnu1     (with index=0)

-------Mnu1a

-------Mnu1b

---Mnu1     (with index=1)

---Mnu2

---Mnu3 
```

所需的菜单结构

```
Mnu

---Mnu1     (with index=0)

-------Mnu1a

-------Mnu1b

---Mnu1     (with index=1)

-------Mnu1a

-------Mnu1b

---Mnu2

---Mnu3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:26:26.203

不幸的是，你不能这样做。您认为您正在以某种方式复制 Mnu1(0)，但这不是正在发生的事情。相反，您只需将新的普通菜单控件添加到与 Mnu1(0) 相同的层次结构级别，这样您就可以方便地通过索引引用菜单控件。

做你想做的事情的本机 VB 方法是使用你曾经使用过的所有控件来创建你的菜单结构，如果可能的话。然后，您最初将当前不需要的菜单控件的 Visible 属性设置为 False。当你想看到你的控件时，设置 Visible = True。

唯一的其他方法是使用 Windows API 调用（GetMenu()、GetSubMenu()、InsertMenu()）来创建新的基础菜单项，然后子类化窗口以接收 WM_COMMAND 消息。

# c - C中的空终止错误

> ID：15924451
> 
> 赞同：0
> 
> 时间：2013-04-10T11:22:16.413
> 
> 标签：c

我正在阅读 Robert C Seaford 的 C 和 C++ 书中的安全编码。

```
int main(int argv, char* argv[]) {
  char a[16];
  char b[16];
  char c[32];

  strcpy(a, "0123456789abcdef");
  strcpy(b, "0123456789abcdef");
  strcpy(c, a);
  strcat(c, b);
  printf("a = %s\n", a);
  retrun 0;
} 
```

三个字符数组的静态声明未能为空终止字符分配存储空间。

结果，第`strcpy()`一个在数组末尾写入了一个空字符。

根据编译器分配存储的方式，此空字节可能会被`strcpy()`下一行覆盖。如果发生这种情况，`a`现在指向一个 20 个字符的数组，而`b`指向一个 10 个字符的数组。

我的问题是作者平均数组如何`a`包含 20 个字符和数组`b`指向 10 个字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T11:35:52.420

我必须假设“10”是指十六进制的 0x10（16），“20”是指十六进制的 0x20（32）。

无论如何，关键是字符串操作代码通过空字符的位置确定字符串的长度，而不是数组中实际分配的字符数。如果内存是这样分配的：

```
<-------a------><-------b------><--------------c--------------> 
```

然后在第一个之后`strcpy`，内存看起来像这样。（我将使用 ! 来表示空值）。

```
<-------a------><-------b------><--------------c-------------->
0123456789abcdef! 
```

然后在第二秒之后`strcpy`，记忆看起来像这样。

```
<-------a------><-------b------><--------------c-------------->
0123456789abcdef0123456789abcdef! 
```

每个`strcpy`操作都会溢出它应该写入并使用相邻内存的数组，这是一种非常糟糕的做法。任何`a`像字符串一样操作的函数都会看到 32 (0x20) 个字符（不包括 null），而`b`像字符串一样操作的任何函数都会看到 16 (0x10) 个字符（不包括 null）——尽管事实上你'在每个数组中只为 15 个字符分配了足够的内存（不包括空值）。

任何这一切都不会崩溃的事实是内存布局方式的意外。如果您向数组中写入的字符多于您的空间，并且正在写入的相邻内存不可写，那么您将崩溃。

当然，由于您正在阅读有关安全编码的内容，因此您正在覆盖其他内容的事实可能是一个严重的安全问题，具体取决于输入的可信度以及被覆盖的确切内容。

# c++ - 代码示例中的朋友运算符？C++头文件，朋友在这里做什么？

> ID：15924453
> 
> 赞同：0
> 
> 时间：2013-04-10T11:22:23.503
> 
> 标签：c++, operators

我正在查看一些代码，我想知道友元运算符在这个类头文件中做了什么。

这是否只需要说“当我使用此运算符并且两个输入都是 CSegment3D 类型时，我以函数实现中定义的方式对它们进行操作”？

```
class CSegment3D : public CObject
{
public:
    CSegment3D& operator*=(const double& factor);//  multiply by a scalar factor & assign
    CSegment3D& operator/=(const double& factor);//  divide by a scalar factor & assign
    CSegment3D& operator+=(const CSegment3D& other);// vector addition
    CSegment3D& operator-=(const CSegment3D& other);// vector subtraction
    friend CSegment3D GetMidpoint(const CSegment3D& ptA, const CSegment3D& ptB);
    friend CSegment3D GetNormal( CSegment3D *pSeg1, CSegment3D *pSeg2, CSegment3D *pSeg3 ); // Return a point normal to the surface defines by the tree point passed in.
    friend double operator*(const CSegment3D& vectorA, const CSegment3D& vectorB); // dot product
    friend CSegment3D operator*(const double& factor, const CSegment3D& vectorA); // multiply by a scalar
    friend CSegment3D operator/(const CSegment3D& vectorA, const double& factor); // divide by a scalar
    friend CSegment3D operator+(const CSegment3D& vectorA, const CSegment3D& vectorB);// vector addition
    friend CSegment3D operator-(const CSegment3D& vectorA, const CSegment3D& vectorB );// vector subtraction
    friend CSegment3D operator^(const CSegment3D& vectorA, const CSegment3D& vectorB); // cross product
    friend CSegment3D operator%(CSegment3D vectorA, const CSegment3D& vectorB); // projection of vectorB onto vectorA
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T11:31:29.523

我总是喜欢告诉我的学生，朋友就像一个女朋友：带有朋友关键字的功能不是家庭，但仍然可以访问您最喜欢的东西，在这种情况下，您的“私人”属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:36:44.240

关键字friend用于允许函数访问类的私有成员，即使该函数不是该类的成员。友谊在类定义中声明，但函数仍然不是该类的成员，需要在其他地方声明和定义。

因此，例如`friend CSegment3D GetMidpoint(const CSegment3D& ptA, const CSegment3D& ptB);`在类定义中意味着该函数`GetMidpoint(const CSegment3D& ptA, const CSegment3D& ptB)`可以访问 CSegment3D 的私有成员，即使它不是该类的成员函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:27:27.213

这是另一个更具技术性（和无聊）的示例/答案：

```
 // Point2D.h
    class Point2D() {
    private:
        float x,y;
    public:
                float GetX_Method() const;
                // Next one is a function, so cant add const at end
        friend  float GetX_FriendFunction(const Point2D &p); 
    }

    //Point2D.cpp

    float Point2D::GetX_Method() const {
        return x; // Since this method belongs to a point, C++ knows where to find x
    }

    float GetX_FriendFunction(const Point2D &p) {
        // This is a friend function. Itdoesn't belong to the class
        // but still can access private members of objects created from that
        // class. All we need is the object itself (p in this case)
        return p.x; 
    }

    // This one isn't either method nor friend
    float GetX_NoFriendFunction(const Point2D &p) {
        // This will give an error since x is private
        return p.x;
    }

    // main.cpp

    main() {
        Point2D p1;

        // Prints P1 X. P1 is implicitly given by calling function
        cout << p1.GetX_Method() << endl;        
        // Prints P1 X. P1 must be given as parameter 
        cout << GetX_FriendFunction(p1) << endl; 
        // This one throws error, since it can access private members of P1
        cout << GetX_NoFriendFunction(p1) << endl; 
    }

// NOTES: 
// * As you may guess, it's the class who says 'You're my friend', otherwise,
// anyone could access other's code and make bad things.
// 
// * If you abuse friendship, you'll end up working as with C and structs
// 
// * Typical use of friend are operators. For example, inside Point2D, you
// could write:

    // This one will allow us to multiply one float to both X and Y
    // and will be called this way:
    // 
    // p1 = p1 * 5.0f; // Also p1 = p1.operator*(5.0f);
    //
    // Notice operator* only accepts float number. Point is implicitly given
    Point2D operator*(float n); 

    // Now think about this one:
    //
    // p1 = 5.0f * p1;
    //
    // Mathematically it's the same, but following same rules than before,
    // you must go to "float" class to add the operator* function, which is,
    // of course, not possible :) so this is what you do
    friend Point2D operator*(float left_operator, const Point2D& right_operator);
    // That way, you use a friend function for do the same job

    // Anyway, as said, you must avoid using friend as much as possible.
    // This problem
    // 
    // p1 = 5.0f * p1;
    //
    // Could have been solved without using friend using a plain C function
    // like this:
    Point2D operator*(float left_operator, const Point2D& right_operator)
    {
        // Gotta love how easy is to get my work done by others in C++
        return right_operator*left_operator; 
    } 
```

# ruby-on-rails - 在条件下删除“date-remote”=>“true”，Rails

> ID：15924454
> 
> 赞同：1
> 
> 时间：2013-04-10T11:22:25.353
> 
> 标签：ruby-on-rails, conditional-statements

我正在使用条件删除“date-remote”=>“true”，但它不起作用。我的条件是：

```
 %a{:href => current_user.present? ? "#{"/posts"}" : "#{"/users/sign_in"}" , "data-method" => "post", current_user.present? ?  " "data-remote" => true" : " ", "title" => "Vote Down"} 
```

但是“数据远程”的条件给出了错误。我该如何解决它。请给任何建议，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:34:37.837

```
 " "data-remote" => true" 
```

您在双引号内使用双引号，这确实不好。

用。。。来代替

```
 " 'data-remote' => true" 
```

PS实际上你的代码对我来说似乎不是很干净，你为什么不使用链接级别以上的条件并提供帮助link_to方法而不是这个？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:56:27.283

希望这对你有用

```
<% if current_user.present? %>
  %a{:href => "/posts", "data-method" => "post", "data-remote" => true, "title" => "Vote Down"}
<% else %>
  %a{:href => "/users/sign_in" , "data-method" => "post", "title" => "Vote Down"}
<% end %> 
```

# ruby-on-rails - ActiveAdmin：按关联计数排序

> ID：15924458
> 
> 赞同：2
> 
> 时间：2013-04-10T11:22:41.717
> 
> 标签：ruby-on-rails, activeadmin

我有以下型号

```
class User < ActiveRecord::Base
   has_many :reviews
end

class Review < ActiveRecord::Base
   belongs_to :user
end 
```

我想按每个用户拥有的评论数量对我的 ActiveDdmin 页面上的用户进行排序。

我试过了，但没有运气：（来自[this SO question](https://stackoverflow.com/questions/7781193/activeadmin-sort-by-child-associations-property)）

```
ActiveAdmin.register User do
  filter :name
  index do
    column :name
    column :email
    column "Facebook" do |u|
      if u.provider == "facebook"
        "Yes"
      end
    end
    column "No. of reviews", :sortable => :"reviews.count" do |u|
      u.reviews.count
    end

  end

  controller do
    def scoped_collection
      end_of_association_chain.includes(:reviews)
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T11:39:29.307

我建议在您的用户模型上使用[counter_cache](http://railscasts.com/episodes/23-counter-cache-column)进行评论，然后直接在 ActiveAdmin 中使用此列：

```
index do
  # ...
  column "No. of reviews", :sortable => :reviews_count
end 
```

# delphi - 如何将自定义控件的子控件限制在某个区域？

> ID：15924468
> 
> 赞同：2
> 
> 时间：2013-04-10T11:23:03.990
> 
> 标签：delphi

我有一个基于 的自定义控件`TPanel`，它有一个内部面板，它定义了我的组件的工作区域和一个带有“最小化/恢复”按钮的外部区域，用于隐藏和显示（内部）面板。

如果我在设计时将一个组件放在我的控件上并将其`Align`属性设置为`alClient`，则使用外部面板的大小并且最小化按钮不再可见。

如何在面板上对齐或放置组件以强制它们（保持）在内面板区域内？

![显示儿童所属区域的内框区域的屏幕截图](https://i.stack.imgur.com/3B3xp.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:59:20.167

将按钮放在自己的面板上，该面板不会接受其他控件并将其保留在前面，但缺点是可以覆盖其他控件。

```
procedure THidePanel.AdjustClientRect(var Rect: TRect);
begin
  inherited;
  FPanel.BringToFront;
end;

constructor THidePanel.create(AOwner: TComponent);
begin
  inherited;
  FPanel := TPanel.Create(self);
  FPanel.Align := alright;
  FPanel.Parent := self;
  FPanel.BevelOuter := bvNone;
  FPanel.Width := 30;
  FButton:=TSpeedButton.Create(self);
  FButton.Parent := FPanel;
  FPanel.ControlStyle := FPanel.ControlStyle - [csAcceptsControls];
end; 
```

# ruby-on-rails - 如何最小化默认文本字段的rails

> ID：15924470
> 
> 赞同：0
> 
> 时间：2013-04-10T11:23:15.990
> 
> 标签：ruby-on-rails

```
<%= f.text_field(:start_date,:size=>5)%> 
```

是否可以减少表单中文本字段的长度？
我使用 : `size => 5`，它不会减少文本字段的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:32:49.283

添加 `:class => "input-small"`您的 text_field_tag。

这使用引导程序的相对大小类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:26:12.353

这应该为您提供解决方案：[文本区域 - Rails API](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-text_area)

# php - 如何将 p 标签插入现有的 div/HTML

> ID：15924471
> 
> 赞同：0
> 
> 时间：2013-04-10T11:23:17.033
> 
> 标签：php, web-scraping

我使用 simplehtmldom_1_5 从网站上抓取了 html 数据，在抓取之后，我想将每个文本插入一个`<p>`标签中，每个标签的 id 都不同，`<p>`如下所述：

```
 Suppose scrapped data:

          <div class="maincontainer">
            <div class="first">
            first text 
            </div>
            <div class="second">
            second text 
            </div>

            <div class="third">
            third text 
            </div>

            <div class="fourth">
            fourth text 
            </div>
fifth string 
          </div>

    And I want result like this below:

          <div class="maincontainer">
            <div class="first">
            <p  id="1">first text </p> 
            </div>
            <div class="second">
            <p  id="2">second text </p>
            </div>

            <div class="third">
            <p  id="3">third text </p>
            </div>

            <div class="fourth">
            <p  id="4">fourth text </p>
            </div>
    <p  id="5">   fifth string </p>
          </div> 
```

伙计们，我想在刮擦期间而不是在刮擦之后这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:38:28.453

也许不是最有效的方式来工作 jsFiddle

[http://jsfiddle.net/Diabl0570/FhZZQ/1/](http://jsfiddle.net/Diabl0570/FhZZQ/1/)

```
//jquery
$(function(){
    var count = 1;
    $("div.maincontainer div").each(function(){
           var html = $(this).html(); 
        $(this).html("<span id='"+count+"'>"+ html + "</span>");
        count= count+1;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:37:45.077

您可以像这样使用 jQuery：

```
$(document).ready(function () {
    $('div').each(function (i) {
        var $this = $(this);
        if (!$this.find('div, span, div, img, ul, a').length) {
            var elData = $this.html();
            if ($.trim(elData) != '') {
                var appendData = '<p  id="' + (i + 1) + '">' + elData + '</p>';
                $this.html(appendData);
            }
        }
    });

}); 
```

@JsFiddle [_](http://jsfiddle.net/neerajkumarsingh/AejLc/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:53:28.203

使用 perl，您可以尝试下面的代码。我将输入文件称为“xml.xml”。我想类似的东西在 php 中起作用，不是吗？

```
#!/usr/bin/perl

use strict;
use warnings;

open my $fh, "<xml.xml" or die;
my $i;
while (<$fh>) {
    if (/\s*</||/^\s*$/) { print; next }
    ++$i;
    s{^(\s*)(.*)$}{$1<p id="$i">$2</p>};
    redo;
}
close $fh; 
```

# asp.net - 未使用 Xml 将对象引用设置为对象的实例

> ID：15924476
> 
> 赞同：2
> 
> 时间：2013-04-10T11:23:28.687
> 
> 标签：asp.net, xml

我正在尝试将我的数据插入网络服务。

在我的网站上提交我的提交按钮时。我正在检查是否有错误：

```
if (Convert.ToString(strXML) != "1")
{
     XmlDocument xmlDoc = new XmlDocument();
     xmlDoc.LoadXml(strXML.ToString());
     XmlNode node = xmlDoc.SelectSingleNode("Logic/Errors");
     err = node["Error"].InnerText;
} 
```

但现在我收到一个错误：

```
Object reference not set to an instance of an object.
Description: An unhandled exception occurred during the execution of the 
current web request. 
Please review the stack trace for more information about the error and where 
it originated in the code.

Exception Details: System.NullReferenceException: Object reference not set to 
an instance of an object. 
```

谁能帮我 ？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:45:22.320

执行该xml 包含逻辑/错误中的错误节点。

如果不存在，可能会出现对象引用

# scala - 我可以在另一个多项目中拥有一个 sbt 多项目吗？

> ID：15924478
> 
> 赞同：3
> 
> 时间：2013-04-10T11:23:30.703
> 
> 标签：scala, sbt

这似乎行不通。我想要这样做的主要原因是在多个多项目之间共享通用设置，例如“publishTo”或“凭据”。

有这样的项目结构

```
root
  |--L1
      |--L2 
```

我想在 L1 中定义设置并在 L2 中使用它们，以及在 root 中定义设置并在 L1 和 L2 中使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:57:12.877

通常，您可以通过在项目根目录的文件中`in ThisBuild`指定，与任何子项目共享构建级别的设置，如[http://www.scala-sbt.org/release/docs/Getting-Started/Multi中所述](http://www.scala-sbt.org/release/docs/Getting-Started/Multi-Project.html#sharing-settings)[-Project.html#sharing-settings](http://www.scala-sbt.org/release/docs/Getting-Started/Multi-Project.html#sharing-settings)`build.sbt`

但这只能在所有项目之间共享价值。

在您的情况下，如果您已将项目定义如下`Build.scala`

```
import sbt._
import Keys._

object MyBuild extends Build {
    lazy val root = Project(id = "root",
                            base = file("."))

    lazy val L1 = Project(id = "L1",
                           base = file("L1"))

    lazy val L2 = Project(id = "L2",
                           base = file("L1/L2"))
} 
```

如果您想重用您在中`publishTo`定义的键（例如 ），您将在`L1``L2``L2` `build.sbt`

```
publishTo <<= publishTo in L1 
```

您可以使用`inspect`sbt 中的命令来检出键值及其设置方式。

```
> projects
[info] In file:/Users/leo/src/project0/
[info]     L1
[info]     L2
[info]   * root
> project L2
[info] Set current project to L2 (in build file:/Users/leo/src/project0/)
> inspect publish-to
[info] Setting: scala.Option[sbt.Resolver] = Some(Repo1: https://repo1.org)
[info] Description:
[info]  The resolver to publish to.
[info] Provided by:
[info]  {file:/Users/leo/src/project0/}L2/*:publish-to
[info] Defined at:
[info]  /Users/leo/src/project0/L1/L2/build.sbt:1
[info] Dependencies:
[info]  L1/*:publish-to
[info] Reverse dependencies:
[info]  L2/*:publish-configuration
[info]  L2/*:other-resolvers
[info] Delegates:
[info]  L2/*:publish-to
[info]  {.}/*:publish-to
[info]  */*:publish-to
[info] Related:
[info]  L1/*:publish-to
[info]  */*:publish-to
[info]  {.}/*:publish-to
> 
```

# ios - 将 iOS 设备添加到方案

> ID：15924480
> 
> 赞同：0
> 
> 时间：2013-04-10T11:23:34.790
> 
> 标签：ios, xcode

我的任务是将应用程序转移到 ipod。我是一名网络开发人员，对 xcode 或 ios 开发一无所知。我有一个要遵循的说明列表。

我有代码，包括一个 .workspace 文件。这一切都在 Xcode 中打开了。在我的说明中，我需要能够选择暂存方案。问题是当我选择登台时，它旁边没有列出任何 ios 设备......我的 64 位 mac 只有一个选项。如果我进入名为 Live 的方案，我会看到管理员 Ipod 的选项。

知道如何将 ipod 添加到暂存方案中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:53:00.423

在顶栏：产品 -> 方案

# mysql - 如何创建将行插入历史表的mysql触发器？

> ID：15924483
> 
> 赞同：-2
> 
> 时间：2013-04-10T11:23:42.510
> 
> 标签：mysql, triggers

我有一个问题表。

我的目标是创建问题状态，因此即使它们被修改，我也可以在日期 T 检索它们。

所以我想要实现的是创建一个在更新、删除、插入时运行的触发器，并将（删除、更新、插入）行从问题复制到 question_history

1）我可以为这 3 个事件创建 1 个触发器还是必须创建 3 个触发器？

2）我可以插入整行还是必须逐字段插入？

有什么线索吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:42:15.270

> 1）我可以为这 3 个事件创建 1 个触发器还是必须创建 3 个触发器？

3 个触发器

> 2）我可以插入整行还是必须逐字段插入？

逐场

# asp.net-mvc-3 - 可以用javascript编写剃须刀代码吗？

> ID：15924485
> 
> 赞同：5
> 
> 时间：2013-04-10T11:23:53.713
> 
> 标签：asp.net-mvc-3, razor

我可以像这样在javascript中编写我的剃须刀代码吗：

```
<script type="text/javascript">
    $(document).ready(function () {
        alert("test");

        @if (Model != null)
        {
            foreach (var item in Model)
            {
                alert(item);
            }
        }
    });
</script> 
```

我收到未定义警报的错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T11:31:25.057

```
<script type="text/javascript">
    $(document).ready(function () {
        alert("test");
        @if (Model != null) {            
            foreach (var item in Model) {
                @:alert(item);
            }
        }
    });
</script> 
```

由于您在 razor 代码块内，您需要通过以下方式告诉 razor`alert()`不是 razor 代码块的一部分`@:`

或者，您可以使用`<text>`元素。

```
<text>
   alert(item);
</text> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:26:35.360

```
foreach (var item in Model)
{
     <text>
     alert(item);
     </text>
} 
```

# c++ - 删除 std::map 的内存 完全地

> ID：15924488
> 
> 赞同：8
> 
> 时间：2013-04-10T11:24:00.450
> 
> 标签：c++, map, stl, free

我有一张地图，现在我想完全删除内存。我该怎么做？找不到与此主题相关的任何内容，抱歉，如果已经回答...

我的代码是这样的：

```
 for(std::map<short,std::string>::iterator ii=map.begin();   
ii!=map.end(); ++ii)
    {
        delete &ii;
    } 
```

但它不起作用。有人可以帮忙吗？

问候，菲尔

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T11:25:38.783

正确做事的方法是不去做。A`map`将在销毁任何自动分配的资源时自动释放资源。

除非您使用 分配值，否则您`new`不会使用`delete`它们。

```
{
    std::map<short,std::string> x;
    x[0] = "str";
}
//no leaks here

{
    std::map<short,std::string*> x;
    x[0] = new std::string;  
    delete x[0];
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-10T11:28:31.800

只需调用`map.clear();`. 这将释放地图内部分配的所有对象。

请注意，在任务管理器等系统工具中，您的应用程序仍然可以显示相同数量的内存占用。操作系统完全有可能决定不回收您的进程曾经持有的内存，以防它再次分配它。如果它开始短缺，它将在以后收回它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-14T07:57:09.457

```
if(m_mapModels.size() > 0)
{
    for(map<short,std::string>::iterator it=m_mapModels.begin() ; it!=m_mapModels.end() ; it++)
    {
        delete it->second;
    }
    m_mapModels.clear();
} 
```

# jquery - CSS 中的 Windows 8 用户界面

> ID：15924494
> 
> 赞同：0
> 
> 时间：2013-04-10T11:24:09.517
> 
> 标签：jquery, html, css, styles

我试图在我的网站上获得类似 windows 8 的样式，但是 div 的对齐有问题。当一个大正方形被放入设计中时，其他（较小的）矩形和正方形以错误的方式放在一边。我做了一个 jsfiddle 来向你展示这个问题。

[http://jsfiddle.net/CGX7S/](http://jsfiddle.net/CGX7S/)

我曾尝试使用浮点数，然后清除每一行，但我认为这不是理想的解决方案。

```
float:left 
```

你能帮我吗？我必须用 jquery、javascript、float 或 css 做一个技巧吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:28:02.817

您可以通过多种方式解决这个问题，目前最简单的是 masonry plugin [masonry pluging page](http://masonry.desandro.com/)。在该页面上，您可以找到文档、示例所有内容。玩得开心。

# c# - 如何在 C# 中的浏览器中处理多个选项卡中的会话

> ID：15924495
> 
> 赞同：1
> 
> 时间：2013-04-10T11:24:11.207
> 
> 标签：c#, asp.net, session, web

我正在使用 asp.net C#，无法管理每个选项卡的会话。我的网站的场景是，用户登录，然后选择一个工作，然后申请该工作，当用户申请时，在数据库中针对该请求完成一个条目。它将存储该用户的选定作业 ID 和电子邮件 ID。

我面临的问题是，如果我在浏览器中的 2 个不同选项卡中打开登录页面。输入数据被弄乱了。例如，用户 A 选择了工作 1，用户 B 选择了工作 2，当我按下用户 B 的应用按钮时，他选择的工作和用户 A 的电子邮件 ID 被输入到数据库中。

我试图通过检查会话对象是否为 NULL/空来解决这个问题，然后才应该创建一个新会话。否则，其他用户应该得到他无法登录的错误。但我的代码并非每次都有效。它有时会给我结果，有时它只是根本不运行。这是我的代码：

```
protected void session_create(string s)
{
    if (string.IsNullOrEmpty((string)Session[s]))
    {
        Session[s] = s;
        test.Text = "Welcome user,  " + (string)(Session[s]);
    }
    else
    {
        test.Text = "You are Already logged in";
    }
} 
```

然后我将此方法称为 on_submit 按钮：

```
session_create("email"); 
```

因为我只存储电子邮件变量，所以我正在传递电子邮件参数。

在哪里，

```
string email = emailtextbox.Text; 
```

那么，有人知道我该如何解决这个问题吗？不应允许用户从同一浏览器登录多个选项卡。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:44:39.210

您可以通过在 WEB.CONFIG 中使用 InProc 会话状态来解决此问题。

查看此链接以获取更多信息： http: [//www.codeproject.com/Questions/364203/Stop-Sharing-Session-State-between-Multiple-Tabs-o](http://www.codeproject.com/Questions/364203/Stop-Sharing-Session-State-between-Multiple-Tabs-o)

# java - 以编程方式检查 SD 卡上是否有足够的内存

> ID：15924496
> 
> 赞同：6
> 
> 时间：2013-04-10T11:24:16.543
> 
> 标签：java, android

我的应用程序正在 SD 卡上保存文件，但在保存文件之前，我需要检查是否有可用内存。我需要检查 SD 卡上有多少可用内存。

就像是：

```
if(MemoryCard.getFreeMemory()>20Mb)
{
    saveFiles();
}
else
{
    Toast.makeText(this, "Not enough memory", 100).show();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T11:26:17.297

```
StatFs class 
```

您可以在此处使用，提供内部和外部目录的路径并计算总空间、可用空间和可用空间。

```
StatFs memStatus = new StatFs(Environment.getExternalStorageDirectory().getPath());
long bytesAvailable = (long)memStatus.getBlockSize() * (long)memStatus.getAvailableBlocks(); 
```

有关更多详细信息，请参阅[文档](http://developer.android.com/reference/android/os/StatFs.html)。`bytesAvailable`以字节为单位，您可以将其转换为您想要的任何格式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T11:33:28.217

来自：[http ://groups.google.com/group/android-developers/browse_thread/thread/ecede996463a4058](http://groups.google.com/group/android-developers/browse_thread/thread/ecede996463a4058)

```
StatFs stat = new StatFs(Environment.getExternalStorageDirectory().getPath());
long bytesAvailable = (long)stat.getBlockSize() * (long)stat.getBlockCount();
long megAvailable = bytesAvailable / 1048576; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-25T12:33:44.713

**适用于 Android 4.3+（API 级别：18+）**

```
StatFs stat = new StatFs(Environment.getExternalStorageDirectory().getPath());
long bytesAvailable = getAvailableBytes(); 
```

# css - 使用 css 过渡时，图库图像不会在页面加载时显示

> ID：15924498
> 
> 赞同：1
> 
> 时间：2013-04-10T11:24:19.240
> 
> 标签：css, image, css-transitions, image-gallery, squarespace

我做了这个页面

[http://safari-as.squarespace.com](http://safari-as.squarespace.com)

在主页上，它是一个由 squarespace 模板制成的画廊。我想在画廊的图像之间添加过渡。

这是通过将其添加到 css 来完成的：

```
.slide {
-webkit-transition: all 600ms cubic-bezier(0.420, 0.000, 0.580, 1.000); 
   -moz-transition: all 600ms cubic-bezier(0.420, 0.000, 0.580, 1.000); 
    -ms-transition: all 600ms cubic-bezier(0.420, 0.000, 0.580, 1.000); 
     -o-transition: all 600ms cubic-bezier(0.420, 0.000, 0.580, 1.000); 
        transition: all 600ms cubic-bezier(0.420, 0.000, 0.580, 1.000); /* ease-in-out */
    } 
```

问题是，在此更改之后，画廊中的大照片将不会显示，直到您调整浏览器窗口的大小。

有谁知道如何确保大图像将在页面加载时显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:50:37.300

我对 webkit 浏览器也有同样的问题。到目前为止，我发现的唯一解决方案是从 -webkit-transition: 中删除cubic-bezier：并将其替换为

.slide { -webkit-transition: 不透明度 ms 缓入出局；}

# f# - F#，赋值运算符与集合运算符

> ID：15924501
> 
> 赞同：2
> 
> 时间：2013-04-10T11:24:21.640
> 
> 标签：f#

我从 F# 开始，一些代码结构让我很奇怪。例如：

我有下一个代码：

```
let mutable s = 10
s <- 1 + s
printf "%i" s 
```

从数学方面来看，一切都很清楚。我将“s”标记为可变并将新值分配给“s”。结果是 11。

让我试试其他部分的代码：

```
let mutable s = 10
s = 1 + s
printf "%i" s 
```

这段代码有效。但我认为`s = 1 + s`从数学方面来说这有点奇怪。执行结果为 10。

我的问题，最后一个样本发生了什么？为什么我没有收到错误消息？只是`s = 1 + s`被忽略了吗？为什么？我在输出中没有任何错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T11:29:54.067

编码

```
s=1+s 
```

will 不会修改`s`- 等效的 C# 是

```
s==1+s 
```

刚刚返回`false`

事实上，编译器应该在该行上发出一个关于未使用值的警告。

`=`运算符只是进行相等性检查 - 它不分配**任何**值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T13:49:01.643

回答你的第二个问题——

> 为什么我没有收到错误消息？s = 1 + s 是否被忽略？为什么？我在输出中没有任何错误。

原因是 F# 区分脚本文件中的顶级范围和本地范围。当您在脚本文件（`*.fsx`Visual Studio 中的文件或 Try F# 中的文件）中时，您可能想要编写一系列表达式（可能返回值）并以交互方式逐个执行它们。这意味着当您`s = 1 + s`在一行上书写时，这不是错误，因为您可以评估该行（选择它并按 Ctrl+Enter 或 Alt+Enter）并在交互式输出中查看结果。

但是，当 this 出现在函数内部（或其他不希望以交互方式评估它的*本地范围内*）时，您会收到警告。最简单的查看方法是使用创建本地范围`do`（这也适用于 Try F#）：

```
do
  let mutable s = 10
  s = 1 + s           // Warning: This expression should have type 'unit', 
                      //    but has type 'bool'. If assigning to a property 
                      //    use the syntax 'obj.Prop <- expr'.
  printf "%i" s 
```

# java - 奇怪的 String.split(“\n”) 行为

> ID：15924502
> 
> 赞同：2
> 
> 时间：2013-04-10T11:24:22.310
> 
> 标签：java, regex

我尝试拆分`name`，但使用拆分方法的尝试均无效

```
public void insertUpdate(DocumentEvent e) {
   String name="PU_Y"+
               "PU-x"+
               "Pu-z";

    split = name.split("\\r\\n");
    split = name.split("\r\n");
    split = name.split("[\r\n]+");
    split = name.split("[\\r\\n]+");
    split = name.split("\\r?\\n");
    // I tried using all the above to split above string but was not successful
} 
```

请帮助拆分此字符串

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T11:25:39.467

您的字符串根本不包含任何换行符。您已将其连接到多行这一事实并没有做任何事情。您的声明相当于：

```
String name = "PU_Y" + "PU-x" + "Pu-z"; 
```

或者

```
String name = "PU_YPU-xPu-z"; 
```

你可能的意思是：

```
String name = "PU_Y\r\n" +
              "PU-x\r\n" +
              "Pu-z"; 
```

使用该更改重新测试您的正则表达式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T11:25:15.413

您的字符串中没有换行符，每次开始新行时，您都将字符串连接为一个语句。

您的字符串将是：

```
"PU_YPU-xPu-z" 
```

如果你想要换行符，`\r\n`在你终止每一行的字符串之前在字符串中放一个：

```
String name="PU_Y\r\n"+
            "PU-x\r\n"+
            "Pu-z\r\n"; 
```

# html - 如何更新 HTML 页面的所有资产

> ID：15924505
> 
> 赞同：0
> 
> 时间：2013-04-10T11:24:32.733
> 
> 标签：html

我正在维护一些静态 HTML/CSS 网站，问题是，当某些图像或样式表发生更改时。一些用户仍然从提供给他们的缓存中获取旧版本，因为我们无法手动指示每个人按 ctrl+f5。

如何指示浏览器我们已将页面更新为新版本，并重新加载所有资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:27:59.960

如果您能够运行`.htaccess`文件

禁用某些文件类型的缓存

```
<FilesMatch ".(css|js|jpg|png)$">
    Header unset Cache-Control
</FilesMatch> 
```

或者您可以在 HTML 中执行此操作`<head>`

```
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" /> 
```

# xml - xstream 反序列化问题

> ID：15924506
> 
> 赞同：0
> 
> 时间：2013-04-10T11:24:33.537
> 
> 标签：xml, xstream, xml-deserialization

尝试反序列化以下 XML，其中“day”和“fulldob”是对象类型，它们具有用于自定义逻辑的单独转换器。一旦反序列化 & 当 toXML 方法应用于对象时，“day”和“fulldob”的值就会丢失。意思是，day & fulldob 没有正确反序列化。有人可以帮忙吗？

****** *** ** *** ** *********输入***XML ******* ****** ***** ****** *********

 *****```
 <primarydob>
   <month>05</month>
   <day>13</day>
   <year>1982</year>
  <fulldob>19820513</fulldob>
 </primarydob> 
```

****** *** ***来自 Object 的 XML（反序列化上述 XML 之后）***** ** *** ** *******

 **```
 <primarydob>
   <month>05</month>
   <day/>
   <year>1982</year>
   <fulldob/>
 </primarydob> 
```

这是“primarydob”的对象

```
@XStreamAlias("dob")   
public class DOBData {

  @XStreamAlias("month")
  private String month;

  @XStreamAlias("day")
  private DOBDay dobDay = new DOBDay();

  @XStreamAlias("year")
  private String year;

  @XStreamAlias("fulldob")
  private FullDOB fulldob = new FullDOB();

  getters/setters
} 
```

这是“fulldob”的对象

```
@XStreamAlias("fulldobdata")
@XStreamConverter(FullDOBDayMaskingConverter.class)
public class FullDOB {

  @XStreamAlias("fulldob")
  private String fullDOB;

  public String getFullDOB() {
      return fullDOB;
  }

  public void setFullDOB(String fullDOB) {

      this.fullDOB = fullDOB;
  }
} 
```

这是“一天”的对象

```
@XStreamAlias("dobday")
@XStreamConverter(DOBDayMaskingConverter.class)
public class DOBDay {

  @XStreamAlias("day")
  private String day;

  public String getDay() {
         return day;
  }
  public void setDay(String day) {
         this.day = day;
  }
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:32:23.187

这是 DOBDayConverter 代码：

```
public class DOBDayConverter extends ReflectionConverter {
    public DOBDayConverter(XStream xstream) {
        super(xstream.getMapper(), xstream.getReflectionProvider());
    }

    @Override
    public void marshal(Object obj, HierarchicalStreamWriter writer, MarshallingContext context) {
        DOBDay d = (DOBDay) obj;
        try {
            writer.setValue(d.getDay());
        } catch (Exception e) {
        }   
    }

    @Override
    public Object unmarshal(HierarchicalStreamReader reader,UnmarshallingContext context) {
        DOBDay day = new DOBDay();

        day.setDay(reader.getValue());

        return day;
    }

    @SuppressWarnings("rawtypes")
    @Override
    public boolean canConvert(Class clazz) {
        return clazz.equals(DOBDay.class); 
    }

} 
```

这是 FullDOBConverter 代码：

```
public class FullDOBConverter extends ReflectionConverter {
    public FullDOBConverter(XStream xstream) {
        super(xstream.getMapper(), xstream.getReflectionProvider());
    }

    @Override
    public void marshal(Object obj, HierarchicalStreamWriter writer, MarshallingContext context) {
        FullDOB fd = (FullDOB) obj;
        try {
            writer.setValue(fd.getFullDOB());
        } catch (Exception e) {
        }   
    }

    @Override
    public Object unmarshal(HierarchicalStreamReader reader,UnmarshallingContext context) {
        FullDOB fd = new FullDOB();

        fd.setFullDOB(reader.getValue());

        return fd;
    }

    @SuppressWarnings("rawtypes")
    @Override
    public boolean canConvert(Class clazz) {
        return clazz.equals(FullDOB.class); 
    }

} 
```

不要忘记注册转换器并处理注释：

```
XStream xs = new XStream();
xs.processAnnotations(DOBData.class);
xs.processAnnotations(FullDOB.class);
xs.processAnnotations(DOBDay.class);
xs.registerConverter(new DOBDayConverter(xs));
xs.registerConverter(new FullDOBConverter(xs)); 
```*******

# types - Agda 中的类型层次结构

> ID：15924509
> 
> 赞同：10
> 
> 时间：2013-04-10T11:24:54.220
> 
> 标签：types, hierarchy, agda

我试图弄清楚类型层次结构在 Agda 中是如何工作的。

假设我定义了一个集合类型 X：

```
X : Set 
```

然后继续构造一个归纳类型

```
data Y : X -> Set where 
```

是什么类型的`X -> Set`？是设置还是类型？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T13:50:22.493

# php - 编写多个 strpos 调用的更好方法

> ID：15924513
> 
> 赞同：1
> 
> 时间：2013-04-10T11:25:04.930
> 
> 标签：php, performance, strpos

我制作了一个简单的脚本来查找`<a>`网站的所有传出标签并显示它们。

为此，我首先抓取站点地图，将这些 URL 放入一个数组中，然后循环遍历各个 URL，分别抓取每个标签以查找`<a>`标签，然后`strpos()`在每个找到的标签上运行，看看它是否有任何我想忽略的 URL。

该脚本大约需要 5 分钟（抓取 500 页）才能完成（在本地运行），我想知道是否有更快的方法来处理针/干草堆搜索排除的参数。目前我正在使用

```
//SEES IF URL CONTAINS EXCLUDED PARAM
function find_excluded_url ($match_url) {
    return strpos($match_url, "mydomain.co.uk") ||
        strpos($match_url, "tumblr.com") ||
        strpos($match_url, "nofollow") ||
        strpos($match_url, "/archive") || 
        strpos($match_url, "page/2");
} 
```

然后显示结果即时使用

```
if ( find_excluded_url($element) == false ) {
   echo "<a href='$element->href'>" . $element->href . "</a>";
} 
```

有没有更高效的方法来实现这一目标？

抱歉，如果这是一个非常明显的问题，这是我用 PHP 构建的第一个真实的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:37:45.903

如果要检查 1 个字符串是否在另一个字符串中，则应使用以下 2 个之一： [http://php.net/manual/en/function.stristr.php](http://php.net/manual/en/function.stristr.php)
[http://php.net/manual/en/函数.strstr.php](http://php.net/manual/en/function.strstr.php)

strpos 处的警告：“此函数可能返回布尔值 FALSE，但也可能返回非布尔值，其计算结果为 FALSE。有关更多信息，请阅读布尔值部分。使用 === 运算符测试此函数的返回值。”

```
/**
 * Loops through the array to see if one
 * of the values is inside the $needle
 *
 * @param  string $needle
 * @param  array  $haystack
 * @return bool
 */
function strstr_array($needle, array $haystack)
{
  foreach($haystack as $search) {
    if(strstr($needle, $search)) {
      return true;
    }
  }
  return false;
}

$haystack = array('my-domain.com', 'sub.my-domain.com');
var_dump(strstr_array('test my-domain.com or something', $haystack)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:53:46.483

```
function find_excluded_url($match_url, $excludeList)
{
    foreach($excludeList as $excluded)
    {
        if(stristr($match_url, $excluded) !== FALSE)
        return TRUE;
        else return FALSE;
    }
}

$excludes = array(
                      'mydomain.co.uk'
                    , 'tumblr.com'
                    , 'nofollow'
                    , '/archive'
                    , 'page/2'
                 );

$example1 = 'http://example.mydomain.co.uk/dir/';
$example2 = 'https://not.in/excludes';
var_dump(find_excluded_url($example1, $excludes));
var_dump(find_excluded_url($example2, $excludes));

// output from browser:  bool(true) bool(false) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:31:36.953

只需注意，如果元素位于字符串的开头并且元素不在字符串中，则`strpos`返回。`0``false`

对于 PHP`0`和`false`是同样的事情，这意味着您的脚本不会识别以关键字开头的链接。

所以我建议你把你的脚本改成这样：

```
function find_excluded_url ($match_url) {
    return strpos($match_url, "mydomain.co.uk") !== false ||
         strpos($match_url, "tumblr.com") !== false ||
         strpos($match_url, "nofollow") !== false ||
         strpos($match_url, "/archive") !== false || 
         strpos($match_url, "page/2") !== false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-14T19:25:23.100

尝试这个

```
if (preg_match('/word/i', $str)) 
```

# php - 如何为交叉表报告编写mysql？

> ID：15924523
> 
> 赞同：0
> 
> 时间：2013-04-10T11:25:23.193
> 
> 标签：php, mysql, sql, pivot

我有 3 个表 'media'、'zone' 和 'mediaplaycount' 想要编写查询以获取数据以交叉表格式表示它。

```
media
medId     medname
-----     -------
1         media1
2         media2
3         media3
-         -
-         -
n         xyz

zone
znId      znName
-----     ------
1         east
2         west
3         south
4         north
-         -
-         -
n         xyz

mediaplaycount 
medId      znId      playdate
------     -----     --------
1          2          1/12/2013
1          1          1/12/2013
3          3          1/12/2013
4          1          1/12/2013 
```

我想要的是每个媒体和区域组合的 mediaplacount。水平场将是所有区域，垂直场将是媒体。结果应该有针对区域的媒体计数，看起来像

```
 east    west     south     north    -----   ------   n
media1   1        1       0         0         0        0      0
media2   0        0       0         0         0        0      0
media3   0        0       1         0         0        0      0
media4   1        0       0         0         0        0      0
-----
n 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:30:29.990

更好的解决方案是创建，`Dynamic SQL`因为存在未知数量的`znName`

```
SET @sql = NULL;
SELECT  GROUP_CONCAT(DISTINCT
        CONCAT('SUM(CASE WHEN c.znName = ''',
               znName,
               ''' THEN 1 ELSE 0 END) AS ',
               CONCAT('`', znName, '`')
               )) INTO @sql
FROM `Zone`;

SET @sql = CONCAT(' SELECT  b.medName, ', @sql, ' 
                    FROM    media b
                            LEFT JOIN MediaPlayCount a
                                ON a.medID = b.medID
                            LEFT JOIN Zone c
                                ON a.znID = c.znID
                    GROUP   BY b.MedName');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/dc99c0/4)
*   [MySQL 准备好的语句](http://dev.mysql.com/doc/refman/5.1/en/sql-syntax-prepared-statements.html)

# delphi - IDHTTP.Post 错误

> ID：15924525
> 
> 赞同：1
> 
> 时间：2013-04-10T11:25:26.143
> 
> 标签：delphi, indy, idhttp

```
procedure Texport_plan.cxB_LoadClick(Sender: TObject);
var
  HTTP: TIdHTTP;
  Query: String;
  Buffer: TMemoryStream;
  loadData: Sting;
  responseData: String; 
begin 
  try
    HTTP := TIdHTTP.Create(nil);
    HTTP.Request.ContentEncoding := 'utf-8';
    HTTP.Request.ContentType := 'text/xml';
    Application.ProcessMessages;

    Query := 'http://priem.edu.ru:8000/import/ImportService.svc/import';
    loadData := '<Root></Root>'

    Buffer := TMemoryStream.Create;
    loadData.SaveToStream(Buffer);
    responseData := HTTP.Post(Query, Buffer);
  except
    on E: EIdHTTPProtocolException do
      ShowMessage(E.Message);
  end;
end; 
```

这将返回 HTTP/1.1 400 错误请求。如果使用从[http://priem.edu.ru:8000/import/ImportService.svc/test/import](http://priem.edu.ru:8000/import/ImportService.svc/test/import)获取， 我会得到正确的 xml 文档作为响应。为什么会发生这种情况？我检查了所有我可以在谷歌找到的......但没有任何帮助。

我正在使用 RAD Delphi XE3

**UPD：**测试客户端工作正常...C# + webclient 类。delphi 可能还有更多的东西......不仅仅是IdHTTP？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:54:14.610

**编辑**

原来`Charset`and的赋值顺序`ContentType`很重要。

如果您使用`ContentType`包含`xml`、`xml-external-parsed-entity` *字词*或以 结尾的a `+xml`，则 Charset 将被强制设置为该值`'us-ascii'`，并且`'ISO-8859-1'`在所有其他情况下为。

该行为未记录在案，因此您可以自由地认为它是错误或实现细节。

`TIdEntityHeaderInfo.SetContentType`( )正文中来自 Remy 的评论`IdHTTPHeaderInfo.pas`说：

> // RLebeau：根据 RFC 3023 第 3.1、3.3、3.6 和 8.5 节：
> //
> // 符合 [RFC2046]，如果接收到 text/xml 实体，
> // 字符集参数省略，MIME 处理器和 XML 处理器
> //必须使用“us-ascii”[ASCII] 的默认字符集值。在
> // XML MIME 实体通过 HTTP 传输的情况下，默认的
> // 字符集值仍然是“us-ascii”。（注意：
> 本规范与 HTTP/1.1 之间存在 // 不一致之处，
> 由于历史原因，HTTP/1.1 使用 // ISO-8859-1[ISO8859] 作为默认值。由于
> // XML 是一种新格式，因此应该使用新的默认值选择更好
> // I18N. 选择 US-ASCII，因为它是 UTF-8 的交集
> // 和 ISO-8859-1，因为它已经被 MIME 使用了。）

要更改字符集，您必须在设置值后设置它`ContentType`，如下所示：

```
HTTP.Request.ContentType := 'text/xml';
HTTP.Request.Charset := 'utf-8'; 
```

**原始答案**
（仍然有效）

您表示您的内容是用 编码的，但默认情况下`utf-8`Delphi 字符串是编码的。`utf-16`

我手头没有 Delphi 来检查字符串助手是否有`SaveToStream`支持编码的方法的重载版本，但我敢打赌它有，所以你可以尝试：

```
loadData.SaveToStream(Buffer, TEncoding.UTF8); 
```

在发送您的数据之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:32:02.793

我发现错误。如果内容类型是 */xml IdHTTP 将 Charset 更改为 'us-ansi'... 要使此组件正常工作，您需要更改

```
HTTP.Request.Charset := 'utf-8';
HTTP.Request.ContentType := 'text/xml'; 
```

至

```
HTTP.Request.ContentType := 'text/xml; charset=utf-8'; 
```

因此，IdHTTP 无法将 Charset 更改为 us-ansi，您将获得所需的编码。

# objective-c - Objective-C：为什么自动释放池存在并以它们的方式工作？

> ID：15924526
> 
> 赞同：2
> 
> 时间：2013-04-10T11:25:28.487
> 
> 标签：objective-c, memory-management

我研究了一个关于 Objective-C 内存管理的教程，我想我理解它是如何工作的。但是，我想知道为什么创建自动释放池以按照它们的方式工作。据我了解，自动释放消息主要用于从函数返回对象时，因为被调用者无法确定调用者是否会将结果实际存储在变量中（这对于稍后释放返回的对象是必要的）。我有一个理论，这个概念是在 Objective-C 仅仅是一个预处理器的时候提出的。相反，编译器会意识到未分配的返回值，并可以静默地为返回的对象自动插入释放（这种行为意味着必须手动释放每个分配的返回值）

所以我的问题：

*   我的理论是对的还是自动释放池概念有其他原因
*   是否有其他概念来处理基于保留/释放的手动内存管理的返回值问题（不一定是特定于 Objective-C 的）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T12:16:29.857

你的解释是部分正确的。是的，自动释放池主要用于从函数或方法返回非拥有对象：您不能在方法内释放对象，或者调用者不能使用它。您*可以*要求调用者接受从函数或方法返回的对象的所有权，就像 Core Foundation 对其 Create 规则所做的那样，但 Foundation 引入了自动释放池并避免了此要求。

然而，这*与*Objective-C 作为预处理器或编译器的一部分无关。它完全依赖于框架和语言使用的内存管理策略。

*   早期的（预处理的）Objective-C 有一个“程序员最了解”的政策，类似于 C 的`malloc`/`free`系统。它没有自动释放池；程序员在知道对象完成时释放它。
*   Foundation 引入了[*] 引用计数内存管理，并使用自动释放池来实现延迟释放。这是一个“对象的程序员最了解”策略，每个对象都可以说出它拥有什么，但不需要整体的内存管理编码。
*   垃圾收集的 Objective-C 至少存在两个（[可能三个](http://programmingliterate.tumblr.com/post/31686523030/garbage-collected-objective-c)）化身。即使在 Garbage-collected Foundation 中也有自动释放池，但有一个“运行时最清楚”策略，因此您可以在没有自动释放池的情况下逃脱，因为运行时可以看到对象何时仍在使用中。
*   顾名思义，自动引用计数使 Foundation 的引用计数内存管理方案自动化。从*理论上讲*，您不需要自动释放池，因为编译器和运行时可以判断对象如何使用并修复所有权。实际上，您仍然可以这样做，因为您可以与手动引用计数的代码进行互操作。ARC 仍然是“对象的程序员最了解”，但它放弃了手动保留和释放，转而支持手动强/弱/不安全引用标记。

您建议仅在将对象别名为编译器可见的命名变量时才应保留对象的建议在一般情况下不起作用。程序员可以保留对该对象的未命名引用（例如，在集合中或通过关联），或者他们可以创建一个必须保留的对象，尽管它*没有*别名。

[*] 事实上，引用计数系统[作为 NXReference 存在于 Mach Kit 中](http://www.cilinder.be/docs/next/NeXTStep/3.3/nd/GeneralRef/09_MachKit/Protocols/NXReference.htmld/index.html)（并在其他框架中使用，如 Indexing Kit），但当它成为 Foundation 的一部分时，它成为所有 Objective-C 类的常规（在 NeXTStep 和WO 应用程序，因此在 Mac 和 iOS 应用程序中）使用引用计数内存管理。

# git - git pull 删除我伙伴的文件

> ID：15924527
> 
> 赞同：0
> 
> 时间：2013-04-10T11:25:31.283
> 
> 标签：git, bitbucket

我没有太多使用 git 的经验，也无法在线找到解决方案。

我正在尝试使用 git 与另一个合作伙伴协调一个项目。我们打开了一个 bitbucket 帐户，我在其中创建了存储库。我的伙伴过去常常`git clone`将存储库复制到他的本地 PC 上，一切似乎都很好。

现在我做了一些更改，通过执行将它们上演`git add [my staged files]`，然后提交并推送。

我的搭档试图通过做`git pull`. 但是由于某种原因，之前克隆到他 PC 上的所有文件都消失了，剩下的只是我刚刚推送的新上演的文件。

为什么`git pull`会有这种行为？当我在 bitbucket 上签出 git 存储库时，它似乎很好。为什么所有未更改的文件都被删除了？是因为他们从未被追踪过吗？好像很奇怪...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:39:22.813

从远程获取数据时，使用

git pull --rebase

它将删除您在本地提交的更改，从远程获取数据并在此之上应用您的更改..

同样在你拉任何东西之前，请确保你已经提交了你的更改..

# ruby-on-rails - 在 Rails Devise 中配置确认邮件主机

> ID：15924534
> 
> 赞同：0
> 
> 时间：2013-04-10T11:25:42.323
> 
> 标签：ruby-on-rails, devise, actionmailer

我已经使用 devise 设置了一个 rails 应用程序来实现简单的用户注册和登录功能。我已经包含确认邮件来确认注册。确认邮件在我的 localhost 中工作正常，但是如果我从其他机器确认帐户它返回错误。我应该怎么做才能更改我的邮件主机？？？

这就是我设置操作邮件的方式

```
 config.action_mailer.default_url_options = { :host => 'localhost:3000' } 
```

这是 Confirmation.html.erb 文件：

```
<p>Welcome <%= @email %>!</p>

 <b> <h1> <font color="RED">Q-</font>Link </h1> </b>  

<p>You can confirm your account email through the link below:</p>

<p><%= link_to 'Confirm my account', confirmation_url(@resource, :confirmation_token => @resource.confirmation_token) %></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:38:39.310

如果您在本地工作并且没有设置邮件服务器（可能是这种情况），则不会发送电子邮件。

但是，为了确保您的应用程序正常工作，当应发送电子邮件时，您将在日志中看到它实际上为电子邮件生成了 html，只是没有发送它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:54:57.637

添加机器的IP地址而不是本地主机

# c# - C#如何从数据库中获取数据到文本框

> ID：15924538
> 
> 赞同：0
> 
> 时间：2013-04-10T11:25:55.153
> 
> 标签：c#, database, combobox, oledb

问候程序员，

我的 Windows 窗体中有一个组合框和一些文本框连接到数据库。我的想法是，当组合框的值发生变化时，文本框中的数据也会发生变化。就像我在组合框中选择客户 ID 时一样，文本框将加载客户的数据，例如全名或地址等。但是当我打开表单时，组合框消失并且文本框保持为空。我正在使用 Access 数据库和 Visual Studio 2012 进行编码。这是我的代码..

**C#代码**：

```
private void comboBox1_SelectedValueChanged(object sender, EventArgs e)
    {
        string pc = Convert.ToString(comboBox1.SelectedValue);
        string sql = "SELECT * FROM Customer WHERE CustomerID="+ pc;
        Data.Customer_Data(sql, pc);

        txtfullname.Text = Data.fullname;
        txtadress.Text = Data.adress;
        txtcity.Text = Data.city;
        txtemail.Text = Data.email;

    } 
```

我的班级叫做数据：

```
public static string cs = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + Application.StartupPath + "\\Database1.accdb";
public static string fullname = "";
public static string adress = "";
public static string city = "";
public static string email = "";
public static void Customer_Data(string sql, string pc)
    {
            if (pc == "")
            {
                return;
            }

            else
            {
                OleDbConnection oleDbConnection1 = new System.Data.OleDb.OleDbConnection(cs);
                oleDbConnection1.Open();
                OleDbCommand oleDbCommand1 = new System.Data.OleDb.OleDbCommand(sql,oleDbConnection1);
                OleDbDataReader reader = oleDbCommand1.ExecuteReader();

                if (!reader.Read())
                    return;

                fullname = reader["fullname"].ToString();
                adress = reader["adress"].ToString();
                city = reader["city"].ToString();
                email = reader["email"].ToString();

                oleDbConnection1.Close();
            }
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T11:44:31.877

您可以尝试以下调试技术之一，看看发生了什么。

1.  在此行之后`Data.Customer_Data(sql, pc);`，属性的数据是否正确加载？
2.  您是否还可以检查是否有对应客户 ID 的数据库值已通过？这样这个条件`if (!reader.Read()) return;`就不会被执行。
3.  检查您的页面加载方法（我确信它不会影响组合框的可见性，但嘿，尝试没有害处）。

如果这里提到的这些都不起作用，那么更多的代码可能会有所帮助。

# c# - 2 系统与 Active Directory 链接在一起

> ID：15924541
> 
> 赞同：0
> 
> 时间：2013-04-10T11:25:58.420
> 
> 标签：c#, iis, active-directory

今天，我们在 .net 中有一个 Web 系统，用户可以在其中登录并对我们的数据库进行身份验证。我们有一个客户想要使用 Active Directory 自动登录到我们的系统。他们将使用 Windows 登录来针对我们的系统进行身份验证。

是否有可能以简单的方式进行集成？是否有任何现代工具可以用 c# 完成这项工作？

在 web.config 我们今天有表单登录

```
<authentication mode="Forms">
      <forms name=".LoginForm" loginUrl="LoginPage.aspx" defaultUrl="StartPage.aspx" timeout="10080" domain=""/>
     </authentication>
<authorization> 
```

是否也可以进行 Windows 身份验证？我需要另一个登录页面来进行 Windows 身份验证吗？

会是这样吗？或者当您需要表单和 Windows 登录时是否有任何“最佳实践”？

他们在防火墙上打开任何端口是否重要，或者 IIS 上是否有其他重要设置可以让流量真实？

或者你有什么其他的建议或技巧要考虑吗？

编辑：我们的客户有一些来自 AD 的用户数据，我们将在我们的系统中使用这些数据。所以不仅登录我们还需要一些数据。这一切可能吗？

# javascript - NVD3.js 使用一个轴作为 lineplusbar

> ID：15924545
> 
> 赞同：1
> 
> 时间：2013-04-10T11:26:07.057
> 
> 标签：javascript, svg, d3.js, nvd3.js

我正在尝试使用 lineplusbar 图表对实际与必需进行比较。但是，我很难让它看起来完全符合我的要求。有没有办法让两条线都使用一个轴？

代码：[https ://github.com/tvinci/webs/blob/gh-pages/lineplusbar.html](https://github.com/tvinci/webs/blob/gh-pages/lineplusbar.html)

示例：[http ://tvinci.github.io/webs/lineplusbar.html](http://tvinci.github.io/webs/lineplusbar.html)

页面代码：

```
 nv.addGraph(function() {
     //var testdata = exampleData();
     var chart = nv.models.linePlusBarChart()
           .margin({top: 30, right: 60, bottom: 50, left: 70})
           //if this is commented out, the graph does not display properly
           .x(function(d,i) { return i });
     //this is the cheat I use to show the correct X axis
     //chart.xAxis.tickFormat(function(d) { return d3.format(',f')(d+1)+"x" });
     chart.y1Axis.tickFormat(d3.format(',f'));
     chart.y2Axis.tickFormat(d3.format(',f'));

     //forces the chart to start at 0
     // if you set this to [0,100] and your data's domain is -10 to 110, the domain will be [-10,110]
     chart.lines.forceY([0]);

     d3.select('#chart svg').datum(eval("overview_data")).transition().duration(500).call(chart);
      d3.selectAll("rect.nv-bar").style("fill", function(d, i){return i > 50 ? "red":"blue";});
     nv.utils.windowResize(chart.update); 
```

数据：

```
var overview_data=[
     { "key" : "Achieved" , "bar": true,"values" : [ [ "1x" , 30] , [ "2x" , 70] , [ "3x" , 200] ]} ,
     { "key" : "Required" , "values" : [ [ "1x" , 50] , [ "2x" , 100] , [ "3x" , 150] ]}
    ].map(function(series) {series.values = series.values.map(function(d) { return {x: d[0], y: d[1] } });return series;}); 
```

});

# java - Java Gson http响应难解析

> ID：15924550
> 
> 赞同：2
> 
> 时间：2013-04-10T11:26:18.077
> 
> 标签：java, parsing, gson

我想解析来自服务器的 http json 响应的大响应。创建响应文件的类是有害的，因为文件太大。我尝试使用gson，但没有效果

这是响应[http://www.sendspace.pl/file/ff7257d27380cf5e0c67a33](http://www.sendspace.pl/file/ff7257d27380cf5e0c67a33)

我的代码：

```
try {
  JsonReader reader = new JsonReader(content);
  JsonElement json = new JsonParser().parse(reader);
  reader.beginObject();
  while (reader.hasNext()) {
    String name = reader.nextName();
    if (name.equals("devices")) {
      System.out.println("gfdd");
    } else {
      reader.skipValue(); //avoid some unhandle events
    }
  }
  reader.endObject();
  reader.close();
} catch (FileNotFoundException e) {
  e.printStackTrace();
} catch (IOException e) {
  e.printStackTrace();
} 
```

我得到了例外：

```
Exception in thread "main" java.lang.IllegalStateException: Expected BEGIN_OBJECT but was END_DOCUMENT at line 799 column 2
    at com.google.gson.stream.JsonReader.expect(JsonReader.java:339)
    at com.google.gson.stream.JsonReader.beginObject(JsonReader.java:322)
    at LightsControl.main(LightsControl.java:41) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:26:44.517

In order to parse your JSON response with GSON, you need to create a number of classes to *wrap* your reponse.

In your case, you should have something like:

```
public class Response {

  @SerializedName("devices")
  private List<Device> devices;
  @SerializedName("scenes")
  private List<Scene> scenes;
  @SerializedName("sections")
  private List<Section> sections;
  //...other fields...

  //getter and setter
} 
```

And then:

```
public class Device{

  @SerializedName("id")
  private String id;
  @SerializedName("name")
  private String name;
  @SerializedName("device_type")
  private String deviceType;
  @SerializedName("device_file")
  private String deviceFile;
  @SerializedName("states")
  private List<State> states;
  //... other fields

  //getters and setters
} 
```

And then you have to do the same with classes `Scene`, `Section`, `State` and so on... Obviously it's a little tedious because your JSON response is very long with many different values...

The good thing is that you can easily skip values if you don't need them. For example, if you don't need to retrieve the `states` of a device, you can just remove the attribute `states` from the class `Device` and GSON automatically skip those values...

Then you just parse the JSON with your Reponse object, like this:

```
String jsonString = "your json data...";
Gson gson = new Gson();
Response response = gson.fromJson(jsonString, Response.class); 
```

# ms-access - DAO.Recordset、DAO.Recordsets、DAO.Recordset2 的区别

> ID：15924557
> 
> 赞同：9
> 
> 时间：2013-04-10T11:26:34.350
> 
> 标签：ms-access, ms-access-2007, vba

任何人都可以解释MS Access 2007 中`DAO.Recordset`、`DAO.Recordsets`和之间的区别吗？`DAO.Recordset2`基本上使用记录集....举个例子，让它更清楚。我从帮助选项中找到了一些参考资料，但我不清楚它的过程......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-10T11:32:48.323

`DAO.Recordset`是一个对象，它表示基表中的记录或运行查询产生的记录。[在此处](http://msdn.microsoft.com/en-us/library/office/bb177501%28v=office.12%29.aspx)阅读有关该`DAO.Recordset`对象的更多信息。

`DAO.Recordset2`也是一个对象，它表示基表中的记录或运行查询产生的记录。它具有对象的所有属性和方法，以及支持多值字段`DAO.Recordset`的附加属性。[在此处](http://msdn.microsoft.com/en-us/library/office/bb243540%28v=office.12%29.aspx)`.ParentRecordset`阅读有关该`DAO.Recordset2`对象的更多信息。

`DAO.Recordsets`是所有开放`DAO.Recordset`和`DAO.Recordset2`对象的集合。[在此处](http://msdn.microsoft.com/en-us/library/office/bb177475%28v=office.12%29.aspx)阅读有关该`DAO.Recordsets`系列的更多信息。

# git - 我是否总是需要一个本地文件夹来反映 git repo（在 github 上）？

> ID：15924564
> 
> 赞同：0
> 
> 时间：2013-04-10T11:26:52.817
> 
> 标签：git

我是一个使用 git 的初学者，我正在努力理解它。我是否总是需要设置一个本地文件夹来反映 github.com 上托管的 git 存储库？是否可以直接在 git repo 上工作？请原谅我对此事的普遍无知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:37:56.263

好吧，从字面上看，在 Github 上“直接在 repo 上工作”需要你拥有文件系统访问权限（通过 SCP、FTP 或类似协议）。出于管理和安全的原因，这没有实现（更不用说它不符合 Git 的工作方式）。

“直接在 repo 上工作”也可能是指[SVN](http://en.wikipedia.org/wiki/Apache_Subversion)、[CVS](http://en.wikipedia.org/wiki/Concurrent_Versions_System)或其他集中式版本控制系统，在这些系统中，您只有一个本地*工作副本*，而不是完整 repo 的副本。
这在 Git 技术上是不可能的（或者如果它被实施，之后会导致许多技术问题）。

Git 是一个[*分布式版本控制系统*(DVCS)](http://en.wikipedia.org/wiki/Distributed_revision_control)，此类系统的核心概念之一是每个客户端都有完整的存储库历史。
虽然这意味着您最初必须下载比集中式存储库更大的数据块（有时，至少），但它提供了许多优势。例如，几乎所有的存储库操作都是本地的，这使得它们更快（如果您的客户端不必立即通过网络发送新的提交数据，则提交只需几分之一秒而不是 30 秒或更长时间）。

因此，**是的，您必须拥有本地克隆**才能处理 Git/Github 存储库中的文件。请注意，您还可以创建不在 Github 上的本地存储库（当然，其他人无法直接获取这些文件），相反，您不必*克隆*您的存储库 - 但您可以t 更改 repo 的内容 ;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:40:44.533

当您使用 Git 时，您需要先在本地进行更改，然后再将它们推送到远程（例如 Github）。这是因为 Git 是一个“分布式版本控制系统”或 DVCS。它是分布式的，因为从事该项目的每个人都拥有存储库的副本。人们使用 DVCS 的原因有几个，例如：

1.  您正在离线工作一段时间；和
2.  您希望在将这些更改推送到每个人的本地存储库之前测试您对本地项目所做的更改（这减少了引入错误的机会）

这些只是许多人更喜欢使用 DVCS 而不是集中式对应物（如 Subversion）的几个原因。

# 简短的回答：

不，您不能在使用 Git 时直接编辑远程文件。尽管 Github 为单个文件提供了此功能，但它纯粹是为了您想要即时进行的微小更改。**在本地编辑文件，然后将它们推送到远程**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T11:31:07.433

是的，您总是需要设置一个本地文件夹。Git 是一个[分布式版本控制系统](http://en.wikipedia.org/wiki/Distributed_version_control_system)，根据定义，它需要存储库的本地副本。

重要的是要意识到 GitHub 存储库本身并没有什么特别之处。从根本上说，它与您的本地副本相同。

Git 利用对等架构，而不是使用客户端-服务器架构的 CVS 或 SVN。

顺便说一句，GitHub 确实支持通过其 Web 界面直接编辑文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T11:31:14.990

是的，您必须将远程存储库克隆到本地计算机才能使用它。

`git clone`将为您执行此操作（如果未另行指定）。

# java - 为什么 Java 允许在仅识别最后一个枚举时引用两个（或更多）枚举？

> ID：15924566
> 
> 赞同：1
> 
> 时间：2013-04-10T11:27:07.870
> 
> 标签：java, enums

我偶然发现了这一点，想知道java是否允许这样做。

这是我的意思的示例：

```
public enum Days {MONDAY, TUESDAY, WEDNESDAY, THURSDAY, FRIDAY, SATURDAY, SUNDAY}

public class EnumTest {

    public static void main(String[] args) {

        methodThatDoesSomething(Days.FRIDAY);
    }

    public static void methodThatDoesSomething(Days day){

        System.out.println(day);
    }
} 
```

`FRIDAY`正如预期的那样，这个的输出是。

如果我像这样更改代码：

```
public class EnumTest {

    public static void main(String[] args) {

        methodThatDoesSomething(Days.FRIDAY.MONDAY);
    }

    public static void methodThatDoesSomething(Days day){

        System.out.println(day);
    }
} 
```

输出是`MONDAY`.

我也收到警告：

> 静态字段 Days.MONDAY 应该以静态方式访问

但它仍然可以编译和运行。

任何可以使用这个多重枚举引用的例子都将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T11:28:53.873

这不是特别是枚举的问题 - 它只是*任何*静态成员也（不幸的是）通过该类型的表达式有效。最常见的例子是：

```
Thread thread = new Thread(...);
thread.start();
thread.sleep(1000); // This doesn't do what it looks like 
```

对于更接近原始示例的非枚举示例，它基本上是这样的：

```
class Foo {
   public static final Foo X = null;
   public static final Foo Y = new Foo();
}

public class Test {
    public static void main(String[] args) {
        Foo foo = Foo.X.Y;
    }
} 
```

请注意，即使`Foo.X`为 null，您也不会在这里得到空指针异常，尽管奇怪的是，生成的代码在完全忽略它之前*仍然*可以访问。`Foo.X`好像是这样写的：

```
Foo ignored = Foo.X;
Foo foo = Foo.Y; 
```

基本上，这是 Java 语言设计中的一个错误步骤，现在修复它为时已晚——我们能做的最好的就是得到警告，然后修复代码以通过类名访问静态成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:28:51.733

该代码按预期工作，但不是您真正要求的。

```
Days.FRIDAY.MONDAY 
```

就像

```
Days.MONDAY 
```

但是`MONDAY`您应该从非静态引用而不是静态引用访问（这就是警告的原因）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T11:30:03.980

枚举实际上是一个具有特殊语法糖的类，以使其使用更简单。

您实际上正在访问实际上是 Enum 的 Days 实例，然后访问该实例的静态类成员。

因此，由于类层次结构和 Java 的类静态成员处理，这是可能的。

# iphone - 使块在串行队列中等待

> ID：15924571
> 
> 赞同：0
> 
> 时间：2013-04-10T11:27:45.393
> 
> 标签：iphone, ios, ipad, grand-central-dispatch, event-dispatch-thread

我在 GCD 中使用串行队列，例如

```
dispatch_queue_t myCustomQueue;
myCustomQueue = dispatch_queue_create("com.example.MyCustomQueue", NULL);

dispatch_async(myCustomQueue, ^{
    ....
/* some asyncronus call*/

}); 
```

在块中，我想进行异步调用，例如播放音频，

我的主要问题是，只要我进行异步调用，块就不会等待，它会完成整个块的执行。

我可以让块等待一段时间，直到异步调用的一些回调返回

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:01:17.190

该*块*不能等待，但正在执行它的*线程可以。*

查看[NSCondition](http://developer.apple.com/DOCUMENTATION/Cocoa/Reference/NSCondition_class/Reference/Reference.html)使您能够`wait`和`signal`线程

基本上你`NSCondition`在你将拥有的块中分配一个 and ，`[condition wait];`这将导致线程等待。然后，当异步操作完成时，您调用`[condition signal];`它将发出等待线程继续的信号。

# java - Is it faster to merge and then sort, or sort and then merge?

> ID：15924572
> 
> 赞同：5
> 
> 时间：2013-04-10T11:27:46.370
> 
> 标签：java, algorithm, merge, sorting

I have 2 arrays which are not sorted. Would it be faster to sort them individually and then merge them? Or would it be faster to just concatenate the arrays first and sort the combined huge array?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T11:35:10.713

Assuming that concatenation is done in `O(1)`, merging takes `O(n)` and sorting `O(n log n)`, you have the choice between:

*   sort and merge: `O(n log n) + O(n) = O(n log n)`
*   concatenate and sort: `O(1) + O((2n) log (2n)) = O(n log n)`

therefore, asymptotically both options are equivalent.

Of course, the whole discussion is moot anyway if you **use MergeSort**.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T13:42:58.300

Clearly, big-O isn't really saying anything in this problem. Assuming the algorithm you are using is quicksort. [It has a average running time of:](http://en.wikipedia.org/wiki/Quicksort#Comparison_with_other_sorting_algorithms)

![enter image description here](https://i.stack.imgur.com/il4nP.png)

So now, if sort then merge we get:

f1 = 1.39n * log(n) * 2 + 2n

merge then sort:

f2 = n + 1.39 * 2n * log(2n)

The difference is

f2 - f1 = -n + 2.78n > 0

In the general case, if a sorting algorithm has complexity

C = k * nlog(n)

then since k should be normally bigger than 1, and isn't likely to be anywhere near 0.5, sort then merge will be faster if you are assuming the merge costs at most 2n.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:32:24.257

I think that'll depend on the sorting algorithm and the size of your data.

But a wild guess is that merging and then sorting the whole lot is preferable. Because the merge in that case is just appending.

While in the other case you'll need to apply a sorting merge.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T11:34:21.667

When it is guaranteed that all entries in the 2nd array are larger than all in the 1st array, then you can concatenate the arrays after sorting each one. Every sorting algorithm has a complexity which is worse than linear, so when you can break down a sorting task into subsets which can be sorted individually, you should do it.

But when the entries need to be sorted again after merging the arrays, sorting each array beforehand is unlikely to make this any faster.

When you want to know it exactly, create a large set of test data and measure the performance yourself.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T11:35:04.450

That depends on the technique you are using.

Sort first and then merge would give you better results on a modern multi-processor architecture where you can run sorting algorithms on both arrays in parallel threads something around `O(nlogn)` (but with much lesser constant) and then merge them in `O(n)` time.

# jquery - 淡入段落中的某些文本而不是其他文本 Jquery

> ID：15924586
> 
> 赞同：1
> 
> 时间：2013-04-10T11:28:29.177
> 
> 标签：jquery, fadein

我有一段

```
<p>This is stack over flow. This is a programming website</p> 
```

现在，我只希望页面加载时的文本“堆栈溢出”fadeIn 带有一些 css 样式，而不是 fadeIn 其余文本。

那么如何做到这一点。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:48:36.160

尝试这个：

```
<p><span class="2nd">This is </span><span class="1st">stack over flow</span><span class="2nd">. This is a programming website</span></p> 
```

并使用这个 jquery：

```
<script type="text/javascript">
    $(document).ready(function () {

        $("span").fadeOut(1);

        $(".2nd").fadeIn(3000);

        $(".1st").fadeIn(1000);

    });
</script> 
```

我希望这有帮助，是的，请标记，否则请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:52:57.513

您必须将您的字符串与类分开并使用 fadein() 回调。像这样的东西应该工作：

HTML：

```
<span class="andThen">This is </span><span class="firstAppears">stack over flow.</span> <span id="andThen">This is a programming website</span> 
```

JS：

```
$(".firstAppears").fadeIn('slow', function() {
     // first animation complete
     $(".andThen").fadeIn('slow');
}); 
```

# html - 如何为元素设置宽度自动

> ID：15924588
> 
> 赞同：0
> 
> 时间：2013-04-10T11:28:30.460
> 
> 标签：html, css, responsive-design

我有 3 个 div 标签。

```
<div id="thread">
          <div id="left-panel" style="width: auto;">a</div>
          <div id="content" style="width:1024px; margin: auto;">c</div>
          <div id="right-panel" style="width: auto">b</div>
</div> 
```

我想要`div#left-panel`，`div#right-panel`符合`div#content`. `Div#left-panel`和`div#right-panel`屏幕分辨率变化时的自动宽度。

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:39:02.143

你考虑过 CSS 媒体查询吗？（确保将元标记放在头部）

```
<meta name = "viewport" content = "width=device-width, initial-scale=1.0">

@media(min-width: 1024px) {
    #content {}
    #left-panel {}
    #right-panel {}
}

@media(max-width: 1023px) {
    #content {}
    #left-panel {}
    #right-panel {}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:45:47.737

```
<div id="thread" style="float:left;width:100%">
          <div id="left-panel" style="width:10%;float:left">a</div>
          <div id="content" style="width:70%;float:left;">c</div>
          <div id="right-panel" style="width: 20%">b</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:41:05.637

对于您的当前标记加 CSS 组合，您不能水平对齐三个 div。

为了水平对齐 div，您必须遵循一条规则。

```
(Total(width + margin + padding) of divs to be horizontally aligned ) 
                     <= Total width of the Parent Container. 
```

现在，您想覆盖整个水平屏幕宽度（没有水平滚动条），然后您可以为您的 div 和`float:left`它们提供百分比宽度，即

```
 <div id="thread" style="width: 100%;">
           <div id="left-panel" style="width: 10%">a</div>
           <div id="content" style="width:78%;">c</div>
           <div id="right-panel" style="width: 10%">b</div>
      </div> 
```

看这个[演示](http://jsfiddle.net/KRk4f/)

# java - hibernate实体关系可以支持单例实体吗

> ID：15924590
> 
> 赞同：1
> 
> 时间：2013-04-10T11:28:36.807
> 
> 标签：java, spring, hibernate

hibernate实体关系可以支持引用吗？我的意思是，我想维护某种类型实体的单个实例，而多个其他实体引用它。那么如果`C`与两者都有关系`B`and `B2`，它可以只有一个实例吗？会`@Singleton`做这份工作吗？

```
A -> B
       \
        \
         \
          C
          /
A2 -> B2 / 
```

我可以看到这很棘手，因为它必须处理`EAGER`/`LAZY`获取。在我的应用程序中，拥有该实体的单个实例非常重要。

**更新**我应该指定我不是指类的单例，而是实体的单例。所以每个类的单个实例`id`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:20:54.810

**在给定的 session**中，实体是单例的：Hibernate 将始终（嗯，几乎总是）返回相同的实体实例，无论您以何种方式获得它：Session.get()、Session.load()、HQL 查询、Criteria 查询等.

如果您想要的是跨多个会话的单例，那么不，这是不可能的（而且这没有意义）。

# c - 为什么要销毁 pthread_cond_t 和 pthread_mutex_t？

> ID：15924592
> 
> 赞同：6
> 
> 时间：2013-04-10T11:28:47.533
> 
> 标签：c, multithreading, pthreads, posix

如果在线程代码中，我在 C 中创建`pthread_cond_t c;`条件变量或互斥体`pthread_mutex_t m;`，建议在完成所有工作后销毁它们。

为什么会这样？

`cond`另外，如果使用`pthread_cond_init();`函数动态初始化变量，为什么最有必要销毁变量。

引用 David Butenhof “*使用 POSIX 线程编程*”

> “当您动态初始化条件变量时，您应该在不再需要时销毁条件变量，方法是调用 pthread_cond_destroy。您不需要销毁使用 PTHREAD_COND_INITIALIZER 宏静态初始化的条件变量”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T11:50:17.497

pthread_cond_t 和 pthread_mutex_t 被视为资源。

完成后需要销毁/清理/关闭资源，就像完成后需要关闭文件或释放内存一样。不这样做会导致资源泄漏，并且您可能会用完这些资源。

将这些视为资源使实现在如何实现它们方面有更大的自由，并且在某些特定的实现中，忘记 _destroy() 它们可能没有害处，其他可能会将互斥/条件变量连接到需要的内核资源不再需要时清理。[pthread_mutex_init](http://pubs.opengroup.org/onlinepubs/009696899/functions/pthread_mutex_init.html)的基本原理部分提供了更多概述，这同样适用于条件变量

如果你用 PTHREAD_COND_INITIALIZER 初始化一个条件变量，你应该初始化一个静态分配的互斥体，即它会一直存在到应用程序结束，此时它将被系统销毁，大概这就是作者的意思。这也适用于动态初始化的 mutex/cond 变量，系统也会清理这些变量。

大多数资源在应用程序结束时会自动清理，因此在这种情况下手动清理所有内容或让系统清理是否是一个好习惯是另一个讨论。

# php - 单选按钮不返回第一个值

> ID：15924593
> 
> 赞同：0
> 
> 时间：2013-04-10T11:28:50.993
> 
> 标签：php, mysql

我有两个单选按钮

```
<input type="radio" name="fangspotted" value="yes"> YES 
<input type="radio" name="testRadio" value="no"> NO 
```

这是我获取 POST 值的 PHP 代码

```
$fang_spotted=$_POST['fangspotted'];

"INSERT INTO TABLE1(coulmn) VALUES ('" .$fang_spotted. "')"; 
```

当我从单选按钮中选择“是”选项时出现错误，但在选择“否”选项时出现“否”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:30:39.967

你必须在两个单选按钮上使用相同的名称

# php - 使用 PHP 代码从 MySQL 数据库中选择

> ID：15924595
> 
> 赞同：0
> 
> 时间：2013-04-10T11:28:51.753
> 
> 标签：php, mysql

现在我的登录页面工作正常。如果用户名和密码都正确，则返回值 1 并将您定向到名为 studentloggedin.php 的页面 在我的数据库表中，我有一个名为“职业”的字段，其中有两个值：“学生”或“讲师”。

我的问题是创建一个 if 语句，如果用户是学生，它会将我定向到 studentloggedin.php，否则它会将您定向到讲师loggedin.php

我已经尝试进行查询，但它不起作用..请帮助:) 我的代码在这里：

```
<?php 
session_start();
//*********Server Information to establish a connection ******

$host        =    'localhost';
$user        =    'kurtfarrugia';
$password    =    '1234';
$database    =    'kurt_farrugia';

$link = mysql_connect($host,$user,$password) or die('Error in Server information');
mysql_select_db($database,$link) or die('Can not Select Databasse');

//***************End Connection Establishment***************************************
//*******Form Information********

$userName = mysql_real_escape_string($_POST['username']); //User Name sent from Form
$password = mysql_real_escape_string($_POST['password']); // Password sent from Form

$rememberMe = strip_tags($_POST['rememberMe']);
setcookie("username", $_POST['username']);

//*********retrieving data from Database**********

$query = "select * from tbladmin where admin_usr_name='$userName' and          
admin_pwd='$password'";

$res = mysql_query($query);

$rows = mysql_num_rows($res);

//**********it ensures that the script does not continue unless the username varaible     is not null and not empty
if (!empty($_POST['username'])) {
    $username = mysql_real_escape_string(strip_tags(trim($_POST['username'])));
} else {
    //die('Hey turd, go back and fill in your username!');
    header( "Location: login_fail2.php" ); die;
}

/*if ($rememberMe) {
    setcookie("loggedIn", "yes", time()+3600);

    header ("Location: studentloggedin.php" ); die;
             }
else {
     echo "Username and/or password is incorrect.";
}

if ($_COOKIE['loggedIn'] == "yes") {
    header ("Location: studentloggedin.php" );
    die();
}
*/
// HERE is the query 

//$result2 = mysqli_query($con,"SELECT occupation FROM tbladmin WHERE admin_usr_name    ='$username'" == 'student');
//$row == mysqli_fetch_array($result)

//**********if $userName and $password will match database, The above function will    return 1 row
if($rows==1)
//{
{
 //***if the userName and password matches then register a session and redrect user to    the studentloggedin.php

 //$_SESSION['userName'];
 //$_SESSION['password'];

    header("location:studentloggedin.php");
}
//}

else
{
    header( "Location: login_fail2.php" ); die;
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:33:41.907

试试下面：

```
$result2 = mysqli_query($con,"SELECT occupation FROM tbladmin WHERE admin_usr_name    ='$username'");

$rows = $result2->num_rows;

if($rows==1) 
  header("location:studentloggedin.php");
else
 header("location:lecturerloggedin.php"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:35:14.793

您的查询中有一个错误：

```
//$result2 = $mysqli_query($con,"SELECT occupation FROM tbladmin WHERE admin_usr_name    ='$username'" == 'student');
//$row == mysqli_fetch_array($result) 
```

您不能将 = 用于某些东西 == 用于其他东西。

这是我认为应该工作的整个代码

```
<?php 
session_start();
//*********Server Information to establish a connection ******

$host        =    'localhost';
$user        =    'kurtfarrugia';
$dbpassword    =    '1234';
$database    =    'kurt_farrugia';

//Open connection   
$mysqli = new mysqli($host, $user, $dbpassword, $database);
if (mysqli_connect_errno()) 
{
    printf("Connection failed: %s\n", mysqli_connect_error());
    exit();
}

//***************End Connection Establishment***************************************
//*******Form Information********

$userName = mysql_real_escape_string($_POST['username']); //User Name sent from Form
$userPassword = mysql_real_escape_string($_POST['password']); // Password sent from Form

// $rememberMe = strip_tags($_POST['rememberMe']);
setcookie("username", $_POST['username']);

//*********retrieving data from Database**********

$result2 = $mysqli->query("SELECT * FROM `tbladmin` WHERE `admin_usr_name` = '".$userName."' and `admin_pwd` = '".$userPassword."'");
if($row = $result2->fetch_assoc())
{
    if($row['occupation'] == 'student')
    {
        // redirect logged student
    }
     else if($row['occupation'] == 'lecturer') 
    {
        // redirect logged lecturer 
    }
} 
else
{
     //username doesn't exist redirect to fail page
}

//**********it ensures that the script does not continue unless the username varaible    
is not null and not empty
if (!empty($_POST['username'])) {
$username = mysql_real_escape_string(strip_tags(trim($_POST['username'])));
} else {
    //die('Hey turd, go back and fill in your username!');
        header( "Location: login_fail2.php" ); die;
    }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:03:40.353

这是您需要的部分

```
if (!isset($_POST['username']) || $_POST['username'] != '') {
    // redirect back to the form
}
if (!isset($_POST['password']) || $_POST['password'] != '') {
    // redirect back to the form
}

$userName = mysqli_real_escape_string($_POST['username']); 
$password = mysqli_real_escape_string($_POST['password']);

$query = "SELECT * FROM tbladmin WHERE admin_usr_name = '$userName' AND          
      admin_pwd = '$password'";

$res = mysqli_query($query);
$numrows = mysqli_num_rows($res);

if ($numrows == 1) {
    // here you can add the code with remember me
    $dataRow = myqli_fetch_row($res);
    $username = $dataRow['admin_usr_name'];

    if ($dataRow['ocupation'] == 'student') {
        // redirect to student php file
        exit;
    } else {
        // redirect to lecturer
        exit;
    }
} else {
   // redirect to login incorrect
   exit;
} 
```

# view - How to implement an application/website wide form in Zend Framework 2?

> ID：15924598
> 
> 赞同：0
> 
> 时间：2013-04-10T11:29:04.523
> 
> 标签：view, zend-framework2, zend-form, zend-form2

In my ZF2 aplication I have multiple modules and one of them is "Search". It provides a search form, the search logic and a list of courses found in the database:

**Form class**

```
namespace Search\Form;

...

class CourseSearchForm extends Form {

    private $cities;

    public function __construct(array $cities) {
        parent::__construct('courseSearch');
        $this->setCities($cities);
        $this->setAttribute('method', 'post');
        $this->add(array(
            'name' => 'keyword',
            'attributes' => array(
                'type'  => 'text',
            ),
        ));
        $this->add(array(
            'name' => 'city',
            'type'  => 'Zend\Form\Element\Select',
            'options' => array(
                'label' => 'Stadt',
                'value_options' => $this->cities
            ),
        ));
        // ...
    }

    public function setCities(array $cities) {
        $this->cities = $cities;
    }

} 
```

**Controller class**

```
namespace Search\Controller;

...

class SearchController extends AbstractActionController {

    protected $courseTable;

    public function searchAction() {
        return $this->redirect()->toRoute('search-courses');
    }

    public function searchCoursesAction() {
        $form = $this->getServiceLocator()->get('Search\Form\CourseSearchForm');
        $request = $this->getRequest();
        if ($request->isPost()) {
            $courseSearchInput = new CourseSearchInput();
            $form->setInputFilter($courseSearchInput->getInputFilter());
            $form->setData($request->getPost());
            if ($form->isValid()) {
                $courseSearchInput->exchangeArray($form->getData());
                $courses = $this->getCourseTable()->findAllByCriteria($courseSearchInput);
            } else {
                $courses = null;
            }
        } else {
            $courses = null;
        }
        return new ViewModel(array(
            'form' => $form,
            'courses' => $courses,
            'cities' => $this->getServiceLocator()->get('Cache\Model\CityStorage')->getCities(),
        ));
    }

    /**
     * Gets a CourseTable object.
     * @return Search\Model\CourseTable
     */
    function getCourseTable() {
        if (!$this->courseTable) {
            $serviceLocator = $this->getServiceLocator();
            $this->courseTable = $serviceLocator->get('Search\Model\CourseTable');
        }
        return $this->courseTable;
    }

} 
```

**List view in `/module/Search/view/search/search/search-courses.phtml`**

```
...
<?php
$form = $this->form;
$form->setAttribute('action', $this->url('search-courses'));
$form->prepare();

echo $this->form()->openTag($form);
echo $this->formRow($form->get('keyword'));
echo $this->formRow($form->get('city'));
// ...
echo $this->formSubmit($form->get('submit'));
echo $this->form()->closeTag();
?>
<?php
if ($courses instanceof Zend\Db\ResultSet\ResultSetInterface) {
    echo $this->render('search/search/list-courses.phtml', array(
        'courses' => $courses
    ));
}
?> 
```

Now the search form should be displayed on every page of the website. How can I implement such global form view? Is there a "standard" way / best practice to do this?

Thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:36:58.817

You'd simply create a `ViewHelper`. You'd inject the Form into the ViewHelper and then you render the View and return it. The ViewHelper itself could look very similar to what ZfcUser offers within [`ZfcUser\View\Helper\ZfcUserLoginWidget`](https://github.com/ZF-Commons/ZfcUser/blob/master/src/ZfcUser/View/Helper/ZfcUserLoginWidget.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:43:22.153

some way to display it:

## 1\. Create your own view helper

to inspire you,

*   [http://samsonasik.wordpress.com/2012/07/20/zend-framework-2-create-your-custom-view-helper/](http://samsonasik.wordpress.com/2012/07/20/zend-framework-2-create-your-custom-view-helper/)
*   [http://robertbasic.com/blog/working-with-custom-view-helpers-in-zend-framework-2](http://robertbasic.com/blog/working-with-custom-view-helpers-in-zend-framework-2)

## 2\. Use the plugin forward

```
 // menu user
    $menu = $this->forward()->dispatch('edit_controller', array(
        'action'    => 'menu',
        'item' => 'languages',
        'id' => $id,
    ));
    $viewmodel->addChild($menu, 'menu'); 
```

I prefer the use of the [plugin forward](http://framework.zend.com/manual/2.0/en/modules/zend.mvc.plugins.html#the-forward-plugin)

# c# - Windows Portable - 服务参考 5 秒超时

> ID：15924605
> 
> 赞同：0
> 
> 时间：2013-04-10T11:29:30.407
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-8

我有一个可移植类库（WP7.1、Win8）和一个服务参考。如果服务（暂时）不可用，则调用会在 5 秒内导致 NotFound 错误。我想将 5 秒的超时时间增加到 10 秒，但没有任何效果。SendTimeout、ReceiveTimeout、OpenTimeout、CloseTimeout（都在 Binding 上）确实具有不是 5 秒的默认值。改变它们并不重要。我不知道为什么超时只有 5 秒？

# java - Web 服务，内部代理而不是外部重定向或内部重写

> ID：15924607
> 
> 赞同：0
> 
> 时间：2013-04-10T11:29:35.873
> 
> 标签：java, web-services, spring

这是一个外部重定向：

```
@RequestMapping(value = "/{id}", method = RequestMethod.GET)
public void getFile(@PathVariable final long id, final HttpServletRequest request, final HttpServletResponse response) throws IOException, ServletException {
    final String relativeUrl = computeRelativeUrl(id); 
    System.out.println("DEBUG. relativeUrl: " + relativeUrl);

    response.sendRedirect(relativeUrl);
} 
```

问题在于客户端需要发出两个 http 请求来获取文件。

这是内部重写：

```
@RequestMapping(value = "/{id}", method = RequestMethod.GET)
public void getFile(@PathVariable final long id, final HttpServletRequest request, final HttpServletResponse response) throws IOException, ServletException {
    final String relativeUrl = computeRelativeUrl(id);
    System.out.println("DEBUG. relativeUrl: " + relativeUrl);

    ServletContext context = RequestContextUtils.getWebApplicationContext(request).getServletContext();
    RequestDispatcher rd = context.getRequestDispatcher(relativeUrl);
    rd.forward(request, response);
} 
```

问题在于响应计算的 relativeUrl 的 servlet 不在同一个 servletContext 中。也就是说，该 servlet 部署在同一个 Web 服务器中，但具有两个不同的 jars/WEB-INF。因此，requestDispatcher 无法转发请求。

所以，问题是，我怎样才能让它工作，而不要求客户端发出两个 http 请求，也不需要在 webserver 中进行特殊配置。此外，`computeRelativeUrl(id)`还有一些无法轻易提取的逻辑（这绝对不是在 Web 服务器上编写简单代理配置的解决方案）

任何想法？

一种可能的解决方案是我的 web 服务向 relativeUrl 发出 http 请求并将其返回给客户端（就像代理一样）。它应该返回内容以及所有 http 标头。

我怎样才能轻松实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:38:03.897

如果我了解您要实现的目标，您可以尝试进行“跨上下文”调度。

```
ServletContext contextOfOtherWebapp = servletContext.getContext("/pathOfOtherWebapp"); 
```

检查文档[`ServletContext.getContext(String)`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html#getContext%28java.lang.String%29)

然而，它确实需要 servlet 容器来允许这样做。如果默认情况下没有，则可能是启用它的配置设置。

# asp.net - VB中不需要的空白修剪

> ID：15924609
> 
> 赞同：0
> 
> 时间：2013-04-10T11:29:45.210
> 
> 标签：asp.net, vb.net, visual-studio-2010

嗨，我有一个奇怪的问题。

```
childelement = DOMObject.createElement("MY_KEY")
childelement.text = myObject.myKey
childelement = topelement.appendChild(childelement) 
```

在上面的代码中， 的值`myObject.myKey is " 24"`。但是当我这样做时`childelement.text = myObject.myKey`，值`childelement.text`变为“24”。空白将自动删除。我不会发生这种情况。该值必须是“24”。

为什么会这样？怎么修？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:44:56.943

您可以通过定义类似的东西来使用*解决方法*

```
write_stuff = "." + your_text + "." 
```

当你阅读它时，你会使用

```
read_stuff = read.stuff.Replace(".", "") 
```

但是，尚不清楚为什么需要空格，并且过度考虑这一点也可能是个好主意

**更新**

如果没有要使用的字符，则只需在之后切断添加的部分：

```
bla = Mid(bla, 2, bla.Length - 2) 
```

这会删除第一个和最后一个字符

# image - 图像作为 Wordpress 中的按钮

> ID：15924614
> 
> 赞同：-1
> 
> 时间：2013-04-10T11:29:58.250
> 
> 标签：image, wordpress, button

我想在我的 wordpress 网站的每个页面中使用一个公共链接。我希望它显示为按钮、图像或信息图，当单击它时，它会在新窗口中打开一个新页面。我希望将图像用作按钮，并将其应用于网站的每个页面。

但是如何？如何使用可点击的图像作为 wordpress 中的按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:46:11.543

I assume from your question that you do not search for code , but more like an advice on how to do so using the normal wordpress UI ..

If that is the case , All you have to do is specify the LINK for the image in the media upload dialog when you insert the image ..

That being said, I believe that what you want to do , again , if I understood right, is a misuse of the wordpress as a system. Wordpress is not , and should not IMHO , be used like an old fashioned HTML page where everything is made manually ..

And again, it is also possible that I understood you wrong . if so, please elaborate a bit ..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:28:28.943

如果您正在寻找一种将图像链接到其他页面的方法，请确保使用相应的标签包装您的标签。要在新窗口中打开链接，请在锚标记中使用 target="_blank"。

我同意 Obmerk Kronen 关于不将 Wordpress 用作任何其他 HTML 编辑器的观点。编辑您的模板（如果需要，使用子主题），而不是将内容硬编码到新页面或帖子中。

# delphi - 如何收听 1200 台设备

> ID：15924616
> 
> 赞同：-1
> 
> 时间：2013-04-10T11:29:59.773
> 
> 标签：delphi

我正在使用 Delphi 我有一个设备。设备有以太网卡。我给设备一个 IP 地址和端口（服务器 IP 地址）。设备每秒使用 tcp/ip 向服务器发送数据。

我必须从服务器监听设备。我有 1200 台设备从一台服务器监听 1200 台设备的最佳方式是什么？（多线程或其他方式）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:00:12.577

事件驱动的服务器是这里的要求。

忘记 Indy，使用事件驱动（也称为 I/O 完成）IP 服务器。

对于 32 位，Windows 限制约为 2000 个线程，因为每个线程保留 2 MB 的堆栈空间，AFAIR。像 Indy 这样的服务器每个连接都会使用一个线程，所以这只会浪费资源。

按照设计，[I/O 完成](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198)允许将所有传入请求平衡到一个小线程池。请参阅[Delphi 是否有基于 I/O 完成端口的组件？](https://stackoverflow.com/questions/2302267)和[可扩展的 Delphi TCP 服务器实现](https://stackoverflow.com/questions/7150093)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T13:10:58.207

查看[ICS](http://www.overbyte.be/frame_index.html?redirTo=/products/ics.html)，它是一个 Internet 库，可让您管理来自单个线程的多个连接。非常适合您的目的。

# javascript - 如何使用 ExpressJS 和 Nodejs 在控制台中记录 res.locals 内容以进行调试？

> ID：15924624
> 
> 赞同：1
> 
> 时间：2013-04-10T11:30:20.637
> 
> 标签：javascript, node.js, debugging, express, data-dumper

我正在使用 Node.js 和 ExpressJS 开发一个应用程序，我是这个环境的初学者。`res.locals`我有在控制台中记录全部或部分内容以进行调试的基本需求 。

我试过这个：

```
var foo_route = function(req, res){

    var foo_data = [];

    for (var i = 0; i < data.response.foo.length; i++) {

        // Here complex data management, not interesting in our case
        foo_data = // Bla bla ...

        // OK. This displays my object content
        console.log(foo_data);

    }

    // Seems because my misunderstanding of JS scopes, foo_data is still == []
    res.locals.data = foo_data;

    // Nothing. Both of these two solutions display nothing
    console.log(res.locals.data);
    console.log(JSON.stringify(res.locals.data, null, 2)); 
```

我正在寻找一种[Perl 的 Data::Dumper](https://metacpan.org/module/Data::Dumper)，但似乎我在某处错过了重点，因为它应该是一项非常基本的任务......

编辑：我知道这可能不是特定的 ExpressJS 或 Node.js 问题，而是 JS vars 范围问题...

**2018 年阅读本文的人请注意**：不要使用`var`、使用[`let`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let)和[`const`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/const)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:49:18.747

尝试使用`eyespect`模块而不是`console.log`. 它以更易于使用的方式打印内容。

```
npm install -S eyespect 
```

当您在 for 循环中分配 foo_data 时，您是否在异步执行任何操作？这可能是事情没有按预期工作的原因

```
var foo_route = function(req, res){

    var foo_data = [];
    // what is data here? Also var i should technically be declared at the top of the function
    for (var i = 0; i < data.response.foo.length; i++) {

        // Here complex data management, not interesting in our case
        foo_data = ...

        // OK. This displays my object content
        console.log(foo_data);

    }
    // does this print anything interesting?
    inspect(foo_data, 'foo data outside the loop')
    inspect(res.locals, 'res.locals')
    // Seems because my misunderstanding of JS scopes, foo_data is still == []
    res.locals.data = foo_data;
    inspect(res.locals.data, 'res.locals.data')    

    // Nothing. Both of these two solutions display nothing
    console.log(res.locals.data);
    console.log(JSON.stringify(res.locals.data, null, 2)); 
```

# asp.net - 在 VB 中更改应用程序标题

> ID：15924629
> 
> 赞同：0
> 
> 时间：2013-04-10T11:30:37.227
> 
> 标签：asp.net, vb.net

我正在使用下面的代码在加载时更改应用程序的标题。我希望能够做到这一点，而不是将它单独放在不同的私有子中，我希望能够将它加载到我的主私有子中，这样我就可以避免两次联系网络服务器。

```
 Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

    Dim wc As WebClient = New WebClient()
    Dim Details As String()

    Try
        Details = wc.DownloadString("http://(IP GOES HERE):8080/launcher/Details.php").Split("#")
        wc.Dispose()
    Catch ex As Exception
        MsgBox("Failed to connect to server. Please make sure you're connected to the internet.", MsgBoxStyle.Critical, "Server Connection Failed")
        Return
    End Try

    Me.Text = Details(7)

End Sub 
```

我在我的主要私有子中使用相同的函数来做另一件事，所以如果我可以把它放在那里，代码会更有效率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:07:28.897

```
Dim CommDetails As String()

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

    Dim wc As WebClient = New WebClient()

    Try
        CommDetails = wc.DownloadString("http://(IP GOES HERE):8080/launcher/Details.php").Split("#")
        wc.Dispose()
    Catch ex As Exception
        MsgBox("Failed to connect to server. Please make sure you're connected to the internet.", MsgBoxStyle.Critical, "Server Connection Failed")
        Return
    End Try

    Me.Text = CommDetails(7)

End Sub 
```

在您的另一个子中：

```
 some_text = CommDetails(7) 
```

# java - 为什么我会收到带有包装写入器对象的“潜在资源泄漏”警告？

> ID：15924630
> 
> 赞同：1
> 
> 时间：2013-04-10T11:30:39.150
> 
> 标签：java, eclipse, resources, warnings

我有 Eclipse 发出以下警告：

> `Potential resource leak: '<unassigned Closeable value>' may not be closed`

`new BufferedWriter(...)`...对于以下片段中的表达式：

```
boolean useStdout = askUserWhetherToUseStdout();
Writer writer = useStdout ? new OutputStreamWriter(System.out) : new BufferedWriter(new FileWriter(new File(askUserForFilename())));
try {
    writer.write("Hello World!");
}
finally {
    writer.close();
} 
```

这是误报吗？我理解整个`Writer`事情的方式是，任何作家都会关闭其潜在的作家。在我的情况下，`writer`将封装新的缓冲写入器（进而封装文件写入器），因此关闭`writer`不应泄漏与缓冲写入器或其底层写入器关联的任何资源？

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:33:50.613

*根据更新的问题编辑答案：*

这是一个虚假的警告 - 基于三元运算符的使用。如果操作的右侧没有触发，`BufferedWriter`则不会创建，并且没有资源泄漏。所以警告所描述的实际上是不可能的。但是，如果您想“处理”它，只需将编写器的创建移动到您的 try 块中。

```
boolean useStdout = askUserWhetherToUseStdout();
Writer writer = null;
try {
    writer = useStdout ? new OutputStreamWriter(System.out)
            : new BufferedWriter(new FileWriter(new File(
                    askUserForFilename())));
    writer.write("Hello World!");
} finally {
    if (writer != null)
        writer.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:54:44.540

你能检查一下这段代码是否给你警告吗？如果不是，那么您可能在创建 writer 时没有处理 IOException，这也应该在 try 块中完成。

```
boolean useStdout = askUserWhetherToUseStdout();
Writer writer = null;
try {
    writer = useStdout ? new OutputStreamWriter(System.out)
            : new BufferedWriter(new FileWriter(new File(
                    askUserForFilename())));
    writer.write("Hello World!");
} catch (IOException e) {
    e.printStackTrace();
} finally {
    try {
        if (writer != null)
            writer.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

您还可以使用 try-with-resources，它会在 try 块后自动关闭资源流。

```
boolean useStdout = askUserWhetherToUseStdout();
try (Writer writer = useStdout ? new OutputStreamWriter(System.out)
        : new BufferedWriter(new FileWriter(new File(
                askUserForFilename())))) {
    writer.write("Hello World!");
} catch (IOException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T11:34:58.620

如果`writer.write("Hello World!");`抛出异常，`writer.close()`则永远不会调用。

尝试将其包装到 try-catch 块中（可能利用自动关闭功能，请参阅[http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)）。

# elasticsearch - Elasticsearch日期字段中的空字符串？

> ID：15924632
> 
> 赞同：13
> 
> 时间：2013-04-10T11:30:43.553
> 
> 标签：elasticsearch

我的映射中有一个日期字段设置，如下所示：

```
"groupsAssignedDate" : {
    "type" : "date",
    "format" : "MM-dd-YYYY"
} 
```

在我的应用程序中，字段 groupsAssignedDate 最初设置为空字符串。分配组时，会生成一个 unix 时间戳并将其存储在该字段中。我正在尝试使用elasticsearch的批量更新功能来引入一堆groupAssignedDate为“”的文档，因为尚未分配任何组。不过，Elasticsearch 不会索引文档。这是在日志文件中：

```
Failed to parse [groupsAssignedDate]
...
failed to parse date field [], tried both date format [MM-dd-YYYY], and timestamp number 
```

看来elasticsearch支持JSON空值......我需要将我的文档从使用“”切换到null还是有什么方法可以支持使用空字符串？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-11T13:44:43.393

听起来您可能已经自己回答了这个问题。只需在日期字段中使用 null 而不是 "" 就可以了。

如果这是一个问题，也许可以从
[https://www.elastic.co/guide/en/elasticsearch/reference/current/ignore-malformed.html#ignore-malformed-setting考虑这个](https://www.elastic.co/guide/en/elasticsearch/reference/current/ignore-malformed.html#ignore-malformed-setting)

可以在索引级别设置 index.mapping.ignore_malformed 全局设置，以允许在所有映射类型中全局忽略格式错误的内容（格式错误的内容示例试图将字符串值索引为数字类型）**。**

**编辑** 编辑上面的 URL 以跳转到新信息。

**编辑** 再次编辑上面的 URL 以跳转到新信息。

# sql-server - 实体框架 5 TSQL 不兼容 SQL 2005 调用存储过程

> ID：15924635
> 
> 赞同：6
> 
> 时间：2013-04-10T11:30:55.750
> 
> 标签：sql-server, tsql, stored-procedures, entity-framework-5, mvc-mini-profiler

我正在使用实体框架 5，代码优先针对 SQL 2005 数据库。我有一个存储库，它有一个执行存储过程的方法——该方法看起来像这样；

```
 public IEnumerable<PossibleDuplicateCustomer> GetPossibleDuplicates(Customer customer)
    {

        return DbContext.Database.SqlQuery<PossibleDuplicateCustomer>(
            "EXEC SearchPotentialDuplicates @CustomerId = {0}, @FirstName = {1}, @LastName = {2}, @dob = {3}",
            customer.CustomerId,
            customer.CustomerFirstName,
            customer.CustomerLastName,
            customer.Dob);
    } 
```

我尝试的另一个变体是；

```
 public IEnumerable<PossibleDuplicateCustomer> GetPossibleDuplicates(Customer customer)
    {
        return DbContext.Database.SqlQuery<PossibleDuplicateCustomer>(
            "SearchPotentialDuplicates @CustomerId, @FirstName, @LastName, @dob",
            new SqlParameter("CustomerId", customer.CustomerId),
            new SqlParameter("FirstName", customer.CustomerFirstName),
            new SqlParameter("LastName", customer.CustomerLastName),
            new SqlParameter("dob", customer.Dob));
    } 
```

当我执行此操作时 - 我收到一个错误；

System.Data.SqlClient.SqlException (0x80131904)：“SearchPotentialDuplicates”附近的语法不正确。

所以我使用 miniprofiler 抓取了生成的 sql- 这给了我；

```
DECLARE @p0 int = 12644,
    @p1 nvarchar(4) = N'adam',
    @p2 nvarchar(3) = N'ant',
    @p3 datetime = '1951-11-01T00:00:00'

EXEC SearchPotentialDuplicates @CustomerId = @p0, @FirstName = @p1, @LastName = @p2, @dob = @p3 
```

我尝试将其复制并粘贴到 ssms 中，但它给出了错误，因为不支持在一行中声明和分配的语法

```
Msg 139, Level 15, State 1, Line 0
Cannot assign a default value to a local variable.
Msg 137, Level 15, State 2, Line 6
Must declare the scalar variable "@p0". 
```

这是一个新的 sql 2008 事物（[http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/12/05/sql-server-2008-t-sql-declare-and-set-in- the-same-statement.aspx](http://blogs.microsoft.co.il/blogs/bursteg/archive/2007/12/05/sql-server-2008-t-sql-declare-and-set-in-the-same-statement.aspx)）并且在 SQL 2005 中不支持 - 将查询更改为；

```
DECLARE @CustomerId int  ,
    @FirstName nvarchar(25),
    @LastName nvarchar(25) ,
    @dob datetime 

SET @CustomerId  = 12645
SET @FirstName  = N'adam'
SET @LastName  = N'ant'
SET @dob  = '1951-11-01T00:00:00'

exec SearchPotentialDuplicates @CustomerId, @FirstName, @LastName, @dob 
```

工作正常！所以我的问题是实体框架是如何使用这种心理语法的？我已经进行了一些谷歌搜索，人们谈论 ProviderManifestToken 但这显然只有在转到完全不同的平台（如 sql ce）时才需要，而不是在 sql 版本之间。那么是否有我缺少的设置，或者我可以更改查询以强制它以不同的方式执行？

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:43:50.230

终于得到了这个工作-我尝试按照这篇文章[http://blog.oneunicorn.com/2012/04/21/code-first-building-blocks/](http://blog.oneunicorn.com/2012/04/21/code-first-building-blocks/) （由实体框架团队的 Arthur Vickers 撰写）告诉 DbContext使用 sql 2005 语法 - 所以当我构建上下文时，我会这样做；

```
var builder = new DbModelBuilder();
builder.Entity<PossibleDuplicateCustomer>();
var model = builder.Build(new DbProviderInfo("System.Data.SqlClient", "2005"));
_compiledSql2005Model = model.Compile();

// OverdriveDbContext : DbContext
var context = new OverdriveDbContext(
    nameOrConnectionString: "OverdriveConnectionString", 
    model: _compiledSql2005Model); 
```

现在执行以下 SQL；

```
exec sp_executesql N'EXEC SearchPotentialDuplicates @CustomerId, @FirstName, @LastName, @dob',N'@CustomerId int,@FirstName nvarchar(4),@LastName nvarchar(3),@dob datetime',@CustomerId=12645,@FirstName=N'adam',@LastName=N'ant',@dob='1951-11-01 00:00:00' 
```

这在 SQL 2005 中完美运行。 **但请注意**- MiniProfiler（我用来监视实体框架调用）错误地将执行的 sql 显示为：

```
DECLARE @CustomerId int = 12645,
    @FirstName nvarchar(4) = N'adam',
    @LastName nvarchar(3) = N'ant',
    @dob datetime = '1951-11-01T00:00:00'

EXEC SearchPotentialDuplicates @CustomerId, @FirstName, @LastName, @dob 
```

这阻止了我注意到我已经修复了几个小时！因此，MiniProfiler 的 SQL 监控无法替代旧的 Sql Profiler 的教训！

# c# - 从 C++ 调用 C# 事件

> ID：15924645
> 
> 赞同：4
> 
> 时间：2013-04-10T11:31:16.570
> 
> 标签：c#, c++, com, function-pointers

我想知道从 c++ 代码调用 c# 代码的最佳做法是什么？我到底想要什么：我已经编写了 c++ 代码，当用户使用这个程序并遇到 c++ 代码中的某些函数时，我想调用另一个 c# 代码来执行其他东西，所以它就像语言之间的委托。我怎样才能最好地做到这一点？到目前为止，我的想法是：在 c# 中我可以制作 web 服务，然后用 c++ 调用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:35:21.353

我建议将 C# 类导出为 com 可见类。然后在 C++ 中使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:46:08.980

这是一个使用`C++\Cli`和的解决方案`boost::function`

本机代码：

```
typedef void MemberFunctionPointerType(int x);

class NativeClass
{
public:
    //I used boost but any function pointer will work
    void setDelegate(boost::function<MemberFunctionPointerType> delegate)
        {
            m_delegate = delegate;
        }
    void DoSomeThing()
        {
            int x;
            //do your logic here
            ...
            ...
            ...
            //when the needed event occurs call the callbackfunction so the class which registered to event will get his function called.
            m_delegate(x);                     

private:
    boost::function<MemberFunctionPointerType> m_delegate;        

}; 
```

托管代码：

```
typedef MemberFunctionPointerType* CallbackFunctionType;
delegate void CallbackFuncDelegate;

class ManagedClass
{
public:
    ManagedClass()
    {
        m_delegate = gcnew CallbackFuncDelegate(this,&ManagedClass::CallBackFunction);
        m_native = new NativeClass();

        //register the delegate;
        boost::function<MemberFunctionPointerType> funcPointer(static_cast<CallbackFunctionType>(Marshal::GetFunctionPointerForDelegate(m_delegate).ToPointer()));
        m_native->setDelegate(funcPointer);
    }
    //the callback function will be called every time the nativeClass event occurs.
    void CallBackFunction()
    {
        //do your logic or call your c# method
    }

private:
    CallbackFuncDelegate^ m_delegate ;
    NativeClass* m_native;    
}; 
```

那么为什么这会起作用并且垃圾收集器不会破坏一切：在处理 GC 时需要担心两件事：

1）委托的收集：只要 ManagedClass 还活着，就不会收集委托。所以我们不必担心。

2) 重新分配：GC 可能会按照自己的意愿重新分配内存中的对象，但本机代码不会获得指向委托的直接指针，而是指向编组器生成的某些代码块的指针。这种间接确保本机函数指针即使在移动委托时也保持有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T11:40:36.137

尝试使用[Unmanaged Exports](https://nuget.org/packages/UnmanagedExports)。我个人使用它从本地 C++ 应用程序调用 C# 函数。

# .net - 解决方案项目的 Nuget 自动链接器

> ID：15924648
> 
> 赞同：0
> 
> 时间：2013-04-10T11:31:23.300
> 
> 标签：.net, visual-studio-2012, nuget

在使用项目构建在彼此之上的解决方案中工作时，例如

```
Lib1
Lib1.Sub1
Lib1.Sub1.Sub1
Lib1.Sub1.Sub2
Lib1.Sub2
etc. 
```

例如，是否可以直接`Lib1.Sub1`引用`Lib1`（在解决方案级别上），但在打包时，是否可以引用 nuget 包？因为就目前而言，用 nuget 打包它不会识别它有依赖关系，`Lib1`因为它的 nuget 包没有被引用。

因此，当我`Lib1.Sub1`通过 nuget 安装到项目时，它也不会自动安装`Lib1`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:18:56.787

您在此处请求的功能将在 NuGet v2.5 中提供（我相信计划在 4 月底的某个时间发布）：

> 从项目构建包时，当指定 -IncludeReferencedProjects 时，如果 nuspec 文件存在，则项目引用的项目将作为包的依赖项添加，如果 nuspec 文件不存在，则将其添加到包中。

有关详细信息，请参阅v2.5 的[changelog.txt](http://nuget.codeplex.com/SourceControl/changeset/view/10d5d38151489ce053b314ed440bdbfbc30c595f#changelog.txt)。

# mvvmcross - MvvmCross：Android 绑定

> ID：15924660
> 
> 赞同：2
> 
> 时间：2013-04-10T11:32:00.197
> 
> 标签：mvvmcross

我正在使用 mvvmcross 为 android 和 WF8 开发应用程序。

在 WF8 UI 中，我使用以下代码：

```
 IsReadOnly="{Binding Path=DataContext.IsReadOnly, ElementName=DetailPageContentPanel } 
```

并访问`IsReadOnly`设置在更高级别的“”属性，
我可以在 android 中做同样的事情吗？我的目标是在 Mvx.MvxBindableLinearLayout 的模板中获得属性访问权限。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:58:34.737

目前。不。

除了您自己的 DataContext 之外，没有任何绑定访问权限。

有一个访问`$parent`v3 的想法，但它没有达到 alpha 截止期限。

目前，最好的方法是通过目标绑定对象提供您需要的所有属性 - 例如，使用 Linq 提供对 a`List<ObjectWithParent<T>>`而不是`List<T>`

如果您认为此功能很重要，请将其作为功能请求问题记录在 github/slodge/mvvmcross 上，并提供有关您的用例的尽可能多的详细信息。

# ipad - iCarousel 项目索引更改与 UITextView 中显示的随机详细信息不同步

> ID：15924668
> 
> 赞同：1
> 
> 时间：2013-04-10T11:32:36.753
> 
> 标签：ipad, ios6, icarousel

我正在使用 iOS6，在我的 iPad 应用程序中，我需要在其下方的 textView 中显示视图轮播和所选轮播项目的详细信息。用户可以通过单击或滚动来选择轮播视图。当滚动结束时，textView 中的详细信息应根据所选的轮播项目（描述、摘要等）显示详细信息。我可以通过 textviews 更新索引和那里。

我正在使用`- (void)carouselDidEndScrollingAnimation:(iCarousel )carousel`方法来知道滚动动画何时停止。当以编程方式或用户驱动停止滚动时会触发此方法。

```
- (void)carouselDidEndScrollingAnimation:(iCarousel *)carousel
{
    [self setSelectedItemIndex:[carousel currentItemIndex]];
} 
```

我从索引中获取相应的详细信息并重新加载视图。我已经修改了 setter 方法以重新加载详细信息。仅在触发委托时才分配索引。

到目前为止，一切正常。我能够显示与每个项目对应的值。每个项目并不总是具有有效值。但是，当用户继续拖动轮播时，虽然没有触发器来更改 textView 的值，但它会继续更改。一旦滚动停止并触发上述委托，就会显示正确的值。

**只有值`selectedItemIndex`的变化才会触发 textView 的值的变化。但是在滚动时，一些虚假值会显示在一个 textView 中。*

```
- (void)setSelectedMemoIndex:(NSUInteger)selectedMemoIndex
  {
  _selectedMemoIndex = selectedMemoIndex;
  [self didSelectItemAtIndex:_selectedMemoIndex];
  } 
```

如何将值分配给 textView

```
- (void)didSelectItemAtIndex:(NSInteger)index 
   {   //items array is a collection of NSManagedObjects  
   Item *item = self.items[index];  
   self.summaryTextView.text = item.summary;  
   self.descTextView.text = item.desc;  
   } 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:51:53.787

从评论中

代码看起来不错。问题可能出在代码中的某个地方，您可能正在 textview 中设置值。可能在某些委托方法中，因为它在滚动完成时会发生变化。

# c++ - 访问字符指针

> ID：15924677
> 
> 赞同：2
> 
> 时间：2013-04-10T11:33:10.697
> 
> 标签：c++

在 C++ 中，为什么编译器不允许修改以下字符指针如下

```
#include <iostream>

int main()
{
char* cp = "overflow";
cp[1]='p';
return 0;
} 
```

输出：运行时崩溃。

但字符数组允许，

```
#include <iostream>

int main()
{
char cps[] = "overflow";
cp[1]='p'; // this compiles fine and output is operflow
return 0;
} 
```

只想知道运行时发生了什么以及为什么会崩溃。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T11:35:46.410

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:35:55.087

This: `char* str="";`, 是一个字符串文字，可能存储在内存的只读部分中，因此可能会崩溃。使用`const char* const str="string";`（指针和数据都是常量或至少数据应该是常量：`const char* str="string";`或`char const* str="string";`）

如果您尝试更改字符串文字的内容，这是未定义的行为，并且可能发生导致崩溃的分段错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:36:32.053

当您设置时，您正在创建一个包含（后跟 NULL 终止字节）`char* cp = "overflow";`的只读内存块，因此您不能在那里写入。`"overflow"`试图改变`c[x]`需要写在那里。

至于您的第二个代码块-缺少某些内容，因此部分问题不清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:09:13.983

因为指向字符的指针不是 an`array`和 a `low-level const`。你可以做

```
char cp[] = {'o', 'v', 'e', 'r', 'f', 'l', 'o', 'w', '\0'};

char *pcp = cp;

*++pcp = 'p'; 
```

但是，`"overflow"`它是一个不可修改的恒定字符序列，因此您只能执行指针算术并取消引用指针的值。

```
char *cp = "overflow";

std::cout << *++cp std::endl; 
```

# asp.net - 中继器：如何将绑定数据添加到控件

> ID：15924681
> 
> 赞同：1
> 
> 时间：2013-04-10T11:33:18.917
> 
> 标签：asp.net, asp.net-mvc

我有一个 ASP.NET 中继器，其中绑定了具有值*名称*和*值的**DataView*。

 **在下面显示我的数据源可以正常工作：

```
<asp:Repeater runat="server" OnItemDataBound="Repeater_OnItemDataBound" ID="MyRepeater">
    <ItemTemplate>
        <%# Eval("name") %><br/>
        <%# Eval("value") %><br/>
    </ItemTemplate>
</asp:Repeater> 
```

相反，我想将值添加到标签和文本框：

```
<asp:Repeater runat="server" OnItemDataBound="Repeater_OnItemDataBound" ID="MyRepeater">
    <ItemTemplate>
        <div class="row">
            <asp:Label ID="Name" Text="<%# Eval("name") %>" runat="server" AssociatedControlID="Id" />
            <asp:TextBox ID="Value" runat="server" Text="<%# Eval("value") %>" Visible="False" />
            <asp:TextBox ID="Id" runat="server" />
        </div>
    </ItemTemplate>
</asp:Repeater> 
```

但这似乎不起作用。我收到*服务器标签格式不正确的*错误。

如何在标签和文本框中使用绑定的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:36:04.250

您错误地使用了引号 "。

见下文。

```
 <asp:Label ID="Name" Text='<%# Eval("name") %>' runat="server" AssociatedControlID="Id" />
<asp:TextBox ID="Value" runat="server" Text='<%# Eval("value") %>' Visible="False" /> 
```**

# java - 我怎样才能使这段代码更好

> ID：15924683
> 
> 赞同：1
> 
> 时间：2013-04-10T11:33:27.910
> 
> 标签：java, loops, if-statement

我有像这样的领域

> 变量1，变量2，变量3....等

我的条件是

```
if(variable1 != null && variable1 != 0 )
  myobject.setFirstValue(variable1);

if(variable2 != null && variable2 != 0 )
 myobject.setSecondValue(variable2);

if(variable3 != null && variable3 != 0 )
 myobject.setThirdValue(variable3); 
```

像这样我有近15个条件。有什么方法可以简单地编写所有这些条件。变量名称与我发布的不完全相同。它们与我发布的内容不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T11:35:59.560

你可以从...开始

```
if (notNullOrZer0(variable1)) {
   ...
}

private boolean notNullOrZero(Integer x) {
    return x != null && x != 0;
} 
```

然后也许把所有这些变量放在一个`List<Integer>`......这取决于你的其余代码的结构......

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T11:37:38.887

您可以创建一个`isNotNullorequalsZero`检查不为空且不等于零的方法

```
private boolean isNotNullorequalsZero(Integer value){
     return value != null && value != 0;
} 
```

你用那个-

```
if(isNotNullorequalsZero(variable1) )
  myobject.setFirstValue(variable1);

if(isNotNullorequalsZero(variable2) )
 myobject.setFirstValue(variable2);

if(isNotNullorequalsZero(variable3) )
 myobject.setFirstValue(variable3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:36:20.733

您可以将所有变量放在一个数组中，并使用 for 循环检查条件并将值设置为`myobject.setFirstValue(array[index]);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T11:38:24.193

要么将`setFirstValue`方法修改为

```
void setFirstValue(Integer var){
if(var !=null && var !=0) {
//current logic of setFirstValue
}
} 
```

或者如果无法修改它，则创建一个包装器调用（**如果调用失败，则返回布尔类型以通知用户**）

```
boolean checkAndSetFirstValue(Integer var) {
    if(var !=null && var !=0){
        setFirstValue(var);
        return true;
    }
    return false;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T11:38:33.797

您可以创建一个名为 的方法`copyIfNonZero`，它可能看起来像这样：

```
public void copyIfNonZero(MyObject myObject, Integer value) {
    if (value != null && value != 0) {
        myObject.setFirstValue(value);
    }
} 
```

当前的代码将减少到

```
copyIfNonZero(myobject, variable1);
copyIfNonZero(myobject, variable2);
copyIfNonZero(myobject, variable3);
... 
```

甚至将变量放入 a`Collection`并对其进行迭代：

```
Collection<Integer> values = .....
for(Integer value : values) {
    copyIfNonZero(myObject, value);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T11:54:47.913

如果这是在您的代码中确实经常发生的事情，并且您想封装此行为并避免重复它，我会这样做：

在工具或实用程序类中，创建一个静态方法：

```
public static void setPropertyIfNonNullNorZero(Object target, String propertyName, Integer value){

    //use some reflection tooling here, or write the whole thing yourself... I am  using commons.beanutils here

    if(value != null && value != 0){
        BeanUtils.setProperty(target, propertyName, value);
    }

} 
```

此代码假定您的目标对象 (myObject) 遵守 bean 约定（基本上一致的 getter 和 setter 命名），并且值始终是整数。

然后像这样使用它：

```
Tools.setPropertyIfNonNullNorZero(myobject, "thirdValue", variable3); 
```

# python - InvalidRequestError：结果集中的列名“***”不明确，而请求对 mysqldb 有效？

> ID：15924689
> 
> 赞同：5
> 
> 时间：2013-04-10T11:33:42.373
> 
> 标签：python, mysql, python-2.7, sqlalchemy

我的代码如下：

```
s = DBSession()
r = s.query(Food, FoodCategory).filter(Food.category_id == FoodCategory.id).first() 
```

此查询引发异常：

```
sqlalchemy.exc.InvalidRequestError: Ambiguous column name 'food.category_id' in result set 
```

我已经在mysql db中直接尝试过查询，它可以正常工作。我还打印了 sqlalchey 查询。是的，有相同的标签，“food.category_id as food_category_id”和“food_category.id as food_category_id”。

我怀疑现在这个查询对mysql有效，为什么对sqlalchemy无效

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T23:03:16.780

SQLAlchemy 使用结果集中的列名来标识列。为避免冲突，它使用表限定名称标记结果列。在这种情况下，我收集的表格名为“food”和“food_category”，因此“food_category_id”仍然存在标签重叠。这种特定情况的解决方法是使用其中一个类的别名：

```
fa = aliased(FoodCategory)
s.query(Food, fa).filter(Food.category_id == fa.id).all() 
```

**编辑**：这里实际上有一个从 SQLAlchemy 0.7 到 0.8 的回归。0.7 中的行为稍好一些，您不会收到错误消息，但其中一列不会被加载，除非您稍后访问它。这个问题就[在这里](http://www.sqlalchemy.org/trac/ticket/2702)。但是，我还想考虑在此处添加更多自动别名以克服名称冲突，这可能会很棘手。

# asp.net - ASP.Net Web 表单友好 URL 在服务器上不起作用

> ID：15924690
> 
> 赞同：3
> 
> 时间：2013-04-10T11:33:50.303
> 
> 标签：asp.net, webforms

新的 ASP.Net Web 窗体项目的友好 URL 可以在我的计算机上很好地调试，但是当发布到服务器时它不起作用我需要更改 IIS 中的某些内容以使其在服务器上工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T15:10:49.120

原来我对 Bundles 有同样的问题，发现我需要将它添加到 web.config 文件的 system.webServer 部分：

```
<modules runAllManagedModulesForAllRequests="true">
    <remove name="BundleModule" />
    <add name="BundleModule" type="System.Web.Optimization.BundleModule" />
</modules> 
```

# iphone - 我如何更改 UILocalNotification 中的 UserInfo？

> ID：15924698
> 
> 赞同：2
> 
> 时间：2013-04-10T11:34:21.543
> 
> 标签：iphone, ios, objective-c, uilocalnotification

我有 6 个**UILocalNotifications。每个通知都有自己的“userInfo”**

1.  @“1”
2.  @"2"
3.  @"3"
4.  @"4"
5.  @“5”
6.  @“6”

然后我删除通知编号 4，并有 5 个通知：

1.  @“1”
2.  @"2"
3.  @"3"
4.  @“5”
5.  @“6”

我如何更改通知中的**“userInfo”**以获得：

1.  @“1”
2.  @"2"
3.  @"3"
4.  @"4"
5.  @“5”

保存代码 -

```
// Specify custom data for the notification

NSDictionary *infoDict = [NSDictionary dictionaryWithObject:[NSString stringWithFormat:@"%i", i] forKey:@"notif"];
localNotif.userInfo = infoDict;
 i = i + 1; 
```

德尔代码 -

```
if (flagTable == 1)
{
    int numberPhoto = [[[UIApplication sharedApplication] scheduledLocalNotifications] count];
    int numPhFlag = numberPhoto;
    int i = 0;
    NSLog(@"Col notif = %d", numberPhoto);
    UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    while (numberPhoto == numPhFlag) {
        localNotif = [[[UIApplication sharedApplication] scheduledLocalNotifications] objectAtIndex:i];
        localNotif.timeZone = [NSTimeZone localTimeZone];
        NSDateFormatter *format = [[NSDateFormatter alloc] init];
        [format setDateFormat:@"dd-MM-yyyy HH:mm"];
        NSString *itemDateWithFormat = [format stringFromDate:localNotif.fireDate];
        NSLog(@"remText2 %@ = fireDate2 %@", itemDateWithFormat, [appDel.fireDateArray objectAtIndex:row]);
        if ([itemDateWithFormat isEqualToString:[appDel.fireDateArray objectAtIndex:row]]) {
            NSLog(@"remText3 %@ = fireDate3 %@", itemDateWithFormat, [appDel.fireDateArray objectAtIndex:row]);
            [[UIApplication sharedApplication] cancelLocalNotification:localNotif];
            numPhFlag = numPhFlag - 1;
        }
        i = i + 1;
    }
    int getNot = [[[UIApplication sharedApplication] scheduledLocalNotifications] count];
    NSLog(@"Col notif2 = %d", getNot);
} 
```

我想遍历通知并替换其 userInfo 中的数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T12:48:28.070

得到答案 =)

```
int notifCount = [[[UIApplication sharedApplication] scheduledLocalNotifications] count];
for (int j = 0; j < notifCount; j++) {
    UILocalNotification *notific = [[[UIApplication sharedApplication] scheduledLocalNotifications] objectAtIndex:j];
    NSLog(@"notificBefore = %@ and j = %i", [notific.userInfo objectForKey:@"notif"], j+1);
    if ([notific.userInfo objectForKey:@"notif"] != [NSString stringWithFormat:@"%i", j+1]) {
        [[UIApplication sharedApplication] cancelLocalNotification:notific];
        NSDictionary *infoDict = [NSDictionary dictionaryWithObject:[NSString stringWithFormat:@"%i", j+1] forKey:@"notif"];
        [notific setUserInfo:infoDict];
        NSLog(@"notificEnd = %@", [notific.userInfo objectForKey:@"notif"]);
        [[UIApplication sharedApplication] scheduleLocalNotification:notific];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:06:35.160

关于 UILocalNotification 的一件事是您无法编辑任何 uilocalnofication 的信息。您必须取消它并重新安排它。因此，在重新安排时，您必须使用存在并重新安排的预定通知数组（安排新通知并取消现有通知。这就像您通过取消和重新安排来替换通知）

```
NSArray *scheduledNotifications = [[UIApplication sharedApplication] scheduledNotifications];
i = 0;
for (UILocalNotification *notif in scheduledNotifications) {
  UILocalNotification *notifToReschedule;

  i++; 

  notifToReschedule.userInfo = [NSString stringWithFormat:@"%@",i];
  notifToReschedule.timeZone = notif.timeZone
  // you can use the already scheduled local notification's information to schedule another one. and cancel the one yo are iterating through. 

  [[UIApplication sharedApplication] scheduleLocalNotification:notifToReschedule];

  [[UIApplication sharedApplication] cancelLocalNotification:notif];
} 
```

# python - 从导入模块中的函数访问全局变量

> ID：15924700
> 
> 赞同：9
> 
> 时间：2013-04-10T11:34:26.607
> 
> 标签：python, function, python-2.7, module, global-variables

我有一个从模块调用的函数。在函数中，我试图访问的两个变量是全局的。当我自己在 IDLE 中运行模块时，我仍然可以在函数结束后访问变量，正如预期的那样。当我在已导入模块的代码中调用函数时，我无法访问变量。

```
#module to be imported

def globaltest():
    global name
    global age
    name = str(raw_input("What is your name? "))
    age = int(raw_input("What is your age? ")) 
```

当我自己运行它时的输出。

```
>>> globaltest()
What is your name? tom
What is your age? 16
>>> name
'tom'
>>> age
16 
```

以及导入它的代码。

```
import name_age

name_age.globaltest() 
```

但是当我运行尝试访问我导入它的代码中的变量时。

```
What is your name? tom
What is your age? 16
>>> name

Traceback (most recent call last):
File "<pyshell#10>", line 1, in <module>
 name
NameError: name 'name' is not defined
>>> 
```

如何在导入模块的代码中使变量成为全局变量或访问函数中的“名称”或“年龄”变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T11:43:44.537

简单的答案是“不要”。Python 的“全局变量”只是模块级全局变量，即使是模块级全局变量（即可变模块级全局变量）也应尽可能避免，而且真的很少有理由使用它。

正确的解决方案是学习正确使用函数参数和返回值。在您的情况下，第一种方法是

```
#module.py

def noglobaltest():
    name = str(raw_input("What is your name? "))
    age = int(raw_input("What is your age? "))
    return name, age 
```

接着：

```
from module import noglobaltest

name, age = noglobaltest()
print "name :", name, "age :", age 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:37:23.893

只需将您的`import`声明更改为以下内容：

```
from name_age import * 
```

**例子：**

```
In [1]: from name_age import *
In [2]: print name
Out[2]: 'tom' 
```

否则，如果要使用该`import name_age`语句，则必须`global`通过模块名称引用来访问变量，即：

**例子：**

```
In [1]: import name_age
In [2]: print name_age.name
Out[2]: 'tom' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-07-02T16:13:47.847

我很惊讶还没有人提到这个妥协。由于[PEP-8](https://legacy.python.org/dev/peps/pep-0008/#imports)不鼓励通配符导入，正如其他人所提到的，您也可以使用它`import ... as`来使您的代码更加清晰。当其他人编写了一些我需要进行单元测试的（设计不佳的）代码时，我发现自己陷入了这种困境。

如果模块`foo.bar`包含一个名为`VARIABLE`的全局变量，那么下面是我在单元测试中如何从它们的模块访问全局变量的示例：

```
import unittest
import foo.bar as fb

class testFooBar(unittest.TestCase):

    def test_VAR(self):
        self.assertEqual(fb.VARIABLE, 1234, “foo.bar.VARIABLE should be 1234”) 
```

# javascript - 如何从列表中提取值？

> ID：15924702
> 
> 赞同：0
> 
> 时间：2013-04-10T11:34:31.340
> 
> 标签：javascript, microsoft-metro, winjs

首先，我有一个这样填写的列表：

```
 var data = {};
        liste_path_categories.forEach(function (element) {
        data[element.letter] = {};
        data[element.letter][element.id_categ] = element.reponse;
            }); 
```

所以我检查了列表是否已填写：

```
 console.log("list data[][] to be send to the web service");
        for (var o in data) {
        for (var p in data[o]) {
            console.log("data[" + o + "][" + p + "]= " + data[o][p]);

        } 
```

一切都好 。现在，当我将它附加到 FormData 对象以在 xhr 发布请求的数据中时：

```
 var mdata = new FormData();
    mdata.append('token', token);
    mdata.append('game_session_id', WinJS.Application.sessionState.game_session_id);
   /* mdata.append('data[A][6480]', "Affz");
    mdata.append('data[A][6483]', "Azfzf");
    mdata.append('data[A][6487]', "Azfz");
    mdata.append('data[A][6484]', "Afzf");
    mdata.append('data[A][6486]', "Azfzf");
    */
    mdata.append('data', data); 
```

当我发送时，我遇到了内部服务器问题，但是当我评论该行并发送 mdata.append(data by data in statiw way) 并成功发送时。我应该在数据列表中添加什么，我尝试了 JSON.stringify(data) 但它失败了。如果有人知道如何提取所有数据并拆分列表数据。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:49:38.657

所以如果手动附加产生正确的格式，你为什么不直接

```
for key, subkeys of data
  for subkey, value of subkeys
    mdata.append("data[#{key}][#{subkey}]", value) 
```

# ios - 切换视图时presentViewController不加载标签栏

> ID：15924706
> 
> 赞同：0
> 
> 时间：2013-04-10T11:34:38.627
> 
> 标签：ios, xcode, cocoa-touch

当我从 designworks.xib (designworks.m, designworks.h) 切换到 MainStoryboard FirstViewController （这是一个标签栏控制器，标签栏外的第一个控制器）时，它会在故事板上加载内容，但不会在标签栏中加载导航在底部。

```
- (IBAction)backToHome:(id)sender {
    /*
    FirstViewController *fvc = [[FirstViewController alloc] initWithNibName:nil bundle:nil];
    [self presentViewController:fvc animated:YES completion:nil];
     */
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    FirstViewController *fvc = [storyboard instantiateViewControllerWithIdentifier:@"FirstViewController"];
    fvc.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    [self presentViewController:fvc animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:47:13.067

检查您是否以这种方式完成

将视图控制器添加到 tabbarcontroller。

确保您已将其添加到您的 .h 文件中

```
@property (nonatomic, strong) UITabBarController *tabController; 
```

在你的 .m 文件中合成 tabController 和

```
FirstViewController *fistView = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
SecondViewController *secondView = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
ThirdViewController *thirdView = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil];

NSArray *viewControllersArray = [[NSArray alloc] initWithObjects:fistView, secondView, thirdView, nil];

self.tabController = [[UITabBarController alloc] init];
[self.tabController setViewControllers:viewControllersArray animated:YES]; 
```

现在将其呈现为模态

```
[self presentViewController:self.tabController animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:39:43.490

如果您的第一个视图控制器位于标签栏控制器内，请改为推送标签栏控制器。

# c++ - C(++) 和 Lua 清理内存

> ID：15924715
> 
> 赞同：1
> 
> 时间：2013-04-10T11:35:12.693
> 
> 标签：c++, memory-leaks, lua

我在我正在编写的应用程序中使用 Lua 的 C API，我试图确定我使用它的方式是否留下了一些悬空指针（指向指针）。

假设我在 C++ 中有一个类似树的结构（实际上是类）

```
struct Leaf
{
  DoSomeLeafStuff();
  List<Leaf*> Children;
};

class Tree
{
public:
  Tree() { };
  virtual ~Tree() 
  { 
    /* iterate over Children and delete them */ 
  };

  void DoSomeTreeStuff();
  Leaf getRoot() const { return _root; }

private:
  Leaf* _root;
}; 
```

-- 假设`tree`已经创建并包含数据，我在 Lua 中这样使用它：

```
local root = tree:getRoot()
root:DoSomeLeafStuff() 
```

现在我的 Lua 的 C 实现`getRoot()`看起来像：

```
int LuaStuff::TreeGetRoot(lua_State* L)
{
  Tree* tree = *(Tree**)luaL_checkudata(L, 1, "MyStuff.Tree");

  if (tree != NULL && tree->getRoot() != NULL)
  {
    int size = sizeof(Leaf**);
    *((Leaf**)lua_newuserdata(L, size)) = tree->getRoot(); // allocate a pointer to a pointer
    lua_setmetatable(L, "MyStuff.Leaf");
  }
  else
  {
    lua_pushnil(L);
  }

  return 1;
} 
```

经过一些故障排除后，我能够在您期望的时候释放我的 Tree 和 Leaf 对象。但是到目前为止，我还没有找到一种令人信服的方法（至少对我来说）指针指针正在被清理。

我的问题是：我可以安全地假设 Lua 的 lua_newuserdata() 分配的内存会被 Lua 的垃圾收集自动清理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:10:31.423

我正在做类似的事情，在 Lua 中包装我自己的对象。我就是这样做的：

```
/*part of the functon, buffer_s is a structure holding pointer 
to the real object and some other fields (like who actually created the object)
*/
buffer_s* b = (buffer_s*) lua_newuserdata(L, sizeof(buffer_s));
b->ptr = new buffer;        
b->origin = FROM_LUA;       
luaL_getmetatable(L, "buffer");
lua_setmetatable(L, -2); 
```

现在，在初始化库时，我也做了这样的事情：

```
luaL_newmetatable(L, "buffer");  //create metatable
lua_pushcfunction(L,lua_buffer_delete); //push Lua compatible "destructor"
lua_setfield(L, -2, "__gc");    //place it in the metatable under __gc index

lua_pushvalue(L, -1);
lua_setfield(L, -2, "__index");

luaL_register(L, NULL, maps_buffer_m); 
```

现在 Lua 将在 free() （通过 GC）对象之前调用 __gc 元方法。你可以用它来做清理工作。

我这样做（功能的一部分）：

```
if (b->origin == FROM_LUA)
{

     delete b->ptr;   //delete the object
     b->origin = PTR_INVALID;  //and mark it as invalid
     b->ptr = NULL;
     lua_newtable(L);
     lua_setmetatable(L, 1);        //set empty metatable, it's not buffer any more
     return 0;
} 
```

我希望它有帮助:)

您可以考虑使用 tolua++ 或 swig 来自动化执行绑定的过程。它将节省大量时间，并且可能会以正确的方式处理对象的创建和删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T09:42:58.687

我建议您使用一些[Lua Wrapper Class](http://lua-users.org/wiki/CppConvenientLuaWrapperClass)。我一直在我们的项目中使用它，效果很好。它也使事情变得容易得多。当你的 Lua 脚本结束时，使用这个类，包装器会破坏你正在使用的 Lua 状态来释放你的内存，以及你所有的用户数据。

我还认为，如果您执行以下操作：

```
lua_close( mState ); 
```

您的 userData 也将被清理。

# sharepoint - 如何务实地编辑 Project Server 2010 的自定义字段

> ID：15924719
> 
> 赞同：0
> 
> 时间：2013-04-10T11:35:19.923
> 
> 标签：sharepoint, sharepoint-2010, project-server, ms-project-server-2010

您好，我想实用地编辑 Project Server 2010 的自定义字段，但我不知道我在哪里做错了。以下是代码，

请在这方面帮助我

```
ProjectSoapClient projectSvc = new ProjectSoapClient();
            CustomFieldsSoapClient customfieldSvc = new CustomFieldsSoapClient();
            CustomFieldDataSet fieldDefs = customfieldSvc.ReadCustomFields(string.Empty, false);

Guid projectId = new Guid(projGuid);
            ProjectDataSet projectDs = projectSvc.ReadProject(projectId, ListProjects.Project.DataStoreEnum.WorkingStore);

        foreach (ProjectDataSet.ProjectCustomFieldsRow cfRow in projectDs.ProjectCustomFields.Rows)
        {
            CustomFieldDataSet.CustomFieldsRow fieldDefinition = fieldDefs.CustomFields.Single(
                    cfd => cfd.MD_PROP_UID == cfRow.MD_PROP_UID);

            //if (cfRow.FIELD_TYPE_ENUM == 21 || cfRow.FIELD_TYPE_ENUM == 15) //if it is a choice field
            //{
                if (fieldDefinition.MD_PROP_NAME == "ProductCategory")
                {
                    cfRow.TEXT_VALUE = newValue;
                }
            //}
        }
        Guid sessionUid = Guid.NewGuid();
        Guid jobUid = Guid.NewGuid();
        if (!IsProjectCheckedOut(projectId))
        {
            projectSvc.CheckOutProject(projectId, sessionUid, "Updating CF");
            jobUid = Guid.NewGuid();
            projectSvc.QueueUpdateProject(jobUid, sessionUid, projectDs, false);
        }
        jobUid = Guid.NewGuid();
        projectSvc.QueuePublish(jobUid, projectId, true, SPContext.Current.Site.Url);
        projectSvc.QueueCheckInProject(jobUid, projectId, true, sessionUid, "Updating CF"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T13:29:39.570

也许是因为你先发布了项目。它也仅适用于 QueueCheckInProject 函数。

另一个原因可能是，您在迭代中搜索的行尚不可用，您必须先将其添加到项目数据集中！

您应该等待完成结帐、更新和签入！

查看我的博客文章了解更多详情： [http ://www.geeklife.ch/dev/update-project-server-2010-customfields-over-psi/](http://www.geeklife.ch/dev/update-project-server-2010-customfields-over-psi/)

或者我在这个线程中的回答： [使用 PSI 设置自定义字段 - Microsoft Project Server](https://stackoverflow.com/questions/9421313/setting-custom-fields-using-the-psi-microsoft-project-server)

# java - 如何使用liferay将jsp文件中的图像路径存储在mySql中？

> ID：15924722
> 
> 赞同：0
> 
> 时间：2013-04-10T11:35:31.543
> 
> 标签：java, mysql, image, jsp, liferay

您好，我正在使用 liferay portlet。我想使用 jspfile 将图像路径存储在 MySQL 中，并使用该图像路径在另一个 jsp 文件上显示图像。如何才能做到这一点？

上传.jsp：

```
<aui:input type="file" label="Photo" name="photo"/> 
```

使用 java 文件我将图像存储在数据库中。通过以下代码，我尝试将图像存储在 MySQL 中。

```
String photo=ParamUtil.getString(actionRequest,"photo"); 
directory d1 = new directoryImpl();
d1.setPhoto(photo); 
```

并使用以下代码尝试在另一个 jsp 页面上检索图像。

```
 <% 
  int count = directoryLocalServiceUtil.getdirectoriesCount();
  List<directory> tlist=directoryLocalServiceUtil.getdirectories(0,count);
  %>
  <%
  for(directory dd:tlist)
  {
  %>
  <%=dd.getPhoto() %>
  <%
   }
   %> 
```

但这会将图像名称存储在数据库字段中。（即`images.jpg`）。当我从数据库中检索时，我只能检索`images.jpg`.

如何在另一个页面上保存和检索图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-16T19:34:55.910

有同样的问题，如果您使用的是文档库，这是我的解决方案

```
 ThemeDisplay themeDisplay = (ThemeDisplay)renderRequest.getAttribute(WebKeys.THEME_DISPLAY);

try {
    FileEntry fileEntry = DLAppServiceUtil.getFileEntry(themeDisplay.getLayout().getGroupId(), 0, "test1.jpg");
    imagePath = DLUtil.getWebDavURL(themeDisplay, fileEntry.getFolder(), fileEntry);
    previewImagePath = DLUtil.getPreviewURL(fileEntry, fileEntry.getFileVersion(), themeDisplay, "");
} catch (PortalException e) {

    e.printStackTrace();
} 
```

# asp.net - 需要字符串中的第二个单词。怎么做？

> ID：15924727
> 
> 赞同：0
> 
> 时间：2013-04-10T11:35:47.383
> 
> 标签：asp.net, vb.net

我有一个包含“Welcom salathia”的字符串变量......
我想将salathia存储到另一个字符串......如何使用vb.net在asp.net中执行此操作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:40:29.653

您可以使用 contains 函数获取第一个空格及其索引，然后获取字符直到找到下一个空格。

拆分功能在这方面也很有用。这也会更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:38:04.480

您可以使用 split 并获取第二个字符串。

```
Dim s As String = "Welcom salathia"
' Split string based on spaces
Dim words As String() = s.Split(New Char() {" "c}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:02:38.837

如果有空格

```
 Dim s As String = "Welcom   salathia"
    ' Split string based on spaces, gurad against runs of space
    Dim words() As String = s.Split(New Char() {" "c}, StringSplitOptions.RemoveEmptyEntries)
    Debug.WriteLine(words(1)) 'show second word 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T11:41:19.330

**方式一：**

```
Dim s As String = "Welcom salathia"
s = s.Split(" ".ToCharArray)(1) 
```

**方式二：**

```
Dim s As String = "Welcom salathia"
s = s.substring(s.index(" ")) 
```

# php - 如何在 PHP Mysql 中仅实现一级深度评论系统

> ID：15924732
> 
> 赞同：0
> 
> 时间：2013-04-10T11:35:55.623
> 
> 标签：php, mysql, database-design

我只想在 php 中制作一级深度评论系统，就像 stackoverflow 评论系统一样。

我创建了一个包含以下字段的评论表

```
 comment_id int(11) (PRIMARY KEY)
  parent_id int(11)
  thread_id int(11) (FOREIGN KEY)
  title varchar(400)
  body varchar(400)
  date_comment timestamp 
  user_name varchar(100) 
```

我正在使用此查询检索父评论

```
SELECT * FROM comments WHERE thread_id = {$thread_id} 
AND parent_id IS NULL 
```

但我还需要按照先到父评论然后是所有子评论的顺序检索所有子评论，依此类推..（就像 Stackoverflow 评论系统一样）

有什么建议吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:09:12.623

如果没有任何特殊键，您无法订购所有数据。

最简单的方法是选择所有评论和线程：

```
SELECT
 * 
FROM
 comments 
WHERE
 thread_id = {$thread_id} 
```

并对结果数组进行简单的操作：

```
$array = array();
foreach($result as $row)
{
    if(!$row['thread_id']){
        $array[$row['id']]=array();
        $array[$row['id']]['DATA'] = $row;
        continue;
    }

    $array[$row['id']][$row['id']] = $row;
} 
```

您将拥有如下数组：

```
Array(
  /*thread==>*/          [11] => Array(
      /*thread data==>*/   [DATA] => Array(/*with thread data*/)
      /*comment==>*/       [12] => Array(/*with data*/)
      /*comment==>*/       [13] => Array(/*with data*/)
  )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:50:25.950

```
<?php 

$a = mysql_query("Select * From comments where thread_id = {$thread_id} AND parent_id IS NULL");

while($row= mysql_fetch_array($a)) {
  $b = mysql_query("Select * From comments, where thread_id = ($thread_id} AND parent_id = " . $row['comment_id'] .";");
  while($row2 = mysql_fetch_array($b) {
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:41:01.763

假设您只在评论表中记录评论......

要获取线程的所有注释，请使用如下 sql 查询：

```
select * from comments where thread_id = 'yourthread_id' 
```

我假设 q & a 作为父母。

您必须**将**评论连同他们的**线程和父 ID**写到 表中，记录他们所属的位置。

录制时不要让它们为空。

所以：

```
$query  = "select * from comments where thread_id = '$threadId'";
$result = mysqli_query($query);
if(!$result){
   echo('Failure : '.mysqli_errno());
   exit(0);
}
$comments = [];
while(true){
    $row = mysqli_fetch_assoc($result);
    if(!$row)break;
    $comments[] = $row;
} 
```

现在你有 $comments 数组，其中填充了属于该线程的评论。

每个元素都具有数据库记录的结构：

```
 $comment[0]['comment_id'] etc... 
```

现在通过遍历该数组，您可以通过其 parent_id 将每个评论收集到其适当的父项中，并通过时间戳发现它们的条目顺序......这是数组操作，我想您可以轻松完成。

# php - 无法修复 - 绝对无法获取 wsdl 生成的 xml

> ID：15924741
> 
> 赞同：-3
> 
> 时间：2013-04-10T11:36:17.583
> 
> 标签：php, xml, soap

这越来越荒谬了。我已经在这 3 周试图获得 wsdl 生成的 xml，但我什么也得不到。我正在使用 PHP 来生成请求。这里的服务描述：

```
<wsdl:definitions xmlns:s="http://www.w3.org/2001/XMLSchema xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:tns="http://tempuri.org/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tm="http://microsoft.com/wsdl/mime/textMatching/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://tempuri.org/">
<wsdl:types>
<s:schema elementFormDefault="qualified" targetNamespace="http://tempuri.org/">
<s:element name="GetListaCategorii">
<s:complexType>
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="CodClient" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="Parola" type="s:string"/>
</s:sequence>
</s:complexType>
</s:element>
<s:element name="GetListaCategoriiResponse">
<s:complexType>
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="GetListaCategoriiResult" type="tns:ListaCategorii"/>
</s:sequence>
</s:complexType>
</s:element>
<s:complexType name="ListaCategorii">
<s:sequence>
<s:element minOccurs="1" maxOccurs="1" name="Nrreg" type="s:int"/>
<s:element minOccurs="0" maxOccurs="1" name="Categorii" type="tns:ArrayOfCategorie"/>
</s:sequence>
</s:complexType>
<s:complexType name="ArrayOfCategorie">
<s:sequence>
<s:element minOccurs="0" maxOccurs="unbounded" name="Categorie" nillable="true" type="tns:Categorie"/>
</s:sequence>
</s:complexType>
<s:complexType name="Categorie">
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="Categorie" type="s:string"/>
</s:sequence>
</s:complexType>
<s:element name="GetCatalog">
<s:complexType>
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="CodClient" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="Parola" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="Categorie" type="s:string"/>
</s:sequence>
</s:complexType>
</s:element>
<s:element name="GetCatalogResponse">
<s:complexType>
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="GetCatalogResult" type="tns:Catalog"/>
</s:sequence>
</s:complexType>
</s:element>
<s:complexType name="Catalog">
<s:sequence>
<s:element minOccurs="1" maxOccurs="1" name="Nrreg" type="s:int"/>
<s:element minOccurs="0" maxOccurs="1" name="Produse" type="tns:ArrayOfProdus"/>
</s:sequence>
</s:complexType>
<s:complexType name="ArrayOfProdus">
<s:sequence>
<s:element minOccurs="0" maxOccurs="unbounded" name="Produs" nillable="true" type="tns:Produs"/>
</s:sequence>
</s:complexType>
<s:complexType name="Produs">
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="CodProdus" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="Denumire" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="Categorie" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="CodProducator" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="Producator" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="Pret" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="Moneda" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="Instoc" type="s:string"/>
</s:sequence>
</s:complexType>
<s:element name="hello">
<s:complexType/>
</s:element>
<s:element name="helloResponse">
<s:complexType>
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="helloResult"/>
</s:sequence>
</s:complexType>
</s:element>
<s:element name="GetCatalogTot">
<s:complexType>
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="CodClient" type="s:string"/>
<s:element minOccurs="0" maxOccurs="1" name="Parola" type="s:string"/>
</s:sequence>
</s:complexType>
</s:element>
<s:element name="GetCatalogTotResponse">
<s:complexType>
<s:sequence>
<s:element minOccurs="0" maxOccurs="1" name="GetCatalogTotResult" type="tns:Catalog"/>
</s:sequence>
</s:complexType>
</s:element>
</s:schema>
</wsdl:types>
<wsdl:message name="GetListaCategoriiSoapIn">

<wsdl:part name="parameters" element="tns:GetListaCategorii"/>
</wsdl:message>
<wsdl:message name="GetListaCategoriiSoapOut">
<wsdl:part name="parameters" element="tns:GetListaCategoriiResponse"/>
</wsdl:message>
<wsdl:message name="GetCatalogSoapIn">
<wsdl:part name="parameters" element="tns:GetCatalog"/>
</wsdl:message>
<wsdl:message name="GetCatalogSoapOut">
<wsdl:part name="parameters" element="tns:GetCatalogResponse"/>
</wsdl:message>
<wsdl:message name="helloSoapIn">
<wsdl:part name="parameters" element="tns:hello"/>
</wsdl:message>
<wsdl:message name="helloSoapOut">
<wsdl:part name="parameters" element="tns:helloResponse"/>
</wsdl:message>
<wsdl:message name="GetCatalogTotSoapIn">
<wsdl:part name="parameters" element="tns:GetCatalogTot"/>
</wsdl:message>
<wsdl:message name="GetCatalogTotSoapOut">
<wsdl:part name="parameters" element="tns:GetCatalogTotResponse"/>
</wsdl:message>
<wsdl:portType name="ZCatalogDistributionSoap">
<wsdl:operation name="GetListaCategorii">
<wsdl:input message="tns:GetListaCategoriiSoapIn"/>
<wsdl:output message="tns:GetListaCategoriiSoapOut"/>
</wsdl:operation>
<wsdl:operation name="GetCatalog">
<wsdl:input message="tns:GetCatalogSoapIn"/>
<wsdl:output message="tns:GetCatalogSoapOut"/>
</wsdl:operation>
<wsdl:operation name="hello">
<wsdl:input message="tns:helloSoapIn"/>
<wsdl:output message="tns:helloSoapOut"/>
</wsdl:operation>
<wsdl:operation name="GetCatalogTot">
<wsdl:input message="tns:GetCatalogTotSoapIn"/>
<wsdl:output message="tns:GetCatalogTotSoapOut"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:binding name="ZCatalogDistributionSoap" type="tns:ZCatalogDistributionSoap">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="GetListaCategorii">
<soap:operation soapAction="http://tempuri.org/GetListaCategorii" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="GetCatalog">
<soap:operation soapAction="http://tempuri.org/GetCatalog" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="hello">
<soap:operation soapAction="http://tempuri.org/hello" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="GetCatalogTot">
<soap:operation soapAction="http://tempuri.org/GetCatalogTot" style="document"/>
<wsdl:input>
<soap:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:binding name="ZCatalogDistributionSoap12" type="tns:ZCatalogDistributionSoap">
<soap12:binding transport="http://schemas.xmlsoap.org/soap/http"/>
<wsdl:operation name="GetListaCategorii">
<soap12:operation soapAction="http://tempuri.org/GetListaCategorii" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="GetCatalog">
<soap12:operation soapAction="http://tempuri.org/GetCatalog" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="hello">
<soap12:operation soapAction="http://tempuri.org/hello" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
<wsdl:operation name="GetCatalogTot">
<soap12:operation soapAction="http://tempuri.org/GetCatalogTot" style="document"/>
<wsdl:input>
<soap12:body use="literal"/>
</wsdl:input>
<wsdl:output>
<soap12:body use="literal"/>
</wsdl:output>
</wsdl:operation>
</wsdl:binding>
<wsdl:service name="ZCatalogDistribution">
<wsdl:port name="ZCatalogDistributionSoap" binding="tns:ZCatalogDistributionSoap">
<soap:address location="http://exemple.com/service.asmx"/>
</wsdl:port>
<wsdl:port name="ZCatalogDistributionSoap12" binding="tns:ZCatalogDistributionSoap12">
<soap12:address location="http://exemple.com/service.asmx"/>
</wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

我正在尝试使用`GetListaCategorii`以下代码访问该函数：

```
<?xml version="1.0" encoding="utf-8"?>
<html>
<body>
<?php  $client = new SoapClient("http://exemple.com/service.asmx?WSDL");
$listacateg = $client->GetListaCategorii(array("CodClient" =>  "my_code","Parola" => "Mypass"));
echo "<p>";
echo $listacateg->GetListaCategoriiResult->Nrreg;
echo "</p>";?>
</body>
</html> 
```

样品请求应该是：

```
POST /ZCatalogVB/ZCatalogDistribution.asmx HTTP/1.1
Host: exemple.com
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://tempuri.org/GetListaCategorii"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetListaCategorii xmlns="http://tempuri.org/">
      <CodClient>string</CodClient>
      <Parola>string</Parola>
    </GetListaCategorii>
  </soap:Body>
</soap:Envelope> 
```

响应应该是

```
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length  
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetListaCategoriiResponse xmlns="http://tempuri.org/">
      <GetListaCategoriiResult>
        <Nrreg>int</Nrreg>
        <Categorii>
          <Categorie>
            <Categorie>string</Categorie>
          </Categorie>
          <Categorie>
            <Categorie>string</Categorie>
          </Categorie>
        </Categorii>
      </GetListaCategoriiResult>
    </GetListaCategoriiResponse>
  </soap:Body>
</soap:Envelope> 
```

请帮忙

最新输出

```
<pre><?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://tempuri.org/">
<SOAP-ENV:Body>
<ns1:GetListaCategorii
><ns1:CodClient>mycode</ns1:CodClient>
<ns1:Parola>mypass</ns1:Parola>
</ns1:GetListaCategorii>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:18:51.010

这将为您提供 SOAP 请求的打印结果：在此处发布结果，以便我们为您提供帮助：

```
class mySoap extends SoapClient 
{
    public function __doRequest($request, $location, $action, $version) 
    {
        print_r('<pre>');
        print_r($request);
        die();

        return parent::__doRequest($request, $location, $action, $version);
    } 
}

$client = new mySoap("http://exemple.com/service.asmx?WSDL");
$params = new stdClass;
$params->CodClient = "my_code";
$params->Parola = "Mypass";
$listacateg = $client->GetListaCategorii($params); 
```

也试试这个并张贴肥皂请求信封：

```
class mySoap extends SoapClient 
{
    public function __doRequest($request, $location, $action, $version) 
    {
        print_r('<pre>');
        print_r($request);
        die();

        return parent::__doRequest($request, $location, $action, $version);
    } 
}

$client = new mySoap("http://exemple.com/service.asmx?WSDL");
$params = new stdClass;
$params->CodClient = new SoapVar("CodClient", XSD_STRING, "string", "http://www.w3.org/2001/XMLSchema");
$params->Parola = new SoapVar("Mypass", XSD_STRING, "string", "http://www.w3.org/2001/XMLSchema");
$listacateg = $client->GetListaCategorii($params); 
```

# php - 如何解码 json ajax 响应

> ID：15924744
> 
> 赞同：2
> 
> 时间：2013-04-10T11:36:27.697
> 
> 标签：php, javascript, ajax

我在解码 ajax 响应时遇到问题，在这里我将组织、位置和建筑物作为输入发送，作为回报提供 2 个键作为入口/出口和键，现在我的 ajax 调用工作正常，我可以提醒响应，现在我的要求是解码我得到的json数组，然后将入口/出口的值放入表单中名为入口/出口的表单字段中，然后输入表单中的类型字段。我试图解码中的json php phage 在调用 ajax 时执行并将 2 个值存储到会话中，但是当我给出值 =$_SESSIN[type] 和 $_SESSION[entrance/exit] 之后它没有显示在表单字段中尝试使用控制台使用 javascript 解码 json 脚本，任何人都可以弄清楚 ia 做错了什么。到此为止的代码是

```
 //ajax
 function ajax()
{
var org=document.getElementById('category_id').value;
alert(org);
var loc=document.getElementById('category_id1').value;
alert(loc);
var bui=document.getElementById('category_id2').value;   
alert(bui);
var req;
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
   req=new XMLHttpRequest();
}
else
{// code for IE6, IE5
   req=new ActiveXObject("Microsoft.XMLHTTP");
}
req.open("POST", "ajax.php?&org="+org+"&loc="+loc+"&bui="+bui+"", true);
req.send();
req.onreadystatechange=function(){
   if(req.readyState==4&&req.status==200){
       //$(".error").hide();
       result=req.responseText
       alert(result);
       var strJSON = 'result';
       var objJSON = eval("(function(){return " + strJSON + ";})()");
       alert(objJSON.name);
       alert(objJSON.type);

       }
   }
}
 <form name="theForm" method="post" action="addmachine.php" enctype="multipart/form-data" onSubmit="return validate();">
      <label for="orgname">Organisation Name</label>
                <select style="width: 305px;text-align:left ;"  name="category_id" id="category_id" onchange="OrganisationName(this);">
                <option value="">Select</option>
                 <option value="1">1</option>
                 <option value="2">2</option>
                                  </select>

                <p>
    <label name="location">Location</label>

                 <select style="width: 305px;" name="category_id1" id="category_id1" onchange="LocationName(this);" >
                 <option value="">Select</option>
                 <option value="1">1</option>
                 <option value="2">2</option>

                 </select>
                </p>
                <p>
    <label for="building">Building</label>

                <select style="width: 305px" name="category_id2" id="category_id2" onchange="BuildingName(this);" onchange="ajax(this);">
                <option value="">Select</option>
                <option value="1">1</option>
                <option value="2">2</option>
                </select>
                </p>
                <label for="entr/exi">Entrance/Exit</label>
                <input type="text" name="ent" id="ent" value="objJSON.name" placeholder="enter entrance/exit"/>
                <p>
                <label for="type">Type</label>
                <input type="text" name="type" value="objJSON.type" placeholder="enter your work station"/>

      <label for="name">Name</label>
      <input type="text" id="workstnname" name="workstnname" placeholder="enter your work station" onblur="return name();" onkeypress="return onKeyPressBlockNumbers(event);">
      <label for="description">Description</label>
      <textarea name="description" style="height:150px;width:300px;"></textarea>
      <label for="machinetype">Machine Type</label>
                <select style="width: 305px;text-align:left;"  name="machinetype">
                <option value="">Select</option>
                <option value="kiosk">kiosk</option>
                <option value="workstation">workstation</option>

              </select>
                <p>
                <input type="submit" name="submit" value="Submit">
                </p>

    </form>
  </div> 
```

我没有得到键 entance 或 exit 的值并键入 json iam 得到响应并被警告是

```
[{"name":"Default Entrance + Exit","type":"both"}] 
```

我不知道我是否在代码中犯了一些错误，因为我只是从 javascript 开始的，谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T11:45:18.663

出于安全和工作流程的原因，最好通过**JSON.parse解析 json**

```
var objJSON = JSON.parse(strJSON); 
```

不是通过**评估**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T12:01:33.920

尝试这个，

```
 var objJSON = JSON.parse(result);
  alert(objJSON.name);
  alert(objJSON.type); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:54:43.180

请试试这个

```
 JSONObject obj = new JSONObject(result);

    List<String> list = new ArrayList<String>();
    JSONArray array = obj.getJSONArray("interests");
    for(int i = 0 ; i < array.length() ; i++){
        list.add(array.getJSONObject(i).getString("interestKey"));
    } 
```

使用 [org.json](http://www.json.org/java/)库

# ruby-on-rails - 使用 PDF Prawn 生成的 PDF 中的水平滚动

> ID：15924745
> 
> 赞同：0
> 
> 时间：2013-04-10T11:36:28.840
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pdf-generation, prawn

我用虾生成了一个PDF。问题是当我向表中添加更多列时，pdf 不显示水平滚动条。因此，我无法看到添加到右侧的列。

有没有人遇到过类似的问题或知道解决这个问题的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:12:37.373

PDF 没有滚动条，您需要在创建期间通过指定 page_size 选项来增加页面宽度。

# sql - VB.Net根据下拉文本选择隐藏特定的gridview列

> ID：15924750
> 
> 赞同：0
> 
> 时间：2013-04-10T11:36:33.907
> 
> 标签：sql, vb.net, gridview, drop-down-menu, hide

使用 Visual Studio 和 VB.net，我有一个填充了数据的 gridview，并且基于下拉列表中的文本值，我想隐藏某些列并酌情取消隐藏。

下拉列表通过 sql 填充主题列表（英语、数学科学等）

网格包含的列包括 KS2 英语、KS2 数学和 KS2 平均三列。

从下拉列表中选择英语时，我想隐藏 KS2 Maths 和 KS2 Average 列。

选择数学时，我想隐藏 KS2 英语和 KS2 平均列。

最后，如果选择了任何其他科目，我想隐藏 KS2 英语和 KS2 数学列。

我已经使用基于下拉列表中的主题更新的数据填充了 gridview ok，但我不确定我需要做什么才能开始具体了解基于选择显示的列。

这是一个屏幕截图，应该可以清楚地说明我到目前为止所拥有的内容：

![在此处输入图像描述](https://i.stack.imgur.com/WbTeN.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:22:15.603

试试这个代码：

它用于添加处理程序

```
 Private Sub DataGridView1_EditingControlShowing(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewEditingControlShowingEventArgs) Handles DataGridView1.EditingControlShowing

        If TypeOf e.Control Is ComboBox Then

            AddHandler CType(e.Control, ComboBox).SelectedIndexChanged, AddressOf LastColumnComboSelectionChanged

        End If

    End Sub 
```

它用于可见的假列

```
Private Sub LastColumnComboSelectionChanged(ByVal sender As Object, ByVal e As System.EventArgs)

    DataGridView1.Columns(5).Visible = True
    DataGridView1.Columns(4).Visible = True
    DataGridView1.Columns(3).Visible = True

    If sender.SelectedItem = "Maths" Then
        DataGridView1.Columns(2).Visible = False
        DataGridView1.Columns(4).Visible = False
    ElseIf sender.SelectedItem = "English" Then
        DataGridView1.Columns(3).Visible = False
        DataGridView1.Columns(4).Visible = False
    ElseIf sender.SelectedItem = "others" Then
        DataGridView1.Columns(3).Visible = False
        DataGridView1.Columns(4).Visible = False
        DataGridView1.Columns(2).Visible = False
    End If

    End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:32:08.710

我整理了一下。在页面加载时编写了以下过程：

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    GvStudentDetails.Columns(17).Visible = False
    GvStudentDetails.Columns(18).Visible = False
End Sub 
```

以及我的下拉选择过程中的以下选择案例语句：

```
Protected Sub DdlSubject_SelectedIndexChanged(sender As Object, e As EventArgs) Handles DdlSubject.SelectedIndexChanged
    Select Case strSubject
        Case "English"
            GvStudentDetails.Columns(16).Visible = True
            GvStudentDetails.Columns(17).Visible = False
            GvStudentDetails.Columns(18).Visible = False
        Case "Mathematics"
            GvStudentDetails.Columns(16).Visible = False
            GvStudentDetails.Columns(17).Visible = True
            GvStudentDetails.Columns(18).Visible = False
        Case Else
            GvStudentDetails.Columns(16).Visible = False
            GvStudentDetails.Columns(17).Visible = False
            GvStudentDetails.Columns(18).Visible = True
    End Select
End Sub 
```

# jquery - 使用 jQuery 检查元素是否为“显示：无”或单击时阻塞

> ID：15924751
> 
> 赞同：289
> 
> 时间：2013-04-10T11:36:36.277
> 
> 标签：jquery, css

我想检查和排序隐藏的元素。是否可以找到所有具有属性`display`和值的元素`none`？

* * *

## 回答 #1

> 赞同：636
> 
> 时间：2013-04-10T11:37:23.363

您可以对可见元素使用[:visible并使用](http://api.jquery.com/visible-selector/)[:hidden](http://api.jquery.com/hidden-selector/)找出隐藏元素。此隐藏元素的`display`属性设置为`none`。

```
hiddenElements = $(':hidden');
visibleElements = $(':visible'); 
```

检查特定元素。

```
if($('#yourID:visible').length == 0)
{

} 
```

> 如果元素占用了文档中的空间，则元素被认为是可见的。可见元素的宽度或高度大于零， [参考](http://api.jquery.com/visible-selector/)

您也可以将[is()](http://api.jquery.com/is/)与`:visible`

```
if(!$('#yourID').is(':visible'))
{

} 
```

如果要检查显示值，则可以使用[css()](http://api.jquery.com/css/)

```
if($('#yourID').css('display') == 'none')
{

} 
```

如果您使用显示以下值`display`可以有。

> 显示：无
> 
> 显示：内联
> 
> 显示：块
> 
> 显示：列表项
> 
> 显示：内联块

[在此处](https://developer.mozilla.org/en-US/docs/CSS/display)`display`检查可能值的完整列表。

使用 JavaScript 检查显示属性

```
var isVisible = document.getElementById("yourID").style.display == "block";
var isHidden = document.getElementById("yourID").style.display == "none"; 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2013-04-10T11:39:59.630

```
$("element").filter(function() { return $(this).css("display") == "none" }); 
```

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2013-04-10T11:43:44.313

是的，您可以使用 cssfunction。下面将搜索所有 div，但您可以根据需要修改它

```
$('div').each(function(){

    if ( $(this).css('display') == 'none')
    {
       //do something
    }
}); 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-04-10T11:51:59.410

jQuery 中有两种方法来检查可见性：

```
$("#selector").is(":visible") 
```

和

```
$("#selector").is(":hidden") 
```

您还可以根据选择器中的可见性执行命令；

```
$("#selector:visible").hide() 
```

或者

```
$("#selector:hidden").show() 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2014-03-14T12:12:18.233

使用这个条件：

```
if (jQuery(".profile-page-cont").css('display') == 'block'){
    // Condition 
} 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-04-10T11:38:27.113

```
$('#selector').is(':visible'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-17T16:40:24.387

[现场演示](https://jsfiddle.net/dexterity/hL5unjo2/1/)

```
<div id="div" style="display: none"></div>
<button class="try">Try now</button>

<script type="text/javascript">
$(document).on('click','.try',function() {
var style = $('#div');
if (style.css("display") == "none") {
  alert("display not available");
}
});
</script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-09T08:33:24.733

另一个我个人比.is() 或.length 更喜欢的捷径：

```
if($('.myclass:visible')[0]){
   // is visible
}else {
   // is hidden
} 
```

# c - 在嵌入式 c 编程背景中将变量高效地传递给模块

> ID：15924752
> 
> 赞同：6
> 
> 时间：2013-04-10T11:36:36.473
> 
> 标签：c, performance, embedded, modularity, paradigms

我正在嵌入式目标中编写 C 语言。由于日益增加的复杂性和可测试性问题，模块化是必须的。

乍一看，程序是一个控制循环。使用内部硬件读取物理输入，应用一些计算，并应用计算输出。然而，控制是相当复杂的，并且具有许多内部状态和变化的变量。

该控件分为不同的模块，捆绑了不同状态的功能。常见的任务/计算在单独的模块中提供，并在不同的模块中调用，以保持自己干燥。对于整个项目的枚举和类型一致性，使用了一个顶级 .H 文件（就我而言，因为继承等 OO 策略在我的框架中不是一个选项）。

在决定如何将变量传入和传出模块时，我的问题就出现了。

我最初的做法是：

```
mymodule.H:

struct Inputs{
    int input1;
    ...
    int inputN;
}

struct Outputs{
    int output1;
    ...
    int outputN;
}

void mymodule(Inputs in,Outputs* out); 
```

并且在主函数（或调用此模块的模块）中创建了“输入”和“输出”类型的结构。

然后，将变量复制到 Inputs 结构体，调用函数（引用 Outputs 结构体），一旦完成，该结构体的内容将用于进一步计算。

但是，这会导致占用大量内存，因为每个模块都需要在调用模块中创建 InputType 和 OutputType 的实例。在我看来，这不是一个优雅的解决方案。顺便说一句，我的项目中不允许动态分配。

您能否为我提供一些指导方针和/或替代想法以找到一个好的解决方案？

谢谢你。

**添加**

解决方案之一可能是将 InputStruct 也作为指针传递，但由于它们是模块的有效输入，我如何确保它们不会在代码中被修改？

**添加**

顺便说一句，出现的另一个问题是并非所有模块都接收相同的变量，并且没有可用的继承机制（因为这是 C），每个模块的结构都必须加载正确的值。我很迷茫...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T07:44:20.043

您不必因将参数传入和传出函数而接受大量内存占用。关键是通过引用传递参数，并使用`const`关键字确保输入不被修改。一个众所周知的例子是：

```
int strcpy(char *destination, const char *source); 
```

其中只有指向源和目标字符缓冲区的指针被传入，而不是缓冲区的副本，但`const`关键字阻止 strcpy() 修改源缓冲区的内容。

如果您有太多参数而无法单独传递每个参数，那么请务必将指向结构的指针传递给您的函数，再次使用`const`关键字来保证不修改输入：

```
int myFunc(struct myFuncOut *outputs, const struct myFuncIn *inputs); 
```

`inputs`因为结构体是通过引用传递的，所以 myFunc() 将在调用函数使用的同一块内存上进行操作（但由于关键字，它无法写入指向的内存`const`），因此传递它的内存开销到函数的只是指针的那个，在典型的嵌入式系统上是四个字节，并且没有复制开销。

* * *

至于您的第二个隐含问题，一个函数的输出需要作为输入传递给另一个函数，但参数列表并不相同，除了从一个结构复制到另一个结构之外，您可能无能为力。如果你幸运的话，你也许可以做这样的事情：

```
struct myFunc1Out
{
    int common1;
    int common2;
    int common3;
};
struct myFunc2In
{
    int common1;
    int common2;
    int common3;
    int special1;
    int special2;
}

struct myFunc2In data;

myFunc1((struct myFunc1Out *)(*data), *inputs);
data.special1 = 1;
data.special2 = 2;
myFunc2(*outputs, *data); 
```

你看到这里发生了什么吗？struct myFunc2In 的第一部分与 struct myFunc1Out 相同，因此您可以将前者强制转换为后者，额外的字段将被忽略。您可以将其视为（非常）穷人的多态性。

另一种可能不那么晦涩的方法是将结构 myFunc1Out 以及用于附加参数的第二个结构传递给第二个函数。额外的内存成本是一个指针。也许您可以将数据组织成逻辑组，每个组由一个结构表示，这样就没有太多的结构，但没有结构包含在使用该结构的其余部分时并不总是需要的字段？

* * *

顺便说一句，您的一条评论似乎暗示您希望结构的定义在可执行文件中具有内存开销。这不是真的。仅当分配结构的*实例*时才使用内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:00:42.060

模块.c：

```
#include "module.h"

struct Inputs *getInput() { 
    static struct Inputs inputs;
    return &inputs;
}

struct Outputs *getOutput() { 
    static struct Outputs outputs;
    return &outputs;
}

struct Outputs *mymodule() {
    struct Outputs *o = getOutput();
    struct Inputs  *i = getInput();
    o->output[0] = i->input[0];
    return o;
} 
```

模块.h：

```
#define N 10

struct Inputs {
    int input[N];
};

struct Outputs {
    int output[N];
};

struct Inputs *getInputs();
struct Inputs *getOutputs();
void mymodule(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T13:57:35.420

一种可能性是将变量隐藏在 setter/getter 函数后面，然后使用预处理器来控制模块中这些函数的可见性。

iovars.c:

```
/* iovars.c */

static int s_input1;
static int s_input2;
static int s_output1;
static int s_output2;

int GetIn1(void)  { return s_input1; }
int GetIn2(void)  { return s_input2; }
void SetIn1(int value) { s_input1 = value; }
void SetIn2(int value) { s_input2 = value; }
int GetOut1(void)  { return s_output1; }
int GetOut2(void)  { return s_output2; }
void SetOut1(int value) { s_output1 = value; }
void SetOut2(int value) { s_ouput2 = value; } 
```

iovars.h：

```
/* iovars.h */

#ifdef USING_IN1_READONLY || USING_IN1_READWRITE
int GetIn1(void);
#ifdef USING_IN1_READWRITE
void SetIn1(int value);
#endif
#endif

#ifdef USING_IN2_READONLY || USING_IN2_READWRITE
int GetIn2(void);
#ifdef USING_IN2_READWRITE
void SetIn2(int value);
#endif
#endif

#ifdef USING_OUT1_READONLY || USING_OUT1_READWRITE
int GetOut1(void);
#ifdef USING_OUT1_READWRITE
void SetOut1(int value);
#endif
#endif

#ifdef USING_OUT2_READONLY || USING_OUT2_READWRITE
int GetOut2(void);
#ifdef USING_OUT2_READWRITE
void SetOut2(int value);
#endif
#endif 
```

好的，这有点乏味，但您现在可以在模块中逐个变量地控制可见性和可写性：

```
/* moduleA.c */

#define USING_IN1_READONLY
#define USING_OUT1_READWRITE
#include "iovars.h"

/* code in this module can only see functions to read input 1
   and to read or write output 1 */ 
```

顺便说一句，这个答案建立在对[这个问题](https://stackoverflow.com/questions/6044141/making-c-module-variables-accessible-as-read-only)的回答的基础上，其中还包含一些关于让所有这些函数内联的讨论。

# c# - C#替换锚文本

> ID：15924754
> 
> 赞同：0
> 
> 时间：2013-04-10T11:36:37.677
> 
> 标签：c#, regex, replace, anchor

输入到我们数据库的一些链接是巨大的，我需要控制它，因为它会破坏报告。

我需要以编程方式转换：

```
<a href="http://www.thisismylongurl.com">http://www.thisismylongurl.com</a> 
```

进入

```
<a href="http://www.thisismylongurl.com">Link</a> 
```

我已经研究过 Regex.Replace，但似乎找不到一个现成的可以满足我的需求。

如果不是很明显，“ [http://www.thisismylongurl.com](http://www.thisismylongurl.com) ”每次都会是不同的 URL，所以我需要使用正则表达式而不是固定的字符串替换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:29:50.240

完美运行。虽然没有涉及正则表达式。

```
 protected void Page_Load(object sender, EventArgs e)
    {

        string str1="<a href='http://www.thisismylongurl.com'>http://www.thisismylongurl.com</a>";
        int b1 = str1.IndexOf(">");
        int b2 = str1.LastIndexOf("<");
        str1= str1.Remove(b1+1);
        int b3 = str1.IndexOf(">");
        str1 = str1.Insert(b3+1, "Link");
        Response.Write(str1);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:43:44.647

当替换中的“链接”没有改变时，你可以试试这个

```
(<\s*a\s+href="[^"]+">)[^<]*(?=</a>) 
```

并替换为

```
$1Link 
```

[在 Regexr 上](http://regexr.com?34fho)查看

`\s`匹配空白字符

`[^"]`是一个否定字符类，它匹配除`"`

`(?=</a>)`是一个积极的前瞻插入，它确保`</a>`了匹配之后。

`$1`为您提供第一个捕获组的内容，即第一个左括号后面的子模式匹配的内容。

# android - 使用 adb shell 发送 AT 命令

> ID：15924761
> 
> 赞同：5
> 
> 时间：2013-04-10T11:36:56.603
> 
> 标签：android, modem, at-command

我需要向调制解调器发送 AT 命令。我正在使用已植根的三星 Galaxy S3 I9300 设备。

我做的步骤是：

```
abd shell
su
echo -e "AT\r" 
```

但我不确定如何阅读上述命令给出的响应。我尝试将命令重定向如下： `echo -e "AT\r" > /dev/smd0`，但是当我执行 cat 时，`/dev/smd0`我没有看到任何响应，我只看到“AT”。似乎我打算执行的命令被解释为字符串，我看到的是该字符串而不是该操作的结果。

请指教我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-22T17:28:54.667

我建议你试试我的[atinout](http://atinout.sourceforge.net/)程序，它应该正是你所要求的：一个从命令行发送 AT 命令并捕获输出的程序。

在你的情况下，结果应该是这样的

```
$ abd shell
$ su
$ echo AT | atinout - /dev/smd0 -

OK
$ 
```

并捕获输出只需放置一个文件名而不是最后一个`-`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T15:15:35.130

你在**adb shell中试过了吗**

```
su

echo -e "AT\r" > /dev/smd0 
```

# spring - 当我尝试在 bean 类中使用方面时出现 bean 创建异常

> ID：15924764
> 
> 赞同：3
> 
> 时间：2013-04-10T11:36:57.950
> 
> 标签：spring, spring-aop

当我尝试使用 AOP IN 应用程序时出现以下错误，任何人都可以帮助解决此问题。

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.aop.config.internalAutoProxyCreator': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/aopalliance/intercept/MethodInterceptor
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1011)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:957)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:490)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198)
    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:741)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at TestAop.main(TestAop.java:14)
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org/aopalliance/intercept/MethodInterceptor
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:163)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1004)
    ... 12 more
Caused by: java.lang.NoClassDefFoundError: org/aopalliance/intercept/MethodInterceptor
    at org.springframework.aop.framework.adapter.DefaultAdvisorAdapterRegistry.<init>(DefaultAdvisorAdapterRegistry.java:49)
    at org.springframework.aop.framework.adapter.GlobalAdvisorAdapterRegistry.<clinit>(GlobalAdvisorAdapterRegistry.java:32)
    at org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.<init>(AbstractAutoProxyCreator.java:115)
    at org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.<init>(AbstractAdvisorAutoProxyCreator.java:47)
    at org.springframework.aop.aspectj.autoproxy.AspectJAwareAdvisorAutoProxyCreator.<init>(AspectJAwareAdvisorAutoProxyCreator.java:46)
    at org.springframework.aop.aspectj.annotation.AnnotationAwareAspectJAutoProxyCreator.<init>(AnnotationAwareAspectJAutoProxyCreator.java:48)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:148)
    ... 14 more
Caused by: java.lang.ClassNotFoundException: org.aopalliance.intercept.MethodInterceptor
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 25 more 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T19:58:30.567

它看起来与这个问题非常相似：

[收到消息“org.aopalliance.aop.Advice 类型无法解析。” 在spring java程序中](https://stackoverflow.com/questions/10214875/getting-message-the-type-org-aopalliance-aop-advice-cannot-be-resolved-in-spr)

缺少 AOP 联盟依赖项 JAR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-15T07:36:11.103

我通过添加 jar com.springsource.org.aopalliance-1.0.0 解决了同样的问题

# igraph - 使用 igraph 生成具有固定最小度的无标度网络

> ID：15924767
> 
> 赞同：1
> 
> 时间：2013-04-10T11:37:09.487
> 
> 标签：igraph

我想生成一个具有 100 个节点且最小度数为 10 的无标度网络。

这可以以某种方式完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:22:03.267

您可以使用`degree.sequence.game`任意（图形）度数序列创建图形。因此，只需从您想要的任何分布创建您的学位并调用此函数。

# android - 如何在android中使用drawables在底部选项卡的顶部设置TabStrip

> ID：15924768
> 
> 赞同：0
> 
> 时间：2013-04-10T11:37:09.987
> 
> 标签：android, android-layout, android-widget, android-tabhost, android-tabs

我正在为使用 android 4.0 的平板电脑开发示例应用程序。此应用程序没有标题栏/操作栏，并具有全屏模式。

在这个应用程序中，我使用了 Tabwidgets 并将选项卡设置在底部。一切运行良好。现在我想在标签条上关注：

*   从标签中删除底部标签条
*   在标签顶部添加标签条（向上方向）
*   想在顶部的标签条上设置一个可绘制的（小指示器）
*   想要在此可绘制对象上添加从最后选择的选项卡到当前选项卡的移动效果。

我的 main.xml 是：

```
<TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1" />

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="0"/>
        </LinearLayout>
</TabHost> 
```

我当前的标签看起来像：

![在此处输入图像描述](https://i.stack.imgur.com/QIvL3.png)

但我想让我的标签看起来像：

![在此处输入图像描述](https://i.stack.imgur.com/8cID5.png)

我尝试了很多东西，但没有得到合适的解决方案。请指导我。

# java - 泛型 Java 超级

> ID：15924770
> 
> 赞同：1
> 
> 时间：2013-04-10T11:37:14.290
> 
> 标签：java, generics, super

下面代码中的 listNum.add(num) 有什么问题；（参考- [http://docs.oracle.com/javase/tutorial/java/generics/lowerBounded.html](http://docs.oracle.com/javase/tutorial/java/generics/lowerBounded.html)）

它给出了编译错误 List 类型中的方法 add(capture#1-of ? super Long) 不适用于参数 (Number)

```
public class GenericSuper {

   List<? super Long> listNum = new LinkedList < Number >();
   List<? super ExportException> listExp= new LinkedList<RemoteException>();

   public List<? super ExportException> addList()
   {
      Number num = 10;
      listNum.add(num);
      RemoteException rme = new RemoteException();
      listExp.add(rme);
      return rme;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:48:56.077

`listNum`可能是 的一个实例，`List<Long>`并且您不能将 a 添加`Number`到 的列表中`Long`，因为它会引发类强制转换异常。

解决方案：

1.  做`listNum`一个`List<? super Number>`
2.  做`num`一个`Long`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T03:03:46.130

```
package main.java.com.mysystems.generics;

import java.rmi.RemoteException;
import java.rmi.server.ExportException;
import java.rmi.server.SocketSecurityException;
import java.util.LinkedList;
import java.util.List;

//peCS
//Consumer super- you want to add item i.e of super type to the collection.
public class GenericSuper {

    List<? super Long> listNum = new LinkedList < Number >();// listNum is variable that can be assigned list of type super class to Long.
    //And you can put Long and its subclass. And you can only get Object type since it can hold anything from Long to Object.

    List<? super ExportException> listExp= new LinkedList<RemoteException>(); // listExp is variable that can be assigned any list of type super class to ExportException. 
    // And you can  put ExportException and all subclasses of ExportException to the list. And you can only get Object type since it can hold anything from ExportException to Object.

    public List<? super ExportException> addList()
    {
        LinkedList < Number > numList = new LinkedList < Number >();

        Number num = 10.10;
        numList.add(num);
        listNum = numList;
        //listNum.add(num); //Compilation error as only long or its subclass can be added.
        listNum.add(20L);

        for(Object e:listNum){ // Note you can only get Object type and will have to use instance of to do anything meaningful.
            System.out.println(e);
        }
        SocketSecurityException sse = new SocketSecurityException("Hello");
       listExp.add(sse);
       return listExp;
       }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-22T22:41:49.523

我想让我给你一个直截了当的答案：你不能这样做，因为它不应该得到支持。

如果您创建 List l = new ArrayList

然后，您只能在列表 l 中添加仅长长的元素。在创建时，您将 List 放入 List 。

原始对象是 List 。一个类可以有多级超类。例如，假设 Number 扩展了某个类说 Serializable ，那么这意味着 List 不能拥有一个可序列化的类，它是它的上层类。

因此，为了避免这个问题，它在 java 中是不允许的。

检查泛型的 PECS 主体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-07T08:13:59.180

问题不在于泛型实现，而是一个基本的 Java Collection 框架错误，其中您无法将**Number**类型添加到**Long**类型。泛型只是在编译时解决它。如果泛型不在这个地方，您将遇到运行时异常，即 ClassCastException。

# json - 将 json 响应输入谷歌饼图

> ID：15924771
> 
> 赞同：0
> 
> 时间：2013-04-10T11:37:14.463
> 
> 标签：json, jquery, google-visualization

我通过 ajax 将表单发布到页面（insert.php），然后返回 json 格式的响应。我想使用 json 响应来加载谷歌饼图。如果我手动将 json 响应粘贴到新的 google.visualization.DataTable() 中，则会加载图表，但是当我尝试将数据提供给 drawChart 函数（如下）时，没有任何反应。我没有收到任何错误消息。

我不知道这是否是正确的方法，所以非常感谢任何帮助！

```
$(document).ready(function(){

$("#quiz").submit(function() { return false; });

    $("#send").click(function(){

    $.ajax({
      type: 'POST',
      url: "insert.php",
      data : $("#quiz").serialize(),
      dataType: "json",
   success: function(jsonData){

drawChart(jsonData);

 }
})

 // Load the Visualization API and the piechart package.
google.load('visualization', '1', {'packages':['corechart']});

function drawChart(jsonData) {

  // Create our data table out of JSON data loaded from server.
  var data = new google.visualization.DataTable();

  // Instantiate and draw our chart, passing in some options.
  var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
  chart.draw(data, {width: 400, height: 240});
}

});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:54:42.630

看起来您没有传入 jsonData 参数。

```
var data = new google.visualization.DataTable(); 
```

应该

```
var data = new google.visualization.DataTable(jsonData); 
```

# python - 如果我只知道 python 中的绑定方法，如何获取类的名称？

> ID：15924772
> 
> 赞同：4
> 
> 时间：2013-04-10T11:37:14.737
> 
> 标签：python, oop, classname

在 pyton 代码中，我有一些对象的绑定方法。只知道这个绑定方法我想知道那个对象的类是什么。是否可以？

这是示例代码：

```
>>> class x:
...     def method(self):
...             pass
...
>>> x
<class __main__.x at 0xb737d1ac> 
>>> x_instance = x()
>>> x_instance
<__main__.x instance at 0xb737c7cc>
>>> boundmethod = x_instance.method
>>> boundmethod
<bound method x.method of <__main__.x instance at 0xb737c7cc>>
>>> str(boundmethod)
'<bound method x.method of <__main__.x instance at 0xb737c7cc>>' 
```

假设我只知道`boundmethod`. 如何确定类是`x`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T11:42:07.023

如果你想要它的名字：

```
boundmethod.im_class.__name__ 
```

或者在 python 3 中：

```
boundmethod.__self__.__class__.__name__ 
```

# javascript - 迭代特定元素

> ID：15924773
> 
> 赞同：0
> 
> 时间：2013-04-10T11:37:20.980
> 
> 标签：javascript, jquery

我知道在 jQuery 中你可以遍历特定类型的所有元素：

```
$(function() {
   $('img').each(function() {
   });
}); 
```

如果我想遍历特定 div 中的元素怎么办，我尝试使用`('#div' > a)`选择器，但这似乎不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:40:35.097

尝试

```
$(function() {
      $('#div_id img').each(function() {
           alert($(this).attr('src'));
      });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:42:19.427

> “如果我想遍历特定 div 中的元素怎么办，我尝试使用 ('#div' > a) 选择器，但这似乎不起作用”

它是`$('#div > a')`, 并且这只会针对`a`带有 的元素的直接子元素`id` `div`。

要遍历这些，您可以执行以下操作：

```
$('#div > a').each(function (index) {
    console.log(this); //your a element
    console.log(index); //the loop index
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:42:27.280

从您所展示的内容来看：您的 css 样式选择器确实应该是 $("div > a") （引用 dystroy），前提是 a-tag 是 div-tag 的直接后代（即孩子），否则我宁愿去 $("div a") 它将搜索所有后代。

请注意，我已从此处删除了#div - 我假设您的意思是对 div 标签的引用，而不是 id 为“div”的某些元素。如果 id 实际上是“div”，那么使用#div。

# oop - 在 8.4.19 版本中使用 incr-tcl

> ID：15924777
> 
> 赞同：1
> 
> 时间：2013-04-10T11:37:30.577
> 
> 标签：oop, tcl, backwards-compatibility, incr-tcl

使用 tcl 版本 8.4.19 时是否可以使用 incr-tcl？需要哪些包含包？到目前为止，我们使用的是 Active-Tcl 8.6 版，它内置了 incr-tcl。现在我们需要支持仅安装了 8.4.19 版本的站点，我想知道是否存在技术障碍，或者是否只是安装和引用其他软件包的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:44:34.727

最有可能让 [incr Tcl] 与 Tcl 8.4 系列一起工作。

```
bash$ tclsh8.4
% puts [info patchlevel]
8.4.7
% package require Itcl
3.3
% puts $itcl::patchLevel
3.3b1 
```

您可能更喜欢稍微不同的版本，但这种组合适用于我的系统（OSX Leopard）。

# multithreading - 与多个对象的线程同步

> ID：15924778
> 
> 赞同：0
> 
> 时间：2013-04-10T11:37:33.777
> 
> 标签：multithreading, producer-consumer, thread-synchronization

这个问题困扰我好几天了，求大神帮忙。我正在使用线程同步实现生产者-消费者示例。我在这个传统的节目中做了一些改变。我没有只使用一个队列对象，而是使用了两个队列对象。但是程序不工作..（PS-我知道我可以通过只使用一个队列对象来使这个程序工作，但是如果我想使用两个队列对象怎么办？？）

类队列{

```
static int value;

static boolean valueSet = false;

public static final Object obj;

static {

    obj = new Object();
}

void push() {

    synchronized(Queue.obj) {

        while( Queue.valueSet ) {

            try {
            Thread.sleep(1000);
            }catch(Exception e) {}
        }

        System.out.print("\n\n Push:-  " + (++(Queue.value)));
        Queue.valueSet = true;

        return;

    }

}

void pop() {

    synchronized(Queue.obj) {

        while(!(Queue.valueSet)) {

            try {
            Thread.sleep(1000);
            }catch(Exception e) {}
        }

        System.out.print("\n\n Pop:-   " + Queue.value);

        Queue.valueSet = false;

        return;

    }

} 
```

}

类生产者实现 Runnable {

```
Queue Q;
Thread P;

Producer(Queue Q) {

    this.Q = Q;
    P = new Thread(this);
    P.start();

}

public void run() {

    while(true) {

        Q.push();

    }
} 
```

}

类消费者实现可运行{

```
Queue Q;
Thread C;

Consumer(Queue Q) {

    this.Q = Q;
    C = new Thread(this);
    C.start();

}

public void run() {

    while(true) {

        Q.pop();

    }
} 
```

}

公共类TestQueue {

```
public static void main(String[] args) {

    Queue Q1 = new Queue();
    Queue Q2 = new Queue();

    Object obj = new Object();

    Producer p = new Producer(Q1);
    Consumer c = new Consumer(Q2);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:21:56.517

我得到了答案。我的误解是等待、通知和通知所有方法都是线程类的。所以我在线程对象上调用它们。

解决方案是仅在线程以外的共享静态对象上调用等待和通知方法。

回答：-

类队列{

```
static int value;

static boolean valueSet = false;

public static final Object obj;

static {

    obj = new Object();
}

void push() {

    synchronized(Queue.obj) {

        while( Queue.valueSet ) {

            try {
            Queue.obj.wait();
            Thread.sleep(1000);
            }catch(Exception e) {

                e.printStackTrace();
            }
        }

        System.out.print("\n\n Push:-  " + (++(Queue.value)));
        Queue.valueSet = true;
        Queue.obj.notify();
    }

}

void pop() {

    synchronized(Queue.obj) {

        while(!(Queue.valueSet)) {

            try {
            Queue.obj.wait();
                Thread.sleep(1000);
            }catch(Exception e) {

                e.printStackTrace();
            }
        }

        System.out.print("\n\n Pop:-   " + Queue.value);

        Queue.valueSet = false;
        Queue.obj.notify();
    }

} 
```

}

类生产者实现 Runnable {

```
Queue Q;
Thread P;

Producer(Queue Q) {

    this.Q = Q;
    P = new Thread(this);
    P.start();

}

public void run() {

    while(true) {

        Q.push();

    }
} 
```

}

类消费者实现可运行{

```
Queue Q;
Thread C;

Consumer(Queue Q) {

    this.Q = Q;
    C = new Thread(this);
    C.start();

}

public void run() {

    while(true) {

        Q.pop();

    }
} 
```

}

公共类TestQueue {

```
public static void main(String[] args) {

    Queue Q1 = new Queue();
    Queue Q2 = new Queue();

    Producer p = new Producer(Q1);
    Consumer c = new Consumer(Q2);
} 
```

}

# django - Django 部署，无法导入设置

> ID：15924789
> 
> 赞同：0
> 
> 时间：2013-04-10T11:38:05.927
> 
> 标签：django, deployment, config

我正在尝试使用 django 部署应用程序。

我已将 django_project 目录放在 /home/XXX/websites/YYY 中。Web 服务器根目录位于 /srv/http/YYY 中，它只包含一个名为 static 的目录和一个 apache.wsgi 文件。

apache.wsgi 的内容如下：

```
import os, sys

sys.path.append('/home/XXX/websites/YYY')

os.environ['DJANGO_SETTINGS_MODULE'] = 'YYY.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

每当我重新加载 apache 模块并尝试加载页面时，都会出现导入错误： ImportError: No module named YYY.settings

我不明白。由于 settings.py 文件位于 /home/XXX/websites/YYY/YYY/settings.py 中，为什么这不起作用？

我已经设法通过将 django 项目放在 web 服务器根目录中来完成这项工作，但这不是我想要放置它的地方。

谢谢你的帮助。

# android - 如何在 Android 中设置 NFC 扫描周期时间

> ID：15924794
> 
> 赞同：2
> 
> 时间：2013-04-10T11:38:30.793
> 
> 标签：android

是否可以设置（或更改）NFC 扫描周期时间？我们做了一些实验来检测不同的内置 NFC 的智能手机，发现扫描周期时间有多种，这似乎取决于手机制造商。有些手机每 300~400 分秒扫描一次 NFC 标签，有些时间跨度为 700~800 分秒。

我想知道Android是否提供了扫描时间设置的功能？或者任何方法都可以做类似的功能？谢了。

# sql - 我如何选择一个字段并自行检查？

> ID：15924795
> 
> 赞同：0
> 
> 时间：2013-04-10T11:38:31.140
> 
> 标签：sql, sql-server

我想说

```
select col1,col2,col3 
from table1 
   inner join table2 on table1.col1=table2.col1 
                        and ..... ( ?  ) 
```

? ：我只想要 1 条记录或来自 table1 的第一条记录与来自 table2 的第一条记录连接。但是该命令会导致所有可以加入的记录加入。例如**，如果 table1 中有 2 条记录**col1 *=1432*并且table2中**只有 1 条记录***存在 col1=1432*命令全部加入。但我想先从 table1 加入，然后从 table2 加入

我想显示所有要加入的多于 1 条记录的记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:05:43.030

如果您使用的是 SQL Server 2005 或更高版本，您可以尝试使用[排名功能](http://msdn.microsoft.com/en-us/library/ms189798.aspx)来仅获取每组的第一条记录：

```
select *
from (
        select a.col1
            , a.col2
            , a.col3
            -- Use the order by to determine which rows will be ranked first for each group
            , row_number() over (partition by a.col1 order by a.col2) as rownum
        from table1 as a
            join table2 as b on a.col1 = b.col1
    ) as q
where rownum = 1 -- Only get the first row of each group 
```

> 我想显示所有要加入的多于 1 条记录的记录。

您可以将其添加到您的 where 子句中：

```
 and exists (
        select col1
        from table1
        where col1 = q.col1
        group by col1
        having count(*) > 1         
    ) 
```

为了提供另一种不使用排名功能的解决方案，我认为我们需要更多地了解您的表，尤其是唯一键以及您如何定义每个组的第一条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:43:31.047

> 我只想要来自 table1 的 1 条记录或第一条记录与来自 table2 的第一条记录连接

干得好：

```
select top 1 col1,col2,col3 
from table1 
   inner join table2 on table1.col1=table2.col1 
                        and ..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:00:37.983

试试这个查询 -

```
SELECT *
FROM dbo.table1 t1 
JOIN (
SELECT TOP 1 *
FROM dbo.table2 
) t2 ON t1.col1 = t2.col1 
```

# c++ - 为什么 InputIterators 只能通过一次？

> ID：15924799
> 
> 赞同：1
> 
> 时间：2013-04-10T11:38:43.923
> 
> 标签：c++, iterator, language-design

从

### 24.2.3 输入迭代器[input.iterators]

> 3) [...] 输入迭代器上的算法永远不应该尝试通过同一个迭代器两次。它们应该是单通道算法。[...]

这个 IMO 限制了一些相当直接的优化（例如通过容器一次以查看它有多少元素） - 唉，动机超出了问题的范围。

为什么有这个要求？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T11:57:11.287

输入迭代器用于迭代没有实质性实现的范围（id est 它们的元素实际上并不存在于内存中的某处），例如来自网络流的字节，或来自 /dev/random 的随机数序列。考虑最后一个示例：一旦您使用了第一个随机数，就无法再次检索它。

另一方面，前向迭代器提供对范围的访问，这些范围要么具有实质性实现（id est 其所有元素实际上都存在于内存中的某处），要么可以轻松重新计算†。就其本质而言，容器通常提供前向迭代器：容器本身就是范围的具体化。

使用输入迭代器定义的范围有时可以通过简单地实现它来转换为使用前向迭代器定义的范围：只需使用单次传递将整个范围复制到一个容器中，然后在该容器上进行尽可能多的迭代。显然，这并不是在所有情况下都是可取的，有时甚至是不可能的：某些范围，例如 /dev/random 中的字节，是无限的，永远无法完全实现。

如果一个算法可以一次编写完成，那么没有理由禁止它与输入迭代器一起使用。然而，当给定前向或更好的迭代器时，没有什么可以禁止这种算法使用执行多次传递的优化版本。

* * *

† 例如，所有偶数的范围不需要具体化容器中的所有数字，但是可以轻松地从给定的迭代器重新开始，因为重新计算数字是可能且便宜的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T11:40:56.813

选择的名称已经暗示了原因：将迭代器视为对*输入流*（如键盘输入或网络流）的迭代。没有办法对流进行两次迭代，因此存在限制。

在需要优化并且我们不介意提高迭代器要求的情况下，[前向迭代器](http://www.cplusplus.com/reference/iterator/ForwardIterator/)或更强大的东西是自然的选择。

相关问题：[输入迭代器和只读前向迭代器有什么区别？](https://stackoverflow.com/q/8869104/50079)

# visual-studio-2010 - 使用 Visual Studio 2010 过滤 Access 2010 数据库

> ID：15924800
> 
> 赞同：0
> 
> 时间：2013-04-10T11:38:53.503
> 
> 标签：visual-studio-2010, ms-access-2010

我已经创建了以下代码，并希望按房东 ID 过滤我的数据库表。没有显示任何错误，当我调试时一切似乎都很顺利（所有的地主 ID 都提供了所有信息，例如有多少属性）。

但是，当我双击选择某个 ID 时，什么也没有发生。如果我像这样添加到部分代码中：

```
SQLString = "SELECT = FROM Flats WHERE landlord_ID = 1" '& landlord_ID & "" 
```

然后数字 1 出现了，但所有其他的也出现了（其余的应该被过滤掉）。另外，我使用这个 YouTube 链接来帮助我：[http ://www.youtube.com/watch?v=4H2g8H0bqEg](http://www.youtube.com/watch?v=4H2g8H0bqEg)

最后，这是我第一次使用 Visual Studio（2010 Ultimate 和 Access 数据库是在 Access 2010 上制作的），所以我不太了解，所以希望得到更具体的答案。

感谢您阅读所有这些，我希望您能帮助我

```
Imports System.Data.OleDb
Public Class Form1

   Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
       OleDbDataAdapter2.Fill(DataSet11)
   End Sub

   Private Sub lstLID_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles lstLID.SelectedIndexChanged
        Dim landlord_ID, SQLString As String
        Dim dtFlats As New DataTable()
        Dim dbDataAdapter As OleDbDataAdapter
        Dim ConnectString As String = "Provider= Microsoft.ACE.OLEDB.12.0;" & "Data Source = Database.accdb"
        landlord_ID = lstLID.Text
        SQLString = "SELECT = FROM Flats WHERE landlord_ID = " '& landlord_ID & ""
        dbDataAdapter = New OleDbDataAdapter(SQLString, ConnectString)
        dbDataAdapter.Fill(dtFlats)
        grdFlats.DataSource = dtFlats
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:37:14.970

我看到两个问题

```
SQLString = "SELECT = FROM Flats WHERE landlord_ID = " '& landlord_ID & "" 
```

1.  `SELECT = FROM`应该是`SELECT * FROM`

2.  `WHERE landlord_ID = " '& landlord_ID & ""`如果撇号`'`是 VB.NET 中的注释字符，那么它后面的所有内容都将被忽略。

# jsf-2 - 支持 bean 方法从输入中获取 null

> ID：15924805
> 
> 赞同：2
> 
> 时间：2013-04-10T11:39:09.337
> 
> 标签：jsf-2, primefaces

这个项目是用 Primefaces 3.5、JSF 2.0、Oracle 数据库制作的。

风景：

```
<h:form id="schedule" class="schedule">

// more JSF and forms and dialogs

<p:dialog widgetVar="patientDialog" dynamic="true" header="Find Patient" showEffect="clip" hideEffect="explode" modal="true" >
            <h:form id="frmPatient">
                <h:panelGrid id="findPatient" columns="1">
                    <h:panelGrid id="findPatientParameters" columns="2">
                        <h:outputLabel value="Firstname: " /> 
                        <p:inputText id="name" label="name" size="15" value="#{waitinglistBean.name}" />
                        <h:outputLabel value="Patient Code: " /> 
                        <p:inputText id="pcode" label="pcode" size="15" value="#{waitinglistBean.pcode}" />
                        <br />
                        <p:commandButton value="Search" process="name" actionListener="#{waitinglistBean.patients}" update="patients"/>
                    </h:panelGrid>
                    <h:panelGrid id="findPatientDetails" columns="1">
                        <p:dataTable id="patients" var="patient" resizableColumns="true" scrollable="true" scrollWidth="1250" 
                                     scrollHeight="150" value="#{waitinglistBean.patients}" 
                                     rowKey="#{patient.PCode}" selection="#{waitinglistBean.selectedPatient}" 
                                     selectionMode="single" >
                            <f:facet name="header">  
                                Click "Select" button after selecting a row to select patient.
                            </f:facet>  
                            <p:column width="150" headerText="Code">  
                                #{patient.PCode}  
                            </p:column>  
                            <p:column width="150" headerText="Family Name">  
                                #{patient.PLname}  
                            </p:column>  
                            <p:column width="150" headerText="First Name">  
                                #{patient.PFname}  
                            </p:column> 
                            <p:column headerText="Sex" >  
                                #{patient.PSex}  
                            </p:column>  
                            <p:column headerText="Birthdate">  
                                #{patient.PBorn}  
                            </p:column> 
                            <p:column headerText="Street">  
                                #{patient.PStreet}  
                            </p:column>
                            <f:facet name="footer">  
                                <p:commandButton id="viewButton" value="Select" icon="ui-icon-search"  
                                        oncomplete="patientDialog.hide()" 
                                        update=":frmDialogs:frmWaiting:tabView:patientDetails" 
                                        process="patients"/>  
                            </f:facet>
                        </p:dataTable>
                    </h:panelGrid>
                </h:panelGrid>
            </h:form>
        </p:dialog>
    <p:dialog widgetVar="patientDialog" dynamic="true" header="Find Patient" showEffect="clip" hideEffect="explode" modal="true" >
            <h:form id="frmPatient">
                <h:panelGrid id="findPatient" columns="1">
                    <h:panelGrid id="findPatientParameters" columns="2">
                        <h:outputLabel value="Firstname: " /> 
                        <p:inputText id="name" label="name" size="15" value="#{waitinglistBean.name}" />
                        <h:outputLabel value="Patient Code: " /> 
                        <p:inputText id="pcode" label="pcode" size="15" value="#{waitinglistBean.pcode}" />
                        <br />
                        <p:commandButton value="Search" process="name" actionListener="#{waitinglistBean.patients}" update="patients"/>
                    </h:panelGrid>
                    <h:panelGrid id="findPatientDetails" columns="1">
                        <p:dataTable id="patients" var="patient" resizableColumns="true" scrollable="true" scrollWidth="1250" 
                                     scrollHeight="150" value="#{waitinglistBean.patients}" 
                                     rowKey="#{patient.PCode}" selection="#{waitinglistBean.selectedPatient}" 
                                     selectionMode="single" >
                            <f:facet name="header">  
                                Click "Select" button after selecting a row to select patient.
                            </f:facet>  
                            <p:column width="150" headerText="Code">  
                                #{patient.PCode}  
                            </p:column>  
                            <p:column width="150" headerText="Family Name">  
                                #{patient.PLname}  
                            </p:column>  
                            <p:column width="150" headerText="First Name">  
                                #{patient.PFname}  
                            </p:column> 
                            <p:column headerText="Sex" >  
                                #{patient.PSex}  
                            </p:column>  
                            <p:column headerText="Birthdate">  
                                #{patient.PBorn}  
                            </p:column> 
                            <p:column headerText="Street">  
                                #{patient.PStreet}  
                            </p:column>
                            <f:facet name="footer">  
                                <p:commandButton id="viewButton" value="Select" icon="ui-icon-search"  
                                        oncomplete="patientDialog.hide()" 
                                        update=":frmDialogs:frmWaiting:tabView:patientDetails" 
                                        process="patients"/>  
                            </f:facet>
                        </p:dataTable>
                    </h:panelGrid>
                </h:panelGrid>
            </h:form>
        </p:dialog>
    // more JSF and dialogshizzle
 </h:form> 
```

支持bean：

```
@ManagedBean(name="waitinglistBean")
@ViewScoped
public class WaitinglistBean implements Serializable
{
private Patients patient;
private OrWaitinglist orWaitinglist;
private List<Patients> patients = new ArrayList<Patients>();
private String name;
private Integer pcode;

public WaitinglistBean() {

}

public void setSelectedPatient(Patients patient) {
    this.patient = patient;
}
public Patients getSelectedPatient() {
    return patient;
}
public OrWaitinglist getOrWaitinglist() {
    return orWaitinglist;
}
public void setOrWaitinglist(OrWaitinglist orWaitinglist) {
    this.orWaitinglist = orWaitinglist;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public Integer getPcode() {
    return pcode;
}
public void setPcode(Integer pcode) {
    this.pcode = pcode;
}

public List<Patients> getPatients() {
    PatientsDao patientsDao = new PatientsDaoImpl();
    patients = patientsDao.getSearchPatient(name, pcode);
    System.out.println(name + " " + pcode);
    return patients;
}

public void createOrWaitinglist()
{
    orWaitinglist.setPatients(patient);
} 
```

因此，首先用户输入一个字符串：“Firstname”和一个整数：“Patient Code”。当他点击“搜索”按钮时，它会触发该命令按钮内的 actionListener="#{patientBean.patients}。该方法需要 2 个参数，名称和 pcode，它们有自己的 setter/getter。

当我在控制台中查看时，它显示了这两个参数的打印输出，它们是两次“null”，这意味着来自 JSF 页面的参数没有传递给支持 bean，尽管 inputText 的值已设置为backingbean 设置方法：value="#{patientBean.name}"

我现在的问题是为什么我会得到这些空值。我已经阅读了几篇使用这些设置器的帖子，但我仍然得到空值。

编辑后我仍然有同样的问题；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:18:53.500

对于将输入组件的值发送`h:panelgrid`到 backingbean，请使用以下内容：

```
<p:commandButton value="Search" process="@(frmPatient:findPatientParameters :input)" 
           actionListener="#{patientBean.patients}" update="patients"/> 
```

# android - Android - 有没有办法以像素为单位获得静态屏幕分辨率？

> ID：15924811
> 
> 赞同：2
> 
> 时间：2013-04-10T11:39:44.917
> 
> 标签：android, screen-resolution

我试过：

```
Resources.getSystem().getDisplayMetrics().widthPixels 
```

和：

```
Resources.getSystem().getDisplayMetrics().heightPixels 
```

但是当我的应用程序长时间处于待机状态时，唤醒上面的两行返回 0。

编辑：我想将这些值放入静态和最终字段中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-01T14:07:46.210

您可以使用静态初始化程序。您可以通过在类主体中嵌入一个块来做到这一点：

```
class MyClass {
   public static final int width;
   public static final int height;

   static {
       DisplayMetrics dm = Resources.getSystem().getDisplayMetrics();
       width = dm.widthPixels;
       height = dm.heightPixels;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T18:39:01.510

这是我用来获取屏幕尺寸的方法，如果需要，您可以将 display、screenWidth 和 screenHeight 变量作为类变量（在任何方法之外，即 onCreate）。然后您可以将 if 语句放入 onCreate 或其他方法来初始化变量。

```
 Display display = getWindowManager().getDefaultDisplay();
    int screenWidth, screenHeight;

    if (android.os.Build.VERSION.SDK_INT >= 13)
    {
        Point size = new Point();
        display.getSize(size);
        screenWidth = size.x;
        screenHeight = size.y;
    }
    else
    {
        screenWidth = display.getWidth();
        screenHeight = display.getHeight();
    } 
```

# c# - 2.5d 地图与玩家碰撞

> ID：15924816
> 
> 赞同：-1
> 
> 时间：2013-04-10T11:40:06.580
> 
> 标签：c#, xna, collision-detection

我正计划制作一个 2d 自上而下的 rpg，所以我决定在开始之前先玩一些东西。例如，我从 Mother 3中获取了[这张地图](http://www.spriters-resource.com/gameboy_advance/mother3/sheet/6220)

。 我最初计划有一个 Rectangles 数组，每次调用 Update() 以检查 sprite 是否与它们发生碰撞时都会检查它，但有些形状也是如此复杂。还有另一种我应该进行碰撞检测的方法吗？因为这种方式在大规模上似乎不可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:53:10.160

您可以根据对象使用不同类型的边界形状。只需让它们都实现一个通用接口：

```
public interface IBoundingShape
{
    // Replace 'Rectangle' with your character bounding shape
    bool Intersects(Rectangle rect);
} 
```

然后你可以有一个`Circle`, `Rectangle`, `Polygon`all 实现`IBoundingShape`。对于更复杂的对象，您可以引入复合边界形状：

```
public class CompoundBoundingShape : IBoundingShape
{
    public CompoundBoundingShape()
    {
        Shapes = new List<IBoundingShape>();
    }

    public List<IBoundingShape> Shapes { get; private set; }

    public bool Interesects(Rectangle rect)
    {
        foreach (var shape in Shapes)
        {
            if (shape.Intersects(rect))
                return true;
        }

        return false;
    }
} 
```

此外，您可以将`CompoundBoundingShape`用作边界层次结构来提前丢弃对象。

在游戏中，您只需遍历所有游戏对象并检查玩家边界形状是否与风景相交。

# xcode - 在uitableview自定义单元格中更改第一响应者？

> ID：15924817
> 
> 赞同：1
> 
> 时间：2013-04-10T11:40:07.210
> 
> 标签：xcode, uitableview, uitextfield, custom-cell, first-responder

我有一个表格视图，它使用自定义单元格作为单元格。每个单元格有四个文本字段。当我在第一个文本字段中工作并单击键盘中的下一步时，我想让同一单元格中的下一个文本字段成为第一响应者。有人可以帮忙吗？

# android - 使用新的 Google Maps API 解码折线

> ID：15924834
> 
> 赞同：26
> 
> 时间：2013-04-10T11:41:02.790
> 
> 标签：android, google-maps, polyline

我正在地图中的两点之间绘制路线。我以这种方式获得积分：

```
StringBuilder urlString = new StringBuilder();
    urlString.append("http://maps.googleapis.com/maps/api/directions/json");
    urlString.append("?origin=");// from
    urlString.append(Double.toString(src.latitude));
    urlString.append(",");
    urlString.append(Double.toString(src.longitude));
    urlString.append("&destination=");// to
    urlString.append(Double.toString(dest.latitude));
    urlString.append(",");
    urlString.append(Double.toString(dest.longitude));
    urlString.append("&sensor=false&mode=");
    if (tipo != null) {
        urlString.append(tipo);
    }
return urlString.toString; 
```

我收到来自 Google 的响应，并得到 JSON：

```
resp = new JSONObject(builder.toString());
                Log.i("Location", "Contenido del kml: "+resp);
                JSONArray routeObject = resp.getJSONArray("routes");
                JSONObject routes = routeObject.getJSONObject(0);
                JSONObject overviewPolylines = routes
                        .getJSONObject("overview_polyline");
                String encodedString = overviewPolylines.getString("points");
                ArrayList<LatLng> puntos=decodePoly(encodedString); 
```

我从谷歌得到的回复：（JSON 格式）：

```
Response: {"status":"OK","routes":[{"waypoint_order":[],"summary":"R-3 and A-3","bounds":{"southwest":{"lng":-3.676540000000001,"lat":40.00040000000001},"northeast":{"lng":-2.99933,"lat":40.43357}},"legs":[{"duration":{"value":3267,"text":"54 mins"},"distance":{"value":85039,"text":"85.0 km"},"end_location":{"lng":-2.99933,"lat":40.00040000000001},"start_address":"Calle del General Díaz Porlier, 91, 28006 Madrid, Spain","end_address":"Camino Veinticuatro, 2, 16400 Tarancón, Cuenca, Spain","start_location":{"lng":-3.676540000000001,"lat":40.43331000000001},"via_waypoint":[],"steps":[{"html_instructions":"Head <b>north<\/b> on <b>Calle del Gral Díaz Porlier<\/b> toward <b>Calle de Maldonado<\/b>","duration":{"value":6,"text":"1 min"},"distance":{"value":29,"text":"29 m"},"end_location":{"lng":-3.676520000000001,"lat":40.43357},"polyline":{"points":"ecxuFjamUs@C"},"travel_mode":"DRIVING","start_location":{"lng":-3.676540000000001,"lat":40.43331000000001}},{"html_instructions":"Take the 1st <b>right<\/b> onto <b>Calle de Maldonado<\/b>","duration":{"value":62,"text":"1 min"},"distance":{"value":266,"text":"0.3 km"},"end_location":{"lng":-3.6734,"lat":40.43345},"polyline":{"points":"ydxuFfamUPkG@a@JuGGk@"},"travel_mode":"DRIVING","start_location":{"lng":-3.676520000000001,"lat":40.43357}},{"html_instructions":"Take the 2nd <b>right<\/b> onto <b>Calle de Fco. Silvela<\/b>","duration":{"value":57,"text":"1 min"},"distance":{"value":245,"text":"0.2 km"},"end_location":{"lng":-3.671830000000001,"lat":40.4316},"polyline":{"points":"adxuFvmlURQl@e@zAoATSTMf@]pBeBLK"},"travel_mode":"DRIVING","start_location":{"lng":-3.6734,"lat":40.43345}},{"html_instructions":"Slight <b>right<\/b> onto <b>Calle de Francisco Silvela<\/b>","duration":{"value":51,"text":"1 min"},"distance":{"value":437,"text":"0.4 km"},"end_location":{"lng":-3.66913,"lat":40.42827},"polyline":{"points":"oxwuF|clUJADAFCbBkAjAeA`BoA^[XUPMLMFEnAeALIdBuAZUPMXS"},"travel_mode":"DRIVING","start_location":{"lng":-3.671830000000001,"lat":40.4316}},{"html_instructions":"Turn <b>right<\/b> onto <b>Pl. de Manuel Becerra<\/b>","duration":{"value":32,"text":"1 min"},"distance":{"value":154,"text":"0.2 km"},"end_location":{"lng":-3.668380000000001,"lat":40.42827},"polyline":{"points":"ucwuF`skU@?@@@@@?@@@?FBD?F@FAFAFADEDCFGDGDIBI@I@K@KAI?IAGAGAGCGCC?ACEEEIGGEICI?I?G@IBGD"},"travel_mode":"DRIVING","start_location":{"lng":-3.66913,"lat":40.42827}},{"html_instructions":"Turn <b>right<\/b> onto <b>Calle Alcala<\/b>","duration":{"value":61,"text":"1 min"},"distance":{"value":709,"text":"0.7 km"},"end_location":{"lng":-3.66107,"lat":40.43126000000001},"polyline":{"points":"ucwuFjnkUo@}A_AcCiEeLKYq@mBYq@[o@u@kB?KAQ]aAI[EQQu@Gc@QwAM_BEa@AU"},"travel_mode":"DRIVING","start_location":{"lng":-3.668380000000001,"lat":40.42827}},{"html_instructions":"Turn <b>right<\/b> onto the ramp to <b>M-30\/A-3\/A-4<\/b>","duration":{"value":44,"text":"1 min"},"distance":{"value":453,"text":"0.5 km"},"end_location":{"lng":-3.660580000000001,"lat":40.42720000000001},"polyline":{"points":"kvwuFt`jU\\CjIg@nBKD?rCOvDY"},"travel_mode":"DRIVING","start_location":{"lng":-3.66107,"lat":40.43126000000001}},{"html_instructions":"Continue straight","duration":{"value":45,"text":"1 min"},"distance":{"value":1009,"text":"1.0 km"},"end_location":{"lng":-3.659120000000001,"lat":40.41822000000001},"polyline":{"points":"_}vuFr}iUzKgBvCe@t@KvGm@hDUbAMPCZElAM|D_@^En@EjBEd@Df@DnAD"},"travel_mode":"DRIVING","start_location":{"lng":-3.660580000000001,"lat":40.42720000000001}},{"html_instructions":"Take exit <b>7B<\/b> to merge onto <b>M-23<\/b> toward <b>Vicálvaro\/R-3\/Valencia<\/b>","duration":{"value":117,"text":"2 mins"},"distance":{"value":2552,"text":"2.6 km"},"end_location":{"lng":-3.63392,"lat":40.41499},"polyline":{"points":"{duuFntiUFHB@^PDBFFFDDFDFBDDFBH@BBJ@F@H?F@H?FAH?FAF?FADAFAFCDADADEFCFEDEDEDEBEBEBGBE@G@E@G?G?EAG?GCGAGCEEGEEEEEEGEICIEIAKCKAK?K?MDgA?G?E?KJq@BODY@CBODW?C@I@AFe@F_@V{An@gED[@C?EHe@Ho@@G?A^{BjA}HF[tAiGzBwIdAcEVgApAuFr@sEF]Ju@DW?EDUHa@f@qEFo@f@iGXmHDgFCgGG{DM 
```

最后，我以这种方式解码接收到的字符串，我在 Stack Overflow 的很多答案中都找到了它：

```
private ArrayList<LatLng> decodePoly(String encoded) {

    Log.i("Location", "String received: "+encoded);
    ArrayList<LatLng> poly = new ArrayList<LatLng>();
    int index = 0, len = encoded.length();
    int lat = 0, lng = 0;

    while (index < len) {
        int b, shift = 0, result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lat += dlat;

        shift = 0;
        result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lng += dlng;

        LatLng p = new LatLng((int) (((double) lat /1E5)* 1E6), (int) (((double) lng/1E5   * 1E6)));
        poly.add(p);
    }

   for(int i=0;i<poly.size();i++){
       Log.i("Location", "Point sent: Latitude: "+poly.get(i).latitude+" Longitude: "+poly.get(i).longitude);
   }
    return poly;
} 
```

这是我认为错误的地方，因为我设置了一个 for 来查看正在解码的点，答案类似于：

```
04-10 13:33:54.578: I/Location(25065): Point sent: Latitude: 90.0 Longitude: -110.0
04-10 13:33:54.578: I/Location(25065): Point sent: Latitude: 90.0 Longitude: -120.0
04-10 13:33:54.578: I/Location(25065): Point sent: Latitude: 90.0 Longitude: 100.0
04-10 13:33:54.578: I/Location(25065): Point sent: Latitude: 90.0 Longitude: 120.0
04-10 13:33:54.578: I/Location(25065): Point sent: Latitude: 90.0 Longitude: 40.0 
```

显然，这些点被错误地解析了。结果是，任何地方都没有画线。

我的问题是......有人知道如何解析谷歌的答案，并将其翻译成 LatLng 对象（不是 GeoPoints 对象）吗？

编辑：

这是即将被解码的字符串：

```
04-10 13:50:51.608: I/Location(25065): String to decode: gcxuFjamUq@CPkGLwHJ}@hCuBdEeDf@SrJuHnG{Ed@Fr@q@AmAm@k@e@DaIaSiEuLqAwJ~Mw@~ZwDtZuC`FKbCVjA`ANdAs@nBw@Py@]c@oAT}DhC{PlBcM~GaY|DyS`BmPRy]yBu\UsNvAqObAuEnC}KpAqIh@gK[}NcByWXoRt@}GlDeWvFcq@nFi`@~G}\|@aDdDoLn`@}gAfe@upA`JyV|CiN~@uId@{ZyBwVkBmOwB{^AsNt@iWb@qYcCyS_DkPmAaK{@gRN{RbCkWrFgUbHmPxLsP|JwIpPwN|G}JfE}I|C_KlCsNvAwSFaQj@i]jCmXbHg\pIgSpGaLnN}P`JsHfVaNbQkHtZyIrOsCnTaCx\aA`i@b@nSRz]K`J{AxJiDfNkJjU{WbKkJpGeEpVkPpEiEzMcQjQw]nJyM~IoJ`IoKnH{NrOaWtIeJdNgNrLcPjKqOhIuI~MeJxKgErR{Cn]EjQkBjHqBfJeE|\yTlI_JvEqJxHsS|Xuc@~IeR|EiRr@kEz@sNOoL_B}Lk@mCsFgKkCoGwAsG]}N`CuO`D}GjHoHtFwC|HgBhFg@fJ}BtHaF~D_FjLqSfGqE|FcBnGEnEv@xK`BzNeAxQfAlJ{@jIwEjE}FvBuF|B{NtCsNrBgEdHiIdGuIxDoFpGkFhDaBrHyBbF[pHPlDg@jEuBnCkCtFgKjEqEfIcGpC{D|GoNdAcExAkSjBgDrCsBpDa@vHLfSAfBk@nE_F|Im`@tO_ZxCyEzJmKtHyElG_ClZeF|j@sIlQaD|EuChGkHnK{MdIsMfPwa@bDeJpD_RpFsz@nA}IrCqIrYoa@|BeGlEiYpD}HbKoRfCyKdBwUjEmo@zBkKzDyJvCeQdB}LJqGmAqQJ_Gx@uFtHkO`ImMfMmXtFySpCkXRuN]aYVoT~@}LxB{NvD{OjJaYbFsLnCcEtLoMfJyXzIiXbIiL~D_EzQcMjDeF|AcFhA_M`BkXpC_KjCsDnDeClQcHvEgElFqJfF_Jp\mWzd@k]`WkWlVy`@nOcTz`@_s@rP_ZbNkQ~Tu^jJaUhCuIpHgUrPi\zd@uq@~McQh\e]vTaU~KcF~KoGhG{KzF{HzGmDbDwBfDiEzB}GbEmTrBsHpCuFxe@oq@xb@el@tDgC`ZeJnXkHrKmB~EeB~C{A`Ce@bCUrBoAnAuGSqIn@yEhDeOrCuQ|A}EvAwFdDgAfGSrHUJ\p@Bj@_A|Ao@tCsD|C}Rj@wAdCuW~Ds]VCJw@OUpEc_@jDKbDwB 
```

如果使用 LatLng 格式是指创建 LatLng 对象的方式，则可以在 decodePoly 方法中看到。这些 latLng 对象被添加到 PolylineOptions 对象中，并且 this 添加到地图中，这样：

```
PolylineOption ruta=new PolylineOptions();
for(int i=0;i<puntos.size();i++){
ruta.add(new LatLng(puntos.get(i).latitude, puntos.get(i).longitude));                      
}//puntos is an array where the array returned by the decodePoly method are stored                  
ruta.color(Color.RED).width(7);                     
Polyline polygon=mapa.addPolyline(ruta); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-07-22T23:19:24.473

对于那些现在需要它的人来说，有一个开源库，其中包含许多关于 Google Maps Android API 的有用内容，包括折线的解码和编码。

[在Android Maps Utils](http://googlemaps.github.io/android-maps-utils/)和[Android Maps Util Github](https://github.com/googlemaps/android-maps-utils)中查看。对于解码和编码使用：

```
PolyUtil.decode(String encodedPath);
PolyUtil.encode(List<LatLng> path); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-10T15:38:09.037

我更改了我在 Google 中长时间搜索后找到的用于此的 decodePoly，现在路线已正确绘制。

[http://wptrafficanalyzer.in/blog/route-between-two-locations-with-waypoints-in-google-map-android-api-v2/](http://wptrafficanalyzer.in/blog/route-between-two-locations-with-waypoints-in-google-map-android-api-v2/)

改变

```
LatLng p = new LatLng((int) (((double) lat /1E5)* 1E6), (int) (((double) lng/1E5   * 1E6))); 
```

为了

```
LatLng p = new LatLng((((double) lat / 1E5)),(((double) lng / 1E5))); 
```

现在工作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-02T11:55:10.987

在 Javascript 中也一样

```
 function decodePolyline(encoded) {
        if (!encoded) {
            return [];
        }
        var poly = [];
        var index = 0, len = encoded.length;
        var lat = 0, lng = 0;

        while (index < len) {
            var b, shift = 0, result = 0;

            do {
                b = encoded.charCodeAt(index++) - 63;
                result = result | ((b & 0x1f) << shift);
                shift += 5;
            } while (b >= 0x20);

            var dlat = (result & 1) != 0 ? ~(result >> 1) : (result >> 1);
            lat += dlat;

            shift = 0;
            result = 0;

            do {
                b = encoded.charCodeAt(index++) - 63;
                result = result | ((b & 0x1f) << shift);
                shift += 5;
            } while (b >= 0x20);

            var dlng = (result & 1) != 0 ? ~(result >> 1) : (result >> 1);
            lng += dlng;

            var p = {
                latitude: lat / 1e5,
                longitude: lng / 1e5,
            };
            poly.push(p);
        }
        return poly;
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-11T06:24:37.033

此方法对于解码折线很有用

```
 private List<LatLng> decodePoly(String encoded) {
    List<LatLng> poly = new ArrayList<>();
    int index = 0, len = encoded.length();
    int lat = 0, lng = 0;

    while (index < len) {
        int b, shift = 0, result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lat += dlat;

        shift = 0;
        result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lng += dlng;

        LatLng p = new LatLng((((double) lat / 1E5)),
                (((double) lng / 1E5)));
        poly.add(p);
    }

    return poly;
} 
```

这就是我得到折线的方式

```
JSONObject poly = route.getJSONObject("overview_polyline");
String polyline = poly.getString("points");
polyLineList = decodePoly(polyline); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-03T06:05:06.170

这是 iOS 中的实现，对于任何好奇的人，它完全基于 @Fustigador 的答案，但已转换为 iOS。请注意，我没有相应地格式化代码。我只是为了返回承诺的对象而添加了一些变量。

```
- (GMSPath *)decodedPolylinePathFromEncodedPolylineString:(NSString *)encodedPolylineString {

    NSString *decodedPolylineString = @"";
    GMSMutablePath *decodedPolylinePath = [GMSMutablePath new];
    CLLocationCoordinate2D decodedCoordinate;
    CLLocationDegrees latitude, longitude;

    int index = 0;
    NSUInteger len = encodedPolylineString.length;

    int lat = 0, lng = 0;

    while (index < len) {
        int b, shift = 0, result = 0;
        do {

            b = [encodedPolylineString characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lat += dlat;

        shift = 0;
        result = 0;
        do {
            b = [encodedPolylineString characterAtIndex:index++] - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lng += dlng;

        latitude =  (((double) lat / 1E5));
        longitude = (((double) lng / 1E5));

        decodedCoordinate = CLLocationCoordinate2DMake(latitude, longitude);

        decodedPolylineString = [NSString stringWithFormat:@"%f%f", latitude, longitude];
        ;
        NSLog(@"%@",decodedPolylineString);

        [decodedPolylinePath addCoordinate:decodedCoordinate];
    }

    return decodedPolylinePath;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-01T07:23:45.000

在 Pascal (Delphi) 中相同：

```
function DecodeLine(inputstring: String): String;
var
  lat, lon, lat_f, lon_f: Double;
  index: Integer;
  len: Integer;
  b: Integer;
  shift: Integer;
  decodeResult: Integer;
  encoded: String;
  dlat: Integer;
  dlng: Integer;
begin
  Result := '';

  encoded := inputstring;
  len := Length(encoded);
  index := 1;
  lat := 0;
  lon := 0;

  while (index <= len) do begin
    b := $20;
    shift := 0;
    decodeResult := 0;

    while (b >= $20) do begin
      b := ord(encoded[index]);
      b := b - 63;
      inc(index);
      decodeResult := decodeResult or (b and $1f) Shl shift;
      shift := shift + 5;
    end;

    if (decodeResult and 1) <> 0 then
      dlat := not (decodeResult shr 1)
    else
      dlat := decodeResult shr 1;
    lat := lat+dlat;

    shift := 0;
    decodeResult := 0;
    b := $20;
    while (b >= $20) do begin
      b := ord(encoded[index]);
      b := b-63;
      inc(index);
      decodeResult := decodeResult or (b and $1f) Shl shift;
      shift := shift + 5;
    end;

    if (decodeResult and 1) <> 0 then
      dlng := not (decodeResult shr 1)
    else
      dlng := decodeResult shr 1;
    lon := lon + dlng;

    { The coordinates of the point are used for our purposes }
    lon_f := lon/100000.0;
    lat_f := lat/100000.0;

    if Result <> '' then
      Result := Result + ', ';
    Result := Result + '(' + FloatToStr(lon_f) + ' - ' + FloatToStr(lat_f) + ')';
  end; //while
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  str: String;
begin
  // Do stuff
  str := DecodeLine('ibgqGq}ycIMvM');
  ShowMessage(str);
end; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-17T06:36:41.037

```
private List<GeoPoint> decodePoly(String encoded){

     List<GeoPoint> poly = new ArrayList<GeoPoint>();
     int index = 0, len = encoded.length();
     int lat = 0, lng = 0;

     while (index < len){
            int b, shift = 0, result = 0;
            do{

               b = encoded.charAt(index++) - 63;
               result |= (b & 0x1f) << shift;
               shift += 5;
            }while(b >= 0x20);
            int dlat = ((result & 1) != 0 ?~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do{
               b = encoded.charAt(index++) - 63;
               result |= (b & 0x1f) << shift;
               shift += 5;
            }while(b >= 0x20);
            int dlng = ((result & 1) != 0 ?~(result >> 1) : (result >> 1));
            lng += dlng;

            GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6), (int) (((double) lng / 1E5) * 1E6));
            poly.add(p);
     } 
     return poly;
} 
```

# visual-c++ - 批量行获取中的 CRecordset::IsFieldNull 方法替换

> ID：15924837
> 
> 赞同：0
> 
> 时间：2013-04-10T11:41:06.537
> 
> 标签：visual-c++, mfc, odbc

我有与使用`CRecordSet`（MFC ODBC）批量提取行相关的查询。

在 MSDN 页面上，它写道

> 成员函数 IsDeleted、IsFieldDirty、IsFieldNull、IsFieldNullable、SetFieldDirty 和 SetFieldNull 不能用于实现批量行提取的记录集。但是，您可以调用 GetRowStatus 代替 IsDeleted，调用 GetODBCFieldInfo 代替 IsFieldNullable。

现在，我想检查一个字段是否包含“NULL”/“没有值”数据。`IsFieldNull`由于该功能在批量行提取中不起作用，我该如何检查？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-11T10:17:37.473

`IsFieldNull`和`IsFieldNullable`功能是有区别的。

因此，从逻辑上讲，由于您正在进行批量行提取，因此您将无法知道某个特定行的归档是否为空。但是您只能确定特定字段是否可以为空，这仅意味着该字段是否能够接受空值。

* * *

该`CODBCFieldInfo`结构包含有关 ODBC 数据源中的字段的信息。

它有一个名为的成员`m_nNullability`，用于标识该字段是否接受 Null 值。这可以是两个值之一：`SQL_NULLABLE`如果字段接受 Null 值，或者`SQL_NO_NULLS`如果字段不接受 Null 值。

因此，将`CODBCFieldInfo`结构对象传递给`CRecordset::GetODBCFieldInfo`通过引用收集对象的函数。所以不用担心，您将获取更新后的值，然后检查该`m_nNullability`对象的成员值，**以仅知道该字段是否可为空，而不知道特定行的字段是否为 null**。

[http://msdn.microsoft.com/en-us/library/xexc6xef(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/xexc6xef(v=vs.80).aspx)

[http://msdn.microsoft.com/en-us/library/k50dcc9s(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/k50dcc9s(v=vs.80).aspx)

`CRecordset::GetODBCFieldInfo`函数有两个版本。该函数的一个版本允许您按名称查找字段。另一个版本允许您按索引查找字段。

# php - 浏览另一台服务器 PHP 文件夹中的文件

> ID：15924839
> 
> 赞同：3
> 
> 时间：2013-04-10T11:41:13.433
> 
> 标签：php, file

我有两台服务器。一份用于文件，一份用于网站。

我想出了如何将文件上传到该服务器，但现在我需要在网站上显示缩略图。

有没有办法通过文件服务器上的文件夹 /files 并使用 PHP 在网站上显示这些文件的列表？

我现在搜索了一段时间，但找不到答案。我尝试使用 scanddir([URL]) 但这没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T12:39:46.030

我很尴尬这么说，但我在另一篇文章中找到了答案：

[来自远程服务器的 PHP 目录列表](https://stackoverflow.com/questions/1688564/php-directory-list-from-remote-server)

```
function get_text($filename) {

    $fp_load = fopen("$filename", "rb");

    if ( $fp_load ) {

            while ( !feof($fp_load) ) {
                $content .= fgets($fp_load, 8192);
            }

            fclose($fp_load);

            return $content;

    }
}

$matches = array();

preg_match_all("/(a href\=\")([^\?\"]*)(\")/i", get_text('http://www.xxxxx.com/my/cool/remote/dir'), $matches);

foreach($matches[2] as $match) {
    echo $match . '<br>';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:04:08.337

scandir 将无法使用除您自己的任何其他服务器。如果您希望能够做这样的事情，最好的办法是让它们仍然在单独的服务器上，在网站上有一个 php 文件，在文件服务器上有一个 php 文件。您网站上的 php 文件可以通过文件服务器 php 文件打印数据到屏幕上获取另一台服务器的文件数据，然后网络服务器读取该数据。例子：

网络服务器：

```
<?php
$filedata = file_get_contents("url to file handler php");
?> 
```

文件服务器：

```
<?php
echo "info you want webserver to read";
?> 
```

这也可以根据您的 post 和 get 请求进行定制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T07:43:31.510

我使用了以下方法：

我创建了一个脚本，它遍历文件服务器上的所有文件。

```
$fileList = glob($dir."*.*"); 
```

这只有在脚本实际上在文件服务器上时才有可能。在没有访问权限的情况下浏览另一台服务器上的文件会很奇怪。

有一种方法可以在没有访问权限的情况下执行此操作（请阅读我的其他答案），但这非常慢并且没有派上用场。

我知道我说过我没有访问权限，但我有。我只是想知道所有的可能性。

# vb.net - 将值增加一个视觉基础被卡住了

> ID：15924841
> 
> 赞同：2
> 
> 时间：2013-04-10T11:41:15.457
> 
> 标签：vb.net

我正在尝试编写一个代码，在单击 Visual Basic 中的按钮后将值增加一。这些是我迄今为止尝试过的代码，但我没有实现我的目标

**代码 1**

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
   Dim votecount As Integer = Integer.Parse(showcountwinnie.Text)
   votecount += 1
   showcountwinnie.Text = votecount.ToString()
End Sub 
```

**代码二**

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
  Dim votes As Integer
  votes = 0
  votes += 1
  votes = showcountwinnie.Text
End Sub 
```

**代码三**

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
   Dim votewinnie As Integer
   votewinnie = showcountwinnie.value
   votewinnie = votewinnie + 1
   showcountwinnie.value = votewinnie
End Sub 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T14:16:02.810

快速而肮脏的方式：

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
            showcountwinnie.Text = (Val(showcountwinnie.Text) + 1).ToString()
        End Sub 
```

更优雅的方式：

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
            Dim votecount As Integer
            If Integer.TryParse(txt_UTC.Text, votecount) Then
                votecount += 1
            Else
                ' whatever you want to do with votecount
                votecount = 0
            End If
            txt_UTC.Text = votecount.ToString()
        End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T11:54:52.883

不是最优雅的解决方案，但有效：

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Dim vote As Integer
    If showcountwinnie.Text <> "" Then
        vote = Val(showcountwinnie.Text)
    Else
        vote = 0
    End If

    vote += 1
    showcountwinnie.Text = vote
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-25T17:00:46.130

使用上面建议的代码，我发布了对我真正有用的代码，只需稍作改动

```
Private Sub txtQuantity_Click()
    Dim vote As Integer
    If txtQuantity.Text <> "" Then
        vote = Val(txtQuantity.Text)
    Else
        vote = 0
    End If

    vote = vote + 1
    txtQuantity.Text = vote

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T11:56:17.050

代码 1 似乎是正确的。只需尝试在第 1 行保留一个断点，并在单击按钮时检查代码行是否正在执行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T12:58:29.493

尝试这个

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Static votecount As Integer = 0
    votecount += 1
    showcountwinnie.Text = votecount.ToString()
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T13:56:15.470

```
showcountwinnie.Text = showcountwinnie.text + 1 
```

此方法使用自身为每次点击 +1

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-06-23T00:16:55.973

有点晚了，但你的代码 1 不起作用 Parse 方法需要两个参数。 *在代码 2 中，您的意思是从showcountwinnie.Text = votes*
之类的东西的外观相反的方式分配东西这个 showcountwinnie 到底是什么？一个文本框？一个标签？

# javascript - 在 if 语句之前隐藏 HTML

> ID：15924842
> 
> 赞同：0
> 
> 时间：2013-04-10T11:41:16.333
> 
> 标签：javascript

我最近一直在尝试在我的网站上设置一个简单的帐户系统。如果您有帐户，游戏会出现，如果没有，页面会显示，`You need an account!`

在我的 if 语句之前，我似乎无法弄清楚如何隐藏 HTML 嵌入代码。

到目前为止，这是我的代码：

```
<html>
    <body>
        <div id="Game">
            <center>
                <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="700" height="600" align="middle" id="kingdom-rush-1-082">
                    <param name="movie" value="http://m.toogame.com/k/swfs/kingdom-rush-1-082_80r.swf">
                    <param name="quality" value="high">
                    <param name="AllowScriptAccess" value="always">
                    <!--[if !IE]>-->
                        <object type="application/x-shockwave-flash" data="http://m.toogame.com/k/swfs/kingdom-rush-1-082_80r.swf" width="700" height="600">
                            <param name="movie" value="http://m.toogame.com/k/swfs/kingdom-rush-1-082_80r.swf">
                            <param name="quality" value="high">
                            <param name="AllowScriptAccess" value="always">
                        <!--<![endif]-->
                        <!--[if !IE]>-->
                        </object>
                    <!--<![endif]-->
                </object>
        </div>
        <script type="text/javascript">
            var pass = window.prompt("Type Your Password")
             if ((pass == 'bacon'))
                 document.getElementById('Game').style.display = "none"
            else 
                 document.write("You need an account for this!")
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:43:04.120

```
document.getElementById('Game').style.display = "block" 
```

任何使用浏览器的人都可以查看密码，不过密码很好。

`diplsay:block`表示它可见 `display:none`它不可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:45:02.977

首先使用样式隐藏html元素

```
<div id="Game" style="display: none"> 
```

然后在脚本中

```
var pass= window.prompt("Type Your Password")
if ( (pass=='bacon') )
    document.getElementById('Game').style.display = "block"
else
    document.write("You need an account for this!") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T02:45:59.983

看过您的网站后，很明显您打算使用多个密码。然后我建议使用数组来存储密码，然后检查输入是否包含在数组中。

**[工作演示](http://jsfiddle.net/BenedictLewis/kbFTf/)**

HTML：

```
<div id="result">Waiting for password input...</div>
<div id="hiddenContent" style="display: none">This content is normally hidden unless a user has entered the correct password. Using Javascript is not a very good way to secure content though, as it can easily be bypassed.</div> 
```

Javascript：

```
var passwords = new Array();
passwords[0] = "pass1";
passwords[1] = "pass2";
passwords[2] = "pass3";
// This is your array of passwords. You can add as many as you want!

var passwordInput=prompt("Please enter your password...");
// This will ask for the user to enter their password

if (inArray(passwordInput, passwords)===true) {
    // This uses the inArray function to check if the users input is found within the array.
    document.getElementById("result").innerHTML="password found";
    document.getElementById('hiddenContent').style.display = "block"
    // If the password is found then it sets content of the <div> and makes it possible to view the hidden content.
}
else {
    document.getElementById("result").innerHTML="password not found";
    // If the password is not found then it sets the content of the <div>
}

// This function checks if a variable is found within an array
function inArray(variable, array) {
    var length = array.length;
    for(var i = 0; i < length; i++) {
        if(array[i] == variable) return true;
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T12:17:15.603

对 nimchimpsky / arun p johny 的解决方案进行微调（`center`元素正确终止）。如果您选择接受我的回答，您应该接受其中一位指定贡献者的回答。

```
<html>
    <body>
        <div id="Game" style="display:none;">
            <center>
                <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="700" height="600" align="middle" id="kingdom-rush-1-082">
                    <param name="movie" value="http://m.toogame.com/k/swfs/kingdom-rush-1-082_80r.swf">
                    <param name="quality" value="high">
                    <param name="AllowScriptAccess" value="always">
                    <!--[if !IE]>-->
                        <object type="application/x-shockwave-flash" data="http://m.toogame.com/k/swfs/kingdom-rush-1-082_80r.swf" width="700" height="600">
                            <param name="movie" value="http://m.toogame.com/k/swfs/kingdom-rush-1-082_80r.swf">
                            <param name="quality" value="high">
                            <param name="AllowScriptAccess" value="always">
                        <!--<![endif]-->
                        <!--[if !IE]>-->
                        </object>
                    <!--<![endif]-->
                </object>
            </center>
        </div>
        <script type="text/javascript">
            var pass = window.prompt("Type Your Password")
             if ((pass == 'bacon'))
                 document.getElementById('Game').style.display = "block"
            else 
                 document.write("You need an account for this!")
        </script>
    </body>
</html> 
```

# .net - 应用程序重新启动后从方法返回值

> ID：15924843
> 
> 赞同：0
> 
> 时间：2013-04-10T11:41:17.757
> 
> 标签：.net, return-value

这可能看起来很愚蠢，但我正在处理遗留代码（.Net4，C#），其中包含：

```
bool retVal = CheckSomething();

...

private bool CheckSomething()
{
    if(whatever) return false;
    else
        {
            DoSomething();
            return true;
        }
}

private void DoSomething()
{
    ...
    System.Windows.Forms.Application.Restart();
    System.Windows.Application.Current.Shutdown();
} 
```

对我来说这没有任何意义，因为重启应该导致应用程序从入口点开始，而不是从它停止的地方开始。我对吗？

**编辑**
`CheckSomething()`执行以下操作： - 如果这不是 ClickOnce 应用程序（调试） - 返回 false。- 手动检查更新。如果有更新，请执行（并重新启动）然后返回 true。如果不需要更新，返回false。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:59:48.190

尽管从逻辑的角度来看，在这里返回一些东西是没有意义的，但请注意，在语法上，方法**必须**是`return`or `throw`。如果删除返回，编译器会报错。您可能会争辩说，如果该函数无论如何只返回 false，则该函数可能是无效的，这取决于函数的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:17:11.990

一个问题 你将如何替换你自己正在运行的 exe 文件

我为我的应用程序做了同样的事情我检查更新如果没有更新继续

如果更新将它们下载到包含 updater.exe 的某个 tmp 文件夹，则执行 updater.exe 并关闭当前应用程序

updater.exe 将替换内容并再次启动应用程序。

这对我来说很好用

# sitecore - Sitecore 活动目录模块中的管道？

> ID：15924844
> 
> 赞同：1
> 
> 时间：2013-04-10T11:41:18.923
> 
> 标签：sitecore, sitecore6

我已经安装了 Sitecore 活动目录模块。当创建、删除或重命名活动目录中的用户时，我想执行一些自定义代码。是否有管道或功能可以连接？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:09:47.857

正如 Trayek 所说，您可以在事件中添加自定义事件处理程序：

//创建 `<event name="user:created">` `</event>`

//删除 `<event name="user:deleted">` `</event>`

//更新 `<event name="user:updated"/>` `</event>`

首先，覆盖 Sitecore 的代码，在您的自定义命令和调试中，也许您也可以获取选定的角色，您可以在其中查看用户是否选择了活动目录，然后执行您的自定义操作，否则让它按原样执行。

希望能帮助到你！

问候， Varun Shringarpure

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:45:20.233

您也许可以使用标准`<event name="user:created" />`,`<event name="user:deleted" />`和/或`<event name="user:updated" />`事件。`<events>`您可以在节点下的 web.config 中找到这些。

我不知道该模块是否带有它自己的管道/事件，否则使用它们可能会更好。

[编辑] 请记住，这也适用于其他用户（外联网、Sitecore、其他域）的创建、删除和编辑。

# java - Java - DriverManager.getConnection 访问

> ID：15924847
> 
> 赞同：3
> 
> 时间：2013-04-10T11:41:23.870
> 
> 标签：java, connection, odbc, ms-access-2007

我有以下代码来测试新服务器上访问数据库的链接，一切都适用于现有服务器，我能够访问该文件夹。!if.exists 返回 true，我可以使用 Runtime.getRuntime().exec("run......... + f); 打开数据库；所以我知道它可以看到数据库。我无法获取失败的原因，但它在 Connection conn = de 处 100% 失败......

谁能帮我。

运行给出以下输出 - Java 结果：-1073741811

```
package testing;

import connections.LocalProperties;
import java.io.File;
import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;

public class NewClass {

    public static void main(String[] args) {
        try {
            File f = new File("\\\\***\\***\\****\\***.accdb");

            if (!f.exists()) {
                System.out.println("file does not exist" + f.getAbsolutePath());
                return;
            } else {
                System.out.println("file does exist" + f.getAbsolutePath());
            }

            String url = "jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=" + f.getAbsolutePath();

Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
            String m_URLString = url;
            String m_UserName = System.getProperty("user.name");
            String m_Password = "*******";

            Connection conn = DriverManager.getConnection(m_URLString, m_UserName, m_Password);
            conn.close();
        } catch (SQLException ex) {
            Logger.getLogger(NewClass.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
} 
```

运行时我得到以下弹出窗口： Java.exe 如果您正在处理某事，信息可能会丢失，有关更多信息，请单击此处

错误签名

应用名称：java.exe appver 7.0.30.5 modname：msvcr80.dll

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:46:54.277

I think you are missing this line-

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver"); 
```

# ruby-on-rails - 在 ruby on rails 中选择复选框值

> ID：15924848
> 
> 赞同：0
> 
> 时间：2013-04-10T11:41:27.807
> 
> 标签：ruby-on-rails, ruby, checkbox

我的 html 页面中有一些 5 个静态复选框。当我单击提交按钮时，我想获取选定复选框的值。

以下是我的代码片段，请纠正我哪里错了。

对于我在 101..105

```
 if (params[":Prod"+i] == 'selected')
    @userid=session[:userid].to_i
    @prodid="Prod"+i.to_i
    @prodname=params[":ProdName"+i].to_s
    @price=params[":Price"+i].to_i
    @qty=params[":qty"+i].to_i
    @Products=Product.create :UserId =>@userid, :ProductId =>@prodid, :ProductName     =>@prodname, :Price =>@price,:Quantity =>@qty

    if @Products.save
      redirect_to viewcart_path
    else
      render products_path
   end

  end 
```

注意：我的复选框 ID 是 Prod101、Prod102、Prod103、Prod104 和 Prod105，我在我的 html 页面中定义了静态。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:12:20.023

您可以创建类似于您正在尝试的动态哈希键，但语法有点偏离。利用：

```
params[:"Prod#{i}"] 
```

或者

```
params["Prod#{i}".to_sym] 
```

`"selected"`请注意，除非您自己在视图中设置了该值，否则该值不是。根据您是否使用助手来创建复选框，以及您可能使用的助手/宝石，值可能会有所不同。如果您没有覆盖它，您很可能会为复选框获得“1”。对于未选中的框，您可能会得到“0”，但默认情况下，浏览器不会为未选中的框发送*任何内容*，因此参数可能根本不存在。一些表单助手通过使用隐藏的表单字段来欺骗浏览器发送“0”。另请注意，这`"0"`是 Ruby 中的真实值，因此您应该明确检查`"1"`或检查您在表单中提供的任何检查值。检查您的日志并查看表单提交的内容以确保确定。

# c# - Unity3D TypeLoadException

> ID：15924850
> 
> 赞同：2
> 
> 时间：2013-04-10T11:41:40.507
> 
> 标签：c#, unity3d

我正在尝试通过 Unity 连接到 MySQL 数据库。我在 Visual Studio 中添加了对 System.Data 的引用，但统一引发以下错误：

> TypeLoadException：无法从程序集“System.Data”加载类型“System.Runtime.ExceptionServices.HandleProcessCorruptedStateExceptionsAttribute”。

我已经用谷歌搜索了如何解决这个问题，或者它的实际含义，但我找不到任何东西。

有没有人能够对此有所了解以及我应该做些什么来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:24:12.037

Unity 使用的是单声道，而不是 .NET。因为`HandleProcessCorruptedStateExceptionsAttribute`是 .NET-framework 4.5 的一个类，Unity 无法加载这个类。您需要告诉 Visual Studio，它不能针对 .NET-framework 4.5 进行编译，而是需要在项目设置中指定 3.5 版本。

# php - 如何表明该方法是 PHPDoc 接口的一部分？

> ID：15924854
> 
> 赞同：8
> 
> 时间：2013-04-10T11:41:55.133
> 
> 标签：php, phpdoc

如何表明该方法是 PHPDoc 接口的一部分？

例如：

```
/**
 * @implements BarInterface
 */
class Foo implements BarInterface
{
    /**
     * @thisMethodIsHereBecauseItIsAPartOf("BarInterface")
     */
    public function doBar()
    {
    }
} 
```

有什么合适的可以代替`@thisMethodIsHereBecauseItIsAPartOf("BarInterface")`吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T11:56:39.420

> 如何表明该方法是 PHPDoc 接口的一部分？

您不需要记录这些，因为您使用`implements BarInterface`源代码文档系统通常会自动处理这些。

但是，您也可以使用`@inherit(doc)`：

```
/**
 * @implements BarInterface
 */
class Foo implements BarInterface
{
    /**
     * @inherit
     * {@inherit}
     * {@inheritdoc}
     */
    public function doBar()
    {
    }
} 
```

关于你`@implements BarInterface`在上面，这是*多余*的，因为它已经写在类定义中。由于注释算作代码，并且您不应该编写*多余的代码*，因此我建议您将其删除。

# solr - 在 Solr 中存储和搜索数据对

> ID：15924857
> 
> 赞同：0
> 
> 时间：2013-04-10T11:42:02.907
> 
> 标签：solr, lucene

我试图弄清楚如何存储和搜索数据对。我有一个类似于下面的文档，我的目标是执行搜索，返回具有给定专业的所有文档，然后按匹配的专业能力对结果进行排序：

```
<doc>
    <id>123</id>
    <firstName>Joe</firstName>
    <lastName>Bloggs</lastName>
    <specialties>
        <specialty>
            <type>Foo</type>
            <ability>1</ability>
        </specialty>
        <specialty>
            <type>Bar</type>
            <ability>2</ability>
        </specialty>
        <specialty>
            <type>Baz</type>
            <ability>2</ability>
        </specialty>
    </specialties>
</doc> 
```

我熟悉工作索引、搜索和分面简单文档，但我什至很难找到一个起点 =(

我应该简单地使用两个集合并加入吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:05:50.083

如果专业的数量是有限的并且事先已知，您可以尝试跟随。

不是有两个字段存储专业和能力，而是有一个包含**“ability_of_a_specialty”的字段**

例如，

```
<specialties>
    <Foo_ability> 1 </Foo_ability>
    <Bar_ability> 2 </Bar_ability>
    <Dummy_ability> 0 </Dummy_ability>
    ...
</specialties> 
```

现在，将上述属性转换为 Lucene 文档应该很简单。

# javascript - Javascript - 创建一个正则表达式，获取数组中具有任何 ID 的所有标签

> ID：15924863
> 
> 赞同：2
> 
> 时间：2013-04-10T11:42:31.610
> 
> 标签：javascript, regex, match

例如，我有一个字符串*：*

```
varString = "<tr><td ID=''>Hypothyroidism</td><td ID=''>10/31/1998</td><td ID=''>Active</td><td ID=''>UNKNOWN</td><td ID=''></td></tr>";
varString += "<tr><td ID=''>Cataract</td><td ID=''>6/5/2005</td><td ID=''>Active</td><td ID=''>UNKNOWN</td><td ID=''></td></tr>"; 
```

然后我将字符串拆分为一个数组，如下所示：

```
var dataArray = allDataArray[x].split("</tr>"); 
```

我正在尝试做的是使用以下内容来获取所有带有内容的列标签。这仅适用于具有空 id 的列：

```
var testRE = dataArray[x].match("<td ID=''>(.*)</td>"); 
```

即使以下不起作用，我想要的格式是这样的：

```
var testRE = dataArray[x].match("<td ID='(*)'>(.*)</td>"); 
```

***不管 id 是什么，有没有办法仍然显示所有数据？***

众所周知，感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:45:42.630

试试这个正则表达式

```
var testRE = dataArray[xx].match("<td ID='([^']+)?'>(.*)</td>") 
```

# url - Struts2 传递 url 参数来排序标签

> ID：15924864
> 
> 赞同：1
> 
> 时间：2013-04-10T11:42:37.773
> 
> 标签：url, sorting, parameters, iterator, struts

我是 Struts FW 和 JSP 的新手。我有几个通过`<s: iterator>`. 我想根据每一列（名称、地址等）对这个列表进行排序，所以我添加了`<s:sort>`标签并创建了比较器类（名称、地址）。

现在，我想知道如何通过 URL 参数传递我想使用哪种类型的比较器？

代码如下所示：

```
<s:bean name="ois.AlphabetComparator" var="alphabetComparator" />   
<s:bean name="ois.AddressComparator" var="addressComparator" />
<s:url id="place" action="getAllPlaces">   
   <s:param name="sortStyle">#addressComparator
    </s:param>   
</s:url>   
<s:a href="%{place}">   
<s:sort comparator="?how to pass url parameter here?" source="places">   
  <s:iterator status="status">   
     ...   
  </s:iterator>   
</s:sort> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:01:11.203

**例 1**

使用#parameters['sortStyle'] 获取参数的值。首先为参数 sortStyle 创建具有不同值的 URL：

```
<s:url id="place_sortByAddress" action="getAllPlaces">
   <s:param name="sortStyle">ois.AddressComparator
    </s:param>   
</s:url>
<s:url id="place_sortByAlphabet" action="getAllPlaces">   
   <s:param name="sortStyle">ois.AlphabetComparator
    </s:param>   
</s:url> 
```

然后添加链接（假设目标是根据所选链接以各种方式对列表进行排序）：

```
<s:a href="%{place_sortByAddress}">Sort by Adress</s:a></br>
<s:a href="%{place_sortByAlphabet}">Sort by Alphabet</s:a></br> 
```

下一步有点棘手。如果实际上有一个名为 sortStyle 的参数，则根据参数 sortStyle 的值创建一个新 bean。该 bean 将作为比较器类对列表中的项目进行排序。

```
<table>
    <tbody>
        <s:if test='%{#parameters["sortStyle"] != null}'>
            <s:bean name='%{#parameters["sortStyle"]}' var="comparatorClass" />
            <s:sort comparator="#comparatorClass" source="places">
              <s:iterator>
                <tr>
                    <td><s:property value="name"/></td>
                    <td><s:property value="adress"/></td>
                </tr>
              </s:iterator>
            </s:sort>
        </s:if>
    </tbody>
</table> 
```

例如，如果您单击第一个链接，您的比较器类将是**ois.AddressComparator**。

这个解决方案应该可以正常工作，但它依赖于参数的使用，用户可以看到和修改，而且我们还必须直接在 jsp 中使用“if”标记进行检查。

Action 类可以在服务器端处理检查和更改。多亏了struts，它可能会得到改进。

**例 2**

在JSP 中，使用struts **s:form**标签。**使用s:submit**标记为此表单创建提交按钮。每个提交按钮调用 Action 类的不同方法，每种方法对列表进行排序。

```
<s:form action="getAllPlaces">
    <!-- Submit buttons -->
    <s:submit key="messages.submit" action="getAllPlaces" method="sortByAdress"/>
    <s:submit key="messages.submit" action="getAllPlaces" method="sortByAlphabet"/> 
```

然后创建一个表格来显示列表中的项目。与第一个示例一样，bean 是从参数值创建的。不是在 URL 中发送的参数，而是由 Action 类设置并在 JSP 中使用的属性。让 Action 类处理对此属性的控制和更改。

```
 <!-- Table for list -->
    <table>
        <tbody>
            <!-- Create a new bean with parametric class name -->
            <s:bean name="%{#attr['comparatorClassName']}" var="comparatorClass" />
            <s:sort comparator="#comparatorClass" source="places">
            <s:iterator>
                  <tr>
                     <td><s:property value="name"/></td>
                     <td><s:property value="adress"/></td>
                   </tr>
            </s:iterator>
            </s:sort>
        </tbody>
    </table>
</s:form> 
```

那里是来自 Action 类的代码。它有一个带有默认值的 compareClassName 属性。每次调用方法 sortByAlphabet() 或 sortByAddress 时，该值都会发生变化。

```
public class GetAllPlacesAction extends ActionSupport{

    /**
     * 
     * @return
     */
    private List<PlaceBean> places = new ArrayList<PlaceBean>();

    // Set default comparator class name
    private String comparatorClassName = "ois.AlphabetComparator";

    public String execute()
    {   
        // Populate Stub List
        GetAllPlacesAction.populateStubList(this.places);
        // Forward
        return SUCCESS;
    }

    public String sortByAdress()
    {
        // Refresh comparator class name
        this.comparatorClassName = "ois.AddressComparator";
        // Populate Stub List
        GetAllPlacesAction.populateStubList(this.places);
        // Forward
        return SUCCESS;
    }

    public String sortByAlphabet()
    {
        // Refresh comparator class name
        this.comparatorClassName = "ois.AlphabetComparator";
        // Populate Stub List
        GetAllPlacesAction.populateStubList(this.places);
        // Forward
        return SUCCESS;
    }

    private static void populateStubList(List<PlaceBean> p_places)
    {
        // Populate Stub List
        p_places.add(new PlaceBean("Gabriel", "USA"));
        p_places.add(new PlaceBean("Kim", "South Corea"));
        p_places.add(new PlaceBean("Khofi", "Ghana"));
        p_places.add(new PlaceBean("Abel", "Germany"));
    } 
```

更有经验的用户可能会改进此示例。但目前只显示一个列表和两个按钮来更改其项目的排序方式就足够了。祝你好运 ;-) @+

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-06T12:11:46.050

```
<s:sort comparator="?how to pass enum class  here?" source="places">   
    <s:iterator status="status">   
    ...   
    </s:iterator> 
```

我的枚举类是 -->

```
package com.vijay.util;
public enum ServiceComparator {
    displayNameAndEffectiveAt{
        @Override
        public int compare(ServiceContract sc0, ServiceContract sc1) {
            //code
        }
    };
} 
```

# ruby-on-rails - 视图中的 NoMethodError - 回形针

> ID：15924865
> 
> 赞同：0
> 
> 时间：2013-04-10T11:42:38.057
> 
> 标签：ruby-on-rails, view, paperclip

当我尝试在我的主页视图中显示上传的内容时，我收到了 NoMethodError。这是错误文本：

> 项目中的 NoMethodError#home
> 
> 显示 C:/Users/User/My Documents/portfolio2/app/views/items/home.html.erb 其中第 4 行提出：
> 
> nil:NilClass 的未定义方法 `main' 提取的源代码（第 4 行附近）：
> 
> ```
> <% @items.each do |item| %>
>     <div class="row">
>         <div class="large-12 columns panel">
>             <%= image_tag @item.main.url(:thumb) %>
>             <h3><%= item.title %></h3>
>             <p><%= item.content %></p>
>       </div> 
> ```

这是我的模型的样子：

```
class Item < ActiveRecord::Base
  set_table_name("users")
  attr_accessible :main
  has_attached_file :main, :styles => { :medium => "300x300>", :thumb => "100x100>" }, :default_url => "/images/:style/missing.png"
end 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:44:17.587

更改`@item`为`item`，因此应该是：

`<%= image_tag item.main.url(:thumb) %>`

# javascript - jQuery 倒计时在暂停时运行

> ID：15924872
> 
> 赞同：4
> 
> 时间：2013-04-10T11:43:08.373
> 
> 标签：javascript, jquery, countdown

我正在使用 Keith Wood 的 jQuery 倒数计时器。[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)

我想要实现的是带有停止和恢复按钮的计数，以及添加和减去分钟和秒的控件：

我创建了一个计数（从 0 到 60 分钟）并立即暂停它，如下所示：

```
$('#contador_tiempo').countdown({
    since: 0,
    format: 'MS',
    layout: '{mnn}{sep}{snn}'
});

$('#contador_tiempo').countdown('pause'); 
```

但它似乎仍在后台运行。当我单击按钮进行加法或减法时，这些函数会在该背景计数器之上执行操作，而不是在显示的计数器之上。

JSFiddle 上的完整代码，行为再现：

[http://jsfiddle.net/J2XHm/4/](http://jsfiddle.net/J2XHm/4/)

（稍微玩一下控件，您会发现它一直在计数，尽管它已暂停。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:46:18.823

是的，“getTimes”命令中有一个错误——它会在暂停时重新计算。我将在下一个版本 (1.6.2) 中进行更正，但同时您可以更改 _getTimesPlugin 函数：

```
_getTimesPlugin: function(target) {
    var inst = $.data(target, this.propertyName);
    return (!inst ? null : (inst._hold == 'pause' ? inst._savePeriods : (!inst._hold ? inst._periods :
        this._calculatePeriods(inst, inst._show, inst.options.significant, new Date()))));
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T12:02:59.850

如果您可以接受轻量级代码，即不使用 jQuery 倒数计时器，以下内容可能会对您有所帮助：

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript" src="http://localhost/web/JavaScript/jQuery/jquery"></script>
<script type="text/javascript">
    var countUpSeconds = 0;
    var interval = null;
    function displayTime() {
          $("#timeContainer").text(format(Math.floor(countUpSeconds/60))+":"+format(countUpSeconds%60));
    }
    function playStop() {
        if(interval) {interval=window.clearInterval(interval);}
        else {interval = window.setInterval(countUp, 1000);}
    }
    function countUp() {
        ++countUpSeconds;
        if(countUpSeconds >= 3600) {/* do something when countup is reached*/}
        displayTime();
    }
    function format(s) {return s<10 ? "0"+s : s;}
    $(function() {
        displayTime();
        $("#playStop").on("click", function () { playStop(); } );
        $("#addMin").on("click", function () { countUpSeconds += 60; displayTime(); } );
        $("#subMin").on("click", function () { countUpSeconds = Math.max(0, countUpSeconds-60); displayTime(); } );
        $("#addSec").on("click", function () { countUpSeconds += 1; displayTime(); } );
        $("#subSec").on("click", function () { countUpSeconds = Math.max(0, countUpSeconds-1); displayTime(); } );

    });
</script>
</head>
<body>
<div id="timeContainer"></div>
<button id="playStop">Play/Stop</button>
<button id="addMin">+1 minute</button>
<button id="subMin">-1 minute</button>
<button id="addSec">+1 second</button>
<button id="subSec">-1 second</button>
</body>
</html> 
```

# java - @Cachable 注解不起作用

> ID：15924873
> 
> 赞同：3
> 
> 时间：2013-04-10T11:43:09.840
> 
> 标签：java, spring, ehcache, spring-annotations

我们在项目中使用 ehcache 进行缓存。

```
import com.googlecode.ehcache.annotations.Cacheable;
// Other imports

@Component
public class Authenticator{
    @Cacheable(cacheName = "rest_client_authorized")
    public boolean isUserAuthorized(final String user, final String sessionId) {
        // Method code
    }
} 
```

进入方法时没有缓存拦截器。到目前为止我们检查的内容：

1.  我们不是从类内部调用这个方法，而是从外部调用。所以问题不在于导致绕过代理的内部调用。
2.  我们为这个类添加了一个接口，并且我们改变了调用这个类的注入来使用接口表示而不是具体类。

我们以这种方式在应用程序上下文中定义了缓存管理器：

```
 <ehcache:annotation-driven cache-manager="ehCacheManager" />         
   <bean id="ehCacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
       <!-- use a share singleton CacheManager -->
       <property name="shared" value="true" />
   </bean> 
```

缓存定义如下：

```
 <cache name="rest_client_authorized"
            eternal="false"
            maxElementsInMemory="50"
            overflowToDisk="false" diskPersistent="false"
            timeToIdleSeconds="0" timeToLiveSeconds="600"
            memoryStoreEvictionPolicy="LRU" /> 
```

当我们使用 Jconsole 测试缓存管理器时，我们可以看到缓存 *rest_auth_disabled* 存在并且为空。

任何关于为什么这不起作用的想法将不胜感激。谢谢！

**更新（来自以下评论的汇总）**：

===========================================**

这是一个遗留代码，可以很好地与我提供的类和定义一起使用。我在这里谈论的方法是新的，但班上的其他人在过去确实有效。因此，我们正在努力了解发生了什么变化。我们还尝试将注释替换为 spring Cacheable，但仍然没有：/ 也许这取决于调用这个新方法的代码，它来自与我们用于其他方法的不同的 spring bean。但我仍然找不到问题。

还尝试在下面的答案之后返回布尔值而不是布尔值，但它没有用。我们有一个新的线索，可能与我们注入 bean 的方式有关（使用@Autowire）。如果确实如此，将更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T08:58:35.977

这个问题可能与 Springs 加载 bean 的顺序有关。尝试从 Authenticator 声明中删除 @Autowire 注释，并手动进行自动装配。就像是：

```
/**
 * Class that uses Authenticator
 */

 public class X {

    // Don't use @autowire here
    public Authenticator athenticator;

    public void doSomething() {
         manuallyAutowire();
    }

    public void manuallyAutowire() {
         if(authenticator == null) {
    authenticator = ApplicationContextUtils.getApplicationContext().
                            getBean(authenticator.class);
    }
} 
```

在哪里

```
@Component
public class ApplicationContextUtils implements ApplicationContextAware {

    private static ApplicationContext ctx;

    @Override
    public void setApplicationContext(final ApplicationContext appContext) 
                                          throws BeansException {
         ctx = appContext;

    }

    public static ApplicationContext getApplicationContext() {
        return ctx;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:53:35.493

@Cacheable 中的参数**cacheName**的值应该和你的 application-context中**<cache>声明的****name**属性的值相同

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T13:19:44.680

我认为你在这里混淆了东西 - 你已经使用过`com.googlecode.ehcache.annotations.Cacheable`，如果你想要 Springs 缓存支持，它实际上应该是`org.springframework.cache.annotation.Cacheable`。然后缓存拦截器应该干净地工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T09:40:14.287

据我所知，Spring Ehcache 注释建议作为返回对象的两个参数都应该具有原始类型所缺少的`equals()`and`hashCode()`方法。

我不确定这个框架是否将原语转换为它们的包装变体（例如`Integer`or `Boolean`）。尝试返回包装变体`Boolean`而不是原始类型，看看它是否有效。

我不确定的另一件事是它如何（以及是否）处理`final`参数。如果我的第一个想法不起作用，请尽可能尝试删除`final`关键字，看看它是否有效。**

# java - Embedded Jetty 为什么要使用 join

> ID：15924874
> 
> 赞同：32
> 
> 时间：2013-04-10T11:43:19.567
> 
> 标签：java, multithreading, jetty

来自 Embedded Jetty 教程的示例建议如下：

```
public static void main(String[] args) throws Exception
{
   Server server = new Server(8080);
   server.setHandler(new HelloHandler());

   server.start();
   server.join();} 
```

为什么我需要添加行`server.join()`？没有它它工作正常。

* * *

## 回答 #1

> 赞同：-8
> 
> 时间：2013-04-10T11:50:45.013

`join()`在服务器准备好之前一直阻塞。它的行为类似于Jetty 线程池的`Thread.join()`调用`join()`。没有这个一切都可以正常工作，因为码头启动得非常快。但是，如果您的应用程序足够重，则启动可能需要一些时间。保证调用`join()`之后服务器确实准备好了。

# .net - 建立与 SQL Server 的连接时出错

> ID：15924877
> 
> 赞同：14
> 
> 时间：2013-04-10T11:43:26.957
> 
> 标签：.net, sql-server, web-config, connection-string

如果我在 web.config 中有这样的连接字符串（添加换行符以提高可读性）：

```
<add 
name="conn" 
connectionString="Data Source=(localdb)\v11.0; Initial 
    Catalog=MyDB; Integrated Security=True; MultipleActiveResultSets=True; 
    AttachDbFilename=D:\Products.mdf" 
providerName="System.Data.SqlClient"/> 
```

连接有效，我可以连接到数据库资源管理器中的数据库。

当我在代码中指定连接字符串或使用 ConfigurationManager 获取它时，它不起作用：

```
 SqlCommand command = new SqlCommand();
    command.CommandText = "select ...";
    command.CommandType = CommandType.Text;
    SqlConnection cn = new SqlConnection("Data Source=(localdb)\\v11.0;"+
        "Initial Catalog=MyDB; Integrated Security=True; "+
        "MultipleActiveResultSets=True; AttachDbFilename=D:\\Products.mdf");
    command.Connection = cn;
    cn.Open();
    DataTable dataTable = new DataTable();
    SqlDataReader reader;
    reader = command.ExecuteReader();
    dataTable.Load(reader);
    cn.Close(); 
```

从 web.config 获取连接字符串给出了相同的错误：

```
SqlConnection cn = new SqlConnection(ConfigurationManager.ConnectionStrings
 ["conn"].ConnectionString; 
```

我得到的错误是“ System.ComponentModel.Win32Exception：找不到网络路径”

在跟踪是说：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）]

我需要一些帮助来解决这个问题，几个小时以来一直在尝试解决这个问题，任何在线建议都是我应该检查网络设置（不适用，因为它连接到 sql server express 的本地实例）。服务器名称（相同的字符串在 VS Express 中有效，但在运行代码中无效）。

会不会是身份验证问题？如果是这样，那么为什么会出现信息错误？

感谢您阅读我的帖子，希望您能帮助我解决这个问题。

更新：

我尝试了以下事情：

赋予组每个人对 mdf 和 ldf 文件的完全权限

在 web 下的项目属性中，我尝试在 VS 开发服务器和本地 IIS web 服务器（是 IIS Express）下运行项目

不走运，将代码复制到使用“ASP.NET 空 Web 应用程序”创建的项目时，仍然无法完美连接

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T11:47:54.047

You've properly escaped the db filename but not the datasource, therefore it tries to connect to a datasource named "(localdb)11.0", which (most likely) doesn't exist.

Try escaping it properly like this:

```
SqlConnection cn = new SqlConnection("Data Source=(localdb)\\v11.0;"+
"Initial Catalog=MyDB; Integrated Security=True; "+
"MultipleActiveResultSets=True; AttachDbFilename=D:\\Products.mdf"); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-17T07:52:11.380

该问题与未在 .net 4.0 版中运行的应用程序有关

根据以下页面： http: [//www.connectionstrings.com/sql-server-2012#sqlconnection](http://www.connectionstrings.com/sql-server-2012#sqlconnection)

您需要 .net 4.0 及更高版本才能使用命名管道：

> 4.0.2 之前的 .NET 框架版本不支持 Server=(localdb) 语法。但是，命名管道连接将用于将 4.0.2 之前的应用程序连接到 LocalDB 实例。

```
SqlLocalDB.exe create MyInstance
SqlLocalDB.exe start MyInstance
SqlLocalDB.exe info MyInstance 
```

该信息提供了命名管道，然后可以在连接字符串中使用它：

```
<add name="conn" 
providerName="System.Data.SqlClient" 
connectionString="Server=np:\\.\pipe\LOCALDB#B1704E69\tsql\query"/> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-16T16:05:11.893

您是否尝试过使用 '.\SQLExpress;' 而不是使用 (localdb) 根据[MSDN](http://msdn.microsoft.com/en-us/library/ms254504.aspx)上的这个页面？它使用默认实例，这可能不是您需要的。

它会这样写：

```
<add 
name="conn" 
connectionString="Provider=SqlClient;Data Source=.\\SQLExpress; Initial 
    Catalog=MyDB; Integrated Security=True; MultipleActiveResultSets=True; 
    AttachDbFilename=D:\Products.mdf" 
providerName="System.Data.SqlClient"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-16T13:28:59.810

由于这是网站项目，您需要指定正确的 .net 框架版本来构建。SqlLocalDb 需要 .net 框架 4。

如果您创建 Web 项目并向其中添加网站源文件，如果 .net 框架为 4+，它将可以工作。当您打开网站默认目标框架或现有 dll 框架可能不同并且可能是 .net 3.5 时，这就是您收到此错误的原因。

![在此处输入图像描述](https://i.stack.imgur.com/NF7vf.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-15T18:25:14.140

只是为了笑而不是把 (localdb) 放一个句号`'.'`。这样它看起来像

```
Data Source=.\v11.0; 
```

如果它有效，我会感到惊讶，但你可以用完整的 SQL 来做到这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T02:31:18.043

检查工作的空项目和不工作的项目之间的引用 System.Data 的版本。您可以使用解决方案资源管理器进行检查。两个项目是否使用相同的版本？

![在此处输入图像描述](https://i.stack.imgur.com/jp12h.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-20T16:54:21.350

另外...这可能与您在 IIS 中的设置有关。

您的网站（会话状态）可以设置为使用 SQL Server 进行会话。也检查那里...我刚遇到这个问题，并意识到我们的 sqlbox 连接已更改并忘记在 IIS 上更新。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-21T21:08:15.723

在我压缩**C:\Program Files\Microsoft SQL Server\MSSQL11.MSSQLSERVER\MSSQL\DATA**目录后出现此错误。解压缩它修复了错误。

# python - “unicode”类型对象的未知格式代码“f”

> ID：15924879
> 
> 赞同：26
> 
> 时间：2013-04-10T11:43:37.947
> 
> 标签：python, django

谁能告诉我这段代码有什么问题...

```
def format_money_value(num):
    return u'{0:.2f}'.format(num) 
```

它给了我以下错误：

```
Unknown format code 'f' for object of type 'unicode' 
```

我正在运行 Django 1.5

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-10T11:57:23.673

在您的情况下`num`是一个 unicode 字符串，它不支持`f`格式修饰符：

```
>>> '{0:.2f}'.format(u"5.0")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: Unknown format code 'f' for object of type 'unicode' 
```

您可以修复自己进行转换的错误`float`：

```
>>> '{0:.2f}'.format(float(u"5.0"))
'5.00' 
```

* * *

正如 mgilson 指出的那样`'{0:.2f}'.format(num)`，字符串的`format`方法调用`num.__format__(".2f")`. 这会导致`str`or出错`unicode`，因为他们不知道如何处理此格式说明符。请注意， 的含义`f`保留为对象的实现。对于数字类型，这意味着将数字转换为浮点字符串表示形式，但其他对象可能有不同的约定。

如果您使用`%`格式化运算符，则行为会有所不同，因为在这种情况下直接`%f`调用`__float__`以获取对象的浮点表示。这意味着在使用`%`-style 格式时`f` *确实*有一个特定的含义，即转换为浮点字符串表示形式。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T12:36:27.607

## .format() 做什么

`str.format`方法调用 `__format__()`相关类型的方法。这意味着

```
<type>.__format__(<value>, <spec>) 
```

上面的方法接受与第一个值相同的类型参数，并接受一个合适的`spec`类型作为第二个值。喜欢，

```
str.__format__('1', 's')
int.__format__(1, 'f')
float.__format__(1.00, 'f') 
```

`str.__format__`接受从类型派生的任何类型`str`，例如`str`或`unicode`。规范值必须是该类型可用的有效格式化程序。以下将引发错误

```
str.__format__('1', 'f')
ValueError: Unknown format code 'f' for object of type 'str' 
```

因为`floating point`格式化不是*合适*的格式类型 fot 字符串。同样，以下也会引发错误

```
float.__format__(1.00, 's')
ValueError: Unknown format code 's' for object of type 'float' 
```

因为 float 是一种`numeric`类型，不能格式化为`string`. 但以下都是有效的：

```
float.__format__(1.00, 'g')
float.__format__(1.00, 'f') 
```

类似的以下将引发异常

```
float.__format__(1.00, 'd')
ValueError: Unknown format code 'd' for object of type 'float' 
```

因为将浮点数格式化为十进制值会导致精度值丢失。但是格式化一个`int`to`float`不会导致这样的事情，所以它是一个有效的转换：

```
int.__format__(1, 'f') 
```

所以`.format()`仅限于`specs`相关格式可用`type`。您必须按照@Bakuriu 的定义解析您的值：

```
'{0:.2f}'.format(float(u"5.0")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-30T17:28:15.293

将字符串（unicode 或其他）重新格式化为浮点字符串的场景不是很安全。您应该首先将字符串转换为数字表示形式，并且只有在成功后才能再次将其格式化为字符串。您无法控制进入程序的数据，因此您应该确保验证它是否进入。

如果您选择将其保留为字符串，则可以使用：

```
return u"{:.2f}".format(num) if num.isnumeric() else u"{}".format(num) 
```

如果您已经将字符串转换为数字格式，则可以像这样调整格式化程序：

```
return u"{:.2f}".format(num) if isinstance(num, NumberTypes) else u"{}".format(num) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-13T04:21:44.627

我遇到了与 OP 类似的问题，`num`我的一个库何时返回了一个数字答案，其实现细节被遗忘了：

```
>>> num
-4132.56528214700
>>> u'{0:.4g}'.format(num)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: Unknown format code 'g' for object of type 'unicode' 
```

我真的很困惑，因为它的`num` *行为*就像一个浮点数，但是在测试了@Bakuriu 的解决方案之后，我发现它不是一个浮点数：

```
>>> type(num)
<class 'sympy.core.numbers.Float'> 
```

所以@Bakuriu 的解决方案对我来说是正确的：

```
>>> u'{0:.4g}'.format(float(num))
u'-4133' 
```

因此，错误可能是由于类型显示/计算类似于但不是真正的浮点数。

# vba - vba ms word表格行问题

> ID：15924893
> 
> 赞同：0
> 
> 时间：2013-04-10T11:44:36.100
> 
> 标签：vba, ms-word

大家好，我有一个问题：

我有一个表单，用户可以在其中添加将传递给 ms word 表的行

1.  当我循环浏览所有表单以添加行时，我调用函数
2.  我将新行插入到我的 MS WORD 文档中的表中（来自模板）
3.  当我尝试向单元格添加文本时，它只向第一行添加文本！

我就是这样做的：

```
Dim frame As Control
For Each frame In fillForm.MultiPage1.Pages(2).Controls
    If TypeOf frame Is msforms.frame Then tablerowadd frame.Controls("krsName").Value, frame.Controls("krsMark").Value
Next frame

Public Function tablerowadd(krsName As String, krsmark As String) As Boolean
  krsRow = krsRow + 1
  With ActiveDocument.Tables(1)
     .Rows.Add
     .Cell(krsRow, 1).Range.Text = krsName
     .Cell(krsRow, 2).Range.Text = krsmark 
  End With
End Function 
```

krsRow 是一个公共整数变量。

谁能告诉我我做错了什么？
当我调试时，我得到了`krsRow = 2,3,4`等等。
但`.Cell(krsRow, 2).Range.Text = krsmark`总是将文本添加到第一行。
请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:29:00.647

因此，这很容易，您需要在插入文本时参考最后一行。因此将函数的内部部分更改为：

```
 .Cell(.Rows.Count, 1).Range.Text = krsName
 .Cell(.Rows.Count, 2).Range.Text = krsmark 
```

结果，您的输入转到表格的最后一行。如果你改变了，你就不需要使用你的`krsRow`变量

# c# - 不通过 UI 取消 Propertygrid 的编辑器集合

> ID：15924894
> 
> 赞同：1
> 
> 时间：2013-04-10T11:44:39.710
> 
> 标签：c#, propertygrid, collectioneditor

我看到为了取消集合编辑器需要设置类型如下：

```
public class MyCollectionEditor : CollectionEditor
{
    public MyCollectionEditor(Type type)
        : base(type)
    {
    }

    public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
    {
        return UITypeEditorEditStyle.None;
    }
} 
```

并像这样使用它：

```
[Editor(typeof(MyCollectionEditor), typeof(System.Drawing.Design.UITypeEditor))]
public class MyCollection : CollectionBase, ICustomTypeDescriptor
{
    //...
} 
```

您可以在以下链接中找到它（回答 Alan Seedhouse 的问题）：

**[在 PropertyGrid 中自定义显示集合数据](http://www.codeproject.com/Articles/4448/Customized-display-of-collection-data-in-a-Propert?msg=3253299#xx3253299xx)**

我的问题是我没有`MyCollection.cs`在 UI 中定义（但在类库中），因此我不能从`CollectionEditor`.

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:02:55.360

最后它像这样工作：

```
public class MyCollectionEditor : UITypeEditor
{ 
    public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
    {
        return UITypeEditorEditStyle.None;
    }
} 
```

# java - 比较Java中类的两个实例

> ID：15924899
> 
> 赞同：3
> 
> 时间：2013-04-10T11:44:48.213
> 
> 标签：java

我有一个有两个整数成员的类。这些成员是块和偏移量。我需要比较这个类的两个实例与大或小符号。例如;

```
instance1 < instance2 
```

语句需要返回 true if

```
instance1.blockNumber < instance2.blockNumber; 
```

或者

```
instance1.blockNumber = instance2.blockNumber;
instance1.offset < instance2.offset; 
```

据我所知，Java 不支持运算符重载。我怎么能做这样的比较？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T11:46:41.933

让类实现`Comparable`提供`compareTo`方法的接口。然后，您可以在 if 语句中使用数字的值（`-1`for less、`1`for more、`0`for equals）。

如果您想将这些对象放入列表中（例如，用于排序），您也应该`@Override`使用该`.equals`方法。

```
import java.util.Comparable;

public class BlockOffset implements Comparable<BlockOffset>
{
  private int blockNumber;
  private int offset;

  @Override
  public int compareTo(BlockOffset instance2) {
    if (this.blockNumber < instance2.blockNumber) return -1;
    if (this.blockNumber > instance2.blockNumber) return 1;
    if (this.offset < instance2.offset) return -1;
    if (this.offset > instance2.offset) return 1;

    return 0;
  }   
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T11:46:38.403

如果类类型是您自己的代码，那么您可以让它实现`Comparable`并定义`compareTo`您可以编写逻辑的方法。然后，您可以使用`compareTo`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:47:41.720

您可以实施和使用`comparable`或`comparator`

# postgresql - 从函数返回的自定义类型的意外行为

> ID：15924900
> 
> 赞同：1
> 
> 时间：2013-04-10T11:44:49.623
> 
> 标签：postgresql, syntax, types, plpgsql, postgresql-9.2

我创建了一个自定义类型

```
CREATE TYPE rc_test_type AS (a1 bigint); 
```

和一个函数

```
CREATE OR REPLACE FUNCTION public.rc_test_type_function(test_table character varying, dummy integer)
  RETURNS rc_test_type AS
$BODY$ 
    DECLARE
    ret rc_test_type;
    query  text;
    BEGIN
    query := 'SELECT count(*) from '  || test_table    ;
    EXECUTE query into ret.a1;  
    RETURN ret;
END $BODY$
  LANGUAGE plpgsql VOLATILE 
```

如果我跑

```
SELECT * FROM rc_test_type_function('some_table', 1); 
```

我明白了

```
"a1"
1389 
```

到目前为止，一切都很好。

如果我跑

```
SELECT p FROM (SELECT rc_test_type_function('some_table', s.step) AS p 
FROM  some_other_table s) foo; 
```

我明白了

```
"p"
"(1389)"
"(1389)" 
```

因为 'some_other_table' 只有两条记录。美好的。

但是如果我尝试

```
SELECT p.a1 FROM (select rc_test_type_function('some_table', s.step) AS p
FROM some_other_table s) foo; 
```

我得到错误

> 表»p«的子查询中缺少 FROM 子句条目

我觉得很奇怪，因为子查询没有改变。

两个问题：

1.  谁能解释发生了什么？
2.  如何`a1`从返回的数组中提取字段值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:10:40.047

**在复合类型**周围使用**括号**：

 **```
SELECT **(**p**)**.a1
FROM   (SELECT rc_test_type_function('some_table', s.step) AS p
        FROM   some_other_table s
       ) foo;
```

即使您的类型只有一列，它仍然是复合类型 - 具有自己的列名。没有多大意义，但这就是你构建它的方式。
（您可能只想使用简单类型或 a[`DOMAIN`](http://www.postgresql.org/docs/current/interactive/sql-createdomain.html)代替。）

在这里引用[手册](http://www.postgresql.org/docs/current/interactive/sql-expressions.html#FIELD-SELECTION)：

> `(compositecol).somefield`
> `(mytable.compositecol).somefield`
> 
> 此处需要括号来显示这`compositecol`是列名而不是表名，或者`mytable`在第二种情况下是表名而不是模式名。

### 适当的功能

省略复合类型的部分，你的函数会*更安全、更简单、更快*：

```
CREATE OR REPLACE FUNCTION foo(test_table varchar, dummy int, OUT p bigint)
  AS
$func$ 
BEGIN
   EXECUTE format('SELECT count(*) from %I', test_table)  -- !avoid SQLi!
   INTO p;  
END
$func$ LANGUAGE plpgsql; 
```

*   使用动态 SQL 避免 SQL 注入！
*   在这种情况下，[`OUT`参数](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)简化了语法。您根本不需要`DECLARE`子句，也不`RETURN`需要

### 甚至更好

```
CREATE OR REPLACE FUNCTION foo(test_table regclass, dummy int, OUT p bigint)
  AS
$func$ 
BEGIN
   EXECUTE 'SELECT count(*) from ' || test_table
   INTO p;  
END
$func$ LANGUAGE plpgsql; 
```

*   通过使用[对象标识符`regclass`](http://www.postgresql.org/docs/current/interactive/datatype-oid.html)，这也适用于模式限定的表名。并且 SQLi 是*不可能*开始的。如果表名非法，该函数将立即失败，并在转换为`text`自动时自动引用。**

# c# - 在端口 5000 上托管 WCF 服务。从另一台 PC 连接

> ID：15924901
> 
> 赞同：0
> 
> 时间：2013-04-10T11:44:51.817
> 
> 标签：c#, .net, wcf, tcp, wcf-hosting

基本上，我有一个完成的程序，它连接到一个托管多个服务的控制台应用程序。我需要做的是让我的客户端在一台 PC 上，而我的主机在另一台主机上托管所有服务。但是我不确定这将如何工作。

目前我的主机的配置文件是

```
 <

?xml version="1.0" encoding="utf-8" ?>
    <configuration>

      <system.web>
       <compilation debug="true" />
  </system.web>
  <!-- When deploying the service library project, the content of the config file must be added to the host's 
  app.config file. System.Configuration does not support config files for libraries. -->
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="BasicHttpBinding_IReportService" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="BasicHttpBinding_IFuelSupplyService" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
      <wsHttpBinding>
        <binding name="WSHttpBinding_IPostoPumpService" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
          maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text"
          textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00"
            enabled="false" />
          <security mode="Message">
            <transport clientCredentialType="Windows" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="Windows" negotiateServiceCredential="true"
              algorithmSuite="Default" />
          </security>
        </binding>
        <binding name="WSHttpBinding_IService1" closeTimeout="00:01:00"
          openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
          bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
          maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text"
          textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
            maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00"
            enabled="false" />
          <security mode="Message">
            <transport clientCredentialType="Windows" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="Windows" negotiateServiceCredential="true"
              algorithmSuite="Default" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:8732/Design_Time_Addresses/PumptoPosService/Service1/"
        binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IPostoPumpService"
        contract="PumpPosClient.IPostoPumpService" name="WSHttpBinding_IPostoPumpService">
        <identity>
          <dns value="localhost" />
        </identity>
      </endpoint>
      <endpoint address="http://localhost:8732/Design_Time_Addresses/ServerService/Service1/"
        binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IService1"
        contract="Server.IService1" name="WSHttpBinding_IService1">
        <identity>
          <dns value="localhost" />
        </identity>
      </endpoint>
      <endpoint address="http://08346.net.dcs.hull.ac.uk/services/ReportService.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IReportService"
        contract="ReportServer.IReportService" name="BasicHttpBinding_IReportService" />
      <endpoint address="http://08346.net.dcs.hull.ac.uk/services/FuelSupplyService.svc"
        binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IFuelSupplyService"
        contract="PricingServer.IFuelSupplyService" name="BasicHttpBinding_IFuelSupplyService" />
    </client>
    <services>
      <service name="PumptoPosService.PostoPumpService">
        <endpoint address="" binding="wsHttpBinding" contract="PumptoPosService.IPostoPumpService">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/PumptoPosService/Service1/" />
          </baseAddresses>
        </host>
      </service>
      <service name="ServerService.Service1">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Design_Time_Addresses/ServerService/Service1/" />
          </baseAddresses>
        </host>
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address="" binding="wsHttpBinding" contract="ServerService.IService1">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <!-- Metadata Endpoints -->
        <!-- The Metadata Exchange endpoint is used by the service to describe itself to clients. -->
        <!-- This endpoint does not use a secure binding and should be secured or removed before deployment -->
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="True"/>
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>

</configuration> 
```

有任何想法吗？如果可能的话，有没有办法在运行时配置它，所以如果它是本地的，使用 localhost，否则连接到端口 5000 上的主机

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:48:24.930

您需要编写一个[自定义`ServiceHostFactory`](http://msdn.microsoft.com/en-us/library/aa702697.aspx). 这将允许您在服务实例化时注入服务端点地址（和端口）。这篇[优秀的博客文章](http://blogs.msdn.com/b/carlosfigueira/archive/2011/06/14/wcf-extensibility-servicehostfactory.aspx)详细描述了您需要做的事情。

# c# - MVC 潜在危险 Request.QueryString 值

> ID：15924905
> 
> 赞同：1
> 
> 时间：2013-04-10T11:45:07.953
> 
> 标签：c#, asp.net-mvc, urlencode

我在页面上有搜索字段。当我尝试按`<`所有工作正常搜索时。但是，如果尝试搜索`<!`它会失败。我有简单的控制器方法：

```
[ValidateInput(false)]
public ActionResult Index(string filter)
{
    var items = data.GetItems(filter);
    var listViewModel = ListViewModel(items)
    return View(listViewModel);
} 
```

**当视图返回时，最后**一行代码发生异常。

升级版：

我的观点是相当大的。在这个视图中，我使用 WebGrid。所以在调试应用程序在这一行失败：

```
var gridHtml = grid.GetHtml(
            tableStyle: "grid",
            headerStyle: "header",
            footerStyle: "footer",
            alternatingRowStyle: "alternative",
            columns: Model.Columns,
            numericLinksCount: Model.NumericLinksCount,
            mode: WebGridPagerModes.All

            ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T21:09:39.190

客户端编码和服务器端解码解决了我的问题，但我仍然不确定这是否更好。

# java - 如何解决不正确的资源关闭或释放问题

> ID：15924911
> 
> 赞同：0
> 
> 时间：2013-04-10T11:45:23.597
> 
> 标签：java, security, veracode

我提交了 Veraocode 安全测试工具的代码，我在下面的代码中得到了这个不正确的资源关闭或释放：

```
//This function is used to print trace in the in the LogFile for debugging purpose  
PrintWriter f;  
            try {  
                f = new PrintWriter(new BufferedWriter(new FileWriter(fileName,true)));//issue at this line  
                synchronized(this) {  
                    f.println(new StringBuffer(dateString).append("<").append(Thread.currentThread().getName()).append(">").append(traceLog).toString());  
                }  
                f.close();  
                checkFileSize();  
            }catch(IOException e){    
                e.printStackTrace();  
            } 
```

有人请帮我解决这个问题...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:46:34.513

You need to close your PrintWriter.

```
f.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:56:24.117

```
 try {  
            f = new PrintWriter(new BufferedWriter(new FileWriter(fileName,true)));//issue at this line  
            synchronized(this) {  
                f.println(new StringBuffer(dateString).append("<").append(Thread.currentThread().getName()).append(">").append(traceLog).toString());  
            }  

            checkFileSize();  
        }catch(IOException e){    
            e.printStackTrace();  
        } finally {
             if (f != null) {
                 f.close();
             }
        } 
```

资源应该在 finally 子句中关闭。这样他们肯定会被处决。因为如果你把关闭代码放在 try 中，并且在关闭行之前会发生一些异常。资源未正确关闭。

此外，如果您使用的是 JDK-7，请查看 try-with-resources。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T07:21:14.673

您还需要在 catch 块中关闭 PrintWriter 或创建 finally 块并关闭资源。

```
}catch(IOException e){    
e.printStackTrace();
f.close();
} 
```

或者

```
finally {
if (f != null) {
f.close();
}
} 
```

# php - Wordpress 搜索 - 错误 324 (net::ERR_EMPTY_RESPONSE)

> ID：15924915
> 
> 赞同：0
> 
> 时间：2013-04-10T11:45:36.040
> 
> 标签：php, wordpress, search, error-handling

我已经开始在基于 wordpress 的项目中遇到问题。这个问题很奇怪。

这是描述：当我在网站上搜索任何不以字母开头`d`的内容时，它工作正常 - 但是当搜索以字母开头的任何内容时，`d`我得到了这个`Error 324 (net::ERR_EMPTY_RESPONSE)`。

我一直在搜索很多东西，但找不到任何相关的东西。我什至使用 wordpress 查询类从头开始重新制作搜索代码，但仍然无法正常工作。

它在所有浏览器中都发生在我身上，所以我不认为这是与浏览器相关的问题。我还尝试在其他几个网络中进行搜索，甚至更改了路由器上的一些设置，但没有成功。

该网站的网址是：[http://www.estanaweb.com.br/](http://www.estanaweb.com.br/)

大多数用户尝试并失败的最常用的搜索词是“dudalina”，这是网址：[http](http://www.estanaweb.com.br/?s=dudalina) ://www.estanaweb.com.br/?s=dudalina ，如果我尝试仅搜索“udalina”，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:49:18.967

您的问题的一种解决方案非常简单，您只需在搜索词前添加空格字符。Wordpress 将删除它以进行搜索，因此您实际上搜索与没有搜索相同，但您不会遇到超时问题。

自己尝试一下：

*   [`http://www.estanaweb.com.br/?s=%20dudalina`](http://www.estanaweb.com.br/?s=%20dudalina)

对于修补程序，我建议您在服务器配置中放置一个重写规则，该规则会在此处自动透明地添加空格字符。

顺便说一句，对我来说，我在浏览器中遇到的原始错误是：

> 错误 103 (net::ERR_CONNECTION_ABORTED)：未知错误。

# iphone - 如何写入 AppName-Info.plist

> ID：15924921
> 
> 赞同：1
> 
> 时间：2013-04-10T11:45:44.617
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我手动向我的 AppName-Info.plist 添加了一个名为“App”的键，我可以通过调用此代码从中获取值

```
NSBundle *mainBundle;
mainBundle = [NSBundle mainBundle];

NSString *value = [mainBundle objectForInfoDictionaryKey:@"App"];

NSLog(@"App: %@",value); 
```

但我不能做的是用任何代码改变值..有可能吗？如果是的话怎么做？

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T11:53:51.610

你应该考虑[NSUserDefaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)或者如果你想修改一个捆绑的 .plist 试试这个。

```
 NSString* plistFilePath = nil;
NSFileManager* manager = [NSFileManager defaultManager];
if ((plistFilePath = [[[NSBundle mainBundle] bundlePath] stringByAppendingPathComponent:@"mySpecial/PathTo.plist"])) 
{
    if ([manager isWritableFileAtPath:plistFilePath]) 
    {
        NSMutableDictionary* infoDictioio = [NSMutableDictionary dictionaryWithContentsOfFile:plistFilePath];
        [infoDictio setObject:@"foo object" forKey:@"fookey"];
        [infoDictio writeToFile:plistFilePath atomically:NO];
        [manager setAttributes:[NSDictionary dictionaryWithObject:[NSDate date] forKey:NSFileModificationDate] ofItemAtPath:[[NSBundle mainBundle] bundlePath] error:nil];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:50:17.817

您不应在运行时修改您的应用程序 Info.plist 文件（或应用程序包中的任何内容）。这是不好的做法，还会破坏您的捆绑代码签名（这将导致无法再启动应用程序！）。

如果你想存储设置，你应该看看[NSUserDefaults](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T11:52:39.300

这是不可能的。

默认情况下，AppName-Info.plist 不会在构建的 Copy Bundle Resources 阶段复制到包中。

因此，如果您想拥有一个可以写入选项的 plist，则可以在运行时在临时文件位置创建它并在那里读/写它。

[这](http://www.cocoawithlove.com/2009/07/temporary-files-and-folders-in-cocoa.html)是研究如何做到这一点的好地方。

# opengl - 如何制作一个球形的广告牌

> ID：15924924
> 
> 赞同：0
> 
> 时间：2013-04-10T11:45:52.797
> 
> 标签：opengl, 3d, directx, glsl, opentk

跟随这个教程[在这里](http://ogldev.atspace.co.uk/www/tutorial27/tutorial27.html)

我设法创建了一个圆柱形广告牌（它利用几何着色器获取点并生成四边形）。问题是，当我移动相机使其高于广告牌（使用 gluLookat）时，广告牌不会旋转以真正面对相机（好像它是一个圆柱形广告牌）。

怎么弄成球形？

如果有人感兴趣，这里是稍微修改的几何着色器代码：

```
#version 330
//based on a great tutorial at http://ogldev.atspace.co.uk/www/tutorial27/tutorial27.html

layout (points) in;
layout (triangle_strip) out;
layout (max_vertices = 4) out;

uniform mat4 mvp;
uniform vec3 cameraPos;

out vec2 texCoord;

void main(){
    vec3 pos = gl_in[0].gl_Position.xyz;
    pos /= gl_in[0].gl_Position.w; //normalized device coordinates
    vec3 toCamera = normalize(cameraPos - pos);
    vec3 up = vec3(0,1,0);
    vec3 right = normalize(cross(up, toCamera)); //right-handed coordinate system
    //vec3 right = cross(toCamera, up); //left-handed coordinate system

    pos -= (right*0.5);
    gl_Position = mvp*vec4(pos,1.0);
    texCoord = vec2(0,0);
    EmitVertex();

    pos.y += 1.0;   
    gl_Position = mvp*vec4(pos,1.0);
    texCoord = vec2(0,1);
    EmitVertex();

    pos.y -= 1.0;   
    pos += right;
    gl_Position = mvp*vec4(pos,1.0);
    texCoord = vec2(1,0);
    EmitVertex();

    pos.y += 1.0;       
    gl_Position = mvp*vec4(pos,1.0);
    texCoord = vec2(1,1);
    EmitVertex();
} 
```

编辑：正如我之前所说，我尝试过将 3,3-submatrix 设置为身份的方法。我可能已经解释了错误的行为，但是这个 gif 应该做得更好： ![这就是我的意思](https://i.stack.imgur.com/13m9d.gif)

在上图中，相机使用标识子矩阵方法与广告牌（红色）一起旋转。但是，广告牌不应穿过表面（白色），它应该保持正确的位置并始终位于表面的一侧，这不会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:14:17.093

创建广告牌的另一种方法是将几何着色器扔掉并像这样手动进行：

```
Vector3 DiffCamera = Billboard.position - Camera.position;
Vector3 UpVector   = new Vector3(0.0f, 1.0f, 0.0f);

Vector3 CrossA     = DiffCamera.cross(UpVector).normalize(); // (Step A)
Vector3 CrossB     = DiffCamera.cross(CrossA).normalize();   // (Step B)

// now you can use CrossA and CrossB and the billboard position to calculate the positions of the edges of the billboard-rectangle

// like this
Vector3 Pos1 = Billboard.position + CrossA + CrossB;
Vector3 Pos2 = Billboard.position - CrossA + CrossB;
Vector3 Pos3 = Billboard.position + CrossA - CrossB;
Vector3 Pos4 = Billboard.position - CrossA - CrossB; 
```

我们在步骤 A 中计算叉积，因为我们想要广告牌的水平对齐方向。

在步骤 B 中，我们针对垂直方向执行此操作。

为场景中的每个广告牌执行此操作。

或更好的几何着色器（只是尝试）

```
vec3 pos = gl_in[0].gl_Position.xyz;
pos /= gl_in[0].gl_Position.w; //normalized device coordinates
vec3 toCamera = normalize(cameraPos - pos);
vec3 up = vec3(0,1,0);
vec3 CrossA = normalize(cross(up, toCamera));
vec3 CrossB = normalize(cross(CrossA, toCamera));

// set coordinates of the 4 points 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:47:54.093

Just reset the top left 3×3 subpart of the modelview matrix to identity, leaving the 4th column and row as it is, i.e.:

```
1 0 0 …
0 1 0 …
0 0 1 …
… … … … 
```

### *UPDATE* World space axis following billboards

The key insight into efficiently implementing aligned billboards is to realize how they work in view space. By definition the normal vector of a billboard in view space is Z = (0, 0, 1). This leaves only one free parameter, namely the rotation of the billboard around this axis. In a view aligned billboard the billboard right and up axes are merely forced to be view X and Y. This is what setting the upper left 3×3 of the modelview matrix does.

Now when we want the billboard be aligned to a certain axis within the scene yet still face the viewer, the only parameter we can vary is the billboards rotation. For this we do the following:

In world space we choose an axis that should be the up axis of the billboard. Note that if the viewing axis is parallel to the billboard up axis the following steps become singular, i.e. the rotation of the billboard is undefined. You have to deal with this in some way, that I leave undefined here.

This chosen axis we bring into view space. Now an axis is the same kind of thing like a normal, i.e. a direction, so we transform it the same way as we do with normals. We transform it by the inverse transpose of the modelview matrix as you to with normals; note that since we defined the axis in world space, we need to actually use the inverse transpose of the world to view transformation matrix then.

The transformed major axis of the billboard is now in view space. Next step is to orthogonalize it to the viewing direction. For this you use the Gram-Schmidt method. Now we got the Z and the Y column of the billboard transform. Remains the X column, which we get by taking the cross product of the Z with the Y column.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T09:22:16.443

如果有人想知道我是如何解决这个问题的。
我的解决方案基于 Quonux 的回答，唯一的问题是当相机正上方时广告牌会旋转得非常快（当`up`矢量几乎平行于相机外观矢量时）。这种奇怪的行为是使用叉积来查找`right`向量的结果：当相机悬停在广告牌的顶部时，叉积会改变它的符号，`right`向量的方向也会改变。这就解释了发生的旋转。
所以我所需要的就是`right`使用其他方式找到一个向量。因为我知道相机的旋转角度（水平和垂直），我决定用它来找到一个`right`向量：

```
rotatedRight = Vector4.Transform(unRotatedRight, Matrix4.CreateRotationY((-alpha))); 
```

和几何着色器：

```
...
uniform vec3 rotRight;
uniform vec3 cameraPos;

out vec2 texCoord;

void main(){

vec3 pos = gl_in[0].gl_Position.xyz;
pos /= gl_in[0].gl_Position.w; //normalized device coordinates
vec3 toCamera = normalize(cameraPos - pos);

vec3 CrossA = rotRight;
... (Continues as Quonux's code) 
```

# android - 测试互联网连接变化-android

> ID：15924926
> 
> 赞同：1
> 
> 时间：2013-04-10T11:45:58.657
> 
> 标签：android, android-intent, connection, android-networking

我已经搜索了这个，但我无法解决问题，请查看在其他示例中检查的此代码：

```
public class EntryActivity extends Activity {

public Boolean isNetAvailable(Context con)  {

    try{
        ConnectivityManager connectivityManager = (ConnectivityManager)       
                                                                  con.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo wifiInfo = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        NetworkInfo mobileInfo =connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);
        if (wifiInfo.isConnected() || mobileInfo.isConnected()) {
            return true;
        }
    }
    catch(Exception e){
       e.printStackTrace();
    }
    return false; 
```

**当我在onCreate**方法中调用它时，此方法效果很好，如下所示：

```
if (isNetAvailable(getApplicationContext())) {
        Toast.makeText(EntryActivity.this,
            "You have Internet Connection, wait a moment to sincronize" +
            "Metar's stations", Toast.LENGTH_LONG)
               .show();
         Intent myIntent = new Intent(this, MainActivity.class);
         startActivity(myIntent);

    } else {
        Toast.makeText(EntryActivity.this,
            "You Do not have Internet Connection",
                Toast.LENGTH_LONG).show();

        EntryActivity.this.startActivity(new Intent(
                Settings.ACTION_WIRELESS_SETTINGS));
            } 
```

这仅适用于第一次 Internet 连接检查！问题是，如果 Wifi 关闭，用户应该离开应用程序或打开 Wi-Fi。但是，如果他打开它，我将无法访问该更改，也无法进行其他活动。因此，如果在开始时互联网连接状态已关闭，我想继续检查用户是否将其打开以推进其他活动。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:49:49.807

您无需通过定期执行代码来不断检查 Internet 连接更改。相反，您需要在应用程序中定义广播接收器来监听网络变化。

查看此答案 [如何在 Android 中监控网络连接状态？](https://stackoverflow.com/questions/3307237/how-can-i-monitor-the-network-connection-status-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:50:28.567

在你的 android 清单中：

```
<receiver android:name="com.softteco.clivero.receivers.ConnectionReceiver" >
                <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
            </intent-filter>
        </receiver> 
```

并创建类：

```
public class ConnectionReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        boolean newConnectionState = isConnected(context);
    }
    private boolean isConnected(Context context) {
        ConnectivityManager connectivityManager = (ConnectivityManager) context.getApplicationContext().getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo[] info = connectivityManager.getAllNetworkInfo();
        boolean ifConnected = false;
        for (int i = 0; i < info.length; i++) {
            NetworkInfo connection = info[i];
            if (connection.getState().equals(NetworkInfo.State.CONNECTED)) {
                ifConnected = true;
            }
        }
        return ifConnected;
    }

} 
```

这是可能的变体之一。希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:53:41.630

这可以帮助您监控网络连接 Wi-Fi、GPRS、UMTS 等

```
public boolean isNetworkAvailable(Context context)
    {
        ConnectivityManager manager = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo info = manager.getActiveNetworkInfo();
        return info!=null;
    } 
```

还要确保您在`Manifest`文件中添加了需要权限，例如

```
 <uses-permission android:name="android.permission.INTERNET" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" >
    </uses-permission>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" >
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" >
    </uses-permission> 
```

# c# - PRISM：如何将视图模型添加到区域并自动创建视图？

> ID：15924930
> 
> 赞同：2
> 
> 时间：2013-04-10T11:46:07.800
> 
> 标签：c#, wpf, mvvm, prism

我是 PRISM 的新手，正在尝试一些事情。我在 MVVM 上有点挣扎。

将视图与视图模型“连接”的方式很明确：

*   通过统一注入，或

*   手动设置数据上下文 (ServiceLocator)

如果我将视图添加到区域（视图模型是自动创建的），一切正常。但这不是用例。

让我们看一下这个例子：

```
public class MyViewModel : NotificationObject
{
   public ObservableCollection<AnotherViewModel> OrderModel { get; private set; }
} 
```

我必须创建视图模型并将它们添加到集合中。此视图模型必须在区域 (OrderRegion) 中显示 (AnotherView)。我的问题是，当我将视图模型添加到区域时，现在如何创建视图。该区域是一个 TabControl，因此可能会发生必须显示不同视图的情况。

我已经查看了 PRISM 快速入门和 StockTrader 示例。我正在寻找的是非常相似的

```
 virtual protected void StartOrder(string tickerSymbol, TransactionType transactionType)
    {
        if (String.IsNullOrEmpty(tickerSymbol))
        {
            throw new ArgumentException(string.Format(CultureInfo.CurrentCulture, Resources.StringCannotBeNullOrEmpty, "tickerSymbol"));
        }
        this.ShowOrdersView();

        IRegion ordersRegion = _regionManager.Regions[RegionNames.OrdersRegion];

        var orderCompositeViewModel = ServiceLocator.Current.GetInstance<IOrderCompositeViewModel>();

        orderCompositeViewModel.TransactionInfo = new TransactionInfo(tickerSymbol, transactionType);
        orderCompositeViewModel.CloseViewRequested += delegate
        {
            OrderModels.Remove(orderCompositeViewModel);
            commandProxy.SubmitAllOrdersCommand.UnregisterCommand(orderCompositeViewModel.SubmitCommand);
            commandProxy.CancelAllOrdersCommand.UnregisterCommand(orderCompositeViewModel.CancelCommand);
            commandProxy.SubmitOrderCommand.UnregisterCommand(orderCompositeViewModel.SubmitCommand);
            commandProxy.CancelOrderCommand.UnregisterCommand(orderCompositeViewModel.CancelCommand);
            ordersRegion.Remove(orderCompositeViewModel);
            if (ordersRegion.Views.Count() == 0)
            {
                this.RemoveOrdersView();
            }
        };

        ordersRegion.Add(orderCompositeViewModel);
        OrderModels.Add(orderCompositeViewModel);

        commandProxy.SubmitAllOrdersCommand.RegisterCommand(orderCompositeViewModel.SubmitCommand);
        commandProxy.CancelAllOrdersCommand.RegisterCommand(orderCompositeViewModel.CancelCommand);
        commandProxy.SubmitOrderCommand.RegisterCommand(orderCompositeViewModel.SubmitCommand);
        commandProxy.CancelOrderCommand.RegisterCommand(orderCompositeViewModel.CancelCommand);

        ordersRegion.Activate(orderCompositeViewModel);
    } 
```

视图模型在代码内部创建并添加到区域中。整个类型 regestring 是通过“ViewExportAttribute”发生的，因此更难理解其背后的模式。

编辑：

我找到了一种手动执行此操作的方法，但它不是很好：

```
var view = (FrameworkElement) ServiceLocator.Current.GetInstance<AnotherView>();
var model = ServiceLocator.Current.GetInstance<AnotherViewModel>();
view.DataContext = model;

regionManager.Regions["OrderRegion"].Add(view, null, true);
regionManager.Regions["OrderRegion"].Activate(view); 
```

罗马

编辑2：

嗨，对不起，我可能不够清楚。

我的目标是创建一个视图模型，然后像上面的 StockTrader 示例中那样对其进行配置：订阅事件、命令等。之后我想将此视图模型添加到该区域，以便它可以显示。该区域可能是一个选项卡控件，其中显示具有不同视图模型的不同视图。顺序是：

1.  在控制器类中创建视图模型
2.  配置视图模型
3.  将视图模型添加到控制器内的本地集合
4.  将视图模型添加到区域

我一直在寻找的缺失部分是如何实现它，即视图是使用绑定等所有内容“自动”创建的。我在本文中找到了一种方法（[http://www.codeproject.com/Articles /229931/了解-MVVM-Using-PRISM-by-Hello-World-Silverl](http://www.codeproject.com/Articles/229931/Understand-MVVM-Using-PRISM-by-Hello-World-Silverl)）。我必须为视图和视图模型（IAnotherViewModel、IAnotherView）创建自己的接口。

另一种方法可以在这里找到：http: [//paulstovell.com/blog/viewmodel-first-prism](http://paulstovell.com/blog/viewmodel-first-prism)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T13:35:14.853

有什么理由不为此使用隐式`DataTemplates`？

它们`DataTemplates`定义了一个`DataType`属性，但不是一个`Key`属性，并且在 WPF 尝试绘制指定 DataType 的对象时使用它们

例如，

```
<TabControl ItemsSource="{Binding MyViewModelCollection}"
            SelectedItem="{Binding SelectedViewModel}">
    <!-- This could also go elsewhere, like Application.Resources -->
    <TabControl.Resources>
        <DataTemplate DataType="{x:Type local:ViewModelA}">
            <local:ViewA />
        </DataTemplate>
        <DataTemplate DataType="{x:Type local:ViewModelB}">
            <local:ViewB />
        </DataTemplate>
    </TabControl.Resources>
</TabControl> 
```

如果`TabControl`正在显示类型的对象`ViewModelA`，它将使用 绘制它`ViewA`，如果它正在显示`ViewModelB`，它将使用绘制它`ViewB`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T12:32:44.700

如果您使用的是 MEF，那么您可以使用属性自动注册视图：

```
/*YOUR VIEW*/
    [ExportViewToRegion("MyView", "MyRegion")]
        [Export(typeof(MyView))]
        public partial class MyView : UserControl
        { 
         ....
        }

/*IMPLEMENTATION*/

   public interface IExportViewToRegionMetadata
    {
         string ViewName { get; }
         string TargetRegion { get; }
    }

    [MetadataAttribute]
    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Property, AllowMultiple = false)]
    public class ExportViewToRegionAttribute : ExportAttribute
    {
        public ExportViewToRegionAttribute(string viewName, string targetRegion)
            : base(typeof(UserControl))
        {
            ViewName = viewName;
            TargetRegion = targetRegion;
        }

        public string ViewName { get; private set; }
        public string TargetRegion { get; private set; }
    }

    [Export(typeof(IFluentRegionManager))]
    public class FluentRegionManager : IFluentRegionManager, IPartImportsSatisfiedNotification
    {
        public IRegionManager RegionManager { get; set; }

        [ImportingConstructor]
        public FluentRegionManager(IRegionManager regionManager)
        {
            RegionManager = regionManager;
        }

        /*This Import will find all views in the assembly with attribute [ExportViewToRegion("ViewName", "RegionName")]*/
        [ImportMany(AllowRecomposition = true)]
        public Lazy<UserControl, IExportViewToRegionMetadata>[] Views { get; set; }

        private readonly List<string> _processedViews = new List<string>();

        private Lazy<UserControl, IExportViewToRegionMetadata> _GetViewInfo(string viewName)
        {
            return (from v in Views where v.Metadata.ViewTypeForRegion.Equals(viewName) select v).FirstOrDefault();
        }

        public IExportViewToRegionMetadata this[string viewName]
        {
            get
            {
                return (from v in Views
                        where v.Metadata.ViewName.Equals(viewName, StringComparison.InvariantCultureIgnoreCase)
                        select v.Metadata).FirstOrDefault();
            }
        }

        public void ExportViewToRegion(string viewName)
        {

            if (viewName==null)
            {
                throw new ArgumentNullException("viewName");
            }

            var viewInfo = _GetViewInfo(viewName);

            string targetRegion;
            UserControl _view;

            if (viewInfo != null)
            {
                targetRegion = viewInfo.Metadata.TargetRegion;
                _view = viewInfo.Value;
            }

            if (string.IsNullOrEmpty(targetRegion) || _processedViews.Contains(viewName)) return;

            RegionManager.RegisterViewWithRegion(targetRegion,  _view.GetType());
            _processedViews.Add(viewName);
        }

        /*All required views has been discovered and imported */
        /*Loop true collection and register view with the region */
        public void OnImportsSatisfied()
        {
            foreach (var viewName in  from view in Views where !_processedViews.Contains(view.Metadata.ViewName) 
                select view.Metadata.ViewName)
            {
                ExportViewToRegion(viewName);
            }
        }
    }

/* finally call IFluentRegionManager import in the bootstrapper to kick off registration*/ 
```

# php - 谷歌日历功能在传递唯一 ID 后删除我的所有活动

> ID：15924940
> 
> 赞同：0
> 
> 时间：2013-04-10T11:46:34.297
> 
> 标签：php, google-calendar-api

Google 日历`delete function`会从 Google 日历中删除我的所有活动，我不知道为什么会这样。任何帮助，将不胜感激。我`deleteevent`在删除锚点中调用了函数。

```
$id = 'unique event id';

<a href="<?php $this->deleteevent($id);?>">Delete</a>    

function deleteevent()
{
    $cal->events->delete('primary', $id1) 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:34:01.563

您尚未使用传入事件定义您的函数，并且您对 google 的回调正在使用 $id1。

您需要将代码更改为有点像这样

```
$id = 'unique event id';

<a href="<?php deleteevent($id);?>">Delete</a>    

function deleteevent($inboundid)
{
    $cal->events->delete('primary', $inboundid) 
} 
```

但是，这在单击删除链接时不起作用，它只会在每次页面加载时执行该功能。您需要某种形式的事件来在链接单击时调用函数，无论是获取/发布还是 ajax 查询。

此外，除非所有这些代码都在一个类中，否则您不需要 $this-> 在那里。

# c# - Handle long touch events in ShinobiCharts

> ID：15924952
> 
> 赞同：1
> 
> 时间：2013-04-10T11:47:06.833
> 
> 标签：c#, xamarin.ios, shinobi

I'm using ShinobiCharts with Xamarin MonoTouch and I would like to allow my PieCharts to allow following features :
- on touch, highlight corresponding legend and show tooltip
- on long touch, reload chart data according to selected value.

SChartDelegate OnToggledSelection function handles the touch event, but is there a way to detect long touch event?

# javascript - 为什么我的点击没有按预期工作？

> ID：15924953
> 
> 赞同：2
> 
> 时间：2013-04-10T11:47:09.967
> 
> 标签：javascript, jquery, events, click

我只是试试这段代码：

```
$("#test").ready(function() {
    $(this).click(function() {
        alert('clicked!');
    });
}); 
```

在这里小提琴：http: [//jsfiddle.net/8bfqw/](http://jsfiddle.net/8bfqw/)

为什么当我在 div 之外单击时它仍然处于警报状态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T11:48:11.370

这是因为您的选择器`$(#test)`实际上`$(document)`来自[文档](http://api.jquery.com/ready/)：

> .ready() 方法只能在匹配当前文档的 jQuery 对象上调用

无论您在选择器中传递什么，它都会被忽略并在当前文档上工作。的简写版本`$(document).ready(function(){})`是`$(function(){});`你想要的：

```
$(function() {
    $('#test').click(function() {
        alert('clicked!');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:49:36.050

```
$("#test").ready(function() {
    $("#test").click(function() {
        alert('clicked!');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T11:51:25.160

```
$("#test").ready(function() {
    $("#test").click(function() {
         alert('clicked!');
     });
}); 
```

您必须将点击功能设置为测试对象，而不是整个文档 $(this)。

# android - 以什么顺序为 Button 执行 onClick 事件

> ID：15924959
> 
> 赞同：0
> 
> 时间：2013-04-10T11:47:19.333
> 
> 标签：android

我有 20 个按钮和 GridView 的 Activity。一键清除 GridView 和其他添加到 GridView 的不同值。有时我按下 1-Add、2-Clear、3-Add 但看到按钮 clear 变为按下（橙色）并执行 1-Add、2-Add、3-Clear。有时按钮清除被长时间按下，根本不回答，但其他按钮工作。这怎么可能？我的活动：

```
public class Smena extends Activity 
{
    public Nomenklatura Asortiment;
    GridView gvMain;
    GridView gvMain1;
    GridView gvMain2;
    ArrayAdapter<String> adapter;
    ArrayAdapter<String> adapter1;
    ArrayAdapter<String> adapter2;
    double Sum=0;
    String Sdacha;
    String filename="shops345";
    Boolean PushX=false;
    TextView tv1;
    void Save()
    {
        LocalPersistence.witeObjectToFile(this, Asortiment, filename);
    }
    public void myClickHandler(View target){
        Intent intent1;
        switch (target.getId()){
        case R.id.button1:
            ButtonOn (Asortiment.SmenaButName[0],Asortiment.SmenaButPrice[0]);
            break;
        case R.id.button10:
            ButtonOn (Asortiment.SmenaButName[9],Asortiment.SmenaButPrice[9]);
            break;
        case R.id.button11:
            ButtonOn (Asortiment.SmenaButName[10],Asortiment.SmenaButPrice[10]);
            break;
        case R.id.button12:
            ButtonOn (Asortiment.SmenaButName[11],Asortiment.SmenaButPrice[11]);
            break;
        case R.id.button13:
            ButtonOn (Asortiment.SmenaButName[12],Asortiment.SmenaButPrice[12]);
            break;
        case R.id.button14:
            ButtonOn (Asortiment.SmenaButName[13],Asortiment.SmenaButPrice[13]);
            break;
        case R.id.button15:
            ButtonOn (Asortiment.SmenaButName[14],Asortiment.SmenaButPrice[14]);
            break;
        case R.id.button16:
            intent1=new Intent(Smena.this,Napitki.class);
            Save();
            startActivity(intent1);
            break;
        case R.id.button17:
            intent1=new Intent(Smena.this,Zhevacki.class);
            Save();
            startActivity(intent1);
            break;
        case R.id.button18:
             intent1=new Intent(Smena.this,Dobavki.class);
            Save();
            startActivity(intent1);
            break;
        case R.id.button19:
             intent1=new Intent(Smena.this,Presmena.class);
            Save();
            startActivity(intent1);
            break;
        case R.id.button2:
            ButtonOn (Asortiment.SmenaButName[1],Asortiment.SmenaButPrice[1]);
            break;
        case R.id.button20:
            intent1=new Intent(Smena.this,Orp.class);
            Asortiment.data.clear();
            Asortiment.data1.clear();
            Save();
            startActivity(intent1);
            break;
        case R.id.button21:
            ButtonDel();
            break;
        case R.id.button22:
            clear();
            break;
        case R.id.button23:
            intent1=new Intent(Smena.this,Sdacha.class);

            Save();
            startActivity(intent1);
            break;
        case R.id.button25:
            clear();
        //  checkTv();
            break;
        case R.id.button3:
            ButtonOn (Asortiment.SmenaButName[2],Asortiment.SmenaButPrice[2]);
            break;
        case R.id.button4:
            ButtonOn (Asortiment.SmenaButName[3],Asortiment.SmenaButPrice[3]);
            break;
        case R.id.button41:
            if(PushX)
                buttonx(3);
                else buttonx(2);PushX=true;
            break;
        case R.id.button42:
            if(PushX)
                buttonx(4);
                else buttonx(3);PushX=true;
            break;
        case R.id.button43:
            if(PushX)
                buttonx(5);
                else buttonx(4);PushX=true;
            break;
        case R.id.button44:
            if(PushX)
                buttonx(6);
                else buttonx(5);PushX=true;
            break;
        case R.id.button45:
            if(PushX)
                buttonx(7);
                else buttonx(6);PushX=true;
            break;
        case R.id.button46:
            if(PushX)
                buttonx(8);
                else buttonx(7);PushX=true;
            break;
        case R.id.button5:
            ButtonOn (Asortiment.SmenaButName[4],Asortiment.SmenaButPrice[4]);
            break;
        case R.id.button6:
            ButtonOn (Asortiment.SmenaButName[5],Asortiment.SmenaButPrice[5]);
            break;
        case R.id.button7:
            ButtonOn (Asortiment.SmenaButName[6],Asortiment.SmenaButPrice[6]);
            break;
        case R.id.button8:
            ButtonOn (Asortiment.SmenaButName[7],Asortiment.SmenaButPrice[7]);
            break;
        case R.id.button9:
            ButtonOn (Asortiment.SmenaButName[8],Asortiment.SmenaButPrice[8]);
            break;
        }
    }
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.smena); 
        Intent i=getIntent();
        Asortiment=(Nomenklatura) LocalPersistence.readObjectFromFile(this, filename);
        adapter = new ArrayAdapter<String>(this, R.layout.item, R.id.tvText, Asortiment.data);
        adapter1 = new ArrayAdapter<String>(this, R.layout.item, R.id.tvText, Asortiment.data1);
        tv1=(TextView) findViewById(R.id.textView1);
        gvMain = (GridView) findViewById(R.id.gridView1);
        gvMain.setAdapter(adapter);
        gvMain1 = (GridView) findViewById(R.id.gridView11);
        gvMain1.setAdapter(adapter1);
        gvMain2 = (GridView) findViewById(R.id.gridView2);
        if(Asortiment.data2.size()<=0)  data2clear();
        if(i.getExtras().containsKey("Dobavki"))
        {
            ArrayList<String> DobavkiList=new ArrayList<String>();    
            DobavkiList=i.getExtras().getStringArrayList("Dobavki") ;
            for(String item : DobavkiList)
            {
                String Art=Asortiment.GetArtByName(item);
                String [] np=Asortiment.GetNamePriceByArt(Art);
                ButtonOn (np[0],np[1]);
            }   
          }
        if(i.getExtras().containsKey("Napitki"))
          {
            ArrayList<String> NapitkiList=new ArrayList<String>();    
            NapitkiList=i.getExtras().getStringArrayList("Napitki") ;
                for(String item : NapitkiList)
                {
                    String Art=Asortiment.GetArtByName(item);
                    String [] np=Asortiment.GetNamePriceByArt(Art);
                ButtonOn (np[0],np[1]);
                }
          }
        if(i.getExtras().containsKey("Zhevacki"))
          {
            ArrayList<String> ZhevackiList=new ArrayList<String>();   
            ZhevackiList=i.getExtras().getStringArrayList("Zhevacki") ;
                for(String item : ZhevackiList)
                {
                    String Art=Asortiment.GetArtByName(item);
                    String [] np=Asortiment.GetNamePriceByArt(Art);
                ButtonOn (np[0],np[1]);
                }   
          }
        Double sd;
        if(i.getExtras().containsKey("Sdacha"))
        {

            sd=Double.parseDouble(Asortiment.data2.get(1));  
            Sdacha=i.getExtras().getString("Sdacha");   
            sd=Double.parseDouble(Sdacha)-sd; 
      }
    else 
    {
        if(Asortiment.data2.size()>0)
        {   
            Sdacha=Asortiment.data2.get(3);
            sd=Double.parseDouble(Asortiment.data2.get(1));  
            if(Double.parseDouble(Asortiment.data2.get(3))>0)
            sd=Double.parseDouble(Asortiment.data2.get(3))-sd;
            else sd=(double) 0;
            }else {sd=(double) 0;Sdacha="0";}
    }
        Asortiment.data2.set(3, Sdacha);
        Asortiment.data2.set(5, sd.toString());
        adapter2 = new ArrayAdapter<String>(this, R.layout.item2, R.id.tvText, Asortiment.data2);
        gvMain2.setAdapter(adapter2);

    }
    void buttonx(int k){
        if(!Asortiment.LastButton.get(0).equals("0")){
        for (int i=0;i<k;i++){
            ButtonOn (Asortiment.LastButton.get(0),Asortiment.LastButton.get(1));
            }}
    }
    void checkTv()
    {
        Date dt1=new Date();
        if(dt1.getHours()>19 && Asortiment.LastRequest.getDay()<dt1.getDay() && (Calendar.DAY_OF_WEEK==2 ||Calendar.DAY_OF_WEEK==4 || Calendar.DAY_OF_WEEK==6))
        tv1.setText("ОТПРАВЬТЕ ЗАЯВКУ");
        else tv1.setText("");           
    }
     void clear()
        {
            Asortiment.data.clear();
            adapter.clear();
            Asortiment.data1.clear();
            adapter1.clear();
            data2clear();
        }

    void data2clear()
    {

        Asortiment.data2.set(1, "0");
        Asortiment.data2.set(3, "0");
        Asortiment.data2.set(5, "0");   
        gvMain2.setAdapter(adapter2);
    }

    private void ButtonDel()
    {
        int cnt=    Asortiment.data.size();
        if(cnt>0){
            Double d=Double.parseDouble(Asortiment.data2.get(1));//1
            d=d-Double.parseDouble(Asortiment.data1.get(cnt-1));
            Asortiment.data2.set(1, d.toString());
            //adapter2 = new ArrayAdapter<String>(this, R.layout.item2, R.id.tvText, Asortiment.data2);//1
            gvMain2.setAdapter(adapter2);
            Asortiment.data.remove(cnt-1);
            Asortiment.data1.remove(cnt-1);
        //adapter = new ArrayAdapter<String>(this, R.layout.item, R.id.tvText, Asortiment.data);
        //adapter1 = new ArrayAdapter<String>(this, R.layout.item, R.id.tvText, Asortiment.data1);
        gvMain.setAdapter(adapter);
        gvMain1.setAdapter(adapter1);
        }
    }
    private void ButtonOn (String name, String price)
    {
        PushX=false;
        if(name.length()>15)name=name.substring(0, 15);
        Asortiment.LastButton.set(0, name);
        Asortiment.LastButton.set(1, price);
        Asortiment.data.add(name);
        Asortiment.data1.add(price);
        gvMain.setAdapter(adapter); 
        gvMain1.setAdapter(adapter1);   
        Double d=Double.parseDouble(Asortiment.data2.get(1));
        d=Double.parseDouble(price)+d;
        Asortiment.data2.set(1, d.toString());
        Double sd=Double.parseDouble(Asortiment.data2.get(3));
        if (sd>0) {
            sd=sd-d;
            Asortiment.data2.set(5, sd.toString());
        }
        gvMain2.setAdapter(adapter2);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:59:28.757

要解决问题，甚至缩小问题范围，您需要重构代码。每次点击都会发生很多事情，您可能会过度淹没点击。您是否在两次点击之间留出了足够的时间？

而且，请考虑使方法通用，例如

```
 if(i.getExtras().containsKey("Napitki"))
      {
        ArrayList<String> NapitkiList=new ArrayList<String>();    
        NapitkiList=i.getExtras().getStringArrayList("Napitki") ;
            for(String item : NapitkiList)
            {
                String Art=Asortiment.GetArtByName(item);
                String [] np=Asortiment.GetNamePriceByArt(Art);
            ButtonOn (np[0],np[1]);
            }
      }
    if(i.getExtras().containsKey("Zhevacki"))
      {
        ArrayList<String> ZhevackiList=new ArrayList<String>();   
        ZhevackiList=i.getExtras().getStringArrayList("Zhevacki") ;
            for(String item : ZhevackiList)
            {
                String Art=Asortiment.GetArtByName(item);
                String [] np=Asortiment.GetNamePriceByArt(Art);
            ButtonOn (np[0],np[1]);
            }   
      } 
```

像这样的块可以作为通用方法制作，并且您可能希望遵循 java 约定。

只是一个建议:)

# svn - TortoiseSVN 从不检查工作副本是否更新到最新版本

> ID：15924965
> 
> 赞同：2
> 
> 时间：2013-04-10T11:47:57.540
> 
> 标签：svn, tortoisesvn, commit, working-copy

自从我们升级到 TortoiseSVN 1.7，我注意到 TortoiseSVN 从未向我显示我需要更新我的工作副本的消息，它永远不会过时。

我在较早的版本中，我做了一些更改，使用了 Commit，它毫无疑问地进入了。

在我修改的时候，我的同事修改了另一个文件并提交了它。我检查了日志，看到了更改，但修改后的文件不在我的计算机上，但我的 Subversion 选项卡显示我使用的是最新版本。

我更新了我所谓的最新版本，并下载了上一个版本的更改（尽管我使用的是最新版本）。

这怎么可能？如果我的修改取决于我的同事修改的内容怎么办？我不明白，当我不在最新版本时，我是如何被允许上传修改的。任何想法要检查什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:06:09.493

对于所有版本的 SVN（和 TortoiseSVN），情况总是如此。如果提交中的修改文件之一已被其他人修改，SVN 只会拒绝提交。自上次更新文件以来。它逐个文件工作，而不是整个项目。这是 SVN 众所周知的弱点之一。

如果您想要您描述的行为，请使用 Git。

# iphone - MKPolylineView lineWidth need to be same everytime when zoom in or zoom out on MKMapview

> ID：15924966
> 
> 赞同：2
> 
> 时间：2013-04-10T11:48:00.143
> 
> 标签：iphone, ios, objective-c, ipad, mapkit

I want `MKPolylineView` `lineWidth` needs to be same everytime when zoom in or zoom out on MKMap ?

I am drawing Route from A to B using `MKPolylineView` with all the specified points on the route.

I want to find corridor(polygon) around route as per specified distance in meters.suppose its 5 km (5000 meters). So corridor will be drawn on the mapview along with route.

I am attaching final image as output.

How to draw corridor(polygon) around the route ?

How to achieve this ?

![enter image description here](https://i.stack.imgur.com/b1qCx.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T09:26:34.263

你需要一个 MKOverlayview，它根据你给它的 MKPolyline 和你给它的距离绘制蓝色的“走廊”

```
@interface MyCooridor : MKOverlayView 
@property(retain) MKPolyline *polyline; 
@property(assign) double distance;
@end 
```

绘制，实施`-(void)drawMapRect:(MKMapRect)mapRect zoomScale:(MKZoomScale)zoomScale inContext:(CGContextRef)context`

* * *

在地图上添加覆盖以`mapview:viewForOverlay:`返回走廊视图

# mahout - 从协同过滤中的附加数据中获取用户邻域

> ID：15924967
> 
> 赞同：2
> 
> 时间：2013-04-10T11:48:03.010
> 
> 标签：mahout, recommendation-engine, collaborative-filtering, myrrix

我想基于多个数据集进行推荐，例如[为 Mahout 推荐器使用多个加权数据模型](https://stackoverflow.com/questions/15707013/utilizing-multiple-weighed-data-models-for-a-mahout-recommender)

但我的问题是额外的数据集不能很好地转化为主要项目。我的领域是特定的，但可以将其想象为基于*音乐*品味推荐*电影的问题。*

 *如果我以同样的方式对待电影和音乐，我也会在结果中得到音乐。

我只想使用其他数据集来获得更好的邻域。Mahout 或 Myrrix 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:01:25.603

如果您以相同的方式对待它们，则可以使用[`Rescorer`](https://builds.apache.org/job/Mahout-Quality/javadoc/org/apache/mahout/cf/taste/recommender/Rescorer.html)该类来过滤掉音乐结果。Myrrix 还可以使用 Rescorer(s)

例如， Mahout in Action 书中的[这个`Rescorer`示例](https://github.com/tdunning/MiA/blob/master/src/main/java/mia/recommender/ch05/GenreRescorer.java)从推荐中过滤掉了没有库存的书籍。你会做类似的事情，你会（以某种方式）跟踪哪些项目 id 是音乐，然后使用该信息将`Rescorer`它们过滤掉，这样它们就不会被推荐。*

# javascript - auto reset to the top when set a new value</h1> <div id="body"><p><strong>HTML :</strong></p> <pre><code><textarea rows="3" cols="50"> Cake cupcake sesame snaps. Cookie marshmallow bonbon f

> ID：15924968
> 
> 赞同：0
> 
> 时间：2013-04-10T11:48:05.353
> 
> 标签：javascript, jquery, textarea

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:22:43.707

我认为你需要在附加字符串时滚动到底部。这是我的代码..

```
$('textarea').on("keyup", function(e) {
      var val = $('<div/>').html($(this).val());
      $(this).val(val.text().replace(/'/g,"’"));   
$(this).animate({
    scrollTop:$(document).height()
},1000)
}); 
```

这里 textarea 设置为滚动。

# python - 如何在unix中压缩bmp图像

> ID：15924970
> 
> 赞同：0
> 
> 时间：2013-04-10T11:48:23.103
> 
> 标签：python, unix, bmp, xlwt

我需要使用 python 的 xlwt 模块将图像插入到 xls 中。而且 xlwt 模块似乎只支持 .bmp 图像。

那么在 unix 中压缩 .bmp 图像而没有太多质量损失的最佳方法是什么？

最初图像大小约为 3.2 MB，我想减少到小于 350KB，而不会损失太多质量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:09:00.123

位图文件格式并不真正[支持压缩](http://en.wikipedia.org/wiki/BMP_file_format#Compression)，因此如果不降低分辨率或颜色，您将无法减小文件大小。

因此，如果您只能使用 bmp，我恐怕没有办法。

# jquery - jQuery显示方法不起作用

> ID：15924975
> 
> 赞同：1
> 
> 时间：2013-04-10T11:48:45.700
> 
> 标签：jquery, show-hide

我不知道为什么这个简单的事情不起作用。

请帮我。

[http://jsfiddle.net/VYqdt/](http://jsfiddle.net/VYqdt/)

```
function showDivs(activediv) {
    $("#tabs > div").hide();
    $(activediv).show();
}

//while activediv is a 
    showDivs($(this).attr("href")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:53:03.793

你的 div id 是

```
<div id="#2013-04-20">#2013-01-02 content</div> 
```

选择器变成

```
$('#2013-04-20').show(); //which is selecting a div with "id='2013-04-20'" 
```

并且由于您`#`在 id 前面.. 选择器将无法找到该元素

所以试试这个

```
 <div id="2013-04-20">#2013-01-02 content</div> //remove the # in id
  <div id="2013-03-20">#2013-03-20 content</div> //remove the # 
```

[工作小提琴](http://jsfiddle.net/bipen/VYqdt/22/)

**是的，最好避免 id 以数字开头....**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T11:57:21.587

有几个问题。

**首先**，身份证不应该以数字开头。[从规格](http://www.w3.org/TR/html4/types.html)：

> ID 和 NAME 标记必须以字母 ([A-Za-z]) 开头，后跟任意数量的字母、数字 ([0-9])、连字符 ("-")、下划线 ("_") , 冒号 (":") 和句点 (".")。

**其次**，您应该`#`从 href 中删除，并在需要时将其应用到方法中。

这是[一个工作小提琴](http://jsfiddle.net/VYqdt/23/)（我在你的身份证上附加了一个`a`，所以他们没有以数字开头）。

# css - 尝试使用渐变倾斜矩形的一侧但边缘呈锯齿状，有人可以建议修复吗？

> ID：15924978
> 
> 赞同：2
> 
> 时间：2013-04-10T11:48:48.850
> 
> 标签：css

我创建了一个矩形按钮并想要倾斜一侧，我试图通过使用渐变来做到这一点，但倾斜的边缘确实是锯齿状的。任何人都可以就如何解决这个问题提供任何建议吗？我尝试添加`translate3d(0,0,0)`但没有成功。

**小提琴**：http: [//jsfiddle.net/7YmP4/](http://jsfiddle.net/7YmP4/)

我的**CSS**

```
div {

    -webkit-transform: translate3d(0,0,0);
  -moz-transform: translate3d(0,0,0);
  -ms-transform: translate3d(0,0,0);
  -o-transform: translate3d(0,0,0);
  transform: translate3d(0,0,0);
    backface-visibility: hidden;
}

a {
    width:200px;
    height:100px;
    display: block;
    background:-moz-linear-gradient(-72deg, transparent 75px, black 76px);
    background:-o-linear-gradient(-72deg, transparent 75px, black 76px);
    background:-webkit-linear-gradient(-72deg, transparent 75px, black 76px);
    background:linear-gradient(-72deg, transparent 75px, black 76px);
    margin:15px;
    position:relative;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:58:44.667

CSS 不能做漂亮的软边缘，使用 CSS 做到这一点的唯一真正方法是使用带有切割边缘的 png 背景图像，这会给你一个很好的平滑边缘，而不是你可以使用 SVG 看到的。

# jsp - 如何获取从 servlet 内部调用 servlet 的 JSP 页面名称

> ID：15924979
> 
> 赞同：0
> 
> 时间：2013-04-10T11:48:50.043
> 
> 标签：jsp, servlets

我有很多 JSP 页面，它们都调用同一个 servlet。

是否可以从该 servlet 中获取调用该 servlet 的 JSP 页面名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:17:04.900

Servlet 是一个服务器端控制器，每当请求的 URL 与 web.xml 中定义的 servlet 的 url-pattern 或通过使用注释匹配时，它`doGet`或`doPost`方法都会从方法中调用。`service`

也就是说，servlet**不**知道也不*应该*知道通过发送 HTTP 请求调用它的 HTML 元素，就像单击链接会产生与`<a>`触发它的元素无关的相同结果。

当然，您可以将该信息作为请求参数传递，然后通过调用在 servlet 的方法中检索该信息`request.getParameter("name")`，其中 request 是描述发送方 URL 的参数名称`HttpServletRequest`。`name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:24:42.260

不确定你想要什么。

JSP 不直接调用 Servlet（尽管在底层，它们*是*servlet）。

您应该将 URL 映射到 web.xml 中的 Servlet，然后将响应从 Servlet 中转发到 JSP。如果您想要请求 URL，请使用 request.getRequestURL();

如果您想要请求参数，请使用 request.getParameter("name");

转发到 JSP：

```
String nextJSP = "/searchResults.jsp";
RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(nextJSP);
dispatcher.forward(request,response); 
```

# css - 右键单击css“：active”，与浏览器实现不一致

> ID：15924980
> 
> 赞同：10
> 
> 时间：2013-04-10T11:48:50.647
> 
> 标签：css, cross-browser, css-selectors, pseudo-class

我刚刚注意到浏览器处理 css 的方式之间存在不一致：右键单击元素时的活动状态（上下文菜单单击）

*   Firefox: :active 未触发
*   Chrome: :active 会被暂时触发，直到 mouseup 发生
*   Safari 5 & IE 10: :active 被触发并且元素保持 :active 直到上下文菜单关闭

这是一个快速的 jsfiddle 来复制这个[http://jsfiddle.net/annam/tqBqV/](http://jsfiddle.net/annam/tqBqV/)

```
div { background: red; }
div:active { background: green; } 
```

任何人都知道哪个是正确的行为？我想有没有办法标准化？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T11:52:18.820

[Selectors 3](http://www.w3.org/TR/selectors/#the-user-action-pseudo-classes-hover-act)表示`:active`当元素被激活时为真，并进一步将通过鼠标等指针设备的激活定义为按下主按钮时：

> *   `:active`伪类在用户激活元素时应用。例如，在用户按下鼠标按钮并释放它的时间之间。在具有多个鼠标按钮的系统上，`:active`仅适用于主要或主要激活按钮（通常是“左”鼠标按钮）及其任何别名。

如果二次点击`:active`在特定浏览器中激活元素，则该浏览器违反规范（除非浏览器声称仅实现[CSS2.1](http://www.w3.org/TR/CSS21/selector.html#dynamic-pseudo-classes)，此限制*不是*一成不变的，但事实并非如此对于给定的任何浏览器）。

# c# - EWS :- 无法加载资源文件“Microsoft.Exchange.WebServices.Strings”的资源

> ID：15924985
> 
> 赞同：1
> 
> 时间：2013-04-10T11:49:05.507
> 
> 标签：c#, microsoft-metro, exchangewebservices

我正在开发一个窗口 8 Metro 应用程序，我必须使用 ExchaneWebServices 创建任务并将所有任务显示回我的应用程序。我使用了以下代码。

```
service = new ExchangeService(ExchangeVersion.Exchange2010_SP1);
service.Credentials = new WebCredentials(userEmail, userPassword); 
service.AutodiscoverUrl(userEmail, RedirectionUrlValidationCallback); 
```

我在自动发现时遇到错误。我在控制台应用程序中使用了相同的代码，它工作正常。兑换服务和地铁应用程序有问题吗？

# android - 未设置背景颜色时，Android ExpandableListView 在方向更改时出现乱码

> ID：15924989
> 
> 赞同：0
> 
> 时间：2013-04-10T11:49:08.310
> 
> 标签：android, expandablelistview

我发现我认为是 ExpandableListView 中的一个错误。

我在从操作栏选项卡调用的片段中实现了 ExpandablelListView。如果我将屏幕方向从纵向更改为横向并返回纵向，则显示会出现乱码（列表的前一个视图和新视图一样静态显示）。如果我只进行了一项更改 - 设置可扩展列表视图的背景颜色，问题就会消失，并且列表会在屏幕方向更改时正确重绘。

有没有其他人看到过这种行为？

问候，

院长

# javascript - 我应该在 Node.js 中使用哪种客户端模板？

> ID：15924990
> 
> 赞同：1
> 
> 时间：2013-04-10T11:49:08.540
> 
> 标签：javascript, node.js, ember.js, handlebars.js, pug

我计划从 Node.js 开始开发，我决定使用一堆 MongoDB 和 Express.js 以及 Ember.js。在为我的视图选择模板时，我发现了两种可能的解决方案，即 Jade 和 Handlebars。

我的问题是，经过大量搜索后，我发现 Handlebars 经常被提及为 Ember.js 的事实上的模板，而 Jade 被提及为 Node 的事实上的模板。

我听到人们说，如果我不将 Handlebars 与 Ember 一起使用，我将失去 Ember 提供的大部分优点。

另一方面，我听到了与 Node.js 和 Jade 相同的类比，而且我也更喜欢 Jade，因为它具有类似 Haml 的语法。

我应该在两者中选择哪一个？如果我选择其中一个，我真的会失去功能吗？我觉得我必须这样做。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T13:07:55.770

在我看来，毫无疑问，您会希望在 Ember 模板中使用把手。ember 的最大特性之一是数据绑定以及它如何与车把一起工作。如果您 100% 想要在应用程序中的数据更改时手动更新所有内容，那么您可以使用任何您想要的模板引擎。但在那种情况下，我什至不确定你是否想使用 Ember。

在典型的用例中，您只会从 nodejs 服务器返回 JSON，并且不需要使用模板引擎来处理返回的 JSON。

我所做的只是为 Ember 应用程序创建了一个静态 html 页面，并将使用的节点作为应用程序的 api 服务器部分。所有视图都是通过 Ember 呈现的。唯一一次调用 node 是获取 ember 的数据以用于生成视图，或处理对数据的持久更改。

这是我倾向于如何处理您的堆栈的示例。这只是我正在玩的一个小项目的起点，以学习可能有帮助的 Ember。

[https://github.com/fredjiles/embgo](https://github.com/fredjiles/embgo)

# c++ - 在两个线程之间共享 QAxObject？

> ID：15924998
> 
> 赞同：0
> 
> 时间：2013-04-10T11:49:29.807
> 
> 标签：c++, qt, qthread, qaxobject

假设一个对象 A 在线程中运行。它有一个指向 QAxObject 实例和一个对象 B 的指针。对象 B 有一个指向 QAxObject 的指针。

对象 A 创建一个线程并在其中移动对象 B。

```
#ifndef OBJECTA_H
#define OBJECTA_H

#include <QtCore/QObject>
#include <QtCore/QThread>
#include <QAxObject>

#include "ObjectB.h"

class ObjectA : public QObject
{
    Q_OBJECT
public:
    ObjectA(QObject *parent = 0) : QObject(parent)
    {
        thread = new QThread();
        activeX = new QAxObject();
        objectB = new ObjectB(activeX);
        objectB->moveToThread(thread);

        ObjectA::connect(objectB, SIGNAL(someSignal()), this, SLOT(someSlot()));

        thread->start();
    }

protected slots:
    void someSlot();

private:
    QThread *thread;
    QAxObject *activeX;
    ObjectB *objectB;
};

#endif // OBJECTA_H

#ifndef OBJECTB_H
#define OBJECTB_H

#include <QtCore/QObject>
#include <QAxObject>

class ObjectB : public QObject
{
    Q_OBJECT
public:
    ObjectB(QAxObject *axObject, QObject *parent = 0) : QObject(parent)
    {
        activeX = axObject;
    }

signals:
    void someSignal();

private:
    QAxObject *activeX;
};

#endif // OBJECTB_H 
```

对象 B 是否能够与对象 A 共享的 QAxObject 一起工作？

我觉得这不可能。目前，我有这个错误：`QAxBase: Error calling IDispatch member NewProject: Unknown error`。

并且线程 A 和线程 B 都不能使用 QAxObject。

有这方面的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:54:25.687

解释如下：[从第 3 方 dll 跨线程访问 COM 对象](http://www.qtcentre.org/threads/34428-Access-a-COM-object-from-a-3rd-party-dll-across-threads?s=1faabb4dcec5e74f9fe3169ef34e0d68)。

应该使用：

```
CoInitialize(0);
CoInitializeEx(NULL, COINIT_MULTITHREADED); 
```