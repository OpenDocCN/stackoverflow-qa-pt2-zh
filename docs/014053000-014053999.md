# StackOverflow 问答 14053000-14053999

# android - Custom List item change background in Android

> ID：14053003
> 
> 赞同：0
> 
> 时间：2012-12-27T10:19:18.480
> 
> 标签：android

Hi I am using custom listview and my list item contains checkbox. When updating the listview with the existing values the background is changed, so it is working fine.But when i clicks the check button, at that time the background will not changing after loading some where again then the background is changed . My question is at the time of check the item the background need to change immediately.

This is my adapter class.

```
public class GuestListAdapter extends BaseAdapter implements OnClickListener {
private String strExe;
    AlertDialog.Builder builder;

    Context context;
    private ArrayList<String> arrayListFirstName;
    private ArrayList<String> arrayListLastName;
    private ArrayList<String> arrayListGuests;
    private ArrayList<String> arrayCustomOne;
    private ArrayList<String> arTempId;
    private ArrayList<Boolean> chickinlist;

    public static ArrayList<Integer> arrCheckedItems;
    public static ArrayList<Integer> arrUnCheckedItems;
    Button btnInfo;
    private     SQLiteAdapter mySqliteAdapter;
    private GuestListScreen myGuestList;
    private RelativeLayout views;

    // private AlertDialog alertDialog = null;

    private ArrayList<Boolean> checks = new ArrayList<Boolean>();

    public GuestListAdapter(Context mcontext, ArrayList<String> arrListFN,
            ArrayList<String> arrListLN, ArrayList<String> arrListGuest,
            ArrayList<String> arrTiketID, ArrayList<String> arrCustOne,
            ArrayList<Boolean> chicklist) {

        clearAdapter();

        arrayListFirstName = new ArrayList<String>();
        arrayListLastName = new ArrayList<String>();
        arrayListGuests = new ArrayList<String>();
        arrayCustomOne = new ArrayList<String>();
        arTempId = new ArrayList<String>();
        chickinlist = new ArrayList<Boolean>();
        arrCheckedItems = new ArrayList<Integer>();
        arrUnCheckedItems = new ArrayList<Integer>();

        arrayListFirstName = arrListFN;
        arrayListLastName = arrListLN;
        arrayListGuests = arrListGuest;
        arrayCustomOne = arrCustOne;
        arTempId = arrTiketID;
        chickinlist = chicklist;

        context = mcontext;
        mySqliteAdapter = new SQLiteAdapter(context);

        for (int i = 0; i < arrayListFirstName.size(); i++) {
            checks.add(i, false);
        }
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        Log.d("", "getCount" + arrayListFirstName.size());
        return arrayListFirstName.size();

    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        Log.d("", "getItem" + arrayListFirstName.size());
        return arrayListFirstName.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View view, ViewGroup parent) {

        final int pos = position;
        views = null;
        LayoutInflater layoutInflator = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        views = (RelativeLayout) layoutInflator.inflate(
                R.layout.guest_list_item, null);

        final CheckBox chk = (CheckBox) views.getChildAt(0);
//      Log.d("", "CheckBox Pos "+position);
        chk.setId(position);

        TextView txtView = (TextView) views.getChildAt(1);

        TextView txtView2 = (TextView) views.getChildAt(2);
        TextView txtView3 = (TextView) views.getChildAt(3);

        final TextView txtView4 = (TextView) views.getChildAt(4);
        TextView txtView5 = (TextView) views.getChildAt(6);
        txtView5.setId(position);

//      Log.d("", "Button Pos "+position);
        txtView4.setId(position);

        txtView4.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(context, InfoScreen.class);
                intent.putExtra("IDVALUE",arTempId.get(txtView4.getId()) );
                intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
                context.startActivity(intent);
//              System.out.println(v + "##########" + " " + v.getId());
//              System.out.println(v + "##########" + " " + arTempId.get(txtView4.getId()));
//              System.out.println(v + "##########" + " " + chickinlist.get(txtView4.getId()));
            }
        });
         Log.e("", "****************************************************** " );
//       Log.v("", "Adapter arr pos " + pos);
//       Log.v("", "Adapter arr position " + position);
         Log.v("", "Adapter arr size " + arrayListFirstName.size());
         Log.v("", "Passsing arr size " + chickinlist.size());
        for (int dd = 0; dd < arrayListFirstName.size(); dd++) {
            if (position == dd) {
//              Log.d("", "Passsing arr size " + chickinlist.size());
                Boolean result = chickinlist.get(position);
//              Log.d("", "After " + result);
                if (result == true) {
                    chk.setChecked(true);
                    arrCheckedItems.add(position);
                    views.setBackgroundResource(R.drawable.list_item_checked);

                } else {
                    chk.setChecked(false);
                    arrUnCheckedItems.add(position);
                    views.setBackgroundResource(R.drawable.list_item_unchecked);

                }

                txtView.setText(arrayListFirstName.get(position));
                txtView2.setText(arrayListLastName.get(position));
                txtView3.setText("(" + arrayListGuests.get(position) + ")");
                if(arrayCustomOne.get(position).equalsIgnoreCase("0")||arrayCustomOne.get(position).equalsIgnoreCase(null)||arrayCustomOne.get(position).equalsIgnoreCase(""))
                {
                    txtView5.setText("");
                }else
                {
                    txtView5.setText(arrayCustomOne.get(position));
                }

            }

        }

        chk.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {

                 strExe = "update ticket_details set checkin_status=1 where tempid="+arTempId.get(chk.getId());
//              Log.d("Adapter", "Checked Temp Id "+arTempId.get(chk.getId()));
                Log.d("", "Position "+chk.getId()+"tempid "+arTempId.get(chk.getId()));
                if (isChecked) {

//                  views.setBackgroundResource(R.drawable.list_item_checked);

                    AlertDialog.Builder builder = new AlertDialog.Builder(
                            context);
                    builder.create();
                    builder.setMessage(arrayListFirstName.get(chk.getId())
                            + " " + arrayListLastName.get(chk.getId())
                            + " has been checked in.");
                    builder.setPositiveButton("Ok",
                            new DialogInterface.OnClickListener() {

                                @Override
                                public void onClick(DialogInterface dialog,
                                        int which) {
//                                  myGuestList = new GuestListScreen();
                                    mySqliteAdapter.executeCheckQurey(strExe);
//                                  myGuestList.ListUpdate();
                                    dialog.dismiss();
                                }

                            }).show();
//                  Log.d("", "ID = " + buttonView.getId());

                } else {
//                  views.setBackgroundResource(R.drawable.list_item_unchecked);
                     strExe = "update ticket_details set checkin_status=0 where tempid="+arTempId.get(chk.getId());
                        mySqliteAdapter.executeCheckQurey(strExe);

//                  Toast.makeText(context, "check release", Toast.LENGTH_SHORT)
//                          .show();
                }

            }
        });

        return views;

    }

    @Override
    public void onClick(View view) {
        // TODO Auto-generated method stub
        Integer index = (Integer) view.getTag();
        boolean state = checks.get(index.intValue());

        checks.set(index.intValue(), !state);
    }

//  private void showADialog(int posit) {
//
//      AlertDialog.Builder builder = new AlertDialog.Builder(
//              context);
//      builder.create();
//      builder.setMessage("The clicked row is "
//              + arrayListFirstName.get(posit));
//      builder.setPositiveButton("Ok?", new DialogInterface.OnClickListener() {
//
//          @Override
//          public void onClick(DialogInterface dialog, int which) {
//              dialog.dismiss();
//          }
//
//      }).show();
//  }

    public void clearAdapter() {
        if (arrayListFirstName != null) {
            arrayListFirstName.clear();
            arrayListFirstName = null;
            arrayListLastName.clear();
            arrayListLastName = null;
            arrayListGuests.clear();
            arrayListGuests = null;
            arrayCustomOne.clear();
            arrayCustomOne = null;
            arTempId.clear();
            arTempId = null;
            chickinlist.clear();
            chickinlist = null;
            arrCheckedItems.clear();
            arrCheckedItems = null;
            arrUnCheckedItems.clear();
            arrUnCheckedItems = null;
        }

    }

} 
```

I just want to change the background of the checked item immediatly without updating the list again.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:39:32.490

我认为您需要在调用 OnCheckedChanged 侦听器时告诉 BaseAdapter 刷新数据。

```
GuestListAdapter.this.notifyDataSetChanged() 
```

# android - 后退按钮完成父活动

> ID：14053006
> 
> 赞同：2
> 
> 时间：2012-12-27T10:19:24.707
> 
> 标签：android, android-activity, android-lifecycle

我对默认的 Android 生命周期有一些问题。

我的应用程序有一个`Activity`（我们称之为`A`）和一个`MapActivity`（我们称之为`M`）

Activity`A`可以`AsyncTask`从 URL 中检索图像（EDIT3：这似乎不会影响我的问题，但我提到它是为了提供完整信息），并且 MapActivity`M`目前是一个空地图，没有进行任何配置或修改。

我的用例如下：

我正常浏览我的应用程序，最终开始`A`时没有错误。当我`M`从`A`一切按预期开始时，但当我回去时，活动`A`已经完成。

我`Log.d`在这两个活动的生命周期中的每一步都发现了以下内容：

开始活动`A`

```
onCreate  - A
onStart   - A
onResume  - A 
```

开始活动`M`

```
onPause   - A
onCreate  - M
onStart   - M
onResume  - M
onStop    - A 
```

回到活动`M`

```
onPause   - M
onDestroy - A
onStop    - M
onDestroy - M 
```

所以我最终完成了活动`A`，`M`当我按下后退按钮时`M`

我尝试了不同类型的活动（MapActivities、活动，来自同一个包，来自不同的包），结果完全相同。

编辑：

*   我不在`finish();`任何地方使用方法
*   我的活动从以下代码开始：

`Intent I = new Intent(context, ActivityName.class);` `context.startActivity(I);`

编辑2：

*   在Activity这一步检查了[isFinishing](http://developer.android.com/reference/android/app/Activity.html#isFinishing%28%29)`A` `onPause`方法，结果是`false`所以不应该是finishing

任何的想法？有什么我想念的吗？提前感谢您的时间和想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:29:36.290

从 Activity`M`转到 Activity`A`时，请确保您不使用`finish();`它，因为它会从堆栈中删除当前活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:03:41.077

感谢@Stigi，他为我指出了继续调试的正确道路。（我可以给你分数吗？）

在我的情况下`android:noHistory="true"`，`Manifest.xml`当我从 Activity 回来时`M`，`A`它不在堆上，看起来它已经关闭了。

# .htaccess - About url rewrite with query string

> ID：14053008
> 
> 赞同：0
> 
> 时间：2012-12-27T10:19:26.440
> 
> 标签：.htaccess, url, mod-rewrite

Please help, how to make this url (in my request i use get function)

**iplookup.php?lookup_ip=66.249.66.1**

to looks like this?

**/ip/66.249.66.1**

with

```
RewriteCond %{QUERY_STRING} lookup_ip=
RewriteRule ^ip/(.*)$ iplookup.php?lookup_ip=$1 [QSA] 
```

But unsuccessful :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:39:37.437

摆脱这种状况。`RewriteCond %{QUERY_STRING} lookup_ip=`条件只有在查询字符串中才为真，`lookup_ip=`而且显然 URI`/ip/66.249.66.1`没有。您的规则应如下所示：

```
RewriteRule ^ip/(.*)$ /iplookup.php?lookup_ip=$1 [L,QSA] 
```

然后，当您请求时`http://yourdomain.com/ip/12.34.56.78`，浏览器的 URL 地址栏保持不变，而您在`/iplookup.php?lookup_ip=12.34.56.78`. 您只需要确保所有链接看起来像`http://yourdomain.com/ip/12.34.56.78`.

# php - php escaping double quotes

> ID：14053011
> 
> 赞同：0
> 
> 时间：2012-12-27T10:19:41.123
> 
> 标签：php, string, escaping, double-quotes

Hi I'm having some difficulty with escaping double quoutes from a string.

Here's my situation:
I get the the result set from the database then I apply `utf8_encode` to it because there's latin/accented characters and it return the string as it should be exept the double quotes in the begin and end of the string.

If in the DB I have: `"Olá João"` it returns: `Olá João`. The double quotes are ignored

```
$rs   = mysql_fetch_array($query)
$text = utf8_encode($rs['l_reference']);
echo $text; 
```

I tried using `addslashes` but without success.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:22:34.623

我认为这是因为“Olá João”是一个**多字节字符串**，您必须为此使用不同的解决方法。试试这个[mb_addslashes](https://gist.github.com/402780)

# android - 软键盘打开后，屏幕无法正确调整

> ID：14053025
> 
> 赞同：3
> 
> 时间：2012-12-27T10:20:18.397
> 
> 标签：android, android-layout, android-softkeyboard

我阅读了很多与此项目相关的主题，但没有一个能解决我的问题。这是我的聊天屏幕的布局：

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/chatPage"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/speech_bg" >

<include
    android:id="@+id/chatHeader"
    layout="@layout/header_chat" />

<RelativeLayout
    android:id="@+id/chatView"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/chatHeader" >

    <RelativeLayout
        android:id="@+id/chatBottomView"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="@drawable/speech_text_bg"
        android:padding="5dp" >

        <RelativeLayout
            android:id="@+id/chatSendButton"
            android:layout_width="@dimen/chatSendButtonWidth"
            android:layout_height="@dimen/chatSendButtonHeight"
            android:layout_alignBottom="@+id/chatEditText"
            android:layout_alignParentRight="true"
            android:layout_marginLeft="5dp"
            android:background="@drawable/chat_send_btn_selector"
            android:onClick="ChatSendButtonClick" >

            <com.xxx.Utils.MyTextView
                xmlns:customtext="http://schemas.custom.com/android/customtext"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_centerInParent="true"
                android:text="@string/chatSendText"
                android:textColor="#ffffff"
                android:textSize="@dimen/chatSendTextSize" />
        </RelativeLayout>

        <EditText
            android:id="@+id/chatEditText"
            android:layout_width="match_parent"
            android:layout_height="@dimen/editTextHeight"
            android:layout_toLeftOf="@+id/chatSendButton"
            android:background="@drawable/edit_text"
            android:inputType="textMultiLine"
            android:maxLines="5" />
    </RelativeLayout>

    <com.handmark.pulltorefresh.library.PullToRefreshListView
        xmlns:pulltorefresh="http://schemas.custom.com/android/pulltorefresh"
        android:id="@+id/chatList"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/chatBottomView"
        android:cacheColorHint="#00000000"
        android:divider="#00000000"
        android:fadingEdge="none"
        android:fadingEdgeLength="0px"
        android:listSelector="#00000000"
        pulltorefresh:type="chat" />
</RelativeLayout> 
```

我在 AndroidManifest.xml 中添加了*AdjustPan*选项：

```
<activity
    android:name=".ui.ChatActivity"
    android:screenOrientation="portrait"
    android:windowSoftInputMode="stateHidden|adjustPan" >
</activity> 
```

我猜，AdjustResize 在我的实现中不起作用，因为其中没有滚动视图。

打开软键盘时调整聊天页面大小/调整聊天页面的最佳方式是什么？据我所知，也没有在 Android 中听键盘的实现。我只看到了一些与 global layoutlistener 相关的示例来了解键盘位置，但它对我来说效果不佳。

为什么 adjustpan 选项隐藏了我的操作栏，而不仅仅是聊天屏幕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T12:32:44.713

在 chat.xml 布局中添加到 pulltorefreshlistview：

```
android:transcriptMode="alwaysScroll" 
```

它解决了一切。如果聊天列表视图在任何情况下都可以滚动，则无需侦听键盘事件即可手动滚动列表视图。

希望它对我以外的任何人都有帮助..

# javascript - 在javascript中定位提示弹出窗口

> ID：14053028
> 
> 赞同：5
> 
> 时间：2012-12-27T10:20:21.097
> 
> 标签：javascript

我有一个类似下面的 javascript 提示，我想把提示放在屏幕的中心。如何在使用 javascript 时做到这一点？

```
function showUpdate() {     
    var x;    
    var name=prompt("Please enter your name","");

    if ( name != null ) {
      x="Hello " + name + "! How are you today?";
      alert("Input : " + name );          
    }

} 
```

这就是我所说的：

```
<a onclick = "showUpdate() " style="vertical-align: middle;" class="parent" href=""><span>5\. Missed P/U Comments</span></a> 
```

它可以工作，除了提示进入左角`IE`和中心，`Firefox` 但我需要相同的解决方案才能在两个浏览器中工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T10:41:15.847

`prompt`（和`alert`）弹出窗口的实现方式因您使用的浏览器而异。这是因为弹出窗口是浏览器功能，它们不是 JavaScript 对象或类似的东西。（就像每个浏览器的控制台不同，这取决于实现。）

如果您真的希望提示的定位/样式一致，则必须构建自己的提示。

最简单的方法是使用像**[jQueryUI](http://jqueryui.com/dialog/#modal-form)这样的库。**

另一方面，您可以自己构建它：

```
document.getElementById('showPromptButton').addEventListener('click', showSprompt);
document.getElementById('promptButton').addEventListener('click', submitPrompt);
var prompt = document.getElementById('myPrompt');
var promptAnswer = document.getElementById('promptAnswer');

function showSprompt() {
    promptAnswer.value = ''; // Reset the prompt's answer
    document.getElementById('promptQuestion').innerText = "What's your question?"; // set the prompt's question
    prompt.style.display = 'block'; // Show the prompt
}

function submitPrompt() {
    var answer = promptAnswer.value; // Get the answer
    prompt.style.display = 'none';   // Hide the prompt
    console.log(answer);
}
```

```
#myPrompt{
  display:none;
  /* Style your prompt here. */
}
```

```
<input id="showPromptButton" type="button" value="Show Prompt" />
<div id="myPrompt" class="proptDiv">
  <span id="promptQuestion"></span>
  <input id="promptAnswer" type="text" />
  <input id="promptButton" type="button" value="Submit" />
</div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T10:27:34.227

您不能自定义或发布默认的 javascript 提示。检查此 SO 答案以了解解决方法。

[如何自定义 JavaScript 提示？](https://stackoverflow.com/questions/9193333/how-to-customize-the-javascript-prompt)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T10:27:42.640

> ...但我需要相同的解决方案才能在两种浏览器中工作。

`prompt`（及其表亲`alert`）非常过时。您无法控制他们的外观或位置。最好避免它们。

相反，您可以使用绝对定位`div`（或任何其他块元素）来制作弹出消息，这不仅可以让您完全控制其位置，还可以完全控制样式。如果你环顾四周，你会发现许多这样做的例子，以及它的工具包，除非你真的想要，否则没有必要自己动手。

无论您最终采用哪种方式，使用它的逻辑都必须改变，因为`prompt`它是同步的（页面上的所有脚本都急速停止并等待提示），而现代的执行方式是异步的（事件-导向）。例如，您*使用*弹出窗口的新代码可能如下所示：

```
function showUpdate() {

    popup("Please enter your name","", function(name) {
        if (name!=null)
        {
            x="Hello " + name + "! How are you today?";
            alert("Input : "+name); // <== I left this one alone, looks like debugging
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T10:27:55.270

提示、警报和确认是每个浏览器都有自己的向用户显示方式的基本功能。您也没有理由要自定义这些功能。

如果您真的想要高级功能和完全自定义，则必须制作自己的自定义警报。您可以通过以下几种方式之一执行此操作。我建议的两个选项之一是在 Javascript 中创建两个 div（一个淡出页面的其余部分，一个看起来像警报）并将它们用作伪提示。第二个是创建一个新窗口，删除它的很多功能，并在新打开的页面上更改一些 HTML，使其看起来有点像警报。

我觉得最后一个真的是过度了。如果你想要一个提示，它们很丑……否则，你需要自己制作一些带有定位 div 和褪色背景的东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-27T10:29:48.997

> **注意：该方法`window.showModalDialog()`已过时，现代浏览器不支持该方法。请不要使用它**。

您不能重新定位`window.alert()`，但您可以`window.showModalDialog()`按照本页中的说明进行操作：http: [//bytes.com/topic/javascript/answers/849283-change-position-alert-possible](http://bytes.com/topic/javascript/answers/849283-change-position-alert-possible)

[https://developer.mozilla.org/en-US/docs/DOM/window.showModalDialog](https://developer.mozilla.org/en-US/docs/DOM/window.showModalDialog)

# javascript - javascript对话框不显示热门数据

> ID：14053029
> 
> 赞同：0
> 
> 时间：2012-12-27T10:20:28.103
> 
> 标签：javascript, asp.net

我有以下javascript函数

```
function getPopup1(redirectString) {

        window.showModalDialog(redirectString , null,
'status:no;dialogWidth:700px;dialogHeight:900px;dialogHide:true;help:no;scroll:1;edge:sunken');
    } 
```

重定向字符串正在重定向到 .aspx 页面。该页面有很多内容，所以我启用了滚动条，但我让页面滚动到页面加载结束。如何从顶部显示数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:23:30.187

当页面加载弹出窗口时，将其添加到页面以滚动到顶部

window.scrollTo(0,0)

# asp.net - 显示多个 asp 验证器的单个错误

> ID：14053036
> 
> 赞同：0
> 
> 时间：2012-12-27T10:21:25.277
> 
> 标签：asp.net, validation

我在 asp 中有一个带有 3 个不同验证器的文本框控件。每个验证器都从服务器获取错误消息，并且每个验证器都验证不同的东西。我的问题是，对于某些值，两个或多个验证器正在触发并且我收到不止一个错误消息。我想做某种优先级功能，这意味着如果第一个验证器正在触发其他两个验证器，则不会。有什么方法可以让验证器表现得像那样吗？

我添加了一些代码示例：

```
<asp:RequiredFieldValidator ID="cvRequired" runat="server" Display="Dynamic"
    ControlToValidate="txtBox" />
<asp:RegularExpressionValidator ID="cvFormat" runat="server" Display="Dynamic"
    ControlToValidate="txtBox" ValidationExpression="^([A-Za-z])+$" />
<asp:CustomValidator ID="cvCustom" runat="server" Display="Dynamic"
    ControlToValidate="txtBox" ClientValidationFunction="validateFunction" /> 
```

如果所需的验证器无效，我希望格式验证器和自定义验证器不会触发（实际上，我只是希望它们不显示错误消息）。

正如我所说，错误消息来自服务器，所以我不能真正将它们加入一个自定义验证器。此外，“validateFunction”在另一个 js 文件中（用于重用）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:32:51.327

您需要考虑的逻辑选项很少，

```
(txtPhone) having three validators.
1.RangeValidator, 2.CustomValidator 3.Regexvalidator 
```

说，在验证之后（如果验证失败/通过，检查它返回的内容）并采取行动。

```
 if(rangevalidator1 != null)
{
 ...somecode...
} 
```

我会建议你使用 javascript ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:33:39.703

您可以对所有三个验证使用单个自定义验证器，并根据需要将代码置于 if 条件中。

```
<asp:CustomValidator runat="server" ID="cstmStartDateValidater"                     
                        ToolTip="Start date cannot be greater than equal to end date/time or less than current date/time" 
                        ErrorMessage="*" ControlToValidate="txtStartDateTime"
                     ForeColor="Red" ValidationGroup="vlgMessage" SetFocusOnError="true" 
                        onservervalidate="cstmStartDateValidater_ServerValidate" ></asp:CustomValidator> 
```

在 .cs 页面中

```
protected void cstmStartDateValidater_ServerValidate(object source, ServerValidateEventArgs args)
    {
        if (CompareStartDate())
        {
            args.IsValid = true;
        }
        else
        {
            args.IsValid = false;
        }
    } 
```

您可以使用以下链接获取更多信息：

[代码](http://msdn.microsoft.com/en-us/library/f5db6z8k%28VS.71%29.aspx)[项目](http://www.codeproject.com/Questions/102224/Using-Custom-Validator-in-ASP-NET-3-5)_

希望这些对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:37:09.230

利用 ajax 控件工具包中提供的 ValidatorCalloutExtender 控件。在每个控件上放置一个单独的 ValidatorCalloutExtender，您希望对其进行验证。

# java - 组合与继承

> ID：14053042
> 
> 赞同：0
> 
> 时间：2012-12-27T10:22:00.503
> 
> 标签：java, design-patterns

我有一个`Validator`带有一个方法签名的接口：`public List<ParameterError> validateParameters(Parameters parameters);`各种类都实现了这个接口。

还有一些常用的方法，如`isInteger`,`isInRange`等。我应该将这些方法放在 a 中`ValidationHelper`并在实现接口的类中使用组合`Validator`，还是应该创建`Validator`一个抽象类，将这些方法放在那里并使用继承而不是组合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:26:19.587

我假设`isInteger`，`isInRange`如果它们是通用实现的，甚至可以在 Validator 类之外使用。在这种情况下，它们应该进入一个单独的 util 类，并且应该简单地调用该类`Utils`而不是`ValidationHelper`. 类/方法应始终在您可以使用它们的最广泛的上下文中命名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T10:39:59.277

您的辅助方法是方法的良好候选者，`static`因为它们是纯函数并且它们不应该是多态的。您应该使用实用程序类并将所有此类功能放入其中。这导致了最小的耦合：既不是组合，也不是继承；只是纯粹依赖于方法本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:40:11.287

我更喜欢组合而不是继承，因为实现的类`Validator`可能不一定共享`is-a`关系。他们更有可能对`Validator`接口提供的方法感兴趣。

此外，是否不可能`isInteger`在接口中实现泛型（等）方法`Validator`并标记`final`？它们甚至可以`static`按照[这个](https://stackoverflow.com/questions/538870/java-static-methods-best-practices)问题的思路制作。

# objective-c - 获取用于保存在objective-c中的最后一个目录的路径

> ID：14053045
> 
> 赞同：1
> 
> 时间：2012-12-27T10:22:12.407
> 
> 标签：objective-c, macos, directory, save

大多数应用程序将某些内容保存在硬盘中，该应用程序将最后一个目录 url 或路径保存在某处（我不知道这个字符串在哪里），当您关闭应用程序或您的 mac 时，然后重新打开应用程序并保存其他内容，应用程序转到最后使用的目录（如果退出）或用户的文档文件夹（如果目录不退出）。一些像 final cut pro 这样的应用程序会打开最后一个在其中工作的项目。我想获取用于保存的最后一个目录，我该怎么做？我想保存新项目。在保存和创建 NSSavePanel 之前，获取最后使用的目录以检查是否有任何项目具有默认名称，如“新项目 1”、“新项目 2”、... 到我的应用程序确定最后使用的文件默认名称，例如“新项目 10 ”，我的应用程序建议“新项目 11”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T01:06:18.980

要获取您自己的应用程序的最后一个目录：

```
NSString* navLastRootDirectory = [[[NSUserDefaults standardUserDefaults] objectForKey:@"NSNavLastRootDirectory"] stringByExpandingTildeInPath] ; 
```

要获取另一个应用程序的最后一个目录，例如 TextEdit：

```
NSString* pathToTextEditPreferences = [@"~/Library/Preferences/com.apple.TextEdit.plist" stringByExpandingTildeInPath] ;
NSData* data = [NSData dataWithContentsOfFile:pathToTextEditPreferences] ;
NSDictionary* propertyListData = [NSPropertyListSerialization  propertyListWithData:data  options:NSPropertyListImmutable  format:nil  error:nil  ] ;
NSString* navLastRootDirectory = [[propertyListData objectForKey:@"NSNavLastRootDirectory"] stringByExpandingTildeInPath] ; 
```

# html - 垂直对齐=图像底部 + 文本

> ID：14053046
> 
> 赞同：0
> 
> 时间：2012-12-27T10:22:16.117
> 
> 标签：html, vertical-alignment

我有一个包含一组元素的表。由于可变的img大小，我设置了一个固定的高度，并且由于文本可能溢出`text-overflow:ellipsis`，但是我无法在可用空间的底部获得图像+文本

[图片 http://img713.imageshack.us/img713/7893/immaginescr.png](http://img713.imageshack.us/img713/7893/immaginescr.png)

```
<div class="game">
     <a href="url"><img src="(img src)"></a>
     <div class="gamedescription">-Metal Gear Solid<br>-PlayStation</div>
</div> 
```

```
.game {
    width: 110px;
    padding: 5px;
    border: 2px solid #8F8F8F;
    float: left;
    height: 200px;
}

.gamedescription {
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    display: block;
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:30:45.687

试试这个 [小提琴](http://jsfiddle.net/dwpQZ/)

例子

```
<!DOCTYPE html>
<html>
<style>
.game {
position: relative;
width: 110px;
padding: 5px;
border: 2px solid #8F8F8F;
float: left;
height: 200px;
}

.gamedescription {
position: absolute;
text-overflow: ellipsis;
overflow: hidden;
white-space: nowrap;
display: block;
bottom: 0px;
}
</style>
<body>
<div class="game">
     <a href="javascript:void(0);"><img src="http://www.w3schools.com/tags/smiley.gif" alt="Smiley face" width="42" height="42"></a>
     <div class="gamedescription">-Metal Gear Solid<br>-PlayStation</div>
</div>

</body>
</html> 
```

您缺少两者的位置属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:37:40.137

```
<div class="game">
     <div class="Apply bottom properties here">
          <a href="url"><img src="(img src)"></a>
          <div class="gamedescription">-Metal Gear Solid<br>-PlayStation</div>
     </div>
</div> 
```

Css：使用第一篇文章中的那个 +

```
position: absolute;
bottom: 23px; 
```

在新的 div 上。

# python - 带有多个视图参数的 Django 装饰器

> ID：14053050
> 
> 赞同：1
> 
> 时间：2012-12-27T10:22:28.990
> 
> 标签：python, django, decorator

我在我的项目中使用 django 装饰器。我正在使用带参数的多个视图，我需要调用 1 个装饰器。

我只希望一个视图用它的参数调用一次。但是无论我在哪里使用装饰器，装饰器都会给出每个视图的值。

我希望论点属于我所称的特定观点。

我的观点和装饰者为：

```
def d(msg='my default message'):
    def decorator(func):
        print msg
        def newfn(request, **kwargs):
            return func(request, **kwargs)
        return newfn
    return decorator

@d('This is working')
def company_add(request):
   return ...

@d('Dont come')
def company_list(request, comp_id = None):
   return ... 
```

如果我调用 company_add 视图，我将输出为：

```
This is working
Dont come 
```

但我的预期结果是

```
This is working. 
```

任何人都可以帮我打印仅属于特定观点的论点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:36:06.150

当你用 包装函数时`@d(arg)`，你实际上在运行修饰函数之前运行函数体`d`，`msg=arg`当然打印`msg`. 您可以将 `print`语句放在其他地方，例如：

```
def d(msg='my default message'):
    def decorator(func):
        def newfn(request, **kwargs):
            print msg
            return func(request, **kwargs)
        return newfn
    return decorator 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T10:41:17.063

解决方案是移动`print msg`到 newfn 包装器的范围。当您使用指定的参数调用装饰器时，它会执行并导致上述行为。

```
def d(msg='my default message'):
    def decorator(func):
        def newfn(request, **kwargs):
            print msg # The message should be printed here.
            return func(request, **kwargs)
        return newfn
    return decorator 
```

# java - 我搜索了几个例子，仍然没有得到。我正在将一个 GOOD 对象列表从控制器传递到 jsp 页面。试图循环列表对象，但它只重复显示一个元素。我应该用豆子吗？如果是，您能否为我的案例提供更具体的示例。 <c:if test="${not empty listGood}"><c:foreach 7="" 36883="" var="ob" 问问题="" 2012-12-27t10:22:30.777="" 次="" this="" question="" shows="" research="" effort;="" it="" is="" useful="" and="" clear="" does="" not="" show="" any="" unclear="" or="" bookmark="" question.="" activity="" on="" post.="" 我搜索了几个例子，仍然没有得到。我正在将一个="" good="" 对象列表从控制器传递到="" jsp="" 页面。试图循环列表对象，但它只重复显示一个元素。我应该用豆子吗？如果是，您能否为我的案例提供更具体的示例。="" <c:if="" test="${not empty listGood}"><c:foreach var="ob" varstatus="status" items="${listGood}"></c:foreach></c:foreach></c:if>更新 这里是控制器： @RequestMapping(value={"/supply"}, method=RequestMethod.POST) public String consumptFormulate(Locale locale, Model model, @ModelAttribute ConsumptionForm cmd, HttpServletRequest request){ String[] s_str =cmd.getFromDate().split("/"); String normal_s = s_str[2]+"-"+s_str[0]+"-"+s_str[1]; String[] f_str = cmd.getToDate().split("/"); String normal_f = f_str[2]+"-"+f_str[0]+"-"+f_str[1]; List <good>list = service.getGoods(normal_s,normal_f,cmd.getSocGoods(),cmd.getTradeObj()); List <listgoodsform>listg = new ArrayList<listgoodsform>(); org.jfree.data.xy.XYSeries series = new org.jfree.data.xy.XYSeries("За месяц:"); if(!list.isEmpty()){ lg=list; ListGoodsForm listo = new ListGoodsForm(); java.util.Calendar ca = java.util.Calendar.getInstance(); for(Good g: list){ listo.setName(g.getName()); listo.setMeasure(g.getMeasure()); listo.setPrice(g.getPrice()); listo.setQuantity(g.getQuantity()); listg.add(listo); java.util.Date date = g.getDates(); java.text.SimpleDateFormat format = new java.text.SimpleDateFormat("MMMM"); ca.setTime(date); int in = ca.get(java.util.Calendar.MONTH); String month = format.format(date); } } request.setAttribute("listGood",listg); //model.addAttribute("listGood", listg); model.addAttribute("GOODS", prepareDataList()); // model.add model.addAttribute("COMPANY",sservice.getSupplierName()); model.addAttribute("consumptionForm", cmd); return "supply"; } 使用此代码传递列表 request.setAttribute("listGood",listg); javajspjsp-tags 4 2 回答 2 This answer is useful 3 我的猜测是您的控制器正在执行以下操作： Good g = new Good(); List <good>goods = new ArrayList<good>(); for (int i = 0; i < 4; i++) { g.setName("a"); ... goods.add(g); } 这意味着您正在修改相同的 Good 对象 4 次，并将其添加到列表中 4 次。最后，您有 4 次相同的对象，其中包含您在上次迭代中设置的状态。 相反，请执行以下操作： List <good>goods = new ArrayList<good>(); for (int i = 0; i < 4; i++) { Good g = new Good(); g.setName("a"); ... goods.add(g); } 编辑：您编辑的问题刚刚证实了我的猜测： ListGoodsForm listo = new ListGoodsForm(); 这条线应该在 for 循环里面，而不是外面。 于 2012-12-27T11:10:33.243 回答 This answer is useful 1 使用此代码传递列表 request.setAttribute("listGood",listg); 于 2012-12-27T10:31:41.057 回答 Related 1 java - 进行网络服务调用时出错 0 django - 更新整数字段计数的模型方法 2 webdriver - 如何使用 selenium webdriver 在同一浏览器中并行运行测试？ 1 iphone - 使用 xcode 在 iphone 应用程序开发中创建和使用音量滑块的代码 0 c# - Windows Phone WebBrowser 控件中的 Greasemonkey 脚本 1 ios - Apple 商店应用程序 - 外部链接/网址规则 1 javascript - 加速 Jquery 心跳 1 jquery - .link() 函数属于哪里以及来自属性的数据是什么 0 html - 如何到达由 htmlLoader 加载的页面顶部 1 javascript - 在 phonegap 应用程序中加载基本的身份验证保护图像 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</good></good></good></good></listgoodsform></listgoodsform></good>

> ID：14053052
> 
> 赞同：7
> 
> 时间：
> 
> 标签：java, jsp, jsp-tags

我搜索了几个例子，仍然没有得到。我正在将一个 GOOD 对象列表从控制器传递到 jsp 页面。试图循环列表对象，但它只重复显示一个元素。我应该用豆子吗？如果是，您能否为我的案例提供更具体的示例。

```
 <c:if test="${not empty listGood}">
     <c:forEach var="ob" varStatus="status" items="${listGood}">
    <tr>
        <td><c:out value="${ob.name}"/></td>
        <td><c:out value="${ob.measure}"/></td>
        <td><c:out value="${ob.quantity}"/></td>
        <td><c:out value="${ob.price}"/></td>
    </tr>
             </c:forEach>
            </c:if> 
```

**更新** 这里是控制器：

```
@RequestMapping(value={"/supply"}, method=RequestMethod.POST)
public String consumptFormulate(Locale locale, Model model, @ModelAttribute ConsumptionForm cmd, HttpServletRequest request){
  String[] s_str =cmd.getFromDate().split("/");
  String normal_s  = s_str[2]+"-"+s_str[0]+"-"+s_str[1];
  String[] f_str = cmd.getToDate().split("/");
   String normal_f  = f_str[2]+"-"+f_str[0]+"-"+f_str[1];
     List<Good> list = service.getGoods(normal_s,normal_f,cmd.getSocGoods(),cmd.getTradeObj());
     List<ListGoodsForm> listg = new ArrayList<ListGoodsForm>();
     org.jfree.data.xy.XYSeries series = new org.jfree.data.xy.XYSeries("За месяц:");
     if(!list.isEmpty()){
         lg=list;
         ListGoodsForm listo = new ListGoodsForm();
         java.util.Calendar ca = java.util.Calendar.getInstance();

         for(Good g: list){
             listo.setName(g.getName());
             listo.setMeasure(g.getMeasure());
             listo.setPrice(g.getPrice());
             listo.setQuantity(g.getQuantity());
             listg.add(listo);
             java.util.Date date = g.getDates();
             java.text.SimpleDateFormat format = new java.text.SimpleDateFormat("MMMM");
              ca.setTime(date);
             int in = ca.get(java.util.Calendar.MONTH);
                 String month = format.format(date);
        }
            }
       request.setAttribute("listGood",listg);
     //model.addAttribute("listGood", listg);
     model.addAttribute("GOODS", prepareDataList());
    // model.add
     model.addAttribute("COMPANY",sservice.getSupplierName());
     model.addAttribute("consumptionForm", cmd);

   return "supply";  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:10:33.243

我的猜测是您的控制器正在执行以下操作：

```
Good g = new Good();
List<Good> goods = new ArrayList<Good>();
for (int i = 0; i < 4; i++) {
    g.setName("a");
    ...
    goods.add(g);
} 
```

这意味着您正在修改相同的 Good 对象 4 次，并将其添加到列表中 4 次。最后，您有 4 次相同的对象，其中包含您在上次迭代中设置的状态。

相反，请执行以下操作：

```
List<Good> goods = new ArrayList<Good>();
for (int i = 0; i < 4; i++) {
    Good g = new Good();
    g.setName("a");
    ...
    goods.add(g);
} 
```

编辑：您编辑的问题刚刚证实了我的猜测：

```
ListGoodsForm listo = new ListGoodsForm(); 
```

这条线应该在 for 循环里面，而不是外面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:31:41.057

使用此代码传递列表

```
 request.setAttribute("listGood",listg); 
```

# java - 如何使用JAVA获取Excel工作表中指定位置的单元格的值

> ID：14053055
> 
> 赞同：7
> 
> 时间：2012-12-27T10:22:33.267
> 
> 标签：java, apache, excel, apache-poi, xlsm

如何使用 java .. 从 .xlsm 文件中获取特定单元格的值？？我想通过指定特定的行和列来获取单元格值，例如，我需要第 1 行和 C1 列或第 5 行和 C6 列的单元格值...我通过像这样指定行号和列号来获取值

`XSSFRow row = sheet.getRow(4);` // 4是行号

`cell = row.getCell(4);` // 4是列号

但这仅在工作表的列从 A、B、C、D... 开始时才有效...当我尝试使用相同的编码来获取另一张工作表但它不起作用...在此工作表中，列从 C、D、E ... 开始，依此类推

任何人都可以帮助我了解我可以使用什么来获得指定的结果吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T22:35:39.113

您可能希望使用[CellReference](http://poi.apache.org/apidocs/org/apache/poi/ss/util/CellReference.html)实用程序类来帮助您。

然后，您可以执行以下操作：

```
 Sheet sheet = workbook.getSheet("MyInterestingSheet");

 CellReference ref = new CellReference("B12");
 Row r = sheet.getRow(ref.getRow());
 if (r != null) {
    Cell c = r.getCell(ref.getCol());
 } 
```

这将让您在给定的 Excel 样式参考中找到单元格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:08:08.940

如果该工作表有名称，您可以获取工作表名称并使用迭代器。

```
 Iterator iterator = workSheet.rowIterator();
  while(iterator.next){
       Row row = (Row) iterator.next();
        //u can iterate and use row.getCell(i)
  } 
```

# c++ - 在 trie 上释放指针

> ID：14053056
> 
> 赞同：2
> 
> 时间：2012-12-27T10:22:40.053
> 
> 标签：c++, pointers, memory-management, free, trie

我正在尝试释放我的 trie 上的指针。这是我的特里结构

```
struct trie
{
    int x;
    trie *next[26];
};

trie *head;
trie *tmp; 
```

这是我使用 dfs 的解除分配功能

```
void deallocate(trie *cur)
{
    for (int a=0; a<=25; a++)
    {
        if (cur->next[a] != NULL)
        {
            tmp = cur->next[a];
            cur->next[a] = NULL;
            deallocate(tmp);
        }
    }
    free(cur);
} 
```

这是我的头部初始化函数

```
void init()
{
    head = new trie;
    head->x = 0;
    for (int a=0; a<=25; a++)
    {
        head->next[a] = NULL;
    }
} 
```

在程序结束后我打电话给`deallocate(head);`

我对指针的东西真的很陌生，我的 deallocate 函数有什么问题吗？谢谢

更改了数组大小并被接受:)看来问题不在于指针:)谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:44:35.823

您`new`用于分配内存并`free`释放它。我能看到的唯一错误是您应该使用`new`with`delete`或`malloc`with `free`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:47:03.107

您的函数对于空输入不正确。`deallocate(NULL)`会崩溃。功能（尤其是构成框架的通用功能）应该是自给自足的，并且应该能够覆盖所有可能的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:54:37.813

*   deallocate 需要处理 NULL 输入

    if (cur == NULL) { 返回; }

    在函数开始时

*   *head 应在声明时声明为 NULL

    特里*头=空；

# ruby-on-rails-3 - 构造以下内容的最类似rails的方式是什么

> ID：14053058
> 
> 赞同：0
> 
> 时间：2012-12-27T10:22:54.170
> 
> 标签：ruby-on-rails-3

我在我的应用程序中为两种不同类型的用户使用设计。他们被称为用户和专业人员。

我目前有一个简单的基于资源的控制器，称为 MessagesController，它可以像这样为当前专业人士提取消息

```
class MessagesController < ApplicationController
    def index
       @messages = Message.find_all_by_profession_id(current_professional.id)
    end
end 
```

我想找到保留此控制器的最佳方式，但根据登录的用户类型更改查询。我希望资源中的所有操作（索引、新建、创建、更新等）都发生相同的情况

我知道我能做到

```
if current_user
    @messages = Message.find_all_by_user_id(current_user.id)
else
    @messages = Message.find_all_by_profession_id(current_professional.id)
end 
```

但这对所有操作来说都是庞大而混乱的。我相信一定有更好的方法。这样做最像rails的方式是什么？我应该创建一个全新的控制器来处理基于用户的消息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:29:57.483

我可以想到两种方法：

您可以将代码放入`initialize`控制器的方法中：

```
def initialize
  if current_user
      @messages = Message.find_all_by_user_id(current_user.id)
  else
      @messages = Message.find_all_by_profession_id(current_professional.id)
  end
  super
end 
```

或者您可以创建一个`before_filter`：

```
class MessagesController < ApplicationController
  before_filter :get_messages
  private
  def get_messages
     if current_user
       @messages = Message.find_all_by_user_id(current_user.id)
     else
       @messages = Message.find_all_by_profession_id(current_professional.id)
     end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:30:19.213

恕我直言，我认为您可以将这段代码移动到模型中，因此控制器只调用传递用户参数并从模型中获取所有消息。

```
# messsages_controller.rb
@messages = Message.find_all_messages(current_user, current_professional)

# message.rb
def self.find_all_messages(user, professional)
  if user
    self.find_all_by_user_id(user.id)
  else
    self.find_all_by_profession_id(professional.id)
  end
end 
```

我认为最好在您的模型上使用这种代码。当然，您可以改进 if/else 代码，但我现在没有想法。

# java - 使用 JAXB 编组长原始类型

> ID：14053063
> 
> 赞同：6
> 
> 时间：2012-12-27T10:23:13.437
> 
> 标签：java, jaxb

为了使用 JAXB 编组一个长的原始类型，我使用了@`XmlJavaTypeAdapter`注解，它将非字符串类型适配为字符串。即使它为长类型抛出错误。为什么会这样？如何对我的`long`id 属性进行编组？

**用户.java**

```
class User {
    @XmlID
    @XmlJavaTypeAdapter(WSLongAdapter.class)
    private long id;
    // Other variables
    // Getter & Setter method
} 
```

WSLongAdapter.java

```
 public class WSLongAdapter extends XmlAdapter<String, Long>{
        @Override
        public String marshal(Long id) throws Exception {
            if(id==null) return "" ;
            return id.toString();
        }
        @Override
        public Long  unmarshal(String id) throws Exception {
        return  Long.parseLong(id);
        }
     } 
```

MarshallTest.java

```
public static void main(String[] args) {
    try{
        JAXBContext jaxbContext= JAXBContext.newInstance(User.class);
        Marshaller marshaller = jaxbContext.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);
        OutputStreamWriter writer = new OutputStreamWriter(System.out);
        // Manually open the root element
        writer.write("<user>");
        // Marshal the objects out individually
        marshaller.marshal(new User(), writer);
        // Manually close the root element
        writer.write("</user>");
        writer.close();
    }
    catch (Exception e) {
        e.printStackTrace();
    }
} 
```

**错误：**

```
 com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 4 counts of IllegalAnnotationExceptions
Adapter com.v4common.shared.util.other.WSLongAdapter is not applicable to the field type long. 
    this problem is related to the following location:
        at @javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter(type=class javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter$DEFAULT, value=class com.v4common.shared.util.other.WSLongAdapter)
        at private long com.v4common.shared.beans.usermanagement.User.id
        at com.v4common.shared.beans.usermanagement.User
Property "id" has an XmlID annotation but its type is not String.
    this problem is related to the following location:
        at private long com.v4common.shared.beans.usermanagement.User.id
        at com.v4common.shared.beans.usermanagement.User
There are two properties named "id" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-05T16:32:55.083

在注解中指定原始类：

```
@XmlJavaTypeAdapter(type=long.class, value=WSLongAdapter.class) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T10:25:51.957

以下可能有效：

```
class User {
    @XmlID
    @XmlJavaTypeAdapter(WSLongAdapter.class)
    @XmlElement(type=Long.class)
    private long id;
    // Other variables
    // Getter & Setter method
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-17T15:18:31.420

`@XmlID`创建带有返回注释的新 getter`String`

```
@XmlAccessorType(XmlAccessType.FIELD)
class User {

    private long id;

    @XmlID
    public String getReferenceId() {
        return Long.toString(id);
    }

} 
```

此解决方案的唯一缺点是序列化 XML 中存在一个附加标记（在这种情况下`<referenceId>`）。我试图通过注释该 getter 来删除它，`@XmlTransient`但随后我收到错误消息，通知 ID 在引用的类中不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-03T22:35:31.530

只需更换

```
 @XmlElement(type=Long.class)
private long id; 
```

和

```
 @XmlSchemaType(name = "long")
protected Long id; 
```

# html - 使用 Javascript 进行水平滚动的页面大小校正

> ID：14053071
> 
> 赞同：0
> 
> 时间：2012-12-27T10:23:46.430
> 
> 标签：html, css

我正在尝试在使用 scroll.js 的水平滚动网站中使用页面校正（针对不同分辨率的不同浏览器）。这是我的页面更正代码：

```
function getPageSize() {
    var de = document.documentElement;
    var w = window.innerWidth || self.innerWidth || (de && de.clientWidth) || document.body.clientWidth;
    var h = window.innerHeight || self.innerHeight || (de && de.clientHeight) || document.body.clientHeight;
    arrayPageSize = [w, h];
    return arrayPageSize;
}
$(document).ready(function () {
    var page = getPageSize();
    var x = page[0];
    var y = page[1];
    $(".slide1").css({
        width: (x) + 'px'});
    $(".slide2").css({
        width: (x) + 'px'}); 
```

在我的代码中，我试图设置`width`of`slide1`和`slide2`等于`browser width`. 我的问题是：是否有任何简短的方法可以做到这一点，否则我将不得不为所有`slide`s 重复相同的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:28:04.783

由于您使用的是类：

只需使用 css 将您的类（如 .slide）声明为宽度 100%

```
.slide
{
    width: 100%;
} 
```

您不一定需要使用 javascript 来完成此操作，这就是 css 的用途:)

# linux-kernel - Linux Kernel Boot Arguments 在哪里解析

> ID：14053072
> 
> 赞同：3
> 
> 时间：2012-12-27T10:23:49.693
> 
> 标签：linux-kernel, command-line-arguments

我正在使用 Android Linux 内核。内核为 P970 V30B 内核。可[在此处](http://www.lg.com/global/support/opensource/opensource-detail.jsp?detailCustomerModelCode=LGP970)获得。我想了解特定 cmdline 参数的确切作用。

我知道它是命令行参数，并且包含一个参数，我无法找到它的确切作用。这不是标准的命令行参数（我找不到任何文档），我怀疑它是特定于这个内核的。我想找出那个特定的 cmdline 参数究竟做了什么。

我能找到的关于这个主题的最佳参考是[this](http://www.kernel.org/doc/man-pages/online/pages/man7/bootparam.7.html)。这告诉我它在哪里解析参数，但它没有足够的细节来说明我想要找出的内容。

我查看了命令行解析的源代码，但它跳来跳去很多，我找不到它实际解析各个命令的位置。

我正在寻找一种方法来获取它解析命令参数的位置。我尝试了各种 fgrep 命令来查找包含参数的字符串作为起点，但无济于事。

任何有关该主题的帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:30:46.453

查看文件 cmdline.c

[http://lxr.hpcs.cs.tsukuba.ac.jp/#linux/lib/cmdline.c](http://lxr.hpcs.cs.tsukuba.ac.jp/#linux/lib/cmdline.c)

你有函数 get_option()、get_options() 等。

它们应该在实际参数被读取和分派的地方使用。

编辑：实际解析在文件 main.c 中

[http://lxr.hpcs.cs.tsukuba.ac.jp/#linux/init/main.c](http://lxr.hpcs.cs.tsukuba.ac.jp/#linux/init/main.c)

# java - 如果所有条目都以链接方式存储在同一索引下，为什么 HashMap 空间会扩大

> ID：14053073
> 
> 赞同：2
> 
> 时间：2012-12-27T10:23:49.643
> 
> 标签：java, optimization, hashmap

从java [HashMap的源码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java)中可以清楚的看出，当达到空间阈值时，它的空间扩大了两次。

我想到了一个用例，其中所有 6 个元素以链接方式存储在同一索引下。当第 7 个元素到达时，阈值为 7(10*.75) 的 HashMap(size 10) 得到扩展。这里实际上不需要扩展，因为所有都保存在一个索引下。

请赐教

```
 void addEntry(int hash, K key, V value, int bucketIndex)
        {
            Entry<K,V> e = table[bucketIndex];
            table[bucketIndex] = new Entry<K,V>(hash, key, value, e);
            if (size++ >= threshold)
                resize(2 * table.length);
        }

        void resize(int newCapacity)
        {
            Entry[] oldTable = table;
            int oldCapacity = oldTable.length;
            if (oldCapacity == MAXIMUM_CAPACITY) {
                threshold = Integer.MAX_VALUE;
                return;
            }

            Entry[] newTable = new Entry[newCapacity];
            transfer(newTable);
            table = newTable;
            threshold = (int)(newCapacity * loadFactor);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:26:08.807

你说没有必要调整大小，因为`HashMap`可以容纳这些条目。

然而，`HashMap`理想情况下应该提供恒定的访问时间（`O(1)`）。调整大小是为了尝试提供此访问时间。通过重新组织存储桶，对键的查找应该理想地引用只有一个值的存储桶（以避免遍历条目列表）。

在`get()`方法中你会发现这一行：

```
for (Entry<K,V> e = table[indexFor(hash, table.length)]; 
```

HashMap 是使用该`indexFor()`方法来识别桶，然后它会遍历桶以找到匹配的键。为了优化这一点，理想情况下迭代应该只发生一次（你不能避免桶查找）

这表明哈希码在理想情况下均匀分布在`int`范围 (2^31-1) 中。您*可以*将对象的哈希码设为常量（例如 1），但随后您会看到 HashMap 只能将所有条目转储到一个存储桶中，因此无法执行任何操作，从而影响性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:30:22.137

这只是一个设计决定。可能是基于地图在检索和存储方面应该非常快的事实，如果您最终链接了这么多条目，性能将会受到影响。因此，重新散列可能会将您的项目分散到存储桶中，而不是将它们链接在一个存储桶中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-11T18:31:21.657

它是一种贸易。大小较小时位于同一桶中的所有元素将随着大小的增加而分散。这提高了性能。

# php - jQuery 循环上一个/下一个按钮图像

> ID：14053075
> 
> 赞同：1
> 
> 时间：2012-12-27T10:24:04.760
> 
> 标签：php, jquery, css, drupal-7, cycle

我正在使用 Drupal 7 和 Field Slideshow 插件。我发布了我的幻灯片并开始工作。它有一个寻呼机，名称为“上一个”和“下一个”

我不想要文字，必须图像。我该怎么做？

```
<div id="field-slideshow-<?php print $slideshow_id; ?>-controls" class="field-slideshow-controls">
  <a href="#" class="prev"><?php print t('Prev'); ?></a>
  <?php if (!empty($controls_pause)) : ?>
    <a href="#" class="play"><?php print t('Play'); ?></a>
    <a href="#" class="pause"><?php print t('Pause'); ?></a>
  <?php endif; ?>
  <a href="#" class="next"><?php print t('Next'); ?></a>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:29:14.577

```
<div id="field-slideshow-<?php print $slideshow_id; ?>-controls" class="field-slideshow-controls">
  <a href="#" class="prev"></a>
  <?php if (!empty($controls_pause)) : ?>
    <a href="#" class="play"><?php print t('Play'); ?></a>
    <a href="#" class="pause"><?php print t('Pause'); ?></a>
  <?php endif; ?>
  <a href="#" class="next"></a>
</div> 
```

和这样的风格：

```
.prev {
    display:inline-block;
    width:20px;
    height:20px;
    background: transparent url('path/to/prev/image.png') no-repeat center center;
}

.next {
    display:inline-block;
    width:20px;
    height:20px;
    background: transparent url('path/to/next/image.png') no-repeat center center;
} 
```

或者你可以有这样的东西：

```
<div id="field-slideshow-<?php print $slideshow_id; ?>-controls" class="field-slideshow-controls">
      <a href="#" class="prev"><img scr="path/to/prev/image.png" alt="<?php print t('Prev'); ?>" /></a>
      <?php if (!empty($controls_pause)) : ?>
        <a href="#" class="play"><?php print t('Play'); ?></a>
        <a href="#" class="pause"><?php print t('Pause'); ?></a>
      <?php endif; ?>
      <a href="#" class="next"><img scr="path/to/next/image.png" alt="<?php print t('Next'); ?>"  /></a>
    </div> 
```

# c# - ASP.NET MVC：多次匹配正则表达式

> ID：14053077
> 
> 赞同：0
> 
> 时间：2012-12-27T10:24:15.353
> 
> 标签：c#, .net, regex, asp.net-mvc

正则表达式：`^.*?(?=;)`
值：`00574/KVMK0224.jpg; 00574/1987432370PHANWHCO00MM.jpg`
现在只匹配：`00574/KVMK0224.jpg`
想要：`00574/KVMK0224.jpg`和`00574/1987432370PHANWHCO00MM.jpg`

当我试图尽快解释时，我有一个包含多个图像链接的字符串，我使它能够获取第一个链接，但现在我想要所有链接。我知道如何`regex.Matches`在 C# 中使用来获得多个匹配项，我唯一想知道的是为此使用什么正则表达式。

我必须得到第一个链接：

```
 Regex regex = new Regex("^.*?(?=;)");
    Match match = regex.Match(link);
    if (match.Success)
    {
      part.ImageUrl = match.Value;
    } 
```

我为了获得所有链接所做的一切，我认为这一切都是正确的，当然是正则表达式

```
 Regex regex = new Regex("^.*?(?=;)");
    foreach (Match match in regex.Matches(link))
    {
      list.Add(match.Value);
    } 
```

这样做可能很简单，但我对正则表达式没有太多经验。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:31:36.243

如果所有值都被分隔， `;`那么您不需要正则表达式。试试这个：

```
string imagesString = "....";
string[] images = imagesString.Split(new char[] { ';' }, StringSplitOptions.RemoveEmptyEntries); 
```

编辑：在这里，您有一个使用正则表达式并处理空格的替代方法：

```
string imagesText = "00574/KVMK0224.jpg; 00574/1987432370PHANWHCO00MM.jpg";
string[] images = Regex.Split(imagesText, @"\s*;\s*"); 
```

这将在之前或之后使用或不使用空格`;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:38:07.087

也许你可以试试这个？

```
[\w/]*?.jpg(?=;)? 
```

# java - SimpleDateFormat 返回 24 小时日期：如何获取 12 小时日期？

> ID：14053079
> 
> 赞同：54
> 
> 时间：2012-12-27T10:24:21.937
> 
> 标签：java, android, simpledateformat

我想要以毫秒为单位的当前时间，然后以 12 小时格式存储它，但是使用这段代码，我得到了 24 小时格式时间。

```
long timeInMillis = System.currentTimeMillis();
Calendar cal1 = Calendar.getInstance();
cal1.setTimeInMillis(timeInMillis);
SimpleDateFormat dateFormat = new SimpleDateFormat("dd/mm/yyyy HH:mm:ss a");
dateforrow = dateFormat.format(cal1.getTime()); 
```

有人可以建议修改以获得预期的结果吗？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-12-27T10:25:01.237

更改`HH`为`hh`_

```
long timeInMillis = System.currentTimeMillis();
Calendar cal1 = Calendar.getInstance();
cal1.setTimeInMillis(timeInMillis);
SimpleDateFormat dateFormat = new SimpleDateFormat(
                                "dd/MM/yyyy hh:mm:ss a");
dateforrow = dateFormat.format(cal1.getTime()); 
```

请注意`dd/mm/yyyy`- 会给你*分钟*而不是*月份*。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-12-27T10:30:07.773

参考[SimpleDataFormat JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)：

```
Letter | Date or Time Component | Presentation | Examples
---------------------------------------------------------
   H   |  Hour in day (0-23)    |    Number    |    0
   h   |  Hour in am/pm (1-12)  |    Number    |    12 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-04T23:13:24.930

我也以艰难的方式再次遇到这种情况。H vs h，24 小时 vs 12 小时！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-25T05:20:15.673

是的，确认简单地使用`"hh"`而不是`"HH"`解决我的问题，因为`"hh"`是 12 小时格式和`"HH"`24 小时格式。

从此改变：

```
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm aa"); 
```

对此：

```
SimpleDateFormat sdf = new SimpleDateFormat("hh:mm aa"); 
```

`"HH"`如果您不想费心存储和处理 AM/PM，您仍然可以使用它来存储时间。然后当你检索它时，使用`"hh"`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-27T10:38:11.380

嗨，我测试了下面运行良好的代码：

```
 long timeInMillis = System.currentTimeMillis();
    Calendar cal1 = Calendar.getInstance();
    cal1.setTimeInMillis(timeInMillis);
    SimpleDateFormat dateFormat = new SimpleDateFormat("dd/mm/yyyy hh:mm:ss a");
    dateFormat.format(cal1.getTime()); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-06-12T09:10:52.563

您的代码存在***三个主要问题：***

1.  使用`m`[Minute in hour] 代替`M`[Month in year]。
2.  使用`H`[Hour in day (0-23)] 而不是`h`[Hour in am/pm (1-12)]。查看[文档](https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)以了解有关这两点的更多信息。
3.  不`Locale`与`SimpleDateFormat`. 选中[Never use SimpleDateFormat or DateTimeFormatter without a Locale](https://stackoverflow.com/a/65544056/10819573)以了解更多信息。

因此，具有正确格式的实例化将是：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy hh:mm:ss a", Locale.ENGLISH); 
```

# *java.time*

请注意，`java.util`日期时间 API 及其格式化 API`SimpleDateFormat`已过时且容易出错。建议完全停止使用它们并切换到[现代 Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) ^*，该 API 于 2014 年 3 月作为 Java SE 8 标准库的一部分发布。

**使用`java.time`现代日期时间 API 的解决方案：**

```
import java.time.OffsetDateTime;
import java.time.ZoneOffset;
import java.time.format.DateTimeFormatter;
import java.util.Locale;

public class Main {
    public static void main(String[] args) {
        OffsetDateTime odt = OffsetDateTime.now(ZoneOffset.UTC);
        DateTimeFormatter dtf = DateTimeFormatter.ofPattern("dd/MM/uuuu hh:mm:ss a", Locale.ENGLISH);
        String formatted = dtf.format(odt);
        System.out.println(formatted);
    }
} 
```

在这里，您可以使用`y`代替，`u`但[我更喜欢`u`使用`y`](https://stackoverflow.com/a/65928023/10819573).

[`ONLINE DEMO`](https://ideone.com/Uxbz7V)

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关现代日期时间 API 的更多信息。

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-09-19T05:59:27.087

你可以这样试试

```
 Calendar c= Calendar.getInstance();

  SimpleDateFormat sdf= new SimpleDateFormat("dd/MM/yyyy hh:mm:ss a");
  String str=sdf.format(c.getTime()); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-27T10:26:21.483

```
SimpleDateFormat dateFormat = new SimpleDateFormat("dd/mm/yyyy hh:mm:ss a"); 
```

使用`hh`代替`HH`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-30T04:29:11.390

只需按照代码

```
public static String getFormatedDate(String strDate,StringsourceFormate,
                                     String destinyFormate) {
    SimpleDateFormat df;
    df = new SimpleDateFormat(sourceFormate);
    Date date = null;
    try {
        date = df.parse(strDate);

    } catch (ParseException e) {
        e.printStackTrace();
    }

    df = new SimpleDateFormat(destinyFormate);
    return df.format(date);

} 
```

并将值传递给这样的函数，

```
getFormatedDate("21:30:00", "HH:mm", "hh:mm aa"); 
```

或查看此文档[SimpleDateFormat](https://developer.android.com/reference/java/text/SimpleDateFormat)以获取 StringsourceFormate 和 fortuneFormate。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-07-25T08:25:49.283

请参见下面的代码示例：

```
SimpleDateFormat df = new SimpleDateFormat("hh:mm");
String formattedDate = df.format(new Date());
out.println(formattedDate); 
```

# c++ - 在代码块和 vs9 编译器中无法识别带有“lib”头的库文件名

> ID：14053080
> 
> 赞同：0
> 
> 时间：2012-12-27T10:24:26.443
> 
> 标签：c++, visual-studio, boost, codeblocks

这个环境是win7,codeblocks,vs9,boost1.52,

我已经安装了带有python库的boost库。它会生成一些库文件。例如“libboost_python-vc90-mt-gd-1_52.lib”。

然后我写了一个测试代码进行编译和链接。但是出现错误：无法打开文件“boost_python-vc90-mt-gd-1_52.lib”。

VS 编译器无法识别带有“lib”头的库文件名？如何做得更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:29:06.447

`lib`在名称的开头添加前缀是 Linux 的事情。在 Windows`.lib`上，末尾有 a 。

如果库被命名为“libboost_python-vc90-mt-gd-1_52”，您必须将该名称准确地提供给链接器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T09:44:08.870

首先，Boost 在 Windows 下使用自动链接。因此，您只需要提供 boost 库的*位置*，而不是名称本身。

其次，Boost 对静态和动态链接库使用不同的文件名。带`lib`前缀的用于静态链接，不带前缀的用于动态链接。

默认情况下，Boost 在 Windows 上使用静态链接。定义`BOOST_ALL_DYN_LINK`（如果您只想动态链接某些库，也有特定于库的宏）将启用动态链接。

从您的错误消息来看，您的项目似乎已`BOOST_ALL_DYN_LINK`启用（在项目设置中，作为 a`#define`或 in `<boost/config/user.hpp>`。如果您更喜欢静态链接，请确保更改/删除此设置。

无论哪种方式，请确保相应的二进制文件可用并且链接器知道它们的位置（只是目录）。

# javascript - 仅在 kineticjs 中拖动底层

> ID：14053085
> 
> 赞同：0
> 
> 时间：2012-12-27T10:24:51.920
> 
> 标签：javascript, html5-canvas, kineticjs

我正在尝试找到一种方法来拖动和重新定位位于另一个（更大）图像下方的图像。所以基本上我想让框架完全忽略顶部图像。我试过让它不可拖动，但它仍然覆盖了底部图像并阻止我调整它的大小。有人对此有好运吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:42:10.267

如果两个图像在同一层，那么您可以更改 z-index 并在单击时将图像移动到前面。(.moveToTop())

如果没有，那么您必须在单击时更改图层的 z-index，以便较大的图像不会覆盖较小的图像。

# android - 如何在 android 的 Google 地图上绘制动态路线或路径？谁能给我一个例子？

> ID：14053090
> 
> 赞同：0
> 
> 时间：2012-12-27T10:25:16.867
> 
> 标签：android

如何在 android 的 Google 地图上绘制动态路线或路径？

谁能给我一个例子？如何在地图上实时绘制我的 GPS 位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:51:06.073

只需使用 API 的 V2，它就像使用`for loop`

```
PolylineOptions p = new PolylineOptions().width(3).color(0xFFEE8888);
for (int i = 0; i < data.length; i++) {
    p.add(new LatLng(lat, lng));
}
mMap.addPolyline(p); 
```

# mongodb - MongoDB 聚合和 MapReduce 一样慢？

> ID：14053094
> 
> 赞同：7
> 
> 时间：2012-12-27T10:25:34.747
> 
> 标签：mongodb, mapreduce, pymongo, nosql

我刚开始使用 mongo db 并尝试做一些简单的事情。我用包含“item”属性的数据集合填充了我的数据库。我想尝试**计算每个项目**在集合中的时间

文档示例：

```
{ "_id" : ObjectId("50dadc38bbd7591082d920f0"), "item" : "Pons", "lines" : 37 } 
```

所以我设计了这两个函数来做 MapReduce（使用 pymongo 用 python 编写）

```
all_map = Code("function () {"
           "    emit(this.item, 1);"
           "}")

all_reduce = Code("function (key, values) {"
                  " var sum = 0;"
                  " values.forEach(function(value){"
                  "     sum += value;"
                  " });"
                  " return sum;"
                  "}") 
```

这就像一个魅力，所以我开始填充收藏。在大约 30.000 个文档中，mapreduce 的持续时间已经超过一秒……因为 NoSQL 吹嘘速度，我想我一定是做错**了什么**！

Stack Overflow 上的一个问题让我查看了 mongodb 的聚合功能。所以我尝试使用 group + sum + sort thingies。想出了这个：

```
db.wikipedia.aggregate(
 { $group: { _id: "$item", count: { $sum: 1  }  } }, 
 { $sort: {count: 1}  }
) 
```

这段代码工作得很好，给了我与 mapreduce 集相同的结果，但它同样慢。难道我做错了什么？我真的需要使用像**hadoop**这样的其他工具来获得**更好的性能**吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T21:06:17.777

我将给出一个基本上总结我的评论的答案。我不能代表 Hadoop 等其他技术，因为我还没有找到时间使用它们的乐趣，但我可以代表 MongoDB。

不幸的是，您对任何数据库都使用了两个最差的运算符：计算字段和全表扫描上的分组（或不同）。在这种情况下，聚合框架必须计算字段、组，然后在内存中 ( [http://docs.mongodb.org/manual/reference/aggregation/#_S_sort](http://docs.mongodb.org/manual/reference/aggregation/#_S_sort) ) 对计算字段进行排序。对于 MongoDB 来说，这是一项效率极低的任务，实际上很可能是任何数据库。

没有简单的方法可以根据您自己的应用程序实时执行此操作。如果您不需要立即返回结果，则 Map reduce 可能是一种出路，但由于我猜您真的不想等待这种东西，因此默认方法只是完全消除该组。

You can do this by pre-aggregation. So you can create another collection of `grouped_wikipedia` and in your application you manage this using an `upsert()` with atomic operators like `$set` and `$inc` (to count the occurrences) to make sure you only get one row per `item`. This is probably the most sane method of solving this problem.

This does however raise another problem of having to manage this extra collection alongside the detail collection `wikipedia` but I believe this to be a unavoidable side effect of getting the right performance here. The benefits will be greater than the loss of having to manage the extra collection.

# android - Android：如何使用意图关闭progressdailog

> ID：14053095
> 
> 赞同：0
> 
> 时间：2012-12-27T10:25:35.297
> 
> 标签：android, android-intent, progressdialog

我有两个活动，在`activityA`我有一个图标，单击该图标我正在向其他人发送一个意图`activityB`，即调用 facebook 页面（自定义 dailog），因为`fbdailog`我正在尝试实现加载时间`progressdailog`，下面是我的代码

```
ImageView faceBookIntegration = (ImageView) activity
                .findViewById(R.id.facebookintegration);
        faceBookIntegration.setOnTouchListener(new OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {
                Constants.isLayoutTouched = true;
                switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN: {

                    CityAttractions.this.runOnUiThread(new Runnable() {
                        public void run() {
                         dialog = ProgressDialog.show(CityAttractions.this, "","Please wait...", true);
                            dialog.show();
                        }
                    });

                    Intent menuSettingsIntent = new Intent(CityAttractions.this, ShareOnFacebook.class);
                    menuSettingsIntent.putExtra("facebookMessage", "Msg");
                    startActivityForResult(new Intent(menuSettingsIntent).addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT), 1);                  

                    break;              
                }                       
                case MotionEvent.ACTION_MOVE:
                    break;
                case MotionEvent.ACTION_UP:
                    break;
                }
                return false;
            }

        });

    } 
```

问题是在发布或取消之后`fbdailog`，`progressdailog`仍然可见，我该如何关闭`progreessdailog`from `activityA`。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:34:21.543

在`onActivityResult()`ActivityA 中做：

```
if (dialog != null) {
    dialog.dismiss();
} 
```

# jquery - 使用 jquery 计算 unicode 字符

> ID：14053097
> 
> 赞同：0
> 
> 时间：2012-12-27T10:25:44.383
> 
> 标签：jquery, unicode, sms

我想修改这个 jquery 脚本来计算 unicode 字符（第一个短信为 70，第二个短信为 63（连接）：

```
 <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script>
$(document).ready(function(){

    part1Count = 160;
    part2Count = 145;
    part3Count = 152;

    $('#message').keyup(function(){
        var chars = $(this).val().length;
            messages = 0;
            remaining = 0;
            total = 0;
        if (chars <= part1Count) {
            messages = 1;
            remaining = part1Count - chars;
        } else if (chars <= (part1Count + part2Count)) { 
            messages = 2;
            remaining = part1Count + part2Count - chars;
        } else if (chars > (part1Count + part2Count)) { 
            moreM = Math.ceil((chars - part1Count - part2Count) / part3Count) ;
            remaining = part1Count + part2Count + (moreM * part3Count) - chars;
            messages = 2 + moreM;
        }
        $('#remaining').text(remaining);
        $('#messages').text(messages);
        $('#total').text(chars);
        if (remaining > 1) $('.cplural').show();
            else $('.cplural').hide();
        if (messages > 1) $('.mplural').show();
            else $('.mplural').hide();
        if (chars > 1) $('.tplural').show();
            else $('.tplural').hide();
    });
    $('#message').keyup();
});
</script>

<textarea name="message" value="" id="message"></textarea>
<div>
    <div><span id="remaining">160</span>&nbsp;Character<span class="cplural">s</span> Remaining</div>
    <div>Total&nbsp;<span id="messages">1</span>&nbsp;Message<span class="mplural">s</span>&nbsp;<span id="total">0</span>&nbsp;Character<span class="tplural">s</span></div>
</div> 
```

来源： http: [//www.mindrestingplace.com/2012/07/18/sms-character-counter/](http://www.mindrestingplace.com/2012/07/18/sms-character-counter/)

# testing - 如何以随机顺序运行采样器/采样器组

> ID：14053100
> 
> 赞同：0
> 
> 时间：2012-12-27T10:25:45.697
> 
> 标签：testing, jmeter, load-testing, stress-testing

我有一个“线程组”，它有 15 个“HTTP 请求”。我想随机执行这些请求，它们按顺序执行，就像一个接一个

```
HTTP Request 1
HTTP Request 2
HTTP Request 3
.
.
HTTP Request 15 
```

我希望他们像随机执行

```
HTTP Request 7
HTTP Request 2
HTTP Request 15
.
.
HTTP Request 3 
```

我怎样才能做到这一点？

第二个问题：我想制作一组特定的请求，然后希望它们随机运行。例如，我有这 3 个请求集，称之为“Set A”

```
1- New Subject Request
2- Enroll in Subject Request
3- Delete Enrolment Request 
```

然后我有另一套，称之为'Set B'

```
1- New Student Request
2- Student Class Request
3- Delete Student Class 
```

现在我希望这两个集合（A，B）以随机顺序执行，但这些集合中的请求必须以与给定相同的顺序运行。

如何做呢？如何使某些请求的集合以及如何使它们以随机顺序运行但以特定顺序请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:45:33.960

您可以通过将采样器置于[Random Order Controller](http://jmeter.apache.org/usermanual/component_reference.html#Random_Controller)下来随机执行采样器：

> 随机顺序控制器很像一个简单控制器，因为它最多会执行每个子元素一次，但节点的执行顺序将是随机的。

要随机执行采样器集，请将带有采样器的简单控制器放在随机顺序控制器下（它只会随机化直接子级）：

```
Random Order Controller
  Simple Controller A
    New Subject Request
    Enroll in Subject Request
    Delete Enrolment Request
  Simple Controller B
    New Student Request
    Student Class Request
    Delete Student Class 
```

# python - python Queue.queue 获取并放置线程安全吗？

> ID：14053102
> 
> 赞同：32
> 
> 时间：2012-12-27T10:25:59.767
> 
> 标签：python

[http://docs.python.org/2/library/queue.html#Queue.Queue.put](http://docs.python.org/2/library/queue.html#Queue.Queue.put)

这似乎是一个幼稚的问题，但我在文档和谷歌搜索中都没有找到答案，那么这些方法是线程安全的吗？我假设是这样，否则这个队列没有意义。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-27T10:28:30.943

请参阅[8.10 队列 —*同步*队列类](http://docs.python.org/2/library/queue.html#module-Queue)（在顶部）

> Queue 模块实现了多生产者、多消费者队列。*当必须在多个线程之间安全地交换信息时，它在线程编程中特别有用。*

# rest - 未能序列化内容类型的响应正文

> ID：14053109
> 
> 赞同：16
> 
> 时间：2012-12-27T10:26:33.610
> 
> 标签：rest, fluent-nhibernate, asp.net-mvc-4, asp.net-web-api

我正在构建一个同时使用控制器和 ApiControllers 的 MVC4 应用程序。我修改了默认的 Web API 路由以包含操作名称。当我尝试获取基准列表时，我收到以下错误消息：

> “ObjectContent`1”类型无法序列化内容类型“application/json”的响应正文；字符集=utf-8'

InnerException 是这样的（在这种情况下我将返回 JSON，XML 也会发生同样的情况）：

```
"InnerException": {
"Message": "An error has occurred.",
"ExceptionMessage": "Error getting value from 'IdentityEqualityComparer' on 'NHibernate.Proxy.DefaultLazyInitializer'.",
"ExceptionType": "Newtonsoft.Json.JsonSerializationException",
"StackTrace": " at Newtonsoft.Json.Serialization.DynamicValueProvider.GetValue(Object target) at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty) at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty) at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeISerializable(JsonWriter writer, ISerializable value, JsonISerializableContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty) at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty) at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeObject(JsonWriter writer, Object value, JsonObjectContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty) at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty) at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeList(JsonWriter writer, IWrappedCollection values, JsonArrayContract contract, JsonProperty member, JsonContainerContract collectionContract, JsonProperty containerProperty) at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.SerializeValue(JsonWriter writer, Object value, JsonContract valueContract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerProperty) at Newtonsoft.Json.Serialization.JsonSerializerInternalWriter.Serialize(JsonWriter jsonWriter, Object value) at Newtonsoft.Json.JsonSerializer.SerializeInternal(JsonWriter jsonWriter, Object value) at System.Net.Http.Formatting.JsonMediaTypeFormatter.<>c__DisplayClassd.<WriteToStreamAsync>b__c() at System.Threading.Tasks.TaskHelpers.RunSynchronously(Action action, CancellationToken token)",
"InnerException": {
"Message": "An error has occurred.",
"ExceptionMessage": "Common Language Runtime detected an invalid program.",
"ExceptionType": "System.InvalidProgramException",
"StackTrace": " at GetIdentityEqualityComparer(Object ) at Newtonsoft.Json.Serialization.DynamicValueProvider.GetValue(Object target)"
} 
```

这是我运行的代码：

```
// GET api/benchmark/getincomplete
        [HttpGet]
        public IList<Benchmark> GetIncomplete()
        {
            var s = HibernateModule.CurrentSession;
            var benchList = s.QueryOver<Benchmark>()
                                .Where(b => !b.Completed)
                                .Where(b => !b.Deleted)
                                .OrderBy(b => b.Id).Asc
                                .List<Benchmark>();

            return benchList;
        } 
```

这是基准模型：

```
public class Benchmark
    {
        public virtual int Id { get; set; }
        [Required]
        [DataType(DataType.Date)]
        public virtual DateTime Date { get; set; }
        [Required, ScriptIgnore]
        public virtual IList<TestResult> Results { get; set; }
        [Required]
        public virtual IList<TestCase> TestCases { get; set; }
        [AllowHtml]
        public virtual string Description { get; set; }
        public virtual Device Device { get; set; }        
        public virtual bool Published { get; set; }
        [Display(Name = "Deleted"), ScriptIgnore]
        public virtual bool Deleted { get; set; }
        public virtual bool Completed { get; set; }

        public Benchmark() 
        {
            Results = new List<TestResult>();
            TestCases = new List<TestCase>();
            Published = false;
            Deleted = false;
            Completed = false;
        }
    } 
```

我不太确定问题出在哪里。会不会是 NHibernate 代理（我使用 Fluent NHibernate）？奇怪的是，如果我不使用 ApiController 并手动返回 JSON，这将非常完美！

更新：

根据下面的答案，这是我必须在 Application_Start() 中添加的代码：

```
HttpConfiguration config = GlobalConfiguration.Configuration;
((DefaultContractResolver)config.Formatters.JsonFormatter.SerializerSettings.ContractResolver).IgnoreSerializableAttribute = true; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T06:42:26.807

这修复了 JSON 错误，祝 XML 好运。将此添加到注册方法下的 WebApiConfig 类中。

```
 var json = config.Formatters.JsonFormatter;
  json.SerializerSettings.PreserveReferencesHandling=Newtonsoft.Json.PreserveReferencesHandling.Objects;
  config.Formatters.Remove(config.Formatters.XmlFormatter); 
```

更新：

我找到了两个解决方案。第一个也是最容易实现的是将任何 IEnumerables、ICollections 更改为 List 类型。WebAPI 可以序列化这些对象，但是它不能序列化接口类型。

```
public class Store
{

  [StringLength(5)]
    public string Zip5 { get; set; }

    public virtual List<StoreReport> StoreReports { get; set; }  //use a list here
 } 
```

另一种选择是不使用本机 JSON 序列化程序，我发布的第一种方法仍然有效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-27T14:27:35.483

NHibernate 框架中的[`IdentityEqualityCompairer`](https://github.com/nhibernate/nhibernate-core/blob/master/src/NHibernate/IdentityEqualityComparer.cs)似乎有`[SerializableAttribute]`注解。

取自这里对答案的评论[为什么 Web API 不会反序列化，但 JSON.Net 会？](https://stackoverflow.com/questions/12843972/why-wont-web-api-deserialize-this-but-json-net-will)看起来 JSON.NET 在 WebApi 使用和独立使用之间的配置略有不同。

> Json.NET 序列化程序默认将 IgnoreSerializableAttribute 设置为 true。在 WebAPI 中，我们将其设置为 false。

因此，鉴于您无法`[SerializableAttribute]`关闭（因为它不在您的代码中），您可以尝试更改默认 WebApi JSON.NET 设置以[在此处](https://stackoverflow.com/questions/13263988/asp-net-web-api-and-serializable-class)使用此答案忽略它：

```
((DefaultContractResolver)config.Formatters.JsonFormatter.SerializerSettings.ContractResolver).IgnoreSerializableAttribute = true; 
```

*也许还可以考虑*使用 DTO 将结果发送到响应中 - 这将使您完全控制通过网络发送的对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T06:39:19.823

嗯，以下可能会有所帮助。

我遇到了同样的异常，在我的情况下，我首先传递了为实体代码创建的实际 poco 实体。因为它包含导航属性，例如 IList Locations，所以我只是在它上面创建了 viewmapper/dto 实体以返回。

它现在可以找到。

Poco 实体：

```
public class Tag
{
public int Id{get;set;}
public string Title{get;set;}
public IList<Location> Locations{get;set;}
} 
```

ViewMapper/Dto

```
public class TagResultsViewMapper
{
public int Id{get;set;}
public string Title{get;set;}
//just remove the following relationship 
//public IList<Location> Locations{get;set;}
} 
```

# iphone - 每次点击不同的图像

> ID：14053111
> 
> 赞同：1
> 
> 时间：2012-12-27T10:26:44.093
> 
> 标签：iphone, ios, uiimageview

在我的应用程序中，我有 4 张图像。我想在每次点击时显示不同的图像。如何在每次点击时显示不同的图像？

这是我的单张图片代码：

```
-(void)removeImageView
{   
    rightongbanner.image=Nil;
}

-(void)alertshow
{
    rightongbanner.image=[UIImage  imageNamed:@"correct.png"];
    timer = [NSTimer scheduledTimerWithTimeInterval:2.5 target:self selector:@selector(removeImageView) userInfo:nil repeats:NO];
    [aplayer play];
} 
```

在`rightongbanner.image`中，我想在第一次单击时显示 img1，在第二次单击时显示 img2。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:34:22.610

试试这样

在`.h`

```
int a; 
```

在`.m`

```
-(void)loadView  {
    a=0;
}

-(void)alertshow
{
   if((a%4)==0)
       rightongbanner.image=[UIImage  imageNamed:@"correct1.png"];
   if((a%4)==1)
       rightongbanner.image=[UIImage  imageNamed:@"correct2.png"];
   if((a%4)==2)
       rightongbanner.image=[UIImage  imageNamed:@"correct3.png"];
   if((a%4)==3)
       rightongbanner.image=[UIImage  imageNamed:@"correct4.png"];

  timer = [NSTimer scheduledTimerWithTimeInterval:2.5 target:self selector:@selector(removeImageView) userInfo:nil repeats:NO];
     [aplayer play];
  a++;
} 
```

# php - CakeEmail 如何在堆栈跟踪之前确定失败？

> ID：14053112
> 
> 赞同：2
> 
> 时间：2012-12-27T10:26:44.653
> 
> 标签：php, cakephp, cakephp-2.0

我试图捕捉电子邮件失败的时间，以便我可以将所需的数据保存在我的数据库中，然后我可以尝试在以后发送。

我认为以下内容应该像使用时一样工作`save()`

```
 if ( $email->send() ) {
            //..success - works..
        } else {
            //..fail - never gets here, stack trace
        } 
```

![http://i.imgur.com/xY8rq.png](../Images/c6b2859619d9f883da190360206e617d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:01:51.090

显然你在那里没有处于调试模式。如果你是，你会看到这实际上引发了异常。

并且您正在那里捕获某物，而不是抛出异常:)

尝试这个：

```
try {
    $success = $email->send();
    ...
} catch (SocketException $e) { // Exception would be too generic, so use SocketException here
    $errorMessage = $e->getMessage();
    ...
} 
```

这样你就可以捕获异常并在这里做某事。

# tcl - 如何在 tcl 中将 eth0 配置为发送方 udp 端口

> ID：14053113
> 
> 赞同：0
> 
> 时间：2012-12-27T10:27:06.567
> 
> 标签：tcl

我的电脑有多个网络接口。我只想将 eth0 配置为 udp 发送方，以便将数据包发送到其他电脑。我们如何指定要配置为 udp 发送方的接口名称。我已经安装了 libudp-tcl，但找不到方法。谁能告诉我这样做的确切方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:15:37.187

udp 包不能做你想做的事。正如 kostix 提到的，您始终可以在 C 级别修改 udp 包以将绑定接口公开给 tcl。

但是还有另一种解决方法。

在 Linux 上，您可以使用 iptables 将特定端口的数据包限制为仅通过特定接口。因此，只需打开您选择的 UDP 端口（例如 9999），然后只允许来自该端口的数据包通过 eth0 并从其他接口丢弃它。

例如，假设您的应用程序使用 UDP 端口 9999，然后设置以下 iptables 规则：

```
# Accept udp packets from port 9999 for eth0
iptables -A OUTPUT -i eth0 -p udp --source-port 9999 -j ACCEPT
# Drop udp packets from port 9999 for all other interfaces
iptables -A OUTPUT -p udp --source-port 9999 -j DROP 
```

或者您可以使用 exec 在 tcl 中执行此操作：

```
# Warning! Need to be root to do this:
set myPort 9999
exec /sbin/iptables -A OUTPUT -i eth0 -p udp --source-port $myPort -j ACCEPT
exec /sbin/iptables -A OUTPUT -p udp --source-port $myPort -j DROP 
```

但请始终记住在程序退出之前删除添加的规则：

```
# Clearup iptables rules
exec /sbin/iptables -D OUTPUT -i eth0 -p udp --source-port $myPort -j ACCEPT
exec /sbin/iptables -D OUTPUT -p udp --source-port $myPort -j DROP 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:32:42.397

从[我收集](https://stackoverflow.com/q/3062205/720999)的信息来看，要执行您想要的操作，您首先需要`bind(2)`到一个特定的 IP 地址（其中一个可用的`eth0`），但该`udp`软件包[似乎不支持这样的任何东西](http://manpages.debian.net/cgi-bin/man.cgi?query=udp&apropos=0&sektion=3&manpath=Debian+unstable+sid&format=html&locale=en)。

所以看起来你需要自己修补包。Tcl 具有出色的 C API，因此如果您熟悉 C，这并不难。

# spring - 应用程序启动时的 Quartz 一次性作业

> ID：14053117
> 
> 赞同：11
> 
> 时间：2012-12-27T10:27:13.437
> 
> 标签：spring, cron, quartz-scheduler

我正在尝试将 Quartz 作业集成到我的 spring 应用程序中。我从[这里](http://www.mkyong.com/spring/spring-quartz-scheduler-example/)得到了这个例子。该示例显示了使用 a 以重复间隔执行的作业`simpletrigger`以及使用 a 在特定时间执行的作业`crontrigger`。

我的要求是在应用程序启动时只运行一次作业。我删除了该属性`repeatInterval`，但应用程序引发了异常：

```
org.quartz.SchedulerException: Repeat Interval cannot be zero 
```

有没有办法只安排一次工作？

谢谢..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T11:52:23.207

[在这里](https://stackoverflow.com/questions/3564361/scheduling-tasks-to-run-once-using-the-spring-task-namespace)找到了答案

忽略`repeatInterval`and 设置可以满足`repeatCount = 0`我的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-16T11:26:59.300

Spring *SimpleTriggerFactoryBean*完成了这项工作：如果您不指定开始时间，它将设置为“现在”。

然而我认为长时间运行的一次性作业应该被认为是一种反模式，因为即使在 2 节点集群中它也不会工作：如果运行该作业的节点出现故障，将没有人会重新启动工作。

我更喜欢有一个重复的工作，例如每小时重复一次，但用*@DisallowConcurrentExecution*注释。通过这种方式，您可以保证在最初托管作业的节点启动时以及在它关闭后都将运行一个作业。

# objective-c - 如何将两个 SQLite SELECT 语句与两个条件结合起来

> ID：14053119
> 
> 赞同：5
> 
> 时间：2012-12-27T10:27:27.103
> 
> 标签：objective-c, ios, sqlite, select, limit

在这里，我想从同一张桌子中选择两个不同难度的问题。我正在使用查询：

```
readAllQuestions = [NSString stringWithFormat: @"SELECT * FROM tbl_questions WHERE difficulty IN(1,3) AND approved = 1"]; 
```

它的工作。现在我想将问题限制为 100 个，它包括 50 个难度为 1 的问题和其他 50 个难度`LIMIT`为 3 的问题。仅使用前 100 个问题。

如何在不使用两个不同查询的情况下做到这一点？请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:44:22.117

您可以使用子选择来执行此操作：（假设主键称为“id”）

```
SELECT * FROM tbl_questions WHERE (id IN (SELECT id FROM tbl_questions WHERE difficulty = 1 LIMIT 0,50) OR id IN (SELECT id FROM tbl_questions WHERE difficulty = 3 LIMIT 0,50)) AND approved = 1 
```

# windows-phone-7 - 带有 7.1 参考的 Windows phone 8 App

> ID：14053120
> 
> 赞同：2
> 
> 时间：2012-12-27T10:27:29.167
> 
> 标签：windows-phone-7, reference, visual-studio-2012, compatibility, windows-phone-8

> **可能重复：**
> [引用 ZXing.Net 库](https://stackoverflow.com/questions/13698094/referencing-zxing-net-library)

我正在开发一个针对 Windows phone 8.0 OS 的应用程序当我尝试向应用程序添加版本 (7.1) 的引用时，

它给出以下错误消息：

> 无法将对更高版本或不兼容程序集的引用添加到项目中

为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T08:25:59.253

请在上一篇文章中查看此问题的[答案](https://stackoverflow.com/a/13698737/81687)。这不是“更高版本”的问题，只是 VS2012 有一个不相关的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:57:41.007

你确定它是正确的 WP7.1 程序集，因为对我来说它工作得很好。
确保它不是针对 WP7.0 构建的，它必须针对 WP7.1 - 尝试在 VS2012 中重建此程序集，据我所知，您也不能引用 XNA 库。

# groovy - 如何在soap ui中定义简单的全局函数以供每个模拟操作或服务（groovy脚本）使用？

> ID：14053125
> 
> 赞同：1
> 
> 时间：2012-12-27T10:27:43.540
> 
> 标签：groovy, soapui

我有一些通用代码在处理 SOAP UI 中的模拟服务中的每个模拟操作的响应时被调用。

我如何以及在哪里可以定义一个公共的全局可访问函数，以便我可以删除代码重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:14:29.833

这是一种解决方案，首先您需要创建如下项目，

```
soapUI Project
|__ Test Suite
   |__Test Case
      |__Test Steps
         |__Global Groovy Script
         |__Mock Response 1
         |__Mock Response 2 
```

因此，在“全局 Groovy 脚本”中，您可以创建可访问的函数。请注意，您无法从不同的测试用例访问该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T17:10:54.627

您可以将该函数放在一个带有 .groovy 扩展名的单独脚本文件中，并将此脚本保存在 scripts 文件夹中，该文件夹位于安装 SOAP UI 的目录中。

> SoapUI Pro 增加了拥有可以从 SoapUI 中的任何脚本访问的 Groovy 类中央库的可能性，这对于集中常见任务和功能以及创建 SoapUI 扩展很有用。使用如下：
> 
> *   在 SoapUI Pro Preferences 选项卡中指定要使用的文件夹（默认为 /scripts）。SoapUI Pro 将检查此文件夹中是否
>     有带有“Groovy”扩展名的文件，并在启动时编译这些文件。然后定期（每 5 秒）检查该
>     文件夹是否有更新，并在必要时编译新的或现有的脚本并重新编译。
>     
>     
> *   脚本应放置在以其包含的包命名的文件夹中，即soapui.d​​emo 包中的脚本应位于
>     指定脚本文件夹下的soapui/demo 文件夹中。
>     
>     
> *   编译后的类被添加到所有 Groovy 脚本的父类加载器中，您可以将它们作为标准 java 类访问。

[你可以在这里](http://www.soapui.org/Scripting-Properties/scripting-and-the-script-library.html)阅读更多

# php - Mediafire API PHP 开发

> ID：14053129
> 
> 赞同：8
> 
> 时间：2012-12-27T10:27:52.977
> 
> 标签：php, api, uploading, mediafire

几天前我发现了 mediafire API。

[http://developers.mediafire.com](http://developers.mediafire.com)

我在互联网上搜索是否有一个网络应用程序用于使用 API 将文件上传到 mediafire 帐户。不幸的是，我什么也没找到。有谁知道如何使用 mediafire API 和 PHP 创建文件上传网络应用程序。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T10:51:32.017

首先获取一个会话令牌。

```
$apikey = 'YOUR API KEY HERE';
$appid = 'APPLICATIONID';
$email = 'your@email.com';
$passwd = 'PASSWORD';
$params = http_build_query(array(
   'email' => $email,
   'password'=> $passwd,
   'application_id' => $appid,
   'signature' => sha1("$email$passwd$appid$apikey"),
   'response_format' => 'json'
));
$fp = fopen('https://www.mediafire.com/api/user/get_session_token.php?'.$params, 'r');
$json = stream_get_contents($fp);
$obj = json_decode($json);
fclose($fp);

$session = $obj->response->session_token; 
```

现在用这个新`$session`密钥上传一个文件。

```
$filecontents = file_get_contents("/path/to/file");
$filesize = strlen($filecontents);
$opts = array(
  'http'=>array(
    'method'=>"POST",
    'header'=> "x-filename : ANYFILENAMEYOUWANT\r\n".
               "x-filesize : $filesize\r\n"
  )
);
$context = stream_context_create($opts);
$params = http_build_query(array(
    "session_token" => $session
));
$fp = fopen('http://www.mediafire.com/api/upload/upload.php?'.$params, 'r', false, $context);
fwrite($fp, $filecontents);
$result = stream_get_contents($fp);
fclose($fp); 
```

**重要提示：**请**自行尝试**。我还没有测试过。刚刚看到API并写了这段代码。所以它不会在第一次运行时起作用。您需要进行修改以使其正常工作。

# charts - 在 AmCharts 中查找两个点值序列之间的差异？

> ID：14053134
> 
> 赞同：0
> 
> 时间：2012-12-27T10:28:22.813
> 
> 标签：charts

我正在使用`AmCharts`. 我需要在气球文本中显示值，该值不是值字段。

例如：`X axis Value 0 , Y axis 1, (0,1) is 2 ; (1,2) is 5`。

我需要显示值之间的差异`(0,1)`-`(1,2)`这意味着“3”作为点中的气球`(1,2)`。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T08:24:41.797

是的，您的屏幕截图上的图表是可以实现的。

首先，向图表数据添加其他字段，例如`labelGraph1, labelGraph2`. 然后就可以使用对象的`labelText`属性了`AmCharts.AmGraph`。

```
var chartData = [{
    title: "Apples",
    value1: 24,
    value2: 28,
    labelGraph1: null,
    labelGraph2: null
}, {
    title: "Bananas",
    value1: 27,
    value2: 31,
    labelGraph1: null,
    labelGraph2: null
}, {
    title: "Cherries",
    value1: 27,
    value2: 39,
    labelGraph1: null,
    labelGraph2: null
}];

for(var i = 0; i < chartData.length; i++) {
    chartData[i].labelGraph1 = chartData[i].value1;
    chartData[i].labelGraph2 = chartData[i].value2 - chartData[i].value1;
}

var chart;

AmCharts.ready(function () {
    // SERIAL CHART
    chart = new AmCharts.AmSerialChart();
    chart.dataProvider = chartData;
    chart.categoryField = "title";

    // GRAPHS                                            
    var graph1 = new AmCharts.AmGraph();
    graph1.valueField = "value1";
    graph1.type = "line";
    graph1.fillAlphas = 0.6;
    graph1.labelText = "[[labelGraph1]]";
    chart.addGraph(graph1);

    var graph2 = new AmCharts.AmGraph();
    graph2.valueField = "value2";
    graph2.type = "line";
    graph2.fillAlphas = 0.6;
    graph2.labelText = "[[labelGraph2]]";
    chart.addGraph(graph2);

    // WRITE
    chart.write("chartdiv")
}); 
```

唯一的困难是计算显示字段的值。我这样做了，您应该根据您的数据更改该功能：

```
for(var i = 0; i < chartData.length; i++) {
    chartData[i].labelGraph1 = chartData[i].value1;
    chartData[i].labelGraph2 = chartData[i].value2 - chartData[i].value1;
} 
```

# php - 无法在mysql中回显数据

> ID：14053135
> 
> 赞同：0
> 
> 时间：2012-12-27T10:28:23.950
> 
> 标签：php

我想获取 mysql 数据库中的数据，并在每种情况下都像在数据库中一样输出它们。但是当我显示它们时，只看单词`"Vi tri cua nguoi dung: Array"`而不看数据。我使用 JSON 进行测试，我在屏幕上得到的结果是：

```
"[{" Kinhdo ":" 106.71246126888674 "," Vido ":" 10.78865449101134 "}]" 
```

你能帮助我吗？

```
<?php
mysql_connect("xxxx","xxx","xxx");
mysql_select_db("a4602996_lv"); 
$query_insert="select Kinhdo,Vido from VietMap where id = (select max(id) from VietMap)";
$sql = mysql_query($query_insert);
    if(mysql_num_rows($sql)){
        while($row=mysql_fetch_assoc($sql)){
        $json[] = $row;
    }
}
//print(json_encode($json).'<br/>');
print 'Vi tri cua nguoi dung: '.$json['Kinhdo'];
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:43:34.460

嗨，请查看以下解决方案，希望这会对您有所帮助

```
// If you are Expecting only one row from the Query Use the following code block

if(mysql_num_rows($sql)){
  while($row=mysql_fetch_assoc($sql)){
    $json = $row; 
  }
}
//print(json_encode($json).'<br/>');
print 'Vi tri cua nguoi dung: '.$json['Kinhdo'];

/**************************************************************/

// If you are Expecting More than one row from the Query Use the following code block

if(mysql_num_rows($sql)){
  while($row=mysql_fetch_assoc($sql)){
    $json = $row; 
  }
}
//print(json_encode($json).'<br/>');
foreach($json as $j){
  print 'Vi tri cua nguoi dung: '.$j['Kinhdo'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T10:44:09.853

用这个 ：

```
if(mysql_num_rows($sql))
{
  echo "<pre />";
  while($row=mysql_fetch_assoc($sql))
  {
    print_r($row);
    $json[] = $row;
  }
  echo "</pre>";
} 
```

并且您应该为 $json 数组提供偏移量，例如：

```
$json[0]['Kinhdo'];    //for 1st record 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:30:01.850

使用 var_dump() 或 print_r() 或遍历数组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T10:30:25.410

这意味着您返回的数据是一个数组。改用**print_r** _

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T10:32:31.427

You var`$json`是一个多维数组。

```
$json[] = $row; // assining array to an array index make a array in array 
```

你需要循环扔`$json`

# ios - 在滚动 UITableView 上调用 Web 服务

> ID：14053143
> 
> 赞同：2
> 
> 时间：2012-12-27T10:28:41.160
> 
> 标签：ios, iphone, objective-c, web-services, uitableview

## 完全糊涂了！！！...

我有一个接受`pageNumber`as 参数并给我一些记录作为 JSON 响应的网络服务。（该服务基本上实现了`functionality of Paging`for Silverlight 版本。）我想在用户滚动时一一加载这些页面`UITableView`（意味着在用户滚动时加载接下来的 20 个条目（或第二页））。

**我的问题 ：**

> 如何以及在何处调用此服务以及如何计算 pageNumber ？

我对此进行了搜索，但没有得到任何满意的答案。

**我发现的是：**

1.  [如何在收到一定数量的数据后调用 Web 服务并将其加载到表格视图中](https://stackoverflow.com/questions/13356856/how-to-call-web-service-after-each-certain-number-of-data-received-and-load-it-i)
2.  [当用户滚动 UITableView 时从 Web 服务加载更多数据](https://stackoverflow.com/questions/6314476/load-more-data-from-a-web-service-when-the-user-scrolls-the-uitableview)
3.  [如何在滚动 iphone 上向 tableview 添加元素？](https://stackoverflow.com/questions/4615140/how-to-add-elements-to-tableview-on-scrolling-iphone)

我很想在这里用**Objective-C 语言**回答你。

**有什么建议么 ？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T11:51:33.583

取一个`integer`设置为 0。现在使用 Pull 来刷新功能（[Pull To refresh exmaple](http://www.cocoacontrols.com/controls/pull-to-refresh-tableview)）。

现在在 API 端，你必须设置两个额外的参数，比如`pagenumber`和`pageSize`

在第一次你调用 API`pageNumber=0`和`pageSize=20`

现在，当您拉出表格时，您就有了一个特定的方法，您必须在其中一次又一次地调用 API，`pageNumber++`并且`pageSize=20`将响应中的任何内容添加到您的`NSMutableArray`. 如果您什么也没找到，请删除拉动刷新选项

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T06:42:40.057

**我用这段代码解决了我的问题：**

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    CGPoint offset = scrollView.contentOffset;
    CGRect bounds = scrollView.bounds;
    CGSize size = scrollView.contentSize;
    UIEdgeInsets inset = scrollView.contentInset;
    float y = offset.y + bounds.size.height - inset.bottom;
    float h = size.height;

    float reload_distance = 10;
    if(y > h + reload_distance)
    {
        lastPageNumber++;
        [[NSUserDefaults standardUserDefaults] setInteger:lastPageNumber forKey:@"PageNumber"];        
        // Call the method.
    }
} 
```

希望对以后的访问者有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:37:31.887

要制作无限滚动器，您需要知道何时开始获取新项目。有很多方法可以做到这一点，但最好的地方是挂钩到 UITableViewDelegate 的方法。调用 cellForRowAtIndexPath: 时，检查该行是否是数据存储中的最后一行。如果是，请调用新数据，然后将其附加到旧数据并刷新您的视图。您还可以挂钩到表视图滚动器，以查看它何时滚动到底部以进行此调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T11:43:22.150

**在 .h 中：**

```
int lastPageNumber; 
```

**在 .m 中：**

在`cellForRowAtIndexPath`委托方法中

```
int rowNum =indexPath.row;
if(rowNum%20==0)
{
     if(rowNum/20>lastPageNumber)
     {
        //call webService
        lastPageNumber++;
     }
} 
```

# ms-access - 指向访问控制，Visual Basic

> ID：14053149
> 
> 赞同：0
> 
> 时间：2012-12-27T10:29:10.223
> 
> 标签：ms-access, vba

我的功能：

```
Public Function openRpt(strReportName As String, form as ??, subform as ??)
    On Error Resume Next
    If (Forms![form]![subform].Form.lock = False) Then
        DoCmd.RunCommand acCmdSaveRecord
    End If
    DoCmd.OpenReport strReportName, acViewPreview, "", _
        "[num]=Forms![form]![subform].Form.[num]"
End Function 
```

它的作用是保存`subform`未锁定的记录，然后启动报告。我想切换`from`并`subform`使用指向正确形式的匹配变量，并将作为参数给出。

1.  我应该使用什么类型的变量？
2.  使用“！”有什么区别？和 '。' 访问属性？我明白那个 '！' 用于访问控制器和“。” 用于访问表记录，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T17:50:39.617

for (1)：
首先，调用变量形式和子形式可能很诱人，但如果您使用的名称匹配或接近保留名称，请注意可能出现的错误。
此外，锁不是表单或子表单的有效属性。如果您尝试测试表单是否已更改，您将测试`.Dirty` 这就是我将如何编写您的函数：

```
Option Explicit
Public Function openRpt(strReportName As String, frm as String, sFrm as string)
    If (Forms(frm).Form(sFrm).Form.Dirty = True) Then
        DoCmd.RunCommand acCmdSaveRecord
    End If
    DoCmd.OpenReport strReportName, acViewPreview, "", _
        "[num]=Forms(""" & frm & """).Forms(""" & sFrm & """).Form.[num]"
End Function 
```

(2)：来自[微软博客](http://blogs.office.com/b/microsoft-access/archive/2008/05/30/dot-or-bang.aspx)

*   点为您提供早期绑定并在编译时解决，爆炸在运行时解决。
*   在表单的情况下，底层查询中的控件和字段都可以通过点来引用，因为它们都在表单的类型库中。
*   同样在 Forms 的情况下，如果您在运行时更改基础查询 - 对旧查询字段的点引用将在运行时失败，因为在运行时无法更新 Form 的类型库。
*   因为点是早期绑定的，所以 IntelliSense 默认情况下与点一起发生，而不是与 bang 一起发生。
*   点（因为它是早期绑定）比爆炸快，但是没有人运行足够的代码来使用这些项目，足以使性能差异真正重要。

# django - Django：缓存控制：最大年龄。如何指定？什么是缓存？

> ID：14053154
> 
> 赞同：0
> 
> 时间：2012-12-27T10:29:25.503
> 
> 标签：django, caching, http-headers

我正在制作一个网页，理想情况下，我希望用户的浏览器能够永久缓存所有 javascript、css 和图像（或最长允许 1 年）。这些项目要么是版本化的，要么是不变的。但是，我不希望缓存 html。

我对 Cache-Control: max-age 感到困惑。我是否为每种类型的资源（css、js 等）设置了这个？还是一次为所有？还是针对特定文件？它会缓存html吗？

我正在使用 Django。我什至会在哪里指定它：

```
return render_to_response(my_template, {},context_instance=RequestContext(request)) 
```

我注意到我的浏览器（我已经尝试了几个）缓存了图像和 js，即使我没有指定任何内容。但我可以一直依赖这个吗？它会被缓存多长时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:53:29.590

您需要在单个静态文件上设置此标头。但是，您*不应该*在生产中从 Django 提供静态文件。为此，请使用诸如 Nginx、Lighttpd 之类的 Web 服务器，或者更好的是使用 CDN。

# c# - Unicode 上划线 (U+203E) 到 Shift-JIS 的意外转换

> ID：14053155
> 
> 赞同：0
> 
> 时间：2012-12-27T10:29:31.383
> 
> 标签：c#, encoding, shift-jis

对于客户项目，查询数据库并将结果写入文件。该文件需要在[Shift JIS](http://en.wikipedia.org/wiki/Shift_JIS)中，因为它稍后用作另一个旧系统的输入。维基百科文章指出：

> 单字节字符 0x00 到 0x7F 匹配 ASCII 编码，除了 0x5C 处的日元符号 (U+00A5) 和 0x7E 处的上划线 (U+203E) 分别代替 ASCII 字符集的反斜杠和波浪号。

在一些测试中，我验证了日元符号 (U+00A5) 正确变为 0x5C 时，上划线 (U+203E) 变为 0x3F（问号）而不是预期的 0x7E。

当我使用 StreamWriter 对文件进行正常输出时，下面是重现的最少代码：

```
 static void Test()
    {
        // Get Shift-JIS encoder.
        var encoding = Encoding.GetEncoding("shift_jis");

        // Declare overline (U+203E).
        char c = (char) 0x203E;

        // Get bytes when encoded as Shift-JIS.
        var bytes = encoding.GetBytes(c.ToString());

        // Expected 0x7E, but the value returned is 0x3F.
    } 
```

这种行为正确吗？我想我可以将 EncoderFallback 子类化，但这对于我从一开始就期望工作的东西来说似乎要工作得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T08:17:16.500

经过进一步调查，我必须得出结论，[Shift JIS](http://en.wikipedia.org/wiki/Shift_JIS)是用词不当。相反，这是[代码页 932](http://en.wikipedia.org/wiki/Code_page_932)。Unicode 和微软提供了这个和 Unicode 之间的[映射表。](http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP932.TXT)这显然是用来映射字符的。请注意，它不包含 (0x5C, U+00A5) 和 (0x7E, U+203E) 之间的映射。

请注意，尽管我在原始问题中写道“我已经验证日元符号（U + 00A5）正确变为0x5C”。显然，Encoding.GetEncoding(String) 方法返回一个编码，该编码具有定义为 System.Text.InternalDecoderBestFitFallback 的 DecoderFallback，我假设它为某些通常会失败的字符提供额外的映射。它必须包含日元的附加映射 (U+00A5)，但遗憾的是上划线 (U+203E) 没有。当我用 EncoderExceptionFallback 替换它时，如果麻烦字符失败。

因此，我得出结论，对于 Shift JIS，这是一个错误。但是对于代码页 932，这是预期的结果。

# asp.net - 将 .less 错误记录到控制台

> ID：14053158
> 
> 赞同：3
> 
> 时间：2012-12-27T10:29:35.250
> 
> 标签：asp.net, css, console, less, dotless

每次我遇到 .less 语法错误时，我都必须在浏览器中打开确切的 less 文件才能查看错误消息。

我想知道是否有可能以某种方式将**.less 错误输出到控制台**，以便在使用 Firebug 时直接在控制台日志中查看所有错误？

我正在使用无点。我尝试将 webconfig 设置为（通过以下信息[此链接](http://sarkies.blogspot.com/2011/10/dotless-configuration-options.html)）

```
<dotless minifyCss="false" cache="false" web="false" log="error" logger="dotless.Core.Loggers.ConsoleLogger" /> 
```

但似乎我错过了一些东西 - 不太确定，如果我正确理解了记录器。

网站上有关记录器的信息还指出：

> 可以设置但随后被“web”布尔值覆盖

这是否意味着我不能设置网络布尔值？我怎样才能使这项工作？

* * *

**几个答案后编辑**

好的，所以我发现为了达到这个结果，我需要 `dotless.Core.Loggers`使用我自己的记录器类进行扩展。不知道该怎么做，但一旦我弄清楚了就会报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T20:08:54.187

如果您使用的是 Visual Studio，您可以尝试使用 Web Essentials 扩展，它在库中是免费的。此加载项在保存时编译 .LESS，并在输出控制台中为您提供错误。您还可以在编辑 .LESS 时并排查看已编译的 .css。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T12:56:25.140

看起来类似的问题已经在[这里得到了回答](https://stackoverflow.com/questions/4798154/how-can-i-output-errors-when-using-less-programmatically)

无论如何，查看您指定的链接，很明显您需要设置`web="true"`或错过它，因为它似乎是默认设置。

ConsoleLogger 表示[Console](http://msdn.microsoft.com/en-us/library/yz3fhfz1.aspx)，而不是浏览器控制台。

因此，您需要将记录器设置为您喜欢的与 HTTP 一起使用的记录器（但绝对不是控制台）。

# php - PHP 在连接到 MySql 时忽略 ssl 证书

> ID：14053160
> 
> 赞同：13
> 
> 时间：2012-12-27T10:29:39.450
> 
> 标签：php, mysql, ssl, openssl, ssl-certificate

[使用此处](http://php.net/manual/en/mysqli.real-connect.php)和[此处](http://php.net/manual/en/mysqli.ssl-set.php)的 PHP 手册中的代码

```
<?php

$mysqli = mysqli_init();
if (!$mysqli) {
    die('mysqli_init failed');
}

$mysqli->ssl_set('/path/to/client-key.pem',   
                 '/path/to/client-cert.pem',
                 '/path/to/ca-cert.pem',
                  NULL,NULL); //<-- Doesn't matter if the paths are right or wrong

if (!$mysqli->options(MYSQLI_INIT_COMMAND, 'SET AUTOCOMMIT = 0')) {
    die('Setting MYSQLI_INIT_COMMAND failed');
}

if (!$mysqli->options(MYSQLI_OPT_CONNECT_TIMEOUT, 5)) {
    die('Setting MYSQLI_OPT_CONNECT_TIMEOUT failed');
}

if (!$mysqli->real_connect('xx.xx.xx.xx', 'my_user', 'my_password', 'my_db')) {
    die('Connect Error (' . mysqli_connect_errno() . ') '
            . mysqli_connect_error());
}

echo 'Success... ' . $mysqli->host_info . "\n";

$mysqli->close();
?> 
```

我无法连接到 MySql。它给出了以下错误：

```
Message: SQLSTATE[28000] [1045] Access denied for user 'my_user'@'xx.xx.xx.xx' (using password: YES) <-- the client IP 
```

**我已将问题范围缩小到一行`$mysqli->ssl_set(...)`。**

**当我将错误的路径传递给证书时，它应该`SSL certificate error`根据[这篇文章](http://forums.phpfreaks.com/topic/216464-mysql-connect-error-1045-access-denied-with-ssl/#entry1125060)抛出一个用户遇到相同问题的帖子，而不是抛出相同的先前访问被拒绝错误。**

在数据库管理员的帮助下，我通过如下配置 ssl 连接，设法使用 Navicat 与服务器建立了连接： ![在此处输入图像描述](../Images/cde276517e3a2827bb76a492ae30e5bf.png)

笔记：

1.  我的 PHP 版本是**5.3.15**
2.  远程数据库服务器上使用的MySql版本是**5.5.13-55**
3.  Navicat 和 PHP 代码都在同一台 PC 上运行。
4.  数据库管理员专门创建了一个**ssl_user**用于测试。此用户被拒绝正常访问，必须使用 ssl 连接。
5.  没有使用代理。
6.  我试过`PDO`了，它也遇到了同样的问题。
7.  我试过`mysql->connect()`了，但它抛出了一个糟糕的握手错误，并且根据[手册](http://php.net/manual/en/function.mysql-connect.php)中的一些评论它不起作用。
8.  打开 ssl 从启用`phpinfo()` ![在此处输入图像描述](../Images/b301086129685f864eb669caec1b1130.png)

所以问题是为什么 PHP 不抱怨证书的错误路径？似乎 PHP 忽略了我设置证书路径的行！

* * *

**更新：** 我尝试更改建立连接的行以显式设置端口并使用`MYSQLI_CLIENT_SSL`：

```
$mysqli->real_connect('xx.xx.xx.xx', 'my_user', 'my_password', 'my_db','3306',NULL,MYSQLI_CLIENT_SSL) 
```

但是，我收到了这个错误：

```
Warning: mysqli::real_connect(): (08S01/1043): Bad handshake in ... 
```

**更新 2：**

这是来自数据库服务器的 tcpdump-ing 的结果：

```
0x0040:  3142 6164 2068 616e 6473 6861 6b65       1Bad.handshake
13:16:18.133282 IP (tos 0x8, ttl  64, id 40823, offset 0, flags [DF], proto: TCP (6), length: 52) xx.xx.xx.202.mysql > xx.xx.xx.130.42766: F, cksum 0xf15f (correct), 112:112(0) ack 79 win 46 <nop,nop,timestamp 19516376 3465907>
        0x0000:  4508 0034 9f77 4000 4006 c8a7 c0a8 28ca  E..4.w@.@.....(.
        0x0010:  c0a8 2882 0cea a70e b36c 7e8b 7b4d a169  ..(......l~.{M.i
        0x0020:  8011 002e f15f 0000 0101 080a 0129 cbd8  ....._.......)..
        0x0030:  0034 e2b3                                .4..
13:16:18.133433 IP (tos 0x8, ttl  64, id 17337, offset 0, flags [DF], proto: TCP (6), length: 52) xx.xx.xx.130.42766 > xx.xx.xx.202.mysql: F, cksum 0xb695 (correct), 79:79(0) ack 113 win 92 <nop,nop,timestamp 3480910 19516376>
        0x0000:  4508 0034 43b9 4000 4006 2466 c0a8 2882  E..4C.@.@.$f..(.
        0x0010:  c0a8 28ca a70e 0cea 7b4d a169 b36c 7e8c  ..(.....{M.i.l~.
        0x0020:  8011 005c b695 0000 0101 080a 0035 1d4e  ...\.........5.N
        0x0030:  0129 cbd8                                .)..
13:16:18.133452 IP (tos 0x8, ttl  64, id 40824, offset 0, flags [DF], proto: TCP (6), length: 52) xx.xx.xx.202.mysql > xx.xx.xx.130.42766: ., cksum 0xb6c3 (correct), 113:113(0) ack 80 win 46 <nop,nop,timestamp 19516376 3480910>
        0x0000:  4508 0034 9f78 4000 4006 c8a6 c0a8 28ca  E..4.x@.@.....(.
        0x0010:  c0a8 2882 0cea a70e b36c 7e8c 7b4d a16a  ..(......l~.{M.j
        0x0020:  8010 002e b6c3 0000 0101 080a 0129 cbd8  .............)..
        0x0030:  0035 1d4e                                .5.N 
```

xx.xx.xx.202 是数据库服务器 ip。
xx.xx.xx.130 是我的电脑 IP。

**更新 3：**

我使用以下代码检查了密码长度：

```
mysql> select length(Password) from mysql.user where User='youruser' 
```

密码长度为**41**。

**更新 4：**

**当我通过远程服务器上的ssh**使用命令行连接时，返回的错误消息中可能会有提示（我将整个项目上传到远程服务器）：

```
mysql -u test_ssl -password --ssl-key=/usr/local/apache2/htdocs/certs/client-key.pem --ssl-cert=/usr/local/apache2/htdocs/certs/WRONG-CERTIFICATE.pem 
```

我收到以下错误：

```
SSL error: Unable to get certificate from '/usr/local/apache2/htdocs/certs/WRONG-CERTIFICATE.pem'
ERROR 2026 (HY000): SSL connection error ---> notice the error here 
```

如果我根本不提供任何证书，我会收到以下消息：

```
-bash-3.2$ mysql -u test_ssl -password
ERROR 1045 (28000): Access denied for user 'test_ssl'@'localhost' (using password: YES) 
```

**当我使用 PHP 使用正确或无效的证书路径进行连接时，我遇到的错误是相同的！**

也许这意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:46:20.937

乍一看，您没有将`MYSQLI_CLIENT_SSL`选项设置为连接。

`if (!$mysqli->real_connect('localhost', 'my_user', 'my_password', 'my_db', null, MYSQLI_CLIENT_SSL)) { ... }`

**更新：**
您可以尝试添加`$mysqli->options(MYSQLI_OPT_SSL_VERIFY_SERVER_CERT, true);` before `$mysqli->ssl_set()`。

此外，这对我有用：

```
<?php
$pdo = new PDO('mysql:host=ip;dbname=dbname', 'username', 'password', array(
    PDO::MYSQL_ATTR_SSL_KEY    =>'/etc/mysql/ssl/client-key.pem',
    PDO::MYSQL_ATTR_SSL_CERT=>'/etc/mysql/ssl/client-cert.pem',
    PDO::MYSQL_ATTR_SSL_CA    =>'/etc/mysql/ssl/ca-cert.pem'
    )
);
$stmt = $pdo->query("SHOW TABLES;");
$row = $stmt->fetch(PDO::FETCH_ASSOC);
print_r($row);
?> 
```

**更新 2：**`bad handshake`如果您使用旧式 mysql 密码（*16 字节长*）， 您可能会收到一个。要检查，请运行以下查询：

```
mysql> select length(Password) from mysql.user where User='youruser' 
```

如果您收到`16`：

```
// disable old_passwords:
mysql> SET @@session.old_passwords = 0;

// update password for user used in PHP script:
mysql> SET PASSWORD FOR 'existinguser'@'localhost' = PASSWORD('existingpass');

// check if we have a 41 bytes long password:
mysql> select length(Password) from mysql.user where User='youruser' 
```

并再次检查来自 PHP 脚本的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T20:29:25.100

好吧，我们能够解决这个问题，但我不确定这是一个实用的解决方案。

首先，我们能够找到问题的根源，即 MySql 客户端库，即 PHP 使用 SSL 连接的那些。PHP 必须符合这些库才能使用 SSL 进行连接。

此外，MySql 客户端库和 OpenSSL 库之间存在冲突。

我们问题的唯一解决方案是从头开始重新安装所有内容。我们使用了一个新的服务器，安装了所有库的全新 Mysql（最新版​​本），最新的 PHP 版本和最新的 CentOS 发行版。

# iphone - 多值 url 通讯录 iphone

> ID：14053171
> 
> 赞同：5
> 
> 时间：2012-12-27T10:30:17.217
> 
> 标签：iphone, objective-c, ios, xcode, ios6

我想在通讯录中创建一个新联系人。当您想要存储更多 URL（某些社交网络的网址）时，就会出现问题。我的代码在 iOS6 的模拟器中完美运行。但在 iOS6 的真实 iPhone 中，存储了除 urls 之外的所有值。我一直在寻找几天，但找不到解决方案，如果有人能提供帮助，我将不胜感激。

我的代码：

```
-(void) addContactToAddressBook:(ABAddressBookRef) iPhoneAddressBook 
{

    CFErrorRef error = NULL;

    ABRecordRef newPerson = ABPersonCreate();

    //Name and phone number
    ABRecordSetValue(newPerson, kABPersonFirstNameProperty, (__bridge CFStringRef)_nameField.text, &error);
    ABMutableMultiValueRef multiPhone = ABMultiValueCreateMutable(kABMultiStringPropertyType);
    ABMultiValueAddValueAndLabel(multiPhone, (__bridge CFStringRef)_phoneField.text, kABPersonPhoneMainLabel, NULL);
    ABRecordSetValue(newPerson, kABPersonPhoneProperty, multiPhone,nil);

    //Email value
    ABMutableMultiValueRef emailMultiValue = ABMultiValueCreateMutable(kABMultiStringPropertyType);
    ABMultiValueAddValueAndLabel(emailMultiValue, (__bridge CFStringRef)_emailField.text, kABWorkLabel, NULL);
    ABRecordSetValue(newPerson, kABPersonEmailProperty, emailMultiValue, nil);
    CFRelease(emailMultiValue);

    //URL values
    ABMutableMultiValueRef urlMultiValue = ABMultiValueCreateMutable(kABMultiStringPropertyType);
    ABMultiValueAddValueAndLabel(urlMultiValue, (__bridge CFStringRef)_FacebookField.text, (CFStringRef)@"Facebook", NULL);
    ABMultiValueAddValueAndLabel(urlMultiValue, (__bridge CFStringRef)_twitterField.text, (CFStringRef)@"Twitter", NULL);
    ABMultiValueAddValueAndLabel(urlMultiValue, (__bridge CFStringRef)_linkedinField.text, (CFStringRef)@"Linkedin", NULL);
    ABMultiValueAddValueAndLabel(urlMultiValue, (__bridge CFStringRef)_googleField.text, (CFStringRef)@"Google+", NULL);
    ABRecordSetValue(newPerson, kABPersonURLProperty, urlMultiValue, nil);
    CFRelease(urlMultiValue);

    ABAddressBookAddRecord(iPhoneAddressBook, newPerson, &error);

    ABAddressBookSave(iPhoneAddressBook, &error);
    if (error != NULL)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Contact not saved" delegate:nil cancelButtonTitle:@"Cancel" otherButtonTitles:nil, nil];
        [alert show];
    }else{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Contact saved" message:@"Your contact was successfully saved" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert show];
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-31T06:22:21.357

根据苹果网站上的文档（向下滚动到页面中间的隐私），必须先授予对地址簿的访问权限，然后才能以编程方式访问它。这就是我最终要做的。

```
-(void)requestPermission
{
        ABAddressBookRef iPhoneAddressBook = ABAddressBookCreateWithOptions(NULL, NULL);

        if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined) {
            ABAddressBookRequestAccessWithCompletion(iPhoneAddressBook, ^(bool granted, CFErrorRef error) {
                if (granted) {
                    // First time access has been granted, add the contact
                    [self addContactToAddressBook:iPhoneAddressBook];
                } else {
                    // User denied access
                    // Display an alert telling user the contact could not be added
                }
            });
        }
        else if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized) {
            // The user has previously given access, add the contact
            [self addContactToAddressBook:iPhoneAddressBook];
        }
        else {
            // The user has previously denied access
            // Send an alert telling user to change privacy setting in settings app
        }

    }

-(void)addContactToAddressBook:(ABAddressBookRef)iPhoneAddressBook
{
    CFErrorRef error = NULL;
    ABRecordRef newPerson = ABPersonCreate();

    //Name and phone number
    ABRecordSetValue(newPerson, kABPersonFirstNameProperty, (__bridge CFStringRef)_nameField.text, &error);
    ABMutableMultiValueRef multiPhone = ABMultiValueCreateMutable(kABMultiStringPropertyType);
    ABMultiValueAddValueAndLabel(multiPhone, (__bridge CFStringRef)_phoneField.text, kABPersonPhoneMainLabel, NULL);
    ABRecordSetValue(newPerson, kABPersonPhoneProperty, multiPhone,nil);
    CFRelease(multiPhone);

    //Email value
    ABMutableMultiValueRef emailMultiValue = ABMultiValueCreateMutable(kABMultiStringPropertyType);
    ABMultiValueAddValueAndLabel(emailMultiValue, (__bridge CFStringRef)_emailField.text, kABWorkLabel, NULL);
    ABRecordSetValue(newPerson, kABPersonEmailProperty, emailMultiValue, nil);
    CFRelease(emailMultiValue);

    //URL values
    ABMutableMultiValueRef urlMultiValue = ABMultiValueCreateMutable(kABMultiStringPropertyType);
    ABMultiValueAddValueAndLabel(urlMultiValue, (__bridge CFStringRef)_FacebookField.text, (CFStringRef)@"Facebook", NULL);
    ABMultiValueAddValueAndLabel(urlMultiValue, (__bridge CFStringRef)_twitterField.text, (CFStringRef)@"Twitter", NULL);
    ABMultiValueAddValueAndLabel(urlMultiValue, (__bridge CFStringRef)_linkedinField.text, (CFStringRef)@"Linkedin", NULL);
    ABMultiValueAddValueAndLabel(urlMultiValue, (__bridge CFStringRef)_googleField.text, (CFStringRef)@"Google+", NULL);
    ABRecordSetValue(newPerson, kABPersonURLProperty, urlMultiValue, nil);
    CFRelease(urlMultiValue);

    // ...
    // Set other properties
    // ...
    ABAddressBookAddRecord(iPhoneAddressBook, newPerson, &error);

    ABAddressBookSave(iPhoneAddressBook, &error);
    CFRelease(newPerson);
    CFRelease(iPhoneAddressBook);
    if (error != NULL)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Contact not saved" delegate:nil cancelButtonTitle:@"Cancel" otherButtonTitles:nil, nil];
        [alert show];
    }else{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Contact saved" message:@"Your contact was successfully saved" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];
        [alert show];
    }
} 
```

# node.js - 如何在 Node.js TCP 服务器中追踪 ECONNREFUSED？

> ID：14053175
> 
> 赞同：1
> 
> 时间：2012-12-27T10:30:25.187
> 
> 标签：node.js, tcp

我已经使用[dnode](https://github.com/substack/dnode)编写了一个 TCP 服务器。基本上，一切正常。

现在我还创建了一些单元测试，其中一个以`ECONNREFUSED`.

这件事的奇怪之处在于

*   被测试的代码在单元测试之外，在应用程序内部运行时效果很好，
*   如果我在失败的测试之前注释掉测试，被测试的代码就可以工作。

所以很明显，两个测试之间似乎存在相互依赖关系。两者都单独工作，但不能相互合作。

问题是我收到一条非常无用的错误消息：

```
Error: connect ECONNREFUSED
    at errnoException (net.js:768:11)
    at Object.afterConnect [as oncomplete] (net.js:759:19) 
```

很高兴看到这是一个`ECONNREFUSED`错误，但我如何找出导致问题的原因？

由于有许多包含匿名函数的回调，因此要找出导致问题的行并不*容易*:-(。

任何想法/提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T15:09:56.647

我自己解决了，看上面的评论。

# deployment - Netbeans，如何将项目部署（战争）文件构建到自定义文件夹中？

> ID：14053179
> 
> 赞同：2
> 
> 时间：2012-12-27T10:30:33.127
> 
> 标签：deployment, ant, glassfish, netbeans-7, autodeploy

Netbeans 项目，是否可以自动将 deploy(.war) 文件构建到域的**autodeploy****文件**夹中，而不是在**dist**文件夹中？ 因此，将项目**.war**文件自动部署到本地**glassfish**服务器将非常有用。

 ******* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:27:01.407

您可以自动化几乎所有类型的事情，从 ant 阶段处理的编译文件。

*   在***project.properties***文件中必须为您的最终文件夹添加一个引用

> war.custom.dir=/path/to/end/folder/

*“这不是强制性的，但它是正确的方法”*

*   然后，在你的***build.xml***文件中添加这段代码

> ```
>  <target name="-post-dist">
>        <echo message="Copy .war file to my custom folder"/>
>        <copy file="${dist.war}" todir="${war.custom.dir}" />
>    </target> 
> ```

您的文件***.war***将移动到您想要的任何地方。

*也可以在 build-impl.xml 目标“do-ear-dist”中更改您的文件，从而直接对您的最终文件夹进行压缩。
或者您也可以修改项目中的引用以在您的最终文件夹上工作，该机制非常简单，可以按照您的想法进行自定义。*******

# c# - 搜索参数

> ID：14053180
> 
> 赞同：0
> 
> 时间：2012-12-27T10:30:35.593
> 
> 标签：c#, design-patterns, design-principles

我有一个屏幕，它对数据库员工表进行基本搜索。

用户将按名字、姓氏、部门、IsActive 等进行搜索。

到目前为止，我已经创建了一个 SearchParameter 类：

```
public class EmployeeSearchParameter
{
    public EmployeeSearchParameterType SearchParameterType { get; set; }
    public string EmployeeSearchParameterValue { get; set; }
}

public enum EmployeeSearchParameterType 
{
    FirstName = 1,
    LastName = 2,
    EmpId= 3,       
    IsActive = 4
} 
```

如果我有更多支持自定义分页的选项（例如开始行号、结束行号、排序依据等），这是否会灵活？

或者我可以创建一个**抽象类**Search 并实现？

```
 public abstract class Search
 {
  public virtual Int PageSize=10;
  public virtual string SortBy="DESC"
  //..etc
  }

 public class EmployeeSearchParameter:Search
 {//stuffs
 } 
```

或 ISearch**界面**

```
 public class EmployeeSearchParameter:ISearch    
  { } 
```

对于更好的设计/简单性和不过度设计问题的任何输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:38:08.570

您的`*Search*`课程实际上应该用于[DAO 模式。](http://en.wikipedia.org/wiki/Data_access_object)如果您以不同的方式称呼它，您的项目将不会被其他开发人员轻易理解。具体来说，您将定义一个接口`IEmployeeDao`和相应的实现`EmployeeDao`。公共接口将包括 CRUD 和 finder 方法，例如`create`、`update`、`delete`、`findByName`等。对于 C# 中的示例代码，您应该在 Google 上搜索 DAO 和 C# 的值列表处理程序实现。我只知道 Java 平台的示例代码。

您提到的导航 DAO 实现产生的结果的第二个用例是另一种单独的模式，即建立在 DAO 实现之上并提供以不同方式导航结果的功能的[值列表处理程序模式。](http://www.corej2eepatterns.com/Patterns2ndEd/ValueListHandler.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T11:34:42.390

使用 DAO 模式的缺点类似于存储库模式的缺点：您隐藏了底层技术的搜索功能，转而编写一组非常有限的可能查询。

如果您的 DAO / repo 开始公开越来越灵活的搜索功能，那么实现很可能会采用与您的[DAL](http://en.wikipedia.org/wiki/Data_access_layer)工作方式类似的布局；您可能会开始开发 Query 类型来表达更复杂的关系。这已经存在于各种数据库访问技术中。（而且，我相信，与 DAO 相比，这是一种更符合 C# 惯用的短语搜索查询方式。）

[在 SO](https://stackoverflow.com/questions/15189149/how-to-use-mongodbs-query-and-querybuilder-in-c-sharp-foreach-loop)和其他地方有查询类型可能看起来如何的示例；如果您可以通过`IEnumerable`（或者可能更好）公开您的数据，那么通过[LINQ](http://en.wikipedia.org/wiki/LINQ)`IQueryable`访问它将会非常灵活和强大。

# zsh - zsh：使用“less -R”作为 READNULLCMD

> ID：14053184
> 
> 赞同：1
> 
> 时间：2012-12-27T10:30:58.617
> 
> 标签：zsh

现在，我很确定这里的限制。但让我们退后一步。

简单的说法

```
 READNULLCMD="less -R" 
```

不起作用，产生以下错误：

```
$ <basic.tex                                                                            
zsh: command not found: less -R 
```

好的。很确定这是因为默认情况下，zsh 不会在每个空格处拆分字符串变量。无论 zsh 在哪里使用这个变量，它在应该使用 ${=READNULLCMD} 的地方都使用 $READNULLCMD，以确保选项参数通过正常空格与命令正确分隔。请参阅 1996 年的讨论（！）： [http ://www.zsh.org/mla/users/1996/msg00299.html](http://www.zsh.org/mla/users/1996/msg00299.html)

那么，在不设置 SH_WORD_SPLIT （99% 的时间我都不想要）的情况下，最好的解决方法是什么？

到目前为止，我最好的想法是将 READNULLCMD 分配给一个简单的 zsh 脚本，该脚本只在 STDIN 上调用“less -R”。例如

```
#!/opt/local/bin/zsh
less -R /dev/stdin 
```

不幸的是，由于某种原因，这似乎是一个非首发，因为这种方式很少使用，因此错过了 /dev/stdin 输入的前几行。

有人有更好的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T18:00:22.327

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-25T14:09:07.990

The problem is not that less doesn't read its environment variables (LESS or LESSOPEN). The problem is that the READNULLCMD is not invoked as you might think.

```
<foo 
```

does not translate into

```
less $LESS foo 
```

but rather to something like

```
cat foo | less $LESS 
```

or, perhaps

```
cat foo $LESSOPEN | less $LESS 
```

I guess that you (like me) want to use -R to obtain syntax coloring (by using src-hilite-lesspipe.sh in LESSOPEN, which in turn uses the "source-highlight" utility). The problem with the latter two styles of invocation is that src-hilite-lesspipe.sh (embedded in $LESSOPEN) will not receive a filename, and hence it will not be able to deduce the file type (via the --infer-lang option to "source-highligt"). Without a filename suffix, "source-highlight" will revert to "no highlighting".

You can obtain syntax coloring in READNULLCMD, but in a rather useless way. This by specifying the language explicitly via the --lang-def option. However, you'll have as little clue as "source-higlight", since the there's no file name when the data is passed anonymously through the pipe. Maybe there's a way to do a on-the-fly heuristic parser and deduce it by contents, but then you've for sure left this little exercise.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T14:08:39.317

将`$LESS`env var 设置为您始终希望在`less`.

所以不要在你的 zshrc 中触摸`READNULLCMD`和使用`export LESS="R"`（以及你想要的其他选项）。

# android - Android 简单 2 行 ListView 示例

> ID：14053185
> 
> 赞同：1
> 
> 时间：2012-12-27T10:30:59.540
> 
> 标签：android, android-listview, xamarin.android

我正在使用 Mono For Android (C#)，我试图让 ListView 连续显示 2 行。有一些教程，但其中一些在 MFA 中不起作用，而那些起作用的教程非常复杂。在 ListView 中显示 2 行的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:48:25.680

我假设如果您希望在列表项中超过 1 行，您肯定必须使用 customAdapter 类，因此我将在自定义适配器类下方发布，该类将在一行的两行显示相同的字符串，您基于它进行修改按要求！

```
public class CustomAdapter extends ArrayAdapter<String>{
private Activity activity;
public CustomAdapter(Context context, int textViewResourceId, List<String> objects) {
    super(context, textViewResourceId, objects);
    this.activity = (Activity)context;
}

public View getView(int position, View convertView, ViewGroup parent) {
    //View customView = convertView;
    String stringValue = getItem(position);
    // you can use this method as well instead of what i have used in this example, inflate your customView referring to a preformed xml file. extract the fields required from this view and set their values 
    //if (customView == null) {
    //  final LayoutInflater vi = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    //  customView = vi.inflate(R.layout.your_custom_list_row, null);
    //}
    //extract fields from your_custom_list_row and set their values

LinearLayout customView = new LinearLayout(activity);

TextView t1 = new TextView(activity);
t1.setText(stringValue);
TextView t2= new TextView(activity);
t2.setText(stringValue);

customView.addView(t1);
customView.addView(t2);
return customView;
}

} 
```

这将进入您的主要活动

```
List<String> stringsList = new ArrayList<String>();
//populate arraylist
CustomAdapter custAdpt = new CustomAdapter(this, R.layout.your_custom_list_row, stringsList);
listView.setAdapter(custAdpt); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:50:52.537

在你的 getview() 方法中尝试这个：

```
ViewHolder holder;
         if (convertView   == null) 
            {
                //this should only ever run if you do not get a view back            
             LayoutInflater  inflater = (LayoutInflater) contxt
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
             convertView  = inflater.inflate(R.layout.homelistrow, null); 

             holder = new ViewHolder();

             holder.text = (Textview) convertView
                        .findViewById(R.id.icon);

             holder.text1 = (TextView) convertView
                        .findViewById(R.id.name_label);
             convertView.setTag(holder);

            }
         else {

                         holder = (ViewHolder) convertView.getTag();

                     }

         holder.text.setText(Your 1st row value);
         holder.text2.setText(Your 2nd row value); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-16T15:49:01.410

也许您想要的是多个项目类型，可以在单个列表视图中显示不同的项目。如果是这样，您可以使用这样的自定义适配器：

```
package com.example.myapplication.customarray;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

import com.example.myapplication.R;
import java.util.List;

/**
 * Created by SONY on 14/10/2016.
 */
public class CustomAdapter extends ArrayAdapter<BaseItem> {

    private List<BaseItem> data;

    public CustomAdapter(Context context, List<BaseItem> data) {
        super(context, 0, data);
        this.data = data;
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent){
        BaseItem baseItem = data.get(position);
        if(convertView == null) {
            if(baseItem.type == 0) {
                convertView = LayoutInflater.from(getContext()).inflate(R.layout.item_student, parent, false);
                convertView.setTag(ViewHolder.createHolder(convertView));
            }
            else {
                convertView = LayoutInflater.from(getContext()).inflate(R.layout.item_header, parent, false);
                convertView.setTag(ViewHolderHeader.createViewHolder(convertView));
            }
        }
        if(baseItem.type == 0) {
            ViewHolder holder = (ViewHolder) convertView.getTag();
            StudentItem student = (StudentItem) data.get(position);
            holder.textName.setText(student.name);
            holder.textID.setText(student.id);
            holder.imgStudent.setImageResource(student.picture);
        }
        else {
            ViewHolderHeader holderHeader = (ViewHolderHeader) convertView.getTag();
            HeaderItem headerItem = (HeaderItem) data.get(position);
            holderHeader.textLabel.setText(headerItem.label);
        }
       return convertView;
    }

    @Override
    public int getCount( ) {
        return data.size();
    }
    @Override
    public int getViewTypeCount() {
        return 2;
    }
    @Override
    public int getItemViewType(int position) {
        BaseItem item = data.get(position);
        return item.type;
    }

    public static class ViewHolder  {
        public TextView textName;
        public TextView textID;
        public ImageView imgStudent;

        public static final ViewHolder createHolder(View view) {
            ViewHolder holder = new ViewHolder();
            holder.textName = (TextView) view.findViewById(R.id.textName);
            holder.textID = (TextView) view.findViewById(R.id.textID);
            holder.imgStudent = (ImageView) view.findViewById(R.id.imgStudent);
            return holder;
        }
    }
    public static class ViewHolderHeader {
        public TextView textLabel;

        public static final ViewHolderHeader createViewHolder(View view) {
            ViewHolderHeader holderHeader = new ViewHolderHeader();
            holderHeader.textLabel = (TextView)view.findViewById(R.id.textHeader);
            return holderHeader;
        }
    }
} 
```

你可以[在这里阅读](http://codelabx.blogspot.co.id/2016/10/android-listview-multiple-item-type.html)

# sql - 性能良好的一对多sql查询

> ID：14053186
> 
> 赞同：0
> 
> 时间：2012-12-27T10:31:04.977
> 
> 标签：sql

有人可以帮我吗？我正在尝试编写一个 SQL 查询并在 2-3 天内遇到问题。让我先定义问题。

我有 2 张桌子

1.  `Payment_Schedule_Master`

```
    [PAYMENT_SCHEDULE_MASTER_ID] [int] NOT NULL，主键
    [FPI_ID] [varchar](9) 非空，
    [DELETE_FLAG] [char](1) 非空，
    [CREATED_BY] [varchar](30) 非空，
    [创建日期] [日期时间] 不为空，
    [MODIFY_BY] [varchar](30) 非空，
    [MODIFY_DATE] [日期时间] 非空
```

1.  `Payment_Schedule_Detail`

```
    [PAYMENT_SCHEDULE_DETAIL_ID] [int] IDENTITY(1,1) NOT NULL，主键
    [PAYMENT_SCHEDULE_MASTER_ID] [int] NOT NULL，主表的外键
    [PAY_YEAR] [int] 非空，
    [PAY_MONTH] [int] 非空，
    [实际] [钱] NULL，
    [预测] [钱] NULL，
    [DELETE_FLAG] [char](1) 非空，
    [CREATED_BY] [varchar](30) 非空，
    [创建日期] [日期时间] 不为空，
    [MODIFY_BY] [varchar](30) 非空，
    [MODIFY_DATE] [日期时间] 非空
```

两者之间存在一对多的关系：`Master`有一个条目，`detail`有多个。`Payment_Schedule_Detail`有一个`id`，外键，实际，预测和许多列。实际和预测中将包含数值。

**问题：**
我想得到那些等于 0的`Payment_Schedule_Master`行。`Actual``ForeCast`

**我的查询：**

我试过这个查询

```
Select 
   t.PAYMENT_SCHEDULE_MASTER_ID, psm.FPI_ID, 
   t.ActualSum, t.ForecastSum
from 
    (Select 
        SUM(Actual) As ActualSum, 
        SUM (forecast) AS ForecastSum, 
        PAYMENT_SCHEDULE_MASTER_ID
     from 
        [dbo].[PAYMENT_SCHEDULE_DETAIL]
     group by 
        PAYMENT_SCHEDULE_MASTER_ID) t
Inner Join 
    dbo.PAYMENT_SCHEDULE_MASTER psm on psm.PAYMENT_SCHEDULE_MASTER_ID = t.PAYMENT_SCHEDULE_MASTER_ID
where  
    t.ActualSum = t.ForecastSum
and t.ActualSum = 0 
```

这个查询的问题是，如果`Actual`一月份有 200 个，十二月份有 -200 个，它也会选择那个标题，因为`SUM (Actual)`它是 0，这是错误的。

我不确定如何修改查询，它应该只获取那些实际为 0 和预测为 0 的标题。

**测试：**
以及是否有人会让我知道如何测试该方法？

**更新：**尝试了这个查询，但需要 8 秒。

```
Select 
    t.PAYMENT_SCHEDULE_MASTER_ID, psm.FPI_ID, 
    t.ActualSum, t.ForecastSum, psd.ACTUAL, psd.FORECAST
from 
    (Select 
         SUM(Actual) As ActualSum, SUM (forecast) AS ForecastSum, 
         PAYMENT_SCHEDULE_MASTER_ID
     from 
          [dbo].[PAYMENT_SCHEDULE_DETAIL]
     group by 
          PAYMENT_SCHEDULE_MASTER_ID) t
Inner Join 
     dbo.PAYMENT_SCHEDULE_MASTER psm on psm.PAYMENT_SCHEDULE_MASTER_ID = t.PAYMENT_SCHEDULE_MASTER_ID
Inner Join 
     [dbo].[PAYMENT_SCHEDULE_DETAIL] psd on psm.PAYMENT_SCHEDULE_MASTER_ID = psd.PAYMENT_SCHEDULE_MASTER_ID
 where  
     t.ActualSum = t.ForecastSum
     and t.ActualSum = 0
     and psd.ACTUAL = 0 
order by 
     psm.FPI_ID 
```

**数据和输出：**

```
psm_id  Actual      ForeCast  [other columns]
900     10000.00    0.00
900     -10000.00   0.00
900     0.00        0.00
912     0.00        0.00
912     0.00        0.00
912     0.00        0.00 
```

psm_id = Payment_Schedule_Master_ID

Payment_Schedule_Master_Id`900`实际总和为 0，它不应该出现在结果中。但`912`会出现在结果中，因为所有记录都是 0。我希望这会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T15:47:35.873

关于什么 -

```
select * from Payment_Schedule_Master
where NOT EXISTS
 (
     SELECT  null FROM  Payment_Schedule_Detail 
        where (forecast != 0 or actual != 0) and 
        Payment_Schedule_Master.id = PAYMENT_SCHEDULE_MASTER_ID
 ) 
```

请注意，这也会找到没有任何相关 payment_schedule_details 行的 Payment_Schedule_Master。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:46:10.013

要进行测试，您可以使用 SQL Fiddle 之类的东西。

试试[这个](http://sqlfiddle.com/#!2/b2514/2)

我尝试以下 SQL

```
select *
from Payment_Schedule_Master mast
where ((select sum(actual) from Payment_Schedule_Detail where main = mast.id) = 0)
and ((select sum(forecast) from Payment_Schedule_Detail where main = mast.id) = 0) 
```

它更简单，我认为它可以满足您的需求

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:47:21.307

```
Select 
    t.PAYMENT_SCHEDULE_MASTER_ID, psm.FPI_ID, 
    t.ActualSum, t.ForecastSum, psd.ACTUAL, psd.FORECAST
from 
    (Select t1.ActualSum,t1.ForecastSum,t1.PAYMENT_SCHEDULE_MASTER_ID
    from
    (Select 
         SUM(Actual) As ActualSum, SUM (forecast) AS ForecastSum, PAYMENT_SCHEDULE_MASTER_ID
     from 
          [CILS].[dbo].[PAYMENT_SCHEDULE_DETAIL]
     group by 
          PAYMENT_SCHEDULE_MASTER_ID) t1
          where  
     t1.ActualSum = 0 and t1.ForecastSum=0)t    

Inner Join 
     [Cils].dbo.PAYMENT_SCHEDULE_MASTER psm on psm.PAYMENT_SCHEDULE_MASTER_ID = t.PAYMENT_SCHEDULE_MASTER_ID
Inner Join 
     [CILS].[dbo].[PAYMENT_SCHEDULE_DETAIL] psd on psm.PAYMENT_SCHEDULE_MASTER_ID = psd.PAYMENT_SCHEDULE_MASTER_ID
order by 
     psm.FPI_ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T14:43:55.103

您的原始查询非常接近您的需要。您正在寻找实际和预测始终为零的情况。好吧，如果它们总是 0，那么绝对值之和就是 0。所以试试这个：

```
Select 
   t.PAYMENT_SCHEDULE_MASTER_ID, psm.FPI_ID, 
   t.ActualAbsSum, t.ForecastAbsSum
from 
    (Select 
        SUM(abs(Actual)) As ActualAbsSum, 
        SUM(abs(forecast)) AS ForecastAbsSum, 
        PAYMENT_SCHEDULE_MASTER_ID
     from 
        [dbo].[PAYMENT_SCHEDULE_DETAIL]
     group by 
        PAYMENT_SCHEDULE_MASTER_ID) t
Inner Join 
    dbo.PAYMENT_SCHEDULE_MASTER psm on psm.PAYMENT_SCHEDULE_MASTER_ID = t.PAYMENT_SCHEDULE_MASTER_ID
where  
    t.ForecastAbsSum = 0 and t.ActualAbsSum = 0 
```

您是否试图获得它们为 0 的任何示例，例如：

```
Select psm.*
from dbo.PAYMENT_SCHEDULE_MASTER psm 
where psm.PAYMENT_SCHEDULE_MASTER_ID in (select PAYMENT_SCHEDULE_MASTER_ID
                                         from [PAYMENT_SCHEDULE_DETAIL]
                                         where actual = 0 and forecast = 0
                                        ) 
```

为了清楚起见，这使用了`in`而不是 a `join`（两者在 SQL Server 引擎中的实现方式大致相同）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-08T13:11:15.863

在我看来，您需要在求和之前在“实际”和“预测”列上使用位置：

```
Select 
   t.PAYMENT_SCHEDULE_MASTER_ID, psm.FPI_ID, 
   t.ActualSum, t.ForecastSum
from 
    (Select 
        SUM(Actual) As ActualSum, 
        SUM (forecast) AS ForecastSum, 
        PAYMENT_SCHEDULE_MASTER_ID
     from 
        [dbo].[PAYMENT_SCHEDULE_DETAIL]
     where Actual=0 and forecast=0
     group by 
        PAYMENT_SCHEDULE_MASTER_ID) t
Inner Join 
    dbo.PAYMENT_SCHEDULE_MASTER psm on psm.PAYMENT_SCHEDULE_MASTER_ID = t.PAYMENT_SCHEDULE_MASTER_ID 
```

话虽如此，如果性能是一个问题，您不需要对实际和预测求和，因为您是在求和零。然后我们可以做的更简单：

```
Select 
   t.PAYMENT_SCHEDULE_MASTER_ID, psm.FPI_ID, 0 as ActualSum, 0 as ForecastSum
from
    (Select distinct
        PAYMENT_SCHEDULE_MASTER_ID
     from 
        dbo.PAYMENT_SCHEDULE_DETAIL
     where Actual=0 and forecast=0 ) t
Inner Join 
    dbo.PAYMENT_SCHEDULE_MASTER psm
On psm.PAYMENT_SCHEDULE_MASTER_ID = t.PAYMENT_SCHEDULE_MASTER_ID 
```

我在性能优化方面不太聪明 - 如果您的子查询产生很多行，那么在加入之前选择不同的行，如上所述，可能会更快。但你可以试试这个：

```
Select distinct
   psd.PAYMENT_SCHEDULE_MASTER_ID, psm.FPI_ID, 0 as ActualSum, 0 as ForecastSum
from
   dbo.PAYMENT_SCHEDULE_DETAIL psd
Inner Join 
   dbo.PAYMENT_SCHEDULE_MASTER psm
On
   psm.PAYMENT_SCHEDULE_MASTER_ID = psd.PAYMENT_SCHEDULE_MASTER_ID
Where
   Actual=0 and forecast=0 
```

这更简单，但可能会更慢，因为它在过滤不同的行之前加入行。而且，不要忘记索引你的 FK，除非你正在做大量的数据写入。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-08T21:16:17.833

我相信这就是您正在寻找的：

```
SELECT M.*
FROM Payment_Schedule_Detail D
JOIN Payment_Schedule_Master M
ON M.PAYMENT_SCHEDULE_MASTER_ID = D.PAYMENT_SCHEDULE_MASTER_ID
GROUP BY D.PAYMENT_SCHEDULE_MASTER_ID
HAVING SUM(D.Actual) = 0 AND SUM(D.Forecast) = 0 
```

或这个：

```
SELECT M.*
FROM (SELECT PAYMENT_SCHEDULE_MASTER_ID,
             SUM(Actual) ActualSum, SUM(Forecast) ForecastSum
      FROM Payment_Schedule_Detail
      GROUP BY PAYMENT_SCHEDULE_MASTER_ID) D
JOIN Payment_Schedule_Master M
ON M.PAYMENT_SCHEDULE_MASTER_ID = D.PAYMENT_SCHEDULE_MASTER_ID
WHERE ActualSum = 0 AND ForecastSum = 0 
```

不确定哪个在性能方面更好。我认为第二个会创建一个临时表，因此速度较慢，但​​它可能有点取决于优化器。

根据您使用的 SQL 数据库类型，外键可能会或可能不会自动被索引，如果没有，您应该索引您的外键。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-10T18:03:02.287

```
SELECT psm_id, ActualSum, ForecastSum FROM
(SELECT 
    PAYMENT_SCHEDULE_MASTER_ID AS psm_id, SUM(psd.Actual) As ActualSum, SUM (psd.forecast) AS ForecastSum
FROM 
    [dbo].[PAYMENT_SCHEDULE_DETAIL] psd, dbo.PAYMENT_SCHEDULE_MASTER psm
GROUP BY PAYMENT_SCHEDULE_MASTER_ID
) ts, dbo.PAYMENT_SCHEDULE_MASTER psm1
WHERE psm1.PAYMENT_SCHEDULE_MASTER_ID = ts.psm_id
AND ts.ActualSum = 0 AND ts.ForecastSum
ORDER BY 
     psm1.FPI_ID 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-11T16:44:36.300

谢谢你的回答，但它根本不起作用。

在我的数据库中，有一个我没有看到的特殊情况。如果特定 Payment_Schedule_Id 的实际和预测均为 0，则它将只有一行。

```
Select PAYMENT_SCHEDULE_MASTER_ID from (
Select COUNT(*)  As IdCount, PAYMENT_SCHEDULE_MASTER_ID, ACTUAL , FORECAST
from PAYMENT_SCHEDULE_DETAIL
group by PAYMENT_SCHEDULE_MASTER_ID, ACTUAL, FORECAST) t
where t.IdCount = 1 
and t.ACTUAL = 0.00
and t.FORECAST = 0.00 
```

以上是解决方案。

# android - 从android中的另一个应用程序打开默认日历应用程序

> ID：14053189
> 
> 赞同：1
> 
> 时间：2012-12-27T10:31:15.377
> 
> 标签：android, calendar

我正在尝试从我在 android 中的应用程序打开默认日历应用程序。我确实得到了一些关于这个的链接

```
 Intent calendarIntent = new Intent() ;
  calendarIntent.putExtra("beginTime", tempCal.getTimeInMillis());
  calendarIntent.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT | 
                      Intent.FLAG_ACTIVITY_SINGLE_TOP);
  calendarIntent.setClassName("com.android.calendar","com.android.calendar.AgendaActivity");
            startActivity(calendarIntent); 
```

这确实打开了日历。但是，我希望日历应用程序以月份模式打开（显示月份中的天数列表）。我需要这方面的帮助。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T10:39:22.863

查看 Android 源代码中的日历应用程序后，您只能直接调用 AgendaActivity。其他的将不起作用。您可以直接与光标交互以读取/创建事件，但不能将日历应用程序调用到 AgendaView 以外的视图。原因是开发人员通过使用以下活动定义在 Cal 应用程序的清单中限制了该功能：

```
 <activity android:name="MonthActivity" android:label="@string/month_view"
        android:theme="@style/CalendarTheme" />
    <activity android:name="WeekActivity" android:label="@string/week_view"
        android:theme="@style/CalendarTheme" />
    <activity android:label="@string/day_view" android:name="DayActivity"     
        android:theme="@style/CalendarTheme"/>
    <activity android:name="AgendaActivity" android:label="@string/agenda_view"
        android:theme="@android:style/Theme.Light"
        android:exported="true" /> 
```

请注意，只有 AgendaActivity 具有`android:exported="true"`. 如果您尝试调用其他活动，您将获得权限异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:39:30.693

首先，您应该使用由`Calendar Provider`. 这将使它更加面向未来，因为硬编码您想要开始的活动的类并不是一个好主意。除此之外，它可能因设备而异。

这些的完整文档可以在[这里](http://developer.android.com/guide/topics/providers/calendar-provider.html#intents)找到。

`Intent.ACTION_VIEW`不幸的是，当您仅用于查看日历时，这些似乎不允许设置特定的查看模式。

# java - 当 django 调用 java 时，为什么 utf-8 字符输出不正确？

> ID：14053196
> 
> 赞同：1
> 
> 时间：2012-12-27T10:31:52.987
> 
> 标签：java, python, linux, encoding

在我使用django的时候，我写了一个可以被http://myhost/XXX/testIndex调用的方法

```
def testIndex(request):
    res = os.system('java -jar test.HelloWorld' > /tmp/log)
    ... ... 
```

HelloWorld java如下：

```
 public class HelloWorld {
    public static void main(String[] args) throws IOException {
        System.out.println("hello!");
        System.out.println("你好!");
} 
```

当我访问 http://myhost/XXX/testIndex 时，结果是当我打开 /tmp/log 文件时，UTF-8 字符不正确！像这样

```
hello! ??! 
```

发生了什么 ？顺便说一句，我在linux centOS下

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:52:55.187

你有两个问题：

1.  您在 Java 源代码中放置了非 ASCII 字符。这通常不是好的做法，因为您需要告诉 Java 编译器您对源文件使用了什么编码。如果是 UTF-8，请尝试：`javac -encoding UTF-8 HelloWorld.java`.

2.  System.out 的默认编码可能不是 UTF-8。如果您说出您使用的是哪个 JRE，这将有所帮助，因为不同的实现可能会略有不同。您可以使用 明确指定编码`java -Dfile.encoding=UTF-8`，但[也不建议](http://bugs.sun.com/view_bug.do?bug_id=4163515)这样做。如果是 Sun 或 OpenJDK JRE，需要在 Java 启动前设置 LANG 环境变量；您可以在您的网络服务器配置中执行此操作，或者使用`subprocess`允许您指定传递给新进程的环境的 python 模块来执行此操作。

# css - 如何在另一个 div 中居中 2 个浮动 div

> ID：14053198
> 
> 赞同：1
> 
> 时间：2012-12-27T10:32:06.620
> 
> 标签：css, html, haml, centering

我有以下haml代码来显示用户头像和用户昵称+简历

```
.page_section.header
  .user_info_container
    //float left
    .avatar_container.pull_left
      .avatar
        %a.fancy{href: "<%= user.original_avatar_url %>"}
          %img{:src => "/v1/users/<%= user.nickname %>/picture/large"}
    //float left
    .user_details.pull_left
      .name
        %h1 <%= user.name %>
        <%= user.description %>

    .clearfix 
```

我想将我的 .user_info_container 放在 .page_section.header div 的中心。我怎样才能做到这一点。我有以下CSS

```
.page_section.header {
  padding: 0 0 6px;
  min-height: 120px;
  text-align: center;
  .user_info_container {
    .avatar_container {
      width: 12%
    }

    .user_details {
      width: 88%
    }

  }
} 
```

![在此处输入图像描述](../Images/cf81f5b319b65eddc7ddfa160f458e34.png)

我想要实现的效果...将头像和文本居中在父div（.page_section）的中间

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-27T11:01:08.893

`display:inline-block;`您可以对子元素和`text-align:center;`父元素实现相同的效果

**[演示](http://jsbin.com/igufin/1)**

**HTML**

```
<div class="main">
    <div class="div1">One </div>
    <div class="div2">two</div>
  </div> 
```

**CSS**

```
.main {text-align:center;border:solid 1px #000;}
.main .div1,
.main .div2  {display:inline-block; border:solid 1px #f00; margin:2px;padding:10px} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-12T16:45:38.137

你总是可以让你的浮动`divs`的父内联块和中心它给`text-align: center`祖父

**HTML**

```
<div class="text-center">
    <div class="parent"></div>
        <div class="child"></div>
        <div class="child"></div>
    </div>
</div> 
```

**CSS**

```
.text-center {text-align: center;}
.parent {overflow: hidden; display: inline-block;}
.child {float: left} 
```

# synchronization - 共享资源 (TWI/ADC) - 消息队列或互斥体

> ID：14053201
> 
> 赞同：2
> 
> 时间：2012-12-27T10:32:23.973
> 
> 标签：synchronization, embedded, serial-port

我为 ADC 编写了一个驱动程序，该驱动程序在 read() 函数中使用 Mutex，如果 ADC 已在使用中，则导致线程阻塞。

我目前使用相同的方法在 TWI 接口上读取数据。

我已经看到消息队列用于对要在 TWI 接口上发送的消息进行排队。但是，如果您尝试读回数据 - 无论如何您都希望等待响应。那么，Mutex 方法不是更合适吗？

人们可以就我应该使用什么方法提供他们的想法吗？优点缺点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T12:05:42.250

将请求/响应对象排队到运行接口的一个线程更复杂但更灵活 - 它可以允许使用相同机制进行同步和异步交换。需要协议交换的线程有一个选择——它们可以在某个同步对象上等待接口线程发出已收到响应的信号，或者提供自己的回复队列机制，以便可以将多个请求排队到接口线程和回复在每个完成后排队返回。我通常在接口线程完成时调用的 RR 类中提供一个“OnCompletion(thisRRobject)”函数/方法，因此将实际回复操作委托给请求线程中的代码。RR 对象还可以包含异常/错误消息、超时间隔等的成员。这种复杂性在库中很好，

..或者你可以只使用互斥锁。简单，但仅同步 - 如果前一个交换正在进行，每个请求线程都必须等待。如果请求线程不想等待/阻塞，那就太难了。

课程用马...

# css - CSS min-height 不适用于 Mozilla firefox

> ID：14053206
> 
> 赞同：14
> 
> 时间：2012-12-27T10:32:56.800
> 
> 标签：css

我用最小高度创建了一个 div 标签，并给出了背景颜色“红色”。但是在 Mozilla Firefox 上，当内容超过最小高度限制时，div 的高度不会增加。这是我的代码：

```
<style type="text/css"><!--
ul {
    display:block;
    padding:0px;
    width:500px;
}

.b {
    width:250px;
    float:left;
    display:block;
}

div {
    min-height:50px;
    width:500px;
    background-color:red;
}
--></style>

<div>
    <ul>
        <li class="b">asdsad</li>
        <li class="b">asdsad</li>
        <li class="b">asdsad</li>
        <li class="b">asdsad</li>
        <li class="b">asdsad</li>
        <li class="b">asdsad</li>
        <li class="b">asdsad</li>
    </ul>
</div> 
```

似乎必须将 div 高度设置为适合内容，但我不知道我还能怎么做。如果我不使用高度，则无法设置背景颜色。请告诉我我该怎么做使内容适合 div 以及背景颜色为红色。
（不知道我是否解释清楚。所以如果您想了解更多有关该问题的信息，请询问我。）

-谢谢。

***已解决：***谢谢大家的友好回答。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-08-29T13:22:46.100

在 Firefox`min-height`上，不解释`display: table(-*);`属性，只是尝试使用`height: 50px;`它，因为它被解释为表格上的最小高度。

[来源](https://stackoverflow.com/questions/4875039/unable-to-get-min-height-to-work-on-table-in-firefox-3-6)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-10-09T07:23:51.350

所有主流浏览器都支持 min-height 属性。

但是这个属性不适用于 Firefox 上的 html 表。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-12-27T10:36:28.933

像这样更新你的CSS：

```
div{min-height:50px;width:500px;background-color:red;overflow:hidden;} 
```

`overflow:hidden;`添加

基本上，这是因为 `float:left`在`.b`课堂上发生的。这就是它的工作原理。通常您可以通过添加`overflow:hidden`到父 div 或添加 style="clear:both;" 的元素来修复它 在父 div 的末尾。

您可以使用“CSS clearfix”关键字搜索有关它的更多信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-11T18:09:44.333

当元素的显示设置为表格时，Firefox 将忽略 min-height 属性而不实际设置高度。

通过将元素切换为 display:block，firefox 然后尊重 min-height 属性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T10:36:50.033

添加`overflow: hidden;`到`ul`.

问题是您`LI`的 s 是浮动的，这导致父级不知道其内容的高度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-03T08:53:53.793

我添加了以下内容并且有效：

```
body {
  height:100%;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-27T10:37:23.577

您必须像这样清除嵌套的 li 标签的浮动：

```
ul:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-09T14:17:28.183

而不是最小高度：50px；只需添加填充：25px 0；

# jquery - 如何通过jquery查找浏览器的状态栏是否出现

> ID：14053212
> 
> 赞同：0
> 
> 时间：2012-12-27T10:33:33.140
> 
> 标签：jquery

我正在尝试创建一个小网站。为此，我设计了一些布局。一切都很好，除了身高。我将主 div 高度作为文档的高度`$(document).height()`。由于状态栏，我必须从结果高度减少 2 像素。在 IE9 中看起来不错。但是当我在 Firefox 中打开它时，底部有一些间隙。浏览器看起来像这样。

![在此处输入图像描述](../Images/ca0b48156b63a9ddb38bbb98f09490e9.png) ![在此处输入图像描述](../Images/da9ac1bfb22dc3a31273a2b9fbb8577b.png)

现在我想根据 IE 浏览器底部显示的状态栏的可见性来调整高度。如何通过jquery找到它是否可见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:49:17.350

我认为这是不可能的——但请随时证明我错了。在旁注上，状态栏不是唯一可以出现在底部的东西；我有几个插件可以添加在页面加载时弹出/弹出的附加状态通知，因此尝试确定状态栏是否可见可能不是最好的方法。

每个用户也将有不同大小的屏幕/分辨率，因此，您可以期望不同大小的视图窗口。

考虑到这一点，您是否考虑过`div`将

```
position:absolute;
top:0; right:0;
bottom:10px; left:0; 
```

这将确保 div 是屏幕的大小减去底部的几个像素。

# java - 如何将 Java EE 项目部署到我的网络服务器？

> ID：14053215
> 
> 赞同：1
> 
> 时间：2012-12-27T10:33:44.497
> 
> 标签：java, jakarta-ee, web, glassfish

我正在使用 NetBeans IDE 开发我的第一个 Java EE 项目。我的应用服务器是集成的 GlassFish。

此时我的项目在我的 Mac 上本地运行，带有 MySQL 数据库。如何将它部署在我的 Web 服务器上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T20:12:13.363

你有不同的可能性：

*   Netbeans 可以在集成的 Glassfish 服务器上部署您的应用程序。如果`Run`您进行项目并且为此项目选择了 Glassfish 服务器，这应该会自动发生。您可以更改下每个项目的选定服务器`Project Properties -> Run`

*   如果 Glassfish 服务器已经启动，您可以通过 Glassfish 管理控制台部署 .war 文件。导航到`http://localhost:4848`，转到`Applications`并单击`Deploy`

*   您可以手动部署您的应用程序。您必须将 .war 文件或包含 .war 文件内容的文件夹复制到该文件夹`/GLASSFISH_HOME/glassfish/domains/domain1/autodeploy`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:54:03.377

您需要使用部署的远程应用程序服务器功能。

如果它也是 Glassfish，您可以使用管理控制台来执行此操作 - 例如 example.com:4848（Glassfish 管理门户的默认端口）。

您也可以使用[Cargo Maven 插件](http://cargo.codehaus.org/Maven2+plugin)来自动化部署。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:12:19.340

您只需创建 war 文件并将其复制到您的 Web 服务器。当你启动你的网络服务器时，它会自动部署war文件。

# php - preg_replace 或 str_replace Php 按位置替换

> ID：14053218
> 
> 赞同：2
> 
> 时间：2012-12-27T10:34:04.017
> 
> 标签：php, regex, string, replace, preg-replace

假设我得到了这个字符串：

```
$str = "alemylaife"; 
```

（我知道它拼写错误，我的一生）

现在我该如何更换

“ale”而不替换“ale”之后也包含相同字母的任何内容？

假设我得到了这个数组：

```
$replace = Array("a","l","e");  
$with = Array("wh","at","ever");

$str = str_replace($replace,$with,$str);
echo $str; 
```

这将打印：

```
 whatevermyatwhifever 
```

如何停止 str_replace 以替换“ale”之后的字母？也许我必须修剪前 3 个字母然后替换它们然后加入修剪过的字符串？

编辑：我将尝试更清楚地表达自己。如果它们包含 A THEN L THEN 不管字母，我只想替换三 (3) 个首字母，所以，ala ale ald alr aly。这些是我想要替换的字母。我不希望他们之后的信件受到影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:56:26.607

问题不是很清楚。假设您想用“whatever”替换“ale”（如果我错了，请纠正我），那么您可以使用 preg_replace 来限制替换的数量。

**示例 1：（**替换第一次出现的“ale”）

```
preg_replace("/ale/", "whatever", "alemylaife", 1)
> whatevermylaife 
```

**示例 2：（**仅当字符串以“ale”*开头时替换）*

```
preg_replace("/^ale/", "whatever", "alemylaife", 1)
> whatevermylaife

preg_replace("/^ale/", "whatever", "lolalemylaife", 1)
> lolalemylaife 
```

**编辑：**您编辑了您的问题以提供更好的细节，我会使用：

```
// match a string that begins with "al" and then a character (case in-sensitive)
preg_replace("/^al[a-z]/i", "whatever", "alemylaife"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:39:13.130

输出 F，因为 A 被 B 替换，然后 B 被 C 替换，依此类推......最后 E 被 F 替换，因为从左到右替换。

```
$search  = array('A', 'B', 'C', 'D', 'E');
$replace = array('B', 'C', 'D', 'E', 'F');
$subject = 'A';
echo str_replace($search, $replace, $subject); 
```

输出：apearpearle pear 出于上述相同的原因

```
$letters = array('a', 'p');
$fruit   = array('apple', 'pear');
$text    = 'a p';
$output  = str_replace($letters, $fruit, $text);
echo $output; 
```

并为进一步参考检查 [http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T11:03:42.630

我不太清楚您在这里寻找哪种字符串函数。

```
$string = "alemylaife"; 
```

然后你写信`"ale"`。目前尚不清楚您是指序列`"ale"`还是仅指字母、任何顺序、任何计数，直到其中每个 ( `"a"`, `"e"`, `"l"`) 至少匹配一次。

那将是两件截然不同的事情。让我们采取第一个，它更容易：

```
// search for needle

$needle = 'ale';
$pos = strpos($string, $needle);

if (false === $pos) {
    $before = '';
    $after  = $string;
} else {
    $before = substr($string, 0, $pos);
    $after  = substr($string, $pos + strlen($needle));
} 
```

然后，您可以在您想要的部分上运行替换，然后再连接。

第二种变体需要更多的处理逻辑。这可以通过找到每个字符的第一个位置来完成，然后最大匹配就是该位置。如果任何一个搜索失败，它就会失败。这将替换`str_pos`第一个示例中的调用，实际上它正在多次运行它：

```
// search for character group

$group = str_split($needle);

$pos = false;
foreach (str_split($needle) as $character) {
    $test = strpos($string, $character);
    if (false === $test) {
        $pos = false;
        break;
    }
    $test += strlen($character);
    if ($test >= $pos) {
        $pos = $test;
    }
} 
```

最后，`$pos`包含第一个字母的位置，它是整个组的最后一个匹配字母。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T10:44:17.327

你有固定的搜索和替换吗？机器无法知道`ale`您指的是哪个字符串。

您可以扩大搜索范围，直到找到唯一匹配项，例如，使用设置为 1 的限制参数替换`alem`为`all m`或[preg_replace](http://php.net/manual/en/function.preg-replace.php)。当然，这总是会替换第一次出现的。

# java - 延迟更改颜色

> ID：14053225
> 
> 赞同：0
> 
> 时间：2012-12-27T10:34:34.103
> 
> 标签：java, android, loops, delay

我想在按下按钮时更改文本视图的背景颜色。它应该这样做：首先是白色 10 毫秒，然后是常规颜色。是否有某种延迟功能，或者我是否需要使用循环或某种方式为此编写自己的功能？非常感谢任何提示:)

此时我只是使用

```
button.setBackgroundColor(Color.parseColor("#ffa500")); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T10:38:48.260

每个视图都有`post`和`postDelayed`方法分别发布一个可运行的 UI 线程或延迟它。

```
 button.postDelayed(new Runnable() {

    @Override
    public void run() {
    // change color in here
    }
}, 10); 
```

**编辑：** 如果你要经常调用这个，你可以用这样的东西做得更好：

```
int currentColor;
private Runnable changeColorRunnable = new Runnable() {

    @Override
    public void run() {
        switch(currentColor){
        case Color.RED: currentColor = Color.BLACK; break;
        case Color.BLACK: currentColor = Color.RED; break;
        }
        button.setBackgroundColor(currentColor);

    }
}; 
```

进而：

```
 button.postDelayed(changeColorRunnable, 10); 
```

这将避免不必要的对象创建和垃圾收集

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:38:39.207

最简单的方法是创建一个处理程序并使用 postDelayed 执行它：http: [//developer.android.com/reference/android/os/Handler.html#postDelayed(java.lang.Runnable, long)](http://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:39:29.823

```
 private class ButtonColorChange extends AsyncTask<String, Void, String>
 {
    protected void onPreExecute() 
    { 
         //do
    }

    protected String doInBackground(String... params)
    {
        try 
        {
             Thread.sleep(10000);   //waiting here          
        }
        catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }

    protected void onPostExecute(String result) 
    {
         button.setBackgroundColor(Color.parseColor("#ffa500"));
    }
 } 
```

每当您单击按钮时使用此方法

```
ButtonColorChange  btc = new ButtonColorChange();
 btc.execute(); 
```

# javascript - Javascript：window.open：根据页面/正文内容增加高度+宽度

> ID：14053227
> 
> 赞同：0
> 
> 时间：2012-12-27T10:34:46.757
> 
> 标签：javascript

好的....客户给了我根据正文/页面内容增加高度+宽度的任务。

无论我在做什么都是 onclick 我正在调用以下函数的链接，即`open_bug_add_window`。`window.open()`使用javascript的方法打开一个窗口的功能。

以下是我的功能：

```
function open_bug_add_window(exec_id)
{        
    height="270px";
    width="510px";    
    window.open(fRoot+"lib/execute/bugAdd.php?exec_id="+exec_id,"bug_add",
        "width="+width+",height="+height+",resizable=yes,dependent=yes, scrollbars=yes");
} 
```

`height`在这里，我将`width`手动传递给它，以便根据该大小打开窗口。但是窗口包含一些链接，单击该链接会显示页面。我想根据页面/正文内容增加窗口大小。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T10:36:53.670

您应该尝试使用 onLoad 事件来获取文档的宽度和高度，然后将窗口大小设置为文档大小。

# c - 如何知道寄存器变量存储在哪里？

> ID：14053231
> 
> 赞同：5
> 
> 时间：2012-12-27T10:35:07.037
> 
> 标签：c

我知道寄存器变量存储在 CPU 寄存器中。

如果 CPU 寄存器忙/满，则相同的变量将存储在堆栈中。

我怎么知道变量存储在堆栈或 CPU 寄存器中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T10:36:24.753

不，你不能。

它由编译器决定，并且可能会在编译之间发生变化，例如，如果周围的代码改变了[寄存器压力](http://en.wikipedia.org/wiki/Register_allocation)或编译器标志发生了变化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T10:57:17.610

我同意 Unwind 先生的[回答](https://stackoverflow.com/questions/14053231/how-to-know-where-is-the-register-variable-stored/14053246#14053246)，但在某种程度上，这种方式可能对您有所帮助：

文件名`x.c`：

```
int main(){
    register int i=0; 
    i++;
    printf("%d",i);
} 
```

汇编代码：

```
~$ gcc x.c -S 
```

输出文件名为`x.s`.

在我的情况下`ebx`，使用了寄存器，**在不同的编译时间可能会有所不同。**

```
~$ cat x.s
    .file   "x.c"
    .section    .rodata
.LC0:
    .string "%d"
    .text
.globl main
    .type   main, @function
main:
    pushl   %ebp
    movl    %esp, %ebp
    andl    $-16, %esp
    pushl   %ebx
    subl    $28, %esp
    movl    $0, %ebx
    addl    $1, %ebx             // because i++
    movl    $.LC0, %eax
    movl    %ebx, 4(%esp)
    movl    %eax, (%esp)
    call    printf
    addl    $28, %esp
    popl    %ebx
    movl    %ebp, %esp
    popl    %ebp
    ret 
```

您还可以使用以下**命令反汇编您的可执行文件**`objdunp`：

```
$ gcc x.c -o x 
$ objdump x -d 
```

`objdump`使用命令 的部分汇编输出：

```
080483c4 <main>:
 80483c4:   55                      push   %ebp
 80483c5:   89 e5                   mov    %esp,%ebp
 80483c7:   83 e4 f0                and    $0xfffffff0,%esp
 80483ca:   53                      push   %ebx
 80483cb:   83 ec 1c                sub    $0x1c,%esp
 80483ce:   bb 00 00 00 00          mov    $0x0,%ebx
 80483d3:   83 c3 01                add    $0x1,%ebx          //due to i++
 80483d6:   b8 b0 84 04 08          mov    $0x80484b0,%eax
 80483db:   89 5c 24 04             mov    %ebx,0x4(%esp)
 80483df:   89 04 24                mov    %eax,(%esp)
 80483e2:   e8 0d ff ff ff          call   80482f4 <printf@plt>
 80483e7:   83 c4 1c                add    $0x1c,%esp
 80483ea:   5b                      pop    %ebx
 80483eb:   89 ec                   mov    %ebp,%esp
 80483ed:   5d                      pop    %ebp
 80483ee:   c3                      ret    
 80483ef:   90                      nop 
```

`%ebx`寄存器为寄存器变量保留。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T11:07:06.433

我太同意 UnWind 的回答，另一方面，反汇编 GDB 中的代码可能会存储变量。分解一个模糊的代码，我给出了该框架的本地人，如下所示，

```
 (gdb) info locals
 i = 0
 ret = <value optimized out>
 k = 0
 ctx = (BN_CTX *) 0x632e1cc8
 A1 = (BIGNUM *) 0x632e1cd0
 A1_odd = (BIGNUM *) 0x632e1ce8
 check = <value optimized out>
 mont = (BN_MONT_CTX *) 0x632e2108
 A = (const BIGNUM *) 0x632e2028 
```

现在，如果尝试打印本地人的地址，它会告诉我存储位置如下，

```
 (gdb) p &i
 $16 = (int *) 0x143fba40
 (gdb) p &k
 $17 = (int *) 0x143fba38
 (gdb) p &mont
 Address requested for identifier "mont" which is in register $s7
 (gdb) 
```

这里的对象`i`和`k`在堆栈上，`mont`在寄存器 $s7 中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-10T17:47:40.293

根据 Brian W. Kernighan 和 Dennis M.Ritchie（C 语言的创始人）的“The Ansi C Programming Language - Second Edition”一书，***你不能***。

第 4 章，第 84 页，

> “......而且无论该变量是否实际放在一个`register`.”中，都无法获取寄存器变量的地址。”

希望有帮助！祝你未来好运，罗恩

# android - 减少 Android 应用程序启动时间

> ID：14053232
> 
> 赞同：1
> 
> 时间：2012-12-27T10:35:24.197
> 
> 标签：android, android-animation, android-drawable

我准备了一个应用程序。

我的应用程序有带有可绘制动画的启动画面。当应用程序启动时显示白屏（1 或 2 秒）并显示我的启动动画。有一段时间动画没有完成它是移动到下一个屏幕。我想我犯了一些错误我的代码是，

```
splashAnimation = (AnimationDrawable) imgAnim.getBackground();
        imgAnim.post(new Runnable() 
        {
            public void run() 
            {
                if ( splashAnimation != null ) 
                    splashAnimation.start();
              }
        });

        System.out.println("----------"+splashAnimation.getNumberOfFrames());

          for(int i = 0; i< splashAnimation.getNumberOfFrames();i++)
          {  
           totalDuration += splashAnimation.getDuration(i);  
          }  
          Timer timer = new Timer();  

       TimerTask timerTask = new TimerTask()
       {  
           @Override  
           public void run() 
           {  
               splashAnimation.stop(); 
                    Message msg = new Message();
                     msg.arg1 = 1;
                     uiHandler.sendMessageDelayed(msg, Constants.ZOOM_ANIM_DELAY);

                     //zoomAnimation();
            }
        };  
       timer.schedule(timerTask, totalDuration); 
```

如何减少应用启动时间？

# java - 为什么 2^0 在 java 中返回 2

> ID：14053243
> 
> 赞同：0
> 
> 时间：2012-12-27T10:36:18.497
> 
> 标签：java

> **可能重复：**
> [^ 运算符在 Java 中的作用是什么？](https://stackoverflow.com/questions/1991380/what-does-the-operator-do-in-java)
> [Java中的力量^？](https://stackoverflow.com/questions/7101515/the-power-in-java)

如果这是重复的，我很抱歉，但我在 SO 中没有找到任何东西。

所以有人可以解释一下为什么

```
 System.out.println((2^0)); 
```

这会回来`2`吗？

我期待一个`1`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T10:37:18.540

因为`^`运算符的意思不是“将 2 提高到 0 次方”。这是一个按位异或运算符。

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

为此，您的代码应如下所示：

```
double one = Math.pow(2.0, 0.0);  // Silly, but you can do it. 
```

如果答案不完全是 1.0，请不要感到惊讶。您需要了解[浮点数的工作原理](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T10:37:26.463

该`^`符号表示[XOR](http://en.wikipedia.org/wiki/XOR)而不是 pow。试试`Math.Pow(2.0, 0.0)`吧。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T10:42:20.817

Java 中的 ^ 是按位异或。所以 2(1 0) ^(XOR) 0(0 0) =1 0 即 2 !!! 知道了？

# xml - XSLT 'key' 在'use' 中应用表达式

> ID：14053244
> 
> 赞同：0
> 
> 时间：2012-12-27T10:36:19.003
> 
> 标签：xml, xslt, key, substring

我有一个 XML 片段

```
 <node>
            <abc>part_1</abc>
    </node>
    <node>
            <abc>part_2</abc>
    </node> 
```

如何忽略字符串`"part_"`并在仅整数部分的`use`属性中指定？`xsl:key`具体来说，我在使用`<key>`'s`use`属性方面需要帮助。

我试过以下：

`<key name="uniq-abc" match='abc' use='substring-after(., '_')/>`

但它不起作用。

以下是源 XML：

```
 <ppp.PppControlProtocol>
        <shelfId>1</shelfId>
        <snmpPortId>841023490</snmpPortId>
        <controlProtocolType>lCp</controlProtocolType>
        <state>initial</state>
        <lastClearedTime>0</lastClearedTime>
        <restartCount>0</restartCount>
        <deploymentState>0</deploymentState>
        <objectFullName>network:138.120.242.60:ppp:interface-9/1/2.sts12_1:cp-Link</objectFullName>
        <name>cp-Link</name>
    </ppp.PppControlProtocol> 
```

我想使用以下值并提取 IP 部分`138.120.242.60`

```
 <objectFullName>network:138.120.242.60:ppp:interface-9/1/2.sts12_1:cp-Link</objectFullName> 
```

这是试图提取它的 XSLT 的一部分。

```
 <xsl:key name="uniq-ips" match="objectFullName" use="substring-before(substring-after(., ':'), ':')"/> 
```

这是我使用密钥的方式：

```
 <xsl:apply-templates select="ppp.PppControlProtocol/objectFullName[generate-id() = generate-id(key('uniq-ips', .)[1])]"/>
    .
    .
    .
    <xsl:for-each select="key('uniq-ips', $currentIP)"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:02:18.910

**这里有一个问题**：

> ```
> <xsl:apply-templates select=
>   "ppp.PppControlProtocol/objectFullName
>                 [generate-id() 
>                = 
>                  generate-id(key('uniq-ips', .)[1])
>                 ]"/> 
> ```

**因为命名的键`'uniq-ips'`是这样定义的：**

```
 <xsl:key name="uniq-ips" match="objectFullName" 
             use="substring-before(substring-after(., ':'), ':')"/> 
```

**您需要将上面的代码更正为：**

```
 <xsl:apply-templates select=
   "ppp.PppControlProtocol/objectFullName
                 [generate-id() 
                = 
                  generate-id(key('uniq-ips', 
                                  substring-before(substring-after(., ':'), ':')
                                  )[1]
                             )
                 ]"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:19:09.700

以下应该足够了：

```
<xsl:key name="k1" match="abc" use="substring-after(., '_')"/> 
```

（当然，完整的样式表需要一个命名空间声明`xmlns:xsl="http://www.w3.org/1999/XSL/Transform"`）。

如果您仍然有问题，那么我同意 Thomas 的观点，向我们展示 XML 输入的详细信息、XSLT 代码、使用的 XSLT 处理器以及您收到的确切错误消息。

# jquery-validate - jQuery validate - 使用类似规则对输入进行分组

> ID：14053245
> 
> 赞同：0
> 
> 时间：2012-12-27T10:36:23.293
> 
> 标签：jquery-validate

我正在使用 jquery validate 来验证提交的表单。该表单具有三个输入字段，它们具有相同的规则，即只有数字和必需 - 真。我可以为所有三个输入写一个规则吗？

```
 rules: {
                "depository.startDate":{
                    required:true,
                    digits:true
                },
                "depository.endDate":{
                    required:true,
                    digits:true
                },
                "depository.port":{
                    required:true,
                    digits:true
                }
            }, 
```

至

```
 rules: {
            "depository.startDate, depository.port, depository.endDate ":{
                required:true,
                digits:true
            }
        }, 
```

我试过但它不工作，任何其他方式我都可以得到这个验证工作。

- 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:08:02.250

使用内置`rules()`方法添加规则。 [请参阅文档。](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

注意：**必须在调用***后*调用该方法`.validate()`，并且必须与`.each()`.

[jsFiddle 演示](http://jsfiddle.net/kSFKE/5/)

HTML：

```
 <input type="text" name="depository.startDate" />
 <input type="text" name="depository.endDate" />
 <input type="text" name="depository.port" /> 
```

jQuery：

```
$('#form').validate({
    // your other options
});

// the following method must come AFTER .validate()
$("input[name*='depository']").each(function() {
    $(this).rules('add', {
        required: true,
        digits: true
    });
}); 
```

当您向表单动态添加字段时，此方法也非常有用。

以下与 custom 结合使用`messages:`。请注意，格式与将规则添加为选项时略有不同`.validate()`...

```
$("input[name*='depository']").each(function() {
    $(this).rules('add', {
        required: true,
        digits: true,
        messages: {
            required: "Required input",
            digits: "Only digits please"
        }
    });
}); 
```

* * *

或者，您可以使用 a`class`代替，但要使其正常工作，您还必须将其与`.each()`...

[jsFiddle 演示](http://jsfiddle.net/kSFKE/4/)

HTML：

```
 <input type="text" class="myclass" name="depository.startDate" />
 <input type="text" class="myclass" name="depository.endDate" />
 <input type="text" class="myclass" name="depository.port" /> 
```

jQuery：

```
$('form').validate({
    // your other options
});

// the following method must come AFTER .validate()
$('form').find('.myclass').each(function() {
    $(this).rules('add', {
        required: true,
        digits: true
    });
}); 
```

# javascript - 使用 jquery 方法 insertBefore 在单击链接时插入 html 代码

> ID：14053247
> 
> 赞同：0
> 
> 时间：2012-12-27T10:36:28.507
> 
> 标签：javascript, jquery

我正在用 php 开发一个像 facebook 这样的社交网站。我有一个页面用于显示带有两个链接的用户消息，即`reply`在`delete`收件箱中每条消息的右下角。我的问题是，当我单击回复链接时，应该出现另一个 html 块，用户可以将回复发送回发件人。我已经编写了这样的代码

```
<div class="msgutil">
   <a href="" id="reply" onclick="return post_reply()" >reply</a>//this method does'nt works

   <a href="delete_message.php?msg_id=<?php echo $row_msg_id;?>">delete</a> //dont check this
</div><!--end msgutil--> 
```

我已经像这样在 post_reply() 中插入了 html 文档

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">
 </script>

<script type="text/javascript">
function post_reply()
 {
    $("<form id="msgreply" name="msgreply" action="#"> <textarea name="replyfield"    id="replyfield"></textarea> </form>").insertBefore("#reply");
return true;
 }
 </script> 
```

我不知道为什么它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:38:36.983

您在用双引号组成的字符串中使用双引号。这是无法做到的，因为您不断地结束并再次开始字符串。

要么用单引号括起来：

```
$('<form id="msgreply" name="msgreply" action="#"> <textarea name="replyfield" id="replyfield"></textarea></form>').insertBefore("#reply");
//^                                                                                                              ^ 
```

或转义双引号：

```
$("<form id=\"msgreply\" name=\"msgreply\" action=\"#\"> <textarea name=\"replyfield\" id=\"replyfield\"></textarea></form>").insertBefore("#reply");
//          ^         ^       ^         ^         ^  ^                  ^           ^     ^           ^ 
```

您还可以使用以下 HTML：

```
<div class="msgutil">
   <a href="#" id="reply">reply</a>
   <a href="delete_message.php?msg_id=<?php echo $row_msg_id;?>">delete</a>
</div><!--end msgutil--> 
```

和以下javascript：

```
$(document).ready(function() {
    $("#reply").click(function(e) {
        $('<form id="msgreply" name="msgreply" action="#"> <textarea name="replyfield" id="replyfield"></textarea></form>').insertBefore("#reply");
        e.stopPropagation();
        e.preventDefault();
    });
});​ 
```

得到相同的结果。

[这是一个 JSFiddle 演示。](http://jsfiddle.net/9Xp29/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:45:14.937

我认为您应该使用 jQuery 遵循更好的方法，如下所示：

**HTML：**

```
<div class="msgutil">
   <a href="" id="reply">reply</a>

   <a href="delete_message.php?msg_id=<?php echo $row_msg_id;?>">delete</a>
</div><!--end msgutil-->​ 
```

**jQuery：**

```
$("#reply").click(function(e){
    e.preventDefault();
    var formHtml = '<form id="msgreply" name="msgreply" action="#"> <textarea name="replyfield"    id="replyfield"></textarea> </form>';
    $(this).before(formHtml);
}); 
```

**[演示](http://jsfiddle.net/arvind07/3pXcA/1/)** ​</p>

# wordpress - Wordpress 插件队长滑块加载

> ID：14053249
> 
> 赞同：0
> 
> 时间：2012-12-27T10:36:48.237
> 
> 标签：wordpress

我正在使用**船长滑块**插件将滑块添加到我的网站我想知道它是一张一张地加载图像还是加载所有图像然后显示任何想法？

# javascript - 在键盘启用时捕捉点击/触摸事件 - iPad 和 TinyMCE

> ID：14053252
> 
> 赞同：1
> 
> 时间：2012-12-27T10:36:53.420
> 
> 标签：javascript, jquery, html, ipad, web

iPad 问题 - 需要专家。

我正在做一个小网站。作为网络的一部分，用户使用 TinyMCE 键入文本，我将这些文本包装在 html 标记中。当用户**单击**其中一个标签时，会触发一个事件。

到目前为止，一切都很好，但是，当使用 iPad 时，一旦键盘关闭（禁用），事件就会按预期触发，但如果键盘打开并且用户**触摸**其中一个标签，则事件根本不起作用.

我需要事件和键盘 - 有没有办法在键盘使用 JavaScript/jQuery 或任何其他网络语言捕获事件之前触发事件？

# javascript - 如果无法控制重定向，如何在 onload 发生之前获取重定向 url？

> ID：14053253
> 
> 赞同：1
> 
> 时间：2012-12-27T10:37:00.247
> 
> 标签：javascript, redirect, iframe, dom-events

我有一个 iframe，其中包含一个我无法控制的 Web 部件。Web 部件包含一些重定向功能。

问题是，重定向页面加载在 iframe 而不是顶部窗口中。我尝试通过添加以下内容来强制重定向到顶部窗口`head`：

```
<base target="_search" />
<base target="_top" />
<base target="_parent" /> 
```

`<a></a>`但是没有任何成功（我想这是因为iframe 里面没有任何东西？）。

所以我尝试了另一种解决方案，比如在这里：[iFrame src change event detection？](https://stackoverflow.com/questions/2429045/iframe-src-change-event-detection)这是我的代码：

```
if (ifrm.attachEvent)
    ifrm.attachEvent('onload', OnIframeRedirect);
else
    ifrm.addEventListener('load', OnIframeRedirect, false);

function OnIframeRedirect() {
    var redirectUrl = this.contentWindow.location;
    if (redirectUrl.pathname.indexOf('PartOfTheIframeSrc') == -1)
    // When the iframe is not loading it's original src
    top.window.location.href = redirectUrl;
} 
```

这行得通。但由于`OnIframeRedirect`是发生在 之后`onload`，用户仍然可以看到`top.window.location`更改前的重定向页面。

所以我想知道，如果有人知道如何在 onload 发生之前获取重定向 url？

# python - 从 JSON 字符串中转义数据的任何巧妙方法？

> ID：14053254
> 
> 赞同：4
> 
> 时间：2012-12-27T10:37:05.683
> 
> 标签：python, celery, web2py

我正在向带有后端`jsonrpc`的服务器发送一些请求。有时，我会遇到想要分析的错误。错误在回复中转义了，所以不容易理解。我得到这样的东西：`web2py``celery``jsonrpc`

```
{"version": "1.1", "id": "ID4", "error": {"message": "TypeError: 'NoneType' object does not support item assignment", "code": 100, "data": ["  File \"/home/myuser1/tmp/web2py/gluon/tools.py\", line 4068, in serve_jsonrpc\n    s = methods[method](*params)\n", "  File \"/home/myuser1/tmp/web2py/applications/mycompany_portal/controllers/activity.py\", line 66, in get_cdr_page\n    invalidate_cache = pars['invalidate_cache'], use_long_polling = pars['use_long_polling'])\n", "  File \"/home/myuser1/projects/new-mycompany-portal/python_modules/pmq_client.py\", line 85, in get_page\n    res = result.get(timeout=10)\n", "  File \"/home/myuser1/.virtualenvs/python2.7.2-mycompany1/lib/python2.7/site-packages/celery/result.py\", line 119, in get\n    interval=interval)\n", "  File \"/home/myuser1/.virtualenvs/python2.7.2-mycompany1/lib/python2.7/site-packages/celery/backends/amqp.py\", line 138, in wait_for\n    raise self.exception_to_python(meta['result'])\n"], "name": "JSONRPCError"}} 
```

我想要的是获得回复的`error.data`一部分，将其`jsonrpc`取消转义并将其显示为堆栈跟踪。我可以手动完成（更改`\"`->`"`并处理`\n`），但我想避免在这里重新发明轮子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:45:10.137

这是未解析的原始 JSON 吗？将其解析为 JSON：

```
import json
print ''.join(json.loads(yourstring)['error']['data']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:41:14.247

重新编辑：

采用：

取消报价

[http://docs.python.org/2/library/urllib.html#urllib.unquote](http://docs.python.org/2/library/urllib.html#urllib.unquote)

或者

unquote_plus

[http://docs.python.org/2/library/urllib.html#urllib.unquote_plus](http://docs.python.org/2/library/urllib.html#urllib.unquote_plus)

用于转义 HTTP 类数据（即百分比转义）

有关更多信息，请参阅此问题和答案：

[从 HTTP 转义 Python 字符串](https://stackoverflow.com/q/780334/1284631)

并且，对于 unescape-in​​g 常规转义符号（即反斜杠），请使用 .decode()（与 .encode() 对应）。请参阅以下答案：

[https://stackoverflow.com/a/10944959/1284631](https://stackoverflow.com/a/10944959/1284631)

[https://stackoverflow.com/a/9340191/1284631](https://stackoverflow.com/a/9340191/1284631)

# jakarta-ee - 基于用户选择实现报告生成器

> ID：14053255
> 
> 赞同：0
> 
> 时间：2012-12-27T10:37:07.447
> 
> 标签：jakarta-ee, report, birt, xsl-fo

我想设计一个可以生成 pdf 和 rtf 格式的自定义报告的 Java EE 网站。

我发现 BIRT 报告设计工具有助于设计报告。但我想要的是为用户提供用户选择章节和参数（如时间间隔、区域等）的灵活性，并根据选择的章节和子章节生成报告。

我想知道 BIRT 是否支持这种灵活性，或者是否有其他工具或框架可以帮助我做到这一点。任何资源或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:32:01.153

您可以使用允许用户选择或输入值的 BIRT 创建参数化报告。还有级联参数组，允许您有多个级别的参数供用户选择。根据我对您的问题的理解，这应该可以让您做自己想做的事。

希望这可以帮助。

# mapping - c# 库或助手用于 RavenDB 中更新操作中的对象映射/复制？

> ID：14053258
> 
> 赞同：2
> 
> 时间：2012-12-27T10:37:13.047
> 
> 标签：mapping, ravendb

也许我没有以正确的方式解决这个问题，所以如果有人能引导我朝着正确的方向前进，我将不胜感激。

我的代码中有很多方法可以执行类似的操作

```
void UpdateWidget(Widget updatedWidget)
{
    IDocumentSession session = documentStore.OpenSession();
    oldWidget = session.Load<Widget>("widgets" + widget.Id);

    oldWidget.Name = updatedWidget.Name;
    oldWidget.Color = updatedWidget.Color;
    oldWidget.CreatedDateTime = updatedWidget.CreatedDateTime;
    session.SaveChanges();
} 
```

**我想做**的是如下（当然假设 ID 相同）

```
void UpdateWidget(Widget updatedWidget)
{
    IDocumentSession session = documentStore.OpenSession();
    oldWidget = session.Load<Widget>("widgets" + widget.Id);
    oldWidget = updatedWidget
    session.SaveChanges();
} 
```

有人可以帮助我提供一些可以让我接近这一点的语法或模式吗？有没有办法在 Raven 中使用对象跟踪来实现这一点？还是我需要某种映射工具，例如 automapper（我不太了解）

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T16:17:29.713

您可以只存储更新的对象，如果它已经存在，它将替换旧的对象。

```
void UpdateWidget(Widget updatedWidget)
{
    using (var session = documentStore.OpenSession())
    {
        session.Store(updatedWidget);
        session.SaveChanges();
    }
} 
```

但是，您必须考虑并发影响。

如果您禁用了乐观并发，它应该只接受新文档，但您可能会踩到其他更改。如果您启用了它，您需要在同一会话中执行加载和更新，或者您需要自己跟踪文档的 etag。

查看以下 RavenDB 知识库文章了解详细信息：[http ://ravendb.net/kb/16/using-optimistic-concurrency-in-real-world-scenarios](http://ravendb.net/kb/16/using-optimistic-concurrency-in-real-world-scenarios)

还 - 与您的问题无关，但正确处理您的会话非常重要。把它包装在一个`using`声明中。（或者如果它被注入，那么确保你的 IoC 具有适当的生命周期范围，并在适当的时候处理它。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:43:13.143

AutoMapper 或类似（[Value Injecter](http://valueinjecter.codeplex.com/)）是摆脱从一个对象到另一个对象的代码映射的理想选择。

使用 AutoMapper，您将替换

```
oldWidget.Name = updatedWidget.Name;
oldWidget.Color = updatedWidget.Color;
oldWidget.CreatedDateTime = updatedWidget.CreatedDateTime; 
```

和

```
AutoMapper.Mapper.CreateMap<Widget, Widget>();
var oldWidget = AutoMapper.Mapper.Map<Widget, Widget>(updatedWidget); 
```

应在应用程序启动时配置 AutoMapper (.CreateMap)。

# extjs - extjs 不能工作

> ID：14053259
> 
> 赞同：1
> 
> 时间：2012-12-27T10:37:13.037
> 
> 标签：extjs, extjs4

我正在学习Extjs并用Extjs4.2写了一个演示，但它没有用

```
<html>
<head>
<title>A Simple JavaScript Function Example</title>

    <style type="text/css" href="css/ext-all.css"></style>
    <script type="text/javascript" src="js/ext.js"></script>
</head>

<body>
<script type="text/javascript">
Ext.application({
    name: 'HelloExt',
    launch: function(){
        Ext.create('Ext.container.Viewport', {
            layout: 'fit',
            items: [
                {
                    title: 'Hello Ext',
                    html : 'Hello! Welcome to Ext JS.'
                }
            ]
        });
    }
});
</script>
</body>

</html> 
```

在 chrome 中，它显示![在此处输入图像描述](../Images/cbc97a7d9e8c73f375d899f3e1db7ae9.png)

“ext.js:18”的对应位置是 ![在此处输入图像描述](../Images/415ce00a9fb3713efd453359825b7e2d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:54:20.173

尝试替换此行：
`<script type="text/javascript" src="js/ext.js"></script>`

对此：
`<script type="text/javascript" src="js/ext-all.js"></script>`

另一件事，尝试在单独的文件中编写您的应用程序。内联脚本是不行的。

# javascript - 列表元素中的 Onclick 问题

> ID：14053267
> 
> 赞同：0
> 
> 时间：2012-12-27T10:37:41.033
> 
> 标签：javascript, onclick, html-lists

好的，所以我得到了一个根据数据库中的信息创建的列表。最终结果如下所示：

```
<ul id="menu">
  <li onclick="testFunction(1, "text")">Title1</li>
  <li onclick="testFunction(2, "text")">Title2
    <ul class="sub">
      <li onclick="testFunction(3, "text")">Title3</li>
    </ul>
  </li>
  <li onclick="testFunction(4, "text")">Title4</li>
</ul> 
```

现在，我想将 id 和文本发送到函数“testFunction”。这适用于主要的 li 元素，但是当我从“子”类中单击一个 li 元素时，该函数首先在按下的 li 元素上运行，然后在上面的 li 元素上运行。所以在这种情况下，如果我按下 Title3，函数将首先以 id 3 运行，然后以 id 2 运行，女巫是父元素。我在想它以某种方式访问​​了整个 li 树，但无法真正理解为什么。有什么想法吗？

# sql-server - Coldfusion：如何用一个ID更新多条记录

> ID：14053271
> 
> 赞同：0
> 
> 时间：2012-12-27T10:37:51.147
> 
> 标签：sql-server, coldfusion

这其实是从[这里](https://stackoverflow.com/questions/13508291/coldfusion-mssql-how-to-insert-multiple-rows-with-one-unique-id-in-one-submi)继续的。

假设一位老师想要更新学生的技能。过程是这样的：

1.  选择学生姓名。
2.  查看学生的个人资料。
3.  单击更新链接。更新页面显示带有复选框的技能列表。
4.  教师可以检查或取消检查学生的技能。然后点击提交。

例如：

```
+------+------------------------+
Draw   |   <checkbox checked > 
+------+------------------------+
Read   |   <checkbox> 
+------+------------------------+
Dance  |   <checkbox checked >
+------+------------------------+ 
```

所以这就是问题所在；

1.  如何使用一个 ID 更新多个提交？（将提交值与数据库中的值进行比较）

2.  当skillid在studentskill表中不存在时，如何添加（INSERT INTO）？

**餐桌技巧**

```
+---------+------------+
| skillid | skillname  |
+---------+------------+
| 1       | draw       |
+---------+------------+
| 2       | read       |
+---------+------------+
| 3       | dance      |
+---------+------------+ 
```

**表学生技能**

```
+----------+----------|
|studentid | skillid  |
+----------+----------+
| 001      | 1        |
| 001      | 2        |
| 002      | 1        |
| 002      | 2        |
| 002      | 3        |
+----------+----------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T12:54:25.857

**更新：**

事实证明，它`StudentSkill`包含额外的列（除了 StudentID 和 SkillID）。[史蒂夫布莱恩特的回答](https://stackoverflow.com/a/14069602/104223)是这种情况的更好选择。

* * *

一种常见的方法是`DELETE`首先针对所选学生的所有现有技能。然后`INSERT`是新技能。优点：它比第二种方法更简单一些缺点：每次都删除，即使没有任何更改。

```
 <!--- change cfsqltypes if needed --->
   <cfquery ...>
      DELETE FROM StudentSkill
      WHERE  studentID = <cfqueryparam value="#form.studentId#" cfsqltype="cf_sql_integer">
   </cfquery>

   <cfquery ...>
        INSERT INTO studenSkill ( studenId, skillId )
        SELECT <cfqueryparam value="#form.studentId#" cfsqltype="cf_sql_integer">
               , skillId
        FROM   skill
        WHERE  skillId IN 
               (
               <cfqueryparam value="#form.skillId#" cfsqltype="cf_sql_integer" list="true">
               )
   </cfquery> 
```

另一种方法是`DELETE`仅使用未检查/删除的技能。然后使用新添加的 `OUTER JOIN`技能`INSERT`。其他任何内容都被视为未更改。

```
 <cfquery ...>
      DELETE FROM StudentSkill
      WHERE  studentID = <cfqueryparam value="#form.studentId#" cfsqltype="cf_sql_integer">
      <cfif listLen(form.skillId)>
        AND  skillId NOT IN 
             (
               <cfqueryparam value="#form.skillId#" cfsqltype="cf_sql_integer" list="true">
             )
      </cfif>
   </cfquery>

   <cfquery ...>
      INSERT INTO StudentSkill ( studenId, skillId )
      SELECT <cfqueryparam value="#form.studentId#" cfsqltype="cf_sql_integer">
               , s.skillId
      FROM   Skill s LEFT JOIN StudentSkill stu 
                 ON   s.skillID = stu.skillID
                 AND  stu.studentID = <cfqueryparam value="#form.studentId#" cfsqltype="cf_sql_integer">
      WHERE  s.skillId IN 
               (
               <cfqueryparam value="#form.skillId#" cfsqltype="cf_sql_integer" list="true">
               )
      AND    stu.skillID IS NULL
   </cfquery> 
```

注意：确保将两个查询包装在 a 中`cftransaction`，以便将它们视为一个单元。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T12:29:56.030

我同意李的回答。我只想添加（这个添加对于评论来说太长了）以下内容：

1）避免删除所有记录然后重新添加它们。有一天，您可能会决定要在该表中添加额外的数据，如果您删除所有技能，则只要运行此代码，您就会丢失它。正确添加 WHERE 子句很容易，因此您不妨这样做。

2) 我建议使用“WHERE NOT EXISTS”而不是 OUTER JOIN 来确保学生技能表中不存在记录。OUTER JOIN 可能会表现得更好一些，但 WHERE NOT EXISTS 在这种情况下应该表现得足够好并且会更清晰。

毕竟，您说“当skillid 在studentskill 表中不存在时”和“WHERE NOT EXISTS”读起来很像。

```
 <cftransaction>
   <cfquery ...>
      DELETE
      FROM StudentSkill
       WHERE  studentID = <cfqueryparam value="#form.studentId#" cfsqltype="cf_sql_integer">
       <cfif listLen(form.skillId)>
         AND  skillId NOT IN (<cfqueryparam value="#form.skillId#" cfsqltype="cf_sql_integer" list="true">)
       </cfif>
    </cfquery>

    <cfquery ...>
       INSERT INTO StudentSkill ( studentId, skillId )
       SELECT <cfqueryparam value="#form.studentId#" cfsqltype="cf_sql_integer">
                , skillId
       FROM   Skill
       WHERE  skillId IN (<cfqueryparam value="#form.skillId#" cfsqltype="cf_sql_integer" list="true">)
       AND    NOT EXISTS
                (
                    SELECT  1
                    FROM     StudentSkill
                    WHERE   studentID = <cfqueryparam value="#form.studentId#" cfsqltype="cf_sql_integer">
                        AND skillID = Skill.skillID
                )
    </cfquery>
  </cftransaction> 
```

如前所述，将整个事物包装在 cftransaction 中将确保整个更改集发生或根本不发生。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:56:15.117

SQL Server 2008 支持表值参数，但我不知道 ColdFusion 是否支持。

请参阅此答案：[将表值参数传递给存储过程](https://stackoverflow.com/questions/2683869/passing-a-table-valued-parameter-to-a-stored-procedure)。

在那个答案中有一个如何将列表作为 XML 传递给存储过程的链接。在存储过程中，您可以将 XML 列表加载到临时表中，并通过加入临时表来插入和删除记录。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T15:37:24.957

@leigh 提供了一个很好的答案，但另一种方法可能是将您的“选定”选项显示为链接而不是复选框。该链接将提示您确认删除该选项并刷新页面。

然后您的复选框处理将仅用于添加新记录（听起来您已经在做）。这将有助于防止人们意外选中错误的框并删除技能。

# shell - 将 awk 的输出分配给变量

> ID：14053285
> 
> 赞同：5
> 
> 时间：2012-12-27T10:38:43.740
> 
> 标签：shell, unix, awk, aix

我有一个脚本，其内容如下：

```
 result= awk 's=100 END  {print  s }' 
    echo "The result is" $result 
```

所需的输出是：

```
The result is 100 
```

我的脚本在没有退出的情况下运行，我也没有得到所需的输出。请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T10:42:22.987

使用[命令替换](http://tldp.org/LDP/abs/html/commandsub.html)将命令的输出分配给变量。

语法是：`var1=$(command)`.

```
result=$(awk 'BEGIN{s=100} END {print s}' /dev/null)
echo "The result is $result" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:54:28.093

awk 命令需要有一些输入！

```
awk 's=100 END  {print  s }' <input file here> 
```

您需要将您的线路更改为：

```
result= `awk 's=100 END  {print  s }' <input file>` 
```

它挂起的原因是 awk 正在等待它的输入！

# android - 安卓版面设计

> ID：14053288
> 
> 赞同：-4
> 
> 时间：2012-12-27T10:38:48.200
> 
> 标签：android, android-layout

我是android开发的新手，我想在android中制作一个这样的屏幕：

任何人都可以帮助我这样做：

1.  ImageView（从左、右和顶部留出 20px 的空间）。
2.  空间。
3.  文本视图。
4.  空间。
5.  文本视图1。
6.  空间。
7.  文本视图 2：文本视图 3。
8.  空间。

. . ……

如果 imageView 不存在 textview 应该出现并且 imageview 应该隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:07:12.870

例子：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ll"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dip"
        android:layout_marginLeft="20dip"
        android:layout_marginRight="20dip"
        android:layout_marginTop="20dip" 
        android:src="@drawable/img"/>

    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dip"
        android:layout_marginLeft="2dip"
        android:layout_marginRight="2dip"
        android:layout_marginTop="5dip" 
        android:text="Txt1"/>
    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dip"
        android:layout_marginLeft="2dip"
        android:layout_marginRight="2dip"
        android:layout_marginTop="5dip" 
        android:text="Txt2"/>
    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dip"
        android:layout_marginLeft="2dip"
        android:layout_marginRight="2dip"
        android:layout_marginTop="5dip" 
        android:text="Txt3"/>

</LinearLayout> 
```

# ruby-on-rails - 为什么我会收到未定义的方法错误？

> ID：14053289
> 
> 赞同：1
> 
> 时间：2012-12-27T10:38:50.850
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我收到这个错误

> #ActiveRecord::Relation:0x0000001c3f57e8 的未定义方法“created_at”

**控制器**

```
 @user = User.find_by_username(params[:username])
    @post = @user.comment_threads

    if @post
        last_time = @post.created_at
        if Time.now - last_time <= 0.5.minute
            redirect_to messages_received_path 
            flash[:notice] = "You cannot spam!"   
            return
        end
    end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:41:09.410

因为这行`@post = @user.comment_threads`返回一个对象`ActiveRecord::Relation`给你。最好在句子的末尾加上一个`.last`或`.first`，这样你就可以有一个`Post`对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T10:55:00.143

`@post = @user.comment_threads`返回一个 post 对象的数组。所以`created_at`尝试对整个数组而不是任何`post`对象进行尝试。

这应该会有所帮助。

```
if @post
        last_time = @post.last.created_at
        if Time.now - last_time <= 0.5.minute
            redirect_to messages_received_path 
            flash[:notice] = "You cannot spam!"   
            return
        end
    end 
```

# c# - 想知道 MaxConcurrentRequestsPerCPU 的值

> ID：14053291
> 
> 赞同：2
> 
> 时间：2012-12-27T10:38:57.157
> 
> 标签：c#

我知道 MaxConcurrentRequestsPerCPU 的默认值是 12。我已经阅读了许多类似下面的文章：

[http://blogs.msdn.com/b/tmarq/archive/2007/07/21/asp-net-thread-usage-on-iis-7-0-and-6-0.aspx](http://blogs.msdn.com/b/tmarq/archive/2007/07/21/asp-net-thread-usage-on-iis-7-0-and-6-0.aspx)

但是，通过代码或其他方式，我仍然想知道 MaxConcurrentRequestsPerCPU 的确切值。我们在 .Net Framework 2.0 上运行我们的应用程序

我知道 .Net 4.0 及更高版本，使用 HostingEnvironment.MaxConcurrentRequestsPerCPU 很容易

请帮帮我。

问候， Varun Shringarpure

# g-wan - gwan v3.12.26 的奇怪行为

> ID：14053292
> 
> 赞同：0
> 
> 时间：2012-12-27T10:39:12.227
> 
> 标签：g-wan

我刚刚安装了来自 gwan 团队的最新圣诞礼物，但我遇到了一些问题：

1.  archlinux 的分段错误。
2.  关于 Ubuntu 的奇怪行为。
3.  我不能在上面运行任何脚本。

关于#1，Archlinux 是最新的并使用 2.16 GLIBC。

关于#2，我加载`http://188.165.219.99:8080/100.html`时有时会显示 100 X，有时会显示错误页面（使用 CSS），有时会显示没有 CSS 的错误页面。

关于#3，我无法运行任何 csp 脚本：

```
http://188.165.219.99:8080/?hello.c
http://188.165.219.99:8080/?hello.rb
http://188.165.219.99:8080/?hello.php 
```

以上都不起作用。csp url 有变化吗？

我已经在我的 ubuntu 上安装了 php5-cli 和 ruby​​。

有关信息：

```
# ldd --version
ldd (Ubuntu EGLIBC 2.11.1-0ubuntu7.11) 2.11.1
Copyright (C) 2009 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
Written by Roland McGrath and Ulrich Drepper. 
```

这里是archlinux的日志

```
# cat logs/gwan.log 
[Thu Dec 27 14:03:44 2012 GMT] ------------------------------------------------
[Thu Dec 27 14:03:44 2012 GMT] G-WAN 3.12.26 64-bit (Dec 26 2012 13:58:12)
[Thu Dec 27 14:03:44 2012 GMT] ------------------------------------------------
[Thu Dec 27 14:03:44 2012 GMT] Local Time: Thu, 27 Dec 2012 16:03:44 GMT+2
[Thu Dec 27 14:03:44 2012 GMT] RAM: (1.60 GiB free + 0 shared + 834.57 MiB buffers) /   23.64 GiB total
[Thu Dec 27 14:03:44 2012 GMT] Physical Pages: 1.60 GiB / 23.64 GiB
[Thu Dec 27 14:03:44 2012 GMT] DISK: 1.71 TiB free / 1.88 TiB total
[Thu Dec 27 14:03:44 2012 GMT] 336 processes, including pid:1545 './gwan'
[Thu Dec 27 14:03:44 2012 GMT] Multi-Core, HT enabled
[Thu Dec 27 14:03:44 2012 GMT] 1x Intel(R) Xeon(R) CPU W3520 @ 2.67GHz (4 Core(s)/CPU, 2 thread(s)/Core)
[Thu Dec 27 14:03:44 2012 GMT]   using   4 workers 0[1111]3
[Thu Dec 27 14:03:44 2012 GMT]   among   8 threads 0[11110000]7
[Thu Dec 27 14:03:44 2012 GMT] 64-bit little-endian (least significant byte first) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:46:40.733

> 1：archlinux的分段错误

/logs/wgan.log 文件的顶部列出了许多信息。看到它会非常有帮助（这就是日志文件的用途）。

> 2：关于 ubuntu 的奇怪行为

不知道“奇怪行为”的性质或 Ubuntu 版本很难回答您的问题（如果这是一个问题）。

> 3：我不能在上面运行任何脚本

今天早上我们收到了超过 50 封电子邮件。没有（但您的）报告脚本无法运行。到目前为止，人们用所有语言报告了很好的结果。

检查您的文件权限（G-WAN 帐户*可以读取*脚本文件吗？）并验证是否安装了相关编译器/运行时。

* * *

Ogla 的报告表明嵌入在 HTML 中的 javascript（新版本确实缩小了那里）可能是剪切文件的原因。

* * *

除此之外，如果您在守护程序模式下运行，守护程序模式在 v3.12.25/26 中被破坏的事实**可能**会解释您的问题。

# intellij-idea - 如何在 Intellij IDEA 的实时模板中使用变量值？

> ID：14053301
> 
> 赞同：28
> 
> 时间：2012-12-27T10:39:51.790
> 
> 标签：intellij-idea, live-templates

我想为二传手创建实时模板。

我已经创建了这个模板 ![在此处输入图像描述](../Images/92ee41b3368a118b36b1e9302597168f.png)

如何使用**par**变量的值来生成**var**变量的值？基本上，我想在这里避免冗余，只放一次变量名，另一个将由某种算法自动生成。

**更新**

我想澄清一点我想要实现的目标。

假设我想创建名称为**setTime**且具有参数**time**的设置器。

```
public void setTime(long time)
{
    // ...
} 
```

我不想输入两次*“时间”* ——大写和非大写。我只想输入参数名称，以便自动生成方法名称。

**更新（答案）**

事实证明，可变顺序很重要。这是我想要的最终结果

![在此处输入图像描述](../Images/fa1215174fc59c8f6e53afe546faebe5.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-27T13:14:53.997

您可以使用`soutv`示例，注意它如何定义变量的副本：

![复制](../Images/f98c1e3676536aca15632cfc5b621dc0.png)

也可以通过插件或 Groovy 代码为实时模板定义自定义表达式： [如何在 Intellij 中为实时模板添加自定义表达式函数](https://stackoverflow.com/q/12156205/104891)。

# git - git如何处理带有空格的文件夹名称

> ID：14053304
> 
> 赞同：6
> 
> 时间：2012-12-27T10:40:02.790
> 
> 标签：git

我有一个名为 的文件夹`31 Files of - oop`。当我尝试运行此命令时：

> git rm -rf 31 个文件 -oop

我收到这个致命错误：

> 致命：pathspec '31' 不匹配任何文件

我如何需要准备带有空格的文件夹名称以在 git 中使用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T10:52:44.310

以这种方式尝试：

`git rm -rf "31 Files of - oop"` 其中 31 Files of -oop 是你的文件名。

# android - 如何从 url 启动 android 应用程序的特定活动？

> ID：14053305
> 
> 赞同：2
> 
> 时间：2012-12-27T10:40:05.987
> 
> 标签：android, url, android-intent, android-activity, launch

1.  如果我想从另一个应用程序 (B) 启动我的应用程序 (A) 的特定活动，我可以在应用程序 (B) 中添加 [intent + bundle] 以实现它。（[参考](http://developer.android.com/training/basics/intents/filters.html)）

2.  如果我想从某个 URL 启动我的应用程序 (A) 的特定活动，我可以在应用程序 (A) 中添加 [intent-filter + action + data] 来实现它。（[参考](https://stackoverflow.com/a/2958870/1702774)）

对于第二个目的，如果尚未安装应用程序，我如何将 URL 请求重定向到 google play 并下载我的应用程序？

是否可以用同一个 URL 达到不同的目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:16:40.850

Let's make it into a more real example, let's say App B reads from twitter and App A shows facebook posts, so you want facebook post URLs to open on App A.

From App B, before the user clicks on a facebook post URL, you can use the [PackageManager](http://developer.android.com/reference/android/content/pm/PackageManager.html) to check if App A is installed or not, and in case it's not installed you pass app A Google Play url, else you just pass the facebook URL. Note that this will only work if the user is inside App B. It won't work if the user is on chrome for example.

But if the user don't have neither installed, there's nothing you can do.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-18T15:39:23.930

[您应该使用谷歌在其文档](https://developer.android.com/training/basics/intents/filters.html)中提到的意图过滤器，但是有一种更好更简洁的方法可以使用 AirBnb [DeepLinkDispatch](https://github.com/airbnb/DeepLinkDispatch)实现通过 url (uris) 的导航。祝你好运！！

# javascript - if 语句在应用 match() 方法时找不到字符串

> ID：14053308
> 
> 赞同：1
> 
> 时间：2012-12-27T10:40:40.940
> 
> 标签：javascript, regex

需要进行简单的操作。如果 fileExt 不是 .jpg .jpeg .png .pdf，则应显示警报。

```
var fileName = 'upload-success.png';
var fileExt = fileName.match(/\.[a-z]{3,4}$/i); // fails
// var fileExt = '.png'; // works

if (fileExt !== ".jpg" && fileExt !== ".jpeg" && fileExt !== ".png" && fileExt !== ".pdf") {
    alert('Incorrect Extension: '+fileExt);
} 
```

在设置 fileExt 的两种情况下，结果是相同的。但是如果使用 match - if 语句找不到字符串。

[http://jsfiddle.net/mCjSW/1/](http://jsfiddle.net/mCjSW/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:43:44.013

`.match()`返回一个数组，因此您必须使用：

```
var fileExt = fileName.match(/\.[a-z]{3,4}$/i)[0]; 
```

**[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:57:42.620

直接使用[`match()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)检查文件扩展名怎么样？

```
var f = 'foo.png';

if (!f.match(/\.(jpe?g|png|pdf)$/))
    alert('invalid extension'); 
```

由于我们不需要返回的数组 by `match()`，我们可以在[`test()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)这里使用：

```
if (!/\.(jpe?g|png|pdf)$/.test(f))
    alert('invalid extension'); 
```

请记住，查看文件的扩展名并不能确保其内容与扩展名的文件类型匹配；但是，过滤扩展可确保用户不会*意外*选择/上传错误的文件。查看文件的 MIME 类型绝对是可取的，但这样的检查必须在服务器端进行（当然，有很多方法可以绕过使用 javascript 进行的检查，最明显的是停用浏览器中的 javascript 支持）。

# java - url.contains, url.startsWith, 其他例子？

> ID：14053314
> 
> 赞同：0
> 
> 时间：2012-12-27T10:40:59.410
> 
> 标签：java, android

嗯，这很难解释，我在互联网上搜索了答案，不幸的是我找不到任何答案，也许是因为我不知道它叫什么。

就像 url.CONTAINS url.STARTSWITH

大写的东西叫什么？班级？目的？另外，如果我可以得到一个放在 url 之后的东西的列表。“Class/Object/Whatever it is called”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:43:29.697

`url`是一个类的实例，`contains`并且`startsWith`是公共变量，因为它们后面没有括号。但是，我认为您可能不小心忽略了这些，在这种情况下`contains()`成为该类的成员函数（又名方法又名函数）`url`。

您提供的两个示例方法都是[String](http://developer.android.com/reference/java/lang/String.html)类的一部分。一个示例用法是：

```
String url = "http://www.google.com"; //create an object of the String class with the name url
if(url.startsWith("http")) {
    Log.d("MyApp", "This URL uses the http protocol");
} 
```

当您标记问题 Android 时，我提供了 Android 示例代码和链接。

# asp.net - Web.config 客户端缓存设置不适用于通过 HttpContext.RewritePath 路径重写

> ID：14053315
> 
> 赞同：4
> 
> 时间：2012-12-27T10:40:59.957
> 
> 标签：asp.net, cache-control, rewritepath

我们正在使用隐藏的内部站点系统。对于隐藏路径，我们使用 HttpContext.RewritePath。还有一个上传照片的系统，生成新的名字，照片没有机会改变。我们想为这些照片使用客户端缓存。

现场网址，用户可见：/files/autoupload/1/13/wufkjqr31028.jpg.[ps].jpg

服务器上 HttpContext.RewritePath 之后的 URL：/_sites/_shared/files/autoupload/1/13/wufkjqr31028.jpg.[ps].jpg

“/_sites/_shared/files”文件夹中有 web.config 和客户端缓存设置：

```
<system.webServer>
    <staticContent>
        <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="365.00:00:00" />
    </staticContent>
</system.webServer> 
```

如果请求“/files/autoupload/1/13/wufkjqr31028.jpg.[ps].jpg” url，则此设置根本不适用。响应中没有 Cache-Control 标头。

如果请求完整的 url "/_sites/_shared/files/autoupload/1/13/wufkjqr31028.jpg.[ps].jpg" 并且我们的 HttpContext.RewritePath 跳过它，则缓存设置有效。

但是，如果我使用相同的 web.config 在根目录中创建“/files”文件夹，缓存设置将开始使用原始的“/files/autoupload/1/13/wufkjqr31028.jpg.[ps].jpg”url。

因此 web.config 客户端缓存设置仅适用于最初请求的磁盘路径，不适用于重写路径。

除了在 r​​oot 中创建文件夹之外，还有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T08:34:15.380

您的 web.config`staticContent`在您重写 url 时有一个配置元素，使其成为动态的，因此您的配置不适用。

可以创建自己的 HTTP 处理程序并将其映射到您想要的任何文件扩展名。在处理程序的实现中，您几乎可以设置任何 HTTP 标头，在您的情况下是缓存控制标头。[请参阅此处的 IHttpHandler 接口](http://msdn.microsoft.com/en-us/library/system.web.ihttphandler.aspx) [和此处有关配置它的信息，](http://msdn.microsoft.com/en-us/library/aa903367%28v=vs.71%29.aspx) [请参阅此处的第 14.9 节缓存控制](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

# c# - 如何在 c# 中从 Marshal 获取值

> ID：14053318
> 
> 赞同：4
> 
> 时间：2012-12-27T10:41:04.783
> 
> 标签：c#, bytearray, marshalling

我有以下几行代码：

```
public static string getTrack1(string track1, int len)
{
  IntPtr track1Ptr = UnsafeNativeMethods.Decrypt(track1, len);
  Byte[] track1b = new Byte[200];
  Marshal.Copy(track1Ptr, track1b, 0, track1b.Length);
   return track1b.ToString();
} 
```

解密方法的减速是：

```
internal static class UnsafeNativeMethods
{
  [DllImport(_dllLocation, CallingConvention = CallingConvention.Cdecl)]
  public static extern IntPtr Decrypt(string track1, int dataLen);
 } 
```

我`unsigned char*`从`visual c++`代码中返回，每当我从代码中调用 dll 时，`c#`它总是返回“ `System.Byte[]`”而不是值。我在这里做错了`marshal`吗？

请在这里帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:51:41.567

`Byte[].ToString()`方法总是返回`System.Byte[]`。

要将字节数组转换为其字符串表示形式，您必须执行以下操作：

```
public static string ByteArrayToHexString(byte[] source)
{
    StringBuilder builder = new StringBuilder(source.Length * 3);

    foreach (byte b in source)
    {
        builder.Append(b.ToString("X2"));
        builder.Append(' ');
    }

    return builder.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:51:56.860

您缺少从 byte[] 到字符串的转换，但您必须定义什么是编码。这可能有效：

```
public static string getTrack1(string track1, int len)
{
  IntPtr track1Ptr = UnsafeNativeMethods.Decrypt(track1, len);
  Byte[] track1b = new Byte[200];
  Marshal.Copy(track1Ptr, track1b, 0, track1b.Length);
   return Encoding.Default.GetString(track1b);
} 
```

但这样做会更好；

```
public static string getTrack1(string track1, int len)
{
  IntPtr track1Ptr = UnsafeNativeMethods.Decrypt(track1, len);
  return Marshal.PtrToStringAnsi(track1Ptr);
} 
```

如果编码是 Ansi (=Default)

# http - HTTP 1.0 和 HTTP 1.1 的代码区别

> ID：14053320
> 
> 赞同：1
> 
> 时间：2012-12-27T10:41:10.177
> 
> 标签：http

> **可能重复：**
> [HTTP 1.0 与 1.1](https://stackoverflow.com/questions/246859/http-1-0-vs-1-1)

我已经了解了 HTTP 1.0 和 1.1 之间的区别。在前者中，为了从同一服务器获取每个资源，我们使用新连接，而在后者中，我们使用相同的连接。我在网上搜索了代码片段来证明该声明的合理性（例如 mozilla 等），但我无法找到它。你能帮我找到同样的吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T10:43:41.973

差异是例如：

*   重用连接
*   主机名的使用（有助于共享主机）
*   用于检查元信息的 OPTIONS 标头
*   使用 Expires、Etag 和 Last-Modified 进行缓存

# junit4 - getDataSet 不将数据绑定到数据库

> ID：14053326
> 
> 赞同：0
> 
> 时间：2012-12-27T10:41:35.200
> 
> 标签：junit4, hsqldb, dbunit

我在使用 JUnit 4、HSQLDB_2.2.9 和 DBUnit_2.4.8 进行一些测试时遇到问题。我正在使用以下输入文件（input.xml）：

```
<?xml version='1.0' encoding='UTF-8'?>
<dataset>
    <record_type record_type="Logical" />
    <record_type record_type="Conceptual" />
</dataset> 
```

我正在使用 getDataSet 方法使用此文件，如下所示：

```
@Override
protected IDataSet getDataSet() throws Exception
{
    System.out.println("Getting data set...");
    loadedDataSet = new  FlatXmlDataSetBuilder();
    FlatXmlDataSet dataSet = loadedDataSet.build(new File("test\\test\\files\\input.xml"));
    System.out.println("Dataset is "+dataSet.getTable("record_type").getValue(0, "record_type"));
    return dataSet;
} 
```

现在我的 SetUp 方法执行以下操作：

```
protected void setUp() throws Exception
{    
    System.out.println("Setting up environment...");
    getSetUpOperation();
    tearDown();
    createTables();

} 
```

createTables 方法如下：

```
private void createTables() throws SQLException, Exception 
{
    System.out.println("Creating database tables");
    String createRecordTypeTableSQL = "CREATE TABLE IF NOT EXISTS record_type "+
    "(record_type VARCHAR(30) NOT NULL,"+
    "PRIMARY KEY (record_type))";

    PreparedStatement createErrorTypeTablePS = getConnection().getConnection().prepareStatement(createRecordTypeTableSQL);              
    createRecordTypeTablePS.executeUpdate();

} 
```

我的get连接如下：

```
@Override
protected IDatabaseConnection getConnection() throws Exception 
{
    Connection jdbcConnection = null;

    Class.forName("org.hsqldb.jdbc.JDBCDriver");

    String url = "jdbc:hsqldb:sample";
    Properties props = new Properties();
    props.setProperty("user","sa");
    props.setProperty("password","");
    jdbcConnection = DriverManager.getConnection(url, props);

    return new DatabaseConnection(jdbcConnection);
} 
```

至于我的测试用例，如下：

```
@Test
public void testSelect() throws Exception

{

String selectSQL = "SELECT * from record_type";
PreparedStatement selectPS = 

getConnection().getConnection().prepareStatement(selectSQL);

ResultSet resultRS = selectPS.executeQuery();

String recordType=null;

if(resultRS.next())
{
    recordType = resultRS.getString("record_type");
    System.out.println("Found record type: "+recordType);
}

 assertEquals("Result   ","Logical",recordType);

} 
```

所以我期待的是值“逻辑”，但我得到的结果是“空”。为了验证我的 getDataSet 方法是否正确使用了 input.xml 文件，我添加了以下行：

```
 System.out.println("Dataset is "+dataSet.getTable("record_type").getValue(0, "record_type")); 
```

正如预期的那样，它返回了rec​​ord_type“逻辑”。所以我认为我的问题是 getDataSet 方法返回的返回的 IDataSet 没有将检索到的数据绑定到我创建的数据库表。

注意：我尝试在数据库中手动插入一个record_type，通过我的测试方法成功插入和检索，所以数据库连接也没有问题。

有任何想法吗？

***更新：*** 解决我的问题的唯一方法是将以下内容添加到我的 getDataSet() 方法中：

```
DatabaseOperation.CLEAN_INSERT.execute(getConnection(), dataSet); 
```

我确信在没有这行代码的情况下我能够做到这一点。我做错了什么吗？

# ios - 可以触发 io 编译 ios ipa 的 ios 4.2.1 吗？

> ID：14053327
> 
> 赞同：0
> 
> 时间：2012-12-27T10:41:36.167
> 
> 标签：ios, trigger.io

我很好奇触发器 io 是否可以编译适用于 ios 4.2.1 的 ios ipa。Info.plist 说它必须有 ios 4.3 或更高版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:47:30.833

你不能在 iOS 4.3 下用 Xcode 4.5 编译，这意味着该`minimum deployment target`值不能设置为低于 iOS 4.3

# multithreading - 如何将命令发送到单个客户端而不是所有客户端？

> ID：14053329
> 
> 赞同：5
> 
> 时间：2012-12-27T10:41:51.017
> 
> 标签：multithreading, delphi, tcp, connection, indy10

我正在用 Indy 10 编写一个简单的客户端/服务器聊天程序。我的服务器（idtcpserver）向客户端发送命令，客户端回答，但是当连接多个客户端并且服务器发送命令时，*所有*客户端都连接向服务器发送数据。

如何将命令发送到指定的客户端而不是全部？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T21:28:36.037

可以将命令发送到所有连接的客户端的唯一方法是，如果您的代码循环遍历所有向每个客户端发送命令的客户端。因此，只需删除该循环，或者至少将其更改为仅发送给您感兴趣的特定客户端。

向客户端发送命令以避免由于重叠命令而破坏与该客户端的通信的最佳位置是来自该客户端自己的`OnExecute`事件，例如：

```
procedure TForm1.IdTCPServer1Execute(AContext: TIdContext);
begin
  ...
  if (has a command to send) then
  begin
    AContext.Connection.IOHandler.WriteLn(command here);
    ...
  end;
  ...
end; 
```

如果您需要从其他线程向客户端发送命令，那么最好为该客户端提供自己的出站命令队列，然后让该客户端的`OnExecute`事件在安全的情况下发送队列。其他线程可以在需要时将命令推送到队列中。

```
type
  TMyContext = class(TIdServerContext)
  public
    ClientName: String;
    Queue: TIdThreadSafeStringList;
    constructor Create(AConnection: TIdTCPConnection; AYarn: TIdYarn; AList: TThreadList = nil); override;
    destructor Destroy; override; 
  end;

constructor TMyContext.Create(AConnection: TIdTCPConnection; AYarn: TIdYarn; AList: TThreadList = nil);
begin
  inherited Create(AConnection, AYarn, AList);
  Queue := TIdThreadSafeStringList.Create;
end;

destructor TMyContext.Destroy;
begin
  Queue.Free;
  inherited Destroy;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  IdTCPServer1.ContextClass := TMyContext;
end;

procedure TForm1.SendCommandToClient(const ClientName, Command: String);
var
  List: TList;
  I: Ineger;
  Ctx: TMyContext;
begin
  List := IdTCPServer1.Contexts.LockList;
  try
    for I := 0 to List.Count-1 do
    begin
      Ctx := TMyContext(List[I]);
      if Ctx.ClientName = ClientName then
      begin
        Ctx.Queue.Add(Command);
        Break;
      end;
    end;
  finally
    IdTCPServer1.Context.UnlockList;
  end;
end;

procedure TForm1.IdTCPServer1Connect(AContext: TIdContext);
var
  List: TList;
  I: Ineger;
  Ctx, Ctx2: TMyContext;
  ClientName: String;
begin
  Ctx := TMyContext(AContext);
  ClientName := AContext.Connection.IOHandler.ReadLn;
  List := IdTCPServer1.Contexts.LockList;
  try
    for I := 0 to List.Count-1 do
    begin
      Ctx2 := TMyContext(List[I]);
      if (Ctx2 <> Ctx) and (Ctx.ClientName = ClientName) then
      begin
        AContext.Connection.IOHandler.WriteLn('That Name is already logged in');
        AContext.Connection.Disconnect;
        Exit;
      end;
    end;
    Ctx.ClientName = ClientName;
  finally
    IdTCPServer1.Context.UnlockList;
  end;
  AContext.Connection.IOHandler.WriteLn('Welcome ' + ClientName);
end;

procedure TForm1.IdTCPServer1Disconnect(AContext: TIdContext);
var
  Ctx: TMyContext;
begin
  Ctx := TMyContext(AContext);
  Ctx.ClientName = '';
  Ctx.Queue.Clear;
end;

procedure TForm1.IdTCPServer1Execute(AContext: TIdContext);
var
  Ctx: TMyContext;
  Queue: TStringList;
begin
  Ctx := TMyContext(AContext);
  ...
  Queue := Ctx.Queue.Lock;
  try
    while Queue.Count > 0 do
    begin
      AContext.Connection.IOHandler.WriteLn(Queue[0]);
      Queue.Delete(0);
      ...
    end;
    ...
  finally
    Ctx.Queue.Unlock;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T12:27:44.563

通常在客户端/服务器设置中，客户端发起联系，服务器响应。使用 IdTCPServer 公开的事件，这始终是特定于上下文（连接）的，因此您不必做任何特别的事情。

要启动从服务器到客户端的联系，您必须跟踪连接的客户端并使用所需客户端的连接向其发送消息。为此，您需要一个列表来保存已连接的客户端，并且需要为 OnConnect 和 OnDisconnect 事件实现处理程序。

```
type
  TForm1 = class(TForm)
  private
    FClients: TThreadList;

procedure TForm1.HandleClientConnect(aThread: TIDContext);
begin
  FClients.Add(aThread);
end;

procedure TForm1.HandleClientDisconnect(aThread: TIDContext);
begin
  FClients.Remove(aThread);
end; 
```

当您想向特定客户端发送数据时，您可以使用通过 TCP 连接发送数据的常规方法来实现。但首先您需要在 FClients 列表中找到您需要的特定客户端。

如何识别特定客户完全取决于您。当客户端首次连接并识别自己时，这将完全取决于您在客户端和服务器之间交换的信息。话虽如此，无论该信息如何，该机制都是相同的。

TIDContext 是 Indy 用来保存连接详细信息的 TIdServerContext 类的祖先。您可以从 TIdServerContext 下降到一个可以存储您自己的连接详细信息的地方。

```
type
  TMyContext = class(TIdServerContext)
  private
    // MyInterestingUserDetails... 
```

`ContextClass`使用其属性告诉 Indy 使用您自己的 TIdServerContext 后代。您当然需要在激活服务器之前执行此操作，例如在 OnCreate 中。

```
procedure TForm1.HandleTcpServerCreate(Sender: TObject);
begin
  FIdTcpServer1.ContectClass = TMyContext;
end; 
```

然后你可以在任何有 TIdContext 参数的地方使用你自己的类，方法是将它转换为你自己的类：

```
procedure TForm1.HandleClientConnect(aThread: TIDContext);
var 
  MyContext: TMyContext;
begin
  MyContext := aThread as TMyContext;
end; 
```

然后，查找特定客户端的连接就变成了遍历 FClients 列表并检查它包含的 TMyContext 是否是您想要的问题：

```
function TForm1.FindContextFor(aClientDetails: string): TMyContext;
var
  LockedList: TList;
  idx: integer;
begin
  Result := nil;
  LockedList := FClients.LockList;
  try
    for idx := 0 to LockedList.Count - 1 do
    begin
      MyContext := LockedList.Items(idx) as TMyContext;
      if SameText(MyContext.ClientDetails, aClientDetails) then
      begin
        Result := MyContext;
        Break;
      end;
    end;
  finally
    FClients.UnlockList;
  end; 
```

**编辑**：正如 Remy 在评论中指出的那样：为了线程安全，您应该在写入客户端时保持列表锁定（这对吞吐量和性能来说不是一件好事），或者用 Remy 的话来说：

“更好的选择是给 TMyContext 自己的 TIdThreadSafeStringList 用于出站数据，然后让客户端的 OnExecute 事件在安全的情况下将该列表写入客户端。其他客户端的 OnExecute 事件可以在需要时将数据推送到该列表中。”

# android - 选择内部存储和外部存储

> ID：14053330
> 
> 赞同：5
> 
> 时间：2012-12-27T10:41:55.123
> 
> 标签：android, android-file

android中的内部存储和外部存储是什么意思？是否外部存储是微型 SD 卡和内部存储手机内存？如果我需要为我的应用程序编写一个文件，这只是我的应用程序需要（用户与此文件无关），那么我应该在哪里写入我的文件 - 在内部存储器或外部存储器中？

我认为，如果我将文件写入 SD 卡（外部存储器），那么当用户拔出 SD 卡时，应用程序将无法读取文件。这样对吗？如果它是正确的，那么在外部存储器中写入文件将不符合我的标准。因为，我的应用程序必须多次检查文件中的一些数据，如果在那个特定时刻用户将 SD 卡拔出，我的应用程序就无法实现其目标。

而且我需要永久写入文件（但如果用户卸载该应用程序，则应删除该文件）。那么，我应该走哪条路？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T13:48:14.130

查看这篇关于[在 Android 中使用文件存储的正确方法的](http://www.grokkingandroid.com/how-to-correctly-store-app-specific-files-in-android/)博文。

如果您需要始终访问文件，内部存储是您的最佳选择。但是您不应该在内部存储中使用大文件，因为许多设备的存储空间非常有限。

当您首先使用 Android 内置机制创建文件时，文件会在外部和内部存储上自动删除。这也在帖子中进行了解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-01T15:40:59.880

> 是否外部存储是微型 SD 卡和内部存储手机内存？

微型 SD 卡和手机内部存储器，根据 Android 官方文档，它们都是外部存储。

> 如果我需要为我的应用程序编写一个文件，这只是我的应用程序需要（用户与此文件无关），那么我应该在哪里写入我的文件 - 在内部存储器或外部存储器中？

将文件保存在内部存储中。

> 而且我需要永久写入文件（但如果用户卸载该应用程序，则应删除该文件）。那么，我应该走哪条路？

将文件保存在内部存储中。

为什么，因为根据[Android 官方指南](https://developer.android.com/guide/topics/data/data-storage.html#filesInternal)，

> 默认情况下，保存到内部存储的文件对您的应用程序是私有的，其他应用程序无法访问它们（用户也不能）。当用户卸载您的应用程序时，这些文件将被删除。

**在内部存储中保存文件的方法：**

两人都在`Context`上课

```
File getDir (String name, int mode)

File getFilesDir () 
```

但是，**请注意**，许多低端手机的**内存有限**。在这些类型的手机中，即使使用相机拍摄的图像也会自动存储在 SD 卡中。你必须照顾这种情况。

根据 Google/官方 Android 文档的内部和外部存储术语与我们的想法有**很大不同。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:54:44.303

您应该使用内部存储，它始终由您的应用程序访问，其他应用程序无权访问。

我认为您应该通过内部存储区域。

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-05T10:33:42.847

> 是否外部存储是微型 SD 卡和内部存储手机内存？

首先，您必须了解，外部存储不一定必须在单独的SD卡上和手机默认存储上的内部。外部存储是指Android设备的SD卡或没有SD的设备的等效分区-卡选项。

内部和外部存储只是用于保存数据的两个独立目录。内部存储是用于存储仅由我们的应用程序评估并在应用程序卸载时删除的私人文件的地方。而外部存储用于存储您的用户很可能关心的数据，即使您的应用程序不再安装在设备上。例如拍摄的照片、处理或绘制的图像、编辑的代码文件、购买的音频文件等等。我们可以获得用于存储音乐的默认外部存储路径，如下所示，

`Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC);`

> 而且我需要永久写入文件（但如果用户卸载该应用程序，则应删除该文件）。那么，我应该走哪条路？

要在用户卸载您的应用程序后保留数据，您需要将其保存在外部存储中。示例：通常，照片编辑器应用程序将编辑后的图像保存在外部存储中，以便用户可以从图库应用程序访问该照片，如果用户卸载此应用程序，用户编辑的图像将保留在用户设备上。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-27T10:47:46.010

为您的目的使用内部存储（作为文件或作为共享首选项[键值对]）

SD 卡不适合您使用。

使用解释各种存储选项的 android 开发者链接：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

干杯，普雷亚

# java - 在新页面上使用 JSP 打印 HTML 文件

> ID：14053331
> 
> 赞同：0
> 
> 时间：2012-12-27T10:41:54.730
> 
> 标签：java, html, jsp, url, servlets

我实际上是在使用此代码从服务器上的“不可用”文件夹中打印 JSP 中的 HTML 文件（我的意思是，如果我正在编写文件的正确 URL，则无法在浏览器上查看它们):

```
InputStreamReader isr = new InputStreamReader(new FileInputStream(request.getParameter("path")));
BufferedReader br = new BufferedReader(isr);    
String line = br.readLine();
while(line!=null){
    out.println(line);
    line = br.readLine();
} 
```

在“路径”中有我的文件的 URL。这确实有效，但它在我启动这段代码的同一页面中显示了我的 HTML 文件。我实际上需要在**新页面**上执行此操作，例如当您以这种方式设置此 HTML A 标记时：

```
<a href="www.mywebsite.com" TARGET="_new">LINK</a> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T11:03:56.537

我是这样解决的：

```
<a href="www.mywebsite.com/print?id=1&file=myfile.html" TARGET="_new">View</a> 
```

在 servlet 打印中，我将此代码放入 doGet/doPost 调用的 processRequest(HttpServletRequest request, HttpServletResponse response) 中：

```
String path1 = "mydir1/";
String path2 = "mydir2/";
String file = request.getParameter("file");    
InputStreamReader isr;
BufferedReader br;
String line = "";
char id = request.getParameter("id").charAt(0);
if(id == '1') {
    isr = new InputStreamReader(new FileInputStream(mydir1 + file));
    br = new BufferedReader(isr);
    line = br.readLine();
    while(line!=null){
        out.println(line);
        line = br.readLine();
    }
}
else if(id == '2') {
    isr = new InputStreamReader(new FileInputStream(mydir2 + file));
    br = new BufferedReader(isr);
    line = br.readLine();
    while(line!=null){
        out.println(line);
        line = br.readLine();
    }
}
else {
    out.println("Error");
} 
```

这样就没有更多的安全问题，因为最终用户/黑客无法查看整个路径，或者通过 get 方法传递它。

# eclipse-plugin - 创建类似 GUI 的网格（类似于 Microsoft excel 电子表格）

> ID：14053335
> 
> 赞同：2
> 
> 时间：2012-12-27T10:41:57.570
> 
> 标签：eclipse-plugin, swt, eclipse-rcp, jface, draw2d

我想创建类似电子表格的 GUI。具有可调整大小的单元格大小，填充颜色，放大和缩小等功能。我可以为此使用draw2d吗？

在任何基于 Java 的 GUI 框架中是否有类似网格的小部件？还是我需要在行和列中绘制矩形？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T10:56:58.283

看看 Eclipse 中的 Nebula 项目。它具有包含您需要的一些功能的小部件。

[http://www.eclipse.org/nebula/](http://www.eclipse.org/nebula/)

您可能最感兴趣的小部件是：

*   [浏览器](http://www.eclipse.org/nebula/widgets/xviewer/xviewer.php)
*   [表格](http://www.eclipse.org/nattable/index.php)

几年前，在 Nebula 处于可用状态之前，我需要一个灵活的网格控件。那时我发现并使用了 KTable。但我认为它不再定期维护，但它易于使用并符合我的目的。

[http://sourceforge.net/projects/ktable/](http://sourceforge.net/projects/ktable/)

# android - 将 Android 中的位图另存为 JPEG 在外部存储中的文件夹中

> ID：14053338
> 
> 赞同：21
> 
> 时间：2012-12-27T10:42:10.783
> 
> 标签：android, save, android-file

我正在使用此代码将位图保存在外部存储中，但如果该文件夹不存在，则不会创建该文件夹：

```
String path = Environment.getExternalStorageDirectory().toString();
        OutputStream fOutputStream = null;
        File file = new File(path + "/Captures/", "screen.jpg");
        try {
            fOutputStream = new FileOutputStream(file);

            capturedBitmap.compress(Bitmap.CompressFormat.JPEG, 100, fOutputStream);

            fOutputStream.flush();
            fOutputStream.close();

            MediaStore.Images.Media.insertImage(getContentResolver(), file.getAbsolutePath(), file.getName(), file.getName());
        } catch (FileNotFoundException e) {
            e.printStackTrace();
            Toast.makeText(this, "Save Failed", Toast.LENGTH_SHORT).show();
            return;
        } catch (IOException e) {
            e.printStackTrace();
            Toast.makeText(this, "Save Failed", Toast.LENGTH_SHORT).show();
            return;
        } 
```

如果不存在，如何将图像保存在新目录中，如果设备中存在文件夹，如何保存默认值？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-27T10:49:49.227

试试这个，它会给你肯定的结果：

```
String root = Environment.getExternalStorageDirectory().toString();
File myDir = new File(root + "/req_images");
myDir.mkdirs();
Random generator = new Random();
int n = 10000;
n = generator.nextInt(n);
String fname = "Image-" + n + ".jpg";
File file = new File(myDir, fname);
Log.i(TAG, "" + file);
if (file.exists())
    file.delete();
try {
    FileOutputStream out = new FileOutputStream(file);
    bm.compress(Bitmap.CompressFormat.JPEG, 90, out);
    out.flush();
    out.close();
} catch (Exception e) {
    e.printStackTrace();
} 
```

添加这个以在画廊中显示：

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://" + Environment.getExternalStorageDirectory()))); 
```

查看此链接以获得明确的答案： [在画廊中显示文件夹图像](https://stackoverflow.com/a/7887114/964741)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-27T10:47:24.990

请使用下面的代码片段可能会有所帮助

```
String path = Environment.getExternalStorageDirectory().toString();
OutputStream fOutputStream = null;
File file = new File(path + "/Captures/", "screen.jpg");
if (!file.exists()) {
    file.mkdirs();
}

try {
    fOutputStream = new FileOutputStream(file);

    capturedBitmap.compress(Bitmap.CompressFormat.JPEG, 100, fOutputStream);

    fOutputStream.flush();
    fOutputStream.close();

    MediaStore.Images.Media.insertImage(getContentResolver(), file.getAbsolutePath(), file.getName(), file.getName());
} catch (FileNotFoundException e) {
    e.printStackTrace();
    Toast.makeText(this, "Save Failed", Toast.LENGTH_SHORT).show();
    return;
} catch (IOException e) {
    e.printStackTrace();
    Toast.makeText(this, "Save Failed", Toast.LENGTH_SHORT).show();
    return;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:45:14.487

使用以下内容：

```
File dir = new File(path + "/Captures/");
if(!dir.exists()) {
    dir.mkdirs();
}
File file = new File(path + "/Captures/", "screen.jpg");
 ...... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-08T11:06:32.007

迟到但可能对某人有帮助。使用下面的代码，由于 BufferOutPutStream，它将更快地将位图保存在外部目录中。

```
public boolean storeImage(Bitmap imageData, String filename) {
    // get path to external storage (SD card)

    File sdIconStorageDir = null;

    sdIconStorageDir = new File(Environment.getExternalStorageDirectory()
            .getAbsolutePath() + "/myAppDir/");
    // create storage directories, if they don't exist
    if (!sdIconStorageDir.exist()) {
        sdIconStorageDir.mkdirs();
    }
    try {
        String filePath = sdIconStorageDir.toString() + File.separator + filename;
        FileOutputStream fileOutputStream = new FileOutputStream(filePath);
        BufferedOutputStream bos = new BufferedOutputStream(fileOutputStream);
        //Toast.makeText(m_cont, "Image Saved at----" + filePath, Toast.LENGTH_LONG).show();
        // choose another format if PNG doesn't suit you
        imageData.compress(Bitmap.CompressFormat.PNG, 100, bos);
        bos.flush();
        bos.close();

    } catch (FileNotFoundException e) {
        Log.w("TAG", "Error saving image file: " + e.getMessage());
        return false;
    } catch (IOException e) {
        Log.w("TAG", "Error saving image file: " + e.getMessage());
        return false;
    }
    return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T10:45:18.347

你应该看一下 File 的文档，你会发现方法 mkdir()。它与 unix 几乎相同： [https://developer.android.com/reference/java/io/File.html#mkdir()](https://developer.android.com/reference/java/io/File.html#mkdir%28%29)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-03T13:52:22.873

这就是我在 Koltin 案例中的做法：

```
fun getImageUriFromBitmap(context: Context, bitmap: Bitmap?): Uri {
        var filePath = ""
        try {
            filePath = createAndGetFilePath(context)
            val fileOutputStream = FileOutputStream(filePath)
            val bos = BufferedOutputStream(fileOutputStream)
            bitmap?.compress(Bitmap.CompressFormat.PNG, 100, bos)
            bos.flush()
            bos.close()
        } catch (e: FileNotFoundException) {
            Log.w("TAG", "Error saving image file: " + e.message)
        } catch (e: IOException) {
            Log.w("TAG", "Error saving image file: " + e.message)
        }
        return Uri.parse(filePath)
    }

    private fun createAndGetFilePath(context: Context): String {
        val file = File(
            context.getExternalFilesDir(Environment.DIRECTORY_PICTURES), // you can change the path here
            BuildConfig.localImagesFolder // add it in build.gradle under android
        )
        try {
            if (!file.exists()) {
                file.mkdirs()
            }
        } catch (e: java.lang.Exception) {
            e.printStackTrace()
        }
        return file.absolutePath + "/" + System.currentTimeMillis() + ".jpg"
    } 
```

# mysql - 执行时间过多

> ID：14053345
> 
> 赞同：1
> 
> 时间：2012-12-27T10:42:24.530
> 
> 标签：mysql, sql, query-performance

1.  下面的查询需要很长时间才能执行大约 2 分钟，请帮助我如何提高此查询的性能。
2.  所以我们的要求是在 2 到 3 秒内得到结果。
3.  查询也使用索引。
4.  但它正在执行更多扫描。

询问：

```
select max(`log_date`)
from `top_competitor_summary_entity`
where
  own_domain_id = 4
  and keyword_top1_count > 0
  and (grouptag_id = 0 OR grouptag_id is null); 
```

解释计划：

```
+----+-------------+-------------------------------+------+--------------------------------------+------------------------+---------+-------+---------+-------------+
| id | select_type | table                         | type | possible_keys                        | key                    | key_len | ref   | rows    | Extra       |
+----+-------------+-------------------------------+------+--------------------------------------+------------------------+---------+-------+---------+-------------+
|  1 | SIMPLE      | top_competitor_summary_entity | ref  | own_domain_id,own_domain_id_log_date | own_domain_id_log_date | 4       | const | 2100128 | Using where |
+----+-------------+-------------------------------+------+--------------------------------------+------------------------+---------+-------+---------+-------------+
1 row in set (0.66 sec) 
```

表结构：

```
mysql> show create table top_competitor_summary_entity\G
*************************** 1\. row ***************************
       Table: top_competitor_summary_entity
Create Table: CREATE TABLE `top_competitor_summary_entity` (
  `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `domain` varchar(255) NOT NULL COMMENT 'competitor domain name',
  `own_domain_id` int(11) NOT NULL,
  `keyword_top10_count` int(11) DEFAULT NULL,
  `keyword_top3_count` int(11) DEFAULT NULL,
  `keyword_top1_count` int(11) DEFAULT NULL,
  `keyword_top10_search_volume` bigint(20) DEFAULT NULL,
  `keyword_top3_search_volume` bigint(20) DEFAULT NULL,
  `keyword_top1_search_volume` bigint(20) DEFAULT NULL,
  `url_top10_count` int(11) DEFAULT NULL
    COMMENT 'how many competitor url in Top 10',
  `log_date` date DEFAULT NULL,
  `grouptag_id` int(11) DEFAULT '0',
  `keyword_top10_count_bing` int(11) DEFAULT '0',
  `keyword_top10_count_yahoo` int(11) DEFAULT '0',
  `keyword_top3_count_bing` int(11) DEFAULT '0',
  `keyword_top3_count_yahoo` int(11) DEFAULT '0',
  `keyword_top1_count_bing` int(11) DEFAULT '0',
  `keyword_top1_count_yahoo` int(11) DEFAULT '0',
  PRIMARY KEY (`id`),
  KEY `own_domain_id` (`own_domain_id`),
  KEY `domain_own_domain_id_log_date` (`domain`,`own_domain_id`,`log_date`),
  KEY `own_domain_id_log_date` (`own_domain_id`,`log_date`)
) ENGINE=InnoDB AUTO_INCREMENT=680592051 DEFAULT CHARSET=utf8
1 row in set (0.09 sec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:12:39.417

As **Brandon Moore** said

*The query itself is so simple that I don't think there's anything you could possibly do to it to make it faster by modifying it.*

Still you can try this and check if it make a bit difference

```
select `log_date`
from `top_competitor_summary_entity`
where
  own_domain_id = 4
  and keyword_top1_count > 0
  and (grouptag_id = 0 OR grouptag_id is null)
Order by log_date
LIMIT 0,1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:06:24.483

查询本身非常简单，我认为您无法通过修改它来使其更快。我仍然很好奇使用“IsNull(grouptag_id, 0) = 0”是否会产生任何影响。我对此表示怀疑，但看看它是否能刮掉任何东西可能会很有趣。

我认为真正的问题是可能有大量的 own_domain_id 值为 4 的记录，而 where 子句中的其他字段没有索引。您可以为它们创建单独的索引和/或如果您想创建一个专门为此查询量身定制的索引，然后创建一个在所有 4 个引用字段上的键。

其他一些观察：

如果有可能更改您的代码以处理空值（也许只是将它们视为 0），那么您可以摆脱您在大多数这些字段中放置的默认值并将它们设为空值。如果实际上没有多少字段的值为 0，那么这不会做太多，但是如果很多字段设置为 0，那么这将导致表占用更少的磁盘空间，这将转化为更少的时间来扫描桌子。

您还可以水平或垂直分区表。

横向：您可以将所有 top1 字段放入 top1 表中，将所有 top3 字段放入 top3 表中，等等。或者，您可以将所有 yahoo 放在一个表中，而将所有 bing 放在另一个表中；或者可能是一个表中的所有计数字段和另一个表中的所有搜索字段。如果您发现自己通常一次只需要一组字段，那么这将减少搜索时间，但如果您通常最终在大多数查询中获取所有字段，那么它当然不会有什么帮助。

Vertically：这可能比它的价值多得多，但是您可以将表中的记录拆分到多个表中，然后将它们放在多个硬盘上并同时异步查询它们。我一直想知道谷歌是否会按照这些思路做一些事情。

我还注意到您为您的 id 使用了一个 bigint，它是 8 个字节，而不是一个只有 4 个字节的 int。如果您认为您实际上会在某个时候处理数十亿条记录，那么 bigint 显然是要走的路，但否则您可以将您的数据库缩小大约 100 兆字节，这也会使您的搜索速度稍微快一些。并且没有理由现在不能将其设为 int 并在必要时将其更改回 bigint。

# c# - 上传带有 Facebook 状态的图片，WP8

> ID：14053346
> 
> 赞同：0
> 
> 时间：2012-12-27T10:42:25.590
> 
> 标签：c#, facebook, windows-phone-8

我无法用图片发送 Facebook 状态。找到代码但它抛出异常

`The Safe handle is closed`

如果我遗漏了什么，请告诉我。还有另一个使用 File.OpenRead(filename) 的例子，但它抛出了 UnAuthorizedAccessException

代码如下：

```
public static Stream ImageToShare
        {
        set
            {
                try
                {
                    using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
                    {
                        if (myIsolatedStorage.FileExists(ImageToShareKey))
                            myIsolatedStorage.DeleteFile(ImageToShareKey);

                        IsolatedStorageFileStream fileStream = myIsolatedStorage.CreateFile(ImageToShareKey);

                        StreamResourceInfo sri = null;
                        Uri uri = new Uri(ImageToShareKey, UriKind.Relative);
                        sri = Application.GetResourceStream(uri);

                        BitmapImage bitmap = new BitmapImage();
                        bitmap.SetSource(value);
                        //bitmap.SetSource(sri.Stream);
                        WriteableBitmap wb = new WriteableBitmap(bitmap);

                        Extensions.SaveJpeg(wb, fileStream, wb.PixelWidth, wb.PixelHeight, 0, 85);
                        fileStream.Close();
                    }
                }
                catch (Exception ex)
                {
                    AppHelper.ErrorOccured(ex);
                }
            }

private void postFBWithImage()
        {
            try
            {

                using (IsolatedStorageFile myFile = IsolatedStorageFile.GetUserStoreForApplication())
                using (IsolatedStorageFileStream stream = myFile.OpenFile("SharePhoto", FileMode.Open, FileAccess.Read))
                using (var imgFile = new FacebookMediaStream
                {
                    ContentType = "image/jpeg",
                    FileName = Path.GetFileName(imgPath.Text),
                }.SetValue(stream))
                {

                    var fb = new FacebookClient(AppSettings.FacebookPIN);
                    fb.PostCompleted += (o, args) =>
                    {
                        if (args.Error != null)
                        {
                            notPosted(args);
                            return;
                        }

                        Dispatcher.BeginInvoke(() =>
                        {
                            posted();
                        });
                    };

                    fb.PostAsync("me/photos", new { message = ShareComments, imgFile });
                }
            }
            catch (Exception ex)
            {
                AppHelper.ErrorOccured(ex);
                postFBWithoutImage();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T13:09:50.213

通过媒体流发送带有 facebook 状态的图像并不好，因为它会在隔离存储流中产生问题。最好的方法是在 Dictionary 对象而不是匿名对象中移动参数。所以总共有2个变化。一是从 FacebookMediaStream 到 FacebookMediaObject，二是使用 Dictionary 对象而不是使用匿名对象

以下是描述场景的代码。

```
 private void postFBWithImage()
    {
        try
        {
            using (IsolatedStorageFile myFile = IsolatedStorageFile.GetUserStoreForApplication())
            using (IsolatedStorageFileStream stream = myFile.OpenFile(AppSettings.ImageToShareKey, FileMode.Open, FileAccess.Read))
            {
                byte[] byteArr = null;
                using (var binRdr = new BinaryReader(stream))
                using (var memStr = new MemoryStream())
                {
                    const int ReadSize = 8196;
                    int chunkSize = 0;
                    do
                    {
                        byte[] buf = new byte[ReadSize];
                        chunkSize = binRdr.Read(buf, 0, ReadSize);
                        memStr.Write(buf, 0, ReadSize);
                    } while (chunkSize > 0);

                    byteArr = new byte[memStr.Length];
                    memStr.Position = 0;
                    memStr.Read(byteArr, 0, (int)memStr.Length);
                }

                var fb = new FacebookClient(AppSettings.FacebookPIN);
                fb.PostCompleted += (o, args) =>
                {
                    if (args.Error != null)
                    {
                        notPosted(args);
                        return;
                    }

                    Dispatcher.BeginInvoke(() =>
                    {
                        posted();
                    });
                };

                var parameters = new Dictionary<string, object>();
                parameters["message"] = ShareComments;
                parameters["file"] = new FacebookMediaObject
                    {
                        ContentType = "image/jpeg",
                        FileName = "image.jpeg",
                    }.SetValue(byteArr);
                fb.PostAsync("me/photos", parameters);

            }
        }
        catch (Exception ex)
        {
            AppHelper.ErrorOccured(ex);
        }
    } 
```

# java - java.util.Arrays 中 equals() 的运行时间是什么？

> ID：14053347
> 
> 赞同：9
> 
> 时间：2012-12-27T10:42:26.387
> 
> 标签：java, arrays, runtime, equals

如标题所述， in 的运行时间是`equals()`多少`java.util.Arrays`？

例如，如果它比较两个`int[]`，它是否会遍历数组中的每个元素，所以 O(n)？对于java`equals()`中各个类`equals()`中的所有内容，我们可以假设运行时总是 O(n) 吗？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T10:43:49.923

从源代码中获取（源代码价值 100 字：P）：

```
/**
 * Returns <tt>true</tt> if the two specified arrays of ints are
 * <i>equal</i> to one another.  Two arrays are considered equal if both
 * arrays contain the same number of elements, and all corresponding pairs
 * of elements in the two arrays are equal.  In other words, two arrays
 * are equal if they contain the same elements in the same order.  Also,
 * two array references are considered equal if both are <tt>null</tt>.<p>
 *
 * @param a one array to be tested for equality
 * @param a2 the other array to be tested for equality
 * @return <tt>true</tt> if the two arrays are equal
 */
public static boolean equals(int[] a, int[] a2) {
    if (a==a2)
        return true;
    if (a==null || a2==null)
        return false;

    int length = a.length;
    if (a2.length != length)
        return false;

    for (int i=0; i<length; i++)
        if (a[i] != a2[i])
            return false;

    return true;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-27T10:52:26.527

> 如标题所述，java.util.Arrays 中默认 equals() 的运行时间是多少？

默认 equals 可能意味着 Object.equals。Arrays.equals() 通常是您真正想要的。

> 例如，如果它比较两个 int[]，它是否会遍历数组中的每个元素，所以 O(n)？

是的，这就是消息来源所暗示的。

> 对于java中所有默认的equals()，我们可以假设运行时总是O(n)吗？

对于某些*集合*，这是正确的，但对于树集合，它可以是 O(n log n)。HashMap 最坏的情况是 O(N^2) 因为非集合`n`没有意义。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-27T10:43:58.510

它首先检查长度，如果相等，则遍历所有元素并在它们上调用 equals。

所以，如果你想忽略个人等价的成本，是的，那将是 O(n)。但是，例如，如果条目是字符串，它也会随着字符串变长而变长，而不仅仅是因为它们变得更多（因为比较本身也是 O(m)）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T10:46:39.703

[javadoc 声明](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28int%5b%5d,%20int%5b%5d%29)：如果*两个数组以相同的顺序包含相同的元素，则它们是相等的*。所以很明显，这将是一个 O(n) 操作，因为它需要遍历所有项目（至少如果它们都相等）。

[默认`equals`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)（即Object#equals）是 O(1) 操作，它是一个简单的引用比较：

> 对于任何非空引用值 x 和 y，当且仅当 x 和 y 引用同一个对象（x == y 的值为 true）时，此方法才返回 true

# c++ - 内部移动 std::vector 元素和 QVector

> ID：14053348
> 
> 赞同：7
> 
> 时间：2012-12-27T10:42:28.790
> 
> 标签：c++, qt, gcc, stl, c++11

有两个向量`std :: vector`和`QVector`。我们必须检查插入时如何“移位”元素。（用五个元素构造两个向量并插入零元素）我有这段代码：

```
#include <QVector>
#include <QTextStream>

struct MoveTest
{
    int i;

    MoveTest()                       {}
    MoveTest(const MoveTest& other)  {QTextStream(stdout) << "constr copy" << endl;}
    MoveTest(MoveTest &&other)       {QTextStream(stdout) << "constr move" << endl;}
    ~MoveTest()                      {}

    inline MoveTest&    operator=   (const MoveTest& other) {QTextStream(stdout) << "copy" << endl;}
    inline MoveTest&    operator=   (MoveTest &&other)      {QTextStream(stdout) << "move" << endl;}
};

int main(int argc, char *argv[])
{
    QTextStream(stdout) << "std::move:" << endl;
    MoveTest t1;
    MoveTest t2(std::move(t1));
    t1 = std::move(t2);

    QTextStream(stdout) << "QVector:" << endl;
    QVector<MoveTest> qmTest(5);
    qmTest.insert(qmTest.begin(), MoveTest());

    QTextStream(stdout) << "std::vector:" << endl;
    std::vector<MoveTest> mTest(5);
    mTest.insert(mTest.begin(), MoveTest());

    return 0;
} 
```

我的 gcc 4.7.2 输出，QMAKE_CXXFLAGS += -std=c++0x：

```
std::move:
constr move
move
QVector:
constr copy
constr copy
constr copy
constr copy
constr copy
constr copy
copy
copy
copy
copy
copy
copy
std::vector:
constr move
constr copy
constr copy
constr copy
constr copy
constr copy 
```

如何在不复制的情况下插入具有内部移位的元素？需要哪些 GCC 标志？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T10:46:25.110

由于您的移动运算符可以抛出异常，`std::vector`因此不能使用它。如果操作员在调整大小的过程中途抛出异常会怎样？如果它不能抛出异常并且向量实现可以使用它，则将其声明为[noexcept 。](http://en.cppreference.com/w/cpp/language/noexcept_spec)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T08:55:56.287

可能对某人有用。

```
struct MoveTest
{
    int i;

    MoveTest()                      {}
    MoveTest(MoveTest&&) noexcept   {std::cout << "constr move\n";}
    MoveTest(const MoveTest&)       {std::cout << "constr copy\n";}
    ~MoveTest() noexcept            {}

    MoveTest&   operator=   (MoveTest&&) noexcept   {std::cout << "move\n"; return *this;}
    MoveTest&   operator=   (const MoveTest&)       {std::cout << "copy\n"; return *this;}
};
Q_DECLARE_TYPEINFO(MoveTest, Q_MOVABLE_TYPE);

int main(int argc, char *argv[])
{
    std::cout << "std::move:\n";
    MoveTest t1;
    MoveTest t2(std::move(t1));
    MoveTest t3(std::move_if_noexcept(t2));
    t2 = std::move(t3);
    t1 = std::move_if_noexcept(t2);
    std::cout << "\n";

    std::cout << "QVector:\n";
    QVector<MoveTest> qmTest(5);
    qmTest.insert(qmTest.begin(), MoveTest());
    std::cout << "\n";

    std::cout << "std::vector:\n";
    std::vector<MoveTest> mTest(5);
    mTest.insert(mTest.begin(), MoveTest());

    return 0;
} 
```

出去：

```
std::move:
constr move
constr move
move
move

QVector:
constr copy
constr copy

std::vector:
constr move
constr move
constr move
constr move
constr move
constr move 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-20T13:22:27.387

QT 中的容器肯定能够处理移动语义。运行下面的示例并亲自查看。

```
#include <QCoreApplication>
#include <QVector>
#include <iostream>

struct MoveTest
{
    int i;

    MoveTest()                      {}
    MoveTest(MoveTest&&) noexcept   {std::cout << "constr move\n";}
    MoveTest(const MoveTest&)       {std::cout << "constr copy\n";}
    ~MoveTest() noexcept            {}

    MoveTest&   operator=   (MoveTest&&) noexcept   {std::cout << "move\n"; return *this;}
    MoveTest&   operator=   (const MoveTest&)       {std::cout << "copy\n"; return *this;}
};
Q_DECLARE_TYPEINFO(MoveTest, Q_MOVABLE_TYPE);

int main(int argc, char *argv[])
{
    std::cout << "std::move:\n";
    MoveTest t1;
    MoveTest t2(std::move(t1));
    MoveTest t3(std::move_if_noexcept(t2));
    t2 = std::move(t3);
    t1 = std::move_if_noexcept(t2);
    std::cout << "\n";

    std::cout << "QVector:\n";
    QVector<MoveTest> qmTest;
    int i=5;
    while(i) {
        qmTest.append(MoveTest());
        --i;
    }
    std::cout << "\n";

    std::cout << "std::vector:\n";
    std::vector<MoveTest> mTest(5);
    mTest.insert(mTest.begin(), MoveTest());

    return 0;
} 
```

由于两个对象具有相似的用途，这并不意味着所有的成员函数都是相同的。检查下面的输出。出去：

```
std::move:
constr move
constr move
move
move

QVector:
constr move
constr move
constr move
constr move
constr move

std::vector:
constr move
constr move
constr move
constr move
constr move
constr move
Press <RETURN> to close this window... 
```

# javascript - 在 JavaScript 中生成具有给定长度重复的所有可能组合

> ID：14053349
> 
> 赞同：0
> 
> 时间：2012-12-27T10:42:42.363
> 
> 标签：javascript, combinations, combinatorics

我需要在 JavaScript 中生成给定长度的所有可能组合（字母可以重复）。可以使用 ruby​​ 编写的东西`for word in ('a'*4..'z'*4)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:59:42.947

JavaScript 没有这样的函数式语法。使用新的列表推导，您可能会做这样的事情，但它们并未得到广泛支持。因此，您需要在循环中手动创建字符串：

```
var from = 97,
    to = from + 26,
    rep = 4,
    callback = function(str) { … };
(function recurse(arr, len) {
    if (len < rep)
        for (var i=from; i<to; i++) {
            arr[len] = i;
            recurse(arr, len+1);
        }
    else
        callback( String.fromCharCode.apply(null, arr) );

})([], 0); 
```

# javascript - 拖拽数千个 dom 元素，兼顾性能

> ID：14053353
> 
> 赞同：2
> 
> 时间：2012-12-27T10:43:07.097
> 
> 标签：javascript, performance, dom

作为一个爱好项目，我正在尝试创建一个基于 64 * 64 瓦片的地图原型，该地图可以以高性能的方式拖动。如果可行，我想将其扩展到 1024 x 1024 瓷砖。

*当前方法*
包含所有“平铺”div 的“地图”div。使用[这个 jquery 插件](http://css-tricks.com/snippets/jquery/draggable-without-jquery-ui/)，我使地图 div 可拖动。平铺 div 具有 css sprite 背景，因此只需一次调用 img。这适用于一些瓷砖，但随着更多瓷砖变得非常慢。

*我试图*
通过将它们放在包装器 div 中来规避所有这些瓷砖的 dom 回流，希望它可以在单独的图层中呈现，然后可以作为一个图层移动。没用。
尝试将地图 div 的父 div 溢出设置为隐藏，这样就不会渲染冗余图块。没用。
尝试删除对 j​​query 的依赖并自己进行可拖动的实现。工作同样糟糕。所以没用。
将背景图像切换为背景颜色不会提高性能，所以这不是问题。

*我还不知道如何实施*
的想法 如何确保瓷砖不会触发回流？
将看不见的瓷砖设置为不可见？我可以通过一些努力来实现这一点，但不知道这是否会提高性能。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:55:45.287

将这组图块渲染到一个 CANVAS 元素，导出为 PNG，然后在拖动时移动它。

# mysql - MySQL 分区：性能提升对于多个分区表。为什么？

> ID：14053363
> 
> 赞同：3
> 
> 时间：2012-12-27T10:43:46.913
> 
> 标签：mysql, performance, parallel-processing, data-partitioning

我已经实现了一个基准测试来测试 10 个不同表上的读写持久性。

我有 10 个 java 线程，每个线程只对其表执行查询：

线程 1 对 Table1 执行操作，线程 2 对 Table2 执行操作，

我比较了在非分区表 [1-10] 上并行运行这些线程的性能，与将每个 TableX 分区为 9 个相等分区时相同基准测试的性能（每个代表一周的测量，总共 9 周数据的）。

我收到了有趣且无法解释的结果：

单线程的单个操作的性能对于非分区表来说是两倍，而对于所有线程的所有操作的总时间对于分区表来说是快 5 倍。

我检查了日志，发现分区表可以并行执行更多操作，虽然单个操作更长，但不同线程的多个操作是并行的，因此完成速度更快。

我不明白为什么会这样，因为每个线程只在自己的表上执行操作？？？

我只对所有表和分区使用 MyISAM 引擎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:38:24.950

查看给定的文章，了解分区如何帮助提高服务器性能

[如何决定是否应该使用表分区](http://www.brentozar.com/archive/2012/03/how-decide-if-should-use-table-partitioning/)

专家也回答了几乎相同的问题

[堆栈溢出问题](https://stackoverflow.com/questions/5109134/sql-server-2008-partitioned-table-and-parallelism)

# android - Android为长文本设置TextView宽度

> ID：14053364
> 
> 赞同：0
> 
> 时间：2012-12-27T10:43:49.463
> 
> 标签：android, textview

我有一个文本视图，其中文本被动态分配给文本视图。

我在水平方向（从右到左）滚动文本视图。我通过设置 TextView 的 X 坐标来进行滚动。

我的问题是，对于超过屏幕宽度（LCD 宽度）的长文本，textview 仅显示单行范围内的文本，然后为其余文本创建一个新行。

但是，我希望文本只保留一行，并让它在屏幕上水平滚动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:06:37.173

在 XML 布局上将 singleLine 和 scrollHorizo​​ntally 设置为 true

```
<TextView
    android:id="@+id/txt"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:scrollHorizontally="true"
    android:singleLine="true"
    android:text="TextView" /> 
```

设置 X 坐标不起作用，因为 TextView 是使用 LCD 的宽度构建的，您并没有真正滚动文本，只是移动视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:45:47.250

设置属性

`android:singleLine="true"`

对于文本视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:47:24.770

您可以从右侧设置 Padding 的属性，同时设置 TextView 的宽度或选择单行属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T11:05:13.140

试试这个

```
<HorizontalScrollView
            android:layout_width="fill_parent"
            android:layout_height="35dp"
            android:layout_marginRight="10dp"
            android:layout_marginTop="5dp"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:scrollbars="horizontal" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="35dp"
                android:gravity="center" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:ellipsize="end"
                    android:maxLines="1"
                    android:text=""
                    android:gravity="center"
                    />
            </LinearLayout>
        </HorizontalScrollView> 
```

这可以帮助你吗

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T11:08:29.687

你可以很容易地做到这一点，你只需要写。.

机器人：单行=“真”

这将允许您在适当范围内的 EditText 中写入大量数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-29T11:32:30.207

textview 在屏幕宽度上中断的问题是使用相对布局。

我将相对布局更改为线性布局，将布局宽度设置为 5000dp，它起作用了。

# c# - 上传速度问题：HttpWebRequest

> ID：14053366
> 
> 赞同：15
> 
> 时间：2012-12-27T10:43:54.873
> 
> 标签：c#, .net, upload, httpwebrequest

我正在使用 HttpWebRequest 将文件上传到某个服务器，现在的问题是我遇到了速度问题。

我无法获得与浏览器（Mozilla Firefox）相同的上传速度，我获得的速度是我从浏览器获得的速度的 1/5。

这是我的 HttpWebRequest 对象的设置

```
//headers is a NameValueCollection type object,
//Method is a struct { GET, POST, HEAD }

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
        request.UserAgent = headers["User-Agent"];
        request.KeepAlive = false;
        request.Accept = headers["Accept"];
        request.AllowAutoRedirect = AllowRedirect;
        request.Headers.Add(HttpRequestHeader.AcceptLanguage, "en-US,en;q=0.5");
        request.Method = Method.ToString();
        request.AllowWriteStreamBuffering = false;
        request.ReadWriteTimeout = 60000; 
```

我一直启用的一些全局选项

```
 ServicePointManager.Expect100Continue = false;
        ServicePointManager.DefaultConnectionLimit = 200;
        ServicePointManager.MaxServicePointIdleTime = 2000;
        ServicePointManager.MaxServicePoints = 1000;
        ServicePointManager.SetTcpKeepAlive(false, 0, 0); 
```

我如何以块的形式发送文件...

```
 if (PostMethod == PostType.MultiPart && uploadFiles.Count > 0)
            {
                for (int i = 0; i < uploadFiles.Count; i++)
                {
                    string fileParam = uploadFiles.GetKey(i);
                    string tmpFilename = uploadFiles.Get(i);
                    string tmpData =
                    string.Format(
                        "--{0}\r\nContent-Disposition: form-data; name=\"{1}\"; filename=\"{2}\"\r\nContent-Type: {3}\r\n\r\n", boundary, fileParam, Path.GetFileName(tmpFilename), MimeType.GetMimeByExtension(Path.GetExtension(tmpFilename)));
                    byte[] tmpBytes = Encoding.Default.GetBytes(tmpData);
                    writer.Write(tmpBytes, 0, tmpBytes.Length);
                    bSent += tmpBytes.Length;

                    arg.Progress = (int)(bSent * 100 / totalBytes);
                    arg.Speed = (bSent / sw.Elapsed.TotalSeconds);
                    OnProgress(arg);

                    //write the file
                    int fileBytesRead;

                    FileStream fileStream = File.Open(tmpFilename, FileMode.Open, FileAccess.Read, FileShare.Read);
// buffer size = 8192
                    while ((fileBytesRead = fileStream.Read(buffer, 0, BUFFER_SIZE)) > 0) 

                    {
                        writer.Write(buffer, 0, fileBytesRead);
                        bSent += fileBytesRead;

                        int timeNow = Environment.TickCount;
                        if (timeNow - lastTime >= 500)
                        {
                            lastTime = timeNow;
                            arg.Progress = (int)(bSent * 100 / totalBytes);
                            arg.Speed = (bSent / sw.Elapsed.TotalSeconds);
                            OnProgress(arg);
                        }
                    }

                    tmpBytes = Encoding.Default.GetBytes("\r\n");
                    writer.Write(tmpBytes, 0, tmpBytes.Length);
                    bSent += tmpBytes.Length;

                    arg.Progress = (int)(bSent * 100 / totalBytes);
                    arg.Speed = (bSent / sw.Elapsed.TotalSeconds);
                    OnProgress(arg);

                }
            } 
```

我很乐意达到浏览器上传速度的 75%。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T03:24:23.860

我通过搜索这个网站找到了答案。它似乎是[".NET HttpWebRequest Speed vs Browser"](https://stackoverflow.com/questions/2048408/net-httpwebrequest-speed-versus-browser)的副本。

从那里发布的答案：

“第一次请求页面时，.net 会尝试检测代理设置。解决方案是传入一个空的 WebProxy 对象。这样它只会连接到远程服务器，而不是自动检测代理服务器。” -[马科斯](https://stackoverflow.com/users/233027/markos)

尝试添加

```
 request.Proxy = new WebProxy(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T20:47:50.900

两件事情。

1.  您通过分块破坏了 TCP/IP 堆栈的目的。TCP/IP 旨在处理近乎异步的数据传输。它将自己进行分块并继续发送块，直到完成或达到其最大未确认块数。如果达到最大块数，它将等待 ACK（确认）继续 - 类似于信号量意识形态期望释放可以“堆叠”，AKA 单个 ACK​​ 包含它收到的最后一个点并且可以“释放” /acknowledge 多个块数据包） - 或请求超时。

    通过自己分块，必须完全确认每个块才能发送更多数据，因此您增加了开销。您仍在使用相同的连接，但实际上是在发出多个单独的请求。此外，如果 TCP/IP 块大小不是您的块大小的除数 (YOUR_CHUNK_SIZE % TCP_IP_CHUNK_SIZE != 0)，那么您将留下一个延迟的 TCP/IP 块，该块必须超时并解析为伪 ACK；下次它可以在下一个块中得到确认。

> 另一个可能影响性能的选项是使用[UseNagleAlgorithm 属性](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.usenaglealgorithm%28v=vs.90%29.aspx)。当此属性设置为**true**时，TCP/IP 将尝试对 HTTP 连接使用 TCP Nagle 算法。Nagle 算法在发送 TCP 数据包时聚合数据。在通过网络发送数据之前，它将小消息序列累积成较大的 TCP 数据包。使用 Nagle 算法可以优化网络资源的使用，尽管在某些情况下性能也会降低。通常对于恒定的大容量吞吐量，使用 Nagle 算法实现性能改进。但是对于较小吞吐量的应用程序，可能会看到性能下降。
> 
> 应用程序通常不需要更改设置为**true的**[UseNagleAlgorithm](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.usenaglealgorithm%28v=vs.90%29.aspx)属性的默认值。但是，如果应用程序使用低延迟连接，则将此属性设置为**false**可能会有所帮助。

 ****来自 MSDN：[HttpWebRequest 类 (System.Net)](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.90%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:46:37.187

这是我们可以提高上传速度的各种选项：-

[http://bytes.com/topic/asp-net/answers/440179-how-speed-up-file-upload-2-0-a](http://bytes.com/topic/asp-net/answers/440179-how-speed-up-file-upload-2-0-a)

在大文件的配置文件中使用它：---

把这个写在 web config system.web>

***httpRuntime maxRequestLength="2097151"***

这可能有助于在 IIS 7.0 中找到解决方案

把这个写在 web config system.web>httpModules

```
**add name="ITHitPutUploadProgressAndResumeModule" type="ITHit.WebDAV.Server.ResumableUpload.PutUploadProgressAndResumeModule, ITHit.WebDAV.Server"** 
```****

# c# - 使用 COM 二进制序列化作为 C# 和 C++ 不可恢复的格式

> ID：14053374
> 
> 赞同：0
> 
> 时间：2012-12-27T10:44:28.637
> 
> 标签：c#, c++, serialization, com

我在 C# 和 C++ 进程之间的高性能 IPC 工作。我已经选择了IPC机制。但是在与本机和托管方面兼容的序列化方面工作。我正在研究protobuf。但似乎 COM 在用于 IPC 时也会进行二进制序列化。也许我可以使用它。

我应该研究什么库和方法？（只是不想添加protobuf，如果可以的话）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T14:50:10.050

是的，COM 可以做到这一点。它是一种与 proto-buf 完全不同的方法，它支持进程外服务器。换句话说，您可以将您的 C++ 程序编写为这样的服务器，并且您的客户端代码可以自动启动它并开始调用服务器实现的方法。您想要跨越流程边界的数据可以通过这种方法的参数传递。C# 等效项是 Remoting 或 WCF。

序列化实际上是 COM 中的弱点之一，您可能必须提供称为代理/存根的附加代码，该代码知道如何对通过参数传递的数据进行编码，以便可以跨边界传递。对此有很多工具支持，您首先使用一种称为 IDL（接口描述语言）的语言来描述方法及其参数。然后可以自动编译成代理/存根 DLL。如果您传递的数据特别繁重，那么您可能必须编写一个自定义编组器。或者，如果它特别简单，将自身限制为 COM 自动化支持的类型子集，那么您可能根本不需要代理/存根，并且可以使用标准编组器。它使用*类型库*，也是从 IDL 自动生成的。

这里有很多灵活性，但这肯定是有代价的。COM 被广泛认为是*困难*的。遇到问题时也不容易调试。如果“可理解”是您的主要目标，那么不要考虑 COM，proto-buf 更容易解决。下一步，命名管道或套接字在任一运行时环境中都很容易上手，但反序列化/序列化数据取决于您。您可以通过使用 XML 使其易于理解。

# ipad - Google API - 如何将 URL 重定向到我的本地主机

> ID：14053381
> 
> 赞同：5
> 
> 时间：2012-12-27T10:44:53.220
> 
> 标签：ipad, cordova, login, localhost

我正在使用 Google OAuth 在我的 Phonegap 应用程序中集成 google 登录。发生的情况是，在为我的应用程序创建客户端 ID 时，我必须选择“已安装的应用程序”，然后将应用程序类型选择为“其他”，因为我正在使用 Phonegap 创建我的应用程序。

这给了我两个重定向 URI，例如“ `urn:ietf:wg:oauth:2.0:oob`”和“ `http://localhost`”。我不选择使用“ `urn:ietf:wg:oauth:2.0:oob`”，因为它要求用户复制代码并将其放回应用程序。我拥有的另一个选项是重定向到本地主机。

这里的问题是，当我在 iPad 上时，如何将 URL 重定向到 localhost？我曾尝试使用不同的重定向 URI，但 Google 不允许我使用它们。它只坚持重定向到本地主机（或添加一些端口号），我没有其他办法。

有人对此有任何解决方法吗？有什么方法可以完成这项任务吗？我被困住了。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-07T09:49:34.993

您也可以使用重写规则。

例如，我需要 Google 的这个回调：`http://local.dev/users/login-google`

所以我在 Google Console 中设置了这个 URL：`http://localhost/JUMP/local.dev/users/login-google`

在 apache 中，一个简单的重定向：

```
RewriteEngine  on
RewriteRule    ^JUMP/(.+)$   http://$1 [R,L] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-04T18:20:15.153

我最近遇到了同样的问题。我还需要为 Twitter API[找出答案（在此处找到答案](https://stackoverflow.com/questions/800827/twitter-oauth-callbackurl-localhost-development/16702352#16702352)）。

对于谷歌，我找到了两种解决问题的方法。

1.  Google 将接受 localhost 回调 url。例如，如果您在 xampp 服务器上，并且您的重定向保存在下面，`C:\xampp\htdocs\nozzle\callbacks\google.php`那么您在请求中提供的重定向（以及在[Google API 控制台](https://code.google.com/apis/console/)中）将是：`http://localhost/nozzle/callbacks/google.php`问题已解决。
2.  **如果您在虚拟主机上开发**：重定向到实时站点（或本地文件夹结构中的某个位置）以与 google api 通信，然后序列化该数据并将其发送到本地虚拟主机上的 url。

选项 2 需要更多解释。这是细分：

*   我正在虚拟主机上进行本地开发。我的应用程序数据不在 localhost 文件夹 ( `http://myapp.dev`) 中。所以我需要另一个解决方案，让我仍然可以在虚拟主机上进行本地开发，但也可以向 Google API 发出请求。
*   设置：第一次调用来自[http://myapp.dev/](http://myapp.dev/)但对于重定向，我使用我的实时服务器地址。经用户授权后，Google 会重定向回我的实时站点，在那里我对 api 进行了额外的调用。此信息返回（再次返回到我的实时站点），然后我序列化该信息并通过添加 ?data= 作为请求重定向到[http://myapp.dev/callback](http://myapp.dev/callback)并将序列化数据放在该调用的末尾。然后它被发送到我的虚拟主机站点，我用 $_REQUEST['data'] 检索数据，反序列化它，我很高兴。
*   这似乎需要做很多工作，但对我和我的团队来说，在我们准备好上线之前继续在本地工作是值得的。

另外，我想您可以通过本地主机地址而不是实时地址来执行相同的过程，但我尚未对此进行测试。但是，如果您使用实时站点进行此操作，您的整个团队将能够从他们的本地虚拟主机发出相同的请求，只要它们也被虚拟主机`http://myapp.dev`

脚注：我正在使用[`socialmedia-oauth-login tool`](https://github.com/kayalshri/socialmedia-oauth-login)访问 Google API。

# c# - 当用户在填充当前单元格后按下回车键时，将焦点移到数据网格视图中的下一个单元格的 C# 代码

> ID：14053388
> 
> 赞同：1
> 
> 时间：2012-12-27T10:45:26.020
> 
> 标签：c#

我当前的代码如下。它对于 readonly=true 工作正常，但是当我插入该值时，它会聚焦到下面行的同一个单元格。请就此向我提出建议。

我的代码：

```
private void dataGridView1_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyData == Keys.Enter)
            {
                int col = dataGridView1.CurrentCell.ColumnIndex;
                int row = dataGridView1.CurrentCell.RowIndex;
            if (col < dataGridView1.ColumnCount - 1)
            {
                col++;
            }
            else
            {
                col = 0;
                row++;
            }

            if (row == dataGridView1.RowCount)
                dataGridView1.Rows.Add();

            dataGridView1.CurrentCell = dataGridView1[col, row];
            e.Handled = true;
        }
    } 
```

# javascript - 如何使用javascript设置H1的颜色？

> ID：14053390
> 
> 赞同：1
> 
> 时间：2012-12-27T10:45:34.143
> 
> 标签：javascript

我想知道如何使用 javascript 设置包含在 H1 标记中的文本的颜色。为此，我不能使用 css。

我试过的脚本是这样的——

```
document.h1.style.color="#fff" 
```

但这不起作用。请帮忙。

编辑-

我真的找不到任何适合这个的东西。其实我对javascript不太了解，遇到了一个问题，我必须使用javascript来设置H1的颜色。

现在我怎么能做同样的事情，但使用 p 标签。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T10:48:20.130

```
var h1Elements = document.getElementsByTagName("h1");

for(var i = 0; i < h1Elements.length; i++) {
   h1Elements[i].style.color = "#fff";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T10:48:55.970

您需要获取元素。查找类似这样的内容：

```
document.getElementsByTagName('H1')[0] 
```

然后你只是摆弄属性和样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T10:48:01.560

你可以用 jQuery 很容易地做到这一点：

```
$('h1').css({'color' : '#fff'}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T11:12:28.777

请将此代码复制到任何编辑器中..享受。

```
<!DOCTYPE html>
<html>

<body>
<h1 id="h1">The content</h1> <h1>of the body</h1> element is displayed in your browser.
</br></br></br>
<div onclick="checkAll()"> Click me To See Change</div>
</body>
<script>
function checkAll() {
var divs = document.getElementsByTagName("h1");  // Access all <H1> present in your body.

for(var i = 0; i < divs.length; i++) {   //divs.length contain number of <h1> elements
  var div = divs[i];                     // Now access Each <H1> one-by-one
  div.style.color = 'green';             // Set Color Style of each <h1>
}
}
</script>
</html> 
```

# code-behind - 如何从 Ext.Net V2.1 上的键绑定运行方法背后的代码

> ID：14053391
> 
> 赞同：2
> 
> 时间：2012-12-27T10:45:41.473
> 
> 标签：code-behind, ext.net

这段代码在我的 GridPanel 中。

```
<ext:KeyMap runat="server">
    <Binding>
        <ext:KeyBinding>
        <Keys>
            <ext:Key Code="ENTER" />
        </Keys>
        </ext:KeyBinding>
    </Binding>
</ext:KeyMap> 
```

按下回车键时如何运行代码。
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T02:19:44.003

试试这个：

```
<ext:KeyMap runat="server" Target="={Ext.isGecko ? Ext.getDoc() : Ext.getBody()}">
    <Binding>
        <ext:KeyBinding DefaultEventAction="StopEvent" Handler="alert('ENTER');">
            <Keys>
                <ext:Key Code="ENTER" />
            </Keys>
        </ext:KeyBinding>
    </Binding>        
</ext:KeyMap> 
```

# android - 处理视图鳍状肢动画

> ID：14053396
> 
> 赞同：0
> 
> 时间：2012-12-27T10:46:14.573
> 
> 标签：android

我已将 setOutAnimation 和 setInAnimation 设置为 viewflipper。它工作完美。我已经在android布局文件中设置了按钮的'onClick'方法来翻转。

现在，我需要的是直到动画无法完成，用户无法再次触摸该按钮，并且视图翻转器无法显示下一个视图。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:47:58.893

编辑：

//动画的Java类

```
public class MyAnimClass {

    public MyAnimClass (Context c)
    {
         ...
    }

    public void applyAnimation(Button btn){

    tAnimation.setAnimationListener(new AnimationListener() {

                @Override
                public void onAnimationStart(Animation animation) {
                    // TODO Auto-generated method stub
                                  btn.setEnabled(false);
                }

                @Override
                public void onAnimationRepeat(Animation animation) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void onAnimationEnd(Animation animation) {
                    // TODO Auto-generated method stub
                                  btn.setEnabled(true); 

                }
            });
       }

} 
```

//活动示例：

```
MyAnimClass myAnim = new MyAnimClass(context);
myAnim.applyAnimation(btn1);
myAnim.applyAnimation(btn2);
... 
```

# java - 套接字创建

> ID：14053398
> 
> 赞同：-1
> 
> 时间：2012-12-27T10:46:20.013
> 
> 标签：java, sockets, client-server

在我的客户端-服务器应用程序中，我正在创建一个带有 ipaddress 和端口号的 Socket。

最初，当我们运行客户端应用程序时，会建立与服务器的套接字。但是在客户端应用程序多次关闭和启动后，它抛出异常并且没有创建套接字（即使存在具有指定 ipaddress 的系统）。

我无法追踪错误。你能建议我，我哪里出错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:49:52.440

不要绑定到客户端中的特定端口。只需让实现选择要绑定的端口即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:29:53.533

尝试设置 Socket.setSoLinger(false, 0) 以便立即关闭套接字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:57:53.280

它可能取决于操作系统，但是当您的应用程序开始拒绝建立新的连接运行`netstat.exe`(Windows) 时，您会看到很多处于`TIME_WAIT`状态的 TCP 连接。TCP 连接在关闭后进入此状态并保持一段时间。这意味着当您快速打开/关闭它们时，操作系统可能会用完免费连接。

# performance - 更新 100 条记录的性能考虑

> ID：14053400
> 
> 赞同：0
> 
> 时间：2012-12-27T10:46:23.787
> 
> 标签：performance, entity-framework, sql-server-ce, entity-framework-4.3

我正在开发一个具有 SCQL CE 4.0 数据库的应用程序，并且我使用 EF 4.3.1 作为它的 ORM。有一个要求，我必须从 XML 文件中加载 100 条记录，对照数据库检查它们（通过它们的 GUID 列），如果它们是新的，则插入它们，但如果其中一些已经存在，我必须更新这些记录。

现在我想知道这个要求的最佳方法是什么？

现在我正在使用以下代码，但我认为它效率不高。

```
foreach( var record in xmlRecords )
{
    var existingRecord = context.Records.SingleOrDefault(r => r.Guid == record.Guid);
    if( existingRecord == null )
        context.Records.Add(record);
    else
        context.Records.ApplyCurrentValues(record);
 }

 context.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:12:59.127

> 现在我正在使用以下代码，但我认为它效率不高。

听起来你有什么作品。您是否进行过处理 100 条记录的测试运行？有什么理由要进一步优化吗？如果您的代码可以合理地处理 100 条记录（在这种情况下，我认为合理的是不到一两秒）并且这是您的要求，那么您就完成了。实体框架，我想所有其他 ORM 都可以轻松处理更新 100 行。如果您担心将来需要处理更多记录，请创建一个包含适当数量记录的大测试文件并查看它的执行情况。从那里优化。

如果它坏了不要修理它。在您的代码无法处理负载之前不要进行优化。您的用户将无法分辨 1.1 秒和 1.1222 秒之间的区别。

如果您确实必须优化某些东西，我会将您对运行速度缓慢的假设抛在脑后。这几乎不是你所期望的。在你的代码中加入一些计时器语句，看看是什么让你慢了下来。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:49:10.023

这很好，其他是让存储过程以 XML 作为输入，然后使用 XML 编写插入和更新命令，但 SQL CE 不支持 XML 数据类型

# css - CSS：内联与内部应用两种 CSS 样式时，行高呈现不同

> ID：14053407
> 
> 赞同：0
> 
> 时间：2012-12-27T10:46:49.243
> 
> 标签：css

我有以下问题：我开发了一个从 HTML 标签中提取样式并将它们放入标题中的工具（即它使内联 CSS 成为内部的）。然而，当有多个 CSS 类时，行高的呈现方式似乎有所不同：

这是工具提取之前的示例：调用 1 个内部 CSS 类 + 指定 1 个内联 CSS 样式

 `````
<html>
<head>
<style>
<!--
 p.MsoNormal, li.MsoNormal, div.MsoNormal
    {margin-top:0cm;
    margin-right:0cm;
    margin-bottom:10.0pt;
    margin-left:0cm;
    line-height:115%;
    font-size:11.0pt;
    font-family:"Calibri","sans-serif";}
-->
</style>
</head>
<body>
<p class=MsoNormal style='text-align:justify;line-height:normal'>
<span style='font-size:20.0pt'>
Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
sed do eiusmod tempor incididunt ut labore et dolore 
magna aliqua. Ut enim ad minim veniam, quis nostrud 
exercitation ullamco laboris nisi ut aliquip ex ea commodo 
consequat. Duis aute irure dolor in reprehenderit in voluptate 
velit esse cillum dolore eu fugiat nulla pariatur. Excepteur 
sint occaecat cupidatat non proident, sunt in culpa qui officia 
deserunt mollit anim id est laborum.</span></p>
</body>
</html> 
````  `这是工具提取后的示例：调用 2 个内部 CSS 类 -> line-height 呈现不同！

 `````
<html>
<head>
<style>
<!--
 p.MsoNormal, li.MsoNormal, div.MsoNormal
    {margin-top:0cm;
    margin-right:0cm;
    margin-bottom:10.0pt;
    margin-left:0cm;
    line-height:115%;
    font-size:11.0pt;
    font-family:"Calibri","sans-serif";}
.inlineClass009
    {text-align:justify;line-height:normal}
-->
</style>
</head>
<body>
<p class="MsoNormal inlineClass009">
<span style='font-size:20.0pt'>
Lorem ipsum dolor sit amet, consectetur adipisicing elit, 
sed do eiusmod tempor incididunt ut labore et dolore 
magna aliqua. Ut enim ad minim veniam, quis nostrud 
exercitation ullamco laboris nisi ut aliquip ex ea commodo 
consequat. Duis aute irure dolor in reprehenderit in voluptate 
velit esse cillum dolore eu fugiat nulla pariatur. Excepteur 
sint occaecat cupidatat non proident, sunt in culpa qui officia 
deserunt mollit anim id est laborum.</span></p>
</body>
</html> 
````  `* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:09:09.780

在这两个示例中，元素都有两个声明`line-height`。在第一个示例`line-height:normal`中，属性中的声明通过[特异性规则](http://www.w3.org/TR/CSS21/cascade.html#specificity)`style`获胜。在第二个示例中，声明胜出，因为根据特异性规则，选择器比选择器更具体。`line-height:115%``p.MsoNormal``.inlineClass009`````

# javascript - 通过母版页超链接实现 javascript 的 ASP.NET 冲突

> ID：14053409
> 
> 赞同：0
> 
> 时间：2012-12-27T10:46:53.263
> 
> 标签：javascript, jquery-ui, dialog, asp.net-4.0

我正在使用母版页来实现我的所有内容页面。所以标题包含一个名为`Feedback`. 当然，这个超链接在每一页都重复。Javascript 代码位于母版页中，如下所示：

```
 <script type="text/javascript">
    jQuery(document).ready(function () {
        jQuery('#hlfeedback').click(function () {
            var dlg = jQuery('div#message').dialog({
                width: 608,
                height: 750,
                modal: true,
                overlay: { backgroundColor: "#000", opacity: 0.5 },
                buttons: {},
                open: function (event, ui) {
                    $(".ui-dialog-titlebar-close").hide();
                }
            });
            dlg.parent().appendTo(jQuery("form:first"));
        });
    });

    </script> 
```

问题是我应该把它`div#message`放在每个内容页面中吗？以及 asp.net 服务器端？顺便说一句，当我只将 div#message 放在母版页中时，它不起作用。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:10:12.157

我可能是错的，但使用母版页意味着您的服务器控件获取 ID 如下：

# cphBody_"your_serverside_id"（或 Title、Head 等）

# android - 运行 256 色的 Android x86

> ID：14053410
> 
> 赞同：1
> 
> 时间：2012-12-27T10:46:57.300
> 
> 标签：android, operating-system, x86, android-x86, color-depth

我正在尝试以 256 色模式运行 Android x86。在 Windows 操作系统中是否有任何设置可以更改并使所有 Android 操作系统系统以 8 位颜色模式运行？或者我应该假设通过一些内核修改重新编译 Android x86？

# forms - 在magento中处理表单元素

> ID：14053428
> 
> 赞同：1
> 
> 时间：2012-12-27T10:48:11.387
> 
> 标签：forms, magento

是否有任何内置的方式来处理表单，例如在 magento 中验证用户输入......等等？（例如任何库或其他东西）还是我们必须按照自己的方式编写它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:14:23.643

您应该使用 Zend_Validate 编写自己的处理和验证。Magento 仅提供前端表单验证（查看 js/prototype/validation.js），但大多数方法类似于 zend 规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T10:53:56.123

有使用JavaScript。我这里没有正在运行的 Magento 版本，但请参考：http: [//fishpig.co.uk/blog/magento-forms-prototype-javascript-validation.html](http://fishpig.co.uk/blog/magento-forms-prototype-javascript-validation.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:05:56.330

例如，您可以使用 magento zend 验证

```
 if (!Zend_Validate::is(trim($post['email']), 'EmailAddress')) {
                $error = true;
            } 
```

这是用于验证电子邮件地址，您可以将其放入保存操作中。为了验证非空字段，你可以试试这个。

```
 if (!Zend_Validate::is(trim($post['something']) , 'NotEmpty')) {
                $error = true;
            } 
```

# php - Jquery获取变量值

> ID：14053438
> 
> 赞同：-5
> 
> 时间：2012-12-27T10:49:05.243
> 
> 标签：php, jquery

> **可能重复：**
> [如何获取 jquery 变量的值](https://stackoverflow.com/questions/14052379/how-to-get-a-value-of-jquery-variable)

JS：

```
<script>   
    $(document).ready(function() {

        var ma = $("#qty").val();
        var str = $("#reqid").val();
        var iss = 'issue_quant_' + str;
        $("#myform").validate({
            rules: {
                iss: {
                    max: ma
                }
            }
        });

    }); 
</script> 
```

HTML：

```
<td> 
    <input type="text" name="issue_quant_<?php echo $array['requisition_id'];?>" />
</td> 
```

脚本没有`str`取值。如果我将我的 texbox 命名为`iss`它可以工作，但它不能像这样工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:56:01.483

目前，您正在传递一个带有属性键的`iss`对象`rules`。你需要做的是传递一个带有 key 的对象`issue_quant_<?php echo $array['requisition_id'];?>`。

在您之前的问题中，与此问题非常相似，我已经向您展示了如何使用变量键创建对象：

```
var iss = 'issue_quant_' + str;
var rules = {};
rules[iss] = {max: ma};
$("#myform").validate({
    rules: rules
}); 
```

假设`'issue_quant_' + str`计算为 的值`issue_quant_<?php echo $array['requisition_id'];?>`，验证规则将应用于输入。

# django - Django - 如何通过 UpdateView 将对象传递给 ModelForm？

> ID：14053440
> 
> 赞同：1
> 
> 时间：2012-12-27T10:49:06.480
> 
> 标签：django, django-models

我有这种情况：

要编辑客户端，`UpdateView`使用：

`url(r'^klient_change/(?P<pk>\d+)/$', KlientUpdateView.as_view(), name='url_klient_change'),`

更新视图负责更新对象，它使用`KlientUpdateForm`

```
class KlientUpdateView(UpdateView):
    form_class = KlientUpdateForm
    model = Klient
    template_name = 'forms/klient_zmenit.html' 
```

问题是，我需要使用我自己的 save 方法更新现有对象，该方法获取`klient object`并执行更多操作（我的 save 方法在此示例中不完整，它执行更多操作）。

```
class KlientUpdateForm(ModelForm):
    class Meta:
        model = Klient

    # This method creates and saves a database object from the data bound to the form.
    def save(self):
        #self.cleaned_data obsahuje data z formulare
        data = self.cleaned_data
        klient = get_object_or_404(Klient, klient_id =self.request.pk)
        Klient.objects.filter(klient_id = self.request.pk).update(nazev=data['nazev'], telefon=data['telefon'],)

        return klient 
```

如何从 URL in 获取具有 pk 的特定对象`modelForm`？是否有可能做到这一点？`ModelForm`什么都不知道`request`。我的想法是获取`updateview`可能的对象，但我不知道如何将其传递给`save method`那个 `modelform`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:52:41.650

在`KlientUpdateForm.save`中，您的对象应该可以作为`self.instance`.

# iphone - 基于opengl es的iphone游戏中的slowMotion

> ID：14053442
> 
> 赞同：-1
> 
> 时间：2012-12-27T10:49:12.413
> 
> 标签：iphone, performance, opengl-es, motion

我想在游戏中实现慢动作，基于opengl。

我的意思是当球即将接触圆柱体时，它应该以慢动作显示。我第一次使用opengl es。所以请帮助我。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:32:40.417

你所有的游戏逻辑都应该依赖于帧时间（deltatime），可以看到每一帧的时间量。通过使这个 deltatime 更大或更短，您可以使事情变得更快或更慢。

例如，应该这样考虑使用速度移动一个点：

位置+=速度*增量时间；

您可以随意更改deltatime，这可以轻松产生您正在寻找的效果。

# less - 在 LESS 巢中引用父母的父母

> ID：14053446
> 
> 赞同：1
> 
> 时间：2012-12-27T10:49:29.680
> 
> 标签：less

有什么方法可以引用其中一个子元素的嵌套中的元素吗？

我有以下内容：

```
div.chem_stage {
    position: relative;

    html.no-canvas {
        display: none;
    }
} 
```

当然这不起作用，有没有使用LESS的方法让我这样做？我可以做

```
html.no-canvas {
    .chem_stage {

    }
    .another_element {

    }
    etc...
} 
```

但我有很多元素需要应用这条规则，我宁愿保留我的规则

编辑：

使用 ScottS 的 techqniue，它似乎没有与 @media 查询混合

```
div.chem_stage {
    html.no-canvas &, @media only screen and (max-width : @respChem) { 
```

生产

```
html.no-canvas div.chem_stage,
div.chem_stage $media only screen and (max-width : @respChem) { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:25:26.427

## 回答原始问题

我相信您正在寻找的是`&`LESS 中的组合子：

**较少的**

```
div.chem_stage {
    position: relative;

    html.no-canvas & {
        display: none;
    }
} 
```

**CSS 输出**

```
div.chem_stage {
  position: relative;
}
html.no-canvas div.chem_stage {
  display: none;
} 
```

有关您所指的特定用途的更详细讨论，[请参阅我对此堆栈溢出问题的回答](https://stackoverflow.com/questions/11537260/less-css-abusing-the-operator-when-nesting)，我将其标记为“结束目标分组”。

## 媒体查询添加更新

LESS 中的媒体查询是喜怒无常的。他们不喜欢与常规选择器混在一起。[这个答案解决了其中一些问题](https://stackoverflow.com/questions/13843858/less-can-you-group-a-css-selector-with-a-media-query/13844216#13844216)，以及如何组合代码。但是，在您的情况下，可能最好使用 mixin，因为您需要将它们分开，并且您不能真正将`html.no-canvas`调用用作 mixin。所以是这样的：

**较少的**

```
div.chem_stage {
    position: relative;

    .groupedCode() {
        display: none;
    }

    html.no-canvas & {
        .groupedCode()
    }

    @media only screen and (max-width : @respChem) { 
        .groupedCode()
    }
} 
```

**CSS 输出**（假设`@respChem`在`300px`这里）

```
div.chem_stage {
  position: relative;
}
html.no-canvas div.chem_stage {
  display: none;
}
@media only screen and (max-width: 300px) {
  div.chem_stage {
    display: none;
  }
} 
```

# c# - 随机相似的抽奖序列

> ID：14053449
> 
> 赞同：1
> 
> 时间：2012-12-27T10:49:34.877
> 
> 标签：c#, random

很多时候，当我抽出数字时，我得到 0，而且我总是可以看到类似的抽奖顺序。你知道为什么吗？

例如：losowanie(3) -> 结果 0 有时 1？

代码：

```
 public int losowanie(int w)
        {
            Random rand = new Random(Guid.NewGuid().GetHashCode());
            int s = w - 1;
            return rand.Next(0, s);
        } 
```

代码：

![在此处输入图像描述](../Images/9ba72648cd311fdbace598842db3c8af.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:53:32.863

将您的[Random](http://msdn.microsoft.com/en-us/library/system.random.aspx)类实例化一次并重用该实例。例如，通过在使用随机序列的类中拥有一个私有静态字段。顺便说一句：我怀疑带有 Guid.NewGuid() 的默认种子会为 Random() 的无参数构造函数提供更好的结果。

```
public class whatever
{
        static Random rand = new Random(Guid.NewGuid().GetHashCode());
        // or use new Random(); 

        public int losowanie(int w)
        {
            int s = w - 1;
            return rand.Next(0, s);
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T10:55:18.797

您看到的行为是正确的 -`losowanie(3)`调用`rand.Next(0, 2)`，因此只能返回两个值 -`0`或`1`.

您可能误解了`Random.Next(minValue, maxValue)`参数的含义 - 查看[MSDN](http://msdn.microsoft.com/en-us/library/2dx6wyd4.aspx)了解详细信息。

# android - Android SDK 管理器不工作

> ID：14053450
> 
> 赞同：2
> 
> 时间：2012-12-27T10:49:37.573
> 
> 标签：android, eclipse, sdk

在启动 Eclipse 时，我收到一条消息

```
This version of ADT requires Android SDK Tools revision 21.0.0 rc9 or above.
Current version is 10.0.0.
Please update your SDK tools to latest SDk version. 
```

因此，在单击 Open SDK Manager 按钮时没有任何反应，并且在控制台中我收到此消息。

```
[2012-12-27 16:15:06 - SDK Manager] [SDK Manager] Error: Expected verb after global parameters but found 'sdk' instead. 
```

为什么？

我的 SDK 管理器窗口没有打开，所以我无法更新 SDK 工具。我正在使用 Eclipse Helios 开发 Ubuntu 10.10。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T10:54:27.213

尝试找到您的 Android SDK 管理器在哪里（您首先安装 SDK 的路径）。假设它是`/opt/android-sdk-linux`并在需要的地方替换：

从终端，尝试执行

```
sudo /opt/android-sdk-linux/tools/android 
```

有了它，您将获得一个 Android SDK 管理器窗口，您可以在其中升级您的 SDK 元素（包括 SDK 管理器和工具）。可能是Android SDK Manager 与Eclipse 的集成从10 版本到21 版本，导致Eclipse 无法启动。

PS 使用`sudo`可能是不必要的，具体取决于路径和用户对其拥有的权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T10:55:44.907

如果您使用的是来自 android 的 adt-bundle，请再次删除并解压缩该捆绑包，然后尝试打开 eclipse。我遇到了类似的问题。通过执行上述步骤，我摆脱了这个错误。希望它对您有所帮助:):) .. 并记住 JAVA 7 与 android eclipse 不兼容（未经测试和推荐）.. 所以使用 JAVA 6。

-普雷亚

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:10:24.833

[已安装最新的 ADT 和 sdk 工具，但仍要求最新的 sdk 工具](https://stackoverflow.com/questions/13220460/latest-adt-and-sdk-tools-installed-but-still-asking-for-latest-sdk-tools)

“实际上，该解决方案不涉及删除或下载整个安装程序。更新 Eclipse ADT 后，您只需更新 SDK 管理器中的 SDK 工具。诀窍是打开 SDK 管理器 -> 包菜单 -> 重新加载。然后最新的版本可以更新。就这么简单，但一开始真的很烦人。

它对我有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-05T12:07:56.157

检查 Window -- Preferences -- Android 中的路径。一定是对的

# algorithm - 快速找到远离牛群的动物的算法

> ID：14053456
> 
> 赞同：15
> 
> 时间：2012-12-27T10:50:30.437
> 
> 标签：algorithm, geometry, machine-learning, spatial-index, outliers

我正在开发一个模拟程序。有成群的动物（角马），在那个畜群中，我需要能够找到一种远离畜群的动物。

在下图中，绿点远离牛群。我希望能够**快速**找到这些点。

![绿点远离牛群](../Images/9c594bcae3176d16c3975682181589ce.png)

当然，有一个简单的算法可以解决这个问题。计算每个点的邻域中的点数，然后如果该邻域为空（其中为 0 点），则我们知道该点远离牛群。

问题是这个算法根本**没有效率**。我有一百万个点，在每一百万个点上应用这个算法**非常慢**。

有什么东西会更快吗？也许使用树木？

编辑@amit：我们想避免这种情况。左角的一组绿点会被选中，尽管它们不应该被选中，**因为**远离牛群的不是单一的动物，而是一群动物。我们只是在寻找远离牛群（而不是一群）的单一动物。

![一群远离牛群的绿点](../Images/38410bfb0d6d0f6354e0b1f75b4b58e1.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T23:33:22.213

对于最近邻查询，经常使用 kd-trees。这将导致 O(n log n) 查询（一个查询在 log(n) 乘以 n 个查询中，并且构建 kd-tree 本身在 O(n log n) 中），我可以看到这对一对夫妇来说工作得非常快数百万个点，并且有些库也已经非常高效（例如[ANN](http://www.cs.umd.edu/~mount/ANN/)）。

此外，ANN 代表“近似最近邻”，在不需要精确距离时可以更快。由于在您的情况下，您只想检测第一个最近邻距离是大还是小，您可以设置一个相当高的阈值，这会使事情变得更快。

由此，您可以确定每个最近邻居的距离分布，并找到异常值。对所有这些距离进行排序以确定异常值又是 O(n log n)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T10:52:29.833

我认为您正在寻找[**异常检测**算法](http://en.wikipedia.org/wiki/Anomaly_detection)（这是一个[无监督的机器学习](http://en.wikipedia.org/wiki/Unsupervised_learning)问题）。

这个想法是找到与其他实例相比“表现”不正常的实例。

[以这个](http://www.youtube.com/watch?v=h5iVXB9mczo)开头的一组视频（来自 Coursera 的在线机器学习课程）描述了这个问题以及如何很好地解决它。

* * *

**编辑：**
一个更简单的替代方法是找到所有点（动物）的平均值，并“选择”`k`离它最远的动物（或者，所有与某个阈值距离更大的点）。

如果您有多个组，您可能希望首先对它们进行[聚类](http://en.wikipedia.org/wiki/Cluster_analysis)。一种方法是使用[k-means clustering](http://en.wikipedia.org/wiki/K-means_clustering)，并在每个组（集群）上应用上述方法之一。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-28T10:47:08.817

由于您正在寻找一只孤独的动物，您可以使用两个凸层来处理~~O(N log N + ab*)~~ O(N log N)，其中 a 是第一个外壳的大小，b 是第二个外壳的大小船体。

1.  从位置列表创建一个凸包
2.  从位置列表中创建第二个凸包，不包括第一个包中的那些。

如果最近的邻居足够远，则外部（第一个）船体中的动物被“隔离”。最近的邻居是内壳和外壳中该点的最近点（不是同一点）。在外壳的情况下，您可能只需检查到所考虑点的左右点的距离即可。因此大 O 中的 a*b 而不是 a(a+b)

如果您预计牛群的“内部”动物之一被认为是孤立的（在这种情况下，内部是指不构成外壳的任何动物），那么上述方法可能不起作用。在这种情况下，您需要使用更复杂的方法。

~~如果 a + b 接近 N，它也可能效率低下，因为它基本上是 O(N^2)。尽管在这种情况下，任何动物都不太可能是非常孤立的。~~

编辑：我还应该指出，有动态凸包结构可用于维护一个凸包，只需添加和删除点即可在其中移动点。这可能对实时更新有所帮助。

*这实际上是 O(N)，使用旋转卡尺。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-28T01:24:54.143

这是一个简单的想法。（聚类方法）

根据 x,y 值将您的动物放在一个网格中。如果您不想检测到错误的异常值，您可以使用两个网格。在这个例子中，我使用了两个用黑色和蓝色线条表示的网格容器。

![网格](../Images/0f642de879e68912b0466603ab33afe6.png)

异常值定义为：`an animals which is alone in both it's blue and black grid.`

您保留网格索引和网格中包含的动物之间的引用。

迭代动物并使用它们的 x,y 值将它们放入网格中。然后迭代黑色网格。当网格内容为 1 时，通过黑色网格内的动物找到蓝色网格参考。检查蓝色网格的内容。如果为 1，则该动物为异常值。

运行时间应该很快。

```
n: number of animals
b: size of black grid 
```

把动物放在格子里`O(n)`。迭代黑色网格是`O(b)`

这`O(n) + O(b)`总共提供了构建信息和定位异常值。

定位异常值需要`O(b)`时间。如果您的网格足够小，这将确保非常快的运行时间。

上图应说明两个异常值。

实现应该相对简单。您可以使用基于网格的策略变体，使用不同的网格布局或使用更多的网格容器。

**编辑：** 这种方法与本文中描述的不计算距离的单元格方法有些相关。[http://www.slac.stanford.edu/cgi-wrap/getdoc/slac-r-186.pdf](http://www.slac.stanford.edu/cgi-wrap/getdoc/slac-r-186.pdf) 此方法不会排除所有案例的错误检测异常值。要获得更完美的解决方案（对于地图上所有可能的动物位置），您必须添加从一个单元格中检测到的 1 个动物到相邻单元格内容的距离计算。[你可以在这里](http://kunuk.wordpress.com/2013/01/13/single-detection-in-2d-dimension/)阅读更多关于它的信息。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-27T23:47:09.347

您可以尝试基于三角测量的聚类方法：

1.  形成数据集的[Delaunay 三角剖分](http://en.wikipedia.org/wiki/Delaunay_triangulation)。有有效的算法可以做到这一点，例如提供性能的[CGAL](http://www.cgal.org/)和[Triangle 。](https://www.cs.cmu.edu/~quake/triangle.html)`O(|V|*log(|V|))`

2.  对于集合中的每个顶点，通过扫描附加边的列表来计算“长度测量”，记录每个顶点的最小边长。这应该是`O(|V|+|E|)`。（您也可以使用平方边长，以避免取平方根！）

3.  根据上面计算的“长度测量”选择顶点。如何做到这一点将取决于您如何将“远离”的群体分类。几种可能性：

    *   一种简单的方法是仅使用静态长度容差，以便任何顶点在其长度测量值超过此值时都将被归类为“远离”。这将是一个`O(|V|)`考验。

    *   更复杂的方法也是可能的，例如基于三角剖分中所有边缘的平均边缘长度的因子设置长度容差 - 这将根据畜群的平均分布来缩放容差。这将是一个`O(|V|+|E|)`考验。

这种方法的一个优点是它应该对在主集群之外具有小“子群”的牛群具有鲁棒性（根据您的第二个示例）。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-30T12:42:44.347

为了加快此类查询，请**使用空间索引结构**。

kd-trees、quadtrees、R-trees、grids 只是您的一些选择。

在这样的索引结构中，您可以快速找到*最近的邻居*。最近的（第二近的，第三近的）邻居比其他奶牛远得多的奶牛可能是您正在寻找的*异常值。*

选择哪种索引结构可能是最大的挑战。在进行模拟时，可以有效更新的东西可能是最好的。kd-trees 不能很好地更新，但需要时不时地重建（如果你巧妙地实现它，重建应该很快）。R*-trees 可能最适合重建，但它们实际上是要存储在硬盘上。

我认为为内存模拟提供最佳性能的只是*grids*。您可以尝试不同的网格大小，选择最适合的。另外，它们允许一些非常好的优化：在有奶牛的网格单元中`n`，到最近的 n-1 头奶牛的距离最多为`sqrt(w*w+h*h)`，其中`w`和`h`是您的网格距离。所以你可能不需要真正查看那些有“足够”奶牛的细胞。`n`对您来说可能低至 3。现在在只有一头牛的网格单元中，它还不需要是异常值。它可能就在一个非常满的相邻单元的边缘。但是这样的细胞应该不会很多，你可以很容易地检查这些奶牛。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-27T11:22:33.817

这个怎么样：

1.  在 X 方向对您的动物进行分类。
2.  查找远离其前后元素的 X 值
3.  这些是孤独的人的候选人。
4.  对 Y 方向重复相同的操作

两个列表（X 和 Y）中的候选人肯定是分开的。对于仅存在于一个列表中的候选人来说，这也是几乎可以肯定的。

排序的复杂度为 O(n log n)，扫描的复杂度为 O(n)。我怀疑你可以在不透露数据结构的情况下做得更好。

步骤 1 也可以通过使用复杂度为 O(n) 的桶或基数排序来解决

如果您可以维护这两个排序列表，我会为每只动物添加一个属性“lonley”。当您不断地遍历您的动物时，您只需通过检查其在已排序 X/Y 数组中当前位置左右元素的距离来更新“lonley”状态。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-06T16:08:38.847

这是一个简单的线性时间过程：

假设在任何给定时间只有一个牛群，请将您的动物的位置视为来自双变量（正态？）分布的样本。以线性时间计算总体的均值和标准差。以线性时间计算平均值与每只动物之间的[马氏距离。](http://en.wikipedia.org/wiki/Mahalanobis_distance)`t`正如@amit 所建议的那样，任何超过某个阈值的动物都不是牛群。您可以设置该阈值。一种可能的选择是手工制作一些示例并使用它们来调整值，这很容易，因为马氏距离是尺度不变的。我的直觉是 3 是一个很好的起点——距离平均值超过 3 个标准差的任何东西都是异常值。

# javascript - 带有 ACR122 RFID 的 Javascript

> ID：14053457
> 
> 赞同：3
> 
> 时间：2012-12-27T10:50:49.103
> 
> 标签：javascript, nfc, rfid

您好只是想问一下是否有人知道或有使用带有 PHP/JAVASCRIPT的**NFC ACR122U的经验，但在实现它时遇到了一些问题。**

我已经将它安装在我的电脑上，并且很难获得输入。它现在正在工作，如果我将*rfid*卡悬停，它会显示它已读取，但我不知道如何设法从 php 驱动的网站获取输入。*注意我没有使用 PHP 的外部设备的经验。前任。条码扫描仪，打印机。等等

将不胜感激任何帮助。从我的搜索中，我仍然没有找到任何可以帮助我解决问题的指南。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T09:00:54.940

正如查尔斯所说，PHP 是服务器端，Javascript 是客户端。您还没有说明要将 ACR122U 放在哪一侧（客户端或服务器？）。

对于客户端集成 (Javascript)，您无法使用 Javascript 直接访问设备。您将需要创建一个签名的 Java 小程序以在您的网页中运行。此小程序将使用 Java 智能卡 API 访问 ACR122U，还可以与您页面上的 javascript 交互。[请参阅此](http://www.springcard.com/solutions/pcsc.html)页面上的“其他资源”->“Java” 。

我不太了解 PHP 和智能卡访问，但[这个](http://hanez.org/pcsc-for-php.html)库看起来很有希望。

另外，我有一种感觉，您可能期望读卡器像键盘一样工作，只输出所呈现的任何卡的内容，有点像磁条阅读器和条形码阅读器。事实并非如此，它实际上比这更复杂。您必须向卡发送称为[APDU 的](http://en.wikipedia.org/wiki/Smart_card_application_protocol_data_unit)命令，以请求您想要的信息。

如果您可以详细说明您的要求，那么也许我可以提供更好的帮助。

** 编辑 ** Javascript 现在也可以在服务器端运行 :)

# java - 为什么通过android应用程序返回错误在facebook的朋友墙上发帖？

> ID：14053479
> 
> 赞同：0
> 
> 时间：2012-12-27T10:52:30.813
> 
> 标签：java, android, facebook

我从[这里使用简单的 facebook lib](http://www.easyfacebookandroidsdk.com/)

错误名称：E/EasyFacebookAndroid(4882): (#200) 此应用程序禁用向其他用户发布动态消息

PS Post to my wall 工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T18:02:56.870

您最近创建了一个新的 Facebook 应用程序，这意味着您的应用程序已经启用了 2 月的重大更改，其中包括不赞成在朋友的墙上发帖。

[在这里](https://stackoverflow.com/questions/13829086/oauthexception-when-trying-to-post-to-friends-wall/13830728#13830728)阅读我之前的答案

# jquery - Uncaught SyntaxError: Unexpected token < -- 在 jQuery ajax 中

> ID：14053484
> 
> 赞同：3
> 
> 时间：2012-12-27T10:53:09.193
> 
> 标签：jquery, asp.net, ajax, web-services

我是网络服务的新手。在我的项目中，当我尝试运行时，我连接了 Web 服务（一切都是现成的），但出现以下错误。

错误 -->

> `Uncaught SyntaxError: Unexpected token <`

Web 服务和我的页面位于相同的解决方案中，但项目不同。

相关代码如下：

**jQuery** （网址：11761）

```
 function GetAllCategories() {
   $.ajax({
      url: "http://localhost:12015/myWebService.asmx?op=GetCategories",
      type: "POST",
      dataType: "jsonp",
      data: "{}",
      contentType: "application/jsonp; charset=utf-8",
      success: function (data) {
          var categories = data.d;
          $.each(categories, function (index, category) {
              alert(category.CategoryId);
          });
      },
      error: function (e) {
          alert(e.message);
      }
   });
} 
```

**网络服务**（网址：12015）

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
public List<Categories>  GetCategories()
{
    //Code
} 
```

在问这里之前我已经浏览了这个[链接](https://stackoverflow.com/a/3153134/1577396)（无法理解）

**编辑：**

**[从这篇文章](https://stackoverflow.com/a/14122895/1577396)**中得到了替代答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T11:37:25.050

弄清楚您的站点和 Web 服务在两个不同的项目中运行时违反了[同源策略。](http://en.wikipedia.org/wiki/Same_origin_policy)

将**Web 服务和网站移动到同一个项目中**，它应该可以工作。

你的javascript也是错误的，应该是

```
function GetAllCategories() {
   $.ajax({
      url: "http://localhost:12015/myWebService.asmx/GetCategories",
      type: "POST",
      dataType: "jsonp",
      data: "{}",
      contentType: "application/jsonp; charset=utf-8",
      success: function (data) {
          var categories = data.d;
          $.each(categories, function (index, category) {
              alert(category.CategoryId);
          });
      },
      error: function (e) {
          alert(e.message);
      }
   });
} 
```

op 位仅用于在 Web 浏览器中进行测试。删除它，你应该很好。

公平地说，PS @andyb 不久前提出了这个答案，但不清楚这是否是问题所在！ **更新**

今天在这方面做了一些不恰当的玩弄，我已经澄清了一些我认为我会分享的观点。您必须`POST`使用`.asmx`服务，并且不能跨域执行此操作。您可以`GET`跨域触发 a 但不能触发 a`POST`所以这是我认为的路由问题。

您可以启用`GET`，请参阅[如何通过 GET 调用 ASMX Web 服务？](https://stackoverflow.com/questions/1208569/how-to-call-an-asmx-web-service-via-get). 但这似乎是个坏主意，因为它会将您的 Web 服务暴露给所有人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-12T14:43:32.140

不是您问题的直接答案-但以下是我为解决类似问题所必须做的

[如何在 ASP.Net 2.0 中强制数据类型为 JSON](https://stackoverflow.com/questions/24175081/how-to-force-datatype-as-json-in-asp-net-2-0/24186964#24186964)

问题是`ASP.Net Ajax`没有安装和配置。

# mysql - 在 mySQL 中添加前缀

> ID：14053494
> 
> 赞同：1
> 
> 时间：2012-12-27T10:53:47.290
> 
> 标签：mysql, vb.net, prefix

我在某个字段中添加前缀时遇到了这个问题，我的字段是

```
808 - 817(1) 
```

或者

```
808 - 818 
```

我会怎么做才能在它上面添加前缀是这样的

```
a808 - 817(1) 
```

和

```
a808 - 818 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:23:12.387

我用这个

```
UPDATE `" + cboJob.Text + "` SET `Line Number` = CONCAT('a',`Line Number`) WHERE `Line Number` LIKE '%-%' 
```

# javascript - 从电子表格中读取值并写入 XML

> ID：14053499
> 
> 赞同：0
> 
> 时间：2012-12-27T10:54:07.500
> 
> 标签：javascript, xml, excel

我需要根据电子表格 (Excel) 中写入的值替换一系列 XML 文件中的一些行。这可以用 Javascript 完成，还是有更好的路线？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T10:56:55.320

JS的[Excel 解析器](https://npmjs.org/package/excel)至少有一个[，XML 解析器也不缺](https://npmjs.org/browse/keyword/xml)，所以肯定是有可能的。

# jquery - Fancybox 如何确定图库中的下一张图片？

> ID：14053502
> 
> 赞同：1
> 
> 时间：2012-12-27T10:54:20.710
> 
> 标签：jquery, fancybox

fancybox 如何确定画廊中的“下一个”或“上一个”图像？

我有一个页面，上面有垂直排列的照片，我想了解 fancybox 的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T10:57:05.133

Fancybox 选择 DOM 中图像上的所有链接，按您的 CSS 选择器排序。

**更新：样本**

```
<h1> gallery 1</h1>
<a href="urltodetail1.jpg" rel="gallery1"><img src="thumb1.jpg></a>
<a href="urltodetail2.jpg" rel="gallery1"><img src="thumb2.jpg></a>
<a href="urltodetail3.jpg" rel="gallery1"><img src="thumb3.jpg></a>

<h1> gallery 2 </h1>
<a href="urltodetail4.jpg" rel="gallery2"><img src="thumb4.jpg></a>
<a href="urltodetail5.jpg" rel="gallery2"><img src="thumb5.jpg></a>
<a href="urltodetail6.jpg" rel="gallery2"><img src="thumb6.jpg></a>

$("a[rel=gallery1],a[rel=gallery2]").fancybox(); 
```

[http://jsfiddle.net/PfaXm/](http://jsfiddle.net/PfaXm/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T11:25:35.430

Fancybox 通过使用 .fancybox() 定位的元素上的 'rel' 属性将画廊组合在一起。

您可以使用不同的 'rel' 值指定多个画廊。

您的画廊将按照与 jQuery 的选择相同的顺序出现。

# iphone - 如何在当前视图下制作导航树？

> ID：14053508
> 
> 赞同：1
> 
> 时间：2012-12-27T10:54:30.590
> 
> 标签：iphone, objective-c, ios, uitableview, uinavigationbar

我对 iPhone 拆分导航有疑问？

首先，该应用程序没有标签。当我点击右上角的类别按钮时，当前视图将向右移动，并显示导航三，它看起来像一个 uitableview 并且在当前视图下。然后，当我选择表格行时，当前视图将向后移动，并重新加载视图类。

它就像一个标签。但是 tableview 替换了选项卡，并在视图下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:29:48.233

如果我理解正确，您正在寻找类似github 上的[ECSlidingViewController项目的东西。](https://github.com/edgecase/ECSlidingViewController)

# javascript - 在nodejs中解析一个json树

> ID：14053509
> 
> 赞同：3
> 
> 时间：2012-12-27T10:54:32.013
> 
> 标签：javascript, json, node.js

我需要解析一个放在文件中的 json 并确定它下面的结构是我尝试这样做的代码

```
var fs = require('fs')
var reqTemplate;
var obj;
fs.readFile('SampleData.js', 'utf8', function (err, data) {
    if (err) {
        return console.log(err);
    }
    reqTemplate = data;
    console.log('\nRequestTemplate:\n\n%s\n', reqTemplate);
    obj = JSON.parse(reqTemplate);
    var i = 0;
    console.log(Object.keys(obj));
    Object.keys(obj).forEach(function (key) {
        i++;
        console.log;
        console.log(key);
        console.log(obj[key]);
    });
}); 
```

我得到的输出是：

```
{
    "AuthenticateUserReq": {
        "Tid": "123",
        "username": "131329",
        "password": "Vinod",
        "SessionTokenId": "",
        "DeviceInfo": {
            "DeviceName": "ABC",
            "DeviceVersion": "X",
            "UniqueDeviceID": "ZZZ",
            "Platform": "AND"
        }
    }
} 
```

我能够获得父键及其值。
我被困在如何识别子键和检索它的值上。

PS：我不会知道 json 响应的结构。我需要识别根键及其值以及子键及其值。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T11:11:03.000

您将需要递归进行[树遍历](http://en.wikipedia.org/wiki/Tree_traversal)：

```
var callback = console.log;

function traverse(obj) {
    if (obj instanceof Array) {
        for (var i=0; i<obj.length; i++) {
            if (typeof obj[i] == "object" && obj[i]) {
                callback(i);
                traverse(obj[i]);
            } else {
                callback(i, obj[i])
            }
        }
    } else {
        for (var prop in obj) {
            if (typeof obj[prop] == "object" && obj[prop]) {
                callback(prop);
                traverse(obj[prop]);
            } else {
                callback(prop, obj[prop]);
            }
        }
    }
}

traverse( JSON.parse(reqTemplate) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T14:15:07.217

Might also want to try out Node traverse - [https://github.com/substack/js-traverse](https://github.com/substack/js-traverse). Allows recursively walking a JSON tree to get each key value pair with context (ie: keeps track of parent), and can run map/reduce while traversing tree. Very powerful.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:24:41.013

当你解析 JSON 时，你会得到一个普通的 JS 对象。您可以使用 获取其密钥`var keysOfObject = Object.keys(object);`。然后您可以使用这些键来获取值。

# c++ - 声明 const 全局变量时是否需要静态？

> ID：14053514
> 
> 赞同：5
> 
> 时间：2012-12-27T10:54:48.113
> 
> 标签：c++, static, linkage

我经常在标题中看到

```
//global namespace, not in class
static const int my_global =1984; 
```

但最近我了解到 const 意味着内部链接，所以我想知道这不会使静态不必要吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T11:01:40.487

这取决于。在 C++ 中，它是不必要的，但有些人（包括我自己）喜欢把它放进去，理由是说我们的意思。当然，如果头文件也要在 C 中使用，这是必要的（但对于 C 中的许多用途，你需要一个`#define`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T02:53:09.847

在 C++ 中，没有必要（冗余）使用 static 关键字来防止全局链接，因为 const 对标准 C++（C++98、C++03、C++11）执行此操作。然而，在 C 中，static 关键字对于变量具有本地（文件）链接是必需的。由于许多 C 编码实践已经习惯性地带入了 C++（有很多重叠），有些人可能会不假思索地把这个习惯带到 C++ 中。我听说 C++ 中表示非全局链接的冗余静态关键字有助于 C 程序员理解。

我自己更喜欢使用 C++ 习语在 C++ 中编程的精确性，这样我们就不会在 C++ 中延续 C 代码，这可能会导致细微的错误，或者至少是浪费和冗余代码（例如在调用 delete 之前习惯性检查 NULL在指针上。

# java - 将 SharedPreferences 传递给 doInBackground()

> ID：14053518
> 
> 赞同：0
> 
> 时间：2012-12-27T10:55:09.750
> 
> 标签：java, android, sharedpreferences

我正在尝试将 SharedPreferences 首选项作为参数传递给 AsyncTask 中的 doInBackground 函数。我已经将字符串（url）传递给它，所以我需要将首选项也作为字符串传递。我可以简单地使用 prefs.toString() 将其转换为字符串吗？

这是我设置首选项的地方：

```
if (prefs.getBoolean("firstrun", true)) {
            prefString = prefs.toString();
            prefs.edit().putBoolean("firstrun", false).commit();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T10:58:04.277

你不能也不应该。您可以轻松读取内部的首选项，`doInBackground()`而无需将任何内容传递给该方法，只需使用[`PreferenceManager`](http://developer.android.com/reference/android/preference/PreferenceManager.html)：

```
public class DownloadFiles extends AsyncTask<URL, Void, Void> {

  Context ctx;

  DownloadFiles(Context ctx) {
    this.ctx = ctx;
  }

  @Override
  public void doInBackground(URL... urls) {
    // ...
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(ctx);
    // ...
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:15:46.920

试试这个代码：

```
 public class DownloadFiles extends AsyncTask<URL, Void, Void> {

      Context ctx;
    boolean firstLaunch;
    SharedPreferences prefs;

      DownloadFiles(Context ctx) {
        this.ctx = ctx;
        prefs = ctx.getSharedPreferences("Prefs",Context.MODE_PRIVATE);
      }
      @Override
      public void onPreExecute() {
          firstLaunch = prefs.getBoolean("firstrun", true);
      }

      @Override
      public void doInBackground(URL... urls) {

        if(firstLaunch)
          // code for the firstLaunch
        else 
          //code if it isn't the firstLaunch 
      }

      @Override
      public void onPostExecute(Void params) {
          // update prefs after the firstLaunch
          if(firstLaunch)
              prefs.edit().putBoolean("firstrun", false).commit();
      }
    } 
```

# c# - 试图允许空值，但是......“可空对象必须有一个值”

> ID：14053519
> 
> 赞同：16
> 
> 时间：2012-12-27T10:55:12.773
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我试图在我的下拉列表中允许空值，在我的数据库表中，我已经为 int 的特定字段设置了允许空值，但是当我运行代码时，我收到错误消息“可空对象必须有一个值”，我想问题可能出在 ModelState 中。

控制器

```
[HttpPost]
    public ActionResult Edit(Student student)
    {
        if (ModelState.IsValid)
        {
            db.Entry(student).State = EntityState.Modified;
            db.SaveChanges();
            Loan w = new Loan()
            {
                StudentID = student.StudentID,
                ISBN = student.ISBN.Value,
            };
            db.Loans.Add(w);
            db.SaveChanges();
            return RedirectToAction("Index");
        }
        ViewBag.ISBN1 = new SelectList(db.Books, "ISBN", "Titulli", student.ISBN);
        return View(student);
    } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-27T10:57:51.407

尝试[获取没有价值的可空](http://msdn.microsoft.com/en-us/library/ydkbatt6.aspx)对象的值时，您会收到此错误。如果`Loan.ISBN`属性不可为空，那么您应该为该属性提供默认值

```
ISBN = student.ISBN.HasValue ? student.ISBN.Value : defaultValue
// or ISBN = student.ISBN ?? defaultValue
// or ISBN = student.ISBN.GetValueOrDefault() 
```

如果`Loan.ISBN`属性是可空的，那么只需分配`student.ISBN`而不访问`Value`可空类型

```
ISBN = student.ISBN 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-27T13:54:25.583

使用合并运算符 ?? 执行相同任务的最短方法，如下所示：

```
ISBN = student.ISBN ?? defaultValue; 
```

合并运算符的工作方式如下：如果第一个值（左侧）为空，则 C# 计算第二个表达式（右侧）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-27T11:09:06.187

当您尝试访问类型为 false的`Value`属性时，会发生此异常。请参阅MSDN 上的[可空类型](http://msdn.microsoft.com/en-us/library/1t3y8s4s%28v=vs.80%29.aspx)。所以首先检查这一行`Nullable``HasValue`

```
ISBN = student.ISBN.Value 
```

看看是否`ISBN`不为空。您可能希望将此行更改为

```
ISBN = student.ISBN.GetValueOrDefault(); 
```

# java - 使用 C++ 向 jar 发送命令

> ID：14053521
> 
> 赞同：0
> 
> 时间：2012-12-27T10:55:34.350
> 
> 标签：java, c++, winapi, command

我像这样运行了一个 .jar 文件（在 C++ 中）：

```
#include <iostream>
#include <windows.h>

using namespace std;

int main ()
{
    system("java -jar filename.jar");
    return 0;
} 
```

**注意：**这完全按照我想要的方式运行，但是如何使用 c++ 代码向 jar 应用程序发送命令？我知道我不能做 system("MyJavaAppCommand"); 因为那只会由 windows 命令而不是我的应用程序执行。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T10:58:13.163

我会尝试使用命令行参数，如

```
system("java -jar filename.jar arg1 arg2 ... argN"); 
```

有参数传递给你的主要方法

```
public static void main(String... args) 
```

或者

```
public static void main(String[] args) 
```

此处引用过多

[https://www.google.co.uk/search?q=jar+command+line+arguments](https://www.google.co.uk/search?q=jar+command+line+arguments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T10:25:45.300

我认为您可能会发现管道很有用。
[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365780(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365780(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T10:58:40.437

您可以在“filename.jar”之后添加参数。这些值将被 Java以通常的方法在`argc[]`数组中看到。`public static void main(String argc[])`

# visual-studio-2008 - 每当我在 Windows 窗体应用程序中打开设计器视图时，MS Visual Studio 2008 就会崩溃

> ID：14053522
> 
> 赞同：0
> 
> 时间：2012-12-27T10:55:39.737
> 
> 标签：visual-studio-2008

每当我在我的解决方案中打开任何形式的任何设计器视图时，我的 VS 2008 都会崩溃。每次。我试过[这个](https://stackoverflow.com/questions/8940625/how-to-resolve-this-microsoft-visual-studio-has-encountered-and-needs-to-close)，但它不起作用。我能做些什么来阻止这个问题。![错误信息图片](../Images/2b4b17c8bda5c70158c9e0424ef336a8.png)

# c - c语言中的冒泡排序

> ID：14053525
> 
> 赞同：1
> 
> 时间：2012-12-27T10:56:13.120
> 
> 标签：c, sorting

我正在使用以下代码进行选择排序，但它总是返回 0, 0, 0,....

```
#include<stdio.h>

main(){

  int i,j;
  int s=8;
float  temp;
float  a[8] = {99, 80.5, 66, 45, 02, 36, 45, 80};

  for(i=0;i<s;i++){
      for(j=i+1;j<s;j++){
           if(a[i]>a[j]){
               temp=a[i];
              a[i]=a[j];
              a[j]=temp;
           }
      }
  }

  printf("After sorting is: ");
  for(i=0;i<s;i++)
      printf(" %d",a[i]);

  return 0;
} 
```

它适用于 int 变量，但不适用于 float。怎么了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T11:01:21.470

排序（我猜它是某种冒泡排序算法）似乎很好。但是输出是错误的，您必须使用`%f`浮点值的说明符而不是`%d`（用于整数）。

```
 for(i=0;i<s;i++)
        printf(" %f",a[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:43:39.147

问题在于您在 printf() 中的格式说明符。

使用 %f 代替 %d 并解决您的问题。

# objective-c - IOS弗兰克构建失败

> ID：14053527
> 
> 赞同：1
> 
> 时间：2012-12-27T10:56:15.227
> 
> 标签：objective-c, ios, ipad, xcode4.5, frank

我正在尝试为我当前正在创建的 IOS 项目构建 Frank，但我不断收到 Frank 的构建错误失败，而 Xcode 可以很好地构建项目。

也许是一些重要的细节：
- 我正在使用为 ipad 编译的库，因此该项目不会为模拟器构建。
- 我将有效架构更改为 armv7（不是 armv7，armv7s）
- 在 ios 6.0 中编程
- 使用 xcode 4.5

我下载并安装了弗兰克

在我进入我的项目目录（使用终端）后，
我输入了以下内容

```
1\. frank setup
2\. frank build //something fails here 
```

我收到以下错误

```
=== BUILD NATIVE TARGET MyProj OF PROJECT MyProj WITH CONFIGURATION Debug ===
Check dependencies
No architectures to compile for (ONLY_ACTIVE_ARCH=YES, active arch=i386,          VALID_ARCHS=armv7).

** BUILD FAILED **

The following build commands failed:
Check dependencies
(1 failure)
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/fileutils.rb:1241:in `mkdir': No such file or directory -     /Users/user/Desktop/mobile_hr_ios_svn/trunk/mobile_hr_ios/03-    Code/new/MyProj/Frank/frankified_build/Frankified.app (Errno::ENOENT)
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/fileutils.rb:1241:in `copy'
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/fileutils.rb:452:in `copy_entry'
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/fileutils.rb:1331:in `traverse'
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/fileutils.rb:449:in `copy_entry'
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/fileutils.rb:424:in `cp_r'
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/fileutils.rb:1402:in `fu_each_src_dest'
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/fileutils.rb:1418:in `fu_each_src_dest0'
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/fileutils.rb:1400:in `fu_each_src_dest'
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/fileutils.rb:423:in `cp_r'
from /Library/Ruby/Gems/1.8/gems/frank-cucumber-1.1.3/lib/frank-cucumber/cli.rb:85:in `build'
from /Library/Ruby/Gems/1.8/gems/thor-0.16.0/lib/thor/task.rb:27:in `send'
from /Library/Ruby/Gems/1.8/gems/thor-0.16.0/lib/thor/task.rb:27:in `run'
from /Library/Ruby/Gems/1.8/gems/thor-0.16.0/lib/thor/invocation.rb:120:in `invoke_task'
from /Library/Ruby/Gems/1.8/gems/thor-0.16.0/lib/thor.rb:275:in `dispatch'
from /Library/Ruby/Gems/1.8/gems/thor-0.16.0/lib/thor/base.rb:425:in `start'
from /Library/Ruby/Gems/1.8/gems/frank-cucumber-1.1.3/bin/frank:5
from /usr/bin/frank:19:in `load'
from /usr/bin/frank:19 
```

经过一番搜索，我找到了一个链接，有人说我可以用 buil 给出架构，所以我做了

```
1\. frank setup //not really necessary cause i did it before 
2\. frank build --arch armv7 //giving the architecture with the command 
```

但它给出了以下错误

```
=== BUILD NATIVE TARGET MyProj OF PROJECT MyProj WITH CONFIGURATION Debug ===
Check dependencies

ProcessInfoPlistFile Frank/frankified_build/./MyProj.app/Info.plist MyProj/MyProj-Info.plist
cd /Users/user/Desktop/mobile_hr_ios_svn/trunk/mobile_hr_ios/03-Code/new/MyProj
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/user/.rvm/bin"
builtin-infoPlistUtility MyProj/MyProj-Info.plist -genpkginfo /Users/user/Desktop/mobile_hr_ios_svn/trunk/mobile_hr_ios/03-Code/new/MyProj/Frank/frankified_build/./MyProj.app/PkgInfo -expandbuildsettings -format binary -platform iphonesimulator -o /Users/user/Desktop/mobile_hr_ios_svn/trunk/mobile_hr_ios/03-Code/new/MyProj/Frank/frankified_build/./MyProj.app/Info.plist

SymLink build/Debug-iphonesimulator/MyProj.app Frank/frankified_build/./MyProj.app
cd /Users/user/Desktop/mobile_hr_ios_svn/trunk/mobile_hr_ios/03-Code/new/MyProj
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/user/.rvm/bin"
/bin/ln -sf /Users/user/Desktop/mobile_hr_ios_svn/trunk/mobile_hr_ios/03-  Code/new/MyProj/Frank/frankified_build/./MyProj.app /Users/user/Desktop/mobile_hr_ios_svn/trunk/mobile_hr_ios/03-Code/new/MyProj/build/Debug-iphonesimulator/MyProj.app

ProcessPCH   /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/C/com.apple.Xcode.0/SharedPrecompiledHeaders/MyProj-Prefix-ghaenwxjeomtsdddtxghgmmdgysv/MyProj-Prefix.pch.pth MyProj/MyProj-Prefix.pch normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
cd /Users/user/Desktop/mobile_hr_ios_svn/trunk/mobile_hr_ios/03-Code/new/MyProj
setenv LANG en_US.US-ASCII
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/user/.rvm/bin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c-header -arch armv7 -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wduplicate-method-match -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -fexceptions -Wprotocol -Wdeprecated-declarations -g -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -mios-simulator-version-min=6.0 -I/Users/user/Desktop/svn/trunk/03-Code/new/MyProj/build/MyProj.build/Debug-iphonesimulator/MyProj.build/MyProj.hmap -I/Users/user/Desktop/vn/trunk/03-Code/new/MyProj/build/Debug-iphonesimulator/include -Idcmtk/include -Idcmtk/include/dcmtk -Idcmtk/include/dcmtk/config -Idcmtk/include/dcmtk/dcmdata -Idcmtk/include/dcmtk/dcmimage -Idcmtk/include/dcmtk/dcmimgle -Idcmtk/include/dcmtk/dcmjpeg -Idcmtk/include/dcmtk/dcmjpls -Idcmtk/include/dcmtk/dcmnet -Idcmtk/include/dcmtk/dcmpstat -Idcmtk/include/dcmtk/dcmqrdb -Idcmtk/include/dcmtk/dcmsign -Idcmtk/include/dcmtk/dcmsr -Idcmtk/include/dcmtk/dcmtls -Idcmtk/include/dcmtk/dcmwlm -Idcmtk/include/dcmtk/oflog -Idcmtk/include/dcmtk/ofstd -Idcmtk/include/dcmtk/openssl -Idcmtk/include/dcmtk/dcmdata/libi2d -Idcmtk/include/dcmtk/oflog/config -Idcmtk/include/dcmtk/oflog/helpers -Idcmtk/include/dcmtk/oflog/spi -I/usr/include/openssl -I/Users/user/Desktop/svn/trunk/03-Code/new/MyProj/build/MyProj.build/Debug-iphonesimulator/MyProj.build/DerivedSources/armv7 -I/Users/user/Desktop/svn/trunk/03-Code/new/MyProj/build/MyProj.build/Debug-iphonesimulator/MyProj.build/DerivedSources -F/Users/user/Desktop/svn/trunk/03-Code/new/MyProj/build/Debug-iphonesimulator --serialize-diagnostics /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/C/com.apple.Xcode.0/SharedPrecompiledHeaders/MyProj-Prefix-ghaenwxjeomtsdddtxghgmmdgysv/MyProj-Prefix.pch.dia -c /Users/user/Desktop/svn/trunk/03-Code/new/MyProj/MyProj/MyProj-Prefix.pch -o /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/C/com.apple.Xcode.0/SharedPrecompiledHeaders/MyProj-Prefix-ghaenwxjeomtsdddtxghgmmdgysv/MyProj-Prefix.pch.pth -MMD -MT dependencies -MF /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/C/com.apple.Xcode.0/SharedPrecompiledHeaders/MyProj-Prefix-ghaenwxjeomtsdddtxghgmmdgysv/MyProj-Prefix.pch.d
clang: error: invalid architecture 'arm' for deployment target '-mios-simulator-version-min=6.0'
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1

ProcessPCH++ /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/C/com.apple.Xcode.0/SharedPrecompiledHeaders/MyProj-Prefix-fcetjlzwprtljocwgscvlozrhdco/MyProj-Prefix.pch.pth MyProj/MyProj-Prefix.pch normal armv7 objective-c++ com.apple.compilers.llvm.clang.1_0.compiler
cd /Users/user/Desktop/svn/trunk/03-Code/new/MyProj
setenv LANG en_US.US-ASCII
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/opt/local/bin:/opt/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/Users/user/.rvm/bin"
    /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c++-header -arch armv7 -fmessage-length=0 -std=gnu++11 -stdlib=libstdc++ -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wno-non-virtual-dtor -Wno-overloaded-virtual -Wno-exit-time-destructors -Wduplicate-method-match -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-shorten-64-to-32 -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -Wno-arc-abi -Wno-c++11-extensions -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -fexceptions -Wprotocol -Wdeprecated-declarations -Winvalid-offsetof -g -fvisibility-inlines-hidden -Wno-sign-conversion -fobjc-abi-version=2 -fobjc-legacy-dispatch "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -mios-simulator-version-min=6.0 -I/Users/user/Desktop/svn/trunk/03-Code/new/MyProj/build/MyProj.build/Debug-iphonesimulator/MyProj.build/MyProj.hmap -I/Users/user/Desktop/svn/trunk/03-Code/new/MyProj/build/Debug-iphonesimulator/include -Idcmtk/include -Idcmtk/include/dcmtk -Idcmtk/include/dcmtk/config -Idcmtk/include/dcmtk/dcmdata -Idcmtk/include/dcmtk/dcmimage -Idcmtk/include/dcmtk/dcmimgle -Idcmtk/include/dcmtk/dcmjpeg -Idcmtk/include/dcmtk/dcmjpls -Idcmtk/include/dcmtk/dcmnet -Idcmtk/include/dcmtk/dcmpstat -Idcmtk/include/dcmtk/dcmqrdb -Idcmtk/include/dcmtk/dcmsign -Idcmtk/include/dcmtk/dcmsr -Idcmtk/include/dcmtk/dcmtls -Idcmtk/include/dcmtk/dcmwlm -Idcmtk/include/dcmtk/oflog -Idcmtk/include/dcmtk/ofstd -Idcmtk/include/dcmtk/openssl -Idcmtk/include/dcmtk/dcmdata/libi2d -Idcmtk/include/dcmtk/oflog/config -Idcmtk/include/dcmtk/oflog/helpers -Idcmtk/include/dcmtk/oflog/spi -I/usr/include/openssl -I/Users/user/Desktop/svn/trunk/03-Code/new/MyProj/build/MyProj.build/Debug-iphonesimulator/MyProj.build/DerivedSources/armv7 -I/Users/user/Desktop/svn/trunk/03-Code/new/MyProj/build/MyProj.build/Debug-iphonesimulator/MyProj.build/DerivedSources -F/Users/user/Desktop/svn/trunk/03-Code/new/MyProj/build/Debug-iphonesimulator --serialize-diagnostics /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/C/com.apple.Xcode.0/SharedPrecompiledHeaders/MyProj-Prefix-fcetjlzwprtljocwgscvlozrhdco/MyProj-Prefix.pch.dia -c /Users/user/Desktop/svn/trunk/03-Code/new/MyProj/MyProj/MyProj-Prefix.pch -o /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/C/com.apple.Xcode.0/SharedPrecompiledHeaders/MyProj-Prefix-fcetjlzwprtljocwgscvlozrhdco/MyProj-Prefix.pch.pth -MMD -MT dependencies -MF /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/C/com.apple.Xcode.0/SharedPrecompiledHeaders/MyProj-Prefix-fcetjlzwprtljocwgscvlozrhdco/MyProj-Prefix.pch.d
clang: error: invalid architecture 'arm' for deployment target '-mios-simulator-version-min=6.0'
Command /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1

** BUILD FAILED **

The following build commands failed:
ProcessPCH   /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/C/com.apple.Xcode.0/SharedPrecompiledHeaders/MyProj-Prefix-ghaenwxjeomtsdddtxghgmmdgysv/MyProj-Prefix.pch.pth MyProj/MyProj-Prefix.pch normal armv7 objective-c com.apple.compilers.llvm.clang.1_0.compiler
ProcessPCH++ /var/folders/zz/zyxvpxvq6csfxvn_n0000000000000/C/com.apple.Xcode.0/SharedPrecompiledHeaders/MyProj-Prefix-fcetjlzwprtljocwgscvlozrhdco/MyProj-Prefix.pch.pth MyProj/MyProj-Prefix.pch normal armv7 objective-c++ com.apple.compilers.llvm.clang.1_0.compiler
(2 failures)
     run  /usr/libexec/PlistBuddy -c 'Set :CFBundleIdentifier   yang.apps..MyProj.frankified' Info.plist from "./Frank/frankified_build/Frankified.app"
     run  /usr/libexec/PlistBuddy -c 'Set :CFBundleDisplayName Frankified' Info.plist from "./Frank/frankified_build/Frankified.app" 
```

有人可以帮我为 iPad 建立坦率吗？

# c# - 调试 Windows 8 应用不同版本

> ID：14053528
> 
> 赞同：0
> 
> 时间：2012-12-27T10:56:21.467
> 
> 标签：c#, windows-8, visual-studio-2012

我有一个在 Windows 8 商店中的应用程序。现在我正在发布该应用程序的下一个版本。由于我对代码进行了更改，因此我需要使用安装的先前版本对其进行调试。如果我通过电源外壳安装应用程序，则应用程序正在更新。如果我使用现有的先前版本应用程序安装新版本应用程序，则 Visual Studio 2012 将删除先前版本并重新安装它。那么如何在不删除 VS 2012 Express for windows 8 中的旧版本数据的情况下调试新版本呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T14:28:51.833

如果您增加应用程序包的版本号，则不会删除旧数据。您可以在创建应用程序包时手动设置版本号，或者让 Visual Studio 自动增加版本号（单击复选框选项）：

![设置包版本号](../Images/a611e0717bc07a965969161a836f8df8.png)

此外，您应该确保清除应用程序数据的构建选项未选中（图像中的最后一个选项）：

![清理应用数据的构建选项](../Images/abab2e66dd5d26075305ccee7fba551f.png)

# linux-device-driver - 仅支持两个的 Arm 板上有两个以上的 SPI 设备？

> ID：14053535
> 
> 赞同：2
> 
> 时间：2012-12-27T10:57:05.003
> 
> 标签：linux-device-driver, spi

我们其中一块板上的 Arm 处理器有一个带有两条片选线的 spi 端口。处理器的数据表中提到它可以控制最多两个 spi 设备。

是否可以将 GPIO 用作附加 spi 设备的从属选择？如何修改现有的库/设备驱动程序以支持此更改？

到目前为止，我在内核源代码中找到了一个文件，其中包含 SPI 端口引脚的地址。谁能告诉我应该朝哪个方向前进？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T12:45:08.480

如果你有足够的引脚，你可以 bitbang 整个 SPI 协议，并根据需要使用尽可能多的 CS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T21:41:59.960

你没有提到它是什么处理器。你有三种可能。

1.  如果处理器有`i/o mux`能力，请关闭 SPI 芯片选择功能。SPI 控制器会认为它已经断言了线路，但它不会对外。
2.  不要连接一个 SPI 片选。使用上拉/下拉进行 ESD 保护。
3.  `chip select`根据[Joachim Isaksson](https://stackoverflow.com/users/477878/joachim-isaksson)多路复用

在前两种情况下，将`GPIO`s 连接到附加设备的片选。`GPIO`在运行之前手动切换`spi_write()`等。这将允许控制器以比**位撞击**`SPI`更高的速率传输，并且是更好的系统设计。即，更低的功耗、更低的 CPU 使用率、更快的数据速率等。如果外设只是用于设置/启动，那么为了简单起见，**位碰撞**是有意义的。但是，如果您的主要操作依赖于 SPI 总线，您可以考虑这种解决方案。

 ****如果只有一个外设需要 SPI 进行设置**，并且**您拥有SPI `i/o mux`，则可以在设置期间禁用芯片选择功能，使用 GPIO 选择*设置外设，然后在**标准*系统操作`spi chip select`期间为其他外设重新启用。

 *使用 a`GPIO`不需要用户空间干预。驱动程序可以提供`call backs`在使用时设置 GPIO，因此`SPI`可以缓冲/排队命令，并且这些解决方案仍然有效。例如，[IMX`SPI`驱动程序](http://git.kernel.org/?p=linux/kernel/git/torvalds/linux.git;a=blob;f=drivers/spi/spi-imx.c;hb=HEAD)通过传递负片选编号来表示 GPIO id 来支持 GPIO 切换。

**注意：**某些 SPI 设备可能需要在 ;`chip select`之间切换`words`。什么都`word`适用于设备。某些控制器`chip select`在传输多个字时可能会保留断言。如果您使用 GPIO 手动选择设备，则需要正确执行此操作。我确信某些标准定义了这一点，但肯定有些设备不遵循标准。

**附录：**大多数驱动程序支持`GPIO`片选；通过一个负片选值。他们将调用 Linux`GPIO`函数。编写一个`GPIO`执行多路分解的处理程序。无需更改`SPI`驱动程序。*****

# git - 在不同的分支上修改提交

> ID：14053543
> 
> 赞同：2
> 
> 时间：2012-12-27T10:57:37.347
> 
> 标签：git

我有以下提交/分支的结构：

```
|
*   03dd257 - (HEAD, solutions) ...
|\  
| * 7976266 - (master) ...
* | 9ce9158 - ...
|/  
* d2a4d81 - ... 
```

我的流程是：

*   提交 d2a4d81（主）
*   创建分支解决方案
*   提交 9ce9158（解决方案）
*   提交 7976266（主）
*   将 master 合并到解决方案（commit 03dd257）
*   **修改 master 上的提交 7976266**

现在我的提交在大师和解决方案上有所不同。如何安全地更新分支解决方案上的提交 7976266？

这些都是本地更改，因此一旦我在本地解决此问题，推送应该没有问题。

我对解决方案分支有进一步的更改，所以我不能简单地重置为 9ce9158 并再次合并。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:17:07.057

If you do, merge commit will still point to old (not amended) commit, and your tree will look like this:

```
|   *  XXXXXXX - amended commit
*   |  03dd257 - (HEAD, solutions) ...
|\  |
| * | 7976266 - (old master) ...
* |/ 9ce9158 - ...
|/  
* d2a4d81 - ... 
```

What you might want to do is reset solutions branch back to before merge and do a new merge. If you haven't published anything yet (and since you amend stuff, you probably didn't), it's OK to do so.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:32:22.520

假设通过修改生成的新提交`7976266`是`7976266-v2`.

我想你也希望`7976266-v2`出现变化`solutions`，而不会使图表过于复杂。

首先，在以下位置创建一个`amend`分支`7976266-v2`：

```
git branch amend 7976266-v2 
```

然后'rebase'在和`7976266`之间变化`7976266-v2``solution`

```
git rebase --onto solutions 7976266 amend 
```

这应该在 之后创建一个新的提交`03dd257`，其中包含 和 之间的更改`7976266`，并且现在由分支`7976266-v2`指向。`amend`

```
 * sth_new - (amend)
|/
*   03dd257 - (solutions) ...
|\  
| * 7976266 - (master) ...
* | 9ce9158 - ...
|/  
* d2a4d81 - ... 
```

`amend`现在您可以随时合并`solutions`。

# ios - 在 iOS 6 上获取 Facebook 日历列表

> ID：14053549
> 
> 赞同：0
> 
> 时间：2012-12-27T10:58:04.227
> 
> 标签：ios, facebook-ios-sdk, ekeventkit

在遍历本机 iOS EKCalendars 列表时，有什么方法可以判断特定日历是来自 Facebook 的吗？您在本机 iOS 日历应用程序的“Facebook”部分中看到的那个。

对于 calendar.source.sourceType，我看到那些带有“type:EKCalendarTypeCalDAV”和“type:EKCalendarTypeBirthday”的日历，但这还不够，因为其他一些非 Facebook 日历可能具有相同的 sourceType。标题也与本机应用程序中的不同：名为“Calendar”的日历实际上被命名为“Facebook Events”。

这是日志：

```
// "Facebook Events" calendar
2012-12-27 12:19:30.357 [3335:907] Calendar: type:EKCalendarTypeCalDAV title:Calendar Source: title:CalDAV type:EKSourceTypeCalDAV
2012-12-27 12:19:30.367 [3335:1703] Event: Test event on Facebook

// "Birthdays" calendar
2012-12-27 12:19:30.443 [3335:907] Calendar: type:EKCalendarTypeBirthday title:Birthdays Source: title:Other type:EKSourceTypeBirthdays
2012-12-27 12:19:30.709 [3335:1703] Event: Friend's 1 Birthday
2012-12-27 12:19:30.710 [3335:1703] Event: Friend's 2 Birthday 
```

我不能使用 SDK 的 EKCalendarChooser，因为我需要自定义它的表格视图并查看其他一些事件源。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T11:22:30.237

正如我在对相关问题的[回答](https://stackoverflow.com/a/14661337/322548)中所写，如果不使用私有 API，则无法确定特定日历是否为 facebook 日历。

# python - Django - 用户计费平台/中间件，即跟踪费用和收费

> ID：14053552
> 
> 赞同：8
> 
> 时间：2012-12-27T10:58:14.723
> 
> 标签：python, django, payment-processing, billing

我正在编写一个网络应用程序，我想开始向我的用户收费。python/Django webapp 的推荐计费平台是什么？

我想要跟踪用户购买历史的东西，可以优雅地处理订阅购买、点菜项目、优惠券代码和退款，可以直接生成发票/收据，并且可以轻松与大多数支付处理器集成。如果它带有精美的管理界面，则可以加分。

我找到了这个[django-billing 项目](https://github.com/gabrielgrant/django-billing)，还有其他的吗？此外，您是依靠您的支付处理器来处理这些任务，还是您自己完成所有这些任务？

*注意：我不是在问使用什么支付处理器，而是问应该在他们的 webapp 本身上运行什么中间件/库。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T10:36:08.410

**[koalixcrm](https://github.com/scaphilo/koalixcrm)**也许是你可以开始的东西。

它提供了一些您需要的功能。它仍然处于 prealpha 阶段，但它已经为发票和报价提供 PDF 导出，已经包含一个用于订阅的插件。

也试试**[演示](https://github.com/scaphilo/koalixcrm/wiki)**

由于我是 koalixcrm 的开发人员，我非常有兴趣与您合作 - 也许我们可以合并我们的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-25T13:12:56.373

尚不清楚为什么 Django 社区还没有提出一个完整的计费系统，或者至少是一个通用的系统来开始工作。

有许多软件包可用于了解如何实现这样的平台：

[https://www.djangopackages.com/grids/g/payment-processing/](https://www.djangopackages.com/grids/g/payment-processing/)

# c++ - 数组运算符重载

> ID：14053553
> 
> 赞同：0
> 
> 时间：2012-12-27T10:58:19.707
> 
> 标签：c++, operator-overloading

我有A班和B班。

A类有一些领域。B类是这样的：

```
class B {
public:
    A* operator[]( int id ) {
        return m_field.at( id );
    }
    /* also tried this one, but there are the same errors
    A*& operator[]( int id ) {
        return m_field.at( id );
    }
    */
private:
    vector<A*> m_field;
}; 
```

为什么我在执行时遇到错误：

```
B* B_instance = new B();
B_instance[some_int]->some_field_from_A; 
```

错误是：

> 错误 C2819：类型 'B' 没有重载成员 'operator ->'
> 
> 错误 C2039：“some_field_from_A”：不是“B”的成员

为什么我需要 -> 运算符重载以及它应该是什么样子？这对我来说没有意义。

我正在使用 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T11:06:41.653

索引运算符适用于类型`B`，而不是类型`B *`。因此，要使用索引运算符，您需要首先取消引用您的指针（或根本不使用）：

```
(*B_instance)[some_int]... 
```

错误的原因是指针可以被索引，因为它们能够表示数组，如下例所示：

```
int arr[2] = {0, 1};
int *p = arr; //array to pointer conversion
p[1] = 2; // now arr is {0, 2} 
```

因此，当您索引 a 时`B *`，它会返回`B`最有可能超出想象数组范围的 a。`B`然后，当它需要一个点运算符时，您在该对象上使用箭头运算符。无论哪种方式，如果您使用指针，取消引用它，然后索引它，然后使用箭头。

# javascript - 打印旋转的 css 太短（IE / FF）

> ID：14053556
> 
> 赞同：0
> 
> 时间：2012-12-27T10:58:38.343
> 
> 标签：javascript, css, printing, cross-browser

我正在尝试旋转一张宽表（工作时间表，请参见下面的示例图片）以进行打印。我这样做的原因是因为我希望表格可以延伸到多个页面上，因此当您将其打印在纸上时，您可以将不同的纸张放在一起并获得 1 个大小合适、可读的表格/时间表。现在我遇到的问题不是旋转本身，而是尝试打印表格时的页数。它没有将表格扩展到下一页，而是被截断，因此您只会看到顶部。现在谷歌浏览器的打印效果很好，它可以像我想要的那样将表格分布在 2 或 3 页上。我遇到了麻烦，但是在 Firefox 或 IE 中得到了相同的结果。我正在使用 CSS`transform:rotate`方法来旋转正文/时间表并在我的浏览器中获得想要的结果（见下文）。

```
transform:rotate(90deg);
-ms-transform:rotate(90eg);
-moz-transform:rotate(90deg);
-webkit-transform:rotate(90deg);
-o-transform:rotate(90deg); 
```

我尝试向表格添加边距、填充，但它只会在页面周围移动表格，而不是将其扩展到下一页。添加溢出 ( `body *{ overflow:visible !important; }`) 只会缩小正文，使其适合 1 页。

有没有办法在多页上打印这个宽表，以便 FF 和 IE 仍然可读？

提前致谢。

*示例图像（通常在时间块中有文本）：（* ![示例图片](../Images/7575b3e58fc76d75663d78739445b858.png) 横向模式下的正常打印不会这样做，因为文本变得太小而无法阅读。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:09:53.803

当您使用 css 旋转时，实际尺寸不会改变。

因此，如果您有一个 100 x 20 像素的块并旋转它。浏览器仍会看到 100 x 20 像素的块，而您会看到 20 x 100 的块。添加边距和填充不会改变这一点，您需要修改高度和宽度。

我想最简单的方法是添加一个与表格宽度相同高度的不可见 div，反之亦然。您可以为此使用 javascript。

# php - 如何在 FuelPHP 中设置错误通知

> ID：14053560
> 
> 赞同：2
> 
> 时间：2012-12-27T10:59:01.687
> 
> 标签：php, error-handling, fuelphp

当我想将本地开发发布到生产环境时遇到问题，这个问题与错误消息处理有关。当我使用开发环境访问我的站点时，可以显示错误，但在生产环境中不应显示错误。

我试图`/fuel/app/config/config.php`通过更改`errors=>false`并引用本文档[http://fuelphp.com/docs/general/configuration.html](http://fuelphp.com/docs/general/configuration.html)来配置它，但是当我通过在我的数据库查询中产生错误进行测试时它仍然没有改变.

我也尝试在 index.php 中将 error_reporting 更改为 0 并将 display_errors 更改为 0，但仍然无法解决我的问题...

```
error_reporting(0);//error_reporting(-1); 
ini_set('display_errors', 0);//ini_set('display_errors', 1); 
```

如何在 FuelPHP 的生产环境中禁用错误​​消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T00:50:58.673

我认为这里的问题是 OP 使用工作“环境”，而他的意思是“服务器”。

FuelPHP 支持多种环境，“开发”是默认设置。在开发模式下，所有错误消息都被启用。如果您将代码部署到另一台服务器，但未设置 FuelPHP 环境，您的应用程序也会在该服务器上以开发模式运行。

所以这里的解决方案是在生产服务器上以生产模式运行FuelPHP。您可以通过设置环境变量 FUEL_ENV 来做到这一点。最简单的是您的虚拟主机定义：

```
setEnv FUEL_ENV production 
```

见[http://fuelphp.com/docs/general/environments.html](http://fuelphp.com/docs/general/environments.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T03:58:37.253

我认为 FuelPHP 具有自动错误处理功能，我正在由 Development 测试一个错误，即显示带有错误描述的错误（类、行等），我正在通过产生错误进行测试，即显示错误但使用 exeptionist 500并且不显示错误的详细信息。

并确保我在 bootstrap.php 上添加此代码

```
// Select "Display Error" each the Environment
if (Fuel::$env === Fuel::DEVELOPMENT) {
    ini_set('display_errors', true);
} else {
    ini_set('display_errors', false);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T18:39:06.170

`/fuel/app/bootstrap.php`您可以通过编辑文件来编辑是否显示错误。在那里你会发现这行代码：

```
Fuel::$env = (isset($_SERVER['FUEL_ENV']) ? $_SERVER['FUEL_ENV'] : Fuel::PRODUCTION); 
```

在上面的代码之后添加此代码：

```
if (Fuel::$env === Fuel::PRODUCTION) 
{
    //disable all errors from being shown in the production server
    error_reporting(0);
    ini_set('display_errors', 0);
} 
else
{
    //all environments other than production should display errors
    error_reporting(-1);
    ini_set('display_errors', 1);
} 
```

**注意：** 虽然 display_errors 可以在运行时设置（使用 ini_set()），但如果脚本有致命错误，它不会有任何影响。这是因为未执行所需的运行时操作。来源：[php.net](http://www.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)

此外，这可能很重要。我正在使用 Apache 配置来确定我正在运行的环境。这意味着我`.htaccess`使用以下代码设置了一个文件：

```
SetEnv FUEL_ENV production 
```

我正在运行 FuelPHP 1.7

# iphone - 如何取消擦除已擦除的 UIImage？

> ID：14053563
> 
> 赞同：3
> 
> 时间：2012-12-27T10:59:24.723
> 
> 标签：iphone, objective-c, ios, uiimageview, uiimage

我正在我的 PanGesture 中尝试使用图像擦除代码。我正在使用下面的代码：

```
 UIImage * image  = [UIImage imageNamed:@"326d4fb72362a2e44659141cadfc4977.jpg"];
 holderView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 235)];
 imgForeground = [[UIImageView alloc] initWithFrame:[holderView frame]];
 [imgForeground setImage:image];
 [holderView addSubview:imgForeground];

 UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
 [panRecognizer setMinimumNumberOfTouches:1];
 [panRecognizer setMaximumNumberOfTouches:1];
 [panRecognizer setDelegate:self];
 [holderView addGestureRecognizer:panRecognizer];
 [self.view addSubview:holderView]; 
```

然后我在这里处理这个：

```
 -(void)move:(id)sender {

    CGPoint currentPoint;
    if([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateBegan){

        lastPoint =  [sender locationInView:imgForeground];
        lastPoint.y -=20;
    }
    else{

        currentPoint = [sender locationInView:imgForeground];;
        currentPoint.y -=20;
    }

    UIGraphicsBeginImageContext(imgForeground.frame.size);
    [imgForeground.image drawInRect:CGRectMake(imgForeground.frame.origin.x, imgForeground.frame.origin.y, imgForeground.frame.size.width, imgForeground.frame.size.height)];

    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetLineCap(context,kCGLineCapRound); //kCGImageAlphaPremultipliedLast);
    CGContextSetLineWidth(context, 10);
    CGContextSetRGBStrokeColor(context, 0, 0, 0, 1.0);
    CGContextSetBlendMode(UIGraphicsGetCurrentContext(), kCGBlendModeClear);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(context, lastPoint.x, lastPoint.y);
    CGContextStrokePath(context);
    imgForeground.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

 } 
```

如何取消擦除相同的图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T05:41:56.867

经过长时间的搜索后，我在我的应用程序中遇到了同样的问题，我找到了解决这个问题的简单方法。

我只是使用了触摸方法`UIViewController`

以下是我的方法，

**代码：-**

```
 #pragma mark touches stuff...

 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
        UITouch *touch = [touches anyObject];
        lastTouch = [touch locationInView:self.editedImageView];
    }

    - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
        UITouch *touch = [touches anyObject];
        currentTouch = [touch locationInView:self.editedImageView];

        CGFloat brushSize;
        if (isEraser) 
        {
            brushSize=eraser;
        }
        else
        {
            brushSize=mark;
        }
        CGColorRef strokeColor = [UIColor whiteColor].CGColor;

        UIGraphicsBeginImageContext(self.editedImageView.frame.size);
        CGContextRef context = UIGraphicsGetCurrentContext();
        [self.editedImageView.image drawInRect:CGRectMake(0, 0, self.editedImageView.frame.size.width, self.editedImageView.frame.size.height)];
        CGContextSetLineCap(context, kCGLineCapRound);
        CGContextSetLineWidth(context, brushSize);
        if (isEraser) {

            CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), [UIColor colorWithPatternImage:self.im].CGColor);
        }  
        else
        {
            CGContextSetStrokeColorWithColor(context, strokeColor);
            CGContextSetBlendMode(context, kCGBlendModeClear); 
        }
        CGContextBeginPath(context);
        CGContextMoveToPoint(context, lastTouch.x, lastTouch.y);
        CGContextAddLineToPoint(context, currentTouch.x, currentTouch.y);
        CGContextStrokePath(context);
        self.editedImageView.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        lastTouch = [touch locationInView:self.editedImageView];
    }

    - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
    {

    } 
```

**输入：**

```
self.editedImageView.image = "Your Custom image";

self.im    =   "Your Custom image"; 
```

**您的问题的简单解决方案是：-**

```
CGContextSetStrokeColorWithColor(UIGraphicsGetCurrentContext(), [UIColor colorWithPatternImage:self.im].CGColor); 
```

**笔记：**

这不会取消它再次绘制图像

**更新：-**

```
 self.im    =   "Your Custom image"; 
```

这将是这样的......

```
-(void)eraserConfigure
{
    UIImageView *resizeImage=[[[UIImageView alloc]initWithImage:editedImage]autorelease];
    /*UIImage */self.im=[UIImage imageFromView:resizeImage scaledToSize:CGSizeMake(self.editedImageView.frame.size.width, self.editedImageView.frame.size.height)];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:49:35.220

每次绘图操作后保存一个**临时图像。**
您应该保存临时文件并限制撤消操作的数量。

# tomcat - 尝试使用 JPA 从数据库读取数据时出现 java.lang.NullPointerException

> ID：14053567
> 
> 赞同：0
> 
> 时间：2012-12-27T10:59:47.973
> 
> 标签：tomcat, jpa, persistence

我是学生，我有一个嵌入了 jbpm 5 框架的 Web 应用程序（这个问题不是关于任何 jbpm 5 相关主题，而是关于 JPA 和 MySql 数据库上 jbpm 类的持久性）。此 Web 应用程序应在配置了 Bitronix 事务管理器的 tomcat 7 上运行。JPA 用于使用 2 个 persistence-units 来持久化 jbpm 相关类，这里是 persistance.xml ：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<persistence version="1.0" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd
http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_1_0.xsd" xmlns:orm="http://java.sun.com/xml/ns/persistence/orm" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/persistence">
     <persistence-unit name="org.jbpm.persistence.jpa" transaction-type="JTA">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:comp/env/jdbc/testDS1</jta-data-source>
        <class>org.drools.persistence.info.SessionInfo</class>
        <class>org.jbpm.persistence.processinstance.ProcessInstanceInfo</class>
        <class>org.jbpm.persistence.processinstance.ProcessInstanceEventInfo</class>
        <class>org.drools.persistence.info.WorkItemInfo</class>
        <class>org.jbpm.process.audit.ProcessInstanceLog</class>
        <class>org.jbpm.process.audit.NodeInstanceLog</class>
        <class>org.jbpm.process.audit.VariableInstanceLog</class>       

        <class>org.jbpm.task.Task</class>
        <class>org.jbpm.task.Comment</class>
        <class>org.jbpm.task.Attachment</class>
        <class>org.jbpm.task.I18NText</class>
        <class>org.jbpm.task.SubTasksStrategy</class>
        <class>org.jbpm.task.Deadline</class>
        <class>org.jbpm.task.Escalation</class>
        <class>org.jbpm.task.Reassignment</class>
        <class>org.jbpm.task.Notification</class>
        <class>org.jbpm.task.BooleanExpression</class>
        <class>org.jbpm.task.User</class>
        <class>org.jbpm.task.PeopleAssignments</class>

        <properties>

             <!-- H2 dialect  -->

            <!--<property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>-->

             <!-- Oracle dialect   
               <property name="hibernate.dialect" value="org.hibernate.dialect.OracleDialect"/> 
              -->
             <!-- mysql dialect --> 

            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>

            <property name="hibernate.connection.autocommit" value="false"/>
            <property name="hibernate.max_fetch_depth" value="3"/>
            <property name="hibernate.hbm2ddl.auto" value="update" />
            <property name="hibernate.show_sql" value="false" />
            <property name="hibernate.transaction.manager_lookup_class" value="org.hibernate.transaction.BTMTransactionManagerLookup"/>
        </properties>

    </persistence-unit>
    <persistence-unit name="org.jbpm.task">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>

        <class>org.jbpm.task.Attachment</class>
        <class>org.jbpm.task.Content</class>
        <class>org.jbpm.task.BooleanExpression</class>
        <class>org.jbpm.task.Comment</class>
        <class>org.jbpm.task.Deadline</class>
        <class>org.jbpm.task.Comment</class>
        <class>org.jbpm.task.Deadline</class>
        <class>org.jbpm.task.Delegation</class>
        <class>org.jbpm.task.Escalation</class>
        <class>org.jbpm.task.Group</class>
        <class>org.jbpm.task.I18NText</class>
        <class>org.jbpm.task.Notification</class>
        <class>org.jbpm.task.EmailNotification</class>
        <class>org.jbpm.task.EmailNotificationHeader</class>
        <class>org.jbpm.task.PeopleAssignments</class>
        <class>org.jbpm.task.Reassignment</class>
        <class>org.jbpm.task.Status</class>
        <class>org.jbpm.task.Task</class>
        <class>org.jbpm.task.TaskData</class>
        <class>org.jbpm.task.SubTasksStrategy</class>
        <class>org.jbpm.task.OnParentAbortAllSubTasksEndStrategy</class>
        <class>org.jbpm.task.OnAllSubTasksEndParentEndStrategy</class>

        <class>org.jbpm.task.User</class>

        <class>org.drools.persistence.info.SessionInfo</class>
        <class>org.jbpm.persistence.processinstance.ProcessInstanceInfo</class>
        <class>org.jbpm.persistence.processinstance.ProcessInstanceEventInfo</class>
        <class>org.drools.persistence.info.WorkItemInfo</class>

        <properties>
             <!-- sample H2 configuration -->
             <!--
            <property name="hibernate.dialect" value="org.hibernate.dialect.H2Dialect"/>
            <property name="hibernate.connection.driver_class" value="org.h2.Driver"/>
            <property name="hibernate.connection.url" value="jdbc:h2:mem:droolsflow" />
            <property name="hibernate.connection.username" value="root"/>
            <property name="hibernate.connection.password" value="sdfsdf"/> -->

            <!-- Sample Oracle Configuration  

             <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect"/>
            <property name="hibernate.connection.driver_class" value="oracle.jdbc.OracleDriver"/>
            <property name="hibernate.connection.url" value="jdbc:oracle:thin:@oraclehost:1521:jbpm5" />
            <property name="hibernate.connection.username" value="user"/>
            <property name="hibernate.connection.password" value="password"/>
           --> 

             <!-- Sample mysql Configuration --> 

             <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/jbpm5webexpl" />
            <property name="hibernate.connection.username" value="root"/>
            <property name="hibernate.connection.password" value="sdfsdf"/>

            <property name="hibernate.connection.autocommit" value="false" />
            <property name="hibernate.max_fetch_depth" value="3"/>
            <property name="hibernate.hbm2ddl.auto" value="create" />
            <property name="hibernate.show_sql" value="false" />
        </properties>
    </persistence-unit>
</persistence> 
```

持久性工作得很好，我让数据库填充了数据。所以现在我想从该数据中读取数据，特别是从一个名为“organizationalentity”的表中读取，该表是由数据库上的持久性工作生成的，即使该表对应的 java 类没有在persistance.xml上声明（这对我来说很奇怪，但表是创建的并包含数据！！但是当我遇到异常时我自己做了，但这不是解决方案）。该表的 java 类实际上存在于一个 maven 引用的 jar 中，而不是我自己编写的包中（这就是我无法在其上添加一些 NamedQueries 的原因，因为这个类是一个 .class 而不是.java ..)

所以我在我的类路径中添加了这个新的 OrganizationalEntityDao.java 类：

```
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

import org.jbpm.task.OrganizationalEntity;

public class OrganizationalEntityDao {

    @PersistenceContext(unitName = "org.jbpm.task")
    static EntityManager em;

        public static OrganizationalEntity readById(int id) {
        return em.find(OrganizationalEntity.class,id); 
    }
} 
```

当我运行我的应用程序时，我收到了这个错误：

```
javax.el.ELException: /index.xhtml @142,119 listener="#{processBean.requestPage}": java.lang.NullPointerException
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:111)
    at com.sun.faces.facelets.tag.jsf.core.AjaxBehaviorListenerImpl.processAjaxBehavior(AjaxHandler.java:450)
    at javax.faces.event.AjaxBehaviorEvent.processListener(AjaxBehaviorEvent.java:113)
    at javax.faces.component.behavior.BehaviorBase.broadcast(BehaviorBase.java:106)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:760)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1770)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NullPointerException
    at entities.dao.OrganizationalEntityDao.readById(OrganizationalEntityDao.java:20)
    at entities.beans.ProcessBean.requestPage(ProcessBean.java:121)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:264)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    ... 27 more 
```

我应该说我想知道在 tomcat 上使用 JPA 来持久化实体（作为 EJB 工作）。我没有使用 JDBC 来完成这项工作，因为 JPA 已经被使用了。伙计们，有什么想法吗？干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:19:20.417

> 原因：entities.beans.ProcessBean.requestPage(ProcessBean.java:121) 的 entity.dao.OrganizationalEntityDao.readById(OrganizationalEntityDao.java:20) 的 java.lang.NullPointerException

你的代码坏了。OrganizationalEntityDao.java 的第 20 行是什么？我怀疑你会找到一个潜在的 NPE——你遇到的那个。

# knockout.js - knockoutjs subscribe 方法被调用了 2 次

> ID：14053571
> 
> 赞同：0
> 
> 时间：2012-12-27T11:00:11.560
> 
> 标签：knockout.js

在 knockoutjs subscribe 方法中，我还在 subscribe 方法中设置了属性的值，这就是为什么该方法被调用 2 次，第一次是在 UI 中更改值时，第二次是在 subscribe 方法中更改值时。

任何人都知道如何避免这种情况。

这是我的示例代码：

```
var ViewModel = function(first) {
    var self = this;
    self.firstName = ko.observable(first);
    self.firstName.subscribe(function(newValue) {
        alert(newValue);
        self.firstName(newValue.toUpperCase());       
    });

}; 
```

也放到 jsfiddle [http://jsfiddle.net/ndkhoiits/4ABuq/](http://jsfiddle.net/ndkhoiits/4ABuq/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:07:13.543

在您的情况下，您可能需要一个带有 getter 和 setter 的计算 observable

```
var ViewModel = function(first) {
    var self = this;
    self.firstName = ko.observable(first);
    self.firstNameForView = ko.computed({        
        read: function () {            
            return self.firstName();
        },        
        write: function (value) {            
            self.firstName(value.toUpperCase());
        },        
        owner: this    
    });
}; 
```

现在在数据绑定中使用 firstNameForView。

# grails - 使用用户名作为电子邮件，Spring Security UI 插件

> ID：14053572
> 
> 赞同：2
> 
> 时间：2012-12-27T11:00:14.537
> 
> 标签：grails, spring-security, grails-plugin, grails-2.0, grails-controller

我将 Spring Security 插件与 Spring Security UI 插件结合使用。

它们都像魅力一样工作，但我的问题是我不希望我的用户拥有用户名，而是他/她应该使用电子邮件作为用户名。

所以在注册阶段我尝试从注册页面中删除用户名并设置

```
newUser.username = params.email 
```

这样插件仍然可以访问变量用户名，但这给了我验证错误，我只是想不出解决它的方法。

有任何想法吗？有没有人做过类似的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T13:33:24.093

您可以修改 spring security 使用的默认 User 字段

在您的**Config.groovy 中**添加以下内容

> grails.plugins.springsecurity.userLookup.usernamePropertyName = 'XXX'

其中 XXX 是要使用的用户实体的字段

[您可以在此处](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/single.html#4.1%20Person%20Class)检查配置属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T18:38:51.090

我最近通过将视图和控制器从 spring 安全插件复制到我的 grails-app 并更新视图以将 emailAddress 显示为与用户名相反来完成此操作。我还在用户域类中用 emailAddress 替换了 username 属性。确保按如下方式更新约束：

```
static constraints = {
    emailAddress email: true, blank: false, unique: true
    password blank: false, password: true
} 
```

dimcookies[的](https://stackoverflow.com/users/1263838/dimcookies)建议是正确的并且适用于旧版本的 Grails，新的语法配置，至少对于 Grails 2.3.1，是：

`grails.plugin.springsecurity.userLookup.usernamePropertyName = 'emailAddress'`

# css - 稳定垂直文本节奏的最佳方法是什么？

> ID：14053573
> 
> 赞同：-1
> 
> 时间：2012-12-27T11:00:20.900
> 
> 标签：css, layout, sass, vertical-rhythm

我听说相对单位比绝对单位好，但有时浏览器会将其舍入错误并且很难计算。你知道任何可以提供帮助的工具吗？

我使用了 SASS/指南针。这很好而且很容易，但并不完美……</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:24:38.120

根据评论，“垂直文本节奏”似乎是指线网格。线网格在 CSS 中通常被忽略，主要是因为它主要与印刷媒体和多列文本布局相关。基本上，使事物对齐线网格的方法是在垂直方向上使用一致的大小，使用相同的单位。例如，如果您以单位设置行高，则也`em`以这些单位设置高度和垂直边距。要使图像适合线网格，请将其包装在具有`em`单位高度的容器中。`px`或者，以单位进行所有垂直尺寸调整。

确实，舍入可能会导致问题，因为`em`尺寸最终会转换为像素。因此，如果您将行高设置为`1.3em`并将图像容器高度设置为`3.9em`，则后者产生的像素可能不会正好是前者的 3 倍，而是少一个像素或多一个像素。如果这很重要并且您考虑使用像素，请记住 CSS 像素不必对应于设备中的物理像素。

在[CSS Line Grid Module](http://dev.w3.org/csswg/css-line-grid/)中，目前仅作为编辑草稿存在，有使用真实线网格的属性。它们已在 Chrome 中部分实现，带有`-webkit-`前缀。如果需要线网格，添加尝试将内容捕捉到网格中的代码几乎没有什么坏处，并且可以在 Chrome 中这样做：

```
body {
  line-grid: yourNameForLineGrid;
  line-snap: baseline;
  -webkit-line-grid: yourNameForLineGrid;
  -webkit-line-snap: baseline;
} 
```

# javascript - 使用 JQuery/Javascript 进行水平滚动

> ID：14053580
> 
> 赞同：3
> 
> 时间：2012-12-27T11:01:02.500
> 
> 标签：javascript, jquery, html, css

我想知道是否有任何可用于水平滚动网站的开源免费脚本。我使用[了这个](http://flesler.blogspot.in/2007/10/jqueryscrollto.html)脚本，但它在 IE 中运行时出现问题。

有人可以建议任何类似于[该](http://www.techfest.org/)网站的脚本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:04:18.510

一堆不同的 javascript 库提供了很多这样的小部件。

*   [GWT](http://code.google.com/webtoolkit/)
*   [小唯](http://developer.yahoo.com/yui/)
*   [ExtJS](http://www.extjs.com/)
*   [原型/Scriptaculous](http://script.aculo.us/)
*   上面 FacilityDerek 发布的 JSMadeEasy。

看看这些[jQuery](http://www.jquery.com)脚本：

*   第一个是滚动菜单：[使用 CSS 和 jQuery 制作的水平滚动菜单](http://valums.com/scroll-menu-jquery/)Example [here](http://valums.com/wp-content/uploads/2009/02/menu/final.htm)

*   第二个是滚动窗格[jScrollHorizo​​ntalPane](http://plugins.jquery.com/project/jscrollhorizontalpane)示例[here](http://threeformed.com/labs/jScrollHorizontalPane/examples/basicScroller.html)

*   这是一个也使用 jQuery 的更简单的方法：[simplyScroll v1](http://logicbox.net/jquery/simplyscroll/horizontal.html)

*   如果您想要的更多是新闻自动收报机，您可能会觉得这很有趣：[liScroll（一个 jQuery News Ticker made easy）1.0](http://www.gcmingati.net/wordpress/wp-content/lab/jquery/newsticker/jq-liscroll/scrollanimate.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T11:04:34.020

[jScrollpane](http://jscrollpane.kelvinluck.com/)可以解决问题。是跨浏览器。

# java - 从字符串中获取整数值并将其加倍

> ID：14053584
> 
> 赞同：1
> 
> 时间：2012-12-27T11:01:18.330
> 
> 标签：java

我得到一个由数字和一些文本组成的字符串，例如；"23 test", "600 tests test" 字符串总是以数字开头，但没有设定长度。我如何获得数值并将其加倍？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T11:03:59.163

```
String example = "600 test";
return Double.parseDouble ( example.substring ( 0, example.indexOf(" "))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:05:51.330

在空间上拆分，取第 0 个索引的值，将其转换为整数并将值加倍

```
String s = "23 test";
Integer.parseInt(s.split(" ")[0]) * 2 
```

请确保所有字符串都遵循相同的格式，否则将出现 numberFormatException

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:11:59.650

我会做以下事情。

//假设数字后面总是有一个空格。可以说 String string = "23 test";

String stringArray = string.split("");

字符串编号 = stringArray[0];

System.out.print(Integer.parseInt(number)*2);

# printing - 如何将文本文件发送到打印机

> ID：14053586
> 
> 赞同：1
> 
> 时间：2012-12-27T11:01:27.287
> 
> 标签：printing, fingerprint, printers, intermec

正如我在一些指纹手册中所读到的，我们可以将文本文件发送到打印机。意味着我们可以在文本编辑器中编写程序，并使用通信程序使用一些传输命令将整个程序作为文本文件发送到打印机。因为在我的主机中，在 D:/ 中有一个名为 myfile.txt 的文件，其中包含闲置数据

```
10 PRPOS 200,200
20 DIR 3
30 ALIGN 5
40 PRIMAGE “GLOBE.1”
50 PRINTFEED
RUN 
```

如何将此文件发送到打印机并执行打印图像的说明。请给我一些代码参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T21:36:37.887

有几种方法可以从命令行执行此操作。例如：

```
type foo.txt > lpt1: 
```

或者

```
copy foo.txt lpt1: 
```

或者

```
print foo.txt 
```

或者

```
notepad /p foo.txt 
```

如果您需要以编程方式执行此操作，您可以使用 system() 函数或 CreateProcess() 执行任何这些命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T02:55:49.353

如果您在 Intermec 手持设备上并且连接到蓝牙打印机，您应该能够打开 COM6 的串行端口并发送文件。什么编程语言？那里应该有很多串行端口通信代码示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-11T08:47:33.700

我对 Intermec PM4i 标签打印机的体验就像坐过山车一样，但我知道我有一个可以工作的应用程序。

我通过通用文本驱动程序尝试了 Windows 打印机管道。它确实可以在记事本中使用，但很少有角落案例。

直接从记事本打印效果很好，直到我尝试了带有很长文本行的 QRCODE 图像。图像没有打印出来。将 qrcode 文本制作为简短的几个字符，并且相同的脚本运行良好。

```
INPUT OFF
NASC 1252
BF OFF
FT "Swiss 721 Bold BT",12,0,100 
PP 50,500:PT "Text line goes here"
PP 400,400:AN 7:BARSET "QRCODE",1,1,7,2,4
PB "ABC123 aabbcc....very long text goes here...I mean about 200 chars or more"
PRINTFEED 
```

就像记事本将文本剪切到右侧边框并且命令字符串被破坏了。我做了一个打印首选项 A3-landscape，它接受更长的文本，但仍然不足以满足所有用例。

所有打印机都有一个物理最大打印宽度，但不应在指纹/直接协议脚本文件中考虑它。毕竟，我们不是按原样打印此文本，而是向打印机提交命令。

我的解决方案是创建 Java 应用程序，它打开一个原始 TCP 套接字到 11.22.33.44:9100 地址并写入文本行，这些行以 NL(#10) 终止。工作正常。我做的另一个帮助工具是 Delphi app.exe 从 Windows 打印机对象读取 IP 地址。我可以从 Excel 应用程序“直接”提交标签打印输出。

*   最终用户编辑 Excel 数据行并单击打印标签按钮
*   vba 宏使用 ${FIELD1} 查找和替换替换来解析指纹模板文件
*   文件被写入 %wintemp%/intermec_script.txt 文件夹
*   调用 app.exe 读取用户选择的打印机的 IP 地址
*   调用 java 应用程序将 intermec_script.txt 提交到 IP:PORT 套接字

我应该在 Delphi 中创建相同的套接字提交应用程序以删除 javavm 依赖项，但这个解决方案对于我的用例来说更快。我比我的 Delphi 技能水平更熟悉 Java。

# java - 如何解析以 FHS 开头的 HL7 消息

> ID：14053587
> 
> 赞同：1
> 
> 时间：2012-12-27T11:01:29.977
> 
> 标签：java, xml-parsing, hl7, hapi

如何解析以 FHS 开头的 HL7 消息为 XML：

```
FHS|^~\&|Medical-Objects|Eli MOA Test Cap
BHS|^~\&|Medical-Objects|Eli MOA Test Cap
MSH|^~\&|MODemoSoftware|Eli MOA Test Cap^51675B57-9C95-4278-B52E-3FE5EEB6B3EE^GUID|||20121127180300|Eli MOA Test Cap (Capricorn)|ORU^R01|201211271803520050|P|2.3.1|||||||en
PID|1|HB117056|ABC123^^^MODemo^MC~401114835T^^^^PEN~401114835T||TEST^Patient||20010101|F||4^Non-indigenous|10/102 Wises Road^^Maroochydore^^4558||0754566000
PV1|1||AE\R\HBH^^^HBH&Medical Objects Demo Hospital&MODemoSoftware|||||0000000Y^REFERRING^Provider^^^DR^^^AUSHICPR^L^^^UPIN|UP3123000QW^CONSULTING^Provider^^^DR^^^AUSHICPR^L^^^UPIN
ORC|RE|589113676^MODemoSoftware|589113676^Eli MOA Test Cap^51675B57-9C95-4278-B52E-3FE5EEB6B3EE^GUID||IP||^^^20121127^^URGENT|||||0000000Y^REFERRING^Provider^^^DR^^^AUSHICPR^L^^^UPIN 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:12:32.867

首先，您的消息必须以起始段（FHS 和 MSH）开头 - 因此它可以被识别为两条消息。

不幸的是，对于基本的 HAPI 库，这是不可能的，因为 HAPI 不知道 FHS 段。当您使用[HAPI TestPanel](http://hl7api.sourceforge.net/hapi-testpanel/)时，您会非常清楚地看到结果：

![在此处输入图像描述](../Images/c39721cb4152149e9bc84aaca84ff794.png)

当您切换到 XML 视图时 - HAPI 能够转换 ORU 消息（从 MSH 开始），但第一行 (FHS) 仍然存在。

解决方案 A：（如果您无法修改源 HL7）您自己将“FHS”解析为您想要的 XML 格式。然后您可以使用 HAPI 为您转换其余部分。

解决方案 B：更改 HL7 文件并在末尾添加您的段。然后 HAPI 对其进行转换。HL7 示例：

```
MSH|^~\&|MODemoSoftware|Eli MOA Test Cap^51675B57-9C95-4278-B52E-3FE5EEB6B3EE^GUID|||20121127180300|Eli MOA Test Cap (Capricorn)|ORU^R01|201211271803520050|P|2.3.1|||||||en
PID|1|HB117056|ABC123^^^MODemo^MC~401114835T^^^^PEN~401114835T||TEST^Patient||20010101|F||4^Non-indigenous|10/102 Wises Road^^Maroochydore^^4558||0754566000
PV1|1||AE\R\HBH^^^HBH&Medical Objects Demo Hospital&MODemoSoftware|||||0000000Y^REFERRING^Provider^^^DR^^^AUSHICPR^L^^^UPIN|UP3123000QW^CONSULTING^Provider^^^DR^^^AUSHICPR^L^^^UPIN
ORC|RE|589113676^MODemoSoftware|589113676^Eli MOA Test Cap^51675B57-9C95-4278-B52E-3FE5EEB6B3EE^GUID||IP||^^^20121127^^URGENT|||||0000000Y^REFERRING^Provider^^^DR^^^AUSHICPR^L^^^UPIN
FHS|Medical-Objects|Eli MOA Test Cap
BHS|Medical-Objects|Eli MOA Test Cap 
```

XML 结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<ORU_R01 xmlns="urn:hl7-org:v2xml">
    <MSH>
        <MSH.1>|</MSH.1>
        <MSH.2>^~\&amp;</MSH.2>
        <MSH.3>
            <HD.1>MODemoSoftware</HD.1>
        </MSH.3>
        <MSH.4>
            <HD.1>Eli MOA Test Cap</HD.1>
            <HD.2>51675B57-9C95-4278-B52E-3FE5EEB6B3EE</HD.2>
            <HD.3>GUID</HD.3>
        </MSH.4>
        <MSH.7>
            <TS.1>20121127180300</TS.1>
        </MSH.7>
        <MSH.8>Eli MOA Test Cap (Capricorn)</MSH.8>
        <MSH.9>
            <MSG.1>ORU</MSG.1>
            <MSG.2>R01</MSG.2>
        </MSH.9>
        <MSH.10>201211271803520050</MSH.10>
        <MSH.11>
            <PT.1>P</PT.1>
        </MSH.11>
        <MSH.12>
            <VID.1>2.3.1</VID.1>
        </MSH.12>
        <MSH.19>
            <CE.1>en</CE.1>
        </MSH.19>
    </MSH>
    <ORU_R01.PIDPD1NK1NTEPV1PV2ORCOBRNTEOBXNTECTI>
        <ORU_R01.PIDPD1NK1NTEPV1PV2>
            <PID>
                <PID.1>1</PID.1>
                <PID.2>
                    <CX.1>HB117056</CX.1>
                </PID.2>
                <PID.3>
                    <CX.1>ABC123</CX.1>
                    <CX.4>
                        <HD.1>MODemo</HD.1>
                    </CX.4>
                    <CX.5>MC</CX.5>
                </PID.3>
                <PID.3>
                    <CX.1>401114835T</CX.1>
                    <CX.5>PEN</CX.5>
                </PID.3>
                <PID.3>
                    <CX.1>401114835T</CX.1>
                </PID.3>
                <PID.5>
                    <XPN.1>
                        <FN.1>TEST</FN.1>
                    </XPN.1>
                    <XPN.2>Patient</XPN.2>
                </PID.5>
                <PID.7>
                    <TS.1>20010101</TS.1>
                </PID.7>
                <PID.8>F</PID.8>
                <PID.10>
                    <CE.1>4</CE.1>
                    <CE.2>Non-indigenous</CE.2>
                </PID.10>
                <PID.11>
                    <XAD.1>10/102 Wises Road</XAD.1>
                    <XAD.3>Maroochydore</XAD.3>
                    <XAD.5>4558</XAD.5>
                </PID.11>
                <PID.13>
                    <XTN.1>0754566000</XTN.1>
                </PID.13>
            </PID>
            <ORU_R01.PV1PV2>
                <PV1>
                    <PV1.1>1</PV1.1>
                    <PV1.3>
                        <PL.1>AE~HBH</PL.1>
                        <PL.4>
                            <HD.1>HBH</HD.1>
                            <HD.2>Medical Objects Demo Hospital</HD.2>
                            <HD.3>MODemoSoftware</HD.3>
                        </PL.4>
                    </PV1.3>
                    <PV1.8>
                        <XCN.1>0000000Y</XCN.1>
                        <XCN.2>
                            <FN.1>REFERRING</FN.1>
                        </XCN.2>
                        <XCN.3>Provider</XCN.3>
                        <XCN.6>DR</XCN.6>
                        <XCN.9>
                            <HD.1>AUSHICPR</HD.1>
                        </XCN.9>
                        <XCN.10>L</XCN.10>
                        <XCN.13>UPIN</XCN.13>
                    </PV1.8>
                    <PV1.9>
                        <XCN.1>UP3123000QW</XCN.1>
                        <XCN.2>
                            <FN.1>CONSULTING</FN.1>
                        </XCN.2>
                        <XCN.3>Provider</XCN.3>
                        <XCN.6>DR</XCN.6>
                        <XCN.9>
                            <HD.1>AUSHICPR</HD.1>
                        </XCN.9>
                        <XCN.10>L</XCN.10>
                        <XCN.13>UPIN</XCN.13>
                    </PV1.9>
                </PV1>
            </ORU_R01.PV1PV2>
        </ORU_R01.PIDPD1NK1NTEPV1PV2>
        <ORU_R01.ORCOBRNTEOBXNTECTI>
            <ORC>
                <ORC.1>RE</ORC.1>
                <ORC.2>
                    <EI.1>589113676</EI.1>
                    <EI.2>MODemoSoftware</EI.2>
                </ORC.2>
                <ORC.3>
                    <EI.1>589113676</EI.1>
                    <EI.2>Eli MOA Test Cap</EI.2>
                    <EI.3>51675B57-9C95-4278-B52E-3FE5EEB6B3EE</EI.3>
                    <EI.4>GUID</EI.4>
                </ORC.3>
                <ORC.5>IP</ORC.5>
                <ORC.7>
                    <TQ.4>
                        <TS.1>20121127</TS.1>
                    </TQ.4>
                    <TQ.6>URGENT</TQ.6>
                </ORC.7>
                <ORC.12>
                    <XCN.1>0000000Y</XCN.1>
                    <XCN.2>
                        <FN.1>REFERRING</FN.1>
                    </XCN.2>
                    <XCN.3>Provider</XCN.3>
                    <XCN.6>DR</XCN.6>
                    <XCN.9>
                        <HD.1>AUSHICPR</HD.1>
                    </XCN.9>
                    <XCN.10>L</XCN.10>
                    <XCN.13>UPIN</XCN.13>
                </ORC.12>
            </ORC>
            <FHS>
                <FHS.1>|</FHS.1>
                <FHS.2>Medical-Objects</FHS.2>
                <FHS.3>Eli MOA Test Cap</FHS.3>
            </FHS>
            <BHS>
                <BHS.1>|</BHS.1>
                <BHS.2>Medical-Objects</BHS.2>
                <BHS.3>Eli MOA Test Cap</BHS.3>
            </BHS>
        </ORU_R01.ORCOBRNTEOBXNTECTI>
    </ORU_R01.PIDPD1NK1NTEPV1PV2ORCOBRNTEOBXNTECTI>
</ORU_R01> 
```

# java - Java socket inpustream 卡住了

> ID：14053590
> 
> 赞同：0
> 
> 时间：2012-12-27T11:01:46.013
> 
> 标签：java, sockets

我从套接字 inputStream 读取时遇到问题。但只在课堂上使用一种方法。这是我的代码：服务器：

```
private void copyFile(String mainPath, String path) {
    outS.println("Sending file!");
    outS.println(path);
    outS.flush();

    BufferedInputStream fis = null;
    OutputStream os;

    File file = new File(mainPath);
    String str;
    byte[] buffer = new byte[4096];
    long numOfChunks = file.length() / 4096, num = 0, lng;
    try {
        fis = new BufferedInputStream(new FileInputStream(file));
        os = socket.getOutputStream();
        outS.println(numOfChunks);
        fis.read(buffer, 0, 4096);
        os.write(buffer, 0, buffer.length);
        os.flush();
        num++;
    } catch (FileNotFoundException ex) {
        System.out.println("<ERROR> Clerk, copyFile: File not found.");
        System.out.println(ex);
    } catch (IOException ex) {
        System.out.println("<ERROR> Clerk, copyFile: Could not write or read file.");
        System.out.println(ex);
    } finally {
        try {
            fis.close();
        } catch (IOException ex) {
            Logger.getLogger(Clerk.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    waitEnd();
} 
```

客户：

```
private void copyFile(String destination) {
    FileOutputStream fos = null;
    long numOfChunks, num = 0;
    SBuffer sBuffer;
    byte[] buffer = new byte[4096];
    InputStream is;
    try {
        fos = new FileOutputStream(new File(destination));
        BufferedOutputStream bos = new BufferedOutputStream(fos);
        is = socket.getInputStream();
        numOfChunks = Long.parseLong(inS.readLine());
        System.out.println(num + "/" + numOfChunks);
        int bytesRead = is.read(buffer, 0, buffer.length);
        bos.write(buffer, 0, bytesRead);
        num++;
    } catch (FileNotFoundException ex) {
        System.out.println("<ERROR> Client, copyFile: File not found.");
        System.out.println(ex);
    } catch (IOException ex) {
        System.out.println("<ERROR> Client, copyFile: Could not write or read file.");
        System.out.println(ex);
    } finally {
        try {
            fos.close();
        } catch (IOException ex) {
            Logger.getLogger(Client.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
    outS.println("end");
    outS.flush();
} 
```

让我解释几件事。一切正常，但客户端在线`int bytesRead = is.read(buffer, 0, buffer.length)`会卡住，因为流中没有任何内容（is.available = 0）。我不知道为什么。虽然我多次从服务器发送它。

而且我无法关闭流，因为套接字也会关闭。

方法 waitEnd() 等待套接字输入流中的字符串“end”。

我在互联网上搜索了很多教程和东西，但没有人帮助。

建立连接的代码：

服务器：

```
public void run() {
    try {
        ssocket = new ServerSocket(2332);
        Socket socket = ssocket.accept();
        clerk = new Clerk(socket, mainPath);
        (new Thread(clerk)).start();
    } catch (IOException ex) {
    }
    try {
        ssocket.close();
    } catch (IOException ex) {
    }
}

public Clerk(Socket socket, String path) {
    this.socket = socket;
    mainTree = new FileTree(path);
}

public Client(String address, String[] dirs) {
    try {
        socket = new Socket(address, 2332);
    } catch (UnknownHostException ex) {
    } catch (IOException ex) {
    }
} 
```

客户和职员运行相同的方法：

```
 @Override
public void run() {
    try {
        inS = new BufferedReader(iss);
        outS = new PrintWriter(socket.getOutputStream(), true);
        oos = new ObjectOutputStream(socket.getOutputStream());
        iss = new InputStreamReader(socket.getInputStream());
        ois = new ObjectInputStream(socket.getInputStream());
    } catch (IOException ex) {
    }
    msg();
    try {
        inS.close();
        iss.close();
        outS.close();
        ois.close();
        oos.close();
        socket.close();
    } catch (IOException ex) {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:44:56.973

解决。我只为文件传输创建了第二个套接字。

# c++ - 指针被释放

> ID：14053591
> 
> 赞同：4
> 
> 时间：2012-12-27T11:01:52.913
> 
> 标签：c++, pointers, mpi, free, delete-operator

我不明白下面的代码有什么问题。它会生成“未分配的指针被释放”错误。

```
#include "mpi.h"

using namespace std;

void changeArray(bool* isPrime){  
    delete[] isPrime;
    isPrime = new bool[10];   
}

int main(int argc, char * argv[])
{
    int size, rank;

    MPI_Init(&argc, &argv);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    bool* isPrime = new bool[1000];

    changeArray(isPrime);

    delete[] isPrime;

    MPI_Finalize();

    return 0;
} 
```

但是如果我把函数的代码直接放在main里面就可以了。如果我不使用 MPI 也可以。我做错了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T11:27:58.583

问题是`isPrime`您在调用之外定义的指针`changeArray()`不会被`changeArray()`. 它的值被复制到调用中，在那里数组被释放，但新分配的数组的指针只存储在这个临时变量中，该变量在离开函数时被销毁。调用之后，`isPrime`in 指针`main()`仍然指向调用之前的相同位置，因此`delete[]`in`main()`尝试释放已经释放的内存。

要自己观察这一点，请打印`isPrime`调用前后`changeArray()`的值，以及新分配的`isPrime`inside的值`changeArray()`。

解决方案是`isPrime`通过引用传递：

```
void changeArray(bool*& isPrime){  
    delete[] isPrime;
    isPrime = new bool[10];   
} 
```

# mysql - 从 ZendFramework 获取完整的堆栈跟踪

> ID：14053592
> 
> 赞同：1
> 
> 时间：2012-12-27T11:02:02.070
> 
> 标签：mysql, zend-framework, php

我有一个使用 ZendFramework 的非常大的 Web 应用程序。好像某处某个SQL语句有语法错误（很多东西是自动生成的），但是记录的错误非常无用（项目信息被删除）

```
Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near [...] in [...]/ZendFramework/Zend/Db/Statement/Pdo.php:228
Stack trace:
#0 [...]/ZendFramework/Zend/Db/Statement/Pdo.php(228): PDOStatement->execute(Array)
#1 [...]/ZendFramework/Zend/Db/Statement.php(300): Zend_Db_Statement_Pdo->_execute(Array)
#2 [...]/ZendFramework/Zend/Db/Adapter/Abstract.php(479): Zend_Db_Statement->execute(Array)
#3 [...]/ZendFramework/Zend/Db/Adapter/ in [...]/ZendFramework/Zend/Db/Statement/Pdo.php on line 234 
```

此堆栈跟踪仅包含 Zend 框架内的引用，并且看不到实际的调用者（最有可能出现语法错误的地方）。

每当发生错误时，如何让 Zend Framework 为我提供完整的堆栈跟踪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T14:28:46.507

这些异常应该由您的`ErrorController()`（*或您作为 ErrorController 传递的任何东西*）通常在默认模块（*application/controllers/ErrorController.php*）中记录。如果是这种情况，更改日志记录机制应该很简单。

可能只需要进行一些实验即可确定需要使用哪些[Exception()](http://us3.php.net/manual/en/class.exception.php)方法来获得所需的输出。

**[编辑]**

我应该注意到，如果您使用默认错误设置，该视图将是一个简单的更新位置：

```
<!-- application/views/scripts/error/error.phtml -->
<html>
    <body>
        <h1>An error occurred</h1>
        <h2><?php echo $this->message ?></h2>
        <?php if (isset($this->exception)): ?>
            <h3>Exception information:</h3>
            <p>
                <b>Message:</b> <?php echo $this->exception->getMessage() ?>
            </p>
            <h3>Stack trace:</h3>
            <pre><?php echo $this->exception->getTraceAsString() ?>
            <!-- add full Trace info -->
            <pre><?php echo $this->exception->getTrace() ?></pre>
            </pre>
            <h3>Request Parameters:</h3>
            <pre><?php echo $this->escape(var_export($this->request->getParams(), true)) ?>
            </pre>
        <?php endif ?>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:38:21.453

如果您需要更详细的堆栈跟踪，可以使用：

```
foreach($this->exception->getTrace() as $t){
        var_dump($t);
    } 
```

[这里](http://www.edmondscommerce.co.uk/zend-framework/zend-framework-more-detailed-stack-trace/)提到。但我认为你会更好地使用 firebug 和 firephp 并使用 Zend_Debug_Profiler_Firebug 类调试 sql 查询，如[这里](http://www.peacocksuit.com/blog/tag/zend_db_profiler_firebug/)、[这里](https://stackoverflow.com/a/332110/810568)和[这里](http://framework.zend.com/manual/1.12/en/zend.db.profiler.html#zend.db.profiler.profilers.firebug)有用的文章中所述。

# c# - 想知道 HttpBeginRequest 中等待的请求的确切值

> ID：14053594
> 
> 赞同：2
> 
> 时间：2012-12-27T11:02:22.810
> 
> 标签：c#, asp.net, iis, performancecounter, newrelic

我们在上面运行我们的应用`.Net Framework 2.0`程序`IIS 7.5`

在检查 New Relic 时，我们发现我们在`System.Web.HttpApplication.BeginRequest()`.

我们正在努力解决这个问题，即尝试在所有不需要的页面上禁用页面级别的会话。

但是目前，我们想知道总共有多少请求正在等待`System.Web.HttpApplication.BeginRequest()`？

我们在 IIS 请求监视器中看到，`BeginRequest`在所有特定时间都有许多请求。

但是是否有一个性能计数器或某种方式通过代码我可以知道这些请求的确切值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:09:23.447

您有 ASP.Net\Requests Queued 性能计数器来检查排队等待服务的请求数。
更多信息请访问：http: [//msdn.microsoft.com/en-us/library/fxk122b4%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/fxk122b4%28v=vs.100%29.aspx)

# java - 编译器错误：对调用不明确的引用

> ID：14053596
> 
> 赞同：25
> 
> 时间：2012-12-27T11:02:28.957
> 
> 标签：java, methods, polymorphism, java-7, boxing

**情况1**

```
static void call(Integer i) {
    System.out.println("hi" + i);
}

static void call(int i) {
    System.out.println("hello" + i);
}

public static void main(String... args) {
    call(10);
} 
```

**案例 1 的输出：hello10**

**案例2**

```
static void call(Integer... i) {
    System.out.println("hi" + i);
}

static void call(int... i) {
    System.out.println("hello" + i);
}

public static void main(String... args) {
    call(10);
} 
```

显示编译错误`reference to call ambiguous`。但是，我无法理解。为什么 ？但是，当我从 中注释掉任何`call()`方法时`Case 2`，它工作正常。谁能帮我理解，这里发生了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T14:56:42.427

查找最具体的方法在 Java 语言规范 (JLS) 中以非常正式的方式定义。我在尝试尽可能多地删除正式公式的同时提取了以下适用的主要项目。

总之，适用于您的问题的主要项目是：

*   [JLS 15.12.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2)：您的用例属于第 3 阶段：

> 第三阶段（第 15.12.2.4 节）允许将重载与可变参数方法、装箱和拆箱相结合。

*   那么[JLS 15.12.2.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.4)基本确定这两种方法都适用，因为 10 可以同时转换为 an`Integer...`或 an `int...`。到现在为止还挺好。该段的结论是：

> 最具体的方法（§15.12.2.5）是在适用的可变参数方法中选择的。

*   这将我们带到了[JLS 15.12.2.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)。本段给出了一种arity方法`m(a...)`比另一种arity方法更具体的条件`m(b...)`。在您使用一个参数且没有泛型的用例中，它归结为：

> `m(a...)`比`m(b...)`iif更具体`a <: b`，其中`<:`表示`is a subtype of`.

它碰巧`int`不是 的子类型，`Integer`也不`Integer`是 的子类型`int`。

因此，要使用 JLS 语言，这两种`call`方法都具有最大的特异性（没有一种方法比另一种更具体）。在这种情况下，同一段得出结论：

> *   如果所有最具体的方法都具有覆盖等效（第 8.4.2 节）签名 [...] *=> 不是您的情况，因为不涉及泛型并且 Integer 和 int 是不同的参数*
> *   **否则，我们说方法调用不明确，出现编译时错误。**

**笔记**

如果您替换`Integer...`为`long...`例如，您将拥有`int <: long`并且最具体的方法将是`call(int...)`*.
同样，如果您替换`int...`为`Number...`，则该`call(Integer...)`方法将是最具体的。

[*在 Java 7 之前的 JDK](https://stackoverflow.com/questions/13524166/overload-function-int-and-long-simultaneously)中实际上存在一个错误，在这种情况下会显示出模棱两可的调用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T11:17:01.980

看起来它与[错误 #6886431](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6886431)有关，这似乎已在 OpenJDK 7 中修复。

以下是错误描述，

**错误描述：**

> 调用具有以下重载签名的方法时，我预计会出现歧义错误（假设参数与两者兼容）：

```
int f(Object... args);
int f(int... args); 
```

> javac 将第二个视为比第一个更具体。这种行为是明智的（我更喜欢它），但与 JLS（15.12.2）不一致。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T11:40:55.787

从[JLS 15.12.2.2](http://jcp.org/aboutJava/communityprocess/jsr/tiger/autoboxing.html)

> JLS 15.12.2.2 选择最具体的方法
> 
> I如果多个方法声明既可访问又适用于方法调用，则必须选择一个为运行时方法分派提供描述符。Java 编程语言使用选择最具体方法的规则。非正式的直觉是，如果第一个方法处理的任何调用可以传递给另一个方法而没有编译时类型错误，那么一个方法声明比另一个方法声明更具体。

这些方法都不能传递给另一个（int[] 和 Integer[] 的类型不相关），因此调用不明确

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T11:07:09.343

编译器不知道应该调用哪个方法。为了解决这个问题，您需要转换输入参数..

```
public static void main(String... args) {
  call((int)10);
  call(new Integer(10));
} 
```

编辑：

这是因为编译器试图将 Integer 转换为 int，因此，在调用方法之前会发生隐式转换`call`。因此，编译器随后会查找具有该名称且可以采用整数的任何方法。你有 2 个，所以编译器不知道应该调用哪一个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T11:50:07.393

如果可以应用不止一种方法，那么*从 Java 语言规范*中我们[选择最具体的方法](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)，段落`15.12.2.5`：

一个名为`m`的变量 arity 成员方法比另一个同名的变量 arity 成员方法更具体，如果 ( `<: means subtyping`)：

1.  一个成员方法有 n 个参数，另一个有 k 个参数，其中 n ≥ k，并且：
    *   第一个成员方法的参数类型为T1, ..., Tn-1, Tn[]。（**我们只有一个 T_n[]，即 Integer[], n=1**）
    *   其他方法的参数类型为U1, ..., Uk-1, Uk[]。（**同样只有一个参数，即 int[], k=1**）
    *   如果第二种方法是泛型的，则令 R1 ... Rp (p ≥ 1) 为其类型参数，令 Bl 为 Rl (1 ≤ l ≤ p) 的声明边界，令 A1 ... Ap 为推断的类型参数(§15.12.2.7) 在初始约束 Ti << Ui (1 ≤ i ≤ k-1) 和 Ti << Uk (k ≤ i ≤ n) 下进行此调用，并让 Si = Ui[R1=A1,。 ..,Rp=Ap] (1 ≤ i ≤ k)。（**方法不是通用的**）
    *   否则，令 Si = Ui (1 ≤ i ≤ k)。( **S1 = int[]** )
    *   对于从 1 到 k-1 的所有 j，Tj <: Sj，并且，（**这里什么都没有**）
    *   对于从 k 到 n 的所有 j，Tj <: Sk，并且，（**比较 T1 <: S1, Integer[] <: int[]**）
    *   如果第二种方法是如上所述的通用方法，则 Al <: Bl[R1=A1,...,Rp=Ap] (1 ≤ l ≤ p)。（**方法不是通用的**）

尽管原语`int`被自动装箱为 wrapper `Integer`，`int[]`但未自动装箱为`Integer[]`，但第一个条件不成立。

第二个条件几乎相同。

还有其他条件不成立，再由于JLS：

> 我们说方法调用不明确，出现编译时错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T12:06:10.500

这个问题[已经被问](https://stackoverflow.com/questions/2521293/bug-with-varargs-and-overloading)过很多次了。棘手的部分是`f(1, 2, 3)`显然是通过`int`'s，那么为什么编译器不能选择`f(int...)`版本呢？答案必须在[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)中的某个地方，我正在摸不着头脑

根据 §15.12.2.4，这两种方法都*适用于 variable-arity method*，因此下一步是确定最具体的方法。

不幸的是，[§15.12.2.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2.5)使用子类型测试*T [i] <: S [i]*在*f1(T [1] , .. T [n] )*和*f2(S [1] , .. S [n] )*形式参数之间来识别目标方法，并且由于存在`Integer`和之间没有子类型关系`int`，没有人*获胜*，因为既不是*int :> Integer*也不是*Integer:> int*。在该段的末尾指出：

> 上述条件是唯一一种方法可能比另一种方法更具体的情况。[...]
> 
> 当且仅当 m1 比 m2 更具体且 m2 不比 m1 更具体时，方法 m1**严格比另一种方法 m2 更具体。**
> 
> 如果一个方法是可访问和适用的，并且没有其他严格更具体的适用和可访问的方法，则该方法被称为对方法调用具有**最大的特定性。**
> 
> 可能没有一种方法是最具体的，因为有两种或多种方法是最具体的。在这种情况下：
> 
> 1.  [...]
>     
>     
> 2.  否则，我们说方法调用不明确，出现编译时错误。

附上Gilad Bracha[的一篇博客文章](http://gbracha.blogspot.it/2009/09/systemic-overload.html)（见附件 2），该文章又链接到 @Jayamhona 答案的错误报告中。

# linux - 从 linux 上的 windows pgp 可执行自解压存档中提取文件

> ID：14053598
> 
> 赞同：2
> 
> 时间：2012-12-27T11:02:36.617
> 
> 标签：linux, windows, gnupg, pgp

我有一个客户（通过他们的旧系统）向我发送了一个包含一些数据的文件。问题是他们通过 PGP 对其进行加密，然后创建一个可执行的自解压文件来封装它。

我正试图摆脱 Windows 进程来进行这种提取，而且他们 - 坦率地说 - 没有足够的技术或动力来改变他们的提取方面。

我的问题是 - 有哪些基于 linux 的实用程序（和示例命令）可以让我获取这个可执行文件并提取数据，而无需在 Windows 平台上运行 exe？

请不要回答“你应该只能使用 gpg”。请给出我需要使用的示例命令，因为我在文档中找不到它们。

这是一个类似的（可能完全相同的问题）和我不想要的答案类型：[如何以编程方式解密 PGP 自解密存档？](https://stackoverflow.com/questions/13960544/how-can-i-decrypt-a-pgp-self-decrypting-archive-programatically)“只使用gpg”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:15:53.067

I don't know of any tool that does this. I also can't find a spec for SDAs. They appear to be just what the other answer says: EXE stubs around an encrypted zip file.

Your process will probably look something like this:

1.  Parse the executable, find the data section where the encrypted zip is stored, and extract it.
2.  Decrypt the zipfile with GPG.

You'll probably want to do step 1 with a script. Python has the [pefile](http://code.google.com/p/pefile/) module that allows you to inspect Windows executables. Other languages have similar libraries.

Alternatively, you can just run the SDA with [wine](http://www.winehq.org/).

# visual-c++ - 创建从另一个（简单）继承的简单接口时出现错误 MIDL5004

> ID：14053605
> 
> 赞同：0
> 
> 时间：2012-12-27T11:03:17.823
> 
> 标签：visual-c++, windows-runtime, midl, wrl

我有以下非常简单的接口：

```
[uuid(0d585932-fbc4-4b0a-90b5-ccf34aefd4c6)] 
[version(COMPONENT_VERSION)] 
interface IPerson : IInspectable
{
    [propget] HRESULT Name([out, retval] HSTRING* value);
    [propput] HRESULT Name([in] HSTRING value);

    [propget] HRESULT Surname([out, retval] HSTRING* value);
    [propput] HRESULT Surname([in] HSTRING value);
}

[uuid(863571FC-4CBB-47E8-8BD3-2709D5CB7D0D)]
[version(COMPONENT_VERSION)]
interface ICitizen : IPerson 
{
[propget] HRESULT Address([out, retval] IAddress** value);
[propput] HRESULT Address([in] IAddress* value);
} 
```

当我尝试为 WinRT 编译此 MIDL 时，我收到以下错误：

错误**MIDL5004**：接口必须从 IInspectable 继承：ICitizen

我真的很困惑在 WinRT 下 COM 变成了什么！如果从另一个接口继承这样简单的事情不再可能，我们如何设计应用程序？

我已经搜索了 WinRT 的 MIDL 的文档，但我找不到它！更好的是在谷歌上搜索错误 MIDL5004 没有显示任何结果！

Microsoft 的任何人都可以解释如何创建一个从另一个继承自 IInspectable 的接口继承的接口。在另一个测试中，我使用 C++/CX 创建了相同的接口，并且能够创建一个继承自 IPerson 的 ICitizen 接口。为什么 WinRT 的 MIDL 不再允许这样做，这是 COM 体系结构的基础，创建了接口层次结构。

感谢您的投入 O. Rouit

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-06T07:44:25.980

所有 Windows 运行时接口都必须直接从`IInspectable`. 通过从另一个 Windows 运行时接口派生的间接派生是不可能的。

您可以使用 requires 关系，而不是使用派生关系，使用`requires`：

```
[uuid(863571FC-4CBB-47E8-8BD3-2709D5CB7D0D)]
[version(COMPONENT_VERSION)]
interface ICitizen : IInspectable
    requires IPerson 
{
    [propget] HRESULT Address([out, retval] IAddress** value);
    [propput] HRESULT Address([in] IAddress* value);
} 
```

这要求关系指定实现接口的任何类型也`ICitizen`必须实现`IPerson`接口。但是，这些接口是独立的，并且具有不同的（非共享）vtable。需求关系是 1:M，因此单个接口可能要求任何实现者也实现一组 M 个其他接口。

# css - 背景图像经过我的页面包装

> ID：14053606
> 
> 赞同：0
> 
> 时间：2012-12-27T11:03:24.237
> 
> 标签：css

有人可以告诉我我在这里做错了什么吗？我希望我的背景图像移动到它的 div 的末尾而不是它之外。

'rule-btm.png' 超出了#wrap-content。

```
#wrap-page{
  margin:auto; <-- This is to center the content on the page
  min-width:1170px;
  max-width:1280px;
}

#wrap-content{
  margin:0 5px; <--This is for a margin around my content
}

#tagline:after {
    background: url("rule-btm.png") repeat-x;
    content: "";
    float: left;
    height: 7px;
    max-width: 1280px;
    min-width: 1170px;
} 
```

我只是好奇，所以我会问。将#wrap-page 和#wrap-content 都向左浮动对我来说是否正确？

* * *

```
<div id="tagline">
  <div></div>
  <div>Test</div>
  <div></div>
</div> 
```

**编辑：** 我注意到如果我删除最小/最大宽度并用 just 替换它`width`，我可以让背景移动到需要的地方。

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:14:37.067

它不是Outside，它需要定位

例如

```
background: url("rule-btm.png") top left repeat-x; 
```

# javascript - 如何设置文档的高度

> ID：14053607
> 
> 赞同：1
> 
> 时间：2012-12-27T11:03:28.870
> 
> 标签：javascript, html, css

> **可能重复：**
> [如何在 div 上创建自定义滚动条](https://stackoverflow.com/questions/9945547/how-to-create-a-custom-scrollbar-on-a-div)

我有以下身体

```
<div id="app-container">
    <div id="canvas-container">
        <div id="canvas"></div>
    </div>
</div> 
```

在 CSS 中，我有：

```
#canvas {
  position: absolute;
  background-color: transparent;
  width: 100%;
  height: 100%;
}

#app-container {
  height: auto !important;
  min-height: 100%;
}

#canvas-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
} 
```

之后，我将 div（使用 jquery.appendTo 和 jquery.offset）添加到`<div id="canvas"></div>`with

```
display: inline-block;
position: absolute; 
```

在 CSS 中。所以添加这样的 div 不会影响文档大小。如果我添加许多 div，其中一些可以位于屏幕边缘下方。如何添加滚动框，以便我可以看到所有 div？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:09:59.327

该属性`overflow: auto`和`height: (required height)`内部`#canvas`应该使该内部的所有div都可见。

我在我的应用程序中使用过几次。希望我没有错过任何非常明显的东西。

# java - 使用对先前标记的引用以及与某个类的子类型相对应的子项来解析 XML

> ID：14053611
> 
> 赞同：16
> 
> 时间：2012-12-27T11:03:52.543
> 
> 标签：java, xml-parsing, xstream, xml-deserialization

我必须处理以下情况（的变体）。我的模型类是：

```
class Car {
    String brand;
    Engine engine;
}

abstract class Engine {
}

class V12Engine extends Engine {
    int horsePowers;
}

class V6Engine extends Engine {
    String fuelType;
} 
```

我必须**反序列**化（不需要序列化支持 ATM）以下输入：

```
<list>

    <brand id="1">
        Volvo
    </brand>

    <car>
        <brand>BMW</brand>
        <v12engine horsePowers="300" />
    </car>

    <car>
        <brand refId="1" />
        <v6engine fuel="unleaded" />
    </car>

</list> 
```

**我尝试过的/问题：**

我尝试过使用 XStream，但它希望我编写如下标签：

```
<engine class="cars.V12Engine">
    <horsePowers>300</horsePowers>
</engine> 
```

等等（我不想要-tag ，`<engine>`我想要`<v6engine>`-tag*或*`<v12engine>`-tag。

此外，我需要能够根据标识符引用“预定义”品牌，如上面的品牌 ID 所示。（例如通过`Map<Integer, String> predefinedBrands`在反序列化期间维护 a ）。我不知道 XStream 是否适合这种情况。

我意识到这可以通过推或拉解析器（例如 SAX 或 StAX）或 DOM 库“手动”完成。然而，我希望有更多的自动化。理想情况下，我应该能够添加类（例如 new `Engine`s）并立即开始在 XML 中使用它们。（XStream 绝不是必需的，最优雅的解决方案会赢得赏金。）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-29T17:44:29.320

JAXB ( `javax.xml.bind`) 可以完成您所追求的一切，尽管有些位比其他位更容易。为简单起见，我将假设您的所有 XML 文件都有一个命名空间——如果它们没有命名空间会比较棘手，但可以使用 StAX API 来解决。

```
<list xmlns="http://example.com/cars">

    <brand id="1">
        Volvo
    </brand>

    <car>
        <brand>BMW</brand>
        <v12engine horsePowers="300" />
    </car>

    <car>
        <brand refId="1" />
        <v6engine fuel="unleaded" />
    </car>

</list> 
```

并假设对应`package-info.java`的

```
@XmlSchema(namespace = "http://example.com/cars",
           elementFormDefault = XmlNsForm.QUALIFIED)
package cars;
import javax.xml.bind.annotation.*; 
```

## 按元素名称的引擎类型

这很简单，使用`@XmlElementRef`：

```
package cars;
import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Car {
    String brand;
    @XmlElementRef
    Engine engine;
}

@XmlRootElement
abstract class Engine {
}

@XmlRootElement(name = "v12engine")
@XmlAccessorType(XmlAccessType.FIELD)
class V12Engine extends Engine {
    @XmlAttribute
    int horsePowers;
}

@XmlRootElement(name = "v6engine")
@XmlAccessorType(XmlAccessType.FIELD)
class V6Engine extends Engine {
    // override the default attribute name, which would be fuelType
    @XmlAttribute(name = "fuel")
    String fuelType;
} 
```

各种类型的`Engine`都`@XmlRootElement`用适当的元素名称进行注释和标记。在解组时，在 XML 中找到的元素名称用于决定使用哪个`Engine`子类。所以给定 XML

```
<car xmlns="http://example.com/cars">
    <brand>BMW</brand>
    <v12engine horsePowers="300" />
</car> 
```

和解组代码

```
JAXBContext ctx = JAXBContext.newInstance(Car.class, V6Engine.class, V12Engine.class);
Unmarshaller um = ctx.createUnmarshaller();
Car c = (Car)um.unmarshal(new File("file.xml"));

assert "BMW".equals(c.brand);
assert c.engine instanceof V12Engine;
assert ((V12Engine)c.engine).horsePowers == 300; 
```

要添加新类型，`Engine`只需创建新的子类，`@XmlRootElement`适当地对其进行注释，然后将此新类添加到传递给的列表中`JAXBContext.newInstance()`。

## 品牌的交叉引用

JAXB 有一个基于交叉引用的机制`@XmlID`，`@XmlIDREF`但是这些要求 ID 属性是一个有效的 XML ID，即一个 XML 名称，特别是不完全由数字组成。但是，只要您不需要“前向”引用（即引用`<car>`尚未`<brand>`“声明”的 a），您自己跟踪交叉引用并不难。

第一步是定义一个 JAXB 类来表示`<brand>`

```
package cars;

import javax.xml.bind.annotation.*;

@XmlRootElement
public class Brand {
  @XmlValue // i.e. the simple content of the <brand> element
  String name;

  // optional id and refId attributes (optional because they're
  // Integer rather than int)
  @XmlAttribute
  Integer id;

  @XmlAttribute
  Integer refId;
} 
```

现在我们需要一个“类型适配器”来在`Brand`对象和`String`所需的 by之间进行转换`Car`，并维护 id/ref 映射

```
package cars;

import javax.xml.bind.annotation.adapters.*;
import java.util.*;

public class BrandAdapter extends XmlAdapter<Brand, String> {
  private Map<Integer, Brand> brandCache = new HashMap<Integer, Brand>();

  public Brand marshal(String s) {
    return null;
  }

  public String unmarshal(Brand b) {
    if(b.id != null) {
      // this is a <brand id="..."> - cache it
      brandCache.put(b.id, b);
    }
    if(b.refId != null) {
      // this is a <brand refId="..."> - pull it from the cache
      b = brandCache.get(b.refId);
    }

    // and extract the name
    return (b.name == null) ? null : b.name.trim();
  }
} 
```

我们将适配器链接到使用另一个注解的`brand`字段：`Car`

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Car {
    @XmlJavaTypeAdapter(BrandAdapter.class)
    String brand;
    @XmlElementRef
    Engine engine;
} 
```

难题的最后一部分是确保`<brand>`在顶层找到的元素保存在缓存中。这是一个完整的例子

```
package cars;

import javax.xml.bind.*;
import java.io.File;
import java.util.*;

import javax.xml.stream.*;
import javax.xml.transform.stream.StreamSource;

public class Main {
  public static void main(String[] argv) throws Exception {
    List<Car> cars = new ArayList<Car>();

    JAXBContext ctx = JAXBContext.newInstance(Car.class, V12Engine.class, V6Engine.class, Brand.class);
    Unmarshaller um = ctx.createUnmarshaller();

    // create an adapter, and register it with the unmarshaller
    BrandAdapter ba = new BrandAdapter();
    um.setAdapter(BrandAdapter.class, ba);

    // create a StAX XMLStreamReader to read the XML file
    XMLInputFactory xif = XMLInputFactory.newFactory();
    XMLStreamReader xsr = xif.createXMLStreamReader(new StreamSource(new File("file.xml")));

    xsr.nextTag(); // root <list> element
    xsr.nextTag(); // first <brand> or <car> child

    // read each <brand>/<car> in turn
    while(xsr.getEventType() == XMLStreamConstants.START_ELEMENT) {
      Object obj = um.unmarshal(xsr);

      // unmarshal from an XMLStreamReader leaves the reader pointing at
      // the event *after* the closing tag of the element we read.  If there
      // was a text node between the closing tag of this element and the opening
      // tag of the next then we will need to skip it.
      if(xsr.getEventType() != XMLStreamConstants.START_ELEMENT && xsr.getEventType() != XMLStreamConstants.END_ELEMENT) xsr.nextTag();

      if(obj instanceof Brand) {
        // top-level <brand> - hand it to the BrandAdapter so it can be
        // cached if necessary
        ba.unmarshal((Brand)obj);
      }
      if(obj instanceof Car) {
        cars.add((Car)obj);
      }
    }
    xsr.close();

    // at this point, cars contains all the Car objects we found, with
    // any <brand> refIds resolved.
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-30T04:37:34.557

这是一个使用 XStream 的解决方案，因为您似乎已经熟悉它，而且它是一个非常灵活的 XML 工具。它是在 Groovy 中完成的，因为它比 Java 好得多。移植到 Java 相当简单。请注意，我选择对结果进行一些后处理，而不是尝试让 XStream 为我完成所有工作。具体来说，“品牌参考”是事后处理的。我可以在编组内部进行，但我认为这种方法更清洁，并且让您的选择更加开放以供将来修改。此外，这种方法允许“品牌”元素出现在整个文档中的任何位置，包括引用它们的汽车之后——如果你在运行中进行替换，我认为你无法做到这一点。

**带注释的解决方案**

```
import com.thoughtworks.xstream.XStream
import com.thoughtworks.xstream.annotations.*
import com.thoughtworks.xstream.converters.*
import com.thoughtworks.xstream.converters.extended.ToAttributedValueConverter
import com.thoughtworks.xstream.io.*
import com.thoughtworks.xstream.mapper.Mapper

// The classes as given, plus toString()'s for readable output and XStream
// annotations to support unmarshalling. Note that with XStream's flexibility,
// all of this is possible with no annotations, so no code modifications are
// actually required.

@XStreamAlias("car")
// A custom converter for handling the oddities of parsing a Car, defined
// below.
@XStreamConverter(CarConverter)
class Car {
    String brand
    Engine engine
    String toString() { "Car{brand='$brand', engine=$engine}" }
}

abstract class Engine {
}

@XStreamAlias("v12engine")
class V12Engine extends Engine {
    @XStreamAsAttribute int horsePowers
    String toString() { "V12Engine{horsePowers=$horsePowers}" }
}

@XStreamAlias("v6engine")
class V6Engine extends Engine {
    @XStreamAsAttribute @XStreamAlias("fuel") String fuelType
    String toString() { "V6Engine{fuelType='$fuelType'}" }
}

// The given input:
String xml = """\
    <list>
        <brand id="1">
            Volvo
        </brand>
        <car>
            <brand>BMW</brand>
            <v12engine horsePowers="300" />
        </car>
        <car>
            <brand refId="1" />
            <v6engine fuel="unleaded" />
        </car>
    </list>"""

// The solution:

// A temporary Brand class to hold the relevant information needed for parsing
@XStreamAlias("brand")
// An out-of-the-box converter that uses a single field as the value of an
// element and makes everything else attributes: a perfect match for the given
// "brand" XML.
@XStreamConverter(value=ToAttributedValueConverter, strings="name")
class Brand {
    Integer id
    Integer refId
    String name
    String toString() { "Brand{id=$id, refId=$refId, name='$name'}" }
}

// Reads Car instances, figuring out the engine type and storing appropriate
// brand info along the way.
class CarConverter implements Converter {
    Mapper mapper

    // A Mapper can be injected auto-magically by XStream when converters are
    // configured via annotation.
    CarConverter(Mapper mapper) {
        this.mapper = mapper
    }

    Object unmarshal(HierarchicalStreamReader reader,
                     UnmarshallingContext context) {
        Car car = new Car()
        reader.moveDown()
        Brand brand = context.convertAnother(car, Brand)
        reader.moveUp()
        reader.moveDown()
        // The mapper knows about registered aliases and can tell us which
        // engine type it is.
        Class engineClass = mapper.realClass(reader.getNodeName())
        def engine = context.convertAnother(car, engineClass)
        reader.moveUp()
        // Set the brand name if available or a placeholder for later 
        // reference if not.
        if (brand.name) {
            car.brand = brand.name
        } else {
            car.brand = "#{$brand.refId}"
        }
        car.engine = engine
        return car
    }

    boolean canConvert(Class type) { type == Car }

    void marshal(Object source, HierarchicalStreamWriter writer,
                 MarshallingContext context) {
        throw new UnsupportedOperationException("Don't need this right now")
    }
}

// Now exercise it:

def x = new XStream()
// As written, this line would have to be modified to add new engine types,
// but if this isn't desirable, classpath scanning or some other kind of
// auto-registration could be set up, but not through XStream that I know of.
x.processAnnotations([Car, Brand, V12Engine, V6Engine] as Class[])
// Parsing will create a List containing Brands and Cars
def brandsAndCars = x.fromXML(xml)
List<Brand> brands = brandsAndCars.findAll { it instanceof Brand }
// XStream doesn't trim whitespace as occurs in the sample XML. Maybe it can
// be made to?
brands.each { it.name = it.name.trim() }
Map<Integer, Brand> brandsById = brands.collectEntries{ [it.id, it] }
List<Car> cars = brandsAndCars.findAll{ it instanceof Car }
// Regex match brand references and replace them with brand names.
cars.each {
    def brandReference = it.brand =~ /#\{(.*)\}/
    if (brandReference) {
        int brandId = brandReference[0][1].toInteger()
        it.brand = brandsById.get(brandId).name
    }
}
println "Brands:"
brands.each{ println "  $it" }
println "Cars:"
cars.each{ println "  $it" } 
```

**输出**

```
Brands:
  Brand{id=1, refId=null, name='Volvo'}
Cars:
  Car{brand='BMW', engine=V12Engine{horsePowers=300}}
  Car{brand='Volvo', engine=V6Engine{fuelType='unleaded'}} 
```

**没有注释的解决方案**

PS 只是为了笑，这里是同样的东西，没有注释。除了没有对类进行注释之外，其他的都是一样的，在下面有几行额外的行`new XStream()`来完成注释之前所做的所有事情。输出是相同的。

```
import com.thoughtworks.xstream.XStream
import com.thoughtworks.xstream.converters.*
import com.thoughtworks.xstream.converters.extended.ToAttributedValueConverter
import com.thoughtworks.xstream.io.*
import com.thoughtworks.xstream.mapper.Mapper

class Car {
    String brand
    Engine engine
    String toString() { "Car{brand='$brand', engine=$engine}" }
}

abstract class Engine {
}

class V12Engine extends Engine {
    int horsePowers
    String toString() { "V12Engine{horsePowers=$horsePowers}" }
}

class V6Engine extends Engine {
    String fuelType
    String toString() { "V6Engine{fuelType='$fuelType'}" }
}

String xml = """\
    <list>
        <brand id="1">
            Volvo
        </brand>
        <car>
            <brand>BMW</brand>
            <v12engine horsePowers="300" />
        </car>
        <car>
            <brand refId="1" />
            <v6engine fuel="unleaded" />
        </car>
    </list>"""

class Brand {
    Integer id
    Integer refId
    String name
    String toString() { "Brand{id=$id, refId=$refId, name='$name'}" }
}

class CarConverter implements Converter {
    Mapper mapper

    CarConverter(Mapper mapper) {
        this.mapper = mapper
    }

    Object unmarshal(HierarchicalStreamReader reader,
                     UnmarshallingContext context) {
        Car car = new Car()
        reader.moveDown()
        Brand brand = context.convertAnother(car, Brand)
        reader.moveUp()
        reader.moveDown()
        Class engineClass = mapper.realClass(reader.getNodeName())
        def engine = context.convertAnother(car, engineClass)
        reader.moveUp()
        if (brand.name) {
            car.brand = brand.name
        } else {
            car.brand = "#{$brand.refId}"
        }
        car.engine = engine
        return car
    }

    boolean canConvert(Class type) { type == Car }

    void marshal(Object source, HierarchicalStreamWriter writer,
                 MarshallingContext context) {
        throw new UnsupportedOperationException("Don't need this right now")
    }
}

def x = new XStream()
x.alias('car', Car)
x.alias('brand', Brand)
x.alias('v6engine', V6Engine)
x.alias('v12engine', V12Engine)
x.registerConverter(new CarConverter(x.mapper))
x.registerConverter(new ToAttributedValueConverter(Brand, x.mapper, x.reflectionProvider, x.converterLookup, 'name'))
x.useAttributeFor(V12Engine, 'horsePowers')
x.aliasAttribute(V6Engine, 'fuelType', 'fuel')
x.useAttributeFor(V6Engine, 'fuelType')
def brandsAndCars = x.fromXML(xml)
List<Brand> brands = brandsAndCars.findAll { it instanceof Brand }
brands.each { it.name = it.name.trim() }
Map<Integer, Brand> brandsById = brands.collectEntries{ [it.id, it] }
List<Car> cars = brandsAndCars.findAll{ it instanceof Car }
cars.each {
    def brandReference = it.brand =~ /#\{(.*)\}/
    if (brandReference) {
        int brandId = brandReference[0][1].toInteger()
        it.brand = brandsById.get(brandId).name
    }
}
println "Brands:"
brands.each{ println "  $it" }
println "Cars:"
cars.each{ println "  $it" } 
```

PPS 如果您安装了 Gradle，您可以将其放入 a`build.gradle`并将上述脚本之一放入`src/main/groovy/XStreamExample.groovy`，然后就`gradle run`可以查看结果：

```
apply plugin: 'groovy'
apply plugin: 'application'

mainClassName = 'XStreamExample'

dependencies {
    groovy 'org.codehaus.groovy:groovy:2.0.5'
    compile 'com.thoughtworks.xstream:xstream:1.4.3'
}

repositories {
    mavenCentral()
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T18:25:16.457

您可以尝试[在此处](https://stackoverflow.com/questions/7507073/java-dom-parser-xml)参考以获取一些想法。

就个人而言，我会使用[DOM Parser](http://www.java-samples.com/showtutorial.php?tutorialid=152)来获取 XML 文件的内容。

例子：

```
import java.io.*;
import javax.xml.parsers.*;

import org.w3c.dom.*;

public class DOMExample {

  public static void main(String[] args) throws Exception {

    DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();

    File file = new File("filename.xml");
    Document doc = builder.parse(file);

    NodeList carList = doc.getElementsByTagName("car");
    for (int i = 0; i < carList.getLength(); ++i) {

        Element carElem = (Element)carList.item(i);

        Element brandElem = (Element)carElem.getElementsByTagName("brand").item(0);
        Element engineElem = (Element)carElem.getElementsByTagName("v12engine").item(0);

        String brand= brandElem.getTextContent();
        String engine= engineElem.getTextContent();

        System.out.println(brand+ ", " + engine);

        // TODO Do something with the desired information.
    }       
  }
} 
```

如果您知道标签名称的可能内容，这将非常有效。有很多方法可以解析 XML 文件。希望你能想出适合你的东西。祝你好运！

# c# - MODI 还在维护吗？

> ID：14053614
> 
> 赞同：3
> 
> 时间：2012-12-27T11:04:00.897
> 
> 标签：c#, ms-office, ocr, modi

我目前正在 C# 中寻找 OCR 并尝试：

*   Tessnet2 (Tesseract)
*   莫迪

我看到 MODI 在 OFFICE 2010 中不再存在（在 OFFICE 2003 和 2007 中）

我只是想知道微软是否没有贬值它，它是否仍在维护？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:23:05.537

来自微软网站的页面：

[Word 2010 中的更改（针对 ITPros）](http://technet.microsoft.com/en-us/library/cc179199%28office.14%29.aspx)

清楚地表明它自 Office 2010 以来已被弃用：

> “MODI 为 Office 提供了通用的文档成像和扫描解决方案。它也是 Office 传真功能的基础。安装 MODI 后，它是 .tif、.tiff 和 .mdi 文件的默认处理程序。**在 Office 2010中, MODI 已完全弃用**。此更改还会影响设置树，它不再在“工具”菜单上显示 MODI 帮助、OCR 或索引服务筛选器节点。Office 2010 中的 Internet 传真功能使用 Windows 传真打印机驱动程序生成固定文件格式 (TIF)。对于 64 位 Office 2010，不推荐使用 MODI 及其所有组件。”

# android - 有人知道 Web 框架在所有平台上都能正常工作吗？

> ID：14053617
> 
> 赞同：-1
> 
> 时间：2012-12-27T11:04:06.870
> 
> 标签：android, ios, windows-phone-7, blackberry, symbian

有人知道框架在所有平台上都能正常工作吗？我厌倦了在 iOS 上处理然后转到 Android 并再次开始处理然后转到 WP7 然后....

我需要一个适用于所有平台（手机、iPad、平板电脑、笔记本电脑）的 Web 框架？有什么建议会有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:11:40.950

据我所知，只有 jQueryMobile 对许多不同的移动平台有最好的支持。

[http://jquerymobile.com/gbs/](http://jquerymobile.com/gbs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:21:33.783

看看[PhoneGap/Apache Cordova](http://phonegap.com) - 免费的开源框架，它允许您使用标准化的 Web API 为您关心的平台创建移动应用程序。它现在可用于以下平台：iOS、Android、Blackberry、Windows Phone、Palm WebOS、Bada 和 Symbian。

您可以将它与 jQueryMobile、Sencha（刚刚添加了 WP8 支持）或其他移动 web 框架一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:08:24.853

HTML5 工作得很好。我已经广泛使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:40:34.507

Infragistics Ignite UI 框架是跨平台的（移动、桌面、平板电脑等）。看一看：[点燃 UI](http://www.infragistics.com/products/jquery/)

# android - 如何打开默认音乐播放器并将多个文件传递给它？

> ID：14053619
> 
> 赞同：1
> 
> 时间：2012-12-27T11:04:07.623
> 
> 标签：android, android-intent

当我需要打开文件时，我只使用类似[这样](https://stackoverflow.com/questions/3114471/android-launching-music-player-using-intent)的东西。但是如果有多个文件（播放列表）怎么办？如何将音乐文件列表传递给另一个应用程序？

# ios - MKMapView center位置

> ID：14053625
> 
> 赞同：4
> 
> 时间：2012-12-27T11:04:35.480
> 
> 标签：ios, mkmapview, cllocation

在我的应用程序中有一个`MKMapView`，我正在尝试获取当前可见的地图区域的中心坐标。我正在使用以下方法，以便如果用户移动可见区域，我将获得新的中心坐标。

```
- (void)mapView:(MKMapView *)mapView1 regionDidChangeAnimated:(BOOL)animated
{

CLLocationCoordinate2D centre = [mapView centerCoordinate];

NSLog(@"MAP CENTER = %f,%f",centre.latitude,centre.longitude);
} 
```

问题是当我切换到`UIViewController`包含`MKMapView`它`MAP CENTER = 0.000000,0.000000`两次然后给出实际坐标时`MAP CENTER = 55.755786,37.617633`。我一切换到它就想要实际坐标`UIViewController`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:47:26.150

坐标是`(55.755786,37.617633)`您当前的位置吗？

`MKMapView`需要一些时间来锁定 GPS 以获取您当前位置的坐标。在那之前`centerCoordinate`可能会回来`(0,0)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:42:21.697

试试这个可能对你有帮助。

```
self.mapView.centerCoordinate = self.mapView.userLocation.location.coordinate; 
```

# c# - 赋予数字不同的值

> ID：14053626
> 
> 赞同：-5
> 
> 时间：2012-12-27T11:04:38.180
> 
> 标签：c#

我在这里有点困惑，尽管我确信答案很简单。我想为不同的数字添加不同的值，但是如何简单地实现呢？

示例：1 = 10, 3 = 20, 5 = 30。如果用户输入数字 4，则答案为 60。因为 2 没有任何特定值，所以它也应该是 10。数字 2 也需要 10 作为值，因为它在 1 之后并且没有获得新值。该值从数字 3 变为 20，从那时起，每个数字的值都在 20 之后，直到将新值分配给更高的数字。那么数字 4 需要再次变为 20，因为值还没有改变，而数字 5 需要得到 50 的值。

另一个例子：

```
 Numers entered by user: 10

    Values:
    1 = 10
    5 = 20
    8 = 30

    In this case, the values of all the 10 numbers should be:
    1 = 10
    2 = 10
    3 = 10
    4 = 10
    5 = 20
    6 = 20
    7 = 20
    8 = 20
    9 = 30
    10 = 30 
```

所以答案是：180（所有组合值）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:06:34.507

我认为您可以使用`Dictionary<int, int>`它，因此`key`将是用户输入，`value`关联的“响应”。

```
IDictionary<int, int> map = new Dictionary<int, int>();
map.Add(1, 10);
map.Add(3, 20);

public int GetResponseForUserInput(int input)
{
   int response = -1;
   if (map.ContainsKey(input))
   {
      response = map[input];
   }

   return response;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T13:22:51.660

您的示例包含棘手的错误：而不是 `8 = 20`应该 `8 = 30`如此实际的答案是`190`

下面是根据您的样本计算总计的代码。希望能帮助到你

```
// Following lines should be replaced with actual input method
int TotalNumber = 10;
List<Tuple<int, int>> CheckPoints = new List<Tuple<int, int>>();

CheckPoints.Add(Tuple.Create(1, 10));
CheckPoints.Add(Tuple.Create(5, 20));
CheckPoints.Add(Tuple.Create(8, 30));

int NumberTillCount = 10;//determines point till which calculation should proceed

int result = 0;
Tuple<int, int> CurrentCheckPoint = new Tuple<int,int>(0,0);

//Loop checks if new CheckPoint is encountered and writes it in temp variable 'CurrentCheckPoint'
for (int i = 1; i <= NumberTillCount; i++)
{
    CurrentCheckPoint = CheckPoints.FindIndex(x=>x.Item1 == i) != -1 ? CheckPoints.Find(x=>x.Item1 == i) : CurrentCheckPoint;
    result += CurrentCheckPoint.Item2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:14:23.643

The simplest thing you could do is probably to just implement a method with a switch-structure, like this:

```
public int getNumber(int inputNr)
{
    var returnNr = 1;

    switch (inputNr)
    {
        case 1:
            returnNr = 10;
            break;
        case 3:
            returnNr = 30;
            break;
        case 4:
            returnNr = 60;
            break;
        default:
            // Probably not needed, as default returnNr is 1.
            break;
    }

    return returnNr;
} 
```

Edit: On second thought, this is even easier:

```
// Place the values in positions according to when you want them as results:
int[] numbers = {1, 10, 1, 30, 60};  

public int getNumber(int inputNr){
    return numbers.GetValue(inputNr); // Return the value at position "inputNr".
} 
```

# actionscript-3 - RTS 游戏的声音管理器

> ID：14053628
> 
> 赞同：0
> 
> 时间：2012-12-27T11:04:43.817
> 
> 标签：actionscript-3, flash, audio

我正在为 Epic Flash 游戏设计大赛[http://www.youtube.com/watch?v=bpFBraUbHyo&list=UUfkxvxrvpNxXvdKusYS0NfQ&index=1在 Flash、AS3 中创建 RTS 游戏](http://www.youtube.com/watch?v=bpFBraUbHyo&list=UUfkxvxrvpNxXvdKusYS0NfQ&index=1)

几乎完成了，除了创建管理所有声音的类非常痛苦。基本上，在缓冲区溢出之前，AS3 只有 32 个可用的 SoundChannel。但不幸的是，我的RTS同时处理了几十个单位的战斗，每个单位，尤其是步枪兵一次开火。

如果我让每个音效都响起，缓冲区就会溢出，即使没有，听起来也会非常嘈杂和混乱。所以问题是，我在市场上见过像星际争霸这样的游戏，屏幕上有数百个单元，但声音却相当“无噪音”且有条理。请问那些人是怎么达到这个效果的？他们接受或过滤掉什么声音？

目前我有 3 种可能的模型： 1）先进先出模型：接受所有正在播放的声音，但一旦达到缓冲区限制，缓冲区中最早的声音就会被静音。

2）接受或拒绝模型：接受所有声音直到缓冲区溢出，然后拒绝所有进一步的播放直到声音结束并且缓冲区清空。

3) 最响的唯一模型：目前我的游戏有多种不同响度的声音，例如，爆炸声比枪声大。在这个模型中，正在播放最响亮的 32 个声音，如果进入前 32 个声音中的声音，则“踢”32 个中最低的声音并替换它。

哪种型号最好，或者您可以建议自己的型号=p。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:25:56.043

也许还考虑为“单一”和“大规模”事件使用不同的声音文件......

*   1艘宇宙飞船 - 播放“*单个宇宙飞船声音*”
*   2 艘宇宙飞船 - 播放“*单次飞船声音*”两次
*   3 艘或更多太空船 - 播放“*许多太空船的声音*”

...无论如何，按类型对缓冲区中的声音进行分组可能是一个好主意，因为如果这些声音太多，您可以轻松地使一个“太空飞船声音”静音，而无需静音其他元素。

# python - 使用 Python 在多个文本中搜索单词（完全匹配）

> ID：14053630
> 
> 赞同：0
> 
> 时间：2012-12-27T11:04:54.297
> 
> 标签：python, regex, search

我想让用户选择并打开多个文本并在文本中搜索完全匹配的内容。我希望编码是 unicode。

如果我搜索“cat”，我希望它找到“cat”、“cat”、“.cat”，而不是“catalogue”。

我不知道如何让用户同时在所有文本中搜索两个词（“猫”或“狗”）？？？？？？也许我可以使用RE？

到目前为止，我刚刚使用户可以插入包含要搜索的文本文件的目录的路径。现在我想让用户（raw_input）在所有文本中搜索两个单词，然后打印和将结果（例如 document1.txt 中的“search_word_1”和“search_word_2”，document4.txt 中的“search_word_2”）保存在单独的文档 (search_words) 中。

```
import re, os

path = raw_input("insert path to directory :")
ex_library = os.listdir(path)
search_words = open("sword.txt", "w") # File or maybe list to put in the results
thelist = []

for texts in ex_library:
    f = os.path.join(path, texts)
    text = open(f, "r")
    textname = os.path.basename(texts)
    print textname
    for line in text.read():

    text.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:03:55.550

在这种情况下，正则表达式是合适的工具。

> 我希望它找到“cat”、“cat”、“.cat”而不是“catalogue”。

图案：`r'\bcat\b'`

`\b`在单词边界匹配。

> 如何让用户同时在所有文本中搜索两个词（“猫”或“狗”）

图案：`r'\bcat\b|\bdog\b'`

打印`"filename: <words that are found in it>"`：

```
#!/usr/bin/env python
import os
import re
import sys

def fgrep(words, filenames, encoding='utf-8', case_insensitive=False):
    findwords = re.compile("|".join(r"\b%s\b" % re.escape(w) for w in words),
                           flags=re.I if case_insensitive else 0).findall
    for name in filenames:
        with open(name, 'rb') as file:
             text = file.read().decode(encoding)
             found_words = set(findwords(text))
             yield name, found_words

def main():
    words = [w.decode(sys.stdin.encoding) for w in sys.argv[1].split(",")]
    filenames = sys.argv[2:] # the rest is filenames
    for filename, found_words in fgrep(words, filenames):
        print "%s: %s" % (os.path.basename(filename), ",".join(found_words))

main() 
```

例子：

```
$ python findwords.py 'cat,dog' /path/to/*.txt 
```

### 替代解决方案

为了避免读取内存中的整个文件：

```
import codecs

...
with codecs.open(name, encoding=encoding) as file:
    found_words = set(w for line in file for w in findwords(line)) 
```

您还可以在找到的上下文中打印找到的单词，例如，打印带有突出显示的单词的行：

```
from colorama import init  # pip install colorama
init(strip=not sys.stdout.isatty())  # strip colors if stdout is redirected
from termcolor import colored  # pip install termcolor

highlight = lambda s: colored(s, on_color='on_red', attrs=['bold', 'reverse'])

...
regex = re.compile("|".join(r"\b%s\b" % re.escape(w) for w in words),
                   flags=re.I if case_insensitive else 0)

for line in file:
    if regex.search(line): # line contains words
       line = regex.sub(lambda m: highlight(m.group()), line)
       yield line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:32:27.637

您需要将每个文件中的文本拆分为空格和标点符号。完成后，您只需在剩余列表中查找要搜索的单词。您还需要将所有内容都转换为小写，除非您还需要区分大小写的搜索。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:51:58.280

除了现有答案之外，还有一些（可能有用的）信息：

您应该知道，当用户想到“字符”（=grapheme）时，他的意思并不总是与 Unicode 字符相同，并且某些字素可以由 Unicode 字符以不止一种独特的方式表示（例如复合字符与基本字符+组合标记）。

要基于字形（=用户在大多数情况下的期望）而不是特定的 Unicode 字符序列进行搜索，您需要在搜索之前对字符串进行[规范化。](http://en.wikipedia.org/wiki/Unicode_normalization)

# android - Dropbox API - 如果没有互联网连接会发生什么

> ID：14053636
> 
> 赞同：0
> 
> 时间：2012-12-27T11:05:28.383
> 
> 标签：android, dropbox-api

嗨，我开发了一个支持 Dropbox 的应用程序。

我完成了身份验证，一切正常。

当我关闭互联网连接并尝试上传文件时，我收到成功回调...！！！

之后，如果我打开互联网，什么都不会发生。

这是事情必须发生的方式还是我在某个地方错了？

这是我用于上传的代码

```
 FileInputStream inputStream = null;

        try {
            File file = new File("/path to my file.txt");

            inputStream = new FileInputStream(file);

            Entry newEntry = mDBApi.putFileOverwrite("/path to my file.txt", inputStream, file.length(), null);

            Log.i("DbExampleLog", "The uploaded file's rev is: " + newEntry.rev);
        } catch (DropboxUnlinkedException e) {
            // User has unlinked, ask them to link again here.
            Log.e("DbExampleLog", "User has unlinked.");
        } catch (DropboxException e) {
            Log.e("DbExampleLog", "Something went wrong while uploading.");
        } catch (FileNotFoundException e) {
            Log.e("DbExampleLog", "File not found.");
        } finally {
            if (inputStream != null) {
                try {
                    inputStream.close();
                } catch (IOException e) {}
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:18:02.687

```
private boolean haveNetworkConnection() 
{
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) 
    {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                haveConnectedWifi = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                haveConnectedMobile = true;
    }
    return haveConnectedWifi || haveConnectedMobile;

} 
```

使用上述方法检查是否有可用的互联网连接。如果互联网连接可用，您可以检查并显示 toast 消息

如果您使用此方法，请不要忘记添加

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

到你的清单文件

# jquery - 包含 src url 或下载的最佳实践？

> ID：14053639
> 
> 赞同：2
> 
> 时间：2012-12-27T11:05:45.677
> 
> 标签：jquery, download, cdn

> **可能重复：**
> [jQuery 链接与下载？](https://stackoverflow.com/questions/2093566/jquery-linking-vs-download)

最佳做法是什么？

1.  我是否包含 jquery 的 google api url 或
2.  我是否在我的服务器上下载 jquery 文件并使用它？

    `<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T11:08:21.857

我宁愿给出谷歌的路径。更详细的答案你可以去[这里](https://stackoverflow.com/questions/547384/where-do-you-include-the-jquery-library-from-google-jsapi-cdn)

*   google api 服务器分布在世界各地，而不是我的单一服务器位置：更接近的服务器通常意味着更快的访问者响应时间。

*   许多人选择将 JQuery 托管在 Google 上，因此当访问者访问我的站点时，他们可能已经在本地缓存中拥有 JQuery 脚本。预缓存的内容通常意味着访问者的加载时间更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:08:14.370

最好是包含谷歌链接。

但是，如果由于某种原因您将在无法访问 Internet 的机器上进行开发，则应该将其下载到您的服务器上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T11:10:42.807

如果您在本地工作，那么

```
download a copy and use it. 
```

如果在服务器上

```
take a cdn link 
```

背后的原因，它处理页面的速度更快。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T11:36:43.350

让 Google 为您托管 jQuery 的优点：

*   您的一些用户可能已经在他们的缓存中拥有该脚本，因为其他网站可能使用相同的 URL 来加载相同的代码。
*   否则，Google 的服务器在地理位置上可能更接近，因此延迟可能会更低。

让 Google 为您托管 jQuery 的缺点：

*   连接到 ajax.googleapis.com 可能需要额外的 DNS 请求，从而增加加载时间。
*   对于 Intranet 站点，延迟将高于连接到同一本地网络上的服务器的延迟。
*   如果 Google 已关闭（或您的站点是 Intranet 站点并且您的 Internet 连接已关闭），则脚本可能根本无法加载。
    *   如果您在页面顶部加载脚本，则在与 Google 的连接超时之前，该页面可能无法读取。
    *   一些雇主的限制性防火墙[会阻止所有与 Google 的连接，包括与 Google API 的连接。](https://meta.stackexchange.com/questions/10071/employer-blocks-jquery-from-google-doh)
*   如果 Google 遭到黑客攻击，他们可能会提供影响您网站的恶意 JavaScript。恶意代码可以访问您的用户可以通过您的站点访问的任何内容。
*   Google 会知道您用户的 IP 地址，这可能是隐私问题。

至于 Stack Overflow 本身，尽管有种种缺点，但他们确实使用了 Google 的服务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T11:10:00.253

将 jQuery 下载到您的服务器。它如何帮助：

1.  可以离线工作。

2.  文档将加载更快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T11:10:37.567

根据他和包括我在内..:) .. 我会选择 1 选项....包括 googleapi url...

[http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-27T11:11:18.390

我认为最好的做法是在 CDN 出现故障的情况下进行后备：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
// Fallback
<script>!window.jQuery && document.write(unescape('%3Cscript src="js/libs/jquery-1.8.3.js"%3E%3C/script%3E'))</script> 
```

这来自 HTML5 Boilerplate。

# azure - 在 VM 中访问基于 Azure 的服务

> ID：14053640
> 
> 赞同：0
> 
> 时间：2012-12-27T11:05:49.590
> 
> 标签：azure, virtual-machine, acs, adfs2.0

我正在尝试从 Azure 上的 VM 中的 ADFS v2.0 访问我的 ACS 实例 - 只是，它不能解析地址： [https://myacsname.accesscontrol.windows.net/FederationMetadata/2007-06/FederationMetadata。 xml](https://myacsname.accesscontrol.windows.net/FederationMetadata/2007-06/FederationMetadata.xml)

玩弄它似乎也无法解析[http://windowsazure.com](http://windowsazure.com)之类的网站。但是我可以访问许多其他网站（Microsoft.com、Bing、Google 等）

有人遇到过这个吗？

亲切的问候，尼克

编辑：这似乎只发生在使用我自己的 DNS（我使用 AD DS 角色设置）的 VM 上。需要对我的 DNS 的默认配置进行哪些更改才能获取这些特定站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T01:19:54.637

啊哈！想通了，我想。

遵循教程后，我使用根域“cloudapp.net”设置了我的森林。当我安装 DNS 时，它控制了 Azure (cloudapp.net) 上托管的任何站点的名称解析。从正向查找区域中删除 cloudapp.net 为我解决了这个问题（尽管我希望它会破坏 AD 的某些东西？）。也许使用不同的根域会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T15:30:50.037

您是否希望建立自己的虚拟网络？我在使用/控制我自己的 DNS 服务器之前解决了这个问题。这允许您使用 DIP（专用网络）或 VIP（通过数据中心外部路由）来路由流量。

这里有很好的信息：http: [//channel9.msdn.com/Events/TechEd/NorthAmerica/2012/AZR209](http://channel9.msdn.com/Events/TechEd/NorthAmerica/2012/AZR209)

# mysql - mySQL：如何根据四个字段识别重复项

> ID：14053642
> 
> 赞同：0
> 
> 时间：2012-12-27T11:05:58.313
> 
> 标签：mysql

我已经阅读了一些关于如何删除重复项的帖子，方法是通过将表与自身的另一个实例进行比较，但是我不想删除我想比较它们的重复项。

例如。我有字段“id”、“sold_price”、“bruksareal”、“kommunenr”、“Gårdsnr”、“Bruksnr”、“Festenr”、“Seksjonsnr”。所有字段都是整数。

我想识别重复/相同的行（相同的 bruksareal、kommunenr、gårdsnr、bruksnr、festenr 和 seksjonsnr）。如果相同，那么我想给这些行一个唯一的参考号。

我相信这会让我更容易识别我以后想在其他字段上比较的行（例如，“sold_price”、“sold_date”等）

如果您认为我的方法是错误的，我愿意接受建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:10:04.070

跨所有字段对表执行连接，然后使用`exists`, 查询，例如：

```
Update Table1
Set reference = UUID()
Where exists (
 Select tb1.id
 from Table1 tb1 inner join Table1 tb2 on
  tb1.Field1 = tb2.Field1 AND
  tb1.Field2 = tb2.Field2 AND
  etc
 Where tb1.Id = Table1.Id
 And tb1.Id != tb2.Id
) 
```

实际上，您只需加入即可简化

```
Update Table1
Set reference = UUID()
From Table1 inner join Table1 tb2 on
      Table1.Field1 = tb2.Field1 AND
      Table1.Field2 = tb2.Field2 AND
      etc
Where Table1.Id != tb2.Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:08:28.143

根据您要在哪里执行此操作，我会选择哈希实现。对于每个插入，在您执行插入时计算所需列的哈希（可能会触发），然后您应该能够很容易地找出重复的行（如果您索引该列，查询应该非常快，但请记住，这仍然不是一个 int 列，因此它会随着时间的推移而变慢）。

在此之后，您可以对重复的记录做任何您想做的事情，而无需对数据库进行非常昂贵的查询。

稍后编辑：确保将空值转换为某个定义的值，因为如果操作数为空，某些 mysql 函数（如 MD5）只会返回空值。concat 也是如此——如果一个操作数为 null，它将返回 null（尽管 concat_ws 也是无效的）。

# ocaml - Ocaml topfind lwt

> ID：14053647
> 
> 赞同：1
> 
> 时间：2012-12-27T11:06:31.067
> 
> 标签：ocaml

我正在尝试将 lwt 模块与 Ocaml 一起使用

```
%cat .ocamlinit
#use "topfind";;  
#require "lwt.simple-top";; 
#require "lwt.syntax";;
#require "findlib";;
#require "num.core";;
#load "nums.cma";;
#load "unix.cma";;
#camlp4o;;
open Lwt;;
open Lwt_io;; 
```

当我尝试使用任何 Lwt API 使用此命令构建“ocamlbuild -use-ocamlfind myFile.native”时

我收到此错误：“错误：未绑定模块 Lwt”

当我输入终端 %ocaml 时，它会成功加载，我可以使用 Lwt.API

到底是怎么回事？有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:04:16.047

ocamlbuild 不读取 .ocamlinit，它纯粹用于顶层（即 ocaml）。为了编译依赖 lwt 的项目，您需要指定依赖项，例如：

```
ocamlbuild -use-ocamlfind -package lwt myFile.native 
```

另请参阅[如何将 ocaml 编译为本机代码](https://stackoverflow.com/questions/2672577/how-to-compile-ocaml-to-native-code/2673871#2673871)

# java - 如何使用robotium从视图中检索文本列表

> ID：14053653
> 
> 赞同：0
> 
> 时间：2012-12-27T11:06:57.813
> 
> 标签：java, android, robotium

我正在做一个使用robotium对android应用程序进行自动化测试的程序。我想从使用机器人设备的视图中检索文本列表。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:30:18.123

```
View view = solo.getView(...);
if (view instanceof TextView) {
    String text = ((TextView)view).getText();
} 
```

# java - 使用 NTLM 安全协议连接到 LDAP (Active Directory)

> ID：14053654
> 
> 赞同：1
> 
> 时间：2012-12-27T11:07:04.870
> 
> 标签：java, active-directory, ntlm, sasl

**目前，我使用用户名和密码作为 ldap 的连接凭据（为了验证 AD 的用户）。**

对于此处的身份验证，我使用 InitialDirContext 创建了一个初始上下文（用于 Active Directory），我们在其中提供了一组环境属性，其中包含身份验证信息。

我的代码如下所示：

```
env = new Hashtable();
env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
env.put(Context.PROVIDER_URL, ...);
env.put(Context.SECURITY_AUTHENTICATION, "simple");
env.put(Context.SECURITY_PRINCIPAL, ...);
env.put(Context.SECURITY_CREDENTIALS, ...);
env.put("com.sun.jndi.ldap.connect.timeout", ...);

try {
  ctx = new InitialLdapContext(env);
}
catch (NamingException e) {
    System.out.println("error")
} 
```

我想更改此代码，因此它将使用 NTLM 验证输入的用户名和密码作为针对 LDAP 的凭据。

你能给我举个例子吗？

NTLM – 是一套 Microsoft 安全协议，提供 - 身份验证 - 完整性 - 机密性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:03:59.357

忘了它。Java 中没有对 NTLM 的 SASL 支持。使用 GSS-API。总是弃权使用专有技术，这是一条死胡同。并且*永远不要*使用`simple`身份验证，它以明文形式传输密码。至少使用 Digest MD5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T18:28:55.957

我还想使用 NTLM 连接到 Microsoft LDAP 目录。

不幸的是，微软在 LDAP 管理员权限方面存在差异，这取决于您连接的是 Kerberos/NTLM 还是 BIND/MD5，而我对使用标准管理工具感到厌烦。而 Kerberos 仅限于用户、用户客户端和 LDAP 服务器在同一个域中，并且需要为 JRE 配置容易出错的 JAAS 配置文件。

因为它是周围最常用的目录，而且我也找不到任何现有的解决方案，所以我尝试自己创建一个 NTLM BIND 解决方案，我成功了。

它是一个单一的 Java 类文件，它使用额外的 LDAP BIND 类扩展了 UnboundID Java LDAP SDK： [https ://sourceforge.net/projects/javaldapntlmbind/](https://sourceforge.net/projects/javaldapntlmbind/)

该解决方案使用 UnboundID Java LDAP SDK，对于 NTLM 处理，它使用 samba.org 的 JCIF Java 库。由于使用 JCIF，它是平台独立的，不需要在 Windows 上运行。

# elasticsearch - 弹性搜索嵌套 match_phrase 问题

> ID：14053657
> 
> 赞同：1
> 
> 时间：2012-12-27T11:07:08.143
> 
> 标签：elasticsearch

我们正在对嵌套对象进行 match_phrase 查询，其中嵌套对象只有一个字符串值。

我们打算找到字符串短语的出现。

让我们假设，

1) 映射如下。

```
"attr": {
                "type": "nested",
                "properties": {
                    "attr": {
                        "type": "multi_field",
                        "fields": {
                            "attr": { "type": "string", "index": "analyzed", "include_in_all": true, "analyzer": "keyword" },
                            "untouched": { "type": "string", "index": "analyzed", "include_in_all": false, "analyzer": "not_analyzed" }
                        }
                    }
                }
            } 
```

2）数据就像。

对象 A：

```
"attr": [
    {
        "attr": "beverage"
    },
    {
        "attr": "apple wine"
    }
] 
```

对象 B：

```
"attr": [
    {
        "attr": "beverage"
    },
    {
        "attr": "apple"
    },
    {
        "attr": "wine"
    }
] 
```

3）因此，在查询中

```
{
    "query": {
        "match": {
            "_all": {
                "query": "apple wine",
                "type": "phrase"
                }
            }
        }
    } 
```

我们只期待对象 A，但不幸的是对象 B 也即将到来。

请期待您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T10:00:37.307

您还需要告诉查询在一个嵌套文档中搜索所有术语：

```
"query": {
  "nested": {
    "path": "attr",
    "query": {
      "match": {
        "attr": {
          "query": "apple wine",
          "operator": "and"
        }
      }
    }
  }
} 
```

一个很好的信息来源是[http://www.spacevatican.org/2012/6/3/fun-with-elasticsearch-s-children-and-nested-documents/](http://www.spacevatican.org/2012/6/3/fun-with-elasticsearch-s-children-and-nested-documents/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T06:20:05.757

在您的情况下，单独的数组值的偏移量应该有很大的差距，以避免短语匹配。同一字段的实例之间存在默认的可配置间隙，但此间隙的默认值为 0。

您应该在字段映射中更改它：

```
"attr": { "type": "string", 
"index": "analyzed", 
"include_in_all": true, 
"analyzer": "keyword", 
"position_offset_gap": 100 
} 
```

# facebook - 如何获取从 facebook 登录 ios 应用返回的用户名和数据

> ID：14053661
> 
> 赞同：2
> 
> 时间：2012-12-27T11:07:14.197
> 
> 标签：facebook, ios6, return, integration

我已经成功集成了facebook。现在我的要求是从 facebook 登录返回到我的应用程序时获取用户名和其他信息？谁能告诉我从 facebook 登录回来后获取返回字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:22:21.827

我认为您应该在 ios 6.0 中使用帐户框架和 SLRequest。请在链接下方查看。

> [http://www.techotopia.com/index.php/IPhone_iOS_6_Facebook_and_Twitter_Integration_using_SLRequest](http://www.techotopia.com/index.php/IPhone_iOS_6_Facebook_and_Twitter_Integration_using_SLRequest)

# shell - awk 命令和变量赋值

> ID：14053664
> 
> 赞同：1
> 
> 时间：2012-12-27T11:07:33.813
> 
> 标签：shell, unix, awk, aix

我有一个 MyFile.xml，其内容如下

```
<root>
    <Main>
            <someothertag>..</someothertag>
        <Amt Ccy="EUR">13</Amt>
    </Main>
                .
                .
                .
                some other tags
    <Main>
          <someothertag>..</someothertag>
             <Amt Ccy="SGD">10</Amt>
    </Main>
    <another>
      <Amt Ccy="EUR">10</Amt>
     </another>
</root> 
```

我有脚本文件，其内容如下

```
result = `awk '/<Main>/ { f=1 } f && /Amt/ { split($0,a,/[<>]/); s+=a[3] } /<\/Main>/ { f=0 } END {print  s }' MyFile.xml`
echo "The result is " $result 
```

但我得到的输出为

```
result: 0653-690 Cannot open =.
result: 0653-690 Cannot open 23.
The result is 
```

我的预期输出是

```
The result is 23 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:15:22.987

分配变量时， . 的两侧不应有空格`=`。

改成：

```
result=`awk '/<Main>/ { f=1 } f && /Amt/ { split($0,a,/[<>]/); s+=a[3] } /<\/Main>/ { f=0 } END {print  s }' MyFile.xml` 
```

# javascript - 当在当前对象中找不到时，Mustache js 采用父对象范围

> ID：14053665
> 
> 赞同：8
> 
> 时间：2012-12-27T11:07:41.840
> 
> 标签：javascript, mustache

根据胡子 RFC

> 基本模板中的 {{name}} 标记将尝试在当前上下文中查找名称键。如果没有 name 键，则不会渲染任何内容。

因此，我期望这样：

```
var template = '{{#anArray}}{{aString}}{{/anArray}}';

var json = {
    "aString":"ABC",
    "anArray": [1,{"aString":"DEF"}]
 }; 
```

给我一次渲染：

```
"DEF" 
```

但是 mustache.js 会在父级范围内查找值。这给了我

```
"ABCDEF" 
```

上下文是否实际上意味着包括所有父范围？

[http://jsfiddle.net/ZG4zd/20/](http://jsfiddle.net/ZG4zd/20/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T11:34:54.770

简短的回答：是的。

长一点的回答。`Context.prototype.lookup`做一个while循环，在当前上下文中查找一个标记，它是父上下文，而有一个父上下文。

相关代码：

```
Context.prototype.lookup = function (name) {
    var value = this._cache[name];

    if (!value) {
      if (name === ".") {
        value = this.view;
      } else {
        var context = this;

        //Iterate ancestor contexts
        while (context) {
          if (name.indexOf(".") > 0) {
            var names = name.split("."), i = 0;

            value = context.view;

            while (value && i < names.length) {
              value = value[names[i++]];
            }
          } else {
            value = context.view[name];
          }

          if (value != null) {
            break;
          }

          context = context.parent;
        }
      }

      this._cache[name] = value;
    }

    if (typeof value === "function") {
      value = value.call(this.view);
    }

    return value;
  }; 
```

# c++ - PQXX 链接错误问题

> ID：14053666
> 
> 赞同：1
> 
> 时间：2012-12-27T11:07:43.213
> 
> 标签：c++, sql, mingw, libpqxx

我成功地为 PostgreSQL 构建了 PQXX。这适用于带有 CODE::BLOCKS IDE 的 Windows 7 和 MinGW 现在经过多次寻找错误后，我有了一个几乎可以链接的程序。我得到这三个奇怪的错误，

> fu000001.o:(.idata$2+0xc)||未定义对`libpqxx_a_iname'的引用|
> 
> fu000004.o:(.idata$2+0xc)||未定义对`libpqxx_a_iname'的引用|
> 
> nmth000000.o:(.idata$4+0x0)||未定义引用` *nm* __ZTVN4pqxx14connect_directE'|

我有点茫然在这里任何帮助将不胜感激

-罗兰

# wcf - 如何从 biztalk 调用 WCF 服务

> ID：14053669
> 
> 赞同：0
> 
> 时间：2012-12-27T11:08:03.797
> 
> 标签：wcf, biztalk, orchestration

我是新手`Biztalk`（也是堆栈溢出）我想接收一个`xml schema file`包含 2 位数字并将其发送到 WCF 服务，该服务将对它们进行一些算术运算并在文件中给我答案。我已经尝试了很多，但不幸的是无法成功。

我做了什么...

我创建了一个服务并将其托管到`IIS`. 它运行良好。我已经通过`(WCFTestClient.exe)`. 然后我从生成的项目中创建了一个`biztalk project`和服务。`Consume WCF`然后我部署了这个项目。并相应地配置了接收和发送端口，但没有运气.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:40:39.897

我自己解决了问题。实际上，我在 Biztalk 管理控制台中的暂停服务消息中阅读了错误消息，经过一番谷歌后，我能够解决该问题。

# python - 烧瓶中的 POST 请求和 Content-Type "application/json" 没有响应

> ID：14053670
> 
> 赞同：4
> 
> 时间：2012-12-27T11:08:07.847
> 
> 标签：python, json, post, http-headers, flask

我在使用 Flask 视图时遇到问题，该视图应返回内容类型为“application/json”的响应以响应 POST 请求。具体来说，如果我这样做：

```
curl -v -d 'foo=bar' http://example.org/jsonpost 
```

对此观点：

```
@app.route('/jsonpost', methods=['GET', 'POST'])
def json_post():
    resp = make_response('{"test": "ok"}')
    resp.headers['Content-Type'] = "application/json"
    return resp 
```

我得到某种连接重置：

```
* About to connect() to example.org port 80 (#0)
*   Trying xxx.xxx.xxx.xxx... connected
* Connected to example.org (xxx.xxx.xxx.xxx) port 80 (#0)
> POST /routing/jsonpost HTTP/1.1
> User-Agent: curl/7.19.7 (i486-pc-linux-gnu) libcurl/7.19.7 OpenSSL/0.9.8k zlib/1.2.3.3 libidn/1.15
> Host: example.org
> Accept: */*
> Content-Length: 7
> Content-Type: application/x-www-form-urlencoded
>
< HTTP/1.1 200 OK
< Server: nginx/1.2.4
< Date: Thu, 27 Dec 2012 14:07:59 GMT
< Content-Type: application/json
< Content-Length: 14
< Connection: keep-alive
< Set-Cookie: session="..."; Path=/; HttpOnly
< Cache-Control: public
<
* transfer closed with 14 bytes remaining to read
* Closing connection #0
curl: (18) transfer closed with 14 bytes remaining to read 
```

相反，如果我这样做：

```
curl -d 'foo=bar' http://example.org/htmlpost 
```

至：

```
@app.route('/htmlpost', methods=['GET', 'POST'])
def html_post():
    resp = make_response('{"test": "ok"}')
    resp.headers['Content-Type'] = "text/html"
    return resp 
```

我得到了预期的完整响应（200-ok）

```
{"test": "ok"} 
```

顺便说一句，如果我向同一个 JSON 路由发送 GET 请求：

```
curl http://example.org/jsonpost 
```

我也得到了预期的回应..有什么想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T21:11:23.973

感谢 Audrius 的评论，我追踪到 uWSGI 和 nginx 之间的交互问题的可能根源：显然，如果您在请求中收到 POST 数据，则*必须*在返回响应之前阅读它。

例如，这解决了我的问题。

```
@app.route('/jsonpost', methods=['GET', 'POST'])
def json_post():
    if request.method == 'POST':
        dummy = request.form
    resp = make_response('{"test": "ok"}')
    resp.headers['Content-Type'] = "application/json"
    return resp 
```

[如uWSGI 的作者 Roberto De Ioris](https://stackoverflow.com/a/5114508/396655)所述，另一种解决方案涉及传递`--post-buffering 1`​​给uWSGI 。

我仍然不明白为什么设置为时不会出现`Content-Type`问题`"text/html"`

# ios - 带圆角的 UIView：我忘记了一些东西

> ID：14053675
> 
> 赞同：0
> 
> 时间：2012-12-27T11:08:37.990
> 
> 标签：ios, quartz-graphics

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我有这个自定义 UIView：

```
#define ANNOTATION_WIDTH 250
#define ANNOTATION_HEIGHT 200

@implementation CustomView

- (id)initwithTitle:(NSString* )title subTitle:(NSString* )subTitle
{
    CGRect annotationFrame =
    CGRectMake(10, 10, ANNOTATION_WIDTH, ANNOTATION_HEIGHT);

    if ([self initWithFrame:annotationFrame])
    {
        self.backgroundColor = [UIColor redColor];
        self.opaque = YES;
        /*
        UILabel* nameLabel =
        [[UILabel alloc] initWithFrame:CGRectMake(0, 0, ANNOTATION_WIDTH, 20.0)];

        nameLabel.backgroundColor = [UIColor whiteColor];
        nameLabel.textAlignment = NSTextAlignmentCenter;
        //nameLabel.text = coordinate.name;
        nameLabel.text = title;
        [nameLabel sizeToFit];
        [nameLabel setFrame: CGRectMake(0,
                                        0,
                                        nameLabel.bounds.size.width + 8.0,
                                        nameLabel.bounds.size.height + 8.0)];
        [self addSubview:nameLabel];

        UILabel* placeLabel =
        [[UILabel alloc] initWithFrame:CGRectMake(25, 0, ANNOTATION_WIDTH, 20.0)];

        placeLabel.backgroundColor = [UIColor whiteColor];
        placeLabel.textAlignment = NSTextAlignmentCenter;
        //placeLabel.text = coordinate.place;
        placeLabel.text = subTitle;
        [placeLabel sizeToFit];
        [placeLabel setFrame:CGRectMake(25,
                                        0,
                                        placeLabel.bounds.size.width + 8.0,
                                        placeLabel.bounds.size.height + 8.0)];
        [self addSubview:placeLabel];
        */
    }

    return self;
} 
```

我将显示一个标题和一个子标题，但现在该代码是注释，因为我正在测试一些东西。

要将此自定义视图添加到 UIViewController 我这样做：

```
#import "ViewController.h"
#import "CustomView.h"
#import <QuartzCore/QuartzCore.h>

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    CustomView* cView = [[CustomView alloc] initwithTitle:@"Titulo" subTitle:@"Subtitulo"];
    cView.layer.cornerRadius = 10;
    cView.layer.masksToBounds = YES;

    [self.view addSubview:cView];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

如果我没有显示标题和子标题，也没有看到我的 customView，但我显示了标题和子标题，我只会看到圆角的左上角。

我也试过这个，但它不起作用：

```
CustomView* cView = [[CustomView alloc] initwithTitle:@"Titulo" subTitle:@"Subtitulo"];
cView.layer.cornerRadius = 10;
cView.clipsToBounds = YES; 
```

**有没有办法在不添加任何子视图的情况下显示带有圆角的 UIView？**

我不知道发生了什么，我也不知道为什么我只得到圆角左上角。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:13:51.390

你试过这个吗

```
[self.layer setCornerRadius:10];
[self.layer setMasksToBounds:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:36:00.810

试试这个：

```
cView.layer.cornerRadius = 10.0f;
cView.layer.masksToBounds = YES;
cView.layer.opaque = NO;
[self.view addSubview:cView]; 
```

# firefox-addon - 使用端口与侧边栏库进行通信

> ID：14053680
> 
> 赞同：0
> 
> 时间：2012-12-27T11:09:00.453
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在使用 Daniel Buchner 的侧边栏库。
- [https://builder.addons.mozilla.org/package/25177/latest/](https://builder.addons.mozilla.org/package/25177/latest/)

插件是否可以与侧边栏通信。

```
/*** main.js ***/

var sidebarPanel = require('sidebar')sidebar({
    header: false,
    width:'200px',
    url: data.url('panel.html'),
    onDomReady: function(){
        this.injectAssets({
            css: [data.url('panel.css')],
            js: [data.url('panel.js')]
        });
    }
});
sidebarPanel.port.on('msg', function(sidebarmessage){
    console.log(sidebarmessage);
});
sidebarPanel.port.emit('msg', 'hello sidebar'); 
```

```
/*** panel.js ***/

self.port.on('msg', function(addonmessage){
    console.log(addonmessage);
});
self.port.emit('msg', 'hello addon'); 
```

我已阅读“使用端口”文档，但无法找到解决方案。 [https://addons.mozilla.org/en-US/developers/docs/sdk/1.12/dev-guide/guides/content-scripts/using-port.html](https://addons.mozilla.org/en-US/developers/docs/sdk/1.12/dev-guide/guides/content-scripts/using-port.html)

我尝试修改 page-mod 示例以使用端口，但未成功。这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T07:52:40.683

您链接到的侧边栏模块不是官方 SDK api，并且（现在我查看代码）不具有能够通过异步消息传递进行通信的典型 SDK 模式。在目前的状态下，它只是无法做到这一点。

# c - 在c中打印数组元素时出现意外输出

> ID：14053683
> 
> 赞同：0
> 
> 时间：2012-12-27T11:09:21.247
> 
> 标签：c, arrays

我正在创建一个简单的 c 程序，下面程序的输出应该是 2 但我得到 50 不知道为什么（我是 c 的新手）请让我知道我在哪里失踪

```
#include<stdio.h>
int main(int argc, char** argv) {
   int a[4]={'1','2','2','\0'};
   printf("The value of a is %d",a[1]);
   return 0;
} 
```

[这是实时输出](http://codepad.org/GflPS2mo)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T11:11:08.303

[您使用ascii 字符代码](http://www.asciitable.com/)初始化了数组。 `'2'`具有整数值 50。

将数组初始化为

```
int a[4]={1,2,2,0}; 
```

如果您希望它包含整数 1,2,2,0。或者

```
#include<stdio.h>
int main(int argc, char** argv) {
   char a[4]="121";
   printf("The value of a is %c",a[1]);
   return 0;
} 
```

如果您想要一个可以被视为字符串的字符数组。（请注意`%c`此处使用格式说明符。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T11:23:35.050

当您编写时，`int a[4]={'1','2','2','\0'};`您实际上使用数字 1 和 2 的 ASCII 代码初始化了数组。这是因为您将它们括在单引号中，从而使它们成为字符而不是整数。因此，数组实际上采用了值`int a[4]={49,50,50,0};`
来纠正它，您应该编写不带引号的整数：

```
int a[4]={1,2,2,0}; 
```

另请注意，整数数组不需要以`'\0'`. 这仅适用于字符数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-27T11:11:13.417

`50`是 的 ASCII 码`'2'`。

如果您想修复它，请替换`'2'`为。`2`

当使用像 C 这样的字符文字时，`'2'`实际上将它们视为整数类型。当您使用`%d`格式说明符打印它时，您是在告诉 C 将值打印为整数。

如果要保留这样的数组元素：`'2'`，则需要将 printf 格式更改为在控制台`%c`中获取 a 。`2`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T11:19:40.297

这条线

```
int a[4]={'1','2','2','\0'}; 
```

告诉编译器创建一个长度为 4 的整数数组，并将右侧花括号中的整数放入其中。

中的字符`C`是1字节整数，`1`是一个字符，`1`表示它的ASCII码的整数值，即50。所以数组的第一个元素的值是50。

要修复你应该写

```
int a[4]={1,2,2,0}; 
```

请记住，它`0`不能用作数组结束标记，因为它只是一个数字。

如果你想得到`122`输出然后做

```
char a[4]={'1','2','2','\0'};
printf("The value of a is %s",a); 
```

因为字符串`C`是带有`0`终止符号的字符数组。

您也可以让编译器为您计算值

```
char a[]={'1','2','2','\0'}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T11:19:53.573

您分配的是字符而不是整数：

笔记

```
'2' means char       use %c
 2  manes int        use %d
"2" means string.    use %s 
```

都是不同的：

在您的代码中，您可以打印 2：

```
int main(int argc, char** argv) {
   char a[4]={'1','2','2','\0'};
   printf("The value of a is %c",a[1]);
   return 0;
} 
```

# c# - ObservableCollection 和 CollectionView

> ID：14053684
> 
> 赞同：1
> 
> 时间：2012-12-27T11:09:23.353
> 
> 标签：c#, wpf, listbox, observablecollection, collectionviewsource

我正在编写一个从本地数据库读取数据并将它们显示在列表框中的应用程序（我在 WPF 中工作）。

我有一个 DVD 对象，它的属性是 db 的列。此 DVD 对象还实现 INotifyPropertyChanged。“MyDVDs”是指 db 的表。一旦创建了这些对象，我将创建一个继承自 ObservableCollection 的类，并从构造函数中的“MyDVDs”中获取数据。但是，我不仅需要从列表框中添加、删除和更新数据，还需要对它们进行排序和过滤。这是 ObservableCollection 的代码：

```
class ObservableDVD : ObservableCollection<DVD>
{
    private ICollectionView collection;

    public ObservableDVD(MyDVDs e)
    {
        foreach (DVD d in e.DVDs)
        {
            this.Add(d);
        }
        Collection = CollectionViewSource.GetDefaultView(this);
    }

    public ICollectionView Collection
    {
        get { return collection; }
        private set { collection = value; }
    }

} 
```

我想知道，这是个好方法吗？？还是我可以做得更好？

在项目的 MainWindow 中，当 Load_Window 事件触发时，我将 Collection 属性分配给 listbox.ItemSource（在 MainWindow 代码隐藏中，我声明了一个明显引用 ObservableDVD 对象的私有字段）。我有一些按钮可以让我执行我之前告诉你的操作。在按钮的事件头中，我直接更新和修改 ObservableDVD 对象，而不是它的属性 Collection。但是，Collection 属性也反映了这些更改。

为什么会出现这种行为？对我来说没关系，但我不明白为什么会这样。是因为通知吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:43:15.423

属性 Collection[引用](http://msdn.microsoft.com/en-us/library/490f96s2.aspx)了 ObservableDVD 的视图。作为参考意味着指向内存中的相同数据。

[ObservableCollection 类](http://msdn.microsoft.com/en-us/library/ms668604.aspx)表示一个动态数据集合，它在添加、删除项目或刷新整个列表时提供通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T13:45:13.453

您指定的集合只是 ObservableDVD 集合的“视图”。这意味着两者实际上都指向内存中的相同数据，它们不是两个独立的东西。例如，当您将过滤器应用于集合时，“视图”可以是项目的子集。

否则说，您的 ObservableDVD 包含整个数据集的“数据表”，而 ICollectionView 允许您通过自定义逻辑操作哪些记录/对象对用户可见。

# java - 图像类型的getter setter方法？

> ID：14053687
> 
> 赞同：1
> 
> 时间：2012-12-27T11:09:43.467
> 
> 标签：java, image, swing, awt, javabeans

如何在 bean 中使用图像类型。我的 bean 反映了一个人的个人资料，该个人资料具有一组字符串和他们的个人资料图片。我不确定图像类型数据的 getter 和 setter 方法的类型。

```
 private Image image; //what replaces Image? 

 public void setImage(TYPE image) {
    this.image= image;
   }

   public TYPE getImage() {
    return Image;
} 
```

请注意我想存储可显示的对象，并在另一个类中使用 get 方法来显示图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:00:58.513

您可能应该使用`Icon`（或`ImageIcon`）。要在 Swing 应用程序中显示图像，最简单的方法是使用 a`JLabel`并使用`Icon`. 所以这可能是你的 bean 应该包含的内容。

# android - 在 Android 中处理请求的 Http Core

> ID：14053695
> 
> 赞同：0
> 
> 时间：2012-12-27T11:10:12.390
> 
> 标签：android, http, apache-httpcomponents

[链接](http://hc.apache.org/httpcomponents-core-ga/httpcore/examples/org/apache/http/examples/ElementalHttpServer.java)中的服务器是否在 Android 中工作？

当我尝试使用构造函数时，

```
HttpService(HttpProcessor processor, ConnectionReuseStrategy connStrategy, HttpResponseFactory responseFactory, HttpRequestHandlerResolver handlerResolver, HttpParams params) 
```

Eclipse 说没有定义构造函数。Eclipse 提供了一个快速修复来将构造函数更改为：

```
HttpService(HttpProcessor proc, ConnectionReuseStrategy connStrategy, HttpResponseFactory responseFactory) 
```

在这种情况下，我将如何为我的请求注册处理程序？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:19:32.777

使用`setHandlerResolver`方法设置处理程序。[关联](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/protocol/HttpService.html#setHandlerResolver%28org.apache.http.protocol.HttpRequestHandlerResolver%29)

# jquery - 数学 - 除以余数

> ID：14053696
> 
> 赞同：6
> 
> 时间：2012-12-27T11:10:13.960
> 
> 标签：jquery, math

> **可能重复：**
> [JavaScript 中的整数除法](https://stackoverflow.com/questions/4228356/integer-division-in-javascript)

希望这是一个简单的问题，基本上我需要这样做：

分频器 = 15

数字 = 50

显然 15 可以除以 50 的 3 次，余数为 5，有没有一种简单的方法可以用数学来实现？

显然，将 50 除以 15 会给我一个四舍五入的数字，我只想要尽可能低的结果，如果有任何剩余并且小于 15 就不要管它。

有什么帮助吗？

干杯，香农

编辑：

感谢阿迪尔：

```
x = 50;
y = 15;
res = x % y;
x = (x - res) / y;
// x = 3 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-27T11:10:52.963

您可以使用[模运算符](http://msdn.microsoft.com/en-us/library/ie/9f59bza0%28v=vs.94%29.aspx) `%`来获得除法后的余数。

**[现场演示](http://jsfiddle.net/rajaadil/XNhec/)**

```
remainder = 50 % 15; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:11:56.097

要获得剩余，请使用模数。(除法余数)

```
x= 50 % 15 
```

# android - Android - 单击 ActionBar 应用程序图标，创建新的活动实例

> ID：14053702
> 
> 赞同：5
> 
> 时间：2012-12-27T11:10:46.447
> 
> 标签：android, android-intent, android-activity, android-actionbar

我的 Android 应用程序中有一个 ActionBar（API 级别 14）。有一个带有我的应用程序图标的主页按钮。在 MainActivity 我在 EditText 视图中写了一个短文本。当我导航到 PreferenceActivity 时，图标会显示一个箭头来指示我，我可以导航到主页 Activity (MainActivity)。

```
 // PreferenceActivity-onCreate
  ActionBar actionBar = getActionBar();
  actionBar.setDisplayHomeAsUpEnabled(true); 
```

我在 ActionBar 中单击该应用程序图标以返回 MainActivity

```
// PreferenceActivity
@Override
public boolean onOptionsItemSelected(MenuItem item) 
{
   switch (item.getItemId()) 
   {
     case android.R.id.home:
        Intent intent = new Intent(this, MainActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
        return true;
     default:
        return super.onOptionsItemSelected(item);
   }
} 
```

现在我的 MainActivity 再次创建，EditText 中的文本消失了。我以为我可以通过 Intent.FLAG_ACTIVITY_CLEAR_TOP 保持 MainActivity 的活力。我想要一种行为，就像我在设备上使用我的返回按钮一样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T13:28:20.780

如果要返回 的现有实例`MainActivity`，则需要执行以下操作：

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

单独使用 CLEAR_TOP 会导致`MainActivity`创建一个新的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T20:45:29.493

我相信这是这样做的正确方法。[https://stackoverflow.com/a/15933890/238768](https://stackoverflow.com/a/15933890/238768)

使用 Intent.FLAG_ACTIVITY_CLEAR_TOP 将导致与 Gepro 想要做的完全相反的行为！

# python - While循环中的Python For循环，以特定值开始for循环

> ID：14053704
> 
> 赞同：4
> 
> 时间：2012-12-27T11:10:54.943
> 
> 标签：python, variables, for-loop, while-loop, initialization

几天前我开始学习 Python，在编写代码时遇到了一个程序。

这是我想使用 C++ 代码做的事情

```
number = SOME_NUMBER;
while(1) {
    for(int i=number; i<sizeOfArray; i++) {
        // do something
    }
    number = 0;
} 
```

基本上，对于我的 for 循环的第一次迭代，我想从数字开始。然后每隔一次我通过for循环，我想从0开始。

我现在能想到的一种 hacky 想法是：

```
number = SOME_NUMBER
for i in range(0, len(array)):
    if i != number:
        continue
    // do something

while True:
    for i in range(0, len(array)):
        // do something 
```

这是最好的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T11:14:07.950

what is the problem with this?

```
starting_num = SOME_NUMBER
while True:
    for i in xrange(starting_num, len(array)):
        # do code
    starting_num = 0 
```

it does exactly what you want.

however, i think there are better ways to do things especially if the solution seems "hacky".

if you gave an idea of what you wanted to do, maybe there is a better way

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T11:14:29.563

I don't see why you couldn't just do the same thing you are in C:

```
number = SOME_NUMBER
while True:
    for i in range(number, len(array)):
        # do something
    number = 0 
```

BTW, depending on which version of Python you're using, `xrange` may be preferable over `range`. In Python 2.x, `range` will produce an actual list of all the numbers. `xrange` will produce an iterator, and consumes far less memory when the range is large.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T11:18:57.553

在 Python 中，跨过传统意义上的集合并不理想。循环 - 迭代 - 对象的能力由对象控制，因此您无需像`for`在 C++ 中的循环中那样手动单步执行计数器。

据我了解，您在这里尝试做的是多次对a 中的每个项目执行相同的代码`list`（Python 中没有*数组）。*

要做到这一点：

```
def whatever_function(foo):
   # some code here that works on each item on the list
   # foo is an item of the list

while True:
   map(whatever_function, some_list) 
```

# java - 使用带有自定义端口的 Jmeter localhost

> ID：14053705
> 
> 赞同：0
> 
> 时间：2012-12-27T11:11:01.730
> 
> 标签：java, apache, testing, localhost, jmeter

我有一个 Java 网络服务器。它使用本地主机和端口 9090。（自定义，但不是 8080）

```
(Socket[addr=/127.0.0.1,port=59507,localport=9090]) // in the log 
```

它工作正常，我不会使用 Apache JMeter 对其进行测试。

这是我的结构（HTTP 请求与其名称匹配。） ![在此处输入图像描述](../Images/a157759eb252cd9514ab45190e9ca0cc.png)

当我启动它时 - 日志显示以下错误：

```
<httpSample t="157" lt="0" ts="1356605101476" s="false" lb="/index.html" rc="Non HTTP response code: org.apache.http.client.ClientProtocolException" rm="Non HTTP response message: null" tn="Thread Group 1-1" dt="text" by="2021"/>
<httpSample t="10" lt="0" ts="1356605101637" s="false" lb="/about.html" rc="Non HTTP response code: org.apache.http.client.ClientProtocolException" rm="Non HTTP response message: null" tn="Thread Group 1-1" dt="text" by="2021"/>
<httpSample t="16" lt="0" ts="1356605101651" s="false" lb="/404e.html" rc="Non HTTP response code: org.apache.http.client.ClientProtocolException" rm="Non HTTP response message: null" tn="Thread Group 1-1" dt="text" by="2021"/> 
```

如果您给我一些提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T15:29:51.850

首先检查 localhost:9090 在浏览器中使用您使用的 URL 是否正常工作。然后尝试将 localhost 更改为 127.0.0.1

# javascript - 通过脚本中的扩展名更改 chrome 中的标签颜色

> ID：14053711
> 
> 赞同：1
> 
> 时间：2012-12-27T11:11:17.420
> 
> 标签：javascript, google-chrome

我正在为 chrome 浏览器开发扩展。有没有办法通过使用扩展从脚本更改铬的标签颜色？（类似于 chrome.tabs.setcolor(tab.id, 'red')）

我想在某些事件触发时更改颜色（颜色可以更改多次，每次都可以不同，等于触发它的事件类型）。所以我不能使用主题，因为我认为主题永远设置选项卡颜色并且将来无法更改。

# android - 使用 XmlPullParser 读取 xml

> ID：14053717
> 
> 赞同：1
> 
> 时间：2012-12-27T11:11:46.833
> 
> 标签：android, xml, xmlpullparser

我在 /mnt/sdcard 中有以下 xml 文件。我想`item type=provider`从以下文件中获取版本。该文件很大（1500 行），还有其他类型。这是简化的文件。在我对此节点感兴趣的文件中：

```
<Item Type="Provider" Version="19.0.0.0"Checksum="EShHVeNtW1xTfEvLvATwqA==" FileSize="2746200" /> 
```

我想从这个节点获取版本，即 19.0.0.0。

这是我的xml文件：

```
<Manifest guid="FD29E1EF-A5C4-4D19-ACC8-8C98C7E91B02" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" PackageType="Full" Scope="APPROVED">
   <Items>
        <Item id="fcxm-8ikj-olk-ffgcxh3" Checksum="EShHVeNtW1xTfEvLvATwqA==" value="f425921f-b6ef-4e58-8a14-fcbd0d7e50e9" />
        <Item Type="question" Version="19.0.0.0"Checksum="EShHVeNtW1xTfEvLvATwqA==" FileSize="2746200" />
        <Item Type="Provider" Version="19.0.0.0"Checksum="EShHVeNtW1xTfEvLvATwqA==" FileSize="2746200" />
    </Items>
</Manifest> 
```

我在互联网上搜索，我得到了[这个](https://stackoverflow.com/questions/4138754/getting-an-attribute-value-in-xml-element)迭代到所有项目类型的节点。我不想迭代。

如何在 Android 中使用`XmlPullParser`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:20:03.623

你好，可以试试这个

```
private void parseContent(XmlPullParser parser) 
    throws XmlPullParserException,IOException,Exception {
    int eventType;
    while((eventType=parser.next()) != XmlPullParser.END_TAG) {
        if (eventType == XmlPullParser.START_TAG) {
            Log.d(MY_DEBUG_TAG,"Parsing Attributes for ["+parser.getName()+"]");
            Map<String,String> attributes = getAttributes(parser);
        }
        else if(eventType==...);
        else {
            throw new Exception("Invalid tag at content parse");
        }
    }
}

private Map<String,String>  getAttributes(XmlPullParser parser) throws Exception {
    Map<String,String> attrs=null;
    int acount=parser.getAttributeCount();
    if(acount != -1) {
        Log.d(MY_DEBUG_TAG,"Attributes for ["+parser.getName()+"]");
        attrs = new HashMap<String,String>(acount);
        for(int x=0;x<acount;x++) {
            Log.d(MY_DEBUG_TAG,"\t["+parser.getAttributeName(x)+"]=" +
                    "["+parser.getAttributeValue(x)+"]");
            attrs.put(parser.getAttributeName(x), parser.getAttributeValue(x));
        }
    }
    else {
        throw new Exception("Required entity attributes missing");
    }
    return attrs;
} 
```

# php - sql查询查找负债三个月或更长时间的用户

> ID：14053719
> 
> 赞同：0
> 
> 时间：2012-12-27T11:11:51.253
> 
> 标签：php, mysql, sql

我有一个小应用程序（PHP/MySQL）来管理公寓。有一张`condos`桌子，`apartments`一张桌子，一张`owners`桌子和一张`account`桌子。

在`account`表中，我有字段`month_paid`和`year_paid`（除其他外）。

每次有人支付月费时，表格都会更新月数和年数。

这是一些示例表结构：

`condos`桌子：

```
+----+------------+---------+
| id | condo_name | address |
+----+------------+---------+ 
```

`apartments`桌子：

```
+----+----------------+----------+
| id | apartment_name | condo_id |
+----+----------------+----------+ 
```

`owners`桌子：

```
+----+--------------+------------+
| id | apartment_id | owner_name |
+----+--------------+------------+ 
```

`account`桌子：

```
+----+----------+----------+------------+-----------+
| id | owner_id | condo_id | month_paid | year_paid |
+----+----------+----------+------------+-----------+ 
```

因此，如果我在帐户表中有这样的记录，则表示该所有者在 2012 年 8 月付款：

```
+----+----------+----------+------------+-----------+
| id | owner_id | condo_id | month_paid | year_paid |
+----+----------+----------+------------+-----------+
|  1 |        1 |        1 |          8 |      2012 |
+----+----------+----------+------------+-----------+ 
```

我想知道的是如何进行 SQL 查询（使用 PHP）来获取欠债三个月或更长时间的业主，或者换句话说，是过去三个月或更长时间未支付费用的业主。

如果可能，数据应按公寓分组，如下所示：

```
CONDO XPTO:
Owner 1: 3 months debt
Onwer 2: 5 months debt

CONDO BETA
Owner 1: 4 months debt
Onwer 2: 6 months debt 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T11:15:05.393

您需要编写如下查询：

```
SELECT
    *
FROM
    owners
JOIN
    account
ON
    owners.id = account.owners_id
WHERE
    CONCAT( account.year_paid , '-' , account.month_paid , '-01') <= DATE_ADD( NOW(), INTERVAL -3 MONTH ); 
```

可悲的是，这就是我所能提供的所有信息。如果您可以显示更详细的表格结构，我可以为您提供更多帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:23:47.450

以这种方式存储它会让你自己变得更难。现在您需要自己计算以月为单位的差异。您不能只检查月份，因为例如在 1 月份，您还需要将年份考虑在内。

```
SELECT *
FROM owners
JOIN account ON owners.Id=account.ownersId
WHERE (    
  account.year_paid = year(now)
  AND (
    month(now)-account.month_paid>=3
  )
) OR (
  account.year_paid = year(now)-1
  AND (
    month(now)>=3
    OR (
      account.month_paid - month(now) <= 10
      AND month(now) = 1
    )
    OR (
      account.month_paid - month(now) <= 11
      AND month(now) = 2
    )
  )
) OR (
  account.year_paid < year(now)-1
) 
```

最好将 lastpaid 时间存储在一个列中，`datetime`这样您就可以使用日期函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:26:26.227

如果我理解正确，那么您有两个不同的字段用于蛾和年份。为什么？如果你有一个字段说`paid_date`这个查询对你有用

`SELECT owner_id from account WHERE NOW()>DATE_ADD(paid_date, INTERVAL 3 MONTH)`

如果您可以更改字段，那么对不起。我希望这是有帮助的。

**UPD：** 那么我建议您在查询中连接两个字段（`year`和`month`），使其在`YYYY-MM-DD`格式上看起来像真实日期，并在`DATE_ADD`函数而不是`paid_date`字段中使用它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:01:28.483

试试这个，

```
select o.owner_name,c.condo_name   from owners o join account a join condos c
on o.id=a.owner_id  and c.id =a.condo_id  where year(curdate())=a.year_paid 
and  a.month_paid<month(curdate())-3 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T12:49:01.200

修复您的帐户表。s 是可选的`DROP COLUMN`，如果它们有依赖关系，您可能希望保留它们。

```
ALTER TABLE account ADD COLUMN date_paid DATETIME;
UPDATE account SET date_paid = CONCAT(year_paid,'-',month_paid,'-01');
--ALTER TABLE account DROP COLUMN year_paid;
--ALTER TABLE account DROP COLUMN month_paid; 
```

这就是您获取数据的方式。`LEFT OUTER JOIN`如果您缺少任何所有者或公寓记录，我使用了 s。

```
SELECT c.condo_name, 
o.owner_name, 
min(PERIOD_DIFF(DATE_FORMAT(now(), '%Y%m'), DATE_FORMAT(date_paid, '%Y%m'))) min_months_debt 
FROM account a
LEFT OUTER JOIN condos c ON (c.id = a.condo_id)
LEFT OUTER JOIN owners o ON (a.owner_id = o.id)
WHERE a.date_paid <= DATE_ADD(NOW(), INTERVAL -3 MONTH)
GROUP BY c.condo_name, o.owner_name
ORDER BY c.condo_name 
```

PS 以上仅适用于已支付至少一笔款项的公寓业主。如果您想查看从未付款的公寓业主，那么您将不得不将公寓与帐户表之外的业主相关联。或者，当您将公寓与所有者关联时，您可能会创建一个帐户记录，在这种情况下您没有问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T14:33:36.807

我还没有看到任何真正产生你正在寻找的答案。以下通过计算当前月份减去最近的付款日期来计算债务月份。然后它将结果连接成一个字符串：

```
select c.condo_name, o.owner_name, 
       cast(YEAR(now)*12+MONTH(now)) - MAX(year_paid*12+month_paid) as varchar(255)), ' month(s) debt'
from account a join
     owners o
     on o.id = a.owner_id join
     condos c
     on c.id = a.condo_id
group by c.condo_name,, o.owner_name
order by 1, 2 
```

如果您只想要拖欠付款人，则添加一个`where`条款以达到以下效果：

```
where YEAR(now)*12+MONTH(now)) - MAX(year_paid*12+month_paid)  > 1 
```

因为您没有付款月份的日期，所以您可能会错过一些临界条件。

# vim - 从完成弹出菜单中获取所选项目

> ID：14053720
> 
> 赞同：2
> 
> 时间：2012-12-27T11:11:52.083
> 
> 标签：vim

我正在尝试为一些 PLSQL 函数/过程参数实现智能全向完成。每一个这样的函数都可能被重载，所以在一开始，我提供所有参数，来自所有重载版本。例如，假设我们有这个：

```
 procedure test(param1 varchar2, param2 varchar2);  <= overload 1
    procedure test(p1 integer, p2 integer);    <= overload 2
    procedure test(p1 date, p2 date, p3 date); <= overload 3 
```

我输入时提供的列表`exec test(|<=cursor here`是：

```
param1 [o1]
param2 [o1]
p1 [o2]
p2 [o2]
p1 [o3]
p2 [o3]
p3 [o3] 
```

如果用户`"p1 [o2]"`从完成弹出菜单中选择，我想记住他的选择，并且对于下一次完成尝试，提供仅使用 [o2] 参数过滤的列表或对其进行不同排序，以便首先显示 [o2] 项目.

问题是我无法弄清楚如何从完成弹出菜单中获取用户选择并接受的项目。有没有一种干净的方法来实现它？有趣的是，我想到了整个用户案例场景，但我什至在开始之前就被卡住了。在不知道用户从列表中选择了什么的情况下，很难实现这种“自学习/自适应”代码完成系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-30T20:06:52.720

从 Vim 8.0 和 neovim 0.1.5 开始（至少，我不确定它是什么时候添加的），现在有一个`v:completed_item`变量包含`complete-items`与最后一个完成相关的匹配对象（参见帮助页面）（具体来说，最后一个`CompleteDone`事件）。如果完成失败或您离开并重新进入插入模式，则此变量包含一个空字典。

但是，为了使用它来确定是否显式选择了完成项，您必须设置`completeopt+=noinsert`. 否则`v:completed_item`在完成菜单打开后将始终设置为第一项，即使您没有明确选择它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:26:23.590

最近的 Vim 补丁 7.3.598 引入了该`CompleteDone`事件，但您也可以使用该`CursorMovedI`事件，该事件在插入完成候选后触发。

光标 ( ) 之前的关键字`matchstr(strpart(getline('.'), 0, col('.') - 1), '\k\+$')`是插入的补全 then；将其保存在变量中，并在下一次完成时考虑。（您可能还需要保存光标位置（通过`getpos()`），以避免考虑何时在另一个地方发生全新的、不相关的完成。

# push-notification - 推送注册表警报 j2me 的自定义消息

> ID：14053724
> 
> 赞同：1
> 
> 时间：2012-12-27T11:12:17.170
> 
> 标签：push-notification, java-me, midlet, java-wireless-toolkit

当我在我的 j2me 应用程序中收到推送通知时，它会在启动时显示其内置消息，我想要做的是放置我自己的消息说“你想启动应用程序吗？” 当收到调用应用程序的通知时！如何改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:27:51.803

应用程序开发人员不太可能被允许在真实手机中做类似的事情，这就是原因。

此功能是安全敏感功能的一部分（如果您对详细信息感兴趣，请查看文档，如[适用于 GSM/UMTS 兼容设备的推荐安全策略](http://jcp.org/aboutJava/communityprocess/maintenance/jsr118/MIDP_2.0.1_MR_addendum.pdf)）。

如果允许这样做，恶意软件应用程序不仅可以改变措辞，还可以改变标准系统消息的真正含义，从而诱使用户做错事。

* * *

例如，想象一个应用程序正在跟踪用户位置，或发送付费短信，或类似对个人隐私或预算*敏感*的事情，提到的消息更改为：

> ## 点击是赢得百万美元。

作为电话用户，我最不希望我的设备允许这样的技巧。

# php - PHP 和 MATLAB base64_decode 的工作方式不同

> ID：14053726
> 
> 赞同：1
> 
> 时间：2012-12-27T11:12:21.540
> 
> 标签：php, matlab, base64, decode

我正在尝试在 MATLAB 中编写 base64 解码函数。
在 PHP 中，如果我调用内置的 base64 解码函数

```
$decodedStr = base64_decode($encodedStr) 
```

`$decodedStr`是我想要的结果。

现在，我需要`$encodedStr`从 PHP 传递到 MATLAB（作为参数），在 MATLAB 中，我对字符串进行解码，与上面的 PHP 代码相同。

```
function base64_decode_matlab(x)
    %x is same value as $encodedStr
    base64 = org.apache.commons.codec.binary.Base64;
    decodedStr1 = base64.decode(uint8(x));
end 
```

但是，结果似乎与 PHP 的结果不同。我的 MATLAB 代码有什么问题，如何使 MATLAB base64 解码函数与 PHP`base64_decode`函数一样工作？

# android - 如何编写具有非常深导航的 Android 多窗格应用程序

> ID：14053730
> 
> 赞同：11
> 
> 时间：2012-12-27T11:12:26.497
> 
> 标签：android, android-fragments

**TL;DR：** 具有类似于 Spotify iPad 应用程序的深度导航的多窗格应用程序在 Android 上的外观和工作方式如何，以及如何实现这一点？

**长版：** 我正在开发一个应用程序，用户可以在其中看到项目列表，然后可以更深入地研究这些项目。这些项目详细信息页面可以再次打开相关项目的列表，这些项目又具有详细信息页面等。作为一个电话应用程序，这些将是单独的活动，它们可能看起来并相互链接，如下所示： ![用户单击概览中的项目#2 并获取详细信息页面，然后单击](../Images/6930c904737cb340b94c698e36c7acb4.png) ![在这里，事物列表是打开的，用户可以选择查看](../Images/d93999338a20de28a57da43d16b6f5a7.png)

在模型中，用户看到初始概览，然后从第一个列表中选择“项目#2”。一个新的活动打开，向他显示项目 #2 的详细信息。在这里，他选择查看与项目#2 相关的事物列表。第三张图中新打开的 Activity 显示了这个列表，点击一个打开这个东西的详细信息。他可以随心所欲地浏览内容。

这适用于通常的 Android 活动。我正在努力将应用程序带到平板电脑上，并正在考虑如何最好地实现这一点。该计划是创建具有相同概念的多窗格布局。它与 iPad Spotify 应用程序的工作方式非常相似（一旦他们创建了特定于平板电脑的布局，看看他们如何将其带到 Android 上将会很有趣）。

在平板电脑布局中，每次单击项目或列表名称都会将相应的子项目打开为一个新的窗格，该窗格从右侧进入动画。与上述示例相同的工作流程如下所示：

![初始多窗格平板电脑布局](../Images/e04c144d30e3c0d4a553f25aabfc406c.png) ![用户选择项目 #2，项目详细信息页面将在右侧窗格中打开](../Images/6ec9cbbc4d32ed039d04a53a365b105b.png) ![在详细信息页面上，用户选择](../Images/4f7e6f386ec422dd737bfe2c86386ac0.png) ![单击 Thing #3 可在右侧窗格中打开事物详细信息](../Images/7bda9724f5e6a462c3af71cb7a20b8a2.png)

我不确定如何最好地实现这种导航模式。导航深度有限的多窗格应用程序（如 GMail）可以使用包含所有片段的静态 ViewGroup（LinearLayout 可以）构建，并且深入导航会替换右侧下一个容器的内容并为此设置动画（参见[在 SO 上的 CommonWares 实现](https://stackoverflow.com/a/12318422/238664)。

这表明自定义 ViewGroup 将是可行的方法。如果它必须显示一个子页面（即“事物列表”），那么它会在 ViewGroup 中创建一个新的子页面，该子页面的宽度是片段屏幕的一半，然后滚动可见区域，以便刚刚与之交互的窗格并且新的孩子是可见的。要将其正确链接到 FragmentTransaction，以便后堆栈正常工作，我猜它会是这样的：

```
View newPane = container.addChild();
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.add(newPane, new ListOfThingsFragment(2));
ft.remove(paneOnRight, fragmentOnRight);
ft.commit();
container.animateToRight(); 
```

我看不到在 FragmentTransaction 中制作动画的方法。

欢迎反馈。我的雇主普遍赞成我们开发的开源框架，所以如果这是更广泛的利益，如果我能想出一个可重用的解决方案，我很乐意分享。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T10:20:40.880

我有一些研究时间并想出了这个问题的解决方案（这个问题我很早就想看到解决方案，甚至在你问它之前）。由于存在一些 IP 边界，我无法真正展示整个代码，但我将把它放在此动画的主要部分。

有两个关键工具：是的`setCustomAnimations`，`LayoutTransition` 据我所知，您需要单独设置动画以使其工作。

因此，让我们开始一些代码，您将使用水平 LinearLayout 定义 XML，并确保在其上包含以下行。

```
android:animateLayoutChanges="true" 
```

这将自动生成一个标准，该标准`LayoutTransition`会翻译保留在布局中的片段/视图和 alpha（输入或输出）正在包含或从布局中删除的片段/视图。试试看。

所以在这个布局膨胀之后，我们将捕获这个 LayoutTransition 并根据我们的需要对其进行欺骗：

```
LayoutTransition lt = myLinearLayout.getLayoutTransition();
lt.setAnimator(LayoutTransition.APPEARING, null);
lt.setAnimator(LayoutTransition.DISAPPEARING, null);
lt.setStartDelay(LayoutTransition.CHANGE_APPEARING, 0);
lt.setStartDelay(LayoutTransition.CHANGE_DISAPPEARING, 0); 
```

使用该代码，我们将删除 alpha 动画并消除过渡中的任何延迟（因为我们希望所有翻译一起触发）。

现在只需几个简单的片段事务就可以使其工作，在初始化期间，我们膨胀该布局并在其上放置一些片段：

```
setContentView(R.layout.main); // the layout with that Linear Layout
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.add(R.id.main, frag1, FRAG_1_TAG); // it's good to have tags so you can find them later
ft.add(R.id.main, frag2, FRAG_2_TAG);
ft.add(R.id.main, frag3, FRAG_3_TAG);
ft.hide(frag3);
ft.commit(); 
```

现在交易很简单：

```
FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
ft.setCustomAnimations(R.anim.push_left_in, R.anim.push_left_out, R.anim.push_right_in, R.anim.push_right_out);
Fragment left = getFragmentManager().findFragmentByTag(FRAG_1_TAG);
Fragment right = getFragmentManager().findFragmentByTag(FRAG_3_TAG);

ft.hide(left);
ft.show(right);

ft.addToBackStack(null);
ft.commit(); 
```

最后说明：

要进行更深入的导航，只需`FragmentTransactions`将片段添加到 LinearLayout 和`hide`/或`detach`左侧片段即可。

为了使片段在线性布局上工作，在运行时设置它们的 LinearLayout.LayoutParams.weight 很重要，类似于以下应用于片段视图的代码

```
((LinearLayout.LayoutParams) view.getLayoutParams()).weight = 1; 
```

要使其在手机上也能正常工作，只需应用常见的[多屏幕支持](http://developer.android.com/guide/practices/screens_support.html)模式即可。

最后一点，注意在设备旋转期间正确管理布局状态，因为它并非全部由系统自动处理。

快乐编码！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T16:47:39.427

我们的应用程序遇到了同样的问题。我们给自己的约束：

*   动态窗格数
*   每个窗格的大小可以不同
*   窗格内的片段必须在方向更改时正确保留。

鉴于这些限制，我们构建了一个称为 PanesLayout 的新布局。你可以在这里查看：

[https://github.com/cricklet/Android-PanesLibrary](https://github.com/cricklet/Android-PanesLibrary)

它基本上允许您轻松添加任意数量的动态大小的窗格并将片段附加到这些窗格。希望你觉得它有用！:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T11:21:43.927

动画部分的部分答案：您**可以**使用 FragmentTransaction 制作动画：

```
ft.setCustomAnimations(android.R.anim.slide_in_left, 
    android.R.anim.slide_out_right); 
```

更新：请参阅 Reto Meier 本人关于片段动画的回答：[https ://stackoverflow.com/a/4819665/1007169](https://stackoverflow.com/a/4819665/1007169)

# java - 在java中的构造函数中获取泛型类型

> ID：14053732
> 
> 赞同：1
> 
> 时间：2012-12-27T11:12:37.747
> 
> 标签：java, generics, reflection, constructor, generic-programming

有没有办法在构造函数中找到泛型类型？

```
 public class geneticarg {
    public static void main(String[] args) {
    a<String> a1 = new a<String>("a");
    a<String> a2 = new a<String>(null); // gives NPE
    System.out.println(a1.getClazz());
    }
}

class a<T> {

private Class<T> clazz;
private T element;

public a(T clazz) {
this.clazz = (Class<T>) clazz.getClass();
this.element = clazz;
// what if clazz is null ?

}
//getter and setter
} 
```

**编辑**：不一定总是 String 来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:17:03.740

您必须在构造函数中传递类型。您可以使用静态因子来避免必须设置两次。

```
A<String> a1 = A.wrap("a");
A<String> a2 = A.forClass(String.class);

class A<T> {
    private final Class<T> clazz;
    private final T element;

    private A(T t, Class<T> clazz) {
        this.clazz = clazz;
        this.element = t;
    }

    public static <T> A<T> wrap(T t) {
        return new A<T>(t, (Class) t.getClass());
    }

    public static <T> A<T> forClass(Class<T> clazz) {
        return new A<T>(null, clazz);
    }

    //getter and setter
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T11:27:35.323

在您的情况下避免类型擦除的唯一方法是使用通用超类。你需要继承你的泛型类型，然后你可以访问参数化类型，它可以通过反射 API 获得：

```
public abstract class a<T> {

    private Class<T> clazz;
    private T element;

    public a(T obj) {
        ParameterizedType type = (ParameterizedType) this.getClass().getGenericSuperclass();
        this.clazz = (Class<T>) type.getActualTypeArguments()[0];
        this.element = obj;
    }
}

class StringA extends a<String> {
    public StringA(String obj) {
        super(obj);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:30:52.587

彼得说得很对。我想添加更多信息：

`Class<T>`传递给构造函数的实例称为*类型标记*。

# javascript - 为什么这个功能不起作用

> ID：14053733
> 
> 赞同：-1
> 
> 时间：2012-12-27T11:12:38.747
> 
> 标签：javascript, html

我想将字符串转换为整数。我知道有内置函数可以做到这一点，但我仍然想知道为什么这个函数不起作用：
**JS：** -另存为`js1.js`

```
function atoi(str)
 {
  l = str.length;
  s2 = "0"
  for(i=0;i<l;i++)
   {
    if(str.charAt(i) != '1' || str.charAt(i) != '2' || str.charAt(i) != '3' || str.charAt(i) != '4' || str.charAt(i) != '5' || str.charAt(i) != '6' || str.charAt(i) != '7' || str.charAt(i) != '8' || str.charAt(i) != '9' || str.charAt(i) != '0')
     {
        break;
     }
     s2 = s2.concat(str.charAt(i));
   }
  return Number(s2); 
 } 
```

**HTML：**

```
<html>
 <head>
  <script src="js1.js">
  </script>
  <Script>
    function printnum()
     {
      n = atoi(document.getElementById('numtxt').value)
      document.write(n);
     }
  </script>
  <title>
    Test JS1 functions
  </title>
 </head>
 <body>
  <input type="text" id="numtxt">
  <input type="button" onclick="printnum()">
 </body>
</html> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T11:14:37.823

你放弃了，`break`如果第一个字符不是 a`1` **或者**不是 a`2`等等。

如果是，`1`那么它不是`2`，你`break`。

你想使用`&&`not `||`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:17:36.907

你所拥有的这个东西总是真实的，比如：

```
If a!=3||a!=4 
```

a 可以具有的任何值，这始终是正确的，更多的术语也是如此

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:24:34.190

你应该使用 && 而不是 ||

```
if(str.charAt(i) != '1' && str.charAt(i) != '2' && 
str.charAt(i) != '3' && str.charAt(i) != '4' &&
str.charAt(i) != '5' && str.charAt(i) != '6' &&
str.charAt(i) != '7' && str.charAt(i) != '8' &&
str.charAt(i) != '9' && str.charAt(i) != '0') 
```

# jquery - Adding static data to kendo combo box

> ID：14053739
> 
> 赞同：0
> 
> 时间：2012-12-27T11:12:58.217
> 
> 标签：jquery

How do we add static data to kendo combobox?

Here is the code:

```
$("#CbxBusinessSegment").data("kendoCombobox").dataSource.add({ text: "PS", value: "3" }); 
```

I am getting...

> JavaScript runtime error: Unable to get property 'dataSource' of undefined or null reference"

...error because of that line.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:19:50.453

尝试这个

```
$("#CbxBusinessSegment").data("kendoComboBox").dataSource.add({ text: "PS", value: "3" }); 
```

在`kendoComboBox`,B 的 Box 应该是大写。

[例子](http://jsbin.com/ebutaw/3/edit)

# algorithm - alternative to sort algorithm less than O(nlog(n))

> ID：14053740
> 
> 赞同：0
> 
> 时间：2012-12-27T11:13:24.407
> 
> 标签：algorithm, sorting

I have recieve as input a list of candidates for work so that the list I recieve is already sorted by requirments of the salary for each one and also is grase from the university(this parameter is not sorted). example:

danny 13000$ 75.56

dan 9000$ 100

bob 5000$ 98

in such a list I need to find the two candidates with the higher grades so that sum of both salary is not more than 10000$ (I can assume their is no two candidates with the same grade and there are no two pair of students with the same sum of grade (94+90 = 91 + 93))

I need to find them in comlexity of O(n).

I understand I can not do a sort algorithm (the min is n*log(n)) so How can I do that ?

is it possible ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:22:24.320

`O(n)`解决方案（假设数字 10,000 是固定的）：

```
arr <- new empty array of size 10000
for each i from 1 to 10000:
   arr[i] = "most valuable" worker with salary up to i
best <- -infinity
for each i from 1 to 5000:
   best = max{ best, arr[i] + arr[10000-i]}
return best 
```

这个想法是保存一个数组，在每个条目中，您保存最多要求该薪水的“最佳”候选人（这是在第一个循环中完成的）。

在第二个循环中，您检查所有可行的可能性并找到最大值。

* * *

请注意，第一个循环的天真方法是`O(n)`使用可怕的常量（每次迭代都是`O(n)`，并且完成了 10,000 次）。但是，您可以`arr`通过从最低工资开始使用 DP 进行构建，并执行以下操作：

```
arr[i] = max {arr[i-1], best worker with salary i} 
```

DP 解决方案`O(n)`只遍历数组一次（或正式的最大工资`O(W+n)`在哪里`W`）。

* * *

另请注意 - 这是[背包问题](http://en.wikipedia.org/wiki/Knapsack_problem)的私人案例，只能选择 2 个元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:30:21.107

因为它是按薪水排序的，从两个指针开始。i 指向起点（最低销售额），j 指向最高销售额。现在，当销售量超过限制时，减少 j。现在增加 i 并减少 j 保持在限制以下。跟踪 i 和 j 的最高等级。

# c# - 检测 PHP 链接导致 C# 中的文件下载

> ID：14053741
> 
> 赞同：1
> 
> 时间：2012-12-27T11:13:27.997
> 
> 标签：c#, php, file, download, detect

我似乎找不到我的问题的有效答案，我想知道是否有人可以提供帮助。基本上我的网站上有一个链接，可以下载一个 zip 文件：

```
http://***.com/download.php?id=1 
```

如果您在网页上激活此链接，它将弹出另存为对话框，并让您使用默认名称保存文件`ThisIsMyZipFile.zip`

我的问题是，在 c# 下，如果我使用`new Uri("http://***.com/download.pgp?id=1").IsFile`它会返回`false`，所以如果不执行 a`webclient DownloadString`并查看前两个字节是否为`PK`.

此外，即使手动下载为字符串检测`PK`标题并保存文件，我也无法找出我的网站想要使用的默认文件名，`ThisIsMyZipFile.zip`因为我想使用相同的文件名。

请问有人知道解决这两个问题的好方法吗？

***更新***

感谢 Paul 和他的回答，我创建了以下函数，它完全符合我的需要：

```
/// <summary>
/// Returns the responded HTTP headers of the given URL and if the link refers to the file it returns extra information about it.
/// </summary>
/// <param name="Url">The address.</param>
/// <returns>
/// null if a WebException is thrown
/// otherwise:
/// List of headers:
///     Keep-Alive          - Timeout value (i.e. timeout=2, max=100)
///     Connection          - The type of connection (i.e. Keep-Alive)
///     Transfer-Encoding   - The type of encoding used for the transfer (i.e. chunked)
///     Content-Type        - The type of Content that will be transferred (i.e. application/zip)
///     Date                - The servers date and time
///     Server              - The server that is handling the request (i.e. Apache)
///     AbsoluteUri         - The full Uri of the resulting link that will be followed.
/// The following key will be present if the link refers to a file
///     Filename            - The filename (not path) of the file that will be downloaded if the link if followed.
/// </returns>
public Dictionary<string, string> GetHTTPResponseHeaders(string Url)
{
    WebRequest WebRequestObject = HttpWebRequest.Create(Url);
    WebResponse ResponseObject = null;
    try
    {
        ResponseObject = WebRequestObject.GetResponse();
    }
    catch(WebException ex)
    {
        return null;
    }
    // Add the header inforamtion to the resulting list
    Dictionary<string, string> HeaderList = new Dictionary<string, string>();
    foreach (string HeaderKey in ResponseObject.Headers)
        HeaderList.Add(HeaderKey, ResponseObject.Headers[HeaderKey]);

    // Add the resolved Uri to the resulting list
    HeaderList.Add("AbsoluteUri", ResponseObject.ResponseUri.AbsoluteUri);

    // If this is a zip file then add the download filename specified by the server to the resulting list
    if (ResponseObject.ContentType.ToLower() == "application/zip")
    {
        HeaderList.Add("Filename", ResponseObject.ResponseUri.Segments[ResponseObject.ResponseUri.Segments.Length-1]);
    }

    // We are now finished with our response object
    ResponseObject.Close();

    // Return the resulting list
    return HeaderList;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:19:23.430

`Uri.IsFile`对 URI 执行静态检查，即查看“方案”部分（包括冒号的第一位）是否为`file:`. 它不查看通过请求驻留在 URI 中的资源返回的实际内容。（事实上​​，因为它实际上根本没有尝试联系服务器，所以 URI 实际上可能指向丢失的资源，但`IsFile`仍然可以工作。）

如果您想查看资源的内容是否属于特定类型，那么您必须：

1.  检索资源的 HTTP 标头（如果它是 HTTP 或 HTTPS 资源：即，如果“方案”是`http`或`https`）。
2.  检索（至少部分）资源并检查它。

您当前正在执行 2，但是对于 HTTP 资源（带有 HTTP URL），执行 1 会更干净、更便宜。您可以通过执行 HTTP`HEAD`请求来执行此操作（与`GET`or `POST`、&c 相对）。这将返回 HTTP 标头而不返回资源本身。代码看起来像：

```
var request = WebRequest.Create("http://somewhere.overtherainbow.com/?a=b");
request.Method = "HEAD";
WebResponse response = request.GetResponse();
//TODO check status code
string contentType = response.ContentType;
response.Close(); 
```

内容类型将为您提供文件类型的一些指示，但许多二进制文件将仅作为八位字节流返回，因此如果您希望区分不同的二进制文件，您可能仍需要检索和检查资源本身的魔术字节文件类型。（内容类型应该足以让您区分二进制文件和网页。）

因此，完整的解决方案可能是：

1.  发送`GET`资源请求。
2.  检查响应状态以确保没有错误。
3.  检查内容类型标头以查看我们是否有二进制八位字节流。
4.  从响应流中读取两个字节以查看文件是否以“PK”开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:26:04.537

如果没有实际向该 URL 发送 HTTP 请求，您绝对无法检测到给定 URL 会导致文件被下载。

现在到第二个问题。您可以发送 HTTP 请求来下载文件，然后检查包含文件名的 Content-Disposition 标头：

```
using (var client = new WebClient())
{
    using (var stream = client.OpenRead("http://*.com/download.php?id=1"))
    {
        var disposition = client.ResponseHeaders["Content-Disposition"];
        if (disposition != null)
        {
            var cd = new ContentDisposition(disposition);
            if (!cd.Inline && !string.IsNullOrEmpty(cd.FileName))
            {
                using (var outputStream = File.OpenWrite(cd.FileName))
                {
                    stream.CopyTo(outputStream);
                }
            }
        }
        else
        {
            // The web server didn't send a Content-Disposition response header
            // so we have absolutely no means of determining the filename
            // you will have to use some default value here if you want to store it
        }
    }
} 
```

# applescript - Applescript to capture window

> ID：14053749
> 
> 赞同：2
> 
> 时间：2012-12-27T11:14:05.057
> 
> 标签：applescript

I am trying to create an applescript to capture a window. The keyboard shortcut is cmd+shift+4 then space. I am not able to use this in applescript.

My code :

```
tell application "system events"
keystroke "21, 49" using {command down, shift down}
end tell 
```

It doesnt work. The problem with the scrip it using space bar. I need to hold `cmd`, `shift` & `4` and then press `space` bar.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:53:15.327

尝试：

```
tell application "System Events"
    keystroke (ASCII character 36) using {command down}
    delay 1
    keystroke space
end tell 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T10:55:37.897

这个 Applescript 可能比使用屏幕捕获命令行的 GUI 脚本更适合您。有关更多信息，请查看[屏幕截图手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/screencapture.1.html)

```
set fileName to do shell script "date \"+Screen Shot  %Y-%m-%d at %H.%M.%S.png\""
tell application "System Events" to set thePath to POSIX path of desktop folder
do shell script "screencapture  -W " & "\"" & thePath & "/" & fileName & "\"" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-13T06:14:12.810

如果您只想达到这一点，请使用以下命令： 使用 {shift down, command down}
告诉应用程序“系统事件”键代码 21 延迟 0.1 键代码 49 end tell

# c# - 简化 if 语句

> ID：14053755
> 
> 赞同：0
> 
> 时间：2012-12-27T11:14:24.680
> 
> 标签：c#, .net, linq, if-statement

我怎样才能简化这样的陈述：

```
 var someList = new List<someType>();

    if (String.IsNullOrEmpty(groupId))
    {
        someList = CTX.Values.Include(c => c.Customer).ToList();
    }
    else
    {
        someList = CTX.Values.Include(c => c.Customer).Where(c => c.GroupId== groupId).ToList();

    } 
```

区别仅在`.Where(c => c.GroupId== groupId)`. 是否可以`String.IsNullOrEmpty(groupId)`在查询语句中包含条件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T11:18:05.023

您可以分多个步骤构建查询。仅在不为空时才添加该`Where`部分。`groupId`

查询只会在您调用`ToList()`.

```
var values = CTX.Values.Include(c => c.Customer);

if(!String.IsNullOrEmpty(groupId))
  values = values.Where(c => c.GroupId == groupId);

someList = values.ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T11:17:26.843

也许这个？

```
someList = CTX.Values.Include(c => c.Customer)
       .Where(c => String.IsNullOrEmpty(groupId)
                   || c.GroupId== groupId)
       .ToList(); 
```

**由 PLB 请求编辑 :)**

```
bool isGroupValid = String.IsNullOrEmpty(groupId);
someList = CTX.Values.Include(c => c.Customer)
       .Where(c => isGroupValid
               || c.GroupId== groupId)
       .ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:18:55.067

你可以加：

```
.Where(c => String.IsNullOrEmpty(groupId)) 
```

那是：

```
CTX.Values.Include(c => c.Customer)
    .Where(c => c.GroupId == groupId || c => String.IsNullOrEmpty(groupId))
    .ToList(); 
```

# macos - Using QWebView with a static build of Qt

> ID：14053762
> 
> 赞同：1
> 
> 时间：2012-12-27T11:14:45.260
> 
> 标签：macos, qt

Is it possible to access QtWebKit when Qt has been configured to link statically? I can use QWebView easily on a dynamic Qt, but when I use the `-static` flag to configure Qt, QtWebKit does not get built. Can that be done, and if so, how?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T16:29:49.187

[您可以在PhantomJS](http://phantomjs.org)中看到它是如何完成的。我们包含 Qt 和 WebKit 的副本（出于许多与这里无关的原因）并静态构建所有内容。最终结果是在 Windows、Mac OS X 和 Linux 上的单个 PhantomJS 可执行文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T14:55:24.423

它被禁用是因为 WebKit 的静态构建已经被破坏了很长一段时间。如果您自己解决问题，则可以完成。上游（Apple）似乎没有任何兴趣解决这些问题。

# java - libGDX: Textfield with BitmapFont(true) renders the text outside the borders

> ID：14053763
> 
> 赞同：2
> 
> 时间：2012-12-27T11:14:55.293
> 
> 标签：java, libgdx, textfield

I'm experimenting with TextField and having problems with it when flipping the font. My orthographic camera is set to yDown = true. With that settings, the text is flipped so I came up with a solution to set BitmapFont's flip constructor parameter to true. But then when I try the code below. The text "Hello World" is rendering outside it's ninepatch borders. Here's a [screenshot](http://www.flickr.com/photos/ezekielbaniaga/8314264994/) of it:

![screenshot](../Images/b04f9c92881fde7b309ca5440ae22ca0.png)

```
 TextFieldStyle tfs = new TextFieldStyle();
    NinePatch np = new NinePatch(new Texture(Gdx.files.internal(ResourceConstants.IMAGE_NINEPATCH)), 8, 8, 8, 8);

    tfs.font = new BitmapFont(true);
    tfs.fontColor = Color.BLACK;
    tfs.background = np;

    TextField tf = new TextField("Hello World", tfs);
    tf.x = 50;
    tf.y = 90;
    tf.width = 100;
    tf.height = 32;
    addActor(tf);
    tf.pack(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T08:02:11.873

问题在于在 tfs 上调用 draw 的方法（这是设置坐标的位置）。我认为字体的笛卡尔 y 坐标与其他 GDX 对象相反，因为排版需要以某种方式工作。

所以如果你打电话

```
myFont.draw(spriteBatch, "Hello World", 0, 0); 
```

然后你会期望消息被绘制在左下角。但这是错误的！字体本身是从**左上角**绘制的，因此您的消息将绘制在屏幕的左下角，底部边缘下方。***我们甚至无法看到消息。***

但是如果我们改变坐标：

```
myfont.draw(spriteBatch, "box2d x: " + String.format("%2.2f", x), 10, 20); 
```

我们将看到该消息，因为我们在负 y 方向上为它提供了足够的空间来显示。

鉴于行为不端的字体在 Y 方向上表现不佳，并且呈现在您期望的**下方**，我怀疑上述误解确实是问题所在。

如果您不控制位图字体本身的任何绘图坐标，并且这仅由 TextField 类处理，并且无论您的文本字段大小如何，字体总是超出范围，那么我会怀疑一个错误在 GDX 中。您可以尝试向论坛询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-15T07:33:07.563

我也有同样的效果。如果添加`TextField`, 和之后，例如，`CheckBox`为此小部件集 setScale 添加 and ，那么您将看到此效果

```
TextField textfield = new TextField("Text field",skin);
stage.addActor(textfield);

CheckBoxStyle checkBoxStyle = skin.get(CheckBoxStyle.class);
checkBoxStyle.font.getData().setScale(2f);

CheckBox checkbox = new CheckBox("CheckBox", checkBoxStyle);
stage.addActor(checkbox); 
```

# visual-c++ - 如何唯一识别 USB 设备？

> ID：14053764
> 
> 赞同：21
> 
> 时间：2012-12-27T11:15:02.090
> 
> 标签：visual-c++, usb, usb-drive, usbserial, usb-flash-drive

是否可以通过唯一标识符来识别 USB 设备，例如操作系统具有 Mac-ID、硬盘 ID、以太网卡 ID 具有唯一标识符？我知道可以轻松更改 USB 分区的卷序列号，也可以在用户格式化时更改。

但是是否有某种“USB 硬盘 ID 或 USB 硬件 ID”的 ID，可以使用 WMI 服务通过 MFC（Visual C++ 或 C#）检索？这样的标识符对物理设备来说是唯一的吗？请澄清...

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-27T13:34:52.163

任何 USB 设备中可用的“唯一编号”最接近的等价物是 VID 和 PID、供应商和产品 ID。它用于识别设备并为其安装正确的驱动程序。但是，它是同一产品的同一组数字，不足以识别您手中的特定设备。因此，实施许可证验证程序毫无用处，大概是您所追求的。

只有特定*类型*的 USB 设备实现了序列号。由于驱动器格式化程序会生成卷序列号，因此您会从闪存驱动器中意外获取它。也无用，它可以很容易地改变。USB wifi 适配器可以工作，制造商*必须*生成唯一的 MAC 地址。

有一类 USB 设备*非常*适合此目标。通用名称是“加密狗”，它们就是为此而生的。当您购买一个时，您还将获得可以链接到您的程序的软件，该软件提供了一种防篡改方式来验证许可证号，这是许可证验证过程的另一个重要部分，通常是薄弱环节。[有关此Wikipedia 文章](http://en.wikipedia.org/wiki/Software_protection_dongle)中的加密狗的更多信息。

# matlab - 如何在matlab中绘制第二个图而不是颜色编码

> ID：14053766
> 
> 赞同：5
> 
> 时间：2012-12-27T11:15:04.173
> 
> 标签：matlab, graph, colors

我刚开始我的硕士论文，我已经在我的 matlab 能力/理解方面遇到了麻烦。

问题是，我在行星/月球的表面上有一条轨迹（一个带有时间和坐标的.mat。然后我有一些带有时间和当时测量值的.mat。

我可以在 scatter() 中将其绘制为彩色编码轨迹（使用测量值和坐标）。这非常好用。

但是我的问题是我需要更复杂的东西。我现在需要获取轨迹，而不是对其进行颜色编码，我应该将测量的图形（值）（为每个点给出）添加到轨迹（并不总是一条直线）。我将添加一个小草图来解释我想要什么。红色箭头显示我想要添加到情节中的内容，绿色显示我拥有的内容。

![在此处输入图像描述](../Images/402a441f5b341d8967459f54d5586bec.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T13:21:18.363

您始终可以自己转换数据：（使用与@Shai 相同的符号）

```
x = 0:0.1:10;
y = x;
m = 10*sin(x); 
```

所以你需要的是每个数据点处曲线的法线向量：

```
dx = diff(x); % backward finite differences for 2:end points
dx = [dx(1) dx]; % forward finite difference for 1th point
dy = diff(y);
dy = [dy(1) dy];
curve_tang = [dx ; dy];
% rotate tangential vectors 90° counterclockwise
curve_norm = [-dy; dx];
% normalize the vectors:
nrm_cn = sqrt(sum(abs(curve_norm).^2,1));
curve_norm = curve_norm ./ repmat(sqrt(sum(abs(curve_norm).^2,1)),2,1); 
```

将该向量乘以测量值 ( `m`)，用数据点坐标偏移它，就完成了：

```
mx = x + curve_norm(1,:).*m;
my = y + curve_norm(2,:).*m; 
```

绘制它：

```
figure; hold on
axis equal;
scatter(x,y,[],m);
plot(mx,my) 
```

![直线_正弦](../Images/1f26e42e113106c8b70ac52abedae8a7.png)

这正是您想要的。这个例子只有一条直线作为坐标，但是这段代码可以很好地处理任何曲线：

```
x=0:0.1:10;y=x.^2;m=sin(x); 
```

![抛物线正弦](../Images/e6b40773d38c773d50118860b5691f7f.png)

```
t=0:pi/50:2*pi;x=5*cos(t);y=5*sin(t);m=sin(5*t); 
```

![circle_sine](../Images/5fee53c3dc37e0607b4927ca4934a9f2.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T13:28:10.597

如果我正确理解您的问题，您需要以一定角度围绕原点旋转实际数据。这非常简单，因为您只需要将坐标乘以[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_%28mathematics%29#Matrix_algebra)。然后，您可以按照评论中的建议，使用`hold on`和`plot`用旋转点覆盖您的图。

### 例子

首先，让我们生成一些类似于您的数据并创建散点图：

```
% # Generate some data
t = -20:0.1:20;
idx = (t ~= 0);
y = ones(size(t));
y(idx) = abs(sin(t(idx)) ./ t(idx)) .^ 0.25;

% # Create a scatter plot
x = 1:numel(y);
figure
scatter(x, x, 10, y, 'filled') 
```

现在让我们围绕 (0, 0) 以 45° 角旋转点（由 和 的值指定`x`） ：`y`

```
P = [x(:) * sqrt(2), y(:) * 100] * [1, 1; -1, 1] / sqrt(2); 
```

然后将它们绘制在散点图的顶部：

```
hold on
axis square
plot(P(:, 1), P(:, 2)) 
```

请注意，出于可视化目的，此处已完成其他操作：

1.  最终的 x 坐标已被拉伸（由`sqrt(2)`）到适当的长度。
2.  最终的 y 坐标已被放大（放大 100），以便旋转后的图突出。
3.  轴已成平方以避免失真。

这是你应该得到的：

![在此处输入图像描述](../Images/9887d5df1bb7161cc2cd5c8db6af299f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:13:23.247

您似乎对 3D 绘图感兴趣。如果我正确理解您的问题，您的二维曲线表示为`[x(t), y(t)]`。此外，您对每个点都有一些价值`m(t)`。因此，我们正在查看 3D 曲线图`[x(t) y(t) m(t)]`。你可以很容易地使用

```
plot3( x, y, m ); % assuming x,y, and m are sorted w.r.t t 
```

或者，您可以使用 3D 版本的 scatter

```
scatter3( x, y, m ); 
```

选择你的选择。

不错的情节顺便说一句。

祝你的论文好运。

# ios - 为 ios 应用程序收集 Web 数据

> ID：14053769
> 
> 赞同：-1
> 
> 时间：2012-12-27T11:15:10.547
> 
> 标签：ios, iphone, xcode, xcode4.5

有没有办法让应用程序从网站编译数据？我需要制作一个显示姓名、地址和一些简短详细信息的应用程序——但我需要管理员定期更新和贡献这些信息，而不需要我不断地将新信息添加到应用程序中。我以前没有做过这种应用程序，所以任何帮助或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:37:39.440

主要提供两种类型的网络服务

1.  肥皂
2.  休息。

使用解析技术（XML 解析、JSON 解析）取决于 Web 服务的类型来解析数据。
当 Web 服务发生某些变化时，这些信息将在您的应用程序中自动更新。
我希望你能有所了解。

# php - Zend_Mail_Storage_Imap fails but imap_open works

> ID：14053772
> 
> 赞同：0
> 
> 时间：2012-12-27T11:15:24.623
> 
> 标签：php, zend-framework, imap, fsockopen

I have written some code to fetch emails from a Gmail mailbox using Zend_Storage_Mail_Imap library. Till now, it was running fine on the development server (where imap_open was disabled). After I moved it to production(imap_open is enabled), the script has stoppped to work. Do I need to disable imap_open for it to work ?

**UPDATE:** Apparently, the issue is that of fsockopen(). The actual error message is:

Zend_Mail_Protocol_Exception with message 'cannot connect to host; error = Connection Timed Out (errno = 110)'

The relevant values in PHP.ini are:

allow_url_fopen = on

default_socket_timeout = 600 (on production) and 60 (on development)

I did find out, that inside the /library/Zend/Mail/Protocol/Imap.php, the timeout is mentioned as "const TIMEOUT_CONNECTION = 30".

# jquery - 繁琐的 JQuery 选择器

> ID：14053774
> 
> 赞同：2
> 
> 时间：2012-12-27T11:15:28.713
> 
> 标签：jquery, jquery-selectors

我正在尝试自学一些简单的 JQuery 并提出以下菜单系统。它是一个基本的基于 UL 和 LI 的嵌套菜单，内部 UL 使用 JQuery .show() 显示并使用 .hide() 隐藏。HTML如下：-

```
 <ul id="menu1" class="gtrmenu">
        <li><span class="parent"><img class="hidden-bg" src="images/arrow-down.png"/>Single Menu</span> 
            <ul class="children">
                    <li><a href="#">Blah blah</a></li>
                    <li><a href="#">Drivel</a></li>
                    <li><a href="#">Select something</a></li>
                    <li><a href="#">Choose me!!</a></li>
            </ul>
        </li>
    </ul>

    <ul id="menu2" class="gtrmenu menugroup2">
        <li><span id="menu2click" class="parent"><img class="hidden-bg" src="images/arrow-down.png"/>Grouped Menu</span>    
            <ul class="children">
                    <li><a href="#">Something here</a></li>
                    <li><a href="#">More Stuff</a></li>
                    <li><a href="#">Waffle etc</a></li>
            </ul>
        </li>
    </ul>

    <ul id="menu3" class="gtrmenu menugroup2">
        <li><span id="menu3click" class="parent"><img class="hidden-bg" src="images/arrow-down.png"/>Search</span>  
            <ul id="searchX" class="children">
                <li>
                    <form>
                        <input id="search" type="text" name="firstname">
                    </form>
                </li>
            </ul>
        </li>
    </ul>        

    <p>The quick brown fox jumps over the lazy dog</p> 
```

Javascript 和 JQuery 如下：-

```
function gtrMenu(menuID, groupClass, clickElement) {

    if (clickElement === undefined) {
        clickElement = menuID;
    }

    $(menuID + ' ul').css("minWidth", $('#menu1').width());

    $(clickElement).click(
        function() {   

            if ($(menuID + ' ul.children').is(":hidden")) {

                // Close any open menus within the same group.
                if (groupClass !== undefined){
                    $('ul.gtrmenu.' + groupClass + ' li ul.children:visible').not(menuID).closest('ul.gtrmenu').each(function(index){
                        //console.log(index + " " + $(this).attr("id"));
                        $(this).find('li .parent img').removeClass('visible-bg').addClass('hidden-bg');
                        $(this).find('ul.children').hide();
                    });
                }

                // Change style of arrow image.
                $(menuID + ' li .parent img').removeClass('hidden-bg').addClass('visible-bg');

                // Display the submenu
                $(menuID + ' ul.children').show();

            }
            else {

                // Revert style of arrow image.
                $(menuID + ' li .parent img').removeClass('visible-bg').addClass('hidden-bg');

                // Hide the submenu.
                $(menuID + ' ul.children').hide();

            }
        }
    );
} 
```

Javascript 由以下内容运行（它不会正确格式化为上面 HTML 的一部分，所以我在这里添加了它）：-

```
$(document).ready(function () {
            gtrMenu("#menu1");
            gtrMenu("#menu2", "menugroup2" , "#menu2click");
            gtrMenu("#menu3", "menugroup2" , "#menu3click");
        }); 
```

菜单可以是单个菜单，如“Single Menu”（menu1）所示；或者它可以被分组，如上面的“分组菜单”（与“搜索”分组）所示（菜单2和菜单3）。在分组菜单中，一次只能打开一个 - 如果用户打开了“分组菜单”并单击“搜索”，则“分组菜单”将关闭。

我很自豪地说这一切都有效:-) 但是，我在上面的组中查找打开菜单的选择器对我来说似乎很长而且很麻烦（它是注释掉的 console.log 行上方的行）。我的问题是：是否有更简单的方法来查找组内已经打开的菜单（以便它们可以关闭）？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:22:16.737

只要您没有将相同的类用于其他目的，您实际上可以通过删除不必要的特殊性来缩短选择器。`closest`此外，您可以使用选择器删除该方法`has`：

```
$('.gtrmenu.' + groupClass + ':has(.children:visible)').not(menuID) 
```

这就是说，我实际上建议您保留特异性，只是为了减少您选择您不打算选择的东西的可能性。

```
$('ul.gtrmenu.' + groupClass + ':has(li ul.children:visible)').not(menuID) 
```

# php - 无法使用准备好的语句将链接插入 MySql

> ID：14053777
> 
> 赞同：0
> 
> 时间：2012-12-27T11:15:43.140
> 
> 标签：php, mysql, sql, html

我创建了一个表单，它将数据插入 MySQL 数据库。这是表单字段，它们是 a 的一部分，`<form>`但是我没有在这里显示整个表单，只是产生问题的字段。

```
<tr> <td>Top 728x90 As</td><td><textarea name='topad'><?=$r['topad']?></textarea></td</tr>
<tr> <td>Sidebar 250x250 Ad</td><td><textarea name='sidebarad'><?=$r['sidebarad']?></textarea></td></tr> 
```

这部分代码处理输入并将其插入数据库。

```
if(isset($_POST['submit'])) {

    $topad = $_POST['topad'];
    $sidebarad = $_POST['sidebarad'];

    $update = $connection->prepare("UPDATE site SET topad = '$topad' , sidebarad = '$sidebarad' WHERE id=1");
    $update->execute(array());
} 
```

此代码的问题是，它不接受/处理涉及`<a href="#">`&`</a>`代码的数据部分。这与转义 HTML 字符无关，因为所有其他 HTML 标记（如`<img>`等）都按原样显示，这正是我想要的。

因此，每当我插入和`<a>`标记时，它就会消失，它既不会插入数据库中，也不会在按下提交按钮后显示在表单中。

更新：当使用双引号插入链接时，它会被接受。如果我使用单引号，它不会被处理。例如`<a href="someurl">`将在数据库中被接受，而`<a href='someurl'>`不会。

为什么会发生此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:21:24.100

原因是您使用的是准备好的语句，但值未参数化。试试下面，

```
$topad = $_POST['topad'];
$sidebarad = $_POST['sidebarad'];

$update = $connection->prepare("UPDATE site SET topad = :topad , sidebarad = :sidebarad WHERE id=1");
$update->execute(array(':topad' => $topad, ':sidebarad' => $sidebarad)); 
```

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

# html - Does HTML5 File API save the downloading file?

> ID：14053781
> 
> 赞同：1
> 
> 时间：2012-12-27T11:16:17.370
> 
> 标签：html, file-upload

In my example I'm trying to browse a file from a desktop through the `html` file. Is it possible to save the browsed file in some server or place it in some place?

Please let me know if this is possible.

# asp.net - Formview Editing Items in .cs File

> ID：14053785
> 
> 赞同：0
> 
> 时间：2012-12-27T11:16:58.210
> 
> 标签：asp.net, formview, c#

My formview datasource is a database table named "properties".

```
CREATE TABLE [dbo].[properties] (
[property_id]            INT        IDENTITY (1, 1) NOT NULL,
[property_type_code]     INT        NOT NULL,
[city_id]                INT        NULL,
[date_on_market]         DATETIME   NULL,
[property_name]          CHAR (25)  NULL,
[property_owner]         CHAR (25)  NULL,
[property_description]   CHAR (100) NULL,
[property_address]       CHAR (50)  NULL,
[vendor_requested_price] INT        NULL,
[other_property_details] CHAR (50)  NULL,
CONSTRAINT [Key7] PRIMARY KEY CLUSTERED ([property_id] ASC),
CONSTRAINT [Relationship15] FOREIGN KEY ([property_type_code]) REFERENCES [dbo].[ref_properties_type] ([property_type_code]),
CONSTRAINT [Relationship56] FOREIGN KEY ([city_id]) REFERENCES [dbo].[cities] ([city_id]) ON DELETE CASCADE); 
```

My Formview is like that :

```
`<asp:FormView ID="FormView1" runat="server" DataKeyNames="property_id" DataSourceID="SqlDataSource2" oniteminserted="FormView1_ItemInserted" oniteminserting="FormView1_ItemInserting">

            <InsertItemTemplate>

                property_type_code:
                <asp:TextBox ID="property_type_codeTextBox" runat="server" Text='<%# Bind("property_type_code") %>' />
                <br />
                date_on_market:
                <asp:TextBox ID="date_on_marketTextBox" runat="server" Text='<%# Bind("date_on_market") %>' />
                <br />
                property_name:
                <asp:TextBox ID="property_nameTextBox" runat="server" Text='<%# Bind("property_name") %>' />
                <br />
                property_owner:
                <asp:TextBox ID="property_ownerTextBox" runat="server" Text='<%# Bind("property_owner") %>' />
                <br />
                property_description:
                <asp:TextBox ID="property_descriptionTextBox" runat="server" Text='<%# Bind("property_description") %>' />
                <br />
                property_address:
                <asp:TextBox ID="property_addressTextBox" runat="server" Text='<%# Bind("property_address") %>' />
                <br />
                vendor_requested_price:
                <asp:TextBox ID="vendor_requested_priceTextBox" runat="server" Text='<%# Bind("vendor_requested_price") %>' />
                <br />
                other_property_details:
                <asp:TextBox ID="other_property_detailsTextBox" runat="server" Text='<%# Bind("other_property_details") %>' />
                <br />
                <asp:LinkButton ID="InsertButton" runat="server" CausesValidation="True" CommandName="Insert" Text="Insert" />
                &nbsp;<asp:LinkButton ID="InsertCancelButton" runat="server" CausesValidation="False" CommandName="Cancel" Text="Cancel" />
            </InsertItemTemplate>
            <ItemTemplate>
            &nbsp;
            &nbsp;<asp:Button ID="NewButton" runat="server" CausesValidation="False" 
                CommandName="New" Text="Add New" />
        </ItemTemplate>
        </asp:FormView>` 
```

If you pay attention there is no fields for "property_id" and "city_id" in formview. (I deleted them) My question is that: How can I edit these two columns' values ("property_id" and "city_id") before inserting? Because for example; "city_id" need to be a specific value accordingly "querystring". I hope I explained my problem clearly.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:36:16.580

您可以通过修改 OnItemInserting 事件上的值来实现此目的。

阅读您的 aspx 标记，您已经声明了事件“FormView1_ItemInserting”，因此在您的 cs 文件中，您必须具有 FormView1_ItemInserting 事件处理程序。

来自 MSDN：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.iteminserting.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.formview.iteminserting.aspx)

> “您还可以使用**Values**属性读取或修改新记录的字段值”

这里还有一个例子：

```
void EmployeeFormView_ItemInserting(Object sender, FormViewInsertEventArgs e)
  {

    MessageLabel.Text = "";

    // Iterate through the items in the Values collection
    // and verify that the user entered a value for each 
    // text box displayed in the insert item template. Cancel
    // the insert operation if the user left a text box empty.
    foreach (DictionaryEntry entry in e.Values)
    {
      if (entry.Value.Equals(""))
      {
        // Use the Cancel property to cancel the 
        // insert operation.
        e.Cancel = true;

        MessageLabel.Text += "Please enter a value for the " +
          entry.Key.ToString() + " field.<br/>";

      }
    }
  } 
```

但是对于您的问题，您必须添加一个特定的键：

```
 e.Values.Add("city_id", "yourcityidvalue"); 
```

# regex - 移动重定向和循环错误

> ID：14053790
> 
> 赞同：2
> 
> 时间：2012-12-27T11:17:20.323
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我正在开发小型 CMS，我通过`RewriteRule`in将所有原始目录更改为我想要的目录`htaccess`，还为移动设备用户添加了移动模板。所以我的网站有两个目录，一个用于计算机客户端，一个用于移动客户端，我使用以下代码检测移动代理并重定向到移动模板，但出现循环错误，有什么想法！？

这是我的重定向代码：

```
RewriteCond %{REQUEST_URI} !^/m/.*$
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteRule ^(.*)$ /m/ [L,R=302] 
```

这是我当前的 htaccess：

```
Options +FollowSymLinks
RewriteEngine On
# Change main URL 
RewriteRule ^m/ /mobile/index.php [QSA]
# Change content URL
RewriteRule ^/a/m/([a-zA-Z0-9\.]+)$ /mobile/index.php?pid=$1 [QSA] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:45:15.897

您需要检查 URI 是否也不是重写后的 URI ( `/mobile/...`)。您可以通过检查`%{THE_REQUEST}`或包括检查来做到这一点`/mobile`：

```
RewriteCond %{THE_REQUEST} !\ /m/.*
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteRule ^(.*)$ /m/ [L,R=302] 
```

或者：

```
RewriteCond %{REQUEST_URI} !^/a/m/.*$
RewriteCond %{REQUEST_URI} !^/m/.*$
RewriteCond %{REQUEST_URI} !^/mobile/.*$
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
RewriteRule ^(.*)$ /m/ [L,R=302] 
```

# mysql - 如何在酒店预订系统中获得取消预订房间的准确 mysql 查询？

> ID：14053798
> 
> 赞同：2
> 
> 时间：2012-12-27T11:17:53.100
> 
> 标签：mysql, sql

我正在用 php 和 mysql 做酒店预订系统项目我创建了下面的房间表

```
room_no| roo_id | room_type
 D1     |  1     | Deluxe
 R1     |  2     | AC
 R2     |  3     | Non Ac
 C1     |  4     | Cottage 
```

这张表是关于房间的，代表酒店的总房间。

这是 customer_booking 表，

```
customer_id | Cust_name | email | Address | room_type | room_no| cost|check_in | check_out
1 | satyawan |ss@gmail.com| xy | AC       |  R1    |5000 | 2012-12-26|2012-12-30
2 |satyawan  |   lahu@gmail.com|unr  |  Non A/C | R6 |            20002012-01-01|2012-12-07
3 |satyawan  |   lahu@gmail.com|unr  |  Non A/C | R8 |            2013-01-01  |2013-01-10
4 |satyawan  |   lahu@gmail.com|unr  |  Non A/C | R9 |            2013-01-10 |2013-01-16
5 |satyawan  |   lahu@gmail.com|unr  |  Non A/C | R6 |            2013-01-01 |2013-01-20 
```

我已经对这两个表的连接进行了查询，以获取未预订房间的排序数据。查询如下

```
SELECT *
FROM rooms 
LEFT JOIN customer_booking  
ON customer_booking.room_no = rooms.room_no
WHERE customer_booking.client_id IS NULL
OR (customer_booking.check_out >= 2013-01-01
AND customer_booking.check_in >= 2013-01-10)
OR (customer_booking.check_out <= 2013-01-01
AND customer_booking.check_out <= 2013-01-10) 
```

但我只想要未预订房间的数据。如果房间已经被预订，那么它必须表明这个房间在这个日期已经被预订了。

我对此一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:59:37.967

也许您正在寻找`NOT IN`.

```
SELECT * FROM rooms AS r WHERE r.room_no NOT IN (
   SELECT cb.room_no FROM customer_booking AS cb WHERE your_checkin_constraints); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:06:10.820

尝试使用此查询。如果最后一个字段`room_customer_id`为 0，则房间是空闲的，否则显示预订此房间的 customer_id。

```
SELECT rooms.*,COALESCE(customer_booking.customer_id,0) room_customer_id
FROM rooms 
LEFT JOIN customer_booking  ON 
   (customer_booking.room_no = rooms.room_no)
   and 
   (
      ('2013-01-01' between customer_booking.check_in and customer_booking.check_out)
      or 
      ('2013-01-10' between customer_booking.check_in and customer_booking.check_out)
      or 
      (customer_booking.check_in between '2013-01-01' and '2013-01-10')
    ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:13:43.837

```
 SELECT r.room,case when r.room_no is null then 'Available'
    else 'Not Available' end
    FROM rooms r
    LEFT JOIN customer_booking cb 
    ON cb.room_no = r.room_no
    AND cb.check_out <= cur_date()-1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T12:35:26.763

试试这样，你会得到d个没有预订的房间

```
SELECT * FROM room r WHERE 
 not exists (
   SELECT cb.room_no FROM customer_booking cb where cb.room_no=r.room_no); 
```

# mongodb - MongoDB C# 驱动程序'找不到光标'

> ID：14053803
> 
> 赞同：6
> 
> 时间：2012-12-27T11:18:10.560
> 
> 标签：mongodb, mongodb-.net-driver

我有一个非常密集的操作，`MongoCursor`在循环中运行了几个小时（在通过 c# 驱动程序运行的 vb.net 应用程序上。我不太确定是什么原因导致它，但我在一段时间后遇到了异常

```
Cursor not found 
```

这可能是因为光标超时，也许？有没有办法阻止它发生？如果是超时问题，我该如何设置更长的超时时间？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-27T15:09:50.147

您可以通过调用以下方法在 C# 驱动程序中禁用光标超时：

```
cursor.SetFlags(QueryFlags.NoCursorTimeout); 
```

否则它将在 10 分钟不活动后关闭。

[参考](https://jira.mongodb.org/browse/CSHARP-397)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-02T02:45:57.190

进一步澄清JohnnyHK的答案，这是语法：

```
MongoCursor<BsonDocument> cursor = myCollection
                                   .Find(query)
                                   .SetSortOrder(SortBy.Ascending("TrackingNumber"))
                                   .SetFlags(QueryFlags.NoCursorTimeout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-12T09:09:21.623

我正在使用 MongoDB.Driver 版本 2.4.4 并且`IFindFluent`不包含`SetFlags`方法。改用这个：

```
cursor.Options.NoCursorTimeout = true; 
```

# c# - 在后面创建数据模板代码

> ID：14053804
> 
> 赞同：3
> 
> 时间：2012-12-27T11:18:10.447
> 
> 标签：c#, wpf, c#-4.0

我正在尝试为显示数据创建一个列表框视图，我希望它包含一个列表框，其中包含 2 列“产品 ID 和产品条形码”的数据模板

我想使用纯 C# 代码创建它，或者如果可能的话通过 xaml 加载它？如果我可以创建一个模板，我可以在 c# 中作为各种资源。

到目前为止我所做的是：在 XAML 中：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="37*" />
        <RowDefinition Height="88*" />
    </Grid.RowDefinitions>
    <TextBlock Text="Type Your Search :" HorizontalAlignment="Left"  VerticalAlignment="Bottom" Width="112" Height="15.96" Margin="20,0,0,4" />

    <TextBox HorizontalAlignment="Right" VerticalAlignment="Bottom" Height="25" Width="300" Margin="0,0,44,0" x:Name="txtCAuto" TextWrapping="NoWrap" HorizontalContentAlignment="Right" />

    <ListBox x:Name="lbSuggestion" SelectionChanged="lbSuggestion_SelectionChanged" Foreground="Black" Width="300" Margin="0,0,44,0"  FlowDirection="RightToLeft" Background="LightYellow" Grid.Row="1" Visibility="Collapsed"  ScrollViewer.HorizontalScrollBarVisibility="Auto" ItemsSource="{Binding}"  HorizontalAlignment="Right" VerticalAlignment="Top" HorizontalContentAlignment="Right" BorderBrush="Transparent"  Grid.IsSharedSizeScope="True">
    </ListBox>
</Grid> 
```

在后面的代码中：

```
string typedString = txtCAuto.Text.ToUpper();
        List<string> autoList = new List<string>();
        autoList.Clear();

         prodDetails ps = SelProd4Sale();

        foreach (string item in ps.ProdBrcdList)
        {
            if (!string.IsNullOrEmpty(txtCAuto.Text))
            {
                if (item.StartsWith(typedString))
                {
                    //autoList.Add(item);
                    FrameworkElementFactory colProdID = new FrameworkElementFactory(typeof(TextBlock));
                    Binding prodID = new Binding(ps.ProdIDList.ToString());
                    colProdID.SetBinding(TextBlock.TextProperty, prodID);

                    FrameworkElementFactory colProdBarcode = new FrameworkElementFactory(typeof(TextBlock));
                    Binding prodBarcode = new Binding();
                    prodBarcode.Path = new PropertyPath(ps.ProdBrcdList.ToString());
                    colProdBarcode.SetBinding(TextBlock.TextProperty, prodBarcode);

                    FrameworkElementFactory sb = new FrameworkElementFactory(typeof(StackPanel));
                    sb.AppendChild(colProdID);
                    sb.AppendChild(colProdBarcode);

                    dTemplate = new DataTemplate { VisualTree = sb };
                    dTemplate.Seal();

                }
            }
        }

        if (autoList.Count > 0)
        {
            lbSuggestion.ItemTemplate = dTemplate;
            //lbSuggestion.ItemsSource = autoList;
            lbSuggestion.Visibility = Visibility.Visible;
        }
        else if (txtCAuto.Text.Equals(""))
        {
            lbSuggestion.Visibility = Visibility.Collapsed;
            lbSuggestion.ItemsSource = null;
        }
        else
        {
            lbSuggestion.Visibility = Visibility.Collapsed;
            lbSuggestion.ItemsSource = null;
        } 
```

但没有数据出现，请提出任何建议。谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T11:55:15.570

您可以在 xaml 中定义资源，如果已`x:Key`定义，则可以在后面的代码中检索它。

在您的 xaml 中：

```
<DataTemplate x:Key="anyId">...</DataTemplate> 
```

在你的代码后面：

```
var dataTemplate = Application.Current.TryFindResource("anyId") as DataTemplate; 
```

或者

```
var dataTemplate = Application.Current.FindResource("anyId") as DataTemplate; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T11:56:42.850

我创建了这样的 DataTemplate：

```
private DataTemplate getDataTemplate()
{
    DataTemplate retVal = null;
    String markup = String.Empty;

    markup = "<DataTemplate xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\" xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\" xmlns:local=\"clr-namespace:YOUR.PROJECT.NAMESPACE;assembly=YOUR.PROJECT.NAMESPACE\">";
    markup += "<Grid>";
    markup += "<TextBlock Text=\"{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, Path=Content, Mode=OneWay}\" />";
    markup += "</Grid>";
    markup += "</DataTemplate>";

    retVal = (DataTemplate)XamlReader.Load(markup);

    return retVal;
} 
```

...然后在需要的地方调用此方法（如 OnApplyTemplate）

```
this.ContentTemplate = getDataTemplate(); 
```

注意：您可能必须更改 WPF 的“xmlns”，因为此示例取自我的 Silverlight 项目之一。但想法是一样的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-26T17:18:53.823

## 条件 XAML 数据模板

在对象的 XAML 文件中定义静态 DataTemplate 是解决此问题的惯用方法。此外，Microsoft 为 DataTemplate.LoadContent() 提供的示例很好地展示了如何在运行时动态切换模板（请参阅[DataTemplate.LoadContent 方法](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.ui.xaml.datatemplate.loadcontent.aspx)）。

但是，如果您对条件 XAML 编译有特殊要求（例如在构建发布版本时省略仅调试 XAML），则需要使用 XamlReader.Load() 方法（请参阅[XamlReader.Load 方法](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.markup.xamlreader.load%28v=win.10%29.aspx)）。

为此，我认为更详细的示例可能会有所帮助。在这里，我有一个仅限调试的 ListView，它绑定到自定义对象的 ObservableCollection<>。ListView 未在静态 XAML 中定义，因为它仅在调试模式下需要...

* * *

自定义类：

```
 class ActiveNotification
    {
        public String Name { get; set; }
        public String Type { get; set; }
        public String DayOfWeek { get; set; }
        public DateTime DeliveryTime { get; set; }
        public String Id { get; set; }
    } 
```

私有成员变量：

```
 readonly ObservableCollection<ActiveNotification> _activeNotifications = new ObservableCollection<ActiveNotification>();
    readonly ListView listViewNotifications = 
        new ListView 
        { 
            Visibility = Visibility.Collapsed,
            HorizontalAlignment = HorizontalAlignment.Left,
            VerticalAlignment = VerticalAlignment.Bottom,
        }; 
```

加载时 ListView 设置：

```
 // Set up notifications list
        listViewNotifications.SetBinding(ListView.ItemsSourceProperty, new Binding { Source = _activeNotifications });
        listViewNotifications.Tapped += listViewNotifications_Tapped;
        Grid.SetRowSpan(listViewNotifications, 2);
        Grid.SetColumnSpan(listViewNotifications, 2);
        var xamlString =
            "<DataTemplate xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\">" +
                "<StackPanel Orientation=\"Horizontal\" VerticalAlignment=\"Center\">" +
                    "<TextBlock Text=\"{Binding Name}\" Margin=\"20,0,10,0\"/>" +
                    "<TextBlock Text=\"{Binding Type}\" Margin=\"0,0,10,0\"/>" +
                    "<TextBlock Text=\"{Binding DayOfWeek}\" Margin=\"0,0,10,0\"/>" +
                    "<TextBlock Text=\"{Binding DeliveryTime}\" Margin=\"0,0,10,0\"/>" +
                    "<TextBlock Text=\"{Binding Id}\"/>" +
                "</StackPanel>" +
            "</DataTemplate>";
        var dataTemplate = (DataTemplate)XamlReader.Load(xamlString);
        listViewNotifications.ItemTemplate = dataTemplate;
        GridMain.Children.Add(listViewNotifications); 
```

# custom-controls - 没有共享窗口的山狮上的 NSSharingService

> ID：14053808
> 
> 赞同：4
> 
> 时间：2012-12-27T11:18:40.297
> 
> 标签：custom-controls, osx-mountain-lion, sharing, appkit

在山狮上，我尝试使用 AppKit.framework 的 NSSharingService 类提供新的共享可能性

这种代码一切正常

```
NSArray* array = @[ @"myText", [NSImage imageNamed:@"myImageFile"] ];

NSSharingService* sharingServiceFB = [NSSharingService sharingServiceNamed:NSSharingServiceNamePostOnFacebook];

[sharingServiceFB performWithItems:array]; 
```

但是我想在没有 performWithItems 函数生成的共享窗口的情况下做同样的事情。因为我正在考虑我的应用程序的用户不想确认他想要发送消息，因为他已经选择了那个。我在此类中看不到任何“直接发布”功能。是否需要以其他方式完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T01:52:30.943

除了自己实现 Facebook 的 API 之外没有其他办法，但如果你不介意窗口出现半秒：

```
- (void)whatever {
    NSArray* array = @[ @"myText", [NSImage imageNamed:@"myImageFile"] ];

    NSSharingService* sharingServiceFB = [NSSharingService sharingServiceNamed:NSSharingServiceNamePostOnFacebook];

    [sharingServiceFB performWithItems:array];

    [self performSelector:@selector(pressReturn) withObject:nil afterDelay:0.5];
}

- (void)pressReturn {
    CGEventRef keypress = CGEventCreateKeyboardEvent(NULL, 36, TRUE);
    CGEventPost(kCGHIDEventTap, keypress);
} 
```

您的用户可能不喜欢它...

# jquery - IE8 + jQuery：父 DIV 触发第一个孩子的 HOVER 事件

> ID：14053809
> 
> 赞同：1
> 
> 时间：2012-12-27T11:18:43.803
> 
> 标签：jquery, css, html, internet-explorer-8, hover

JSFiddle 链接：http: [//jsfiddle.net/2JUEJ](http://jsfiddle.net/2JUEJ)

当我在 IE8 中打开页面时会发生什么，每当鼠标进入容器 DIV (class=tableRow) 时，`hover`其第一个子 DIV (class=tile/wideTile/longTile) 的事件就会触发。在 Fx 中运行良好。我曾尝试`event.preventDefault();`在父母的`hover`活动中使用，但这并不能解决问题。有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T13:49:44.413

`float:left`与类`display:table-cell`的组合[**不兼容**](http://www.w3.org/TR/CSS2/visuren.html#dis-pos-flo)。设置会自动将显示设置为*阻止*。看看 Chrome 或 Firebug/Firefox 中的计算样式。`.tile`[](http://www.w3.org/TR/CSS2/visuren.html#dis-pos-flo)**`float`**

 ***甚至可能是浮动表格单元格实际上导致浏览器生成[匿名表格对象](http://www.w3.org/TR/CSS2/tables.html#anonymous-boxes)，从而导致 IE8 中的呈现错误。我猜 Chrome/Firefox 对不兼容性的解释不同。

删除`display:table-row`会导致 IE 将单元格渲染得稍微好一点，因为当悬停在其他行子级上时，不再触发第一个单元格的悬停事件。然而，这破坏了预期的布局，因此我建议使用一种新方法。

首先删除所有`display:table-*`规则，因为所有内容都是浮动的（正如我已经说过的那样`display:block`），并且由于所有内容都是浮动的，因此每个`table`都需要一个宽度，否则所有元素将彼此水平放置。例如我`420px`在`.table`课堂上试过。

[**见演示**](http://jsfiddle.net/L7qFH/2/)。

注意：就我个人而言，我会做得更好，完全删除浮动，只使用组合`display:inline-block;vertical-align:top`和可能的一些定位，因为浮动通常需要额外的规则和/或标记来清除（而且我从来不喜欢 CSS 浮动！）

您可能有助于解释此答案的部分内容的其他问题：

*   [IE7：如何让TD浮动？](https://stackoverflow.com/questions/1018125/ie7-how-to-make-td-float)
*   [向左飘浮; 与显示：内联；与显示：内联块；与显示：表格单元格；](https://stackoverflow.com/questions/11805352/floatleft-vs-displayinline-vs-displayinline-block-vs-displaytable-cell)
*   [IE7中的浮动表格单元格](https://stackoverflow.com/questions/4279517/floating-table-cells-in-ie7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:38:57.867

尝试使用这种方式：

```
$(document).ready(function() {
    $(".title").hide();
    $(".tile, .wideTile, .longTile").hover(function() {
       $("div[class=title]", this).stop().slideDown("fast");
    }, function() {
       $("div[class=title]", this).stop().slideUp("fast");
    });
}); 
```

尝试使用此脚本，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:43:31.947

事件从孩子传播到父母。在子 div hadlers 中尝试 event.stopPropagation()。***

# java - AWT 字体渲染和度量替代

> ID：14053810
> 
> 赞同：4
> 
> 时间：2012-12-27T11:18:46.470
> 
> 标签：java, fonts

AWT 字体渲染和度量似乎不适合真正的打印应用程序。字体渲染取决于 DPI，FontMetrics 给出错误结果。所以实际上不可能在边界框内渲染真实的文本。

Java 有什么替代方法来呈现真实字体、水平和垂直对齐文本、精确地在边界框内呈现文本等？

我们在 JPEG 和 PNG 上呈现小 DPI 和 300 DPI 的文本。我们还使用了很多不同的字体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T10:05:14.100

一种方法是：

*   使用更适合文本和格式的语言创建文档，然后
*   使用典型的操作系统应用程序以所需的 DPI “打印”或光栅化该文档。

有许多常见的、基于文本的格式和/或在 Java 中有许多库：

*   [特克斯/乳胶](http://en.wikipedia.org/wiki/LaTeX)。TeX 有一个专门的 StackExchange 站点：[https ://tex.stackexchange.com/](https://tex.stackexchange.com/)
*   PS/PDF - 库：[https ://stackoverflow.com/questions/6118635/what-is-the-best-pdf-open-source-library-for-java](https://stackoverflow.com/questions/6118635/what-is-the-best-pdf-open-source-library-for-java)
*   HTML/CSS（但这可能更难，因为它是为网络设计的，而不是物理页面）

LaTex 有一个易于安装的用于多个平台的二进制文件，可以光栅化您的图像，例如：

> $ tex2png --帮助
> 
> 关于 tex2png - 将 (La)TeX 转换为 PNG 图像
> 
> 使用 tex2png [选项]
> 
> (La)Tex 字符串可以作为命令行参数或通过 STDIN 传递。通过 STDIN 手动输入时，使用 ctrl+d 终止输入。
> 
> 选项 -b 传递给 dvipng 的“--bg”选项的背景颜色。它应该以 TeX color \special 语法给出，例如“rgb 0.2 0.2 0.2”。“透明”和“透明”也被接受。有关详细信息，请参阅 dvipng 帮助消息。默认值：“透明”
> 
> -c (La)TeX 字符串。
> 
> -d 输出目录。见下文。
> 
> -f 指定完整的输入文档。默认情况下，tex2png 提供自己的标题并将输入包装在文档标签中。此选项使用户能够提供带有自定义标题的完整 (La)TeX 文档。
> 
> -i 内联模式。这将包括输出中的高度和深度，可用于网页中的垂直对齐，例如
> 
> -h 显示此帮助消息。
> 
> -o 图像路径。见下文。
> 
> -p 要呈现的页码。默认值为 1。
> 
> -s 传递给“dvipng”的字体大小参数。默认值为 1400。
> 
> -t 临时工作目录。默认情况下，使用“mktemp”创建一个随机目录。
> 
> -T 裁剪内容周围的空白（dvipng -T 紧密）。
> 
> 输出 如果设置了图像路径，则它是图像的完整路径。如果未设置，则图像名称将是带有“.png”扩展名的 (La)Tex 输入字符串的 sha256 摘要。如果已设置输出目录，则图像将保存在那里，否则将保存在当前目录中。

对于 PS/PDF 文件，您可以使用适当的 Adob​​e 应用程序、操作系统或 ImageMagick（[此处为视频](http://www.youtube.com/watch?v=7xuxsd3I0Q4)）：

> $ 转换-密度 300 file.pdf output.png

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T16:10:41.377

桌面出版软件经常达到高性能系统的极限。使用 Java 进行 DTP 是一个坏主意。您将沉迷于快速原子计算，因此使用 c/c++ 或其他低级编程语言编写的不同程序。

这就是为什么我接受安德鲁的回答，因为外部程序更好。

如果您正在寻找一个类似于桌面发布的 Java 项目，您可能会对在示例中使用[http://community.jaspersoft.com/project/jasperreports-library感到满意。](http://community.jaspersoft.com/project/jasperreports-library)

# java - 奇怪的输入错误，我以前用过这个代码

> ID：14053816
> 
> 赞同：0
> 
> 时间：2012-12-27T11:19:05.080
> 
> 标签：java, eof, objectinputstream

在做了一次非常糟糕的*家庭作业*之后，我决定放弃一切并从头开始会更快。好吧，不是所有的……我复制了这部分，因为它工作得很好，所以我认为没有必要修改它。虽然可能并不完美，但它确实有效。

**但是**现在，当我编译只是为了测试它时，我收到了一个意外错误：

`Input error: java.io.EOFException`.

请注意，“输入错误”来自我的`catch(IOException ioe)`.

文件 ( `fileName`) 完全为空。里面什么都没有。这是什么原因造成的。如果文件为空，有没有办法告诉`ObjectInputStream`什么都不做？

**我也在**我的另一个“迭代”中用一个空文件测试了这个，没有这个问题。我什至将我的文件命名为相同的。

```
public Repository (String fileName) throws  FileNotFoundException,
                                            IOException,
                                            SecurityException,
                                            ClassNotFoundException {
    this.fileName = fileName;
    this.clients = new ArrayList<Client> ();

    FileInputStream fileIn = null;
    ObjectInputStream in = null;

    try {
        fileIn = new FileInputStream(this.fileName);
        in = new ObjectInputStream(fileIn);
        this.clients = (ArrayList<Client>) in.readObject();

    } catch (FileNotFoundException fnfe) {
        System.out.println("File not found, error: " + fnfe);
    } catch (IOException ioe) {
        System.out.println("Input error: " + ioe);
    } catch (ClassNotFoundException cnfe) {
        System.out.println("Class not found, error: " + cnfe);
    } catch (SecurityException se) {
        System.out.println(
                       "You do not have permission to access this file, error: " 
                       + se);
    } finally {
        if (fileIn != null)
            fileIn.close();
        if (in != null)
            in.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:21:47.970

肯定是之前

```
 in = new ObjectInputStream(fileIn);
    this.clients = (ArrayList<Client>) in.readObject(); 
```

您想通过[File.length()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#length%28%29)检查文件大小。

我假设如果它是空的，那么你会想要返回一个空数组列表。你不能通过反序列化一个空文件来做到这一点。毕竟，即使是空数组列表的大小也不为零（并且需要通过序列化属性将自己标识为数组列表）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:26:28.957

> 文件 (fileName) 完全为空。里面什么都没有。

这正是问题所在。您不能从空文件中读取对象（或数组）。它不会找到任何数据并抛出文件结束异常 (EOFException)。

即使是空数组——当序列化为文件时——也会产生一些数据，因为对象流会将数组的类型 (ArrayList) 和大小 (0) 写入文件。当您尝试读取它时，它会期望找到此数据。

# c# - Task.Run() 不会异步运行

> ID：14053817
> 
> 赞同：3
> 
> 时间：2012-12-27T11:19:06.037
> 
> 标签：c#, asp.net-mvc, wcf, task

我有一个连接到 WCF 服务的 ASP.NET MVC 3 站点。WCF 服务独立于站点并托管在 Windows 服务中。大多数调用都是同步的，因此等待 WCF 执行它不是问题。

但是，其中一个（已经实现的）调用花费的时间太长了，而且由于它本质上不直接输出任何东西，我想在服务上旋转它并忘记它。

所以我改变了我的代码：

```
public ViewResult StartSlowCalculation(CalculationOptions calculationOptions)
{
  WcfServiceProxy.DoSlowCalculation(calculationOptions);
  ViewBag.Started = true;
  return View();
} 
```

至

```
public ViewResult StartSlowCalculation(CalculationOptions calculationOptions)
{
  Task.Run(() =>
  {
    WcfServiceProxy.DoSlowCalculation(calculationOptions);
  });

  ViewBag.Started = true;
  return View();
} 
```

据我了解，它应该启动一个异步请求，并立即返回。尽管如此，执行是完全同步的，并且 UI 被冻结直到操作结束。

我错过了什么明显的东西？

* * *

更新：

另外，请注意，我不希望将服务器实现更改为异步实现，只是为了取消同步对调用站点上服务的调用。

此外，我注意到该`StartSlowCalculation`方法完成执行，但服务器在服务方法完成执行之前不会返回响应。

WCF 服务代理只是做：

```
public void DoSlowCalculation(CalculationOptions calculationOptions)
{
   //some logging code
   Channel.DoSlowCalculation(calculationOptions);
} 
```

所以它是完全同步的，但这并不重要，因为它应该在一个独立的线程上执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:32:30.633

一个任务操作能否在调用线程中运行，这取决于taskScheduler 决定。为了帮助`TaskScheduler`对长时间运行的呼叫做出正确的决定，您可以指定任务创建选项`TaskCreationOptions.LongRunning`。

您可以检查任务操作是否在单独的线程中运行：

```
int launchedByThreadId = Thread.CurrentThread.ManagedThreadId;
int launchedInThreadId = -1;
Task.Run(() =>
  {
    launchedInThreadId = Thread.CurrentThread.ManagedThreadId;
    WcfServiceProxy.DoSlowCalculation(calculationOptions);
  });

// then compare whether thread ids are different 
```

顺便说一句，您是否使用任何类型的`Task.Wait()`操作？它也会阻塞调用线程。

编辑：

您可能会发现以下帖子很有趣[Task.Factory.StartNew() 是否保证使用另一个线程而不是调用线程？](https://stackoverflow.com/a/12246045/485076)

所以尝试使用`Task.Factory.StartNew()`并指定取消令牌，即使你不需要它，这听起来很奇怪，但似乎这保证了任务最终不会在调用线程中运行。纠正我如果我错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T14:42:01.703

我以前做过。

最可靠的方法是使用异步控制器，或者更好的是使用独立服务，例如 WCF 服务。

但根据我的经验，我只需要执行“简单”的单行任务，例如审计或报告。

> 在那个例子中，最简单的方法 - 启动一个任务：

```
public ViewResult StartSlowCalculation(CalculationOptions calculationOptions)
{
  //Some Synchronous code.

   Task.Factory.StartNew(() =>
  {
    WcfServiceProxy.DoSlowCalculation(calculationOptions);
  });

  ViewBag.Started = true;
  return View();
} 
```

这是一个简单的例子。您可以根据需要启动任意数量的任务、同步它们、在它们完成时收到通知等。

有关更多详细信息，您可以查看此链接。

[https://msdn.microsoft.com/en-us/library/dd321439(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/dd321439(v=vs.110).aspx)

# javascript - 如何在 Ace 编辑器中设置源路径

> ID：14053820
> 
> 赞同：6
> 
> 时间：2012-12-27T11:19:16.407
> 
> 标签：javascript, ace-editor

我在本地离线嵌入 Ace，因此不使用托管包并且受相同来源策略的约束。您如何告诉 ace 在特定文件夹中查找模式、主题和工作人员的来源？

您曾经可以使用：

```
editor.config.set("modePath", "Scripts/Ace");
editor.config.set("workerPath", "Scripts/Ace");
editor.config.set("themePath", "Scripts/Ace"); 
```

但这在最新版本中不起作用。如何做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-16T17:10:12.057

我遇到了类似的问题，您实际上可以通过这种方式让 Ace 知道基本文件夹路径是什么： `ace.config.set("basePath", "/Scripts/Ace");`

这适用于我拥有的最新版本 v1.1.3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:29:21.287

实现相同目的的简单方法是将 Ace 源文件夹中的所有脚本手动嵌入到网页中，不包括`worker-xxx.js`文件。不过，这仍然是一个障碍。

# android - 开始开发前所需的 android 资源/资产清单

> ID：14053822
> 
> 赞同：0
> 
> 时间：2012-12-27T11:19:22.743
> 
> 标签：android, android-resources, android-icons

我要开发一个 android 应用程序，但与我以前的应用程序不同，这一次我必须在开始开发之前告诉别人我需要什么图形和资源。设计师已经设计了所有的屏幕，现在看着这些屏幕，我必须告诉他我需要什么资源（大小和密度）、字体、图标等。

是否存在一个清单，其中清楚地列出了所有必需的图形（针对不同的尺寸和密度），以及包括仅在应用发布时才需要的图形在内的资产。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:43:51.010

我在一家公司工作，我也必须告诉设计师。因此，尽管有任何硬映射的检查列表，但如果您让设计师了解 Android 的工作原理，它总是会有所帮助。

不要忘记颜色代码、XML 可绘制对象（边框、渐变）和 9-patch 比静态 PNG 更有效。

然后我让他在 XHDPI 上只为 Galaxy Nexus 做所有事情，只有在整个开发完成后我才要求其他调整大小的资产（因为资产往往在整个项目中发生变化，然后我不必更新所有他们）。

尽管模型上有什么只是更多的资产：

*   启动器图标，
*   高分辨率发射器 (512 x 512)
*   宣传图（180w x 120h）
*   专题图 (1024 x 500)

您在 Google Play 上注册时使用的另一个是屏幕截图，您可以在完成后从真实应用程序中获取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T04:53:48.550

以前的答案完全回答了这个问题，但我只是想向 Budius 添加一些内容。我知道我不应该回复其他答案，但作为一名设计师，我认为我应该指出一些事情。

Budius 说“让他为 XHDPI 上的 Galaxy Nexus 做所有事情”。我建议让他在 MDPI 上制作所有内容，因为 MDPI 是当前的基准。这背后的原因是，无论使用什么程序，例如：Photoshop，放大比缩小要干净得多。缩小有时会产生奇怪的伪影，需要进行调整，而放大通常会产生完美的比例。

# c# - 循环遍历时间段以获得几周

> ID：14053824
> 
> 赞同：1
> 
> 时间：2012-12-27T11:19:23.490
> 
> 标签：c#, iterator, timespan

如果我有一个约会列表并且想在几周内而不是在一个循环中获得这些约会，例如。

```
public class appointments
{
     public string Appointment { get; set; }
     public DateTime Start { get; set; }
     public string Location { get; set; }
}

List<appointments> appointment = new List<appointments>();

appointment.Add(new appointments() { Appointment = "meeting", Start = new DateTime(2013, 01,02), Location = "office"});
appointment.Add(new appointments() { Appointment = "lunch",  Start = new DateTime(2013, 01, 07), Location = "cafe" });
appointment.Add(new appointments() { Appointment = "meeting", Start = new DateTime(2013, 01, 08), Location = "cityhall" });
appointment.Add(new appointments() { Appointment = "dentist", Start = new DateTime(2013, 01, 14), Location = "dentist" }); 
```

现在我想要一个从 say`2013-01-02`到 的时间`2013-01-25`段，并且 startdate 01-02 将是开始周。

所以 02 到 08 之间的项目是一周 09-16 另一个，依此类推，直到其一周内有 7 天的末尾。我如何迭代列表并将特定的几周传递给另一种方法，而不预先计算“周制动日期”，只需添加 7 天直到结束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T10:59:34.950

下面的代码返回第 1 周的“dentist”和第 0 周的“meeting,lunch,meeting”。

```
class Program
{
    static void Main(string[] args)
    {
        List<appointments> appointment = new List<appointments>();

        appointment.Add(new appointments() { Appointment = "meeting", Start = new DateTime(2013, 01, 02), Location = "office" });
        appointment.Add(new appointments() { Appointment = "lunch", Start = new DateTime(2013, 01, 07), Location = "cafe" });
        appointment.Add(new appointments() { Appointment = "meeting", Start = new DateTime(2013, 01, 08), Location = "cityhall" });
        appointment.Add(new appointments() { Appointment = "dentist", Start = new DateTime(2013, 01, 14), Location = "dentist" });

        foreach (var appt in GetAppointmentsByWeek(appointment, 1))
            Console.WriteLine(appt.Appointment);

        Console.ReadLine();
    }

    private static IEnumerable<appointments> GetAppointmentsByWeek(List<appointments> appts, int weeknum)
    {
        if (weeknum < 0)
            return new appointments[] { };

        var ordered = appts.OrderBy(a => a.Start.Ticks);           
        var start = ordered.First().Start.AddDays(weeknum * 7);
        var end = start.AddDays(7);
        return ordered.Where(o => o.Start.Ticks >= start.Ticks && o.Start.Ticks <= end.Ticks);
    }
}

public class appointments
{
    public string Appointment { get; set; }
    public DateTime Start { get; set; }
    public string Location { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T11:08:32.843

您可以通过`GroupBy`在约会上使用按特定周对它们进行分组来做到这一点。此代码未经测试且是徒手编写的，但您应该明白这一点。

```
private static IEnumerable<appointments> GetAppointmentsByWeek(List<appointments> appts, int weeknum)
{
    var WeekGroup = appts.GroupBy(ap => GetWeekOfYear(ap.Start)).Where(gp => gp.Key == weeknum).FirstOrDefault();

    if (WeekGroup == null) {return new List<appointments>();} //No appointments for this week

    return WeekGroup.Select(gp => gp.ToList());
} 
```

您需要实施`GetWeekOfYear`（[http://msdn.microsoft.com/en-us/library/system.globalization.calendar.getweekofyear.aspx](http://msdn.microsoft.com/en-us/library/system.globalization.calendar.getweekofyear.aspx)） - 但是对于任何给定的约会列表和给定的周数，这将返回所有那一周的约会。

# php - 如何在浏览器中将 Html 代码转换为模板输出

> ID：14053825
> 
> 赞同：-1
> 
> 时间：2012-12-27T11:19:26.283
> 
> 标签：php, jquery, html

我需要`HTML`在模板中转换。如图像**内容**所示，应显示为模板。我`table`用来显示 . 但现在我需要在模板输出中显示它

这是我的代码：

```
<table id="datatable" class="tablesorter"> 
    <span id='errfrmMsg'></span>
    <thead>
        <tr>        
            <th scope="col" id="">Name</th>
            <th scope="col" id="">Content</th>
        </tr>
    </thead>

    <tbody>
        <?php
            $templ_id = $_REQUEST['templ_id'];
            $getTemplateQuery = mysql_query("select * from templates where id = $templ_id");
            $getTemplateRow = mysql_fetch_array($getTemplateQuery);
        ?>
        <tr>
            <td valign="top" width="125"><?php echo $getTemplateRow['templ_name'];?></td>
            <td valign="top" width="319">
            <?php
                echo $templContent = $getTemplateRow['templ_content'];
?>
        </tr>
    </tbody>
</table> 
```

这是一个输出：

![在此处输入图像描述](../Images/e786f1a0a87e0666386dcdc47e5f103e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:26:03.980

根据我从您的问题中收集到的信息，尝试输出：

`$html = htmlspecialchars_decode($content)`

编辑：

`echo $templContent = htmlspecialchars_decode($getTemplateRow['templ_content']);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:28:34.120

试试这个对你有帮助

```
<?php

echo $htmlContent = htmlspecialchars_decode($getTemplateRow['templ_content']) 

?> 
```

# android - 如何使用 android.R.id.list 使用 SimpleCursorAdapter 设置 onItemClickListener

> ID：14053830
> 
> 赞同：1
> 
> 时间：2012-12-27T11:19:48.750
> 
> 标签：android, sqlite, onitemclicklistener

嗨，我正在尝试`OnItemClickListener`使用`android.R.id.list`which is inbuild list in android using 实现`ListActivity`。有没有其他方法可以让我使用 onItemclickLietener 而不将`ListView`对象放在`OnItemClickListener`. 请建议。

我也想使用数据库“更新和删除”方法使用 longclick 侦听器设置删除和更新方法。所以请帮帮我。

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.file_row, c, from, to);
setListAdapter(adapter);
getnotelist.close();

WhatToPutHere?.setOnItemClickListener(new OnItemClickListener()
{
    @Override public void onItemClick(AdapterView<?> arg0, View arg1,int position, long arg3)
    { 
        Toast.makeText(SuggestionActivity.this, "" + position, Toast.LENGTH_SHORT).show();
    }
}); 
```

如何使用这个 using`android.R.id.list`或 How to get `ListView`in`ListActivity`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T11:22:37.703

如果您正在扩展，`ListActivity`则添加`setOnItemClickListener`为：

```
getListView().setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent,
                                      View view,int position, long id) {

               // do your work here
        }
      }); 
```

您可以像扩展 ListActivity 一样获取 ListView：

```
ListView listview = getListView(); 
```

或使用`android.R.id.list`as

```
ListView listview = (ListView)findViewById(android.R.id.list); 
```

# r - R vegan RDA 并非所有级别的约束都显示在三图中

> ID：14053834
> 
> 赞同：3
> 
> 时间：2012-12-27T11:20:14.630
> 
> 标签：r, constraints, rda, vegan, triplot

在我的 RDA 三图中，我想显示“站点”、“物种”及其约束条件，在我的例子中是 Field 和 Trt。问题是并非所有级别的约束都显示在图中。每个因素有两个水平。

我的 RDA 代码是：

```
Dummy.rda <- rda(species.rda ~ Field + Trt,RDA.env, scale=TRUE)

summary(Dummy.rda, scaling=3)  #Here I see only one level of each reported in:Biplot scores for constraining variables. However all levels appear in: Centroids for factor constraints

anova.cca(Dummy.rda, step=100, by='margin') # degrees of freedom are correct for both factors (df=1)

plot(Dummy.rda, scaling = 3) #This displays all levels of Field and Trt but only one of each has an arrow

plot(Dummy.rda, display = "species", xlim = xlims, ylim = ylims, 
       scaling = 3)
text(Dummy.rda, scaling = 3, display = "bp")  # I want to customize the RDA plot, but this 'text' only displays 1 level of each of Field and Trt. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-10T16:10:17.810

缺少的级别是因为您试图将因子变量视为连续变量 - 严格来说，我猜它们不应显示为双标箭头。无论如何，就像在使用虚拟变量的回归中一样，因子的一个水平不能被包括在内，因为它线性依赖于模型矩阵中剩余水平的虚拟变量。考虑这个例子：

```
require("vegan")
data(dune)
data(dune.env)

mod <- rda(dune ~ Management, data = dune.env)

> model.matrix(mod)
   ManagementHF ManagementNM ManagementSF
2             0            0            0
13            0            0            1
4             0            0            1
16            0            0            1
6             1            0            0
1             0            0            1
8             1            0            0
5             1            0            0
....<truncated> 
```

您在输出中看到的`model.matrix()`是进入排序的变量。请注意，模型矩阵中有三个变量，但`Management`因子中有四个级别：

```
> with(dune.env, levels(Management))
[1] "BF" "HF" "NM" "SF" 
```

R 中的约定是使用因子的第一水平作为参考水平。在回归中，这将包含在截距中，但我们在 RDA 中没有其中之一。请注意，在`model.matrix()`输出的第一行中，所有值都是`0`; 这表明该行在`BF`管理组中。但由于模型中只有三个变量，我们只能用三个双标箭头来表示它们——这正是数学的工作方式。

我们可以做的是绘制组*质心*，这就是`summary()`您所指的输出中显示的内容，可以使用以下方法提取`scores()`：

```
> scores(mod, display = "cn")
                   RDA1       RDA2
ManagementBF -1.2321245  1.9945903
ManagementHF -1.1847246  0.7128810
ManagementNM  2.1149031  0.4258579
ManagementSF -0.5115703 -2.0172205
attr(,"const")
[1] 6.322924 
```

因此，要将质心添加到现有绘图中，请执行以下操作：

```
text(mod, scaling = 3, display = "cn") 
```

无论您做什么，都无法为参考组添加双标箭头。

我希望这可以解释您所看到的行为？

# c - 菜单无法正常工作

> ID：14053836
> 
> 赞同：0
> 
> 时间：2012-12-27T11:20:26.933
> 
> 标签：c

```
#include <stdio.h>
#include <stdlib.h> //for the clear screen function
#include <string.h>

struct customer
{
    int custID;
    char custName[50];
    char custAddress[100];
};

typedef struct customer c;

void load_menu(void);
void customers_menu(void);
void createNew(void); //initialize your file
void add_Customer(c c1[30]); //add a new record to the file
FILE *fp;

int main(void)
{

load_menu();
return 0;
}

void load_menu(void)
{
int choice;

do
{
    printf("Customer Orders Main Menu. \n\n");
            printf("Please enter your choice: \n");
    printf("1\. Customer's Menu \n");
    printf("2\. Orders Menu\n");
    printf("3\. Product Stock Menu\n");
    printf("4\. Exit\n");
    printf("\n");
    if (scanf("%d",&choice)==1)
    {

        switch(choice)
        {
            case 1: system ("cls");
                    customers_menu();
                    printf("\n");
                    break;
            case 2: system ("cls");
                    orders_menu();
                    printf("\n");
                    break;
            case 3: system ("cls");
                    stock_menu();
                    printf("\n");
                    break;
            case 4: printf("Quitting program!\n");
                    break;
            default: printf("Invalid choice! Please try again\n");
                    printf("\n");
                break;
        }
    }

    else
    {
        fflush(stdin);
        printf("Characters are invalid, please enter a number: \n ");
        choice=0;
    }

}while((choice !=4));
}

void createNew(void)
{
    FILE *fp;
    fp=fopen("Customer.dat", "w");
    if (fp==NULL)
        printf("File creation failed! \n");
    else
    {
        printf("File created! \n");
        fclose(fp);
    }

}

void add_Customer (c c1[30])
{
    int i, n , cc=0;
    FILE *fp;
    fp=fopen("Customer.dat", "a");
    system("cls");

    if(fp==NULL)
   {
       printf("File Creation Failed!");
   }
   system("cls");

   printf("Enter the number of Customers: ");
   scanf("%d", &n);

   for(i=0;i<n;i++)
   {
       printf("Customer's ID (numbers only)  : ");
       scanf("%d", &c1[i].custID);

       printf("Customer's  Name              : ");
       gets(c1[i].custName);

        printf("Customer's Address            : ");
        gets(c1[i].custAddress);

        fwrite(&c1[i], sizeof(c), 1, fp);
    }cc++;

    fclose(fp);
}

void recordCount(c c1[30], int *count)
{
    add_Customer(c1);
    count=0;
    count++;
}

void customers_menu(void)
{
int choice;
    c c1[30];
    int i;

do
{
    printf("\n");
    printf("Customers Menu \n\n");
    printf("Please enter your choice: \n");
    printf("1\. Add Customer \n");
    printf("2.\n");
    printf("3.\n");
    printf("4\. Go back to Main Menu \n");
    recordCount (c1, &i);

    if (scanf("%d",&choice)==1)
    {

        switch(choice)
        {
            case 1: add_Customer(c1);
                    createNew();

                    printf("\n");
                    break;
            case 2:
                    printf("\n");
                    break;
            case 3:
                    printf("\n");
                    break;
            case 4: printf("Going back to Main Menu\n");
                    system ("cls");
                    break;
            default: printf("Invalid choice! Please try again\n");
                    printf("\n");
                break;
        }
    }

    else
    {
        fflush(stdin);
        printf("Characters are invalid, please enter a number: \n ");
        choice=0;
    }

}while((choice !=4)); 
```

我有一个问题，因为当我进入客户菜单时，它开始立即执行案例 1（仍然无法正常工作）。有人可以帮我解决这个错误吗，因为我尝试了我所知道的一切，但它仍然是徒劳的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:27:46.450

这个问题来自`if (scanf("%d",&choice)==1)`因为`scanf`不会返回选择。如果您输入有效的答案（如数字），那么它会返回 1 并使用 1 切换案例。我认为这就是问题所在。如果输入 char 而不是 integer，`scanf`将返回 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:58:56.733

我认为您的问题是在`customers_menu()`您输出菜单时，但不要阅读选择，而是`recordCount()`直接调用`addCustomer()`.

在`addCustomer()`我们返回之后`customers_menu()`，然后调用`scanf()`早已消失的菜单。

其他一些注意事项：

1.  `gets()` is not good, I suggest you use `scanf()` (with %s) instead.
2.  Doing a `printf()` then clearing the screen is a bit pointless.
3.  Error messages should really go to stderr (fprintf(stderr,...)) rather than stdout (printf(...))
4.  You code is a missing trailing }.
5.  cc is added to, but not used.

# ajax - google.setOnLoadCallback(drawChart);

> ID：14053837
> 
> 赞同：2
> 
> 时间：2012-12-27T11:20:30.370
> 
> 标签：ajax, charts, google-visualization

我的页面上有谷歌图表，但是现在在页面加载时加载谷歌可视化库时会绘制图表，我必须通过ajax动态提供数据，所以是否可以更改回调方法，或者有什么替代方法?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T14:56:17.263

我按照自己的意愿进行了管理，它可能对某人有所帮助，如果有更好的解决方案，请提出建议。

1.  我删除了这个 setOnLoadCallback 函数 - `google.setOnLoadCallback(drawChart);` 这个回调将在加载可视化库后立即调用 drawChart() （但我不想要它，我想在按钮单击时调用它）。

2.  所以我`drawChart();`直接在按钮点击函数代码中调用函数。

3.  然后我遇到了将动态数据渲染到数据表的问题，当我输入硬编码值时，图表绘制得很好，但是当我放置变量而不是那些值时，它无法生成图表。

4.  所以我将变量解析为整数`parseInt(doc_pre)`，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:55:51.040

你可以检查这个：

[jQuery 图表](http://www.1stwebdesigner.com/css/top-jquery-chart-libraries-interactive-charts/)

# android - 动态切换 ArrayAdapter 的数组对象？

> ID：14053840
> 
> 赞同：0
> 
> 时间：2012-12-27T11:20:42.443
> 
> 标签：android, adapter

我知道我可以更新最初传递给 arrayAdapter 的构造函数的数组，并调用 notifyDataSetChanged。

我想知道是否可以将新的arraylist 插入适配器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:31:53.160

简单的：

```
 mAdapter.clear();
  mAdapter.addAll(collection); 
```

此外，请添加您可以调用的单个元素，`mAdapter.add(element);`而不必保留对传递给构造函数的 Array 的引用。

# image - 如何在 Windows Phone 计划代理中生成图像？

> ID：14053843
> 
> 赞同：0
> 
> 时间：2012-12-27T11:20:51.430
> 
> 标签：image, windows-phone-7.1, windows-phone-8

我需要根据从 Windows Phone 应用程序 (Mango+) 中的 PeriodicTask 中的 WebService 调用返回的数据生成图像。
我已经在主应用程序中看到了几种方法，但在计划任务中似乎没有任何效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T12:01:00.827

试试我在我的博客上描述的这个指南：
[http ://suchan.cz/?p=110](http://suchan.cz/?p=110)

基本上，您必须创建自己的 UserControl，然后将其渲染为图像并将其保存为 jpg、不透明或透明 png。还要确保在 Backgroud Agent 中使用尽可能低的内存，如果您在 WP7 中使用超过 6MB 或在 WP8 中使用超过 11MB，您的周期性任务将被终止，恕不另行通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:00:30.770

这取决于。如果您在后台代理中，则内存很宝贵。您加载的库也计入您的分配限制，因此您的数量少于广告数量。

您是否有要修改的基本映像？如果是这样，请避免创建 UI 元素并尝试使用 WriteableBitmap。有一个库（是的，内存，但它非常有用）提供了处理此类图像的有用方法，称为[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)。

如果您从头开始生成简单的图像，则使用 UserControl 路线也是可行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T05:18:42.647

我使用名为 ImageTools 的实用程序[从用户控件呈现 PNG](http://notebookheavy.com/2011/12/06/microsoft-style-dynamic-tiles-for-windows-phone-mango/)（注意，这不是我的博客）。我创建了一个共享库，其中引用了 ImageTools、ImageTools.IO.Png 和 ImageTools.Utils。共享库完成了所有繁重的工作。然后我的后台代理项目引用共享库项目，并在 ScheduledAgent.OnInvoke 中调用共享库来完成工作。我在 Windows Phone 8 上，但它似乎工作得很好。

# java - 比较Java中的两个对象

> ID：14053844
> 
> 赞同：1
> 
> 时间：2012-12-27T11:20:53.023
> 
> 标签：java

我有同一个实体“社区”的两个不同对象</p>

并且两个对象（community 和 com）具有相同的值

Communty.java 有以下变量：

```
 private Integer communityId;
   private String communityName;
   private String description;

   // many to many relationship
   private Set<Faculty> faculties = new HashSet<Faculty>();
   private Set<User> users = new HashSet<User>(); 
```

我使用了相等的方法：

```
@Override
   public boolean equals(Object obj) {
          // TODO Auto-generated method stub
          if(obj==null)
                 return false;
          if(obj==this)
                 return true;
          if(!(obj instanceof Community)) return false;

          Community community = (Community)obj;
          return community.getCommunityId() == this.getCommunityId();
   } 
```

当我检查`community==com`时，它返回 false .. 为什么？我犯了什么错误？这两个对象都是从数据库中检索的！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T11:23:21.480

`==`比较对象的链接。

您应该明确调用`community.equals(com)`. 还要注意*空*检查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T11:24:26.130

因为您使用而不是比较对象（ID）`==`而不是`equals()`. `==`测试两个变量是否引用同一个对象。`equals()`测试两个变量是否引用两个功能相等的整数（即具有相同的 int 值）。

使用 比较对象几乎总是一个错误`==`，除了枚举。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T11:25:33.760

`==`比较可能指向两个不同位置的两个引用，而与对象内容无关。

你应该用它`community.equals(com)`来检查是否相等'

此外，您的 equals 方法包含以下部分：

```
community.getCommunityId() == this.getCommunityId() 
```

作为`communityId`一个`Integer`对象，`==`由于实习，运算符可能会对不在 [-127, 128] 范围内的整数值给出否定结果，这是一个单独的概念，您可以稍后检查。

您也需要在`equals()`那里使用或比较 .`intValue()`

```
return community.getCommunityId().equals(this.getCommunityId()) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T11:22:54.723

因为，它们不引用同一个对象。`==`用于检查是否都引用同一个对象。

`==`对象参考相同。

`equals`内容对等。

尝试这个

```
return community.getCommunityId().equals(this.getCommunityId()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-27T11:25:23.447

您的 equals 方法的问题是您正在`==`为对象使用运算符。这里的 CommunityId 必须是同一个对象才能返回 true：

```
 return community.getCommunityId() == this.getCommunityId(); 
```

它应该是

```
 return community.getCommunityId().equals(this.getCommunityId()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T11:23:52.807

> 当我检查 community==com 时，它返回 false .. 为什么

这表示; 这两个*引用*是否完全相同。即到同一个对象。你的意图是

```
boolean equal = community.equals(com); 
```

顺便说一句，您的`if (obj == null)`支票是多余的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-27T11:26:16.933

== Java中的运算符比较两个对象的内存地址，在您的情况下， comm 和 community 必须是存储在两个不同内存地址的两个不同对象

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-27T11:42:17.827

您正在比较两个不同的对象 communityId。是否有必要将 communityId 声明为 Integer？因为整数是一个对象。为什么不简单地用原始类型 int 声明 communityId；int communityId 应该可以工作。

# jquery - 是否可以使用 jquery 和 mysql 在数据库表中插入新记录？

> ID：14053851
> 
> 赞同：4
> 
> 时间：2012-12-27T11:21:36.143
> 
> 标签：jquery, mysql

我参加了一份工作的面试，他们问了我一个问题，例如如何仅使用 jquery 和 mysql 将新记录插入数据库？我回答要使用 jquery ajax，但他们不接受，他们说我们只想使用 jquery 和 mysql 而不是任何其他的。我在谷歌搜索并没有得到可能的解决方案。你能帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T11:25:10.047

**JavaScript/jQuery 不能直接连接到数据库 这很好有很多原因**

您需要对服务器进行 Ajax 调用以发送要放入数据库的数据。Youe 支持的服务器端代码将连接到 mysql 服务器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T11:26:25.087

只有 jQuery 和 MySQL - 没有。

JavaScript 在浏览器中运行，只能做浏览器允许的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T11:35:33.377

我不确定我是否*完全*同意“你不能”的答案。在 Web 应用程序的传统配置中可能就是这种情况，但是面试官可能一直在尝试测试您关于如何跳出框框思考的推理。

没有理由不能使用 RESTful 接口公开数据库并使用 JQuery 直接从浏览器接受调用（使用直接 AJAX 调用）。

或者，[DBSlayer](http://code.nytimes.com/projects/dbslayer)显然提供了一种将 JSON 请求发送到 MySQL 进行处理的方法。

为了捍卫@Champ 的回答，从必须执行*某种形式的服务器代码*的角度来看，他/她是正确的，所以这只是 MySQL 是否固有地支持这一点，还是可以使用某种形式使其工作的问题MySQL 插件或扩展。

# android - 图像下载器类的枚举声明错误

> ID：14053856
> 
> 赞同：1
> 
> 时间：2012-12-27T11:21:58.593
> 
> 标签：android, image, enums, download

您好我已经编写了以下代码来将图像下载到我的应用程序中。

```
public class ImageDownloader
{
  private static final int DELAY_BEFORE_PURGE = 10000;
  private static final int HARD_CACHE_CAPACITY = 10;
  private static final String LOG_TAG = "ImageDownloader";
  @SuppressWarnings("unchecked")
private static final ConcurrentHashMap<String, SoftReference<Bitmap>> sSoftBitmapCache = new ConcurrentHashMap<String, SoftReference<Bitmap>>(5);
  private Mode1 mode = Mode1.CORRECT;
  private final Handler purgeHandler = new Handler();
  private final Runnable purger = new Runnable()
  {
    public void run()
    {
      ImageDownloader.this.clearCache();
    }
  };
  private final HashMap<String, Bitmap> sHardBitmapCache = new LinkedHashMap(5, 0.75F, true)
  {
    protected boolean removeEldestEntry(Map.Entry<String, Bitmap> paramAnonymousEntry)
    {
      if (size() > 10)
        ImageDownloader.sSoftBitmapCache.put((String)paramAnonymousEntry.getKey(), new SoftReference((Bitmap)paramAnonymousEntry.getValue()));
      for (boolean bool = true; ; bool = false)
        return bool;
    }
  };

private Bitmap localObject2;  private void addBitmapToCache(String paramString, Bitmap paramBitmap)
  {
    if (paramBitmap != null)
      synchronized (this.sHardBitmapCache)
      {
        this.sHardBitmapCache.put(paramString, paramBitmap);
      }
  }

  private static boolean cancelPotentialDownload(String paramString, ImageView paramImageView)
  {
    boolean bool = true;
    BitmapDownloaderTask localBitmapDownloaderTask = getBitmapDownloaderTask(paramImageView);
    if (localBitmapDownloaderTask != null)
    {
      String str = localBitmapDownloaderTask.url;
      if ((str != null) && (str.equals(paramString)))
        break label39;
      localBitmapDownloaderTask.cancel(bool);
    }
    while (true)
    {
      return bool;
      label39: bool = false;
    }
  }

  private void forceDownload(String paramString, ImageView paramImageView)
  {
    if (paramString == null)
      paramImageView.setImageDrawable(null);
    while (true)
    {
      return;
      if (cancelPotentialDownload(paramString, paramImageView))
        switch ($SWITCH_TABLE$org$fluturasymphony$recommendation$ImageDownloader$Mode()[this.mode.ordinal()])
        {
        default:
          break;
        case 1:
          Bitmap localBitmap = downloadBitmap(paramString);
          addBitmapToCache(paramString, localBitmap);
          paramImageView.setImageBitmap(localBitmap);
          break;
        case 2:
          paramImageView.setMinimumHeight(156);
          new BitmapDownloaderTask(paramImageView).execute(new String[] { paramString });
          break;
        case 3:
          BitmapDownloaderTask localBitmapDownloaderTask = new BitmapDownloaderTask(paramImageView);
          paramImageView.setImageDrawable(new DownloadedDrawable(localBitmapDownloaderTask));
          paramImageView.setMinimumHeight(156);
          localBitmapDownloaderTask.execute(new String[] { paramString });
        }
    }
  }

  private int[] $SWITCH_TABLE$org$fluturasymphony$recommendation$ImageDownloader$Mode() {
    // TODO Auto-generated method stub
    return null;
}

private static BitmapDownloaderTask getBitmapDownloaderTask(ImageView paramImageView)
  {
    Drawable localDrawable;
    if (paramImageView != null)
    {
      localDrawable = paramImageView.getDrawable();
      if (!(localDrawable instanceof DownloadedDrawable));
    }
    for (BitmapDownloaderTask localBitmapDownloaderTask = ((DownloadedDrawable)localDrawable).getBitmapDownloaderTask(); ; localBitmapDownloaderTask = null)
      return localBitmapDownloaderTask;
  }

  private Bitmap getBitmapFromCache(String paramString)
  {
    synchronized (this.sHardBitmapCache)
    {
      Bitmap localBitmap1 = (Bitmap)this.sHardBitmapCache.get(paramString);
      if (localBitmap1 != null)
      {
        this.sHardBitmapCache.remove(paramString);
        this.sHardBitmapCache.put(paramString, localBitmap1);
        localObject2 = localBitmap1;
      }
      else
      {
        SoftReference localSoftReference = (SoftReference)sSoftBitmapCache.get(paramString);
        if (localSoftReference != null)
        {
          Bitmap localBitmap2 = (Bitmap)localSoftReference.get();
          if (localBitmap2 != null)
            localObject2 = localBitmap2;
        }
      }
    }
    sSoftBitmapCache.remove(paramString);
    Object localObject2 = null;
    return (Bitmap) localObject2;
  }

  private void resetPurgeTimer()
  {
    this.purgeHandler.removeCallbacks(this.purger);
    this.purgeHandler.postDelayed(this.purger, 10000L);
  }

  public void clearCache()
  {
    this.sHardBitmapCache.clear();
    sSoftBitmapCache.clear();
  }

  public void download(String paramString, ImageView paramImageView)
  {
    resetPurgeTimer();
    Bitmap localBitmap = getBitmapFromCache(paramString);
    if (localBitmap == null)
      forceDownload(paramString, paramImageView);
    while (true)
    {
      return;
      cancelPotentialDownload(paramString, paramImageView);
      paramImageView.setImageBitmap(localBitmap);
    }
  }

  // ERROR //
  Bitmap downloadBitmap(String paramString)
  {
    // Byte code:
    //   0: aload_0
    //   1: getfield 65 org/fluturasymphony/recommendation/ImageDownloader:mode Lorg/fluturasymphony/recommendation/ImageDownloader$Mode;
    //   4: getstatic 48    org/fluturasymphony/recommendation/ImageDownloader$Mode:NO_ASYNC_TASK   Lorg/fluturasymphony/recommendation/ImageDownloader$Mode;
    //   7: if_acmpne +107 -> 114
    //   10: new 213    org/apache/http/impl/client/DefaultHttpClient
    //   13: dup
    //   14: invokespecial 214  org/apache/http/impl/client/DefaultHttpClient:<init>    ()V
    //   17: astore_2
    //   18: new 216    org/apache/http/client/methods/HttpGet
    //   21: dup
    //   22: aload_1
    //   23: invokespecial 219  org/apache/http/client/methods/HttpGet:<init>   (Ljava/lang/String;)V
    //   26: astore_3
    //   27: aload_2
    //   28: aload_3
    //   29: invokeinterface 224 2 0
    //   34: astore 15
    //   36: aload 15
    //   38: invokeinterface 230 1 0
    //   43: invokeinterface 235 1 0
    //   48: istore 16
    //   50: iload 16
    //   52: sipush 200
    //   55: if_icmpeq +69 -> 124
    //   58: ldc 15
    //   60: new 237    java/lang/StringBuilder
    //   63: dup
    //   64: ldc 239
    //   66: invokespecial 240  java/lang/StringBuilder:<init>  (Ljava/lang/String;)V
    //   69: iload 16
    //   71: invokevirtual 244  java/lang/StringBuilder:append  (I)Ljava/lang/StringBuilder;
    //   74: ldc 246
    //   76: invokevirtual 249  java/lang/StringBuilder:append  (Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   79: aload_1
    //   80: invokevirtual 249  java/lang/StringBuilder:append  (Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   83: invokevirtual 253  java/lang/StringBuilder:toString    ()Ljava/lang/String;
    //   86: invokestatic 259   android/util/Log:w  (Ljava/lang/String;Ljava/lang/String;)I
    //   89: pop
    //   90: aload_2
    //   91: instanceof 261
    //   94: istore 23
    //   96: aconst_null
    //   97: astore 8
    //   99: iload 23
    //   101: ifeq +10 -> 111
    //   104: aload_2
    //   105: checkcast 261 android/net/http/AndroidHttpClient
    //   108: invokevirtual 264 android/net/http/AndroidHttpClient:close    ()V
    //   111: aload 8
    //   113: areturn
    //   114: ldc_w 266
    //   117: invokestatic 270  android/net/http/AndroidHttpClient:newInstance  (Ljava/lang/String;)Landroid/net/http/AndroidHttpClient;
    //   120: astore_2
    //   121: goto -103 -> 18
    //   124: aload 15
    //   126: invokeinterface 274 1 0
    //   131: astore 17
    //   133: aload 17
    //   135: ifnull +280 -> 415
    //   138: aconst_null
    //   139: astore 19
    //   141: aload 17
    //   143: invokeinterface 280 1 0
    //   148: astore 19
    //   150: new 282   org/fluturasymphony/recommendation/ImageDownloader$FlushedInputStream
    //   153: dup
    //   154: aload 19
    //   156: invokespecial 285 org/fluturasymphony/recommendation/ImageDownloader$FlushedInputStream:<init>    (Ljava/io/InputStream;)V
    //   159: invokestatic 291  android/graphics/BitmapFactory:decodeStream (Ljava/io/InputStream;)Landroid/graphics/Bitmap;
    //   162: astore 21
    //   164: aload 19
    //   166: ifnull +8 -> 174
    //   169: aload 19
    //   171: invokevirtual 294 java/io/InputStream:close   ()V
    //   174: aload 17
    //   176: invokeinterface 297 1 0
    //   181: aload_2
    //   182: instanceof 261
    //   185: ifeq +10 -> 195
    //   188: aload_2
    //   189: checkcast 261 android/net/http/AndroidHttpClient
    //   192: invokevirtual 264 android/net/http/AndroidHttpClient:close    ()V
    //   195: aload 21
    //   197: astore 8
    //   199: goto -88 -> 111
    //   202: astore 20
    //   204: aload 19
    //   206: ifnull +8 -> 214
    //   209: aload 19
    //   211: invokevirtual 294 java/io/InputStream:close   ()V
    //   214: aload 17
    //   216: invokeinterface 297 1 0
    //   221: aload 20
    //   223: athrow
    //   224: astore 12
    //   226: aload_3
    //   227: invokevirtual 300 org/apache/http/client/methods/HttpGet:abort    ()V
    //   230: ldc 15
    //   232: new 237   java/lang/StringBuilder
    //   235: dup
    //   236: ldc_w 302
    //   239: invokespecial 240 java/lang/StringBuilder:<init>  (Ljava/lang/String;)V
    //   242: aload_1
    //   243: invokevirtual 249 java/lang/StringBuilder:append  (Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   246: invokevirtual 253 java/lang/StringBuilder:toString    ()Ljava/lang/String;
    //   249: aload 12
    //   251: invokestatic 305  android/util/Log:w  (Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
    //   254: pop
    //   255: aload_2
    //   256: instanceof 261
    //   259: istore 14
    //   261: aconst_null
    //   262: astore 8
    //   264: iload 14
    //   266: ifeq -155 -> 111
    //   269: aload_2
    //   270: checkcast 261 android/net/http/AndroidHttpClient
    //   273: invokevirtual 264 android/net/http/AndroidHttpClient:close    ()V
    //   276: aconst_null
    //   277: astore 8
    //   279: goto -168 -> 111
    //   282: astore 9
    //   284: aload_3
    //   285: invokevirtual 300 org/apache/http/client/methods/HttpGet:abort    ()V
    //   288: ldc 15
    //   290: new 237   java/lang/StringBuilder
    //   293: dup
    //   294: ldc_w 307
    //   297: invokespecial 240 java/lang/StringBuilder:<init>  (Ljava/lang/String;)V
    //   300: aload_1
    //   301: invokevirtual 249 java/lang/StringBuilder:append  (Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   304: invokevirtual 253 java/lang/StringBuilder:toString    ()Ljava/lang/String;
    //   307: invokestatic 259  android/util/Log:w  (Ljava/lang/String;Ljava/lang/String;)I
    //   310: pop
    //   311: aload_2
    //   312: instanceof 261
    //   315: istore 11
    //   317: aconst_null
    //   318: astore 8
    //   320: iload 11
    //   322: ifeq -211 -> 111
    //   325: aload_2
    //   326: checkcast 261 android/net/http/AndroidHttpClient
    //   329: invokevirtual 264 android/net/http/AndroidHttpClient:close    ()V
    //   332: aconst_null
    //   333: astore 8
    //   335: goto -224 -> 111
    //   338: astore 5
    //   340: aload_3
    //   341: invokevirtual 300 org/apache/http/client/methods/HttpGet:abort    ()V
    //   344: ldc 15
    //   346: new 237   java/lang/StringBuilder
    //   349: dup
    //   350: ldc_w 309
    //   353: invokespecial 240 java/lang/StringBuilder:<init>  (Ljava/lang/String;)V
    //   356: aload_1
    //   357: invokevirtual 249 java/lang/StringBuilder:append  (Ljava/lang/String;)Ljava/lang/StringBuilder;
    //   360: invokevirtual 253 java/lang/StringBuilder:toString    ()Ljava/lang/String;
    //   363: aload 5
    //   365: invokestatic 305  android/util/Log:w  (Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)I
    //   368: pop
    //   369: aload_2
    //   370: instanceof 261
    //   373: istore 7
    //   375: aconst_null
    //   376: astore 8
    //   378: iload 7
    //   380: ifeq -269 -> 111
    //   383: aload_2
    //   384: checkcast 261 android/net/http/AndroidHttpClient
    //   387: invokevirtual 264 android/net/http/AndroidHttpClient:close    ()V
    //   390: aconst_null
    //   391: astore 8
    //   393: goto -282 -> 111
    //   396: astore 4
    //   398: aload_2
    //   399: instanceof 261
    //   402: ifeq +10 -> 412
    //   405: aload_2
    //   406: checkcast 261 android/net/http/AndroidHttpClient
    //   409: invokevirtual 264 android/net/http/AndroidHttpClient:close    ()V
    //   412: aload 4
    //   414: athrow
    //   415: aload_2
    //   416: instanceof 261
    //   419: istore 18
    //   421: aconst_null
    //   422: astore 8
    //   424: iload 18
    //   426: ifeq -315 -> 111
    //   429: aload_2
    //   430: checkcast 261 android/net/http/AndroidHttpClient
    //   433: invokevirtual 264 android/net/http/AndroidHttpClient:close    ()V
    //   436: aconst_null
    //   437: astore 8
    //   439: goto -328 -> 111
    //
    // Exception table:
    //   from   to  target  type
    //   141    164 202 finally
    //   27 90  224 java/io/IOException
    //   124    133 224 java/io/IOException
    //   169    181 224 java/io/IOException
    //   209    224 224 java/io/IOException
    //   27 90  282 java/lang/IllegalStateException
    //   124    133 282 java/lang/IllegalStateException
    //   169    181 282 java/lang/IllegalStateException
    //   209    224 282 java/lang/IllegalStateException
    //   27 90  338 java/lang/Exception
    //   124    133 338 java/lang/Exception
    //   169    181 338 java/lang/Exception
    //   209    224 338 java/lang/Exception
    //   27 90  396 finally
    //   124    133 396 finally
    //   169    181 396 finally
    //   209    224 396 finally
    //   226    255 396 finally
    //   284    311 396 finally
    //   340    369 396 finally
  }

  public void setMode(Mode1 paramMode)
  {
    this.mode = paramMode;
    clearCache();
  }

  class BitmapDownloaderTask extends AsyncTask<String, Void, Bitmap>
  {
    private final WeakReference<ImageView> imageViewReference;
    private String url;

    public BitmapDownloaderTask(ImageView arg2)
    {
      Object localObject;
      this.imageViewReference = new WeakReference(localObject);
    }

    protected Bitmap doInBackground(String[] paramArrayOfString)
    {
      this.url = paramArrayOfString[0];
      return ImageDownloader.this.downloadBitmap(this.url);
    }

    protected void onPostExecute(Bitmap paramBitmap)
    {
      if (isCancelled())
        paramBitmap = null;
      ImageDownloader.this.addBitmapToCache(this.url, paramBitmap);
      if (this.imageViewReference != null)
      {
        ImageView localImageView = (ImageView)this.imageViewReference.get();
        if ((this == ImageDownloader.getBitmapDownloaderTask(localImageView)) || (ImageDownloader.this.mode != ImageDownloader.Mode1.CORRECT))
          localImageView.setImageBitmap(paramBitmap);
      }
    }
  }

  static class DownloadedDrawable extends ColorDrawable
  {
    private final WeakReference<ImageDownloader.BitmapDownloaderTask> bitmapDownloaderTaskReference;

    public DownloadedDrawable(ImageDownloader.BitmapDownloaderTask paramBitmapDownloaderTask)
    {
      super();
      this.bitmapDownloaderTaskReference = new WeakReference<BitmapDownloaderTask>(paramBitmapDownloaderTask);
    }

    public ImageDownloader.BitmapDownloaderTask getBitmapDownloaderTask()
    {
      return (ImageDownloader.BitmapDownloaderTask)this.bitmapDownloaderTaskReference.get();
    }
  }

  static class FlushedInputStream extends FilterInputStream
  {
    public FlushedInputStream(InputStream paramInputStream)
    {
      super(paramInputStream);
    }

    public long skip(long paramLong)
      throws IOException
    {
      long l2;
      for (long l1 = 0L; ; l1 += l2)
      {
        if (l1 >= paramLong);
        do
        {
          return l1;
          l2 = this.in.skip(paramLong - l1);
          if (l2 != 0L)
            break;
        }
        while (read() < 0);
        l2 = 1L;
      }
    }
  }
  public static enum Mode1{

      CORRECT ( new Mode1("CORRECT", 2),
      Mode1[] arrayOfMode = new Mode1[3],
      arrayOfMode[0] = NO_ASYNC_TASK,
      arrayOfMode[1] = NO_DOWNLOADED_DRAWABLE,
      arrayOfMode[2] = CORRECT1);

  }

} 
```

上面代码中的错误出现在枚举声明中，可以是我做错的任何地方。

我在这里收到一个错位的构造错误 Mode1 [] ...

![在此处输入图像描述](../Images/696d967900412d5d49230effa0f8c7f9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:10:21.950

更好的是你可以尝试一个简单的http方法来实现这一点。[您可以在此处](http://www.mediafire.com/?xlt6s61v14d38x7)获得实现此目的的简单项目

# c# - 从 XML 文件中获取节点的所有属性值

> ID：14053857
> 
> 赞同：0
> 
> 时间：2012-12-27T11:22:11.930
> 
> 标签：c#, .net, xml

我创建了一个如下所示的 xml 文件

```
<Engagements>
    <User name ="jjjj">
        <Engagement id="1111"/>
    </User>
    <User name ="kkkk">
        <Engagement id="2222"/>
    </User>
</Engagements> 
```

我需要从所有`Engagement`节点获取所有 id 值。

这是我目前拥有的：

```
public static void ParseXml(XmlDocument xmlFile) 
{
  XmlNodeList nodes = xmlFile.SelectNodes("//Engagement"); 
  foreach (XmlNode node in nodes) 
  { 
    // What goes here?
  } 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T11:31:36.113

使用 LINQ to XML：

```
XDocument doc = XDocument.Parse(xml);
var ids = doc.Descendants("Engagement").Attributes("id").Select(x => x.Value);

foreach (var id in ids)
    Console.WriteLine(id); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-27T10:42:35.030

```
var xmlString = "...";  // <--- your xml here
var xml = new XmlDocument();
xml.LoadXml(xmlString);
var xnList = xml.SelectNodes("/Engagements/User");
var test = "";
if (xnList != null) 
foreach (XmlNode xn in xnList)
{
    if (xn.Attributes != null)
    {
        if (xn.Attributes[0].Value == "kkkk")
        {
            if (xn.FirstChild.Attributes != null)
            {
                var xmlElement = xn.FirstChild.Attributes[0].Value;
                if (xmlElement != null)
                {
                    test = xmlElement;
                }
            }
        }
    }

}
Console.WriteLine(test);
Console.Read(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:32:04.050

您可以使用以下代码获取列表中的所有 id

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.LoadXml(yourxmlStringInput);
var engagements = xmlDoc.GetElementsByTagName("Engagement");
var ids = (from engagement in engagements 
          select engagement.Attributes["id"].Value).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T16:03:33.160

如果那些其他很好的答案不适合你，也许会在你陷入的同一环境中向你展示答案：

```
public static void ParseXml(XmlDocument xmlFile) 
{
  XmlNodeList nodes = xmlFile.SelectNodes("//Engagement"); 
  foreach (XmlNode node in nodes) 
  { 
    string id = node.Attributes["id"].InnerText;
    // Do whatever you need to with each ID here.
  } 
} 
```

如果您只想要具有属性的节点的属性部分，您可以通过指定您需要该属性并像这样选择它`id`来限制您的[XPath 查询：](http://visualcsharptutorials.com/net-framework/using-xpath-to-select-nodes)

`XmlNodeList nodes = xmlFile.SelectNodes("//Engagement[@id]/@id");`

此查询返回的每个节点都是一个 ID 属性节点，因此您可以使用`node.Value`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-27T11:10:24.080

var xmlString = "";

```
 var xml = new XmlDocument();
        xml.LoadXml(xmlString);

        foreach (XmlNode node in xml.SelectNodes("//Engagement[@id]"))
        {
            Console.WriteLine(node.Attributes["id"].Value);
        } 
```

# php - 将递归/多维数组与另一个数组匹配

> ID：14053859
> 
> 赞同：7
> 
> 时间：2012-12-27T11:22:17.003
> 
> 标签：php

我有以下数组（在下面调用`$example_array`）：

```
array(3) {
  ["id"]=> string(4) "123"
  ["name"]=>
      array(1) {
        ["first"]=> string(3) "pete"
        ["last"]=> string(3) "foo"
      }
  ["address"]=>
      array(1) {
        ["shipping"]=>
            array(1) {
              ["zip"]=> string(4) "1234"
              ["country"]=> string(4) "USA"
            }
      }
} 
```

我想要一个可以针对这样的数组运行并寻找匹配项的函数。以下是我希望能够执行的搜索：

```
// These should return true:
search( $example_array, array( 'id' => '123' ) );
search( $example_array, array( 'name' => array( 'first' => 'pete' ) );
search( $example_array, array( 'address' => array( 'shipping' => array( 'country' => 'USA' ) ) );

// These don't have to return true:
search( $example_array, array( 'first' => 'pete' ) );
search( $example_array, array( 'country' => 'USA' ) ); 
```

是否有我可以使用的 PHP 内部函数，或者我必须自己编写代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T11:36:50.627

```
function search($array, $b) {
    $ok = true;
    foreach ($b as $key => $value) {
        if (!isset($array[$key])) { $ok = false; break; }
        if (!is_array($value))
            $ok = ($array[$key] == $value);
        else 
            $ok = search($array[$key], $value);
        if ($ok === false) break;
    }
    return $ok;
} 
```

这是[测试脚本](http://pastebin.com/rkh7mC9s)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T14:21:11.563

希望这个功能有帮助：

```
public function matchArray(&$arrayToSearch, $valueToMatch = array()){
    if(!is_array($valueToMatch))
        $valueToMatch = array($valueToMatch);

    $exists = false;
    $indexToMatch = array_keys($valueToMatch);

    foreach($indexToMatch as $ind){
        if(array_key_exists($ind, $arrayToSearch)){
            $valToMatch = $valueToMatch[$ind];
            $value = $arrayToSearch[$ind];
            $valType = gettype($value);
            $valToMatch = $valueToMatch[$ind];
            if($valType == gettype($valToMatch) || is_numeric($valToMatch)){
                if($valType == 'array'){
                    $exists = $this->matchArray($value, $valToMatch);
                } else if(($valType == 'string' || is_numeric($valToMatch)) && $valToMatch == $value) {
                    $exists = true;
                } else {
                    $exists = false;
                    break;
                }
            }
        }
    }

    return $exists;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:08:40.837

iirc 没有内置函数可以做你想做的事。

这是一个（未经测试的）版本`array_walk`：

```
function search($data,$match) {
   return  array_walk($match, function($v,$k) use ($data) {
      if (isset($data[$k])){
         if (is_array($v)) return search($data[$k],$v);
         return ($v == $data[$k]);
      });
      return false;
 } 
```

它有点简洁（用 可以做得更好`?:`），但可能不是很可读。Lambda 是对 php 的一个很好的补充！

这是另一种可能的解决方案，但似乎效率低下（您应该进行基准测试以确保）：

```
 function search($d,$m) {
    return is_empty(array_diff_assoc(array_intersect_assoc($d,$m), $m));
 } 
```

如果使用的内置函数不是递归的，也许它不会工作。

# android - 提示在android的edittext中不起作用

> ID：14053860
> 
> 赞同：1
> 
> 时间：2012-12-27T11:22:19.840
> 
> 标签：android, android-edittext, hint

我使用`Hint`并且它在模拟器中工作，但是当我在手机中安装代码时，提示不起作用。

```
<EditText 
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:hint="نام"
    android:gravity="right"
    android:id="@+id/fname" 
    android:singleLine="true"
    android:imeActionLabel="Next"> 
</EditText>
<EditText 
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:hint="نام خانوادگی"
    android:gravity="right"
    android:id="@+id/lname" 
    android:singleLine="true"
    android:imeActionLabel="Next">
</EditText> 
```

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T11:24:08.027

复制`String`strings.xml 中的（表示您的相关语言），然后给出提示

```
android:hint="@string/strname"

<resources>

  <string name="strname">نام خانوادگی</string>

</resources> 
```

如果设备支持您的语言，上述操作将有效。

`android:singleLine="true"`从您的编辑文本中删除它，然后您可以看到提示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-19T09:09:52.843

这个问题实际上是 android 中一个臭名昭著的错误`EditText`。当使用`singleLine="true"`或`maxLines="1"`通常触发布局中阶段`android:scrollHorizontally="true"`的任何内容时，`EditText`无法正确呈现**RtL**提示。

如果您的语言布局方向是 RtL，您可以`setting gravity="right|center_vertical"`通过`EditText`.

PS：这个问题已经在**IssueTracker**上很久了，但是从那以后没有任何修复。您可以通过对此问题加注星标来帮助更快地解决此问题： [https ://issuetracker.google.com/issues/36924615](https://issuetracker.google.com/issues/36924615)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-30T07:04:32.040

当您为 EditBox 定义 InputType 时，作为波斯语或其他 Unicode 语言的提示不会
显示。你应该删除

```
android:inputType="..." 
```

# javascript - express js中的请求参数

> ID：14053863
> 
> 赞同：12
> 
> 时间：2012-12-27T11:22:27.080
> 
> 标签：javascript, node.js, express

我正在使用 express.js，并且正在尝试使用以下代码获取请求参数。

```
app.configure(function () {
  app.use(express.static(__dirname + '/public'));
});

app.get('/', function (req, res) {
  console.log(req.params[0]);
  console.log(req.params.id);
  res.render('/public/index.html');
}); 
```

我的网址看起来像这样。

```
http://localhost:8080/?id=34. 
```

我没有得到请求参数。我尝试了所有的可能性。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-27T19:48:24.307

You need to reference [`req.query`](http://expressjs.com/api.html#req.query)

[`req.params`](http://expressjs.com/api.html#req.params) is for params embedded in the URL path.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-28T06:02:15.813

你也可以使用

> req.param('id')

它将为您获取路径、正文和查询参数。

# c#-4.0 - 更新命令找不到控件的正确值

> ID：14053870
> 
> 赞同：0
> 
> 时间：2012-12-27T11:23:04.270
> 
> 标签：c#-4.0, gridview, findcontrol, updatecommand

我在网格视图的edititemtamlate 中创建了一个表格。

```
<asp:TemplateField>
<EditItemTemplate>
    <%--    <asp:Panel ID="pnltable" runat="server">--%>
<table border="1px" cellpadding="0px" cellspacing="0px" >
<tr>
    <td>
        <asp:Label Text="T1" runat="server" ID="Label111"></asp:Label>
    </td>
    <td>
        <asp:Label Text="T2" runat="server" ID="Label112"></asp:Label>
    </td>
    <td>
        <asp:Label Text="T3" runat="server" ID="Label113"></asp:Label>
    </td>
    <td>
        <asp:Label Text="T4" runat="server" ID="Label114"></asp:Label>
    </td>
    <td>
        <asp:Label Text="T5" runat="server" ID="Label115"></asp:Label>
    </td>
    <td>
        <asp:Label Text="T6" runat="server" ID="Label116"></asp:Label>
    </td>
    <td>
        <asp:Label Text="T7" runat="server" ID="Label117"></asp:Label>
    </td>
    <td>
        <asp:Label Text="T8" runat="server" ID="Label118"></asp:Label>
    </td>
    <td>
        <asp:Label Text="T9" runat="server" ID="Label119"></asp:Label>
    </td>
    <td>
        <asp:Label Text="T10" runat="server" ID="Label1110"></asp:Label>
    </td>
</tr>
<tr>
    <td>
        <asp:CheckBox ID="CheckBox11" runat="server" AutoPostBack="true" />
    </td>
    <td>
        <asp:CheckBox ID="CheckBox12" runat="server" AutoPostBack="true" />
    </td>
    <td>
        <asp:CheckBox ID="CheckBox13" runat="server" AutoPostBack="true" />
    </td>
    <td>
        <asp:CheckBox ID="CheckBox14" runat="server" AutoPostBack="true" />
    </td>
    <td>
        <asp:CheckBox ID="CheckBox15" runat="server" AutoPostBack="true" />
    </td>
    <td>
        <asp:CheckBox ID="CheckBox16" runat="server"  AutoPostBack="true"/>
    </td>
    <td>
        <asp:CheckBox ID="CheckBox17" runat="server" AutoPostBack="true" />
    </td>
    <td>
        <asp:CheckBox ID="CheckBox18" runat="server" AutoPostBack="true" />
    </td>
    <td>
        <asp:CheckBox ID="CheckBox19" runat="server" AutoPostBack="true" />
    </td>
    <td>
        <asp:CheckBox ID="CheckBox20" runat="server" AutoPostBack="true" />
    </td>
</tr>
</table>
    <%--</asp:Panel>--%>
</EditItemTemplate> 
```

当用户单击编辑按钮时，该表将显示表中的值。为此，我在 editcommand 中编写了这样的代码，它可以完美运行。

```
Guid SubscriptionId = (Guid)Subscriptions.DataKeys[e.NewEditIndex].Value;
var s = m.bussinesCollection.BussinesPlanning.GetSingleSubVersionTrueFalse(SubscriptionId);
CheckBox d11 = (CheckBox)Subscriptions.Rows[e.NewEditIndex].FindControl("CheckBox11");
CheckBox d12 = (CheckBox)Subscriptions.Rows[e.NewEditIndex].FindControl("CheckBox12");
CheckBox d13 = (CheckBox)Subscriptions.Rows[e.NewEditIndex].FindControl("CheckBox13");
CheckBox d14 = (CheckBox)Subscriptions.Rows[e.NewEditIndex].FindControl("CheckBox14");
CheckBox d15 = (CheckBox)Subscriptions.Rows[e.NewEditIndex].FindControl("CheckBox15");
CheckBox d16 = (CheckBox)Subscriptions.Rows[e.NewEditIndex].FindControl("CheckBox16");
CheckBox d17 = (CheckBox)Subscriptions.Rows[e.NewEditIndex].FindControl("CheckBox17");
CheckBox d18 = (CheckBox)Subscriptions.Rows[e.NewEditIndex].FindControl("CheckBox18");
CheckBox d19 = (CheckBox)Subscriptions.Rows[e.NewEditIndex].FindControl("CheckBox19");
CheckBox d20 = (CheckBox)Subscriptions.Rows[e.NewEditIndex].FindControl("CheckBox20");

    if (d11 != null){
        d11.Checked = s.T1.Value;
    }
    if (d12 != null){
        d12.Checked = s.T2.Value;
    }
    if (d13 != null){
        d13.Checked = s.T3.Value;
    }
    if (d14 != null){
        d14.Checked = s.T4.Value;
    }
    if (d15 != null){
        d15.Checked = s.T5.Value;
    }
    if (d16 != null){
        d16.Checked = s.T6.Value;
    }
    if (d17 != null){
        d17.Checked = s.T7.Value;
    }
    if (d18 != null){
        d18.Checked = s.T8.Value;
    }
    if (d19 != null) {
        d19.Checked = s.T9.Value;
    }
    if (d20 != null){
        d20.Checked = s.T10.Value;
    } 
```

现在在更新命令中，当我更改复选框值并尝试像在更新命令中的代码中一样更新它时

```
CheckBox c1 = (CheckBox)(Subscriptions.Rows[e.RowIndex].FindControl("CheckBox11"));
CheckBox c2 = (CheckBox)(Subscriptions.Rows[e.RowIndex].Cells[7].FindControl("CheckBox12"));
CheckBox c3 = (CheckBox)(Subscriptions.Rows[e.RowIndex].FindControl("CheckBox13"));
CheckBox c4 = (CheckBox)(Subscriptions.Rows[e.RowIndex].FindControl("CheckBox14"));
CheckBox c5 = (CheckBox)(Subscriptions.Rows[e.RowIndex].FindControl("CheckBox15"));
CheckBox c6 = (CheckBox)(Subscriptions.Rows[e.RowIndex].FindControl("CheckBox16"));
CheckBox c7 = (CheckBox)(Subscriptions.Rows[e.RowIndex].FindControl("CheckBox17"));
CheckBox c8 = (CheckBox)(Subscriptions.Rows[e.RowIndex].FindControl("CheckBox18"));
CheckBox c9 = (CheckBox)(Subscriptions.Rows[e.RowIndex].FindControl("CheckBox19"));
CheckBox c10 = (CheckBox)(Subscriptions.Rows[e.RowIndex].FindControl("CheckBox20"));

if (c1 != null && c2 != null && c3 != null && c4 != null && c5 != null && c6 != null && c7 != null && c8 != null && c9 != null && c10 != null)
{
    m.bussinesCollection.BussinesPlanning.UpdateSubVersionTrueFalseForUpdate(subscriptionID, c1.Checked, c2.Checked, c3.Checked, c4.Checked, c5.Checked, c6.Checked, c7.Checked, c8.Checked, c9.Checked, c10.Checked);
} 
```

但是在这里它没有给出任何错误但是当我调试我显示的代码时，在更新命令中的复选框控制 c1 到 c10 它总是得到值 `Checked = false`

即使我选中复选框。

所以它以错误的方式更新。

谁能告诉我我错在哪里..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T05:56:34.690

这是我尝试过的小例子

```
protected void Page_Load(object sender, EventArgs e)
{
  if (!Page.IsPostBack) {
       bindgv();
  }
}

public void bindgv()
{
  SqlDataAdapter dap = new SqlDataAdapter("select * from mytable", Con);
  DataSet ds = new DataSet();
  dap.Fill(ds);
  GridView1.DataSource = ds.Tables[0];
  GridView1.DataBind();
}

protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
  GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];
  CheckBox c1 = (CheckBox)GridView1.Rows[e.RowIndex].FindControl("CheckBox1");
  CheckBox c2 = (CheckBox)GridView1.Rows[e.RowIndex].FindControl("CheckBox2");
  CheckBox c3 = (CheckBox)GridView1.Rows[e.RowIndex].FindControl("CheckBox3");
  Label lblid = (Label)GridView1.Rows[e.RowIndex].FindControl("lblid");
  updateMethod(lblid.Text, c1.Checked, c2.Checked, c3.Checked);

}

public void updateMethod(string id, bool c1, bool c2, bool c3)
{
  using (SqlConnection con = new SqlConnection(myCon))
  {
     con.Open();
     SqlCommand cmd = new SqlCommand("update mytable set c1= @c1value , c2=@c2value, c3= @c3value where id=@id", con);
     cmd.Parameters.AddWithValue("@c1value", c1);
     cmd.Parameters.AddWithValue("@c2value", c2);
     cmd.Parameters.AddWithValue("@c3value", c3);
     cmd.Parameters.AddWithValue("@id", id);
     cmd.ExecuteNonQuery();
  }
    GridView1.EditIndex = -1;
    bindgv();
}

protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{
  GridView1.EditIndex = e.NewEditIndex;
  bindgv();
}

protected void GridView1_RowCancelingEdit(object sender, GridViewCancelEditEventArgs e)
{
  GridView1.EditIndex = -1;
  bindgv();
} 
```

**HTML 标记**

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
onrowediting="GridView1_RowEditing" 
onrowcancelingedit="GridView1_RowCancelingEdit" 
onrowupdating="GridView1_RowUpdating">
<Columns>
    <asp:TemplateField HeaderText="ID">
        <ItemTemplate>
            <asp:Label ID="lblid" runat="server" Text='<%# Bind("id") %>'></asp:Label>
        </ItemTemplate>

    </asp:TemplateField>
    <asp:TemplateField HeaderText="Name">
        <ItemTemplate>
            <asp:Label ID="Label3" runat="server" Text='<%# Bind("name") %>'></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="checkbox">
    <ItemTemplate>
    <table>
    <tr>   
    <td><asp:Label ID="Label2" runat="server" Text='<%# Bind("c1") %>'></asp:Label></td>
    <td><asp:Label ID="Label5" runat="server" Text='<%# Bind("c2") %>'></asp:Label></td>
    <td><asp:Label ID="Label4" runat="server" Text='<%# Bind("c3") %>'></asp:Label></td>
    </tr>
     <tr>  
     <td> <asp:CheckBox ID="CheckBox1" runat="server" Checked='<%# Bind("c1") %>' /></td>
     <td><asp:CheckBox ID="CheckBox2" runat="server" Checked='<%# Bind("c2") %>' /></td>
     <td><asp:CheckBox ID="CheckBox3" runat="server" Checked='<%# Bind("c3") %>' /></td>
     </tr>
    </table>
   </ItemTemplate>
 <EditItemTemplate>
   <table>
    <tr>   
    <td><asp:Label ID="Label2" runat="server" Text='<%# Bind("c1") %>'></asp:Label></td>
    <td><asp:Label ID="Label5" runat="server" Text='<%# Bind("c2") %>'></asp:Label></td>
    <td><asp:Label ID="Label4" runat="server" Text='<%# Bind("c3") %>'></asp:Label></td>
   </tr>
   <tr>  
    <td> <asp:CheckBox ID="CheckBox1" runat="server" Checked='<%# Bind("c1") %>' /></td>
    <td><asp:CheckBox ID="CheckBox2" runat="server" Checked='<%# Bind("c2") %>' /></td>
    <td><asp:CheckBox ID="CheckBox3" runat="server" Checked='<%# Bind("c3") %>' /></td>
  </tr>
   </table>
        </EditItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField ShowHeader="False">
        <ItemTemplate>
            <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" 
                CommandName="Edit" Text="Edit"></asp:LinkButton>
        </ItemTemplate>
        <EditItemTemplate>
            <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" 
                CommandName="Update" Text="Update"></asp:LinkButton>
            &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                CommandName="Cancel" Text="Cancel"></asp:LinkButton>
        </EditItemTemplate>
    </asp:TemplateField>
</Columns>
</asp:GridView> 
```

**截屏：**

![截屏](../Images/04c58e3943916b0b668cf98303eabe19.png)

# excel - 将工作表模板导出为 PDF 会生成运行时错误 5：无效的过程调用或参数

> ID：14053873
> 
> 赞同：2
> 
> 时间：2012-12-27T11:23:15.630
> 
> 标签：excel, vba, excel-2007

我创建了一个宏来将工作表模板导出为 PDF：

```
ActiveWorkbook.Sheets("Sheet2").ExportAsFixedFormat Type:=xlTypePDF, Filename:= _
  ActiveWorkbook.Path & "\Survey Report.pdf", _
Quality:=xlQualityStandard, IncludeDocProperties:=True, IgnorePrintAreas _
  :=False, OpenAfterPublish:=True 
```

我尝试了其他方式，但在错误方面没有区别。

已经尝试过的链接：

1.  [http://www.mrexcel.com/forum/excel-questions/608810-printing-multiple-worksheets-pdf-2.html](http://www.mrexcel.com/forum/excel-questions/608810-printing-multiple-worksheets-pdf-2.html)
2.  [http://www.mrexcel.com/forum/microsoft-access/385749-exportasfixedformat-error.html](http://www.mrexcel.com/forum/microsoft-access/385749-exportasfixedformat-error.html)
3.  [http://answers.microsoft.com/en-us/office/forum/office_2010-customize/error-5-invalid-procedure-call-or-argument/574c2c8f-7f2c-4644-9373-bbc14c8d3fd7?msgId=4dbee3f3- ad28-4427-a50b-a3904b09ec1e](http://answers.microsoft.com/en-us/office/forum/office_2010-customize/error-5-invalid-procedure-call-or-argument/574c2c8f-7f2c-4644-9373-bbc14c8d3fd7?msgId=4dbee3f3-ad28-4427-a50b-a3904b09ec1e)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T15:02:55.577

您的实际代码对我有用。但是试试这个（**TRIED AND TESTED**）

```
Sub Sample()
    ActiveWorkbook.Sheets("Sheet2").Activate

    ActiveSheet.ExportAsFixedFormat _
    Type:=xlTypePDF, _
    Filename:=ActiveWorkbook.Path & "\Survey Report.pdf", _
    Quality:=xlQualityStandard, _
    IncludeDocProperties:=True, _
    IgnorePrintAreas:=False, _
    OpenAfterPublish:=True
End Sub 
```

**注意**：

1.  也希望`Sheet2`里面有一些东西可以打印，否则一张空白纸会给你错误。
2.  如果您想从运行代码的工作簿中打印工作表，那么您可能需要更改`ActiveWorkbook`为`ThisWorkbook`并重试...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-07T23:26:09.227

我也遇到了这个错误，并尝试手动解决问题。

事实证明，当文件名（包括路径）超过 218 个字符时，您无法另存为 PDF。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-09T17:17:03.957

您还必须安装 Excel 的免费[Microsoft Save as PDF 或 XPS 插件](https://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=7)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-25T12:35:06.390

如果您安装了 adobe 打印机，则只需使用以下代码获取 pdf

```
sub Sample()
    ActiveWorkbook.Sheets("Sheet2").Activate
    ActiveSheet.Printout
End Sub 
```

# php - Joomla 文章别名不起作用

> ID：14053874
> 
> 赞同：7
> 
> 时间：2012-12-27T11:23:16.813
> 
> 标签：php, joomla

通过别名访问新创建的文章时出现 404 错误，我发现需要执行以下操作：

[http://yoursite.com/section-alias/category-alias/article-alias](http://yoursite.com/section-alias/category-alias/article-alias)

仍然显示 404 错误，知道吗？如果我只使用[http://yoursite.com/section-alias](http://yoursite.com/section-alias) 它也会给出 404 - 知道吗？

我正在使用 joomla 1.5.23

我当前的 sef 设置是：

*   搜索引擎友好：**开启**
*   使用 Apache mod_rewrite: **on**
*   为 URL 添加后缀：**off**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T11:40:14.740

从菜单管理器创建一个隐藏菜单（即不向站点访问者显示的菜单）并将文章添加为菜单项。您无需为此菜单创建模块，因为您不会在前端显示它们。通过创建一个菜单项，Joomla 会跟踪别名并正确显示它们。

在旁注中，您打开了搜索友好的网址......所以您是否将 htaccess.txt 重命名为 .htaccess？请也检查一下。

如果某些链接出现 404 问题，请检查所有菜单并查找别名重复。

也请看看这个线程：http: [//forum.joomla.org/viewtopic.php?p=1896103](http://forum.joomla.org/viewtopic.php?p=1896103)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:25:44.587

您还需要创建一个指向本文的菜单项。然后使用菜单别名，您可以访问该文章。

# visual-studio-2010 - Visual Studio 2010：像 $(...) 这样的变量在哪里？

> ID：14053875
> 
> 赞同：-1
> 
> 时间：2012-12-27T11:23:19.140
> 
> 标签：visual-studio-2010, msbuild, build-process

我想知道`$(...)`声明变量的位置以及如何定义自定义变量。

我的意思是，当您打开 C# 项目配置文件 ( `.csproj`) 时，有很多变量，例如：`$(SolutionDir)`, `$(MSBuildBinPath)`- 这些在哪里配置？

如果我想创建一个自定义文件以在`.csproj`文件中使用以指向某个地方，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:51:42.333

这些只是 Visual Studio 内部变量。但是，您可以使用相同的语法在 VS 中使用常规 Windows 系统变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T12:18:32.503

这些是[MSBuild](http://msdn.microsoft.com/en-us/library/0k6kkbsd.aspx)属性 - 它们在不同的[`.targets`文件](http://msdn.microsoft.com/en-us/library/ms164312.aspx)中定义，有些在命令行上传递给编译器。

您可以声明自定义属性（除了[众所周知](http://msdn.microsoft.com/en-us/library/ms164313.aspx)的属性）并将它们放在`.targets`您包含在文件中的文件中，或者[在命令行](http://msdn.microsoft.com/en-us/library/ms164311.aspx)`.csproj`中传递它们，您还可以在其中覆盖众所周知的属性默认值。

属性的语法是：

```
/property:name=value 
```

文件中将在哪里`name`使用.`.csproj``$(name)`

# algorithm - 整数分区（算法和递归）

> ID：14053885
> 
> 赞同：24
> 
> 时间：2012-12-27T11:23:48.433
> 
> 标签：algorithm, recursion, integer-partition

求和数的多少组合（代码中的变量**n**）。例如：

> 3 = 1+1+1 = 2+1 = 3 => ANS 为 3
> 
> 5 = 5 = 4+1 = 3+2 = 3+1+1 = 2+2+1 = 2+1+1+1 = 1+1+1+1+1 => ANS 为 7

在下面的例子中，**m**是最大数并且`n`是 sum，目的是找出它有多少个（sum）组合。

我只想知道为什么要这样做`p(n, m) = p(n, m - 1) + p(n - m, m)`？

这里的代码：

```
int p (int n, int m)
{
    if (n == m)
        return 1 + p(n, m - 1);
    if (m == 0 || n < 0)
        return 0;
    if (n == 0 || m == 1)
        return 1;

    return p(n, m - 1) + p(n - m, m);

} 
```

赞赏！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-08-21T20:49:43.083

`n`通过添加一些小于或等于 的数字来考虑所有的结果方式`m`。正如你所说，我们称之为`p(n,m)`. 例如，p(7,3)=8，因为有 8 种方法可以使小于 3 的数字变成 7，如下所示：（为简单起见，我们可以假设始终按从大到小的顺序添加数字）

*   3+3+1
*   3+2+2
*   3+2+1+1
*   3+1+1+1+1
*   2+2+2+1
*   2+2+1+1+1
*   2+1+1+1+1+1
*   1+1+1+1+1+1+1

现在我们可以将这些组合分成两组：

1.  第一个元素等于`m`（在我们的示例中为=3：）的组合

    *   3+3+1
    *   3+2+2
    *   3+2+1+1
    *   3+1+1+1+1
2.  第一个元素小于 的组合`m`：

    *   2+2+2+1
    *   2+2+1+1+1
    *   2+1+1+1+1+1
    *   1+1+1+1+1+1+1

因为组合的每个成员`p(n,m)`要么在 Group1 中，要么在 Group2 中，我们可以说`p(n,m)=size(Group1) + size(Group2)`. 现在，如果我们证明这一点`size(Group1)=p(n-m, m)`并`size(Group2)=p(n,m-1)`通过替换我们达到`p(n,m)=p(n-m,m)+p(n,m-1)`

### 证明`size(Group1)=p(n-m, m)`：

根据上述定义，是通过添加一些小于或等于 的数`p(n-m, m)`得出的结果的数量。`n-m``m`

*   如果您附加`m`到 的每个组合`p(n-m, m)`，它将导致 Group1 的成员。所以`p(n-m, m) <= size(Group1)`
*   如果您删除`m`Group1 的每个成员中的第一个，它将导致`p(n-m, m)`. 所以`size(Group1) <= p(n-m, m)`

`=> size(Group1) = p(n-m, m)`. 在我们的示例中：

Group1 <===对应===> p(4, 3) ：

*   7=3+ `3+1`<===========> `3+1`=4
*   7=3+ `2+2`<===========> `2+2`=4
*   7=3+ `2+1+1`<=======> `2+1+1`=4
*   7=3+ `1+1+1+1`<===> `1+1+1+1`=4

`p(n-m,m)`所以和 Group1 的任何成员都是一一对应的，它们的大小是相等的。

### 证明`size(Group2)=p(n, m-1)`：

根据定义，`p(n,m-1)`是`n`通过添加一些小于或等于`m-1`（小于`m`）的数字而得到的结果的数量。如果你重新阅读 Group2 的定义，你会发现这两个定义是相同的。`=> size(Group2) = p(n, m-1)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-11-21T00:00:51.223

```
 / 0 (k>n)
p(k,n)={  1 (k=n)
        \ p(k+1,n)+p(k,n-k) (k<n) 
```

的分区数`n`为`p(1,n)`。

`p(k,n)`是 的分区数`n`，只允许加数`>=k`。

就像 OP 的递归公式一样，它（正如 luiges90 所说）将它们一一添加（增加了许多零的低效率）。不过幸运的是，它可以在数组中以极快的速度计算：

```
#include <stdio.h>

/* 406 is the largest n for which p(n) fits in 64 bits */
#define MAX 406
long long int pArray[MAX][MAX];

/* Emulate array starting at 1: */
#define p(k,n) pArray[k-1][n-1]

int main(int argc, char **argv) {
    int n, k;
    for (n = 1; n < MAX; n++) {
        for (k = n; k > 0; k--) {
            if (k > n) {
                p(k, n) = 0;
            } else if (k == n) {
                p(k, n) = 1;
            } else {
                p(k, n) = p(k, n - k) + p(k + 1, n);
            }
        }
    }
    for (n = 1; n < MAX; n++) {
        printf("p(%d)=%lld\n", n, p(1, n));
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-20T15:41:16.957

首先，您可能想了解更多有关此功能的信息，请参阅[http://mathworld.wolfram.com/PartitionFunctionP.html](http://mathworld.wolfram.com/PartitionFunctionP.html)。

至于这个公式，记住`p(n, m)`定义为`n`最大成员最多为 的分区数`m`。

因此`p(n, m)`是`m`其最大成员最多的分区数`m`。让我们根据最大的成员是否实际来划分它们`m`。

最大成员为的分区`m`数是填充方式的数量，即最大成员最多`n = m + ...`为的分区数，定义为。`n-m``m``p(n-m, m)`

`n`其最大成员最多的分区数`m-1`由定义决定`p(n, m-1)`。

因此`p(n, m) = p(n-m, m) + p(n, m-1)`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T13:35:22.430

表示`p(n, m)`为总和为`n`且每个加数小于或等于的所有组合的数量`m`。这里的关键是证明以下递归方程：

```
p(n, m) - p(n, m - 1) = p(n-m, m)          (1) 
```

(1)的左边是p(n, m)和p(n, m - 1)的差，它们是包含至少一个`m`作为加数的所有组合的数量，剩下的和是`n-m`（使得总体是`n`)，除此之外每个加数都小于或等于`m`. 但这恰好意味着 p(nm, m)，它是 (1) 的右侧。

显然，问题的答案应该是p(n,n)。

# java - JPA 关系

> ID：14053888
> 
> 赞同：1
> 
> 时间：2012-12-27T11:23:59.607
> 
> 标签：java, jpa, entity-relationship

如果你有这样的关系：

![在此处输入图像描述](../Images/96036d327d622a8f1ad3c203713f0793.png)

*   员工与其上级员工的多对一关系
*   员工与其部门的多对一关系
*   部门与其经理一对一

我会在 Employee 实体中写：

```
@ManyToOne (cascade=CascadeType.PERSIST)
private Employee supervisor;
@ManyToOne (cascade=CascadeType.PERSIST)
private Department department; 
```

并且在部门

```
@OneToOne (cascade=CascadeType.PERSIST)
private Employee manager; 
```

然后我将创建并设置员工的变量（姓名、职务、薪水、主管）

然后我会用他的变量（名称，代码）创建部门

创建部门后，我可以在员工中设置部门

然后我可以设置部门经理。

设置所有变量后，我可以保留实体的。我坚持员工（因为部门的关系也会坚持）

我相信这是正确的做法？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:32:00.947

同时提供注解@ManyToOne；还提供注解@JoinColumn

因为现在你只担心坚持它会正常工作。如果以后您希望更新也以相同的方式工作；你必须使用 CascadeType.ALL 或 CascadeType.MERGE

# git - 用 git 备份代码的好方法

> ID：14053893
> 
> 赞同：2
> 
> 时间：2012-12-27T11:24:18.470
> 
> 标签：git, backup

我刚刚阅读 [了版本控制不是备份系统](http://www.git-tower.com/files/cheatsheet/Git_Cheat_Sheet_grey.pdf)(pdf)。

我想知道是否有一种好方法可以在一天结束时将我的代码备份到远程服务器中（以防我的笔记本电脑出现问题），而我所有的临时更改绝对不应该提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:45:50.110

我只`git commit --all`需要主题`WIP`（或仅提供`--fixup`）的所有内容，然后推送到遥控器。

第二天早上的第一件事，然后`git reset HEAD^`从你离开的地方继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:32:04.133

如果你在远程服务器上有一个私有仓库，你可以提交所有东西，包括坏的东西，然后第二天你用好东西更新你的仓库，可能会重置你前一天的一些工作。这只是一个想法。或者使用 dev 分支，只将好的提交合并到 master 中。如果您有私人回购，任何人都不会看到。许多地方都可以使用免费的私人存储库，例如 baregit.com 或其他地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T11:57:54.470

如果您将`.git`子目录放入*Dropbox*之类的云同步服务中，您只需要`git add --update`在一天结束时对索引进行未提交的更改，它就会自动备份到云中。

（我不建议您将整个工作副本放入 Dropbox，因为您的编辑/构建过程可能会导致白天过多的后台更新。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T20:54:02.033

我个人喜欢[git archive 命令](http://www.kernel.org/pub/software/scm/git/docs/git-archive.html)。它提取给定的提交并保存它。没有版本控制，只有组成所说提交的文件

示例**压缩**命令：

`git archive --format=zip --output /full/path/to/zipfile.zip master`

**tar.gz**命令示例：

`git archive --format=tar --output /full/path/to/zipfile.zip master | gzip`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T11:32:31.977

您可以创建一个临时分支，提交暂存的内容，添加未暂存的内容，提交。强制将其向上推（也许推到不同的遥控器）。`git checkoung -`.

每天下班前都要这样做。

# jsf - 如何使用带有 POST 参数的 JSF 隐式重定向

> ID：14053904
> 
> 赞同：2
> 
> 时间：2012-12-27T11:25:08.260
> 
> 标签：jsf, post, parameters

在我的 JSF 应用程序中，我有两个页面，`list.jsf`和`details.jsf`，每个页面都有自己的具有视图范围的控制器。在`list.jsf`我有一个`<h:commandLink>`调用一个动作并传递一个参数：

```
<h:commandLink value="details" action="#{listBean.goToDetails}" >
   <f:param  name="id" value="#{listBean.object.pk}"/></h:commandLink> 
```

这是豆方法：

```
@ManagedBean
@ViewScoped
public class ListBean {
    public String goToDetails() {
        // some code
        return "details?faces-redirect=true";
    }
} 
```

我像这样读取第二个 bean 中的参数：

```
Map<String, String> params = FacesContext.getCurrentInstance()
                .getExternalContext().getRequestParameterMap();
        this.setIdParam(params.get("id")); 
```

当我运行此代码时，参数不会传递给第二个 bean 实例。但是，当我将导航更改为`forward`（不带`faces-redirect=true`）时，传递了参数，我可以看到详细信息，`details.jsf`但 URL 与当前页面不匹配。

所以我想做的是使用带有POST参数（f：param）的“jsf隐式重定向”（不是转发）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T13:07:10.530

您不能使用 POST 重定向。

当您使用时，`faces-redirect=true`您正在使用[HTTP 重定向](http://en.wikipedia.org/wiki/URL_redirection#HTTP_status_codes_3xx)，发生的情况是：服务器向浏览器发送[HTTP 302](http://en.wikipedia.org/wiki/HTTP_302)响应，其中包含用于重定向的 URL，然后浏览器对该 URL 执行 GET 请求。

您可以做的是重定向到`id`通过 GET 发送参数的 URL，如下所示：

```
public void goToDetails(){
    // some code
    ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext()
    String id = object.getPk().toString();
    ec.redirect(ec.getRequestContextPath() + "/details.jsf?id=" + id);
} 
```

[`Faces#redirect()`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/util/Faces.html#redirect(java.lang.String,%20java.lang.String...))您可能想为这类事情创建一个 util 方法，例如[OmniFaces library](http://omnifaces.org)。

**更新：**如评论中所述，也可以在返回字符串中添加 id ：

```
public String goToDetails(){
    // some code
    String id = object.getPk().toString();
    return "details?faces-redirect=true&id=" + id;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-28T09:40:16.593

如果后面的支持 bean`list.jsf`不需要做任何处理（从示例中它看起来不像），您应该`details.jsf`通过 GET 请求直接链接到。

您可以`<h:link>`为此使用标签，如下所示：

```
<h:link value="details" outcome="details.jsf" >
    <f:param  name="id" value="#{listBean.object.pk}"/>
</h:link> 
```

在您的详细信息视图中，您可以声明该视图使用 GET 参数并将其直接绑定到该视图的支持 bean：

```
<f:metadata>
    <f:viewParam name="id" value="#{detailsBean.id}" />
</f:metadata> 
```

此外，您可以直接验证和/或转换该参数，因此您`detailsBean`将获得正确类型的 Object 而不是基于字符串的 id。如果`detailsBean`在 GET 参数注入后需要做任何后期处理，可以使用`preRenderView`事件：

```
<f:metadata>
    <f:viewParam name="id" value="#{detailsBean.id}" />
    <f:event type="preRenderView" listener="#{detailsBean.preRenderView()}" />
</f:metadata> 
```

工作示例：

*   [http://code.google.com/p/javaee6-crud-example/source/browse/WebContent/index.xhtml](http://code.google.com/p/javaee6-crud-example/source/browse/WebContent/index.xhtml)
*   [http://code.google.com/p/javaee6-crud-example/source/browse/WebContent/user_edit.xhtml](http://code.google.com/p/javaee6-crud-example/source/browse/WebContent/user_edit.xhtml)

另见：

*   [JSF 2.0 中的通信](http://balusc.blogspot.nl/2011/09/communication-in-jsf-20.html)

# c# - 使用/需要反射

> ID：14053906
> 
> 赞同：1
> 
> 时间：2012-12-27T11:25:13.657
> 
> 标签：c#, .net, reflection

我在这个论坛中搜索了这些问题并找到了很好的资源。我自己编写了以下代码来理解反射的概念。

```
static void Main(String[] args)
    {

        MyClass1 mc1 = new MyClass1();
        Type t = mc1.GetType();
        MethodInfo mInfo = t.GetMethod("method1");
        object[] o=new object[]{2};
        Console.WriteLine(mInfo.Invoke(mc1, o));
        NameSpace2.Class1 c1 = new NameSpace2.Class1();
        Type t2 = c1.GetType();
        MethodInfo[] mI2 = t2.GetMethods();
        object[] o2 = new object[] {2,3};
        foreach (MethodInfo m in mI2)
        {
            Console.WriteLine(m);
        }

        object x = Activator.CreateInstance(t);

        Console.WriteLine(x.GetType());
        Console.Read();

    } 
```

我知道通过反射，我将能够在运行时获取有关类型、公共方法、对象属性的信息，并且还能够创建该类型的对象。但我的观点是，除非并且直到我知道方法需要作为输入的参数是什么，否则我将无法实现任何方法，并且这些信息仅在运行时可用。那么，反射的重要性是什么，它只是关于一个对象的信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:26:20.660

如果您需要反射，那么您的需求无法在编译时解决，而是在运行时解决。

*   假设您正在制作一个需要模块化的酷应用程序，您让开发人员为您的应用程序编写插件。您无法为可能创建的每个插件编译应用程序。然后你需要通过反射加载、内省和调用插件的对象。

*   假设您正在为银行应用程序制作中间件，该中间件负责处理数据库连接并使用该数据执行一些业务逻辑。您可以为每个可用的数据库编写和编译中间件。或者您可以编写一次代码，然后在运行时激活并使用正确的数据库驱动程序。

*   如果您想动态获取 WebService 的 WSDL，生成代理并在代理编译并加载到内存后立即使用 Web 服务怎么办？在编译时想不出办法来做到这一点。

*   更好的是，如果您使用 CodeDOM 生成代码、编译、加载已编译的程序集并使用刚刚编译的对象会怎样？

有一天，您将需要使用反射。但愿如此...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T12:47:01.337

除了*Adrian Salazar*的回答之外，我还有一些我在过去几年遇到的例子：

*   **自动包装器生成。**我编写了一个使用 OpenGL/OpenAL 的跨平台框架，为了简单起见，我使用了在设备可用后初始化的委托。在 iOS 上，我需要将每个方法声明为带有 dll-import 属性的外部方法。OpenGL/OpenAL 有很多方法，所以我只编译了委托，编写了一个程序，它给我写了一个 *.cs 文件，它声明了所有这些方法。现在，这可以让我在一周的痛苦工作中保持这个包装器的最新状态。
*   **代理生成。**我曾经写过一个应用程序，它必须能够处理 Flash 对象并在 PropertyInspector 中显示它们的属性并调用对象的方法，为了能够做到这一点，我编写了一个 IL 生成器并使用反射来反映属性和调用方法。
*   最常见的示例应该是：**加载和保存数据。**这个任务主要是通过使用反射来完成的。我在 2012 年年中编写了一个 xml-reader/writer，它允许像在 XAML 中那样初始化对象，然后将这些对象再次保存到 XML 中。对象初始化并将它们再次写回 XML 是一项任务，如果您不使用反射，这将导致大量工作。

如您所见，有很多例子证明反射确实有用。在过去的 8 年中，我多次使用反射，我什至无法计算使用次数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:25:43.023

谈谈你隐含的问题。

> 但我的观点是，除非并且直到我知道方法需要作为输入的参数是什么，否则我将无法实现任何方法，并且这些信息仅在运行时可用。

我们举一个简单的例子。我想在一个需要参数的类上实例化一个方法，我将成为促进者（即我将创建类并启动该方法，但我对此一无所知）。

```
public class Foo
{
    public Foo() { }

    public void FooMethod(string parm) { }
}

public class Facilitator
{
    public void RaiseAction(string type, string action, params object[] parm)
    {
        var o = Activator.CreateInstance("MyAssembly", type);
        var methodInfo = o.GetType().GetMethod(action);
        if (methodInfo == null) { return; }
        methodInfo.Invoke(o, parm);
    }
} 
```

现在，在上面的例子中，我只是将参数传递给一个我一无所知的对象的方法。

现在，让我们来看看反射可以实现的其他一些事情。让我们想象一下，我需要找到一个`private`成员——尽管这通常是个坏主意——如果有必要我可以这样做，有时我会这样做以进行调试***和***黑客攻击。您是否曾经想要一个在运行时无法到达的标志来帮助您做出决定？您在调试器中看到了标志，但它隐藏在对象层次结构中***，***它`private`可以启动！更糟糕的是？微软表示他们将在随后的版本中以某种方式公开它，但你现在需要走出门，你需要这个标志！或者也许你需要这个方法！

考虑这个例子（`o`你需要一些私有的对象在哪里）：

```
var propertyInfo = o.GetType().GetProperty("SomePublicProperty");
if (propertyInfo == null) { return; }
var myFirstPrivateMember = propertyInfo.PropertyType.GetField("_somePrivateField", BindingFlags.Instance | BindingFlags.NonPublic); 
```

哦哦，我们刚刚获得了我们的第一个`private`成员——而且还有一个领域！

反射对我来说很重要，因为我已经构建了许多完全动态的应用程序，从数据库一直到用户体验。当您构建这样的应用程序时，您对任何事情都一无所知 - 您没有配置它 - 但由于反射的灵活性，您可以`Invoke`以及`Get`您想要或需要完成工作的任何事情。

就像其他任何东西一样，这些都是反射的***非常***简单的例子，但希望你能很好地感受反射的力量以及它为什么有用。在您的世界非常静态的大多数日常应用程序中，您可能永远不会使用它，但是稍微扩展一下并变得更加动态，您将需要它。

# node.js - 使用 Node 授权，使用 Nginx 服务

> ID：14053907
> 
> 赞同：0
> 
> 时间：2012-12-27T11:25:15.810
> 
> 标签：node.js, nginx

我希望这个问题已经得到解答，但因为我不确定我可能错过的术语，或者不理解答案。

我想使用 Nodejs 来授权和解析一个 GET 请求，即：

```
something.com/app/?key=12345&files=all 
```

然后，一旦这被节点读取，密钥授权，并且请求的文件被编译，节点会告诉 Nginx 根据这个请求返回一些静态文件。

*   那么，这可能吗？
*   有没有更好的方法（我已经看到很多关于使用 Nginx 而不是 Nodejs 提供静态文件的方法）

*编辑*- 只是通知一下，我使用的是 Express，路由不是我的问题。只是我不知道如何将成功的请求传回 Nginx，或者类似的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:28:30.520

NodeJs 有几个选项：

*   [快递](http://expressjs.com/).
*   [连接](http://www.senchalabs.org/connect/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:34:16.550

你可以做令牌认证。 [http://wiki.nginx.org/HttpSecureLinkModule](http://wiki.nginx.org/HttpSecureLinkModule)

您的 nodejs 应用程序可以生成签名链接，并且 nginx 处理提供文件的所有方面。

# java - 向未捕获的异常添加额外信息

> ID：14053912
> 
> 赞同：0
> 
> 时间：2012-12-27T11:25:35.380
> 
> 标签：java, android, error-reporting

在 Google.Play 中有一个关于未捕获异常的统计信息。我想知道有什么方法可以在异常中添加一些额外的信息，所以**它会显示在 Google.Play 中**（导致无法使用第三方错误报告服务）。

我知道`Thread.setUncaughtExceptionHandler`并且我想我可以写一些类似的东西

```
public void uncaughtException (Thread thread, Throwable ex) {
    throw new CustomException(ex, "extraData");
} 
```

例如，我的自定义异常消息。

但是还有其他方法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:40:09.807

您可以使用[ACRA](http://code.google.com/p/acra)。除了提供比 Google Play 崩溃报告更多的信息外，它还允许您轻松地将[自定义数据](https://github.com/ACRA/acra/wiki/AdvancedUsage#wiki-Adding_your_own_variables_content_or_traces_in_crash_reports)添加到报告中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:30:31.917

你的意思是？

```
public class CustomException extends Exception
{
    public CustomException(Throwable cause, String message)
    {
        super(message, cause);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:49:41.480

我会说你在这里错过了重点。为了向未捕获的异常添加信息，您需要捕获异常。一旦知道在哪里以及如何捕获异常，正确的做法是正确处理异常，以免对用户体验造成干扰。

发生未捕获的异常是因为您忽略了错误条件并且没有处理错误条件。处理错误，就不会担心未捕获的异常。

了解可能的错误条件是编写运行良好的程序的基础。如果您继续编写忽略错误和状态代码的代码，您将造成混乱，经常会因未捕获的异常而崩溃。处理异常和错误需要大量时间和代码，但它只是编程的一部分，你不能忽视。

# jquery - 在父 div 跨度和子 div 跨度中打印变量？

> ID：14053918
> 
> 赞同：-1
> 
> 时间：2012-12-27T11:26:06.603
> 
> 标签：jquery, jquery-selectors

有一个变量，假设`item`。`name`它是一个包含两个值（和）的数组`size`：即

```
item[0]=name;
item[1]=size; 
```

现在我通过 jQuery 打印`name`父 div 跨度和`size`子 div 跨度。 **如何使用 .parent() 和 .child() jquery 函数打印名称和大小？**

```
<div>
    <!--parent div-->
     <span>...Print Name...</span>
     <div>
       <span>...</span>
       <span>...</span>
     </div>
     <div>
       <span>...</span>
       <span>.. Print Size.. ..</span>
     </div>
    <!--close parent div-->
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:32:09.373

使用`.text`jQuery的功能。

将您的 html 更改为：

```
<div>
    <!--parent div-->
     <span class="name">...Print Name...</span>
     <div>
       <span>...</span>
       <span>...</span>
     </div>
     <div>
       <span>...</span>
       <span class="size">.. Print Size.. ..</span>
     </div>
    <!--close parent div-->
    </div> 
```

**jQuery**

```
$(".name").text(item[0])
$(".size").text(item[1]) 
```

# android - Radiogroups 在模拟器中的行为不正常

> ID：14053928
> 
> 赞同：0
> 
> 时间：2012-12-27T11:26:43.327
> 
> 标签：android, android-layout, android-emulator

我已经动态创建`RadioButtons`并将它们添加到`Radiogroup`. 后来`Radiogroup`被添加到一个`LinearLayout`. 我的问题是，在设备中一切正常，但在模拟器中。在模拟器中，我可以选择所有单选按钮，与其行为相反。

有什么线索吗？

示例 xml 如下

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:background="@drawable/sam_bg"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">
    <TextView
        android:id="@+id/tvReportTitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/mediumblue"
        android:textColor="@color/white" 
        android:visibility="gone"
        />
    <LinearLayout 
        android:id="@+id/llGtResponseContainer"
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical">

    </LinearLayout>

</LinearLayout> 
```

示例代码创建`Radiobuttons`和`Radiogroup`

```
public LinearLayout getLayout(ViewGroup vg) {
    LayoutInflater inflater = (LayoutInflater) context.getSystemService( Context.LAYOUT_INFLATER_SERVICE );
    view = (LinearLayout) inflater.inflate(R.layout.single_type, vg, false);
    TextView tv = (TextView)view.findViewById(R.id.txt_single);
    if(isCompulsory) {
        question = "• " + question;
    }
    tv.setText(question);
    radioView = (RadioGroup) view.findViewById(R.id.single_rg);
    for(String i : responseArray) {
        RadioButton rb = new RadioButton(context);
        // rb.setText(i);
        String str = i;
        if(str.trim().split("\\|").length > 1) {
            rb.setText((str.trim().split("\\|"))[0]);
            rb.setTag((str.trim().split("\\|"))[1]);
        }
        else {
            rb.setText(str);
            rb.setTag(str);
        }
        radioView.addView(rb);
    }
    return view;
} 
```

稍后`View`从上述方法返回的返回值被添加到 a`LinearLayout`中，该 a 再次包含在 a`ScrollView`中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:06:00.193

通过 setId() 方法向 RadioButtons 提供“id”。下面是示例代码：

```
rgroup = (RadioGroup)findViewById(R.id.rg);
        final RadioButton[] rb = new RadioButton[5];
        for (int i = 0; i < 5; i++) {
            rb[i]=new RadioButton(this);
            rb[i].setText("rdo"+i);
            rb[i].setId(i);
            rgroup.addView(rb[i]);

        } 
```

仅引用自[Android RadioButtons 在模拟器上的行为不端](https://stackoverflow.com/questions/14436513/android-radiobuttons-misbehaving-on-emulator-only)

对于模拟器和真实设备上的不同行为，原因仍然未知。

# gwt - 如何从 GWT FileUpload 组件中检索文件？

> ID：14053937
> 
> 赞同：4
> 
> 时间：2012-12-27T11:27:34.777
> 
> 标签：gwt, file-upload

我想使用 GWT fileUploader 组件上传文件，

我试过这样

```
FileUpload fileUpload = new FileUpload();
filepload.addChangeHandler(new new ChangeHandler() {
    @Override
    public void onChange(ChangeEvent event) {
         // here i submit the form, and a response is created to client side to display success message.
    } }); 
```

*   好的，到目前为止，我可以上传文件，并且可以从 servlet 发出成功消息。
*   我在表单面板的 onSubmitCompleate 事件中处理了它，
*   谢谢分配。
*   让我再问一件事，在将文件保存到数据库之前，我是否可以显示上传的文件？
*   即，实际上我需要提供一个复合组件来上传文件和文本区域以告知有关文件的详细信息。
*   当用户选择要上传的文件时，我想显示上传的文件（这样他就可以确保上传正确的文件）
*   当整个表单提交时，它将被保存到数据库中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T04:32:38.293

***我猜你想允许用户使用 GWT Fileupload 小部件上传文件，然后不希望在服务器端处理它。***您希望在客户端有一个字节数组表示。

文件处理浏览器的常用步骤 -> 文件上传对话框 -> 选择文件 -> 将带有文件的表单提交到服务器 -> 在服务器上处理文件 -> 将处理后的文件作为响应（字符串）发送回客户端。

如果您想避免上述步骤并在浏览器中处理文件，则无法在当前 javascript 中执行此操作。Flash、Applet、Silverlight 或 Activex 等并行技术可能会有所帮助。将来要采用的正确方法是使用**HTML5 文件 apis**。

如果您不想使用像 flash/applet 这样的传统技术，那么可以探索 FileReader 上的 HTML5 api。但是权衡是您需要检查是否跨浏览器支持 api。

## HTML5 文件阅读器

FileReader 包括四个用于异步读取文件的选项：

```
FileReader.readAsBinaryString(Blob|File) - The result property will contain the file/blob's data as a binary string.
FileReader.readAsText(Blob|File, opt_encoding) - The result property will contain the file/blob's data as a text string. 
FileReader.readAsDataURL(Blob|File) - The result property will contain the file/blob's data encoded as a data URL.
FileReader.readAsArrayBuffer(Blob|File) - The result property will contain the file/blob's data as an ArrayBuffer object. 
```

**这些 GWT 包装器的示例 -** [https://github.com/bradrydzewski/gwt-filesystem](https://github.com/bradrydzewski/gwt-filesystem)

参考 -

*   [http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)
*   [HTML5 File API 读取为文本和二进制](https://stackoverflow.com/questions/3146483/html5-file-api-read-as-text-and-binary)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T18:32:13.193

您可以使用流动代码在客户端（在您的 gwt 代码中）获取文件名及其扩展名：

```
FileUpload fileUpload = new FileUpload();

Button uploadButton = new Button("Click");
uploadButton.addClickHandler(new ClickHandler() {
  public void onClick(ClickEvent event) {
    String filename = fileUpload.getFilename();
      Window.alert(filename);
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T09:41:00.443

1.  您无法从 GWT FileUpload 小部件获取用户设备上文件的绝对路径。

2.  您不需要文件的绝对路径来上传文件，并将其存储为字节数组。

GWT 文档提供了如何使用 Upload File 小部件的示例：

[http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FileUpload.html](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/FileUpload.html)

# angularjs - 如何在使用 AngularJS 的路由中获取本地化模板（templateUrl）

> ID：14053939
> 
> 赞同：6
> 
> 时间：2012-12-27T11:27:43.450
> 
> 标签：angularjs

在构建国际 Web 应用程序时，有一个非常流行的用例：

每种文化都有本地化模板，名称约定如“en_US/name.html”、“ru_RU/name.html”等。

用户的区域设置只能在用户登录后获取（或者用户可以选择区域设置）。

所以我发现最好的选择是使用 DI 提供本地化价值（因此它可以在任何地方更新 - 或者当我收到来自后端的用户配置响应时，或者当用户选择某些东西时）。

但是只能在配置步骤中配置路由，其中​​无法注入“值”。因此，您不能根据该值注入语言环境配置并添加 templateUrl。

这是一个[**Plnkr 示例**](http://plnkr.co/edit/3oCumxsJPld4XTE4ZpAQ?p=preview)来说明我的解决方案。

我看到的唯一其他解决方案是修改私有路由数组（使用 $route.routes[]），但这听起来很丑陋。

是否有其他解决方案可以实现这种使用本地化模板的常见用例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T15:13:33.937

可能有一些方法可以根据需要执行此操作，例如覆盖`templateCache`而不是修改路由，但我将以不同的方式处理此问题。

在您的方法中，随着站点的增长，维护（至少）2 个模板副本将非常困难。如果你支持更多的语言，那么你遇到的麻烦就会少得多。

我会创建一个服务，它包含像语言对象一样的字典。

```
angular.module("myApp", [])
       .factory("Internationalization", function () {
           var dict: {
               en_US: {
                   hello: "Hello,"
               },
               fr_FR: {
                   salut: "Salut,"
               }
           };
           var get = function (locale, key) {
               return formatdict[locale][key];
           }
           return {get: get};
       }); 
```

然后您可以在控制器中注入服务并将其附加到范围。

这应该可以帮助您入门，如果您需要支持，您可能需要检查[一下。](https://stackoverflow.com/questions/610406/javascript-equivalent-to-printf-string-format/4673436#4673436)`string.format`

# xamarin.ios - 让 ScopeButtons 在 MonoTouch UISearchBar 中工作

> ID：14053943
> 
> 赞同：1
> 
> 时间：2012-12-27T11:28:23.253
> 
> 标签：xamarin.ios, uisearchbar, monotouch.dialog, uisearchbardelegate

我创建了一个自定义 UISearchBarDelegate。在 OnEditingStarted 事件中，我将范围按钮添加到搜索栏：

```
public override void OnEditingStarted(UISearchBar searchBar)
{
    searchBar.ScopeButtonTitles = new[] { "Scope 1", "Scope 2" };
    searchBar.ShowsCancelButton = true;
    searchBar.ShowsScopeBar = true;
} 
```

这按预期工作，范围按钮显示在搜索字段下方。

唯一的问题是，我无法切换范围。当点击“范围 2”时，没有任何反应，甚至视觉上也没有。

为了使它正常工作，是否应该进行任何其他设置？是否存在可以阻止（范围）按钮工作的已知/常见陷阱？

# nunit - 如何编写插件以扩展 ParameterizedMethodSuite 中 NUnit 测试用例中的单个测试

> ID：14053948
> 
> 赞同：1
> 
> 时间：2012-12-27T11:28:55.450
> 
> 标签：nunit, add-in

我正在编写一个插件，该插件将扩展`NUnitTestMethod`和覆盖其`RecordException()`方法，以提供有关测试的更多信息，基于可以标记测试的几个自定义属性。

到目前为止，我已经成功地创建了一个插件来扩展单个测试，`[Test]`通过使用扩展来标记属性`ITestDecorator`。当我尝试对以参数化`[TestCase()]`属性标记的测试用例做很多相同的事情时，就会出现问题。在这种情况下，NUnit 创建了一个所谓的`ParametrizedMethodSuite`.

前段时间我发布了一个关于 NUnit 邮件列表的问题，但没有得到任何答案。也许这里有一些NUnit大师，遇到同样的问题可以帮助我吗？

有关我项目中的代码示例，请参阅 NUnit 邮件列表中的帖子：
[https ://groups.google.com/d/topic/nunit-discuss/dZW0Nc8N2LM/discussion](https://groups.google.com/d/topic/nunit-discuss/dZW0Nc8N2LM/discussion)

**编辑：**
在深入研究了 NUnit 源代码之后，我终于找到了一种实现我想要的方法，尽管是以不同的方式。
据我所知，不可能`ParameterizedMethodSuite`使用您自己的测试方法进行填充，`NUnitTestMethod`因为我无法访问派生类中的私有参数构造，因此无法设置它们。
我最终扩展`ParameterizedMethodSuite`和覆盖了`Run()`方法，随后修改了`TestResult`从返回的`base.Run()`
一致性，`NUnitTestMethod`现在扩展的类也覆盖了`Run()`方法。

在这个过程中，我还发现了一个有趣的异常：`TestResult.StackTrace`有一个setter，而`TestResult.Message`没有。由于我实际上需要修改消息，因此我被迫通过该`SetResult()`方法并更新所有内容。

```
[NUnitAddin(Name = "Custom Tag Attribute Decorator", Description = "Outputs additional information for tests tagged with custom attributes.")]
public class TagDecorator : ITestDecorator, IAddin
{
    public Test Decorate(Test test, MemberInfo member)

    {
        List<Attribute> tags = Reflect.GetAttributes(member, false).OfType<ITestTag>().Cast<Attribute>().ToList();
        if (tags.Count == 0)
        {
            return test;
        }

        if (test is NUnitTestMethod)
        {
            return new TestMethodExtension((test as NUnitTestMethod).Method, tags);
        }

        if (test is ParameterizedMethodSuite)
        {

            ParameterizedMethodSuite suite = test as ParameterizedMethodSuite;
            ParameterizedMethodSuiteExtension outputSuite = new ParameterizedMethodSuiteExtension(member as MethodInfo, tags);
            NUnitFramework.ApplyCommonAttributes(member, outputSuite);
            outputSuite.RunState = suite.RunState;
            outputSuite.IgnoreReason = suite.IgnoreReason;

            foreach (NUnitTestMethod testMethod in suite.Tests)
            {
                outputSuite.Add(testMethod);
            }

            return outputSuite;
        }

        return test;
    }

    public bool Install(IExtensionHost host)
    {
        IExtensionPoint testDecorators = host.GetExtensionPoint("TestDecorators");
        if (testDecorators == null)
            return false;

        testDecorators.Install(this);
        return true;
    }
}

public static class TagExtensionHandler
{
    public static void ModifyTestResult(TestResult testResult, List<Attribute> tags)
    {
        StringBuilder message = new StringBuilder();
        message.AppendLine("Related to:");
        foreach (ITestTag taggedAttrib in tags.OfType<ITestTag>().Select(attrib => attrib))
        {
            message.Append("     ");
            message.AppendLine(taggedAttrib.GetInfo());
            message.AppendLine();
        }

        message.AppendLine();
        message.Append(testResult.Message);

        testResult.SetResult(testResult.ResultState, message.ToString(), testResult.StackTrace, testResult.FailureSite);
    }
}

public class ParameterizedMethodSuiteExtension : ParameterizedMethodSuite
{
    private readonly List<Attribute> _tags;
    public ParameterizedMethodSuiteExtension(MethodInfo method, List<Attribute> tags)
        : base(method)
    {
        _tags = tags;
    }

    public override TestResult Run(EventListener listener, ITestFilter filter)
    {
        TestResult result = base.Run(listener, filter);
        foreach (TestResult subResult in result.Results)
        {
            TagExtensionHandler.ModifyTestResult(subResult, _tags);
        }

        return result;
    }
}

public class TestMethodExtension : NUnitTestMethod
{
    private readonly List<Attribute> _tags;
    public TestMethodExtension(MethodInfo methodInfo, List<Attribute> tags)
        : base(methodInfo)
    {
        _tags = tags;
    }

    public override TestResult Run(EventListener listener, ITestFilter filter)
    {
        TestResult result = base.Run(listener, filter);
        TagExtensionHandler.ModifyTestResult(result, _tags);
        return result;
    }
} 
```

# css - IE7 中基于纯 css 的进度跟踪器列表项的边框问题，用于跨浏览器支持

> ID：14053949
> 
> 赞同：0
> 
> 时间：2012-12-27T11:28:58.340
> 
> 标签：css

我有一个基于纯 CSS 的进度跟踪器的[工作演示。](http://codepen.io/siddharth-pandey/full/FGAdH)它适用于 FF、Chrome、IE8+，但不适用于 IE7。似乎在 IE7 中边框右样式存在问题，因为未显示由三角形向下类的 div 呈现的箭头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T12:02:07.137

对css进行了一些更改

```
ul.progress-tracker div.triangle-down {
 left: -10px;
 bottom: -37px;
 margin-left: -20px;
}

.status-current{
 background: #f33738; 
} 
```

这是[演示](http://codepen.io/joe/pen/Ljgrs)

# tags - 在 RubyMine 中同时编辑 HTML 开始和结束标记

> ID：14053950
> 
> 赞同：3
> 
> 时间：2012-12-27T11:29:04.780
> 
> 标签：tags, rubymine

有什么方法可以使用快捷方式同时编辑相关标签？

例如，通过仅选择开始或结束标签来更改`<h3>Task anlegen</h3>`为？`<h2>Task anlegen</h2>`

Command+W 选择当前单词，但我想同时选择两者。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T11:50:10.913

`Refactor`| **重命名**( `Shift`+ `F6`)，然后编辑其中一个标签，另一个标签将自动编辑为相同的值。

# html - 为什么我的图像底部有填充？

> ID：14053952
> 
> 赞同：5
> 
> 时间：2012-12-27T11:29:24.830
> 
> 标签：html, css

我正在使用这个 CSS/HTML 组合来模拟两列布局：

## HTML

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div class="two-cols">
    <div class="left-col">
        <img src="http://stott.customer.netspace.net.au/images/aurora2.jpg" alt="Image"/>
    </div>
    <div class="right-col">
        Text
    </div>
</div>
</body>
</html> 
```

## CSS

```
.two-cols {
    border: 1px solid black;
    display: table;
    width: 100%;
}

.left-col, .right-col {
    display: table-cell;
    width: 50%;
}

img {
    width: 300px;
    height: 200px;
    padding: 0;
    margin: 0;
} 
```

JSBin[在这里](http://jsbin.com/ibufaz/1/)。

但是我的图像底部有一个不需要的填充：

![结果](../Images/bb4e0c60a0930220e6f984855a91e59f.png)

任何想法为什么我会得到它，我该如何摆脱它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-27T11:33:54.910

默认值`vertical-align`也`baseline`适用于`img`。让它`bottom`起作用：

```
img {
    vertical-align: bottom;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T11:34:49.370

添加`line-height:0`

```
.left-col, .right-col {
    display: table-cell;
    width: 50%; 
  line-height:0
} 
```

**[演示](http://jsfiddle.net/sTN9S/1/)**

但这会使`line-height:0`您在多行中添加更多文本。

所以我建议你使用`display:inline-block`而不是`display:table-cell`.

```
.left-col { width: 50%; vertical-align:top; display:inline-block; line-height:0;}
.right-col { width: 50%;  display:inline-block; vertical-align:bottom} 
```

**[演示 2](http://jsfiddle.net/sTN9S/3/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-02T15:59:13.620

我有同样的问题。这也是 html 电子邮件中的一个问题。只需将图像设置为显示：块。不需要线高。

```
img{
  display: block;
 }
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-02T11:03:58.477

你可以输入

```
img{
   vertical-align:middle;
} 
```

# c# - 视图模型中的 MVC 4 参数名称和继承

> ID：14053953
> 
> 赞同：1
> 
> 时间：2012-12-27T11:29:45.817
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, model-binding

我试图寻找解决问题的方法，但我失败了......

我的 Asp.NET MVC 4 Web 应用程序中有一个这样的模型：

```
public class ModelBase
{
  public string PropertyOne { get; set; }
  public string PropertyTwo { get; set; }
}

public class InheritedModelOne : ModelBase
{
  public string PropertyThree { get; set; }
}

public class InheritedModelTwo : ModelBase
{
  public string PropertyFour { get; set; }
} 
```

我的控制器中有两个动作：

```
public ActionResult ActionOne([ModelBinder(typeof(MyModelBinder))]ModelBase formData)
{
  ...
}

public ActionResult ActionTwo(InheritedModelTwo inheritedModelTwo)
{
  ...
} 
```

我的问题是，当我在 ActionTwo 的 Action 参数中使用名称“inheritedModelTwo”时，属性 PropertyFour 是正确绑定的，但是当我在 ActionTwo 的 Action 参数中使用名称 formData 时，属性 PropertyOne 和 PropertyTwo 是正确绑定的，但是属性四。我想要做的是在发布表单时正确绑定我的 ActionTwo 方法的 InheritedModelTwo 参数的所有三个属性。

更多信息：

1.  该帖子来自同一个 JQuery 请求。
2.  在这两种情况下，来自 post 的数据是相同的。
3.  这个问题的唯一区别是我的 ActionTwo 的参数名称。
4.  在 ActionTwo 的参数中输入不同的名称只会绑定 ModelBase 属性。
5.  对不起我的英语真的很糟糕。

谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:51:10.860

如果我理解正确的话...

您要做的是：使用基础对象类型映射/绑定从基础对象继承的对象。

这是行不通的，因为继承只在一个方向上起作用。

..所以你必须有**InheritingModel** TYPE 作为参数类型。

```
public class ModelBase
{
    public string PropertyOne { get; set; }
    public string PropertyTwo { get; set; }
}

public class InheritedModelOne : ModelBase
{
    public string PropertyThree { get; set; }
}

public class testObject
{ 
    [HttpPost]
    public ActionResult ActionOne(ModelBase formData)
    {
        formData.PropertyOne = "";
        formData.PropertyTwo = "";

        // This is not accessible to ModelBase
        //modelBase.PropertyThree = "";

        return null;
    }
    [HttpPost]
    public ActionResult ActionOne(InheritedModelOne inheritedModelOne)
    {
        // these are from the Base
        inheritedModelOne.PropertyOne = "";
        inheritedModelOne.PropertyTwo = "";

        // This is accessible only in InheritingModel
        inheritedModelOne.PropertyThree = "";

        return null;
    }

} 
```

# requirejs - 结合所有脚本进行部署时，require.js 有什么用？

> ID：14053957
> 
> 赞同：1
> 
> 时间：2012-12-27T11:29:58.890
> 
> 标签：requirejs

部署时，建议将所有 .js 文件合并，以减少网络请求的数量。Require.js 支持动态加载脚本。如果所有 .js 文件都组合在一起并因此已在单个请求中加载，则 require.js 会带来什么价值。

是否只是为了简化开发环境，将代码分解为单独的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:34:04.227

您将应用程序逻辑组合在一个文件中，但您可能拥有将按需加载的外部库：jQuery、Twitter Bootstrap、Knockout.js 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T11:34:34.743

RequireJS 应该在开发中和生产中一样多地使用。这不仅仅意味着在开发期间进行文件依赖管理，使用 r.js 构建单个文件用于生产是一种选择，但不是强制性的。RequireJS 不仅仅是一个开发工具。

> 建议合并所有.js文件以减少网络请求数

在浏览器知道如何并行加载代码的桌面上不是问题，导致加载时间比 1 个大文件更短。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T11:34:38.393

即使在这种情况下，使用 require.js 也有几个原因：

*   您可以显式声明模块之间的依赖关系，这样可以自动检测不需要的模块，因此它们不会包含在组合文件中。
*   它迫使您更多地考虑代码的模块化，这可能会导致代码更清晰。

还有一些不使用 require.js 的原因：

*   如果你的依赖非常简单，你可能不会从 require.js 中获得太多好处
*   使用 require.js 的设置可能更复杂。
*   您必须特别注意使用 almond.js 而不是 require.js 进行部署，否则您将面临获得比以前更大的 .js 文件的风险。

# android - 多线程在 Android 中是如何工作的？

> ID：14053959
> 
> 赞同：12
> 
> 时间：2012-12-27T11:30:16.977
> 
> 标签：android, multithreading

我正在尝试并行运行 4 个线程，但失败了。

我尝试过使用同步`wait()`和`notify()` `CyclicBarrier` `ThreadPoolExecutor` `CountDownLatch` `AsyncTask`许多其他方法，但没有管理并行运行线程。

我们可以并行运行 4 个线程（即在 android 中同时运行）吗？如何？

注意：我正在使用`AudioRecord`和`AudioTrack`API 处理音频流。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-27T11:59:08.797

> 我们可以在Android中同时运行4个线程吗？

是的，您可以并行运行 4 个线程。添加更多线程通常会有所帮助，但在某些时候，它们会导致一些性能下降。但是 4 个线程不会引起问题。

> 问题：我无法并行运行线程，即第 1 线程运行：4 次，第 2、第 3、第 4 次只有 1 次。如何使其并行运行（尝试使用提到的线程但未成功运行所有线程并行）？

如果您的目标只是让所有线程主动处理，我建议查看 Java[线程池](http://download.oracle.com/javase/tutorial/essential/concurrency/pools.html)（以及更普遍的[Executors ）。](http://download.oracle.com/javase/tutorial/essential/concurrency/executors.html)

> android支持多线程？如果是的话，多线程在android中是如何工作的？

是的，Android 支持多线程。最优选的实现方式（除了线程池和执行器）是[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)允许您实现`doInBackground()`，您的线程可以在其中完成任务。这类似于您从中获得的功能`Thread`。

真正的魔法发生在您覆盖`onPreExecute()`and时`onPostExecute()`，**它们都在 UI 线程上执行**。这应该可以防止您收到有关您的活动未附加的消息。

这个[答案](https://stackoverflow.com/questions/5202158/how-to-display-progress-dialog-before-starting-an-activity-in-android/5202186#5202186)包含一个小代码示例`AsyncTask`，可以帮助您入门。

另外，看看Android中的[处理程序](http://developer.android.com/reference/android/os/Handler.html)

**编辑——**我在研究过程中发现，录制、发送和接收音频都是非常互动的过程，它们需要同步和 IO 资源。最好的解决方案可能是，您可以为每个操作创建单独的 AsyncTask，以便每个操作在其单独的 AsyncTask 中执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T12:08:25.730

1.  您可以运行 4 个不同的线程，但为了并行（同时）执行，您必须支持它。如果你有一个单核 cpu，执行线程的顺序取决于调度程序，一次只会执行一个线程
2.  执行的顺序和时间由调度程序决定。
3.  是的，它确实。您可以同时依赖 AsyncTask 或 java 特性（例如 Executors）

# grails - Grails 路由插件 - 解析来自 gmail 收件箱的电子邮件后无法解析电子邮件正文

> ID：14053960
> 
> 赞同：0
> 
> 时间：2012-12-27T11:30:19.123
> 
> 标签：grails, email

我们正在使用`grails routing plugin`with`grails - 2.1.1`从我们的 gmail 收件箱中消费电子邮件。

我们[从 haki](http://mrhaki.blogspot.in/2009/04/use-apache-camel-plugin-in-grails.html) 到`consume email`及其相关的`attachments`. 一切都按预期工作。

```
exchange.in.headers.from - was giving us email sent from email Id.
exchange.in.headers.subject - was giving us subject of the email. 
```

但现在我们也想解析`body`电子邮件。当我们尝试打印时

```
exchange.in.body 
```

我们得到

```
javax.mail.internet.MimeMultipart@b6881e 
```

作为输出。

有没有办法以字符串格式解析整个电子邮件正文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T17:38:40.720

它是一个 javax.mail.internet.MimeMultipart 对象。根据[定义](http://docs.oracle.com/javaee/5/api/javax/mail/internet/MimeMultipart.html)，您可以尝试：

```
def body = exchange.in.body
for(int i=0; i<body.getCount(); i++){
    def part = body.getBodyPart(i)
    println 'content ' + i + ' : ' + new String(part.content)
} 
```

或者，您可以尝试使用属性来探索身体：

```
exchange.in.body.properties.each{p->
    println p
} 
```

我想推荐第二种方法，通过它您可以找到对象内部的内容以及处理它的最佳方法。

# zend-framework - 带有 QueryReadStore 虚拟分页问题的 Dojox 数据网格

> ID：14053963
> 
> 赞同：0
> 
> 时间：2012-12-27T11:30:29.997
> 
> 标签：zend-framework, dojox.grid.datagrid, dojo

我正在使用 dojox.grid.DataGrid 和 dojox.data.QueryReadStore。我在客户端有以下代码：

```
var store = new dojox.data.QueryReadStore({url:"<?php echo $this->url(array("action"=>"load-plans")) ?>"});
    //var store = new dojo.data.ItemFileWriteStore({url:"<?php echo $this->url(array("action"=>"load-plans")) ?>"});
    /*set up layout*/
    var layout = [[
            {name: 'Plan Name', field: 'title', width: '100px'},
            {name: 'User', field: 'email', width: '150px',get: formatEmail},
            {name: 'Status', field: 'percentage_completed', width: '100px'},
            {name: 'Word Count', field: 'word_count', width: '50px'},
            {name: 'Revenue Entries', field: 'revenue_count', width: '50px'},
            {name: 'Expense Entries', field: 'expense_count', width: '50px'},
            {name: 'Fund Entries', field: 'funds_count', width: '60px'},
            {name: 'Total Profit', field: 'total_profit', width: '60px'},
            {name: 'Total Funding', field: 'total_funding', width: '60px'},
            {name: 'Template Used', field: 'template_title', width: '100px'},
            {name: 'Last modified', field: 'updated_at', width: '100px'},

    ]];

    /*create a new grid:*/
    grid = new dojox.grid.DataGrid({
        id: 'plan-grid',
        store: store,
        structure: layout,
        escapeHTMLInData: false
        }, 
```

在服务器端：$data = $availableMerchants->getList($sort, $order, $start, $limit)->toArray();

```
 $dojoData = new Zend_Dojo_Data('id', $data, 'id');
    $this->getResponse()->setHeader('Content-Range', "items $start-$limit/302");
    echo $dojoData->toJson(); 
```

但是当我滚动虚拟分页时，它不起作用。它只发出 start=0&count=25 的第一个请求，而不发出进一步的请求。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T07:04:38.727

据我所知，对于 QueryReadStore 你需要有这样的回应，

```
{
   "items":[list of items],
   "identifier":"id",
   "numRows": <total no of rows>
} 
```

因此，无需在响应标头中设置项目数。您的 JSON 响应应采用上述格式。

# magento - SORT BY 导航菜单选项在 magento 页面中显示两次

> ID：14053966
> 
> 赞同：-2
> 
> 时间：2012-12-27T11:30:46.207
> 
> 标签：magento

我的网站在某些页面上两次显示 SORT BY 导航菜单。

点击[这里](http://www.musicuncle.com/live-sound/mixers.html "显示 SORT BY 菜单两次的页面")！此页面显示 SORT BY 菜单两次。

点击[这里](http://www.musicuncle.com/live-sound.html "此页面正确显示 SORT BY 菜单")！此页面正确显示 SORT BY 菜单。

请告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T13:14:27.990

这可能被声明了两次，一次在核心布局 xml 中，一次在主题的模块文件中（在我的情况下通常是 local.xml / themename.xml）......在您的情况下，这些声明可以在您的类别页面声明下找到。

# windows - git EOL 转换了相反的方式？（尽管有.gitattributes）

> ID：14053967
> 
> 赞同：1
> 
> 时间：2012-12-27T11:30:48.967
> 
> 标签：windows, git, msysgit, eol, gitattributes

我在 Windows 7 上工作，为了防止 EOL 问题，我`.gitattributes`按以下方式设置了一个文件（如[github 帮助](https://help.github.com/articles/dealing-with-line-endings)中所述）：

```
* text=auto

*.js text 
```

但是现在，当我提交一个`js`只有`LF`行尾的文件时，我会收到警告：

```
warning: LF will be replaced by CRLF in XXX.js.
The file will have its original line endings in your working directory. 
```

好吧，这听起来就像我将`CRLF`在我的存储库和`LF`我的工作目录中一样，即使它应该（并且我希望它是）完全相反。-file的`js`行尾仍在`LF`提交之后。

我是在阅读错误的警告还是`.gitattributes`以错误的方式设置？谢谢！

ps 我的全局 git 配置有`autocrlf = true`，但是由于`.gitattributes`文件的原因，在提交时不应该影响 EOL 转换

pps`js`文件在子目录中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T15:18:37.157

您应该禁用`autocrlf`- 它不会导致这种“情况”，但它*确实*与 gitattributes 设置发生冲突并且没有任何好处。

您的回购中的 EOL 转换没有任何问题。您引用的消息告诉您，如果您再次检出此文件（使用这些设置），您的工作目录中将有 CRLF。但现在它会留在LF。

如果你想知道你的 repo 中有哪些行尾内容，请运行以下命令：

```
git show commit:path/to/file | file -k - 
```

如果您想摆脱该消息，请将您的编辑器设置为使用 CRLF 保存文件。或者更好：如果您的所有工具都支持 LF 结尾，请将此 repo 设置为在结帐时使用 LF（如果您不小心使用 CRLF 保存文件，它仍然会被规范化）：

```
git config core.eol lf 
```

*注意：*这可能仅在您设置`core.autocrlf`为时才有效`false`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-07T03:32:44.873

尽管有措辞不好的警告，Git 正在做你想做的事，你不必更改任何东西（该警告只讨论工作目录 AFAIK 而不是数据库发生的事情）。

LF 将仅在 repo 中，如果您 rm 文件并再次检查它，它将在工作树中转换为 CRLF（仅）。

我见过有人说在行尾方面不要更改本地核心设置/全局变量（[文章](http://adaptivepatchwork.com/2012/03/01/mind-the-end-of-your-line/)git hub 参考）（我没有看到与 autocrlf 冲突）并且只使用 .gitattribute 因为它为项目您的工作，这是较新的方式。

如果你只想让东西成为 LF，你应该使用不同的 git 属性行，但坚持你原来的问题，这很好。（[文档页面](https://www.kernel.org/pub/software/scm/git/docs/gitattributes.html)和你的[github](https://help.github.com/articles/dealing-with-line-endings/)页面似乎说`text eol=lf`你是否只想要 LF）

*这是一个 necropost 只是说别担心它应该这么说:)*

# html - HTML+CSS：如何向水平菜单项添加箭头？

> ID：14053970
> 
> 赞同：0
> 
> 时间：2012-12-27T11:30:55.833
> 
> 标签：html, css

这是没有悬停的菜单栏中的项目的外观： ![在此处输入图像描述](../Images/02c2d2f6ac4583df93e8c7b551e5622c.png)

这是悬停效果： ![在此处输入图像描述](../Images/d85931c549b2908ebb63058a4f0032fe.png)

这是我要添加的箭头： ![在此处输入图像描述](../Images/268252c0d398705aa752f23b7f293531.png)

我当前的 CSS 公式如下所示：

```
ul.profile_menu {
    background: url('menu.png') repeat-x;
    list-style-type: none;
    margin: 0;
    padding: 0;
    float: left;

    li {
        display: inline;
        a {
            float: left;
        }
        a:hover {
            background: url('active_item.png') repeat-x;
                    height: 45px;
        }
    }   
} 
```

但是如何在活动项目的底部添加箭头？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T11:36:34.310

您可以纯粹使用 CSS 本身（没有 CSS3 特定的东西 - 与所有浏览器兼容）生成箭头（当前）。

使用此站点生成箭头所需的 CSS：http: [//cssarrowplease.com](http://cssarrowplease.com)

# xml - 简单 XML 上每个循环的 XSLT

> ID：14053971
> 
> 赞同：2
> 
> 时间：2012-12-27T11:31:03.023
> 
> 标签：xml, xslt, xslt-1.0

我有一个这样的 XML

```
 <filters extra="filters">
<ISP_WebItem FILTER="Farve" FILTERNAME="Sort" UNITCODE=""/>
<ISP_WebItem FILTER="Længde" FILTERNAME="51" UNITCODE="cm"/>
<ISP_WebItem FILTER="Højde" FILTERNAME="3.2" UNITCODE="cm"/>
<ISP_WebItem FILTER="Dybde" FILTERNAME="9" UNITCODE="cm"/>
<ISP_WebItem FILTER="Stavlængde" FILTERNAME="11" UNITCODE="cm"/>
      </filters> 
```

我想遍历每个 ISP_WebItem 并显示 FILTER、FILTERNAME 和 UNITCODE。我试过这样的事情

```
<xsl:for-each select="filters/ISP_WebItem ">              
          <xsl:value-of  select="FILTER" />
          <xsl:value-of  select="FILTERNAME" />
          <xsl:value-of  select="UNITCODE" />
 </xsl:for-each> 
```

但没有用。当我放置一个断点并检查时，我发现每个循环内部都不会发生代码执行（每个循环内部的断点永远不会命中）。

我对 XSLT 的了解有限，我知道这可能是一个简单的问题。但我真的需要克服这个问题。任何人都可以指导我。

注意：由于有些人要求完整的 XSLT 和 XML，我将其发布在这里

完整的 XSLT

```
<xsl:template match="/">      
<xsl:variable name="p">
  <xsl:choose>
    <xsl:when test="library:Request('pid') != ''">
      <xsl:copy-of select="shop:GetProductFromId(library:Request('pid'))" />
    </xsl:when>
    <xsl:otherwise>
      <xsl:copy-of  select="shop:GetProductFromId(shop:UrlInformation()//productid)" />
    </xsl:otherwise>
  </xsl:choose>
</xsl:variable>
<xsl:copy-of select="msxsl:node-set($p)/product/filters"/>
<xsl:for-each select="msxsl:node-set($p)/product/filters/ISP_WebItem">
    <xsl:value-of  select="@FILTER" />
    <xsl:value-of  select="@FILTERNAME" />
    <xsl:value-of  select="@UNITCODE" />
  </xsl:for-each>
</xsl:template> 
```

完整的 XML

```
 <product>
  <estocklevel>0</estocklevel>
  <url>/product/relief-smal-brevordner-bordeaux-2</url>
  <texts>
    <text language="standard">
      <name>Relief Smal Brevordner, Bordeaux (2)</name>
      <longdescription></longdescription>
      <shortdescription>(10)</shortdescription>
      <htmltitle></htmltitle>
      <metadescription></metadescription>
      <metakeywords></metakeywords>
    </text>
  </texts>
  <name>Relief Smal Brevordner, Bordeaux (2)</name>
  <longdescription></longdescription>
  <shortdescription>(10)</shortdescription>
  <htmltitle></htmltitle>
  <metadescription></metadescription>
  <metakeywords></metakeywords>
  <alternativeitemid></alternativeitemid>
  <alternativeitemrule>0</alternativeitemrule>
  <duties />
  <oncampaign extra="oncampaign">0</oncampaign>
  <minweb extra="minweb">0.000000000000</minweb>
  <stockitem extra="stockitem">0.000000000000</stockitem>
  <isp_model extra="isp_model">Smal</isp_model>
  <produkttype extra="produkttype"></produkttype>
  <filters extra="filters">
    <ISP_WebItem FILTER="Farve" FILTERNAME="Bordeaux" UNITCODE=""/>
    <ISP_WebItem FILTER="Rygbredde" FILTERNAME="5" UNITCODE="cm"/>
    <ISP_WebItem FILTER="Papirstørrelse" FILTERNAME="A4" UNITCODE=""/>
    <ISP_WebItem FILTER="Max indhold" FILTERNAME="350 A4 ark" UNITCODE=""/>
    <ISP_WebItem FILTER="Rygetiket" FILTERNAME="Med udskiftelig rygetiket" UNITCODE=""/>
    <ISP_WebItem FILTER="Materiale 1" FILTERNAME="PP" UNITCODE=""/>
    <ISP_WebItem FILTER="Materiale" FILTERNAME="Pap" UNITCODE=""/>
    <ISP_WebItem FILTER="Ringtype" FILTERNAME="D" UNITCODE=""/>
    <ISP_WebItem FILTER="Antal ringe" FILTERNAME="2" UNITCODE=""/>
  </filters>
</product> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T11:37:49.457

通过使用 @ 来选择属性以区分元素的属性。在[xslfiddle.net上测试](http://www.xslfiddle.net/)

**xsl**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" encoding="iso-8859-1" indent="no"/>

<xsl:template match="/">
    <xsl:for-each select="filters/ISP_WebItem">
      <xsl:value-of  select="@FILTER" />
      <xsl:value-of  select="@FILTERNAME" />
      <xsl:value-of  select="@UNITCODE" />
    </xsl:for-each>
  </xsl:template>

</xsl:stylesheet> 
```

**xml**

```
<filters extra="filters">
    <ISP_WebItem FILTER="Farve" FILTERNAME="Sort" UNITCODE=""/>
    <ISP_WebItem FILTER="Længde" FILTERNAME="51" UNITCODE="cm"/>
    <ISP_WebItem FILTER="Højde" FILTERNAME="3.2" UNITCODE="cm"/>
    <ISP_WebItem FILTER="Dybde" FILTERNAME="9" UNITCODE="cm"/>
    <ISP_WebItem FILTER="Stavlængde" FILTERNAME="11" UNITCODE="cm"/>
</filters> 
```

**结果**

```
<html><head></head><body>FarveSortLængde51cmHøjde3.2cmDybde9cmStavlængde11cm</body></html> 
```

# visual-studio-2010 - 在 Windows x64 上安装节点画布的平台 x64 无效？

> ID：14053974
> 
> 赞同：2
> 
> 时间：2012-12-27T11:31:32.947
> 
> 标签：visual-studio-2010, node.js, canvas

我在运行 Windows 7 64 位的 Windows 机器上安装[node-canvas时遇到问题。](https://github.com/LearnBoost/node-canvas)我已按照[说明](https://github.com/LearnBoost/node-canvas/wiki/Installation---Windows)进行操作，并且还使用 Visual C++ Professional（试用版）进行了尝试，但这也无济于事。

当我输入`npm install canvas`时，它给了我以下信息：

```
npm http GET https://registry.npmjs.org/canvas
npm http 304 https://registry.npmjs.org/canvas
npm http GET https://registry.npmjs.org/canvas/-/canvas-0.13.1.tgz
npm http 200 https://registry.npmjs.org/canvas/-/canvas-0.13.1.tgz

>canvas@0.13.1 install C:\wamp\www\node_modules\canvas
>node-gyp rebuild

C:\wamp\www\node_modules\canvas>node "C:\Program Files\nodejs\node_modules\npm\bin\node-gyp-bin\..\..\node_modules\node-gyp\bin\node-gyp.js" rebuild
Building the projects in this solution one at a time. To enable parallel build, please add the "/m" switch.
canvas@0.13.1 install C:\wamp\www\node_modules\canvas
> node-gyp rebuild

C:\wamp\www\node_modules\canvas>node "C:\Program Files\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\node_modules\node-gyp\bin\node-gyp.js" rebuild 
Building the projects in this solution one at a time. To enable parallel build, please add the "/m" switch.
C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.Cpp.InvalidPlatform.Targets(23,7): error MSB8007: The Platform for project 'canvas.vcxproj' is invalid.  Platform='x64'. You may be seeing this message because you are trying to build a project without a solution file, and have specified a non-default Platform that doesn't exist for this project. [C:\wamp\www\node_modules\canvas\build\canvas.vcxproj]
gyp ERR! build error
gyp ERR! stack Error: 'C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe' failed with exit code: 1
gyp ERR! stack at ChildProcess.onExit (C:\Program Files\nodejs\node_modules\npm\node_modules\node-gyp\lib\build.js:232:23)
gyp ERR! stack at ChildProcess.EventEmitter.emit (events.js:99:17)
gyp ERR! stack at Process._handle.onexit (child:process.js:678:10)
gyp ERR! Syste, Windows_NT 6.1.7601
gyp ERR! command "node" "C:\\Program Files\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js" "rebuild"
gyp ERR! cwd C:\wamp\www\node_modules\canvas
gyp ERR! node -v v0.8.16
gyp ERR! node-gyp -v v0.7.3
gyp ERR! not ok
canvas@0.13.1 node_modules\canvas 
```

（我希望我正确地输入了控制台输出，因为我不得不从控制台中输入它，因为没有找到日志，而且 Windows 显然不允许您将完整的 cmd 输出记录到文件中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-01T12:55:53.387

通过将 VS2010 替换为 VS2012（两个 Express 版本），我能够解决同样的问题。

# php - 在 codeigniter 中发送电子邮件时出错

> ID：14053991
> 
> 赞同：0
> 
> 时间：2012-12-27T11:32:31.200
> 
> 标签：php, codeigniter, email

我正在使用以下配置通过 php 邮件功能发送邮件：

```
function sendInvoiceEmail() { 
```

获取客户电子邮件

```
 $recieverEmail = xyz@test.com; //Valid Email ID
        $recieverName = xyz; 
```

创建电子邮件配置阵列

```
 $emailConfig = array(
            'protocol' => 'smtp',
            'smtp_host' => 'ssl://smtp.googlemail.com',
            'smtp_port' => 465,
            'smtp_user' => 'abc@abc.com',   //Valid Email ID
            'smtp_pass' => 'password',      //Valid password
            'mailtype' => 'html', //text or html
            'charset' => 'iso-8859-1',
        ); 
```

设置您的电子邮件信息

```
 $from = array('email' => 'abc@abc.com', 'name' => 'Testing');

    $to = array('email' => $recieverEmail, 'name' => $recieverName);
        $subject = "Test Mail for Invoice ";

        $message = "Test Message for Invoice"; 
```

加载 CodeIgniter 电子邮件库

```
 $this->load->library('email', $emailConfig);
        $this->email->initialize($emailConfig); 
```

有时您必须设置换行符以获得更好的结果

```
 $this->email->set_newline("\r\n"); 
```

设置电子邮件首选项

```
 $this->email->from($from['email'], $from['name']);
        $this->email->to($to['email'], $to['name']);
        $this->email->subject($subject);
        $this->email->message($message); 
```

准备发送邮件并检查邮件是否发送成功

```
 if ($this->email->send()) {
            return true;
        } else {
            show_error($this->email->print_debugger());                
        }
    } 
```

我有 PHP 5.3.9 版本和 wampserver 但我收到以下错误：

```
An Error Was Encountered

The following SMTP error was encountered: 52770504 Unable to find the socket 
transport "ssl" - did you forget to enable it when you configured PHP?
Unable to send data: AUTH LOGIN
Failed to send AUTH LOGIN command. Error:
Unable to send data: MAIL FROM:

from: 

The following SMTP error was encountered:
Unable to send data: RCPT TO:

to: 

The following SMTP error was encountered:
Unable to send data: DATA

data: 

The following SMTP error was encountered:
Unable to send data: User-Agent: CodeIgniter Date: Thu, 27 Dec 2012 16:50:28 
+0530 From: "Invoice Tester" Return-Path: To: df@df.kl Subject: =?iso-8859-1?Q?Test_Mail_for_Invoice_?= Reply-To: "sujit.singh@xpointers.com" X-Sender: sujit.singh@xpointers.com X-Mailer: CodeIgniter X-Priority: 3 (Normal) Message-ID: <50dc2efca4149@xpointers.com> Mime-Version: 1.0 Content-Type: multipart/alternative; boundary="B_ALT_50dc2efca4160" This is a multi-part message in MIME format. Your email application may not support this format. --B_ALT_50dc2efca4160 Content-Type: text/plain; charset=iso-8859-1 Content-Transfer-Encoding: 8bit Test Message for Invoice --B_ALT_50dc2efca4160 Content-Type: text/html; charset=iso-8859-1 Content-Transfer-Encoding: quoted-printable Test Message for Invoice --B_ALT_50dc2efca4160--
Unable to send data: .

The following SMTP error was encountered:
Unable to send email using PHP SMTP. Your server might not be configured to 
```

使用此方法发送邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T11:43:44.223

尝试将“smtp_host”更改为“ **smtp.gmail.com** ”

签出：[SMTP 错误：无法连接到 SMTP 主机](https://stackoverflow.com/questions/6209064/smtp-error-could-not-connect-to-smtp-host)

**尝试检查 SSL 错误：**

从错误看来，您的 PHP 版本可能没有使用 ssl 编译。

跑：

```
<?php
phpinfo();
?> 
```

并检查“配置命令”是否有类似“--with-openssl=/usr”的内容。还要检查您是否在“注册的流套接字传输”部分中列出了 ssl。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:41:18.603

我知道 wampserver 在 PHP 扩展中有设置，所以如果您使用 wampserver，那么您可以执行以下步骤：

1) 转到 WampSever 托盘图标

2) 转到 PHP 扩展

3) 搜索`php_openssl`

4) 如果未选中，则将其标记为已选中 ( `php_openssl`)

否则你可以参考迈克尔的回答:)

希望它会帮助你。

# jquery - 滑块 div 中的 Jquery 中心图像

> ID：14053994
> 
> 赞同：1
> 
> 时间：2012-12-27T11:32:56.813
> 
> 标签：jquery

我想将图像居中在`div`. 我的代码是，

```
<html>
<head>
    <title>test</title>
    <style type="text/css">
        .wrapper { 
            background:#EFEFEF; 
            margin: auto; 
            position: relative;
            margin-bottom: 20px !important;
            width: 800px;
            padding-top: 5px;
        }
        .scrolls { 
            overflow-x: scroll;
            overflow-y: hidden;
            height: 400px;
        } 
        .imageDiv { 
            margin: 0;
            height: 400px;
        } 
        .imageDiv img { 
            max-height: 400px;
            cursor: pointer;
            margin-left:20px;
        }
    </style>
    <script type="text/javascript" src="jquery-latest.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            var wh=$(window).height()/4;
            $('.wrapper').css('margin-top',wh);
        });
        $(window).load(function(){
            var tw = 0;
            $.each($('.imageDiv img'), function() {
                tw += $(this).width();
            });
            $('.imageDiv').width(tw);
            $('.imageDiv img').click(function(){
                var imgid=$(this).attr('id');
                var width = $(imgid).width();
                var margin = width/2;
                $(imgid).css("margin-left","-"+margin);
            });
        });
    </script>
</head>
<body>
    <div class="wrapper">
        <div class="scrolls">
            <div class="imageDiv">
                    <img src="001_19_3.jpg" id="img1"/>
                    <img src="002_21_3.jpg" id="img2"/>
                <img src="003_19_3.jpg" id="img3"/>
                <img src="004_19_3.jpg" id="img4"/>
                <img src="005_15_3.jpg" id="img5"/>
                <img src="NB_1a_3.jpg"  id="img6"/>
                <img src="NB_2_3.jpg"   id="img7"/>
                <img src="NB_3_3.jpg"   id="img8"/>
            </div>
        </div>
    </div>
</body> 
```

如果我单击滑块中的图像，该图像应该转到 div 的中心。并且滚动条也想根据图像的位置移动。任何人都可以帮忙吗？请！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:49:45.607

尝试这个：

```
$('.imageDiv img').click(function() {
    var imgid = $(this).attr('id');
    var width = $(imgid).width();
    var margin = width / 2;

    var cssObj = {
        'margin-left': '-' + margin,
        'position': 'absolute',
        'left': '50%'
    }

    $(imgid).css(cssObj);
}); 
```

# c# - 动态生成方法值

> ID：14053997
> 
> 赞同：-1
> 
> 时间：2012-12-27T11:33:32.620
> 
> 标签：c#, dynamic, methods

此代码将帮助我按此顺序生成标签，例如

> A1 A2 A3 A4 A5
> B1 B2 B3 B4 B5
> C1 C2 C3 C4 C5
> D1 D2 D3 D4 D5

但现在我想要的是我可以点击标签，每个标签都会有自己的ID并调用一个方法来检查是否可以免费使用。
所以我需要让它自动生成粗体部分

```
vartable[namelabel].Click += new System.EventHandler(**vartable[namelabel]_Click**); 
```

namelabel 自动生成与名称或

```
Private void lbl11_Click 
```

我能做些什么？

```
private void button1_Click(object sender, EventArgs e)
    {

        for (int i = 1; i <= 9; i++)
        {
            for (int q = 1; q <= 9; q++)
            {
                string lettle="a";
                if(i==1)
                {
                    lettle="A";
                }
                else if(i==2)
                {
                    lettle="B";
                }
                else if (i == 3)
                {
                    lettle = "C";
                }
                else if (i == 4)
                {
                    lettle = "D";
                }
                else if (i == 5)
                {
                    lettle = "E";
                }
                else if (i == 6)
                {
                    lettle = "F";
                }
                else if (i == 7)
                {
                    lettle = "G";
                }
                else if (i == 8)
                {
                    lettle = "H";
                }
                else if (i == 9)
                {
                    lettle = "I";
                }

                string labeltext = lettle + q;
                int y = (100 + (q * 20));
                int x = (100 + (i * 20));
                string namelabel = "lbl" + i + q;
                var method = namelabel;
                   var vartable = new Dictionary<string, Label>();
                    vartable[namelabel] = new Label();
                    vartable[namelabel].AutoSize = true;
                    vartable[namelabel].Location = new System.Drawing.Point(y, x);
                    vartable[namelabel].Name = namelabel;
                    vartable[namelabel].Size = new System.Drawing.Size(35, 13);
                    vartable[namelabel].TabIndex = 1;
                    vartable[namelabel].Text = labeltext;
                    vartable[namelabel].Cursor = System.Windows.Forms.Cursors.Hand;
                    this.Controls.Add(vartable[namelabel]);
                    vartable[namelabel].Click += new System.EventHandler(**vartable[namelabel]_Click**);

            }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T13:30:37.947

您可以使用 Label 的“Tag”属性（从基类 Control 继承）来存储座位号。这允许您对所有 Label 对象使用相同的事件处理程序。一旦事件处理程序被调用，它可以通过检查标签来确定实际点击了哪个标签。

预订/可用信息可以存储在由座位号索引的布尔数组中。

示例事件处理程序：

```
 private void label_Click(object sender, EventArgs e)
        {
            if (((Label)sender).Tag.Equals("1"))
            {
                MessageBox.Show("Label 1 clicked!");
            }
        } 
```

# php - base64_encode 在字符串前返回空格

> ID：14053998
> 
> 赞同：1
> 
> 时间：2012-12-27T11:33:37.577
> 
> 标签：php, base64

我正在使用一个名为 ViaPost 的网站为我的企业邮寄信件。我正在使用 SoapClient。上传的文件必须是 base64binary 格式。我正在使用以下代码，但返回空。

```
 $pdf_data = file_get_contents('test.pdf'); 
    $pdf_data = base64_encode($pdf_data);
    print $pdf_data; 
```

扩展上述内容：

```
 POST /viapostcustomer.asmx HTTP/1.1
    Host: api.viapost.com
    Content-Type: text/xml; charset=utf-8
    Content-Length: length
    SOAPAction: "http://api.viapost.com/CreateLetter"

    <?xml version="1.0" encoding="utf-8"?>
    <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
      <soap:Body>
        <CreateLetter xmlns="http://api.viapost.com">
          <loginToken>string</loginToken>
          <name>string</name>
          <description>string</description>
          <FileContents>base64Binary</FileContents>
          <dynamic>boolean</dynamic>
          <shareLetterWithGroup>boolean</shareLetterWithGroup>
          <returnMessage>string</returnMessage>
          <letterID>long</letterID>
        </CreateLetter>
      </soap:Body>
    </soap:Envelope>

    HTTP/1.1 200 OK
    Content-Type: text/xml; charset=utf-8
    Content-Length: length

    <?xml version="1.0" encoding="utf-8"?>
    <soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
      <soap:Body>
        <CreateLetterResponse xmlns="http://api.viapost.com">
          <CreateLetterResult>boolean</CreateLetterResult>
          <returnMessage>string</returnMessage>
          <letterID>long</letterID>
        </CreateLetterResponse>
      </soap:Body>
    </soap:Envelope>

    <?php
    $client = new SoapClient("http://api.viapost.com/viapostcustomer.asmx?WSDL");
    $params = array('sUserName'=>'USERNAME','sPassword'=>'PASSWORD','sLoginToken'=>'','sReturnMessage'=>'');
    $SignIn = $client->__soapCall('SignIn', array($params));
    $sLoginToken = $SignIn->sLoginToken;

    $pdf_data = file_get_contents('test.pdf');
    $pdf_data = base64_encode($pdf_data);
    $params = array('loginToken'=>$sLoginToken,'name'=>'testname','description'=>'testdescription','fileContents'=>$pdf_data,'dynamic'=>'true','shareLetterWithGroup'=>'false','returnMessage'=>'','letterID'=>'');
    $CreateLetter = $client->__soapCall('CreateLetter', array($params));
    $returnMessage = $CreateLetter->returnMessage;
    print $returnMessage;

    ?> 
```

它返回：保存文件时出现问题。请再试一次。

我做了一些我知道我做过的愚蠢的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T11:37:39.583

`base64_encode`如果传递的参数本身为空，将返回空字符串。在将数据传递给此函数之前，您应该检查这一点。

```
if(strlen($pdf_data)>0){
   $pdf_data = base64_encode($pdf_data);
}else{
   throw new Exception("Empty File provided");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T11:37:57.443

尝试增加错误报告，奇怪的失败检查也不会受到伤害。这应该会有所帮助。:)

```
<?php
error_reporting(-1);
ini_set('display_errors', true);
$pdf_data = file_get_contents('test.pdf');

if( ! $pdf_data) {
    print 'Could not read file';
    exit;
}

$pdf_data = base64_encode($pdf_data);
print $pdf_data; 
```